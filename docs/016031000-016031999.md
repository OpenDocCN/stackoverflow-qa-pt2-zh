# StackOverflow 问答 16031000-16031999

# sql - 获取包含sql server中所有子记录的记录

> ID：16031000
> 
> 赞同：0
> 
> 时间：2013-04-16T07:19:24.350
> 
> 标签：sql, sql-server-2008, parent-child, common-table-expression

我在 sql server 中有分层数据。以下是我的数据继承树。

```
Id      Name         ParentID

1124    ABC          2
1125    BCD          1124
1126    EFG          1124   
1127    HIJ          1126   
1128    KLM          1126
1129    OPQ          1124   
1130    RST          1124
1131    UVW          1130
1132    XYZ          1131
1133    ZYA1         1124 
```

现在我想从上表得到以下结果。在那我想要从根（父）与所有孩子到最后一个孩子的路径。

```
Id      Name    ParentID    PATH

1124    ABC     2           ABC
1125    BCD     1124        ABC/BCD
1126    EFG     1124        ABC/EFG
1127    HIJ     1126        ABC/EFG/HIJ
1128    KLM     1126        ABC/EFG/KLM
1129    OPQ     1124        ABC/OPQ
1130    RST     1124        ABC/RST
1131    UVW     1130        ABC/RST/UVW
1132    XYZ     1131        ABC/RST/UVW/XYZ
1133    ZYA1    1124        ABC/ZYA1 
```

所以任何人都可以帮助我编写 sql 查询来找出包含从父级到所有包含子级的所有记录的路径。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:35:36.120

您需要使用递归公用表表达式，然后仅过滤每条记录的基本路径的结果（即对于 ID 1131 get`ABC/RST/UVW`而不仅仅是`ABC/RST`

```
WITH CTE AS
(   SELECT  ID, 
            Name, 
            ParentID, 
            NextParentID = ParentID, 
            Path = CAST(Name AS VARCHAR(MAX)),
            Recursion = 1
    FROM    T
    UNION ALL
    SELECT  CTE.ID, 
            CTE.Name, 
            CTE.ParentID, 
            T.ParentID, 
            CAST(T.Name + '/' + CTE.Path AS VARCHAR(MAX)),
            Recursion + 1
    FROM    CTE
            INNER JOIN T
                ON CTE.NextParentID = T.ID
), CTE2 AS
(   SELECT  CTE.ID,
            CTE.Name,
            CTE.ParentID,
            CTE.Path,
            RowNumber = ROW_NUMBER() OVER(PARTITION BY CTE.ID ORDER BY Recursion DESC)
    FROM    CTE
)
SELECT  ID, Name, ParentID, Path
FROM    CTE2
WHERE   RowNumber = 1; 
```

**[SQL Fiddle 示例](http://sqlfiddle.com/#!3/07faa/2)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:29:16.503

请试试：

```
DECLARE @table as TABLE(Id INT, [Name] NVARCHAR(50), ParentID INT)

insert into @table values
(1124, 'ABC', 2),
(1125, 'BCD', 1124),
(1126, 'EFG', 1124),
(1127, 'HIJ', 1126), 
(1128, 'KLM', 1126),
(1129, 'OPQ', 1124), 
(1130, 'RST', 1124),
(1131, 'UVW', 1130),
(1132, 'XYZ', 1131),
(1133, 'ZYA1', 1124)

;WITH parent AS
(
    SELECT *, convert(nvarchar(max), [Name]) as [Path] from @table WHERE ParentID = 2
    UNION ALL 
    SELECT t.*, convert(nvarchar(max), parent.[Path]+'\'+t.[Name]) as [Path]
    FROM parent
    INNER JOIN @table t ON t.parentid =  parent.id
)SELECT * FROM parent
ORDER BY ID 
```

# php - mysql 如果不存在，则从其他表中选择默认图像

> ID：16031005
> 
> 赞同：1
> 
> 时间：2013-04-16T07:19:29.123
> 
> 标签：php, mysql

我有一个专辑库，其数据架构如下

```
| album_id | album_title |
| 1        |  test       |
| 2        |  test123    |
| 3        |  testing    |

| img_id   | img_albumid | img_full_path  | img_album_cover
| 1        |  1          | /blabla/1.jpg  |  0
| 2        |  1          | /blabla/2.jpg  |  1
| 3        |  1          | /blabla/3.jpg  |  0
| 4        |  2          | /blabla/4.jpg  |  0
| 5        |  2          | /blabla/5.jpg  |  1
| 6        |  3          | /blabla/6.jpg  |  0
| 7        |  3          | /blabla/7.jpg  |  0 
```

我可以通过交叉加入图像来显示相册。问题是，我想设置专辑封面默认图像。如果用户设置了封面相册，它将从图像表中显示，但如果未设置封面相册，则只需从 img 获取任何图像作为封面。到目前为止，此查询有效，但不适用于封面专辑

```
SELECT album_id, album_title, img_full_path
FROM album 
LEFT JOIN image ON album_id = img_albumid
WHERE img_albumid != 0
GROUP BY(album_id) 
limit 10 
```

如何使用 php 和 mysql 查询来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:23:48.967

使用`IFNULL()`功能：

```
SELECT album_id, album_title, IFNULL(img_full_path, 'default.jpg') as img_full_path
FROM album 
LEFT JOIN image ON album_id = img_albumid
WHERE img_albumid != 0
GROUP BY(album_id) 
limit 10 
```

来源：[http ://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html)

您甚至可以使用子查询，它应该只包含一行和一列，如下所示：

```
SELECT
    album_id,
    album_title,
    IFNULL(img_full_path, (
        SELECT
            img_full_path
        FROM
            image
        WHERE
            (img_albumid = album_id)
            AND
            NOT (img_full_path IS NULL)
        ORDER BY
            RAND()
        LIMIT 1)
    ) as img_full_path
FROM
    album LEFT JOIN image ON album_id = img_albumid
WHERE
    img_albumid != 0
GROUP BY
    album_id
LIMIT 10 
```

# javascript - 每当我点击我的页面时，引导日期选择器都会设置当前日期

> ID：16031008
> 
> 赞同：0
> 
> 时间：2013-04-16T07:19:36.620
> 
> 标签：javascript, jquery, twitter-bootstrap, knockout.js, datepicker

我正在使用带有淘汰赛的引导日期选择器，但它无法正常工作。每当我单击`html`页面上的任何位置时，它都会调用 datepicker 设置值并设置当前日期。

请让我知道如何防止此调用设置值，直到我从日期选择器控件中选择日期。

这就是我正在做的事情。

```
<div class="control-group">
    <span class="control-label lblWidth">Start Date:</span>
    <div class="btn-group">
        <div class="input-append date" data-date="dateValue:Project.sDate">
            <input class="span2" size="16" type="text" data-bind="value:Project.sDate" readonly="readonly" />
            <span class="add-on"><i class="icon-calendar"></i></span>
        </div>
    </div>
</div>

<div class="control-group">
   <span class="control-label lblWidth">End Date:</span>
   <div class="btn-group">
       <div class="input-append date" data-date="dateValue:Project.eDate">
           <input class="span2" size="16" type="text" data-bind="value:Project.eDate" readonly="readonly" />
           <span class="add-on"><i class="icon-calendar"></i></span>
       </div>
    </div>
</div> 
```

在 JavaScript 中：

`$('.date').datepicker();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T06:34:42.330

试试那个代码： `$('.date').datepicker('update',required_date);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T14:18:54.597

我刚才遇到了完全相同的问题。虽然我不知道问题的根源，但我能够通过下载最新版本的 bootstrap datepicker ( [http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/) ) 并更新/替换*bootstrap-datepicker来解决问题.js*文件。

# iphone - 如何在 Master-Detail 应用程序中使用 AddButton 创建新视图

> ID：16031010
> 
> 赞同：0
> 
> 时间：2013-04-16T07:19:42.187
> 
> 标签：iphone, ios, objective-c, storyboard

我用 Xcode 做了一个主从应用程序。不，我有以下问题/问题。

如果您按下“添加”按钮的顶部，我想创建一个新视图。我发现了它是如何以编程方式工作的。

```
UIViewController *addView = [[UIViewController alloc]init];
[self.navigationController pushViewController:addView animated:YES]; 
```

但是新视图现在不存在于情节提要编辑器中。我是否还必须以编程方式创建标签、文本字段等？或者还有其他方法可以做到这一点。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:35:15.253

故事板视图和以编程方式创建的视图可以很好地共存。如果您出于某种原因在故事板中需要它们，请在此处创建视图并从一开始就隐藏（并停用）它。在程序中，而不是创建一个新的，只需取消隐藏并激活它。

但是，没有理由不以编程方式创建它。

故事板的工作原理是这样的：每个视图都有一个相应的格式`nib`文件，称为。加载视图时会加载此 XML 文件。您在 IB/Storyboard 中所做的所有视图和设置都以 XML 格式存储在那里。然后框架通过文件中的条目工作，并通过使用文件中的设置以编程方式为您创建视图。`XML``xib``XML``xml`

所以最后，以编程方式创建的视图与通过情节提要创建的视图没有太大区别。

对于以编程方式创建的视图：

*   你不需要财产。
*   如果需要，则无需标记为`IBOutlet`。
*   以编程方式创建的视图的属性应该是`strong`. IB/Storyboard`IBOutlet`视图属性可以是`weak`.
*   故事板并不“认识”它们。因此，您无法将故事板中的 segues 链接到相关操作等。但是您可以通过编程方式调用 segues，故事板将继续运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:24:48.907

以编程方式创建的视图不会显示在故事板上。

如果它只是您想要创建的一次性视图，您可以将其添加到情节提要中，设置所有属性和子视图，将其设置为`hidden`并将其绑定到 ivar。这样您就可以通过 ivar 访问它，并设置`hidden`为`no`您想要显示它的时间。您可以尝试其他方法，但这很好也很容易。

# asp.net-mvc - Asp.Net MVC 项目的多个副本

> ID：16031011
> 
> 赞同：1
> 
> 时间：2013-04-16T07:19:42.593
> 
> 标签：asp.net-mvc, project-structure, multiple-projects

我们有一个抽象的 asp.net mvc 项目，它有很多副本。实际上，每个副本项目都具有几乎相同的功能。但有时在某些动作和控制器中可能会有所不同。此外，每个副本项目都有自己的主题。但他们共享来自抽象基础项目的大部分 javascript 代码。

在这方面，我们遇到了一些困难。

*   首先，我们不能继承 mvc 视图，所以每个副本项目都有自己的视图。当我们想改变一个功能时，我们必须在每个项目的视图中实现它。
*   在这种方法中，javascript 也是令人头疼的问题。因为，有时您必须在 javascript 中使用 html 层次结构。而且每一个html代码都是不同的，因为视图不同。
*   每次我们开始一个新的副本项目时，对我们来说都是一种痛苦。因为即使我们试图坚持基础抽象项目，我们也必须离开基础项目。

因此，我们需要一个可以为我们构建新项目（如主题更改）提供的项目结构。我研究了 MEF 结构。我不知道如果我们将复制项目作为插件制作会发生什么。此外，我不想将视图作为资源集成到程序集文件中。因为它不容易修改。我还研究了一些 MVC 主题结构，但这不是一个好的解决方案，因为它不可继承。

你的建议是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T21:40:18.003

不确定您是否已经找到解决问题的方法，但这是我的 2 美分

我也有多个 MVC 项目，有时我需要在所有项目中共享视图。为了解决 JS 问题，我创建了一个“CDN”项目，它只为所有其他应用程序提供静态文件（JS、CSS、资产）。所以我的 JS 调用将是

```
<script type="text/javascript" src="http://my_cdn_app/Scripts/myscript.js"></script> 
```

对于视图问题，我找到了这个剃刀生成器，您可以在其中在类库中编译一堆视图（非常酷 ey） 缺点是您将标记放在库中而不是 mvc 视图中，这可以更新[http://razorgenerator.codeplex.com/](http://razorgenerator.codeplex.com/)很痛苦

因此，您可以拥有来自 CDN 的基本 CSS 和基本 JS，以及每个独立 mvc 应用程序的特定主题/重载。

我还必须实现一个 API 应用程序，它提供 json 数据来填充共享标记，或者我还可以通过 jsonP 将整个标记视图传输到其他应用程序

我希望它有所帮助。干杯

# pyramid - 如何防止 gunicorn 访问日志进入控制台并正确重新加载？

> ID：16031016
> 
> 赞同：2
> 
> 时间：2013-04-16T07:19:52.993
> 
> 标签：pyramid, gunicorn, paster

我有一个金字塔应用程序，我想使用 gunicorn 而不是默认的女服务员来服务它。但我遇到的最大问题是在任何地方都没有足够的关于该主题的文档。

这是我在开发机器上想要的

1.  用于`pserve`在我的机器上提供应用程序，因为它会在代码更改时重新加载代码
2.  配置ini文件有8个gunicorn线程，因为我们在服务器上有同样的东西

我现在有这样的配置：

```
[server:main]
use = egg:gunicorn#main
host = 127.0.0.1
port = 6543
proc_name = mvc_gunicorn
pidfile = mvc_gunicorn.pid
errorlog = mvc_error.log
accesslog = mvc_access.log
workers = 8 
```

它工作得很好，除了

1.  但是烦人的访问日志会进入控制台。我怎样才能避免这种情况？
2.  代码重新加载不起作用，因为线程不会立即死亡。我必须自己手动启动它。可以重新加载让我稍等一下，或者gunicorn中的线程可以快速死亡吗？

在相关说明中，是否有一个地方可以找到所有可在 INI 文件中用于配置 gunicorn 的参数？

# delphi - 将类型 (OleStr) 的变体转换为类型整数 Delphi 时溢出

> ID：16031018
> 
> 赞同：0
> 
> 时间：2013-04-16T07:19:54.657
> 
> 标签：delphi, delphi-7, pascal, variant

我试图读取 Xml 文件，但在整数或 WideString 类型上不断出现“将类型变体 (OleStr) 转换为整数类型时溢出”错误，我尝试将类型从 VarToStr、IntToStr、VarToWideStr 和 OleStrToString 更改。

xml 文件的示例

```
<product product-id="01126400000" product-group-id="10010877">
<name><![CDATA[Love-Positions]]></name>
<selling-price>6.95</selling-price>
<dicount-prohibited>0</dicount-prohibited>
<list-price>4.00</list-price>
<ean-code>4024144112647</ean-code>
<availability>1</availability>
<valid-from-date>19970623</valid-from-date> 
```

* * *

```
procedure TForm1.Button1Click(Sender: TObject);
Var
MyXmlMax,MyXmlMin : integer;
Item: String;

begin

MyXmlMax := xmlDatafeed.Productlist.Count;
//item :=  (xmlDatafeedsub.Attributes['product-id']+','+ xmlDatafeedsub.Attributes['product-group-id'] );

for MyxmlMin := 1 to MyXmlMax-1 do begin
xmlDatafeedsub:=xmlDatafeed.Productlist[MyxmlMin];
memo1.lines.add('------');
memo1.lines.add(VarToStr(xmlDatafeedsub.Productid));  //Integer
memo1.lines.add(VarToStr(xmlDatafeedsub.Productgroupid)); //Integer
Memo1.Lines.Add(xmlDatafeedsub.Name);//WideString
memo1.lines.add((xmlDatafeedsub.Sellingprice)); //Integer
memo1.lines.add(VarToStr(XmlDataFeedSub.Dicountprohibited));//Integer
memo1.lines.add((xmlDatafeedsub.Listprice)); //Widestring
memo1.lines.Add(IntToStr(xmlDatafeedsub.Eancode));//Integer
memo1.lines.add(VarToStr(xmlDatafeedsub.Availability));//Integer
memo1.lines.add(VarToStr(xmlDatafeedsub.Validfromdate));//Integer
Inc(MyXmlMax,1);
memo1.lines.add('------');
end;   //end if
end;

//productdata_v2_01_01.xdb
`
function TXMLProductType.Get_Productid: Integer;
begin
  Result := AttributeNodes['product-id'].NodeValue;
end;

procedure TXMLProductType.Set_Productid(Value: Integer);
begin
  SetAttribute('product-id', Value);
end;

function TXMLProductType.Get_Productgroupid: Integer;
begin
  Result := AttributeNodes['product-group-id'].NodeValue;
end;

procedure TXMLProductType.Set_Productgroupid(Value: Integer);
begin
  SetAttribute('product-group-id', Value);
end;

function TXMLProductType.Get_Name: WideString;
begin
  Result := ChildNodes['name'].Text;
end;

procedure TXMLProductType.Set_Name(Value: WideString);
begin
  ChildNodes['name'].NodeValue := Value;
end;

function TXMLProductType.Get_Sellingprice: WideString;
begin
  Result := ChildNodes['selling-price'].Text;
end;

procedure TXMLProductType.Set_Sellingprice(Value: WideString);
begin
  ChildNodes['selling-price'].NodeValue := Value;
end;

function TXMLProductType.Get_Dicountprohibited: Integer;
begin
  Result := ChildNodes['dicount-prohibited'].NodeValue;
end;

procedure TXMLProductType.Set_Dicountprohibited(Value: Integer);
begin
  ChildNodes['dicount-prohibited'].NodeValue := Value;
end;

function TXMLProductType.Get_Listprice: WideString;
begin
  Result := ChildNodes['list-price'].Text;
end;

procedure TXMLProductType.Set_Listprice(Value: WideString);
begin
  ChildNodes['list-price'].NodeValue := Value;
end;

function TXMLProductType.Get_Eancode: Integer;
begin
  Result := ChildNodes['ean-code'].NodeValue;
end;

procedure TXMLProductType.Set_Eancode(Value: Integer);
begin
  ChildNodes['ean-code'].NodeValue := Value;
end;

function TXMLProductType.Get_Availability: Integer;
begin
  Result := ChildNodes['availability'].NodeValue;
end;

procedure TXMLProductType.Set_Availability(Value: Integer);
begin
  ChildNodes['availability'].NodeValue := Value;
end;

function TXMLProductType.Get_Validfromdate: Integer;
begin
  Result := ChildNodes['valid-from-date'].NodeValue;
end;

procedure TXMLProductType.Set_Validfromdate(Value: Integer);
begin
  ChildNodes['valid-from-date'].NodeValue := Value;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:18:40.563

您的产品 ID 属性[`EAN Codes`](http://en.wikipedia.org/wiki/International_Article_Number_%28EAN%29)不是整数，但您正试图将它们视为整数。它们是字符串值。（它们太大而无法放入整数。）它们不是您可以对其进行数学或算术运算的数字，因此不要尝试将它们视为此类。将定义改为 a `WideString`，你应该没问题。

```
// You'll need to change these in the `interface` as well. Here are the EANCode
// conversions for you.
function TXMLProductType.Get_Eancode: WideString;
begin
  Result := ChildNodes['ean-code'].NodeValue;
end;

procedure TXMLProductType.Set_Eancode(Value: WideString);
begin
  ChildNodes['ean-code'].NodeValue := Value;
end; 
```

# asp.net - asp.net 中的日期部分

> ID：16031024
> 
> 赞同：0
> 
> 时间：2013-04-16T07:20:13.223
> 
> 标签：asp.net, datepart

如何在 .NET 中使用 DatePart 获取天数（周日到周六）的值？我的想法是，如果是周六或周日，我必须跳过循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:22:50.667

```
while (true)
{
   if (DateTime.Now.DayOfWeek == DayOfWeek.Saturday
       || DateTime.Now.DayOfWeek == DayOfWeek.Sunday)
   {
       break;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:27:53.087

因此，对于日期范围，您可以尝试：

```
for(var curr_date = fromDate; curr_date <= toDate; curr_date.AddDays(1))
{
  if (curr_date.DayOfWeek == DayOfWeek.Saturday || 
      curr_date.DayOfWeek == DayOfWeek.Sunday)
  {
     break;
  }      
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:36:17.863

```
 string s = DateTime.Now.DayOfWeek.ToString();
    if (s == "Saturday")
    {
      //Your code     
    } 
```

您可以添加适合应用程序的条件

# android - 开关盒中的按钮背景没有改变？

> ID：16031028
> 
> 赞同：-1
> 
> 时间：2013-04-16T07:20:27.733
> 
> 标签：android, button, switch-statement

我正在开发一个示例游戏应用程序，其中我需要随机更改四个​​按钮图像。因为，我正在使用以下逻辑。但是，我无法更改开关盒中的按钮背景。所以，请指导我在哪里出错。谢谢你。

**xml布局**

```
<LinearLayout
    android:layout_height="match_parent"
    android:layout_width="fill_parent"
    android:orientation="horizontal"
    android:gravity="center"  
    >

    <Button
        android:id="@+id/b1"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
       android:background="@drawable/white"
        />
        <Button
        android:id="@+id/b2"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:background="@drawable/white"
        />
        <Button
        android:id="@+id/b3"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
       android:background="@drawable/white"
        />
        <Button
        android:id="@+id/b4"
        android:layout_height="wrap_content"
       android:layout_width="wrap_content"
        android:background="@drawable/white"
        />
    </LinearLayout> 
```

**java类**

```
public class MainActivity extends Activity implements OnClickListener {
    private Button b1,b2,b3,b4;
    ArrayList<Integer> numbers = new ArrayList<Integer>();   
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        b1=(Button)findViewById(R.id.b1);
        b2=(Button)findViewById(R.id.b2);
        b3=(Button)findViewById(R.id.b3);
        b4=(Button)findViewById(R.id.b4);

        b1.setOnClickListener(this);
        b2.setOnClickListener(this);
        b3.setOnClickListener(this);
        b4.setOnClickListener(this);

        //random numbers are 0,1,2,3 

        Random randomGenerator = new Random();
        while (numbers.size() < 4) {

            int random = randomGenerator .nextInt(4);
            if (!numbers.contains(random)) {
                numbers.add(random);
            }
        }

        startScan();

          }

     public void startScan() {
        new Thread() {
            public void run() {
                for(int i=0;i<numbers.size();i++){
                    try{
                        Thread.sleep(3000);
                        int id=numbers.get(i);
                    alterImages(id);
                }catch(Exception e){
                    }
                }
            }

        }.start();
    }

    private void alterImages(int id) {
        // TODO Auto-generated method stub
        Log.e("id value is in switch case",""+id);
        switch(id)
        {
        case 0: {
            b1.setBackgroundResource(R.drawable.green);  //its not working 
            Log.e("id is....","case 0");                 // its is printing
            break;
                }

        case 1: {
            b2.setBackgroundResource(R.drawable.blue);
            Log.e("id is....","case 1");
            break;
                }

        case 2 :
                {
             b3.setBackgroundResource(R.drawable.red);
             Log.e("id is....","case 2");
            break;
                }

                default :
               b4.setBackgroundResource(R.drawable.yellow);
               Log.e("id is....","DEFAULT");
                break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:04:22.043

尝试使用：

```
b1.setBackgroundColor(getResources().getColor(R.color.myColor)) 
```

并像这样在 Strings.xml 中定义颜色而不是可绘制对象：

```
<color name="myColor">#AA99AA</color> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:39:48.063

尝试删除所有这些行： android:background="@drawable/white"

从 XML 并在类中设置此默认背景值。

也许 XML 在您的情况下具有优先权，并且始终显示为白色。

# mysql - 从外部取消阻止 MySQL 连接

> ID：16031030
> 
> 赞同：0
> 
> 时间：2013-04-16T07:20:34.570
> 
> 标签：mysql, debian, firewall, iptables

我在 debian 服务器上运行 mysql。我想从外部连接到 mysql，但当然端口被 iptables 阻止。

所以在 iptables 我添加了这样的 mysql 端口：

```
iptables -I INPUT  -p tcp --dport mysql -j ACCEPT 
```

但是 mysql 端口仍然无法从外部访问。当我映射我的服务器 IP 地址时，mysql 端口不会显示。在 localhost 上进行 nmaping 时，它会显示出来。

我还为一个用户授予了所有权限，只是为了舒尔。

不幸的是，我仍然无法使用 mysql 连接到服务器。

你知道这可能是什么以及如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:37:05.867

编辑您的*/etc/mysql/my.cnf*文件并确保已注释或删除**skip-networking**选项，添加以下行

```
bind-address=TheIPServer 
```

并重新启动服务器。这应该有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:39:07.243

我想你在这里错过了一些东西......在我的 CentOS 服务器上，我有这个工具（GUI），你可以实际阻止/取消阻止某些端口或服务（如 MySQL：port-3306）但我不知道他们是否有那个在 Debian 上。您可以在系统管理员选项中探索它。

网上有很多参考资料，如下：

1.  [http://www.cyberciti.biz/faq/linux-web-server-firewall-tutorial/](http://www.cyberciti.biz/faq/linux-web-server-firewall-tutorial/)
2.  [http://www.lowendtalk.com/discussion/3965/leb-setup-script-for-debian-6-vps-nginx-mysql-iptables-etc](http://www.lowendtalk.com/discussion/3965/leb-setup-script-for-debian-6-vps-nginx-mysql-iptables-etc)

# sql-server - 如何透视表以将行值反映为列？

> ID：16031043
> 
> 赞同：0
> 
> 时间：2013-04-16T07:21:14.197
> 
> 标签：sql-server, row, pivot

SQL 从查询中返回下表：

```
Application  FDate        Type   Value
-----------  ------      ----   ------
abcd         04/15/2013  CIndex  3.00
abcd         04/15/2013  CC     200000
abcd         04/15/2013  MI     400
xyz          04/15/2013  CIndex  2.50    
xyz          04/15/2013  CC     15000    
xyz          04/15/2013  MI     1200 
```

我正在尝试使用枢轴获得以下结果：

```
 Application  FDate        CIndex   CC     MI
-----------  ------       ----   ----   -----
 abcd         04/15/2013  3.00   200000  400
 xyz          04/15/2013  2.50   15000   1200 
```

查询至今：

```
SELECT * FROM
(
  SELECT A.App_Name AS [Application],
  O.Functional_Date As FDate,
  CASE WHEN (T.TYPE_NAME LIKE 'Calculate Index') THEN 'CIndex'
  CASE WHEN (T.TYPE_NAME LIKE 'C Complexity') THEN 'CC'
  CASE WHEN (T.TYPE_NAME LIKE 'Medium Index') THEN 'MI' END TYPE,

CASE WHEN (T.TYPE_NAME LIKE 'Calculate Index') THEN ROUND (V.TypeValue, 2)
ELSE V.TypeValue END Value

FROM [DBServer1].[DB_A].[dbo].TypeTab AS T, [DBServer1].[DB_A].[dbo].AppName AS A,    [DBServer1].[DB_A].[dbo].DateTab AS O, [DBServer1].[DB_A].[dbo].ValueTab AS V 

WHERE T.Type_ID = V.Type_ID
      AND T.Type_index IN (0,1)... (several ANDs)
) src
PIVOT
( SUM (Type)
)piv 
```

但这会引发错误。并且不确定即使我修复了错误，查询也能正常工作。

请帮忙。

感谢期待！
阿什什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:26:51.190

```
SELECT  [Application], 
        FDate,
        [Calculate Index] AS CIndex,
        [Cyc Complexity] AS CC,
        [Medium Index] AS MI
FROM    
        (
            SELECT  A.App_Name AS [Application],
                    O.Functional_Date As FDate,
                    T.TYPE_NAME,
                    ROUND (V.TypeValue, 2) Value
            FROM    [DBServer1].[DB_A].[dbo].TypeTab AS T, 
                    [DBServer1].[DB_A].[dbo].AppName AS A,    
                    [DBServer1].[DB_A].[dbo].DateTab AS O, 
                    [DBServer1].[DB_A].[dbo].ValueTab AS V 
            WHERE   T.Type_ID = V.Type_ID AND 
                    T.Type_index IN (0,1)... (several ANDs)
        ) org
        PIVOT
        (
            MAX(Value)
            FOR TYPE_NAME IN ([Index], [CC], [MI])
        ) pvt 
```

# oracle - 将 sysdate 附加到 Oracle 中的表名

> ID：16031050
> 
> 赞同：4
> 
> 时间：2013-04-16T07:21:41.520
> 
> 标签：oracle, sysdate

我需要在 Oracle 中创建表时附加 SYSDATE。请让我知道是否有直接的方法（仅使用 SQL）或者我必须使用 PL/SQL。

例如，如果表名是 ABC，我需要将表创建为 ABC_20130416。

如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T07:28:28.620

如果 SQL*Plus 始终可用，您可以使用变量来执行此操作，例如（未经测试）：

```
SQL>col yyyymmdd for a8 new_value v
SQL>select to_char(sysdate, 'YYYYMMDD') as yyyymmdd from dual;
SQL>create table ABC_&v (col1 integer); 
```

另一方面，如果您希望能够在任何地方执行此操作，您将需要 PL/SQL 和动态 SQL：

```
declare
  l_tablename varchar2(30) := 'ABC_' || to_char(sysdate, 'YYYYMMDD')
begin
  execute immediate 'create table ' || l_tablename || ' (col1 integer)';
end;
/ 
```

或者只是先正常创建表，然后重命名：

```
create table xyz (
  ... many columns ...
);

declare
  l_tablename varchar2(30) := 'ABC_' || to_char(sysdate, 'YYYYMMDD')
begin
  execute immediate 'rename xyz to ' || l_tablename;
end;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:32:24.037

仅使用 PL/SQL：

```
begin
  execute immediate 'create table foo_' || your_timestamp_here ;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:41:40.127

PL/SQL 代码：

```
declare
  tabname varchar(32);
begin
  tabname := 'abc'|| TO_CHAR(SYSDATE, 'YYYYMMDD');
  execute immediate 'create table '|| tabname ||' ( f1 number, f2 number, f3 number)';
end; 
```

# extjs - Sencha touch dataview 项目的事件处理程序

> ID：16031052
> 
> 赞同：1
> 
> 时间：2013-04-16T07:21:43.637
> 
> 标签：extjs, touch, dataview

**平台：煎茶触控2.1**

我试图通过数据视图中的项目调用一个事件，但作为一个新手无法弄清楚。

```
 {
    xtype: 'dataview',
    cls: 'ownprofile-top',
    itemId: 'profileOptions',
    store: { fields: ["name", { name: "optionsButtons", type: 'string' }],
    data: [
        { name: 'First Option', event: 'onFirstBtnTap' },
        { name: 'Second Option', event: 'onSecondBtnTap'},
        { name: 'Third Option', event: 'onThirdBtnTap'}
    ]
    },
    scrollable: null,
    cls: 'profile-item',
    itemTpl: new Ext.XTemplate(
    '{name}'
    )
} 
```

因此，点击任一选项，我希望触发一个事件或调用另一种方法来执行 xyz。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:13:20.173

您可以将侦听器添加到[itemtap](http://docs.sencha.com/touch/2.2.0/#!/api/Ext.dataview.DataView-event-itemtap)

```
{
    xtype: 'dataview',
    cls: 'ownprofile-top',
    itemId: 'profileOptions',
    store: { fields: ["name", { name: "optionsButtons", type: 'string' }],
    data: [
        { name: 'First Option', event: 'onFirstBtnTap' },
        { name: 'Second Option', event: 'onSecondBtnTap'},
        { name: 'Third Option', event: 'onThirdBtnTap'}
    ],
    listeners: {
       itemtap: function(dataview, index, target, record, e, eOpts) {
           //Do xyz
       }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:38:11.050

可能是，你需要在使用监听器吗？[http://docs.sencha.com/touch/2.0.2/#!/api/Ext.mixin.Observable-method-addListener](http://docs.sencha.com/touch/2.0.2/#!/api/Ext.mixin.Observable-method-addListener)

# python - 如何从 Pandas 中的两列形成元组列

> ID：16031056
> 
> 赞同：186
> 
> 时间：2013-04-16T07:21:52.430
> 
> 标签：python, dataframe, pandas, tuples

我有一个 Pandas DataFrame，我想将 'lat' 和 'long' 列组合成一个元组。

```
<class 'pandas.core.frame.DataFrame'>
Int64Index: 205482 entries, 0 to 209018
Data columns:
Month           205482  non-null values
Reported by     205482  non-null values
Falls within    205482  non-null values
Easting         205482  non-null values
Northing        205482  non-null values
Location        205482  non-null values
Crime type      205482  non-null values
long            205482  non-null values
lat             205482  non-null values
dtypes: float64(4), object(5) 
```

我尝试使用的代码是：

```
def merge_two_cols(series): 
    return (series['lat'], series['long'])

sample['lat_long'] = sample.apply(merge_two_cols, axis=1) 
```

但是，这返回了以下错误：

```
---------------------------------------------------------------------------
 AssertionError                            Traceback (most recent call last)
<ipython-input-261-e752e52a96e6> in <module>()
      2     return (series['lat'], series['long'])
      3 
----> 4 sample['lat_long'] = sample.apply(merge_two_cols, axis=1)
      5 
```

...

```
AssertionError: Block shape incompatible with manager 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：290
> 
> 时间：2013-04-17T19:24:48.227

适应`zip`. 在处理列数据时它会派上用场。

```
df['new_col'] = list(zip(df.lat, df.long)) 
```

它比使用`apply`or更简单、更快捷`map`。like`np.dstack`的速度是 的两倍`zip`，但不会给你元组。

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2013-04-16T09:13:01.477

```
In [10]: df
Out[10]:
          A         B       lat      long
0  1.428987  0.614405  0.484370 -0.628298
1 -0.485747  0.275096  0.497116  1.047605
2  0.822527  0.340689  2.120676 -2.436831
3  0.384719 -0.042070  1.426703 -0.634355
4 -0.937442  2.520756 -1.662615 -1.377490
5 -0.154816  0.617671 -0.090484 -0.191906
6 -0.705177 -1.086138 -0.629708  1.332853
7  0.637496 -0.643773 -0.492668 -0.777344
8  1.109497 -0.610165  0.260325  2.533383
9 -1.224584  0.117668  1.304369 -0.152561

In [11]: df['lat_long'] = df[['lat', 'long']].apply(tuple, axis=1)

In [12]: df
Out[12]:
          A         B       lat      long                             lat_long
0  1.428987  0.614405  0.484370 -0.628298      (0.484370195967, -0.6282975278)
1 -0.485747  0.275096  0.497116  1.047605      (0.497115615839, 1.04760475074)
2  0.822527  0.340689  2.120676 -2.436831      (2.12067574274, -2.43683074367)
3  0.384719 -0.042070  1.426703 -0.634355      (1.42670326172, -0.63435462504)
4 -0.937442  2.520756 -1.662615 -1.377490     (-1.66261469102, -1.37749004179)
5 -0.154816  0.617671 -0.090484 -0.191906  (-0.0904840623396, -0.191905582481)
6 -0.705177 -1.086138 -0.629708  1.332853     (-0.629707821728, 1.33285348929)
7  0.637496 -0.643773 -0.492668 -0.777344   (-0.492667604075, -0.777344111021)
8  1.109497 -0.610165  0.260325  2.533383        (0.26032456699, 2.5333825651)
9 -1.224584  0.117668  1.304369 -0.152561     (1.30436900612, -0.152560909725) 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2017-11-06T21:49:15.857

Pandas 有[`itertuples`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.itertuples.html)办法做到这一点：

```
list(df[['lat', 'long']].itertuples(index=False, name=None)) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-10-16T10:46:17.760

我想补充一下`df.values.tolist()`。（只要你不介意得到一列列表而不是元组）

```
import pandas as pd
import numpy as np

size = int(1e+07)
df = pd.DataFrame({'a': np.random.rand(size), 'b': np.random.rand(size)}) 

%timeit df.values.tolist()
1.47 s ± 38.9 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)

%timeit list(zip(df.a,df.b))
1.92 s ± 131 ms per loop (mean ± std. dev. of 7 runs, 1 loop each) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-07-29T09:10:33.893

您应该尝试使用`pd.to_records(index=False)`：

```
import pandas as pd
df = pd.DataFrame({'language': ['en', 'ar', 'es'], 'greeting': ['Hi', 'اهلا', 'Hola']})
df

   language  greeting
0       en    Hi
1       ar    اهلا
2       es   Hola

df['list_of_tuples'] = list(df[['language', 'greeting']].to_records(index=False))
df['list_of_tuples']

0    [en, Hi]
1    [ar, اهلا]
2    [es, Hola] 
```

请享用！

# html - 在 HTML 中，如何在 . （点），就像它包裹在 - （破折号）？

> ID：16031057
> 
> 赞同：3
> 
> 时间：2013-04-16T07:21:57.157
> 
> 标签：html, css

我在表格单元格中有一个很长的词，它弄乱了表格布局：

a.long.word.separated.by.dots

我希望这个词像这个词一样换行：

用破折号分隔的长词

如何在不更改 HTML 的情况下使用 CSS 完成这项工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T07:29:01.123

如果使用JS没问题，你可以这样做。如果不是，那么这个答案可能对未来的读者仍然有用。

```
var longWord = "a.long.word.separated.by.dots".replace(/\./g, '.<wbr>'); 
```

wbr 标签上的参考：http: [//www.w3.org/wiki/HTML/Elements/wbr](http://www.w3.org/wiki/HTML/Elements/wbr)

或者，您可以`<wbr>`在每个句点之后手动放置一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-26T14:54:05.420

您可以在 PHP 中执行此操作，很抱歉唤醒了一个死问题，但如果您使用 PHP 循环填充 HTML 表，您只需要以下内容：

```
preg_replace('/\./', '.<wbr>', $string); 
```

这需要[11684 的答案](https://stackoverflow.com/a/16031172/6331313)并将其放入请求的上下文中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-28T15:17:07.463

`<wbr>`对我不起作用，但零宽度空间可以。您可以使用：

```
var longWord = "a.long.word.separated.by.dots".replace(/\./g, '.&#x200b;'); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-16T07:29:54.193

您可以使用这个 CSS3 属性：

```
table tr td {
    word-wrap: break-word;
} 
```

浏览器支持：[http ://caniuse.com/#search=word-wrap](http://caniuse.com/#search=word-wrap)

# mysql - 使用 VB.NET 将 datagridview 中的多条记录插入到我的数据库表中

> ID：16031060
> 
> 赞同：1
> 
> 时间：2013-04-16T07:22:09.463
> 
> 标签：mysql, vb.net, datagridview

我想`insert`记录从`datagridview`到 `mysql database table`，但我不知道如何插入 `datagridview`到数据库`table`。怎么做？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T14:04:13.997

kumar，你的代码有问题

```
name = Me.DataGridView1.Rows(i).Cells(0).ToString()

  age= Me.DataGridView1.Rows(i).Cells(1).ToString() 
```

应该

```
name = Me.DataGridView1.Rows(i).Cells(0).Value.ToString()

  age= Me.DataGridView1.Rows(i).Cells(1).Value.ToString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:08:57.207

这只是我的建议，如果您有代码，那么可以做得更好

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        ''create connection 
        Dim conn As SqlConnection = New SqlConnection()
        conn.Open()

        Dim comm As SqlCommand = New SqlCommand()
        comm.Connection = conn

        ''insert data to sql database row by row
        Dim name, ageAs String
        For i As Integer = 0 To Me.DataGridView1.Rows.Count
            name = Me.DataGridView1.Rows(i).Cells(0).ToString()
            age= Me.DataGridView1.Rows(i).Cells(1).ToString()

            comm.CommandText = "insert into mytable(name,age) values('" & name & "','" & age& "')"
            comm.ExecuteNonQuery()
        Next

        conn.Close()

    End Sub 
```

这只是一种插入方式，最好使用存储过程插入值，因为如果使用 SQL，可能会发生 SQL 注入。所以存储过程是最好的保存方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T00:42:36.707

而不是插入数据，我试图更新记录，对我来说

Me.AddPurchases.Rows(i).Cells(0).Value.ToString()

此语句没有解决目的此语句将返回行数和列数，如 { row=0,col=1} 下一次迭代 { row=0,col=1} 等等，但是

```
Dim roid As String

    For i As Integer = 0 To Me.edit_role_grid.RowCount - 1
        roid = Me.edit_role_grid.Rows(i).Cells(0).FormattedValue
        MsgBox(roid) 
```

这对我来说很好，这是返回单元格的文本，现在这个值可以在任何地方使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-23T10:49:13.973

更改代码行：

```
 For i As Integer = 0 To Me.AddPurchases.Rows.Count 
```

用这条线：

```
 For i As Integer = 0 To Me.AddPurchases.Rows.Count - 1 
```

****以上是verohwm消息异常的解决方法。*****

# ruby-on-rails - 强制捆绑器在用户的主目录中安装 gem

> ID：16031061
> 
> 赞同：22
> 
> 时间：2013-04-16T07:22:09.810
> 
> 标签：ruby-on-rails, bundler

上次我尝试学习如何使用 Ruby on Rails 进行 Web 开发，并且我使用了我的 Arch GNU/Linux 机器。Arch 的策略要求 gems 安装在用户目录而不是通常的系统范围的位置。但是，它与捆绑程序的默认行为（尝试在系统范围内安装 gems）相矛盾。因此，每当我运行`rails new foo`捆绑程序时，都会要求我输入我的 root 密码。

我想强制捆绑器在我的主目录中安装 Rails 所需的 gem。我尝试运行`bundle install --path .bundle`，但它会再次下载并安装所有 Rails gem，这显然是我不想做的。

你知道怎么做吗？

**更新**：最后我通过运行得到了想要的效果`bundle install --path ~/.gem`。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-10-29T15:26:06.483

您可以设置环境变量`$BUNDLE_PATH`或`$GEM_HOME`. Bundler 将使用这些并在那里安装您的 gem。如果您指定`--path my_path`，Bundler 将记住此值以供将来安装。

> [...] 但它会再次下载并安装所有 Rails gems，这显然是我不想做的。

如果您想使用 gem 的缓存版本，请使用`--local`.

# android - 检索在 Smack XMPP 服务器中注册的用户的位置信息（无需订阅）

> ID：16031066
> 
> 赞同：2
> 
> 时间：2013-04-16T07:22:35.050
> 
> 标签：android, xmpp, smack

所以这是我的想法。

我不想列出**在我的 location radius 内**的 XMPP 服务器上注册的所有用户。这样我就可以添加（如果有兴趣）。

我使用 smack API，我基本上是在为我的大学构建一个 android 聊天应用程序作为我的硕士项目。

我的问题：

1.  如何发送XMPP服务器，位置？

2.  Smack 有 Form 类，我想知道当我使用 UserSearchManager 和 Form 时，如何使用它来检索每个用户的位置？

任何设计理念也将不胜感激！谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-05T08:17:05.473

我正在研究同样的想法

1）发送用户位置，创建后台服务以保持位置更新。查看此链接[背景服务位置](https://stackoverflow.com/questions/28535703/best-way-to-get-user-gps-location-in-background-in-android "获取用户位置的最佳方法")

每次位置更新后，发送一个像这样的自定义数据包： [自定义数据包](https://stackoverflow.com/questions/32940874/custom-extension-element-in-stanza-for-smack-4-1-4/39364219#39364219)

在您的数据包侦听器中，将数据包与数据库中的位置一起保存并更新用户界面，使用接收器 lat,lng 计算您的 lat,lng 如果它在您的范围内，则显示否则隐藏

2）让所有用户从openfire看我的答案： [get all users from openfire using smack](https://stackoverflow.com/questions/36471325/getting-all-users-from-an-openfire-server-using-smack-android/39868514#39868514)

# windows-phone-7 - 在枢轴控制Windows手机中全屏播放mediaelement

> ID：16031069
> 
> 赞同：1
> 
> 时间：2013-04-16T07:22:48.687
> 
> 标签：windows-phone-7

当我的 Windows Phone 应用程序中的页面方向发生变化时，我想全屏播放我的 MediaElement。当页面方向重复然后播放器正常工作时，我也适用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:28:01.163

您可以在此事件中对您的页面进行任何更改：

```
 void MainPage_OrientationChanged(object sender, OrientationChangedEventArgs e)
    {
        if (e.Orientation == PageOrientation.LandscapeLeft || e.Orientation == PageOrientation.LandscapeRight)
        {

        mediaPlayer.Height = Double.NaN;
        mediaPlayer.Width = Double.NaN;

        mediaPlayer.VerticalAlignment = System.Windows.VerticalAlignment.Stretch;
        mediaPlayer.HorizontalAlignment = System.Windows.HorizontalAlignment.Stretch;

        SystemTray.IsVisible = false;

        }
        else
        {
        }
    } 
```

# javascript - 为 CodeMirror 的 lint 功能使用异步警告源

> ID：16031072
> 
> 赞同：13
> 
> 时间：2013-04-16T07:22:55.287
> 
> 标签：javascript, python, ajax, syntax-highlighting, codemirror

这些示例仅显示如何使用同步的 CodeMirror（基于 Javascript 的语法高亮编辑器）实现 JSON 和 Javascript lint 插件。

不幸的是，大多数语言都没有现成的基于 Javascript 的解析器/lint'ers。我想为 Python 实现我自己的 linter。不幸的是，似乎现有的 lint 插件依赖于同步的 linter（由 lint 插件调用）。

angelozerr 说 remoting-lint.js 中有一个“CodeMirror.remotingValidator”插件，但 Github 显示该文件已被删除。marijnh 说它被删除是因为它“通常没有用”，但没有澄清任何替代方案。

是否有某种策略可以以某种方式异步调用 linter，以便我可以进行 Ajax 调用以远程解析代码？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-16T07:22:55.287

当然有。快速浏览最新版本的 remoting-lint.js ( [https://github.com/marijnh/CodeMirror/commit/27f097ed75561e846bdb955f13f8dd2bcf0b589e](https://github.com/marijnh/CodeMirror/commit/27f097ed75561e846bdb955f13f8dd2bcf0b589e) ) 的内容表明它只不过是一个 jQuery AJAX 请求，它调用提供的回调作为参数传递给函数。仅当将“异步”选项提供给 lint 插件时，才会传递此回调。请注意，我有一些可能与您无关的选项被传递到 CodeMirror。与 lint 相关的选项是“gutters”和“lintWith”。

请注意，Python 一次只显示一个错误，但 lint 插件接受错误列表。因为前者，后者最多只有一个项目。

```
function python_validator(cm, updateLinting, options) {
    var text = cm.getValue() + "\n";

    if(text.trim() == "")
    {
        updateLinting(cm, []);
        return;
    }

    function result_cb(error)
    {
        var found = [];

        if(error != null) {
            var start_line = error.line_no;
            var start_char = error.column_no;
            var end_line = error.line_no;
            var end_char = error.column_no;
            var message = error.message;

            found.push({
                from: CodeMirror.Pos(start_line - 1, start_char),
                to: CodeMirror.Pos(end_line - 1, end_char),
                message: message
            });
        }

        updateLinting(cm, found);
    }

    check_python_syntax(text, result_cb)
};  

var text_obj = $discriminator_text.get()[0];
var editor = CodeMirror.fromTextArea(text_obj, {
    mode: { name: "python",
            version: 2,
            singleLineStringErrors: false },
    lineNumbers: true,
    indentUnit: 4,
    tabMode: "shift",
    matchBrackets: true,
    styleActiveLine: true,
    lineWrapping: false,
    gutters: ["CodeMirror-lint-markers"],
    lintWith: {
        "getAnnotations": python_validator,
        "async" : true,
    },
}); 
```

我发布了一个非常简单的项目，以使其更简单：[https ://github.com/dsoprea/CodeMirrorRemoteValidator](https://github.com/dsoprea/CodeMirrorRemoteValidator)

# php - Zend_pdf，显示一个url（qrcode）

> ID：16031076
> 
> 赞同：0
> 
> 时间：2013-04-16T07:23:12.630
> 
> 标签：php, pdf, zend-pdf

我想显示来自 url 的 qrcode。我尝试了这个，但那不起作用，我认为我的代码没有将 url 保存在我的计算机上，他失败了，他尝试打开 qrcode

```
 $imageUrl = 'https://chart.googleapis.com/chart?chs=150x150&cht=qr&chl=toto';
    $imagePath = sys_get_temp_dir() . '\\' . basename($imageUrl);
    file_put_contents($imagePath, file_get_contents($imageUrl));
    $image = Zend_Pdf_Image::imageWithPath($imagePath);
    unlink($imagePath);

    $page = $this->newPage($settings);
    $page->drawImage($image, 0, 842 - 153, 244, 842); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:45:20.533

您遇到的问题是`basename`URL 的，您尝试将其设置为文件名，这会导致类似 的`C:\TEMP\chart?chs=150x150&cht=qr&chl=toto`内容，这不是有效的文件名。
您也不能使用`file_get_contents`. 您将需要使用[`cURL`](http://www.php.net/manual/en/book.curl.php). 像这样的东西应该可以完成这项工作：

```
$imageUrl = 'https://chart.googleapis.com/chart?chs=150x150&cht=qr&chl=toto';
$imgPath = sys_get_temp_dir() . '/' . 'qr.png';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $imageUrl);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
$raw = curl_exec($ch);

if (is_file($imgPath)) {
    unlink($imgPath);
}

$fp = fopen($imgPath, 'x');
fwrite($fp, $raw);
fclose($fp); 
```

然后您可以使用`$imgPath`创建 PDF 图像。

# ruby-on-rails - DBI::InterfaceError: 无法加载驱动程序（未初始化的常量 MysqlError）

> ID：16031080
> 
> 赞同：5
> 
> 时间：2013-04-16T07:23:37.090
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, dbi, ruby-1.9.2

我已经包括了宝石，

```
dbd-mysql (0.4.4)
dbi (0.4.5)
mysql (2.8.1) 
```

当我运行以下代码时，在 Rails 控制台上，

```
require 'rubygems'
require "dbi"
require 'dbd-mysql'
dbh = DBI.connect("DBI:Mysql:TestDB:localhost","username", "pwd")

1.9.2-p180 :001 > require 'rubygems'
 => false 
1.9.2-p180 :002 > require "dbi"
 => false 
1.9.2p180 :003 > require 'dbd-mysql'
LoadError: no such file to load -- dbd-mysql
from /.rvm/gems/ruby-1.9.2-p180@rails3/gems/dbi-0.4.5/lib/dbi.rb:318:in `rescue in load_driver'
    from /.rvm/gems/ruby-1.9.2-p180@rails3/gems/dbi-0.4.5/lib/dbi.rb:242:in `load_driver'
    from /.rvm/gems/ruby-1.9.2-p180@rails3/gems/dbi-0.4.5/lib/dbi.rb:160:in `_get_full_driver'
    from /.rvm/gems/ruby-1.9.2-p180@rails3/gems/dbi-0.4.5/lib/dbi.rb:145:in `connect'
    from (irb):3
    from /.rvm/gems/ruby-1.9.2-p180@rails3/gems/railties-3.1.1/lib/rails/commands/console.rb:45:in `start'
    from /.rvm/gems/ruby-1.9.2-p180@rails3/gems/railties-3.1.1/lib/rails/commands/console.rb:8:in `start'
    from /.rvm/gems/ruby-1.9.2-p180@rails3/gems/railties-3.1.1/lib/rails/commands.rb:40:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'

1.9.2-p180 :004 > dbh = DBI.connect("DBI:Mysql:TestDB:localhost","username", "pwd")
DBI::InterfaceError: Could not load driver (uninitialized constant MysqlError)
    from /.rvm/gems/ruby-1.9.2-p180@rails3/gems/dbi-0.4.5/lib/dbi.rb:318:in `rescue in load_driver'
    from /.rvm/gems/ruby-1.9.2-p180@rails3/gems/dbi-0.4.5/lib/dbi.rb:242:in `load_driver'
    from /.rvm/gems/ruby-1.9.2-p180@rails3/gems/dbi-0.4.5/lib/dbi.rb:160:in `_get_full_driver'
    from /.rvm/gems/ruby-1.9.2-p180@rails3/gems/dbi-0.4.5/lib/dbi.rb:145:in `connect'
    from (irb):3
    from /.rvm/gems/ruby-1.9.2-p180@rails3/gems/railties-3.1.1/lib/rails/commands/console.rb:45:in `start'
    from /.rvm/gems/ruby-1.9.2-p180@rails3/gems/railties-3.1.1/lib/rails/commands/console.rb:8:in `start'
    from /.rvm/gems/ruby-1.9.2-p180@rails3/gems/railties-3.1.1/lib/rails/commands.rb:40:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'
1.9.2-p180 :004 > 
```

收到此错误

```
LoadError: no such file to load -- dbd-mysql
DBI::InterfaceError: Could not load driver (uninitialized constant MysqlError) 
```

是我的 dbd-mysql gem 没有正确安装吗？请有人建议我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T21:25:38.320

如果我是你，我会创建一个全新的应用程序

```
rails new ProjectName -d mysql 
```

然后我会在 Config/Database.yml 中指定数据库名称

# c# - 如何将日期时间从“0h:23h”转换为“1h:24h”？

> ID：16031081
> 
> 赞同：2
> 
> 时间：2013-04-16T07:23:41.643
> 
> 标签：c#, datetime

我的日期时间有问题。在我的 sql 数据中，我得到了 1-24h 的时间数据，但在 C# datetime 中，我只能对 0h 到 23h 的值进行建模。如何将其转换为 1-24 小时？

提前致谢！

我该如何表达让你明白，我的英语不够好。好难过。我有这样的数据

```
1/1/2010 1:00 20mm
1/1/2010 2:00 30mm
1/1/2010 3:00 50mm
....
1/1/2010 23:00 10mm
1/1/2010 24:00 5mm
2/1/2010 1:00 30mm
2/1/2010 2:00 8mm 
```

如您所见，没有 0:00，他们写的是 0:00 的 24:00。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:26:19.853

试试这个。

```
Datetime.Now.AddHours(-12) 
```

它可能会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:25:39.037

您可以编写一个扩展方法来为您进行字符串格式化。

```
string str = System.DateTime.Now.ToMySQLstring(); 
```

这是扩展方法：

```
namespace System
{

    public static class TimeSpanExtensions
    {

        public static string ToMySQLstring(this DateTime dt)
        {
            int hour = dt.Hour + 1;
            int min = dt.Minute;
            int sec = dt.Second;
            int msec = dt.Millisecond;

            int day = dt.Day;
            int month = dt.Month;
            int year = dt.Year;

            //2009-05-01T14:18:12.430
            return String.Format("{0}-{1:00}-{2:00}T{3:00}:{4:00}:{5:00}.{6:000}", year, month, day, hour, min, sec, msec);
        }

    } // End Class

} // End Namespace 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:27:10.593

0-23h 有效，因为 0:00 是午夜，23:59:59 是距明天一秒。老实说，我不确定您如何在 SQL 中获得 1-24，我一直看到 SQL Server 中存储的数据为 00-23。

如果您要处理要显示的数据的格式，请查看以下链接； [http://msdn.microsoft.com/en-gb/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-gb/library/8kb3ddd4.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T07:27:26.437

用于`ParseMilitaryTime`此目的。

以下文档包含有关您想要做的事情的所有示例和描述：

[http://www.dotnetperls.com/24-hour-time](http://www.dotnetperls.com/24-hour-time)

# java - 线程 org.springframework.beans.factory.BeanCreationException 中的异常：错误

> ID：16031082
> 
> 赞同：1
> 
> 时间：2013-04-16T07:23:46.420
> 
> 标签：java, spring, quartz-scheduler

这是我的 applicationContext.xml

```
<bean id="studentbean" class="com.Student">
    <property name="name" value=" " />

</bean>
<bean id="JobA" class="org.springframework.scheduling.quartz.JobDetailBean">
    <property name="jobClass" value="com.Student" />
    <property name="jobDataAsMap">
        <map>
            <entry key="timeout" value="5" />
        </map>
    </property>
</bean>
<bean id="cronTriggerJobA"   class="org.springframework.scheduling.quartz.CronTriggerBean">
    <property name="jobDetail" ref="JobA" />
    <property name="cronExpression" value="0/5 * * * * ?" />
</bean>

<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="jobDetails">
        <list>
            <ref bean="JobA" />
        </list>
    </property>
    <property name="triggers">
        <list>
            <ref bean="cronTriggerJobA" />

        </list>
    </property>
</bean> 
```

我在执行时使用 spring-2.5.6.jar 和 quartz-1.8.5.jar 我收到错误

```
 Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.scheduling.quartz.SchedulerFactoryBean#0' defined in class path resource [applicationContext.xml]: Invocation of init method failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.quartz.impl.StdSchedulerFactory]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1338)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
at java.security.AccessController.doPrivileged(Native Method)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264) 
```

我能够在没有 spring 集成的情况下使用 Quartz 调度程序，但现在我遇到了这个错误，任何人都有解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:47:29.487

thanks it worked ,org/slf4j/LoggerFactory was not there in the jar what i have added

# scrollview - 在滚动视图中动态添加线性布局

> ID：16031084
> 
> 赞同：0
> 
> 时间：2013-04-16T07:23:48.560
> 
> 标签：scrollview, android-linearlayout

实际上我正在尝试在滚动视图中动态添加线性布局。我想处理像行这样的线性布局，一行包含 imageView 和 TexView 所以我想在每次调用该函数时动态添加它们。所以它可能看起来像一个列表视图。我很累因为到处搜索。请帮我

![在此处输入图像描述](https://i.stack.imgur.com/7l7JX.png)

```
 <ScrollView
    android:id="@+id/scroll"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/relativeLayout1"
    android:layout_above="@+id/footer"
    >

<LinearLayout
     android:id="@+id/innerpart"
      android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

      </LinearLayout>
</ScrollView>

   try{
        //get bitmap image 
         imageview img = new imageview(getAppcontext);
         linear.addview(img);

         // but i want to add image and row in the same row
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:40:26.450

你在这里，所以你可以动态地将 LinerLayout 添加到 ScrollView：

```
for loop {
    LinearLayout newLL = new LinearLayout(context, attrs //layout position params);
    ImageView newIV = new ImageView(context, attrs);
    TextView newTV = new TextView(context, attrs);
    newLL.addView(newIV);
    newLL.addView(newTV);

    yourScrollView.add(newLL);
} 
```

这里你问的风格，看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/list_selector"
android:orientation="horizontal"
android:padding="5dip" >

<!--  ListRow Left sied Thumbnail image -->
<LinearLayout android:id="@+id/thumbnail" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="3dip"      
    android:layout_alignParentLeft="true"
    android:background="@drawable/image_bg" 
    android:layout_marginRight="5dip">

    <ImageView     
        android:id="@+id/list_image"   
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:src="@drawable/rihanna"/>

</LinearLayout>

<!-- Title Of Song-->
<TextView
    android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/thumbnail"
    android:layout_toRightOf="@+id/thumbnail"
    android:text="Rihanna Love the way lie"
    android:textColor="#040404"
    android:typeface="sans" 
    android:textSize="15dip"
    android:textStyle="bold"/>

<!-- Artist Name -->
<TextView
    android:id="@+id/artist"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/title"
    android:textColor="#343434"
    android:textSize="10dip"
    android:layout_marginTop="1dip"
    android:layout_toRightOf="@+id/thumbnail"
    android:text="Just gona stand there and ..." />

<!-- Rightend Duration -->
<TextView
    android:id="@+id/duration"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@id/title"
    android:gravity="right"
    android:text="5:45"
    android:layout_marginRight="5dip"
    android:textSize="10dip"
    android:textColor="#10bcc9"
    android:textStyle="bold"/>

 <!-- Rightend Arrow -->    
 <ImageView android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/arrow"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"/>

</RelativeLayout> 
```

布局截图：

![在此处输入图像描述](https://i.stack.imgur.com/DZgfX.jpg)

# unity3d - 在统一的 3d 中夹住对象的 X 位置

> ID：16031087
> 
> 赞同：1
> 
> 时间：2013-04-16T07:23:59.130
> 
> 标签：unity3d, monodevelop, ngui

这是我在统一 3d 中的代码

```
moveDirection = Vector3.forward + new Vector3(Input.acceleration.x * 0.3f, 0, 0);   

// transform.position.x = Mathf.Clamp(transform.position.x, -2.0f, 2.0f);

transform.Translate(moveDirection * Time.deltaTime *9); 
```

向前移动的物体。我想夹住它的 x 位置。

```
transform.position.x = Mathf.Clamp(transform.position.x, -2.0f, 2.0f); 
```

这给了我

错误 CS1612：无法修改“UnityEngine.Transform.position”的值类型返回值。考虑将值存储在临时变量中

我怎样才能夹住我的物体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:36:12.023

Unity 在这方面非常愚蠢，因此需要一些解决方法。尝试这个：

```
Vector3 tmpPos = transform.position;
tmpPos.x = Mathf.Clamp(tmpPos.x, -2.0f, 2.0f);
transform.position = tmpPos; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-24T22:47:03.350

您不能直接访问 x 值，这是一种解决方法：

```
transform.position = new Vector3(Mathf.Clamp(transform.position.x, -2.0f, 2.0f), transform.position.y, transform.position.z) 
```

# git - 如何检查所有 repos 中的标签

> ID：16031090
> 
> 赞同：1
> 
> 时间：2013-04-16T07:24:09.327
> 
> 标签：git, repository

我正在使用 git 和 repo。合并某些东西后，我总是推送标签。有什么方法可以确认我推送的标签存在于所有回购中。有没有可以做同样的脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:59:37.513

您可以使用[`git ls-remote --tags <repository>`](http://git-scm.com/docs/git-ls-remote)，如“[从远程仓库获取最后一个 git 标记而不进行克隆](https://stackoverflow.com/a/12704727/6309)”中所示。

您需要对要检查的所有远程存储库重复该命令。
您需要过滤结果以[排除未引用的标签](https://stackoverflow.com/q/5346060/6309)。

# python - 函数内部的函数 - 每次？

> ID：16031092
> 
> 赞同：29
> 
> 时间：2013-04-16T07:24:16.680
> 
> 标签：python, performance, closures, nested-function

让我们有这个代码：

```
def big_function():
    def little_function():
         .......
    ......... 
```

Python 文档说关于`def`声明：

> 函数定义是一个可执行语句。它的执行绑定了函数名...

所以，问题是：`def little_function()`每次`big_function`调用时都执行吗？问题是关于`def`陈述，而不是`little_function()`身体。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-16T07:29:00.007

您可以使用模块检查字节码`dis`：

```
>>> import dis
>>> def my_function():
...     def little_function():
...             print "Hello, World!"
...     
... 
>>> dis.dis(my_function)
  2           0 LOAD_CONST               1 (<code object little_function at 0xb74ef9f8, file "<stdin>", line 2>)
              3 MAKE_FUNCTION            0
              6 STORE_FAST               0 (little_function)
              9 LOAD_CONST               0 (None)
             12 RETURN_VALUE 
```

如您所见，内部函数的代码只*编译**一次*。每次调用`my_function`它都会加载并创建一个新的函数对象（从这个意义上说，每次调用都会执行`def little_function` *）*`my_function`，但这不会增加太多开销。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-16T07:26:06.110

内部函数中的代码只编译一次，因此不应该有显着的运行时损失。

每次调用外部函数时，只会更新内部函数的*闭包。*例如，有关闭包的更多详细信息，请参见[此处。](http://ynniv.com/blog/2007/08/closures-in-python.html)

这是一个快速演示，检查关闭：

```
def f(x):
   a = []
   b = x + 1
   def g():
      print a, b
   return g

In [28]: y = f(5)

In [29]: y
Out[29]: <function __main__.g>

In [30]: y.func_closure
Out[30]: 
(<cell at 0x101c95948: list object at 0x101c3a3f8>,
 <cell at 0x101c958a0: int object at 0x100311aa0>)

In [31]: y.func_closure[1].cell_contents
Out[31]: 6 
```

# android-listview - 当 Android 中的方向发生变化时，列表视图会被清除（使用 customAdapter、List )

> ID：16031093
> 
> 赞同：1
> 
> 时间：2013-04-16T07:24:26.977
> 
> 标签：android-listview, android-custom-view, android-orientation, device-orientation, orientation-changes

在我的应用程序中，我使用 CustomAdapter 实现了一个 Listview。Customadapter 由 List 对象组成，即`List<ClassObject>`. 除此之外，它`List<ClassObject>`是动态的。而这个 ListView 元素有一个按钮字段，用于从`List<ClassObject>`.

所有这些都在一个方向上正常工作。但是当方向更改为另一个时，列表视图变得清晰，我通过代码检查，`List<ClassObject>`变得清晰并`List<ClassObject>.size()`返回零。

而且我对纵向和横向使用不同的布局。

我在 manifest.xml 中尝试了 android:ConfigChanges="Orientation|Screensize"，它阻止了我的数据，但即使更改为横向并且它弄乱了我的布局，它也会保留一个纵向布局。

我想知道如何通过匹配横向和纵向的单独布局来防止我的数据。

该应用程序应该可以在 API 级别 SDK 8 到更高 15 之间运行。

`onSaveInstanceState(Bundle outInstanceState)`请告诉我和之间的区别`onRetainNonConfigurationInstance()`。

当我在 developer.android 上查看 onRetainNonConfigurationInstance() 时，他们说它在 API 级别 13 中已被弃用。那么我们应该改用什么？

我确实想用下面的代码以某种方式保存数据。

```
 protected void onSaveInstanceState(Bundle) {
    // save your data
 //lstRoughDetailsPL is an object of List<Rough>
    outState.putSerializable(""+R.id.lstSO,(Serializable) lstRoughDetailsPL);
    super.onSaveInstanceState(outState);
}

@SuppressWarnings("unchecked")
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    // read your previously saved data
        //lstRoughDetailsPL is an global object of List<Rough>
    lstRoughDetailsPL = (List<Rough>)savedInstanceState.getSerializable(""+R.id.lstSO);
    FillGrid();// used do fill the list view by looping around the List<Rough> and passing values as 4 string[] to a CustomAdapter which has 4 textview in each list entry.

} 
```

但是当来电或从通知幻灯片打开另一个应用程序时，我的活动会被迷住。说“不幸的是，MyRoughWorkOutApp 已停止”

我必须做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:34:34.990

我想到了。我将我的类更改为 parcelable 类，然后将 ArrayList 的对象传递给 bundle。

现在，一切正常且完美。如果有人需要帮助，请随时说..

# php - 有没有办法在 ACE 编辑器中保留换行和缩进？

> ID：16031095
> 
> 赞同：2
> 
> 时间：2013-04-16T07:24:28.627
> 
> 标签：php, javascript, ace-editor

我正在使用 ace 编辑器将一些代码插入文本区域，然后将其插入我们的数据库。

当我们`htmlentities()`对生成的代码执行操作时，它全部出现在一行中。我们希望将代码包装在`<pre>`标签中，以便我们可以以易于阅读的格式将其显示在网页上。

谢谢！

# mirth - Mirth Connect 在尝试创建两个动态日志文件时挂起

> ID：16031097
> 
> 赞同：1
> 
> 时间：2013-04-16T07:24:33.633
> 
> 标签：mirth

我在 mirth 环境中创建了一个频道。在这个频道中，我编写了用于创建两个动态日志文件的 javascript 代码。每当我启动频道文件时，都会创建频道文件，但 mirth 连接被挂起（不再进入正常状态，我正在重新启动每个时间）..请帮助我....

----logs.properties 文件-----

```
log4j.rootLogger=DEBUG
log4j.logger.DEFAULT_LOGGER=INHERIT, A1
log4j.logger.PROCESS_LOGGER=INHERIT, A2

log4j.appender.A1=org.apache.log4j.RollingFileAppender
log4j.appender.A1.File=c://test//${cname}//${fname}.log
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.maxFileSize=100KB
log4j.appender.A1.maxBackupIndex=10
log4j.appender.A1.layout.ConversionPattern=%d{yyyy-MMM-dd HH\:mm\:ss,SSS} [%t] %c %x%n      %-5p %m%n

log4j.appender.A2=org.apache.log4j.RollingFileAppender
log4j.appender.A2.File=c://test//${cname}//${fname}_ack.log
log4j.appender.A2.layout=org.apache.log4j.PatternLayout
log4j.appender.A2.maxFileSize=100KB
log4j.appender.A2.maxBackupIndex=10
log4j.appender.A2.layout.ConversionPattern=%d{yyyy-MMM-dd HH\:mm\:ss,SSS} [%t] %c %x%n  %-5p %m%n 
```

------javascript代码--------

```
importPackage(Packages.org.apache.log4j);
var channelName =       Packages.com.mirth.connect.server.controllers.ChannelController.getInstance().getDeployedChannelById(channelId).getName();
var currentDate = DateUtil.getCurrentDate("yyyyMMdd");
Packages.java.lang.System.setProperty("fname", currentDate);
Packages.java.lang.System.setProperty("cname", channelName);

PropertyConfigurator.configure("C:/Program Files/Mirth    Connect/conf/custom/logs.properties");

var logger1 = Logger.getLogger("DEFAULT_LOGGER");
 var logger2 = Logger.getLogger("PROCESS_LOGGER");

logger1.info("default");
logger2.info("process"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T23:38:25.733

您可能对 Mirth Connect 的实例施加了限制以写入文件，请尝试将您的代码包围如下：

```
var controller = Packages.java.security.AccessController.doPrivileged(
    Packages.java.security.PrivilegedAction(
         /* Your code goes here */
    )
); 
```

或者，您可以使用文件写入器目标创建两个单独的日志通道，并将您需要记录的内容路由到那里。

# c - 如何让 gdb 以十六进制而不是八进制打印字符串的不可打印字符，同时以 ascii 形式保留 ascii 字符？

> ID：16031100
> 
> 赞同：25
> 
> 时间：2013-04-16T07:24:40.067
> 
> 标签：c, string, debugging, assembly, gdb

假设我有一个缓冲区`buf`，其 c 字符串表示为

```
 char* buf = "Hello World \x1c" 
```

当我使用命令在 gdb 中打印此 buf 时`p buf`，我得到以下信息

```
 $1 = "Hello World \034" 
```

**是否有打印命令或 gdb 设置将打印以下内容？**

```
$1 = "Hello World \x1c" 
```

我尝试了各种格式参数，例如`/c`and `/x`，但没有一个能达到我想要的效果。我也玩过 printf 但无法达到预期的效果。

更新：我正在使用“GNU gdb (GDB) 7.0.1-debian”。

更新：我也玩过 x 。

如果我这样做`x/c`，它会为不可打印字符打印八进制和十进制，然后使用 ascii 和十进制打印可打印字符。

如果我这样做`x/s`，它的输出与 p 命令完全相同。

如果我这样做`x/x`只是输出十六进制，但我们会丢失可打印部分的 ascii 字符。

更新：除非不完整，否则此[参考资料](http://sourceware.org/gdb/current/onlinedocs/gdb/Print-Settings.html#Print-Settings)表明我想要的东西不可用，但任何人都可以确认吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T07:35:11.993

您可以使用该`x`命令转储您的`char`-pointer 指向的内存：

```
(gdb) x/32xb buf 
```

显示前 32 个字节。

看

```
(gdb) help x 
```

详情。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-03-14T21:36:10.900

在没有现有解决方案的情况下，我创建了[这个 gdb 命令](https://github.com/hq6/GdbAsciiHexPrint)，它为混合了可打印 ascii 和不可打印字符的字符串打印 ascii 和 hex。来源转载如下。

```
 from __future__ import print_function

    import gdb
    import string
    class PrettyPrintString (gdb.Command):
        "Command to print strings with a mix of ascii and hex."

        def __init__(self):
            super (PrettyPrintString, self).__init__("ascii-print",
                    gdb.COMMAND_DATA,
                    gdb.COMPLETE_EXPRESSION, True)
            gdb.execute("alias -a pp = ascii-print", True)

        def invoke(self, arg, from_tty):
            arg = arg.strip()
            if arg == "":
                print("Argument required (starting display address).")
                return
            startingAddress = gdb.parse_and_eval(arg)
            p = 0
            print('"', end='')
            while startingAddress[p] != ord("\0"):
                charCode = int(startingAddress[p].cast(gdb.lookup_type("char")))
                if chr(charCode) in string.printable:
                    print("%c" % chr(charCode), end='')
                else:
                    print("\\x%x" % charCode, end='')
                p += 1
            print('"')

    PrettyPrintString() 
```

要使用它，可以简单地把`source AsciiPrintCommand.py`然后在 gdb 中运行以下命令。为方便起见，可以将上面的 source 命令放入他们的`$HOME/.gdbinit`.

```
ascii-print buf
"Hello World \x1c" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-02-28T11:26:37.010

对于其他对 GDB 中的八进制转义序列感到恼火的人来说，很容易修复（如果您准备自己构建 GDB）：在 gdb/valprint.c 中，找到评论：

```
/* If the value fits in 3 octal digits, print it that
                     way.  Otherwise, print it as a hex escape.  */ 
```

并注释掉以下 4 行 - 所有转义序列都将打印为十六进制。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-31T21:58:57.953

OP 的答案的一个小变化，对于 8 位数组的用例，不一定在第一次出现时终止`\0`，并且它也试图尊重 GDB 的`print elements`和`print repeats`参数：

```
 from __future__ import print_function

    def print_extended_ascii_char(charCode):
      if charCode == ord('"'): return r'\"'
      if charCode == ord('\\'): return r'\\'
      if 32 <= charCode <= 126: return "%c" % charCode
      return r"\x%02x" % charCode

    class PrettyPrintString(gdb.Command):
        """Command to print an array of 8-bit bytes, using ASCII when possible and hex otherwise.
        https://stackoverflow.com/a/54469844/4958"""

        def __init__(self):
            # care for old GDB (< 8)
            try: GDB_COMPLETE_EXPR = gdb.COMPLETE_EXPRESSION
            except: GDB_COMPLETE_EXPR = gdb.COMPLETE_SYMBOL
            super (PrettyPrintString, self).__init__(name="ascii-print",
                    command_class=gdb.COMMAND_DATA,
                    completer_class=GDB_COMPLETE_EXPR, prefix=True)

        def invoke(self, arg, from_tty):
            if not arg.strip():
                print("What do you want me to print?")
                return
            # Limit on string chars or array elements to print
            limit = gdb.parameter('print elements')   or 10000000000
            # Threshold for repeated print elements 
            repeats = gdb.parameter('print repeats')  or 1000000
            start = gdb.parse_and_eval(arg)
            p = 0
            print('"', end='')
            i = 0
            unprinted = (None, 0)
            while i < start.type.sizeof:
                i += 1
                charCode = int(start[p])
                toPrint = print_extended_ascii_char(charCode)
                if toPrint == unprinted[0]:
                  unprinted = (toPrint, unprinted[1] + 1)
                else:
                  if unprinted[0] is not None:
                    print(unprinted[0] * min(unprinted[1], limit - (i - unprinted[1])), end='')
                    if i > limit:
                      print('...', end='')
                      break
                  unprinted = (toPrint, 1)
                p += 1
            if i - unprinted[1] > limit or unprinted[0] is None:
              print('"')
            elif repeats == 'unlimited' or unprinted[1] < repeats:
              print(unprinted[0] * unprinted[1], end='')
              print('"')
            else:
              print('",')
              print("'%s' <repeats %d times>" % (unprinted[0], unprinted[1] - 1))

    PrettyPrintString() 
```

和以前一样，将上述内容放在某个文件中（比如`~/.gdb-AsciiPrint.py`），然后运行`source ~/.gdb-AsciiPrint.py`或将该语句放入`.gdbinit`文件中。结果/比较：

```
(gdb) p tokmem[3]
$1 = "\000\030\000-1\320\a\200\031:\200\032[\200\024]\200\033\200\023;\200\034:\200\032[\200\023]\200\033\200\024;\320\r\200$:\200\030;\320\020\200 k\030\060\200!255\200\"\200\r\200\060(k:3,': \"');l\030k;\200+(\250\061)\200,\200\r\200\060(\200\034[\200\062],\200\034[\200\062]);\200+k<\f100\200,l\030k+\f100\200.\200+k<\f200\200,l\030k-\f100\200.\200\r\200*(k\200\063\061\066);\200\060(\200\034[l]);\200*(k\200\064\061\066);\200\020(\200$);\200\017;\200$\030\200$+2;\200\017;\200+l=\200\065\200,\200\060(\200\034[l],\200\034[l])\200.\200\060(\200\034[l]);\200\020(\200$);\200&('\"');\200\017", '\000' <repeats 65285 times>
(gdb) ascii-print tokmem[3]
"\x00\x18\x00-1\xd0\x07\x80\x19:\x80\x1a[\x80\x14]\x80\x1b\x80\x13;\x80\x1c:\x80\x1a[\x80\x13]\x80\x1b\x80\x14;\xd0\x0d\x80$:\x80\x18;\xd0\x10\x80 k\x180\x80!255\x80\"\x80\x0d\x800(k:3,': \"');l\x18k;\x80+(\xa81)\x80,\x80\x0d\x800(\x80\x1c[\x802],\x80\x1c[\x802]);\x80+k<\x0c100\x80,l\x18k+\x0c100\x80.\x80+k<\x0c200\x80,l\x18k-\x0c100\x80.\x80\x0d\x80*(k\x80316);\x800(\x80\x1c[l]);\x80*(k\x80416);\x80\x10(\x80$);\x80\x0f;\x80$\x18\x80$+2;\x80\x0f;\x80+l=\x805\x80,\x800(\x80\x1c[l],\x80\x1c[l])\x80.\x800(\x80\x1c[l]);\x80\x10(\x80$);\x80&('\"');\x80\x0f",
'\x00' <repeats 65285 times> 
```

这有点 hacky，所以希望该功能将被添加到 GDB 本身。

（旁白：不久前我问[了一个关于 Emacs 的类似问题](https://emacs.stackexchange.com/questions/33117/showing-bytes-as-hexadecimal-escapes-rather-than-octal-escapes)，其中一个看到这个问题的人[向 Emacs 提交了一个补丁](https://debbugs.gnu.org/cgi/bugreport.cgi?bug=27122)。现在八进制似乎不像以前那么受欢迎了；例如 JavaScript 已经[弃用八进制](https://mathiasbynens.be/notes/javascript-escapes)其字符串文字的转义序列。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-14T07:41:38.543

根据您在字符串中显示非 ascii 字符的原因，稍微不同的方法可能是使用不同的编码打印字符串。

就我而言，我想查看十六进制值以确保字符串是在 UTF-8 环境中使用 ISO8859-1 编码的。尽管[GDB 有 encoding](https://sourceware.org/gdb/onlinedocs/gdb/Character-Sets.html)，但它不是用于此目的，也不是用于此目的。

在探索由 OP 和[ShreevatsaR](https://stackoverflow.com/a/54469844/204658)创建的 gdb 命令时，我发现了将 GDB 值打印为字符串（如果它是字符串）的[`Value.string()`函数。](https://sourceware.org/gdb/onlinedocs/gdb/Values-From-Inferior.html)您可以给它一个编码选项，以便以下 Python 代码`isostring`向 GDB 添加一个命令：

```
from __future__ import print_function

class PrettyPrintString(gdb.Command):
    """Command to print an array of 8-bit bytes as ISO8859-1"""

    def __init__(self):
        super (PrettyPrintString, self).__init__(name="isostring",
                command_class=gdb.COMMAND_DATA,
                completer_class=gdb.COMPLETE_EXPRESSION, prefix=True)

    def invoke(self, arg, from_tty):
        if not arg.strip():
            print("What do you want me to print?")
            return
        value = gdb.parse_and_eval(arg)
        print('"' + value.string("iso8859-1")+ '"')

PrettyPrintString() 
```

# android - 在android上调整图像大小

> ID：16031102
> 
> 赞同：1
> 
> 时间：2013-04-16T07:24:43.360
> 
> 标签：android, bitmap, android-camera

我想更改相机拍摄的图像大小，例如 600x800。我成功地这样做了，它工作正常，但我也想改变字节大小，或者你也可以说内存。就像 google play 上的照片调整器应用程序[https://play.google.com/store/apps/details?id=com.xllusion.app.photoresizer&feature=search_result](https://play.google.com/store/apps/details?id=com.xllusion.app.photoresizer&feature=search_result)。例如，如果我在此应用上拍照并将分辨率更改为 600x800。它以 23kb（没有质量妥协）简单地创建这张分辨率照片，而原始照片为 600kb。有人可以帮忙吗？？？

# excel - 有条件地重命名 Excel 中的单元格

> ID：16031107
> 
> 赞同：1
> 
> 时间：2013-04-16T07:24:57.747
> 
> 标签：excel, replace, excel-formula

我有一个 5000 行的 Excel 电子表格。其中一行包含图像名称。这些图像名称的格式各不相同，但我想做的是检查该图像名称是否包含字符串“front”并以“alt-”开头。如果是这样，我想将前缀从“alt-”更改为“main-”。这可能吗？

例如：

```
alt-brand-product-name-colour-front.jpg  << Rename "alt-" to "main-"
alt-brand-product-name-diffcolour-front.jpg  << Rename "alt-" to "main-"
alt-brand-product-name-colour-back.jpg
alt-brand-product-name-colour-side.jpg
alt-brand-product-name-reallylongcolour-front.jpg  << Rename "alt-" to "main-" 
```

任何帮助都非常感谢:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:44:03.437

您可能想要使用下面的公式。如果找到“front”，那么它将用“main”替换所有出现的“alt”。如果未找到“front”，则原始字符串将保持原样。单元格 A1 代表您的原始文件名。

`=IF(ISERR(FIND("front",A1)),A1,SUBSTITUTE(A1,"alt","main"))`

# sql - 选择 max(date) 和表名作为列

> ID：16031110
> 
> 赞同：2
> 
> 时间：2013-04-16T07:25:11.823
> 
> 标签：sql, sql-server, tsql

我有很多表，例如：

1.  `A_names` （更新日期）
2.  `B_names`（更新日期）
3.  `C_names`（更新日期）

我想要`'%names%'`数据库中所有表的最大更新日期和表名

```
 select * into #temp1 
 from INFORMATION_SCHEMA.TABLES 
 WHERE TABLE_NAME  like '%names%' 
```

怎么做 ..？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:36:55.940

尝试这个 ：-

```
 Select name ,modify_date from sys.tables
 where name like '%names' 
```

并避免`INFORMATION_SCHEMA.TABLES`使用目录视图。

查看这篇文章[反对 INFORMATION_SCHEMA 视图的案例](https://sqlblog.org/2011/11/03/the-case-against-information_schema-views)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:51:45.323

可能 Praveen 的答案是解决您的问题的方法，但使用伪代码

```
 DECLARE @SqlStmt NVARCHAR(2000)

     For Each TableName in 'Select name from sys.tables'
     {
        if @SqlStmnt <> '' @SqlStmnt = @SqlStmnt + ' UNION '

        @sqlStmnt = @sqlStmnt + ' SELECT Max(updated_at_date) AS MAXDATE FROM ' + TableName 
     }

     **EXECUTE ('SELECT MAX(MAXDATE) FROM (' + @SqlStmt + ')')** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:34:00.600

```
SELECT MAX(updated_at_date)
FROM table1 
```

我对你的表名的描述有点困惑。无论如何，这是您选择最大日期的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T07:48:07.157

动态创建一条 SQL 语句，然后运行该命令。

```
DECLARE @dml nvarchar(max) = N''
SELECT @dml += ' UNION ALL SELECT ''' + name + ''' AS tableName, MAX(updated_at) AS maxUpdated_at FROM ' 
               + QUOTENAME(name)
FROM sys.tables 
WHERE name like '%names%'
PRINT @dml
SET @dml = STUFF(@dml, 1, 10, '')
EXEC sp_executesql @dml 
```

不带 STUFF 功能的选项

```
DECLARE @dml nvarchar(max)
SELECT @dml = ISNULL(@dml + ' UNION ALL', '') + ' SELECT ''' + name + ''' AS tableName, MAX(updated_at) AS maxUpdated_at FROM ' 
              + QUOTENAME(name)
FROM sys.tables 
WHERE name like '%names%'
EXEC sp_executesql @dml 
```

# scala - 玩！dist 抛出异常

> ID：16031114
> 
> 赞同：3
> 
> 时间：2013-04-16T07:25:29.513
> 
> 标签：scala, playframework, akka, playframework-2.1

我正在尝试创建我的 Play 的独立版本！应用程序，当我做`play run`它工作正常，但做之后`play dist`

`start`运行命令时出现以下错误

我正在使用 play2.1 和 Scala 2.10.0

```
糟糕，无法启动服务器。
@6e25l921m：无法初始化全局对象
    在 play.api.WithDefaultGlobal$$anonfun$play$api$WithDefaultGlobal$$globalInstance$1.apply(Application.scala:57)
    在 play.api.WithDefaultGlobal$$anonfun$play$api$WithDefaultGlobal$$globalInstance$1.apply(Application.scala:51)
    在 play.utils.Threads$.withContextClassLoader(Threads.scala:18)
    在 play.api.WithDefaultGlobal$class.play$api$WithDefaultGlobal$$globalInstance(Application.scala:50)
    在 play.api.DefaultApplication.play$api$WithDefaultGlobal$$globalInstance$lzycompute(Application.scala:383)
    在 play.api.DefaultApplication.play$api$WithDefaultGlobal$$globalInstance(Application.scala:383)
    在 play.api.WithDefaultGlobal$class.global(Application.scala:66)
    在 play.api.DefaultApplication.global(Application.scala:383)
    在 play.api.WithDefaultConfiguration$class.play$api$WithDefaultConfiguration$$fullConfiguration(Application.scala:80)
    在 play.api.DefaultApplication.play$api$WithDefaultConfiguration$$fullConfiguration$lzycompute(Application.scala:383)
    在 play.api.DefaultApplication.play$api$WithDefaultConfiguration$$fullConfiguration(Application.scala:383)
    在 play.api.WithDefaultConfiguration$class.configuration(Application.scala:82)
    在 play.api.DefaultApplication.configuration(Application.scala:383)
    在 play.api.Application$class.$init$(Application.scala:268)
    在 play.api.DefaultApplication.(Application.scala:383)
    在 play.core.StaticApplication.(ApplicationProvider.scala:52)
    在 play.core.server.NettyServer$.createServer(NettyServer.scala:228)
    在 play.core.server.NettyServer$$anonfun$main$5.apply(NettyServer.scala:259)
    在 play.core.server.NettyServer$$anonfun$main$5.apply(NettyServer.scala:258)
    在 scala.Option.map(Option.scala:145)
    在 play.core.server.NettyServer$.main(NettyServer.scala:258)
    在 play.core.server.NettyServer.main(NettyServer.scala)
引起：java.lang.NoSuchMethodError: com.typesafe.config.ConfigFactory.load(Lcom/typesafe/config/ConfigParseOptions;)Lcom/typesafe/config/Config;
    在 play.api.Configuration$.dontAllowMissingConfig$lzycompute(Configuration.scala:25)
    在 play.api.Configuration$.dontAllowMissingConfig(Configuration.scala:25)
    在 play.api.Configuration$.load(Configuration.scala:59)
    在 play.api.WithDefaultConfiguration$$anonfun$initialConfiguration$1.apply(Application.scala:74)
    在 play.api.WithDefaultConfiguration$$anonfun$initialConfiguration$1.apply(Application.scala:74)
    在 play.utils.Threads$.withContextClassLoader(Threads.scala:18)
    在 play.api.WithDefaultConfiguration$class.initialConfiguration(Application.scala:73)
    在 play.api.DefaultApplication.initialConfiguration$lzycompute(Application.scala:383)
    在 play.api.DefaultApplication.initialConfiguration(Application.scala:383)
    在 play.api.WithDefaultGlobal$class.play$api$WithDefaultGlobal$$globalClass(Application.scala:24)
    在 play.api.DefaultApplication.play$api$WithDefaultGlobal$$globalClass$lzycompute(Application.scala:383)
    在 play.api.DefaultApplication.play$api$WithDefaultGlobal$$globalClass(Application.scala:383)
    在 play.api.WithDefaultGlobal$class.play$api$WithDefaultGlobal$$javaGlobal(Application.scala:30)
    在 play.api.DefaultApplication.play$api$WithDefaultGlobal$$javaGlobal$lzycompute(Application.scala:383)
    在 play.api.DefaultApplication.play$api$WithDefaultGlobal$$javaGlobal(Application.scala:383)
    在 play.api.WithDefaultGlobal$$anonfun$play$api$WithDefaultGlobal$$globalInstance$1.apply(Application.scala:52)
    ... 21 更多

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-02T20:36:53.920

我遇到了同样的问题。确切的解决方法是将依赖项从

```
"org.skife.com.typesafe.config" % "typesafe-config" % "0.3.0" 
```

到

```
"com.typesafe" % "config" % "1.0.0" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T08:58:47.757

我发现我 `"org.skife.com.typesafe.config" % "typesafe-config" % "0.3.0"`在 build.sbt 中使用，并且 play start 是 using `com.typesafe.config-1.0.0`，删除对 skife 配置的依赖`0.3.0`解决了这个问题。

似乎这两个依赖项相互冲突。

# ios - 在后台运行 iOS App 超过 10 分钟

> ID：16031120
> 
> 赞同：6
> 
> 时间：2013-04-16T07:25:47.837
> 
> 标签：ios, objective-c, background, background-process

我试图让我的应用程序在后台运行超过 10 分钟，根据这个和我下面的好。（我想使用长时间后台运行来跟踪位置，我的代码只是使用计数器进行测试）任何人都可以帮助指出问题所在？

> *实现长时间运行的后台任务*
> 
> 对于需要更多执行时间来实现的任务，您必须请求特定权限才能在后台运行它们而不会被挂起。在 iOS 中，只允许特定类型的应用程序在后台运行：
> 
> 在后台向用户播放有声内容的应用程序，例如音乐播放器应用程序
> 
> 让用户随时了解其位置的应用程序，例如导航应用程序
> 
> 支持互联网协议语音 (VoIP) 的应用程序
> 
> 需要下载和处理新内容的报亭应用程序 从外部附件接收定期更新的应用程序
> 
> 实现这些服务的应用程序必须声明它们支持的服务并使用系统框架来实现这些服务的相关方面。声明服务让系统知道您使用了哪些服务，但在某些情况下，实际上是系统框架阻止了您的应用程序被挂起。

```
 - (void)viewDidLoad {
             [super viewDidLoad];

        counterTask = [[UIApplication sharedApplication]
                       beginBackgroundTaskWithExpirationHandler:^{

                       }];
                count=0;

        theTimer=[NSTimer scheduledTimerWithTimeInterval:0.1
                                                  target:self
                                                selector:@selector(countUp)
                                                userInfo:nil
                                                 repeats:YES];
         }
    - (void)countUp {

        {
            count++;
            NSString *currentCount;
            currentCount=[[NSString alloc] initWithFormat:@"%ld",count];
            theCount.text=currentCount;
            [currentCount release];
        }
        } 
```

**另一个问题：**我可以让 iOS 应用程序永远在后台运行吗？

----编辑代码以添加位置，仍然没有运行超过 10 分钟，对我做错了什么有帮助吗？

```
- (void)viewDidLoad {
     [super viewDidLoad];

 count=0;

locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;
locationManager.distanceFilter = kCLDistanceFilterNone;
locationManager.desiredAccuracy = kCLLocationAccuracyBest;

 [locationManager startUpdatingLocation];

counterTask = [[UIApplication sharedApplication]
               beginBackgroundTaskWithExpirationHandler:^{
                   // If you're worried about exceeding 10 minutes, handle it here

                   [locationManager startUpdatingLocation];
               }];
theTimer=[NSTimer scheduledTimerWithTimeInterval:0.1
                                          target:self
                                        selector:@selector(countUp)
                                        userInfo:nil
                                         repeats:YES];

 }

     (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
 NSLog(@"OldLocation %f %f", oldLocation.coordinate.latitude, oldLocation.coordinate.longitude); NSLog(@"NewLocation %f %f", newLocation.coordinate.latitude, newLocation.coordinate.longitude);

    count++; NSString *currentCount;
 currentCount=[[NSString alloc] initWithFormat:@"%ld",count];
 theCount.text=currentCount; [currentCount release];
 }

    (void)countUp { [locationManager startUpdatingLocation];
 { count++; NSString *currentCount; 
currentCount=[[NSString alloc] initWithFormat:@"%ld",count]; 
theCount.text=currentCount;
 [currentCount release]; } } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T08:10:01.537

所以你的应用使用了定位服务。然后请阅读[位置感知编程指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)。

您需要对 Info.plist 进行一些更改：

*   如果您的应用依赖位置服务才能正常运行，`location-services`请添加`UIRequiredDeviceCapabilities`
*   如果您的应用需要 GPS 硬件，请添加`gps`到`UIRequiredDeviceCapabilities`
*   **如果您需要在后台运行您的应用程序超过 10 分钟，请添加`location`到`UIBackgroundModes`. 然后，您的位置经理将提供超过 10 分钟限制的位置。**
*   您还应该设置`NSLocationUsageDescription`（也可以本地化）

> *在后台获取位置事件*
> 
> 如果您的应用需要在前台或后台提供位置更新，则有多种选择。首选选项是使用重大位置更改服务在适当的时间唤醒您的应用程序以处理新事件。但是，如果您的应用需要使用标准位置服务，您可以将您的应用声明为需要后台位置服务。
> 
> 仅当缺少这些服务会影响其运行能力时，应用程序才应请求后台位置服务。此外，任何请求后台定位服务的应用程序都应该使用这些服务为用户提供切实的好处。例如，逐向导航应用程序可能是后台定位服务的候选者，因为它需要跟踪用户的位置并报告下一个转弯的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:15:50.937

有关详细信息，请参阅[phix23](http://stackoverflow.comhttps://stackoverflow.com/a/16031860/2998)的答案（和文档），但在这里我想解释一下您可能会发生什么。

您引用的文档中几乎涵盖了所有这些内容。

任何应用程序都可以在后台运行长达十分钟。这就是该`beginBackgroundTaskWithExpirationHandler:`方法的作用。无论您设置了哪些标志和选项，这就是您使用该方法获得的全部内容。

对于需要跟踪位置的应用程序，您可以使用`CLLocationManager`. 这不允许您的应用程序在后台运行，只要您愿意。相反，它会在发生有趣的事情时通知您——这就是委托的用途。所以你不能保证你的`countUp`方法每十分钟被调用一次，但是你*可以*让操作系统在用户移动他们的手机一定距离时调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-21T13:29:45.670

通过在方法中添加以下内容`applicationDidEnterBackground`，它似乎可以永远执行：

```
[app beginBackgroundTaskWithExpirationHandler:^{}]; 
```

然后您使`willEnterForeground`.

我最近在 iOS 6 上取得了成功，但我不确定它是否会被商店批准。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T08:23:05.697

顺便说一句，在您的 plist 中，您可以设置`Required background modes`然后在 Item0`App registers for location updates`

# c - 如何测量program.exe启动时间？

> ID：16031122
> 
> 赞同：1
> 
> 时间：2013-04-16T07:25:54.087
> 
> 标签：c, windows, performance, winapi, performance-testing

我想测量我的程序 exe 启动时间，它是从单击或 [enter]（如果从控制台或任何其他方式启动）到程序启动完成并且其代码可以在所有结构设置下执行的时间（可能这意味着何时执行 main() 中的第一条命令 [?])

我想从我的代码内部以编程方式测量它 - 所以我认为一种方法需要读取触发程序的确切时间，然后从第一行代码执行的时间中减去这个时间

（对不起我的英语不好）怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:00:15.953

您想从单击或 [enter]（包括 shell（cmd.exe 或 Windows Explorer）开销）还是从程序启动来衡量？

以编程方式，您只能从进程创建开始测量时间，因此不包括查找、读取和映射 .exe 文件或任何 DLL。时间将根据虚拟内存中已映射的内容而有所不同。它将包括 C RTL 的初始化，但仅此而已。

可能你能做的最好的是[GetProcessTimes](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms683223%28v=vs.85%29.aspx)。

问题是，即使是父进程也不一定要等待子进程初始化完成——它可以使用`WaitForInputIdle`. 如果不自己编写，我看不到任何方法来测量外壳开销。

# css - 无法在谷歌浏览器中点击 soundcloud 小部件

> ID：16031124
> 
> 赞同：0
> 
> 时间：2013-04-16T07:26:02.307
> 
> 标签：css, html, flash, iframe, soundcloud

好吧，这是我的问题。我正在尝试将 soundcloud 播放器放入我正在构建的站点中。唯一的问题是它在谷歌浏览器中不可点击。它在Firefox中运行良好，但是当我检查谷歌浏览器时它不起作用。

编辑：它在 FF 中不起作用

这是该页面的 HTML：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>NoJoke Media</title>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div id="container">

        <div id="header">
            <img name="nojoke" src="images/No_Joke_Media_Logo.png" alt="nojoke logo" />
        </div>
        <div>

            <nav>
                <ul>
                    <li><a href="/index.php">Home</a></li>
                    <li><a href="#">News</a></li>
                    <li><a href="#">Bio</a></li>
                    <li><a href="#">Media</a>
                        <ul>
                            <li><a href="/music.php">Music</a></li>
                            <li><a href="#">Vidos</a></li>
                            <li><a href="#">Photos</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">Store</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>

        </div>

        <div id="wrap">

            <div id="contain">

                <div id="other_content">
                    <div id="music">
                        <iframe width="100%" height="450" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Fusers%2F2395662&amp;color=ff6600&amp;auto_play=false&amp;show_artwork=false"></iframe>
                    </div>
                </div>

            </div>

        </div>

        <div id="footer">
            <div id="social">
          <a href="#"><img src="images/facebook.png" width="60" height="60" /></a><a href="#"><img src="images/twitter1.png" width="60" height="60" /></a><a href="#"><img src="images/tumblr.png" width="60" height="60" /></a><a href="#"><img src="images/youtube.png" width="60" height="60" /></a><a href="#"><img src="images/email-icon.png" width="60" height="60" /></a></div>
          <center><p>Design by <a href="http://tomascordero.com">Tomas Cordero</a></p></center>
        </div>

     </div>

</body>
</html> 
```

这是我的CSS：

```
@charset "utf-8";
body {
    font: 100%/1.4 Verdana, Geneva, Helvetica, sans-serif;
    background-color: #FFF;
    margin: 0;
    padding: 0;
    color: #CCC;
}
h1,h2,h3,h4,h5,h6,h7,h8,h9 {
    font: 100%/1 Verdana, Geneva, Helvetica, sans-serif;
    padding:0;
}
a {
    text-decoration: none;
    color: #0C0;
}
/*--Navigation bar--*/
nav ul ul {
    display: none;
}
nav ul li:hover > ul {
        display: block;
}
nav ul {
    background: #181f32; 
    background: linear-gradient(top, #344268 0%, #181f32 100%);  
    background: -moz-linear-gradient(top, #344268 0%, #181f32 100%); 
    background: -webkit-linear-gradient(top, #344268 0%, #181f32 100%);
    box-shadow: 0px 0px 10px #000;
    padding: 0 10px;
    border-radius: 5px;  
    list-style: none;
    position: relative;
}
nav ul:after {
        content: ""; clear: both; display: block;
}
nav ul li {
    float: left;
}
nav ul li:hover {
        background: #344268;
        background: linear-gradient(top, #4f5964 0%, #5f6975 40%);
        background: -moz-linear-gradient(top, #4f5964 0%, #5f6975 40%);
        background: -webkit-linear-gradient(top, #4f5964 0%,#5f6975 40%);
}
nav ul li:hover a {
            color: #fff;
}
nav ul li a {
        display: block; padding: 15px 20px;
        color: #fff; text-decoration: none;
}
nav ul ul {
    background: #181f32; border-radius: 0px; padding: 0;
    position: absolute; top: 100%;
}
nav ul ul li {
        float: none; 
        border-top: 1px solid #999;
        border-bottom: 1px solid #999;
        position: relative;
}
nav ul ul li a {
            padding: 15px 40px;
            color: #fff;
}   
nav ul ul li a:hover {
                background: #344268;
}
nav ul ul ul {
    position: absolute; left: 100%; top:0;
}
/*--container--*/
#container {
    left:50%;
    margin-left:-460px;
    width:900px;
    margin-bottom: 40px;
    position: absolute;
}
/*--Header--*/
#header {
    position:relative;
    width: 900px;
    height: auto;
    margin-bottom: 40px;
}
/*--Content--*/
#wrap {
    width: 900px;
    height:100%;
    position:relative;
}
#contain {
    width: 100%;
    height:100%;
    float:left;
    margin-bottom:20px;
    position: relative;
    z-index:-3;
}
#right {
    width: 220px;
    background: rgb(24, 31, 50);
    background: rgba(24, 31, 50, 0.8);
    float:right;
    margin-left:5px;
    border-top-right-radius: 5px;
    height:200px;
    box-shadow: 0 0 8px #000;
    border-bottom-right-radius:5px;
    padding:5px;
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box; 
}
#center {
    width: 450px;
    background: rgb(24, 31, 50);
    background: rgba(24, 31, 50, 0.8);
    height:800px;
    left:50%;
    float:right;
    box-shadow: 0 0 8px #000;
    border-bottom-left-radius:5px;
    border-bottom-right-radius:5px;
    margin-bottom: 300px;
    padding:5px;
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box; 
}
#left{
    width: 220px;
    border-top-left-radius: 5px;
    background: rgb(24, 31, 50);
    background: rgba(24, 31, 50, 0.8);
    height: 300px;
    float: left;
    box-shadow: 0 0 8px #000;
    border-bottom-left-radius:5px;
    padding:5px;
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;          /* Opera/IE 8+ */
}
/*--Content style--*/
.news_headline {
    text-align:justify;
    font-weight:bold;
    color:#FFF;
    padding-bottom:5px;
    text-transform:uppercase;
}
.news_body {
    text-align:justify;
    padding-bottom:5px;
}
.news_footer {
    text-align:left;
    font-size:9px;
    border-bottom:2px dashed #344268;
    padding-bottom:5px;
    margin-bottom:10px;
}
#twitterfeed {
    text-align:justify;
}
#twitterfeed h3 {
    font-weight:bold;
    font-size:18px;
    text-transform:uppercase;
    text-align:center;
}
#latest {
    text-align:justify;
}
#latest h3 {
    font-weight:bold;
    font-size:18px;
    text-transform:uppercase;
    text-align:center;
}
#news {
    text-align:justify;
}
#news h2 {
    font-weight:bold;
    font-size:22px;
    text-transform:uppercase;
    text-align:left;
    padding-left:10px;
}
/*--Footer--*/
#footer {
    position:absolute;
    bottom:0;
    width:100%;
    height:150px;
    background: rgb(24, 31, 50);
    background: rgba(24, 31, 50, 0.8);
    box-shadow: 0 0 8px #000;
    padding:5px;
    border-top-right-radius:5px;
    border-top-left-radius:5px;
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;          /* Opera/IE 8+ */
}
#social {
    width:100%;
    height:auto;
    padding-bottom:30px;
    border-bottom:2px dashed #344268;
    position:relative;
    text-align:center;
}
/*--Page other than index--*/
#other_content {
    background: rgb(24, 31, 50);
    background: rgba(24, 31, 50, 0.8);
    height: 800px;
    width:100%;
    box-shadow: 0 0 8px #000;
    padding:5px;
    border-radius: 5px;
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;
    margin-bottom: 300px;
    position:relative;
    z-index:-4;
}
#music {
    width: 100%;
    height:300px;
    border-bottom:2px dashed #344268;
} 
```

现在我在代码中一遍又一遍，我找不到问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:15:21.510

在

```
#other_content 
```

我删除了

```
position:relative; 
```

它似乎工作见[jsfiddle](http://jsfiddle.net/8Fshj/)

编辑阿尔多删除`#content {position:relative;]`

# android - Web 应用程序：隐藏除 android 浏览器之外的 div

> ID：16031126
> 
> 赞同：4
> 
> 时间：2013-04-16T07:26:07.163
> 
> 标签：android, jquery, html, jquery-mobile

我开发了一个使用 Jquery 移动框架的移动 Web 应用程序...我的主页添加了一个**div**，其中包含一些关于谁浏览我的网站 android 设备的说明...

```
<div class="instruction">
     Some instructions for android users here...
</div> 
```

我的问题是，只有当我的网站在运行 android 设备/浏览器时，我才需要这个 div 显示，如果在运行我的网站时，除了 android 浏览器，例如：iOs、诺基亚等……只需要隐藏这个 div……这意味着此 div 内容只允许使用 android 设备/浏览器浏览我的网站的人阅读......

任何想法。？？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:36:53.200

用这个：

```
var agent = navigator.userAgent;      
var isAndroid = (agent.indexOf("Android")  > 0);     

if (isAndroid ){ 
    $("div.instruction").show();
} 
```

还有其他更精确的设备检测方法，您可以在此答案中找到它们：**[浏览器/手机检测的可用解决方案是什么](https://stackoverflow.com/a/15055352/1848600)**

工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/xHA46/](http://jsfiddle.net/Gajotres/xHA46/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T07:36:40.700

检查用户代理并采取行动 -

```
if (navigator.userAgent.indexOf('Android') != -1) {
    $("div.instruction").show();
} 
```

# ruby-on-rails - 正确创建关联的 ROR 模型回调

> ID：16031127
> 
> 赞同：0
> 
> 时间：2013-04-16T07:26:13.167
> 
> 标签：ruby-on-rails, ruby

我有关联的模型`User`和`Channel`Rails 3 应用程序。`Channel`是在创建的那一刻`User`创建的

```
class User < ActiveRecord::Base
  before_create do
    self.channels.build
  end
  has_many :channels  
end    

class Channel < ActiveRecord::Base
  belongs_to :user
  validations block
  ...
end 
```

问题是如果 Channel 的验证不通过`User`，将在 DB 中创建，但`Channel`不会。在哪个回调位置`Channel`创建创建`User`并`Channel`在一个“事务”中创建？或者，也许，还有另一种正确的方法？

提前致谢。

**UPD1：** `Channel`在`User`模型中创建时自动创建，因为在某些情况下创建的对象不调用控制器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:39:55.163

您可以使用“accepts_nested_attributes_for”

class User < ActiveRecord::Base
has_many :channels
accept_nested_attributes_for :channels
end

class Channel < ActiveRecord::Base
belongs_to :user
validations block
end

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:32:54.567

使用`validates :channels, associated: true`.

您可能应该查看您的频道验证，因为如果它没有保存，那么您正在做您的应用程序没有预料到的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T07:36:34.453

你想太多。这是非常常见的情况，并且有一个约定。

首先在 Pedro 说，您需要在 Channel 模型中验证关联。这将防止在没有 user_id 的情况下保存频道。

然后，在控制器的`create`操作中，您只需确保将包括用户对象在内的所有参数发送到此处以进行创建。

# jquery - 仅隐藏溢出底部内容

> ID：16031130
> 
> 赞同：1
> 
> 时间：2013-04-16T07:26:23.757
> 
> 标签：jquery, css, overflow

我正在导航元素上制作一个小动画，但我遇到了问题。动画 div 的内容应该只在 nav 元素的顶部可见，而不是 bot。但是动画 div 的高度大于导航元素的高度，所以动画 div 显示在导航的底部。我针对这种情况做了一个 jsFiddle：http: [//jsfiddle.net/umc4c/](http://jsfiddle.net/umc4c/)

```
// Homepage navigatie fadeIn + contentblok animatie
$('#content_home').hide();
$('nav').hide().fadeIn(1200, function(){
    var result = $("#content_home").outerHeight();

    $('#content_home').animate({marginTop: -Math.abs(result)},1000);
    $("#content_home").css("display", "block");
});

// Homepage navigatie animatie + url click event
$('nav a').click(function(event){
    event.preventDefault();
    var href = this.href;

    $('nav').animate({
        marginTop: '-650px'}, 
        1000,
        function(){
            window.location = href;
        });
}); 
```

我现在确实通过为导航 div 设置 650 像素的高度并隐藏了溢出来解决了这个问题。但这种方式看起来很讨厌，我不喜欢它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T08:47:04.983

您总是可以使用**slideDown**而不是**animation**。这样，div 将在滑动时扩展，而不仅仅是移动 div。

这是小提琴：http: [//jsfiddle.net/umc4c/21/](http://jsfiddle.net/umc4c/21/)

*请注意，您必须稍微更改您的 css。您必须添加相对于导航类的位置。然后你必须添加底部：100%; 到#content_home。

```
nav {
    margin-top:400px;
    width:500px;
    background-color:grey;
    height:120px;
    **position:relative;**
}
#content_home {
    padding:50px;
    position:absolute;
    z-index:-1;
    background-color:#000;
    height:200px;
    width:200px;
    color:#fff;
    **bottom:100%;**
} 
```

# java - Android - 比较 Intent 中的字符串

> ID：16031131
> 
> 赞同：0
> 
> 时间：2013-04-16T07:26:24.137
> 
> 标签：java, android, android-intent

这必须是一个非常简单的答案。我一直在搜索和搜索如何将变量与 Java 中的字符串进行比较。我有一个意图，并且只想在意图中的数据匹配时声明一些变量。这肯定不会那么难。Java让我很沮丧。:) 我知道该类型在某些时候会等于消息，但它不起作用。例如

```
String type = intent.getStringExtra("type");

 if(type.equals("message")){
            String msg = intent.getStringExtra("message");
            String avatar = intent.getStringExtra("photo");
            count = Integer.parseInt(intent.getStringExtra("count"));
            Bitmap photo = getBitmapFromURL(avatar);
            String theMessage = Html.fromHtml(msg).toString().replace("\\", "");
        } 
```

**编辑：**

我按照建议做了输出类型来记录，它确实显示`message`得像它应该的那样。我正在尝试使用相同的变量`theMessage`，`photo`但它抱怨它未声明，因此它提示修复并将其放在顶部。这是导致它不起作用的原因吗？顺便说一句，这是一个通知。

```
private static String theMessage = null;
private static Bitmap photo = null; 
```

我稍后在代码中尝试这样做，但它抱怨没有被声明。

```
 if(type.equals("message")){
        notification.setSubText(theMessage);
        notification.setLargeIcon(photo);
        } 
```

这就是我所拥有的，即使在未声明的错误消失之后，它也无法使用静态变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:45:15.660

试试吧

```
Bundle extras = intent.getExtras();

String type = extras.getString("type");
Log.i("type", type);

if(type.equals("message")){
    String msg = extras.getString("message");
    String avatar = extras.getString("photo");
    count = Integer.parseInt(extras.getString("count"));
    Bitmap photo = getBitmapFromURL(avatar);
    String theMessage = Html.fromHtml(msg).toString().replace("\\", "");
} 
```

并查看 logCat 与类型相反的内容。

希望能帮助到你。

# windows - 在 IIS 8.0 上部署 MVC 3.0 Web 应用程序项目

> ID：16031132
> 
> 赞同：2
> 
> 时间：2013-04-16T07:26:32.347
> 
> 标签：windows, model-view-controller, iis, deployment

通常，在 webforms 中，当您必须部署应用程序时，我们从 Visual Studio**发布**并将发布的文件夹仅放在服务器 (IIS) 上。但是，在 MVC Web 应用程序中，它是如何完成的。

它是否遵循相同的方式（仅在服务器上发布文件夹）或其他方法。

我尝试了以下方法，但没有得到任何结果。

1.  Web 部署包 - 完成本教程后 -> [http://pluralsight.com/training/players/PSODPlayer?author=scott-allen&name=mvc3-building-deploy&mode=live&clip=0&course=aspdotnet-mvc3-intro](http://pluralsight.com/training/players/PSODPlayer?author=scott-allen&name=mvc3-building-deploy&mode=live&clip=0&course=aspdotnet-mvc3-intro)

在 Web 部署包教程下，我找到了如何创建可以在 IIS 管理工具中导入的 Web 部署包。然后我发现了这个链接来帮助我做同样的事情->

[http://www.iis.net/learn/publish/using-web-deploy/building-a-web-deploy-package-from-visual-studio-2010](http://www.iis.net/learn/publish/using-web-deploy/building-a-web-deploy-package-from-visual-studio-2010)

. 但是在完成所有步骤之后，我得到了这个错误 - >（见截图）![部署后出错](https://i.stack.imgur.com/Beg7P.jpg) **这个方法中缺少什么步骤？**

```
2\. Add roles - Windows Server 2012 - turn certain features of ASP.NET 3.5 and ASP.NET 4.5 on. 
```

我按照本教程进行了上述步骤->

[http://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-using-aspnet-35-and-aspnet-45](http://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-using-aspnet-35-and-aspnet-45)

按照教程，我应该为部署 MVC 3.0 应用程序，打开“应用程序开发”选项卡下的 ASP.NET 3.5 和 ASP.NET 4.5 功能。在此之后，要部署应用程序，我应该在弹出的“高级设置”下选择 .net V2.0 作为应用程序池（参见屏幕截图） ![在此处输入图像描述](https://i.stack.imgur.com/nUB1E.jpg)

但即使按照教程我得到了同样的错误“**应用程序中的服务器错误......** ”

```
 3\. Publish under the "File System" Method. 
```

我们右键单击项目并选择“发布”，然后会弹出一个对话框，显示各种部署选项。在这个我们选择 - “文件系统”（见截图）![在此处输入图像描述](https://i.stack.imgur.com/F5uy6.jpg)

我们发布了项目，但再次遇到同样的错误。

问题/疑问->

**1\. 在 IIS 8 上部署 MVC 3.0 应用程序的正确完整证明方式是什么。?**

**2.我们是否需要将整个解决方案放在服务器上并从那里运行或以其他方式运行**

**3.上述三种方法中是否缺少某些步骤或某些命令**

**4\. 我们的要求基本上是找到一种方法，只将已发布的文件夹放在服务器上并运行，但它在 MVC 中真的是这样工作的吗（比如 web 表单）？**

**5\. 文件系统方法（上面的第 3 点）是 Webforms 常用的方法，是否建议在 MVC 中也这样做。**

**6\. 部署在 localhost 上运行，但是通过创建虚拟目录尝试时，它再次无法运行。**

***工作环境是 Visual Studio 2012 - Web Server Windows Server 2012- IIS 8***

需要帮助来解决困惑。

问候， 曼格什

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-19T08:48:54.910

我找到了在 Windows Server 2012 上使用 IIS8 部署 MVC 3.0 应用程序的完整解决方案。以下是步骤：

1.  启动 Visual Studio 并在运行 IDE 时选择“以管理员身份运行”选项。

2.  更改您的 Web.config 以添加以下代码行。

    ```
    <globalization culture="en-US"/> 
    ```

这确保即使您的目标服务器有一些不同的设置，您也可以通过提及这行代码来强制执行您自己的设置。否则，您可能会遇到诸如 - 提交具有日期字段的表单，您可能无法提交，因为日期将设置为

```
01/01/01 :00:00:00:00 
```

2.  构建 - 遵循三个确定的步骤。

一个。清洁解决方案

湾。构建解决方案

C。重建解决方案

3.  如果您正在使用共享环境，请完全签入您的解决方案。右键单击项目解决方案并选择发布选项。（ 截屏）![在此处输入图像描述](https://i.stack.imgur.com/nPjem.jpg)

4.  这将打开一个对话框，例如 this.(Screenshot 2)。这将向您显示可能的部署选项和一些其他设置。

在此屏幕上，您不必做太多事情，它会自动设置当前发布配置文件的默认设置。

![在此处输入图像描述](https://i.stack.imgur.com/2YX0T.png)

下一个截图：

单击下一个选项卡，您将看到一堆选项，如下所示：

第一个选项要求您提供发布方法。它们有四个选项：

一个。网络部署

湾。网络部署包

C。文件系统

d。FTP

e. FPSE。

我的发布方法是“文件系统”。我还使用 Web-Dpeloy 和 Web-Deploy Package 部署了应用程序，但为了本文的目的，我将坚持使用文件系统。

下一个参数询问您希望发布文件夹所在的目标位置。这可以是硬盘驱动器上的本地位置或服务器上的远程位置。我在服务器上选择了一个远程位置，在那里我创建了一个发布文件夹，发布后我的所有文件都将存放在这里。

目标 URL 是可选的。我把它留空了。 ![在此处输入图像描述](https://i.stack.imgur.com/fRfi5.jpg)

让我们继续下一个屏幕截图。 ![在此处输入图像描述](https://i.stack.imgur.com/WwAv1.jpg)

设置选项卡为您提供以下选项：

1.  配置：此下拉菜单中有两个选项 - 调试和发布。选择发布选项。

2.  确保勾选“发布前删除所有现有文件”选项。这将在您每次发布项目之前清除所有现有文件。

3.  这种发布方法不支持数据库发布。因此，如果您在项目中创建一个，则不要将其用于发布。在我的例子中，我使用了一个外部数据库来绑定到我的 Model Classes ，因此这种方法可以工作。

在下一个屏幕截图中：您在发布项目之前预览您的设置。 ![在此处输入图像描述](https://i.stack.imgur.com/4xQzK.jpg)

它将显示已发布的文件/文件夹将驻留的目标文件夹以及将要发布的项目，并再次显示警告，指出不会发布数据库。

点击发布。

检查您的输出窗口，因为它将逐行显示发布所需的步骤。

最后，它会显示成功发布项目的消息。

下一步：转到将保存已发布文件的位置。截图：你应该得到这样的东西：

![在此处输入图像描述](https://i.stack.imgur.com/GW2I5.jpg)

这是您发布的文件夹和文件。现在让我们使用 IIS 来运行网站。

转到 IIS8 并根据屏幕截图右键单击此选项。（此镜头可能因系统而异）。 ![在此处输入图像描述](https://i.stack.imgur.com/tJLte.jpg)

单击添加网站，这将打开另一个对话框，如下所示。

![在此处输入图像描述](https://i.stack.imgur.com/t8DWG.jpg)

输入您的站点名称，然后单击页面右侧的“选择”按钮，这将打开另一个弹出窗口，如下所示。

![在此处输入图像描述](https://i.stack.imgur.com/z758S.jpg)

从此下拉列表中选择合适的框架。因为我的是 MVC 3.0 项目，所以我选择了 ASP.NET 4.0 设置。（请尝试这些选项以了解哪些设置适合您。）

继续，输入/浏览到保存解决方案的物理路径。在我的例子中，我展示了我所有已发布文件的位置的屏幕截图。（有时为了避免文件夹冲突，请创建一个单独的文件夹并将其输入为您的物理位置，然后将文件从您发布它的文件夹复制到新文件夹）

保持其余条目不变。如果某些应用程序已经在默认 -80 端口上运行，则提供一个新端口。单击确定。

重新启动 IIS。转到浏览器并输入 URL。

就是这样！您的 MVC 3.0 Web 应用程序已成功部署。

谢谢，

曼格什

（PS - 任何不清楚的地方请留下您的评论，如果您觉得有用，请不要忘记 +1 :)）

# c# - 不支持给定路径的格式

> ID：16031134
> 
> 赞同：1
> 
> 时间：2013-04-16T07:26:36.613
> 
> 标签：c#, asp.net, visual-studio-2010, export-to-excel

我正在尝试下载一个 excel 表，并且我正在动态生成它的文件名，该文件名必须采用以下格式：

例如：

```
User_Wise_List_Of_Documents_2013_On_16_04_2013 
```

为此，我编写了以下代码：

> 字符串 currentDate = DateTime.Now.Date.ToString();
> 
> 字符串 currentYear=DateTime.Now.Year.ToString();
> 
> 文件名 = Server.MapPath("~/User/Documents/") + "User_Wise_List_Of_Documents_" + currentYear + " *on* " + currentDate + ".xls";

不知何故，它给了我以下例外：

> `The given path's format is not supported.`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:48:38.003

我认为您的文件名包含无效字符，例如`:`因为您正在使用`string currentDate = DateTime.Now.Date.ToString()`.

查看无效字符列表

```
var invalidChars = Path.GetInvalidFileNameChars(); 
```

**编辑**

您可以使用它来替换无效字符

```
string newdatestr = String.Join("",currentDate.Select(c => invalidChars.Contains(c) ? '_' : c)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:35:58.940

你检查过结果`Server.MapPath("~/User/Documents/")`吗？

它将返回您网站文件夹的目录路径，`"/User/Documents/"`例如`"C:\wwwroot\User\Documents\"`. 您无法从那里下载文件（除非您在本地托管，在这种情况下它可能会起作用，但仅限于您。

可能您正在寻找该`Page.ResolveUrl()`功能，它将创建一个相对于您的网站而不是文件系统的 web uri。

# java - 从 xml 导入数据库

> ID：16031136
> 
> 赞同：1
> 
> 时间：2013-04-16T07:26:46.083
> 
> 标签：java, xml, hibernate, import, db2

我正在使用`IBM DB2 v9.1`并希望将所有数据库导出到 xml 文件，并在需要时将其导入回来。我的数据库中有 9 个表。

我正在使用`java and hibernate`. 到目前为止我所做的是：通过hibernate获取所有数据并填充POJO对象，然后将对象导出到xml文件。现在要导入，我需要先删除所有现有数据库，然后将 xml 文件数据导入数据库。

**问题在于主键**（ID）。一旦从 DB2 中删除 id，则无法使用该 id 保存数据，它将被分配新的 id。这会扰乱外键关系。什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:19:41.883

导入文件后，所有关系都将被映射以检查它们的相互关系。映射关系后将创建新对象，它们将使用新 ID 保存在数据库中，因为 DB2 不会将数据保存在已删除的旧 ID 上，而是将其保存到新 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:01:05.613

也许[MERGE 语句](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=%2Fcom.ibm.db2.udb.admin.doc%2Fdoc%2Fr0010873.htm)可以帮助您。如果已经存在具有匹配 id 的行，它将让您更新该行。如果没有匹配 ID 的行，那么它将允许您插入它。

那么问题可能变成了，当您创建 XML 文件时，您真的需要从 DB2 中删除行吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:57:56.860

你说的所有数据库是什么意思？所有数据？甚至是 DDL？

我认为您正在导出所有数据，并且您将创建的表留下以重新填充导出的数据。

问题是约束和生成的值。有一篇关于生成值的好文章：http: [//www.ibm.com/developerworks/data/library/techarticle/0205pilaka/0205pilaka2.html](http://www.ibm.com/developerworks/data/library/techarticle/0205pilaka/0205pilaka2.html)

对于引用约束，最好在导入之前删除/停用它们，然后导入数据，最后重新创建/激活引用约束。

在这里，一个很好的启用/禁用约束的存储过程：[http ://www.dzone.com/snippets/db2-enabledisable-constraints](http://www.dzone.com/snippets/db2-enabledisable-constraints)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T08:35:20.263

如果您想出于测试目的导出/导入数据，您可能需要考虑 DbUnit [http://www.dbunit.org/index.html](http://www.dbunit.org/index.html)

# javascript - 如何使用删除按钮取消设置购物车中的会话产品？

> ID：16031139
> 
> 赞同：0
> 
> 时间：2013-04-16T07:26:52.340
> 
> 标签：javascript, php, session, shopping-cart

如何使用删除按钮取消设置购物车中的会话产品？我有以下代码；“清除购物车”正在工作，并取消了购物中所有物品的会话。但问题是'remove'不会通过pid取消设置单个产品吗？

**php**：

```
session_start();

$pid=$_SESSION['pid'];

function remove_product($pid){
  $pid=intval($pid);
  $max=count($_SESSION['product1']);

  for($i=0;$i<$max;$i++){

    if($pid==$_SESSION['product1'][$i]['pid']){
      unset($_SESSION['product1'][$i]);
      break;
    }

  }

  $_SESSION['product1']=array_values($_SESSION['product1']);

}

if($_REQUEST['command']=='delete' && $_REQUEST['pid']>0){
  remove_product($_REQUEST['product1'][$pid]);
}

if($_REQUEST['command']=='clear' && isset($_REQUEST['remove'])){
  unset($_SESSION['image12']);
  unset($_SESSION['product1']);
  unset($_SESSION['price12']);
  unset($_SESSION['itemcode3']);
  unset($_SESSION['sizes12']);
} 
```

**JS**：

```
function del(pid){

  if(confirm('Do you really mean to delete this item')){
    document.form1.pid.value=pid;
    document.form1.command.value='delete';
    document.form1.submit();
  }

}

function clear_cart(){

  if(confirm('This will empty your shopping cart, continue?')){
    document.form1.command.value='clear';
    document.form1.submit();
  }

} 
```

**html:**

```
<form  name="form1" method="post">  

  <input type="hidden" name="pid" />
  <input type="hidden" name="command" />  

  <input type="button" class="button2" value="Clear Cart" onclick="clear_cart()" />

  <a href="javascript:del(<?php echo $pid?>)">
    <input type="button" class="button2" value="Remove" />
  </a>

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:35:47.090

```
if($_REQUEST['command']=='delete' && $_REQUEST['pid']>0){
remove_product($_REQUEST['product1'][$pid]);
} 
```

您的表单中没有 $_REQUEST['product1'] ，也许

```
if($_REQUEST['command']=='delete' && $_REQUEST['pid']>0){
remove_product($_REQUEST['pid']);
} 
```

$_REQUEST['remove'] 也

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:40:08.847

```
if($_REQUEST['command']=='clear' && isset($_REQUEST['remove'])){
unset($_SESSION['image12']);
unset($_SESSION['product1']);
unset($_SESSION['price12']);
unset($_SESSION['itemcode3']);
unset($_SESSION['sizes12']);
} 
```

我没有看到任何要发送的 $_REQUEST['remove'] 。

您的明确命令也不发送 $pid，不是必须的吗？

实际上，clear() 发送查询字符串`pid=&command=clear`

# c# - 检查文件是否正在使用

> ID：16031145
> 
> 赞同：2
> 
> 时间：2013-04-16T07:27:21.963
> 
> 标签：c#, file, locking

大家好，我需要一些帮助。我正在尝试同时从多个客户端打开服务器上的文本文件，因此在读取文件时我不会锁定文件。像这样：

```
new StreamReader(File.Open(logFilePath, 
                       FileMode.Open, 
                       FileAccess.Read, 
                       FileShare.ReadWrite)) 
```

现在我正在尝试检查该文件是否被任何客户端使用（因为我想为它写一些新的东西），但是由于我在读取它时没有锁定它，所以我不知道该怎么做. 我无法尝试打开并捕获异常，因为它会打开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:55:52.057

你可以试试这个吗？

或者观看这里已经提出的这个问题 ->[有没有办法检查文件是否正在使用？](https://stackoverflow.com/questions/876473/is-there-a-way-to-check-if-a-file-is-in-use)

```
protected virtual bool IsFileLocked(FileInfo file)
{
    FileStream stream = null;

    try
    {
        stream = file.Open(FileMode.Open, FileAccess.ReadWrite, FileShare.None);
    }
    catch (IOException)
    {
        //the file is unavailable because it is:
        //still being written to
        //or being processed by another thread
        //or does not exist (has already been processed)
        return true;
    }
    finally
    {
        if (stream != null)
            stream.Close();
    }

    //file is not locked
    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T07:32:27.670

> 我无法尝试打开并捕获异常，因为它会打开

为什么 ？以这种方式工作是一个有价值的选择。

顺便说一句，您还可以创建一些空的预定义文件，例如“access.lock”等，以了解*实际*文件是否被锁定检查锁定文件的存在：

```
if(File.Exist("access.lock")) 
  //locked 
else
  //write something 
```

# java - 如何为 jasper 报告设置相对类路径

> ID：16031148
> 
> 赞同：2
> 
> 时间：2013-04-16T07:27:26.977
> 
> 标签：java, swing, netbeans, jasper-reports

我正在从一个摇摆应用程序创建一个碧玉报告。当设置了绝对路径但没有为相对路径生成一个时，它工作正常。生成代码的java代码是

```
 JasperDesign jd= JRXmlLoader.load("relative path");

    String sql = "";
    JRDesignQuery newQuery= new JRDesignQuery();
    newQuery.setText(sql);
    jd.setQuery(newQuery);
    JasperReport JASP_REP= JasperCompileManager.compileReport(jd);
    JasperPrint JASP_PRINT= JasperFillManager.fillReport(JASP_REP,null,conn);
    JasperViewer.viewReport(JASP_PRINT,false); 
```

每当我尝试使用绝对路径时，都会发生错误。数据源的 xml 代码是

```
<defaultValueExpression >
        <![CDATA["reports/report1.jasper"]]>
    </defaultValueExpression> 
```

但它显示以下错误

```
java.io.FileNotFoundException: reports/report1.jasper (The system cannot find the path specified) 
```

我得到了一些建议

[http://forums.devshed.com/java-help-9/relative-path-for-subreport-in-jasperreport-309313.html](http://forums.devshed.com/java-help-9/relative-path-for-subreport-in-jasperreport-309313.html)

但没有人在这个场景中有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:53:45.613

如果您正在使用`Jasper` `Swing`应用程序，那么最好的做法是路径必须是绝对的。只需将所有`.jrxml`文件编译为`.jasper`文件并始终加载已编译的`.jasper`文件。它很快。

在应用程序之外创建文件夹，例如`jaspers`, 。并创建如下变量。`images``styles``system/environment`

```
JASPERDIR = "c:\\app\\jaspers";
STYLES = "c:\\app\\styles";
IMAGES="c:\\app\images"; 
```

现在在你的swing应用程序中使用`System.getenv()`方法，传递变量名来读取路径。

这样，您的挥杆应用程序每次都**足够灵活。**您可以随时更改`images`、`styles`、`.jasper`文件，而无需重新启动您的 Swing 应用程序。

# c++ - 加快浮动转换的速度？

> ID：16031149
> 
> 赞同：6
> 
> 时间：2013-04-16T07:27:29.970
> 
> 标签：c++, x86, type-conversion, sse

在 C++ 中，我有一个短的浮动转换，这成为了我的代码的瓶颈。

该代码从一个硬件设备缓冲区转换而来，该缓冲区本身是短路的，这表示来自一个花哨的光子计数器的输入。

```
float factor=  1.0f/value;
for (int i = 0; i < W*H; i++)//25% of time is spent doing this
{
    int value = source[i];//ushort -> int
    destination[i] = value*factor;//int*float->float
} 
```

**一些细节**

1.  值应该从 0 到 2^16-1，它代表高灵敏度相机的像素值

2.  我在一台带有 i7 处理器（i7 960，即 SSE 4.2 和 4.1）的多核 x86 机器上。

3.  源与 8 位边界对齐（硬件设备的要求）

4.  W*H 总是能被 8 整除，大多数时候 W 和 H 都能被 8 整除

这让我很伤心，我能做些什么吗？

我正在使用 Visual Studios 2012...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T11:12:17.303

这是一个基本的 SSE4.1 实现：

```
__m128 factor = _mm_set1_ps(1.0f / value);
for (int i = 0; i < W*H; i += 8)
{
    //  Load 8 16-bit ushorts.
    //  vi = {a,b,c,d,e,f,g,h}
    __m128i vi = _mm_load_si128((const __m128i*)(source + i));

    //  Convert to 32-bit integers
    //  vi0 = {a,0,b,0,c,0,d,0}
    //  vi1 = {e,0,f,0,g,0,h,0}
    __m128i vi0 = _mm_cvtepu16_epi32(vi);
    __m128i vi1 = _mm_cvtepu16_epi32(_mm_unpackhi_epi64(vi,vi));

    //  Convert to float
    __m128 vf0 = _mm_cvtepi32_ps(vi0);
    __m128 vf1 = _mm_cvtepi32_ps(vi1);

    //  Multiply
    vf0 = _mm_mul_ps(vf0,factor);
    vf1 = _mm_mul_ps(vf1,factor);

    //  Store
    _mm_store_ps(destination + i + 0,vf0);
    _mm_store_ps(destination + i + 4,vf1);
} 
```

这假设：

1.  `source`并且`destination`都对齐到 16 个字节。
2.  `W*H`是 8 的倍数。

通过进一步展开这个循环可以做得更好。（见下文）

* * *

这里的思路如下：

1.  将 8 个短路加载到单个 SSE 寄存器中。
2.  将收银机分成两部分：一个带有底部 4 条短裤，另一个带有顶部 4 条短裤。
3.  将两个寄存器零扩展为 32 位整数。
4.  将它们都转换为`float`s。
5.  乘以系数。
6.  将它们存储到`destination`.

* * *

**编辑 ：**

我已经有一段时间没有进行这种类型的优化了，所以我继续展开循环。

**Core i7 920 @ 3.5 GHz
Visual Studio 2012 - 发布 x64：**

```
Original Loop      : 4.374 seconds
Vectorize no unroll: 1.665
Vectorize unroll 2 : 1.416 
```

进一步展开导致收益递减。

这是测试代码：

```
#include <smmintrin.h>
#include <time.h>
#include <iostream>
#include <malloc.h>
using namespace std;

void default_loop(float *destination,const short* source,float value,int size){
    float factor = 1.0f / value; 
    for (int i = 0; i < size; i++)
    {
        int value = source[i];
        destination[i] = value*factor;
    }
}
void vectorize8_unroll1(float *destination,const short* source,float value,int size){
    __m128 factor = _mm_set1_ps(1.0f / value);
    for (int i = 0; i < size; i += 8)
    {
        //  Load 8 16-bit ushorts.
        __m128i vi = _mm_load_si128((const __m128i*)(source + i));

        //  Convert to 32-bit integers
        __m128i vi0 = _mm_cvtepu16_epi32(vi);
        __m128i vi1 = _mm_cvtepu16_epi32(_mm_unpackhi_epi64(vi,vi));

        //  Convert to float
        __m128 vf0 = _mm_cvtepi32_ps(vi0);
        __m128 vf1 = _mm_cvtepi32_ps(vi1);

        //  Multiply
        vf0 = _mm_mul_ps(vf0,factor);
        vf1 = _mm_mul_ps(vf1,factor);

        //  Store
        _mm_store_ps(destination + i + 0,vf0);
        _mm_store_ps(destination + i + 4,vf1);
    }
}
void vectorize8_unroll2(float *destination,const short* source,float value,int size){
    __m128 factor = _mm_set1_ps(1.0f / value);
    for (int i = 0; i < size; i += 16)
    {
        __m128i a0 = _mm_load_si128((const __m128i*)(source + i + 0));
        __m128i a1 = _mm_load_si128((const __m128i*)(source + i + 8));

        //  Split into two registers
        __m128i b0 = _mm_unpackhi_epi64(a0,a0);
        __m128i b1 = _mm_unpackhi_epi64(a1,a1);

        //  Convert to 32-bit integers
        a0 = _mm_cvtepu16_epi32(a0);
        b0 = _mm_cvtepu16_epi32(b0);
        a1 = _mm_cvtepu16_epi32(a1);
        b1 = _mm_cvtepu16_epi32(b1);

        //  Convert to float
        __m128 c0 = _mm_cvtepi32_ps(a0);
        __m128 d0 = _mm_cvtepi32_ps(b0);
        __m128 c1 = _mm_cvtepi32_ps(a1);
        __m128 d1 = _mm_cvtepi32_ps(b1);

        //  Multiply
        c0 = _mm_mul_ps(c0,factor);
        d0 = _mm_mul_ps(d0,factor);
        c1 = _mm_mul_ps(c1,factor);
        d1 = _mm_mul_ps(d1,factor);

        //  Store
        _mm_store_ps(destination + i +  0,c0);
        _mm_store_ps(destination + i +  4,d0);
        _mm_store_ps(destination + i +  8,c1);
        _mm_store_ps(destination + i + 12,d1);
    }
}
void print_sum(const float *destination,int size){
    float sum = 0;
    for (int i = 0; i < size; i++){
        sum += destination[i];
    }
    cout << sum << endl;
}

int main(){

    int size = 8000;

    short *source       = (short*)_mm_malloc(size * sizeof(short), 16);
    float *destination  = (float*)_mm_malloc(size * sizeof(float), 16);

    for (int i = 0; i < size; i++){
        source[i] = i;
    }

    float value = 1.1;

    int iterations = 1000000;
    clock_t start;

    //  Default Loop
    start = clock();
    for (int it = 0; it < iterations; it++){
        default_loop(destination,source,value,size);
    }
    cout << (double)(clock() - start) / CLOCKS_PER_SEC << endl;
    print_sum(destination,size);

    //  Vectorize 8, no unroll
    start = clock();
    for (int it = 0; it < iterations; it++){
        vectorize8_unroll1(destination,source,value,size);
    }
    cout << (double)(clock() - start) / CLOCKS_PER_SEC << endl;
    print_sum(destination,size);

    //  Vectorize 8, unroll 2
    start = clock();
    for (int it = 0; it < iterations; it++){
        vectorize8_unroll2(destination,source,value,size);
    }
    cout << (double)(clock() - start) / CLOCKS_PER_SEC << endl;
    print_sum(destination,size);

    _mm_free(source);
    _mm_free(destination);

    system("pause");
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-03T15:21:13.823

我相信我有最好的答案。我的结果比 Mystical 的要快得多。它们只需要 SSE2，但可以利用 SSE3、SSE4、AVX 甚至 AVX2（如果可用）。您不必更改任何代码。你只需要重新编译。

我跑过三种尺寸：8008、64000 和 2560*1920 = 4915200。我尝试了几种不同的变体。我在下面列出了最重要的。该功能`vectorize8_unroll2`是神秘的功能。我做了一个改进版的他叫`vectorize8_unroll2_parallel`. 我认为比神秘的更好的功能`vec16_loop_unroll2_fix`和是我的功能。`vec16_loop_unroll2_parallel_fix`如果您使用 AVX 编译，这些函数将自动使用 AVX，但在 SSE4 甚至 SSE2 上都可以正常工作

此外，您写道“W*H 总是能被 8 整除，大多数情况下 W 和 H 都能被 8 整除”。所以我们不能假设 W*H 在所有情况下都能被 16 整除。 `vectorize8_unroll2` 当 size 不是 16 的倍数时，Mystical 的函数有一个错误（在他的代码中尝试 size=8008，你会明白我的意思）。我的代码没有这样的错误。

我正在使用 Ander Fog 的矢量类进行矢量化。它不是 lib 或 dll 文件。它只是一些头文件。我使用 OpenMP 进行并行化。以下是一些结果：

```
Intel Xeon E5630 @2.53GHz (supports upto SSE4.2)    
size 8008, size2 8032, iterations 1000000

                        default_loop time: 7.935 seconds, diff 0.000000
                  vectorize8_unroll2 time: 1.875 seconds, diff 0.000000
              vec16_loop_unroll2_fix time: 1.878 seconds, diff 0.000000
         vectorize8_unroll2_parallel time: 1.253 seconds, diff 0.000000
     vec16_loop_unroll2_parallel_fix time: 1.151 seconds, diff 0.000000

size 64000, size2 64000, iterations 100000
                        default_loop time: 6.387 seconds, diff 0.000000
                  vectorize8_unroll2 time: 1.875 seconds, diff 0.000000
              vec16_loop_unroll2_fix time: 2.195 seconds, diff 0.000000
         vectorize8_unroll2_parallel time: 0.439 seconds, diff 0.000000
     vec16_loop_unroll2_parallel_fix time: 0.432 seconds, diff 0.000000

size 4915200, size2 4915200, iterations 1000
                        default_loop time: 5.125 seconds, diff 0.000000
                  vectorize8_unroll2 time: 3.496 seconds, diff 0.000000
              vec16_loop_unroll2_fix time: 3.490 seconds, diff 0.000000
         vectorize8_unroll2_parallel time: 3.119 seconds, diff 0.000000
     vec16_loop_unroll2_parallel_fix time: 3.127 seconds, diff 0.000000 
```

编辑：我在这个答案的末尾使用 GCC 在带有 AVX 的系统上添加了结果。

下面是代码。代码看起来很长，因为我做了很多交叉检查并测试了很多变体。[在http://www.agner.org/optimize/#vectorclass](http://www.agner.org/optimize/#vectorclass)下载矢量类 。将头文件（vectorclass.h、instrset.h、vectorf128.h、vectorf256.h、vectorf256e.h、vectori128.h、vectori256.h、vectori256e.h）复制到您编译的目录中。在 C++/命令行下添加 /D__SSE4_2__。在发布模式下编译。如果你有一个带 AVX 的 CPU，那么请改用 /arch:AVX。在 C++ 属性/语言下添加 OpenMP 支持。

```
In GCC
SSE4.2: g++ foo.cpp -o foo_gcc -O3 -mSSE4.2 -fopenmp
AVX: g++ foo.cpp -o foo_gcc -O3 -mavx -fopenmp 
```

在下面的代码中，该函数`vec16_loop_unroll2_parallel`要求数组是 32 的倍数。您可以将数组大小更改为 32 的倍数（这就是 size2 所指的），或者如果这不可能，您可以使用`vec16_loop_unroll2_parallel_fix`没有此类限制的函数. 无论如何，它一样快。

```
#include <stdio.h>
#include "vectorclass.h"
#include "omp.h"

#define ROUND_DOWN(x, s) ((x) & ~((s)-1))

inline void* aligned_malloc(size_t size, size_t align) {
    void *result;
    #ifdef _MSC_VER 
    result = _aligned_malloc(size, align);
    #else 
     if(posix_memalign(&result, align, size)) result = 0;
    #endif
    return result;
}

inline void aligned_free(void *ptr) {
    #ifdef _MSC_VER 
        _aligned_free(ptr);
    #else 
      free(ptr);
    #endif

}

void default_loop(float *destination, const unsigned short* source, float value, int size){
    float factor = 1.0f/value;
    for (int i = 0; i < size; i++) {
        int value = source[i];
        destination[i] = value*factor;
    }
}

void default_loop_parallel(float *destination, const unsigned short* source, float value, int size){
    float factor = 1.0f / value;
    #pragma omp parallel for  
    for (int i = 0; i < size; i++) {
        int value = source[i];
        destination[i] = value*factor;
    }
}

void vec8_loop(float *destination, const unsigned short* source, float value, int size) {
  float factor=  1.0f/value;
  for (int i = 0; i < size; i += 8) {
    Vec8us vi = Vec8us().load(source + i);
    Vec4ui vi0 = extend_low(vi);
    Vec4ui vi1 = extend_high(vi);
    Vec4f vf0 = to_float(vi0);
    Vec4f vf1 = to_float(vi1);
    vf0*=factor;
    vf1*=factor;
    vf0.store(destination + i);
    vf1.store(destination + i + 4);
  }
}

void vec8_loop_unroll2(float *destination, const unsigned short* source, float value, int size) {
  float factor=  1.0f/value;
  for (int i = 0; i < size; i += 16) {
    Vec8us vi = Vec8us().load(source + i);
    Vec4ui vi0 = extend_low(vi);
    Vec4ui vi1 = extend_high(vi);
    Vec4f vf0 = to_float(vi0);
    Vec4f vf1 = to_float(vi1);
    vf0*=factor;
    vf1*=factor;
    vf0.store(destination + i + 0);
    vf1.store(destination + i + 4);

    Vec8us vi_new = Vec8us().load(source + i + 8);
    Vec4ui vi2 = extend_low(vi_new);
    Vec4ui vi3 = extend_high(vi_new);
    Vec4f vf2 = to_float(vi2);
    Vec4f vf3 = to_float(vi3);
    vf2*=factor;
    vf3*=factor;
    vf2.store(destination + i + 8);
    vf3.store(destination + i + 12);
  }
}

void vec8_loop_parallel(float *destination, const unsigned short* source, float value, int size) {
  float factor=  1.0f/value;
  #pragma omp parallel for
  for (int i = 0; i < size; i += 8) {
    Vec8us vi = Vec8us().load(source + i);
    Vec4ui vi0 = extend_low(vi);
    Vec4ui vi1 = extend_high(vi);
    Vec4f vf0 = to_float(vi0);
    Vec4f vf1 = to_float(vi1);
    vf0*=factor;
    vf1*=factor;
    vf0.store(destination + i);
    vf1.store(destination + i + 4);
  }
}

void vec8_loop_unroll2_parallel(float *destination, const unsigned short* source, float value, int size) {
  float factor=  1.0f/value;
  #pragma omp parallel for
  for (int i = 0; i < size; i += 16) {
    Vec8us vi = Vec8us().load(source + i);
    Vec4ui vi0 = extend_low(vi);
    Vec4ui vi1 = extend_high(vi);
    Vec4f vf0 = to_float(vi0);
    Vec4f vf1 = to_float(vi1);
    vf0*=factor;
    vf1*=factor;
    vf0.store(destination + i + 0);
    vf1.store(destination + i + 4);

    Vec8us vi_new = Vec8us().load(source + i + 8);
    Vec4ui vi2 = extend_low(vi_new);
    Vec4ui vi3 = extend_high(vi_new);
    Vec4f vf2 = to_float(vi2);
    Vec4f vf3 = to_float(vi3);
    vf2*=factor;
    vf3*=factor;
    vf2.store(destination + i + 8);
    vf3.store(destination + i + 12);
  }
}

void vec16_loop(float *destination, const unsigned short* source, float value, int size) {
  float factor=  1.0f/value;
  for (int i = 0; i < size; i += 16) {
    Vec16us vi = Vec16us().load(source + i);
    Vec8ui vi0 = extend_low(vi);
    Vec8ui vi1 = extend_high(vi);
    Vec8f vf0 = to_float(vi0);
    Vec8f vf1 = to_float(vi1);
    vf0*=factor;
    vf1*=factor;
    vf0.store(destination + i);
    vf1.store(destination + i + 8);
  }
}

void vec16_loop_unroll2(float *destination, const unsigned short* source, float value, int size) {
  float factor=  1.0f/value;
  for (int i = 0; i < size; i += 32) {
    Vec16us vi = Vec16us().load(source + i);

    Vec8ui vi0 = extend_low(vi);
    Vec8ui vi1 = extend_high(vi);
    Vec8f vf0 = to_float(vi0);
    Vec8f vf1 = to_float(vi1);
    vf0*=factor;
    vf1*=factor;
    vf0.store(destination + i + 0);
    vf1.store(destination + i + 8);

    Vec16us vi_new = Vec16us().load(source + i + 16);

    Vec8ui vi2 = extend_low(vi_new);
    Vec8ui vi3 = extend_high(vi_new);
    Vec8f vf2 = to_float(vi2);
    Vec8f vf3 = to_float(vi3);
    vf2*=factor;
    vf3*=factor;
    vf2.store(destination + i + 16);
    vf3.store(destination + i + 24);

  }
}

void vec16_loop_unroll2_fix(float *destination, const unsigned short* source, float value, int size) {
    float factor=  1.0f/value;
    int i = 0;
    for (; i <ROUND_DOWN(size, 32); i += 32) {
    Vec16us vi = Vec16us().load(source + i);

    Vec8ui vi0 = extend_low(vi);
    Vec8ui vi1 = extend_high(vi);
    Vec8f vf0 = to_float(vi0);
    Vec8f vf1 = to_float(vi1);
    vf0*=factor;
    vf1*=factor;
    vf0.store(destination + i + 0);
    vf1.store(destination + i + 8);

    Vec16us vi_new = Vec16us().load(source + i + 16);

    Vec8ui vi2 = extend_low(vi_new);
    Vec8ui vi3 = extend_high(vi_new);
    Vec8f vf2 = to_float(vi2);
    Vec8f vf3 = to_float(vi3);
    vf2*=factor;
    vf3*=factor;
    vf2.store(destination + i + 16);
    vf3.store(destination + i + 24);

    }
    for (; i < size; i++) {
        int value = source[i];
        destination[i] = value*factor;
    }

}

void vec16_loop_parallel(float *destination, const unsigned short* source, float value, int size) {
  float factor=  1.0f/value;
  #pragma omp parallel for
  for (int i = 0; i < size; i += 16) {
    Vec16us vi = Vec16us().load(source + i);
    Vec8ui vi0 = extend_low(vi);
    Vec8ui vi1 = extend_high(vi);
    Vec8f vf0 = to_float(vi0);
    Vec8f vf1 = to_float(vi1);
    vf0*=factor;
    vf1*=factor;
    vf0.store(destination + i);
    vf1.store(destination + i + 8);
  }
}

void vec16_loop_unroll2_parallel(float *destination, const unsigned short* source, float value, int size) {
    float factor=  1.0f/value;
    #pragma omp parallel for
    for (int i = 0; i < size; i += 32) {
        Vec16us vi = Vec16us().load(source + i); 
        Vec8ui vi0 = extend_low(vi);
        Vec8ui vi1 = extend_high(vi);
        Vec8f vf0 = to_float(vi0);
        Vec8f vf1 = to_float(vi1);
        vf0*=factor;
        vf1*=factor;
        vf0.store(destination + i + 0);
        vf1.store(destination + i + 8);

        Vec16us vi_new = Vec16us().load(source + i + 16);
        Vec8ui vi2 = extend_low(vi_new);
        Vec8ui vi3 = extend_high(vi_new);
        Vec8f vf2 = to_float(vi2);
        Vec8f vf3 = to_float(vi3);
        vf2*=factor;
        vf3*=factor;
        vf2.store(destination + i + 16);
        vf3.store(destination + i + 24);
    }
}

void vec16_loop_unroll2_parallel_fix(float *destination, const unsigned short* source, float value, int size) {
    float factor=  1.0f/value;
    int i = 0;  
    #pragma omp parallel for 
    for (int i=0; i <ROUND_DOWN(size, 32); i += 32) {
        Vec16us vi = Vec16us().load(source + i);  
        Vec8ui vi0 = extend_low(vi);
        Vec8ui vi1 = extend_high(vi);
        Vec8f vf0 = to_float(vi0);
        Vec8f vf1 = to_float(vi1);
        vf0*=factor;
        vf1*=factor;
        vf0.store(destination + i + 0);
        vf1.store(destination + i + 8);

        Vec16us vi_new = Vec16us().load(source + i + 16); 
        Vec8ui vi2 = extend_low(vi_new);
        Vec8ui vi3 = extend_high(vi_new);
        Vec8f vf2 = to_float(vi2);
        Vec8f vf3 = to_float(vi3);
        vf2*=factor;
        vf3*=factor;
        vf2.store(destination + i + 16);
        vf3.store(destination + i + 24);

    }

    for(int i = ROUND_DOWN(size, 32); i < size; i++) {
        int value = source[i];
        destination[i] = value*factor;
    }

}

void vectorize8_unroll1(float *destination,const unsigned short* source,float value,int size){
    __m128 factor = _mm_set1_ps(1.0f / value);
    for (int i = 0; i < size; i += 8)
    {
        //  Load 8 16-bit ushorts.
        __m128i vi = _mm_load_si128((const __m128i*)(source + i));

        //  Convert to 32-bit integers
        __m128i vi0 = _mm_cvtepu16_epi32(vi);
        __m128i vi1 = _mm_cvtepu16_epi32(_mm_unpackhi_epi64(vi,vi));

        //  Convert to float
        __m128 vf0 = _mm_cvtepi32_ps(vi0);
        __m128 vf1 = _mm_cvtepi32_ps(vi1);

        //  Multiply
        vf0 = _mm_mul_ps(vf0,factor);
        vf1 = _mm_mul_ps(vf1,factor);

        //  Store
        _mm_store_ps(destination + i + 0,vf0);
        _mm_store_ps(destination + i + 4,vf1);
    }
}

void vectorize8_unroll2(float *destination,const unsigned short* source,float value,int size){
    __m128 factor = _mm_set1_ps(1.0f / value);
    for (int i = 0; i < size; i += 16)
    {
        __m128i a0 = _mm_load_si128((const __m128i*)(source + i + 0));
        __m128i a1 = _mm_load_si128((const __m128i*)(source + i + 8));

        //  Split into two registers
        __m128i b0 = _mm_unpackhi_epi64(a0,a0);
        __m128i b1 = _mm_unpackhi_epi64(a1,a1);

        //  Convert to 32-bit integers
        a0 = _mm_cvtepu16_epi32(a0);
        b0 = _mm_cvtepu16_epi32(b0);
        a1 = _mm_cvtepu16_epi32(a1);
        b1 = _mm_cvtepu16_epi32(b1);

        //  Convert to float
        __m128 c0 = _mm_cvtepi32_ps(a0);
        __m128 d0 = _mm_cvtepi32_ps(b0);
        __m128 c1 = _mm_cvtepi32_ps(a1);
        __m128 d1 = _mm_cvtepi32_ps(b1);

        //  Multiply
        c0 = _mm_mul_ps(c0,factor);
        d0 = _mm_mul_ps(d0,factor);
        c1 = _mm_mul_ps(c1,factor);
        d1 = _mm_mul_ps(d1,factor);

        //  Store
        _mm_store_ps(destination + i +  0,c0);
        _mm_store_ps(destination + i +  4,d0);
        _mm_store_ps(destination + i +  8,c1);
        _mm_store_ps(destination + i + 12,d1);
    }
}

void vectorize8_unroll1_parallel(float *destination,const unsigned short* source,float value,int size){
    __m128 factor = _mm_set1_ps(1.0f / value);
    #pragma omp parallel for
    for (int i = 0; i < size; i += 8)
    {
        //  Load 8 16-bit ushorts.
        __m128i vi = _mm_load_si128((const __m128i*)(source + i));

        //  Convert to 32-bit integers
        __m128i vi0 = _mm_cvtepu16_epi32(vi);
        __m128i vi1 = _mm_cvtepu16_epi32(_mm_unpackhi_epi64(vi,vi));

        //  Convert to float
        __m128 vf0 = _mm_cvtepi32_ps(vi0);
        __m128 vf1 = _mm_cvtepi32_ps(vi1);

        //  Multiply
        vf0 = _mm_mul_ps(vf0,factor);
        vf1 = _mm_mul_ps(vf1,factor);

        //  Store
        _mm_store_ps(destination + i + 0,vf0);
        _mm_store_ps(destination + i + 4,vf1);
    }
}

void vectorize8_unroll2_parallel(float *destination,const unsigned short* source,float value,int size){
    __m128 factor = _mm_set1_ps(1.0f / value);
    #pragma omp parallel for
    for (int i = 0; i < size; i += 16)
    {
        __m128i a0 = _mm_load_si128((const __m128i*)(source + i + 0));
        __m128i a1 = _mm_load_si128((const __m128i*)(source + i + 8));

        //  Split into two registers
        __m128i b0 = _mm_unpackhi_epi64(a0,a0);
        __m128i b1 = _mm_unpackhi_epi64(a1,a1);

        //  Convert to 32-bit integers
        a0 = _mm_cvtepu16_epi32(a0);
        b0 = _mm_cvtepu16_epi32(b0);
        a1 = _mm_cvtepu16_epi32(a1);
        b1 = _mm_cvtepu16_epi32(b1);

        //  Convert to float
        __m128 c0 = _mm_cvtepi32_ps(a0);
        __m128 d0 = _mm_cvtepi32_ps(b0);
        __m128 c1 = _mm_cvtepi32_ps(a1);
        __m128 d1 = _mm_cvtepi32_ps(b1);

        //  Multiply
        c0 = _mm_mul_ps(c0,factor);
        d0 = _mm_mul_ps(d0,factor);
        c1 = _mm_mul_ps(c1,factor);
        d1 = _mm_mul_ps(d1,factor);

        //  Store
        _mm_store_ps(destination + i +  0,c0);
        _mm_store_ps(destination + i +  4,d0);
        _mm_store_ps(destination + i +  8,c1);
        _mm_store_ps(destination + i + 12,d1);
    }
}

void copy_arrays(float* a, float*b, const int size) {
    float sum = 0;
    for(int i=0; i<size; i++) {
        b[i] = a[i];
    }
}

float compare_arrays(float* a, float*b, const int size) {
    float sum = 0;
    for(int i=0; i<size; i++) {
        float diff = a[i] - b[i];
        if(diff!=0)  {
            printf("i %d, a[i] %f, b[i] %f, diff %f\n", i, a[i], b[i], diff);
            break;
        }
        sum += diff;
    }
    return sum;
}

void randomize_array(unsigned short* a, const int size) {
    for(int i=0; i<size; i++) {
        float r = (float)rand()/RAND_MAX;
        a[i] = (int)(65536*r);
    }
}

void run(int size, int iterations) {
    int rd = ROUND_DOWN(size, 32);
    int size2 = rd == size ? size : rd + 32;
    float value = 1.1f;

    printf("size %d, size2 %d, iterations %d\n", size, size2, iterations);
    unsigned short* source = (unsigned short*)aligned_malloc(size2*sizeof(short), 16);
    float* destination = (float*)aligned_malloc(size2*sizeof(float), 16);
    float* destination_old = (float*)aligned_malloc(size2*sizeof(float), 16);
    float* destination_ref = (float*)aligned_malloc(size2*sizeof(float), 16);

    void (*fp[16])(float *destination, const unsigned short* source, float value, int size);
    fp[0] = default_loop;
    fp[1] = vec8_loop;
    fp[2] = vec8_loop_unroll2;
    fp[3] = vec16_loop;
    fp[4] = vec16_loop_unroll2;
    fp[5] = vec16_loop_unroll2_fix;
    fp[6] = vectorize8_unroll1;
    fp[7] = vectorize8_unroll2;

    fp[8] = default_loop_parallel;
    fp[9] = vec8_loop_parallel;
    fp[10] = vec8_loop_unroll2_parallel;
    fp[11] = vec16_loop_parallel;
    fp[12] = vec16_loop_unroll2_parallel;
    fp[13] = vec16_loop_unroll2_parallel_fix;
    fp[14] = vectorize8_unroll1_parallel;
    fp[15] = vectorize8_unroll2_parallel;

    char* func_str[] = {"default_loop", "vec8_loop", "vec8_loop_unrool2", "vec16_loop", "vec16_loop_unroll2", "vec16_loop_unroll2_fix", "vectorize8_unroll1", "vectorize8_unroll2",
        "default_loop_parallel", "vec8_loop_parallel", "vec8_loop_unroll2_parallel","vec16_loop_parallel", "vec16_loop_unroll2_parallel", "vec16_loop_unroll2_parallel_fix",
        "vectorize8_unroll1_parallel", "vectorize8_unroll2_parallel"};

    randomize_array(source, size2);

    copy_arrays(destination_old, destination_ref, size);
    fp[0](destination_ref, source, value, size);

    for(int i=0; i<16; i++) {
        copy_arrays(destination_old, destination, size);
        double dtime = omp_get_wtime();
        for (int it = 0; it < iterations; it++){
            fp[i](destination, source, value, size);
        }
        dtime = omp_get_wtime() - dtime;
        float diff = compare_arrays(destination, destination_ref, size);
        printf("%40s time: %.3f seconds, diff %f\n", func_str[i], dtime, diff);
    }
    printf("\n");
    aligned_free(source);
    aligned_free(destination);
    aligned_free(destination_old);
    aligned_free(destination_ref);
}
int main() {
    run(8008, 1000000); 
    run(64000, 100000);
    run(2560*1920, 1000);
} 
```

结果 在带有 AVX 的系统上使用 GCC。GCC 自动并行化循环（Visual Studio 由于短路而失败，但如果您尝试 int 则可以）。使用手写的矢量化代码您获得的收益很少。但是，使用多个线程可能会有所帮助，具体取决于数组大小。对于小数组大小 8008，OpenMP 给出了更差的结果。但是，对于较大的数组大小 128000，使用 OpenMP 可以提供更好的结果。对于最大的数组大小 4915200，它完全受内存限制，OpenMP 无济于事。

```
i7-2600k @ 4.4GHz
size 8008, size2 8032, iterations 1000000
                        default_loop time: 1.319 seconds, diff 0.000000          
              vec16_loop_unroll2_fix time: 1.167 seconds, diff 0.000000
                  vectorize8_unroll2 time: 1.227 seconds, diff 0.000000                
         vec16_loop_unroll2_parallel time: 1.528 seconds, diff 0.000000
         vectorize8_unroll2_parallel time: 1.381 seconds, diff 0.000000

size 128000, size2 128000, iterations 100000
                        default_loop time: 2.902 seconds, diff 0.000000                     
              vec16_loop_unroll2_fix time: 2.838 seconds, diff 0.000000
                  vectorize8_unroll2 time: 2.844 seconds, diff 0.000000         
     vec16_loop_unroll2_parallel_fix time: 0.706 seconds, diff 0.000000
         vectorize8_unroll2_parallel time: 0.672 seconds, diff 0.000000

size 4915200, size2 4915200, iterations 1000
                        default_loop time: 2.313 seconds, diff 0.000000
              vec16_loop_unroll2_fix time: 2.309 seconds, diff 0.000000    
                  vectorize8_unroll2 time: 2.318 seconds, diff 0.000000                
     vec16_loop_unroll2_parallel_fix time: 2.353 seconds, diff 0.000000         
         vectorize8_unroll2_parallel time: 2.349 seconds, diff 0.000000 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-16T12:45:37.220

在我的机器上使用 SSE 内在函数 [四核 Athlon，3.3GHz，16GB 的 RAM]，`g++ -O2`优化 [1] 提供了大约 2.5-3 倍的速度。我还在内联汇编器中编写了一个函数来做同样的事情，但它并没有明显更快（同样，这适用于我的机器，请随意在其他机器上运行）。

我尝试了各种尺寸的 H * W，它们都给出了大致相同的结果。

[1] Using`g++ -O3`为所有四个功能提供了相同的时间，因为显然`-O3`启用了“自动矢量化代码”。因此，假设您的编译器支持类似的自动矢量化功能，那么整个事情有点浪费时间。

**结果**

```
convert_naive                  sum=4373.98 t=7034751 t/n=7.03475
convert_naive                  sum=4373.98 t=7266738 t/n=7.26674
convert_naive                  sum=4373.98 t=7006154 t/n=7.00615
convert_naive                  sum=4373.98 t=6815329 t/n=6.81533
convert_naive                  sum=4373.98 t=6820318 t/n=6.82032
convert_unroll4                sum=4373.98 t=8103193 t/n=8.10319
convert_unroll4                sum=4373.98 t=7276156 t/n=7.27616
convert_unroll4                sum=4373.98 t=7028181 t/n=7.02818
convert_unroll4                sum=4373.98 t=7074258 t/n=7.07426
convert_unroll4                sum=4373.98 t=7081518 t/n=7.08152
convert_sse_intrinsic          sum=4373.98 t=3377290 t/n=3.37729
convert_sse_intrinsic          sum=4373.98 t=3227018 t/n=3.22702
convert_sse_intrinsic          sum=4373.98 t=3007898 t/n=3.0079
convert_sse_intrinsic          sum=4373.98 t=3253366 t/n=3.25337
convert_sse_intrinsic          sum=4373.98 t=5576068 t/n=5.57607
convert_sse_inlineasm          sum=4373.98 t=3470887 t/n=3.47089
convert_sse_inlineasm          sum=4373.98 t=2838492 t/n=2.83849
convert_sse_inlineasm          sum=4373.98 t=2828556 t/n=2.82856
convert_sse_inlineasm          sum=4373.98 t=2789052 t/n=2.78905
convert_sse_inlineasm          sum=4373.98 t=3176522 t/n=3.17652 
```

**代码**

```
#include <iostream>
#include <iomanip>
#include <cstdlib> 
#include <cstring>
#include <xmmintrin.h>
#include <emmintrin.h>

#define W 1000
#define H 1000

static __inline__ unsigned long long rdtsc(void)
{
    unsigned hi, lo;
    __asm__ __volatile__ ("rdtsc" : "=a"(lo), "=d"(hi));
    return ( (unsigned long long)lo)|( ((unsigned long long)hi)<<32 );
}

void convert_naive(short *source, float *destination)
{
    float factor=  1.0f/32767;
    for (int i = 0; i < W*H; i++)
    {
    int value = source[i];
    destination[i] = value*factor;
    }
}

void convert_unroll4(short *source, float *destination)
{
    float factor=  1.0f/32767;
    for (int i = 0; i < W*H; i+=4)
    {
    int v1 = source[i];
    int v2 = source[i+1];
    int v3 = source[i+2];
    int v4 = source[i+3];
    destination[i]   = v1*factor;
    destination[i+1] = v2*factor;
    destination[i+2] = v3*factor;
    destination[i+3] = v4*factor;
    }
}

void convert_sse_intrinsic(short *source, float *destination)
{
    __m128 factor =  { 1.0f/32767, 1.0f/32767, 1.0f/32767, 1.0f/32767 };
    __m64 zero1 =  { 0,0 };
    __m128i zero2 =  { 0,0 };
    __m64 *ps = reinterpret_cast<__m64 *>(source);
    __m128 *pd = reinterpret_cast<__m128 *>(destination);
    for (int i = 0; i < W*H; i+=4)
    {
    __m128i value = _mm_unpacklo_epi16(_mm_set_epi64(zero1, *ps), zero2);
    value = _mm_srai_epi32(_mm_slli_epi32(value, 16), 16);
    __m128  fval  = _mm_cvtepi32_ps(value);
    *pd = _mm_mul_ps(fval, factor);   // destination[0,1,2,3] = value[0,1,2,3] * factor;
    pd++;
    ps++;
    }
}

void convert_sse_inlineasm(short *source, float *destination)
{
    __m128 factor =  { 1.0f/32767, 1.0f/32767, 1.0f/32767, 1.0f/32767 };
    __asm__ __volatile__(
    "\t pxor       %%xmm1, %%xmm1\n"
    "\t movaps     %3, %%xmm2\n"
    "\t mov        $0, %%rax\n"
    "1:"
    "\t movq       (%1, %%rax), %%xmm0\n"
    "\t movq       8(%1, %%rax), %%xmm3\n"
    "\t movq       16(%1, %%rax), %%xmm4\n"
    "\t movq       24(%1, %%rax), %%xmm5\n"
    "\t punpcklwd  %%xmm1, %%xmm0\n"
    "\t pslld      $16, %%xmm0\n"
    "\t psrad      $16, %%xmm0\n"
    "\t cvtdq2ps   %%xmm0, %%xmm0\n"
    "\t mulps      %%xmm2, %%xmm0\n"
    "\t punpcklwd  %%xmm1, %%xmm3\n"
    "\t pslld      $16, %%xmm3\n"
    "\t psrad      $16, %%xmm3\n"
    "\t cvtdq2ps   %%xmm3, %%xmm3\n"
    "\t mulps      %%xmm2, %%xmm3\n"
    "\t punpcklwd  %%xmm1, %%xmm4\n"
    "\t pslld      $16, %%xmm4\n"
    "\t psrad      $16, %%xmm4\n"
    "\t cvtdq2ps   %%xmm4, %%xmm4\n"
    "\t mulps      %%xmm2, %%xmm4\n"
    "\t punpcklwd  %%xmm1, %%xmm5\n"
    "\t pslld      $16, %%xmm5\n"
    "\t psrad      $16, %%xmm5\n"
    "\t cvtdq2ps   %%xmm5, %%xmm5\n"
    "\t mulps      %%xmm2, %%xmm5\n"
    "\t movaps     %%xmm0, (%0, %%rax, 2)\n"
    "\t movaps     %%xmm3, 16(%0, %%rax, 2)\n"
    "\t movaps     %%xmm4, 32(%0, %%rax, 2)\n"
    "\t movaps     %%xmm5, 48(%0, %%rax, 2)\n"
    "\t addq       $32, %%rax\n"
    "\t cmpq       %2, %%rax\n"
    "\t jbe        1b\n"
    : /* no outputs */ 
    : "r" (destination), "r" (source), "i"(sizeof(*source) * H * W), "m"(factor):
      "rax", "xmm0", "xmm1", "xmm3");
}

short inbuffer[W * H] __attribute__ ((aligned (16)));
float outbuffer[W * H + 16] __attribute__ ((aligned (16)));
#ifdef DEBUG
float outbuffer2[W * H];
#endif

typedef void (*func)(short *source, float *destination);

struct BmEntry
{
    const char *name;
    func  fn;
};

void bm(BmEntry& e)
{
    memset(outbuffer, 0, sizeof(outbuffer));
    unsigned long long t = rdtsc();
    e.fn(inbuffer, outbuffer);
    t = rdtsc() - t; 

    float sum = 0;
    for(int i = 0; i < W * H; i++)
    {
    sum += outbuffer[i]; 
    }

#if DEBUG
    convert_naive(inbuffer, outbuffer2);
    for(int i = 0; i < W * H; i++)
    {
    if (outbuffer[i] != outbuffer2[i])
    {
        std::cout << i << ":: " << inbuffer[i] << ": " 
              << outbuffer[i] << " != " << outbuffer2[i] 
              << std::endl;
    }
    }
#endif

    std::cout << std::left << std::setw(30) << e.name << " sum=" << sum << " t=" << t << 
    " t/n=" << (double)t / (W * H) << std::endl;
}

#define BM(x) { #x, x }

BmEntry table[] = 
{
    BM(convert_naive),
    BM(convert_unroll4),
    BM(convert_sse_intrinsic),
    BM(convert_sse_inlineasm),
};

int main()
{
    for(int i = 0; i < W * H; i++)
    {
    inbuffer[i] = (short)i;
    }

    for(int i = 0; i < sizeof(table)/sizeof(table[i]); i++)
    {
    for(int j = 0; j < 5; j++)
        bm(table[i]);
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-03T03:33:07.497

并且您可以使用 OpenMP 来租用您 CPU 的每个内核，而且很简单，只需执行以下操作：

```
#include <omp.h>
float factor=  1.0f/value;
#pragma omp parallel for 
for (int i = 0; i < W*H; i++)//25% of time is spent doing this
{
    int value = source[i];//ushort -> int
    destination[i] = value*factor;//int*float->float
} 
```

这是基于之前程序的结果，只需添加如下内容：

```
#pragma omp parallel for 
for (int it = 0; it < iterations; it++){
 ...
} 
```

然后这是结果

```
beta@beta-PC ~
$ g++ -o opt.exe opt.c -msse4.1 -fopenmp

beta@beta-PC ~
$ opt
0.748
2.90873e+007
0.484
2.90873e+007
0.796
2.90873e+007

beta@beta-PC ~
$ g++ -o opt.exe opt.c -msse4.1 -O3

beta@beta-PC ~
$ opt
1.404
2.90873e+007
1.404
2.90873e+007
1.404
2.90873e+007 
```

. .

结果显示使用 openmp 有 100% 的改进。Visual C++ 也支持 openmp。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-16T10:38:55.503

这不是一个有效的答案，不要把它当作它，但我实际上想知道使用 256k 查找表的代码会如何表现。（基本上是一个包含 65536 个条目的“短浮动”表）。

我相信 CoreI7 有大约 8 兆字节的缓存，所以查找表适合数据缓存。

我真的很想知道这会如何影响性能:)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-16T07:36:28.077

不确定循环中的条件表达式是否只计算一次。你可以试试：

```
float factor=  1.0f/value;
for (int i = 0, count = W*H; i < count; ++i)//25% of time is spent doing this
{
    int value = source[i];//short -> int
    destination[i] = value*factor;//int->float
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-16T07:46:12.800

您可以尝试近似表达式

```
float factor = 1.0f/value; 
```

通过一个分数`numerator/denomitator`，其中`numerator`和`denominator`都是`int`s。这可以按照您在应用程序中所需的精度来完成，例如

```
int denominator = 10000;
int numerator = factor * denominator; 
```

然后你可以用整数算术来计算，比如

```
int value = source[i];
destination[i] = (value * numerator) / numerator; 
```

您必须处理溢出问题，也许您需要切换到`long`（甚至`long long`在 64 位系统上）进行计算。

# excel - 如果只是从数据库中获取数据，则无法使用宏创建数据透视表

> ID：16031158
> 
> 赞同：0
> 
> 时间：2013-04-16T07:28:04.643
> 
> 标签：excel, excel-2010, vba

我正在创建一个宏，我从数据库中获取一些数据，然后创建该数据的数据透视。但是在执行此操作时，我收到了一些 1004 错误和一些评论。这是我的代码

```
 Sub CreatePivot()
     Dim objTable As PivotTable, objField As PivotField
     ActiveWorkbook.Sheets("data").Select
' data is name of the sheet 
     Range("A1").Select
    **Set objTable = Sheet1.PivotTableWizard**
     Set objField = objTable.PivotFields("name")
        objField.Orientation = xlRowField
        Set objField = objTable.PivotFields("location")
        objField.Orientation = xlRawField
        Set objField = objTable.PivotFields("blaa")
        objField.Orientation = xlRowField
        ' Specify a data field with its summary
        ' function and format.
        Set objField = objTable.PivotFields("money")
        objField.Orientation = xlDataField
        objField.Function = xlSum
        objField.NumberFormat = " #,##0"

        ' Specify a page field.
        'Set objField = objTable.PivotFields("GENDER")
        'objField.Orientation = xlPageField

        ' Preview the new PivotTable report.
        ActiveSheet.PrintPreview

        ' Prompt the user whether to delete the PivotTable.
        Application.DisplayAlerts = False
        If MsgBox("Delete the PivotTable?", vbYesNo) = vbYes Then
            ActiveSheet.Delete
        End If
        Application.DisplayAlerts = True

    End Sub 
```

错误是说我收到此运行时错误“1004”：-此命令至少需要两行源数据。您不能对仅一行中的选择使用该命令。请尝试以下操作：如果您使用的是高级筛选器，请选择包含至少两行数据的单元格区域。然后再次单击高级过滤器命令。如果您正在创建数据透视表或数据透视图报告，请键入 [它在此处停止]

这是我的代码卡住了**Set objTable = Sheet1.PivotTableWizard**

当我通过获取新数据使用相同的代码时，它就可以工作了。在这里，我使用 btn_click 从 db 获取数据，后面有两个宏。一个宏获取数据，然后在 creat pivot 上使用第二个宏。但问题来了。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:05:56.507

除了遗漏之外，我没有看到您已声明`Sheet1 As Worksheet`.... 默认情况下，它将被初始化为 a `Variant`，因此不会将正确的对象传递给该 `PivotTableWizard`方法。

此外，`PivotTableWizard`（Excel 2010）的描述说

*此方法不适用于 OLE DB 数据源。使用 Add 方法添加数据透视表缓存，然后根据缓存创建数据透视表。*

# django - 如何在 django 中创建复选框

> ID：16031164
> 
> 赞同：0
> 
> 时间：2013-04-16T07:28:28.923
> 
> 标签：django, django-models, django-forms, django-templates

我正在 django 中开发一个站点。我必须在模板中显示一个复选框。

我正在使用模型形式，

```
class ReportPersonForm(forms.ModelForm):
    class Meta:
        model = ReportPerson
        fields = ['name','first_aid','sick_bay','ambulance'] 
```

我必须分别为以下字段创建复选框，first_aid、sick_bay、救护车和在模板中渲染。

谁能帮我在 django 中创建一个检查以及如何设计模板以显示该复选框。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:53:07.703

如果您将模型中的字段定义为 BooleanFileld - 您可以使用

```
{{ form.first_aid }} 
```

在你的模板中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:52:57.243

在您的表单文件中

```
class ReportPersonForm(forms.ModelForm):
    first_aid = models.BooleanField()
    sick_bay = models.BooleanField()
    ambulance = models.BooleanField()
    class Meta:
        model = ReportPerson
        fields = ['name','first_aid','sick_bay','ambulance'] 
```

然后对于您的模板，您有多种选择，请在文档中阅读适合您需求的内容： [使用表单](https://docs.djangoproject.com/en/dev/topics/forms/#displaying-a-form-using-a-template "Django 文档")

# gwt - 我需要 Drive API 或 Spreadsheet API，还是两者都需要？

> ID：16031165
> 
> 赞同：0
> 
> 时间：2013-04-16T07:28:29.003
> 
> 标签：gwt, google-drive-api, google-sheets

目前，我正在 GoogleWebToolkit（即 java 后端）中开发一个网络应用程序，它应该：

1.  在同一驱动器上复制现有的 Google Drive 电子表格文档
2.  根据一些业务逻辑修改这个复制的版本。

我查看了 Google 电子表格 API，但很难处理 oAuth 逻辑。然后我查看了 google Drive API，找到了 Dr.Edit 示例项目。

最后一个项目看起来不错，我可以创建和编辑文本文件，但现在是否也可以使用某种 API 来读取 SpreadSheet 文档？

底线是：我应该在这里结合电子表格 API 和 Drive API。推荐什么？我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:44:40.027

您可以使用 Google Drive SDK 管理文件（创建/编辑/删除/查看），但需要电子表格 API 来单独修改工作表、行和单元格。

获得访问令牌后，您也可以使用它来访问电子表格端点。确保您也授权以下范围：

```
https://spreadsheets.google.com/feeds 
```

# ios - 关闭模式视图控制器后，合适的视图滚动到底部问题

> ID：16031167
> 
> 赞同：1
> 
> 时间：2013-04-16T07:28:44.797
> 
> 标签：ios, objective-c, uitableview

我的表格视图滚动到底部时遇到问题。我试图搜索堆栈溢出以寻找解决方案，但没有任何帮助。

这就是我所拥有的：我有一个表格视图，每次用户滚动到它的底部时，我都会将额外的单元格加载到其中。我这样做如下：

```
- (void) tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {

    if (indexPath.row == ([self.tableView numberOfRowsInSection:0] - 1))
        //load more data..
} 
```

通过互联网连接成功加载数据后，我正在调用`[self.tableView reloadData]`刷新表并增加其大小。

现在问题来了：当用户选择一个单元格时，会显示一个详细信息视图控制器。我注意到在显示详细信息视图之前，表格会快速调整为其原始大小，仅显示内部单元格的初始数量。

当详细信息视图被关闭时，表格视图恢复到其原始大小（不适合加载的数据`willDisplayCell: forRowAtIndexPath:`），并且无法向下滚动直到所有数据结束。

我检查了所有这些要点，但没有任何帮助：

*   通过调用`[self.tableView reloadData]`in`viewWillAppear`方法重新加载表视图中的数据。
*   表视图的`delegate`and`dataSource`已正确设置为容器视图控制器。
*   当视图再次出现时检查调用`tableView: numberOfRowsInSection:`，它返回我拥有的所有数据的确切数量，但问题在于表中的大小不适合我的总数据。

我还尝试如下调整表格框架的大小：

```
CGRect frame = self.tableView.frame;
frame.size.height = self.tableView.contentSize.height;
self.tableView.frame = frame; 
```

但没有任何改变。

请问有什么帮助吗？？

更新：我在`didSelectRowAtIndexPath`. 代码很简单：

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    DetailsViewController *vc=[[DetailsViewController alloc]initWithNibName:@"DetailsViewController" bundle:nil];
    [self presentViewController:vc animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:43:42.693

1.  在uiview中取uiscrollview的对象
2.  在 uiscrollview 中获取 uitableview 的对象
3.  设置属性scrollenabled = uitableview的flase
4.  编写uiscrollview的委托方法

    ```
    - (void) scrollViewDidScroll:(UIScrollView *)scrollView 
    {
            if (scrollView == scrollObj)  {
                    CGFloat scrollPosition = scrollObj.contentSize.height - scrollObj.frame.size.height - scrollObj.contentOffset.y;
                    if (scrollPosition < 30) {
                            if ((!spinnerBottom.isAnimating) || intGetDataCallRunning == 0) {
                                    //[spinnerBottom startAnimating];
                                    //[self getLoginFollowingUserVideosCall];
                                    //run WebService call and after that reload the table or if you have data exists then only reload the table
                                    //and after reloading table follow step no 5.
                            }
                    }
            }
    } 
    ```

5.  重新加载表格后设置表格高度并滚动

    ```
    tblVideo.frame = CGRectMake(0, 0, 320, tblVideo.contentSize.height);
    scrollObj.contentSize = CGSizeMake(320,tblVideo.contentSize.height+60); 
    ```

# svn - svn move 命令是否也会移动目录中的文件？

> ID：16031171
> 
> 赞同：2
> 
> 时间：2013-04-16T07:29:00.880
> 
> 标签：svn

我在`svn move`包含子目录和文件的目录上使用过。但在我看到的状态下，

```
D dir
D file1
D file2
etc

A + dir 
```

但我没有看到文件或子文件夹。因此，在我提交之前，我想知道 move 是否`svn move`也包含文件子文件夹，那是加号吗？

![在此处输入图像描述](https://i.stack.imgur.com/zV2Lv.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:38:41.320

[`svn move`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.move.html)确实移动了文件和文件夹。我从来没有真正喜欢[`svn status`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.status.html)移动目录时的输出，但`A +`应该向您展示它正在保存历史。在本地复制它，我得到类似的输出：

```
$ svn st
D       dir-a
D       dir-a/file2.txt
D       dir-a/file3.txt
D       dir-a/file1.txt
A  +    dir-b 
```

使用`--verbose`or`-v`选项，您可以看到更多信息：

```
$ svn st -v
                 0        0  ?           .
D                1        1 jszakmeister dir-a
D                1        1 jszakmeister dir-a/file2.txt
D                1        1 jszakmeister dir-a/file3.txt
D                1        1 jszakmeister dir-a/file1.txt
A  +             -        1 jszakmeister dir-b
   +             -        1 jszakmeister dir-b/file2.txt
   +             -        1 jszakmeister dir-b/file3.txt
   +             -        1 jszakmeister dir-b/file1.txt 
```

这实际上是在告诉您文件也被移动了。这`+`向您显示历史得到了维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T07:43:39.357

是`svn move`的，还会移动文件和子文件夹。

# c# - 基本密码加密并将密码存储在文件中

> ID：16031175
> 
> 赞同：0
> 
> 时间：2013-04-16T07:29:04.233
> 
> 标签：c#, .net

考虑对我的登录表单进行一些修改，而不是将密码作为变量放入我的代码中，有没有一种方法可以加密它并将其存储在文本文件中，这样每次我想登录时，它都会比较来自文本文件？？

```
private void button1_Click(object sender, EventArgs e)
        {
            string username1 = "Richard";
            string password1 = "Peugeot";

            if (this.textBox1.Text == username1 && this.textBox2.Text == password1)
            {
                MessageBox.Show("Welcome Richard!", "Welcome");
                Form1 frm = new Form1();
                frm.Show();
                this.Hide();
            }
            else
                MessageBox.Show("Incorrect username or password", "Bad credentials");
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:53:01.483

我建议将您的密码存储为散列而不是加密（散列是加密可逆的一种方式）。我在这里写过这个（[密码存储，如何正确操作](http://satalketo.com/2013/03/password-storage-how-to-do-it-right/)）。

我还编写了一段代码来使用 SHA512 对字符串进行哈希处理，代码在 VB.NET 中，但将其移至 C# 应该很简单，代码可在此处获得（[计算字符串或文件的 SHA512 哈希](http://satalketo.com/2010/06/sha512-hash-of-string-or-file/)） .

如果您散列密码并将其与您存储在文件中的散列进行比较，如果两者匹配，则它们提供的密码与最初散列的密码相同。

正如 J. Steen 在下面的评论中提到的，我没有明确表示您还应该对哈希进行加盐，这是在对密码进行哈希处理之前将预定义的字符串添加到密码中。这使得任何人都更难暴力破解纯文本。因此，例如，如果密码是`Password1`（我知道密码多棒），您可以在开头添加一个字符串，该字符串将存储在您的应用程序中，例如`~{}:@>?!"£$)&(*$`. 然后，您将对 value 进行哈希处理`~{}:@>?!"£$)&(*$Password1`。当您想检查用户在登录时是否提供了相同的密码时，您可以使用相同的盐以及他们提供的密码。

希望可以解释一下，如果没有，并且您觉得第一个链接无法帮助您理解，请随时告诉我：D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T07:31:56.607

您当然可以，只需在您的文件中写入密码 SHA1 - 或更好 - SHA2 加密并每次进行比较（感谢 J. Steen 的提及！），但我强烈建议您*不*要这样做 - 这根本不安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:35:53.920

好吧，你可以让程序有它自己的加密代码。例如，将所有“a”更改为“kra/”。

但正如上面提到的那样，这并不安全。但根据您的使用情况，可能不必如此。

# c# - 将不同的 linq to sql 结果集返回到单个对象（json 格式）？

> ID：16031176
> 
> 赞同：1
> 
> 时间：2013-04-16T07:29:06.570
> 
> 标签：c#, linq, linq-to-sql

例子：

context 表示 dbml 的实例。

```
var lst1 = context.Customers.AsQuerable();

var lst2 = context.Products.AsQuerable();

var lst3 = context.Employees.AsQuerable(); 
```

我如何将这三个不同的结果集返回到单个对象中？

我需要这样的类型：

```
var lstFinalResult = lst1 + lst2 + lst3; 
```

我正在使用 Linq to sql 和 c#。

请任何人都可以给出答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:37:37.097

您可以使用匿名类型。像这样的东西

```
var somethingJSON = new {
  list1Data= lst1 ,
  list2Data= lst2,
list3Data= lst3
};

return JSON(somethingJSON,JsonRequestBehavior.AllowGet); 
```

# java - 如何在 jsp 页面上使用 owasp-java-html-sanitizer 的策略

> ID：16031180
> 
> 赞同：0
> 
> 时间：2013-04-16T07:29:39.090
> 
> 标签：java, xss, owasp, html-sanitizing

我的任务是防止我们的网站遭受跨站点脚本 (XSS)。这个概念对我来说是新的，我搜索了很多并得到了 owasp-java-html-sanitizer。我创建了自己的政策

```
public static final PolicyFactory POLICY_DEFINITION = new HtmlPolicyBuilder() 
```

通过使用`.allowAttributes`，我设计了它。但现在我不知道如何使用它......我发现了以下代码片段：

```
System.err.println("[Reading from STDIN]");
    // Fetch the HTML to sanitize.
    String html = CharStreams.toString(new InputStreamReader(System.in,
            Charsets.UTF_8));
    // Set up an output channel to receive the sanitized HTML.
    HtmlStreamRenderer renderer = HtmlStreamRenderer.create(System.out,
    // Receives notifications on a failure to write to the output.
            new Handler<IOException>() {
                public void handle(IOException ex) {
                    Throwables.propagate(ex); // System.out suppresses
                                                // IOExceptions
                }
            },
            // Our HTML parser is very lenient, but this receives
            // notifications on
            // truly bizarre inputs.
            new Handler<String>() {
                public void handle(String x) {
                    throw new AssertionError(x);
                }
            });
    // Use the policy defined above to sanitize the HTML.
    HtmlSanitizer.sanitize(html, POLICY_DEFINITION.apply(renderer));
} 
```

但是我如何将它应用于我的 JSP，因为我认为这是用于简单的 HTML。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T18:49:47.350

您可以将渲染器附加到 a`StringWriter`而不是`System.out`，但使用策略的[`sanitize`便捷方法](http://owasp-java-html-sanitizer.googlecode.com/svn/trunk/distrib/javadoc/org/owasp/html/PolicyFactory.html#sanitize%28java.lang.String%29) 可能更容易：

> ```
> public java.lang.String sanitize(@Nullable
>                                  java.lang.String html) 
> ```
> 
> 一个清理 HTML 字符串的便捷函数。

它返回一个 HTML 字符串，可以安全地插入到您的 JSP 页面中。

# jsp - EL 标签 c:forEach 只迭代一次

> ID：16031182
> 
> 赞同：1
> 
> 时间：2013-04-16T07:29:45.923
> 
> 标签：jsp, jstl, el

从[这里](https://stackoverflow.com/questions/16010123/elexception-on-tomcat-5-5-and-jstl-1-2/16010545?noredirect=1#16010545)的线程，我的设置如下：

## 设置：

*   Apache Tomcat 5.5
*   Servlet/JSP：2.4/2.0 根据[http://tomcat.apache.org/whichversion.html](http://tomcat.apache.org/whichversion.html)
*   .WAR 中的 JSTL：现在从~~1.2~~更改为 1.1.2。

在我的 web.xml 我有这样的：

```
<web-app xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" version="2.4"> 
```

在我的 .JSP 中

```
<%  Set<ProductInfo> productInfoSet = (Set<ProductInfo>)session.getAttribute("productInfoSet");%>

<c:forEach items="${productInfoSet}" var="productInfo">
    <c:out value="aa"/>
</c:forEach> 
```

在调试中我可以看到`Set`包含三个元素，但字符串`aa`只打印一次。怎么来的？

笔记！scriptlet 标记仅用于调试目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:52:33.523

产品信息集！= 产品信息集

尝试使用

```
<c:forEach items="${sessionScope.productInfoSet}" var="productInfo"> 
```

# wso2 - 如何使用 WSO2 BPS 中配置的数据源

> ID：16031186
> 
> 赞同：0
> 
> 时间：2013-04-16T07:29:56.487
> 
> 标签：wso2

我是 WSO2 家族的新手 ( `WSS, ESB & BPS`)。
以前我在创建`datasource`时做过示例，我已经使用in`WSO2 ESB`从数据源中检索数据。 现在我已经配置了数据源并成功连接到数据库。 如何使用我在 BPS 中配置的数据源？ 请有人指导。 提前致谢。`DBLookup``WSO2 ESB`
`WSO2 BPS(from UI)`
`BPEL Workflow`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:51:40.887

我认为更好的方法是使用 WSO2 数据服务服务器并使用数据源创建数据服务。（您可以在 Data Services 服务器中定义数据源）。之后，您可以使用 BPS 呼叫他们。请参阅以下教程，了解如此全面的教程。

[http://docs.wso2.org/wiki/display/DVS300/Retail+Banking+Sample](http://docs.wso2.org/wiki/display/DVS300/Retail+Banking+Sample)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T04:28:36.103

请参阅说明如何定义数据源的文档 [1] 并参阅说明如何在 bps.xml 中配置数据源的文档 [2]

[1] [http://docs.wso2.org/wiki/display/BPS300/Adding+RDBMS+Data+Sources#AddingRDBMSDataSources-jndi](http://docs.wso2.org/wiki/display/BPS300/Adding+RDBMS+Data+Sources#AddingRDBMSDataSources-jndi)

[2] [http://docs.wso2.org/wiki/display/BPS300/ODE+Configurations#ODEConfigurations-DataSource](http://docs.wso2.org/wiki/display/BPS300/ODE+Configurations#ODEConfigurations-DataSource)

# asp.net-mvc - ASP.NET MVC & EF5 - 创建列类型 datetime2、Key 属性

> ID：16031188
> 
> 赞同：0
> 
> 时间：2013-04-16T07:30:04.670
> 
> 标签：asp.net-mvc, entity-framework

**问题 1。**

我已经在代码优先中创建了一个数据库。

```
[Column(TypeName="datetime2")]
public DateTime RegistDate { get; set; } 
```

这样就不会创建表。

```
modelBuilder.Entity<Test>().Property(f => f.RegistDate).HasColumnType("datetime2"); 
```

（在 OnModelCreating 方法中）我可以通过使用 Fluent API 来解决。

要创建列格式 datetime2，是否只有 Fluent API？

**问题2。**

我有一个域模型如下。

用户实体类

```
public class User
{   
    public Guid UserId { get; set; }
    public string UserName { get; set; }
    public string Password { get; set; }
    public string UserEmail { get; set; }
    public DateTime JoinDate { get; set; }
    public DateTime LoginDate { get; set; }

    public virtual ICollection<UsersInRole> UsersInRoles { get; set; }
} 
```

角色实体类

```
public class Role
{
    public Guid RoleId { get; set; }
    public string RoleName { get; set; }
    public DateTime CreateDate { get; set; }

    public virtual ICollection<UsersInRole> UsersInRoles { get; set; }
} 
```

UsersInRole 实体类

```
public class UsersInRole
{   
    public Guid UserId { get; set; }
    public Guid RoleId { get; set; }
    public DateTime SetDate { get; set; }

    [ForeignKey("UserId")]
    public User User { get; set; }
    [ForeignKey("RoleId")]
    public Role Role { get; set; }
} 
```

这个build，会出现如下错误

```
One or more validation errors were detected during model generation:
\tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'UsersInRole' has no key defined. Define the key for this EntityType.
\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'UsersInRoles' is based on type 'UsersInRole' that has no keys defined. 
```

我不想添加另一个属性 ID。

另外，我不能使用[Key] UserId，来RoleId。

有没有其他解决方案？

# php - 使用 nginx 和 php-fpm 防止超时

> ID：16031189
> 
> 赞同：0
> 
> 时间：2013-04-16T07:30:07.787
> 
> 标签：php, apache, nginx, laravel, laravel-4

我在运行作业队列侦听器时遇到超时（无限循环）。侦听器调用一个工作人员，其功能涉及使用`shell_exec()`.

我正在使用 php5-fpm 和 PHP 框架 Laravel 4（它使用 symfony 组件）运行 nginx 1.2.7。

**问题：**运行一段时间后，监听器会退出并报错`The process timed out`。我怀疑这是由于`shell_exec()`返回结果需要很长时间。

![在此处输入图像描述](https://i.stack.imgur.com/lgjzf.png)

**尝试：**我尝试将 nginx 上的超时设置增加到 600 秒，但这没有帮助。`set_time_limit(0)`也无济于事。

如何防止它超时，或者至少防止超时错误杀死队列侦听器？

**启用站点/mysite.com**

```
server {
    listen   80;
    server_name www.mysite.com mysite.com *.mysite.com;
    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;
    root /var/www/mysite/public;

    index index.php index.html;

    location / {
        try_files $uri $uri/ /index.php?$args ;
    }
    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php5-fpm.sock;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_read_timeout 600;
        fastcgi_send_timeout 600;
        client_body_timeout 600;
        send_timeout 600;
        proxy_read_timeout 600;
    }

} 
```

**错误堆栈跟踪**

```
exception 'Symfony\Component\Process\Exception\RuntimeException' with message 'The process timed out.' in /var/www/mysite/vendor/symfony/process/Symfony/Component/Process/Process.php:413
Stack trace:
#0 /var/www/mysite/vendor/symfony/process/Symfony/Component/Process/Process.php(201): Symfony\Component\Process\Process->wait(NULL)
#1 /var/www/mysite/vendor/laravel/framework/src/Illuminate/Queue/Listener.php(63): Symfony\Component\Process\Process->run()
#2 /var/www/mysite/vendor/laravel/framework/src/Illuminate/Queue/Listener.php(50): Illuminate\Queue\Listener->runProcess(Object(Symfony\Component\Process\Process), 128)
#3 /var/www/mysite/vendor/laravel/framework/src/Illuminate/Queue/Console/ListenCommand.php(69): Illuminate\Queue\Listener->listen(NULL, 'default', 0, 128, 60)
#4 /var/www/mysite/vendor/laravel/framework/src/Illuminate/Console/Command.php(108): Illuminate\Queue\Console\ListenCommand->fire()
#5 /var/www/mysite/vendor/symfony/console/Symfony/Component/Console/Command/Command.php(240): Illuminate\Console\Command->execute(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#6 /var/www/mysite/vendor/laravel/framework/src/Illuminate/Console/Command.php(96): Symfony\Component\Console\Command\Command->run(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#7 /var/www/mysite/vendor/symfony/console/Symfony/Component/Console/Application.php(193): Illuminate\Console\Command->run(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#8 /var/www/mysite/vendor/symfony/console/Symfony/Component/Console/Application.php(106): Symfony\Component\Console\Application->doRun(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#9 /var/www/mysite/artisan(59): Symfony\Component\Console\Application->run()
#10 {main} 
```

* * *

## 更新

使用 Apache 2.2.22 和默认设置时仍然会发生超时。任何想法可以更改哪些设置以避免超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:54:58.890

一旦`listen`进程占用了太多内存，它就会自我终止。

```
if ($this->memoryExceeded($memory))
{
    $this->stop(); return;
} 
```

我听说您应该使用[Supervisor](http://supervisord.org/)来确保进程重新启动并始终运行。我不确定你为什么要这样做 /: 并且我自己还没有尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:23:55.313

检查＃3。该函数调用有一个非常可疑的 60 作为参数。你确定这是你达到的 php 限制，还是那里的代码监听控制台输出最多 60 秒？

# c++ - 传递复杂类型时的 const 正确性

> ID：16031191
> 
> 赞同：4
> 
> 时间：2013-04-16T07:30:25.420
> 
> 标签：c++

所以，我有四门课：

*App* - 这代表应用程序的入口点

*MainPage* - 这代表主屏幕

*Authenticator* - 这表示用于身份验证的助手/实用程序类

*LoginPage* - 这代表一个登录屏幕。

App、MainPage 和 LoginPage 都有指向 Authenticator 的指针，实际上，它是在用户启动应用程序、到达主屏幕并提示登录时从 App、MainPage、LoginPage 传递的。 App创建MainPage，如果MainPage需要登录，则创建LoginPage。Authenticator 指针在创建时传递。

假设 Authenticator 看起来像这样：

```
class Authenticator {
public:
   std::string GetToken() const;
   void Login(std::string username, std::string pass);
} 
```

现在，App 将创建一个指向 Authenticator 的普通非 const 指针，但因为我不希望 MainPage 能够修改 Authenticator，我希望它存储一个指向它的 const 指针（即它只能调用 const 成员函数它）。但是，我希望 LoginPage 能够调用非 const 成员函数，例如 Login()，因此当我将 Authenticator 从 MainPage 传递到 LoginPage 时，我需要抛弃 const-ness。

**我的问题是**：在这种情况下这样做不好吗？不允许修改对象的类是否应该能够将其传递给可以修改的类？还是让 App 同时创建 MainPage 和 LoginPage 并为它们提供相同的 Authenticator 会更好吗？我对这个选项的唯一问题是我主动创建了一个 LoginPage，而不是懒惰，我更喜欢懒惰地做。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:40:34.450

从应用程序的角度来看，MainPage*正在*修改 Authenticator。如果它直接这样做或调用另一方（LoginPage）代表它这样做并不重要。所以 MainPage 应该得到一个非常量指针，然后应该将它传递给它的子页面进行登录。

如果你想确保你的 MainPage 不会修改 Authenticator，你*可以*为它实现一个基类来存储这个指针并有一个方法来调用登录对话框。Authenticator 是私有的，方法是受保护的。然后，您可以派生自己的 MainPageDerived ，它没有（合法的、非骇客的）机会来修改 Authenticator 但可以在需要时调用 LoginPage 。

请注意，我说*可以*，因为对于 3 门课程，我认为这是过度设计的。但是，如果您将来有更多页面，这可能是一种有效的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:40:09.313

您缺少逻辑常量概念的重要部分。当一个类接受指向 const 对象的指针（或引用）时，它承诺永远不会以可能修改对象的方式使用指针/引用。这当然意味着传递给可以修改它的其他人。

换句话说，如果`MainPage`计划要求某人修改`Authenticator`它（即，将指向它的非常量指针传递给其他人），它也负责修改，因此应该存储一个非常量指针它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T07:40:42.760

从接口的角度来看：如果你有`MainPage( Authenticator const* )`，你就在保证没有任何事情`MainPage` 会改变 的可观察状态`Authenticator`。直接或间接地——如果`MainPage`稍后将它的指针传递给另一个将修改对象的类，你就违反了合同。因此，在您的情况下，它的 const 正确性要求`MainPage( Authenticator* )`：代码构造 `MainPage`不关心修改是直接的还是间接的；它只是想知道合同是什么，并且它得到维护。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T07:46:26.427

只给`MainPage`它需要的东西。你可以从几个方面来看。它可能需要：

*   一个`AuthenticationTokenSource`提供最新的`Token`.
*   An`AuthenticatedExectuor`执行`Action`s`MainPage`定义，但`AuthenticatedExectuor`在调用时提供身份验证`Action`

可能还有其他方法，但首先想到的是这些方法。

# tomcat - 将战争文件自动部署到詹金斯的错误

> ID：16031192
> 
> 赞同：2
> 
> 时间：2013-04-16T07:30:34.110
> 
> 标签：tomcat, deployment, jenkins, tomcat7, jenkins-plugins

尝试自动部署到我们的 tomcat 服务器时出现此错误。

> 错误：发布者 hudson.plugins.deploy.DeployPublisher 由于异常 org.codehaus.cargo.container.ContainerException 而中止：无法重新部署 [/home/affiza/workspace/mimos-test-deploy/dist/met-server.war] 在org.codehaus.cargo.container.tomcat.internal.AbstractTomcatManagerDeployer.redeploy(AbstractTomcatManagerDeployer.java:195) at hudson.plugins.deploy.CargoContainerAdapter.deploy(CargoContainerAdapter.java:64) at hudson.plugins.deploy.CargoContainerAdapter$1.invoke (CargoContainerAdapter.java:90) at hudson.plugins.deploy.CargoContainerAdapter$1.invoke(CargoContainerAdapter.java:77) at hudson.FilePath$FileCallableWrapper.call(FilePath.java:2309) at hudson.remoting.UserRequest.perform(UserRequest .java:118) 在 hudson.remoting.UserRequest.perform(UserRequest.java:48) 在 hudson.remoting.Request$2。run(Request.java:326) at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72) at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) at java.util.concurrent。 FutureTask.run(FutureTask.java:166) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang .Thread.run(Thread.java:722) 原因：java.io.IOException：服务器返回 HTTP 响应代码：403 用于 URL：ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:722) 原因：java.io .IOException：服务器返回 HTTP 响应代码：URL 的 403：ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:722) 原因：java.io .IOException：服务器返回 HTTP 响应代码：URL 的 403： [http://test.mest.my:8080//manager/text/list](http://test.mest.my:8080//manager/text/list) at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1625) at org.codehaus.cargo.container.tomcat。 internal.TomcatManager.invoke(TomcatManager.java:504) 在 org.codehaus.cargo.container.tomcat.internal.TomcatManager.list(TomcatManager.java:622) 在 org.codehaus.cargo.container.tomcat.internal.TomcatManager。 getStatus(TomcatManager.java:635) at org.codehaus.cargo.container.tomcat.internal.AbstractTomcatManagerDeployer.redeploy(AbstractTomcatManagerDeployer.java:176) ... 13 更多

我需要做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:39:51.423

我认为这是关键：

```
...
java.lang.Thread.run(Thread.java:722) Caused by: java.io.IOException: 
Server returned HTTP response code: 403 for URL: 
http://test.mest.my:8080//manager/text/list at 
... 
```

[403 表示禁止](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)：

> 服务器理解请求，但拒绝执行。授权将无济于事，并且不应重复请求。如果请求方法不是 HEAD 并且服务器希望公开请求未完成的原因，它应该在实体中描述拒绝的原因。如果服务器不希望向客户端提供此信息，则可以使用状态代码 404（未找到）来代替。

因此，您可能在 Jenkins 作业中有错误的部署配置（尝试部署的位置错误，不允许部署），或者您的 Tomcat 配置不正确并且不允许部署（至少不是 Jenkins 作业尝试的方式）它）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-18T06:37:55.283

向用户添加角色“manager-script”，

> 请注意，对于 Tomcat 7 及更高版本，使用管理器应用程序所需的角色已从单个管理器角色更改为以下四个角色。您将需要分配您希望访问的功能所需的角色。
> 
> ```
> manager-gui - allows access to the HTML GUI and the status pages
> manager-script - allows access to the text interface and the status
> manager-jmx - allows access to the JMX proxy and the status
> manager-status - allows access to the status pages only 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-30T07:36:09.877

将以下角色添加到您的 tomcat-users.xml

1.  manager-gui - 允许访问 HTML GUI 和状态页面 - 可以访问您的 tomcat 的 gui 界面

2.  manager-script - 允许访问文本界面和状态 - 提供对由 Jenkins 运行的外部脚本的访问。

    ```
     <tomcat-users><role rolename="manager-gui"/><role rolename="manager-script"/><user username="deployer" password="deployer" roles="manager-gui"/> 
    ```

    我不知道以下两个

    *   manager-jmx - 允许访问 JMX 代理和状态
    *   manager-status - 只允许访问状态页面

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-05T02:20:22.157

更改 conf 文件夹中的任何内容后，您应该重新启动 tomcat

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-02-11T13:02:11.427

上面的异常是说-您已经在远程服务器中部署了相同的工件并且无法重新部署它，只需删除已经部署的工件，这将起作用，但是如果您想重新部署相同的工件，则需要更改插件中的配置..

# jquery - jQuery UI Datepicker 月份更改需要点击 2 次

> ID：16031193
> 
> 赞同：0
> 
> 时间：2013-04-16T07:30:39.157
> 
> 标签：jquery, jquery-ui

我有两个输入字段，一个用于到达，一个用于离开。当用户输入到达日期时，我会打开带有必要约束的出发日期日期选择器。

但是，当我以编程方式打开第二个日期选择器时，更改为下个月需要单击两次并再次触发显示事件（？）。但是，在当前月份中选择一个日期可以按预期工作。

这是一个显示问题的小提琴：http: [//jsfiddle.net/rrPAy/3/](http://jsfiddle.net/rrPAy/3/)

HTML：

```
<form>
   <label for="arrivalDate">Arrival</label>
   <input type="text" name="arrivalDate" id="arrivalDate" autocomplete="off">
   <br>
   <label for="departureDate">Departure</label>
   <input type="text" name="departureDate" id="departureDate" autocomplete="off">
</form> 
```

JAVASCRIPT：

```
$("#arrivalDate,#departureDate").datepicker({
    minDate: +1,
    firstDay: 1,
    dateFormat: "dd.mm.yy",
    showOn: 'both',
    gotoCurrent: true,
    buttonImageOnly: true,
    buttonText: 'Date',
    numberOfMonths: 1,
    inline: true,
    changeMonth: true,
    changeYear: true,
    beforeShow: function customRange(input)
    {
        if (input.id == 'departureDate') {
            var arrivalDate = jQuery('#arrivalDate').datepicker("getDate");
            if(arrivalDate) {
                arrivalDate.setDate(arrivalDate.getDate()+1); // Add 1 Day for Departure Date
                return {minDate: arrivalDate};
            }
        }
    },
    onClose: function() {
        if ($(this).attr('id') == 'arrivalDate') {
            $("#departureDate").datepicker("show");
            $("#departureDate").focus();
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:13:52.563

尝试这个：

```
$("#arrivalDate,#departureDate").datepicker({
        minDate: +1,
        firstDay: 1,
        dateFormat: "dd.mm.yy",
        showOn: 'both',
        gotoCurrent: true,
        buttonImageOnly: true,
        buttonText: 'Date',
        numberOfMonths: 1,
        inline: true,
        changeMonth: true,
        changeYear: true,
        onSelect: function(dateText, inst) {
            if ($(this).attr('id') == 'arrivalDate') {
                var d =  $('#arrivalDate').datepicker('getDate');
                d.setDate(d.getDate()+1);
                $('#departureDate').datepicker('option', 'minDate', d);
                $('#departureDate').datepicker('show');
                inst.preventDefault();
            }
        }
    }); 
```

见[小提琴](http://jsfiddle.net/Lucidus/rrPAy/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-26T12:42:12.843

我在 onClose 事件中使用类似的东西

```
setTimeout(function () {
    $('.datepicker').datepicker("show");
}, 50); 
```

# facebook - facebook access_token 澄清

> ID：16031194
> 
> 赞同：0
> 
> 时间：2013-04-16T07:30:39.917
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我有一个应该向其用户发送一些通知的 facebook 应用程序。这将由 cron 完成，我找到了两种方法来获得`access_token`执行此操作所需的内容：

1.

```
$app_token = file_get_contents("https://graph.facebook.com/oauth/access_token?" .
    "client_id=" . appid .
    "&client_secret=" . secret .
    "&grant_type=client_credentials"); 
```

2.

```
$fb = new Facebook(array('appId' => appid, 'secret' => secret, 'cookie' => true));
$app_token = $fb->getAccessToken(), 
```

我可以理解有两种不同的方法来获取`access_token`，但是**为什么我**从这两种方法中得到不同的值呢？[据我所知，两者的工作方式相同]

我想知道区别是什么以及获得`access_token`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:44:33.080

我认为第二种选择很好。因为将来 Facebook 可能会更改 URL 以获取访问令牌。但在第二个选项中，您使用的是 oAuth，它更安全。您可能需要更改您使用的 SDK。而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:10:03.357

主要不同的是，第二个不需要 http 请求来获取应用程序访问令牌，只需将客户端 ID 和客户端密码用“|”连接在一起。

示例 client_id 'abc' 和 client_secret 'def'，然后当您调用[https://graph.facebook.com/app?access_token=abc|def时，'abc|def' 就可以使用了](https://graph.facebook.com/app?access_token=abc|def)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:25:16.013

在 oauth 端点触发将始终为您提供长期令牌，这与短期令牌不同。

# javascript - 日历事件第一次未加载

> ID：16031197
> 
> 赞同：1
> 
> 时间：2013-04-16T07:30:56.740
> 
> 标签：javascript, jquery, ajax, json, fullcalendar

我有一个选择列表框，有 3 个选项值，最后一个选项值为`Calendar`，而我将单击日历事件第一次未加载...

我的完整日历 + 事件代码。

```
<script type='text/javascript' src='js/fullcalendar.min.js'></script>
<script>
    $(document).ready(function() { 
         $('#calendar').fullCalendar({ 
             events: "json-events.php",
             loading: function(bool) { 
                if (bool) { 
                     $('#loading').show();
                }
                else {
                     $('#loading').hide();
                }
             },
          });
     });
  </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:33:39.397

我有一个类似的问题：所以我重新渲染了日历：

```
if (bool) {
   $('#loading').show();
    setTimeout(function(){
            $('#calendar').fullCalendar('render');
        },1);

   } 
```

希望这也适用于您的设置。

# javascript - 在 JavaScript 中移动一个 div

> ID：16031200
> 
> 赞同：0
> 
> 时间：2013-04-16T07:31:30.337
> 
> 标签：javascript, css

我有一个我构建的函数（目前它是一种简单的骨骼），但是当它展开 onMouseOver 时我找不到如何移动对象，所以它不会移动页面上的其他对象，这可能吗？

```
function expandbox(x) {
    x.style.height = "100px";
    x.style.width = "100px";
}

function returnbox(x) {
    x.style.height = "80px";
    x.style.width = "80px";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:51:39.600

如果您想将元素保持在文档流中，请将其设置为并使用and`position: relative`移动它，这将与元素开始的位置相关。`top``left`

我将使用您制作的相同类型的函数来演示：

```
function moveBox(x) {
    x.style.position = "relative";
    // move 20px down and 10px left from original position
    x.style.top = "20px";
    x.style.left = "-10px";
} 
```

如果您想从文档流中删除该框（以下元素不会受到其存在的影响），请将其位置设置为`absolute`。顶部和左侧值将相对于其**最近的定位祖先**（或者`<body>`如果没有，我在下面的评论中假设）

```
function moveBox(x) {
    x.style.position = "absolute";
    // position box 20px from top of body
    x.style.top = "20px";
    // and 10px from the left
    x.style.left = "10px";
} 
```

一个元素被认为是“定位的”，如果它的值不是`static`（默认，[在这里阅读更多](http://www.w3.org/TR/2012/WD-css3-positioning-20120207/#positioned)），所以如果你想控制绝对定位的元素相对于什么，你可以给一个容器元素`position: relative`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:34:19.200

使元素位置在相对容器内相对，然后更改其尺寸。

确保给它更高的 z-index。
将其与 的`left,right,top,bottom`属性一起放置`style`。

# jsf - 如何定期执行支持 bean 的一种方法

> ID：16031203
> 
> 赞同：1
> 
> 时间：2013-04-16T07:31:45.160
> 
> 标签：jsf, primefaces

我有一个 inputText 区域，并且 inputTextArea 的 value 属性不时更改。如何在 REGULAR INTERVALS 上调用 METHOD 以便与该组件关联的 VALUE 始终是最新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:09:57.267

使用[Poll](http://www.primefaces.org/showcase/ui/pollStartStop.jsf)将是您的最佳选择。

```
 <h:inputTextarea id="autoUpdate" value="#{...}" />  
 <p:poll interval="4" listener="#{...}"  update="autoUpdate" autoStart="true"/> 
```

Primefaces vdl 描述：

> Poll 是一个 ajax 组件，它能够发送定期 ajax 请求并在 JSF 支持 bean 上执行侦听器

# string - NAnt 属性转小写

> ID：16031207
> 
> 赞同：0
> 
> 时间：2013-04-16T07:32:03.233
> 
> 标签：string, nant

我想防止在 nant 脚本的参数中放置不正确的大小写。

我想取 x 的值并将其转换为小写，我尝试使用

```
string::to-lower() 
```

但这没有用，希望有人遇到过这个问题并有一个简单的解决方案。

```
<?xml version="1.0" encoding="utf-8"?>
   <project name="test" Default="test" value="net-4.0" >

     <property name="x" value="default" unless="${property::exists('x')}"/>

     <target name="test">
       <echo message="${x}" />
     </target>
   </project> 
```

**更新**

我尝试了 Yan 提出的建议，下面的代码仍然输出大写，我将进一步解释

我有一个 nant 脚本，它有一个可以传递给它的参数，一个属性检查参数是否存在，如果存在则使用它，如果不存在则使用默认值。我想以任何形式获取参数并将其转换为小写，同时仍检查其是否存在。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<property overwrite="true" name="x" value="default" unless="${property::exists('x')}"/>
<property overwrite="true" name="x" value="${string::to-lower(x)}" />

<target name="test">
    <echo message="${x}" />
</target>
</project> 
```

我相信这是你认为我应该这样做的方式。我已经使用以下命令行参数对此进行了测试。

```
nant -buildfile:nant.build test -D:x=TEST 
```

这会产生输出

```
 Target framework: Microsoft .NET Framework 4.0
 Target(s) specified: test

 [property] Read-only property "x" cannot be overwritten.

 test:

 [echo] TEST

 BUILD SUCCEEDED - 0 non-fatal error(s), 1 warning(s)

 Total time: 0.1 seconds. 
```

任何解决方案将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:17:47.133

当您说参数时，您是指它的名称还是它的值？即，您要确保`x`是小写，还是`test`（我假设是后者）？如果我有以下 nant 脚本：

```
<?xml version="1.0" encoding="utf-8"?>
<project name="test" Default="test" value="net-4.0" >

    <property overwrite="false" name="x" value="default"/>
    <property overwrite="false" name="x_internal" value="${string::to-lower(x)}" />

    <target name="test">
        <echo message="${x_internal}" />
    </target>
</project> 
```

并这样称呼它：

```
nant.exe -buildfile:nant.build test -D:x=TESTx
nant.exe -buildfile:nant.build test -D:X=TESTX 
```

我收到以下回复：

```
Target framework: Microsoft .NET Framework 4.0
Target(s) specified: test

test:

     [echo] testx

BUILD SUCCEEDED
Total time: 0 seconds.

Target framework: Microsoft .NET Framework 4.0
Target(s) specified: test

test:

     [echo] default

BUILD SUCCEEDED
Total time: 0 seconds. 
```

这就是你所追求的吗？

**更新**

我认为这是让你绊倒的原因：

```
Note: properties set on the command-line are always read-only. 
```

（来自[NAnt 属性文档中的第 4 节](http://nant.sourceforge.net/release/latest/help/fundamentals/properties.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:06:23.903

您提到的功能应该可以工作。看看你的语法拼写是否正确：

```
<echo message="${string::to-lower(x)}" /> 
```

# android - 解析 XML 文件返回 null

> ID：16031209
> 
> 赞同：0
> 
> 时间：2013-04-16T07:32:06.063
> 
> 标签：android, xml, xml-parsing, null, xmlpullparser

我正在尝试使用 .xml 解析 XML 文件`XMLPullParser`。我的代码如下：

```
try {
    XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
    factory.setNamespaceAware(true);
    XmlPullParser xpp = factory.newPullParser();

    xpp.setInput(new StringReader(iData));
    int eventType = xpp.getEventType();
    while (eventType != XmlPullParser.END_DOCUMENT) {
        if (eventType == XmlPullParser.START_TAG) {
            if (xpp.getName() == "service") {
                sDetails[0] = xpp.getAttributeValue(1);
            }
            if (xpp.getName() == "username") {
            sDetails[1] = xpp.nextText();
            }
            if (xpp.getName() == "quota") {
            sDetails[2] = xpp.nextText();
            }
            if (xpp.getName() == "plan") {
            sDetails[5] = xpp.nextText();
            }
            if (xpp.getName() == "carrier") {
            sDetails[4] = xpp.nextText();
            }
            if (xpp.getName() == "speed") {
            sDetails[3] = xpp.nextText();
            }
            if (xpp.getName() == "usage-rating") {
            sDetails[6] = xpp.nextText();
            }
            if (xpp.getName() == "rollover") {
            sDetails[7] = xpp.nextText();
            }
            if (xpp.getName() == "excess-charged") {
            sDetails[10] = xpp.nextText();
            }
            if (xpp.getName() == "excess-shaped") {
            sDetails[11] = xpp.nextText();
            }
            if (xpp.getName() == "excess-restricted") {
            sDetails[12] = xpp.nextText();
            }
            if (xpp.getName() == "plan-interval") {
            sDetails[8] = xpp.nextText();
            }
            if (xpp.getName() == "plan-cost") {
            sDetails[9] = xpp.nextText();
            }
        }
        eventType = xpp.next();
    }
    String t = "";
    for (int i = 0; i < sDetails.length; i++) {
        t = t + sDetails[i] + ",";
    }
    return t;
} catch (Exception e) {
    e.printStackTrace();
} 
```

但是，当我打印返回的值时。我得到的是：

```
null,null,null,null,...,null,null, (13 Times) 
```

我错过了什么吗？返回我正在读取的 XML 文件（我知道，因为我可以打印它）。`iData`是一个包含 XML 文件的字符串。我使用的方法适用于来自同一位置的另一个 XML 文件，但我`IF`在其中的语句`WHILE`不同。关于返回原因的任何建议`null`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:12:18.393

没关系。我解决了。您不能使用`==`. 我改变了`==`它`...getName().equals("blahblah")`并且它起作用了。

# jquery - 基于其他字段的多字段验证

> ID：16031211
> 
> 赞同：0
> 
> 时间：2013-04-16T07:32:13.517
> 
> 标签：jquery, asp.net, jquery-validate, webforms

我的设置是我有一个名为 claimaint_rep 的字段，现在当该值为 Yes 时，我希望需要多个字段。现在我正在使用 jquery 验证。我目前的代码是：

```
 $('#aspnetForm').validate({
        errorPlacement: function (error, element) { },

        rules:
                {
                    claimsol:
                        {
                            required: function (element) {
                                return $("#ctl00_ContentPlaceHolder1_claimant_rep").val() == "Yes";
                            },
                            minlength: 2
                        }

                },

        highlight: function (element) {
            $(element).closest('.control-group').removeClass('success').addClass('error');
        },
        success: function (element) {
            $(element).closest('.control-group').removeClass('error').addClass('success');
        }
    }); 
```

示例 HTML：

```
<div class="control-group">
    <label class="control-label" for="inputEmail">Reference Number</label>
    <div class="controls">      
        <asp:TextBox ID="solicitor_reference" CssClass="span3 claimsol" runat="server"></asp:TextBox>
    </div>
  </div> 
```

字段命名是因为它是一个 ASP Webform（呃），现在看来，claimsol 规则将只适用于一个名为 claimol 的字段？我想将该规则应用于多个字段，理想情况下不必在规则部分中设置每个字段。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:14:47.533

**Quote OP:**

> I want to apply that rule to multiple fields, ideally without having to set each one in the rules section.

I really have no idea what you're ultimately trying to achieve, but there are only a couple of methods that can apply rules in bulk.

1) [`rules('add')` method](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules) for dynamically adding rules to a jQuery target selector. If the selector targets multiple fields, you must wrap this method inside an `.each()`.

```
$('[name*="field"]').each(function() {
    $(this).rules('add', {
        required: true,
        number: true,
        messages: { // optional custom messages
            required:  "your custom message",
            number:  "your custom message"
        }
    });
}); 
```

The various ways to implement this are limitless.

See: [https://stackoverflow.com/a/15116062/594235](https://stackoverflow.com/a/15116062/594235)

2) [`addClassRules()` method](http://docs.jquery.com/Plugins/Validation/Validator/addClassRules#namerules) for creating a `class` name that represents your compound rule. (However, over-riding the default error messages is not as simple as in item #1).

```
$.validator.addClassRules("myclass", {
    required: true,
    minlength: 2
}); 
```

You must also add that `class` name to each input that needs to use that rule.

```
<input type="text" class="myclass" name="field" /> 
```

DEMO: [http://jsfiddle.net/62uua/](http://jsfiddle.net/62uua/)

3) Or you can create a whole new rule based on your dependency function using the [`addMethod()` method](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage).

```
$.validator.addMethod("myrule", function(value, element) { 
    // your function
    // return false triggers the error
    // return true passes validation
}, "Custom message"); 
```

See the documentation for all available methods and usage: [http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

**EDIT**:

If you're trying to suppress error messages, do not pass an empty callback function like you did here,

```
errorPlacement: function (error, element) { }, 
```

pass a `return false` instead,

```
errorPlacement: function (error, element) { 
    return false;  // suppress default error message placement
}, 
```

# asp.net-mvc-4 - Durandal.js：更改每个区域的导航选项

> ID：16031226
> 
> 赞同：5
> 
> 时间：2013-04-16T07:33:05.363
> 
> 标签：asp.net-mvc-4, navigation, durandal

我希望我的 durandal 应用程序的每个“区域”都有不同的导航。在使用区域时，我通过在布局页面中定义一个导航部分并使用嵌套布局页面来实现每个区域的导航，从而使用 ASP.NET MVC 实现了这一点。durandal中的视图结构如下：

[http://i1346.photobucket.com/albums/p697/user2269352/viewstructure_zps5e21e724.gif](http://i1346.photobucket.com/albums/p697/user2269352/viewstructure_zps5e21e724.gif)

我正在使用 ASP.NET MVC4 durandal 模板，我猜我可能需要从 shell.html 更改以下段

```
<ul class="nav" data-bind="foreach: router.visibleRoutes">
    <li data-bind="css: { active: isActive }">
        <a data-bind="attr: { href: hash }, html: name"></a>
    </li>
</ul> 
```

我想理想情况下，我希望根据我正在查看的区域/页面，将单独的 html 页面加载到此部分中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T11:58:40.803

您可以通过将设置对象添加到您的路线信息并在那里指定区域名称来完成此操作。有了它，针对路由器的 visibleRoutes 集合创建一个计算的 observable，该集合仅选择当前区域的路由。

不确定您的路由配置是什么样的，但添加设置的示例如下：

```
var routes = [
    { url: 'one/page1', moduleId: 'viewmodels/one/page1', name: 'Page 1', visible: true, settings: {area: 'one'} },
    { url: 'two/page1', moduleId: 'viewmodels/two/page1', name: 'Page 1', visible: true, settings: {area: 'two'} }
];
router.map(routes); 
```

在您控制导航 html 的视图模型中：

```
//filter the visible routes for the current area
viewModel.areaRoutes = ko.computed(function () {
    var area = this.area;
    return ko.utils.arrayFilter(router.visibleRoutes(), function (route) {
        return route.settings.area === area;
    });
}, viewModel); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T12:14:28.480

基于 Joseph Gabriel 的解决方案适用于我并使用*router.activeItem.settings.areSameItem*我可以在布局中的任何位置设置每条路线的组。

```
router.activeItem.settings.areSameItem = function (currentItem, newItem, activationData) {
    return currentItem == newItem; //replace this with your own code
}; 
```

# ios - 无论是否缩放，从 UIScrollView 获取相同的坐标

> ID：16031228
> 
> 赞同：0
> 
> 时间：2013-04-16T07:33:19.037
> 
> 标签：ios, uiscrollview, coordinates, zooming

`UIScrollView`是否可以从缩放或不缩放中获得相同的坐标。

即，例如，考虑 320.0F 和 480.0F 的普通屏幕。

1.  点击一个点；视图会给我类似（60.0F，80.0F）的东西。
2.  放大或缩小视图，使其具有更大或更小的缩放比例，但确保缩放区域包含根据先前缩放比例（60.0F，80.0F）被点击的点。
3.  再次点击该点，视图会给我不同的坐标值。

问题是，无论视图是否缩放，我都希望具有相同的坐标值。这个想法很简单。我想在不改变坐标的情况下显示缩放和交互的图像。考虑到`UIScrollView`高度为 1.0 和宽度为 0.66 的想法的应用，我认为在不使用 OpenGL、cocos2d 或任何其他 3D 引擎的情况下制作交互式应用程序时，会有一些专业人士以这种方式编程。

你们知道它是否支持吗？无论哪种情况，请不要等待任何第二个回复。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:45:01.830

您可以使用内容大小自行计算，如下所示，

*   x = (original_Width/ width_after_zooming) * point.x
*   y = (original_height/ height_after_zooming) * point.y

# qt - 如何使用 Qt 响应桌面启动通知

> ID：16031230
> 
> 赞同：3
> 
> 时间：2013-04-16T07:33:28.723
> 
> 标签：qt, notifications, desktop, startup

我有一个 Qt 应用程序，在 Xfce 和其他 Linux 桌面下运行，效果很好，除了在应用程序启动时循环的“启动通知”图标没有消失，因此在应用程序主窗口显示后它会持续一段时间并完成。

我会假设 QApplication 在主窗口事件循环开始时默认关闭通知，或者我会调用一些方法来这样做。我在 Qt API 文档中或在 Qt 启动通知上的谷歌搜索中找不到任何相关内容。

如何在 Qt 应用程序中关闭启动通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:39:25.167

不添加

```
StartupNotify=false 
```

到`.desktop`您的应用程序的文件解决问题？在 KDE 中，

```
X-KDE-StartupNotify=false 
```

作品; 也许 XFCE 也有类似的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-12T21:41:07.087

当第一个窗口首次显示时，启动通知会在 Qt 内部自动发送（参见 src/plugins/platforms/xcb/qxcbscreen.cpp），但显然，由于一个错误，如果有引号或转义字符，它就不起作用( `\`) 在程序路径中的 .desktop 文件中。

另外，如果`Terminal=true`出现，环境变量DESKTOP_STARTUP_ID会被xterm删除，不会到达你的应用程序，所以最好不要同时启用`Terminal`和`StartupNotify`flags。

在 MATE 上进行了测试。

# php - 由于 php 变量，LIKE 子句不起作用

> ID：16031231
> 
> 赞同：1
> 
> 时间：2013-04-16T07:33:31.237
> 
> 标签：php, search, sql-like

这是我的代码....尝试过`echo the $sql`但它显示' `%Search%`'...但我想将它用作`$Search`..请帮助...

以下是我的整个搜索代码...

```
if(isset($_POST['search']))

 {

$search=$_POST['search'];

$criteria=$_POST['criteria'];

$table='alumni';

mysql_real_escape_string($search);

if($criteria=='ALL')

{

$sql="SELECT UNAME FROM `alumni` ";

$result=mysql_query($sql); 

if (!$result) {

die('Invalid query: ' . mysql_error());

}

while ($row=mysql_fetch_array($result))

{

echo"<tr><td><a>".$row['UNAME']."</a></td></tr>"; 

}

}

                                    if($criteria=='UNAME' || $criteria=='FNAME' || $criteria=='BATCH')

{

//echo $criteria;

$sql="SELECT UNAME FROM `alumni` WHERE ".$criteria." LIKE '%".$search."%'";

//echo $sql;

$result=mysql_query($sql); 

if (!$result) {

die('Invalid query: ' . mysql_error());

}

while ($row=mysql_fetch_array($result))

{

echo"<tr><td><a>".$row['UNAME']."</a></td></tr>"; 

}

}

}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:51:15.180

通过测试上面的代码似乎没有什么问题，如果你通过了，`search=Test`你会得到：

```
SELECT UNAME FROM `alumni` WHERE FNAME LIKE '%Test%' 
```

如果你总是得到...

```
SELECT UNAME FROM `alumni` WHERE FNAME LIKE '%Search%' 
```

...无论您在搜索表单中填写的值如何，都表明该表单的工作方式或发布数据的组合方式存在问题。您在上面发布的代码虽然已经过时，但可以按照您对搜索数据库的代码的预期工作。

如果您可以发布有关如何调用或使用此脚本的更多信息，您可能会从某人那里得到更准确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:49:21.587

如果使用双引号，则可以将变量放在字符串中而无需关闭它们。

尝试：

```
$sql="SELECT UNAME FROM `alumni` WHERE $criteria LIKE '%$search%'"; 
```

# mysql - LOAD DATA INFILE IGNORE 上的 MySQL 更新时间戳

> ID：16031235
> 
> 赞同：0
> 
> 时间：2013-04-16T07:34:00.933
> 
> 标签：mysql, linux, timestamp

我编写了几个脚本，它们将数据从交换机加载到我的 MySQL 数据库中。

我有一个表开关，我在其中添加了“lastupdate”列。表开关如下所示：

```
create table switch (name varchar(15), swversion varchar(15), bootversion varchar(15), serialnumber varchar(30), rootbridge varchar(10), address varchar(20), switch_id MEDIUMINT NOT NULL AUTO_INCREMENT, lastupdate DATE , PRIMARY KEY(switch_id)); 
```

我使用以下命令为所有行添加了默认时间戳：

```
ALTER TABLE switch MODIFY lastupdate TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL 
```

我正在使用`LOAD DATA INFILE IGNORE`我的“加载数据”脚本将我的数据加载到数据库中。现在我想在我的“加载数据”脚本中实现一个 MySQL 命令，该命令自动更新在表开关中加载（更改或未更改）的每一行的时间戳。

有什么建议么？

# iphone - UITableviewcell 中显示了错误的图像

> ID：16031236
> 
> 赞同：0
> 
> 时间：2013-04-16T07:34:01.083
> 
> 标签：iphone, uitableview, grand-central-dispatch

我正在使用 GCD 将图像从网络加载到我的`UITableViewCell`. 但是，出现了错误的图像。

这是代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    UITableViewCell *cell = [self.newsTable dequeueReusableCellWithIdentifier:@"newsTableCell"];
    NSString *user = [usernames objectAtIndex:[indexPath row]];
    NSString *stat = [statistics objectAtIndex:[indexPath row]];
    NSString *imagePath = [appDelegate.URL stringByAppendingString:@"ImageName"];
    UIImageView *userImageView = (UIImageView *)[self.view viewWithTag:80];

        NSString *imagePath1 = [imagePath stringByAppendingString:[imagepaths objectAtIndex:[indexPath row]]];

        NSURL *url = [NSURL URLWithString:imagePath1];
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
    dispatch_async(queue, ^{
        NSData *data = [NSData dataWithContentsOfURL:url];
        UIImage *img = [[UIImage alloc] initWithData:data];
        userImageView.layer.cornerRadius = 5.0;
        userImageView.layer.masksToBounds = YES;
         dispatch_sync(dispatch_get_main_queue(), ^{
        [userImageView setImage:img];
         });
    });
 return cell
} 
```

请让我知道，我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:58:07.483

您根本没有使用您的`cell`变量，而是在`UIImageView`which 来自`self.view`. 图像永远不会在表格的单元格上正确设置。

# matplotlib - 日期时间不正确的熊猫系列中的不正确图

> ID：16031237
> 
> 赞同：0
> 
> 时间：2013-04-16T07:34:07.323
> 
> 标签：matplotlib, pandas

当我使用 matplotlib 绘制一个包含三个浮点值且索引为日期时间的熊猫系列时，我得到一个不正确的绘图，中间有一条垂直线。它看起来像这样：

![奇怪的竖线](https://i.imgur.com/9EAXm2e.png)

我已经为此苦苦挣扎了好几个小时。我终于能够在以下 Python 代码中使用这三个数据点重现它：

```
import pandas as pd
import matplotlib.pyplot as plt

data = """\
2013-04-16 08:50:00.080120 / 56.70999
2013-04-16 08:53:34.165183 / 56.59997
2013-04-16 08:59:09.676249 / 55.70001\
"""

fmt = "%Y-%m-%d %H:%M:%S.%f"
val = [float(a.split(' / ')[1]) for a in data.split('\n')]
indx = [pd.datetime.strptime(a.split(' / ')[0], fmt) for a in data.split('\n')]

s = pd.Series(val, index=indx)

s.plot()
plt.show() 
```

如果我放大这条线，我可以看到它被放置在正确的日期（4 月 16 日），但恰好在午夜，而不是在数据指定的时间（并由`print`ing回显`s`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:59:39.840

您使用的是哪个版本的 matplotlib 和 pandas？

使用 pandas`v0.10.1.dev-f73128e`和 matplotlib `v1.2.1` ，无论我在 Ipython 中以交互模式还是从 python 脚本中绘图，我都能得到正确的数字。（顺便说一句，我使用 python 2.7）

![数字](https://i.stack.imgur.com/HTlVo.png)

# java - 编写一个简单的应用程序将消息注入队列

> ID：16031243
> 
> 赞同：1
> 
> 时间：2013-04-16T07:34:34.017
> 
> 标签：java, ibm-mq

我正在尝试编写一个简单的 Java 程序来将 MQ 消息注入队列。我对使用 Java 写入 MQ 队列非常缺乏经验，并且有几个问题。

1.  我可以从我的 Windows 机器连接到 unix 机器上的 unix 队列吗？
2.  当我尝试运行应用程序时，我得到一个 .... java.lang.UnsatisfiedLinkError: no mqjbnd05 in java.library.path

从我在谷歌中可以找到的声音来看，我缺少某种资源。我在想我可能会收到这个错误，因为我不允许从 Windows 连接到队列？

任何关于如何实现我正在做的事情或帮助的好例子都将不胜感激。

```
public class MQInject {

    private MQQueueManager _queueManager = null;
    private Hashtable params = null;

    public int port = 1414;
    public static final String hostname    = "UQMYPOSIS1";
    public static final String channel     = "MQTX1012.MQTX1013";
    public static final String qManager    = "MQTX1013";
    public static final String outputQName = "IIS.TLOG.5";

    public MQInject(){
        super();
    }

    public void init(){

        //Set MQ connection credentials to MQ Envorinment.
         MQEnvironment.hostname = hostname;
         MQEnvironment.channel = channel;
         MQEnvironment.port = port;
         //MQEnvironment.userID = "";
         //QEnvironment.password = password;
         //set transport properties.
         MQEnvironment.properties.put(MQC.TRANSPORT_PROPERTY, MQC.TRANSPORT_MQSERIES_CLIENT);

         try {
             //initialize MQ manager.
             _queueManager = new MQQueueManager(qManager);
        } catch (MQException e) {
            e.printStackTrace();
        }
    }    

    public static void main(String[] args)
    {

        MQInject write = new MQInject();
        try
        {
            write.selectQMgr();
            write.write();
        }
        catch (IllegalArgumentException e)
        {
            System.out.println("Usage: java MQWrite <-h host> <-p port> <-c channel> <-m QueueManagerName> <-q QueueName>");
            System.exit(1);
        }
        catch (MQException e)
        {
            System.out.println(e);
            System.exit(1);
        }
    }

    private void selectQMgr() throws MQException
    {
      _queueManager = new MQQueueManager(qManager);
    }    

    private void write() throws MQException{
     String line;
     int lineNum=0;
     int openOptions = MQC.MQOO_OUTPUT + MQC.MQOO_FAIL_IF_QUIESCING;

     try {
         MQQueue queue = _queueManager.accessQueue( outputQName,
                 openOptions,
                 null,           // default q manager
                 null,           // no dynamic q name
                 null );         // no alternate user id

         DataInputStream input = new DataInputStream(System.in);

         System.out.println("MQWrite v1.0 connected");
         System.out.println("and ready for input, terminate with ^Z\n\n");

         // Define a simple MQ message, and write some text in UTF format..
         MQMessage sendmsg               = new MQMessage();
         sendmsg.format                  = MQC.MQFMT_STRING;
         sendmsg.feedback                = MQC.MQFB_NONE;
         sendmsg.messageType             = MQC.MQMT_DATAGRAM;
         sendmsg.replyToQueueName        = "ROGER.QUEUE";
         sendmsg.replyToQueueManagerName = qManager;

         MQPutMessageOptions pmo = new MQPutMessageOptions();  // accept the defaults, same
                                 // as MQPMO_DEFAULT constant
         while ((line = input.readLine()) != null){
             sendmsg.clearMessage();
             sendmsg.messageId     = MQC.MQMI_NONE;
             sendmsg.correlationId = MQC.MQCI_NONE;
             sendmsg.writeString(line);
             // put the message on the queue
             queue.put(sendmsg, pmo);
             System.out.println(++lineNum + ": " + line);
         }

         queue.close();
         _queueManager.disconnect();

        }catch (com.ibm.mq.MQException mqex){
            System.out.println(mqex);
        }
        catch (java.io.IOException ioex){
            System.out.println("An MQ IO error occurred : " + ioex);
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:46:38.020

对于您的第一个问题，是的，您可以在 UNIX 主机上运行队列管理器，由运行在 Windows 主机上的客户端访问该队列管理器。

对于您的第二个问题，mqjbnd05 库仅用于以绑定模式连接到队列管理器（即，当队列管理器和访问队列的程序位于同一主机上时），而不是 MQ 客户端安装的一部分。有关更多详细信息，请参阅[http://www-01.ibm.com/support/docview.wss?uid=swg21158430](http://www-01.ibm.com/support/docview.wss?uid=swg21158430)。查看您的代码，我可以看到该`init()`函数正在指定，`MQC.TRANSPORT_MQSERIES_CLIENT`尽管我看不到该`init()`函数正在被调用。此外，可能值得检查是否在库路径中指定了 mqjbnd05，如果是，则将其删除。

虽然可能与您获得的错误无关，但可能值得检查的另一件事是该通道`MQTX1012.MQTX1013`是服务器连接通道，而不是发送方或接收方通道。

# asp.net - 带有约会查看器的剑道日历

> ID：16031246
> 
> 赞同：0
> 
> 时间：2013-04-16T07:34:47.383
> 
> 标签：asp.net, calendar, kendo-asp.net-mvc

嗨，有什么方法可以在 Kendo 日历控件中显示所选日期的约会？

例如，如果我在 1 月 1 日有约会，我的日历应该会显示一条消息以及日期（在同一个剑道日历控件中）。剩下的日期只是正常的风格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:14:19.153

您可以通过在声明日历时定义模板函数来在每个日期显示自定义内容。将为日历中显示的每个日期调用此函数。以下示例显示了如何执行此操作：

```
// Define dates that have appointments
var calDates = [];
calDates[+new Date(2013, 0, 1)] = [{ Description: "Appointment foo", Time: "09:00"}];
calDates[+new Date(2013, 0, 2)] = [{ Description: "Appointment bar", Time: "10:00" }, { Description: "Appointment baz", Time: "12:00"}];

// Declare Kendo Calendar
$("#div1").kendoCalendar({ "value": new Date(2013, 0, 1, 0, 0, 0, 0), "month": { "content": "#= BuildDateMarker(data) #"} });

// Template function
function BuildDateMarker(data) {

    // Get any appointments for this date       
    var appointments = calDates[+data.date];

    if (!appointments || appointments == 'undefined') {
        // No appointments for this date, so return default marker (day of the month)
        return data.date.getDate();
    }

    // Open marker
    var marker = '<div class="appointments" title="' + data.date + '">';

    // Add item for each of this date's appointments
    for (var i = 0; i < appointments.length; i++) {
        var appointment = appointments[i];
        marker += '<span class="appointment">' + appointment.Description + ', at ' + appointment.Time + '</span>';
    }

    // Close marker
    marker += '</div>';

    return marker;
} 
```

# jquery - 使用 JQueryUI 初始化工具提示

> ID：16031247
> 
> 赞同：3
> 
> 时间：2013-04-16T07:34:48.293
> 
> 标签：jquery, jquery-ui, jquery-ui-tooltip

HTML：

```
<input type='text' id='uname' /> 
```

JS：

```
$( "#uname" ).tooltip({ content: "gggg" }); 
```

结果：什么都没有。没有工具提示，没有错误；这里有什么问题？

演示：http: [//jsfiddle.net/w97FA/](http://jsfiddle.net/w97FA/)

这些是我使用的资源/插件：

*   [http://jqueryui.com/tooltip/](http://jqueryui.com/tooltip/)
*   [http://api.jqueryui.com/tooltip/#option-content](http://api.jqueryui.com/tooltip/#option-content)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T07:39:40.460

工具提示作为标题放置：

```
<input type='text' id='uname' title="gggg" /> 
```

[http://jsfiddle.net/samliew/w97FA/2/](http://jsfiddle.net/samliew/w97FA/2/)

否则，您必须使用空标题初始化元素，以便动态设置它：

```
<input type='text' id='uname' title='' /> 
```

[http://jsfiddle.net/samliew/w97FA/8/](http://jsfiddle.net/samliew/w97FA/8/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T07:44:26.593

正如工具提示的[API 文档](http://api.jqueryui.com/tooltip/#option-content)所述，如果您使用“内容”选项，则还需要使用项目选项——因此以下代码有效：

```
$('#uname').tooltip({ content: "Awesome title!", "items":"input" }) 
```

但是，如果您不需要显示内容的特定逻辑或一些复杂的选择，则 title-attribute 的使用可能会更简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-10T05:14:33.313

```
 <script src="js/tooltips.js"></script>
   <script>
       $(function () {
           $("#page-wrap a[title]").tooltips();
       });
   </script> 
```

在 ASP.NET WEB APPLICATION 中使用带有 CSS 的 JQUERY TOOLTIP。这里我们也可以使用 css 来定义工具提示的样式。完整示例 [检查这里][1]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-04T22:42:47.657

我知道这篇文章很旧，但我认为这可能会对遇到类似问题的人有所帮助。我一直在浏览一些使用工具提示的旧代码，当您最初将鼠标悬停在指定元素上时它们没有呈现。我尝试了很多不同的解决方案，但无法正确渲染。我终于找到了对我有用的解决方案，即在空白标题属性中简单地添加一个空格。一旦我这样做了，一切都会按预期进行：

```
//get all elements with classname tooltip
var toolTipElements = document.getElementsByClassName('tooltip');

//initialize tool tips using classname
if(toolTipElements){
  [].forEach.call(toolTipElements, function(element){  
    $(element).tooltip({
      items: 'input',
      show: false,
      hide: false,
      track: true,
    });

    //add mouseover event listener to element that is supposed to display tool tip
    element.addEventListener('mouseover', function(){
      renderToolTip(element, true);    
    });
  });  
}

//render tool tip with message
function renderToolTip(element, withTracking){
  $(element).tooltip({
        items: 'input',
        show: false,
        hide: false,
        track: withTracking,
        content: function(callback){
          var toolTipMessage = 'Hello From ' + element.id +' Tool Tip!';          
          callback(toolTipMessage);
        }
    });
}
```

```
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<link href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet"/>

<div>
  <input id="inputElementWithOutSpace" class="tooltip" title=""/>
</div>
<div style='padding-top:12px;'>
  <input id="inputElementWithSpace" class="tooltip" title=" "/>
</div>
```

# c# - 文件 C# 的 IO 读取

> ID：16031249
> 
> 赞同：1
> 
> 时间：2013-04-16T07:34:53.637
> 
> 标签：c#, file-io

我正在从指定路径读取所有文件（大约 3000 个文件，大小为 50 GB），一次读取 4k 字节。下面是相同的代码。我的查询是当我在任务管理器中看到应用程序的 CPU 和内存时，我可以看到 IO 读取逐渐增加到高水平，我可以理解这可能是因为 4k 读取，但这会影响其他事情或其ok 增加IO Read。FileStream 是否也是读取文件的最佳方式，因为它不会将整个文件加载到内存中？

```
fileStream = new FileStream(filePath, FileMode.Open, FileAccess.Read)

do
{
   BytesRead = fileStream.Read(Buffer, 0, MAX_BUFFER);
}
while (BytesRead != 0);

fileStream.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:42:56.070

检查[Hans Passant](https://stackoverflow.com/a/3034155/395659)对这个问题的回答，我觉得很清楚。

> 文件已被文件系统缓存缓冲，您只需要选择一个不会强制 FileStream 使本机 Windows ReadFile() API 调用过于频繁地填充缓冲区的缓冲区大小。不要低于 1 KB，超过 16 KB 会浪费内存。

也看看[这篇文章](https://stackoverflow.com/a/1863359/395659)，它提供了一些基准测试代码。

# php - android中的安全http调用

> ID：16031252
> 
> 赞同：0
> 
> 时间：2013-04-16T07:35:05.673
> 
> 标签：php, android, security, http

每次我从我的应用程序触发时如何保护 http 调用，并且它需要超时，以便任何其他用户无法从任何浏览器使用相同的链接。

我特别在寻找 android 解决方案，而不是 html 表单。

请帮帮我。无法解决此问题，也不知道该往哪个方向进行。

提前致谢。

我附上了 PHP 和 Android 的代码，它们发布请求并返回响应，但没有附加安全性，任何用户都可以通过随时从浏览器调用相同的 HTTP 响应来获得相同的响应......

安卓代码：

```
public class CustomizedListView extends Activity {
    // All static variables
    static final String URL = "http://example.com/getmsgs/strno=123";
    // XML node keys
    static final String KEY_SONG = "song"; // parent node
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_ARTIST = "artist";
    static final String KEY_DURATION = "duration";
    static final String KEY_THUMB_URL = "thumb_url";

    ListView list;
    LazyAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        JSONObject json = JSONfunctions.getJSONfromURL(URL);

        try {
            JSONObject arr2 = json.getJSONObject("feed");
            JSONArray arr = arr2.getJSONArray("entry");

            for (int i = 0; i < arr.length(); i++) {
                JSONObject e1 = arr.getJSONObject(i);

                JSONArray arr3 = e1.getJSONArray("im:image");

                JSONObject arr8 = e1.getJSONObject("im:name");

                JSONObject arr10 = e1.getJSONObject("im:artist");

                    JSONObject e12 = arr3.getJSONObject(0);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            map.put(KEY_THUMB_URL,  e12.getString("label"));

            map.put(KEY_ARTIST, arr8.getString("label"));
            map.put(KEY_TITLE, arr10.getString("label"));
            // adding HashList to ArrayList
            songsList.add(map);
            }

        } catch (JSONException e) {
            // Log.e("log_tag", "Error parsing data "+e.toString());
            Toast.makeText(getBaseContext(),
                    "Network communication error!", 5).show();
        }

        list=(ListView)findViewById(R.id.list);

        // Getting adapter by passing xml data ArrayList
        adapter=new LazyAdapter(this, songsList);        
        list.setAdapter(adapter);

        // Click event for single list row
        list.setOnItemClickListener(new OnItemClickListener() {

            @SuppressWarnings("unchecked")
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                HashMap<String, String> o = (HashMap<String, String>) list.getItemAtPosition(position);
                Toast.makeText(CustomizedListView.this, "ID '" + o.get("KEY_TITLE") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

            }
        });     
    }   
} 
```

PHP代码：

```
<?php

    $strno=$_GET['strno'];

    if (isset($strno))
    {
            $connect=mysql_connect("localhost","test","test") or die ('Connection error!!!');
            mysql_select_db("test") or die ('Database error!!!');

        $query=mysql_query("select sno FROM users  where strno='$strno';");
        while($row = mysql_fetch_assoc($query))

        {
            $jsonoutput='{"json":{
                "image":"'.$row['image'].'",
"artist":"'.$row['artist'].'",
"name":"'.$row['name'].'"
                }}';
        }

    }

    echo trim($jsonoutput);
    mysql_close($connect) or die ('Unable to close connection-error!!!');
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:06:22.360

尝试根据您的要求添加一些参数，例如时间

```
http://example.com/getmsgs/strno=123&time=20130416130256&key=.... 
```

但

```
key = md5('20130416130256' + 'secret_string'); 
```

'secret_string' 是您的应用程序和服务器的秘密，第一个字符串的格式为 gmt 时间（年月日时分秒）

在服务器端你可以测试时间（它必须像服务器时间）和测试密钥（它必须是正确的 md5）

在服务器端它可以是这样的：

```
$strno = $_GET['strno'];
$stime = $_GET['time'];
$secret = 'secret_string';
$skey = $_GET['key'];

if( md5($stime . $secret) != $skey ) {
    die('Bad key');
}

$nCurTime = (int) gmdate('YmdHis');
if( ($stime > $nCurTime) || ($stime < ($nCurTime - 20) ) ) {
    die('Bad time');
}

// your code here ... 
```

但我不知道如何使用函数 md5 和获取时间

* * *

添加：

一些谷歌搜索（[android md5](https://www.google.ru/webhp?q=android%20md5)）给出 md5()：

```
public static final String md5(final String s) {
try {
    // Create MD5 Hash
    MessageDigest digest = java.security.MessageDigest
            .getInstance("MD5");
    digest.update(s.getBytes());
    byte messageDigest[] = digest.digest();

    // Create Hex String
    StringBuffer hexString = new StringBuffer();
    for (int i = 0; i < messageDigest.length; i++) {
        String h = Integer.toHexString(0xFF & messageDigest[i]);
        while (h.length() < 2)
            h = "0" + h;
        hexString.append(h);
    }
    return hexString.toString();

} catch (NoSuchAlgorithmException e) {
    e.printStackTrace();
}
return "";
} 
```

并获取 GMT 时间[使用 Android 获取 GMT 时间](https://stackoverflow.com/questions/6014903/getting-gmt-time-with-android)

# c# - 无法将 winform 控件大小传递给非托管代码

> ID：16031253
> 
> 赞同：8
> 
> 时间：2013-04-16T07:35:06.410
> 
> 标签：c#, c++, winforms, mfc

我使用非托管库从 IP 摄像机获取视频流。有功能：

```
[DllImport("client.dll", EntryPoint = "Network_ClientStartLive", SetLastError = true)]
protected static extern int Network_ClientStartLive(
        ref IntPtr pStream,
        IntPtr hDev,
        IntPtr pClientInfo,
        [MarshalAs(UnmanagedType.FunctionPtr)] ReadDatacbf lpfnCallbackFunc = null,
        UInt32 dwUserData = 0
    ); 
```

`pClientInfo`是指向结构类型的指针：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
protected struct LiveConnect
{
    public UInt32 dwChannel;
    public IntPtr hPlayWnd;
    public UInt32 dwConnectMode;
} 
```

where`hPlayWnd`是必须输出视频流的窗口句柄。该库通过此窗口的大小检测视频分辨率（在调用期间`Network_ClientStartLive`）。我在 C++ MFC 程序上检查了它，输出窗口在哪里，`Picture control`并通过使用方法设置大小来`MoveWindow`定义输出视频分辨率。

在这个程序的 C# 版本中，我使用`PictureBox`-control 来绘制视频流。视频显示，但大小`PictureBox`不影响视频流分辨率。我尝试了几种方法来改变`PictureBox`大小：

1.  环境 `pictureBox.Size`
2.  使用 WinAPI `SetWindowPos`：

```
[DllImport("user32.dll")]
私有静态外部布尔 SetWindowPos(
    IntPtr hWnd,
    IntPtr hWndInsertAfter,
    整数 x,
    整数，
    整数宽度，
    整数高度，
    uint uFlags);

```

在这两种方法中，控件的大小都发生了变化，但相机库继续以最大分辨率输出视频流。

我怎么解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-27T14:38:56.517

Windows 窗体中的每个控件都有一个 SizeChanged ( [http://msdn.microsoft.com/en-us/library/system.windows.forms.control.sizechanged(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.sizechanged%28v=vs.110%29.aspx) ) 事件。也许可以在此事件处理程序中添加代码以手动更改视频分辨率？如果没有，您提供的 PictureBox 句柄可能不会发送 WM_SIZE 消息，这将是非托管库要查找的消息。正如其中一条评论中所提到的，Spy++（包含在 Visual Studio 中）将是一个有用的程序，用于监视消息并确保句柄值和事件符合您的预期。

# php - SELECT 查询以检查没有输入的重复项

> ID：16031255
> 
> 赞同：0
> 
> 时间：2013-04-16T07:35:08.517
> 
> 标签：php, mysql, database

这是我第一次`SELECT`在没有输入的情况下使用查询。我想检查一个表是否有重复项。结果，我只需要计算结果。

所以我有这个：

```
SELECT 
       `field a`, `field b`, `field c` 
FROM 
        table 
WHERE 
        `a` AND `b` AND `c` 
GROUP BY
    duplicates
HAVING
    COUNT(duplicates) > 1 
```

当结构如下时，这是否会检查表中的重复项：

```
field a |  field b  | field c
  a          b          c
  a          b          c
  d          e          f 
```

我怎样才能得到结果？它只是`num_rows`还是我从查询中得到一个整数作为结果？

通常我用`num_rows`这样的方式从查询中获取结果：

```
$query = $db->query("SELECT ...");
$result = $query->num_rows;
if ($result !== 0 ){do something} 
```

和结果之间通常应该存在差异，`num_rows`因为如果我要使用`num_rows`它来计数，它将返回`2`，因为 2 具有条件`a AND b AND c`，所以我认为上面的查询将`1`作为`1`找到重复项的结果返回。还是我错了？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:43:27.090

如果将具有相同 A、B 和 C 的两条记录定义为重复，则可以使用如下查询：

```
SELECT A, B, C, COUNT(*) counter
FROM `MYTABLE`
GROUP BY A,B,C
HAVING COUNT(*) > 1 
```

考虑到您的表格中有 3 个项目，例如您的问题，您的结果将是：

```
 A  |  B  |  C  | counter
 ---+-----+-----+--------
'a' | 'b' | 'c' | 2 
```

在 PHP 中获取结果：

```
while ($row = mysql_fetch_assoc($result)) {
    $a = $row['A'];
    $b = $row['B'];
    $c = $row['C'];
    $counter = $row['counter'];
    // Do something with your values
} 
```

请考虑使用 mysqli 或 PDO。一个好的起点：[mysqli 或 PDO](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:45:27.393

我不确定我是否完全理解这个问题，但是如果您想显示值和计数，其中存在多行且所有三个字段的值相同，您可能需要类似...

```
SELECT FIELD_A, FIELD_B, FIELD_C, COUNT(*)
    FROM MY_TABLE
    GROUP BY FIELD_A, FIELD_B, FIELD_C
    HAVING COUNT(*) > 1; 
```

# php - 为什么这个简单的 dom 不起作用？

> ID：16031259
> 
> 赞同：0
> 
> 时间：2013-04-16T07:35:13.330
> 
> 标签：php, simpledom

我正在尝试获取所有图像 src 并使用此代码重命名文件，但它似乎不起作用。

有任何想法吗 ？？

```
require_once('catalog/controller/forum/simple_html_dom.php');
$test = $data['description'];
$html = str_get_html($test);
foreach($html->find('img') as $element) {
$src = $element->src;
rename($src,$src.".jms");
} 
```

所有图像文件都是本地的，这是一个示例图像标记。

```
<img alt="Image" src="image/data/attaches/f7ff31f73f6d41f108ef31c01ea69228.png"> 
```

因此，我尝试将文件从该位置重命名为相同的位置，但将 .jms 添加到末尾。另外我不确定如何，但我想修改字符串中的所有图像标签，以便我可以使用 mysql update 命令将其放回修改。字符串 $data['description'] 不仅包含图像标签，还包含其他 html。它多种多样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:41:30.450

`rename()`只能用于服务器中的本地文件，无法重命名远程文件。

如果图像在您的服务器中，并且您可以知道来自 的真实路径`src`，那么您需要将 转换为`src`图像的真实路径。

# php - 在字符串中查找准确和相似的公司名称

> ID：16031263
> 
> 赞同：0
> 
> 时间：2013-04-16T07:35:24.840
> 
> 标签：php, preg-match

嗨，我现在尝试检查某家公司是否在一个字符串中。我正在与LinkedIn合作，因为我的公司来源不像LinkedIn那样，我在PHP中需要类似的搜索。

例子：

如果我从我的来源变成名字：

```
array("Company", "Company Inc.", "Company Inc"); 
```

所有 3 个字符串都应与公司匹配（真）

```
"Company" and "Company Inc." . 
```

因为我的一些朋友写了公司“Company”和其他“Company Inc.”。

解决方案应该是可行的，任何来源公司都可以从 LinkedIn 中找到这两者。

谢谢尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:50:35.413

PHP 为这种模糊字符串比较带来了一些函数。看看这些：

*   [声音（）](http://php.net/manual/de/function.soundex.php)
*   [编辑器（）](http://php.net/manual/de/function.soundex.php)
*   [变音器（）](http://www.php.net/manual/de/function.metaphone.php)
*   [类似文本（）](http://www.php.net/manual/de/function.similar-text.php)

# javascript - Javascript 代码样式执行器或检查器

> ID：16031266
> 
> 赞同：8
> 
> 时间：2013-04-16T07:35:36.607
> 
> 标签：javascript, coding-style, jslint, jshint

我正在开发一个使用特定 JavaScript 样式指南的项目。例如，if/else 语句如下所示：

```
if( condition ){
  // Bla bla
}
else {
  // Another bla bla
} 
```

我正在寻找的是一个工具，它可以让我根据特定的样式指南检查文件的语法。[JSHint](http://www.jshint.com/) / [JSLint](http://www.jslint.com/)不关注样式，[Closure Linter](https://developers.google.com/closure/utilities/)不可定制，[Uncrustify 会](http://uncrustify.sourceforge.net/)在没有警告的情况下重新格式化文件（并且不正式支持 Javascript）。

我能用这个程序得到的最好的输出是来自 Closure Linter 但有自定义规则的输出。[这个类似问题](https://stackoverflow.com/questions/395009/tools-to-enforce-a-coding-style-for-javascript)的答案都是错误的。

这样的工具存在吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-04T00:54:18.900

如果您仍在寻找答案，可以尝试一个名为[jscs](https://github.com/mdevils/node-jscs)的项目。
您可以自定义代码在几乎任何方面的外观，以及尚未开发的那些（例如函数参数间距）。

一切都可以通过`.jscsrc`文件进行定制；以下是我使用它的一个项目的示例：

```
{
    "requireCurlyBraces":                   [ "if", "else", "for", "while", "do", "switch" ],
    "requireSpaceAfterKeywords":            [ "if", "else", "for", "while", "do", "switch" ],
    "disallowSpaceAfterKeywords":           [],
    "requireSpacesInsideObjectBrackets":    "all",
    "disallowSpaceAfterObjectKeys":         true,
    "disallowImplicitTypeConversion":       [],
    "disallowKeywords":                     [ "with" ],
    // ...
} 
```

如果您正在使用 Grunt，请随意尝试我自己的 jscs 任务 - [grunt-jscs-checker](https://github.com/gustavohenke/grunt-jscs-checker)。

顺便说一句，[jQuery 团队](https://github.com/jquery/jquery-ui/blob/c462e66f5d2c3da30879e38649e81d34bb7d2587/package.json#L66) [正在使用 jscs](https://github.com/jquery/jquery/blob/5ce0b342577076a4355ba1bb0ad0aef98261f236/package.json#L38) :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T20:19:08.337

听起来你真的很喜欢[JavaScript 美化器](https://stackoverflow.com/questions/18985)。可以通过版本控制支持的“在文件上运行它并查看它们是否更改”来完成检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T19:03:18.330

没有符合您需求的工具。JSLint 正在应用 Crockford 建议（并强制执行）的样式规则，JSHint 更灵活，因为您可以选择更适合您的编码样式的规则，但不够灵活以强制执行任何类型的样式。

通常，您配置您的编辑器，以便它可以帮助您以您喜欢的代码的方式缩进和执行换行符。并使用 linter 来注意重要的地方（一些空白规则，如何使用括号……）。linter 的作用更多的是防止您的语言无法阻止您犯的愚蠢错误。

# java - 如何将 JSON 与图表引擎库连接起来

> ID：16031267
> 
> 赞同：0
> 
> 时间：2013-04-16T07:35:37.453
> 
> 标签：java, android, json, achartengine

我正在使用 achartEngine 在我的 android 应用程序中绘制折线图。我在代码中设置数据。现在我需要从 JSON 中获取数据并将其显示在我的图形中，但我不知道如何将我的 JSON 与 achartengine 连接并将其显示到折线图中。

这是我错误的源代码：

**解析json**

```
public class ErizaChartEngine extends Activity {
List NabList = new ArrayList();
boolean statuskoneksi= true;
private ProgressDialog Dialog;
protected Context context;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    new LineChartAsyncTask().execute();
    setContentView(R.layout.layoutchart);

}
    public class LineChartAsyncTask extends AsyncTask <String, String, String>{

        @Override
        protected void onPreExecute (){
            super.onPreExecute();
            Dialog=new ProgressDialog(ErizaChartEngine.this);
            Dialog.setMessage("Mohon Tunggu Sebentar...");
            Dialog.setIndeterminate(false);
            Dialog.setCancelable(true);
            Dialog.show();
        }

        @Override
        protected String doInBackground(String... params) {
            String url= "http://www.ab.com/NabChart.htm?id=03&nilai=10";
            try {
                JSONParser jp= new JSONParser();
                JSONArray ja= jp.takeJson(url);

                for (int i=0; i<ja.length();i++){
                    JSONObject jo = ja.getJSONObject(i);
                    HashMap<String, String> map = new HashMap<String, String>();
                    if (jo.has("lnu_nilai")) 
                        map.put("lnu_nilai", jo.get("lnu_nilai").toString());
                    if (jo.has("tanggal")) 
                        map.put("tanggal", jo.get("tanggal").toString());
                    NabList.add(map);
                    System.out.println("json parser done");
                }
            }
            catch (JSONException e) {
                    e.printStackTrace();
                }
                return null;
            }

        @Override
        protected void onPostExecute(String file_url) {
            Dialog.dismiss();
} 
```

这是我绘制图形的课程：

```
public void drawNABContentSimpleChart
    (
     String strtanggal,
     String strNilaiNABHMin0)
    {
        XYSeries nabseries = new XYSeries("nab");

        for (int i=0;i<NabList.size();i++){
            nabseries.add(strNilaiNABHMin0[i]);
        }
        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        // Adding Income Series to the dataset
        dataset.addSeries(nabseries);

        XYSeriesRenderer incomeRenderer = new XYSeriesRenderer();
        incomeRenderer.setColor(Color.WHITE);
        incomeRenderer.setPointStyle(PointStyle.CIRCLE);
        incomeRenderer.setFillPoints(true);
        incomeRenderer.setLineWidth(2);
        incomeRenderer.setDisplayChartValues(true);

        XYMultipleSeriesRenderer multiRenderer = new XYMultipleSeriesRenderer();
        multiRenderer.setXLabels(0);
        multiRenderer.setChartTitle("NAB 1 year");
        multiRenderer.setXTitle("Year 2012");
        multiRenderer.setYTitle("Nilai");
        multiRenderer.setZoomButtonsVisible(true);              
        for(int i=0;i<NabList.size();i++){
            multiRenderer.addXTextLabel(strtanggal[i]);         
        }       
        multiRenderer.addSeriesRenderer(incomeRenderer); 
```

// multiRenderer.addSeriesRenderer(expenseRenderer);

```
 // Creating an intent to plot line chart using dataset and multipleRenderer
        Intent intent = ChartFactory.getLineChartIntent(getBaseContext(), dataset, multiRenderer);

        // Start Activity
        startActivity(intent);
    } 
```

我真的需要帮助来解决我的问题，因为我的代码仍然错误而且我不知道如何解决它。有没有人可以帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:02:03.473

只需初始化图表内容（数据集、渲染器）并开始解析您的 json。将您从文件中读取的每个数据项添加到数据集中的系列中。完成后，显示图表。

# android - 如何在屏幕上居中显示 GridView

> ID：16031268
> 
> 赞同：2
> 
> 时间：2013-04-16T07:35:41.630
> 
> 标签：android

如何使 GridView 在屏幕上居中。我有 GridView，每行有 4 个项目作为 2 个项目。我尝试使用相对布局中的填充将 GridView 居中在相对布局中。但是我为多个屏幕开发了应用程序。所以我认为硬编码填充不是一个好习惯。如何在多个屏幕上将此网格视图居中？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/gridrelativelayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingTop="60dp"
    android:paddingBottom="60dp"
    android:paddingLeft="150dp"
    android:paddingRight="150dp"
    tools:context=".MainMenuActivity" >

    <GridView
        android:id="@+id/gridview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#F9F9F9"
        android:gravity="center"
        android:horizontalSpacing="50dp"
        android:numColumns="2"
        android:stretchMode="columnWidth"
        android:verticalSpacing="50dp"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" />

</RelativeLayout> 
```

**更新代码：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/gridrelativelayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingLeft="150dp"
    android:paddingRight="150dp"
    tools:context=".MainMenuActivity" >

    <GridView
        android:id="@+id/gridview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:columnWidth="20dp"
        android:background="#FF0000"
        android:gravity="center"
        android:horizontalSpacing="50dp"
        android:numColumns="2"
        android:verticalSpacing="50dp"
        android:layout_centerInParent = "true" 
       />

</RelativeLayout> 
```

此更新的代码正确地将 gridView 在屏幕上居中。但是请看，我在相对布局中对左广告右的填充进行了硬编码。由于我想支持多个屏幕，我想使用以下代码将此填充设为动态。但它不起作用。

```
RelativeLayout gridrelativelayout = (RelativeLayout)findViewById(R.id.gridrelativelayout);
        int pad=gridrelativelayout.getWidth()/3;
        gridrelativelayout.setPadding(pad, 0, pad, 0); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T08:27:23.363

申请`RelativeLayout`

```
 android:layout_width="match_parent"
 android:layout_height="match_parent" 
```

和对于`GridView`

```
android:layout_centerInParent = "true" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:47:30.463

如果想将最好的应用程序写入多个屏幕设备，那么您需要阅读以下内容：

[支持多屏](http://developer.android.com/guide/practices/screens_support.html)

它对您非常有用：

[支持不同的屏幕](http://developer.android.com/training/basics/supporting-devices/screens.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:41:58.033

用于. `android:layout_centerInParent = "true"`_ `GridView`这肯定有效...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-07T07:56:16.567

利用

`android:layout_centerHorizontal = "true"`

对于 GridView。

# html - 始终显示更大的边距

> ID：16031269
> 
> 赞同：3
> 
> 时间：2013-04-16T07:35:43.470
> 
> 标签：html, css, margins

我给了一个块 25px 的下边距和 10px 的上边距。总边距应为 35px，但显示为 25px。如果我给 35px 边距，那么它显示的总和为 35px。为什么总是显示更大的利润？

以下是代码行：

```
<p style="margin-bottom:25px; outline:1px dashed #000000;">aaaaaaaaaaaa</P>
<p style="margin-top:10px; outline:1px dashed #000000;">bbbbbbbbbbbbbbbb</p> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:29:02.560

它被称为“折叠边距”。这是正常的，符合 W3 标准。它说：

> *   根元素框的边距不会折叠。
> *   如果具有间隙的元素的上边距和下边距相邻，则其边距会与后续兄弟的相邻边距一起折叠，但生成的边距不会与父块的底部边距折叠。

**更多信息：**
[http ://www.w3.org/TR/CSS21/box.html#collapsing-margins](http://www.w3.org/TR/CSS21/box.html#collapsing-margins)

因此你的两个`<p>`标签：

```
<p style="margin-bottom:25px; outline:1px dashed #000000;">aaaaaaaaaaaa</p>
<p style="margin-top:10px; outline:1px dashed #000000;">bbbbbbbbbbbbbbbb</p> 
```

然后会崩溃。

规范还提到了边距未折叠的情况。例如，浮动元素具有非折叠边距：

> 浮动框和任何其他框之间的边距不会折叠

还有一个演示折叠和非折叠边距的小提琴：

**小提琴： http:**
[//jsfiddle.net/k8tFy/3/](http://jsfiddle.net/k8tFy/3/)
*（注意：你甚至可以看到浮动`<p>`标签甚至与标签的`margin-bottom`交互`<h2>`）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T09:22:24.863

如果是短的，这就是利润应该如何运作。顶部和底部边距可能会塌陷，在这种情况下，两个块之间的最终距离将等于最大边距的宽度。

有关更多详细信息，请查看 CSS 标准的这一部分：http: [//www.w3.org/TR/CSS2/box.html#collapsing-margins](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)

> 当两个或多个边距折叠时，产生的边距宽度是折叠边距宽度的最大值。

可能的解决方案：您可以简单地将顶部元素的 margin-bottom 设置为 35px，就像您描述的那样。

另一种方法是使一个元素浮动：

```
<p style="margin-bottom:25px; outline:1px dashed #000000;clear:both;">aaaaaaaaaaaa</P>
<p style="margin-top:10px; outline:1px dashed #000000;clear:both;float:left;width:100%">bbbbbbbbbbbbbbbb</p> 
```

[演示](http://jsfiddle.net/YzWrF/)

以上解决方案基于您可能在上面链接的页面上找到的下一个异常：

> 浮动框和任何其他框之间的边距不会塌陷（甚至在浮动框与其流入的子代之间也不会塌陷）。

# properties - 如何在 wso2 ESB 中全局设置属性

> ID：16031278
> 
> 赞同：1
> 
> 时间：2013-04-16T07:36:14.027
> 
> 标签：properties, wso2, wso2esb, session-management

我试图弄清楚如何在 wso2 esb 中实现会话管理。所以我编写了一个类调解器，它生成我想要存储的 session_ID。为了存储会话 id，我使用以下代码：

```
org.apache.axis2.context.ServiceContext serviceContext = org.apache.axis2.context.MessageContext
            .getCurrentMessageContext().getServiceContext();
serviceContext.setProperty("SessionIDGlobal", uuid); 
```

但是在我的 esb 代理中运行它时，它会在 getCurrentMessageContext 部分引发空指针异常。我采用了另一种方法，我将 sessionID 存储在属性中介中并尝试获取它的值，但是当我在 try 的 generateSessionID 操作之后单击 postRequest 操作时-它。所有属性都被重置，我的 sessionID 属性给了我空值。我应该怎么做才能纠正这个问题？有没有替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:56:50.623

您必须像这样创建服务上下文；

```
ConfigurationContext cfgCtx =(((Axis2MessageContext) synCtx).getAxis2MessageContext(). getConfigurationContext();

cfgCtx.getOperationContext().getServiceContext(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:57:31.113

您应该存储在消息上下文中，但您已存储在服务上下文中。请参考this以了解如何在不同范围内设置属性。Synapase（默认）、Axis2、Transport 等。

有关完整的详细信息，请参阅此博客文章。 [http://blog.facilelogin.com/2011/02/wso2-esb-property-mediator-different.html](http://blog.facilelogin.com/2011/02/wso2-esb-property-mediator-different.html)

# google-chrome - 在将 HTML 页面转换为 PDF 或仅打印时，Google Chrome 使用什么库来删除不必要的内容？

> ID：16031287
> 
> 赞同：0
> 
> 时间：2013-04-16T07:36:30.540
> 
> 标签：google-chrome

当我们尝试在 Google Chrome 中打印文档时，它显示它是预览，没有任何广告和任何动态内容，例如可能已经存在的评论。

当我们将其保存为 PDF 时，它用于从 DOM 中删除多余的不必要的东西并将其转换为 PDf 是什么？

它是一个 C++ 库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-17T19:16:54.937

图书馆是pdfium，[https ://pdfium.googlesource.com/pdfium/+/master](https://pdfium.googlesource.com/pdfium/+/master)

这篇新闻文章很好地解释了这个库：

[http://www.infoq.com/news/2014/06/google-chrome-pdf-engine-free](http://www.infoq.com/news/2014/06/google-chrome-pdf-engine-free)

# javascript - 处理 onkeypress 事件问题

> ID：16031298
> 
> 赞同：-2
> 
> 时间：2013-04-16T07:37:11.533
> 
> 标签：javascript

此代码在 IE 中有效，但在 Chrome 中无效：

```
<input type="text" 
       name="txtFirstName"  
       class="txtbox" 
       onkeypress="charsCapsSpaceOnly()" 
       maxlength="30" 
       onpaste="return false" 
       autocomplete='off'> </td>

 function charsCapsSpaceOnly() {
     event.keyCode = event.keyCode - 32;
     if( ((event.keyCode >= 65 && event.keyCode <= 90)) || (event.keyCode == 32)) { 
         event.keyCode = event.keyCode;
     } else {
         event.keyCode=0;
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:53:25.093

这适用于 IE9 和 Chrome。

```
 function charsCapsSpaceOnly() 
 {
     if (!( ((event.keyCode >= 65 && event.keyCode <= 90)) || (event.keyCode == 32)) )
     {
         event.keyCode=0;            // For IE
         event.preventDefault();     // For chrome
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:50:37.023

如果你想获得密钥代码，你将不得不使用这个：

```
function (event){
    var keyCode = !event.charCode ? event.which : event.charCode,
    key = String.fromCharCode(keyCode);
    ....
} 
```

因为 IE 与其他浏览器不同（他们想要感觉特别 :)））

# blackberry-10 - 黑莓部署失败

> ID：16031301
> 
> 赞同：2
> 
> 时间：2013-04-16T07:37:22.267
> 
> 标签：blackberry-10, blackberry-qnx

我正在尝试从 QNX Momentics 运行我的应用程序并将其安装在我的 BlackBerry 10 Dev Alpha B 设备上。

出现以下错误

> 部署失败：信息：发送请求：安装和启动信息：操作：安装和启动信息：调试本机：on 信息：文件大小：954989 信息：安装 com.example.projectname.testDev_tertimelinee81dc35f ... 信息：处理 954989 字节实际名称： : actual_id:: actual_version:: result::failure 881 调试令牌签名无效

当我尝试运行该应用程序时，会出现两个选项。1\. 创建调试令牌（失败） 2\. 导入调试令牌（缺失）

任何想法我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T23:17:09.143

您收到的错误表明您的设备上没有安装有效的调试令牌。

在 Momentics 中`Preferences->BlackBerry->Signing`，检查您的调试令牌是否未过期并包含您的设备 PIN。如果无效，请单击`Create`，`Edit`或`Renew`。

现在单击`Upload`以将调试令牌上传到您的设备。还要确保您的设备具有正确的日期和时间，当其他一切看起来正常时，这是一个常见的问题。

您现在应该能够部署您的应用程序而不会收到该错误。

# asp.net-mvc-4 - 选择 div 失败

> ID：16031302
> 
> 赞同：0
> 
> 时间：2013-04-16T07:37:26.377
> 
> 标签：asp.net-mvc-4, html-agility-pack

我正在尝试解析以下信息`div class="base shortstory`：

```
 <div id="dle-content">
   <div class="base shortstory">
     <h3 class="btl"><a href="http://someurl.com/htc-jetstream.html">HTC Jetstream</a></h3>
   </div>
   <div class="base shortstory">
     <h3 class="btl"><a href="http://someurl.com/samsung.html">Samsung S4</a></h3>
   </div>
   <div class="base shortstory">
     <h3 class="btl"><a href="http://someurl.com/dell.html">Dell Streak</a></h3>
   </div>
 </div> 
```

这是代码

```
 const string url = "http://someurl.com/catalogue";
        const string rootUrl = "http://someurl.com";
        HtmlWeb hw = new HtmlWeb();
        HtmlDocument doc = hw.Load(url);
        int dealsCount = 0;
        HtmlNode root = doc.DocumentNode.SelectSingleNode("//div[@id='dle-content']");
        int i = 1;
        //this is for the default page
        while (i<=10)
        {
            try
            {
                string node= String.Format("//div[{0}]", i);
                var link =
                    doc.DocumentNode.SelectSingleNode(node);
                var href = link.SelectSingleNode("//div[@class='mlink']//span[@class='argmore']//a[@href]").Attributes["href"].Value;
                string title = link.SelectSingleNode("//h3[@class='btl']//a[@href]").InnerText.Trim();

                string description = link.SelectSingleNode("//div[@class='maincont']//div[1]").InnerText.Replace("\n", " ").Replace("\r", "").Replace("\t", "").Trim();
                description = RemoveHTMLComments(description);

                var imageURL = link.SelectSingleNode("//div[@class='maincont']//div[1]//a//img").Attributes["src"].Value;

                var price = link.SelectSingleNode("//div[@class='mlink']//span[3]//font").InnerText.Trim();
                price = Regex.Match(price, @"\d+").Value;

                var partnerdealID = href;

                //no information 

                var isActivesStr = link.SelectSingleNode("//div[@class='mlink']//span[2]/font").InnerText.Trim();
                bool isActive;
                if (isActivesStr.Contains("Нет в наличии"))
                {
                    isActive = false;
                }
                else
                {
                    isActive = true;
                }
                var dealUrl = href; //requires login - show the page itself

            }
            catch (Exception)
            {
            }
            i += 1;
        } 
```

但是在循环之后，选定的节点仍然是第一个。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:09:56.490

您所有的 XPATH 表达式都以 '//' 开头，这意味着“从文档的根目录开始并递归搜索”。所以当你这样做时：

```
link.SelectSingleNode("//div[@class='mlink']//span[@class='argmore']//a[@href]") 
```

您将不是从 开始`link`，而是从文档的根目录开始。您可能想要这样做：

```
link.SelectSingleNode("div[@class='mlink']...etc...") 
```

这相当于

```
link.SelectSingleNode("./div[@class='mlink']...etc...") 
```

'。' 表示当前节点。'/' 表示只搜索直接子节点，而不是递归搜索。

# admob - 在 Android 中选择不同的标签后，如何显示具有不同广告 ID 的 Admob 广告？

> ID：16031303
> 
> 赞同：0
> 
> 时间：2013-04-16T07:37:30.950
> 
> 标签：admob, android-tabactivity

目前，我只使用一个广告 ID，并在 30 秒后使用线程刷新广告，因为它是一个双击广告，并在选择任何选项卡时显示相同的广告并在选项卡上方显示广告。我需要在选择每个标签时显示具有不同广告 ID 的广告。我有 4 个标签和 4 个广告 ID。当我点击第一个标签时，我需要显示来自第一个广告 ID 的广告，当我点击第二个标签时，广告应该来自第二个 ID，依此类推。此外，当单击新标签时，需要删除在单击前一个标签时显示的前一个广告，并且需要加载来自与当前标签相关的广告 ID 的广告。广告的刷新也需要在每个标签中相应地进行。您能否让我知道是否有任何方法可以实现这一目标？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:11:23.573

使用不同的广告 ID 需要不同的 AdView 实例。一种方法是拥有 4 个 AdView，并在所选选项卡更改时侦听 Android 的回调，以确定哪些广告应设置为 VISIBLE，哪些广告应设置为 NONE。您的刷新逻辑可以轮询当前选项卡，并刷新与该选项卡对应的 AdView。

# wcf - WCF：不使用 HTTP 的文件传输

> ID：16031306
> 
> 赞同：0
> 
> 时间：2013-04-16T07:37:42.317
> 
> 标签：wcf, file, transfer

美好的一天。

我对 WCF 完全陌生，我正在学习。

我只是想知道，通过直接从光盘而​​不是通过 http 获取文件来下载或上传文件的最佳方式是什么。

目前我正在使用 WCF 和 http 使用块方式，但是对于一组特定的文件，我需要以不同的方式进行操作。任何提示、帮助或链接都会对我有很大帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:42:31.097

当您传输大文件时最好使用“WCF服务+HTTP”，我们可以使用以下类型的绑定：

wsHttpBinding basicHttpBinding

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:47:18.943

您的客户居住在哪里？如果传输是在同一个网络内，你可以看看[这篇](http://www.codeproject.com/Articles/37057/File-Transfer-using-WCF-and-Socket)文章。否则，请在 MSDN 上查看[此信息。](http://msdn.microsoft.com/en-us/library/ms733742.aspx)

# android - Android和JSP通信错误

> ID：16031309
> 
> 赞同：0
> 
> 时间：2013-04-16T07:37:56.873
> 
> 标签：android, apache, jsp, http

我有这个 JSP，它只检查`username`and`password`和`"out.write"` `1`or`0`基于`true`or`false.`

```
 <%@ page import="java.io.*" %>    
    <%
        if(request.getParameter("username").equals("anas") && request.getParameter("password").equals("azeem"))
        {
            out.write("1");

        }
        else
            out.write("0");
    %> </br> 
```

现在我的android代码是这样的

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_agent_login);

        edit_username = (EditText) findViewById(R.id.edit_username);
        edit_password = (EditText) findViewById(R.id.edit_password);
        btn_login = (Button) findViewById(R.id.btnLogin);

        if (android.os.Build.VERSION.SDK_INT > 9) { // must add this code in
                            // order not to get the
                            // Exception while executing
                            // program
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                    .permitAll().build();
            StrictMode.setThreadPolicy(policy);
        }

        btn_login.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                username = edit_username.getText().toString();
                password = edit_password.getText().toString();

                Log.d(TAG, "Username:" + username);
                Log.d(TAG, "Password:" + password);

                try {
                    new Thread() {
                        public void run() {
                            try {
                                HttpClient client = new DefaultHttpClient();
                                HttpPost post = new HttpPost("http://10.0.2.2:8080/MyApp/login.jsp");
                                List<NameValuePair> pairs = new ArrayList<NameValuePair>(2);
                                pairs.add(new BasicNameValuePair("username",edit_username.getText().toString()));
                                pairs.add(new BasicNameValuePair("password",edit_password.getText().toString()));
                                post.setEntity(new UrlEncodedFormEntity(pairs));
                                HttpResponse response = client.execute(post);
                                HttpEntity httpEntity = response.getEntity();
                                xml = EntityUtils.toString(httpEntity);
                                Log.d("xml", ""+xml.length());   //To confirm anything is there in the "xml"
                            } catch (Exception e) {
                                e.printStackTrace();
                            }
                        }
                    }.start();

                } catch (Exception e) {
                    Log.d("xml", xml.toString());
                    Log.d("Server", e.toString());
                }

                try {
                    if (Integer.parseInt(String.valueOf(xml.charAt(10))) == 1) {  //****HERE*******
                        Toast.makeText(getApplicationContext(), "LoginSuccessful",Toast.LENGTH_SHORT).show();
                        Intent intent = new Intent(Agent_Login.this,AgentHome.class);
                        startActivity(intent);
                    } else {
                        Toast.makeText(getApplicationContext(),"Invalid Username or Password", Toast.LENGTH_SHORT).show();
                        edit_password.setText("");
                    }
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });

    } 
```

现在在这里（在评论中）给出了一个`NullPointerException`，我认为这是因为它`xml`是空的。

所以，我的问题是如何从 Android 中的 JSP 获得回复。我在 PC 上使用 HTML 表单对其进行了测试，它工作得非常好。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:50:03.043

1.  一个变量已命名`xml`，但据我所知，它可能不包含任何 XML；您正在返回 HTML。
2.  为什么会`1`位于返回字符串中的第 10 位？
3.  您正在记录`xml`; 它的价值是什么？

# c - 直方图进入无限循环

> ID：16031312
> 
> 赞同：0
> 
> 时间：2013-04-16T07:38:00.400
> 
> 标签：c, structure, histogram

嗨，我这里有这段代码

```
int calMode(RECORD list[], int count)
{
    int tempMode = 1;
    int i = 1, j, k;
    int current = 0;

  while ( i <= count)
  {
       k = 1;
       if (list[current].score == list[current + i].score)
       {
          k++;
          i++;
       }
       printf("%d:", list[current].score);
       for(j = 0; j <= k ; j++)
       {
            printf("*");
       }
       printf("\n");
       current = current + k;
           i++;
  } 
   return tempMode;
} 
```

我以为代码的逻辑没问题，为什么会进入无限循环？

任何人都可以提出解决此代码的方法吗？并且假设在进入函数calMode之前对数据列表进行了排序，我认为for循环有问题

我编辑了代码知道我的输出是

```
60
66
71
71
72
75
79
82
82
82
91
size is: 12
73.50
60:**
66:*
71:*
71:*
72:*
75:*
79:*
82:*
82:*
82:*
91:* 
```

输出错误但不再处于无限循环中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:39:31.043

```
 if (list[current].score == list[i].score)
 {
     k++;
     i++;
 } 
```

如果这个测试是错误的，`i`将永远不会增加，这里是无限循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:27:35.263

修复例如

```
int calMode(RECORD list[], int count){
    int tempMode = 1;
    int i, k;
    int current = 0;

    while (current < count){
        printf("%d:", list[current].score);
        for(k=0; (i=current + k) < count ; ++k){
            if(list[current].score == list[i].score)
                printf("*");
            else 
                break;
        }
        printf("\n");
        current = current + k;
    } 
   return tempMode;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:58:11.537

根据您的代码，如果第 0 个元素和第一个元素的分数不相等，它将进入无限循环。我认为一些增量条件也应该在 if 语句之外。[我不知道你的逻辑，这只是一个猜测]

# makefile - 在 tcsh 中使用 makefile 变量

> ID：16031313
> 
> 赞同：1
> 
> 时间：2013-04-16T07:38:00.693
> 
> 标签：makefile, tcsh

我创建了一个`tcsh`脚本，我想通过`Makefile`环境调用它。因此，我想在这个 tcsh 脚本中引用我在`Makefile`环境中定义的变量。我尝试将环境变量引用为`$?VARIABLE`，但这不适用于`Makefile`环境中的变量。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:57:37.623

`$$`如果要在命令中使用，任何美元符号都需要在 make 规则中表示为 a 。请注意，[在 tcsh 中编程是非常不明智的](http://www.faqs.org/faqs/unix-faq/shell/csh-whynot/)。此外，make 用于`/bin/sh`执行命令，因此您不能在 make 规则中使用 tcsh 语法。

如果必须的话，你所能做的就是做一些事情

```
 MAKEVAR = foo
 target:
       tcsh -c 'echo $$HOME $(MAKEVAR)' 
```

其他人所做的是

```
 MAKEVAR    = foo
 ANOTHERVAR = bar
 target:
       MAKEVAR=$(MAKEVAR) ANOTHERVAR=$(ANOTHERVAR) script.sh 
```

这适用于所有`make`版本，而不仅仅是 GNU make。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:01:28.680

如果你使用 GNU make，[你需要`export`变量](http://www.gnu.org/software/make/manual/html_node/Environment.html).

# android - 如何在 Android 的 CalenderView 中获取选定日期？

> ID：16031314
> 
> 赞同：4
> 
> 时间：2013-04-16T07:38:04.833
> 
> 标签：android, mobile

```
Calendar date = Calendar.getInstance();     
SimpleDateFormat sdf = new SimpleDateFormat("yy-MM-dd");

curDate = sdf.format(date.getTime()); 
```

我已经在 onCreate 方法中完成了上面的代码。但它只能返回当前日期。我想要的是**在日历中选择日期**。

```
<CalendarView
      android:id="@+id/calendarView1"
      android:layout_width="match_parent"
      android:layout_height="match_parent" /> 
```

*请帮我*

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-16T07:59:10.727

我用`CalendarView`而不是日历，它现在正在工作。

```
calendarView.setOnDateChangeListener(new OnDateChangeListener() {

                @Override
                public void onSelectedDayChange(CalendarView view, int year, int month,
                        int dayOfMonth) {
                    curDate = String.valueOf(dayOfMonth);
                }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-10T12:36:50.547

您可以像这样使用日历视图获取选定日期...

CalendarView calendarView=view.findViewById(R.id.calendarView);

```
 calendarView.setOnDateChangeListener(new CalendarView.OnDateChangeListener() {

        @Override
        public void onSelectedDayChange(CalendarView view, int year, int month,
                                        int dayOfMonth) {
          String  curDate = String.valueOf(dayOfMonth);
          String  Year = String.valueOf(year);
          String  Month = String.valueOf(month);

            Log.e("date",Year+"/"+Month+"/"+curDate);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-05T08:16:42.300

**`Kotlin`获取选定日期的示例代码`CalenderView`：**

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <CalendarView
        android:id="@+id/calendar_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/button"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Toast Selected Date" />

</LinearLayout> 
```

**MainActivity.kt**

```
import android.os.Bundle
import android.text.format.DateFormat
import android.util.Log
import android.widget.CalendarView
import android.widget.Toast
import androidx.appcompat.app.AppCompatActivity
import com.example.testandcheck.databinding.ActivityMainBinding
import java.util.*

class MainActivity : AppCompatActivity() {

private lateinit var binding: ActivityMainBinding   // Binding object for ViewBinding.

override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    binding = ActivityMainBinding.inflate(layoutInflater)
    setContentView(binding.root)

    // Set date change listener on calenderView.
    // Callback notified when user select a date from CalenderView on UI.
    binding.calendarView.setOnDateChangeListener { calView: CalendarView, year: Int, month: Int, dayOfMonth: Int ->

        // Create calender object with which will have system date time.
        val calender: Calendar = Calendar.getInstance()

        // Set attributes in calender object as per selected date.
        calender.set(year, month, dayOfMonth)

        // Now set calenderView with this calender object to highlight selected date on UI.
        calView.setDate(calender.timeInMillis, true, true)
        Log.d("SelectedDate", "$dayOfMonth/${month + 1}/$year")
    }

    // Example button to show get selected date from CalenderView and show in Toast.
    binding.button.setOnClickListener {

        // Fetch long milliseconds from calenderView.
        val dateMillis: Long = binding.calendarView.date

        // Create Date object from milliseconds.
        val date: Date = Date(dateMillis)

        // Get Date values and created formatted string date to show in Toast.
        val selectedDayOfWeek = DateFormat.format("EEEE", date) as String // Monday
        val selectedDay = DateFormat.format("dd", date) as String // 05
        val selectedMonthString = DateFormat.format("MMM", date) as String // Jul
        val selectedMonthNumber = DateFormat.format("MM", date) as String // 6 --> Month Code as Jan = 0 till Dec = 11.
        val selectedYear = DateFormat.format("yyyy", date) as String // 2021

        val strFormattedSelectedDate = "$selectedDay-${selectedMonthNumber + 1}-$selectedYear ($selectedDayOfWeek)"
        Toast.makeText(applicationContext, "Selected Date = $strFormattedSelectedDate", Toast.LENGTH_SHORT).show()
    }
}

} 
```

**说明：**

1.  设置侦听器以设置所选日期`CalenderView`（同时突出显示新选择的日期并取消突出显示较旧的日期）。
2.  然后只调用`calenderView.date`以获取选定的日期。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T07:46:15.503

你试过 Calendar.get(Calendar.DATE)

检查链接[GetDate() 日历](http://developer.android.com/reference/java/util/Date.html#getDate%28%29)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-03-23T14:07:47.217

```
 final DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd");
    final DateFormat dateFormat_year = new SimpleDateFormat("yyyy");
    final DateFormat dateFormat_month = new SimpleDateFormat("MM");
    final DateFormat dateFormat_day = new SimpleDateFormat("dd");
    Calendar cal = Calendar.getInstance();

    System.out.println(dateFormat.format(cal.getTime()));
    System.out.println(dateFormat_year.format(cal.getTime()));
    System.out.println(dateFormat_month.format(cal.getTime()));
    System.out.println(dateFormat_day.format(cal.getTime())); 
```

# google-static-maps - 如何使用街景图像 API 获得质量更好的街景图像？

> ID：16031320
> 
> 赞同：0
> 
> 时间：2013-04-16T07:38:21.233
> 
> 标签：google-static-maps

我知道商业的“街景图像API”提供“2048x2048”大小的街景图像。

但是，我认为上述方法不能给我更好的街景图像质量，尽管尺寸可能会影响街景图像质量的一些改进。

您知道使用“街景图像 API”提高街景图像质量（或高分辨率）的更好方法吗？

提前感谢大家的评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:06:43.250

虽然某些 2048^2 图像可能会提供更好的图像质量（具有更高的分辨率和所有图像），但您应该记住，照片质量很大程度上取决于相机类型、相机设置、天气条件、压缩等。的因素。

改善图像在*某种程度上*是可能的，但您必须使用 Photoshop 之类的程序，即使那样您也不会得到真正质量更好的图像，只是被操纵以看起来更好。仅仅通过将 bool 设置为 true 来改进似乎是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-10T17:38:55.780

您将从业务 API 获得更高质量的图像，但您必须付费并告诉 Google 您在做什么。

# lua - 如何在 corona sdk 中转到上一个场景？

> ID：16031326
> 
> 赞同：2
> 
> 时间：2013-04-16T07:38:45.897
> 
> 标签：lua, coronasdk

基本上，如果用户在我希望将他们带到场景 1 之前从未玩过游戏，如果他们没有，我希望它把他们带到他们所在的上一个场景，我该怎么做。

我已经尝试了一段时间，这是我想出的代码，我确定它不应该是这样，但问题是我找不到答案，有什么帮助吗？谢谢！

```
 local function onSceneTouch( event )
    if event.phase == "ended" then
       scene = storyboard.getPrevious()
       if scene == "main" then
         storyboard.gotoScene( "scene1", "slideLeft", 500 ) else
         storyboard.gotoScene( --what goes here? previous scene?, "slideLeft", 500)
         return true
       end
    end
 end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:45:39.960

尝试这个

```
local previousScene=storyboard.getPrevious()
storyboard.gotoScene(previousScene) 
```

# c++ - 如何使用 Qwt/Qt 绘制离散数据集？

> ID：16031330
> 
> 赞同：2
> 
> 时间：2013-04-16T07:39:22.417
> 
> 标签：c++, qt, plot, qwt

MATLAB 中的[stem](http://www.mathworks.com/help/matlab/ref/stem.html) 命令绘制离散数据序列。

![干](https://i.stack.imgur.com/FIcWB.gif)

[Qwt](http://qwt.sourceforge.net/)中是否有任何等效的类/方法来实现类似的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:36:56.727

看看[QwtPlotHistogram](http://qwt.sourceforge.net/class_qwt_plot_histogram.html)和/或[QwtPlotBarChart](http://qwt.sourceforge.net/6.1/class_qwt_plot_bar_chart.html)。您可能必须继承并重新实现您想要实现的确切行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-20T12:44:00.110

我的回答为时已晚。但对于其他想要这样做的人，您可以使用[QwtPlotCurve](http://qwt.sourceforge.net/class_qwt_plot_curve.html#a15998aa80a11ba6ba80eebabaf773f70)并调用`setStyle(QwtPlotCurve::Steps)`or `setStyle(QwtPlotCurve::Sticks)`。

# php - 如何将一个php文件的变量用于另一个

> ID：16031332
> 
> 赞同：-5
> 
> 时间：2013-04-16T07:39:26.843
> 
> 标签：php

如何将一个php文件的变量用于另一个？

如果按下一个按钮，我试图增加数据库的计数变量，并在 php 中按下另一个按钮时减少。

非常急需回答。谢谢你...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:41:01.440

很紧急？比非常急用`$_SESSION`

像这样将值存储在会话中

```
$_SESSION['whatever'] = $value_holder; 
```

> 注意：不要忘记`session_start()`在您网站的最顶部使用，您还需要使用条件来增加该会话的减量值

# php - 如何使用jquery从外部php文件动态添加表行

> ID：16031341
> 
> 赞同：0
> 
> 时间：2013-04-16T07:40:01.027
> 
> 标签：php, jquery, mysql

嗨，我有一个表单，当用户单击添加按钮时，它会动态生成一个表行表格行它不附加任何表格行我尝试在控制台中检查我的数据。正在传输数据但不附加我的代码有什么问题吗？提前谢谢这里是我的脚本

```
 $(document).ready(function(){ 

        $('#addnew').click(function(){

            var ctr = $('#items').val();
            ctr++;
            $.post('purch_srch.php', {ctr : ctr}, function(data) {
                  $(data).appendTo('#detail');

                  $('#items').val(ctr);                        
            });
        });
    }); 
```

这是我的 php

```
<?php
session_start();
require("includes/dbconnect.php");
include ('includes/function.php');

$zdb = $_SESSION["zdbyear"];
mysql_select_db($zdb);

if ($_REQUEST["ctr"]){
    $ctr = $_REQUEST["ctr"];

    echo '<tr>';
    echo '<td align="center"><input type="text" size="6" maxlength="6" maxlength="6" name="ord_'.$ctr.'" class="form-input-oth"/></td>';
    echo "<td align='center'>";
    echo '<select data-placeholder="Party" style="width:120px;" name="item_'.$ctr.'" class="chzn-select-deselect" >';
    echo "<option value = '' ></option>";
    $get = mysql_query("SELECT * FROM accmast WHERE `grpcode`='010'") or die(mysql_error());
      while($cc = mysql_fetch_array($get)){
            echo "<option value='.$cc[accode].'/>$cc[name]</option>";
      }echo"</select>";
      echo "</td>";
    echo "</select></td>";
    echo '<td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="descrip_'.$ctr.'" class="form-input-name"/></td>';
    echo '<td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="unit_'.$ctr.'" class="form-input-rate"/></td>';
    echo '<td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="totqty_'.$ctr.'" class="qty form-input-rate"/></td>';
    echo '<td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="rate_'.$ctr.'" class="rate form-input-rate"/></td>';
    echo '<td align="center"><input type="text" size="6" maxlength="9" maxlength="6" name="amt_'.$ctr.'" class="cal  form-input-amt"/></td>';
    echo "</tr>";
    exit();
}
else{
    echo "ERROR";
} 
```

这是我的桌子

```
<table id="detail" border="1px" width="90%">
 </table>
<input type="button" id="addnew" class="classname" name="addnew" value="+" /> 
                          <input type="text" id="items" name="items" value="0" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:01:16.923

一个简单的解决方案：

```
$('#detail').append(data); 
```

在您的代码中，问题来自 $(data)。如果要生成 html 标签，请使用`$('<tr>').html(data)`，但您需要`<tr></tr>`从数据中删除标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:58:09.767

看这里：[http](http://api.jquery.com/load/) ://api.jquery.com/load/ 然后看这里：http: [//forum.jquery.com/topic/load-but-append-data-instead-of-replace](http://forum.jquery.com/topic/load-but-append-data-instead-of-replace)

以 Silex 为例。

返回源表的控制器。

```
$app->get(
'/table',
function () use ($app) {
    return '
        <table>
        <tr>
            <td>11</td>
            <td>12</td>
            <td>13</td>
        </tr>
        <tr>
            <td>21</td>
            <td>22</td>
            <td>23</td>
        </tr>
        <tr>
            <td>31</td>
            <td>32</td>
            <td>33</td>
        </tr>
        </table>
    ';
} 
```

);

我的目标表索引模板'/'：

```
<table>
    <tr>
        <td>a</td>
        <td>b</td>
        <td>c</td>
    </tr>
</table> 
```

和这里的jQuery（索引模板/）：

```
$(document).ready(function () {
        $('table').append($('<tr>').load('/table tr:last td'));
    }); 
```

结果是（来自萤火虫检查员的副本）：

```
<table>
    <tbody><tr>
        <td>a</td>
        <td>b</td>
        <td>c</td>
    </tr>
<tr><td>31</td><td>32</td><td>33</td></tr></tbody></table> 
```

# excel - 比较和总结excel中不相等的行数

> ID：16031347
> 
> 赞同：1
> 
> 时间：2013-04-16T07:40:21.270
> 
> 标签：excel, excel-2007

如何找到**Items**中所有值的 Column **Values**的总和。我使用了 sumproduct，但它有 N/A 错误，并且无法使用 sumifs 找到正确的解决方案。 **=SUMPRODUCT(--(A2:A5=Sheet6!A2:A7),Sheet6!B2:B7)**。同样在 sumproduct 我无法使用**范围 A:A**

 ******```
Items
a
b
c
d 
```

.

```
Items   Values
a   1
b   2
c   3
a   4
b   5
c   6 
```

结果应该是

```
a 5
b 7 
```

带有附加日期列的日期应介于**Date1 和 date2**之间：

```
Items   date1   date2
a   06-01-13    06-02-13
b   07-01-13    07-02-13
c   08-01-13    08-02-13
d   09-01-13    09-02-13

Items   Values  Date
a   1   01-01-13
b   2   02-01-13
c   3   03-01-13
a   4   19-01-13
b   5   20-01-13
c   6   21-01-13
a   7   22-01-13 
```

> =SUMPRODUCT((A2=Sheet13!A2:A8)*AND(B2<=Sheet13!C2:C8,Sheet12!C2>=Sheet13!C2:C8)*Sheet13!B2:B8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:44:44.267

试试这个（这在单元格 B2 中）

```
=SUMPRODUCT((Sheet6!$A$2:$A$7=A2)*(Sheet6!$B$2:$B$7)) 
```

更改`$7`为最后一行包含数据的内容。

**编辑**

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/5sVrH.png)******

# php - PHP代码在MySQL表中运行UPDATE而不返回超出范围的值

> ID：16031349
> 
> 赞同：0
> 
> 时间：2013-04-16T07:40:28.513
> 
> 标签：php, mysql

我有一点问题。我使用自动化的 Dreamweaver 编程功能并构建了一个表单，可以动态更新我的 MySQL 表中的“卷”列。这个“体积”列包含我必须从中减去的值。我已经能够用一个简单的方法进行减法

```
UPDATE offers SET volume=volume-%s 
```

它通过返回来工作：

> BIGINT UNSIGNED 值超出 '( `otcbb`. `offers`. `volume`- 2000)' 的范围

我很高兴。

问题是当我将这个脚本上传到我的托管服务器时，它的行为方式不同。当我在线运行查询时，它不会抛出任何错误并使用新值更新表列：4,294,967,295。

如何在线获得相同的结果？

在本地，我正在运行 MySql 版本 5.0.8-dev 并运行 MySql 版本 5.0.45。

我将不胜感激及时的答复。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:21:40.240

我猜你一开始就有volume = 0。4,294,967,295 是 2^32 - 1 所以你可能在某处有下溢。

# backbone.js - 在 Backbone.Model 中重置 Backbone.Collections

> ID：16031354
> 
> 赞同：1
> 
> 时间：2013-04-16T07:40:46.203
> 
> 标签：backbone.js

我有一个模型，它包含一个带有一些 Backbone.Collections 的默认对象。我不知道这是否是最优雅的解决方案，但它现在适合我的需要。但是，当创建模型的新实例时，不会重置集合，而是添加新模型。不应该自动重置默认值吗？我现在必须在初始化函数中设置 myCols。

```
var MyModel = Backbone.Model.extend({

    defaults: {
        'someProp': '',
         'myColls': {
            'first': new Backbone.Collection(),
            'second': new Backbone.Collection(),
            'third': new Backbone.Collection()
         }
    },

    initialize: function() {
        // This does reset myColls:
        this.set('myColls', {
            'first': new Backbone.Collection(),
            'second': new Backbone.Collection(),
            'third': new Backbone.Collection()
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:44:55.093

[正如关于Model.defaults](http://backbonejs.org/#Model-defaults)的 Backbone 文档中所说

> 请记住，在 JavaScript 中，对象是通过引用传递的，因此如果您包含一个对象作为默认值，它将在所有实例之间共享。相反，将默认值定义为函数。

所以，

```
var MyModel = Backbone.Model.extend({
    defaults: function() {
        return {
            'someProp': '',
            'myColls': {
                'first': new Backbone.Collection(),
                'second': new Backbone.Collection(),
                'third': new Backbone.Collection()
             }
        };
    },
    initialize: function() {
    }
}); 
```

# jquery - 使用 JQuery 将 a:hover 分配给动态加载的内容

> ID：16031355
> 
> 赞同：0
> 
> 时间：2013-04-16T07:40:48.390
> 
> 标签：jquery, css

我有一个使用加载内容的页面

`$('#header').load('head.html')`，但 head.html 中的链接无法使用我的 website.css，因为 website.css 加载较早或出于其他原因。

所以我想这个`$('a:hover').css('color','green');`但没有成功。

我可以用标签解决，但我不想这样做。

更新：

* * *

**base.html**

```
<script> 
    $('#header').load('/restaurant{{ chosenRest }}.html'); //chosenRest=1,2..etc
</script>

<div id="accordion">
<div id="header" >   </div></div> 
```

我有诸如 restaurant1.html、restaurant2.html 之类的文件

* * *

**restaurant1.html**

```
<a href="/Giorgio"> Giorgio's </a> 
```

* * *

**网站.css**

```
a:hover {color:green}; 
```

* * *

现在，如果我添加类似`<style> a:hover {color:green; } </style>`base.html 的**内容**，它可以工作，但我不想那样做。

**更新：终于解决了**

这里有什么工作：

**base.css**我添加了一个新类

```
.restaurant:a:hover {
      color:green;
} 
```

**restaurant1.html**

```
<a href="/Giorgio" class="restaurant"> Giorgio's </a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:52:32.850

`.on()`与`mouseenter`and事件一起使用`mouseleave`并委托事件：

```
$(document.body).on('mouseenter','a',function()
 {
  $(this).data("oldcolor",$(this).css('color')); //Store old color
  $(this).css('color','green');
 }).on('mouseleave','a',function()
 {
  $(this).css('color',$(this).data('oldcolor')); //retrieve old color
 }
) 
```

用于`data()`存储旧颜色

* * *

或者，您可以使用 vanilla JS 执行此操作：

```
 document.styleSheets[0].insertRule('a:hover { color: green; }', 0); 
```

或者，只是添加 `a:hover { color: green; }`到样式表，但您可能不想这样做（这将从一开始就存在，而通过 JS，您可以选择何时添加规则）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:29:20.393

当你 make 时， CSS可能**不会加载**`load`。只需添加`DOM ready`您的负载。

```
<script> 
$(function(){
    $('#header').load('/restaurant{{ chosenRest }}.html'); //chosenRest=1,2..etc
});
</script> 
```

# java - ArrayList 中的重复元素

> ID：16031357
> 
> 赞同：2
> 
> 时间：2013-04-16T07:41:05.843
> 
> 标签：java, arraylist

我有两个数组列表，一个是保存名称，另一个是保存数量。我想避免在数组列表中重复。名称数组列表包含名称，其对应的数量包含在数量数组列表中。

我的数组列表可以包含重复的名称，我想遍历数组列表以检查名称是否已存在，如果存在则将数量添加到前一个值并删除重复条目。

例如

```
Name     Quantity
ABC      20
xyz      10
ABC      15 
```

**需要输出**

```
Name    Quantity
ABC      35
XYZ      10 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:43:45.997

您应该使用 a`Map`代替，这将不允许重复条目。你使用它是这样的：

```
Map<String, Integer> nameToQuantityMap = new HashMap<String, Integer>():

nameToQuantityMap.put("Mr Smith", 100);
nameToQuantityMap.put("Mrs Jones", 500); 
```

**编辑：**既然您已经编辑了问题，答案就不同了。如果要添加重复键的值，则必须执行以下操作：

```
// For each (name, quantity) pair
if (nameToQuantityMap.containsKey(name) ) {
    Integer sum = nameToQuantityMap.get(name) + quantity;
    nameToQuantityMap.put(name, sum);
}
else {
        nameToQuantityMap.put(name, quantity);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:42:34.553

```
I want to avoid duplicate in the array list. 
```

在这种情况下使用[**HashSet**](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)

否则，如果您有 2 个并行 ArrayList，那么您可以使用**[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:43:55.100

您尝试表示的结构类似于应该由 a 表示的东西`Map`，它是结构的键 -> 值存储类型。拥有两个列表并尝试保持同步是一个坏主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T07:44:36.170

使用`java.util.Map`where key 是你的 map，value 是 value。

```
Map<String,Integer> map = new HashMap<>();
if(map.get(name)!=null){
    Integer oValue = map.get(name)+nNalue;
}else
   map.put(name,value); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T07:50:22.613

如果您想在 Key 已存在的情况下为先前的值添加值，请尝试此操作。

```
 public class Example {
    static Map<String, Integer> map = new HashMap<String, Integer>();

    public static void main(String[] args) {

        insertNameAndQuantity("A", 10);
        insertNameAndQuantity("B", 25);
        insertNameAndQuantity("A", 25);
        System.out.println(map);
    }

    public static void insertNameAndQuantity(String key, Integer value) {

        Integer count = map.get(key);
        if (count == null)
            map.put(key, value);
        else
            map.put(key, count + value);

    }
} 
```

输出：

```
{A=35, B=25} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T08:08:27.853

这是在 c# 代码上实现的示例。

```
public class temp
{
    [Test]
    public void T()
    {
        var list1 = new ArrayList(){"ABC", "xyz", "ABC"};
        var list2 = new ArrayList() {20, 10, 15};

        var nameList = new List<string>();
        var list1result = new ArrayList();
        var list2result = new ArrayList();

        int index = 0;
        foreach (string name in list1)
        {
            if (!nameList.Contains(name))
            {
                list1result.Add(name);
                var quantity = list2[index] ?? 0;
                list2result.Add(quantity);
                nameList.Add(name);
            }
            else
            {
                var index2 = 0;
                foreach (string name2 in list1result)
                {
                    if (name2 == name)
                    {
                        list2result[index2] = (int)list2result[index2] + (int)list2[index];
                    }
                    index2++;
                }
            }
            index++;
        }

        Assert.True(list1result.Count == 2, list1result.Count + " t1");
    }

} 
```

我已经测试了输出，它是正确的。

# c# - ASP.NET MVC 活动菜单项，所有项目都针对相同的操作

> ID：16031366
> 
> 赞同：0
> 
> 时间：2013-04-16T07:41:46.897
> 
> 标签：c#, asp.net-mvc, razor

我知道这个问题已经被问过很多次了，但我的情况与其他情况几乎没有什么不同。如果链接是指向当前位置的链接，我想要实现的只是突出显示菜单项。通过突出显示我的意思是我想将一个名为 current 的类附加到`<li>`包含链接的内容中。菜单位于主页面中，我通过从 Home Controller 的 Index 操作方法传递菜单项列表来动态填充该页面。

索引操作（主控制器）

```
public ActionResult Index(string city, string adtype)
    {
        if (city == null)
        {
            city = "abc";
        }

        if (adtype == null)
        {
            adtype = "jobs";
        }

        using (var _db = new UPContext())
        {
            var cities = _db.Cities.ToList();
            ViewBag.cities = cities;
        }

        var model = new List<AdPost>();

        using (var _db = new UPContext())
        {
            var cat = _db.AdTypes.Where(a => a.AdTypeName == adtype).SingleOrDefault();
            var adcity = _db.Cities.Where(c => c.CityName == city).SingleOrDefault();

            if ((cat != null) && (city != null))
            {
                model = (from p in _db.Posts
                         where p.City.Id == adcity.Id &&
                         p.AdType.Id == cat.Id
                         select p).ToList();
            }

            ViewBag.adType = adtype;
            ViewBag.City = city;
        }

        return View(model);

    } 
```

在 layout.cshtml 我使用 ViewBag.cities 填充菜单

```
@foreach (var c in ViewBag.cities)
    {

    <li> @Html.ActionLink((string)c.CityName, "Index","Home", new { city = c.CityName, adType="adtype" }, new { @class = "leftnav", data_id= c.Id })</li>
    } 
```

我已将路由配置为

```
 routes.MapRoute(
            name: "CityRoute",
            url: "{city}/{adtype}/",
            defaults: new { controller = "Home", action = "Index", city = UrlParameter.Optional, adtype=UrlParameter.Optional }
            ); 
```

我在网上看到的关于突出显示当前菜单项的所有其他解决方案都使用 HTML Helpers，它根据控制器和操作做出决定，但因为在我的情况下，所有链接都针对相同的控制器和操作，并且基于他们传递给方法的参数。我想知道如何突出显示当前菜单项。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:00:16.413

您可以在 viewbag 中传递实际的城市名称：

```
ViewBag.currentCity = city; 
```

并在视图中的 foreach 中检查当前城市：

```
@foreach (var c in ViewBag.cities)
{
    string cssClass = "leftnav";
    if(c.CityName == ViewBag.currentCity)
    {
        cssClass = "especialCurrentCityClass";
    }
    <li> @Html.ActionLink((string)c.CityName, "Index","Home", new { city = c.CityName,adType="adtype" }, new { @class = cssClass, data_id= c.Id })</li>
} 
```

这是您实际方法的最快方法，但我认为值得制作一个视图模型类来保存具有必要信息的菜单项以绘制整个菜单，这样您就可以保持视图的清洁。

# c# - Win7 Aero 主题中增加 DateTimePicker 日历的字体大小

> ID：16031370
> 
> 赞同：3
> 
> 时间：2013-04-16T07:42:12.733
> 
> 标签：c#, .net, windows

我想在Win7中更改日历控件的字体大小以使其与触摸屏兼容。我机器的主题是 Aero。`CalendarFont`属性对 Aero 主题没有任何影响。

所以我重写了 OnDropDown 方法来禁用日历控件的主题。现在字体已更改，但日历窗口大小未更改。下图显示了我看到的窗口![在此处输入图像描述](https://i.stack.imgur.com/Dbgsj.png)

代码如下。我应该怎么做才能增加日历窗口的大小？

```
 protected override void OnDropDown(EventArgs e)
    {

        IntPtr pointerToCalenderWindow = SendMessage(Handle, DtmGetmonthcal,0,0);
        // Disble Theme
        SetWindowTheme(pointerToCalenderWindow, "", "");      

        var rect = new Rectangle();
        SendMessage(pointerToCalenderWindow, McmGetminreqrect, 0, ref rect);     

        MoveWindow(pointerToCalenderWindow,0,0,rect.Right + 2, rect.Bottom + 2, true);

        base.OnDropDown(e);
    }

private const int McmFirst = 0x1000;
    private const int McmGetminreqrect = (McmFirst + 9);
    private const int McsWeeknumbers = 0x4;
    private const int DtmFirst = 0x1000;
    private const int DtmGetmonthcal = (DtmFirst + 8);

    private const int WMPAINT = 0x000F;

    [DllImport("uxtheme.dll")]
    private static extern int SetWindowTheme(IntPtr hWnd, string appname, string idlist);

    [DllImport("User32.dll")]
    private static extern IntPtr SendMessage(IntPtr h,
                                             int msg,
                                             int param,
                                             int data);

    [DllImport("User32.dll")]
    private static extern int MoveWindow(IntPtr h,
                                         int x,
                                         int y,
                                         int width,
                                         int height,
                                         bool repaint); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:02:32.317

看来[这个](https://stackoverflow.com/questions/14559074/setting-calendar-size-when-overriding-datetimepicker-to-add-week-numbers)问题和你的问题差不多：

答案表明实际上有两个窗口用于日历部分（一个“内部”和一个“外部”），并且您需要正确设置外部窗口的大小。

# c# - 解析器错误消息：未找到程序集 'Npgsql，版本 = 2.0.12.0，文化 = 中性，PublicKeyToken = 5d8b90d52f46fda7'

> ID：16031380
> 
> 赞同：0
> 
> 时间：2013-04-16T07:42:49.800
> 
> 标签：c#, web-services, mono, postgresql-8.4, linode

我正在尝试使用 Npgsql 从我部署在 Linode - Debain 6 上的 C# webservice 连接到 POSTGRESQL 数据库。我已将项目文件连同自动生成 Npgsql.dll 和 Mono.Security.dll 的 bin 转储到我的 server.I可以让一个简单的网络服务正常工作，但是当我尝试将 Npgsql 用于 POSTGRESQL 时，我遇到了一个问题。

下面是asmx代码：

```
using System;
using System.Web.Services;
using System.Xml;
using System.Xml.Serialization;
using System.Web.Services.Protocols;
using System.Web.Hosting;

using Npgsql;

namespace dbaseConnect_Service
{  

public class testservice
{

 [WebMethod]
 public int AddNumbers (int number1, int number2)
 {
    return number1 + number2;
 }

 [WebMethod]
 public int SubtractNumbers (int number1, int number2)
 {
     return number1 - number2;
 }

}

} 
```

我相信有一个 @ /usr/lib/mono/2.0/Npgsql.dll 我应该改用它吗？我如何让这个工作？有什么办法可以添加参考吗？我也尝试在 Web 配置中添加程序集。

错误消息：解析器错误消息：未找到程序集“Npgsql，版本=2.0.12.0，文化=中性，PublicKeyToken=5d8b90d52f46fda7”

PS：这在我的本地 Windows 机器上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:12:55.583

固定的！我不得不创建一个根 bin 文件夹并将 dll 转储到其中，因为 GAC 无法使用它。

# java - 使用javascript从位置检测几个元素

> ID：16031382
> 
> 赞同：0
> 
> 时间：2013-04-16T07:43:06.837
> 
> 标签：java, javascript, webdriver

我有这样的问题：

有一个位置为 6,83 的链接被空*div*重叠，该 div 与*整个*页面重叠。

此链接不可点击，因为它是重叠的。但！当我尝试执行`document.elementFromPoint(6,83)`时，它返回的不是我的 div，而是链接:(我如何检测这个 div 重叠链接？

我在 Java + WebDriver 中需要这个，但 JS 也可以是一个解决方案。

谢谢你。

UPD：（我没有足够的评价）：我找到了解决方案！这很奇怪，但是如果`document.elementFromPoint`调用元素的左上角坐标，即使重叠也会返回相同的元素。这就是为什么我们可以在元素的 CENTER 中检查重叠的原因。

当我询问 WebDriver 时，这是解决方案：

`public static boolean isElementClickable(WebElement element) { return element.isDisplayed() && element.isEnabled() && element.equals(getJSExecutor(getDriverFromContext(element)) .executeScript("return document.elementFromPoint" + "(" + Integer.toString(((Locatable)element).getLocationOnScreenOnceScrolledIntoView().getX() + (element.getSize().getWidth() / 2)) + ", " + Integer.toString(((Locatable)element).getLocationOnScreenOnceScrolledIntoView().getY() + (element.getSize().getHeight() / 2)) + ")")); }`

我希望这将帮助任何有同样问题或元素在 WebDriver 中是可点击问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:00:26.307

您可以使用[elementFromPoint](http://www.quirksmode.org/dom/w3c_cssom.html#t20)或[getBoundingClientRect](http://ejohn.org/blog/getboundingclientrect-is-awesome/)方法。
请参阅这两个方法链接以获取更多详细信息。

**elementFromPoint：**这个方法是拖放脚本的天赐之物。当用户放下拖动的元素时，找出放置点的元素并从那里继续。不需要更复杂的计算。

**getBoundingClientRect：**这是一种方法，最初由 Internet Explorer 5 引入（现在包含在 Firefox 3 中），它提供元素的顶部、右侧、底部和左侧偏移坐标。在 PPK 在他最近的一篇文章中提到了这种方法之后，便便它的适用性，我想我需要一些时间来展示它的有用性。是什么让这种方法特别方便的是计算元素偏移位置的替代方法非常缓慢和错误，以至于它接近可笑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T07:53:02.623

当我询问 WebDriver 时，这是解决方案：

```
public static boolean isElementClickable(WebElement element) { 
    return element.isDisplayed() && element.isEnabled() && 
    element.equals(getJSExecutor(getDriverFromContext(element)) .executeScript(
        "return document.elementFromPoint" + "(" + 
        Integer.toString(((Locatable)element).getLocationOnScreenOnceScrolledIntoView().getX() + 
        (element.getSize().getWidth() / 2)) + ", " + 
        Integer.toString(((Locatable)element).getLocationOnScreenOnceScrolledIntoView().getY() + 
        (element.getSize().getHeight() / 2)) + ")")); 
} 
```

我希望这将帮助任何有同样问题或元素在 WebDriver 中是可点击问题的人。

# asp.net-mvc - MVC4 输入字段占位符

> ID：16031385
> 
> 赞同：47
> 
> 时间：2013-04-16T07:43:26.217
> 
> 标签：asp.net-mvc, asp.net-mvc-4

默认情况下是否`MVC4`支持`placeholders`生成的输入字段？我没有找到任何东西，所以我试图实现我自己的，但不幸的是在生成控制时`Prompt = "E-Mail"`没有传递给它。`ViewData.ModelMetadata.Watermark`为什么？

模型

```
public class LogOnModel
{
    [Required]
    [Display(Name = "E-Mail", Prompt = "E-Mail")]
    [DataType(DataType.EmailAddress)]
    public string Email { get; set; }
}

@Html.TextBoxFor(m => m.Email, new { placeholder = ViewData.ModelMetadata.Watermark }) 
```

`placeholder`我得到标签没有任何文本的html代码

```
<input data-val="true" data-val-regex="Please enter a valid e-mail address" data-val-required="The E-Mail field is required." id="Email" name="Email" placeholder="" type="text" value="" class="valid"> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-16T08:19:01.460

使用插件的替代方法是使用编辑器模板。您需要做的是在`Shared\EditorTemplates`文件夹中创建一个模板文件并调用它`String.cshtml`。然后把它放在那个文件中：

```
@Html.TextBox("",ViewData.TemplateInfo.FormattedModelValue, 
    new { placeholder = ViewData.ModelMetadata.Watermark }) 
```

然后在您的视图中使用它，如下所示：

```
@Html.EditorFor(m=>Model.UnitPercent) 
```

不利的一面是，这适用于 type 的属性`string`，您必须为每个`type`想要支持水印的属性创建一个模板。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2015-05-30T20:28:54.917

我这样做了

模型中的字段：

```
[Required]
[Display(Name = "User name")]
public string UserName { get; set; } 
```

剃刀：

```
<li>
  @Html.TextBoxFor(m => m.UserName, new { placeholder = Html.DisplayNameFor(n => n.UserName)})
</li> 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-04-16T08:10:12.823

当然可以：

```
@Html.TextBoxFor(x => x.Email, new { @placeholder = "Email" }) 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-04-17T14:24:52.133

您可以轻松添加 Css 类、占位符等，如下所示：

```
@Html.TextBoxFor(m => m.Name, new { @class = "form-control", placeholder="Name" }) 
```

希望这可以帮助

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-03-31T11:39:03.910

这有效：

```
@Html.TextBox("name", null,  new { placeholder = "Text" }) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-06-02T11:57:21.033

有多种方法可以将占位符绑定到视图：

**1) 使用 MVC 数据注释：**

模型：

```
[Required]
[Display(Prompt = "Enter Your First Name")]
public string FirstName { get; set; } 
```

剃刀语法：

```
@Html.TextBoxFor(m => m.FirstName, new { placeholder = @Html.DisplayNameFor(n => n.UserName)}) 
```

**2) 使用 MVC 数据注释但使用 DisplayName：**

模型：

```
[Required]
[DisplayName("Enter Your First Name")]
public string FirstName { get; set; } 
```

剃刀语法：

```
@Html.TextBoxFor(m => m.FirstName, new { placeholder = @Html.DisplayNameFor(n => n.UserName)}) 
```

**3）不使用MVC数据注释（推荐）：**

剃刀语法：

```
@Html.TextBoxFor(m => m.FirstName, new { @placeholder = "Enter Your First Name") 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-04-16T08:02:30.073

默认情况下，它不会。但是，您可以使用具有可输出 HTML5 的 HTML 帮助程序的[MVCHtml5Toolkit](https://nuget.org/packages/MVCHtml5Toolkit) NuGet 包。对于您的示例，安装工具包后，您可以使用以下 HTML 帮助程序调用：

```
@Html.Html5TextBoxFor(m => m.Email, InputTypes.InputType.Email) 
```

这将输出以下 HTML：

```
<input id="Email" name="Email" placeholder="E-Mail" type="Email" value=""> 
```

可以看出，占位符现在已正确渲染。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-04-25T14:03:25.913

`Prompt`在非模板控制上下文中获取值的正确解决方案是：

```
@Html.TextBoxFor(model => model.Email, 
    new { placeholder = ModelMetadata.FromLambdaExpression(m => m.Email, ViewData).Watermark }
) 
```

这也*不会*双重转义水印文本。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-12-03T04:05:48.993

```
 @Html.TextBoxFor(m => m.UserName, new { @class = "form-control",@placeholder = "Name"  }) 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2014-10-29T08:42:08.487

尝试这个：

```
@Html.TextbBoxFor(x=>x.Email,new { @placeholder=@viewBag.email} 
```

如果这可能，否则可能是什么方式

# php - 作曲家和亚马逊 php sdk

> ID：16031388
> 
> 赞同：0
> 
> 时间：2013-04-16T07:43:34.057
> 
> 标签：php, symfony, amazon-web-services

我正在尝试按照[此处](http://docs.aws.amazon.com/aws-sdk-php-2/guide/latest/installation.html)的说明下载 amazon-php-sdk。在最后一步它说要使用它，只需将以下行添加到代码的引导过程中。

```
require '/path/to/sdk/vendor/autoload.php'; 
```

在这种情况下，我的代码的引导过程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:01:07.573

好吧，一旦您将依赖项添加到 composer.json 并更新/安装供应商，您就可以使用它们了。

因为，Symfony2 引导程序已经使用了 composer autoload。

> 为了确保最佳的灵活性和代码重用，Symfony2 应用程序利用了各种类和第 3 方组件。但是在每个请求上从单独的文件中加载所有这些类可能会导致一些开销。为了减少这种开销，Symfony2 标准版提供了一个脚本来生成一个所谓的引导文件，该文件由单个文件中的多个类定义组成。通过包含这个文件（其中包含许多核心类的副本），Symfony 不再需要包含任何包含这些类的源文件。这将大大减少磁盘 IO。

仅供参考：[使用引导文件](http://symfony.com/doc/master/book/performance.html#use-bootstrap-files)

# mysql - 同一表上的多个 LEFT JOINS，使用来自先前 JOIN 的数据

> ID：16031393
> 
> 赞同：-1
> 
> 时间：2013-04-16T07:43:54.527
> 
> 标签：mysql

我在 mysql 中使用 LEFT JOIN 从我的数据集中的代码中查找组织。

所以*数据表*可能包含***orgcode*** **123**

 ***然后***orgtable***包含组织的*orgname*，即“本地书店”。

然而，***orgtable***还包含另一个代码，它使用另一个代码，即**456**来标识“本地书店”的父组织。

我如何编写一个查询到***orgtable***，查找*orgname*，还找到*parentorgcode*，然后在同一个表中查找它以找到父组织名称？

基本上使用一个 LEFT JOIN 的输出在同一个查询中生成另一个 LEFT JOIN ...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:49:14.653

尝试使用这样的别名：

```
SELECT tb1.orgcode, tb2.orgcode
FROM orgtable AS tb1 LEFT OUTER JOIN orgtable AS tb2 ON tb1.orgcode = tb2.orgcode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:56:46.030

```
 SELECT O1.NAME AS ORG_NAME, O2.NAME AS PARENT_ORG_NAME
 FROM DATATABLE D
 JOIN ORGANISTION O1
 ON D.ORGID = O1.ORG_ID
 LEFT JOIN ORGANISTION O2
 ON O1.PARENT_ID = O2.ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:48:21.197

首先，如果您要管理数据层次结构，我强烈建议您阅读[http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)，因为它会向您展示各种存储数据的方法，这很可能允许您可以使用比目前更优化的方法。

其次，您可以按照您的要求轻松地 LEFT JOIN，但只需要确保每个新连接都使用别名，以便您请求的字段没有歧义，即

```
SELECT 
    *
FROM datatable AS d
LEFT JOIN orgtable AS o1 ON o1.orgID = d.orgID
LEFT JOIN orgtable AS o2 ON o2.orgID = o1.parentOrgID 
```

你不能做的是自动让 MySQL 继续添加 LEFT JOIN，直到没有父级。为此，您将需要递归存储过程、循环存储过程或嵌套树（请参阅链接）***

# internet-explorer - 条件样式表。我需要根据 IE 版本设置样式并拥有

> ID：16031398
> 
> 赞同：0
> 
> 时间：2013-04-16T07:44:03.590
> 
> 标签：internet-explorer, internet-explorer-7, conditional, stylesheet, detect

嗨，
我写了一个条件样式表，但我找不到**IE7-IE7.9 的条件**

我写了这些：

• 等于 IE6 或小于 IE6 .. => [如果 lte IE 6]

• IE7-IE7.9 .. => [??]

• 等于 IE8 且大于 IE8（表示 IE8-IE8.9、IE9、IE10..）.. => [如果 gte IE 8]

所以，我找不到**IE7-IE7.9 的**
条件，我需要检测 IE7，它是 7.9 之前的更高版本。

您在此类问题中的解决方案是什么？

我的最后一个代码如下所示：

```
<link rel="stylesheet" href="template_style.css" type="text/css" />
<!--[if lte IE 6]>
<link rel="stylesheet" type="text/css" href="ie6-and-down.css" />
<![endif]-->
<!--[??]>
<link rel="stylesheet" type="text/css" href="ie7-and-up-till-ie7.9.css" />
<![endif]-->
<!--[if gte IE 8]>
<link rel="stylesheet" type="text/css" href="ie8-and-up.css" />
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:49:38.657

另一种方法是使用类来处理有条件的 IE 样式：

```
<!--[if lt IE 7]>  <html class="ie ie6 lte9 lte8 lte7"> <![endif]-->
<!--[if IE 7]>     <html class="ie ie7 lte9 lte8 lte7"> <![endif]-->
<!--[if IE 8]>     <html class="ie ie8 lte9 lte8"> <![endif]-->
<!--[if IE 9]>     <html class="ie ie9 lte9"> <![endif]-->
<!--[if gt IE 9]>  <html> <![endif]--> 
```

在上面的示例中，`ie7` `lte8`如果使用 IE7，则设置类。

# algorithm - 如何在 O(n) 中找到数组中的前 m 个最小整数？

> ID：16031399
> 
> 赞同：0
> 
> 时间：2013-04-16T07:44:15.590
> 
> 标签：algorithm, data-structures

当数组的长度为 n 且 1 <= m <= n^0.5

我认为您可以使用选择算法来找到第 m 个最小的整数（在[http://en.wikipedia.org/wiki/Selection_algorithm](http://en.wikipedia.org/wiki/Selection_algorithm)中有一个复杂的称为 BFPRT，即 O(n)），然后将其用作枢轴对数组进行分区以获得前 m 个最小整数。

但是，有没有办法使用诸如最小堆之类的数据结构来做到这一点？我怎么知道它是否是 O(n)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T07:53:24.203

您可以在线性时间内创建一个最小堆。然后，您只需要以每次移除`m`的成本移除最小元素时间。`log(n)`那`O(n) + m*O(log(n))`就是`O(n) + O(sqrt(n)*log(n))`那就是`O(n)`。

**编辑**我最初说`O(n) + O(sqrt(n)*log(n))`的是`O(sqrt(n)*log(n))`这是错误的，因为`O(n)`实际上`o(sqrt(n)*log(n))`这意味着它不是`O(sqrt(n)*log(n))`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T08:00:41.267

只需使用基数排序在 O(n) 时间内对数组进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T02:50:05.753

Build_Heap(A) 方法可以在 O(n) 时间内从随机数组创建 min_heap 或 max_heap ，如果我们创建 min_heap 则需要 O(1) 时间来获取最小元素

所以获得最小元素的总时间是 O(n)+)(1) 即 O(n)

# components - 如何在 vaadin 子窗口中隐藏导航面板？

> ID：16031405
> 
> 赞同：0
> 
> 时间：2013-04-16T07:44:24.640
> 
> 标签：components, vaadin

如何使用 vaadin 子窗口中的按钮隐藏顶部面板？我需要隐藏子窗口上的导航栏，在关闭按钮的位置显示什么栏。

```
Window window = new Window();
    VerticalLayout vertical = (VerticalLayout) window.getContent();
    vertical.setMargin(true);
    vertical.setSpacing(true);
    vertical.setSizeFull();
    window.addComponent(componetn);
    window.setWidth(width);
    window.setHeight(heigth);
    window.setResizable(false);
    window.setModal(false);
    window.setBorder(0);
    getMainWindow().addWindow( window); 
```

# asp.net-web-api - TIBCO Business Studio 中用于服务参考的 REST 投标

> ID：16031406
> 
> 赞同：1
> 
> 时间：2013-04-16T07:44:25.810
> 
> 标签：asp.net-web-api, tibco

我正在使用`AMX Service Bus 3.2`. 并试图通过 TIBCO Active Matrix 公开我的休息服务（ASP.NET WebApi）。不幸的是，我在 TIBCO 商业工作室中没有找到任何方法来做到这一点。我发现`TIBCO Active Matrix Binding Type for REST`但它仅用于促销服务。它允许通过 REST 接口公开 SOAP 服务，但它无法调用托管在 IIS 上的我的 REST 服务。

就目前而言，我看到了实现该功能的唯一一种方法 - 创建附加 SOAP 服务，它将 HTTP 请求从提升服务重定向到我的 REST 服务。但是这样的解决方案并不是很好的 SOA 设计。

任何帮助表示赞赏。

# c# - XAML 中用于绑定到 ISubject 的标记扩展

> ID：16031408
> 
> 赞同：4
> 
> 时间：2013-04-16T07:44:26.673
> 
> 标签：c#, wpf, xaml, system.reactive, markup-extensions

如果我有以下视图模型

```
class Foo : INotifyPropertyChanged {

    ISubject<string> Name { ... }

} 
```

和一些想象中的 XAML 代码

```
<TextBox Text="{my:Subscribe Path=Name}/> 
```

我希望这两种方式的绑定能够表现得那样

*   在 UI 中更新文本框时调用 Subject.onNext
*   通过订阅 Subject.Subscribe 来更新文本框

由于 WPF 仅直接支持 INPC，我的想法是通过标记扩展创建代理 INPC 对象

```
class WPFSubjectProxy : INotifyPropertyChanged{

    string Value { ... }

} 
```

代理将这样连接到主题

```
subject.Subscribe(v=>proxy.Value=v);

proxy
    .WhenAny(p=>p.Value, p.Value)
    .Subscribe(v=>subject.OnNext(v)) 
```

注意 WhenAny 是`ReactiveUI`订阅 INPC 事件的助手。

但是我需要生成一个绑定并通过标记扩展返回它。

我知道我想做什么，但无法弄清楚标记扩展的魔力将它们组合在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:29:51.230

如果没有具体看到您正在努力解决的问题，很难说，但这也许有[帮助](http://blogs.msdn.com/b/alexdan/archive/2008/10/30/binding-to-a-markupextension-that-returns-a-binding.aspx)？

**编辑**

由于分配的正确答案中的指针，我（bradgonesurfing）提出的解决方案如下。

    节点      

和实现代码。它依赖于 ReactiveUI 和私有库中的辅助函数，用于将 ISubject 绑定到 INPC 支持对象上的可变属性

```
using ReactiveUI.Subjects;
using System;
using System.Linq;
using System.Reactive.Subjects;
using System.Windows;
using System.Windows.Data;
using System.Windows.Markup;

namespace ReactiveUI.Markup
{
    [MarkupExtensionReturnType(typeof(BindingExpression))]
    public class SubscriptionExtension : MarkupExtension
    {
        [ConstructorArgument("path")]
        public PropertyPath Path { get; set; }

        public SubscriptionExtension() { }

        public SubscriptionExtension(PropertyPath path)
        {
            Path = path;
        }

        class Proxy : ReactiveObject
        {
            string _Value;
            public string Value
            {
                get { return _Value; }
                set { this.RaiseAndSetIfChanged(value); }
            }
        }

        public override object ProvideValue(IServiceProvider serviceProvider)
        {
            var pvt = serviceProvider as IProvideValueTarget;
            if (pvt == null)
            {
                return null;
            }

            var frameworkElement = pvt.TargetObject as FrameworkElement;
            if (frameworkElement == null)
            {
                return this;
            }

            object propValue = GetProperty(frameworkElement.DataContext, Path.Path);

            var subject = propValue as ISubject<string>;

            var proxy = new Proxy();
            Binding binding = new Binding() 
            {
                Source = proxy,
                Path = new System.Windows.PropertyPath("Value")
            };

            // Bind the subject to the property via a helper ( in private library )
            var subscription = subject.ToMutableProperty(proxy, x => x.Value);

            // Make sure we don't leak subscriptions
            frameworkElement.Unloaded += (e,v) => subscription.Dispose(); 

            return binding.ProvideValue(serviceProvider);
        }

        private static object GetProperty(object context, string propPath)
        {
            object propValue = propPath
                .Split('.')
                .Aggregate(context, (value, name)
                    => value.GetType() 
                        .GetProperty(name)
                        .GetValue(value, null));
            return propValue;
        }

    }
} 
```

# c++ - DLL 仅在分配内存时才会导致程序崩溃

> ID：16031410
> 
> 赞同：0
> 
> 时间：2013-04-16T07:44:31.220
> 
> 标签：c++, memory-management, dll, malloc, code-injection

我正在编写一个小 DLL，一旦注入到我的目标进程中，它就会找到一个`hwnd`并将窗口的文本写入文件。我有这样的设置：

```
hWnd = FindWindow(L"tSkMainForm",NULL);
chat = FindWindowEx(hWnd, NULL, L"TConversationForm", NULL);
ofstream myfile("X:\\Handles.txt", ios::out | ios::app);
if (myfile.is_open())
{
    int len;
    len = SendMessage(chat, WM_GETTEXTLENGTH, 0, 0) + 1; // + 1 is for the null term.
    char* buffer = new char[len];
    SendMessageW(chat, WM_GETTEXT, (WPARAM)len, (LPARAM)buffer);
    myfile.write(buffer,len); /* << buffer <<endl; */
    myfile.close();
    delete[] buffer;
} 
```

它在看似随机的时间内工作，然后应用程序 (Skype) 崩溃。它只在我分配内存时崩溃。我尝试过使用`malloc`：

```
char* buffer = (char*)malloc(len); //I even tried removing "(char*) before malloc
//Do the rest of the stuff here
free((void*) buffer); 
```

但这也崩溃了。

我的 DLL 调用`CreateThread`，通过添加一个额外的菜单项`AppendMenu`，并为它处理消息，一切都完美无缺。似乎分配内存并不想工作，而只是在随机时间。我不确定，但我认为 Skype 正在覆盖我的内存，或者我正在覆盖 Skype 的内存（我如何确保两者不会相互覆盖？）

另外，我知道 Skype 有一个 API，但我想这样做。如果我想编写一个严肃的程序，我会使用 Skype API。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-22T16:04:21.277

当然会崩溃。“在另一个进程中注入 DLL”是您一开始不应该做的事情，如果您无法弄清楚这一点，**当然也不应该这样做。**

您的问题是您的 DLL 对其运行的环境进行了假设。特别是，您假设有一个 C++ 堆（或 C 堆，for `malloc`），而这正是您的程序的正确状态。事实并非如此。普通的 C++ 规则不适用于注入的 DLL；您的 DLL 必须能够自立。

# java - 在 Map Android 上获取多个图钉

> ID：16031411
> 
> 赞同：0
> 
> 时间：2013-04-16T07:44:31.297
> 
> 标签：java, android, google-maps

我正在尝试使用[Google Maps Android API v2](https://developers.google.com/maps/documentation/android/)在我的地图上获取多个图钉 我已经从我的 SQlite DB 中获取了 Lat/Long 的值现在我在地图上添加图钉时卡住了（获取解析错误 - 无法解析这个 51.4738 字符串进入国际。）

我的代码是这样的：

```
public class MainActivity extends FragmentActivity {
 static final LatLng HAMBURG = new LatLng(53.558, 9.927);
private GoogleMap mMap;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     DataBaseHelper myDbHelper = new DataBaseHelper(this);
        myDbHelper = new DataBaseHelper(this);

        try {

            myDbHelper.createDataBase();

    } catch (IOException ioe) {

        throw new Error("Unable to create database");

    }

    try {

        myDbHelper.openDataBase();

        Cursor cursor = myDbHelper.getAllContacts();

            mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                    .getMap();     

                int nameIndex = cursor.getColumnIndexOrThrow("name");
            int latIndex = cursor.getColumnIndexOrThrow("latitude");
            int lngIndex = cursor.getColumnIndexOrThrow("longitude");
                String[] result_lats = new String [cursor.getCount()];
                String[] result_lngs = new String [cursor.getCount()];
                String[] result_names = new String [cursor.getCount()];
                 while(cursor.moveToNext()){

                 String lats = cursor.getString(latIndex);
                 String lngs = cursor.getString(lngIndex);
                 String nme = cursor.getString(nameIndex);

              //     Double lat = cursor.getFloat(latIndex) * 1E6;
              //    Double lnt = cursor.getFloat(lngIndex) * 1E6;

                 result_lats [cursor.getPosition()] = String.valueOf(lats);

            // tried this also :
    //       result_lats [cursor.getPosition()] = String.valueOf(lat); 
    //   use lat.intValue() when adding on marker 
// -- Output(Using String.valueOf(lat.intValue()))- 10 Greek Street 51514098/-130659    
// -- Output(Using String.valueOf(lat)) - 10 Greek Street 5.1514098E7/-130659.0
                 result_lngs [cursor.getPosition()] = String.valueOf(lngs);
                 result_names [cursor.getPosition()] = nme;

                 }

                 Log.d("Latitude22 :", String.valueOf(result_lats[2])); // `Output Lat -> 51.5195`
                     Log.d("Longitude22", String.valueOf(result_lngs[2]));
Output Long -> -0.126092

     // Integer Longitu = Integer.valueOf(lats[1]);

     // Integer Latitu = Integer.valueOf(result_lngs[1]);

      mMap.addMarker(new MarkerOptions().position(new LatLng(51.156685, -0.165324)).title(result_names[1]));

      for(int i=0 ; i<result_lats.length ; i++){
          Log.d("Names are :", String.valueOf(result_names[i]));
          Log.d("Latitudes are :", String.valueOf(result_lats[i])); 
          Log.d("Longitudes are :", String.valueOf(result_lngs[i]));

What should my code be to be used here so that i can get all pins shown on Map 
i knw it will be somewhat like this :

// mMap.addMarker(new MarkerOptions().position(new LatLng(result_lats[i], result_lngs[i]).title(result_names[i]));

// but the format is likely this : LatLng(53.558, 9.927); and here i have String value result_lats[i]

      }

     cursor.close();
  // ---- End Cursor coding 
    }catch(SQLException sqle){

        throw sqle;

    }
} 
```

请任何人都可以帮助我解决这个问题...

现在解决了，我只需要这样做：

```
for(int i=0 ; i<result_lats.length ; i++){
          Log.d("Names are :", String.valueOf(result_names[i]));
          Log.d("Latitudes are :", String.valueOf(result_lats[i])); 
          Log.d("Longitudes are :", String.valueOf(result_lngs[i]));

          Double lat2 = Double.valueOf(result_lats[i]);
             Double lng2 = Double.valueOf(result_lngs[i]);
             mMap.addMarker(new MarkerOptions().position(new LatLng(lat2,lng2)).title(result_names[i]));

      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:48:17.133

你需要像这样解析

```
Double lat = Double.valueOf(lats[1]); 
```

您无法将`double String`值解析为`Integer`可验证的；

对于 Map 上的多个引脚，这可能会对您有所帮助 [这里需要传递 lat & long 数组]

```
private void DisplayAllMarkersonMap(GoogleSetGetArray googleSetGetArray) {
             try
                {
                    GeoPoint point = null;
                    for(int i=0;i<googleSetGetArray.getGoogleSetGets().size();i++)
                    {
                        //Drawable drawable = new BitmapDrawable(CheckIn.bitmaps.get(i));       //Drawables that are coming from google api
                        point = new GeoPoint((int) ((googleSetGetArray.getGoogleSetGets().get(i).getLat() * 1E6)),(int)((googleSetGetArray.getGoogleSetGets().get(i).getLng()) * 1E6));
                        overlayitem = new OverlayItem(point,googleSetGetArray.getGoogleSetGets().get(i).getName(), 
                        googleSetGetArray.getGoogleSetGets().get(i).getVicinity());
                        itemizedoverlay = new CheckInMapItemizedOverlay(drawable,mapView,true,googleSetGetArray.getGoogleSetGets().get(i).getId());
                        itemizedoverlay.addOverlay(overlayitem);
                        mapOverlays.add(itemizedoverlay);
                    }
                     mapController.animateTo(point);

                }catch(Exception ex)
                {
                    ex.printStackTrace();
                }
        } 
```

# asp.net - 使用外部 IP 远程调试 asp.net Web 应用程序

> ID：16031417
> 
> 赞同：1
> 
> 时间：2013-04-16T07:44:53.767
> 
> 标签：asp.net, debugging, remote-debugging

我尝试在我的远程计算机上安装远程调试器，并在我的本地计算机上连接到它，使用 Visual Studio 2012 for asp.net Web 应用程序 windows8。远程计算机和本地计算机不在同一个网络中。我在远程机器上安装了 Visual Studio 远程调试器并运行它。它的实例名称是：“SERVER-PC:4016” 在本地机器上，我通过 ftp 处理项目，并在限定符字段中调试附加到处理器中，我以这种格式输入名称：external_ip:4016，并得到一个错误：“Microsoft Visual Studio 远程调试监视器 (MSVSMON.EXE) 似乎没有在远程计算机上运行..”

ps 我在远程和本地机器上安装了一个本地用户，具有相同的名称和密码，并从这个用户名运行相关程序。

有什么想法可以解决我的问题吗？谢谢你！

# java - URI和Uri类有什么区别

> ID：16031418
> 
> 赞同：9
> 
> 时间：2013-04-16T07:44:54.047
> 
> 标签：java, android

我很困惑，如何使用，`Uri`因为我在 android 开发中使用它`Intent's` `Action dial`

```
Intent intent = new Intent(Intent.ACTION_DIAL, Uri.parse("tel:555-2368")); 
```

我想做的事 ：

我想创建一个文件，我想在其中放置 2 个电话号码。然后，我想对`toUri()`这个文件使用方法，并想把它放在`Uri`意图中，然后我想看看这个意图会发生什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T07:51:24.813

根据[Android API 文档](http://developer.android.com/reference/android/net/Uri.html#fromFile%28java.io.File%29)，您可以创建一个文件`Uri`：

`public static Uri fromFile (File file)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T07:47:42.840

`java.net.URI`是可变的

`android.net.Uri`是不可变的

[java.net.URI](http://developer.android.com/reference/java/net/URI.html)

一个统一资源标识符，用于标识 RFC 2396 中指定的抽象或物理资源。

[android.net.Uri](http://developer.android.com/reference/android/net/Uri.html) 。一个 URI 引用包括一个 URI 和一个片段，URI 的组成部分跟在“#”之后。构建和解析符合 RFC 2396 的 URI 引用。

出于性能的考虑，这个类几乎不执行验证。无效输入的行为未定义。这个类非常宽容——面对无效输入，除非另有说明，否则它将返回垃圾而不是抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:47:44.100

URI 识别和 URL 定位；但是，位置也是标识，因此每个 URL 也是一个 URI，但有些 URI 不是 URL。

网址 - [http://example.com/some/page.html](http://example.com/some/page.html)

URI - /some/page.html

# c# - 需要 CustomStringLengthValidator -（模式和实践 – 企业库）

> ID：16031420
> 
> 赞同：0
> 
> 时间：2013-04-16T07:45:01.737
> 
> 标签：c#, .net, enterprise-library, enterprise-library-5

我正在使用 Microsoft Enterprise Library 5.0 验证应用程序块。

我想覆盖`StringLengthValidator`只有一个小的变化。

当前`StringLengthValidator`很好，但问题是这个验证器正在做两项工作。`NotNull`检查和字符串长度检查。如果字符串是，`null`那么即使我忽略了下限检查，验证器也会触发消息。

我想要的是如果我提供一个`null`值，当我忽略下限检查时验证器不应该触发，只有它应该考虑上限。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:57:16.563

您可以使用 Enterprise Library 附带的 Or Composite Validator。您可以使用 Not Null Validator 和 String Length Validator 来执行验证。

这是一个快速示例：

[ConfigurationElementType(typeof(CustomValidatorData))] 公共密封类 CustomValidatorClass : Validator {

```
 public CustomValidatorClass(string template, string tag)
        : base(template, tag)
    {

    }

    protected override string DefaultMessageTemplate
    {
        get { return "blah blah"; }
    }

    public override void DoValidate(object objectToValidate, object currentTarget, string key, ValidationResults validationResults)
    {
        //Do something here
    }
} 
```

在配置文件中：

```
<validation>
    <type name="ConsoleApplication1.PropertyClass" assemblyName="ConsoleApplication1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null">
        <ruleset name="Validation Ruleset">
            <properties>
                <property name="MyProperty">
                    <validator type="ConsoleApplication1.MyClass, ConsoleApplication1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"
                        messageTemplate="Blah blah" name="MyClass" />
                </property>
            </properties>
        </ruleset>
    </type>
</validation> 
```

您可以将泛型类用于您想要验证的任何特定类型或任何已经扩展 Enterprise Library API 中的 Validator 类的类。

# apache - 中国域的 apache httpd.conf 设置

> ID：16031423
> 
> 赞同：0
> 
> 时间：2013-04-16T07:45:09.987
> 
> 标签：apache, httpd.conf

我有一个中文域名要托管。我设置了 DNS 部分并且工作正常。

但是，我无法在 Apache 中进行设置。我确实添加了别名，但仍然无法正常工作。

```
<VirtualHost 202.64.x.x:80>
ServerName aaaa.com:80
DocumentRoot /var/www/aaaa/
ServerAlias XN--aaaaaaaaaaaa.XN--aaaaaaa 
```

我需要在别名中添加中文域名吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:40:43.437

虚拟主机设置是这样的，所以服务器名中没有端口 80，加上一个结束标记！编辑后需要重新启动 Apache。使用正确的 vhost 文件来编辑它，而不是配置文件。

```
<VirtualHost *:80>
    ServerName test.xn
    ServerAdmin test@test.xn
    DocumentRoot /var/www/test.xn 
</VirtualHost> 
```

# ios - iPhone来电查看类？

> ID：16031424
> 
> 赞同：1
> 
> 时间：2013-04-16T07:45:11.623
> 
> 标签：ios, objective-c, iphone, jailbreak, iphone-privateapi

我正在开发一个 theos 调整，我想主要修改来电视图（iOS 5 和 iOS 6）。我会很感激处理这个视图的类的名称，以便钩入它的方法。我已经尝试过`MPIncomingPhoneCallController`，`SBCallAlertDisplay`但没有一个对我有用。

![来电查看截图](https://i.stack.imgur.com/TfCum.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-01T19:09:53.827

如果您在`InCallService.app`（电话应用程序）上转储标题，您将看到一个`PHAlert`带有名为`- (void)showOnViewController:(id)arg1;`. 这将在任何`UIViewController`. 您可以将它与最前面的应用程序一起使用：`[[SpringBoard sharedApplication] _accessibilityFrontMostApplication]`.

# android - 如果Android经常杀死应用程序，为什么要使用phonegap相机

> ID：16031425
> 
> 赞同：1
> 
> 时间：2013-04-16T07:45:14.687
> 
> 标签：android, cordova, android-camera

我目前正在开发一个 Phonegap Cordova 2.5 应用程序，该应用程序要求用户拍照并将其上传到我们的服务器。我使用 PhoneGap 是为了避免任何特定于 Android 的编码（可能有一天会在 iOS 上发布）。

事实证明，Android 经常（但不总是）在拍照时杀死我的应用程序，当相机模块返回照片时，我的基础应用程序从头开始恢复并且没有调用回调方法。对新拍摄照片的任何引用都会丢失，请在此处查看此帖子：

[从相机拍照失败 20% 的时间](https://stackoverflow.com/questions/11544992/taking-a-picture-from-the-camera-fails-20-of-the-time)

一个常见的解决方法似乎是原生 Android 代码。这引出了我的问题：如果我使用的第一个也是唯一一个 Phonegap 模块（相机）需要一些严重的黑客攻击，我为什么要使用 Phongap？我知道这甚至不是Phonegap的“错误”，而是Android生命周期设计，但仍然：我如何捍卫这种架构选择？是否已经使用 HTML、CSS 和 JS 将其全部简化为可重用的前端？我应该切换到原生 Android 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T11:31:27.177

Answering my own question: PhoneGap is awesome in many ways, so there are numerous arguments to defend it. Most notably, the whole UI needs to be coded only once and being Javascript and CSS there are many developers who don't need to learn another language. Don't underestimate the value of "easiness", if you need to code a relatively simple app, don't bother to go native. PhoneGap will just do fine.

In my case, the app I wanted to build revolves around taking photos. So I don't use the camera in some rare use cases to spice up the user experience, but it is rather the most important part of the app. In this scenario I guess the recommended approach is to go native. That's what I did in the end.

Another approach would have been using a PhoneGap Plugin called "Foreground Camera".
PROs: Seamless photo taking in the integration. The user actually takes the picture INSIDE your app.
CONs: By default you lose ALL of the camera's capabilities (zoom, front camera, flash, etc.), so you would need to make a serious coding effort to implement some of those features manually.

# php - 保护 php api

> ID：16031429
> 
> 赞同：0
> 
> 时间：2013-04-16T07:45:30.013
> 
> 标签：php, javascript, jquery

我在 php 中构建了自己的 API，带有 Zend 框架，用于带有数据库的 CRUD 函数。

但现在我有点担心保护我的小 API，因为我需要有投票功能，允许用户对每个项目投票一次。投票的唯一要求是用户的 facebook ID，所以我担心如果有人将帖子请求循环到我的投票 api，并带有很多 facebook id。

所以现在我正在考虑将加密令牌从我的应用程序客户端传递给投票 api，并在 api 执行操作之前对其进行检查。

所以我想知道生成动态令牌并将其安全地传递给 API 的最佳方法是什么？或者有什么简单的方法可以识别来自我的应用程序客户端以外的任何来源的 API 请求？

目前我使用 jquery ajax 将所有 json 数据传递给我的 api。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:52:45.623

我能想到的最简单的方法是，您将某种哈希值放入 API 调用中，以验证数据是否来自您的应用程序。例如，您可以创建 Facebook ID 和盐的哈希值。您只需要确保接收端确实知道用于该呼叫的盐。例如

```
hash = sha256(Facebook_id+app_id) 
```

将是一种方式。

# c# - 2 个 nHibernate 映射文件，1 个 POCO 类。SQL Profiler 显示 2 个正在运行的查询

> ID：16031431
> 
> 赞同：0
> 
> 时间：2013-04-16T07:45:39.677
> 
> 标签：c#, nhibernate

我目前有 2 个使用相同 POCO 类的休眠映射类，因为休眠映射与 2 个非常相似的视图相关，并且在检索后将相同的逻辑应用于这 2 个视图，我认为它会起作用。

hdlquery = "来自 myFirstHibernateMapping"

问题是，当我执行 a 时`hdlquery.List< MyPOCOClass>()`，它会为使用 MyPOCOClass 的两个休眠映射类运行 2 个查询。（我在 SQL Profiler 中看到了这一点）。

有人知道为什么会这样吗？或者如果有办法解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:50:25.160

在映射中定义 2 个不同的实体名称并在查询中指定它。使用标准它看起来像这样

```
var results = session.CreateCriteria("MyPOCOClass1").List<MyPOCOClass>();
// and
var results = session.CreateCriteria("MyPOCOClass2").List<MyPOCOClass>(); 
```

# c# - 路径 $/FullStackSampleApplication 不是文件。（类型无效操作异常）

> ID：16031434
> 
> 赞同：1
> 
> 时间：2013-04-16T07:45:43.720
> 
> 标签：c#, tfsbuild, azure-devops, azure-deployment

我创建了一个带有自定义活动的新构建定义。我修改了 AzureContinuous 部署 xaml，如下所述：

[http://www.ewaldhofman.nl/post/2010/06/01/Customize-Team-Build-2010-e28093-Part-10-Include-Version-Number-in-the-Build-Number.aspx](http://www.ewaldhofman.nl/post/2010/06/01/Customize-Team-Build-2010-e28093-Part-10-Include-Version-Number-in-the-Build-Number.aspx)

这里有一个我以前遇到的问题，但我可以解决它： ['AssemblyInfoFileMask' 没有声明。由于其保护级别，它可能无法访问](https://stackoverflow.com/questions/16020586/assemblyinfofilemask-is-not-declared-it-may-be-inaccessible-due-to-its-protec)

当我对新构建进行排队时，出现异常**路径 $/FullStackSampleApplication 不是文件。（类型无效操作异常）**

我尝试删除构建定义并从头开始创建，但没有成功。

![在此处输入图像描述](https://i.stack.imgur.com/Ntj5H.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:01:41.477

假设您将空的或不正确的 AssemblyInfoFileMask 字符串传递给 activity ，错误是从 TFS api 返回的，试图下载具有不正确服务器路径的文件。通过您链接的文章，在您的工作区映射范围内搜索装配项目

```
foreach (var folder in workspace.Mappings)
{
    // Get all files (recursively) that apply to the file mask
    ItemSet itemSet = vc.GetItems(folder.ServerItem + "//" + assemblyInfoFileMask, RecursionType.Full); 
```

这将返回您所有的程序集信息文件，如果您省略程序集掩码，但是它将返回您的所有内容，包括工作区中的文件夹，一旦将该路径传递给下载方法，它会在您将类型文件夹的项目传递给它时失败并出现错误

```
item.DownloadFile(localFile); 
```

# jquery - Eric Hynds 的 jQuery MultiSelect - 如何获取选中的选项

> ID：16031435
> 
> 赞同：0
> 
> 时间：2013-04-16T07:45:48.937
> 
> 标签：jquery, multi-select

有人可以帮我从 Eric Hynds 的 jQuery MultiSelect 中获取选定的选项，并使用 razor 语法将它们插入到 sdf 文件中

这是我的 Razor + HTML 代码——我使用 webmatrix startersite 作为模板

```
@{  var db = Database.Open("StarterSite");
    var selectQueryString = "SELECT * FROM Details where team like 'EMT'";
    }
<script src="~/Scripts/jquery.ms.js">
</script>
<script type="text/javascript">
    $(function ()
    {
        $("select").multiselect();
    });
    $(function ()
    {
        $("input[type=submit]").button();
    });

</script>
<link href="~/Content/ms.css" rel="stylesheet" type="text/css">

<form method="post">

    <select multiple id="all" name="all" multiple="Multiple">
                @{foreach(var row in db.Query(selectQueryString))
          {
            <option>@row.fname</option>
          }

         }
    </select>

        <input type="submit" value="Send Report" id="Repot" />

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:26:18.063

您可以在单击时将项目添加到选定选项的数组中，然后使用该数组供以后使用。请参阅各种事件的[文档](http://www.erichynds.com/blog/jquery-ui-multiselect-widget)。

> ***click***：选中或取消选中复选框时触发。js $("#multiselect").on("multiselectclick", function(event, ui) { /* event: 原始事件对象 ui.value: 复选框的值 ui.text: 复选框的文本 ui.checked:输入是否被选中或未选中（布尔值）*/}）；

像这样的东西

```
$("select").multiselect({
    click: function(event, ui){
        if(ui.checked){//if checked
          ...push the value into array
        }
        else {//if unchecked
          ...remove that value from array
        }
    }
}); 
```

**更新**

在他们的[网站](http://www.erichynds.com/blog/jquery-ui-multiselect-widget)上提到了。（搜索“我如何...？”）

> 检索所有选定的值？
> 
> 最简单的方法是在选择框上调用 val()：

```
var values = $("select").val(); 
```

> 使用多选 API 也可以完成相同的操作。调用 getChecked 方法并映射一个新数组：

```
var array_of_checked_values = $("select").multiselect("getChecked").map(function(){
   return this.value;    
}).get(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-12T04:13:01.790

这对您的项目来说可能有点太晚了，但它希望能帮助其他人。

我在更新中使用了更简单的方法：

```
 var values = $("select").val(); 
```

因此，如果您检查了选项 2、4 和 6，“值”将是这样的字符串：“2,4,6”。如果您正在开发 MVC 项目，则需要将此字符串保存在表单的隐藏字段中，否则控制器将无权访问它。在我的代码中，我使用“关闭”事件将输出（即 2、4、6）写入一个名为“输出”的隐藏文本框。

一些代码片段：

在表单上创建一个隐藏字段：

```
 @Html.Hidden("output", null) 
```

在初始多选定义中定义“关闭”事件处理程序：

```
 <script type='text/javascript'>
        $('select').multiselect(function() {
           //your code
           close: function(event, ui){
               var values = $('select').val();
               $('#output').val(values);
               // you can inspect the value using alert(values); 
           },
           // your code
           // your code
        });
    </script> 
```

现在在您的编辑操作的 post back 部分，form["output"] 等于 "2,4,6"。

如何使用它来更新数据库取决于项目中的许多参数。如果您一直坚持 MVC 模式指南，您只需要在控制器的 Edit 操作中刷新您的模型，然后使用修改后的模型调用 update（或 put）方法。

希望这可以帮助。

谢谢

纳赛尔。

# android - Android减小应用程序中图形的大小

> ID：16031436
> 
> 赞同：0
> 
> 时间：2013-04-16T07:45:50.547
> 
> 标签：android, size, screen-resolution, reduce, graphic

我在应用程序中使用位图并使用 .bmp 或 .png 格式。我尝试遵守开发人员 android 页面中的标准 -[支持不同的密度](http://developer.android.com/training/multiscreen/screendensities.html)

但是，如果我在背景以及图像视图和图像按钮上使用位图，我的应用程序就会非常庞大​​。假设大约 40 MB。使图形最小尺寸的最佳方法是什么？

当然，我可以使用诸如 PngCrush 之类的工具来减小尺寸，但它只起到一点作用。我正在寻找其他充满图形的应用程序，例如只有 12 MB。他们如何达到如此小的应用程序规模？因为我不知道使用openGL，所以使用图像是目前使用的一种也是唯一的方法。与使用图像相比，使用 OpenGL 时数据大小有什么区别？你认为如果我有很多图形，我必须从 OpenGL 开始使用吗？

你有什么有趣的技巧来制作最小的图形吗？

# android - 为 android 虚拟键盘设置 keyPreviewLayout 导致崩溃

> ID：16031438
> 
> 赞同：1
> 
> 时间：2013-04-16T07:45:57.227
> 
> 标签：android, android-softkeyboard, custom-keyboard

我在 android 中有一个自定义虚拟键盘​​，当单击按钮时会出现。

如果我`keyPreviewLayout`使用语句设置 a`android:keyPreviewLayout="@layout/mykeypreviewlayout"` 并在运行时包含一些布局语句`res/layout/mykeypreviewlayout.xml`，当触摸自定义软键盘上的键时，应用程序崩溃。

以下是代码片段： 以下来自主 xml 文件。

```
 <LinearLayout android:layout_height="wrap_content"
  android:layout_gravity="bottom"  
  android:layout_width="wrap_content">  
  <android.inputmethodservice.KeyboardView  
    android:id="@+id/keyboardView" android:visibility="gone"
    android:focusable="true" android:focusableInTouchMode="true"
    android:layout_height="wrap_content" android:layout_width="wrap_content"  
    android:keyPreviewLayout="@layout/mykeypreviewlayout"
    android:layout_weight="0" />
  </LinearLayout> 
```

这是来自'res/layout/mykeypreviewlayout.xml的xml代码

```
 <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:textColor="@color/black"> </TextView> 
```

如果从上面的 KeyboardView 布局中删除了设置 keyPreviewLayout attr 的行，则应用程序可以正常运行。但是，当在按下的字符上方弹出按键反馈预览窗口时，窗口是空白的，并且没有字符显示——只是出现了一个白色背景的小矩形字符大小的弹出窗口。
如果我添加设置 keyPreviewLayout 的行，那么当在软键盘上触摸一个键时应用程序崩溃。

这是来自 logcat 的堆栈跟踪转储（相关的前几行），表明崩溃发生在 KeyboardView.java

```
04-17 07:41:47.346: E/AndroidRuntime(11901): FATAL EXCEPTION: main
04-17 07:41:47.346: E/AndroidRuntime(11901): java.lang.NullPointerException
04-17 07:41:47.346: E/AndroidRuntime(11901):    at                     android.inputmethodservice.KeyboardView.showKey(KeyboardView.java:918)
04-17 07:41:47.346: E/AndroidRuntime(11901):    at     android.inputmethodservice.KeyboardView.access$100(KeyboardView.java:65)
04-17 07:41:47.346: E/AndroidRuntime(11901):    at      android.inputmethodservice.KeyboardView$1.handleMessage(KeyboardView.java:251)
04-17 07:41:47.346: E/AndroidRuntime(11901):    at     android.os.Handler.dispatchMessage(Handler.java:99)
04-17 07:41:47.346: E/AndroidRuntime(11901):    at     android.os.Looper.loop(Looper.java:123)
04-17 07:41:47.346: E/AndroidRuntime(11901):    at android.app.ActivityThread.main(ActivityThread.java:3683)
04-17 07:41:47.346: E/AndroidRuntime(11901):    at java.lang.reflect.Method.invokeNative(Native Method)
04-17 07:41:47.346: E/AndroidRuntime(11901):    at java.lang.reflect.Method.invoke(Method.java:507)
04-17 07:41:47.346: E/AndroidRuntime(11901):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-17 07:41:47.346: E/AndroidRuntime(11901):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 
```

有没有人遇到过这个问题？任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-28T13:18:54.233

您可以尝试将预览布局更改为以下内容：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
          android:background="@android:color/white"
          android:textColor="@android:color/black"
          android:gravity="center"
          android:textSize="32sp" /> 
```

您不需要使用整个东西，只需将 textColor 字段更改为我上面的内容。它应该适合你。

# javascript - 未处理的 postMessage 会泄漏内存吗？

> ID：16031442
> 
> 赞同：3
> 
> 时间：2013-04-16T07:46:06.063
> 
> 标签：javascript, memory-leaks, postmessage

我有一个页面可以作为独立网页使用，也可以在特殊的“看门狗框架”中使用，它会定期向其发送消息`window.top.postMessage('message', '*');`

问题是如果页面作为独立网页加载，将无法捕获这些消息。可以期望用户一次保持该页面打开数小时甚至数天。

这些未捕获的消息是否会消失得无影无踪，或者它们是否会排队或类似的事情，泄漏内存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T09:23:24.137

`postMessage`在目标上启动 a `MessageEvent`，这并不比常规`onload`事件更特殊。

事件本身不会导致任何内存泄漏。您可以通过引入不需要的闭包来创建内存泄漏，但这也适用于常规函数：

```
window.addEventListener('message', messageHandler, false);
function messageHandler(event) {
    var img = new Image();
    img.onload = function() {
        document.body.appendChild(img);
    };
    img.src = event.data.some.property.deep.ly.nested.obj.bad.coding.style.src;
} 
```

有什么问题？图片的`onload`处理程序在加载时将图片插入到文档中。但是因为闭包，`event`对象不能被释放，大`event.data`对象还是会占用内存。

引入内存泄漏（仅限同源）的另一种方法是保存以下值`event.source`（防止框架的视图在框架被删除时被 GC'd）：

```
var stupidity = [];
window.onmessage = function(event) {
    stupidity.push(event.source);
}; 
```

# jquery - 更新 Jquery 以使用每个输入按钮

> ID：16031451
> 
> 赞同：0
> 
> 时间：2013-04-16T07:46:22.693
> 
> 标签：jquery, button, input, multiple-instances

我正在使用以下代码，并且使用单个输入按钮可以正常工作。

```
<input type="button" id="copy_button" data-clipboard-text="Copy Me!" Value="Click ME">

<script src="js/ZeroClipboard.js"></script>
<script>
var clip = new ZeroClipboard( document.getElementById("copy_button"), {
  moviePath: "js/ZeroClipboard.swf"
} );

clip.on( 'complete', function(client, args) {
var $message = $('<div class="message">DONE</div>').hide();
var $messageCont = $('<div class="message_cont" />').append($message).prependTo('body');
$messageCont.css({
   "left" : $(this).offset().left,
   "top" : $(this).offset().top
}).find("div.message").fadeIn(200).delay(1500).fadeOut(function() {
        });
   } );
</script> 
```

但是，理想情况下，我希望它可以与多个输入按钮一起使用并复制与正确按钮关联的值。

需要做什么才能完成这项工作？最后一页可能有 50 多个按钮，所以我希望我不必单独指定每个按钮。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:48:17.407

给你所有的按钮一个类并调用类选择器

```
var clip = new ZeroClipboard( $(".cpbutton"), {.. 
```

或者

获取所有输入类型按钮

```
var clip = new ZeroClipboard( $("input[type='button']"), { 
```

# vb.net - VB.NET：动态获取常量值

> ID：16031453
> 
> 赞同：3
> 
> 时间：2013-04-16T07:46:27.070
> 
> 标签：vb.net, constants, dynamic-programming, generic-collections

如果有以下常量定义：

```
Protected Const Xsl As String = "Configuration.Xsl"
Protected Const Form As String = "Settings.Form"
Protected Const Ascx As String = "Implementation.Ascx"
... 
```

为了填充字典，我使用这个常量作为键：

```
MyDictionary.Add(Converter.Xsl, "Item 1")
MyDictionary.Add(Converter.Form, "Item 2")
MyDictionary.Add(Converter.Ascx, "Item 3")
... 
```

现在我通过一个 XML 文件循环运行并提取根节点的名称：

```
Dim document As New XmlDocument
document.Load(File.FullName)

Dim rootName As String = document.DocumentElement.Name 
```

根名称与常量的名称相匹配。要从字典中获取项目的值，我可以使用如下内容：

```
Select Case rootName.ToUpper
    Case "Xsl".ToUpper
        DictionaryValue = MyDictionary(Class.Xsl)
    Case "Form".ToUpper
        DictionaryValue = MyDictionary(Class.Form)
    Case "Ascx".ToUpper
        DictionaryValue = MyDictionary(Class.Ascx)
    ...
    Case Else
End Select 
```

如果添加或删除常量，我还必须更改选择。有没有另一种方法来获取常量的值？就像是

```
DictionaryValue = MyDictionary(SomeFunctionToGetConstantValue(rootName)) 
```

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:54:51.100

尝试这个：

```
For Each sKey As String In MyDictionary.Keys
    If rootName.Equals(sKey, StringComparison.CurrentCultureIgnoreCase) Then
        DictionaryValue = MyDictionary(sKey)
        Exit For
    End If
Next 
```

至少它会减少 select 情况下的编码量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-05T09:03:07.030

@克拉拉·奥纳格

我使用的解决方案如下

```
Me.GetType.GetField(
    "Xsl",
    Reflection.BindingFlags.NonPublic Or Reflection.BindingFlags.Static Or System.Reflection.BindingFlags.FlattenHierarchy
).GetValue(Nothing) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-09T12:03:01.293

这有点夸张，但我认为它总体上提供了一个非常优雅的解决方案。这是它的使用方式：

```
Public Class ConstantsExample

    Public Sub UseConstant()

        Dim value As String = Constants.Types(TypeA)
        Dim category As String = Constants.Categories(General)

    End Sub

End Class 
```

如您所见，使用它的代码尽可能短。它确实依赖于一大堆源代码：

```
Public Enum TypeCodes
    <Description("Type A")> TypeA = 0
    <Description("Type B")> TypeB
    <Description("Type C")> TypeC
End Enum

Public Enum CategoryCodes
    <Description("General")> General = 0
    <Description("Specific")> Specific
    <Description("Other")> Other
End Enum

Public NotInheritable Class Constants

#Region "Resources"

    Private Shared myTypes As Dictionary(Of TypeCodes, ConstantItem) = Nothing

    Public Shared ReadOnly Property Types() As Dictionary(Of TypeCodes, ConstantItem)
        Get
            If myTypes Is Nothing Then
                myTypes = New Dictionary(Of TypeCodes, ConstantItem)
                BuildTypes(myTypes)
            End If
            Return myTypes
        End Get
    End Property

    Private Shared Sub BuildTypes(ByRef dict As Dictionary(Of TypeCodes, ConstantItem))
        With dict
            .Add(TypeCodes.TypeA, New ConstantItem(TypeCodes.TypeA.Description, "Type A are..."))
            .Add(TypeCodes.TypeB, New ConstantItem(TypeCodes.TypeB.Description, "Type B are..."))
            .Add(TypeCodes.TypeC, New ConstantItem(TypeCodes.TypeC.Description, "Type C are..."))
        End With
    End Sub

#End Region

#Region "Categories"

    Private Shared myCategories As Dictionary(Of CategoryCodes, ConstantItem) = Nothing

    Public Shared ReadOnly Property Categories() As Dictionary(Of CategoryCodes, ConstantItem)
        Get
            If myCategories Is Nothing Then
                myCategories = New Dictionary(Of CategoryCodes, ConstantItem)
                BuildCategories(myCategories)
            End If
            Return myCategories
        End Get
    End Property

    Private Shared Sub BuildCategories(ByRef dict As Dictionary(Of CategoryCodes, ConstantItem))
        With dict
            .Add(CategoryCodes.General, New ConstantItem(CategoryCodes.General.Description, "General category"))
            .Add(CategoryCodes.Specific, New ConstantItem(CategoryCodes.Specific.Description, "Specific category"))
            .Add(CategoryCodes.Other, New ConstantItem(CategoryCodes.Other.Description, "Other category"))
        End With
    End Sub

#End Region

End Class

Public NotInheritable Class ConstantItem

#Region "Constructors"
    ''' <summary>
    ''' Default constructor.
    ''' </summary>
    Public Sub New()
        'Do nothing
    End Sub
    ''' <summary>
    ''' Simple constructor.
    ''' </summary>
    Sub New(value As String)
        Me.Name = value
        Me.Description = value
    End Sub
    ''' <summary>
    ''' Proper constructor.
    ''' </summary>
    Sub New(name As String, description As String)
        Me.Name = name
        Me.Description = description
    End Sub

#End Region

    Property Name As String
    Property Description As String

    ''' <summary>
    ''' See http://stackoverflow.com/questions/293215/default-properties-in-vb-net
    ''' </summary>
    Public Shared Widening Operator CType(value As String) As ConstantItem
        Return New ConstantItem(value)
    End Operator
    ''' <summary>
    ''' See http://stackoverflow.com/questions/293215/default-properties-in-vb-net
    ''' </summary>
    Public Shared Widening Operator CType(value As ConstantItem) As String
        Return value.Name
    End Operator

End Class 
```

注意使用`Widening Operator`to 不必键入`.Item`。如果您不想使用`Widening Operator`那么简单的注释并更改`Constants.Types(TypeA)`为`Constants.Types.Item(TypeA)`.

这是您可能需要的描述扩展：

```
Public Module Extensions
    Private Enum SampleDescription
        <Description("Item One")> ItemOne = 1
        <Description("Item Two")> ItemTwo = 2
        <Description("Item Three has a long description")> ItemThree = 3
    End Enum
    ''' <summary>
    ''' This procedure gets the description attribute of an enum constant, if any. Otherwise it gets 
    ''' the string name of the enum member.
    ''' </summary>
    ''' <param name="value"></param>
    ''' <returns></returns>
    ''' <remarks>Usage:  myenum.Member.Description()
    ''' Add the Description attribute to each member of the enumeration.</remarks>
    <Extension()> _
    Public Function Description(ByVal value As [Enum]) As String
        Dim fi As Reflection.FieldInfo = value.GetType().GetField(value.ToString())
        Dim aattr() As DescriptionAttribute = DirectCast(fi.GetCustomAttributes(GetType(DescriptionAttribute), False), DescriptionAttribute())
        If aattr.Length > 0 Then
            Return aattr(0).Description
        Else
            Return value.ToString()
        End If
    End Function

End Module 
```

这些是我使用的 Imports 语句（程序集称为 MyPatterns）：

```
Imports System.ComponentModel
Imports MyPatterns.TypeCodes
Imports MyPatterns.CategoryCodes 
```

导入这两个“代码”允许您在没有缩短代码的 Enum 前缀的情况下进行操作。

# php - 消息：cache_dir 必须是一个目录

> ID：16031456
> 
> 赞同：3
> 
> 时间：2013-04-16T07:46:41.620
> 
> 标签：php, zend-framework, frameworks

大家好，我对 Zend Framework 有一些问题。
我首先收到以下消息：消息：
无法确定临时目录，请手动指定 cache_dir。
我搜索了谷歌并找到了这篇文章：[Zend Framework : 无法确定临时目录，请手动指定一个 cache_dir](https://stackoverflow.com/questions/5651276/zend-framework-could-not-determine-temp-directory-please-specify-a-cache-dir)
我阅读了它，现在当我填写表格时，我收到以下错误：（
我在错误中放置 .. 的任何地方都意味着域。）

消息：cache_dir 必须是一个目录

```
- #0 /home/daan/domains/../library/Zend/Cache/Backend/File.php(154): Zend_Cache::throwException('cache_dir must ...')
 - #1 /home/daan/domains/../library/Zend/Cache/Backend/File.php(121): Zend_Cache_Backend_File->setCacheDir('/domains/daan.h...')
 - #2 /home/daan/domains/../library/Zend/Cache.php(153): Zend_Cache_Backend_File->__construct(Array)
 - #3 /home/daan/domains/../library/Zend/Cache.php(94): Zend_Cache::_makeBackend('File', Array, false, false)
 - #4 /home/daan/domains/../library/Zend/Locale/Data.php(307): Zend_Cache::factory('Core', 'File', Array, Array)
 - #5 /home/daan/domains/../library/Zend/Locale/Format.php(796): Zend_Locale_Data::getList('nl_NL', 'day')
 - #6 /home/daan/domains/../library/Zend/Locale/Format.php(1106): Zend_Locale_Format::_parseDate('16-02-2013', Array)
 - #7 /home/daan/domains/../library/Zend/Date.php(4763): Zend_Locale_Format::getDate('16-02-2013', Array)
 - #8 /home/daan/domains/../library/Zend/Validate/Date.php(175): Zend_Date::isDate('16-02-2013', 'MM-DD-YYYY', NULL)
 - #9 /home/daan/domains/../library/Zend/Form/Element.php(1391): Zend_Validate_Date->isValid('16-02-2013', Array)
 - #10 /home/daan/domains/../library/Zend/Form.php(2135): Zend_Form_Element->isValid('16-02-2013', Array)
 - #11/home/daan/domains/../application/controllers/BugController.php(27): Zend_Form->isValid(Array)
 - #12 /home/daan/domains/../library/Zend/Controller/Action.php(513): BugController->submitAction()
 - #13 /home/daan/domains/../library/Zend/Controller/Dispatcher/Standard.php(289): Zend_Controller_Action->dispatch('submitAction')
 - #14 /home/daan/domains/../library/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
 - #15 /home/daan/domains/../library/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch()
 - #16 /home/daan/domains/../library/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
 - #17 /home/daan/domains/../public_html/index.php(26): Zend_Application->run()
 - #18 {main} 
```

应用程序.ini：

```
resources.cachemanager.configFiles.frontend.name = File
resources.cachemanager.configFiles.frontend.customFrontendNaming = false
resources.cachemanager.configFiles.frontend.options.lifetime = false
resources.cachemanager.configFiles.frontend.options.automatic_serialization = true    
resources.cachemanager.configFiles.backend.name = File
resources.cachemanager.configFiles.backend.customBackendNaming = false
resources.cachemanager.configFiles.backend.options.cache_dir = APPLICATION_PATH      "/../tmp"
resources.cachemanager.configFiles.frontendBackendAutoload = false 
```

初始化缓存：

```
 protected function _initCaching() {
$frontend = array(
'lifetime' => $time,
'automatic_serialization' => true
);
$backend = array(
'cache_dir' => sys_get_temp_dir(),
);
$cache = Zend_Cache::factory('core', 'File', $frontend, $backend);
Zend_Registry::set('cache', $cache); 
```

}

文件夹结构：
.htpasswd
应用程序
awstats
库
日志
public_ftp
public_html
tmp

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T09:07:32.597

**cache_dir must be a directory :**

This problem came generally when you move your code to another host or server . There are mainly two solution for this problem

1 - Make sure your cache directory is writable or you can make writable to var folder of magento

but sometimes this situation does not work so here is the alternate solution. Go to this location lib/Zend/Cache/Backend/ and open file.php file you’ll see the code something like this

```
protected $_options = array(
        'cache_dir' => null,
        'file_locking' => true,
        'read_control' => true,
        'read_control_type' => 'crc32',
        'hashed_directory_level' => 0,
        'hashed_directory_umask' => 0700,
        'file_name_prefix' => 'zend_cache',
        'cache_file_umask' => 0600,
        'metadatas_array_max_size' => 100
    ); 
```

**change this code as below**

```
protected $_options = array(
        'cache_dir' => '/var/www/html/webkul/magento/tmp',
        'file_locking' => true,
        'read_control' => true,
        'read_control_type' => 'crc32',
        'hashed_directory_level' => 0,
        'hashed_directory_umask' => 0700,
        'file_name_prefix' => 'zend_cache',
        'cache_file_umask' => 0600,
        'metadatas_array_max_size' => 100
    ); 
```

assign path of cache_dir as per your configuration .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:51:17.140

可能是 Zend 找不到你的缓存目录。尝试像这样在 Bootstrap.php 中设置这个

```
protected function _initCache() {
    $frontend = array(
        'lifetime' => $time,
        'automatic_serialization' => true
    );
    $backend = array(
        'cache_dir' => sys_get_temp_dir(), /**automatically detects**/
    );
    $cache = Zend_Cache::factory('core', 'File', $frontend, $backend);
    Zend_Registry::set('cache', $cache);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:31:19.917

从您的引导程序中删除该`_initCaching`功能，您不应该拥有这个和 application.ini 条目，因为它们都试图设置相同的东西（但使用不同的缓存位置）。

您的缓存目录设置为`APPLICATION_PATH "/../tmp"`- 即应用程序根目录中名为“tmp”的文件夹（不在应用程序文件夹中）。您是否 100% 确定您的 tmp 文件夹存在于该位置？如果是这样，您可以尝试更改 application.ini 配置以使用完整路径：

```
resources.cachemanager.configFiles.backend.options.cache_dir = "/home/daan/domains/whatever/tmp" 
```

只是看看是否能解决问题。

如果您仍然无法使其正常工作，请发布有关您的应用程序文件结构的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-14T04:56:48.897

这个问题的答案是打开 File.php 文件并更改 tmp 文件夹的路径。当您将站点从一台服务器转移到另一台服务器时，通常会出现此问题。当您转移站点时，tmp 文件夹的路径不会更改为新的。因此编辑 file.php 并更改 tmp 文件夹的路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-16T13:18:00.640

在 CentOS/RedHat 中出现此问题的原因之一可能是 Selinux。我通过禁用 Selinux 解决了这个问题

编辑`/etc/selinux/config`文件并将 SELINUX 设置为`disabled`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-16T13:48:36.743

更改路径`/install/config/`，编辑文件`vfs.php`并输入新路径名。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-18T00:02:29.867

[大红根](http://i.stack.imgur.com/Dd6kF.png)

在 magento 目录中创建“tmp”文件为我解决了这个错误。我能够轻松访问管理员

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-25T09:50:36.187

为缓存目录分配完整路径。例如，

```
'cache_dir' => '/var/www/html/var/cache1', 
```

# wpf - wpf / Visual Studio 默认样式

> ID：16031457
> 
> 赞同：0
> 
> 时间：2013-04-16T07:46:42.443
> 
> 标签：wpf, visual-studio-2012

如果我打开一个新项目，并在主窗口上放置一个标签或按钮，我会得到大小为 12 像素的 Segoe UI 字体。

这是从哪里来的？我可以选择我想要的默认字体/大小吗？我环顾四周，但找不到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:59:24.887

可用字体根据[System.Windows.Media.Fonts.SystemFontFamilies](http://msdn.microsoft.com/en-gb/library/system.windows.media.fonts.systemfontfamilies.aspx)设置。

如果同一字体系列的多个版本位于同一目录中，Windows Presentation Foundation (WPF) 字体枚举将返回该字体的最新版本。如果版本信息不提供分辨率，则返回时间戳最新的字体。如果时间戳信息等价，则返回字母顺序排在第一位的字体文件。

还有[Fonts.SystemTypefaces](http://msdn.microsoft.com/en-us/library/system.windows.media.fonts.systemtypefaces.aspx)。

大概可以更改选定的家庭或创建自己的家庭。事实上，这篇文章（[WPF - Add Custom Font](https://stackoverflow.com/questions/358501/wpf-add-custom-font)）提供了更多相关信息。

我希望这有帮助。

# android - Android SurfaceView 触摸延迟的解决方法

> ID：16031458
> 
> 赞同：5
> 
> 时间：2013-04-16T07:46:47.277
> 
> 标签：android, surfaceview, touch-event

我已经完成了一个功能性 Android 游戏的编程，但我不知道在哪里可以修复触摸延迟：每当触摸屏幕时，帧率都会下降一半。我的代码基本上是带有 onTouchEvent 的 LunarLander 的复制和粘贴。

谷歌搜索向我展示了他们说有效但无效的基本解决方法（睡眠 onTouchEvent、onDispatchEvent、onInterceptTouchEvent、同步等），而且在触摸事件期间似乎不可能在没有巨大延迟的情况下使用 SurfaceView。

我应该怎么办？我应该放弃 SurfaceView，禁用 onTouchEvent 并使用 clickListener，以某种方式阻止快速触摸调用吗？请告诉我怎么了！

我试过了：

*   使 onTouchEvent() 不运行任何代码并返回 false
*   休眠 onTouchEvent() 或 run() 16/32/1000 毫秒，没有区别
*   覆盖 onDispatchevent() 而不是 onTouchEvent()
*   在 onTouchEvent() 中试验 synchronized()

这是我的代码：

```
public class Surface extends SurfaceView implements SurfaceHolder.Callback {

    public CanvasThread canvasThread;
    private SurfaceHolder surfaceHolder;    

    public Surface(Context context) {
        super(context);
        surfaceHolder = getHolder();
        surfaceHolder.addCallback(this);
        setFocusable(true);
    }

    @Override
        public boolean onTouchEvent(MotionEvent event) {
            return canvasThread.touch(event);
        }

        class CanvasThread extends Thread {

    @Override
            public void run() {
                synchronized (this) {
                    // game logic
                }   
            }

            public boolean touch(MotionEvent event) {
                // touch logic
            }
        }
} 
```

# angularjs - angularjs 模块依赖

> ID：16031460
> 
> 赞同：11
> 
> 时间：2013-04-16T07:46:49.540
> 
> 标签：angularjs, dependencies, breeze

我已经这样定义了我的主模块：

```
angular.module('domiciliations', ['domiciliations.service', 'loggerService', 'person.directives']).
  config(['$routeProvider', function ($routeProvider) {
  $routeProvider.
      when('/domiciliations/mandats', { templateUrl: 'domiciliations/views/mandats.html', controller: mandatsCtrl }).
      when('/domiciliations/mandats/:rum', { templateUrl: 'domiciliations/views/mandat.html', controller: mandatCtrl }).
      otherwise({ redirectTo: '/domiciliations/mandats' });
  }]).
  value('toastr', window.toastr).
  value('breeze', window.breeze); 
```

我的问题是如何在我的控制器中指定模块依赖项？

如果我做：

```
angular.module('domiciliations.service', ['ngResource', 'breeze', 'loggerService']).
  factory('Domiciliation', function ($resource, breeze, logger) {
} 
```

然后我得到一个错误'没有模块：微风'。

如果我这样做，它会起作用：

```
angular.module('domiciliations.service', ['ngResource']).
   factory('Domiciliation', function ($resource, breeze, logger) {
} 
```

那么我应该如何指定对微风和记录器的依赖关系？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-16T08:25:57.843

`breeze`不是一个模块 - 它是模块中的一个[值（服务的简写](http://docs.angularjs.org/api/AUTO.$provide#value)）`domiciliations`：`value('breeze', window.breeze);`.

当你这样做时：

```
angular.module('domiciliations.service', ['ngResource', 'breeze', 'loggerService']).
  factory('Domiciliation', function ($resource, breeze, logger) {
} 
```

您将模块配置为对`domiciliations.service` *模块*的依赖项`ngResource`，`breeze`并且`loggerService`. Angular 找不到`breeze` *模块*并引发异常。

假设`loggerService`是一个模块并且`logger`是这个模块中的一个服务，以下应该可以工作（`breeze`并且`logger`将被注入到工厂函数中）：

```
angular.module('domiciliations.service', ['ngResource','loggerService']).
   factory('Domiciliation', ['$resource','breeze','logger',
     function ($resource, breeze, logger) {
    }
  ]) 
```

# mongodb - Mongoid 嵌入文档返回空查询

> ID：16031461
> 
> 赞同：1
> 
> 时间：2013-04-16T07:46:52.697
> 
> 标签：mongodb, ruby-on-rails-3.2, mongoid

当我查询嵌入式模型时，尽管有大量包含嵌入式模型实例的父记录，但没有返回任何记录。

有两种模型，一个`Label`嵌入在 a 中`Band`：

```
class Band
  include Mongoid::Document
  embeds_one :label
end

class Label
  include Mongoid::Document
  field :name, type: String
  embedded_in :band
end 
```

我可以很好地查询 Band (`Band.all`等)，但是当我查询 Label 时，它什么也不返回。`Band.find`例如：

我创建带有嵌入标签的乐队，并保存它：

```
 > b = Band.create
 => #<Band _id: 516cff525543d8842e000008, _type: nil>
 > b.build_label name: "new label"
 => #<Label _id: 516cff5a5543d8842e000009, _type: nil, name: "new label">
 > b.save
 => true 
```

然后我查询 Band 模型，一切都很好：

```
 > Band.all.to_a
 => [#<Band _id: 516cff525543d8842e000008, _type: nil>]
 > Band.count
 => 1
 > Band.first.label
 => #<Label _id: 516cff5a5543d8842e000009, _type: nil, name: "new label">
 > Band.find "516cff525543d8842e000008"
 => #<Band _id: 516cff525543d8842e000008, _type: nil> 
```

但是当我查询 Label 模型时，什么也没有出现！

```
 > Label.all.to_a
 => []
 > Label.count
 => 0
 > Label.last
 => nil
 > Label.first
 => nil
 > Label.find "516cff5a5543d8842e000009" # this is the label id from Band
 => nil 
```

我几乎可以肯定这不是预期的行为。代码直接来自 Mongoid 文档的示例：http: [//mongoid.org/en/mongoid/docs/relations.html#embeds_one](http://mongoid.org/en/mongoid/docs/relations.html#embeds_one)

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T09:23:26.387

在 mongo 中，您的查询始终以集合为目标，即可能嵌入其他文档的完整文档。对于 mongo，它只是一个大的 JSON/BSON 文档。现在，`Label.all`or`Label.all`相当于查询`Label`集合。由于标签未存储在`Label`集合中，因此这些查询不会返回任何内容。但是，您仍然可以`Band`通过调用来查询集合上的标签

```
Band.where(:'labels._id' => "516cff5a5543d8842e000009") 
```

或类似的东西

```
Band.where(:'labels.name' => "rock") 
```

如果您想获得具有特定标签的所有乐队，这很好。但是，以这种方式获取所有标签非常昂贵，不推荐使用。你的主要用例是什么？如果它显示一个乐队的标签或获得带有特定标签的乐队，那么嵌入是很好的。否则，您可以使用关系（has_many/belongs_to），或完全非规范化，即将标签同时保存在带内和单独的集合中（导致冗余数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:55:01.050

我认为您应该使用 has_many、has_one、belongs_to 方法来使您可以根据需要运行查询，例如 Label.count。

当您将文档嵌入到另一个文档中时，它将成为文档的一部分（序列化属性）。如果要选择标签，首先应该找到 Band，然后检查标签属性。它绝对应该有效。

# html - “文件”HTML 输入元素的预先存在的 MIME 类型接受的类型

> ID：16031462
> 
> 赞同：5
> 
> 时间：2013-04-16T07:46:55.137
> 
> 标签：html, input, web

我很好奇是否有使用`image/*`for`input`的`accept`属性接受的有效图像类型（本质上是扩展名）列表。例子：

```
<input type="file" accept="image/*"> 
```

哪些扩展对此有效？同样，对于其他两个`audio/*`和`video/*`。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T07:55:10.957

这是允许`accept`属性使用不同文件类型的方法。

```
<input type="file" accept="image/jpeg,image/gif,image/png" /> 
```

同样，您也可以允许音频和视频文件。

按照这个链接：[http ://en.wikipedia.org/wiki/MIME_type](http://en.wikipedia.org/wiki/MIME_type)

您可以检查允许的文件类型。

# jquery - 更改 jQuery 自定义样式以进行验证，使其显示为工具提示

> ID：16031468
> 
> 赞同：2
> 
> 时间：2013-04-16T07:47:23.310
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui, validation

我是 jQuery 新手，在自定义验证元素的样式（ASP.NET MVC3 项目）方面有点挣扎。我知道我可以更改 CSS`field-validation-error`等`input-validation-error`，但我想要实现如下（使用 jQuery 1.5.1 和 jQuery UI 1.8.11）：

对于标签/输入元素组合，我想在验证失败时更改标签颜色（现在只有输入元素的背景颜色变为浅红色）。此外，我想在输入元素的右侧显示一个错误图标（这有效），并将错误消息作为工具提示（这不起作用）。

此外，当将鼠标悬停在表单的提交按钮上时，我希望验证摘要显示为自定义样式的工具提示（不知道如何完成此操作）。

通常，我的表单验证确实有效，但我想如上所述更改元素的样式。我不明白为什么该`validate`功能似乎没有触发（在这里我想我可以开始`errorPlacement`等等）。我的代码如下：

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
$(document).ready( function()
{
    $("form").validate({
        debug: true,
        errorPlacement: function(error, element)
        {
            error.insertBefore(element);
        },
        submitHandler: function()
        {
            alert("submit");
        }
    });
});
[...]
@using(Html.BeginForm())
{
    [...]
    <td>@Html.LabelFor(model => model.SomeField)</td>
    <td>
        @Html.EditorFor(model => model.SomeField)
        @Html.ValidationMessagesFor(model => model.ValidFrom)
    </td>
    [...]
    @Html.ValidationSummary(false);
    <input id="btnSubmit" name="submit" type="submit" value="Send" />
} 
```

尽管为 submitHandler 设置`debug: true`和定义了`alert`，但我在 Firefox 的 Web 开发人员控制台上看不到任何（与验证相关的）输出。当表单有效时单击提交按钮时，我也看不到该`alert`消息，它只是被发布到服务器。我还尝试显式设置表单 ID 并在 jQuery 中访问它：

```
$("#myForm")...
[...]
@using(Html.BeginForm("Action","Controler", FormMethod.Post, new { id = "myForm" }))
{
    [...] 
```

不幸的是，这并没有改变任何东西。如何如上所述设置我的验证元素的样式？为什么`validate`函数没有触发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T07:54:46.647

尝试put class 修改asp.net mvc的默认设计

例如：

```
@Html.ValidationMessageFor(
          model => model.Property1, string.Empty, new 
          { 
              @class = "new-style-error-validation" 
          }
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T13:40:53.737

这真的花了我一段时间，包括我必须做/找出/修复的几件事。`jQuery (1.9.2)`但是，首先，我`jQuery UI (1.10.3)`在撰写本文时更新到了最新版本。

首先，我一直想知道为什么我所有的尝试都改变了我的问题中描述的验证逻辑的行为。事实证明，`ASP.NET MVC`你不能只使用在这么多页面上找到的“普通”jQuery 示例，你必须首先获得对验证器的引用：

```
// #popupDialog and #Formular are the CSS ids of my modal dialog and form.
var validator = $("#popupDialog").find("#Formular").data("validator"); 
```

下一步是`errorPlacement`用空函数覆盖 ，否则原始验证样式总是被激活：

```
validator.settings.errorPlacement = function () {
}; 
```

现在更容易的部分是通过简单地选择源自实际输入元素的父/子元素来更改实际输入元素之前和之后的元素样式：

```
validator.settings.highlight = function (element) {
    $(element).parent().parent().find("label:first").addClass("error");
    $(element).parent().parent().find("span.required").addClass("error");
    $(element).parent().parent().find("input:first").addClass("errorImage");
    $(element).parent().parent().find("select:first").addClass("errorImage");
    var errorMessage = $(element).attr("data-val-required");
    if (errorMessage) {
        $(element).parent().parent().find("input:first").attr("custom-error-message", errorMessage);
        $(element).parent().parent().find("select:first").attr("custom-error-message", errorMessage);
    }
};
validator.settings.unhighlight = function (element) {
    $(element).parent().parent().find("label:first").removeClass("error");
    $(element).parent().parent().find("span.required").removeClass("error");
    $(element).parent().parent().find("input:first").removeClass("errorImage");
    $(element).parent().parent().find("select:first").removeClass("errorImage");
    $(element).parent().parent().find("input:first").attr("custom-error-message", "");
    $(element).parent().parent().find("select:first").attr("custom-error-message", "");
};
validator.settings.errorContainer = "#btnSubmit"; 
```

关于上述代码行需要注意的一件事是，我没有使用`title`错误消息的属性，而是`custom-error-message`（或随意调用它）。这是由于我在使用无效`DropDownList`控件时遇到的问题 - 我无法再单击箭头并从列表中选择一个项目，因为控件直接失去了焦点（这也是我在 jQuery 中手动设置`title`时发现的问题`.attr(...`而不是通过`.prop(...`)。

上面使用的 CSS 类和样式可以是任何你喜欢的，而且你想要样式的元素可以根据你的需要进行更改。选择所需元素可能有更简单、更稳定的方法，但基本上上述解决方案对我有用，如果你有类似的问题，应该足以让你开始。

对于`submit`按钮，我决定显示静态文本，而不是所有无效控件错误消息的列表，但如果您需要添加动态文本，下面使用的方法应该仍然有帮助：

```
$(document).tooltip({
    position:
        {
            my: "left bottom-15px",
            at: "center top",
            using: function (position, feedback) {
                $(this).css(position);
                $("<div>")
                    .addClass("arrow")
                    .addClass(feedback.vertical)
                    .addClass(feedback.horizontal)
                    .appendTo(this);
            }
        },
    items: ".errorImage, input[type='submit']", // restrict to certain elements
    content: function () {
        var element = $(this);
        if (element.is("[custom-error-message]")) {
            return element.attr("custom-error-message");
        }
        else {
            if ($("#Formular").valid()) {
                return "";
            }
            else
            {
                return "<span class='error'>Input validation</span><br />Some informative text.";
            }
        }
    }
}); 
```

如果还有更多问题，请随时提出，根据我自己的经验，我知道让这一切正常工作可能是一场噩梦，尽管最终看起来并不太难。

# c++ - 带有内存大小定义的标头

> ID：16031470
> 
> 赞同：8
> 
> 时间：2013-04-16T07:47:29.650
> 
> 标签：c++, c, size, header-files, c-preprocessor

是否有标准的 C/C++ 标头定义字节、千字节、兆字节，...？我不想自己定义。在我看来它很脏。

例子：

```
if (size > MEGABYTE)
{ ... } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-16T07:49:06.913

不，没有这样的标准定义。可能是因为附加值很小。

你经常会看到这样的事情：

```
#define KB(x)   ((size_t) (x) << 10)
#define MB(x)   ((size_t) (x) << 20) 
```

这使用左移来表示操作*x* * 2 ^(10)与*x* * 1,024 相同，对于 2 ^(20)也相同，即 1,024 * 1,024 即 1,048,576。这“利用”了千字节、兆字节等的经典定义在计算中使用二的幂的事实。

转换`size_t`为很好，因为这些是大小，我们希望它们可以很容易地用作 eg 的参数`malloc()`。

使用上述内容，在代码中使用它们变得非常实用：

```
unsigned char big_buffer[MB(1)]; 
```

或 if( statbuf.st_size >= KB(8) ) { printf("文件为 8 KB (或更大)\n"); }

但是您当然可以只使用它们来进行进一步的定义：

```
#define MEGABYTE MB(1) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-02-01T13:22:20.067

正如其他答案指出的那样，没有。C++11 中一个不错的解决方案是使用用户定义的文字：

```
constexpr std::size_t operator""_kB(unsigned long long v) {
  return 1024u * v;
}

std::size_t some_size = 15_kB; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T07:59:20.803

那没有。但是为什么你不自己制作它们：

```
const unsigned long BYTE     = 1;
const unsigned long KILOBYTE = 1024;
const unsigned long MEGABYTE = 1024 * 1024;
const unsigned long GIGABYTE = 1024 * 1024 * 1024; 
```

并且

```
const unsigned long long TERABYTE = 1024ULL * 1024 * 1024 *1024; 
```

[阅读更多...](http://en.wikipedia.org/wiki/Byte)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-31T14:38:15.850

并不是说它增加了很多，但我很喜欢这种形式：

```
#define KILOBYTES * 1024UL
#define MEGABYTES * 1048576
#define GIGABYTES * 1073741824UL 
```

你可以像这样使用

```
 if (size > 10 MEGABYTES) { ... 
```

# c# - 合并mysql中两个数据集的结果

> ID：16031472
> 
> 赞同：1
> 
> 时间：2013-04-16T07:47:30.747
> 
> 标签：c#, asp.net, mysql

我有两张桌子，`table1`和`table2`。我想`column1`从. `table1`_ 然后结合这两个结果并在网格视图中显示为单独的列。这是我的代码：`column1``table2`

```
string query4 = "select tablename from table1 where tid='1'";
MySqlCommand command4 = new MySqlCommand(query4, connection);

DataSet ds = new DataSet();
adapter.SelectCommand = command4;
adapter.Fill(ds);

GridView1.DataSource = ds;
GridView1.DataBind();
string query5 = "select fname from table2 where id='1'";
MysqlCommand command5 = new MySqlCommand(query5, connection);

DataSet ds2 = new DataSet();
adapter.SelectCommand = command5;
adapter.fill(ds2);

Gridview1.DataSource = ds; 
```

这给了我唯一`table1`的价值，但我想在单个网格视图中`table1`显示两列。`table2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:53:00.470

在 MSDN 上快速搜索会出现以下文章[http://msdn.microsoft.com/en-gb/library/803bh6bc.aspx](http://msdn.microsoft.com/en-gb/library/803bh6bc.aspx)

使用`DataSet.Merge()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:54:37.657

你可以用两种方法做到这一点。第一个来自 MySQL 查询，如下所示：

```
string query6 = "select tablename AS value from table1 where tid='1' UNION select fname from table2 as value where id='1'"; 
```

或结合`DataSets`使用`DataSet``DataSet.Merge();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T07:53:19.343

[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html) INNER JOIN 是你的朋友，

```
SELECT
    table1.tablename, 
    table2.fname 
FROM table1 
INNER JOIN table2 
    ON table2.id = table1.tid 
WHERE table1.id = 1 
```

这将在一个查询中获取所有数据

# c++ - OpenGL OBJ 加载程序错误：EXC_BAD_ACCESS 代码 = 1

> ID：16031475
> 
> 赞同：0
> 
> 时间：2013-04-16T07:47:40.183
> 
> 标签：c++, opengl

我刚开始学习 OpenGL，这个程序混合了我自己编写的东西和直接从教程中复制的一些东西以加快进程（就像你很快就会看到的整个 OBJ 加载器）。

我有一个错误

```
 glNormal3f(normals[faces[i]->facenum-1]->x,normals[faces[i]->facenum-1]->y,normals[faces[i]->facenum-1]->z);
            //draw the faces
            glVertex3f(vertex[faces[i]->faces[0]-1]->x,vertex[faces[i]->faces[0]-1]->y,vertex[faces[i]->faces[0]-1]->z);
            glVertex3f(vertex[faces[i]->faces[1]-1]->x,vertex[faces[i]->faces[1]-1]->y,vertex[faces[i]->faces[1]-1]->z);
            glVertex3f(vertex[faces[i]->faces[2]-1]->x,vertex[faces[i]->faces[2]-1]->y,vertex[faces[i]->faces[2]-1]->z);
            glVertex3f(vertex[faces[i]->faces[3]-1]->x,vertex[faces[i]->faces[3]-1]->y,vertex[faces[i]->faces[3]-1]->z); 
```

那个错误是 EXC_BAD_ACCESS 代码 = 1。我完全找不到这个问题的答案，我四处寻找，但不幸的是找不到任何东西。我也知道它也在加载文件，因为这是我遇到但解决的第一个问题。下面是我的所有代码（在一个文件中。我很快就会从头开始制作一个全新的项目）。

主文件

```
#include <GLUT/GLUT.h>
#include <math.h>
#include <iostream>
#include <vector>
#include <algorithm>
#include <fstream>
#include <cmath>

void init();
void keyboard(unsigned char key, int x, int y);
void reshape(int w, int h);
void display();
void camera();
void cubePositions();
void drawCube();
void enable();
void plane();

// Roation angles.
float xPos = 0;
float yPos = 0;
float zPos = 0;
float xRot = 0;
float yRot = 0;
float angle = 0.0;
float lastx, lasty;

// Cubes position arrays.
float cubePosZ[10];
float cubePozX[10];

// Fog variables.
GLfloat fogAngle = 0.0;
GLfloat density = 0.1;
GLfloat fogColor[4] = {0.5, 0.5, 0.5, 1.0};

#define checkImageWidth 64
#define checkImageHeight 64

static GLubyte checkImage[checkImageHeight][checkImageWidth][4];

static GLuint texName;

void makeCheckImage(void)
{
    int i, j, c;

    for (i = 0; i < checkImageHeight; i++) {
        for (j = 0; j < checkImageWidth; j++) {
            c = ((((i&0x8)==0)^((j&0x8))==0))*255;
            checkImage[i][j][0] = (GLubyte) c;
            checkImage[i][j][1] = (GLubyte) c;
            checkImage[i][j][2] = (GLubyte) c;
            checkImage[i][j][3] = (GLubyte) 255;
        }
    }
}

struct coordinate{
    float x,y,z;
    coordinate(float a,float b,float c) : x(a),y(b),z(c) {};
};

//for faces, it can contain triangles and quads as well, the four variable contain which is that
struct face{
    int facenum;
    bool four;
    int faces[4];
    face(int facen,int f1,int f2,int f3) : facenum(facen){  //constructor for triangle
        faces[0]=f1;
        faces[1]=f2;
        faces[2]=f3;
        four=false;
    }
    face(int facen,int f1,int f2,int f3,int f4) : facenum(facen){ //overloaded constructor for quad
        faces[0]=f1;
        faces[1]=f2;
        faces[2]=f3;
        faces[3]=f4;
        four=true;
    }
};
       //we rotate or object with angle degrees

int loadObject(const char* filename)
{
    std::vector<std::string*> coord;        //read every single line of the obj file as a string
    std::vector<coordinate*> vertex;
    std::vector<face*> faces;
    std::vector<coordinate*> normals;       //normal vectors for every face
    std::ifstream in(filename);     //open the .obj file
    if(!in.is_open())       //if not opened, exit with -1
    {
        std::cout << "Nor oepened" << std::endl;
        return -1;
    }
    char buf[256];
    //read in every line to coord
    while(!in.eof())
    {
        in.getline(buf,256);
        coord.push_back(new std::string(buf));
    }
    //go through all of the elements of coord, and decide what kind of element is that
    for(int i=0;i<coord.size();i++)
    {
        if(coord[i]->c_str()[0]=='#')   //if it is a comment (the first character is #)
            continue;       //we don't care about that
        else if(coord[i]->c_str()[0]=='v' && coord[i]->c_str()[1]==' ') //if vector
        {
            float tmpx,tmpy,tmpz;
            sscanf(coord[i]->c_str(),"v %f %f %f",&tmpx,&tmpy,&tmpz);       //read in the 3 float coordinate to tmpx,tmpy,tmpz
            vertex.push_back(new coordinate(tmpx,tmpy,tmpz));       //and then add it to the end of our vertex list
        }else if(coord[i]->c_str()[0]=='v' && coord[i]->c_str()[1]=='n')        //if normal vector
        {
            float tmpx,tmpy,tmpz;   //do the same thing
            sscanf(coord[i]->c_str(),"vn %f %f %f",&tmpx,&tmpy,&tmpz);
            normals.push_back(new coordinate(tmpx,tmpy,tmpz));
        }else if(coord[i]->c_str()[0]=='f')     //if face
        {
            int a,b,c,d,e;
            if(count(coord[i]->begin(),coord[i]->end(),' ')==3)     //if it is a triangle (it has 3 space in it)
            {
                sscanf(coord[i]->c_str(),"f %d//%d %d//%d %d//%d",&a,&b,&c,&b,&d,&b);
                faces.push_back(new face(b,a,c,d));     //read in, and add to the end of the face list
            }else{
                sscanf(coord[i]->c_str(),"f %d//%d %d//%d %d//%d %d//%d",&a,&b,&c,&b,&d,&b,&e,&b);
                faces.push_back(new face(b,a,c,d,e));   //do the same, except we call another constructor, and we use different pattern
            }
        }
    }
    //raw
    int num;        //the id for the list
    num=glGenLists(1);      //generate a uniqe
    glNewList(num,GL_COMPILE);      //and create it
    for(int i=0;i<faces.size();i++)
    {
        if(faces[i]->four)      //if it's a quad draw a quad
        {
            glBegin(GL_QUADS);
            //basically all I do here, is use the facenum (so the number of the face) as an index for the normal, so the 1st normal owe to the first face
            //I subtract 1 because the index start from 0 in C++
            glNormal3f(normals[faces[i]->facenum-1]->x,normals[faces[i]->facenum-1]->y,normals[faces[i]->facenum-1]->z);
            //draw the faces
            glVertex3f(vertex[faces[i]->faces[0]-1]->x,vertex[faces[i]->faces[0]-1]->y,vertex[faces[i]->faces[0]-1]->z);
            glVertex3f(vertex[faces[i]->faces[1]-1]->x,vertex[faces[i]->faces[1]-1]->y,vertex[faces[i]->faces[1]-1]->z);
            glVertex3f(vertex[faces[i]->faces[2]-1]->x,vertex[faces[i]->faces[2]-1]->y,vertex[faces[i]->faces[2]-1]->z);
            glVertex3f(vertex[faces[i]->faces[3]-1]->x,vertex[faces[i]->faces[3]-1]->y,vertex[faces[i]->faces[3]-1]->z);
            glEnd();
        }else{
            glBegin(GL_TRIANGLES);
            glNormal3f(normals[faces[i]->facenum-1]->x,normals[faces[i]->facenum-1]->y,normals[faces[i]->facenum-1]->z);
            glVertex3f(vertex[faces[i]->faces[0]-1]->x,vertex[faces[i]->faces[0]-1]->y,vertex[faces[i]->faces[0]-1]->z);
            glVertex3f(vertex[faces[i]->faces[1]-1]->x,vertex[faces[i]->faces[1]-1]->y,vertex[faces[i]->faces[1]-1]->z);
            glVertex3f(vertex[faces[i]->faces[2]-1]->x,vertex[faces[i]->faces[2]-1]->y,vertex[faces[i]->faces[2]-1]->z);
            glEnd();
        }
    }
    glEndList();
    //delete everything to avoid memory leaks
    for(int i=0;i<coord.size();i++)
        delete coord[i];
    for(int i=0;i<faces.size();i++)
        delete faces[i];
    for(int i=0;i<normals.size();i++)
        delete normals[i];
    for(int i=0;i<vertex.size();i++)
        delete vertex[i];
    return num;     //return with the id
}

// Sets the position of the cubes randomly. Can later be used for more purposeful placements.
void cubePositions()
{
    for (int i = 0; i < 10; i++)
    {
        cubePosZ[i] = rand() % 5 + 5;
        cubePozX[i] = rand() % 5 + 5;
    }
}

void drawCube()
{
    for (int i = 0; i < 10; i++)
    {
        glPushMatrix();
        //glTranslated(-cubePozX[i + 1] * 10, -1, -cubePosZ[i + 1] * 10);
        glTranslated((i + 4), 0, (i - 5));
        glTranslatef(i, 0, 5 * i);
        glScalef(2, 2, 2);
        glBegin(GL_QUADS);

        glTexCoord2f(1, 0);
        glVertex3f(-1, -1, 0);
        glNormal3f(1, 1, 1);

        glTexCoord2f(1, 1);
        glVertex3f(-1, 1, 0);

        glTexCoord2f(0, 1);
        glVertex3f(1, 1, 0);

        glTexCoord2f(0, 0);
        glVertex3f(1, -1, 0);

        glVertex3f(-1, -1, -1);
        glVertex3f(-1, 1, -1);

        glEnd();
        glPopMatrix();
    }
}

void plane()
{

    glPushMatrix();
    glColor4f(1.0, 0.0, 1.0, 1.0);
    glTranslatef(0, -2.5, 0.0);
    glScalef(100, 2, 100);
    glBegin(GL_QUADS);

    glTexCoord2f(0.0, 0.0);
    glVertex3f(-1, 0, 1);

    glTexCoord2f(1.0, 0.0);
    glVertex3f(-1, 0, -0.5);

    glTexCoord2f(1.0, 1.0);
    glVertex3f(1, 0, -0.5);

    glTexCoord2f(0.0, 1.0);
    glVertex3f(1, 0, 1);

    glEnd();
    glPopMatrix();
}
int cube;
void init()
{
    cubePositions();
    cube = loadObject("/Users/Admin/test.obj");
}

void enable()
{
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glEnable(GL_TEXTURE_2D);
    float col[] = {1.0, 1.0, 1.0, 1.0};
    glLightfv(GL_LIGHT0, GL_DIFFUSE, col);
}

void camera()
{
    glRotatef(xRot, 1.0, 0.0, 0.0);
    glRotatef(yRot, 0.0, 1.0, 0.0);
    glTranslated(-xPos, -yPos, -zPos);
}

void display()
{
    glClearColor(0.8, 0.8, 0.8, 1.0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();

    camera();
    enable();
    drawCube();
    plane();
    glCallList(cube);

    glTranslated(-2, 0, 0);
    glutSwapBuffers();
    angle++;
}

void reshape(int w, int h)
{
    glViewport (0, 0, (GLsizei)w, (GLsizei)h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective (60, (GLfloat)w / (GLfloat)h, 1.0, 1000.0);
    glMatrixMode (GL_MODELVIEW);
}

void keyboard(unsigned char key, int x, int y)
{
    if (key == 27)
    {
        exit(0);
    }

    if (key == 'q')
    {
        xRot += 0.5;
        if (xRot > 360)
        {
            xRot -= 360;
        }
    }

    if (key == 'z')
    {
        xRot -= 0.5;
        if (xRot < - 360)
        {
            xRot += 360;
        }
    }

    if (key == 'w')
    {
        float xRotRad;
        float yRotRad;

        xRotRad = (xRot / 180 * 3.14159f);
        yRotRad = (yRot / 180 * 3.14159f);
        xPos += float(sin(yRotRad));
        zPos -= float(cos(yRotRad));
        yPos -= float(sin(xRotRad));
    }

    if (key == 's')
    {
        float xRotRad;
        float yRotRad;

        xRotRad = (xRot / 180 * 3.14159f);
        yRotRad = (yRot / 180 * 3.14159f);
        xPos -= float(sin(yRotRad));
        zPos += float(cos(yRotRad));
        yPos += float(sin(xRotRad));
    }

    if (key == 'd')
    {
        yRot += 1;
        if (yRot > 360)
        {
            yRot -= 360;
        }
    }

    if (key == 'a')
    {
        yRot -= 1;
        if (yRot < -360)
        {
            yRot += 360;
        }
    }

    if (key == 'x')
    {
        yPos -= 1;
    }

    if (key == 'c')
    {
        yPos += 1;
    }
}

void mouseMovement(int x, int y)
{
    int diffX = x - lastx;
    int diffY = y - lasty;

    lastx = x;
    lasty = y;
    xRot += (float)diffY;
    yRot += (float)diffX;
}

int main(int argc, char * argv[])
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_DEPTH);
    glutInitWindowSize(1000, 1000);

    glutInitWindowPosition(100, 100);
    glutCreateWindow("OpenGL GLUT Computing - Taylor Moore");
    init();

    glutDisplayFunc(display);
    glutIdleFunc(display);
    glutReshapeFunc(reshape);
    glutKeyboardFunc(keyboard);
    glutPassiveMotionFunc(mouseMovement);

    glutMainLoop();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:21:25.153

`EXC_BAD_ACCESS`通常意味着您正在尝试访问已释放或解除分配的一块内存。[这是对该术语的 Google 搜索的第一个响应，该术语`EXC_BAD_ACCESS`](http://loufranco.com/blog/understanding-exc_bad_access)解释了追踪原因的两种策略。

# apache - dns 指向错误的目录

> ID：16031476
> 
> 赞同：0
> 
> 时间：2013-04-16T07:47:41.333
> 
> 标签：apache

我正在尝试使用 xampp 在 Windows 中设置两个虚拟主机。从我读过的内容来看，必须更改 Windows 主机文件和 xampp 的 httpd-vhosts.conf 文件。

主机文件：

```
127.0.0.1       gholizadeh
127.0.0.1       doostr
127.0.0.1       localhost 
```

虚拟主机文件：

```
 NameVirtualHost *:80

<VirtualHost gholizadeh>
    DocumentRoot "E:\xampp\htdocs\lowkey\pappa"
    ServerName gholizadeh.se
    ServerAlias www.gholizadeh.se
    <Directory "E:\xampp\htdocs\lowkey\pappa">
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost>

<VirtualHost doostr>
    DocumentRoot "E:\xampp\htdocs\lowkey"
    ServerName doostr.com
    ServerAlias www.doostr.com
    <Directory "E:\xampp\htdocs\lowkey">
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost>

<VirtualHost localhost>
    DocumentRoot "E:\xampp"
    ServerName localhost
    <Directory "E:\xampp">
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

但我在访问这些文件时遇到问题。当我从我自己的 LAN 尝试它时，我会被提示到 xampp 站点，并且当尝试从外部网络进入它时访问被拒绝。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:13:42.570

你`VirtualHost`命令错了。像这样使用它：

```
NameVirtualHost *:80

<VirtualHost *:80>
    ServerName gholizadeh.se
    ServerAlias www.gholizadeh.se
    DocumentRoot "E:\xampp\htdocs\lowkey\pappa"
    <Directory "E:\xampp\htdocs\lowkey\pappa">
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    ServerName doostr.com
    ServerAlias www.doostr.com
    DocumentRoot "E:\xampp\htdocs\lowkey"
    <Directory "E:\xampp\htdocs\lowkey">
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    ServerName localhost
    DocumentRoot "E:\xampp"
    <Directory "E:\xampp">
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

还有一些事情：*您应该`ServerAdmin`向每个主机添加一个 *主机文件中的条目仅用于内部调试目的，我假设？

附带说明：您不打算从这个 MS-Windows 系统在互联网上提供真实的网页，是吗？

# php - html 5 转换和 CSS 被忽略

> ID：16031480
> 
> 赞同：-2
> 
> 时间：2013-04-16T07:47:44.920
> 
> 标签：php, css, html

美好的一天，我们有一个已经存在的 php 站点。如果我添加以下内容：

```
<!DOCTYPE HTML>
<meta charset="utf-8">
<!--[if lt IE 9]>
   <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

这会导致 CSS 被忽略并且站点显示完全错误。有任何想法吗？或者我错过了什么？

```
<html>
  <head>
   <title>Company</title>
   <link rel="SHORTCUT ICON" href="/favicon.ico"/>

<?

   $ua_ok= $_SERVER['HTTP_USER_AGENT'];

if( eregi( "msie", $ua_ok ) )  
     {  

echo "<LINK REL='StyleSheet' TYPE='text/css' HREF='/styles.php'></LINK>";
    }
    else
    {
    echo "<LINK REL='StyleSheet' TYPE='text/css' HREF='/stylesOth.php'></LINK>";    
    }

<script language="JavaScript">

      </script>
      <script language="javascript" src="/scripts/jscripts.php<?=FindClass()?>">
      </script>
   </head>
<!--<body onload="window.history.forward(1);"> --> 
```

所有的浏览器都忽略了 CSS 不仅仅是 IE。

页面输出没有 CSS，页面看起来很普通，没有边框，没有颜色，没有覆盖。

给出错误：

SEC7113：由于 mime 类型不匹配 style.php，CSS 被忽略

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:53:53.787

您`?>`在此处的代码中缺少结束标记：

```
...
?>
<script language="JavaScript">
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:54:17.197

如果向文档添加 Doctype 会使 CSS 停止工作，那么 CSS 中可能存在错误，浏览器将从 Quirks 模式中执行错误恢复。

这些错误通常可以通过确保 CSS 和 HTML 都有效来修复。

使用[CSS 验证器](http://jigsaw.w3.org/css-validator/)和[标记验证器](http://validator.w3.org/)来查找这些错误，以便您修复它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:10:15.490

在您的编辑揭示了 SEC7113 错误后，我只给出了另一个答案：由于您的 CSS 源文件是 php 脚本，因此将 CSS 标头强制位于`styles.php`和`stylesOth.php`

```
<? header("Content-type: text/css");?> 
```

顺便说一句：您的代码存在一些有效性错误，您应该真正查看 Quentin 建议的链接。

# php - PHP Mutliarray 键和值打印

> ID：16031482
> 
> 赞同：0
> 
> 时间：2013-04-16T07:48:06.167
> 
> 标签：php, arrays, multidimensional-array

```
$icecream = array (
    "Choco" => array('2 Dollars'),
    "Mango" => array('3 Dollars')
 ); 
```

打印$冰淇淋[0][0]；

预期产出： *2 美元*

编辑：我有一个巨大的冰淇淋种类列表，我确实想使用循环将所有信息输出为 HTML DOM。所以我不想遍历每个数组值并用显式值（即'Choco'、'Orange'等......）来回显它。

我想将值用作“第一个数组级别”（$icecream[0]）的键，

它根本不输出任何东西。我对这个解决方案的逻辑缺陷是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T07:49:42.517

尝试这个：

`echo $icecream['Choco'][0]`

您的问题是为第一个暗淡调用错误的键

. .

对于您更新的问题，请尝试以下操作：

```
$ice_k = array_keys($icecream);
echo  $icecream[$ice_k[0]][0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:56:14.357

您没有正确使用关联数组。您需要使用正确的密钥。

```
 echo $icecream['choco'][0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:43:34.663

您可以使用位置，但它将是这样的计数器：

```
$counter = 0;
foreach($icecream As $k=>$v) {
    echo $icecream[$k][0] . ' [' . $counter . ']';
    $counter++;
} 
```

如果你只想获得价值，你可以使用以前的代码

```
$ice_k = array_keys($icecream);
$position = 5;
if( isset($ice_k[$position]) ) {
    echo  $icecream[$ice_k[$position]][0];
} 
```

# android - Android：对话框中的空指针异常

> ID：16031483
> 
> 赞同：0
> 
> 时间：2013-04-16T07:48:06.040
> 
> 标签：android, dialog, nullpointerexception

我有一个对话框，其中包含两个编辑文本框。

![在此处输入图像描述](https://i.stack.imgur.com/ChNvL.png)

当我填写字段并单击提交按钮时，我需要将值保存在数据库中。我正在尝试获取在字段中输入的值，但会引发空指针异常。

我的代码如下

```
 View v = getLayoutInflater().inflate(R.layout.sample, null);
            new AlertDialog.Builder(Context)
                    .setTitle(R.string.Details)
                    .setView(v)
                    .setNegativeButton(R.string.Cancel,
                            new DialogInterface.OnClickListener() {

                                @Override
                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    // TODO Auto-generated method stub

                                }
                            })
                    .setPositiveButton(R.string.Submit,
                            new DialogInterface.OnClickListener() {

                                @Override
                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    final EditText txtname=(EditText)findViewById(R.id.editText1);
                                    final EditText txtnumber=(EditText)findViewById(R.id.editText2);
                                    Save(txtname.getText().toString(),txtnumber.getText().toString());
                                } 
```

当我调试和检查时，它显示 txtname 和 txtnumber 值为空。我哪里做错了？我正在使用布局来显示字段

布局是，

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TableRow>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:text="Name" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="195dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:ems="10"
        android:hint="FirstName LastName"
        android:inputType="textPersonName" />

</TableRow>

<TableRow>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:text="Phone" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="190dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:ems="10"
        android:inputType="number"
        android:maxLength="10" />

</TableRow> 
```

请帮我解决这个异常！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T07:53:37.363

你的`txtname`和`txtnumber`是空的

IE

```
final EditText txtname=(EditText)findViewById(R.id.editText1);
 final EditText txtnumber=(EditText)findViewById(R.id.editText2); 
```

当您尝试访问空引用时，您将得到`NullPointerException`

试着让他们像这样

```
final EditText txtname=(EditText)v.findViewById(R.id.editText1);
 final EditText txtnumber=(EditText)v.findViewById(R.id.editText2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:52:32.543

我想你看错地方了。尝试使用：

```
final View v = getLayoutInflater().inflate(R.layout.sample, null); 
```

然后

```
final EditText txtname=(EditText)v.findViewById(R.id.editText1);
final EditText txtnumber=(EditText)v.findViewById(R.id.editText2); 
```

在“v”视图中找到 EditText。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T07:52:38.460

由于您没有提供完整的代码和堆栈跟踪，因此我进行了大胆的猜测，但我假设它是正确的：您使用 findViewById 从活动的内容视图而不是从膨胀视图获取编辑文本. 改变：

```
findViewById(R.id.editText1);
findViewById(R.id.editText2); 
```

至

```
v.findViewById(R.id.editText1);
v.findViewById(R.id.editText1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T07:52:56.170

您需要从 dialod 的布局中获取视图

```
public void onClick(DialogInterface dialog,
                                    int which) {
    final EditText txtname=(EditText)dialog.findViewById(R.id.editText1);
    final EditText txtnumber=(EditText)dialog.findViewById(R.id.editText2);
                                Save(txtname.getText().toString(),txtnumber.getText().toString());
                            } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T07:53:03.633

请检查资源 ID，它也会导致 NPE。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-16T07:53:16.137

`findViewById`是相对于活动的。您的视图不在活动中，而是在对话框中。你需要打电话

```
dialog.findViewById 
```

从这个范围。

# c# - 为 Windows Phone 中的绑定提供额外的上下文

> ID：16031485
> 
> 赞同：0
> 
> 时间：2013-04-16T07:48:08.793
> 
> 标签：c#, .net, windows-phone-8, mvvm

我有一个 MVVM 模型，它包含两条数据、一个值（它包含多个，但我将一次绑定到一个）和一个显示上下文。显示上下文更像是一个格式化字符串。现在我试图在使用该显示上下文来正确格式化它的同时绑定视图中的值。

我曾尝试使用值转换器，但无法将两个字段都发送给它。我尝试在没有特定属性的情况下进行绑定，以便在值转换器中获得整个模型，但这有两个问题：1\. 值更改时通知停止 2\. 我没有一个好的方法来确定我们绑定到哪个属性.

我可以通过在进行格式化的模型上使用更智能的属性来解决这个问题，但这需要将值的数量加倍并让模型参与演示。

所以我的问题是：干净地解决这个问题的理想方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:44:08.093

如果我理解正确，那么您在从转换器访问格式字符串时遇到问题。我认为在模型层中有格式化字符串（与数据表示有关）并不完全是 MVVM 方式。对我来说，你应该把它放到你的视图模型中。然后你可以通过数据绑定将它作为参数传递给转换器。

这是您如何执行此操作的示例：

```
<TextBlock Text="{Binding Address, Converter={StaticResource AddressToShortOneLinerAddress},ConverterParameter={Binding YourFormattingString}}" TextWrapping="NoWrap" Style="{StaticResource PhoneTextSubtleStyle}"/> 
```

注意`ConverterParameter`属性。您可以将其绑定到视图模型的属性，该属性包含格式化字符串。然后您将`object parameter`在`Convert`通话中收到它：

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture) 
```

它有帮助吗？还是我完全错过了你的意思？

**编辑：** 好的，因为前面的例子实际上不起作用，这是另一种方法。这个想法基本上是绑定整个`DataContext`，并在转换器中将其转换为您的视图模型类型，并从那里获取格式化字符串。不那么优雅，但应该工作。这是示例代码，XAML：

```
<TextBlock Text="{Binding Converter={StaticResource AddressToShortOneLinerAddress}, TextWrapping="NoWrap" Style="{StaticResource PhoneTextSubtleStyle}"/> 
```

...和转换器：

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    var viewModel = value as MyViewModel;
    if (viewModel != null)
    {
        string format = viewModel.FormattingString;
        return ...;
    } 
    return null;
} 
```

请注意我是如何错过了XAML`Path`中表达式的属性。`Binding`这样的语法意味着我们绑定到整个对象，而不是它的一个属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:23:42.853

我最终通过将值和上下文封装到一个属性中并将其拆分到值转换器中来解决这个问题。这使我可以保持通知正常工作，但需要添加一个额外的类型。

# spring - 在 Idea 中部署到 tc Server

> ID：16031489
> 
> 赞同：5
> 
> 时间：2013-04-16T07:48:19.877
> 
> 标签：spring, intellij-idea, spring-insight, tcserver

我正在尝试使用 tc Server Idea 插件在 Idea 中运行我的应用程序并收到以下日志

```
Connected to server
wrapper  | Starting the VMware vFabric tc Runtime instance - tcruntime-C-STS-vfabric-tc-server-developer-2.8.2.RELEASE-insight service...
wrapper  | VMware vFabric tc Runtime instance - tcruntime-C-STS-vfabric-tc-server-developer-2.8.2.RELEASE-insight started.
[11:53:08.709] Not allowed to connect. Check role and password.
[11:53:08.709] There is an application at /bps. Starting redeploy... 
[11:53:08.714] Not allowed to connect. Check role and password.
[11:53:08.715] Starting undeployment of /bps ... 
[11:53:08.720] Not allowed to connect. Check role and password.
[11:53:08.721] Starting deployment of 'bps:war exploded' to /bps ... 
[11:53:08.725] Not allowed to connect. Check role and password. 
```

任何人都可以描述什么问题吗？我无法完全理解如何在 tc Server 中配置用户和角色。

更新

上述问题通过启用 jmx 解决。但是现在还有一个问题

```
16-Apr-2013 14:36:36.023 SEVERE [RMI TCP Connection(4)-127.0.0.1] org.apache.tomcat.util.modeler.BaseModelMBean.invoke Exception invoking method deployApplication
 java.lang.RuntimeException: Unable to find host
    at com.springsource.tcserver.serviceability.deploy.TcContainerDeployer.deployApplication(TcContainerDeployer.java:409)
    at com.springsource.tcserver.serviceability.deploy.TcContainerDeployer.deployApplication(TcContainerDeployer.java:399)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:792)
    at com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:468)
    at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1486)
    at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:96)
    at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1327)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1426)
    at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:847)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:322)
    at sun.rmi.transport.Transport$1.run(Transport.java:177)
    at sun.rmi.transport.Transport$1.run(Transport.java:174)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-02T08:23:28.643

重写 CrazyCoders 评论作为答案：

我需要检查*运行/调试配置*| *服务器选项卡*| *启用 JMX 身份验证*。

密码和角色位于：*CATALINA_BASE/conf/jmxremote.password*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:12:53.693

我有一个建议是什么*主机*。
tc Server 部署 API 的一部分是服务和主机的概念。有一些服务，每个服务都包含一些主机。IDEA 插件默认提供*Catalina*服务和*localhost*主机。它们在*运行/调试配置 |中配置。部署选项卡 | 服务器服务名称*和*服务器主机名*（您需要部署一些东西才能看到这些设置）。
现在如何获得正确的值。它们可通过 JMX 获得。使用 jconsole.exe 从您的 JDK 连接到`service:jmx:rmi:///jndi/rmi://<your host>:<your port>/jmxrmi`. 它可能需要您用于服务器 JMX 的登录名和密码。然后打开*tc server | 部署者 | 运营*在左侧面板的树中。操作*getServices*将列出您可用的服务，而*getHosts*将列出所选服务的所有主机。

# ajax - AJAX 发布到 asp.net MVC 控制器方法不起作用

> ID：16031495
> 
> 赞同：0
> 
> 时间：2013-04-16T07:48:28.343
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, jquery

我的控制器中有这个方法：

```
[HttpPost]
public ActionResult Create(StatusMessage statusMessage, int foreignKey, int statusMessageType)
{
    //Do something
} 
```

这就是我的 StatusMessage 模型的样子：

```
public abstract class StatusMessage 
{
    [Key]
    public int Id { get; set; }

    /// <summary>
    /// Message
    /// </summary>
    /// [Required]
    public string Description { get; set; }

    public DateTime CreationDate { get; set; }

    public int UseraccountId { get; set; }
    public virtual Useraccount Useraccount { get; set; }
} 
```

我想通过 jquery ajax 向我的控制器发送一个帖子：

```
function sendForm(message, foreignKey, statusMessageType, target) {
    var statusMessage = {
      Description: "This is a test message"
    };
    $.ajax({
        url: target,
        type: "POST",
        contentType: 'application/json',
        data: JSON.stringify({
            statusMessage: statusMessage,
            foreignKey: foreignKey,
            statusMessageType: statusMessageType
        }),
        success: ajaxOnSuccess,
        error: function (jqXHR, exception) {
            alert(exception);
        }
    });
} 
```

但是 POST 没有正确发送。通过测试，我已经发现问题出在 StatusMessage 类。如果我用字符串替换它，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:55:05.613

为什么您将您的类定义为**abstract**，控制器将无法创建其实例

将您的班级定义为

```
 public class StatusMessage 
```

信息[http://www.codeproject.com/Articles/6118/All-about-abstract-classes](http://www.codeproject.com/Articles/6118/All-about-abstract-classes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:53:43.033

您的 ajax 帖子不起作用，因为**`StatusMessage`它是一个抽象类**，您（或控制器）无法创建它的实例。您应该将其设为具体类或从中派生另一个类。

# django - 使用包含标签登录每个页面：示例和疑问

> ID：16031496
> 
> 赞同：0
> 
> 时间：2013-04-16T07:48:33.237
> 
> 标签：django, django-models, django-forms, django-templates, django-views

我在项目的每个页面上都需要一个登录表单，并且我正在使用[包含标签](https://docs.djangoproject.com/en/1.5/howto/custom-template-tags/#inclusion-tags)来实现它。使用 django 文档和一些类似的示例，[到目前为止](https://stackoverflow.com/questions/9384922/how-to-make-the-login-form-available-on-whole-site-on-django)，我已经编写了以下代码：

*   项目树：

    ```
    myProj
    ├── myProj
    │   └── settings.py
    ├── celeryPy2
    │   ├── forms.py
    │   ├── templatetags
    │   │   └── my_tags.py
    │   ├── urls.py
    │   └── views.py
    └── templates
        ├── base.html
        └── celeryPy2
            ├── login.html
            └── start.html 
    ```

*   网址.py

    ```
    from django.contrib.auth.views import login, logout

    urlpatterns = patterns('celeryPy2.views',
        url(r'^$',    'start',   name='start'),
        url(r'^accounts/login/$', login,  name='login'),
        url(r'^accounts/logout/$', logout, {'next_page':'/celeryPy2'}, name='logout'),
    ) 
    ```

*   视图.py

    ```
    def start(request):
        return render_to_response('celeryPy2/start.html', {},
                                  context_instance=RequestContext(request)) 
    ```

*   开始.html

    ```
    {% extends "base.html" %}
    {% block title %}celeryPy2 start page{% endblock title %}
    {% block content %}
    {% load my_tags %}
    {% login_form %}
    {% endblock content %} 
    ```

*   base.html

    ```
    <!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head><meta charset="utf-8" /><title>celeryPy2</title></head>
    <body>
        <div id="header">{% block header %}{% endblock %}</div>
        <div id="content">{% block content %}{% endblock %}</div>
        <footer id="footer">{% block footer %}{% endblock %}</footer>
    </body>
    </html> 
    ```

*   my_tags.py

    ```
    from django import template
    register = template.Library()

    from celeryPy2.forms import UserForm

    @register.inclusion_tag('celeryPy2/login.html', takes_context=True)
    def login_form(context):
        form = UserForm
        user = context['user']
        return {'form': form,'user': user} 
    ```

*   表格.py

    ```
    class UserForm(ModelForm):
        class Meta:
            model = User
            fields = ('username','password') 
    ```

*   登录.html

    ```
    {% if not user.is_authenticated %}
        <form  id="idLogInForm" method="post" action="{% url 'django.contrib.auth.views.login' %}?next=/celeryPy2" class="loginForm">{% csrf_token %}
            {{ form.as_p }}
            <button id="idLogInSubmit" name="idLogInSubmit" type="submit">Login</button>
        </form>
    {% else %}
        <form id="idLogOutForm" method="post" action="{% url 'django.contrib.auth.views.logout' %}">{% csrf_token %}
            <span id="welcomeUserId" class="welcomeUserClass">Welcome, <strong>{{ user.username }}</strong></span>
            <button id="idLogOutSubmit" name="idLogOutSubmit" type="submit">Logout</button>
        </form>
    {% endif %} 
    ```

我有以下问题和疑问：

1.  这是实现它的正确方法还是我会遇到安全问题？
2.  当我插入错误的用户凭据时，我正确地得到了错误`Please enter a correct username and password. Note that both fields may be case-sensitive.`，并且浏览器 url 栏设置为`/celeryPy2/accounts/login/?next=/celeryPy2`. 但是，如果我尝试重新登录，它会尝试访问不存在的 url `/accounts/profile/`。为什么？我不得不说我的settings.py中没有`LOGIN_URL`或`LOGIN_REDIRECT_URL`。**[已解决，见下文]**
3.  为什么我得到的密码输入字段是明文而不是被掩码字符隐藏？**[已解决，见下文]**
4.  为什么我`Required. 30 characters or fewer. Letters, numbers and @/./+/-/_ characters`在用户名输入字段旁边得到标签？**[已解决，见下文]**

这是我发现有一个代码插件可以在每个页面中重用的方式，它与 django 内置功能尽可能兼容。这对我来说看起来有点棘手（涉及很多文件），可能还有一些需要改进的地方，但我发现这是完成任务的最简单方法。欢迎任何其他**更好**的想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:42:37.890

我通过以下代码修改解决了第 2、3 和 4 点：

*   网址.py

    ```
    from django.contrib.auth.views import login, logout

    urlpatterns = patterns('celeryPy2.views',
        url(r'^$',    'start',   name='start'),
        url(r'^login/$', login, {'template_name':'celeryPy2/login.html'},  name='login'),
        url(r'^logout/$', logout, {'next_page':'/celeryPy2'}, name='logout'),
    ) 
    ```

*   表格.py

    ```
    from django.forms import CharField
    from django.forms import ModelForm, PasswordInput
    from django.contrib.auth.models import User

    class UserForm(ModelForm):
        username = CharField()
        class Meta:
            model = User
            fields = ('username','password')
            widgets = {'password': PasswordInput()} 
    ```

*   登录.html

    ```
    {% if not user.is_authenticated %}
        <form  id="idLogInForm" method="post" action="{% url 'login' %}" class="loginForm">{% csrf_token %}
            {{ form.as_p }}
            <button id="idLogInSubmit" name="idLogInSubmit" type="submit">Login</button>
        </form>
    {% else %}
        <form id="idLogOutForm" method="post" action="{% url 'logout' %}">{% csrf_token %}
            <span id="welcomeUserId" class="welcomeUserClass">Welcome, <strong>{{ user.username }}</strong></span>
            <button id="idLogOutSubmit" name="idLogOutSubmit" type="submit">Logout</button>
        </form>
    {% endif %} 
    ```

最后我添加`LOGIN_REDIRECT_URL='/celeryPy2'`到 myProj/settings.py 中。

第 1 点仍然是开放的：这个实现是一个好的实现还是可能导致安全问题？

# android - Android Annotation - 生成类的方法初始化时出现空指针异常

> ID：16031500
> 
> 赞同：1
> 
> 时间：2013-04-16T07:48:41.427
> 
> 标签：android, android-annotations

我刚刚使用 Android 注释库开始了一个新的 Android 项目。 [安卓注解](http://androidannotations.org/)

我有两个 Activity：StartScreen，其中包含一个按钮“信息”，用于启动第二个 Activity InfoActivity。两者都有注释。

第一个工作得很好，但是当我点击“信息”按钮时，我在生成的类上有一个`NullPointerException`：`public static class IntentBuilder_`'InfoActivity_'

这是错误跟踪：

```
04-16 09:32:29.329: E/AndroidRuntime(561): FATAL EXCEPTION: main
java.lang.NullPointerException
at android.content.ComponentName.<init>(ComponentName.java:75)
at android.content.Intent.<init>(Intent.java:3122)
at com.cinapp.dombox.tablet.activity.InfoActivity_$IntentBuilder_.<init>(InfoActivity_.java:63)
at com.cinapp.dombox.tablet.activity.InfoActivity_.intent(InfoActivity_.java:53)
at com.cinapp.dombox.tablet.activity.StartScreen.buttonInformation(StartScreen.java:24)
at com.cinapp.dombox.tablet.activity.StartScreen_$1.onClick(StartScreen_.java:44)
at android.view.View.performClick(View.java:3511)
at android.view.View$PerformClick.run(View.java:14105)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

这里`InfoActivity`或多或少是空的：

```
@EActivity(R.layout.activity_info)
public class InfoActivity extends Activity {

} 
```

这是`InfoActivity_`：

```
public final class InfoActivity_
extends InfoActivity
{

@Override
public void onCreate(Bundle savedInstanceState) {
    init_(savedInstanceState);
    super.onCreate(savedInstanceState);
    setContentView(layout.activity_info);
}

private void init_(Bundle savedInstanceState) {
}

private void afterSetContentView_() {
}

@Override
public void setContentView(int layoutResID) {
    super.setContentView(layoutResID);
    afterSetContentView_();
}

@Override
public void setContentView(View view, LayoutParams params) {
    super.setContentView(view, params);
    afterSetContentView_();
}

@Override
public void setContentView(View view) {
    super.setContentView(view);
    afterSetContentView_();
}

public static InfoActivity_.IntentBuilder_ intent(Context context) {
    return new InfoActivity_.IntentBuilder_(context);
}

public static class IntentBuilder_ {

    private Context context_;
    private final Intent intent_;

    public IntentBuilder_(Context context) {
        context_ = context;
        intent_ = new Intent(context, InfoActivity_.class);
    }

    public Intent get() {
        return intent_;
    }

    public InfoActivity_.IntentBuilder_ flags(int flags) {
        intent_.setFlags(flags);
        return this;
    }

    public void start() {
        context_.startActivity(intent_);
    }

    public void startForResult(int requestCode) {
        if (context_ instanceof Activity) {
            ((Activity) context_).startActivityForResult(intent_, requestCode);
        } else {
            context_.startActivity(intent_);
        }
    }

}

} 
```

最后是`Android Manifest`

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.exemple.application"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="15"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".activity.StartScreen_"
        android:label="@string/title_activity_start_screen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".activity.InfoActivity_"
        android:label="@string/title_activity_info" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.exemple.application.activity.StartScreen_" />
    </activity>
</application>

</manifest> 
```

**这应该很容易，但我想错过了一些东西**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:34:48.437

你如何开始你的第二个活动？

根据堆栈跟踪，似乎 Intent 中的上下文为空，所以我认为您是这样拨打电话的`InfoActivity_.intent(null).start()`

当您创建一个新活动时，您需要将上下文传递给它，因此在 StartScreenActivity 中您应该执行以下操作：`InfoActivity_.intent(this).start()`

# android - Android ActionBarSherlock 和SlidingMenu，菜单片段错误

> ID：16031501
> 
> 赞同：0
> 
> 时间：2013-04-16T07:48:42.170
> 
> 标签：android, actionbarsherlock, fragment, slidingmenu

作为标题，我在我的 APP 上使用了 ActionBarSherlock 和 SlidingMenu。

要在操作栏上添加菜单项，我所做的是：

```
public class Main extends SherlockFragmentActivity
{
  protected void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setTheme(R.style.Theme_Sherlock);
    requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
    getSupportActionBar();
    setContentView(R.layout.main);

    FragmentManager fm=getSupportFragmentManager();
    FragmentTransaction ft=fm.beginTransaction();
    menuFrag=fm.findFragmentByTag("f1");
    if(menuFrag==null)
    {
      menuFrag=new MenuFragment();
      ft.add(menuFrag, "f1");
    }
    ft.commit();

    //...other stuff
  }

  /**
  * A fragment that displays a menu.  This fragment happens to not
  * have a UI (it does not implement onCreateView), but it could also
  * have one if it wanted.
  */
  @SuppressLint("ValidFragment")
  public class MenuFragment extends SherlockFragment
  {
    public MenuFragment(){}

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
      super.onCreate(savedInstanceState);
      setHasOptionsMenu(true);
    }

    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
    {
      itemProgram=menu.add(0, MENU_ID_PROGRAMS, 0, getString(R.string.menuProgram));
      itemProgram.setIcon(R.drawable.icon_programs_select).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

      itemMyList=menu.add(0, MENU_ID_MYLIST, 0, getString(R.string.menuMyList));
      itemMyList.setIcon(R.drawable.icon_mylist).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

      itemPlaying=menu.add(0, MENU_ID_PLAYING, 0, getString(R.string.menuPlaying));
      itemPlaying.setIcon(R.drawable.icon_playing).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
    }
  }
} 
```

在大多数情况下它运行良好，但有时我在启动我的应用程序时会收到此错误

```
android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment 
make sure class name exists, is public, and has an empty constructor that is public 
```

我的APP刚刚崩溃...

为了遵循该错误消息，我确实在 MenuFragment 上添加了一个空构造函数，但我的 APP 有时仍会因相同的错误而强制关闭。

我还在 StackOverflow 中阅读了一些关于此的主题，但还不够了解。

我能做些什么来克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:53:05.267

好的，我终于用这个解决了这个问题

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
  itemProgram=menu.add(0, MENU_ID_PROGRAMS, 0, getString(R.string.menuProgram));
  itemProgram.setIcon(R.drawable.icon_programs_select).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

  itemMyList=menu.add(0, MENU_ID_MYLIST, 0, getString(R.string.menuMyList));
  itemMyList.setIcon(R.drawable.icon_mylist).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

  itemPlaying=menu.add(0, MENU_ID_PLAYING, 0, getString(R.string.menuPlaying));
  itemPlaying.setIcon(R.drawable.icon_playing).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
  return super.onCreateOptionsMenu(menu);
} 
```

而不是这个

```
public class MenuFragment extends SherlockFragment
{
  public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
  {
    //Some stuff...
  }
} 
```

并解决了我的问题。

# javascript - 在javascript中将数组添加到数组

> ID：16031502
> 
> 赞同：0
> 
> 时间：2013-04-16T07:48:44.697
> 
> 标签：javascript, jquery

我有数组项作为下面的代码，我想将这些数组项“keywords_name”或“keywords_name”推送到我使用的 Chart.js 库中。我可以通过调用“标签”或“数据集”中的每个数组项来使用我在下面所做的事情，但我想那不应该是这样。

```
// Top keywords.
            var keywords_name = [];
            var keywords_num = [];

            for(i = 1; i<=10; i++){
                keywords_name.push($("#content .box_segment:eq(1) table tbody tr:nth-child("+i+") td:first").text());
                keywords_num.push(parseInt($("#content .box_segment:eq(1) table tbody tr:nth-child("+i+") td:last").text()))
            }

            var bardata = {
                labels : [keywords_name[1], keywords_name[2], keywords_name[3], keywords_name[4]],
                datasets : [
                    {
                        fillColor : "rgba(220,220,220,0.5)",
                        strokeColor : "rgba(220,220,220,1)",
                        data : [1,2,3,4]
                    }
                ]
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:44:12.750

你为什么不像这样将获得的数组分配给新的 bardata 对象？：

```
var bardata = {
               labels : keywords_name,
               datasets : {
                           fillColor : "rgba(220,220,220,0.5)",
                           strokeColor : "rgba(220,220,220,1)",
                           data : keywords_num
                          }
              } 
```

# linux - 带有 rsync 的 Ubuntu Cronjob

> ID：16031504
> 
> 赞同：-6
> 
> 时间：2013-04-16T07:48:50.543
> 
> 标签：linux, ubuntu, backup, crontab, rsync

目前在工作场所服务器上，我们每天运行一次备份，由于大小限制，我们需要每隔三天（或类似的时间）进行一次备份。我们使用 Rsync 进行备份。我想做的只是改变脚本的运行时间，所以每天都会运行一次。

所以我想知道这是否可能？我担心的是大小不会缩小，因为备份仍会执行仅一天的“3 天备份”。很难解释，所以我会举例说明。

我想要的是：

*   第 1 天 - 运行备份
*   第 2 天
*   第 3 天
*   第 4 天 - 运行备份
*   第 5 天

我担心会发生什么：

*   第 1 天 - 运行备份
*   第 2 天 - 从第 4 天开始应用备份
*   第 3 天 - 从第 4 天开始应用备份
*   第 4 天 - 运行备份
*   第 5 天

crontab 作业如下所示：

> 5 7 * * * ../rsyncsnapshot.sh 每天 30

脚本看起来像这样

```
if [ $# != 2 ]; then
echo "Usage: backup.sh interval_name count"
exit 1
fi

NAME=$1
COUNT=$2

TIMESTAMP=`date -u "+%Y-%m-%d %H:%M:%S%z"`
echo "*** Backup started $TIMESTAMP (interval $NAME, count $COUNT) ***"

echo "Deleting $DEST_DIR/$NAME.$((COUNT-1))"
ssh $DEST_HOST rm -rf $DEST_DIR/$NAME.$(($COUNT-1))

for i in `seq $(($COUNT-1)) -1 2`;
do
  j=$(($i-1))
  echo "Moving $DEST_DIR/$NAME.$j to $DEST_DIR/$NAME.$i"
  ssh $DEST_HOST mv $DEST_DIR/$NAME.$j $DEST_DIR/$NAME.$i
done

echo "Copying $DEST_DIR/$NAME.0 to $DEST_DIR/$NAME.1"
ssh $DEST_HOST cp -al $DEST_DIR/$NAME.0 $DEST_DIR/$NAME.1

echo "Copying source ($SRC) to $DEST_HOST:$DEST_DIR/$NAME.0/"
rsync $RSYNC_ARGS $SRC $DEST_HOST:$DEST_DIR/${NAME}.0/
ssh $DEST_HOST touch $DEST_DIR/$NAME.0

TIMESTAMP=`date -u "+%Y-%m-%d %H:%M:%S%z"`
echo "*** Backup ended $TIMESTAMP ***"
echo "Quota as follows:"
ssh $DEST_HOST quota 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:56:34.530

要显着减少使用的空间量，您需要减少保留的副本数量。这是脚本的第二个参数。因此，如果您每 3 天运行一次，并希望保留一个月的备份，请将其更改为：

```
../rsyncsnapshot.sh daily 10 
```

# linq - 按列获取每个实体订单的第一条记录

> ID：16031506
> 
> 赞同：0
> 
> 时间：2013-04-16T07:48:56.127
> 
> 标签：linq, entity-framework

我在 linq 中有一个查询，可以获取学生评估数据，例如

```
new {x.StudentId, x.StudentAssessmentId, x.AssessmentName, x.SubmittedDate} 
```

然后我在这个列表上执行一些操作来获得每个学生最后添加的学生评估，我通过找到 studentassessment 的最大 id 来获得最后一个 studentassessment，

所以我终于得到了所有学生的最后一个学生评估数据。

有没有办法直接在初始列表中执行此操作？

我考虑了按学生ID对结果进行分组并选择最大学生评估ID的方法，例如

```
group x.StudentAssessmentId by x.StudentId
select new {x.Key, x.Max()} 
```

通过这种方式，我将获得最后一个 studentassessmentid 的学生，这是我想要的，但这只会给我 studentassessment id，而我还想要其他数据，如 AssessmentName、SubmittedDate 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:57:59.533

尝试这样的事情：

```
group x.StudentAssessmentId     
by new {
        x.StudentId, 
        x.AssessmentName,
        x.SubmittedDate } 
into g
select new 
{
  g.Key.StudentId, 
  g.Key.AssessmentName, 
  g.Key.SubmittedDate,
  g.Max(),
} 
```

# node.js - 将 Blanket.js 用于 Compoundjs 应用程序以生成覆盖率报告

> ID：16031514
> 
> 赞同：0
> 
> 时间：2013-04-16T07:49:34.890
> 
> 标签：node.js, code-coverage, mocha.js, compoundjs

我有 Compoundjs 应用程序，在其中我使用了脚手架生成器来生成控制器及其测试用例。测试用例运行正常。但我需要为此生成代码覆盖率报告。我正在尝试使用***毯子.js***。

我在脚本的*package.json*中配置了这样的*毯子.js ：*

 *```
"blanket": { "pattern": "app" } 
```

***app***是包含我所有控制器、模型等的文件夹。然后我正在运行具有报告器的测试用例：

> 摩卡测试/init.js 测试/控制器/sample_controller.test.js --require 毯子 -R html-cov > coverage.html

这实际上是为它正确生成覆盖率报告。但我面临的问题是它只显示某些文件的代码覆盖率，就像它显示代码覆盖率`model/sample`但不显示`controllers/sample_controller.js`.

请尽快帮助我，因为我实际上被困住了。非常感谢提前，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:23:57.740

这些是 eval 控制器，对吧？我正在调查下一版 Blanket (v1.1.3) 中 eval 控制器的覆盖率。与此同时，伊斯坦布尔和 grunt-blanket 也是一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:25:25.060

选项 1：尝试使用`_mocha`而不是`mocha`避免 mocha 分叉并且不在同一进程中覆盖所有代码。

选项 2：我强烈推荐伊斯坦布尔作为覆盖工具。尝试：

```
npm -g install istanbul
istanbul cover _mocha -- test/init.js test/controllers/sample_controller.test.js --require blanket -R spec
open coverage/lcov-report/index.html 
```

更多信息：[https ://github.com/gotwarlost/istanbul/issues/44](https://github.com/gotwarlost/istanbul/issues/44)*

# java - JAVA_HOME 未正确定义（仅来自 jenkins）

> ID：16031515
> 
> 赞同：13
> 
> 时间：2013-04-16T07:49:35.040
> 
> 标签：java, ant, jenkins

尝试设置詹金斯，但我的构建失败：

```
$ ant test
Error: JAVA_HOME is not defined correctly.
  We cannot execute /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java
Build step 'Invoke Ant' marked build as failure 
```

如果我在机器上手动运行“ant test”，它工作得很好，并且 JAVA_HOME 设置为完全相同的值。知道詹金斯尝试运行它时为什么会失败吗？是否有更多的环境变量涉及（虽然我看不到）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-22T19:34:33.243

对于其他人，我必须`PATH` `/usr/bin/`在 Jenkins 中将 PATH 添加到我的变量中。（使用 找到正确的路径`which java`）。

詹金斯 > `Manage Jenkins`>`Configure System`

添加一个`Environment Variable`>>

`e.g:`

名称：`PATH`
值：`/usr/local/bin/:/usr/bin/`

## 截屏

![在此处输入图像描述](https://i.stack.imgur.com/73rMn.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T15:43:17.813

问题是这样的，我忘记在项目配置中选中“限制该项目可以运行的位置”框。因此，测试尝试在“master”上执行，其中 JAVA_HOME 与我打算运行它的构建执行器上的预期不同。因此，我测试的地方和实际运行的地方是不同的机器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-31T02:00:27.867

`JAVA_HOME`在 Jenkins 2.107.1 中设置您的 Jenkins 系统配置。

打开你的jenkins，例如[http://192.168.1.12:9090](http://192.168.1.12:9090)，然后添加`/configure`到url，即`http://192.168.1.12:9090/configure`，然后你可以找到如下：

[![在此处输入图像描述](https://i.stack.imgur.com/w5j7A.png)](https://i.stack.imgur.com/w5j7A.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-28T16:37:49.780

对我来说，上面的选项没有帮助，通过创建一个指向所要求内容的链接来解决：

```
sudo ln -s ${actual_java_location} /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java 
```

actual_java_location 可以通过以下方式读取：

```
 readlink -f $(which java) 
```

# spring-mvc - 如何在spring mvc中设置关联类的属性

> ID：16031518
> 
> 赞同：0
> 
> 时间：2013-04-16T07:49:39.810
> 
> 标签：spring-mvc

我有两个实体类：用户和地址用户类：它有许多其他属性以及相关的类地址

```
Entity
@Table(name = "T_USER_DETAILS")
public class User {

//@GenericGenerator(name = "generator",strategy = "sequence-identity",parameters = { @Parameter(name = "sequence",value = "USER_ID_SEQ")} )

@GenericGenerator(name = "generator",strategy = "increment")    
@Id 
@GeneratedValue(generator = "generator")
@Column(name = "USER_ID")
private int userid;

@Column(name = "USER_FIRSTNAME")
private String firstname;
@Column(name = "USER_AGE")
private int age;

//creating many to one relationship between address class and student class
@ManyToOne(cascade = CascadeType.ALL)
@JoinColumn(name = "ADDRESS_ID")
private Address address; 
```

这是地址类，它也是一个实体

```
@Entity
@Table(name = "T_ADDRESS_DETAILS")
public class Address {

    @GenericGenerator(name = "idgenerator", strategy = "increment")
    @Id
    @GeneratedValue(generator = "idgenerator")
    @Column(name = "ADDRESS_ID")
    private int addressId;

    @Column(name = "ADDRESS_LINE1")
    private String address_line1;

    @Column(name = "ADDRESS_LINE2")
    private String address_line2; 
```

在我的表单中，我正在为用户类创建一个命令 bean，并将其绑定到我的控制器类中：

```
<form:form method = "post" action = "register.html" commandName = "newUser">

<br>
<h2><i>Create new account</i></h2>
<br>
Enter the firstname<br>
<input type = "text" size = "30" name = "firstname">
<font color = "red"> <form:errors path = "firstname" cssClass = "error"/></font><br>
Enter the lastname<br>
<input type = "text" size = "30" name = "lastname">
<font color = "red"> <form:errors path = "lastname" cssClass = "error"/></font><br>
Enter the password<br>
<input type = "password" size = "30" name = "password">
<font color = "red"> <form:errors path = "password" cssClass = "error"/></font><br>
Enter the Email Id<br>
<input type = "text" size = "30" name = "emailId">
<font color = "red"><form:errors path = "emailId" cssClass = "error"/><br></font>
Enter the phone number<br>
<input type = "text" size = "30" name = "phonenumber">
<font color = "red"><form:errors path = "phonenumber" cssClass = "error"/></font><br>
Enter the age<br>
<input type  = "text" size = "30" name = "age"/>
<font color = "red"><form:errors path = "age" cssClass = "error"/></font><br><br>

Enter the Address<br>
<input type = "textbox" name = "address" size = "30">
<font color = "red"><form:errors path = "address" cssClass = "error"/></font><br>

<div align = "center">

<input type = "submit" name = "submit" value = "submit"> 
```

控制器：

```
@RequestMapping(method = RequestMethod.POST)
public String register(@ModelAttribute("newUser") User user,BindingResult result,Model model,HttpSession session,HttpServletRequest request) //retrieve the backing bean with in the user attribute 
{
..
} 
```

我的问题是如何分配我想从城市、州、国家等表单发送的地址类的属性......我需要在我的 jsp 页面和我的控制器类中做哪些更改。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:00:40.330

您应该更改地址 bean 以添加城市、州等的属性（除其他外，还使用注释提供了良好的验证）。此后，您必须将输入拆分为地址 bean 的每个属性；然后，您可以使用`sping:bind`带有符号的标记`address.city`

```
<form:form commandName="person" method="POST" action = "register.html">

   <spring:bind path="address.city">
    <input type = "textbox" name = "address.city" size = "30">
   </spring:bind>

   ...
   ...
</form:form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:12:55.837

您还可以将`<form:input`标记与连接类的属性关联使用，如下所示：

```
<form:form commandName="person" method="post" action="${formAction}">
    <div class="form">
        <p>User</p>
            <form:input path="firstname" />
            <form:input path="address.address_line1" />

            <input type="submit" class="btn btn-primary" />
    </div>
</form:form> 
```

请记住，关键是使用表单输入路径来匹配连接类的属性。然后，您可以将此方法用于表单 bean 中使用的所有其他关联。

# asp.net-mvc - 当它们具有相同的名称时，请求直接进入视图而不是控制器

> ID：16031523
> 
> 赞同：1
> 
> 时间：2013-04-16T07:49:50.510
> 
> 标签：asp.net-mvc, asp.net-mvc-3, view, controller

当我尝试查看 MaximumRequestLengthExceeded 错误页面时，我遇到了一种奇怪的行为。似乎当控制器操作与视图命名相同时，请求直接进入视图，我得到以下异常：

无法将“ProjectNamespace.Views.CommonError.MaximumRequestLengthExceeded”类型的对象转换为“System.Web.IHttpHandler”类型。

这是当 Action 和 View 都被称为“MaxRequestLengthExceeded”或“MaximumRequestLengthExceeded”的时候。

如果我将 Action 称为一个，而将视图称为另一个，则它在两种变体中都可以正常工作。

```
public class CommonErrorController : Controller
{
    public ActionResult MaxRequestLengthExceeded()
    {
        return View("MaximumRequestLengthExceeded", null);
    }
} 
```

此外，我还有另一个带有索引操作和索引视图的控制器“门户”，它们都称为相同的并且它们也可以正常工作。如果我将此 MaxRequestLengthExceeded 操作移动到该控制器中，我也会再次收到错误消息。

有谁知道我可能会错过什么？

# coffeescript - 动态添加元素 - 使用 $(this)

> ID：16031526
> 
> 赞同：2
> 
> 时间：2013-04-16T07:50:13.207
> 
> 标签：coffeescript, jquery

当像这样动态地向 dom 添加元素时：

```
row = """
    <div class="ipad-row">
        <h3>Sample Row</h3>
        <div id="wrapper-placeholder">

            <div class="scrollView" style="">
                <a class="btn btn-primary add-row-item">Add an item</a>
            </div>
        </div>
    </div>
"""

$(".add-row").live "click", ->
    $(".ipad .body").append row
    false 
```

当我尝试从该行元素内的链接中获取它时，怎么会得到窗口：

```
$(".add-row-item").live "click", =>
    f = $ this
    console.log f // this logs window object, not the link element?
    f.parent().append row_item 
```

有人可以解释一下这种行为吗？如果在加载 dom 时元素确实存在，我该如何使用 $(this) ？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T07:51:53.927

`=>`父上下文中的`this`更改：`this`

```
$(".add-row-item").live "click", =>
    f = $(this) 
```

编译为

```
var _this = this;
$(".add-row-item").live("click", function() {
    var f = $(_this); 
```

改为使用`->`，它不会修改`this`.

# c# - 如何获得 2 列的值，而不仅仅是 1 列？

> ID：16031527
> 
> 赞同：1
> 
> 时间：2013-04-16T07:50:14.317
> 
> 标签：c#, mysql

我想要两列的结果，而不仅仅是一列。我试过了：

```
MessageBox.Show(reader.GetString("traceid", "idref")); 
```

但它不起作用。我是C#的初学者，有人可以帮忙吗？

```
String str = @"server=localhost;database=asianimport;userid=tera;password=******;";
MySqlConnection con = null;

try
{
    con = new MySqlConnection(str);
    con.Open(); //open the connection
    MessageBox.Show("connect " );

    String cmdText = "SELECT * FROM tracerecord limit 3";
    MySqlCommand cmd = new MySqlCommand(cmdText, con);
    MySqlDataReader reader = cmd.ExecuteReader();

    while (reader.Read())
    {
        MessageBox.Show(reader.GetString("traceid", "idref"));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:53:18.667

执行`GetString()`两次，每个字段一次：

```
while (reader.Read())
{
    String traceID = reader.GetString("traceid");
    String idRef = reader.GetString("idref");
    MessageBox.Show(traceID + " - " + idRef);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T07:53:31.073

reader.GetString() 仅从当前记录的一列返回结果。将它们分别用于具有串联的每个列：

```
MessageBox.Show(reader.GetString("traceid")+ " "+reader.GetString("idref")); 
```

# validation - 验证错误的 JSF 自定义消息

> ID：16031534
> 
> 赞同：0
> 
> 时间：2013-04-16T07:51:00.263
> 
> 标签：validation, jsf, glassfish-3

我正在使用 GlassFish 3.1.2.2，并且我想定义一个通用验证消息模板以**不包含**字段标识符/标签。

我在 StackOverflow 上找到了几个相关主题，但这些解决方案（都涉及*javax.faces.validator.BeanValidator.MESSAGE*）都不起作用。

1) 将 ValidationMessages.properties 放在类路径的根目录中（在我的情况下，它放在我的 WAR 文件的 WEB-INF/classes 中） - 没有效果

2) 在 faces-config.xml 中的 <message-bundle> 中定义 ValidationMessages.properties 文件 - 无效

3) 在 faces-config.xml 中的 <resource-bundle> 中定义 ValidationMessages.properties 文件 - 无效

我测试了资源包是否正常工作，因为我可以在 EL 中使用它，例如：#{text['javax.faces.validator.BeanValidator.MESSAGE']} 其中*text*是资源包定义中的我的 var。

注意：我不想在我的应用程序中的每个输入字段上提供 validatorMessage 属性。我只想为整个应用程序设置一次自定义消息。

重要提示：此处[Mkyong.com](http://www.mkyong.com/jsf2/customize-validation-error-message-in-jsf-2-0/)提供的解决方案效果不佳。

**注意：**我声明使用 JSF 2.0，Glassfish 3.1.2.2 肯定支持这一点。 **注意：**我不想在托管 bean 中实现验证，而不是使用 JSF 验证/Bean 验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:11:54.840

我在回答自己：要为必填字段验证设置自定义消息，您需要在消息包文件中设置以下属性（消息包在 faces-config.xml 中由 <message-bundle> 标签定义）：

1) **javax.faces.component.UIInput.REQUIRED_detail** - 默认情况下显示在 h:message 或 h:messages 标签中的消息 - 或者当 showDetail=true 时（默认情况下）。一般来说就足够了。

2) **javax.faces.component.UIInput.REQUIRED** - 当 h:message 和 h:messages 标签中的 showSummary=true 时显示的消息。如果您在 h:message/h:messages 中显示摘要，请另外设置。

**注意：***javax.faces.validator.BeanValidator.MESSAGE*不负责必需字段错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:37:34.160

添加`<h:messages>`您的 jsp/xhtml 并根据条件显示来自托管 Bean 的错误消息

```
FacesContext ctx = FacesContext.getCurrentInstance();
FacesMessage msg =new FacesMessage(FacesMessage.SEVERITY_INFO, errorMessage,detailMessage);
ctx.addMessage(null, msg); 
```

# python - Python奇怪的数组输出

> ID：16031535
> 
> 赞同：0
> 
> 时间：2013-04-16T07:51:04.180
> 
> 标签：python, arrays, list, wxpython

我打开了一个文件，然后将该文件的内容放入列表中。然后我将列表拆分为“\r”并将其输出到 textctrl。问题在于我的 list.txt 有 4 行长，但是当我在我的程序中打开它时，它从 4 行变为 10 行，并复制了一些文本。不知道我哪里出错了。

我的 list.txt 示例

```
A
B
C
D 
```

我的程序写入 textctrl 多行框的内容

```
A
A
B
A
B
C
A
B
C
D 
```

我对 python 和 wxpython 还很陌生，所以对我来说，我的代码看起来不错，但我看不到它在哪里复制它。

```
 def OnOpen(self,e):
    dlg = wx.FileDialog(self, "Choose a file to open", self.dirname, "", "*.*", wx.OPEN) #open the dialog boxto open file
    if dlg.ShowModal() == wx.ID_OK:  #if positive button selected....
        directory, filename = dlg.GetDirectory(), dlg.GetFilename()
        self.filePath = '/'.join((directory, filename)) 
        f = open(os.path.join(directory, filename), 'r')  #traverse the file directory and find filename in the OS
        self.myList = []
        for line in f:
            self.myList.append(line)
            for i in (self.myList):
                for j in i.split("\r"):
                    self.urlFld.AppendText(j)
        self.fileTxt.SetValue(self.filePath)
        f.close
    dlg.Destroy() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:53:12.453

等等，我明白了，我的缩进是错误的！！这么傻的事情！

解决了 ：）

新代码：

```
def OnOpen(self,e):
dlg = wx.FileDialog(self, "Choose a file to open", self.dirname, "", "*.*", wx.OPEN) #open the dialog boxto open file
if dlg.ShowModal() == wx.ID_OK:  #if positive button selected....
    directory, filename = dlg.GetDirectory(), dlg.GetFilename()
    self.filePath = '/'.join((directory, filename)) 
    f = open(os.path.join(directory, filename), 'r')  #traverse the file directory and find filename in the OS
    self.myList = []
    for line in f:
        self.myList.append(line)
    for i in (self.myList):
        for j in i.split("\r"):
            self.urlFld.AppendText(j)
    self.fileTxt.SetValue(self.filePath)
    f.close
dlg.Destroy() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:24:37.250

使用 'with' 打开 FileDialog 然后它会在完成后被销毁。

让控件使用“LoadFile”方法自己加载文件，然后您不必担心自己打开/关闭文件。

使用控件的方法 'GetValue()' 并拆分结果以创建列表。

```
def OnOpen(self,e):
    with wx.FileDialog(self, "Choose a file to open", self.dirname,
                       "", "*.*", wx.OPEN) as dlg:
        if dlg.ShowModal() == wx.ID_OK:
            directory, filename = dlg.GetDirectory(), dlg.GetFilename()
            self.filePath = '/'.join((directory, filename))
            self.urlFld.LoadFile(self.filePath)
            self.myList = self.urlFld.GetValue().split('\n') 
```

# java - 尝试获取 google admob 的设备 id，仍然获得真实的广告

> ID：16031538
> 
> 赞同：0
> 
> 时间：2013-04-16T07:51:20.010
> 
> 标签：java, android, admob

我正在编写一个 android 应用程序，并且我正在使用 google admob api 进行广告。

我能够为测试设备添加 TEST_EMULATOR，所以每当我使用我的 android 模拟器设备时，我都会看到假广告，所以我不会在那里产生错误印象。我现在要做的是将我的手机添加为测试设备，但我失败了。

我尝试使用“android 设备 ID”应用程序，但没有一个数字有效。

我尝试使用以下代码来获取设备 ID：

```
final TelephonyManager tm =(TelephonyManager)getBaseContext().getSystemService(Context.TELEPHONY_SERVICE);
     String deviceid = tm.getDeviceId(); 
```

但我仍然有真实的印象。

这是我的谷歌广告视图

```
<com.google.ads.AdView  android:id="@+id/adView"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     ads:adUnitId="<UNIT_ID>"
                     ads:adSize="BANNER"
                     ads:testDevices="TEST_EMULATOR,<NUMBER_I_TRIED>"
                     ads:loadAdOnCreate="true"
                     android:layout_above="@+id/button_endGameExit" /> 
```

我错过了什么？

我知道关于这个问题有很多问题，我很确定我已经解决了大部分问题。请任何信息将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:55:02.377

查看 Logcat，您会发现一条消息说：“要在此设备上获取测试广告，请使用此标识符：...”。我认为它会有“广告”标签，但我不确定。

# android - TextView 未将控制权传递给其 ListItem（可扩展列表 -> 组视图）

> ID：16031541
> 
> 赞同：0
> 
> 时间：2013-04-16T07:51:36.307
> 
> 标签：android, textview, expandablelistview

我在 getGroupView() 方法下使用可扩展列表，我正在遵循布局。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
 android:layout_height="50dp"
 android:background="@drawable/groupheaderbg" android:layout_marginLeft="30dp">
 <ImageView
     android:id="@+id/groupimgview"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentLeft="true"
     android:layout_alignParentTop="true"
     android:contentDescription="@string/groupImageViewDesc"
     android:padding="@dimen/TENDP"
     android:src="@drawable/ic_launcher" />
 <TextView
     android:id="@+id/lblheader"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:layout_centerHorizontal="true"
     android:layout_centerInParent="true"
     android:layout_centerVertical="true"
     android:layout_toRightOf="@+id/childgroupimgview"
     android:singleLine="true"
     android:text="@string/groupImageViewDesc"
     android:textIsSelectable="true"
     android:textSize="18sp"
     android:textStyle="bold"
    android:gravity="center_vertical"
     android:focusable="false"

     android:focusableInTouchMode="false"
     android:clickable="false"
      />

 </RelativeLayout> 
```

由于 textview 作为 textview 未将点击事件传递给可展开列表项，可展开列表未展开和折叠。我尝试了以下方法，所以现在 textview 选择菜单没有出现，但问题仍然存在（没有将控制权传递给列表项）。

```
 android:focusable="false"

         android:focusableInTouchMode="false"
         android:clickable="false"
          /> 
```

除此之外，我还尝试过遵循低谷代码。

```
 tv.setOnClickListener(null);
                tv.setFocusable(false);
                tv.setAutoLinkMask(Linkify.ALL);

                tv.setOnTouchListener(new View.OnTouchListener() {
                      @Override
                      public boolean onTouch(View v, MotionEvent event) {
                        // return TRUE since we want to consume the event
                        return false; 
                      }
                    }); 
```

我需要拦截触摸事件吗？如果是，那么请提供相同的建议/建议。

或者有什么方法可以指示 textview 将触摸事件/单击事件移交给它的父视图。

感谢您宝贵的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:24:37.877

我将 onclickListener 应用于 textview 并以编程方式控制从那里展开和折叠。

如果有人找到更好的方法来做到这一点，请分享。:)

# java - 无法通过java下载文件 - 在浏览器中工作

> ID：16031547
> 
> 赞同：0
> 
> 时间：2013-04-16T07:52:08.850
> 
> 标签：java, http, url

我目前做这样的事情：

```
class FileDownloader{
    public static void downloadFile(URL myUrl, File myOutputFile) throws IOException{
    HttpURLConnection conn = (HttpURLConnection) myURL.openConnection();
    conn.setRequestMethod("GET");
    conn.setRequestProperty("UserAgent",
            "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11");
    InputStream is = conn.getInputStream();
    BufferedOutputStream stream = new BufferedOutputStream(new FileOutputStream(myOutputFile));

    byte buf[] = new byte[1024];
    int k = 0;
    while ((k = is.read(buf)) != -1) {
        stream.write(buf, 0, k);
    }
    is.close();
    stream.close();
     }
 } 
```

下载文件。但是在某些站点上，下载不起作用，我被转发到错误页面。当我在 Chrome 或 Firefox 甚至 Internet Explorer 中打开完全相同的 URL 时，它可以工作。

我可以设置一些 RequestProperty 来让这个东西工作吗？或者我应该使用另一个库，比如 Apache HTTP？

附加信息：我无法查看网络服务器日志，也无法调整网络服务器设置。

# python - 夹层/Django 表单的验证码/验证码

> ID：16031550
> 
> 赞同：1
> 
> 时间：2013-04-16T07:52:22.850
> 
> 标签：python, django, mezzanine

我正在尝试使用[mezzanine-captcha将验证码添加到](https://github.com/mjtorn/mezzanine-captcha)[Mezzanine](http://mezzanine.jupo.org/)的联系表单中。但是，我遇到了一个例外。显然，我在数据库中遗漏了一些东西，但我无法弄清楚是什么。所以，`no such table: captcha_captchastore`

1.  我应该怎么做才能更新数据库以使其包含正确的数据？
2.  如何将[recaptcha](http://www.google.com/recaptcha)与[mezzanine-captcha](https://github.com/mjtorn/mezzanine-captcha)一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:04:36.970

你可能还没有运行syncdb：[https ://docs.djangoproject.com/en/dev/ref/django-admin/#syncdb](https://docs.djangoproject.com/en/dev/ref/django-admin/#syncdb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T08:25:09.940

问题 2 - 我安装了 django-recaptcha 并对文件进行了一些修改，但您可以按照以下步骤使用 reCaptcha：

[http://www.chrisumbel.com/article/recaptcha_with_django](http://www.chrisumbel.com/article/recaptcha_with_django)

希望能帮助到你。

# sql - 如何在字符串中搜索特定值，然后如果在该字符串中找到返回值

> ID：16031551
> 
> 赞同：1
> 
> 时间：2013-04-16T07:52:24.933
> 
> 标签：sql, sql-server, sql-server-2008

我有一个包含 varchar 列的表，例如

```
Reference  Value      Comment 
GLJ:04302    23883.2  'Jnl: 1535 Job:A10738   S/o:'                                 
1088         8728.8   'Jnl: 3433 Wh:** Receipt        Stk:UPS Traing 7'             
1087         5700     'Jnl: 3433 Wh:** Receipt        Stk:Services'                 
1088         8728.8   'Jnl: 3433 Wh:** Receipt        Stk:UPS TRAINING U8'          
GLJ:04547    3700     'Jnl: 1635 Job:A7802    S/o:'                                
GLJ:04616    3610.7   'Jnl: 1656 Job:A11540   S/o:'                                 
GLJ:04624    3235.02  'Jnl: 1657 Job:A11691   S/o:' 
```

现在我想搜索这个注释字符串，如果它找到包含`Job:`该字符串的值，我想直接在之后返回值`:`并从该位置返回 8 个字符，因此它将返回例如 'A10738'

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:59:38.367

假设所有包含“Job：”的字符串都在相同的位置（即从字符 10 开始），那么这应该可以工作：

```
SELECT
  comment,
  RTRIM(SUBSTRING ( comment, 14, 8 )) as JobNumber

FROM
  table

WHERE
  comment LIKE '%Job:%' 
```

但是如果“工作：”项目可以从任何地方开始，你就需要一些更强大的东西：

```
SELECT
  comment,
  RTRIM(SUBSTRING ( comment, CHARINDEX ( "Job:" ,comment) + 4, 8 )) as JobNumber

FROM
  table

WHERE
  comment LIKE '%Job:%' 
```

另一种选择（这对于您的场景来说是多余的，但在这里提到它是为了繁荣）是使用正则表达式。RegEx 不是 SQL 原生的，但可以通过 CLR 在 .NET 中实现。请参阅[http://msdn.microsoft.com/en-us/magazine/cc163473.aspx#S3](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx#S3)

**编辑：**请注意，我在其中包含了一个`RTRIM()`从作业编号中删除尾随空格的内容（以防它少于 8 个字符）。如果您*需要*完整的 8，请`RTRIM()`从`SUBSTRING()`.

# css - CSS Table-Like 对齐不使用表格？（CSS 相对布局）

> ID：16031559
> 
> 赞同：23
> 
> 时间：2013-04-16T07:52:41.077
> 
> 标签：css, alignment

无论我在哪里上网，我都不断地觉得我不应该使用表格。可悲的是，我是少数几个顽固地仍在使用它们的程序员之一——坦率地说，我发现 CSS 的对齐和布局功能对我来说不够强大，冷火鸡，停止使用表格。撇开我个人的程序员特质不谈，我想尝试解决我对 CSS 系统的主要不满之一：

假设我想要这样的布局：

```
+---+---+
| A | B |
+---+---+
| C | D |
+---+---+ 
```

在上面的示例中，我希望 A 和 C 的宽度相同，并且 和 的宽度`B`保持`D`相同。

我还希望 和 的高度`A`保持`B`锁定在一起，并且我希望`C`和 D 的高度彼此保持相同。

为了澄清，如果列中的任何元素变宽，我希望该列中的*所有*元素都变宽。如果一行中的任何元素变得更高，我再次希望同一行中的所有元素也变得更宽。

我刚才描述的是我们的老朋友桌子的确切功能。在我看来，表格对于这些类型的布局非常有用！如果我尝试使用 CSS 布局进行类似的操作，我可能会得到这样的结果：

```
+-------+---+
|   A   | B |
+---*---*---+
| C |   D   |
+---+-------+ 
```

这*绝不*是我正在寻找的那种布局。（`A`并`C`制作锯齿状的柱子，而不是我更喜欢的完美、光滑的柱子）

简单地说，我*真的*可以使用一种方法，使用 CSS 布局（而不是预定义的宽度或高度）将一个 CSS 框的边缘位置与不同 CSS 框的边缘位置对齐。如果 CSS 支持这一简单功能，我可以立即永远放弃表格，并创建超出表格功能的布局！这种力量的一个很好但无用的例子是桌子两侧的两个断开的盒子，它们*动态地*共享完全相同的高度和垂直位置。

但不幸的是，在我在互联网上的搜索中，到目前为止我发现的最先进的对齐方式是居中对齐、左对齐和右对齐。所有与其他元素不相关的对齐类型，使它们无用。

我想要的只是一种无需使用表格就能将 HTML 元素与其他 HTML 元素对齐的方法！

# 编辑

在为这个问题选择标签时，我遇到了一个几乎总结了所有内容的描述：

> 相对布局：一个布局，其中子级的位置可以相对于彼此或与父级进行描述。

有 CSS 相对布局吗？或者每当我想这样做时，我是否会被困在使用表格中？

我将接受最接近我想要的功能的答案，而不使用预定的宽度或高度（如果没有其他人提供更好的东西，包括答案“没有类似的存在”）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T08:16:27.980

仅使用 CSS 可以将元素显示为在语义上不是表格的表格。使用该`display`属性，您可以在标记中有 div 时模仿表格。[检查这篇文章](http://www.onenaught.com/posts/201/use-css-displaytable-for-layout)。

根据您想要实现的目标，有一些替代选项。如果您只希望每列中的两行与列的宽度一致，则应尝试将行放在列标记内，而不是相反。这是在没有预定义尺寸的情况下工作的。

此外，如果为一行中的每个单元格设置相同的高度，您可以简单地将它们浮动到左侧，并将容器宽度设置为行宽的总和。这仅适用于预定义的尺寸。

CSS

```
div.c
{
    width: 100%;
}

div.c>div:nth-child(2n-1)
{
    width: 25%;
    float: left;
    background: blue;
}

div.c>div:nth-child(2n)
{
    width: 75%;
    float: left;
    background: yellow;
} 
```

这是一个小提琴：http: [//jsfiddle.net/kdani3/DbRuV/](http://jsfiddle.net/kdani3/DbRuV/)

一个更复杂的例子：http: [//jsfiddle.net/kdani3/DbRuV/1/](http://jsfiddle.net/kdani3/DbRuV/1/)

我认为这真的很简单，甚至比使用表格布局还要简单。

另外，我真的建议你看看 CSS 网格框架，比如[Twitter Bootstrap](http://twitter.github.io/bootstrap/)。这绝对值得一看。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T08:22:15.720

我认为使用纯 CSS，`Width`不使用，不使用`table`你可以使用[Flex Layout](http://www.w3.org/TR/css3-flexbox/)

这是代码

**HTML**

```
<section class="flexrow">
    <div class='item'>1asdf</div>
    <div class='item'>2</div>
</section>
<section class="flexrow">
    <div class='item'>1</div>
    <div class='item'>2</div>
</section> 
```

**CSS**

```
.flexrow {
    display: -webkit-flex;
    display: -moz-flex;
    display: -ms-flex;
    display: -o-flex;
    -webkit-justify-content: space-between;
    -moz-justify-content: space-between;
    -ms-justify-content: space-between;
    -o-justify-content: space-between;
    margin-bottom: 10px;
    -webkit-align-items: center;
    -moz-align-items: center;
    -ms-align-items: center;
    -o-align-items: center;
    -webkit-flex: none;
    -moz-flex: none;
    -ms-flex: none;
    -o-flex: none;
}
.item {
    -webkit-flex: 1;
    -moz-flex: 1;
    -ms-flex: 1;
    -o-flex: 1;
    margin: auto 10px;
    border-radius: 5px;
    border:1px solid black;
} 
```

这是[JsFiddle](http://jsfiddle.net/VGjVk/)

# javascript - 打开一个新选项卡并使用 jquery 和 javascript 操作该页面

> ID：16031562
> 
> 赞同：0
> 
> 时间：2013-04-16T07:52:48.717
> 
> 标签：javascript, jquery, google-chrome, developer-tools, google-toolbar

我可以使用 f12（开发人员工具）控制台打开一个新选项卡并运行 javascript 来模拟点击和表单提交吗？

例如，我想单击 facebook 中的链接，但我在一个窗口（google.com）上

我将打开开发人员工具，并粘贴一个代码，将我定向到 facebook 并单击主页。

```
// window.open('facebook.com')
// $('#home').click(); 
```

这可能吗？

# spring - spring hibernate - 单元测试 dao

> ID：16031570
> 
> 赞同：1
> 
> 时间：2013-04-16T07:53:04.167
> 
> 标签：spring, hibernate, unit-testing

我正在尝试对我的 DAO 进行单元测试，但遇到了一些麻烦。

首先，我的 DAO 有 1 个方法：`findById`类型方法。我想为此编写一个单元测试。所以，我的思路是：

*   为了测试这个方法，我需要插入一个已知实体
*   调用`findById()`DAO，
*   然后断言我得到的是我最初插入的。

现在，我遇到困难的部分是试图弄清楚如何进行插入。

我的担忧：

1.  `insert`我目前在我的 DAO 中没有方法。我可以写一个，但我看不出仅仅为了测试而这样做的意义。

2.  另一种可能性是使用 Hibernate API（即 HibernateTemplate）来执行插入。但是，我希望我的单元测试灵活。我不想将我的单元测试绑定到任何特定的 API。

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:58:26.193

根据您的数据库（我更喜欢用于测试的内存变体），您应该能够在每次单独测试之前预先填充数据库并将其设置为已知状态。因此，不需要一种`insert`方法来进行测试。我已经多次使用 HSQLDB（它现在被另一个我不记得名称的数据库取代了），我通常在每次测试之前创建数据库并运行一些插入 SQL 语句来填充数据库。也有这方面的框架，比如[DbUnit](http://www.dbunit.org/)。

**编辑**

我想到的数据库是[H2](http://www.h2database.com)。似乎它还有一个简洁的功能，可以[在建立连接时执行脚本](http://www.h2database.com/html/features.html#execute_sql_on_connection)

```
String url = "jdbc:h2:mem;INIT=runscript from '~/create.sql'\\;runscript from '~/populate.sql'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:58:36.643

通常我不会为我的 DAO 编写单元测试。我更喜欢通过集成/功能测试来测试这个领域。

如果您愿意，那么一种选择是预填充数据库，以便您的单元测试用例知道对数据库的期望。

Spring 提供了出色的 DAO 层测试框架，其中数据更改被回滚，因此一个测试不会因数据更改而影响其他测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T08:01:31.627

在配置集成测试的 spring 上下文时，您可以尝试使用[Spring 对嵌入式数据库的支持。](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/jdbc.html#jdbc-embedded-database-support)该`<jdbc:script>`标签允许您执行初始化和销毁​​脚本：

```
<jdbc:embedded-database type="H2" id="dataSource">
    <jdbc:script execution="INIT" location="setup.sql"/>
    <jdbc:script execution="DESTROY" location="teardown.sql"/>
</jdbc:embedded-database> 
```

# twitter-bootstrap - 防止输入扩展到 twitter-bootstrap 中的块

> ID：16031573
> 
> 赞同：1
> 
> 时间：2013-04-16T07:53:12.557
> 
> 标签：twitter-bootstrap

我正在寻找是否有人有一个干净的解决方案来防止淘汰赛将我的表单输入（使用 span* 类样式化）在流体设计中变成 100% 的宽度。

当我低于 979 像素时，我所有的 span 元素（即 span4）都变成了 100% 的宽度。这意味着我没有在平板视图中拥有漂亮样式的表单，而是有大量堆叠的 100% 宽度的文本框。

我正在使用 bootstrap-responsive.css

更新的 HTML 示例：

```
<div class="row-fluid">
    <div class="span12">
         <input type="text" class="span5" placeholder="First" />
         <input type="text" class="span2" placeholder="Middle" />
         <input type="text" class="span5" placeholder="Last" />
    </div>
</div> 
```

当我在平板电脑中查看时，我不希望这些元素堆叠在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:14:27.593

`@media (max-width: 979px) { ...}`您可以在**bootstrap-responsive.css**中为输入标签定义自定义 CSS，您可以根据需要定义宽度

# ios - 如何获取用户感兴趣的类别 Facebook Graph API？

> ID：16031578
> 
> 赞同：-1
> 
> 时间：2013-04-16T07:53:22.407
> 
> 标签：ios, facebook-graph-api

我正在使用 Facebook 图形 API。

`FBGraphApi: https://graph.facebook.com/me/likes?access_token=AAAC8i7Jj25kBALQ....`

并得到以下回应：

```
{   "data": [
  {
     "category": "Media/news/publishing",
     "category_list": [
        {
           "id": "191684877517919",
           "name": "Publisher"
        },
        {
           "id": "108366235907857",
           "name": "Newspaper"
        }
     ],
     "name": "YTPO.Ru",
     "id": "157031727688210",
     "created_time": "2013-04-09T16:09:44+0000"
  },,
  {
     "category": "Education website",
     "name": "Afla.md",
     "id": "243281895771734",
     "created_time": "2012-09-15T13:20:03+0000"
  },
  {
     "category": "Website",
     "name": "Forbes Russia",
     "id": "315590990710",
     "created_time": "2012-08-01T20:25:18+0000"
  },
  {
     "category": "Non-governmental organization (ngo)",
     "name": "Alliance Fran\u00e7aise de Moldavie",
     "id": "177432232301977",
     "created_time": "2012-02-23T16:10:17+0000"
  }   ], 
```

我需要用户感兴趣的类别。如何以其他语言（例如法语或德语）获得这些类别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:35:17.800

如果我们最后添加[https://graph.facebook.com/me/likes?access_token=AAAC8i7Jj25kBALQ......&locale=fr](https://graph.facebook.com/me/likes?access_token=AAAC8i7Jj25kBALQ......&locale=fr)那么数据来自法国

# qt - Qt 和 STL 结构之间是否存在不兼容？

> ID：16031587
> 
> 赞同：0
> 
> 时间：2013-04-16T07:53:49.310
> 
> 标签：qt, stl

我尝试`deque`在 Qt 应用程序中使用，但奇怪的是，它似乎不起作用。

我有一个`QThread`运行良好的 Qt 类（派生自 ），但是如果我声明一个`stl::deque<int>`成员，它会成功构建，但在启动时会崩溃。我什至不在任何地方使用该变量。

是否应该在 Qt 中不使用 STL 结构，尤其是在继承基本 Qt 类的类中？

编辑：

```
Thread 3 (Thread 172.0x3bc):
#0  0x7c91e514 in ntdll!LdrAccessResource () from C:\WINDOWS\system32\ntdll.dll
#1  0x7c91d21a in ntdll!ZwDelayExecution () from C:\WINDOWS\system32\ntdll.dll
#2  0x7c8023f1 in SleepEx () from C:\WINDOWS\system32\kernel32.dll
#3  0x00000000 in ?? ()

Thread 2 (Thread 172.0xb78):
#0  0x7c91e514 in ntdll!LdrAccessResource () from C:\WINDOWS\system32\ntdll.dll
#1  0x7c91daaa in ntdll!ZwReplyWaitReceivePortEx () from C:\WINDOWS\system32\ntdll.dll
#2  0x77e565e3 in UuidCreate () from C:\WINDOWS\system32\rpcrt4.dll
#3  0x77e56caf in RPCRT4!I_RpcBindingCopy () from C:\WINDOWS\system32\rpcrt4.dll
#4  0x77e56ad1 in RPCRT4!I_RpcBindingCopy () from C:\WINDOWS\system32\rpcrt4.dll
#5  0x77e56c97 in RPCRT4!I_RpcBindingCopy () from C:\WINDOWS\system32\rpcrt4.dll
#6  0x7c80b729 in KERNEL32!GetModuleFileNameA () from C:\WINDOWS\system32\kernel32.dll
#7  0x00000000 in ?? ()

Thread 1 (Thread 172.0x8d4):
#0  0x7c921689 in ntdll!RtlInitializeHandleTable () from C:\WINDOWS\system32\ntdll.dll
#1  0x7c928ccd in ntdll!RtlRealPredecessor () from C:\WINDOWS\system32\ntdll.dll
#2  0xbaadf00d in ?? ()
#3  0x0a0bc000 in ?? ()
#4  0x7c939ba8 in towlower () from C:\WINDOWS\system32\ntdll.dll
#5  0x7c97fb98 in ntdll!RtlpNtMakeTemporaryKey () from C:\WINDOWS\system32\ntdll.dll
#6  0x7c95b244 in ntdll!LdrFindEntryForAddress () from C:\WINDOWS\system32\ntdll.dll
#7  0x003e0000 in ?? ()
#8  0x7c929c0c in ntdll!RtlpUnWaitCriticalSection () from C:\WINDOWS\system32\ntdll.dll
#9  0x77bfc3c9 in msvcrt!free () from C:\WINDOWS\system32\msvcrt.dll
#10 0x003e0000 in ?? ()
#11 0x77bfc3e7 in msvcrt!free () from C:\WINDOWS\system32\msvcrt.dll
#12 0x00001d40 in ?? ()
#13 0x00224b68 in ?? ()
#14 0x77bfc42e in msvcrt!malloc () from C:\WINDOWS\system32\msvcrt.dll
#15 0x00cef12a in QClipData::initialize (this=0xa093a30) at painting\qpaintengine_raster.cpp:4487
#16 0x00cfa797 in qt_alphamapblit_quint32 (rasterBuffer=0xa099488, x=17, y=207, color=4278190080, map=0xa0ad401 "", mapWidth=9, mapHeight=12, mapStride=256, clip=0xa093a30) at painting\qdrawhelper.cpp:7209
#17 0x00ceb02e in QRasterPaintEngine::alphaPenBlt (this=0x9ff7860, src=0xa0ad401, bpl=256, depth=8, rx=17, ry=207, w=9, h=12) at painting\qpaintengine_raster.cpp:2954
... 
```

另一个运行的堆栈跟踪：

```
Thread 3 (Thread 1176.0xb4c):
#0  0x7c91e514 in ntdll!LdrAccessResource () from C:\WINDOWS\system32\ntdll.dll
#1  0x7c91d21a in ntdll!ZwDelayExecution () from C:\WINDOWS\system32\ntdll.dll
#2  0x7c8023f1 in SleepEx () from C:\WINDOWS\system32\kernel32.dll
#3  0x00000000 in ?? ()

Thread 2 (Thread 1176.0x71c):
#0  0x7c91e514 in ntdll!LdrAccessResource () from C:\WINDOWS\system32\ntdll.dll
#1  0x7c91daaa in ntdll!ZwReplyWaitReceivePortEx () from C:\WINDOWS\system32\ntdll.dll
#2  0x77e565e3 in UuidCreate () from C:\WINDOWS\system32\rpcrt4.dll
#3  0x77e56caf in RPCRT4!I_RpcBindingCopy () from C:\WINDOWS\system32\rpcrt4.dll
#4  0x77e56ad1 in RPCRT4!I_RpcBindingCopy () from C:\WINDOWS\system32\rpcrt4.dll
#5  0x77e56c97 in RPCRT4!I_RpcBindingCopy () from C:\WINDOWS\system32\rpcrt4.dll
#6  0x7c80b729 in KERNEL32!GetModuleFileNameA () from C:\WINDOWS\system32\kernel32.dll
#7  0x00000000 in ?? ()

Thread 1 (Thread 1176.0x818):
#0  0x7c921689 in ntdll!RtlInitializeHandleTable () from C:\WINDOWS\system32\ntdll.dll
#1  0x7c928ccd in ntdll!RtlRealPredecessor () from C:\WINDOWS\system32\ntdll.dll
#2  0x00000000 in ?? () 
```

编辑2：

使用`stl::deque`. 我切换到使用 QQueue，它似乎工作得很好。

# php - OpenCart 中令人困惑的类和方法调用

> ID：16031589
> 
> 赞同：5
> 
> 时间：2013-04-16T07:53:58.153
> 
> 标签：php, opencart, magic-methods

我有一个框架（OpenCart）控制器类（如：catalog/controller/product/product.php），代码如下：

```
class ControllerProductProduct extends Controller {
    public function index() {
      //some code
      $this->response->setOutput($this->render());
      //some more code
    }
} 
```

有一个像`$this->response->setOutput($this->render());`. 我知道这个表达式的用途，但我对它的工作原理感到很困惑。

`$this`指的是当前类，即`ControllerProductProduct`，这意味着`$this->response`对象必须存在于其中一个`ControllerProductProduct`或其父类`Controller`中。但这种情况并非如此。这个对象实际上存在于父类的受保护属性`Controller`中`Controller::registry->data['response']->setOutput()`。所以不应该这样说：

```
$this->registry->data['response']->setOutput(); 
```

而不是 $this->response->setOutput();

我还提供了一个`Controller`课程片段，以便您有想法。

```
abstract class Controller {
    protected $registry;    
    //Other Properties
    public function __construct($registry) {
        $this->registry = $registry;
    }
    public function __get($key) {
        //get() returns registry->data[$key];
        return $this->registry->get($key);
    }
    public function __set($key, $value) {
        $this->registry->set($key, $value);
    }
    //Other methods
} 
```

我不知道这个表达式是如何工作的？知道这怎么可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:26:16.390

使用*魔术方法* `__get()`和`__set()`.

如果您试图获取一个不可访问的类变量（例如未声明的），`__get('property_name')`则会调用一个魔术方法。

因此，当您尝试检索时，会调用并返回`$response`一个魔术方法（因为没有声明属性）。`__get()``$this->registry->get('response')``$response`

是的，你可以改写`$this->registry->get('response')->setOutput($this->render());`，但这没什么用，而且写得更多。让 PHP 使用它的`__get()`方法检索变量是可以的，尽管它不是那么干净。

无论如何，解决方案没有任何问题。

编辑：更清洁的解决方案是这样的：

```
class Controller {
    //...
    function getResponse() {
        return $this->registry->get('response');
    }
    //...
} 
```

然后你可以在你的代码中调用一个具体的方法，它会很清楚：

```
class ControllerProductProduct extends Controller {
    public function index()
        //...
        $this->getResponse()->setOutput($this->render());
    }
} 
```

但这意味着每个可能的属性都需要方法`getXYZ`，同时允许`__get()`您在`$registry`不需要进一步工作的情况下扩展这将是更清晰/干净的解决方案）。`$register``getProperty()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:17:13.110

这种魔法称为“重载”。
这是较小的演示：

```
<?php

class PropsDemo 
{
    private $registry = array();

    public function __set($key, $value) {
        $this->registry[$key] = $value;
    }

    public function __get($key) {
        return $this->registry[$key];
    }
}

$pd = new PropsDemo;
$pd->a = 1;
echo $pd->a; 
```

查看[http://php.net/manual/en/language.oop5.overloading.php](http://php.net/manual/en/language.oop5.overloading.php)。解释得够清楚了。

# authentication - Simple Membership Provider 区分大小写的用户名

> ID：16031590
> 
> 赞同：0
> 
> 时间：2013-04-16T07:54:01.707
> 
> 标签：authentication, asp.net-mvc-4, simplemembership

Simple Membership Provider 中是否有任何设置允许使用户名区分大小写？我正在构建基于 VS 2012 模板的 ASP.NET MVC 4 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:01:38.283

您是否尝试过将用户名字段的排序规则更改为数据库上区分大小写的变体？

```
 ALTER TABLE dbo.MyTable ALTER COLUMN CharCol varchar(10) COLLATE Latin1_General_CS_AS NOT NULL; 
```

您将需要调整表名和类型等

# java - 无法实现拖放；没有调用dragSetData

> ID：16031591
> 
> 赞同：2
> 
> 时间：2013-04-16T07:54:04.970
> 
> 标签：java, drag-and-drop, tree, swt

我正在尝试将拖放功能与我们的产品结合起来。我创建了一个新的自定义视图，它具有树结构，并且有兴趣将内容从该树中删除到应用程序本身中已经存在的树结构中。

我使用了与产品预期相同的自定义传输类型。但是，在调试时我发现`DragSourceEvent`' 的数据或数据类型都没有设置。两者都是`null`价值观。此外，我`dragSetData`的也没有被调用。

请求您给我一些建议......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T07:55:15.373

事件的数据只有在drop拿到数据后才设置。这应该会自动发生，但一开始对我也不起作用。

经过一些研究，我想出了一个解决方法，尽管我不确定这是否是框架的意图。我在我的解决方案中扩展了*org.eclipse.jface.viewers.ViewerDropAdapter*，但它也应该与扩展*org.eclipse.swt.dnd.DropTargetAdapter*一起使用：

```
public class MyViewerDropAdapter extends ViewerDropAdapter {
    // implement the abstract methods

    // the next two methods are the important part: 
    // override the non-abstract methods dragEnter and dragOperationChanged
    // if your user just moves the mouse without pressing a key, event.detail
    // equals DND.DROP_DEFAULT. In this case you have to change detail to
    // your default operation (in this case DROP_COPY)
    @Override
    public void dragEnter(DropTargetEvent event) {
       if (event.detail == DND.DROP_DEFAULT) {
         if ((event.operations & DND.DROP_COPY) != 0) {
          event.detail = DND.DROP_COPY;
         } else {
          event.detail = DND.DROP_NONE;
         }
        }
      super.dragEnter(event);
    }

    // the same for this method. It will be called, when the user
    // presses the CTRL or SHIFT button (on windows) while dragging.
    // We need it here to set the DROP_DEFAULT back to DROP_COPY.
    // Otherwise your default will go back to DROP_NONE after the user
    // released the key.
    @Override
   public void dragOperationChanged(DropTargetEvent event) {
      if (event.detail == DND.DROP_DEFAULT) {
       if ((event.operations & DND.DROP_COPY) != 0) {
        event.detail = DND.DROP_COPY;
       } else {
        event.detail = DND.DROP_NONE;
       }
      }
   }
} 
```

然后，当您将删除支持添加到树查看器时，请务必设置 DND.DROP_DEFAULT 操作以及其他操作（API 文档 afaik 中未提及）：

```
myTreeViewer.addDropSupport(DND.DROP_COPY | DND.DROP_DEFAULT,
            new Transfer[] { myByteTransfer.getInstance() },
            new MyViewerDropAdapter(myTreeViewer)); 
```

在我这样做之后，dragSetData 被调用并且一切都按预期工作。

控制台输出显示一些事件的顺序：

```
Start Drag
dragEnter called
dragSetData called
drop called
performDrop called
Finshed Drag 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T10:22:03.370

**解决方案**

如果我们希望用户在**不使用元键**的情况下拖动条目，我们应该始终允许在拖放端进行**系统默认的拖动操作。**在 Windows 上，这恰好是一个`DND.DRAG_MOVE`操作（我相信其他平台也是如此）。

```
source.addDragSupport(DND.DROP_MOVE, new Transfer[] { DragSelectionListener.getTransfer() }, new DragSelectionListener(viewer));
target.addDropSupport(DND.DROP_MOVE, new Transfer[]{ DropListListener.getTransfer() }, new DropListListener(viewer)); 
```

**解释**

三组操作应该相交：

*   拖动源允许的操作（使用 StructuredViewer.addDragSupport() 设置）
*   拖动目标支持的操作（使用 StructuredViewer.addDropSupport() 设置）
*   用户选择的操作（取决于放置时按下了哪些元键）

只有这样放置目标才会验证接收到的放置，并且会请求拖动源获取数据。

**调查**

元键的处理`org.eclipse.swt.dnd.DropTarget.setEventData()`在行中完成

```
operations[0] = osToOp(operations[0]) & style;
if (operations[0] == DND.DROP_NONE) return false; 
```

来自 droptarget 的样式与来自系统拖放操作的值相交是基于 dragsource 但剥离了`DND.DRAG_DEFAULT`. 如果这两者不相交，则中止操作。

再往下，该集合与根据按下的元键计算的集合进行比较。操作可能会再次中止。

```
if ((operation & operations[0]) == 0) operation = DND.DROP_NONE; 
```

这种行为可以被控制传递`DND.DROP_DEFAULT`给`addDropSupport()`，但更糟糕的是，用户选择的操作将被比较`DND.DROP_MOVE`，如果不用作的参数，它会更早被过滤掉`addDropSupport()`。

我认为`DND.DROP_DEFAULT`处理方式已损坏，不应依赖。如果第一个条件有效地防止了它的使用。

# google-visualization - 谷歌图表瑞士 y 轴数字格式

> ID：16031595
> 
> 赞同：0
> 
> 时间：2013-04-16T07:54:23.597
> 
> 标签：google-visualization

有没有办法将 y 轴标签格式化为瑞士-德国风格（例如 -> 10000000 10'000'000）？试图将语言设置为瑞士，但它仍然没有按照应有的格式进行格式化

```
google.load("visualization", "1", { "packages": ["corechart"], 'language': 'de_CH' }) 
```

添加了我希望它是多么精确的示例，现在我破解了它，但想知道是否有更好的方法......

[格式示例](http://i.stack.imgur.com/s9b9V.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:51:49.710

不，这是不可能的。

Google 使用[ICU DecimalFormat](http://icu-project.org/apiref/icu4c/classDecimalFormat.html#_details)集的一个子集，不幸的是，这不允许您对人员强制使用区域设置或更改分隔符。如果您现在将 a`.`作为分隔符，那将是您获得的最接近的分隔符。

强制执行此类操作的唯一方法是编写自定义代码，循环遍历`svg`图表创建的元素，使用自定义 JavaScript 函数将`.`or`,`替换为`'`. 没有超级简单的方法可以做到这一点，但jeffrey_the_wind 的[这篇文章](https://stackoverflow.com/questions/14526032/google-charts-bubble-charts-categorical-x-and-y-axes-instead-of-numeric)显示了一种方法：

> 从我所做的所有搜索以及 jmac 给出的答案来看，我决定唯一的方法是使用 Javascript hack 用单词替换轴号。我实现的代码在这里：
> 
> ```
>  /*
>      *
>      * The following 2 functions are a little hacky, they have to be done after calling the "draw" function
>      * The bubble chart originally displays only numbers along the x and y axes instead of customer or product names
>      * These 2 functions replace those numbers with the words for the customers and products
>      *
>      */
>     for ( var i = -2; i < products.length + 1; i ++ ){
>         $('#customer_product_grid svg text[text-anchor="start"]:contains("'+i+'")').text(function(j,t){
>             if (t == i){
>                 if (i >= products.length || i < 0){
>                     return " ";
>                 }
>                 return products[i];
>             }
>         });
>     }
> 
>     for ( var i = -2; i <= customers.length + 3; i ++ ){
>         $('#customer_product_grid svg text[text-anchor="end"]:contains("'+i+'")').text(function(j,t){
>             if (i >= customers.length + 1 || i <= 0){
>                 return " ";
>             }else if (t == i){                    
>                 return customers[i-1];
>             }
>         });
>     } 
> ```
> 
> 基本上，您只需创建一个 for 循环，遍历您在 x 和 y 轴上显示的所有整数。做一些 `if...else`事情，要么用数组中的元素替换整数，要么把它留空。
> 
> 请记住，要使上述代码正常工作，您需要在图表选项中具有以下属性 ->`vAxis: { textPosition: 'in' }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T09:57:47.380

这是我的黑客

```
//Format diagram y-axis labels
    var labelContainer = $($("#diagramPlaceholder").find("g")[1]).children("g:last-child").children("g");

    //Foreach x,y1,y2 labels do
    labelContainer.each(function() {
        var textContainer = $(this).find("text");
        //If labels contains valid number
        if (!isNaN(textContainer.text().replace(/\./g, '').replace(',', '.'))) {
            //Replace " . " chars with " ' " char
            textContainer.text(textContainer.text().replace(/\b[.]\b/g, '\''));
        }
    }); 
```

# robotframework - 在机器人框架中获取空对象

> ID：16031596
> 
> 赞同：-1
> 
> 时间：2013-04-16T07:54:27.547
> 
> 标签：robotframework

我是机器人框架的新手。我正在开发需要自动化测试用例的应用程序。我正在将 eclipse 客户端从服务器下载到我的桌​​面，然后更新插件。我正在尝试访问一个对象，但我每次都得到 null 。我检查了流量。我们正在使用 osgi 框架来执行此操作。激活器类被调用，我需要的对象通过加载方法加载。当我尝试取回对象时，我得到空值。当我在加载后尝试获取对象时，我得到了它，但不是来自框架。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:09:01.110

我不知道您正在使用的框架，但幕后必须有某种依赖注入。您可能不会在测试用例内外使用相同的配置/对象创建器。**验证创建对象的流程并在 Robot Framework 中分析相同的流程。并发现差异。**

如果您需要更多帮助，请编辑您的问题，指定如何创建对象以及您希望它如何在测试用例中工作。

# ios - segue 后强制刷新视图

> ID：16031605
> 
> 赞同：1
> 
> 时间：2013-04-16T07:55:02.930
> 
> 标签：ios

我的应用程序的 UI 在一个圆圈中运行，并且在单次旋转之后，我的所有文本字段都需要更改以反映从前一个周期接收到的输入，最好没有直接的用户交互。

我找到了 setNeedsDisplay 函数，但让它在正确的时刻调用是我的问题。AFAIK，一个视图在它开始时只调用一次 viewDidLoad，所以我不知道该把它贴在哪里。

我怎样才能强迫我的观点刷新，最好是在转场之后？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:01:46.497

您应该尝试在`-viewDidAppear`or`-viewWillAppear`方法中调用它，因为每次进入视图时都会调用它。

# c# - 调整 MenuStrip 的宽度

> ID：16031607
> 
> 赞同：2
> 
> 时间：2013-04-16T07:55:06.570
> 
> 标签：c#, winforms, menustrip

我想在 menuStrip 右侧的 menustrip 和 form 之间放置一个间隙。我使用了 autosize= false 和新的尺寸属性，菜单栏的高度发生了变化，但宽度没有改变。Menustrip 的宽度与表单的宽度相同。

```
menuStrip2.AutoSize = false;
menuStrip2.Size = new Size(50, 90); 
```

我也无法从 Desing-> Properties -> Size 进行更改。

我只创建了从菜单条右侧到表单左侧的间隙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T08:15:21.487

以下是您在设计时执行此操作的方法：

1.  创建一个新表格。

2.  在此表单上放置两个面板。打电话给他们`panelTop`和`panelFill`。分别将停靠属性设置为`Top`和`Fill`。调整`panelTop`到您希望菜单条的高度。

3.  添加另一个面板`panelTop`，调用它`panelTopRight`。停靠此面板`Right`。

4.  添加您的菜单条。将停靠属性设置为填充。

5.  右键单击`panelTopRight`并“发送到后面”。现在您可以调整 的大小`panelTopRight`以允许您需要的间隙。

如果您想在运行时执行此操作，则必须在代码中执行上述所有操作；但这也许是另一个问题...

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T07:02:38.563

打开 xyz.designer.cs 文件，然后查找 Windows 窗体设计器生成的代码，然后查看为 menustrip 项生成的事件，

this.menuStripnameToolStripMenuItem.Padding = new System.Windows.Forms.Padding(4, 0, 81, 4);

# c# - EDMX 从 web 服务迁移到本地访问

> ID：16031609
> 
> 赞同：0
> 
> 时间：2013-04-16T07:55:14.160
> 
> 标签：c#, wcf, client-server, sql-server-ce, edmx

现在我有以下架构：

*   WPF 客户端应用程序显示一些数据
*   包含对数据库的访问的自托管服务（如此处所述自[托管](http://msdn.microsoft.com/en-us/library/ee939340.aspx)）
*   服务使用 edmx 文件来描述数据库（并生成它）
*   客户端通过 wcf 访问主机
*   生成与客户端一起使用的代理（使用运行主机的 SvcUtil）

由于新的要求，数据库现在在每台机器上都是本地的。

自托管服务需要`elevated rights`运行，但并非我的应用程序的每个可能用户都可以拥有这些权限。

是否可以创建（最多生成）在客户端上下文中运行以访问数据库的程序集？（例如 a `dll`，所以我不需要主机）。

有没有更好的可能性？

任何关于从 EDMX 创建本地访问程序集和/或为我的客户生成代理的想法都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T18:41:44.763

这是我所做的：

客户端获得了`Repository`访问数据库的权限。

数据库访问本身是在一个新程序集中完成的，该程序集仅执行此操作并提供一个`DatabaseContext`类，该类实际上是 EF 方法的包装器。

客户端存储库有一个实例，`DatabaseContext`并且只提供`CRUD`访问它的方法。

# c# - Windows Server 2008 R2 上的奇怪事件日志行为

> ID：16031610
> 
> 赞同：3
> 
> 时间：2013-04-16T07:55:15.487
> 
> 标签：c#, event-handling, windows-server-2008, event-log

我正在使用一些非常简单的 C# 代码来监视域控制器“实时”的安全事件日志，这样我就可以在帐户锁定事件发生时捕获它们。

我有适用于 2003 年的代码，但现在我已将其移至 2008 R2（并更改了代码以匹配 4740 事件 ID 而不是旧的 644 事件 ID）我看到所有事件在服务启动后几分钟内被记录，**但随后我收到大量“旧”消息，然后是所有 0 事件 ID，永远发送垃圾邮件。**确切地说，这些是触发一个条目写入事件，但都是 ID=0 条目——这真的很奇怪。

我怀疑但尚未测试过，制作一个新`EventLog("security")`对象会纠正这个问题，但我不想每 2 分钟做一次，我不明白为什么会触发旧事件 - 有没有人有任何想法会发生什么？

下面是发生错误时的示例输出 - 顶部的快乐日志，然后是旧日志，然后是 0 日志 - 与它在我的 DC 上发生的确切顺序相同。接下来是一些代码示例：

```
Event received: 5145, Time Gen = 16/04/2013 08:17:27, Time Written = 16/04/2013 08:17:27
[20 more like this edited out (differing event ids)]
Event received: 5145, Time Gen = 16/04/2013 08:00:47, Time Written = 16/04/2013 08:00:47
Event received: 5145, Time Gen = 16/04/2013 08:00:47, Time Written = 16/04/2013 08:00:47
[20 more like this edited out]
Event received: 0, Time Gen = 01/01/1970 00:00:00, Time Written = 01/01/1970 00:00:00
[**infinite** more like this edited out] 
```

代码非常简单：

```
/// <summary>
/// Create a new security log listener, and enable event firing for that log
/// </summary>
protected void InitialiseSecurityEventLog()
{
    if (securityLog != null)
    {
        securityLog.EnableRaisingEvents = false;
    }

    // Create a security event log listener and put into action
    securityLog = new EventLog("security");
    securityLog.EntryWritten += new EntryWrittenEventHandler(securityLog_EntryWritten);
    securityLog.EnableRaisingEvents = true;
} 
```

并处理：

```
/// <summary>
/// Process log events
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
protected void securityLog_EntryWritten(object sender, EntryWrittenEventArgs e)
{
    // Queue event for processing
    securityEventLogQueue.Add(e.Entry);
} 
```

我有一个单独的线程从队列中检索条目（这是一个 Blocking/ConcurrentQueue）并将它们输出到文件，这是上面输出的来源

谢谢阅读！任何和所有的帮助表示赞赏

# java - 在 Solr 中实施“顶级品牌/制造商”

> ID：16031611
> 
> 赞同：1
> 
> 时间：2013-04-16T07:55:23.380
> 
> 标签：java, solr

我的搜索框由两部分组成：

1.  使用 Solr 的建议组件实现的自动完成部分。

2.  第二部分应显示“顶级品牌”。

例如，如果用户在搜索框中键入“笔记本电脑”，自动建议将显示“Apple”、“Dell”等字样，“顶级品牌”部分应显示品牌（例如徽标）。

如何实施这个“顶级品牌”部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:07:19.113

是否有单独的品牌字段？如果是这样，您可以在该字段上分面并按计数排序。看看 wiki 上的 faceting：

[http://wiki.apache.org/solr/SimpleFacetParameters](http://wiki.apache.org/solr/SimpleFacetParameters)

# java - 嵌入式编程中的 Java

> ID：16031613
> 
> 赞同：4
> 
> 时间：2013-04-16T07:55:31.917
> 
> 标签：java, embedded, microcontroller, firmware

java编程可以用于像C和C++这样的微控制器编程吗？如果是，对它有什么要求？PIC16和PIC32系列单片机呢？他们的任何可能性。我在网上也找不到更多关于它的信息。感谢您的帮助。干杯！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:33:25.207

要在任何平台上运行 Java，您都需要一个 Java 虚拟机 (JVM)。由于所需的内存资源以及性能，我不会对 PIC16 抱太大希望。如果您想要最高的性能和最小的占用空间，那么 C 或 C++ 是嵌入式系统的更好（也是最常用的）解决方案。

[我在这里](https://stackoverflow.com/questions/10856437/embedded-java-vm-for-cortex-m3/10860479#10860479)整理了嵌入式系统的 JVM 列表。您将能够在理论上其中之一支持的任何目标上运行 Java。某些链接可能已过时，您可能需要进行搜索以查看自创建列表以来是否有任何新工具可用。

许多但不是全部都需要某种内核调度程序或 RTOS 才能运行，因此您需要考虑目标处理器以及目标处理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:58:50.507

你用的是什么微控制器？

你找到标枪了吗？可以使用 Java 对某些微控制器进行编程。

[http://www.parallax.com/tabid/255/Default.aspx](http://www.parallax.com/tabid/255/Default.aspx)

别的什么都不知道。不过，我建议您尝试 C。尝试很有趣。

编辑：[http](http://www.barrgroup.com/Embedded-Systems/How-To/KVM-J2ME-Java-Virtual-Machine) ://www.barrgroup.com/Embedded-Systems/How-To/KVM-J2ME-Java-Virtual-Machine 有点旧的链接，但也许这就是你要找的。

# jquery - 无法使用每个 func 将 href 属性更改为标签并从表中读取数据

> ID：16031618
> 
> 赞同：0
> 
> 时间：2013-04-16T07:56:02.043
> 
> 标签：jquery

这让我发疯，我正在尝试更改由 html 中显示的表格读取的 href 属性。

这是我的html代码

```
 <div id="packgeImages">
        <ul>
            <li><a href="" class="title" rel="shadowbox">Link1</a></li>
            <li><a href="" class="title" rel="shadowbox">Link2</a></li>
            <li><a href="" class="title" rel="shadowbox">Link3</a></li>
            <li><a href="" class="title" rel="shadowbox">Link4</a></li>
        </ul>
    </div> 
```

这是改变它的 JQuery 代码

```
<script type="text/javascript">
    $(document).ready(function () {
        var hrefText = $('[rel=shadowbox]').attr('href');//Get the Value of href from Li
        $('#fullImgGridView tr').each(function (i) {
            if (!this.rowIndex) return; // skips first row
            var bigSizeImagePath = this.cells[0].innerHTML; //Read Value
            alert(bigSizeImagePath); //Alert Value, Checked/Works Fine
            $('[rel=shadowbox]').attr("href", bigSizeImagePath); //Sets the Paths using last record of table//
        });
    });
</script> 
```

现在它可以工作了，但**问题是它将 href 属性设置为表的最后一条记录。而不是一一。** 请帮我解决一下这个。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:58:03.723

你的问题在

```
$('[rel=shadowbox]').attr("href", bigSizeImagePath); 
```

`href`它为*所有*匹配的对象设置`[rel=shadowbox]`。你只想设置这个：

```
$(this).find('a').attr("href", bigSizeImagePath); 
```

您的 HTML 不清楚，但如果您实际上有 a`TABLE`和 a`UL`并且您正在尝试从 TABLE 更新 UL，请尝试以下操作：

```
$('#packgeImages li:eq('+(this.rowIndex-1)+') a[rel=shadowbox]').attr("href", bigSizeImagePath); 
```

...用于`rowIndex`从中选择相应的编号`LI`并在其`<div id="packgeImages">`上设置href。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:11:25.250

问题是您的过滤器选择了所有`<li>`标签

```
$('[rel=shadowbox]').attr("href", bigSizeImagePath); 
```

尝试选择匹配的索引：

```
$('[rel=shadowbox]').eq(this.rowIndex - 1).attr("href", bigSizeImagePath); 
```

(this.rowIndex - 1) 是因为你跳过了第一行

# android - Android Beam 上的纯文本

> ID：16031619
> 
> 赞同：0
> 
> 时间：2013-04-16T07:56:06.557
> 
> 标签：android, nfc, android-beam

我正在开发一个具有 minSdk=14 和 targetSdk=17 的 Android 应用程序。我希望应用程序使用 Android Beam 将纯文本字符串从手机发送到 NFC 阅读器。我还没有阅读器，并且一直在尝试将纯文本数据从一台 Android 设备传输到另一台设备（我有一台运行 4.2.2 的 Nexus 4 和一台运行 4.0.3 的 LG Optimus L5）。

我找到了两种发送文本数据的方法，第一种是使用 TNF_WELL_KNOWN 和 RTD_TEXT 作为类型，另一种是使用 TNF_MIME_MEDIA 和 text/plain 作为类型。

从 L5 发送到 N4 后，我看到的只是在收集的新标签下是“text/plain”。我还尝试使用 NXP TagWriter 读取 Beam 数据，这是我在使用 RTD_TEXT [http://i.imgur.com/0qbAwld.png](http://i.imgur.com/0qbAwld.png)时得到的，这是在使用 text/plain MIME [http://i.imgur 时得到的。 com/bz9RxuI.png](http://i.imgur.com/bz9RxuI.png)。

这是使用 RTD_TEXT 时的代码

```
 NdefRecord[] records = {
                new NdefRecord(NdefRecord.TNF_WELL_KNOWN, 
                        NdefRecord.RTD_TEXT,
                        new byte[0], 
                        "testing".getBytes())
        };
        NdefMessage msg = new NdefMessage(records);
        adapter.setNdefPushMessage(msg, this); 
```

这是使用 text/plain MIME 时的代码

```
 NdefRecord[] records = {
                new NdefRecord(NdefRecord.TNF_MIME_MEDIA, 
                        "text/plain".getBytes(),
                        new byte[0], 
                        "testing".getBytes())
        };
        NdefMessage msg = new NdefMessage(records);
        adapter.setNdefPushMessage(msg, this); 
```

如何正确创建 NdefRecord？还是仅在另一部手机上未显示有效负载时才按预期工作？发送纯文本数据时首选这两种方法（RTD_TEXT 和 MIME）中的哪一种？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:00:07.253

`RTD_TEXT`记录被映射到 MIME 类型的“text/plain”以进行意图过滤。也就是说：“text/plain”的意图过滤器将匹配两种类型的记录。因此，您使用哪种类型并不重要。

记录的有效负载`RTD_TEXT`比 MIME 类型的文本/纯文本稍微复杂一些。它应该包含有关使用的编码和内容语言的信息，请参阅[http://www.nfc-forum.org/specs/spec_list/](http://www.nfc-forum.org/specs/spec_list/)上提供的规范。（所以`RTD_TEXT`你创建的记录不正确。）

# utf-8 - 如何生成非 UTF-8 字符集

> ID：16031620
> 
> 赞同：15
> 
> 时间：2013-04-16T07:56:07.480
> 
> 标签：utf-8

我的要求之一是“文本框名称应仅接受 UTF-8 字符集”。我想通过输入非 UTF-8 字符集来执行否定测试。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T08:44:13.880

如果您要问如何构造一个非 UTF-8 字符，那么[从 Wikipedia 的这个定义](http://en.wikipedia.org/wiki/UTF-8#Description)中应该很容易：

[![utf8 定义](https://i.stack.imgur.com/EK8vP.png)](https://i.stack.imgur.com/EK8vP.png)

对于代码点 U+0000 到 U+007F，每个代码点都是一个字节长，如下所示：

```
0xxxxxxx   // a 
```

对于代码点 U+0080 到 U+07FF，每个代码点有两个字节长，如下所示：

```
110xxxxx 10xxxxxx  // b 
```

等等。

因此，要构造一个非法 UTF-8 字符，长度为一个字节，最高位必须为 1（与模式 a 不同），第二高位必须为 0（与模式 b 不同）：

```
10xxxxxx 
```

或者

```
111xxxxx 
```

这也不同于两种模式。

使用相同的逻辑，您可以构造超过两个字节长的非法代码单元序列。

您没有标记语言，但我必须对其进行测试，所以我使用了 Java：

```
for (int i=0;i<255;i++) {
    System.out.println( 
        i + " " + 
        (byte)i + " " + 
        Integer.toHexString(i) + " " + 
        String.format("%8s", Integer.toBinaryString(i)).replace(' ', '0') + " " + 
        new String(new byte[]{(byte)i},"UTF-8")
    );
} 
```

0 到 31 是不可打印字符，然后 32 是空格，后面是可打印字符：

```
...
31 31 1f 00011111 
32 32 20 00100000  
33 33 21 00100001 !
...
126 126 7e 01111110 ~
127 127 7f 01111111 
128 -128 80 10000000 � 
```

`delete`is`0x7f`和之后，从 128 到 254 不打印有效字符。您还可以从[UTF-8 图表](http://www.utf8-chartable.de/unicode-utf8-table.pl)中看到：

[![图片](https://i.stack.imgur.com/WEQZQ.png)](https://i.stack.imgur.com/WEQZQ.png)

代码点`U+007F`用一个字节`0x7F`（位`01111111`）表示，而代码点`U+0080`用两个字节`0xC2 0x80`（位`11000010 10000000`）表示。

如果您不熟悉 UTF-8，我强烈建议您阅读这篇优秀的文章：

[每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)

# java - 正则表达式匹配文件名

> ID：16031622
> 
> 赞同：1
> 
> 时间：2013-04-16T07:56:10.303
> 
> 标签：java, regex, file

我有一个 java 类，我想读取名称以“home-search-log.log”开头的文件。所以我写了这段代码。

```
 File dir = new File("D:\\");
   File[] foundFiles = dir.listFiles(new FileFilter() {
    public boolean accept(File file) {

        return Pattern.compile("^(home-search-log.log)").matcher(file.getName()).matches();
    }
   });
   for (File file : foundFiles) {
       System.out.println(file.getName());
   } 
```

但它只返回一个具有给定名称的文件。我的另一个文件的名称是“home-search-log.log.2013-04-12”，但此模式不返回它。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:59:06.787

我认为以下代码可能会更好：

```
return file.getName().startsWith("home-search-log.log"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:07:15.477

试试下面的正则表达式。

```
System.out.println("home-search-log.log.2013-04-12".matches("^home-search-log.*")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:01:22.643

使用如下；

```
"home-search-log.log((.\\d[4]-\\d[2]-\\d[2])?)" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T07:58:57.273

尝试这样的事情：

```
"^(home-search-log\\.log.*)" 
```

首先，您需要转义正则表达式中使用的特殊字符（“-”，“.”）并添加末尾以指定您要匹配任何内容“。*”所以在这种情况下，它应该匹配来自“home-search-”的任何内容log.log”到“home-search-log.logsomething”

# unix - 如何读取双引号内的值

> ID：16031624
> 
> 赞同：0
> 
> 时间：2013-04-16T07:56:16.887
> 
> 标签：unix

如何读取双引号内的值？例如

```
num1            num2
170            "123 456 758"
141            "890 768 134"
546            "890 786 988 678 463" 
```

对于上述输入，我想将整个值打印成两部分：双引号外的数字。双引号内的数字

```
num2
123 456 758
890 768 134
890 786 988 678 463

num1
170
141
546 
```

有人可以帮助我提供有关如何执行上述操作的示例代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:10:40.920

试试这几个技巧：

```
awk -F\" '{print $2}' inputfile 
```

或者

```
cut -d'"' -f2 inputfile 
```

或者

```
% s='input'
% expr "$s" : '.*"\([^"]*\)"' 
```

**这篇文章也很有用：**

1\. [UNIX SHELL 报价教程](http://www.grymoire.com/Unix/Quote.html)

2\. [Unix - Shell 引用机制](http://www.tutorialspoint.com/unix/unix-quoting-mechanisms.htm)

希望，这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:33:34.027

这是一个快速的解决方案。如果您指定更一般的输入参数，我可以提供更好的输入参数。注释行是同一事物的另一种解决方案。

```
awk 'NR==1 {left[1] = $1; print $2}
NR>1 {left[NR]=$1; sub("^[0-9]+[[:space:]]+\"",""); sub("\"[[:space:]]*$", ""); print}
#NR>1 {left[NR]=$1; if(match($0, "\"[0-9 ]+\"")) $0=substr($0, RSTART+1, RLENGTH-2); print}
END { print ""; for(i=1;i<=NR;++i) print left[i] }
' <<EOT
num1            num2
170            "123 456 758"
141            "890 768 134"
546            "890 786 988 678 463"
EOT 
```

输出：

```
num2
123 456 758
890 768 134
890 786 988 678 463

num1
170
141
546 
```

# html - POST 表单中的双 UTF-8 编码

> ID：16031627
> 
> 赞同：1
> 
> 时间：2013-04-16T07:56:47.703
> 
> 标签：html, forms, utf-8

我正在尝试提交包含 UTF-8 字符的表单。

```
<form id="workflowPersistForm" class="invisibleClass" accept-charset="UTF-8" enctype="application/x-www-form-urlencoded; charset=UTF-8" method="post" action="/workflow-next">
  <input id="stateGlobal" type="hidden" value="お問い合わせ" name="state"/>
</form> 
```

问题是在查询日志中，日文字符是乱码，从响应中看起来它们是双重编码的（UTF-8）。

如果我执行 GET 而不是 POST，一切正常。谁能帮帮我？这是在哪里进行双重编码的？我该如何解决？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-16T08:02:16.503

据我所知，您实际上不能“双重编码”UTF-8（与 Hex 和 Base64 等二进制编码不同），如果您两次应用相同的操作，则不会发生任何事情（意味着输入将保持与一次）

你到底得到了什么？您如何处理该输入？

# sql - ORACLE SQL 查询仅重叠时间范围

> ID：16031632
> 
> 赞同：1
> 
> 时间：2013-04-16T07:57:10.280
> 
> 标签：sql, oracle, overlapping, date-range

**`Emp`表格中的数据：**

```
NUM  DEPT   HIRED_SDT                       HIRED_EDT
---  -----  ------------------------------  ------------------------------
1    Sales  October, 01 2012 11:00:00+0000  October, 01 2012 11:30:00+0000
2    Sales  October, 01 2012 11:22:00+0000  October, 01 2012 12:40:00+0000
3    Sales  October, 01 2012 13:00:00+0000  October, 01 2012 13:50:00+0000
4    CC     October, 01 2012 14:00:00+0000  October, 01 2012 15:00:00+0000
5    CC     October, 01 2012 15:00:00+0000  October, 01 2012 16:10:00+0000
6    CC     October, 01 2012 16:00:00+0000  October, 01 2012 17:20:00+0000 
```

**期望的结果：**

仅按部门分组的重叠时间范围

==> 例如。3 条记录中`Sales`有 2 条重叠

```
NUM  DEPT   HIRED_SDT                       HIRED_EDT
---  -----  ------------------------------  ------------------------------
1    Sales  October, 01 2012 11:00:00+0000  October, 01 2012 11:30:00+0000
2    Sales  October, 01 2012 11:22:00+0000  October, 01 2012 12:40:00+0000
5    CC     October, 01 2012 15:00:00+0000  October, 01 2012 16:10:00+0000
6    CC     October, 01 2012 16:00:00+0000  October, 01 2012 17:20:00+0000 
```

[http://sqlfiddle.com/#!4/91730/1](http://sqlfiddle.com/#!4/91730/1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:15:23.617

您可以尝试使用`EXISTS`：

```
SELECT *
FROM Emp e
WHERE EXISTS (
  SELECT *
  FROM Emp
  WHERE DEPT = e.DEPT
    AND HIRED_SDT < e.HIRED_EDT
    AND HIRED_EDT > e.HIRED_sDT
    AND NUM <> e.NUM
); 
```

即，如果存在属于同一部门且范围与该行重叠的另一行，则选择一行。

# linq - 动态 linq 无法解析排序

> ID：16031636
> 
> 赞同：0
> 
> 时间：2013-04-16T07:57:29.557
> 
> 标签：linq, entity-framework, dynamic-linq

假设我有一个查询，它选择一个定义的类型，如下所示：

```
public class SomeObject
{
     public DateTime CreatedDate { get; set; }
}

private class MyType
{
    internal SomeObject Object1 { get; set; }
    internal SomeThing Object2 { get; set; }
    internal DateTime SomeDate { get; set; }   
}

var query =  from bla in context.Melp join ..... 
             select new MyType()
             {
                  Object1 = something,
                  Object2 = somethingelse,
                  SomeDate = bla.date
             } 
```

现在我们 DynamicLinq 在结果集上添加动态的、用户定义的排序，如下所示：

```
query.OrderBy("SomeDate"); 
```

或者

```
query.OrderBy("Object1.CreatedDate"); 
```

但是当我尝试订购时，例如，“SomeDate”或“Object1.CreatedDate”，我收到提示异常：

> “MyType”类型中不存在属性或字段“SomeDate”

现在，当我只是将方法语法中的排序添加到查询中时：

```
query = query.OrderBy(x => x.SomeDate) 
```

或者

```
query = query.OrderBy(x => x.Object1.CreatedDate) 
```

一切正常，所以我认为这可能是 DynamicLinq 中的一个错误，或者我说错了......

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:30:41.983

Dynamic Linq makes heavy use of Reflection. Maybe it is a problem because your properties are marked as `internal` and the method `<Type>.GetProperty` method (which will be used by the Dynamic Linq library) will not watch for `internal` properties unless the `BindingFlags` would be adapted.

Give it a try to mark them public and your class also.

# javascript - 如何使用 Javascript 隐藏表头

> ID：16031651
> 
> 赞同：0
> 
> 时间：2013-04-16T07:58:22.393
> 
> 标签：javascript, jquery-ui, jquery-easyui

如何在 javascript 中隐藏表头。

具体来说，我使用的是easyui-datagrid，我必须在其中隐藏列标题。

请指导我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:30:18.840

If you use pure javascript without the help of any framework, like jQuery etc, you should give an id to your table and assign the table object to a variable:

```
var tb = document.getElementById("your-table-id"); 
```

and then find the "thead" tag inside the table and hide it, as follows:

```
tb.getElementsByTagName("thead")[0].style.display = "none"; 
```

note that getElementsByTagName returns an array of html elements, since a valid table can have 0 or 1 "thead" occurrencies, if you are sure that your table has headers you can securely access the first element and change it's visibility.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:02:26.777

如果你真的需要使用 JavaScript，那么你应该能够使用标准选择器和 jQuery 并使用 Hide 方法：

```
$("#id or .class of header row").hide(); 
```

但我建议改用 CSS：

```
#id or .class of header row {
    display: none;
} 
```

使用 CSS 路由的影响较小，所有 jQuery 都会将相同的样式直接应用于元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T15:57:32.150

我用这段代码做到了：

```
 $('#my-ddata-grid').datagrid({
 ....
 ....
 });

jQuery('.datagrid-header-inner').hide(); 
```

您还可以删除其他元素，例如这样的分页栏：

```
jQuery('.datagrid-pager.pagination').remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-03T02:00:08.033

以下代码对我有用：

```
<style>
.datagrid-header-row {
    visibility: collapse;
}
</style> 
```

# cocoa - NSOutlineView/NSTreeController 删除后没有释放所有模型对象

> ID：16031660
> 
> 赞同：3
> 
> 时间：2013-04-16T07:58:57.797
> 
> 标签：cocoa, nsoutlineview, nstreecontroller, retain-cycle

我有一个非常基本的应用程序：一个`NSOutlineView`绑定到`NSTreeController`. 大纲视图显示一个简单的模型对象 ( `TCCard`)。我添加了两个按钮，以便可以在大纲视图中添加和删除模型对象。

查看 Instruments (Leaks) 中的应用程序，我可以看到我的模型对象的新实例是在我添加它们时创建的，但当我从大纲视图中删除它们时，并不是所有实例都被释放。即使大纲视图没有更多条目，我的模型对象的两个或三个实例也始终保持“活动”状态。

大纲视图或树控制器是否在幕后进行一些缓存？下面的代码：

```
#import "TCAppDelegate.h"

#import "TCCard.h"

@implementation TCAppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    TCCard *first = [TCCard new];
    first.title = @"First card";

    // tree controller content is bound to self.cards:
    self.cards = [@[first] mutableCopy]; 
}

- (IBAction)addCard:(id)sender;
{
    TCCard *second = [TCCard new];
    second.title = [NSString stringWithFormat:@"%ld card", self.cards.count];

    [self.treeController addObject:second];
}

- (IBAction)deleteCard:(id)sender;
{
    NSIndexPath *path = [NSIndexPath indexPathWithIndex:self.cards.count - 1];

    [self.treeController setSelectionIndexPath:nil];

    [self.treeController removeObjectAtArrangedObjectIndexPath:path];

    // some model objects continue to live
}

@end 
```

这是一个非常基本的例子。在我的真实应用程序中，这些模型对象非常“沉重”，并有很多对其他对象的引用。我真的希望在将它们从视图中删除时将它们全部释放。

**编辑**：即使使用 Apple 的示例代码也可以重现此问题：[https ://developer.apple.com/library/mac/#samplecode/DragNDropOutlineView/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008831](https://developer.apple.com/library/mac/#samplecode/DragNDropOutlineView/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008831)

在 Instruments 中的示例中运行并搜索`SimpleNodeData`. 观察实例的数量，然后从示例应用程序中删除所有节点（通过上下文菜单）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T19:14:20.537

在方法`- (IBAction)addCard:(id)sender`中，您使用 分配新的 TCCard 对象`[TCCard new]`，这为您提供了一个必须显式释放的对象。因为树控制器保留了你添加到它的对象，你应该在调用之后释放它`[treeController addObject:]`。像这样：

```
- (IBAction)addCard:(id)sender;
{
    TCCard *second = [TCCard new];
    second.title = [NSString stringWithFormat:@"%ld card", self.cards.count];
    [self.treeController addObject:second];
    [second release];
} 
```

提示：在 Xcode 中使用 Product > Analyze 来检测这种错误。

# sql-server - 当列为空时，未写入对第二个数据库的 SQL 更新

> ID：16031664
> 
> 赞同：0
> 
> 时间：2013-04-16T07:59:08.170
> 
> 标签：sql-server, tsql

我有一个查询，用于在新数据库中为正确的广告获取正确的类别，但是一些受影响的行可能有多个类别，而有些可能没有，研究给了我使用'table.column 的信息+ your_data'，这似乎带来了副作用，因为它不会更新 NULL 列，即使它说影响了正确数量的行..

SQL：

```
MERGE INTO sites.dbo.ads
USING (
        SELECT e.name
        FROM Database1.dbo.education AS e
        INNER JOIN releducationcategory AS re ON e.educationid = re.educationid
        INNER JOIN category AS c ON re.categoryid = c.categoryid
        INNER JOIN string AS s ON c.categoryid = s.identifier
        WHERE (s.string = 'Biologi, Fysikk & Kjemi') AND (e.site = 'sd')
     ) AS source
  ON Database2.dbo.ads.name COLLATE Finnish_Swedish_CI_AS = source.name COLLATE Finnish_Swedish_CI_AS
  WHEN MATCHED THEN
  UPDATE 
       SET sites.dbo.ads.category = ', biologi-fysikk-kjemi'; 
```

当该列为 NULL 时，该更新运行良好，但是当已经有一个值时，它将被覆盖。当我将其更改为以下时：

```
SET sites.dbo.ads.category = sites.dbo.ads.category + ', biologi-fysikk-kjemi'; 
```

它只是更新不具有 NULL 值的行.. 但是它确实说影响了相同数量的行.. 怎么办？我应该做案例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:06:22.743

存储逗号分隔值几乎总是一个坏主意，但如果你坚持这样做，这应该有效：

```
SET sites.dbo.ads.category =
    COALESCE(sites.dbo.ads.category + ', ','')
    + 'biologi-fysikk-kjemi'; 
```

这也将避免第一项（从切换`NULL`到非时`NULL`）以逗号开头。

您看到这种行为的原因是，根据 ANSI 标准。`NULL`+ 字符串 = `NULL`。您*可以*将其关闭，但不建议这样做：

[`SET CONCAT_NULL_YIELDS_NULL`](http://msdn.microsoft.com/en-us/library/ms176056.aspx)：

> 控制是否将连接结果视为 null 或空字符串值。
> 
> **重要的**
> 
> 在 SQL Server 的未来版本中，任何显式设置该选项的应用程序`CONCAT_NULL_YIELDS_NULL`都会生成错误。避免在新的开发工作中使用此功能，并计划修改当前使用此功能的应用程序。`ON``OFF`

# windows-phone-7 - 如何在window phone 7中使图像可点击

> ID：16031666
> 
> 赞同：0
> 
> 时间：2013-04-16T07:59:10.917
> 
> 标签：windows-phone-7

我需要窗口电话开发人员的帮助。我正在制作图像源来自互联网的应用程序。我想导航到我已经添加到应用程序中的另一个页面，方法是将它们设为 xaml 格式。现在的问题是我想通过单击图像导航到其他页面。

我的图像 xaml 代码是这样的。

```
<Image Height="134" HorizontalAlignment="Left" Source="http://www.serversidedesign.com/wp-content/uploads/2011/10/partner5-170x134.jpg" Margin="27,29,0,0" Name="image1" Stretch="Fill" VerticalAlignment="Top" Width="170"  ImageFailed="image1_ImageFailed" /> 
```

意思是 xaml.cs 代码是

```
private void image1_ImageFailed(object sender, ExceptionRoutedEventArgs e)
        {
            NavigationService.Navigate(new Uri("/Page1.xaml", UriKind.RelativeOrAbsolute));
        } 
```

我无法导航到我的其他应用页面。如果有人帮助我，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:13:33.993

我观察到的第一件事是您的图像无法显示。Source 如果指定为 url，则 url 类型必须从相对定义到绝对。其次，当你想要点击它时，最好有一个带有 content="" 和 background=image 源的按钮。在按钮中单击您定义导航过程。示例代码：

```
<Button Width="200" Click="Image_Click" >
                        <Button.Background>
                            <ImageBrush Stretch="Fill" ImageSource="/Images/99x99.png"/>
                        </Button.Background>
</Button> 
```

在 image_click 事件中定义您的导航。

# java - 如何运行 Maven 站点以及正常的安装/包目标

> ID：16031668
> 
> 赞同：1
> 
> 时间：2013-04-16T07:59:14.713
> 
> 标签：java, maven, build-process, maven-release-plugin

我们正在尝试使用 Maven 生成更改日志和其他一些报告。我们正在使用**更改日志**插件和**站点**插件。但是我们使用以下方法生成报告：

`mvn clean package site`命令。有什么方法可以跳过给出**站点目标**，并在我执行 mvn install/package 时让 maven 自动生成报告？

我的想法是生成报告并将其复制到战争中，以便某些用户可以在我执行正常的 Maven 构建/打包后访问它并查看更改日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:00:46.330

哦，愚蠢的我，我可以这样做：

```
<executions><execution>...</execution><executions> 
```

谢谢。

# xpath - 使用 XPATH 获取非空元素

> ID：16031673
> 
> 赞同：25
> 
> 时间：2013-04-16T07:59:34.213
> 
> 标签：xpath

我有以下 XML

```
<?xml version = "1.0" encoding = "UTF-8"?>
<root>
  <group>
    <p1></p1>
  </group>
  <group>
    <p1>value1</p1>
  </group>
  <group>
    <p1></p1>
  </group>
</root> 
```

是否有可能获得最后一个具有价值的节点？在这种情况下，获取第二组/p1 的值。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-16T15:45:12.557

这个 xpath 也应该可以工作：

```
//group/p1[string-length(text()) > 0] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-16T08:21:03.263

像这样的东西怎么样`/root/group/p1[text() and not(../following-sibling::group/p1/text())]`

换句话说：获取具有文本且其组父级后面没有具有非空 p1 元素的组节点的 p1 元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-06T07:10:07.390

您也可以使用`[not(node())]`选择器。例子：`//group/p1[not(node())]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-01T21:56:41.363

它实际上可以简化如下：

```
//group/p1[string-length() > 0]    => element text is non-empty
//group/p1[string-length() = 6]    => element text has length 6 
```

# c# - 使用长列表选择器制作可点击的菜单

> ID：16031676
> 
> 赞同：0
> 
> 时间：2013-04-16T07:59:36.337
> 
> 标签：c#, windows-phone-8

我想制作一个菜单列表，并且希望它是可点击的。当用户点击它时，它会改变页面（到另一个 XAML）。我是 Windows Phone 编程的初学者，所以和现在一样，我只使用`selectionChanged`，但它只适用于列表的 1 个字符串。

所以假设我想在菜单中列出主页、登录、论坛，我只能`selectionChanged`用于第一个。

我在每个站点上一遍又一遍地寻找解决方案，但没有一个站点共享完整的教程来制作它。

如果有人知道如何制作，请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:51:37.387

这已在 StackOverflow 上多次讨论过。您想要实现的是获取与 LongListSelector 的项目相关联的一些数据。该数据存在于`DataContext`项目的属性中。当您处理`Tap`列表项上的事件时，您可以检索您的项的 DataContext，将其转换为所需的类型，并根据需要使用它，例如导航到某个特定页面或您想要实现的任何内容。

将此[答案](https://stackoverflow.com/a/7728445/371804)视为示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:59:42.603

您应该检查随 sdk 提供的模板化应用程序。

创建一个 Databound App 类型的新项目。

# android - 由 Action Main（来自 AAR）而不是发现的 NDEF 启动的应用程序

> ID：16031682
> 
> 赞同：0
> 
> 时间：2013-04-16T07:59:42.587
> 
> 标签：android, tags, nfc, ndef, android-applicationrecord

我试图通过扫描标签来启动我的应用程序，但我得到的意图是操作 Main 而不是我想要的 NDEF Discovered。

这是我用来编写 NdefMessage 的代码：

```
NdefRecord aar = NdefRecord.createApplicationRecord("com.example.mynfc");
NdefRecord record = createUriRecord("www.stackoverflow.com");
NdefMessage message = new NdefMessage(new NdefRecord[]{record, aar}); 
```

使用 createUriRecord ：

```
private NdefRecord createUriRecord(String text){
    String uniqueId = text.substring(4);      
    byte[] uriField = uniqueId.getBytes(Charset.forName("US-ASCII"));  
    byte[] payload = new byte[uriField.length+1];                                                                       //add 1 for the URI Prefix  
    payload[0] = 0x01;                                                                                                  //prefixes http://www. to the URI  
    System.arraycopy(uriField, 0, payload, 1, uriField.length);                                                         //appends URI to payload  
    NdefRecord uriRecord = new NdefRecord(NdefRecord.TNF_WELL_KNOWN, NdefRecord.RTD_URI, new byte[0], payload);
    return uriRecord;
} 
```

这是带有意图过滤器的清单的一部分：

```
 <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppBaseTheme" >
    <activity
        android:name="com.example.mynfc.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="*/*" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.nfc.action.TECH_DISCOVERED" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>

        <meta-data
            android:name="android.nfc.action.TECH_DISCOVERED"
            android:resource="@xml/techs" />

        <intent-filter>
            <action android:name="android.nfc.action.TAG_DISCOVERED" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

我究竟做错了什么 ？aar 记录排在第二位，intent 过滤器考虑了所有的 mime 类型。谢谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:54:58.593

您在筛选 MIME 类型记录时正在创建 URI 类型记录。改为过滤 URI 类型的记录。除此之外，URI 记录负载应该以方案开头，例如“http://”（否则过滤器将永远不会匹配）。

# java - 通过 API 进行 Magento 客户身份验证

> ID：16031683
> 
> 赞同：2
> 
> 时间：2013-04-16T07:59:50.077
> 
> 标签：java, php, api, magento, soap

我正在将 Magento 与第 3 方 Java Web 应用程序一起使用。我的应用程序通过 Magento SOAP API V2 “连接”到 Magento。

如何通过 api 从我的 Java 应用程序（Magento 之外）执行客户身份验证？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T07:40:28.400

我想出了一个关于如何通过 SOAP API 登录客户的解决方案，我会将其发布在这里，以便对其他人有所帮助。这是我为使其工作所做的工作：

1.  我在 Magento 中创建了一个自定义模块，使用自定义方法登录客户并重新调整在服务器端设置的**sessionID 。**

    ```
    Mage::app()->setCurrentStore($website);
    // Init a Magento session. This is super ultra important
    Mage::getSingleton('core/session'); 

    // $customer Mage_Customer_Model_Customer
    // We get an instance of the customer model for the actual website
    $customer = Mage::getModel('customer/customer')
        ->setWebsiteId(Mage::app()->getStore()->getWebsiteId());

    // Load the client with the appropriate email
    $customer->loadByEmail($email);

    // Get a customer session
    $session = Mage::getSingleton('customer/session');

    $session->loginById($customer->getId());
      if ($session->isLoggedIn()) {
        return $session->getSessionId();
    } else {
         return null;
    } 
    ```

2.  我创建了一个[Magento Custom Api](http://www.magentocommerce.com/api/soap/create_your_own_api.html)，因此我可以通过 SOAP 调用我的登录方法。

3.  从我的 JAVA 应用程序调用登录方法，获取 sessionId，然后根据收到的 sessionId 在浏览器上设置 cookie。 `http://yourmagentohost/setCookies.php?sessionId=your_session_id`

在里面`setCookies.php`你有：`setcookie("frontend", $_GET["sessionId"] , time()+3600);`

就是这样，现在您有一个登录的客户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-21T00:44:50.983

> 如何通过 api 从我的 Java 应用程序（Magento 之外）执行客户身份验证？SOAP API V2

澄清：API 用户（至少是 Soap）和客户是两种用户类型。如果您有一个预先存在的用户列表，并且正在寻找他们是否作为用户在 Magento 内部存在，您可以检索电子邮件帐户及其相关属性和相应的密码哈希（CE：md5:salt，或 CE/EE：sha :salt) 全部通过 SOAP。如果您要进行比较操作，则需要对您的密码实施相同的散列以进行 1:1 比较。如果您希望您的应用程序使用 SOAP 直接执行操作，我会确保有一个抽象层，因为您的应用程序可能会被用于恶意针对其他用户 ID，这一切都取决于 Magento 管理员中设置的 SOAP 角色和 ACL . 继续...

V2：您必须切换到 Java，例如：PHP。

```
$username 'yourUsername';

$password = 'yourApiKeyPlainText';

$proxy = new SoapClient('https://www.yourdomain.com/magento/api/v2_soap?wsdl=1');

$sessionId = $proxy->login($username, $password);

//Get a Full customer List from Magento
$customerList = $proxy->customerCustomerList($sessionId);
//get back a list    

//Target a user from your List, Compare Details against your App
$customerInfo = $proxy->customerCustomerInfo($sessionId, '2'); //Customer Id 
```

远程操作，如结帐，可能相当复杂。问题仍然存在，您希望在您的应用程序旁边或代表用户做什么？

参考资料： http: [//www.magentocommerce.com/api/soap/customer/customer.list.html](http://www.magentocommerce.com/api/soap/customer/customer.list.html) [http://www.magentocommerce.com/api/soap/customer/customer.info.html](http://www.magentocommerce.com/api/soap/customer/customer.info.html)

干杯，

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-19T06:56:19.567

您的代码示例不使用 SOAP。Magento SOAP 访问实际上如下所示：

```
 $client = new SoapClient('http://magentohost/soap/api/?wsdl');

    // If somestuff requires api authentification,
    // then get a session token
    $session = $client->login('apiUser', 'apiKey'); 
```

查看 API 文档： http: [//www.magentocommerce.com/api/soap/introduction.html](http://www.magentocommerce.com/api/soap/introduction.html)

# python - Django 模型关系测试

> ID：16031684
> 
> 赞同：1
> 
> 时间：2013-04-16T07:59:54.133
> 
> 标签：python, django, django-models, django-testing

我是 django 测试的新手，在使用它们来测试模型之间的关系时遇到了一些问题。

这是我的模型的摘录：

```
class Member(models.Model):
    user = models.OneToOneField('auth.User')
    points = models.IntegerField()

    def __unicode__(self):
        return self.points

    def get_number_of_poll(self):
        nbr_of_poll = Poll.objects.filter(user=self.user).count()
        return nbr_of_poll

class Poll(models.Model):
    question = models.CharField(max_length=200)
    user = models.ForeignKey(User)

    def __unicode__(self):
        return self.question 
```

以下是测试：

```
from polls.models import Member, Poll
from django.contrib.auth.models import User
from django.test import TestCase

class MemberTestCase(TestCase):
    def setUp(self):
        user = User(username='user')
        self.member = Member(user=user, points=5000)
        poll = Poll(question='poll', user=user)

    def test_get_number_of_poll(self):
        self.assertEqual(self.member.get_number_of_poll(), 1) 
```

问题`test_get_number_of_poll()`在于始终返回 0 的方法。代码在网站上按预期工作。我在测试中做错了吗？我不确定我应该如何在测试类中设置投票。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:03:16.560

您不会保存在 setUp 方法中创建的任何项目。实例化模型对象不会将其保存到数据库中：您应该调用`save()`它们，或者只使用`User.objects.create(username='user')`为您保存的 etc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:03:09.323

问题是

```
poll = Poll(question='poll', user=user) 
```

仅实例化 Poll 对象，使用管理器实际保存对象，例如

```
poll = Poll.objects.create(question='poll', user=user) 
```

# asp.net - 会员提供者

> ID：16031686
> 
> 赞同：0
> 
> 时间：2013-04-16T07:59:58.077
> 
> 标签：asp.net, c#-4.0, membership-provider, asp.net-web-api

我的第一个问题是：apsnetmembershipprovider 和 simplemembershipprovider 之间有区别吗？我知道 aspnetmembershipprovider 很恶心，因为它总是创建临时表。所以我想知道 SimpleMembershipProvider 是使用 AspNetMembership sql 查询还是另一个。

我的第二个问题是会员提供者在 Web Api 项目中使用什么，其中客户端应用程序将是移动应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:23:14.557

此描述可能会有所帮助：

> WebSecurity 帮助程序类是管理用户（成员）帐户、密码和其他成员任务的推荐方法。SimpleMembershipProvider 类可以管理会员任务；但是，不建议这样做，因为 WebSecurity 提供了一种更简单的方法来实现成员资格。**SimpleMembershipProvider 类适用于需要更精确控制成员资格过程的开发人员**。

您可以在此处阅读更多信息，“备注”部分：http: [//msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider (v=vs.111).aspx](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider%28v=vs.111%29.aspx)

如果您不喜欢提供程序在数据库中处理表的方式，您可以实现自己的提供程序或使用实体框架成员资格提供程序（如果您使用 EF）：[http ://efmembership.codeplex.com/](http://efmembership.codeplex.com/)

# java - 在 Java 中创建批处理文件以设置路径

> ID：16031689
> 
> 赞同：1
> 
> 时间：2013-04-16T08:00:21.733
> 
> 标签：java, batch-file

我已经在我的 windows7 32 位机器上安装了 JDK 1.7.0_17 并创建了一个批处理文件集 java 路径，但它不起作用。

我已经在 c:\program files.... 下安装了 jdk，需要从 E: 运行 java 并在 E:\ 下创建批处理文件，如下所示：

```
set path="C:\Program Files\Java\jdk1.7.0_17\bin"; 
```

每当我运行 .bat 文件时，都会出现以下异常。

```
PATH=C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32
\WindowsPowerShell\v1.0\ 
```

我的代码有什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:31:41.127

Try this:

```
 path="C:\Program Files\Java\jdk1.7.0_17\bin";%path% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:12:47.227

你提到了一些例外，但我在你的问题中没有看到任何例外。

当您执行批处理文件时，仅针对该命令会话设置/更改 PATH 变量。

如果您开始新的命令会话，那么您将看不到更改的值。

你想通过设置 PATH 来实现什么？

您想使用 java 运行什么，所以所有这些都在一个批处理文件/会话中，或者在运行 java 命令之前手动设置 PATH 环境变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:05:56.803

在此之后`set path="C:\Program Files\Java\jdk1.7.0_17\bin";`添加 pause();

# java - 画布：使用片段改变方向时渲染不良

> ID：16031692
> 
> 赞同：1
> 
> 时间：2013-04-16T08:00:31.843
> 
> 标签：java, android, android-canvas

在我的项目中，我有一个视图，它绘制了一个画布。

当加载活动/片段时，一切都很好，并且图像被正确渲染。

但是当方向改变时，它会被部分渲染。这里有两个例子：

1.  这里是正确的渲染

![这是正确的渲染](https://i.stack.imgur.com/E8gOZ.png)

2.这是方向改变时的渲染：

![画布的条形渲染](https://i.stack.imgur.com/eYvQX.png)

我编写的类扩展了 View，并覆盖了 onDraw() 方法。这是代码：

```
 @Override
protected void onDraw(Canvas canvas){       
     super.onDraw(canvas);  
     int size = this.width/2;
     int left = size/2;
     int right = size +left;
     canvas.drawRoundRect(resistorRects[0], 6, 6,resPaint[0]);      
     canvas.drawRect(resistorRects[FIRST_COLOR], resPaint[1]);       
     canvas.drawRect(resistorRects[SECOND_COLOR], resPaint[2]);
     canvas.drawRect(resistorRects[THIRD_COLOR], resPaint[3]);
     canvas.drawRect(resistorRects[MULTIPLIER], resPaint[4]);
     canvas.drawRect(resistorRects[TOLERANCE], resPaint[5]);
     canvas.drawLine((float)left-15, (float)16.5, (float)left, (float)17.5, resPaint[6]);
     canvas.drawLine((float)right, (float)16.5, (float)right+15, (float)17.5, resPaint[6]);
} 
```

该类的构造函数是：

```
 public ResistorGraphicsView(Context context, int width) {       
    super(context);     
    this.width = width;     
    int i=0;        
    resPaint = new Paint[7];
    resistorRects = new RectF[6];
    while(i < 6){
        resPaint[i] = new Paint(Paint.ANTI_ALIAS_FLAG);
        resPaint[i].setColor(Color.parseColor("#DEADBEEF"));
        i++;
    }
    int size = this.width/2;
    int left = size/2;
    int right = size +left;
    resPaint[6] = new Paint(Paint.ANTI_ALIAS_FLAG);
    resPaint[6].setColor(Color.parseColor("#FFFFFFFF"));

    resistorRects[0]= new RectF(left,0,right,35);               
    resistorRects[FIRST_COLOR]= new RectF(left+10,0,left+20,35);
    resistorRects[SECOND_COLOR]= new RectF(left+30,0,left+40,35);
    resistorRects[THIRD_COLOR] = new RectF(left+50,0, left+60,35);
    resistorRects[MULTIPLIER]= new RectF(left+70,0,left+80,35);
    resistorRects[TOLERANCE]= new RectF(right-30,0,right-20,35);                        
} 
```

奇怪的事实是，当我选择扩展布局的选项时，在侧窗格中，图像被正确渲染：

```
case RESISTOR_VALUE:
    getFragmentManager().beginTransaction().replace(R.id.activity_container, new ResistorCalcFragment()).commit();
        break; 
```

事实上，如果在糟糕的渲染之后，我从侧窗格中选择它，那么视图就会正确渲染。

我试图添加一些断点，似乎一切都被正确调用了。请注意，每次旋转视图时，我都会创建该对象的新实例。

# android - 为按钮和图像按钮设置相同的背景颜色？

> ID：16031694
> 
> 赞同：1
> 
> 时间：2013-04-16T08:00:41.017
> 
> 标签：android, android-layout, background

我有一个`Button`对象和一个`Imagebutton`对象。我要做的就是为它们分配相同的背景颜色。

但是图像按钮的背景颜色似乎总是比“普通”按钮的颜色更亮？！在模拟器上稍微亮一点，在我的 S3 Mini 上亮一点。为什么？

```
private final int BUTTON_BACKGROUND_COLOR_CODE = Color.LTGRAY;

 ...

RelativeLayout TopLayout = (RelativeLayout) findViewById(R.id.topLayout);
TopLayout.removeAllViews();
TopLayout.setPadding(m_TableRowLeftPadding_px, 8, m_TableRowRightPadding_px, 4);

RelativeLayout.LayoutParams bParams = new RelativeLayout.LayoutParams(m_DefaultButtonWidth_px,
    m_CurrentButtonHeight_px);
bParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
bParams.addRule(RelativeLayout.ALIGN_PARENT_TOP);

Button itemAddButton = new Button(this);
itemAddButton.getBackground().setColorFilter(BUTTON_BACKGROUND_COLOR_CODE,
    PorterDuff.Mode.SRC_IN);

itemAddButton.setLayoutParams(bParams);
itemAddButton.setText(m_Resources.getString(R.string.AddItemButtonString));
itemAddButton.setId(ADD_ITEM_BUTTON_ID);
itemAddButton.setOnClickListener(new View.OnClickListener()
{
   ...
});

TopLayout.addView(itemAddButton);

RelativeLayout.LayoutParams ibParams = new RelativeLayout.LayoutParams(MIN_IMG_BUTTON_WIDTH,
    m_CurrentButtonHeight_px);
ibParams.addRule(RelativeLayout.LEFT_OF, itemAddButton.getId());

ImageButton speechButton = new ImageButton(this);

speechButton.setLayoutParams(ibParams);
// speechButton.setImageDrawable(m_Resources.getDrawable(R.drawable.micro2));

speechButton.setContentDescription(m_Resources.getString(R.string.AddSpeechItemString));
speechButton.getBackground().setColorFilter(BUTTON_BACKGROUND_COLOR_CODE,
    PorterDuff.Mode.SRC_IN);

speechButton.setOnClickListener(new View.OnClickListener()
{
  ...
});

TopLayout.addView(speechButton); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:58:27.410

@ChristianGraf 删除颜色过滤器并检查 ImageButton 和 Button 的原始背景：它们的亮度应该不同。这意味着背景最初是不同的。

* * *

我们如何解决这个问题？我们不可以; 很简单，因为系统用作 ImageButton 和 Button 背景的可绘制对象的亮度不同。如果您在更多设备上尝试代码，您可能会注意到更多/其他/更少的差异。

* * *

一种解决方案可能是将 设置`PorterDuff.Mode`为`setColorFilter`SRC 或 DST。这实际上会改变预期的结果。

* * *

***解决方案***（*使用其中一个背景两次*）

在您的代码中，您首先使用以下行修复`itemAddButton`(Button) 的背景：

```
itemAddButton.getBackground().setColorFilter(BUTTON_BACKGROUND_COLOR_CODE,
PorterDuff.Mode.SRC_IN); 
```

稍后，您使用相同的代码来设置固定`speechButton`(ImageButton) 的背景：

 ~~~~```
speechButton.getBackground().setColorFilter(BUTTON_BACKGROUND_COLOR_CODE,
PorterDuff.Mode.SRC_IN); 
```~~ 

~~现在，您所要做的就是代替设置背景的颜色过滤器，让我们使用您的第一个视图（按钮）的背景：~~

 ~~```
speechButton.setBackgroundDrawable(itemAddButton.getBackground()); 
```

这将确保他们具有相同的背景。~~~~

# php - 如何从 php 文件中删除行以及随之而来的换行符？

> ID：16031701
> 
> 赞同：0
> 
> 时间：2013-04-16T08:01:04.017
> 
> 标签：php, file, newline, whitespace, trim

我想从包含字符串的文件中删除该行`$snum`。我让它工作，但它留下了一个换行符。我怎样才能摆脱它？我尝试了下面的修剪功能，但它不起作用。

```
<?php

$snum=$_GET['snum'];

$filePath = './SLBrecords.csv';

$fileArr = file( $filePath );

//$fileArr = file( $filePath, FILE_SKIP_EMPTY_LINES);

foreach($fileArr as $k=>$line) {
    if (strpos($line,$snum) !== false) {
        unset($fileArr[$k]);
        trim(preg_replace('/\s\s+/', ' ', $fileArr[$k]));
    }
}
$success = FALSE;
if ( file_put_contents( $filePath, implode( '', $fileArr ), LOCK_EX ) )
{
    $success = TRUE;
}

header("Location: sfadhome.php");

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:33:01.020

修订 #5 同时，我做了一个重大测试（使用各种字符串 - 也有 "\n" 和 "\r\n"） - 我认为这个就是你要找的那个：

```
<?php

 $cont = file_get_contents($filePath);

 $quoted = preg_quote($snum);

 $replace = array(
   '/^[^\r\n]*'.$quoted.'[^\r\n]*($|\r?\n)/' => '',
   '/\r?\n[^\r\n]*'.$quoted.'[^\r\n]*($|\r?\n)/' => '$1'
 );

 $cont = trim(preg_replace(array_keys($replace), array_values($replace), $cont));

 file_put_contents($filePath, $cont); 
```

如果它不起作用，请告诉我 - 我相信我们会修复它！

# css - background-img 没有高度或宽度？

> ID：16031703
> 
> 赞同：-1
> 
> 时间：2013-04-16T08:01:13.003
> 
> 标签：css

我正在使用 CSS background-img。路径正确，但图像没有宽度或高度。

```
 HTML: 
 <button id="view-switcher-current" class="btn btn-small dropdown-toggle" data-toggle="dropdown">
 <i class="icon-switcher-network"></i> Network
 </button>
 CSS:
 i.icon-switcher-network  {
   background-image: url('../img/view-network.png');
 } 
```

通过检查元素并点击链接，我可以看到路径是正确的，但我也可以看到图像的尺寸为 0px x 0px，因此它实际上并没有被加载。

我已经尝试了很多东西，包括`background-size: auto`在图像上和在 contains`overflow: hidden`上的设置`button`，但似乎没有任何区别。

任何人都可以提出任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:04:13.220

`<i></i>`您的标签中没有任何内容。

`<i></i>`标签是内联的，因此它们的尺寸取决于它们的内容。如果您使用块级元素（例如 div）并为其提供一些尺寸，那么您将看到您的背景图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:04:49.310

你的标签里面没有任何东西，而且标签是一个**内联元素**，所以试试这个

```
i.icon-switcher-network  {
  background-image: url('../img/view-network.png');
  width: 16px;
  height: 16px;
  display: inline-block; /* <------ Add this here */
} 
```

# ios - 尝试使用点运算符显示来自另一个类的 AppDelegate 中的 NSMutable 数组对象的信息

> ID：16031706
> 
> 赞同：1
> 
> 时间：2013-04-16T08:01:22.643
> 
> 标签：ios, objective-c, nsmutablearray, appdelegate

我试图弄清楚如何访问和显示来自在我的 AppDelegate 中创建的 NSMutable 数组中的对象的信息。

从我的 AppDelegate.h

```
@property (readonly, retain) NSMutableArray *myRaces;
@end
AppDelegate * appDelegate; 
```

从我的 AppDelegate.m

```
extern AppDelegate * appDelegate;
@synthesize myRaces;
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
appDelegate = self;
TheRace * orc;
orc = [[TheRace alloc] init];
orc.raceTitle = @"Orc"; [orc modifyStatsFromRace:(NSString*)orc.raceTitle];
NSLog(@" test %d ", orc.massMod);
orc.raceData = @"Orcs are big burly stupid beasts";
myRaces = [[NSMutableArray alloc] init];
[myRaces addObject:orc];
} 
```

我想从另一个类中调用 orc.massMod 的值，但无法弄清楚如何。我试过。

```
appDelegate.raceSelected = @"Orc";
NSLog(@"Orc");
appDelegate.theMass = appDelegate.myRaces.orc.massMod; 
```

但是，“appDelegate.theMass = appDelegate.myRaces.orc.massMod;” 失败，错误提示...在对象类型“NSMutableArray *”上找不到属性“orc”

我如何称呼该信息？我想显示 massMod 的值，它在 appDelegate 内的 NSLog 中工作。“appDelegate.theMass”是在我的 UILabel 中显示的价值所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:12:57.063

由于您存储`orc`在数组中，因此无法通过变量名称访问它。您应该能够通过调用来检索它`objectAtIndex`，例如

```
appDelegate.theMass = ((TheRace*)[appDelegate.myRaces objectAtIndex:0]).massMod; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:04:01.117

当您在 Appdelegate 的另一个类中并调用“appDelegate.myRaces”时，您会得到一个 NSMutableArray。因此，您不能通过附加“.orc”来访问 orc 对象，因为 orc 不是 NSMutableArray 的属性。

你可以改写

```
// The cast is not necessary, but is useful for readability
TheRace * myOrc = (TheRace*)[appDelegate.myRaces objectAtIndex:0];  
appDelegate.theMass = myOrc.massMod; 
```

但是您很容易忘记哪个项目与哪个索引一起使用。您也可以使用 NSMutableDictionary ：

-在你的 AppDelegate.h

```
@property (readonly, retain) NSMutableDictionary *myRaces; 
```

- 在您的 AppDelegate.m 中：

```
myRaces = [[NSMutableDictionary alloc] init];
[myRaces setObject:orc forKey:@"Orc"]; 
```

-在你的其他课程中：

```
TheRace * myOrc = (TheRace*)[appDelegate.myRaces objectForKey@"Orc"];  
appDelegate.theMass = myOrc.massMod; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:07:30.647

定义这样的宏的最佳方法：

```
#define MyAppDelegateObject ((AppDelegate *)[[UIApplication sharedApplication] delegate]) 
```

并像这样在 appdelegate 中引用您的属性：

```
NSLog(@"Races: %@",MyAppDelegateObject.myRaces); 
```

# macos - OSX 上的内存更改

> ID：16031707
> 
> 赞同：1
> 
> 时间：2013-04-16T08:01:23.483
> 
> 标签：macos, memory, mach

我做了一个例子，使用 task_for_pid() 和 mach_vm_write() 写入进程内存。

```
task_for_pid(mach_task_self(), pid, &target_task);
mach_vm_write(target_task, address, '?', local_size); 
```

如果某些进程将数据写入我的应用程序任务中的指定地址，我如何监控内存的变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T21:04:50.297

你不能。使用 mach_vm_write（如在 Windows 中使用 WriteProcessMemory 或在 Linux 中使用 ptrace(2)）不会为写入的进程提供通知。您唯一的选择是：

A）在写入任务和受害任务之间使用 IPC 对象 B）在受害任务中生成一个线程来监视该内存区域的变化。这具有连续轮询的明显缺点。虽然更高级的解决方案是在您正在写入的任务中创建一个远程线程（您可以这样做，因为您现在已经获得了任务端口），并让它做一些事情。

# php - 如何在php中回显javascript代码

> ID：16031719
> 
> 赞同：0
> 
> 时间：2013-04-16T08:02:04.533
> 
> 标签：php, javascript, echo

我在如何在 php 中回显 javascript 时遇到问题。我有一个表单，它在提交时会自行执行并回显一些文本，并将在 5 秒内重定向到一个页面。我目前正在附和这个：

```
header("Refresh: 5;url=index2.php?ID=".$objResult["ID"]."");

echo '<html>';
echo '<head>';
echo '<title>Klant toevoegen</title>';
echo '<link rel="stylesheet" href="style.css" type="text/css" media="screen" />';
echo '</head>';
echo '<body>';
echo '<fieldset>';
echo ''.$Naam.' is added to the database, u will be redirected in a couple of seconds.<br><br>';
echo '</fieldset>';
echo '</body>';
echo '</html>'; 
```

我拥有的 javascript 是从 5 倒数到 1 的倒计时。代码是这样的：

```
<script>

var countdownFrom = 5;  // number of seconds
var countdownwin;

var stp;
function CountDownStart() {
 stp = setInterval("CountDownTimer('CountDownTime')",1000)
}

function CountDownTimer(id)
{
if (countdownFrom==0) {clearInterval(stp); window.close(); }
else     {
            var x
            var cntText = "Closing in "+countdownFrom+" seconds";

        if (document.getElementById)
    {
        x = document.getElementById(id);
        x.innerHTML = cntText;        }
    else if (document.all)
    {
        x = document.all[id];
        x.innerHTML = cntText;        }
    }
countdownFrom--
}

</script>
   <title>Untitled</title>
</head>

<body onload="CountDownStart()">

<Div id="CountDownTime"></div>

</body> 
```

现在我想回显这个倒计时脚本来替换`<fieldset>`html 中的。我已经尝试了几件事，比如将整个代码添加到 1 中`echo '';`，并且我尝试单独回显所有行，但两者都会使我的整个脚本崩溃。如果有人知道如何做到这一点，那就太好了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:08:25.700

我不会写所有这些回声，而是将所有 HTML 和 JS 留在 PHP 块之外

```
<?php
some php code
?>

HTML AND JS

<?php
More php if required
?> 
```

并使用

```
<?=$Naam?> 
```

在需要的地方注入你的价值观

或者，您应该查看模板引擎

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T08:09:45.993

尝试使用

```
echo <<<EOT
   /*  some text here */
EOT; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:08:14.877

您可以将脚本放在单独的 .js 文件和`echo`script 标签中：

```
<? echo "<script type='text/javascript' src='path/to/script.js' ></script> ?> 
```

不要忘记从 JS 文件中删除任何 HTML 标签，例如`<body>`,`<head>`等。

# php - 即和 jquery $.get 不工作

> ID：16031721
> 
> 赞同：0
> 
> 时间：2013-04-16T08:02:09.443
> 
> 标签：php, javascript, jquery, ajax

我正在尝试通过`$.get`调用更新 div 的内容，但它失败了`ie(9).`

这`js`是这个

```
function UpdateElementOfParent(box_id, page_ref, template_ref)
{
 $.get("get_content.php", { box_id: box_id, page_ref: page_ref, template_ref:template_ref } )
  .done(function(data) {                  
         $('#'+box_id).html(data);              
      });  
} 
```

这`get_content.php`是

```
 <?php   
include("connect.php"); 
$page_ref = $_GET['page_ref'];  
$template_ref = $_GET['template_ref'];
$box_id = $_GET['box_id'];  
$sql = mysql_query("SELECT * FROM site_content WHERE page_ref='$page_ref' AND template_ref='$template_ref' AND box_id='$box_id' AND box_type='text'");
while($row=mysql_fetch_array($sql))  
    {  
      echo stripslashes($row['content']);  
    }  
   ?> 
```

它工作正常`firefox/chrome/safari and opera.`

php更新了数据库但`div ("#"+box_id)`没有更新`ie`（只有`ie9`手头所以不知道它是否只有9或其他版本）

任何线索？

快速更新

似乎 ie 正在缓存中保存来自先前 $.get 调用的一些数据。基本上我在屏幕上有一个 div，当用户单击一个按钮时，会打开一个带有可使用 nicedit 编辑的 textarea 的图层。textarea 填充了 $.get，然后用户单击保存，图层被隐藏，并且父页面上的原始 div 使用相同的 $.get 调用进行更新。

在ie中，如果我更改内容，db会更新但div不会更新，当我打开图层时，它仍然显示旧数据。

第一个 $.get 电话是这样的

```
$.get("get_content.php", { box_id: box_id, page_ref: page_ref, template_ref:template_ref } )
  .done(function(data) {         
      document.getElementById("edit_content").value=data; 
      area1 = new nicEditor({fullPanel : true}).panelInstance("edit_content",{hasPanel : true});              
      }); 
```

警报数据不会在 IE 中显示更新的文本，因此它肯定与 $.get 调用有关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:18:38.380

好的问题解决了，我知道这是非常明显的事情。

在原始 $.get 函数调用中，我必须设置 document.ready 状态

```
function get_edit_content(box_id,page_ref,template_ref)
  {
    $(document).ready(function() { <<<<<HERE   
        if(area1) {     
           area1.removeInstance('edit_content');
           area1 = null;
           document.getElementById("edit_content").value="";         
         }
        $.get("get_content.php", { box_id: box_id, page_ref: page_ref, template_ref:template_ref } )
        .done(function(data) {       
           document.getElementById("edit_content").value=data;         
           document.getElementById("page_ref").value=page_ref;
           document.getElementById("template_ref").value=template_ref;          
           document.getElementById("box_id").value = box_id;                     
           area1 = new nicEditor({fullPanel : true}).panelInstance("edit_content",{hasPanel : true});             
         });  
    }); 
```

}

感谢所有的投入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:23:45.147

这不是答案，因为问题不完整，但我需要发布代码评论以协助 OP。

正如您提到的 PHP 工作得很好，问题可能是 IE 不喜欢 jQuery 中的动态选择器。请尝试以下几个选项：

1)`$('#'+box_id).html(data);`改为：

```
var id = '#'+box_id;
$(id).html(data); 
```

2) 尝试记录或警告元素，看看 IE 是否真的得到了正确的元素：

```
var elem = $('#'+box_id);
alert(elem);
elem.html(data); 
```

`[HTMLDivElement]`如果元素存在，这将显示为或类似的东西。

3) 如果一切都失败了，看看这个 vanilla JS 是否在 IE 中工作，以验证它不是 jQuery 选择器问题。

```
var elem = document.getElementById(box_id);
alert(elem);
elem.innerHTML = data; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:26:49.550

我解决了这个问题。与选择器无关，而与参数变量的范围有关`box_id`。

将您的功能更改为：

```
function UpdateElementOfParent(box_id, page_ref, template_ref) {

    myBox = box_id;
    $.get("get_content.php", { box_id: box_id, page_ref: page_ref, template_ref:template_ref })
        .done(function(data) {                  
             $('#'+myBox).html(data);              
        });  
} 
```

**解释：**

AJAX 回调函数无权访问本地变量`UpdateElementOfParent`

# java - JEdi torPane、httpClient 和子图像

> ID：16031724
> 
> 赞同：0
> 
> 时间：2013-04-16T08:02:21.823
> 
> 标签：java, swing, apache-httpclient-4.x, jeditorpane

目前我`JEditorPane`用来显示一个带有图像和链接的简单 HTML 页面。

现在我想使用 Apache 的 httpClient 4.x 来获取 HTML 页面而不是 sun`UrlConnection`

有可能`JEditorPane`吗？

是否有另一个 Swing 组件能够显示简单的 HTML 并且我们可以在其中插入 httpClient？

我刚刚尝试覆盖（例如：[HttpClient - Cookies - 和 JEditorPane](https://stackoverflow.com/questions/5792855/httpclient-cookies-and-jeditorpane)）的`getSream`方法`JEditorPane`

它适用于 HTML 文档，但 httpclient 不用于下载子图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:26:09.970

您可以加载图像并将它们放在本地缓存中。

[http://java-sl.com/tip_local_images.html](http://java-sl.com/tip_local_images.html)

不确定它是否有帮助

# c++ - 这个声明是什么 //! [数字] 是什么意思？

> ID：16031744
> 
> 赞同：3
> 
> 时间：2013-04-16T08:03:33.950
> 
> 标签：c++

我在许多项目中看到一些程序员在他们的代码中使用`//! [1]`, `//! [2]`, ...,`//! [n]`但我不知道这可能意味着什么。

如果有人指出这些评论的用途，我将不胜感激。这是一个狙击代码：

```
BlockingClient::BlockingClient(QWidget *parent)
    : QWidget(parent)
{
    hostLabel = new QLabel(tr("&Server name:"));
    portLabel = new QLabel(tr("S&erver port:"));

    QString ipAddress;
    QList<QHostAddress> ipAddressesList = QNetworkInterface::allAddresses();
    // use the first non-localhost IPv4 address
    for (int i = 0; i < ipAddressesList.size(); ++i) {
    }
    // if we did not find one, use IPv4 localhost
    if (ipAddress.isEmpty())
        ipAddress = QHostAddress(QHostAddress::LocalHost).toString();

    //...
    connect(hostLineEdit, SIGNAL(textChanged(QString)),
            this, SLOT(enableGetFortuneButton()));
    connect(portLineEdit, SIGNAL(textChanged(QString)),
            this, SLOT(enableGetFortuneButton()));
//! [0]
    connect(&thread, SIGNAL(newFortune(QString)),
            this, SLOT(showFortune(QString)));
//! [0] //! [1]
    connect(&thread, SIGNAL(error(int,QString)),
            this, SLOT(displayError(int,QString)));
//! [1]

    QGridLayout *mainLayout = new QGridLayout;
    mainLayout->addWidget(hostLabel, 0, 0);
    setLayout(mainLayout);

    setWindowTitle(tr("Blocking Fortune Client"));
    portLineEdit->setFocus();
}

//! [2]
void BlockingClient::requestNewFortune()
{

    getFortuneButton->setEnabled(false);
    thread.requestNewFortune(hostLineEdit->text(),
                             portLineEdit->text().toInt());
}
//! [2]

//! [3]
void BlockingClient::showFortune(const QString &nextFortune)
{
    if (nextFortune == currentFortune) {
        requestNewFortune();
        return;
    }
//! [3]

//! [4]
    currentFortune = nextFortune;
    statusLabel->setText(currentFortune);
    getFortuneButton->setEnabled(true);
}
//! [4] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T08:12:03.823

我只是猜测，因为您没有显示更完整的代码（或者在这种情况下更完整的评论）。

[Doxygen](http://www.doxygen.nl/)是一个文档生成器，可以解析特定格式的代码声明和注释。如果您阅读[手册的这一部分，](http://www.doxygen.nl/manual/docblocks.html)您会发现它被识别`//!`为包含文档的特殊注释。Doxygen 支持在方括号内有链接的[降价。](http://www.doxygen.nl/manual/markdown.html)

所以这与实际代码无关，只是为了帮助记录它。而且它肯定不是编译器会尝试为其生成代码的语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:14:49.897

这些只是评论。它们在 C 或 C++ 中没有特殊含义。它们可能在某些其他上下文中具有某些特殊含义，或者它们可能只是该项目的评论约定。

# android - 在android的toast中使用数组中的图像

> ID：16031749
> 
> 赞同：0
> 
> 时间：2013-04-16T08:03:56.393
> 
> 标签：android, arrays, image, toast

我正在制作一个 android 应用程序，让用户玩饮酒游戏国王。我在一个随机选择的数组“卡片”中拥有所有@drawable 图像。**如果不**创建布局或将 toast 设置为仅一个图像，我无法弄清楚如何在 toast 中显示图像。

这是我到目前为止所得到的...

数组：

```
final int [] cards = {R.drawable.twoofdiamonds, R.drawable.threeofdiamonds, R.drawable.fourofdiamonds, R.drawable.fiveofdiamonds, R.drawable.sixofdiamonds,
          R.drawable.sevenofdiamonds, R.drawable.eightofdiamonds, R.drawable.nineofdiamonds, R.drawable.tenofdiamonds, R.drawable.jofdiamonds, R.drawable.qofdiamonds,
          R.drawable.kofdiamonds, R.drawable.aceofdiamonds, R.drawable.twoofclubs, R.drawable.threeofclubs, R.drawable.fourofclubs, R.drawable.fiveofclubs,
          R.drawable.sixofclubs, R.drawable.sevenofclubs, R.drawable.eightofclubs, R.drawable.nineofclubs, R.drawable.tenofclubs, R.drawable.jofclubs,
          R.drawable.qofclubs, R.drawable.kofclubs, R.drawable.aceofclubs, R.drawable.twoofhearts, R.drawable.threeofhearts, R.drawable.fourofhearts,
          R.drawable.fiveofhearts, R.drawable.sixofhearts, R.drawable.sevenofhearts, R.drawable.eightofhearts, R.drawable.nineofhearts, R.drawable.tenofhearts, R.drawable.jofhearts,
          R.drawable.qofhearts, R.drawable.kofhearts, R.drawable.aceofhearts, R.drawable.twoofspades, R.drawable.threeofspades, R.drawable.fourofspades,
          R.drawable.fiveofspades, R.drawable.sixofspades, R.drawable.sevenofspades, R.drawable.eightofspades, R.drawable.ninefspades, R.drawable.tenofspades,
          R.drawable.jofspades, R.drawable.qofspades, R.drawable.kofspades, R.drawable.aceofspades}; 
```

我在 Image toast 上所做的尝试：

```
Toast ImageToast = new Toast(getBaseContext());
        LinearLayout toastLayout = new LinearLayout(getBaseContext());
        toastLayout.setOrientation(LinearLayout.HORIZONTAL);
        ImageView image = new ImageView(getBaseContext());
        TextView text = new TextView(getBaseContext());

        image.setImageResource(R.drawable.cards[randomSequence[cardCount]]); //error here

        text.setText("Hello!");
        toastLayout.addView(image);
        toastLayout.addView(text);
        ImageToast.setView(toastLayout);
        ImageToast.setDuration(Toast.LENGTH_LONG);
        ImageToast.show(); 
```

欢迎任何帮助，我是这方面的菜鸟。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:38:14.503

创建扩展 Toast 的自定义 Toast 类。

```
public class CustomToast extends Toast {
    public CustomToast(Context context) {
        super(context);
    }
    public CustomToast(Context context, int resourceId) {
            super(context);
            ImageView img = new ImageView(context);
            img.setImageResource(resourceId);
            setView(img);
    }
} 
```

您可以使用它来调用它

```
new CustomToast(getApplicationContext(), cards[randomSequence[cardCount]]).show(); 
```

# html - 如何设置固定元素的宽度以适应整个页面？

> ID：16031750
> 
> 赞同：0
> 
> 时间：2013-04-16T08:04:02.003
> 
> 标签：html, css, styles, webpage, css-position

这是html文件：![索引.html](https://i.stack.imgur.com/GbbuF.jpg)

这是css文件：![样式表](https://i.stack.imgur.com/VyYH4.jpg)

这会产生以下结果：![结果](https://i.stack.imgur.com/oKQgQ.jpg)

如何设置标题类以使宽度与页脚相同？如果标题的位置不固定，但是一旦将位置设置为固定，宽度就没有设置？我该如何解决这个问题？我需要修复标题，以便向下滚动时它不会移动。

[编辑] 我已将宽度更改为 100%，结果如下： ![结果](https://i.stack.imgur.com/MqoHb.jpg) 当它设置为 100% 时，是否只是我的浏览器在左侧显示了带有一点边距但在右侧没有边距的标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:07:02.580

将以下内容添加到您的标头类中应该可以工作...

```
width: 100%; 
```

通过将标题设置为固定位置，您将其从页面的自然流中取出。因此，它不会自动填充其父 () 的宽度，而是默认为其内容的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:09:56.490

做就是了：

```
.header{
width: 100%;
z-index: 1;
border: none;
etc...
} 
```

# php - 如何以编程方式（使用 JS/PHP）为 github 用户获取 curl“授权令牌（OAuth 令牌）”？

> ID：16031752
> 
> 赞同：1
> 
> 时间：2013-04-16T08:04:07.870
> 
> 标签：php, javascript, github, github-api

我现在正在使用 Github。我怎么能想得到 github 登录用户的“OAuth 令牌”。现在我有诸如 client_id、Client Secret、access_toke 之类的数据（这些所有数据仅在登录到 github 后获取）。我怎么能通过以上数据获取 OAuth 令牌。

我通过命令行获得了oauth toke，例如：

```
[root@localhost Dinesh]# curl -u 'DineshGK' -d '{"scopes":["repo"],"note":"Help example"}' https://api.github.com/authorizationsEnter host password for user 'DineshGK':
[root@localhost Dinesh]# curl https://api.github.com/authorizations --user "DineshGK" --data '{"scopes":["user"], "client_id":"...", "client_secret":"..."}'
Enter host password for user 'DineshGK':
{
  "id": 2300973,
  "url": "https://api.github.com/authorizations/2300973",
  "app": {
    "name": "SenchaPlayground",
    "url": "http://192.168.1.56/OldPlayground/"
  },
  ****"token": "..."**,**
  "note": null,
  "note_url": null,
  "created_at": "2013-04-16T07:34:21Z",
  "updated_at": "2013-04-16T07:34:21Z",
  "scopes": [
    "user"
  ]
} 
```

我希望以实用的方式突出显示标记（使用 JS/PHP）..

任何人都可以帮助......提前谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:03:14.980

请编辑您的问题以删除您的“client_id”，并返回令牌。另外，请转到您的应用设置并获取新的“client_secret”。**这些信息都不应该向任何人公开**。

现在，如果您的意图是使用 JavaScript 或 PHP 中的 cURL，那么您将度过一段非常糟糕的时光。我将研究如何在每个请求中发出 HTTP/1.1 请求，并查看一些现有的 PHP 或 JavaScript[库，它们为您包装了 API。](http://developer.github.com/v3/libraries/)有了这些（从未使用过其中任何一个），您可能应该收到类似于 Hash 或其他一些数据结构的东西，以便能够检索该信息。如果您阅读他们的文档，您将比那些从未使用过任何这些库的人告诉您该做什么要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:11:56.427

您不能完全自动化此过程，用户必须参与手动授予对您的应用程序的访问权限。也就是说，[Temboo](http://temboo.com)将 GitHub 的 OAuth 流程分为两个步骤：

1.  生成可以向用户显示的授权 URL。这允许用户授权您使用他们的 GitHub 帐户。第一步还会生成流程第二步所需的回调 URL。

2.  用户授予对您的应用程序的访问权限后，检索访问令牌。

有关 Temboo 如何简化 GitHub OAuth（使用 PHP）的完整详细信息，请参见[此处](https://www.temboo.com/library/Library/GitHub/OAuth/)。

（全面披露：我在 Temboo 工作）

# python - 在包含 32 位 python 解释器的 64 位 linux 上编译 mod_wsgi

> ID：16031754
> 
> 赞同：1
> 
> 时间：2013-04-16T08:04:13.777
> 
> 标签：python, 32bit-64bit, mod-wsgi

当我尝试在包含 32 位 python 解释器的 linux 系统（64 位）上编译 mod_wsgi 时遇到问题。

当我运行时：

```
./configure --with-apxs=/x/home16/eveljee/httpd-2.4.4/bin/apxs --with-python=/x/home16/eveljee/python32/bin/python2.6 
```

我明白了

```
checking Apache version... 2.4.4
/x/home16/eveljee/python32/bin/python2.6: error while loading shared libraries: libpython2.6.so.1.0: wrong ELF class: ELFCLASS64
/x/home16/eveljee/python32/bin/python2.6: error while loading shared libraries: libpython2.6.so.1.0: wrong ELF class: ELFCLASS64
/x/home16/eveljee/python32/bin/python2.6: error while loading shared libraries: libpython2.6.so.1.0: wrong ELF class: ELFCLASS64
/x/home16/eveljee/python32/bin/python2.6: error while loading shared libraries: libpython2.6.so.1.0: wrong ELF class: ELFCLASS64
/x/home16/eveljee/python32/bin/python2.6: error while loading shared libraries: libpython2.6.so.1.0: wrong ELF class: ELFCLASS64
/x/home16/eveljee/python32/bin/python2.6: error while loading shared libraries: libpython2.6.so.1.0: wrong ELF class: ELFCLASS64
/x/home16/eveljee/python32/bin/python2.6: error while loading shared libraries: libpython2.6.so.1.0: wrong ELF class: ELFCLASS64
/x/home16/eveljee/python32/bin/python2.6: error while loading shared libraries: libpython2.6.so.1.0: wrong ELF class: ELFCLASS64
/x/home16/eveljee/python32/bin/python2.6: error while loading shared libraries: libpython2.6.so.1.0: wrong ELF class: ELFCLASS64
/x/home16/eveljee/python32/bin/python2.6: error while loading shared libraries: libpython2.6.so.1.0: wrong ELF class: ELFCLASS64
configure: creating ./config.status
config.status: creating Makefile 
```

我意识到如果我使用 64 位 python 解释器，问题将得到解决。但是由于某些原因，我无法更改我的 python 解释器。这个问题还有其他解决方案吗？另请注意，我在系统上没有 root 访问权限

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:15:16.330

不支持在 64 位 linux 中加载 32 位库，主要是指针问题。64 位机器可以寻址超过 4GB，这根本不适合 32 位指针。

请注意，这并非*不可能*（Windows 可以），但它很复杂。

为什么不在主目录中安装 64 位 Python？它不会干扰系统默认的 Python。

# monitoring - 为您的应用程序收集指标

> ID：16031756
> 
> 赞同：0
> 
> 时间：2013-04-16T08:04:26.923
> 
> 标签：monitoring, graphite

好奇人们如何将指标发送集成到石墨。似乎大多数人都在使用发送到 statsd 的客户端（许多在 statsd github 上可用），然后再发送到 carbon。我的问题是您认为将这种“横切关注点”直接包含在您的代码中是否可以。我所看到的是我的应用程序代码已经从很好和干净到现在不太好和干净，代码收集与我的业务代码交织在一起的指标。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:00:12.017

我确实认为在应用程序代码中包含用于发送业务指标的代码很好。正如@tomer-peled 在他的评论中所说，与日志记录非常相似。

但是，我理解您不愿意散布这些东西并可能混淆代码。在这种情况下，我的方法是从一开始就接受一定程度的混乱，然后随着更多示例的出现，我尝试识别指向抽象的新兴结构，这些抽象可以使事情稍微清理一下。

# java - 正在返回空值

> ID：16031757
> 
> 赞同：1
> 
> 时间：2013-04-16T08:04:28.397
> 
> 标签：java, seam, seam2

使用组件进行文件上传时`<s:fileUpload>`返回 null 。

应用程序正在使用 seam 2.1.2 与 Richfaces、Jsf 集成

```
<h:panelGrid columns="2" cellspacing="1" cellpadding="0"
   columnClasses="columnFull">
<s:fileUpload id="picture" data="#{image.uploadedFile}"

    contentType="#{image.pictureContentType}" />

</h:panelGrid>

@Name("image")
@Scope(ScopeType.CONVERSATION)
public class DoImportServiceUpload {

      @Lob
      @Column(length = 2147483647)
      private  byte[] uploadedFile;

      private String pictureContentType; 
```

}

web.xml

```
<filter>
  <filter-name>Seam Filter</filter-name>
  <filter-class>org.jboss.seam.servlet.SeamFilter</filter-class>
</filter>
  <filter-mapping>
  <filter-name>Seam Filter</filter-name>
  <url-pattern>/*</url-pattern>
 </filter-mapping> 
```

组件.xml

```
<web:multipart-filter create-temp-files="true"
                      max-request-size="1000000" 
                      url-pattern="*.seam" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T13:03:20.673

1.  在 Seam MultiPartFilter 中放置一个断点。使用远程调试连接到您的应用程序服务器。检查过滤器是否真的被触发，是否找到文件上传。
2.  如果不是，则文件上传可能不存在于 POST 请求中。在 Google Chrome 中检查 fileUpload 是否实际上是使用正确的内容类型发送的。
3.  检查`s:fileUpload`标签是否实际上包含在单个`h:form`. `h:form`应该是类型`<h:form enctype="multipart/form-data">`。检查这是否也在 HTML 输出中正确呈现。

# mysql - Mysql 分组条件

> ID：16031760
> 
> 赞同：2
> 
> 时间：2013-04-16T08:04:32.093
> 
> 标签：mysql, sql

我想申请条件`GROUP BY`。

当条件`city_id != 0`为真时，对列表进行分组。否则正常列表。

我为此使用了这个查询：

```
(
    SELECT city_id, sum(sales) as counts
    FROM product_sales
    WHERE city_id !=0     
    GROUP BY city_id
)
UNION
(
    SELECT city_id, sales 
    FROM product_sales  
    WHERE city_id =0     
    ORDER BY sales_id 
) 
```

任何人都可以帮助我避免`UNION`并在单个查询中获取列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T08:12:24.617

一个想法：`GROUP BY`当`city_id`它不为零时，否则模拟一个随机唯一值用于分组[`UUID()`](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_uuid)。所以每一行都`city_id = 0`不会被分组。

```
select city_id, sum(sales)
from product_sales
group by
  case when city_id = 0
  then UUID()
  else city_id
  end 
```

[SQL小提琴。](http://sqlfiddle.com/#!2/e7b1e/6/0)

> UUID 被设计为在空间和时间上全球唯一的数字。对 UUID() 的两次调用预计会生成两个不同的值，即使这些调用是在未相互连接的两台独立计算机上执行的。

# android - 因为我可以注册一个意图在 NFC 切换到开/关时进行监听？

> ID：16031765
> 
> 赞同：0
> 
> 时间：2013-04-16T08:04:47.077
> 
> 标签：android, widget, toggle, nfc

我正在制作一个允许 NFC 设置并激活它的小部件，现在我只需要知道如何在 NFC onReceive 中注册一个意图是否打开/关闭。

任何帮助将不胜感激。

```
@Override
    public void onReceive(Context context, Intent intent) 
    {
        manager = (NfcManager) context.getSystemService(Context.NFC_SERVICE);
        adapter = manager.getDefaultAdapter();

        //OR        
        if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(intent.getAction())) 
        {   
            actualizar(context);
        }

                //OR
        if (intent.getAction().equals("ADAPTER_STATE_CHANGE")) 
        {   

            actualizar(context);
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:02:01.627

创建并恢复应用后，您可以检测到 NFC 设置的更改。请参阅[此](http://code.google.com/p/ndef-tools-for-android/source/browse/ndeftools-util/src/org/ndeftools/util/activity/NfcDetectorActivity.java)示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:05:38.940

没有这样的广播事件。尝试阅读日志，这会起作用，但非常不可靠且分散。或者，您可以在应用程序的特定点使用[NfcAdapter.isEnabled()调用来检查事物的状态。](http://developer.android.com/reference/android/nfc/NfcAdapter.html#isEnabled())

# jasperserver - 自定义和重新命名 JasperReports Server 5.0

> ID：16031768
> 
> 赞同：0
> 
> 时间：2013-04-16T08:05:06.947
> 
> 标签：jasperserver

*我想自定义JasperReports Server*的外观。

我正在使用*JR 服务器 5.0*。

我想更改 jasperserver 的徽标、标题和颜色。我尝试搜索有关如何实现相同目标的文档。但是找不到 5.0 的任何东西

我找到了一份*JR Server 2.0的文档* [http://www.jaspersoft.com/download/customizing-and-rebranding-jaspersoft-user-interface](http://www.jaspersoft.com/download/customizing-and-rebranding-jaspersoft-user-interface)

我最初认为修改会在类似的路线上，但事实并非如此。对于标题的更改，它是根据文档，但是要更改徽标，提到的文件和编辑不同步。

要在 5.0 中实现相同的功能，需要进行哪些修改？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-20T18:10:44.870

有一个 override.CSS 有助于向 jasper 引入自定义主题。这应该可以解决您的问题

# php - 我怎样才能让我的卷曲在刮之前等待几秒钟？

> ID：16031775
> 
> 赞同：3
> 
> 时间：2013-04-16T08:05:20.160
> 
> 标签：php, curl, web-scraping

所以我试图从网站上抓取一些数据。有必须删除的名称列表。发生的情况是，如果有 15 个名称需要被删除。其中只有 5 个名字被刮掉。

当我检查原始站点时，他们也以类似的方式加载数据。第一次加载网站。仅显示五个名称。重新加载时显示 10 个名称并再次尝试显示所有 15 个数据。

谁能告诉我如何让我的 cURL 在抓取原始数据之前等待几秒钟。这样所有的内容都可以被刮掉？

这是带有 curl 设置选项的部分代码片段：

```
 $post = curl_init();
    curl_setopt($post, CURLOPT_URL, $url);
    curl_setopt($post, CURLOPT_AUTOREFERER, true);
    curl_setopt($post, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($post, CURLOPT_RETURNTRANSFER, 1 );
    curl_setopt($post, CURLOPT_TIMEOUT, 2 );
    $img_contents = curl_exec($post);
    curl_close($post);

    $html= str_get_html($img_contents);
foreach($html->find('div[id=xxxx]') as $stay2)
{

$stay4=$stay2->find('span[class=xxx]');

    foreach($stay4 as $stay6)
    {   
        echo $abc[]= strip_tags($stay6) ."<br/>";
    }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:06:54.530

添加一个 sleep($seconds) 见[PHP sleep 函数](http://php.net/manual/en/function.sleep.php)

# java - 如何从日期报表参数中获取年份-Birt Report

> ID：16031776
> 
> 赞同：0
> 
> 时间：2013-04-16T08:05:20.767
> 
> 标签：java, reporting, birt

我创建了一份 birt 报告。它包含一个名为“FromDate”的报告参数。用户将其插入到 fromat 中，如“dd/MM/yyyy”。我想从这个输入参数中获取年份（如果日期是 11/01/2013。我想从这个变量中提取 2013 年）并希望将此值传递给一个存储过程（即数据集）。我该怎么做。任何人都可以分享示例代码吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:03:03.580

您可以像这样定义一个变量“selectedYear”：

```
var selectedValue = params["FromDate"].value;
var selectedValueArray = selectedValue.split("/");
selectedValueArray[2] 
```

此代码通过“切割” / 上的参数值创建一个数组，然后选择年份（数组中的第二个值，这是我们从零开始计数的第三个块）。

然后，您可以`vars["selectedYear"]`在您的数据集上使用。

或者，如果您的数据集包含年份列表，您可以创建一个数据集

```
select distinct YEAR
from [dataSource] 
```

并让您的参数从该列表中选择。这也将保证所选年份在范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:22:49.267

**您可以将数据集参数映射到“编辑数据集**”对话框的“**参数**”部分中的报告参数派生值：

 ***   从数据集参数列表中选择存储过程年份输入参数，然后单击`Edit...`。
*   单击`fx`默认值旁边的按钮并选择`Javascript Syntax`。
*   输入公式`BirtDateTime.year(params["FromDate"].value)`。

单击确定以确认每个对话框中的这些更改。（链接到报表参数选项需要保留与`None`该数据集参数一样，因为您不想将过程输入参数值设置为与任何报表参数完全相同。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T14:32:42.580

我过去遇到过类似的问题，但是我从不同的角度看待从存储在数据源中的日期作为动态参数驱动日期选择。通常，数据集中的日期采用一种格式，可以通过函数格式化/提取以给出年月日等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T09:54:25.350

我试过这个..在相应的存储过程中我将在输入参数上做一个子字符串（即FromDate）..它正在工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-19T12:02:31.407

在 sql 查询（数据集）中，使用这个

" **split_part(?,'/',3)"** , 我们将有日期参数代替 '?' . 因为，您必须意识到，Split_part 将使用分隔符 '/' 分割字符串。**

# c++ - c++ Makefile 与外部 h 和 o 文件

> ID：16031777
> 
> 赞同：1
> 
> 时间：2013-04-16T08:05:28.710
> 
> 标签：c++, makefile

我有项目文件，我需要使用一个名为的外部测试文件`TestSuite1.cpp`，其中包括一个外部头文件`SignalMasker.h`（给定了它，它是目标文件 SignalMasker.o）和我的主头文件`uthreads.h`。

我仍然得到未定义的参考，例如：

```
TestSuite1.cpp:63: error: undefined reference to 'SignalMasker::~SignalMasker()' 
```

这意味着我的 Makefile 不包括`SignalMasker.o`位于同一目录中的文件。

这是我的 Makefile：

```
CC = g++
FLAGS = -Wall -g 

OBJECTS = uthreads.o Thread.o Scheduler.o SchedulerStarter.o TestSuite1.o

.PHONY :  clean

all: test1

test1: $(OBJECTS)
    g++  $(FLAGS) $(OBJECTS) SignalMasker.o -L . -o test1

TestSuite1.o  : TestSuite1.cpp SignalMasker.h uthreads.h
    $(CC) -c $(FLAGS) TestSuite1.cpp

uthreads.o  : uthreads.cpp uthreads.h SchedulerStarter.h Scheduler.h Thread.h
    $(CC) -c $(FLAGS) uthreads.cpp 

Scheduler.o  : Scheduler.cpp Scheduler.h Thread.h
    $(CC) -c $(FLAGS) Scheduler.cpp 

SchedulerStarter.o  : SchedulerStarter.cpp SchedulerStarter.h Scheduler.h
    $(CC) -c $(FLAGS) SchedulerStarter.cpp 

Thread.o  : Thread.cpp Thread.h uthreads.h translateAdd.h
    $(CC) -c $(FLAGS) Thread.cpp 

clean:
    rm -f $(OBJECTS) *~ 
```

现在我得到：

```
~/Desktop/tests$ make
g++  -Wall -g  uthreads.o Thread.o Scheduler.o SchedulerStarter.o TestSuite1.o SignalMasker.o -L . -o test1 
/usr/bin/ld: error: SignalMasker.o: incompatible target
TestSuite1.cpp:36: error: undefined reference to 'SignalMasker::SignalMasker(int)'
TestSuite1.cpp:63: error: undefined reference to 'SignalMasker::~SignalMasker()'
TestSuite1.cpp:63: error: undefined reference to 'SignalMasker::~SignalMasker()'
TestSuite1.cpp:68: error: undefined reference to 'SignalMasker::SignalMasker(int)'
TestSuite1.cpp:111: error: undefined reference to 'SignalMasker::~SignalMasker()'
TestSuite1.cpp:111: error: undefined reference to 'SignalMasker::~SignalMasker()'
collect2: ld returned 1 exit status 
```

**编辑：** 我现在正在考虑可能*不兼容的目标*意味着他们在 64 位下编译它的想法。我的机器是32位的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:52:20.300

您缺少在 makefile 中编译 SignalMasker.cpp 的规则。你必须写一个规则，就像你为 SchedulerStarter.o、Thread.o 写的一样

SignalMasker.o : SignalMasker.cpp SignalMasker.h $(CC) -c $(FLAGS) SignalMasker.cpp

这将确保生成 SignalMasker.o 时使用与构建其他对象相同的编译标志。它将消除 32 位/64 位变体的不兼容问题。

如果您从其他地方复制此 SignalMasker.o，请检查用于生成对象的编译标志。在您的 makefile 中使用相同的标志。

# wix - WiX Burn：LaunchTarget 失败并出现错误 0x80070002

> ID：16031778
> 
> 赞同：1
> 
> 时间：2013-04-16T08:05:33.973
> 
> 标签：wix, burn

将 LaunchTarget 例如设置为“cmd.exe”可以正常工作，安装刻录包后，会弹出所需的命令行窗口。但是，将 LaunchTarget 设置为例如“[InstallFolder]\Path\To\Postinstallexecutable.exe”会产生错误：

```
Error 0x80070002: Failed to launch target: C:\Program Files (x86)\Path\To\Postinstallexecutable.exe 
```

路径正确，在命令行执行“C:\Program Files (x86)\Path\To\Postinstallexecutable.exe”可以正常工作。这是一个错误还是我错过了什么？WiX 工具集版本为 3.8.309.0。

**更新：**经过多一点测试，问题似乎只有在您尝试将参数传递给 LaunchTarget 中的命令时才会出现。所以例如使用

```
<Variable Name="LaunchTarget" Value="[InstallFolder]\Basiskomponenten\Allgemein\test.cmd" /> 
```

工作，而

```
<Variable Name="LaunchTarget" Value="[InstallFolder]\Basiskomponenten\Allgemein\test.cmd Test123" /> 
```

导致 0x80070002 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:19:41.313

该`LaunchTarget`变量仅指向应该启动的可执行文件，不能提供命令行参数。直到最近的 WiX v3.8 版本，您才可以设置第二个变量`LaunchArguments`来提供参数。因此，尝试升级到昨天的 WiX v3.8 版本（或更高版本）并执行以下操作：

```
<Variable Name="LaunchTarget" Value="[InstallFolder]\Basiskomponenten\Allgemein\test.cmd" />
<Variable Name="LaunchArguments" Value="Test123" /> 
```

# iphone - iphone - 如何理解设备上的崩溃日志

> ID：16031779
> 
> 赞同：0
> 
> 时间：2013-04-16T08:05:39.927
> 
> 标签：iphone, logging, crash, organizer

我有这个似乎连接到 mkmapview 和我的设备自动锁定的崩溃日志（1 分钟）：

吨

```
hread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x3b6bd350 __pthread_kill + 8
1   libsystem_c.dylib               0x3b63411e pthread_kill + 54
2   libsystem_c.dylib               0x3b67096e abort + 90
3   libc++abi.dylib                 0x3ac0ed4a abort_message + 70
4   libc++abi.dylib                 0x3ac0bff4 _ZL17default_terminatev + 20
5   libobjc.A.dylib                 0x3b1bfa74 _ZL15_objc_terminatev + 144
6   libc++abi.dylib                 0x3ac0c078 _ZL19safe_handler_callerPFvvE + 76
7   libc++abi.dylib                 0x3ac0c110 std::terminate() + 16
8   libc++abi.dylib                 0x3ac0d594 __cxa_rethrow + 84
9   libobjc.A.dylib                 0x3b1bf9cc objc_exception_rethrow + 8
10  CoreFoundation                  0x33460f1c CFRunLoopRunSpecific + 452
11  CoreFoundation                  0x33460d44 CFRunLoopRunInMode + 100
12  GraphicsServices                0x370242e6 GSEventRunModal + 70
13  UIKit                           0x353762fc UIApplicationMain + 1116
14  FT105RF                         0x0007cbb8 main (main.m:16)
15  libdyld.dylib                   0x3b5f6b1c start + 0 
```

有人可以帮助我了解哪些日志行对我有帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:21:31.550

您可能会在这里找到一些有用的答案：

[XCode 4 - iPhone 开发 - 良好的调试教程](https://stackoverflow.com/questions/11540696/xcode-4-iphone-dev-good-debug-tutorial)

阅读您显示的行并不是最简单和最方便的调试方法，因此这些教程可能会帮助您以另一种方式进行。

希望我有帮助

# javascript - JQuery Resize图像插件错误

> ID：16031780
> 
> 赞同：1
> 
> 时间：2013-04-16T08:05:49.067
> 
> 标签：javascript, jquery

我试图实现一个基于容器调整图像大小的简单插件。问题是，我不明白为什么当我将它放在容器中时它没有调整我的图像大小

这是我试图复制的简单插件演示页面

[https://dl.dropboxusercontent.com/u/6983010/wserv/imgLiquid/examples/imgLiquid.html](https://dl.dropboxusercontent.com/u/6983010/wserv/imgLiquid/examples/imgLiquid.html)

这是我的代码

```
<html>
<head>
<link rel="stylesheet" href="css/float.css">
<script type = "text/javascript" src ="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type = "text/javascript" src ="https://raw.github.com/karacas/imgLiquid/master/src/js/imgLiquid-min.js"></script>

<script type="text/javascript">
$(document).ready(function () {
    $(".imgLiquidFill").imgLiquid({fill:true, fadeInTime:500});
    $(".imgLiquidNoFill").imgLiquid({fill:false});
});
</script>

</head>
<body>

<div class="container" >
<img src="Creek.jpg"/></div>
</div>
</body>
</html> 
```

我的 CSS

```
.container {height: 440px;  width: 950px; background:#FFFFFF} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:50:28.783

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <title>Image</title>

    <style>
        .container{
            background-color:#f7f7f7;
            border:2px solid #ccc;
            margin:10px;
            display:inline-block;
        }
        .imgLiquid {
            display:block;
            overflow: hidden;
            background:transparent url('http://www.lotienes.com/imagenes/loading.gif') no-repeat center center;
        }
        .imgLiquid img{
            visibility:hidden;
        }
    </style>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"
        type="text/javascript"></script>
    <script type="text/javascript"
        src="https://raw.github.com/karacas/imgLiquid/master/src/js/imgLiquid-min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $(".imgLiquidFill").imgLiquid({
                fill: true,
                fadeInTime:200,
                horizontalAlign: "center",
                verticalAlign: "top"
            });
        });
    </script>
</head>

<body>  
    <div class="container">
        <span class="imgLiquidFill imgLiquid" style="width:250px; height:250px;">
            <a href="/media/Woody.jpg"  target="_blank" title="test">
                <img alt="" src="/media/Woody.jpg"/>
            </a>
        </span>
    </div>
</body>
</html> 
```

您更改代码并且忘记在类中定义`imgLiquidFill`and `imgLiquid`，这对于使该插件有效非常重要。在修改代码时，请确保您没有忘记任何内容。另一件事是您可以重命名该类，但请确保您也在脚本中重命名它以使其相同。

# ruby-on-rails - Rails 销毁后新建

> ID：16031782
> 
> 赞同：1
> 
> 时间：2013-04-16T08:05:54.107
> 
> 标签：ruby-on-rails, ruby, redirect, activerecord, callback

在我的医院应用程序中...在我的显示模板中销毁医生的绩效记录后，它会删除记录 (docperfdata/83) 并重定向到索引页面 (/docperfdata)。但我希望它在销毁记录后再次返回表单 (/docperfdata/new?hospital_id=15&id=3061)，以便用户可以再次输入他的数据。

类似于“全部清除并重新启动”

我将如何实现上述功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:14:45.677

您可以在控制器中重定向

```
def destroy
  #destroy code here
  redirect_to new_docperfdata_path(:hospital_id=> 15, :id=>3061)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:14:00.190

如果您想重定向到其他地方，为什么不这样做呢？

```
@docperfdata.destroy

redirect_to(new_docperfdata_path(:hospital_id => @docperfdata.hospital_id, :id => @docperfdata.id)) 
```

# ocaml - 模块：如何在 with 上使用联合类型？

> ID：16031786
> 
> 赞同：4
> 
> 时间：2013-04-16T08:06:22.743
> 
> 标签：ocaml

我的代码有一个奇怪的问题，我真的不知道如何解决：我的代码如下：

```
module type tGraphe = sig
    type node
    type arc
    end;;

module One : tGraphe with type node=int and type arc=int = struct
    type noeud=int
    type arc=int
end;;

module Two : tGraphe with type node=int and type arc=Empty|Node of(int*int) = struct
    type node=int
    type arc=Empty|Node of(int*int)
end;; 
```

模块一没有遇到任何问题，但是对于模块二，则表明存在 arc 类型的语法错误。如果有人可以解释我如何使用没有“with”的模块类型，我将不胜感激。已经试过了

```
module Two : tGraphe= struct
        type node=int
        type arc=Empty|Node of(int*int)
end;;
open Two;;
let z=Empty;; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T11:55:41.190

当你定义

```
type foo = int
type bar = Leaf | Node of int * int 
```

之间有一个根本的区别`foo`，它是已经存在的类型的类型*同义词*`int`( )，`bar`它引入了一个*新*类型，引入了新的构造函数，`Leaf`并且`Node`与之前的所有类型都不同。

当你写

```
module M = struct
  type foo = int
  type bar = Leaf | Node of int * int
end 
```

类型`M.foo`等于`int`，但类型`M.bar`只等于它自己：它是新的并且没有可比较的存在（即使是具有完全相同构造函数的类型也会被认为是不同的和不兼容的）。

在签名中发布以下事实是有意义的`M.foo = int`，但不是说`M.bar = Leaf | ...`:`M.bar`仅等于其自身，`M.bar`并且签名改进`M with type bar = M.bar`不会给您任何信息。

您的代码中的问题是您坚持使用对`tGraphe`使用抽象类型的签名的归属。编写 jrouquie 的代码你什么也得不到

```
type global_arc = Vide | Node of (int*int)

module Two : tGraphe with type noeud = int and type arc = global_arc = struct
  type noeud = int
  type arc = global_arc
end;; 
```

而不是简单地

```
module Two = struct
    type noeud = int
    type arc = Vide |Node of(int*int)
end 
```

施工`M : S`不仅仅是检查。它将主动*隐藏*输入信息`M`。那里的结构`S with type ... = ...`可以让你隐藏得比你要少一点`S`。但是，如果您根本不想隐藏任何内容，在您的示例中，请不要使用签名归属！就写吧`module M = struct ... end`。

如果你只是`: S`用来检查你没有错，没有在字段名称和东西上犯任何错误，你可以把它作为一个纯粹的检查：

```
module Two = struct ... end

let () = ignore (module Two : S) (* only a check! *) 
```

SML 在仅检查兼容性的“透明”模块注释和强制兼容性*和*隐藏类型信息的“不透明”模块注释（通常称为*密封*）之间有区别。OCaml 只有不透明的密封，所以你必须小心不要过度使用它。

 *PS：当在 StackOverflow 上提问时，如果你的代码是用英文写的会比用法语写的更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:41:04.993

我不确定你想要什么。以下代码有效，但我不知道它是否满足您的需求。

```
module type tGraphe = sig
  type noeud
  type arc
end;;

type global_arc = Vide | Node of (int*int)

module Two : tGraphe with type noeud = int and type arc = global_arc = struct
  type noeud = int
  type arc = global_arc
end;;

let z: Two.arc = Vide;; 
```*

# html - 使用 css 创建标签形状

> ID：16031789
> 
> 赞同：2
> 
> 时间：2013-04-16T08:06:29.817
> 
> 标签：html, css

我正在尝试仅使用 css 创建一个标签形状，使其看起来像：

![在此处输入图像描述](https://i.stack.imgur.com/XhK1v.png)

我正在尝试跟踪但无法使用三角形区域的边框。

HTML：

```
<a href="#">Test</a> 
```

**CSS：**

```
a{
    float: left;
    height: 35px;
    position:relative;  
    border: 1px solid red;
    border-right: none; 
    width: 100px;
} 

a:before{
    content: "";
    position: absolute;
    top: -1px;
    right: -18px;
    width: 0;
    height: 0;
    border-color: white white white red;
    border-style: solid;
    border-width: 19px 0 18px 18px; 
} 
```

**JSFiddle：http:** [//jsfiddle.net/Sac3m/](http://jsfiddle.net/Sac3m/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T08:15:37.663

你可以旋转一个正方形，虽然我怀疑结果会不会是很好的跨浏览器

修改后的代码：

```
a {
  float: left;
  height: 35px;
  position: relative;
  border: 1px solid red;
  border-right: none;
  width: 100px;
}

a:after {
  content: "";
  position: absolute;
  top: 4px;
  right: -13px;
  width: 25px;
  height: 25px;
  border: 1px solid red;
  border-left: none;
  border-bottom: none;
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
  transform: rotate(45deg);
}
```

```
<a></a>
```

（最新的 IE、Firefox 和 Chrome 似乎还可以）

* * *

## 更新

如果您需要 IE8 支持，您可以尝试在（原始）红色三角形顶部放置一个白色三角形：

```
a {
  float: left;
  height: 36px;
  position: relative;
  border: 1px solid red;
  border-right: none;
  width: 100px;
}

a:before {
  content: "";
  position: absolute;
  top: -1px;
  right: -18px;
  width: 0;
  height: 0;
  border-color: white white white red;
  border-style: solid;
  border-width: 19px 0 19px 19px;
}

a:after {
  content: "";
  position: absolute;
  top: 0;
  right: -17px;
  width: 0;
  height: 0;
  border-color: transparent transparent transparent white;
  border-style: solid;
  border-width: 18px 0 18px 18px;
}
```

```
<a></a>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-27T12:38:23.280

下面的代码有助于创建标签形状。它适用于所有主流浏览器。

```
#swc {
  position: relative;
  margin: 0 5px 0 10px;
  display: inline-block;
  height: 66px;
  padding: 0 35px 0 20px;
  font-size: 25px;
  line-height: 65px;
  cursor: pointer;
  font-weight: 100;
  margin: 20px 25px;
  background: #f3f3f3;
  transition: background 0.3s;
}

#swc:after {
  position: absolute;
  content: "";
  right: -19px;
  width: 1px;
  height: 0px;
  border-left: 18px solid #f3f3f3;
  border-top: 33px solid transparent;
  border-bottom: 33px solid transparent;
  transition: border 0.3s;
}

#swc:hover {
  background: green;
  color: #ffffff;
}

#swc:hover:after {
  border-left-color: green;
}
```

```
<span class="pricetag-right" id="swc">Tag Content!</span>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-13T21:03:00.587

我们有一个稍微不同的实现，它会产生圆角。这使用了一个旋转 45° 的圆角正方形。

```
.tag {
  display: inline-block;
  border-width: 1px;
  border-style: solid;
  border-color: #c8d7f2 transparent #c8d7f2 #c8d7f2;
  border-radius: .25em 0 0 .25em;
  padding: 0.1em 0.6em 0.1em 0.3em;
  background-color: #e5ecf9;
  line-height: 1.2em;
}

.tag:after {
  content: "\25CF";
  position: absolute;
  display: inline-block;
  height: 1.2em;
  width: 1.17em;
  transform: rotate(45deg);
  color: white;
  text-indent: 0.3em;
  line-height: 1em;
  text-shadow: 0 0 1px #333;
  background-color: #e5ecf9;
  border-radius: 0.33em 0.33em 0.33em 1em;
  border-width: 1px;
  border-style: solid;
  border-color: #c8d7f2 #c8d7f2 transparent transparent;
}
```

```
<h1 class="tag">my-tag</h1>
```

有几点需要注意：

1.  正方形包含一个圆形标点符号。要调整它，您可以使用 line-height 和 text-indent。

2.  正方形的边框需要设置为透明色，宽度为 1px。如果你不这样做，其他边框（可见的）会从 1px 到 0px 逐渐变细。

3.  他的作品非常好，几乎是像素级的，但它在 Chrome 和 Firefox 中的渲染确实略有不同。我试图让它在透明背景下工作，但你需要某种颜色来掩盖正方形与标签相遇的时髦。它不是*很*完美。

这样做的好处是它可以作为一个类应用，并且可以用于 H1-H6 或 p 标签。

# javascript - 单击链接后如何在javascript中使该元素消失？

> ID：16031793
> 
> 赞同：0
> 
> 时间：2013-04-16T08:06:50.220
> 
> 标签：javascript, html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:10:48.867

您应该将 jQuery 包装在 .ready 函数中，如下所示：

```
$(document).ready(function() {
    $(".show-comments").click(function(){
        $(".comments-container").slideDown("slow");
    });
}); 
```

这应该有效。

要回答您的其余问题：

您可以将相同的元素用作两个操作的链接。

```
$(document).ready(function() {
    $(".show-comments").on('click', function(){
        $(this).removeClass().html('Hide Comments').addClass('hide-comments');
        $(".comments-container").slideDown("slow");
    });
    $(".hide-comments").on('click', function(){
        $(this).removeClass().html('Show Comments').addClass('show-comments');
        $(".comments-container").slideUp("slow");
    });
}); 
```

注意：我使用[.on()](http://api.jquery.com/on/)方法将事件处理程序附加到 jQuery 对象中的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-18T12:16:50.970

我知道这是一篇旧帖子，但我只是发现了一些非常简单的事情。

```
<a class='show-comments' onClick="$(this).hide()">Show Comments</a> 
```

希望它能帮助像我这样试图找到它的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:15:08.517

像这样的东西：

```
$(document).ready(function() {
    $(".show-comments").click(function(){
        var oThisLink = jQuery(this);
        oThisLink.toggleClass('someclassname');
        if( oThisLink.hasClass('someclassname') ) {
            oThisLink.text('Hide Comments');
            jQuery(".comments-container").slideDown("slow");
        }
        else {
            oThisLink.text('Show Comments');
            jQuery(".comments-container").slideUp("slow");
        }
    });
}); 
```

# c# - 带有局部视图的 MVC 4 验证

> ID：16031800
> 
> 赞同：5
> 
> 时间：2013-04-16T08:07:04.747
> 
> 标签：c#, jquery, ajax, asp.net-mvc, partial-views

我正在使用 MVC 4 和 Entity Framework 来开发 Web 应用程序。我正在使用加载了 javascript 的部分视图。其中之一是包含验证的创建视图。这就是我的问题：验证。我有一个自定义验证逻辑，例如，如果用户在“名称”等字段中输入一些数字，则会显示错误。

在这里，使用局部视图，它会在显示错误的情况下重定向我的局部视图，但我想做的是留在我的主视图（索引视图）上并保留显示错误的局部视图。

编辑 ：

这是我的部分观点：

```
@model BuSIMaterial.Models.Person

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Person</legend>

        <div class="editor-label">
            First name : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.FirstName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>

        <div class="editor-label">
            Last name : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.LastName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.LastName)
        </div>

        <div class="editor-label">
            National number : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.NumNat, new { maxlength = 11 })
            @Html.ValidationMessageFor(model => model.NumNat)
        </div>

        <div class="editor-label">
            Start date : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.StartDate, new {@class = "datepicker", @placeholder="yyyy/mm/dd"})
            @Html.ValidationMessageFor(model => model.StartDate)
        </div>

        <div class="editor-label">
            End date : 
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.EndDate, new { @class = "datepicker", @placeholder = "yyyy/mm/dd" })
            @Html.ValidationMessageFor(model => model.EndDate)
        </div>

        <div class="editor-label">
            Distance House - Work (km) : 
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.HouseToWorkKilometers)
            @Html.ValidationMessageFor(model => model.HouseToWorkKilometers)
        </div>

        <div class="editor-label">
            Category : 
        </div>
        <div class="editor-field">
            @Html.DropDownList("Id_ProductPackageCategory", "Choose one ...")
            @Html.ValidationMessageFor(model => model.Id_ProductPackageCategory) <a href = "../ProductPackageCategory/Create">Add a new category?</a>
        </div>

        <div class="editor-label">
            Upgrade? : 
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Upgrade)
            @Html.ValidationMessageFor(model => model.Upgrade)
        </div>

        <br />

        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Create</button>
        </div>
    </fieldset>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/jqueryui")
    @Styles.Render("~/Content/themes/base/css")
} 
```

在我看来索引，我有这个：

```
<div class="form-actions"><button type="button" id="create" class="btn btn-primary">Create</button> </div>
<div id ="create_person"></div> 
```

以及我加载部分视图的方式：

```
 $("#create").click(function () {
                var form = $("#create_person").closest("form");
                form.removeData('validator');
                form.removeData('unobtrusiveValidation');
                $.validator.unobtrusive.parse(form);

                $.ajax({
                    url: "/Person/CreateOrUpdate",
                    type: "POST",
                    data: $("#create_person").serialize(),
                    cache: false
                });

//                var url = '/Person/CreatePerson';
//                $("#create_person").load(url);

            }); 
```

行动 ：

```
[HttpGet]
        public ActionResult CreateOrUpdate()
        {
            ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name");
            return View();
        }

        [HttpPost]
        public JsonResult CreateOrUpdate(Person person)
        {
            ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name", person.Id_ProductPackageCategory);

            try
            {
                if (!ModelState.IsValid)
                {
                    string messages = string.Join("; ", ModelState.Values
                                        .SelectMany(x => x.Errors)
                                        .Select(x => x.ErrorMessage));
                    throw new Exception("Please correct the following errors: " + Environment.NewLine + messages);
                }

                db.Persons.AddObject(person);
                db.SaveChanges();

                return Json(new { Result = "OK" });
            }
            catch (Exception ex)
            {
                return Json(new { Result = "ERROR", Message = ex.Message });
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:32:55.583

如果您发布页面，它将不会返回到动态加载的局部视图。尝试对 /Person/CreatePerson 进行 ajax 调用。您的 CreatePerson 看起来类似于

```
[HttpPost]
    public JsonResult CreatePerson(Person person)
    {
        ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name", person.Id_ProductPackageCategory);

    try
    {
        if (!ModelState.IsValid)
        {
            string messages = string.Join("; ", ModelState.Values
                                .SelectMany(x => x.Errors)
                                .Select(x => x.ErrorMessage));
            throw new Exception("Please correct the following errors: " + Environment.NewLine + messages);
        }

        db.Persons.AddObject(person);
        db.SaveChanges();

        return Json(new { Result = "OK" });
    }
    catch (Exception ex)
    {
        return Json(new { Result = "ERROR", Message = ex.Message });
    }
}                                                                                                    ` 
```

> 对 /Person/CreatePerson 的 ajax 调用看起来类似于

`

```
$.ajax({
                url: '/Person/CreatePerson',
                type: "POST",
                data: $("#form").serialize(),
                success: function (responce) {
                    alert(responce.Message);
                },
                error: function (xhr, textStatus) {
                    alert(xhr.status + " " + xhr.statusText);
                }
            }); 
```

此外，不显眼的验证不适用于动态内容。检查动态添加的局部视图上的链接[不显眼验证（不工作）](https://stackoverflow.com/questions/9321040/unobtrusive-validation-on-dynamically-added-partial-view-not-working)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-26T13:04:16.120

我为此开发了一个不错的解决方法。部分页面不会在回发时显示服务器错误。首先，我们得到错误，将它们发送回页面，然后在 javascript 中创建它们并重新验证页面。希望，嘿presto！

在您的控制器中：

```
 if (ModelState.IsValid)
        {
            //... whatever code you need in here
        }            
        var list = ModelStateHelper.AllErrors(ModelState);
        TempData["shepherdErrors"] = list; 
```

我将它放在 TempData 中，以便可以轻松地从部分中检索它。是的，我把它叫做 shepherdErrors，这是我的主意，所以我可以给这个概念起任何我想要的愚蠢的名字！将错误代码引导到它们应该在的位置或一般的想法。

在助手类中：

```
public class ModelStateHelper
{
    public static IEnumerable<KeyValuePair<string, string>> 
         AllErrors(ModelStateDictionary modelState)
    {
        var result = new List<KeyValuePair<string, string>>();
        var erroneousFields = modelState.Where(ms => ms.Value.Errors.Any())
                                        .Select(x => new { x.Key, x.Value.Errors });

        foreach (var erroneousField in erroneousFields)
        {
            var fieldKey = erroneousField.Key;
            var fieldErrors = erroneousField.Errors
                               .Select(error => new KeyValuePair<string, string>(fieldKey, error.ErrorMessage)); //Error(fieldKey, error.ErrorMessage));
            result.AddRange(fieldErrors);
        }

        return result;
    }
} 
```

然后在加载 jquery 后的某个 html 页面上：

```
function displayShepherdErrors() {
    var shepherdErrors = JSON.parse('@(Newtonsoft.Json.JsonConvert.SerializeObject(TempData["shepherdErrors"]))'.replace(/&quot;/g, '"'));
    var frm;
    var isShepherdErrors = (shepherdErrors && shepherdErrors.length > 0);
    if (isShepherdErrors) {
        errObj = {};
        for (var i = 0; i < shepherdErrors.length; i++) {
            var errorKey = shepherdErrors[i].Key;   //also the id of the field
            var errorMsg = shepherdErrors[i].Value;
            var reg = new RegExp('^' + errorKey + '$', 'gi');
            //find the selector - we use filter so we can find it case insensitive
            var control = $('input').filter(function () {
                if ($(this).attr('id'))
                    return $(this).attr('id').match(reg);
            });

            if (control && control.length) {
                control = control[0];
                var controlId = $(control).attr('name');
                errObj[controlId] = errorMsg;

                //get the containing form of the first input element
                if (!frm)
                    frm = control.form;
            }
        }
        var validator = $(frm).validate();
        validator.showErrors(errObj);
    }
    return isShepherdErrors;
}

var isShepherdErrors = displayShepherdErrors(); 
```

如果生成的文本框是基于变量名的，这应该可以在一般 MVC 开发中开箱即用——这是 MVC 的默认行为。

# windows - 根据重复出现的子目录对子目录中的文件进行计数的脚本

> ID：16031803
> 
> 赞同：0
> 
> 时间：2013-04-16T08:07:06.533
> 
> 标签：windows, batch-file

我正在寻找一个批处理脚本，让我只计算某个子目录中的文件数量。

我有一个包含各种项目（300+）的目录树，我只是在重复出现的子目录中寻找文件的数量。

目前我正在使用 mtee（将 cmd 输出恢复为 txt 文件的小程序）和 dir 来计算子目录并在 excel 中进行手动搜索。

我想知道是否有办法用批处理脚本来做到这一点。

例如：每个项目都有目录提案和子目录禁止提案。我想从目录树的基础上计算 no-go 提案中的文件数量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:18:44.840

```
for /f %%i in ('dir /s/b/a-d "c:\project"^|find /c "\no-go-dirname\"') do ECHO nogocount=%%i 
```

嗯，这是批处理文件中的行。如果您从提示符运行它，则每个都`%%`变为`%`

做一个所有文件名的目录列表，`/a-d`而不是目录名，`/s`包括基本形式的子目录`/b`，所以没有标题或尾部。用 FIND 过滤它并`/c`计算包含字符串“ `\no-go-dirname\`”的行并将计数分配给`%%i`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:26:13.970

尝试这个：

```
@echo off &setlocal
set "startfolder=x:\proposals\no-go proposals"

set /a counter=0
for /r "%startfolder%" %%i in (*) do set /a counter+=1
echo %counter% files found in "no-go proposals" . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:24:21.860

阅读`HELP FOR`并`HELP SET`尝试以下代码

```
@echo off
setlocal enabledelayedexpansion
for /r /d %%d in (*) do (
  call :countf "%%d\nogo"
)
goto :eof

:countf
set count=0
for %%f in ("%~1\*") do (
    set /a count+=1
  )
echo %~1 has !count! files
goto :eof 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-31T01:02:13.843

很高兴看到这么多替代品，而且它们都可以无缝工作，但这是我的版本。

```
dir /s/b /a-d | find /c /v "" 
```

在需要文件计数的目录中运行此命令将仅返回计数。

# android - 在安卓中打开浏览器

> ID：16031805
> 
> 赞同：0
> 
> 时间：2013-04-16T08:07:15.217
> 
> 标签：android

我试图在 JavaScriptInterface 的浏览器中打开链接，但它似乎不起作用。下面的代码有什么问题：

```
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;

public class JavaScriptInterface extends Activity{

    Context mContext;
    JavaScriptInterface(Context c) {
        mContext = c;
    }

    public void openLink(){

        Uri uri = Uri.parse("http://www.google.com");
        startActivity(new Intent(Intent.ACTION_VIEW, uri));

    }

} 
```

我已经拥有所需的权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:19:55.027

我不知道你为什么要扩展`Activity`. 尽管您`mContext`在构造函数中进行了初始化，但它永远不会用于`startActivity()`.

您可能想要编写如下代码：

```
public class JavaScriptInterface {
    Context mContext;

    JavaScriptInterface(Context c) {
        mContext = c;
    }

    public void openLink(){
        Uri uri = Uri.parse("http://www.google.com");
        mContext.startActivity(new Intent(Intent.ACTION_VIEW, uri));
    }
} 
```

（不扩展活动，并调用`startActivity()`）`mContext`

顺便说一句，您不需要`android.permission.INTERNET`调用此意图的权限。您`WebView`可能需要它。

# erlang - edoc 没有在 hrl 文件中生成所有文档类型？

> ID：16031807
> 
> 赞同：3
> 
> 时间：2013-04-16T08:07:18.940
> 
> 标签：erlang

我目前有三个文件：

**临时文件.hrl**

```
-export_type([temptype/0]).
-type temptype() :: string().
%% blah blah documentation 
```

**临时文件.erl**

```
-module(tempfile).

... more code, but no references to the temptype() type. 
```

**随机的.erl**

```
-module(random).
%% @headerfile "tempfile.hrl"
-include("tempfile.hrl").

-spec random() -> tempfile:temptype(). 
```

但是，当使用 edoc 时，不会`temptype()`出现任何文档。出现一个超链接`tempfile.html#temptype`，但它没有链接到任何地方。我什至尝试使用`-export_type`但没有用......可能是什么问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T11:38:51.640

temptype() 不是模块临时文件的一部分。

您可以做的是将声明包含到 tempfile 模块中。

```
-export_type([temptype/0]).
-type temptype() :: string(). 
```

那么你不必有一个 tempfile.hrl 。

=>

临时文件.erl

```
-module(tempfile).
-export_type([temptype/0]).
-type temptype() :: string(). 
```

随机的.erl

```
-module(random).

-spec random() -> tempfile:temptype(). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-13T07:25:34.430

如果您确实想将头文件分开，可以使用通用标签从 Erlang 文件中导入标签，如下所示[`@headerfile`：](http://erlang.org/doc/apps/edoc/chapter.html#generic-tags)

**临时文件.erl**

```
-module(tempfile).

%%% @headerfile tempfile.hrl
... more code, but no references to the temptype() type. 
```

# python - 如何使用 .extra 和 .annotate

> ID：16031809
> 
> 赞同：0
> 
> 时间：2013-04-16T08:07:23.517
> 
> 标签：python, database, django, django-models, django-queryset

我正在尝试在查询集中获取一个取决于注释结果的字段。我尝试在带注释的查询集上使用额外的，这似乎不起作用。

假设我的模型如下所示：

```
class Foo(models.Model):
    name = models.CharField(...)

class FooData(models.Model):
    foo = models.ForeignKey(Foo)
    sales = models.PositiveIntegerField()
    items_sold = models.PositiveIntegerField() 
```

我有一个 Foo 对象的查询集

```
some_foos = Foo.objects.filter() 
```

我已经对其进行了注释以获取 FooData 的总和。

```
some_foos.object.annotate(
    total_sales=Sum("foodata__sales"),
    total_items_sold=Sum("foodata__items_sold")
    ) 
```

现在我想获得我尝试使用 .extra 的平均价格。它们似乎不起作用。（我查看了生成的 sql 查询）。

```
#Wont work, fields not defined yet.
some_foos.object.annotate(
    total_sales=Sum("foodata__sales"),
    total_items_sold=Sum("foodata__items_sold")
    ).extra(select={'price_avg': "total_sales/total_items_sold"}) 

#Wont work, this adds an extra clause in group by
price_avg = "SUM(appname_foodata.sales)/SUM(appname_foodata.items_sold)"
some_foos.object.annotate(
    total_sales=Sum("foodata__sales"),
    total_items_sold=Sum("foodata__items_sold")
    ) 
```

# jquery - 如何使用 jquery ui 地图在全国范围内设置边界样式？

> ID：16031810
> 
> 赞同：0
> 
> 时间：2013-04-16T08:07:29.810
> 
> 标签：jquery, jquery-ui-map

如何在国家区域周围设置边界样式（例如：在谷歌地图“法国”中，为国家区域周围着色边界）.. 我正在使用 jquery-ui-maps v3 .. 我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T05:19:56.443

此功能尚不可用。

我找到了这个链接：`http://stackoverflow.com/questions/11207045/google-has-started-highlighting-search-areas-in-pink-color-is-this-feature-avai`

希望它适用于任何其他用户。:)

# c++ - 懒惰、重载的 C++ && 运算符？

> ID：16031812
> 
> 赞同：8
> 
> 时间：2013-04-16T08:07:33.653
> 
> 标签：c++, boolean, operator-keyword, lazy-evaluation

我正在尝试实现自己的布尔类，但无法为 && 复制本机语义。以下人为代码演示了该问题：

```
 #include <iostream>>

    class MyBool {
    public:
        bool theValue;
        MyBool() {}
        MyBool(bool aBool) {theValue = aBool;}
        MyBool operator&& (MyBool aBool) {return theValue && aBool.theValue;}
    };

    bool f1() {std::cout << "   First\n"; return false;}
    bool f2() {std::cout << "   Second\n"; return false;}

    int main(int argc, char** argv) {
        std::cout << "Native &&\n";
        f1() && f2();
        std::cout << "Overloaded &&\n";
        MyBool(f1()) && MyBool(f2());
        return 0;
} 
```

编译运行后，结果为：

```
    本国的 ＆＆
       第一的
    重载 &&
       第二
       第一的

```

换句话说，bools 上的 && 是惰性的（正如任何 C++ 程序员所期望的那样），但重载的 && 不是（正如这位 C++ 程序员至少没有预料到的那样）。

有没有办法让重载的 && 变得懒惰？我可以找到各种完整的惰性评估方案来提供类似 Haskell 的功能，但对于我的用例来说，它们似乎完全是矫枉过正。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-16T08:10:04.050

正如你所发现的，你不应该超载`bool operator&&`，因为你失去了短路评估。

正确的方法是给你的类一个 bool 转换运算符

```
class MyBool {
 public:
  bool theValue;
  MyBool() {}
  MyBool(bool aBool) : theValue(aBool) {}
  explicit operator bool() { return theValue; }
}; 
```

请注意，显式转换运算符需要符合 C++11。如果你没有这个，看看[安全布尔成语](http://www.artima.com/cppsource/safebool.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T08:10:45.357

> 有没有办法让重载的 && 变得懒惰？

不。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T09:29:40.187

[您可以使用表达式模板 idiom](https://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Expression-template)使几乎任何东西都懒惰地计算，包括但不限于内置版本短路的运算符。但这比您在这种情况下所需的工作要多，因为那时您的`MyBool`课程将需要*更多*的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-01T15:21:11.173

如果您真的想要短路并且愿意牺牲运算符语法，您可以将您的`operator&&`方法重命名为`_and`，定义一个`AND()`宏，并编写`AND(x,y)`而不是`x&&y`.

```
#define AND(x,y) (x._and(x.theValue ? y : MyBool(false))) 
```

通过一些[宏技巧](https://stackoverflow.com/a/8814003/543913)，您可以`AND()`接受可变数量的参数。

这里的`_and()`方法不打算在这里“公开”使用，但必须声明为公开的，因为您不能`friend`使用宏。

对于像你的`MyBool`类这样简单的东西，这可能是不必要的。但是如果你需要你`operator&&`有特殊的副作用，比如在 上更新一些状态`this`，那么这就完成了工作。

# php - 如何在将由其他人扩展的主类上正确使用访问器？

> ID：16031813
> 
> 赞同：0
> 
> 时间：2013-04-16T08:07:36.443
> 
> 标签：php, design-patterns, yii, accessor

这可能不是 Yii 问题，更像是设计模式问题和 OOP 问题。

我不想就我们是否应该使用`accessors`.

考虑到我们确实打算在我们的应用程序开发中广泛使用它们，我开始怀疑这对`abstract`那些`accessors`.

我们有一堆`public properties`我希望转换成`private`的，并使用正确的`getters`和`setters`操纵它们。大多数这些操作将发生在我们的控制器上。

`components/Controller.php`创建这个类（所有控制器都`extend`将从它那里），某种通用性是否有意义`accessors`？

如果是这样，我们应该考虑使用`magic methods`? （如果它们可以应用于此类场景？）

提前致谢。

# ruby-on-rails - 为什么我重新格式化计算机后需要运行 bundle install？

> ID：16031814
> 
> 赞同：1
> 
> 时间：2013-04-16T08:07:38.550
> 
> 标签：ruby-on-rails, gem, bundler

我对 ruby​​ on rails 很陌生，这就是为什么我试图对它的工作原理有一个基本的了解。我刚刚创建了我的第一个 rails 应用程序，它位于我的 Dropbox 文件夹中。当我重新格式化我的电脑时，出现了两个问题。

1）我必须再次进行捆绑安装才能启动我的本地服务器。这是为什么？

2）另外，在重新格式化之前，我在 sublime 中执行了 cmd+p 来搜索文件。但是，gems 中的文件没有显示在结果中 - 现在它们显示了。

一切都和我重新格式化之前一样，我只是想理解这两个元素。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T08:31:24.553

Gem are not stored within your project. If you are using RVM to maintain ruby version then gems are stored within that rvm folder. As you have formatted your PC, it has removed gem folder from your system. So, it is requesting for "bundle install".

This command will installing gems listed in applications GEMFILE. If gem are already present in gem folder then it just use it for your project.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:23:55.167

您在项目中需要的 Gem 不会存储在您的项目中，它们通常存储在您的 ruby​​ 安装文件夹中的 gems 文件夹中，该文件夹位于您的本地驱动器上。

例如，如果您启动一个新的 rails 项目，您会在运行 bundle install 时看到它检查的每个 gem 都已经安装，因为它正在查看本地 gems 文件夹。

# java - 在硬编码的服务器路径上上传文件 Servlet

> ID：16031818
> 
> 赞同：1
> 
> 时间：2013-04-16T08:07:50.627
> 
> 标签：java, tomcat, servlets, fileoutputstream

我有一个 .jsp 页面，它显示了一个文件浏览器和一个上传按钮以及一个应该将文件上传到服务器的 Servlet。问题是文件已上传到临时文件夹，但我需要将其上传到服务器上的特定路径，但路径无法识别。

UploadServlet：doPost 方法

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
        // get access to file that is uploaded from client
        Part p1 = request.getPart("file");
        InputStream is = p1.getInputStream();

        String filename = getFilename(p1);

        // get temporary path - this works but it saves on a tmp folder...
        //String outputfile = this.getServletContext().getRealPath(filename);  // get path on the server

        //hardcoded path on which I have to save my file
        String outputfile = "http://localhost:8080/Tutorial2/Upload/" + filename;

        FileOutputStream os = new FileOutputStream (outputfile);

        // write bytes taken from uploaded file to target file
        int ch = is.read();
        while (ch != -1) {
             os.write(ch);
             ch = is.read();
        }
        os.close();
        out.println("<h3>File uploaded successfully!</h3>");
    }
    catch(Exception ex) {
       out.println("Exception -->" + ex.getMessage());
    }
    finally { 
        out.close();
    }
}

private static String getFilename(Part part) {
    for (String cd : part.getHeader("content-disposition").split(";")) {
        if (cd.trim().startsWith("filename")) {
            String filename = cd.substring(cd.indexOf('=') + 1).trim().replace("\"", "");
            return filename.substring(filename.lastIndexOf('/') + 1).substring(filename.lastIndexOf('\\') + 1); // MSIE fix.
        }
    }
    return null;
} 
```

.jsp 页面

```
 <form action="UploadServlet" method="post" enctype="multipart/form-data">
    <table>
        <tr>
            <td>Select File : </td>
            <td><input  name="file" type="file"/> </td>
        </tr>
    </table>
    <p/>
    <input type="submit" value="Upload File"/>
</form> 
```

我看过很多关于这个问题的帖子，但都没有帮助我。当我运行我的 servlet 时，我在`FileOutputStream os = new FileOutputStream (outputfile);`-处得到一个异常`Exception -->http:\localhost:8080\Tutorial2\Upload\SvnBridge.exe (The filename, directory name, or volume label syntax is incorrect)`。搜索了这个，没有找到任何相关的东西。我不知道它是否有帮助，但我使用 Servlet 3.0 和 Apache Tomcat v7。

你知道为什么我不能将我的文件写入上面的路径吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:21:39.297

类似问答 [如何使用 Apache Common fileupload 将上传文件的路径设置为“上下文路径”？](https://stackoverflow.com/questions/2901961/how-to-set-the-path-to-context-path-for-uploaded-files-using-apache-common-fil)

使用 java.io.File

```
String relativeWebPath = "/WEB-INF/uploads";
String absoluteFilePath = getServletContext().getRealPath(relativeWebPath);
File uploadedFile = new File(absoluteFilePath, FilenameUtils.getName(item.getName()));
// ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:25:39.220

通过查看异常，表明问题是由于路径配置不正确。
所以你可以使用

```
File targetFile = new File(targetPath, filename) ;  // target path is hard coded for you. 
```

因为这将更加照顾路径。

# c# - 构建 Android 项目 (Xamarin) 时出现奇怪的错误

> ID：16031824
> 
> 赞同：2
> 
> 时间：2013-04-16T08:08:10.140
> 
> 标签：c#, android, .net, xamarin, multiplatform

我是`Xamarin`多平台开发的新手。我已经下载并安装了所有内容，如`Xamarin guide`. 我事件更新到最新版本。但是当我尝试构建和清空创建的项目时，我得到一个错误。我已经搜索了一天，最终没有结果。有谁知道这个错误是怎么回事？

错误本身：

> 错误1，AndroidComputeResPaths任务不支持ResourceNameCaseMap参数。验证该参数是否存在于任务中，并且它是一个可获取的公共实例属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:11:35.567

我删除了Xamarin android，然后重新安装了mono-android-4.6.04000.msi，现在可以正常工作了！~

# html - 当 html5 滑块的值更改时触发提交

> ID：16031825
> 
> 赞同：0
> 
> 时间：2013-04-16T08:08:12.003
> 
> 标签：html, slider, range

当滑块的值发生变化时如何触发提交？我的代码中捕获的值决定了 svg 矩形的宽度。我希望在不点击“提交”的情况下滑动滑块时改变宽度。我在 python 龙卷风上下文中使用了 '{{float(x)}}'。

到目前为止尝试过这个：

```
<form name="form" oninput="rangeValueDisplay.value=range.value">
Width: <input type="range" name="range" value="100" min="100" max="1000" />
<output name="rangeValueDisplay" for="range">1960</output>
<input type="submit">
</form>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
<rect width="{{float(x)}}" height="100"
style="fill:rgb(0,0,255);stroke-width:1;stroke:rgb(0,0,0)"/>
</svg> 
```

来自另一个用户的类似问题 - [https://stackoverflow.com/questions/13540848/autosubmit-html5-range-slider](https://stackoverflow.com/questions/13540848/autosubmit-html5-range-slider)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:24:55.077

要根据滑块值动态调整矩形大小，可以使用 jQuery：

JS：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
<script>
$(function() {
    $('input[type=range]').change(function() {
        $('rect').attr('width', $(this).val());
    });

});
</script> 
```

# ios - UILabel 文本自定义

> ID：16031829
> 
> 赞同：1
> 
> 时间：2013-04-16T08:08:18.653
> 
> 标签：ios, uilabel, customization

![在此处输入图像描述](https://i.stack.imgur.com/WS7CW.png)

我必须在 iPhone 应用程序中制作这个屏幕。我正在使用`UIScrollView`并`UILabel`执行此操作，但无法自定义标签中的文本，例如“Q”和“A”与其他文本的间距和电子邮件文本的蓝色。有谁能够帮我？我发现了一些自定义库，但不好理解和使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:27:46.150

从 iOS 6 开始，您可以使用`Attributed String`，只需在 Storyboard/UI 编辑器中创建您的 UILabel 并在右侧的 Attributes Inspector 窗口中自定义它们。我会为 A 和 Q 字符放置一个额外的标签以具有固定的间隙。

![在此处输入图像描述](https://i.stack.imgur.com/761kr.png)

如果您使用的是较旧的 iOS 版本，请查看[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)。网站上有几个例子，很容易在你的项目中集成和使用它。

# c# - 使用 DataContractSerializer 序列化大型对象图时出现 C# StackOverFlowException

> ID：16031831
> 
> 赞同：2
> 
> 时间：2013-04-16T08:08:20.283
> 
> 标签：c#, serialization, xml-serialization, datacontractserializer, stack-overflow

当我尝试用 序列化一个巨大的对象图时`DataContractSerializer`，我得到一个`StackOverFlowException`. 将堆栈大小增加到 10 MB 可以解决我当前场景中的问题，但这当然不是真正的解决方案，因为下次对象图可能会更大。

除了尝试扁平化数据结构本身之外，还有其他方法吗？一些参数告诉`DataContractSerializer`做广度优先搜索？;-） 任何帮助是极大的赞赏。顺便说一句，我使用`DataContractSerializer`它是因为它提供了一种保持引用完整性的简单方法。保持这个会很好。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:12:06.653

鉴于 OP 不使用 WCF，一种可能的解决方案是使用[XmlSerializer 类](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)。XmlSerializer 可以提供帮助，因为您拥有更多控制权，并且您可以使用[XmlAttributes](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributeattribute.aspx)来减小序列化 XML 字符串的大小。

我[为 XmlSerializer 开发了一个包装器，它使用](http://www.codeproject.com/Articles/233908/Xml-serialization-using-generics)可能有用的泛型 - 请查看文章了解更多详细信息。我的类可以序列化到/从字符串或从/从文件。

用法：

```
Foo foo = ....;
string xml = XmlSerializer<Foo>.Serialize(foo); 
```

**XmlSerializer.cs**

```
/// <summary>
/// XML serializer helper class. Serializes and deserializes objects from/to XML
/// </summary>
/// <typeparam name="T">The type of the object to serialize/deserialize.
/// Must have a parameterless constructor and implement <see cref="Serializable"/></typeparam>
public class XmlSerializer<T> where T: class, new()
{
    /// <summary>
    /// Deserializes a XML string into an object
    /// Default encoding: <c>UTF8</c>
    /// </summary>
    /// <param name="xml">The XML string to deserialize</param>
    /// <returns>An object of type <c>T</c></returns>
    public static T Deserialize(string xml)
    {
        return Deserialize(xml, Encoding.UTF8, null);
    }

    /// <summary>
    /// Deserializes a XML string into an object
    /// Default encoding: <c>UTF8</c>
    /// </summary>
    /// <param name="xml">The XML string to deserialize</param>
    /// <param name="encoding">The encoding</param>
    /// <returns>An object of type <c>T</c></returns>
    public static T Deserialize(string xml, Encoding encoding)
    {
        return Deserialize(xml, encoding, null);
    }

    /// <summary>
    /// Deserializes a XML string into an object
    /// </summary>
    /// <param name="xml">The XML string to deserialize</param>
    /// <param name="settings">XML serialization settings. <see cref="System.Xml.XmlReaderSettings"/></param>
    /// <returns>An object of type <c>T</c></returns>
    public static T Deserialize(string xml, XmlReaderSettings settings)
    {
        return Deserialize(xml, Encoding.UTF8, settings);
    }

    /// <summary>
    /// Deserializes a XML string into an object
    /// </summary>
    /// <param name="xml">The XML string to deserialize</param>
    /// <param name="encoding">The encoding</param>
    /// <param name="settings">XML serialization settings. <see cref="System.Xml.XmlReaderSettings"/></param>
    /// <returns>An object of type <c>T</c></returns>
    public static T Deserialize(string xml, Encoding encoding, XmlReaderSettings settings)
    {
        if (string.IsNullOrEmpty(xml))
            throw new ArgumentException("XML cannot be null or empty", "xml");

        XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));

        using (MemoryStream memoryStream = new MemoryStream(encoding.GetBytes(xml)))
        {
            using (XmlReader xmlReader = XmlReader.Create(memoryStream, settings))
            {
                return (T) xmlSerializer.Deserialize(xmlReader);
            }
        }
    }

    /// <summary>
    /// Deserializes a XML file.
    /// </summary>
    /// <param name="filename">The filename of the XML file to deserialize</param>
    /// <returns>An object of type <c>T</c></returns>
    public static T DeserializeFromFile(string filename)
    {
        return DeserializeFromFile(filename, new XmlReaderSettings());
    }

    /// <summary>
    /// Deserializes a XML file.
    /// </summary>
    /// <param name="filename">The filename of the XML file to deserialize</param>
    /// <param name="settings">XML serialization settings. <see cref="System.Xml.XmlReaderSettings"/></param>
    /// <returns>An object of type <c>T</c></returns>
    public static T DeserializeFromFile(string filename, XmlReaderSettings settings)
    {
        if (string.IsNullOrEmpty(filename))
            throw new ArgumentException("filename", "XML filename cannot be null or empty");

        if (! File.Exists(filename))
            throw new FileNotFoundException("Cannot find XML file to deserialize", filename);

        // Create the stream writer with the specified encoding
        using (XmlReader reader = XmlReader.Create(filename, settings))
        {
            System.Xml.Serialization.XmlSerializer xmlSerializer = new System.Xml.Serialization.XmlSerializer(typeof(T));
            return (T) xmlSerializer.Deserialize(reader);
        }
    }

    /// <summary>
    /// Serialize an object
    /// </summary>
    /// <param name="source">The object to serialize</param>
    /// <returns>A XML string that represents the object to be serialized</returns>
    public static string Serialize(T source)
    {
        // indented XML by default
        return Serialize(source, null, GetIndentedSettings());
    }

    /// <summary>
    /// Serialize an object
    /// </summary>
    /// <param name="source">The object to serialize</param>
    /// <param name="namespaces">Namespaces to include in serialization</param>
    /// <returns>A XML string that represents the object to be serialized</returns>
    public static string Serialize(T source, XmlSerializerNamespaces namespaces)
    {
        // indented XML by default
        return Serialize(source, namespaces, GetIndentedSettings());
    }

    /// <summary>
    /// Serialize an object
    /// </summary>
    /// <param name="source">The object to serialize</param>
    /// <param name="settings">XML serialization settings. <see cref="System.Xml.XmlWriterSettings"/></param>
    /// <returns>A XML string that represents the object to be serialized</returns>
    public static string Serialize(T source, XmlWriterSettings settings)
    {
        return Serialize(source, null, settings);
    }

    /// <summary>
    /// Serialize an object
    /// </summary>
    /// <param name="source">The object to serialize</param>
    /// <param name="namespaces">Namespaces to include in serialization</param>
    /// <param name="settings">XML serialization settings. <see cref="System.Xml.XmlWriterSettings"/></param>
    /// <returns>A XML string that represents the object to be serialized</returns>
    public static string Serialize(T source, XmlSerializerNamespaces namespaces, XmlWriterSettings settings)
    {
        if (source == null)
            throw new ArgumentNullException("source", "Object to serialize cannot be null");

        string xml = null;
        XmlSerializer serializer = new XmlSerializer(source.GetType());

        using (MemoryStream memoryStream = new MemoryStream())
        {
            using (XmlWriter xmlWriter = XmlWriter.Create(memoryStream, settings))
            {
                System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(typeof(T));
                x.Serialize(xmlWriter, source, namespaces);

                memoryStream.Position = 0; // rewind the stream before reading back.
                using (StreamReader sr = new StreamReader(memoryStream))
                {
                    xml = sr.ReadToEnd();
                } 
            }
        }

        return xml;
    }

    /// <summary>
    /// Serialize an object to a XML file
    /// </summary>
    /// <param name="source">The object to serialize</param>
    /// <param name="filename">The file to generate</param>
    public static void SerializeToFile(T source, string filename)
    {
        // indented XML by default
        SerializeToFile(source, filename, null, GetIndentedSettings());
    }

    /// <summary>
    /// Serialize an object to a XML file
    /// </summary>
    /// <param name="source">The object to serialize</param>
    /// <param name="filename">The file to generate</param>
    /// <param name="namespaces">Namespaces to include in serialization</param>
    public static void SerializeToFile(T source, string filename, XmlSerializerNamespaces namespaces)
    {
        // indented XML by default
        SerializeToFile(source, filename, namespaces, GetIndentedSettings());
    }

    /// <summary>
    /// Serialize an object to a XML file
    /// </summary>
    /// <param name="source">The object to serialize</param>
    /// <param name="filename">The file to generate</param>
    /// <param name="settings">XML serialization settings. <see cref="System.Xml.XmlWriterSettings"/></param>
    public static void SerializeToFile(T source, string filename, XmlWriterSettings settings)
    {
         SerializeToFile(source, filename, null, settings);
    }

    /// <summary>
    /// Serialize an object to a XML file
    /// </summary>
    /// <param name="source">The object to serialize</param>
    /// <param name="filename">The file to generate</param>
    /// <param name="namespaces">Namespaces to include in serialization</param>
    /// <param name="settings">XML serialization settings. <see cref="System.Xml.XmlWriterSettings"/></param>
    public static void SerializeToFile(T source, string filename, XmlSerializerNamespaces namespaces, XmlWriterSettings settings)
    {
        if (source == null)
            throw new ArgumentNullException("source", "Object to serialize cannot be null");

        XmlSerializer serializer = new XmlSerializer(source.GetType());

        using (XmlWriter xmlWriter = XmlWriter.Create(filename, settings))
        {
            System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(typeof(T));
            x.Serialize(xmlWriter, source, namespaces);
        }
    }

    #region Private methods

    private static XmlWriterSettings GetIndentedSettings()
    {
        XmlWriterSettings xmlWriterSettings = new XmlWriterSettings();
        xmlWriterSettings.Indent = true;
        xmlWriterSettings.IndentChars = "\t";

        return xmlWriterSettings;
    }

    #endregion
} 
```

# ruby-on-rails - 如何创建分段上传到 s3 (Rails)

> ID：16031835
> 
> 赞同：0
> 
> 时间：2013-04-16T08:08:30.017
> 
> 标签：ruby-on-rails, amazon-s3

是否有任何 gem/ 插件或任何参考在 Ruby on Rails 中创建分段上传到 s3？

参考：[http ://docs.aws.amazon.com/AmazonS3/latest/dev/UsingRESTAPImpUpload.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingRESTAPImpUpload.html)

我希望创建上传非常大的文件，需要将其分开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:10:53.437

我认为您可以尝试使用此插件将文件直接上传到 amazon s3。我将在我当前的项目中使用它。

[载波直接](https://github.com/dwilkie/carrierwave_direct)

# inheritance - 在 Actionscript 中继承实例变量

> ID：16031838
> 
> 赞同：0
> 
> 时间：2013-04-16T08:08:34.767
> 
> 标签：inheritance, actionscript

我`class A`用字段创建：

```
public var button1:Button;
public var button2:Button; 
```

`class B extends class A`并且只有领域

```
public var button1:Button; 
```

我创建一个这样的对象：

```
var but:A = new B(); 
```

然后我把它放在代码中：

```
but.button1.someproperty = ... 
```

哪个按钮真正被提及？button1 是 A 类中的按钮还是 B 类中的 button1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:14:44.047

不允许覆盖变量。如果已经具有该名称的变量，则不能定义`public var button1:Button;`in 。应该是编译错误。`class B extends class A``class A`

Adobe教程的摘录：

> 使用 var 或 const 关键字声明的属性会被继承，但不能被覆盖。覆盖属性意味着重新定义子类中的属性。唯一可以覆盖的属性类型是方法，即使用 function 关键字声明的属性。尽管您不能覆盖实例变量，但您可以通过为实例变量创建 getter 和 setter 方法并覆盖这些方法来实现类似的功能。

更多信息[请阅读这里](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7fcd.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:17:12.490

该变量`but`属于该类型`A`，但包含该类型的一个实例，该实例是该类型`B`的子类型`A`（并且因此与该变量兼容）。所以最后，它指向一个实例`B`；所以你`button1`会是B。

请注意，它`B`还有一个 button1，因为它是在中定义的`A`（尽管它仍然属于`B`）。

最后，你不能真正做到这一点，因为它不可能覆盖字段，所以你不能`button1`再次定义`B`（因为它已经在 中定义`A`）。显示扩展类型效果的更好示例如下所示：

```
public class A
{
    public function test() : void
    {
        trace('test() in A!');
    }
}
public class B extends A
{
    public function test() : void
    {
        trace('test() in B!');
    }
}

var x:A = new B();
x.test(); 
```

# javascript - 使用 PhantomJS 将 CSS3 动画渲染为一系列图像文件

> ID：16031839
> 
> 赞同：2
> 
> 时间：2013-04-16T08:08:34.950
> 
> 标签：javascript, html, css, server-side, phantomjs

我之前没有使用 PhantomJS，但想用它来渲染一些定制的 CSS3 动画序列到服务器端的 PNG 文件集，然后将它们加入到单个视频文件中。似乎 PhantomJS 可以选择将当前页面状态呈现为图像。接下来，我发现`-webkit-animation-play-state`我希望可以帮助我暂停动画，渲染页面，然后转到下一帧并再次执行所有操作。

也许我应该用纯 JS 来制作这些动画，以便更好地控制所有暂停/播放状态？我想我可以，例如，将一个矩形移动 1px，然后渲染图像，然后再次移动它，然后渲染等等。尽管 CSS3 动画使用起来要干净得多。

请告诉我如何以最好的方式更好地解决这个任务，或者至少我可以开始一些事情。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T10:12:05.757

您可以让 phantomjs 每隔几百毫秒拍摄一次快照，并以此为基础创建 css3 动画。

一个示例脚本 (snap.js) 将是：

```
var system = require('system');
var page = new WebPage();

var address = system.args[1];
var wait = parseInt(system.args[2]);
var iterations = parseInt(system.args[3]);

page.open(address, function(){
    (function snap(i){
        if(i < iterations){
            window.setTimeout(function(){
                page.render('capture/'+i+'.png');
                snap(++i);
            }, wait);
        }
        else{
            phantom.exit();
        }
    })(0);
}); 
```

您将使用 phantomjs 像这样调用脚本：

```
./phantomjs snap.js http://google.com 500 5 
```

它会每半秒拍摄一次谷歌主页的快照，5次。

然后，如果你每半秒暂停一次动画，phantomjs 就会捕捉到这些点。

# html - 浏览器窗口调整大小时自动调整图像

> ID：16031841
> 
> 赞同：1
> 
> 时间：2013-04-16T08:08:46.597
> 
> 标签：html, css, image, resize, scrollbar

我希望当我的浏览器窗口调整大小时我的图像大小不会改变，它应该覆盖所有 div 内容。问题是当我调整窗口背景图像的大小时，它只覆盖显示的浏览器区域，看起来我的内容超出了它的 div。 .如果有scollbar就可以了..但即使有那个..plz帮助也无法找到解决方案..

这是我的代码...

```
<style>
div{
 background-width:100%; 
 background-image: url('back5.jpg');
 background-id:back5;
 background-overflow-x:scroll;
}

</style>

</head>

<body style="margin:0px;overflow-x:scroll">

    <div>

    <img src="logo.gif">

    <label  style="type=text/css;position:absolute;left:600px;top:18px"/>

            <font size="5" style="color:#ffffff">E-mail:</font>

    </label>

    <label  style="type=text/css;float:right;position:absolute;left:600px;top:48px"/>

            <font size="5" style="color:#ffffff">Password:</font>

    </label>

    <Input type="text" name="_email" id="e_mail"  style= " type=text/css;-webkit-border-radius: 7px;
                                                          -moz-border-radius: 7px; border-radius: 7px;
                                                           background-color:#D8D8D8;
                                                           float:center;position:absolute;
                                                           left:720px;top:18px;
                                                           width:400px; height:25px"/>

    <Input type="text" name="_password" id="pass_word"  style="type=text/css;-webkit-border-radius: 7px; -moz-border-radius: 7px;
                                                                border-radius: 7px; background-color:#D8D8D8;
                                                                float:center;position:absolute;
                                                                left:720px ;top:48px; width:400px;
                                                                height:25px"/>

    <input type="submit" value="LogIn" style="type=text/css; float:center;position:absolute;
                                             left:870px ;width:600px; top:80px; width:60px;
                                             height:25px"/> 

    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:16:32.543

如果我理解正确，您可以尝试一个众所周知的 CSS3 属性，称为 background-size。

```
background-size: 100%; 
```

这仅适用于现代浏览器。更多信息可以在这里找到：[https ://developer.mozilla.org/en-US/docs/CSS/background-size](https://developer.mozilla.org/en-US/docs/CSS/background-size)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-03T05:51:57.073

您可以对图像使用引导响应类，

[获取引导程序](http://getbootstrap.com/css/#images-responsive)并将 bootstrap.css 包含到您的代码中。

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css"> 
```

那么你可以使用

```
<img src="..." class="img-responsive" alt="Responsive image"> 
```

# visual-studio-2010 - 添加 ASP.NET 文件夹和 App_Code 命名空间中缺少 VS 2010 App_folder

> ID：16031843
> 
> 赞同：0
> 
> 时间：2013-04-16T08:09:01.397
> 
> 标签：visual-studio-2010, namespaces, asp.net-4.0, app-code

我无法为我的项目添加 App_Code，所以我决定将它添加为新文件夹并将其命名为“App_code”。

这是将此文件夹添加到我的项目的正确方法吗？

如果这是正确的方法，为什么我在后面的代码中找不到命名空间“MyProjectName.App_Code”，尽管我在每个页面后面的代码中将命名空间定义为“使用 MyProjectName.App_Code;”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:06:09.890

将新文件夹添加到您的应用程序并将其命名为“App_Cpde”。

从 Add->Class 将新类添加到 App_Code 文件夹，并将其属性“构建操作”从内容更改为编译。

此致

# codeigniter - 在 Codeigniter 中创建和发送 Paypal 发票

> ID：16031844
> 
> 赞同：1
> 
> 时间：2013-04-16T08:09:05.727
> 
> 标签：codeigniter, paypal

我正在使用 Codeigniter 框架开发一个项目。有一个产品按钮（当前存储在数据库中），当用户点击订单按钮时​​，我想根据价格从我的系统创建和发送 Paypal 发票。

我还在贝宝网站上创建了开发者帐户。我搜索了以下链接。

[http://www.angelleye.com/demo/codeigniter/paypal/adaptive_payments/](http://www.angelleye.com/demo/codeigniter/paypal/adaptive_payments/) [http://askimran.wordpress.com/2009/10/09/paypal-integration-using-codeigniter-phase1/](http://askimran.wordpress.com/2009/10/09/paypal-integration-using-codeigniter-phase1/) [https://www. x.com/devzone/articles/how-use-paypal-invoicing-apis-php](https://www.x.com/devzone/articles/how-use-paypal-invoicing-apis-php)

读完这些后，我很困惑。您能否帮助我提供有关贝宝集成的分步教程。

提前致谢。

# c# - 如何在 MVC 中将 html.textboxfor 用于数字

> ID：16031847
> 
> 赞同：2
> 
> 时间：2013-04-16T08:09:17.447
> 
> 标签：c#, html, asp.net-mvc

我正在开发 MVC Web 应用程序，有一个模型类***student.cs***

它具有属性***名称、地址、点***，其中点是整数。鉴于我正在尝试使用：

```
<%=Html.TextBoxFor(model => model.points) %> 
```

编译器不能接受它。如何将 Html.TextBoxFor 用于整数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:08:27.183

Create a new ASP.NET MVC project and use only the code you presented:

you will see that it works.

**View**

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<Models.Student>" %>

<!DOCTYPE html>

<html>
<head runat="server">
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body>
    <div>
        <%= Html.TextBoxFor(model => model.repPoints) %>
    </div>
</body>
</html> 
```

**Model**

```
public class Student 
{ 
public Student() { } //constructor :) 

public Student(int ID, int repPoints) 

{ this.ID = ID; this.repPoints = repPoints; } 

public int ID { get; set; } 

public int repPoints { get; set; } } 
```

**Controller**

```
 public class TestController : Controller
    {
        public ActionResult Index()
        {
            Student student = new Student(10, 20);

            return View(student);
        }

        public ActionResult UpdateStudent(Student student)
        {
            //access the DB here

            return View("Index",student);
        }

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-14T07:06:15.923

如果您只想要最小值为 1 的数字，您可以这样做：`@Html.TextBoxFor(model => model.Id, new {@type = "number", @min = "1"})`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T08:14:20.370

~~您需要将整数转换为字符串~~

~~@Html.TextBoxFor(model => model.points.ToString())~~

**编辑：** 代码应该可以工作。一个非常简单的测试

该模型

```
public class Product
{
    public int Id { get; set; }
} 
```

控制器

```
 public ActionResult Index()
 {              
    var model = new Product {Id = 10};
    return View(model);
 } 
```

风景

```
@Html.TextBoxFor(model => model.Id) 
```

# java - Java程序实现布尔而不是非（！）

> ID：16031849
> 
> 赞同：0
> 
> 时间：2013-04-16T08:09:17.850
> 
> 标签：java, boolean

我不明白关于以下问题的额外信用问题。我已经实现了 try-catch 语句并且似乎工作正常，但是我们的讲师现在希望我们`boolean`在循环条件中使用变量而不是*data !=0*。我正在猜测：

```
while(data!=0.0) 
```

但这将如何运作？我是否完全摆脱它而只使用`boolean`我已经创建的？PS：我意识到这可能非常简单，我只是没有看到它。

```
import java.util.*;

public class SumInput {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);

        double data = 1.0;
        double sum = 0.0;
        boolean valid = false;
        while (!valid) {
            try {
                while (data != 0.0) {
                    System.out.print("So far, sum = " + sum
                       + "\nEnter a number or 0 to exit: ");
                    data = input.nextDouble();
                    sum = sum + data;
                    valid = true;
                }
            } catch (InputMismatchException e) {
                System.out.println("Error--please enter a double number");
                input.next();
            } catch (NoSuchElementException e) {
                System.out.println("\nGoodbye!");
                System.exit(0);
            }
        }
        System.out.println("Ending sum: " + sum);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:27:43.370

我已经更新了您的程序，以使用布尔值而不是 (data != 0.0) ，正如您的讲师所期望的那样。找到下面的程序：

```
import java.util.*;

public class SumInput {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);

        double data = 1.0;
        double sum = 0.0;
        boolean valid = false;
        while (!valid) {
            try {
                while (true) {
                    System.out.print("So far, sum = " + sum
                            + "\nEnter a number or 0 to exit: ");
                    data = input.nextDouble();
                    sum = sum + data;
                    valid = true;
                    if (data == 0.0) {
                        break;
                    }
                }
            } catch (InputMismatchException e) {
                System.out.println("Error--please enter a double number");
                input.next();
            } catch (NoSuchElementException e) {
                System.out.println("\nGoodbye!");
                System.exit(0);
            }
        }
        System.out.println("Ending sum: " + sum);
    }
} 
```

希望它能解决你的问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:14:29.893

我想他想要

```
public class SumInput {
    public static void main(String... ignored) {
        Scanner input = new Scanner(System.in);
        double sum = 0.0;
        while (true) {
            System.out.println("So far, sum = " + sum);
            System.out.print("Enter 'exit' to exit: ");
            if (!input.hasNextDouble())
                break;
            sum += input.nextDouble();
        }
        System.out.println("Ending sum: " + sum);
    }
} 
```

跑起来像

```
So far, sum = 0.0
Enter 'exit' to exit: 122
So far, sum = 122.0
Enter 'exit' to exit: 232.2
So far, sum = 354.2
Enter 'exit' to exit: 322
So far, sum = 676.2
Enter 'exit' to exit: exit
Ending sum: 676.2 
```

这更清晰、更安全，因为您可能希望对 0.0 不是最后一个值的值求和。

使用此循环，您将能够删除您当前拥有的大部分代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:17:18.807

```
boolean valid = true;
while (valid) {
    if((data =input.nextDouble()) != 0.0)
        valid = true;
    else
       valid = false;

// perform your calculation.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T08:39:06.430

永远不要使用 double in 作为逻辑（停止）条件，尤其是使用`==`or `!=`。

您的代码中的一个问题是`data == 0.0`这种双精度表示非常困难，尤其是在您执行某些计算时。这是由[表示错误引起的](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

当您使用`0`时，作为停止条件，我将从用户输出中删除它，并只留下`Enter`键作为退出循环的唯一方法。

# ruby-on-rails - 使用 Ruby on Rails 从数据库中的 yaml 序列化字段中获取大小数

> ID：16031850
> 
> 赞同：12
> 
> 时间：2013-04-16T08:09:23.047
> 
> 标签：ruby-on-rails, serialization, bigdecimal

使用 Ruby on Rails 我有几个序列化的字段（主要是数组或哈希）。其中一些包含`BigDecimal`s。这些大小数仍然是大小数是非常重要的，但是 Rails 正在将它们变成浮点数。我怎么找`BigDecimal`回来？

研究这个问题，我发现在没有 Rails 的普通 Ruby 中序列化一个大小数可以按预期工作：

```
BigDecimal.new("42.42").to_yaml
 => "--- !ruby/object:BigDecimal 18:0.4242E2\n...\n" 
```

但在 Rails 控制台中它不会：

```
BigDecimal.new("42.42").to_yaml
 => "--- 42.42\n" 
```

这个数字是大十进制的字符串表示，所以没关系。但是当我读回它时，它被读取为浮点数，所以即使我将它转换为`BigDecimal`（我不想做的事情，因为它容易出错），我可能会失去精度，这是不可接受的我的应用程序。

`activesupport-3.2.11/lib/active_support/core_ext/big_decimal/conversions.rb`我找到了在 BigDecimal 中覆盖以下方法的罪魁祸首：

```
YAML_TAG = 'tag:yaml.org,2002:float'
YAML_MAPPING = { 'Infinity' => '.Inf', '-Infinity' => '-.Inf', 'NaN' => '.NaN' }

# This emits the number without any scientific notation.
# This is better than self.to_f.to_s since it doesn't lose precision.
#
# Note that reconstituting YAML floats to native floats may lose precision.
def to_yaml(opts = {})
  return super if defined?(YAML::ENGINE) && !YAML::ENGINE.syck?

  YAML.quick_emit(nil, opts) do |out|
    string = to_s
    out.scalar(YAML_TAG, YAML_MAPPING[string] || string, :plain)
  end
end 
```

他们为什么要那样做？更重要的是，我该如何解决它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-18T21:35:24.923

您提到的 ActiveSupport 核心扩展代码“已经”在 master 分支中修复（[提交大约有一年的时间，并且撤消了与](https://github.com/rails/rails/commit/d8ed247c7f11b1ca4756134e145d2ec3bfeb8eaf)[Rails 2.1.0](http://apidock.com/rails/v2.1.0/ActiveSupport/CoreExtensions/BigDecimal/Conversions/to_yaml)一样古老的实现），但由于 Rails 3.2 仅获得安全更新，因此您的应用程序可能坚持旧的实现。

我想你会有三个选择：

1.  将您的 Rails 应用程序移植到 Rails 4。
2.  Backport Psych 的`BigDecimal#to_yaml`实现（猴子补丁猴子补丁）。
3.  切换到 Syck 作为 YAML 引擎。

每个选项都有其自身的缺点：

**移植到 Rails 4**在我看来是最好的选择，如果你有时间的话（上面提到的提交自 v4.0.0.beta1 起在 Rails 中可用）。由于它尚未发布，因此您必须使用测试版。我不怀疑会有任何重大变化，尽管一些 GSoC[想法](https://github.com/rails/gsoc2013/wiki/Ideas)读起来好像它们仍然可以进入 4.0 版本......

**猴子补丁**ActiveSupport 猴子补丁应该相当简单。虽然我没有找到*的原始*实现`BigDecimal#to_yaml`，但一个有点[相关的问题](https://stackoverflow.com/questions/10724253/bigdecimal-cant-be-coerced-into-bigdecimal)导致了[这个提交](https://github.com/tenderlove/psych/commit/33ce8650bac29190dde937b1b7d3e21fd06926e7)。我想我会留给您（或其他 StackOverflow 用户）如何反向移植该特定方法。

作为快速的解决方法，您可以简单地**使用 Syck 作为 YAML 引擎**。在同一个问题中，用户[rampion](https://stackoverflow.com/users/9859/rampion) [发布了](https://stackoverflow.com/a/10728941/766783)这段代码（您可以将其放在初始化文件中）：

```
YAML::ENGINE.yamler = 'syck'

class BigDecimal
  def to_yaml(opts={})
    YAML::quick_emit(object_id, opts) do |out|
      out.scalar("tag:induktiv.at,2007:BigDecimal", self.to_s)
    end
  end
end

YAML.add_domain_type("induktiv.at,2007", "BigDecimal") do |type, val|
  BigDecimal.new(val)
end 
```

这里的主要缺点（除了 Syck 在 Ruby 2.0.0 上不可用）是，您无法在 Rails 上下文中读取*正常*的 BigDecimal 转储，并且每个想要读取 YAML 转储的人都需要相同类型的加载器：

```
BigDecimal.new('43.21').to_yaml
#=> "--- !induktiv.at,2007/BigDecimal 43.21\n" 
```

（将标签更改为`"tag:ruby/object:BigDecimal"`也无济于事，因为它会产生`!ruby/object/BigDecimal`......）

* * *

## 更新——到目前为止我学到的东西

1.  [根据此博客条目](http://web.archive.org/web/20090530104151/http://blog.chrispcritter.com/articles/2007/02/11/bigdecimal-and-yaml-dont-get-along)，奇怪的行为似乎可以追溯到 Rails 1.2 时代（您也可以说是 2007 年 2 月）。

2.  `config/application.rb`以这种方式修改**没有**帮助：

    ```
    require File.expand_path('../boot', __FILE__)

    # (a)

    %w[yaml psych bigdecimal].each {|lib| require lib }
    class BigDecimal
      # backup old method definitions
      @@old_to_yaml = instance_method :to_yaml
      @@old_to_s    = instance_method :to_s
    end

    require 'rails/all'

    # (b)

    class BigDecimal
      # restore the old behavior
      define_method :to_yaml do |opts={}|
        @@old_to_yaml.bind(self).(opts)
      end
      define_method :to_s do |format='E'|
        @@old_to_s.bind(self).(format)
      end
    end

    # (c) 
    ```

    在不同的点（这里*是 a*、*b*和*c*） a`BigDecimal.new("42.21").to_yaml`产生了一些有趣的输出：

    ```
    # (a) => "--- !ruby/object:BigDecimal 18:0.4221E2\n...\n"
    # (b) => "--- 42.21\n...\n"
    # (c) => "--- 0.4221E2\n...\n" 
    ```

    其中*a*是默认行为，*b*是由 ActiveSupport 核心扩展引起的，*c*应该是与 a 相同的*结果*。也许我错过了一些东西......

3.  仔细阅读您的问题后，我有一个想法：为什么不以另一种格式序列化，例如 JSON？将另一列添加到您的数据库并随着时间的推移进行迁移，如下所示：

    ```
    class Person < ActiveRecord::Base
      # the old serialized field
      serialize :preferences

      # the new one. once fully migrated, drop old preferences column
      # rename this to preferences and remove the getter/setter methods below
      serialize :pref_migration, JSON

      def preferences
        if pref_migration.blank?
          pref_migration = super
          save! # maybe don't use bang here
        end
        pref_migration
      end

      def preferences=(*data)
        pref_migration = *data
      end
    end 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-02T21:08:28.723

如果您使用的是 Rails 4.0 或更高版本（但低于 4.2），您可以通过删除方法来解决它`BigDecimal#encode_with`。

您可以使用以下方式存档`undef_method`：

```
require 'bigdecimal'
require 'active_support/core_ext/big_decimal'

class BigDecimal
  undef_method :encode_with
end 
```

我将此代码放在初始化程序中，现在它可以工作了。在 Rails 4.2 中，Rails 猴子补丁的这种“还原”不是必需的，因为[此提交](https://github.com/rails/rails/commit/98ea19925d6db642731741c3b91bd085fac92241)删除了猴子补丁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-05T03:49:35.670

对于 rails 3.2，以下工作：

```
# config/initializers/backport_yaml_bigdecimal.rb

require "bigdecimal"
require "active_support/core_ext/big_decimal"

class BigDecimal
  remove_method :encode_with
  remove_method :to_yaml
end 
```

如果没有这个补丁，在 rails 3.2 控制台中：

```
irb> "0.3".to_d.to_yaml
=> "--- 0.3\n...\n" 
```

有了这个补丁：

```
irb> "0.3".to_d.to_yaml
=> "--- !ruby/object:BigDecimal 18:0.3E0\n...\n" 
```

您可能希望将其包装在带有文档和弃用警告的版本测试中，例如：

```
# BigDecimals should be correctly tagged and encoded in YAML as ruby objects
# instead of being cast to/from floating point representation which may lose
# precision.
#
# This is already upstream in Rails 4.2, so this is a backport for now.
#
# See http://stackoverflow.com/questions/16031850/getting-big-decimals-back-from-a-yaml-serialized-field-in-the-database-with-ruby
#
# Without this patch:
#
#   irb> "0.3".to_d.to_yaml
#   => "--- 0.3\n...\n"
#
# With this patch:
#
#   irb> "0.3".to_d.to_yaml
#   => "--- !ruby/object:BigDecimal 18:0.3E0\n...\n"
#
if Gem::Version.new(Rails.version) < Gem::Version.new("4.2")
  require "bigdecimal"
  require "active_support/core_ext/big_decimal"

  class BigDecimal
    # Rails 4.0.0 removed #to_yaml
    # https://github.com/rails/rails/commit/d8ed247c7f11b1ca4756134e145d2ec3bfeb8eaf
    if Gem::Version.new(Rails.version) < Gem::Version.new("4")
      remove_method :to_yaml
    else
      ActiveSupport::Deprecation.warn "Hey, you can remove this part of the backport!"
    end

    # Rails 4.2.0 removed #encode_with
    # https://github.com/rails/rails/commit/98ea19925d6db642731741c3b91bd085fac92241
    remove_method :encode_with
  end
else
  ActiveSupport::Deprecation.warn "Hey, you can remove this backport!"
end 
```

# java - Tomcat 6.x - 仅部署所需的 WAR 文件

> ID：16031862
> 
> 赞同：1
> 
> 时间：2013-04-16T08:10:07.700
> 
> 标签：java, jakarta-ee, tomcat, deployment, war

我们使用 Tomcat 6.x 版本进行开发。我们有 6 个应用程序部署为单独的 WAR。因此，每次 TOMCAT 启动时，它都会部署 6 个 WAR。

我希望能够告诉 Tomcat（手动或其他方式）哪些 WAR 已更改并仅部署那些，而对于其他人，需要重用旧部署的分解文件夹结构。

这可能吗？如果是，如何？我谷歌了一下，但找不到解决方案。

谢谢，悉达多

编辑 - 我在谷歌搜索时发现的一件事是，一旦部署了 WAR，我们可以删除 WAR，同时保留展开的文件夹。因此，下次不会部署它。我还没有尝试这种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:51:38.293

“部署”到底是什么意思？Tomcat 没有扩展已经扩展的 WAR 文件。此外，扩展（即解包）WAR 通常是一种快速操作。最耗时的是每次重新启动 Tomcat 时必须执行的应用程序的实际初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T04:39:27.507

您可以手动告诉 tomcat 使用 Tomcat 管理器重新部署。每个网络应用程序都有启动、停止和重新加载等选项。您可以重新加载已更改的战争文件。

# c++ - 图像是样本还是总体

> ID：16031863
> 
> 赞同：0
> 
> 时间：2013-04-16T08:10:11.440
> 
> 标签：c++, image-processing, statistics

我想知道如果我拍摄一张完整的灰色图像，那么这张图像将作为总体还是样本？我需要获取图像的标准偏差。Matlab 使用标准偏差公式作为样本，即除以 N-1。我个人认为这是一个总体，即需要除以 N。但后来我认为这张图片只是包含无限点的实际场景的样本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-20T15:44:55.917

在统计上，1/n 给出了最小方差估计（最精确），但它是有偏差的。1/(n-1) 是测量估计样本方差的常用方法，因为它是无偏的。您知道您正在计算样本方差，因为永远无法直接测量总体方差。我们只能通过样本方差来估计它。如需精彩评论，请参阅此[可汗学院视频](https://www.khanacademy.org/math/probability/descriptive-statistics/variance_std_deviation/v/review-and-intuition-why-we-divide-by-n-1-for-the-unbiased-sample-variance)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:19:22.913

我会说这是一个样本，因为您*可以*拍摄许多可能的图像，因此像素数量要大得多。更实际地，对于图像，我猜 N 足够大，因此您选择的分母是多少只会产生微小的差异？hth

# html - Google 字体无法在 Firefox 中正确呈现

> ID：16031864
> 
> 赞同：4
> 
> 时间：2013-04-16T08:10:11.730
> 
> 标签：html, css, google-font-api

我在我的网站上使用谷歌网络字体*Titillium Web*。它在 Google Chrome、IE、Opera 和 Safari 中完美呈现，但在 Firefox 中文本看起来很糟糕。

**谷歌字体链接：**

```
<link href='http://fonts.googleapis.com/css?family=Titillium+Web:200' rel='stylesheet' type='text/css'> 
```

**HTML：**

```
<p id="main-top-text" class="txt-style">WELCOME TO <span class="site-colour">NATHAN DA SILVA,</span></p>

<p id="main-bottom-text" class="txt-style">ENJOY YOUR STAY.</p> 
```

**CSS：**

```
.txt-style {
    font-family: 'Titillium Web', sans-serif;
    font-size: 60px;    
    line-height: 70px;
    color: #666666;
    text-align: center;
} 
```

你可以在这里看到它的样子：http: [//www.nathandasilva.co.uk/v3](http://www.nathandasilva.co.uk/v3)

我想没有人知道任何修复方法可以让 Firefox 看起来更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:13:58.503

我经常发现声明字体粗细会有所帮助。

```
font-weight: 200; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-30T21:03:22.083

我遇到了所有 Google 网络字体（尤其是 Roboto）的问题，发现我需要强制 Direct2d 加速*打开*才能修复它。我的显卡是 Intel HD4000。

发布对我有用的解决方案，以防它与您或其他读者相关：

1.  转到关于：配置
2.  找到 gfx.direct2d.force-enabled
3.  设置为 True 并重新启动 Firefox

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T09:06:58.527

我也有完全一样的问题！我正在使用最新版本的 Firefox (23) 和 Windows (8)。我的笔记本电脑中还有一个谨慎的（板载）AMD 显卡，它相当弱。

在升级之前，我在 Windows 7 中没有遇到此问题。

在做了一些调查之后，这就是我发现的：

*   我似乎一般都有 cleartype 的问题，因为当我查看启用 cleartype 的细字体（通过控制面板>字体）时，它们看起来非常像素化。关闭 cleartype 后，它们看起来更平滑，但没有出色的亚像素渲染，因此它们不像它们应该的那样超级清晰。

*   我电脑上安装的每个浏览器（IE、Opera、Chrome、Firefox）对细字体的处理方式都不同。Opera 具有与 Firefox 类似的像素化功能。Chrome 可以很好地处理 Titillium，但不能处理 Glypha LT（[The Expressive Web](http://beta.theexpressiveweb.com/#!/css3-animations)上的标题字体）。具有讽刺意味的是，IE 是唯一能完美处理所有细字体的浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T08:13:57.947

最后看起来不错，请尝试清除浏览器缓存，然后重试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-22T00:30:41.597

显然，默认情况下 Firefox 会阻止“跨站点”的字体以防止 XSS 攻击。

您可以在 Firebug 中判断字体是否已加载，因为它们将在样式选项卡中显示为“灰色”（当您检查 HTML 元素时）。

此外，尝试检查 Firefox 的内置开发人员控制台（菜单 > Web 开发人员 > Web 控制台）并查找加载字体的错误（Firebug 似乎没有报告这些）。这将帮助您确定问题所在。

要解决此问题，您可以将站点配置为接受外部字体，例如：

```
<FilesMatch "\.(ttf|otf|eot)$">
  <IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
  </IfModule>
</FilesMatch> 
```

对于其他字体（即不是来自 Google），如果您可以在您的服务器上托管这些字体，您也可以相对参考它们来解决问题。例如。：

```
@font-face { 
  font-family: 'museo_sans_100regular'; 
  src: url('/wp-content/uploads/museosans_100-webfont.eot'); 
  src: local('☺'), local('museo_sans_100regular'), 
    url('/wp-content/uploads/museosans_100-webfont.woff') format('woff'), 
    url('/wp-content/uploads/museosans_100-webfont.ttf') format('truetype'), 
    url('/wp-content/uploads/museosans-100-webfont.svg#museo_sans_100regular')     format('svg');
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-02T01:34:10.277

我通过将 http 更改为 https 来修复我的（也在 Safari 中损坏）（猜测谷歌自己改变了他们托管它的方式）。不知道为什么浏览器会关心样式表是来自 https 还是来自 http，但它确实解决了问题。

```
<link href='http://fonts.googleapis.com/css?family=Great+Vibes' rel='stylesheet' type='text/css'> 
```

至

```
<link href='https://fonts.googleapis.com/css?family=Great+Vibes' rel='stylesheet' type='text/css'> 
```

# php - Paymill：进行订阅，然后通过 client_id (PHP) 获取订阅和相应的交易

> ID：16031867
> 
> 赞同：0
> 
> 时间：2013-04-16T08:10:31.893
> 
> 标签：php, transactions, subscription, paymill

我为我们的应用程序编写了一个脚本，以允许用户订阅产品（按月或按年）

现在我有几个问题在这里或 paymill 文档中都找不到：

1st：当我为用户创建包含所有必要信息的订阅时，如何确定订阅是否成功？是否没有初始交易或仅在间隔之后进行交易？例如：

这是我的代码：

```
 $description = $_POST['client-email'];
        $email = $_POST['client-email'];
        $clientsObject = new Services_Paymill_Clients(PAYMILL_API_KEY, PAYMILL_API_HOST);
        $client        = $clientsObject->create(array(
            'email'       => $email,
            'description' => $description
            ));

        $params = array(
            'token' => 'justatesttokenthatiputhere',
            'client' => $client['id']
        );

        $paymentsObject = new Services_Paymill_Payments(PAYMILL_API_KEY, PAYMILL_API_HOST);

        $creditcard = $paymentsObject->create($params);
        //die("Amount: ".$_POST['card-amount-int']." Domain: ".$subdomain);
        $params = array(
            'amount'   => $_POST['card-amount-int'],       // E.g. "4200" for 42.00 EUR
            'currency' => 'EUR',        // ISO 4217 
            'interval' => '1 '.$_POST['interval-selected'],      // Options: "week", "month" and "year"
            'name'     => $_POST['clientId']
        );

        $offersObject  = new Services_Paymill_Offers(PAYMILL_API_KEY, PAYMILL_API_HOST);
        $offer         = $offersObject->create($params);

        //die(print_r($offer));

        $params = array(
            'client'   => $client['id'],
            'offer'    => $offer['id'],
            'payment'  => $creditcard['id']
        );
        //die(print_r($offer));
        $subscriptionsObject = new Services_Paymill_Subscriptions(PAYMILL_API_KEY, PAYMILL_API_HOST);
        $subscription        = $subscriptionsObject->create($params);

        $clients = $clientsObject->getOne($client['id']);

        $transactions = $transactionsObject->get();

        $subscriptions = $subscriptionsObject->get(); 
```

我有这样的感觉，例如 client_id、subscriptions_id 和所有内容：我没有在 $subscriptionsObject->get(); 例如。我有一种感觉，我可能会得到积极的回应，但他们没有得救？我怎样才能验证这一点？还是我可能忘记了代码中的某些内容？

2.问题：我可以通过client_id（通过client_id过滤）获取客户端的订阅吗？如果是这样：我怎样才能获得相应的交易（检查他们的状态）？

3.问：我如何测试，如果订阅，未来的支付验证是否有效？我的意思是，据我了解，我们必须在我们的网站上检查是否已付款并成功，如果我们选择 1 个月的间隔，可以说每个月。我们如何验证这一点？

4.考虑交易：根据文档：与订阅相关的交易在其描述字段中具有订阅 ID。但我在 $transactionsObject->get(); 中找不到任何这些情况；知道我做错了什么吗？

如果有人能给我指出正确的方向，甚至给我一个示例代码，我会很高兴，正如我发现的那样，这些细节在 paymill 的文档中并没有真正解释

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T17:43:34.023

1) 如果您没有指定试用期，Paymill 将在您创建订阅后立即执行交易。该交易具有描述“订阅#....”并具有状态（关闭为“成功”）。您可以通过在 Cockpit 中创建一些测试数据来测试此行为。如果您已指定试用期，则在进行交易后获得反馈的唯一方法是使用 webhook。您可以订阅“subscription.succeeded”和“subscription.failed”事件。

2）您可以请求获取指定的客户端，其中包括该客户端拥有的所有订阅。看到这个：[https ://www.paymill.com/de-de/dokumentation/referenz/api-referenz/#client-object](https://www.paymill.com/de-de/dokumentation/referenz/api-referenz/#client-object)

3) 正如第一点所暗示的，您可以创建一个 webhook :-)

4) 我建议只浏览 Cockpit ( [https://app.paymill.com/de-de](https://app.paymill.com/de-de)，无需登录或注册) 并设置如下数据：

*   优惠 1，无试用期，42 欧元
*   客户 1，使用有效的付款方式（使用 4111 1111 1111 1111 信用卡号）
*   为客户 1 订阅优惠 1

完成第三步后，“交易”页面上应该会有一笔交易。交易描述将包含类似“Subscription#sub_f6cd00e38309d80e0cad Offer 1”的内容

如果您的代码未生成包含此类描述的事务，则说明有问题，您需要检查代码进行的 HTTP 调用是什么。

# java - 正则表达式匹配“PATH 环境变量”，如字符串

> ID：16031874
> 
> 赞同：0
> 
> 时间：2013-04-16T08:10:46.123
> 
> 标签：java, regex, regex-negation

我正在尝试检查字符串是否形成为`NAME1=VALUE1;NAME2=VALUE2;`.

这是我到目前为止发现的：

```
s.matches("^(.+=.+;)*$") 
```

但这里有一个棘手的部分：**最后一个分号不是强制的**。`NAME1=VALUE1;NAME2=VALUE2`所以必须接受一个类似的字符串。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:16:50.910

您的表达式并没有真正达到预期的效果，因为一方面是贪婪的量词，另一方面是因为您使用的点几乎允许任何字符。
这应该具有您期望的行为：

```
^(\w+=\w+;)*\w+=\w+;?$ 
```

或者，如果空字符串是正确的：

```
^(\w+=\w+;)*(\w+=\w+;?)?$ 
```

请注意，我使用 \w 只是作为限制的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:14:45.190

你可以试试那个：

```
^([^=]+=[^;]+;)*([^=]+=[^;]+;?)$ 
```

自“。”以来，您的正则表达式中也有一些错误。也匹配“=”。[^=] 表示“除“=”之外的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:54:52.993

必须是正则表达式，这可以完成这项工作吗：

```
 for (String pair : myString.split(";")){
    if (! ((pair.indexOf("=") > 0) && (pair.indexOf("=") < pair.length()) &&   
          ((myString.split("=").length - myString.split(";").length) < 2) ))
      return false;
 }
 return true; 
```

# list - 在 Common Lisp (Clisp) 中组合列表项

> ID：16031878
> 
> 赞同：0
> 
> 时间：2013-04-16T08:10:53.050
> 
> 标签：list, merge, clisp

我无法将列表中的两项合并为一项。

例如：

```
'(Ben Hofferber) => '(Ben_Hofferber) or '(Ben-Hofferber) 
```

关于如何实现这一点的任何想法？

我一直在搞乱打印功能，试图让它以这种方式工作但没有成功。我需要组合和分离这些项目，以便我可以将它们用作 a-list 的键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T00:09:59.520

您也可以将列表用作 alist 键。例如，

```
(assoc '(1 2) '(((1 1) a) ((1 2) b) ((1 3) c)) :test #'equal)
==> ((1 2) B) 
```

所以，如果你有一份人员名单

```
(defparameter *people* '((Ben Hofferber) (Adam Young))) 
```

你可以像这样设置他们的年龄：

```
(defparameter *ages* (mapcar #'list *people* '(20 11))) 
```

并像这样找到它们：

```
(assoc '(Ben Hofferber) *ages* :test #'equal)
==> ((BEN HOFFERBER) 20) 
```

但是，如果您坚持将符号组合为一个，则必须解释您想如何做到这一点。

如果两个符号在同一个包中，则组合符号也可以放置在那里：

```
(defun combine-symbols (s1 s2)
  (intern (concatenate 'string (symbol-name s1) "-" (symbol-name s2))
          (symbol-package s1))) 
```

但是，如果它们位于不同的包中（例如，`cl:car`和`cl-user::ben`），您将不得不做出艰难的选择来使用哪个包。

或者，您可以使用字符串并使用

```
(defun combine-objects (o1 o2)
  (format nil "~A-~A" o1 o2)) 
```

不要忘记通过`:test #'equal`或`:test #'string=`到`assoc`。

# dynamics-crm-2011 - 如何获取thr crm 2011的用户名？

> ID：16031886
> 
> 赞同：2
> 
> 时间：2013-04-16T08:11:27.043
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-4, dynamics-crm-online

如何编写用于在 crm 2011 中获取用户名（不是所有者）的 javascript 函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T09:56:11.013

如果您指的`FullName`是记录的属性，`SystemUser`则可以使用此功能：

```
function getCurrentUserFullName() {
    var serverUrl;
    if (Xrm.Page.context.getClientUrl !== undefined) {
        serverUrl = Xrm.Page.context.getClientUrl();
    } else {
        serverUrl = Xrm.Page.context.getServerUrl();
    }
    var ODataPath = serverUrl + "/XRMServices/2011/OrganizationData.svc"; 
    var userRequest = new XMLHttpRequest(); 
    userRequest.open("GET", ODataPath + "/SystemUserSet(guid'" + Xrm.Page.context.getUserId() + "')", false); 
    userRequest.setRequestHeader("Accept", "application/json"); 
    userRequest.setRequestHeader("Content-Type", "application/json; charset=utf-8"); 
    userRequest.send();
    if (userRequest.status === 200) {
        var retrievedUser = JSON.parse(userRequest.responseText).d; 
        var userFullName = retrievedUser.FullName;
        return userFullName;
    }
    else {
        return "error";
    }
} 
```

参考：[CRM Answers - 通过同步调用获取当前用户的全名](http://www.crmanswers.net/2013/04/get-current-users-full-name-with.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T08:23:11.377

```
Xrm.Page.context.getUserId(); 
```

这将返回当前用户的 GUID。
使用检索到的 GUID 查询用户实体以检索与用户关联的名称和任何其他详细信息。

# c# - 在 ASP.NET C# 中使用 UserId 删除用户

> ID：16031888
> 
> 赞同：0
> 
> 时间：2013-04-16T08:11:34.550
> 
> 标签：c#, asp.net, asp.net-membership

我有一个下拉列表，其中包含系统中所有 UserId 的值。当我单击一个按钮时，我想使用他们的 UserId 删除选定的用户。是否需要先将 UserId 转换为用户名才能删除？这是我到目前为止的代码：

```
protected void btnDelete_Click(object sender, EventArgs e)
{
    MembershipUser su = Membership.GetUser(ddlFullNames.SelectedValue.ToString());
    Membership.DeleteUser(su.UserName, true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:32:21.183

Just set a GUI with user id and retrieve the user.

Do you can try this ?

```
//User id 
Guid userIdToDelete = new Guid("234hg-d23d23j-23d-23d2-2d23d23");
//Delete User with its id
Membership.DeleteUser(Membership.GetUser(userIdToDelete).UserName, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:15:02.617

基本上是的，用户名是删除所必需的，但是一旦你有了足够简单的用户对象。

您还可以使用 MembershipUser.ProviderUserKey 来获取用户，请参阅[此链接了解更多信息](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.provideruserkey.aspx)

正确的格式是

```
Membership.DeleteUser("username"); 
```

或者

```
Membership.DeleteUser(su.UserName, true); 
```

或更简单地说

有关更多信息，请参阅[此链接](http://msdn.microsoft.com/en-us/library/w6b0zxdw.aspx)

# php - mysql数据检索

> ID：16031891
> 
> 赞同：0
> 
> 时间：2013-04-16T08:11:49.907
> 
> 标签：php, mysql

我正在为我的公司创建一个考勤管理系统。为此，我的 mysql 数据库中有一个名为 PRESENCE 的表。该表如下所示。

> +--------+-------------+---------+----------+-------- ----+--------+------+------+
> 
> | 进程号 | 班次时间 | 时间 | 超时 | 工作时间 | 日期 | uid | 天 |
> 
> +--------+-------------+---------+----------+-------- ----+--------+------+------+

我的 html 中有两个按钮用于签入和签出。员工每天登录并在他们到办公室时单击签到按钮。当他们单击签入按钮时，我在上表中插入一个新行

```
pid(auto incremented),
timein(server time),
timeout(default value 00:00:00),
date(server date),
uid(logged in employee id),
day(present day like monday,tuesday etc.) 
```

当他们单击结帐按钮时，我只需将超时值更新为服务器时间并计算工作时间并进行更新。

在我的 html 中，我编写了一个选择查询以从该表中选择特定员工 ID 的所有行并显示输出。现在我的问题是，如果用户没有签入任何日期，我希望显示该日期，因为`"absent" or "no-shift".`我不确定如何执行此操作。任何想法和帮助将不胜感激。我需要尽快完成这个项目。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:25:14.173

如果您假设工人预计工作五个星期，那么对于“缺勤”或“无轮班”的情况，您可以显示没有轮班条目的天数。这些缺失的行需要由工人解释。

至少我认为您需要在表中添加一个“类型”列，该列将是（SHIFT，ABSENT）的枚举。

一般来说，对于这些额外的用例，您的单表模式似乎有点限制。

# asp.net-mvc-4 - mvc 4 razor - 呈现 HTML 的最佳方式

> ID：16031898
> 
> 赞同：1
> 
> 时间：2013-04-16T08:12:07.447
> 
> 标签：asp.net-mvc-4, razor, html-rendering

我已经开始使用 MVC 4 - 剃须刀。

在那，我找到了一些在某些动作上呈现 HTML 的方法。

1.  在操作结果中返回视图。
2.  根据我的数据在服务器端生成 HTML 并将其作为 JsonResult 的参数返回并将此 HTML 附加到正文
3.  返回 JsonResult 的数据参数并在客户端创建 HTML 并将其附加到正文

我已经在我的应用程序中尝试了所有三种方法，并且都正常工作。

但就复杂/繁重的 HTML 或大数据和性能而言，哪种方式是最好的使用方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T08:35:44.197

取决于你的要求，我通常会去

解决方案 1，使用 ActionResult(ViewResult) 进行初始视图渲染，剃刀视图受益于 @html 扩展。

解决方案 2 可以作为 ContentResult 发送，因为它比“application/json”更“text/html”。

解决方案 3 非常适用于 ajax 调用中的动态 html，与一些模板引擎（如[把手](http://handlebarsjs.com/)或[jquery.tmpl](https://github.com/jquery/jquery-tmpl) ）结合使用，可用于以非常薄的 json 有效负载呈现大量 html。

希望这可以帮助。

# android - 如何测试我的翻译是否显示在应用程序上

> ID：16031899
> 
> 赞同：0
> 
> 时间：2013-04-16T08:12:11.620
> 
> 标签：android, translation, in-app

我刚刚将 android in-app billing sdk 集成到我的应用程序中。我正在尝试将非托管应用产品的标题和描述显示为印度语印地语。我已经将英语翻译成印地语脚本，现在我需要对其进行测试。有没有一种方法可以在我的应用程序或手机上指定在可用的地方显示印地语脚本？

![注意](https://i.stack.imgur.com/pReth.png)

我已经在我的 google play 开发者帐户上翻译了这段文字。

PS：暂时忽略`Item unavailable`错误，因为我刚刚将应用程序产品中的非托管产品设置为活动，我猜它需要一段时间才能同步。我还有一个没有 BillingPermission 的已发布应用版本 x。虽然我的版本 x+1（未发布）apk 已上传仅用于测试和配置目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:06:15.007

您是否正在寻找更改手机区域设置的方法？如果是这样，请尝试[设置区域设置和语言之类的应用](https://play.google.com/store/apps/details?id=com.bruce.setlocale)

祝你好运！

# java - MM/dd/yyyy 中的 xmlgregoriancalendar 格式

> ID：16031903
> 
> 赞同：0
> 
> 时间：2013-04-16T08:12:33.820
> 
> 标签：java, xml, date, formatting

我有一个格式为 date 的变量`MM/dd/yyyy`。我需要以相同的格式将 tempdate 转换为 xmlgregoriancalendar 类型，即`MM/dd/yyyy`.

使用创建时的默认格式`newxmlgregoriancalendarDate()`是`yyyy-MM-dd` ，所以我无法将其转换`MM/dd/yyyy`为 xmlgregoriancalendar 类型的格式

如何实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T08:18:49.480

`XMLGregorianCalendar`并没有真正“拥有”一种格式——或者更确切地说，它不是对象中数据的一部分，因为日期/时间的 XML 格式是以特定格式[指定](http://www.w3.org/TR/xmlschema-2/#dateTime-order)的。因此，“我需要将 tempdate 转换为相同格式的 xmlgregoriancalendar 类型，即 MM/dd/yyyy”的请求真的没有意义。

如果您想将不同的文本表示形式*作为字符串*，我建议您使用[`toGregorianCalendar()`](http://docs.oracle.com/javase/7/docs/api/javax/xml/datatype/XMLGregorianCalendar.html#toGregorianCalendar%28%29)来获取`java.util.Calendar`- 然后您可以获取`java.util.Date`并使用适当构造`SimpleDateFormat`的来进行格式化。

# jquery-ui - Jquery UI Range Slider 不更新 Knockout 绑定

> ID：16031904
> 
> 赞同：1
> 
> 时间：2013-04-16T08:12:34.177
> 
> 标签：jquery-ui, knockout.js, custom-binding

我有一个淘汰的可观察数组，其中包含一个人过去的医疗问题的数据。我创建了一个 Jquery Range Slider，其最小范围是他的出生年份，而最大范围是当前年份。当用户滑过滑块时，只应查看属于该范围的那些医疗问题。

到目前为止，如果范围保存在 div 中，我已经完成了查看医疗问题，但我无法使其与滑块一起使用。

这是小提琴：http: [//jsfiddle.net/bX9pP/](http://jsfiddle.net/bX9pP/)

这是视图模型代码：

```
var viewModel = {
    one : ko.observableArray([
    {
        HistoryIcon: "img/Surgeon.png",
        HistoryItem: "Laparoscopic Cholecystectomy",
        HistoryItemVenue: "Dr.Rao Khan KRL Hospital",
        Date: "16th May 2013",
        Year: "2013",
        Tag: "None"
    },
    {
        HistoryIcon: "img/haayeoye",
        HistoryItem: "Laparoscopic Cholecystectomy",
        HistoryItemVenue: "Dr.Rao Khan KRL Hospital",
        Date: "16th May 2011",
        Year: "2011",
        Tag: "None"
    },
    {
        HistoryIcon: "img/amedical_pot_pills.png",
        HistoryItem: "Symbicort, 50mgs(PainRelief)",
        HistoryItemVenue: "Prescribed by Dr.Jay Rajpoot Shifa Intl Hospital",
        Date: "16th May 2012",
        Year: "2012",
        Tag: "None"},
    {
        HistoryIcon: "img/amedical_pot_pills.png",
        HistoryItem: "Symbicort, 50mgs(PainRelief)",
        HistoryItemVenue: "Prescribed by Dr.Jay Rajpoot Shifa Intl Hospital",
        Date: "16th May 2015",
        Year: "2015",
        Tag: "None"}
    ])
};
ko.applyBindings(viewModel); 
```

这是获取 div 元素的 innerHTML 的脚本：

```
var temp=document.getElementById("s1").innerHTML;
var temp1=document.getElementById("s2").innerHTML; 
```

滑块脚本代码：

```
$(function() {
    $( "#slider-range" ).slider({ // Slider Jq ui 
      range: true, //Range Slider
      min: 1960, //Minimum Value
      max: 2013, //Maximum Value
      step: 1, //Steps
      values: [ 1960, 2013 ], //Initial Value

        change: function( event, ui ) { //When slides
          //    $( "#s1" ).html( ui.values[ 0 ] + " - " + ui.values[ 1 ]);// Values append to div, [0] being min , [1] being max
          //    $( "#s2" ).html( ui.values[ 0 ] + " - " + ui.values[ 1 ]);// Values append to div, [0] being min , [1] being max
          $( "#s1" ).html( ui.values[ 1 ]);
          $( "#s2" ).html( ui.values[ 0 ]);   
        }
    }); 
}); 
```

最后，HTML代码

```
<div id="s1">2012</div>
<div id="s2">2013</div>

<div  id="slider-range"></div>

<div data-bind="foreach: one">
    <!-- ko if: Year <= temp1 && Year >= temp   -->
    <div class="span4" data-bind="text: Date" ></div>
    <div class="span4" data-bind="text: HistoryIcon" ></div>
    <!-- /ko -->
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:10:31.970

您可以为*范围滑块*创建[自定义绑定](http://knockoutjs.com/documentation/custom-bindings.html)。为了在范围内显示项目，您可以创建一个[计算的 obervable 数组](http://knockoutjs.com/documentation/computedObservables.html)，每当您的 Min 或 Max 日期 observable 发生变化时，它都会重新计算。

 **范围滑块的自定义绑定（javascript）*：

```
ko.bindingHandlers.rangeSlider = {
    init: function(element, valueAccessor, allBindingsAccessor)
    {
        var options = valueAccessor() || {};
        var params =  allBindingsAccessor() || {};
        options.change = function(e, ui)
        {
            params.MinValue(ui.values[0]);
            params.MaxValue(ui.values[1]);
        }
        options.slide = function(e, ui)
        {
            params.MinValue(ui.values[0]);
            params.MaxValue(ui.values[1]);
        }            
        $(element).slider(options);

        ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
          $(element).slider("destroy");
        });
    }
}; 
```

HTML：

```
<div data-bind="rangeSlider: {range: true, min:500, max:15000 , step:100}, minValue: chosenMinPrice, maxValue: chosenMaxPrice"></div> 
```

我创建了一个小提琴检查：

[演示小提琴](http://jsfiddle.net/bX9pP/12/)

让我知道这是你想要达到的目标吗？*

# php - 如何选择二级或三级目录名称来设置样式

> ID：16031905
> 
> 赞同：0
> 
> 时间：2013-04-16T08:12:41.343
> 
> 标签：php, select, tree, styles, directory

我正在尝试创建一个目录树以显示产品页面。IT 通过主目录查找并找到 Categories Collections、裸钻和网球手镯。集合目录将有相当多的子目录，这些子目录也可能有一些。我想弄清楚的是如何检测/选择正在查看的目录如何查看子目录或子目录，以便我可以对目录名称应用不同的样式。例如，我会将子目录缩进或其他东西。

下面是我在 SO 上找到的代码片段。我尝试在文件类型行之后添加第二个，以尝试查看是否可以手动设置子文件变量并查看子目录中是否有任何目录。我这样做的时候把它弄坏了:(

```
$dir = "Images/Categories/";
function recurseDirs($main, $count=0){
$dirHandle = opendir($main);
while($file = readdir($dirHandle)){
    if(filetype($main.$file."/")=="dir" && $file != '.' && $file != '..'){
        echo "<li>$file</li>";
        $count = recurseDirs($main.$file."/",$count); // Correct call and fixed counting
    }
}
return $count;
} 
```

# magento - Magento 对已经含税的产品价格征税

> ID：16031908
> 
> 赞同：4
> 
> 时间：2013-04-16T08:12:51.593
> 
> 标签：magento, cart

我已经添加了含税的产品价格（在价格 [EUR] [含税] 字段中）现在当我将产品放入购物车时，Magento 会将税应用于已经含税的价格！

*示例*：如果产品在购物车中有“价格 [欧元] [含税]”=100 欧元，我有：

> 产品价格 € 100
> 
> 小计 100 欧元
> 
> 税 20 欧元
> 
> 总计 120 欧元（但正确的含税价格是 100 欧元！）

相反，我想要这个：

> 产品价格 € 100
> 
> 小计 80 欧元
> 
> 税 20 欧元
> 
> 总计 100 欧元

我已经尝试了所有设置，我要疯了！有解决办法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-27T18:29:28.310

我将重新发布 idophir 的评论，这解决了我的问题，导致我提出了这个问题。我浪费了数小时查看税收设置和税收规则，最终找到了运输原产地设置的罪魁祸首：

> 查看下面的链接。它说运输原产国（系统 > 配置 > 销售 > 运输设置 > 原产地）会影响价格在购物车中的显示方式。奇怪.. [http://www.magentocommerce.com/boards/viewthread/78069/](http://www.magentocommerce.com/boards/viewthread/78069/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-23T15:28:17.223

确保在配置 > 销售 > 运输设置下正确指定了原产国。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:56:17.233

转到系统->配置->销售->税收->计算

并搜索目录价格。将开关设置为“是”，然后 Magento 假设税已包含在目录价格中。

还要在您的商店配置范围内检查这些设置，而不仅仅是在默认配置中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T10:22:32.173

我遇到了同样的问题，我正在检查解决方案并通过了这个主题。现在我已经解决了我的问题，所以在这里告诉你。在我的情况下，我之前在默认税收目的地窗口中选择了“默认国家”作为英国，并且我是从一个地址不是英国的帐户登录的。所以一切都很好，我尝试了所有选项，并且产品和购物车页面上的税收没有更新。当我注销并发现它正在工作时；）然后我意识到了这个问题。因此，如果您有默认国家/地区进行税收计算，请查看有无此税收。希望它对你有用。对不起，我迟到了:)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-16T09:29:19.550

当您进入税收计算部分（即系统->配置->销售->税收->计算）时，您会发现“目录价格”，您可以自定义是否要将价格包含在税收中。

# cdb - 从 .CDB 文件中获取数据

> ID：16031915
> 
> 赞同：1
> 
> 时间：2013-04-16T08:13:04.710
> 
> 标签：cdb

我想从.cdb 文件中获取数据。是否可以在不知道键名的情况下从 .cdb 文件中检索数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:39:08.317

如果您谈论的是[CDB 常量数据库](http://cr.yp.to/cdb.html)文件，**cdbdump**程序会将**cdbmake**格式的所有数据转储到标准输出上。

# android - 在 android 视频视图中流式传输视频

> ID：16031916
> 
> 赞同：0
> 
> 时间：2013-04-16T08:13:09.953
> 
> 标签：android, youtube, streaming, android-videoview

我想在视频视图中播放视频，我问如何将 url 转换为 rstp，并且我收到了将 url 转换为 rstp 的好人代码。实施此代码时，我收到质量差的视频。

当我搜索如何修复质量时，我喜欢这个链接 [获取 YouTube 视频的下载 URL (Android/Java)](https://stackoverflow.com/questions/15240011/get-the-download-url-for-youtube-video-android-java)

我的问题是如何让这段代码工作......我把这段代码复制到我的 Eclipse 并在这些行中收到错误编译器：

ArrayList 视频 = 新 ArrayList();

progressDialog = ProgressDialog.show(ARViewer.this, "", "正在连接到 YouTube...", true);

任何建议如何解决这个错误？？？？这对我很有帮助...

谢谢你 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-08T14:38:58.643

将 ARViewer.this 替换为 YourActivityName.this，因为 ARViewer 只是代码所在的类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-22T07:21:28.610

> RAViewer It Just Activity Name 用您的 Activity 名称替换 像这样

```
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.util.Log;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.CoreProtocolPNames;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.URLDecoder;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class MainLauncher extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_launcher);

        new YouTubePageStreamUriGetter().execute("https://www.youtube.com/watch?v=4GuqB1BQVr4");
    }

    class Meta {
        public String num;
        public String type;
        public String ext;

        Meta(String num, String ext, String type) {
            this.num = num;
            this.ext = ext;
            this.type = type;
        }
    }

    class Video {
        public String ext = "";
        public String type = "";
        public String url = "";

        Video(String ext, String type, String url) {
            this.ext = ext;
            this.type = type;
            this.url = url;
        }
    }

    public ArrayList<Video> getStreamingUrisFromYouTubePage(String ytUrl)
            throws IOException {
        if (ytUrl == null) {
            return null;
        }

        // Remove any query params in query string after the watch?v=<vid> in
        // e.g.
        // http://www.youtube.com/watch?v=0RUPACpf8Vs&feature=youtube_gdata_player
        int andIdx = ytUrl.indexOf('&');
        if (andIdx >= 0) {
            ytUrl = ytUrl.substring(0, andIdx);
        }

        // Get the HTML response
        String userAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:8.0.1)";
        HttpClient client = new DefaultHttpClient();
        client.getParams().setParameter(CoreProtocolPNames.USER_AGENT,
                userAgent);
        HttpGet request = new HttpGet(ytUrl);
        HttpResponse response = client.execute(request);
        String html = "";
        InputStream in = response.getEntity().getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(in));
        StringBuilder str = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            str.append(line.replace("\\u0026", "&"));
        }
        in.close();
        html = str.toString();

        // Parse the HTML response and extract the streaming URIs
        if (html.contains("verify-age-thumb")) {
            Log.e("Downloader","YouTube is asking for age verification. We can't handle that sorry.");
            return null;
        }

        if (html.contains("das_captcha")) {
            Log.e("Downloader","Captcha found, please try with different IP address.");
            return null;
        }

        Pattern p = Pattern.compile("stream_map\": \"(.*?)?\"");
        // Pattern p = Pattern.compile("/stream_map=(.[^&]*?)\"/");
        Matcher m = p.matcher(html);
        List<String> matches = new ArrayList<String>();
        while (m.find()) {
            matches.add(m.group());
        }

        if (matches.size() != 1) {
            Log.e("Downloader","Found zero or too many stream maps.");
            return null;
        }

        String urls[] = matches.get(0).split(",");
        HashMap<String, String> foundArray = new HashMap<String, String>();
        for (String ppUrl : urls) {
            String url = URLDecoder.decode(ppUrl, "UTF-8");

            Pattern p1 = Pattern.compile("itag=([0-9]+?)[&]");
            Matcher m1 = p1.matcher(url);
            String itag = null;
            if (m1.find()) {
                itag = m1.group(1);
            }

            Pattern p2 = Pattern.compile("sig=(.*?)[&]");
            Matcher m2 = p2.matcher(url);
            String sig = null;
            if (m2.find()) {
                sig = m2.group(1);
            }

            Pattern p3 = Pattern.compile("url=(.*?)[&]");
            Matcher m3 = p3.matcher(ppUrl);
            String um = null;
            if (m3.find()) {
                um = m3.group(1);
            }

            if (itag != null && sig != null && um != null) {
                foundArray.put(itag, URLDecoder.decode(um, "UTF-8") + "&"
                        + "signature=" + sig);
            }
        }

        if (foundArray.size() == 0) {
            Log.e("Downloader","Couldn't find any URLs and corresponding signatures");
            return null;
        }

        HashMap<String, Meta> typeMap = new HashMap<String,Meta>();
        typeMap.put("13", new Meta("13", "3GP", "Low Quality - 176x144"));
        typeMap.put("17", new Meta("17", "3GP", "Medium Quality - 176x144"));
        typeMap.put("36", new Meta("36", "3GP", "High Quality - 320x240"));
        typeMap.put("5",  new Meta("5", "FLV", "Low Quality - 400x226"));
        typeMap.put("6",  new Meta("6", "FLV", "Medium Quality - 640x360"));
        typeMap.put("34", new Meta("34", "FLV", "Medium Quality - 640x360"));
        typeMap.put("35", new Meta("35", "FLV", "High Quality - 854x480"));
        typeMap.put("43", new Meta("43", "WEBM", "Low Quality - 640x360"));
        typeMap.put("44", new Meta("44", "WEBM", "Medium Quality - 854x480"));
        typeMap.put("45", new Meta("45", "WEBM", "High Quality - 1280x720"));
        typeMap.put("18", new Meta("18", "MP4", "Medium Quality - 480x360"));
        typeMap.put("22", new Meta("22", "MP4", "High Quality - 1280x720"));
        typeMap.put("37", new Meta("37", "MP4", "High Quality - 1920x1080"));
        typeMap.put("33", new Meta("38", "MP4", "High Quality - 4096x230"));

        ArrayList<Video> videos = new ArrayList<Video>();

        for (String format : typeMap.keySet()) {
            Meta meta = typeMap.get(format);

            if (foundArray.containsKey(format)) {
                Video newVideo = new Video(meta.ext, meta.type,
                        foundArray.get(format));
                videos.add(newVideo);
                Log.d("Downloader","YouTube Video streaming details: ext:" + newVideo.ext
                        + ", type:" + newVideo.type + ", url:" + newVideo.url);
            }
        }

        return videos;
    }

    private class YouTubePageStreamUriGetter extends AsyncTask<String, String, String> {
        ProgressDialog progressDialog;

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            progressDialog = ProgressDialog.show(MainLauncher.this, "",
                    "Connecting to YouTube...", true);
        }

        @Override
        protected String doInBackground(String... params) {
            String url = params[0];
            try {
                ArrayList<Video> videos = getStreamingUrisFromYouTubePage(url);
                if (videos != null && !videos.isEmpty()) {
                    String retVidUrl = null;
                    for (Video video : videos) {
                        if (video.ext.toLowerCase().contains("mp4")
                                && video.type.toLowerCase().contains("medium")) {
                            retVidUrl = video.url;
                            break;
                        }
                    }
                    if (retVidUrl == null) {
                        for (Video video : videos) {
                            if (video.ext.toLowerCase().contains("3gp")
                                    && video.type.toLowerCase().contains(
                                    "medium")) {
                                retVidUrl = video.url;
                                break;

                            }
                        }
                    }
                    if (retVidUrl == null) {

                        for (Video video : videos) {
                            if (video.ext.toLowerCase().contains("mp4")
                                    && video.type.toLowerCase().contains("low")) {
                                retVidUrl = video.url;
                                break;

                            }
                        }
                    }
                    if (retVidUrl == null) {
                        for (Video video : videos) {
                            if (video.ext.toLowerCase().contains("3gp")
                                    && video.type.toLowerCase().contains("low")) {
                                retVidUrl = video.url;
                                break;
                            }
                        }
                    }

                    return retVidUrl;
                }
            } catch (Exception e) {
                Log.e("Downloader","Couldn't get YouTube streaming URL", e);
            }
            Log.e("Downloader","Couldn't get stream URI for " + url);
            return null;
        }

        @Override
        protected void onPostExecute(String streamingUrl) {
            super.onPostExecute(streamingUrl);
            progressDialog.dismiss();
            if (streamingUrl != null) {
                /* Do what ever you want with streamUrl */
            }
        }
    }
} 
```

# javascript - 如何在 JavaScript MVC3 中创建会话变量和检索

> ID：16031917
> 
> 赞同：0
> 
> 时间：2013-04-16T08:13:10.150
> 
> 标签：javascript, asp.net-mvc-3, razor

我想在 JavaScript 中创建一个变量 Session 并在同一个 JavaScript 中检索它

我的代码

```
 '<%Session["Test"] = "Welcome DS";%>';
        var session_value = '<%=Session["Test"]%>';
        alert(session_value); 
```

它给出“<%=Session["Test"]%>" 警报结果，它没有给出会话值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:24:03.433

您使用的语法错误，适用于其他版本的 razor。您可以将其更改为：

```
alert('@Session["Test"]'); 
```

注意`@`标志的使用。您可以[参考此页面](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3razor.aspx)以了解正确的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:24:41.713

ASP.NET 认为您编写的内容是纯字符串。如果我们谈论的是 .aspx 文件，删除引号应该可以解决问题。

```
<%Session["Test"] = "Welcome DS";%>

var session_value = <%=Session["Test"]%>; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T12:03:07.440

如果您真的只需要 Javascript 中的会话变量，为什么不使用客户端会话变量？

例如 html5 [sessionStorage](https://code.google.com/p/sessionstorage/)

你可以这样设置：

```
sessionStorage.myVariable = "myvalue"; 
```

并像这样阅读：

```
var x = sessionStorage.myVariable 
```

# css - 为什么contentEditable的插入符号在Firefox，IE中按比例缩小时会消失？

> ID：16031918
> 
> 赞同：1
> 
> 时间：2013-04-16T08:13:12.480
> 
> 标签：css, firefox, transform, contenteditable

我正在制作一个富 Web 客户端，您可以在其中为演示文稿创建幻灯片。其中一项功能是能够缩放页面以适应屏幕。我使用 CSS 转换来做到这一点，并且在小型笔记本电脑屏幕上它会缩小。但是，在这些情况下，我的 contentEditable 文本框开始失去闪烁的插入符号（它从 0.7 左右开始，并且越缩小越严重）。

看看这个简化的案例：

```
<!DOCTYPE html>
<html><head>
<style type="text/css">
div {
    border: 1px solid gray;
    -webkit-transform: scale(0.7);
    -moz-transform: scale(0.7);
    -ms-transform: scale(0.7);
    -o-transform: scale(0.7);
    transform: scale(0.7);
}
</style>
</head><body>
<div contenteditable="true">The quick brown fox jumps over the lazy dog</div>
</body></html> 
```

或在 jsfiddle：http: [//jsfiddle.net/5wJGg/3/](http://jsfiddle.net/5wJGg/3/)

单击最左边的字符，然后使用键盘的右箭头键浏览所有字符 - 等待插入符号每次闪烁。

*   谷歌浏览器：插入符号总是出现。
*   Firefox 20：插入符号不会出现在某些字符之间。
*   IE 9：插入符号不会出现在某些字符之间。
*   IE 10：插入符号总是出现。
*   Safari（在 Mac 上）：插入符号总是出现

我注意到有时 Google Chrome/Safari 会以 2px 宽度绘制灰色的插入符号。

这是 Firefox 和 IE 中的亚像素渲染错误吗？有解决方法吗？我不能用 CSS 设置插入符号的样式，所以恐怕我可能是 SOL。

**[编辑]** 刚刚在 Windows 8 上的 IE 10 上进行了测试。插入符号总是出现。当出现亚像素问题时，插入符号显示得更粗且呈灰色，因此它看起来确实像 IE 9 中已修复的错误，以及 Firefox 中的突出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T00:34:52.397

已将此作为 Firefox 中的错误提交。感谢 mozilla 的 IRC 上的人的帮助，他们在主干上重现了这个错误并确定它是否是一个错误。

[https://bugzilla.mozilla.org/show_bug.cgi?id=865930](https://bugzilla.mozilla.org/show_bug.cgi?id=865930)

# qt - 当setMaximumSize最大化按钮不起作用时的QWidget

> ID：16031926
> 
> 赞同：2
> 
> 时间：2013-04-16T08:13:57.157
> 
> 标签：qt, qwidget, qscrollarea

我有一个 QWidget，它有一个包含 QScrollArea 的水平布局。当我向 QScrollArea 添加一个小部件时，我将容器 QWidget 的最大大小更改为：

```
this->setMaximumSize(newWidget->maximumWidth(), newWidget->maximumHeight()); 
```

最大尺寸已更改，但最大化按钮不再起作用。我可以用鼠标改变小部件的大小，但不能用最大化按钮。

如果我将最大尺寸设置为更高的值，例如：

```
this->setMaximumSize(newWidget->maximumWidth() * 2, newWidget->maximumHeight() * 2); 
```

最大化按钮效果很好。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:45:18.100

您已将最大尺寸设置为小于桌面尺寸。因此，当您尝试最大化小部件时，您是在要求小部件超出您设置的最大尺寸 - 所以它会忽略您。

大概`newWidget->maximumWidth() * 2`有效，因为该数字大于您的桌面大小。

# vba - 如何让 Word 检查我的文本的完整性？

> ID：16031929
> 
> 赞同：0
> 
> 时间：2013-04-16T08:13:58.957
> 
> 标签：vba, ms-word, macros

我想自动检查我的文档中的某些属性：

1.  括号前的空格
2.  查找在列表中指定的黄鼠狼单词
3.  无法打印的字符（我设置了很多方程式然后更改了类型 - 不好）

理想情况下，我想用评论来标记所有这些，这样我以后可以修复它们。

这种文本测试是否可能/可行/已经存在于 word 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:11:09.580

不幸的是，您无法立即运行它，因为如果您需要一些隐藏的文档标记，则无法突出显示它。为不同的目标尝试这两个潜艇（也阅读潜艇内的一些评论）

```
Sub Searching_For_Text()
    'will highlight all options added with .HitHighlight method
    With ActiveDocument.Content.Find
        .ClearHitHighlight
    'words
        .HitHighlight "Variant" 'any word this way
    'any text
        .HitHighlight "  ("  'this for spaces before parenthesis 

    'partially specified text
        .HitHighlight "doc"  'simply this for words like: _
                            document, documents

    'option 2- this can't be highlighted but no error returned
        .HitHighlight "^p" 'paragraph mark
        .HitHighlight "^l" 'soft line mark
    End With
End Sub 
```

对于特殊文件标记：

```
Sub Searching_Special_marks()
    'for paragraph marks you need to search each separately
    'each time you call it you will find next one, next to current selection point
    With Selection.Find

    'some cleaning
    .ClearFormatting

    'searching each separately
        .Text = "^p"    '^l for soft lines, _
                        ^t for tabs, etc.
        .Forward = True
        .Execute
    End With
End Sub 
```

我认为您需要对这些可能的解决方案进行一些实验。

# mongodb - Spring mvc，由于空值，不在表单中的文件将被清除

> ID：16031934
> 
> 赞同：0
> 
> 时间：2013-04-16T08:14:03.807
> 
> 标签：mongodb, spring-mvc, data-binding, modelattribute

我有一个简单的 POJO：

```
@Document(collection = "questions")
public class Question {

    private String title;

    private Date createdAt;
    //..... all the getter and setters
} 
```

我没有在编辑表单上添加 createdAt，因为它不应该在创建后更改。但是由于绑定，更新控制器方法将在 createdAt 中获得空值。

```
@RequestMapping(method = RequestMethod.PUT, produces = "text/html")
public String update(@Valid Question question, BindingResult bindingResult,
        Model uiModel, HttpServletRequest httpServletRequest) {
    if (bindingResult.hasErrors()) {
        populateEditForm(uiModel, question);
        return "questions/update";
    }
    uiModel.asMap().clear();
    questionRepository.save(question);
    return "redirect:/questions/"
            + encodeUrlPathSegment(question.getId().toString(),
                    httpServletRequest);
} 
```

因此，更新问题后，createdAt 字段将被清除。知道如何解决吗？我不想在没有 createdAt 字段的情况下创建另一个类并进行更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:25:52.060

您可以在表单中添加一个隐藏字段，预先填充 createdAt。

# c# - 在正则表达式中，如何在以大写开头的每个单词之间添加一个额外的空格

> ID：16031935
> 
> 赞同：3
> 
> 时间：2013-04-16T08:14:08.970
> 
> 标签：c#, regex

我有一个字符串：`CategoryName`

我需要在`Category`和之间添加空格`Name`。

所以我必须在每个大写字母之前插入一个空格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T08:20:51.247

```
var input = "CategoryName";
var result = Regex.Replace(input, "([a-z])([A-Z])", @"$1 $2"); //Category Name 
```

更新（这会将大写字母序列视为一个单词）

```
var input = "SimpleHTTPRequest";
var result = Regex.Replace(input, "([a-z]|[A-Z]{2,})([A-Z])", @"$1 $2");
//Simple HTTP Request 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T08:20:27.230

这段代码将完成这项工作

```
var source = "CategoryName";
var nameConvert = new Regex(@"((?<=[a-z])[A-Z]|(?<!^|\s)[A-Z][a-z])");
var converted = nameConvert.Replace(source, " $1"); 
```

这会将多个大写字母放在一起，例如`FearTheCIAReally`变成`Fear The CIA Really`

解释正则表达式：

*   `(`开始捕获组 $1
*   `(?<=[a-z])[A-Z]`大写字母前面是小写字母（不要捕获小写字母）
*   `|`或者
*   `(?<!^|\s)`前面的字符不是空格或字符串的开头，但不捕获
*   `[A-Z]`大写字母
*   `[a-z]`后跟一个小写字母
*   `)`结束捕获组 1

实际上，我将其作为我一直使用的库函数

```
public static class StringExtensions {

   private static readonly Regex NameConvert =
                new Regex(@"((?<=[a-z])[A-Z]|(?<!^|\s)[A-Z][a-z])");

   public static string ToDisplayFormat(this string name) {
     return string.IsNullOrEmpty(name) ? 
       String.Empty :
       NameConvert.Replace(name," $1");
   }
} 
```

然后我可以在代码中使用它

```
var name="CategoryName";
var displayName = name.ToDisplayFormat(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:17:28.430

```
([A-Z?])[_ ]?([a-z]) 
```

试试这个正则表达式。

希望能帮助到你。

# android - 我想在列表视图中检测哪个 onFling 事件的 ListItem

> ID：16031936
> 
> 赞同：3
> 
> 时间：2013-04-16T08:14:13.220
> 
> 标签：android, listview

当识别出左右交换的投掷事件时，我需要更改列表项的视图（在 ListView 中）。

我能够识别出投掷事件，但问题是 **我如何确定该投掷事件发生在哪个项目（我想知道列表中的位置）上。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:30:36.847

I'm not sure if it's the best way but you can try something like this:

1.  get screen height
2.  count currently visible items (listView.getLastVisiblePosition() - listView.getFirstVisiblePosition())
3.  calculate height of one item (I assume here that all items have the same height): screenheight/numOfItems
4.  if you have Y coordinate of your touch event when fling starts you can calculate which item from the top was clicked: posY/itemHeight
5.  now you can get your item: listView.getItemAtPosition(listView.getFirstVisiblePosition() + valueCalculatedInPreviousPoint)

I didn't tested it so it may not work, it's just an idea.

EDIT: And there is also this lib: [https://github.com/47deg/android-swipelistview](https://github.com/47deg/android-swipelistview) you can use it or look how they implemented it.

# json - 为服务器端 JSON-RPC 寻找 ActionScript 库

> ID：16031939
> 
> 赞同：-1
> 
> 时间：2013-04-16T08:14:19.200
> 
> 标签：json, flash, apache-flex, actionscript, json-rpc

我计划通过 JSON-RPC 在我的 Flex 应用程序中集成 RPC。我在网上搜索并已经找到了用于调用远程方法的库，但我还需要自己提供方法。我发现的所有库似乎都没有这个功能。
是否有任何 ActionScript 库可以通过 JSON-RPC 提供方法？

亲切的问候，
马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:29:10.830

如果您使用 playerGlobal 版本 10 或更高版本，则会自动包含它，您可以直接调用 JSON.encode 或 JSON.decode 方法。PlayerGlobal 10以下的版本，可以找AS3CoreLib。

# c - 我们可以在头文件中使用#if 0 吗？

> ID：16031942
> 
> 赞同：-1
> 
> 时间：2013-04-16T08:14:20.183
> 
> 标签：c, header

我有一些代码需要删除，我使用了：

```
#if 0
#endif 
```

从源代码中删除它，但是当我尝试从头文件中删除它时，会出现一些错误，例如：

> `expected unqualified-id before '/' token`

我检查了一下，它抱怨的线路周围没有问题，那是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:18:48.580

答案是肯定的。

## 但...

请注意，您可能会禁用一段重要的代码，例如：

```
#define XYZ

#if 0

#undef  XYZ
#define XYZ 1

#endif

int main()
{
    XYZ / 1;  // error: expected primary-expression before '/' token
} 
```

编译器会忽略 和 之间的代码`#if 0`，`#endif`它不会看到`#define XYZ 1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:17:04.713

关于你的问题

> 我们可以在头文件中使用#if 0 吗？

答案是可以的

而你得到它的错误是由于其他原因。

# asp.net-mvc-3 - 使用实体框架将多语言文本插入数据库

> ID：16031946
> 
> 赞同：0
> 
> 时间：2013-04-16T08:14:31.550
> 
> 标签：asp.net-mvc-3, entity-framework-4

为了使用实体框架向表中插入值，我使用了这个：

```
db.FileWavs.AddObject(wav);
db.SaveChanges(); 
```

要插入外语文本，我在值前面的查询中使用了 N：

```
INSERT INTO FileWav (Description) values( N'थिच्नुहोस' ) 
```

但是我如何在上面的实体框架代码中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:19:27.960

你不需要在实体框架中做任何事情，只需在数据库中创建你的字段 nvarchar() 就可以了，然后你可以传递任何 UTF-8 而不对实体框架做任何事情。

# javascript - 解除绑定 TokenInput

> ID：16031948
> 
> 赞同：0
> 
> 时间：2013-04-16T08:14:40.673
> 
> 标签：javascript, jquery, jquery-tokeninput

是否有任何已定义的方法来取消绑定令牌输入，我面临的问题是我正在使用变量跟踪绑定，该变量适用于每个浏览器，但有时它仅在 IE8 中绑定元素两次。所以，我在想为什么不在绑定之前解绑它，但在支持文档中找不到任何方法。任何其他解决方案也将受到赞赏。

# gcc - 修改 gcc 和 gcov 后程序崩溃

> ID：16031954
> 
> 赞同：0
> 
> 时间：2013-04-16T08:15:02.820
> 
> 标签：gcc, x86-64, gcov

最近我正在尝试修改 GCC 和 gcov 来收集程序的执行顺序。众所周知，gcc 会在基本块之间的 arcs 上检测代码，以计算 arc 的执行次数。所以我在弧上检测了一个函数，该函数将打印出该弧的编号，因此我可以收集程序执行顺序。它适用于 x86 和 x86_64 上的 c 程序，也适用于 x86 的 c++ 程序。但是对于 x86_64 上的 c++ 程序，程序会因段错误而崩溃。编译没有问题。我使用的操作系统是 CentOS 6.4。gcc 的版本是 3.4.5。有人有什么建议吗？

示例程序：

```
#include <iostream> using namespace std; int main(){cout<<"hello world"<<endl;} 
```

如果我在 x86_64 模式下编译程序。当遇到 cout CALL 时，程序因段错误而崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:00:43.457

也许您可以尝试动态二进制翻译框架，例如[DynamoRIO](http://dynamorio.org/)或[Pin](http://software.intel.com/en-us/articles/pin-a-dynamic-binary-instrumentation-tool)。这些工具提供了比您需要的更多的灵活性，但它们允许您在每个基本块的开始/结束处注入代码。然后你想要做的是保存/恢复标志和寄存器（并可能重新对齐堆栈），并调用一个函数。DynamoRIO 内置了类似的功能，称为“干净调用”。我认为 Pin 还可以通过潜在的更高级别的接口实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T14:22:47.413

我做了和你一样的事`3.5.0-23-generic #35~precise1-Ubuntu SMP Fri Jan 25 17:13:26 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux`

`#include <iostream>`

`使用命名空间标准；

主函数（）

{

```
 cout<<"hello world"<<endl; 
```

}`

`g++ -ftest-coverage -fprofile-arcs hello.cpp -o hello` `hello.gcno`生成带有文件的上面编译的代码。

执行后生成 ./hello`hello.gcda`文件。

所以一旦检查你的 gcc 版本。

我的 gcc 版本是`gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:06:14.030

好的，通过另一个晚上的调试就可以了。我发现函数 emit_library_call 只会生成 asm 代码来调用我的函数，而不是保护上下文（寄存器）。因此，在发出代码之前或之后的函数调用可能会由于上下文不统一而失败。而 x86_64 asm 使用与 x86 不同的寄存器。所以在 x86 平台上运行良好可能只是偶然。我需要一个可以发出库函数调用并保护上下文的函数 api。也许我应该再写一个 emit_library_call。

# c# - 日期格式 PATTERN 验证，不是日期验证

> ID：16031957
> 
> 赞同：2
> 
> 时间：2013-04-16T08:15:21.110
> 
> 标签：c#, asp.net, .net, validation, datetime

我有一个`TextBox`用户可以输入他们喜欢的日期格式模式的地方（例如 dd/M/yyyy、yy-dd-mm）。

我怎样才能验证这一点`Textbox`？我可以通过将`Text`this 的属性设置`Textbox`为`cultureInfo.DateTimeFormat.ShortDatePattern`然后捕获抛出的异常在服务器端执行此操作，但我想使用 ASP.NET 验证器（a`CompareValidator`或`RegularExpressionValidator`）在客户端执行此操作。

这是一个很难搜索的问题，因为所有出现的都是日期格式验证问题。

# python - 计算字典中键值对的数量

> ID：16031964
> 
> 赞同：1
> 
> 时间：2013-04-16T08:15:33.587
> 
> 标签：python, dictionary, python-2.7

我是第一次使用字典。我想知道如何计算每个字典中有多少个键值对，其中值是“可用的”。我知道我可能使用`len()`.

```
seats = {
  'A': {'A1':'available', 'A2':'unavailable', 'A3':'available'},
  'B': {'B1':'unavailable', 'B2':'available', 'B3':'available'}, 
  'C': {'C1':'available', 'C2':'available', 'C3':'unavailable'}, 
  'D': {'D1':'unavailable', 'D2':'available', 'D3':'available'} }

rowChoice = raw_input('What row? >> ')
numSeats = input('How many Seats? >> ') 
```

我对此很陌生，所以我真的需要一个非常简单的方法，可能还有一些注释或解释它是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:27:30.690

我将使用以下语句来计算每个嵌套字典的值：

```
{k: sum(1 for val in v.itervalues() if val == 'available') for k, v in seats.iteritems()} 
```

`seats`这将使用与每个值是可用座位数相同的键构建一个新字典。`sum(..)`with 生成器技巧有效地计算包含的每行字典中值等于 的所有值`'available'`。

结果：

```
{'A': 2, 'C': 2, 'B': 2, 'D': 2} 
```

要显示特定行的可用座位，您可以过滤并使用`len()`：

```
row_available = [k for k, v in seats[rowChoice].iteritems() if v == 'available']
avail_count = len(row_available)
if avail_count:
    print 'there {is_are} {count} seat{plural} available in row {rowChoice}, seat{plural} {seats}'.format(
        is_are='are' if avail_count > 1 else 'is', count=avail_count, 
        plural='s' if avail_count > 1 else '', rowChoice=rowChoice, 
        seats=row_available[0] if avail_count == 1 else ' and '.join([', '.join(row_available[:-1]), row_available[-1]])) 
```

对于`rowChoice = 'A'`此打印：

```
there are 2 seats available in row A, seats A1 and A3 
```

但它也会针对更多或更少的座位进行调整以形成连贯的句子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T08:36:53.837

使用`collections.Counter`和`itertools.chain`：

```
from collections import Counter
from itertools import chain

print Counter(chain.from_iterable(i.itervalues() for i in seats.itervalues()))
# Counter({'available': 8, 'unavailable': 4}) 
```

# ios - 如何从 NSMutableArray 的循环中添加 NSString

> ID：16031966
> 
> 赞同：0
> 
> 时间：2013-04-16T08:15:35.477
> 
> 标签：ios, objective-c, nsstring, nsmutablearray

我想在 NSmutableArray 中添加 NSString Name 但我不知道。我从 wamp 服务器中的 url 获得 5 个 NSString 名称，我想在 NSMutableArray 中添加这些名称。

这是我的代码，但不工作！！！：

```
 NSMutableArray *file;
for (int j=0; j < 5; j++) {
        NSString *fileName = [[NSString alloc]initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://192.168.1.101/janatan/filemanager.php?dir=root&file=%d&name",j]]];
        NSLog(@"%@",fileName);
        [file addObject:fileName]  //right???
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T08:18:58.537

你没有分配`NSMutableArray`

```
NSMutableArray *file = [[NSMutableArray alloc] initWithCapacity:5]; 
```

如果您不确定预先添加到数组中的元素数量，您可以使用

```
NSMutableArray *file = [[NSMutableArray alloc] init]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T08:50:44.623

首先，`NSMutableArray`必须分配。

其次，必须避免使用[幻数。](http://en.wikipedia.org/wiki/Magic_number_%28programming%29)

接下来应该通过replace来提高代码的可读性

```
NSString *fileName = [[NSString alloc]initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://192.168.1.101/janatan/filemanager.php?dir=root&file=%d&name",j]]]; 
```

到更方便的地方。而且，这里的内存是分配的，但从未释放。

您的代码可能如下所示：

```
const int numberOfFiles = 5;
NSMutableArray *file = [NSMutableArray array]
for(int i = 0; i < numberOfFiles; ++i){
      NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://192.168.1.101/janatan/filemanager.php?dir=root&file=%d&name", i]];
      NSString *fileName = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];
      [file addObject:fileName];
 } 
```

但是在这里我们可以发现一些问题。例如，如果在服务器端更改 url，您将重写代码。如果元素的数量改变，它是相同的。所以最好找到一种方法来避免这种依赖。

# c# - 如何通过 c# 代码向控制台应用程序提供用户输入

> ID：16031967
> 
> 赞同：0
> 
> 时间：2013-04-16T08:15:35.867
> 
> 标签：c#, ipc

我正在通过我在 c# 中的另一个 Windows 应用程序运行控制台应用程序 exe（用 c# 开发）。

```
 Process p = Process.Start("strExePath"); 
```

我运行的控制台应用程序需要一些用户输入，我想通过运行控制台 exe 文件的 Windows 应用程序的 c# 代码提供这些用户输入。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T08:19:05.723

您可以为您通过 启动的控制台应用程序重定向标准输入`Process.Start()`。

为此，您需要使用[`ProcessStartInfo.RedirectStandardInput`](http://msdn.microsoft.com/en-gb/library/system.diagnostics.processstartinfo.redirectstandardinput.aspx).

我链接的 MSDN 文档中有一个完整的示例。

此外，这是一个包装类，您可能可以根据自己的需要进行调整。（代码有些陈旧，因此它没有使用最新的 C# 功能，例如`Tasks`，但希望它仍能演示您需要做什么。）

请注意，要在同时重定向输入*和*输出时使 I/O 重定向工作而不会出现死锁，您*必须*使用单独的线程来处理 I/O：

```
/// <summary>
/// Encapsulates an executable program.
/// This class makes it easy to run a console app and have that app's output appear
/// in the parent console's window, and to redirect input and output from/to files.
/// </summary>
/// <remarks>
/// To use this class:
/// (1) Create an instance.
/// (2) Set the ProgramFileName property if a filename wasn't specified in the constructor.
/// (3) Set other properties if required.
/// (4) Call Run().
/// </remarks>

public class Executable
{
    #region Constructor

    /// <summary>Constructor.</summary>
    /// <param name="programFileName">Name of the program file to run.</param>

    public Executable(string programFileName)
    {
        ProgramFileName = programFileName;

        _processStartInfo.ErrorDialog            = false;
        _processStartInfo.CreateNoWindow         = false;
        _processStartInfo.UseShellExecute        = false;
        _processStartInfo.RedirectStandardOutput = false;
        _processStartInfo.RedirectStandardError  = false;
        _processStartInfo.RedirectStandardInput  = false;
        _processStartInfo.WindowStyle            = ProcessWindowStyle.Hidden;
        _processStartInfo.Arguments              = "";
    }

    /// <summary>Construct with an empty executable name.</summary>

    public Executable(): this(string.Empty)
    {
    }

    #endregion  // Constructor

    #region Public Properties

    /// <summary>The filename (full pathname) of the executable.</summary>

    public string ProgramFileName
    {
        get
        {
            return _processStartInfo.FileName;
        }

        set
        {
            _processStartInfo.FileName = value;
        }
    }

    /// <summary> command-line arguments passed to the executable when run.</summary>

    public string Arguments
    {
        get
        {
            return _processStartInfo.Arguments;
        }

        set
        {
            _processStartInfo.Arguments = value;
        }
    }

    /// <summary> The working directory set for the executable when run. </summary>

    public string WorkingDirectory
    {
        get
        {
            return _processStartInfo.WorkingDirectory;
        }

        set
        {
            _processStartInfo.WorkingDirectory = value;
        }
    }

    /// <summary>
    /// The file to be used if standard input is redirected,
    /// or null or string.Empty to not redirect standard input.
    /// </summary>

    public string StandardInputFileName
    {
        set
        {
            _standardInputFileName = value;
            _processStartInfo.RedirectStandardInput = !string.IsNullOrEmpty(value);
        }
        get
        {
            return _standardInputFileName;
        }
    }

    /// <summary>
    /// The file to be used if standard output is redirected,
    /// or null or string.Empty to not redirect standard output.
    /// </summary>

    public string StandardOutputFileName
    {
        set
        {
            _standardOutputFileName = value;
            _processStartInfo.RedirectStandardOutput = !string.IsNullOrEmpty(value);
        }

        get
        {
            return _standardOutputFileName;
        }
    }

    /// <summary>
    /// The file to be used if standard error is redirected,
    /// or null or string.Empty to not redirect standard error.
    /// </summary>

    public string StandardErrorFileName
    {
        set
        {
            _standardErrorFileName = value;
            _processStartInfo.RedirectStandardError = !string.IsNullOrEmpty(value);
        }

        get
        {
            return _standardErrorFileName;
        }
    }

    #endregion  // Public Properties

    #region Public Methods

    /// <summary>Run the executable and wait until the it has terminated.</summary>
    /// <returns>The exit code returned from the executable.</returns>

    public int Run()
    {
        Thread standardInputThread  = null;
        Thread standardOutputThread = null;
        Thread standardErrorThread  = null;

        _standardInput  = null;
        _standardError  = null;
        _standardOutput = null;

        int exitCode = -1;

        try
        {
            using (Process process = new Process())
            {
                process.StartInfo = _processStartInfo;
                process.Start();

                if (process.StartInfo.RedirectStandardInput)
                {
                    _standardInput = process.StandardInput;
                    standardInputThread = startThread(new ThreadStart(supplyStandardInput), "StandardInput");
                }

                if (process.StartInfo.RedirectStandardError)
                {
                    _standardError = process.StandardError;
                    standardErrorThread = startThread(new ThreadStart(writeStandardError), "StandardError");
                }

                if (process.StartInfo.RedirectStandardOutput)
                {
                    _standardOutput = process.StandardOutput;
                    standardOutputThread = startThread(new ThreadStart(writeStandardOutput), "StandardOutput");
                }

                process.WaitForExit();
                exitCode = process.ExitCode;
            }
        }

        finally  // Ensure that the threads do not persist beyond the process being run
        {
            if (standardInputThread != null)
                standardInputThread.Join();

            if (standardOutputThread != null)
                standardOutputThread.Join();

            if (standardErrorThread != null)
                standardErrorThread.Join();
        }

        return exitCode;
    }

    #endregion  // Public Methods

    #region Private Methods

    private static Thread startThread(ThreadStart startInfo, string name)
    {
        Thread t = new Thread(startInfo);
        t.IsBackground = true ;
        t.Name = name;
        t.Start();
        return t;
    }

    /// <summary>Thread which supplies standard input from the appropriate file to the running executable.</summary>

    private void supplyStandardInput()
    {
        // feed text from the file a line at a time into the standard input stream

        // NOTE: THERE MAY BE ISSUES RELATED TO CHARACTER ENCODING HERE -- REQUIRES INVESTIGATION
        using (StreamReader reader = File.OpenText(_standardInputFileName))
        using (StreamWriter writer = _standardInput)
        {
            writer.AutoFlush = true;

            for (;;)
            {
                string textLine = reader.ReadLine();

                if (textLine == null)
                    break;

                writer.WriteLine(textLine);
            }
        }
    }

    /// <summary>Thread which outputs standard output from the running executable to the appropriate file.</summary>

    private void writeStandardOutput()
    {
        // NOTE: THERE MAY BE ISSUES RELATED TO CHARACTER ENCODING HERE -- REQUIRES INVESTIGATION
        using (StreamWriter writer = File.CreateText(_standardOutputFileName))
        using (StreamReader reader = _standardOutput)
        {
            writer.AutoFlush = true;

            for (;;)
            {
                string textLine = reader.ReadLine();

                if (textLine == null)
                    break;

                writer.WriteLine(textLine);
            }
        }

        if (File.Exists(_standardOutputFileName))
        {
            FileInfo info = new FileInfo(_standardOutputFileName);

            // if the error info is empty or just contains eof etc.

            if (info.Length < 4)
                info.Delete();
        }
    }

    /// <summary>Thread which outputs standard error output from the running executable to the appropriate file.</summary>

    private void writeStandardError()
    {
        // NOTE: THERE MAY BE ISSUES RELATED TO CHARACTER ENCODING HERE -- REQUIRES INVESTIGATION
        using (StreamWriter writer = File.CreateText(_standardErrorFileName))
        using (StreamReader reader = _standardError)
        {
            writer.AutoFlush = true;

            for (;;)
            {
                string textLine = reader.ReadLine();

                if (textLine == null)
                    break;

                writer.WriteLine(textLine);
            }
        }

        if (File.Exists(_standardErrorFileName))
        {
            FileInfo info = new FileInfo(_standardErrorFileName);

            // if the error info is empty or just contains eof etc.

            if (info.Length < 4)
                info.Delete();
        }
    }

    #endregion  // Private Methods

    #region Private Fields

    private StreamReader _standardError  ;
    private StreamReader _standardOutput ;
    private StreamWriter _standardInput  ;

    private string _standardInputFileName;
    private string _standardOutputFileName;
    private string _standardErrorFileName;

    ProcessStartInfo _processStartInfo = new ProcessStartInfo();

    #endregion  // Private Fields
} 
```

# rss - 无法解析 RSS 提要

> ID：16031969
> 
> 赞同：4
> 
> 时间：2013-04-16T08:15:37.620
> 
> 标签：rss, feed, scrapy, feedparser

我正在尝试使用 python 中的 feedparser 解析来自 url 的 RSS 提要。

```
>>> import feedparser 
>>> d = feedparser.parse('http://www.shop.inonit.in/RSSFeedDetails.aspx?PID=801')
>>> d
{'feed': {'summary': u'<span><h1>Server Error in \'/mobile\' Application.<hr color="silver" size="1" width="100%" /></h1>\n\n            
<h2> <i>Attempted to divide by zero.</i> </h2></span>\n\n            <font face="Arial, Helvetica, Geneva, SunSans-Regular, sans-serif ">\n\n            <b> Description: </b>An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.\n\n            <br /><br />\n\n            <b> Exception Details: </b>System.DivideByZeroException: Attempted to divide by zero.<br /><br />\n\n            
<b>Source Error:</b> <br /><br />\n\n            <table bgcolor="#ffffcc" width="100%">\n               <tr>\n                  <td>\n                      <code>\n\nAn unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.</code>\n\n                  </td>\n               </tr>\n            </table>\n\n            <br />\n\n            <b>Stack Trace:</b> <br /><br />\n\n            <table bgcolor="#ffffcc" width="100%">\n               <tr>\n                  <td>\n                      <code><pre>\n\n[DivideByZeroException: Attempted to divide by zero.]\n   System.Decimal.FCallDivide(Decimal&amp; d1, Decimal&amp; d2) +0\n   System.Decimal.Divide(Decimal d1, Decimal d2) +17\n   Martjack.CMS.PageControlsModelComp.GetPluginDataEnt(PageControlEnt objPageControlEnt, MerchantENT MerchantEnt, PageControlModel&amp; objPageControlModel, ProductEnt_RE ProductEnt, String MobileVersion) +2324\n   
Martjack.CMS.PageControlsModelComp.GetPageControlOutputData(PageModel pagemodel, PageControlEnt objPageControlEnt, MerchantENT MerchantEnt, String seocid, String combiType, String MobileVersion, ProductEnt_RE ProductEnt, String siteurl) +694\n   Martjack.CMS.PageControlsModelComp.GetPageControlModels(PageModel Pagemodel, MerchantENT MerchantEnt, String seocid, String combiType, String MobileVersion, DNDPageControlViewCollection objDNDPageControlViewCollection, Boolean isdndrequest, Int64 pgcontrolid, String siteurl) +919\n   Martjack.CMS.PageModelComp.GetPageModel(MerchantENT MerchantEnt, Int32 predefinedPageId, Boolean isPredefined, ChannelType channel, String seocid, String Bid, String combiType, String MobileVersion, Boolean isDndRequest, 
DNDPageControlViewCollection ObjDNDPageControlViewCollection, Boolean ControlsInfo, Int64 pgcontrolid) +1717\n   MartJack.Facade.CMSFacade.GetPageModel(MerchantENT MerchantEnt, Int32 PageId, Boolean isPredefined, ChannelType channel, String seocid, String bid, String combitype, String mobileversion, Boolean isDndRequest, DNDPageControlViewCollection ObjDNDPageControlViewCollection, Boolean ControlsInfo, Int64 pgcontrolid) +119\n   MobileECommerce.MobileECommerce.ProductsController.GetPageModelByRequest(String seoid, String bid) +227\n   MobileECommerce.MobileECommerce.ProductsController.Index(String id, String seobrand, String category, String categoryparent) +54\n   lambda_method(Closure , ControllerBase , Object[] ) +272\n   
System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17\n   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +212\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +239\n   System.Web.Mvc.&lt;&gt;c__DisplayClass15.&lt;InvokeActionMethodWithFilters&gt;b__12() +56\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +282\n   System.Web.Mvc.&lt;&gt;c__DisplayClass17.&lt;InvokeActionMethodWithFilters&gt;b__14() +20\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +201\n   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +351\n   System.Web.Mvc.Controller.ExecuteCore() +99\n   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +94\n   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10\n   
System.Web.Mvc.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5() +43\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0() +21\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass8`1.&lt;BeginSynchronous&gt;b__7(IAsyncResult _) +12\n   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +53\n   System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +28\n   System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +15\n   System.Web.Mvc.&lt;&gt;c__DisplayClasse.&lt;EndProcessRequest&gt;b__d() +34\n   System.Web.Mvc.SecurityUtil.&lt;GetCallInAppTrustThunk&gt;b__0(Action f) +7\n   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +23\n   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +68\n   
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9\n   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +714\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +240\n</pre></code>\n\n                  </td>\n               </tr>\n            </table>\n\n            <br />\n\n            
<hr color="silver" size="1" width="100%" />\n\n            <b>Version Information:</b>\xa0Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272\n\n            </font>'}, 'status': 302, 'version': u'', 'encoding': u'utf-8', 'bozo': 1, 'headers': {'content-length': '11348', 'x-powered-by': 'ASP.NET', 'set-cookie': 'SERVERID=HAS14; path=/', 'originserver': 'HAS14', 'server': 'Microsoft-IIS/7.5', 'connection': 'close', 'cache-control': 'private', 'date': 'Tue, 16 Apr 2013 08:03:59 GMT', 'content-type': 'text/html; charset=utf-8', 'x-aspnet-version': '4.0.30319'}, 'href': 
u'http://www.shop.inonit.in/mobile/Products//NA/NA/0', 'namespaces': {}, 'entries': [], 'bozo_exception': SAXParseException('not well-formed (invalid token)',)} 
```

我在输出中一无所获，而如果您转到链接（[http://www.shop.inonit.in/RSSFeedDetails.aspx?PID=801](http://www.shop.inonit.in/RSSFeedDetails.aspx?PID=801)），它会显示很多东西！也许它正在将我重定向到其他一些不存在的页面（因为我尝试使用 scrapy 抓取该网站的各个页面，但由于我被重定向到一些不存在的 url，所以不能）。

对此的任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-27T14:28:16.357

你在使用代理吗？如果你是，这样做 -

```
import urllib2, feedparser
proxy = urllib2.ProxyHandler({"http":"proxy:port"})
d = feedparser.parse('http://www.shop.inonit.in/RSSFeedDetails.aspx?PID=801', handlers = [proxy]) 
```

# javascript - 如何将无序列表定位在一个圆圈中？

> ID：16031970
> 
> 赞同：2
> 
> 时间：2013-04-16T08:15:42.587
> 
> 标签：javascript, jquery, css, menu, hover

我想创建一个这样的页面，[但](http://www.templatemonster.com/demo/44155.html)我只是在学习 javascript/jquery。我真的很喜欢这个菜单，但我不知道如何将无序菜单列表定位成一个圆圈，然后如何制作悬停效果。

这是html菜单：

```
 <nav>
            <ul>
                <li><a href="#">Menu1</a></li>
                <li><a href="#">Menu2</a></li>
                <li><a href="#">Menu3</a></li>
                <li><a href="#">Menu4</a></li>
                <li><a href="#">Menu5</a></li>
                <li><a href="#">Menu6</a></li>
            </ul>
        </nav> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T09:40:57.787

[我试图在此jsFiddle 页面](http://jsfiddle.net/gahathat/zBtQv/1/)上重新创建您要查找的内容。它绝对不是没有错误的，但希望它能帮助你理解制作循环列表所需的 jQuery 和 CSS。

**CSS：**

```
a {
position: absolute;
text-decoration: none;
border: 1px solid black;
width:98px;
height:98px;
border-radius:50px;
line-height:100px;
text-align:center; 
```

}

我以绝对方式定位链接，以便我们可以操纵它们的顶部/左侧位置。宽度和高度约为边框半径的一半，这将为每个链接提供圆形形状。css 的其余部分是定位文本。

**jQuery代码的开始：**

```
$(function() {
circle_radius = 100;
$links = $('nav ul li a');
total_links = $links.size(); 
```

第一个变量`circle_radius`是圆形菜单本身的半径（不是各个链接）。

`$links`获取您的导航标签中的完整链接列表，并`total_links`存储您在该导航中有多少链接。这对于确定每个链接的位置很重要。

**更多 jQuery 代码：**

```
$links.each(function(index) {
    $(this).attr('data-index',index);
    animateCircle($(this), 1);
}); 
```

我们要做的第一件事是遍历每个单独的链接，`$links`并为其添加一个索引值并调用`animateCircle(...)`. 我们传递链接元素本身和另一个值（该值将用于鼠标悬停效果）。

**圆形定位：**

```
function animateCircle($link, expansion_scale) {
    index = $link.attr('data-index');
    radians = 2*Math.PI*(index/total_links);
    x = -(Math.sin(radians)*circle_radius*expansion_scale);
    y = -(Math.cos(radians)*circle_radius*expansion_scale);
    $link.animate({
        top: x+'px',
        left: y+'px'
    }, 200);
} 
```

在`animateCircle(...)`中，我们首先获得`$link`的索引。然后我们使用一些好的旧三角函数`$link`使用索引和链接总数来计算 ' 位置的角度（以弧度为单位）。接下来，我们使用`radians`来计算 的 x 和 y 位置`$link`。注意，我在`expansion_scale`这里调用了一些东西，这是我们传递给这个函数的东西。目前，这只是 1，因此不会影响 x 和 y 值。最后，一旦我们有了 x 和 y 值，我们就`$link`可以使用新值对 的顶部和左侧属性进行动画处理。

**在鼠标悬停时为圆圈设置动画：**

```
$('li a').hover(function() {
    animateCircle($(this), 1.5)
}, function() {
    animateCircle($(this), 1)
}); 
```

这个效果现在很容易用`animateCircle(...)`. 这就是`expansion_scale`最终发挥作用的地方。当我们将鼠标悬停在链接上时，它将`animateCircle(...)`以`expansion_scale`1.5 的值调用，这使得该特定链接比其他链接移动 1.5 倍，从而为您提供简洁的效果。最后，当您移出鼠标时，它会将链接移回其原始位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T20:42:02.333

这个菜单也很酷：[https ://github.com/liri/moonMenuJS](https://github.com/liri/moonMenuJS)

试试看，你可以创建一些漂亮的样式来应用它。

# jquery - 如何在 datatables.net dataTable 中编辑单元格值

> ID：16031972
> 
> 赞同：0
> 
> 时间：2013-04-16T08:16:05.440
> 
> 标签：jquery, jquery-datatables

我有一个小问题。我有一个作为 JSON 数据返回的查询，我正在将其加载到 datatables.net 的数据表中。我有 0,1 或 2 的值，我想将它们更改为是、否或 n/a。

我对js一无所知，我试图实现我在网站上读到的内容，但我仍然无法让它工作。任何帮助，将不胜感激。

这就是我到目前为止所拥有的

```
var oTable = $('#test').dataTable({
"aaData": {{ $ecl_staff }},
"sPaginationType": "full_numbers",
"aoColumns": [ 
{ "mDataProp": "id" },
{ "mDataProp": "full_name" },
{ "mDataProp": "user_number" },
{ "mDataProp": "campus" },
{ "mDataProp": "email" },
{ "mDataProp": "mobile" },
{ "mDataProp": "co_ordinator" },
{ "mDataProp": "job_title" },
{ "mDataProp": "contractor" },
{ "mDataProp": "returning" },
{ "sDefaultContent": "id",
"fnRender": function (oObj) { return "<span class='button-group compact'><a         class='button icon-gear with-tooltip modal_link' title='Edit user' href='{{ URL::base() }}/admin/staff/edit_staff/" + oObj.aData['id'] + "'></a> <a class='button icon-card with-tooltip modal_link' title='View Profile' href='{{ URL::base() }}/admin/staff/edit_staff/" + oObj.aData['id'] + "'></a></span>";
                 }
            }
        ],

        "sDom": '<"tbl_tools"CT<"clear">>,<"tbl-tools-searchbox"fl<"clear">>,<"table_content"t>,<"widget-bottom"ip<"clear">>',
            "oTableTools": {
            "sSwfPath": "../swf/copy_cvs_xls_pdf.swf"
            }, 

    });

    $("div.tbl-tools-searchbox select").addClass('blue-gradient glossy replacement'); 
    $("div.tbl_tools").addClass('hidden-on-mobile');                

    $("tfoot input").keyup( function () {
    var id = $(this).attr('id').split("-")[1];
    oTable.fnFilter( this.value, id );
    }); 
```

,`{ "mDataProp": "returning" }`数据是包含 0,1 和 2 的列。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:54:15.233

您正在尝试做的很可能是

参考 - [DataTables.net Column Usage](http://www.datatables.net/usage/columns)

```
var oTable = $('#test').dataTable({
    "aaData": {{ $ecl_staff }},
    "sPaginationType": "full_numbers",
    "aoColumnDefs": [ {
        "aTargets": [ 9 ],// index of the returning column
        "mRender": function ( data, type, full ) {
            if(data == 0){
                return "No";
            }
            if(data == 1){
                return "Yes";
            }
            if(data == 2){
                return "N/A";
            }
        }
    } ],
    "aoColumnDefs": [ {
        "aTargets": [ 10 ],// index of the id column
        "mRender": function ( data, type, full ) {
            return "<span class='button-group compact'><a class='button icon-gear with-tooltip modal_link' title='Edit user' href='{{ URL::base() }}/admin/staff/edit_staff/" + data + "'></a> <a class='button icon-card with-tooltip modal_link' title='View Profile' href='{{ URL::base() }}/admin/staff/edit_staff/" + data + "'></a></span>";
        }
    } ],
    "sDom": '<"tbl_tools"CT<"clear">>,<"tbl-tools-searchbox"fl<"clear">>,<"table_content"t>,<"widget-bottom"ip<"clear">>',
    "oTableTools": {
        "sSwfPath": "../swf/copy_cvs_xls_pdf.swf"
     }
}); 
```

# jquery - 通过其他文件中的 jQuery 调用隐藏动态 CSS 类的表

> ID：16031973
> 
> 赞同：0
> 
> 时间：2013-04-16T08:16:05.630
> 
> 标签：jquery, css

我有几个表是在 reader.php 的 foreach 中生成的

```
<table class="object_list_<?php echo $title; ?>"> 
```

在同一个文件中有一个 jquery 调用的链接：

```
<a href="#" onclick="show_object('<?php echo $itemId.','.$title; ?>')"><?php echo (string)$flat.'</a><br />'; ?> 
```

我在处理程序文件 catalogue.php 中的 jQuery 函数如下所示：

```
<script>
    function show_object(itemid,object_type){
        var request = $.ajax({
            url: "show_object.php",
            type: "GET",
            data: "id="+ itemid,
            dataType: "html"
        });
        $(table['.object_list_' + object_type]).hide();
        request.done(function(msg) {
            $(".show_object").append(msg);          
        });
        request.fail(function(jqXHR, textStatus) {
            alert( "Request failed: " + textStatus );
        });
    }       
</script> 
```

问题在于 hide() 函数

```
$(table['.object_list_' + object_type]).hide(); 
```

这不起作用。请注意，这与其他文件中`object_type`的相同`$title`，我通过 a href javascript 调用传递它。

我一直在stackoverflow和google上搜索，但我找不到错误。它正确加载 show_object.php，但不隐藏表格。

我也尝试了其他几个版本，例如：

```
$('.object_list_' + object_type).hide(); 
```

并首先在变量中添加数据，然后在隐藏函数中添加数据.. 无济于事

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:22:50.800

```
$(table['.object_list_' + object_type]).hide(); 
```

是不正确的，你必须使用你的第二个陈述：

```
$('.object_list_' + object_type).hide(); 
```

甚至更好

```
$('table.object_list_' + object_type).hide(); 
```

尝试在“隐藏”调用之前提醒“object_type”，并尝试通过 firebug/chrome 控制台手动执行它，我认为你有一个错误。

发生了什么 ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:40:54.157

您是否尝试过使用表格上的类而不是内联 onclick 来连接它？

您可以使用 jQuery 从表中提取您需要的任何信息。这是一个粗略的大纲，希望这有帮助吗？在这种情况下，我会将您想要的东西的 id 放在 a 的 data-id="" 属性中，这样可以省去麻烦。

```
$('table.class a').click(function(e){

    /* Stop normal a click action by preventing default */
    e.preventDefault();

    /* Get the item id and define a $this to use later */
    var itemId = $(this).attr('data-id'), $this = $(this);

    /* Use nicer $.get syntax, pass the id */
    $.get('show_object.php',{
        id:itemId
    },function(data){

        /* Put your data in the target */
        $('target').append(data);

        /* Use the $this item to hide the a you clicked on */
        $this.hide();
    }
}); 
```

希望有帮助，如有必要，我可以尝试更具体的东西吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:36:34.597

感谢所有试图提供帮助的人！我犯了一个愚蠢的错误。

我必须用 ' 标记转移通过 javascript 传递的变量。

```
<a href="#" onclick="show_object('<?php echo $itemId."','".$title; ?>')"><?php echo (string)$flat.'</a><br />'; ?> 
```

输出必须是这样的：

```
<a href="#" onclick="show_object('2013084','Kerrostalot')">4h,k,sauna,terassi</a> 
```

javascript调用假定它们是一个变量，而不是两个..

我觉得好傻。。。

# php - 教义新属性/列定义不起作用

> ID：16031974
> 
> 赞同：0
> 
> 时间：2013-04-16T08:16:05.930
> 
> 标签：php, mysql, doctrine-orm

我在一个学说中添加了新的属性，如下所示：

```
/** @Column(type="string", length=150) **/
private $service_domain;

    /** @Column(type="string", length=150) **/
private $aauid; 
```

添加了 getter/setter 属性：

```
public function getServiceDomain() {

    return $this->service_domain;
}

public function setServiceDomain($domain) {
    $this->service_domain = $domain;
    return $this;
}

    public function getAAUID() {

    return $this->aauid;
}

public function setAAUID($aauid) {
    $this->aauid = $aauid;
    return $this;
} 
```

我也在数据库列中进行了相应的更改。 ![在此处输入图像描述](https://i.stack.imgur.com/LKoO1.png)

但是由于某些奇怪的原因，当我为这些属性赋值并保存实体时，除了我新添加的属性之外，所有其他属性都在保存：

```
$n->setServiceDomain("test");
$n->setAAUID("test"); 
```

您能否澄清我是否做错了什么，或者我是否还必须在任何其他部分进行更改？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:42:39.523

列定义中缺少 name 属性

```
/** @Column(name="service_domain", type="string", length=150) **/
private $service_domain;

/** @Column(name="aauid", type="string", length=150) **/
private $aauid; 
```

# objective-c - 访问 windowController 的按钮 From subView

> ID：16031978
> 
> 赞同：0
> 
> 时间：2013-04-16T08:16:35.867
> 
> 标签：objective-c, macos, cocoa

在我的 cocoa OS X 应用程序中，我有一个带有 xib 文件的**WindowController**和***两个*** **带有 xib 文件的ViewController**，我在 WindowController 中添加了一个自定义视图，我通过在单击时删除和添加这些视图来交换这两个子视图继续或下一步按钮。

```
[[theViewController view] removeFromSuperview];
self.theViewController = [[WelcomeInstallViewController alloc] initWithNibName:newView bundle:nil];
[innerInstallerView addSubview:[theViewController view]];
[[theViewController view] setFrame:[innerInstallerView bounds]]; 
```

现在在其中一个视图中，我有一个按钮需要禁用 WindowController 中的继续按钮。我已经查看了**NSNotificationCenter**，这是我的第一个 mac、cocoa、objective c 应用程序。我应该使用 NSNotificationCenter 吗？我很困惑，没有正确理解。

![在此处输入图像描述](https://i.stack.imgur.com/9AebS.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:41:48.730

给猫剥皮的方法有很多。。

最简单的方法包括向您添加一个插座`NSWindowController`并将按钮链接到 Interface Builder 中的该插座，然后在您需要的任何条件下处理按钮启用。

通知是松散耦合应用程序组件的一种好方法，例如，如果窗口控制器没有启动会触发按钮禁用/启用自身的状态更改。

其他可能性包括[NSUserInterfaceValidations](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSUserInterfaceValidations_Protocol/Reference/Reference.html)，这是 Cocoa 中的一种专用机制（协议），用于...

*允许用户界面元素的目标（例如菜单项或工具栏项）决定是否应启用用户界面元素。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:12:58.277

鉴于类似的设计要求（多个可加载的 XIB），我使用该`NSViewController`范例允许将逻辑附加到我加载到主视图中的子视图。在这种情况下，我将创建一个`NSViewController`具有 bool 属性的子类（我们称之为它`canContinue`），我将从主视图的按钮绑定到所有者的`subview.canContinue`.

如果你这样做，当你引入每个单独的子视图时，主视图将不得不加载视图控制器（它将负责加载 XIB），然后确保将`subview`所有者中的属性分配给指向`NSViewController`你加载。

# c# - 从项目参考中读取 appconfig

> ID：16031981
> 
> 赞同：0
> 
> 时间：2013-04-16T08:16:52.553
> 
> 标签：c#, configuration, app-config

在我的主项目（“Demo”）中，我添加了对某个项目（“Common”）的项目引用。在“Common”项目中，我有 app.config 文件，其中包含：

```
<configuration>
    <appSettings>
        <add key="test" value="123"/>
    </appSettings>
</configuration> 
```

和一个班级：

```
public class Class1
{
    public string Get()
    {
        return ConfigurationManager.AppSettings["test"];
    }
} 
```

在我的主程序（“演示”）上，我添加了以下代码：

```
class Program
{
    static void Main(string[] args)
    {
        Class1 c = new Class1();
        Console.WriteLine(c.Get());
        Console.ReadLine();
    }
} 
```

由于 app.config 在顶层配置模型上运行，因此无法正常工作。

我记得过去我在演示项目中添加了一个带有 configsection 节点的 app.config 文件。但我现在有一个问题要做 - 忘了怎么做。

有人能告诉我演示的 app.config 应该是什么样子吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:10:02.710

App.Config 和 Web.Config 总是从 man 可执行项目中读取。即您需要将 Common\app.config 添加/合并到您的 main\app.config

# rest - 对搜索 API 的休息调用突然停止工作，但它们在图形资源管理器中工作

> ID：16031982
> 
> 赞同：1
> 
> 时间：2013-04-16T08:16:56.243
> 
> 标签：rest, search, facebook-opengraph

今天早些时候成功地获取了对以下 URL 进行休息调用的数据：

```
https://graph.facebook.com/search?fields=id&q=res&type=event&access_token="my_auth_token" 
```

现在，当我尝试使用 curl 进行调用或将其粘贴到浏览器中时，我得到一个空数组。但是，当我将同一 URL 的末尾粘贴到图形浏览器工具中时，我得到一个包含数据的数组。知道发生了什么吗？

# c++ - 将操作数据存储在 memcached 中是个好主意吗？

> ID：16031984
> 
> 赞同：1
> 
> 时间：2013-04-16T08:16:59.797
> 
> 标签：c++, database, memcached, scalability

我在cpp上写了数据处理器，它应该处理很多请求并做很多计算，请求是相互连接的。现在我想到了简单的水平可扩展性。

将 memcached 与复制（每个处理器上的一个实例）一起使用来存储操作数据是一个好主意吗？这样每个处理器实例都可以在相同的时间内处理每个请求。

memcached 复制的速度和稳定性如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T08:28:29.730

非常快，memcached 的一个主要潜在缺点是它不是持久的。虽然使用缓存层时的一个常见设计考虑是“缓存中的数据可能随时消失”，但这可能会导致痛苦的预热时间和/或代价高昂的缓存踩踏事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:42:59.143

我会看看 Couchbase。 [http://www.couchbase.com/](http://www.couchbase.com/) 它将缓存的数据存储在 RAM 中，但也会定期将其刷新到磁盘，因此如果机器重新启动，数据仍然存在。

动态添加节点也很容易。

只是为了好玩，您还可以查看 Riak：[http](http://basho.com/riak/) ://basho.com/riak/ 。随着缓存需求的增长，很容易添加节点，并且很容易启动和运行。还专注于键/值存储，这对于缓存对象很有用。

# c# - 为什么不能控制留下finally语句？

> ID：16031985
> 
> 赞同：56
> 
> 时间：2013-04-16T08:17:11.387
> 
> 标签：c#, try-catch

当我将 a`return`放在`finally`语句块中时，编译器会告诉我：

> 控制不能离开 finally 子句的主体

例子：

```
try
{
}
catch
{
}
finally
{
    return;
} 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-04-16T08:24:25.923

考虑一下如果你`return 1`在`try`块`return 0`内部和`finally`块内部会发生什么......你的函数将试图返回两个值！`try`和的组合选项`catch`在控制流方面是详尽的。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-16T08:19:29.100

这是设计使然，并在 C# 规范中进行了描述：

> 将控制权转移到块外是`break`、`continue`或语句的编译时错误。当块中出现、或 语句时，语句的目标必须在同一块内，否则会发生编译时错误。`goto``finally``break``continue``goto``finally``finally`
> 
> **`return`语句出现在`finally`块中是编译时错误**。

此外，来自[MSDN 上的 C# 6.0 规范草案](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/statements#the-try-statement)：

> `return`语句出现在`finally`块中是编译时错误。

* * *

## 回答 #3

> 赞同：-9
> 
> 时间：2016-01-31T09:39:51.230

当前的答案解释了为什么这种情况发生得很好，但我也认为重要的是要注意**在不涉及返回值的情况下绕过这个约束是多么容易，并且该`finally`子句是方法中的最后一件事**（经常发生）：

```
try {}
catch {}
finally
{
    FinallyMethod();
} 
```

然后`FinallyMethod`你可以`return`尽可能多地使用语句

```
void FinallyMethod()
{
   //...
   if (x == y)
       return;
   else
       a = b;
   //etc.
} 
```