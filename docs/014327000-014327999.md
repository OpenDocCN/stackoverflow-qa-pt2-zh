# StackOverflow 问答 14327000-14327999

# python - 从 Django 将用户内容写入文件

> ID：14327001
> 
> 赞同：0
> 
> 时间：2013-01-14T21:27:36.517
> 
> 标签：python, django, file, input, output

基本上我的问题是这样的：我的目标是将用户输入的描述保存到一个文件中，该文件必须使用 ISBN 的名称保存

这是我的代码：

```
descr=request.POST['descr']
filename='/media/'+str(request.POST['isbn'])+'.txt'
f = open( filename, 'w+')
myfile = ContentFile(f)
myfile.write(descr)
myfile.close() 
```

进入settings.py

```
MEDIA_ROOT = 'C:/Users/7/toplibrary/media'
MEDIA_URL = '/media/' 
```

我不知道为什么，但它不起作用......有什么建议吗？

# node.js - 将对象推送到 Mongoose 中的混合字段数组

> ID：14327002
> 
> 赞同：2
> 
> 时间：2013-01-14T21:27:37.707
> 
> 标签：node.js, mongodb, mongoose

我无法将常规对象推送到猫鼬中的混合字段数组。

我正在尝试这个：

```
ME.update({_id: eventid},
          {$push: { rawdata: {x: packet.x, y: packet.y} }},
          {upsert:true}, function(err, data) {  
            console.log(err);
            }
    }); 
```

但是，这只会在 mongodb 数据库中产生一个 id 数组：

```
[rawdata] => Array (
[0] => Array (
    [_id] => MongoId Object (
        [$id] => 50f476a13ebe522960000005
    )
)
[1] => Array (
    [_id] => MongoId Object (
        [$id] => 50f476a13ebe522960000006
    )
)
[2] => Array (
    [_id] => MongoId Object (
        [$id] => 50f476a23ebe522960000007
    )
)
[3] => Array (
    [_id] => MongoId Object (
        [$id] => 50f476a23ebe522960000008
    )
)
[4] => Array (
    [_id] => MongoId Object (
        [$id] => 50f476a23ebe522960000009
    )
)
[5] => Array (
    [_id] => MongoId Object (
        [$id] => 50f476a33ebe52296000000a
    )
)
[6] => Array (
    [_id] => MongoId Object (
        [$id] => 50f476a33ebe52296000000b
    )
)
[7] => Array (
    [_id] => MongoId Object (
        [$id] => 50f476a33ebe52296000000c
    )
) 
```

完全不是我所期望的。怎么了？

首先我创建“原始数据”模式：（这里我使用一个空对象文字，我也使用了 Schema.Types.Mixed 一个）

```
{ rawdata: { type: {} } } 
```

然后我将它添加到更大的模式中，结果如下：

```
rawdata: 
[ { paths: [Object],
   subpaths: {},
   virtuals: [Object],
   nested: {},
   inherits: {},
   callQueue: [],
   _indexes: [],
   methods: {},
   statics: {},
   tree: [Object],
   _requiredpaths: undefined,
   options: [Object] } ], 
```

# maven - 激活资源过滤后编码错误

> ID：14327003
> 
> 赞同：8
> 
> 时间：2013-01-14T21:27:40.713
> 
> 标签：maven, encoding, character-encoding, maven-3

我正在开发一个基于 Maven 的 Web 项目。在我的网络模块中，我使用了不同语言的特定资源包（德语、西班牙……）。我所有的资源都是基于 UTF-8 的，一切都很好。现在有必要激活 maven 资源过滤以根据不同的 maven 配置文件替换一些配置。

我的 pom.xml：

```
.....
 <project xmlns="http://maven.apache.org/POM/4.0.0"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
.....

 <properties>
     <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
 </properties>    
 <build>
 <resources>
    <resource>
    <directory>src/main/resources</directory>
        <filtering>true</filtering>             
    </resource>      
 </resources>
 .... 
```

从这一刻起，我的战争文件包含编码错误的资源包。例如，德语变音符号不再正确显示在我的 Web 应用程序中。当我禁用资源过滤时，一切都恢复了。

我找到的唯一解决方案是将属性 project.build.sourceEncoding 设置为“ISO-8859-1”

```
<properties>
  <project.build.sourceEncoding>ISO-8859-1</project.build.sourceEncoding>
</properties> 
```

但我不明白为什么这是必要的？我所有的来源都是 UTF-8，而且我的应用程序也是基于 UTF-8 的？如果我需要添加一个资源包，例如日文字符，会发生什么？

我正在使用 Eclipse 4.2 和 Maven 3 在 linux 上开发

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-06T05:15:06.950

您确定您的资源包 (.properties) 正在使用`UTF-8`吗？

`java.util.Properties`假设`ISO-8859-1`资源包编码，请参阅[http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#load(java.io.Reader)](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#load(java.io.Reader))，我认为 Eclipse（以及IntelliJ IDEA) 采用这些文件 (.properties) 的默认编码。

因此，请使用文本编辑器检查项目源代码树中这些文件的当前编码，在 Windows**记事本 2**中可以帮助您。

然后`maven-resources-plugin`像这里指示的那样[配置在 Maven 中为不同的文件类型配置编码？](https://stackoverflow.com/questions/11144704/configure-encoding-for-different-filetypes-in-maven)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T21:57:05.970

您可以像这样在资源插件配置中指定编码：

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.6</version>
        <configuration>
          ...
          <encoding>UTF-8</encoding>
          ...
        </configuration>
      </plugin>
    </plugins>
    ...
  </build>
  ...
</project> 
```

[链接到文档](http://maven.apache.org/plugins/maven-resources-plugin/examples/encoding.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-25T13:49:34.373

我今天遇到了同样的问题。设置`project.build.sourceEncoding`为 UTF-8 将不起作用。所有过滤后的文件都将被复制进去`ISO-8859-1`（实际上我没有测试，但我确信它们没有被复制进去`UTF-8`）。
我的解决方案是声明两个`<resource>`部分。一个包含您真正需要过滤的所有文件。另一个用于复制其他资源并`<filtering>`设置为 false。
它对我有用，因为我不需要过滤 I18N 文件，并且构建时需要设置值的文件仅包含 ASCII 字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T11:09:59.233

不是您问题的真正答案（抱歉），但我认为这是有关该物业的有用信息`project.build.sourceEncoding`

该属性是为了简化 maven 项目中的编码管理的尝试。

这个想法是，只要在其自身的插件配置中未指定编码，所有插件都将其用作默认编码值。是否使用此属性作为默认编码值只是对插件开发人员的建议。

我认为这是在所有主要和最近的插件中完成的，但一个重要的例外是 2.2 版之前的 maven-war-plugin

来源：

*   关于`project.build.sourceEncoding`这里[的](http://docs.codehaus.org/display/MAVENUSER/POM+Element+for+Source+File+Encoding)讨论。
*   战争插件编码细节在[这里](http://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html#Filtering)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-20T07:57:06.993

在 Windows>Preferences>General>Workspace 中有一个用于“文本文件编码”的单选按钮。我设置了 UTF-8，它破坏了我在代码中的所有特殊字符。

作为 Windows 中的默认值，我认为它是“Cp1252”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-17T15:12:14.133

如果我们假设文件

> BundleAppl.properties

是我要过滤的文件，但所有其他资源不应该：

```
<build>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
                <includes>
                    <include>BundleAppl.properties</include>
                </includes>
            </resource>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>false</filtering>
                <excludes>
                    <exclude>BundleAppl.properties</exclude>
                </excludes>
            </resource>
        </resources>
</build> 
```

所以我有可能定义两个捆绑文件。一个包含正常的文本内容，包括元音变音等等，一个包含构建内容的技术包文件，如 ....

*   pom.version
*   构建日期

…………

# internet-explorer - Asp.net MVC 4：Chrome 中的错误，而不是 Internet Explorer 中的错误

> ID：14327012
> 
> 赞同：0
> 
> 时间：2013-01-14T21:28:00.933
> 
> 标签：internet-explorer, google-chrome, asp.net-mvc-4, asp.net-mvc-routing

我不确定这里发生了什么。

我有一个在我拥有的 jquery 脚本中调用的操作方法...

```
 ondblClickRow: function (id) {
                        debugger;
                        var dummyURL ='@Url.Action("EditEncounter", "EditEncounter", new { encounterId = 0, popId = (int)TempData["POPULATIONID"] })';
                        var path = dummyURL.replace("-2", id);
                        document.location.href = path;
                        //new { encounterId = temp.EncounterId, popId = (int)TempData["POPULATIONID"] }'
                    } 
```

出于某种原因，当我尝试使用 chrome 通过此路线导航到此页面时，出现此异常：

```
The parameters dictionary contains a null entry for parameter 'popId' of non-nullable type 'System.Int32' for method 'System.Web.Mvc.ActionResult EditEncounter(Int32, Int32)' in 'FocusedReadMissionsRedux.Controllers.EditEncounterController'. An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter.
Parameter name: parameters 
```

但是在 IE 中，我调用了 action 方法，然后毫无意外地导航到了相应的页面。我肯定错过了什么？

**更新** 我注意到我得到了这个查询字符串......

```
encounterId=2245&amp;popId=2 
```

注意 ' `&`' 和 ' `amp;`'。我认为我的路线设置不正确。我会尝试几件事，让各位绅士知道会发生什么。

**确认的**

这是我在 Internet Explorer 中的路线

```
encounterId=2245&popId=2 
```

它有效。我只需要弄清楚为什么这个特定请求会发生这种情况。

**更新**

当我尝试调试我的程序时，Visual Studio 不会更新生成的 cshtml 文件。任何人都经历过这个以及如何得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T23:07:49.443

我有一个类似的问题，但能够通过将我的 Url.Action 包含在摆脱 amp 的 Html.Raw 中来解决这个问题；根据[这个解决方案](https://stackoverflow.com/questions/8711521/url-action-puts-an-amp-in-my-url-how-can-i-solve-this)希望有人能找到帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:33:10.273

您是否尝试过设置您`popId`的`nullable`类型？听起来它不喜欢您的可选参数是整数而不是可为空的整数。当然我看不到您的控制器和视图，但这就是错误消息告诉我的内容。见下文。

添加一个`int?`而不是`int`

所以你`ViewResult`需要在你的控制器中有可以为空的参数：

```
public ViewResult EditEncounter(int? encounterId, int? popId) 
```

* * *

更新：经过进一步讨论，Chrome 似乎没有填写或批准您的`TempData`对象，而 IE 是。也许发布有关此过程的更多信息。

# r - 从R中的向量列表中提取值范围

> ID：14327013
> 
> 赞同：1
> 
> 时间：2013-01-14T21:28:12.523
> 
> 标签：r, list

我正在为这个简单的任务而苦苦挣扎

我有一个向量列表，我想提取一个范围内的值，比如说 1700 到 6200 之间。

```
sample <- list(c(1062, 1084, 1104, 1130, 1143, 1178, 1193, 1209, 1233, 
1276, 1315, 1458, 1752, 2027, 2483, 2598, 2713, 3196, 3780, 4448, 
4937, 5070, 5734, 6347, 6859, 6963), c(1101, 1125, 1153, 1166, 
1201, 1214, 1257, 1281, 1315, 1351, 1493, 1786, 2061, 2514, 2559, 
2583, 2628, 2742, 3185, 3223, 3801, 4469, 4954, 5090, 5753, 6364, 
6874, 6978))

sapply(sample, function(x) x[x > 1700])
sapply(sample, function(x) x[x < 6200]) 
```

如何将这两个功能合二为一？

```
sapply(sample, function(x) x[x > 1700] & x[x<6200]) 
```

不起作用，为什么？我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T21:30:25.327

```
sapply(sample, function(x) x[x > 1700 & x < 6200]) 
```

# regex - 重定向正则表达式 2 场景

> ID：14327019
> 
> 赞同：0
> 
> 时间：2013-01-14T21:28:36.453
> 
> 标签：regex, .htaccess

我正在寻找一些正则表达式帮助来匹配一些 301 重定向。

```
Match www.domain.tld only redirect to www.domain.tld/list.html
Match www.domain.tld/* redirect to subdomain.domain.tld/*, follow query strings 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:09:34.170

如果我正确理解了您的问题，您希望将主页重定向到`www.domain.tld/list.html`其他所有内容以`subdomain.domain.tld`保留 URL 路径和查询字符串

```
RewriteEngine On
RewriteRule ^$ http://www.domain.tld/list.html [R,L]
RewriteRule .+ http://subdomain.domain.tld$0 [R,L] 
```

当一切都按预期工作时，您可以替换`[R,L]`为`[R=301,L]`，但不能替换之前。

# ember.js - 在 Ember.js 中无法绑定到 ApplicationController

> ID：14327021
> 
> 赞同：0
> 
> 时间：2013-01-14T21:28:38.780
> 
> 标签：ember.js

我刚刚开始使用 Ember.js 构建一个测试应用程序。我正在尝试绑定到，`ApplicationController`以便我的名字在`application`模板中呈现。我无法让它工作！

我正在关注[http://emberjs.com/guides/templates/handlebars-basics/中提供的信息](http://emberjs.com/guides/templates/handlebars-basics/)

这是我正在使用的代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <link href="/Content/css/style.css" rel="stylesheet" type="text/css" />
    <script src="/Scripts/lib/jquery.js" type="text/javascript"></script>
    <script src="/Scripts/lib/handlebars.js" type="text/javascript"></script>
    <script src="/Scripts/lib/ember.js" type="text/javascript"></script>
</head>
    <body>
        <script type="text/x-handlebars">
            <h1>Welcome to my test application</h1>
            <div>
                Hello, <strong>{{firstName}} {{lastName}}</strong>!
            </div>    
        </script>
        <script type="text/javascript">
            $(function () {
                MyApp = Ember.Application.create();
                MyApp.ApplicationController = Ember.Controller.extend({
                    firstName: "Jones",
                    lastName: "Ross"
                });
            });
        </script>
    </body>
</html> 
```

输出是：

```
Welcome to my test application
Hello, ! 
```

`firstName`似乎`lastName`是`undefined`！不会产生错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:06:45.777

这对我来说很好。请参阅[此 JSBin](http://jsbin.com/uwufir/1/edit)。

一注：

> 您不需要将应用程序包装在 jQuery`ready`回调中。Ember 将自动推迟初始化，直到 DOM 自行准备好。

# c# - 按子网掩码计算 IP 范围

> ID：14327022
> 
> 赞同：8
> 
> 时间：2013-01-14T21:28:40.027
> 
> 标签：c#, networking, ip, subnet

如果我有一个子网掩码`255.255.255.0`和一个 IP 地址`192.168.1.5`，是否有一种简单的方法可以确定该子网内所有可能的 IP 地址？

在这种情况下：

```
192.168.1.1
192.168.1.2
192.168.1.3
192.168.1.4
...
...
192.168.1.252
192.168.1.253
192.168.1.254
192.168.1.255 
```

到目前为止，我发现的只是重载的 .net 库。没有任何本地方法可以使用默认命名空间解决这个问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T22:38:25.267

10 分钟的编码，未经过全面测试：

```
class IPSegment {

    private UInt32 _ip;
    private UInt32 _mask;

    public IPSegment(string ip, string mask) {
        _ip = ip.ParseIp();
        _mask = mask.ParseIp();
    }

    public UInt32 NumberOfHosts {
        get { return ~_mask+1; }
    }

    public UInt32 NetworkAddress {
        get { return _ip & _mask; }
    }

    public UInt32 BroadcastAddress {
        get { return NetworkAddress + ~_mask; }
    }

    public IEnumerable<UInt32> Hosts(){
        for (var host = NetworkAddress+1; host < BroadcastAddress; host++) {
            yield return  host;
        }
    }

}

public static class IpHelpers {
    public static string ToIpString(this UInt32 value) {
        var bitmask = 0xff000000;
        var parts = new string[4];
        for (var i = 0; i < 4; i++) {
            var masked = (value & bitmask) >> ((3-i)*8);
            bitmask >>= 8;
            parts[i] = masked.ToString(CultureInfo.InvariantCulture);
        }
        return String.Join(".", parts);
    }

    public static UInt32 ParseIp(this string ipAddress) {
        var splitted = ipAddress.Split('.');
        UInt32 ip = 0;
        for (var i = 0; i < 4; i++) {
            ip = (ip << 8) + UInt32.Parse(splitted[i]);
        }
        return ip;
    }
} 
```

用法：

```
 static void Main(string[] args) {

        IPSegment ip = new IPSegment("192.168.1.1","255.255.255.248");

        Console.WriteLine(ip.NumberOfHosts);
        Console.WriteLine(ip.NetworkAddress.ToIpString());
        Console.WriteLine(ip.BroadcastAddress.ToIpString());

        Console.WriteLine("===");
        foreach (var host in ip.Hosts()) {
            Console.WriteLine(host.ToIpString());
        }
        Console.ReadLine();

    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-14T21:52:46.037

要确定地址范围，请执行以下步骤：

1）获取您的子网掩码（此处为 255.255.255.0）并将其转换为二进制：

```
11111111.11111111.11111111.00000000

 (  8    +    8   +   8    +    0    = 24 ->  So you can write your ip adresse like this : 192.168.1.x/24 because you are in a /24 network) 
```

2）您在 /24 网络中有 256-2=254 个可用的主机 IP 地址（一个用于网络地址（您范围内的第一个），另一个用于广播地址（您范围内的最后一个）） .

3) 要获取您的范围，只需获取您的网络地址（根据您的子网掩码的第一个 ip 地址）并获取接下来的 255 个 IP 地址，您将拥有您的范围。

***您的网络地址：***

在二进制中，最后一个八位字节必须为 null ：

```
xxxxxxxx.xxxxxxxx.xxxxxxxx.00000000 
```

***您的广播地址：***

在二进制中，最后一个八位字节必须等于 1：

```
xxxxxxxx.xxxxxxxx.xxxxxxxx.11111111 
```

这里你的 ip 地址是 192.168.1.5。在二进制中，我们得到：

```
11000000.10101000.00000000.00000101 
```

1.  您的网络地址：11000000.10101000.00000000.00000000 <-> 192.168.1.0
2.  你的广播地址：11000000.10101000.000000000.11111111 <-> 192.168.1.255
3.  第一个可用IP地址：192.168.1.1

4.  最后可用IP地址：192.168.1.254

希望你喜欢阅读糟糕的英语。如果你有任何问题，请告诉我，洛里斯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:33:47.977

是的，将所有内容都转换为 32 位表示（假设 IPv4）。如果您的掩码是 M 而 ip 是 IP，那么您的 ip 范围是 (M&IP)+1,(M&IP)+2,...,(M&IP)+(~M)-1。其中 & 是按位与，而 ~ 是按位非。

要将事物转换为 32 位表示，ip abcd 中的每个点都是一个 8 位数字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-24T16:10:54.430

要使用，只需：

```
string[] range GetIpRange("100.68.18.218", "255.255.255.252",true)`; 
```

> 最后一个参数`true`是过滤第一个和最后一个IP
> 来得到完整的答案，把它设置为`false`

它将返回第一个和最后一个可用的 IP。

所有代码解释如下：

```
 /// <summary>
/// IPAddress to UInteger 
/// </summary>
/// <param name="ipAddress"></param>
/// <returns></returns>
public static uint IPToUInt(this string ipAddress)
{
    if (string.IsNullOrEmpty(ipAddress))
        return 0;

    if (IPAddress.TryParse(ipAddress, out IPAddress ip))
    {
        var bytes = ip.GetAddressBytes();
        Array.Reverse(bytes);
        return BitConverter.ToUInt32(bytes, 0);
    }
    else
        return 0;

}

/// <summary>
/// IP in Uinteger to string
/// </summary>
/// <param name="ipUInt"></param>
/// <returns></returns>
public static string IPToString(this uint ipUInt)
{
    return ToIPAddress(ipUInt).ToString();
}

/// <summary>
/// IP in Uinteger to IPAddress
/// </summary>
/// <param name="ipUInt"></param>
/// <returns></returns>
public static IPAddress ToIPAddress(this uint ipUInt)
{
    var bytes = BitConverter.GetBytes(ipUInt);
    Array.Reverse(bytes);
    return new IPAddress(bytes);
}

/// <summary>
/// First and Last IPv4 from IP + Mask
/// </summary>
/// <param name="ipv4"></param>
/// <param name="mask">Accepts CIDR or IP. Example 255.255.255.0 or 24</param>
/// <param name="filterUsable">Removes not usable IPs from Range</param>
/// <returns></returns>
/// <remarks>
/// If ´filterUsable=false´ first IP is not usable and last is reserved for broadcast.
/// </remarks>
public static string[] GetIpRange(string ipv4, string mask, bool filterUsable)
{
    uint[] uiIpRange = GetIpUintRange(ipv4, mask, filterUsable);

    return Array.ConvertAll(uiIpRange, x => IPToString(x));
}

/// <summary>
/// First and Last IPv4 + Mask. 
/// </summary>
/// <param name="ipv4"></param>
/// <param name="mask">Accepts CIDR or IP. Example 255.255.255.0 or 24</param>
/// <param name="filterUsable">Removes not usable IPs from Range</param>
/// <returns></returns>
/// <remarks>
/// First IP is not usable and last is reserverd for broadcast.
/// Can use all IPs in between
/// </remarks>
public static uint[] GetIpUintRange(string ipv4, string mask, bool filterUsable)
{
    uint sub;
    //check if mask is CIDR Notation
    if (mask.Contains(".")) {
        sub = IPToUInt(mask);
    }
    else
    {
        sub = ~(0xffffffff >> Convert.ToInt32(mask));
    }

    uint ip2 = IPToUInt(ipv4);

    uint first = ip2 & sub;
    uint last = first | (0xffffffff & ~sub);

    if (filterUsable)
    {
        first += 1;
        last -= 1; 
    }

    return new uint[] { first, last };
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-21T08:59:07.233

好决定。不要为此使用额外的库。这很简单。我就是这样做的：

```
public static uint[] GetIpRange(string ip, IPAddress subnet)
{
    uint ip2 = Utils.IPv4ToUInt(ip);
    uint sub = Utils.IPv4ToUInt(subnet);

    uint first = ip2 & sub;
    uint last = first | (0xffffffff & ~sub);

    return new uint[] { first, last };
} 
```

**注意：**
您需要做更多的工作将 IP 转换为 uint 并返回（应该很容易）。**然后，您可以在first**和**last**之间使用简单的 for 循环迭代所有 IP 。

像这样的东西（未经测试）：

```
byte[] bytes = subnet.GetAddressBytes();
uint sub = (uint)((bytes[0] << 24) | (bytes[1] << 16) | (bytes[2] << 8) | bytes[3]);

IPAddress ip1 = IPAddress.Parse(ip);
bytes = ip1.GetAddressBytes();
uint ip2 = (uint)((bytes[0] << 24) | (bytes[1] << 16) | (bytes[2] << 8) | bytes[3]); 
```

# java - 正确地从数组中获取单词

> ID：14327024
> 
> 赞同：0
> 
> 时间：2013-01-14T21:28:54.103
> 
> 标签：java, arrays, for-loop, while-loop, format

我在从数组正确打印时遇到问题。

在 IF(A) 中，应该以这种方式格式化所有输入字母。

猫狗等

但是，以下仅格式化我写的最后一个单词。我只是猜测为什么，不知道如何解决它。

该部分标有：**”

```
String type;
String word;
String words[]=new String[100];
int i=0;

String k="end";
System.out.println("Type word: ");
word=sc.next();

while(wyraz.compareToIgnoreCase(k)!=0){     
    words[i]=wyraz;
    i=i+1;
    word=sc.next();
}   
words[i]=k;

System.out.println("Choose type A,B,C:");
type=sc.next();

**if(type.equals("A")){
    int length=word.length();

    for(int z=0;z<length;z++){
    System.out.print(words[z]=""+word.charAt(z));
    System.out.print(" ");
}**

if(type.equals("B")){
    int length=i+1;

    for(int x=0;x<length;x++){
        System.out.print(words[x]);
        System.out.println();   
    }
}

if(type.equals("C")){

    int length=i+1;
    int j;

    for(i=0; i<length; i++) {
        for(j=0; j<i; j++) {
            System.out.print("   ");
            System.out.print(words[j]);
            System.out.println();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:35:20.567

据我所知，您没有遍历所有索引

```
if(type.equals("A")){
  //iterate through all words except for "end"
  for (int x = 0; x < i; x++){
    //iterate through specific word's characters 
    for(int z=0;z<words[x].length();z++){
      //actually print
      System.out.print(words[x].charAt(z)+ " ");
    }
  }
} 
```

这应该，如果你有 e 词（例如，，，`"cat"`）`"dog"`，`"end"`输出为`"c a t d o g"`。如果您还想拥有“en d”，请更改

```
for (int x = 0; x < i; x++){ 
```

到

```
for (int x = 0; x <= i; x++){ 
```

我还要说，由于您使用的是数组，因此用户可能会过早结束（保留其余的索引`null`，您应该考虑使用 an`ArrayList <String>`来代替。

# c++ - ListView 中的 XML 未更改

> ID：14327025
> 
> 赞同：1
> 
> 时间：2013-01-14T21:28:54.930
> 
> 标签：c++, qml, blackberry-10, blackberry-cascades

我正在尝试制作一个示例，以使用 C++ 在我的 .qml 文件（当我单击按钮时）中动态更改 XML 数据模型。为此，我返回了一个 Qt 属性（GroupDataModel）。但是在返回对象后， ListView 并没有改变，虽然我看到模型属性再次返回。

OBS：如果我从 .qml 中的 XMLDataModel 加载它，而不是加载 C++ 代码，它就可以工作。

这是我的 XmlTest.hpp：

```
#ifndef XmlTest_HPP_
#define XmlTest_HPP_

#include <QObject>
#include <bb/cascades/GroupDataModel>

namespace bb { namespace cascades { class Application; }}

class XmlTest : public QObject
{
    Q_OBJECT
    Q_PROPERTY(bb::cascades::GroupDataModel* model READ model NOTIFY onModelChanged);
public:
    XmlTest(bb::cascades::Application *app);
    virtual ~XmlTest() {}

    Q_INVOKABLE
    bb::cascades::GroupDataModel *model();

    Q_INVOKABLE
    void setGroupDataModel();
signals:
    void onModelChanged();
private:
    bb::cascades::GroupDataModel *m_model;
};

#endif /* XmlTest_HPP_ */ 
```

和 XmlTest.cpp：

```
#include "XmlTest.hpp"

#include <bb/cascades/Application>
#include <bb/cascades/QmlDocument>
#include <bb/cascades/AbstractPane>
#include <bb/data/XmlDataAccess>

using namespace bb::cascades;
using namespace bb::data;

XmlTest::XmlTest(Application *app)
: QObject(app)
{
    m_model = new GroupDataModel();
    qRegisterMetaType<GroupDataModel *>("GroupDataModel *");

    QmlDocument *qml = QmlDocument::create("asset:///main.qml").parent(this);
    qml->setContextProperty("_xmlTest", this);

    AbstractPane *root = qml->createRootObject<AbstractPane>();
    app->setScene(root);
}

GroupDataModel *XmlTest::model()
{
    qDebug("Returning m_model");
    return m_model;
}

void XmlTest::setGroupDataModel()
{
    XmlDataAccess xml;
    QVariant xmlData = xml.load(QDir::currentPath() + "/app/native/assets/models/model.xml");
    m_model->clear();
    m_model->insertList(xmlData.toList());
    qDebug("File loaded");
    emit this->onModelChanged();
} 
```

我的 main.qml 文件（只是一个带有按钮的 ListView）：

```
import bb.cascades 1.0

Page {
    Container {
        id: mainContainer
        layout: DockLayout {}
        ListView {
            id: listView
            dataModel: _xmlTest.model
            //dataModel: XmlDataModel {
            //    source: "models/model2.xml"
            //}
            onDataModelChanged: {
                console.log("Data model changed!"); 
            }
            listItemComponents: [
                ListItemComponent {
                    type: "user"
                    StandardListItem {
                        title: ListItemData.realname
                        description: ListItemData.name
                    }
                },
                ListItemComponent {
                    type: "option"
                    StandardListItem {
                        title: ListItemData.title
                    }
                }
            ]
        }
        Button {
            text: "Click"
            onClicked: {
                console.log("Trying to load file");
                _xmlTest.setGroupDataModel();
            }
            verticalAlignment: VerticalAlignment.Bottom
            horizontalAlignment: HorizontalAlignment.Center
        }
    }
} 
```

和我试图加载的 XML：

```
<root>
    <user name="myUsername" realname="My Real Name"/>
    <option title="Option 1"/>
    <option title="Option 2"/>
    <option title="Option 3"/>
    <option title="Option 4"/>
    <option title="Option 5"/>
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:15:36.200

你只需要你`setGroupDataModel()`是`Q_INVOKABLE`- 其他人只是财产访问者。

但是您误解了 GroupDataModel。`onModelChanged()`除非模型 PROPERTY 更改，否则您不想发出 a 。在您的情况下， PROPERTY 没有改变，所有改变的是属性*中*的值。所以你不需要`emit onModelChanged()`, 我认为它应该有新的值作为参数。

那么问题出在哪里？

您需要检查是否正确地从 XML 文件中读取数据。

然后您需要阅读[GroupDataModel](https://developer.blackberry.com/cascades/reference/bb__cascades__groupdatamodel.html) - 如果我正确阅读它，它只会使用“item”和“header”作为项目类型，因此不会使用您的 ListItemComponents。

如果不使用 GroupDataModel 而是使用 XmlDataModel ，它会更容易一些（并且会起作用[；-）](https://developer.blackberry.com/cascades/reference/bb__cascades__xmldatamodel.html)。

这是我的`XmlListView.hpp`主要课程（您的`XmlTest`课程）：

```
// Default empty project template
#ifndef XmlListView_HPP_
#define XmlListView_HPP_

#include <QObject>
#include <bb/cascades/XmlDataModel>
#include <bb/cascades/DataModel>

namespace bb { namespace cascades { class Application; }}

class XmlListView : public QObject
{
    Q_OBJECT
    Q_PROPERTY(bb::cascades::DataModel *model READ model NOTIFY onModelChanged);
public:
    XmlListView(bb::cascades::Application *app);
    virtual ~XmlListView() {}

    bb::cascades::DataModel *model();
    Q_INVOKABLE void setGroupDataModel();

signals:
    void onModelChanged();
private:
    bb::cascades::XmlDataModel *m_model;
};

#endif /* XmlListView_HPP_ */ 
```

和.cpp：

```
// Default empty project template
#include "XmlListView.hpp"

#include <bb/cascades/Application>
#include <bb/cascades/QmlDocument>
#include <bb/cascades/AbstractPane>

#include <bb/data/XmlDataAccess>

using namespace bb::cascades;
using namespace bb::data;

XmlListView::XmlListView(bb::cascades::Application *app)
: QObject(app)
{
    m_model = new XmlDataModel();

    QmlDocument *qml = QmlDocument::create("asset:///main.qml").parent(this);
    qml->setContextProperty("_xmlTest", this);

    AbstractPane *root = qml->createRootObject<AbstractPane>();
    app->setScene(root);
}

DataModel *
XmlListView::model() {
    return m_model;
}

void
XmlListView::setGroupDataModel() {
    m_model->setSource(QUrl("models/model.xml"));
} 
```

我的 main.qml，和你的一样：

```
import bb.cascades 1.0

Page {
    Container {
        id: mainContainer
        layout: DockLayout {}
        ListView {
            id: listView
            dataModel: _xmlTest.model
            listItemComponents: [
                ListItemComponent {
                    type: "user"
                    StandardListItem {
                        title: ListItemData.realname
                        description: ListItemData.name
                    }
                },
                ListItemComponent {
                    type: "option"
                    StandardListItem {
                        title: ListItemData.title
                    }
                }
            ]

        }
        Button {
            text: "Click"
            onClicked: {
                _xmlTest.setGroupDataModel()
            }
            verticalAlignment: VerticalAlignment.Bottom
            horizontalAlignment: HorizontalAlignment.Center
        }

    }
} 
```

.xml 模型文件和你的一样。

要真正了解哪里出错了，您需要检查`XmlDataAccess`类中的 ehte 数据加载。我还没有完全解决它-恐怕我现在没有更多时间了-但是我在构造函数中尝试了：

```
qDebug() << "==========================================================";
XmlDataAccess xml;
QVariant xmlData = xml.load(QDir::currentPath() + "/app/native/assets/models/model.xml");
if (xml.hasError()) {
    qDebug(xml.error().errorMessage().toAscii());
} else {
    QVariantList list = xmlData.toList();
    qDebug() << "list len = " << list.size();
}
qDebug() << "=========================================================="; 
```

观看我的调试日志，我看到`list len = 0`, 所以这段代码没有成功地从 XML 中读取任何内容。正如我所说，我还没有弄清楚如何让它工作。家庭作业？（请在完成后发布）

一切顺利，C

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:37:18.570

Q_INVOKABLE 函数是某种插槽，因此它们不能返回对象。您应该找到 ListView 并放置数据模型。

*   在 id: objectName: "listview" 之后添加 QML
*   在 C++ 中获取 listView： ListView* listView = root->findChild("listView");
*   设置数据模型：listView->setDataModel(m_model);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T05:58:29.993

如果您真正想要的是将“用户”数据显示为标题，那么您可以使用@craigmj 在他的回答中建议的确切代码将您的数据放入模型中，但只需更改`ListItemComponent`main 中的定义。 qml 来`Header`代替`StandardListItem`. 我提供了`ListView`下面的全部内容，您应该可以将其放入您的 main.qml 中。`Header`记录[在这里](https://developer.blackberry.com/cascades/reference/bb__cascades__header.html)。

```
 ListView {
        id: listView
        dataModel: _xmlTest.model

        onDataModelChanged: {
            console.log("Data model changed!");
        }
        listItemComponents: [
            ListItemComponent {
                type: "user"
                Header {
                    title: ListItemData.realname
                    subtitle: ListItemData.name
                }
            },
            ListItemComponent {
                type: "option"
                StandardListItem {
                    title: ListItemData.title
                }
            }
        ]
    } 
```

# css - 添加一个将覆盖现有字体规则的 css 类

> ID：14327026
> 
> 赞同：1
> 
> 时间：2013-01-14T21:28:57.653
> 
> 标签：css

我有一些如下所示的 html：

```
<div id="main" class="ui-tabs ui-widget ui-widget-content ui-corner-all">
  <div id="main-top">
    <select id="entity" name="entity" class="monospace" >
    <input id="client" type="text" name="client" class="monospace">
  </div>
  <!-- Rest of the page content -->
  ...
</div> 
```

我有一些看起来像这样的CSS：

```
.ui-widget input { font-family:Lucida Sans Unicode,Verdana,Arial,sans-serif; }
.monospace{ font-family: Lucida Console, Courier New, monospace; } 
```

当我运行它时，尽管应用了 .monospace 类，这两个 html 输入元素还是拾取了第一个样式。我希望第一种样式应用于页面上的所有输入，除非应用了 .monospace 类（如 html 示例中的前两个输入项），在这种情况下，我希望应用第二种样式。我意识到我没有正确解决这个问题，解决方案可能需要以不同的方式构建我的 css，关于如何实现这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:33:06.227

您需要使用更具体的选择器，例如：

```
.ui-widget input.monospace 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:33:40.343

你可以像@Max 说的那样做，`ui-widget input.monospace{}`或者你可以添加`!important`到你的`.monospace`班级。

```
.monospace{ font-family: Lucida Console, Courier New, monospace !important;} 
```

# cakephp - 在 CakePHP 中寻找战士的战斗

> ID：14327028
> 
> 赞同：0
> 
> 时间：2013-01-14T21:29:01.990
> 
> 标签：cakephp, relationship

我有两个模型：`Fight`和`Fighter`. 我的`Fight`模型有两个`belongsTo`关系：

```
<?php
class Fight extends AppModel {
    public $belongsTo = array(
        'FighterA' => array(
            'className' => 'Fighter',
            'joinTable' => 'fighters',
            'foreignKey' => 'fighter_a_id'
        ),
        'FighterB' => array(
            'className' => 'Fighter',
            'joinTable' => 'fighters',
            'foreignKey' => 'fighter_b_id'
        )
    );
} 
```

这样我就可以设置两个参与战斗的战士。但是，在我的`Fighter`模型中，我很难确定如何设置关系的另一端。

我知道我想找到所有战斗，其中`fighter_a_id`or`fighter_b_id`列等于战斗机 ID，但在将其转换为模型中的关系时遇到了麻烦。

我试过了：

```
<?php
class Fighter extends AppModel {
    public $hasMany = array(
        'Fight' => array(
            'conditions' => array(
                'OR' => array(
                    'Fight.fighter_a_id' => 'Fighter.id',
                    'Fight.fighter_b_id' => 'Fighter.id'
                )
            )
        )
    );
} 
```

但是 CakePHP 抛出一个错误，它仍然试图查询`fighter_id`它自动生成的（不存在的），将生成`WHERE`的子句与`OR`我上面指定的子句结合起来。

> 错误：SQLSTATE [42S22]：找不到列：1054 '字段列表'中的未知列 'Fight.fighter_id'

以及生成的 SQL 语句：

> `SELECT Fight.id, Fight.fighter_a_id, Fight.fighter_b_id, Fight.event_id, Fight.weight_division_id, Fight.rounds, Fight.rounds_length, Fight.winner, Fight.winning_round, Fight.winning_time, Fight.win_method, Fight.fighter_id FROM fights AS Fight WHERE ((Fight.fighter_a_id = 'Fighter.id') OR (Fight.fighter_b_id = 'Fighter.id')) AND Fight.fighter_id = (1)`

从`fighters`表中查找记录时，我还想列出相关`Fight`模型（按时间顺序，但在另一列中处理，因为它与此问题无关）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T02:09:56.587

您需要添加一个额外的表格来保存哪些战士属于一场战斗，并将其限制为每场战斗 2 条记录。或者，您必须有两个 belongsTo 关联。

使用两个 belongsTo 关联，Fight 模型看起来像这样。

```
class Fighter extends AppModel {
    public $hasMany = array(
        'FightA' => array(
             'className'=>'Fight',
             'foreignKey'=>'fighter_a_id'
        ),
        'FightB' => array(
             'className'=>'Fight',
             'foreignKey'=>'fighter_b_id'
        )
    );
} 
```

然后，您可以将 FightA 和 FightB 的两个关联结果合并到一个名为 Fight 的列表中。在控制器或模型中的 afterFind 回调中执行此操作。

我认为可以这样做。

```
 $fights = $this->Fighter->find(....);
 $fights['Fighter']['Fight'] = $fights['Fighter']['FightA']+$fights['Fighter']['FightB']; 
```

另一种方法是添加另一个表以将 Fighters 与 Fight 相关联。您可以将此表称为fight_members。

这将是一个简单的表。

```
CREATE  TABLE `fight_members` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `fighter_id` INT UNSIGNED NOT NULL ,
  `fight_id` INT UNSIGNED NOT NULL ,
PRIMARY KEY (`id`) ); 
```

您现在可以找到一名战士所属的所有战斗。

```
class Fighter extends AppModel {
    public $hasMany = array('FightMember');
}

class Fight extends AppModel {
     public $hasMany = array('FightMember');
);

class FightMember extends AppModel {
     public $belongsTo=array('Fight','Fighter');
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:38:35.103

不要在 Fighter 模型中设置条件。使模型简单：

```
class Fighter extends AppModel {
  var $hasMany = 'Fight';
} 
```

然后在您的控制器中执行逻辑并锻炼战斗机的战斗：

```
public function index($id = null) {     
        if (!$id) {
        }
        $fighter = $this->Fighter->findById($id);
        if (!$project) {
            throw new NotFoundException(__('Invalid fighter'));
        } else {
            $this->set('fighter', $fighter);

            $fights = $this->Fighter->Fight->find('all', array('conditions' => array(
            'OR' => array(
                'Fight.fighter_a_id' => 'Fighter.id',
                'Fight.fighter_b_id' => 'Fighter.id'
            )
        )));
            $this->set('fights', $fights);
        }
} 
```

# intellij-idea - IntelliJ 通信问题故障排除

> ID：14327029
> 
> 赞同：1
> 
> 时间：2013-01-14T21:29:03.320
> 
> 标签：intellij-idea

我的 IntelliJ 无法与远程 Tomcat 实例通信。有没有办法获取 IntelliJ 的详细通信日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:41:33.713

查看[此问题评论](http://youtrack.jetbrains.com/issue/IDEA-88167)，了解 Michael Golubev 如何通过`log.xml`修改启用额外日志记录的说明。

对于低级网络调试，您可以使用 WireShark 之类的东西。

# php - 谷歌重定向和转化跟踪代码实现

> ID：14327030
> 
> 赞同：3
> 
> 时间：2013-01-14T21:29:05.503
> 
> 标签：php, javascript, google-analytics

我遇到了我的转化跟踪代码不起作用的问题。

Google 提供给您实现的每段代码都引用了以下代码：

使用重定向代码，您可以声明几个变量：

```
var google_conversion_id = 1111111111;
var google_conversion_label = "WWWWWWWWWWWWWW";
var google_custom_params = window.google_tag_params;
var google_remarketing_only = true; 
```

然后加载转换脚本：

```
http://www.googleadservices.com/pagead/conversion.js 
```

...然后为了跟踪转换，您还声明了一些变量并加载相同的确切脚本。

我们没有遇到与我们的数据不一致的情况，我怀疑所有这些代码是如何加载到文档中的。该`conversion.js`脚本在页面上被加载了几次，当我觉得它应该只加载一次时。

那么这些被声明的变量……有些是一样的，显然会覆盖之前声明的变量。

实现和代码的正确方法`analytics`是什么`remarketing`？`conversion`这只是负载优先级的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:43:37.260

通常，您应该在任何一个页面上只触发一个代码，例如，首页再营销代码将在所有首页上触发，转换代码只会在销售确认页面上触发。尽管该脚本名为conversion.js，但对于非转换页面也是如此。

所以你不应该真的看到多个conversion.js调用，如果你只有一个调用，你不应该最终覆盖任何东西。

或者，如果您有一个可以在任何地方触发的代码，但想用更具体的再营销代码（例如主页）覆盖，那么只需确保它是第二个触发的，以便您用优先级的代码覆盖它。

# xslt-2.0 - 使用模板将元素的值连接到变量？

> ID：14327033
> 
> 赞同：0
> 
> 时间：2013-01-14T21:29:10.853
> 
> 标签：xslt-2.0, xpath-2.0

以下数据需要连接。但是我收到的 XML 文档可以有“零到 n”b 个元素。换句话说，如果没有 b 元素，xslt 应该仍然可以正常工作，例如：

```
 <a>
   <b1>Some</b2>
   <b2>data</b2>
   <b3>what</b3>
   <b4>need</b4>
   <b5>to</b5>
   <b6>be</b6>
   <b7>concatenated</b7>
</a> 
```

预期结果

```
<a>
  <b1>Some data what need to be concatenated</b1>
</a> 
```

我正在尝试以下构造，但无法使其工作。

```
<xsl:variable name="details" select="//b*"/>
<xsl:for-each select="$details">
    <!-- how can I concatenate the values of the b's to a variable????-->
</xsl:for-each>
 <!-- Process the variable for further needs--> 
```

我希望有人能给我一个提示？问候德克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:46:58.383

您不能使用 //b* 来选择所有以 b 开头的元素，因为 XPath 总是在没有通配符的情况下进行精确匹配（可能除了命名空间之外）。所以你需要使用 //*[starts-with(name(), "b")] 来选择 b 元素

然后，您可以使用字符串连接函数单独在 XPath 中进行连接：

```
string-join(//*[starts-with(name(), "b")]/text(), " ") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:54:17.163

**就这么简单**（完全转换）：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="@*|node()">
  <xsl:copy>
   <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="*[starts-with(name(), 'b')][1]">
  <xsl:element name="{name()}" namespace="{namespace-uri()}">
   <xsl:sequence select="../*[starts-with(name(), 'b')]/string()"/>
  </xsl:element>
 </xsl:template>
 <xsl:template match="text()[true()]| *[starts-with(name(), 'b')][position() gt 1]"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的（针对格式正确的）XML 文档时：**

```
 <a>
   <b1>Some</b1>
   <b2>data</b2>
   <b3>what</b3>
   <b4>need</b4>
   <b5>to</b5>
   <b6>be</b6>
   <b7>concatenated</b7>
 </a> 
```

**产生了想要的正确结果**：

```
<a>
   <b1>Some data what need to be concatenated</b1>
</a> 
```

# css - 垂直对齐 div 内的多个图像

> ID：14327034
> 
> 赞同：5
> 
> 时间：2013-01-14T21:29:11.743
> 
> 标签：css, vertical-alignment

我正在尝试在 div 中垂直对齐/居中一些图像。这不是 100% 正确的。图像有些像素太低而无法垂直居中。这是为什么？

```
.Container
{   
    width:280px;
    position:fixed;
    border:1px solid blue;
    left:0px;
    text-align: center;
    line-height:84px;
}

.Container input[type=image]
{
   vertical-align:middle;
} 
```

更新：

[http://jsfiddle.net/2j531q32/](http://jsfiddle.net/2j531q32/)

更新 2：图像在 js 小提琴中无效 您可以看到图像和顶部边框之间的间隙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-04T16:46:04.523

接受的解决方案在 IE11 中对我不起作用。

我找到了一个很棒的[垂直居中方法](http://www.vanseodesign.com/css/vertical-centering/)页面。

这在 Chrome 和 IE11 中对我有用。 line-height 需要 > 要居中的最高元素。

```
#Parent{
    line-height: 200px; // > the highest element to be centered.
}

.parent img {
    vertical-align: middle;
} 
```

[Jsfiddle 演示](http://jsfiddle.net/zewhr2jq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:54:22.300

不需要任何行高css。`display:table`您可以使用和`display:table-cell`样式垂直对齐 div 。的高度`.ButtonBarDiv`被夸大以表明它们都垂直居中。

每行一张图片：http: [//jsfiddle.net/eY7Ms/16/](http://jsfiddle.net/eY7Ms/16/)

同一行的图片：http: [//jsfiddle.net/eY7Ms/14/](http://jsfiddle.net/eY7Ms/14/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T22:51:17.180

经过一些研究，我在stackoverflow上发现了另一个问题： [div内的图像在图像下方有额外的空间](https://stackoverflow.com/questions/5804256/why-an-image-inside-a-div-has-an-extra-space-below-the-image)

似乎浏览器在一行上方/下方呈现了一个额外的空间，因此您可能想要调整行高，这是一个示例：

[http://jsfiddle.net/eY7Ms/13/](http://jsfiddle.net/eY7Ms/13/)

所以如果你想调整垂直的额外空间，你可以这样做：

```
.boxWithVerticalCenteredContent {
    height: 4em;
    line-height: 3.6em;
} 
```

我知道，这不是完全居中的，它的高度是固定的，但是如果你想将它绝对居中，你可能想要使用`position: absolute`和`top, bottom, left, right`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-18T16:15:41.157

仅适用于现代浏览器，但：

```
.elementToAlign{
position: relative;
top: 50%;
transform : translateY(-50%);
} 
```

# python - Django QuerySet 上的计数与 len

> ID：14327036
> 
> 赞同：108
> 
> 时间：2013-01-14T21:29:25.037
> 
> 标签：python, django, performance

在 Django 中，考虑到我`QuerySet`要迭代并打印结果，那么计算对象的最佳选择是什么？`len(qs)`还是`qs.count()`？

（同时考虑到在同一迭代中计算对象不是一种选择。）

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-01-14T21:32:31.380

尽管[Django 文档](https://docs.djangoproject.com/en/stable/ref/models/querysets/)建议使用`count`而不是`len`：

> `len()`注意：如果您只想确定集合中的记录数，请不要在 QuerySets 上使用。使用 SQL 在数据库级别处理计数要高效得多`SELECT COUNT(*)`，而 Django`count()`正是出于这个原因提供了一种方法。

由于您无论如何都在迭代此 QuerySet，[结果将被缓存](https://docs.djangoproject.com/en/stable/topics/db/queries/#caching-and-querysets)（除非您正在使用[`iterator`](https://docs.djangoproject.com/en/stable/ref/models/querysets/#django.db.models.query.QuerySet.iterator)），因此最好使用`len`，因为**这样可以避免再次访问数据库，也可以避免检索不同数量的结果**！） .
如果您正在使用`iterator`，那么出于同样的原因，我建议您在迭代（而不是使用 count）时包含一个计数变量。

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2017-10-07T11:02:43.673

`len()`在两者之间进行选择`count()`取决于情况，值得深入了解它们如何正确使用它们。

让我为您提供几个场景：

1.  （最重要的）当您只想知道元素的数量并且不打算以任何方式处理它们时，使用`count()`：

**DO:** `queryset.count()` - 这将执行单个`SELECT COUNT(*) FROM some_table`查询，所有计算都在 RDBMS 端进行，Python 只需要以 O(1) 的固定成本检索结果编号

**不要：** `len(queryset)` - 这将执行`SELECT * FROM some_table`查询，获取整个表 O(N) 并需要额外的 O(N) 内存来存储它。**这是可以做的最糟糕的事情**

2.  无论如何，当您打算获取查询集时，最好使用它`len()`不会导致额外的数据库查询`count()`

`len()`（一个数据库查询）

```
 len(queryset) # SELECT * fetching all the data - NO extra cost - data would be fetched anyway in the for loop

    for obj in queryset: # data is already fetched by len() - using cache
        pass 
```

`count()`（两个数据库查询！）：

```
 queryset.count() # First db query SELECT COUNT(*)

    for obj in queryset: # Second db query (fetching data) SELECT *
        pass 
```

3.  恢复第二种情况（当已经获取查询集时）：

    ```
     for obj in queryset: # iteration fetches the data
         len(queryset) # using already cached data - O(1) no extra cost
         queryset.count() # using cache - O(1) no extra db query

     len(queryset) # the same O(1)
     queryset.count() # the same: no query, O(1) 
    ```

一旦你“在引擎盖下”看一眼，一切都会变得清晰：

```
class QuerySet(object):

    def __init__(self, model=None, query=None, using=None, hints=None):
        # (...)
        self._result_cache = None

    def __len__(self):
        self._fetch_all()
        return len(self._result_cache)

    def _fetch_all(self):
        if self._result_cache is None:
            self._result_cache = list(self.iterator())
        if self._prefetch_related_lookups and not self._prefetch_done:
            self._prefetch_related_objects()

    def count(self):
        if self._result_cache is not None:
            return len(self._result_cache)

        return self.query.get_count(using=self.db) 
```

Django 文档中的良好参考：

*   [当查询集被评估时](https://docs.djangoproject.com/en/1.11/ref/models/querysets/#when-querysets-are-evaluated)
*   [数数（）](https://docs.djangoproject.com/en/1.11/ref/models/querysets/#count)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-01-14T21:46:13.863

我认为`len(qs)`在这里使用更有意义，因为您需要迭代结果。`qs.count()`如果您想要做的所有事情都打印计数而不是迭代结果，这是一个更好的选择。

`len(qs)`将使用 击中数据库，`select * from table`而使用`qs.count()`击中数据库`select count(*) from table`。

也会`qs.count()`给出返回整数，你不能迭代它

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-11-01T14:34:07.907

对于喜欢测试测量（Postresql）的人：

如果我们有一个简单的 Person 模型和它的 1000 个实例：

```
class Person(models.Model):
    name = models.CharField(max_length=100)
    age = models.SmallIntegerField()

    def __str__(self):
        return self.name 
```

在平均情况下，它给出：

```
In [1]: persons = Person.objects.all()

In [2]: %timeit len(persons)                                                                                                                                                          
325 ns ± 3.09 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)

In [3]: %timeit persons.count()                                                                                                                                                       
170 ns ± 0.572 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each) 
```

那么你怎么能比这个特定的测试用例`count()`快**2倍呢？**`len()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-20T20:52:26.550

总结其他人已经回答的内容：

*   `len()`将获取所有记录并对其进行迭代。
*   `count()`将执行 SQL COUNT 操作（在处理大查询集时要快得多）。

确实，如果在此操作之后，将迭代整个查询集，那么作为一个整体，使用`len()`.

**然而**

在某些情况下，例如当有内存限制时，拆分对记录执行的操作可能很方便（如果可能）。这可以使用[django pagination](https://docs.djangoproject.com/en/3.0/topics/pagination/)来实现。

然后，使用`count()`将是选择，您可以避免一次获取整个查询集。

# c# - 类方法可以为类的每个实例使用不同的代码吗？

> ID：14327038
> 
> 赞同：1
> 
> 时间：2013-01-14T21:29:27.927
> 
> 标签：c#, class, methods, artificial-intelligence, member-functions

我想创建一个具有成员函数（例如 giveCharity）的类（例如 Person），但我希望该方法的内容对于该类的每个实例都不同，从而模仿人工智能。这可能吗？我将何时以及如何为每个实例的方法填充代码？

这是一个例子：

```
public class Person
{
    // data members
    private int myNumOfKids;
    private int myIncome;
    private int myCash;

    // constructor
    public Person(int kids, int income, int cash)
    {
        myNumOfKids = kids;
        myIncome = income;
        myCash = cash;
    }

    // member function in question
    public int giveCharity(Person friend)
    {
        int myCharity;
        // This is where I want to input different code for each person
        // that determines how much charity they will give their friend
        // based on their friend's info (kids, income, cash, etc...),
        // as well as their own tendency for compassion.
        myCash -= myCharity;
        return myCharity;
    }
}

Person John = new Person(0, 35000, 500);
Person Gary = new Person(3, 40000, 100);

// John gives Gary some charity
Gary.myCash += John.giveCharity(Gary); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:34:44.757

我想到了两种主要方法：

1) 给每个人一个定义函数的委托：

```
public Func<int> CharityFunction{get;set;} 
```

然后你只需要弄清楚如何设置它，并确保在使用它之前总是设置它。要调用它，只需说：

```
int charityAmount = CharityFunction(); 
```

2)`Person`上课`abstract`。添加一个抽象函数，如`int getCharityAmount()`. 然后创建新的子类型，每个子类型都提供该抽象函数的不同实现。

至于使用哪个，这将更多地取决于具体情况。你对函数有很多不同的定义吗？第一个选项需要较少的精力来添加一个新选项。创建对象后函数是否会更改？第二种选择是不可能的，只有第一种。您是否经常重复使用相同的功能？在这种情况下，第二种选择更好，这样调用者就不会不断地重新定义相同的少量函数。第二个也更安全一点，因为函数总是有一个定义，并且你知道一旦创建对象就不会改变它，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:32:46.483

为什么不通过传入实现不同方法`Person`的函数对象来构造对象。`Charity``giveCharity(Person friend)`

然后`person.giveCharity(Person friend)`可以简单地调用`my_charity.giveCharity(friend)`。

# c# - 在 datagridview 中显示二进制内容的按钮

> ID：14327043
> 
> 赞同：0
> 
> 时间：2013-01-14T21:29:49.143
> 
> 标签：c#, xml, datagridview, binary-data

我有一个 xml 文件，它充当数据表。它保存各种类型的数据。任何列中的数据类型都可能不同。一个例子是：row(1)String, int, date; 行（2）二进制，整数，日期；行（3）字符串，二进制，整数。

这导致了我要解决的问题，如何解析单元格内容并在数据类型为二进制或字节类型的单元格中放置一个按钮。

这很棘手，因为不仅所有单元格内容都是不同类型的，而且单元格不会自动分配给列类型，必须手动完成。

关于如何做到这一点的任何想法？

PS我认为使用CellValidating事件我可能能够获得我想要的行为，但是我不知道如何验证一个字符串实际上是二进制数据......

编辑：好的，所以我决定获得所需结果的最简单方法是让用户选择他们希望记录的数据类型。然后稍后检查每一列中的该数据类型，如果该数据类型存在于列中，则放置一个按钮。

我有一个“TableFactory”类，它使表将被序列化并存储在 xml 中。在这个类中，我添加了一个“ColumnDataTypes”枚举和一个部分来处理我想要允许的类型，现在只有 3 个，Integer、String 和 File(byte[])。这种新方法的问题在于，为了正确存储字节数组，我必须将其转换为 Base64String。然而，这将数据类型更改为字符串而不是字节，这使我再次回到开头......我如何解析列数据并在逻辑上确定它是一个字节数组而不仅仅是一个字符串。一旦我知道它是一个字节数组，我就可以在包含字节数组的单元格中放置一个按钮。有没有人对如何做到这一点有任何想法？

表工厂类：

```
 using System.Data;
    using System.Xml;
    using System.IO;
    using System.Xml.Serialization;
    using XML_Database.usrctrls;

    namespace XML_Database.data
    {
    public class TableFactory
{
    //string _tableName;
    DataTable _dt;

    //public string TableName { get { return _tableName; } set { _tableName = value; } }

    public TableFactory(string tableName)
    {
        if (this._dt == null)
        {
            this._dt = new DataTable(tableName);
        }
    }

    public DataTable Table
    {
        get { return this._dt; }
        set { this._dt = value; }
    }

    public void NewColumn(string ColumnName, ColumnTypes colType)
    {
        if (!this._dt.Columns.Contains(ColumnName))
        {
            switch (colType)
            {
                case ColumnTypes.String:
                    this._dt.Columns.Add(ColumnName, typeof(String));
                    break;
                case ColumnTypes.Integer:
                    this._dt.Columns.Add(ColumnName, typeof(Int32));
                    break;
                case ColumnTypes.Binary:
                    this._dt.Columns.Add(ColumnName, typeof(Byte[]));
                    break;
            }
        }
    }

    public void DeleteColumn(string ColumnName)
    {
        if (_dt.Columns.Contains(ColumnName))
        {
            _dt.Columns.Remove(ColumnName);
        }
    }

    public void SaveTable(string Path)
    {
        data.encryptFiles._SALT = data.dboptions.Salt();
        data.encryptStrings._SALT = data.dboptions.Salt();
        string tablePath = Path + "\\" + _dt.TableName + ".xml";
        DataSet ds = new DataSet();
        XmlDocument xDoc = new XmlDocument();
        ds.Tables.Clear();
        ds.Tables.Add(_dt.Copy());

        XmlElement xE = (XmlElement)Serialize(ds);
        string strXml = xE.OuterXml.ToString();

        xDoc.LoadXml(strXml);
        xDoc.Save(tablePath);
        if (data.dboptions.DBEncryptionOptions())
        {
            File.Delete(Path + "\\" + _dt.TableName + "_enc.xml");
            data.encryptFiles.EncryptFile(tablePath, tablePath.Replace(".xml", "_enc.xml"), data.encryptStrings.Decrypt(data.dboptions.Pwd(), data.dboptions.Salt()));
        }
    }

    public void LoadTable(string Path)
    {
        string tablePath = Path + "\\" + _dt.TableName + ".xml";
        XmlDocument xDoc = new XmlDocument();
        if (File.Exists(tablePath))
        {
            if (_dt.TableName.Contains("_enc"))
            {
                MemoryStream ms = new MemoryStream();
                data.encryptFiles._SALT = data.dboptions.Salt();
                data.encryptStrings._SALT = data.dboptions.Salt();
                data.encryptFiles.DecryptToMemory(tablePath, out ms, data.encryptStrings.Decrypt(data.dboptions.Pwd(), data.dboptions.Salt()));
                using (ms)
                {
                    xDoc.Load(ms);
                }
                DataSet ds = (DataSet)Deserialize(xDoc.DocumentElement, typeof(DataSet));
                _dt = ds.Tables[0];
            }
            else
            {
                xDoc.Load(tablePath);
                DataSet ds = (DataSet)Deserialize(xDoc.DocumentElement, typeof(DataSet));
                _dt = ds.Tables[0];
            }
        }
    }

    private object Deserialize(XmlElement xmlElement, System.Type type)
    {
        Object transformedObject = null;
        try
        {
            Stream memStream = StringToStream(xmlElement.OuterXml);
            XmlSerializer serializer = new XmlSerializer(type);
            transformedObject = serializer.Deserialize(memStream);
        }
        catch (Exception)
        {

        }
        return transformedObject;
    }

    private Stream StringToStream(string p)
    {
        MemoryStream memStream = null;
        try
        {
            byte[] buffer = Encoding.UTF8.GetBytes(p);
            memStream = new MemoryStream(buffer);
        }
        catch (Exception)
        {

        }
        finally
        {
            memStream.Position = 0;
        }
        return memStream;
    }

    private XmlElement Serialize(object TransformObject)
    {
        XmlElement serializedElement = null;
        try
        {
            MemoryStream memStream = new MemoryStream();
            XmlSerializer serializer = new XmlSerializer(TransformObject.GetType());
            serializer.Serialize(memStream, TransformObject);
            memStream.Position = 0;
            XmlDocument xDoc = new XmlDocument();
            xDoc.Load(memStream);
            serializedElement = xDoc.DocumentElement;
        }
        catch (Exception)
        {

        }
        return serializedElement;
    }
}
} 
```

任何帮助是极大的赞赏！:)

编辑：我可以添加图像但不能添加常规文件。理想情况下，添加文件和图像是理想的功能。但到目前为止，只有图像会进入我的字节数组列。如果我将列数据类型更改为字符串并存储转换后的 Base64String，我可以存储文件，但我仍然无法弄清楚如何解析数据以确认它是文件而不仅仅是文本......

编辑：好的，我更接近解决这个问题，但不知道如何克服困难......我可以得到一个按钮来显示，但不在正确的单元格中。这里有更多代码可以帮助任何人帮助我回答这个问题......

```
private void dataGridView1_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)
    {
        button1.ForeColor = Color.Red;
        try
        {
            for (int i = 0; i < dataGridView1.RowCount; i++)
            {
                foreach (DataGridViewCell cell in dataGridView1.Rows[i].Cells)
                {
                    if (cell.Value != null)
                    {
                        if (TryParseBinary(cell.Value.ToString()))
                        {
                            var buttonCell = new DataGridViewButtonCell();
                            buttonCell.Value = "Export File";
                            buttonCell.Style.Alignment = DataGridViewContentAlignment.MiddleCenter;
                            dataGridView1.Rows[i].Cells[cell.ColumnIndex] = buttonCell;
                        }
                    }
                }
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show("Grid Validation Error: " + ex.Message);
        }
    }

    private bool TryParseBinary(string p)
    {
        try
        {
            string path = "C:\\Temp\\" + DateTime.Now.Ticks.ToString() + ".test";
            byte[] bytes = Convert.FromBase64String(p);
            File.WriteAllBytes(path, bytes);

            //File.Delete(path);
            return true;
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error: " + ex.Message);
            return false;
        }
    } 
```

“TryParseBinary”是问题所在。它需要创建一个有效的文件来返回“true”，但我不确定如何让它足够聪明来判断它刚刚写的是否是一个有效的文件......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:43:53.903

好的，所以我能够为我的问题创建一个解决方案。这不完全是我想要的，但它确实完成了工作。我为我的 datagridview 使用“DragDrop”方法检查数据表中是否存在“文件”和“MIME”列。然后，如果它们不存在，我将创建这些列，如果存在，我将转换为 Base64String 的文件字节添加到“文件”列，并将文件扩展名添加到“MIME”列。然后我让“RowsAdded”事件将“文件”单元格更改为按钮。但是目前它没有保留文本“导出文件”，但我会继续努力，这似乎是一个简单的修复。下面是我的代码：

```
 private void dataGridView1_DragDrop(object sender, DragEventArgs e)
    {
        try
        {
            Point cursorPosition = dataGridView1.PointToClient(Cursor.Position);
            DataGridView.HitTestInfo info = dataGridView1.HitTest(cursorPosition.X, cursorPosition.Y);
            tableFactory = new data.TableFactory(TablesDropDown.SelectedValue.ToString());
            tableFactory.LoadTable(dbPath);

            if (e.Data.GetDataPresent(DataFormats.FileDrop))
            {
                string[] files = (string[])e.Data.GetData(DataFormats.FileDrop);

                foreach (DataColumn col in tableFactory.Table.Columns)
                {
                    if (col.ColumnName != "MIME" && col.ColumnName != "File")
                    {
                        tableFactory.NewColumn("MIME", ColumnTypes.String);
                        tableFactory.NewColumn("File", ColumnTypes.String);
                        tableFactory.SaveTable(dbPath);
                        ColumnsDataGrid();

                        dataGridView1.Rows[info.RowIndex].Cells["File"].Value = Convert.ToBase64String(GetFile(files));
                        FileInfo f = new FileInfo(files[0]);
                        dataGridView1.Rows[info.RowIndex].Cells["MIME"].Value = f.Extension;
                    }
                    else
                    {
                        dataGridView1.Rows[info.RowIndex].Cells["File"].Value = Convert.ToBase64String(GetFile(files));
                        FileInfo f = new FileInfo(files[0]);
                        dataGridView1.Rows[info.RowIndex].Cells["MIME"].Value = f.Extension;
                    }
                }
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show("This was not a valid file to store in the database. Error Msg: " + ex.Message);
        }
    }

    private byte[] GetFile(string[] files)
    {
        byte[] bytes = null;
        foreach (string file in files)
        {
            FileInfo fileInfo = new FileInfo(file);
            if (File.Exists(file))
            {
                bytes = File.ReadAllBytes(file);
            }
        }
        return bytes;
    }

    private void dataGridView1_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)
    {
        button1.ForeColor = Color.Red;
        try
        {
            for (int i = 0; i < dataGridView1.RowCount; i++)
            {
                foreach (DataGridViewColumn col in dataGridView1.Columns)
                {
                    if (col.Name == "File")
                    {
                        var buttonCell = new DataGridViewButtonCell();
                        buttonCell.Value = "Export File";
                        buttonCell.Style.Alignment = DataGridViewContentAlignment.MiddleCenter;
                        dataGridView1.Rows[i].Cells[col.Index] = buttonCell;
                    }
                }
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show("Grid Validation Error: " + ex.Message);
        }
    } 
```

如果您看到需要调整或可以做得更好的东西，我愿意接受建议！:)

# javascript - 处理小数

> ID：14327044
> 
> 赞同：0
> 
> 时间：2013-01-14T21:29:50.370
> 
> 标签：javascript, html

我需要帮助解决我遇到的这个小数问题。通过在同一个文本框上制作英尺和英寸。在以英尺（英尺）为单位获得一个人的高度的情况下，情况是 5.12 英尺 = 6 英尺，而 5.13 是不必要的（不是真的，我只是想以英尺和英寸为单位订购）。

有些人会将其设为 2 个不同的文本框，分别为英尺和英寸。但我想只用一个不会达到 5.12 的文本框尝试它，或者在文本框的情况下最多只能接受 0.11 英寸。

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:37:00.257

除了每次输入字符时解析字符串之外，我看不到任何解决方法。

根据小数点将字符串拆分为英尺和英寸，并禁止任何超过 11 英寸的字符。

您还可以在用户完成输入后解析字符串，并在表单不正确或无意义时通知她。

但是另一个问题：您这样做而不是两个下拉菜单有什么特别的原因吗？您可以用 0 到 11 填充英寸一，这很简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:45:31.353

使用我的[jQuery iMask 插件](https://github.com/cwolves/jQuery-iMask "jQuery iMask 插件")的一种可能性：

```
$('#i4').iMask({
      type   : 'fixed'
    , mask   : '9\' 99\"'
    , sanity : function( val ){
        val = /([\d ]\' )([\d ])([\d ])\"/.exec( val );

        (val[2]>1) && (val[3]=val[2]) && (val[2]='0');
        (val[2]==1) && (val[3]>1) && (val[3]='1');

        val.shift();
        return val.join('');
    }
}) 
```

[演示](http://jsfiddle.net/AKhuX/2/ "演示")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T21:35:57.527

您通常通过分别计算整个部分和小数部分来处理这个问题。

要找到小数部分 (0.12)，您只需从原始 (5.12) 中减去整个部分 (5)。当然乘以一英尺的英寸数。

```
var height = 5.12;
var feet = Math.floor(height);
var inches = Math.floor( 12.0 * (height-feet) ); 
```

我已经四舍五入了。如果你想四舍五入到最接近的，你可以这样做：

```
var inches = Math.round( 12.0 * (height-feet) );
if( inches == 12 ) {
    feet++;
    inches = 0;
} 
```

# android - 删除 TextView 的上边距

> ID：14327047
> 
> 赞同：1
> 
> 时间：2013-01-14T21:29:59.263
> 
> 标签：android, android-layout, android-linearlayout

我有一些`LinearLayout`对象，其中有几个东西，包括两个`TextView`s。不幸的是，我在它们之间有很大的空间，我不知道为什么。

自己看（在内容框架和`#642954 - 14/25/9814`事物之间）：

[http://i.stack.imgur.com/832QN.png](http://i.stack.imgur.com/832QN.png)

这是我的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    >

    <ImageView
        android:id="@+id/img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:contentDescription="@string/smiley"
        android:padding="10dp"
        />

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_weight="1"
        android:includeFontPadding="false"
        >

        <TextView android:id="@+id/contenu"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:background="@drawable/round"
             android:padding="10dp"
             android:layout_margin="5dp"
             android:includeFontPadding="false"
             android:layout_marginBottom="-10dp"
             />

        <TextView android:id="@+id/infos"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:gravity="right"
             android:layout_margin="5dp"
             android:includeFontPadding="false"
             android:padding="0dp"
             android:layout_marginTop="-10dp"
             />

    </LinearLayout>

</LinearLayout> 
```

这里是`round.xml`：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item>
        <shape android:shape="rectangle" >
            <solid android:color="#20000000" />

            <corners android:radius="13dp" />
        </shape>
    </item>
    <item android:bottom="2px">
        <shape xmlns:android="http://schemas.android.com/apk/res/android" >
            <solid android:color="#FFFFFF" />

            <corners android:radius="13dp" />

            <stroke
                android:width="1dp"
                android:color="#BBBBBB" />
        </shape>
    </item>

</layer-list> 
```

你可以帮帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-15T02:06:09.923

机器人：includeFontPadding="假"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T21:58:21.700

不不不。您使用负边距，这可能具有未指定的行为（可能取决于 Android 操作系统版本）。我已经在 API 8 上对此进行了测试，负边距根本不起作用。相反，将每个边距设置为自定义非负值，如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    >

    <ImageView
        android:id="@+id/img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:contentDescription="@string/smiley"
        android:padding="10dp"
        />

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_weight="1"
        android:includeFontPadding="false"
        >

        <TextView
            android:id="@+id/contenu"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginBottom="0dp"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="5dp"
            android:background="@drawable/round"
            android:includeFontPadding="false"
            android:padding="10dp"
            android:text="" />

        <TextView
            android:id="@+id/infos"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="0dp"
            android:gravity="right"
            android:includeFontPadding="false"
            android:padding="0dp"
            android:text="" />

    </LinearLayout>

</LinearLayout> 
```

在这里，我将所有边距设置`5dp`为：

*   `contenu`的下边距：`0dp`
*   `infos`' 上边距：`0dp`

瞧，所有的空间都消失了。根据您的喜好设置它们以调整 first 和 second 之间的差距`TextView`。

**编辑**

我已经检查了我在上面写的*未指定行为的 SDK 源。*

事实证明，在为`LinearLayout`孩子指定边距时，您有两个选项，您必须选择其中之一：

1.  设置`margin`属性。这有效地将*所有*边距设置为 的值`margin`。**注意：**此选项具有优先级，这意味着，如果您为其设置非负值，`margin`它将忽略您为任何边距单独设置的任何值。
2.  分别设置每个边距。

您正在设置全局`margin`值，这实际上导致`marginTop`/`marginBottom`值被忽略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:32:45.977

试试这个等间距

```
 <TextView android:id="@+id/contenu"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:background="@drawable/round"
             android:padding="10dp"
             android:layout_margin="5dp"
             android:includeFontPadding="false"
             android:layout_marginTop="5dp"
             />

        <TextView android:id="@+id/infos"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:gravity="right"
             android:layout_margin="5dp"
             android:includeFontPadding="false"
             android:padding="0dp"
             android:layout_marginTop="5dp"
             /> 
```

# ruby-on-rails - Heroku bundler 忽略 bson

> ID：14327050
> 
> 赞同：1
> 
> 时间：2013-01-14T21:30:05.767
> 
> 标签：ruby-on-rails, mongodb, heroku

我正在尝试在heroku 上部署一个使用mongodb 和mongoid 的rails 应用程序。一切都在本地运行良好，但是当我部署它时（heroku 服务器启动正常），我收到一个错误，即找不到“bson”gem：

```
/app/vendor/bundle/ruby/1.9.1/gems/mongo-1.3.1/lib/mongo.rb:56:in `require': no such file to load -- bson (LoadError) 
```

奇怪的是我明确地将它包含在我的 gemfile 中。当我在本地运行 'bundle install' 时，Bundler 会安装 bson gem，但是当我使用 'git push heroku master' 来初始化应用程序时，heroku 的 bundler 会完全忽略 bson gem——它会安装 mongo、mongoid 以及除 bson 之外的所有内容。

这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'
gem 'mongo'
gem 'bson'
gem 'mongoid'

group :development do
  gem 'therubyrhino'
end

group :assets do
  gem "less-rails" #Sprockets (what Rails 3.1 uses for its asset pipeline) supports LESS
  gem "twitter-bootstrap-rails"
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

gem 'devise'

gem 'omniauth'
gem 'omniauth-facebook' 
```

当我运行“heroku run bundle install”时：

```
Fetching gem metadata from https://rubygems.org/.........
Fetching gem metadata from https://rubygems.org/..
Using rake (10.0.3) 
Using i18n (0.6.1) 
Using multi_json (1.5.0) 
Using activesupport (3.2.11) 
Using builder (3.0.4) 
Using activemodel (3.2.11) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.4) 
Using rack-cache (1.2) 
Using rack-test (0.6.2) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.2.2) 
Using actionpack (3.2.11) 
Using mime-types (1.19) 
Using polyglot (0.3.3) 
Using treetop (1.4.12) 
Using mail (2.4.4) 
Using actionmailer (3.2.11) 
Using arel (3.0.2) 
Using tzinfo (0.3.35) 
Using activerecord (3.2.11) 
Using activeresource (3.2.11) 
Using bcrypt-ruby (3.0.1) 
Using coffee-script-source (1.4.0) 
Using execjs (1.4.0) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using json (1.7.6) 
Using rdoc (3.12) 
Using thor (0.16.0) 
Using railties (3.2.11) 
Using coffee-rails (3.2.2) 
Using commonjs (0.2.6) 
Using orm_adapter (0.4.0) 
Using warden (1.2.1) 
Using devise (2.2.1) 
Using multipart-post (1.1.5) 
Using faraday (0.8.4) 
Using hashie (1.2.0) 
Using httpauth (0.2.0) 
Using jquery-rails (2.1.4) 
Using jwt (0.1.5) 
Using less (2.2.2) 
Using less-rails (2.2.6) 
Using mongo (1.3.1) 
Using moped (1.3.2) 
Using origin (1.0.11) 
Using mongoid (3.0.17) 
Using oauth2 (0.8.0) 
Using omniauth (1.1.1) 
Using omniauth-oauth2 (1.1.1) 
Using omniauth-facebook (1.4.1) 
Using bundler (1.3.0.pre.5) 
Using rails (3.2.11) 
Using sass (3.2.5) 
Using sass-rails (3.2.5) 
Using twitter-bootstrap-rails (2.2.0) 
Using uglifier (1.3.0) 
Cannot write a changed lockfile while frozen.
Your bundle is complete! It was installed into ./vendor/bundle 
```

请注意，它不像我在本地运行 bundle install 时那样“使用 bson (1.3.1)”：

```
Using rake (10.0.3) 
Using i18n (0.6.1) 
Using multi_json (1.5.0) 
Using activesupport (3.2.11) 
Using builder (3.0.4) 
Using activemodel (3.2.11) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.4) 
Using rack-cache (1.2) 
Using rack-test (0.6.2) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.2.2) 
Using actionpack (3.2.11) 
Using mime-types (1.19) 
Using polyglot (0.3.3) 
Using treetop (1.4.12) 
Using mail (2.4.4) 
Using actionmailer (3.2.11) 
Using arel (3.0.2) 
Using tzinfo (0.3.35) 
Using activerecord (3.2.11) 
Using activeresource (3.2.11) 
Using bcrypt-ruby (3.0.1) 
Using bson (1.3.1) 
Using coffee-script-source (1.4.0) 
Using execjs (1.4.0) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using json (1.7.6) 
Using rdoc (3.12) 
Using thor (0.16.0) 
Using railties (3.2.11) 
Using coffee-rails (3.2.2) 
Using commonjs (0.2.6) 
Using orm_adapter (0.4.0) 
Using warden (1.2.1) 
Using devise (2.2.1) 
Using multipart-post (1.1.5) 
Using faraday (0.8.4) 
Using hashie (1.2.0) 
Using httpauth (0.2.0) 
Using jquery-rails (2.1.4) 
Using jwt (0.1.5) 
Using less (2.2.2) 
Using less-rails (2.2.6) 
Using mongo (1.3.1) 
Using moped (1.3.2) 
Using origin (1.0.11) 
Using mongoid (3.0.17) 
Using oauth2 (0.8.0) 
Using omniauth (1.1.1) 
Using omniauth-oauth2 (1.1.1) 
Using omniauth-facebook (1.4.1) 
Using bundler (1.2.3) 
Using rails (3.2.11) 
Using sass (3.2.5) 
Using sass-rails (3.2.5) 
Using therubyrhino_jar (1.7.4) 
Using therubyrhino (2.0.2) 
Using twitter-bootstrap-rails (2.2.0) 
Using uglifier (1.3.0) 
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

heroku 的捆绑器上有一些疯狂的过滤器吗？一切似乎都运行良好，只是它完全忽略了 Gemfile 和 Gemfile.lock 中 bson 的存在。

注意：我在本地使用 jruby，就像 heroku 一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:06:20.417

尝试从您的 Gemfile 中删除`bson`和。`mongo`Mongoid 版本 3 及更高版本不需要它们，它们现在将[moped](http://mongoid.org/en/moped)用于 BSON 实现和 MongoDB 驱动程序。

**编辑**

我突然想到，您可能故意使用`mongo`与 Mongoid 并行提供的驱动程序。如果是这种情况，也许您可​​以将`mongo`呼叫转移到`moped`. 我不确定这有多可行。这取决于您如何使用它。

如果您决定仍要同时使用这两个驱动程序，则捆绑器输出中可能会有线索。看起来您和 Heroku 使用的版本不同`bundler`：

```
< Using bundler (1.3.0.pre.5) 
---
> Using bundler (1.2.3) 
```

# cmake - cmake 未定义的引用

> ID：14327052
> 
> 赞同：1
> 
> 时间：2013-01-14T21:30:16.450
> 
> 标签：cmake, undefined-reference

我正在使用 cmake 来构建我的项目，但我收到了这些错误。

```
Scanning dependencies of target las2vtk
[ 50%] Building CXX object CMakeFiles/las2vtk.dir/LAS2VTK.cxx.o
[100%] Building CXX object CMakeFiles/las2vtk.dir/PointSet.cxx.o
Linking CXX executable las2vtk
CMakeFiles/las2vtk.dir/LAS2VTK.cxx.o: In function `main':
LAS2VTK.cxx:(.text+0xf1): undefined reference to `PointSet<PointND<3, float> >::read_LAS(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&, int)'
LAS2VTK.cxx:(.text+0x104): undefined reference to `PointSet<PointND<3, float> >::write_VTK(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&)'
collect2: ld returned 1 exit status
make[2]: *** [las2vtk] Error 1
make[1]: *** [CMakeFiles/las2vtk.dir/all] Error 2
make: *** [all] Error 2 
```

我很困惑为什么这些函数在用 PointSet.cxx 编写时是未定义的。下面是我的 CMakeLists.txt 文件。目前 PointSet.h、PointSet.cxx 和 LAS2VTK.cxx 都在同一个文件夹中，但我可能会更改它。

```
cmake_minimum_required(VERSION 2.8)

PROJECT(las2vtk)

set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}/cmake/Modules/")

set(SOURCES PointSet.cxx)

set(LASLIBS_INCLUDE "${CMAKE_MODULE_PATH}/lastools/laslib/inc")
set(LASLIBS_LIB "${CMAKE_MODULE_PATH}/lastools/laslib/lib")

include_directories(${LASLIBS_INCLUDE})
link_directories(${LASLIBS_LIB})
set(LASLIBS las)

add_executable(las2vtk LAS2VTK.cxx ${SOURCES})

target_link_libraries(las2vtk ${LASLIBS})

find_package(VTK REQUIRED)
include(${VTK_USE_FILE})

if(VTK_LIBRARIES)
  target_link_libraries(las2vtk ${VTK_LIBRARIES})
else()
  target_link_libraries(las2vtk vtkHybrid )
endif() 
```

当我在 PointSet.h 文件中有函数定义并且没有 PointSet.cxx 文件但我想清理代码库时，它编译得很好。

# python - 未分配 Python 线程名称

> ID：14327055
> 
> 赞同：2
> 
> 时间：2013-01-14T21:30:31.150
> 
> 标签：python, multithreading

尝试学习多线程。我下载了一些示例代码来玩，我最终得到了这个：

```
import threading
import time

class myThread (threading.Thread):
    def __init__(self, threadID, name, delay, counter):
        super().__init__()
        self.threadID = threadID
        self.name = name
        self.delay = delay
        self.counter = counter
        threading.Thread.__init__(self)
        print(name,"created")
        print(self.name,"created")
    def run(self):
        print ("Starting " + self.name)
        print_time(self.name, self.delay, self.counter)
        print ("Exiting " + self.name)

def print_time(threadName, delay, counter):
    while counter:
        time.sleep(delay)
        print (threadName, time.ctime(time.time()))
        counter -= 1

# Create new threads
thread1 = myThread(1, "a", 1, 5)
thread2 = myThread(2, "b", 2, 3)

# Start new Threads
thread1.start()
thread2.start()
thread1.join()
thread2.join()

print ("Exiting Main Thread") 
```

但至少可以说，我的输出是出乎意料的。

```
a created
Thread-2 created
b created
Thread-4 created
Starting Thread-2
Starting Thread-4
Thread-2 Mon Jan 14 16:14:29 2013
Thread-2 Mon Jan 14 16:14:30 2013
Thread-4 Mon Jan 14 16:14:30 2013
Thread-2 Mon Jan 14 16:14:31 2013
Thread-2 Mon Jan 14 16:14:32 2013
Thread-4 Mon Jan 14 16:14:32 2013
Thread-2 Mon Jan 14 16:14:33 2013
Exiting Thread-2
Thread-4 Mon Jan 14 16:14:34 2013
Exiting Thread-4
Exiting Main Thread 
```

为什么 self.name 在以这种方式分配后不评估为“a”或“b”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T21:35:59.217

`name`在 中重新初始化`threading.Thread.__init__(self)`。没有理由两次调用父构造函数。

# windows-services - 如何使用本地系统以外的帐户将 RavenDB 作为服务运行？

> ID：14327057
> 
> 赞同：2
> 
> 时间：2013-01-14T21:30:32.507
> 
> 标签：windows-services, ravendb, windows-authentication

我正在尝试安装 RavenDB 以作为 Windows 服务运行。默认情况下，它将自己设置为在本地系统帐户下运行，因此我试图通过在专用帐户下运行它来降低安全风险。我已经为程序目录 c:\Program Files\RavenDB 和数据目录 d:\Data\RavenDB 授予对文件系统的完全访问权限。但是，当我尝试启动服务时，它会立即失败，并且在事件日志中出现以下错误：

```
RavenDB service failed to start because of an error
System.Net.HttpListenerException (0x80004005): Access is denied
   at System.Net.HttpListener.AddAllPrefixes()
   at System.Net.HttpListener.Start()
   at Raven.Database.Server.HttpServer.StartListening() in c:\Builds\RavenDB-Stable\Raven.Database\Server\HttpServer.cs:line 350
   at Raven.Server.RavenDbServer..ctor(RavenConfiguration settings) in c:\Builds\RavenDB-Stable\Raven.Server\RavenDbServer.cs:line 43
   at Raven.Server.RavenService.<OnStart>b__0() in c:\Builds\RavenDB-Stable\Raven.Server\RavenService.cs:line 37 
```

那么，如何配置用户来运行 RavenDB？我需要授予哪些权限？我检查了 RavenDB 文档和论坛，但没有看到任何地方讨论过这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:58:41.550

我假设您缺少服务帐户的 url acl。以管理员身份打开命令提示符并输入以下内容

```
netsh http add urlacl url=http://+:8080/ user=domain\user 
```

这应该为您的服务帐户授予必要的权限，以便为此端口创建一个 HttpListener

# debugging - dbx 调试器能够在 dbx 启动时传递命令行参数吗？

> ID：14327059
> 
> 赞同：7
> 
> 时间：2013-01-14T21:30:41.023
> 
> 标签：debugging, dbx

根据我正在调试的平台，我同时使用 GDB 和 DBX。我需要调试一个需要传递 20 个命令行参数的工具。GDB 有一个选项，您可以在 gdb 启动时传递这些参数：

gdb --args ...

我正在寻找在 DBX 中执行此操作的类似方法。我希望节省时间，而不是一直剪切和粘贴。我阅读了手册的部分内容，但我看不到这样做的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T20:42:02.577

您可以在启动时执行*runargs*命令

```
dbx -c "runargs --all --your --flags" a.out 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-23T11:35:42.073

如果您需要`yourApp`使用 dbx 运行具有名称的应用程序进行调试。例如： `yourApp param1 param2`

您可以使用以下命令执行此`run`操作`dbx`：

```
> dbx yourApp
Type 'help' for help.
reading symbolic information ...
(dbx) run param1 param2
      //some output made by yourApp
(dbx) 
```

# scala - 使用我项目中的自定义 sbt 插件

> ID：14327062
> 
> 赞同：3
> 
> 时间：2013-01-14T21:30:43.677
> 
> 标签：scala, sbt

这就是我想要完成的事情。

我有几个作为插件构建的自定义 SBT 任务。他们目前住在我的 Build.scala 文件中。
我想把它们变成自己的`package/folder` `structure/files`。但是，显然，当我这样做并尝试导入它们（例如 import `org.myorg.MyPlugin`）时，它会失败，因为找不到它（它尚未构建）。

有什么方法可以在不将自定义插件打包到 jar 中的情况下实现这一点？

提前谢谢了！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T00:35:34.933

该`project/`目录本身就是一个 sbt 项目。因此，您可以将文件放入`project/src/main/scala/org/myorg/MyPlugin.scala`.

# android - 使用来自 SQLite 本地数据库的数据的自定义 ArrayAdapter

> ID：14327063
> 
> 赞同：1
> 
> 时间：2013-01-14T21:30:44.847
> 
> 标签：android, sqlite, android-arrayadapter, custom-adapter

我正在做一个项目，我想在 ListView 中显示联系人姓名列表。这些名称是从本地 sqli db 中检索的。到目前为止，我已经设法检索名称并使用标准 ArrayAdapter 类显示它们。

但是，为了获得更多控制权，我正在尝试创建自己的适配器，以允许我在每一行上也显示控制按钮。我对这段代码感到困惑：

```
private void fillData() {
    Cursor mContactsCursor = mDbAdapter.getAllContacts();
    startManagingCursor(mContactsCursor);

    String [] from = new String[] {ContactsDbAdapter.COLUMN_FNAME, ContactsDbAdapter.COLUMN_LNAME};
    int [] to = new int [] { R.id.fname, R.id.lname};

    //What variables should constructor take? 
    adapter = new ContactsListAdapter(this, from, to);

    data.setAdapter(adapter);

} 
```

基本上我不知道如何将这些值传递给构造函数，或者我是否应该这样做？

```
String [] from = new String[] {ContactsDbAdapter.COLUMN_FNAME,   ContactsDbAdapter.COLUMN_LNAME};
    int [] to = new int [] { R.id.fname, R.id.lname}; 
```

这是我的 ContactsListAdapter 类：

```
public class ContactsListAdapter extends ArrayAdapter<Contact> {

private List<Contact> contacts;
private Button deleteBtn;
private Button editBtn;
private TextView name;

public ContactsListAdapter(Context context,List<Contact> contacts) {
    super(context, R.layout.contact_row, contacts);
    this.contacts = contacts;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View v = convertView;

    if(v == null){
        LayoutInflater vi = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.contact_row, null);
    }

    //assign values to the view
    final Contact c = this.contacts.get(position);

    //add listeners to buttons
    deleteBtn = (Button)v.findViewById(R.id.deleteBtn);
    deleteBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Toast.makeText(v.getContext(), "Deleted", Toast.LENGTH_SHORT).show();
        }
    });

    editBtn = (Button)v.findViewById(R.id.editBtn);
    editBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Toast.makeText(v.getContext(), "Edit", Toast.LENGTH_SHORT).show();
        }
    });

    //insert name into the text view
    name = (TextView)v.findViewById(R.id.name);
    name.setText(c.getName());

    return v;

} 
```

}

此类的代码取自一个示例，其中我使用了一个自定义列表适配器，该适配器从硬编码数组中获取数据，因此在从数据库中获取数据时我可能遗漏了一些东西。

非常感谢任何建议。非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T21:53:10.243

参考这个例子，

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

如果您仍然对如何将值传递给您的自定义 ArrayListAdapter 感到困惑，请告诉我...

请从您的表中检索所有记录，如下所示并将其添加到 arrayList

```
contactList.add(contact); 
```

代码片段，

```
 public List<Contact> getAllContacts() {
        List<Contact> contactList = new ArrayList<Contact>();
        // Select All Query
        String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                Contact contact = new Contact();
                contact.setID(Integer.parseInt(cursor.getString(0)));
                contact.setName(cursor.getString(1));
                contact.setPhoneNumber(cursor.getString(2));
                // Adding contact to list
                contactList.add(contact);
            } while (cursor.moveToNext());
        }

        // return contact list
        return contactList;
    } 
```

新的 CustomerAdapter（this、resid、contactList）；// 这就是你需要的自定义适配器在你的自定义适配器中

公共类 CustomAdapter 扩展 ArrayAdapter {

```
Context context; 
ArrayList<Tip> objects; 

public CustomAdapter(Context applicationContext, int dovizLayout, ArrayList<Contact> ts) {
    super(applicationContext, dovizLayout);
    this.context = applicationContext;
    this.objects = (ArrayList) ts;
} 
```

# spring - Spring、Hibernate、Tiles、OpenSessionInViewFilter 和 LazyInitializationException

> ID：14327066
> 
> 赞同：1
> 
> 时间：2013-01-14T21:30:52.563
> 
> 标签：spring, hibernate, lazy-loading, tiles, open-session-in-view

当我尝试访问延迟加载的集合时，我在 jsp 上收到了 LazyInitializationException：

```
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.navigator.category.alias.CategoryAlias.products, no session or session was closed
    org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:383)
    org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:375)
    org.hibernate.collection.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:368)
    org.hibernate.collection.AbstractPersistentCollection.read(AbstractPersistentCollection.java:111)
    org.hibernate.collection.PersistentBag.iterator(PersistentBag.java:272)
    org.apache.taglibs.standard.tag.common.core.ForEachSupport.toForEachIterator(ForEachSupport.java:348)
    org.apache.taglibs.standard.tag.common.core.ForEachSupport.supportedTypeForEachIterator(ForEachSupport.java:224)
    org.apache.taglibs.standard.tag.common.core.ForEachSupport.prepare(ForEachSupport.java:155)
    javax.servlet.jsp.jstl.core.LoopTagSupport.doStartTag(LoopTagSupport.java:256)
    org.apache.jsp.WEB_002dINF.jsp.admin.categoryalias.all_005fcategory_005faliases_jsp._jspx_meth_c_005fforEach_005f1(all_005fcategory_005faliases_jsp.java:334)
    org.apache.jsp.WEB_002dINF.jsp.admin.categoryalias.all_005fcategory_005faliases_jsp._jspx_meth_c_005fforEach_005f0(all_005fcategory_005faliases_jsp.java:220)
    org.apache.jsp.WEB_002dINF.jsp.admin.categoryalias.all_005fcategory_005faliases_jsp._jspService(all_005fcategory_005faliases_jsp.java:111)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet._serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:954)
    org.apache.jasper.runtime.PageContextImpl.doInclude(PageContextImpl.java:684)
    org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:678)
    org.apache.tiles.jsp.context.JspTilesRequestContext.include(JspTilesRequestContext.java:103)
    org.apache.tiles.jsp.context.JspTilesRequestContext.dispatch(JspTilesRequestContext.java:96)
    org.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)
    org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
    org.apache.tiles.renderer.impl.ChainedDelegateAttributeRenderer.write(ChainedDelegateAttributeRenderer.java:76)
    org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:336)
    org.apache.tiles.template.InsertAttributeModel.renderAttribute(InsertAttributeModel.java:210)
    org.apache.tiles.template.InsertAttributeModel.end(InsertAttributeModel.java:126)
    org.apache.tiles.jsp.taglib.InsertAttributeTag.doTag(InsertAttributeTag.java:311)
    org.apache.jsp.WEB_002dINF.jsp.admin.common.admin_002dlayout_jsp._jspx_meth_tiles_005finsertAttribute_005f2(admin_002dlayout_jsp.java:158)
    org.apache.jsp.WEB_002dINF.jsp.admin.common.admin_002dlayout_jsp._jspService(admin_002dlayout_jsp.java:88)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet._serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.tiles.servlet.context.ServletTilesRequestContext.forward(ServletTilesRequestContext.java:241)
    org.apache.tiles.servlet.context.ServletTilesRequestContext.dispatch(ServletTilesRequestContext.java:222)
    org.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)
    org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:690)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:644)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:627)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:321)
    org.springframework.web.servlet.view.tiles2.TilesView.renderMergedOutputModel(TilesView.java:124)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1157)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:927)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:91)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    com.navigator.filter.RedirectAndSearchEngineFilter.doFilterInternal(RedirectAndSearchEngineFilter.java:125)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

网页.xml：

```
 <filter>
        <filter-name>openSessionInViewFilter</filter-name>
        <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>openSessionInViewFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
...
    <servlet>
        <servlet-name>navigator</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/navigator-servlet.xml,
        /WEB-INF/security-context.xml
    </param-value>
</context-param>
<servlet-mapping>
    <servlet-name>navigator</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

导航器-servlet.xml：

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="configLocation">
        <value>classpath:hibernate.cfg.xml</value>
    </property>
    <property name="configurationClass" value="org.hibernate.cfg.AnnotationConfiguration" />
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <property name="definitions" value="/WEB-INF/tiles.xml" />
    <property name="preparerFactoryClass" value="org.springframework.web.servlet.view.tiles2.SpringBeanPreparerFactory" />
</bean>

<bean id="viewResolver" class="org.springframework.web.servlet.view.tiles2.TilesViewResolver">
    <property name="requestContextAttribute" value="requestContext" />

    <property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView" />
</bean> 
```

此外，我在 navigator-servlet.xml 的开头有几个指令（我不确定这一切都是必需的）：

```
<tx:annotation-driven />
<mvc:annotation-driven />
<context:component-scan base-package="com.navigator" />
<context:annotation-config />
<mvc:resources mapping="/robots.txt" location="/robots.txt" />
<mvc:default-servlet-handler /> 
```

我知道 LazyInitializationException 是常见问题，但我花了很多时间和问题在 stackoverflow 上是我修复它的最后希望。

**UPD1：**休眠版本 3.5.6，Spring - 3.1.0.RELEASE

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:33:14.013

这是与 DispatcherServlet 和 contextConfigLocation 之间的“冲突”有关的问题。这个答案对我很有帮助：[https ://stackoverflow.com/a/12463483/1462024](https://stackoverflow.com/a/12463483/1462024)

为了解决我的问题 DispatcherServlet 应该以下一种方式创建（**应该在 DispatcherServlet 创建时添加 init-param 部分**）：

```
<servlet>
    <servlet-name>navigator</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
      <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value></param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:57:40.620

您的配置看起来不错，从堆栈跟踪中可以看到 OpenSessionInViewFilter 运行正常。这让我们至少有两种可能性：

1.  您已手动关闭会话（不太可能）
2.  CategoryAlias 已分离（使用 session.evict，或者因为您的实例是 .clone()'ed）

# image-processing - 计算位图面积的开源程序

> ID：14327067
> 
> 赞同：-1
> 
> 时间：2013-01-14T21:30:55.253
> 
> 标签：image-processing, open-source, measurement

我刚刚为显微镜买了一台徕卡数码相机。它附带了一个软件来拍照和**校准图片（每毫米像素）**，它可以测量长度并在文件中打印一个 1 毫米的标尺，但我也想测量区域。测量多边形面积的插件应该花费大约 1000 欧元。

**因此，我正在寻找一个开源程序，它可以测量`jpg`( `tif`, `png`...) 文件中多边形的面积。**

例如显微镜图片显示了一只苍蝇的翅膀，我想用鼠标单击翅膀周围的多边形并得到“4.32 mm^2”

如果没有，我将不得不自己启动它，但我确信这是一个常见问题解答，并且我在搜索引擎中使用了错误的关键字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-21T20:23:29.303

我倾向于使用开源矢量绘图应用程序“inkscape”来完成这类工作。

*   导入图像（文件 -> 导入）
*   绘制您需要测量的多边形（Shift + F6）
*   从菜单扩展 -> 可视化路径 -> 测量路径中选择...
*   将比例因子设置为您从校准中知道的比例因子
*   将长度单位设置为 mm
*   按“应用”。这将在绘图中添加一个区域指示作为文本字段

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-12T17:48:57.407

[您可以使用Fiji](http://fiji.sc/Fiji)（ImageJ 发行版）拍照和执行图像分析。其他图像分析工具 Cellprofiler 可以计算对象特征。

带有堡盟光电适配器的 Micromanager 项目也可以与您的相机一起处理。另请查看此[软件列表](http://imperial.ac.uk/imagingfacility/links/imaging_software)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-17T16:15:10.153

**Engauge Digitizer**支持在位图中测量 [http://sourceforge.net/projects/digitizer/](http://sourceforge.net/projects/digitizer/)

# objective-c - @interface UIViewController {

> ID：14327069
> 
> 赞同：1
> 
> 时间：2013-01-14T21:31:02.247
> 
> 标签：objective-c, methods, interface, delegates

声明接口后，在 .h 文件中调用的内容是什么`<`...`>`

示例（`UIWebViewDelegate`部分）：

```
@interface ViewController : UIViewController <UIWebViewDelegate> { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:35:48.713

它们被称为“协议”。语法声明该类符合该特定协议，即。它不仅实现了`ViewController`类接口中声明的方法，还实现了`UIWebViewDelegate`协议中声明的方法。Objective C*协议*在概念上类似于 Java*接口*。[在http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithProtocols/WorkingwithProtocols.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithProtocols/WorkingwithProtocols.html)有更完整的协议描述

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:37:08.690

它们被称为[协议](http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Protocol.html)。他们指定您的类执行或可能实现的方法。它们对于委托之类的东西很有用，因为当您编写需要委托的类时，您通常希望确保委托实现您需要的所有方法。您可以通过为您的委托定义一个协议并只允许您的委托成为实现该协议的对象来确保这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:40:59.397

它们是协议。当您在 '<' 和 '>' 之间声明它们时，这意味着“该类符合此/这些协议>。协议是该类必须实现的一组方法。有必需的方法（因此编译器会发出警告如果你不实现它们）和可选方法（只有在你想要的时候才能实现）。然后你可以声明一个 id 类型的变量。这意味着 id 变量可以存储一个指向实现的类的对象的指针这个协议，或者为零。

# c# - 如何解决“InvalidCastException”？

> ID：14327071
> 
> 赞同：3
> 
> 时间：2013-01-14T21:31:12.410
> 
> 标签：c#, winforms, casting

我`InvalidCastException`在以下代码的运行时得到一个“”：

我的 C# WinForm 代码包含一个使用以下代码从数据库填充的组合框：

```
public void PopulateCompetitionFormatDd()
{
     var _competitionFormat            = new CompetitionFormatBL();
     cbCompetitionFormat.DataSource    = _competitionFormat.GetByAllCompetitionFormats();
     cbCompetitionFormat.ValueMember   = "CompetitionFormatId";
     cbCompetitionFormat.DisplayMember = "CompetitionFormatType";
} 
```

( ) 是数字列表，( `ValueMember`)是文本。当我在运行时更改此组合框中的项目时，我收到错误“ ”。`CompetitionFormatId``DisplayMember``CompetitionFormatType``string``InvalidCastException`

```
private void cbCompetitionFormat_SelectedIndexChanged(object sender, EventArgs e)
{
     int competitionFormat = 1;
     competitionFormat = (int)cbCompetitionFormat.SelectedValue;
} 
```

任何想法我做错了什么以及如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:36:41.840

您必须检查它是否为整数。

```
int competitionFormat;
bool result = Int32.TryParse(cbCompetitionFormat.SelectedValue, out competitionFormat);

if (result) { } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T23:25:42.950

我终于得到了这个问题的答案，并且在这个网站上回答了另一个类似的问题。在此处找到答案：[表单加载时停止触发组合框的 selectedIndexChanged 事件](https://stackoverflow.com/questions/3263240/how-to-stop-a-comboboxs-selectedindexchanged-event-from-firing-when-the-form-lo)

答案是：如果您只想在用户更改组合框中的选定项时做出反应，那么最好订阅 SelectionChangeCommitted 而不是 SelectedIndex(或 Value)Changed。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T00:07:37.550

The problem lies here:

```
private void cbCompetitionFormat_SelectedIndexChanged(object sender, EventArgs e)
{
    int competitionFormat = 1;
    competitionFormat = (int)cbCompetitionFormat.SelectedValue; // <- This is an invalid cast
} 
```

`SelectedValue` returns just that - the selected value, NOT the selected index. Using the property `SelectedIndex` will return what you want (0 indexed), and (I think) you don't even need to cast it:

```
competitionFormat = cbCompetitionFormat.SelectedValue; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T21:34:14.837

就像异常暗示的那样，您试图将字符串转换为无效的 int。相反，您应该调用类似：

```
competitionFormat = int.Parse(cbCompetitionFormat.SelectedValue); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T21:34:45.817

尝试这个

```
competitionFormat = Convert.ToInt32(cbCompetitionFormat.SelectedValue); 
```

**更新：**

Winforms 中 SelectedValue 的行为是它返回一个`System.Data.DataRowView`表示底层绑定数据的对象。这显然不能转换为整数。您可以将此对象转换为最初绑定到组合框的对象类型

```
competitionFormat = ((Competition) cbCompetitionFormat.SelectedValue).CompetitionFormatId; 
```

# vba - 在包含多段单元格的 Word 表格中向下移动一行

> ID：14327072
> 
> 赞同：2
> 
> 时间：2013-01-14T21:31:13.347
> 
> 标签：vba, ms-word, word-2010

如何可靠地向下移动 Word 表中的行？
这是表的结构。请注意，第一列和第二列都可以有多行和多段。

```
Rule ID         1

Logic           Date must be equal to or greater than 01-Jan-2012 

Discrepancy     Date is before 01-Jan-2012
message

Test case 1.1   Create form where Date is before 01-Jan-2012 
                Verify discrepancy message appears.
                Print form.

Test case 1.2   Create form where Date is equal to 01-Jan-2012.
                Verify no discrepancy message appears.
                Print form.

Test case 1.3   Create form where Date is after 01-Jan-2012.
                Verify no discrepancy message appears.
                Print form. 
```

我尝试了多种方法来降低表格。

当我尝试`Selection.MoveDown`使用`unit:=wdLine`（如下）时，当第 1 列包含自动换行时，我遇到了问题。

```
Selection.MoveDown unit:=wdLine, Count:=1, Extend:=wdMove 
```

当我尝试`Selection.MoveDown`使用`unit:=wdParagraph`（如下）时，当第 2 列包含多个段落时遇到了问题。

```
Selection.MoveDown unit:=wdParagraph, Count:=3 
```

`unit:=wdRow`似乎不是 的有效参数`Selection.MoveDown`。
`Selection.Cells(1).RowIndex`是一个只读参数

有谁知道一种简单的方法，可以一次将表格向下移动一行，既可以处理第 1 列中的自动换行，也可以处理第 2 列中的多个段落？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:36:29.480

尝试这样的事情。它是一种通用算法，用于循环遍历 Word 文档中所有表格的每一行和每一列。根据需要修改（未经测试的代码）：

```
Sub ModifyAllTables()
  Dim oTbl As Table
  Dim oRow As Row
  Dim oRng As Range
  For Each oTbl In ActiveDocument.Tables
    For Each oRow In oTbl.Rows
      ' Select the cell in column 2.
      Set oRng = oRow.Cells(2).Range
      ' and do something with it...
      'e.g. oRng.TypeText "modified"
    Next
  Next
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T21:49:30.967

```
Sub NextRow()

    Dim c As Long, r As Long

    With Selection
        'ignore if not in table
        If .Information(wdWithInTable) Then

            c = .Columns(1).Index
            r = .Rows(1).Index

            If .Rows(1).Parent.Rows.Count >= r + 1 Then
                .Rows(1).Parent.Rows(r + 1).Cells(c).Range.Select
            End If
        End If
    End With

End Sub 
```

# linux - 从文件 shell 脚本中获取子字符串

> ID：14327073
> 
> 赞同：-1
> 
> 时间：2013-01-14T21:31:23.517
> 
> 标签：linux, shell, grep

> **可能重复：**
> [我需要从文件 shell 脚本中获取子字符串](https://stackoverflow.com/questions/14325857/i-need-get-a-substring-from-a-file-shell-script)

我需要一些关于这个 shell 脚本的帮助。我有一个变量，代表一个 IP/TCP 标头。我需要按所选标头过滤流量捕获。

```
> var=ttl 128 (only TTL=128)
> 
> tcpdump -Xvv -n -i eth0 -c 300 > capture.txt 2>/dev/null
> 
```

我正在尝试使用 grep 命令，但只有 ttl 128 行，不要 ip 源和目标

```
> grep -i "$var" capture.txt > resultGrep.txt 
```

tcpdump 命令的结果是这样的

```
15:29:18.164566 IP (tos 0x0, ttl 1, id 2394, offset 0, flags [none], proto UDP (17), length 125)
    10.0.0.155.58363 > 239.255.255.254.1900: UDP, length 97
    0x0000:  4600 0024 0000 0000 0102 3ad3 0a00 0000  F..$......:.....
    0x0010:  e000 0001 9404 0000 1101 ebfe 0000 0000  ................
    0x0020:  0300 0000 0000 0000 0000 0000 0000       ..............
15:29:18.164566 IP (tos 0x0, ttl 128, id 2394, offset 0, flags [none], proto UDP (17), length 125)
    10.0.0.131.58363 > 239.255.255.250.1900: UDP, length 97
    0x0000:  4600 0024 0000 0000 0102 3ad3 0a00 0000  F..$......:.....
    0x0010:  e000 0001 9404 0000 1101 ebfe 0000 0000  ................
    0x0020:  0300 0000 0000 0000 0000 0000 0000       ..............
15:29:18.164566 IP (tos 0x0, ttl 64, id 2394, offset 0, flags [none], proto UDP (17), length 125)
    10.0.0.147.58363 > 239.255.255.255.1900: UDP, length 97
    0x0000:  4600 0024 0000 0000 0102 3ad3 0a00 0000  F..$......:.....
    0x0010:  e000 0001 9404 0000 1101 ebfe 0000 0000  ................
    0x0020:  0300 0000 0000 0000 0000 0000 0000       .............. 
```

我需要从带有 ttl 128 标头的数据包中获取 IP 地址源和 IP 地址目标，在示例中，输出结果必须是

***10.0.0.131.58363 > 239.255.255.250.1900***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:39:29.113

如果您[`grep`](http://linux.die.net/man/1/grep)支持显示上下文`-A`，您可以尝试

```
grep -A 1 -e 'ttl 128' capture.txt | grep '^    ' | cut -d: -f1 
```

第一个 grep 显示所有行，`ttl 128`后面加一个行。第二个 grep 过滤以空格开头的行。final`cut`选择第一个之前的所有内容`:`。

# ios - ios：以编程方式要求 Game Center 登录？

> ID：14327074
> 
> 赞同：8
> 
> 时间：2013-01-14T21:31:24.513
> 
> 标签：ios, center, gkmatchmaker

我有一个简单的问题，但我查看了 Apple 的文档并进行了一些搜索，但找不到答案。

是否可以以编程方式调出 Game Center 的登录视图？我有一个`UIButton`需要 Game Center 的应用程序，如果打开应用程序时客户端未登录（iOS 在启动时拉出登录视图），我想为用户提供第二次登录机会。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-03T03:01:11.343

我假设您在启动时调用此 GKLocalPlayer 方法：`-setAuthenticateHandler:`(>= iOS7) 或`-authenticateWithCompletionHandler:`(<= iOS6)

如果用户取消显示的登录屏幕，再次调用这些方法什么也不做，或者更确切地说，调用完成处理程序时出现错误。然后，用户将需要通过 GameCenter 应用程序或通过设置应用程序登录到 GameCenter。（在测试时，您可以通过 GameCenter 应用程序登录，然后注销。之后屏幕可以再次出现在您自己的应用程序中。）您可以显示一个 UIAlertView 告诉用户通过 GameCenter 应用程序登录。

或者，我不知道这是否被允许/批准，但在 iOS7 中`authenticateHandler`有一个`viewController`参数保存登录屏幕。如果您将此登录视图控制器存储在实例变量中并且用户取消登录，您可以稍后使用`UINavigationController`.

如果您尝试使用`-presentViewController:animated:completion:`视图控制器的取消按钮显示已保存的登录视图控制器不再起作用，但使用`UINavigationController`隐藏取消按钮并允许导航回您自己的视图控制器。

您还需要在用户登录后通过响应手动隐藏登录屏幕`GKPlayerAuthenticationDidChangeNotificationName`。开发人员似乎不打算这样做，因此它可能无法通过批准，但它确实有效！

# javascript - 在 jquery ui 模式对话框上使用浏览器默认滚动条

> ID：14327075
> 
> 赞同：0
> 
> 时间：2013-01-14T21:31:31.070
> 
> 标签：javascript, jquery, jquery-ui

是否可以使用 jquery ui 的对话框，并将其跨越整个浏览器高度？

那么，如果有多余的页面，使用浏览器默认的滚动条上下滚动，将剩余的页面冻结在叠加层后面？

```
$(function()
  {
    $('#category_modal').dialog({
        autoOpen: false,
        title: 'hello',
        modal: true,
        height: auto,
        width: 500,
        resizable: false
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:13:52.457

不使用默认对话框。您可以使用 CSS 使对话框 100% 高度/宽度和“溢出”文本可滚动。你的对话框在 CSS 中看起来像这样：

```
#dialog_box {
    width: 100%;
    height: 100%;
    overflow-y: scroll;
} 
```

如果需要，您还可以在对话框中放置一个 iFrame。然而，这并不能完全“冻结”背景中的内容。用户总是可以选择背景并使用鼠标滚轮或简单地使用浏览器的滚动条。使用`overflow-y`将在对话框的边缘创建第二个滚动条，该滚动条将滚动其中的内容（如果需要）。

# c++ - 获取 C++ 中硬编码内存地址的内容

> ID：14327076
> 
> 赞同：2
> 
> 时间：2013-01-14T21:31:52.193
> 
> 标签：c++, memory-address

```
double address = 3068770752;
std::string hello = (char *)address; 
```

**错误：从“double”类型到“char*”类型的无效转换**

所以，如果我使用 long 或 int 类型，这是可行的，但对于 double 类型，这是行不通的。我怎样才能做到这一点？

谢谢！

编辑：我正在用 C++ 编写 PHP 扩展，这是自定义函数“get_memory_data（双地址）”的“内容”，在 php 中您使用：

```
<?php
$a = "hello";
$b = get_memaddress($a); //0x123456
$c = hextodec($b); //3068770752
$d = get_memdata($c); //hello 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:33:42.153

首先将其转换为整数：

```
char * p = reinterpret_cast<char *>(static_cast<uintptr_t>(address));

std::string i_cause_undefined_behaviour(p); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T21:37:38.573

以双精度存储内存地址是没有意义的，这不是编译器不允许你的原因，但它肯定没有帮助。在 64 位平台上，您需要 64 位来准确存储内存地址，但双精度只能保持 53 位。

如果你想硬编码一个内存地址，你应该把它存储在一个 uintptr_t 中。

# actionscript-3 - 按键事件未在字母/数字键上触发

> ID：14327081
> 
> 赞同：2
> 
> 时间：2013-01-14T21:32:08.857
> 
> 标签：actionscript-3, flash, apache-flex

当我释放字母或数字键时，我没有收到按键事件。当我释放 enter/alt/arrows/space 时，我看到了输出。key down 触发所有键。关于它是什么的任何想法？

编辑：为清楚起见- Keys 是主要课程。

编辑 2：我正在使用 flexSDK 4.6

```
package {

import flash.display.Sprite;
import flash.events.KeyboardEvent;

public class Keys extends Sprite {
    public function Keys() {
        stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
        stage.addEventListener(KeyboardEvent.KEY_UP, onkeyUp);
    }
    private function onKeyDown(e:KeyboardEvent){
        trace("1 "+e.keyCode);
    }
    private function onkeyUp(e:KeyboardEvent){
        trace("0 "+e.keyCode);
    }
}
} 
```

如果我在舞台上添加一个“输入”类型的文本字段，事情就会变得有趣。如果我关注文本字段 keyUp 事件开始工作如果我在舞台有焦点时按键 keyUp 事件不会触发。

# c# - 如何获得 WSHttpBinding 的 Security 属性？

> ID：14327084
> 
> 赞同：2
> 
> 时间：2013-01-14T21:32:24.313
> 
> 标签：c#, visual-studio-2012, wcf-security, .net-4.5, ws-security

根据[http://msdn.microsoft.com/en-us/library/system.servicemodel.wshttpbinding.security.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.wshttpbinding.security.aspx)，.NET Framework 4.5 的 `WSHttpBinding`类有一个 public`Security`类型的属性`System.ServiceModel.WSHttpSecurity`。

问题是`WSHttpBinding`缺少这个属性。如果我使用调试器检查该类型的对象，它不会显示这样的属性：

![调试检查器显示没有安全属性](../Images/6a2e87a5ed1effd84320acc0d9b4560a.png)

此外，Intellisense 不显示任何`Security`属性：

![在此处输入图像描述](../Images/c2e9ed64f1794faec610e66fa8628cda.png)

**重要提示**：请注意，我正在`Security`使用对象初始值设定项设置属性！Visual Stuido 也可以！？

以[正确的方式为 SOAP webservice 传达 WSSE Usernametoken](https://stackoverflow.com/questions/5836685/correct-way-communicate-wsse-usernametoken-for-soap-webservice)，@Chris Marisic 显示了他修改此对象的位置。

此应用程序正在为 .NET Framework 4.5 编译。

是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:46:44.293

问题是is of type的[`Binding`](http://msdn.microsoft.com/en-us/library/system.servicemodel.endpoint.binding.aspx)属性，它是一个泛型抽象类，是所有 Binding 类型的父类型。所以你看到了这种类型的智能感知。`ClientBase.Endpoint`[`System.ServiceModel.Channels.Binding`](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.binding.aspx)

您需要在`WSHttpBinding`分配之前设置实际实例的属性，就像您现在使用对象初始化语法所做的那样。另一种方法是首先将其分配给局部变量：

```
var binding = new WSHttpBinding(SecurityMode....);
binding.Security = new WSHttpSecurity();
// etc.
service.Endpoint.Binding = binding; 
```

# c# - QueryString 将 %E1 转换为 %ufffd

> ID：14327085
> 
> 赞同：3
> 
> 时间：2013-01-14T21:32:28.200
> 
> 标签：c#, asp.net, .net-3.5, query-string, urlencode

我有一个类似下面的网址

```
http://mysite.com/default.aspx?q=%E1 
```

`%E1`应该在哪里`á`。当我`Request.QueryString`从我的 C# 页面调用时，我收到

```
http://mysite.com/default.aspx?q=%ufffd 
```

它对任何重音字符执行此操作。`%E1, %E3, %E9, %ED`等等都被传递为`%ufffd`. 正常编码值 ( `%2D`, `%2E`, `%27`) 都可以正确传递。

配置文件已将全球化部分中的`responseEncoding`/`requestEncoding`设置为 UTF-8。

我怎样才能读取正确的值？

请注意，我不是生成查询字符串的人，我无法控制它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:49:29.313

虽然确实`á`被编码为[U+00E1](http://www.fileformat.info/info/unicode/char/e1/index.htm)，但 UTF-8 编码（与 URL 参数相关）是`0xC3 0xA1`.

您可以通过调用带有重音字母的 Wikipedia 条目来进行验证，例如[http://en.wikipedia.org/wiki/%C3%81](http://en.wikipedia.org/wiki/%C3%81)

[U+FFFD](http://www.fileformat.info/info/unicode/char/fffd/index.htm)是 Unicode 替换字符，表示给定的字符值不能以 Unicode 正确编码。

更新：

你的问题有两点。

第一：如何将 Unicode 字符串编码为参数。利用

```
"?q=" + HttpUtility.UrlEncode(value) 
```

第二：如何检索 Unicode 值？利用：

```
Request["q"] 
```

如果您`%E1`从您无法控制的其他来源收到，也许 RawUrl 可以帮助您。（我没试过）

# java - 使用 JPA QL 查找包含某些集合元素的所有项目

> ID：14327088
> 
> 赞同：0
> 
> 时间：2013-01-14T21:32:44.923
> 
> 标签：java, hibernate, jpa, jpql

我有一个`Item`包含对象`Set`的类。`Tag`现在我想使用 JPA（基于 Hibernate 4.1.9）找到所有包含*所有必需标签的项目。*

我的存储库方法得到一个 java.util.Set ，该方法的主体如下所示：

```
entityManager.createQuery("select item from Item as item where item.tags in :tags")
.setParameter("tags", tags)
.getResultList() 
```

对我来说，它看起来像这个[解决方案](https://stackoverflow.com/a/4644668/238134)，但我得到的只是错误消息：

> IllegalArgumentException：org.hibernate.hql.internal.ast.QuerySyntaxException：子树的意外结束[从models.Item中选择项目作为item.tags in ()]

如果我扭转局面

```
"select item from Item as item where :tags in item.tags" 
```

我认为正确的（而不是上面的查询），我`NullPointerException`在最后一行（`getResultList()`）中得到一个。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:13:56.390

看起来您的`tags`集合是空的，甚至可能是 null，已知这会导致此错误（例如，请参阅[此博客](http://parasjain.net/2008/12/09/hibernate-error-orghibernatehqlastquerysyntaxexception-unexpected-end-of-subtree/)）。这会生成您在错误中看到的查询：

```
select item from models.Item as item where item.tags in () 
```

如果将其发送到数据库，则可能会导致错误（例如`ERROR 1064 (42000)`，在 MySQL 中是语法错误）。

在将其作为参数添加到查询之前，您需要验证它`tags`是非空的。

# objective-c - 标准化音频文件 obj-c

> ID：14327091
> 
> 赞同：3
> 
> 时间：2013-01-14T21:32:50.797
> 
> 标签：objective-c, audio, core-audio

是否有标准化声音文件的库函数？我四处寻找，但找不到任何东西。

我希望能够规范化声音文件并将其设置到声音文件中，因此只需要完成一次而不是即时完成。

这可以用 Core-Audio 完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:17:21.187

是的，它可以完成，但不能通过单个函数调用。

您想要的功能实际上不是 CoreAudio，而是框架[`ExtendedAudioFile.h`](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/ExtendedAudioFileServicesReference/Reference/reference.html)的一部分。[`AudioToolbox`](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/CAAudioTooboxRef/_index.html#//apple_ref/doc/uid/TP40002089)这适用于 iOS 和 MacOSX。我可以证明这很难找到。

`ExtAudioFileOpenURL()`此标头中感兴趣的函数是`ExtAudioFileRead()`和`ExtAudioFileWrite()`。

概述您的工作：

1.  用于`ExtAudioFileOpenURL()`打开输入文件
2.  `ExtAudioFileGetProperty()`与 propertyId一起使用`kExtAudioFileProperty_FileDataFormat`以获取描述文件 的[AudioStreamBasicDescription 。](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/CoreAudioDataTypesRef/Reference/reference.html#//apple_ref/c/tdef/AudioStreamBasicDescription)

3.  可能设置 ASBD 以获得您想要的格式。MacOSX 上的 AudioToolBox 似乎比 iOS 上更适合这一点。

4.  计算一个足够大的缓冲区来容纳整个音频文件

5.  读取整个文件`ExtAudioFileRead()`- 注意：此调用可能不会一口气全部读取 - 操作与 POSIX 大致相同`read()`

6.  执行标准化

7.  用于`ExtAudioFileCreateWithURL()`创建输出文件
8.  用于`ExtAudioFileWrite()`写出标准化样本。
9.  处理这两个音频文件。

该文档链接到几个示例项目，这些项目可以充当工作代码的捐助者。您会发现将样本作为浮点数进行标准化要容易得多，但在 iOS 中，我永远无法让转换自动工作，因此您可能必须自己进行格式转换。

# node.js - Node & Redis：无法在列表中提取超过 46 条记录

> ID：14327092
> 
> 赞同：0
> 
> 时间：2013-01-14T21:32:51.200
> 
> 标签：node.js, heroku, redis, scalability, node-redis

我们有一个几个星期都无法解决的问题。

我们在 Heroku 上使用 Node.js，在我们的 Redis 服务器上使用 openredis，在 Node Redis 客户端上使用“node-redis”。

在我们的移动应用项目中，我们有一个名为“user_list”的 redis 列表，其中还包含我们的 redis db #1 中的键（列表在 db #1 中）。我们首先从 user_list 中提取 id，然后为列表中的每个 id 发出“获取”请求，从而在地图上显示用户的位置。

然而问题是当我们试图创建一个'smembers user_list'时，我们无法检索 user_list 中的整个元素。在 46 条记录之后，它返回类似 ',,,,,,,,,'

我们确实尝试了一切，当我们逐渐增加列表中的元素时，它可以工作，但是当我们放入 100 个元素时，我们根本无法检索

可能是什么问题呢？

# html - 有没有办法让“位置：绝对” div 保持相对宽度？

> ID：14327104
> 
> 赞同：51
> 
> 时间：2013-01-14T21:33:31.577
> 
> 标签：html, css, position, absolute

假设我有两个 div，一个在另一个里面，就像这样：

```
<html>
  <body>
    <div id="outer" style="width:50%">
      <div id="inner" style="width:100%">
      </div>
    </div>
  </body>
</html> 
```

现在，内部 div 的宽度是屏幕大小的 50% 的 100%，或屏幕大小的 50%。如果我要将内部 div 更改为绝对位置，如下所示：

```
<html>
  <body>
    <div id="outer" style="width:50%">
      <div id="inner" style="position:absolute;width:100%">
      </div>
    </div>
  </body>
</html> 
```

在这种情况下，内部 div 占据了 100% 的屏幕空间，因为它的位置设置为绝对。

我的问题是：有没有办法在内部 div 的位置设置为绝对时保持内部 div 的相对宽度？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-01-14T21:36:06.737

添加**位置：相**对于您的外部 div。

*update*：它之所以有效，是因为位置`position: absolute`是相对于具有某些定位（静态除外）的第一个父级的。在这种情况下，没有这样的容器，所以它使用页面。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-14T21:36:48.550

是的。将外部设置为位置：相对。

[http://jsfiddle.net/57673/](http://jsfiddle.net/57673/)

```
.outer
{
  width: 50%;
  height: 200px;
  position: relative;
  border: 1px solid red;
}

.inner
{
  width: 100%;
  position: absolute;
  height: 100%;
  border: 1px solid blue;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-16T12:18:46.733

我有一个必须`position:absolute`在项目中的元素，我发现该设置`width`为`max-content`我解决了这个问题。
它似乎在现代浏览器中得到了很好的支持。查看此链接了解更多信息：[Mozilla.org (max-content)](https://developer.mozilla.org/en-US/docs/Web/CSS/max-content)。

# java - 写入 Java DataOutputStream 查询

> ID：14327105
> 
> 赞同：0
> 
> 时间：2013-01-14T21:33:31.927
> 
> 标签：java, connection, client

> **可能重复：**
> [java 套接字/输出流写入：它们会阻塞吗？](https://stackoverflow.com/questions/1338885/java-socket-output-stream-writes-do-they-block)

当写入附加到 Socket 的 DataOutputStream 时，例如在服务器到客户端的连接中，.writeInt() 方法是否等待要写入的数据，例如，如果客户端/服务器连接非常慢 -这会使 .writeInt() 方法等待吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:38:38.623

会等到

*   发送缓冲区中有足够的空间来复制数据。
*   数据被发送到操作系统缓冲区。

出于这个原因，缓冲流是一个好主意（以减少系统调用的成本）。

无论你做什么，你都有可能因为连接太慢而被阻止。

# twitter-bootstrap - 使用 ASP.NET MVC 4 设置 TwitterBootstrap

> ID：14327107
> 
> 赞同：11
> 
> 时间：2013-01-14T21:33:32.967
> 
> 标签：twitter-bootstrap, asp.net-mvc-4

这是我到目前为止所做的：

1) 在 VS2012 中创建新的 ASP.NET MVC 4 项目。

2）选择“互联网申请”模板（包括会员和实体框架）

3）测试它，它工作正常

4）使用包管理器，运行：

```
> Install-Package twitter.bootstrap.mvc4
> Install-Package twitter.bootstrap.mvc4.sample 
```

5）在“_ViewStart.cshtml”中，更改

```
Layout = "~/Views/Shared/_Layout.cshtml" 
```

至

```
Layout = "~/Views/Shared/_BootstrapLayout.basic.cshtml" 
```

不幸的是，当我现在运行它时，我收到以下错误：

```
The following sections have been defined but have not been rendered for the layout page "~/Views/Shared/_BootstrapLayout.basic.cshtml": "featured". 
```

我是 ASP.NET 的新手，我不确定发生了什么以及为什么会发生这种情况。有任何想法吗？

作为第二个问题，一旦我解决了这个问题，如何从[http://wrapbootstrap.com](http://wrapbootstrap.com)安装模板？我似乎找不到任何关于如何使用 ASP.NET 进行操作的说明。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T22:04:36.590

在您的 Home/index.cshtml 中定义了一些不在引导布局中的部分。

要么将它们添加到新布局（请参阅 Shared/_Layout.cshtml 了解如何，您正在寻找称为特色的东西）或从 index.cshtml 中删除它们。

对于家庭作业，请查看如何在 ASP.MVC 中定义部分

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-19T20:48:40.157

对于原始海报来说，这可能为时已晚，但我认为更好的解决方案是从 Empty MVC 4 项目开始。这样，您不必删除任何内容。

```
1) Start with an empty ASP.NET MVC 4 project.
2) Using the package manager, run:

    install-package twitter.bootstrap.mvc4
    install-package twitter.bootstrap.mvc4.sample 
```

这在我的 VS2012 上构建并运行良好。

在我看来，这是示例代码的原始安装方式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-27T19:41:18.783

在**_BootstrapLayout.basic.cshtml 中**验证您在 @RenderSection 中是否具有“特色”：

```
<head>
    <meta charset="utf-8">
    <title>@ViewBag.Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="@Styles.Url("~/content/css")" rel="stylesheet"/>
    @RenderSection("featured", required: false)
    @Html.Partial("_html5shiv")
</head> 
```

# java - Weka 可视化数据

> ID：14327114
> 
> 赞同：4
> 
> 时间：2013-01-14T21:33:54.750
> 
> 标签：java, weka, visualize

我有一个关于 Weka 的问题。我有数据，我想将它们可视化。我使用 k-means 进行聚类。我找到了可视化数据的选项，但我想要更多的东西。如果您右键单击它们来可视化集群，则会出现一个窗口。在那个窗口中有一些信息，但我想看看这个点来自的数据。有什么办法可以通过 Weka 或者我应该编写 Java 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T13:04:45.543

您可以在 Java 程序中使用 ELKI 或处理工具作为 API，并可以可视化您的结果。然而，可视化在 ELKI 中可能不是交互式的，但您当然可以使用自定义方法扩展交互式属性，同时将处理工具插入您的 java 代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:23:25.210

我已经尝试过了，但没有运气。

如果我的机器中没有 matlab 或 R 来绘制数据，我会使用 GNUPlot ( [http://www.gnuplot.info/](http://www.gnuplot.info/) ) 从命令行和文件中绘制数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-30T20:51:52.197

您可能需要自己编写一些代码，但您可能不需要从头开始。您可以使用 Weka 自己的代码（它是开源的）来开发满足您需求的可视化插件。查看 Wiki 以获取更多信息和示例：[https ://weka.wikispaces.com/Explorer+visualization+plugins](https://weka.wikispaces.com/Explorer+visualization+plugins)

# c++ - ftell 可以用于非 ASCII 字符吗？

> ID：14327117
> 
> 赞同：0
> 
> 时间：2013-01-14T21:34:00.487
> 
> 标签：c++

这条线

```
Assert(pos == ftell(file)); 
```

在我的代码中使用，当文件包含非 ASCII 字符时，此行失败。

我应该怎么办？

为了清楚起见，这里是更新的整个函数：

```
int getTerminatedString(char * dest, int length) 
{
    char * rv  = fgets(dest,length,file);
    int len = -1;
    if(rv)
    {
        len = strlen(rv);
        pos += len;
        assert(pos == ftell(file));

    }
    return len;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:37:08.043

如果您以二进制模式打开文件，例如`fopen("yourfile","rb")`，`ftell`无论内容如何，​​都会给出文件中的偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:25:51.953

缓冲区是否`dest`足够大以包含所有字符以及最终的终止零字节？

如果指针的缓冲区指针`dest`太小，程序可能会在内存中覆盖它不应该覆盖的东西——这是获取 SIGABRT 的一种可能方式。

# database - Zend 更新行

> ID：14327123
> 
> 赞同：0
> 
> 时间：2013-01-14T21:34:24.510
> 
> 标签：database, zend-framework

我有一个按钮，当单击该按钮时，它将通过 +1 更新一行。

它不起作用，它只会在数据库表中更新为 1，下次我单击它时它不会变为 2，它会保持在 1。我想要它，每次单击它都会将数字增加 1。

这是模型中的功能：

```
class Application_Model_DbTable_Row_User extends Sayka_Db_Table_Row_Abstract
{
    public function grantDiscount()
    {
        $this->has_discount = has_discount + 1;
                // $this->has_discount++; <- not working too, only increment to 1.
        $this->save();
    }
} 
```

控制器：

```
if (isset($_POST['btn_buy_now']))
{
     $user->grantDiscount();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:35:48.703

我自己通常不会`DbTable_Row`以这种方式使用该对象，但我认为您的函数应该如下所示：

```
<?php
class Application_Model_DbTable_Row_User extends Sayka_Db_Table_Row_Abstract
{
    public function grantDiscount()
    {
        /*row object->column->has_discount = row object->column->has_discount +1*/
        $this->has_discount = $this->has_discount + 1;

        $this->save();
        /*returning the row object may or may not be important or helpful in this case.*/
        return $this;
    }
} 
```

请记住，`save()`返回插入/更新行的主键或异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:34:18.733

Zend_Db_Table_Row_Abstract 和 Sayka_Db_Table_Row_Abstract 之间有什么区别吗？可能它取代了zend 原始的魔法方法__get 和__set。

# cuda - cuda grid 二维线程标识符

> ID：14327124
> 
> 赞同：1
> 
> 时间：2013-01-14T21:34:24.360
> 
> 标签：cuda

你好，我有 2Dimendions Grid 和 1Dimensions 块：

```
dim3 dimGrid(K,N);

dim3 dimBlock(F); 
```

如何计算唯一线程标识符？谢谢

编辑：抱歉，dimBlock 不是 K.F 不同 K 不同 N

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:46:29.787

本地线程 ID：

```
unsigned ltid = threadIdx.x; // Varies from 0 to K-1 
```

块的数量可以通过以下方式计算：

```
unsigned num_blocks = blockIdx.y * gridDim.x + blockIdx.x; 
```

当前块之前的线程数：

```
unsigned boff = num_blocks * blockDim.x; // Multiples of K * N * K 
```

将当前线程Id加上当前block之前的线程数，就可以得到全局唯一id。

```
unsigned gtid = ltid + boff; 
```

**编辑**

修改了答案。原文是在错误的假设下编写的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T18:36:27.683

纯粹为了清楚起见（其他答案也是正确的，但我发现这种方法更有利于学习），可以通过以下方式找到任何给定线程的 2D 块和网格的全局索引：

```
int index_x = blockIdx.x * blockDim.x + threadIdx.x;    
int index_y = blockIdx.y * blockDim.y + threadIdx.y;
int grid_width = gridDim.x * blockDim.x;
//get the global index 
int global_idx = index_y * grid_width + index_x; 
```

如果您曾经为块大小引入第二个维度，这可能很有用，因为它会自动处理这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:53:00.610

我将使用的计算是这样的：

```
int idx = threadIdx.x + (blockDim.x * ((gridDim.x * blockIdx.y) + blockIdx.x)); 
```

您可能还对我发布的[这个问题](https://stackoverflow.com/questions/14100723/creation-2d-grid-in-cuda-for-gpgpu-using-c/14327364#14327364)的答案感兴趣。

# asp.net - 相同动作返回的不同视图

> ID：14327125
> 
> 赞同：1
> 
> 时间：2013-01-14T21:34:27.763
> 
> 标签：asp.net, asp.net-mvc-4

我正在编写简单的网页（一种博客），但因以下问题而被阻止。在 _Layout.cshtml 的 Views/Shared 中，我定义了页面布局。

我的路由规则看起来像这样

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
routes.MapRoute(
"paging", // Route name
 "Home/GetArticleListForCategory/{id}/{pageNo}", // URL with parameters
 new { controller = "Home", action = "GetArticleListForCategory", id = UrlParameter.Optional, pageNo = UrlParameter.Optional } // Parameter defaults
);

routes.MapRoute(
 "Default", // Route name
 "{controller}/{action}/{id}", // URL with parameters
  new { controller = "Home", action = "Index", id = UrlParameter.Optional } 
  ); 
```

当我从链接 *http://localhost:3282/Home/GetArticleListForCategory/1*运行操作时 ，页面**显示正确**

当我从链接 *http://localhost:3282/Home/GetArticleListForCategory/1/1运行操作时* **，页面看起来“原始”**（页面上没有布局，没有图像等）我比较了来自两个链接的页面返回的 html但它们是相同的。控制器动作如下所示：

```
public ActionResult GetArticleListForCategory(int id,int pageNo = 1)
{

    int articlesPerPageNo = ConfigurationHelper.NoOfArticlePerPage;
    int totalNoOfArticles;
    List<PostShort> listOfPostforCategory = GetListOfShortArticles(pageNo,articlesPerPageNo ,out totalNoOfArticles);

    int totalPagesNo = (totalNoOfArticles + articlesPerPageNo - 1) / articlesPerPageNo;
    ViewData["PageTotal"] = totalPagesNo;
    ViewData["PageNo"] = pageNo;

    return View("CategoryPosts",listOfPostforCategory);
} 
```

请注意，参数已正确传递给操作（在调试中测试）。

有谁知道这种行为的根源是什么以及如何解决它？

提前感谢您的帮助。此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:51:15.600

```
<link href="../../Content/style.css" rel="stylesheet" type="text/css" /> 
```

这是我在 _layout.cshtml 图像中的疑问，声明如下

```
<img src="../../Content/img02.jpg" width="1000" height="300" alt="" /> 
```

当使用此类链接 **http://localhost:3282/Home/GetArticleListForCategory/1** 时，其中一张图像的链接看起来像**http://localhost:3282/Content/img02.jpg** 但是当我向链接添加另一个参数时： **http://localhost:3282/Home/GetArticleListForCategory/1/1** 其中第一个数字是类别，第二个是页码，同一图像的链接看起来像**http://localhost:3282/Home/Content/img02.jpg**

为什么相同的动作返回视图位于其他地方？

# java - 将 Content-ID 添加到多部分实体

> ID：14327131
> 
> 赞同：1
> 
> 时间：2013-01-14T21:34:55.967
> 
> 标签：java, android, httprequest

鉴于我们提出了多部分请求。我们现在需要添加一个 content-id。下面是我们试图用来创建多部分请求的代码：

```
MultipartEntity mpEntity = new MultipartEntity();
StringBody body;
try
{
    body = new StringBody( xml, "application/xml", Charset.forName( "UTF-8" ) );
    byte[] data = getBytesFromFile( image );
    ByteArrayBody bab = new ByteArrayBody( data, "image/jpeg", "test_image_cid" );
    mpEntity.addPart( "body", body );
    mpEntity.addPart( "test_image_cid", bab );

} catch ( UnsupportedEncodingException e )
{
    e.printStackTrace();
}

HttpPost request = new HttpPost("http://10.1.1.1");
request.addHeader( "Authorization", authorization_header_values );
request.addHeader( "Content-Type", "Multipart/Related" );
request.setEntity( mpEntity );
return request; 
```

这就是我们调用的网络服务所要求的：

```
<?xml version="1.0" encoding="utf-8"?> <request method="receipt.create"> 
   <receipt>
       <expense_id>1</expense_id>  <!-- id of expense -->
       <image>cid:xxxxxxxxxxxxx</image> <!-- content-id used on the related binary content -->
   </receipt>
</request> 
```

这是我们从服务器返回进行调试的内容：

POST / HTTP/1.1 授权：OAuth realm="", oauth_version="1.0", oauth_consumer_key="key", oauth_token="token", oauth_timestamp="1358197676614", oauth_nonce="1111111", oauth_signature_method="PLAINTEXT", oauth_signature ="signature" 内容类型：多部分/相关用户代理：代理内容长度：2336363 主机：10.1.1.1 连接：保持活动

--HPeiFlrswQmM8Mi1uoWpzJRfrnp3AMtZjpCdt Content-Disposition: form-data; name="body" 内容类型：应用程序/xml；charset=UTF-8 内容传输编码：8bit

```
<?xml version='1.0' encoding='UTF-8' ?>
    <request method="receipt.create">
        <receipt>
            <expense_id>979</expense_id>
            <image>cid:test_image_cid</image>
        </receipt>
    </request> 
```

--HPeiFlrswQmM8Mi1uoWpzJRfrnp3AMtZjpCdt Content-Disposition: form-data; name="test_image_cid"; filename="test_image_cid" 内容类型：图像/jpeg 内容传输编码：二进制

我们一直在弄清楚如何将 Content-ID 添加到此请求中。这个电话有什么明显的缺失吗？还有另一种方法来构建这个请求吗？感谢您的任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T15:16:22.397

要添加 Content-Id 或任何其他字段，您必须使用 FormBodyPart。简单地说，拆分这些行：

```
ByteArrayBody bab = new ByteArrayBody( data, "image/jpeg", "test_image_cid" );
mpEntity.addPart( "body", body ); 
```

进入这些行：

```
ByteArrayBody bab = new ByteArrayBody( data, "image/png", "byte_array_image" );
FormBodyPart fbp = new FormBodyPart( "form_body_name", bab );
fbp.addField( "Content-Id", "ID_GOES_HERE" );
mpEntity.addPart( fbp ); 
```

那应该为你做！

# delphi - Chromium 嵌入式框架图标

> ID：14327132
> 
> 赞同：1
> 
> 时间：2013-01-14T21:35:01.410
> 
> 标签：delphi, delphi-xe2, chromium, favicon, chromium-embedded

如何使用 Chromium Embedded Framework 获取 favicon 网站？我可以查看源代码并获取图标的 url，但是有些网站，例如 Facebook，不使用标准程序添加图标，那么，我如何获取图标？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T22:08:07.763

favicon 的规则都在[Wikipedia](http://en.wikipedia.org/wiki/Favicon)页面上进行了解释。

> 该标准在文档部分中使用带有 rel 属性的链接元素`<head>`来指定文件格式、文件名和可以为任何网站目录指定的位置。

您需要在元素内部查看`<head>`这种`link`形式的元素：

```
<link rel="shortcut icon" href="http://example.com/myicon.ico" /> 
```

或者

```
<link rel="icon" type="image/vnd.microsoft.icon"
    href="http://example.com/image.ico" /> 
```

如果您没有找到此类链接，则使用`favicon.ico`在根目录中查找的回退。

* * *

我不确定你为什么认为 Facebook 不遵循标准。我刚刚查看了一个包含以下内容的 FB 页面：

```
<link rel="shortcut icon" 
    href="http://static.ak.fbcdn.net/rsrc.php/yP/r/Ivn-CVe5TGK.ico" /> 
```

网站不可能使用其他机制将网站图标获取到浏览器。浏览器遵循明确定义的获取网站图标的规则。如果网站做了不同的事情，浏览器将找不到该网站图标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T07:29:35.763

从这个[博客条目](http://pascaliburnus.seanbdurkin.id.au/index.php?/archives/4-Favicons!-How-to-implement-them..html)，跨浏览器支持的网站图标的最佳实践是包括

```
<link rel="icon" type="image/vnd.microsoft.icon" href="http://www.example.com/image.ico"> <!-- For good browsers. -->
<link rel="SHORTCUT ICON" href="http://www.example.com/image.ico"/> <!-- For Internet Explorer--> 
```

第一个链接是真正的浏览器，第二个是垃圾。在某些网站上，您会`type="image/x-icon"`在`link`标签中看到。曾几何时，这是正确的实现，但`image/x-icon`现在已被取代，现在已`image/vnd.microsoft.icon`成为 MIME 类型的 IANA 标准的一部分。

顺便说一句，旧版本的 ie 只是寻找一个`/favicon.ico`硬编码的文件名。如果您想要超级安全，您应该将您的网站图标命名为`favicon.ico`. 当然，如果您的域为不同目的托管多个网站，这对您没有帮助。

注意：如果您不需要支持 IE 的 favicon，那么您可以自由地为您的 favicon 使用 png、gif 和 jpg 格式，如下所示...

```
<link rel="icon" type="image/png" href="http://www.example.com/image.png">
<link rel="icon" type="image/gif" href="http://www.example.com/image.gif">
<link rel="icon" type="image/jpeg" href="http://www.example.com/image.jpg"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-22T16:49:05.370

CEF1 有一个名为的回调`OnFaviconURLChange`，每当页面的 favicon URL 更改时都会调用该回调。根据CEF 问题跟踪器中的[这个错误](https://code.google.com/p/chromiumembedded/issues/detail?id=964)， CEF3 还不支持此回调。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-15T08:24:47.757

您需要实现一个客户端处理程序和至少 CefDisplayHandler。此类具有 OnFaviconURLChange（不确定出现在哪个版本中，但肯定存在于分支 2357 及更高版本中）。C++原型是：

```
void OnFaviconURLChange(CefRefPtr<CefBrowser> browser, 
  const std::vector<CefString>& icon_urls); 
```

icon_urls 通常包含一个条目（如果有），它是网站图标的 URL。

还要考虑检查 favicon URL 的安全性，我将 URL 传递给 HTMLayout 应用程序只是发现它位于自签名 https:// 资源上，并且各种 wininet 安全错误（例如 InternetErrorDlg）开始抛出所有的地方.

# android - 在片段中使用后退按钮

> ID：14327134
> 
> 赞同：0
> 
> 时间：2013-01-14T21:35:09.913
> 
> 标签：android, android-emulator

我无法弄清楚这个问题。我在我的应用程序中使用 ActionBarSherlock，它由主要活动内的两个片段组成。每个片段都包含一个从数据库填充的列表。其他一切工作正常。后退按钮似乎有问题。理想情况下，它应该终止应用程序，但在我的情况下，当我从片段中按下后退按钮时，它不会退出应用程序，而是显示带有空列表的片段，我必须再次按下后退按钮才能终止应用程序。我读了这篇文章，但无法弄清楚如何解决这个问题。 [片段：按下返回按钮并自定义它时调用哪个回调](https://stackoverflow.com/questions/9703498/fragment-which-callback-invoked-when-press-back-button-customize-it) 请帮助！

```
protected class MyTabListener implements ActionBar.TabListener
    {

    Fragment fragment;
    public MyTabListener( Fragment fragment) {
        // TODO Auto-generated constructor stub

        this.fragment=fragment;
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
        ft.replace(R.id.fragment_place,fragment,null);
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
        ft.remove(fragment);

    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:49:01.487

您可以直接从您的主要活动（在其中定义与每个选项卡或面板关联的片段）实现 onKeyDown 方法，例如：

```
public class main_pager extends SherlockFragmentActivity{ 
```

...

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

if (keyCode == KeyEvent.KEYCODE_BACK) {

finish();
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:02:03.437

谢谢回复！在清单中设置 android:noHistory="true" 解决了这个问题。

# javascript - css max-width, max-height 100% 的 Javascript 模拟

> ID：14327135
> 
> 赞同：0
> 
> 时间：2013-01-14T21:35:11.320
> 
> 标签：javascript, image, resize, css

我需要 javascript 模拟（算法）来设置图像宽度/高度，这在更改最大宽度和最大高度 100% 以调整图像大小时会起作用。（不使用 max-width 和 max-height css 属性，仅使用宽度和高度）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:44:53.223

我不知道这是否是最好的解决方案，但做这样的事情的一种方法是克隆你试图确定最大宽度和最大高度的元素。然后不可见地渲染它，并在渲染后使用项目的 JavaScript 属性来确定值，这将允许浏览器为您计算它们。

如果将元素呈现为 position: absolute 和 visibility: hidden，它应该具有与作为页面的一部分呈现但对用户不可见的相同属性。

渲染和计算后，您可以删除该元素。

# javascript - 如何使用 crypto-js 解密 AES ECB

> ID：14327136
> 
> 赞同：5
> 
> 时间：2013-01-14T21:35:11.980
> 
> 标签：javascript, ecb

我正在尝试将加密数据从闪存（客户端）发送到服务器端的 javascript（在 asp 中作为 jscript 运行）。

有几个 javascript Aes 库，但它们几乎没有文档记录。我正在尝试使用 crypto-js，但无法使代码正常工作。下面的示例生成一个空输出，它应该生成“6bc1bee22e409f96e93d7e117393172a”。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
<script src="http://crypto-js.googlecode.com/svn/tags/3.1/build/rollups/aes.js"></script>
<script src="http://crypto-js.googlecode.com/svn/tags/3.1/build/components/mode-ecb.js"></script>
<script src="http://crypto-js.googlecode.com/svn/tags/3.1/build/components/pad-nopadding.js"></script>
<script>
    var key = CryptoJS.enc.Hex.parse('2b7e151628aed2a6abf7158809cf4f3c');
    var data = CryptoJS.enc.Hex.parse('3ad77bb40d7a3660a89ecaf32466ef97');
    var decrypted3 = CryptoJS.AES.decrypt(data, key, {mode: CryptoJS.mode.ECB, padding: CryptoJS.pad.NoPadding });
    document.write("<br /> dec3: " + decrypted3.toString());
</script>
</body>
</html> 
```

我从[http://www.inconteam.com/software-development/41-encryption/55-aes-test-vectors 获取了一个记录在案的工作密钥和加密数据](http://www.inconteam.com/software-development/41-encryption/55-aes-test-vectors)

我正在使用 ECB，因为它是唯一不需要 IV 或 salt 的版本，因为服务器不知道客户端上使用的 IV 或 salt，因此无法解密数据。

有谁知道为什么上述内容无法解密数据，或者知道任何文档在哪里？

更新：经过几个小时的反复试验，我想出了一个产生输出的组合：7c121d95a84573b6120ada2ffff1ce3118561eba40555c0b 但是，这仍然不正确。产生这个的改变是：

```
 var decrypted3 = CryptoJS.AES.decrypt('3ad77bb40d7a3660a89ecaf32466ef97', key, {mode: CryptoJS.mode.ECB, padding: CryptoJS.pad.NoPadding }); 
```

即，我将数据作为十六进制字符串传递，这是不对的，但至少会产生输出。

下一个问题将是填充问题。在客户端上，我使用的是 AS3 hurlant 库，它只提供两种填充策略：NONE 和 PKCS#5。在 crypto-js 中，可用的策略是：

```
Pkcs7 (the default)
Iso97971
AnsiX923
Iso10126
ZeroPadding
NoPadding 
```

这是否意味着没有机会在两个库之间每次解密数据？在我不得不编写自己的填充黑客（在 AS3 和 java 之间）来添加或删除尾随数据之前，但这需要对二进制数据进行数天的试验和错误 - 必须有一种更简单的方法来从客户端发送单个加密字符串到服务器。

SSL 不是一个选项，因为客户端用户可以简单地使用 Charles 代理或类似代理来查看和篡改未加密的数据。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-24T01:40:51.457

下面的示例使用 AES 和 ECB 返回所需的输出。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
    <script src="http://crypto-js.googlecode.com/svn/tags/3.1/build/rollups/aes.js"></script>
    <script src="http://crypto-js.googlecode.com/svn/tags/3.1/build/components/mode-ecb.js"></script>
    <script src="http://crypto-js.googlecode.com/svn/tags/3.1/build/components/pad-nopadding.js"></script>

    <script>
        var encrypted = '3ad77bb40d7a3660a89ecaf32466ef97',
            key = CryptoJS.enc.Hex.parse('2b7e151628aed2a6abf7158809cf4f3c'),
            cipherParams = CryptoJS.lib.CipherParams.create({
                ciphertext: CryptoJS.enc.Hex.parse(encrypted)         
            });

        var decrypted3 = CryptoJS.AES.decrypt(cipherParams, key, {mode: CryptoJS.mode.ECB, padding: CryptoJS.pad.NoPadding });
        document.write("<br /> dec3: " + CryptoJS.enc.Hex.stringify(decrypted3));
    </script>
</body>
</html> 
```

唯一真正的区别是使用 CryptoJS.lib.CipherParams.create() 创建一个 cypherParams 对象。根据官方[文档](http://code.google.com/p/crypto-js/#The_Cipher_Output)，cypherParams 对象“让您可以访问加密期间使用的所有参数”，包括密钥、iv、salt 和原始 cypherText。基本上解密所需的所有信息。在我们的例子中，我们需要将加密数据转换为仅具有 cypherText 属性的 cypherParam。顺便说一句，可以使用标准格式对 cypherParam 进行字符串化，这就是它与其他系统通信的方式。

关于填充，据我[了解](http://en.wikipedia.org/wiki/Padding_%28cryptography%29#PKCS7)，Pkcs7 是 Pkcs5 的扩展，应该适用于使用 Pkcs5 创建的任何密码。当我在没有 NoPadding 选项（默认为 Pkcs7）的情况下尝试上面的代码示例时，它不起作用，但我不知道在创建加密数据时使用了什么。至少您链接到的 AES 测试向量页面没有告诉我们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T00:45:49.673

放弃了 ECB，尝试了 CBC 的各种排列，并得到了一个工作。似乎也可以将 IV 以纯文本形式从客户端发送到服务器。

这是正确输出“6bc1bee22e409f96e93d7e117393172a”的版本。震惊。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
<script src="http://crypto-js.googlecode.com/svn/tags/3.1/build/rollups/aes.js"></script>
<!--script src="http://crypto-js.googlecode.com/svn/tags/3.1/build/components/mode-cbc.js"></script-->
<script src="http://crypto-js.googlecode.com/svn/tags/3.1/build/components/pad-nopadding.js"></script>
<script>
    var key = CryptoJS.enc.Hex.parse('2b7e151628aed2a6abf7158809cf4f3c');
    var iv = CryptoJS.enc.Hex.parse('000102030405060708090A0B0C0D0E0F');
    var data = CryptoJS.enc.Hex.parse('7649abac8119b246cee98e9b12e9197d');      

    var encrypted = {};
    encrypted.key=key;
    encrypted.iv=iv;
    encrypted.ciphertext = data;

    var decrypted = CryptoJS.AES.decrypt(encrypted, key, { iv: iv, padding: CryptoJS.pad.NoPadding });

    document.write("<br /> dec3: " + CryptoJS.enc.Hex.stringify(decrypted));
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-21T12:10:38.953

这是一个有效且更新的答案，具有更新的 CDN 链接和将生成的解密数据转换为明文的功能。

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    </head>
    <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/core.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/cipher-core.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/aes.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/mode-ecb.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/pad-nopadding.js"></script>

    <script>
    var encrypted = 'B655564D4428C56E7F9E44D81770CFDBC3FB0FCEA8FFDF7CC936FFE6C7A595A0FE085FAA65796C4C24D0862FAF56CAA1880DCD281A891DD1E999F953F2B669291B41B486E0FEC5E11BE7B7348703665081E4FF79F815C35803506468548F3C5EE13B5783A0E22D91E08CB1897E4D135DA8C4E650A1D51FFDDD210311A0835FD8E8EE08CC968F8A0B0EF811554872A093',
    key = CryptoJS.enc.Hex.parse('844AF9144552AFAE26A9C45FD5882718'),
    cipherParams = CryptoJS.lib.CipherParams.create({
        ciphertext: CryptoJS.enc.Hex.parse(encrypted)
    });

    var decrypted3 = CryptoJS.AES.decrypt(cipherParams, key, 
    {mode: CryptoJS.mode.ECB, 
        padding: CryptoJS.pad.NoPadding });
       document.write("<br />" + hex2a(CryptoJS.enc.Hex.stringify(decrypted3)));
    function hex2a(hexx) {
    var hex = hexx.toString();//force conversion
    var str = '';
    for (var i = 0; i < hex.length; i += 2)
        str += String.fromCharCode(parseInt(hex.substr(i, 2), 16));
    return str;
}
</script>
</body>
</html> 
```

# .net - 以管理员身份远程安装 Net Framework 4

> ID：14327138
> 
> 赞同：3
> 
> 时间：2013-01-14T21:35:13.897
> 
> 标签：.net, powershell, .net-4.0, puppet

我正在尝试使用以下命令远程安装 .net framework 4.0

# 1

```
command => 'Powershell.exe -Verb RunAs -FilePath C:\Temp\dotNetFx40_Full_setup.exe -ArgumentList "/q /norestart /log C:\Temp\NetFx40.htm"' 
```

# 2

```
command => 'C:\Windows\System32\cmd.exe /c C:\Temp\dotNetFx40_Full_setup.exe /q /norestart /log C:\Temp\NetFx40.htm', 
```

两者我都在日志中得到以下信息。顺便说一句，运行该命令的用户是本地管理员组的成员。

```
Final Result: Installation failed with error code: (0x00000005), "Access is denied. " (Elapsed time: 0 00:00:55).
    OS Version = 6.1.7601, Platform 2, Service Pack 1
    OS Description = Win2K8R2 - x64 Standard Edition Service Pack 1
    CommandLine = D:\ecfcf956d61e2bf89c1c75ce16\\Setup.exe /q /norestart /log C:\Temp\NetFx40.htm /x86 /x64 /ia64 /web
    TimeZone = Eastern Standard Time
    Initial LCID = 1033
    Using Simultaneous Download and Install mechanism
    Operation: Installing
    Package Name = Microsoft .NET Framework 4 Setup
    Package Version = 4.0.30319
    User Experience Data Collection Policy: Disabled
    Number of applicable items: 11
    Exe (D:\ecfcf956d61e2bf89c1c75ce16\SetupUtility.exe) succeeded.
    Exe Log File: dd_SetupUtility.txt
    ServiceControl operation succeeded!
    ServiceControl operation succeeded!
    Exe (C:\Users\_BUILD~1\AppData\Local\Temp\Microsoft .NET Framework 4 Setup_4.0.30319\Windows6.1-KB958488-v6001-x64.msu) failed with 0x5 - Access is denied. .
    Final Result: Installation failed with error code: (0x00000005), "Access is denied. " (Elapsed time: 0 00:00:21). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-19T08:57:36.623

它不会起作用，而且[你不是唯一一个](http://www.indigoblue.co.uk/blog/devops-windows-fun-times-installing-net-4-over-winrm-winrs-windows-server-2008r2)被这个咬伤的人！

阅读此 Microsoft 支持文章以获取完整说明：

[通过 WinRM 和 Windows Remote Shell 部署 .msu 文件时，Windows 更新独立安装程序 (WUSA) 返回 0x5 ERROR_ACCESS_DENIED](http://support.microsoft.com/kb/2773898)

解决方法是从 WinRM/WinRS 会话带外运行安装程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-31T00:12:11.430

这可以通过使用SysInternals 的[PSEXEC](http://technet.microsoft.com/en-us/sysinternals/bb896649)来实现。

`psexec.exe \\SERVERNAME /s \\networkshare\setup\ndp48-x86-x64-allos-enu.exe /passive /norestart /SkipMSUInstall`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-28T16:06:00.513

在安装 .NET Framework 4.0 时，它还会安装一些更新 (.msu) 文件。

但是当我们远程安装 .NET 4.0 时，它会因为这些更新而失败。其背后的原因是，不允许远程安装这些更新。请在此处找到知识库文章[输入链接描述](https://support.microsoft.com/en-us/kb/2773898)。本文还提到了解决方法。

我们可以跳过此更新，我们只能使用以下参数安装 .NET Framework 4.0：

```
dotnetfx40_Full_x86_x64.exe /norestart /SkipMSUInstall 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-23T19:04:08.087

我在尝试远程安装 .Net 4.0 时遇到了同样的错误。为了解决它，我使用了以下命令，根据[我如何远程以编程方式在 Azure VM 上安装 .NET 4 客户端？](https://stackoverflow.com/questions/20197954/how-can-i-remotely-programmatically-install-net-4-client-on-an-azure-vm)：

```
Invoke-Command -session $CompSession -scriptBlock {
Start-Process -FilePath "C:\dotnetfx40_Full_x86_x64.exe" `
-ArgumentList " /passive /norestart /SkipMSUInstall /log "C:\results.log" -PassThru | Wait-Process} 
```

# jquery - scrollTop 故障

> ID：14327140
> 
> 赞同：0
> 
> 时间：2013-01-14T21:35:18.247
> 
> 标签：jquery

我是新手，这是我的第一个问题...

我正在为我的客户开发一个网站，并使用一个简单的脚本实现了 jQuery：代码：

```
var fixed = false;

$(window).scroll(function() {
     if( $(window).scrollTop() + $(window).height() == $(document).height()) {
        if( !fixed ) {
            fixed = true;
            $('.return').fadeIn("slow");
        }                                           
    } else {
        if( fixed ) {
            fixed = false;
            $('.return').fadeOut("slow");
        }
    }
}); 
```

哪里有问题？好吧，在主页上一切正常，没有错误，当我滚动到页面末尾时，带有返回顶部链接的 div 出现，当我向上滑动时，div 消失。在第二个页面中，我实现了相同的页面结构，只添加了不同的文本和带有她的 API 的自定义 Google 地图。现在会发生什么？相反，当我滚动到页面末尾时，该脚本会消失，而当我滚动到顶部时，则会出现。

错误是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:42:13.903

可能*固定*是该页面上其他内容使用的变量。听起来它正在反向工作（所以在向下滚动之前将 fixed 设置为 true）。

假设这是针对某种页面滚动到顶部的功能，在用户向下滚动一点后出现分隔线不是更好吗？

```
$(window).scroll(function () {
    if($(this).scrollTop() > 150)
    { ... }
    else
    { ... }
}); 
```

# android - Android NDK Native Activity OpenGL ES 1.1 三角形不会出现

> ID：14327143
> 
> 赞同：1
> 
> 时间：2013-01-14T21:35:26.217
> 
> 标签：android, c++, android-ndk, opengl-es-1.1

我是 Android NDK 和 Native Activity 的新手，我喜欢在屏幕中间创建一个三角形，但无论我如何尝试，我都不会出现！

这是我的初始化方法：

```
void Engine::initialize() {
    LOGI("Engine::initialize fired!");

    const EGLint attribs[] = {
            EGL_SURFACE_TYPE, EGL_WINDOW_BIT,
            EGL_BLUE_SIZE, 8,
            EGL_GREEN_SIZE, 8,
            EGL_RED_SIZE, 8,
            EGL_NONE
    };
    EGLint w, h, dummy, format;
    EGLint numConfigs;
    EGLConfig config;
    EGLSurface surface;
    EGLContext context;

    EGLDisplay display = eglGetDisplay(EGL_DEFAULT_DISPLAY);
    eglInitialize(display, 0, 0);
    eglChooseConfig(display, attribs, &config, 1, &numConfigs);
    eglGetConfigAttrib(display, config, EGL_NATIVE_VISUAL_ID, &format);
    ANativeWindow_setBuffersGeometry(this->app->window, 0, 0, format);

    surface = eglCreateWindowSurface(display, config, this->app->window, NULL);
    context = eglCreateContext(display, config, NULL, NULL);

    if (eglMakeCurrent(display, surface, surface, context) == EGL_FALSE) {
        LOGW("Unable to eglMakeCurrent");
        return;
    }

    eglQuerySurface(display, surface, EGL_WIDTH, &w);
    eglQuerySurface(display, surface, EGL_HEIGHT, &h);

    this->display = display;
    this->context = context;
    this->surface = surface;
    this->width = w;
    this->height = h;

    // Initialize GL state.
    glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_FASTEST);
    glEnable(GL_CULL_FACE);
    glShadeModel(GL_SMOOTH);
    glDisable(GL_DEPTH_TEST);

    this->animating = true;
} 
```

这是我的渲染方法：

```
 void Engine::onRender() {
    glClearColor(0.7, 0.1, 0.5, 1);
    glClear(GL_COLOR_BUFFER_BIT);

    glViewport(0, 0, this->width, this->height);

    //glMatrixMode(GL_PROJECTION);
    //glLoadIdentity();
    //glFrustumf(-this->width / 2, this->width / 2, -this->height / 2, this->height / 2, 1, 3);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    glTranslatef(0, 0, 0);

    GLfloat triangle[] = {
        0, 0, 0,
        0, 100, 0, 
        100, -100, 0
    };

    glPushMatrix();
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glTranslatef(0, 0, 0);
    glColor4f(1.0f, 0.3f, 0.0f, .5f);
    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(3, GL_FLOAT, 0, triangle);
    glDrawArrays(GL_TRIANGLE_STRIP, 0, 3);
    glDisableClientState(GL_VERTEX_ARRAY);
    glPopMatrix();

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    glTranslatef(0, 0, -10);

    eglSwapBuffers(this->display, this->surface);
} 
```

任何人都可以帮忙吗？

我只能看到粉红色/紫色背景，但知道任何其他像素：| 控制台没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:30:39.340

您可能有 OpenGL 错误，但它们不会自动记录。您可以为此使用此功能：

```
static void checkGlError(const char* op) {
    for (GLint error = glGetError(); error; error = glGetError()) {
        LOGI("after %s() glError (0x%x)\n", op, error);
    }
} 
```

并在每次 OpenGL 调用后调用它。然后你会看到它崩溃的确切位置。

其中一部分，我建议您使用 OpenGL ES 2.0。我现在不确定您使用的所有调用是否都适用于 ES 1.1（也许其他人可以确认）。此外，还有一个与您实现完全相同的 NDK 示例，但使用的是 ES 2.0。你可以在这里找到它：

[http://code.google.com/p/android-cmake/source/browse/samples/hello-gl2/jni/gl_code.cpp?r=787b14cf9ed13299cb4c729d9a67d06e300fd52e](http://code.google.com/p/android-cmake/source/browse/samples/hello-gl2/jni/gl_code.cpp?r=787b14cf9ed13299cb4c729d9a67d06e300fd52e)

它使用一个简单的着色器来绘制三角形并使用 VBO 渲染它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:00:34.793

我今天遇到同样的问题好几个小时，终于找到了答案。这不是您的代码错误，但很可能是测试设备上的错误。

第一：您使用的是 Android 虚拟设备还是物理手机？

对于第一种情况，您需要使用 ADV min API-15，并将 gpu-emulation 设置为 yes。或者从命令行，您可以在运行 ADV 时使用此行：

```
emulator -avd <avd_name> -gpu on 
```

如果没问题，你会在 logcat 中找到这些行：

```
D/libEGL  (  595): loaded /system/lib/egl/libGLES_android.so
D/libEGL  (  595): loaded /system/lib/egl/libEGL_emulation.so
D/libEGL  (  595): loaded /system/lib/egl/libGLESv1_CM_emulation.so
D/libEGL  (  595): loaded /system/lib/egl/libGLESv2_emulation.so 
```

否则，您可能只会找到第一个，并且出现类似“egl.cnf not found, fall back to default”之类的错误（在以下位置找到帮助：[https ://developer.amazon.com/sdk/fire/enable-features.html #GPU](https://developer.amazon.com/sdk/fire/enable-features.html#GPU)）。

现在，如果您使用的是物理手机，我刚刚读到有些手机似乎不支持 egl，主要是一些带有 CyanogenMod 的手机（它们在 logcat 中显示类似的错误）。在这种情况下，您应该在其他手机或具有上述规格的 AVD 上进行测试。

# ios - 无法同时满足约束 - 没有适当的约束

> ID：14327145
> 
> 赞同：71
> 
> 时间：2013-01-14T21:35:28.437
> 
> 标签：ios, ipad, autoresizingmask, nslayoutconstraint

我已经完成并删除了每个用户约束，但**仅**在旋转设备后我仍然收到以下错误。我完全不知道为什么。有没有人有任何想法？

```
2013-01-14 21:30:31.363 myApp[35869:c07] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSAutoresizingMaskLayoutConstraint:0x84543d0 h=--& v=--& V:[UIView:0xa330270(768)]>",
    "<NSLayoutConstraint:0xa338350 V:[UIView:0xa331260]-(-1)-|   (Names: '|':UIView:0xa330270 )>",
    "<NSLayoutConstraint:0xa338390 V:|-(841)-[UIView:0xa331260]   (Names: '|':UIView:0xa330270 )>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0xa338350 V:[UIView:0xa331260]-(-1)-|   (Names: '|':UIView:0xa330270 )>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful. 
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-01-14T21:56:15.127

让我们一一来看看。

`"<NSAutoresizingMaskLayoutConstraint:0x84543d0 h=--& v=--& V:[UIView:0xa330270(768)]>"`

这就是说视图 0xa330270 ( **A** ) 必须是 768 点高。

`"<NSLayoutConstraint:0xa338350 V:[UIView:0xa331260]-(-1)-| (Names: '|':UIView:0xa330270 )>"`

这就是说视图 0xa331260 ( **B** ) 的底部边缘与**A**底部的间隙必须为 -1 ，这是它的超级视图。

`"<NSLayoutConstraint:0xa338390 V:|-(841)-[UIView:0xa331260] (Names: '|':UIView:0xa330270 )>"`

这就是说**B的上边缘必须与其父视图****A**的顶部相距 841 点。

这三件事不可能都是真的 - **A**不能是 768 点高，并且包含一个子视图，其顶部边缘从顶部插入 841 点，从底部插入 -1 点。您在哪里定义了这些约束？

你还没有说你想要实现什么布局，但看起来你可能在超级视图上有一个自动调整大小的掩码，当你旋转设备时它会阻止它的高度变化。据我所知，仅当您以编程方式添加视图时才会出现自动调整大小约束，因为情节提要或 xib 要么是全自动布局，要么不是。除非您正在执行诸如将自动布局视图（从笔尖加载？）添加到非自动布局笔尖的另一个视图之类的操作？

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-07-10T09:50:57.693

它值得了解基础知识，并了解 Apple/Xcode 试图通过日志告诉你什么

```
H = Horizontal constraint(for leading and Trailing)
V = Vertical constraint(top and bottom edge)
h = height
w = width

TopEdge    -> V:|-(points)-[VIEW:memoryAddress] 
BottomEdge -> V:[VIEW:memoryAddress]-(points)-|
Leading    -> H:|-(points)-[VIEW:memoryAddress] 
Trailing   -> H:[VIEW:memoryAddress] -(points)-|
height     -> h= --& v=--& V:[VIEW:memoryAddress((points)] 
width      -> VIEW:memoryAddress.width == points 
between    -> H:[VIEW 1]-(51)-[VIEW 2] 
```

一旦你理解了这一点，阅读你的具体错误就很容易了

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-10-11T17:05:39.457

感谢[http://useYourLoaf.com](http://useYourLoaf.com)提供完整的解决方案：

[http://useyourloaf.com/blog/using-identifiers-to-debug-autolayout.html](http://useyourloaf.com/blog/using-identifiers-to-debug-autolayout.html)

*我在 WWDC 2015 的 Auto Layout 会议中发现了一个快速提示，有助于调试约束问题*

如果您使用过 Auto Layout，您将熟悉 Xcode 在出错时吐出的日志。为了创建一个示例，我修改[了 Stack View 示例代码](https://github.com/kharrison/CodeExamples/tree/master/Stacks)，并为每个图像添加了一个约束，为它们提供了 240 的固定宽度（我们将看到这不是一个好主意）。

[![在此处输入图像描述](../Images/0e82e224bb404c36ea6d0461ab230366.png)](https://i.stack.imgur.com/icsFH.png)

这适用于 iPad 等常规宽度视图，但对于紧凑宽度视图（如 iPhone 纵向视图）来说太宽了。运行时的控制台日志读起来并不有趣。跳过样板文本，您将获得有问题的约束的列表：

```
"<NSLayoutConstraint:0x7fc1ab520360 H:[UIImageView:0x7fc1ab532650(240)]>",
"<NSLayoutConstraint:0x7fc1ab536ef0 H:[UIImageView:0x7fc1ab537380(240)]>",
"<NSLayoutConstraint:0x7fc1ab545cc0 UIView:0x7fc1ab53d870.trailingMargin == UIStackView:0x7fc1ab53dae0.trailing>",
"<NSLayoutConstraint:0x7fc1ab545d10 UIStackView:0x7fc1ab53dae0.leading == UIView:0x7fc1ab53d870.leadingMargin>",
"<NSLayoutConstraint:0x7fc1ab54e240 'UISV-alignment' UIStackView:0x7fc1ab53dc70.centerX == UIStackView:0x7fc1ab531a10.centerX>",
"<NSLayoutConstraint:0x7fc1ab5167c0 'UISV-canvas-connection' UIStackView:0x7fc1ab531a10.leading == UIImageView:0x7fc1ab532650.leading>",
"<NSLayoutConstraint:0x7fc1ab54ad80 'UISV-canvas-connection' H:[UIImageView:0x7fc1ab537380]-(0)-|   (Names: '|':UIStackView:0x7fc1ab531a10 )>",
"<NSLayoutConstraint:0x7fc1ab5397d0 'UISV-canvas-connection' UIStackView:0x7fc1ab53dae0.leading == _UILayoutSpacer:0x7fc1ab54c3c0'UISV-alignment-spanner'.leading>",
"<NSLayoutConstraint:0x7fc1ab54a4a0 'UISV-canvas-connection' UIStackView:0x7fc1ab53dae0.centerX == UIStackView:0x7fc1ab53dc70.centerX>",
"<NSLayoutConstraint:0x7fc1ab54b110 'UISV-spacing' H:[UIImageView:0x7fc1ab532650]-(16)-[UIImageView:0x7fc1ab537380]>",
"<NSLayoutConstraint:0x7fc1ab548210 'UISV-spanning-boundary' _UILayoutSpacer:0x7fc1ab54c3c0'UISV-alignment-spanner'.leading <= UIStackView:0x7fc1ab531a10.leading>",
"<NSLayoutConstraint:0x7fc1ab551690 'UIView-Encapsulated-Layout-Width' H:[UIView:0x7fc1ab53d870(375)]>" 
```

然后，日志会告诉您它已决定打破上述哪些限制：

```
Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x7fc1ab536ef0 H:[UIImageView:0x7fc1ab537380(240)]> 
```

日志输出使用自动布局视觉格式语言，但很难从系统创建的约束中挑选出我的约束。对于堆栈视图尤其如此，堆栈视图的设计旨在为您创建大部分约束。在这个简单的例子中，我知道我刚刚添加的固定宽度约束破坏了一些东西，但是从日志中很难看出这一点，而且视图越复杂，就越难。

**将标识符添加到约束**

`NSLayoutConstraint`如果您为每个约束添加一个标识符（自 iOS 7 以来就有一个标识符属性），那么日志会更容易理解。在 Interface Builder 中找到约束并在属性检查器中添加标识符（我使用 $ 作为前缀/后缀以使它们在日志中脱颖而出）：

[![在此处输入图像描述](../Images/aae69dc94fc263718c5344937562135b.png)](https://i.stack.imgur.com/OZ2Hf.png)

2015 年 8 月 18 日更新：正如评论中所指出的，标识符只能在从 Xcode 7 开始的 Interface Builder 中编辑。它在 Xcode 6.4 中不可见。

如果在代码中添加约束：

```
constraint.identifier = "$HeartImageFixedWidth$" 
```

如果您使用的是使用约束数组的视觉格式语言，那就更棘手了。例如，考虑为心脏图像视图创建固定宽度约束的 Swift 代码片段：

```
let heartWidth = NSLayoutConstraint.constraintsWithVisualFormat("[heart(240)]", 
                 options:[], metrics:nil, views:viewsDictionary) 
```

由于 heartWidth 是 [NSLayoutConstraint] 类型的数组，因此设置标识符需要做更多的工作：

```
for constraint in heartWidth {
  constraint.identifier = "$HeartImageFixedWidth$"
}
heartImage.addConstraints(heartWidth) 
```

为我的约束设置标识后，现在可以更轻松地在日志文件中找到它们（参见前四行）：

```
"<NSLayoutConstraint:0x7f92a305aeb0 '$ContainerStackViewLeading$' UIStackView:0x7f92a3053220.leading == UIView:0x7f92a3052fb0.leadingMargin + 32>",
"<NSLayoutConstraint:0x7f92a305b340 '$ContainerStackViewTrailing$' UIView:0x7f92a3052fb0.trailingMargin == UIStackView:0x7f92a3053220.trailing + 32>",
"<NSLayoutConstraint:0x7f92a301cf20 '$HeartImageFixedWidth$' H:[UIImageView:0x7f92a3047ef0(240)]>",
"<NSLayoutConstraint:0x7f92a3009be0 '$StarImageFixedWidth$' H:[UIImageView:0x7f92a304d190(240)]>",
"<NSLayoutConstraint:0x7f92a3060cc0 'UISV-alignment' UIStackView:0x7f92a30533b0.centerX == UIStackView:0x7f92a30472b0.centerX>",
"<NSLayoutConstraint:0x7f92a301c590 'UISV-canvas-connection' UIStackView:0x7f92a30472b0.leading == UIImageView:0x7f92a3047ef0.leading>",
"<NSLayoutConstraint:0x7f92a305f680 'UISV-canvas-connection' H:[UIImageView:0x7f92a304d190]-(0)-|   (Names: '|':UIStackView:0x7f92a30472b0 )>",
"<NSLayoutConstraint:0x7f92a3064190 'UISV-canvas-connection' UIStackView:0x7f92a3053220.leading == _UILayoutSpacer:0x7f92a30608a0'UISV-alignment-spanner'.leading>",
"<NSLayoutConstraint:0x7f92a30415d0 'UISV-canvas-connection' UIStackView:0x7f92a3053220.centerX == UIStackView:0x7f92a30533b0.centerX>",
"<NSLayoutConstraint:0x7f92a305fa10 'UISV-spacing' H:[UIImageView:0x7f92a3047ef0]-(16)-[UIImageView:0x7f92a304d190]>",
"<NSLayoutConstraint:0x7f92a30508c0 'UISV-spanning-boundary' _UILayoutSpacer:0x7f92a30608a0'UISV-alignment-spanner'.leading <= UIStackView:0x7f92a30472b0.leading>",
"<NSLayoutConstraint:0x7f92a3063240 'UIView-Encapsulated-Layout-Width' H:[UIView:0x7f92a3052fb0(375)]>" 
```

它也更清楚系统选择打破哪些约束：

```
Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x7f92a3009be0 '$StarImageFixedWidth$' H:[UIImageView:0x7f92a304d190(240)]> 
```

将标识符添加到约束并非不费吹灰之力，但它可以在您下次必须对复杂布局的调试日志进行排序时得到回报。

**延伸阅读**

*   [WWDC 2015 Session 219 自动布局之谜，第 2 部分](https://developer.apple.com/videos/wwdc/2015/?id=219)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-07-02T02:30:40.447

我想这不是一个常见的错误，但我以一种外行的方式解决了它。我收到了像上面这样的神秘信息。为了理解它，我创建了虚拟视图类并将其附加到我的故事板中的视图中。例如，如果我有一个 UIView，我创建了一个名为 AddressView 的类并将它附加到故事板中的这个视图。它有点耗时，但它对我有用。在那之后，我得到了类名，而不是对象 ID，这帮助我将很容易导致问题的视图归零。我的错误信息现在阅读，

```
2013-07-02 04:16:20.434 Myproject [2908:c07] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSLayoutConstraint:0x9edeae0 V:|-(0)-[AddressView:0x143ee020]   (Names: '|':MainView:0x129eb6a0 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x11e998c0 h=--& v=--& V:[MainView:0x129eb6a0(704)]>",
    "<NSLayoutConstraint:0x156720b0 V:[AddressView:0x143ee020]-(896)-|   (Names: '|':MainView:0x129eb6a0 )>"
) 
```

在这里您可以看到，我的视图 MainView 和 Address 视图的名称导致了问题。

为了解决它，我只是移动了我的子视图（在本例中为地址视图）并将其重新定位。我认为问题开始于我在 Xcode 4.5 中使用新的 Automatic Layour 和旧技能或手动定位视图。

无论如何，不​​确定这是否比勤奋更幸运，但这可能是一种不同的调试方式。也许这对某人有帮助！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-04-12T07:34:48.333

`YourConstraintView.translatesAutoresizingMaskIntoConstraints = NO;`

为我做了。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-05-27T04:28:02.743

我已经解决了这个问题，即从 xib 文件中删除所有 translatesAutoresizingMaskIntoConstraints 属性（将 xib 作为源代码打开）。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-01-08T23:36:17.487

一注。如果您使用个人热点连接进行测试，您会在日志中收到此错误，并且热点状态栏位于顶部。它摆脱了约束。

希望这对某人有所帮助..让我发疯了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-26T22:32:08.810

对我来说，这个错误在我给出时被吐出`tableView.estimatedRowHeight = UITableViewAutomaticDimension`

这应该是`tableView.estimatedRowHeight = "Some hardcoded value"`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-30T22:28:03.177

我遇到了这个问题，花了我 2 天的时间来找出问题的根源....

如果您在代码中以编程方式打开情节提要，请确保您这样做：

```
UIStoryboard *story = [UIStoryboard storyboardWithName:@"MovieMaker" bundle:nil];
    UIViewController *vc = [story instantiateInitialViewController];
    //this causes layout to break [self presentViewController:vc animated:YES completion:nil];
    [self showViewController:vc sender:nil]; 
```

我正在使用注释行（使用presentViewController）并且方向错误发生了抛出不是我的约束的约束冲突......更改为showViewController所有约束冲突都消失了并且方向有效......（我没有真的知道为什么它适用于表演而不是在场......仍然认为它是......外星人......）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-20T02:20:07.343

在调试控制台中生成的消息“无法同时满足约束”的问题在 XCode 9.4 中也遇到过。
在我在 iPad 模拟器上的特定实例中，该消息将生成：
1）仅当将焦点放在特定的 UITextField 上时。
2）即使删除了所有视图约束。
2）即使所有视图约束“重置为建议的约束”。

但是，当打开软件键盘进行显示时，不会生成该消息。因此，我应该在这个问题上花费多少时间，在我的实例中，只有在关闭软件键盘时才会生成。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-01-15T10:26:21.683

当 uitableviewCell 中的上述日志时，此行解决了我的问题

```
func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -> CGFloat {
    return UITableView.automaticDimension > CellHeight.rowHeight44 ? UITableView.automaticDimension : CellHeight.rowHeight44
} 
```

# c# - IE8 中的“controltovalidate”错误

> ID：14327147
> 
> 赞同：1
> 
> 时间：2013-01-14T21:35:34.937
> 
> 标签：c#, jquery, ajax, internet-explorer

我收到一个 JavaScript 错误（当然只在 IE 中），我不知道为什么。我以为它是一个尾随逗号或其他东西，但我找不到。我希望我忽略了一些东西，也许你们中的一个人可以看到我错过了什么。

我的控件和自定义验证器：

```
<asp:TextBox runat="server" ID="txtName" MaxLength="100" CssClass="styled" Columns="50" />
                                <asp:CustomValidator runat="server" ID="cvName" ErrorMessage="Enter a valid contact name or email address" ControlToValidate="txtName" Display="None" ValidationGroup="PlatformContact" ClientValidationFunction="doesUserExist" />
                                <asp:ValidatorCalloutExtender ID="vceName" runat="server" TargetControlID="cvName" WarningIconImageUrl="~/img/icons/ic_asterisk.gif" CssClass="validatorStyled" PopupPosition="Right" CloseImageUrl="~/img/icons/ic_x_close_orange.png" />                                    
                                <asp:RequiredFieldValidator runat="server" ID="valName" ErrorMessage="Enter a contact name or email address" ControlToValidate="txtName" Display="None" ValidationGroup="PlatformContact" />
                                <asp:ValidatorCalloutExtender ID="vceNameRequired" runat="server" TargetControlID="valName" WarningIconImageUrl="~/img/icons/ic_asterisk.gif" CssClass="validatorStyled" PopupPosition="Right" CloseImageUrl="~/img/icons/ic_x_close_orange.png" /> 
```

这是我正在使用的 JavaScript/jQuery：

```
<script language="javascript" type="text/javascript">
    var userExists = true;

    function doesUserExist(source, args) {
        var txtName = $('#<%= txtName.ClientID %>').val();
        $.ajaxSetup({ cache: false });
        $.ajax({
            type: "POST",
            contentType: "application/json",
            data: "{name:'" + txtName + "'}",
            url: "ManageMyContacts.aspx/DoesUserExist",
            dataType: "json",
            success: function (result) {
                userExists = result.d;
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                //Something bad happened,redirect to login page
                window.location.href = '<%= ResolveUrl("~/Default.aspx") %>';
            }
        });
        args.IsValid = userExists;
    }
</script> 
```

非常感谢任何见解。

编辑：JavaScript 错误

> 消息：'controltovalidate' 为空或不是对象

这是我用户检查用户名的WebMethod（在后面的代码中）

```
[WebMethod(EnableSession = true)]
    public static bool DoesUserExist(string name)
    {
        ManageMyContactsService service = new ManageMyContactsService();
        int index = name.IndexOf("[") + 1;
        if (index > 0)
        {
            string email = name.Substring(index, name.Length - (index + 1));
            return service.DoesUserExist(email);
        }
        else if (name.IndexOf("@") == -1)
            return false;
        else
            return service.DoesUserExist(name);
    } 
```

我注意到由于某种原因，dosUserExist 函数被调用了两次，有人能从这段代码中说出原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:44:19.010

似乎 UpdatePanel 导致了第二次 ajax 调用并导致 IE 抛出 JS 错误。在其他浏览器中运行良好，但不是 IE7/8！

希望对有类似问题的人有所帮助。

# google-app-engine - 我将 Eclipse 中的 GAE 升级到 1.7.4

> ID：14327148
> 
> 赞同：1
> 
> 时间：2013-01-14T21:35:37.277
> 
> 标签：google-app-engine, jsp

我的基于 JSP 的应用程序现在没有部署。我收到以下错误： *无法获取系统 Java 编译器。请使用 JDK，而不是 JRE。* 有没有人找到解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:45:24.067

您很可能在 JSP 中使用了一些 Java 代码，因此需要 JDK 来编译它。

您可以尝试以下几点：

*   检查您使用的是 JDK 而不是 JRE。在 Eclipse 中，转到 Window --> Preferences 然后 Java --> Installed JREs。如果它指向 JRE 而不是 JDK，我建议您更改它。所以安装一个 JDK，在此处的设置中删除对 JRE 的引用，并将其仅指向 JDK。

*   如果您仍然遇到上述异常，那么我建议提供与您的 Eclipse 可执行文件位于同一文件夹中的`-vm`设置。`eclipse.ini`

# device-driver - 适用于 Windows 7 的 INSTDRV.EXE

> ID：14327149
> 
> 赞同：1
> 
> 时间：2013-01-14T21:35:40.230
> 
> 标签：device-driver, legacy

需要在 Windows 7 下安装非 PNP 内核设备驱动程序。旧的可靠 INSTDRV.EXE 在 StartService 上失败，声称“2 -- 系统找不到指定的文件”，尽管驱动程序 SYS 文件的完全限定路径绝对准确。我意识到设备管理器有一个“安装旧版驱动程序”操作菜单项，但这需要识别我没有的特定设备。为什么 INSTDRV.EXE 在 Windows 7 下不起作用？如何在 Windows 7 下安装非 PNP 内核设备驱动程序？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-17T10:29:23.110

据我所知，在现代 Windows 上，您必须编写 .inf 文件。阅读这篇[简短的 MSDN 文章](https://msdn.microsoft.com/ru-ru/library/windows/hardware/ff544221(v=vs.85).aspx)。WDK 中有一个[工具](https://msdn.microsoft.com/en-us/library/windows/hardware/ff544842(v=vs.85).aspx)可以帮助安装驱动程序。只需将其复制到驱动程序的文件夹并运行它。

更新：提交此答案后，我找到了另一种安装非 pnp 驱动程序的方法。还有另一个工具，DevCon。它可以在其他 WDK 工具 (Windows Kits\10\Tools\x64) 中找到。只需将 DevCon.exe 复制到驱动程序的文件夹并执行如下：

```
devcon.exe install pcscgate.inf Root\pcscgate 
```

Root\pcscgate - 与 .inf 文件的 [Model] 部分中的设备标识符匹配的设备标识符（是的，您仍然需要该文件）。DevCon 使用此标识符创建一个空设备节点，然后安装驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-12T16:47:15.787

我刚才也遇到了类似的问题，最后通过将 Linker/Input/Ignore All Default Libraries 设置为 Yes (/NODEFAULTLIB) 解决了。

# javascript - 突出显示 URL 中的搜索值

> ID：14327151
> 
> 赞同：2
> 
> 时间：2013-01-14T21:35:53.253
> 
> 标签：javascript, jquery, url, parameters, highlight

目前我正在使用一个网站，当您在全局标题中搜索时，您将被带到搜索结果页面。进入搜索结果页面后，您可以在 url 中看到您的搜索。示例：我搜索了大象，search-results.html?elephant。我需要我的搜索结果页面突出显示页面上与该值匹配的所有内容，并且仅突出显示该值。我不希望突出显示在问号之后拾取“搜索”或“结果，值。我找到的最接近的解决方案是这个

[http://www.nsftools.com/misc/SearchAndHighlight.htm](http://www.nsftools.com/misc/SearchAndHighlight.htm)

但它以某种方式打断了我的 css div 标题。另外，（也许我的大脑只是因为盯着这段代码太久而被炒了）我怎样才能自定义这段代码来读取我的值？这似乎也是一个解决方案，但我无法让它工作。我将函数 highlightSelection() 与主体加载一起使用，但没有运气。

[http://www.switchonthecode.com/tutorials/javascript-highlighting-selected-text](http://www.switchonthecode.com/tutorials/javascript-highlighting-selected-text)

甚至 Coopster 的帖子，如果我可以从 url 中捕获值。我知道我可以 document.write(window.location.search.substr(1)) 它会告诉我。

[http://www.webmasterworld.com/forum83/2418.htm](http://www.webmasterworld.com/forum83/2418.htm)

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:56:05.673

您可以尝试使用包含： [http ://docs.jquery.com/Selectors/contains#text](http://docs.jquery.com/Selectors/contains#text)

```
$("span:contains('Hey')").css("text-decoration", "underline"); 
```

这个问题你必须有一个类或你想专门搜索的东西，你可以做一个 *:contains 但它最终会抓住每个元素。

[http://jsfiddle.net/dLdb2/](http://jsfiddle.net/dLdb2/)

您将需要通过 javascript 或您使用的任何后端获取 $_GET 值。这是一个使用 jQuery 获取它的链接：

[在 jquery 中检索 $_GET 变量](https://stackoverflow.com/questions/1764778/retrieving-get-variable-in-jquery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:05:36.440

您可以使用部分乍得解决方案来检索包含特定文本的跨度。然后，不用对整个 HTMLElement 应用 CSS 规则，您可以使用 检索其内容`.html()`，使用 specific 包装特定单词，`<span>`然后`.html()`再次使用方法更新内容。

```
// Retrieve and explode URL
var urlParts = window.location.href.split("?");
if (urlParts.length == 2)
{
    // Retrieve all span containing the word
    $("span:contains('" + urlParts[1] + "')").each(function(index, spanElement) {

        var jQSpan = $(spanElement);
        jQSpan.html(jQSpan.html().replace(urlParts[1], '<span class="special">' + urlParts[1] + '</span>'));

    });
} 
```

假设你有一个`.special`CSS 类会突出显示这个词。

```
.special {
    background-color: yellow;
} 
```

注意：Javascript 函数中的单词可以通过 PHP 或其他服务器端语言注入。

这是一个完整的示例，假设您的 URL 是**http://path/to/your/file.php?Lorem**

```
<html>
    <head>
        <script type="text/javascript" src="path/to/your/jQuery.js"></script>
    </head>
    <body>
        <span>
            Le Lorem Ipsum est simplement du faux texte employé dans la composition et la mise en page avant impression.
        </span>
        <script type="text/javascript">

            // Start when DOM is ready
            $(document).ready(function() {

                var urlParts = window.location.href.split("?");

                // Highlight word if we have a word in parameter
                if (urlParts.length == 2)
                {
                    // Retrieve all span containing the word
                    $("span:contains('" + urlParts[1] + "')").each(function(index, spanElement) {

                        var jQSpan = $(spanElement);
                        jQSpan.html(jQSpan.html().replace(urlParts[1], '<span class="special">' + urlParts[1] + '</span>'));

                    });
                }
            });

        </script>
    </body>
</html> 
```

解释：当 DOM 准备好时，Javascript 代码将尝试提取 URL 中“？”之后的部分。（在我们的例子中，这是“Lorem”）。然后，Javascript 通过 jQuery 检索包含该单词的所有跨度，并在每个跨度上循环以使用特殊跨度包装单词（具有 CSS 类“特殊”的跨度）

如果您更改 URL 中的单词并重新加载页面，突出显示将动态更改

# css - CSS 完全破坏了 Wordpress 页面线网站？

> ID：14327155
> 
> 赞同：0
> 
> 时间：2013-01-14T21:35:59.290
> 
> 标签：css, wordpress, wordpress-theming, pagelines, pagelines-framework

我正在为[站点使用](http://www.crankhousecycles.com)[Pagelines 主题](http://www.pagelines.com/wiki/How_to_Use_the_Custom_Code_Settings)，并将自定义 CSS 放在自定义 CSS 字段中。长话短说，我破坏了整个网站，并将 CSS 存储在数据库中。

加载页面时绝对没有任何内容。一个空白的头部标签和一个空白的身体标签。

首先，这怎么可能，其次，有谁知道如何排除存储在数据库中的 dynamic.css 样式表，只有数据库登录信息，但没有 cpanel 访问权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:53:36.303

检查您的functions.php 以确保在开始和结束php 标记之前或之后没有空格。

# python - 在 Python 的模块中定义和使用类

> ID：14327157
> 
> 赞同：0
> 
> 时间：2013-01-14T21:36:11.010
> 
> 标签：python, class, module

我有模块 Test.py 和模块内的类测试。这是代码：

```
class test:

    SIZE = 100;
    tot = 0;

    def __init__(self, int1, int2):
        tot = int1 + int2;

    def getTot(self):
        return tot;

    def printIntegers(self):
        for i in range(0, 10):
            print(i); 
```

现在，在口译员处，我尝试：

```
>>> import Test
>>> t = test(1, 2); 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    t = test(1, 2);
NameError: name 'test' is not defined 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T21:37:24.837

您必须像这样访问该类：

```
Test.test 
```

如果您想像以前一样访问该课程，您有两种选择：

```
from Test import * 
```

这会从模块中导入所有内容。但是，不建议这样做，因为模块中的某些内容可能会在没有意识到的情况下覆盖内置。

你也可以这样做：

```
from Test import test 
```

这更安全，因为您知道要覆盖哪些名称，假设您实际上正在覆盖任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:55:51.613

@larsmans 和@Votatility 已经回答了您的问题，但我正在插话，因为没有人提到[您的命名约定违反了 Python 标准](http://www.python.org/dev/peps/pep-0008/#package-and-module-names)。

模块应该全部小写，用下划线分隔（可选），而类应该是驼峰式大小写。所以，你*应该*拥有的是：

测试.py：

```
class Test(object):
    pass 
```

其他.py

```
from test import Test
# or 
import test
inst = test.Test() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T21:37:45.920

当你这样做时`import Test`，你可以以`Test.test`. 如果您想以 . 身份访问它`test`，请执行`from Test import test`.

# wpf - 是否可以为不是按钮的 WPF 元素创建鼠标悬停状态？

> ID：14327158
> 
> 赞同：0
> 
> 时间：2013-01-14T21:36:13.143
> 
> 标签：wpf, xaml, mouseevent

我有一堆带有`Trigger`s 和悬停效果的按钮。我发现一些问题覆盖了我的主题，所以我想知道是否可以将鼠标悬停效果添加到其他元素，例如`TextBlock`s 或`StackPanel`s。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:50:23.747

刚刚发现这是可能的。将其作为答案以防万一。

a 的悬停状态`TextBlock`：

```
<TextBlock Text="Textblock">   
        <TextBlock.Style>    
            <Style TargetType="TextBlock">      
                <Style.Triggers>         
                    <Trigger Property="IsMouseOver" Value="True">     
                        <Setter Property="TextBlock.Background" Value="Blue" />   
                    </Trigger>    
                </Style.Triggers>     
            </Style>   
        </TextBlock.Style>
    </TextBlock> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:54:55.940

是的，它可能但有限，但设置背景是唯一的简单选项

```
 <TextBlock Text="Hello World!" Margin="0,23,0,111">
            <TextBlock.Style>
                <Style TargetType="TextBlock">
                    <Setter Property= "Background" Value="Transparent"/>
                    <Style.Triggers>
                       <Trigger Property ="IsMouseOver" Value="True">
                            <Setter Property= "Background" >
                                <Setter.Value>
                                    <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                                        <GradientStopCollection>
                                            <GradientStop Color="Aqua" Offset="0" />
                                            <GradientStop Color="Transparent" Offset="1" />
                                        </GradientStopCollection>
                                    </LinearGradientBrush>
                                </Setter.Value>
                            </Setter>
                       </Trigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock> 
```

结果

![在此处输入图像描述](../Images/c8c616c05ebbd154deccb734352bcc29.png) ![在此处输入图像描述](../Images/b3068e8be383898bb1a4131d10ab007e.png)

# html - HTML5 中的背景视频

> ID：14327159
> 
> 赞同：0
> 
> 时间：2013-01-14T21:36:14.423
> 
> 标签：html, video

我已经阅读了一些关于 HTML 视频标签的基础知识，但是有人可以向我解释一下纽约时报关于 Tunnel Creek 雪崩的报道是如何在页面加载时显示该背景视频的吗？或者指点我一个关于这个主题的好教程？

我尝试查看页面源代码，但无法完全确定。

[http://www.nytimes.com/projects/2012/snow-fall/#/?part=tunnel-creek](http://www.nytimes.com/projects/2012/snow-fall/#/?part=tunnel-creek)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:32:52.560

最简单的解决方案是看看[http://syddev.com/jquery.videoBG/](http://syddev.com/jquery.videoBG/)虽然这个 SO 回答[视频作为网站背景？HTML 5](https://stackoverflow.com/questions/3800813/video-as-site-background-html-5)展示了一个简单的方法来滚动你自己的

# java - 具有多个关联的休眠获取

> ID：14327166
> 
> 赞同：5
> 
> 时间：2013-01-14T21:36:54.767
> 
> 标签：java, spring, hibernate

我正在为实体对象上的延迟加载集合执行此操作：

```
@Transactional(readOnly = true)
public T getWithAssociation(final long id, String association) {
    Session session = sessionFactory.getCurrentSession();
    final Criteria crit = session.createCriteria(genericType);
    crit.setFetchMode(association, FetchMode.JOIN);
    crit.add(Property.forName("id").eq(id));
    return (T) crit.uniqueResult();
} 
```

我想返回一个加载了多个延迟加载集合的实体对象*，*我可以这样做吗（传入一个列表并为单个条件设置多个关联？）：

```
 @Transactional(readOnly = true)
    public T getWithAssociations(final long id, List<String> associations) {
        Session session = sessionFactory.getCurrentSession();
        final Criteria crit = session.createCriteria(genericType);
        for(String association:associations) {
            crit.setFetchMode(association, FetchMode.JOIN);
        }
        crit.add(Property.forName("id").eq(id));
        return (T) crit.uniqueResult();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T22:08:50.477

是的？

[文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#querycriteria-dynamicfetching)包含以下内容：

```
List cats = sess.createCriteria(Cat.class)
    .add( Restrictions.like("name", "Fritz%") )
    .setFetchMode("mate", FetchMode.EAGER)
    .setFetchMode("kittens", FetchMode.EAGER)
    .list(); 
```

> 此查询将通过外连接获取 mate 和 kittens。有关详细信息，请参阅第 20.1 节，“获取策略”。

# ruby - 红宝石鞋悬停元素

> ID：14327173
> 
> 赞同：0
> 
> 时间：2013-01-14T21:37:08.323
> 
> 标签：ruby, hover, shoes

悬停元素不起作用。问题出在哪里？怎么修？

```
Shoes.app :width => 635, :height => 410 do
    background image "http://PATH_TO_IMAGE"
    a = stack :width => 360, :height => 200, :margin_left => 250, :margin_top => 200 do
        hover do
            a.clear { para "Some Text qwe qwe qwerty", :stroke => black }
        end
        leave do
            a.clear { background image "http://PATH_TO_IMAGE" }
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T02:58:10.700

我认为原则上您不能`image`用作`background`.

我也不确定这是否是您想要达到的效果，但它表明您做错了什么：

```
Shoes.app :width => 635, :height => 410 do

  a = stack :width => 360, :height => 200  do
    image "http://PATH_TO_IMAGE"

    hover do
         a.clear {para "Some Text qwe qwe qwerty", :stroke => black }
    end

    leave do
        a.clear {  image "http://PATH_TO_IMAGE" }
    end

  end

end 
```

# ruby-on-rails - Twitter Ruby Gem 请求过多

> ID：14327174
> 
> 赞同：0
> 
> 时间：2013-01-14T21:37:09.860
> 
> 标签：ruby-on-rails, ruby, twitter

我目前正在使用带有 rspec 和 Ruby on Rails（带有 twitter gem）的 TDD 来提取推文和趋势以进行分析。然而，我不断地得到`Twitter::Error::TooManyRequests`并且不得不坐在周围玩弄拇指，直到我可以提出另一个请求。这是 Twitter 搜索 API 的限制还是我做错了什么？

现在我有一个简单的索引页面，它调用 Twitter.config 一次，然后用 Twitter.trends 跟踪它一次。在此运行`rspec spec`以生成一个索引页会导致前面提到的错误。我在这里错过了什么吗？我找不到大量发出 twitter 请求的任何地方（应用程序、框架或完整跟踪）。

我还没有使用流 API，因为它只提供原始推文而不提供趋势信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:03:24.683

您可能需要查看可以记录 HTTP 交互的[VCR](https://github.com/vcr/vcr) gem，这样您就不会不断地访问外部服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T01:18:38.677

Twitter 的速率限制为 150 个未经过身份验证的请求和 250 个经过身份验证的用户的请求。也许您可以想办法以块的形式收集数据，而不是不断地调用。

# c# - 参数列表中的无效值

> ID：14327182
> 
> 赞同：0
> 
> 时间：2013-01-14T21:37:35.483
> 
> 标签：c#, list, arguments

我有两个这样的课程

```
class ClassA
{
    // Some properties
    public String PropertyA { get; set; }
}

class ClassB
{
    public List<ClassA> PropertyB { get; private set; }

    ClassB()
    {
        PropertyB = new List<ClassA>();
    }
} 
```

然后在其他地方我有这样的方法

```
public String MyMethod(ClassB argument)
{
    //do stuff with all the PropertyA values
} 
```

我希望从参数中 PropertyB 中的任何元素都没有 null 或空 PropertyA （将生成无效结果），我应该抛出什么样的异常？参数异常？

编辑：所以我会尝试用文字来解释它：我有一个方法，它有一个 ClassB 类型的参数，ClassB 有一个 ClassA 列表，每个 ClassA 都有一个字符串属性。我正在使用这个属性建立一个查询，所以我相信最好在使用查询时停止在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:40:11.457

在我见过/使用/编写的代码中，`ArgumentException`当参数出现通用错误（属性为空等）时会抛出。如果参数本身为空，您将抛出一个`ArgumentNullException`.

但是，如果我不编写某种库/框架，我通常不会这样做。通常我让框架完成它的工作。

# jquery - 如何避免 .prev().prev().prev() 或如何在当前项目之前查找具有类的项目

> ID：14327183
> 
> 赞同：2
> 
> 时间：2013-01-14T21:37:36.060
> 
> 标签：jquery

我查阅了整个 jQuery Docs，但没有找到任何东西：是否可以在当前元素之前搜索具有特定类的元素？我认为这会起作用，但它不会：

```
$(this).prev('.bar'); 
```

[http://jsfiddle.net/Ejh5G/](http://jsfiddle.net/Ejh5G/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:39:01.707

尝试：

```
 $('.d').prevAll('.a').css('color','red'); 
```

[小提琴](http://jsfiddle.net/Ejh5G/1/)

为了解决 Jan 的观点，您可以这样做：

```
$('.d').prevAll('.a').first().css('color','red'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:39:15.003

使用[.prevAll()](http://api.jquery.com/prevAll/)：

```
$(this).prevAll('.bar');// all elements    
$(this).prevAll('.bar').eq(0); //first element
$(this).prevAll('.bar:last'); //last element 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T21:42:05.933

试试这个

```
$('.d').prevAll('.a').first().css('color','red'); 
```

`.prevAll()` -- 将选择所有先前的元素`class a`

`.first()` -- 将确保仅选择列表中的第一个元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T21:44:10.640

`.prevUntil`应该管用，

```
$('.d').prevUntil('.a').last().prev().css('color','red'); 
```

演示：http: [//jsfiddle.net/Ejh5G/3/](http://jsfiddle.net/Ejh5G/3/)

# ruby-on-rails - Rails 测试：自定义路线的“无路线匹配”

> ID：14327185
> 
> 赞同：0
> 
> 时间：2013-01-14T21:37:45.420
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, rspec

我有以下路线：

```
GET    /confirm/:token(.:format)  Confirmations#confirm 
```

控制器：

```
class ConfirmationsController < ApplicationController
  # GET /confirm/<token>
  def confirm
    @user = User.find_by_email_token(params[:token])
    if @user
      @user.confirmed = true
      @user.email_token = nil
      @user.save!
      sign_in @user
      redirect_to root_url, flash: { success: "Welcome <#{@user.email}>, your address has been verified." }
    elsif
      redirect_to root_url, flash: { error: "Error: could not find matching user record." }
    end
  end
end 
```

这很简单`confirmations_controller_spec.rb`：

```
require 'spec_helper'

describe ConfirmationsController do

  let(:user) { FactoryGirl.create(:user, email_token: "some_token") }

  describe "Get confirm" do
    it "confirms user with valid email_token" do
      get :confirm, token: "some_token"
      assigns(:user).should eq(user)
      user.reload.email_token.should be_nil
    end

    it "does not confirm user with invalid email_token"
  end
end 
```

但它失败了：

```
 1) ConfirmationsController Get confirm confirms user with valid email_token
     Failure/Error: get :confirm, token: "some_token"
     ActionController::RoutingError:
       No route matches {:token=>"some_token", :controller=>"confirmations", :action=>"confirm"}
     # ./spec/controllers/confirmations_controller_spec.rb:9:in `block (3 levels) in <top (required)>' 
```

任何人都看到我搞砸了什么（可能是多件事）？

顺便说一句-我在`get`这里使用请求（而不是`put`），因为它是从基于文本的电子邮件发起的，所以据我了解，我们不能使用`put`请求...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:14:25.660

在你的 rake 路由中，`Confirmations`不应该有大写字母。

你能像这样定义路线吗`config/routes.rb`：

```
match '/confirm/:token' => 'confirmations#confirm' 
```

# ruby-on-rails - 在 ruby on rails 中有一个指向变量 twitter 句柄的 href 链接

> ID：14327189
> 
> 赞同：2
> 
> 时间：2013-01-14T21:37:49.447
> 
> 标签：ruby-on-rails, ruby, twitter, haml, href

我正在尝试通过 Twitter 句柄动态创建一个链接到用户的 Twitter 帐户。问题是 Twitter 句柄只是`@variablehandle`，而不是完整的站点链接。

我想出了如何动态链接到 Facebook，但 Twitter 失败了，所以也许这可以帮助你们帮助我。

Twitter 和 Facebook 变量都出现在此处。此外，我们正在使用 HAML：

```
- unless @user.facebook_url.blank?
  %a{:href => @user.facebook_url}
    click here

-unless @user.twitter_handle.blank?
  %a{:href => "https://twitter.com/" + @user.twitter_handle}
    click me 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:42:22.640

使用`link_to`助手让生活更轻松：

```
- unless @user.facebook_url.blank?
  =link_to "click here", @user.facebook_url

- unless @user.twitter_handle.blank?
  =link_to "click me", "https://twitter.com/" + @user.twitter_handle 
```

# facebook - 使用应用令牌将照片发布到 Facebook

> ID：14327191
> 
> 赞同：0
> 
> 时间：2013-01-14T21:37:54.663
> 
> 标签：facebook, facebook-graph-api, photo, facebook-access-token

有几个人问过如何使用应用令牌发布照片，一般的回答似乎是他们应该使用用户令牌。

但是，根据[https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/](https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)：“[y]你可以使用应用令牌代表用户发布或删除内容您的应用权限”。

并根据[https://developers.facebook.com/docs/reference/api/photo/](https://developers.facebook.com/docs/reference/api/photo/)：

“要发布'照片'对象，您需要 - 有效的访问令牌 -publish_stream 权限”

我解释这两个语句的方式是，我应该能够使用有效的 APP 令牌将照片发布到 .../USER_ID/photos。但是，当我尝试这样做时，我收到消息“请求此资源需要用户访问令牌”。同时，我可以轻松地发布到 .../USER_ID/feed，只使用 APP 令牌。也可以仅使用 APP 令牌提交包含“用户生成的照片”的故事。

所以一个应用程序可以用一个 APP 令牌做这些事情，但需要一个特定于用户的令牌用于 .../USER_ID/photos？我想知道这种行为是否是设计使然？到目前为止，我还没有在文档中找到任何表明是这种情况的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:29:31.693

我也被困在提到的同一点上。文档几乎没有帮助。

我使用的解决方法是在登录并存储给用户的临时用户访问令牌时获取“offline_access”权限。

在发布照片时，我使用了该离线用户访问令牌，因为应用访问令牌不起作用。尽管不鼓励使用offline_access，但它的工作方式应有尽有……这似乎是目前唯一的方法。

# android - f在动画中是什么意思

> ID：14327192
> 
> 赞同：0
> 
> 时间：2013-01-14T21:37:57.293
> 
> 标签：android

> **可能重复：**
> [Android 编程中的后缀“f”是什么意思？](https://stackoverflow.com/questions/4659517/what-does-suffix-f-mean-in-android-programming)

如果这是一个愚蠢的问题，请原谅，但我总是看到人们在初始化动画时写 350f 和 15f 之类的东西（作为参数传递）。f 是什么意思？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:39:16.637

我相信这是参数的格式，在这种情况下是 FLOAT 。

# c++ - 浮动到 SInt32

> ID：14327194
> 
> 赞同：3
> 
> 时间：2013-01-14T21:38:01.650
> 
> 标签：c++, ios, core-audio, signal-processing

我有一系列使用 32 位浮点数作为主要样本数据类型的 c++ 信号处理类。例如，所有振荡器类都会为请求的每个样本返回浮点数。这对所有类都是一样的，所有样本的计算都是浮点数。

我正在将这些类移植到 iOS 上。对于性能问题，我想在 8.24 定点中操作以充分利用处理器，据说 iOS 上处理整数而不是浮点数有很大的性能优势。我m 目前以浮点数进行所有计算，然后在输出前的最后阶段转换为 SInt32，这意味着最后阶段的每个样本都需要转换。

我是否只需将类中使用的数据类型从 Float 更改为 SInt32。所以我的振荡器和滤波器等通过在内部传递 SInt32 而不是浮点数来计算定点？

真的这么简单吗？还是我必须完全重写所有不同的算法？

在执行此任务之前，我还需要了解其他巫术吗？

非常感谢任何有时间对此发表评论的人..非常感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:38:55.773

这主要是一个神话。`armv6`如果您在 Thumb 模式下编译，浮点性能曾经很慢；这不是`armv7`支持 Thumb 2 的问题（我将避免进一步讨论 Xcode 不再支持的 armv6）。您还希望避免使用双精度数，因为浮点数可以使用更快的 NEON（又名高级 SIMD 指令）单元——这很容易意外地做到；尝试启用`-Wshorten`.

我也怀疑你会在 8.24 乘法中获得明显更好的性能，尤其是在使用 NEON 单元时。更改`float` `int`//也不会自动为 8.24 乘法进行必要的转换`int32_t`。`SInt32`

如果您知道将浮点数转换为整数比较慢，请考虑使用 Accelerate.framework 中的一些函数，即[vDSP_vfix16()](https://developer.apple.com/library/ios/documentation/Accelerate/Reference/vDSPRef/Reference/reference.html#//apple_ref/c/func/vDSP_vfix16)或 vDSP_vfixr16()。

# python - 非常简单的 Python 上的无效语法 if ... else 语句

> ID：14327195
> 
> 赞同：6
> 
> 时间：2013-01-14T21:38:08.547
> 
> 标签：python, python-3.x

有人可以解释为什么我在制定这个简单的 if...else 语句时从 Python 的解释器中得到一个无效的语法错误吗？我自己不添加任何选项卡，我只是输入文本，然后在输入后按 Enter。当我在“else:”之后输入回车时，我得到了错误。解释器突出显示“Else”。怎么了？

```
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:55:48)
[MSC v.1600 32 bit (Intel)] on win32
Type "copyright", "credits" or "license()" for more information.

>>> if 3 > 0:
        print("3 greater than 0")
        else:

SyntaxError: invalid syntax
>>> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T21:47:01.517

与许多其他语言不同，Python 不允许空块（因为它不使用大括号来指示块）。`pass`任何时候你想要一个空块（包括在 if/else 语句和方法中）都必须使用关键字。

例如，

```
if 3 > 0:
    print('3 greater then 0')
else:
    pass 
```

或者一个空方法：

```
def doNothing():
    pass 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-14T21:40:52.097

那是因为你的`else`部分是空的，也没有正确缩进`if`.

```
if 3 > 0:
    print "voila"
else:    
    pass 
```

在 python`pass`中等同于`{}`在其他语言中使用，例如 C。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T21:41:10.847

该`else`块需要与以下缩进级别相同`if`：

```
if 3 > 0:
    print('3 greater then 0')
else:
    print('3 less than or equal to 0') 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-22T05:59:19.580

关键字`else`必须分别相对于`if`语句缩进

**例如**

```
a = 2
if a == 2:
    print "a=%d", % a
else:
    print "mismatched" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-18T18:22:40.173

![点击打开图片](../Images/caa44d98d8e4c101329ccf38cf84d6e5.png)

问题只是缩进。

您正在使用空闲。当你在第一个打印语句后按回车时 else 的缩进默认与打印相同，这是不正确的。您需要转到其他句子的开头并按一次。检查附件图像我的意思。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-25T15:40:34.467

这是一个明显的错误，当我们在 if 语句之后按 enter 时，它会进入那个意图，尝试让 else 语句与 if 语句保持一致。这是一个常见的印刷错误

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-03T05:19:02.267

否则需要垂直对齐。识别在 Python 中发挥着关键作用。我在使用 else 时遇到了相同的语法错误。确保正确缩进代码

# python - 在循环中作为字典传递时，带有python的硒不会填充下拉列表

> ID：14327197
> 
> 赞同：0
> 
> 时间：2013-01-14T21:38:16.397
> 
> 标签：python, selenium, web2py

我有这个功能来使用硒填充 webfroms

```
def fill_form(self, action, dict):
        import time
        print "Starting %s ... \n" % action

        # fill the form
        for key in dict.keys():
            try:
                inputElement = self._driver.find_element_by_name(key)
                inputElement.clear()
                inputElement.send_keys(dict[key])
                time.sleep(0.5)
            except:
                self.log()
                pass 
```

当然这个函数是类的一部分

使用此功能硒忽略任何下拉菜单，因此我必须填充每个下拉菜单，然后始终使用正常语句***但在循环之前***，例如：

```
inputElement = driver.find_element_by_name('dropdownMenu')
inputElement.send_keys('Test')
object.fill_form('action here', dict) 
```

我尝试使用没有该功能的循环，但它给出了相同的结果，问题是循环！

我在日志文件中也有很多异常

```
[2013-14-01 21:51:55] (<class 'selenium.common.exceptions.NoSuchElementException'>, NoSuchElementException(), <traceback object at 0x0212BFA8>)
[2013-14-01 21:52:04] (<class 'selenium.common.exceptions.NoSuchElementException'>, NoSuchElementException(), <traceback object at 0x021372B0>)
[2013-14-01 21:52:04] (<class 'selenium.common.exceptions.NoSuchElementException'>, NoSuchElementException(), <traceback object at 0x021431C0>)
[2013-14-01 21:52:51] (<class 'selenium.common.exceptions.WebDriverException'>, WebDriverException(), <traceback object at 0x0212FE90>) 
```

* * *

***全班***

```
# -*- coding: utf-8 -*-
"""
 *                                                                   *
 * PyWebBot Automated Web Tasks based on Selenium using dictionaries *
 *                                                                   *
Features:
    (1) - Login function
    (2) - Visit Link
    (3) - Make Screenshot
    (4) - Fill and sumbit forms

Filename:   ClassPyWebBot
Author:     Isaak Wahb (Wahb Ben Ishak)
Contact:    ben.ishak@tum.de

Date:       2012-08-15
Version:    1.0
Licence:    GPL v2

Usage:
    bot = PyWebBot([Selenium Webdriver] driver,
                   [dict(username,password)] user,
                   [String] _LogPath,
                   [String] _ScreenshotPath)

    bot.run([String] action, 
            [dict] dict,
            [String] baseurl,
            [String] suburl)

"""

class PyWebBot():
    """
    PyWebBot Automated Web Tasks Class
    """

    def __init__(self,_driver, _user, _LogPath, _ScreenshotPath):
        object.__init__(self)
        self._driver = _driver
        self._user = _user
        self._LogPath = _LogPath
        self._ScreenshotPath = _ScreenshotPath
        pass

    def log(self):
        import time, sys, os
        path = os.path.join(self._LogPath)
        logfile = os.path.join(path,'error_log').replace(os.sep,'/')
        time_x = time.strftime("%Y-%d-%m %H:%M:%S", time.gmtime(time.time()))
        with open(logfile,'a') as log:
            return log.write("[%s] %s\n" % (time_x, str(sys.exc_info()).strip()))

    def screenshot(self, imgname):
        import os, time
        try:
            time.sleep(1)
            self._driver.get_screenshot_as_file(os.path.join(self._ScreenshotPath,imgname))
        except:
            self.log()
            pass

    def login(self):
        import time
        try:
            inputElement = self._driver.find_element_by_name('username')
            inputElement.send_keys(self._user['username'])
            inputElement = self._driver.find_element_by_name('password')
            inputElement.send_keys(self._user['password'])
            self.screenshot('user_login_%s__%s.png' % (self._user['username'], time.time()))
            inputElement.submit()
        except:
            self.log()
            pass

    def visit_link(self, baseurl, suburl):
        import time
        try:
            self._driver.get("%s/%s" %(baseurl, suburl))
            # Capture screen after visit
            self.screenshot('visted_link_%s_%s__%s.png' % (suburl.replace('/','_'), self._user['username'], time.time()))
        except:
            self.log()
            pass

    def fill_form(self, action, dict):
        import time
        print "Starting %s ... \n" % action

        # fill the form
        for key in dict.keys():
            try:
                inputElement = self._driver.find_element_by_name(key)
                inputElement.clear()
                inputElement.send_keys(dict[key])
                time.sleep(0.5)
            except:
                self.log()
                pass

        # capture screen before
        self.screenshot('%s_%s__%s.png' % (action, self._user['username'], time.time()))

        # submit the form
        try:
            inputElement.submit()
        except:
            pass

        # Capture screen after submit
        self.screenshot('%s_%s_submited__%s.png' % (action, self._user['username'], time.time()))

        print "%s done.\n" % action

    def run(self, action , dict, baseurl, suburl, login=True):
        try:
            # Visit link
            self.visit_link(baseurl, suburl)

            # need to login ?
            if login: self.login()

            # Fill form
            self.fill_form(action, dict)

            # Close driver
            print "Finished\n"
            self._driver.close()
            pass
        except:
            self.log()
            print "Error ... check error_log" 
```

# ios - 自动保存标签中的信息并在 iOS 中切换

> ID：14327198
> 
> 赞同：0
> 
> 时间：2013-01-14T21:38:24.890
> 
> 标签：ios, objective-c, cocoa-touch, save, load

我对开发 iDevice 应用程序比较陌生。在互联网上广泛搜索后，我最终得到了一个没有答案的问题。

我正在开发一个“note-app”，用户可以在其中在文本字段中输入信息，打开开关，然后有机会完全退出应用程序，重新打开，并且信息仍然存在。没有“保存”按钮。这可能吗？也许有一个“重置”按钮来丢弃所有信息。

我目前正在使用 Xcode 4.5。有没有聪明的xcoders可以给我提示？

所有帮助将不胜感激！

*编辑*

我使用了保存/加载功能，发生了一些奇怪的事情。发生的情况是，当我在每个文本字段（我有十二个）中输入内容时，点击保存，然后退出应用程序。当我重新打开应用程序并点击从文本字段 12 加载文本时，会在文本字段 1 中加载。所有其他文本都消失了。有人有线索吗？

这是代码，适合那些有时间的人。

**SecondViewController.h**

```
@interface SecondViewController : UIViewController <UITextFieldDelegate> {

    IBOutlet UITextField *myTextField;
    IBOutlet UITextField *myTextField2;
    IBOutlet UITextField *myTextField3;
    IBOutlet UITextField *myTextField4;
    IBOutlet UITextField *myTextField5;
    IBOutlet UITextField *myTextField6;
    IBOutlet UITextField *myTextField7;
    IBOutlet UITextField *myTextField8;
    IBOutlet UITextField *myTextField9;
    IBOutlet UITextField *myTextField10;
    IBOutlet UITextField *myTextField11;
    IBOutlet UITextField *myTextField12;

    IBOutlet UILabel *loaded; }

-(IBAction)save:(id)sender;
-(IBAction)load:(id)sender; 
```

**第二视图控制器.m**

```
@implementation SecondViewController

-(IBAction)save:(id)sender{

    //First Save String
    NSString *savestring =myTextField.text;
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:savestring forKey:@"saveString"];
    [defaults synchronize];

    //Second Save String
    NSString *savestring2 =myTextField2.text;
    NSUserDefaults *defaults2 = [NSUserDefaults standardUserDefaults];
    [defaults2 setObject:savestring2 forKey:@"saveString2"];
    [defaults2 synchronize];

    //Third Save String
    NSString *savestring3 =myTextField3.text;
    NSUserDefaults *defaults3 = [NSUserDefaults standardUserDefaults];
    [defaults3 setObject:savestring3 forKey:@"saveString3"];
    [defaults3 synchronize];

    //Fourth Save String
    NSString *savestring4 =myTextField4.text;
    NSUserDefaults *defaults4 = [NSUserDefaults standardUserDefaults];
    [defaults4 setObject:savestring4 forKey:@"saveString4"];
    [defaults4 synchronize];

    //Fifth Save String
    NSString *savestring5 =myTextField5.text;
    NSUserDefaults *defaults5 = [NSUserDefaults standardUserDefaults];
    [defaults5 setObject:savestring5 forKey:@"saveString5"];
    [defaults5 synchronize];

    //Sixth Save String
    NSString *savestring6 =myTextField6.text;
    NSUserDefaults *defaults6 = [NSUserDefaults standardUserDefaults];
    [defaults6 setObject:savestring6 forKey:@"saveString6"];
    [defaults6 synchronize];

    //Seventh Save String
    NSString *savestring7 =myTextField7.text;
    NSUserDefaults *defaults7 = [NSUserDefaults standardUserDefaults];
    [defaults7 setObject:savestring7 forKey:@"saveString7"];
    [defaults7 synchronize];

    //Eight Save String
    NSString *savestring8 =myTextField8.text;
    NSUserDefaults *defaults8 = [NSUserDefaults standardUserDefaults];
    [defaults8 setObject:savestring8 forKey:@"saveString8"];
    [defaults8 synchronize];

    //Ninth Save String
    NSString *savestring9 =myTextField9.text;
    NSUserDefaults *defaults9 = [NSUserDefaults standardUserDefaults];
    [defaults9 setObject:savestring9 forKey:@"saveString9"];
    [defaults9 synchronize];

    //Tenth Save String
    NSString *savestring10 =myTextField10.text;
    NSUserDefaults *defaults10 = [NSUserDefaults standardUserDefaults];
    [defaults10 setObject:savestring10 forKey:@"saveString10"];
    [defaults10 synchronize];

    //Eleventh Save String
    NSString *savestring11 =myTextField11.text;
    NSUserDefaults *defaults11 = [NSUserDefaults standardUserDefaults];
    [defaults11 setObject:savestring11 forKey:@"saveString11"];
    [defaults11 synchronize];

    //Twelvth Save String
    NSString *savestring12 =myTextField12.text;
    NSUserDefaults *defaults12 = [NSUserDefaults standardUserDefaults];
    [defaults12 setObject:savestring12 forKey:@"saveString12"];
    [defaults12 synchronize];

    loaded.text = @"Dine notater ble lagret!"; }
-(IBAction)load:(id)sender;{

    //First Load String
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *loadstring = [defaults objectForKey:@"saveString"];
    [myTextField setText:loadstring];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Second Load String
    NSUserDefaults *defaults2 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring2 = [defaults2 objectForKey:@"saveString2"];
    [myTextField setText:loadstring2];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Third Load String
    NSUserDefaults *defaults3 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring3 = [defaults3 objectForKey:@"saveString3"];
    [myTextField setText:loadstring3];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Forth Load String
    NSUserDefaults *defaults4 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring4 = [defaults4 objectForKey:@"saveString4"];
    [myTextField setText:loadstring4];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Fifth Load String
    NSUserDefaults *defaults5 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring5 = [defaults5 objectForKey:@"saveString5"];
    [myTextField setText:loadstring5];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Sixth Load String
    NSUserDefaults *defaults6 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring6 = [defaults6 objectForKey:@"saveString6"];
    [myTextField setText:loadstring6];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Seventh Load String
    NSUserDefaults *defaults7 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring7 = [defaults7 objectForKey:@"saveString7"];
    [myTextField setText:loadstring7];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Eight Load String
    NSUserDefaults *defaults8 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring8 = [defaults8 objectForKey:@"saveString8"];
    [myTextField setText:loadstring8];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Ninth Load String
    NSUserDefaults *defaults9 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring9 = [defaults9 objectForKey:@"saveString9"];
    [myTextField setText:loadstring9];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Tenth Load String
    NSUserDefaults *defaults10 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring10 = [defaults10 objectForKey:@"saveString10"];
    [myTextField setText:loadstring10];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Eleventh Load String
    NSUserDefaults *defaults11 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring11 = [defaults11 objectForKey:@"saveString11"];
    [myTextField setText:loadstring11];
    [loaded setText:@"Dine notater ble lastet inn!"];

    //Twelvth Load String
    NSUserDefaults *defaults12 = [NSUserDefaults standardUserDefaults];
    NSString *loadstring12 = [defaults12 objectForKey:@"saveString12"];
    [myTextField setText:loadstring12];
    [loaded setText:@"Dine notater ble lastet inn!"];

} 
```

对于那些*不是*挪威人的人！“Dine notater ble lastet inn！” 和“Dine notater ble lagret！” 表示保存和加载。

同样，如果有人有时间浏览这些，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:46:46.833

您需要一个实现[UITextFieldDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)协议的类并将其设置为文本字段的委托属性的值。在委托中，您要实现该`textFieldDidEndEditing:`方法，并在该方法中将文本字段的值写入磁盘。“磁盘”是指一些持久性存储，例如`.plist`文件或 SQLite 数据库，甚至只是一个文本文件。在您的应用程序委托的`-applicationDidFinishLaunching:withOptions:`方法中，您要检查此文件是否存在，如果存在，请阅读它以确定如何预填充文本字段。

这是一个非常简单的答案，但这就是它的要点，而无需为您编写整个功能。随着您获得更多知识，您可以在此基础上进行构建（例如，实现`textField:shouldChangeCharactersInRange:replacementString:`和使用计时器来保存用户的进度，即使他们没有退出文本字段等）。

# hash - 如何为 http 请求计算 Amazon 的 MD5 哈希

> ID：14327201
> 
> 赞同：2
> 
> 时间：2013-01-14T21:38:33.877
> 
> 标签：hash, coldfusion, amazon-web-services, coldfusion-9

有谁知道如何计算需要与 Amazon 的 SubmitFeed API 一起使用的 MD5 哈希？我正在使用 ColdFusion，每次我计算 MD5 哈希值时，它都与亚马逊计算的结果不匹配。

亚马逊响应此错误：

```
ContentMD5DoesNotMatch

the Content-MD5 HTTP header you passed for your feed (C7EF1CADB27497B46FCD6F69516F96E0) did not match the Content-MD5 we calculated for your feed (x+8crbJ0l7RvzW9pUW+W4A==) 
```

我正在使用 ColdFusion 用于散列的内置函数（示例`hash(myStr)`）。我缺少一个步骤吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-15T20:50:26.250

问题是 Feed 必须先于

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?> 
```

即使将其添加为声明也是不够的

```
var memoryStream = new MemoryStream();
XDocument doc = new XDocument(
new XDeclaration("1.0", "utf-8", "yes"),
new XElement("AmazonEnvelope",
... 
```

如果您使用的是 XmlWriter：

```
using (var xmlWriter = XmlWriter.Create(memoryStream))
{
    doc.WriteTo(xmlWriter);
} 
```

您必须将 XDocument 保存到文件，然后从文件中获取流。只有在这种情况下，XDocument 才保留声明（Save() 和 WriteTo() 方法的设计行为）：

```
 var memoryStream = new MemoryStream();
    doc.Save(memoryStream);

    var file = Path.GetTempFileName();
    using (var fileStream = File.OpenWrite(file))
    {
        var buffer = memoryStream.GetBuffer();
        fileStream.Write(buffer, 0, (int)memoryStream.Length);
    }

    return File.Open(file, FileMode.Open, FileAccess.Read); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T20:27:30.263

```
public any function EncryptSignature(required string argValue,required string publicKey) hint="I create my own signature that I will matching later." {
    local.filters=StructNew();
    local.filters["F:publicKey"]=arguments.publicKey;
    var jMsg=JavaCast("string",arguments.argValue).getBytes("iso-8859-1");
    var thisSecretKey = getDAO().getSecretKey(local.filters).apiSecretKey;
    var jKey=JavaCast("string",thisSecretKey).getBytes("iso-8859-1");
    var key=createObject("java","javax.crypto.spec.SecretKeySpec");
    var mac=createObject("java","javax.crypto.Mac");
    key=key.init(jKey,"HmacSHA1");
    mac=mac.getInstance(key.getAlgorithm());
    mac.init(key);
    mac.update(jMsg);
    return lCase(binaryEncode(mac.doFinal(),'Hex'));
    //return Encrypt(arguments.argValue,getapiUsersDAO().getSecretKey(arguments.publicKey),'HMAC-SHA1');
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-27T11:18:01.023

[这是在http://www.kba.suche-spezialwerkzeug.de/pdf/MWSDeveloperGuide.pdf](http://www.kba.suche-spezialwerkzeug.de/pdf/MWSDeveloperGuide.pdf)上找到的另一种 java 方式

```
public static String computeContentMD5HeaderValue(FileInputStream fis)
        throws IOException, NoSuchAlgorithmException {
    DigestInputStream dis = new DigestInputStream(fis,
            MessageDigest.getInstance("MD5"));
    byte[] buffer = new byte[8192];
    while (dis.read(buffer) > 0)
        ;
    String md5Content = new String(
            org.apache.commons.codec.binary.Base64.encodeBase64(dis.getMessageDigest().digest())
            );
    // Effectively resets the stream to be beginning of the file via a
    // FileChannel.
    fis.getChannel().position(0);
    return md5Content;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T21:55:20.953

我检查了[这个在线工具](http://tomeko.net/online_tools/hex_to_base64.php)，你只需要以 base64 编码发送那个 MD5。它目前只是十六进制编码。

恐怕我不知道 ColdFusion 的做法是什么，也许是这样： [SHA or MD5 Digests in ColdFusion](http://www.petefreitag.com/item/203.cfm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T22:47:36.823

这是我为使其正常工作所做的工作：

```
<cfset getMD5 = ToBase64(binaryDecode(hash(xmlRequest),'hex'))> 
```

并且砰它匹配亚马逊的 MD5 哈希。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T11:44:23.480

这将给出你想要的输出。

```
<cfset binaryValue = binaryDecode( 'C7EF1CADB27497B46FCD6F69516F96E0', "hex" )>
<cfset base64Value = binaryEncode( binaryValue, "base64" )>
<cfdump var="#base64Value#"> 
```

# python - 在 Python 中通过引用同一 dict 级别中的另一个键值来查找键值

> ID：14327206
> 
> 赞同：0
> 
> 时间：2013-01-14T21:38:52.703
> 
> 标签：python, dictionary, key

我对 Python 还很陌生，所以我什至很难想出合适的术语来描述我的问题。基本思想是我有一个具有以下结构的字典：

```
myDict = 
"SomeMetric":{
    "day":[
        {"date": "2013-01-01","value": 1234},
        {"date": "2013-01-02","value": 5678},
        etc... 
```

我想提取日期已知的“值”。所以我想要：

```
myDict["SomeMetric"]["day"]["value"] where myDict["SomeMetric"]["day"]["date"] = "2013-01-02" 
```

是否有一个很好的单行方法而不遍历整个字典，因为我的字典要大得多，而且我已经在遍历它，所以我宁愿不做嵌套的迭代项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:41:42.467

resque 的生成器表达式：

```
next(d['value']
    for d in myDict['SomeMetric']['day']
    if d['date'] == "2013-01-02") 
```

因此，遍历所有字典，并找到与您要查找的`day`匹配的第一个字典。`date`一旦找到匹配项，此循环就会停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:46:31.523

你能控制你的数据结构吗？它似乎以适合次优查找的方式构建。

我会这样构造它：

`data = { 'metrics': { '2013-01-02': 1234, '2013-01-01': 4321 } }`

然后您的查找很简单：

`data['metrics']['2013-01-02']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T21:48:16.060

你能改变结构吗？`day`如果可以的话，您可能会发现将列表更改为将日期作为键和值作为值的字典要容易得多，所以

```
myDict = {
"SomeMetric":{
    "day":{
        "2013-01-01": 1234,
        "2013-01-02": 5678,
        etc... 
```

然后你可以直接索引到它

```
myDict["SomeMetric"]["day"]["2013-01-02"] 
```

# java - Java条件编译同时支持1.4/1.6

> ID：14327207
> 
> 赞同：4
> 
> 时间：2013-01-14T21:38:56.613
> 
> 标签：java, ant, legacy, jdk1.4

我正在开发一个大型遗留代码库，目前只能使用 java 1.4 编译。我需要做的一件事是让它与 1.6（现在可能是 1.7）一起工作。

头部构建当前不使用 1.6 编译。这有很多原因 - 大多数都很容易修复，比如`enum`用作关键字，但我们正在努力与 Oracle/Sun 更新 JDBC（连接接口）以支持 java 1.4 中不可用的类型。这意味着，如果我对 1.6 进行更改，主要生产构建会中断为像`NClob`break 这样的类，因为它们不在 1.4 版本中；如果我不进行更改，我将无法使用 1.6 编译器进行编译。

是否有任何模式支持 Java 中的条件编译/构建？到目前为止，我提出的唯一计划是摆弄 ant 构建，以根据构建有条件地换入/换出类。这感觉非常可怕，因此向这里的社区询问想法。

同样，问题的边界是：

*   需要能够`HEAD`在 1.4 上继续编译（恐怕没有 1.6 与 1.4 兼容模式）
*   还需要一个单独的使用 1.6 编译的头部构建 - 假设这将需要一些时间（因为它是一个大型代码库），因此在我们准备头部构建时允许其他人继续工作并提供其他更改的第一个要点1.6 兼容性。
*   这是一棵巨大的代码树；这意味着我们的代码都不是库依赖，而且我们不能轻易做到这一点（记住：遗留代码库`:(`）
*   我们不允许分支（原因是我不会进入，除非我真的必须这样做）

提前谢谢了。

*   对于那些对我们为什么需要这样做感到好奇的人，我们的情况与此有些相似：[Mixing Java 1.4 and 1.6 bytecode in a class hierarchy](https://stackoverflow.com/questions/10224677/mixing-java-1-4-and-1-6-bytecode-in-a-class-hierarchy)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T21:44:30.337

这就是 makefiles/pom.xml/build.xml 被签入的原因。使用您的修订控制系统创建一个分支。在一个分支中，进行 1.6 兼容性所需的所有更改。在其他分支，不要。任何给定的分支都将安全地编译为 1.4 或安全地编译为 1.6，没有 frankenbranch 尝试同时执行这两种操作，这是一个坏主意（tm）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:49:05.680

使用相同的类和相同的方法创建一个 and ，但实现不同`port14.jar`。`port16.jar`并进行两个单独的构建。

这意味着双重工作，但您可以同时使用相同的代码基础。并且差异是相对的“次要”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T21:49:38.007

我使用 Maven，我将拥有定义两个版本共享的接口的模块。然后你有两个模块，一个带有 1.4 代码，一个带有 Java 6（或 7 或 8）版本。这样，您可以同时构建它们并在运行时选择适当的实现。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-14T21:51:03.490

有一个[先前的 SO answer](https://stackoverflow.com/questions/4526113/java-conditional-compilation-how-to-prevent-code-chunks-to-be-compiled/4526352#4526352)涵盖了这一点，本质上是使用 ant 的`replace`任务来制作 IFDEF 块的快速而肮脏的版本。这可能比换掉整个类文件更容易，并且可以更容易地完成 1.6（只需删除所有 1.4 IFDEF 块）

# wcf-data-services - Wcf 数据服务 5.2 IgnoreProperty 失败

> ID：14327209
> 
> 赞同：2
> 
> 时间：2013-01-14T21:39:01.673
> 
> 标签：wcf-data-services

我正在使用 WCF 数据服务 5.2 公开 EF5 CF 数据，在我的一个实体上，我有一个`enum`，我阅读了这个并`IgnoreProperties('')`在我的类上设置了属性。

但我仍然有一个例外：

> “类型 '' 上的属性 '' 是一个 'EnumType'。它不是一个处理的原始类型”（对不起翻译，我的工作站上的例外是法语）

我浏览了这篇文章：[Ignore properties attribute not working in WCF Data Services 5.0 RTM Release](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataservices/thread/ffeee9e2-b96c-4b16-8ab6-d48de066f5b7 "忽略属性属性在 WCF 数据服务 5.0 RTM 版本中不起作用")并删除了所有解决方案上对 System.Data.Services 4.0.0.0 的所有引用。为了确保我什至使用资源管理器在所有解决方案文件中进行了文本搜索

调试模块窗口显示我没有加载 System.Data.Services。

奇怪的是，使用融合日志我看到它`System.Data.Services.Client, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089`加载在我的应用程序的某个地方，我真的不知道在哪里。

我试图暂时`system.data.services.*`从 GAC 中删除所有内容，但仍然失败并出现相同的异常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T00:50:33.687

如果您阅读下面的 MSDN 论坛主题，它说 IgnoreProperties 属性仅支持 ReflectionProvider 而不是 EF 提供程序。

# c# - 我如何保证我的课程可以作为特定类型拆箱？

> ID：14327213
> 
> 赞同：1
> 
> 时间：2013-01-14T21:39:23.643
> 
> 标签：c#, wpf, ivalueconverter, unboxing

我创建了一个`IValueConverter`将 bool 转换为`System.Windows.Visibility`对象的方法（它与 相反`BooleanToVisibilityConverter`）。它工作正常，除非我尝试在`Observable<bool>`对象上使用它。 `Observable<T>`是我用隐式运算符定义的一个类，用于将其转换为 T。问题是，当将其拆箱为布尔值时，我得到一个`InvalidCastException`.

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    if ((bool)value) // InvalidCastException
    {
        return Visibility.Hidden;
    }
    else
    {
        return Visibility.Visible;
    }
} 
```

当`Observable`被装箱为`Object`. 例如：

```
Observable<bool> obs = new SimpleObservable<bool>(true);
object obj = obs;

// This conversion works just fine:
bool bval = (bool)(Observable<bool>)obj;

// This conversion throws an InvalidCastException:
bval = (bool)obj; 
```

有什么办法可以保证 my`Observable<bool>`可以作为布尔值拆箱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:47:02.360

> 有什么办法可以保证我的 Observable 可以作为布尔值拆箱？

不。这段代码让人想起`Nullable`，并且需要编译器的直接支持来完成任务。

问题是`implicit`在运行时不会创建真正的隐式转换。它纯粹是编译时语法糖。每当编译器注意到您试图将类型表达式`X`放入期望类型的变量中时，它会在编译时查找and`Y`的定义中的隐式转换运算符，如果找到，则放入适当的静态方法调用到位做转换。到运行时，您不知道任何隐式（或显式）转换运算符。剩下的就是语言中的少数几个，例如原始类型之间以及类型层次结构中的类型之间。`X``Y`

# emacs - ipython 控制台 emacs 中的上一项在控制台提示之前将文本向左移动

> ID：14327219
> 
> 赞同：0
> 
> 时间：2013-01-14T21:39:52.483
> 
> 标签：emacs, ipython, python-mode

我在 ipython 控制台中使用 python-mode 6.0.10。当我尝试调出以前的历史项目时，它会在控制台输入提示之前向左移动，例如

在 [51] 中：（点击 Mp 以获取上一个项目） plt.plot(u_class)In[51]：（在此之后点击 Mp 会产生“不是命令行”错误）。

我现在要做的是有效地杀死格式错误的先前项目文本并将其拉到 "In[51]:" 前面。之后，重复使用 Mp 即可按需要工作。

有没有办法来解决这个问题？这种行为发生在 OS X 和 Windows 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T00:02:13.297

好吧，似乎最新版本的 ipython (2927) 与 python-mode 6.0.1 结合使用。解决了这个问题。

# sockets - 带多线输入的gawk双向网络通信

> ID：14327221
> 
> 赞同：1
> 
> 时间：2013-01-14T21:39:59.690
> 
> 标签：sockets, networking, gawk

我正在尝试使 gawk 程序充当简单的服务器，绑定到网络套接字并回答查询。

到目前为止，我的脚本是这样的：

```
#!/usr/local/bin/gawk

BEGIN {
    s="nc -l 10.0.0.21 2345";
    while (s |& getline inp) {
        print inp;
        print "Response to " inp |& s;
    }
} 
```

你会注意到我使用的是`netcat`而不是 gawk 的内部网络吗？根据我对文档的阅读，理论上我应该能够设置`s="/inet/tcp/2345/0/0";`gawk 绑定到端口 2345 上的*每个*本地 IP 地址，但我认为如果我只想绑定到一个 IP（在多 IP 主机上），我需要使用像我所做的那样的东西。此外，当我测试`/inet/tcp/...`符号时，我无法让它工作。该脚本将运行，并等待输入，但它似乎没有绑定到套接字，所以它不会得到任何输入。

所以......随着netcat替代品的工作，我的问题是......**在客户端关闭连接后，我如何让服务器保持运行？**

使用上面的代码，我可以连接并发送多行来获得响应，但是一旦客户端断开连接，服务器也会退出。

我认为这是因为`nc`命令行关闭了输入流，从而结束了 while 循环，但在我看来，while 循环应该只是通过重新打开`s`变量作为协同进程来继续。

我该如何进行这项工作？如果我可以使用`/inet/tcp/...`符号，这不是问题吗？我应该将整个 gawk 脚本包装在一个 shell 脚本中，然后在退出时重新运行它吗？或者我应该将内部while循环包装在另一个while循环中吗？或者是其他东西？

我尝试用这个替换while循环的调用：

```
...
    while (1) {
        s |& getline inp;
        print inp;
... 
```

但它以完全相同的方式退出。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:18:39.780

使用[GNU`netcat`](http://netcat.sourceforge.net/)，您可以使用`-k`选项在客户端连接关闭后保持服务器运行。请参阅[手册](http://linux.die.net/man/1/nc)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T16:23:43.907

回答为什么您的`while`解决方案无法按照您在上述答案的评论中所问的那样工作，`command | getline...`在 awk 中执行外部命令（调用——即使进程死亡——）。

您必须检测执行何时完成（getline 什么都不读取）并执行`close(s)`. 只有在执行`close`,之后`s | getline`才会运行命令的新实例。

# android - 更改 XML 后 ADT 不会运行

> ID：14327227
> 
> 赞同：0
> 
> 时间：2013-01-14T21:40:16.043
> 
> 标签：android, eclipse, adt

这只是一个小问题，但它相当烦人。如果我对 Java 文件进行了更改，保存并尝试运行，ADT 会重建并按应有的方式加载项目。当我对 XML 进行更改、保存并尝试运行时，ADT 不执行任何操作。此时，在编辑 Java 文件、保存并再次运行之前，我无法运行该项目。

注意：应用程序正在运行，但使用的是旧版本。

这是设计缺陷，还是有办法改变这种行为？

# php - 由 PHP 生成的 Javascript 代码是不好的做法吗？

> ID：14327228
> 
> 赞同：1
> 
> 时间：2013-01-14T21:40:21.477
> 
> 标签：php, javascript, code-generation

我想知道这个问题，因为我正在考虑要么在单独的 js 文件中正常创建 javascript 代码，要么通过 PHP 生成它，有人可以告诉我如果它是通过 PHP 生成的是否是不好的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:41:56.183

它与生成 HTML 的练习一样糟糕，所以不 - 这样做很好。但是，如果您的 JavaScript 永远不会更改，那么一个单独的文件将是理想的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:45:33.700

虽然这不一定是不好的做法，但您应该不惜一切代价避免它，主要是以长期代码可维护性的名义。如果您不需要动态生成 JavaScript，那么您不应该这样做。

尽管如此，当它确实需要动态生成时，大多数时候您只是生成动态变量。

编写静态 javascript 文件然后动态生成带有变量的脚本标记将是一个明智的决定。

例子：

```
<script type="text/javascript">
   var message = "<?= $my_message ?>";
</script>

<script type="text/javascript" src="static-message.js" /> 
```

其中 static-message.js 包含：

```
 alert("Your message: " + message); 
```

这是有效的，因为在加载 static-message.js 文件之前设置了消息变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:46:47.003

如果我能帮上忙，我不会。除非没有其他办法处理。可维护性和可测试性浮现在脑海中。这是一个与语言无关的问题。您可能会在纯解释语言中侥幸逃脱，但如果您在编译/半编译语言中执行类似的操作，您可能会很痛苦。我会投票赞成尽量减少 to 的混合。如果您必须公开一个数据元素供 JS 处理，那么只需将其余的 JS 保存在一个单独的文件中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T21:46:04.077

我经常使用 PHP 动态生成 CSS 文件。这允许您创建一个可以在多个项目之间共享的 CSS 样式表，但也可以包含与项目特别相关的自定义样式。

这同样适用于其他资源。包括JavaScript、图片、PDF文档等等..等等..

使用 PHP 成功执行此操作的关键是应用正确的标头信息。包括浏览器应该如何缓存响应。您可能还希望将脚本的输出缓存到临时文件。使将来对相同信息的请求更快地加载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T21:48:34.710

能够这样做非常方便，但我不建议纯粹从代码维护和代码清晰度的角度这样做。此外，一些编辑器对于也具有服务器内容的 JS 代码也没有很好的智能感知。

# c++ - 在 C++ 驱动程序中结合 mongo::Query

> ID：14327234
> 
> 赞同：1
> 
> 时间：2013-01-14T21:41:03.460
> 
> 标签：c++, mongodb

我正在使用 MongoDb 的 c++ 驱动程序并尝试将 mongo::Query 类与 JSON 查询结合为字符串。

在我的示例中，我试图结合 q1、q2、q3。我可以将 q3 转换为 mongo::fromjson(q3); 在最终组合之前尝试捕获不需要的错误，但我不确定这是否是最好的方法。

到目前为止，我唯一的尝试是使用 BSON_ARRAY 来组合单独的部分，但这仍然不是我想要的方式（虽然可以理解）。

```
///The output im trying to achieve is:
// {a : 1,b : 2, c : 3}

const mongo::Query q1 = QUERY("a" << 1);
const mongo::Query q2 = QUERY("b" << 2);
const std::string q3 = "{c : 3}";

// Attempt 1\. I know it does not work.
mongo::Query qAll = BSON_ARRAY(q1.toString() << q2.toString());

std::cout << q1.toString() << std::endl;
// Outputs { a: 1 } as expected

std::cout << q2.toString() << std::endl;
// Outputs { b: 2 } as expected

std::cout << qAll.toString() << std::endl;
// Outputs { 0: "{ a: 1 }", 1: "{ b: 2 }" }, expected but wrong. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:00:25.483

您无法真正避免使用我看到的 BSONObjBuilder，但您可以通过更好地使用 BSONObjBuilder 为您提供的 API 让自己的生活更轻松：

```
const mongo::Query q1 = QUERY("a" << 1);
const mongo::Query q2 = QUERY("b" << 2);
const std::string q3 = "{c : 3}";

mongo::BSONObjBuilder builder;
builder.appendElements(q1.getFilter());
builder.appendElements(q2.getFilter());
builder.appendElements(mongo::fromjson(q3));
const mongo::Query qAll(builder.obj());

std::cout << qAll.toString() << std::endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:59:49.037

到目前为止，这是我迄今为止想出的最优雅的方式，有什么想法/建议吗？

```
mongo::Query combineQueries(const mongo::Query q1, const mongo::Query q2) {
    mongo::BSONObjBuilder obAll;
    mongo::BSONObjIterator ii = q1.getFilter().begin();
    while (ii.more()) {
        obAll.append(ii.next());
    }

    ii = q2.getFilter().begin();
    while (ii.more()) {
        obAll.append(ii.next());
    }

    return obAll.obj();
} 
```

# ios - 带有纹理贴图的 box2d 弹簧网格

> ID：14327237
> 
> 赞同：0
> 
> 时间：2013-01-14T21:41:13.183
> 
> 标签：ios, objective-c, opengl-es, box2d, game-physics

我有一个灯的图像，我想让底座有弹性。如果用户将手指放在底座上并向后拉，它会伸展到给定范围。当他们松开时，它会以一定的弹性弹回。

这个 box2d + springs + 纹理映射的 youtube 视频似乎非常接近我想要的：

[http://www.youtube.com/watch?v=3cT6ZM3KkqY](http://www.youtube.com/watch?v=3cT6ZM3KkqY)

我是 box2d ( iOS ) 的新手，想知道是否有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T02:28:22.723

您发布的视频使用软体动力学。

这个想法是你创建一个由点矩阵组成的柔体对象，如下所示：

```
0  0  0  0

0  0  0  0

0  0  0  0 
```

为了渲染图像，矩阵的每个点都是一个顶点。计算索引是一项微不足道的任务。

这是使用 Box2d 在 iOS 上进行软体动力学的一个很好的教程：[http ://www.uchidacoonga.com/2012/03/soft-body-physics-with-box2d-and-cocos2d-part-14/](http://www.uchidacoonga.com/2012/03/soft-body-physics-with-box2d-and-cocos2d-part-14/)

# php - 打印前 50 个数字，这些数字可以被 1 到 10 的每个数字整除

> ID：14327238
> 
> 赞同：0
> 
> 时间：2013-01-14T21:41:15.167
> 
> 标签：php, for-loop, nested-loops

要打印可以被 1 到 10 之间的每个数字整除的前 50 个数字，我已经这样做了，现在如何在内循环中执行除法测试任务？

```
for ($i = 1, $j = 1; $j <= 50; $i++) {
    if ($i % 1 == 0 && $i % 2 == 0 && $i % 3 == 0 && $i % 4 == 0 && $i % 5 == 0 && $i % 6 == 0 && $i % 7 == 0 && $i % 8 == 0 && $i % 9 == 0 && $i % 10 == 0) {
        echo "$i\n";
        $j++;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T21:52:22.260

```
for ($i = 1; $i <= 50; $i++)
{
        $j = $i * 2520;
        echo "$j\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T22:02:54.513

把问题翻转过来。与其搜索部门，不如将它们多出来：

```
$min = 5 * 7 * 8 * 9; // Min number is 5 * 7 * 8 * 9\. (1,2,3,4,6,10 are implied)  Every number that meets the condition is a multiple of this.
for ($i = 1; $i <= 50; $i++)
{
  echo $min * $i; 
  echo "\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:46:54.680

您可以*嵌套*循环并使用*模运算符*( `%`)。

```
for ($i = 1, $count = 0; $count < 50; $i++) {
    $good = true;
    for ($j = 2; $j <= 10; $j++) {
         if ($i % $j != 0) {
             $good = false;
             break;
         }
    }

    if ($good) {
        echo "$i\n";
        $count++;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T21:58:41.170

您只需要测试它们是否是,和的倍数`9`，如果是，则增加计数器。当到达时，主循环被打破。`8``7``5``j``j``50`

```
$div = array(9,8,7,5);
function isMultipleOf10($num){
    for($i=0;$i<4;$i++){
        if($num%$div[$i]!=0){
            return 0;
        }
    }
    return 1;
}
$i = 1;
$j = 0;
while($j<50){
    if(isMultipleOf10($i)){
        echo $i . "\n";
        $j++;
    }
    $i++;
} 
```

# .net - 无法访问数据库，无法在 .NET 中使用 SQLite 找到部分路径

> ID：14327240
> 
> 赞同：0
> 
> 时间：2013-01-14T21:41:24.547
> 
> 标签：.net, database, visual-studio, sqlite

我用visual studio制作了一个程序，在发布并安装在另一台机器上之后，每当它需要访问数据库时，它都会在原始项目文件夹中查找连接字符串的创建位置。"C:\Users\Cody\Dropbox\Visual Studio 11\Projects\OverPower\OverPower\opdata.sqlite" 此路径当然在另一台计算机上不存在，这就是为什么我在尝试访问数据库时收到错误消息，但我认为发布/部署后它会重定向到安装目录以找到此文件。我还尝试将文件设为资源并将数据库的连接字符串和文件位置更改为上述文件位置，但要通过资源文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:38:32.717

我最终找到了一篇很有意义的帖子，它甚至有一个示例程序可以运行并查看它是如何工作的。我更改了一些内容并将 settings.vb 和 ConnectionStringBuilder.vb 类复制到我的项目中。

这就是我的 ConnectionStringBuilder 类的样子......

```
Dim path = Application.StartupPath + "\op_card.sqlite"
' Let's build our connection string.
Dim sqlConnString As New System.Data.SqlClient.SqlConnectionStringBuilder() With {
  .DataSource = path
}
Return sqlConnString.ConnectionString 
```

对于 settings.vb 类，我只将在底部找到的字符串，在文本 Me(, 更改为我在 Settings.settings 或 My.Settings 文件中找到的属性名称。这是文章的链接帮助过我....

[如何在运行时更改默认连接字符串设置](http://thecodemonk.com/2008/02/18/tableadapter-connection-strings/)

# java - 返回方法，计算错误

> ID：14327241
> 
> 赞同：-2
> 
> 时间：2013-01-14T21:41:27.073
> 
> 标签：java

我写了以下程序：

```
 public double calcElectricityCO2(double avgBill,                                         double avgPrice)
    {
        return (avgBill/avgPrice)*1.37*12;

    } 
    public static void main(String[ ] args)  
    {
        double avgBill = 338.59;
        double avgPrice = 0.12;
        double emmision = calcElectricityCO2(avgBill,avgPrice);
        System.out.printf("Annual CO2 Emission from Electricity Usage: %1.2f %n",emmision);
    }     
} 
```

运行时它报告错误`double emmision = calcElectricityCO2(avgBill,avgPrice);`我在那里做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T21:42:56.703

你的`calcElectricityCO2`应该被宣布`static`。

```
 public *static* double calcElectricityCO2(double avgBill, double avgPrice){
    //implementation
 } 
```

# python - 如何从两个列表创建字典而不丢失重复值？

> ID：14327247
> 
> 赞同：4
> 
> 时间：2013-01-14T21:41:50.093
> 
> 标签：python, list, dictionary, set

我有两个清单：

```
pin_list = ['in0', 'in1', 'in2', 'y']
delvt_list = ['0.399', '0.1995', '0.1995', '0.399'] 
```

我使用代码： `temp = dict(zip(delvt_list,pin_list))`但我得到以下信息：

```
temp = {'0.1995': 'in2', '0.399': 'y'} 
```

我需要编写哪些 Python 代码才能获得：

```
temp =  {'0.1995': {'in2', 'in1'}, '0.399': {'y', 'in0'}} 
```

或者

```
temp =  {'0.1995': ['in2', 'in1'], '0.399': ['y', 'in0']} 
```

作为一个额外的问题，如果我想使用其中的值`temp`来搜索我正在阅读的行，使用集合或列表会更容易吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T21:43:42.427

使用[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
temp = defaultdict(set)

for delvt, pin in zip(delvt_list, pin_list):
    temp[delvt].add(pin) 
```

这将创建一个`defaultdict`默认值是一个集合，然后循环并添加每个键的值。

如果您想要一个列表，只需更改默认类型以及添加值以匹配`list`接口的方式：

```
temp = defaultdict(list)

for delvt, pin in zip(delvt_list, pin_list):
    temp[delvt].append(pin) 
```

当您想测试成员资格时，集合是一个更好的主意 ( `something in aset`)；这样的测试需要恒定的时间，而不是列表的线性时间（因此集合成员资格测试需要固定的时间量，与集合的大小无关，而对于列表，它需要更多的时间，与列表中的元素数量成正比） .

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T21:45:54.340

你可以使用`dict.setdefault()`：

```
In [20]: pin_list = ['in0', 'in1', 'in2', 'y']

In [21]: delvt_list = ['0.399', '0.1995', '0.1995', '0.399']

In [22]: dic={}

In [23]: for x,y in zip(pin_list,delvt_list):
    dic.setdefault(y,[]).append(x)
   ....:     

In [24]: dic
Out[24]: {'0.1995': ['in1', 'in2'], '0.399': ['in0', 'y']} 
```

或者如果你想要`set`基于输出：

```
In [29]: dic={}

In [30]: for x,y in zip(pin_list,delvt_list):
    dic.setdefault(y,set()).add(x)
   ....:     

In [31]: dic
Out[31]: {'0.1995': set(['in1', 'in2']), '0.399': set(['y', 'in0'])} 
```

`help()`上`dict.setdefault`：

```
D.setdefault(k[,d]) -> D.get(k,d), also set D[k]=d if k not in D 
```

# javascript - Jquery href click - 我怎样才能启动一个事件？

> ID：14327250
> 
> 赞同：18
> 
> 时间：2013-01-14T21:41:58.477
> 
> 标签：javascript, jquery, html

我有这个锚点，点击时我想弹出一些东西。此 href 位于具有其他 href 的页面内。

```
<a class="sign_new" href="#sign_up">Sign up</a> 
```

jQuery：

```
$(document).ready(function(){
   $('a[href = "sign_up"]').click(function(){
      alert('Sign new href executed.'); 
   }); 
}); 
```

上面的代码没有启动。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-14T21:44:03.527

这不是因为 href 值不是.`sign_up`它是`#sign_up`. 尝试如下，您需要添加“#”来表示 href 值的 id。

```
$('a[href="#sign_up"]').click(function(){
  alert('Sign new href executed.'); 
}); 
```

**演示：http:** [//jsfiddle.net/pnGbP/](http://jsfiddle.net/pnGbP/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-14T21:56:57.533

如果你拥有 HTML 代码，那么为这个 href 分配一个 id 可能是明智的。然后您的代码将如下所示：

```
<a id="sign_up" class="sign_new">Sign up</a> 
```

和 jQuery：

```
$(document).ready(function(){
    $('#sign_up').click(function(){
        alert('Sign new href executed.');
    });
}); 
```

如果您不拥有 HTML，那么您需要将 $('#sign_up') 更改为 $('a.sign_new')。如果您在锚点中有一个 href 并且不想处理它，您也可以触发 event.stopPropagation() （AFAIR return false 也可以工作）。

```
$(document).ready(function(){
    $('#sign_up').click(function(event){
        alert('Sign new href executed.');
        event.stopPropagation();
    });
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T21:44:23.487

尝试：

```
$(document).ready(function(){
   $('a .sign_new').click(function(){
      alert('Sign new href executed.'); 
   }); 
}); 
```

您混淆了`class`和`href`名称/选择器类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T21:44:33.993

您正在将事件绑定到具有带有 value 的*href*属性的`click`锚点。*`sign_new`*

 *使用 class`sign_new`绑定锚点或使用 href 值绑定锚点`#sign_up`。我更喜欢前者。*

# sql - 合并日期和时间后的差异

> ID：14327252
> 
> 赞同：-1
> 
> 时间：2013-01-14T21:42:05.163
> 
> 标签：sql, sql-server, sas

SAS 新手，感谢一些帮助/指导。

我在 SQL Server DB 中有这样的日期和时间拆分：`a1date` `a1time` `a2date` `a2time`。我想将`a1date`and`a1time`合并到 ONE 和`a2date`and`a2time`合并到 TWO 中，并且能够找到 ONE 和 TWO 之间的时间差异。问题是变量是 Char 数据类型，需要转换为数字数据类型，我很困惑如何进行差异，因为 SAS 将其转换为自己的日期格式，然后无法合并日期和时间，如下所示。以下是我迄今为止尝试过的三种不同的方法，但均未成功。我真的很感激任何帮助。

```
proc sql;
select 
input(substr(strip(AcDate),1,10),MMDDYY10.)as AcDate format mmddyy10\. ,
input(substr(strip(AcTime),1,10),Time10.)as AcTime format Time10\. ,
input(substr(strip(ConfDate),1,10),MMDDYY10.)as ConfDate format mmddyy10\. ,
input(substr(strip(ConfTime),1,10),Time10.)as ConfTime format Time10\. ,
AcDate + ' ' + AcTime as Acquired,
ConfDate + ' ' + ConfTime as Confirmed,
DATEDIFF(n, Acquired, Confirmed) AS DifferenceInMinutes,
from TableName; 
```

我也尝试过使用不成功：（起初“as”出现错误）

```
proc sql;
select
cast(AcDate + ' ' + AcTime AS datetime) AS ‘Acquired’,
cast(ConfDate + ' ' + ComfTime AS datetime) AS ‘Confirmed’,
DATEDIFF(n, Acquired, Confirmed) AS DifferenceInMinutes
FROM tablename 
```

我玩过这个，但不明白如何让它工作。

```
DATA _null_;
INFORMAT AcDate ConfDate DATE10.
       AcTime ConfTime TIME10.
       unit $10.;
FORMAT dt1 dt2 DATETIME.;
INPUT AcTime time1 date2 time2 unit;
dt1=DHMS(date1,0,0,time1);
dt2=DHMS(date2,0,0,time2);
difference=INTCK(unit,dt1,dt2);
PUT unit= dt1= dt2= difference=;
DATALINES; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:10:04.760

SAS 不使用“强制转换”，除非您与 SQL Server 建立直通连接。SAS 专门使用 put 和 input 进行类型转换。此外，SAS 使用 || 对于字符串连接，而不是 +（或 CAT* 函数 - CATS [strip+cat] 和 CATX [strip+cat with deliminter] 最常见）。此外，您不要将列名括在单引号中 - 大多数情况下，SAS 平等对待单引号和双引号（主要例外是宏和宏变量仅解析为“”而不是 ''）。

```
proc sql;
select
cast(AcDate + ' ' + AcTime AS datetime) AS ‘Acquired’,
cast(ConfDate + ' ' + ComfTime AS datetime) AS ‘Confirmed’,
DATEDIFF(n, Acquired, Confirmed) AS DifferenceInMinutes
FROM tablename 
```

应该成为

```
proc sql;
select
input(catx(' ',AcDate,AcTime),MDYAMPM.) AS Acquired,
input(catx(' ',ConfDate,ComfTime),MDYAMPM.) AS Confirmed,
(calculated Acquired - calculated Confirmed)/60 AS DifferenceInMinutes
FROM tablename 
```

SAS DATETIME 存储为自 1960 年 1 月 1 日以来的秒数，因此执行 DATEDIF 的最简单方法是简单地减去两个日期时间变量并除以 60 分钟（如果您想使用 FLOOR 或 CEIL，这取决于您或 ROUND 或诸如此类的东西，使其成为整数分钟数）。此外，CALCULATED 关键字向 SAS 指示 SQL 术语源自当前查询，而不是源自原始数据集。

输入可能与您在此处的实际工作方式不同。DATETIME 通常在 SAS 中以 17JAN2015:15:13:12 格式输入；不过，还有很多其他选择。我根据您上面的代码猜测 MDYAMPM；以 mm-dd-yy hh:mm:ss.ss AM|PM 格式输入（[http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a003172027 .htm](http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a003172027.htm) ) 如果这与您的日期/时间格式不同，您有多种选择。

一种是按照您在第一个 sql 步骤中所做的操作，并将它们分别输入为日期和时间。然后使用 DHMS 将它们组合起来。您的数据步骤实际上可能是正确的 - 但是您必须显示实际数据。如果您实际上要从 SQL Server 表中获取数据，则不要使用 DATALINES（用于直接从代码输入）甚至 INPUT 语句（用于此目的，或用于从文本文件输入）；你应该只使用 INPUT 功能。数据*null*也不会存储到表中（只是临时的），所以如果这是你的目的，那就去吧；通常我想要一张桌子。

这是一个测试数据集。sqltable 代表您的 sql 表，无论它有多大 - 正确命名它 (libname.tablename)。

```
data sqltable;
input acdate $ actime $ CONFDATE $ CONFTIME $;
datalines;
09-02-2012 14:21:05 09-02-2012 16:21:05
;;;;
run;
DATA mydata;
SET sqltable;
UNIT="MINUTE";
format dt1 dt2 DATETIME.;
dt1=DHMS(input(acdate,MMDDYY10.),0,0,input(actime,TIME.));
dt2=DHMS(input(confdate,MMDDYY10.),0,0,input(conftime,TIME.));
difference=INTCK(unit,dt1,dt2); *just fill in Unit with your choice of unit, or do the math directly on the variables as shown earlier;
PUT unit= dt1= dt2= difference=;
run; 
```

# php - 使用 php 从 pdf 中获取图像

> ID：14327262
> 
> 赞同：4
> 
> 时间：2013-01-14T21:42:38.473
> 
> 标签：php, image, pdf

> **可能重复：**
> [如何从 PDF 文件中提取图像？](https://stackoverflow.com/questions/430707/how-can-i-extract-images-from-a-pdf-file)
> [用php读取pdf文件](https://stackoverflow.com/questions/1004478/read-pdf-files-with-php)

有谁知道如何使用 php 从 PDF 文件中获取图像？

而且我还需要获取这些图像在 PDF 文件页面上的位置……比如某个角的 x 和 y 坐标以及图像的大小。

也许可以将 PDF 页面解析为图层或类似的东西......

感谢所有愿意提供帮助的人！

# javascript - 使用 JQuery 或 Javascript 在相对 div 中冻结垂直滚动条

> ID：14327264
> 
> 赞同：0
> 
> 时间：2013-01-14T21:42:48.910
> 
> 标签：javascript, jquery, html, scrollbar, chap-links-library

我正在寻找一种方法来冻结相对 div 的垂直滚动条。我似乎找不到类似的线程。在这种情况下，固定位置不起作用，因为 div 实际上是来自 Chap-links-library 的图表，用作固定轴。我不必担心鼠标滚轮，因为我已重新分配它来控制范围更改。但是，对于间距和兼容性问题，我必须显示一个滚动条（否则元素无法正确对齐）。因此，我无法隐藏。有没有防止用户滚动这个 div 的方法？我不必处理水平滚动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:50:26.617

如果它只是您不想滚动的分隔线中的内容，您可以使用：

```
$('div#id').scroll(function() {
    $(this).scrollTop(fixedTopValue);
    $(this).scrollLeft(fixedLeftValue);
}) 
```

如果是整个页面，只需将 'div#id' 替换为*window*。

# facebook - 按位置搜索 facebook 公开活动

> ID：14327266
> 
> 赞同：0
> 
> 时间：2013-01-14T21:42:51.253
> 
> 标签：facebook, json, facebook-graph-api, facebook-fql, token

可以 按**位置仅搜索****公共事件**吗？我正在尝试这个：

 **```
https://developers.facebook.com/tools/explorer/?method=GET&path=search%3Fq%3D%2A%26type%3Devent%26center%3D43.7228386%2C10.4016888%26distance%3D1000 
```

但我只发现了我的私人活动（结果并不靠近选定的地理中心）..为什么？..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T23:00:08.200

> 地点：您可以通过添加中心参数（带有纬度和经度）和可选的距离参数来将搜索范围缩小到特定位置和距离。 [https://developers.facebook.com/docs/reference/api/search/](https://developers.facebook.com/docs/reference/api/search/)

位置参数`center`和`distance`仅在搜索地点时有用，而不是事件。

如果您想获取公开事件，请不要搜索`*`，否则 Facebook 无法返回其事件的完整列表！您应该指定一个关键字。

您的查询变为：`/search?q=KEYWORD&type=event`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T23:00:24.897

[搜索文档](https://developers.facebook.com/docs/reference/api/search/)列出了所有可用的搜索选项 - 在一组坐标半径内的某个位置搜索事件不是可用选项之一**

# kohana - Kohana：如何设置第三方应用程序

> ID：14327269
> 
> 赞同：0
> 
> 时间：2013-01-14T21:42:57.717
> 
> 标签：kohana, kohana-3

我有一个小应用程序，它有自己的类和视图文件，我想添加到我的 kohana 网站。我将把这个应用程序称为我的 sub_app。因此，如果我将 sub_app 放在 kohana 应用程序根目录中，我可以在 www.kohanaapp.com/sub_app/ 访问此应用程序。

目前，在我的 sub_app 中，我无法使用 Kohana 应用程序中定义的任何类。有没有办法可以为我的 sub_app 加载 index.php 中的所有类。

此外，在 codeigniter 中，有一个third_party packages 可以满足我的要求。kohana中是否有类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:20:32.573

由于[Kohana 级联文件系统](http://kohanaframework.org/3.3/guide/kohana/files)原则，只需将您的`sub_app`类文件放入`APPPATH . 'classes'`( ) 文件夹并修改它们的名称。`/application/classes/`

例如：

```
/application/
 classes/
  sub/
   class.php 
```

`class.php`文件将是：

```
class Sub_Class {} 
```

然后你可以使用你的`sub_app`类`$class = new Sub_Class;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T16:51:46.303

Kohana 用于`Kohana::find_file()`加载外部库代码。这是一个例子：

[http://kohanaframework.org/3.2/guide/kohana/autoloading#include-zends-autoloader-in-your-bootstrap](http://kohanaframework.org/3.2/guide/kohana/autoloading#include-zends-autoloader-in-your-bootstrap)

通常，您会将第三方库放在 中`application/vendor`，在您的控制器方法中像这样访问它们：

```
// Load the library's feed.class.php file
require Kohana::find_file('vendor', 'rss-php/feed.class'); 
```

但是，我从未尝试从应用程序根目录上方的目录加载代码，而且我不确定 Kohana 是否会找到您的类文件。

您可以尝试使用 加载它们`Kohana::find_file()`，如下所示：

```
// Load classes/autoload.php from two directories above application
require Kohana::find_file('../../classes', 'autoload'); 
```

或者简单地要求基于`DOCROOT`，这是您的基础`sub_app`：

```
require DOCROOT
      . '..' . DIRECTORY_SEPARATOR
      . 'classes' . DIRECTORY_SEPARATOR
      . 'autoload.php'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T07:13:03.103

您可以定义自动加载器`sub_app`并在以下位置注册`bootstrap.php`：

```
// find autoloader function/class in vendor/sub_app/ directory
require_once Kohana::find_file('vendor', 'sub_app/autoloader');

// register autoloader::load() function as autoloader
spl_autoload_register(array('autoloader', 'load')); 
```

请注意，您必须手动将您的类包含在该自动加载器中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T14:49:37.450

听起来你只需要在目录结构中添加另一个“应用程序”文件夹。考虑以下建议：

kohana
--application // 用于 www.kohanaapp.com
--bootstrap.php
--.htaccess

--subapp // 对于 www.kohanaapp.com/sub_app/
---bootstrap.php ->
在这里编辑

```
 Kohana::init(array(
    'base_url'   => '/kohanaapp/sub_app',
    'index_file' => FALSE
 ));

---.htaccess
      here edit:
      RewriteRule .* /kohanaapp/subapp/index.php/$0 [PT] 
```

# jakarta-ee - 将 EAR、WAR 文件部署到任何托管服务器所需的开源“部署工具”

> ID：14327273
> 
> 赞同：3
> 
> 时间：2013-01-14T21:43:11.937
> 
> 标签：jakarta-ee, deployment, open-source, webserver, web-deployment

一种部署工具，用于将本地“构建盒”中的 **EAR、WAR文件部署到任何托管服务器（即测试或登台服务器）。**

目前 .sh 脚本在每台服务器上运行以进行部署。

**环境：** Linux、Java EE 应用程序（准确地说是 ATG 框架）、使用的**Jboss**服务器。

部署工具要求：

1) 软件必须是开源的。

2) 只需要一个部署工具；没有像 Jenkins 或 Hudson 应用程序那样附加的构建工具和延续集成工具。

3) 软件必须是轻量级的 GUI 应用程序（即使是插件也适用于 eclipse 或任何 SVN）。

4) 软件还必须具有查看 SVN 的能力。

5）最重要的是它必须是容错的；即如果部署出错，必须有备份副本和版本控制。

我知道以上所有问题都有点大问题。我不确定“巡航控制”应用程序是否会完成上述所有工作，我们将不胜感激有关它的建议。

我已经研究找到链接[http://deployment.tigris.org/](http://deployment.tigris.org/)；但他们似乎都没有满足上述所有要求。在 GNU 开源软件中找不到这样的。他们中的任何人的任何建议都将不胜感激。有人提出了一些叫做“Jeera”、“redhat”的东西，但不确定它们。

**最后一句话总结，就是需要一个“开源部署（仅限）工具”来满足上述环境。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:26:26.243

[Kwatee](http://www.kwatee.net)是一个轻量级的部署应用程序，可免费用于商业用途（但不是开源的）

如果你对 GUI 的要求比较灵活，可以看看 Ning 的[Galaxy](https://github.com/ning/galaxy)，它是开源免费的（但基于 CLI，也依赖于 Ruby）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T07:16:42.320

[http://xebialabs.com/download/xl-deploy/](http://xebialabs.com/download/xl-deploy/)是一个自动化解决方案，在所有目标平台、windows 和 unix 目标上无代理。它支持几乎所有流行的 Java EE 容器，如 jboss、tomcat、webspshere。社区版对非商业用户免费。

Cargo 是另一个支持自动部署的开源工具。

# java - Java组合框如何添加图标？

> ID：14327275
> 
> 赞同：7
> 
> 时间：2013-01-14T21:43:14.413
> 
> 标签：java, combobox, javafx-2, fxml

我是 FXML 新手，我正在构建一个应用程序。现在我遇到了一个我无法解决的问题。

我在 FXML 中定义了一个组合框，并在控制器类中创建了必要的关联。但我想将图像添加到这个组合框。

经过数小时的谷歌搜索后，我仍然无法解决这个问题。

你们能帮我举一个“简单”的例子来说明如何达到我的目标吗？

非常感谢！

我当前的代码是：（确保有更简单的方法可以做到这一点，但它有效！）

```
ImageView img1 = new ImageView("Layout/nl.png");
ImageView img2 = new ImageView("Layout/en.png");

AnimalBoxLanguage.getItems().addAll(img1, img2);

AnimalBoxLanguage.setCellFactory(new Callback<ListView<ImageView>, ListCell<ImageView>>() {
    @Override 
    public ListCell<ImageView> call(ListView<ImageView> p) {
        return new ListCell<ImageView>() {
            private final ImageView rectangle;
            { 
                setContentDisplay(ContentDisplay.GRAPHIC_ONLY); 
                rectangle = new ImageView();
            }

            @Override 
            protected void updateItem(ImageView item, boolean empty) {
                super.updateItem(item, empty);

                if (item == null || empty) {
                    setGraphic(null);
                } else {
                    rectangle.setImage(item.getImage());
                    setGraphic(rectangle);
                }
            }
        };
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T23:21:37.423

以他评论中链接的[示例](https://gist.github.com/3062859)erhun 为起点，在 fxml 中定义 ComboBox 如下所示，以便组合框项目包括带有图形的标签（这些是您的“图标”）。

```
<ComboBox fx:id="fruitCombo" layoutX="15.0" layoutY="33.0" prefWidth="90.0" promptText="choose">
  <items>
    <FXCollections fx:factory="observableArrayList">
      <Label text="Apple">
        <graphic> 
          <StackPane prefWidth="50">
            <ImageView fitHeight="32" preserveRatio="true">
              <image>
                <Image url="http://uhallnyu.files.wordpress.com/2011/11/green-apple.jpg" preserveRatio="false" smooth="false" />
              </image>
            </ImageView>
          </StackPane>  
        </graphic>  
      </Label>  
      <Label text="Pear">
        <graphic> 
          <StackPane prefWidth="50">
            <ImageView fitHeight="32" preserveRatio="true">
              <image>
                <Image url="http://smoothiejuicerecipes.com/pear.jpg" preserveRatio="false" smooth="false" />
              </image>
            </ImageView>
          </StackPane>  
        </graphic>  
      </Label>  
      <Label text="Orange">
        <graphic> 
          <StackPane prefWidth="50">
            <ImageView fitHeight="32" preserveRatio="true">
              <image>
                <Image url="http://i.i.com.com/cnwk.1d/i/tim/2011/03/10/orange_iStock_000001331357X_540x405.jpg" preserveRatio="false" smooth="false" />
              </image>
            </ImageView>
          </StackPane>  
        </graphic>  
      </Label>  
    </FXCollections>
  </items>
</ComboBox> 
```

在 FruitComboController 的初始化方法中，为按钮设置一个自定义单元格（下面的简单单元格只获取所选项目的文本，但如果您喜欢也可以包含图形）：

```
ListCell<Label> buttonCell = new ListCell<Label>() {
  @Override protected void updateItem(Label item, boolean isEmpty) {
    super.updateItem(item, isEmpty);
    setText(item == null ? "" : item.getText());        
  }
};
fruitCombo.setButtonCell(buttonCell); 
```

以上只是执行此操作的一种方法。或者（也许最好）你可以为你定义一个细胞工厂，`ComboBox`正如塞巴斯蒂安在他的回答中指出的那样。

修改样本的输出：

![图标组合样本](../Images/d130a070ad79b27873380d8be74e69bb.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T08:47:44.767

您需要自定义 ComboBox 的[CellFactory](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ComboBox.html#cellFactoryProperty)以保持框中项目的可视化。请参阅[此链接](http://www.java2s.com/Code/Java/JavaFX/customcellfactory.htm)以获取简短示例。

要使图像在控制区域中可见（选择一项后），您必须将组合框的按钮单元格设置为您的单元格之一。JavaFX 将相应地自动更新它们。基本上，当您使用自定义 cellfactory 设置组合框时，您需要做的是：

```
mycombobox.setButtonCell(myCellFactory.call(null)); 
```

另请查看有关此的[文档](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ComboBox.html#buttonCellProperty)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-13T09:21:28.640

```
ObservableList options = FXCollections.observableArrayList();
//
Image img = new Image("/images/auto32.png");
ImageView imgView = new ImageView();
imgView.setImage(img);
//
Label lbl = new Label("test");
lbl.setGraphic(imgView);
// 
options.add(lbl);
options.add(lbl);
options.add(lbl);
//
myCombo.setItems(options); 
```

# css - 偏离中心的可变宽度表

> ID：14327277
> 
> 赞同：3
> 
> 时间：2013-01-14T21:43:34.093
> 
> 标签：css, html-table, center

我将一个可变宽度的表格与 css 居中为：

```
#article {width=1000px}
table.center {margin: 0 auto}

<div id="article">
<table class="center">
.....
</table>
</div> 
```

但在这种情况下，我喜欢将**这张**桌子偏左一点。
请注意，此表的宽度是可变的。
表格的中心必须在`40%`它所在的 div 之外。
假设表格下方有一个 width `200px`。
通常在居中时，它`400px`的左侧和右侧都有空间。
但现在我喜欢在桌子`300px`的左边和`500px`右边。

```
#article {width=1000px}
table.offcenter20left { ??? }

<div id="article">
<table class="offcenter20left">
....
</table>
</div> 
```

我需要什么 CSS 代码来使这个表偏离中心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:05:41.040

通过使用包装器，您可以使用负边距。这支持百分比值，并允许它是动态的。

## HTML

```
<div class="article">
  <div class="wrapper">
    <table class="offcenter20left">
      <tr>
        <td>.....</td>
      </tr>
    </table>
  </div>
</div> 
```

## CSS

```
table.offcenter20left {
  margin:0 auto;
}

.wrapper {
  margin-left:-20%; /* adjust as desired */
} 
```

来源： http: [//jsfiddle.net/8Gas6/3](http://jsfiddle.net/8Gas6/3)
演示：http: [//jsfiddle.net/8Gas6/3/show](http://jsfiddle.net/8Gas6/3/show)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:02:22.397

`table`用 a包裹`div`并使用相对定位：

```
<div class="center-outer">
  <table class="center-inner">
    <!-- ... -->
  </table>
</div> 
```

随附的 CSS：

```
.center-outer {
  position: relative;
  float: left;
  left: 40%;
}

.center-inner {
  position: relative;
  float: left;
  left: -50%;
} 
```

`.center-inner`将 向左移动`table`其`50%`自身宽度，使其沿其左边缘通常所在的位置居中。`.center-outer`然后将 the`div`和 the推到' 父级宽度`table`的右侧，有效地将表格居中在.`40%``div``40%`

如果您打算不仅仅是`table`在同一个父级中居中，那么使用 2 个包装器会更简单；那么没有必要附加`.center-inner`到每个孩子：

```
<div class="center-outer">
  <div class="center-inner">
    <table>
      <!-- ... -->
    </table>
    <p>
      <!-- ... -->
    </p>
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T22:15:08.400

您`CSS3 Calc`可以动态执行数学运算：

```
margin-left: calc(40% - 50px); 
```

（假设您的示例中有一半像素，使其也可以在具有较小屏幕的 jsFiddle 上工作：总像素为 500，宽度为 100 像素的表格）

（ calc() 中的 50px 是表格大小的一半）

[http://jsfiddle.net/u4Haa/](http://jsfiddle.net/u4Haa/)

# ruby-on-rails - 通过 Rails 保存图像/八位字节流，base64 编码为图像文件

> ID：14327279
> 
> 赞同：3
> 
> 时间：2013-01-14T21:43:38.803
> 
> 标签：ruby-on-rails, image-processing, canvg

我正在使用[canvg](http://code.google.com/p/canvg/)库将谷歌图表保存为图像。可以在此[页面](http://www.battlehorse.net/page/topics/charts/save_google_charts_as_image.html)上找到有关此过程的更多信息。

好的，所以 JS 框架为我提供了图像的编码数据，我使用触发下载的表单和隐藏字段发布该数据。

代码

```
<form accept-charset="UTF-8" action="<%= rest_png_path %>" id="png_hidden" method="post">
  <input id="image_data_input" name="image_data" type="hidden" value="" />
  <input id="graph_container_div" type="hidden" value="gauge_div" />
  <input class="btn " name="commit" type="submit" value="Grafik" />
</form> 
```

JS代码

```
 $('#png_hidden').submit(function() {
    container_div = $('#graph_container_div').val();
    // saveAsImg method - returns image data base64 encoded.
    // in background there is this part of code
    // return imgData.replace("image/png", "image/octet-stream");
    // I tried both version, with replace and without it
    data = saveAsImg(document.getElementById(container_div));
    $('#image_data_input').val(data);
    return true;
  }); 
```

最后是响应 POST 请求并触发下载的控制器代码。

```
 def deliver_png
    #send_data ActiveSupport::Base64.decode64(params['image_data']),
    send_data params['image_data'],
      #:type =>'image/png',
      :type =>'image/png',
      :disposition => "attachment; filename=graf.png"
  end 
```

如您所见，我使用了几个标题选项。问题是下载的图像已损坏。我通过 HexEditor 打开它，我可以看到它没有 PNG 标头，但我对此的了解是不存在的。希望你能帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T10:15:14.193

假设页面正在向服务器提交正确的数据，控制器代码应该如下：

```
params['image_data'] =~ /^data:(\w+\/\w+);base64,(.*)/
mime_type= $1
img_base_64= $2

send_data ActiveSupport::Base64.decode64(img_base_64),
      :type =>'image/png',
      :disposition => "attachment; filename=graf.png" 
```

您需要基本上丢弃包含 mime 类型和字符串“base64”的初始部分。

值得检查一下在 Javascript 中获取 base64 数据时是否没有其他错误。请通过将隐藏字段更改为文本字段来检查它是否正在获取正确的数据。

顺便说一句，我还将[http://www.battlehorse.net/page/topics/charts/save_google_charts_as_image.html](http://www.battlehorse.net/page/topics/charts/save_google_charts_as_image.html)转换为使用 jQuery，这样更易​​于维护。请参阅[http://jsfiddle.net/kdeepak/3KTbJ/7/](http://jsfiddle.net/kdeepak/3KTbJ/7/)如果您对 jQuery 感到满意，请使用此版本。

# php - 设置一个活跃的类 javascript 无法正常工作

> ID：14327281
> 
> 赞同：1
> 
> 时间：2013-01-14T21:43:44.843
> 
> 标签：php, javascript

我在让 javascript 在我的“li”菜单项上设置活动类时遇到了一点问题。

菜单是用 php 构建的，如下所示。

```
<nav class="categoriesMenu">
<ul class="nav nav-tabs categories">
<?php
        $i=0;
            foreach($categories as $k=>$v){
            $space = array(" ");
            $normalizedCategory = str_replace($space, "", $k);
            echo "<li id='id$normalizedCategory'>";
                 if($i==0){
                    echo "<a href='#'>$k</a>";
                 }else{
                    echo "<a href='#'>$k</a>";
                 }
                 $i++;
              echo "</li>";
           } ?>
</ul>
</nav> 
```

我有以下javascript根据点击设置活动类，但我不能让它只在“a”标签上设置“li”上的活动类

```
$(document).ready(function(){

var selectCategory=function(id){
        var ref=id.replace(' ','');
        var classSelector=ref.replace(' ','');
        $("nav > ul.categories > li").removeClass("active");
        $("#"+ref+" > li").addClass("active");
        $('nav > ul.subCategories > li').hide();
        $('nav > ul.subCategories > li.'+classSelector).show();
}

$('nav > ul.subCategories > li').click(function(){
               if(!$(this).children('li').hasClass("active")){
                 window[$(this).attr('title')]();
               }
               $('nav > ul.subCategories > li').removeClass("active");
               $(this).children().addClass("active")
           });

$('nav > ul.categories > li').click(function(){
            var reference=$(this).attr('id');
            selectCategory(reference);
})

var firstCat=$('nav > ul.subCategories > li:first').attr('class');
selectCategory(firstCat);

}) 
```

菜单以这种格式呈现

```
 <div class="navigation">
 <nav class="categoriesMenu">
 <ul class="nav nav-tabs categories">
 <li id='idManagement'>
      <a href='#'>Management</a>
 </li>
 <li id='idReports'>
      <a href='#'>Reports</a>
 </li>
 <li id='idUsers'>
      <a href='#'>Users</a>
 </li>
 <li id='idAdministration'>
     <a href='#'>Administration</a>
 </li>
 </ul>
</nav>

 <nav class="subCategoriesMenu">
 <ul class="nav nav-pills subCategories">
 <li class='idManagement' id='idManagementRequests' title='RequestsInterface'>
      <a>Requests</a>
 </li>
 <li class='idManagement' id='idManagementTeamActivity' title='ActivityInterface'>
 <a>Team Activity</a>
 </li>
 </ul>
 </nav> 
```

任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:51:52.760

我想你想要：

```
var selectCategory=function(id){
    var ref=id.replace(' ','');
    var classSelector=ref.replace(' ','');
    $("nav > ul.categories > li").removeClass("active");
    $("#"+ref).addClass("active");
    $('nav > ul.subCategories > li').hide();
    $('nav > ul.subCategories > li.'+classSelector).show();
}
$('ul.subCategories li').click(function(){
    /*if(!$(this).hasClass("active")){
        window[$(this).attr('title')]();
    }*/
    $('nav > ul.subCategories > li').removeClass("active");
    $(this).addClass("active");
});

$('nav > ul.categories > li').click(function(
    var reference=$(this).attr('id');
    selectCategory(reference);
});

var firstCat=$('nav > ul.subCategories > li:first').attr('class');
selectCategory(firstCat); 
```

这个小提琴做你想做的吗？[http://jsfiddle.net/nzjhK/32](http://jsfiddle.net/nzjhK/32)

# ios - 嵌入式 UITableViewController 相对于 UITableView 的优缺点是什么？

> ID：14327283
> 
> 赞同：0
> 
> 时间：2013-01-14T21:43:48.593
> 
> 标签：ios, uitableview, container-view

我正在创建我的第一个 iPad 应用程序，并且我有一个 UIView，它有一个表格以及其他视图。我注意到我可以选择创建一个“容器视图”，然后我可以在其中嵌入一个 UITableViewContoller。

嵌入 UITableViewContoller 而不是仅仅使用 UITableView 有哪些优缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:23:45.560

UITableViewController 添加了一些单独使用 UITableView 所没有的微妙（但有用）的功能。

一些例子（我不知道这是否是一个完整的列表，可能还有更多）：

*   在 viewWillAppear 中，自动清除并重新加载表格
*   在 viewWillAppear 中，它会闪烁滚动指示器以指示视图可滚动
*   如果您的 UITableView 中有编辑字段，它会在显示键盘时自动将表格滚动到适当的位置。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:38:07.017

UiTableViewController 只是一个 UIViewController 的子类，它有一个 UITableView 作为它的“视图”。使用它的好处是可以为您编写样板代码并且设置更少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T12:02:45.640

这是使用 Container View 和嵌入的一个很大的缺点：它只适用于 iOS 6+。尝试在 iOS 5 上运行带有嵌入式容器视图的故事板会导致错误消息“无法实例化名为 UIStoryboardEmbedSegueTemplate 的类”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-23T17:35:34.110

UITableViewController 是静态/分组单元格的唯一选择。

# ruby - 超级的论据

> ID：14327285
> 
> 赞同：2
> 
> 时间：2013-01-14T21:44:01.957
> 
> 标签：ruby

我有一个调用基本实现的方法：

```
class B
  def m x, y
    x + y
  end
end

class C < B
  def m x, y
    super * 10
  end
end 
```

因为我从不引用派生方法中的参数，有没有办法避免在中使用参数名称`C.m`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:49:27.143

我*认为*这是你能来的最接近的：

```
class B
  def m x, y
    x + y
  end
end

class C < B
  def m *args
    super * 10
  end
end

=> C.new.m 10, 10 # 200
=> C.new.m 1, 2, 3 # ArgumentError 
```

# asp.net-mvc - 我可以在我的服务层中将数据塑造成 ViewModel 吗？

> ID：14327290
> 
> 赞同：2
> 
> 时间：2013-01-14T21:44:19.253
> 
> 标签：asp.net-mvc, architecture, domain-driven-design

我有一个逻辑放置困境，但从这里开始是我的应用程序层：

1.  Presentation/UI 层（Web API 或 MVC，真的可以是任何东西）
2.  服务层（该层总体上是精简的，并充当域模型和存储库层的导体）
3.  领域模型（这一层并不贫乏，模型类中既有数据又有行为）
4.  存储库

就目前而言，这些层设计得很好，流程很直观。但是，我需要将纯模型数据塑造成几个特定的​​ XML 文档，以通过 .xsd 模式进行验证（模型类*不会*1:1 映射 XML 文档，或者我可以直接将对象序列化为 XML）。*对我来说，模型层不*应该理解超出当前设计的形状或结构；这是更高层的责任。

我的第一个想法是提供整形和逻辑，以通过 ViewModel 类从*服务*层中的域模型数据创建这些 XML 文档，以返回一个级别。我在这里使用术语“ViewModel”来纯粹表示用于更高层或表示的成形数据。但是，我读到的所有内容都说服务层*不应该*包含 ViewModel：服务层应该[返回 MVC 应用程序的视图模型吗？](https://stackoverflow.com/questions/3002168/should-a-service-layer-return-view-models-for-an-mvc-application)以及[如何将复杂的 ViewModel 传递给 ASP.NET MVC 中的服务层？](https://stackoverflow.com/questions/5053248/how-to-pass-complex-viewmodel-to-service-layer-in-asp-net-mvc)

好的，请稍等片刻，让我的 MVC 层包含 ViewModel。我有这个问题。拥有服务层的*全部原因*是能够充当应用程序的外观或入口点，从而允许多种 UI 类型（WinForms、WPF、WebForms、MVC、WCF 等）。我**需要连接到服务层的***任何*UI 都可以使用 XML 整形逻辑。如果我把它放在 MVC/UI 层，如果我连接一个新的 UI，它就不再存在了。

现在我回到将 XML 整形类推回到服务层。我也不认为这些类应该在域层上，因为这不是业务逻辑并且指示格式类型：XML，我不想要。最后，我不能在像基础设施层这样的垂直层中引入这个逻辑，因为现在这个层必须理解我的领域模型并且像行李一样随身携带。

根据《**专业 ASP.NET 设计模式**》一书，在使用此体系结构时声明如下：*“服务层的作用是充当应用程序的入口点；有时这被称为门面。**服务层提供具有强类型视图模型的表示层**，有时称为表示模型。”* 我想将成形的类放在我的服务层中，因为这似乎是最合适的，而且我已经看到了这样的例子。

逻辑属于哪里？我想使用我的 1..n 个域模型类，使用各种数据构建一个 XML 文档，然后允许它对 UI/Presentation 层可用？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:32:53.557

恕我直言，我会说您将这些 XML 整形类放入您的服务层的直觉似乎是正确的，它绝对不属于 UI 层，因为您需要它可用于不同类型的 UI。为它们创建一个单独的层似乎是一种矫枉过正。将它们放在您的数据访问类旁边似乎也不正确。

我认为你应该按照你的直觉去做这个。如果您在某个地方查看此代码并且您认为它不合适，那么您可以简单地将其移动到您认为合适的地方。事先好好考虑一下很好，但我会说不要挂断电话。开始编码，然后时不时地退后一步，寻找看起来不合适的东西。**随着项目的形成，您必须不断地重构代码！**

# parsing - Kinvey 是否提供 Trigger.IO 推送通知？

> ID：14327296
> 
> 赞同：1
> 
> 时间：2013-01-14T21:44:41.227
> 
> 标签：parsing, trigger.io

我知道 Trigger.IO 运动推送通知与 Parse 的集成，Kinvey 怎么样？如果是这样，那会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:41:08.693

目前仅支持 Parse 本机推送通知，但是可以编写本机插件 ( [http://docs.trigger.io/en/v1.4/modules/native/index.html](http://docs.trigger.io/en/v1.4/modules/native/index.html) ) 以支持其他平台，例如 Kinvey。

# c++ - Linux 中的命名管道 + SELECT 与 NONBLOCK 模式

> ID：14327299
> 
> 赞同：1
> 
> 时间：2013-01-14T21:44:58.637
> 
> 标签：c++, linux, gcc

我正在尝试使用 O_NONBLOCK 模式创建命名管道，并在单独的线程中使用“SELECT”方法侦听读取事件。当我在主线程中休眠一段时间后尝试关闭程序时出现问题。我希望当命名管道的文件描述符使用 close 方法关闭时，选择操作应该立即停止并返回一些值。但不幸的是，当文件描述符关闭并且执行选择方法的线程只是挂起时，选择操作没有反应......

任何想法如何解决它？示例代码如下。

```
#include <pthread.h>
#include <limits.h>
#include <cctype>
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <semaphore.h>
#include <sys/shm.h>
#include <sys/time.h>
#include <sys/timeb.h>
#include <unistd.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>
#include <exception>
#define BUFFER PIPE_BUF
#define LPVOID void *
#define BOOL int
#define TRUE 1
#define CONST const
#define CHAR char

class CPipeTest
{
    public:

    int fd;
    int nfd;
    fd_set rfd;
    pthread_t t;

    CPipeTest() {};
    ~CPipeTest() {};

    static LPVOID fnExecuteThread(LPVOID lpParam)
    {
        ((CPipeTest*)lpParam)->fnRunThread();
        return NULL;
    }

    BOOL fnRunThread()
    {
        printf("Going to listen...\r\n");
        select(nfd, &rfd, NULL, NULL, NULL);
        printf("Close listener...\r\n");
        return TRUE;
    }

    void fnInit()
    {
        CONST CHAR * name = "./test_fifo1";
        mkfifo(name, 0777);
        fd = open(name, O_NONBLOCK | O_RDONLY);
        nfd = fd + 1;
        FD_ZERO(&rfd);
        FD_SET(fd, &rfd);

        pthread_create( &t, NULL, fnExecuteThread, (LPVOID)this);

        sleep(30);
        printf("Close file descriptor - listener should be closed automatically and immediately\r\n");
        close(fd);
        printf("Descriptor closed wait for thread to to be closed\r\n");
        pthread_join(t, NULL);
        printf("Thread is closed - everything is fine\r\n");
    }

};

int main()
{
    CPipeTest pi;
    pi.fnInit();

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:58:49.887

应该有两个文件描述符，一个用于读取，另一个用于写入。

对于阻塞模式，*在启动“阅读器”线程后*，应在初始线程中打开用于写入的模式（您将在初始线程中关闭） 。用于阅读的应*在阅读器线程*中打开。对于非阻塞模式，它可能在同一个线程中完成，如果你*先打开读取，然后写入*（或`ENXIO`将返回打开没有读取器的写入器）。

当您关闭写入端时，读取端将收到通知`select`。（如果有真正的数据交换，以下`read`将读取零字节，这就是您检测 EOF 的方式）。

`pipe`如果您切换到匿名管道，您将自动从调用中获得一对描述符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:55:06.997

尽量避免在一个线程中写入变量，并在另一个线程中读取它。

避免，我的意思是不要那样做。:)

除非您正在同步访问它，否则使用的每个变量都`fnRunThread`应该只被该函数触及。

在这里，您有人在做您所做的事情： [如果您在单独的线程中关闭（2）文件描述符，那么 select(2) 会做什么？](https://stackoverflow.com/questions/543541/what-does-select2-do-if-you-close2-a-file-descriptor-in-a-separate-thread) 并指出未定义的行为。

解决这个问题的一个好方法是有一个“停止阅读”命令，你可以通过你的 fifo。当读取线程得到它时，它会继续停止读取，然后关闭文件。（请注意，读取线程会关闭文件句柄——如果读取线程正在从文件句柄中读取，则意味着它拥有它。除非进行一些额外的同步，一旦你启动线程，你应该只读取或写入变量由线程中的线程拥有，不应在线程外读取或写入这些变量）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T22:51:50.143

问题是 FIFO（一种特殊类型的文件）必须在两端都打开，**然后**才能对其进行任何操作。关闭同一端并期望另一个线程做出反应是没有意义的。

下面的代码应该做你想做的事：

```
 ....
    nfd = fd + 1;
    FD_ZERO(&rfd);
    FD_SET(fd, &rfd);

    int write_fd = open(name, O_WRONLY);   // open the other end
    pthread_create( &t, NULL, fnExecuteThread, (LPVOID)this);

    sleep(30);
    printf("Close file descriptor - listener should be closed automatically and immediately\r\n");
    close(write_fd);                       // close the other end
    .... 
```

# javascript - 将 3rd 方 jQuery 插件添加到 requireJS 的最佳实践？

> ID：14327304
> 
> 赞同：1
> 
> 时间：2013-01-14T21:45:14.300
> 
> 标签：javascript, jquery, requirejs

例如，有人写了一个很棒的 jQuery 插件，我想在我的网站上使用它，但它不是 AMD 的。如何将它添加到requireJS？出于演示目的，假设这个插件被称为“codeFormatter”，它接受任何`<pre>`标签并对其进行格式化，以便每一行都有索引。显然，codeformatter 需要 jQuery 才能工作。

假设在添加 codeFormatter 之前，`<pre>`我的页面上有一个部分如下所示：

```
var foo = function() {
    console.log("foo");
} 
```

假设这个 jQuery codeformatter 是通过以下方式调用和触发的（传统上）：

```
<script src="scripts/lib/jquery.js"></script>
<script src="scripts/codeformatter.js"></script>
<script>
    $("pre").codeFormatter();
</script> 
```

添加codeFormatter后：

```
1\. var foo = function() {
2\.     console.log("foo");
3\. } 
```

反正由于这个codeFormatter.js插件是别人远程维护的，比如存储在github上，我复制代码再用`define()`方法也没有意义。

使用 shim 或定义或要求等将 codeFormatter.js 放入 requireJS 的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:56:21.693

您的需求是一个非常常见的需求，这就是 RequireJS 文档更详细地概述 jQuery 插件的原因。`shim`更详细地阅读配置选项 - [http://requirejs.org/docs/api.html#config-shim](http://requirejs.org/docs/api.html#config-shim)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:12:24.793

如果插件体积小，建议将多个插件拼接成一个 JS 文件，在 jQuery 之后加载。

如果插件是大文件（例如 jquery-ui）并且我不想连接它们或想从 CDN 中提取它们，我通常会像这样滚动一个命名定义：

```
<script src="path/to/amd_loader.js"></script>
<script src="path/to/jquery.js"></script>
<script>

define(
    'jqueryplugins'
    , [
        'jquery'
        , 'js!plain/js/fileA.js' // loading through "js" plugin
        , 'actually/an/amd/compatible/module'
        , 'js!plain/js/fileB.js' // loading through "js" plugin
    ]
    // because plugins AUGMENT $, no point returning them separately
    // just return back the augmented jQuery reference.
    , function($){return $} 
)

</script>
...
<script>

require(
    ['jqueryplugins', 'path/to/mycode']
    , function($, mycode){
        mycode($)
    }
)

</script> 
```

请注意，虽然 jQuery 是一个 AMD 模块，但我不会通过 AMD 加载程序为它进行初始获取。它将自己注册为命名模块，我稍后再使用它。（请参阅[https://stackoverflow.com/a/14298476/366864](https://stackoverflow.com/a/14298476/366864)）这消除了对复杂`shim`和`path`配置的需要。如果您不手动订购 jQuery 的预加载，您将不得不通过其他方式处理在插件之前订购 jquery 加载的需要。

# html - 从超链接中删除下划线 - Rails

> ID：14327306
> 
> 赞同：7
> 
> 时间：2013-01-14T21:45:25.393
> 
> 标签：html, css

我一直在寻找和寻找，我似乎无法改变这件非常烦人的事情！！！！所以请你们温柔的天使，帮助我从我的链接中删除下划线，但具体的链接。严重混乱的，谢谢。

一些代码：

```
 <div id = "cracker-container">

      <div class = "cracker-wrapper">
      <div id = "cracker1-button">
        <%= link_to "cracker", new_crack_path %>
      </div>
      </div>

      <div class = "cracker-wrapper">
    <div id = "cracker2-button">
        Cracker2
    </div>
     </div>

    <div class = "cracker-wrapper">
     <div id = "cracker3-button">
      Cracker3
    </div>
    </div>

    </div>

THE CSS:

#cracker1{
  color: #000;
}

#cracker2{
  color: #000;
}

#cracker3{
  color: #000;
}

#cracker1:active{
  color: #fff;
}

#cracker2:active{
  color: #fff;
}

#cracker3:active{
  color: #fff;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T22:00:13.093

这将从#cracker1-button div 下的任何标签中删除文本装饰。

```
#cracker1-button a:link { 
    text-decoration:none; 
} 
```

但是，该代码只会从“新鲜”/未访问的链接中删除下划线。一个链接有 4 种不同的状态：

*   *链接*：新鲜/未访问的链接
*   *已访问*：用户访问过的链接
*   *hover*：当用户将鼠标悬停在链接上时
*   *active*：当链接是页面上的活动元素时（具有键盘焦点）

如果要在所有 4 种状态下从链接中删除下划线，则需要在 CSS 中指定它：

```
#cracker1-button a:link, #cracker1-button a:visited, #cracker1-button a:hover, #cracker1-button a:active,  { 
    text-decoration:none; 
} 
```

这是有关使用 CSS 设置链接样式的更多信息的参考。

[http://www.w3schools.com/css/css_link.asp](http://www.w3schools.com/css/css_link.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:50:39.013

`#cracker1-button a { text-decoration:none; }`

不知道这是否是您所追求的，但这将删除`#cracker1`.

# http - http - 客户端服务器 - 请求响应 - 连接

> ID：14327309
> 
> 赞同：0
> 
> 时间：2013-01-14T21:45:41.667
> 
> 标签：http, client-server

我一直在阅读有关 HTTP 协议的内容。描述说，“HTTP 在客户端-服务器计算模型中用作请求-响应协议”。

所以，我的问题是，“客户端-服务器模型是否应该始终遵循请求-响应协议？反之亦然？”

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:47:55.163

服务器可以请求客户端的响应吗？嗯..不..我的意思是..也许。但这会与服务器和客户端关系的定义相矛盾。

当然，当收到数据包时，客户端会向服务器发送确认信息，但这是在 TCP 级别。

至少这是我的理解。

# django-templates - 如何在 Django 模板的列表中加入对象的属性？

> ID：14327310
> 
> 赞同：1
> 
> 时间：2013-01-14T21:45:47.283
> 
> 标签：django-templates

在 Django 模板中，我可以通过

```
{{ listOfStrings | join: ", " }} 
```

如果我想加入列表中对象的某个属性怎么办。例如，如果我有一个用户列表并想加入他们的全名怎么办？

```
{{ listOfUsers.get_full_name | join: ", " }} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T21:48:04.563

afaik，你不能用内置的模板标签来做到这一点，当然也不能用过滤器。您可能想要的是一个自定义标签

```
return ",".join([user.get_full_name for user in listOfUsers]) 
```

构建自定义标签：[https ://docs.djangoproject.com/en/dev/howto/custom-template-tags/](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)

# mule - 如何在 mule 消息上设置相关序列属性？

> ID：14327314
> 
> 赞同：0
> 
> 时间：2013-01-14T21:46:10.043
> 
> 标签：mule

我想在使用集合聚合器聚合它们之前对来自 jdbc 查询的消息进行排序，我认为最好的方法是重新排序器。当我添加这一行

```
<resequencer timeout="6000" failOnTimeout="false" /> 
```

工作流产生此错误：

> ***** *** * *** * *** * *** * *** ** ** * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *** * * * * * * * ** * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * ** * * * * * * *** * *** * *** *** *** * *****消息：执行表达式“message.payload.INVOICE_NUMBER”失败。（org.mule.api.expression.ExpressionRuntimeException）。消息负载的类型：MuleEvent[] 代码：MULE_ERROR--2 ------------------------------------ --------------------------------------------- 异常堆栈为：1 . [Lorg.mule.api.MuleEvent; 无法转换为 java.util.Map (java.lang.ClassCastException)
> org.mvel2.optimizers.impl.refl.nodes.MapAccessor:42 (null) 2\. [错误: 无法调用 getter: getPayload [declr.class: org.mule.el.context.MessageContext; act.class: org.mule.el.context.MessageContext] （查看跟踪）] [Near : {... Unknown ....}] ^ [Line: 1, Column: 0] (org.mvel2.CompileException) org.mvel2.optimizers.impl.refl.nodes.GetterAccessor:75 (null) 3\. 执行表达式“message.payload.INVOICE_NUMBER”失败。(org.mule.api.expression.ExpressionRuntimeException)
> org.mule.el.mvel.MVELExpressionLanguage:211 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/expression/ExpressionRuntimeException.html) 4\. 执行表达式“message” .payload.INVOICE_NUMBER”失败。（org.mule.api.expression.ExpressionRuntimeException）。消息负载类型：MuleEvent[] (org.mule.api.transformer.TransformerMessagingException)
> org.mule.transformer.AbstractTransformer:123 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/transformer/TransformerMessagingException.html) ---------- -------------------------------------------------- -------------------- 根异常堆栈跟踪：java.lang.ClassCastException：[Lorg.mule.api.MuleEvent; 不能在 org.mvel2.optimizers.impl.refl.nodes.GetterAccessor.getValue(GetterAccessor .java:41) 在 org.mvel2.optimizers.impl.refl.nodes.VariableAccessor.getValue(VariableAccessor.java:38) + 3 个以上（设置调试级别日志记录或 '-Dmule.verbose.exceptions=true' 为一切）**
> 
>  *** * ***

 **```
<when expression="#[message.payload.LHF_INVOICE_METHOD == 'EDI']"><processor-chain>
        <message-properties-transformer doc:name="Set Correlation ID">
            <add-message-property key="MULE_CORRELATION_SEQUENCE" value="#[message.payload.INVOICE_NUMBER]" />
        </message-properties-transformer>
<resequencer timeout="6000" failOnTimeout="false" />
<set-payload value="#[message.payload.INVOICE_NUMBER]" doc:name="EDI"/>                                
<collection-aggregator  timeout="3200" failOnTimeout="false" doc:name="EDI"          storePrefix="EDI" />
<smtp:outbound-endpoint host="mail.example.com" to="test@example.com" from="muleservice@example.com" subject="[Invoice Workflow] EDI" responseTimeout="10000" doc:name="EDI"/>
<collection-splitter doc:name="Collection Splitter"/>
<jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="gMarkProcessedInRoss"     queryTimeout="1000" connector-ref="DatabaseMuleLogin" doc:name="Mark Processed in Ross">
</jdbc:outbound-endpoint>
</processor-chain>
</when> 
```

我在重新排序器（如下）之后添加了一个拆分器，它可以工作，除了邮件仍然在电子邮件中未排序。

```
<set-property propertyName="MULE_CORRELATION_SEQUENCE" value="#[message.payload.INVOICE_NUMBER]" />
<resequencer timeout="6000" failOnTimeout="false" />
<collection-splitter doc:name="Collection Splitter"/>
<set-payload value="#[message.payload.message.payload.INVOICE_NUMBER]" doc:name="EDI"/>
<echo-component doc:name="Echo"/>                                
<collection-aggregator  timeout="3200" failOnTimeout="false" doc:name="EDI"  storePrefix="EDI"       />
<smtp:outbound-endpoint host="mail.example.com" to="test@example.com" from="muleservice@example.com" subject="[Invoice Workflow] EDI" responseTimeout="10000" doc:name="EDI"/>
<collection-splitter doc:name="Collection Splitter"/>
<jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="RouteEDI" queryTimeout="1000" connector-ref="DatabaseMuleLogin" doc:name="Mark Processed in Ross">
</jdbc:outbound-endpoint> 
```

我添加了一个回声组件，它们在那时已经排序，所以我很确定聚合器正在对它们进行排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:10:30.480

你是对的，相关序列属性被命名为`MULE_CORRELATION_SEQUENCE`。您可以如下图所示进行设置：

```
<set-property propertyName="MULE_CORRELATION_SEQUENCE"
              value="1" /> 
```

然后重排序器应根据该序列对消息进行排序。如果没有，请使用失败的配置更新您的问题。

确保将`MULE_CORRELATION_GROUP_SIZE`属性设置为正确的大小，并且要重新排序的所有消息共享相同的`MULE_CORRELATION_ID`属性。**

# soap - 如何在 Soap Response 中删除 Result 节点？

> ID：14327317
> 
> 赞同：1
> 
> 时间：2013-01-14T21:46:19.783
> 
> 标签：soap, xml-serialization

我得到了一个 wsdl，我应该在 .NET 2.0 中为它构建一个服务。我要返回响应（在点击 web 服务并得到回复后，我应该返回确认，以便第三方知道我从他们的 web 服务中获取了数据）。我的问题是我在返回给他们的响应中有一个额外的节点。这是我发回的当前响应：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <soap:Body>
   <tranId>
     <MethodResult>123321</MethodResult>
   </tranId>
 </soap:Body>
</soap:Envelope> 
```

问题是他们期望它看起来像这样：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <soap:Body>
   <tranId>123321</tranId>
 </soap:Body>
</soap:Envelope> 
```

如何从 .NET 2.0 中的 SoapResponse 中删除 Result 标记？我能够找到的所有内容，以及运行时从 wsdl.exe 生成的代码，都建议使用 MessageContract 删除该标签。不幸的是 MessageContract 在 .NET 2.0 中不可用。有人有想法么？

# haskell - Haskell 中的依赖注入：惯用地解决任务

> ID：14327327
> 
> 赞同：56
> 
> 时间：2013-01-14T21:46:52.193
> 
> 标签：haskell

什么是依赖注入的惯用 Haskell 解决方案？

例如，假设您有一个 interface `frobby`，并且您需要传递一个符合`frobby`around 的实例（这些实例可能有多种变体，例如`foo`和`bar`）。

典型的操作是：

*   接受一些值`X`并返回一些值的函数`Y`。例如，这可能是一个数据库访问器，接受一个 SQL 查询和一个连接器并返回一个数据集。您可能需要实现 postgres、mysql 和模拟测试系统。

*   接受一些值`Z`并返回与 相关的闭包的函数`Z`，专用于给定`foo`或`bar`样式，在运行时选择。

一个人解决了以下问题：

[http://mikehadlow.blogspot.com/2011/05/dependency-injection-haskell-style.html](http://mikehadlow.blogspot.com/2011/05/dependency-injection-haskell-style.html)

但我不知道这是否是管理此任务的规范方法。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2013-01-15T00:53:55.973

我认为正确的答案是，我可能会因为这样说而收到一些反对意见：忘记术语*依赖注入*。把它忘了吧。这是来自 OO 世界的流行语，但仅此而已。

让我们解决真正的问题。请记住，您正在解决一个问题，而该问题是手头的特定编程任务。不要让你的问题“实现依赖注入”。

我们将以记录器为例，因为这是许多程序都希望拥有的基本功能，并且有许多不同类型的记录器：一种记录到标准错误，一种记录到文件，数据库，和一个什么都不做的人。要统一所有它们，您需要一个类型：

```
type Logger m = String -> m () 
```

您还可以选择更高级的类型来节省一些击键：

```
class PrettyPrint a where
    pretty :: a -> String

type Logger m = forall a. (PrettyPrint a) => a -> m () 
```

现在让我们使用后一种变体定义一些记录器：

```
noLogger :: (Monad m) => Logger m
noLogger _ = return ()

stderrLogger :: (MonadIO m) => Logger m
stderrLogger x = liftIO . hPutStrLn stderr $ pretty x

fileLogger :: (MonadIO m) => FilePath -> Logger m
fileLogger logF x =
    liftIO . withFile logF AppendMode $ \h ->
        hPutStrLn h (pretty x)

acidLogger :: (MonadIO m) => AcidState MyDB -> Logger m
acidLogger db x = update' db . AddLogLine $ pretty x 
```

您可以看到这是如何构建依赖关系图的。这`acidLogger`取决于`MyDB`数据库布局的数据库连接。将参数传递给函数是在程序中表达依赖关系的最自然的方式。毕竟，函数只是一个依赖于另一个值的值。行动也是如此。如果您的操作依赖于记录器，那么它自然是记录器的函数：

```
printFile :: (MonadIO m) => Logger m -> FilePath -> m ()
printFile log fp = do
    log ("Printing file: " ++ fp)
    liftIO (readFile fp >>= putStr)
    log "Done printing." 
```

看看这有多容易？在某些时候，当您忘记 OO 教给您的所有废话时，这会让您意识到您的生活会变得多么轻松。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-14T23:42:14.867

使用`pipes`. 我不会说它是惯用的，因为该库仍然相对较新，但我认为它完全解决了您的问题。

例如，假设您要包装某个数据库的接口：

```
import Control.Proxy

-- This is just some pseudo-code.  I'm being lazy here
type QueryString = String
type Result = String
query :: QueryString -> IO Result

database :: (Proxy p) => QueryString -> Server p QueryString Result IO r
database = runIdentityK $ foreverK $ \queryString -> do
    result <- lift $ query queryString
    respond result 
```

然后我们可以对数据库的一个接口进行建模：

```
user :: (Proxy p) => () -> Client p QueryString Result IO r
user () = forever $ do
    lift $ putStrLn "Enter a query"
    queryString <- lift getLine
    result <- request queryString
    lift $ putStrLn $ "Result: " ++ result 
```

你像这样连接它们：

```
runProxy $ database >-> user 
```

然后，这将允许用户从提示中与数据库进行交互。

然后我们可以使用模拟数据库切换数据库：

```
mockDatabase :: (Proxy p) => QueryString -> Server p QueryString Result IO r
mockDatabase = runIdentityK $ foreverK $ \query -> respond "42" 
```

现在我们可以很容易地为模拟数据库切换数据库：

```
runProxy $ mockDatabase >-> user 
```

或者我们可以切换出数据库客户端。例如，如果我们注意到一个特定的客户端会话触发了一些奇怪的错误，我们可以像这样重现它：

```
reproduce :: (Proxy p) => () -> Client p QueryString Result IO ()
reproduce () = do
    request "SELECT * FROM WHATEVER"
    request "CREATE TABLE BUGGED"
    request "I DON'T REALLY KNOW SQL" 
```

...然后像这样连接起来：

```
runProxy $ database >-> reproduce 
```

`pipes`允许您将流式或交互行为拆分为模块化组件，以便您可以随意混合和匹配它们，这就是依赖注入的本质。

要了解更多信息`pipes`，请阅读[Control.Proxy.Tutorial](http://hackage.haskell.org/packages/archive/pipes/3.0.0/doc/html/Control-Proxy-Tutorial.html)中的教程。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-26T14:32:39.927

为了建立 ertes 的答案，我认为所需的签名`printFile`是`printFile :: (MonadIO m, MonadLogger m) => FilePath -> m ()`，我将其读作“我将打印给定的文件。为此，我需要做一些 IO 和一些日志记录。”

我不是专家，但这是我对这个解决方案的尝试。对于如何改进这一点，我将不胜感激。

```
{-# LANGUAGE FlexibleInstances #-}

module DependencyInjection where

import Prelude hiding (log)
import Control.Monad.IO.Class
import Control.Monad.Identity
import System.IO
import Control.Monad.State

-- |Any function that can turn a string into an action is considered a Logger.
type Logger m = String -> m ()

-- |Logger that does nothing, for testing.
noLogger :: (Monad m) => Logger m
noLogger _ = return ()

-- |Logger that prints to STDERR.
stderrLogger :: (MonadIO m) => Logger m
stderrLogger x = liftIO $ hPutStrLn stderr x

-- |Logger that appends messages to a given file.
fileLogger :: (MonadIO m) => FilePath -> Logger m
fileLogger filePath value = liftIO logToFile
  where
      logToFile :: IO ()
      logToFile = withFile filePath AppendMode $ flip hPutStrLn value

-- |Programs have to provide a way to the get the logger to use.
class (Monad m) => MonadLogger m where
    getLogger :: m (Logger m)

-- |Logs a given string using the logger obtained from the environment.
log :: (MonadLogger m) => String -> m ()
log value = do logger <- getLogger
               logger value

-- |Example function that we want to run in different contexts, like
--  skip logging during testing.
printFile :: (MonadIO m, MonadLogger m) => FilePath -> m ()
printFile fp = do
    log ("Printing file: " ++ fp)
    liftIO (readFile fp >>= putStr)
    log "Done printing."

-- |Let's say this is the real program: it keeps the log file name using StateT.
type RealProgram = StateT String IO

-- |To get the logger, build the right fileLogger.
instance MonadLogger RealProgram where
    getLogger = do filePath <- get
                   return $ fileLogger filePath

-- |And this is how you run printFile "for real".
realMain :: IO ()
realMain = evalStateT (printFile "file-to-print.txt") "log.out"

-- |This is a fake program for testing: it will not do any logging.
type FakeProgramForTesting = IO

-- |Use noLogger.
instance MonadLogger FakeProgramForTesting where
    getLogger = return noLogger

-- |The program doesn't do any logging, but still does IO.
fakeMain :: IO ()
fakeMain = printFile "file-to-print.txt" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-15T17:16:25.127

另一种选择是使用[存在量化数据类型](http://www.haskell.org/haskellwiki/Existential_type)。我们以[XMonad](http://xmonad.org/)为例。`frobby`布局有一个 ( ) 接口——[`LayoutClass`](http://xmonad.org/xmonad-docs/xmonad/XMonad-Core.html#t%3aLayoutClass)类型类：

```
-- | Every layout must be an instance of 'LayoutClass', which defines
-- the basic layout operations along with a sensible default for each.
-- 
-- ...
-- 
class Show (layout a) => LayoutClass layout a where

    ... 
```

和存在数据类型[Layout](http://xmonad.org/xmonad-docs/xmonad/XMonad-Core.html#t%3aLayout)：

```
-- | An existential type that can hold any object that is in 'Read'
--   and 'LayoutClass'.
data Layout a = forall l. (LayoutClass l a, Read (l a)) => Layout (l a) 
```

可以包装任何（`foo`或`bar`）接口实例`LayoutClass`。它本身就是一个布局：

```
instance LayoutClass Layout Window where
    runLayout (Workspace i (Layout l) ms) r = fmap (fmap Layout) `fmap` runLayout (Workspace i l ms) r
    doLayout (Layout l) r s  = fmap (fmap Layout) `fmap` doLayout l r s
    emptyLayout (Layout l) r = fmap (fmap Layout) `fmap` emptyLayout l r
    handleMessage (Layout l) = fmap (fmap Layout) . handleMessage l
    description (Layout l)   = description l 
```

现在可以仅通过接口方法`Layout`通用地使用数据类型。`LayoutClass`在运行时将选择实现接口的适当布局，在[XMonad.Layout](http://xmonad.org/xmonad-docs/xmonad/XMonad-Layout.html)和[xmonad-contrib](http://xmonad.org/xmonad-docs/xmonad-contrib/)`LayoutClass`中有一堆。而且，当然，可以在不同的布局之间动态切换：

```
-- | Set the layout of the currently viewed workspace
setLayout :: Layout Window -> X ()
setLayout l = do
    ss@(W.StackSet { W.current = c@(W.Screen { W.workspace = ws })}) <- gets windowset
    handleMessage (W.layout ws) (SomeMessage ReleaseResources)
    windows $ const $ ss {W.current = c { W.workspace = ws { W.layout = l } } } 
```

# sql-server - 如果其中的所有代码分支都没有执行，是否有一个 DMV/DMO 查询将显示 SP 的查询计划？

> ID：14327333
> 
> 赞同：0
> 
> 时间：2013-01-14T21:47:08.830
> 
> 标签：sql-server

在另一篇文章（[什么导致 DMV 显示 NULL 查询计划？](https://stackoverflow.com/questions/14326146/what-causes-dmv-to-show-a-null-query-plan)）中，我发现我的 DMO 查询为 query_plan 返回 NULL，除非 SP 中的所有代码分支都已执行。我知道即使所有分支都没有执行，SQL Server 也会缓存 SP 中的语句，但我不知道使用什么查询来查找该计划。有吗？我从另一个问题复制了下面的相同代码以重现该问题。

```
CREATE PROCEDURE dbo.SampleSp
(
@Option TINYINT
)
AS
DECLARE @RowCount INT;

-- Get ID into local temp table

CREATE TABLE #P (ID INT PRIMARY KEY);
INSERT INTO #P
VALUES (1), (2)

IF @Option = 1
BEGIN
    SELECT ID FROM #P
END
ELSE
BEGIN
    SELECT ID FROM #P
END
GO

--Call SP
EXEC dbo.SampleSp 1
GO
--DMV Query to find query_plan
SELECT  
        CP.objtype, 
        CP.usecounts AS Ct, 
        ST.last_execution_time,
        SUBSTRING(Text, (statement_start_offset / 2) + 1, (CASE statement_end_offset WHEN -1 THEN DATALENGTH(Text) ELSE statement_end_offset END  - ((statement_start_offset / 2) + 1))) AS query,
        T.text,
        PL.query_plan
FROM sys.dm_exec_cached_plans AS CP WITH(NOLOCK)
CROSS APPLY sys.dm_exec_sql_text(CP.plan_handle) AS T
OUTER APPLY sys.dm_exec_query_plan(CP.plan_handle) AS PL
LEFT OUTER JOIN sys.dm_exec_query_stats AS ST WITH(NOLOCK) ON ST.plan_handle = CP.plan_handle
WHERE 1=1
AND ST.last_execution_time > GETDATE() - .005 -- within about the last 5 min
AND T.text LIKE '%SampleSp%'
AND T.text NOT LIKE '%dm_exec_cached_plans%'
ORDER BY ST.last_execution_time DESC 
```

# c++ - Kiss FFT 有多快？

> ID：14327336
> 
> 赞同：0
> 
> 时间：2013-01-14T21:47:26.917
> 
> 标签：c++, kissfft

主题问题：大 O 符号中的 Kiss FFT 有多快？我在任何地方都找不到这句话，它可能在某个地方很明显，我只是瞎了眼。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:49:27.467

我很确定快速傅立叶变换的*意义*在于它是 θ(n log n)。
如果它更慢，那么它就不会被称为“快速”傅立叶变换。
（而且它可能不会更快。）

* * *

说到“简单”的 FFT，这里有一个（只有 2 的幂）：

```
// To get the discrete Fourier _series_, divide by the period
template<class RanInIt, class RanOutIt, class RanScratchIt>
void fft(RanInIt begin, RanInIt end,
    RanOutIt outputs, RanScratchIt scratch /* at least twice as big as output */,
    bool const inverse = false, size_t const stride = 1)
{
    typedef std::iterator_traits<RanInIt>::value_type complex;
    static long double const two_pi = 6.2831853071795864769252867665590057683943L;
    size_t const n = 1 + static_cast<size_t>(std::distance(begin, end) - 1) / stride;
    if ((n & (n - 1)) != 0) { throw std::logic_error("FFTs must be in powers of 2!"); }
    complex const divisor(inverse ? n : 1);
    if (n > 2)
    {
        fft(begin + 0 * stride, end, scratch + 0 * stride, outputs + 0 * stride, false, 2 * stride);
        fft(begin + 1 * stride, end, scratch + 1 * stride, outputs + 1 * stride, false, 2 * stride);
        size_t const n_2 = n / 2;
        for (size_t i = 0; i < n_2; i++)
        {
            using std::polar;
            complex const
                t(polar(1.0L, -two_pi * i / n)),
                s  (*(scratch + (2 * i + 0) * stride)),
                psi(*(scratch + (2 * i + 1) * stride) * t);
            *(outputs + ((i +   0) * stride)) = (s + psi) / divisor;
            *(outputs + ((i + n_2) * stride)) = (s - psi) / divisor;
        }
    }
    else if (n > 0)
    {
        *(outputs + (0 * stride)) = (*begin + *(begin + 1 * stride)) / divisor;
        *(outputs + (1 * stride)) = (*begin - *(begin + 1 * stride)) / divisor;
    }
    if (inverse)
    {
        std::swap_ranges(outputs + 1, outputs + n / 2, std::reverse_iterator<RanOutIt>(outputs + n));
    }
}

template<class RanInIt>
std::vector<typename std::iterator_traits<RanInIt>::value_type>
    fft(RanInIt begin, RanInIt end, bool const inverse = false)
{
    size_t const n = static_cast<size_t>(std::distance(begin, end));
    size_t log2ceil_n = 0;
    for (size_t i = 1; i < n; i *= 2) { log2ceil_n++; }
    std::vector<typename std::iterator_traits<RanInIt>::value_type>
        outputs(static_cast<size_t>(1) << log2ceil_n),
        scratch(2 * outputs.size());
    fft(begin, end, outputs.begin(), scratch.begin(), inverse);
    outputs.resize(n);
    return outputs;
}

template<class Range>
std::vector<typename Range::value_type> fft(Range range, bool const inverse = false)
{ return fft(range.begin(), range.end(), inverse); }

template<class T, size_t N>
std::vector<T> fft(T const (&range)[N], bool const inverse = false)
{ return fft(&range[0], &range[N], inverse); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:49:54.740

所有 FFT 实现都具有相同的复杂性，因为它们都是完全相同的算法

计算离散傅里叶变换的算法有很多，但只有一种是“快速傅里叶变换 (FFT)”。

# javascript - 为什么数组切片将javascript参数转换为数组

> ID：14327339
> 
> 赞同：7
> 
> 时间：2013-01-14T21:47:33.997
> 
> 标签：javascript, arrays, arguments, slice

为什么将切片方法应用于javascript`arguments`值如下`Array.prototype.slice.call(arguments)`将其转换为数组？如果 slice 用于数组，而`arguments`不是数组，那么它是如何工作的？`slice`应用于参数时是否只是一种特殊情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:58:04.803

来自[EcmaScript 规范`Array.prototype.slice`](http://es5.github.com/#x15.4.4.10)：

> *注意*该`slice`函数是故意通用的；它不要求它的`this`值是一个 Array 对象。因此，它可以转移到其他类型的对象中用作方法。函数能否`slice`成功应用于宿主对象取决于实现。

因此，`slice`适用于每个具有`length`属性的对象（如`Arguments`对象）。即使对于那些不这样做的人，它也会返回一个空数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:52:44.517

是的，这是一个利用参数是可枚举列表这一事实的技巧。它也适用于其他可枚举列表（例如节点列表）。

# iphone - 更改相机胶卷取消按钮的语言

> ID：14327342
> 
> 赞同：2
> 
> 时间：2013-01-14T21:47:43.280
> 
> 标签：iphone, ios, objective-c, xcode

我有一个应用程序可以从`iphone`相机拍照或从相机胶卷中选择一张照片，我的问题是应用程序默认语言是葡萄牙语，但相机胶卷文本以英语显示。

我怎么能自定义它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:46:58.180

为了解决我的问题，我刚刚在我的项目信息选项卡的“本地化”中添加了一种新语言“葡萄牙语”。

# android - 如何打开存储在内存中的 PDF

> ID：14327343
> 
> 赞同：5
> 
> 时间：2013-01-14T21:47:55.103
> 
> 标签：android

我有一个应用程序，它下载 PDF 文件并将其与 MODE_PRIVATE（出于安全目的）一起存储在应用程序的内部存储器中：

```
FileOutputStream fos = getApplicationContext().openFileOutput(LOCAL_FILE_NAME, Context.MODE_PRIVATE);

InputStream inputStream = entity.getContent();
byte[] buffer = new byte[1024];
int bufferLength = 0; 

while((bufferLength = inputStream.read(buffer)) > 0) {           
  fos.write(buffer, 0, bufferLength);      
}

fos.close(); 
```

如何打开并显示下载的 PDF 文件？我一直在 StackOverflow 中搜索，但没有找到明确的解决方案。

看来问题是Android没有原生支持打开PDF文件，所以我认为有两种选择：

1.  使用一些外部库来显示 PDF 文件。有没有效果很好的？

2.  启动一个 Intent 以显示 PDF 文件，但似乎存储为 MODE_PRIVATE 的文件无法被外部应用程序打开。我找到了一些将文件复制到外部存储器然后启动 Intent 的解决方案，但是这个过程破坏了 MODE_PRIVATE 选项的安全目的，对吧？

谢谢阅读

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T21:58:47.417

> 如何打开并显示下载的 PDF 文件？

创建一个`ContentProvider`以提供 PDF 文件，然后使用`ACTION_VIEW` `Intent`与`Uri`您`ContentProvider`在用户选择的 PDF 查看器中打开它。

[此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/Files)演示了如何从内部存储中提供 PDF 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-07T16:18:08.167

要使内部存储中的文件可供其他应用程序使用，最简洁的方法是使用内容提供程序。幸运的是，Android 附带了[FileProvider——](http://developer.android.com/reference/android/support/v4/content/FileProvider.html)一个可以满足您需求的实现。您不需要实现代码（与@CommonsWare 的方法相反），您只需要在清单中指定提供程序即可。

# php - 从 Orange M2M 读取的 PHP SOAP 客户端

> ID：14327346
> 
> 赞同：0
> 
> 时间：2013-01-14T21:48:03.013
> 
> 标签：php, soap

我想知道是否有任何指南，或者任何人都可以帮助使用 PHP SOAP 客户端连接到 Orange M2M 服务器，以便在网页上显示 SMS 消息。我很困惑从哪里开始解决这个问题，在谷歌搜索之后我没有什么可以开始的......这是我的挑战。

我想使用 PHP SOAP 客户端连接到 Orange M2M SMS SOAP 服务器并使用我的用户名/密码访问它，然后我想用它来查看那里的消息以阅读并在 Web 报告中显示它们. 我什至不知道从哪里开始，我已经查看了 Php SOAP 客户端，但没有关于使用 Orange M2M 本身这让我失望。

欢迎和赞赏任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:00:03.250

As you are wanting to use a PHP client, I would use PHP cURL functions for SOAP. Someone posted a similar problem and a cURL solution was provided, see [Execute SOAP using cURL](https://stackoverflow.com/questions/9017722/execute-soap-using-curl)... although this was for POST you would do something similar for GET. Either way you will receive a server response through the "curl_exec($ch)" function. I suggest looking at the cURL function reference on PHP help for more detail.

This basically retrieves information from the server. There are various methods to then display this information on a webpage (e.g. one method would be through an "echo" command).

# jakarta-ee - 动态加载类的 EJB 注入

> ID：14327349
> 
> 赞同：0
> 
> 时间：2013-01-14T21:48:07.227
> 
> 标签：jakarta-ee, servlets, ejb

我正在尝试在运行时加载类，我很好奇，当以这种方式加载类时，是否可以注入 @EJB 注释属性？正在使用 servlet 的类加载器 ( *ChangeAwareClassLoader* ) 从 servlet 加载该类。

也就是说，如果我加载一个定义为

```
public class Foo {
  @EJB
  Bar bar;
} 
```

在servlet中如下

```
ClassLoader cLoader = this.getClass().getClassLoader();
c = cLoader.loadClass("Foo"); 
```

我希望注入EJB *Bar 。*

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:10:06.197

EJB 只能注入`@EJB`到“托管”类中。在 Java EE 中，这基本上意味着只进入 EJB（无状态和有状态 EJB、消息 Bean 等）和 Servlet/过滤器。

其他任何东西（POJO、JPA 实体等）都不会注入资源，您必须使用查找机制来访问它们。

# node.js - 为什么我的快递服务器上出现“无法获取 /”？

> ID：14327352
> 
> 赞同：3
> 
> 时间：2013-01-14T21:48:14.650
> 
> 标签：node.js, express, socket.io

我写了一个服务器的简约示例`node.js`，我想通过它获得客户端连接的控制台通知。我正在使用以下版本的模块

*   `express@3.0.6`
*   `socket.io@0.9.13`
*   `node@0.8.7`

所以我写了这个：

`app.js`

```
var socket = require('socket.io');
var express = require('express');
var http = require('http');

var app = express();

var server = http.createServer(app);

var io = socket.listen(server);
//var io = socket.listen(app);

io.sockets.on('connection',function(client){
        console.log("Client connected...");

        client.emit('messages', {hello: 'world'});
});

app.listen(8080); 
```

`index.html`

```
<script src="node_modules/socket.io/lib/socket.io.js"></script>
<script>
    var server = io.connect("http://localhost:8080");

    server.on('messages', function(data){
        alert(data.hello);
    });

</script> 
```

我的目录结构如下：

```
|-- app.js
|-- index.html
`-- node_modules
    |-- express
    |   |-- bin
    |   |-- client.js
    |   |-- History.md
    |   |-- index.js
    |   |-- lib
    |   |-- LICENSE
    |   |-- Makefile
    |   |-- node_modules
    |   |-- package.json
    |   |-- Readme.md
    |   `-- test.js
    `-- socket.io
        |-- benchmarks
        |-- History.md
        |-- index.js
        |-- lib
        |-- LICENSE
        |-- Makefile
        |-- node_modules
        |-- package.json
        `-- Readme.md 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T22:05:26.333

您的线路：

```
<script src="node_modules/socket.io/lib/socket.io.js"></script> 
```

应该替换为

```
<script src="/socket.io/socket.io.js"></script> 
```

通过这样做，您将直接通过 socket.io 的内部静态服务器而不是 ExpressJS 本身为客户端提供静态 socket.io.js 模块！

编辑 1：

哦，我忘了提到如何提供你的 index.html 文件，所以基本上你需要设置

```
var app = express();

app.use(express.static(__dirname + '/public')); 
```

然后将您的`index.html`文件放在您的`/public`目录中

编辑2：（解释）

ExpressJS 通过内部静态文件处理程序提供静态文件。该行`app.use(express.static(__dirname + '/public'));`实际上将您传递给 node.js 的请求重新路由到您的公用文件夹。

另一方面，Socket.io（作为一个单独的库）有它自己的方法来提供它的静态文件，并且它仅由包含 URL 的 GET 请求触发：（`/socket.io/socket.io.js`尽管还有另一个用于浏览器的 flash 文件 .swf '不支持 Websockets ）

您可以从[ExpressJS API](http://expressjs.com/api.html#app.use)和[Socket.io wiki](https://github.com/LearnBoost/Socket.IO/wiki/How-do-I-serve-the-client)了解更多信息。

# javascript - 在循环中与jquery绑定事件？

> ID：14327355
> 
> 赞同：0
> 
> 时间：2013-01-14T21:48:22.390
> 
> 标签：javascript, jquery

**描述：**

我的页面上有许多下拉菜单，它们都称为“更新价格”功能。这样当用户选择一个选项时，价格就会相应变化。有很多这样的下拉菜单，它们都有相似的名称`sizes-1`，`sizes-2`等等

**问题**

我发现自己正在复制/粘贴极其相似的事件绑定代码，因为我不知道如何通过某种循环来绑定它。

例子：

*   静止的

    ```
    $( '.sizes-1' ).on('change', function() {
            sizes[0] = $(this).val();
            p.update_pricing( slider_values, price_fields, sizes, ); 
    }); 
    ```

*   尝试循环（不工作）

    ```
    for( index = 0; index < number of divs; index++ ) {        
        $( '.sizes-' + index ).on('change', function() {
            sizes[ index ] = $(this).val();
            p.update_pricing( slider_values, price_fields, sizes, );                
        });
    } 
    ```

此页面上将有很多`.sizes`div，我不想复制/粘贴该静态代码 30 多次。我想知道是否有人遇到过类似的问题并知道解决方案？

非常感谢你。

编辑：（复制/粘贴代码）

```
for( index = 0; index < num_divs; index++ ) { 
    ( function( context_index ) {     
          $( '.sizes-' + context_index ).on( 'change', function() {
            sizes[ context_index ] = $(this).val();
            p.update_pricing( slider_values, price_fields, sizes );                
         });
    } ( index ) ); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:02:33.720

为什么不将函数绑定**在闭包**中，以便为该特定索引保存上下文。

```
for( index = 0; index < number of divs; index++ ) { 
     (function(contextIndex) {     
         $( '.sizes-' + contextIndex ).on('change', function() {
             sizes[ contextIndex] = $(this).val();
             p.update_pricing( slider_values, price_fields, sizes, );                
         });
    }(index)); 
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:51:53.067

您可以为所有选择的 HTML 元素添加一个 CSS 类，然后使用 jQuery CSS 选择器检索所有这些元素

```
<select class="selectSpecial" id="sizes-1">...</select>
<select class="selectSpecial" id="sizes-2">...</select>
etc 
```

然后您检索所有选择

```
$(".selectSpecial").on('change', function(changeEvent) {

    var index = parseInt($(this).attr('id').replace('size-', '')) - 1;
    sizes[index] = $(this).val();
    p.update_pricing( slider_values, price_fields, sizes);

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T21:50:29.777

您只需要使用一个通用的类名（或者`select`如果这适用于您的情况，则直接定位：

```
$( '.sizes' ).on('change', function() {  // <---- Note 'sizes'
    sizes[0] = $(this).val();
    p.update_pricing( slider_values, price_fields, sizes, ); 
}); 
```

HTML

```
<select class="sizes sizes-1">
    <-- options here -->
</select> 
```

这会将您的功能应用于`sizes`该类的所有选择框。

# javascript - Javascript，添加输入字段会清空所有其他输入字段

> ID：14327359
> 
> 赞同：2
> 
> 时间：2013-01-14T21:48:32.247
> 
> 标签：javascript, jsp

我正在创建一段 Javascript 代码，您可以在其中创建具有多个答案的多个问题。问题数量最多为 20 个。当我单击“添加问题”时，它会添加一个带有两个答案的问题。当我填写一些输入字段并单击“添加问题”时，它会清空我的所有文本字段。这怎么可能？

```
var fields = 0;
var qAmount = 0;
var array = new Array();

function addInput() {
  if (fields != 2) {
    qAmount++;
    var element = document.getElementById('texty');
    element.innerHTML += "" +
      "<label>Question " + qAmount + "</label><span class='field'><input type='text' class='longinput' name='question" + qAmount + "' /></span>" +
      "<span class='field'><input type='radio' name='question" + qAmount + "-correctanswer' value='answer" + qAmount + "-1' /> <input type='text' name='answer" + qAmount + "-1'> Answer 1</input></span>" +
      "<span class='field'><input type='radio' name='question" + qAmount + "-correctanswer' value='answer" + qAmount + "-2' /> <input type='text' name='answer" + qAmount + "-2'> Answer 2</input></span>" +
      "<div id='a" + qAmount + "'></div><br/>" +
      "<span class='field'><a style='cursor: pointer' onclick='addAnswer(" + qAmount + ")'>Add answer</a></span><br /><br />";
       fields += 1;
       array[qAmount] = 2;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:00:17.273

问题在于，当您执行 element.innerHTML += ... 时，您正在对页面上已经存在的内容进行浅拷贝，并将其重新插入为覆盖。所以你没有保留已经输入的值。您应该做的是将新的 dom 元素附加到元素。

下面是如何从 HTML 字符串创建元素的链接：[使用内置 DOM 方法或原型从 HTML 字符串创建新的 DOM 元素](https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro)

以及如何将它们附加到元素：[https ://developer.mozilla.org/en-US/docs/DOM/Node.appendChild](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)

像这样的东西应该可以解决问题：（可能需要一些调试）

```
var fields = 0;
var qAmount = 0;
var array = new Array();
var element = document.getElementById('texty');

function addInput() {
  var div, s;
  if (fields != 2) {
    qAmount++;
    s = "<label>Question " + qAmount + "</label><span class='field'><input type='text' class='longinput' name='question" + qAmount + "' /></span>" +
      "<span class='field'><input type='radio' name='question" + qAmount + "-correctanswer' value='answer" + qAmount + "-1' /> <input type='text' name='answer" + qAmount + "-1'> Answer 1</input></span>" +
      "<span class='field'><input type='radio' name='question" + qAmount + "-correctanswer' value='answer" + qAmount + "-2' /> <input type='text' name='answer" + qAmount + "-2'> Answer 2</input></span>" +
      "<div id='a" + qAmount + "'></div><br/>" +
      "<span class='field'><a style='cursor: pointer' onclick='addAnswer(" + qAmount + ")'>Add answer</a></span><br /><br />";
       div = document.createElement('div');
       div.innerHTML = s;
       element.appendChild(div);
       fields += 1;
       array[qAmount] = 2;
  }
} 
```

# javascript - Javascript - 变量号不会增加

> ID：14327361
> 
> 赞同：0
> 
> 时间：2013-01-14T21:48:40.283
> 
> 标签：javascript, variables

我一直在制作这个小脚本，出于某种原因，其中一个变量不会增加它的值。

代码如下所示：

```
function get_swf(mode){
var swf_path;
swf_update(); //Updating max_num
if (location.hash) current = location.hash.replace(/[^0-9.]/g, ""); //Getting only numbers

switch(mode){
case "random":
    current = Math.floor((Math.random() * max_num) + 1);
    swf_path = "uploads/" + current + ".swf";
break;

case "next":
    current += 1;
    if(current > max_num) current = 1;
    swf_path = "uploads/" + current + ".swf";
break;  
case "previous":
    current -= 1;
    if(current == 0) current = max_num;
    swf_path = "uploads/" + current + ".swf";
break;
}
swfobject.embedSWF(swf_path, "lolswf", "800", "400", "9.0.0");
location.hash = current; 
```

}

这段代码在一个函数中，变量：`current`并且`max_num`是全局变量。一切都按预期工作，除非调用“下一个”案例。在这种情况下，即使变量`current`没有达到`max_num`. 例如，如果我设置：

`max_num = 5`和`current = 2`

我称“下一个”`current`设置为 1。

我无法理解它，你能帮帮我吗？

非常感谢！

**编辑**

在进一步检查我的代码后，我发现了一行似乎有错误的代码。这一行在我提供的代码之上。（我已经将代码更新为整个函数，大家可以看看）

```
if (location.hash) current = location.hash.replace(/[^0-9.]/g, ""); //Getting only numbers 
```

我对这一行的期望是，它只是覆盖了`current`变量，因此用户不必总是从头开始。但是，为什么`current`即使它应该增加，它的值也会是“1”？为什么其他情况会按预期工作？

非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:53:29.027

变量：

```
location.hash 
```

如果它是一个整数变量，它不支持替换方法。Replace 方法是字符串的一个属性。

现在，当您执行该行时：

```
if (location.hash) current = location.hash.replace(/[^0-9.]/g, ""); //Getting only numbers 
```

它实际上将变量 current 转换为空或 0。

现在在带有“下一个”案例的 switch 部分中，只有两个语句对当前进行操作：

1.  它增加电流，即 0 + 1 = 1

2.  检查它是否大于最大值，将其设置为 1

在任何一种情况下，您都会在当前获得 1。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:00:37.623

如果您只使用整数，则模数始终是一种选择

```
 case "next":
    current = (current+1)%(max_num+1); // the modulus rollover
    if(current == 0) current = 1; // in the case that the remainder is 0
    swf_path = "uploads/" + current + ".swf";
 break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T21:53:42.830

您需要使用 if 和 path 变量交换位置。您所做的是将 current 设置为 1，然后将其添加到您的 swf_path 字符串中。

```
case "next":
    current += 1;
    swf_path = "uploads/" + current + ".swf";
    if(current > max_num) current = 1;
break; 
```

**更新**

看起来你正在和以前做同样的事情。在那里使用相同的修复

# devexpress - 如何在 XtraGrid GridColumn 中添加事件？

> ID：14327362
> 
> 赞同：0
> 
> 时间：2013-01-14T21:48:45.387
> 
> 标签：devexpress, xtragrid

我在 XtraGrid 中定义了以下列。该列由强制用户选择 3 个选项之一的下拉列表组成。每次用户更改下拉列表的值时，如何连接触发的事件？

```
this.myCol.AppearanceCell.Options.UseTextOptions = true;
this.myCol.AppearanceCell.TextOptions.HAlignment = 
    DevExpress.Utils.HorzAlignment.Near;
this.myCol.Caption = "My Caption";
this.myCol.ColumnEdit = this._myRepositoryLookup;
this.myCol.FieldName = "MyFieldName";
this.myCol.Name = "myId";
this.myCol.Visible = true;
this.myCol.VisibleIndex = 5;
this.myCol.Width = 252; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:41:42.917

你需要看看

> GridView.CustomRowCellEdit 事件或存储库项事件

这是一个示例

使用 DevExpress.XtraGrid.Views.Grid；

```
private void gridView1_CustomRowCellEdit(object sender, CustomRowCellEditEventArgs e) {
   if (e.Column.FieldName == "FieldName") return;
   GridView gv = sender as GridView;
   string fieldName = gv.GetRowCellValue(e.RowHandle, gv.Columns["FieldName"]).ToString();
   switch (fieldName) {
      case "Population":
         e.RepositoryItem = repositoryItemSpinEdit1;
         break;
      case "Country":
         e.RepositoryItem = repositoryItemComboBox1;
         break;
      case "Capital":
         e.RepositoryItem = repositoryItemCheckEdit1;
         break;
   }           
} 
```

[在这里](http://documentation.devexpress.com/#WindowsForms/CustomDocument747)补充阅读

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T06:03:23.513

您可以订阅 在使用这些存储库项控件时要引发的任何[RepositoryItemLookUpEdit 事件。](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsRepositoryRepositoryItemLookUpEditClassEventsTopic)

根据您的要求，您应该使用[RepositoryItem.EditValueChanged Event](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsRepositoryRepositoryItem_EditValueChangedtopic)，它在更改编辑值后立即触发。

**笔记**

> 在增量搜索期间，查找编辑器的 EditValueChangedFiringMode 属性在其弹出窗口打开时将被忽略。如果在增量搜索期间更改了编辑器的编辑值，则会立即触发 EditValueChanged 事件。

代码片段：

```
_myRepositoryLookup.EditValueChanged += new EventHandler(_myRepositoryLookup_EditValueChanged);
this.myCol.AppearanceCell.Options.UseTextOptions = true;
this.myCol.AppearanceCell.TextOptions.HAlignment = 
                        DevExpress.Utils.HorzAlignment.Near;
this.myCol.Caption = "My Caption";
this.myCol.ColumnEdit = this._myRepositoryLookup; 
```

LookupEdit 事件处理方法

```
void _myRepositoryLookup_EditValueChanged(object sender, EventArgs e)
{
    //your code here
} 
```

如果要将编辑器分配给单个单元格，则可以使用[GridView.CustomRowCellEdit 事件](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsGridGridView_CustomRowCellEdittopic)

可能对您有所帮助的参考资料：
[DevExpress RepositoryItemLookUpEdit](https://stackoverflow.com/questions/7231621/devexpress-repositoryitemlookupedit)
[Get Cell Control of GridView in DevExpress](https://stackoverflow.com/questions/2020301/get-cell-control-of-gridview-in-devexpress)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T09:44:24.130

将事件直接添加到存储库项。

这样，您可以从下拉事件中进行选择，而不是从列或单元格中进行选择。

```
repositoryItem.EditValueChanged += new System.EventHandler(repositoryItem_EditValueChanged); 
```

# jquery - 子页面中 jQuery.load 和 $().ready 的计时问题

> ID：14327365
> 
> 赞同：1
> 
> 时间：2013-01-14T21:48:56.350
> 
> 标签：jquery

我正在尝试在父页面上使用 jQuery Load 从 URL 动态插入一些子页面。在父页面中，我执行以下操作：

```
var html = gridDiv.load(self.options.url, function(html, status, xhr)
{
gridDiv.find("myObject:first").data("objectInstance");
    //do something....
}); 
```

数据对象实际上是在文档准备就绪的函数期间添加到子页面中的...

```
$().ready(function() 
```

我首先注意到的是在本地运行时一切都按预期工作。但是，当部署在实际 url 上时，加载完成事件会在 $().ready 在子页面上完成之前触发。第一个问题是这是正确的，有什么办法可以让我只有在子页面上调用 $().ready 之后才能运行我的代码？

我尝试了一种解决方法，在父页面中使用计时器来检查元素。在很短的时间间隔后，该元素将出现在 dom 中，但其上的数据为空。但是，如果我在按钮单击中运行调试器，我可以在那里看到它。

另一种解决方法是将脚本放在子页面的底部，然后准备好删除文档。这也没有奏效。

有什么建议么？（我不能太多修改子页面上的代码逻辑它需要自包含）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:59:50.930

当您在本地运行代码时，您并没有真正看到加载时间延迟。您的代码的问题是

```
 $().ready(function(){})
    //executes when HTML-Document is loaded and DOM is ready 
```

所以我建议你使用

```
 $(window).load(function(){});
    // executes when complete page is fully loaded, including all frames, objects, scripts and images 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:58:30.020

您是否尝试过将要执行的代码放入函数中，然后在子页面上调用该函数？

例如：

```
//main page
$.ajax({
    url: "child.html",
}).done(function(data, xhr, status){
    $('body').append(data);
});

function child_finished_loading(){
    alert('child is done!');
} 
```

和

```
//returned through ajax (child)
<span>This is being appended to main page!</span>
<script type="text/javascript">
    $(function(){
        child_finished_loading();
    });
</script> 
```

# javascript - 使用可访问性标识符访问标签文本

> ID：14327373
> 
> 赞同：0
> 
> 时间：2013-01-14T21:49:28.033
> 
> 标签：javascript, ios, ios-ui-automation, uiaccessibility

我在标签中添加了一个可访问性标识符，以便我可以在我的 UIAutomation javascript 文件中使用它。如何使用可访问性标识符访问标签上的文本？

假设“aLabel”是可访问性标识符，我访问该标签上文本的 javascript 函数是：

```
appLabelValue:function()
{
return this.getElement('aLabel').value();
} 
```

我什至尝试在上述方法中将 .value() 替换为 .text() ，但两者都出现相同的错误，即 undefined is not a function。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:03:08.160

`UIElements`您可以使用`name()` try this访问值

```
appLabelValue:function()
{
return this.getElement('aLabel').name();
} 
```

# objective-c - 使用 ios 中的 facebook 图形 API 在 facebook 墙上共享 youtube 视频

> ID：14327377
> 
> 赞同：2
> 
> 时间：2013-01-14T21:49:32.203
> 
> 标签：objective-c, facebook-graph-api, ios5

我正在尝试使用 facebook graph API 在 facebook 墙上分享 youtube 视频，但它没有在 FB 墙上分享，我收到了来自 facebook 的通知：“您的视频无法处理。访问视频帮助页面以了解常见问题。” 我使用了以下代码。

`

```
 NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   receivedData, @"video.mov",
                                   @"video/quicktime", @"contentType",
                                   strMessage, @"title",
                                   @"", @"description",
                                   nil];

    NSLog(@"video data is..%@",params);

    [appDel.facebook requestWithGraphPath:@"me/link"
                                andParams:params
                            andHttpMethod:@"POST"
                              andDelegate:self]; 
```

`

然后我尝试分享 youtube 链接和缩略图，在这种情况下，链接正在分享到 facebook 墙上，但缩略图没有发布在墙上，即使我也尝试发送静态图像但没有运气。为此，我使用了以下代码。

`

```
 //       NSString *imgnam=[self->arr_Thumnail objectAtIndex:indexForThumnail];
  //          id path = imgnam;
  //                NSURL *url = [NSURL URLWithString:path];
  //                NSData *data = [NSData dataWithContentsOfURL:url];
  //                UIImage *img = [[UIImage alloc] initWithData:data];

    NSString *image_link = @"http://i.ytimg.com/vi/#####/2.jpg";

    NSString *videoLinkString=[self.arr_http objectAtIndex:indexForVideoBtn];

   // NSLog(@"imageString..... %@ ",thumnailImg);
    NSLog(@"videoLinkString..... %@ ",videoLinkString);

    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"274849509266872", @"app_id",
                                   @"http://youtube.com", @"source",
                                   image_link, @"picture",
                                   videoLinkString, @"link",
                                   strMessage,@"message",
                                   nil];

    [appDel.facebook requestWithGraphPath:@"me/feed" andParams:params andHttpMethod:@"POST" andDelegate: self]; 
```

`

任何想法或帮助如何使用 facebook 图形 API 在 facebook 墙上分享带有缩略图的 youtube 视频，将不胜感激。

# apache-pig - 如何读取分组输出和中断？

> ID：14327379
> 
> 赞同：0
> 
> 时间：2013-01-14T21:49:37.217
> 
> 标签：apache-pig

我有一个猪输出文件，其原始数据看起来像这样（2 个字段）：

```
(45578713,45578728,)    8139 
```

第一个字段是以前猪工作的组字段（我无法更改）。

现在我需要阅读这篇文章，我想将第一个字段 - (45578713,45578728,) - 分解为如下的单个数字（总共 3 个字段）

```
45578713        45578728        8139 
```

我怎样才能做到这一点？我尝试使用 Pig 流，但我觉得我必须可以直接从 Pig 做一些事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:43:39.773

这应该可以帮助你。

`m = FOREACH g GENERATE FLATTEN(group), number;`

看看[`FLATTEN`](http://pig.apache.org/docs/r0.11.1/basic.html)运营商。

# jquery - 启用和禁用仅适用于文本输入类型的功能，建议？

> ID：14327384
> 
> 赞同：0
> 
> 时间：2013-01-14T21:49:55.817
> 
> 标签：jquery, html, input

我尝试更改输入标签的输入类型，但启用和禁用功能似乎不适用于整数，仅适用于文本字段。我该如何解决？

我的提交是明天，这是我的搜索代码：

```
 <script type="text/javascript">

            $('#exactButton').live('click', function(){
                $(this).prev().prev().prev().prev().prev().removeAttr('disabled');

                $(this).prev().prev().prev().attr('disabled',true);
                $(this).prev().prev().prev().prev().attr('disabled',true); 
            });

            $('#rangeButton').live('click',function(){
                $(this).prev().prev().removeAttr('disabled');
                $(this).prev().prev().prev().removeAttr('disabled');

                $(this).prev().prev().prev().prev().attr('disabled',true);
            });

        })
    </script> 
```

这是我的 HTML 代码：

```
 <button id="button">Add List</button><br><br>
        <form id ="form" name="search" method="get" action="test.php">
            <div id="div">
                <select name ="select" >
                    ...options...
                </select>

                Value:<input type="text" name="exact" id="exactField" />

                From: <input type="text" name="from" id="fromField" />
                To: <input type="text" name="to" id="toField" />

                <br>
                <input type="button" name="answer" value="Range" id="rangeButton" />
                <input type="button" name="answer" value="Exact" id="exactButton" />

            </div>
            <br>
            <input type="submit"name="search" value="Submit">
        </form> 
```

先感谢您..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:08:25.933

没有输入类型“整数”。只有`text`, `password`, `checkbox`, `radio`, `submit`, `reset`, `file`, `hidden`, `image`, 和`button`根据[HTML 4](http://www.w3.org/TR/REC-html40/interact/forms.html#h-17.4)。大多数网站使用“文本”作为数字；这种缺乏特异性是 JavaScript 的最初原因之一：检测人们在用于数字的文本字段中输入字母（和/或警告他们需要在提交之前修复这些值）。

在[HTML 5](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-input-element.html#attr-input-type)中，添加了其他输入类型：`search`, `tel`, `url`, `email`, `datetime`, `date`, `month`, `week`, `time`, `datetime-local`, `range`, 并且`color`现在可用；这使标记更具可读性，并允许开发人员将一些客户端验证留给浏览器。

当前推荐的进行数字输入的方法是使用`type="number"`. 较旧的非 HTML 5 浏览器将未知类型呈现为`type="text"`，因此当支持不可用时不会丢失任何内容。

有关启用/禁用字段的正确方法，请参阅[jQuery - 禁用表单字段](https://stackoverflow.com/questions/1387341/jquery-disable-form-fields)。输入字段的类型无关紧要 - jquery 足够聪明，可以为您做正确的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:59:41.273

首先。不要使用 jquery 的“live” api，它将被弃用。[http://api.jquery.com/live/](http://api.jquery.com/live/)

注意：对于“on” api，您需要最新的 jquery。

你想这样做吗

更新的 HTML

```
 <button id="button">Add List</button><br><br>
          <form id ="form" name="search" method="get" action="test.php">
           <div id="maindiv">
             <div id="div">
            <select name ="select" >
                ...options...
            </select>

            Value:<input type="text" name="exact" id="exactField" />

            From: <input type="text" name="from" id="fromField" />
            To: <input type="text" name="to" id="toField" />

              </div>
            </div>
            <br>
            <input type="button" name="answer" value="Range" id="rangeButton" />
            <input type="button" name="answer" value="Exact" id="exactButton" />
        <br>
        <input type="submit"name="search" value="Submit">
    </form> 
```

更新的 javascript

```
 // When exact button is clicked, disable from and exact field and enable exactfield text field
    $(document).live('click','#exactButton', function(){
        $('#exactField').removeAttr('disabled');
        $('#fromField,#toField').attr('disabled',true);
    });

    // When range button is clicked, enable from and exact field and disable exactfield option
    $(document).on('click','#rangeButton',function(){
        $('#fromField,#toField').removeAttr('disabled');
        $('#exactField"]').attr('disabled',true);
    });

    $('#button').click(function(){
       $('#maindiv').append($('#div').clone());
     }); 
```

此代码适用于我的数字和字符。让我知道我是否缺少任何东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T22:02:56.180

你用的是什么版本的jquery？

无论如何，在 1.6 中，要更改 disabled 属性，您应该使用 .prop() 函数。

例如`$(this).prop('disabled', true);`

# jquery - 将“fadeOut”点击功能分配给多个DIVS

> ID：14327386
> 
> 赞同：1
> 
> 时间：2013-01-14T21:49:58.657
> 
> 标签：jquery, html, fadeout

编辑：有几个人很快回答了我的问题。这是我犯的一个痛苦的明显错误，只需将#buttonclose 更改为.buttonclose 即可解决。感谢大家的及时回复！

我有三个 div（#window1、#window2 和 #window3），每个都有一个按钮（#buttonclose）。我试图弄清楚当您单击其各自的按钮时如何淡出每个 div。

到目前为止，这就是我所拥有的功能：

```
$('#buttonclose').click(function(){
$('#window1').fadeOut(300);
}); 
```

这非常适用于#window 1，但我不知道如何让它适用于#window2 和#window3。

希望你能帮助我。我真的很感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:54:41.533

首先，一个 ID 应该是一个元素的唯一标识符，因此不允许有多个具有 id 的元素`buttonclose`。在你的情况下，你也许可以把它变成一个类。

然后，在某种程度上取决于 DOM 结构，您可以执行以下操作：

```
$(".buttonclose").on("click", function () {
   $(this).parent().fadeOut(300);
}); 
```

[**演示**](http://jsfiddle.net/JKYC6/)

*这要求要隐藏的元素是按钮的直接父元素，因此您可能需要对其进行一些修改以更好地满足您的需求。*

如果元素嵌套更深，类似的方法`.closest()`可能对您有所帮助，以找到要隐藏的正确祖先。

如果元素不是按钮的祖先，那么您需要一些其他方式将按钮与要隐藏的元素相关联，例如`data-*`在按钮元素上使用属性，并在其中存储值，例如元素的 ID关闭。然后在单击按钮时读取该值，并以这种方式选择正确的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:56:37.530

假设 HTML 是这样的：

```
<div id="window1">This is window 1 <span class="closeButton">Close</span> 
</div>
<div id="window1">This is window 2 <span class="closeButton">Close</span>
</div>
<div id="window1">This is window 3<span class="closeButton">Close</span>
</div> 
```

您可以访问按钮的父级并淡化它：

```
$(".closeButton").button().click(function () {
  $(this).parent().fadeOut(300);
}); 
```

看到这个小提琴：http: [//jsfiddle.net/q6sQX/2/](http://jsfiddle.net/q6sQX/2/)

# mysql - 一个组的 MySQL 限制记录

> ID：14327387
> 
> 赞同：1
> 
> 时间：2013-01-14T21:49:59.650
> 
> 标签：mysql

我已阅读示例，但无法使其适用于我的示例。

我有一个表'玩家'，列'pid'和'name'，还有一个表'card'，列'pid'，'points'。

一个玩家记录有多个卡记录。

如何查询每个玩家的前 5 条记录？

此查询返回我需要的一切，但不限于每个名称 5 条记录。

```
SELECT p.pid, p.name, c.points as lp
FROM player as p, card as c
WHERE p.pid=c.pid
ORDER BY p.name,  lp DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:14:04.830

您可以使用变量为每个用户分配排名：

```
select pid, name, lp
from
(
    SELECT pid, 
        name, 
        points as lp,
        @prev := @curr,
        @curr := name,
        @rank := IF(@prev = @curr, @rank+1, 1) AS rank
    FROM
    (
      select p.pid, name, points
      FROM player as p
      INNER JOIN card as c
          ON p.pid=c.pid
    ) src, (SELECT @curr := null, @prev := null, @rank := 1) r
    ORDER BY name, points desc
) src
where rank <= 5
order by name, lp DESC; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/b4e76/28)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:27:15.157

MySQL 不支持返回指定结果集所需的“分析”类型函数。我们可以通过使用 MySQL 的“用户变量”来模拟该功能。

```
SELECT IF(@prev_name = p.name,@n:=@n+1,@n:=1) AS seq
     , @prev_name := p.name AS name
     , c.points as lp
  FROM player as p
  JOIN card as c
    ON c.pid = p.pid
  JOIN (SELECT @n := 0, @prev_name := NULL) i
 HAVING seq <= 5
 ORDER BY p.name, lp DESC 
```

请注意，此语句的结果集与您的原始语句不同，因为它返回一个额外的列“seq”。此列将返回 1、2、3 等值。指示这是否是特定 p.name 的“第一”、“第二”、“第三”等行。

用于推导它的表达式基本上是检查当前行上 p.name 的值是否与前一行中的值匹配。如果匹配，我们加 1；如果不匹配，则我们重置为零。

查询实际上会为每个 p.name 的所有行生成一个结果集；该`HAVING`子句将限制实际返回给客户端的行。

# php - member.php 页面上的 php 会话输出“隐含的用户名”在 login.php 中有效，但未在 member.php 中显示

> ID：14327388
> 
> 赞同：0
> 
> 时间：2013-01-14T21:50:16.363
> 
> 标签：php

member.php 页面会话输出上的 php 问题“隐含的用户名”在 login.php 中有效，但未在 member.php 中显示

```
<html>

<form action="login.php" method="POST">
    Username: <input type="text" name="username"><p>
    Password: <input type="password" name="password">
              <input type="submit" name="submit" value="Login">
</form>

<a href='register'.php>Register Now</a>

</html 
```

***上面的代码是 index.html 文件***

```
<?php

session_start();

$username = $_POST['username'];
$password = $_POST['password'];

if ($username&&$password)
    {

        $connect = mysql_connect("127.0.0.1","root","") or die ("Could not connect `to     database");
        mysql_selectdb("login") or die ("could not find database");
        $query = mysql_query("select * FROM users WHERE username='$username'");
        $numrows = mysql_num_rows($query);
        if($numrows !=0)
    {
    while ($row = mysql_fetch_assoc($query))
    {
        $dbusername = $row['username'];
        $dbpassword = $row['password'];

    }
    if ($username==$dbusername&&$password==$dbpassword)
    {
    echo $_Session['username']="$dbusername  ";
    echo ",  Login successful. <a href='member.php'>Click here to enter the Members area  

</a>";

    }
    else
        echo "Incorrect password";
    }
    else
        die ("That username does not exists");
    }
    else
        die ("Please enter a username and password");

?> 
```

***上面的代码是login.php，在登录页面上它显示“用户名”登录成功，点击这里进入会员区的链接。***

```
<?php

session_start();

if ($_SESSION['username'] = '$dbusername')
    {
  echo "Welcome, ".$_SESSION['username']."<br><<a href='logout.php'>Click here</a> to logout!<br>Click<a href='changepassword.php'> here</a> to change your password!";
    }
else
     die("You must be logged in to see this page"); 
```

***以上是member.php页面的代码***

这是显示输出：

欢迎，$dbusername

点击这里退出！点击这里更改您的密码！

我的问题是它应该如下所示：

欢迎，约翰尼 点击这里退出！点击这里更改您的密码！

一个解决方案会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:29:43.753

从哪儿开始？好的，这不能用作安全登录脚本。首先，您将密码以原始形式存储在数据库中，没有加密。接下来检查会话变量是否存在并不是查看用户是否登录的正确方法。您必须在每次更改页面时检查用户凭据，并且最好重新生成会话 ID。

`$dbusername`在第二页上没有价值。当您使用 = 符号时，您将重置为`$_SESSION['username']`。`$dbusername`

应该：

```
if ($_SESSION['username']) 
```

或者

```
if (isset($_SESSION['username'])) 
```

这是开始[散列密码的好地方](http://crackstation.net/hashing-security.htm#phpsourcecode)

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

# html - 使用 z-index 定位三个 div

> ID：14327393
> 
> 赞同：0
> 
> 时间：2013-01-14T21:50:26.553
> 
> 标签：html, css, z-index

```
<body>
 <div id="red" class="colorbox"><p>RED</p>
  <div id="green" class="colorbox"><p>GREEN </p>
   <div id="blue" class="colorbox"><p>BLUE</p>
   </div>
  </div>
 </div>
</body> 
```

我怎样才能像这样定位它：

红色块放置在 Z 轴上的其他两个之间；
绿色块放置在红色块的后面；
蓝色块放置在红色块的前面。

像这样的东西：

```
#red { z-index: 2; }
#green { z-index: 1 }
#blue { z-index: 3 } 
```

非常感谢！

更新：

这是我的代码：http: [//jsbin.com/ihizot/3/edit](http://jsbin.com/ihizot/3/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:52:33.213

要使 z-index 起作用，您需要在每个元素上设置一个位置：

位置：绝对，位置：相对，或位置：固定

例子：

```
<div id="green" class="colorbox"><p>RED</p>
  <div id="red" class="colorbox"><p>GREEN </p>
   <div id="blue" class="colorbox"><p>BLUE</p>
   </div>
  </div>
 </div>

.colorbox {
  position:relative;
  height:50px;
  width:50px;

}
#red { 
  background:red;
  z-index: 2; 
}
#green { 
  z-index: 1;
  background: green;
}
#blue { 
  z-index: 3;
  background:blue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:05:36.347

很简单，您不能这样做并且 100% 支持跨浏览器（请参阅`mookamafoob`使用伪元素 :after 重新创建红框（不支持 < IE8）的答案）。

因为红色和蓝色 div 包含在绿色中，所以您不能将红色的堆叠上下文推到它上面。

我已经创建了一个简单的[小提琴](http://jsfiddle.net/ygcnR/)，其中需要什么是 z-index 和 css 以便根据需要堆叠这些，但是因为您的标记嵌套“不正确”，红色无法在绿色和蓝色 div 之间推动。

```
#red {
  position:absolute;
  z-index:2;
  top:15px;
  left:15px;
  height:100px;
  width:100px;
  background-color:red
}
#green
{
  position:absolute;
  top:0px;
  left:0px;
  z-index:1;
  height:100px;
  width:100px;
  background-color:green;
}
#blue
{
  position:absolute;
  z-index:3;
  top:30px;
  left:30px;
  height:100px;
  width:100px;
  background-color:blue;
} 
```

据我所知，这是不可能的，我相信有人会使用正确的术语来解释为什么会在浏览器渲染引擎中发生这种情况（任何人？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T00:10:10.240

从技术上讲，它实际上**是**可能的，使用 CSS 伪元素，它可以在大多数浏览器中工作。如果您使用以下内容重新创建“红色”框：

```
#red:after {
background-color: #f00;
top: -5px;
left: -5px;
z-index: 2;
position: absolute;
font-weight: bold;
width: 400px;
height: 400px;
border: 5px solid white;
font-size: 70pt;
content:"RED"; 
```

}

并做一些其他的调整，你会得到[这个](http://jsbin.com/avohis/1/edit)例子，它位于其他两个之间。它可能不是最优雅的解决方案，但它适用于您提供的场景。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T22:06:49.327

而不是弄乱 Z-index 是不是不可能更改标记？

```
<div id="green" class="colorbox"><p>GREEN </p>
    <div id="red" class="colorbox"><p>RED</p>  
      <div id="blue" class="colorbox"><p>BLUE</p>
      </div>
  </div>
</div> 
```

# c# - 将 KeyValuePair 转换为接口

> ID：14327395
> 
> 赞同：0
> 
> 时间：2013-01-14T21:50:37.320
> 
> 标签：c#, list, casting

我在`InvalidCastException`尝试投射时遇到问题

```
IList<KeyValuePair<string, object>> x 
```

对一个

```
IList<IItem> y 
```

IItem 是我尝试过的界面...

```
IList<IItem> y = (IItem) x; //INVALIDCASTEXCEPTION

IList<IItem> y = x.Cast<IItem>().ToList(); //another exception 
```

...有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:01:10.070

A`KeyValuePar<string,object>`不能强制转换到您的界面。您需要创建实现它的类的实例，然后可以将其转换为接口类型。

假设这是您的接口和实现它的类：

```
interface IItem
{
    string Prop1 { get; set; }
    object Prop2 { get; set; }
}

class SomeClass : IItem
{
    public string Prop1
    {
        get;
        set;
    }

    public object Prop2
    {
        get;
        set;
    }
} 
```

现在您可以`IList<IItem>`从您的`List<KeyValuePar<string,object>>`：

```
IList<KeyValuePair<string, object>> xList = ...;
IList<IItem> y = xList
    .Select(x => (IItem)new SomeClass { Prop1 = x.Key, Prop2 = x.Value })
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:53:05.363

`KeyValuePair<TKey, TValue>`没有实现`IItem`，这似乎甚至不是 .NET Framework 的一部分。你不能施放它，除非你在`KeyValuePair`某个地方重新定义了。

编辑：即使您定义了接口，也无法转换为`IList<YourKeyValuePair>`，`IList<IItem>`因为`IList`它不是协变的。但是，您可以将其转换为`IEnumerable<IItem>`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T21:56:23.680

您可以使用[显式关键字](http://msdn.microsoft.com/en-us/library/xhbhezf4%28v=vs.71%29.aspx)或[隐式关键字](http://msdn.microsoft.com/en-us/library/z5z9kes2%28v=vs.71%29.aspx)`IItem`为自己定义强制转换

# c++ - Boost Signal2 的 Visual Studio 2012 C++ 编译错误

> ID：14327399
> 
> 赞同：10
> 
> 时间：2013-01-14T21:51:12.513
> 
> 标签：c++, visual-studio, boost, boost-signals2

我正在使用带有以下 Boost Signals2 代码的 Visual Studio 2012 Ultimate：在[https://github.com/cfobel/boost_signals2/blob/master/hello_world_0.cpp](https://github.com/cfobel/boost_signals2/blob/master/hello_world_0.cpp) 它会生成以下错误：

```
c:\program files (x86)\microsoft visual studio 11.0\vc\include\xmemory(348): error C4996: 'std::_Uninitialized_copy0': Function call with parameters that may be unsafe - this call relies on the caller to check that the passed values are correct. To disable this warning, use -D_SCL_SECURE_NO_WARNINGS. See documentation on how to use Visual C++ 'Checked Iterators'
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\xmemory(333) : see declaration of 'std::_Uninitialized_copy0'
1>          c:\libraries\boost_1_52_0\boost\signals2\detail\auto_buffer.hpp(192) : see reference to function template instantiation '_FwdIt std::uninitialized_copy<I,boost::variant<T0_,T1>*>(_InIt,_InIt,_FwdIt)' being compiled 
```

此代码与 Visual Studio 2012 C++ 不兼容吗？仍然可以安全使用吗？最后，如何按照建议进行更改？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T21:57:35.827

[C4996](http://msdn.microsoft.com/en-us/library/ttcz0bys.aspx)是关于使用已被标记为弃用的函数的警告。由于您将其视为错误，也许您`Treat Warning as Error (/WX)`启用了该选项？

错误消息本身描述了禁用此选项的方法。将`_SCL_SECURE_NO_WARNINGS`符号添加到项目的预处理器定义中。

# powershell - 如何使用任意数量的参数从 powershell 调用工具？

> ID：14327401
> 
> 赞同：1
> 
> 时间：2013-01-14T21:51:26.227
> 
> 标签：powershell, syntax

我有以下代码

```
$individualSlidesOutputDir = join-path ([io.path]::GetTempPath()) ([Guid]::NewGuid())
set-alias pdftk 'C:\\Program Files (x86)\\PDF Labs\\PDFtk Server\\bin\\pdftk.exe' -scope script

phantomjs ./slides2pdf.coffee $individualSlidesOutputDir #writes some files to this directory

$args = ls $individualSlidesOutputDir | %{$_.FullName}

pdftk $args[0] $args[1] $args[2] cat output slide-deck.pdf 
```

我正是需要这个，但是 $args 可能有任意数量的值 using`$args -join " "`不起作用，因为这似乎被解释为所有一个参数。我很确定我可以用 start-process 做到这一点，但我希望有一种不那么麻烦的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:19:50.517

我会避免使用 $args 因为这是 PowerShell 中的保留变量。在这种情况下它会起作用，但在其他情况下，你可能会放弃对有用参数的访问。也就是说，您应该能够像这样调用：

```
pdftk $args cat output slide-deck.pdf 
```

# symfony - 教义创建具有 2 个关联的查询

> ID：14327406
> 
> 赞同：0
> 
> 时间：2013-01-14T21:51:49.080
> 
> 标签：symfony, doctrine, query-builder

我有这个实体

邮政

```
 /**
 * @ORM\ManyToOne(targetEntity="SottoCategoria")
 * @ORM\JoinColumn(name="sottocategoria_id", referencedColumnName="id", nullable=false)
 */
public $sottocategoria; 
```

SottoCategoria

```
 /**
 * @ORM\ManyToOne(targetEntity="Categoria")
 * @ORM\JoinColumn(name="categoria_id", referencedColumnName="id", nullable=false)
 */
public $categoria; 
```

类别

```
/**
 * @ORM\OneToMany(targetEntity="SottoCategoria", mappedBy="categoria")
 */
protected $sottocategorie; 
```

如何进行此查询？我需要从类别中找到所有帖子

post.sottocategoria.categoria

```
 $query = $repository->createQueryBuilder('p')
                    ->where('p.enabled = :enabled AND p.sottocategoria.categoria = :categoria')
                    ->setParameters(array(
                        'enabled' => true,
                        'categoria' => $idCat,
                    )) 
```

我不能使用 p.categoria 因为我与 post 没有关系

我的关系是 post -> sottocategoria -> categoria 所以我的问题是我如何从 categoria 获得所有帖子？我必须使用内连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:51:10.297

$em = $this->getDoctrine()->getEntityManager(); $query = $em->createQuery('SELECT p,g,c FROM AcmeBlogBu​​ndle:Post p JOIN p.sottocategoria g JOIN g.categoria c WHERE p.enabled = :enabled AND g.categoria = :categoria ORDER BY p.id DESC')

解决了

# php - 在 Ubuntu php.ini 中对 upload_max_filesize 的更改不会生效

> ID：14327409
> 
> 赞同：30
> 
> 时间：2013-01-14T21:51:55.160
> 
> 标签：php

我已经尝试了两天将通过 php 上传的文件的最大文件大小从默认的 2M 增加到 10M。我更改了 phpinfo 引用的 php.ini 文件，但无济于事。

看了几篇文章说php.ini文件第109行附近有语法错误，但不知道是什么语法错误，也不知道怎么改正。用户表示，因为upload_max_filesize 是在配置文件中的这个错误之后，所以它被忽略了。请帮忙。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-11-15T09:16:58.007

[这条消息](http://forum.siteground.com/showthread.php?6993-upload_max_filesize-being-ignored-in-php-ini&s=1b79067d4d61d7edf4b92eb326dcb18b&p=16966#post16966)帮助了我：

> 服务器上安装的最新 php 版本不允许更改全局设置（例如执行时间、最大上传文件大小、最大发布文件大小等）。

请按照以下步骤解决问题：

1.  评估`phpinfo();`
2.  在输出中搜索“*扫描此目录以获取其他 .ini 文件*”文本`phpinfo()`
3.  会是这样的`/etc/php5/apache2/conf.d`
4.  在目录中创建您的*user.ini*文件。( `/etc/php5/apache2/conf.d/user.ini`)
5.  使用此 ini 文件进行自定义设置。
6.  重启服务器

文件`/etc/php5/apache2/conf.d/user.ini`

```
post_max_size = 90M
upload_max_filesize = 50M 
```

**2018.06 更新**

如果您使用的是*nginx* + *php-fpm，*您的路径将是这样*的（在路径中使用您的 php 版本）*。使用以下命令创建文件：

```
nano /etc/php/7.0/fpm/conf.d/user.ini 
```

目录中还有很多其他`.ini`文件`conf.d`。如果您希望您的配置是最后包含的 - 使用前缀。

例如：`30-user.ini`。

创建文件后不要忘记重新启动`fpm`：

```
sudo service php7.0-fpm restart 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-10-26T23:31:04.493

如果您的 php.ini 位于类似的`/etc/php/7.*/fpm/php.ini`位置 - 然后根据需要对其进行修改，而不是`sudo service apache2 restart`使用`service php7.1-fpm restart`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-14T21:54:35.543

你重启apache2了吗？

`sudo service apache2 restart`

新的 php.ini 配置仅在 apache 启动时应用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-14T21:55:00.893

您可能还需要增加帖子的最大大小：

`post_max_size=10M`

试试看。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-19T07:07:42.453

我遇到了完全相同的问题并使用以下步骤解决了它：

在我的服务器上运行以下命令时

```
php --ini 
```

我得到了我的 php.ini 的以下路径

```
Loaded Configuration File:         /etc/php/7.0/cli/php.ini 
```

我继续在这个 php.ini 文件中进行更改，但没有任何更改生效。然后我在 /var/www/html 目录中创建了一个名为 info.php 的文件并添加了以下代码

```
<?php
    phpinfo();
?> 
```

然后我在浏览器中打开文件[http://example.com/info.php](http://example.com/info.php)，我看到实际加载的 php.ini 文件位于不同的目录中

```
Loaded Configuration File   /etc/php/7.0/apache2/php.ini 
```

当我对该目录中的 php.ini 文件进行更改时，所有更改都生效了。总之，请确保您运行 phpinfo(); 函数以确保 php 使用的实际 php.ini 文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-31T16:11:58.700

After reading great [@Jekis](https://stackoverflow.com/a/19997441/5328700)'s answer, I solved the same issue for Fedora distribution (it's the same thing, just different path):

1.  After evaluting `phpinfo();` output I found out that other `.ini` files are stored in: `/etc/php.d` directory

2.  In `/etc/php.d` I created a new file - `40-user.ini`. I added `upload_max_filesize` and other settings that I wanted to change

3.  Then I restarted apache (httpd)

And then changes were picked up.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-14T17:20:53.637

我有一个非常奇怪的经历，导致了同样的症状。

关键是我的 php.ini 文件包含一个旧式注释（以井号开头），从 php 7.0 开始，它不再是注释。不正确的注释混淆了 ini-parser。

解决方案是用分号 (;) 替换所有 # 注释符号，这是编写注释的唯​​一标准方法。

有关更多详细信息，请在此处阅读我的评论：

[https://serverfault.com/a/1012262/494670](https://serverfault.com/a/1012262/494670)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-08-01T15:55:30.703

`service apache2 reload`需要以 root 身份运行，**即使没有 root 似乎不会失败**。跑步`sudo service apache2 reload`作品。这是在 Ubuntu 14.04 中。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-10-15T18:49:35.467

也许你会找到 2 个 php.ini 文件的目录。如果您搜索 php.ini 使用 cli 的位置，就像`php --ini`它向您展示的那样`/etc/php/7.1/cli/php.ini`，但是还有另一个文件夹可以`php-fpm`找到`/etc/php/7.1/fpm/php.ini`，您需要在`conf.d`文件夹下创建新的 ini 文件`/etc/php/7.1/fpm/conf.d/30-user.ini`，如果您需要一个 cli 命令行的 ini 文件，则需要放入你的ini文件在`/etc/php/7.1/cli/conf.d/30-user.ini`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-07T16:36:08.277

对 Ubuntu php.ini 的更改不会生效。

在带有 Nginx 1.18.0 的 Ubuntu 18.04 中解决此问题的步骤。

1.  检查您正在运行的 php 版本：`php -v`
2.  检查 php.ini 中的语法错误：（`sudo php-fpm7.4 -t`更改为您正在运行的版本）。
3.  使用您最喜欢的编辑器来修复语法错误。
4.  重启php-fpm：（`sudo systemctl restart php7.4-fpm`改成你正在运行的版本）。

我的结果：PHP：语法错误，意外的 END_OF_LINE，在第 2 行的 /etc/php/7.4/fpm/php.ini 中期待 '='

就我而言，它是 [PHP] 之前的“w”，当我使用 Ctrl w 进行 nano 搜索时一定会发生这种情况。

# android - 使用arrayadapter Android动态添加项目到listview

> ID：14327410
> 
> 赞同：2
> 
> 时间：2013-01-14T21:51:56.250
> 
> 标签：android, listview, android-arrayadapter

我使用自定义类来填充 ListView 类上的适配器，如下所示：

```
package com.example.raidplanner;

public class RaidWpis {
    private int id;
    private int id_gildia;
    private String nazwa;
    private int schemat;
    private int data_zapis;
    private int data_start;
    private int opis;
    private int id_officer;
    private int nick_officer;
    private int typ;

    public RaidWpis(int id,String nazwa) {
        setNazwa(nazwa);
        setId(id);
    }

    public int getId(){
        return id; 
    }       

    public void setId(int id){
        this.id = id; 
    }

    public String getNazwa() {
        return nazwa;}

    public void setNazwa(String nazwa) {
        this.nazwa = nazwa;
    }

    public String toString() {
        return this.nazwa;
    }
    public String toString2() {
        return this.id+" - "+nazwa;
    }

} 
```

在我的活动中，我使用此代码

```
RaidWpis[] items = {
    new RaidWpis(1, "aaaa"),
    new RaidWpis(3, "bbbb"),
    new RaidWpis(6, "cccc"),
    new RaidWpis(11, "dddd"),
    new RaidWpis(17, "eeee"),
};

mainListView = (ListView) findViewById( R.id.mainListView );

ArrayAdapter<RaidWpis> raidList = new ArrayAdapter<RaidWpis>(this, R.layout.simplerow, items);

// Create ArrayAdapter using the raid list.
mainListView.setAdapter(raidList); 
```

现在如何将新项目添加到项目数组。最后，我想用来自 json 数据的数据（从 PHP 传递）填充该项目数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:59:10.680

我做到了，只是将一些代码更改为：

 `````
ArrayList<RaidWpis> raid_list = new ArrayList<RaidWpis>();
    raid_list.add(new RaidWpis(1, "aaaa"));
    raid_list.add(new RaidWpis(3, "bbb"));
    raid_list.add(new RaidWpis(5, "ccc"));
    ArrayAdapter<RaidWpis> raidList=new ArrayAdapter<RaidWpis>(this, R.layout.simplerow, raid_list); 
`````

# android - 在 EditText 上设置焦点

> ID：14327412
> 
> 赞同：207
> 
> 时间：2013-01-14T21:52:00.670
> 
> 标签：android, focus, android-edittext

我有一个 EditText-Field 并为它设置了一个 OnFocusChangeListener。当它失去焦点时，会调用一个方法，该方法将 EditText 的值与数据库中的一个进行检查。如果该方法的返回值为 true，则会显示一个 toast，并且焦点应该再次回到 EditText 上。焦点应该总是回到 EditText 并且键盘应该显示，直到方法的返回值为 false。

编辑：我想，我的真正问题还没有完全清楚：屏幕上没有其他项目应该能够编辑，直到 EditText 的值被编辑为一个值，这使得方法“checkLiganame(liganame) "返回假。只有 EditText-Field 应该是可编辑的。

这是我的代码（对我不起作用）：

```
final EditText Liganame = (EditText) findViewById(R.id.liganame);

    Liganame.setOnFocusChangeListener(new OnFocusChangeListener() {

        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (!hasFocus) {

                String liganame = Liganame.getText().toString();

                if (checkLiganame(liganame)) {
                    Toast toast = Toast.makeText(CreateTableActivity.this,
                            "Dieser Liganame ist bereits vergeben",
                            Toast.LENGTH_SHORT);
                    toast.show();
                    Liganame.requestFocus();
                }
            } 
```

和方法：

```
public boolean checkLiganame(String liganame) {
    boolean found = false;

    DatabaseHelper databaseHelper = new DatabaseHelper(this);
    SQLiteDatabase db = databaseHelper.getReadableDatabase();

    Cursor cursor = db.query("liga", new String[] { "liganame" },
            "liganame = '" + liganame + "'", null, null, null, null);
    Log.i("Liganame: ", String.valueOf(cursor));

    db.close();
    if (cursor != null) {
        found = true;
    }

    return found;
} 
```

此代码导致以下结果： EditText 失去焦点后，焦点跳回 EditText，但我无法再编辑文本。

EDIT2：更改了我的代码。设想：

我单击第一个 EditText 并在其中放入一个字符串，该字符串已经在数据库中。吐司正在展示。现在我不能再编辑我的字符串了。我单击键盘上的“下一步”，焦点停留在第一个 EditText 上。我尝试编辑我的字符串，但没有任何反应。相反，我的新字符串显示在第二个 EditText 中。我单击设备的后退箭头，然后重新单击第一个和第二个 EditText --> 没有显示键盘。

这是我的新代码：

```
public class CreateTableActivity extends Activity implements
    OnFocusChangeListener {

private EditText Liganame, Mannschaftsanzahl;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.create_league);

    Liganame = (EditText) findViewById(R.id.liganame);
    Liganame.setOnFocusChangeListener(this);
    Mannschaftsanzahl = (EditText) findViewById(R.id.mannschaftsanzahl);
    Mannschaftsanzahl.setOnFocusChangeListener(this);

    final Button save_button = (Button) findViewById(R.id.create_tabelle_speichern_button);

    OnClickListener mCorkyListener = new OnClickListener() {
        public void onClick(View v) {
            ButtonClick();
        }
    };
    save_button.setOnClickListener(mCorkyListener);

}

@Override
public void onFocusChange(View v, boolean hasFocus) {
    String liganame = Liganame.getText().toString();

    if (checkLiganame(liganame)) {
        if (Liganame.requestFocus()) {
            getWindow()
                    .setSoftInputMode(
                            WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
            Mannschaftsanzahl.clearFocus();
            Toast.makeText(CreateTableActivity.this,
                    "Dieser Liganame ist bereits vergeben",
                    Toast.LENGTH_SHORT).show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：333
> 
> 时间：2013-11-25T16:09:41.603

把这条线放在你的`onCreate()`

```
editText.requestFocus(); 
```

* * *

## 回答 #2

> 赞同：176
> 
> 时间：2013-01-14T22:26:01.813

请求焦点不足以显示键盘。

要获得焦点并显示键盘，您可以编写如下内容：

```
if(myEditText.requestFocus()) {
    getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
} 
```

编辑：在添加 checkLiganame 方法后向答案添加额外信息。

在 checkLiganame 方法中，您检查游标是否为空。游标将始终返回一个对象，因此检查 null 不会做任何事情。然而问题出在一线`db.close();`

当您关闭数据库连接时，它`Cursor`变得无效并且很可能为空。

因此，在您获取值后关闭数据库。

与其检查游标是否为空，不如检查返回的行数是否大于 0：if(cursor.getCount() > 0)，如果是，则将布尔值设置为 true。

EDIT2：所以这里有一些如何使它工作的代码。EDIT3：对不起，我添加了错误的代码......;S

首先，如果另一个人获得焦点，您需要清除`EditText`焦点。这可以通过`myEditText.clearFocus()`. 然后在你的 onFocusChangeListener 中你不应该真正关心是否首先`EditText`有焦点，所以 onFocusChangeListener 可能看起来像这样：

```
public class MainActivity extends Activity implements OnFocusChangeListener {
    private EditText editText1, editText2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        editText1 = (EditText) findViewById(R.id.editText1);
        editText1.setOnFocusChangeListener(this);
        editText2 = (EditText) findViewById(R.id.editText2);
        editText2.setOnFocusChangeListener(this);
    }

    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        String liganame = editText1.getText().toString();

        if(liganame.length() == 0) {
            if(editText1.requestFocus()) {
                getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
                editText2.clearFocus();
                Toast.makeText(MainActivity.this, "Dieser Liganame ist bereits vergeben", Toast.LENGTH_SHORT).show();
            }
        }
    }
} 
```

`if(liganame.length() == 0)`用您自己的支票替换第一张支票，然后它应该可以工作。请注意，所有 EditText 视图都应该`onFocusChangeListener`像我在示例中所做的那样将它们设置为相同的侦听器。

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2015-01-03T00:10:32.133

Darwind 代码没有显示键盘。

这对我有用：

```
 _searchText.requestFocus();
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.showSoftInput(_searchText, InputMethodManager.SHOW_IMPLICIT); 
```

如果键盘未显示，请尝试强制：

```
 imm.showSoftInput(_searchText, InputMethodManager.SHOW_FORCED); 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2018-04-20T15:10:13.533

这对我有用：

```
public void showKeyboard(final EditText ettext){
    ettext.requestFocus();
    ettext.postDelayed(new Runnable(){
            @Override public void run(){
                InputMethodManager keyboard=(InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                keyboard.showSoftInput(ettext,0);
            }
        }
        ,200);
} 
```

隐藏：

```
private void hideSoftKeyboard(EditText ettext){
    InputMethodManager inputMethodManager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    inputMethodManager.hideSoftInputFromWindow(ettext.getWindowToken(), 0);
} 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2014-08-05T06:03:40.307

单击按钮时，这会更改 EditText 的焦点：

```
public class MainActivity extends Activity {
    private EditText e1,e2;
    private Button b1,b2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        e1=(EditText) findViewById(R.id.editText1);
        e2=(EditText) findViewById(R.id.editText2);
        e1.requestFocus();
        b1=(Button) findViewById(R.id.one);
        b2=(Button) findViewById(R.id.two);
        b1.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                e1.requestFocus();

            }
        });
        b2.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                e2.requestFocus();
            }
        });
    }
} 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2018-06-25T17:42:16.940

这对我有用，设置焦点并显示键盘

```
EditText userNameText = (EditText) findViewById(R.id.textViewUserNameText);
userNameText.setFocusable(true);
userNameText.setFocusableInTouchMode(true);
userNameText.requestFocus();
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.showSoftInput(userNameText, InputMethodManager.SHOW_IMPLICIT); 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-08-06T18:06:08.120

如果我们动态创建 EditText，那么我们必须设置 requestFocus()，如下所示。

```
 EditText editText = new EditText(this);
    editText.setWidth(600);
    editText.requestFocus(); 
```

如果我们已经在 xml 视图中声明了该组件，那么我们必须找到它，我们可以如下所示关注焦点。

```
EditText e1=(EditText) findViewById(R.id.editText1);
e1.requestFocus(); 
```

它只将焦点设置到相应的 EditText 组件。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-03-07T18:02:41.650

```
 mEditText.setFocusableInTouchMode(true);
    mEditText.requestFocus();

    if(mEditText.requestFocus()) {
        getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
    } 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-03-17T19:48:29.287

如果您尝试`requestFocus()`在布局膨胀之前调用，它将返回 false。此代码在布局膨胀后运行。您不需要[上面](https://stackoverflow.com/a/49944730/2760951)提到的 200 毫秒延迟。

```
editText.post(Runnable {
   if(editText.requestFocus()) {
       val imm = editText.context.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager?
       imm?.toggleSoftInput(InputMethodManager.SHOW_IMPLICIT, 0)
   }
}) 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-05-12T09:43:26.947

```
 Button btnClear = (Button) findViewById(R.id.btnClear);

    EditText editText1=(EditText) findViewById(R.id.editText2);
    EditText editText2=(EditText) findViewById(R.id.editText3);

    btnClear.setOnClickListener(new View.OnClickListener() {

        @Override

        public void onClick(View v) {

            editText1.setText("");
            editText2.setText("");

            editText1.requestFocus();
        }
    }); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-02-25T10:48:19.597

```
 private void requestFocus(View view) {
        if (view.requestFocus()) {
            getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
        }
    }

//Function Call
requestFocus(yourEditetxt); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-06-15T14:44:06.140

请在清单上尝试此代码

```
<activity android:name=".EditTextActivity" android:windowSoftInputMode="stateAlwaysVisible">
</activity> 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-10-26T18:54:20.460

你可以用一行来做到这一点：

```
yourEditText.RequestFocusFromTouch(); 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-07-26T15:46:53.110

对于 Xamarin.Android，我创建了这个扩展。

```
public static class ViewExtensions
{
    public static void FocusEditText(this EditText editText, Activity activity)
    {
        if (editText.RequestFocus())
        {
            InputMethodManager imm = (InputMethodManager)activity.GetSystemService(Context.InputMethodService);
            imm.ShowSoftInput(editText, ShowFlags.Implicit);
        }
    }
} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-05-19T14:24:14.007

我的回答[在这里](https://stackoverflow.com/a/61893375/12665616)

正如我在官方文档上阅读的那样，我认为这是最好的答案，只需将 View 传递给 EditText 等参数，但 showSoftKeyboard 似乎不适用于横向

```
private fun showSoftKeyboard(view: View) {
    if (view.requestFocus()) {
        val imm = getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager
        imm.showSoftInput(view, InputMethodManager.SHOW_IMPLICIT)
    }
}

private fun closeSoftKeyboard(view: View) {
    if (view.requestFocus()) {
        val imm = getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager
        imm.hideSoftInputFromWindow(view.windowToken, InputMethodManager.HIDE_NOT_ALWAYS)
    }
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-11-28T15:16:11.203

我不知道您是否已经找到了解决方案，但是对于再次请求焦点后的编辑问题：

您是否尝试在您的 edittext1 上调用方法`selectAll()`或`setSelection(0)`（如果是 emtpy）？

请让我知道这是否有帮助，因此我将编辑我的答案以提供完整的解决方案。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-10-02T11:59:48.300

如果使用`requestFocus()`in`onCreate()`引入了点击时不显示键盘的问题，请使用`BindingAdapter`SingleLiveEvent[并](https://medium.com/androiddevelopers/livedata-with-snackbar-navigation-and-other-events-the-singleliveevent-case-ac2622673150)请求其中的焦点。

这是如何做到的：

**绑定适配器**

```
@BindingAdapter("requestFocus")
fun bindRequestFocus(editText: EditText, event: Event<Boolean>?) {
    event?.getContentIfNotHandled()?.let {
        if (it) editText.requestFocus()
    }
} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-07-31T05:16:17.980

```
new OnEditorActionListener(){
   @Override
   public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
      editText.requestFocus();
      //used ******* return true ******
      return **true**;
   }
} 
```

# powershell - TFS Powershell cmdlet 在 ISE 中不起作用

> ID：14327420
> 
> 赞同：4
> 
> 时间：2013-01-14T21:52:38.770
> 
> 标签：powershell, tfs

我无法在 Powershell ISE 中运行以下命令，但这些完全相同的命令在常规 Powershell 控制台中运行良好。

```
获取 TfsServer -name http://mytfsserver:8080
```

我尝试从 ISE 控制台添加管理单元，但没有帮助。我什至将它添加到 ISE 的脚本窗格中，但它没有帮助。

我正在使用 Win8 和 TFS 电动工具 2012。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T09:39:09.590

我希望您将 pssnapin microsoft.teamfoundation.powershell 添加到 powershell ISE 中。

ISE 应该是 x64 位。由于此管理单元仅适用于 x64 位。

我们没有任何命令来检查位数。但是在打开 ISE 本身时，它会显示位数（如果是 x86。）

x64 位 ISE 不会显示位数版本。

荣誉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:24:10.997

可能是位元问题。IIRC TFPT PowerShell 模块仅适用于 x86。可能是它在 x86 PowerShell 控制台中工作，但在 64 位 ISE 中失败。

# c++ - 解密一个加密的字符串

> ID：14327425
> 
> 赞同：3
> 
> 时间：2013-01-14T21:53:03.620
> 
> 标签：c++, algorithm, dynamic-programming, encryption

假设有一种加密字符串的方法：

*   在字符串的末尾附加字符 $，它是字母表中的第一个字符。
*   通过不断地将第一个字符移动到字符串的末尾来形成我们得到的所有字符串。
*   将我们得到的所有字符串按字母顺序排序。
*   通过将每个字符串的最后一个字符附加到它来形成一个新字符串。

例如，单词 FRUIT 以以下方式加密：

```
We append the character $ at the end of the word:
FRUIT$

We then form all the strings by moving the first character at the end:
FRUIT$
RUIT$S
UIT$FR
IT$FRU
T$FRUI
$FRUIT

Then we sort the new strings into alphabetical order:
$FRUIT
FRUIT$
IT$FRU
RUIT$F
T$FRUI
UIT$FR

The encrypted string:
T$UFIR 
```

现在我的问题很明显：如何将给定的字符串解密为原始形式。

头疼了半个星期，终于没纸了。

我该怎么办？

**我发现了什么：**

如果我们有加密的最后一步：

```
$FRUIT
FRUIT$
IT$FRU
RUIT$F
T$FRUI
UIT$FR 
```

我们可以知道原始字符串的第一个和最后一个字符，因为最右边的列是加密字符串本身，最左边的列总是按字母顺序排列。最后一个字符是加密字符串的第一个字符，因为 $ 在字母表中总是排在第一位，而且它在一个字符串中只存在一次。然后，如果我们从最右边的列中找到 $ 字符，并在最左边的列中查找同一行的字符，我们会得到第一个字符。

所以我们可以知道加密字符串 T$UFIR 是原始字符串是 F***T$，其中 * 是一个未知字符。

我的想法到此结束。现在我必须利用万维网问另一个人：怎么做？

您可以说这是作业，并且熟悉我的导师，我将赌注押在这是一个动态编程问题上。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-14T22:01:47.963

这是 Burrows-Wheeler 变换。

它是一种通常用于辅助压缩算法的算法，因为它倾向于将常见的重复短语组合在一起，并且是可逆的。

要解码您的字符串：

给每个字符编号：

```
T$UFIR
012345 
```

现在排序，保留编号。如果字符重复，则使用索引作为辅助排序键，以便重复字符的索引保持递增顺序，或者使用保证这一点的排序算法。

```
$FIRTU
134502 
```

现在我们可以解码了。从'$'开始，并使用关联的索引作为下一个字符输出（'$' = 1，所以下一个字符是'F'。'F'是3，所以下一个字符是'R'，等等...)

结果：

```
$FRUIT 
```

所以只需删除标记字符，就完成了。

# jquery - 对字符串的各个部分进行样式设置

> ID：14327427
> 
> 赞同：1
> 
> 时间：2013-01-14T21:53:04.933
> 
> 标签：jquery

我想为价格标签的两个部分设计不同的样式。我想让美元金额大于美分。价格是一个动态值，所以我必须分别包装每个部分。我怎么做？

```
var price = "12.95";

// desired result
<span class="dollar">12.</span><span class="cents">95</span> 
```

我不认为我可以只使用 CSS，但我可以使用一些 jQuery。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T21:55:16.280

尝试按`.`分隔符拆分价格，然后附加如下标签，

```
var priceTokens = price.split('.');
price = '<span class="dollar">' + priceTokens[0] + 
        '</span><span class="cents">.' + priceTokens[1] + '</span>'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:55:03.827

`split()`句号上的字符串。

[http://www.w3schools.com/jsref/jsref_split.asp](http://www.w3schools.com/jsref/jsref_split.asp)

```
var price = '12.95';
var arr = price.split(".");

var dollar = arr[0];
var cent = arr[1];

// desired result
var str = '<span class="dollar">' + arr[0] + 
          '</span><span class="cents">' + arr[1] +'</span>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:58:42.853

有些不同：

```
var price = '12.95'.split('.');
$('<span/>').appendTo('body').addClass('dollar').html('$' + price[0]);
$('<span/>').appendTo('body').addClass('cents').html('.' + price[1]); 
```

[http://jsfiddle.net/WRrR7/1/](http://jsfiddle.net/WRrR7/1/)

# asp.net - ModalPopupExtender 在小型定位容器中定位

> ID：14327430
> 
> 赞同：1
> 
> 时间：2013-01-14T21:53:09.840
> 
> 标签：asp.net, ajaxcontroltoolkit, modalpopupextender

我有`ModalPopupExtender`一个 ASP.NET 4.0 页面，该页面包含在一个`div`绝对位于窗口一侧附近的薄（200 像素宽）中。这会在模态框出现时抛出其定位和宽度，因为它是用 定位的`position:absolute`，在这种情况下，它最终是相对于小容器的。所以当它出现时，它离页面的一侧很远而且很薄。

使其相对于另一个控件的最佳方法是什么？我是否应该使用 javascript（可能是 jQuery）来删除弹出窗口并将其附加到页面上的其他元素，从而为其相对定位的子项产生更好的定位？或者有没有办法以不同的方式配置弹出窗口？

# ios - 将字符串值传递给视图控制器但获得 EXC_BAD_ACCESS

> ID：14327432
> 
> 赞同：0
> 
> 时间：2013-01-14T21:53:27.417
> 
> 标签：ios, objective-c, xcode, cocoa

我正在尝试打印（nslog）嵌入在我创建的 PhotoView 对象中的照片的名称。我创建了 2 个视图控制器类和扩展 UIButton 类的 PhotoView 类，以在以前的视图控制器之一中填充网格。

在 PhotoView.h 我有

```
@interface PhotoView : UIButton
@property (assign, nonatomic) NSString *photoName;
... 
```

在 PhotoView.m 我有

```
 self.tag = [[data objectForKey:@"PhotoID"] intValue];
    self.photoName = [data objectForKey:@"PhotoName"]; 
```

在同一个文件上打印出 tag 和 photoName 的值后，一切看起来都很好。

单击 PhotoView 后尝试从另一个类打印 photoName 的值时出现问题

```
-(void)didSelectPhoto:(PhotoView*)sender
{   
    NSLog(@"%@", [NSString stringWithFormat:@"%@", sender.photoName]);
} 
```

单击 photoView 后，出现 EXC_BAD_ACCESS 错误。

但是，如果我这样做

```
NSLog(@"%@",[NSNumber numberWithInt:sender.tag]]) 
```

我没有收到此错误。

什么可能是错的？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:57:04.560

两个备注：

1.  `[NSString stringWithFormat:@"%@", sender.photoName]` - ***No please! No! Don't do that!*** It's not only superfluous and wastes CPU cycles, but it also heavily decreases readability. if you have a string, you don't have to duplicate it like this, just use the string object directly:

* * *

```
NSLog(@"%@", sender.photoName); 
```

1.  The actual error you have is this:

* * *

```
@property (assign, nonatomic) NSString *photoName; 
```

I. e. you have an `assign` property, so it doesn't retain its value. When your string object goes out of scope, it's deallocated (and since it's not `weak`, it isn't automatically set to `nil`, but it holds whatever garbage value that invalid pointer is, hence the crash). Write instead

```
@property (retain, nonatomic) NSString *photoName; 
```

if you're not using ARC, and

```
@property (strong, nonatomic) NSString *photoName; 
```

if you are.

# php - PHP PDO 请求分隔关键字而不将它们视为字符串

> ID：14327436
> 
> 赞同：0
> 
> 时间：2013-01-14T21:53:53.613
> 
> 标签：php, mysql, pdo, keyword, keyword-search

我需要能够搜索并将不同的单词视为关键字而不是字符串。

实际上，如果我搜索“蓝灯”，“蓝白灯”或“蓝灯”的结果将不会出现。我想将空格视为关键字分隔符。考虑到我的实际代码，我们如何才能做到这一点？

```
$pdo2_where = " WHERE (" .$db_type_1_associations['nom_bot'] ." LIKE ? || " .$db_type_1_associations['id'] ." LIKE ? || " .$db_type_1_associations['nom_fr'] ." LIKE ? || " .$db_type_1_associations['description'] ." LIKE ? || " .$db_type_1_associations['commentaire_public'] ." LIKE ?)" .$pdo2_add_where_photos ;
$pdo2_execute = array (
'%' .htmlspecialchars(urldecode(trim($_GET['recherche']))) .'%',
'%' .htmlspecialchars(urldecode(trim($_GET['recherche']))) .'%',
'%' .htmlspecialchars(urldecode(trim($_GET['recherche']))) .'%',
'%' .htmlspecialchars(urldecode(trim($_GET['recherche']))) .'%',
'%' .htmlspecialchars(urldecode(trim($_GET['recherche']))) .'%'
); 
```

*也可以很好地分隔斜线、逗号和其他经典分隔符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:05:37.210

这是考虑使用搜索引擎的好时机。或者如果可能的话，至少是全文索引。

您可以只使用 SQL 来执行此操作，但您的查询会变得更加复杂。您需要将搜索字符串拆分为空格，并为每个关键字和字段组合添加额外的 or 子句。

# sql - SQL Server 2008 是否有等效的互斥锁或临界区？

> ID：14327439
> 
> 赞同：0
> 
> 时间：2013-01-14T21:54:07.087
> 
> 标签：sql, sql-server, sql-server-2008, locking, mutex

> **可能重复：**
> [SQL 中的互斥锁模拟？](https://stackoverflow.com/questions/4596377/mutex-analog-in-sql)

我们有一个大型 ASP.NET Web 服务，它依赖于大量使用 SQL Server 2008 数据库。最近我开始在日志中看到以下消息：

> 错误 1205：事务（进程 ID）在资源上与另一个进程死锁，并已被选为死锁牺牲品。重新运行事务。

我非常了解多线程编程并且了解什么是死锁。在多线程 C++ 或 C# 代码中，我会使用`mutex`or`critical section`来隔离代码的互斥部分以防止死锁。

所以我想知道 SQL Server 是否具有相同的互斥机制？

为了澄清，我有很多复杂的陈述，比如：

```
BEGIN TRANSACTION
'doing other SQL selects, updates, etc.
COMMIT 
```

所以我要找的是这个：

```
'ENTER CRITICAL SECTION
BEGIN TRANSACTION
'doing other SQL selects, updates, etc.
COMMIT
'LEAVE CRITICAL SECTION 
```

通过这种方法，我正在寻找一种简单的解决方案，它不涉及对经过测试和验证的 SQL 逻辑进行大量重写。

# asp.net-mvc - 带导航的局部视图向导

> ID：14327440
> 
> 赞同：2
> 
> 时间：2013-01-14T21:54:11.317
> 
> 标签：asp.net-mvc, query-string, asp.net-mvc-partialview

查了很多东西，以前没发过。这是我的情况。非常感激任何的帮助。

我有一个带有许多屏幕的向导，带有一个使用 CSS 制作的相关导航栏。当用户从一个屏幕点击到另一个屏幕时，导航会反映用户当前所在的向导页面。每个屏幕都有不同的输入要收集。在每个页面的渲染和提交过程中都需要进行数据库读取和写入。

这就是问题所在。并非每一页都是必需的。导航中只显示所需的页面，所需的信息存储在数据库中。

我的目标是通过将导航和剩余输入分成两个单独的部分来减少数据库查询的数量。这样我就不必在每个屏幕之间呈现导航，从而消除每次屏幕之间的单个查询。

我如何提交当前屏幕的表单，渲染下一个屏幕的局部视图，同时更新查询字符串以反映当前的局部视图？这样，如果用户刷新页面，他们将获得当前屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:16:25.940

听起来像是预优化。你怎么知道你的导航会因为数据库而出现问题？

为什么不把你的导航和[输出缓存分开呢](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs)？

如果您确定要在不更改内容的情况下更改 url，则需要使用[History API](http://diveintohtml5.info/history.html)，并且如果您需要对不支持的浏览器进行回退，则可以使用[history.js](https://github.com/balupton/History.js/)。

# iphone - 通过 URL 发送 JSON NSData

> ID：14327441
> 
> 赞同：1
> 
> 时间：2013-01-14T21:54:19.957
> 
> 标签：iphone, ios, objective-c, json, cocoa

我正在尝试在电子邮件链接中发送对象的 JSON 表示。收件人将打开链接，我的应用程序将通过 url 方案进行响应。它必须从 url 中提取 JSON 并重新构建对象。

我通过构建`NSDictionary`和使用来序列化我的对象：

```
return [NSJSONSerialization dataWithJSONObject:dictionary options:NSJSONWritingPrettyPrinted error:&error]; 
```

我不确定接下来会发生什么。不知何故，我需要将其转换`NSData`为字符串，以便我可以为我的 url 方案添加前缀并在链接中使用它。

在接收端，我需要删除前缀（我可以这样做）并将字符串转回`NSData`.

这样做的正确方法是什么？以及如何确保我的数据内容不会干扰 JSON 字符串编码（例如，如果我的对象包含包含特殊字符的文本）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:09:53.633

您需要执行额外的编码步骤，因为编码的 JSON 中的某些字符在它们是 URL 的一部分时也很重要。我们真正想做的是对数据**进行 URL 编码**，这样生成的字符串中的字符都不会与应用程序期望 URL 的样子发生冲突。

第一步是将我们的数据转换为`NSString`（这基本上只是一个 memcpy，因为`NSStrings`默认以 UTF-8 编码）：

```
NSString *jsonString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

现在，您可能会想使用一个名为的函数`-stringByAddingPercentEscapesUsingEncoding`，但它在转义所有相关字符方面做得不够彻底，因此我们需要构建自己的。

我可以在这里重复代码，但由于它已经完成了很多次，[只需查看这个博客](http://madebymany.com/blog/url-encoding-an-nsstring-on-ios)，它展示了如何添加一个类别来`NSString`进行正确的编码，之后你可以附加它并发送它。编写类似的解码函数`CFURLCreateStringByReplacingPercentEscapesUsingEncoding`对读者来说是一个练习，可以在其中找到许多示例。

顺便说一句，确保您的有效负载非常小（大约几 kB），因为 URL 的长度可能存在上限，即使是在本地使用和使用自定义方案的 URL 也是如此。

# shell - 将带有空格的第二列视为带有 awk 的一列

> ID：14327442
> 
> 赞同：2
> 
> 时间：2013-01-14T21:54:21.790
> 
> 标签：shell, awk

对于一个看起来像这样的文件：

```
Paul    white male 34 
Jane    black female 22
Sam     white male 44 
```

我想要一条 awk 行将第一列之后的所有内容与第二列放在同一行，这样我就可以在上面运行它并生成以下内容

```
white male 34 
black female 22
white male 44 
```

目前， awk '{print $2} 只会输出第一个单词，而不是该行的其余部分。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:02:16.337

其中一个应该适合您，具体取决于第一个空格字符是什么，其余的空格是：

```
awk '{sub(/[^ ]+[ ]+/,"")}1' file
awk -F'\t' '{print $2}' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:55:43.183

Ed Morton 提供了一种标准的方法，可以满足您的需求。

我会提到另一种（棘手的）方式：

在您的 awk 行中`$2`，您可以设置`$1=""`然后打印整行，而不是打印。

```
awk '!($1="")' file 
```

看测试：

```
kent$  echo "Paul    white male 34 
Jane    black female 22
Sam     white male 44"|awk '!($1="")'
 white male 34
 black female 22
 white male 44 
```

这个单行很短，给你输出。但是每行都有一个前导空格。它也很容易通过以下方式删除：

```
awk '!($1="")&&gsub(/^ /,"")' 
```

# ipython - Ipython 脚本在 shell 错误时停止

> ID：14327447
> 
> 赞同：1
> 
> 时间：2013-01-14T21:54:39.147
> 
> 标签：ipython

如果任何[ipython 的 shell 命令](http://ipython.org/ipython-doc/stable/interactive/reference.html#system-shell-access)返回非零值， ipython 是否有类似于[bash 中的“-e”的设置来停止脚本的执行？](http://ss64.com/bash/set.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:12:19.407

不直接，不。但是，在`!foo`shell 命令之后，退出代码存储为 value `_exit_code`。所以你的脚本可以检查并抛出错误。

出于某种原因，在我的系统上，它会将所有退出代码乘以 256。我完全不确定它为什么这样做。

# ios - ios - 删除下载到文档目录中的单个文件

> ID：14327451
> 
> 赞同：3
> 
> 时间：2013-01-14T21:54:56.347
> 
> 标签：ios, objective-c, nsfilemanager, nsdocument

[首先=我很抱歉，因为我在这里](https://stackoverflow.com/questions/14154011/ios-removing-any-file-but-not-all-files-from-the-document-directory)之前已经尝试过问这个问题

我真的很挣扎：

```
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{    
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        // Delete the row from the data source.

        [_mainTableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }

} 
```

通过使用上面的代码，我知道可以从 UITableView 中显示的数组中删除一个条目。但是，我想从我的文档目录中删除用户下载且不再需要的文件。

现在，我同时在更多搜索此代码之后：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectoryPath = [paths objectAtIndex:0];

NSString *file = [[NSString alloc] init];

for(int i=0; i<[paths count]; i++)
{
    file = [documentsDirectoryPath stringByAppendingFormat:@"/%@",_fileArray];
    NSLog(@"%@", file);
}

NSFileManager *fileManager = [NSFileManager defaultManager];
[fileManager removeItemAtPath:file error:NULL]; 
```

允许我在控制台中列出数组中的所有文件以及以下代码：

```
- (void)removeFile:(NSString*)fileName {

    NSFileManager *fileManager = [NSFileManager defaultManager];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.mp3", fileName]];

    [fileManager removeItemAtPath: fullPath error:NULL];

    NSLog(@"image removed");

} 
```

连同：`[self removeFile: _filename];`允许我删除特定文件。

所以我正在努力。**但是当用户能够滑动和删除文件时，我真的被困住了。**当然，我不知道目录中将包含什么文件。

**其次 - 一旦所有文件都被删除，我如何处理能够加载 tableView 的问题？** 如果我使用此代码执行此操作：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
if ([paths count] > 0)
{
    NSLog(@"Path: %@", [paths objectAtIndex:0]);

    NSError *error = nil;
    NSFileManager *fileManager = [NSFileManager defaultManager];

    // Remove Documents directory and all the files
    BOOL deleted = [fileManager removeItemAtPath:[paths objectAtIndex:0] error:&error];

} 
```

我收到终止错误 - 我认为这是因为该目录也已被删除。

我知道这里有一些代码，但我真的希望有人指导我完成这个:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T15:21:40.050

如果我理解正确，您需要分步指南。让我们考虑一下你有一个从 NSMutableArray (mainArray) 获取数据的工作 UITableView (mainTableView)。

这将返回文档目录路径。

```
-(NSString*)filePath{
NSString *path=[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)lastObject];

NSLog(@"%@",path);
return path;
} 
```

我们需要在某个地方初始化数组，我在 viewDidLoad 上做了。

```
 - (void)viewDidLoad
{
    [super viewDidLoad];

    mainDataArray=[[NSMutableArray alloc]init];
    [self loadContentsOfDirectory:[self filePath]];
}

//here i am  adding names of files from documents directory
-(void)loadContentsOfDirectory:(NSString*)path
{
    NSError *error=nil;
    NSArray *pathArray=[[NSFileManager defaultManager]contentsOfDirectoryAtPath:path error:&error];

   if (error) {
       NSLog(@"ERROR: %@",error);
   }else{
       if (pathArray) {
           [mainDataArray removeAllObjects];
           [mainDataArray addObjectsFromArray:pathArray];
       }
   }
}

#pragma mark UITableView_Methods

//delete file then if file is deleted , remove filename from array and remove cell
-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
       NSString *fileName=[mainDataArray objectAtIndex:indexPath.row];

       NSError *error=nil;
       NSString *pathToDelete=[[self filePath]stringByAppendingPathComponent:fileName];
       BOOL succes=[[NSFileManager defaultManager]removeItemAtPath:pathToDelete error:&error];

       if (error) {
           NSLog(@"ERROR: %@",error);
       }

       // if file is succes deleted
       if (succes) {
           //remove this item from array 
           [mainDataArray removeObject:fileName];
           //and remove cell 
           [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationLeft];
       }else{
            UIAlertView *alertView=[[UIAlertView alloc]initWithTitle:@"Alert!" message:@"File can not be deleted" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
           [alertView show];
       }
   }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
   return [mainDataArray count];
 }

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *reusableCell=@"cell";

    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:reusableCell];
    if (cell==nil) {
        cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:reusableCell];
    }
    cell.textLabel.text=[mainDataArray objectAtIndex:indexPath.row];

   return cell;
 } 
```

我认为您的错误是您没有删除数组中的单元格、对象。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:52:59.357

如果你想从你的`Documents`目录中删除选定的文件，那么。

`Documents`首先，您必须像这样从应用程序目录中获取所有文件

```
-(NSArray *)listFileAtPath:(NSString *)path
{
    NSArray *directoryContent = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:path error:NULL];
    return directoryContent;
} 
```

然后使用上述函数的返回数组显示文件到`UITableView`

```
NSArray *filesArray = [self listFileAtPath:documentDirectoryPath]; 
```

最后，当您删除选定的文件时，您必须从`Documents`目录中删除该文件，并从`filesArray`管理`UITableView`类似这样的内容中删除：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{    
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        // Delete the row from the data source.
        [_mainTableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

        // Remove file from document directory 
        NSError *error = nil;
        NSFileManager *fileManager = [NSFileManager defaultManager];
        BOOL deleted = [fileManager removeItemAtPath:[paths objectAtIndex:0] error:&error];

        // Remove file entry from filesArray
        [filesArray removeObjectAtIndex:indexPath.row];
    }
} 
```

如果您想做这样的事情，希望会对您有所帮助。

# ruby-on-rails - 使用正则表达式获取找到的字符串的位置？

> ID：14327454
> 
> 赞同：0
> 
> 时间：2013-01-14T21:55:06.123
> 
> 标签：ruby-on-rails, ruby, regex

我有一个大文本，我想删除某个字符串之前的所有内容。

问题是，文本中有多次出现该字符串，我想通过稍后分析找到的文本来确定哪个是正确的。由于其复杂性，我无法将该分析包含在正则表达式中：

```
text = <<HERE
big big text
goes here
HERE

pos = -1

a = text.scan(/some regexp/im)
a.each do |m|
  s = m[0]

  # analysis of found string
  ...

  if ( s is good ) # is the right candidate
    pos = ??? # here I'd like to have a position of the found string in the text.

  end

end

result_text = text[pos..-1] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T21:59:30.243

`$~.offset(n)`将给出`n`匹配的 -th 部分的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:14:25.663

我认为你应该计算你的大字符串中有多少次出现，然后使用[索引](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-index)来切断所有与最终模式不匹配的出现。

# ruby-on-rails - 用于编码输入值的 Rails 助手

> ID：14327460
> 
> 赞同：1
> 
> 时间：2013-01-14T21:55:21.300
> 
> 标签：ruby-on-rails, encryption, input, helper

是否有可能将输入值加密为一些加密，如下所示：

[http://dzone.com/snippets/quick-two-encryption](http://dzone.com/snippets/quick-two-encryption)

但是在视图中这样做，所以视图没有太多逻辑，也许作为助手？但是怎么做？

例如改变这样的字符串

```
<input name="person" value="1" /> 
```

到

```
<input name="c4ca4238a0b923820dcc509a6f75849b" value="1" /> 
```

那么，如何在 Rails 中编码输入名称？

另外请不要问我为什么要这样做...有答案吗？给它...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:57:33.363

尝试生成助手，并放在那里

```
module EncryptorHelper
    def encrypt_string(name)
    secret = Digest::SHA1.hexdigest(name)
        a = ActiveSupport::MessageEncryptor.new(secret)
        b = a.encrypt("parts")
        b
  end
end 
```

然后你可以在你的输入中调用 ecnrypt_string(123)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:11:21.603

好主意。这根本没有经过测试，但你会明白的。难道你不能使用 method_missing 来传递你的加密字符串之一来找出真正的方法名称吗？让它处理 getter 和 setter。就像是...

form.html.haml

```
# You'll need to create an encrypt helper.
form_for @model do |f|
  f.input encrypt(person) 
```

模型.rb

```
class Model

  def method_missing sym, *args
    secret = Digest::SHA1.hexdigest("yourpass")
    a = ActiveSupport::MessageEncryptor.new(secret)

    if sym =~ /^(\w+)=$/
      instance_variable_set "@#{a.decrypt($1)}", args[0]
    else
      instance_variable_get "@#{a.decrypt(sym)}"
    end
  end

end 
```

# ios - 为什么Objective-C中的BOOL类型是char？

> ID：14327461
> 
> 赞同：1
> 
> 时间：2013-01-14T21:55:22.063
> 
> 标签：ios, objective-c, boolean

有人告诉我，Objective-C 中的 BOOL 是无符号字符的 typedef，而 YES 和 NO 关键字是编码字符。这不是我第一次听到。我读过这是因为苹果在 C 标准提供 _Bool 类型之前使用了 BOOL，我错了吗？这个事实有什么好处吗？我们在浪费内存吗？这是否提供了一种在函数中返回有价值数据的方法？当发生某些意外行为时，将其用作返回不同值的方法是否正确？

```
BOOL myFunction(int argument)
{
    BOOL result = YES; //The function generates the result
    if (someError == YES) {
        return 5;
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T22:01:11.837

> 我们在浪费内存吗？

不，因为你不能得到一个小于 a 的变量`char`：它总是一个字节。您可以将表示布尔标志的多个位打包在一个单词中，但您必须手动进行 - 使用位移位、使用位字段等。

> 这是否提供了一种在函数中返回有价值数据的方法？

不是真的：你所做的是一个黑客，虽然`5`肯定会通过系统到达调用者，并且会被解释为`YES`“普通”`if`语句，例如

```
if (myFunction(123)) {
    ...
} 
```

但是，如果像这样使用它会惨遭失败：

```
if (myFunction(123) == YES) { // 5 != YES
    ...
} 
```

> 当发生某些意外行为时，将其用作返回不同值的方法是否正确？

从可读性的角度来看，它总是不正确的；至于“做你想做的事”，你的里程可能会有所不同，这取决于你使用你的功能的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:16:43.987

有一点优势：在很多平台（包括iOS、IIRC）上，`sizeof(_Bool) == sizeof(int)`使用`char`起来会稍微紧凑一些。

除了`BOOL`is 实际上`signed char`，不是`char`，这`@encode(BOOL)`在所有平台上对同一事物的评估都是如此。这会使位域稍微复杂化，因为`BOOL foo:1;`似乎定义了一个 1 位有符号整数（IIRC，其行为未定义）——显然`unsigned char`是更好的选择，但可能为时已晚。

`_Bool`还应该更好地优化，因为编译器可以对使用的位模式做出假设，例如替换`a&&b`为`a&b`（前提`b`是没有副作用）。一些架构还将“真”表示为所有位集，这对于屏蔽很有用（想到 SSE 比较指令）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-20T09:31:35.300

“Objective-C 中的 BOOL”不是无符号字符，它是 Objective-C 库定义的任何内容。哪个是 unsigned char 或 bool，取决于您的编译器设置（32 位或 64 位）。两者的行为不同。使用 32 位编译器和 64 位编译器尝试此代码：

```
BOOL b = 256;
if (b) NSLog (@"b is true"); else NSLog (@"b is false"); 
```

# c++ - QFETCH 的“没有名为 'qt_metatype_id' 的成员”

> ID：14327463
> 
> 赞同：1
> 
> 时间：2013-01-14T21:55:30.947
> 
> 标签：c++, qt, qtestlib

我将此行添加到我的 QTestLib 测试类中：

```
QFETCH(MyType, value); 
```

尝试编译测试类时，出现此错误：

```
error: no member named 'qt_metatype_id' in 'QMetaTypeId<MyType>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T21:55:30.947

当使用`QTest::addColumn`and`QFETCH`用于 Qt 中未内置的类型时，您必须添加以下行：

```
Q_DECLARE_METATYPE(MyType); 
```

它超出了您的测试课程的开始。例如：

```
Q_DECLARE_METATYPE(MyType);

class MyTest : public QObject
{
    Q_OBJECT

private slots:

    void testSomething_data()
    {
        QTest::addColumn< MyType >("expectedValue");
        ...
    }
    void testSomething()
    {
        QFETCH(MyType, expectedValue);
        ...
}
}; 
```

# node.js - 数据集 Node.js 中的最近邻

> ID：14327466
> 
> 赞同：1
> 
> 时间：2013-01-14T21:55:50.737
> 
> 标签：node.js, mongodb, classification, knn

我有一个将数据保存到 MongoDB 的 Node.js 应用程序。给定一个文档，我想在数据库中找到最相似的文档。

我的想法是实现某种最近邻算法，将所有记录作为训练序列并返回最相似的文档（包括关于这两个文档相似程度的某种百分比。）

例如，在我的数据库中有这些记录...

```
{ name: "Bill",   age: 10,  pc: "Mac",      ip: "68.23.13.8" }
{ name: "Alice",  age: 22,  pc: "Windows",  ip: "193.186.11.3" }
{ name: "Bob",    age: 12,  pc: "Windows",  ip: "56.89.22.1" } 
```

...我想找到最接近这个的文件

```
{ name: "Tom", age: 10, pc: "Mac", ip: "68.23.13.10" }
// algorithm returns "Bill", .76 
```

是否有任何节点模块/实现采用任何类型的对象/参数并返回其最近的邻居？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T00:09:27.747

这是一些示例代码。它假定您可以对每个请求运行搜索。如果要修改它，请确保所有相似度函数都返回一个介于 0 和 1 之间的数字。

```
function tokenize(string) {
  var tokens = [];
  for (var i = 0; i < string.length-1; i++) {
    tokens.push(string.substr(i,2));
  }

  return tokens.sort();
}

function intersect(a, b)
{
  var ai=0, bi=0;
  var result = new Array();

  while( ai < a.length && bi < b.length )
  {
     if      (a[ai] < b[bi] ){ ai++; }
     else if (a[ai] > b[bi] ){ bi++; }
     else /* they're equal */
     {
       result.push(a[ai]);
       ai++;
       bi++;
     }
  }

  return result;
}

function sum(items) {
  var sum = 0;
  for (var i = 0; i < items.length; i++) {
    sum += items[i];
  }

  return sum;
}

function wordSimilarity(a, b) {
  var left   = tokenize(a);
  var right  = tokenize(b);
  var middle = intersect(left, right);

  return (2*middle.length) / (left.length + right.length);
}

function ipSimilarity(a, b) {
  var left  = a.split('.');
  var right = b.split('.');

  var diffs = [];
  for (var i = 0; i < 4; i++) {
    var diff1 = 255-left[i];
    var diff2 = 255-right[i];
    var diff  = Math.abs(diff2-diff1);

    diffs[i] = diff;
  }

  var distance = sum(diffs)/(255*4);

  return 1 - distance;
}

function ageSimilarity(a, b) {
  var maxAge   = 100;
  var diff1    = maxAge-a;
  var diff2    = maxAge-b;
  var diff     = Math.abs(diff2-diff1);
  var distance = diff / maxAge;

  return 1-distance;
}

function recordSimilarity(a, b) {
  var fields = [
    {name:'name', measure:wordSimilarity},
    {name:'age',  measure:ageSimilarity},
    {name:'pc',   measure:wordSimilarity},
    {name:'ip',   measure:ipSimilarity}
  ];

  var sum = 0;
  for (var i = 0; i < fields.length; i++) {
    var field   = fields[i];
    var name    = field.name;
    var measure = field.measure;
    var sim     = measure(a[name], b[name]);

    sum += sim;
  }

  return sum / fields.length;
}

function findMostSimilar(items, query) {
  var maxSim = 0;
  var result = null;

  for (var i = 0; i < items.length; i++) {
    var item = items[i];
    var sim  = recordSimilarity(item, query);

    if (sim > maxSim) {
      maxSim = sim;
      result = item;
    }
  }

  return result
}

var items = [
  { name: "Bill",   age: 10,  pc: "Mac",      ip: "68.23.13.8" },
  { name: "Alice",  age: 22,  pc: "Windows",  ip: "193.186.11.3" },
  { name: "Bob",    age: 12,  pc: "Windows",  ip: "56.89.22.1" }
];

var query  = { name: "Tom", age: 10, pc: "Mac", ip: "68.23.13.10" };
var result = findMostSimilar(items, query);

console.log(result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:11:18.953

一种直接的方法是计算两个文档之间的差异，差异越大，距离越大。您可以使用最大可能的差异对差异进行归一化，这应该为您提供可以相互比较的相对距离。

看看这个问题以计算 json 文档的差异。

[JSON 对象的增量编码](https://stackoverflow.com/questions/7326532/delta-encoding-for-json-objects)

# php - 一个简单的 php/mysql 脚本来管理文件夹访问？

> ID：14327475
> 
> 赞同：0
> 
> 时间：2013-01-14T21:56:28.427
> 
> 标签：php, mysql, apache

我需要一种允许客户端访问物理文件夹的解决方案。

我的第一个意图是通过使用 .htpasswd 文件手动控制它，但我很好奇你们中是否有人遇到过已经存在的解决方案。

允许管理员使用密码创建用户并为这些用户创建物理文件夹的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:58:11.827

我们有一个存储与用户相关的路径的应用程序。所以默认情况下所有路径都被阻止。但是我们授予每个用户访问表中路径的权限。然后，当访问页面时，我们检查数据库中是否有记录供用户访问该特定页面/路径。

在 Coldfusion 中，这可以在任何页面处理完成之前在 onRequest 方法中完成。我猜你可以在页面本身上做到这一点。您是在寻找插件还是只是一种方法？

# asp.net-mvc - 防止静态文件处理程序拦截类似文件名的 URL

> ID：14327476
> 
> 赞同：13
> 
> 时间：2013-01-14T21:56:36.360
> 
> 标签：asp.net-mvc, iis, asp.net-mvc-4, asp.net-mvc-routing

在我的 Web 应用程序中，我有一个如下所示的路由：

```
routeCollection.MapRoute(
    "AdfsMetadata",                                                // name
    "FederationMetadata/2007-06/FederationMetadata.xml",           // url
    new { controller = "AdfsController", action = "MetaData" });   // defaults 
```

这条路线背后的想法是更好地与 Microsoft AD FS 服务器 (2.0+) 一起工作，此时您只需指定主机名即可查找 AD FS 元数据。使用 MVC3 一切正常。但是我们最近将项目升级到了 MVC4，现在对该 URL 的调用导致 404，错误页面上提到的处理程序是`StaticFile`，物理路径是`D:\path\to\my\project\FederationMetadata\2007-06\FederationMetadata.xml`. 我假设 MVC 或 ASP.NET “认为”它必须是对静态文件的请求并查找文件，但它不是文件。数据是动态生成的——这就是我将 URL 路由到控制器操作的原因。问题是，即使是 Phil Haack 的 Route Debugger 也不起作用。除了 IIS 试图访问不存在的物理文件之外，它只是一个 404，没有其他信息。

有人对此有解决方案吗？我只想将此 URL 路由到控制器操作。

PS：我*不是 100%*确定原因是升级到 MVC4，这只是一个猜测，因为错误发生在升级的大约同一时间，并且相同的路线适用于仍在使用 MVC3 的另一个项目。

***编辑：***

我有一个自定义`ControllerFactory`需要完整的类名（`AdfsController`而不是`Adfs`），因此在这种情况下后缀`Controller`是正确的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-14T22:25:42.533

将以下内容添加到节点的`<handlers>`部分：`<system.webServer>`

```
<add 
    name="AdfsMetadata" 
    path="/FederationMetadata/2007-06/FederationMetadata.xml" 
    verb="GET" 
    type="System.Web.Handlers.TransferRequestHandler" 
    preCondition="integratedMode,runtimeVersionv4.0" /> 
```

这指示 IIS 对指定 url 的 GET 请求应由托管管道处理，而不是视为静态文件并由 IIS 直接提供服务。

> 我有一个自定义的 ControllerFactory，它需要完整的类名（AdfsController 而不是 Adfs），所以在这种情况下后缀 Controller 是正确的。

请仔细检查。`Controller`尝试在路由定义中使用和不使用后缀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T22:05:35.557

默认情况下，IIS 将该文件作为静态文件提供，而无需进入 ASP 管道，您是否可以将路由更改为没有 .xml 扩展名（至少您对此有特定要求不是必需的）

您可以像这样指定路线：

```
routeCollection.MapRoute(
"AdfsMetadata",                                                // name
"FederationMetadata/2007-06/FederationMetadata",               // url
new { controller = "AdfsController", action = "MetaData" });   // defaults 
```

其他解决方案是添加到您的 web.config

```
<modules runAllManagedModulesForAllRequests="true"> 
```

但我建议您尽可能避免这种情况，因为它的作用是阻止 IIS 提供所有静态文件

**编辑**最后一次尝试......该特定路径的自定义 http 处理程序将起作用。这篇[文章](http://www.hanselman.com/blog/BackToBasicsDynamicImageGenerationASPNETControllersRoutingIHttpHandlersAndRunAllManagedModulesForAllRequests.aspx)与您的问题类似，仅与图像有关（查找“更好：自定义 HttpHandlers”部分）

# javascript - jQuery检查目标是否为链接

> ID：14327489
> 
> 赞同：15
> 
> 时间：2013-01-14T21:57:08.600
> 
> 标签：javascript, click

我有一个捕获点击的全局函数。

```
$(document).click(function(e){
  //do something
  if(clickedOnLink)
    //do something
}); 
```

当目标是链接时，我想做一些额外的事情，但是如果`<a>`标签实际上围绕着一个 div（因为 HTML5 允许这样做），那么目标就是那个 div。

[http://jsfiddle.net/Af37v/](http://jsfiddle.net/Af37v/)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-14T22:03:27.973

您可以尝试查看您单击的元素是标签的子元素还是`<a>`标签的子元素。

```
$(document).click(function(e){
    if($(e.target).closest('a').length){
        alert('You clicked a link');
    }
    else{
        alert('You did not click a link');
    }
}); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-03-28T23:26:19.607

我相信 using`is`实际上会比建议的答案具有更好的性能`closest`：

```
$(e.target).is('a, a *'); 
```

这将检查元素本身是否为 an`a`或是否包含在`a`.

这应该更快，`closest`因为它将在元素本身上使用[匹配项](https://developer.mozilla.org/en-US/docs/Web/API/Element/matches)，并且不需要像`closest`将要那样遍历 DOM 树。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-14T22:03:25.447

试试这个

```
$(document).click(function(e){
  //do something
  if($(this).closest('a').length)
    //do something
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-22T04:28:42.620

如果确切的目标是链接，那么您可以使用[`.is()`](http://api.jquery.com/is/)

例子：

```
$(".element").on("click", function(e){
  if($(e.target).is("a")){
    //do your stuff
  }
}); 
```

**编辑：**

如果它被锚标签内的其他元素包围，那么您可以使用`closest()`并检查它是否有锚标签父或没有使用`length`

例子：

```
$(".element").on("click", function(e){
  if($(e.target).closest("a").length){
    //do your stuff
  }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T21:58:33.537

使用 jquery 只需获取 tagName 属性 $("a").prop("tagName");

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T22:06:33.733

更新：您可以检查目标是否为 a 或父级是否为 a。

```
$(function () {
    $(document).on('click', function (e) {
        $target = $(e.target);
        if ($target.closest('a').length > 0) {
            alert('i am an a');
        }
    });
}); 
```

[http://jsfiddle.net/8jeGV/4/](http://jsfiddle.net/8jeGV/4/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-14T22:30:31.180

您可以`<div>`通过`<a>`测试里面是否有任何东西来测试是否有底。如果里面什么都没有，或者没有，语句将返回。[`.children()`](http://api.jquery.com/children) `<div>``<div>``if``false`

我建议这段代码：

```
$(document).click(function(e){
    var willRedirect = ($('a[href="/"]').attr('href').indexOf('#') == -1 ? true : false),

    //run code

    if ( willRedirect === false ){
        e.preventDefault();

        //the link will not redirect

        if ( $(this).children('div').html() ){
            //there is a <div> inside <a> containing something
        }
        else {
            //there is no <div> inside <a>
        }
    }
    else {
        //the link is not pointing to your site
    }
}); 
```

# r - 缺少参数的函数

> ID：14327490
> 
> 赞同：0
> 
> 时间：2013-01-14T21:57:10.297
> 
> 标签：r

我的数据如下所示：

```
> x 

Date        Obs
1/1/2012     4
1/2/2012     40
1/3/2012     50 
```

和这样的功能：

```
myDat <- function(x, summarize) 
{
  if (summarize == T)
  {
    print(summary(x))
  }

  if (missing(summarize) | summarize == F)
  {
    print(x)
  }
} 
```

当我尝试将其运行为：

```
myDat(x) 
```

我收到此错误：

```
Error in summarize == T : 'summarize' is missing 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T22:15:03.127

为您的参数使用默认值，您`summarize`的函数将简化为一行：

```
myDat <- function(x, summarize=FALSE) { if (summarize) summary(x) else x} 
```

尝试一下：

```
head(myDat(iris))
  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa

myDat(iris, s=TRUE)
  Sepal.Length    Sepal.Width     Petal.Length    Petal.Width   
 Min.   :4.300   Min.   :2.000   Min.   :1.000   Min.   :0.100  
 1st Qu.:5.100   1st Qu.:2.800   1st Qu.:1.600   1st Qu.:0.300  
 Median :5.800   Median :3.000   Median :4.350   Median :1.300  
 Mean   :5.843   Mean   :3.057   Mean   :3.758   Mean   :1.199  
 3rd Qu.:6.400   3rd Qu.:3.300   3rd Qu.:5.100   3rd Qu.:1.800  
 Max.   :7.900   Max.   :4.400   Max.   :6.900   Max.   :2.500  
       Species  
 setosa    :50  
 versicolor:50  
 virginica :50 
```

# asp.net-mvc-4 - 在 ASP.Net MVC 4 中路由 Facebook AppRequests

> ID：14327491
> 
> 赞同：0
> 
> 时间：2013-01-14T21:57:22.330
> 
> 标签：asp.net-mvc-4, asp.net-mvc-routing, facebook-app-requests

我的移动网站允许用户向他们的 Facebook 朋友发送 AppRequest。这是有效的。

当朋友接受 AppRequest 时，Facebook 将朋友发送到我的网站。这也有效。

我的网站是一个 ASP.Net MVC 4 应用程序。我试图让我的路线识别传入的 AppRequest 接受，但我不知道该怎么做。

Facebook 正在使用此 URL 将朋友发送到我的网站：

> [http://www.example.com/?ref=notif&code=abcdefg&fb_source=notification](http://www.example.com/?ref=notif&code=abcdefg&fb_source=notification)

尽管我尝试将路由映射到自定义控制器和操作，但这仍然被路由到 Home/Index。这是我到目前为止所做的但未能奏效的事情：

**注册路线：**

```
routes.MapRoute(
   name: "FacebookAppRequest",
   url: "{ref}/{code}/{fb_source}",   //This should match the URL above
   defaults: new { controller = "Facebook", action ="FBAppRequestHandler"}
);
routes.MapRoute(
   name: "Default",
   url: "{controller}/{action}/{id}",
   defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

**控制器：**

```
public class FacebookController : Controller
{
   public FacebookController() {}

   public ActionResult FBAppRequestHandler(
      [Bind(Prefix = "ref")] string fbReferal,
      [Bind(Prefix = "code")] string fbCode,
      [Bind(Prefix = "fb_source")] string fbSource)
   {
      //Do some stuff with fbReferal, fbCode and fbSource

      return View();
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:01:55.973

the和 the`ref`作为查询字符串参数传递。它们不是路线的一部分。因此，您不可能期望这会与您的自定义路线相匹配。如果请求看起来像这样，情况就会如此：`code``fb_source``{ref}/{code}/{fb_source}`

```
http://www.example.com/notif/abcdefg/notification 
```

由于实际路由看起来像这样（忘记查询字符串参数 - 它们不用于路由）：

```
http://www.example.com/ 
```

您在这里所拥有的基本上就是以下网址`/`。因此，您希望在这里最好的方法是修改您的默认路由，使其路由到所需的控制器：

```
routes.MapRoute(
   name: "Default",
   url: "{controller}/{action}/{id}",
   defaults: new { controller = "Facebook", action = "FBAppRequestHandler", id = UrlParameter.Optional }
); 
```

现在摆脱第一条路线 - 没有必要。

# c# - 为什么这个查询会抛出异常？

> ID：14327492
> 
> 赞同：5
> 
> 时间：2013-01-14T21:57:24.310
> 
> 标签：c#, linq-to-sql

我有一个`User`表，其中有一`BIT NULL`列名为`NxEnabled`，我无法更改。一些记录实际上`NULL`在该列中包含 a。

我不想在 C# 中有 Nullable，因此将其与投影中的 true 进行比较是有意义的（代码已简化，但这会产生相同的错误）：

```
context.Users.Where(x => x.Id == 4)
             .Select(x => new 
                  { 
                      Id = x.Id,
                      Name = x.Name,
                      Enabled = x.NxEnabled == true
                  }); 
```

为什么这个查询会抛出一个

> InvalidOperationException：空值不能分配给 System.Boolean 类型的成员，该类型是不可为空的值类型。`

什么时候枚举？

编辑：抱歉错字。查询实际上更复杂，但 where 子句不是问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T22:02:51.323

当您与`true`您的`.IsEnabled`字段进行比较时，LINQ to SQL 将`true`作为参数传递给查询。问题在于翻译将返回`NULL`：

```
SELECT [t0].[Id], [t0].[Name],
    (CASE 
        WHEN [t0].[NxEnabled] = @p0 THEN 1
        WHEN NOT ([t0].[NxEnabled] = @p0) THEN 0
        ELSE NULL
     END) AS [Enabled]
FROM [Users] AS [t0] 
```

由于 SQL92 如何定义与 NULL 进行比较的方式，这两个`WHEN`条件都是错误的。[这篇博](http://blog.istepaniuk.com/linq-to-sql-nullable-types-null-comparison/)文中对此进行了解释[免责声明：该帖子是我的]

改为使用`Enabled = NxEnabled ?? false`作为解决方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:59:59.613

错字——你需要双等号`==`：

```
.Where(x => x.Id == 4) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T22:00:47.653

```
context.Users.Where(x => x.Id == 4)
             .Select(x => new Users()
                  { 
                      Id = x.Id,
                      Name = x.Name,
                      NxEnabled = x.NxEnabled ?? false
                  }); 
```

# windows - 如何在 WinJS 应用程序中将多个不同的 JSON 对象添加到单独的列表中？

> ID：14327499
> 
> 赞同：0
> 
> 时间：2013-01-14T21:58:00.553
> 
> 标签：windows, windows-8, winjs

我正在尝试创建一个包含各个部分的网格应用程序，并且每个部分都被提取到特定的列表视图但是我遇到了一个问题，您只能让一个列表视图覆盖整个页面，以便正确水平滚动列表中的对象意味着没有空间容纳另一个。这是我现在使用的代码：

```
WinJS.xhr({ url: "http://search.twitter.com/search.json?q=%23windows8&rpp=100}).then(

            function (response) {
                var json = JSON.parse(response.responseText.toString());
                var list = new WinJS.Binding.List(json.result);
                gridView1.winControl.itemDataSource = list.dataSource;

                //gridView1 is ID of listview 

            } 
```

使用上面的代码，我可以轻松地显示包含结果数组的对象网格，然后将它们绑定到列表。但是，现在我想要不同 URL 的多个类似列表视图，这些列表视图显示为 WinJS 网格应用程序中显示为默认界面的列表视图。

更清楚地说，这就是我想要的 - 使用 Twitter API URL1 在网格的第一部分中使用 Twitter 用户名，然后我希望在相邻网格中使用 twitter 搜索结果，因此我必须使用另一个列表视图 b 使用 URL2。

我如何找到解决此问题的方法。感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:56:35.407

是的，想出来自不同列表的所有不同项目的共同点并将您的数据投影到单个分组列表是一种选择。你可能不想放弃你想做的事情。如果您将多个 ListViews 放在一个包裹在 flexbox 中的页面上，那么滚动应该不会有任何问题。如果您在 ListView 演示中查看我的[codeSHOW](http://aka.ms/codeshowapp)应用程序，您会发现我有粗略的等价物。Windows 实际上非常聪明地处理平移的方式。

****编辑****

这是我所说的一个粗略的例子。[同样，您可以在codeSHOW](http://aka.ms/codeshowapp)的 ListView 演示中找到一个工作示例。

```
<!-- HTML snippet -->
<div class="hub">
  <div>
    <div id="list1" data-win-control="WinJS.UI.ListView"></div>
  </div>
  <div>
    <div id="list2" data-win-control="WinJS.UI.ListView"></div>
  </div>
  <div>
    <div id="list3" data-win-control="WinJS.UI.ListView"></div>
  </div>
</div>

/* CSS snippet */
.hub {
  display:-ms-flexbox; /* this will lay the lists out horizontally */
  overflow-x:auto; /* set the flexbox to scroll its overflow */
}

/* select each of the sections */
.hub > div {
  padding-right:80px; /* 80px of space between "sections" */
}

/* choose whatever sizes you want for your list views. You may want to make them wide
enough that they don't scroll because it can get a little awkward to have scrolling
within scrolling */
[data-win-control=WinJS.UI.ListView] {
  width: 640px;
  height: 480px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:10:30.117

您可以通过将结果集聚合到单个数据源中来解决此问题。

您可以通过将数据投入到`WinJS.Binding.List`已设置分组功能的数据中来做到这一点，并以您知道如何对它们进行分组的方式为您的数据分配属性。`WinJS.Binding.List`在执行文件/新建/项目时在 Visual Studio 中找到的“网格”模板中可以找到a 分组的示例。

或者，您可以构建自己的数据- MSDN 上有一个很好[的](http://msdn.microsoft.com/en-us/library/windows/apps/Hh770849.aspx)`VirtualizedDataSource`教程。

# objective-c - 如何在联系人（通讯录）中搜索公司记录 - Mountain Lion

> ID：14327502
> 
> 赞同：2
> 
> 时间：2013-01-14T21:58:07.797
> 
> 标签：objective-c, osx-mountain-lion, addressbook

您如何使用 Objective-C 在 Mountain Lion 中搜索联系人（又名地址簿），以找到`kABShowAsCompany`与当前人员记录具有相同公司名称的所有公司记录（即）？例如，如果我有公司“Acme Corp”的人员记录，我想查找名称为“Acme Corp”的所有公司记录。

我需要返回一个`NSArray`带有标志`kABShowAsCompany`且`kABOrganizationProperty`等于`kABOrganizationProperty`当前记录的记录。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:11:39.467

```
NSString* acmeCorpCompanyName = @"Acme Corp" ;

ABAddressBook* addressBook = [ABAddressBook sharedAddressBook] ;
ABSearchElement* isACompany = [ABPerson searchElementForProperty:kABPersonFlags  label:nil  key:nil  value:@(kABShowAsCompany)  comparison:kABEqual ] ;
ABSearchElement* nameIsAcmeCorp = [ABPerson searchElementForProperty:kABOrganizationProperty  label:nil  key:nil  value:acmeCorpCompanyName  comparison:kABEqualCaseInsensitive ] ;
ABSearchElement* isACompanyNamedAcmeCorp = [ABSearchElement searchElementForConjunction:kABSearchAnd  children:@[isACompany, nameIsAcmeCorp] ] ;
NSArray* foundCompanies = [addressBook recordsMatchingSearchElement:isACompanyNamedAcmeCorp] ; 
```

# ios - Xcode - 将日期选择器和时间选择器连接到同一个 NSDate

> ID：14327503
> 
> 赞同：1
> 
> 时间：2013-01-14T21:58:08.377
> 
> 标签：ios, objective-c, xcode, nsdate, uidatepicker

我有一个时间选择器和一个日期选择器。

如何在同一 NSDate 中获取日期中包含的时间？

我需要两个日期之间的时间（包括时间）如何？

我有获取日期之间时间的代码，我只需要帮助来包含时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T01:58:46.903

默认情况下，UIDatePicker 设置为允许用户选择日期和时间。`mode`可以设置为`Date`或`Time`。`Date and Time`只要您的 UIDatePicker 的模式设置为`Date and Time`，它将在链接的 NSDate 对象中设置日期和时间。

如果你**真的**想有两个单独的 UIDatePickers，一个设置为，另一个设置为`Date`，`Time`那么你需要将它们链接到两个不同的 NSDate 对象，然后使用代码将两个 NSDate 组合成一个 NSDate，使用类似于这里的代码[问题将日期和时间组合成一个 NSDate](https://stackoverflow.com/questions/5979462/problem-combining-a-date-and-a-time-into-a-single-nsdate)

# git - Git post-receive Host Key 验证失败

> ID：14327507
> 
> 赞同：1
> 
> 时间：2013-01-14T21:58:18.640
> 
> 标签：git, githooks

有 3 台服务器：本地、裸机、开发。

以下工作流程完美运行：

```
1\. Make my local changes 
2\. git push to Bare 
3\. ssh into Bare 
4\. $ ssh ip.of.Development.server "cd /path/to/Development/repo; git pull" 
```

这正是您所期望的，内容被拉到我的开发服务器上，显示在页面上，一切都很好。

但是，如果我将最后一行移到 Bare 上的 hooks/post-receive 文件，我会得到一个

```
remote: Host key verification failed. 
```

我可以毫无问题地从 Development SSH 到 Bare，并且无需使用密码（在设置 RSA 对之后）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T23:03:02.553

据我了解SSH，它不是可交换的——开发可以知道Bare（开发可以拥有Bare的公钥），而Bare可以不知道开发（Bare没有**开发**的公钥）。

我将验证 Bare 是否已正确设置为 SSH to Development。

# linux - openssl/RSA - 使用公钥解密

> ID：14327517
> 
> 赞同：9
> 
> 时间：2013-01-14T21:58:43.900
> 
> 标签：linux, openssl, rsa

我正在为我正在维护的运行 Linux 的小型设备确保软件更新程序的安全。我想生成更新包内容的 md5sum，然后用私钥加密该散列，然后再将其发送给客户。当他们加载更新时，设备应该解密哈希，验证它，然后继续安装包。

我正在尝试使用 OpenSSL 和 RSA 来做到这一点。我找到[了这个](https://stackoverflow.com/questions/11045956/openssl-decryption-using-a-public-key)线程，并气馁。然后我找到[了这个](https://stackoverflow.com/questions/12908825/rsa-decryption-using-the-public-key-in-perl)线程，想知道 Perl 是如何解决所谓的不可能的。我在 C 中执行此操作，所以 SSL 库中的某个地方可能有一个并行函数？

所以我的问题真的是：我可以强制命令行 Linux 将公钥作为解密输入，还是使用 C 来规避这个限制？

提前谢谢大家。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T22:24:54.670

假设您使用以下命令生成了一个公共和私有 RSA 密钥`openssl genrsa`：

```
$ openssl genrsa -out mykey
Generating RSA private key, 512 bit long modulus
...++++++++++++
..........++++++++++++
e is 65537 (0x10001)
$ openssl rsa -in mykey -pubout -out mykey.pub
writing RSA key 
```

你可以像这样用私钥签署一些东西：

```
$ md5sum myfile | openssl rsautl -inkey mykey -sign > checksum.signed 
```

您可以使用公钥验证此数据：

```
$ openssl rsautl -inkey mykey.pub -pubin -in checksum.signed
df713741d8e92b15977ccd6e019730a5  myfile 
```

这是你要找的吗？

# jquery - jQuery单击事件未在表单提交时触发？

> ID：14327522
> 
> 赞同：0
> 
> 时间：2013-01-14T21:58:53.603
> 
> 标签：jquery, html, windows-8

我不确定出了什么问题，但每次我的点击事件都不会触发。淡入淡出功能有问题吗？我尝试更改`.click`为`.live`并且`.on`出现了同样的问题。

这是我的代码：

```
$('#form').submit(function (ev) {
     ev.preventDefault();                
     $('#wrapper').html(html).scrollTop(0);              
     $('#base').fadeIn('slow', function () { 
          document.onkeydown = docOnKeydown; 
     }).click(function () {
          alert('Click Fired');
     });
     return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:03:36.153

如果你想触发点击你应该使用“触发”功能 - [http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

```
$('#base').fadeIn('slow', function () { document.onkeydown = docOnKeydown; })
            .click(function () {
              alert('Click Fired');
            });
$('#base').trigger('click'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:13:37.780

如果您希望简单地将事件处理程序添加到相关对象：

```
$('#base').click(function () {
   alert('Click Fired');
}).fadeIn('slow', function () { document.onkeydown = docOnKeydown; }); 
```

淡入淡出后触发点击事件？

```
$('#base').fadeIn('slow', function () {
    document.onkeydown = docOnKeydown; 
    $(this).trigger('click');
}); 
```

触发点击 I（可能在淡入淡出时）

```
$('#base').fadeIn('slow', function () {
    document.onkeydown = docOnKeydown; 
 }).trigger('click'); 
```

编辑：添加其余部分时的处理程序

```
$(document).on('click','#base',function () {
  alert('Click Fired');
});
$('#form').submit(function (ev) {
  ev.preventDefault();
  $('#wrapper').html(html).scrollTop(0);
  $('#base').fadeIn('slow', function () {
    document.onkeydown = docOnKeydown;
  });
  return false;
}); 
```

更好：如果基础有容器，则用于处理程序。出于性能原因，将其标记为比文档更“本地”。

```
$('#basecontainer').on('click','#base',function () {
  alert('Click Fired');
}); 
```

基于评论编辑：“它已经存在”这也应该在 DOM 上工作并且更简单：

```
$('#base').click(function () {
  alert('Click Fired');
});
$('#form').submit(function (ev) {
  ev.preventDefault();
  $('#wrapper').html(html).scrollTop(0);
  $('#base').fadeIn('slow', function () {
    document.onkeydown = docOnKeydown;
  });
  return false;
}); 
```

# mysql - mysql查询使用聚合函数来选择字段值

> ID：14327523
> 
> 赞同：0
> 
> 时间：2013-01-14T21:59:07.727
> 
> 标签：mysql, aggregate

MySQL 5.5.29 这是我正在处理但没有成功的 mysql 查询：

```
SELECT ID, Bike, 
(SELECT IF( MIN( ABS( DATEDIFF(  '2011-1-1', Reading_Date ) ) ) = ABS( DATEDIFF(  '2011-1-1', Reading_Date ) ) , Reading_Date, NULL ) FROM odometer WHERE Bike=10  ) AS StartDate, 
(SELECT IF( MIN( ABS( DATEDIFF(  '2011-1-1', Reading_Date ) ) ) = ABS( DATEDIFF(  '2011-1-1', Reading_Date ) ) , Miles, NULL ) FROM odometer WHERE Bike=10  ) AS BeginMiles, 
(SELECT IF( MIN( ABS( DATEDIFF(  '2012-1-1', Reading_Date ) ) ) = ABS( DATEDIFF(  '2012-1-1', Reading_Date ) ) , Reading_Date, NULL ) FROM odometer  WHERE Bike=10  ) AS EndDate,
(SELECT IF( MIN( ABS( DATEDIFF(  '2012-1-1', Reading_Date ) ) ) = ABS( DATEDIFF(  '2012-1-1', Reading_Date ) ) , Miles, NULL ) FROM odometer WHERE Bike=10  ) AS EndMiles
FROM  `odometer` 
WHERE Bike =10; 
```

结果是：

```
ID  Bike    StartDate   BeginMiles  EndDate EndMiles
14  10 [->] 2011-04-15  27.0    NULL    NULL
15  10 [->] 2011-04-15  27.0    NULL    NULL
16  10 [->] 2011-04-15  27.0    NULL    NULL 
```

摩托车车主每年在 1 月 1 日或附近输入一次里程表读数。我想计算摩托车的总里程。

里程表中的数据如下所示：（ [来源：][[bmwmcindy.org](http://bmwmcindy.org/so/Grid011.png)][）][![](../Images/4d3083b386b8b110a159dfb138f9c4d1.png)](https://i.stack.imgur.com/EYBkC.png)

因此，要计算这辆自行车 2011 年的里程数，我需要确定哪些记录更接近 2011 年 1 月 1 日，即记录 14。起始里程数为 27。我需要找到最接近 1 月 1 日的记录, 2012 年，这是记录 15。2011 年的结束里程为 10657（这也是计算 2012 年时的起始里程表读数。

这是表格：

```
DROP TABLE IF EXISTS `odometer`;
CREATE TABLE IF NOT EXISTS `odometer` (
  `ID` int(3) NOT NULL AUTO_INCREMENT,
  `Bike` int(3) NOT NULL,
  `is_MOA` tinyint(1) NOT NULL,
  `Reading_Date` date NOT NULL,
  `Miles` decimal(8,1) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `Bike` (`Bike`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=22 ; 
```

表格数据`odometer`

```
INSERT INTO `odometer` (`ID`, `Bike`, `is_MOA`, `Reading_Date`, `Miles`) VALUES
(1, 1, 0, '2012-01-01', 5999.0),
(2, 6, 0, '2013-02-01', 14000.0),
(3, 7, 0, '2013-03-01', 53000.2),
(6, 1, 1, '2012-04-30', 10001.0),
(7, 1, 0, '2013-01-04', 31000.0),
(14, 10, 0, '2011-04-15', 27.0),
(15, 10, 0, '2011-12-31', 10657.0),
(16, 10, 0, '2012-12-31', 20731.0),
(19, 1, 1, '2012-09-30', 20000.0),
(20, 6, 0, '2011-12-31', 7000.0),
(21, 7, 0, '2012-01-03', 23000.0); 
```

我正在尝试从不同的记录中获取日期和英里数，以便我可以从结束英里数中减去开始英里数，以获得特定年份（在本例中为 2011 年）的特定自行车（在示例中 Bike=10）的总英里数。

我已经阅读了很多关于聚合函数和从正确记录中获取值的问题。我认为答案在子查询中。但是当尝试上面的查询时，我只从第一条记录中获取数据。在这种情况下，结束里程应来自第二条记录。

我希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:45:21.337

里程应该会稳步增加。如果这样的事情有效，那就太好了：

```
select year(Reading_Date) as yr,
        max(miles) - min(miles) as MilesInYear
from odometer o
where bike = 10
group by year(reading_date) 
```

唉，你的逻辑真的比你想象的要难。这在 SQL Server 2012 或 Oracle 等具有`lead`和`lag`功能的数据库中会更容易。

我的方法是找出每年的第一次和最后一次阅读日期。您可以使用相关子查询来计算：

```
select o.*,
       (select max(date) from odometer o2 where o.bike = o2.bike and o2.date <= o.date - dayofyear(o.date) + 1
       ) ReadDateForYear
from odometer o 
```

接下来，在自行车和年份级别上进行总结。如果一年或年初之前没有读取日期，请使用第一个日期：

```
select bike, year(date) as yr,
       coalesce(min(ReadDateForYear), min(date)) as FirstReadDate,
       coalesce(min(ReadDateForNextYear), max(date)) as LastReadDate
from (select o.*,
             (select max(date) from odometer o2 where o.bike = o2.bike and o2.date <= o.date - dayofyear(o.date) + 1
             ) ReadDateForYear,
             (select max(date) from odometer o2 where o.bike = o2.bike and o2.date <= date_add(o.date -      dayofyear(0.date) + 1 + interval 1 year)
             ) ReadDateForNextYear
      from odometer o
     ) o
group by bike, year(date) 
```

让我称之为。要获得最终结果，您需要以下内容：

```
select the fields you need
from <q> q join
     odometer s
     on s.bike = q.bike and year(s.date) = q.year join
     odometer e
     on s.bike = q.bike and year(e.date) = q.year 
```

注意：此 SQL 未经测试。我确定存在语法错误。

# xml - 如何从特定节点读取信息

> ID：14327535
> 
> 赞同：0
> 
> 时间：2013-01-14T22:00:07.853
> 
> 标签：xml, vbscript, nodes

给定以下 XML 文件：

```
 <packages>
 <package name="Library">
 <distributionPoints>
  <distributionPoint path="http://SERVER001/SMS_DP_SMSPKGD$/CEN0003B/" /> 
  <distributionPoint path="http://SERVER002/SMS_DP_SMSPKGD$/CEN0003B/" /> 
  </distributionPoints>

 <package name="SystemFiles">
 <distributionPoints>
  <distributionPoint path="http://SERVER001/SMS_DP_SMSPKGD$/CEN00262/" /> 
  <distributionPoint path="http://SERVER002/SMS_DP_SMSPKGD$/CEN00262/" /> 
  </distributionPoints>
  </package>
</packages> 
```

我正在调用以下函数以从“SystemFiles”节点检索信息：“http://SERVER001/SMS_DP_SMSPKGD$/CEN00262/”“http://SERVER002/SMS_DP_SMSPKGD$/CEN00262/”

我能够检索节点“SystemFiles”，但在尝试从其中检索信息时遇到问题。这是我的功能：

```
Function GetDistributionPath(packageName)
  Dim foundPackageName
  foundPackageName = false

  Set objXml = CreateObject("Microsoft.XMLDOM")
  If objXml.Load("Package.xml") Then
     WScript.Echo "loaded successfully."
  Else
     WScript.Echo "I was not able to load XML doc Package.xml!"
     WScript.Quit(1)
  End If

  Set packageNodes = objXml.documentElement.SelectNodes("//package")

  For Each packageNode in packageNodes
    If Not IsNull(packageNode.getAttribute("name"))  Then
          name = packageNode.getAttribute("name")
    End If

    If name = packageName Then
       foundPackageName = true

       'Get the DistributionPoint Paths
       'THIS CODE BELOW IS NOT WORKING <===== 

       'Set distributionPointNodes = packageNode.SelectNodes("//distributionPoint")
       'For Each distributionPointNode in distributionPointNodes
       '    distributionPointName = distributionPointNode.getAttribute("path")
       '    WScript.Echo "path: " & distributionPointName
       'Next

       Exit For
    End If
  Next
  Set objXml = Nothing

  If Not foundPackageName Then
    WScript.Echo "I could not find package name " & packageName & " in Package.xml!"
    WScript.Quit(1)
  End If   
End Function

'Other approache did not work as well
'Set objNode = objXml.selectSingleNode("packages/package[@name='SystemFiles']")
'WScript.Echo "Path: " & objNode.getAttribute("path") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:09:32.510

您发布的 .XML 格式不正确（缺少`</package>`）。你没有说标准策略是什么方式：

```
 Dim oFS    : Set oFS  = CreateObject("Scripting.FileSystemObject")
  Dim sFSpec : sFSpec   = oFS.GetAbsolutePathName("..\data\01.xml")
  Dim oXML   : Set oXML = CreateObject("Msxml2.DOMDocument")
  oXML.setProperty "SelectionLanguage", "XPath"
  oXML.async = False
  oXML.load sFSpec
  If 0 = oXML.parseError Then
     WScript.Echo oXML.xml
     WScript.Echo "-----------------"
     Dim sXPath : sXPath    = "/packages/package[@name='SystemFiles']"
     Dim ndFnd  : Set ndFnd = oXML.selectSingleNode(sXPath)
     If ndFnd Is Nothing Then
        WScript.Echo sXPath, "not found"
     Else
        WScript.Echo ndFnd.nodeName, ndFnd.getAttribute("name")
        WScript.Echo "-----------------"
        sXPath = "distributionPoints/distributionPoint"
        Dim ndlPoint  : Set ndlPoint = ndFnd.SelectNodes(sXPath)
        If 0 < ndlPoint.length Then
           Dim ndPath
           For Each ndPath In ndlPoint
               WScript.Echo ndPath.getAttribute("path")
           Next
        Else
           WScript.Echo sXPath, "not found"
        End If
     End If
  Else
     WScript.Echo oXML.parseError.reason
  End If 
```

输出：

```
<packages>
        <package name="Library">
                <distributionPoints>
                        <distributionPoint path="http://SERVER001/SMS_DP_SMSPKGD$/CEN0003B/"/>
                        <distributionPoint path="http://SERVER002/SMS_DP_SMSPKGD$/CEN0003B/"/>
                </distributionPoints>
        </package>
        <package name="SystemFiles">
                <distributionPoints>
                        <distributionPoint path="http://SERVER001/SMS_DP_SMSPKGD$/CEN00262/"/>
                        <distributionPoint path="http://SERVER002/SMS_DP_SMSPKGD$/CEN00262/"/>
                </distributionPoints>
        </package>
</packages>

-----------------
package SystemFiles
-----------------
http://SERVER001/SMS_DP_SMSPKGD$/CEN00262/
http://SERVER002/SMS_DP_SMSPKGD$/CEN00262/ 
```

不适合你。所以你必须检查自己，你的变通方法离开了美德之路。

# ruby-on-rails - 运行 RSpec - Factory Girl 锁定并且无法运行 - Rails Sandbox

> ID：14327538
> 
> 赞同：0
> 
> 时间：2013-01-14T22:00:25.623
> 
> 标签：ruby-on-rails, rspec, factory-bot, sandbox

只是想为其他像我一样不熟悉工厂女孩的人发布我发现的关于工厂女孩的快速信息。此解决方案的用例可能有限，但值得发布。

我在其中一个项目中为控制器运行 rspec，由于某种原因，某些测试无法运行。不是全部，只是一些。我尝试删除该测试文件中的所有内容并运行它 - 它成功找到了 0 个示例，因此很明显正在读取该文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:00:25.623

解决方案最终很简单：我在测试环境中有一个 rails 控制台，沙箱环境正在运行（您可以使用“rails c test”开始它并为沙箱模式添加 -s 标志，供您自己参考）。当您让 Factory Girl 更改沙盒环境时，在终止沙盒会话之前在应用程序的其他任何位置运行 Factory Girl 会导致它锁定。

对我来说，它在后台运行，因为我之前让它运行并使用 ctrl + z 停止它。解决方案是简单地使用终止 rails 控制台进程

```
ps aux | grep rails 
```

并使用 pid（例如 1234）

```
sudo kill -9 1234 
```

我可以假设无论您是否使用 Factory Girl，都可能会发生类似的问题，并且在您对沙箱进行更改时会出现更多问题，但是这个问题。

编辑：我已经确认这只是一个 FactoryGirl 问题 - 通过 Rails 控制台中的其他方式创建条目（例如），即使 Rails 沙箱正在运行 Factory Girl 更改，也不会导致问题。基本上，这个问题只有在你在一个 rails c 测试沙箱中运行 Factory Girl 时才会出现，然后据我所知尝试在其他地方运行 Factory Girl。

# python - 从 Google App Engine 迁移到 Heroku

> ID：14327541
> 
> 赞同：1
> 
> 时间：2013-01-14T22:00:29.780
> 
> 标签：python, google-app-engine, heroku, google-cloud-datastore

我正在将我的 python 应用程序从 Google App Engine 迁移到 Heroku。我已经设法让 webapp2（谷歌应用引擎的默认请求处理程序）工作。

我遇到的问题是数据库。在 GAE 中，我使用的是内置的 Datastore，我的应用程序包含所有数据库语法。但是在迁移到 Heroku 之后，我有很多数据库选择作为“插件”。

我想知道，我应该在 Heroku 中选择哪个数据库，**它最类似于 Google App 引擎的数据存储**区，这样我就必须**在我的应用程序中更改最少的代码。**

作为参考，这里的链接显示了 Heroku 上可供选择的大量数据库选项：[Heroku 数据库插件。](https://addons.heroku.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:38:05.620

像 Cassandra 之类的东西：[https](https://addons.heroku.com/cassandraio) : //addons.heroku.com/cassandraio 在性能上最接近 GAE 数据存储，因为它具有列结构的性质。

但是，根据您的使用模式以及您对类 Django API 的坚持程度，从代码角度切换到任何标准数据存储（Postgres、ClearDB MySQL）的工作量都差不多。

# python - 线程和 tkinter

> ID：14327542
> 
> 赞同：0
> 
> 时间：2013-01-14T22:00:37.523
> 
> 标签：python, multithreading, tkinter, python-imaging-library

我正在制作一个用于介绍 CS 课程的图像处理类，使用 PIL 进行图像处理，使用 Tkinter 显示图片。为了让用户在操作图片时能够看到图片，我让图形操作在单独的线程上运行，使用类似于[这个问题](https://stackoverflow.com/questions/1198262/tkinter-locks-python-when-icon-loaded-and-tk-mainloop-in-a-thread)的代码。这似乎有效（即没有崩溃），但我无法显示图像——Tk 正在启动，但没有出现任何窗口。代码如下所示：

```
self.root = Tk.Toplevel()
self.frame = tk.Frame(self.root, width=self.image.size[0], height=self.image.size[1])
img = ImageTk.PhotoImage(self.image)
self.label = tk.Label(self.frame, image=img)
self.label.image = img
self.label.pack()
self.frame.pack()
tick()
self.root.mainloop() 
```

该`tick`功能类似于链接问题中的功能。我怀疑我的问题是由于对 Tkinter 的误解，但我真的不知道。

此外，我似乎无法让程序很好地退出——即使我`daemon=True`在构建`Thread`运行它的程序时进行了设置，我仍然必须`C-c`在完成时点击。这看起来有点难看，我不想用虚假的错误信息来打扰学生。

编辑：这是更多代码。

```
class Picture():

    ##
    # Constructor. Creates Picture either by passing in the path of an image file as param
    # or by passing in a tuple in the format of (x, y) to indicate the size of a blank image. 
    # Example 1: Picture("image.jpg") constructs Picture with image.jpg 
    # Example 2: Picture((500, 500)) constructs Picture with a blank image of size 500*500
    def __init__(self, param):
        # Check if parameter is the right type, because we can't
        # overload functions
        if isinstance(param, tuple) and len(param) == 2:
            self.image = Image.new('RGB', (param))
        elif isinstance(param, str):
            self.image = Image.open(param)
        else:
            raise TypeError('Parameter to Picture() should be a string or 2-tuple!')
        # Default values for pen
        self.pen_color = (0, 0, 0)
        self.pen_position = (0, 0)
        self.pen_width = 1.0
        self.pen_rotation = 0
        # Pixel data of the image
        self.pixel = self.image.load()
        # Draw object of the image
        self.draw = ImageDraw.Draw(self.image)
        # The main window, and associated widgets.
        self.root = None
        self.label = None
        self.frame = None
        # Threading support, so that we can show the image while
        # continuing to draw on it.
        self.request_queue = queue.Queue()
        self.result_queue = queue.Queue()
        self.thread = threading.Thread(target=self._thread_main)
        self.thread.start()

    def _thread_main(self):
        """
        Runs the main Tkinter loop, as well as setting up all the
        necessary GUI widgets and whatnot. By running Tkinter on
        a separate thread, we can keep the picture displaying
        even after the user's program is finished drawing on it.
        """
        def tick():
            """
            Called whenever Tk's main loop is idle. This lets us perform
            drawing operations on the right thread.
            """
            try:
                f, args, kwargs = self.request_queue.get_nowait()
            except queue.Empty:
                pass
            else:
                value = f(*args, **kwargs)
                self.result_queue.put(value)
            self.root.after_idle(tick)
        self.root = tk.Toplevel()
        self.frame = tk.Frame(self.root, width=self.image.size[0], height=self.image.size[1])
        img = ImageTk.PhotoImage(self.image)
        self.label = tk.Label(self.frame, image=img)
        # This line ensures that Python doesn't try to garbage collect
        # our photo, due to a bug in Tk.
        self.label.image = img
        self.label.pack()
        self.frame.pack()
        tick()
        self.root.mainloop()

    def _submit_operation(self, f, *args, **kwargs):
        """
        Submits an operation to the request queue. The arguments
        should consist of a function, any positional arguments
        to said function, and any keyword arguments to the function.
        If f returns a value, that value will be returned.

        Any function that does something with the picture (i.e.,
        saving it, drawing to it, reading from it, etc.) should
        be called only by submitting it to the queue.
        """
        self.request_queue.put((f, args, kwargs))
        return self.result_queue.get()

    ##
    # Display the picture.
    def display(self):
        def display_func():
            img = ImageTk.PhotoImage(self.image)
            self.label.configure(image=img)
            self.label.image = img
            self.label.pack()
            self.frame.pack()
        self._submit_operation(display_func) 
```

# python - Python Socket：无限循环套接字绑定，监听会不会导致内存溢出？

> ID：14327544
> 
> 赞同：3
> 
> 时间：2013-01-14T22:00:46.370
> 
> 标签：python, loops

```
import socket
import sys
import binascii
import datetime
import time

try:
    port = 2122
    host = ''

except IndexError:
    print ("Error: ")
    print ("Be sure to specify username, password, port, database name and table name.\n")
    print ("Syntax: ./script.py username password port db_name table_name.")
    print ("Example: ./script.py hank mypass 8762 testdb test_table")
    print ("\nExit...")
    sys.exit(1)

while 1:
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    s.bind((host, port))
    s.listen(5)
    c, addr = s.accept()
    print ('Connected by', addr)
    data = c.recv(1042)
    s=binascii.hexlify(data)
    print(s)
    data = None
    c.close() 
    time.sleep(1)   
print('Exited!') 
```

以上是我在无限循环中的编码，以保持监听客户端，等待客户端发送数据并打印它。就这样。这种写法会不会导致内存泛滥？因为保持打开套接字并以无限循环关闭！。

P/S：我试过一次绑定和监听套接字，只用.recv循环，但它不起作用。只能接收一次数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:39:10.443

如果“内存泛滥”是指“内存泄漏”，那么不，这里没有内存泄漏。

每次通过循环，一旦重新分配`s`和`c`，您就没有其他对先前值的引用，因此它们将被垃圾收集。在 CPython 中，这应该立即发生；在其他实现（PyPy、Jython、IronPython）中，它会在某个不可预测的点发生。

但是，您可能会遇到文件句柄问题。那个“一些不可预测的点”是由你清理内存的需要驱动的。如果你有其他资源需要比内存更积极地清理，你不能依赖 GC 来为你做这件事。而套接字（文件句柄）正是这样一种资源。您不希望有 25000 个未使用的套接字，因为它们只使用 500KB 的内存，所以 GC 没有触及它们。

`c.close()`您每次都通过循环显式调用；你应该对`s`. 或者，更好的是，使用`with:`块。

话虽如此，这是一个非常奇怪的设计；仅仅因为它不泄漏内存并不意味着它是你真正想要做的事情。

# python - 在 for 循环中创建新数组（Python）

> ID：14327548
> 
> 赞同：1
> 
> 时间：2013-01-14T22:00:59.837
> 
> 标签：python, arrays, rpy2

我正在准备一个数据集以在程序 rpy（R，它在 Python 中运行）中运行以进行统计分析。它看起来像这样：

```
data = [[0, 1, 0, 0, 0, 0, 0, 1, 0, 0], [0, 0, 1, 0, 0, 1, 0, 0, 0, 0], 
[0, 1, 1, 0, 0, 0, 0, 0, 0, 1], [1, 0, 0, 0, 1, 0, 0, 0, 0, 1],
[0, 0, 1, 1, , 0, 0, 0, 0, 0], [0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
[1, 0, 0, 0, 0, 0, 0, 1, 0, 0], [0, 1, 0, 0, 0, 1, 0, 0, 0, 0], 
[0, 0, 0, 0, 1, 0, 0, 0, 1, 0]] 
```

为了让我使用这些数据，我需要将因变量 (y) 与独立变量 (x) 隔离开来。我需要为每一列创建一个新列表，如下所示：

```
y = data[:,9]
x1 = data[:,0]
x2 = data[:,1]
x3 = data[:,2]
x4 = data[:,3]
x5 = data[:,4]
x6 = data[:,5]
x7 = data[:,6]
x8 = data[:,7]
x9 = data[:,8]
x10 = data[:,9] 
```

假设我的数据有 67 列。有没有一种方法可以循环遍历所有列并自动创建每一列而无需输入所有列？我不想硬编码最多 67 个数组。

类似这样的东西，但它不起作用：

```
i=0
for d in data:
    "x%d"%i = data[:,i-1]
    i+=1 
```

这是代码的其余部分：

```
rpy.set_default_mode(rpy.NO_CONVERSION)
linear_model = rpy.r.lm(rpy.r("y ~ x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x9 + x10"), data = rpy.r.data_frame(x1=x1,x2=x2,x3=x3,x4=x4,x5=x5,x6=x6,x7=x7,x8=x8,x9=x9,x10=x10,y=y))
rpy.set_default_mode(rpy.BASIC_CONVERSION)
print linear_model.as_py()['coefficients']
summary = rpy.r.summary(linear_model) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T22:18:05.803

为什么不尝试这样的事情来转置列：

```
x = []

for d in xrange(0,66):
    x.append(data[:,d]) 
```

除非每个项目都有一个单独的数据结构是绝对必要的，尽管我不知道为什么你需要单独的数据结构......

编辑：如果不是这里的东西应该完全按照你描述的方式工作：

```
for d in xrange(1,68):
    exec 'x%s = data[:,%s]' %(d,d-1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:54:35.410

当您展示一点 rpy 代码时，我想我可以展示它在 rpy2 中的样子。

```
# build a DataFrame
from rpy2.robjects.vectors import IntVector
d = dict(('x%i' % (i+1), IntVector(data[:, i]) for i in range(68) if i != 9)
d['y'] = data[:, 9]
from rpy2.robjects.vectors import DataFrame
dataf = DataFrame(d)
del(d) # dictionary no longer needed

# import R's stats package
from rpy2.robjects.packages import importr
stats = importr('stats')

# fit model
dep_var = 'y'
formula = '%s ~ %s ' % (dep_var, '+'.join(x for x in dataf.names if x != dep_var))
linear_model = stats.lm(formula, data = dataf) 
```

# jquery - 需要让这个 JQuery 图像滑块在鼠标悬停时暂停

> ID：14327550
> 
> 赞同：-1
> 
> 时间：2013-01-14T22:01:02.457
> 
> 标签：jquery, mouseover

我希望幻灯片在鼠标悬停时暂停，然后在用户将鼠标从图像上移开时重新开始。我想出了临时的方法，但如果你在图像上鼠标打开和关闭的速度太快，它会导致图像的时间变得疯狂。

```
function theRotator() {
//Set the opacity of all images to 0
$('div.rotator ul li').css({opacity: 0.0});

//Get the first image and display it (gets set to full opacity)
$('div.rotator ul li:first').css({opacity: 1.0});

//Call the rotator function to run the slideshow, 6000 = change to next image after 6 seconds

setInterval('rotate()',6000);
}
function rotate() { 
//Get the first image
var current = ($('div.rotator ul li.show')?  $('div.rotator ul li.show') : $('div.rotator ul li:first'));

if ( current.length == 0 ) current = $('div.rotator ul li:first');

//Get next image, when it reaches the end, rotate it back to the first image
var next = ((current.next().length) ? ((current.next().hasClass('show')) ? $('div.rotator ul li:first') :current.next()) : $('div.rotator ul li:first'));

//Set the fade in effect for the next image, the show class has higher z-index
next.css({opacity: 0.0})
.addClass('show')
.animate({opacity: 1.0}, 1000);

//Hide the current image
current.animate({opacity: 0.0}, 1000)
.removeClass('show');

};

$(document).ready(function() {      
//Load the slideshow
theRotator();
$('div.rotator').fadeIn(1000);
$('div.rotator ul li').fadeIn(1000); // tweek for IE
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:20:04.883

您应该收听`mouseenter`and`mouseleave`事件，然后停止并重新开始您的间隔。

假设您有一些代码，例如

```
<script>
    // Declare the var that will keep reference of the setInterval
    intervalPlay = false;
</script>

<div id="yourSliderContainer">
    // your slide content
</div> 
```

当鼠标进入 div 时，您应该停止 setInterval

```
$("#yourSliderContainer").mouseenter(function(mouseEvent) {

    // Stop the setInterval if existing
    if (intervalPlay != false)
    {
        clearInterval(intervalPlay);
        intervalPlay = false;
    }
});

$("#yourSliderContainer").mouseleave(function(mouseEvent) {

    // Restart the setInterval
    if (intervalPlay == false)
        intervalPlay = setInterval('rotate()',6000);
}); 
```

注意：也许你的幻灯片的时间很疯狂，因为你没有停止 setInterval，而是重新创建，所以一段时间后你有很多间隔运行。

有关更多信息，请参见此处：[clearInterval](http://www.w3schools.com/jsref/met_win_clearinterval.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:16:42.010

谢谢大家的帮助！这是其他人找到此线程的代码。下面的代码暂停 mouseenter 上的滑块并启动它是否在 mouseleave 上没有任何问题（这是我在编辑启动和停止代码之前获得代码的网站） [http://www.alohatechsupport.net/webdesignmaui /maui-web-site-design/easy_jquery_auto_image_rotator.html](http://www.alohatechsupport.net/webdesignmaui/maui-web-site-design/easy_jquery_auto_image_rotator.html)

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery        /1.3.2    /jquery.min.js"></script>
<script type="text/javascript">
var myInterval = 5000;
var intervalPlay = true;

$('div.rotator').mouseenter(function(mouseEvent) {
// Stop the setInterval if existing

if (intervalPlay != false)
{
    clearInterval(myInterval);
    //$(".show").stop();
    intervalPlay = false;
}
});

$("div.rotator").mouseleave(function(mouseEvent) {
// Restart the setInterval
if (intervalPlay == false)
    intervalPlay = true;
});

function theRotator() {
//Set the opacity of all images to 0
$('div.rotator ul li').css({opacity: 0.0});

//Get the first image and display it (gets set to full opacity)
$('div.rotator ul li:first').css({opacity: 1.0});

//Call the rotator function to run the slideshow, 10000 = change to next image      after 6 seconds

setInterval('rotate()',myInterval); 
    }

    function rotate() {
if (intervalPlay == true){
//Get the first image
var current = ($('div.rotator ul li.show')?  $('div.rotator ul li.show') :        $('div.rotator ul li:first'));

    if ( current.length == 0 ) current = $('div.rotator ul li:first');

//Get next image, when it reaches the end, rotate it back to the first image

    console.log(intervalPlay);
   console.log(myInterval);
 var next = ((current.next().length) ? ((current.next().hasClass('show')) ?      $('div.rotator ul li:first') :current.next()) : $('div.rotator ul li:first'));

//Set the fade in effect for the next image, the show class has higher z-index
next.css({opacity: 0.0})
.addClass('show')
.animate({opacity: 1.0}, 1000);

//Hide the current image
current.animate({opacity: 0.0}, 1000)
.removeClass('show');

}
 };

 $(document).ready(function() {     
//Load the slideshow
 theRotator();
$('div.rotator').fadeIn(1000);
$('div.rotator ul li').fadeIn(1000); // tweek for IE
});

</script> 
```

# django - Django 更新模型表单

> ID：14327551
> 
> 赞同：1
> 
> 时间：2013-01-14T22:01:04.037
> 
> 标签：django, django-forms, django-views

我有一个模型：

```
class UserPreferencesForm(ModelForm):
    """
    Form for storing user preferences.
    """
    class Meta:
        model = UserPreferences
        exclude = ('user') 
```

该模型：

```
class UserPreferences(models.Model):
    """
    Model for user project preferences.
    """
    user = models.OneToOneField(User)
    ... 
```

在意见中：

```
 ...
    form = UserPreferencesForm(request.POST or None)
    if form.is_valid():
        # save the form
        prefs = form.save(commit=False)
        prefs.user = request.user
        prefs.update()
        messages.add_message(
            request, messages.INFO, 'Your preferences have been updated.'
        )
    ... 
```

我想确保每个用户只有一组偏好，所以我想重构视图代码以使用`update()`模型方法中的某些内容，而不是检查对象是否存在然后保存，这会导致更多查询。

“创建或更新”模型的最有效方法是什么？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:12:57.143

您是否有兴趣保存查询以检测行是否存在？

在这种情况下，您可以按照您的描述进行操作。进行更新并检查是否更新了 0 行，这意味着配置文件不存在。

```
updated = Preferences.objects.filter(user=request.user).update(**form.cleaned_data)
if updated == 0:
    # create preference object 
```

`models.signals.post_save`但更简单的设计模式是通过监听类发送的信号来确保每个用户始终有一个偏好表`User`。

然后，您可以假设它始终存在。

```
def create_prefs(sender, instance, created, **kwargs):
     if created:
         # create prefs

models.signals.post_save.connect(create_prefs, sender=User) 
```

# php - 将显示的 MySQL 结果链接到特定的 MySQL 搜索

> ID：14327554
> 
> 赞同：0
> 
> 时间：2013-01-14T22:01:08.040
> 
> 标签：php, html, mysql

我有一个数据库，用户可以使用 5 个不同的字段进行搜索。提供的信息越多，搜索就越具体。然而，提供的信息越少，搜索范围就越广，这反过来会显示给定信息的所有结果。我要做的是当显示信息时，用户可以单击其中一个结果，它将为他们提供与该条目有关的所有信息。我需要帮助的是如何将点击的信息转换为新的特定 SQL 搜索并显示该表行的所有信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:05:46.160

好吧，您显示的每条记录都应该有一个链接，用户可以单击该链接以转到更详细的页面。

`echo '<a href="info.php?id='.$row['id'].'">'.$row['name'].'</a>';`

从那里`id`开始`info.php`

```
$result = mysql_query("SELECT * FROM table WHERE id = " . $_GET['id']);
while($row = mysql_fetch_array($result)){
echo $row['id'];
// echo any fields you want to display
} 
```

这只是一个指导方针。您对 sql 注入持开放态度。

# ios - iphone搜索本地xml

> ID：14327557
> 
> 赞同：1
> 
> 时间：2013-01-14T22:01:13.850
> 
> 标签：ios, iphone, xcode

我是 xcode 开发的新手，但我想要一些指导或指向一些关于开发基本应用程序的教程，这将允许我通过其任何字段搜索本地 XML 文件，并在列表中显示结果。然后点击一项，它会解析 XML 并显示记录。

增加的功能是使用更新的数据定期更新 XML 文件的能力，但是一旦我得到基本部分的工作，我会尝试找出其余的。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:53:49.920

您可以在此处找到有关 XML 的教程 [http://www.raywenderlich.com/14172/how-to-parse-html-on-ios](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios)

# c++ - 修改 Duff 设备的语法 - 这是合法的 C/C++ 吗？

> ID：14327560
> 
> 赞同：8
> 
> 时间：2013-01-14T22:01:17.153
> 
> 标签：c++, switch-statement, duffs-device

就在昨晚，我第一次遇到了好奇[的达夫装置](http://en.wikipedia.org/wiki/Duff%27s_device)。我一直在阅读它，我认为理解它并不令人生畏。我很好奇的是奇怪的语法（来自维基百科）：

```
register short *to, *from;
register int count;
{
  register int n = (count + 7) / 8;
  switch(count % 8) {
  case 0: do {    *to = *from++;
  case 7:         *to = *from++;
  case 6:         *to = *from++;
  case 5:         *to = *from++;
  case 4:         *to = *from++;
  case 3:         *to = *from++;
  case 2:         *to = *from++;
  case 1:         *to = *from++;
    } while(--n > 0);
  }
} 
```

[我正在阅读switch 语句](http://www.open-std.org/jtc1/sc22/open/n2356/stmt.html#stmt.switch)的 C++ 标准定义（如果它已经过时，请告诉我，我不熟悉 Open-Std.org）。据我所知，case 语句只是用于 switch 语句的简化跳转语句。

switch 本身完全忽略了嵌套的 do-while，循环忽略了 case 语句。由于开关在循环内部跳转，因此循环被执行。开关用于覆盖余数（除以 8），循环处理可整除的部分。这一切都说得通。

那么我的问题是为什么笨拙的语法？我突然想到，可以编写循环以使所有 case 语句都包含在其中，是吗？我在标准中看不到任何禁止这种行为的内容，并且它在 GCC 4.7 下可以正确编译，所以以下内容是否合法？

```
register short *to, *from;
register int count;
{
  register int n = (count + 7) / 8;
  switch (count <= 0 ? 8 : count % 8)
  {
    do
    {
      case 0:         *to = *from++;
      case 7:         *to = *from++;
      case 6:         *to = *from++;
      case 5:         *to = *from++;
      case 4:         *to = *from++;
      case 3:         *to = *from++;
      case 2:         *to = *from++;
      case 1:         *to = *from++;
      default:        ; // invalid count, suppress warning, etc.
    } while(--n > 0);
  }
} 
```

对我来说，这使代码的意图更加清晰。感谢您的任何反馈。;)

**编辑：**如下所述，原始代码是为 C 编写的，并且对*count*和*n*变量具有隐式 int 。由于我将其标记为 C++，因此我对其进行了修改。

**编辑 2：**修改了修改后的示例代码以解决无效的计数值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T22:11:24.573

查看 C++11 标准，我认为您要询问的代码部分是允许的。你试过了吗？

我认为最适用的规则是：

> *注意：* 通常，作为 switch 主题的子语句是复合的，`case`并且`default`标签出现在（复合）子语句中包含的顶级语句上，但这不是必需的。

事实上，这意味着你可以去掉`do`-周围的大括号`while`，然后写

```
 int n = (count + 7) / 8;
  switch (count % 8) do
  {
      case 0:         *to = *from++;
      case 7:         *to = *from++;
      case 6:         *to = *from++;
      case 5:         *to = *from++;
      case 4:         *to = *from++;
      case 3:         *to = *from++;
      case 2:         *to = *from++;
      case 1:         *to = *from++;
  } while(--n > 0); 
```

但是，此行不是有效的 C++：

```
register n = (count + 7) / 8; 
```

C++ 不允许 default-int，必须指定或推断变量的类型。

* * *

哦，在这里，在不破坏格式的情况下修复迭代次数：

```
 int n = 1 + count / 8;
  switch (count % 8) do
  {
                      *to = *from++;
      case 7:         *to = *from++;
      case 6:         *to = *from++;
      case 5:         *to = *from++;
      case 4:         *to = *from++;
      case 3:         *to = *from++;
      case 2:         *to = *from++;
      case 1:         *to = *from++;
      case 0:                      ;
  } while(--n > 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:12:34.807

是的，这是合法的。语句的标签`switch`通常写在与语句相同的级别`switch`。但是，将它们写在复合语句中是合法的，例如在循环中间。

**编辑**：不要求 switch 语句的主体必须以标签开头，任何代码都是合法的。但是，从 switch 语句本身无法进入它，因此除非它是循环或普通标签，否则代码将无法访问。

该语句的另一个有趣之`swtich`处是大括号是可选的。但是，在这种情况下，只允许使用一个标签：

```
 switch (i)
      case 5: printf("High five\n"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T22:30:27.610

该代码当然是合法的：对于块和/或循环完全没有要求。但值得注意的是，`count == 0`上述循环没有正确处理。但是，它可以通过以下方式正确处理：

```
int count = atoi(ac == 1? "1": av[1]);
switch (count % 4)
{
case 0: while (0 < count) { std::cout << "0\n";
case 3: std::cout << "3\n";
case 2: std::cout << "2\n";
case 1: std::cout << "1\n";
    count -= 4;
    }
} 
```

将`case 0`标签放在循环中也会错误地执行嵌套语句。虽然我看到 Duff 的设备总是使用`do-while`循环，但上面的代码似乎更自然地处理边界条件。

# c++ - VS2012 中 MFC 中的调试断言

> ID：14327561
> 
> 赞同：3
> 
> 时间：2013-01-14T22:01:17.970
> 
> 标签：c++, mfc, visual-studio-2012

我正在将旧版 GUI 应用程序迁移到 VS2012。在调试模式下运行此应用程序时，当我尝试使用以下代码行实例化工具栏时，会收到调试断言：

```
if(!m_wndMain.Create(this) || !m_wndMain.LoadToolBar(IDR_MAIN)) 
```

在 MFC 代码中挖掘之后，我发现 bartool.cpp 中的以下行已更改在 MSVC10->11 中从：

```
if (lpBitmap == NULL) 
```

至：

```
if ((lpBitmap == NULL) || (lpBitmap->biBitCount > 8)) 
```

在 AfxLoadSysColorBitmap 中。在我的情况下`lpBitmap->biBitCount`= 24 导致`AfxLoadSysColorBitmap`返回`NULL`，这反过来又导致调试断言。关于如何纠正我的程序行为以避免此调试断言的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:09:40.907

除了将位图更改为 8 位（256 色）之外，您最好的选择是使用 CMFCToolBar。这支持更高位深度的位图（包括 24 位和 32 位）位图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:22:50.197

请检查您使用的位图图像确实只有 8 位。我认为您使用的是 24 位图像。因此错误。

尝试将它们转换为 8 位，位图

# c++ - C++：指向已释放内存空间的指针

> ID：14327565
> 
> 赞同：3
> 
> 时间：2013-01-14T22:01:35.130
> 
> 标签：c++, pointers, memory, memory-management

当我调用该函数时，底部的两行代码`tail = head; tail->next= NULL;`导致程序崩溃。`extractMin()`如果我将它们注释掉，一切都会按预期进行。这是因为它们指向已释放的内存地址吗？

编译器给我的唯一线索是：`EXC_BAD_ACCESS (code=2, address=0x0)`. 我立即注意到地址是 0x0，所以那里有问题，但究竟是什么？

```
string LinkedListPQueue::extractMin() {
    if (isEmpty())
        error("Tried to dequeue from epmpty queue!");

    cell *toBeDeleted = head;   //pointer to this head
    string value = head->value; //get value of this head
    head = head->next;          //move so this head is not the same as the one to be deleted
    delete toBeDeleted;         //delete previous head.
    return value;

}

/* Implementation notes: enqueue
 * -----------------------------
 * We have to search to find the proper position, which can be a bit tricky with
 * a singly-linked list.  We walk two parallel pointers, one a step behind the other,
 * until we find the correct position to insert the new cell, which we then splice
 * into place. Note the special case of inserting at the head. Alternatively, this
 * operation could work recursively.
 */
void LinkedListPQueue::enqueue(const string& elem) {
    cell *cur, *prev, *newOne = new cell;

    newOne->value = elem;

    for (prev = NULL, cur = head; cur != NULL; prev=cur, cur = cur->next) {
        if (elem > cur->value) break;
    }
    newOne->next = cur;
    if (prev) {
        prev->next = newOne;
        logSize++; 
    } else {
        head = newOne;
        tail = head;
        tail->next= NULL;
        logSize++;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:17:03.970

你的`else`条款被打破了。如果`prev`为 null，则您尝试在第一个元素之前插入。

```
else {
  cell *oldHead = head;
  head = newOne;
  head->next = oldHead;
  logSize++;
} 
```

设定`tail->next = NULL`是核心错误。

# ios - 转到特定的标签栏视图

> ID：14327566
> 
> 赞同：1
> 
> 时间：2013-01-14T22:01:35.000
> 
> 标签：ios, xcode, view, controller

当我的应用程序启动时，我有 6 个视图控制器。它就像一个图片库。例如，当用户按下第三个视图上的按钮时，他/她应该进入选项卡栏中的第三个视图。

我使用此代码在选项卡栏控制器的顶部启动视图控制器：

```
- (void)viewDidAppear:(BOOL)animated {
    static BOOL first = YES;
    if (first) {
        UIViewController *popup = [[Home1ViewController alloc] initWithNibName:@"Home1ViewController" bundle:nil];

        [self presentViewController:popup animated:NO completion:nil];
        first = NO;
    }
} 
```

通过使用此代码来关闭这个新视图，我只是进入特定视图，而不是我的标签栏页面......

```
-(IBAction)dismissView {
    TabBarPage3 *screen = [[ TabBarPage3 alloc] initWithNibName:nil bundle:nil];
    screen.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self presentModalViewController:screen animated:YES];
} 
```

请在这件事上给予我帮助！谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-14T22:33:42.610

这是在 TabBar 上更改视图的代码

```
[((UITabBarController *)(self.parentViewController))setSelectedIndex:index]; 
```

[UITabbar 示例项目](http://www.gungorbasa.net/Media/Default/BlogPost/denemeUITabbar.zip)

# r - 程序完成后关闭Windows计算机的R代码

> ID：14327571
> 
> 赞同：0
> 
> 时间：2013-01-14T22:02:19.287
> 
> 标签：r

> **可能重复：**
> [模拟后关闭 Windows](https://stackoverflow.com/questions/11981270/shutdown-windows-after-simulation)

我有一些耗时的程序，我想在一夜之间运行。是否有一些 R 代码可以添加到程序末尾以关闭应用程序并在完成后自动关闭 Windows 计算机？

# phalcon - 是否可以使用 Phalcon\Mvc\View 呈现自定义视图（只是自定义 .phtml）模板？

> ID：14327572
> 
> 赞同：4
> 
> 时间：2013-01-14T22:02:21.283
> 
> 标签：phalcon

我需要在变量中呈现电子邮件模板以便稍后发送它们（存储在 .phtml 文件中），我真的不想实现我的特殊类来处理这个。

是否可以呈现不是控制器动作视图，而是自定义一个？

我尝试了以下代码，但它输出 NULL :((

```
// Controller context
$view = new Phalcon\Mvc\View();
$view->setViewsDir('app/views/');
$view->setVar('var1', 'var2');
// Setting some vars...
$view->start();
$view->partial($emailTemplatePath);
$view->finish();
$result = $view->getContent();
var_dump($result); // Gives null 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T01:22:39.637

除了 Nikolaos 的响应之外，您还可以使用 $view->getRender() 来渲染返回其输出的单个视图。

```
$view->setViewsDir('apps/views/');
echo $view->getRender('partials', 'test'); // get apps/views/partials/test.phtml 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T22:50:31.140

您需要检查`$emailTemplatePath`. 它应该指向正确的文件，即

```
// points to app/views/partials/email.phtml
$view->partial('partials/email'); 
```

如果您正在使用 Volt 并将其注册为您的引擎，那么您的文件将需要：

```
// app/views/partials/email.volt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-14T19:25:22.330

我有一个项目，我使用电子邮件和 pdf 模板，我所做的就是让渲染全部在组件中进行。

首先，我的文件夹结构包含（我只会在此处放置相关的内容）缓存、组件和视图目录。让我们看一下电子邮件设置而不是 PDF，因为这与您的情况更相关。

```
/app
    /cache
        /email
    /components
    /views
        /email
            /elements 
```

当然有公共，控制器等，但我们不要为此考虑它们。

我正在为我的使用 Swift 邮件程序，但我希望你能同样使用它。在 /app/components/Swift.php 我有一个 __construct 调用**this->init_template_engine();**

```
/**
 * Create a volt templating engine for generating html
 */
private function init_template_engine() {
    $this->_template = new \Phalcon\Mvc\View\Simple();
    $di = new \Phalcon\DI\FactoryDefault(); 
    $this->_template->setDI($di);
    $this->_template->registerEngines([
      '.volt' => function($view, $di) {

            $volt = new \Phalcon\Mvc\View\Engine\Volt($view, $di);

            $volt->setOptions([
                'compiledPath' => APP_DIR."cache".DS."email".DS,  // render cache in /app/cache/email/
                'compiledSeparator' => '_'
            ]);

            return $volt;

      // or use ".phtml" => 'Phalcon\Mvc\View\Engine\Php' if you want, 
      // both will accept PHP code if ya don't fancy it being a 100% volt.
        },
    ]);

    // tell it where your templates are
    $this->_template->setViewsDir(APP_DIR.'views'.DS.'email'.DS); 

    return $this->_template;
} 
```

上面的常量（如 APP_DIR）是我已经在我的引导程序中创建的，它们所做的只是存储目录的完整路径。

一旦 $_template 变量设置了模板引擎，我就可以使用它来呈现我的模板。

```
/**
 * Returns HTML via Phalcon's volt engine.
 * @param  string $template_name
 * @param  array $data
 */
private function render_template($template_name = null, $data = null) {
    // Check we have some data.
    if (empty($data)) {
        return false; // or set some default data maybe?
    }

    // Use the template name given to render the file in views/email
    if(is_object($this->_template) && !empty($template_name)) {
        return $this->_template->render($template_name, ['data' => $data]);
    }

    return false;
} 
```

一个示例伏特电子邮件模板可能如下所示：

```
{{ partial('elements/email_head') }}

<h2>Your Order has been dispatched</h2>

<p>Dear {{ data.name }}</p>

<p>Your order with ACME has now been dispatched and should be with you within a few days.</p>

<p>Do not hesitate to contact us should you have any questions when your waste of money arrives.</p>
<p>Thank you for choosing ACME Inc.</p>

{{ partial('elements/email_foot') }} 
```

我所要做的就是获取 html 并使用 swiftmailer 的 setBody 方法，我就完成了：

->setBody($this->render_template($template, $data), 'text/html');

您不需要像这样在组件中放置单独的视图引擎，它可能会像那样占用内存，但它确实显示了整个过程。希望这是有道理的:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-28T22:46:00.120

渲染视图并将其作为变量返回的最简单方法是使用 Phalcon\Mvc\View\Simple 类。在您的控制器中，声明一个 Simple 视图类的新实例并将一个渲染引擎附加到它。然后你可以使用它的 render() 方法来选择一个视图文件并传入变量：

```
// create a simple view to help render sections of the page
$simple_view = new \Phalcon\Mvc\View\Simple();
$simple_view->setViewsDir( __DIR__ . '/../views/' );
$simple_view->setDI( $this->di );
$simple_view->registerEngines(array(
    '.volt' => 'Phalcon\Mvc\View\Engine\Volt'
));

// use the simple view to generate one or more widgets
$widget_html = array();
$widget_objects = $widget_search->getWidgetObjects();
forEach( $widget_objects as $widget ){
    $widget_html[] = $simple_view->render('index/widgetview',array('widget'=>$widget));
}

// pass the html snippets as a variable into your regular view
$this->view->setVar('widget_html',$widget_html); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-02T06:44:27.220

使用`$view->render('partials/email')`而不是调用部分方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-11T10:00:22.583

我通常使用 Volt 引擎，一个简单的方法是在 DI 容器中重新定义视图，如下所示：

```
$view = $this->view;

$content = $view->getRender('mail', 'show',
  array(
    "var1" => "some value 1",
    "var2" => "some value 2"
  ),
  function($view) {
      $view->setRenderLevel(\Phalcon\Mvc\View::LEVEL_LAYOUT);
  }
);

echo $content; 
```

# linux - Qt Creator 不允许我运行 GUI 应用程序

> ID：14327580
> 
> 赞同：1
> 
> 时间：2013-01-14T22:02:48.147
> 
> 标签：linux, qt, qt-creator

我目前在 Ubuntu Linux 12.10 上使用 Qt Creator，并且刚刚启动了一个 Qt GUI 应用程序。当我单击设计选项卡时，我来到这个屏幕：

![在此处输入图像描述](../Images/20fb9559cd598e230eb0cd5241b3a77c.png)

如您所见，左下角的 Build 和 Run 按钮是灰色的，我不明白为什么。我已经在网上搜索过，但一无所获。任何人都可以告诉我为什么会这样吗？我做错了什么吗？

我的 QT Creator 版本是：

> Qt Creator 2.5.2
> 基于 Qt 4.8.2（64 位）
> 于 2012 年 8 月 19 日 15:28:17 构建

我切换到 Qt Creator 的唯一原因是 Qt Designer 无法构建应用程序或编辑它们的源代码。这两个是要一起用的吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:06:09.857

您在“设计”领域，转到“编辑”或“调试”窗格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:36:11.820

查看 Qt Creator 的标题栏，您似乎只创建（或打开）了一个 .ui 文件。要编译某些东西，您需要一个项目（一个 .pro 文件）。单击文件 -> 新建并选择应用程序 -> Qt Gui 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:04:21.840

通过查看左下角运行、调试和构建按钮上方的计算机形状的小图标，在我看来，您可能没有正确设置 Qt 的版本，或者您没有选择一个。因此无法编译 如果您已经安装了 Qt 库，那么您需要将它们“添加”到 QtCreator 属性中。

在 QtCreator 中，转到 Tools->Options-> Qt（或 Qt Versions）并通过选择适当 qmake 的路径添加有效版本的 qt 库。

如果您仍然遇到问题，我建议您安装[Nokia-QtSDK](http://www.developer.nokia.com/info/sw.nokia.com/id/da8df288-e615-443d-be5c-00c8a72435f8/Qt_SDK.html)，因为它为不同平台（桌面、Meego、Symbian 等）捆绑了 Qt 库，并且不需要额外设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T16:50:08.397

检查您是否配置了所需的工具链。您需要为 gcc 编译器和 qmake 提供路径，以便从 Qt Creator 构建应用程序。检查工具->首选项中的设置。

# objective-c - 一个类的指针是否可以毫无问题地包含扩展类？

> ID：14327586
> 
> 赞同：0
> 
> 时间：2013-01-14T22:03:02.937
> 
> 标签：objective-c, pointers

我对 Objective-C 很陌生。我试图确定是否有一个类的指针，然后将扩展类分配给该指针，会导致问题。例如，如果 ClassB 扩展 ClassA，我这样做：

```
ClassA *foo = [[ClassB alloc] init]; 
```

这会在某个地方引起问题吗？我知道 Xcode 似乎没问题，但这并不意味着没问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T22:04:26.920

是的，这就是所谓的多态性，你可以毫无问题地做到这一点。

然而，由于在 Objective-C 中消息分发是动态的，如果类 B 包含一个被覆盖的方法，这个方法将被执行。当您知道您将收到一个从已知基类继承的类的对象但您不知道是哪一个时，通常会使用这种方法。你可以把它变成你的优势。

# html - 如何使我的 HTML 表单按钮在移动和桌面浏览器中看起来相同？

> ID：14327587
> 
> 赞同：2
> 
> 时间：2013-01-14T22:03:14.477
> 
> 标签：html, css, forms, button

我已将 CSS 样式添加到我的 Web 表单的提交按钮中。然而，虽然它在我的笔记本电脑上看起来像我希望的那样——我尝试了 Safari 和 Chrome，并且按钮看起来相同——但移动按钮的形状不正确，颜色也不正确。

相关HTML：

```
<html>
<body>
<form action="{{ post somewhere }}" method="post">
  <strong>+1</strong><input name="number-form" placeholder="4045553829" id="number-input" maxlength="10" type="text" onkeypress="return onlyNumbers()"></input>
  <input type=submit value="verify number" class="submit-button"></input>
</form>
  </body>
  </html> 
```

对应的CSS：

```
body {
    background-color: #fff;
    display: block;
    position: absolute;
    height: auto;
    width: auto;
    bottom: 0;
    top: 0;
    left: 0;
    right: 0;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 100px;
    margin-left: 0px;
}
form {
    width: 650px;
    margin-left: auto;
    margin-right: auto;
}

strong {
    font-family: 'Open Sans', sans-serif;
    font-weight: 600;
    font-size: 2em;
    padding-right: 10px;
}

input, #number-input, #veriform {
    font-family: 'Open Sans', sans-serif;
    font-weight: 600;
    font-size: 2.5em;
    color: #181818;
}

#number-input {
    width: 260px;
    padding-left: 10px;
    padding-right: 10px;
    border: 1px solid #a8a8a8;
}

.submit-button {
    background-color: #8a50c9;
    color: #fff;
    margin-left: 10px;
    padding-left: 20px;
    padding-right: 20px;
    border: none;
} 
```

我创建了一个 JSFiddle——位于[http://jsfiddle.net/rpE3w/1/——](http://jsfiddle.net/rpE3w/1/)所以它可以在浏览器中查看。

虽然在 PC 上该按钮是一个带有白色字体的纯紫色矩形，但在移动浏览器上查看它似乎会产生一个圆形的渐变按钮。

提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T22:10:25.247

您可以使用可点击的图像而不是输入来滚动自己的图像。在 Mac、Windows、Linux、Android、iOS、Windows Mobile 和 Blackberry 之间，如果您让浏览器选择按钮的外观，那么它在所有浏览器中的外观都不会相同。图像将更加一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:38:35.653

看来我不是唯一一个 [在 iPad/iPhone 上遇到 CSS 提交按钮奇怪渲染](https://stackoverflow.com/questions/5438567/css-submit-button-weird-rendering-on-ipad-iphone)问题的人。

正如 Francesco 指出的那样，这是 iOS 设备完成的渲染错误，要禁用按钮修改，我只需要添加

```
-webkit-appearance: none; 
```

对于我不想不规则呈现的任何类或 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-11T18:23:55.173

也不仅仅是 iOS 设备。Android 设备 - 至少是那些使用 Chrome 和 Firefox 的设备 - 具有类似的按钮呈现行为。

# windows - powershell RAM 高水位线

> ID：14327592
> 
> 赞同：0
> 
> 时间：2013-01-14T22:03:26.033
> 
> 标签：windows, powershell, powershell-2.0, ram

有没有办法在powershell中获得RAM使用的高水位线？在 2008 R2 系统上运行。

我在想我必须编写一个脚本来打开 RAM 计数器，然后使用 powershell 进行查询？有道理？有什么例子吗？

-肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:07:30.777

整个box没有Peak Memory Used计数器，但是可以查询/Paging File/% Usage Peak。您可能会发现这表明您正在尝试监控的任何事件。

```
$categoryName = 'Paging File'                   
$counterName = '% Usage Peak'
$instanceName = '_Total'

$counter = "\$categoryName($instanceName)\$counterName"
Get-Counter $counter 
```

每个正在运行的进程也有一组峰值。如果有您感兴趣的特定服务（例如 inetinfo），则查询 /Process(inetinfo)/Virtual Bytes Peak、Working Bytes Peak、Page File Bytes Peak。无论如何，这很有可能会让你更接近你的真正目标，即找出你的记忆被消耗的地方。

如果这些都不是您想要的，那么您需要设置一个实际的计数器日志。这可以通过 PowerShell 以编程方式完成（如果您尝试对多台机器批量执行此操作），但使用 PerfMon 控制面板小程序通常更容易。如果将该数据保存到 .csv，则可以使用 PowerShell 分析重要列的最大值。

# c - 在子菜单项上使用 EnableMenuItem

> ID：14327597
> 
> 赞同：1
> 
> 时间：2013-01-14T22:04:03.030
> 
> 标签：c, windows, winapi, user32

我有一个旧的 MFC 应用程序，我正在尝试禁用菜单项。

我有一个具有典型结构的菜单：

```
File
 - Open
 - Save
 - Close
Edit
 - Cut
 - Copy
 - Paste 
```

使用以下命令：

```
EnableMenuItem(hMenu,ID_FILE, MF_BYCOMMAND | MF_GRAYED); 
```

我可以使顶级菜单项的菜单命令变灰。但是，如果我这样做

```
EnableMenuItem(hMenu,ID_PASTE, MF_BYCOMMAND | MF_GRAYED); 
```

我不能灰掉任何子菜单项。如果我得到子菜单句柄并将其传递给`EnableMenuItem`，那对我没有好处。`SetMenuItemInfo`如果我使用任何一个也无济于事

关于如何禁用子菜单项的任何想法？EnableMenuItem 函数有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:43:32.953

[根据 MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647636%28v=vs.85%29.aspx)，您需要调用[DrawMenuBar()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647633%28v=vs.85%29.aspx)以获取 UI 以反映对菜单状态的更改。

# php - CakePHP 2.0 - 从某个结果集中使用特定参数获取结果计数

> ID：14327598
> 
> 赞同：2
> 
> 时间：2013-01-14T22:04:08.780
> 
> 标签：php, cakephp

我正在使用 CakePHP 2.0 开发一个搜索引擎，并且很难找到最有效的方法来获得我想要的结果。

假设我正在查询人，我得到一组 20 个结果，其中 5 个 20 岁、10 个 30 岁和 5 个 40 岁。此外，其中 15 个人的眼睛是棕色的，3 个是蓝色的，2 个是绿色的。我想找到获得这些特定计数的最有效方法。然后，我将在页面上显示这些结果，以便用户可以使用这些参数查看结果中的内容。然后，他们将能够单击其中一个以将该搜索参数添加到当前查询中。

这根本不是我可以存储在数据库或缓存中的东西，因为每次搜索都可能不同，并且可能/将返回不同的结果。

如果我没有解释我正在尝试做什么（这很可能），那么有几个网站可以做到这一点。Cars.com 在搜索汽车时使用此方法。您搜索通用搜索，然后侧面的链接可让您缩小结果范围。这些链接包括属于特定参数的当前结果集的计数。

一个想法是获取完整的结果集，然后通过它解析生成计数，这会起作用，但在我的特定项目中，我正在处理数千条记录，看起来这可能会增加页面的加载时间和/或对服务器造成压力。

这是一个视觉示例： ![我试图实现的问题/结果的视觉示例](../Images/09019f12f6f878bdcd80c8e1e94d4cdf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:17:41.783

Cars.com 可能会为每个计数的功能使用关联标签。带有关联标签的表记录有许多并且属于许多特征标签。

这样他们就不必为每辆汽车的价格创建标签。他们创建价格范围标签。

对于每条汽车记录，都有关联的标签记录，其中包含该汽车的所有功能。然后，您可以在标签记录中缓存具有该功能的汽车数量。

SQL 表结构可能是这样的。

```
 CREATE TABLE `cars` (
   `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
   `make` varchar(45) DEFAULT NULL,
   `model` varchar(45) DEFAULT NULL,
   PRIMARY KEY (`id`)
 ) ENGINE=InnoDB DEFAULT CHARSET=latin1;

 CREATE TABLE `features` (
   `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
   `name` varchar(45) DEFAULT NULL,
   `count` int(11) NOT NULL DEFAULT '0',
   PRIMARY KEY (`id`)
 ) ENGINE=InnoDB DEFAULT CHARSET=latin1;

 CREATE TABLE `cars_features` (
   `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
   `car_id` int(11) NOT NULL,
   `feature_id` int(11) NOT NULL,
   PRIMARY KEY (`id`)
 ) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

对于每个 Car 记录，可以有多个 Fe​​ature 记录。这些通过 cars_features 表与每辆汽车相关联。当有人搜索并找到汽车 XXXX 时，您可以查找该汽车的功能，并显示缓存的有多少汽车具有该功能的计数。

**编辑：**

缩小计数范围，使其仅限于在搜索中发现的汽车。您需要首先获取所有汽车 ID 的列表，然后使用 cars_features 表和功能之间的 JOIN 执行 COUNT。

这是一些示例数据。

```
 INSERT INTO `cars` (`make`, `model`) VALUES ('Ford', 'Explorer');
  INSERT INTO `cars` (`make`, `model`) VALUES ('Hond', 'Civic');
  INSERT INTO `cars` (`make`, `model`) VALUES ('Hond', 'Civic');

  INSERT INTO `features` (`name`, `count`) VALUES ('Red', 2);
  INSERT INTO `features` (`name`, `count`) VALUES ('Green', 1);

  INSERT INTO `cars_features` (`car_id`, `feature_id`) VALUES (1, 1);
  INSERT INTO `cars_features` (`car_id`, `feature_id`) VALUES (2, 1);
  INSERT INTO `cars_features` (`car_id`, `feature_id`) VALUES (3, 2); 
```

假设我们搜索返回了两个项目，因此我们的汽车 ID 为 (1,2)。我们可以使用以下 SQL 查询找到特征计数。

```
 SELECT `features`.`id`,COUNT(`features`.`id`)
     FROM `cars_features` 
     JOIN `features` ON (`cars_features`.`feature_id`=`features`.`id`)
     WHERE `cars_features`.`car_id` IN (1,2)
     GROUP BY `features`.`id` 
```

这将报告每个功能的计数仅限于找到的汽车记录。

我将尝试以 CakePHP 模型格式编写以上内容。

```
 $this->CarFeature->find('all',array(
    'conditions'=>array('CarFeature.car_id'=>$ids),
    'fields'=>array('Feature.id','COUNT(Feature.id)'),
    'group'=>array('Feature.id'),
    'contain'=>'Feature'
 )); 
```

# ruby - 为什么rails在尝试渲染页面时会崩溃？

> ID：14327599
> 
> 赞同：0
> 
> 时间：2013-01-14T22:04:10.007
> 
> 标签：ruby, ruby-on-rails-3

我对我的铁路环境进行了更新，现在它在尝试渲染任何页面时都崩溃了。这在我之前没有发生过，我在这里找不到任何类似的问题，所以我发布这个是希望对如何纠正这个问题提出有用的建议，因为我不知道。

我在 Debian Linux beta 2.6.32-5-686 上使用 Rails 3.2.2、ruby 1.9.3p194 和 rvm 1.14.1。

**今天我使用gem pristine --all**和**bundle install**将 Rails 和 ruby​​ 升级到这些最新版本。

rails 服务器启动正常（带有关于没有“秘密选项”的安全警告，但我相信这是无害的），但是当请求任何页面时，它会崩溃，转储跟踪的最后一部分如下：...

```
1030 /home/caseyr/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/relation/finder_methods.rb
 1031 /home/caseyr/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/relation/calculations.rb
 1032 /home/caseyr/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/relation/spawn_methods.rb
 1033 /home/caseyr/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/relation/query_methods.rb
 1034 /home/caseyr/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/relation/batches.rb
 1035 /home/caseyr/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/relation/delegation.rb
 1036 /home/caseyr/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/relation.rb
 1037 /home/caseyr/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/associations/collection_proxy.rb
 1038 /home/caseyr/.rvm/gems/ruby-1.9.3-p194/gems/will_paginate-3.0.3/lib/will_paginate/active_record.rb
 1039 /home/caseyr/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/base.rb
 1040 /home/caseyr/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/notifications/instrumenter.rb

* Process memory map:

08048000-08049000 r-xp 00000000 00:12 1074503381  /Net/delta/home/caseyr/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
08049000-0804a000 rw-p 00000000 00:12 1074503381  /Net/delta/home/caseyr/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
099b7000-0b76f000 rw-p 00000000 00:00 0          [heap] 
```

...

```
which goes on for some time, then ends with:
b7582000-b7774000 r-xp 00000000 00:12 1611124550  /Net/delta/home/caseyr/.rvm/rubies/ruby-1.9.3-p194/lib/libruby.so.1.9.1
b7774000-b7778000 rw-p 001f1000 00:12 1611124550  /Net/delta/home/caseyr/.rvm/rubies/ruby-1.9.3-p194/lib/libruby.so.1.9.1
b7778000-b778a000 rw-p 00000000 00:00 0 
b778a000-b778b000 r-xp 00000000 00:00 0          [vdso]
b778b000-b77a6000 r-xp 00000000 08:02 654765     /lib/ld-2.11.3.so
b77a6000-b77a7000 r--p 0001b000 08:02 654765     /lib/ld-2.11.3.so
b77a7000-b77a8000 rw-p 0001c000 08:02 654765     /lib/ld-2.11.3.so
bf90a000-bf91f000 rw-p 00000000 00:00 0          [stack]

[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries. 
```

如果有人能指出我正确的方向来解决这个问题，我会很感激，因为我对这种行为感到困惑......

--rixter

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:53:05.250

这可能是 ruby​​ 1.9.3 的段错误。`openssl`可能是罪魁祸首。尝试在 Gemfile 中更改 `source`to `'http://rubygems.org'`。如果它有一些效果，然后`--with-ssl-dir`在全新安装后重新安装 ruby​​，`openssl`如下所示：

```
rvm pkg install openssl
rvm remove 1.9.3-p194
rvm install 1.9.3-p194 --with-openssl-dir=$rvm_path/usr 
```

试试看是否可行

# php - PHP 表单 - 动作属性中的问号 (action="?")。

> ID：14327609
> 
> 赞同：0
> 
> 时间：2013-01-14T22:04:50.993
> 
> 标签：php, forms

前程序员写了这段代码：`action="?"`. 我找不到任何 PHP 脚本。谁能告诉我提交时表单调用什么？我想它应该是`PHP_SELF`，但我不确定。

```
<form action="?" method="POST" id="pa_form" novalidate="novalidate"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T22:07:40.687

我相信这会导致浏览器将表单请求发送到当前 URL，但查询字符串为空。

IE：如果您当前在[http://example.com/foo?bar=1](http://example.com/foo?bar=1) - 目标表单请求将转到 URL“http://example.com/foo?”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:05:57.460

我相信这是一个自我参考。如果它在同一个 php 脚本中，它只是意味着“自我”。通常在问号 ( `?id=5`) 之后有参数，但在这种情况下没有参数。

# iphone - NSMutableArray 不是替换对象吗？

> ID：14327610
> 
> 赞同：0
> 
> 时间：2013-01-14T22:05:02.043
> 
> 标签：iphone, ios, ipad

我想替换`NSMutableArray`obect 中的数组对象。我正在获取`oldArray`并`_alertsArray`改变它的价值，并想`oldArray`用`newArray`. 但是没有效果！！

```
NSArray *oldArray = (NSArray *)[_alertsArray objectAtIndex:[indexPath row]];
NSMutableArray *newArray = [[NSMutableArray alloc] initWithArray:oldArray copyItems:YES];
[newArray replaceObjectAtIndex:3 withObject:@"YES"];
[_alertsArray replaceObjectAtIndex:[indexPath row] withObject:newArray]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:20:13.900

```
NSMutableArray *newArray = [_alertsArray mutableCopy];
[newArray replaceObjectAtIndex:3 withObject:@"YES"];
_alertsArray = newArray; 
```

# perl - 从命令行重命名多个文件

> ID：14327613
> 
> 赞同：3
> 
> 时间：2013-01-14T22:05:22.360
> 
> 标签：perl, bash, rename, file-rename

> **可能重复：**
> [根据模式在 Linux 中重命名大量文件](https://stackoverflow.com/questions/6316600/renaming-lots-of-files-in-linux-according-to-a-pattern)

我有多个这种格式的文件：

```
file_1.pdf
file_2.pdf
...
file_100.pdf 
```

我的问题是如何重命名所有文件，如下所示：

```
file_001.pdf
file_002.pdf
...
file_100.pdf 
```

我知道您可以使用“重命名”重命名多个文件，但在这种情况下我不知道该怎么做。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T22:07:49.257

您可以[`rename`](http://search.cpan.org/perldoc?rename)在`shell`提示符下使用 Perl 工具执行此操作。（还有其他同名的工具可能会也可能不会这样做，所以要小心。）

```
rename 's/(\d+)/sprintf("%03d", $1)/e' *.pdf 
```

如果您想进行试运行以确保不会破坏任何文件，请将`-n`开关添加到命令中。

## 笔记

如果您运行以下命令 ( `linux`)

```
$ file $(readlink -f $(type -p rename)) 
```

你有一个像

```
.../rename: Perl script, ASCII text executable 
```

那么这似乎是正确的工具=）

这似乎`rename`是`Ubuntu`.

使其成为默认值`Debian`和派生值，例如`Ubuntu`：

```
sudo update-alternatives --set rename /path/to/rename 
```

## 解释

*   `s///`是基本替换表达式：`s/to_replace/replaced/`，检查`perldoc perlre`
*   `(\d+)``()`用至少一个整数捕获：`\d`或更多：`+`in`$1`
*   `sprintf("%03d", $1)` `sprintf`类似`printf`，但不用于*打印*，而是用相同的语法*格式化*字符串。`%03d`用于零填充，并且`$1`是捕获的字符串。查看`perldoc -f sprintf`
*   *由于表达式*末尾的修饰符，允许后面*的 perl 函数*`e`

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T00:16:11.280

如果你想用纯 bash 来做：

```
对于文件中的 f_*.pdf；做 x="${f##*_}"; echo mv "$f" "${f%_*}$(printf '_%03d.pdf' "${x%.pdf}")"; 完毕
```

（注意调试**回声**）*

# javascript - 带有滑动荧光笔的 jQuery 菜单

> ID：14327615
> 
> 赞同：2
> 
> 时间：2013-01-14T22:05:27.300
> 
> 标签：javascript, jquery, html, menu, slide

我想做这样的事情：http: [//dreamapp.de/sites/portfolio/](http://dreamapp.de/sites/portfolio/)

目前，这是通过具有`position: absolute`. 所以我只是将列表项移动到与活动列表项相同的位置。但是这个解决方案只有在内容不是动态居中的情况下才有效。所以除了它是一个丑陋但有效的解决方案之外，必须有一个更好的解决方案，对吧？

我以为我在其他网站上看到过类似的东西，但我找不到这样的东西。那么我怎样才能做得更好呢？

HTML：

```
 <nav id="menu2" class="menu">
        <ul>
            <li class="marker"></li>
            <li class="nav1"><a href="javascript:;">Home</a></li>
            <li class="nav2"><a href="javascript:;">HTML/CSS</a></li>
            <li class="nav3"><a href="javascript:;">JavaScript</a></li>
            <li class="nav4"><a href="javascript:;">Resources</a></li>
            <li class="nav5"><a href="javascript:;">Tutorials</a></li>
            <li class="nav6"><a href="javascript:;">About</a></li>
        </ul>
    </nav> 
```

jQuery：

```
$(".nav1 a").click(function() {
    $(".marker").stop().animate({left:'8px'},200, function() {
        $(".marker").stop().animate({display:'show'}, 200);
    });
});
$(".nav2 a").click(function() {
    $(".marker").stop().animate({'left':'118px'},200, function() {
        $(".marker").stop().animate({display:'show'}, 200);
    });
});
.
.
. 
```

CSS：

```
.menu ul li.marker {
   width: 110px;
   height: 45px;
   background-color: #42ff2e;
   display:none;
   position: absolute;
}

.menu { 
    width: 660px;
    height: 45px;
    display: block;
}
.menu ul {
    list-style: none;
    padding: 0;
    margin: 0;
}
.menu ul li {
    float: left; 
    overflow: hidden;       
    position: relative;
    text-align: center;
    line-height: 45px;
}
.menu ul li a { 
    position: relative;
    display: block;
    width: 110px;
    height: 45px;
    font-family: Arial;
    font-size: 11px;
    font-weight: bold;
    letter-spacing: 1px;
    text-transform: uppercase;
    text-decoration: none;
    cursor: pointer;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:27:59.693

认为您可以将其用于固定导航项宽度[http://jsfiddle.net/UqUBr/](http://jsfiddle.net/UqUBr/) （用于可变导航项宽度 - [http://jsfiddle.net/bdmjC/](http://jsfiddle.net/bdmjC/)）

JS：

```
var navigation = $('nav'),
    items = navigation.find('.item'),
    itemWidth = 110

$(".item a").click(function() {
    var item = $(this).parent()

    $(".marker").stop().animate({left:items.index(item)*itemWidth},200, function() {
        $(".marker").stop().animate({display:'show'}, 200);
    });
}); 
```

HTML：

```
<nav id="menu2" class="menu">
    <ul>
        <li class="marker"></li>
        <li class="item"><a href="javascript:;">Home</a></li>
        <li class="item"><a href="javascript:;">HTML/CSS</a></li>
        <li class="item"><a href="javascript:;">JavaScript</a></li>
        <li class="item"><a href="javascript:;">Resources</a></li>
        <li class="item"><a href="javascript:;">Tutorials</a></li>
        <li class="item"><a href="javascript:;">About</a></li>
    </ul>
</nav> 
```

CSS：

```
nav#menu2 {
  display: block;
  margin: auto;
  width: 660px;
  position: relative;
} 
```

# javascript - onsubmit 需要重新加载页面

> ID：14327616
> 
> 赞同：2
> 
> 时间：2013-01-14T22:05:33.933
> 
> 标签：javascript, coldfusion

我在coldfusion页面中有一个表格。点击插入表格的保存按钮后，我需要在选择框中使用表格的新值重新加载页面。虽然提交后页面刷新，但我无法在下拉列表中看到新插入的值。只有在手动刷新页面后我才能看到它。我有以下代码

```
 <script>
        function confirm_insert()
        {
            var ok = confirm("Are you sure you want to save the changes?");
            if (ok)
            {
                document.myform.submit();   
                return true;
            }
            else
            {
                return false;
            } 
        }
    </script>  

<form name="myform" action="bsc_lookup_number_add.cfm" method="post" >
           <td><input type="text" <cfif      isDefined('page.select_Main_Group')>value="#page.select_Main_Group#"</cfif>></td>
           <td><input type="text" <cfif isDefined('page.select_Sub_Group')>value="#page.select_Sub_Group#"</cfif>></td>
          <td><input name="newfirstchars" type="text" value="" maxlength="3"></td>

    <input type="submit" class="button" name="saverecord" id="saverecord"  style="width:100px" value="Save Record" onClick="return confirm_insert();">

            <cfquery name="first3" datasource="mbtran">
            select * from (
       select cast((substr(A.LABORLEVELNAME2, 1, 3)) as varchar2(5 byte)) first_3_pos
        from tkcsowner.VP_LABORACCOUNT a  
         <cfif isDefined('page.select_Sub_Group')>         
        where substr(A.LABORLEVELNAME1, 1, 5) || substr(A.LABORLEVELNAME2, 4, 2) = ('#page.select_Main_Group#' || '#page.select_Sub_Group#')
        </cfif>
        union
        select  A.FIRST_3_CHARS_IN_POSITION first_3_pos
        from kronos_if.FIRST_3_CHARS_IN_POSITION a    
         <cfif isDefined('page.select_Sub_Group')>     
        where A.DEPTID || A.UNION_CD = ('#page.select_Main_Group#' || '#page.select_Sub_Group#') 
        </cfif>
        )                          
        order by first_3_pos        
        </cfquery>

                <cfif isDefined('page.select_Sub_Group')>
                <td align="center">
                <select name="first3" id="first3" required="yes"        onchange="this.form.submit()">
             <option>Select</option>
             <cfloop query="first3">
                 <option value="#first_3_pos#" <cfif             isDefined('form.first3')><cfif form.first3 eq "#first_3_pos#">selected</cfif>       </cfif>>#first_3_pos#</option>
             </cfloop>
            </select></td>      

       </cfif>

         <cfif isdefined ("form.saverecord") and isdefined("form.newfirstchars")>

 <cfquery name="saverec" datasource="mbtran">

               insert INTO kronos_if.FIRST_3_CHARS_IN_POSITION
              (deptid,union_cd, first_3_chars_in_position,effdt)
                      values('#page.select_Main_Group#','#page.select_Sub_Group#','#FORM.newfirstchars#',sysdate)

</cfquery>               

        </cfif>

</form> 
```

请指教。谢谢

![截屏](../Images/91374ce3febbe3112d4215b048283802.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T23:30:03.407

插入记录的查询位于用于填充下拉列表的查询之后。您需要移动此代码

```
<cfif isdefined ("form.saverecord") and isdefined("form.newfirstchars")>

<cfquery name="saverec" datasource="mbtran">
    insert INTO kronos_if.FIRST_3_CHARS_IN_POSITION
    (deptid,union_cd, first_3_chars_in_position,effdt)
    values ('#page.select_Main_Group#','#page.select_Sub_Group#','#FORM.newfirstchars#',sysdate)

</cfquery>               

</cfif> 
```

在选择查询之上。

您还想研究使用 cfqueryparam - [http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f6f.html](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f6f.html)

# wpf - WPF如何将弹出窗口附加到矩形等简单的UIElement

> ID：14327623
> 
> 赞同：3
> 
> 时间：2013-01-14T22:05:36.973
> 
> 标签：wpf, popup, controls, rectangles

我花了几个小时才弄清楚这个问题的答案，所以我想我会写一个常见问题解答或回答我发现的问题。（它是基于以下线程[Binding Textbox IsFocused to Popup IsOpen 加上附加条件](https://stackoverflow.com/questions/878930/binding-textbox-isfocused-to-popup-isopen-plus-additional-conditions)）

我发现了很多将弹出窗口绑定到切换按钮和其他基于 windows chrome 并具有内置触发器的示例的示例。但在我的应用程序中，我想将一个弹出窗口绑定到一个带有自定义画笔填充的简单矩形。当用户将鼠标悬停在矩形上时，我找不到有关如何打开弹出窗口并保持打开状态的示例。

所以我发布了这个问题，我会立即发布我找到的答案，希望其他人可以从中受益。我还将为任何可以帮助我了解 stackoverflow 是否允许这样的帖子，或者我本可以解决的更好方法的人标记一个答案。

**编辑 1)**

我无法在 8 小时内自行回答，所以这是工作代码：以下是如何在基本 UIElement（如矩形/椭圆/等）上使用弹出窗口的简单示例...

```
<Grid HorizontalAlignment="Stretch" Height="Auto">
    <Rectangle x:Name="PopupRec"
               Grid.Row="0"
               Width="20" Height="20"
               HorizontalAlignment="Right" 
               Fill="Gray" Margin="0,0,0,10" />
    <Popup x:Name="SortPopup" 
           PlacementTarget="{Binding ElementName=PopupRec}" 
           StaysOpen="False" 
           PopupAnimation="Slide" 
           AllowsTransparency="True">
        <Border Background="White" Padding="15">
            <StackPanel Orientation="Vertical">
                <Button Command="{Binding MyCommand}" CommandParameter="5">5</Button>
                <Button Command="{Binding MyCommand}" CommandParameter="10">10</Button>
                <Button Command="{Binding MyCommand}" CommandParameter="15">15</Button>
                <Button Command="{Binding MyCommand}" CommandParameter="20">20</Button>
            </StackPanel>
        </Border>
        <Popup.Style>
            <Style TargetType="{x:Type Popup}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding ElementName=PopupRec, Path=IsMouseOver}" Value="True">
                        <Setter Property="IsOpen" Value="True" />
                    </DataTrigger>
                    <DataTrigger Binding="{Binding ElementName=SortPopup, Path=IsMouseOver}" Value="True">
                        <Setter Property="IsOpen" Value="True" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Popup.Style>
    </Popup>
</Grid> 
```

只需将其粘贴到窗口/用户控件/等...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:01:52.553

我建议进行以下改进。它将使弹出式样式独立于任何元素名称，从而使您能够通过将其放入 Window 或 UserControl 中将其用作默认样式`Resources`。

```
<Style TargetType="{x:Type Popup}">
    <Style.Triggers>
        <DataTrigger Binding="{Binding Path=IsMouseOver,
                               RelativeSource={RelativeSource Self}}"
                     Value="True">
            <Setter Property="IsOpen" Value="True" />
        </DataTrigger>
        <DataTrigger Binding="{Binding Path=PlacementTarget.IsMouseOver,
                               RelativeSource={RelativeSource Self}}"
                     Value="True">
            <Setter Property="IsOpen" Value="True" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

* * *

请注意 a`Rectangle`不是“基本 UIElement”。它是一个[Shape](http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.aspx)，它本身就是一个[FrameworkElement](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.aspx)。

# javascript - Python while 循环转换为 Javascript

> ID：14327647
> 
> 赞同：3
> 
> 时间：2013-01-14T22:07:31.140
> 
> 标签：javascript, python

> **可能重复：**
> [在 Javascript 中休眠](https://stackoverflow.com/questions/758688/sleep-in-javascript)
> [如果我想要一个 JavaScript 版本的 sleep()，我该怎么办？](https://stackoverflow.com/questions/951021/what-do-i-do-if-i-want-a-javascript-version-of-sleep)

我将如何转换以下内容：

```
while True:
    # do something
    time.sleep(2) 
```

进入javascript？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T22:10:51.033

你不会，因为 JavaScript 不会休眠——它是同步的和基于事件的。[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)但是，您可以通过和安排稍后执行的功能[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)：

```
var timerid = setInterval(function() {
    // do something
    // instead of "break", you'd use "clearTimeout(timerid)"
}, 2000); 
```

* * *

对于您的 ajax 进度条，我推荐以下内容，它不会严格每 2 秒触发一次请求，而是等待它们返回：

```
function getUpdate() {
    myAjax(…, function onAjaxSuccess(result) { // an async event as well
        // show(result)
        if (!result.end)
            setTimeout(getUpdate, 2000);
    });
}
getUpdate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:11:33.977

```
setInterval(function() {
  console.log('do something');
}, 2000); 
```

[http://jsfiddle.net/rS9bH/](http://jsfiddle.net/rS9bH/)

# python - 无法让 Fabric 的分离屏幕会话示例工作

> ID：14327649
> 
> 赞同：11
> 
> 时间：2013-01-14T22:07:48.460
> 
> 标签：python, fabric

我正在尝试使用分离的屏幕会话在远程主机上执行脚本。我尝试了[Fabric 给出的示例](http://fabric.readthedocs.org/en/0.9.1/faq.html#why-can-t-i-run-programs-in-the-background-with-it-makes-fabric-hang)，但不幸的是无法让它工作。

```
from fabric.api import run

def yes():
    run('screen -d -m "yes"') 
```

在我的本地机器上执行`fab yes`正确地将它连接到远程主机并说命令已经运行，但是在远程主机上没有执行任何操作。尝试`screen -d -m "yes"`在任何一台机器上都按预期工作。

如果有人能指出我做错了什么，我将不胜感激。另外，顺便说一句，为什么命令中的 yes 周围有引号？没有引号它会工作吗？谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T13:57:32.407

`run('screen -d -m yes; sleep 1')`作品。

不过，不确定织物或屏幕是否应归咎于这种行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-25T16:40:57.127

虽然 AVB 的答案很完美，但我会添加一个小提示，可能会对像我这样的人有所帮助。如果要运行多个命令，请将它们放入一个可执行文件中。

这将不起作用：

`run('screen -d -m "./ENV/bin/activate; python run.py; sleep 1"')`

所以创建一个 run.sh 文件：

```
#!/bin/bash
source ENV/bin/activate
python run.py 
```

并像使用它一样`run('screen -d -m ./run.sh; sleep 1')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-07T14:27:27.030

像这样使用它：

```
run('sudo screen -d -m python app.py && sleep 1', pty=True) 

screen -d -m 
```

启动以断开模式启动的会话

# vba - 基于文本字符串删除 Excel 单元格（当前代码不起作用）

> ID：14327652
> 
> 赞同：0
> 
> 时间：2013-01-14T22:07:54.503
> 
> 标签：vba, excel

我正在尝试删除电子表格中包含 TOTAL 字样的所有单元格。我当前的 VBA 代码：

```
Sub Delete_Rows()
  Dim RNG As Range, cell As Range, del As Range
  Set RNG = Intersect(Range("A1:A5000"), ActiveSheet.UsedRange)
  For Each cell In RNG
  If (cell.Value) = "TOTAL" _
  Then
  If del Is Nothing Then
  Set del = cell
  Else: Set del = Union(del, cell)
  End If
  End If
  Next cell
  On Error Resume Next
  del.EntireRow.Delete
End Sub 
```

这不起作用，我不明白为什么。抱歉，我说得太含糊了，但显然有一些明显的事情在逃避我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:43:52.673

根据我们上面讨论的内容，您正在寻找以下内容：

```
 Sub Delete_Rows()      
  Dim RNG As Range, cell As Range, del As Range      
  Set RNG = Intersect(Range("A1:A5000"), ActiveSheet.UsedRange)

     For Each cell In RNG
        If InStr(1, UCase(cell.Value), "TOTAL") > 0 Then
           If del Is Nothing Then
              Set del = cell
           Else
              Set del = Union(del, cell)
           End If
        End If
     Next cell

  On Error Resume Next
  del.EntireRow.Delete

  End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T01:03:14.147

使用`AutoFilter`or的代码`Find`将比范围循环更有效。

此代码来自我的文章[Using Find and FindNext to effective delete any rows that contains specific text](http://www.experts-exchange.com/Software/Office_Productivity/Office_Suites/MS_Office/Excel/A_2919-Using-Find-and-FindNext-to-efficiently-delete-any-rows-that-contain-specific-text.html)。

```
Option Explicit

Const strText As String = "TOTAL"

Sub ColSearch_DelRows()
    Dim rng1 As Range
    Dim rng2 As Range
    Dim cel1 As Range
    Dim cel2 As Range
    Dim strFirstAddress As String
    Dim lAppCalc As Long

    'Get working range from user
    On Error Resume Next
    Set rng1 = Application.InputBox("Please select range to search for " & strText, "User range selection", Columns("A").Address(0, 0), , , , , 8)
    On Error GoTo 0
    If rng1 Is Nothing Then Exit Sub

    With Application
        lAppCalc = .Calculation
        .ScreenUpdating = False
        .Calculation = xlCalculationManual
    End With

    'a) match string to entire cell, case insensitive
    'Set cel1 = rng1.Find(strText, , xlValues, xlWhole, xlByRows, , False)

    'b) match string to entire cell, case sensitive
    'Set cel1 = rng1.Find(strText, , xlValues, xlWhole, xlByRows, , True)

    'c)match string to part of cell, case insensititive
    Set cel1 = rng1.Find(strText, , xlValues, xlPart, xlByRows, , False)

    'd)match string to part of cell, case sensititive
    ' Set cel1 = rng1.Find(strText, , xlValues, xlPart, xlByRows, , True)

    'A range variable - rng2 - is used to store the range of cells that contain the string being searched for
    If Not cel1 Is Nothing Then
        Set rng2 = cel1
        strFirstAddress = cel1.Address
        Do
            Set cel1 = rng1.FindNext(cel1)
            Set rng2 = Union(rng2.EntireRow, cel1)
        Loop While strFirstAddress <> cel1.Address
    End If

    'Further processing of found range if required
    'This sample looks to delete rows that contain the text in StrText AND where column A contains "Duplicate"
    If Not rng2 Is Nothing Then rng2.EntireRow.Delete

    With Application
        .ScreenUpdating = True
        .Calculation = lAppCalc
    End With

End Sub 
```

# java - Java Timer 在特定时间安排作业 - 忽略 dst 调整

> ID：14327655
> 
> 赞同：3
> 
> 时间：2013-01-14T22:08:14.190
> 
> 标签：java, timer

我们正在使用 Java Timer (Java 1.7) 来安排一些打印作业。无论夏令时如何，我们都希望每天在特定时间打印作业。目前，如果我们将作业设置为在凌晨 4:00 以 24 小时为周期打印，则它会在 DST 日之前正确打印。在秋季 DST 日，它在凌晨 3:00 而不是 4:00 打印。我怎样才能解决这个问题？我们希望它在一年中的每一天的特定时间打印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:22:51.247

您可以`java.util.Calendar`用来获取时间 ( `Date`)，因为`Calendar`该类已经进行了 DST 调整。查看清单 4 中的`DailyIterator.class`实现方式。 [DailyIterator 类](http://www.ibm.com/developerworks/java/library/j-schedule/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T05:37:57.950

Implement your TimerTask as

```
class Task extends TimerTask {

    @Override
    public void run() {
        if (Calendar.getInstance().get(Calendar.HOUR_OF_DAY) == 4) {
            System.out.println(new Date());
        }
    }
} 
```

and schedule it to run at the top of every hour. Task will decide which hour is 4 am in the current Locale

# javascript - Heroku 上的 Node.Js 和 Socket.IO 应用程序

> ID：14327661
> 
> 赞同：0
> 
> 时间：2013-01-14T22:08:39.960
> 
> 标签：javascript, node.js, heroku, hiredis

当我尝试在 Heroku 上部署我的应用程序时出现此错误消息。有什么建议么？我可以轻松地将我的应用程序部署在本地主机上，但它不适用于 Heroku。

我的 Package.JSON 是：

```
{
    "name":"tryout",
    "version":"0.0.1",
    "private":true,
    "scripts":{
        "start":"node app"
    },
    "dependencies":{
        "express":"3.0.0rc3",
        "jade":"*",
        "passport":">= 0.1.11",
        "passport-local":">= 0.1.3",
        "underscore":">= 1.3.3",
        "socket.io":">= 0.9.6",
        "node-uuid":">= 1.3.3",
        "mongoose":">= 3.0.2",
        "bcrypt":">= 0.7.1"
    },
    "engines": {
        "node": "0.8.x",
        "npm": "1.1.x"
    }
} 
```

PS：我根本不使用hiredis。

输入命令为：`git push heroku master`

```
Counting objects: 1731, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (1541/1541), done.
Writing objects: 100% (1731/1731), 7.42 MiB | 400 KiB/s, done.
Total 1731 (delta 192), reused 0 (delta 0)
-----> Removing .DS_Store files
-----> Node.js app detected
-----> Resolving engine versions
       Using Node.js version: 0.8.14
       Using npm version: 1.1.65
-----> Fetching Node.js binaries
-----> Vendoring node into slug
-----> Installing dependencies with npm
       npm WARN package.json socket-app@0.0.1 No README.md file found!
       npm WARN package.json jade@0.27.2 No README.md file found!

       > hiredis@0.1.14 preinstall /tmp/build_37k5gxae7u8vc/node_modules/hiredis
       > make || gmake

       cd deps/hiredis && make static
       make[1]: Entering directory `/tmp/build_37k5gxae7u8vc/node_modules/hiredis/deps/hiredis'
       make[1]: Nothing to be done for `static'.
       make[1]: Leaving directory `/tmp/build_37k5gxae7u8vc/node_modules/hiredis/deps/hiredis'
       node-waf configure build
       Setting srcdir to                        : /tmp/build_37k5gxae7u8vc/node_modules/hiredis 
       Setting blddir to                        : /tmp/build_37k5gxae7u8vc/node_modules/hiredis/build 
       Checking for program g++ or c++          : /usr/bin/g++ 
       Checking for program cpp                 : /usr/bin/cpp 
       Checking for program ar                  : /usr/bin/ar 
       Checking for program ranlib              : /usr/bin/ranlib 
       Checking for g++                         : ok  
       Checking for node path                   : not found 
       Checking for node prefix                 : ok /tmp/node-node-jj2B 
       'configure' finished successfully (0.056s)
       Waf: Entering directory `/Users/USERNAME/Developer/Sites/bla/node_modules/hiredis/build'
       Waf: Leaving directory `/Users/USERNAME/Developer/Sites/bla/node_modules/hiredis/build'
       Traceback (most recent call last):
         File "/tmp/node-node-jj2B/bin/node-waf", line 16, in <module>
           Scripting.prepare(t, os.getcwd(), VERSION, wafdir)
         File "/tmp/node-node-jj2B/bin/../lib/node/wafadmin/Scripting.py", line 145, in prepare
           prepare_impl(t, cwd, ver, wafdir)
         File "/tmp/node-node-jj2B/bin/../lib/node/wafadmin/Scripting.py", line 135, in prepare_impl
           main()
         File "/tmp/node-node-jj2B/bin/../lib/node/wafadmin/Scripting.py", line 188, in main
           fun(ctx)
         File "/tmp/node-node-jj2B/bin/../lib/node/wafadmin/Scripting.py", line 386, in build
           return build_impl(bld)
         File "/tmp/node-node-jj2B/bin/../lib/node/wafadmin/Scripting.py", line 405, in build_impl
           bld.compile()
         File "/tmp/node-node-jj2B/bin/../lib/node/wafadmin/Build.py", line 268, in compile
           os.chdir(self.bldnode.abspath())
       OSError: [Errno 2] No such file or directory: '/Users/USERNAME/Developer/Sites/bla/node_modules/hiredis/build'
       make: *** [all] Error 1
       sh: gmake: not found
       npm ERR! hiredis@0.1.14 preinstall: `make || gmake`
       npm ERR! `sh "-c" "make || gmake"` failed with 127
       npm ERR! 
       npm ERR! Failed at the hiredis@0.1.14 preinstall script.
       npm ERR! This is most likely a problem with the hiredis package,
       npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
       npm ERR!     make || gmake
       npm ERR! You can get their info via:
       npm ERR!     npm owner ls hiredis
       npm ERR! There is likely additional logging output above.

       npm ERR! System Linux 2.6.32-347-ec2
       npm ERR! command "/tmp/node-node-jj2B/bin/node" "/tmp/node-npm-nN2P/cli.js" "install" "--production"
       npm ERR! cwd /tmp/build_37k5gxae7u8vc
       npm ERR! node -v v0.8.14
       npm ERR! npm -v 1.1.65
       npm ERR! code ELIFECYCLE
       npm ERR! 
       npm ERR! Additional logging details can be found in:
       npm ERR!     /tmp/build_37k5gxae7u8vc/npm-debug.log
       npm ERR! not ok code 0
 !     Failed to install --production dependencies with npm
 !     Heroku push rejected, failed to compile Node.js app

To git@heroku.com:arcane-sea-8207.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:arcane-sea-8207.git' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:19:01.833

它似乎`hiredis`是间接需要的`express`，您有一个**候选发布版本**，这可能是问题所在。尝试更改`express`为：

```
"express":"3.x" 
```

另外，请确保您**没有将`node_modules`目录提交到您的 git repo**。添加到`.gitignore`！

# python - 使用 pandas.rolling_mean 的缺失值

> ID：14327664
> 
> 赞同：2
> 
> 时间：2013-01-14T22:08:51.193
> 
> 标签：python, pandas

在计算 rollng_mean 时，我有很多缺失值：

```
import datetime as dt
import pandas as pd
import pandas.io.data as web

stocklist = ['MSFT', 'BELG.BR']

# read historical prices for last 11 years
def get_px(stock, start):
    return web.get_data_yahoo(stock, start)['Adj Close']

today = dt.date.today()
start = str(dt.date(today.year-11, today.month, today.day))

px = pd.DataFrame({n: get_px(n, start) for n in stocklist})
px.ffill()
sma200 = pd.rolling_mean(px, 200) 
```

得到以下结果：

```
In [14]: px
Out[14]: 
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 2836 entries, 2002-01-14 00:00:00 to 2013-01-11 00:00:00
Data columns:
BELG.BR    2270  non-null values
MSFT       2769  non-null values
dtypes: float64(2)

In [15]: sma200
Out[15]: 
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 2836 entries, 2002-01-14 00:00:00 to 2013-01-11 00:00:00
Data columns:
BELG.BR    689  non-null values
MSFT       400  non-null values
dtypes: float64(2) 
```

知道为什么缺少大多数 sma200 rolling_mean 值以及如何获取完整列表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:29:12.053

`px.ffill()`返回一个新的`DataFrame`. 要修改`px`自身，请使用`inplace = True`.

```
px.ffill(inplace = True)
sma200 = pd.rolling_mean(px, 200)
print(sma200) 
```

产量

```
Data columns:
BELG.BR    2085  non-null values
MSFT       2635  non-null values
dtypes: float64(2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T22:17:57.237

如果你 print `sma200`，你可能会发现很多空值或缺失值。这是因为默认情况下，非空值数量的阈值很高`rolling_mean`。

尝试使用

```
sma200 = pd.rolling_mean(px, 200, min_periods=2) 
```

来自[熊猫文档](http://pandas.pydata.org/pandas-docs/dev/computation.html#moving-rolling-statistics-moments)：

> `min_periods`：需要的非空数据点的阈值（否则结果为 NA）

如果您的数据集缺少很多点，您也可以尝试更改窗口的大小。

# solr - solr、solrj：处理请求时捕获的 I/O 异常 (java.net.SocketException)：连接重置

> ID：14327668
> 
> 赞同：0
> 
> 时间：2013-01-14T22:09:17.323
> 
> 标签：solr, solrj, socketexception

我在 solrj 4 中有一个多线程应用程序。线程（最多 25 个）共享一个到 HttpSolrServer 的连接。每个线程都运行一个查询。这工作了一段时间，直到它最终崩溃并显示以下消息：

```
Jan 12, 2013 12:52:15 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute
INFO: Retrying request
Jan 12, 2013 12:52:15 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute
INFO: I/O exception (java.net.SocketException) caught when processing request: Connection reset 
```

我想捕捉这个异常并重置与服务器的连接。我没有通过上述消息获得整个堆栈跟踪，所以我不确定在哪里执行此操作。我引用服务器的唯一地方是进行查询：

```
server.query( query ) 
```

但是这个抛出的唯一异常是我目前正在处理的 SolrServerException。

任何建议将不胜感激。

仅供参考，这就是我设置初始服务器连接的方式：

```
 server = new HttpSolrServer(url);
            server.setSoTimeout(0);
            server.setDefaultMaxConnectionsPerHost(50);
            server.setMaxTotalConnections(128); 
```

# css - 自定义字体在 Chrome 上未正确显示

> ID：14327669
> 
> 赞同：0
> 
> 时间：2013-01-14T22:09:30.020
> 
> 标签：css, google-chrome, fonts, font-face, antialiasing

我正在尝试为我的网站使用自定义字体，但它在 Chrome（最新）和 Opera 浏览器中出现错误，尽管它在其他浏览器上显示正确（流畅）。我尝试了几种不同的字体，在 Chrome/Opera 上的结果相同。

**我的代码：**

```
@font-face {
    font-family: 'mainFont2';
    src: url('../fonts/Eurostile.eot');
    src: local('☺'), url('../fonts/Eurostile.woff') format('woff'), url('../fonts/Eurostile.ttf') format('truetype'), url('../fonts/Eurostile.svg') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

**问题：**

![在此处输入图像描述](../Images/8e628c5fa0c9cf88ebd71e302b40b3bd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:23:12.213

这就是浏览器和操作系统呈现字体的方式。但尝试在 .woff 格式之前调用 .svg 格式可能会解决此问题。

```
@font-face {
    font-family: 'mainFont2';
    src: url('../fonts/Eurostile.eot');
    src: local('☺'),
    url('../fonts/Eurostile.svg') format('svg'), 
    url('../fonts/Eurostile.woff') format('woff'), 
    url('../fonts/Eurostile.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:26:27.070

我会向您推荐这个问题： [https ://stackoverflow.com/a/4060778/1121870](https://stackoverflow.com/a/4060778/1121870)

或尝试字体平滑： [http ://www.w3.org/TR/WD-font/#font-smooth-prop](http://www.w3.org/TR/WD-font/#font-smooth-prop)

这里有一个讨厌的小技巧： [http ://www.elfboy.com/blog/text-shadow_anti-aliasing/](http://www.elfboy.com/blog/text-shadow_anti-aliasing/)

# alloy - 使用弦合金

> ID：14327672
> 
> 赞同：0
> 
> 时间：2013-01-14T22:09:39.913
> 
> 标签：alloy

我有一个合金模块

```
module WorkPlace

sig String{}

sig person{}

sig Employee extends person{

name :String, boss: Employee,worker: set Employee}

sig Employee1 extends person{

name :String, boss: Employee,worker: set Employee}

fact Employee{

all e1:Employee, e2:Employee| (e1.name = e2 && e2.name = e1) =>e1 = e2}

run{} 
```

当我三合会运行此模式时，它给了我这个消息：“第 2 行第 5 列的语法错误：此处可能出现 3 个可能的标记：NAME seq this”

不知道是什么意思？

2\ 如果我有 2 个合金模型，每个模型都有相同的元素，即 mode1/name、model2/name。如何创建一个可以说 mode1/name = model2/name 的事实或 pred？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:53:18.693

1.  由于 user1513683 已经回答：

    > “字符串”是保留字。改用“字符串”（或者，更好的是，“名称”）

2.  您可以从另一个模块打开现有模块，然后在该模块中您可以使用两个模块中的任何一个中存在的所有签名/关系。例如：

模块 1（文件 m1.als）：

```
module m1

sig S1 {} 
```

模块 2（文件 m2.als）：

```
module m2

open m1

sig S2 {}

run { #S1 = #S2 } 
```

# docpad - 密码保护 DocPad 网站的一部分

> ID：14327676
> 
> 赞同：3
> 
> 时间：2013-01-14T22:09:59.677
> 
> 标签：docpad

我想这可能是一个“丢失的案例”，但是是否可以对 DocPad 生成的一个或多个页面进行密码保护？

是否可以制作插件或让您`protected = true`在页面的元数据部分中说的东西？

还是我必须使用 .htaccess 或类似的东西来保护我的页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T16:04:33.600

如果您打算在 node.js 托管服务提供商上托管，那么您可以使用以下要点：[https ://gist.github.com/4557006](https://gist.github.com/4557006)

这个想法是我们使用`serverExtend`事件来添加一个新的 express.js 中间件。通过`serverExtend`事件添加的中间件是在添加 docpad 的中间件之前添加的，因此这是此身份验证层以及自定义路由/中间件等的大多数其他用例的理想位置。然后，我们的自定义中间件将检查该文档是否被请求的文档是否是受保护的文档，如果不是，它会沿着中间件链继续（可能会点击 docpad 中间件并正常渲染），或者如果它是受保护的文档，那么我们会将其转发到 express basicAuth 中间件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T11:29:23.837

我想您确实可以`protected = true`在页面元数据中声明并在以下位置拥有一个名为 protectedPages 的集合`docpad.coffee`：

```
collections:
  protectedPages: (database) ->
    database.findAllLive({protected: true}) 
```

然后创建一个`.htaccess.eco`看起来像这样的文件：

```
AuthUserFile /full/path/to/.htpasswd
AuthType Basic
AuthName "Protected area"

<% for document in @getCollection('protectedPages').toJSON(): %>
  <Files "<%= document.url %>">
    Require valid-user
  </Files>

<% end %> 
```

并且应该很容易将其转换为生成 .htaccess 文件的插件。您可以使用[站点地图插件](https://github.com/benjamind/docpad-plugin-sitemap/blob/master/src/sitemap.plugin.coffee)作为示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T06:04:27.850

另一种方式（但现在只是一个概念）可能是：当您使用保护（受保护：密码或需要访问权限：帐户列表）标记文档时，文档被加密，然后由 docpad 作为静态内容发布.

在客户端，如果您访问受保护的页面，则会加载加密内容，并且脚本会要求输入密码（或您的帐户信息），然后尝试使用它解密内容。

因此，您可以在没有 apache 特定 .htaccess 及其性能问题的静态服务器上拥有受保护的内容。

# javascript - 如何让我的功能重新启动？

> ID：14327678
> 
> 赞同：0
> 
> 时间：2013-01-14T22:09:59.927
> 
> 标签：javascript, restart

此页面在加载时自动调用函数 moveit()。moveit() 上下移动图像（一条线）。我希望这种情况持续发生；但是，我不知道如何让我的功能重新启动。目前，每次该行到达页面底部时，我都会重新加载页面。但这需要很多时间，所以我想重新启动该功能。谢谢！

```
<html manifest="manifest.appcache">

<body onload="moveit(8)">

<img style="margin: 0 auto;" src="http://media.tumblr.com/593368ddaf4ad655258a076f959856fa/tumblr_inline_mgmuspje6G1re2ao1.bmp"></img>
<style type="text/css">

                .moveimage { position:absolute; right:0; bottom:0; z-index:2 }

}

</style>

<script language="JavaScript">

function moveit(spot)
{

if (document.getElementById("image1"))
  {
   var picture=document.getElementById("image1").style;
      if (spot<328)
      {
        picture.bottom= spot;
        spot+=3.7;
        setTimeout('moveit('+spot+')',15);
       }
      if (spot>328)
      {
                picture.top= spot;
        spot+=1.25;
                setTimeout('moveit('+spot+')',10);
      }
      if (spot>650)
      {
                window.location.reload();
      }
   }

}

</body>

</script>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:15:47.513

换行就好

```
window.location.reload(); 
```

至

```
picture.bottom = 0; // reset
picture.top = ""; // reset

moveit(); // and start over again 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:14:14.440

您可以替换此行：

```
window.location.reload(); 
```

有类似的东西：

```
setTimeout(function() { moveIt(8); }, 10); 
```

其中参数`8`与您在`onload`处理程序中使用的参数相同 - 或者当然您可以将其设置为任何其他适当的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T22:17:27.347

此事件处理程序将触发 html 滚动事件。

```
$('html').scroll(function(){
//do something
}) 
```

你也可以在任何带有*overflow:scroll*或*overflow:auto*的容器上使用它。

# c - C 中的命令行选项

> ID：14327682
> 
> 赞同：-3
> 
> 时间：2013-01-14T22:10:16.163
> 
> 标签：c, command-line-arguments, getopt, getopt-long

我想创建一个接受形式参数的 C 程序

-aK

其中 K 是 0-9 之间的某个整数。

我将如何解析/指定此选项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T22:12:16.970

您可能想查看[getopt](http://www.gnu.org/software/libc/manual/html_node/Example-of-Getopt.html)和/或[getopt_long](http://www.gnu.org/software/libc/manual/html_node/Getopt-Long-Options.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:15:57.680

像这样的简单需求可以用 getopt 来解决。

你也可以这样做：

```
 #include <stdio.h>
 #include <string.h>
 int main(int argc, char *argv[])
 {
    char ch, a;
    int d;
    if(argc == 1) return;
    if(argc == 2){
       if(strlen(argv[1]) > 2){
       sscanf(argv[1],"%c%c%d",&ch,&a,&d);
       if(ch == '-' && a == 'a'){
          printf("%d is your number",d);
      }
    }
   }
   return 0;
 } 
```

# django - heroku push 在 django 的 slug 编译器中导致超时错误

> ID：14327699
> 
> 赞同：6
> 
> 时间：2013-01-14T22:11:37.787
> 
> 标签：django, heroku, timeout

我有两个 Heroku 应用程序，暂存和生产。我能够毫无问题地将我的最新代码推送到登台服务器，但是当我尝试将我的最新代码推送到生产环境时，我得到一个超时错误。

查看人们遇到的类似错误，这听起来可能是需求文档或其中一个包的问题。但我不确定如何开始调试。我们使用了很多外部包。它适用于一个 Heroku 应用程序但不能在另一个应用程序上运行的事实让我想知道它到底有多少是以前的应用程序。

据我所知，它似乎在此过程中的不同时间超时，没有任何其他错误。第一次在开始安装 psycopg2 后超时，但最后一次通过 psycopg2 然后在 gevent 安装时超时。

我很茫然，这是我第一次遇到这个问题，这个版本需要尽快完成。有没有人有任何想法？

这是stackoverflow允许我发布的尽可能多的日志：

```
 Running setup.py install for django-extensions

         Running setup.py install for dj-database-url

         Running setup.py install for django-grappelli

         Running setup.py develop for ckeditor

           Creating /app/.heroku/python/lib/python2.7/site-packages/django-ckeditor.egg-link (link to .)
           Adding django-ckeditor 3.6.2 to easy-install.pth file

           Installed /app/.heroku/src/ckeditor
         Running setup.py install for django-heroku-memcacheify

         Running setup.py install for django-tastypie

         Running setup.py install for boto
           package init file 'tests/db/__init__.py' not found (or not a regular file)
           package init file 'tests/ec2/elb/__init__.py' not found (or not a regular file)
           package init file 'tests/utils/__init__.py' not found (or not a regular file)
           package init file 'boto/emr/tests/__init__.py' not found (or not a regular file)

           changing mode of build/scripts-2.7/sdbadmin from 600 to 755
           changing mode of build/scripts-2.7/elbadmin from 600 to 755
           changing mode of build/scripts-2.7/cfadmin from 600 to 755
           changing mode of build/scripts-2.7/s3put from 600 to 755
           changing mode of build/scripts-2.7/fetch_file from 600 to 755
           changing mode of build/scripts-2.7/launch_instance from 600 to 755
           changing mode of build/scripts-2.7/list_instances from 600 to 755
           changing mode of build/scripts-2.7/taskadmin from 600 to 755
           changing mode of build/scripts-2.7/kill_instance from 600 to 755
           changing mode of build/scripts-2.7/bundle_image from 600 to 755
           changing mode of build/scripts-2.7/pyami_sendmail from 600 to 755
           changing mode of build/scripts-2.7/lss3 from 600 to 755
           changing mode of build/scripts-2.7/cq from 600 to 755
           changing mode of build/scripts-2.7/route53 from 600 to 755
           changing mode of build/scripts-2.7/s3multiput from 600 to 755
           changing mode of build/scripts-2.7/cwutil from 600 to 755
           changing mode of build/scripts-2.7/instance_events from 600 to 755
           changing mode of build/scripts-2.7/asadmin from 600 to 755
           changing mode of /app/.heroku/python/bin/sdbadmin to 755
           changing mode of /app/.heroku/python/bin/taskadmin to 755
           changing mode of /app/.heroku/python/bin/lss3 to 755
           changing mode of /app/.heroku/python/bin/cq to 755
           changing mode of /app/.heroku/python/bin/route53 to 755
           changing mode of /app/.heroku/python/bin/cwutil to 755
           changing mode of /app/.heroku/python/bin/pyami_sendmail to 755
           changing mode of /app/.heroku/python/bin/instance_events to 755
           changing mode of /app/.heroku/python/bin/s3multiput to 755
           changing mode of /app/.heroku/python/bin/launch_instance to 755
           changing mode of /app/.heroku/python/bin/s3put to 755
           changing mode of /app/.heroku/python/bin/list_instances to 755
           changing mode of /app/.heroku/python/bin/bundle_image to 755
           changing mode of /app/.heroku/python/bin/kill_instance to 755
           changing mode of /app/.heroku/python/bin/elbadmin to 755
           changing mode of /app/.heroku/python/bin/fetch_file to 755
           changing mode of /app/.heroku/python/bin/cfadmin to 755
           changing mode of /app/.heroku/python/bin/asadmin to 755
         Running setup.py install for django-storages

         Running setup.py install for psycopg2
           building 'psycopg2._psycopg' extension
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/psycopgmodule.c -o build/temp.linux-x86_64-2.7/psycopg/psycopgmodule.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/green.c -o build/temp.linux-x86_64-2.7/psycopg/green.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/pqpath.c -o build/temp.linux-x86_64-2.7/psycopg/pqpath.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/utils.c -o build/temp.linux-x86_64-2.7/psycopg/utils.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/bytes_format.c -o build/temp.linux-x86_64-2.7/psycopg/bytes_format.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/connection_int.c -o build/temp.linux-x86_64-2.7/psycopg/connection_int.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/connection_type.c -o build/temp.linux-x86_64-2.7/psycopg/connection_type.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/cursor_int.c -o build/temp.linux-x86_64-2.7/psycopg/cursor_int.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/cursor_type.c -o build/temp.linux-x86_64-2.7/psycopg/cursor_type.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/lobject_int.c -o build/temp.linux-x86_64-2.7/psycopg/lobject_int.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/lobject_type.c -o build/temp.linux-x86_64-2.7/psycopg/lobject_type.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/notify_type.c -o build/temp.linux-x86_64-2.7/psycopg/notify_type.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/xid_type.c -o build/temp.linux-x86_64-2.7/psycopg/xid_type.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_asis.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_asis.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_binary.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_binary.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_datetime.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_datetime.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_list.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_list.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_pboolean.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_pboolean.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_pdecimal.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_pdecimal.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_pint.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_pint.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_pfloat.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_pfloat.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/adapter_qstring.c -o build/temp.linux-x86_64-2.7/psycopg/adapter_qstring.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/microprotocols.c -o build/temp.linux-x86_64-2.7/psycopg/microprotocols.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/microprotocols_proto.c -o build/temp.linux-x86_64-2.7/psycopg/microprotocols_proto.o -Wdeclaration-after-statement
           gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.6 (dt dec pq3 ext)" -DPG_VERSION_HEX=0x080409 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/app/.heroku/python/include/python2.7 -I. -I/usr/include/postgresql -I/usr/include/postgresql/8.4/server -c psycopg/typecast.c -o build/temp.linux-x86_64-2.7/psycopg/typecast.o -Wdeclaration-after-statement
           gcc -pthread -shared build/temp.linux-x86_64-2.7/psycopg/psycopgmodule.o build/temp.linux-x86_64-2.7/psycopg/green.o build/temp.linux-x86_64-2.7/psycopg/pqpath.o build/temp.linux-x86_64-2.7/psycopg/utils.o build/temp.linux-x86_64-2.7/psycopg/bytes_format.o build/temp.linux-x86_64-2.7/psycopg/connection_int.o build/temp.linux-x86_64-2.7/psycopg/connection_type.o build/temp.linux-x86_64-2.7/psycopg/cursor_int.o build/temp.linux-x86_64-2.7/psycopg/cursor_type.o build/temp.linux-x86_64-2.7/psycopg/lobject_int.o build/temp.linux-x86_64-2.7/psycopg/lobject_type.o build/temp.linux-x86_64-2.7/psycopg/notify_type.o build/temp.linux-x86_64-2.7/psycopg/xid_type.o build/temp.linux-x86_64-2.7/psycopg/adapter_asis.o build/temp.linux-x86_64-2.7/psycopg/adapter_binary.o build/temp.linux-x86_64-2.7/psycopg/adapter_datetime.o build/temp.linux-x86_64-2.7/psycopg/adapter_list.o build/temp.linux-x86_64-2.7/psycopg/adapter_pboolean.o build/temp.linux-x86_64-2.7/psycopg/adapter_pdecimal.o build/temp.linux-x86_64-2.7/psycopg/adapter_pint.o build/temp.linux-x86_64-2.7/psycopg/adapter_pfloat.o build/temp.linux-x86_64-2.7/psycopg/adapter_qstring.o build/temp.linux-x86_64-2.7/psycopg/microprotocols.o build/temp.linux-x86_64-2.7/psycopg/microprotocols_proto.o build/temp.linux-x86_64-2.7/psycopg/typecast.o -L/usr/lib -lpq -o build/lib.linux-x86_64-2.7/psycopg2/_psycopg.so
/app/slug-compiler/lib/utils.rb:66:in `block (2 levels) in spawn': command='/app/slug-compiler/lib/../../tmp/buildpacks/python/bin/compile /tmp/build_2ptirkdt1juhy /app/tmp/repo.git/.cache' exit_status=0 out='' at=timeout elapsed=900.018394947052 (Utils::TimeoutError)
    from /app/slug-compiler/lib/utils.rb:52:in `loop'
    from /app/slug-compiler/lib/utils.rb:52:in `block in spawn'
    from /app/slug-compiler/lib/utils.rb:47:in `popen'
    from /app/slug-compiler/lib/utils.rb:47:in `spawn'
    from /app/slug-compiler/lib/buildpack.rb:37:in `block in compile'
    from /app/slug-compiler/lib/buildpack.rb:35:in `fork'
    from /app/slug-compiler/lib/buildpack.rb:35:in `compile'
    from /app/slug-compiler/lib/slug.rb:497:in `block in run_buildpack'
    from /app/slug-compiler/lib/utils.rb:121:in `log'
    from /app/slug-compiler/lib/slug.rb:748:in `log'
    from /app/slug-compiler/lib/slug.rb:496:in `run_buildpack'
    from /app/slug-compiler/lib/slug.rb:125:in `block (2 levels) in compile'
    from /app/slug-compiler/lib/utils.rb:102:in `block in timeout'
    from /usr/local/lib/ruby/1.9.1/timeout.rb:58:in `timeout'
    from /app/slug-compiler/lib/utils.rb:102:in `rescue in timeout'
    from /app/slug-compiler/lib/utils.rb:97:in `timeout'
    from /app/slug-compiler/lib/slug.rb:114:in `block in compile'
    from /app/slug-compiler/lib/utils.rb:121:in `log'
    from /app/slug-compiler/lib/slug.rb:748:in `log'
    from /app/slug-compiler/lib/slug.rb:113:in `compile'
    from /app/slug-compiler/bin/slugc:85:in `block in <main>'
    from /app/slug-compiler/lib/slug.rb:505:in `block in lock'
    from /app/slug-compiler/lib/repo_lock.rb:44:in `call'
    from /app/slug-compiler/lib/repo_lock.rb:44:in `run'
    from /app/slug-compiler/lib/slug.rb:505:in `lock'
    from /app/slug-compiler/bin/slugc:66:in `<main>'
 !     Heroku push rejected, failed to compile Python app

Auto packing the repository for optimum performance.
Connection to 10.217.65.204 closed by remote host.
To git@heroku.com:belo.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:belo.git'
Completed with errors, see above 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-29T16:18:41.720

现在有一个适当但未记录的解决方案来解决这个问题（github 历史显示它是在 2013 年 2 月实施的）：`COMPILE_TIMEOUT`环境变量。将其设置为 50 分钟超时（默认为 '900'，或 15 分钟）：

```
$ heroku config:set COMPILE_TIMEOUT=3000 
```

（注意：您需要启用[user-env-compile](https://devcenter.heroku.com/articles/labs-user-env-compile)才能使用此功能）

**更新：**请阅读有关[此答案](https://stackoverflow.com/a/16283513/471671)的评论以获取重要更新——长话短说，Heroku 建议在这些情况下直接联系支持人员，并且 COMPILE_TIMEOUT 不再有效或从未作为此特定问题的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:58:07.913

我收到了 Heroku 支持的回复。在我的特定情况下，问题在于我们在需求中存在太多依赖关系。这是一个非常大规模的项目，我们使用了许多第三方模块，安装和创建 slug 的时间太长了。

解决方案是注释掉我们一半的需求并推送，然后撤消注释并再次推送。

以下是 Heroku 的回复：

> 这是很多依赖！
> 
> 我建议只用一半的依赖项推送一次，然后再用所有的依赖项推送一次。这样你就不会超时。
> 
> 一旦安装它们，它们就会被缓存，所以你不应该再次遇到这种情况。

# ruby-on-rails - XPath：选择仅包含某个字符串的节点

> ID：14327701
> 
> 赞同：2
> 
> 时间：2013-01-14T22:12:03.053
> 
> 标签：ruby-on-rails, xpath

我正在为网站制作一个解析器，但我无法只选择我想要的东西。

我想为仅包含“ **World:** ”的 td-tag 选择以下同级，但是我也得到了另一个包含“ **Former World:** ”的 td-tag，我不想选择那个。

这是我的 XPath 选择：

```
//td[contains(text(), 'World:')]/following-sibling::td 
```

所以我想要一个只包含“**世界：** ”的标签，而不是另一个包含“**前世界：** ”的标签

有任何想法吗？花了几个小时寻找解决方案，但现在我到了这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:28:00.493

如果您将其更改为，它是否有效

```
//td[text()='World:']/following-sibling::td 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:33:02.847

你试过用equals测试文本吗？

```
//td[text() = 'World:']/following-sibling::td

or

//td[. = 'World:']/following-sibling::td 
```

# java - Spring Data JPA（Hibernate）：如何仅使用抽象超类中的字段检索具体实体？

> ID：14327706
> 
> 赞同：13
> 
> 时间：2013-01-14T22:12:26.753
> 
> 标签：java, hibernate, inheritance, jpa, spring-data-jpa

考虑以下层次结构，其中实体`WidgetA`和`WidgetB`扩展抽象`Widget`超类：

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
public abstract class Widget implements Serializable  {

    @Column(name="serialNumber", length=64, nullable=false, unique=true)
    private String serialNumber;
    ... 
```

和

```
@Entity
public class WidgetA extends Widget implements Serializable  {
... 
```

和

```
@Entity
public class WidgetB extends Widget implements Serializable  {
... 
```

我需要通过 搜索 Widgets `serialNumber`，但我不知道我在运行时要搜索的 Widget 的具体类型。搜索小部件的正确方法是什么`serialNumber`，如果`serialNumber`a 是 a `WidgetA`，则返回一个实例`WidgetA`，依此类推？

我正在尝试`findyBySerialNumber()`在`Widget`DAO 中使用 a ，但我收到一个错误消息，告诉我无法实例化抽象类，这是有道理的，但我认为持久性提供程序会知道如何查看具体的子实体表和返回正确的实例。我可以让它这样做吗？

我正在使用“Spring Data JPA”，所以 Widget DAO 非常简单：

```
public interface WidgetDAO extends JpaRepository<Widget, Long> {
    public Widget findBySerialNumber(String serialNumber);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T20:08:05.937

您似乎没有为您的小部件层次结构明确指定鉴别器。我认为您可以尝试明确定义它，因为 Spring Data 将操纵字节码来生成查询，因此我怀疑 SpringData 需要明确定义这些值。

此外，在子类中，您需要指出每个子类的鉴别器值。

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
@DiscriminatorColumn(name="WIDGET_TYPE")
public abstract class Widget implements Serializable  {

    @Column(name="serialNumber", length=64, nullable=false, unique=true)
    private String serialNumber;
    ... 
```

-

```
@Entity
@DiscriminatorValue("A")
public class WidgetA extends Widget implements Serializable  {
... 
```

-

```
@Entity
@DiscriminatorValue("B")
public class WidgetB extends Widget implements Serializable  {
... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T21:26:13.893

您的对象和注释对我来说看起来不错。我能够拿走它们，将小部件保存到数据库中，然后毫无问题地取出它。

我认为问题出在您的数据中。Hibernate 可能在表中找到了在`Widget`任何子类表中都没有对应行的行，因此试图创建超类的实例，但失败了。

使用`InheritanceType.JOINED`，您可以指定一个[discriminator](http://openjpa.apache.org/builds/1.0.2/apache-openjpa-1.0.2/docs/manual/manual.html#jpa_overview_mapping_discrim)，或者让它为您完成（我相信通过检查子类表中是否存在具有该 ID 的行）。但无论哪种方式，您都必须检查数据以确保超类表中没有匹配的子类行的条目。

作为一项规则，我支持 @ben75 的建议，即您明确指定`@Discriminator`类层次结构。最好控制您的鉴别器值，以便以后的代码更改不会以意想不到的方式改变值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T19:33:03.593

Hibernate 很好地支持该查询，并且很乐意返回正确子类的实例。在不知道试图创建 Widget 实例的 Spring Data 实现中是什么的情况下，您应该能够只声明查询并让它直接运行它，而不是使用解析器。

```
public interface WidgetDAO extends JpaRepository<Widget, Long> {

    @Query("select w from Widget w where w.serialNumer = ?1")
    public Widget findBySerialNumber(String serialNumber);
} 
```

# java - 按钮数组，单击时仅使一个按钮更改其文本

> ID：14327709
> 
> 赞同：3
> 
> 时间：2013-01-14T22:12:39.170
> 
> 标签：java, swing, jbutton

我有一个用按钮填充的数组，我希望单个按钮在单击时更改其文本。

```
for (int i = 0; i<4; i++)
        {
            button[i] = new JButton ("Add");
            button[i].addActionListener(this);

            box[i] = new JComboBox();
            foodOptions.add(box[i]);
            foodOptions.add(button[i]);

        }

public void actionPerformed (ActionEvent e)
    {

        button[this].setText("I've been clicked!");

    } 
```

当前由于类型不兼容而不起作用，什么格式合适？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T22:15:32.533

是的，将一个对象 , 传递给一个需要 int 的数组索引是没有意义的`this`，而不是你的 GUI 对象，所以我不确定你想用这个实现什么。

只需从 ActionEvent 的`getSource()`方法中获取对已单击的 JButton 的引用：

```
JButton btn = (JButton)e.getSource();
btn.setText("I've been clicked"); 
```

**编辑：**
你也应该避免使用`this`你的 ActionListener ，因为这意味着你可能让你的 GUI 类实现一个 ActionListener ，它要求可怜的类做太多事情，做太多事情。使用匿名内部类或使用 AbstractActions 会更好。

# python - 循环路径中的现有目录

> ID：14327714
> 
> 赞同：0
> 
> 时间：2013-01-14T22:12:57.847
> 
> 标签：python

我想遍历 Python 路径中的所有目录。所以我尝试了以下方法：

```
import os, glob, sys

os.chdir('/')
dir_list = glob.glob('*')
for wd in dir_list if os.path.isdir(wd) is True:
    print(wd + " is a directory.") 
```

似乎我有某种`syntax error`. 我应该做什么而不是`is True`？我曾以为`os.path.isdir()`返回一个`boolean`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:14:18.400

您正在将生成器表达式与 for 循环混合。你不能那样做。将`if`声明放在它自己的行上：

```
for wd in dir_list:
    if os.path.isdir(wd):
        print(wd + " is a directory.") 
```

请注意，您不需要测试`is True`; 这正是该`if`声明所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:58:58.070

您需要将迭代器的创建与 分开`for`，您可以在一行中这样做：

```
for wd in (x for x in dir_list if os.path.isdir(x)): 
```

我不认为好看，我想如果你在前一行做会更好，但无论如何都是你的电话。

# jquery - 从 cookie 中读回可排序的顺序

> ID：14327716
> 
> 赞同：0
> 
> 时间：2013-01-14T22:13:06.953
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有一个“portlet”风格的仪表板，它使用 jQuery UI“可排序”交互，我想在页面加载时读回本地存储的状态。因此，当我在页面上移动 portlet 时，当我离开并返回页面时，我希望它们位于同一位置。我需要在客户端（“本地首选项”）执行此操作，而不是将状态更改推送到服务器。

在这里看到这个问题：[jQuery UI Sortable and Cookie](https://stackoverflow.com/questions/1370417/jquery-ui-sortable-and-cookie)

虽然它有一些很好的指示，但我不禁想知道我是否遗漏了一些更基本的东西......已经有几年了，也许有更好的包含工具。

我已经得到了这个更新功能的地方：

```
update : function(e,ui) {
  // where "shortname" is a unique string identified elsewhere on the page
  localConfig.layout[shortname] = [];
  var containers = $('.widgetContainer');
  containers.each(function(){
    localConfig.layout[shortname].push($(this).sortable("toArray"));
  });
} 
```

这会产生一个数组数组，因此：

`[["someWidget", "anotherWidget"],["widgetInOtherColumn", "anotherWidgetInOtherColumn"]]`

我不会对代码感到厌烦，但我确信我可以在 localStorage 中设置它（如果不可用，则为 cookie）。所以存储它会被添加到上面的代码中。

真正的问题很简单：

是否有使用 jQuery UI API 读取我的数组数组的简单或内置机制？还是我必须“手动”进入，抓取数组并遍历它们以移动 DOM 节点？我的意思是上面的代码甚至不需要留下来。jQuery UI "Tabs" 小部件只有一个可以传递的参数（`cookie: {args}`……不知道为什么它不在 API 中，但它可以工作！）；sortable 是否有类似的东西包含在 jQUI 中或作为插件？

如果只能通过编写新方法来实现，那么最有效的方法是什么？留给我自己的设备，我会抓取所有节点，将它们移动到某个存储容器中，然后通过迭代器将它们移回它们需要的位置。在我看来，切换元素顺序的方式肯定比这更简单。

谢谢！

# ios - iOS - 存储用户登录会话的正确方法

> ID：14327717
> 
> 赞同：3
> 
> 时间：2013-01-14T22:13:14.260
> 
> 标签：ios, cocoa-touch, cocoa

存储告诉用户是否登录的会话的最简单正确方法是什么？我什至可以将基本信息存储在内存中（登录用户的名字和姓氏等）。

我听说过单例对象，但我不确定这是否是一个解决方案。我的主要目标是存储应用程序的基本用户信息。

这能行吗？

```
[[NSUserDefaults standardUserDefaults] valueForKey:@"someKeyName"] 
```

但是，如果我打算将它用于大约 8 个值，我不确定这是否有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:25:37.930

如果您不打算在会话之间存储任何信息，那么单例就可以了。

例如，如果您想保存用户的电子邮件地址，这样他们就不必每次登录时都填写，您需要使用

```
[[NSUserDefaults standardUserDefaults] valueForKey:@"someKeyName"]; 
```

就像你的问题一样。

# c++ - 两个物体的蛮力碰撞检测太慢

> ID：14327720
> 
> 赞同：2
> 
> 时间：2013-01-14T22:13:36.837
> 
> 标签：c++, opengl, graphics, collision-detection, brute-force

我有一个项目来查看两个对象（每个对象由大约 10,000 个三角形组成）是否使用 OpenGL 中呈现的蛮力碰撞算法发生碰撞。两个物体不动。我将不得不将它们翻译到某些位置并找到例如 100 个三角形碰撞等。

到目前为止，我已经编写了一个代码来实际检查这两个模型之间的线平面相交。如果我把所有东西都弄直了，我需要检查第一个模型的每个三角形的每个边缘与另一个模型的每个三角形的每个平面。这实际上意味着需要数小时才能结束的 3 个“for”循环。我想我一定有什么问题，或者整个概念都被误解了。

```
 for (int i=0; i<model1_faces.num; i++) {
    for (int j=0; j<3; j++) {
        x1[j] = model1_vertices[model1_faces[i].v[j]-1].x;
        y1[j] = model1_vertices[model1_faces[i].v[j]-1].y;
        z1[j] = model1_vertices[model1_faces[i].v[j]-1].z;
    }
    A.x = x1[0]; 
    A.y = y1[0]; 
    A.z = z1[0];
    B.x = x1[1];
    B.y = y1[1];
    B.z = z1[1];
    C.x = x1[2];
    C.y = y1[2];
    C.z = z1[2];

    TriangleNormal = findNormalVector((B-A)*(C-A));
    RayDirection = B-A;

    for (int j=0; j<model2_faces.num; j++) {
        PointOnPlane = model2_vertices[model2_faces[j].v[0]-1]; // Any point of the triangle
        system("PAUSE");
        float D1 = (A-PointOnPlane)^(TriangleNormal);   // Distance from A to the plane of j triangle
        float D2 = (B-PointOnPlane)^(TriangleNormal);

        if ((D1*D2) >= 0) continue; // Line AB doesn't cross the triangle
        if (D1==D2) continue;       // Line parallel to the plane

        CollisionVect = A + (RayDirection) * (-D1/(D2-D1));
        Vector temp;
        temp = TriangleNormal*(RayDirection);
        if (temp^(CollisionVect-A) < 0) continue; 
        temp = TriangleNormal*(C-B);
        if (temp^(CollisionVect-B) < 0) continue; 
        temp = TriangleNormal*(A-C);
        if (temp^(CollisionVect-A) < 0) continue;

        // If I reach this point I had a collision //
        cout << "Had collision!!" << endl; 
```

我也不知道究竟应该在哪里调用上面的这个函数。在我的渲染函数中，以便它在渲染时连续运行或只运行一次，因为我只需要检查非移动对象碰撞的事实？

我将不胜感激，如果您太忙或太无聊而无法查看我的代码，请帮助我更多地理解整个概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:46:57.167

正如已经建议的那样，您可以使用包围体。为了充分利用这些，您可以将包围体安排在八叉树中，在这种情况下，体积是盒子。

在最外层，每个包围体都包含整个对象。因此，您可以通过比较它们的零级边界体积来测试这两个对象是否*可能相交。*测试所有面都轴对齐的两个框的交集是微不足道的。

八叉树将索引哪些*面*属于边界体积的哪些细分。所以有些面孔当然会属于不止一卷，可能会被多次测试。

这样做的好处是，您可以剪掉许多由于只有少数子卷实际上会相交而保证失败的蛮力测试。实际的相交测试仍然是蛮力的，但只针对一小部分人脸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:21:37.400

正如您所注意到的，蛮力碰撞检测通常无法扩展。:) 通常的方法是定义一个包含您的模型/形状的[包围体并简化相交计算。](http://en.wikipedia.org/wiki/Bounding_volume)边界体有各种形状和大小，具体取决于您的模型。它们可以是球体、盒子等。

除了定义边界体之外，您还需要检测`update`代码段中的碰撞，您很可能会在一段`delta`时间内经过。通常需要该`delta`时间来确定对象需要移动多远以及在该时间范围内是否发生碰撞。

# html - 下拉菜单不会掉落，而是移到一边

> ID：14327722
> 
> 赞同：1
> 
> 时间：2013-01-14T22:13:43.217
> 
> 标签：html, css

正常状态： ![正常状态](../Images/bcb27bdb75e1aef07c537b0c7de9a897.png)

悬停状态： ![悬停状态](../Images/7ff53748b998ab2196d2242a94a49cc0.png)

伙计们，这可能是小事，但我找不到这种“小事”的来源。正如您从图片链接中看到的那样，我尝试在那里创建一个下拉菜单。可悲的是，每当我将触发器悬停在下拉菜单上时，菜单不会下拉，而是水平显示并与主菜单集成。

这是我的简化 html（我只使用 home、about 和 benchmark。关于 about 的下拉触发器）

```
<div class="header">
    <div id="navbar">
         <ul id="nav" >
         <li class="rhombus"><a class="Home"        href="#"><span><p>Home</p></span></a></li>
         <li class="rhombus"><a class="About"   href="#"><span><p>About</p></span></a>
             <ul>
             <li><a class="History" href="#"><span><p>History</p></span></a></li>
             <li><a class="Board"   href="#"><span><p>Board</p></span></a></li>
             <li><a class="Vision"  href="#"><span><p>Vision &amp; Mission</p></span></a></li>
             </ul>
         </li>
        <li class="rhombus"><a class="Benchmark"                    href="#"><span><p>Benchmark &amp; Market</p></span></a></li>
         </ul>
 </div></div> 
```

这是简化的 CSS

```
/* centering container */
.outerwrap {width:100%; height:100%; margin:0px; padding:0px; display:table; position:absolute; top:0px; left:0px;}
.innerwrap {margin:0px; padding:0px; display:table-cell; vertical-align:middle;}

/* header */
.header {height:27.82738095238095%; width:100%; position:absolute; top:0%; left:0%; z-index:100;}

/* navigation bar */
#navbar {position:relative; top:60.2%; left:5%; z-index:100;}

#nav, #nav ul{margin:0px; padding:0px; list-style-type:none; list-style-position:outside;}   

#nav a:link, #nav a:active, #nav a:visited{height:31px; display:block; text-decoration:none; background:yellow}

#nav a:hover{background:red;}

#nav li ul {position:relative; display:none;}

#nav li ul li a:link, #nav li ul li a:visited {height:31px; background:green;}

#nav li ul li a:hover {background:blue}

.History{width:50px;float:left;}
.Board{width:50px;float:left;}
.Vision{width:50px;float:left;}

li.rhombus
{
    position: relative;
    transform: skew(-35deg);
    -webkit-transform: skew(-35deg);
    -moz-transform: skew(-35deg);
    -ms-transform: skew(-35deg);
    -o-transform: skew(-35deg);
    width:96.1%;
}

a.Home      {width:50px;float:left;}
a.About     {width:50px;float:left;}
a.Benchmark         {width:50px;float:left;}

li.rhombus span 
{
    transform: skew(35deg);
    -webkit-transform: skew(35deg);
    -moz-transform: skew(35deg);
    -ms-transform: skew(35deg);
    -o-transform: skew(35deg);
    display:block;
}

#nav li:hover ul ul, #nav li:hover ul ul ul, #nav li:hover ul ul ul ul{display:none;}

#nav li:hover ul, #nav li li:hover ul, #nav li li li:hover ul, #nav li li li li:hover ul{display:block;}

.test{} 
```

是因为我`<a></a>`在下拉菜单中使用“float:left”作为我的属性之一吗？如果我删除该属性，将会发生什么：

![移除的属性](../Images/eea9e0e4ba96a67c0f4eecd8a27518dc.png)

我的下拉列表有些奇怪.. 它需要在 css 中添加一个 {CSS 块}，无论我将它附加到类、id 还是什么都没有，例如：

```
.unusedclass{CSS}
.unusedid{CSS}
{} 
```

如果我不提供其中之一，那么“下拉菜单”将不会移动，而是显示悬停状态。（图 2）。

这是简化的小提琴：[fiddle](http://jsfiddle.net/xLqPE)

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:20:17.330

不要为每个子菜单创建一个类。 [这](https://stackoverflow.com/questions/13119001/create-a-custom-drop-down-select-like-the-one-used-on-twitter-when-user-logs-out/13458669#13458669)是一个类似的帖子，它将获得您想要的结果。然后，您可以将每个块设置为倾斜、颜色等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:22:19.127

尝试将以下内容添加到您的`.History`etc 类中：

```
clear:right; 
```

# c++ - C++ 网络程序运行但没有输出

> ID：14327728
> 
> 赞同：0
> 
> 时间：2013-01-14T22:14:05.327
> 
> 标签：c++, network-programming

我的简单程序通过编译器没有给出错误并且运行良好，但是在有人连接之前它也没有给出它应该的输出。我做了很多研究和编辑，但无法弄清楚。另外我如何让多个人连接？任何帮助使其工作的帮助将不胜感激。提前致谢！！！代码如下。

```
#include <iostream>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <stdio.h>
#include <string.h>

char msg[20];

using namespace std;

int main(int argc, char *argv[])
{
    cout << "Made it to main!";

    int listener_d = socket(PF_INET, SOCK_STREAM, 0);

    struct sockaddr_in name;
    name.sin_family = PF_INET;
    name.sin_port = (in_port_t)htons(30000);
    name.sin_addr.s_addr = INADDR_ANY;
    if(bind (listener_d, (struct sockaddr *) &name, sizeof(name)) == -1)
    {
        cout << "Can't bind the port!";
    }
    else
    {
        cout << "The port has been bound.";
    }

    listen(listener_d, 10);
    cout << "Waiting for connection...";

    while(1)
    {
        struct sockaddr_storage client_addr;
        unsigned int address_size = sizeof(client_addr);
        int connect_d = accept(listener_d, (struct sockaddr *)&client_addr, &address_size);
        cin >> msg;

        send(connect_d, msg, strlen(msg), 0);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:18:09.807

也许您应该尝试刷新输出。

```
std::cout << "Waiting for connection..." << std::flush; 
```

# c# - ASP .Net - 更改/更新动态创建的文本框

> ID：14327729
> 
> 赞同：0
> 
> 时间：2013-01-14T22:14:12.813
> 
> 标签：c#, asp.net, code-behind

好的，在这一点上已经走了很远，但需要具有出色 ASP 技能的人的帮助。我正在使用后面的代码来使用 SQL 查询的结果填充 ASP 表。只读值存储在`.text`某些表格单元格中，而读写值存储在`.text`文本框控件中（动态创建并添加到表格单元格中。）

这在第一次加载时工作正常。当页面使用不同的查询重新加载时（例如：用户选择不同的列进行排序），表格单元格值会正确重新填充，而文本框值保持不变。在查询之前抛出一个`table.rows.clear()`似乎并不能解决这个问题。

更多信息：

*   我创建了一种方法来`textbox.text`使用`table.findcontrol()`. 当绑定到按钮时，此方法适用于规范（这表明 findcontrol 能够查找/更新文本框），但如果重新加载页面，所有受影响的文本框仍保持空白。如果放置在页面加载中，该方法什么也不做（文本框保留它们以前的值。）在调试模式下，findcontrol 在按钮上使用时会提取一个值，但在添加到页面加载时会返回 null。我已经用`table.rows.clear()`评论和未评论的方式做到了这一点。
*   我还尝试将所有代码放入`oninit`. 这似乎没有任何明显的区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:29:53.677

**必须在每个页面请求上添加**动态控件，最好在`Init`事件期间添加。听起来您没有按时重新创建它们。

在每个页面请求中添加它们，作为页面生命周期的一部分，它们将从`viewstate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:32:55.787

为了使动态控件保留其值，您需要：

a.) 确保为页面启用 Viewstate。b.) 在每次页面加载时重新创建控件，确保您创建的控件具有与最初赋予控件相同的 ID。您还需要在加载视图状态之前执行此操作（最好在 Onit 或 PreInit 方法中。请参阅此处的页面生命周期：http: [//msdn.microsoft.com/en-us/library/ms178472%28v=vs.100 %29.aspx](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)

# powershell - Get-TFSChildItem 不显示已删除的文件/文件夹

> ID：14327737
> 
> 赞同：0
> 
> 时间：2013-01-14T22:15:10.537
> 
> 标签：powershell, tfs

我正在尝试“销毁”我们源代码管理中的一些旧文件夹并尝试编写脚本。我在用

```
get-tfschilditem -item $/WIP -server $tfsServer -Deleted
```

但是 -Deleted 开关似乎没有任何区别。如果我做

```
get-tfschilditem -item $/WIP/**MyFolder** -server $tfsServer
```

我可以在源代码管理中看到已删除的文件夹。

这是一个错误还是我做错了什么？

我正在使用 Win8 和 TFS Powertools 2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:25:28.250

你可以试试这个：

```
Get-TfsChildItem -Item $/WIP -server $tfsServer -Deleted  | Where {$_.DeletionId -ne 0} 
```

但这仍然不会返回与以下相同的输出：

```
tf dir /deleted 
```

这似乎是 Get-TfsChildItem 中的一个错误。

# java - 在不使用多线程 Java 的情况下停止先前的搜索？

> ID：14327738
> 
> 赞同：0
> 
> 时间：2013-01-14T22:15:18.810
> 
> 标签：java, javascript, html

我有一个网页，允许用户输入搜索条件。使用 get 方法提交搜索表单后，控制器类读取搜索参数，将它们设置为请求属性，然后返回页面，然后调用具有数据库连接和 sql 查询的 java 类。我的问题是：当用户决定在当前搜索尚未完成时执行新搜索时，有没有办法在开始新搜索之前终止服务器上的当前搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:06:56.333

You need to `interrupt()` the thread that is doing the search and -admitted that the search Thread is doing some `Thread.sleep()` in between of performing the operations (eventually you should add those) - the thread will be interrupted by an `InterruptedException` that you should handle to break the search processing.

Still, you need to save the `Thread.currentThread()` somewhere (i.e. in the session) in order to retrieve a reference by the second one.

It's not trivial, and it's not very clean; since you need to put some interruption points in your search logic (i.e. the `Thread.sleep()` I mentioned before) and handle the `InterruptedException` properly.

For sure, the easier way is to ignore that the previous thread is still running and perform a new search.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:25:27.530

你真的没有在这里提供很多信息。特别是你没有写你如何连接到数据库。如果您使用的是**JDBC ，您可以使用**[Statement.cancel()](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#cancel%28%29)取消执行查询。此外，您应该在会话中的某处保存有关当前正在运行的查询的信息。

# visual-studio - 如何从 Visual Studio 代码覆盖结果中排除所有构造函数？

> ID：14327743
> 
> 赞同：0
> 
> 时间：2013-01-14T22:15:40.277
> 
> 标签：visual-studio, visual-studio-2012, code-coverage

我正在创建一个 RunSettings 文件，它将从 VS2012 的代码覆盖结果中排除所有属性和构造函数。我知道 ExcludeFromCodeCoverage 属性，但是我想在 runsettings 文件中使用正则表达式来实现这一点。我的 get 和 set 方法的正则表达式确实可以消除属性的代码覆盖，但它不适用于构造函数。

```
<Functions>
                        <Exclude>
                            <Function>^Fabrikam\.UnitTest\..*</Function>
                            <Function>^std::.*</Function>
                            <Function>^ATL::.*</Function>
                            <Function>.*::__GetTestMethodInfo.*</Function>
                            <Function>^Microsoft::VisualStudio::CppCodeCoverageFramework::.*</Function>
                            <Function>^Microsoft::VisualStudio::CppUnitTestFramework::.*</Function>                             
                             <Function>.*\.ctor.*</Function>                                
                              <Function>.*\.set_.*</Function>
                              <Function>.*\.get_.*</Function>
                        </Exclude>
                    </Functions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T02:29:22.183

你有没有尝试过

```
<Function>.*\.\.ctor.*</Function> 
```

因为ctor前面已经有一个点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-22T10:24:35.590

我今天遇到了同样的问题。在玩了一些正则表达式之后，我想出了这个：

```
<Function>.*(\.[^\.\(]*)\1\(.*</Function> 
```

[或在这里尝试](https://regex101.com/r/fO0bQ6/1)正则表达式

# winapi - 防止生成 WM_SETCURSOR 和 WM_NCHITTEST 消息

> ID：14327750
> 
> 赞同：3
> 
> 时间：2013-01-14T22:16:01.413
> 
> 标签：winapi

我正在制作一个将自身连接到目标应用程序的应用程序，并且在被用户激活时，会阻止所有键盘和鼠标窗口消息到达目标应用程序的窗口进程。我的应用程序通过将传入的输入消息（例如 , `WM_MOUSEMOVE`）转换为 来做到这`WM_NULL`一点，以便窗口 proc 不知道发生了输入。

问题是当鼠标输入发生时，Windows 也会自动发送`WM_SETCURSOR`和`WM_NCHITTEST`到窗口进程（例如，当应用程序调用时）。`PeekMessage`这些消息不会发布到窗口的消息队列中，因此我无法将它们更改为 WM_NULL。

我最初通过子类化窗口 proc 并简单地忽略`WM_SETCURSOR`and来解决这个`WM_NCHITTEST`问题，但是子类化似乎与我所迷恋的一些应用程序存在兼容性问题。

**我的问题是：**我如何首先防止`WM_SETCURSOR`和`WM_NCHITTEST`生成，*或者*如何防止它们到达应用程序的窗口过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:35:01.530

## 一些尝试的想法

我刚刚用 WH_CALLWNDPROCRET Windows Hook 实现了一个全局/系统范围的 CallWndRetProc（就像它在下面链接的过去帖子中描述的那样）。

[http://help.lockergnome.com/windows2/Igor-SetCursor-SetWindowsHookEx--ftopict285504.html](http://help.lockergnome.com/windows2/Igor-SetCursor-SetWindowsHookEx--ftopict285504.html)

将其与隐藏所有系统光标结合使用，`SetSystemCursor`可以有效地隐藏大多数应用程序的光标。

如果你想继续攻击这个目标应用程序，你可以尝试使用 API Monitor 来诊断发生了什么：[http ://www.rohitab.com/apimonitor](http://www.rohitab.com/apimonitor)

rohitab 的人暗示最终会发布他的源代码。他的网站似乎有一些更好的关于 Hooking、Subclassing、Injecting 等的论坛。

听起来您成功使用`SetWindowLongPtr()`了 ，但是有几种不同的方法可以进入您正在处理的程序的地址空间...

你试过`SetCapture()`吗？

## 其他链接

以下是一些可能有用的其他链接：

[http://support.microsoft.com/kb/31747](http://support.microsoft.com/kb/31747)

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms646262(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646262(v=vs.85).aspx)

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms633569%28v=vs.85%29.aspx#winproc_subclassing](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633569%28v=vs.85%29.aspx#winproc_subclassing)

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms648395(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648395(v=vs.85).aspx)

希望有帮助。祝你好运。

# javascript - 您如何加载 2 个可能在它们之间具有公共变量的 javascript 文件并在 HTML 页面上访问它？

> ID：14327752
> 
> 赞同：1
> 
> 时间：2013-01-14T22:16:11.627
> 
> 标签：javascript, html

我得到了这个 HTML 页面。我想从 2 个具有公共变量的 javascript 文件中访问变量。我必须从这些与相应 javascript 相关的变量中获取值。我尝试使用加载它们，`<script>`但是当我访问 js 变量时，它只从最后一个 js 文件中获取值，换句话说，最后一个加载的 js 文件会覆盖变量值，并且只有这些值可以访问。我真的很感激这方面的帮助。

谢谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T22:17:44.587

您需要命名变量或使用具有不同名称的变量。听起来你在做什么相当于：

```
var x = 'foo';
var x = 'bar';

console.log(x);

    > bar 
```

这应该是有道理的。但是，如果您使用名称空间，那么事情对您来说会更好。考虑两个文件，`script-1.js`并且`script-2.js`：

```
// script-1.js
var s1 = {
    x:'foo'
}

// script-2.js
var s2 = {
    x:'bar'
} 
```

...然后...

```
console.log(s1.x);

    > foo

console.log(s2.x);

    > bar 
```

当然，这是一个相当陈词滥调的例子。

**编辑**

如果您不能自己更改文件，请执行此操作 - 在加载 script-1 之后但在加载 script-2 之前将值保存到其他名称/对象：

```
<script type="text/javascript" src="script-1.js"></script>

<script type="text/javascript">
    var s1 = {
        // Save off values here
        x:x,
        y:y
    }
</script>

<script type="text/javascript" src="script-2.js"></script>

// Then...
console.log(s1.x);  // will output the value from script-1.js
console.log(x);     // will output the value from script-2.js 
```

不漂亮，但应该可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T22:43:05.247

如果您的问题是变量发生冲突，并且您希望单独维护它们的值，则应将每个文件中的代码包装在一个闭包中。在这里，您可以应用立即调用函数表达式模式。

```
(function() {
    // your code here
    // all of it!
}()); 
```

这完全可以防止全局变量，如果您不需要跨文件共享任何内容，*这*就是要走的路。

如果你需要创建一个共享全局，这样声明它：

```
var x = x || {}; // empty object as an example value 
```

在每个文件的开头执行此操作。如果 x 是新的，它将被声明。如果它已经被声明，它将保留其先前的值。

你可以使用命名空间来做同样的事情，我强烈推荐它作为减少全局变量的简单方法。

```
var APP = APP || {};

APP.x = APP.x || {}; // example property of APP, in this case initializing an object 
```

你也可以随时结合技术。在闭包之外设置一个命名空间对象，并在其中访问它们。这样，您只公开一个全局并限制其他所有内容的范围。

我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T22:33:48.943

如果您对 javascript 文件有一定的控制权，Madbreak 的答案就是他们要走的路：每当您定义一个 javascript 库时，您都应该使用匿名函数和命名空间以避免冲突。

否则，您可以异步加载它们，`eval`一次加载一个（可能有一种不那么邪恶的方法，但我不知道） - 这样您就可以在下载的回调中使用第一个在它被第二个覆盖之前。但是，如果您长期需要它们，那么您可能会不走运。

如果您需要一个在另一个之前运行，但请记住，您需要在第一次下载*的回调*中加载第二个（除非您正在执行更多异步操作，否则无关紧要），否则这是一个竞争条件哪个会先走。

# java - 如何使用 Web 应用程序运行无限期后台进程/线程

> ID：14327753
> 
> 赞同：1
> 
> 时间：2013-01-14T22:16:13.397
> 
> 标签：java, jakarta-ee, web-applications, glassfish

我希望能够从 Web 应用程序启动/暂停/退出后台进程。我希望该过程无限期地运行。

用户将访问网页。按下一个按钮来启动线程，它会一直运行，直到用户告诉它停止。

我正在尝试确定执行此操作的最佳工具。我看过像 Quartz 这样的东西，但我还没有看到任何关于像 Quartz 这样的东西是否适合无限线程的讨论。

我的第一个想法是做这样的事情。

```
public class Background implements Runnable{
    private running = true;

    run(){
         while(running){
              //processing 
        }
    }

    stop(){
        running = false;
    }
}

//Then to start
Background background = new Background();
new Thread(background).start();
getServletContext().setAttribute("background", background);

//Then to stop
background = getServletContext().getAttribute("background");
background.stop(); 
```

我要测试一下。但我很好奇是否有更好的方法来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:16:59.313

首先，所有`Object`放入 Context 的 s 都必须实现`Serializable`.

我不建议将`Background`对象放入上下文中，而是创建一个`BackgroundController`具有`private boolean running = true;`属性的类。getter 和 setter 应该是`synchronised`，以防止后台线程和 web 请求线程发生冲突。同样，`private boolean stopped = false;`应该将它们放在同一个类中。

我还进行了一些其他更改，您必须将循环核心分解为小单元（如 1 次迭代），以便可以在活动中间的某个位置停止进程。

代码如下所示：

```
public class BackgroundController implements Serializable {
    private boolean running = true;
    private boolean stopped = false;
    public synchronized boolean isRunning() { 
        return running; 
    }
    public synchronized void setRunning(boolean running) { 
        this.running = running; 
    }
    public synchronized boolean isStopped() { 
        return stopped; 
    }
    public synchronized void stop() { 
        this.stopped = true; 
    }
}
public class Background implements Runnable {
    private BackgroundController control;
    public Background(BackgroundController control) {
        this.control = control;
    }

    run(){
         while(!isStopped()){
              if (control.isRunning()) {
                   // do 1 step of processing, call control.stop() if finished
              } else {
                   sleep(100); 
              }
        }
    }

}

//Then to start
BackgroundController control = new BackgroundController();
Background background = new Background(control);
new Thread(background).start();
getServletContext().setAttribute("backgroundcontrol", control);

//Then to pause
control = getServletContext().getAttribute("backgroundcontrol");
control.setRunning(false);

//Then to restart
control = getServletContext().getAttribute("backgroundcontrol");
control.setRunning(true);

//Then to stop
control = getServletContext().getAttribute("backgroundcontrol");
control.stop(); 
```

# java - 有没有一种方法可以使用委托设计模式而不会失去 Java 中的可替代性？

> ID：14327762
> 
> 赞同：1
> 
> 时间：2013-01-14T22:17:26.137
> 
> 标签：java, composition, aggregation, liskov-substitution-principle

这个问题是指在[此处找到的](http://en.wikipedia.org/wiki/Delegation_pattern)**委托**设计模式。

我的游戏引擎有许多接口代表各种实体：

*   播放器
*   车辆
*   网
*   等等

并且每一个都可以渲染，因此它们实现了包含方法的 Renderable 接口`render()`。

**方法一**

使用委托，示例如下所示：

```
public interface Vehicle {

    public void drive();

}

public class Car implements Vehicle {

    public Renderable renderable;

    @Override
    public void drive() { // ... }

} 
```

每当我想渲染一辆车时，我只需调用`car.renderable.render();`.

这种方法的问题是我无法创建一个 List 并遍历它。

**方法二**

为了解决这个问题，我可以让 Vehicle 扩展 Renderable：

```
public interface Vehicle extends Renderable {

    public void drive();

} 
```

但问题在于，如果我定义 Car、Bicycle、Truck、Tank 等，这些类中的每一个都必须填写 render() 的代码（这可能是相同的）。

有没有办法保持在我的 Vehicle 接口中扩展 Renderable 的好处，而不必在所有实现 Vehicle 的具体类中定义 render() ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:40:08.337

关于我的评论，

> 每个拥有 Renderable 的类是否都有公共的 Renderable getRenderable() 方法？如果是这样，难道不能把它做成一个界面，让你拥有这些野兽的集合吗？

我的意思是这样的：

```
interface Renderable {
   void render();
}

interface RenderDelegator {
   Renderable getRenderable();
   void setRenderable(Renderable renderable);
}

abstract class Vehicle implements RenderDelegator {
   private Renderable renderable;

   @Override
   public Renderable getRenderable() {
      return renderable;
   }

   @Override
   public void setRenderable(Renderable renderable) {
      this.renderable = renderable;
   }

   public abstract void drive();
}

class Car extends Vehicle {
   @Override
   public void drive() {
      // TODO finish!
   }

} 
```

并拒绝关于实施 Iterable 的建议。我不确定我在想什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:38:08.963

另一种方法可能是将 Renderable 对象的概念与其可能的委托渲染器分开；这样，如果您的渲染器代码特定于单个类，您可以选择委派给通用渲染器或直接在类中实现 render() 方法。

进一步思考，你的渲染器可能需要查询它试图渲染的任何实体的实例——想象你的车辆有方法来获取它在地图上的位置，渲染器需要获取这些值才能在正确的位置；这就是 Renderer 接口接收 Renderable 实例的原因。

```
interface Renderable {
    void render();
}

interface Vehicle extends Renderable {
    void drive();
}

interface Renderer<T extends Renderable> {
    void render(T renderable);
}

public class VehicleRenderer implements Renderer<Vehicle> {
    public void Render(Vehicle renderable) {
        // TODO: Render a Vehicle.
    }
}

public class Car implements Vehicle {
    private Renderer<Vehicle> renderer;

    public void setRenderer(Renderer<Vehicle> renderer) {
        this.renderer = renderer;
    }

    public void render() {
        renderer.render(this);
    }

    public void drive() {
        // TODO: Drive the car.
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T22:34:40.397

如果该`render`方法的代码在不同的类之间是相同的，则执行以下操作：

引入一个名为`AbstractRenderable`implements的抽象类`Renderable`。然后让`Car`,`Bicycle`等类扩展`AbstractRenderable`和实现`Vehicle`（或`Player`, 等）。

在`AbstractRenderable`类中，实现`render`方法。这样，所有汽车、自行车等都依赖于“相同”的渲染代码。另外，如果渲染代码确实不同`Tank`，例如，您可以简单地覆盖该`render`方法。

# coq - （A <-> B）-> A = B？

> ID：14327767
> 
> 赞同：1
> 
> 时间：2013-01-14T22:17:36.107
> 
> 标签：coq

假设我定义了这个集合。

```
Inductive Set_1 : Set :=
  | Constr_1 : Set_1
  | Constr_2 : Set_1. 
```

能证明这个说法吗？

```
(Constr_1 = Constr_2) = False 
```

如果是这样，我使用什么策略？这可能对`autorewrite`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:44:48.837

`(A <-> B) -> A = B`称为命题外延性，由[经典逻辑](http://coq.inria.fr/library/Coq.Logic.ClassicalFacts.html)隐含。

但是你不需要它来使用与`autorewrite`,的等价物`Require Import Coq.Setoids.Setoid`。

# localhost - 在 Ubuntu 上使用 LAMP 将 localhost 与多个目录相关联

> ID：14327771
> 
> 赞同：0
> 
> 时间：2013-01-14T22:17:44.667
> 
> 标签：localhost, lamp, ubuntu-12.04

我目前正在运行 Ubuntu 12.10，并且刚刚在我的系统上安装了 LAMP（使用 PHP 5）。我知道网址

```
http://localhost/subdir/name.php 
```

默认情况下，与文件相关联

```
/var/www/subdir/name.php 
```

有没有一种方法可以配置 apache2 以便 localhost 可以与多个目录相关联，而不是像 $PATH 用于可执行文件？IOW 我希望能够进行设置，以便

```
http://localhost/subdir/name.php 
```

如果有一个名为的文件，则不会给出“404 Not Found”错误

```
/var/www/subdir/name.php 
```

或一个名为

```
/home/peter/subdir/name.php 
```

谢谢，彼得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:31:56.420

Apache 本身只能有一个配置为文档根目录的目录。您可以通过配置 using mod_dir 来执行您所要求的`FallbackResource`操作，这会将所有无法满足的请求定向到您选择的某个脚本，然后使用您选择的该脚本在替代目录中查找以提供资源。

所以是这样的：

```
FallbackResource /other_dir.php 
```

`other_dir.php`然后你可以在里面做类似的事情

```
require('/home/peter' . $_SERVER['REQUEST_URI']); 
```

这是超级hacky，不推荐。我很难想出一个你应该做你提议做的事情的理由。

# c++ - 我可以在 Windows 上使用 _bstr_t 类在多字节和 Unicode 之间进行转换吗？(C++)

> ID：14327776
> 
> 赞同：3
> 
> 时间：2013-01-14T22:18:01.900
> 
> 标签：c++, unicode, multibyte, bstr, bstr-t

`BSTR`这种奇怪的 Windows 数据类型是否具有一些特定用途，例如 COM 函数。根据 MSDN，它包含一个`WCHAR`字符串和一些其他内容，例如长度描述符。Windows 也很好地为我们提供了封装的`_bstr_t` [类](http://msdn.microsoft.com/en-us/library/zthfhkd6%28v=vs.90%29.aspx)`BSTR`；它负责分配和解除分配，并为您提供一些额外的功能。它有[四个构造函数](http://msdn.microsoft.com/en-us/library/9k3ebasf%28v=vs.90%29.aspx)，包括一个接受 a`char*`和一个接受a 的构造函数`wchar_t*`。MSDN对前者的描述： “*通过调用来**构造一个对象，创建一个新对象，然后封装它。这个构造函数首先进行多字节到Unicode的转换。”`_bstr_t``SysAllocString``BSTR`*

它还具有可以提取指向字符串的指针的[运算符](http://msdn.microsoft.com/en-us/library/btdzb8eb%28v=vs.90%29.aspx)，如、 和中的任何一个`char*`，我很确定这些都是以空值结尾的，这很酷。`const char*``wchar_t*`

我花了一些时间阅读如何在多字节和 Unicode 之间进行转换，并且我已经看到很多关于如何使用`mbstowcs`和的讨论，以及由于编码可能不同，以及`wcstomb`如何更好，等等等等。这一切似乎都让人头疼，所以我想知道我是否可以构造 a并使用操作来访问字符串，这将是......更少的代码行：`MultiByteToWideChar``WideCharToMultiByte``_bstr_t`

```
char* multi = "asdf";
_bstr_t bs = _bstr_t(mb);
wchar_t* wide = (wchar_t*)bs; // assume read-only 
```

我想我对此的直观回答是我们不知道 Windows 在幕后做什么，所以如果我在使用`mbstowcs`/时遇到问题`wcstomb`（我想我的意思是`mbstowcs_s`/ `wcstomb_s`）而不是`MultiByteToWideChar`/ `WideCharToMultiByte`，我不应该冒险，因为它是Windows 可能使用这些。（几乎可以肯定不会使用后者，因为我没有在此处指定“代码页”，不管是什么。）老实说，我还不确定我是否认为`mbstowcs_s`and`wcstomb_s`功能可以满足我的目的，因为我不确实掌握了所有不同的编码和东西，但这是一个完全不同的问题，它似乎在整个互联网上都得到了解决。

Sooooo，除了潜在的担忧之外，这样做有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:44:47.267

在生产代码中使用[`_bstr_t::_bstr_t(const char*)`](http://msdn.microsoft.com/en-us/library/9k3ebasf%28v=vs.71%29.aspx)并不是一个好主意：

> `_bstr_t`通过调用`SysAllocString`创建一个新`BSTR`对象并封装它来构造一个对象。此构造函数首先执行多字节到 Unicode 的转换。**如果`s2`太大，您*[原文如此]*可能会产生堆栈溢出错误。**在这种情况下，请将您的转换`char*`为`wchar_t`with `MultiByteToWideChar`，然后调用`wchar_t *`构造函数。

除此之外，这[`_bstr_t::operator wchar_t*() const throw()`](http://msdn.microsoft.com/en-us/library/btdzb8eb%28v=vs.71%29.aspx)似乎几乎没有用。它仅用于结构成员提取，因此您被限制为`const`：

> 这些运算符可用于提取指向封装的 Unicode 或多字节 BSTR 对象的原始指针。运算符将指针返回到实际的内部缓冲区，因此无法修改生成的字符串。

所以`_bstr_t`只是一个用于封装`BSTR`s 的辅助对象，而且是一个平庸的对象。使用`MultiByteToWideChar`and进行转换`WideCharToMultiByte`是一个更好的选择，原因有很多：

*   它更不容易崩溃。
*   您不会得到`const`缓冲作为回报，因为您提供了自己的缓冲。
*   这些函数的名称是自描述的。通过不相关类型的构造函数和强制转换运算符进行转换不是。

# coldfusion - 提交表单的 ListToArray

> ID：14327782
> 
> 赞同：2
> 
> 时间：2013-01-14T22:18:24.280
> 
> 标签：coldfusion

我有一个包含多个同名元素的 Web 表单，例如：

```
<textarea name="instructions"><cfoutput>#struct.instructions# </cfoutput> </textarea> 
```

表单内置在 html/coldfusion/js 中，存储数据的数据库是 MS Access。

在我用来处理表单提交的脚本中，我使用 ListToArray 方法来获取具有给定名称的所有字段。

```
<cfset arrayInstr = ListToArray(Form.instructions)> 
```

好的，这就是问题所在。如果提交的文本包含逗号，ListToArray 会将其解释为多个元素。

例如，如果我尝试提交字符串“Bla bla bla bla”，一切都会好起来的，但如果字符串是“bla, bla, bla”，则只有“bla”会提交到数据库。

是否有其他方法可以处理具有相同名称的多个字段？我想避免给出唯一的名称。谢谢你，亚努斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T23:39:07.543

如果您给表单字段名称（如指令 1、指令 2、指令 3），则很容易在循环中执行您需要的任何逻辑。

```
for( var i = 1; i <=3; i++ ){
    var theValue = form["instructions" & i];

    //do whatever you need to do with theValue//
} 
```

我认为这比使用 JavaScript 向表单字段添加分隔符要容易得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T22:24:33.153

问：有没有其他方法可以处理多个同名字段？

答：不直接

Javascript 将项目视为一个数组。您需要做的是让 Javascript 循环遍历所有值并创建一个具有不同分隔符的字符串并将其放入隐藏字段中。`<textarea>`将保持不同的 ' 和逗号之间的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T17:18:22.610

[`getHTTPRequestData`](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7c11.html)您可以使用该函数创建单个表单字段的数组。

```
<cfset Variables.RequestData = getHTTPRequestData()>
<cfset Variables.RequestContent = Variables.RequestData.Content>

<cfset Variables.FormScope = []>
<cfloop index="Variables.CurrentItem" list="#Variables.RequestContent#" delimiters="&">
    <cfset ArrayAppend(Variables.FormScope, URLDecode(ListLast(Variables.CurrentItem, "=")))>
</cfloop> 
```

# android - AsyncTask Android 强制关闭应用程序

> ID：14327784
> 
> 赞同：0
> 
> 时间：2013-01-14T22:18:30.283
> 
> 标签：android, android-listview

> **可能重复：**
> [Android 运行时验证错误](https://stackoverflow.com/questions/6280551/android-runtime-verify-error)

我正在尝试让一个应用程序显示来自 YouTube 上一个名为 illbehonest 的频道的可用视频列表。我究竟做错了什么？我正在使用 Java-JSON 库来做到这一点。每次我尝试进入 VideoPlay 活动时，应用程序都会关闭（顺便说一下，它的名称与其功能无关）。这是代码：

```
package com.aer.illbehonest;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;

import net.sf.json.JSONArray;
import net.sf.json.JSONObject;
import net.sf.json.JSONSerializer;

import org.apache.commons.io.IOUtils;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class VideoPlay extends Activity {   
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_video_play);

        new ShowTitlesTask().execute("");
    }

    class ShowTitlesTask extends AsyncTask<String, Void, ArrayList<String>> {

        ArrayList<String> titlesList;

        @Override
        protected ArrayList<String> doInBackground(String... args) {

            URL jsonURL = null;
            try {
                jsonURL = new URL("http://gdata.youtube.com/feeds/api/users/illbehonest/uploads?v=2&alt=jsonc");
            } catch (MalformedURLException e3) {
                e3.printStackTrace();
            }
            URLConnection jc = null;
            try {
                jc = jsonURL.openConnection();
            } catch (IOException e2) {
                e2.printStackTrace();
            }
                InputStream is = null;
            try {
                is = jc.getInputStream();
        } catch (IOException e1) {
        e1.printStackTrace();
            }
            String jsonTxt = null;
            try {
                jsonTxt = IOUtils.toString(is);
            } catch (IOException e) {
                e.printStackTrace();
            }

            JSONObject json = (JSONObject) JSONSerializer.toJSON(jsonTxt);

            JSONObject jdata = json.getJSONObject("data");

            JSONArray jentry = jdata.getJSONArray("items");
            for (int entryNumber = 0; entryNumber<=25; entryNumber++){
                    JSONObject entry = jentry.getJSONObject(entryNumber);
                    titlesList.add(entry.getString("title"));
            }

            return titlesList;
    }
    protected void onPostExecute(ArrayList<String> result) {
        ListView listView = (ListView)VideoPlay.this.findViewById(R.id.videolist);
        ArrayAdapter<String> adapter = new ArrayAdapter<String> (VideoPlay.this,
                android.R.layout.simple_list_item_1, android.R.id.text1, titlesList);
            (listView).setAdapter(adapter);
        }

    }
} 
```

这是 LogCat 输出：

```
01-14 16:58:36.699: W/dalvikvm(11938): Unable to resolve superclass of Lnet/sf/json/JSONException; (1034)

01-14 16:58:36.707: W/dalvikvm(11938): Link of class 'Lnet/sf/json/JSONException;' failed

01-14 16:58:36.707: W/dalvikvm(11938): VFY: unable to resolve exception class 813 (Lnet/sf/json/JSONException;)

01-14 16:58:36.707: W/dalvikvm(11938): VFY: unable to find exception handler at addr 0x2e

01-14 16:58:36.707: W/dalvikvm(11938): VFY:  rejected Lnet/sf/json/JSONSerializer;.toJSON (Ljava/lang/Object;Lnet/sf/json/JsonConfig;)Lnet/sf/json/JSON;

01-14 16:58:36.707: W/dalvikvm(11938): VFY:  rejecting opcode 0x0d at 0x002e

01-14 16:58:36.707: W/dalvikvm(11938): VFY:  rejected Lnet/sf/json/JSONSerializer;.toJSON (Ljava/lang/Object;Lnet/sf/json/JsonConfig;)Lnet/sf/json/JSON;

01-14 16:58:36.707: W/dalvikvm(11938): Verifier rejected class Lnet/sf/json/JSONSerializer;

01-14 16:58:36.707: W/dalvikvm(11938): threadid=11: thread exiting with uncaught exception (group=0x41b28930)

01-14 16:58:36.707: E/AndroidRuntime(11938): FATAL EXCEPTION: AsyncTask #1

01-14 16:58:36.707: E/AndroidRuntime(11938): java.lang.RuntimeException: An error occured while executing doInBackground()

01-14 16:58:36.707: E/AndroidRuntime(11938):    at android.os.AsyncTask$3.done(AsyncTask.java:299)

01-14 16:58:36.707: E/AndroidRuntime(11938):    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)

01-14 16:58:36.707: E/AndroidRuntime(11938):    at java.util.concurrent.FutureTask.setException(FutureTask.java:219)

01-14 16:58:36.707: E/AndroidRuntime(11938):    at java.util.concurrent.FutureTask.run(FutureTask.java:239)

01-14 16:58:36.707: E/AndroidRuntime(11938):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)

01-14 16:58:36.707: E/AndroidRuntime(11938):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)

01-14 16:58:36.707: E/AndroidRuntime(11938):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)

01-14 16:58:36.707: E/AndroidRuntime(11938):    at java.lang.Thread.run(Thread.java:856)

01-14 16:58:36.707: E/AndroidRuntime(11938): Caused by: java.lang.VerifyError: net/sf/json/JSONSerializer

01-14 16:58:36.707: E/AndroidRuntime(11938):    at com.aer.illbehonest.VideoPlay$ShowTitlesTask.doInBackground(VideoPlay.java:63)

01-14 16:58:36.707: E/AndroidRuntime(11938):    at com.aer.illbehonest.VideoPlay$ShowTitlesTask.doInBackground(VideoPlay.java:1)
01-14 16:58:36.707: E/AndroidRuntime(11938):    at android.os.AsyncTask$2.call(AsyncTask.java:287)

01-14 16:58:36.707: E/AndroidRuntime(11938):    at java.util.concurrent.FutureTask.run(FutureTask.java:234)

01-14 16:58:36.707: E/AndroidRuntime(11938):    ... 4 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:21:50.543

你有一个 JSONException 但你没有包含任何 JSONException 处理程序。

是的，Android 有自己的 JSON 库，尽管 GSON 带有一个非常方便的序列化程序，如果您需要存储具有大量键的对象，它可以节省大量编码时间

# c# - c# Castle Windsor container.Register 问题

> ID：14327792
> 
> 赞同：0
> 
> 时间：2013-01-14T22:19:02.037
> 
> 标签：c#, castle-windsor

我是使用城堡温莎的新手。我已经在我的 MVC4 应用程序中设置并正常运行。为简洁起见，我的解决方案的受影响布局是：

*实体.dll* -`ICompanyRepository`

*DAL.dll* - `Company`：`ICompanyRepository`

基本上我有一堆像上面那样设置的类和接口，所以如果需要，我可以用另一个存储库切换 DAL。我目前已经使用以下方法向 Castle Windsor 注册了类和接口：

```
container.Register(Component.For<Entities.ICompanyRepository>().ImplementedBy<DAL.Company>().LifestyleTransient()); 
```

我的接口和实现它的类在不同的项目中，因此在我的项目中是 dll。我想做但无法弄清楚的是使用一个像上面这样的毯子配置行：

```
container.Register(AllTypes.FromAssemblyNamed("Entities")); 
```

我尝试了许多不同的组合，但我无法让它发挥作用。有任何想法吗？如果这是更好的选择，我愿意从配置文件加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:21:28.290

我假设您所有的存储库都在实现一个通用接口，例如 IRepository，如果不是，您应该这样做，而不仅仅是为了 IoC 目的......

您可以使用以下注册来注册基于通用接口的所有组件。安装程序应该位于入口点项目中，因此它应该能够看到任何其他项目/dll。

```
container.Register(Classes
.FromAssemblyNamed("DAL")//assembly containing concrete types
.BasedOn(typeof(IRepository<>))
.WithService.DefaultInterfaces()//concrete will be associated(windosr configuration) with closest interface
.Configure(c => c.YourPolicystrategy())); 
```

# css - 由于最小化导致的 Css div 对齐问题

> ID：14327793
> 
> 赞同：0
> 
> 时间：2013-01-14T22:19:09.923
> 
> 标签：css, html

我一直在研究网站的界面。我被困在一件简单的事情上，我花了几个小时却没有得到解决。我正在给出我的项目的原型。当您放大页面或最小化页面时，对齐会变得混乱。我该如何解决？

[http://www.thewebblog.net/server/sosyalagDenemem](http://www.thewebblog.net/server/sosyalagDenemem)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:31:05.983

您正在使用浮点数，这就是它们的工作方式。尽可能多的将适合同一行，其余的将包裹在下面。当容器调整大小时，从边缘掉落的任何浮动都会再次移动到下方。

最简单的创可贴解决方案是添加一个带有固定的包装器 div，该 div`width`足够大以适合所有浮动而不用包装，或者至少一个`min-width`. 请注意，这将导致任何小于此宽度的窗口上出现水平滚动条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:31:28.747

如果“最小化”是指调整窗口大小，那是因为您正在浮动这些列。有两种方法可以解决这个问题。

1）让您的网站响应。您可以在网上找到**大量**关于此的信息，但这里有一些资源可以帮助您入门：

[Ethan Marcotte 的 Dao of Flexibility 演讲](http://vimeo.com/34662135)

[超越常见的媒体查询断点](http://mobile.smashingmagazine.com/2012/10/24/beyond-common-media-query-breakpoints/)

2）添加一个`min-width`包含`<div>`所有浮动元素的。确保宽度大于排列的所有浮动项目。这将确保如果窗口变得比容器小，而不是将这些元素推到彼此下方，它只会阻止容器变得更远并创建一个滚动条。

请注意，这不一定是针对移动设备、平板电脑等进行设计的最佳方式，但它肯定会阻止您的网站在“普通”桌面显示器上崩溃。如果这是您唯一的目标受众，那么它没有问题。

这方面的一个例子是：

```
.container {
 min-width:960px;
} 
```

# python - python可以有没有“self”作为第一个参数的类或实例方法吗？

> ID：14327794
> 
> 赞同：7
> 
> 时间：2013-01-14T22:19:13.380
> 
> 标签：python, oop, methods

> **可能重复：**
> [为什么需要在 Python 方法中显式添加“self”参数？](https://stackoverflow.com/questions/68282/why-do-you-need-explicitly-have-the-self-argument-into-a-python-method)
> [Python“自我”解释](https://stackoverflow.com/questions/2709821/python-self-explained)

这只是为了我自己的熏陶。我正在学习 python 并已使用 python 进入 OOP。我见过的类中方法的每个示例都将“self”作为第一个参数。所有方法都是这样吗？如果是真的，难道不能编写 python 以使这个论点被理解，因此不需要？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-14T22:23:43.103

如果您想要一个不需要访问的方法`self`，请使用[`staticmethod`](http://docs.python.org/2/library/functions.html#staticmethod)：

```
class C(object):
    def my_regular_method(self, foo, bar):
        pass
    @staticmethod
    def my_static_method(foo, bar):
        pass

c = C()
c.my_regular_method(1, 2)
c.my_static_method(1, 2) 
```

如果您想访问*类*，而不是实例，请使用[`classmethod`](http://docs.python.org/2/library/functions.html#classmethod)：

```
class C(object):
    @classmethod
    def my_class_method(cls, foo, bar):
        pass

c.my_class_method(1, 2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T22:22:17.220

静态方法不需要 self ~~，它们在类上操作~~

在这里看到一个很好的静态解释： [Python中的静态类变量](https://stackoverflow.com/questions/68645/static-class-variables-in-python)

# ios - Cocosd2d 和 body.m_radius 取决于设备类型

> ID：14327795
> 
> 赞同：0
> 
> 时间：2013-01-14T22:19:14.790
> 
> 标签：ios, objective-c, cocos2d-iphone

我对 cocos2d 中的点有点困惑。我有通用游戏，当我以点为单位设置身体位置时，它适用于所有设备（iPhone、iPhone HD、iPad、iPad HD）。我用 cocos2d 后缀制作了 4 种尺寸的纹理，效果也很好。

但我有身体（b2CircleShape），我需要设置这个圆的 m_radius。我有这行：

```
b2CircleShape myDynamicBody;
myDynamicBody.m_radius=0.48; 
```

值 0.48 针对 iPhone HD 进行了优化，它在 iPhone（iPhone 和 iPhone HD）上都运行良好，但在 iPad 和 iPad HD 设备上它非常小。我该怎么办？检查设备类型，当我发现 iPad 将其乘以 1.33 时（当我尝试将其乘以 1.33 时，它在两台 iPad 上都可以正常工作）。或者有没有更好（或推荐）的方法，如何解决这个问题？

谢谢你的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:29:07.313

您应该在 iPad 上调整点对表 (PTM_RATIO)。

'points' 的原因是 Box2d 被调整为对 0.1 到 10 米之间的物体进行物理模拟，典型的物体约为 1x1 米。它仍然适用于这些尺寸之外的物体，但可靠性会降低。

另一方面，您的屏幕分辨率约为 320x480 或 1024x768 点。因此，我们需要一种将精灵表示转换为适合 Box2d 的大小的方法。为此，我们使用“点对米”比率 (PTM)。

如果您的典型精灵是 64x64，您应该选择 64 的 PTM 比率。这将使 box2d 将您的 64x64 精灵视为 1x1，这是在其上运行模拟的理想尺寸。

解释了这一点后，PTM_RATIO 在手机和平​​板电脑外形尺寸之间变化的原因现在很明显：这是因为它们具有不同的分辨率。iPhone 上 64x64 的精灵在平板电脑上约为 128x128。

因此，要在 ipad 上获取 PTM_RATIO，请在 iPhone 上选择一个精灵，然后在 iPad 上查看相应的尺寸。现在将 iPhone PTM 乘以这两个图像的大小之比。

# algorithm - 在欧几里得空间中嵌入图

> ID：14327796
> 
> 赞同：6
> 
> 时间：2013-01-14T22:19:16.133
> 
> 标签：algorithm, graph

我有一个完全无向图，其中节点表示平面上点上的点，边是点之间的近似欧几里得距离。我想将此图“嵌入”到二维空间中。也就是说，我想将每个顶点转换为 (x,y) 位置元组，以便对于任意两个两个顶点 v 和 w，边 (v,w) 的权重接近 dist(v,w)。

例如，如果我有一个带有节点 A、B、C 和 D 的图和带有权重 (A,B) 的边：20；(A,C): 22; (A,D): 26; (B, C): 30; (B, D): 20, (C, D): 19, 那么你可以分配点 A: (0,0); B: (10, 0); C: (0, 10); D: (10, 10)。显然这是不完美的，但它是一个合理的近似值。

我不在乎获得最好的解决方案，我只想在合理的时间内找到一个合理的解决方案。

（如果你想要这个问题的动机。我有一个物理系统，我对所有点对的距离进行嘈杂的测量。距离测量很嘈杂，但往往在真实值的两倍之内。我有做了所有这些测量，现在有一个包含数千个节点和数百万条边的图，并且想要将这些点放在一个平面上。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T00:50:06.920

您可以根据需要调整[基于力的](http://en.wikipedia.org/wiki/Force-based_layout)图形绘制算法。

该算法试图`G(V,E)`通过将每个顶点`V`视为笛卡尔点并将每个边`E`视为线性弹簧来为无向图找到良好的布局。此外，全局计算顶点之间的成对排斥力（即库仑定律） - 这可以防止在笛卡尔空间中不相邻的顶点聚集`G(V,E)`。

在您的情况下，您可以将弹簧的平衡长度设置为等于您的边缘权重 - 这应该会给出一个布局，其中成对的欧几里德顶点距离接近您的边缘权重。

该算法基于每个顶点的力总和以伪时间步进方式更新初始分布（可能是随机的）。当达到近似稳态时，算法终止。一个简化的伪代码：

```
while(not converged)
    for i = vertices in V
        F(i) = sum of spring + repulsive forces on ith vertex
    endfor
    Update vertex positions based on force vector F 
    if (vertex positions not changing much)
        converged = true
    endif
endwhile 
```

可以应用许多优化来降低算法的复杂性。例如，可以使用空间索引（例如四叉树）来允许有效计算“附近”顶点之间的近似斥力，而不是缓慢的全局计算。也可以使用多级图聚合技术来提高收敛性和最优性。

最后，请注意，有几个很好的图形绘制库可以实现该算法的优化版本 - 例如，您可能想查看[Graphviz](http://www.graphviz.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:46:23.043

对于初学者，我想我会采用启发式搜索方法。

您实际上想找到一组点 p1,p2,...,p_n 来最小化函数：

```
f(X) = Sum (|dist(p_i,p_j) - weight(n_i,n_j)|) [for each i,j ] 
```

该问题可以通过一些算法启发式地解决，包括[爬山](http://en.wikipedia.org/wiki/Hill_climbing)算法和[遗传算法](http://en.wikipedia.org/wiki/Genetic_algorithm)。

我个人喜欢爬山，方法如下：

```
best <- [(0,0),(0,0),...,(0,0)]
while there is still time:
    S <- random initialized vector of points
    flag <- true
    while (flag):
        flag <- false
        candidates <- next(S) (*)
        S <- X in candidates such that f(X) <= f(Y) for each X in candidates (**)
        if f(S) was improved:
            flag <- true
    if f(S) <= f(best):
        best <- S
return best 
```

`(*)`next() 生成候选列表。例如，它可以利用有关函数梯度的信息（并且基本上衰减为类似于[梯度下降](http://en.wikipedia.org/wiki/Gradient_descent)的东西），或者采样一些随机“方向”并将它们作为候选（全部在多维向量中，其中每个点都是一个维度） ）。
`(**)`在这里，您基本上选择了“最佳”候选者，并将其存储在 S 中，因此您将在下一次迭代中继续使用它。

请注意，该算法是[any-time](http://en.wikipedia.org/wiki/Anytime_algorithm)，因此您必须给它更多的时间，预计它会变得更好。这种行为是通过起始点的随机初始化（可能会改变结束结果）以及通过随机选择候选点来实现的。

# ruby-on-rails - 为什么 Rails 2.3 不生成 Gemfile？

> ID：14327800
> 
> 赞同：1
> 
> 时间：2013-01-14T22:19:35.893
> 
> 标签：ruby-on-rails, ruby, gem, ruby-on-rails-2, gemfile

最近，我使用 Ruby on Rails 2.3.14 版本开始了我的冒险之旅。生成新项目时，为什么 Rails 不创建一个`Gemfile`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:16:27.980

### Rails 2.3 不支持 Bundler

为什么？因为它只是没有。[Rails 3 具有原生 Bundler 支持](http://gembundler.com/rails3.html)，但您可以按照 Bundler 网站上的分步说明[将 Bundler 支持添加到 Rails 2.3 。](http://gembundler.com/rails23.html)

### 自己动手

如果你只想要一个 Gemfile，而不是 Bundler 与 Rails 的集成，你可以很容易地创建一个。

```
gem install bundler
bundle init 
```

### 供应您的宝石

在旧版本的 Rails 中，处理 gem 的方法是出售你的 gem。[Rails 命令行指南](http://guides.rubyonrails.org/v2.3.11/command_line.html#rake-is-ruby-make)的旧 2.3 版本可能会对您有所帮助，尤其是涵盖`rake gems:install`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T23:19:50.730

Rails 2.3 没有内置的 bundler 支持，因为它在 Bundler 之前出现。

[Bundler 网站](http://gembundler.com/v1.2/rails23.html)提供了将 Bundler 添加到 Rails 2.3 的说明。

简而言之：

*   添加一个`config/preinitializer.rb`在 Rails 加载之前设置捆绑环境
*   更新您`config/boot.rb`以要求捆绑的宝石
*   将任何`config.gem`声明移至`Gemfile`
*   照常进行

# php - CodeIgniter HMVC 用户特定模块结构

> ID：14327801
> 
> 赞同：0
> 
> 时间：2013-01-14T22:19:37.613
> 
> 标签：php, codeigniter, module, hmvc

我使用 CI-HMVC 股票。我想有一个这样的模块结构：

```
应用
    模块
        用户abc
            模块A
                控制器
                楷模
                意见
            模块B
                ...
        用户定义
            模块C
                ...

```

这是一种不正确的模块组织方式吗？还有另一种常见的方法来做这样的事情吗？

我想分离用户模块文件夹并在这样的 URL 中使用它们：
userABC.domain.com/module/controller/method
userBCD.domain.com/module/controller/method

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:44:47.060

如果需要，您可以使用该结构，但请记住以下几点：

您必须将每个用户的目录定义为模块位置：

```
// application/config/config.php
$config['modules_locations'] = array(
    // Absolute path              // Relative from default application dir
    APPPATH.'modules/userABC/' => '../modules/userABC/',
    APPPATH.'modules/userDEF/' => '../modules/userDEF/',
    APPPATH.'modules/userGHI/' => '../modules/userGHI/',
    // etc.
); 
```

您可能可以动态地执行此操作，但请记住它`config.php`很早就加载了，因此您可能需要一个`pre_system` [hook](http://ellislab.com/codeigniter/user-guide/general/hooks.html)。

另一件事，如果您希望所有用户的模块都可以访问，而不管哪个子域处于活动状态，这一点很重要：**顺序很重要！**

如果 userA 有一个名为“blog”的模块，userB 也有，则只有 userA 的模块会被加载（假设您首先定义了 userA 的模块路径）。如果您确定没有两个模块将共享相同的名称，那么这并不重要，但是您可能会遭受性能损失，因为加载器将遍历整个模块位置堆栈，直到找到请求的位置。

听起来您应该`module_location`根据加载的用户站点（子域）定义一个。就像是：

```
// Get this value dynamically (not sure how you need to do it)
$current_user = 'userABC';

$config['modules_locations'] = array(
    APPPATH.'modules/'.$current_user.'/' => '../modules/'.$current_user.'/'
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-20T11:26:04.873

在 codeigniter 中添加子模块，您需要像这样在配置文件中破坏 moudules 目录。

```
$config['modules_locations'] = array(
APPPATH.'modules/'          => '../modules/backend/',
APPPATH.'modules/frontend/' => '../modules/frontend/', 
 ); 
```

# python - 如何在 Python 中可用的不同并发方法之间进行选择？

> ID：14327802
> 
> 赞同：4
> 
> 时间：2013-01-14T22:19:45.440
> 
> 标签：python, concurrency

在 Python 中有不同的并发方式，下面是一个简单的列表：

*   基于过程的：`process.Popen`, `multiprocessing.Process`, 老式的`os.system`, `os.popen`,`os.exe*`
*   基于线程：`threading.Thread`
*   基于微线程：`greenlet`

我知道基于线程的并发和基于进程的并发之间的区别，并且我知道一些（但不是太多）关于`GIL`' 对`CPython`线程支持的影响。

对于想要实现某种程度的并发的初学者，如何在它们之间进行选择？或者，它们之间的一般区别是什么？在 Python 中还有其他方法可以并发吗？

我不确定我是否在问正确的问题，请随时改进这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T21:36:45.563

所有这三种机制都存在的原因是它们具有不同的优势和劣势。

首先，如果您有大量的小型独立任务，并且没有明智的方法将它们批处理（通常，这意味着您正在编写[C10k](http://en.wikipedia.org/wiki/C10k_problem)服务器，但这不是唯一可能的情况），那么微线程会胜出。在一切都陷入困境或失败之前，您只能运行几百个操作系统线程或进程。因此，要么使用微线程，要么放弃自动并发并开始编写显式回调或协程。这确实是*唯一*一次微线程获胜；否则，它们就像操作系统线程一样，除了一些事情不能正常工作。

接下来，如果您的代码[受 CPU 限制](http://en.wikipedia.org/wiki/CPU_bound)，则需要进程。微线程本质上是一种单核解决方案；由于 GIL，Python 中的线程通常不能很好地并行化；进程获得操作系统可以处理的尽可能多的并行性。因此，进程将使您的 4 核系统以 4 倍的速度运行您的代码；别的都不会。（事实上​​，您可能想更进一步并分布在不同的计算机上，但您并没有问过这个问题。）但是如果您的代码是[I/O-bound](http://en.wikipedia.org/wiki/I/O_bound)，核心并行没有帮助，所以线程就像像过程一样好。

如果你有很多共享的、可变的数据，事情就会变得艰难。流程需要明确地将所有内容放入可共享的结构中，例如 using [`multiprocessing.Array`](http://docs.python.org/3/library/multiprocessing.html#multiprocessing.Array)in place of `list`，这会变得异常复杂。线程自动共享一切——这意味着到处都有竞争条件。这意味着您需要非常仔细地考虑您的流程并有效地使用锁。通过流程，经验丰富的开发人员可以构建一个适用于所有测试数据的系统，但每次给它一组新的输入时都必须重新组织它。使用线程，有经验的开发人员可以编写运行数周的代码，然后意外地默默地打乱每个人的信用卡号码。

这两个中的哪一个更让你害怕——做那个，因为你更了解这个问题。或者，如果可能的话，退后一步，尝试重新设计您的代码，以使大部分共享数据独立或不可变。这可能是*不可能*的（不会让事情变得太慢或太难理解），但在决定之前要认真考虑。

如果您有大量独立数据或共享不可变数据，那么线程显然会胜出。进程需要显式共享（`multiprocessing.Array`再次类似）或编组。`multiprocessing`并且它的第三方替代品使得封送处理对于所有东西都是可腌制的简单情况非常容易，但它仍然不像直接传递值那么简单，而且速度也慢得多。

不幸的是，您需要传递大量不可变数据的大多数情况与需要 CPU 并行性的情况完全相同，这意味着您需要进行权衡。这种权衡的最佳答案可能是您当前的 4 核系统上的操作系统线程，但您在 2 年内拥有的 16 核系统上的进程。（如果您围绕例如[`multiprocessing.ThreadPool`](http://docs.python.org/3/library/multiprocessing.html#using-a-pool-of-workers)or组织事物[`concurrent.futures.ThreadPoolExecutor`](http://docs.python.org/3/library/concurrent.futures.html#threadpoolexecutor)，并轻松地切换到`Pool`或`ProcessPoolExecutor`稍后 - 甚至使用运行时配置切换 - 这几乎可以解决问题。但这并不总是可能的。）

最后，如果您的应用程序本身需要事件循环（例如，GUI 应用程序或网络服务器），请先选择您喜欢的框架。使用`PySide`vs.`wx`或`twisted`vs.`gevent`进行编码比使用微线程与 OS 线程进行编码有更大的区别。而且，一旦您选择了框架，看看您可以在多大程度上利用您认为需要真正并发的事件循环。例如，如果您需要一些代码每 30 秒运行一次，请不要为此启动线程（微型或操作系统），请让框架根据需要安排它。

# forms - Sonata Admin 嵌入表单的一对多不会持续存在

> ID：14327806
> 
> 赞同：2
> 
> 时间：2013-01-14T22:20:07.020
> 
> 标签：forms, symfony, doctrine-orm, sonata-admin

我一直在尝试在 Sonata Admin Bundle 2.0、Sonata User Bundle 2.0 和 Symfony 2.0.16 中实现嵌入表单（是的，我知道它现在有点老了）并且在阅读了很多论坛帖子和手册之后我可以实现它......但只是在表单级别，它不能在编辑模式下显示数据，也不能在创建模式下持久化。

更明确地说，我正在尝试以一对多的关系（一个用户有很多电子邮件，或者只有一个）建立用户实体（来自 Sonata 用户包）与电子邮件实体之间的关系。因此，在用户表单中将动态嵌入一个或多个电子邮件表单，这似乎正在工作，但与电子邮件表断开连接。

systemUser 指向表用户。我必须更改它，因为我使用的是 PostgreSQL 并且 word 是保留的。

**用户管理员.php**

```
<?php

class UserAdmin extends Admin
{
    // more code

        $formMapper
            ->with('General')
                ->add('username')
                ->add('email')
                ->add('plainPassword', 'text', array('required' => false))
            ->end()
            ->with('Groups')
                ->add('groups', 'sonata_type_model', array('required' => false))
            ->end()
            ->with('Profile')
                ->add('dateOfBirth', 'date', array('required' => false))
                ->add('firstname', null, array('required' => false))
                ->add('lastname', null, array('required' => false))
                ->add('website', 'url', array('required' => false))
                ->add('locale', null, array('required' => false))
                ->add('timezone', null, array('required' => false))
            ->end()
            ->with('Emails')
                ->add('emails', 'collection', array(
                    'label' => 'Emails',
                    'required' => true,
                    'allow_add' => true,
                    'allow_delete' => true,
                    'by_reference' => false,
                ),
                array(
                    'edit' => 'inline',
                    'inline' => 'table',
                    'sortable' => 'id',
                    'targetEntity'=> 'MyProject\xBundle\Entity\Email',
                    'link_parameters' => array('context' => 'user'),
                )
            )
        ;
    // more code ...
} 
```

**用户.php**

```
<?php

class User extends BaseUser
{
    /**
     * @var array emails
     */
    protected $emails;

    /**
     * @var string user
     */
    protected $user;

    public function __construct()
    {
        $this->emails = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Add emails
     *
     * @param MyProject\xBundle\Email $email
     */
    public function addEmails(\MyProject\xBundle\Entity\Email $email)
    {
        $this->emails[] = $email;
    }

    /**
     * Get emails
     *
     * @return Doctrine\Common\Collections\Collection
     */
    public function getEmails()
    {
        return $this->emails;
    }

    /**
     * Set emails
     *
     * @param  $emails
     * @return Email
     */
    public function setEmails($emails)
    {
        $this->$emails = $emails;

        foreach ($emails as $email) {
            $email->setUser($this);
        }
    }

    /**
     *
     * @param string $user
     */
    public function setUser($user)
    {
        $this->user = $user;
    }
} 
```

**电子邮件.php**

```
<?php

class Email
{
   /**
    * @var SystemUser
    *
    * @ORM\ManyToOne(targetEntity="User", cascade={"persist"})
    * @ORM\JoinColumns({
    *   @ORM\JoinColumn(name="system_user_id", referencedColumnName="id")
    * })
    *
    */
   private $systemUser;

   public function __construct()
   {
       $this->systemUser = new ArrayCollection();
   }

   /**
    *
    * @param MyProject\xBundle\Entity\User $systemUser
    */
   public function setSystemUser(\MyProject\xBundle\Entity\User $systemUsers = null)
   {
       $this->systemUser = $systemUser;

       return $this;
   }

   /**
    * Get systemUser
    *
    * @return MyProject\xBundle\Entity\User
    */
   public function getSystemUser()
   {
       return $this->systemUser;
   } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T14:14:16.480

您的方法需要从`User`到`Email`实体的“正向”关系，否则管理员不知道要更改和坚持什么。更改您的代码，`User.php`以便`email`变量真正了解其关系。这意味着您应该添加类似

```
/**
 * @var array emails
 * @ORM\OneToMany(targetEntity="Email", mappedBy="systemUser", cascade={"all"})
 */
protected $emails; 
```

# javascript - 为什么 Safari 会递归调用 function.apply？

> ID：14327808
> 
> 赞同：3
> 
> 时间：2013-01-14T22:20:14.697
> 
> 标签：javascript, safari

考虑以下：

```
var foo = []
for (var i=0; i<100000; i++) { foo.push(97); }
var bar = String.fromCharCode.apply(String,foo) 
```

大多数浏览器运行良好，但 Safari 会抛出：`RangeError: Maximum call stack size exceeded.`

基于此，Safari 对[Function.prototype.apply](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)的实现似乎是递归的。这是真的？

上面链接的 MDN 页面提到了 JS 引擎的参数长度限制的潜在问题，但这里显然不是这种情况。

**编辑**：我仍然认为这不是参数长度问题。通过[这个页面](http://colinscape.com/2012/05/14/how-many-arguments-can-a-javascript-function-have/)和我自己的测试，看起来 Safari 最多可以处理 524197 个参数，上面的代码没有超过。

**额外的问题**：我们可以重写上面的代码以避免使用 apply 通过显式调用`String.fromCharCode`数组的每个元素`join`并将结果放在一起，但我怀疑这会更慢（对于支持 large-input 的浏览器`apply`）。从整数字符代码数组组装大字符串的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T22:24:11.683

Apply 在某些浏览器中对它们接受的参数长度有限制。[Webkit 观察到的限制为 2^16](https://bugs.webkit.org/show_bug.cgi?id=80797)，因此如果您需要更多，您可能需要遵循一种策略来分解参数。如果您阅读错误的详细信息，这是一个强制限制，而不是递归引起的问题（有问题的错误也引发了类似的 RangeError）。

无论如何，我相信您对字符串连接的预感是正确的 - join 不一定和其他方法一样好。[这是一个](http://jsperf.com/string-concatenation-14327808)针对字符串 concat 的测试，我首先分解了参数（类似于 MDN 讨论中应用的策略），它超越了连接。直接将字符串添加在一起甚至超出了连接，这让我有点惊讶（至少在 chrome 中，我想他们必须有一些智能 gc 可以重用现有字符串以达到很好的效果，但可以肯定地说）。

编辑 - 有趣的是，就连接速度而言，Chrome 似乎是一个奇怪的问题 - 对于其他所有浏览器，它在性能方面更接近 concat 甚至更好。

# c++ - 过程硬件编程的错误处理技术

> ID：14327809
> 
> 赞同：0
> 
> 时间：2013-01-14T22:20:16.987
> 
> 标签：c++, error-handling, procedural-programming

我正在编写一个 C++ 代码来控制一个特殊设备，该设备是几个 SDK 的融合。我的代码看起来像

```
#define sdk1SafeCall(err) __sdk1SafeCall(err,__FILE__,__LINE__)

int errorcode = 0;
sdk1SafeCall(sdk1_InitializeDevice());
errorcode=sdk2_InitializeDevice();
errorcode=sdk3_InitializeDevice();

if (some_parameter)
{
    errorcode=sdk2_readDevice(true);
}
else
{
    errorcode=sdk3_writeDevice();
}
label again: errorcode=sdk1_readDevice();
if (error) goto again;

errorcode=close_everything(); 
```

使用参数将重新排列控制流。我当前的方法使用 cudaSafeCall 之类的方法来包装错误代码并退出。我不知道如何存储这些错误的详细解释或如何从中恢复（例如 goto 示例）。归根结底，代码看起来真的很乱。

**编辑**

我有时会使用包装器处理错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:32:20.497

编写错误安全的代码很难。在您的伪代码中，您实际上根本不处理错误。错误代码只会有“close_everything()”的结果——即使其他一切都出错了，它可能已经成功。

在 C++ 中解决此类问题的典型方法是为每个“资源”（例如“设备”）设置一个对象，以及`throw`如果`exception`出现您不希望从中恢复的问题。将整个函数 [或一组外部函数] 包装在一个`try/catch`块中。

当然，如果“失败是正常的”（例如，您尝试从网络端口读取数据，但由于没有可用数据而导致超时，那么您不应该抛出异常）。这应该使用返回值。

请注意，使用对象来处理资源需要仔细设计代码，尤其是您的析构函数可以很好地清理它在异常后运行。如果你在构造函数中抛出异常，请确保不要留下任何东西——因为这就是你得到泄漏的方式。

当然还有很多其他的解决方案——毕竟，我们在谈论编程，所以总是有至少 11 种不同的方法来解决问题。

# asp.net - 使用 HTML Response/JS ASP 打开一个新页面

> ID：14327824
> 
> 赞同：0
> 
> 时间：2013-01-14T22:21:07.160
> 
> 标签：asp.net

好的，我决定通过打开一个新页面 (newPage.aspx) 来解决这个问题，然后该页面将启动下载并在下载完成后关闭。我通过将 newPage.aspx 写入当前页面的响应来使用 javascript 打开它。但是，由于某种原因，在重定向原始页面之前没有打开窗口。他们是在我重定向之前要调用的方法吗？也许我有语法问题？

```
Response.Write("<script type='text/javascript'>window.open('~/newPage.aspx', '', ''); </script>")

Response.Redirect("~/oldPage.aspx") 
```

**编辑：**

我尝试了以下方法，但没有成功...（我正在更新面板中工作）

```
ScriptManager.RegisterStartupScript(udpMain, udpMain.GetType(), "openExcel", "window.open('~/newPage.aspx', '' , '');", True) 
```

**编辑 2：如此接近**

好的，所以这只有在我注释掉 Response.Redirect 时才有效。似乎 RegisterStartupScript 方法发生在 Response.Redirect 方法之后的页面加载上。有什么已知的解决方法吗？

```
ScriptManager.RegisterStartupScript(udpMain, udpMain.GetType(), "openExcel", "window.open(NewPage.aspx'); location.href='OldPage.aspx';", True)
Response.Redirect("~/OldPage.aspx") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:27:20.860

您也可以通过客户端脚本重定向。顺便说一句，当使用 ASP.NET 时，将 JS 嵌入 HTML 的首选方式是，`ClientScript.RegisterStartupScript`例如

```
ClientScript.RegisterStartupScript(Me.GetType(), "JSCode" & Rnd(1).ToString, "window.open('newPage.aspx'); location.href = 'oldPage.aspx'", True) 
```

# c++ - 使用经典终端和 gcc/g++ 编译 QT Creator 项目

> ID：14327825
> 
> 赞同：0
> 
> 时间：2013-01-14T22:21:08.937
> 
> 标签：c++, qt, compilation

我厌倦了在互联网上搜索。我创建了一个 kclient-serwer 程序，该程序仅通过特定端口上的 IP 关闭计算机。我用 C 语言制作了整个东西，一切正常，我正在使用带有 -Wall 选项的 gcc 编译我的项目，我已经清楚了结果。但我必须创建 GUI，所以我决定使用 QT Creator IDE，我将代码从 C 转移到 C++ 并制作了 GUI。程序有效，但我必须使用带有 -Wall 选项的 g++ 编译它。问题是，我无法编译任何东西。

```
g++ my_project.cpp -o mypro -Wall

ERROR: fatal error: QMainWindow: directory don't exist (in my native language)
compilation terminated
(same with other source files) 
```

有任何想法吗？这很容易，但相信我，我想编译这个然后去睡觉。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T01:44:14.767

Why don't you use qmake? First, you can edit your *.pro file and add any compiler flags you wish (see Mitch's comment). Then, if you execute `qmake` and then `make`, it will show you a sequence of compilation commands with proper flags, linker and include paths and so on. After that you can just reproduce that commands manually if your teacher wants so.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:02:07.853

该错误表明编译器正试图像打开`QMainWindow`一个目录一样打开它（如果翻译正确），或者至少无法找到 Qt 的包含文件所在的位置。您可能需要提供一些 -I 选项来提示编译器 Qt 标头的位置，并确保`#include`代码中的指令正确。

# jquery - MVC + 在列表框中传递未选择的值

> ID：14327826
> 
> 赞同：1
> 
> 时间：2013-01-14T22:21:09.280
> 
> 标签：jquery, asp.net-mvc-3

所以我有 2 个简单的选择框控件（MVC 中的@Html.ListBoxFor），

我允许用户从左侧选择框中选择并将所选项目向右移动，这很好用（请参阅我的示例：http: [//jsfiddle.net/tekguy/NJGzu/](http://jsfiddle.net/tekguy/NJGzu/)）

但是如何将正确列表框中的所有内容传递给 MVC？

如果用户不小心单击了右侧框中的一项，则会出现问题，其他所有内容都未选中，并且这将是唯一传递回控制器的值。

关于如何解决这个问题的任何想法？我正在考虑使用 javascript 在表单发布的正确文本框中选择所有内容。但是还有其他方法可以解决这个问题吗？

HTML 代码：

```
<select id="list1" multiple>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
</select>

<input type="button" value=">>" id="moveRight" />
<input type="button" value="<<" id="moveLeft" />

<select id="list2" multiple>
    <option value="4">Option 4</option>
</select> 
```

JAVA脚本代码：

```
$( function() {
    $('#moveRight').click(function(){
        $('#list1 option:selected').each(function(){
            $(this).remove().appendTo("#list2");
        });
    });

    $('#moveLeft').click(function(){
        $('#list2 option:selected').each(function(){
            $(this).remove().appendTo("#list1");
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:36:53.377

不久前我需要类似的东西来做一个项目。我发现只有选择的项目被退回。我按照你的建议使用了javascript。像这样的东西对我有用。

```
$("#MassUpdateForm").submit(function() {
    $("#select_right").children("option").each(function() {
        this.selected = true;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:48:14.263

您不需要循环来附加元素。一个特定的元素只能在 dom 中存在一次。所以除非你克隆和追加。没有必要先删除该元素。然后，您可以在表单的提交事件中将所有选项更改为选中

```
$(function () {
  $('#moveRight').click(function () {
    $('#list1 option:selected').appendTo("#list2"); // this will move all selected options to right side
  });
  $('#moveLeft').click(function () {
    $('#list2 option:selected').appendTo("#list1"); // this will move all selected options to left side
  });
  $('yourform').on('submit', function () {
    $('#list2 option').prop('selected', true); // set all options on right side to selected
  });
}); 
```

# c - c - 删除前 4 个字节的数据

> ID：14327827
> 
> 赞同：0
> 
> 时间：2013-01-14T22:21:10.110
> 
> 标签：c, offset, packet-capture

我正在读取一个数据包，但我需要从数据包中删除前四个字节和最后一个字节以获得我需要的内容，你将如何在 C 中执行此操作？

```
/* Build an input buffer of the incoming message. */
    while ( (len=read(clntSocket, line, MAXBUF)) != 0)
    {
            msg = (char *)malloc(len + 1);
            memset(msg, 0, len+1);
            strncpy(msg, line, len);
        }
    } 
```

传入的数据是 char 和 int 数据的混合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:37:27.733

您可以更改`strncpy`源地址：

```
while ( (len=read(clntSocket, line, MAXBUF)) != 0)
{
        msg = (char *)calloc(len -3, 1); // calloc instead of malloc + memset
        strncpy(msg, line+4, len);
    }
} 
```

**PS**：我假设那行是`char*`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:23:33.790

如果 line 是 char *，您可以简单地从 (line + 4) 开始复制，它看起来是。并复制比 len 少 5 个字节，这将丢弃最后一个字节。

即使其非常明确（假设您之前的 malloc 会在缓冲区末尾留下一些安全性）。

```
char *pFourBytesIn = (line + 4);
int adjustedLength = len - 5;
strncpy(msg, pFourBytesIn, adjustedLength);
msg[adjustedLength] = '\0'; 
```

# javascript - 当前日期两次之间的时间

> ID：14327828
> 
> 赞同：0
> 
> 时间：2013-01-14T22:21:12.067
> 
> 标签：javascript, date, datetime

我正在尝试使用 JavaScript 计算当前日期两次之间的时间。还有其他与此类似的问题，但似乎没有一个有效，而且很少有我能找到很多支持的问题。

我有以下内容，它在线上失败：`var diff = new Date(time1 - time2);`，它总是给我一个`invalid Date`警报时，所以它显然是失败的。我不知道为什么。

初始日期以以下格式添加：hh:mm:ss 在输入字段中。我正在使用 jQuery。

$(函数(){

```
$('#goTime').click(function(){
  var currentDate = new Date();

  var dateString = (strpad(currentDate.getDate()) +'-'+ strpad(currentDate.getMonth()+1)+'-'+currentDate.getFullYear()+' '+ $('#starttime').val());

  var time1 = new Date(dateString).getTime();
  var time2 = new Date().getTime();

  var diff = new Date(time1 - time2);

  var hours = diff.getHours();
  var minutes = diff.getMinutes();
  var seconds = diff.getMinutes();

  alert(hours + ':' + minutes + ':' + seconds);

});
  });
  function strpad(val){ 
        return (!isNaN(val) && val.toString().length==1)?"0"+val:val; 
  } 
```

`dateString`等于：14-01-2013 23:00

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:31:31.333

你有`dateString`向后的字段。交换年和日字段...

```
> new Date('14-01-2013 23:00')
Invalid Date
> new Date('2013-01-14 23:00')
Mon Jan 14 2013 23:00:00 GMT-0800 (PST) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:37:47.597

`dd-MM-yyyy HH:mm`未被识别为有效的时间格式`new Date()`。不过，您有几个选择：

*   使用斜杠而不是破折号：`dd/MM/yyyy HH:mm`正确解析日期字符串。
*   使用 ISO 日期字符串：`yyyy-MM-dd HH:mm`也可以识别。
*   自己构建`Date`对象。

对于第二个选项，由于您只关心时间，您可以自己拆分时间字符串并将它们传递给`Date.setHours(h, m, s)`：

```
var timeParts = $('#starttime').val().split(':', 2);
var time1 = new Date();
time1.setHours(timeParts[0], timeParts[1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T22:40:42.173

如果您尝试计算两个日期之间的时间差，则无需创建新的日期对象即可。

```
 var time1 = new Date(dateString).getTime();
  var time2 = new Date().getTime();

  var diff = time1 - time2;// number of milliseconds 

  var seconds = diff/1000;
  var minutes = seconds/60;
  var hours = minutes/60; 
```

> 编辑：您还需要考虑 broofa 的回答，以确保您的日期字符串格式正确

getTime 函数返回自 1970 年 1 月 1 日以来的毫秒数。因此，通过减去这两个值，您将得到每个日期对象之间的毫秒数。如果您将该值传递给 Date 构造函数，则生成的日期对象将不是您所期望的。见[getTime](http://www.w3schools.com/jsref/jsref_gettime.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T22:40:49.227

您的`datestring`. `time1`是`NaN`，`diff`也会如此。使用这个可能会更好：

```
var date = new Date();
var match = /^(\d+):(\d+):(\d+)$/.exec($('#starttime').val()); // enforcing format
if (!match)
    return alert("Invalid input!"); // abort
date.setHours(parseInt(match[1], 10));
date.setMinutes(parseInt(match[2], 10));
date.setSeconds(parseInt(match[3], 10));

var diff = Date.now() - date; 
```

# extjs - 使用 CheckboxSelectionModel 从网格中删除多个项目

> ID：14327829
> 
> 赞同：0
> 
> 时间：2013-01-14T22:21:14.723
> 
> 标签：extjs, grid, extjs4, sencha-architect, selectionmodel

在 Sencha Architect 上使用 ExtJs4.1。

我的 onDeleteButton 代码中有以下代码

```
onDeleteButtonClick: function(button, e, options) {
     var active = this.activeRecord;
     var myGrid = Ext.getCmp('publisherResultsGridView'),
         sm = myGrid.getSelectionModel(),
         selection = sm.getSelection(); // gives you a array of records(models)

     if (selection.length > 0){
            for( var i = 0; i < selection.length; i++) {
                            this.application.log('OnDeleteItemID is ' + selection);
            }
            this.remove(selection);
     } 
```

`Remove`功能代码

```
remove: function(record) {
        var store = Ext.getStore('PublisherProperties');
        store.proxy.url = MasterDataManager.globals.url + "Publishers/";
        store.remove(record);
        store.sync(); 
```

当我运行它时，我可以在我的日志中看到一个对象数组，并且在执行删除函数后我也没有收到任何错误。但是商店没有更新，我的意思是它不会删除选定的项目。

有人能帮帮我吗。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:34:37.210

我通过进行以下更改解决了我的问题。

至`onDeleteButtonClick`

```
if (selection.length > 0){
                for( var i = 0; i < selection.length; i++) {
                                this.application.log('OnDeleteItemID is ' + selection[i].data.id);
                                this.remove(selection[i]);
                }

         } 
```

发挥`Remove`作用

```
remove: function(record) {
    var store = Ext.getStore('PublisherProperties');
    this.application.log('Remove Function is ' + record);
    store.proxy.url = MasterDataManager.globals.url + "Publishers/" + record.data.id;
    store.load({
                        scope : this,
                        callback : function(records, operation, success){
                            if (records.length > 0){
                                var store2 = Ext.getStore('PublisherProperties');
                                        store2.proxy.url = MasterDataManager.globals.url + "Publishers/";
                                        store2.remove(records[0]);
                                        store2.sync();
                             }
                        }
            });
    //store.remove(record);
    //store.sync(); 
```

# java - 从已绑定到数据库表的组合框中检索文本

> ID：14327830
> 
> 赞同：0
> 
> 时间：2013-01-14T22:21:17.097
> 
> 标签：java, jcombobox, data-retrieval

我创建了一个绑定到数据库表的 jCombobox。我已经修改了渲染器代码以正确显示该字段，在这种情况下是一个人的姓氏。但是，当我尝试使用 jComboBox1.getSelectedValue().asString 从组合框中检索选定的文本时，我得到了如果我没有修改渲染器代码会显示的那种文本。例如“combotest.Staff[staffId=M2653101]”如何检索显示的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:42:02.310

你有一个`getRenderer()`方法`JComboBox`，但最干净的解决方案是将转换从渲染器代码移动到某个地方的静态方法（或者甚至更好地移动到`toString()`你的对象），然后从渲染器调用这个方法，也从另一个地方。

# c# - WebClient.DownloadDataTaskAsync 与 HttpClient.GetAsync

> ID：14327834
> 
> 赞同：4
> 
> 时间：2013-01-14T22:21:26.580
> 
> 标签：c#, asp.net, asp.net-mvc, async-await

我仍在了解 .NET 4.5 的各种异步功能，并且遇到了一些有趣的事情。鉴于我的 MVC 控制器中的以下内容，我在执行 (1) 和 (2) 时得到不同的结果

```
public ActionResult Index() {
    var stuff = SomeExpensiveFunction();
    return View(stuff);
}
private byte[] SomeExpensiveFunction() {
    string url = "http://some-url.../";

    // (1)
    var wc = new WebClient();
    return wc.DownloadDataTaskAsync(url).Result;

    // (2)
    var hc = new HttpClient();
    return hc.GetAsync(url).Result.Content.ReadAsByteArrayAsync().Result;
} 
```

从表面上看，它们看起来是一样的——`WebClient.DownloadDataTaskAsync`和`HttpClient.GetAsync`都是`async`返回 a 的方法`Task`。`WebClient`版本返回`Task<byte[]>`，而版本`HttpClient`返回`Task<HttpResponseMessage>`，我必须从中挖掘字节，但我正在调用`.Result`任何一种方式，我希望在离开函数之前完成。

使用 (1)，我得到一个带有`An asynchronous operation cannot be started at this time...`. 使用（2），一切正常。

我可以更改整个堆栈并`async`在控制器方法本身和 上使用`SomeExpensiveFunction`，一切正常。但是我试图弄清楚`WebClient`在使用 MVC 时 (1) 或一般情况下是否存在根本性问题。有什么想法吗？

**编辑**：我知道在这个例子中我可以使用这些调用的同步版本，因为我并没有真正异步地做任何事情——这只是一个基于更大代码库的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T10:29:32.657

您已经触犯了 ASP.NET 的 SynchronizationContext。要使 WebClient 示例正常工作，您应该使整个控制器异步。尝试这个：

```
public async Task<ActionResult> IndexAsync() {
    string url = "http://some-url.../";
    using (var wc = new WebClient())
        return View(await wc.DownloadDataTaskAsync(url));
} 
```

有关异步控制器的简介，请参见[http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)，以及[http://www.tugberkugurlu.com/ archive/asynchronousnet-client-libraries-for-your-http-api-and-awareness-of-async-await-s-bad-effects](http://www.tugberkugurlu.com/archive/asynchronousnet-client-libraries-for-your-http-api-and-awareness-of-async-await-s-bad-effects)用于解释 async/await 模式的死锁效应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:04:34.063

我不是 100% 确定，但这可能是由于不正确使用异步方法造成的。也许您看到这种行为是因为您不希望通过调用 Result 以同步方式使用 Async 方法。

# android - Android：使用模拟器模拟位置变化

> ID：14327836
> 
> 赞同：0
> 
> 时间：2013-01-14T22:21:33.727
> 
> 标签：android, location

我正在尝试使用android 文档中的此[示例应用程序](http://developer.android.com/training/basics/location/index.html)来了解如何使用模拟器模拟位置。在eclipse的模拟器控制视图中，我设置了坐标并按了发送，但没有任何反应。

我是不是忘记了什么？

# php - preg_replace 几乎匹配

> ID：14327837
> 
> 赞同：2
> 
> 时间：2013-01-14T22:21:34.257
> 
> 标签：php, preg-replace

我需要从一堆文档中替换一些句子。所有句子几乎相同，但在某些文档中存在中断、缺失或添加的单词/字符。我试图匹配第一个词和最后一个词，但那不准确。

*有什么办法或有人知道如何替换几乎匹配的句子吗？*

**示例** 假设我想替换以下句子。

```
Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt
```

**这是带休息的句子**

```
Lorem ipsum dolor sit amet, consetetur sadipscing elitr,
sed diam nonumy eirmod tempor invidunt
```

**缺少的逗号**

```
Lorem ipsum dolor sit amet, consetetur sadipscing elitr
sed diam nonumy eirmod tempor invidunt
```

**和缺字**

```
Lorem ipsum dolor sit amet sadipscing elitr, sed diam nonumy invidunt
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:15:47.460

未经测试，但请查看similar_text();

```
 <?php
$threshold = 80; //Percentage threshold
    $par1 = "Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt";
    $par2 = "Lorem ipsum dolor sit amet, consetetur sadipscing elitr, 
    sed diam nonumy eirmod tempor invidunt";

    $percent = similar_text($par1,$par2);
    if ($percent < $threshold) {
        //Correct the incorrect paragraph
        $par2 = $par1;
    }
    ?> 
```

# json - Scala 2.10：数组 + JSON 数组到 hashmap

> ID：14327841
> 
> 赞同：1
> 
> 时间：2013-01-14T22:21:46.427
> 
> 标签：json, scala, map, hashmap

从 Web 服务响应读取 JSON 结果后：

```
val jsonResult: JsValue = Json.parse(response.body) 
```

包含以下内容：

```
{
    result:  [
    ["Name 1", "Row1 Val1", "Row1 Val2"],
    ["Name 2", "Row2 Val1", "Row2 Val2"]
             ]
 } 
```

如何有效地将 JSON 中结果数组的内容与列表（或类似内容）映射，例如：

```
val keys = List("Name", "Val1", "Val2") 
```

获取哈希图数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:25:17.730

像这样的东西？此解决方案是功能性的，并且“正确”处理无/失败案例（通过返回无）

```
val j = JSON.parseFull( json ).asInstanceOf[ Option[ Map[ String, List[ List[ String ] ] ] ] ]

val res = j.map { m ⇒
    val r = m get "result"
    r.map { ll ⇒
        ll.foldRight( List(): List[ Map[ String, String ] ] ) { ( l, acc ) ⇒
            Map( ( "Name" -> l( 0 ) ), ( "Val1" -> l( 1 ) ), ( "Val2" -> l( 2 ) ) ) :: acc
        }
    }.getOrElse(None) 
}.getOrElse(None) 
```

*   注意 1：我必须在 JSON 字符串中加上双引号`result`才能使 JSON 解析器工作
*   注2：使用更多“单子”糖（例如用于理解或使用应用函子）代码可能看起来更好

# android - android sqlite删除行不起作用

> ID：14327843
> 
> 赞同：0
> 
> 时间：2013-01-14T22:21:50.357
> 
> 标签：android, sqlite

我在从 sqlite 数据库中删除行时遇到了一个奇怪的问题。我第一次尝试删除一行时，它似乎工作正常。但是，此后的任何时候，我都没有收到任何错误，它根本不会删除选定的行。如果我卸载该应用程序并从 Eclipse 重新运行它（我将平板电脑连接到我的电脑进行测试），那么第一次删除将再次起作用。

这是我用来从我的数据库中填充画廊视图的代码

```
Cursor cursor = _garmentAdapter.fetchAllLooks();

      cursor.moveToLast();
     final ArrayList<Bitmap> al = new ArrayList<Bitmap>();
      _labels=new ArrayList<String>();
      int totalGarments=0;
      for(int i=cursor.getCount()-1; i>=0; i--) {

        totalGarments++;
        Bitmap bd=BitmapFactory.decodeFile(cursor.getString(3));
        String label=cursor.getString(1);
        al.add(bd);
        _labels.add(label);

       cursor.moveToPrevious();
      }

      Toast.makeText(BrowseLooks.this, "ITEMS=="+totalGarments,     Toast.LENGTH_SHORT).show(); 
```

此 toast 消息正在屏幕上显示项目数。例如，如果我创建 3 个项目，然后删除 1，它会在屏幕上显示 2，并且 toast 显示 ITEMS==2。但是，如果我删除另一个，屏幕上仍然有 2 个项目，ITEMS==2。所以看起来游标工作正常，但数据库没有。

这是数据库中删除行的代码：

```
return mDb.delete(LOOKS_TABLE, KEY_ROWID+"="+rowId, null)>0; 
```

当调用 mDb 时，我还将 rowId 记录为正确的。

再一次，我没有收到任何错误，代码只是不工作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:56:54.210

我找到了我的问题的答案。我没有完全理解 sqlite 数据库的自动增量。因此，我正在删除已经为空的行。数据库递增的方式是创建一个高于所有先前条目的条目，而不仅仅是当前最高条目。因此，我的屏幕项目的索引与我的数据库表中的索引不对应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T22:24:50.210

尝试这个

```
db.delete(LOOKS_TABLE, KEY_ROWID+ " = ?",
                new String[] { String.valueOf(rowId) }); 
```

# java - Java：@Overridden toString() 不打印任何内容

> ID：14327844
> 
> 赞同：0
> 
> 时间：2013-01-14T22:22:04.023
> 
> 标签：java

我有`@Entity`一个

```
@Entity
@Table(name = "variable")
@XmlRootElement
public class Variable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private long id;

    @Column(unique = true, nullable = false)
    private String name;

    @Column
    @Enumerated(EnumType.STRING)
    private VariableType type;

    @Column(nullable = false)
    private String units;

    @Column
    private String description;

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "created_on", nullable = false)
    private Date createdOn;

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "retired_on", nullable = true)
    private Date retiredOn;

    @Column(nullable = false)
    private boolean core;

    public Variable(@Nonnull final String name,
                    @Nonnull final VariableType type,
                    @Nonnull final String units,
                    @Nonnull final String description,
                    @Nonnull final Date createdOn,
                    @Nonnull final boolean core) {
        this.name = name;
        this.type = type;
        this.units = units;
        this.description = description;
        this.core = core;
        this.createdOn = createdOn;
    }

    @Nonnull
    public long getId() {
        return id;
    }

    @Nonnull
    public String getName() {
        return name;
    }

    @Nonnull
    public VariableType getType() {
        return type;
    }

    @Nonnull
    public String getUnits() {
        return units;
    }

    @Nullable
    public String getDescription() {
        return description;
    }

    @Nonnull
    public Date getCreatedOn() {
        return createdOn;
    }

    @Nonnull
    public Date getRetiredOn() {
        return retiredOn;
    }

    @Nonnull
    public boolean isCore() {
        return core;
    }

    @Override
    public String toString() {
        return new StringBuilder().
                append("id="+id+" ").
                append("name="+name+" ").
                append("type="+type+" ").
                append("units="+units+" ").
                append("description="+description+" ").
                append("createdOn="+createdOn+" ").
                append("retiredOn="+retiredOn+" ").
                append("core="+core+" ").
                toString();
    }
} 
```

和 a`VariableManager`创建`@Entity`实例

```
public Variable createVariable(@Nonnull final String name,
                                   @Nonnull final VariableType type,
                                   @Nonnull final String units,
                                   @Nonnull final String description,
                                   @Nonnull final boolean core) {
        final Variable variable =  variableCrudService.create(new Variable(name, type, units, description, new Date(), core));
        LOGGER.info("added variable - ", variable);
        return variable;
    } 
```

当我执行此操作时，我得到的日志信息为

```
14:18:12,320 INFO  [org.jboss.resteasy.cdi.CdiInjectorFactory] (http--127.0.0.1-8080-4) Found BeanManager at java:comp/BeanManager
14:18:13,336 INFO  [com.bb.business.VariableManager] (http--127.0.0.1-8080-4) added variable - 
```

我不知道为什么 toString 不打印对象的状态，即使我可以看到变量是在数据库中创建的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:30:49.417

从您的代码中，我无法判断您使用的是哪种类型的记录器（基于 info() 的方法签名，它似乎不是 log4j 也不是 java.util 记录器），但我怀疑调用

```
LOGGER.info("added variable - " + variable); 
```

代替

```
LOGGER.info("added variable - ", variable); 
```

（注意加号而不是逗号）可以做到。

# php - 会话不工作，正在写入会话文件

> ID：14327855
> 
> 赞同：1
> 
> 时间：2013-01-14T22:22:40.123
> 
> 标签：php, session

起初，我的会话不断重置，所以我写了一个简单的脚本来测试我的会话。

```
<?php
session_start();
// Show banner
 echo '<b>Session Support Checker</b><hr />';
 // Check if the page has been reloaded
 if(!isset($_GET['reload']) OR $_GET['reload'] != 'true') {
   // Set the message
   $_SESSION['MESSAGE'] = 'Session support enabled!<br />';
   // Give user link to check
   echo '<a href="?reload=true">Click HERE</a> to check for PHP Session Support.<br />';
  } else {
  // Check if the message has been carried on in the reload
  if(isset($_SESSION['MESSAGE'])) {
    echo $_SESSION['MESSAGE'];
   } else {
   echo 'Sorry, it appears session support is not enabled, or you PHP version is to old. <a href="? reload=false">Click HERE</a> to go back.<br />';
    }
  }
 ?> 
```

不用说，我得到了“对不起，似乎没有启用会话支持......”（如果有记忆的话，我的 php 版本是 5.2，所以它绝对不会太旧）。我检查了我的 php.ini 文件，PHP 正在将会话文件写入 php.ini 文件指向的文件夹中，其中的数据似乎是正确的，但是，我无法将任何数据从一个页面传递到另一个页面。有人知道出了什么问题吗？

这是 phpinfo() 的相关部分（会话）...

[http://pastebin.com/vnv7J26T](http://pastebin.com/vnv7J26T)

# json - Json反序列化Mvc 4 Knockout js

> ID：14327863
> 
> 赞同：0
> 
> 时间：2013-01-14T22:23:30.763
> 
> 标签：json, asp.net-mvc-4, knockout.js, knockout-mapping-plugin

当我尝试将 json 反序列化为 MVC4 中的对象时遇到问题。

我有一个视图模型：

```
 public class TestViewModel
{
    public string Code { get; set; }

} 
```

在视图中，我使用 Json.net 获取模型并序列化对象

```
var Vm = function(data) {
        var self = this;

        ko.mapping.fromJS(data, {}, self);

        self.GetResults = function() {
            $.ajax({
                type: "POST",
                url: '@Url.Action("Action", "Controller")',
                data: ko.mapping.toJSON(self),
                success: function(data) {
                    alert('OK');
                }
            });
        };
    };

    var viewModel = new Vm(@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model)));
    ko.applyBindings(viewModel); 
```

我的问题是当我在控制器中调用 GetResults 操作时，所有属性都为空。

我的Json是：

```
{"Code":"TestCode"} 
```

我在 MVC3 项目中具有相同的结构并且工作正常。我在 MVC4 中遗漏了什么？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:14:45.823

我们注意到，在某些情况下，jQuery 会将数据嵌入到请求中的表单中。发生这种情况时，值不会自动映射到 Controller 方法中的对象类型。

为了解决这个问题，你需要做两件事：

1）检查数据是否被序列化。我找到了一种简单的方法来做到这一点并将其转储到扩展方法中：

```
public static class WebContextExtensions
{
    public static bool IsDataSerialized(this HttpContext context)
    {
        return context.Request.Params.AllKeys[0] == null;
    }
} 
```

2）如果 IsDataSerialized 返回 true，则需要将数据反序列化为对象类型。我们也编写了一个 GenericDeserializer 方法来做到这一点：

```
public class GenericContextDeserializer<T> where T : new()
{
    public T DeserializeToType(HttpContext context)
    {
        T result = new T();
        if (context != null)
        {
            try
            {
                string jsonString = context.Request.Form.GetValues(0)[0].ToString();
                Newtonsoft.Json.JsonSerializer js = new Newtonsoft.Json.JsonSerializer();
                result = js.Deserialize<T>(new Newtonsoft.Json.JsonTextReader(
                               new System.IO.StringReader(jsonString)));
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }
        else
            throw new NullReferenceException();
        return result;
    }
} 
```

现在把它们放在你的 Controller 方法中：

```
[HttpPost]
[HttpOptions]
public HttpResponseMessage MyAction(JsonData data)
{
    var results = Request.CreateResponse();
    try
    {
        data = new GenericContextDeserializer<JsonData>().DeserializeToType(HttpContext.Current);
        // do stuff with data
        results.StatusCode = HttpStatusCode.OK;
    }
    catch (Exception ex)
    {
        results.StatusCode = HttpStatusCode.InternalServerError;
    }
    return results;
} 
```

如果您想了解更多详细信息，请参阅我写[的博客文章](http://blogs.msmvps.com/joelcochran/cors-ajax-and-mvc/)的后半部分。

# ruby-on-rails - 我可以改变渲染部分的格式以改变它加载的部分格式吗？

> ID：14327865
> 
> 赞同：2
> 
> 时间：2013-01-14T22:23:41.950
> 
> 标签：ruby-on-rails, spree, mobile-fu

我正在尝试使用[mobile-fu](https://github.com/brendanlim/mobile-fu)从平板电脑的[狂欢](http://spreecommerce.com/)中简化视图，我复制了我想要简化的视图并将其命名，我还必须复制管理布局并将其重命名为，问题是布局使用更多部分，而这些部分使用更多，我试图避免复制所有文件只是为了给它们一个不同的名称，或者只是简单地更改渲染以告诉它使用 html 文件。`.tablet.erb``.tabler.erb`

有没有办法告诉它从那时起使用 html 格式？像递归设置格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:16:10.227

`<% self.formats = [:mobile, :html] %>`在每个视图上都解决了它

从[这里得到](https://stackoverflow.com/a/6181539/1270248)

# html - 我怎么可能覆盖这段代码 - css 和 html？

> ID：14327867
> 
> 赞同：-4
> 
> 时间：2013-01-14T22:23:47.153
> 
> 标签：html, css

这怎么可能，我不明白，单击时我得到相同的效果：从第一行代码而不是底部“，#cracker1-button a：active”中删除此部分时以及保留它时。" , #cracker1-button" 怎么可能在顶部覆盖它？

```
#cracker1-button a:link, #cracker1-button a:visited, #cracker1-button a:hover, #cracker1-button a:active{
  text-decoration: none; 
  color: #000;
}

#cracker1-button a:active{
  color: #fff;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:33:18.437

查看两个 CSS 选择器时：

```
..., #cracker1-button a:active {
    text-decoration: none;
    color: #000;
}

#cracker1-button a:active {
    color: #fff;
} 
```

第二个，也是最近的一个，总是会覆盖第一个。这是因为两个选择器具有相同的权重，并且 CSS 将始终使用权重最大（或相等）的最新选择器。

# iphone - 从 iPhone 相机胶卷中获取图像

> ID：14327869
> 
> 赞同：1
> 
> 时间：2013-01-14T22:23:54.460
> 
> 标签：iphone, camera, photo

我目前有一个`UIImageView`和一个`UIImage`。如何允许用户从相机胶卷中选择一张照片？

有[可能](https://stackoverflow.com/questions/3754137/iphone-load-image-from-camera-roll-to-uiimageview-without-uiimagepicker) [重复](https://stackoverflow.com/questions/7583909/how-to-get-photos-from-camera-roll)，但我没有运气。这可能是因为我没有在 Interface Builder 中连接东西。

我想要一些简单的东西`UIImage * image = [UIImage imageFromCameraRoll]`，但不幸的是，这是不可能的（至少我不这么认为）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:35:17.847

试试这个代码

这有助于您从`cameraroll`&获取图像`photolibrary`。使用`UIImagePickerViewController`

如果你拍照

1.  来自相机（在两个都打开为 UINavigationcontroller）。
2.  从图库（对于 ipad 作为 UIpopovercontroller 打开和对于 iphone 作为 nvigationcontroller 打开）。

**第一组委托**

```
@interface camera : UIViewController <UIImagePickerControllerDelegate, UINavigationControllerDelegate,UIPopoverControllerDelegate> 
```

**从相机获取图像**

```
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
        {
            UIImagePickerController *imagePicker =
            [[UIImagePickerController alloc] init];
            imagePicker.delegate = self;
            imagePicker.sourceType =
            UIImagePickerControllerSourceTypeCamera;
            imagePicker.mediaTypes = [NSArray arrayWithObjects:
                                      (NSString *) kUTTypeImage,
                                      nil];

            imagePicker.allowsEditing = YES;

            imagePicker.wantsFullScreenLayout = YES;

            [self presentViewController:imagePicker animated:YES completion:nil];
            newMedia = YES;
            iscamera = 0;
        }
        else
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error to access Camera"
                                                            message:@""
                                                           delegate:nil
                                                  cancelButtonTitle:@"OK"
                                                  otherButtonTitles:nil];
            [alert show];

        } 
```

**从图库中获取图像**

```
 if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary])
    {
        UIImagePickerController *_picker=nil;
        if (popoverController) {
            [popoverController dismissPopoverAnimated:NO];

        }
        _picker = [[UIImagePickerController alloc] init];
        _picker.delegate = self;        
        _picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
        _picker.wantsFullScreenLayout = YES;

        //[popoverController presentPopoverFromBarButtonItem:sender
                               //   permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {

           [self presentViewController:_picker animated:YES completion:nil];

        } else
        {
            popoverController = [[UIPopoverController alloc] initWithContentViewController:_picker];
            [popoverController setDelegate:self];
            [popoverController presentPopoverFromRect:btn.frame
                                               inView:self.view
                             permittedArrowDirections:UIPopoverArrowDirectionLeft
                                             animated:YES];
        }
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error access photo library"
                                                        message:@"your device non support photo library"
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        [alert show];

    } 
```

**您在委托方法中获得的两个结果**

```
-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
   // write your code here ........
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:29:01.387

使用`UIImagePickerController`，请参阅 Apple 文档。

选择来源类型：

```
@property (nonatomic) UIImagePickerControllerSourceType sourceType 
```

从这些开始：

```
UIImagePickerControllerSourceTypePhotoLibrary,
UIImagePickerControllerSourceTypeCamera,
UIImagePickerControllerSourceTypeSavedPhotosAlbum 
```

# security - drools 电子表格 - 电子表格规则的输入验证

> ID：14327880
> 
> 赞同：2
> 
> 时间：2013-01-14T22:24:46.337
> 
> 标签：security, validation, drools, penetration-testing

我目前正在研究设计一个使用 drools 决策表电子表格格式的业务解决方案（[链接到 jboss drools 文档](http://docs.jboss.org/drools/release/5.5.0.Final/drools-expert-docs/html/ch02.html#d0e1157)）。业务用户将拥有并维护电子表格中的规则。

使用决策表格式的一个主要好处是将来可以轻松修改规则以适应不同的规则结构。

Drools 将基于电子表格的规则数据编译为原生规则格式。可以在[此处查看](http://grepcode.com/file/repository.jboss.org/nexus/content/repositories/releases/org.drools/drools-decisiontables/5.4.0.Final/org/drools/decisiontable/parser/DefaultRuleSheetListener.java#DefaultRuleSheetListener)编译器的示例实现。

我的安全团队担心的一个问题是，规则电子表格数据是用户输入，所有用户输入都应该经过正确性验证，以确保它不包含恶意数据（[有关输入验证的基本原理，请参见此处](https://www.owasp.org/index.php/Category%3aInput_Validation)）。

问题：

1.  是否存在业务用户可以将恶意数据添加到规则电子表格的安全风险？
2.  风险有多大/严重？例如，编译器是否充分验证了用户输入的数据？
3.  如何降低风险？例如，另一方在将规则部署到生产环境之前直观地验证电子表格中的规则。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:59:59.853

由于规则可以包含java代码，安全风险实际上比恶意数据更大。用户可以轻松插入他选择的 java 代码来访问您的系统。

您可以使用 drools 验证程序并编写自己的规则，但不可能消除所有风险。

使用第三方来验证规则可能会奏效，但进行验证的人需要是程序员才能正确评估风险，这首先会抵消使用电子表格的优势。

在我看来，电子表格被高估了：

*   您提到的存在固有的安全风险
*   非技术人员很容易修改规则操作部分并拥有损坏的 XLS 文件
*   定义和使用查找表很痛苦。

我建议，一旦你的项目变得稳定，放弃电子表格并为决策表实现你自己的用户界面，或者如果你使用一个，将 guvnor 嵌入到你的 Web 应用程序中。

# android - 将选中的项目移动到可展开的列表视图中

> ID：14327881
> 
> 赞同：2
> 
> 时间：2013-01-14T22:24:46.940
> 
> 标签：android, expandablelistview, move, expandablelistadapter

我正面临 ExpandableListView 的一个大问题。我的目标是让用户将项目的位置更改为这个单选可扩展列表视图：

![在此处输入图像描述](../Images/ba7bc49657e37fcfb1673649ff398162.png)

当用户单击一个项目时，该项目将变为选中状态并出现一个上下文操作栏。因此用户可以通过这种方式向上或向下移动项目：

![在此处输入图像描述](../Images/40d3b3d998bb6230b92e2924f28281a5.png)

我实现的上移/下移功能工作正常（它基于 ArrayList 上的交换位置，这是我的 BaseExpandableListAdapter 的数据源，并通知 UI 的更改）。不幸的是，当我移动选中的项目时，它会失去选中状态......如果我将项目移出可见边界（在示例中，在“锁定”之后或“附件”视图之前），可扩展列表视图不会滚动到新职位。

我怎样才能做到这一点？

下面，我的“moveDownFocusedItem()”编码到我的自定义适配器类中：

```
 //This class is ok!
 //Contains Group and Child position of an ExpandableListView
 public class Position{
    int GroupPosition;
    int ChildPosition;

    public boolean isChild(){
        return (ChildPosition != AbsListView.INVALID_POSITION);
    }

    public Position getPreviousPosition(){
        if(ChildPosition==AbsListView.INVALID_POSITION)
            if(GroupPosition>0)
                return new Position(GroupPosition-1);
            else
                return null;
        else
            if(ChildPosition>0)
                return new Position(GroupPosition, ChildPosition-1);
            else
                return null;
    }

    public Position getNextPosition(){
        if(ChildPosition==AbsListView.INVALID_POSITION)
            if(GroupPosition<_fieldConfigurationList.size()-1)
                return new Position(GroupPosition+1);
            else
                return null;
        else
              if(ChildPosition<_fieldConfigurationList.get(GroupPosition).getChildren().size()-1)
                return new Position(GroupPosition, ChildPosition+1);
            else
                return null;
    }

    public Position(int groupPosition){
        this.GroupPosition = groupPosition;
        this.ChildPosition = AbsListView.INVALID_POSITION;
    }

    public Position(int groupPosition, int childPosition){
        this.GroupPosition = groupPosition;
        this.ChildPosition = childPosition;
    }
}

public void moveDownFocusedItem(){

    //This function returns the next position to move to 
    //(_focusedPosition is the current checked item position)
    Position nextPosition = this._focusedPosition.getNextPosition();

    //Swap ArrayList (This works!)
    if(nextPosition!=null){ 
        Collections.swap(this._fieldConfigurationList,  //that's my datasource
                         this._focusedPosition.GroupPosition,  //Start position for swapping
                         nextPosition.GroupPosition);   //Destination position for swapping

    //Set the new focused position (This works!)
    this._focusedPosition = nextPosition;

    //TODO:
    //Now i have to call "SetItemChecked()" method to uncheck old focused position and check the new one.
    //How to do it? How can i get the required "position" argument from _focusedPosition.GroupPosition and _focusedPosition.ChildPosition?
    //And also...if the focused view has moved to an invisible position (such as the end of the expandablelistview) how can i scroll 
    //to this position?

    //Notify changes (This works!)
    this.notifyDataSetChanged();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:46:39.823

在研究了可扩展列表视图背后的代码之后，我找到了一种相当简单的方法来完成所需的任务。我将发布我的适配器的一部分，它允许检查列表视图项目并上下移动它。请记住：1）确保您的可扩展列表视图处于“单选”模式（ExpandableListView.setChoiceMode(AbsListView.CHOICE_MODE_SINGLE);）

2）您的自定义行视图有 android:descendantFocusability="blocksDescendants"

我已经对 android JB 进行了几次测试，并且似乎可以正常工作，没有错误或内存泄漏。如果出现错误，请发布改进或修复。这是我的代码：

```
public class MyAdapter extends BaseExpandableListAdapter {

//protected ArrayList<Object> _list; //TODO: Replace with your datasource
private ExpandableListView _expandableListView;
private long _checkedPosition;

public long getCheckedPosition(){
    return _checkedPosition;
}
public void setCheckedPosition(int groupPosition){
    long packedPosition = ExpandableListView.getPackedPositionForGroup(groupPosition);
    this.setCheckedPosition(packedPosition);
}
public void setCheckedPosition(int groupPosition, int childPosition){
    long packedPosition = ExpandableListView.getPackedPositionForChild(groupPosition, childPosition);
    this.setCheckedPosition(packedPosition);
}
public void setCheckedPosition(long position){
    final int flatPosition;

    //Gets flat position
    flatPosition = _expandableListView.getFlatListPosition(position);

    //Set the new position, checked and focused
    _expandableListView.setItemChecked(flatPosition , true);
    _checkedPosition = position;

    //If it's out of bounds, set focus on it and force scroll (postpone because row's views may not exists yes)
    if(flatPosition<_expandableListView.getFirstVisiblePosition() || 
       flatPosition>_expandableListView.getLastVisiblePosition())
        _expandableListView.post(new Runnable() {

            @Override
            public void run() {
                _expandableListView.setSelection(flatPosition);     
            }
        });
}

public void clearCheckedPosition(){
    final int flatPosition;

    flatPosition = _expandableListView.getFlatListPosition(getCheckedPosition());
    _expandableListView.setItemChecked(flatPosition , false);
}

private long getPreviousPosition(long position){
    int group = ExpandableListView.getPackedPositionGroup(position);
    int child = ExpandableListView.getPackedPositionChild(position);

    if(child==-1)
        if(group>0)
            return ExpandableListView.getPackedPositionForGroup(group-1); 
        else
            return -1;
    else
        if(child>0)
            return ExpandableListView.getPackedPositionForChild(group, child-1);
        else
            return -1;
}

private long getNextPosition(long position){
    int group = ExpandableListView.getPackedPositionGroup(position);
    int child = ExpandableListView.getPackedPositionChild(position);

    if(child==-1)
        if(group<getGroupCount()-1)
            return ExpandableListView.getPackedPositionForGroup(group+1);
        else
            return -1;
    else
        if(child<getChildrenCount(group)-1)
            return ExpandableListView.getPackedPositionForChild(group, child+1);
        else
            return -1;
}

public boolean canMoveUpCheckedItem(){

    if(getCheckedPosition()!=-1)
        if(getPreviousPosition(getCheckedPosition())!=-1)
            return true;
    return false;
}

public boolean canMoveDownCheckedItem(){
    if(getCheckedPosition()!=-1)
        if(getNextPosition(getCheckedPosition())!=-1)
            return true;
    return false;
}

public void moveUpFocusedItem(){

    long prevPosition = this.getPreviousPosition(getCheckedPosition());
    if(prevPosition!=-1L){  
        //Swap position
        switch(ExpandableListView.getPackedPositionType(getCheckedPosition())){
        case ExpandableListView.PACKED_POSITION_TYPE_GROUP:
            //Collapse group if expanded
            _expandableListView.collapseGroup(ExpandableListView.getPackedPositionGroup(getCheckedPosition()));

            //TODO:Implement group swap
            /*Collections.swap(this._list,
                             ExpandableListView.getPackedPositionGroup(getCheckedPosition()),
                             ExpandableListView.getPackedPositionGroup(prevPosition));*/
            break;

        case ExpandableListView.PACKED_POSITION_TYPE_CHILD:

            //TODO:Implement child swap
            /**Collections.swap(this._list.get(ExpandableListView.getPackedPositionGroup(getCheckedPosition())).getChildren(), 
                            ExpandableListView.getPackedPositionChild(getCheckedPosition()), 
                            ExpandableListView.getPackedPositionChild(prevPosition));**/
            break;

        }

        //Set new focused position
        this.setCheckedPosition(prevPosition);

        //Notify changes
        this.notifyDataSetChanged();

    }
}

public void moveDownFocusedItem(){
    long nextPosition =  this.getNextPosition(getCheckedPosition());
    if(nextPosition!=-1L){
        switch(ExpandableListView.getPackedPositionType(getCheckedPosition())){
        case ExpandableListView.PACKED_POSITION_TYPE_GROUP:
            //Collapse group if expanded
            _expandableListView.collapseGroup(ExpandableListView.getPackedPositionGroup(getCheckedPosition()));

            //TODO:Implement group swap
            /*Collections.swap(this._list, 
                             ExpandableListView.getPackedPositionGroup(getCheckedPosition()), 
                             ExpandableListView.getPackedPositionGroup(nextPosition));*/
            break;

        case ExpandableListView.PACKED_POSITION_TYPE_CHILD: 

            //TODO:Implement child swap
            /*Collections.swap(this._list.get(ExpandableListView.getPackedPositionGroup(getCheckedPosition())).getChildren(), 
                             ExpandableListView.getPackedPositionChild(getCheckedPosition()), 
                             ExpandableListView.getPackedPositionChild(nextPosition));*/
            break;
        }

        //Set new focused position
        this.setCheckedPosition(nextPosition);

        //Notify changes
        this.notifyDataSetChanged();

    }
}

@Override
public Object getChild(int groupPosition, int childPosition) {
    //TODO: Implement
}

@Override
public long getChildId(int groupPosition, int childPosition) {
    return ExpandableListView.getPackedPositionForChild(groupPosition, childPosition);
}

@Override
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
    //TODO: Implement
}

@Override
public int getChildrenCount(int groupPosition) {
    //TODO: Implement
}

@Override
public Object getGroup(int groupPosition) {
    //TODO: Implement
}

@Override
public int getGroupCount() {
    //TODO: Implement
}

@Override
public long getGroupId(int groupPosition) {
    return ExpandableListView.getPackedPositionForGroup(groupPosition);
}

@Override
public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
    //TODO: Implement your getGroupView
}

@Override
public boolean isChildSelectable(int groupPosition, int childPosition) {
    //TODO: Implement
}

@Override
public boolean hasStableIds() {
    //TODO: Implement
} 
```

}

# android - 无法将 Android 应用程序安装到 Jelly Bean 上的第二个用户帐户

> ID：14327885
> 
> 赞同：4
> 
> 时间：2013-01-14T22:24:59.443
> 
> 标签：android, android-4.2-jelly-bean

在 Android 4.2 上，我试图将同一个应用程序安装到 2 个不同的用户帐户上。当我尝试这样做时，在权限页面上单击“安装”后，我得到“未安装应用程序”。以下是我用来获取此消息的步骤：

1）在平板电脑上登录所有者帐户。
2) 下载（使用 Chrome）app.apk 并从“下载”弹出窗口中选择它进行安装。
3) 单击权限页面上的安装
4) 注销
5) 在平板电脑上登录不同的用户帐户
6) 下载（使用 Chrome）app.apk 并从“下载”弹出窗口中选择它进行安装。
7) 在权限页面点击安装

不会显示带有“未安装 X 应用程序”的无用消息的对话框。

如何将此应用程序安装到同一平板电脑上的 2 个不同用户帐户上？

这是应用程序的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  android:versionCode="121212"
  android:versionName="0.1"
  package="com.company.app">
<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.INTERNET" /> 
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
<uses-permission android:name="android.permission.VIBRATE"/>
<application android:icon="@drawable/app_icon" android:label="@string/app_name" android:debuggable="true"  >
    <activity android:name="Activity1"
        android:configChanges="keyboardHidden|orientation"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="Activity2" android:configChanges="keyboardHidden|orientation" />
    <activity android:name="Activity3"   android:configChanges="keyboardHidden|orientation" />
</application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T16:44:34.400

经过进一步调查，从 logcat 我确定我收到了 INSTALL_FAILED_UID_CHANGED 错误。这是由版本问题引起的。我们有一个流程，我们通过电子邮件将旧版本的应用程序发送给想要安装它的用户。该应用程序所做的第一件事是检查并安装新版本（如果可用）。

所以问题是第一个用户安装了旧版本，然后更新到最新版本。然后当第二个用户尝试安装旧版本时，它被拒绝了，因为它是一个旧版本，然后是 vi 安装的应用程序。

结果在多用户平板电脑上，只能安装一个版本的应用程序。如果我为一个用户更新应用程序，所有其他用户也会更新。

Hope this helps other Android developers.

# ruby-on-rails - 检测在rails中上传到服务器的文件类型

> ID：14327890
> 
> 赞同：0
> 
> 时间：2013-01-14T22:25:27.333
> 
> 标签：ruby-on-rails, ruby, file-type

我如何检测到 serv 文件的文件类型，所以它是 .csv 我做一种方法，当 .xls - 其他...我可以像 filename.include(".csv") 一样做？但这是个坏主意...我如何检测文件类型？

还有我的代码：

```
other_name = uploaded_io4.original_filename   
      File.open(Rails.root.join('public', 'uploads_prices', uploaded_io4.original_filename), 'wb') do |file|
        file.write(uploaded_io4.read)
      end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:32:41.957

您可以查看上传的[MIME](http://en.wikipedia.org/wiki/Internet_media_type)`uploaded_io4.content_type`类型，然后根据该类型决定要做什么。

# delphi - DevExpress 网格中的奇怪过滤器行为

> ID：14327893
> 
> 赞同：1
> 
> 时间：2013-01-14T22:25:31.837
> 
> 标签：delphi, grid, devexpress, master-detail, unidac

我有一个带有 2 个网格的表单，显示使用 Devart UniQuery 上的主从选项选择的记录。这很好地显示了与主相关的详细记录。我可以选择使用过滤器选择记录（公司）。这是由 30 个按钮完成的，每个按钮上都有一个字母，然后当按下一个时，我使用此代码设置过滤器

```
procedure TfrmJsCompanies.ButtonClick(Sender: TObject);
var
  ButtonValue: char;
  FilterString: string;
begin
  ButtonValue := (Sender as TcxButton).Caption[1];
  FilterString := ButtonValue + '%';
  with grdCompaniesView1.DataController.Filter.Root do
    begin
      Clear;
      BoolOperatorKind := fboOr;
      AddItem(colCompany_Name, foLike, FilterString, FilterString);
    end;
  grdCompaniesView1.DataController.Filter.Active := True;
  grdCompaniesView1.FilterRow.Visible := False;
  ActiveControl := grdCompanies;
end; 
```

如果我这样做，我会得到我期望的结果，除非我首先按下一个按钮，该按钮给我有详细记录的主记录，然后按下一个没有给我主记录的按钮 - 在这种情况下，之前选择的详细记录仍然是显示在我的详细信息网格中

我能做些什么来摆脱这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T05:57:21.537

此行为是由于过滤是在 cxGrid 级别执行的，而不是在 DataSet 级别执行的，因此不会过滤 DataSet。
一种处理方法可能是：

```
procedure TForm1.DetailViewFilterRecord(ADataController: TcxCustomDataController; ARecordIndex: Integer;
  var Accept: Boolean);
begin
  Accept := MasterView.DataController.FilteredRecordCount >0;
end;

procedure TForm1.MasterViewDataControllerFilterChanged(Sender: TObject);
begin
   DetailView.DataController.Refresh
end; 
```

# java - 在 Maven 项目中设置 jdbc

> ID：14327899
> 
> 赞同：0
> 
> 时间：2013-01-14T22:25:55.377
> 
> 标签：java, mysql, maven, jdbc, odbc

我一直在研究一个专门用于junit测试的maven项目。我创建了一个类来访问数据库并对数据库进行简单查询。不确定我`mysql-connector-java-5.1.22-bin.jar`是否正确安装，这是一个片段：

```
/home/rick/examples/java/junit/lib/ mvn install:install-file \
    -Dfile=mysql-connector-java-5.1.22-bin.jar \
    -DgroupId=com.oracle \
    -DartifactId=oracle \
    -Dversion=10.2.0.2.0 \
    -Dpackaging=jar \
    -DgeneratePom=true 
```

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T22:44:40.747

你可以直接把它放在你的 pom 中，而不必在本地安装它。

```
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.22</version>
</dependency> 
```

请参阅[search.maven.com](http://search.maven.org/#search%7Cga%7C1%7Cmysql-connector)

# asp.net-mvc-4 - 使用 MVC4 Database-first，如何使用复合主键注释模型？

> ID：14327904
> 
> 赞同：0
> 
> 时间：2013-01-14T22:26:14.013
> 
> 标签：asp.net-mvc-4, composite-primary-key, database-first

我是 MS 的 MVC4 的新手，我得到了一个数据库，我必须为其构建一个 CRUD 前端。这些表都具有 [TableID, TableName, EffectiveDate] 形式的复合主键。我无法更改数据库设计。我使用数据库优先技术和*EF 5.x DbContext generator for C#*工具来创建模型，但生成的模型文件不包含复合键的注释。这是 Department 表的示例，主键 = [DeptID, DeptName, EffDate]。

```
//------------------------------------------------------------------------------
// <auto-generated>
//    This code was generated from a template.
//
//    Manual changes to this file may cause unexpected behavior in your application.
//    Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace BillableUnits4.Models
{
    using System;
    using System.Collections.Generic;

    public partial class Department
    {
        public int DeptID { get; set; }
        public string DeptName { get; set; }
        public System.DateTime EffDate { get; set; }
        public string Status { get; set; }
        public string Fund { get; set; }
        public string DeptNo { get; set; }
        public string RevenueAccount { get; set; }
        public string BalanceSheetAccount { get; set; }
    }
} 
```

我打赌钥匙应该是这样的：

```
 [key] 
    public int DeptID { get; set; }
    [key]
    public string DeptName { get; set; }
    [key]
    public System.DateTime EffDate { get; set; } 
```

我什至需要注释主要关键组件吗？如果是这样，我应该将注释添加到生成的模型文件中吗？（显然，重新生成文件会删除我手动所做的任何更改）。有没有办法告诉 MVC4 / Visual Studio 生成带有正确注释的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:44:13.213

您不必为数据库添加明显的注释 :) 您的代码不会使用特定于数据库的注释，所以我不必担心。

`[Required]`您可能希望使用对您的应用程序数据一致性有意义的注释来装饰您的模型。在这种情况下，您可以使用部分类（[http://weblogs.asp.net/scottgu/archive/2010/01/15/asp-net-mvc-2-model-validation.aspx](http://weblogs.asp.net/scottgu/archive/2010/01/15/asp-net-mvc-2-model-validation.aspx)）或实施`ViewModels`（即你可以修改而不用担心你不应该真正修改的自动生成的类）

# javascript - Phonegap iOS - 防止滚动输入焦点

> ID：14327909
> 
> 赞同：6
> 
> 时间：2013-01-14T22:26:41.690
> 
> 标签：javascript, ios, cordova

我正在使用 Phonegap 创建一个 iPad 应用程序。该应用程序具有固定的横向方向和顶部运行的菜单，其中右上角有一个文本框。该应用程序是固定（全屏）大小，不需要滚动。

当用户在 iOS 6 上触摸出现在右上角的文本框时，整个应用程序向左滑动，以便将文本框放置在屏幕中央，将整个应用程序向左推，在右侧留下一个空白区域。

如何防止这种行为？

我目前将 UIWebViewBounce 设置为 NO 并使用以下代码来捕获 touchstart 事件：

```
document.body.addEventListener('touchmove', function(e) {
    e.preventDefault();
}, false); 
```

我在文本框本身也有这个，它似乎可以在 iOS 5 上运行（尽管有口吃），但在 iOS 6 上不行：

```
$('#searchText').on("focus", function(event) {
    window.scrollTo(0, 0);
}); 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-01T10:07:40.660

尝试将此javascript添加到您不想在聚焦时转移的`onfocus`属性中：`input`

```
<input onfocus="this.style.webkitTransform = 'translate3d(0px,-10000px,0)'; webkitRequestAnimationFrame(function() { this.style.webkitTransform = ''; }.bind(this))"/> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T22:38:04.187

尝试将以下 CSS 样式添加到您的 body 元素中：

```
-webkit-touch-callout: none; 
-webkit-user-select: none; 
-khtml-user-select: none; 
-moz-user-select: none; 
-ms-user-select: none;
 user-select: none;
-webkit-tap-highlight-color: rgba(0,0,0,0); 
```

它可以防止用户选择链接和其他内容。也许它会对你有帮助。

# java - Java 正则表达式，用于包装除某些给定字符之外的所有内容

> ID：14327917
> 
> 赞同：0
> 
> 时间：2013-01-14T22:27:33.623
> 
> 标签：java, regex

我有一个字符串，例如

```
somet3x70rnumb3r5.3.1*@:ch4r5* 
```

`*`我需要用 Pattern Quote包装所有不是星号的东西，`\Q...\E`并将其替换`*`为`.*`. 它应该给出这个：

```
\Qsomet3x70rnumb3r5.3.1\E.*\Q@:ch4r5\E.* 
```

我可以通过字符串遍历、拆分`*`（或我指定的任何字符）以及逐步构建字符串来做到这一点，但如果可能的话，我想使用正则表达式和 Pattern 类实用程序。

另一个带有指定字符的示例`?`，将替换为`.`：

```
123?4? 
```

应该给

```
\Q123\E.\Q4\E. 
```

我正在考虑使用组，但我需要每个区域周围的组，因为每个区域都必须被另一个字符包裹或替换。

`String`我的目标是从给定的模式创建一个模式，`String`但只考虑与指定字符匹配的区域并忽略其余部分（即使它包含正则表达式模式）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:37:17.947

如果您不担心构建单线，它会更简单。单线可能是可能的，但这会很痛苦。相反，我建议你这样做：

```
str = str.replaceAll("(?<!^)\\*(?!$)", "\\E.*\\Q")
         .replaceAll("(?<!^)\\?(?!$)", "\\E.\\Q");
str = "\\Q" + str + "\\E"; 
```

写起来更简单，也更容易理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:37:51.207

像这样的东西？

```
String s = "abc*efg?123";
s = s.replaceAll("([^\\*\\?]+)", "\\\\Q$1\\\\E");
s = s.replaceAll("\\*", ".*");
s = s.replaceAll("\\?", "."); 
```

结果是`\Qabc\E.*\Qefg\E.\Q123\E`

# php - 搜索关联数组键的函数

> ID：14327919
> 
> 赞同：1
> 
> 时间：2013-01-14T22:27:42.197
> 
> 标签：php

我正在编写一个购物车会话处理程序类，我发现自己重复了这段代码，它在多维关联数组中搜索值匹配。

```
foreach($_SESSION['cart'] as $k => $v){

    if($v['productID'] == $productID){
        $key = $k;
        $this->found = true;
    }
} 
```

我在尝试匹配数组中的不同值时重复这一点。是否有一种易于创建的方法，通过该方法我将键传递给搜索和值。（听起来很简单，现在我读回来了，但由于某种原因没有运气）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:38:30.057

听起来你想要这样的东西：

```
function findKey(array $array, $wantedKey, $match) {
    foreach ($array as $key => $value){
        if ($value[$wantedKey] == $match) {
            return $key;
        }
    }
} 
```

现在你可以这样做：

```
$key = findKey($_SESSION['cart'], 'productID', $productID);

if ($key === null) {
    // no match in the cart
} else {
    // there was a match
} 
```

# php - MAC Excel 使用什么编码？

> ID：14327920
> 
> 赞同：3
> 
> 时间：2013-01-14T22:27:44.760
> 
> 标签：php, macos, csv, utf-8, character-encoding

我有一个客户端想要将 .csv 导出到服务器，PHP 将在服务器上对其进行解析，以便生成包含其数据的表。我正在使用 iconv 转换为适当的编码（UTF-8）。不幸的是，我在 Windows 上，所以我不知道源编码是什么。

MAC Excel 将使用什么编码来生成 .csv？我尝试了很多不同的组合，但没有一个适用于法语口音，据我所知，它们在 MAC 字符集中的排列方式与在 UTF-8 中的排列方式不同

例如：

正确的显示应该是：'Délégation'

大多数类型的编码（包括使用 utf8_encode()）给出：'DÈlÈgation'

macintosh 到 UTF-8 给出：'D»l»gation'

如果我在我的 PC 上打开从 MAC 保存的 .csv 文件，我会看到法语“é”重音为“È”，因此是否有可能将文件保存到我的计算机（或服务器）上强制该文件直接转为 UTF-8，所以现在“È”是字符的直接值，而不是 UTF-8 编码的误解？

**十六进制转储**

使用 bin2hex()，字符串的十六进制转储：'DÈlÈgation 1'是：44c86cc8676174696f6e2031

-- 事实上，我假设它是 DÈlÈgation 而不是 Délégation，因为如果我在记事本（在我的 PC 上）中打开 .csv 文件，它会显示为 È 而不是 é。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:29:22.447

Mac 程序使用的常见编码是[MacRoman](http://en.wikipedia.org/wiki/Mac_OS_Roman)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:48:03.050

您的客户是否可以从 Apple 网站安装 Apple Numbers 试用版，使用 Numbers 打开 .csv 文件，然后转到“文件”、“导出”、“CSV”，然后选择“UTF- 8" 或 "windows Latin 1" 并重新发送 UTF-8 和 Windows Latin 1 文件？Mac 上的“数字”应用程序有时可以解决 Excel 上遇到的问题...

# jquery - Jquery toggleClass 问题 - 相同的代码适用于 addClass - 我做错了什么？

> ID：14327925
> 
> 赞同：0
> 
> 时间：2013-01-14T22:28:08.857
> 
> 标签：jquery, toggleclass

我正在尝试用 jquery 切换一类“on”，但似乎没有用。addClass 确实有效，所以我不确定我做错了什么？

这有效：

```
$(".request-trial").click(function () {
  $("#request-trial").addClass("on");
}); 
```

但这不会：

```
$(".request-trial").click(function () {
  $("#request-trial").toggleClass("on");
}); 
```

任何帮助，将不胜感激..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:33:11.077

它对我有用，虽然我猜你并不是`#request-trial`在点击事件中，而是需要`$(this)`或者`$(".request-trial")`

```
<div id="request-trial" class="request-trial"></div> 
```

* * *

```
$(".request-trial").click(function () { 
    $("#request-trial").toggleClass("on");
}); 
```

[http://jsfiddle.net/hXxjY/](http://jsfiddle.net/hXxjY/)

# php - 将查询结果放在不同的 div 中

> ID：14327928
> 
> 赞同：0
> 
> 时间：2013-01-14T22:28:14.683
> 
> 标签：php, html, codeigniter

我正在尝试在不同 div 的视图中显示查询的结果，如果我正确理解 result() 函数返回对象，我会花一天时间阅读[ellislab如何显示结果，这是我的模型：](http://ellislab.com/codeigniter/user-guide/database/results.html)

**模型**

```
function get_post(){
    $this->db->select(*);
    $this->db->order_by('date_time', 'desc');
    $this->db->limit(2);
    $results = $this->db->get('post');

    if($results->num_rows()<1){
          return false;
    }
    else{
          return $results->result();
    }
} 
```

这就是我的控制器所做的：

**控制器**

```
foreach($results as $res){
    $data['post_signature']     =  $res->signature;
    $data['post_title']         =  $res->title;
    $data['post_article']       =  $res->article;
    $data['post_date']          =  date('d-M-Y', strtotime($res->date_time));
    $data['post_time']      =  date('H:i', strtotime($res->date_time));
} 
```

我想在我的视图中显示的是 div 中的一系列结果和另一个 div 中的第二个结果。

```
<div id="1">First Result</div>
<div id="2">Second Result</div> 
```

我要做的是将整个查询结果传递给视图并使用 foreach，如下所示：

```
<?php foreach ($results as $res)
     <div id="1">First Result</div>
     <div id="2">Second Result</div>
?> 
```

显然，这种方法的问题是这个 foreach 只是重复了两个 div，我只想把第一个结果放在第一个 div 中，第二个放在第二个 div 中。我还坚持将 foreach 更改为控制器并使用 for 语句将返回的所有参数保存到数据数组中，但由于某些原因，这似乎非常低效。

我希望你有更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:33:33.633

怎么改成

```
<?php
  $i=1;
  foreach ($results as $res) {
     echo '<div id="'.$i++.'">'.$res.'</div>';
  }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:35:37.127

foreach 部分不正确。您必须将 php/html 代码分开。

也许你可以在你的视图中尝试这样的事情：

```
<?php foreach ($results as $key => $res) {
     echo '<div id="'.$key.'">'.implode(' ', $res).'</div>';
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T22:36:49.430

您应该将`$results`对象传递给视图并在`foreach`那里使用：

```
// in your view (assuming you passed the $results as-is
<?php
foreach ($results as $res)
{
    echo '<div id="' . $res->id . '">';
    echo $res->title . '<br />';
    echo 'Posted ' . date('d-M-Y', strtotime($res->date_time)) . ' ';
    echo 'at ' . date('H:i', strtotime($res->date_time)) . '<br />';
    echo '<p>' . $res->article . '</p>';
    echo '</div>'; 
}
/**
you'll get something like the following
<div id="1">
    My Title<br />
    Posted 14 Jan 2012 at 16:40<br />
    <p>Lorem ipsum dolor sit amet.</p>
</div>
<div id="2">
    Another Title<br />
    Posted 14 Jan 2012 at 16:45<br />
    <p>Lorem ipsum dolor sit amet also.</p>
</div>
*/ 
```

这个想法是`$results`结果对象的集合，所以当你在控制器中循环它们时（就像你在问题中的例子） - 你没有得到视图中对象的“集合”。循环浏览视图允许您管理这些结果的集合（以及显示）。

# python - 如何导入 xls 联系人并向列表发送电子邮件

> ID：14327930
> 
> 赞同：0
> 
> 时间：2013-01-14T22:28:21.050
> 
> 标签：python, email, xlrd

我正在尝试使用 XLRD 读取包含名字、姓氏和电子邮件地址的 excel 文件。

问题：使用 XLRD 后我会得到什么类型的对象，我如何使用这些信息向所有电子邮件地址发送电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:10:54.173

我试过这些：

……

```
import xlrd
wb = xlrd.open_workbook('emails.xlsx')
sh = wb.sheet_by_index(0)
email_column = sh.col_values(1)
#for e in email_column:
send_file_zipped('result.zip',email_column ) 
```

但结果不好，因为它抄送所有电子邮件地址....我想将电子邮件一一发送....

# java - 处理 cname 反向查找时 java.net.SocketPermission 中是否存在错误

> ID：14327942
> 
> 赞同：1
> 
> 时间：2013-01-14T22:29:18.870
> 
> 标签：java, permissions, dns

考虑以下代码段：

（在这种情况下，OpenJDK 6b24-1.11.5-0ubuntu1~12.10.1，这似乎无关紧要，因为 Oracle 和 OpenJDK 的所有 JVM 6&7 都具有相同的行为）

```
SocketPermission toCheck = new SocketPermission("www.google.ca", "resolve");

SocketPermission checker = new SocketPermission("*.ca:80", "connect");

System.out.println("Result: " + checker.implies(toCheck));

checker = new SocketPermission("*.1e100.net:80", "connect");

System.out.println("Result: " + checker.implies(toCheck)); 
```

我得到的结果是：

```
Result: false
Result: true 
```

问题似乎是 JVM 执行反向查找以验证地址是否与已解析的域实际匹配。

对 www.google.ca 域的挖掘查找显示以下内容：

```
[rotty@rotty-desktop ~]$ dig www.google.ca ANY

; <<>> DiG 9.8.1-P1 <<>> www.google.ca ANY
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 48015
;; flags: qr rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;www.google.ca.         IN  ANY

;; ANSWER SECTION:
www.google.ca.      114 IN  A   74.125.226.55
www.google.ca.      114 IN  A   74.125.226.56
www.google.ca.      114 IN  A   74.125.226.63
www.google.ca.      74  IN  AAAA    2607:f8b0:400b:801::1018

;; Query time: 27 msec
;; SERVER: 127.0.1.1#53(127.0.1.1)
;; WHEN: Mon Jan 14 17:18:50 2013
;; MSG SIZE  rcvd: 107 
```

此外，获取结果中的第一个地址并执行 DNS 查找会产生：

```
[rotty@rotty-desktop ~]$ nslookup 74.125.226.55
Server:     127.0.1.1
Address:    127.0.1.1#53

Non-authoritative answer:
55.226.125.74.in-addr.arpa  name = yyz06s06-in-f23.1e100.net.

Authoritative answers can be found from: 
```

这似乎清楚地表明了这个问题。非权威反向查找返回为域定义的第一个（在这种情况下按位置）别名。

这意味着我需要知道并声明任何可能解析为指定域名基础地址的潜在别名。

为什么 JVM 需要这样的匹配？一个地址确实存在的简单验证是否足以满足“解决”过程？该地址可能有任意数量的可能反向映射。这怎么可能在实践中起作用？

**[更新]**为了澄清这实际上与默认 java 策略定义的行为相同，请考虑以下附加示例：

```
Socket socket = new Socket("www.google.ca", 80);

socket.close(); 
```

对上述应用以下安全策略：

```
grant {
    permission java.net.SocketPermission "*.ca:80", "connect";
    //permission java.net.SocketPermission "*.1e100.net:80", "connect";
}; 
```

执行程序如下：

```
java -Djava.security.manager -Djava.security.policy=../security.policy Test 
```

结果是：

```
Exception in thread "main" java.security.AccessControlException: access denied ("java.net.SocketPermission" "www.google.ca" "resolve")
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)
    at java.security.AccessController.checkPermission(AccessController.java:560)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at java.lang.SecurityManager.checkConnect(SecurityManager.java:1048)
    at java.net.InetAddress.getAllByName0(InetAddress.java:1203)
    at java.net.InetAddress.getAllByName(InetAddress.java:1127)
    at java.net.InetAddress.getAllByName(InetAddress.java:1063)
    at java.net.InetAddress.getByName(InetAddress.java:1013)
    at java.net.InetSocketAddress.<init>(InetSocketAddress.java:142)
    at java.net.Socket.<init>(Socket.java:208)
    at example.security.SocketSecurityExample.test(SocketSecurityExample.java:13)
    at example.security.SocketSecurityExample.main(SocketSecurityExample.java:9) 
```

将策略文件更改为：

```
grant {
    //permission java.net.SocketPermission "*.ca:80", "connect";
    permission java.net.SocketPermission "*.1e100.net:80", "connect";
}; 
```

导致正确执行代码。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-14T22:36:57.497

连接时 JVM 不会执行该操作。它构造一个包含实际主机名/IP 地址的 SocketPermission，并使用 'implies' 检查 .policy 文件中的任何权限是否暗示*该权限。*

# c++ - Magick++ 修剪不属于背景颜色的像素（图像顶部和底部的像素颜色相同）

> ID：14327943
> 
> 赞同：0
> 
> 时间：2013-01-14T22:29:20.990
> 
> 标签：c++, graphicsmagick, magick++

以下尺寸为 1x9 的图像被修剪为 1x6，因为可能顶部的像素与底部的像素颜色相同，并且在修剪功能中，这些像素被识别为背景颜色，即使报告了 backgroundColor在执行修剪功能之前是#FFFFFF。

[http://s1.postimage.org/a7r69yxsr/m_medium_bc.png](http://s1.postimage.org/a7r69yxsr/m_medium_bc.png)

我唯一要做的就是对图像执行修剪。显式设置 backgroundColor 和/或 transparent() 没有区别。

1.  为什么会发生这种情况，这是预期的行为吗？
2.  这可以通过配置/属性设置/不更改 Graphicsk 库代码来解决吗？
3.  如果没有，什么时候可以修复这个错误？您是否希望在接下来的几天内修复这种性质的错误？

这是代码：

```
Magick::Image tempImage;
tempImage.read(name);
std::cout<<"size:"<<tempImage.columns()<<","<<tempImage.rows()<<std::endl;
temp=tempImage.backgroundColor();
std::cout<<"bg:"<<(std::string)temp<<std::endl;
tempImage.trim();
std::cout<<"size:"<<tempImage.columns()<<","<<tempImage.rows()<<std::endl; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T11:31:44.400

我同意这种行为很奇怪，我不是 ImageMagick/Magick++ 的开发人员/维护人员，因此无法进一步评论这是错误还是“功能”。但是我遇到了同样的问题并创建了这个函数作为一种解决方法（注意这比手动迭代像素要快得多，即使有像素缓存也是如此）：

```
Magick::Geometry CalculateImageMagickBoundingBox( const Magick::Image & image, const Magick::Color & borderColor )
{
    // Clone input image.
    Magick::Image clone( image );

    // Remember original image size.
    const Magick::Geometry originalSize( image.columns( ), image.rows( ) );

    // Extend geometry by two in width and height (one pixel border).
    Magick::Geometry extendedSize( originalSize.width( ) + 2, originalSize.height( ) + 2 );

    // Extend cloned canvas (center gravity so 1 pixel border of user specified colour).
    clone.extent( extendedSize, borderColor, Magick::CenterGravity );

    // Calculate bounding box (will use border colour, which we have set above).
    Magick::Geometry boundingBox = clone.boundingBox( );

    // We added 1 pixel border, so subtract this now.
    boundingBox.xOff( boundingBox.xOff( ) - 1 );
    boundingBox.yOff( boundingBox.yOff( ) - 1 );

    // Clamp (required for cases where entire image is border colour, and therefore the right/top borders 
    // that we added are taken into account).
    boundingBox.width( std::min( boundingBox.width( ), originalSize.width( ) ) );
    boundingBox.height( std::min( boundingBox.height( ), originalSize.height( ) ) );

    // Return bounding box.
    return boundingBox;
} 
```

在您的特定情况下，您可以使用此函数，然后根据返回的几何图形设置画布大小。

# c - c中的垃圾收集器用于循环内的变量

> ID：14327946
> 
> 赞同：2
> 
> 时间：2013-01-14T22:29:28.860
> 
> 标签：c, memory-management, memory-leaks, garbage-collection

我主要是一名 Java 人员，最近从事一些涉及 C 的项目，所以如果这是一个基本的 C 问题，请多多包涵。

所以在我的 main 里面我有一个 while 循环，我每次迭代都声明一个变量。

```
int main()
{
  int done = 0;
  while(!done)
  {
    char input[1024];
    scanf("%s", input);
    //parse the input string
    ...
  }
} 
```

现在，由于输入变量每次都会根据用户想要的内容而改变，因此我每次都必须使用“新”变量。但是，我认为上述声明最终会导致内存泄漏（或者会吗？）。我想知道 gcc 是否负责垃圾收集。

有没有更好的方法而不在每次迭代后分配和释放？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T22:31:33.357

> 我认为上述声明最终会导致内存泄漏（或者会吗？）。

不，它不会：`input`是一个*自动*（又名“堆栈”）变量，一旦超出范围（即在右括号之后），它将被“释放”。

> 有没有更好的方法而不在每次迭代后分配和释放？

没有实际的分配或释放：自动内存中的空间（也称为“堆栈上”）是由堆栈指针周围的一些编译时簿记分配的。自动变量的访问是一个非常快速的操作，在硬件的大力协助下，因此没有效率损失。

动态内存分配（Java 风格）是在 C 中使用`malloc`//完成的`calloc`。`realloc`这些不是垃圾收集 - 您需要显式`free`分配您分配的每个指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:31:43.643

> 但是，我认为上述声明最终会导致内存泄漏（或者会吗？）

它不会。`input`每次`}`遇到循环的尾随时都会丢弃该对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T22:38:21.647

正如其他人已经说过的那样，堆栈变量在超出范围时会自动释放，并且通常很快就会被覆盖。

话虽这么说，我写这个答案的原因是强调这一点：**C 中没有垃圾收集器**，至少默认情况下没有。这意味着您必须手动释放*堆*分配的内存（通常使用 和其他初始化`malloc`） （使用）。`calloc``free`

# ember.js - 使用 Ember 路由器 v2 进入和退出模态状态的正确方法是什么？

> ID：14327949
> 
> 赞同：7
> 
> 时间：2013-01-14T22:29:45.787
> 
> 标签：ember.js, ember-router

我无法找出使用新 Ember 路由器处理模态状态/视图的正确方法。更一般地说，您如何处理可以进入和退出而不影响“主要”状态（URL）的状态？

例如，无论当前叶子状态如何，*始终*可用的“新消息”按钮。单击“新消息”应在当前视图上打开新消息模式，而不会影响 URL。

目前，我正在使用这样的方法：

路线：

```
App.Router.map(function() {
   this.route('inbox');
   this.route('archive');
});

App.IndexRoute = Em.Route.extend({
  ...
  events: {
    newMessage: function() {
      this.render('new_message', { into: 'application', outlet: 'modalView' });
    },

    // Clicking 'Save' or 'Cancel' in the new message modal triggers this event to remove the view:
    hideModal: function() {
      // BAD - using private API
      this.router._lookupActiveView('application').disconnectOutlet('modalView');
    }
  }
});

App.InboxRoute = Em.Route.extend({
   ...
   renderTemplate: function(controller, model) {
     // BAD - need to specify the application template, instead of using default implementation
     this.render('inbox', { into: 'application' });
   }
});

App.ArchiveRoute = ... // basically the same as InboxRoute 
```

application.handlebars：

```
<button {{action newMessage}}>New Message</button>
{{outlet}}
{{outlet modalView}} 
```

为了简洁起见，我显然省略了一些代码。

这种方法“有效”，但存在上述两个问题：

1.  我正在使用私有 API 来删除`hideModal`事件处理程序中的模式视图。
2.  我需要`application`在我的所有子路由中指定模板，因为如果我不这样做，`renderTemplate`如果您打开模式，关闭它，然后在收件箱之间导航，默认实现将尝试呈现到模式的模板而不是应用程序中和存档状态（因为模态的模板已成为`lastRenderedTemplate`IndexRoute 的模板）。

显然，这些问题都不是破坏者，但很高兴知道我是否缺少更好的方法，或者这只是当前路由器 API 中的一个差距。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T16:51:17.583

我们做同样的事情，但没有访问私有 API。我不知道我们的解决方案是否是最佳实践，但它确实有效。

在我们的事件中，`RootRoute`我有一个事件（与您的相同`newMessage`），我们在其中创建需要渲染的视图，然后附加它。

```
events: {
    showNewSomething: function(){
        var newSomethingView = app.NewSomethingView.create({
            controller: this.controllerFor('newSomething')
        });
        newSomethingView.append();
    }
} 
```

这会将模态视图附加到我们的应用程序中。在取消或保存时，`newSomethingView`我们调用`this.remove()`以销毁视图并再次将其从应用程序中删除。

同样，这感觉不是最佳实践，但它确实有效。如果有人有更好的解决方案，请随时对此发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:19:40.617

不知道您使用的是 Bootstrap Modal 脚本还是哪个，但如果是，这个问题有一个建议的解决方案。我自己还没有弄清楚所有的部分，但我自己正在寻找一种类似类型的解决方案，以便能够以符合“Ember 最佳实践”的方式使用[Colorbox](http://www.jacklmoore.com/colorbox/)。

# javascript - 无法使用 angular.js 删除对象

> ID：14327950
> 
> 赞同：1
> 
> 时间：2013-01-14T22:29:49.153
> 
> 标签：javascript, angularjs

我已经为自己定义了一个用于 Angular.js 的 api：

```
angular.module('api', ['ngResource'])
    .factory('Server', function ($resource) {
        return $resource('http://localhost\\:3000/api/servers/:name');
    })
    .factory('ActiveServer', function ($resource) {
        return $resource('http://localhost\\:3000/api/servers/active/:name', {},
            { start: {method: 'POST'}, stop: {method: 'DELETE'} });
    }); 
```

这个想法是，我有一组已定义的服务器，可通过`/api/servers/`uri 使用。可以通过将特定服务器添加到`/api/servers/active/`uri 来启动它，并通过删除它来停止它。

在我的控制器中，我有以下代码：

```
$scope.start = function() {
    ActiveServer.start(this.server);
};

$scope.stop = function() {
    ActiveServer.stop(this.server);
}; 
```

再次由按钮触发

```
 <div class="well span4" ng-repeat="server in servers">
        <h1>{{server.definition.name}}</h1>
        <span class="label label-info">{{server.status}}</span>
        <button type="button" class="btn btn-primary"
                ng-click="start()">Start</button>
        <button type="button" class="btn btn-primary"
                ng-click="stop()">Stop</button>
    </div> 
```

启动服务器工作正常，但我无法停止它。上面的代码以以下请求结束：

```
Request URL:http://localhost:3000/api/servers/active?$$hashKey=005&_events=[object+Object]&definition=[object+Object]&status=ready
Request Method:DELETE 
```

我的`definition`服务器对象的 - 部分，包含标识要停止的服务器的名称，没有正确序列化。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T00:21:12.257

如果您的 API ( `ActiveServer`) 只需要接收服务器名称即可工作，则在服务调用期间仅传递服务器名称。像这样：

```
$scope.start = function() {
    ActiveServer.start({name: this.server.definition.name});
};

$scope.stop = function() {
    ActiveServer.stop({name: this.server.definition.name});
}; 
```

在任何服务调用中传递整个`this.server`对象将导致整个对象被参数化到 HTTP 请求中。

**扩展解释：**

`api/servers/:name`当您在 URL 上使用类似的东西时`$resource`，您基本上是说该`:name`部分将被参数（即）接收到的**具有相同名称**`{name: 'someName'}`（在本例中为“名称”）的属性的值替换。

从 angularJS [$resource 文档](http://docs.angularjs.org/api/ngResource.%24resource)：

> 参数对象中的每个键值首先绑定到 url 模板（如果存在），然后将任何多余的键附加到 ? 之后的 url 搜索查询。给定模板 /path/:verb 和参数 {verb:'greet'，salutation:'Hello'} 会产生 URL /path/greet?salutation=Hello。如果参数值以 @ 为前缀，则从数据对象中提取该参数的值（对于非 GET 操作很有用）。

所以，如果你打电话，`service.get({name: 'abc'})`那么请求的 URL 将是 `api/server/abc`

如果你打电话`service.get({name: 'abc', id: '123'})`，那么 URL 将是`api/server/abc?id=123`

在您的情况下，`this.server`对象看起来像这样：

```
{ 
  $$hashKey: 005,
  _events: {},
  definition: {},
  status: ready
} 
```

由于 AngularJS 没有**进行深入的参数化**，`_events`并且`definitions`显示`_events=[object+Object]&definition=[object+Object]`在 URL 上。

# linux - Debian 和 Win7、Ubuntu 上的 OpenGL 阴影体积差异

> ID：14327951
> 
> 赞同：1
> 
> 时间：2013-01-14T22:29:49.697
> 
> 标签：linux, opengl, ubuntu, debian

在具有最新 opengl 的 windows7 和具有 freeglut3 应用程序的 Ubuntu 12.04 中，我可以使用阴影体积方法正确绘制阴影。但是，当我在旧版本的 Debian GNU/Linux 6.0.6 上运行我的代码时，无法正确绘制阴影，不幸的是我应该绘制这些阴影 :(

我认为我有剔除问题，因为当我绘制彩色阴影体积时，我可以正确看到体积。但是，剔除体积的正面和背面会产生问题，并且无法绘制阴影。我对阴影一无所知。

这是我的投射阴影代码：

```
 glDisable(GL_LIGHTING);
    glDepthMask(GL_FALSE);
    glDepthFunc(GL_LEQUAL);

    glEnable(GL_STENCIL_TEST);
    glColorMask(0, 0, 0, 0);
    glStencilFunc(GL_ALWAYS, 1, 0xffffffff);

    // first pass, stencil operation decreases stencil value
    glFrontFace(GL_CCW);
    glStencilOp(GL_KEEP, GL_KEEP, GL_INCR);
    for (int i = 0; i < triangles.size(); ++i)
        if (triangles[i]->visible)
            for (int j = 0; j < 3; ++j)
            {
                Triangle *k = triangles[i]->neigh[j];
                if ((k == NULL) || (!k->visible))
                {
                    // here we have an edge, we must draw a polygon
                    p1 = triangles[i]->p[j];
                    p2 = triangles[i]->p[(j+1)%3];

                    //calculate the length of the vector
                    v1.x = (p1.x - wlp[0])*100;
                    v1.y = (p1.y - wlp[1])*100;
                    v1.z = (p1.z - wlp[2])*100;

                    v2.x = (p2.x - wlp[0])*100;
                    v2.y = (p2.y - wlp[1])*100;
                    v2.z = (p2.z - wlp[2])*100;

                    //draw the polygon
                    glBegin(GL_TRIANGLE_STRIP); 
                        glVertex3f(p1.x, p1.y, p1.z);
                        glVertex3f(p1.x + v1.x, p1.y + v1.y, p1.z + v1.z);
                        glVertex3f(p2.x, p2.y, p2.z);
                        glVertex3f(p2.x + v2.x, p2.y + v2.y, p2.z + v2.z);
                    glEnd();
                }
            }

    // second pass, stencil operation increases stencil value
    glFrontFace(GL_CW);
    glStencilOp(GL_KEEP, GL_KEEP, GL_DECR);
    for (int i = 0; i < triangles.size(); ++i)
        if (triangles[i]->visible)
            for (int j = 0; j < 3; ++j)
            {
                Triangle *k = triangles[i]->neigh[j];
                if ((k == NULL) || (!k->visible))
                {
                    // here we have an edge, we must draw a polygon
                    p1 = triangles[i]->p[j];
                    p2 = triangles[i]->p[(j+1)%3];

                    //calculate the length of the vector
                    v1.x = (p1.x - wlp[0])*100;
                    v1.y = (p1.y - wlp[1])*100;
                    v1.z = (p1.z - wlp[2])*100;

                    v2.x = (p2.x - wlp[0])*100;
                    v2.y = (p2.y - wlp[1])*100;
                    v2.z = (p2.z - wlp[2])*100;

                    //draw the polygon
                    glBegin(GL_TRIANGLE_STRIP);
                        glVertex3f(p1.x, p1.y, p1.z);
                        glVertex3f(p1.x + v1.x, p1.y + v1.y, p1.z + v1.z);
                        glVertex3f(p2.x, p2.y, p2.z);
                        glVertex3f(p2.x + v2.x, p2.y + v2.y, p2.z + v2.z);
                    glEnd();
                }
            }

    glFrontFace(GL_CCW);
    glColorMask(1, 1, 1, 1);

    //draw a shadowing rectangle covering the entire screen
    glColor4f(0.0f, 0.0f, 0.0f, 0.4f);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glStencilFunc(GL_NOTEQUAL, 0, 0xffffffff);
    glStencilOp(GL_KEEP, GL_KEEP, GL_KEEP);
    glPushMatrix();
    glLoadIdentity();
    glBegin(GL_TRIANGLE_STRIP);
        glVertex3f(-1, 1,-1);
        glVertex3f(-1,-1,-1);
        glVertex3f( 1, 1,-1);
        glVertex3f( 1,-1,-1);
    glEnd();
    glPopMatrix();
    glDisable(GL_BLEND);

    glDepthFunc(GL_LEQUAL);
    glDepthMask(GL_TRUE);
    glEnable(GL_LIGHTING);
    glDisable(GL_STENCIL_TEST);
    glShadeModel(GL_SMOOTH);
    glPopMatrix(); 
```

这是我的初始化：

```
glEnable(GL_DEPTH_TEST);    // Enable depth Buffering 
glEnable(GL_COLOR_MATERIAL);    // Enable color tracking
glEnable(GL_NORMALIZE); // Enables vector normalization (optional)
glClearColor( 0.4f, 0.4f, 0.8f, 1.0f );     // Set initial value of color buffer (Set background color also)
glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);  // Really Nice Perspective Calculations
glDepthFunc(GL_LEQUAL); 

// Lighting initialization
glEnable(GL_TEXTURE_2D);
glShadeModel(GL_SMOOTH);
glEnable(GL_LIGHTING);
glLightfv(GL_LIGHT1, GL_POSITION , light.position); //Set position.
glLightfv(GL_LIGHT1, GL_AMBIENT , light.ambient);   //Set ambient light.
glLightfv(GL_LIGHT1, GL_DIFFUSE , light.diffuse);   //Set diffuse component.
glLightfv(GL_LIGHT1, GL_SPECULAR , light.specular); //Set specular component.
glEnable(GL_LIGHT1);

glMaterialfv(GL_FRONT, GL_AMBIENT, mat.ambient);            // Set Material Ambience
glMaterialfv(GL_FRONT, GL_DIFFUSE, mat.diffuse);            // Set Material Diffuse
glMaterialfv(GL_FRONT, GL_SPECULAR, mat.specular);      // Set Material Specular

glCullFace(GL_BACK);                                // Set Culling Face To Back Face
glEnable(GL_CULL_FACE);                             // Enable Culling
glClearColor(0.1f, 1.0f, 0.5f, 1.0f);               // Set Clear Color (Greenish Color)

// Initialize camera
glMatrixMode(GL_PROJECTION);    // Switch  to projection matrix
glLoadIdentity();   // Clear current matrix to identity matrix
gluPerspective(80, 1 , 0.5 , 1000000);  // Set projection of camera (You can modify the arguments if needed.)

glMatrixMode(GL_MODELVIEW); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:51:48.813

确保`mode`您传递给[`glutInitDisplayMode()`](http://www.opengl.org/documentation/specs/glut/spec3/node12.html)包含`GLUT_STENCIL`，否则您可能无法获得模板缓冲区。

# c - UNIX 读取行为

> ID：14327953
> 
> 赞同：2
> 
> 时间：2013-01-14T22:29:55.827
> 
> 标签：c, linux, unix

我编写了这个小代码来确定读取行为。 

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <limits.h>
#include <errno.h>

int main ()
{
  ssize_t ret;
  int fd;
  char str[30] = {0};
  off_t lret

  fd = open("./sample", O_RDWR);
  printf("File descriptor = %d\n",fd);

  lret = lseek(fd,LONG_MAX,SEEK_SET);
  printf("%ld\n",lseek(fd, 0, SEEK_CUR));

  ret = read(fd, str, 20);
  if (ret == -1) {
     perror("read error");
  }
  else {
     printf("%ld\n",ret);
     printf("%s\n",str);
  }

  ret = write(fd, "bye", 3);
  if (ret == -1) {
     perror("write error");
  }
  else
     printf("%ld\n",ret);

  printf("%ld\n",lseek(fd, 0, SEEK_CUR));
  close (fd);

  return 0;
} 
```

这是输出：

```
$ cat sample
HELLO$ ./a.out
File descriptor = 3
4294967295
read error: Invalid argument
write error: Invalid argument
4294967295
$ ll sample
-rw-r--r--. 1 bruce stud 5 Jan 14 17:25 sample 
```

但是如果我将 lseek 语句更改为

```
ret = lseek(fd,5,SEEK_SET); 
```

读取返回 0

```
$ ./a.out
File descriptor = 3
5
0

3
8
$ cat sample
HELLObye$ ll sample
-rw-r--r--. 1 bruce stud 8 Jan 14 17:26 sample 
```

为什么 read 会有这样的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:59:41.133

请注意，返回的值`lseek`是 a `off_t`，而不是 a `size_t`。不同之处在于 off_t 是有符号的。当您取一个有符号值并使其无符号时，它看起来像一个很大的正数。

我希望“LONG_MAX”实际上不是`4294967295`，而是`2147483647`(2^31-1) 或更大的数字。所以`4294967295`来自 -1 [它是 2^32-1，这确实与 32 位数学中的 -1 相同]。

换句话说，您从`lseek`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:52:29.937

奇怪的错误结果。您使用的是什么实际操作系统？我`if (ret == -1) perror("lseek error");`在第一次 lseek 之后添加了一个检查，以便更好地检查错误。

在linux上我看到：

```
File descriptor = 3
lseek error: Invalid argument
0
5
HELLO
3
8 
```

在 OpenBSD 上，我看到：

```
File descriptor = 3
9223372036854775807
read error: File too large
write error: File too large
9223372036854775807 
```

...这两个似乎都是合理的反应

# sql - oracle 选择要显示的列

> ID：14327954
> 
> 赞同：0
> 
> 时间：2013-01-14T22:29:58.357
> 
> 标签：sql, oracle

我试图在 ORACLE 中创建一个 SELECT 。我正在从表中选择 3 列，我想做一个测试（另一个选择的结果），如果它是 true，则显示所有列，如果 false 只显示两个。

```
create table t1(a int ,b int , c int) ;
    select a ,  case when (1=1) then (b ,c)
        else (b) end;
from t1 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T01:20:49.737

目前尚不清楚您要做什么。

如果您只对此查询的结果感兴趣，则不能这样做。您不能有一个返回未知数量的列的查询。除非满足您的条件，否则您可以有三列，一列为空，例如：

```
SELECT a, CASE WHEN ( condition ) THEN b ELSE NULL END AS b, c
  FROM t1 
```

如果您的目标是实际创建一个表（但我强烈建议不要像这样创建表），您可以使用DDL 命令`EXECUTE IMMEDIATE string`在哪里：`string`

```
DECLARE
    ddl VARCHAR2(4000); 
BEGIN
    IF (condition) THEN
        ddl := 'CREATE TABLE t1 (a NUMBER, b NUMBER, c NUMBER )';
    ELSE
        ddl := 'CREATE TABLE t1 (a NUMBER, b NUMBER )';
    END IF;

    EXECUTE IMMEDIATE ddl; 
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T03:58:13.187

在您的情况下，带有立即执行的 plsql 是很好的选择。但是，如果您只想要数据，您可以尝试这样，可能会对您有所帮助：

```
SELECT a,
       CASE
         WHEN (condition) THEN
          b
         ELSE
          nvl(b, '') || ';' || nvl(c, '')
       END AS NEW_COL
  FROM t1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T08:13:30.653

即使用 pl/sql 打开一个游标，该游标选择依赖于给定输入的列。

```
declare
  v_select_all_cols boolean := true; --set as applicable.
  v_rc  sys_refcursor; 
begin

  if (v_select_all_cols)
  then
    open v_rc for select a,b,c from t1;
  else
    open v_rc for select a,b from t1;
  end if;
  -- now you can return the resultset v_rc to the caller
end;
/ 
```

例如使用 sqlplus 进行快速测试（我会使用 a`var`来打印光标而不是 pl/sql 变量）

```
SQL> var rc refcursor;
SQL> declare
  2    v_select_all_cols boolean := true; --set as applicable.
  3  begin
  4
  5    if (v_select_all_cols)
  6    then
  7      open :rc  for select a,b,c from t1;
  8    else
  9      open :rc for select a,b from t1;
 10    end if;
 11  end;
 12  /

PL/SQL procedure successfully completed.

SQL> print rc

         A          B          C
---------- ---------- ----------
         1          2          3

SQL> declare
  2    v_select_all_cols boolean := false;
  3  begin
  4
  5    if (v_select_all_cols)
  6    then
  7      open :rc  for select a,b,c from t1;
  8    else
  9      open :rc for select a,b from t1;
 10    end if;
 11  end;
 12  /

PL/SQL procedure successfully completed.

SQL> print rc

         A          B
---------- ----------
         1          2 
```

# c# - 使用 C#，使用 WSSE 纯文本身份验证的 WCF SOAP 消费者？

> ID：14327960
> 
> 赞同：8
> 
> 时间：2013-01-14T22:30:11.273
> 
> 标签：c#, wcf, visual-studio-2012, ws-security, asp.net-4.5

我有一个 WCF SOAP 使用者，它是由 Visual Studio 2012 从 WSDL 实现的。WSDL 由 PeopleTools 生成。基础对象的类型为`System.ServiceModel.ClientBase`。

我需要 SOAP 请求类似于：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://xmlns.oracle.com/Enterprise/Tools/schemas">
    <soapenv:Header>
        <wsse:Security soap:mustUnderstand="1" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
            <wsse:UsernameToken>
                <wsse:Username>[plain text username goes here]</wsse:Username>
                <wsse:Password>[plain text password goes here]</wsse:Password>
            </wsse:UsernameToken>
        </wsse:Security>
    </soapenv:Header>
    <soapenv:Body>
        <sch:InputParameters>
            <Last_Name>Aren</Last_Name>
            <First_Name>Cambre</First_Name>
        </sch:InputParameters>
    </soapenv:Body>
</soapenv:Envelope> 
```

这是我们能得到的最接近的：

```
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing">
    <s:Header>
        <a:Action s:mustUnderstand="1">http://schemas.xmlsoap.org/ws/2005/02/trust/RST/Issue</a:Action>
        <a:MessageID>urn:uuid:3cc3f2ca-c647-466c-b38b-f2423462c837</a:MessageID>
        <a:ReplyTo>
            <a:Address>http://www.w3.org/2005/08/addressing/anonymous</a:Address>
        </a:ReplyTo>
        <a:To s:mustUnderstand="1">http://[internal URL to soap listener]</a:To>
    </s:Header>
    <s:Body>
        <t:RequestSecurityToken Context="uuid-7db82975-2b22-4236-94a1-b3344a0bf04d-1" xmlns:t="http://schemas.xmlsoap.org/ws/2005/02/trust">
            <t:TokenType>http://schemas.xmlsoap.org/ws/2005/02/sc/sct</t:TokenType>
            <t:RequestType>http://schemas.xmlsoap.org/ws/2005/02/trust/Issue</t:RequestType>
            <t:KeySize>256</t:KeySize>
            <t:BinaryExchange ValueType=" http://schemas.xmlsoap.org/ws/2005/02/trust/tlsnego" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">FgMBAFoBAABWAwFQ9IhUFGUO6tCH+0baQ0n/3us//MMXzQA78Udm4xFj5gAAGAAvADUABQAKwBPAFMAJwAoAMgA4ABMABAEAABX/AQABAAAKAAYABAAXABgACwACAQA=</t:BinaryExchange>
        </t:RequestSecurityToken>
    </s:Body>
</s:Envelope> 
```

你会注意到两个问题：

*   没有明文 WSSE 凭据。传递服务不会使用的凭据的二进制形式。
*   身份验证在`Body`，不是`Header`。
*   请求省略`InputParameters`。

这是基本的 C# 代码：

```
var service = new ServiceWithBizarreNameFromPeoplesoft();

if (service.ClientCredentials == null)
   throw new NullReferenceException();
service.ClientCredentials.UserName.UserName = "test";
service.ClientCredentials.UserName.Password = "password";

var binding = new WSHttpBinding(SecurityMode.TransportWithMessageCredential) {Security = new WSHttpSecurity()};
service.Endpoint.Binding = binding;

binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;
binding.Security.Message.ClientCredentialType = MessageCredentialType.UserName;
binding.Security.Mode = SecurityMode.Message;

var input = new InputParameters { Last_Name = "Cambre", First_Name = "Aren" };

var returnData = service.BizarrePeopleSoftNameForMethod(input); 
```

没有 HTTP 层安全性，传输是 SSL 加密的。身份验证仅基于 SOAP 消息。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T09:37:56.377

那是对 WS-SecureConversation 令牌的请求。默认情况下使用它`WSHttpSecurity`，除非您将其`EstablishSecurityContext`属性更改为`false`. 请改用此绑定：

```
var binding = new BasicHttpBinding(BasicHttpSecurityMode.TransportWithMessageCredential);    
binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;
binding.Security.Message.ClientCredentialType = BasicHttpMessageCredentialType.UserName; 
```

它将使用带有 UserName 令牌的 SOAP 1.1，并且需要 HTTPS 传输。

**编辑：**

对于没有 HTTPS 的测试，请尝试使用此自定义绑定：

```
var securityElement = SecurityBindingElement.CreateUserNameOverTransportBindingElement();
securityElement.AllowInsecureTransport = true;

var encodingElement = new TextMessageEncodingBindingElement(MessageVersion.Soap11, Encoding.UTF8);
var transportElement = new HttpTransportBindingElement();

var binding = new CustomBinding(securityElement, encodingElement, transportElement); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T04:02:59.410

在我看来，这就像使用基本用户名密码身份验证的具有传输安全性的 wsHttpBindings。

这些行在我看来是错误的：

```
binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;
binding.Security.Message.ClientCredentialType = MessageCredentialType.UserName;
binding.Security.Mode = SecurityMode.Message; 
```

这是我希望在您的应用程序或 web.config 中看到此配置的方式

```
<bindings>
  <wsHttpBinding>
    <binding name="ws" >
      <security mode="Transport">
        <transport clientCredentialType="Basic" proxyCredentialType="Basic" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings>

<client>
  <endpoint address="http://www.bla.com/webservice" binding="basicHttpBinding" contract="bla.IService" name="ws" />
</client> 
```

然后代码将如下所示：

```
var service = new GeneratedProxyClient("basic");
service.ClientCredentials.UserName.UserName = "test";
service.ClientCredentials.UserName.Password = "password";
var input = new InputParameters { Last_Name = "Cambre", First_Name = "Aren" };
var returnData = service.BizarrePeopleSoftNameForMethod(input); 
```

在这里可能会更好地解释-> [http://msdn.microsoft.com/en-us/library/ms733775.aspx](http://msdn.microsoft.com/en-us/library/ms733775.aspx)

# ruby-on-rails - 将 footer-html 参数添加到 PDFKit (wkhtmltopdf) 时出现管道损坏错误

> ID：14327961
> 
> 赞同：2
> 
> 时间：2013-01-14T22:30:12.183
> 
> 标签：ruby-on-rails, ruby, heroku, pdfkit

我正在尝试使用以下代码为我在 RoR 3.2.11 中使用 PDFKit 创建的 PDF 添加页脚：

```
template = File.read "#{Rails.root}/app/views/layouts/portfolio.haml"
@ci = self
pdf_html = Haml::Engine.new(template).render self

template_footer = File.read "#{Rails.root}/app/views/layouts/portfolio_footer.haml"
@ci = self
pdf_footer_html = Haml::Engine.new(template_footer).render self

pdfkit_instance = PDFKit.new(pdf_html, :orientation => 'Landscape', 'footer-html' => pdf_footer_html)

send_data(pdf.to_pdf, :filename => "generated.pdf", :type => 'application/pdf') 
```

不幸的是，这导致了“Broken Pipe”错误：

```
pdfkit (0.5.2) lib/pdfkit/pdfkit.rb:65:in `write'
pdfkit (0.5.2) lib/pdfkit/pdfkit.rb:65:in `puts'
pdfkit (0.5.2) lib/pdfkit/pdfkit.rb:65:in `block in to_pdf'
pdfkit (0.5.2) lib/pdfkit/pdfkit.rb:64:in `popen'
pdfkit (0.5.2) lib/pdfkit/pdfkit.rb:64:in `to_pdf'
app/controllers/admin/collection_items_controller.rb:9:in `test_generate_pdf' 
```

当我生成没有页脚的 PDF 时，它是成功的。如果我使用页脚 html 作为主要的 html 源，它也会成功。使用像“footer-right”这样的纯文本选项之一也可以，但显然我想使用 html 选项。这种行为在本地和部署到 Heroku 时都是一致的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T21:27:15.697

试试这条线

```
pdfkit_instance = PDFKit.new(pdf_html, :orientation => 'Landscape', :footer_html => pdf_footer_html) 
```

# php - 将用户数据存储在 $_SESSION 中与重复的数据库访问

> ID：14327968
> 
> 赞同：2
> 
> 时间：2013-01-14T22:30:47.200
> 
> 标签：php, mysql, session

在后续的页面请求中将需要从（MySQL）数据库读取的某些用户数据，例如用户名或某些首选项。

将此数据存储在 $_SESSION 变量中以节省数据库查找是否有益？

我们正在谈论（可能）很多用户。我想存储在 $_SESSION 中会增加 RAM 的使用（非常少量乘以非常多的用户），同时在每个页面请求相同数据时一次又一次地访问数据库应该会增加磁盘活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:40:35.903

您的问题具有讽刺意味的是，对于大多数系统，一旦您获得大量用户，您需要找到一种方法让您的会话脱离默认的磁盘存储并进入单独的持久层（即数据库，在-内存缓存等）。这是因为在某些时候您需要多个应用程序服务器，而且不必维护应用程序服务器本身的状态通常要容易得多。

许多大型系统使用内存缓存（memcached 或类似的）来进行会话持久性，因为它可以为多个前端服务器提供一个通用的持久层，并且不需要长时间的持久性（磁盘存储）。数据。

设计良好的数据库表或其他基于磁盘的键值存储也可以成功使用，尽管它们的性能可能不如内存存储。但是，根据您希望使用每个会话密钥存储多少数据（在 RAM 中保存大量数据通常比在磁盘上存储更昂贵），它们的运行成本可能会更低。

了解会话数据的大小（平均大小和最大大小）、您希望支持的并发会话数以及需要访问会话数据的频率对于帮助您确定最适合您的解决方案非常重要情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T00:49:10.207

使用会话有一个主要缺点：如果用户都尝试启动会话以访问数据，则您无法为用户提供并发请求。这是因为 PHP 会在脚本启动会话后锁定会话，以防止数据被另一个脚本覆盖。使用会话数据时的通常想法是，在您调用 之后`session_start()`，数据可用，`$_SESSION`并且在脚本结束后将被写回存储。在此之前，您可以随意地对会话数组进行读写操作。PHP 确保这不会通过锁定数据来破坏或覆盖数据。

如果您想创建一个对服务器进行大量 Ajax 调用的 Web2.0 站点，锁定会话会降低性能，因为需要会话的每个请求都将连续执行。如果可以避免使用会话，将有利于用户感知性能。

有一些技巧可以解决这个问题：

1.  您可以尝试通过调用来尽快释放锁`session_write_close()`，但是您必须处理在此调用之后无法写入会话的问题。
2.  如果您知道某些脚本调用只会从会话中读取，您可能会尝试实现只读取会话数据而不调用的代码`session_start()`，并完全避免锁定。
3.  如果 I/O 有问题，使用 Memcache 服务器进行存储可能会提高性能，但不会帮助您解决锁定问题。
4.  请注意，数据库对于它存储在任何表中的所有数据也存在此锁定问题。如果您的数据库存储引擎选择不明智（例如 MyISAM 而不是 InnoDB），您将失去更多的性能，而不是避免会话可能获得的性能。

如果您现在根本没有任何性能问题，那么所有这些讨论都是没有意义的。做最符合您意图的事情。无论您以后会遇到什么性能问题，我们今天都无法知道，而试图避免它们将是过早的优化（这是邪恶的根源）。

不过，请始终遵守优化的第一条规则：测量它，看看是否有更改改进它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T22:36:12.020

您可以在 PHP 中为会话数据使用多个存储后端。默认情况下，它保存到文件中。一个文件一个会话。您还可以通过实现自己的[会话保存处理程序将数据库用作会话后端或任何您不想要的东西](http://php.net/manual/de/function.session-set-save-handler.php)

如果您希望您的应用程序最具可扩展性，我**不会**在文件系统上使用会话。想象一下，您有一个包含多个 Web 服务器的设置，所有这些服务器都将您的站点作为一个场来提供服务。在文件系统上使用会话时，用户必须为每个请求重定向到同一服务器，因为会话数据仅在该服务器文件系统上可用。如果您不在文件系统上使用会话，则用于请求的服务器无关紧要。这使得负载平衡更容易。

我建议不要在文件系统上使用会话

*   使用 cookie
*   跨多个请求使用请求变量

或（如果数据对安全至关重要）

*   使用带有数据库保存处理程序的会话。因此，从数据库（或集群）读取数据的每个网络服务器都可以使用数据。

# php - include_once 'PEAR.php' 抛出“连接已重置”

> ID：14327969
> 
> 赞同：1
> 
> 时间：2013-01-14T22:30:49.073
> 
> 标签：php, pear

这是包中的标准代码

```
@include_once 'PEAR.php';
if (!class_exists('PEAR_Error')) {
    include_once 'FileMaker/PEAR.php';
} 
```

在这条线上`include_once 'PEAR.php';`服务器失败并抛出

> 连接已重置 在页面加载时，与服务器的连接已重置。该站点可能暂时不可用或太忙。请稍后再试。如果您无法加载任何页面，请检查您计算机的网络连接。如果您的计算机或网络受到防火墙或代理的保护，请确保允许 Firefox 访问 Web。

出了什么问题，如何解决？我不能只评论这一行，还有很多这样的插入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:54:53.830

我认为这是 php 错误。因此，如果我`$obj =& new Obj`有时使用它会导致一些无法解释的错误。因此，如果您使用旧软件包，我建议您使用较新的版本更新它们或自行修复它们`&`

# ruby - 为什么我们定义 `#initialize` 而不是 `::new`

> ID：14327971
> 
> 赞同：6
> 
> 时间：2013-01-14T22:30:50.543
> 
> 标签：ruby, design-patterns

在 Ruby 中，当创建一个新类时，我们将这样定义构造方法：

```
class Thing
  def initialize
     do_stuff
  end
end 
```

但是，当实际创建对象的实例时，我们发现自己不是`initialize`在调用实例，而是`new`在调用类。

既然如此，我们为什么不改为定义`::new`呢？

```
class Thing
   def self.new
     do_stuff
   end
end 
```

`::new`场景中是否有一些`initalize`没有定义的东西？这两者有什么不同吗？定义会`::new`起作用吗？还是只是`def initialize`比 短（不）`def self.new`？

我认为这种差异必须有充分的理由。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T22:39:08.060

New 为新对象分配空间并创建它。然后它调用 Objects 的初始化方法来使用分配的内存创建一个新的 Object。通常，您想要自定义的唯一部分是实际创建，并且乐于将内存分配留给 Object.new 方法，因此您编写了一个初始化方法。引擎盖下的新功能看起来像这样（C 语言除外）：

```
 class Object
    def self.new(*args, &block)
        object = allocate
        object.send(:initialize, *args, &block)
        return object
    end
 end 
```

所以当你调用 Object.new 时，实际发生的是：

1) 分配内存 2) 调用对象初始化方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T23:26:02.840

提供对实例变量的访问。

实例变量，例如`@value`，只能从实例访问，但不能从类方法中访问。这与 Java 等语言不同，其中私有实例变量具有类而不是实例范围，因此可以从静态构造函数访问。

```
class Thing
  def initialize
     @value = 42
  end
end

class Thing
  def self.new
    # no way to set the value of @value !!!!!!!!
  end
end 
```

对于那些对 Ruby 的历史感兴趣的人，带有实例私有实例变量的对象模型可以追溯到 Smalltalk。您会在现代 Smalltalk 方言中发现相同的模式，例如[Pharo](http://www.pharo-project.org)，`new`被实现`Object`为调用`self initialize`，以便子类可以轻松地初始化实例变量。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T23:12:39.103

*   详细说明亚伯拉罕的观点，实际上就是颠倒了包裹关系。如果你有`allocate`一个原始的并且通常是定义的`new`，那么你总是必须做一些常见的事情，比如`allocate`最后调用和返回对象，这是一件多余的事情。通过拥有`new`and `initialize`，前者将包装后者，因此您只需要定义包装的内容，而不是包装器。
*   `new`是一个类方法，所以当你定义它时，默认情况下你没有访问实例方法和实例变量的权限，你需要依赖访问器。另一方面，`initialize`它是一个实例方法，因此使用实例变量和实例方法会更容易。

# c++ - c++ DMS 在带有铂库的 LG 智能电视上支持字幕

> ID：14327977
> 
> 赞同：0
> 
> 时间：2013-01-14T22:31:26.047
> 
> 标签：c++, subtitle, dlna, smart-tv

我正在尝试实现一个简单的 DMS，它可以使用铂库向 DMR -LG SmartTV 提供字幕信息。

我已经成功地在 DMR 上渲染了视频，并且我已经找到了 DMR 接收与视频文件相关联的字幕信息的位置。

来自 DMR 的样本请求：

```
 POST /upnp/services/ContentDirectory/control HTTP/1.1
HOST: 192.168.1.3:54444
CONTENT-LENGTH: 735
CONTENT-TYPE: text/xml; charset="utf-8"
SOAPACTION: "urn:schemas-upnp-org:service:ContentDirectory:1#Browse"
USER-AGENT: Linux/2.6.39.4.ps-110224-lg1152 UPnP/1.0 DLNADOC/1.50 INTEL_NMPR/2.0 LGE_DLNA_SDK/1.6.0

<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"
s:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
  <s:Body>
    <u:Browse xmlns:u="urn:schemas-upnp-org:service:ContentDirectory:1">
      <ObjectID>ea06</ObjectID>
      <BrowseFlag>BrowseDirectChildren</BrowseFlag>
      <Filter>@id,@parentID,@restricted,@childCount,dc:title,dc:creator,upnp:artist,upnp:class,dc:date,upnp:album,upnp:genre,res,res@size,res@duration,res@protection,res@bitrate,res@resolution,res@protocolInfo,res@nrAudioChannels,res@sampleFrequency,upnp:albumArtURI,upnp:albumArtURI@dlna:profileID, res@dlna:cleartextSize</Filter>
      <StartingIndex>0</StartingIndex>
      <RequestedCount>24</RequestedCount>
      <SortCriteria></SortCriteria>
    </u:Browse>
  </s:Body>
</s:Envelope> 
```

现在来自支持字幕显示的有效 DMS 的响应是：

```
HTTP/1.1 200 OK
SERVER: WINDOWS/5.1 UPnP/1.0 DLNADOC/1.50 Nero-MediaHome/4.5.20.145
CONTENT-TYPE: text/xml; charset=utf-8
EXT:
DATE: Mon, 14 Jan 2013 22:12:35 GMT
TRANSFER-ENCODING: chunked
CONNECTION: Keep-Alive
...
          <item id="ea13" parentID="ea06" restricted="1">
            <dc:date>2012-10-25</dc:date>
            <dc:title>video.avi</dc:title>
            <upnp:album>Filmes</upnp:album>
            <upnp:class>object.item.videoItem.movie</upnp:class>
            <res 
              bitrate="257570" duration="1:37:32" nrAudioChannels="6" 
              protocolInfo="http-get:*:video/avi:DLNA.ORG_OP=01;DLNA.ORG_CI=0;DLNA.ORG_FLAGS=01700000000000000000000000000000" 
              resolution="720x304" sampleFrequency="48000" size="1507196928">http://192.168.1.3:54444/server/80402875-CA74-4CCE-B7E0-D81CEF1913A2/D5E59F25/ea13?unknown-id</res>
            <res protocolInfo="http-get:*:text/srt:*">http://192.168.1.3:54444/server/80402875-CA74-4CCE-B7E0-D81CEF1913A2/3A2C7131/ea13?sub=video.srt</res>
          </item> 
```

现在我正在尝试在我的自定义 DMS 中实现相同的功能，任何人都可以指出我正确的方向或显示任何实现存储在 res 元素中的字幕信息的示例：srt_URL（响应的内容类型是 text/srt）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:34:28.957

要将 SRT 资源标签添加到 Platinum 中的 UPnP 项目，您至少应该执行以下操作。我不声称该列表是功能性的、完整的或经过测试的。这只是我对需要更改的最佳猜测。如果它不能立即按预期工作，我可能无法更具体地为您提供帮助。*这是导航提示，而不是驾驶辅助*。

*   将您的 SRT 文件与媒体文件放在同一个文件夹中，以某种合理的方式命名相同的名称，以便您以后轻松区分。
*   在**PltMimeType.cpp**添加`"srt","text/srt"`到`PLT_HttpFileRequestHandler_DefaultFileTypeMap`. Platinum 不知道开箱即用的 SRT。
*   **PltFileMediaServer.cpp**有点笨，默认情况下它会显示在目录中找到的所有文件。毕竟，这是一个例子。您需要通过实施`PltFileMediaServer::ProcessFile`过滤器从可见列表中过滤掉 SRT。
*   仍然在**PltFileMediaServer.cpp**中有一个方法`PLT_FileMediaServerDelegate::BuildFromFilePath`。这`filepath`是您的媒体文件的路径（仅此而已）。在文件路径之外，您需要在文件夹中查看是否有正确命名的字幕文件（使用一些`NPT_File`方法，查找它）。
*   如果有，您必须`PLT_MediaItemResource`在`PLT_MediaObject* object`. 已经有一个`resource`实例，但它专门用于媒体资源本身。不要重复使用它。您需要添加另一个，而 IMO 您只需设置`resource.m_Uri`（使用 BuildResourceUri）和`resource.m_ProtocolInfo`.
*   对于`m_ProtocolInfo`，您需要`PLT_ProtocolInfo::GetProtocolInfo`使用参数调用，`false`以便`protocolInfo`您新添加`<res>`的 DLNA 配置文件 ID 不会被破坏。

# c# - 使用 shellExecute 运行 c# 控制台应用程序

> ID：14327981
> 
> 赞同：0
> 
> 时间：2013-01-14T22:31:32.837
> 
> 标签：c#, c++, .net, visual-studio-2010, console-application

我有 c# 控制台应用程序（Net framework 4.5，visual studio 2010 express）。我可以使用 cmd 运行这个应用程序，它的工作正常。但是出于一些非常重要的原因，我需要从其他使用 c++ 编写的应用程序运行此应用程序。我曾尝试使用 ShellExecute、CreateProcess、WinExec 运行 c# 应用程序。它总是崩溃，并且不会在我之前使用 cmd 启动它的同一台机器上运行。是否还有任何方法可以启动这个 c# 应用程序。或者我需要用一些特殊的方式编译/组装这个 c# 应用程序吗？更新示例：

方法一

```
SHELLEXECUTEINFO ShExecInfo = {0};  
ShExecInfo.cbSize = sizeof(SHELLEXECUTEINFO);   
ShExecInfo.fMask = SEE_MASK_NOCLOSEPROCESS;  
ShExecInfo.hwnd = NULL;  
ShExecInfo.lpVerb = NULL;  
ShExecInfo.lpFile = "C:\\PATH\\To\\THE\\APP.exe";  
ShExecInfo.lpParameters = szParameters;  
ShExecInfo.lpDirectory = NULL;  
ShExecInfoFlash.hInstApp = NULL;  
ShellExecuteEx(&ShExecInfoFlash);  
WaitForSingleObject(ShExecInfoFlash.hProcess,INFINITE); 
```

方法二

```
PROCESS_INFORMATION pi; 
char bff[512]; 
memset(&si,0,sizeof(si)); 
si.cb=sizeof(si); 
if(!CreateProcess(NULL,szParameters,NULL,NULL,0,0,NULL,NULL,&si,&pi)) 
{ return TS_METHOD_ABORTED;} 
WaitForSingleObject(pi.hProcess,INFINITE); 
CloseHandle(pi.hProcess); 
CloseHandle(pi.hThread); 
```

它总是以同样的方式崩溃。它告诉我发生了意外并建议我向 MS 发送报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:41:45.187

我很久没有在 C++ 中做你想做的事情了，但我最近在 C# 中做了。我知道这是一半的答案，所以提前抱歉。c++（或任何其他方法）中的 ShellExecute 是否使您能够设置正在启动的程序的工作目录？我发现有时候不设置这个，启动的程序会认为它在系统文件夹中运行，结果可能因为相对路径错误而无法加载资源。

希望能帮助到你。

编辑：

看来[ShellExecute](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)确实有你要找的东西。

现在发布了一个示例，从上面：

```
SHELLEXECUTEINFO ShExecInfo = {0};  
ShExecInfo.cbSize = sizeof(SHELLEXECUTEINFO);   
ShExecInfo.fMask = SEE_MASK_NOCLOSEPROCESS;  
ShExecInfo.hwnd = NULL;  
ShExecInfo.lpVerb = NULL;  
ShExecInfo.lpFile = "C:\\PATH\\To\\THE\\APP.exe";  
ShExecInfo.lpParameters = szParameters;  
ShExecInfo.lpDirectory = NULL;  
ShExecInfoFlash.hInstApp = NULL;  
ShellExecuteEx(&ShExecInfoFlash);  
WaitForSingleObject(ShExecInfoFlash.hProcess,INFINITE); 
```

首先，我建议尝试启动另一个您知道应该可以运行的程序，例如 notepad.exe。

接下来，就像我最初所说的那样，将工作目录设置为与 exe 匹配。

```
ShExecInfo.lpFile = "C:\\PATH\\To\\THE\\APP.exe";  
ShExecInfo.lpParameters = szParameters;  
ShExecInfo.lpDirectory = "C:\\PATH\\To\\THE"; 
```

# php - 网络摄像头+音频向多个用户广播，无需使用 WebRTC，中间使用 PHP 的服务器

> ID：14327983
> 
> 赞同：2
> 
> 时间：2013-01-14T22:31:34.207
> 
> 标签：php, webrtc

由于 webrtc 对一个人可以广播网络摄像头的用户数量有限制（由于用户的频带限制），我正在寻找一种解决方案，在 webRTC 中将直接广播到服务器。

服务器将接受 webrtc 连接，并让 webRTC 数据流到服务器。

当通过 websockets 对网络摄像头发出请求时，服务器只会传递从 webRCT 连接获得的数据，最好使用 php

问题：

a) PHP 是否可以接受 webRTC 调用，并让数据流式传输到服务器？

b) 是否可以显示来自服务器的网络摄像头+音频数据，通过 HTML5 中的 websockets(php) 发送？

c) 你能否指出我会在哪里看到一个接受 webRTC 调用的 php 示例，并让它流式传输到服务器

d) 是否很难通过从 websocket 接收的视频标签或画布显示数据？

甚至更好 使用 websockets 直接通过服务器流式传输网络摄像头 通过 html5 播放 websocket 数据

也许我应该改写整个问题：

我在这里有一个录音示例： [http ://www.smartjava.org/content/record-audio-using-webrtc-chrome-and-speech-recognition-websockets](http://www.smartjava.org/content/record-audio-using-webrtc-chrome-and-speech-recognition-websockets)

这也可以用来录制网络摄像头吗？（并通过画布或视频将其流回给用户）

# c# - 使用 if/then/else 翻转布尔值还是否定更好？

> ID：14327984
> 
> 赞同：1
> 
> 时间：2013-01-14T22:31:35.703
> 
> 标签：c#, compiler-construction, boolean

我可以像使用 if/then/else 一样有效地使用一个语句切换布尔值吗？

在进入我的应用程序的另一段代码中找到了这个......

```
 private void whatever()
    {
        ////
        //// a bunch of stuff
        ////

        if (SomeBooleanValue)
        {
            SomeBooleanValue= false;
        }
        else
        {
            SomeBooleanValue = true;
        }
    } 
```

出于好奇，我尝试了这个...

```
 private void whatever_whatever()
    {
        //// 
        //// the same stuff
        //// 

        SomeBooleanValue = !SomeBooleanValue;
    } 
```

...并在调试中遍历它，*看来*我得到了相同的结果。

是否有充分的理由使用 if/then/else 而不是单行方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T22:34:12.483

> 是否有充分的理由使用 if/then/else 而不是单行方式

没有我能想到的。对于大多数程序员来说，使用`!`运算符更简洁、更直观。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T22:35:04.640

1 行方式非常好，您使用该结构的唯一原因`if/ else`是除了切换布尔值之外，您还在做其他事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T22:33:47.510

我会说第二个更好，因为它更具可读性和紧凑性（if/then/else IMO 只是添加了不必要的代码行），这将是唯一（但很强大！）理由更喜欢另一个

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-14T22:39:04.123

由于编译器优化，它将与使用 ! 运算符，对于其他程序员来说更容易阅读。

然而，

为了提高性能，CPU 会尝试提前预测执行逻辑。对于条件（if/else）语句，它将尝试预测条件的结果，然后加载其余的逻辑。如果选择不正确，则必须返回并重新计算所有内容，从而降低性能。

[http://en.wikipedia.org/wiki/Branch_predictor](http://en.wikipedia.org/wiki/Branch_predictor)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-31T01:22:18.033

请，请，请把代码写成否定；它是最简洁明了的意图表达。如果您以第一种方式编写代码，您的代码的每个读者都会浪费时间想知道您为什么不编写简单的否定。

大多数代码会被你和其他人阅读，比它写的次数要多得多。编写简化阅读过程的代码，几乎按照定义，就是好代码。

# algorithm - 将具有浮点顶点的段映射到二维整数空间（伪像素）的算法

> ID：14327985
> 
> 赞同：0
> 
> 时间：2013-01-14T22:31:39.513
> 
> 标签：algorithm, graphics, floating-point, rendering

我想在任何线段方向/长度的最短平均时间内将线段渲染到虚拟整数空间。该段由具有实数值（双精度值）的两个点定义。

我已经提出了几个可能可行的想法，但它们给我的印象是可怕的、启发式的黑客攻击。（即有一个明确的“更好的方向”开始，取决于段的方向）。

当然有比蛮力方法更好的方法（找到端点之间的“长”方向（x 或 y 轴），然后沿着该轴沿着每个整数值步进，并在正交轴上舍入该值以准确确定沿“长”轴的每个整数值的一个像素（整数点）位置。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:31:10.910

你所说的“更好的方向”让我想起了 Bresenham 线算法，这可能是你想要的吗？ [http://www.cs.helsinki.fi/group/goa/mallinnus/lines/bresenh.html](http://www.cs.helsinki.fi/group/goa/mallinnus/lines/bresenh.html)

[编辑]

与非整数端点的区别对我来说并不明显，但这里有一个[说明](http://www.antigrain.com/doc/introduction/introduction.agdoc.html#SUBPIXEL_BRESENHAM)。

当您在长轴上每个整数跨度绘制一个像素时，我假设您的绘图点具有相同的强度（无抗锯齿）。

所以你可以在没有整数优化（你已经做过的）和最后的圆点的情况下实现 bresenham。或通过整数 bresenham 使用定点数学（即，将坐标乘以 65536 并舍入，在长轴上以更长的步长运行 bresenham，然后在绘制之前将输出点除或移回所需的值）。

但取决于您是绘制字体、镶嵌曲线还是线框矩形，使用直 bresenhams 或使用抗锯齿算法可能看起来更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:15:50.257

您应该找到与 X 和 Y 值相关的直线方程。然后在每个整数 x 坐标处对其进行评估。这将为您提供 y 坐标作为浮点数，然后您可以对其进行四舍五入并绘制。

# android - 从标题按钮更新列表视图项

> ID：14327987
> 
> 赞同：0
> 
> 时间：2013-01-14T22:31:47.857
> 
> 标签：android, android-listview

我有一个要求，从位于视图标题部分的按钮切换列表视图项的图像。

所以我有一个使用自定义 BaseAdapter 的列表视图，适配器非常基本，每个项目都有一个 ImageView 和一个 TextView。

标题部分将有 2 个按钮，每个按钮都有一个与之关联的包。例如。

按钮 A 将具有`PACKAGE {A=Product 1, C=Product 3, G=Product 7}`
按钮 B 将具有`PACKAGE {B=Product 2, D=Product 4, G=Product 7}`

Listview 项目将具有以下项目以及图像。

```
{A=Product 1, B=Product 2, 
C=Product 3, D=Product 4, 
E=Product 5, F=Product 6, G=Product 7} 
```

模拟列表视图

```
image green - A Product 1 
image green - B Product 2
image green - C Product 3
image green - D Product 4
image green - E Product 5
image green - F Product 6 
image green - G Product 7 
```

如果用户选择按钮“A”，则列表视图项目的图像应仅针对按钮“A”包列表中的项目从红色变为绿色。所以对于这个例子，只有列表视图项 A、C 和 G 将其图像项更改为绿色。

如何在不让用户实际单击列表视图项目的情况下更新列表视图项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:48:43.203

我想你已经`OnClickListener`为你的 2 个按钮实现了。

现在，当单击一个按钮时，您可以保存在全局变量中单击的按钮类型。

之后对你调用 notifyDataChanged() `Adapter`。

当 notifyDataChanged() 被调用时`getView(int position, View convertView, ViewGroup parent)`，你的`Adapter`被调用。

为 ListView 中的每个可见项调用 getView 方法。现在在 getView 方法中，您只需切换图像是单击按钮 A 还是单击按钮 B。

有关如何自定义您的示例，请`Adapter`查看`ListView`这篇文章：[http ://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

# iphone - 按钮中的图像视图不出现

> ID：14327988
> 
> 赞同：0
> 
> 时间：2013-01-14T22:31:52.833
> 
> 标签：iphone, ios, objective-c, uibutton

我正在尝试使用 a 的图像视图的背景视图，`UIButton`但由于某种原因它不会显示。这是我尝试过的：

```
detailCell.greenPriorityButton.imageView.frame = detailCell.greenPriorityButton.frame;
[detailCell.greenPriorityButton.imageView setBackgroundColor:[UIColor greenColor]];
[detailCell.greenPriorityButton.imageView setHidden:NO];
[detailCell.greenPriorityButton.imageView setOpaque:YES]; 
```

我已经拜访`NSLog`了该`imageView`物业，看来一切都应该如此。我也可以点击按钮，然后调用与之关联的方法，所以我知道它存在。以防万一我在这里遗漏了什么是`NSLog`回报：

```
<UIImageView: 0x1d97e1b0; frame = (254 61; 20 20); clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x1d97e210>> 
```

我不使用点符号来设置上面的图像视图属性的原因是因为它们似乎没有改变值。例如，如果我说它`detailCell.greenPriorityButton.imageView.hidden = NO;`似乎没有做任何事情。

谢谢你的帮助！

**编辑**

不只是设置按钮的背景颜色而不是其图像视图的原因是因为我试图在按钮中创建一个小形状。但是我希望可点击的空间在形状周围有边距，所以它仍然是用户友好的。我认为图像视图属性会很有用，因为我可以将框架和图层与按钮的框架和图层分开操作。

我现在尝试将 a`UIView *greenBackground`作为子视图添加到按钮，但这也没有出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:35:01.547

如果您想要一个可以在按钮视图中拥有的视图以设置其颜色，那么我认为尝试使用 imageview 是错误的方法。您可以只添加一个具有更改背景颜色的子视图。像这样的东西：

```
UIView *colorView = [[UIView alloc] initWithFrame:CGRectMake(10, 10, 10, 10)];//Whatever rect you want that will be in reference to the frame of the button
colorView.backgroundColor = [UIColor greenColor];
[detailCell.greenPriorityButton addSubview:colorView]; 
```

# asp.net-mvc - 可枚举模型不同

> ID：14327989
> 
> 赞同：-2
> 
> 时间：2013-01-14T22:31:53.663
> 
> 标签：asp.net-mvc, asp.net-mvc-3, ienumerable

我有一个`IEnumerable`视图模型。这具有相同的名称，我只想选择一个名称并将其显示在标题中。请建议。

我的代码如下。我正在尝试使用 distinct 但它不起作用

```
@foreach (var item in Model.abc)
{
    {
        <table>
          <tr>
            <td style="width:100px" >@Html.Label("Name")</td>
            <td style="width:225px"> @Html.DisplayTextFor(model => item.Name.Distinct())</td>
          </tr>
        </table>
    }
} 
```

更具体地说：我的结果将只有名称`{a,a,a,a,a}`，所以我只想选择单曲`{a}`并显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:36:59.637

> 这具有相同的名称，我只想选择一个名称并将其显示在标题中。

如果它们都相同并且假设`Name`实现`IEnumerable`，您可以尝试[First](http://msdn.microsoft.com/en-us/library/bb291976.aspx)：

**更新**：为您的模型添加一个新属性

```
otherProperty = item.Name.First(); 
```

然后：

```
@Html.DisplayTextFor(model => item.otherProperty) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T06:46:09.203

**在您的应用中使用此代码**

```
@foreach (var item in Model.Select(x => x.Title).Distinct())
 {
 <option>@item</option>
} 
```

> 你可以`@html.display(X=>item)`改用`@item`

# git - Git 从 GitHub 上的仓库签出到基于 SVN 的现有本地仓库

> ID：14327993
> 
> 赞同：2
> 
> 时间：2013-01-14T22:32:11.880
> 
> 标签：git, svn, version-control, github

我最近将一个项目从 Subversion 迁移到 GitHub，但当前工作的本地目录仍然是 SVN 本地存储库。由于复杂的原因，创建一个新的 git clone 本地存储库并不好，那么有什么方法可以从 GitHub 签出 git 存储库？

现在它给了我错误：

```
fatal: Not a git repository (or any parent up to mount parent )
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set) 
```

显然，因为我没有使用 git 本地存储库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T22:38:36.120

1.  `git init`在您的 Subversion 工作目录中将使它成为一个 git 存储库。
2.  `git remote add origin <url>`，`<url>`GitHub 的 HTTPS 或 SSH 路径在哪里，会将您的本地存储库连接到 GitHub。
3.  `git fetch origin`将使用来自 GitHub 的所有历史记录更新您的本地 Git 存储库
4.  `git reset origin/master`会将您的本地主分支指向来自源的最新主分支，而不会更改您的文件。

此时`git status`将向您展示本地工作目录与 GitHub 上的内容之间的任何差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T14:56:46.650

听起来您的核心问题是您尝试以这种方式使 Subversion 和 Git 存储库保持同步，Git 应该只是对您的 Subversion 存储库的附加视图。如果是这种情况，SubGit 可能是一个解决方案：它提供了 Subversion 存储库的 Git 镜像，因此您可以在您的机器上坚持使用 Subversion，同时还拥有额外的 Git 存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T22:38:18.047

您不能创建 git 存储库的“SVN 签出”。

在 git 中，克隆存储库包括其所有历史记录。git 工具依靠它来执行它们的功能。在 SVN 中，所有历史记录都在服务器上，而本地只是一个工作副本。

你将不得不做一个`git clone`. 与 SVN 工作方式最接近的仿制品是使用 --depth=1 进行克隆，但生成的结帐将严重瘫痪。

如果您想做与您所要求的相反的事情 - 也就是说，您想使用本地 git 客户端和上游 SVN 存储库 - 答案将是`git-svn`.

如果您只是想尽量减少重新下载的数量-您只说“复杂的原因”，所以我无法推断您的动机-仅保留本地文件是不够的。正如我所提到的，git 不仅存储文件的最新版本，还存储每个过去的修订版本。无论您做什么，都必须下载过去的版本信息。

# python - URL 和 django 基于类的视图

> ID：14327998
> 
> 赞同：0
> 
> 时间：2013-01-14T22:32:57.540
> 
> 标签：python, django, django-views, django-urls

这是我在 django (1.4) 中使用基于类的视图完成的第一个项目，我在基于日期的存档不返回 URL 时遇到了一些问题。我已经成功地在我的项目（企业内部网）中构建了几个不需要它们的应用程序，但该站点的“新闻”部分确实需要基于日期的存档。

年月日档案似乎都可以正常工作，但我的个人文章并没有产生我认为应该的 URL。我很确定问题出在 models.py 中的 get_absolute_url 函数中，因为如果我键入 URL，我希望他们直接拥有 django 会找到并显示我想要的文章！

从我得到的外壳调用 get_absolute_url 函数：

```
NoReverseMatch: Reverse for 'news_detail' with arguments '('2013', 'Jan', '14', 'another-news-thang')' and keyword arguments '{}' not found. 
```

我已经阅读了[DateDetailView的](https://docs.djangoproject.com/en/1.4/ref/class-based-views/#datedetailview)[相关文档](https://docs.djangoproject.com/en/1.4/topics/class-based-views/)和具体参考，但我无法完全理解我出错的地方。

我的models.py是：

```
from django.db import models
import datetime
from django.core.urlresolvers import reverse
from django.contrib.auth.models import User
from phone_list.models import Person, Team
from tinymce import models as tinymce_models
from taggit.managers import TaggableManager
from easy_thumbnails.fields import ThumbnailerImageField

class LiveNewsManager(models.Manager):
    def get_query_set(self):
        return super(LiveNewsManager, self).get_query_set().filter(status=self.model.LIVE_STATUS)

class News(models.Model):
    LIVE_STATUS=1
    DRAFT_STATUS=2
    HIDDEN_STATUS=3
    STATUS_CHOICES=(
        (LIVE_STATUS, 'Live'),
        (DRAFT_STATUS, 'Draft'),
        (HIDDEN_STATUS, 'Hidden'),
    )

    # core fields
    headline=models.CharField(max_length=250)
    image = ThumbnailerImageField(
        upload_to='news_images',
        resize_source=dict(size=(700, 500), sharpen=True),
        null=True,
        blank=True,
        help_text = "Optional. Photographs added here are given 'feature' status and should be landscape oriented.",
    )
    image_caption=models.CharField(
        max_length=144,
        blank=True,
        help_text = "DO NOT ADD IF THERE IS NO FEATURE IMAGE",
    )
    story = tinymce_models.HTMLField()
    pub_date=models.DateTimeField(default=datetime.datetime.now)

    # metadata
    writer=models.ForeignKey(Person)
    enable_comments=models.BooleanField(default=True)
    featured=models.BooleanField(default=False)
    slug=models.SlugField(unique_for_date='pub_date')
    status=models.IntegerField(choices=STATUS_CHOICES, default=LIVE_STATUS)

    # categorization
    tags=TaggableManager()

    objects=models.Manager()
    live=LiveNewsManager()

    class Meta:
        verbose_name_plural='News articles'
        ordering=['-pub_date']

    def pictures(self):
        try:
            return [self.image]
        except:
            pass

    def get_absolute_url(self):
        return reverse ('news_detail', args = [str(self.pub_date.strftime("%Y")), str(self.pub_date.strftime("%b")), str(self.pub_date.strftime("%d")), str(self.slug)])

    def __unicode__(self):
        return self.headline 
```

我的 urls.py 是：

```
from django.conf.urls import patterns, include, url
from haystack.forms import ModelSearchForm
from haystack.query import SearchQuerySet
from haystack.views import SearchView
from django.views.generic import ArchiveIndexView, YearArchiveView, MonthArchiveView, DayArchiveView, DateDetailView
from datetime import date
from news.models import News

sqs = SearchQuerySet().models(News)

urlpatterns = patterns('',
    url(r'^$', ArchiveIndexView.as_view(
        date_field = 'pub_date',
        model=News,
        context_object_name="latest_news",),
        ),
    url(r'^(?P<year>\d{4})/$', YearArchiveView.as_view(
        date_field = 'pub_date',
        model=News,
        context_object_name="year_archive",),
        ),
    url(r'^(?P<year>\d{4})/(?P<month>\w{3})/$', MonthArchiveView.as_view(
        date_field = 'pub_date',
        model=News,
        context_object_name="month_archive",),
        ),
    url(r'^(?P<year>\d{4})/(?P<month>\w{3})/(?P<day>\d{2})/$', DayArchiveView.as_view(
        date_field = 'pub_date',
        model=News,
        context_object_name="day_archive",),
        ),
    url(r'^(?P<year>\d{4})/(?P<month>\w{3})/(?P<day>\d{2})/(?P<slug>[-\w]+)/$', DateDetailView.as_view(
        date_field = 'pub_date',
        model=News,
        context_object_name="news_detail",),
        ),
    url(r'^search/$', SearchView(
        template='news/search.html',
        searchqueryset=sqs,
    ), name='haystack_search'),
) 
```

抱歉代码有点乱；一旦我让它们工作，我倾向于清理它们。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:47:58.650

您在这里没有任何地方命名您的 URL。

`news_detail`如果尚未在某处定义，则无法反转。

```
 url(r'^(?P<year>\d{4})/(?P<month>\w{3})/(?P<day>\d{2})/(?P<slug>[-\w]+)/$',       
      DateDetailView.as_view(
        date_field = 'pub_date',
        model=News,
        context_object_name="news_detail",),
        ),
       name='news_detail'),  #<--- you're missing this 
```

# c# - 无法反序列化 json 对象

> ID：14327999
> 
> 赞同：-11
> 
> 时间：2013-01-14T22:32:59.510
> 
> 标签：c#, .net, json

我正在使用 JavaScriptSerializer，当我尝试将 JSON 对象反序列化为

```
Json.Deserialize<List<HeyWatchVideo>>(Request("video")); 
```

我得到以下异常：

> MissingMethodException：没有为“System.String”类型定义无参数构造函数。

我尝试匹配我的 .NET 类，它们的属性类型与我的 json 对象一样接近，但仍然超出异常

我的 JSON 对象：

```
[{
    "url": "http://media.heywatch.com.s3.amazonaws.com/14/14/a0f356a48381092e6e2a34021ce86b19/11002247",
    "specs": {
        "size": 3808,
        "video": {
            "fps": 11.63,
            "height": 360,
            "length": 61,
            "width": 640,
            "aspect": 1.78,
            "codec": "mpeg4",
            "container": "mov",
            "rotation": 0,
            "bitrate": 507,
            "pix_format": "yuv420p",
            "stream": 0.1
        },
        "thumb": "http://media.heywatch.com.s3.amazonaws.com/14/14/ad59fa501d1b9e826552dfc010cf1c98/11002247.jpg",
        "audio": {
            "sample_rate": 11025,
            "channels": 1,
            "codec": "aac",
            "bitrate": 38,
            "synched": true,
            "stream": 0
        },
        "mime_type": "video/mp4"
    },
    "title": "elves.mp4",
    "filename": "11002247",
    "link": "http://heywatch.com/video/21091957.bin",
    "updated_at": "2013-01-14T15:44:53+01:00",
    "created_at": "2013-01-14T15:44:53+01:00",
    "id": 21091957
}] 
```

我的课程

```
public class HeyWatchVideo
{
    public DateTime Created_At { get; set; }
    public string Title { get; set; }
    public Dictionary<string, string> Specs { get; set; }
    public DateTime Updated_At { get; set; }
    public int Id { get; set; }
    public string Filename { get; set; }
    public string Link { get; set; }
    public string Url { get; set; }
}

public class HeyWatchVideoSpecs
{
    public HeyWatchVideoSpecsAudio Audio { get; set; }
    public HeyWatchVideoSpecsVideo Video { get; set; }
    public string Thumb { get; set; }
    public string Mime_type { get; set; }
    public int Size { get; set; }
}

public class HeyWatchVideoSpecsVideo
{
    public int Rotation { get; set; }
    public double Aspect { get; set; }
    public string Container { get; set; }
    public string Codec { get; set; }
    public int Length { get; set; }
    public int Width { get; set; }
    public int Bitrate { get; set; }
    public string Pix_format { get; set; }
    public double Fps { get; set; }
    public double Stream { get; set; }
    public int Height { get; set; }
}

public class HeyWatchVideoSpecsAudio
{
    public int Channels { get; set; }
    public int Sample_rate { get; set; }
    public string Codec { get; set; }
    public bool Synched { get; set; }
    public int Bitrate { get; set; }
    public int Stream { get; set; }
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:51:04.240

我的问题解决了。我的 .Net 类与 Json 对象不完全匹配。（两者都在问题中）

当它们匹配时，这个错误就消失了