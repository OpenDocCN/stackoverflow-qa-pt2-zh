# StackOverflow 问答 14010000-14010999

# unit-testing - 如何为 reject_body_scores(attributed) 方法编写测试代码？

> ID：14010008
> 
> 赞同：0
> 
> 时间：2012-12-23T09:46:13.157
> 
> 标签：unit-testing, rspec

```
class Horse < ActiveRecord::Base

  attr_accessible :body_scores_attributes

  has_many :body_scores, :dependent => :destroy

  accepts_nested_attributes_for :body_scores, :reject_if => :reject_body_scores

  private
  def reject_body_scores(attributed)

    new_record? || attributed['date'].blank? || attributed['score'].blank?
  end

end 
```

和

```
class BodyScore < ActiveRecord::Base

  attr_accessible :horse_id, :score, :scoring_date
  belongs_to :horse

  validates :horse_id, :score, :scoring_date, :presence => true

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:30:49.530

像这样的东西：

```
 describe "#reject_body_scores" do
    context "when record is new" do
      let(:horse) { build :horse }
      let(:options) { {} }
      it "reject body" do
        horse.send(:reject_body_scores, options).should be_true
      end
    end

    context "when date blank" do
      let(:horse) { create :horse }
      let(:options) { {} }
      it "reject body" do
        horse.send(:reject_body_scores, options).should be_true
      end
    end

    context "when score blank" do
      let(:horse) { create :horse }
      let(:options) { { "date" => Date.current } }
      it "reject body" do
        horse.send(:reject_body_scores, options).should be_true
      end
    end

    context "when date and score present" do
      let(:horse) { create :horse }
      let(:options) { { "date" => Date.current, "score" => 5 } }
      it "don't reject body" do
        horse.send(:reject_body_scores, options).should be_false
      end
    end
  end 
```

您应该涵盖所有可能的行为。

我还使用了用于测试[此处](https://stackoverflow.com/questions/4154409/how-to-spec-a-private-method)`object.send`描述的私有方法的技巧。

**upd**：由于您是测试新手，我将添加一些有关测试的描述。

我使用[FactoryGirl](https://github.com/thoughtbot/factory_girl)来创建新工厂并为此使用[简短的语法](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#using-factories)。

我使用[let](http://betterspecs.org/#let)分配新变量而不是`before`块。

# java - Maven：编译为可执行 Jar 后找不到资源路径

> ID：14010012
> 
> 赞同：0
> 
> 时间：2012-12-23T09:46:49.913
> 
> 标签：java, maven, maven-plugin, pom.xml, maven-assembly-plugin

今天我在 maven-assembly-plugin 的帮助下将我的 maven projekt 编译为可执行 jar。但是在这样做之后，我的 jar 文件无法解析路径。

我将此添加到我的 pom.xml

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-assembly-plugin</artifactId>
<version>2.2.1</version>
<executions>
    <execution>
        <id>package-jar-with-dependencies</id>
        <phase>package</phase>
        <goals>
            <goal>single</goal>
        </goals>
        <configuration>
            <appendAssemblyId>false</appendAssemblyId>
            <descriptorRefs>
                <descriptorRef>jar-with-dependencies</descriptorRef>
            </descriptorRefs>
            <archive>
                <manifest>
                    <mainClass>de.main.Main</mainClass>
                </manifest>
            </archive>
        </configuration>
    </execution>
</executions>
</plugin> 
```

这个项目依赖于另一个项目。我在 pom.xml 中设置了依赖项。而这个依赖项目现在无法找到他的资源。资源的路径是 /src/main/resources/Lang。执行 maven-install 后，此文件夹已移至 /classes/Lang。我的依赖项目现在无法找到这条路径。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:56:34.777

里面的东西在`src/main/resources`类路径上，应该通过类加载器作为资源访问 - 而不是作为位于文件系统中的文件。试想一下，当在 jar 文件中传递时，您将如何访问这样的资源？

如果您需要文件存在于围绕各种 jar 文件的文件系统中，则必须使用另一种机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T11:10:38.377

正如我所怀疑的那样，问题在于您没有正确加载资源。您正在使用 File IO 访问不是文件的资源，而是类路径中的 jar 文件的条目。想一想：一旦您将 jar 提供给应用程序的最终用户（或使用您的库的开发人员），他的计算机上将不会有任何 src/main/resources/Lang。`src/main/resources`是文件在您的*开发*环境中的位置。

要加载位于运行时类路径中 jar 根目录的 Lang 文件的内容，请使用

```
InputStream in = SomeClass.class.getResourceAsStream("/Lang"); 
```

或者

```
InputStream in = getClass().getClassLoader().getResourceAsStream("Lang"); 
```

注意：要查看 jar 文件的内容，请使用任何 zip 工具打开它，或使用命令

```
jar -tf theFile.jar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T09:56:25.777

在您的程序集 xml 中，您需要使用依赖项集：

```
<assembly
    xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
    <id>my-assembly</id>

...

<dependencySets>
   <dependencySet>
      <outputDirectory>/</outputDirectory>
      <useProjectArtifact>true</useProjectArtifact>
      <unpack>true</unpack>
      <scope>runtime</scope>
   <includes>
    <include>groupId:artifactId</include>
   </includes>
   </dependencySet>
</dependencySets> 
```

请参阅[Maven 程序集插件](http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies)。

# asp.net-mvc-3 - 找不到路径“/”的控制器... Html.Action 中的错误

> ID：14010021
> 
> 赞同：0
> 
> 时间：2012-12-23T09:48:43.910
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-4, html-helper, child-actions

我的应用程序（ASP.NET MVC 4）直到几个小时前都在工作，最近我收到了这个错误：

> 找不到路径“/”的控制器或未实现 IController

我测试了应用程序的某些部分，发现当我调用`Html.Action`或`Html.RenderAction`助手时会发生这种情况。我应该告诉你我用谷歌搜索并搜索了错误并找到了一些文章，但没有一篇文章解决了这个问题。似乎一切都很好。我的路由系统和呼叫助手......一切似乎都很好。使用`Action`and有什么意义`RenderAction`吗？

哦，我应该告诉你，它发生在我将一些控制器和视图从另一个项目复制/粘贴到当前项目之后。但是我检查名称空间和文件是否存在以及每件事。请问有什么建议吗？我目前被绞死。

# php - 在php中获取数组项的单个值

> ID：14010022
> 
> 赞同：2
> 
> 时间：2012-12-23T09:48:52.287
> 
> 标签：php, arrays

我的 php 代码中有一个数组，但我不知道如何获取它的值。

我的数组：

```
$year =  array(
    'data' => to_html(strtr(to_lang('main/date_format_other_years'), array(
    '^day' => '',
    '^month' => '',
    '^year' => date('Y', $timestamp),
 ))),
); 
```

我有一个名为 的变量`$stringyear`，如何将其设置为该数组的“年份”值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:23:54.823

您可以按如下方式访问它：

```
$stringyear = $year[1]['^year']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:55:10.167

这应该有效：`$stringyear = $year['data']['^year'];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T09:57:15.740

这取决于`to_html`函数返回什么，如果它返回一个字符串（用于在 html 中显示），那么你不能得到它（你可以但你需要再次解析字符串）。

既然你有`$timestamp`，为什么不只做：

```
$stringyear = date('Y', $timestamp); 
```

# php - 仅使用一个 SQL 请求在 2 个表中进行选择

> ID：14010023
> 
> 赞同：0
> 
> 时间：2012-12-23T09:49:11.617
> 
> 标签：php, sql

> **可能重复：**
> [SQL 查询如何从多个表中返回数据](https://stackoverflow.com/questions/12475850/how-can-an-sql-query-return-data-from-multiple-tables)

我想要一个关于如何做这件事的好消息：从我的表 1 和我的表 2 中选择所有内容，其中我的表 2 的 id_article 等于我的表 1 中的 id ...我试试这个：

```
SELECT * FROM table1 AS n, table2 AS a WHERE n.id = a.id_article 
```

但它没有用......虽然我不明白整个过程......

感谢您提供任何线索

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T09:50:43.087

使用[`JOIN`](http://www.w3schools.com/sql/sql_join.asp)语句。

```
SELECT * 
  FROM table1 
  JOIN table2 
    ON table1.id = table2.id_article 
```

（可选）您可以`WHERE`在最后添加条件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:51:18.443

或者，使用查询的新语法格式，`ANSI SQL-92`.

```
SELECT  a.*, b.*
FROM    table1 a
        INNER JOIN table2 b
            ON a.ID = b.ID_Article 
```

要全面了解联接，请参阅下面的文章

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# castle-windsor - 温莎城堡注册装饰师

> ID：14010024
> 
> 赞同：0
> 
> 时间：2012-12-23T09:49:22.090
> 
> 标签：castle-windsor

我正在尝试注册装饰器`IInterface`，我有几个实现相同接口的类。

```
public class Instance_A : IInterface
{}

public class Instance_B : IInterface
{} 
```

没有装饰器的注册看起来像：

```
AllTypes.FromAssemblyContaining<IInterface>().BasedOn<IInterface>()
   .Configure(c => c.LifeStyle.Transient.Named(c.Implementation.Name)) 
```

我添加了装饰器：

```
public class InstanceDecorator : IInterface
{
    public InstanceDecorator (IInterface instance)
    {
        Instance= instance;
    }
} 
```

当我试图解析一个已实现的类时，如何注册装饰器并获得它的实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:01:34.780

这不是装饰器的工作方式。您必须将您的服务注册为抽象。如果你想用相同的合约装饰许多组件，请改用拦截器。

# joomla - 如何在美德商城的 2 产品描述中添加 javascript 代码？

> ID：14010026
> 
> 赞同：0
> 
> 时间：2012-12-23T09:49:32.643
> 
> 标签：joomla, virtuemart

我有 2.0.4 版，无法`<a href="javascript:return false;" >link</a>` 在产品描述中添加 javascript 代码。它总是将其呈现为`<a>link</a>`，尽管 joomla 正确处理代码。感谢帮助

# python - 如何创建注册过滤器的 jinja2 扩展

> ID：14010028
> 
> 赞同：0
> 
> 时间：2012-12-23T09:49:42.957
> 
> 标签：python, jinja2

我想创建一个`jinja2`定义和注册新过滤器的扩展。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:07:31.917

如果您将 Flask 与 Jinja2 一起使用，您还可以使用装饰器：

```
@app.template_filter('visible_only')
def visible_only(value):
    return [v for v in value if not getattr(v, "visible", False)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:49:42.957

这有效：

```
from jinja2.ext import Extension

def visible_only(value):
    return [v for v in value if not getattr(v, "visible", False)]

class MyExtension(Extension):
    def __init__(self, environment):
        environment.filters["visible_only"] = visible_only 
```

# svn - 操作错误删除了 SVN 中的新文件

> ID：14010032
> 
> 赞同：0
> 
> 时间：2012-12-23T09:50:35.083
> 
> 标签：svn, recover

我整天都在处理 SVN 目录中的几个新文件。

在一天结束时，我添加并提交了它们。不幸的是，我是从我的笔记本电脑（我在两个目录之间来回切换）上完成的，它基本上是空的文件，第二天早上我在我的主 PC 上进行了更新，它擦除了我整天工作的文件。我尝试了各种“恢复”、日志、信息等，但没有发现任何以前版本的痕迹。

有什么方法可以获取第一次更新时擦除的版本。我没有得到任何警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:55:50.577

你能给我们更多的细节吗？您在 PC 上*丢失*的文件是否已提交到 Subversion？如果它们是，即使它们在您的笔记本电脑上被删除，您也应该能够恢复它们。

这些文件是未提交的本地文件吗？可能没有办法让他们回来。然而，Subversion 很少会随意删除内容。更新完成时会更新修改的文​​件，并且永远不会删除修改的部分。如果文件不在存储库中，即使在存储库中创建了同名文件，更新完成时也不会删除它。在这种情况下，你会遇到冲突。

也许未来的提示：如果您在两台机器之间来回移动，请使用[Dropbox作为您的 Subversion 工作目录。](http://dropbox.com)Dropbox 自动同步这两个目录——甚至是 Subversion 工作目录。此外，它还存储了 Subversion 之外的文件更改历史记录。你不能，不，永远，不要，不允许，不要，在两台机器上同时使用带有 Subversion 的 Dropbox 目录。但是，如果您只是在两个系统之间来回切换，则效果很好。

# facebook - 喜欢按钮评论未正确放置

> ID：14010039
> 
> 赞同：1
> 
> 时间：2012-12-23T09:51:51.113
> 
> 标签：facebook, wordpress, plugins

我正在使用 facebook 的 wordpress facebook 插件。当有人单击“赞”按钮时，会弹出“添加评论”框。填写它被正确放置在新闻概述中。在时间线或个人资料页面中，内容被替换为带有字母“N/A”的三行或四行。与其他网站检查这一点，也会发生同样的事情。这是一个已知的错误？有谁知道解决或解决它的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:56:27.907

可能是你浏览器的问题。

# python - 通过第三方应用程序的 Django 自定义身份验证后端

> ID：14010047
> 
> 赞同：1
> 
> 时间：2012-12-23T09:53:25.773
> 
> 标签：python, django, custom-backend

我正在尝试在 Django 中实现自定义身份验证后端，它将基于来自第三方服务（Facebook、LinkedIn 等）的唯一 ID 登录用户。基本上，一旦用户 OAuth 到第三方服务并获得唯一标识符回来，我想无缝登录。

但是我的自定义后端不起作用并返回“无”。

这是我的自定义后端：

```
from myapp.models import Account
from django.contrib.auth.models import User

class ThirdPartyServiceBackend(object):

    def authenticate(self,acct_id=None):
        if acct_id is not None:
            try:
                return User.objects.get(account__uniq_id=acct_id)
            except:
                return None

    def get_user(self, user_id):
        try:
            return User.objects.get(pk=user_id)
        except User.DoesNotExist:
            return None 
```

我在我的 settings.py 中启用了这个后端：

```
AUTHENTICATION_BACKENDS = (
    'myproject.myapp.backends.ThirdPartyServiceBackend',
    'django.contrib.auth.backends.ModelBackend',
) 
```

这就是我在views.py中处理它的方式：

```
# oauth processing and everything goes here
try:
    # login and redirect to search page

    user = authenticate(acct_id=third_party_service_user_info['id'])

    if user is not None:
        auth_login(request,user)
        return HttpResponseRedirect('/') 
```

这调用在 shell 中工作没有问题——返回用户。但是身份验证调用失败了 - 关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:57:13.830

来自 Django 文档：

> 一旦用户通过了身份验证，Django 就会在用户的会话中存储用于对用户进行身份验证的后端，并在需要访问当前经过身份验证的用户时在该会话期间重复使用相同的后端。这实际上意味着身份验证源在每个会话的基础上进行缓存，因此如果您更改 AUTHENTICATION_BACKENDS，如果您需要强制用户使用不同的方法重新进行身份验证，则需要清除会话数据。一个简单的方法就是执行 Session.objects.all().delete()。

试试看，我遇到了同样的问题，这就是我的解决方法。

# cross-browser - 我应该支持哪些浏览器，你将如何在 Mac 上做到这一点？

> ID：14010050
> 
> 赞同：1
> 
> 时间：2012-12-23T09:53:56.950
> 
> 标签：cross-browser

我使用了很多 HTML5/CSS3 并且在 Mac 上。一切对我来说都很棒，但我不是我的客户:(。

如果你想为最好的跨浏览器测试设置一些东西，

1）你会支持什么浏览器？

2）如果你在Mac上，最好的办法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:03:37.693

尽管这不是一个具体且开放式的问题，但我会尝试确定我的大多数用户使用的浏览器。例如，如果我的应用程序针对银行和大公司，我肯定希望将 ie 7 包含到目标浏览器中。否则，我认为让网站 ie7 兼容是不值得的。

一些指导方针：

*   使用[来自 Twitter 的 Bootstrap](http://twitter.github.com/bootstrap/)
*   使用[HTML5shiv](http://code.google.com/p/html5shiv/)
*   使用[jQuery Mobile](http://jquerymobile.com/)

您可以通过在您的 Mac 上运行虚拟机来测试您的网站在其他浏览器上的外观

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:02:21.433

1) 最流行的浏览器，即：IE (>=8)、FF、Chrome、Safari，可能是 Opera 2) 可能在（VirtualBox 或 VMWare fusion）的帮助下设置一些 windows 虚拟机来测试 IE

# javascript - JS 日期功能在 Safari 中不起作用

> ID：14010054
> 
> 赞同：2
> 
> 时间：2012-12-23T09:54:57.103
> 
> 标签：javascript, ruby-on-rails-3, date

我正在制作一个 Rails 应用程序，并通过 ajax 调用从服务器获取日期。从服务器收到的日期是`2012-12-23 18:44:00 UTC`。当我这样做`newYear = new Date(data)`（其中数据是接收日期）时，我会`Sun Dec 23 2012 19:44:00 GMT+0100 (CET)`进入 Chrome 和`Invalid Date`Safari。

（我实际上想从服务器获取日期并将其转换为毫秒，以便我可以将其与今天的日期进行比较。）

所以它在 Chrome 中运行良好，但在 Safari 中不行。

我该如何解决这个问题？

.js 文件：

```
$ ->
    $(document).ready ->
        $.post "/get_time", (data) ->
            newYear = new Date(data)
            today = new Date().getTime()
            newYearMS = newYear.getTime()
            $("#ggg").html newYearMS
            if newYearMS < today
                $("body").css "background-image", "url('/assets/HypePlay.png')"
            else
                $("#play_button").hide()
                $("#counter").countdown
                    until: newYear
                    format: "HMS"
                    expiryUrl: "/"
                    $('#hhh').html data 
```

来自控制器的 return_time 函数：

```
def return_time
    date = Item.where(:end => Time.zone.now .. '2040-12-28 08:08:00').order("launch ASC").limit(1).first.launch
    render text: date
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T09:58:59.367

您应该从服务器返回以毫秒为单位的时间，然后使用它`new Date()`而不是返回日期字符串。

该[`date`对象](http://www.w3schools.com/js/js_obj_date.asp)确实接受许多不同的格式，但我可以想象 UTC 部分在 Safari 中会破坏它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T10:12:20.217

我建议生成毫秒或 ISO-8601；它们可以传递给所有主流浏览器的日期构造函数：

```
new Date("2012-12-20T18:15Z")
Thu Dec 20 2012 13:15:00 GMT-0500 (EST) 
```

如果你真的不能改变来自服务器的格式，那么你需要使用类似 moment.js 的东西：

```
moment.utc("2012-12-23 18:44:00 UTC", "YYYY-MM-DD HH:mm:ss") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T10:04:21.417

我同意@Horen，以及他关于从服务器传回时间（以毫秒为单位）的建议。

如果您与现有的东西捆绑在一起，并且需要使用格式，则可能需要查看[Moment.js](http://momentjs.com/)。它还将帮助您执行日期/时间验证。

# jms - Weblogic 持久文件存储目录不存在

> ID：14010058
> 
> 赞同：0
> 
> 时间：2012-12-23T09:56:00.580
> 
> 标签：jms, weblogic

我在创建 JMS 队列时遇到了一些问题。创建 JMS 服务器和模块后，我创建了一个 JMS 队列和连接工厂。当我尝试激活更改时，我在 weblogic 控制台中收到以下异常消息。

**消息传递内核“JMS 服务器名称”尚未打开。**

我检查了托管服务器的日志，发现了以下异常。

**weblogic.messaging.kernel.KernelException：消息内核“JMS 服务器名称”尚未打开。**

我想我的持久文件存储存在一些问题。但我找不到那个。在启动托管服务器时，它给了我文件存储目录不存在的错误。我创建了它要求的目录，仍然是同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T11:21:25.033

1.  转到服务器日志，查看持久文件系统指向哪个目录。确保该目录必须存在，否则您可以手动创建该目录。

2.  从控制台创建托管服务器时，查看它托管在哪台机器上。并确保该机器上必须存在持久目录。

# php - YII 模型 - 隐藏某些记录

> ID：14010066
> 
> 赞同：1
> 
> 时间：2012-12-23T09:56:56.680
> 
> 标签：php, mysql, yii

我有一个数据库表，其中有一个名为“rstatus”的字段，其值可以是“A”或“X”我如何在模型中为该表设置规则以仅考虑具有 rstatus="A" 的记录？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T10:39:28.597

为模型类添加[默认范围：](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes)

```
public function defaultScope()
{
    return array
    ( 
        'condition' => " rstatus = 'A' " 
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T20:54:06.557

[这是关于defaultScope](http://www.yiiframework.com/wiki/486/defaultscope/)的更完整的 wiki以及如何有时绕过它。

# r - 如何更新多列 XTS 对象中的一行？

> ID：14010068
> 
> 赞同：3
> 
> 时间：2012-12-23T09:57:11.907
> 
> 标签：r, xts

给定一个单列 xts 对象，我可以像这样更新一行：

```
library(xts)
a=xts(1:5,Sys.Date()+1:5)
b=xts(77:77,Sys.Date()+2)
a[index(b)]=b 
```

但是，一旦我有 2+ 行，它就会失败，并显示“*要替换的项目数不是替换长度的倍数*”：

```
a=xts(1:5,Sys.Date()+1:5);colnames(a)='x';a$y=11:15
b=xts(77:77,Sys.Date()+2);colnames(b)='x';b$y=78:78
a[index(b)]=b 
```

我应该如何更新 xts 对象中的单行？

目前我有这个黑客：

```
a$x[index(b)]=b$x
a$y[index(b)]=b$y 
```

有没有更好的办法？

**预期结果：**

```
> a
            x  y
2012-12-24  1 11
2012-12-25 77 78
2012-12-26  3 13
2012-12-27  4 14
2012-12-28  5 15 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T15:22:15.070

最简单的方法是在子集命令中使用逗号：

```
a=xts(1:5,Sys.Date()+1:5);colnames(a)='x';a$y=11:15
b=xts(77:77,Sys.Date()+2);colnames(b)='x';b$y=78:78
a[index(b),]=b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T10:54:04.633

一种解决方案是使用`coredata`, 来操作矩阵

```
 coredata(a)[index(a)==index(b)] <- coredata(b)

> a
            x  y
2012-12-24  1 11
2012-12-25 77 78
2012-12-26  3 13
2012-12-27  4 14
2012-12-28  5 15 
```

我更喜欢使用另一个答案中提到的 a[index(b),]=b ，但由于某些原因，当我使用它时，我没有相同的结果。（它改变了第一个日期而不是第二个日期）

```
 a=xts(1:5,Sys.Date()+1:5);colnames(a)='x';a$y=11:15
> b=xts(77:77,Sys.Date()+2);colnames(b)='x';b$y=78:78
> a[index(b),]=b
> a
            x  y
2012-12-23 77 78
2012-12-24  2 12
2012-12-25  3 13
2012-12-26  4 14
2012-12-27  5 15 
```

和

```
> b
            x  y
2012-12-24 77 78 
```

# android - Android登录页面异常

> ID：14010070
> 
> 赞同：1
> 
> 时间：2012-12-23T09:57:29.877
> 
> 标签：android, android-intent, login, android-activity

我想创建一个这样的登录页面：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:background="#000000" >
    <TextView
        android:id="@+id/Lbl_Title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="@string/Title"
        android:layout_margin="0dp" 
        android:padding="10dp"
        android:textColor="#FFFFFF"
        android:paddingRight="0dp"/>
    <EditText
        android:id="@+id/usrNameTxt"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:inputType="textEmailAddress"
        android:hint="@string/username"
       android:layout_marginBottom="20dp"
       android:typeface="serif" 
        android:layout_alignParentLeft="true"

        android:layout_below="@id/Lbl_Title"/>
 <EditText
        android:id="@+id/usrPassTxt"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="100dp"
        android:inputType="text"
        android:hint="@string/password"

        android:typeface="serif" 
        android:layout_alignParentLeft="true"
        android:layout_below="@id/usrPassTxt" 
         />

     <Button
        android:id="@+id/Btn_exit_app"
        android:layout_width="65dp"
        android:layout_height="wrap_content"
        android:layout_below="@id/usrPassTxt"
         android:text="@string/Exit" 
        android:layout_alignParentRight="true"
        />
      <Button
        android:id="@+id/Btn_Login"
         android:layout_width="65dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/usrPassTxt"
        android:layout_toLeftOf="@id/Btn_exit_app"
         android:layout_alignBottom="@id/Btn_exit_app"
        android:text="@string/Login" />

</RelativeLayout> 
```

这是我的代码，当用户使用正确的密码登录进入主要活动时，如果密码无效，用户应该被引导到错误页面，第二部分我的意思是错误页面很好，但第一部分没有工作并将意外停止。我将不胜感激任何建议。

```
package com.example.test;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.text.InputType;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import com.example.test.Buy;
import com.example.test.ErrorPage;

public class MyClass extends Activity {
    private EditText uName;
    private EditText uPass;
    private Button loginBtn;
    private Button Btn_Exit;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        setUpViews();
        this.Btn_Exit=(Button)this.findViewById(R.id.Btn_exit_app);
       Btn_Exit.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {

            //  android.os.Process.killProcess(android.os.Process.myPid());
                Intent _Intent =new Intent(Intent.ACTION_MAIN);
                _Intent.addCategory(Intent.CATEGORY_HOME);
                _Intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(_Intent);

            }
        });

    }
    @Override
    protected void onResume() {
        super.onResume();
        uName.setText("Enter User Name");
        uName.setTextColor(Color.parseColor("#888888"));
        uPass.setText("Enter Password");
        uPass.setInputType(InputType.TYPE_CLASS_TEXT);
        uPass.setTextColor(Color.parseColor("#888888"));
    }
    private void setUpViews() {
         uName=(EditText)findViewById(R.id.usrNameTxt);
         uPass=(EditText)findViewById(R.id.usrPassTxt);
        uName.setOnFocusChangeListener(new View.OnFocusChangeListener() {

            public void onFocusChange(View v, boolean hasFocus) {
                if(uName.getText().toString().equalsIgnoreCase("Enter User Name")){
                    if(hasFocus){
                        uName.setTextColor(Color.parseColor("#000000"));
                        uName.setText("");
                    }
                }
                else if(uName.getText().toString().equalsIgnoreCase("")){
                    uName.setTextColor(Color.parseColor("#888888"));
                    uName.setText("Enter User Name");
                }
            }
        });
        uPass.setOnFocusChangeListener(new View.OnFocusChangeListener(){

            public void onFocusChange(View v, boolean hasFocus) {
                if(uPass.getText().toString().equalsIgnoreCase("Enter Password")){
                    if(hasFocus){
                        uPass.setInputType(InputType.TYPE_CLASS_TEXT| InputType.TYPE_TEXT_VARIATION_PASSWORD);
                        uPass.setTextColor(Color.parseColor("#000000"));
                        uPass.setText("");
                    }
                }
                else if(uPass.getText().toString().equalsIgnoreCase("")){
                        uPass.setInputType(InputType.TYPE_CLASS_TEXT);
                        uPass.setTextColor(Color.parseColor("#888888"));
                        uPass.setText("Enter Password");
                }
            }
        });
        loginBtn=(Button)findViewById(R.id.Btn_Login);

        //loginBtn.setFocusableInTouchMode(true);
        loginBtn.requestFocus();
        loginBtn.setOnClickListener(new OnClickListener() {
            private String pass;
            private String name;
            Intent myIntent;

            public void onClick(View v) {
                name=uName.getText().toString();
                pass=uPass.getText().toString();
                if(name.equalsIgnoreCase("so") && pass.equalsIgnoreCase("so"))
                {
                    myIntent=new Intent(MyClass.this,Main.class);
                    System.out.println("---IF---");
                }
                else if(name.equalsIgnoreCase("so")){
                    myIntent=new Intent(MyClass.this,ErrorPage.class);
                    myIntent.putExtra("user", "ok");
                    System.out.println("---ELSE IF---");
                }
                else{
                    myIntent=new Intent(MyClass.this,ErrorPage.class);
                    System.out.println("---ELSE---");
                }
                myIntent.putExtra("value", name);
                startActivity(myIntent);
            }
        });
    }
} 
```

这是我的日志：

```
 12-23 14:14:57.716: D/AndroidRuntime(226): Shutting down VM
12-23 14:14:57.726: W/dalvikvm(226): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
12-23 14:14:57.726: E/AndroidRuntime(226): Uncaught handler: thread main exiting due to uncaught exception
12-23 14:14:57.736: E/AndroidRuntime(226): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.Main}: java.lang.NullPointerException
1
12-23 14:14:57.736: E/AndroidRuntime(226):  at dalvik.system.NativeStart.main(Native Method)
12-23 14:14:57.736: E/AndroidRuntime(226): Caused by: java.lang.NullPointerException
12-23 14:14:57.736: E/AndroidRuntime(226):  at com.exampletest.Main.onCreate(Main.java:52)
12-23 14:14:57.736: E/AndroidRuntime(226):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-23 14:14:57.736: E/AndroidRuntime(226):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459) 
```

这是 Main.java：

```
package com.example.test;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.provider.Settings.System;
import android.view.KeyEvent;
import android.view.View;
import android.view.WindowManager;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class Main extends Activity {

    private Button btn_Buy;
    private Button btn_BuyExperience;
    private Button btn_Change_Password;

    Bundle myValues;
    private TextView welcomeMsg;
    //private Button backButton;

    public void onCreate(Bundle savedInstanceState) 
    {
        ///-----------------
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        this.btn_Buy=(Button)this.findViewById(R.id.Btn_Buy);
        this.btn_BuyExperience=(Button)this.findViewById(R.id.btn_Buy_Experience);
        this.btn_Change_Password=(Button)this.findViewById(R.id.btn_Change_Password);

        myValues=getIntent().getExtras();

        btn_Buy.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                Intent Frm_Buy=new Intent(Main.this,Buy.class);
                startActivity(Frm_Buy);
            }
        });

        btn_BuyExperience.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                Intent Frm_Buyexperience=new Intent(Main.this,current_cart.class);
                startActivity(Frm_Buyexperience);
            }
        });

        btn_Change_Password.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                startActivity(new Intent(Main.this,Change_Password.class));

            }
        });
        setUpViews();
    }
      private void setUpViews() {

        welcomeMsg=(TextView)findViewById(R.id.msg);
        welcomeMsg.setText("WelcomePage : "+myValues.getString("value"));
        Button LogoutButton=(Button)findViewById(R.id.Btn_Logout);
        LogoutButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                finish();
            }
        });
    }
    @Override
    public void onAttachedToWindow() {
        this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
        super.onAttachedToWindow();

    }
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
       if(keyCode == KeyEvent.KEYCODE_HOME)
           Toast.makeText(getBaseContext(),
                    "Please Log Out !", Toast.LENGTH_LONG).show();
     return false;
    }

} 
```

主要的.xml

```
 <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true"
    android:background="#000000"
     >

<RelativeLayout 
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

<TableLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/btn_Buy_Experience"
   android:layout_centerHorizontal="true"
      android:layout_centerVertical="true"
     >
 <TableRow android:id="@+id/tableRowWelcome"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <TextView
        android:id="@+id/msg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="@string/welcome"
        android:textStyle="bold"
        android:typeface="serif" />

    </TableRow>
    <TableRow
        android:id="@+id/tablerowBuy"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
        <Button
         android:id="@+id/Btn_Buy"
        android:layout_height="wrap_content"
       android:layout_weight="1"
    android:text="@string/Shop"
     android:drawableRight="@drawable/shopcartnew"
    />

    </TableRow>

    <TableRow
        android:id="@+id/tableRowCart"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
       >
        <Button
       android:id="@+id/btn_Buy_Experience"
       android:layout_height="wrap_content"
       android:layout_marginTop="20dp"
      android:layout_weight="1"
      android:text="@string/ShoppingCart"
      android:drawableRight="@drawable/shopcartico2"/>
    </TableRow>

    <TableRow
        android:id="@+id/tableRowPass"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
          android:layout_centerHorizontal="true"

         >
        <Button
        android:id="@+id/btn_Change_Password"
    android:layout_height="wrap_content"
android:layout_marginTop="20dp"
        android:layout_weight="1"
        android:text="@string/ChangePassword" 
        android:drawableRight="@drawable/passchange2"/>
    </TableRow>

    <TableRow
        android:id="@+id/tableRowLogout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
         <Button
        android:id="@+id/Btn_Logout"
         android:layout_height="wrap_content"
       android:layout_marginTop="20dp"
        android:text="@string/logout"
         android:drawableRight="@drawable/exiticon" 
        />
    </TableRow>

</TableLayout>

</RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:01:58.440

在看到您的`main.xml`文件后，您没有带有 id`btn_Buy_Experience`的按钮，因此在 main.xml 中添加一个按钮：

```
<Button
        android:id="@+id/btn_Buy_Experience"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
 ...../> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:09:27.773

你的有问题`setUpViews()`。错误发生在：

```
E/AndroidRuntime(218): at com.example.test.Main.setUpViews(Main.java:53) 12-23 12:24:17.109: 
```

将您的 setUpViews() 替换为以下代码：

```
 private void setUpViews() {
        this.btn_Buy=(Button)this.findViewById(R.id.Btn_Buy);
        this.btn_BuyExperience=(Button)this.findViewById(R.id.btn_Buy_Experience);
        this.btn_Change_Password=(Button)this.findViewById(R.id.btn_Change_Password);

        welcomeMsg=(TextView)findViewById(R.id.msg);
        welcomeMsg.setText("WelcomePage : "+myValues.getString("value"));
        Button LogoutButton=(Button)findViewById(R.id.Btn_Logout);
        LogoutButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                finish();
            }
        }); 
```

您试图在启动按钮之前设置按钮的 setOnClick 侦听器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T10:18:26.570

你的有错误`Main.java`

注意你`setupviews()`之前打电话

```
 this.btn_Buy=(Button)this.findViewById(R.id.Btn_Buy);
    this.btn_BuyExperience=(Button)this.findViewById(R.id.btn_Buy_Experience);
    this.btn_Change_Password=(Button)this.findViewById(R.id.btn_Change_Password); 
```

但你试图`onClickListeners`为他们设置`setupviews()`

它们此时为空，因此导致`NullPointer`

放在`setUpViews`onCreate 的末尾。它应该工作。

```
 @Override
public void onCreate(Bundle savedInstanceState) 
{
    ///-----------------
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    myValues=getIntent().getExtras();

    this.btn_Buy=(Button)this.findViewById(R.id.Btn_Buy);
    this.btn_BuyExperience=(Button)this.findViewById(R.id.btn_Buy_Experience);
    this.btn_Change_Password=(Button)this.findViewById(R.id.btn_Change_Password);

    setUpViews();
} 
```

您的代码中有错误`main.XML`或错误。

该错误是由于您`btn_Buy_Experience`在`TableLayout`.`main.xml`

您必须将其转换为 tableLayout 而不是按钮。

为了帮助使用 tableLayouts 和按钮，您可能需要查看 [OnClickListener 和 Table Layout这个问题](https://stackoverflow.com/questions/6603868/android-onclicklistener-and-table-layout)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-23T10:10:18.040

检查这个

```
if(name.equalsIgnoreCase("so") && pass.equalsIgnoreCase("so"))
                {
                    myIntent=new Intent(MyClass.this,Main.class);
                    System.out.println("---IF---");
                }
                else if(name.equalsIgnoreCase("so")){
                    myIntent=new Intent(MyClass.this,ErrorPage.class);
                    myIntent.putExtra("user", "ok");
                    System.out.println("---ELSE IF---");
                }
                else{
                    myIntent=new Intent(MyClass.this,ErrorPage.class);
                    System.out.println("---ELSE---");
                } 
```

似乎您从未创建过`myIntent`对象，因为所有条件都失败了，而您得到了`NullPointerException`.

```
myIntent.putExtra("value", name); 
```

# ajax - 以 yii ajaxly 形式向服务器发送两个请求提交

> ID：14010071
> 
> 赞同：0
> 
> 时间：2012-12-23T09:57:31.483
> 
> 标签：ajax, yii

我有一个带有下拉列表的表单。我将在更改下拉列表时，应用程序将请求作为**get**方法发送到操作。

我的js函数是：

```
$('#SiteWidget_type').change(function(){
    $.ajax({
       type: 'GET',
        url: "<?php echo CController::createUrl('siteWidget/au'); ?>" ,
        data: {id: $(this).val()},
        success:function(msg){
                    $('#W_1_layout').html(msg);
                  },
       error: function() { 
             //alert(error);
        },

      dataType:'html'
  });

}); 
```

但是两个请求已提交执行，我不知道为什么 ![萤火虫截图](../Images/5dae8f40e9662530325bf6ae063803e0.png)

# java - 在数组中显示随机整数

> ID：14010072
> 
> 赞同：-2
> 
> 时间：2012-12-23T09:58:06.613
> 
> 标签：java, random, arraylist

我将如何使用此代码显示随机整数？

```
 import java.util.*;
    public class RandTest {

    public static void main(String[] args) {

        int nos[] = {1,2,3,4,5,6};
        Random rand = new Random();

        for(int i = 0; i < nos.length; i++){
           System.out.println(nos[i]);
        }
    }
} 
```

结果应该是“随机”

```
3
5
2
1
6
4 
```

我之前得到的是“随机”

```
1
2
2
6
1
3 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T10:00:09.240

```
List<Integer> integerList = Arrays.asList(1, 2, 3, 4, 5, 6);
Collections.shuffle(integerList);
for (Integer i : integerList) {
    System.out.println(i);
} 
```

# python - 在 curses 中打印到标准控制台

> ID：14010073
> 
> 赞同：9
> 
> 时间：2012-12-23T09:58:15.043
> 
> 标签：python, ncurses, curses

我正在构建一个 python 诅咒应用程序。

我有两种打印到 curses 窗口的方法：`print x`和`windows.addstr(x)`（以及其他类似`window.*`选项）。

但是，出于调试目的，我希望能够打印到标准控制台，所以当我退出 curses 窗口时，我有信息等着我看到。我通常只会使用`print x`，但会打印到 curses 窗口。

`sys.stout.write()`也失败了。

我怎样才能做到这一点？

使用`sys.stdout`after 后`os.fdopen`，这是回溯

```
 curses.nocbreak()
 _curses.error: nocbreak() returned ERR
 close failed in file object destructor:
 sys.excepthook is missing
 lost sys.stderr 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-23T12:30:09.597

按照你说的做，这是我使用的一个片段：

```
class StdOutWrapper:
    text = ""
    def write(self,txt):
        self.text += txt
        self.text = '\n'.join(self.text.split('\n')[-30:])
    def get_text(self,beg,end):
        return '\n'.join(self.text.split('\n')[beg:end])

if __name__ == "__main__":
    mystdout = StdOutWrapper()
    sys.stdout = mystdout
    sys.stderr = mystdout

    screen = curses.initscr()
    curses.noecho()
    curses.cbreak()

    # do your stuff here
    # you can also output mystdout.get_text() in a ncurses widget in runtime

    screen.keypad(0)
    curses.nocbreak()
    curses.echo()
    curses.endwin()
    sys.stdout = sys.__stdout__
    sys.stderr = sys.__stderr__
    sys.stdout.write(mystdout.get_text()) 
```

这个技巧的巧妙之处在于，您还可以在小部件中的 ncurse 运行时输出您的标准输出。当然，可以根据需要调整 StdOutWrapper 的内部表示，以更好地满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T11:33:45.903

为什么不使用标准[`logging`](https://docs.python.org/2/library/logging.html)模块？

结合它`curses.wrapper`，你就可以开始了

* * *

**编辑：**

您可以在此处查看示例： [https ://stackoverflow.com/a/28102809/26494](https://stackoverflow.com/a/28102809/26494)

如果您只想登录到文件：

```
import logging
import curses

def draw(stdscr):
    logger = logging.getLogger(__file__)
    hdlr = logging.FileHandler(__file__ + ".log")
    formatter = logging.Formatter('%(asctime)s %(levelname)s %(message)s')
    hdlr.setFormatter(formatter)
    logger.addHandler(hdlr)
    logger.setLevel(logging.DEBUG)

    logger.info("begin")

    curses.init_pair(1, curses.COLOR_CYAN, curses.COLOR_BLACK)
    stdscr.addstr(0, 0, 'hello', curses.color_pair(1))
    logger.info("yeah")
    stdscr.getch()
    logger.info("end")

if __name__ == '__main__':
    curses.wrapper(draw) 
```

# php - Wordpress 自定义页面显示帖子不起作用

> ID：14010075
> 
> 赞同：1
> 
> 时间：2012-12-23T09:58:52.220
> 
> 标签：php, wordpress

所以我在这样的自定义页面上显示我的帖子：

```
<?php query_posts('order=ASC&posts_per_page=10'); while ( have_posts() ) : the_post(); ?> 
```

现在问题出在下一页链接上：

```
 <div class="nav-previous"><?php next_posts_link( __( '<span class="meta-nav">&larr;</span> Older posts', 'twentyten' ) ); ?></div>
  <div class="nav-next"><?php previous_posts_link( __( 'Newer posts <span class="meta-nav">&rarr;</span>', 'twentyten' ) ); ?></div> 
```

在下一页上，它还会显示旧页面的帖子，它会重复，我做错了什么？或者这是在自定义页面模板上显示帖子的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:01:54.327

除非您使用“分页”查询变量，否则分页将无法正常工作。在 Codex 中查看这一点： [query_posts 的分页](http://codex.wordpress.org/Function_Reference/query_posts#Pagination)

# templates - Joomla 2.5 高级参数

> ID：14010076
> 
> 赞同：2
> 
> 时间：2012-12-23T09:58:54.193
> 
> 标签：templates, joomla, parameters, components, joomla2.5

我是 joomla 2.5 模板开发人员，我想为我的主题使用一些自定义模板参数。我需要的是这张图片上的自定义参数字段。我不知道这是怎么做到的。它是放置在参数字段中的组件，还是它是什么。

![在此处输入图像描述](../Images/3880bdae38acd5617d48d3bce8977c54.png)

我的目标是从管理后端更改模板 css，以便有机会直接从“编辑模板”页面更改每个位置的宽度。你知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:38:42.297

好吧，该显示来自自定义管理模板 --- 如果您有兴趣添加模板参数，您可以在 templatedetails.xml 中执行此操作，只需添加您想要的字段。Beez2 为此提供了一个模型。

# objective-c - NSException 输出中的数字对是什么意思？

> ID：14010077
> 
> 赞同：0
> 
> 时间：2012-12-23T09:58:54.323
> 
> 标签：objective-c, cocoa, nsexception

抱歉，恐怕这个问题相当含糊，但我不知道要使用的正确术语。也许有人可以编辑它？

我试图弄清楚这个问题是什么

```
2012-12-23 09:53:36.827 myApp[10768:303] *** -[__NSArrayM objectAtIndex:]: index 13 beyond bounds for empty array 
```

方括号中的数字对是指行号还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T10:03:28.320

这些是 [processId:logging 线程的 Mach 端口]

# cocos2d-iphone - CocosBuilder 动画编辑器：防止动画重置场景

> ID：14010083
> 
> 赞同：0
> 
> 时间：2012-12-23T09:59:41.097
> 
> 标签：cocos2d-iphone, cocos2d-x

在 CocosBuilder 中，可以使用动画编辑器（时间轴）设置对象（例如 CCSprite、CCNode）的动画。

但是，如果我播放一个动画，例如，将对象 A 移动 200 px，然后播放另一个动画，例如，将对象 B 移动 300 px，CocosBuilder 总是在播放第二个之前将第一个对象 (A) 的位置重置回原来的位置动画。

也就是说，一旦播放另一个动画，我就无法保留任何动画的效果。我的解决方法是创建对象 A 的副本并将其设置为在新位置可见，并将原始 A 设置为不可见。但这是非常笨拙和不切实际的。

有什么办法可以防止这种情况发生吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:43:07.430

您可以创建 2 个单独的 ccb 文件（每个对象一个）并将它们拖放到您的主场景中。每个 ccb 将具有相关的动画，例如，对象 A 的 ccb 将具有将其平移 200 像素的动画。通过这种方式，动画是独立的。

# javascript - 在 requireJS 中使用动态名称时，require 如何在所有要求上返回相同的文件

> ID：14010084
> 
> 赞同：0
> 
> 时间：2012-12-23T09:59:41.333
> 
> 标签：javascript, dynamic, requirejs, require

有点迷失在这里...

我有一个函数可以检查页面上的模板触发器，并在找到时触发模板渲染，首先需要模板（使用`requireJS`），然后构建模板是什么。

我的问题是，我总是请求第一个模板文件，尽管当我这样做时：

```
renderTemplateTrigger: function(){
    var t = $('.template'),
        tl = t.length,
        i,
        dyn,
        el,
        config;

    if ( tl > 0 ){
        for ( i = 0; i < tl; i+=1 ){
            el = t[i];
            // correct element here
            console.log( el );

            if ( el.getAttribute("val") === null ){
                el.setAttribute("val",true);

                // get and parse configuration info
                config = el.getAttribute("data-config");
                dyn = $.parseJSON( config );
                // correct 
                console.log( dyn );

                // load template WILL ALWAYS LOAD THE SAME FILE
                require(['text!../tx/'+dyn.lib], 
                    function ( lib_template) {
                          // stuff  
                });
            }
        }
    }
} 
```

那么，当`dyn.lib`两次迭代等于`listview`并且`controlgroup`我要求`listview`并且`listview`不知道为什么？

**问题**：
为什么我似乎无法通过 requireJS 使用动态模板名称加载不同的模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T18:47:30.527

尝试以下操作：

```
...

dyn.f = function (lib_template)  {
  // stuff
};
require(['text!../tx/'+dyn.lib], dyn.f);

... 
```

# django - 模型领域的动态选择

> ID：14010090
> 
> 赞同：0
> 
> 时间：2012-12-23T10:00:17.857
> 
> 标签：django, django-models

我希望我的模型有`order`字段，它将包含所有同类项目中的项目顺序。

我想`choices`在 that中使用`IntegerField`，它将包含该表中当前存在的项目的所有数量。

所以它需要是动态的选择。

如何加载表中所有现有项目的所有现有“订单”值，并使用此列表进行选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T15:33:34.650

听起来你想为你的模型建立一个管理器：

### 模型.py

```
from django.db import models

class OrderManager(models.Manager):

    def order_choices(self):
        return [(i, i) for i in OrderModel.objects.values_list('order', flat=True)]

class OrderModel(models.Model): 

    objects = OrderManager()
    order = models.IntegerField()

    class Meta:
        ordering = ['order'] 

    def __unicode__(self):
        return '%i' % self.order 
```

### 表格.py

```
from django import forms

from yourapp.models import OrderModel

class OrderModelForm(forms.ModelForm):
    order = forms.ChoiceField(choices=OrderModel.objects.order_choices())

    class Meta:
        model = OrderModel 
```

### 管理员.py

```
from django.contrib import admin

from yourapp.forms import OrderModelForm
from yourapp.models import OrderModel

class OrderModelAdmin(admin.ModelAdmin):

    form = OrderModelForm

admin.site.register(OrderModel, OrderModelAdmin) 
```

### 编辑

管理器用于在没有模型对象实例的情况下进行一般模型查询。如果您不了解管理器的概念，您仍然可以从管理器类中重构代码，将其粘贴到其他地方并在您的代码中导入该函数。管理器允许您抽象出可以重用的自定义通用查询集。查看更多详细信息[https://docs.djangoproject.com/en/dev/topics/db/managers/](https://docs.djangoproject.com/en/dev/topics/db/managers/)

没有经理的代码看起来像

### views.py 或其他文件

```
from app.models import OrderModel

def order_choices():
    return [(i, i) for i in OrderModel.objects.values_list('order', flat=True)] 
```

从代码中的任何位置，如果您想多次重用上述内容：

```
from app.views import oder_choices

order_choices() 
```

相对于：

```
from app.models import OderModel

OrderModel.objects.order_choices() 
```

如果您只想使用上述一次，则可以将其保留在`forms.py`另一个答案中。如何重构代码完全取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T10:15:02.017

不要将选项直接添加到模型中，稍后通过使用一组选项覆盖字段来将它们添加到代表模型的表单中。

比，做类似的事情：

```
class MyForm(..):
    myfield_order_field = IntegerField(choices = [(i,i) for range(MyModel.objects.count)])
    class Meta():
        model = MyModel 
```

如果您想在管理员中使用它，请添加到您的管理员类：

```
class MyModelAdmin(admin.ModelAdmin):
...

    form = MyForm 
```

它也将覆盖管理员中的此字段。

# mysql - 我可以要求 MySQL 进行“双重”搜索吗？

> ID：14010091
> 
> 赞同：0
> 
> 时间：2012-12-23T10:00:32.167
> 
> 标签：mysql, sql

我想知道这是否可以让 MySQL 进行“双重搜索”；我真的不知道怎么说好，所以这里有一个例子：

我有一张歌曲信息表（标题、专辑等...）。我想得到专辑中的下一首歌。我有当前歌曲的 ID。目前我得到了行，检查专辑和曲目字段，然后根据专辑字段进行另一个 MySQL 查询，并检查当前曲目之后是否还有另一首曲目。

我可以在一个查询中告诉 MySQL 我希望专辑的所有行都包含在我拥有的 id 行中吗？

因为我真的不知道这是否可能或如何描述它，所以我在 Stack Overflow 上没有找到任何有用的东西，如果已经有类似的东西，很抱歉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T10:04:36.303

你可以使用 JOIN 来得到你想要的。假设您的表有一个链接到专辑的 ID，这样的东西可以用来获取当前正在收听的曲目之后的所有内容。

```
select *
  from songs a
  join songs b
    on a.album_id = b.album_id
 where a.song_id = 1 
   and b.song_id > a.song_id 
```

显然，如果您想要专辑中的所有内容，请删除第二个条件。如果您想包含正在收听的曲目，请更改`>`为`>=`.

* * *

您刚刚评论：

> 我应该提到它，但 id 与曲目的顺序无关，它只是表中的主键。

如果是这种情况，那么`b.song_id > a.song_id`可能是不正确的。你没有给我们你的完整模式，但我强烈建议你的`songs`表是否包含曲目应该播放的顺序，所以它看起来像`(SONG_ID, ALBUM_ID, ALBUM_ORDER, ... more song level info )`. 您的查询将变为：

```
select *
  from songs a
  join songs b
    on a.album_id = b.album_id
 where a.song_id = 1 
   and b.album_order > a.album_order 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T10:03:17.160

看起来你需要[子查询](http://dev.mysql.com/doc/refman/5.0/en/subqueries.html)

```
SELECT * FROM song_table WHERE album = 
    (SELECT album FROM song_table WHERE id = 12) 
```

此查询获取与具有相同专辑的行共享同一专辑的所有行`id = 12`

如果您的子查询可能返回多于一行，您需要`IN`：

```
SELECT * FROM song_table WHERE album IN 
    (SELECT album FROM song_table WHERE genre = "Techno") 
```

此查询获取具有（专辑）包含专辑的所有行（`genre = "Techno"`包含（至少一首）Techno歌曲的任何专辑中的所有歌曲）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T10:31:55.250

> 目前我得到了行，检查专辑和曲目字段，然后根据专辑字段进行另一个 MySQL 查询，并检查当前曲目之后是否还有另一首曲目。

它有什么问题？是慢，还是不方便，还是太复杂？
你有任何实际的理由去寻找另一种解决方案吗？

> 我想知道这是否可以让 MySQL 进行“双重搜索”

即使有一个肯定的答案，也不是所有“可能”的事情都值得实施。

您当前的设置简单明了，您可以自己维护。
虽然每个提议的解决方案都很复杂，但需要更多的知识来维护并且可能会导致一些问题，因为 Mysql 难以解释复杂的查询并且很容易使事情变得更糟。

# ios - PlaceholderView 包含许多视图

> ID：14010099
> 
> 赞同：0
> 
> 时间：2012-12-23T10:02:52.547
> 
> 标签：ios, view, storyboard, containers

我有一个占位符视图和 7 个按钮 ![见下图：](../Images/fea03f6a746fa7367ce0ed2ae451c384.png)

按第一个按钮以在占位符视图中出现第一个视图第二个-占位符视图中的第二个视图等。我正是需要这种方式（没有标签栏，没有分段控件）

如何实现这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T10:32:27.360

`seven`在`interfaceBuilder`or中创建视图`storyboard`并将 an 连接到`outlets`您的`viewcontroller`.. 并`IBAction`为您中的所有按钮编写方法，`view`并在每次按下按钮时更改`subview`of `placeholderview`。您可以实现这一点，或者为所有按钮创建一个单独的操作方法，或者为每个按钮设置一个标签并调用相同的方法并更改视图。检查我下面的代码。它会帮助你。

`tag`为每个按钮设置一个`interface builder.`例如，我将其分别设置为 1,2,3,...。

```
// action method for all the button look like this..
- (IBAction)buttonPressed:(id)sender {
    for (UIView *view in placeholderView.subViews) {
         [view removeFromSuperView];
    }
    UIButton *button = (UIButton *)sender;
    switch(button.tag) {
        case 1:
           [placeholderView addSubView:subView1];
         break;
        case 2:
           [placeholderView addSubView:subView2];
         break;
        case 3:
           [placeholderView addSubView:subView3];
         break;
    }
} 
```

# sencha-touch - Sencha Touch 2.1：点击事件似乎只适用于 img，但不适用于轮播

> ID：14010104
> 
> 赞同：0
> 
> 时间：2012-12-23T10:03:31.207
> 
> 标签：sencha-touch, sencha-touch-2, sencha-touch-2.1

我构建了一个包含容器的轮播，每个容器有两个项目：一个图像和一个数据视图。单击时，我想翻转图像以显示数据视图。我的问题是点击事件不会在正确的元素上触发。它会触发“img”元素，但不会触发 carous。

```
Ext.define('MY.controller.Mycarousel' , {
extend: 'Ext.app.Controller',
requires: [ 'Ext.Img' ],

config: {
    refs: {
        mycarouselView: '#mycarousel',
    },

    control: {
        mycarouselView: {
            activate: 'flipImage',          // works
            tap: 'flipImage',               // doesn't work
        },
        'img': {
            tap: 'flipImage',               // works
        }
    }
}, 
```

如何在轮播视图上获取点击事件？

我也试过：

```
Ext.define('MY.controller.Mycarousel' , {
extend: 'Ext.app.Controller',
requires: [ 'Ext.Img' ],

config: {
    refs: {
        myCarouselDataview: 'dataview'
    },

    control: {
        myCarouselDataview: {
            initialize: 'flipImage',     // fires
            itemsingletap: 'flipImage',  // doesn't fire
            itemtap: 'flipImage',        // doesn't fire
            itemtouchstart: 'flipImage'  // doesn't fire
        },
        'img': {
            tap: 'flipImage', // fires
        },
    }
}, 
```

如果我单击图像，图像被翻转，数据视图出现，显示其 html，但如果我单击它，则不会触发任何事件。这对我来说很神秘...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:55:54.003

点击 carousel 不起作用，因为 Ext.carousel.Carousel 没有任何此类事件：

[http://docs.sencha.com/touch/2-1/#!/api/Ext.carousel.Carousel](http://docs.sencha.com/touch/2-1/#!/api/Ext.carousel.Carousel)

所以点击事件必须由轮播的内容触发，在你的情况下是 img 。

# qt - 使用构建脚本构建 Qt

> ID：14010107
> 
> 赞同：0
> 
> 时间：2012-12-23T10:03:39.203
> 
> 标签：qt, build

我想在我们的构建服务器（Windows）中编译我的 Qt 项目。我想创建一个构建脚本，它将在发布时编译我的项目。有人可以帮我写这个构建脚本吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:52:00.723

您只需要运行 qmake，然后为类 Unix 平台运行 make。对于发布模式添加：

```
CONFIG+=release 
```

到您的 .pro 文件或 qmake 命令。然后（仅当您知道需要时才指定）：

```
path_to_your_qmake/qmake [-spec spec] [CONFIG+=release]
make [-jwhatever] 
```

你就完成了。

# c# - 在 Windows 8 应用程序的 ListView 内添加项目时 UI 冻结

> ID：14010110
> 
> 赞同：0
> 
> 时间：2012-12-23T10:04:19.737
> 
> 标签：c#, listview, windows-8, .net-4.5

我`ListView`用来填充其中的项目。我有一个搜索框，用于向服务器发送请求并获取数据。来自服务器的响应数据将添加到`ListView`. 当我不断向服务器发送请求时，我会不断获取数据并更新`ListView`. 这会在更新时导致 UI 冻结问题。因此，当我在搜索框中输入内容时，UI 会冻结，直到`ListView`更新完成。谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T10:21:25.417

发生这种情况是因为您的主线程在请求​​和响应之间的时间内被阻塞。您应该在单独的线程中运行对服务器的请求

```
 ThreadPool.QueueUserWorkItem(delegate
     {
        //your request here
         listView1.add()
     }); 
```

# matlab - 如果用户没有输入任何内容并在matlab中编辑输入的输入，如何重复输入？

> ID：14010113
> 
> 赞同：2
> 
> 时间：2012-12-23T10:04:54.163
> 
> 标签：matlab

例如我有

```
 x = input('value = ?') 
```

如果用户只是在没有任何输入的情况下按回车，我该如何重复此命令，并且我想知道无论如何我可以编辑我的输入，就像在我键入后按“退格键”一样。

就像我现在有两个输入变量'

```
 x = input('??');
y = input('???'); 
```

如果在提示输入函数 y 时插入了 x 的第一个输入数据，我可以编辑我的第一个输入吗？

真诚地感谢任何愿意提供帮助的人。

对于第一种情况：

我想要一个类似这样的代码

```
 x = input('value = ?');
while x == %%no input%%
    x = input('value = ?'); %prompt the input command again
end 
```

和

```
 while x==error %% I want x in numeric input only
    x = input('value = ?'); %prompt the input command again
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:41:32.070

对于第一种情况：

```
x = input('??'); % if the user just hits 'enter' x is an empty variable
while isempty( x )
   x = input('??');
end 
```

对于更稳健的方法

```
x = str2double( input('Your input here:', 's') );
while ~isnan( x )
    x = str2double( input('Your input here:', 's') );
end 
```

该命令`input('??', 's')`“按原样”返回输入，并且不尝试将其转换为数字。转换是通过命令完成的`str2double`。现在，如果输入**不是**数字（双精度），则`str2double`返回`NaN`. 这可以被`isnan`.

希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T11:42:12.970

重复空白，

```
x=''
while isempty(x)
  x=input('value=');
end 
```

对于非数字，您可以使用类似

```
x=''
while isempty(x)
  try
     x=input('value=')
  catch me
     fprintf('enter a number\n')
  end
end 
```

# emacs - 对emacs键绑定背后的逻辑有很好的参考吗？

> ID：14010114
> 
> 赞同：1
> 
> 时间：2012-12-23T10:05:00.603
> 
> 标签：emacs

是否有一个很好的资源来解释 Emacs 键绑定模式背后的逻辑/良好实践（例如，何时使用 Cx 与 Cc ？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T11:18:24.880

简短的回答：`C-x`通常用于全局有用的命令。虽然`C-c`通常用于主要模式特定的命令。

您可以阅读[Key Binding Conventions](http://www.gnu.org/software/emacs/manual/html_node/elisp/Key-Binding-Conventions.html)以获得一些提示。

或其他一些参考资料：

1.  [Emacs：键绑定设计概述：Mx、Cx、Cc、CM-](http://ergoemacs.org/emacs/emacs_keybinding_overview.html)
2.  [是否有为自定义命令保留的任何 emacs 组合键？](https://stackoverflow.com/questions/1144424/are-there-any-emacs-key-combinations-reserved-for-custom-commands/)
3.  [Emacs：如何选择好的自定义键绑定？](https://superuser.com/questions/214295/emacs-how-to-choose-good-custom-key-bindings)

# amazon-web-services - 带有 s3fs 和 fuse 的 Amazon S3，传输端点未连接

> ID：14010115
> 
> 赞同：26
> 
> 时间：2012-12-23T10:05:19.900
> 
> 标签：amazon-web-services, amazon-s3, mount, s3fs

Redhat with Fuse 2.4.8
S3FS 版本 1.59

从 AWS 在线管理控制台，我可以浏览 S3 存储桶上的文件。
当我登录（ssh）到我的 /s3 文件夹时，我无法访问它。
还有命令：“/usr/bin/s3fs -o allow_other bucket /s3”
返回：s3fs：无法访问 MOUNTPOINT /s3：传输端点未连接

可能是什么原因？我该如何解决？这个文件夹需要卸载然后重新安装吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-23T11:53:52.733

好吧，解决方案很简单：卸载并安装目录。`transport endpoint is not connected`通过卸载 s3 文件夹然后再次安装解决了 该错误。

**卸载命令**

```
fusermount -u /s3 
```

**挂载命令**

```
/usr/bin/s3fs -o allow_other bucketname /s3 
```

同步需要 3 分钟。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-23T10:22:58.523

我不建议通过*快速和肮脏*的保险丝驱动器访问 s3。S3 并不是真正设计为充当文件系统， [请参阅此 SOF 答案以获得很好的总结](https://stackoverflow.com/questions/10801158/how-stable-is-s3fs-to-mount-an-amazon-s3-bucket-as-a-local-directory)

您可能永远不敢仅仅因为它包含文件而挂载 Linux 镜像网站。这是可比的

让您的进程将文件写入本地 fs，然后使用 cron 和 s3cmd 等工具同步您的 s3 存储桶

如果你坚持使用 s3fs..

```
sudo echo "yourawskey:yourawssecret" > /etc/passwd-s3fs
sudo chmod 640 /etc/passwd-s3fs

sudo /usr/bin/s3fs yours3bucket /yourmountpoint -ouse_cache=/tmp 
```

验证`mount`

来源：[http ://code.google.com/p/s3fs/wiki/FuseOverAmazon](http://code.google.com/p/s3fs/wiki/FuseOverAmazon)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-16T17:07:53.990

我之前使用的是旧的安全凭证。重新生成安全凭证（AccessId、AccessKey）解决了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-21T23:04:36.563

这对我来说是存储桶的权限问题。在 AWS UI 中为“每个人”添加“列表”和“查看权限”允许存储桶访问。

如果您不想允许所有人访问，请确保您使用与有权访问 S3Fuse 中的存储桶的用户关联的 AWS 凭证

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-06T14:35:12.700

我遇到了这个问题，我发现存储桶只能有小写字符。尝试通过[https://BUCKET1.s3.amazonaws.com](https://BUCKET1.s3.amazonaws.com)或[https://bucket1.s3.amazonaws.com](https://bucket1.s3.amazonaws.com)访问名为“BUCKET1”的存储桶均会失败，但如果存储桶名为“bucket1”，则[https： //bucket1.s3.amazonaws.com](https://bucket1.s3.amazonaws.com)会成功。

因此，在 s3fs 命令行中为您小写名称是不够的，您还必须以小写形式创建存储桶。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-11T11:16:24.513

如果您已经在自动挂载目录的 /etc/fstab 中进行了更改，只需卸载目录并重新启动服务器。

卸载 `sudo umount /dir`

在 /etc/fstab 中应该有这些行。然后只有它会在重新启动后自动挂载

```
s3fs#bucketname /s3 fuse allow_other,nonempty,use_cache=/tmp/cache,multireq_max=500,uid=505,gid=503 0 0 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-12T00:14:46.103

此问题可能是由于附加到 IAM 用户的策略所致。确保 IAM 用户具有 AdministratorAccess。

我遇到了同样的问题，通过将策略更改为 AdministratorAccess 问题得到了解决。

# sql - order by 后跟从属 order by

> ID：14010120
> 
> 赞同：3
> 
> 时间：2012-12-23T10:07:27.797
> 
> 标签：sql, sql-server, tsql

我有一个表格，其中包含如下所示的部分数据。我已经在 edition_id 上完成了订购。现在还需要订购 laungauge_id，这取决于 edition_id 的值。

*   Edition_id 是指出版报纸的城市。
*   Language_id 是指报纸出版的不同语言。

所以假设`edition_id = 5`它意味着新德里。
新德里`language_id`是 13（英语）、5（印地语）、1（泰卢固语）、4（乌尔都语）。

我想要为新德里显示，首先显示所有英文文章，然后是印地语，然后是泰卢固语，然后是乌尔都语。

> 如果 edition_id=1 那么 language_id 的顺序应该是**13,1,2。**

相似地 ，

> 如果 edition_id=5 那么 language_id 的顺序应该是**13,5,1,4**

现在我所拥有的是

```
Edition_id | Language_id
1             1
1             2
1             13
1             1
1             13 
1             2
5             4
5             1
5             1
5             4
5             13
5             5
5             13 
```

需要什么

```
Edition_id | Language_id
1             13
1             13
1             1
1             1
1             2 
1             2
5             13
5             13
5             5
5             1
5             1
5             4
5             4 
```

这个怎么做 ？请帮忙。

有没有可能

```
Select * from <table>
order by edition_id ,
            case when edition=6 then <order specified for language_id ie 13,5,1,4> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T10:19:44.003

我会创建一个补充排名表。然后我会加入以提供您的排序顺序。例如：

```
EDITION_SORT_ORDER

EDITION_ID  LANGUAGE_ID  RANK
----------  -----------  ----
1           13           1
1           1            2
1           2            3
5           13           1
5           5            2
5           1            3
5           4            4 
```

在查询中使用此表可能如下所示：

```
SELECT E.EDITION_ID, E.LANGUAGE_ID
FROM <TABLE> E LEFT OUTER JOIN EDITION_SORT_ORDER S ON
  E.EDITION_ID = S.EDITION_ID AND
  E.LANGUAGE_ID = S.LANGUAGE_ID
ORDER BY S.RANK 
```

这样您将来可以添加其他规则，并且不会造成 CASE 逻辑的混乱。

或者，如果您想避免 JOIN，您可以创建一个存储函数，该函数执行类似的查找并返回一个排名（基于传递的 EDITION_ID 和 LANGUAGE_ID 参数）。

如果您必须使用 CASE，那么我会将其限制在一个函数中，以便您可以在其他地方重新使用该逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T10:24:43.447

如果它背后没有数学逻辑，我会插入另一列可用于正确排序。
如果你不能这样做，你可以简单地输入这样的关系规则：

```
Order By Edition_Id,
case Edition_id
    when 1 then
        case Language_id
            when 13 then 1
            when 1 then 2
            when 2 then 3
        end
    when 5 then
        case Language_id
            when 13 then 1
            when 5 then 2
            when 1 then 3
            when 4 then 4
        end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T10:33:20.993

没有固定的顺序列，你可以这样做，但逻辑是不可理解的。
假设第一个标准是 Language_id 的长度，
第二个是 Edition_id= Language_id，
其余是 Language_id 的顺序，它可以或以这种方式工作：

```
Declare @t table(Edition_id  int, Language_id int)
insert into @t values
(1,             1),
(1,             2),
(1,             13),
(1,             1),
(1,             13), 
(1,             2),
(5,             4),
(5,             1),
(5,             1),
(5,             4),
(5,             13),
(5,             5),
(5,             13);

Select * from @t
order by Edition_id,Case when len (Cast(Language_ID as Varchar(10)))=1 then '1' else '0' end
                   +case when Edition_id=Language_id  then '0' else '1' end
                   ,Language_ID 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T18:35:36.723

您可能已经考虑过这一点，但如果您想要的排序始终基于语言的实际字母名称，那么通常会有一个包含语言描述的表格，您可以加入该表格然后进行排序。我根据你下面的报价。

> ...首先是英语文章，然后是印地语，然后是泰卢固语，然后是乌尔都语。

```
SELECT E.EDITION_ID, E.LANGUAGE_ID, LN.LANGUAGE_NAME
FROM <TABLE> E LEFT OUTER JOIN <LANGUAGE_NAMES> LN ON
E.LANGUAGE_ID = LN.LANGUAGE_ID
ORDER BY 1, 3 
```

# jquery - jquery fancybox 只滚动fancybox，背景是静态的

> ID：14010122
> 
> 赞同：0
> 
> 时间：2012-12-23T10:08:02.373
> 
> 标签：jquery, fancybox

我正在使用效果很好的fancybox，但是，如果我有一个使用ajax 选择器加载的页面，我希望浏览器滚动条只滚动fancybox 页面，并让背景保持静态，这可能吗？

现实世界的例子：

我有一长页链接，每个链接都在fancybox中打开...当用户单击链接并打开一个长页面时，当他们向下滚动以阅读fancybox封闭页面时，背景也在滚动，因此他们失去了他们的放置在父文档中。

# c# - 我可以为此使用 DependencyProperty 吗？

> ID：14010123
> 
> 赞同：-1
> 
> 时间：2012-12-23T10:08:02.853
> 
> 标签：c#, wpf, wpfdatagrid, dependency-properties

我有一个`ObservableCollection`with `Students`。每个学生都有一个成绩属性。我希望`AverageGrade`（所有学生的）财产无需按下按钮或创建计时器即可工作。如何在`DependencyProperty`此处使用此只读`AverageGrade`属性？

# 学生.cs

```
using System.ComponentModel;
using System.Windows;
using System;

namespace WpfApplication17.Models
{
    class Student : INotifyPropertyChanged
    {
        #region Constructors

        public Student(string firstName, string lastName, double grade)
                                {
            this.FirstName = firstName;
            this.LastName = lastName;
                this.Grade = grade;
        }

                        #endregion

        #region Properties

                private string _firstName;

        public string FirstName
        {
            get { return _firstName; }
            set
            {
                _firstName = value;
                OnPropertyChanged("FirstName");
            }
        }

        private string _lastName;

        public string LastName
        {
            get { return _lastName; }
                            set
                {
                _lastName = value;
                OnPropertyChanged("LastName");
                    }
            }

        private double _grade;

        public double Grade
        {
        get { return _grade; }
        set
        {
            _grade = value;
            OnPropertyChanged("Grade");
        }
    }

    #endregion

    #region PropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    #endregion
} 
```

}

# 主窗口视图模型

```
using WpfApplication17.ViewModel;
using System.Collections.ObjectModel;
using WpfApplication17.Models;

namespace WpfApplication17.ViewModels
{
    class MainWindowViewModel : ViewModelBase
    {
        #region Constructors

        public MainWindowViewModel()
        {
            Students = new ObservableCollection<Student>();
            Students.Add(new Student("Frank", "Sinatra", 7));
            Students.Add(new Student("Bart", "Simpson", 6));
        }

        #endregion

        #region Properties

        private ObservableCollection<Student> _students;

        public ObservableCollection<Student> Students
        {
            get { return _students; }
            set
            {
                _students = value;
                OnPropertyChanged("Students");
            }
        }

        public double AverageGrade
        {
            get { return GetAverageGrade(); }
        }

        public double GetAverageGrade()
        {
            double sum = 0;

            foreach (Student s in Students)
                sum += s.Grade;

            return sum / (double)Students.Count;
        }

        #endregion
    }
} 
```

# 主窗口.xaml

```
<Window x:Class="WpfApplication17.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <StackPanel Orientation="Horizontal">
        <DataGrid ItemsSource="{Binding Students}" />
        <Label Content="Average Grade:" />
        <Label Content="{Binding AverageGrade}" />
    </StackPanel>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:40:22.963

为什么你想要 DP 似乎正常的 VM 属性会处理这个问题。您需要的是，每当添加新学生或更改现有学生的成绩时，必须更新 AverageGrade。

也许试试这种方法：

```
 class MainWindowViewModel 
{
    #region Constructors

    public MainWindowViewModel()
    {
        Students = new ObservableCollection<Student>();
        Students.Add(new Student("Frank", "Sinatra", 7));
        Students.Add(new Student("Bart", "Simpson", 6));

        Students.CollectionChanged += (s, e) => AverageGrade = this.GetAverageGrade();

        foreach (var student in Students)
        {
            student.PropertyChanged += OnStudentPropertyChanged;
        }

        AverageGrade = this.GetAverageGrade();
    }

    private void OnStudentPropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        if (e.PropertyName == "Grade")
        {
            AverageGrade = this.GetAverageGrade();
        }
    }

    #endregion

    #region Properties

    private ObservableCollection<Student> _students;

    public ObservableCollection<Student> Students
    {
        get { return _students; }
        set
        {
            _students = value;
            OnPropertyChanged("Students");
        }
    }

    private double average;
    public double AverageGrade
    {
        get
        {
            return this.average;
        }
        set
        {
            this.average = value;
            OnPropertyChanged("AverageGrade");
        }
    }

    public double GetAverageGrade()
    {
        return this.Students.Sum(s => s.Grade) / Students.Count;
    }

    #endregion

    public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

# c# - html到c#对象，递归函数？

> ID：14010125
> 
> 赞同：0
> 
> 时间：2012-12-23T10:08:09.317
> 
> 标签：c#, html, dom, object, html-agility-pack

我正在尝试将 html 文档转换为 c# 对象。我在有序列表中有一个示例名称列表，如下所示。我正在使用 Html 敏捷包。

```
<ol>
    <li>Heather</li>
    <li>Channing</li>
    <li>Briana</li>
    <li>Amber</li>
    <li>Sabrina</li>
    <li>Jessica
        <ol>
            <li>Melody</li>
            <li>Dakota</li>
            <li>Sierra</li>
            <li>Vandi</li>
            <li>Crystal</li>
            <li>Samantha</li>
            <li>Autumn</li>
            <li>Ruby</li>
        </ol></li>
    <li>Taylor</li>
    <li>Tara</li>
    <li>Tammy</li>
    <li>Laura</li>
    <li>Shelly</li>
    <li>Shantelle</li>
    <li>Bob and Alice
      <ol>
        <li>Courtney</li>
        <li>Misty</li>
        <li>Jenny</li>
        <li>Christa</li>
        <li>Mindy</li>
      </ol></li>
    <li>Noel</li>
    <li>Shelby</li>
</ol> 
```

这些是我创建的用于表示名称列表的对象。即人们和他们的孩子。

```
public class PeopleList {
    public List<Person> People {get; set;}
}

public class Person {
    public string Name {get; set;}
    public PeopleList Children {get; set;}
} 
```

我在想，要创建这些对象，最好使用递归函数。任何人都可以提供有关如何将 html 转换为 c# 对象的任何想法吗？

阿布。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T11:51:35.863

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var list = Recurse(doc.DocumentNode); 
```

* * *

```
List<Person> Recurse(HtmlAgilityPack.HtmlNode root)
{
    var ol = root.Element("ol");
    if (ol == null) return null;

    return ol.Elements("li")
                .Select(li => new Person
                {
                    Name = li.FirstChild.InnerText.Trim(),
                    Children = Recurse(li)
                })
                .ToList();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:12:21.627

我会研究 HTMLAgilityPack [http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)

我没有专门为此使用它，但它非常适合解析 HTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T12:25:33.723

为了好玩 - 或者如果你真的想要一个包含人员列表的 PeopleList 列表：p - 你可以做类似的事情（你发布的代码不需要 HtmlAgilityPack）：

```
namespace StackFun
{
    using System.Collections.Generic;
    using System.Linq;
    using System.Xml.Linq;

    public class PeopleList
    {
        public List<Person> People { get; set; }
    }

    public class Person
    {
        public string Name { get; set; }
        public PeopleList Children { get; set; }
    }

    class Program
    {
        static IEnumerable<PeopleList> GetChildren(PeopleList parent, IEnumerable<XElement> children)
        {
            parent.People = new List<Person>();
            foreach (var child in children)
            {
                var person = new Person
                {
                    Name = ((XText)child.FirstNode).Value.Trim(new[] { ' ', '\r', '\n' }),
                };
                parent.People.Add(person);
                foreach (var childrenOf in child.Elements("ol").SelectMany(BuildFromXml))
                {
                    person.Children = childrenOf;
                }
            }
            yield return parent;

        }

        static IEnumerable<PeopleList> BuildFromXml(XElement node)
        {
            return GetChildren(new PeopleList(), node.Elements("li"));
        }

        static void Main(string[] args)
        {
            const string xml = @"<ol>
            <li>Heather</li>
            <li>Channing</li>
            <li>Briana</li>
            <li>Amber</li>
            <li>Sabrina</li>
            <li>Jessica
                <ol>
                    <li>Melody</li>
                    <li>Dakota</li>
                    <li>Sierra</li>
                    <li>Vandi</li>
                    <li>Crystal</li>
                    <li>Samantha</li>
                    <li>Autumn</li>
                    <li>Ruby</li>
                </ol></li>
            <li>Taylor</li>
            <li>Tara</li>
            <li>Tammy</li>
            <li>Laura</li>
            <li>Shelly</li>
            <li>Shantelle</li>
            <li>Bob and Alice
              <ol>
                <li>Courtney</li>
                <li>Misty</li>
                <li>Jenny</li>
                <li>Christa</li>
                <li>Mindy</li>
              </ol></li>
            <li>Noel</li>
            <li>Shelby</li>
        </ol>";

            var doc = XDocument.Parse(xml);
            var listOfPeople = BuildFromXml(doc.Root).ToList();
        }
    }
} 
```

你可能想要的（猜你没有指定）是一个你可以使用的人员和他们的孩子的列表：

```
static IEnumerable<Person>Populate(IEnumerable<XElement> children)
{
     foreach (var child in children)
     {
          var person = new Person
          {
              Name = ((XText)child.FirstNode).Value.Trim(new[] { ' ', '\r', '\n' }),
              Children = new PeopleList()

           };
           person.Children.People = new List<Person>();
           foreach (var childrenOf in child.Elements("ol").SelectMany(BuildFromXml))
           {
               person.Children.People.Add(childrenOf);
           }
           yield return person;
     }

}

static IEnumerable<Person> BuildFromXml(XElement node)
{
    return Populate(node.Elements("li"));
} 
```

如果您想（或需要）使用 HtmlAgilityPack，代码可能如下所示：

```
class Program
{
    static IEnumerable<Person> Populate(IEnumerable<HtmlNode> children)
    {
        foreach (var child in children)
        {
            var person = new Person
            {
                Name = child.InnerText.Split(new char[] { '\r', '\n' })[0].Trim(),
                Children = new PeopleList()

            };
            person.Children.People = new List<Person>();
            foreach (var childrenOf in child.Elements("ol").SelectMany(BuildFromHtml))
            {
                person.Children.People.Add(childrenOf);
            }
            yield return person;
        }

    }
    static IEnumerable<Person> BuildFromHtml(HtmlNode node)
    {
        return Populate(node.Elements("li"));
    }

    static void Main(string[] args)
    {
        const string html = @"<ol>
            <li>Heather</li>
            <li>Channing</li>
            <li>Briana</li>
            <li>Amber</li>
            <li>Sabrina</li>
            <li>Jessica
                <ol>
                    <li>Melody</li>
                    <li>Dakota</li>
                    <li>Sierra</li>
                    <li>Vandi</li>
                    <li>Crystal</li>
                    <li>Samantha</li>
                    <li>Autumn</li>
                    <li>Ruby</li>
                </ol></li>
            <li>Taylor</li>
            <li>Tara</li>
            <li>Tammy</li>
            <li>Laura</li>
            <li>Shelly</li>
            <li>Shantelle</li>
            <li>Bob and Alice
              <ol>
                <li>Courtney</li>
                <li>Misty</li>
                <li>Jenny</li>
                <li>Christa</li>
                <li>Mindy</li>
              </ol></li>
            <li>Noel</li>
            <li>Shelby</li>
        </ol>";

        var doc = new HtmlDocument();
        doc.LoadHtml(html);
        var listOfPeople = BuildFromHtml(doc.DocumentNode.FirstChild).ToList();
    }
} 
```

# android - Android Form：如何为空字段添加表单验证？

> ID：14010126
> 
> 赞同：0
> 
> 时间：2012-12-23T10:08:35.677
> 
> 标签：android, forms, field

我是 Android 开发的新手。我试图从 android SDK 的**登录表单**中复制代码，但没有得到任何结果。谁能帮助我，我怎样才能给文本字段“此字段是必需的”错误？还有一些解释会很棒，我真的不了解**登录表单**代码中的任何内容。没有**android:onClick**之类的，系统怎么会知道我点击了登录按钮？还有更多问题......有关更多详细信息，请参见图片：

[![](../Images/76309eb668ba9038d880319fa822b27f.png)](https://i.stack.imgur.com/Y72Mu.png)
[（来源：[coredogs.com](http://coredogs.com/content_media/lessons/servercore/restricting-access/logging-in/log-in-empty-fields-errors.png)）]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-13T23:01:30.770

我知道这个问题有一个可接受的错误，但从您的图像 EditText.setError() 可能更合适 - 而不是向用户发送垃圾邮件 Toasts 或一次只对一个字段提供反馈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T10:29:40.680

创建一个布局文件，您可以在其中制作 2 个 EditText 框。然后将 Button 放在底部并在该按钮上进行验证。像 EditText 不能等于“”。

像这样在 Function 中对 EditText 进行验证。

```
public void bttoncall(View view) {

EditText usernameEditText = (EditText) findViewById(R.id.editUsername);
sUsername = usernameEditText.getText().toString();
if (sUsername.matches("")) {
// Show Toast
 Toast.makeText(this, "You did not enter a username", Toast.LENGTH_SHORT).show();
 // Show Error on edittext
 usernameEditText.setError("Your message");
 return;
 } 
```

并从您的按钮 Onclick 调用该函数。因此，只要按下该按钮，您的函数就会调用。

```
 <Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Tap Me"
    android:onClick="buttoncall" /> 
```

# asp.net - WAT 与 IIS 管理器在 asp.net 应用程序中管理配置

> ID：14010129
> 
> 赞同：0
> 
> 时间：2012-12-23T10:09:25.183
> 
> 标签：asp.net, asp.net-mvc, web-services, iis, configuration

创建 asp.net (mvc 3) 应用程序时，我是否需要使用 IIS 管理器来设置角色、成员资格和配置文件，或者我可以在 Visual Studio 网站管理工具中嵌入所有这些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:05:44.127

如果您想在 IIS 上管理角色、成员资格和配置文件，您将需要开发管理页面，因此最好的方法是在 VS 环境中使用站点管理工具。

# json - 如何在 CoffeeScript 中从 JSON 中获取数据？

> ID：14010133
> 
> 赞同：-5
> 
> 时间：2012-12-23T10:09:54.060
> 
> 标签：json, coffeescript

> **可能重复：**
> [如何使用 CoffeeScript 从 JSON 中提取特定数据？](https://stackoverflow.com/questions/14007234/how-to-extract-specific-data-from-json-using-coffeescript)

我想从大量 JSON 字符串中获取特定的数据。如果在此处发布，整个字符串将超过 10 页，因此我只包含一个示例片段：

```
 { name: '',
     keys:
      [ 'statType',
        'count',
        'dataVersion',
        'value',
        'championId',
        'futureData' ],
     object:
      { statType: 'TOTAL_SESSIONS_PLAYED',
        count: { value: 5 },
        dataVersion: 0,
        value: { value: 5 },
        championId: { value: 31 },
        futureData: null },
     encoding: 0 } 
```

如何使用 CoffeeScript 来：

1.  解析该字符串以定位具有特定值的对象，例如`TOTAL_SESSIONS_PLAYED`，
2.  `value`从该对象（字段）中获取数值，并且
3.  理想情况下，将该值附加到外部文本文件中？

我几乎是一个超级菜鸟程序员。基本上，在本例中，我如何`5`从标记为 的对象中获取该值`TOTAL_SESSIONS_PLAYED`，并使用 CoffeeScript 将其附加到文本文件中？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-23T11:58:38.553

无论您是在[浏览器](https://developer.mozilla.org/en-US/docs/Using_native_JSON)中还是在[Node](https://stackoverflow.com/a/5726756/659910)中执行此操作，您都应该能够将 JSON 字符串传递给 JSON.parse 并选择您想要的值。然后，您可以使用 Node 的 fs 模块附加到文件，如下所示：[https](https://stackoverflow.com/a/11267583/659910) ://stackoverflow.com/a/11267583/659910 。

```
fs = require 'fs'

# Sample JSON string.
json = '{ "statType": "TOTAL_SESSIONS_PLAYED", "count": { "value": 5 }, "dataVersion": 0 }'

data = JSON.parse(json)
fs.appendFile('/tmp/data.txt', data.count.value, (error) -> throw error if error) 
```

# php - html 中的自动行跨度

> ID：14010135
> 
> 赞同：-1
> 
> 时间：2012-12-23T10:10:06.630
> 
> 标签：php

我有这个sql结果：

SQL：

```
+-name-+---count---+
+ cat  +  5        +
+ dog  +  6        +
+------------------+ 
```

猫的数量是 5，狗的数量是 6。我想从这个结果中创建具有自动行跨度的表，在此代码行跨度必须获取猫的数量并获取狗的 HTML 数量：

```
<table>
  <th>NAME</th>
  <th>COUNT</th>
  WHILE ($sql=mysql_fetch_array($result))
  {
   <tr>
      <td rowspan='$sql['cnt']'> $sql['name']; </td> 
      <td> $cnt++; </td>
   <tr>
   $cnt++;
  }
</table> 
```

![截屏](../Images/f0b40dac84ba59975f8c28b07c79dc2b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:28:39.897

您的代码和图像不匹配，因为它们被颠倒了。此外，您正在将 php 代码与 html 混合。

尝试类似的东西 -

```
WHILE ($sql=mysql_fetch_array($result))
  {
   echo '<tr>';
      echo '<td rowspan="'.$sql['count'].'" valign="center">'.$sql['name'].'</td>';
      for($i=1;$i<=$sql['count'];$i++){
      echo '<td>'.$i.'</td>';}
   echo '<tr>';
  } 
```

# api - Twitter API user_timeline 未检索所有推文

> ID：14010137
> 
> 赞同：1
> 
> 时间：2012-12-23T10:10:45.213
> 
> 标签：api, twitter, wordpress

出于某种原因，当我转到此链接插入 ABCSMinistries 屏幕名称时，我只得到 1 个结果： [http ://api.twitter.com/1/statuses/user_timeline.json?screen_name=ABCSMinistries&count=4&exclude_replies=$exclude_replies](http://api.twitter.com/1/statuses/user_timeline.json?screen_name=ABCSMinistries&count=4&exclude_replies=%24exclude_replies)

我已经研究并遇到了这个链接以及相同的结果 [https://api.twitter.com/1/statuses/user_timeline/ABCSMinistries.json?callback=twitterCallback2&count=4](https://api.twitter.com/1/statuses/user_timeline/ABCSMinistries.json?callback=twitterCallback2&count=4)

但是当我尝试任何其他屏幕名称时，我得到了预期的 4 个结果（除非用户没有四个。ABCSMinistries 肯定有超过 1 个（准确地说是 32 个）所以有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T21:29:41.083

您没有看到用户所做的转推。您对 API 的调用需要包括

```
include_rts=1 
```

[请参阅https://dev.twitter.com/docs/api/1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)上的文档

# javascript-events - 使用 .on() 绑定 Jquery 事件

> ID：14010138
> 
> 赞同：3
> 
> 时间：2012-12-23T10:10:47.240
> 
> 标签：javascript-events, event-handling, jquery

有人可以向我解释为什么这样做：

```
parentBox.on('click', '.close', function() {
   parentBox.fadeOut();                  
   return false; 
 }); 
```

但这不会：

```
var closeBox = $('.close');
parentBox.on('click', closeBox, function() {
   parentBox.fadeOut();
   return false; 
}); 
```

当缓存`'.close'`到. 时`var`，无论我在父元素中单击的哪个位置，它都会淡出，就好像事件处理程序附加到`parentBox`而不是`'.close'`.

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T10:21:48.490

这不起作用，因为

```
.on( events [, selector] [, data], handler(eventObject) ) 
```

第二个参数始终是**选择器**（字符串类型），如果需要绑定到特定对象使用

```
 closeBox.bind('click',function(){/* code here */}) 
```

# javascript - jQuery Mobile：页面事件触发的顺序是什么？

> ID：14010140
> 
> 赞同：7
> 
> 时间：2012-12-23T10:11:08.113
> 
> 标签：javascript, jquery, events, jquery-mobile, cordova

我必须为应用程序快速构建原型，并且我想确切地知道在哪里插入各种应用程序逻辑。

在使用 PhoneGap 和 jQueryMobile 时，您能否迭代事件和它们触发的顺序？

对以下事件/顺序有一个清晰的了解会很棒：

*   A：***当您第一次打开应用程序时***。
*   B：***当你换页***的时候（我猜有些事件不会再有了）。
*   C：***当您“最小化”应用程序***时（例如：当您单击应用程序中的链接以发送短信/通话时，或者您只需按下设备的主页按钮）。
*   D：***当您恢复应用程序时***（例如：点击“返回”按钮，或者只是
    以某种方式“最大化”它）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-23T10:42:21.617

# 介绍

在这里找到的所有信息也可以在我的博客[**文章**](http://www.gajotres.net/page-events-order-in-jquery-mobile/)中找到，您还可以找到工作示例。

## - A：初始化

***A1 - 使用deviceReady***事件初始化 Phonegap 应用程序/框架。

*例子：*

```
document.addEventListener("deviceReady", yourCallbackFunction, false);

function deviceReady() {

} 
```

更多关于暂停甚至可以在这里找到：http: [//docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html)

A2 - 使用***mobileinit***事件初始化 jQuery Mobile 应用程序/框架。

*例子：*

```
$(document).on("mobileinit", function () {

}); 
```

如何检查两个框架是否成功加载：[https ://stackoverflow.com/a/12821151/1848600](https://stackoverflow.com/a/12821151/1848600)

## - B：换页

首先可以在这里找到所有事件：http: [//jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

假设我们有一个页面 A 和一个页面 B，这是一个卸载/加载顺序：

```
1\. page B - event pagebeforecreate

2\. page B - event pagecreate

3\. page B - event pageinit

4\. page A - event pagebeforehide

5\. page B - event pagebeforeshow

6\. page A - event pageremove

7\. page A - event pagehide

8\. page B - event pageshow 
```

## - C：最小化应用程序

Phonegap 通过***暂停***事件来处理这个问题。

*例子：*

```
document.addEventListener("pause", yourCallbackFunction, false); 
```

更多关于暂停甚至可以在这里找到：http: [//docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html)

## - D：恢复应用程序

Phonegap 通过***恢复***事件来处理这个问题。

*例子：*

```
document.addEventListener("resume", yourCallbackFunction, false); 
```

更多关于暂停甚至可以在这里找到：http: [//docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html)

## - 最后的话

几乎没有其他 phonegap 和 jQM 事件，您可以在上面提到的链接中找到它们。

你不应该在 jQM 应用程序中使用的东西：

```
$(document).ready(function(){

}); 
```

原因：

> 在 jQuery 中学习的第一件事是调用 $(document).ready() 函数中的代码，以便在加载 DOM 后立即执行所有内容。但是，在 jQuery Mobile 中，Ajax 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序仅针对第一页执行。要在加载和创建新页面时执行代码，您可以绑定到 pageinit 事件。此事件在本页底部有详细说明。

# javascript - 如何将模型对象提取到 .csv 文件中

> ID：14010142
> 
> 赞同：0
> 
> 时间：2012-12-23T10:11:17.500
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc, asp.net-mvc-3

我有以下看法：-

```
@model IEnumerable<MvcApplication4.Models.customers> 

@{ 
    ViewBag.Title = "customer"; 
} 

<h3>Avialble cusotmer</h3> 
<table id ="avilalbe"> 
    <tr> 
        <th> 
           @Html.CheckBox("ORG_NAME ", true) NAME 
        </th> 
<th> 
           @Html.CheckBox("description ", true) Description 
        </th> 
    </tr> 

@foreach (var item in Model) { 
    <tr> 

        <td> 
            @Html.DisplayFor(modelItem => item.customer_NAME) 
        </td> 
<td> 
            @Html.DisplayFor(modelItem => item.description) 
        </td> 

    </tr> 
} 

   <a href=""> Extract To Excel </a> 
```

如何根据复选框中的用户选择将模型数据提取到 .csv 中（包括名称和描述列或仅包括其中一个）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T10:22:40.820

如果我理解这个问题 - 只需使用对象转储器来解析值和名称，但老实说，我无法 100% 从上述问题中准确说出您想要什么。

Objectdumper 可在此处获得：http: [//blogs.msdn.com/b/ericwhite/archive/2008/08/14/object-dumper-an-invaluable-tool-for-writing-code-in-the-functional-programming -style.aspx](http://blogs.msdn.com/b/ericwhite/archive/2008/08/14/object-dumper-an-invaluable-tool-for-writing-code-in-the-functional-programming-style.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T11:11:51.713

创建一个方法（类似的东西）

```
private static string GetCsvString(IEnumerable<Customer> customers, string separator, params string[] fields)
{
    var csvString = new StringBuilder();
    var propertyInfos = typeof (Customer).GetProperties().Where(p => fields.Contains(p.Name)).ToList();
    foreach (var customer in customers)
    {
        var currentCustomer = customer;
        csvString.AppendLine(string.Join(separator, propertyInfos.Select(p => p.GetValue(currentCustomer, null).ToString())));
    }

    return csvString.ToString();
} 
```

然后使用它：

```
var csvString = GetCsvString(yourSetOfCustomers, ";", "name", "description");
File.WriteAllText("yourPath.csv", csvString); 
```

如果您只需要描述，您将调用：

```
GetCsvString(yourSetOfCustomers, ";", "description"); 
```

我假设您知道如何确定您需要哪些字段（根据您对我的评论的回答）。希望你明白了。

# c++ - 使用 C++、cin、cout、线程和 sync_with_stdio 损坏的输出

> ID：14010147
> 
> 赞同：11
> 
> 时间：2012-12-23T10:12:30.127
> 
> 标签：c++, multithreading, input, corruption, output

我正在尝试用 C++ 编写一个程序，以尽可能快的方式处理大量数据包。所有来自标准的数据包都应该被尽可能快地读取，从池中发送到一个线程进行处理，然后处理到将数据包写入标准输出的输出线程。

当您在 C++ 中使用标准输入和输出时，建议在任何输入或输出之前调用[std::ios_base::sync_with_stdio(false)](http://en.cppreference.com/w/cpp/io/ios_base/sync_with_stdio)函数。在某些环境中，这实现了很大的加速，尽管您应该避免在调用后使用标准 C 函数进行输入/输出。

好吧，这似乎在单个线程中完美运行。但正如我所说，我的意图是使用一个线程进行输入，一个线程用于输出，多个线程进行并行处理。我观察到输出存在一些问题。这是输出线程（非常简化）：

```
void PacketDispatcher::thread_process_output(OutputQueue& output_queue) {
    std::vector<Packet> packet_list;
    while(output_queue.get(packet_list)) {
        for (const auto& packet: packet_list) {
            std::cout << "Packet id = " << packet.id << "\n";
        }
    }
    std::cout.flush();
} 
```

如果我使用*std::endl*而不是*"\n"*则损坏较少，但 std::endl 会强制刷新流，在这种情况下会影响性能（问题没有解决，只是最小化了）。

这是程序中使用 std::cout 的唯一一点，但是如果我在程序开始时调用[std::ios_base::sync_with_stdio(false)](http://en.cppreference.com/w/cpp/io/ios_base/sync_with_stdio)，我会得到明显的加速，但我的输出总是在某些情况下被破坏方法：

```
Packet id = Packet id = 4
Packet id = 5
Packet id = 6
Packet id = 7
Packet id = 8
Packet id = 9
Packet id = 10 
```

那么，问题出在哪里？C++ 不能使用快速标准输入/输出进行多线程吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-23T10:12:30.127

我终于找到了罪魁祸首。如果您在 Internet 上搜索，很多网站都建议使用 sync_with_stdio 调用，但他们不谈论线程。

其他站点谈论 iostreams 和线程，例如[这个，但这并不能解释为什么当我](https://stackoverflow.com/questions/6374264/is-cout-synchronized-thread-safe)**只在一个线程中使用 std::cin 和****在它自己的线程**中使用std::cout时我得到损坏的输出。

问题在于，在内部，std::cin 输入线程正在调用 std::cout 以刷新其缓冲区，但由于流未与 mutex 或类似的东西同步，因此输出已损坏。如果缓冲区在做不同的事情，我为什么要同步它们？为什么 std::cin 搞乱了 std::cout？

在 C++ 中，默认情况下，标准流 cin、cerr 和 clog 绑定到 cout。这是什么意思？这意味着当您尝试从 cin 读取时，首先它会强制刷新到 cout。有时这很有用，您可以[在此处](https://stackoverflow.com/questions/2704752/flushing-of-cout-prior-to-reading-input-using-cin-why)阅读。

但就我而言，这引起了一些严重的问题，那么，如何解开流？[**使用tie 方法**](http://en.cppreference.com/w/cpp/io/basic_ios/tie)非常容易：

```
std::ios_base::sync_with_stdio(false);

std::cin.tie(nullptr);
std::cerr.tie(nullptr); 
```

或者，如果您的编译器不支持 C++11：

```
std::ios_base::sync_with_stdio(false);

std::cin.tie(static_cast<ostream*>(0));
std::cerr.tie(static_cast<ostream*>(0)); 
```

随着这个改变我的输出现在是正确的：

```
Packet id = 1
Packet id = 2
Packet id = 3
Packet id = 4
Packet id = 5
Packet id = 6
Packet id = 7
Packet id = 8
Packet id = 9
Packet id = 10 
```

而且因为它避免每次使用 std::cin 时都进行刷新，所以它也更快:-)

# php - 我想使用codeigniter将一个文本字段中的值移动到一个html页面中的另一个文本字段

> ID：14010152
> 
> 赞同：-2
> 
> 时间：2012-12-23T10:12:55.833
> 
> 标签：php, javascript, html, ajax, codeigniter

我想使用codeigniter将一个文本字段中的值移动到一个html页面中的另一个文本字段。在这里，我们可以在第一个文本区域中写一些东西或从 db 中获取一些东西。我不明白该怎么做？？

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:49:11.653

虽然您的问题还不清楚，但这可能有助于您入门。

您可以使用[CodeIgniter 会话](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)、[PHP 会话](http://php.net/manual/en/features.sessions.php)，或者如果您需要将值从一个页面发送到另一个页面，则只需使用表单发布值。

但是，如果您需要在单个页面中复制值，则可以[这样](http://www.javascript-coder.com/javascript-form/javascript-form-value.phtml)做（与 CodeIgniter 无关）。

# javascript - 我可以在 JavaScript 的不同 for 循环中声明相同的变量两次吗？

> ID：14010154
> 
> 赞同：31
> 
> 时间：2012-12-23T10:13:22.203
> 
> 标签：javascript, variables, var, declare

> **可能重复：**
> [JavaScript 变量范围](https://stackoverflow.com/questions/500431/javascript-variable-scope)

我有几天的 HTML 选择选项的 JavaScript 函数：

```
// Show and hide days according to the selected year and month.
function show_and_hide_days(fp_form) {
    var select_year= $(fp_form).find("select.value_year");
    var select_month= $(fp_form).find("select.value_month");
    var select_day= $(fp_form).find("select.value_day");
    var selected_year= $.parse_int($(select_year).val());
    var selected_month= $.parse_int($(select_month).val());
    var selected_day= $.parse_int($(select_day).val());
    var days_in_month= new Date(selected_year, selected_month, 0).getDate();
    // If the number of days in the selected month is less than 28, change it to 31.
    if (!(days_in_month >= 28))
    {
        days_in_month= 31;
    }
    // If the selected day is bigger than the number of days in the selected month, reduce it to the last day in this month.
    if (selected_day > days_in_month)
    {
        selected_day= days_in_month;
    }
    // Remove days 29 to 31, then append days 29 to days_in_month.
    for (var day= 31; day >= 29; day--)
    {
        $(select_day).find("option[value='" + day + "']").remove();
    }
    for (var day= 29; day <= days_in_month; day++)
    {
        $(select_day).append("<option value=\"" + day + "\">" + day + "</option>");
    }
    // Restore the selected day.
    $(select_day).val(selected_day);
} 
```

我的问题是 - 我可以在两个不同的 for 循环中两次声明“var day”吗？这个变量的范围是什么？这是否合法？如果我在同一个函数中两次声明同一个变量会发生什么？（内部 for 循环或外部 for 循环）？例如，如果我用“var”再次声明其中一个变量会发生什么？

如果我在 for 循环中的变量 day 之前根本不使用“var”，会发生什么？

谢谢，乌里。

PS $.parse_int 是一个 jQuery 插件，如果未指定，它会使用基数 10 调用 parseInt。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-23T10:15:31.957

函数中的任何使用都`var foo`将作用`foo`于该函数。`var`当声明被提升时，这发生在函数的哪个位置并不重要。

在同一个函数中的额外使用`var foo`在语法上是合法的，但不会产生任何影响，因为变量已经被限定为该函数。

由于它没有效果，因此有一种思想流派反对它（并赞成在`var`函数的最顶层使用单个函数来执行所有范围界定）以避免暗示它的重要性（对维护者来说对 JavaScript 的这个特性并不完全满意）。[JSLint](http://jslint.com)会提醒您注意这种用法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T10:15:18.380

不，你不应该。使用声明的变量`var`具有函数范围，而不是块范围！

重新声明一个变量 using`var`可能表明该变量是循环/块的本地变量，而它不是。

但是，您可以使用`let`来声明变量，以确保它是块范围的。

```
for (let x = 1; x <= 3; x++) {
   console.log(x)
}

for (let w = 65, x = String.fromCharCode(w); w <= 67; w++, x = String.fromCharCode(w)){
    console.log(x)
}

console.log(typeof x) // undefined
```

# java - Java多线程-返回语句花费太多时间

> ID：14010155
> 
> 赞同：1
> 
> 时间：2012-12-23T10:13:51.843
> 
> 标签：java, multithreading, concurrency

在多线程（Executor 框架）中，x() 方法中所有时间打印的总和与 doPerform 打印的总时间不匹配。这种差异随着线程池中线程数量的增加而不断增长（达到 20 秒）。有人可以弄清楚为什么吗？有什么方法可以减少从 x 方法返回所需的时间？
我已经用以下方法对其进行了测试：

a）500 次提交给 executor（poolsize =100）
b）500 次提交给 executor（poolsize =300）
c）300 次提交给 executor（poolsize =100）

```
public void x() {
    long startTime = System.currentTimeMillis();
    for (long l = 0; l <= 10000000; l++) {
        if (l % 1000000 == 0) {
            System.out.println("Thread id: "
                    + Thread.currentThread().getId() + "\t"
                    + (System.currentTimeMillis() - startTime));
            startTime = System.currentTimeMillis();
        }
    }
}

public void doPerform() {
    long startTime = System.currentTimeMillis();
    x();
    System.out.println("Thread id: " + Thread.currentThread().getId()
            + "\t" + (System.currentTimeMillis() - startTime));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:24:27.333

这是预期的。您有 100 或 300 个并行线程正在执行，并且只有 1、2 或 4 个核心来执行它们（除非您在巨型超级计算机上运行它）。这意味着每个线程都被分配了一些 CPU 时间，然后是一些其他线程，然后是其他一些线程，等等，从而产生并行执行的错觉。但实际上，各个线程的指令是交错的，顺序执行的。

因此，您可以执行一个线程*A*的`startTime`计算`doPerform()`，然后该线程可以被 CPU 上的其他几个线程替换。*在线程调度程序将A*重新分配给 CPU 并执行`startTime`计算之前，可能会经过若干毫秒`x()`。

# sql - 按整数获取字符串

> ID：14010156
> 
> 赞同：1
> 
> 时间：2012-12-23T10:13:53.573
> 
> 标签：sql, sql-server, sql-server-2008

我在 db 中有一个列存储 Entityid 和另一个存储 Entityname ，我需要一个在用户插入 id 时获取名称的存储过程（按列名），我有一个正在处理，我该如何改进它。请解释..

```
ALTER   procedure [dbo].[Emp_CompanyHirarchy]
  @FK_CompanyId varchar(50),
  @FK_EntityId varchar(50)
AS
  SELECT * FROM dbo.RetrieveEntityParent
    WHERE (EntityId =@FK_EntityId) 
```

当我执行此操作时，错误不断引发：消息 216，级别 16，状态 1，过程 Emp_CompanyHirarchy，第 5 行未为函数“dbo.RetrieveEntityParent”提供参数。

dbo.RetrieveEntityParent 函数：

```
ALTER FUNCTION [dbo].[RetrieveEntityParent] (@FK_EntityId int)
 RETURNS TABLE
 AS RETURN

  with p as
 (SELECT     EntityId, FK_ParentId , EntityName ,EntityArabicName 
  FROM         OrgEntity
 WHERE OrgEntity.EntityId=@FK_EntityId 

  UNION ALL      
  SELECT       PA.EntityId, PA.FK_ParentId, PA.EntityName,PA.EntityArabicName 
  FROM         OrgEntity as PA 
  inner join p
  ON p.FK_ParentId = PA.EntityId)

  select * from p 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:02:13.343

我在您`Employee`的. 你的意思是`Employee.FK_EntityId``RetrieveEntityParent`
`OrgEntity.FK_EntityId`

编辑后，要获得 Emp_CompanyHirarchy 工作，您必须将 @FK_EntityId 作为参数传输

```
ALTER   procedure [dbo].[Emp_CompanyHirarchy]
  @FK_CompanyId varchar(50),
  @FK_EntityId varchar(50)
AS
  SELECT * FROM dbo.RetrieveEntityParent(@FK_EntityId)
   -- WHERE mybe some other condition 
```

顺便说一句：varchar 和 integer 存在一些参数类型不匹配

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T19:46:17.593

[此链接](http://sqlfiddle.com/#!3/c3e2e/8)中有一个您需要的示例，但有一种更简单的方法，可以直接在此[链接](http://sqlfiddle.com/#!3/c3e2e/12)中使用参数。

```
DECLARE @FK_EntityId INT

SET @FK_EntityId = 1

SELECT EntityId, FK_ParentId , EntityName ,EntityArabicName 
FROM OrgEntity
WHERE OrgEntity.EntityId = @FK_EntityId 

UNION ALL

SELECT EntityId, FK_ParentId , EntityName ,EntityArabicName 
FROM OrgEntity
WHERE FK_ParentId = @FK_EntityId 
```

# javascript - Javascript变量在函数外不起作用

> ID：14010157
> 
> 赞同：2
> 
> 时间：2012-12-23T10:13:57.453
> 
> 标签：javascript, jquery, ajax, json, scope

> **可能重复：**
> [如何返回 AJAX 响应文本？](https://stackoverflow.com/questions/1225667/how-to-return-ajax-response-text)

我正在尝试使以下代码正常工作。我知道在函数的变量范围内我没有做正确的事情，但我不知道是什么（我主要是一名设计师，我很高兴我终于设法理解了一点 JSON 的含义）。任何人都可以将我推向正确的方向吗？谢谢 ：）

```
var list = new Array();

//Twitter
function twitter(photos){
    $.each(photos.results, function(index, photo){
        if (photo.entities.media){
            list.push(photo.entities.media[0].media_url);
            console.log(list); // working here, returns array
        }
    });     
}
var url = "https://search.twitter.com/search.json?callback=?&q=%23pikachu&include_entities=true&count=50";
$.getJSON(url, twitter);

console.log(list); //not working here, returns [] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T10:17:13.060

问题在于运行的顺序：

1.  从 Twitter 请求 JSON
2.  打印列表（空）
3.  JSON 响应 - 列表被填满。

您可以通过在日志中添加时间戳来验证（即。`console.log(new Date() + ' '+list)`）。

解决问题的最简单方法是在回调结束时调用后续逻辑，而不是在 getJSON 行下方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T13:08:14.167

代码中的参数“twitter”不是指函数“twitter”，而是一个名为“twitter”的变量：

```
$.getJSON(url, twitter); 
```

您的代码应如下所示：

```
...
var twitter = (function(photos){
    $.each(photos.results, function(index, photo){
        if (photo.entities.media){
            list.push(photo.entities.media[0].media_url);
            console.log(list); // working here, returns array
        }
    });     
});
var url = "https://search.twitter.com/search.json?callback=?&q=%23pikachu&include_entities=true&count=50";
$.getJSON(url, twitter);
... 
```

# ruby-on-rails - Rails carmen-rails gem，按子区域代码查找子区域名称

> ID：14010158
> 
> 赞同：2
> 
> 时间：2012-12-23T10:14:12.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, ruby-on-rails-3.2, carmen

我正在使用 carmen rails gem 来选择国家和次区域。实施数据库保存国家代码和次区域代码后。

我可以使用此代码从代码中获取国家名称
`@country_name = Carmen::Country.coded(country_code)`

现在我想从子区域代码中获取子区域名称。

帮我解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T02:10:01.227

您使用的`coded`and方法也可以与 subregions 集合一起使用。`named``Carmen::Country`

```
@country = Carmen::Country.coded(country_code)
@subregion = @country.subregions.coded(subregion_code) 
```

# visual-c++ - 显示视频捕获的循环中的连续帧数

> ID：14010161
> 
> 赞同：0
> 
> 时间：2012-12-23T10:14:37.180
> 
> 标签：visual-c++, image-processing, opencv

我正在尝试将从视频中获取的帧数放在一个循环中。我想按顺序显示这些帧，然后我想使用 opencv 2.3 减去它。

我的问题是我无法知道函数在哪里被调用。

这是我的代码如下：

使用命名空间简历；

```
 void loadImage(IplImage *image, int number)

  {
    // Store path to directory
    char filename[100];
    strcpy(filename, "S:\FINAL PROJECT ABSTRACT\images 1");

 char *frame;

// Convert integer to char    
char frameNo[10];
//sprintf(frame, "%0.3i", number);

// Combine to generate path
  strcat(filename, frameNo);
  strcat(filename, ".jpg");

// Use path to load image
  image = cvLoadImage(filename);
 }

  int _tmain(int argc, _TCHAR* argv[]){

  IplImage *im=0;
  int nImages = 6;
  for (int i = 0; i < nImages; ++i)
 {

  loadImage(im, i);

  char filename[100];
  strcpy(filename, "images 1");

  char frameNo[10];
   sprintf(frameNo, "%03i", i);

  strcat(filename, frameNo);
  strcat(filename, ".jpg");

IplImage *im = cvLoadImage(filename,CV_LOAD_IMAGE_COLOR);
cvNamedWindow("pic");
cvShowImage("pic",im);
cvWaitKey();

}

}

//} 
```

我在调试它时在 build.bt 中没有收到任何错误：-frames.exe 循环中 0x77db15de 处的未处理异常：0xC0000005：访问冲突。

在 strcat(filename, frameNo); strcat（文件名，“.jpg”）；这一点有一些错误..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:04:13.593

您的字符串处理非常混乱。目前尚不清楚您要生成的确切路径。

您可以将大部分路径生成替换为单个`sprintf()`

```
char filename[100];
sprintf(filename, "S:\\FINAL PROJECT ABSTRACT\\images 1%03i.jpg",number);
image = cvLoadImage(filename); 
```

（100 个字符似乎有些随意——而且可能有点短）

不知道这是否是您的图像路径的正确字符串，您试图插入一个“。” 在那里，所以我不知道你的真实文件路径是什么样的。

但是，在`loadImage()`函数中加载了图像后，您似乎在执行完全相同的操作`main()`（丢弃刚刚加载的图像，生成另一个路径，然后加载它）。因此，即使您修复了字符串处理，我也怀疑这是否会起作用。

# webgl - 三个 JS TextureLoader

> ID：14010165
> 
> 赞同：2
> 
> 时间：2012-12-23T10:14:57.900
> 
> 标签：webgl, three.js, textures

我正在尝试将纹理添加到我转换为 json 并从 3ds Max 导入的模型中。我在网上搜索但没有找到任何使用three.js r53 将纹理应用于json 模型的代码。我猜 Three.js 处理纹理的方式与以前的版本有所不同。有什么指导吗？

以下是我的代码：

```
var texloader = new THREE.TextureLoader();
var tex=texloader.load("second.jpg");
var mat = new THREE.MeshBasicMaterial({ map: tex });

loader = new THREE.JSONLoader();
loader.load( "js/JsonModels/toothz.js", function( geometry, mat ) {
    mat[0].shading = THREE.SmoothShading;
    var material = new THREE.MeshFaceMaterial( mat);
    mesh = new THREE.Mesh( geometry, material );
    mesh.scale.set( 3, 3, 3 );
    mesh.position.y = 0;
    mesh.position.x = 0;
    scene.add( mesh );
} ); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-27T07:32:18.547

可能是其他答案适用于旧版本，这就是我的工作方式

```
var textureLoader = new THREE.TextureLoader();
textureLoader.load(url);

// Add the event listener
textureLoader.addEventListener('load', function(event){

    // The actual texture is returned in the event.content
    sphere.material.map = event.content;

}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-25T01:20:41.173

编辑：当我回答这篇文章时，这篇文章已经有一年了，而且我的答案似乎是在 API 更改之前不久发布的。这个答案不起作用（相信[Kumar Sanket Sahu](https://stackoverflow.com/a/21375245/4730332)的话，没有测试过）

即使这已经超过一年了，因为我现在在寻找解决方案时遇到了它：

一旦纹理被加载，textureloader 会给你一个回调：

```
var texloader = new THREE.TextureLoader();
texloader.load("second.jpg", function(tex) {

  var mat = new THREE.MeshBasicMaterial({ map: tex });

  var loader = new THREE.JSONLoader();
  loader.load( "js/JsonModels/toothz.js", function( geometry, mat ) {
      mat[0].shading = THREE.SmoothShading;
      material = new THREE.MeshFaceMaterial( mat);
      mesh = new THREE.Mesh( geometry, material );
      mesh.scale.set( 3, 3, 3 );
      mesh.position.y = 0;
      mesh.position.x = 0;
      scene.add( mesh );
  } );
}); 
```

这适用于示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-02T08:54:00.747

这在 2019 年 9 月对我有用

> ```
> load(
>     url: string,
>     onLoad?: ( texture: Texture ) => void,
>     onProgress?: ( event: ProgressEvent ) => void,
>     onError?: ( event: ErrorEvent ) => void
> ): Texture;
> 
> setCrossOrigin( crossOrigin: string ): TextureLoader; 
> ```

**用法：**

```
// instantiate a loader & load a resource
new THREE.TextureLoader().load(
    // resource URL
    'textures/land_ocean_ice_cloud_2048.jpg',

    // onLoad callback
     ( texture )=> {
        // in this example we create the material when the texture is loaded
        var material = new THREE.MeshBasicMaterial( {
            map: texture
         } );
    },

    // onProgress callback currently not supported
    undefined,

    // onError callback
    ( err )=> {
        console.error( 'An error happened.' );
    }
); 
```

# php - 代码点火器教程错误

> ID：14010174
> 
> 赞同：1
> 
> 时间：2012-12-23T10:16:55.620
> 
> 标签：php, codeigniter, controller

当我尝试编写和运行 Code Igniter 教程时，它会抛出这个错误：

```
Call to undefined method News_model::get_news() in application\controllers\news.php on line 21 
```

这是*第 21 行*：

```
$data['news'] = $this->news_model->get_news($slug); 
```

模型

```
<?php
class News_model extends CI_Model {
    public function __construct()
    {
        $this->load->database();
    }
    public function get_news($slug = FALSE)
    {
        if ($slug === FALSE)
        {
            $query = $this ->db->get('news')
            return $query->result_array();
        }

        $query = $this->db->get_where('news', array('slug' => $slug));
        return $query->row_array();
    }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T10:44:15.460

如果您在控制器中使用您的模型 - 您必须编写此代码

```
$this->load->model('News_model');
$data['news'] = $this->News_model->get_news($slug); 
```

并检查线

```
parent::__construct(); 
```

在您的控制器 __construct 方法中。（如果子定义了构造函数，PHP不会自动实例化父构造函数，除非子专门实例化父构造函数）

如果您从应用程序的另一端使用模型，则必须编写此代码

```
$CI = &get_instance();
$CI->load->model('News_model');
$data['news'] = $CI->News_model->get_news($slug); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:44:13.893

在不发布更多代码的情况下，看起来这里有两件事要检查。

首先，您必须在模型中调用父构造函数。所以你的 News_model 构造函数应该是这样的：

```
function __construct()
{
  parent::__construct();
  $this->load->database();
} 
```

其次，如果您在上面发布的第 21 行的代码是正确的，则模型名称必须与您的类名称匹配。所以第 21 行应该是：

```
$data['news'] = $this->News_model->get_news($slug); 
```

请注意 News_model 中的大写“N”。

这是 yAnTar 所写但措辞不同的重要内容。希望你能理解其中任何一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-08T16:51:56.017

似乎模型未加载。您必须在使用之前加载模型在控制器或自动加载数组中在控制器加载模型中使用

```
$this->load->model('model_name'); 
```

在你的情况下

```
$this->load->model('news_model'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-30T09:43:21.133

这可能会帮助你

```
1.In your controller:-

    parent::__construct();
    $this->load->model('News_model ');
    $data['news'] = $this->news_model->get_news($slug);

 2.In Model:-
class News_model extends CI_Model {
public function __construct()
{
    $this->load->database();
}
public function get_news($slug)
{
    if ($slug)
    {
        $query = $this ->db->get('news')
        return $query->result_array();
    }

    $query = $this->db->get_where('news', array('slug' => $slug));
    return $query->row_array();
}
} 
```

# django - 如何在模板中使用 request.META.get('HTTP_REFERER') ？

> ID：14010177
> 
> 赞同：12
> 
> 时间：2012-12-23T10:17:31.303
> 
> 标签：django, django-templates

我想`request.META.get('HTTP_REFERER')`在模板中使用。

**我的模板来源：**

```
<!-- this is login.html -->
{% extends "base.html" %}
{% block title %}django bookmark- login{% endblock %}
{% block head %}login{% endblock %}
{% block content %}
    {% if form.errors %}
    <p>try again!</p>
    {% endif %}
    <form method="post" action=".">{% csrf_token %}
        <p><label for="id_username">username:</label>
        {{ form.username }}</p>
        <p><label for="id_password">password:</label>
        {{ form.password }}</p>
        <input type="hidden" name="next" value="/<!-- I WANT TO USE 'HTTP_REFERER' HERE -->" />
        <input type="submit" value="login" />
    </form>
{% endblock %} 
```

我该怎么办？

```
urlpatterns = patterns('', (r'^login/$', 'django.contrib.auth.views.login'), 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-23T12:49:36.520

没有必要`get`。`request.META`是一个字典，与所有字典一样，您可以使用点符号在模板中执行字段查找：`{{ request.META.HTTP_REFERER }}`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-23T11:12:11.743

添加`django.core.context_processors.request`您的设置文件，`TEMPLATE_CONTEXT_PROCESSORS`然后您将能够使用`request`in 模板，而无需在 request 中显式传递它`context`。

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'django.core.context_processors.request', # this one
) 
```

你可以做的 in 模板`{{request.META.HTTP_REFERER}}`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-01T12:39:53.237

实际上，首选方法是使用[此处记录](https://docs.djangoproject.com/en/1.9/topics/auth/default/#limiting-access-to-logged-in-users)`next`的参数

您可以在模板中执行以下操作：

```
<input type="hidden" name="next" value="{{  request.GET.next }}" /> 
```

# java - 复合材料中的选择性菜单检测

> ID：14010178
> 
> 赞同：0
> 
> 时间：2012-12-23T10:17:34.313
> 
> 标签：java, swt, contextmenu, composite, java-canvas

我想将一些对象添加到`Composite`对象中。对象可以有不同的形状（矩形、圆形、椭圆形甚至是奇怪的形状（由多边形表示）。所以我定义了这样的类：

```
public class Circle extends Canvas {
}

public class Rectangle extends Canvas {
}

... 
```

我知道如何绘制 a`Canvas`以获得我想要的形状，但我也希望只有当用户在画布区域内单击鼠标时，弹出菜单才会出现在每个画布上，所以如果我在复合类中使用这些代码：

```
Menu aSampleMenu = new Menu(this);

Circle circle = new Circle(parent, style);
circle.setMenu(aSampleMenu); 
```

如果用户在画布内的任何地方单击鼠标右键，即使在形状区域之外，菜单也会出现。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:03:41.610

一种解决方案是使用 Region，但我仍然不知道如何将其应用于圆形案例：

```
 Region region = new Region();
    region.add(new int[] {3, 3, 20, 20, 3, 20});

    Canvas c = new Canvas(this, SWT.NONE);
    c.setBounds(35, 35, 60, 60);
    c.setRegion(region);

    Menu menu = new Menu(this);
    c.setMenu(menu);

    MenuItem mntmProperties = new MenuItem(menu, SWT.NONE);
    mntmProperties.setText("Properties");

    MenuItem mntmDelete = new MenuItem(menu, SWT.NONE);
    mntmDelete.setText("Delete"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:39:24.840

看看下面的代码片段。诀窍是定义第`Menu`一个，然后仅将其设置为那些`Control`应该允许菜单检测的 s：

```
public class StackOverflow
{
    public static void main(String[] args)
    {
        Display display = new Display();
        Shell shell = new Shell(display);
        shell.setLayout(new GridLayout(2, true));

        Composite c1 = new Composite(shell, SWT.BORDER);
        c1.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

        Composite c2 = new Composite(shell, SWT.BORDER);
        c2.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

        Menu menu = new Menu(shell, SWT.POP_UP);
        MenuItem item = new MenuItem(menu, SWT.PUSH);
        item.setText("Popup");

        new Label(shell, SWT.BORDER).setText("No menu here");
        new Label(shell, SWT.BORDER).setText("No menu here");

        // Add menu only to c1 and c2, not to the shell and not to the labels
        c1.setMenu(menu);
        c2.setMenu(menu);

        shell.setSize(300, 300);
        shell.open();
        while (!shell.isDisposed())
        {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }
} 
```

这是一个屏幕截图：

![在此处输入图像描述](../Images/b4a3b99a903273bbf5e904d0d9a9ab43.png)

# php - 如何在php中为组栏Jpgraph柱形图设置标签图像

> ID：14010180
> 
> 赞同：2
> 
> 时间：2012-12-23T10:17:43.643
> 
> 标签：php, jpeg, jpgraph

这是我的 jpgraph 演示代码：

```
<?php
require_once ('jpgraph/jpgraph.php');
require_once ('jpgraph/jpgraph_bar.php');

$datay1=array(35,160,0,0,0,0);
$datay2=array(35,190,190,190,190,190);
$datay3=array(20,70,70,140,230,260);

$graph = new Graph(450,200,'auto');    
$graph->SetScale("textlin");
$graph->SetShadow();
$graph->img->SetMargin(40,30,40,40);
$graph->xaxis->SetTickLabels($gDateLocale->GetShortMonth());

$graph->xaxis->title->Set('Year 2002');
$graph->xaxis->title->SetFont(FF_FONT1,FS_BOLD);

$graph->title->Set('Group bar plot');
$graph->title->SetFont(FF_FONT1,FS_BOLD);

$bplot1 = new BarPlot($datay1);
$bplot2 = new BarPlot($datay2);
$bplot3 = new BarPlot($datay3);

$bplot1->SetFillColor("orange");
$bplot2->SetFillColor("brown");
$bplot3->SetFillColor("darkgreen");

$gbarplot = new GroupBarPlot(array($bplot1,$bplot2,$bplot3));
$gbarplot->SetWidth(0.6);
$graph->Add($gbarplot);

$graph->Stroke();
?> 
```

此代码没有错误，并且运行良好...我的问题是如何为该组条设置图像标签以识别这些彩条...

正常输出图表是这样的：![在此处输入图像描述](../Images/8aa3e8bc43deb33177ffead9660fdc8b.png)

需要设置此标签图像： ![在此处输入图像描述](../Images/8d4bd46037d6f7d59554a1c7cff95677.png)

我想要这种最终输出： ![在此处输入图像描述](../Images/9c6895d7ce1a036e519b2420ba14be9d.png)

***我该怎么做 ？？？？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T19:07:28.377

这是我的代码：

```
<?php
require_once ('jpgraph/jpgraph.php');
require_once ('jpgraph/jpgraph_bar.php');

$datay1=array(35,160,0,0,0,0);
$datay2=array(35,190,190,190,190,190);
$datay3=array(20,70,70,140,230,260);

$graph = new Graph(450,200,'auto');    
$graph->SetScale("textlin");
$graph->SetShadow();
$graph->img->SetMargin(40,30,40,40);
$graph->xaxis->SetTickLabels($gDateLocale->GetShortMonth());

$graph->xaxis->title->Set('Year 2002');
$graph->xaxis->title->SetFont(FF_FONT1,FS_BOLD);

$graph->title->Set('Group bar plot');
$graph->title->SetFont(FF_FONT1,FS_BOLD);

$bplot1 = new BarPlot($datay1);
$bplot2 = new BarPlot($datay2);
$bplot3 = new BarPlot($datay3);

$bplot1->SetFillColor("orange");
$bplot2->SetFillColor("brown");
$bplot3->SetFillColor("darkgreen");

$gbarplot = new GroupBarPlot(array($bplot1,$bplot2,$bplot3));
$gbarplot->SetWidth(0.6);

$graph->legend->SetPos(0.12,0.01,'left','top');
$graph->legend->SetLayout(LEGEND_VERT);
$graph->legend->SetFrameWeight(1);

$bplot1->SetLegend("Pass");
$bplot2->SetLegend("Fail");
$bplot3->SetLegend("Not Eligible");

$graph->Add($gbarplot);

$graph->Stroke();
?> 
```

生成的图表是：![带图例的测试条形图](../Images/52b8e7a4dd82b5a6a78fd4006d9f9f60.png)

我希望这会帮助你实现你的目标。

# html - 如何在 HTML 文档中使用 Ruby

> ID：14010181
> 
> 赞同：0
> 
> 时间：2012-12-23T10:18:10.973
> 
> 标签：html, ruby-on-rails, ruby

我的索引文件中有以下 HTML。

```
<% @posts.each_with_index do |post, index| %>
  <tr>
    <td><%= index+1 %></td>
    <td><%= post.team_elo %></td>
    <td><%= post.team_name %></td>
  </tr>
<% end %> 
```

我有一个函数调用`is_eligible`它`post.team_name`作为参数。我想在每次“进行迭代”时运行它，如果它返回 false，则跳过所有三个打印步骤

我不确定如何

1.  包括文件 is_eligible 位于和
2.  在某处的html中构造代码。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T10:24:59.213

```
# The view
<% @posts.each_with_index do |post, index| %>
  <% unless post.is_eligible? %>
    <tr>
      <td><%= index+1 %></td>
      <td><%= post.team_elo %></td>
      <td><%= post.team_name %></td>
    </tr>
  <% end %>
<% end %>

# The model post.rb
def is_eligible?
  # and there you use self.name to access the name
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T10:24:17.317

```
<% @posts.select{|p| is_eligible(p. team_name)}.each_with_index do |post, index| %>
  <tr>
    <td><%= index+1 %></td>
    <td><%= post.team_elo %></td>
    <td><%= post.team_name %></td>
  </tr>
<% end %> 
```

# git - 在没有任何工作树的情况下使用 Git

> ID：14010184
> 
> 赞同：2
> 
> 时间：2012-12-23T10:19:02.687
> 
> 标签：git, version-control

假设您有一个裸存储库。它包含3个文件：

*   `a.txt`
*   `b.txt`
*   `c.txt`.

现在，假设我没有`b.txt`and`c.txt`但我有一个更新版本的`a.txt`文件。是否可以在 git 中使用某些命令并告诉它`a.txt`在存储库中更新，而无需克隆/拉取其他文件？类似于：*“`a.txt`在该存储库中更新，仅查找已存在文件中的更改。”* 如果没有，是否有任何其他版本控制系统支持此功能？

### 更新：

一个例子是这样的：一个像 github 这样的网站，包含很多存储库和每个存储库中的很多文件。只是，在这个网站上，用户不会总是看到最新的版本。他们选择要查看的修订版，有时他们想更新文件。在这种情况下，文件的总大小会太大。考虑到用户不会总是看到最新的修订版，我认为更好的方法是按需获取特定文件的单个修订版，并且每当添加更新时，添加更新的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T10:22:28.633

Subversion 可以为所欲为。对于 git，有一个类似的问题：[Pull single file on server](https://stackoverflow.com/questions/11245424/pull-single-file-on-server)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T03:52:19.370

如果没有存储库的副本，您将无法做到这一点——这正是 git 的工作方式。如果你想在没有完全访问完整副本的情况下对存储库做一些事情，那么 git 不是适合你的工具。但正如我从您的评论中了解到的那样，您的服务器上确实有存储库，而这实际上就是您想要完成所有工作的地方。您只是不想进行完整结帐以仅触摸单个文件。

如果这是正确的，那么您正在寻找一个在 git 中称为“稀疏检出”的功能，该功能从 1.7 开始可用。有关更多详细信息，请在此处查看我的回答：[如何仅克隆 Git 存储库的子目录？](https://stackoverflow.com/questions/600079/is-there-any-way-to-clone-a-git-repositorys-sub-directory-only/13738951#13738951)（这个问题是关于子目录的，但对单个文件的工作方式完全相同）

# cocoa - 在核心数据应用程序中更新 NSTableView 的正确方法

> ID：14010187
> 
> 赞同：2
> 
> 时间：2012-12-23T10:20:24.290
> 
> 标签：cocoa, core-data, nsarraycontroller

我有一个带有 NSTableView 的核心数据项目，其中列绑定到 NSArrayController。反过来，控制器的内容绑定到 AppDelegate 的主托管对象上下文。

我对 NSTextFieldCell 进行了细分，以提供一种更加定制化的数据显示方式。一切似乎都运行良好，但是当我枚举上下文中的对象并更改属性时，NSArrayController 似乎没有将新值传递给表。我知道它们正在随着 sortDescriptors 的工作而发生变化，并且表格根据新数据自行组织，但仍显示旧值。我猜这归结为显示数据的 NSCell 的回收：尽管核心数据数据库中的基础值已更改，但它们并没有重新绘制。

在尝试了各种 KVO 通知后`[myArrayController willChangeValueFor: aKeyPath]`，相应`didChange`的也很简单`[myTable reloadData]`。我唯一的解决方案是解开控制器的 managedObjectContext 绑定，并在处理后重新钩住它，如下所示：

```
self.hasBackgroundOp = YES;
self.isCancelled = NO; //can get changed with a 'cancel' button in the UI
    if (self.managedObjectContext.hasChanges) {
        [self. managedObjectContext save:nil];
    }
    [myArrayController setManagedObjectContext:nil]; //brutal un-hooking of controller
    dispatch_group_t dispatchGroup = dispatch_group_create();
    dispatch_group_async(dispatchGroup, dispatch_get_global_queue(0, 0), ^{
        .
        .
        // create a thread context, set the persistent store co-ord
        // and do some processing on the
        // NSManagedObjects that are fetched into an array just
        // for the purpose of this thread
        .
        .
        [ctx save:&error];
        //and after the processing is finished then refresh the table
        dispatch_async(dispatch_get_main_queue(), ^{
            [myArrayController setManagedObjectContext:self.managedObjectContext]; //this forces re-drawing of the table
            self.hasBackgroundOp = NO;
            self.isCancelled = NO;
        });
    }); 
```

这样做似乎真的很残酷`[myArrayController setManagedObjectContext:nil];`，然后再次设置它只是为了刷新表格的内容。我简直不敢相信我已经正确地做到了这一点，尽管它工作得很好。有人可以建议更好的方法吗？谢谢！

更新：实际设置托管对象上下文并不能解决问题。它似乎已经停止工作。如果代码连续运行两次，那么应用程序就会挂起。注释掉这些`-setManagedObjectContext:`行，代码可以根据需要运行多次。

作为对评论的回应，我的自定义单元格使用以下内容来显示自身：

```
NSInteger index = [[self stringValue] integerValue] + 1;
NSAttributedString *cellText = [[NSAttributedString alloc] initWithString:[NSString stringWithFormat:@"%lu",index] attributes:attributes];
NSRect textRect;
textRect.origin = cellFrame.origin;
textRect.origin.x += (cellFrame.size.width - cellText.size.width) / 2;
textRect.origin.y += (cellFrame.size.height - cellText.size.height) / 2;
textRect.size.width = cellText.size.width;
textRect.size.height = cellText.size.height;
[cellText drawInRect:textRect]; 
```

阵列控制器设置在主 nib 中，并将其托管对象上下文绑定到 AppDelegate 的。nib 中没有获取请求或谓词 - AppDelegate 的代码中绑定了一个排序描述符：

```
[myArrayController setSortDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:kINDEX ascending:YES]]]; 
```

![抓取控制器选项](../Images/dde83b2d559f64661498c9f4ab9b417e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:36:06.397

认为我找到了它 - 我将以下内容添加到线程处理的末尾并在主线程上执行它：

```
[self.managedObjectContext reset];
[myArrayController fetch:self]; 
```

重置 MOC 显然会清除它，从而迫使控制器重新绘制单元格。`-fetch`似乎是必要的，否则表格将变为空白......

# twitter - twitter 小部件仅在 webapp ajax 页面中首次加载？

> ID：14010188
> 
> 赞同：9
> 
> 时间：2012-12-23T10:20:31.833
> 
> 标签：twitter, widget

我试图在我的 ajax 加载页面中加载 twitter 小部件 api。

我尝试以几种不同的方式加载脚本，并且每次都收到警报以运行，但脚本本身却没有。

所以我第一次加载页面时，脚本正在运行，但是如果我返回菜单并返回此页面，那么它不会加载它吗？

这是ajax加载的页面。

```
<div id="twitterwid">

<a class="twitter-timeline" width="320" height="500" href="https://twitter.com/my account" data-widget-id="my widget id number">Loading tweets by @me</a>
<script>

alert("alert is working");

!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");

</script>

<div> 
```

任何输入表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T21:18:28.583

您所要做的就是：通过调用来调用页面上小部件标签的重新呈现：

```
twttr.widgets.load() 
```

[Twitter Dev Channel 上的类似问题](https://dev.twitter.com/discussions/890)

注意：内联脚本不会在 AJAX 加载时执行。请参阅：this SO [Q&A](https://stackoverflow.com/questions/1197575/can-scripts-be-inserted-with-innerhtml)以获取解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-17T14:15:46.707

首先添加：

```
<script>window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));</script> 
```

所以你可以使用：

```
twttr.widgets.load() 
```

# java - 确保数组中的所有元素都不为零

> ID：14010189
> 
> 赞同：0
> 
> 时间：2012-12-23T10:21:03.827
> 
> 标签：java, arrays

我怎样才能以更简单的方式对此进行编码？

```
for(int i=0; i<array.length; i++)
{
    if(myArray[i] == 0)
    {
        myBoolean = false;
        break;
    }
    else if(myArray[0] != 0 && myArray[1] != 0 && myArray[2] != 0)
    //may continue depending on array length
    {
        myBoolean = true;
    }
} 
```

我目前拥有的是一个“if else 语句”，如果在我的数组中，只有一个元素不为零，它会将我的布尔值更改为 true。但我需要确保数组中的所有元素都不为零，然后它将布尔值更改为真。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T10:25:25.290

你把它复杂化了：:- *)（我之前似乎误读了这个问题，但我现在已经修复了答案。）*

```
boolean allNonZero = true;
for (int i = 0; allNonZero && i < array.length; ++i) {
    if (array[i] == 0) {
        allNonZero = false;
    }
} 
```

甚至

```
boolean allNonZero = true;
for (int i = 0; allNonZero && i < array.length; ++i) {
    allNonZero = array[i] == 0;
} 
```

或使用增强的 for 循环：

```
boolean allNonZero = true;
for (int entry : array) {
    if (entry == 0) {
        allNonZero = false;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:35:06.380

这是（我认为）最简单的方法：

```
boolean allNonZero = true;
for (int i : array)
    if (!(allNonZero &= i != 0)) break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T10:27:08.600

编辑：

```
boolean isAllNonZero = true;
for(int i = 0; i < array.length; i++) {
    if(myArray[i] == 0) {
        isAllNonZero = false;
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T10:27:50.900

只需检查假装为零。

```
boolean isAllNonZero = true;
for(int i=0; i<array.length; i++)
{
    if(myArray[i] == 0)
    {
        isAllNonZero = false;
        break;
    }
}
if(!isAllNonZero) {
  System.out.println("Array Contains zero value");
} 
```

更

```
int count = 0 ;
for(int i=0; i<array.length; i++)
{
    if(myArray[i] == 0)
    {
        count++;
    }
}
if(count>0){
  System.out.println("Array Contains "+count+" zeros");
} 
```

# requirejs - BoilerplateJS 会支持最新的 RequireJS

> ID：14010192
> 
> 赞同：1
> 
> 时间：2012-12-23T10:21:46.290
> 
> 标签：requirejs, boilerplatejs

[在此处输入链接描述](http://boilerplatejs.org)BoilerplateJS 仅与旧的 1.0.X RequireJS 一起提供。它可以与最新的一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:01:17.883

是的。它确实适用于新的 RequireJS 版本。

替换 libs 文件夹中的 requirejs 和插件文件（text、domReady 和 i18n）。不需要订单插件。path 插件是 BoilerplateJS 的自定义插件，它适用于新版本。

# java - 检测套接字断开连接？

> ID：14010194
> 
> 赞同：16
> 
> 时间：2012-12-23T10:21:50.973
> 
> 标签：java, sockets, nio

[在尝试了几个 SO 问题的答案中提到的不同解决方案（ this](https://stackoverflow.com/a/12244232/668963)，[this](https://stackoverflow.com/a/8851679/668963)和其他几个）之后，我有点不安，这不能以优雅的方式处理，我仍然无法检测到套接字断开连接（通过拔下电缆）。

我正在使用 NIO 非阻塞套接字，一切正常，除了我找不到检测服务器断开连接的方法。

我有以下代码：

```
while (true) {
    handlePendingChanges();

    int selectedNum = selector.select(3000);
    if (selectedNum > 0) {
        SelectionKey key = null;
        try {
            Iterator<SelectionKey> keyIterator = selector.selelctedKeys().iterator();
            while (keyIterator.hasNext()) {
                key = keyIterator.next();
                if (!key.isValid())
                    continue;

                System.out.println("key state: " + key.isReadable() + ", " + key.isWritable());

                if (key.isConnectable()) {
                    finishConnection(key);
                } else if (key.isReadable()) {
                    onRead(key);
                } else if (key.isWritable()) {
                    onWrite(key);
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
            System.err.println("I am happy that I can catch some errors.");
        } finally {
            selector.selectedKeys().clear();
        }
    }
} 
```

在读取 SocketChannels 时，我拔下电缆，`Selector.select()`开始旋转并返回 0，现在我没有机会**读取**或**写入**通道，因为主要的读写代码由 保护`if (selectedNum > 0)`，现在这是第一个出现的混乱在我的脑海中，从[这个答案](https://stackoverflow.com/a/8851679/668963)中，据说*当频道被破坏时，select（）会返回，频道的选择键将指示可读/可写*，但这里显然不是这种情况，键不是选择，`select()`仍然返回 0。

此外，来自[EJP](https://stackoverflow.com/a/12244232/668963)对类似问题的回答：

> 如果对等方关闭套接字：
> 
> *   读取（）返回 -1
> *   readLine() 返回 null
> *   对于任何其他 X，readXXX() 抛出 EOFException。

这里也不是这种情况，我尝试注释掉`if (selectedNum > 0)`并使用`selector.keys().iterator()`来获取所有键，无论它们是否被选中，从这些键中读取不会返回 -1（而是返回 0），并且不会`EOFException`抛出对这些键的写入。我只注意到一件事，即使没有选择键，也会`key.isReadable()`返回 true 而`key.isWritable()`返回 false（我想这可能是因为我没有为 OP_WRITE 注册键）。

我的问题是为什么 Java 套接字的行为是这样的，还是我做错了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-23T21:43:21.960

您已经发现在 TCP 连接上需要计时器和心跳。

如果拔下网线，TCP 连接可能不会断开。如果您没有要发送的内容，TCP/IP 堆栈也没有要发送的内容，它不知道某处电缆已丢失，或者对等 PC 突然起火。在您多年后重新启动服务器之前，可以认为该 TCP 连接是打开的。

这样想；TCP 连接怎么知道另一端掉线了——它已经掉线了，所以它不能告诉你这个事实。

如果您拔下连接服务器的电缆，某些系统可以检测到这一点，而有些则不会。如果您在以太网交换机的另一端拔下电缆，则不会被检测到。

That's why one always need supervisor timers(that e.g. send a heartbeat message to the peer, or close a TCP connection based on no activity for a given amount of time) for a TCP connection,

One very cheap way to at least avoid TCP connections that you only read data from, never write to, to stay up for years on end, is to enable TCP keepalive on a TCP socket - be aware that the default timeouts for TCP keepalive is often 2 hours.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-23T20:43:58.290

这些答案都不适用。第一个涉及连接断开的情况，第二个（我的）涉及对等方关闭连接的情况。

在 TCP 连接中，除非正在发送或接收数据，否则原则上没有任何关于拉断连接的电缆，因为 TCP 被刻意设计为在这类事情上具有鲁棒性，而且肯定没有任何关于它的应该像对等关闭一样查看本地应用程序。

在 TCP 中检测断开连接的唯一方法是尝试通过它发送数据，或者在适当的时间间隔后将读取超时解释为丢失的连接，这是应用程序的决定。

您还可以设置 TCP keep-alive on 以启用断开连接的检测，在某些系统中，您甚至可以控制每个套接字的超时。然而，不是通过 Java，所以你会被系统默认值困住，除非它被修改，否则它应该是两个小时。

您的代码应该在调用 keyIterator.next() 之后调用 keyIterator.remove()。

# java - 将信号从 .NET 应用程序传递到 Java 应用程序

> ID：14010196
> 
> 赞同：0
> 
> 时间：2012-12-23T10:22:09.387
> 
> 标签：java, windows, ipc

我需要将信号从 .NET 应用程序传递到 Java 应用程序。不需要数据，信号本身就足够了。

我想到的最简单的方法是使用这样的命名同步对象：

1.  .NET 应用程序创建一个特定的命名同步对象 A。
2.  Java 应用程序创建了一个特定的命名同步对象 A - 名称与 (1) 中的相同。
3.  Java 应用程序有一个线程在等待对象发出信号。
4.  .NET 应用程序向对象发出信号。
5.  Java 应用程序线程唤醒并根据信号接收采取行动。

至少，如果我知道如何在 Java 中创建命名同步对象，我会这样做。

但是看起来Java没有任何东西，我很难相信。这是否意味着只有 Windows 具有命名同步对象？

所以，我的问题是——如何将一个简单的信号（无数据）从非 Java 应用程序传递到 Windows 上的 Java 应用程序？两个进程都在同一台主机上运行。

**编辑**

动机——我想向我们的无头 Java 进程发出信号，让它尽快优雅地终止自己。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T10:24:50.800

您可以在程序之间创建套接字连接，并通过发送和接收特定模式来检测信号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:16:53.997

我又想，我以前用过ICE Framework，你可以从这里下载并学习ICE Framework，ICE Framework是一个跨本地系统或网络进程之间通信的框架。

[下载 Ice 框架](http://www.zeroc.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T11:53:37.610

看在上帝的份上，我只想要从 C++/C# 进程到 Java 进程的单个 1 位信号，而且没有简单的方法可以做到这一点。我不敢相信。

算了，我就用文件系统吧。C++/C# 代码将在众所周知的位置创建一个空文件，Java 代码将每秒轮询一次。

菲尼托，故事结束。

# php - 对两个输入 codeigniter 使用一个验证

> ID：14010201
> 
> 赞同：2
> 
> 时间：2012-12-23T10:23:17.177
> 
> 标签：php, forms, codeigniter, validation

我想对两个输入进行一次验证，
例如我有输入议程代码和议程编号
我希望 codeigniter 同时检查两个输入的连接值，所以我将有类似的代码

```
$this->form_validation->set_rules('agendaCode/agendaNumber','my_callback_function); 
```

但它的返回错误

* * *

我通过使用知道答案

```
$this->form_validation->set_rules('agendaCode','my_callback_function[agendaNumber]'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:59:43.790

这样做时，您只能将一个字段名称传递给 set_rules() 方法：

*   [https://www.codeigniter.com/user_guide/libraries/form_validation.html#setting-validation-rules](https://www.codeigniter.com/user_guide/libraries/form_validation.html#setting-validation-rules)

但是，您可以传递一个数组：

*   [https://www.codeigniter.com/user_guide/libraries/form_validation.html#setting-rules-using-an-array](https://www.codeigniter.com/user_guide/libraries/form_validation.html#setting-rules-using-an-array)

所以：

```
$config = array(
    array(
         'field' => 'agendaCode',
         'label' => 'Agenda Code',
         'rules' => 'callback_my_function'
    ),
    array(
         'field' => 'agendaNumber',
         'label' => 'Agenda Number',
         'rules' => 'callback_my_function'
    )
);

$this->form_validation->set_rules($config); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T11:03:33.157

我不确定您是否可以在同一个语句中验证两个输入，但我知道您为什么会收到错误

你需要改变 `$this->form_validation->set_rules('agendaCode/agendaNumber','my_callback_function);`

到

`$this->form_validation->set_rules('agendaCode','callback_function); $this->form_validation->set_rules('agendaNumber','callback_function);`

正确的语句是 callback_functionname 它必须是 callback 而不是 my_callback 或其他

reference For

# spring-security - 将用户名和密码放在 mule 中的 wsdl 上

> ID：14010211
> 
> 赞同：0
> 
> 时间：2012-12-23T10:25:26.860
> 
> 标签：spring-security, mule

我使用 mule-standalone-3.3.0 CE。我创建模式 Web 服务代理和我的配置：

```
<pattern:web-service-proxy name="WebService"
    wsdlLocation="http://www.tset.com/WebService/Tse.asmx?WSDL"
    inboundAddress="http://localhost:8084/test"
    outboundAddress="http://www.tset.com/view" /> 
```

我想将用户名和密码放在我的新 wsdl ( `http://localhost:8084/test?wsdl`) 上。这样做的最佳方法是什么？我知道一些方法，例如：“使用弹簧安全”，但我不知道这种方法好不好。我对spring security有一个问题：我不知道如何设置SoapUi？我不知道如何在我的soapUI 中发送身份验证标头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:41:45.270

可以以允许定义子元素的扩展方式定义 Web 服务模式。通过使用它，您将被允许定义利用[spring security的](http://www.mulesoft.org/documentation/display/MULE3USER/Configuring+the+Spring+Security+Manager#ConfiguringtheSpringSecurityManager-Example)[安全过滤器](http://www.mulesoft.org/documentation/display/MULE3USER/Configuring+the+Spring+Security+Manager#ConfiguringtheSpringSecurityManager-SecurityFilters)

您的模式配置应如下所示：

```
<pattern:web-service-proxy name="WebService"
         wsdlLocation="http://www.tset.com/WebService/Tse.asmx?WSDL">
        <http:inbound-endpoint address="http://localhost:8084/test" >
            <mule-ss:http-security-filter realm="mule-realm"/>
        </http:inbound-endpoint>
        <http:outbound-endpoint address="http://www.tset.com/view" />
</pattern:web-service-proxy> 
```

# php - 在 Windows 上每 x 秒运行一个 php 文件

> ID：14010218
> 
> 赞同：-1
> 
> 时间：2012-12-23T10:27:37.433
> 
> 标签：php, windows

我已经阅读了每篇关于如何制作一个在 Windows 上每秒运行的 cron 的文章。但是没有具体的详细文章。但我知道我必须制作一个在 Windows 上运行 bat 文件的服务。该 bat 文件应该运行一个带有 sleep 的循环以在 CLI 中运行该 php 文件。但我不知道为什么 php 显示错误“mysql_error”函数不存在。如果有人有任何建议与我分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:34:52.693

当您通过控制台运行 php 时，使用的 php.ini 与 apache 在大多数配置中使用的不同。编写一个仅包含的 php 文件`<?php phpinfo();`并在浏览器下通过 cmd.exe 运行它（运行命令`php \your\dir\file.php > \your\dir\file.txt`，打开文件并阅读它）。

您将获得有关配置的更多信息。

# java - JUnit：调用每个 @Test 方法之前的新实例。有什么好处？

> ID：14010222
> 
> 赞同：25
> 
> 时间：2012-12-23T10:28:28.527
> 
> 标签：java, unit-testing, testing, junit, instance

目前，我正在阅读“JUnit in action”一书。在这本书中，我找到了以下文字：

> JUnit 在调用每个 @Test 方法之前创建一个新的测试类实例。这有助于提供测试方法之间的独立性，并避免测试代码中的意外副作用。因为每个测试方法都在一个新的测试类实例上运行，所以我们不能跨测试方法重用实例变量值。

现在我认为这种方法没有多大意义：

例如：

```
public class CalculatorTest {
    @Test
    public void testAdd_1() {
        Calculator calculator = new Calculator();
        double result = calculator.add(1, 1);
        assertEquals(2, result, 0);
    }

    @Test
    public void testAdd_2() {
        Calculator calculator = new Calculator();
        double result = calculator.add(2, 2);
        assertEquals(4, result, 0);
    }
} 
```

对于测试类 CalculatorTest 没有任何好处。

好的，让我们关注另一个例子：

```
public class OneTest {

    static byte count;

    public OneTest() {
        count++;
    }

    @Test
    public void test1() {
        System.out.println(count);
    }

    @Test
    public void test2() {
        System.out.println(count);
    }
} 
```

对于测试类 OneTest，我找到了一种对许多测试方法使用相同变量计数的方法......

那么，如何看到书中描述的方法的真正好处呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-23T12:17:42.650

> 如何看到书中描述的方法的真正好处？

单独实例的目的不是为了任何利益，而是为了维护每个测试应该独立执行的合同，而不会对先前测试的执行产生任何影响。除了为每个测试使用不同的实例之外，没有其他方法可以确保此合同。

例如，Spring 事务管理确保通过测试回滚对数据库所做的所有更改，默认情况下，以维护相同的合同。

因此，通常不鼓励在测试中使用静态变量，因为它会破坏每个测试一个实例的整个目的，以便为每个测试提供一个干净的状态。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-24T06:45:18.260

保持测试方法之间的状态清洁对单元测试很有用，但会妨碍功能测试，因为测试之间通常需要依赖关系（例如，当您使用 Selenium 测试网页时，不必费心运行如果登录页面的测试失败，则返回某个页面）。

[这是我创建TestNG](http://testng.org)的主要原因之一，它不会在每个方法之间实例化一个新类，因此给你选择而不是把这个决定强加给你。

TestNG 还支持测试的依赖关系、多线程测试、组的概念（“仅运行 servlet 测试”）以及更多功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-23T16:25:03.000

如果您正在测试一个可变类，那么在每个测试方法开始时让您的测试对象处于已知状态是很有价值的，这样测试执行的顺序就无关紧要了。实现这一点的最简单方法是为每个测试创建该类的新实例，并避免使用静态字段。

在您的计算器示例中，您的类似乎`Calculator`是不可变的，方法调用的结果仅取决于参数。因此，一项测试影响另一项测试的风险不存在。

我不太明白你的第二个例子的意义。您编写了注释为`@Test`使用共享静态字段的方法，但是您的方法没有断言，并且没有真正测试任何东西。

如果您想使用静态字段或确实保留并重用被测类的单个实例，当然可以这样做，但要使您的测试工作并保持彼此独立往往需要更多的关注。

# javascript - Extjs 3.4 自定义 JSONReader

> ID：14010223
> 
> 赞同：0
> 
> 时间：2012-12-23T10:28:34.167
> 
> 标签：javascript, extjs3

我已经很久没有问题了，但我终于在这里碰壁了。无论如何，让这变得容易。我正在尝试在 extjs 3.4 中创建一个 JSON 存储（与工作相关，不，我没有更新）。好吧，我像往常一样创建了带有正确响应的查询并填写了它。我的问题是我希望能够在应用程序上提取和使用 JSON 上的 1 个额外属性。来自 chrome 响应对象的 JSON 示例：

```
myInventory: [{Priority:1, PMNumber:444, Description:fix-a-tape, Assets:3, Storage_Count:0,…},…]
percent: 97.040498442368
totalCount: "3" 
```

现在，我知道这是正确的格式，因为我正在使用的 Grid 已填充，但我无法获得 percent 属性。所以我的问题是，当你有一个在 EXTjs 上不常见的额外参数时，你如何在数据存储构建代码块上提取一个额外的参数，在我的例子中是百分比？我尝试在 JSONReader 上进行元更改，但我得到的只是属性的百分比：“百分比”，因为我在创建数据存储后检查它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:49:49.680

Ext.data.JsonReader 有一个属性[jsonData](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.JsonReader-property-jsonData)这正是你所需要的。一个简单的例子：

```
Ext.onReady(function() {
    var store = new Ext.data.JsonStore({
        url: 'data/test.json',
        root: 'dataRoot',
        fields: ['fieldA', 'fieldB'],
        idProperty: 'id',
        storeId: 'myStore'
    });

    store.on('load', function(store) {
        console.log(store.reader.jsonData.someOtherProperty);
    });

    store.load(); 

}); 
```

data/test.json 看起来像这样：

```
{
    dataRoot: [{
        id: 0,
        fieldA: 'a',
        fieldB: 'b' 
    }],
    someOtherProperty: 'abc'
} 
```

还有一种替代方法，您可以手动（不是通过 store.load()）执行 Ext.Ajax 请求，使用您需要的属性，然后使用从 Ajax 获得的数据手动调用[Ext.data.JsonStore.loadData()](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.Store-method-loadData)要求。

# java - 任何用于动态创建的数据库表的 Java ORM？

> ID：14010227
> 
> 赞同：6
> 
> 时间：2012-12-23T10:29:08.573
> 
> 标签：java, orm

我们正在考虑从我们的定制代码切换到 ORM，以简化我们的代码库并转向可能更健壮的代码。目前我们有一些“系统”表和可变数量的“自定义”表。这些自定义表格对于每个安装都是不同的：客户可能有关于发票的表格，另一个可能有关于保险单的表格，等等。这些自定义表格可以随时添加，并且应该立即可供用户使用。我们按照 DBO 模式编写了一堆 Java 类：每个系统表都有一个类，另外还有一个用于自定义表的通用类。而且，我们有一个通用的 java 对象来实例化自定义记录；此类具有通用方法，例如`Object getProperty(String name)`.

我们查看了一些 ORM，但找不到任何可以简化此类自定义表的使用。

有没有人有类似的经历？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:59:46.463

也许这是查询映射器框架比 ORM 更好的任务。

例如，使用[MyBatis](http://mybatis.github.com/mybatis-3/)甚至可以动态映射表名（请参阅[通过 MyBatis 中的参数设置 FROM 子句](https://stackoverflow.com/questions/6350220/setting-the-from-clause-via-parameter-in-mybatis)）

```
<select id="getLookupRows" parameterType="map" resultMap="lookupMap">
   select id, name, active, valid
   from ${table}
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:52:53.820

使用[orm](/questions/tagged/orm "显示标记为“orm”的问题")，您应该真正专注于拥有完整且成熟的对象模型。完成后，自然而然地将对象映射到关系数据库。正如“@JB Nizet”的评论所说，您需要拥有所有对象。[因此，重新考虑您的设计并将其调整为与orm](/questions/tagged/orm "显示标记为“orm”的问题")一起使用可能会很有用，无论是[hibernate](/questions/tagged/hibernate "显示标记为“休眠”的问题")还是任何其他。

[hibernate](/questions/tagged/hibernate "显示标记为“休眠”的问题")有一个名为[“动态模型”](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch04.html#persistent-classes-dynamicmodels)的实验性功能，我对它了解不多，因为我没有机会使用它，但我想它可能会给你一些见解。另请注意，它目前是一项实验性功能，因此将来可能会发生变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-25T23:30:35.820

您可能想查看 ActiveJDBC。它遵循模型属性到表列的动态映射。在这里查看文档[http://javalite.io/setters_and_getters](http://javalite.io/setters_and_getters)和这里[http://javalite.io/runtime_discovery](http://javalite.io/runtime_discovery)。

# actionscript-3 - as3.0 中的删除和添加子按钮

> ID：14010228
> 
> 赞同：0
> 
> 时间：2012-12-23T10:29:17.370
> 
> 标签：actionscript-3

我想点击按钮“choose1”然后按钮会消失，接下来是添加一个按钮。我想在按钮“choose1”的单击事件中发出两个请求。

编辑：这是我的代码

```
import flash.display.MovieClip;
import flash.events.Event;
import flash.events.MouseEvent;
import flash.display.Stage;

public class Bo extends MovieClip
{

    var choose1:Choose;

    public function Bo()
    {
        // constructor code
        choose1=new Choose();
        addChild(choose1);
        choose1.addEventListener(MouseEvent.CLICK,clickChoose);
    }

    function clickChoose(e:MouseEvent):void
    {

        for (var i:Number=stage.numChildren -1; i>=0; i--)
        {
            stage.removeChildAt(i);
            //stage.getChildAt(i).visible = false;
        }

        var ex:Next=new Next();// add new button
        addChild(ex);
        //this.stage.removeEventListener(MouseEvent.CLICK,clickChoose);
    }

} 
```

任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T10:42:03.170

单击后删除按钮是不好的用户体验，请考虑添加您想要的任何按钮，但保留旧按钮。

# c# - 在开始另一个方法之前等待固定时间

> ID：14010233
> 
> 赞同：1
> 
> 时间：2012-12-23T10:30:17.303
> 
> 标签：c#, wpf, threadpool, dispatcher

我想有一种方法可以在开始另一个调用之前等待一个方法在 5 秒内完成。就像它首先显示“Hello”然后等待 5 秒，然后显示“World”并再等待 5 秒以再次显示两条消息。我创建了一个 DispatcherTimer 方法，但它在等待 5 秒内以快速方式显示这两个文本。

```
 private void AutoAnimationTrigger(Action action, TimeSpan delay)
    {
        timer2 = new DispatcherTimer();
        timer2.Interval = delay;
        timer2.Tag = action;
        timer2.Tick += timer2_Tick;

        timer2.Start();
    }

    private void timer2_Tick(object sender, EventArgs e)
    {
        timer2 = (DispatcherTimer)sender;
        Action action = (Action)timer2.Tag;

        action.Invoke();

        timer2.Stop();
    }

 if (counter == 0)
                {
                    AutoAnimationTrigger(new Action(delegate { MessageBox.Show("Hello"); }), TimeSpan.FromMilliseconds(5000));
                    AutoAnimationTrigger(new Action(delegate { MessageBox.Show("World"); }), TimeSpan.FromMilliseconds(5000));

                } 
```

我错过了什么或做错了什么？

**编辑___**

```
 ThreadPool.QueueUserWorkItem(delegate
        {
            //Thread.Sleep(5000);

            Dispatcher.Invoke(new Action(() =>
            {
                TranslateX(4);
                TranslateY(-0.5);

            }), DispatcherPriority.Normal);

            //Dispatcher.BeginInvoke(new Action(() =>
            //{
            //    TranslateY(0.5);
            //}), DispatcherPriority.Normal);

        }); 
```

然后我只是简单地调用该方法..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T10:42:16.037

您调用`AutoAnimationTrigger`了两次覆盖`timer2`，您将其声明为类变量。多个**不同**操作的更简单的解决方案是使用`Thread.Sleep`：

```
 ThreadPool.QueueUserWorkItem(delegate
 {
    Thread.Sleep(5000);
    MessageBox.Show("Hello");
    Thread.Sleep(5000);
    MessageBox.Show("World");
    Thread.Sleep(5000);      
    MessageBox.Show("Hello World");  
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T11:25:15.107

只需`Thread.Sleep(5000)`在两个方法调用之间使用。

# java - Spring Batch - 提交间隔和跳过限制

> ID：14010234
> 
> 赞同：1
> 
> 时间：2012-12-23T10:30:21.457
> 
> 标签：java, spring, transactions, spring-batch, commit

此方案的解决方案 - 提交间隔为 10，跳过限制为 10，总输入记录为 20，前 9 条记录有效，其余无效。

当已读取 9 条记录时，第 10 条无效。块大小为 10，跳过限制为 10，那么 Spring 会批量将这 9 条记录写入输出文件吗？如果没有，如果继续读取剩余的记录，当它读取第 20 条记录时，错误记录的计数将为 11，定义的跳过限制为 10。因此该过程将立即停止。首先读取的有效记录的命运如何。

前 9 条记录是否会写入输出文件。

如果有任何解决方案，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T15:19:21.060

可能的结果不止一种。您必须具体说明无效记录。

**它们是否无效读取：** 在这种情况下，SB 只会调用 ItemReader 下一个值（不回滚）。因此，您最终会遇到跳过限制异常，因为发现 11 条记录无效。

**它们是否无效写入：**在这种情况下，SB 将在提交时重做第一个块——间隔为 1，直到它找到坏记录。在这种情况下，您应该在数据库中找到前 9 条记录。

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-25T17:07:25.647

对于这种情况 - 提交间隔为 10，跳过限制为 10，总输入记录为 20，前 9 条记录有效，其余无效。

当已读取 9 条记录时，第 10 条无效。块大小为 10，跳过限制为 10，因此 Spring 会将这 9 条记录批量写入输出文件。

Answer-SB 将跳过第 10 条无效记录并读取第 11 条记录，然后让 writer 写入正确的第 10 条记录，因为只有一条记录无效，所以跳过计数将为 1。

示例配置 -

# php - 将复选框值插入数据库

> ID：14010236
> 
> 赞同：0
> 
> 时间：2012-12-23T10:30:26.600
> 
> 标签：php, html, phpmyadmin

如何在不增加 id 的情况下将复选框值插入数据库。

这是我的代码：

```
for ($i=0; $i<=sizeof($checkbox); $i++){
    $sql2="INSERT INTO tbl_training VALUES ('".$checkbox[$i]."')";
    $result2=mysql_query($sql2);
} 
```

此代码需要自动递增 id 以避免错误。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T10:33:35.657

在数据库表中指定自增列

[http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

**例如：**

```
CREATE TABLE table1 (
     id INT(10) NOT NULL AUTO_INCREMENT,
     ..
) ENGINE=MyISAM; 
```

然后您的插入查询将起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:36:35.303

如果您在 MySQL`id`中设置为`auto_increment`，则可以将其留空，例如 -

```
$sql2="INSERT INTO tbl_training (id,checkboxes) VALUES ('','".$checkbox[$i]."')"; 
```

# css - 位置：固定菜单在 Android 4+ 中不起作用

> ID：14010239
> 
> 赞同：9
> 
> 时间：2012-12-23T10:31:29.077
> 
> 标签：css, responsive-design, android-browser

在我的三星 Galaxy S3 上使用 Android 4.1 并查看我的[网站](http://tempworks.byethost7.com/)时，我试图让左侧的导航菜单保持原位，但事实并非如此。每当我单击菜单中的链接并刷新页面时，它会在 html 页面的中途反弹，并且链接无法正常工作。它在桌面浏览器上运行良好。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-23T22:09:49.707

呜呼，想通了。其实很简单。只需要在设置中`top`和`left`之后添加一个值`position: fixed`。

例如：`position:fixed;top:0px;left:0px;`

# for-loop - 从循环中的方法返回值

> ID：14010244
> 
> 赞同：0
> 
> 时间：2012-12-23T10:32:09.877
> 
> 标签：for-loop, return-value

我有如下所示的代码：

```
private static String getShoppingLine()
{
    for(int index = 0; index <= ProductInfoName.length; index++)
    {
           return ProductInfoName[index];
    }
} 
```

但它指出了一个错误，最后有一个 return 语句。但我已经有一个在循环中。请指教。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T10:33:19.737

```
private static String getShoppingLine()
{
    for(int index = 0; index <= ProductInfoName.length; index++)
    {
           return ProductInfoName[index];  // don't do this.
    }
    return null;  //add here too
} 
```

与其在`return`里面写语句，`for-loop`不如在外面写。因为，控制权将返回`ProductInfoName[0]`。

**注意：**您的`return`语句必须在方法中找到（如果您已向您的方法声明任何返回类型）。因为，不能保证，你`for-loop`总是执行。然后，在这种情况下，您的方法将不会返回任何内容。因此，您需要`return`在`for-loop`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:34:01.527

当然可以。`ProductInfoName.length`可能是负面的。如果它是否定的，您的`return`语句将不会被执行。

注意：当然实际上它不能是负数，但是编译器在编译代码时并不知道这一点。

第二个注意事项：这不是编写此方法的方式。您总是返回数组中的第一个元素（如果它不存在，您将抛出异常）。您应该将代码替换为：

```
private static ...
{
    if(ProductInfoName.length>0)
        return ProductInfoName[0];
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T10:34:36.737

您将始终返回 ProductInfoName[0] ，为什么不直接写 return productinfoname[0] ？如果数组中根本没有对象怎么办？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T10:38:34.790

您没有在代码中返回任何内容。

如果您想返回最后一个值更改以喜欢下面给出的代码

```
private static String getShoppingLine()
{
    String str="";
    for(int index = 0; index <= ProductInfoName.length; index++)
    {
           str=ProductInfoName[index];
    }
    return str;
} 
```

# apache-flex - Air - 通过 + 按钮调整窗口大小

> ID：14010245
> 
> 赞同：0
> 
> 时间：2012-12-23T10:32:24.833
> 
> 标签：apache-flex, air

运行 air 应用程序并单击 windows 调整大小按钮（在 mac 上为 +）时，新大小是如何确定的？可以以某种方式控制吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:23:59.573

您可以尝试监听`resizing`事件或`displayStateChange`事件，然后设置自己的大小。

您还可以使用 NativeWindow 的 maximizible 属性（创建窗口后无法更改，但是，您可以在初始时定义它）。

# windows-8 - Roamingfolder.CreateFileAsync 如何关闭文件

> ID：14010248
> 
> 赞同：1
> 
> 时间：2012-12-23T10:32:38.627
> 
> 标签：windows-8, microsoft-metro, windows-runtime, windows-store-apps

使用此代码：

```
 private async void writeToStorage(string contents)
    {
        var roamingFolder = Windows.Storage.ApplicationData.Current.RoamingFolder;
        var storFile = await roamingFolder.CreateFileAsync("test", CreationCollisionOption.ReplaceExisting);

        await Windows.Storage.FileIO.WriteTextAsync(storFile, contents);
    } 
```

我需要关闭文件吗？如果是这样..我该怎么做？storFile 上没有关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T12:04:17.970

不，您不需要关闭此文件。

`StorageFolder`和`StorageFile`实例只是一个指向文件夹和文件的指针。使用该`WriteTextAsync`方法将自动打开/写入和关闭流。

# java - 哪个更快：将算术参数传递给函数，还是在调用函数后计算算术？

> ID：14010249
> 
> 赞同：-3
> 
> 时间：2012-12-23T10:32:39.530
> 
> 标签：java, performance, function

我这里有两个功能。它们都有相同的用途，但它们的参数设置不同。哪个更快？提前致谢。

```
//This function's purpose is to print x + y times.
//total = x + y
public void function(int total){
    for (int i = 0; i < total; i++){
        System.out.println("Hello.");
    }
}

//This function is the same as the above.
//The value is calculated within a "for" loop
public void function(int x, int y){
    for (int i = 0; i < x + y; i++){
        System.out.println("Hello.");
    }
}

public void main(String[] arg){
    //Initial variables.
    int x = 4;
    int y = 6;

    //First function call
    function(x + y);

    //Second function call
    function(x, y);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T10:46:27.187

我实际上希望`javac`优化总和，`x + y`但事实并非如此。所以这将把事情留给运行时的其他改进，如 JIT 或 AOT。

现在问题是你会在哪里使用这个 Java 代码？在台式机、服务器、Android 手机、Java 卡上？如果你没有这样的担忧，那么答案对你来说应该不是很重要。但是，如果您的目标是 Java 卡，那么您当然应该使用更好的卡。

（以下来自 javac / javap 1.7.0_09）

```
 public void function(int);
    Code:
       0: iconst_0      
       1: istore_2      
       2: iload_2       
       3: iload_1       
       4: if_icmpge     21
       7: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;
      10: ldc           #3                  // String Hello.
      12: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      15: iinc          2, 1
      18: goto          2
      21: return        

  public void function(int, int);
    Code:
       0: iconst_0      
       1: istore_3      
       2: iload_3       
       3: iload_1       
       4: iload_2       
       5: iadd          
       6: if_icmpge     23
       9: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;
      12: ldc           #3                  // String Hello.
      14: invokevirtual #4                  // Method java/io/PrintStream.println(Ljava/lang/String;)V
      17: iinc          3, 1
      20: goto          2
      23: return 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T11:06:49.503

一次调用`System.out.println`至少比原始加法操作成本高出三个数量级，因此编写一个在循环中打印某些内容并担心 int 加法的函数是没有意义的。您可以通过泰勒级数展开到第 100 个成员来近似正弦函数，并且您仍然不太可能看到函数的两个版本之间的差异。

要点是，即使是最有经验的 Java 资深人士，在性能方面也不相信他们的直觉。在开始考虑瓶颈之前，请**始终分析您的代码。**

# optimization - LuaJIT FFI 字符串比较

> ID：14010251
> 
> 赞同：1
> 
> 时间：2012-12-23T10:32:54.927
> 
> 标签：optimization, lua, ffi, luajit

我正在绑定一个经常使用字符串状态的第三方 C API。例如（伪代码）：

```
ffi.cdef [[
  struct Reply { char * str; size_t len };
  Reply * doSomething();
  void freeReply(Reply * p);
]] 
```

大多数`str`情况下是一个`"OK"`字符串。

最快的检查方法是什么？

我想在这里避免字符串实习：

```
local reply = ffi.gc(ffi.C.doSomething, ffi.C.freeReply)
assert(ffi.string(reply.str, reply.len) == "OK") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T15:42:11.133

不确定它快得多。我会尝试`strncmp`从标准 C 库中调用。

像这样的东西：

```
ffi.cdef [[
  int strncmp ( const char * str1, const char * str2, size_t num );
]]

local ok = ffi.new("char[3]", "ok")

local reply = ffi.gc(ffi.C.doSomething, ffi.C.freeReply)
assert(ffi.C.strncmp(ok, reply.str, reply.len) == 0) 
```

您也可以尝试首先检查`reply.len`是 2 然后调用`memcmp`而不是`strncmp`. 它可能会快一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-08T16:16:41.070

对于短字符串，这将是 LuaJIT 中最快但不是最漂亮的方式。

```
local reply = ffi.gc(ffi.C.doSomething, ffi.C.freeReply)
assert(reply.str[0] == 79 and  -- 79 = 'O' = string.byte("O")
       reply.str[1] == 75 and -- 75 = 'K'
       reply.str[2] == 0 ) 
```

# visual-studio-2010 - 给产品贴上白标

> ID：14010263
> 
> 赞同：0
> 
> 时间：2012-12-23T10:34:40.220
> 
> 标签：visual-studio-2010, wix, wix3.5

我有 2 个项目的视觉工作室解决方案 - ImageBrowser (win forms) 和 ImageBrowserInstaller (WiX)。假设它不是一个独立的产品，而是意味着获得它的企业和客户希望它具有特定的名称，例如 Picture Viewer。这意味着产品文件夹名称将发生变化，程序和功能条目等。

有什么友好的方法吗？我在 XML 中放入的一些分隔符是我可以在编译期间提供的值吗？或者我必须有一套项目来满足这个需求？

希望问题很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T10:39:12.643

您需要在编译之前更改[应用程序设置。](http://msdn.microsoft.com/en-us/library/vstudio/ad7d6w76%28v=vs.100%29.aspx)

# php - 致命错误：未捕获的异常 'Zend_Exception' 带有消息'没有为键 'Zend_Db' 注册条目'

> ID：14010271
> 
> 赞同：0
> 
> 时间：2012-12-23T10:35:39.187
> 
> 标签：php, mysql, zend-framework, pdo

我一直在寻找解决此错误的方法.. 还没有找到。有谁知道如何修理它？

```
致命错误：在 /hermes/bosoraweb075/b2180/.../play/library/Zend/Registry.php:145 中，未捕获的异常“Zend_Exception”带有消息“没有为密钥“Zend_Db”注册条目
堆栈跟踪：
#0 /hermes/bosoraweb075/b2180/..../play/application/Model/Artist/Db.php(47): Zend_Registry::get('Zend_Db')
#1 /hermes/bosoraweb075/b2180/..../play/application/Modules/Default/Controllers/IndexController.php(64): Model_Artist_Db->__construct()
#2 /hermes/bosoraweb075/b2180/.../play/library/Zend/Controller/Action.php(132): IndexController->init()
#3 /hermes/bosoraweb075/b2180/.../play/library/Zend/Controller/Dispatcher/Standard.php(261): Zend_Controller_Action->__construct(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http), 数组)
#4 /hermes/bosoraweb075/b2180/.../play/library/Zend/Controller/Front.php(936): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#5 /hermes/bosoraw 在 /hermes/bosoraweb075/b2180/..../play/library/Zend/Registry.php 第 145 行

```

这是我的所有代码

**引导程序.php**

```
 /** 
     * @access Public
     * return void
    */
    public static function setupRegistry() 
    {
        self::$registry = new Zend_Registry(array(), ArrayObject::ARRAY_AS_PROPS);
        Zend_Registry::setInstance(self::$registry);
    }

        /** 
 * @access Public
 * return void
*/
public static function setupDatabase()
{

    if ( self::$registry->configuration->installed) {

        $dbConfig = new Zend_Config_Ini( self::$root . '/application/Configs/Database.ini', 'default' );

        $db = Zend_Db::factory($dbConfig); 

        // profiler
        $profiler = new Zend_Db_Profiler_Firebug('All DB Queries');
        $profiler->setEnabled(true);

        // Attach the profiler to your db adapter
        $db->setProfiler($profiler);

        self::$registry->set('Zend_Db', $db);
    } 
} 
```

**和模型/艺术家/Db.php**

```
<?php

class Model_Artist_Db
{

    /* @access Public
     * @var object
     */
    private static $db      = null;

    /* @access Public
     * @var object
     */
    private static $cache   = null;

    /* @access Public
     * @var object
     */
    private static $config  = null;

    /**
     * Class constructor
     * @access Public
     */
    public function __construct()
    {
        self::$db = Zend_Registry::get('Zend_Db');

        $moduleConfig = Zend_Registry::get('moduleConfig');
        self::$config = $moduleConfig->module->artist;

        $cacheDir = Zend_Registry::get('siteRootDir') .'/data/cache/' .self::$config->cache->dir;

        $frontendOptions = array('lifetime' => self::$config->cache->lifetime, 'automatic_serialization' => self::$config->cache->serialization);
        $backendOptions  = array('cache_dir' => $cacheDir);

        self::$cache = Zend_Cache::factory('Core', 'File', $frontendOptions, $backendOptions);
    }

    /**
     * @access Public
     * @param Int $page
     * param String $alpha
     * @return Object
     */
    public function getAllArtists($page,$alpha)
    {

        if ( !empty($alpha)) {
            $sql = self::$db->select()
                ->from("artist")
                ->where('artist LIKE ?', $alpha.'%')
                ->order('artist')
                ->group('artist');
        } else {
            $sql = self::$db->select()
                ->from("artist")
                ->order('artist')
                ->group('artist');
        }         

         $paginator = Zend_Paginator::factory($sql);

         $paginator->setCurrentPageNumber($page);

         $paginator->setItemCountPerPage(self::$config->perPage);

         $paginator->setPageRange(self::$config->pageRange);

        return $paginator;
    }

     /**
     * @access Public
     * @return Array
     */
    public function getArtistGenres()
    {
        $sql = self::$db->select()
            ->from(array('a' => 'artist'), array('artist_id', 'artist', 'genres'));

        $result  = self::$db->query($sql)->fetchAll();

        return $result;
    }

    /**
     * @access Public
     * @param String $name
     * @return Array
     */
    public function getArtistByName($name)
    {
        $cacheId = self::_clean($name);

        if(!$result = self::$cache->load('getArtistByName_'.$cacheId) ) {
            $sql = self::$db->select()
                    ->from("artist")
                    ->where('artist = ?', $name);

            $result  = self::$db->query($sql)->fetch();

            /** save cache */
            if(self::$config->cache->enable == 1) {
                self::$cache->save($result, 'getArtistByName_'.$cacheId);
            }
        }    

        return $result;       
    }

    /**
     * @access Public
     * @param Int $artistId
     * @return Array
     */
    public function getArtistByID($artistId)
    {
        $sql = self::$db->select()
                ->from("artist")
                ->where('artist_id = ?', $artistId);

        $result  = self::$db->query($sql)->fetch();

        return $result;
    }

    /**
     * @access Public
     * @param String $guid
     * @return Int
     */
    public function getArtistIdByGuid($guid)
    {
        $sql = self::$db->select()
                ->from(array('a' => 'artist'), array('artist_id') )
                ->where('a.artist_guid = ?', $guid);

        $result  = self::$db->query($sql)->fetch();

        return $result['artist_id'];
    }

    /**
     * @access Public
     * @param String $guid
     * @return Bool
     */
    public function checkArtistImage($guid){
        $sql = self::$db->select()
                ->from(array('ai' => 'artist_images'), array('id') )
                ->where('ai.guid = ?', $guid);

        $result  = self::$db->query($sql)->fetch();

        if($result['id'] > 0) {
            return true;
        } else {
            return false;
        }
    }

    /**
     * @access Public
     * @param Int $artistId
     * @return array
     */
    public function getArtistAlbums($artistId)
    {

        if(!$result = self::$cache->load('getArtistAlbums_'.$artistId) ) {
            $sql = self::$db->select()
                    ->from(array("al" =>"album"), array('album_id','image','released', 'title','track_count', 'playtime_secs', 'play_count', 'date_added'))
                    ->join(array("ar" => "artist"), 'al.artist_id = ar.artist_id', array('artist'))
                    ->where('al.artist_id = ?', $artistId)
                    ->order('al.title')
                    ->group('al.title');

            $result  = self::$db->query($sql)->fetchAll();

            /** save cache */
            if(self::$config->cache->enable == 1) {
                self::$cache->save($result, 'getArtistAlbums_'.$artistId);
            }
        }
        return$result;
    }

    /**
     * @access Public
     * @param Int $artistId
     * @param String $artistAlbum
     * @return Array
     */
    public function getAlbum($artistId, $artistAlbum)
    {
        $cacheId = self::_clean($artistId . $artistAlbum);        

        if(!$result = self::$cache->load('getAlbum_'.$cacheId) ) {

            $sql = self::$db->select()
                    ->from(array("al" =>"album"), array('album_id','image','released', 'title','track_count', 'playtime_secs', 'play_count', 'date_added'))
                    ->join(array("ar" => "artist"), 'al.artist_id = ar.artist_id', array('artist'))
                    ->where('al.artist_id = ?', $artistId)
                    ->where('al.title = ?', $artistAlbum);

            $result  = self::$db->query($sql)->fetch();  

            /** save cache */
            if(self::$config->cache->enable == 1) {
                self::$cache->save($result, 'getAlbum_'.$cacheId);
            }
        }

        return $result;
    }

    /**
     * @access Public
     * @param Int $page
     * @param Int $albumId
     * @return Object
     */
    public function getAlbumTracks($page,$albumId)
    {
         $sql = self::$db->select()
            ->from("files")
            ->where('album = ?', $albumId)
            ->order('track');       

         $paginator = Zend_Paginator::factory($sql);

         $paginator->setCurrentPageNumber($page);

         $paginator->setItemCountPerPage(self::$config->perPage);

         $paginator->setPageRange(self::$config->pageRange);

        return $paginator;
    }

    /**
     * @access Public
     * @param Int $page
     * @param Int $artistId
     * @return Object
     */
    public function getTopPlayedTracks($page,$artistId)
    {
        $sql = self::$db->select()
                ->from(array('f' => 'files'), array('file_id','filename','title','playtime_seconds','play_count'))
                ->join(array('a' => 'album'), 'f.album = a.album_id', array('title as album'))
                ->where('f.artist = ?', $artistId)
                ->order('f.play_count DESC')
                ->order('f.title');

        $paginator = Zend_Paginator::factory($sql);

        $paginator->setCurrentPageNumber($page);

        $paginator->setItemCountPerPage(self::$config->perPage);

        $paginator->setPageRange(self::$config->pageRange);

        return $paginator;
    }

    /**
     * @access Public
     * @param Int $limit
     * @return Array
     */
    public function getTopPlayed($limit)
    {

        if(!$result = self::$cache->load('getTopPlayed') ) {
            $sql = self::$db->select()
                ->from(array('ar' => 'artist'), array('artist', 'image', 'play_count', 'artist_id', 'date_added'))
                ->where('play_count > ?', 0)
                ->order('play_count DESC')
                ->limit($limit);

            $result  = self::$db->query($sql)->fetchAll();       

            /** get counts */
            for($i = 0; $i < count($result); $i++) {

                /** album Count */
                $sql = self::$db->select()
                    ->from('album', 'count(album_id) as album_count')
                    ->where('artist_id = ?', $result[$i]['artist_id']);
                $rs = self::$db->query($sql)->fetch();
                $result[$i]['album_count'] = $rs['album_count'];

                /** track count */
                $sql = self::$db->select()
                    ->from('files', 'count(file_id) as track_count')
                    ->where('artist = ?', $result[$i]['artist_id']);
                $rs = self::$db->query($sql)->fetch();
                $result[$i]['track_count'] = $rs['track_count'];

                /** Play Time */
                $sql = self::$db->select()
                    ->from('files', 'sum(playtime_seconds) as playtime')
                    ->where('artist = ?', $result[$i]['artist_id']);
                $rs = self::$db->query($sql)->fetch();
                $result[$i]['playtime'] = $rs['playtime'];            
            }

            /** save cache */
            if(self::$config->cache->enable == 1) {
                self::$cache->save($result, 'getTopPlayed');
            }
        } 

        return $result;
    }

    /**
     * @access Public
     * @param Int $limit
     * @return Array
     */
    public function getNewArtists($limit)
    {
        if(!$result = self::$cache->load('getNewArtists') ) {

            $sql = self::$db->select()
                ->from(array('ar' => 'artist'), array('artist', 'image', 'date_added','play_count', 'artist_id'))
                ->order('date_added DESC')
                ->group('artist')
                ->limit($limit);

            $result  = self::$db->query($sql)->fetchAll();

            /** get counts */
            for($i = 0; $i < count($result); $i++) {

                /** album Count */
                $sql = self::$db->select()
                    ->from('album', 'count(album_id) as album_count')
                    ->where('artist_id = ?', $result[$i]['artist_id']);
                $rs = self::$db->query($sql)->fetch();
                $result[$i]['album_count'] = $rs['album_count'];

                /** track count */
                $sql = self::$db->select()
                    ->from('files', 'count(file_id) as track_count')
                    ->where('artist = ?', $result[$i]['artist_id']);
                $rs = self::$db->query($sql)->fetch();
                $result[$i]['track_count'] = $rs['track_count'];

                /** Play Time */
                $sql = self::$db->select()
                    ->from('files', 'sum(playtime_seconds) as playtime')
                    ->where('artist = ?', $result[$i]['artist_id']);
                $rs = self::$db->query($sql)->fetch();
                $result[$i]['playtime'] = $rs['playtime'];            
            }

            /** save cache */
            if(self::$config->cache->enable == 1) {
                self::$cache->save($result, 'getNewArtists');
            }   

        }        

        return $result;
    }

    /**
     * @access Public
     * @param Int $page
     * @param Int $artistId
     * @return Object
     */
    public function getArtistImages($page,$artistId)
    {
        $sql = self::$db->select()
            ->from(array('a' => 'artist_images'), array('id','artist_id','title','dateadded','votes','image'))
            ->where('a.artist_id = ?', $artistId);

        $paginator = Zend_Paginator::factory($sql);

        $paginator->setCurrentPageNumber($page);

        $paginator->setItemCountPerPage(self::$config->perPage);

        $paginator->setPageRange(self::$config->pageRange);

        return $paginator;        
    }

    /**
     * @access Public
     * @param Int $imageId
     * @return Array
     */
    public function getArtistImageById($imageId)
    {
        $sql = self::$db->select()
            ->from(array('ai' => 'artist_images'), array('id','guid','artist_id','title','url','dateadded','image'))
            ->where('ai.id = ?', $imageId);

         $result = self::$db->query($sql)->fetch();

        return $result;
    }

    /**
     * @access Public
     * @param Array $simularArtist
     * @return Array
     */
    public function getSimularArtists($simularArtist)
    {
        $cacheId = self::_clean(serialize($simularArtist));

        if(!$array = self::$cache->load('getSimularArtists_'.$cacheId) ) {

            $array = array();

            $c = 0;

            for($i = 0; $i < count($simularArtist['similar']); $i++) {

                $name = urlencode($simularArtist['similar'][$i]['name']);

                $artist = self::getArtistByName($name);

                if( !empty($artist) ) {
                    $array[$c]['artist'] = $artist['artist'];
                    $array[$c]['image']  = $artist['image'];
                    $array[$c]['match']  = $simularArtist['similar'][$i]['match'];

                    $c++;
                } 
            }

            /** save cache */
            if(self::$config->cache->enable == 1) {
                self::$cache->save($array, 'getSimularArtists_'.$cacheId);
            }       

        }    

        return $array;
    }

    /**
     * @access Public
     * @return Array
     */
    public function getArtistCount()
    {
        $sql = self::$db->select()
            ->from(array('ar' => 'artist'), array('count(artist_id) as artist_count'));

        $result  = self::$db->query($sql)->fetch();

        return $result['artist_count'];
    }

    /**
     * @access Public
     * @param Int $artistId
     * @return Void
     */
    public function incrementAlbumCount($artistId)
    {
        $sql = self::$db->select()
            ->from(array('a' => 'artist'), array('album_count'))
            ->where('artist_id = ?', $artistId);

        $result  = self::$db->query($sql)->fetch();

        $data = array(
            'album_count' => $result['album_count'] + 1
        );

        self::$db->update('artist', $data, 'artist_id = ' . $artistId);

    }

    /**
     * @access Public
     * @param Int $artistId
     * @return Void
     */
    public function incrementTrackCount($artistId)
    {
        $sql = self::$db->select()
            ->from(array('a' => 'artist'), array('track_count'))
            ->where('artist_id = ?', $artistId);

        $result  = self::$db->query($sql)->fetch();

        $data = array(
            'track_count' => $result['track_count'] + 1
        );

        self::$db->update('artist', $data, 'artist_id = ' . $artistId);
    }

    /**
     * @access Public
     * @param Int $artistId
     * @return Void
     */
    public function incrementPlayCount($artistId)
    {
        $sql = self::$db->select() 
            ->from(array('a' => 'artist'), array('play_count'))
            ->where('a.artist_id = ?', $artistId);

        $result  = self::$db->query($sql)->fetch();

        $data = array(
            'play_count' => $result['play_count'] + 1
        );

        self::$db->update('artist', $data, 'artist_id = ' . $artistId );
    }

    /**
     * @access Public
     * @param Array $data
     * @param Int $artistId
     * @return Void
     */
    public function updateArtist($data, $artistId)
    {
         self::$db->update('artist', $data, 'artist_id = ' . $artistId );
    }

    /**
     * @access Public
     * @param Array $data
     * @param Int $imageId
     * @return Void
     */
    public function updateArtistImage($data, $imageId)
    {
        self::$db->update('artist_images', $data, 'id = ' . $imageId );
    }

    /**
     * @access Public
     * @param Array $data
     * @return Int
     */
    public function newArtist($data)
    {
        self::$db->insert('artist', $data);
        return self::$db->lastInsertId();                                                                
    }

    /**
     * @access Public
     * @param Array $data
     * @return Int
     */
    public function createNewImage($data)
    {
        self::$db->insert('artist_images', $data);
        return self::$db->lastInsertId();   
    }

    /**
     * @access Public
     * @param Int $imageId
     * @return Void
     */
    public function removeArtistImage($imageId)
    {
        self::$db->delete('artist_images', 'id = '.$imageId);
    }

    /**
     * @access Public
     * @param String $string
     * @return String
     */
    private function _clean($string)
    {
        return md5($string);
    }

} 
```

**数据库配置文件**

```
[default]
adapter = "pdo_mysql"
params.host = "sitename.ipagemysql.com"
params.dbname = "play"
params.username = "play"
params.password = "123456" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:05:56.947

您在何时何地调用编写在引导文件中的 setupDatabase 函数？

不要忘记在这个引导文件中只调用由 _init 前缀添加的方法。您的静态方法（为什么是静态的？）可能永远不会被调用。

这就是为什么您的注册表中没有条目的原因。

希望这可以帮助。

# c# - 未找到对 IQStreamable 的引用

> ID：14010274
> 
> 赞同：0
> 
> 时间：2012-12-23T10:36:09.633
> 
> 标签：c#, .net-4.0, streaminsight

我是`StreamInSight`开发新手。我已经下载了几个示例，现在我正在尝试编译它们。我收到错误，因为**“找不到类型或命名空间名称 'IQStreamable'（您是否缺少 using 指令或程序集引用？）”**我已经在我的项目中包含以下引用 -

> *   Microsoft.ComplexEventProcessing
> *   系统
> *   System.Reactive.Core
> *   System.Reactive.Interfaces
> *   System.Reactive.Linq
> *   System.Reactive.PlatformServices
> *   System.Reactive.Providers

如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T05:29:27.973

您需要确保您下载并安装的 StreamInsight 版本是 v2.1。IQStreamable 接口是 v2.1 中的新接口。确认您拥有正确版本的 StreamInsight 或安装了正确版本后，您需要确保项目中包含适当的命名空间和程序集。IQStreamable 位于 Microsoft.ComplexEventProcessing.Linq 命名空间和 Microsoft.ComplexEventProcessing.dll 中。确保您运行的是最新版本的 Rx 也没有什么坏处。

# ios - iOS - UIViewController、UITableView、UIScrollView 和 UISegmentedControl - 哦，我的

> ID：14010282
> 
> 赞同：1
> 
> 时间：2012-12-23T10:38:31.660
> 
> 标签：ios, uitableview, uiviewcontroller, uiscrollview, uisegmentedcontrol

所以，简单地说，我有以下设置：

UIViewController - 这是主要的 parentController

在这个主视图中，我在最顶部有一个 UIScrollView，在它下面有一个 UITableView。UITableView 通过 NSFetchedResultsController 填充核心数据...

UIScrollView（UIViewController 是这个 UIScrollView 的代表）|- 在这里面，我展示了 2 个 UIView：1 个包含 UISegmentedControl，另一个只包含 UILabels

当segmentedControl 的值发生变化时（即：用户单击它），我只想通过向NSFetchedResultsController 发出新的fetchRequest（只需更改谓词并重新获取）来重新加载UITableView 的行列表。

然而，这*正是*我开始遇到问题的地方。

每当我发出 [tableView reloadData] 时，最顶层的 UIScrollView（不是 UITableView 的 ScrollView，而是我添加到 UIViewController 中的额外）停止响应。

在我发出 [tableView reloadData] 之前，滚动效果很好。发出后，scrollView 停止响应，滚动完全停止。

我已经尝试了以下所有方法：

*   [self.topScrollView setScrollingEnabled:YES]
*   self.topScrollView.delegate = self;
*   [self.topScrollView setContentSize:CGSizeMake(640.0f, self.topScrollView.frame.size.height)];
*   [self.topScrollView setContentOffset:CGPointMake(0, 0)];

我完全删除了 UISegmentedControl。我所做的是在视图的最顶部放置一个按钮，然后发出 [tableView reloadData];。当 tableView 重新加载时， UIScrollView 停止响应。

这是一个错误吗？我在这里完全错过了什么吗？我什至可以开始想到的唯一一件事是 UITableView 继承自 UIScrollView，因此当表重新加载时，它必须做一些事情来导致 topScrollView 要么失去对 contentOffset/Size 和/或其委托的所有感觉，要么某物...

有没有人试过这个？有没有人遇到过这个问题？

我可以解决这个问题的唯一方法是创建一个 ContainerView，将标题拆分为它自己的 UIViewController，然后*将该*UIViewController 设置为 UIVScrollLView 委托并在那里处理整个标题。

虽然这可行 - 我有点困惑，并且真的很想知道是否存在更好的选择......

编辑：这是一个基本代码示例，说明我在将标题拆分为 ContainerView 并通过 embededSegue 加载它之前所做的事情：

```
-(void)viewDidLoad {

    [super viewDidLoad];
}

-(void)viewDidAppear:(BOOL)animated {

    [super viewDidAppear:animated];

    [self.topScrollView setContentSize:CGSizeMake(640.0f, self.topScrollView.frame.size.height)];
    [self.topScrollView setContentOffset:CGPointMake(0, 0)];
}

// .....

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"listItemCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // Load the cell with what is in core data at this index path..
    [self configureCell:cell atIndexPath:indexPath];

    return cell;
}

#pragma mark SegmentedControl Switch

- (IBAction)segmentedControlValueChanged {

    NSFetchRequest *aRequest = [[self fetchedResultsController] fetchRequest];
    NSPredicate *predicate;

    switch(self.segmentedControl.selectedSegmentIndex) {
        case 0:
            predicate = [NSPredicate predicateWithFormat:@"status = %@", @"incomplete"];
        break;

        case 1:
            predicate = [NSPredicate predicateWithFormat:@"status = %@", @"complete"];
        break;

        case 2:
            predicate = [NSPredicate predicateWithFormat:@"status = %@", @"deleted"];
        break;

        default:
            predicate = [NSPredicate predicateWithFormat:@"status = %@", @"none"];
        break;
    }

    [aRequest setPredicate:predicate];

    NSError *error = nil;
    if (![[self fetchedResultsController] performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    [self.tableView reloadData];

//    self.topScrollView.delegate = self;
//    [self.topScrollView setContentSize:CGSizeMake(640.0f, self.topScrollView.frame.size.height)];
//    [self.topScrollView setContentOffset:CGPointMake(0, 0)];
//    [self.topScrollView setScrollEnabled:YES];
} 
```

# c# - WSAEWOULDBLOCK 处理

> ID：14010285
> 
> 赞同：4
> 
> 时间：2012-12-23T10:38:35.857
> 
> 标签：c#, c++, winapi, c++-cli, winsock

我在 C++ CLI 中为使用 winsock 的服务器编写了一个套接字。套接字使用异步方法来发送、接收和接受连接。在生产环境中实现我的套接字后，发送函数停止工作，给我错误 WSAEWOULDBLOCK。根据我在网上的研究，这意味着套接字 IO 的网络缓冲区已满或网络太忙而无法进行我的操作。但是，我还没有看到任何可以解决这个问题的具体解决方案。我的临时解决方案是围绕 WSASend 函数创建一个 do-while 循环，使线程休眠 X 数量的 MS，然后重试。这导致了比以前的套接字（.NET 套接字类）高得多的延迟和较大的延迟峰值。

我发送数据的代码如下：

```
void Connectivity::ConnectionInformation::SendData(unsigned char data[], const int length)
{
    if (isClosed || sendError)
        return;

    Monitor::Enter(this->syncRoot);

    try
    {
        sendInfo->buf = (char*)data;
        sendInfo->len = length;

        do
        {
            state = 0;
            if (WSASend(connection, sendInfo, 1, bytesSent, 0, NULL, NULL) == SOCKET_ERROR)
            {
                state = WSAGetLastError();
                if (state == WSAEWOULDBLOCK)
                {
                    Thread::Sleep(SleepTime);
                    //Means the networking is busy and we need to wait a bit for data to be sent
                    //Might wanna decrease the value since this could potentially lead to lagg
                }
                else if (state != WSA_IO_PENDING)
                {
                    this->sendError = true;
                    //The send error bool makes sure that the close function doesn't get called
                    //during packet processing which could cause a lot of null reffernce exceptions.
                }
            }
        }
        while (state == WSAEWOULDBLOCK);
    }
    finally
    {
        Monitor::Exit(this->syncRoot);
    }
} 
```

有没有办法使用例如 WSAEventSelect 方法以便在我能够发送数据时获得回调？从 MSDN 上的文档中可以看出，等待数据方法也可能会陷入此错误。有人有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T13:04:36.873

错误代码`WSAEWOULDBLOCK`表示您尝试对非阻塞套接字进行操作，但操作无法立即完成。这不是真正的错误——这意味着您可以稍后重试或安排异步 IO（不会失败）。但这并不是你想要的。让我解释：

您应该以以下两种方式之一使用套接字：

1.  同步，阻塞。
2.  异步、非阻塞、基于回调的。

您将两者混合在一起，这会使您变得最糟糕。您创建了一个非阻塞套接字并以可能阻塞的方式使用它。

唉，我没有资格为本地代码套接字提供最佳实践。我建议您阅读[WSASend 的所有文档，](http://msdn.microsoft.com/en-us/library/windows/desktop/ms742203%28v=vs.85%29.aspx)因为它们似乎解释了所有这些。

现在，为什么还会存在这个奇怪的错误代码？这是一个性能优化。您可以推测性地尝试同步发送（非常快）。只有当它失败时，你才应该安排一个异步 IO。如果您不需要该优化（您不需要），请不要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T12:11:27.490

正如@usr 所说，我需要将 LPWSAOVERLAPPED 或 LPWSAOVERLAPPED_COMPLETION_ROUTINE 设置为一个值，以使操作非阻塞。但是，经过测试，我发现我不需要 LPWSAOVERLAPPED 对象才能调用完成例程。MSDN 上的 WSASend 函数文档也提到，如果重叠对象和完成例程为 NULL，则套接字将表现为阻塞套接字。

谢谢，祝大家圣诞快乐！:)

# solr - Solr：在多个索引字段中搜索一个术语并从每个搜索字段返回前“N”个命中

> ID：14010286
> 
> 赞同：1
> 
> 时间：2012-12-23T10:38:43.717
> 
> 标签：solr, autocomplete

我的**Solr 架构中有两个索引字段**

1.  员工姓名
2.  经理姓名

这是纯字符串。

*我的问题是：*给定一个搜索词，我想显示来自经理姓名的前 5 个建议完成，以及来自员工姓名的下 5 个。

我可以使用复制字段，但有时我会从员工姓名中获得所有前 10 名结果。

我有一种预感，提升可以帮助我..但不知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T03:39:55.950

Boost 不能帮你控制结果，在前 10 个结果中各分配 5 个。
可能您可以检查[Field Collapsing](http://wiki.apache.org/solr/FieldCollapsing)，您可以在其中对每个角色（经理和名称）进行分组并限制该组的 5 个结果。
因此，您将有 2 个组返回给您，每个组有 5 个结果。

# php - DOM 解析或正则表达式到来自 html 站点的相关信息

> ID：14010291
> 
> 赞同：0
> 
> 时间：2012-12-23T10:39:19.227
> 
> 标签：php, mysql

下面是来自较大网站的一小段 html 代码。我正在尝试将该站点中的一些信息解析到数据库中。但是我不确定最佳实践是什么。我应该使用正则表达式还是可以使用 PHP DOM 解析器来获取相关数据。

例如。我想获取有关“Prisantydning”=> 2090000 和“Fellesformue”=>4483 和“verditakst”=>2300000 的信息

你有什么建议？

```
<div class="mod">
    <div class="inner">
        <div class="bd objectinfo" data-automation-id="information">
            <h2>Prisdetaljer</h2>
            <dl class="multicol colspan2 fleft mtn">

                    <dt>Prisantydning</dt>
                    <dd>2 090 000,-</dd>

            </dl>
            <dl class="multicol colspan2 fleft mlm mtn">

                    <dt>Fellesformue</dt>
                    <dd>4 483,-</dd>

                    <dt>Verditakst</dt>
                    <dd>
                            2 300 000,-
                        <button class="icon utility strong contrast helpButton"
                                data-helptext-id="Verditakst">?
                        </button>
                        <div id="Verditakst" class="helptext supportText">
                            Verditakst utføres av en autorisert takstmann, og er en teknisk vurdering av hva boligen er
                            verdt.
                            Dette samkjøres med meglers markedsvurdering.
                        </div>
                    </dd>

                    <dt>Låneverdi</dt>
                    <dd>
                            2 000 000,-
                        <button class="icon utility strong contrast helpButton"
                                data-helptext-id="Låneverdi">?
                        </button>
                        <div id="Låneverdi" class="helptext supportText">
                            Låneverdi er en vurdering av markedsverdi som skal gi banken den nødvendige sikkerhet for
                            pant i
                            eiendommen. Låneverdi ligger som oftest på 80 - 90% av verditakst.
                        </div>
                    </dd> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:01:24.493

“大型网站”通常意味着混乱和不可预测的代码。但即使情况并非如此，正则表达式也根本不用于评估 HTML 内容（除了少数非常简单的情况，这种行为可能是合理的）。所以是的，你应该在这里使用像[DOMDocument](http://php.net/manual/en/class.domdocument.php)这样的 DOM 解析器。

[在这种情况下， DOMXpath](http://php.net/manual/en/class.domxpath.php)也是一个不错的补充，因为它可以让您避免选择`DOMDocument`具有 DOM`getElementsByTagName`等功能的节点的麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:54:25.320

html**不规则**，所以使用正则表达式不是正确的方法，Barmar 是正确的

你可以这样使用 DOM：

```
$doc = new \DOMDocument();
$doc->loadHtmlFile($yourUrl);//needs ini option "allow_url_fopen" to be true
$datas = array();
foreach($doc->getElementsByTagName('dt') as $dt){
     //get the datas : $dt->textContent is the key
     //as a first approach we get the whole text value of the dd that is related
     $datas[$dt->textContent] = $dt->nextSibling->textContent ;
     //then we just get the figures
     $datas[$dt->textContent]=preg_replace('#[^0-9]+$#','',$datas[$dt->textContent]);
} 
```

# php - MySql——如何记录使用过的条目？

> ID：14010295
> 
> 赞同：3
> 
> 时间：2012-12-23T10:39:41.187
> 
> 标签：php, mysql

我有一个应用程序（更可能是一个测验应用程序），我将所有 1000 个测验都保存在 MySQL 数据库中，当用户请求时，我想从该表中检索一个随机问题，我可以使用 RAND() 函数轻松完成在 MySQL 中.. 我的问题是，我不想给用户两次或多次相同的问题，我怎样才能记录检索到的问题？我必须为每个用户创建表吗？这不会增加加载时间吗？请帮助我，任何帮助将是一个很大的帮助..

-问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T10:42:33.420

如果您想在短时间内使用它，请使用用户的`$_SESSION`。

如果您需要长期（比如说明天，而不是问同样的问题） - 您必须创建额外的表`usersToQuestions`，您将在其中存储用户 ID 和用户已经被问过的问题。

在这两种情况下检索问题都需要一个简单的 IN 条件：

```
SELECT * FROM questions 
WHERE id not IN  ('implode(",", $_SESSION["asked"])')

SELECT * FROM questions 
WHERE id not IN  ( 
    SELECT question_id FROM questions2users WHERE userid = 123
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T10:46:03.150

> 我的问题是，我不想给用户两次或多次相同的问题，我怎样才能记录检索到的问题？我必须为每个用户创建表吗？这不会增加加载时间吗？

是的，但可能没有那么多。

您保留一个额外的表格，`userId, questionId`并在其中插入已经向各个用户提出的问题。

当您向用户 456 询问问题 123 时，您运行一个`INSERT`

```
INSERT INTO askedQuestions (userId, questionId) VALUES (456, 123); 
```

然后你提取`questions`问题`LEFT JOIN`

```
SELECT questions.* FROM questions
    LEFT JOIN askedQuestions ON (questions.id = askedQuestions.questionId AND askedQuestions.userId = {$_SESSION['userId']} )
    WHERE askedQuestions.userId IS NULL
    ORDER BY RAND() LIMIT 1; 
```

如果你保持`askedQuestions`索引`(userId, questionId)`，加入将非常有效。

## 关于 RAND() 的注释

在这样的表上选择不应该使用，这将在输出其中一个之前`ORDER BY RAND()`检索*表中的所有行。*通常你会`questionId`随机选择 a ，然后选择带有 that 的问题，`questionId`这样会更快。但是在这里，您无法保证该用户尚未向该用户提出问题*，*并且更快的查询**可能会失败**。

当*大多数*问题仍然可以自由提问时，您可以使用

```
WHERE questions.questionId IN ( RAND(N), RAND(N), RAND(N), ... )
  AND askedQuestions.userId IS NULL LIMIT 1 
```

其中 N 是问题的数量。您提取的随机数中至少有一个可能仍然是免费的。这`IN`会降低性能，您将不得不与 s 的数量取得平衡`RAND`。当几乎所有问题都被问到时，匹配的机会就会减少，即使有很多`RAND`s，您的查询也可能不会返回任何内容（也因为`RAND`s 将开始产生重复的 ID，这就是所谓的*生日悖论*）。

实现两全其美的一种方法可能是确定最大尝试次数，例如 3 次（或者更好，基于剩余问题的数量）。

对于 X 次，您生成（在 PHP 中）一组 Y 随机 id 在 1 和 1000 之间，并尝试`(userId, questionId)`从`askedQuestions`. 该表很薄且有索引，因此速度非常快。如果**失败**，则提取`questionId`是随机且免费的，您可以运行

```
SELECT * FROM questions WHERE id = {$tuple['questionId']}; 
```

这也非常快。如果您成功 X 次，即 X 次，所有 Y 个随机 questionId 都被注册为已被询问，然后您运行完整查询。大多数用户将几乎立即得到服务（两个非常快速的查询），只有少数真正敬业的用户需要更多处理。您可能希望设置某种警报来警告您用户没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T10:48:32.183

一种解决方案是在**问题**表中添加一个**ID 列**，当您将其提供给用户时，您会使用您为用户提供的问题列表检查该 ID。

 **您可以使用内存数据结构（如**List**）来跟踪提供给特定用户的问题。这样，您只需要列表数组而不是表格即可完成工作。**

# python - 什么叫，通过 NLP 从 HTML 中提取地址

> ID：14010297
> 
> 赞同：2
> 
> 时间：2012-12-23T10:40:22.033
> 
> 标签：python, nlp, nltk

我有 300k+ html 文档，我想从中提取邮政地址。数据是不同的结构，所以正则表达式不起作用。

我已经阅读了大量有关 Python 的 NLP 和 NLTK 的内容，但是我仍在努力从哪里开始。

这种方法称为词性标记还是分块/部分解析？我找不到任何有关如何实际标记页面的文档，以便我可以在其上训练模型，甚至找不到我应该训练的内容。

所以我的问题；

*   这种方法叫什么？
*   我如何标记一些要训练的文档

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:15:33.697

**Qn：哪个 NLP 任务与这个任务密切相关？**

**Ans：**检测邮政地址的任务可以看作是[名称实体识别](http://en.wikipedia.org/wiki/Named-entity_recognition)（NER）任务。但我建议将任务视为简单的 html[序列标签](http://en.wikipedia.org/wiki/Sequence_labeling)（即您的输入数据），然后执行一些标准的机器学习[分类](http://en.wikipedia.org/wiki/Classification_in_machine_learning)。

**问：如何标记一些文档以用作训练数据？**

**答：**您可以做的是：

1.  将每个单词或每一行标记为**B** egin **I** nside 或**O** utside
2.  选择有[监督的分类](http://en.wikipedia.org/wiki/Classification_in_machine_learning)方法
3.  决定什么是特征（这里有一些提示：[特征选择](http://www.improvedoutcomes.com/docs/WebSiteDocs/Classification_and_Prediction/SLAM/An_Introduction_to_Classification.htm)）
4.  构建模型（基本上只运行配置了特征的分类软件）
5.  瞧，输出应该给你**B**和**I**和 **O**，然后删除所有标记为**O**的实例 ，你将留下作为地址的行/单词

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:49:35.867

您的任务称为信息提取，但这是一个非常非常广泛的概念。幸运的是，您的任务更加有限（街道地址），但您没有提供很多信息：

1.  地址在哪些国家/地区？东京的地址看起来与克利夫兰的地址大不相同。如果您对有限数量的国家/地区的地址感兴趣，您成功的几率会大得多——您可以从每个国家/地区开发一个解决方案。如果我们谈论的数量*非常*有限，您可以[手动](http://code.google.com/p/graph-expression/wiki/USAAddressExtraction)编写识别器。

2.  我们在谈论什么样的网页？它们是随机集合，还是您可以将它们分组为有限数量的网站和格式？地址出现在哪里？（即，是否有任何上下文线索可以用来将它们归零？）

对于问题 2，我将采用更糟糕的情况：页面完全不同，地址可能在任何地方。不确定最先进的技术是什么，但我会将其视为分块问题。

要获得任何体面的结果，您需要一个训练集。至少，来自相同位置和风格（非正式、不完整、完整）的*大量地址与您要提取的地址相同。*然后，您可以尝试从分块器中获得不错的性能（可能通过后处理）。

PS。我不会只是丢弃 html 标记。它包含有关可能有用的文档结构的信息。在您丢弃 html 标记之前，我会添加结构标记（段落、强调、标题、列表、显示）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T11:19:18.703

Apple 将他们的软件称为“数据检测器”（小心，它已获得专利——他们为此赢得了针对 HTC Android 手机的[禁令）。](http://appleinsider.com/articles/11/12/19/itc_grants_injunction_over_apple_data_detectors_patent_against_htc_android_phones.html)更一般地说，我认为这个应用程序被称为[信息提取](http://en.wikipedia.org/wiki/Information_extraction)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-29T21:08:43.730

从 HTML 页面中去除文本（除非 HTML 中有一种方法可以识别地址文本，例如具有特定类的 div），然后构建一组与使用的地址格式匹配的规则。

如果在多个国家/地区有邮政地址，则格式可能明显不同，但在一个国家/地区内，格式相同（有一些调整）或无效。

例如，在美国，地址是 3 或 4 行（包括人）。通常有一个邮政编码（5 位可选，后跟 4 位）。其他国家有不同格式的邮政编码。

除非您的目标是所有地址都 100% 准确，否则您可能应该在任务预算内尽可能多地提取地址。

除非您想使用命名实体识别来查找城市、国家等，否则这似乎不是 NLP 的任务。

# .htaccess - htaccess 重写注销 url

> ID：14010299
> 
> 赞同：0
> 
> 时间：2012-12-23T10:40:30.067
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

我有一个这样的网址

```
http://example.com/wp-login.php?action=logout&_wpnonce=ab720d18d2 
```

有人可以帮我这样重写吗

```
http://example.com/logout/ab720d18d2 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:04:34.990

我们是来回答问题的。不是为你写代码。

但是因为快到圣诞节了：

```
RewriteRule ^logout/(.*) /wp-login.php?action=logout&_wpnonce=$1 
```

# apache-flex - 结合状态和验证器 - flash builder

> ID：14010301
> 
> 赞同：1
> 
> 时间：2012-12-23T10:41:24.917
> 
> 标签：apache-flex, flash-builder, validation, states

我正在为我的学校项目创建一个在线商店，但我有一个无法解决的问题。

现在我制作了表格供用户填写，并添加了一些验证器来检查用户是否填写了正确的信息。用户填写表单后，他们可以单击提交按钮继续。

我也在处理状态，所以当我按下提交按钮时，我将进入下一页。

现在我的问题是：即使用户没有填写表格并且他点击“提交”，他仍然会进入下一页。验证有效，但不会阻止用户继续。

这是我的验证码

```
<mx:EmailValidator id="emailValidator"
                       source="{email}"
                       property="text"
                       triggerEvent="change"/>
    <mx:StringValidator id="nameValidator"
                        source="{Name}"
                        property="text"
                        requiredFieldError="Put in a name"
                        triggerEvent="change"/>
    <mx:StringValidator id="SurnameValidator"
                        source="{Surname}"
                        property="change"
                        requiredFieldError="Put in a surname"
                        triggerEvent="click"/>
    <s:NumberValidator id="PostcodeValidator"
                       source="{Postcode}"
                       property="text"
                       requiredFieldError="Put in a zipcode"
                       triggerEvent="change"/> 
```

现在按钮代码

```
<s:Button label="submit"
              id="submitButton"
              click="currentState='Shoppingstate'"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:55:57.473

您可以将 submitButton 的启用属性绑定到验证器的状态

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-23T18:23:48.450

我会对每个字段进行检查。首先将提交按钮单击事件处理程序更改为正式方法：

```
<s:Button label="submit"
              id="submitButton"
              click="onSubmit(event)"/> 
```

然后检查方法中的验证方法：

```
protected function onSubmit(event:Event):void{
 if((email.errorString == '') && (Name.errorString == '') && (Surname.errorString == '') (Postcode == '')){
 currentState='Shoppingstate'
}
} 
```

# haskell - Haskell 安装失败

> ID：14010302
> 
> 赞同：2
> 
> 时间：2012-12-23T10:41:47.550
> 
> 标签：haskell, cabal, fay

我正在尝试安装[fay](http://fay-lang.org/ "javascript中的haskell")但 src 编译失败

```
$ cabal install fay
...
Preprocessing executable 'fay' for fay-0.10.1.0...
[ 1 of 14] Compiling Data.List.Extra  ( src/Data/List/Extra.hs, dist/build/fay/fay- tmp/Data/List/Extra.o )
[ 2 of 14] Compiling System.Process.Extra ( src/System/Process/Extra.hs, dist/build/fay/fay-tmp/System/Process/Extra.o )    
...
[13 of 14] Compiling Language.Fay     ( src/Language/Fay.hs, dist/build/fay/fay-tmp/Language/Fay.o )
[14 of 14] Compiling Main             ( src/Main.hs, dist/build/fay/fay-tmp/Main.o )

src/Main.hs:89:55:
Couldn't match expected type `Either ParseError (Maybe String)'
            with actual type `Maybe b0'
Expected type: b0 -> Either ParseError (Maybe String)
  Actual type: b0 -> Maybe b0
In the first argument of `(.)', namely `Just'
In the first argument of `reader', namely `(Just . Just)'

src/Main.hs:96:35:
Couldn't match expected type `Either ParseError a0'
            with actual type `Maybe b0'
Expected type: b0 -> Either ParseError a0
  Actual type: b0 -> Maybe b0
In the first argument of `(.)', namely `Just'
In the first argument of `reader', namely
  `(Just . wordsBy (== ','))'
Failed to install fay-0.10.1.0
cabal: Error: some packages failed to install:
fay-0.10.1.0 failed during the building phase. The exception was:
ExitFailure 1 
```

我不知道这是我的错误还是包装问题。

我正在使用：arch linux、ghc-7.4.2、cabal-1.16.0.3

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T11:08:20.333

这绝对是一个包问题，因为没有足够严格地指定依赖项。如果一个包遵循[包版本控制策略](http://www.haskell.org/haskellwiki/Package_versioning_policy)，如果你能满足依赖，包应该构建。

查看 fay 包描述，我注意到几乎没有任何依赖项具有下限或上限。所以基本上，你必须进行实验。

查看代码，我发现`reader`错误中提到的是[Options.Applicative.Builder.reader](http://hackage.haskell.org/packages/archive/optparse-applicative/latest/doc/html/Options-Applicative-Builder.html#v:reader)。此函数已在 0.4.3 和 0.5.0 之间更改了类型签名，因此请尝试通过将optparse [-applicative](http://hackage.haskell.org/package/optparse-applicative)`--constraint "optparse-applicative < 0.5"`降级为`cabal install`.

# spring - Mybatis、BoneCP、Spring：Tomcat 7.0 中的 SQLBuilder 内存泄漏问题。*

> ID：14010310
> 
> 赞同：3
> 
> 时间：2012-12-23T10:42:33.450
> 
> 标签：spring, memory, memory-leaks, mybatis, bonecp

我正在做一个使用 Spring、Mybatis 和 BoneCP 的项目。

每次我停止 Tomcat 服务器时，我都会观察到以下内存泄漏问题：

```
Dec 23, 2012 5:20:21 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/project] appears to have started a thread named [com.google.common.base.internal.Finalizer] but has failed to stop it. This is very likely to create a memory leak.
Dec 23, 2012 5:20:21 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/project] appears to have started a thread named [Memcached IO over {MemcachedConnection to /127.0.0.1:11211}] but has failed to stop it. This is very likely to create a memory leak.
Dec 23, 2012 5:20:21 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/project] appears to have started a thread named [transcoder-1-1] but has failed to stop it. This is very likely to create a memory leak.
Dec 23, 2012 5:20:21 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/project] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@386602aa]) and a value of type [org.apache.ibatis.jdbc.SqlBuilder.SQL] (value [org.apache.ibatis.jdbc.SqlBuilder$SQL@313903d3]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Dec 23, 2012 5:20:21 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/project] created a ThreadLocal with key of type [jsr166y.ThreadLocalRandom$1] (value [jsr166y.ThreadLocalRandom$1@162a2ae4]) and a value of type [jsr166y.ThreadLocalRandom] (value [jsr166y.ThreadLocalRandom@2a65ea1a]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak. 
```

每次访问数据库时，SqlBuilder 的数量似乎都会增加。非常感谢您的帮助/评论。

这是我的配置：

pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.firefly</groupId>
    <artifactId>ArcaneAeon</artifactId>
    <name>project</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>
    <properties>
        <java-version>1.6</java-version>
        <org.springframework-version>3.1.0.RELEASE</org.springframework-version>
        <org.aspectj-version>1.6.9</org.aspectj-version>
        <org.slf4j-version>1.6.6</org.slf4j-version>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.4.3</version>
        </dependency>

        <!-- MyBatis -->
        <dependency>
            <groupId>org.mybatis</groupId>
            <artifactId>mybatis</artifactId>
            <version>3.1.1</version>
        </dependency>

        <!-- <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency> -->

        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>

        <!-- Connection Pooling -->
        <dependency>
            <groupId>com.jolbox</groupId>
            <artifactId>bonecp-spring</artifactId>
            <version>0.7.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>com.google.guava</groupId>
            <artifactId>guava</artifactId>
            <version>13.0.1</version>
        </dependency>

        <dependency>
            <groupId>org.mybatis</groupId>
            <artifactId>mybatis-spring</artifactId>
            <version>1.1.1</version>
        </dependency>

        <dependency>
            <groupId>org.mybatis.caches</groupId>
            <artifactId>mybatis-memcached</artifactId>
            <version>1.0.0-beta1</version>
        </dependency>

        <!-- Redis -->
        <dependency>
            <groupId>redis.clients</groupId>
            <artifactId>jedis</artifactId>
            <version>2.1.0</version>
        </dependency>

        <!-- Spring -->

        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-core-asl</artifactId>
            <version>1.9.9</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.9</version>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <!-- Spring Security -->
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-aspects</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-cas</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-crypto</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>    

        <!-- AspectJ -->
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>${org.aspectj-version}</version>
        </dependency>

        <!-- Logging -->
        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4.5</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>apache-log4j-extras</artifactId>
            <version>1.1</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
            <scope>runtime</scope>
        </dependency>

        <!-- @Inject -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>

        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <!-- <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency> -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.mybatis.generator</groupId>
            <artifactId>mybatis-generator-core</artifactId>
            <version>1.3.2</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.data</groupId>
            <artifactId>spring-data-redis</artifactId>
            <version>1.0.2.RELEASE</version>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.12.2</version>
                <configuration>
                    <argLine>-Denvironment="development"</argLine>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>1.7</version>
                <executions>
                    <execution>
                        <id>default-cli</id>
                        <phase>deploy</phase>
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <tasks>
                                <echo message="Copying war package to server....."/>
                                <scp
                                    file="....."
                                    todir="....."
                                    password="....." trust="true" />
                                <echo message="Complete copying war package to server....."/>

                                <echo message="Executing deploy script on server...."/>
                                <sshexec
                                    username="....."
                                    password="....."
                                    host="....."
                                    trust="true"
                                    command="......"/>
                                <echo message="Finish deploying...."/>
                            </tasks>
                        </configuration>
                    </execution>
                </executions>
                <dependencies>
                    <dependency>
                        <groupId>org.apache.ant</groupId>
                        <artifactId>ant-jsch</artifactId>
                        <version>1.8.4</version>
                    </dependency>
                </dependencies>
            </plugin>
            <plugin>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <additionalProjectnatures>
                        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                    </additionalProjectnatures>
                    <additionalBuildcommands>
                        <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                    </additionalBuildcommands>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArgument>-Xlint:all</compilerArgument>
                    <showWarnings>true</showWarnings>
                    <showDeprecation>true</showDeprecation>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <configuration>
                    <mainClass>org.test.int1.Main</mainClass>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

根上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:security="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
            http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security.xsd">

    <!-- Root Context: defines shared resources visible to all other web components -->
    <context:annotation-config /> 
    <context:component-scan base-package="com.firefly.lcgame" />

    <!-- Load Properties Files -->
    <context:property-placeholder location="classpath*:*-${environment}.properties"/>

    <!-- Spring Data Redis -->
    <bean id="connectionFactory"
        class="org.springframework.data.redis.connection.jedis.JedisConnectionFactory">
        <property name="hostName" value="${redis.host}" />
        <property name="port" value="${redis.port}" />
        <property name="password" value="${redis.pass}" />
        <property name="usePool" value="${redis.pooling}" />
        <property name="poolConfig" ref="jedisPoolConfig" />
    </bean>
    <bean id="jedisPoolConfig" class="redis.clients.jedis.JedisPoolConfig">
        <property name="maxActive" value="${redis.maxActive}" />
        <property name="minIdle" value="${redis.minIdle}" />
        <property name="testOnBorrow" value="${redis.testOnBorrow}" />
    </bean>

    <bean id="redisTemplate" class="org.springframework.data.redis.core.RedisTemplate"
        p:connection-factory-ref="connectionFactory" />

    <!-- BoneCP configuration -->
    <bean id="dataSource" class="com.jolbox.bonecp.BoneCPDataSource" destroy-method="close">
        <property name="driverClass" value="${jdbc.driverClassName}" />
        <property name="jdbcUrl" value="${jdbc.url}" />
        <property name="username" value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>
        <property name="idleConnectionTestPeriodInMinutes" value="${boneCP.idleConnectionTestPeriodInMinutes}"/>
        <property name="idleMaxAgeInMinutes" value="${boneCP.idleMaxAgeInMinutes}"/>
        <property name="maxConnectionsPerPartition" value="${boneCP.maxConnectionsPerPartition}"/>
        <property name="minConnectionsPerPartition" value="${boneCP.minConnectionsPerPartition}"/>
        <property name="partitionCount" value="${boneCP.partitionCount}"/>
        <property name="acquireIncrement" value="${boneCP.acquireIncrement}"/>
        <property name="statementsCacheSize" value="${boneCP.statementsCacheSize}"/>
        <property name="releaseHelperThreads" value="${boneCP.releaseHelperThreads}"/>
        <property name="lazyInit" value="true"/>
        <property name="maxConnectionAgeInSeconds" value="${boneCP.maxConnectionAgeInSeconds}"/>
    </bean>

    <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <!-- <property name="configLocation" value="classpath:mybatis-config.xml" /> -->
    </bean>

    <bean id="transactionManager"
        class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="mappers" class="org.mybatis.spring.mapper.MapperScannerConfigurer">
        <property name="basePackage" value="com.firefly.lcgame.dao" />
        <!-- <property name="sqlSessionFactoryBeanName" value="sqlSessionFactory" /> -->
    </bean>

    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>

    <bean
        class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
        <property name="messageConverters">
            <list>
                <ref bean="jsonConverter" />
                <!-- <ref bean="marshallingConverter" />
                <ref bean="atomConverter" /> -->
            </list>
        </property>
    </bean>

    <bean id="jsonConverter"
        class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
        <property name="supportedMediaTypes" value="application/json" />
    </bean>

    <bean id="localeResolver" class="org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver"/>

    <!-- localization -->
    <bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource"
      p:fallbackToSystemLocale="false" p:useCodeAsDefaultMessage="true" p:defaultEncoding="UTF-8">
      <description>Base message source to handle internationalization</description>
      <property name="basenames">
        <list>
          <value>classpath:localization/messages</value>
        </list>
      </property>
    </bean>

    <bean id="annotationMethodHandlerExceptionResolver" class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerExceptionResolver">
      <property name="order" value="0"/>
    </bean>
    <bean id="restExceptionResolver" class="com.firefly.lcgame.exceptions.handler.RestExceptionHandler">
      <property name="order" value="100"></property>
      <property name="errorResolver">
        <bean class="com.firefly.lcgame.exceptions.handler.DefaultRestErrorResolver">
          <property name="localeResolver" ref="localeResolver"></property>
          <!-- <property name="defaultMoreInfoUrl" value="mailto:support@mycompany.com"></property> -->
          <property name="exceptionMappingDefinitions">
            <map>
              <!-- 404 -->
              <entry key="com.firefly.lcgame.exceptions.InvalidAccessExeption" value="404, 1, error.invalid.access,  _exmsg"></entry>
              <!-- 500 (catch all): -->
              <entry key="Throwable" value="500, 1, error.internal, _exmsg"></entry>
            </map>
          </property>
        </bean>
      </property>
    </bean>

  <!-- Secure Rest Service Configuration -->
    <!-- <security:http create-session="never" entry-point-ref="digestEntryPoint">
      <security:intercept-url pattern="/duty/stages**" access="ROLE_USER, ROLE_ADMIN" />
      <security:http-basic />
      <security:custom-filter ref="digestFilter" after="BASIC_AUTH_FILTER" />
    </security:http> -->

    <security:http pattern="/login**"  security="none">
    </security:http>

    <security:http pattern="/dummy**">
      <security:intercept-url pattern="/dummy**" access="ROLE_USER, ROLE_ADMIN"/>
      <security:http-basic/>
    </security:http>

    <security:http pattern="/**" entry-point-ref="digestEntryPoint" >
      <security:intercept-url pattern="/**" access="ROLE_USER, ROLE_ADMIN"/>
      <security:custom-filter ref="digestFilter" position="BASIC_AUTH_FILTER"/>
    </security:http>

    <bean id="digestFilter" class="org.springframework.security.web.authentication.www.DigestAuthenticationFilter">
       <property name="userDetailsService" ref="userService" />
       <property name="authenticationEntryPoint" ref="digestEntryPoint" />
    </bean>

    <bean id="digestEntryPoint" class="org.springframework.security.web.authentication.www.DigestAuthenticationEntryPoint">
      <property name="realmName" value="Arcane Aeon Digest Secure REST-WS"/>
      <property name="key" value="0606e6c2-cee4-3259-9d3e-27d484d716b0"/>
      <property name="nonceValiditySeconds" value="10"/>
    </bean>

    <security:authentication-manager>
      <security:authentication-provider user-service-ref="userService"/>
    </security:authentication-manager>

    <bean id="userService" class="com.firefly.lcgame.services.CustomerUserDetailsService">
    </bean>
</beans> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
  </context-param>
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>

  <!-- Secure Rest Service Configuration  -->
  <filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
  </filter>

  <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

  <servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>
</web-app> 
```

# php - 如何使用复选框在 mySQL 中输入 true (1) 或 false (0) 并显示为在 php / html 表单中选中？

> ID：14010311
> 
> 赞同：0
> 
> 时间：2012-12-23T10:42:35.183
> 
> 标签：php, html, mysql, checkbox

我有一个带有字段名称的表格，该表格`Shift_Trig`旨在以 a 或 的形式将 a或`true`值`false`输入其中。我有一个 html 表单，每行都有一个复选框，选中后，应该在字段中输入 a 。我还希望该复选框反映存储在数据库中的字段中的当前值。`1``0``1``Shift_Trig`

我当前代码遇到的问题是，无论何时我`UPDATE`在该`Shift_Trig`领域，都没有得到我想要的结果。例如，如果我选择：

```
----------------------
| ROW 1   |   false  |
----------------------
| ROW 2   |   true   |
----------------------
| ROW 3   |   false  |
----------------------
| ROW 4   |   true   |
----------------------
| ROW 5   |   true   |
---------------------- 
```

它会`UPDATE`像这样：

```
----------------------
| ROW 1   |   true   |
----------------------
| ROW 2   |   true   |
----------------------
| ROW 3   |   true   |
----------------------
| ROW 4   |   false  |
----------------------
| ROW 5   |   false  |
---------------------- 
```

这是我的表单代码：

```
while($shift_query = $result_shift_query->fetch_assoc())
    {
    echo "<tr>";    
    echo "<td><input type=\"hidden\" name=\"Shift_ID[]\"></td>";
    echo "<td><input type=\"text\" name=\"Shift_Name[]\"></td>";
    echo "<td><input type=\"text\" name=\"Shift_Short_Name[]\"></td>";
    echo "<td><input type=\"text\" name=\"Shift_Color[]\"></td>";
    echo "<td><input type=\"hidden\" name=\"Shift_Trig[]\" value=\"0\"><input type=\"checkbox\" name=\"Shift_Trig[]\"";
        if($shift_query['Shift_Trig'] == '1')
            {
            echo " checked=\"checked\"";
            }
    echo " value=\"1\"></td>";
    echo "<td><input type=\"checkbox\" name=\"deleteBox[]\"></td>";
    echo "</tr>";
    } 
```

这是我的`UPDATE`代码：

```
if(isset($_POST['update_submit']))
    {
    $id = $_POST['Shift_ID'];
    $name = $_POST['Shift_Name'];
    $short_name = $_POST['Shift_Short_Name'];
    $color  = $_POST['Shift_Color'];
    $trig = $_POST['Shift_Trig'];

    $i = 0;

foreach($id as $update) 
    {
    $sql = ("UPDATE shift SET Shift_Name = '$name[$i]', Shift_Short_Name = '$short_name[$i]', Shift_Color = '$color[$i]', Shift_Trig = '$trig[$i]' WHERE Shift_ID = '$update'");
    if(!$result_shift_update = $mysqli->query($sql))
        {
        die = ("There was an error updating the shift table [" . $mysqli->error . "]");
        }
    echo "sql: " . $sql . "<br>";
    $i++;
    } 
```

我删除了一些代码以使其更易于阅读，例如在文本框中使用数据库中的字段数据填充文本框。

当我在表单中选择第 2 行和第 3 行，然后回显`$sql`语句时，我得到了：

```
sql: UPDATE shift SET Shift_Name = 'None', Shift_Short_Name = 'None', Shift_Color = '#FF0000', Shift_Trig = '1' WHERE Shift_ID = '1'
sql: UPDATE shift SET Shift_Name = 'Morning (05:30 - 14:30)', Shift_Short_Name = 'AM', Shift_Color = '#FFF8AF', Shift_Trig = '1' WHERE Shift_ID = '2'
sql: UPDATE shift SET Shift_Name = 'Evening (14:30 - 23:30)', Shift_Short_Name = 'PM', Shift_Color = '#AF9BCF', Shift_Trig = '' WHERE Shift_ID = '3'
sql: UPDATE shift SET Shift_Name = 'General (07:30 - 17:30)', Shift_Short_Name = 'GEN', Shift_Color = '#ABFFB3', Shift_Trig = '' WHERE Shift_ID = '4'
sql: UPDATE shift SET Shift_Name = 'Night (18:00 - 06:00)', Shift_Short_Name = 'EMMA', Shift_Color = '#BFFAFF', Shift_Trig = '' WHERE Shift_ID = '5'
sql: UPDATE shift SET Shift_Name = 'Training', Shift_Short_Name = 'TRN', Shift_Color = '#FFD9BF', Shift_Trig = '' WHERE Shift_ID = '6'
sql: UPDATE shift SET Shift_Name = 'Day Off', Shift_Short_Name = 'OFF', Shift_Color = '#FFD859', Shift_Trig = '' WHERE Shift_ID = '7' 
```

发生的事情是有道理的，因为第一个复选框没有被选中，它没有被传递给`$_POST`数据，但是我如何编写代码才能得到想要的结果？

**编辑：**我补充说：`<input type=\"hidden\" name=\"Shift_Trig[]\" value=\"0\">`但现在我每隔一个复选框显示为选中状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:47:53.570

您需要在 HTML 中为复选框提供明确的索引：

```
$i = 0;
while($shift_query = $result_shift_query->fetch_assoc())
    {
    echo "<tr>";    
    echo "<td><input type=\"hidden\" name=\"Shift_ID[]\"></td>";
    echo "<td><input type=\"text\" name=\"Shift_Name[]\"></td>";
    echo "<td><input type=\"text\" name=\"Shift_Short_Name[]\"></td>";
    echo "<td><input type=\"text\" name=\"Shift_Color[]\"></td>";
    echo "<td><input type=\"checkbox\" name=\"Shift_Trig[$i]\"";
        if($shift_query['Shift_Trig'] == '1')
            {
            echo " checked=\"checked\"";
            }
    echo " value=\"1\"></td>";
    echo "<td><input type=\"checkbox\" name=\"deleteBox[$i]\"></td>";
    echo "</tr>";
    $i++;
    } 
```

在更新代码中，在循环的开头，执行以下操作：

```
 if (!isset($trig[$i])) { $trig[$i] = 0; } 
```

更新代码的其余部分保持不变。

# jquery - Fineuploader 和 rails 3.2 - 无法让进度条工作

> ID：14010312
> 
> 赞同：0
> 
> 时间：2012-12-23T10:43:24.243
> 
> 标签：jquery, ruby-on-rails-3, file-upload, fine-uploader

我有一个使用 3rd 方主机（bitsontherun）上传视频的应用程序。一切正常，除了它没有上传进度条，所以我正在尝试使用fineuploader 来显示一个。但是，我在 Chrome 的开发人员窗口中不断收到 2 个错误，并且文件不再上传：

```
POST http://testevent.xavy.dev/video.json?qqfile=Kitten+Wearing+a+Tiny+Hat+-+Audition+Outtakes+(tuvideo.matiasmx.com).mp4 404 (Not Found) fineuploader.jquery.js:2383
qq.extend._upload fineuploader.jquery.js:2383
qq.UploadHandlerAbstract.upload fineuploader.jquery.js:1986
qq.FineUploaderBasic._uploadFile fineuploader.jquery.js:946
qq.FineUploaderBasic._uploadFileList fineuploader.jquery.js:926
qq.FineUploaderBasic.addFiles fineuploader.jquery.js:737
qq.FineUploaderBasic._onInputChange fineuploader.jquery.js:855
qq.UploadButton.onChange fineuploader.jquery.js:748
(anonymous function) fineuploader.jquery.js:557
[FineUploader] Error when attempting to parse xhr response text (SyntaxError: Unexpected token <) fineuploader.jquery.js:157
qq.log fineuploader.jquery.js:157
qq.FineUploaderBasic.log fineuploader.jquery.js:667
qq.extend._onComplete fineuploader.jquery.js:2406
xhr.onreadystatechange fineuploader.jquery.js:2345 
```

我已按照他们的设置说明进行操作：

```
 $(".videos-fine-uploader").fineUploader
    request:
      endpoint: "/video.json"

    debug: truedebug: true 
```

我认为，错误在于端点，它将 jQuery 指向一个路由。但是，无论我指向什么路线，它都行不通。我需要做的是放置以下（成功的）参数，但即使在阅读了来自网络的十几个不同的 SO 答案和教程之后，我也不知道如何。

```
Started POST "/videos" for 127.0.0.1 at 2012-12-22 18:26:07 +0000
Processing by VideosController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"lg/*******=", "video"=>{"title"=>"test", "industry_list"=>"", "speaker_list"=>"", "theme_list"=>"", "description"=>"test", "user_id"=>"", "video_url"=>#<ActionDispatch::Http::UploadedFile:0x007fe2018a2d58 @original_filename="Kitten Wearing a Tiny Hat - Audition Outtakes (tuvideo.matiasmx.com).mp4", @content_type="video/mp4", @headers="Content-Disposition: form-data; name=\"video[video_url]\"; filename=\"Kitten Wearing a Tiny Hat - Audition Outtakes (tuvideo.matiasmx.com).mp4\"\r\nContent-Type: video/mp4\r\n", @tempfile=#<File:/var/folders/jl/nqsrgwy973j73gnj4j1hd2hc0000gn/T/RackMultipart20121222-14651-1824c66>>}, "commit"=>"Create Video"} 
```

任何人都可以告诉我最好的后续步骤以使其正常工作吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:15:56.347

我想你只需要写：

```
$(".videos-fine-uploader").fineUploader
  request:
    endpoint: "/videos" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:50:00.873

这与进度条无关。我不确定你的问题标题为什么提到这一点。正如您所怀疑的，您只是指定了错误的端点。没有人能帮你解决这个问题。您只需要找出将处理请求的服务器的正确地址并将其输入为您的端点。

# php - 创建一个php代理页面

> ID：14010316
> 
> 赞同：1
> 
> 时间：2012-12-23T10:44:13.743
> 
> 标签：php, curl, proxy

我正在寻找一种在 php 代理页面中加载网站的全功能副本的方法，以便能够抓取和更改其部分元素和样式。

*我决定发布这个问题，将我之前的两个问题合并到一个更相关的演变中：
[实时更改任何站点可视化属性](https://stackoverflow.com/questions/13949067/live-change-any-site-visualization-properties)
[加载外部站点并更改其可视化](https://stackoverflow.com/questions/13778825/load-external-site-and-change-its-visualization)*

我发现`cURL`了对加载页面有用的函数（例如`www.google.it`; 因为`google.com`我收到了`302 redirection`，但我现在不会面对它）。
某些页面元素，例如图像徽标，未正确加载；这应该是由于站点资源的原始相对路径。我必须`//google.it`在他们之前手动添加“”才能修复，它起作用了。

现在我有另一个问题：
如何在站点导航中走得更远？
当我单击任何链接时，页面将重新加载其“真实”目的地。我想我必须重新加载我的 php 并使用 href 链接属性作为 url 来加载（我可以这样做）。
但是提交按钮呢？我怎样才能重定向他们的目的地？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T10:53:11.040

为此使用[现有的代理](https://www.google.com/search?q=php%20proxy%20github)。

一般来说，您只需找到与旧域名匹配的所有字符串并将它们更改为您的 url，因此页面上的每个链接都会`www.bla.com/page.htm`从`proxy.com/page.htm`.

由于可能的 ajax 请求和相对路径，这还需要一些服务器设置。此外，超级难的是捕捉动态构造的 url，例如：`var add r = 'b'+'la.com';`

# javascript - 查找对象中的所有变量的问题

> ID：14010318
> 
> 赞同：0
> 
> 时间：2012-12-23T10:44:19.640
> 
> 标签：javascript, oop

我有一个名为 的对象`Button_Objs`，它的目的是保存我所有的`Button`对象。我在 my 中创建了一个函数，`Button_Objs`它遍历它的每个变量。这就是问题所在，我有一个`if statement`说：`if (i typeof Button){}`. 我这样做是为了只选择`Button`存储的对象。

这是这个的 JSFiddle：http: [//jsfiddle.net/MichaelMitchell/vcZTR/15/](http://jsfiddle.net/MichaelMitchell/vcZTR/15/)

```
var Button_Objs = function() {
    this.getButtons = function() {
        var i;
        for (i in this) {
            if (type of i == Button) { //PROBLEM, also does not work with instanceof.

                document.getElementById('console').innerHTML += ( "button: " + i  + "<br />");

            }
        }
    };
}; 
```

我也试过`instanceof`了，可惜不行:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T10:48:40.867

`i typeof Button`是无效的语法，`type of i == Button`也是如此。

当您使用`for...in`循环遍历对象时，循环变量将保存属性的**名称**，而不是值。您可以使用名称来获取值：

```
if(this[i] instanceof Button) 
```

[阅读有关`for...in`循环](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)的更多信息（我建议查看 MDN 以了解 JS 基础知识）。

* * *

除此之外，我不明白为什么需要构造函数来为按钮创建容器。你可以只使用一个普通的对象：

```
var buttons = {};

// somewhere
buttons['button' + i] = new Button(...); 
```

然后再次使用`for...in`循环迭代对象。

如果您实际上不需要名称（它们似乎只是某种枚举），为什么不使用数组呢？

```
var buttons = [];

// somewhere
buttons.push(new Button(...)); 
```

然后使用`for`循环遍历所有按钮。您甚至不必测试它们的类型。

# iphone - ABAddressBookCreate() , ABAddressBookGetGroupCount , ... 返回 @"0x00000000 “？

> ID：14010320
> 
> 赞同：6
> 
> 时间：2012-12-23T10:44:23.483
> 
> 标签：iphone, objective-c, ios, ios5, abaddressbook

我正在尝试获取组名称，但经过多次“由用户重新加载联系人”调用此方法后，它会给出`nil`值和以下错误。

```
-(void) getGroupsName
    {
        [groupsName removeAllObjects];
        //address book object to interact with iPhone contacts.
        ABAddressBookRef addressbook = ABAddressBookCreate();
        //get groups count
        CFIndex groupsCount          = ABAddressBookGetGroupCount(addressbook);
        //get all available groups as array
        CFArrayRef allGroups         = ABAddressBookCopyArrayOfAllGroups(addressbook);

        for (int i = 0; i<groupsCount; i++) {
            //get group of index=i from groups array
            ABRecordRef group = CFArrayGetValueAtIndex(allGroups, i);
            //get group name, I use __bridge_transfer to transfer from C to objective-c.
            [groupsName addObject:(__bridge_transfer NSString*)ABRecordCopyCompositeName(group)];

        }
        CFRelease(allGroups);
        CFRelease(addressbook);
    }
//////////////////////////////////////////////////////////////

    warning: Could not compile statement PRAGMA journal_mode = wal;: unable to open database file error 14 creating properties table: unable to open database file warning: Could not compile statement SELECT value FROM _SqliteDatabaseProperties WHERE key = ?;: unable to open database file warning: Could not compile statement SELECT value FROM _SqliteDatabaseProperties WHERE key = ?;: unable to open database file warning: Could not compile statement SELECT value FROM
_SqliteDatabaseProperties WHERE key = ?;: unable to open database file warning: Could not compile statement SELECT ROWID, First, Last, Middle, NULL, NULL, NULL, Organization, NULL, NULL, Kind, NULL, NULL, Nickname, Prefix, Suffix, FirstSort, LastSort, CreationDate, ModificationDate, CompositeNameFallback, NULL, StoreID, NULL, FirstSortSection, LastSortSection, FirstSortLanguageIndex, LastSortLanguageIndex, NULL, NULL, NULL, PersonLink, NULL, IsPreferredName FROM ABPerson;: unable to open database file warning: Could not compile statement SELECT ROWID, First, Last, Middle, NULL, NULL, NULL, Organization, NULL, NULL, Kind, NULL, NULL, Nickname, Prefix, Suffix, FirstSort, LastSort, CreationDate, ModificationDate, CompositeNameFallback, NULL, StoreID, NULL, FirstSortSection, LastSortSection, FirstSortLanguageIndex, LastSortLanguageIndex, NULL, NULL, NULL, PersonLink, NULL, IsPreferredName FROM ABPerson;: unable to open database file warning: Could not compile statement INSERT OR REPLACE INTO _SqliteDatabaseProperties VALUES (?, ?);: unable to open database file warning: Could not compile statement SELECT value FROM
_SqliteDatabaseProperties WHERE key = ?;: unable to open database file warning: Could not compile statement INSERT OR REPLACE INTO
_SqliteDatabaseProperties VALUES (?, ?);: unable to open database file warning: Could not compile statement SELECT value FROM
_SqliteDatabaseProperties WHERE key = ?;: unable to open database file warning: Could not compile statement SELECT value FROM
_SqliteDatabaseProperties WHERE key = ?;: unable to open database file warning: Could not compile statement SELECT ROWID FROM ABGroup;: unable to open database file warning: Could not compile statement SELECT ROWID, Name, ExternalIdentifier, StoreID, NULL, NULL, NULL FROM ABGroup;: unable to open database file 
```

**所以我使用本机通知让我知道什么时候`addressbook`被修改以减少我访问的次数`addressbook`，但如果用户进行多次更新并且每次`addrssbook`修改必须调用这个肉类或任何其他相关的`addressbook`.**

所以还需要你的帮助？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:20:32.553

`ABAddressBookCreate`已在 iOS6 中弃用。使用，如果您无权访问通讯录`ABAddressBookCreateWithOptions`，它将返回一个对象。`CFErrorRef`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T12:25:22.120

您为什么不尝试`ABAddressBookRef`使用以下方法尽量减少创建和访问的时间：

```
void ABAddressBookRegisterExternalChangeCallback (
   ABAddressBookRef addressBook,
   ABExternalChangeCallback callback,
   void *context
); 
```

这允许您的应用程序知道地址簿何时被外部修改。并让您知道您需要重新访问地址簿。

您发布的方法与您发布的方法相同，每次调用它都会创建具有新访问地址簿的新对象

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-25T13:58:49.120

正如@thelaws 所指出的，您必须在IOS6 中使用ABAddressBookCreateWithOptions。if ([[[UIDevice currentDevice] systemVersion] floatValue] > 5.1) {

```
 ABAddressBookRef ab = ABAddressBookCreateWithOptions(NULL, NULL);
    __block BOOL accessGranted = NO;
    if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusNotDetermined) {
        ABAddressBookRequestAccessWithCompletion(ab, ^(bool granted, CFErrorRef error) {
            // First time access has been granted, add the contact
            accessGranted = granted;
        });
    }
    else if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusAuthorized)        {
        // The user has previously given access, add the contact
        accessGranted = YES;
    }
    else {
        // The user has previously denied access
        // Send an alert telling user to change privacy setting in settings app
    }
    if (accessGranted) {
// your code goes here
 }
}
else {
// your code goes here
} 
```

另一件事是您是否已在某处初始化了 groupsName ？

除此之外，您是否使用 ABExternalChangeCallBack 来获取地址簿更改的通知？

我认为您应该将组代码放在访问联系人的同一模块中。（如果这对您没有帮助，请澄清！）

# ruby-on-rails - 如何使用我的 rails3 应用程序正确设置嵌套路由？

> ID：14010321
> 
> 赞同：0
> 
> 时间：2012-12-23T10:44:39.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

为什么我会收到这样的错误？

```
undefined method `community_topics_path' for #<#<Class:0x00000009d79098>:0x00000009d70a38>

Extracted source (around line #1):

1: <%= form_for @community_topic, :html => { :class => 'form-horizontal' } do |f| %>
2:   <div class="control-group">
3:     <%= f.label :community_id, :class => 'control-label' %>
4:     <div class="controls"> 
```

**rake routes 显示**我使用 'to_param' 作为社区的 id，但我没有在我的 routes.rb 中定义：community_id。我想知道为什么 rake routes 会显示这个：community_id。这可能是因为我在社区模型中使用了“to_param”吗？这就是为什么它会自动检测并将 :id 替换为 :community_id 的原因？

```
new_community_topic GET    /communities/:community_id/topic/new(.:format)      community_topics#new 
```

**路线.rb**

```
resources :communities do
    resources :community_topics, :path => "topic", :as => :'topic'
end 
```

**意见/社区/_form.html.erb**

```
<%= form_for @community_topic, :html => { :class => 'form-horizontal' } do |f| %>

.......

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                community_topic_path, :class => 'btn' %>
  </div>
<% end %> 
```

更新！！！

**耙路线 | grep community_topic

```
 community_topic_index GET    /communities/:community_id/topic(.:format)          community_topics#index
                         POST   /communities/:community_id/topic(.:format)          community_topics#create
     new_community_topic GET    /communities/:community_id/topic/new(.:format)      community_topics#new
    edit_community_topic GET    /communities/:community_id/topic/:id/edit(.:format) community_topics#edit
         community_topic GET    /communities/:community_id/topic/:id(.:format)      community_topics#show
                         PUT    /communities/:community_id/topic/:id(.:format)      community_topics#update
                         DELETE /communities/:community_id/topic/:id(.:format)      community_topics#destroy 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T10:56:15.260

当您使用嵌套路由时，您必须传递并`community`进入`form_for`：

```
<%= form_for [@community, @community_topic], :html => { :class => 'form-horizontal' } do |f| %> 
```

**upd**：或者`@community_topic.community`如果你没有设置`@community`。

```
<%= form_for [@community_topic.community, @community_topic], :html => { :class => 'form-horizontal' } do |f| %> 
```

您可以观看[本集](http://railscasts.com/episodes/139-nested-resources)RailsCasts 以全面了解嵌套资源。Episode 以 Rails 2 为例，但你应该理解这个概念。

# php - 在aws ec2中设置我的wordpress服务器弹性IP后，我的wordpress无法请求静态文件

> ID：14010322
> 
> 赞同：1
> 
> 时间：2012-12-23T10:44:41.847
> 
> 标签：php, wordpress, amazon-web-services, amazon-ec2

我在aws EC2中构建了一个wordpress，一切都很顺利，直到我将弹性IP绑定到我的wordpress服务器。问题是wordpress静态文件请求仍然是默认的aswec2 public dns，但是我可以看到没有css/js的页面。

> Web服务器：apache2；数据库：aws RDS(mysql)；php版本：5.3.10；我的wordpress地址：[www.aoaostudio.com](http://www.aoaostudio.com)；

因为在绑定Elastic IP之前，我访问了aws public `dns:ec2-***-.ap-northeast-1.compute.amazonaws.com`，我的wordpress博客是可以的！

感觉我的apache2配置可能不对，配置文件如下：

```
<VirtualHost *:80>
        ServerAdmin webmaster@localhost
        ServerName www.aoaostudio.com
        DocumentRoot /var/www/wordpress
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/wordpress>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
        </Directory>
</VirtualHost> 
```

我对php一无所知，也许我的问题很傻，但我希望有人能提供帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T11:27:06.163

您可能在没有弹性 IP 时安装了 wordpress，因此 Wordpress 将您的 URL 记住为 ec2-...

[这里](https://wordpress.org/support/article/changing-the-site-url/)有一个更改您的 Wordpress 安装 URL 的教程。跟随它，`www.aoaostudio.com`用作您的 URL。

基本上，您需要做的是在`functions.php`文件顶部添加这些行，就在开始`<?php`标记之后：

```
update_option( 'siteurl', 'http://example.com' );
update_option( 'home', 'http://example.com' ); 
```

然后只需加载管理员登录页面几次，URL 应该会更新。在所有 URL 都更新后，删除代码非常**重要。**

# xcode - 如何在 XCode 中恢复版本控制？

> ID：14010324
> 
> 赞同：1
> 
> 时间：2012-12-23T10:45:19.023
> 
> 标签：xcode, macos, git, xcode4.5

我最近刚刚在我的 pendrive 上备份了我的 XCode C++ 项目，使用

```
rsync -avu 
```

从那时起，我的项目的版本控制在每个文件上都是灰色的，我可以修改文件而看不到“M”或“A”标志。唯一仍然具有版本控制工作的“共享”文件的文件可以正常工作。（这些共享文件属于另一个名为“Shared”的项目）。

我试过了`git commit -m`，`git add .`甚至`git init`文件在哪里。没有任何效果。

你能帮忙恢复我的项目的版本控制吗？

* * *

更新：

commens 中问题的答案（和答案）：

1.  我的 git 存储库在我的本地硬盘上。
2.  我去了 XCode 中的 Organizer-repository 窗格，我看到我最近`git commit -m "sth"`的“sth” az a commit。我有一个分支：master。
3.  我不确定什么命令可以很好地测试 git，因为我的提交工作（理论上）。
4.  我有一个`.git`在项目文件夹中命名的文件夹。
5.  `git log`正在工作，显示与 XCode Organizer-repository 窗格相同。

我认为 XCode 出于某种原因无法与 git 同步，我不知道如何纠正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:50:55.697

首先，这不是解决您问题的答案，我只是尝试提供一些帮助，可能会让您更接近诊断。

Git 将其文件存储在一个名为`.git`. 检查您的项目中是否存在此文件夹。如果不是，那么您的 Git 存储库就消失了。

接下来，尝试一些基本命令，例如`git log`. 为此，您必须首先`cd`访问您的项目文件夹（或其子文件夹），因为每当您运行 Git 命令时，它都会`.git`在 cwd 或父文件夹中查找该文件夹。如果`git log`不起作用，那么您的 Git 存储库以某种方式损坏。其他人将不得不介入以进一步诊断问题，因为我不是这方面的专家。

最后，您还应该检查您的`rsync`命令是否真的将您的项目`.git`文件夹与备份文件夹同步`.git`。使用这个命令：

```
diff -rq /path/to/project/.git /path/to/backup/.git 
```

如果没有区别（正如我所期望的那样，如果`rsync`工作正常），那么您的 Git 存储库的问题就在您的项目和备份中。如果存在*差异，那么在备份**副本*上尝试下一步可能是值得的（在 Finder 中制作副本应该没问题）。

祝你好运。

# linux - mac中的分段错误11，但在linux中没有，gcc编译器

> ID：14010325
> 
> 赞同：0
> 
> 时间：2012-12-23T10:45:24.903
> 
> 标签：linux, macos, gcc, segmentation-fault, numerical

我有一个代码，它使用数字配方的标准例程来查找 3x3 矩阵的特征向量。虽然代码在 linux 机器上完美运行，但它在 mac 上因分段错误 11 而失败。使用 gdb，当我回溯时，我发现

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x0000000140400008
0x0000000100002a88 in tqli (d=0x7fff5fbffaa4, e=0x7fff5fbffa98, n=3, z=0x140400000) at     ac_nr.c:402
402                         f=z[k][i+1]; 
```

其中 tqli 是数字接收器中的标准例程，并且 z 定义正确。我可以自信地这么说，因为在 linux 机器上，程序在执行过程中没有发现任何困难，并且给了我正确的答案。谷歌搜索无助于获得任何相关答案。任何人都可以暗示mac中发生了什么或如何继续解决这个问题吗？

非常感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T11:40:28.220

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x0000000140400008
0x0000000100002a88 in tqli (d=0x7fff5fbffaa4, e=0x7fff5fbffa98, n=3, z=0x140400000)
at     ac_nr.c:402
402                         f=z[k][i+1]; 
```

如您所见，您的`z`指针是 0x140400000，错误发生在 0x0000000140400008，即 8 个字节之后。这很可能是缓冲区溢出`z`（数组越界）。

为什么它在 Linux 中有效：这可能与分配策略有关，例如，如果 alloc 库以 16 字节的块为单位分配内存以提高性能，而您请求 8 字节的块，则将分配 16 字节。如果没有保护器或金丝雀，没有什么可以阻止您处理超出范围的一项，并且分配了相当于一项额外项的内容，您将不会遇到段错误。

但是在分配 8 字节块的机器上，相同的代码会崩溃。

我强烈支持 Andreas Florath 的建议：在 Linux 中对您的程序运行 valgrind 并检查越界访问。或者您可能想要验证`z`实际访问它的大小和位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T11:36:57.677

我很确定您`z`的定义不正确（或者某些调用 conventon 设置或类似设置是错误的）。

很可能代码在 Linux 上“有效”，但在 Mac 上无效 - 可能是因为内存区域的排列方式不同，但我几乎可以肯定，问题出在您传递给 tqli() 的内容上 - 如果您查看d & e 值，它们看起来像 saen 地址（用于堆栈变量）。z 值是完全不同的范围，出错的地址就在那之后，所以可能是第一次读取[我敢打赌`i`，`k`如果你在调试器中检查变量，它是零]。

# java - 如何使用 Spring Security 3.1 更改当前用户的登录名？

> ID：14010326
> 
> 赞同：14
> 
> 时间：2012-12-23T10:45:26.370
> 
> 标签：java, spring, spring-security

我要求每个用户在保持登录状态时都可以更改自己的用户名。问题是如何更新`Principal`Spring Security 的身份验证令牌中的用户名（）？

（*我必须更新它，因为我在某些业务用例中使用身份验证令牌中的主体名称来识别用户。*）

我使用基于表单和 cookie 记住基于我的登录，所以我的身份验证令牌是`UsernamePaswordAuthenticationToken`和`RememberMeAuthenticationToken`. 两者都有一个`principal`存储登录名的字段。不幸的是这个变量是`final`，所以我不能改变它的值。

**有谁知道 Spring Security 如何建议更改`Principal`身份验证令牌？**

*我当前的解决方法是，我将`UsernamePaswordAuthenticationToken`and替换为`RememberMeAuthenticationToken`具有附加的非最终主体字段的子类，并覆盖该`getPrincipal()`方法以返回此附加主体而不是原始主体。然后，我还对生成此标记的两个类进行了子类化，以创建我的标记而不是原始标记。---但我觉得这是一个很大的hack。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T09:39:05.987

我做了类似的事情，这有点像黑客，但我所做的是更改并保存新的 UserDetails，然后将新的身份验证令牌添加到会话中以获取更新的凭据：

```
Authentication request = new UsernamePasswordAuthenticationToken(user.getUsername(), password);
Authentication result = authenticationManager.authenticate(request);
SecurityContextHolder.getContext().setAuthentication(result); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-23T21:28:49.270

为什么要使用*令牌*即`Authentication`子类？在您的情况下不`Authentication.getPrincipal()`返回一个实例`UserDetails`？

如果您在验证您在家时提供了自己的`UserDetails`实现（带有方法），如果我正确理解您的情况。`setUsername()`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-05T17:28:09.210

我已经实现了 Marcel Stör 提出的想法。

> 为什么要使用令牌，即身份验证子类？在您的情况下，Authentication.getPrincipal() 不会返回 UserDetails 的实例吗？
> 
> 如果您在验证您在家时提供了自己的 UserDetails 实现（带有 setUsername() 方法），如果我正确理解您的情况。

我想分享一下实现：

这是具有可修改用户名的 UserDetails 对象。我将它设为一个子类，`org.springframework.security.core.userdetails.User`因为我将它与通常创建此类的 Jdbc 用户详细信息服务一起使用。

```
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.userdetails.User;
/**
 * Extension of {@link User} where it is possible to change the username.
 */
public class UpdateableUserDetails extends User {

    /** The Constant serialVersionUID. */
    private static final long serialVersionUID = 9034840503529809003L;

    /**
     * The user name that can be modified.
     * It "overrides" the username field from class {@link User}.
     */
    private String modfiableUsername;

    /**
     * Construct the <code>User</code> with the details required by
     * {@link org.springframework.security.authentication.dao.DaoAuthenticationProvider}.
     *
     * @param username the username presented to the
     *        <code>DaoAuthenticationProvider</code>
     * @param password the password that should be presented to the
     *        <code>DaoAuthenticationProvider</code>
     * @param enabled set to <code>true</code> if the user is enabled
     * @param accountNonExpired set to <code>true</code> if the account has not
     *        expired
     * @param credentialsNonExpired set to <code>true</code> if the credentials
     *        have not expired
     * @param accountNonLocked set to <code>true</code> if the account is not
     *        locked
     * @param authorities the authorities that should be granted to the caller
     *        if they presented the correct username and password and the user
     *        is enabled. Not null.
     *
     * @throws IllegalArgumentException if a <code>null</code> value was passed
     *         either as a parameter or as an element in the
     *         <code>GrantedAuthority</code> collection
     */
    public UpdateableUserDetails(final String username, final String password, final boolean enabled,
            final boolean accountNonExpired, final boolean credentialsNonExpired, final boolean accountNonLocked,
            final Collection<? extends GrantedAuthority> authorities) throws IllegalArgumentException {
        super(username, password, enabled, accountNonExpired, credentialsNonExpired, accountNonLocked, authorities);
        this.modfiableUsername = username;
    }

    /**
     * Calls the more complex constructor with all boolean arguments set to {@code true}.
     * @param username the username presented to the
     *        <code>DaoAuthenticationProvider</code>
     * @param password the password that should be presented to the
     *        <code>DaoAuthenticationProvider</code>
      * @param authorities the authorities that should be granted to the caller
     *        if they presented the correct username and password and the user
     *        is enabled. Not null.
     */
    public UpdateableUserDetails(final String username, final String password,
            final Collection<? extends GrantedAuthority> authorities) {
        super(username, password, authorities);
        this.modfiableUsername = username;
    }

    /**
     * Return the modifiable username instead of the fixed one.
     *
     * @return the username
     */
    @Override
    public String getUsername() {
        return this.modfiableUsername;
    }

    public void setUsername(final String username) {
        this.modfiableUsername = username;
    }

    /**
     * Returns {@code true} if the supplied object is a {@code User} instance with the
     * same {@code username} value.
     * <p>
     * In other words, the objects are equal if they have the same user name, representing the
     * same principal.
     *
     * @param rhs the other object
     * @return true if equals
     */
    @Override
    public boolean equals(final Object rhs) {
        if (rhs instanceof User) {
            return this.modfiableUsername.equals(((User) rhs).getUsername());
        }
        return false;
    }

    /**
     * Returns the hashcode.
     * 
     * In order not to get any problems with any hash sets that based on the fact that this hash is not changed
     * over livetime and not to fail one of the constraints for {@link Object#hashCode()},
     * this method always returns the same constant hash value.
     * 
     * I expect that this is no such deal, because we expect not to have so many logged in users, so the hash sets
     * that use this as an key will not get so slow.  
     *
     * @return the hash
     */
    @Override
    public int hashCode() {
        return 1;
    }

    /**
     * Like {@link User#toString()}, but print the modifiable user name.
     *
     * @return the string representation with all details
     */
    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append(super.toString()).append(": ");
        sb.append("Username: ").append(this.modfiableUsername).append("; ");
        sb.append("Password: [PROTECTED]; ");
        sb.append("Enabled: ").append(isEnabled()).append("; ");
        sb.append("AccountNonExpired: ").append(isAccountNonExpired()).append("; ");
        sb.append("credentialsNonExpired: ").append(isCredentialsNonExpired()).append("; ");
        sb.append("AccountNonLocked: ").append(isAccountNonLocked()).append("; ");

        if (!getAuthorities().isEmpty()) {
            sb.append("Granted Authorities: ");

            boolean first = true;
            for (GrantedAuthority auth : getAuthorities()) {
                if (!first) {
                    sb.append(",");
                }
                first = false;

                sb.append(auth);
            }
        } else {
            sb.append("Not granted any authorities");
        }
        return sb.toString();
    }    
} 
```

的子类`UserDetailsService`

```
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.userdetails.jdbc.JdbcDaoImpl;
/**
 * Create {@link UpdateableUserDetails} instead of {@link org.springframework.security.core.userdetails.User} user details.
 */
public class JdbcDaoForUpdatableUsernames extends JdbcDaoImpl {

    /**
     * Instantiates a new jdbc dao for updatable usernames impl.
     *
     * @param privilegesService the privileges service
     */
    public JdbcDaoForUpdatableUsernames(final PrivilegesService privilegesService) {
        super(privilegesService);
    }

    /**
     * Can be overridden to customize the creation of the final UserDetailsObject which is
     * returned by the <tt>loadUserByUsername</tt> method.
     *
     * @param username the name originally passed to loadUserByUsername
     * @param userFromUserQuery the object returned from the execution of the
     * @param combinedAuthorities the combined array of authorities from all the authority loading queries.
     * @return the final UserDetails which should be used in the system.
     */
    @Override
    protected UserDetails createUserDetails(final String username, final UserDetails userFromUserQuery,
            final List<GrantedAuthority> combinedAuthorities) {
        String returnUsername = userFromUserQuery.getUsername();

        if (!isUsernameBasedPrimaryKey()) {
            returnUsername = username;
        }

        return new UpdateableUserDetails(returnUsername,
                userFromUserQuery.getPassword(),
                userFromUserQuery.isEnabled(),
                true,
                true,
                true,
                combinedAuthorities);
    }
} 
```

*我希望有人也可以使用它。*

# r - 用 R 在对数尺度上转换可变密度

> ID：14010332
> 
> 赞同：6
> 
> 时间：2012-12-23T10:46:38.967
> 
> 标签：r, scale, logarithm

我想绘制范围如下的变量的密度：

```
 Min.   :-1214813.0  
 1st Qu.:       1.0  
 Median :      40.0  
 Mean   :     303.2  
 3rd Qu.:     166.0  
 Max.   : 1623990.0 
```

密度的线性图导致 [0,1000] 范围内的高柱，有两个非常长的尾向正无穷大和负无穷大。因此，我想将变量转换为对数刻度，以便我可以看到平均值附近发生了什么。例如，我正在考虑类似的事情：

```
log_values = c( -log10(-values[values<0]), log10(values[values>0])) 
```

这导致：

```
Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
-6.085   0.699   1.708   1.286   2.272   6.211 
```

这样做的主要问题是它不包含这些`0`值。当然，我可以将所有值从`0`with移开`values[values>=0]+1`，但这会在数据中引入一些失真。

将这个变量转换为对数刻度的可接受且科学可靠的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T17:17:10.117

你所拥有的基本上就是@James 所建议的。这对于 (-1,1) 中的值是有问题的，尤其是那些接近原点的值：

```
x <- seq(-2, 2, by=.01)
plot(x, sign(x)*log10(abs(x)), pch='.') 
```

![在此处输入图像描述](../Images/65fbfc2f4248aa7698b2d3df51beb4eb.png)

这样的事情可能会有所帮助：

```
y <- c(-log10(-x[x<(-1)])-1, x[x >= -1 & x <= 1], log10(x[x>1])+1)

plot(x, y, pch='.') 
```

![在此处输入图像描述](../Images/3c4c594a58cc425f72d9906d9f94a867.png)

这是连续的。可以通过使用区间 (-1/log(10), 1/log(10)) 强制 C^1，该区间通过求解 d/dx log10(x) = 1 得到：

```
z <- c( -log10(-x[x<(-1/log(10))]) - 1/log(10)+log10(1/log(10)),
         x[x >= -1/log(10) & x <= 1/log(10)],
         log10(x[x>1/log(10)]) + 1/log(10)-log10(1/log(10))
       )
plot(x, z, pch='.') 
```

![在此处输入图像描述](../Images/515bf87e0c723ee8176e2e6b4b3653d6.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T11:47:12.197

除了转换之外，您还可以操纵直方图本身来了解您的数据。这为您提供了绘图本身保持可读性的优势，并且您可以立即了解中心的分布。假设我们模拟以下数据：

```
Data <- c(rnorm(1000,5,10),sample(-10000:10000,10))
> summary(Data)
     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
-9669.000    -2.119     5.332    85.430    12.460  9870.000 
```

然后你有几种不同的方法。最容易看到数据中心正在发生的事情，就是绘制数据中心。在这种情况下，假设我对第一个和第三个四分位数之间发生的事情感兴趣，我可以绘制：

```
hist(Data,
     xlim=c(-30,30),
     breaks=c(min(Data),seq(-30,30,by=5),max(Data))
     main="Center of Data"
     ) 
```

![在此处输入图像描述](../Images/e9559184bb0db316b4deac9915855236.png)

如果您还想计算尾部，您可以转换数据以折叠尾部并更改轴以反映这一点，如下所示：

1.  您将感兴趣范围之外的所有值分配给该范围之外的值
2.  您绘制直方图，将所有极值合并到一个 bin 中
3.  您使用正确的标签构建 X 轴
4.  您`axis.break()`从包`plotrix`中使用在 X 轴上添加一些中断，表示不连续轴

为此，您可以使用以下代码：

```
 require(plotrix)
 # rearrange data
 plotdata <- Data
 id <- plotdata < -30 | plotdata > 30
 plotdata[id] <- sign(plotdata[id])*35
 # plot histogram
 hist(plotdata,
      xlim=c(-40,40),
      breaks=c(-40,seq(-30,30,by=5),40),
      main="Untailed Data",
      xaxt='n'   # leave the X axis away
      )
 # Construct the X axis
 axis(1,
      at=c(-40,seq(-30,30,by=10),40),
      labels=c(min(Data),seq(-30,30,by=10),max(Data))
 )
 # add axis breaks
 axis.break(axis=1,breakpos=-35)
 axis.break(axis=1,breakpos=35) 
```

这给了你：

![在此处输入图像描述](../Images/4f5f55d42e5080f82f140dd27f9e2d72.png)

请注意，您可以通过添加`freq=TRUE`到`hist()`函数来获得原始频率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T02:12:46.917

我将此添加为另一个答案，因为尽管想法相似，但映射从根本上不同。

当对数标度图中包含小值 (<1) 时，它是典型图，`log(1 + .)`而不是`log(.)`.

反思原点，我们得到一些有用的东西：

```
x <- seq(-2, 2, by=.01)   
w <- c( -log10(1-x[x<0]), x[x==0], log10(1+x[x>0]))

plot(x, w, pch='.') 
```

应该清楚该函数是平滑的，因为在 0 附近的方向导数也会被反映。 ![在此处输入图像描述](../Images/4b26f5adb4093307a876c46f0cbf16b2.png)

在 x 中有更大的值：

```
x <- seq(-10000, 10000, by=.01)
w <- c( -log10(1-x[x<0]), x[x==0], log10(1+x[x>0]))
plot(x, w, pch='.') 
```

![在此处输入图像描述](../Images/7670e6618125bcdef4561b15ebf51dd0.png)

# c# - Obout Grid外键值对象数据源

> ID：14010334
> 
> 赞同：0
> 
> 时间：2012-12-23T10:46:48.857
> 
> 标签：c#, asp.net, linq, obout

我正在尝试访问外键的值，我创建了一个 LinqToSQL 类，在该类中创建了表之间的关系。我开发了这个：

```
 <asp:ObjectDataSource ID="odsEmp" runat="server" 
    SelectMethod="GetAllEmployees" TypeName="Emp"></asp:ObjectDataSource>
</asp:LinqDataSource>
<cc1:Grid ID="Grid1" runat="server" AutoGenerateColumns="False" 
    DataSourceID="odsEmp" >
    <Columns>
        <cc1:Column DataField="ID" HeaderText="ID" Index="0" ReadOnly="True" 
            Visible="False">
        </cc1:Column>
        <cc1:Column DataField="EmpName" HeaderText="EmpName" Index="1">
        </cc1:Column>
        <cc1:Column DataField="DeptID" HeaderText="Dept" Index="2">
        </cc1:Column>
        <cc1:Column DataField="DeptID" HeaderText="DeptName" Index="6">
        <TemplateSettings TemplateId="templateDeptItem"  />
        </cc1:Column>
    </Columns>
    <Templates>
    <cc1:GridTemplate ID="templateDeptItem">
    <Template>
        <%# Container.DataItem["Dept.DeptName"]%>
    </Template>
    </cc1:GridTemplate>
    </Templates>
</cc1:Grid> 
```

到目前为止，我无法检索部门名称。

支持不会回复我，因为我没有使用付费版本。

知道我在做什么错吗？

我使用 ASP.Net GridView 创建了另一个网格，它运行良好

```
<asp:GridView ID="GridView1" runat="server" 
    DataSourceID="odsEmp" AutoGenerateColumns="False" 
    AutoGenerateEditButton="True">
    <Columns>
        <asp:BoundField DataField="ID" HeaderText="ID" />
        <asp:BoundField DataField="EmpName" HeaderText="EmpName" />
        <asp:TemplateField HeaderText="Dept">            
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Bind("Dept.DeptName") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:33:03.443

我已联系支持并得到了答复

你必须简单地使用这个：

```
 <cc1:GridTemplate ID="templateDeptItem">
    <Template>
       <%# ((Dept)((Emp)Container.DataObject).Dept).DeptName%>
    </Template>
    </cc1:GridTemplate> 
```

# php - php echo中的添加

> ID：14010335
> 
> 赞同：0
> 
> 时间：2012-12-23T10:47:38.870
> 
> 标签：php

这段代码有什么问题。我得到这个 + 200 +。我只想在这个中添加。+ 在回显中创建问题

```
<?php echo "<div id=totalValu>Total Value: <span id=totalValue style=float:right>$ $beg + $int + $adv </span></div> "; ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T10:49:07.543

您需要从字符串文字中分解添加，如下所示：

```
<?php echo '<div id="totalValu">Total Value: <span id="totalValue" style="float:right">$'.($beg + $int + $adv).'</span></div>'; ?> 
```

# objective-c - 如何使用 UIScrollview（或最佳实践）进行 Card Deck 样式页面转换，垂直和水平

> ID：14010336
> 
> 赞同：1
> 
> 时间：2012-12-23T10:47:46.957
> 
> 标签：objective-c, ios, uiscrollview, uipageviewcontroller

我正在创建一个应用程序，它可以在书的页面之间左右滑动（像卡片组一样覆盖或显示），上下滑动将向下滑动（并覆盖）设置页面，或向上滑动（和揭示）到这本书的详细信息。

本质上，它是一个“卡片组”滑动功能，类似于我正在考虑使用的这个项目[https://github.com/sweetmandm/CardSliderView-for-iOS](https://github.com/sweetmandm/CardSliderView-for-iOS)，但是我需要垂直和水平“卡片组”滑动功能.

再举一个我正在查看的幻灯片/左封面/显示效果的示例，请查看新的 CNN 应用程序，您可以在其中在文章之间滑动。

我也考虑过使用 UIPageViewController，但是这不支持我正在寻找的“滑动和显示/滑动和覆盖”过渡，而只支持“向左或向右滑动”过渡，所以我不得不以某种方式破解它并使用多个 UIPageViewControllers，一个在上面，以允许“显示和覆盖”效果工作，仅使用 UIPageViewController 中的手势来允许用户滑动。

我熟悉 UIScrollview 上的 directionalLockEnabled 属性，但是我仍然想知道获得我正在寻找的效果的整体最佳方法是什么，一种同时支持垂直和水平的 UIScrollView？UIPageViewController？嵌套的 UIScrollviews？而不是玩弄 directionalLockEnabled 属性？还有什么？

实现我希望提供的确切用户体验的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:42:55.437

好的，我使用嵌套的 UIScrollViews 找到了我自己问题的解决方案。我还向 github 添加了一个非常粗略的解决方案作为项目：[https](https://github.com/cohen72/InfiniteDeckScroller) ://github.com/cohen72/InfiniteDeckScroller 。

对于水平滚动，我有三个水平滚动视图，一个嵌套在另一个中。UIScrollview 会自动处理每个的正确滚动。根据内容偏移量和正在滚动的滚动视图，我知道如何“重新排列/重新排序”嵌套的滚动视图。

这是我提出的解决方案的片段。

这个特殊的解决方案允许向上滑动以显示，但是我还没有实现向下滑动以覆盖，但是这样做会使用与水平解决方案相同的方法。

```
#define BOTTOM 1
#define MIDDLE 2
#define TOP 3
#define VERTICAL_SUB 4

- (void)viewDidLoad{

    [super viewDidLoad];

    UIScrollView *scroll1 = [[UIScrollView alloc] initWithFrame:self.view.bounds];
    UIScrollView *scroll2 = [[UIScrollView alloc] initWithFrame:self.view.bounds];
    UIScrollView *scroll3 = [[UIScrollView alloc] initWithFrame:self.view.bounds];
    UIScrollView *scroll4 = [[UIScrollView alloc] initWithFrame:self.view.bounds];

    scroll1.contentSize = CGSizeMake(self.view.frame.size.width * 2, self.view.frame.size.height * 1);
    scroll1.tag = BOTTOM;
    scroll1.pagingEnabled = YES;
    scroll1.bounces = NO;
    scroll1.delegate = self;
    [scroll1 addSubview:[self labelForScrollView:scroll1 withBgColor:[UIColor redColor]]];
    [scroll1 setContentOffset:CGPointMake(0, 0)];

    scroll2.contentSize = CGSizeMake(self.view.frame.size.width * 2, self.view.frame.size.height * 1);
    scroll2.tag = MIDDLE;
    scroll2.pagingEnabled = YES;
    scroll2.bounces = NO;
    scroll2.delegate = self;
    [scroll2 addSubview:[self labelForScrollView:scroll2 withBgColor:[UIColor orangeColor]]];
    [scroll2 setContentOffset:CGPointMake(0, 0)];

    scroll3.contentSize = CGSizeMake(self.view.frame.size.width * 2, self.view.frame.size.height * 1);
    scroll3.tag = TOP;
    scroll3.pagingEnabled = YES;
    scroll3.bounces = NO;
    scroll3.delegate = self;
    [scroll3 addSubview:[self labelForScrollView:scroll3 withBgColor:[UIColor yellowColor]]];
    [scroll3 setContentOffset:CGPointMake(320, 0)];

    scroll4.contentSize = CGSizeMake(self.view.frame.size.width * 1, self.view.frame.size.height * 2);
    scroll4.delegate = self;
    scroll4.bounces = NO;
    scroll4.pagingEnabled = YES;
    scroll4.alwaysBounceVertical = NO;
    scroll4.tag = VERTICAL_SUB;

    [scroll4 addSubview:scroll1];
    [scroll1 addSubview:scroll2];
    [scroll2 addSubview:scroll3];
    [self.view addSubview:scroll4];

}

- (UILabel*)labelForScrollView:(UIScrollView*)scrollView withBgColor:(UIColor*)color{
    UILabel *lbl = [[UILabel alloc] initWithFrame:scrollView.bounds];
    lbl.textAlignment = NSTextAlignmentCenter;
    lbl.backgroundColor = color;
    lbl.text = [NSString stringWithFormat:@"ScrollView: %d", scrollView.tag];
    return lbl;
}

-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView{

    NSLog(@"content offset: %f, tag: %d ", scrollView.contentOffset.x, scrollView.tag);

    UIScrollView *newMiddleScrollView, *newBottomScrollView, *newTopScrollView;

    // swipe left

    if (scrollView.contentOffset.x == 0 && scrollView.tag == TOP) {
        newMiddleScrollView = (UIScrollView*)[self.view viewWithTag:TOP];
        newTopScrollView = (UIScrollView*)[self.view viewWithTag:BOTTOM];
        newBottomScrollView = (UIScrollView*)[self.view viewWithTag:MIDDLE];
    }

    // swipe right

    else if (scrollView.contentOffset.x == 320 && scrollView.tag == MIDDLE) {
        newMiddleScrollView = (UIScrollView*)[self.view viewWithTag:BOTTOM];
        newTopScrollView = (UIScrollView*)[self.view viewWithTag:MIDDLE];
        newBottomScrollView = (UIScrollView*)[self.view viewWithTag:TOP];
    }
    else {
        return;
    }

    newMiddleScrollView.tag = MIDDLE;
    newBottomScrollView.tag = BOTTOM;
    newTopScrollView.tag = TOP;

    newBottomScrollView.contentOffset = CGPointMake(0, 0);
    newMiddleScrollView.contentOffset = CGPointMake(0, 0);
    newTopScrollView.contentOffset = CGPointMake(320, 0);

    UIScrollView *verticalScrollView_sub = (UIScrollView*)[self.view viewWithTag:VERTICAL_SUB];

    [verticalScrollView_sub addSubview:newBottomScrollView];
    [newBottomScrollView addSubview:newMiddleScrollView];
    [newMiddleScrollView addSubview:newTopScrollView];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:16:17.377

有很多不同的方法可以实现这一点，具体取决于您希望不同的控制器如何相互关联。幻灯片转换本身非常简单。我已经在一个控制器中以这种方式实现了它，该控制器是调用该方法的控制器的超类：

```
-(void)SlideInController:(RDSlideController *) next {
    next.presentingVC = self;
    next.view.frame = CGRectMake(self.view.frame.origin.x + 320, self.view.frame.origin.y, self.view.frame.size.width, self.view.frame.size.height);
    [self.view.window addSubview:next.view];
    [UIView animateWithDuration:1 animations:^{
        next.view.frame = self.view.frame;
    } completion:^(BOOL finished) {
        self.view.window.rootViewController = next;
    }];
} 
```

然后从新出现的控制器中，您可以调用此方法返回：

```
-(void)SlideOut {
    UIViewController *prev = self.presentingVC;
    prev.view.frame = self.view.frame;
    [self.view.window insertSubview:prev.view belowSubview:self.view];
    [UIView animateWithDuration:1 animations:^{
        self.view.frame = CGRectMake(self.view.frame.origin.x + 320, self.view.frame.origin.y, self.view.frame.size.width, self.view.frame.size.height);
    } completion:^(BOOL finished) {
        self.view.window.rootViewController = prev;
    }];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T17:39:01.290

这是一个很好的问题 - 如果我在这里错了，请纠正我，但听起来从左到右有*任意*数量的页面/卡片，但只有几张标准卡片从顶部或底部进入（您的设置和详细信息面板）。

如果是这种情况，那么您可能很想坚持使用`UIPageController`一些手势识别器旁边的东西。你设置你的页面控制器（或者你最终使用的任何控制器来实现你想要的卡片动画），然后添加两个手势识别器来向上滑动和向下滑动。

然后，您可以在收到这些手势时为您的详细信息/设置视图设置动画，从而为您提供类似卡片的界面，而无需打扰多个`UIPageViewControllers`视图或滚动视图。

如果您想要水平和垂直的任意数量的卡片，这种方法不是很好，但听起来好像不是这样。

# actionscript-3 - Robotlegs - 第二次调度不适用于 addViewListener

> ID：14010345
> 
> 赞同：0
> 
> 时间：2012-12-23T10:49:09.017
> 
> 标签：actionscript-3, robotlegs

我在 Robotlegs 中创建了一个调解器，它的相关视图将调度两种不同类型的事件。当中介捕获事件时，它只会简单地分派事件。我遇到的问题是第一个事件被完美地重新调度，但第二个事件没有被调度。

但是，如果我手动为第二个事件分配不同的处理程序，则该事件会被正确捕获。

下面是相关代码：

```
public class MyMediator extends Mediator
{
    [Inject]
    public var view:MyView;

    public override function onRegister():void
    {
        super.onRegister();

        addViewListener( SomeEventTypeA.COOL_EVENT, dispatch, SomeEventTypeA ); // This event is dispatched correctly
        addViewListener( SomeEventTypeB.STUCK, dispatch, SomeEventTypeB );  // This one is not correctly dispatched

        //A twist, if I uncomment the following code, the event is captured by its handler
        //addViewListener( SomeEventTypeB.STUCK, view_stuck, SomeEventTypeB );
    }

    private function view_stuck( event:SomeEventTypeB ):void
    {
        //ah ha, this is called correctly if the above relevant line is uncommented
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:27:15.757

找到原因：

该事件需要具有适当的克隆方法才能正确重新调度。见相关链接：

[http://knowledge.robotlegs.org/kb/application-architecture/why-doesnt-my-event-trigger-the-command-it-is-mapped-to](http://knowledge.robotlegs.org/kb/application-architecture/why-doesnt-my-event-trigger-the-command-it-is-mapped-to)

# php - 当我在 PHP 中使用 cURL 发布文件时，我应该设置 CURLOPT_UPLOAD 吗？

> ID：14010346
> 
> 赞同：5
> 
> 时间：2012-12-23T10:49:22.363
> 
> 标签：php, post, curl, libcurl

当我尝试设置它时，它会强制请求方法为 PUT。

这是我在 CURLOPT_POSTFIELDS 中输入的内容：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, array(
    'fileUpload' => '@/home/apache/upload/dummy.sql'
)); 
```

或者我应该完全忽略 CURLOPT_UPLOAD 吗？它说准备文件上传...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T11:00:46.567

您可以放心地忽略它。 `CURLOPT_POSTFIELDS`只够上传文件。curl 库将识别文件上传并设置内部所需的内容。

* * *

背后的想法`CURLOPT_UPLOAD`是告诉 curl 使用`PUT`方法，添加一些常见的文件上传标头，例如`Expect: 100-continue`标头，如果您正在使用，则使用分块编码上传未知大小的文件`HTTP/1.1`

# python - 谁能告诉我的人际关系出了什么问题？

> ID：14010347
> 
> 赞同：14
> 
> 时间：2012-12-23T10:49:44.150
> 
> 标签：python, orm, sqlalchemy

我使用 sqlalchemy 来设计一个论坛风格的网站。我开始敲掉这个设计，但每次我尝试用一​​些插件测试它时，它都会倾倒一块砖；

```
NoForeignKeysError: Could not determine join condition between parent/child 
tables on relationship Thread.replies - there are no foreign keys linking 
these tables. Ensure that referencing columns are associated with a 
ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression. 
```

这是我的“模型”

```
from sqlalchemy import Integer, Column, String, create_engine, ForeignKey
from sqlalchemy.orm import relationship, sessionmaker, backref
from .database import Base # declarative base instance

class User(Base):
    __tablename__ = "user"
    id = Column(Integer, primary_key=True)
    username = Column(String, unique=True)
    email = Column(String, unique=True)
    threads = relationship("Thread", backref="user")
    posts = relationship("Post", backref="user")

class Post(Base):
    __tablename__ = "post"
    id = Column(Integer, primary_key=True)
    name = Column(String)
    body = Column(String)
    author = Column(Integer, ForeignKey("user.id"))

class Thread(Base):
    __tablename__ = "thread"
    id = Column(Integer, primary_key=True)
    name = Column(String)
    desc = Column(String)
    replies = relationship("Post", backref="thread")
    author_id = Column(Integer, ForeignKey("user.id"))
    board_id = Column(Integer, ForeignKey("board.id"))

class Board(Base):
    __tablename__ = "board"
    id = Column(Integer, primary_key=True)
    name = Column(String)
    desc = Column(String)
    threads = relationship("Thread", backref="board")
    category_id = Column(Integer, ForeignKey("category.id"))

class Category(Base):
    __tablename__ = "category"
    id = Column(Integer, primary_key=True)
    name = Column(String)
    desc = Column(String)
    threads = relationship("Board", backref="category")

engine = create_engine('sqlite:///:memory:', echo=True)
Base.metadata.create_all(engine)
session_factory = sessionmaker(bind=engine)
session = session_factory() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T10:55:32.260

您应该在 Post 模型中添加一个字段，内容为：

```
thread_id = Column(Integer, ForeignKey("thread.id"), nullable=True, default=None) 
```

SQLAlchemy 应该如何知道您定义的这种关系应该如何将线程链接到帖子？这就是为什么你应该有一个从帖子到它的线程的外键。您可以允许它为空，如果它不属于线程，则取决于您的用例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T11:09:32.197

您的`Post`模型没有`thread`参考。添加一列以`Post`引用`Thread`帖子所属的：

```
class Post(Base):
    __tablename__ = "post"
    id = Column(Integer, primary_key=True)
    name = Column(String)
    body = Column(String)
    author = Column(Integer, ForeignKey("user.id"))
    thread_id = Column(Integer, ForeignKey('thread.id')) 
```

我们不能使用该名称`thread`，因为这是`Post.replies`关系将添加到检索到的`Thread`实例的名称。

这是SQLAlchemy 关系配置文档中记录的[一对多关系。](http://docs.sqlalchemy.org/en/rel_0_8/orm/relationships.html#one-to-many)

# sql - 按重复属性分组

> ID：14010348
> 
> 赞同：1
> 
> 时间：2012-12-23T10:49:54.360
> 
> 标签：sql, ruby-on-rails, postgresql, plpgsql, window-functions

基本上我有一个表`messages`，其中`user_id`包含标识创建消息的用户的字段。

当我显示两个用户之间的对话（一组消息）时，我希望能够按 对消息进行分组`user_id`，但是以一种棘手的方式：

假设有一些消息（按 排序`created_at desc`）：

```
 id: 1, user_id: 1
  id: 2, user_id: 1
  id: 3, user_id: 2
  id: 4, user_id: 2
  id: 5, user_id: 1 
```

我想按以下顺序获取 3 个消息组： `[1,2], [3,4], [5]`

它应该按 *user_id* 分组，直到它看到另一个，然后按那个分组。

我正在使用 PostgreSQL，并且很乐意使用特定于它的东西，只要能提供最佳性能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T12:08:16.450

尝试这样的事情：

```
SELECT user_id, array_agg(id)
FROM (
SELECT id, 
       user_id, 
       row_number() OVER (ORDER BY created_at)-
       row_number() OVER (PARTITION BY user_id ORDER BY created_at) conv_id
FROM table1 ) t
GROUP BY user_id, conv_id; 
```

表达方式：

```
row_number() OVER (ORDER BY created_at)-
row_number() OVER (PARTITION BY user_id ORDER BY created_at) conv_id 
```

将为每个消息组提供一个特殊的 id（这`conv_id`可以为 other 重复`user_id`，但`user_id, conv_id`会给你所有不同的消息组）

我的[SQLFiddle](http://sqlfiddle.com/#!12/82fe7/2)示例。

详细信息：[`row_number()`](http://www.postgresql.org/docs/current/static/functions-window.html),[`OVER (PARTITION BY ... ORDER BY ...)`](http://www.postgresql.org/docs/current/static/sql-expressions.html#SYNTAX-WINDOW-FUNCTIONS)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T02:59:28.460

### 正确的 SQL

> 我想按以下顺序获取 3 个消息组：[1,2]、[3,4]、[5]

要获得请求的订单，请添加`ORDER BY min(id)`：

```
SELECT grp, user_id, array_agg(id) AS ids
FROM  (
   SELECT id
        , user_id
        , row_number() OVER (ORDER BY id) -
          row_number() OVER (PARTITION BY user_id ORDER BY id) AS grp
   FROM   tbl
   ORDER  BY 1   -- for ordered arrays in result
   ) t
GROUP  BY grp, user_id
ORDER  BY min(id); 
```

*db<>fiddle [here](https://dbfiddle.uk/?rdbms=postgres_13&fiddle=fd8c4edce54865accb232deb5bc141d6)*
[旧[的 sqliddle](http://sqlfiddle.com/#!17/345e1/1)]

增加几乎不能保证另一个答案。更重要的问题是：

### 使用 PL/pgSQL 更快

> 我正在使用 PostgreSQL，并且很乐意使用特定于它的东西，只要能提供**最佳性能**。

纯 SQL 一切都很好而且很闪亮，但是对于这个任务来说，程序化的**服务器端函数**要*快得多。*虽然以程序方式处理行*通常较慢*，但**plpgsql**赢得了这场竞赛，因为它可以使用*单个*表扫描和*单个* `ORDER BY`操作：

```
CREATE OR REPLACE FUNCTION f_msg_groups()
  RETURNS TABLE (ids int[])
  LANGUAGE plpgsql AS
$func$
DECLARE
   _id    int;
   _uid   int;
   _id0   int;                         -- id of last row
   _uid0  int;                         -- user_id of last row
BEGIN
   FOR _id, _uid IN
       SELECT id, user_id FROM messages ORDER BY id
   LOOP
       IF _uid <> _uid0 THEN
          RETURN QUERY VALUES (ids);   -- output row (never happens after 1 row)
          ids := ARRAY[_id];           -- start new array
       ELSE
          ids := ids || _id;           -- add to array
       END IF;

       _id0  := _id;
       _uid0 := _uid;                  -- remember last row
   END LOOP;

   RETURN QUERY VALUES (ids);          -- output last iteration
END
$func$; 
```

称呼：

```
SELECT * FROM f_msg_groups(); 
```

### 基准和链接

我在具有 60k 行的类似现实生活表上进行了快速测试`EXPLAIN ANALYZE`（执行多次，选择最快的结果以排除兑现效应）：

SQL：
总运行时间：1009.549 毫秒
Pl/pgSQL：
总运行时间：**336.971 毫秒**

有关的：

*   [GROUP BY 和聚合顺序数值](https://stackoverflow.com/questions/8014577/group-by-and-aggregate-sequential-numeric-values)
*   [GROUP BY 由间隔分隔的连续日期](https://stackoverflow.com/questions/13009893/group-by-consecutive-dates-delimited-by-gaps?lq=1)
*   [连续重复/重复的有序计数](https://stackoverflow.com/questions/13078964/ordered-count-of-consecutive-repeats-duplicates)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T10:58:38.330

该`GROUP BY`子句将折叠 2 条记录中的响应 - 一条为`user_id`1，一条为`user_id`2，无论`ORDER BY`子句如何，我建议您只发送`ORDER BY created_at`

```
prev_id = -1
messages.each do |m|
 if ! m.user_id == prev_id do 
    prev_id = m.user_id
    #do whatever you want with a new message group
 end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T12:21:17.673

您可以使用[块](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-chunk)：

```
Message = Struct.new :id, :user_id

messages = []
messages << Message.new(1, 1)
messages << Message.new(2, 1)
messages << Message.new(3, 2)
messages << Message.new(4, 2)
messages << Message.new(5, 1)

messages.chunk(&:user_id).each do |user_id, records| 
  p "#{user_id} - #{records.inspect}" 
end 
```

输出：

```
"1 - [#<struct Message id=1, user_id=1>, #<struct Message id=2, user_id=1>]"
"2 - [#<struct Message id=3, user_id=2>, #<struct Message id=4, user_id=2>]"
"1 - [#<struct Message id=5, user_id=1>]" 
```

# mongodb - 连接到远程 mongo 服务器导致异常连接失败

> ID：14010351
> 
> 赞同：16
> 
> 时间：2012-12-23T10:51:09.103
> 
> 标签：mongodb, mlab

在 mongodb.org 的 mongodb 安装文件中运行此命令

```
./mongo ds045907.mongolab.com:45907/database -u user -p password 
```

为了匿名，我更改了数据库、用户和密码。

导致这个

```
Error: couldn't connect to server ds045907.mongolab.com:45907 src/mongo/shell/mongo.js:93
exception: connect failed 
```

也许我被服务器防火墙阻止了？我使用 git 或 brew 或 pip 没有问题...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-05T09:52:08.420

您可以尝试以下一些方法，但您可以随时通过 support@mongolab.com 与我们联系。我相信我们可以查明真相。

**匿名 mongo shell 连接**

Mongo 将让您无需身份验证即可连接。您可以对未经身份验证的连接做很少的事情，但您可以将其用作测试，以将连接问题与凭据问题区分开来。

```
% mongo ds045907.mongolab.com:45907
MongoDB shell version: 2.0.7
connecting to: ds045907.mongolab.com:45907/test
> db.version()
2.2.2
> db.runCommand({ping:1})
{ "ok" : 1 }
> exit
bye 
```

如果您可以在不进行身份验证的情况下连接并运行如上所示的命令，但尝试通过身份验证进行连接失败，那么您的凭据有问题。但是，如果即使不提供凭据也无法连接，则说明存在连接问题。

**平**

该服务器确实允许 ICMP 流量，因此请确保无论您身在何处都可以访问它。

```
% ping ds045907.mongolab.com
PING ec2-107-20-85-188.compute-1.amazonaws.com (107.20.85.188): 56 data bytes
64 bytes from 107.20.85.188: icmp_seq=0 ttl=41 time=99.744 ms
64 bytes from 107.20.85.188: icmp_seq=1 ttl=41 time=99.475 ms
64 bytes from 107.20.85.188: icmp_seq=2 ttl=41 time=99.930 ms
^C
--- ec2-107-20-85-188.compute-1.amazonaws.com ping statistics ---
3 packets transmitted, 3 packets received, 0.0% packet loss
round-trip min/avg/max/stddev = 99.475/99.716/99.930/0.187 ms 
```

**跟踪路由**

如果`ping`失败，请使用`traceroute`（或`tracert`在 Windows 上）尝试找出问题所在。但是，一旦跟踪到达 AWS，它就会消失。这很正常。AWS 可防止跟踪深入其网络。确保您列表中的最后一个 IP 归亚马逊所有，使用某种 IP 反向查找工具（许多在 Web 上）。

```
% traceroute ds045907.mongolab.com
traceroute to ec2-107-20-85-188.compute-1.amazonaws.com (107.20.85.188), 64 hops max, 52 byte packets
 1  192.168.1.1 (192.168.1.1)  1.092 ms  0.865 ms  1.047 ms
 2  192.168.27.1 (192.168.27.1)  1.414 ms  1.330 ms  1.224 ms

            ... snipped to protect the innocent ...

14  72.21.220.83 (72.21.220.83)  87.777 ms
    72.21.220.75 (72.21.220.75)  87.406 ms
    205.251.229.55 (205.251.229.55)  99.363 ms
15  72.21.222.145 (72.21.222.145)  87.703 ms
    178.236.3.24 (178.236.3.24)  98.662 ms
    72.21.220.75 (72.21.220.75)  87.708 ms
16  216.182.224.55 (216.182.224.55)  87.312 ms  86.791 ms  89.005 ms
17  * 216.182.224.55 (216.182.224.55)  91.373 ms *
18  216.182.224.55 (216.182.224.55)  121.754 ms * *
19  * * *
20  * * *
21  * * *
22  * * *
23  * * *
24  * * * 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-23T17:16:30.680

这是你身边的连接问题。我试过了，但收到登录失败消息：

> MongoDB外壳版本：1.6.5
> 
> 连接到：ds045907.mongolab.com:45907/database
> 
> 12 月 24 日星期一 01:12:31 未捕获的异常：登录失败
> 
> 异常：登录失败

# javascript - 如何在 swiper.js 中使用滑块输入

> ID：14010352
> 
> 赞同：0
> 
> 时间：2012-12-23T10:51:09.907
> 
> 标签：javascript, html5-video, swipe

我正在为移动设备构建一个 html 应用程序（与 PhoneGap 一起使用），并且我正在使用 idangero.us 的 swiper 进行页面转换。

在其中一个页面中，我有一个 html5 视频标签，但每次我尝试使用音量滑块时，都会激活 swiper。我怎样才能避免这种情况？

例如，考虑以下情况：

```
<div class="swiper-container">
    <div class="swiper-wrapper">
        <div class="swiper-slide">
            <video src="some_movie_url" controls></video>
        </div>
        <div class="swiper-slide">
            Foo
        </div>
        <div class="swiper-slide">
            Bar
        </div>
    </div>
</div> 
```

接着：

```
new Swiper('.swiper-container', {speed: 250, freeMode: false}); 
```

是否有任何“简单”的方法可以使视频控件正常工作？还是我应该捕获所有滑动事件并自己处理它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:30:53.210

使用 stopPropagation “触摸”视频元素时，您可以轻松阻止 Swiper 事件：

```
$('video').on('touchstart mousedown', function(e){
  e.stopPropagation()
}) 
```

# actionscript-3 - 为什么样式表不起作用？

> ID：14010353
> 
> 赞同：0
> 
> 时间：2012-12-23T10:51:23.207
> 
> 标签：actionscript-3, flash, actionscript

```
package  {
    import flash.text.TextField;
    import flash.text.StyleSheet;
    import flash.text.TextFieldAutoSize;

    public class MyTF extends TextField {

        public var

        color:uint,
        size:int
        public function MyTF( color:uint, size:int) {
            super();

            color = color; // setting color and size
            size = size;

            init();  //initialize
        }

        private function init():void
        {
            autoSize = TextFieldAutoSize.LEFT;
            var style:StyleSheet = new StyleSheet();
            style.setStyle('span', {color: 0xFF0000, fontSize: 24});
            styleSheet = style;
            htmlText = '<span>test</span>';

                    //after creating an object of this class the text Style is not changing
        }

    }

} 
```

为什么创建此类的实例后 htmlText 样式没有改变？有什么不对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:05:22.980

如果我没记错的话，这可以帮助你：

`style.setStyle('span', {color: 0xFF0000, fontSize: 24});`更改为 `style.setStyle('span', {color: this.color, fontSize: this.size});`.

# c++ - 在 C++ 中进行模板编程时遇到问题

> ID：14010356
> 
> 赞同：0
> 
> 时间：2012-12-23T10:51:27.280
> 
> 标签：c++, templates

头文件如下：

```
#ifndef StrassenAlgorithms_Algorithm_h
#define StrassenAlgorithms_Algorithm_h

template<int size>
void strassen_matrix_multiplication(int A[size][size], int B[size][size], int C[size][size])

#include "Algorithm.cpp"
#endif 
```

第二个是对应的 .cpp 文件：

```
template<int size>
void strassen_matrix_multiplication(int A[size][size], int B[size][size], int C[size][size]){
if (size == 1) {
    return;
}

const int n = size / 2;
int A11[n][n];
int A12[n][n];
int A21[n][n];
int A22[n] [n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        A11[i][j] = A[i][j];
        A12[i][j] = A[i + n][j];
        A21[i][j] = A[i][j + n];
        A22[i][j] = A[i + n][j + n];
    }
}

int B11[n][n], B12[n][n], B21[n][n], B22[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        B11[i][j] = A[i][j];
        B12[i][j] = A[i + n][j];
        B21[i][j] = A[i][j + n];
        B22[i][j] = A[i + n][j + n];
    }
}

/** S1 = B12 - B22 */
int S1[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S1[i][j] = B[i + n][j] - B[i + n][j + n];
    }
}

/** S2 = A11 + A12 */
int S2[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S2[i][j] = A[i][j] + A[i + n][j];
    }
}

/** S3 = A21 + A22 */
int S3[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S3[i][j] = A[i][j + n] + A[i + n][j + n];
    }
}

/** S4 = B21 - B11 */
int S4[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S4[i][j] = B[i][j + n] - B[i][j];
    }
}

/** S5 = A11 + A22 */
int S5[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S5[i][j] = A[i][j] + A[i + n][j + n];
    }
}

/** S6 = B11 + B22 */
int S6[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S6[i][j] = B[i][j] + B[i + n][j + n];
    }
}

/** S7 = A12 - A22 */
int S7[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S7[i][j] = A[i + n][j] - A[i + n][j + n];
    }
}

/** S8 = B21 + B22 */
int S8[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S8[i][j] = B[n][j + n] + B[i + n][j + n];
    }
}

/** S9 = A11 - A21 */
int S9[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S9[i][j] = A[i][j] - A[i][j + n];
    }
}

/** S10 = B11 + B12 */
int S10[n][n];
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        S10[i][j] = B[i][j] + B[i + n][j];
    }
}

int P1[n][n];
strassen_matrix_multiplication<n>(A11, S1, P1);

int P2[n][n];
strassen_matrix_multiplication<n>(S2, B22, P2);

int P3[n][n];
strassen_matrix_multiplication<n>(S3, B11, P3);

int P4[n][n];
strassen_matrix_multiplication<n>(A22, S4, P4);

int P5[n][n];
strassen_matrix_multiplication<n>(S5, S6, P5);

int P6[n][n];
strassen_matrix_multiplication<n>(S7, S8, P6);

int P7[n][n];
strassen_matrix_multiplication<n>(S9, S10, P7);

/** C11 = P5 + P4 - P2 + P6 **/
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        C[i][j] = P5[i][j] + P4[i][j] - P2[i][j] + P6[i][j];
    }
}

/** C12 = P1 + P2 **/
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        C[i + n][j] = P1[i][j] + P2[i][j];
    }
}

/** C21 = P3 + P4 **/
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        C[i][j + n] = P3[i][j] + P4[i][j];
    }
}

/** C22 = P5 + P1 - P3 - P7 **/
for (int i=0; i<n; i++) {
    for (int j=0; j<n; j++) {
        C[i + n][j + n] = P5[i][j] + P1[i][j] - P3[i][j] - P7[i][j];
    }
}

return;

} 
```

最后是主文件：

```
#include <iostream>
#include "Algorithm.h"

using namespace std;

int main(int argc, const char * argv[])
{
const int size = 2;
int A[size][size] = {{1, 2}, {3, 4}};
int B[size][size] = {{1, 2}, {3, 4}};
int C[size][size] = {0, 0, 0, 0};
strassen_matrix_multiplication<2>(A, B, C);
for(int i=0; i<size; i++){
    for (int j=0; j<size; j++) {
        cout << C[i][j] << "\t";
    }
    cout << endl;
}
} 
```

我有两个编译错误，一个在 .cpp 文件中说

```
"Expected initializer before 'template'" 
```

在第一行。我不知道这是什么意思。另一个在主文件中说

```
"'strassen_matrix_multiplication' not declared in this scope" 
```

我该如何解决这些错误？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T10:59:44.260

正如 JasonD 正确所说，您`;`在 .h 文件中的函数声明后丢失了。您不需要放在`;`函数定义之后。是的，C/C++ 有时令人困惑。

# laravel - 没有刀片的 Laravel - 控制器和视图

> ID：14010361
> 
> 赞同：6
> 
> 时间：2012-12-23T10:52:22.603
> 
> 标签：laravel

我在使用直接 php 设置视图逻辑时效率更高。Blade很酷，但不适合我。我正在尝试将所有 Blade 特定示例和文档翻译成 php。我不喜欢我需要在 View::make() 数组中为我的视图分配所有变量的事实。到目前为止，我确实找到了所有这些。

控制器/home.php：

```
class Home_Controller extends Base_Controller {

    public $layout = 'layouts.default';

    public function action_index()
    {
        $this->layout->name = 'James';
        $this->layout->nest('content', 'home.index');
    }

} 
```

视图/布局/default.php：

```
// head code
<?php echo Section::yield('content') ?>
// footer code 
```

意见/主页/index.php

```
<?php Section::start('content'); ?>
<?php echo $name ?>
<?php Section::stop(); ?> 
```

我遇到了这个错误：`Error rendering view: [home.index] Undefined variable: name`。我知道这可行，`$this->layout->nest('content', 'home.index', array('name' => 'James'));`但这否定了我必须将所有变量发送到数组的观点。这不可能是唯一的方法。

视图模板文档似乎没有涉及使用来自控制器的嵌套视图执行变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T10:56:42.463

您可以通过这种方式传递变量；

```
class Home_Controller extends Base_Controller {

    public $layout = 'layouts.default';

    public function action_index()
    {

        $this->layout->nest('content', 'home.index')
                ->with('name', 'James');
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T19:42:11.503

这是我如何使用 laravel 进行模板化的示例。

```
Class Products_Controller extends Whatever_Controller {

  public $layout = 'layouts.main';

  public function get_index()
  {
   // .. snip ..

    $view = View::make('home.product') 
        ->with('product', $product); // passing all of my variable to the view

    $this->layout->page_title = $cat_title . $product->title; 
    $this->layout->meta_desc = $product->description;

    $this->layout->content = $view->render(); // notice the render()
    }
} 
```

我的主要布局看起来像

```
<html>
<head>
<title> {{ $page_title }} </title>
<meta name="description" content="{{ $meta_desc }}" />
</head>
<body>
{{ $content }}
</body>
</html> 
```

主页/产品页面看起来像

```
<div class="whatev">
<h1> {{ $product->title }} </h1>
<p> {{ $product->description }} </p>
</div> 
```

希望能帮助你弄清楚一些事情

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-07T04:20:05.527

我知道这个问题已经有一段时间了，但是自从被问到之后，Laravel 4 已经问世并且有更新的方法来做事。

如果您最近正在阅读本文，您应该考虑使用 View Composers 为您的视图准备数据。

例子：

```
class MyViewComposer {

    public function compose($view){
        $view->title = 'this is my title';
        $view->name = 'joe';
        ...
        $view->propertyX = ...;
    }
} 
```

设置好视图作曲家后，将其注册到应用程序中：

```
View::composer('home.index', 'MyViewComposer'); 
```

有关更多信息，请查看有关视图作曲家的 laravel 文档：

[http://laravel.com/docs/responses](http://laravel.com/docs/responses)

# java - Java 关闭 BufferedReader、Scanner 和 FileReader

> ID：14010364
> 
> 赞同：0
> 
> 时间：2012-12-23T10:52:50.357
> 
> 标签：java, java.util.scanner, bufferedreader

在我的程序中，我解析文件。我这样打开它们：

```
Scanner s = new Scanner(new BufferedReader(new FileReader("file1.txt"))); 
```

并像这样关闭它：

```
s.close(); 
```

我的问题是：当我这样做时，`s.close()`是否也会关闭 FileReader 和 BufferedReader？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T10:55:52.827

Java 文档说

```
public void close()

Closes this scanner.

If this scanner has not yet been closed then if its underlying readable also implements the Closeable interface then the readable's close method will be invoked. If this scanner is already closed then invoking this method will have no effect.

Attempting to perform search operations after a scanner has been closed will result in an IllegalStateException. 
```

由于`BufferedReader`已经实现`Closeable`，它将调用缓冲区读取器关闭方法。

# grails - grails mybatis-plugin 验证位置

> ID：14010370
> 
> 赞同：0
> 
> 时间：2012-12-23T10:54:15.007
> 
> 标签：grails, grails-orm, mybatis

我从 mybatis 插件文档中引用：

> “使用 MyBatis 插件时，您的“域”类应该位于 src/groovy 而不是 grails-app/domain。这是避免与 GROM 冲突的必要条件，因为 MyBatis 插件可以与现有的 GORM 域类共存。

那么当我想将 grails 与 MyBatis 插件一起使用时，验证和约束应该放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T16:49:21.930

您可以向 Grails 中的任何 Groovy 类添加 @Validateable 注释，并且您将能够对其进行验证...插件目前不检查任何验证错误，因此您必须自己实现该代码。

来自官方 Grails 文档：

> 定义静态约束属性并使用 @Validateable 注释的类可以由框架验证

[http://grails.org/doc/2.1.0/guide/validation.html#validationNonDomainAndCommandObjectClasses](http://grails.org/doc/2.1.0/guide/validation.html#validationNonDomainAndCommandObjectClasses)

你甚至可以编写一个自定义的 MyBatis 拦截器（参见[https://github.com/fzilic/Grails-MyBatis/blob/master/src/groovy/org/grails/plugins/mybatis/locking/OptimisticLockingInterceptor.groovy](https://github.com/fzilic/Grails-MyBatis/blob/master/src/groovy/org/grails/plugins/mybatis/locking/OptimisticLockingInterceptor.groovy)）并在之后注册它SqlSession 已创建...

目前 MyBatis 插件不支持在其配置中注册自定义拦截器，但可以将它们添加到拦截器链中

```
def factory = GrailsApplication.mainContext.getBean("sqlSessionFactoryBean_dataSource") 

factory.configuration.interceptorChain.addInterceptor(Interceptor) 
```

将来的版本中可能会添加对此的支持。

# php - 为什么数组函数中的参数与字符串函数中的参数顺序不同？

> ID：14010373
> 
> 赞同：5
> 
> 时间：2012-12-23T10:54:51.730
> 
> 标签：php

我一直想知道为什么在 PHP 数组函数中我们在字符串函数`$needle`之前有`$haystack`，反之亦然。例如：

```
mixed array_search ( mixed $needle , array $haystack [, bool $strict = false ] )
bool in_array ( mixed $needle , array $haystack [, bool $strict = FALSE ] )

string strstr ( string $haystack , mixed $needle [, bool $before_needle = false ] )
int strpos ( string $haystack , mixed $needle [, int $offset = 0 ] ) 
```

是另一种 PHP 悲伤还是对此有某种合乎逻辑的解释？问题是我经常不记得哪个是按什么顺序排列的——也许除此之外的逻辑会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T10:57:39.827

这是在语言的早期版本中引入的 php 悲伤，并且从未纠正以避免这种 BC 中断。这是人们批评 php 时调用的第一个原因

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T10:57:41.637

因为 PHP 是个大杂烩，而且库是不一致的。

没有其他原因。

# java - 使用 ProcessBuilder 向外部进程发送命令

> ID：14010375
> 
> 赞同：4
> 
> 时间：2012-12-23T10:54:57.380
> 
> 标签：java, command-line, process, processbuilder

我正在尝试启动命令外壳并向其发送“dir”命令。但它不起作用。我正在使用的代码基于此处的 SO 问题：[Run external program concurrently and communication with it through stdin / stdout](https://stackoverflow.com/questions/5591215/run-external-program-concurrently)

```
public static void main(String[] args) throws IOException, InterruptedException {

    String params[] = {"cmd.exe"};
    ProcessBuilder pb = new ProcessBuilder(params);
    Process proc = pb.start();

    final Scanner in = new Scanner(proc.getInputStream());
    Thread t = new Thread() {
        public void run() {
            while (in.hasNextLine())
                System.out.println(in.nextLine());
        }
    };

    t.start();
    PrintWriter out = new PrintWriter(proc.getOutputStream());
    Thread.sleep(5000);

    out.write("dir");
    out.flush();

} 
```

由于我看到以下输出，因此正在触发该过程。但是，如果我尝试传递任何命令，它不会以输出或任何内容响应：

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T11:08:43.470

您正在`cmd.exe`返回结果的命令提示符下执行命令

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved. 
```

这样做怎么样

```
Process p=Runtime.getRuntime().exec("cmd /c dir"); 
```

如果您希望您的程序落后并接收值

```
private ExecutorService execService = Executors.newFixedThreadPool(1);

try {
            execService.submit(new Runnable() {

                @Override
                public void run() {
                    try {
                         //define the task over here ...
                         //eg. String command= "your command";
                         //    Process pr = rt.exec(command);
                        } catch (IOException ex) {}
                }
            });
 } catch (IOException ex) {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:58:50.960

看看这个程序。有一个主程序，它有一个用于添加两个数字的 GUI。在终端屏幕后面有另一个程序正在运行，它执行相同的添加操作。两者同时运行。

```
import java.util.Scanner;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
public class Myapp extends javax.swing.JFrame {
    public Myapp() {
        initComponents();
    }
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        first = new javax.swing.JTextField();
        jLabel189 = new javax.swing.JLabel();
        jLabel183 = new javax.swing.JLabel();
        second = new javax.swing.JTextField();
        jLabel184 = new javax.swing.JLabel();
        sum = new javax.swing.JTextField();
        signbut = new javax.swing.JButton();
        signbut1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        first.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.LOWERED));

        jLabel189.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jLabel189.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel189.setText("First Number");

        jLabel183.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jLabel183.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel183.setText("Second Number");

        second.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.LOWERED));

        jLabel184.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jLabel184.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel184.setText("Sum");

        sum.setBackground(new java.awt.Color(255, 255, 255));
        sum.setEditable(false);
        sum.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.LOWERED));
        sum.setDisabledTextColor(new java.awt.Color(255, 255, 255));

        signbut.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        signbut.setText("CLEAR");
        signbut.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                signbutActionPerformed(evt);
            }
        });

        signbut1.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        signbut1.setText("ADD");
        signbut1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                signbut1ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(10, 10, 10)
                        .addComponent(jLabel189, javax.swing.GroupLayout.PREFERRED_SIZE, 120, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(10, 10, 10)
                        .addComponent(first, javax.swing.GroupLayout.PREFERRED_SIZE, 120, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel183, javax.swing.GroupLayout.PREFERRED_SIZE, 130, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(10, 10, 10)
                        .addComponent(second, javax.swing.GroupLayout.PREFERRED_SIZE, 120, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel184, javax.swing.GroupLayout.PREFERRED_SIZE, 130, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(10, 10, 10)
                        .addComponent(sum, javax.swing.GroupLayout.PREFERRED_SIZE, 120, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(70, 70, 70)
                        .addComponent(signbut, javax.swing.GroupLayout.PREFERRED_SIZE, 90, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(10, 10, 10)
                        .addComponent(signbut1, javax.swing.GroupLayout.PREFERRED_SIZE, 90, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(26, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel189)
                    .addComponent(first, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(12, 12, 12)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel183)
                    .addComponent(second, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(10, 10, 10)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel184)
                    .addComponent(sum, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(20, 20, 20)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(signbut)
                    .addComponent(signbut1))
                .addContainerGap(20, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    private void signbutActionPerformed(java.awt.event.ActionEvent evt) {
       sum.setText("");
       first.setText("");
       second.setText("");
    }

    private void signbut1ActionPerformed(java.awt.event.ActionEvent evt) {
      try
      {
       int a=Integer.parseInt(first.getText());
       int b=Integer.parseInt(second.getText());
       int c=a+b;
       sum.setText(""+c);
      }catch(Exception e){
       sum.setText("");
       first.setText("");
       second.setText("");}
    }
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                BackProgram b=new BackProgram();
                b.getBackendWorker();
                new Myapp().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JTextField first;
    private javax.swing.JLabel jLabel183;
    private javax.swing.JLabel jLabel184;
    private javax.swing.JLabel jLabel189;
    private javax.swing.JTextField second;
    private javax.swing.JButton signbut;
    private javax.swing.JButton signbut1;
    private javax.swing.JTextField sum;
    // End of variables declaration
}

class BackProgram
{
   private ExecutorService execService = Executors.newFixedThreadPool(1);
   public void getBackendWorker() {
        try {
            execService.submit(new Runnable() {
                @Override
                public void run() {
                    try {
                          while(true)
                            {
                            try{
                                    System.out.println("(BackProgram Class) Enter two Numbers:");
                                    Scanner s=new Scanner(System.in);
                                    int a=s.nextInt();
                                    int b=s.nextInt();
                                    int c=a+b;
                                    System.out.println("Number Sum is:"+c);
                                }catch(Exception ed){}
                            }
                        } catch (Exception ex) {}
                }
            });
           } catch (Exception ex) {}

    }
} 
```

# java - 链表有两种大小

> ID：14010377
> 
> 赞同：0
> 
> 时间：2012-12-23T10:55:05.523
> 
> 标签：java, android, linked-list, accelerometer

我正在尝试从加速度计添加到 LinkedList 值。

```
private LinkedList<Float> rawValues = new LinkedList<Float>();
public void onSensorChanged(SensorEvent event)
{
    int eventType = event.sensor.getType();

    switch(eventType)
    {
        case Sensor.TYPE_ACCELEROMETER:
            float accelerometer_z = event.values[2];

                     rawValues.add(accelerometer_z);

                     /**
                      * This printout gives me positions and event values
                      */
                     System.out.println("getAccelerometer size: " +                 
                     rawValues.size() + " entry: " + rawValues.getLast());

            break;
    }
} 
```

到目前为止一切顺利，我得到了预期的读数和数字位置。但是，当我尝试用其他方法对列表进行处理时，它似乎是空的！

```
public String[] getVelocity()
{
    String[] velocityString = {"42","42"};
    String values = "";
    String theInteger = "";

    /**
     * Returns a 0 size...
     */
    int theSize = rawValues.size();

    System.out.println("getVelocity size: " + theSize);

    LinkedList<Float> slopeValues = calculateSlopeValues( rawValues);

    for (int i = 0; i < theSize; i++)
    {
        values += "Raw:"+i+ " " + String.valueOf(rawValues.get(i)) + "\n";
        values += "\tSlope:"+i+ " " + String.valueOf(slopeValues.get(i)) + "\n";
    }

    theInteger = String.valueOf(Math.round(Collections.max(slopeValues)*100));

    /**
     * After adding everything to local variables, the list is cleared.
     */
    slopeValues.clear();

    velocityString[0] = theInteger;
    velocityString[1] = values;

    return velocityString;
} 
```

getVelocity 方法是从主活动中的 onTouch 调用的。请给点光好吗？

问候/米

重写的 onTouch 方法：

```
@Override
public boolean onTouch(View view, MotionEvent event)
{
    MySensorEventListener eventListener = new MySensorEventListener();

    switch(event.getAction())
    {
        case MotionEvent.ACTION_DOWN:
            String[] strings = eventListener.getVelocity();

            String velocity_int = strings[0];
            String velocity_string = strings[1];

            velocityView.setText(velocity_int);
            listView.setText(velocity_string);

            break;
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T12:36:08.520

好吧，每次`onTouch()`调用时，你都会创建一个 的新实例`MySensorEventListener`，并询问这个新实例的速度。由于每个`MySensorEventListener`实例都有自己的原始值链表，因此每次都会得到一个空列表。

侦听器应该只创建一次，并存储在封闭类的实例字段中。

# c - 结构中的输入数字 - 检查它是否已存在于文件中

> ID：14010382
> 
> 赞同：0
> 
> 时间：2012-12-23T10:55:40.637
> 
> 标签：c, struct, eclipse-cdt

我正在尝试编写一个数据验证函数，其中 ID 号必须是结构数组中的唯一编号。每次我尝试保存有效的 ID 号时，程序都会崩溃 - 为什么会发生这种情况？

这是结构，以及结构数组的声明：

```
struct customer {                   // set up customer template    //
    char name [MAXNAM];
    char surname [MAXNAM];
    int idnum [MAX_ID];
    };
struct customer data_cus[MAXCUS]; 
```

这是在主程序中：

```
printf ("Please Enter ID Card, [NOTE! Only numbers are allowed!]\n");
                int checkID;

                while ((scanf ("%d",&checkID) == 0 || customerID(checkID, count)==1))
                {
                    printf ("This ID is already taken! Please enter unique ID!\n");
                    while (getchar()!='\n')
                    {
                        continue;
                    }
                    *data_cus[count].idnum = checkID;
                } 
```

这是用于检查文件中已存在的 ID 的函数：

```
int customerID (int cCheck, int count)
{
    FILE * pcustomer;
    int size = sizeof (struct customer);

    struct customer temp;

    rewind (pcustomer);
    while (fread (&temp,size,count,pcustomer)==1)
    {
        if (*temp.idnum == cCheck)
        {
            return 1;
        }
    }
    return 0;
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:06:49.507

`scanf`返回成功匹配的项目数，我认为您的意思是：

```
while (scanf ("%d",&checkID) == 1 && customerID(checkID, count)==1). 
```

您应该确保在成功读取唯一 ID 时`count`不超过`MAXCUS`仅增量，并且您不需要整数数组，`idnum`因为每条记录只有一个。

此外，该函数`customerID`显然是错误的，在这里您读取了多个`customer`结构并写入`temp`单个`customer`结构，这很可能是它崩溃的原因：

```
 while (fread (&temp,size,count,pcustomer)==1) 
```

如果您跟踪数组中的 ID 而不是每次要检查新 ID 是否唯一时都从文件中读取，这会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T11:47:27.870

idnum 是一个整数数组。这真的是你想要的，而不仅仅是一个简单的整数？

我很确定如果你`[MAX_ID]`从你的结构中删除，事情会更好。

但是，一旦我们看到 ID 检查代码之后的代码，我保留更改其崩溃原因的权利。

# javascript - jQuery 动画回调吃掉的事件对象

> ID：14010383
> 
> 赞同：5
> 
> 时间：2012-12-23T10:55:42.687
> 
> 标签：javascript, jquery, callback

我在事件中传递给函数的事件对象有问题`drop`。在我的代码中，`div#dropArea`它的 drop 事件是否由`firstDrop`执行一些动画的函数处理，然后调用`dropFromDesktop`处理`e.dataTransfer.files`对象的正确函数。我需要在两个单独的函数中使用这种方法，因为 HTML 文档中的其他一些 div 也进一步使用了后者（无需复制代码）。第一个仅使用一次，以隐藏一些“欢迎”文本。

通常，这种机制允许您从桌面拖动文件并将它们放到我网站上的某个区域中。

这是它的外观（在快捷方式中）：

```
function firstDrop(ev) {
    var $this = $(this);

    //when I call the function here, it passes the event with files inside it
    //dropFromDesktop.call($this, ev);

    $this.children('.welcomeText').animate({
        opacity: '0',
        height: '0'
    }, 700, function() {
        $('#raw .menu').first().slideDown('fast', function() {
            //when I call the function here, it passes the event, but 'files' object is empty
            dropFromDesktop.call($this, ev);
        });
    });
}

function dropFromDesktop(ev) {
    var files = ev.originalEvent.dataTransfer.files;
    (...) //handling the files
}

$('#dropArea').one('drop', firstDrop);
$('some_other_div').on('drop', dropFromDesktop); 
```

问题出在`jQuery.animation`的回调中 - 当我在其中调用我的函数时，事件对象被正确传递，但来自 dataTransfer 的文件对象为空！

整个脚本都放在里面`$(document).ready(function() { ... });`，所以函数声明的顺序并不重要，我猜。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:13:21.813

我怀疑您的问题与`Event`对象的生命周期有关。不幸的是，我不知道它的原因。但是，有一种我能想到的解决方法，它保留了对它的引用`Event.dataTransfer.files`。

```
var handleFileList = function(fn) {
  return function(evt) {
    evt.preventDefault();
    return fn.call(this, evt.originalEvent.dataTransfer.files);
  };
}; 
```

```
var firstDrop = function(fileList) { ... }
var dropFromDesktop = function(fileList) { ... } 
```

```
$('#dropArea').one('drop', handleFileList(firstDrop));
$('some_other_div').on('drop', handleFileList(dropFromDesktop));​ 
```

# php-gtk - 在 Fedora 17 上安装 php_gtk 时出现“make: *** [ext/gtk+/php_gtk+.lo] 错误 1”

> ID：14010390
> 
> 赞同：0
> 
> 时间：2012-12-23T10:56:56.090
> 
> 标签：php-gtk

我想`php_gtk`在 Fedora 17 上安装。

我已经下载`php-gtk-2.0.1`并尝试安装它。然后我这样做了：

```
./buildconf
./configure
make 
```

命令执行后`make`出现如下错误：

```
In file included from /home/n/Downloads/php-gtk-2.0.1/./ext/gtk+/php_gtk+.c:23:0:
/home/n/Downloads/php-gtk-2.0.1/main/php_gtk.h:307:64: error: unknown type name 'function_entry'
In file included from /home/n/Downloads/php-gtk-2.0.1/./ext/gtk+/php_gtk+.c:23:0:
/home/n/Downloads/php-gtk-2.0.1/main/php_gtk.h:308:68: error: unknown type name 'function_entry'
In file included from /home/n/Downloads/php-gtk-2.0.1/./ext/gtk+/php_gtk+.c:23:0:
/home/n/Downloads/php-gtk-2.0.1/main/php_gtk.h:490:64: error: unknown type name 'function_entry'
In file included from /home/n/Downloads/php-gtk-2.0.1/./ext/gtk+/php_gtk+.c:23:0:
/home/n/Downloads/php-gtk-2.0.1/main/php_gtk.h:506:66: error: unknown type name 'function_entry'
make: *** [ext/gtk+/php_gtk+.lo] Error 1 
```

### 我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T17:36:28.830

如果你有 php-5.4 则需要更改`function_entry`为`zend-function_entry`，但如果解决了，你可能会发现其他问题。

# android - iMediaShare 是如何工作的

> ID：14010393
> 
> 赞同：1
> 
> 时间：2012-12-23T10:57:21.533
> 
> 标签：android

我安装了这个名为[iMediaShare](https://play.google.com/store/apps/details?id=com.bianor.ams&feature=more_from_developer#?t=W251bGwsMSwxLDEwMiwiY29tLmJpYW5vci5hbXMiXQ..)的应用程序，它可以帮助在我的电视上播放 youtube 视频。我想知道的是在哪里可以找到可以将图像/视频文件传输到三星电视的协议信息或示例代码。必须有某种文档或一些食谱可以帮助我入门。以前有没有人做过这样的事情。如果是这样，从 android 发送的 upnp 协议流到底如何？

# android - 从 Web 读取数据并使用 Intent 服务显示文本

> ID：14010394
> 
> 赞同：1
> 
> 时间：2012-12-23T10:57:34.943
> 
> 标签：android, android-intent, service

我想要一个示例从网络读取数据并通过意图服务输出到 textview。我阅读了这个[http://www.vogella.com/articles/AndroidServices/article.html](http://www.vogella.com/articles/AndroidServices/article.html)但下载文件...我想将数据存储为字符串在主要活动的另一个功能中使用。谢谢。

```
public class DownloadService extends IntentService {

private int result = Activity.RESULT_CANCELED;
public String s = "";

public DownloadService() {
super("DownloadService");
}

// Will be called asynchronously be Android
@Override
protected void onHandleIntent(Intent intent) {
Uri data = intent.getData();
String urlPath = intent.getStringExtra("urlpath");

InputStream stream = null;
//FileOutputStream fos = null;
try {

  URL url = new URL(urlPath);
  stream = url.openConnection().getInputStream();
  InputStreamReader reader = new InputStreamReader(stream);
  //fos = new FileOutputStream(output.getPath());
  int next = -1;

  while ((next = reader.read()) != -1) {
    //fos.write(next);
    s=s+next;
  }
  // Sucessful finished
  result = Activity.RESULT_OK; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T15:27:11.667

由于您已将 inputStream 从 urlPath 附加到“s”

您可以使用以下方法从 MainActivity 访问您的“s”：

```
String data=new DownloadService().s; 
```

只需实例化 IntentService 并借助实例化对象上的句点访问它的参数。

# c# - 如何将带有标题的文本放在剪贴板上？

> ID：14010397
> 
> 赞同：0
> 
> 时间：2012-12-23T10:57:45.410
> 
> 标签：c#, .net

如果我从网页或 Word 文档中复制文本（使用光标等。我不是以编程方式），然后将其粘贴到 Word 文档中 - Word 知道什么是标题，什么是简单文本。我想做同样的事情（以编程方式） - 将文本放在剪贴板上并指定它的一部分是标题 1，部分标题 2...，部分是简单文本。

我发现[这个](http://blogs.msdn.com/b/jmstall/archive/2007/01/21/sample-code-html-clipboard.aspx)类将 html 文本（可以有标题）放在剪贴板上，但想知道：
a）那是从 2007 年 1 月开始的。也许现在有一种更简单的方法。
b) HTML 只允许最多 6 个标题级别。（我实际上尝试了 h7，但 Word 无法识别它。）也许有一些方法可以像 Word 一样拥有无限的标题级别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:17:53.350

我认为剪贴板处理在最新版本的 .net 框架中没有更新。我认为使用 ole 自动化或 open xml sdk 可以实现更复杂的更新/向 word 文档添加内容。

# c# - 适用于 Unity 的 Android 插件给出错误

> ID：14010398
> 
> 赞同：3
> 
> 时间：2012-12-23T10:57:47.283
> 
> 标签：c#, java, android, plugins, unity3d

我正在做一个测试应用程序，以了解我们如何通过插件统一使用 java 代码。

我在 Eclipse 中使用 Android 3.2 创建了一个简单的 Android Activity 类。

```
package com.control.unitycontrol;
import com.unity3d.player.UnityPlayerActivity;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;
public class MainActivity extends UnityPlayerActivity  {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d("TEST","Foo method is called is called 1111");

    }

    public static void foo(){

        Log.d("TEST","Foo method is called is called 2222");  // this method is never called

    }} 
```

这是我的 AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.control.unitycontrol"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main"
             android:configChanges="fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

根据教程，我将 classes.jar 复制到我的 libs 文件夹中，然后将其添加到我的类路径中。

然后我做了我的项目“是图书馆”。

最后，我将 unitycontrol.jar 与 AndroidManifest.xml 一起添加到 Assests->Plugins->Android 文件夹中。

在我编写的 C# 脚本中访问我的代码。

```
using (AndroidJavaClass cls_UnityPlayer = new AndroidJavaClass("com.unity3d.player.UnityPlayer")) 

        {

            using (AndroidJavaObject obj_Activity = cls_UnityPlayer.GetStatic<AndroidJavaObject>("currentActivity")) 

        {

                obj_Activity .CallStatic("foo");

        }

    } 
```

当我播放我的场景时，我收到错误消息：

***JNI：找不到“currentActivity”（静态）UnityEngine.AndroidJavaObject：GetStatic（String）的字段ID***

如果我尝试构建它，我会收到错误消息：

***使用以下参数重新打包资源失败：package -v -f -m -J gen -M AndroidManifest.xml -S "res" -I "C:/Users/sumit/Documents/android-sdk-windows/平台/android-16\android.jar" -F bin/resources.ap_ 配置：***

任何帮助...!!! 我能做些什么来解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:22:06.917

只是尝试删除 AndroidManifest.xml？对于图书馆来说，它是无用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T00:13:55.160

从应用程序标签中删除图标/主题/标签，绝对有效。

# c# - XNA Content 不会卸载一次性资产 (Texture2D)

> ID：14010402
> 
> 赞同：2
> 
> 时间：2012-12-23T10:58:17.800
> 
> 标签：c#, xna, textures

我正在开发的游戏从 Content 子项目的文件夹中加载所有纹理，并将它们存储在`Texture2D[]`.

由于我无法弄清楚的原因，XNA 的 ContentManager（内容）似乎永远不会卸载这些纹理。所以即使我从文件夹中删除它们，它们仍然存储在管道中。

这是我的内容文件夹：

![在此处输入图像描述](../Images/9a70067fa4ed85e0527d57bde91d455c.png)

这是调试中 ContentManager 的加载资产。

![在此处输入图像描述](../Images/0d758984744b703c0a8529f47aa3603e.png)

正如您从红色元素轮廓中看到的那样，这些纹理已从 Content 文件夹中删除，但它们仍保留在 ContentManager 缓存中。这意味着当我从“TileSets”文件夹中加载所有纹理时，本应删除的纹理也会被加载。

我已经尝试过`Content.Dispose()`并且`Content.Unload()`主要`UnloadContent()`但那些并不能解决问题。还要确保从我的外部文件夹资源管理器中的文件夹中删除了纹理，甚至检查了 ContentPipeline.xml；那里没有引用纹理。

这是怎么回事？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T11:15:52.460

显然我错过了存储在 .xnb 文件中的 .xnb 文件`~\bin\x86\Debug\Content`。

从那里删除文件后，一切都按预期工作。

# c# - 单元测试 unityContainer.Resolve

> ID：14010404
> 
> 赞同：2
> 
> 时间：2012-12-23T10:58:20.883
> 
> 标签：c#, asp.net-mvc, unit-testing, unity-container, moq

在一个类中，我正在使用此代码：

```
 public User CurrentUser
    {
        get
        {
            var unityContainer = new UnityContainer();
            var httpContextHelper = unityContainer.Resolve<HttpContextHelper>();
            return httpContextHelper.GetUser();
        }
    } 
```

这是在`Bootstrapper.cs`文件中：

```
public static class Bootstrapper
{
    public static void Initialise()
    {
        IUnityContainer unityContainer = new UnityContainer();
        unityContainer.RegisterType<IHttpContextHelper, HttpContextHelper>();
        DependencyResolver.SetResolver(new UnityDependencyResolver(unityContainer));
    }
} 
```

我不能在这里使用构造函数注入，因为它是一个基类，重构需要相当多的工作。

但是我将如何对此进行单元测试？我找不到合适的模拟方法`unityContainer.Resolve`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-23T16:47:19.993

首先，以下代码是错误的：

```
get
{
    var unityContainer = new UnityContainer();
    var httpContextHelper = unityContainer.Resolve<HttpContextHelper>();
    return httpContextHelper.GetUser();
} 
```

您正在创建一个新的 Unity 容器，该容器当然是**空**的，然后您尝试从该容器中解析一些实例，这些实例只会调用该类的默认构造函数`HttpContextHelper`。天哪，我讨厌 Unity 在您尝试解析从未注册到容器中的实例时没有抛出异常（这就是您在这里所做的）。相反，它使用大多数已知的（注册的）依赖项默默地调用其构造函数。

因此，这不会返回您在 Bootstrapper 中注册的实例，因为您有一个不同的 UnityContainer 实例，您在其中注册了该`IHttpContextHelper`实例。

所以重构的第一步是使用 DependencyResolver：

```
public User CurrentUser
{
    get
    {
        var httpContextHelper = DependencyResolver
            .Current
            .GetService<IHttpContextHelper>();
        return httpContextHelper.GetUser();
    }
} 
```

现在在您的单元测试中，您可以编写一个自定义依赖解析器：

```
public class DepepndecyResolverMock : IDependencyResolver
{
    private readonly IDictionary<Type, object> kernel;
    public DepepndecyResolverMock(IDictionary<Type, object> kernel)
    {
        this.kernel = kernel;
    }

    public object GetService(Type serviceType)
    {
        return this.kernel[serviceType];
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        throw new NotImplementedException();
    }
} 
```

您可以为您的测试配置：

```
var kernel = new Dictionary<Type, object>
{
    { typeof(IHttpContextHelper), new HttpContextHelperMock() }
};
DependencyResolver.SetResolver(new DepepndecyResolverMock(kernel)); 
```

话虽如此，这段代码仍然是**非常错误**的。它可能允许您对其进行单元测试，但请我坚持，这是错误的设计。不要使用它。这使用了服务定位器模式，它是一种**反模式**。

做到这一点的正确方法是反转这个类的控制，这样它就不需要获取它的依赖项，但它的依赖项需要注入它。因此，与其将时间浪费在无用的模式上，不如重构您的代码，使其使用真正的依赖注入。

# linux - Unix cut 除了最后两个标记

> ID：14010414
> 
> 赞同：22
> 
> 时间：2012-12-23T11:00:13.150
> 
> 标签：linux, bash, unix, token, cut

我正在尝试解析特定目录中的文件名。文件名的格式为：

```
token1_token2_token3_token(N-1)_token(N).sh 
```

我需要使用 delimiter 切割标记`'_'`，并且需要获取除最后两个标记之外的字符串。在上面的示例中，输出应该是`token1_token2_token3`.

令牌的数量不是固定的。我试过用命令`-f#-`选项来做`cut`，但没有找到任何解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-23T11:08:18.673

带切割：

```
$ echo t1_t2_t3_tn1_tn2.sh | rev | cut -d_ -f3- | rev
t1_t2_t3 
```

rev 反转每一行。`3-`in表示从第`-f3-`3 个字段到行尾（即在未反转文本中通过倒数第三个字段的行开头）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-23T11:17:27.953

您可以使用 POSIX 定义的参数替换：

```
$ name="t1_t2_t3_tn1_tn2.sh"
$ name=${name%_*_*}
$ echo $name
t1_t2_t3 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-23T11:06:40.600

它不能用 来完成`cut`，但是，你可以使用`sed`

```
sed -r 's/(_[^_]+){2}$//g' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-18T10:10:31.857

只是写ysth答案的另一种方式：

```
echo "t1_t2_t3_tn1_tn2.sh" |rev| cut -d"_" -f1,2 --complement | rev 
```

# android - 广播接收器有时会崩溃android

> ID：14010415
> 
> 赞同：0
> 
> 时间：2012-12-23T11:00:19.127
> 
> 标签：android, broadcastreceiver

我正在使用此代码发送短信。

```
private void sendSMS(String phoneNumber, String message) {

        System.out.println("SMS: " + message);
        System.out.println("to " + phoneNumber);

        String SENT = "SMS_SENT";
        String DELIVERED = "SMS_DELIVERED";
        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent(
                SENT), 0);
        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
                new Intent(DELIVERED), 0);
        // ---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver() {
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode()) {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS sent",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off",
                            Toast.LENGTH_SHORT).show();
                    break;
                }
            }
        }, new IntentFilter(SENT));

        // ---when the SMS has been delivered---
        registerReceiver(new BroadcastReceiver() {
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode()) {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered",
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered",
                            Toast.LENGTH_SHORT).show();
                    break;
                }
            }
        }, new IntentFilter(DELIVERED));

//      SmsManager sms = SmsManager.getDefault();
//      sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);

        SmsManager sm = SmsManager.getDefault();
        ArrayList<String> parts = sm.divideMessage(message);
        int numParts = parts.size();

        ArrayList<PendingIntent> sentIntents = new ArrayList<PendingIntent>();
        ArrayList<PendingIntent> deliveryIntents = new ArrayList<PendingIntent>();

        for (int i = 0; i < numParts; i++) {
            sentIntents.add(sentPI);
            deliveryIntents.add(deliveredPI);
        }

        sm.sendMultipartTextMessage(phoneNumber, null, parts, sentIntents,
                deliveryIntents);
    }
} 
```

有时我会收到此错误，而其他时候它可以正常播放而根本没有错误：

```
android.app.IntentReceiverLeaked: Activity com.example.senddemo.MainActivity has leaked IntentReceiver com.example.senddemo.MainActivity$6@40548d50 that was originally registered here. Are you missing a call to unregisterReceiver()?
12-23 15:23:32.800 E/ActivityThread(27024):     at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:756)
12-23 15:23:32.800 E/ActivityThread(27024):     at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:551)
12-23 15:23:32.800 E/ActivityThread(27024):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:836)
12-23 15:23:32.800 E/ActivityThread(27024):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:823)
12-23 15:23:32.800 E/ActivityThread(27024):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:817)
12-23 15:23:32.800 E/ActivityThread(27024):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:318)
12-23 15:23:32.800 E/ActivityThread(27024):     at com.example.senddemo.MainActivity.sendSMS(MainActivity.java:331)
12-23 15:23:32.800 E/ActivityThread(27024):     at com.example.senddemo.MainActivity.access$0(MainActivity.java:290)
12-23 15:23:32.800 E/ActivityThread(27024):     at com.example.senddemo.MainActivity$2.onClick(MainActivity.java:120)
12-23 15:23:32.800 E/ActivityThread(27024):     at android.view.View.performClick(View.java:2552)
12-23 15:23:32.800 E/ActivityThread(27024):     at android.view.View$PerformClick.run(View.java:9229)
12-23 15:23:32.800 E/ActivityThread(27024):     at android.os.Handler.handleCallback(Handler.java:587)
12-23 15:23:32.800 E/ActivityThread(27024):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-23 15:23:32.800 E/ActivityThread(27024):     at android.os.Looper.loop(Looper.java:138)
12-23 15:23:32.800 E/ActivityThread(27024):     at android.app.ActivityThread.main(ActivityThread.java:3701)
12-23 15:23:32.800 E/ActivityThread(27024):     at java.lang.reflect.Method.invokeNative(Native Method)
12-23 15:23:32.800 E/ActivityThread(27024):     at java.lang.reflect.Method.invoke(Method.java:507)
12-23 15:23:32.800 E/ActivityThread(27024):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
12-23 15:23:32.800 E/ActivityThread(27024):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
12-23 15:23:32.800 E/ActivityThread(27024):     at dalvik.system.NativeStart.main(Native Method)
12-23 15:23:32.810 E/ActivityThread(27024): Activity com.example.senddemo.MainActivity has leaked IntentReceiver com.example.senddemo.MainActivity$5@405486e0 that was originally registered here. Are you missing a call to unregisterReceiver()? 
```

我是否需要在我的 xml 文件或 OnDestry 函数中添加任何内容？因为我不熟悉广播接收器。为什么它有时会播放而其他一些则不播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:12:03.180

您必须保存广播接收器的引用，并取消注册接收器。

像这样更改您的代码：

```
private BroadcastReceiver mSentReceiver;
private BroadcastReceiver mDeleiveryReceiver;

private void sendSMS(String phoneNumber, String message) {

        System.out.println("SMS: " + message);
        System.out.println("to " + phoneNumber);

        String SENT = "SMS_SENT";
        String DELIVERED = "SMS_DELIVERED";
        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent(
                SENT), 0);
        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
                new Intent(DELIVERED), 0);
        // ---when the SMS has been sent---

mSentReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode()) {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS sent",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off",
                            Toast.LENGTH_SHORT).show();
                    break;
                }
            }
        });

        registerReceiver(mSentReceiver, new IntentFilter(SENT));

        // ---when the SMS has been delivered---

mDeleiveryReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode()) {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered",
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered",
                            Toast.LENGTH_SHORT).show();
                    break;
                }
            }
        });
        registerReceiver(mDeleiveryReceiver, new IntentFilter(DELIVERED));

//      SmsManager sms = SmsManager.getDefault();
//      sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);

        SmsManager sm = SmsManager.getDefault();
        ArrayList<String> parts = sm.divideMessage(message);
        int numParts = parts.size();

        ArrayList<PendingIntent> sentIntents = new ArrayList<PendingIntent>();
        ArrayList<PendingIntent> deliveryIntents = new ArrayList<PendingIntent>();

        for (int i = 0; i < numParts; i++) {
            sentIntents.add(sentPI);
            deliveryIntents.add(deliveredPI);
        }

        sm.sendMultipartTextMessage(phoneNumber, null, parts, sentIntents,
                deliveryIntents);
    }
}

@onDestroy(){
if(mSentReceiver != null) unregisterReceiver(mSentReceiver);
if(mDeleiveryReceiver != null) unregisterReceiver(mDeleiveryReceiver);
} 
```

# struts2 - 瓷砖 3 和 Struts 2 错误

> ID：14010416
> 
> 赞同：1
> 
> 时间：2012-12-23T11:00:39.923
> 
> 标签：struts2, java-ee-6, tiles-3

我试图根据这个[链接](https://stackoverflow.com/questions/13337938/how-to-integrate-struts-2-with-tiles-3)使用 Struts 2 & Tiles 3 。但是，只要我在 web.xml 上添加侦听器类：

```
<listener>
    <listener-class>org.apache.tiles.extras.complete.CompleteAutoloadTilesListener</listener-class>
</listener> 
```

在 glassfish 服务器上上传时出现以下错误：

> 部署期间发生错误：加载应用程序时出现异常：java.lang.IllegalStateException：ContainerBase.addChild：开始：org.apache.catalina.LifecycleException：java.lang.NoClassDefFoundError：org/springframewor /core/io/support/ResourcePatternResolver。有关详细信息，请参阅 server.log。

错误消息是：

> [#|2012-12-23T18:36:10.982+0800|SEVERE|glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=22;_ThreadName=Thread-4;|调用 com.sun.enterprise.web.WebApplication 类启动方法时出现异常 java.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.NoClassDefFoundError: org/springframework /core/io/support/ResourcePatternResolver 在 com.sun.enterprise.web.WebApplication.start(WebApplication.java:138) 在 org.glassfish.internal.data.EngineRef.start(EngineRef.java:130) 在 org.glassfish .internal.data.ModuleInfo.start(ModuleInfo.java:269) at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301) at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle .java:461) 在 com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240) 在 org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389) 在 com.sun.enterprise .v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348) 在 com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363) 在 com.sun.enterprise.v3.admin.CommandRunnerImpl。 doCommand(CommandRunnerImpl.java:1085) at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95) at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java :1291) 在 com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259) 在 org.glassfish.admin.rest.ResourceUtil.runCommand(ResourceUtil.java:214) 在 org.glassfish.admin.rest.ResourceUtil.runCommand(ResourceUtil.java:207) 在 org.glassfish.admin.rest.resources.TemplateListOfResource.createResource(TemplateListOfResource.java:148) 在 sun.reflect.NativeMethodAccessorImpl .invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java :597) 在 com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60) 在 com.sun.jersey.server.impl.model.method.dispatch.Abs​​tractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider. java:205) 在 com.sun.jersey.server.impl.model.method.dispatch。ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75) 在 com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288) 在 com.sun.jersey.server.impl.uri.rules。 SubLocatorRule.accept(SubLocatorRule.java:134) 在 com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147) 在 com.sun.jersey.server.impl.uri.rules。 SubLocatorRule.accept(SubLocatorRule.java:134) 在 com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147) 在 com.sun.jersey.server.impl.uri.rules。 ResourceClassRule.accept(ResourceClassRule.java:108) 在 com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147) 在 com.sun.jersey.server.impl.uri.rules。 RootResourceClassesRule.accept(RootResourceClassesRule.java:84) 在 com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400) 在 com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469) 在 com .sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349) 在 com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339) 在 com.sun.jersey .server.impl.container.grizzly.GrizzlyContainer._service(GrizzlyContainer.java:182) 在 com.sun.jersey.server.impl.container.grizzly.GrizzlyContainer.service(GrizzlyContainer.java:147) 在 org.glassfish.admin .rest.adapter.RestAdapter.service(RestAdapter.java:148) 在 com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179) 在 com.sun.enterprise。v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117) 在 com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354) 在 com.sun.enterprise.v3.services。 impl.ContainerMapper.service(ContainerMapper.java:195) 在 com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849) 在 com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)在 com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045) 在 com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228) 在 com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain .java:137) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) 在 com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79) 在 com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) 在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask .java:59) 在 com.sun.grizzly.ContextTask.run(ContextTask.java:71) 在 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) 在 com.sun.grizzly。 util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:680) |#]在 com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) 在 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) 运行(ContextTask.java:71)在 java.lang.Thread.run(Thread.java:680) |#]在 com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) 在 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) 运行(ContextTask.java:71)在 java.lang.Thread.run(Thread.java:680) |#]

它似乎在 Spring Framework 中寻找一些东西，但我使用的是 Struts2 + Tiles 3。我错过了什么吗？

这是我的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>SongLyricsSystemv1</display-name>

    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>
        <listener-class>org.apache.tiles.extras.complete.CompleteAutoloadTilesListener</listener-class>
    </listener>

    <context-param>
        <param-name>insertAttribute</param-name>
        <param-value>/WEB-INF/tiles.xml</param-value>
    </context-param>

      <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list> 
</web-app> 
```

瓷砖.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE tiles-definitions PUBLIC
   "-//Apache Software Foundation//DTD Tiles Configuration 2.0//EN"
   "http://tiles.apache.org/dtds/tiles-config_2_0.dtd">

<tiles-definitions>

<definition name="baseLayout" template="WebContent/BaseLayout.jsp">         

    <put-attribute name="menu" value="WebContent/Menu.jsp" />

</definition>

<definition name="/welcome.tiles" extends="baseLayout">
    <put-attribute name="title" value="Welcome" />
    <put-attribute name="body" value="WebContent/Welcome.jsp" />
</definition>

<definition name="/customer.tiles" extends="baseLayout">
    <put-attribute name="title" value="Customer Form" />
    <put-attribute name="body" value="WebContent/Customer.jsp" />
</definition>
<definition name="/customer.success.tiles" extends="baseLayout">
    <put-attribute name="title" value="Customer Added" />
    <put-attribute name="body" value="WebContent/SuccessCustomer.jsp" />
</definition>

</tiles-definitions> 
```

Struts.xml：

```
 <struts>
<package name="default" namespace="/" extends="struts-default"> 
    <result-types>
        <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult" />
    </result-types>
    <action name="login" 
        class="com.java.actions.LoginAction">
        <result name="success" type="tiles">/welcome.tiles</result>
        <result name="error">Login.jsp</result>
    </action>
    <action name="customer" 
        class="com.java.actions.CustomerAction">
        <result name="success" type="tiles">/customer.success.tiles</result>
        <result name="input" type="tiles">/customer.tiles</result>
    </action>
    <action name="customer-form">
        <result name="success" type="tiles">/customer.tiles</result>
    </action>

</package>
</struts> 
```

我的 jar 文件列表：

*   antlr-2.7.2.jar
*   classworlds-1.1.jar
*   commons-beanutils-1.8.0.jar
*   commons-chain-1.2.jar
*   commons-collections-3.1.jar
*   commons-digester-2.0.jar
*   commons-fileupload-1.2.2.jar
*   commons-io-2.0.1.jar
*   commons-lang-2.4.jar
*   commons-lang3-3.1.jar
*   commons-logging-1.1.1.jar
*   commons-logging-api-1.1.jar
*   commons-validator-1.3.1.jar
*   freemarker-2.3.19.jar
*   javassist-3.11.0.GA.jar
*   javax.servlet-api.jar
*   javax.servlet.jsp-api.jar
*   jcl-over-slf4j-1.7.2.jar
*   七月到 slf4j-1.7.2.jar
*   log4j-over-slf4j-1.7.2.jar
*   mvel2-2.1.3.jar
*   ognl-3.0.5.jar
*   oro-2.0.8.jar
*   椭圆形1.31.jar
*   sitemesh-2.4.2.jar
*   slf4j-api-1.7.2.jar
*   slf4j-ext-1.7.2.jar
*   slf4j-jcl-1.7.2.jar
*   slf4j-jdk14-1.7.2.jar
*   slf4j-log4j12-1.7.2.jar
*   slf4j-migrator-1.7.2.jar
*   slf4j-nop-1.7.2.jar
*   slf4j-simple-1.7.2.jar
*   struts2-core-2.3.7.jar
*   struts2-tiles-plugin-2.3.7.jar
*   瓷砖-api-3.0.1.jar
*   瓷砖自动标记核心运行时 1.1.0.jar
*   瓷砖-compat-3.0.1.jar
*   瓷砖核心3.0.1.jar
*   瓷砖-el-3.0.1.jar
*   瓷砖-extras-3.0.1.jar
*   瓷砖-freemarker-3.0.1.jar
*   瓷砖-jsp-3.0.1.jar
*   瓷砖-mvel-3.0.1.jar
*   瓷砖-ognl-3.0.1.jar
*   瓷砖请求-api-1.0.1.jar
*   瓷砖请求-freemarker-1.0.1.jar
*   瓷砖请求-jsp-1.0.1.jar
*   瓷砖请求-小胡子-1.0.1.jar
*   瓷砖请求-servlet-1.0.1.jar
*   瓷砖请求-servlet-wildcard-1.0.1.jar
*   瓦片-请求-速度-1.0.1.jar 瓦片-servlet-3.0.1.jar
*   瓷砖模板-3.0.1.jar
*   瓷砖速度3.0.1.jar
*   速度-1.6.3.jar
*   xstream-1.4.2.jar
*   xwork-core-2.3.7.jar

我还缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:52:45.693

这些是使用有效的 struts2 tiles3 集成部署的 jar（与您指向的链接相同）：

```
aopalliance-1.0.jar
asm-3.3.jar
asm-commons-3.3.jar
asm-tree-3.3.jar
builder-0.6.2.jar
commons-beanutils-1.8.0.jar
commons-collections-3.2.jar
commons-digester-2.0.jar
commons-fileupload-1.2.2.jar
commons-io-2.0.1.jar
commons-lang3-3.1.jar
commons-lang-2.4.jar
core-0.6.2.jar
freemarker-2.3.19.jar
guava-r09.jar
jackson-core-asl-1.5.2.jar
jackson-mapper-asl-1.5.2.jar
javassist-3.11.0.GA.jar
jcl-over-slf4j-1.5.8.jar
mvel2-2.0.11.jar
ognl-3.0.5.jar
oro-2.0.8.jar
slf4j-api-1.5.8.jar
slf4j-jdk14-1.5.8.jar
spring-beans-2.5.6.jar
spring-context-2.5.6.jar
spring-core-2.5.6.jar
spring-web-2.5.6.jar
struts2-convention-plugin-2.3.4.1.jar
struts2-core-2.3.4.1.jar
tiles-api-3.0.1.jar
tiles-autotag-core-runtime-1.1.0.jar
tiles-compat-3.0.1.jar
tiles-core-3.0.1.jar
tiles-el-3.0.1.jar
tiles-extras-3.0.1.jar
tiles-freemarker-3.0.1.jar
tiles-jsp-3.0.1.jar
tiles-mvel-3.0.1.jar
tiles-ognl-3.0.1.jar
tiles-request-api-1.0.1.jar
tiles-request-freemarker-1.0.1.jar
tiles-request-jsp-1.0.1.jar
tiles-request-mustache-1.0.1.jar
tiles-request-servlet-1.0.1.jar
tiles-request-servlet-wildcard-1.0.1.jar
tiles-request-velocity-1.0.1.jar
tiles-servlet-3.0.1.jar
tiles-template-3.0.1.jar
tiles-velocity-3.0.1.jar
velocity-1.6.2.jar
velocity-tools-2.0.jar
xwork-core-2.3.4.1.jar 
```

我强烈建议您使用 maven 进行构建，这里有一个完整的 pom.xml：

http://maven.apache.org/xsd/maven-4.0.0.xsd">4.0.0

```
<groupId>com.quaternion</groupId>
<artifactId>Struts2_Tiles3_Integration</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>war</packaging>

<name>Struts2_Tiles3_Integration</name>

<properties>
    <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-convention-plugin</artifactId>
        <version>2.3.4.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-extras</artifactId>
        <version>3.0.1</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>1.5.8</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-jdk14</artifactId>
        <version>1.5.8</version>
    </dependency>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <compilerArguments>
                    <endorseddirs>${endorsed.dir}</endorseddirs>
                </compilerArguments>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <configuration>
                <failOnMissingWebXml>false</failOnMissingWebXml>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.1</version>
            <executions>
                <execution>
                    <phase>validate</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${endorsed.dir}</outputDirectory>
                        <silent>true</silent>
                        <artifactItems>
                            <artifactItem>
                                <groupId>javax</groupId>
                                <artifactId>javaee-endorsed-api</artifactId>
                                <version>6.0</version>
                                <type>jar</type>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T15:46:06.420

我在这里写了一个可能有用的教程：http: [//www.nabisoft.com/tutorials/struts2/maven-struts-2-enterprise-application-based-on-java-ee-7-and-glassfish-4](http://www.nabisoft.com/tutorials/struts2/maven-struts-2-enterprise-application-based-on-java-ee-7-and-glassfish-4)

它告诉您如何在 Glassfish 4 上使用 Struts 2 与 Tiles 3 和 Maven。您只需下载一个工作示例（maven 项目）并使用您选择的 IDE，即 NetBeans 或 Eclipse。我希望这对其他人有帮助。确保按照教程中的说明配置 JDBC 资源，因为该示例也使用 JPA。我的教程中没有介绍/使用 Spring。

# jquery - jQuery在某个位置手动滚动时如何滚动到？

> ID：14010417
> 
> 赞同：0
> 
> 时间：2012-12-23T11:00:39.787
> 
> 标签：jquery

在两个 y 位置之间手动滚动时如何自动`.scrollTo()`（使用插件）？（`if()`里面声明`.scroll()`）

我在下面的代码看起来很简单。但是，滚动有点颠簸，当它自动滚动到内容时，滚动就卡在那里了。好像它想做两件事。

```
scrollToContent = function() {
    $(document).stop(1, 1).scrollTo($('.content'), 750, { easing: 'easeInOutQuint' });
}

$(window).scroll(function() {
    if ($(this).scrollTop() <= $(this).height()) {
        scrollToContent();
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:43:06.770

这对于评论来说太长了，所以我将其作为答案。`$(window).scroll()`是您要用来检查用户是否正在滚动的方法。如果这与`scrollTo()`插件混淆，请尝试设置标志。例如：

```
var scrolling = false;

scrollToContent = function() {
  scrolling = true;

  // disable user scroll here

  $(document).stop(1, 1).scrollTo($('.content'), 750, { easing: 'easeInOutQuint', onAfter: function() {
    scrolling = false;

    // reenable user scroll here
  }});
}

$(window).scroll(function() {
  if ($(this).scrollTop() <= $(this).height() && !scrolling) {
    scrollToContent();
  }
}); 
```

# android - android emulator /proc/meminfo 没有显示正确的值

> ID：14010419
> 
> 赞同：4
> 
> 时间：2012-12-23T11:01:13.360
> 
> 标签：android, linux, memory-management

我有一个 android 应用程序，它仅在设备具有 512MB 或更多 RAM 时才启用某些功能。此应用程序从 /proc/meminfo（来自 Native C++ 代码）读取 memtotal 以确定设备的 RAM 大小。

我正在尝试将此应用程序安装在运行 Android 4.1 的模拟器中。我已将此模拟器的 RAM 大小设置为 1024 ，但 memtotal 仍然只显示**516312 KB**。我尝试将 RAM 大小增加到 1536（1.5GB），但 meminfo 文件中的 memtotal 值仍然保持不变。我知道一些内存是为内核和一些预定义的位保留的。但是缺少一整 GB 的内存让我一无所知。下面是我的 meminfo 文件。

```
MemTotal:         516312 kB
MemFree:          282584 kB
Buffers:            1056 kB
Cached:           105976 kB
SwapCached:            0 kB
Active:           141696 kB
Inactive:          75880 kB
Active(anon):     122328 kB
Inactive(anon):        0 kB 
Active(file):      19368 kB
Inactive(file):    75880 kB
Unevictable:           0 kB
Mlocked:               0 kB
SwapTotal:             0 kB
SwapFree:              0 kB
Dirty:                 0 kB
Writeback:             0 kB
AnonPages:        110560 kB
Mapped:            57468 kB
Slab:               5080 kB
SReclaimable:       1568 kB
SUnreclaim:         3512 kB
PageTables:         4132 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:      258156 kB
Committed_AS:    1898016 kB
VmallocTotal:     450560 kB
VmallocUsed:       20564 kB
VmallocChunk:     423940 kB 
```

# html - BootStrap - 下拉

> ID：14010422
> 
> 赞同：0
> 
> 时间：2012-12-23T11:01:36.353
> 
> 标签：html, css, twitter-bootstrap

我正在尝试调用引导程序提供的基本下拉功能，我连接了一个 js 函数，设置指向 js 的链接。尝试过非 js 一切都不起作用，这与我所拥有的一样接近，但仍然不行。这是我的清单——

```
 <div class="nav-collapse collapse">
        <ul class="nav">
          <li class="active"><a href="index.html">Home</a></li>
          <li class="dropdown" id="accountmenu">  
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">Tutorials<b class="caret"></b></a>  
                    <ul class="dropdown-menu">  
                        <li><a href="#">PHP</a></li>  
                        <li><a href="#">MySQL</a></li>  
                        <li class="divider"></li>  
                        <li><a href="#">JavaScript</a></li>  
                        <li><a href="#">HTML5</a></li>  
                    </ul>  
                </li>  
          <li><a href="#contact">News</a></li>
          <li><a href="http://MapleEdge.paycraft.co">Shop</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </div><!--/.nav-collapse -->> Blockquote 
```

所以它应该只适用于所有连接的 js，但你不能在这里看到实时站点 - [http://www.epic-pvp.com/](http://www.epic-pvp.com/)

非常感谢我已经尝试了一切！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T11:07:19.187

你应该看过 javascript 错误 - 你显然没有`jquery`在页面上包含库..

Twitter bootstrap 严重依赖 jQuery，他们在[入门页面](http://twitter.github.com/bootstrap/getting-started.html#html-template)上记录了您应该在模板中包含最新版本的 jQuery 以使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T11:15:58.910

您在 HTML 的第 193 行包含 jQuery。

您第一次尝试使用 jQuery 是在 HTML 的第 24 行。

在加载之前您不能使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T12:17:33.697

我做了我的，如下所示。

HTML：

```
<ul class="nav navbar-nav navbar-right">
                    <li id="theme_selector" class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Theme <b class="caret"></b></a>
                        <ul id="theme" class="dropdown-menu" role="menu">
                            <li><a href="#">Amelia</a></li>
                            <li><a href="#">Cerulean</a></li>
                            <li><a href="#">Cyborg</a></li>
                            <li><a href="#">Cosmo</a></li>
                            <li><a href="#">Darkly</a></li>
                            <li><a href="#">Flatly</a></li>
                            <li><a href="#">Lumen</a></li>
                            <li><a href="#">Simplex</a></li>
                            <li><a href="#">Slate</a></li>
                            <li><a href="#">Spacelab</a></li>
                            <li><a href="#">Superhero</a></li>
                            <li><a href="#">United</a></li>
                            <li><a href="#">Yeti</a></li>
                        </ul>
                    </li>
                </ul> 
```

脚本

```
$('#theme li').click(function () {
   switch_style($(this).text());
        }); 
```

效果很好

# iphone - 是否可以在 StoryBoard 的标签中显示最新的推送通知？

> ID：14010425
> 
> 赞同：0
> 
> 时间：2012-12-23T11:02:12.230
> 
> 标签：iphone, ios, uilabel, apple-push-notifications, appdelegate

我喜欢在我的主 StoryBoard 的标签中显示最新的推送通知我使用此代码在我的 AppDelegate.m 中显示警报消息：

```
-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

    NSDictionary *test =(NSDictionary *)[userInfo objectForKey:@"aps"];
    NSString *alertString =(NSString *) [test objectForKey:@"alert"];
    NSLog(@"String recieved: %@",alertString);

    UIApplicationState state = [[UIApplication sharedApplication] applicationState];

    if (state == UIApplicationStateActive) {
        UIAlertView *alertmessage=[[UIAlertView alloc]initWithTitle:@"Geier"
                                                            message:alertString                                                   delegate:self
                                                  cancelButtonTitle:@"OK"
                                                  otherButtonTitles:nil];

        [alertmessage show];

        AudioServicesPlaySystemSound(1002);

    }

} 
```

我在我的 ViewController.m 文件中尝试了这个，`latestpush.text = @"%@",alertString;`但它不起作用。

有人能帮我吗？

谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:31:38.173

您需要使文本可用于视图控制器。

您可以通过从内部发送带有警报消息的自定义 NSNotification 来做到这一点`application:didReceiveRemoteNotification:`

```
[[NSNotificationCenter defaultCenter] 
        postNotificationName:@"PushAlertNotification" 
        object:self
        userInfo:@{@"alertString":alertString}]; 
```

在视图控制器的 viewDidLoad 方法中，注册为观察者：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                        selector:@selector(updateStoryboard:)
                                        name:@"PushAlertNotification"
                                        object:nil]; 
```

`updateStoryboard:`并在视图控制器中创建方法：

```
- (void) updateStoryboard:(NSNotification *) notification {
    self.latestpush.text = notification.userInfo[@"alertString"];
} 
```

* * *

另一种解决方案是在您的 AppDelegate 中创建一个属性，该属性将 ViewController 作为观察者。

AppDelegate.h（将 ViewController 更改为 VC 的实际类型）。

`@property (nonatomic, weak) ViewController *observer;`

在 ViewController 中创建一个接受 NSString 的方法并让该方法更新您的 Storyboard。

视图控制器.m

```
-(void)updateStoryboard(NSString *alertString) {
   self.latestpush.text = alertString;
} 
```

此外，在 ViewContoller 的 viewDidLoad 方法中，向 appDelegate 注册自己：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    delegate.observer = self;
} 
```

在您的方法中调用 updateStoryboard `application:didReceiveRemoteNotification:`：

`[self.observer updateStoryboard:alertString];`

# java - JPA 托管实体与 JavaFX 属性

> ID：14010426
> 
> 赞同：1
> 
> 时间：2012-12-23T11:02:16.020
> 
> 标签：java, jpa, javafx, objectdb

我目前的项目是使用 JavaFX 完成的。我使用属性将（双向）视图字段绑定到 bean（使用 JFXtras 的 BeanPathAdapter）。

我选择使用 JPA 和 ObjectDB 作为模型。

这是我第一次在独立项目中使用 JPA，在这里我面临托管实体的问题。

实际上，我将托管实体绑定到视图字段，当视图字段的值发生更改时，实体会更新......数据库也会更新。

我正在尝试找到一种手动保留/合并实体的方法，以便我可以询问用户是否要保存。

这是我用来获取列表的代码：

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("$objectdb/data/db.odb");
EntityManager em = emf.createEntityManager();

List<XXX> entities = em.createQuery("SELECT x FROM XXX x").getResultList(); 
```

所以当我这样做的时候

```
entity.setName("test"); 
```

实体在数据库中更新。

我正在寻找的是实体不会自动更新。

我试过（就在getResultList之后）

```
em.clear(); 
```

或者

```
em.detach(entity); 
```

但即使使用 CascadeType.DETACH，它也会丢失关系实例。

我也试过

```
em.setFlushMode(FlushModeType.COMMIT); 
```

但它仍然会自动更新...

我还尝试克隆该对象。但是当我想合并它时，它给了我一个例外：

```
Attempt to reuse an existing primary key value 
```

我想到了一个替代解决方案：使用变量作为“缓冲区”，如果用户保存，则用缓冲区填充托管 bean。但是 BeanPathAdapter 失去了意义。与手动填充视图字段和保存后手动填充bean字段相同。

你能帮我找到解决办法吗？

谢谢，

烟

**编辑：** 我回答我自己的问题：p

经过3个小时的研究，我找到了解决方案。

“克隆”解决方案是我引用的每个解决方案中的“最佳”解决方案，但我认为这不是最好的解决方案。

异常的原因是我用来持久化/合并我的实体的代码。我正在使用已经存在的 id 保留一个非托管实体。我还以为合并了。。。

我做了一个通用方法不会再次失败

```
public <T extends IEntity> T persist(T object) {
    em.getTransaction().begin();

    if (object.getId() == null) {
        em.persist(object);
        em.flush();

        em.getTransaction().commit();

        em.refresh(object);
    }
    else {
        object = em.merge(object);

        em.getTransaction().commit();
    }

    return object;
} 
```

所以解决方案：当我必须将实体绑定到视图时，我使用 entity.clone() 以便可以将实体用作非托管实体并在需要时合并。

但是，如果您有适当的解决方案，我很感兴趣:)

再次感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:05:52.910

除上述解决方案外，标准解决方案还有：

*   在模型中使用分离的对象，然后将它们合并到 EntityManager 中。
*   在模型中使用托管对象，保持 EntityManager 打开（没有分离/合并）。

# database-design - 删除数据库表中的外键引用

> ID：14010428
> 
> 赞同：0
> 
> 时间：2012-12-23T11:03:00.530
> 
> 标签：database-design, foreign-keys, relational-database, foreign-key-relationship, database-table

鉴于这个问题：

> 考虑一个`geq`表示“大于或等于”的关系，即 (x,y)E geq 仅当 y < x 时。
> 
> ```
> create table geq
> ( lb integer not null 
> , ub integer not null
> , primary key lb
> , foreign key (ub) references geq on delete cascade ) 
> ```
> 
> 如果删除元组 (x,y)，以下哪项是可能的？
> 
> (a) 删除 z > y
> 的元组 (z,w) (b) 删除 z > x 的元组 (z,w)

这就是我试图解决它的方法：-

由于 ub （上限）是外键，因此在元组 (x,y) 中， y 是外键。鉴于表本身的外键 (y) 引用`geq`，geq 中必须有一个元组 (y, y')。

现在，y >= x 并且 y' >= y。因此，y' >= x。

因此，我没有使用 (z,w)，而是使用了 (y,y')。

那么，答案不应该是，a tuple (z,w) with w>x is deleted 吗？

（我正在尝试解决旧的 GATE 论文）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:30:27.940

如果 (x,y) ∈`geq`当且仅当 x > y。将关系称为“大于或等于”是用词不当，原因我将在下面讨论。

外键是上限 ( `ub`) 是正确的，这意味着*x*是外键，*y*是元组 (x,y) 中的主键。外键声明中的`on delete cascade`选项意味着每当一条记录被删除时，任何引用已删除记录的子记录也将被删除。

对于您的情况，如果您删除元组 (x,y)，任何引用 (x,y) 的记录也将被删除。

因为外键是`ub`，所以记录 (z,w) 是 (x,y) 的子当且仅当：z = y。

因此，对于 (x,y) 的删除会导致 (z,w) 的级联删除，必须满足以下条件：

**x ≥ y = z ≥ w** *（这不太正确，我稍后会解释。）*

因此，您的问题的答案是（a）和（b）都不是真的*。*此外，您的结论（不在列出的选项中）也是不正确的，*w*必须是 ≤ *x*，而不是*w* > *x*。

事实上，由于下限是主键，关系 (a,a) 不可能有子记录，因为这需要违反主键。因此，上限必须严格大于记录的下限才能有任何子记录。这意味着上面的关系陈述更恰当：

**x ≥ y = z > w**因为 y ≠ w

这意味着当删除元组 (x,y) 时，您只能说元组 (z,w) 可能被级联删除，使得*z* = *y*或*z* ≤ *x*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:03:07.080

问题是不可为空的外键，再加上 'y < x' 约束：它需要每一行都有一个数字较小的 id 行。

有两种方法可以为没有父节点的节点创建哨兵值：

*   将链接指针设置为 NULL
*   将其设置为与 id 相同的值。

代码示例：

```
CREATE TABLE geq_one
    ( id INTEGER NOT NULL PRIMARY KEY
    , parent_id INTEGER  NOT NULL REFERENCES geq_one(id) ON DELETE CASCADE
    , CONSTRAINT younger_than_parent_one CHECK (parent_id <= id)
    )
        ;
INSERT INTO geq_one(id,parent_id) VALUES
(1,1) -- sentinel
, (2,1)
, (3,1)
        ;

CREATE TABLE geq_two
    ( id INTEGER NOT NULL PRIMARY KEY
    , parent_id INTEGER  REFERENCES geq_two(id) ON DELETE CASCADE
    , CONSTRAINT younger_than_parent_two CHECK (parent_id < id)
    )
        ;
INSERT INTO geq_two(id,parent_id) VALUES
(1,NULL) -- sentinel
, (2,1)
, (3,1)
        ;

DELETE FROM geq_one WHERE id = 1;
SELECT * FROM geq_one;

DELETE FROM geq_two WHERE id = 1;
SELECT * FROM geq_two; 
```

# database - 如何让我的 Capybara 规范创建数据库记录，使用 Google 登录，然后查看显示的这些记录？

> ID：14010431
> 
> 赞同：1
> 
> 时间：2012-12-23T11:03:33.587
> 
> 标签：database, selenium, port, capybara, poltergeist

**问题**：我需要设置什么才能编写 RSpec/Capybara 测试，这些测试涉及使用 Google 登录并以某种方式与数据库交互（通过应用程序或代码），然后成功地看到这些交互的结果反映在应用程序？

具体来说，我想要一个执行以下操作的规范：

1.  `Projects`在数据库中创建一些
2.  导航到项目索引（这会将我重定向到 Google 进行登录）
3.  通过 Google 登录并允许我的应用访问
4.  断言`Projects`出现在页面上

还有一个是这样的：

1.  导航到项目索引（这会将我重定向到 Google 进行登录）
2.  通过 Google 登录并允许我的应用访问
3.  单击“添加项目”（将我重定向到表单）
4.  填写表格并点击保存（将我重定向到索引）
5.  断言新创建`Project`的出现在页面上

我为此编写的测试不起作用。

**第一次尝试**（使用“标准”RSpec/Capybara/Selenium）

我已经`js: true`设置了适当的块并围绕每个规范`describe`切换连接设置。`WebMock`两个测试的最后一步都失败了。第一个只是没有显示任何项目。我可以`puts Project.count`在断言页面上出现一些项目之前，我会看到一个非零数字，但页面上仍然没有显示任何内容。第二个测试的最后一步导致内部服务器错误。

基于此，似乎存在一些与数据库相关的问题

**第二次尝试**（添加一些数据库配置）

添加`DatabaseCleaner.strategy = :truncation`到`spec_helper`以及插入`RSpec`配置块的以下代码：

```
config.around :each, js: true do |spec|
    config.use_transactional_fixtures = false
    DatabaseCleaner.start
    WebMock.allow_net_connect!

    spec.run

    config.use_transactional_fixtures = true
    DatabaseCleaner.clean
    WebMock.disable_net_connect! :allow => %r{/((__.+__)|(hub/session.*))$}
end 
```

与第一次尝试的结果相同。

**第三次尝试**（使用 Poltergeist 而不是 Selenium）

我安装`phantomjs`、添加`poltergeist`到我的 Gemfile 并捆绑。在`spec_helper`我需要`capybara/poltergeist`并设置`Capybara.javascript_driver = :poltergeist`. 这似乎使事情变得更糟，因为我无法再通过允许访问的步骤，因为单击该按钮似乎什么也没做（或者驱动程序根本没有单击该按钮）。

**附加信息** 为了让我的测试开始工作，我必须做的第一件事是修复 Capybara 服务器上的端口，因为 Google API 需要预先注册的回调 URL。这很容易通过设置来`Capybara.server_port = <some_number>`完成`spec_helper.rb`。

我的控制器规格通过就好了，当我在现实生活中使用该应用程序时，它运行良好。这是第一个测试的代码（稍作修改的版本）：

```
require 'spec_helper'

describe 'Projects', js: true do
    it 'shows a list of projects' do
        Project.create!(name: "foo")
        visit projects_path
        fill_in "Email", with: "validemail@gmail.com"
        fill_in "Password", with: "password"
        click_on "Sign in"
        sleep 1.5 and click_on "Allow access" if page.has_content? "Allow access"
        page.should have_content("foo")
     end
end 
```

# encryption - vi 加密：使用了什么算法？

> ID：14010434
> 
> 赞同：2
> 
> 时间：2012-12-23T11:03:49.957
> 
> 标签：encryption, vi

我多年来一直使用加密文件来存储我的密码。它已使用`vi -x`Sun Solaris 10 上的命令加密。我现在尝试在 linux 机器上同时使用`vi -x`和`vi -x -cm=blowfish`. 可悲的是，该文件完全搞砸了。我的猜测是在 Solaris 上使用了不同的加密算法。如何找出使用了哪种算法以及如何使用更新版本的 vi 打开文件？

我确实知道正确的密码，并且知道加密文件中的几个单词。

PS：我再也无法使用 solaris 10 机器了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:43:51.697

我认为 vi 使用 crypt 功能。这是一个很长的镜头，但如果您可以访问 mcrypt，这应该可以解码 solaris crypt：

```
mcrypt  -a des --keymode pkdes --bare --noiv --decrypt filename 
```

旧的 unix 风格的地穴

```
mcrypt  -a  enigma  --keymode  scrypt --bare --decrypt filename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-24T20:11:44.060

*Solaris 10 上的/usr/bin/vi*（也从 /usr/ucb/vi 链接）、*/usr/xpg4/bin/vi*和*/usr/xpg6/bin/vi*（以及所有早期版本上的那些） Solaris) 都使用 crypt(1)（Enigma 变体）加密。

在 Solaris 11 及更高版本上，*vi*实际上是*vim*，并使用该版本的 vim 支持的任何加密，这与 crypt(1) 不兼容。

“旧”vi 可能仍作为 /usr/sunos/bin/vi 在 Solaris 11 上存在，但不再具有 -x 选项。

crypt(1) 也不再在 Solaris 11 上。

但是人们可以轻松地搜索源代码（google for usr/src/cmd/crypt/crypt.c）并修复任何可以编译的版本。

正如之前的海报所指出的，mcrypt 也可以完成这项工作。

后者可通过（至少）MacPorts 用于 Mac（“port install mcrypt”，尽管运行 mcrypt 的简单测试对我不起作用），对于 CentOS，通过“yum install mcrypt”，对于 Ubuntu，通过“apt install mcrypt” "; cygwin 也有一个 mcrypt 包。

对于任何其他操作系统或发行版，您只能靠自己；我没有一切。

# php - 传递 example.com 时，parse_url() 返回错误

> ID：14010436
> 
> 赞同：3
> 
> 时间：2012-12-23T11:04:01.003
> 
> 标签：php, parsing, parse-url

根据以下代码 if `$host_name`is something like `example.com`PHP 返回一个 notice:`Message: Undefined index: host`但在完整的 URL 上，如`http://example.com`PHP 返回`example.com`。我尝试了带有 FALSE 和 NULL 的 if 语句，但没有奏效。

```
$host_name = $this->input->post('host_name');
$parse = parse_url($host_name);
$parse_url = $parse['host']; 
```

如何修改脚本以接受 example.com 并返回它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T11:10:07.730

1.  升级你的 php。 `5.4.7 Fixed host recognition when scheme is ommitted and a leading component separator is present.`

2.  手动添加方案：`if(mb_substr($host_name, 0, 4) !== 'http') $host_name = 'http://' . $host_name;`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T11:21:22.530

您可以使用检查该方案是否存在[`filter_var`](http://php.net/manual/en/function.filter-var.php)，如果不存在则添加一个

```
$host_name = 'example.com';
if (!filter_var($host_name, FILTER_VALIDATE_URL, FILTER_FLAG_SCHEME_REQUIRED)) {
    $host_name = 'http://' . $host_name;
}
$parse = parse_url($host_name);

var_dump($parse);

array(2) {
  ["scheme"]=>
  string(4) "http"
  ["host"]=>
  string(11) "example.com"
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-23T11:10:14.363

在这种情况下只需添加一个默认方案：

```
if (strpos($host_name, '://') === false) {
    $host_name = 'http://' . $host_name;
}
$parse = parse_url($host_name); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-17T09:54:12.267

这是一个示例函数，它返回真实主机，而不管方案如何..

```
function gettheRealHost($Address) { 
   $parseUrl = parse_url(trim($Address)); 
   return trim($parseUrl[host] ? $parseUrl[host] : array_shift(explode('/', $parseUrl[path], 2))); 
} 

gettheRealHost("example.com"); // Gives example.com 
gettheRealHost("http://example.com"); // Gives example.com 
gettheRealHost("www.example.com"); // Gives www.example.com 
gettheRealHost("http://example.com/xyz"); // Gives example.com 
```

# javascript - 计算单词和字符

> ID：14010446
> 
> 赞同：9
> 
> 时间：2012-12-23T11:05:39.437
> 
> 标签：javascript, jquery, html

我一直在寻找使用 jQuery 向 textarea 添加单词和字符计数，尽管我发现的只是限制字符和单词的插件。

我想实时更新，这样每次用户添加一个字符或一个单词时，计数器都会更新。

有没有一种简单的方法来检查单词和字符？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-23T11:14:07.870

```
function wordCount(val) {
  var wom = val.match(/\S+/g);
  return {
    charactersNoSpaces: val.replace(/\s+/g, '').length,
    characters: val.length,
    words: wom ? wom.length : 0,
    lines: val.split(/\r*\n/).length
  };
}

var textarea = document.getElementById('text');
var result = document.getElementById('result');

textarea.addEventListener('input', function() {
  var wc = wordCount(this.value);
  result.innerHTML = (`
   <br>Characters (no spaces):  ${wc.charactersNoSpaces}
   <br>Characters (and spaces): ${wc.characters}
   <br>Words: ${wc.words}
   <br>Lines: ${wc.lines}
  `);
});
```

```
<textarea id="text" cols="30" rows="4"></textarea>
<div id="result"></div>
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-23T11:11:56.677

```
char_count = $("#myTextArea").val().length;
word_count = $("#myTextArea").val().split(" ").length; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T11:17:00.130

```
var txt = $('.content')[0].text()
  , charCount = txt.length
  , wordCount = txt.replace( /[^\w ]/g, "" ).split( /\s+/ ).length
  ;
$( '#somwhereInYourDocument' ).text( "The text had " + charCount + " characters and " + wordCount +" words" ); 
```

[阅读更多](https://stackoverflow.com/questions/9864644/jquery-character-and-word-count)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-23T11:09:49.673

没有 jQuery：

```
this.innerHTML gives you the textarea content.  
this.innerHTML.length gives you the number of characters. 
```

使用 jQuery：

```
$(this).html() 
```

等等

我相信你可以想出一个简单的字数统计算法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-23T11:13:04.990

```
jQuery(document).ready(function(){
    var count = jQuery("#textboxid").text().length;
}); 
```

# linux - 如何在 Linux 中通过控制台输出启动 Tomcat？

> ID：14010448
> 
> 赞同：44
> 
> 时间：2012-12-23T11:05:52.977
> 
> 标签：linux, tomcat, ubuntu, tomcat7

我知道可以启动 tomcat 然后运行`tail -f catalina.out`以查看 Tomcat 输出。但是如何一次运行tomcat并查看输出呢？有一些选项可以运行`startup.sh`吗？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-12-23T12:21:53.313

您正在寻找

```
tomcat/bin/catalina.sh run 
```

代替

```
tomcat/bin/startup.sh; tail -f tomcat/logs/catalina.out 
```

Tomcat 以这种方式保持在前台（第一个选项）。如果你想关闭它，你的控制台窗口中的 Ctrl-C 就可以了。

如果您选择第二个选项，tomcat 将在后台运行，而 tail 将在前台运行，但您必须两次提供相同的目录路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T11:11:32.707

不要使用服务，而是`cd`在 Tomcat 的 bin 目录中输入`./startup.sh`. 这将在控制台中启动 Tomcat。

所有到 catalina.out 的日志，你都可以通过这个链接修改它：[Tomcat logging](http://wiki.apache.org/tomcat/FAQ/Logging#Q6)

# objective-c - 为 Cocoa 中的进程添加观察者

> ID：14010450
> 
> 赞同：4
> 
> 时间：2012-12-23T11:06:23.047
> 
> 标签：objective-c, macos, cocoa, itunes, observer-pattern

我正在为 iTunes 开发一种插件。

很多用户都要求，如果他们启动 iTunes，他们想启动插件，这当然是有道理的。但是，我不确定如何执行此操作。

我想到了一个帮助应用程序，这可能是唯一的方法。唯一困扰我的是如何获得通知。当然，我可以一直检查 iTunes 是否正在运行，但我不确定这是否是正确的方法。

我宁愿将我的应用程序添加为该过程的观察者。那可能吗？

如果没有，**活动监视器**是如何做到的？

* * *

# 解决方案

感谢 Daij-Djan！我让它像这样工作：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [[[NSWorkspace sharedWorkspace] notificationCenter] addObserver:self
                                                           selector:@selector(iTunesLaunched:)
                                                               name:NSWorkspaceDidLaunchApplicationNotification
                                                             object:nil];

    [[[NSWorkspace sharedWorkspace] notificationCenter] addObserver:self
                                                           selector:@selector(iTunesTerminated:)
                                                               name:NSWorkspaceDidTerminateApplicationNotification
                                                             object:nil];
}

-(void) iTunesLaunched:(NSNotification *)notification {
    NSRunningApplication *runApp = [[notification userInfo] valueForKey:@"NSWorkspaceApplicationKey"];
    if ([runApp.bundleIdentifier isEqualToString:@"com.apple.iTunes"])
        NSLog(@"start");

}

-(void) iTunesTerminated:(NSNotification *)notification {
    NSRunningApplication *runApp = [[notification userInfo] valueForKey:@"NSWorkspaceApplicationKey"];
    if ([runApp.bundleIdentifier isEqualToString:@"com.apple.iTunes"])
        NSLog(@"terminate");

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T11:22:08.893

register for NSWorkspace notifications:
`NSWorkspaceDidLaunchApplicationNotification`
`NSWorkspaceDidTerminateApplicationNotification`

see [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html)

* * *

there is also the possibility to KVO the runningApplications property
btw cocoatech has a nice NTRunningAppManager class that does just that

# c# - 如何在 C# 中填写 DTO

> ID：14010451
> 
> 赞同：3
> 
> 时间：2012-12-23T11:06:24.967
> 
> 标签：c#, database, foreach, dto

我无法阅读我的 DTO 列表。

我希望从数据库中接收 DTO 列表，以便将它们放在 WPF 部分的表中，但是当我运行程序时，列表中没有数据，也没有错误。我不明白为什么，我的代码有问题吗？

```
 public IList<ProductDTO> GetProducts()
{
       IList<ProductDTO>listofproducts = new List<ProductDTO>();
       ProductDTO productDto = new ProductDTO();

    using (var db = new NORTHWNDEntities())
    {
        var query = from p in db.Products

                    select new
                    {
                        Name = p.ProductName,     
                    };

        foreach (var product in query)
        {
            productDto.Name = product.Name;
            listofproducts.Add(productDto);
        }

        return listofproducts;
    }     
} 
```

更新后的版本：

我收到一个名为 entityexception 的错误，代码末尾的用户代码未处理（tolist）

```
 public IEnumerable<ProductDTO> GetProducts()
        {
            using (var db = new NORTHWNDEntities())
            {
                return db.Products.Select(m => new ProductDTO { Name = m.ProductName }).ToList();
            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T11:16:06.783

您正在向列表添加相同的引用。你可以像这样修复它：

```
public IList<ProductDTO> GetProducts()
{
    IList<ProductDTO>listofproducts = new List<ProductDTO>();
    using (var db = new NORTHWNDEntities())
    {
        var query = from p in db.Products
                    select new
                    {
                        Name = p.ProductName,     
                    };
        foreach (var product in query)
        {
            listofproducts.Add(new ProductDTO {Name = product.Name});
        }
        return listofproducts;
    }     
} 
```

或者

```
 public IList<ProductDTO> GetProducts()
    {
        using (var db = new NORTHWNDEntities())
        {
            return db.Products.Select(m=>new ProductDTO{Name = m.ProductName}).ToList();
        }     
    } 
```

# php - 具体5如何以编程方式在页面默认值上断开块与其主块的连接

> ID：14010457
> 
> 赞同：1
> 
> 时间：2012-12-23T11:07:02.703
> 
> 标签：php, block, concrete5

我正在用它自己的控制器构建一个新的单页作曲家，为某些特定用户编辑我的一些专门页面。这些页面已经通过页面类型默认设置了一些默认块。

我想要的只是通过我的新单页编辑表单来编辑内容块的内容。该内容块已在页面类型默认值上预定义。它作为主区域的第一个块放置。

为此，我在我的控制器上做了一个这样的功能

```
/* $p = the page object that I want to edit */
private function saveData($p){
        // get all blocks fromt the Main area
    $blocks = $p->getBlocks('Main');

        // setup $data with a POST variable 'contentBody'
    $data = array('content' => $this->post('contentBody'));

        // instantiate block with Content Block type
    $bt = BlockType::getByHandle('content');

        // try to iterate all the blocks obtained and update only the first block  
        foreach( $blocks as $b){
        $b->update($data);
                break;
    }
} 
```

我认为这个简单的功能应该足以让它像我想要的那样工作。但显然不是。该`$b->update($data)`功能似乎正在更新其页面类型默认值的主块，而不仅仅是我正在编辑的这个特定页面上的这个特定块。所以它会更新我所有包含默认内容块的页面。

那么我怎样才能真正断开该块与它的主默认值。这样我就可以只为这个特定的页面编辑它。内置的concrete5块编辑功能能够断开块。但是我在任何地方都找不到有关如何断开该块的任何线索或文档。我也不知道要挖掘哪些具体的核心文件来找出如何断开它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T07:16:00.890

你是对的。在编辑块之前（使用 c5 编辑界面——而不是 API），块实际上是对页面类型默认块的引用。此代码应该适合您：

```
$blocks = $page->getBlocks('Main');
foreach ($blocks as $block) {
    if ($block->getBlockTypeHandle() == 'content') {
        $newblock = $block->duplicate($page);
        $block->delete();

        $newblock->update($data);
        break;
    }
} 
```

# scala - 不允许混合特定特征

> ID：14010461
> 
> 赞同：7
> 
> 时间：2012-12-23T11:07:44.193
> 
> 标签：scala, type-systems

鉴于：

```
trait Foo
trait Bar { this: Foo => }
trait NoBar { this: Foo => } 
```

有没有办法可以欺骗类型系统来禁止：

```
new Foo with Bar with NoBar {} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-23T11:48:14.753

类型擦除再次节省了时间：

```
trait Foo
trait Dummy[A]
trait Bar extends Dummy[Bar]{ this: Foo => }
trait NoBar extends Dummy[NoBar]{ this: Foo => }
new Foo with Bar with NoBar {} 
```

这会导致以下错误：

```
illegal inheritance; anonymous class $anon inherits different
type instances of trait Dummy: Dummy[Bar] and Dummy[NoBar] 
```

# optimization - Argv 函数与 LuaJIT FFI 的 vararg

> ID：14010469
> 
> 赞同：0
> 
> 时间：2012-12-23T11:08:50.567
> 
> 标签：optimization, lua, ffi, luajit

有没有比这更有效的方法来处理 argv 函数？

```
ffi.cdef [[ 
  void fooArgv(int argc, const char ** argv, const size_t * argvlen); 
]]

local foo = function(...)
  local nargs = select("#", ...)
  local argv = { }
  local argvlen = { }

  for i = 1, nargs do
    local v = tostring( (select(i, ...)) )
    argv[i] = v
    argvlen[i] = #v
  end

  return ffi.C.fooArgv(
      nargs,
      ffi.new("const char * [" .. nargs .. "]", argv),
      ffi.new("const size_t [" .. nargs .. "]", argvlen)
    )
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T18:50:12.730

如果`foo`被调用了很多次，你可以很容易地优化函数的底部。使用字符串参数调用`ffi.new`会强制 LuaJIT 每次都运行它的 C 解析器，这是次优的。该函数`ffi.typeof`可以为给定类型创建一个*构造函数*，然后使用该构造函数代替`ffi.new`.

另外，我认为`select`在循环中使用该函数比创建数组并从中索引要慢。我不确定。

所以这是我建议的版本：

```
ffi.cdef [[ 
  void fooArgv(int argc, const char ** argv, const size_t * argvlen); 
]]

local argv_type = ffi.typeof("const char* [?]")
local argvlen_type = ffi.typeof("const size_t [?]")

local foo = function(...)
  local nargs = select("#", ...)
  local argv = { ... }
  local argvlen = { }

  for i = 1, nargs do
    local v = tostring( argv[i] )
    argv[i] = v
    argvlen[i] = #v
  end

  return ffi.C.fooArgv(
      nargs,
      argv_type(nargs, argv),
      argvlen_type(nargs, argvlen)
    )
end 
```

# c# - 具有不同类的通用列表 XML 序列化

> ID：14010472
> 
> 赞同：9
> 
> 时间：2012-12-23T11:09:12.817
> 
> 标签：c#, generics, xml-serialization, microsoft-metro, .net-4.5

我有以下代码：

**基本内容.cs**

```
public class BaseContent
{
   // Some auto properties
} 
```

**新闻.cs**

```
public class News : BaseContent
{
   // Some more auto properties
} 
```

**事件.cs**

```
public class Event : BaseContent
{
   // Some more auto properites
} 
```

**通用响应.cs**

```
public class GenericResponse<T> 
{
  [XmlArray("Content")]
  [XmlArrayItem("NewsObject", typeof(News)]
  [XmlArrayItem("EventObject", typeof(Event)]
  public List<T> ContentItems { get; set; }
} 
```

**新闻响应.cs**

```
public class NewsResponse : GenericResponse<News> {} 
```

**事件响应.cs**

```
public class EventResponse : GenericResponse<Event> {} 
```

如您所见，我有一个基类**BaseContent**和两个派生自它的类。接下来我有一个通用响应类，因为 xml 文件的结构始终相同，但它们在某些属性上有所不同。

我想我可以指定`[XmlArrayItem]`用于特定类的名称。但现在我得到了错误：

> System.InvalidOperationException：无法生成临时类（结果 = 1）。错误 CS0012：类型“System.Object”在未引用的程序集中定义。您必须添加对程序集“System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a”的引用。

我无法添加此参考，因为我正在使用 Windows 8 应用程序。

如果我注释掉其中一个，`[XmlArrayItem]`它运行良好。

有人有解决这个问题的想法吗？

**更新** 我**不能**使用 DataContractSerializer，因为我**必须**使用 XmlAttributes

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-30T23:33:37.053

编辑：随意下载[演示项目](https://docs.google.com/open?id=0B411XiA1vaSzMmgyNnA0SjFYVWM)

您没有提供对象的所有属性，所以请允许我添加一些 - 仅作为示例：

```
public class BaseContent
{
    [XmlAttribute("Name")]
    public string Name { get; set; }
}

[XmlType(TypeName = "EventObject")]
public class Event : BaseContent
{
    [XmlAttribute("EventId")]
    public int EventId { get; set; }
}

[XmlType(TypeName = "NewsObject")]
public class News : BaseContent
{
    [XmlAttribute("NewsId")]
    public int NewsId { get; set; }
} 
```

GenericResponse.cs 可以这样定义——不需要为数组项指定 typeof：

```
public class GenericResponse<T>
{
    [XmlArray("Content")]
    public List<T> ContentItems { get; set; }

    public GenericResponse()
    {
        this.ContentItems = new List<T>();
    }
} 
```

然后你有响应类：

```
public class EventResponse : GenericResponse<Event>
{
}

public class NewsResponse : GenericResponse<News>
{
} 
```

# 示例 1：序列化 EventResponse 对象

```
var response = new EventResponse
{
    ContentItems = new List<Event> 
    {
        new Event {
            EventId = 1,
            Name = "Event 1"
        },

        new Event {
            EventId = 2,
            Name = "Event 2"
        }
    }
};

string xml = XmlSerializer<EventResponse>.Serialize(response); 
```

输出 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<EventResponse xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <Content>
        <EventObject Name="Event 1" EventId="1" />
        <EventObject Name="Event 2" EventId="2" />
    </Content>
</EventResponse> 
```

如果您尝试对 NewsResponse 进行相同的操作，它将正常工作。顺便说一句，我正在使用我的[通用 XmlSerializer](http://www.codeproject.com/Articles/233908/Xml-serialization-using-generics)，单击链接以了解更多信息。

XmlSerializer.cs：

```
/// <summary>
/// XML serializer helper class. Serializes and deserializes objects from/to XML
/// </summary>
/// <typeparam name="T">The type of the object to serialize/deserialize.
/// Must have a parameterless constructor and implement <see cref="Serializable"/></typeparam>
public class XmlSerializer<T> where T: class, new()
{
    /// <summary>
    /// Deserializes a XML string into an object
    /// Default encoding: <c>UTF8</c>
    /// </summary>
    /// <param name="xml">The XML string to deserialize</param>
    /// <returns>An object of type <c>T</c></returns>
    public static T Deserialize(string xml)
    {
        return Deserialize(xml, Encoding.UTF8, null);
    }

    /// <summary>
    /// Deserializes a XML string into an object
    /// Default encoding: <c>UTF8</c>
    /// </summary>
    /// <param name="xml">The XML string to deserialize</param>
    /// <param name="encoding">The encoding</param>
    /// <returns>An object of type <c>T</c></returns>
    public static T Deserialize(string xml, Encoding encoding)
    {
        return Deserialize(xml, encoding, null);
    }

    /// <summary>
    /// Deserializes a XML string into an object
    /// </summary>
    /// <param name="xml">The XML string to deserialize</param>
    /// <param name="settings">XML serialization settings. <see cref="System.Xml.XmlReaderSettings"/></param>
    /// <returns>An object of type <c>T</c></returns>
    public static T Deserialize(string xml, XmlReaderSettings settings)
    {
        return Deserialize(xml, Encoding.UTF8, settings);
    }

    /// <summary>
    /// Deserializes a XML string into an object
    /// </summary>
    /// <param name="xml">The XML string to deserialize</param>
    /// <param name="encoding">The encoding</param>
    /// <param name="settings">XML serialization settings. <see cref="System.Xml.XmlReaderSettings"/></param>
    /// <returns>An object of type <c>T</c></returns>
    public static T Deserialize(string xml, Encoding encoding, XmlReaderSettings settings)
    {
        if (string.IsNullOrEmpty(xml))
            throw new ArgumentException("XML cannot be null or empty", "xml");

        XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));

        using (MemoryStream memoryStream = new MemoryStream(encoding.GetBytes(xml)))
        {
            using (XmlReader xmlReader = XmlReader.Create(memoryStream, settings))
            {
                return (T) xmlSerializer.Deserialize(xmlReader);
            }
        }
    }

    /// <summary>
    /// Deserializes a XML file.
    /// </summary>
    /// <param name="filename">The filename of the XML file to deserialize</param>
    /// <returns>An object of type <c>T</c></returns>
    public static T DeserializeFromFile(string filename)
    {
        return DeserializeFromFile(filename, new XmlReaderSettings());
    }

    /// <summary>
    /// Deserializes a XML file.
    /// </summary>
    /// <param name="filename">The filename of the XML file to deserialize</param>
    /// <param name="settings">XML serialization settings. <see cref="System.Xml.XmlReaderSettings"/></param>
    /// <returns>An object of type <c>T</c></returns>
    public static T DeserializeFromFile(string filename, XmlReaderSettings settings)
    {
        if (string.IsNullOrEmpty(filename))
            throw new ArgumentException("filename", "XML filename cannot be null or empty");

        if (! File.Exists(filename))
            throw new FileNotFoundException("Cannot find XML file to deserialize", filename);

        // Create the stream writer with the specified encoding
        using (XmlReader reader = XmlReader.Create(filename, settings))
        {
            System.Xml.Serialization.XmlSerializer xmlSerializer = new System.Xml.Serialization.XmlSerializer(typeof(T));
            return (T) xmlSerializer.Deserialize(reader);
        }
    }

    /// <summary>
    /// Serialize an object
    /// </summary>
    /// <param name="source">The object to serialize</param>
    /// <returns>A XML string that represents the object to be serialized</returns>
    public static string Serialize(T source)
    {
        // indented XML by default
        return Serialize(source, null, GetIndentedSettings());
    }

    /// <summary>
    /// Serialize an object
    /// </summary>
    /// <param name="source">The object to serialize</param>
    /// <param name="namespaces">Namespaces to include in serialization</param>
    /// <returns>A XML string that represents the object to be serialized</returns>
    public static string Serialize(T source, XmlSerializerNamespaces namespaces)
    {
        // indented XML by default
        return Serialize(source, namespaces, GetIndentedSettings());
    }

    /// <summary>
    /// Serialize an object
    /// </summary>
    /// <param name="source">The object to serialize</param>
    /// <param name="settings">XML serialization settings. <see cref="System.Xml.XmlWriterSettings"/></param>
    /// <returns>A XML string that represents the object to be serialized</returns>
    public static string Serialize(T source, XmlWriterSettings settings)
    {
        return Serialize(source, null, settings);
    }

    /// <summary>
    /// Serialize an object
    /// </summary>
    /// <param name="source">The object to serialize</param>
    /// <param name="namespaces">Namespaces to include in serialization</param>
    /// <param name="settings">XML serialization settings. <see cref="System.Xml.XmlWriterSettings"/></param>
    /// <returns>A XML string that represents the object to be serialized</returns>
    public static string Serialize(T source, XmlSerializerNamespaces namespaces, XmlWriterSettings settings)
    {
        if (source == null)
            throw new ArgumentNullException("source", "Object to serialize cannot be null");

        string xml = null;
        XmlSerializer serializer = new XmlSerializer(source.GetType());

        using (MemoryStream memoryStream = new MemoryStream())
        {
            using (XmlWriter xmlWriter = XmlWriter.Create(memoryStream, settings))
            {
                System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(typeof(T));
                x.Serialize(xmlWriter, source, namespaces);

                memoryStream.Position = 0; // rewind the stream before reading back.
                using (StreamReader sr = new StreamReader(memoryStream))
                {
                    xml = sr.ReadToEnd();
                } 
            }
        }

        return xml;
    }

    /// <summary>
    /// Serialize an object to a XML file
    /// </summary>
    /// <param name="source">The object to serialize</param>
    /// <param name="filename">The file to generate</param>
    public static void SerializeToFile(T source, string filename)
    {
        // indented XML by default
        SerializeToFile(source, filename, null, GetIndentedSettings());
    }

    /// <summary>
    /// Serialize an object to a XML file
    /// </summary>
    /// <param name="source">The object to serialize</param>
    /// <param name="filename">The file to generate</param>
    /// <param name="namespaces">Namespaces to include in serialization</param>
    public static void SerializeToFile(T source, string filename, XmlSerializerNamespaces namespaces)
    {
        // indented XML by default
        SerializeToFile(source, filename, namespaces, GetIndentedSettings());
    }

    /// <summary>
    /// Serialize an object to a XML file
    /// </summary>
    /// <param name="source">The object to serialize</param>
    /// <param name="filename">The file to generate</param>
    /// <param name="settings">XML serialization settings. <see cref="System.Xml.XmlWriterSettings"/></param>
    public static void SerializeToFile(T source, string filename, XmlWriterSettings settings)
    {
         SerializeToFile(source, filename, null, settings);
    }

    /// <summary>
    /// Serialize an object to a XML file
    /// </summary>
    /// <param name="source">The object to serialize</param>
    /// <param name="filename">The file to generate</param>
    /// <param name="namespaces">Namespaces to include in serialization</param>
    /// <param name="settings">XML serialization settings. <see cref="System.Xml.XmlWriterSettings"/></param>
    public static void SerializeToFile(T source, string filename, XmlSerializerNamespaces namespaces, XmlWriterSettings settings)
    {
        if (source == null)
            throw new ArgumentNullException("source", "Object to serialize cannot be null");

        XmlSerializer serializer = new XmlSerializer(source.GetType());

        using (XmlWriter xmlWriter = XmlWriter.Create(filename, settings))
        {
            System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(typeof(T));
            x.Serialize(xmlWriter, source, namespaces);
        }
    }

    #region Private methods

    private static XmlWriterSettings GetIndentedSettings()
    {
        XmlWriterSettings xmlWriterSettings = new XmlWriterSettings();
        xmlWriterSettings.Indent = true;
        xmlWriterSettings.IndentChars = "\t";

        return xmlWriterSettings;
    }

    #endregion
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T08:44:27.823

我找到了我的解决方案。不是最好的，但它正在工作。

我实现了 IXmlSerializable 并自己处理了这些东西：

```
public void ReadXml(System.Xml.XmlReader reader)
{
    reader.Read();
    reader.MoveToContent();

    if (reader.LocalName == "AnotherNode")
    {
        var innerXml = Serializer<AnotherClass>.CreateSerializer();
        Remove = (AnotherClass) innerXml.Deserialize(reader);
        reader.MoveToContent();
    }

    reader.Read();

    // Here is the trick
    if (reader.IsStartElement())
    {
        do
        {
            var innerXml = Serializer<T>.CreateSerializer();

            var obj = (T) innerXml.Deserialize(reader);
            Updates.Add(obj);
        } while (reader.MoveToContent() == XmlNodeType.Element);
    }
}

public void WriteXml(System.Xml.XmlWriter writer)
{
    var removeSerializer = Serializer<RemoveElement>.CreateSerializer();
    removeSerializer.Serialize(writer, Remove);

    if (Updates.Any())
    {
        var innerXml = Serializer<T>.CreateSerializer();
        writer.WriteStartElement("ContentUpdates");
        foreach (var update in Updates)
        {
            innerXml.Serialize(writer, update);
        }
        writer.WriteEndElement();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T11:25:39.677

考虑使用 DataContractSerializer 而不是 XmlSerializer。

XmlSerializer 在运行时生成一个临时程序集，以加快序列化 - 稍后的反序列化过程。因此它需要代码编译。

另一方面，DataContractSerializer 没有。如果您使用 DataContractSerializer 方法，则必须使用适当的属性，以便控制“继承”问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T08:11:33.360

这*听起来*像是专门针对 Windows Store 平台的代码发射器中的一个错误`XmlSerializer`，但它有点没有实际意义，因为它在常规 .NET 上仍然失败，但有不同的消息：

> 无法生成临时类（结果=1）。
> 
> 错误 CS0030：无法将类型“新闻”转换为“事件”
> 
> 错误 CS1502：“System.Collections.Generic.List.Add(News)”的最佳重载方法匹配有一些无效参数
> 
> 错误 CS1503：参数 1：无法从“事件”转换为“新闻”

所以基本上，它看起来像是一个不受支持的场景，在两种场景中表现不同。从根本上说，问题在于您的注释在说（for `T`= `News`）“如果这`News`是 a `News`，则调用元素'NewsObject'；如果这`News`是 an `Event`，则调用元素'EventObject'”-这很奇怪，因为 a从来**都不**`News`是， ETC。**`Event`**

 **然而，好消息是你想做的事情可以通过使用来完成`[XmlType(...)]`：

```
[XmlType("NewsObject")]
public class News : BaseContent
{
    // Some more auto properties
    public int B { get; set; }
}
[XmlType("EventObject")]
public class Event : BaseContent
{
    // Some more auto properites
    public int C { get; set; }
}
...
public class GenericResponse<T>
{
    [XmlArray("Content")]
    public List<T> ContentItems { get; set; }
} 
```

注意：`[XmlArrayItem(...)]`以上没有。

然后输出（在格式化、清理等之后）：

```
<NewsResponse>
    <Content>
        <NewsObject><A>1</A><B>2</B></NewsObject>
    </Content>
</NewsResponse> 
```

通过测试代码：

```
var obj = new NewsResponse { ContentItems = new List<News> {
    new News { A = 1, B = 2 } } };

var sw = new StringWriter();
using (var xw = System.Xml.XmlWriter.Create(sw))
{
    var ser = new XmlSerializer(obj.GetType());
    ser.Serialize(xw, obj);
}
string xml = sw.ToString(); 
```

如果您需要更多的控制权，那么`XmlAttributeOverrides`就是要考虑的事情；但是您**必须**缓存用 , 来创建的序列化`XmlAttributeOverrides`程序，以避免程序集出血和内存泄漏。**

# c++ - 使用 Boost 解析 XML 属性

> ID：14010473
> 
> 赞同：18
> 
> 时间：2012-12-23T11:09:20.387
> 
> 标签：c++, xml, boost, boost-propertytree

我想与您分享一个我在尝试使用 Boost 库（版本 1.52.0）处理 C++ 中 XML 元素的某些属性时遇到的问题。给定以下代码：

```
#define ATTR_SET ".<xmlattr>"
#define XML_PATH1 "./pets.xml"

#include <iostream>
#include <string>
#include <boost/foreach.hpp>
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/xml_parser.hpp>

using namespace std;
using namespace boost;
using namespace boost::property_tree;

const ptree& empty_ptree(){
    static ptree t;
    return t;
}

int main() {
    ptree tree;
    read_xml(XML_PATH1, tree);
    const ptree & formats = tree.get_child("pets", empty_ptree());
    BOOST_FOREACH(const ptree::value_type & f, formats){
        string at = f.first + ATTR_SET;
        const ptree & attributes = formats.get_child(at, empty_ptree());
        cout << "Extracting attributes from " << at << ":" << endl;
        BOOST_FOREACH(const ptree::value_type &v, attributes){
            cout << "First: " << v.first.data() << " Second: " << v.second.data() << endl;
        }
    }
} 
```

假设我有以下 XML 结构：

```
<?xml version="1.0" encoding="utf-8"?>
<pets>
    <cat name="Garfield" weight="4Kg">
        <somestuff/>
    </cat>
    <dog name="Milu" weight="7Kg">
        <somestuff/>
    </dog>
    <bird name="Tweety" weight="0.1Kg">
        <somestuff/>
    </bird>
</pets> 
```

因此，我将得到的控制台输出将是下一个：

```
Extracting attributes from cat.<xmlattr>:
First: name Second: Garfield
First: weight Second: 4Kg
Extracting attributes from dog.<xmlattr>:
First: name Second: Milu
First: weight Second: 7Kg
Extracting attributes from bird.<xmlattr>:
First: name Second: Tweety
First: weight Second: 0.1Kg 
```

但是，如果我决定为从根节点放下的每个元素使用一个通用结构（以便从它们的特定属性中识别它们），结果将完全改变。在这种情况下，这可能是 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<pets>
    <pet type="cat" name="Garfield" weight="4Kg">
        <somestuff/>
    </pet>
    <pet type="dog" name="Milu" weight="7Kg">
        <somestuff/>
    </pet>
    <pet type="bird" name="Tweety" weight="0.1Kg">
        <somestuff/>
    </pet>
</pets> 
```

输出如下：

```
Extracting attributes from pet.<xmlattr>:
First: type Second: cat
First: name Second: Garfield
First: weight Second: 4Kg
Extracting attributes from pet.<xmlattr>:
First: type Second: cat
First: name Second: Garfield
First: weight Second: 4Kg
Extracting attributes from pet.<xmlattr>:
First: type Second: cat
First: name Second: Garfield
First: weight Second: 4Kg 
```

由于已经打印了三组属性，因此似乎可以正确识别挂在根节点上的元素数量。尽管如此，它们都指的是第一个元素的属性......

我不是 C++ 方面的专家，而且对 Boost 来说真的很陌生，所以这可能是我在哈希映射处理方面所缺少的东西......任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-23T12:02:19.630

您的程序的问题位于这一行：

```
const ptree & attributes = formats.get_child(at, empty_ptree()); 
```

使用这条线，您要求从那里得到孩子`pet.<xmlattr>`，`pets`并且您独立于`f`您正在遍历的任何一个进行此操作 3 次。在[这篇文章](http://akrzemi1.wordpress.com/2011/07/13/parsing-xml-with-boost/)之后，我猜你需要使用的是：

```
const ptree & attributes = f.second.get_child("<xmlattr>", empty_ptree()); 
```

适用于您的两个 xml 文件的完整代码是：

```
#define ATTR_SET ".<xmlattr>"
#define XML_PATH1 "./pets.xml"

#include <iostream>
#include <string>
#include <boost/foreach.hpp>
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/xml_parser.hpp>

using namespace std;
using namespace boost;
using namespace boost::property_tree;

const ptree& empty_ptree(){
    static ptree t;
    return t;
}

int main() {
    ptree tree;
    read_xml(XML_PATH1, tree);
    const ptree & formats = tree.get_child("pets", empty_ptree());
    BOOST_FOREACH(const ptree::value_type & f, formats){
        string at = f.first + ATTR_SET;
        const ptree & attributes = f.second.get_child("<xmlattr>", empty_ptree());
        cout << "Extracting attributes from " << at << ":" << endl;
        BOOST_FOREACH(const ptree::value_type &v, attributes){
            cout << "First: " << v.first.data() << " Second: " << v.second.data() << endl;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T11:49:44.243

到目前为止，如果没有使用过这个特性，我会怀疑`boost::property_tree`XML 解析器不是一个常见的 XML 解析器，而是需要一个特定的模式，其中一个特定属性只有一个特定标记。

如果您想使用超出`boost::property_tree`功能范围的 XML，您可能更喜欢使用提供解析任何 XML 模式的其他 XML 解析器。看看例如[Xerces C++](http://xerces.apache.org/xerces-c/)或[Poco XML](http://pocoproject.org/docs-1.5.0/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-16T03:36:20.390

要解析的文件，`pets.xml`

```
<pets>
    <pet type="cat" name="Garfield" weight="4Kg">
        <something name="test" value="*"/>
         <something name="demo" value="@"/>
    </pet>
    <pet type="dog" name="Milu" weight="7Kg">
         <something name="test1" value="$"/>
    </pet>
    <birds type="parrot">
        <bird name="african grey parrot"/>
        <bird name="amazon parrot"/>
    </birds>
</pets> 
```

代码：

```
// DemoPropertyTree.cpp : Defines the entry point for the console application.
//Prerequisite boost library

#include "stdafx.h"
#include <boost/property_tree/xml_parser.hpp>
#include <boost/property_tree/ptree.hpp>
#include <boost/foreach.hpp>
#include<iostream>
using namespace std;
using namespace boost;
using namespace boost::property_tree;

void processPet(ptree subtree)
{
    BOOST_FOREACH(ptree::value_type petChild,subtree.get_child(""))
    {
        //processing attributes of element pet
        if(petChild.first=="<xmlattr>")
        {
            BOOST_FOREACH(ptree::value_type petAttr,petChild.second.get_child(""))
            {
                cout<<petAttr.first<<"="<<petAttr.second.data()<<endl;
            }
        }
        //processing child element of pet(something)
        else if(petChild.first=="something")
        {
            BOOST_FOREACH(ptree::value_type somethingChild,petChild.second.get_child(""))
            {
                //processing attributes of element something
                if(somethingChild.first=="<xmlattr>")
                {
                    BOOST_FOREACH(ptree::value_type somethingAttr,somethingChild.second.get_child(""))
                    {
                        cout<<somethingAttr.first<<"="<<somethingAttr.second.data()<<endl;
                    }
                }
            }
        }
    }
}
void processBirds(ptree subtree)
{
    BOOST_FOREACH(ptree::value_type birdsChild,subtree.get_child(""))
    {
        //processing attributes of element birds
        if(birdsChild.first=="<xmlattr>")
        {
            BOOST_FOREACH(ptree::value_type birdsAttr,birdsChild.second.get_child(""))
            {
                cout<<birdsAttr.first<<"="<<birdsAttr.second.data()<<endl;
            }
        }
        //processing child element of birds(bird)
        else if(birdsChild.first=="bird")
        {
            BOOST_FOREACH(ptree::value_type birdChild,birdsChild.second.get_child(""))
            {
                //processing attributes of element bird
                if(birdChild.first=="<xmlattr>")
                {
                    BOOST_FOREACH(ptree::value_type birdAttr,birdChild.second.get_child(""))
                    {
                        cout<<birdAttr.first<<"="<<birdAttr.second.data()<<endl;
                    }
                }
            }
        }
    }
}
int _tmain(int argc, _TCHAR* argv[])
{

    const std::string XML_PATH1 = "C:/Users/10871/Desktop/pets.xml";
    ptree pt1;
    boost::property_tree::read_xml( XML_PATH1, pt1  );
     cout<<"********************************************"<<endl;
    BOOST_FOREACH( ptree::value_type const& topNodeChild, pt1.get_child( "pets" ) ) 
    {
        ptree subtree = topNodeChild.second;
        if( topNodeChild.first == "pet" ) 
        {
             processPet(subtree);
             cout<<"********************************************"<<endl;
        }
        else if(topNodeChild.first=="birds")
        {
            processBirds(subtree);
             cout<<"********************************************"<<endl;
        }

    }
    getchar();
    return 0;
} 
```

输出显示在这里： [输出](https://i.stack.imgur.com/J4DCi.png)

# jquery - 使用 jQuery 获取本机屏幕分辨率

> ID：14010477
> 
> 赞同：5
> 
> 时间：2012-12-23T11:10:00.370
> 
> 标签：jquery, mobile, media-queries

我想在设备上获取本机屏幕宽度以在 DOM 中附加脚本。可以使用 jQuery 吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-23T11:11:33.457

`window.screen.width`? 来源：[https ://developer.mozilla.org/en-US/docs/DOM/window.screen](https://developer.mozilla.org/en-US/docs/DOM/window.screen)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-23T11:15:54.057

当然。您可以使用以下方法获取基本宽度和高度：

```
screen.width;
screen.height; 
```

如果需要，您还可以使用以下方法获取像素比（如果您还需要检测视网膜显示器时很有用）：

```
window.devicePixelRatio 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T11:13:29.420

您可以使用 css 属性将宽度设置为设备宽度：

```
width: device-width; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T11:18:00.427

你应该使用：

```
window.screen.availHeight
window.screen.availWidth 
```

# c# - 防止在 ADO.Net 数据表中注入的最佳方法？

> ID：14010480
> 
> 赞同：0
> 
> 时间：2012-12-23T11:10:16.637
> 
> 标签：c#, ado.net, datatable, dataset

最近，我正在通过以下方式通过 DataView 在数据表中进行过滤：

```
 public static DataTable FilterDatatable(this DataTable dtable,string @operator, string colName, string colValue)
        {
            if (dtable != null && dtable.Rows.Count > 0)
            {
                DataView dataView = dtable.DefaultView;

                if (@operator.Equals(SqlOperator.Like , StringComparison.InvariantCultureIgnoreCase))
                {
                    dataView.RowFilter = colName + " " + @operator + " '%" + colValue + "%'";
                }
                else
                {
                    dataView.RowFilter = colName + " " + @operator + " " + colValue;
                }

                return dataView.ToTable();
            }
            return dtable;
        } 
```

在这里，我可以编写一个防止注入的方法（我知道的那些注入），但实际上，我不知道防止数据表中注入的最佳方法，就像 sql 参数一样。

当我将单引号附加字符串作为 ColVal 中的参数发送时，上述方法会引发异常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:16:25.973

在这种情况下，您不需要保护 -`DataTable.Select()`正在对该 DataTable*中的内存中保存的 DataRows 应用过滤器*，它实际上并没有连接到/对数据库执行任何操作。

**更新**

如何创建此方法以将*单引号的任何单个实例加倍*

```
private string MethodName(string str)
{
    return str.Replace("'", "''");
} 
```

所以使用，

```
dataView.RowFilter = colName + " " + @operator + " '%" + MethodName(colValue) + "%'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T11:17:56.060

如果您在查询数据库时已经防止了注入攻击，使用 Sql 参数（最好的方法），没有理由在内存对象上应用注入防止登录。

# c# - WP7 - 不允许访问数据库文件

> ID：14010482
> 
> 赞同：1
> 
> 时间：2012-12-23T11:11:09.997
> 
> 标签：c#, database, windows-phone-7, sql-server-ce

这是我的课：

```
[Table]
public class Question
{
    [Column]
    public bool Sort { get; set; }
    [Column(IsPrimaryKey = true)]
    public int QuestionID { get; set; }
    [Column]
    public int Level { get; set; }
    [Column]
    public string Description { get; set; }
    [Column]
    public string Answer1 { get; set; }
    [Column]
    public string Answer2 { get; set; }
    [Column]
    public string Answer3 { get; set; }
    [Column]
    public string Answer4 { get; set; }
    [Column]
    public string RightAnswer { get; set; }
    [Column]
    public bool Show { get; set; }
}

public class QuestionContext : DataContext
{
    public QuestionContext(string connectionString)
        : base(connectionString)
    {
    }
    public Table<Question> Questions
    {
        get
        {
            return this.GetTable<Question>();
        }
    }
} 
```

我正在尝试连接到我现有的数据库：

```
 private const string ConnectionString = @"appdata:App_Data\QuestionDb.sdf";

public GamePage()
{
    InitializeComponent();

    using (QuestionContext context = new QuestionContext(ConnectionString))
    {

        if (!context.DatabaseExists())
        {
            // create database if it does not exist
            context.CreateDatabase();
        }
        else
        {
            var questions = from o in context.Questions where o.Level == 1 && o.Show == false select o;
            var question = questions.FirstOrDefault();
        }
    }
} 
```

我收到“不允许访问数据库文件”的错误。我认为问题出在我的连接字符串中。它出什么问题了？如何访问文件夹 App_Data 中的 SQLCE 数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:02:30.837

在您的 app.config 中添加以下内容

```
<connectionStrings>
  <add name="DataContext" 
       connectionString="Data source=DataDirectory|Database.sdf;"
       providerName="System.Data.SqlServerCe.4.0"/>
</connectionStrings> 
```

然后在 ConfigurationManager 的帮助下获取连接字符串。也许您需要添加对 System.Configuration 的引用。

```
private const string ConnectionString = ConfigurationManager.ConnectionStrings["DataContext"].ConnectionString 
```

您可以在此处了解有关 ConnectionString 中的 DataDirectory 的更多信息：http: [//msdn.microsoft.com/en-us/library/cc716756 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/cc716756%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:46:30.243

您必须像这样编写连接字符串：

```
MyDataContext db = new MyDataContext("Data Source = 'appdata:/mydb.sdf'; File Mode = read only;"); 
```

数据库文件将是只读的...

# java - android tablelayout点击行与滚动

> ID：14010490
> 
> 赞同：0
> 
> 时间：2012-12-23T11:12:04.923
> 
> 标签：java, android, scroll, tablelayout

我有一个表格布局，我需要在其中选择一行以稍后对其进行处理。问题是，当我滚动它时，它会选择一个新行。当我只想滚动时，我想要一种不选择行的方法

我选择一行是这样的：

```
...
TableRow tR = new TableRow(this);
 final TableLayout tabela = (TableLayout)findViewById(R.id.tableLayout1);
...
tR.setOnTouchListener(new OnTouchListener() {
public boolean onTouch(View arg0, MotionEvent arg1) {
    tabela.getFocusedChild().setBackgroundResource(R.drawable.gray1);//remove the old selected row
    arg0.requestFocus(); //add new one
    arg0.setBackgroundColor(Color.parseColor("#FFFF00")); //add new one
    return false;
}}); 
```

我认为这与“MotionEvent arg1”有关，但我真的不知道如何处理它。在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T22:51:26.857

我已经找到了解决这个问题的方法。我只需要添加

```
if(arg1.getAction() == MotionEvent.ACTION_UP){ 
```

在代码之前

# java - SimpleDateFormat getHours() 返回不正确的值

> ID：14010494
> 
> 赞同：1
> 
> 时间：2012-12-23T11:13:15.760
> 
> 标签：java, android, simpledateformat

为什么 getHours() for "09:50" 返回 8？代码：

```
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm");
Date date = sdf.parse("09:50");
int hours = date.getHours(); // return 8 instead of 9 ??? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:59:16.937

```
 Calendar prueba = Calendar.getInstance();

        prueba.set(2013, 1, 6, 10, 49, 32);

        int day = prueba.get(Calendar.DAY_OF_MONTH);
        int month = prueba.get(Calendar.MONTH);
        int year = prueba.get(Calendar.YEAR);
        int hours = prueba.get(Calendar.HOUR);
        int minutes = prueba.get(Calendar.MINUTE);
        int seconds = prueba.get(Calendar.SECOND);

        Log.v("printf", "Date: " + day + "/"
                                 + month + "/"
                                 + year + "\n");
        Log.v("printf", "Time: " + hours + ":"
                                 + minutes + ":"
                                 + seconds + "\n"); 
```

PD：记住 Calendar 类中的字段 Month 从 0 开始（0-January，1-February，...） PD2：我在过滤器 logcat 上有个性化标签，称为“printf”。为您使用的标签更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T14:02:17.853

看来您的 SimpleDateFormat 可能未设置为默认时区。来电：

```
sdf.setTimeZone(TimeZone.getDefault()); 
```

在解析文字之前应该可以解决您的问题。我已经测试了以下代码：

```
...
    public static final SimpleDateFormat CDfTimestamp = new SimpleDateFormat(
            "yyyy-MM-dd HH:mm:ss");
...
    Date da1 = null;
    for (String dl1 : new String[] { "1970-01-01 12:34:56",
            "2016-01-01 12:34:56" }) {
        try {
            CDfTimestamp.setTimeZone(TimeZone.getTimeZone("GMT+05:00"));
            da1 = CDfTimestamp.parse(dl1);
            System.out.printf("parse GMT+05:00 %s -> %d %d %d (os=%d)\n", dl1, da1
                    .getHours(), da1.getMinutes(), da1.getSeconds(), CDfTimestamp
                    .getTimeZone().getOffset(0));
            CDfTimestamp.setTimeZone(TimeZone.getTimeZone("UTC"));
            da1 = CDfTimestamp.parse(dl1);
            System.out.printf("parse UTC       %s -> %d %d %d (os=%d)\n", dl1, da1
                    .getHours(), da1.getMinutes(), da1.getSeconds(), CDfTimestamp
                    .getTimeZone().getOffset(0));
            CDfTimestamp.setTimeZone(TimeZone.getDefault());
            da1 = CDfTimestamp.parse(dl1);
            System.out.printf("parse default   %s -> %d %d %d (os=%d)\n", dl1, da1
                    .getHours(), da1.getMinutes(), da1.getSeconds(), CDfTimestamp
                    .getTimeZone().getOffset(0));
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
... 
```

获得以下输出：

```
parse GMT+05:00 1970-01-01 12:34:56 -> 8 34 56 (os=18000000)
parse UTC       1970-01-01 12:34:56 -> 13 34 56 (os=0)
parse default   1970-01-01 12:34:56 -> 12 34 56 (os=3600000)
parse GMT+05:00 2016-01-01 12:34:56 -> 8 34 56 (os=18000000)
parse UTC       2016-01-01 12:34:56 -> 13 34 56 (os=0)
parse default   2016-01-01 12:34:56 -> 12 34 56 (os=3600000) 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-23T11:45:35.997

日期已弃用。你应该使用日历。

```
 SimpleDateFormat sdf = new SimpleDateFormat("HH:mm");
 Date date = sdf.parse("09:50");
 Calendar cal = new GregorianCalendar();
cal.setTime(date);
int hours = cal.get(Calendar.HOR_OF_DAY); 
```

# mysql - 在语句完成时沿着其他查询选择不同的字段

> ID：14010502
> 
> 赞同：-1
> 
> 时间：2012-12-23T11:15:46.660
> 
> 标签：mysql, sql, select

我正在尝试从 mysql db 中选择不同的记录。但我无法做到这一点。

这是表格：

```
id,  f2,      f3,         f4
1,   a1,      mytext,     t1
2,   a2,      mytext,     t2
3,   a2,      mytext,     t3
4,   a3,      mytext,     t4
5,   a1,      mytext,     t5
6,   a5,      mytext,     t6 
```

我正在尝试获得不同的 f2 结果：

```
id,  f2,       f3,         f4
3,   a2,      mytext,      t3
4,   a3,      mytext,      t4
5,   a1,      mytext,      t5
6,   a5,      mytext,      t6 
```

可以给我什么是确切的 SQL 查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T11:18:44.777

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT f2, MAX(f4) maxVal
            FROM tableName
            GROUP BY f2
        ) b ON  a.f2 = b.f2 AND
                a.f4 = b.maxVAL 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/f80bc/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T11:39:08.563

如果你真的在寻找`distinct`

然后在这里你的sql

```
 SELECT  distinct f2 ,id, f3, f4  FROM TableName
         group by f2 
```

[**演示**](http://sqlfiddle.com/#!2/f80bc/14)

编辑 ：

这正是你想要的 [演示](http://sqlfiddle.com/#!2/f80bc/3)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-23T11:18:17.600

如果您提供了更多信息，那么查询可能会更加优化并根据您的要求。

```
SELECT * FROM mytable GROUP BY f2 
```

# android - 在 JNI 中使用像素数据创建新的位图？

> ID：14010508
> 
> 赞同：1
> 
> 时间：2012-12-23T11:16:07.143
> 
> 标签：android, c++, c, android-ndk, java-native-interface

我有下面的代码在 JNI 中使用“ARGB_8888”配置创建一个位图（只是一个黑色/灰色图像）。但是，当我在 Java 代码中转储位图的内容时，我只能看到配置，而看不到位图中的像素数据。

JNI 代码

```
// Image Details
int imgWidth = 128;
int imgHeight = 128;
int numPix = imgWidth * imgHeight;

// Creaing Bitmap Config Class
jclass bmpCfgCls = env->FindClass("android/graphics/Bitmap$Config");
jmethodID bmpClsValueOfMid = env->GetStaticMethodID(bmpCfgCls, "valueOf", "(Ljava/lang/String;)Landroid/graphics/Bitmap$Config;");
jobject jBmpCfg = env->CallStaticObjectMethod(bmpCfgCls, bmpClsValueOfMid, env->NewStringUTF("ARGB_8888"));

// Creating a Bitmap Class
jclass bmpCls = env->FindClass("android/graphics/Bitmap");
jmethodID createBitmapMid = env->GetStaticMethodID(bmpCls, "createBitmap", "(IILandroid/graphics/Bitmap$Config;)Landroid/graphics/Bitmap;");
jBmpObj = env->CallStaticObjectMethod(bmpCls, createBitmapMid, imgWidth, imgHeight, jBmpCfg);

// Creating Pixel Data
int triplicateLen = numPix * 4;
char *tripPixData = (char*)malloc(triplicateLen);
for (int lc = 0; lc < triplicateLen; lc++)
{ 
    // Gray / Black Image
    if (0 == (lc%4))
        tripPixData[lc] = 0x7F; // Alpha
    else
        tripPixData[lc] = 0x00; // RGB
}

// Setting Pixels in Bitmap
jByteArr = env->NewByteArray(triplicateLen);
env->SetByteArrayRegion(jByteArr, 0, triplicateLen, (jbyte*)tripPixData);
jmethodID setPixelsMid = env->GetMethodID(bmpCls, "setPixels", "([IIIIIII)V");
env->CallVoidMethod(jBmpObj, setPixelsMid, (jintArray)jByteArr, 0, imgWidth, 0, 0, imgWidth, imgHeight);

free(tripPixData);

// Return BitMap Object
return jBmpObj; 
```

在 JAVA 中（输出）

```
// Checking the Configuration / Image Details
jBmpObj.getWidth() - 128
jBmpObj.getHeight() - 128
jBmpObj.getRowBytes() - 512
jBmpObj.getConfig() - ARGB 8888

// Getting Pixel Data
imgPixs = new int[jBmpObj.getWidth() * jBmpObj.getHeight()];
jBmpObj.getPixels(imgPixs, 0, jBmpObj.getWidth(), 0, 0, jBmpObj.getWidth(), jBmpObj.getHeight());

// Running a Loop on the imgPixs
imgPixs[<0 - imgPixs.lenght>] - 0 (Every Pixel Data) 
```

我使用相同的概念在 Java 代码中创建了位图，并且效果很好（即使我能够看到图像）。但我希望逻辑在 JNI 部分而不是在 Java 代码中。所以我尝试了上述逻辑，但未能设置像素数据。

解决此问题的任何输入都将非常有帮助，..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-08-26T10:35:20.627

完整的工作示例：

```
jclass bitmapConfig = jniEnv->FindClass("android/graphics/Bitmap$Config");
    jfieldID rgba8888FieldID = jniEnv->GetStaticFieldID(bitmapConfig, "ARGB_8888", "Landroid/graphics/Bitmap$Config;");
    jobject rgba8888Obj = jniEnv->GetStaticObjectField(bitmapConfig, rgba8888FieldID);

    jclass bitmapClass = jniEnv->FindClass("android/graphics/Bitmap");
    jmethodID createBitmapMethodID = jniEnv->GetStaticMethodID(bitmapClass,"createBitmap", "(IILandroid/graphics/Bitmap$Config;)Landroid/graphics/Bitmap;");
    jobject bitmapObj = jniEnv->CallStaticObjectMethod(bitmapClass, createBitmapMethodID, _width, _height, rgba8888Obj);

    jintArray pixels = jniEnv->NewIntArray(_width * _height);
    for (int i = 0; i < _width * _height; i++)
    {
        unsigned char red = bitmap[i*4];
        unsigned char green = bitmap[i*4 + 1];
        unsigned char blue = bitmap[i*4 + 2];
        unsigned char alpha = bitmap[i*4 + 3];
        int currentPixel = (alpha << 24) | (red << 16) | (green << 8) | (blue);
        jniEnv->SetIntArrayRegion(pixels, i, 1, &currentPixel);
    }

    jmethodID setPixelsMid = jniEnv->GetMethodID(bitmapClass, "setPixels", "([IIIIIII)V");
    jniEnv->CallVoidMethod(bitmapObj, setPixelsMid, pixels, 0, _width, 0, 0, _width, _height); 
```

其中位图是无符号字符*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T05:16:01.573

```
IN Android each pixel represented as 0xFFFFFFFF ie ARGB.
0xFF referes most significamt 8 bits of given data.
From your snippet, where you are getting soure image data? But i have solved this issue
by using following code base.i hope this ll help you. 
```

// 创建像素数据

```
unsigned char* rawData = //your raw data

**Note**: here you have get each r,g & b component as 8 bit data //If it is rgb image,if it             
is monochrome you can use raw data

int triplicateLen = imgheight * imgwidth;
int *tripPixData = (int*) malloc(triplicateLen * sizeof(int));

if(rgb){
       for (int lc = 0; lc < triplicateLen ; lc++){
            tripPixData [lc] = (0xFF << 24) | (r[lc] << 16) | (g[lc] << 8) | b[lc]; 
       }
 }else{
      for (int lc = 0; lc < triplicateLen ; lc++){
            tripPixData [lc] = (0xFF << 24) | (rawData [lc] << 16) | (rawData [lc] << 8) | rawData [lc];    
       }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T02:42:25.930

在 Java 中不能将 byte[] 转换为 int[]，因此不能在 JNI 中转换它。但是您可以将 char* 转换为 int*，因此您可以简单地使用您的 tripPixData 来填充一个新的 jjintArray。

# android - Android 按钮文本在按钮中心之后开始

> ID：14010509
> 
> 赞同：0
> 
> 时间：2012-12-23T11:16:09.910
> 
> 标签：android, button, text, center

我的布局中的按钮有问题。每当我添加一个按钮时，文本都会在按钮中心之后开始。

这就是我的意思：

![在此处输入图像描述](../Images/80e02f69f8ac78399b8ea2a07a22d98c.png)

我使用 a`Relativelayout`但我使用`Linear`,`relative`或`table`. 宽度和高度设置为 wrap_content。

我会非常感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:28:48.867

试试这个 android:gravity="left"

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button"
    android:layout_width="fill_parent"
    android:layout_height="200dp"
    android:gravity="left"
    android:text="Button" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T17:58:06.720

当我遇到这个问题时，它是 Eclipse GUI 设计器的问题。Eclipse 重启应该会有所帮助。

# android - ActionBarSherlock Fragments 显示/访问

> ID：14010512
> 
> 赞同：0
> 
> 时间：2012-12-23T11:16:33.207
> 
> 标签：android, layout, actionbarsherlock, layout-inflater

我得到了一个带有 SherlockActionbar 的动态布局。在横向模式下，我得到了两个应该并排显示的片段。但不显示第二个片段。

MainActivity onCreate

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        if (Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH){
            this.setTheme(R.style.Theme_Sherlock);
        }

        if (savedInstanceState != null)
        {
           savedInstanceState.remove ("android:support:fragments");
        } 

        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        actionbar = getSupportActionBar(); 

        actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        tab1 = actionbar.newTab().setText("Search"); 
        tab2 = actionbar.newTab().setText("Found"); 
        tab3 = actionbar.newTab().setText("Account");

        Class[] clzs;
        String[] tags;

        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {

            clzs = new Class[2];
            tags = new String[2];

            clzs[0] = ListSearchFragment.class;
            tags[0] = "listsearch";

            clzs[1] = DetailSearchFragment.class;
            tags[1] = "detailsearch";
        }
        else
        {

            clzs = new Class[1];
            tags = new String[1];
            clzs[0] = ListSearchFragment.class;
            tags[0] = "listsearch";
        }

        tab1.setTabListener(new MainTabListener<SherlockFragment>(this, clzs,tags));

        clzs = new Class[1];
        tags = new String[1];

        clzs[0] = AccountOverviewFragment.class;
        tags[0] = "accountoverview";

        tab2.setTabListener(new MainTabListener<SherlockFragment>(this,  clzs,tags));
        tab3.setTabListener(new MainTabListener<SherlockFragment>(this,  clzs,tags));

        actionbar.addTab(tab1); 
        actionbar.addTab(tab2);
        actionbar.addTab(tab3);
    } 
```

MainTabListener：

```
public class MainTabListener <T extends SherlockFragment> implements ActionBar.TabListener{

    public SherlockFragment fragments[];
    private Activity mActivity; 
    private Class<T>[] mClasses;
    private String[] tags;

    public MainTabListener(Activity activity, Class<T>[] clzs, String[] tags) {
        this.mActivity = activity;
        this.mClasses = clzs;
        this.tags = tags;
        this.fragments = new SherlockFragment[mClasses.length];
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        FragmentManager fragMgr = ((FragmentActivity) mActivity).getSupportFragmentManager(); 
        ft = fragMgr.beginTransaction();

        for(int i = 0; i < mClasses.length; i++)
        {
            if (fragments[i] == null) {
                fragments[i] = (SherlockFragment) SherlockFragment.instantiate(mActivity, mClasses[i].getName());
                ft.add(R.id.fragment_container, fragments[i],tags[i]);
            }
            else {
                ft.attach(fragments[i]);
            }           
        }
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
        ft.commit();
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        FragmentManager fragMgr = ((FragmentActivity) mActivity).getSupportFragmentManager(); 
        ft = fragMgr.beginTransaction();

        for(int i = 0; i < mClasses.length; i++)
        {
            if (fragments[i] != null) {
                ft.detach(fragments[i]);
            }
        }
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
        ft.commit();
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {

    }

} 
```

当屏幕方向处于横向模式时，布局重力和宽度设置为 1/3 和 2/3。

在纵向模式下，我有一个带有列表的片段。当我单击一个项目时，将启动一个新的 Activity，其中另一个 Fragment 被添加到新的 LinearLayout 中。

详细活动：

```
public class DetailSearchActivity extends SherlockFragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

            setContentView(R.layout.activity_found_detail);

            FragmentManager fragMgr = this.getSupportFragmentManager(); 
            FragmentTransaction ft = fragMgr.beginTransaction();
            ft.add(R.id.fragment_container,SherlockFragment.instantiate(this, DetailSearchFragment.class.getName()) ,"detailsearch");
            ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);

            ft.commit();

            fragMgr.executePendingTransactions();

            if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
                 finish();
                 return;
            }

            Bundle extras = getIntent().getExtras();
            try{
            DetailSearchFragment fragmentdetail = (DetailSearchFragment) this.getSupportFragmentManager().findFragmentByTag("detailsearch");

            if (extras != null) {
              String s = extras.getString("title");

              String d = extras.getString("description");

              fragmentdetail.setText(s, d);
            }
            }catch(RuntimeException e){
                e.printStackTrace();
            }
    }
} 
```

纵向模式下的问题是，当我尝试设置文本时，片段中的视图似乎没有被初始化。尝试获取已膨胀的 FragmentLayout 中的 Textview 时出现 NullPointerException（显示默认文本）。那么在 FragmentLayout 成功充气后如何调用我的 setText() 方法？

**编辑：** 当我在 TabListener 中记录我的标签时，在 LandscapeMode 中，两个片段（列表和详细信息）似乎都添加到了 FragmentTransaction

当我将此添加到我的 ListItemClickListener 时：

```
DetailSearchFragment fragmentdetail = (DetailSearchFragment) getActivity().getSupportFragmentManager().findFragmentByTag("detailsearch");
Log.d("detailfrag","exists: "+(fragmentdetail != null) + " is in Layout:" + (fragmentdetail.isInLayout())); 
```

我得到：

```
12-23 13:39:07.440: D/detailfrag(13403): exists: true is in Layout:false 
```

**Edit2**好的，我解决了两个布局的问题。您不能将两个 Fragment 添加到同一个容器中。

选项卡监听器：

```
public class MainTabListener <T extends SherlockFragment> implements ActionBar.TabListener{

    public SherlockFragment fragments[];
    private Activity mActivity; 
    private Class<T>[] mClasses;
    private String[] tags;
    private View[] myViews;
    private int id = 1;

    public MainTabListener(Activity activity, Class<T>[] clzs, String[] tags) {
        this.mActivity = activity;
        this.mClasses = clzs;
        this.tags = tags;
        this.fragments = new SherlockFragment[mClasses.length];
        this.myViews = new View[mClasses.length];
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        FragmentManager fragMgr = ((FragmentActivity) mActivity).getSupportFragmentManager(); 
        ft = fragMgr.beginTransaction();

        for(int i = 0; i < mClasses.length; i++)
        {
            if (fragments[i] == null) {
                fragments[i] = (SherlockFragment) SherlockFragment.instantiate(mActivity, mClasses[i].getName());
                View myView = (View)new LinearLayout(mActivity);
                LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(
                        LinearLayout.LayoutParams.WRAP_CONTENT,
                        LinearLayout.LayoutParams.WRAP_CONTENT);
                myView.setLayoutParams(llp);
                ViewGroup container = (ViewGroup)mActivity.findViewById(R.id.fragment_container);
                container.addView(myView);
                myView.setId(findId());
                myViews[i] = myView;
                ft.add(myView.getId(), fragments[i],tags[i]);
            }
            else {
                myViews[i].setVisibility(View.VISIBLE);
            }           
        }
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
        ft.commit();
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {

        for(int i = 0; i < mClasses.length; i++)
        {
            if (fragments[i] != null) {
                myViews[i].setVisibility(View.GONE);
            }
        }
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {

    }

    public int findId(){  
        View v = (ViewGroup)mActivity.findViewById(id);  
        while (v != null){  
            v = (ViewGroup)mActivity.findViewById(++id);  
        }  
        return id++;  
    }

} 
```

当纵向模式下只有一个 Fragment 时，仍然遇到在创建 FragmentView 之前调用 setText() 方法的问题。

# javascript - JavaScript - 从字符串中删除除十六进制之外的所有内容

> ID：14010515
> 
> 赞同：3
> 
> 时间：2012-12-23T11:17:26.847
> 
> 标签：javascript, regex, hex

我正在尝试将一个值更改为`textarea`它只能包含十六进制数字。
例如，如果我有这个`textarea`：

```
 RMCP01
    Mario Kart Wii

    CCP items
    * C27EF0EC 00000002
    * 3FE08000 93BF1500
    * 3BE00000 00000000
    * 28345842 ff7f0080
    * 8000000F 00000000
    * 8000000E 00000001
    * E0000000 00000000
    * 28345842 fffb0004
    * 8000000F 00000020
    * 8000000E 00000001
    * E0000000 00000000
    * 28345842 fffd0002
    * 8000000F 0000000B
    * 8000000E 00000001
    * E0000000 00000000
    * 28345842 7fff8000
    * 8000000F 00000009
    * 8000000E 00000001
    * E0000000 00000000
    * 28345842 bfff4000
    * 8000000F 00000004
    * 8000000E 00000001
    * E0000000 00000000
    * 28345842 efff1000
    * 8000000F 0000000E
    * 8000000E 00000001
    * E0000000 00000000
    * 28345842 fbff0400
    * 8000000F 0000000F
    * 8000000E 00000001
    * E0000000 00000000
    * 28345842 fff70008
    * 8000000F 00000007
    * 8000000E 00000001
    * E0000000 00000000
    * 28345842 ffdf0020
    * 8000000F 00000003
    * 8000000E 00000001
    * E0000000 00000000
    * E2000001 00000000
    * 48000000 809C1900
    * DE000000 80008180
    * 58010000 00000008
    * DE000000 80008180
    * 48100000 80001500
    * DE000000 80008180
    * 9421000F 0000008c
    * 14000090 00000001
    * E0000000 80008000

    Connect Hacker
    * 046592D8 3BA0270F

    VR
    * 28345842 ff7b0084
    * 48000000 809BD748
    * DE000000 90009380
    * 5A010000 00009050
    * 12000000 00008ae3
    * E0000000 00000000
    * 28345842 ddff2200
    * 48000000 809BD748
    * DE000000 90009380
    * 5A010000 00009050
    * 12000000 00000001
    * E0000000 00000000
    * 28345842 ff870078
    * 48000000 809BD748
    * DE000000 90009380
    * 5A010000 00009050
    * 12000000 00001388
    * CC000000 00000000
    * E0000000 80008000

    RBC
    * 045334B0 38000002
    * 04533510 2C000003

    Drift
    * 048B5CC0 00000000
    * 048B5CC4 00000000
    * 048B5CC8 00010000
    * 048B5B38 00010000

    Invicibilty
    * F6000001 80008100
    * A88301A8 3BC00000
    * 1400002C 60000000
    * F6000001 80008100
    * EC4300B2 C0630088
    * D2000020 00000002
    * 38000001 9803000A
    * 80030008 00000000
    * E0000000 80008000

    BBB
    283457E2 BFFE4001
    048B59F8 43960000
    E0000000 00000000
    283457E2 BFFD4002
    048B59F8 442F0000
    E0000000 00000000
    283457E2 FBEF0410
    048B59F8 43110000
    E0000000 00000000
    283457E2 EBFF1400
    048B59F8 40000000
    E0000000 00000000

    Deactivator
    * 28348200 FEFF0100
    * 8000000D 00000001
    * 48000000 809C1900
    * DE000000 80008180
    * 58010000 00000008
    * DE000000 80008180
    * 4A100000 0000008C
    * 30000000 00000014
    * 14000000 00000014
    * 14000004 00000000
    * E0000000 00000000
    * 28348200 FDFF0200
    * 8000000D 00000000
    * E0000000 80008000 
```

结果是除了第一个字符之外的所有内容。（第一行更改为“MCP01”）这是我的代码：

```
 function check() {
            var c=$("#c").value;
            c=c.replace(/[^A-Fa-f0-9]/, "");
            return c;
        } 
```

怎么了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T11:20:11.500

您应该使用`/g`标志来执行全局替换：-

```
c=c.replace(/[^A-Fa-f0-9]/g, ""); 
```

* * *

请注意，这种方法可能会失败，因为在“ABRET”中，它只会替换`R and T`，但`ABE`不是有效的十六进制数字。

如果您只想保留十六进制数字，那么您可能应该将您的正则表达式更改为： -

```
/\b[0-9a-fA-F]{6}\b/g 
```

上面的正则表达式只会匹配`Hex`数字。因此，只需替换与上述模式不匹配的每个子字符串。休息我留给你执行。

您还可以将上述正则表达式修改为： -

```
/\b[0-9A-F]{6}\b/gi 
```

使用`/i`标志，正则表达式`case-insensitive`匹配。所以，`A`与 相同`a`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T11:51:27.750

这些代码效果不够好，但它们很棒。这是我最终使用的代码：

```
var c=$("c").val();
var newc="";
var counter=0;
var newcstack="";
for (var i=0; i<c.length; i++) {
    if (c.charAt(i).match(/[A-Fa-f0-9]/)) {
        newcstack+=c.charAt(i);
        counter++;
        if (counter==8) {
            newc+=newcstack;
            counter=0;
            newcstack="";
        }
    }
    else {
        counter=0;
        newcstack="";
    }
}
return newc; 
```

# xml - XQuery：为什么我在许多 XML 文件中的请求不起作用？

> ID：14010519
> 
> 赞同：0
> 
> 时间：2012-12-23T11:17:53.113
> 
> 标签：xml, xquery

我有 2 个 XML 文件，第一个包含气象测量数据，第二个包含位置数据：

措施.xml

```
<measure latitude="45.90298482482" longitude="8.92092094">
   ...
</measure>
<measure latitude="45.29848284" longitude="8.72474724">
   ...
</measure>
... 
```

位置.xml

```
<location latlng="45.9029,8.9209">
    <address>8, Denver Road</address>
    <place>Goodcity</place>
</location>
<location latlng="45.2984,8.7247">
    <address>3, New Avenue</address>
    <place>Goodcity</place>
</location> 
```

所以我想做的是：存储给定地点的所有纬度，然后尝试通过使用子字符串来获取与其对应的度量。这是我尝试过的，但一直返回 0 ：

```
for $l in //location
where $l/place/string() = 'Goodcity'
return
let $test := $l/@latlng/string() 
return
for $m in //measure
where concat(substring($m/@latitude/string(),0,8),',',substring($m/@longitude/string(),0,7)) = $test
return $m 
```

任何的想法？

编辑：问题不在于我使用`susbtring(lat,0,8)`and的事实`substring(long,0,7)`，我知道我的位置文件，这些将始终返回 4 位小数的数字。

编辑2：终于**可以了**，虽然我的要求很长，你认为有办法简化它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:12:31.393

如果有两个单独的 XML 文档，那么我希望看到类似

```
for $l in doc('location.xml')//location...

for $m in doc('measures.xml')//measure... 
```

您使用 substring() 进行的比较似乎很容易出错。为什么 45.90298482482 舍入为 45.9029 而不是 45.9030？但我猜你比我们更了解你自己的数据。

# qt-creator - 无法连接创建者通信套接字/tmp/qt_temp.JH2103/stub-socket：没有这样的文件或目录

> ID：14010521
> 
> 赞同：15
> 
> 时间：2012-12-23T11:17:57.940
> 
> 标签：qt-creator, kubuntu

当我从 Kubuntu 中的 Qt Creator 运行基于控制台的项目时，出现此错误。Konsole 终端弹出，但它只显示：

```
Cannot connect creator comm socket /tmp/qt_temp.JH2103/stub-socket: No such file or directory
Press <RETURN> to close this window... 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-05T11:03:45.580

在使用 apt-get 安装 Qt Creator 后，我在 Ubuntu 11.10 中遇到了同样的问题。如果您将转到 Qt Creator 设置并将终端更改为，`/usr/bin/xterm -e`那么它应该可以工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T20:25:29.053

这个对我有用。

菜单 | 工具 | 选项 | 环境 | 一般 | 系统 | 终端
`konsole --nofork -e`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-14T15:58:02.853

您可以按照以下步骤进行更改：

`Tools > Options > Environment > General > System > Terminal: xterm -e`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-28T14:47:19.880

Qt Creator 不支持从创建者启动的 GUI/控制台应用程序中的完整终端在创建者的窗口中显示其输出。此窗口不支持 cin。要处理此类程序，它们必须在实际终端中执行。同样在 linux 下，必须在创建者设置中指定正确的终端程序。

在 Qt Creator 的终端中设置程序执行：

1 - 在左侧图标栏中：按“项目”</p>

2 - 在“运行设置”区域：按“显示详细信息”</p>

3 - 选中“在终端中运行”</p>

在 Qt Creator for linux 中设置终端：

1 - 菜单：工具 -> 选项...

2 - 选择“环境”->“常规”</p>

3 - 将“终端：”的文本设置为“/usr/bin/xterm -e”</p>

4 - 按“确定”</p>

你完成了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-03T17:23:40.700

我遇到了同样的问题，结果发现我的控制台应用程序在后台运行的实例太多。我将我的设置保留为`gnome-terminal -x`，而是关闭了我的应用程序的所有正在运行的实例，然后再次尝试并且它起作用了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-08T17:31:40.123

如果您仍想使用`konsole`，这可能是由于其设置之一。在 Konsole 中，单击`Configure`-> `Configure konsole`-> 取消勾选`Run all Konsole windows in a single process`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-30T07:22:14.517

在 Tools->Options->Environment->System->Terminal 下更改终端设置以`/usr/bin/xterm -e`在 Ubuntu 13.10 上为我工作

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-09T10:28:22.640

当您尝试在调试模式下运行我的项目时，出现此“无法连接创建者通信套接字 /tmp/…/stub-socket：没有此类文件或目录”错误。这是一个开始使用 Qt 和 opencv（加载图像文件）的基本项目。我花了一段时间让它运行。

.pro 文件包含：

```
QT       += core

QT       -= gui

TARGET = Hello
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += main.cpp

INCLUDEPATH += "/usr/local/include/opencv"

LIBS += `pkg-config opencv --libs` 
```

main.cpp 文件包含：

```
#include <QCoreApplication>
#include <QDebug>
#include <iostream>
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

using namespace std;
using namespace cv;

int main()
{
   // QCoreApplication a(argc, argv);
    //qDebug()<<"hello world";
    Mat image;
  //image = imread(argv[1]);   // Read the file
  image = imread("/home/maalej/AhmedWork/maalej.jpg");

 if(! image.data )                              // Check for invalid input
  {
      cout <<  "Could not open or find the image" << std::endl ;

      return -1;
  }

  qDebug()<<"hello world";
  cout<<"**********"<<endl;
  namedWindow( "Display window" );// Create a window for display.
  imshow( "Display window", image );                   // Show our image inside it.

  waitKey(0);
  return 1;
    //return a.exec();
} 
```

从官网下载后运行qtcreator安装manullay时，控制台中出现打印字符串，但不显示图像！！！即使从 /usr/bin/xterm -e 更改为 x-terminal-emulator -e 。我通过运行 qtcreatormanitenancetool 并按下全部卸载来卸载 qtcreator。我使用ubuntu软件中心重新安装了qtcrator（建议正确安装软件包）。我仍然没有运行我的项目，但是当将默认设置 x-terminal-emulator -e 更改为 /usr/bin/xterm -e 时，它​​工作并加载了图像。

谢谢亚历山大。

# database - Microsoft Azure 开发入门

> ID：14010523
> 
> 赞同：7
> 
> 时间：2012-12-23T11:18:08.440
> 
> 标签：database, azure, azure-sql-database

我刚开始在 Azure 中进行开发，遇到了很多可能对其他人也有帮助的问题。

我的目标是更多地了解：

*   天蓝色
*   html5
*   jQuery
*   ASP.NET MVC4
*   实体框架

我的第一步：

*   [订阅 Azure](http://manage.windowsazure.com/)。（5分钟）
*   创建一个网站，并将一个数据库添加到我的 azure 帐户中。（5分钟）
*   创建 TFS 环境（5 分钟）
*   下载可以在visual studio中使用的*发布设置文件直接发布到azure（1分钟）*
*   安装了 Visual Studio 2012（2 小时）（必需）
*   安装 azure SDK for .NET（30 分钟）（必需）
*   安装 reshaper（30 分钟）（可选）
*   已安装 SQL Server 2012（仍在下载，1 小时还在计数）（需要？）

我同时开始并从[这个](https://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/)很棒的教程开始，以获得网站、html5、azure 的实践经验。

由于我通过在另一个项目中添加我的实体类而偏离了教程，因此我在运行 enable-migrations 时遇到了错误。[在这里](https://stackoverflow.com/questions/14007169/entityframework-enable-migrations-argumentexception)您可以阅读该问题的答案。

现在对我来说“最难”的部分是：数据库世界。我不是数据库开发方面的专家，所以我想知道我需要潜入多深。目标保持不变：我想构建一个 Web 应用程序，在其中存储和检索数据库中的数据。到目前为止，天蓝色的体验非常容易，一切都非常容易集成。

我有点喜欢我只需要 Visual Studio 来工作的想法，并且我可以获得插件来帮助我开发我需要的东西。当您进行数据库开发时，这会结束吗？SQL Server 2012 是要走的路吗？
还是有“更简单”的选择？使用我在本地更改的内容更新云中的数据库是否需要大量工作？我确实想最终将东西存储在天蓝色的数据库中。

你们能否阐明其利弊的可能性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T11:50:07.290

当您在模拟环境（本地开发）中使用 Windows azure 环境时，您可以使用 SQL Server 2012 的桌面版本。但最后，当您发布用于生产的云应用程序时，您必须将数据架构存储在 Azure SQL 数据库中。

**什么是 Windows Azure SQL 数据库？**

> Microsoft Windows Azure SQL 数据库是一种基于云的关系数据库服务，它基于 SQL Server 技术构建，并在 Microsoft 数据中心的硬件上运行，该硬件由 Microsoft 拥有、托管和维护。

**共同点和不同点**

与您本地的 SQL Server 实例类似，Windows Azure SQL 数据库为基于 Transact-SQL 的数据库访问公开了一个表格数据流 (TDS) 接口。

这允许您的数据库应用程序以与使用 SQL Server 相同的方式使用 Windows Azure SQL 数据库。

由于 Windows Azure SQL 数据库是一项服务，因此 Windows Azure SQL 数据库中的管理略有不同。

与管理本地 SQL Server 实例不同，Windows Azure SQL 数据库从物理管理中抽象出逻辑管理；您继续管理数据库、登录名、用户和角色，但 Microsoft 管理物理硬件，例如硬盘驱动器、服务器和存储。

这种方法有助于 Windows Azure SQL 数据库提供大规模的多租户数据库服务，提供企业级的可用性、可扩展性、安全性和自我修复。

由于 Microsoft 处理所有物理管理，Windows Azure SQL 数据库与 SQL Server 的本地实例在管理、供应、Transact-SQL 支持、编程模型和功能方面存在一些差异。

**特征和类型**

Windows Azure SQL 数据库不支持 SQL Server 中的所有功能和数据类型。

Analysis Services、Replication 和 Service Broker 目前不作为 Windows Azure 平台上的服务提供。

因为 Windows Azure SQL 数据库执行物理管理，所以任何试图直接操作物理资源的语句和选项都将被阻止，例如资源调控器、文件组引用和一些物理服务器 DDL 语句。

也不能设置服务器选项和 SQL 跟踪标志或使用 SQL Server Profiler 或 Database Tuning Advisor 实用程序。

Windows Azure SQL 数据库支持多种 SQL Server 2008 数据类型；它不支持从 SQL Server 2008 中弃用的数据类型。

**有关更多详细信息**，您可以按照下面提到的链接进行操作。

[**Windows Azure SQL 数据库概述**](https://azure.microsoft.com/en-us/documentation/articles/sql-database-technical-overview/)

[**工具和实用程序支持（Windows Azure SQL 数据库）**](http://msdn.microsoft.com/en-us/library/ee621784.aspx)

[**准则和限制（Windows Azure SQL 数据库）**](http://msdn.microsoft.com/en-us/library/ff394102.aspx)

[**将 ASP.NET Web 应用程序部署到 Windows Azure 云服务和 SQL 数据库**](http://www.windowsazure.com/en-us/develop/net/tutorials/cloud-service-with-sql-database/)

我希望这对你有帮助。

# intellij-idea - IntelliJ Idea 12 - Java 文件对于编辑器来说太大了

> ID：14010524
> 
> 赞同：19
> 
> 时间：2012-12-23T11:18:09.670
> 
> 标签：intellij-idea

`file x.java is too large for IntelliJ Idea editor`在尝试打开为 Axis 2 生成的 Web 服务存根类后获取“ ”。

我看到一个关于这个问题的帖子，上面写着改变

```
idea.max.intellisense.filesize=2500 
```

在`idea.properties`.

但是，尽管我增加了足够的价值，但这个技巧对我不起作用。我还尝试将其注释掉以禁用此功能；但它也没有用..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-11-24T20:31:09.493

现在的设定

```
idea.max.intellisense.filesize=50000 
```

非常适合我，让我打开最大 50M 大小的文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T20:31:41.557

我的问题是文件> 20mb。请参阅此链接：http: [//youtrack.jetbrains.com/issue/IDEA-85045](http://youtrack.jetbrains.com/issue/IDEA-85045)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-27T23:18:02.830

如果您只想让 IntelliJ 打开完整文件而不是截断它，请使用以下命令：

```
idea.max.content.load.filesize=500000 #500MB 
```

# dart - 地图中的飞镖列表

> ID：14010528
> 
> 赞同：0
> 
> 时间：2012-12-23T11:18:44.260
> 
> 标签：dart

我在 Dart 中有一个 Map（最初从 JSON 加载），看起来像这样：

```
somevar = {
    'Title': 'Some object',
    'items': [{'title': 'Item 1 Title'}, {'title': 'Item 2 Title'}]
} 
```

由于某种原因`somevar['items']`，它的行为不像列表。`Exception: NoSuchMethodError : method not found: 'iterator'`如果我尝试遍历列表，我会得到。

如果我尝试，我也会收到类似的错误`somevar['items'].length`

如果我像这样手动加载这个“列表”：`someList = new List(somevar['items']);`那么它会按预期工作。

知道为什么会这样，我做错了什么吗？对我来说，自然的期望是从 JSON 解析的“列表”的行为与 List() 对象完全一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:24:59.503

没关系，似乎我的代码中有一个更深层次的问题导致我的`somevar`变量为空（即使它应该有地图。无论如何，我现在将其标记为已解决，以免浪费任何人的时间。

# java - 从`StringTokenizer`获取原始字符串中的位置

> ID：14010534
> 
> 赞同：4
> 
> 时间：2012-12-23T11:19:17.060
> 
> 标签：java, stringtokenizer

我需要在字符串中获取空格分隔的标记，但我还需要知道每个标记*开始*的原始字符串中的字符位置。有什么办法可以做到这一点`StringTokenizer`。另外，据我了解，这是一个遗留类；有没有更好的选择来使用`StringTokenizer`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T11:26:28.503

您应该始终使用`String#split()`来拆分您的字符串，而不是`StringTokenizer`.

但是，由于您还想要字符串中标记的位置，那么最好使用[`Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)和[`Matcher`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)分类。你有[`Matcher#start()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#start%28%29)方法给出匹配模式的字符串的位置。

这是一个例子： -

```
String str = "abc asf basdfasf asf";
Matcher matcher = Pattern.compile("\\S+").matcher(str);

while (matcher.find()) {
    System.out.println(matcher.start() + ":" + matcher.group());
} 
```

该模式`\\S+`匹配该字符串中的非空格字符。使用[`Matcher#find()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)方法返回所有匹配的子字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T11:28:26.123

您可以自己轻松地使用`String.split()`

```
 String text = "hello world example";
 int tokenStartIndex = 0;
 for (String token : text.split(" ")) {      
   System.out.println("token: " + token + ", tokenStartIndex: " + tokenStartIndex);
   tokenStartIndex += token.length() + 1; // +1 because of whitespace
 } 
```

这打印：

```
token: hello, tokenStartIndex: 0
token: world, tokenStartIndex: 6
token: example, tokenStartIndex: 12 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-05T13:06:44.093

我改进了 micha 的答案，以便它可以处理相邻的空间：

```
String text = "hello  world     example";
int start = 0;
for (String token : text.split("[\u00A0 \n]")) {
    if (token.length() > 0) {
        start = text.indexOf(token, start);
        System.out.println("token: " + token + ", start at: " + start);
    }
} 
```

输出是：

```
token: hello, start at: 0
token: world, start at: 7
token: example, start at: 17 
```

# validation - Primefaces tabView 在选项卡更改时执行表单验证

> ID：14010537
> 
> 赞同：3
> 
> 时间：2012-12-23T11:19:24.023
> 
> 标签：validation, jsf-2, primefaces, onchange, tabview

我的`p:tabView`组件存在严重问题。我已经设置`dynamic="true"`了`cache="false"`tabView。其中一个选项卡具有一些已设置的输入组件`required="true"`。

现在，当我每次更改选项卡时，都会进行表单验证，并且 FacesMessages 正在咆哮中显示。

这是标签：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:p="http://primefaces.org/ui"
   template="/WEB-INF/templates/globalTemplate.xhtml">

   <ui:define name="title">#{adbBundle['home']}</ui:define>
   <ui:define name="content">
      <p:growl id="growl" showDetail="true" autoUpdate="true" />

      <p:tabView id="adminTabView" dynamic="true" cache="false">
         <p:tab title="#{adbBundle['admin.customerTab.title']}"
            id="customerTab">
            <ui:include src="/WEB-INF/includes/adminCustomer.xhtml" />
         </p:tab>
         <p:tab title="#{adbBundle['admin.activityTab.title']}"
            id="activityTab">
            <ui:include src="/WEB-INF/includes/addActivity.xhtml" />
         </p:tab>
      </p:tabView>

   </ui:define>

</ui:composition> 
```

adminCustomer.xhtml 包含表单，它是：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:p="http://primefaces.org/ui">

   <h:form id="customerForm">
      <p:panel id="addCustomerPanel" toggleable="true"
         header="#{adbBundle['admin.addCustomerPanel.header.new']}">
         <p:panelGrid columns="2" id="addCustomerTable"
            styleClass="addCustomerTable">
            <f:facet name="header">
               <p:outputLabel id="header"
                  value="#{adbBundle['admin.addCustomerPanel.addCustomerTable.header']}" />
            </f:facet>

            <p:outputLabel for="customerName"
               value="#{adbBundle['admin.addCustomerPanel.addCustomerTable.customerName']}" />
            <h:panelGroup layout="block">
               <p:inputText id="customerName" styleClass="customerName"
                  autocomplete="off"
                  label="#{adbBundle['admin.addCustomerPanel.addCustomerTable.customerName']}"
                  value="#{adminController.customerDTO.customerName}"
                  required="true" />               
            </h:panelGroup>

            <p:outputLabel for="customerId"
               value="#{adbBundle['admin.addCustomerPanel.addCustomerTable.customerId']}" />
            <h:panelGroup layout="block">
               <p:inputText id="customerId" autocomplete="off"
                  label="#{adbBundle['admin.addCustomerPanel.addCustomerTable.customerId']}"
                  value="#{adminController.customerDTO.customerId}" required="true">
                  <f:validator validatorId="customerIDValidator" />
               </p:inputText>               
            </h:panelGroup>

            <p:outputLabel for="activeStatus"
               value="#{adbBundle['admin.addCustomerPanel.addCustomerTable.activeStatus']}" />
            <h:panelGroup layout="block">
               <p:selectBooleanCheckbox id="activeStatus"
                  value="#{adminController.customerDTO.active}" />
            </h:panelGroup>

            <f:facet name="footer">
               <p:commandButton value="#{adbBundle['saveButton']}"
                  actionListener="#{adminController.saveCustomer}"
                  icon="ui-icon-check"
                  update=":growl, @form" />
            </f:facet>
         </p:panelGrid>
      </p:panel>
   </h:form>

</ui:composition> 
```

我无法找到我做错了什么以及如何解决它。我正在使用 Primefaces 3.4.2 和 JSF Mojarra 2.1.7-jbossorg。任何指针都会对我很有帮助。

我也在 PrimeFaces 论坛上问过这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T06:03:04.740

这是如何`tabView`工作的。以下是 PrimeFaces 跟踪器的相关问题：

*   [http://code.google.com/p/primefaces/issues/detail?id=3423](http://code.google.com/p/primefaces/issues/detail?id=3423)。
*   [http://code.google.com/p/primefaces/issues/detail?id=4143](http://code.google.com/p/primefaces/issues/detail?id=4143)

如您所见，第一个标记为 WontFix。*第二个是重复的，但最后你会看到另一个解决方法*。

如果您仔细阅读该线程，您可能会注意到一些解决方法仍然存在。如果您被迫使用其中一种，请尝试其中一种`tabView`。如果您想在不同的选项卡中使用输入，还可以考虑使用[PrimeFaces - Wizard 。](http://www.primefaces.org/showcase/ui/wizard.jsf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T08:31:06.920

如果我正确理解您的问题，实际上有一个非常简单的解决方法可以防止重复显示消息。

将您的咆哮更改为以下内容：

```
<p:growl id="growl" globalOnly="true" autoUpdate="true" showDetail="true" /> 
```

如果您想从支持 bean 端添加消息，您可以使用以下代码执行此操作：

```
FacesContext.getCurrentInstance()
   .addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, "title", "details"); 
```

如果你想完全安全，你甚至可以为咆哮指定一个 for 属性，并将其作为第一个参数`addMessage`。

# wpf - 从 ListBoxItem 访问情节提要（资源）

> ID：14010538
> 
> 赞同：3
> 
> 时间：2012-12-23T11:19:29.313
> 
> 标签：wpf, silverlight, xaml

我有个问题。当我单击 ListBoxItem（来自 XAML 而不是 CS）时，如何启动在资源中创建的情节提要？

我在“ListBoxItemStyle1”中使用 EventTrigger 进行了测试，但无法访问情节提要，未找到。

这是我的代码：

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="WpfApplication1.MainWindow"
x:Name="Window"
Title="MainWindow"
Width="640" Height="480">
<Window.Resources>
    <Style x:Key="ListBoxItemStyle1" TargetType="{x:Type ListBoxItem}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
        <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
        <Setter Property="Padding" Value="2,0,0,0"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ListBoxItem}">
                    <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <EventTrigger RoutedEvent="Selected">
                            <BeginStoryboard>
                                <!--?????????????????????????????????????????????-->
                            </BeginStoryboard>
                        </EventTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Storyboard x:Key="MyStoryBoard">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="rectangle">
            <EasingDoubleKeyFrame KeyTime="0:0:0.7" Value="164"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)" Storyboard.TargetName="rectangle">
            <EasingDoubleKeyFrame KeyTime="0:0:0.7" Value="-1"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</Window.Resources>

<Grid x:Name="LayoutRoot">
    <ListBox HorizontalAlignment="Left" Height="56" Margin="59,39,0,0" VerticalAlignment="Top" Width="147" ItemContainerStyle="{DynamicResource ListBoxItemStyle1}"/>
    <Rectangle x:Name="rectangle" Fill="Red" HorizontalAlignment="Left" Height="87" Margin="59,130,0,0" Stroke="Black" VerticalAlignment="Top" Width="147" RenderTransformOrigin="0.5,0.5">
        <Rectangle.RenderTransform>
            <TransformGroup>
                <ScaleTransform/>
                <SkewTransform/>
                <RotateTransform/>
                <TranslateTransform/>
            </TransformGroup>
        </Rectangle.RenderTransform>
    </Rectangle>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:13:59.217

如果您想在事件中调用情节提要，请将其设为资源并使用 StaticResource 来调用它。考虑到所有资源都在 App.xaml 中定义

```
<Application.Resources>
    <Storyboard x:Key="MyStoryboard">
        ....
    </Storyboard>
</Application.Resources> 
```

然后从选定的事件中调用它。

```
...

<EventTrigger RoutedEvent="Selected">
<BeginStoryboard Storyboard="{StaticResource MyStoryboard}"
x:Name="begin_MyStoryboard"/>
</EventTrigger> 
```

希望能帮助它

# c++ - 删除二进制字符串中的第一个 0

> ID：14010539
> 
> 赞同：0
> 
> 时间：2012-12-23T11:19:31.917
> 
> 标签：c++, string

给定一个二进制字符串，例如 10101011111001，我想删除第一个零（在上述情况下为第二个），如果没有 0，则删除任何 1，因此上述字符串的输出将为 1101011111001。

如果我这样做使用

```
 for( int i = 0 ; i < siz-1 ; i++ ){
      if( s[i] =='0' && bit ==1) {
         bit = 0;
      }else {
         ans = ans + s[i];
      }
 }  
 if( bit == 1  ) {
     cout << ans <<endl;
 }else {
     ans = ans + s[siz-1];
     cout << ans <<endl;
  } 
```

上面的解决方案给了我 TLE 和使用擦除功能的解决方案正常工作，是什么导致了这种行为？

注意：字符串的大小最大为 10^5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:09:23.410

```
pos = s.find('0');
if (pos == string::npos) {
  result = s.substr(1);
} else {
  result = s.substr(0, pos) + s.substr(pos+1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:03:52.507

您的代码看起来无论如何都需要在末尾打印字符串。如果是这种情况，那么另一种解决方案是检查每个字符并在它不是第一个零时打印它。

这样您就可以避免在打印之前对字符串进行所有操作。

附录：显然，当字符串只有一个时，考虑到不打印最后一个“1”的可能性，需要一个单字符缓冲区来实际打印前一个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T11:29:55.327

这是示例代码（不是正确的代码，也不是 c++，只是伪代码）

```
int count=0;
bool zerofound==false;
while(yourstring.contains('0'))
{
 if(yourstring.elementAt(count)=='0')
 {
   yourstring.replace('0','');
   zerofound==true;
   break;
 }
  count++;
}
if(!zerofound)
{
  yourstring.replaceAt(0,'');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T11:34:04.167

在循环中执行此操作会很慢：

```
ans = ans + s[i]; 
```

每次都需要复制字符串。相反，您应该使用：

```
ans.push_back(s[i]); 
```

这将就地修改字符串。这将为您提供线性运行时间，而不是现在的二次运行时间，这将是长字符串的重大改进。

为了获得最佳结果，您还可以放在`ans.reserve(siz);`循环之前，这样就不需要执行重新分配。

# java - 如何在android手机/设备中管理应用程序的空间

> ID：14010540
> 
> 赞同：1
> 
> 时间：2012-12-23T11:19:45.633
> 
> 标签：java, android

如何使用android api或robotium管理android手机/设备中的应用程序空间以进行自动设备测试。

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:26:32.483

Android 基本上适用于`DP`称为`density-independent pixels`. 它将根据您的分辨率计算您的屏幕密度。如果您的分辨率发生变化，`dp`对于其他设备将是相同的。

**dp**
Density-independent Pixels - 一个基于屏幕物理密度的抽象单位。这些单位与 160 dpi 屏幕相关，因此 1 dp 是 160 dpi 屏幕上的一个像素。dp与像素的比例会随着屏幕密度而变化，但不一定成正比。注意：编译器同时接受“dip”和“dp”，尽管“dp”与“sp”更一致。

**sp**
与比例无关的像素 - 这类似于 dp 单位，但它也根据用户的字体大小偏好进行缩放。建议您在指定字体大小时使用此单位，以便根据屏幕密度和用户偏好进行调整。

您可以[计算像素到 DP 的转换](http://labs.skinkers.com/content/android_dp_px_calculator/)。

请注意，永远不要`px`在您的布局文件中使用。有关更多信息，请阅读[资源管理](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)和[多屏幕支持](http://developer.android.com/guide/practices/screens_support.html)。

# node.js - 多个异步 http get 请求

> ID：14010543
> 
> 赞同：0
> 
> 时间：2012-12-23T11:20:14.777
> 
> 标签：node.js, asynchronous

我正在努力处理 Node.js 中的异步事件。

我的应用程序正在执行第一个 HTTP GET 请求，然后根据在响应正文中找到的一些信息，它循环了一定次数。

在每次迭代中，它调用一个函数，该函数发送其他 HTTP GET 请求并返回推送到元素数组中的结果。

我的问题是，当所有 http 请求完成后，我想要`console.log()`元素数组。这是我的代码：

```
http.get('mysite.com', function(res) {
    var body = '';
    res.on('data', function(chunk) {
        body += chunk;
    });
    res.on('end', function() {
        var last = 5,
            elements = [];
        for(var i=0; i < last; i++) {
            elements.push(myRequest(i));
        }
        console.log(elements);
        // Do some stuff with the elements array after it has been populated
    });
}).on('error', function(error) {
    console.log(error);
});

var myRequest = function(i) {
    http.get('mysite.com/page' + i, function(res) {
        var body = '';
        res.on('data', function(chunk) {
            body += chunk;
        });
        res.on('end', function() {
            // Do parsing here
            return parsed;
        });
    }).on('error', function(error) {
        console.log(error);
    });
}; 
```

我考虑过使用异步模块，但我不确定如何在这个用例中使用它。

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T11:47:23.270

我会使用异步库，也许会使用队列。但是如果你想手工做，没有测试过下面的任何东西，也不确定这是最干净的方法，但它可能会给你一些想法。

将回调传递给您的请求函数：

```
var myRequest = function(i, cb){
   ...
   res.on('end', function(){
      cb(parsed);
   });
} 
```

及以上 onEnd-call 看起来更像这样：

```
var last = 5, elements = [];

var rep = function(i){
  if( i < last ){
     myRequest(i, function( result ){
        elements.push(result);              
        rep(i+1);
     });
  } else {
    console.log(elements);
    // Do some stuff with the elements array after it has been populated
  }
}

res.on('end', function() {
   rep(0);
}); 
```

使用 async 会更好看。不过现在得跑了……

# delphi - 嵌入式 firebird 2.5 >> DBX 错误：驱动程序无法正确初始化

> ID：14010549
> 
> 赞同：2
> 
> 时间：2012-12-23T11:21:50.920
> 
> 标签：delphi, firebird, dbexpress

我正在尝试使用 Delphi XE 连接到 firebird 2.5 Embedded version(win32)，单击测试连接时出现错误

![在此处输入图像描述](../Images/751d4e5d188a6c42ac4ca53292c5274a.png)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T12:35:16.037

LibraryName 和 VendorLib 应该在搜索路径中

将 LibraryName “我正在使用来自 [https://sites.google.com/site/dbxfirebird/home](https://sites.google.com/site/dbxfirebird/home)的 dbx4fb.dll ”和 VendorLib “fbclient.dll 创建于 firebird 目录\bin”复制到搜索路径“for delphi xe：程序文件\Embarcadero\RAD Studio\8.0\bin"

# string - 如何在 Python 3 中转换字节和字符串？

> ID：14010551
> 
> 赞同：82
> 
> 时间：2012-12-23T11:22:01.973
> 
> 标签：string, python-3.x, byte

这是一个 Python 101 类型的问题，但当我尝试使用一个似乎将我的字符串输入转换为字节的包时，它让我困惑了一段时间。

正如您将在下面看到的那样，我为自己找到了答案，但我觉得值得在这里记录，因为我花了很长时间才发现正在发生的事情。它似乎对 Python 3 是通用的，所以我没有提到我正在使用的原始包；它似乎不是一个错误（只是特定包的`.tostring()`方法显然*没有*产生我所理解的字符串......）

我的测试程序是这样的：

```
import mangler                                 # spoof package

stringThing = """
<Doc>
    <Greeting>Hello World</Greeting>
    <Greeting>你好</Greeting>
</Doc>
"""

# print out the input
print('This is the string input:')
print(stringThing)

# now make the string into bytes
bytesThing = mangler.tostring(stringThing)    # pseudo-code again

# now print it out
print('\nThis is the bytes output:')
print(bytesThing) 
```

这段代码的输出给出了这个：

```
This is the string input:

<Doc>
    <Greeting>Hello World</Greeting>
    <Greeting>你好</Greeting>
</Doc>

This is the bytes output:
b'\n<Doc>\n    <Greeting>Hello World</Greeting>\n    <Greeting>\xe4\xbd\xa0\xe5\xa5\xbd</Greeting>\n</Doc>\n' 
```

因此，需要能够在字节和字符串之间进行转换，以避免最终将非 ascii 字符变成 gobbledegook。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-12-23T11:22:01.973

上述代码示例中的“mangler”正在执行与此等效的操作：

```
bytesThing = stringThing.encode(encoding='UTF-8') 
```

还有其他方法可以写这个（特别是使用`bytes(stringThing, encoding='UTF-8')`，但上面的语法很明显发生了什么，以及如何恢复字符串：

```
newStringThing = bytesThing.decode(encoding='UTF-8') 
```

当我们这样做时，原始字符串被恢复。

请注意，使用`str(bytesThing)`只是转录所有 gobbledegook 而不将其转换回 Unicode，除非您特别请求 UTF-8，即`str(bytesThing, encoding='UTF-8')`. 如果未指定编码，则不会报告错误。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-05-22T19:03:22.127

在 python3 中，有一个`bytes()`方法与`encode()`.

```
str1 = b'hello world'
str2 = bytes("hello world", encoding="UTF-8")
print(str1 == str2) # Returns True 
```

我没有在文档中读到任何关于此的内容，但也许我没有找对地方。`encode`通过这种方式，您可以显式地将字符串转换为字节流，并且比使用and更具可读性`decode`，并且不必`b`在引号前加上前缀。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-05-10T14:07:11.077

> 这是一个 Python 101 类型的问题，

这是一个简单的问题，但答案并不那么简单。

* * *

在python3中，一个“bytes”对象代表一个字节序列，一个“string”对象代表一个unicode码点序列。

要在“bytes”到“string”以及从“string”到“bytes”之间进行转换，请使用 bytes.decode 和 string.encode 函数。这些函数有两个参数，一个编码和一个错误处理策略。

可悲的是，有很多情况下字节序列用于表示文本，但不一定明确定义正在使用的编码。以类 unix 系统上的文件名为例，就内核而言，它们是具有少量特殊值的字节序列，在大多数现代发行版上，大多数文件名将是 UTF-8，但不能保证所有文件名都会是。

如果您想编写强大的软件，那么您需要仔细考虑这些参数。您需要仔细考虑字节应该采用什么编码以及如何处理它们不是您认为应该采用的编码的有效字节序列的情况。Python 默认为 UTF-8并在任何不是有效 UTF-8 的字节序列上出错。

> 打印（字节事物）

Python 使用“repr”作为字符串的后备转换。repr 尝试生成将重新创建对象的 python 代码。在字节对象的情况下，这意味着在可打印的 ascii 范围之外转义字节。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-09-29T17:31:37.460

**试试这个：**

```
StringVariable=ByteVariable.decode('UTF-8','ignore') 
```

**测试类型：**

```
print(type(StringVariable)) 
```

> 这里 'StringVariable' 表示为一个字符串。'ByteVariable' 表示为字节。它与质疑变量无关..

# php - AS3：传递给 URLVariables.decode() 的字符串必须是包含名称/值对的 URL 编码查询字符串

> ID：14010554
> 
> 赞同：0
> 
> 时间：2012-12-23T11:22:24.087
> 
> 标签：php, actionscript-3, flash

我吓坏了。在网上搜索了一个小时，没有任何帮助。我正在尝试将 PHP 数据加载到闪存中，但它不起作用。这是as3代码：

```
var adressS:URLRequest = new   URLRequest("adress/file.php");

var scriptLoader:URLLoader = new URLLoader();

        adressS.method = URLRequestMethod.POST;

        scriptLoader.dataFormat = URLLoaderDataFormat.VARIABLES; 
        scriptLoader.load(adressS);

        scriptLoader.addEventListener(Event.COMPLETE, handleLoadSuccessful);
        scriptLoader.addEventListener(IOErrorEvent.IO_ERROR, handleLoadError);

        function handleLoadSuccessful(e:Event):void {
            if(scriptLoader.data.resulte == "wrong") {
                error_mc.visible = true;
                    error_mc.gotoAndStop(1);
            } else { ... } 
```

这是PHP：

```
<?php
    if(!isset($_SESSION['login'])) {
    echo 'resulte='.'wrong';
}
?> 
```

我明白了

> 结果=错误

来自 php，所以我想这不是问题，但是当我尝试运行 flash 文件时，我得到输出错误：

> 错误：错误 #2101：传递给 URLVariables.decode() 的字符串必须是包含名称/值对的 URL 编码查询字符串。在 Flash.net::URLVariables/decode() 的 Error$/throwError() 在 flash.net::URLVariables$iinit() 在 flash.net::URLLoader/flash.net:URLLoader::onComplete()

我不知道我做错了什么。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:13:37.597

```
scriptLoader.dataFormat = 'variables'; 
```

// flash 的错误，害了我几个小时。

# android - 无法在 geoPoint 上创建 OverlayItem 其继续压碎应用程序

> ID：14010555
> 
> 赞同：0
> 
> 时间：2012-12-23T11:22:33.653
> 
> 标签：android, google-maps, geolocation, google-maps-markers, itemizedoverlay

在我的应用程序中，我要求用户在自动完成文本框中输入一个位置，我能够从 JSON 对象成功获取位置，并且我成功地提取了经度和纬度并为这些位置创建了一个 GeoPoint。我在为所需的 GeoPoint 创建覆盖项时遇到问题。

以下是我在 SiteOverlay 构造函数中的 ItemziedOverlay 类的代码，我正在使用新的位置覆盖来绘制和调用 populate() 但没有成功，它一直说 Null 点 ItemizedOverlay。

```
private class SitesOverlay extends ItemizedOverlay<OverlayItem> {

    private Drawable marker = null;
    private OverlayItem inDrag = null;
    private ImageView dragImage = null;
    private int xDragImageOffset = 0;
    private int yDragImageOffset = 0;
    private int xDragTouchOffset = 0;
    private int yDragTouchOffset = 0;

    public SitesOverlay(Drawable marker) {
        super(marker);
        this.marker = marker;

        dragImage = (ImageView) findViewById(R.id.drag);
        xDragImageOffset = dragImage.getDrawable().getIntrinsicWidth() / 2;
        yDragImageOffset = dragImage.getDrawable().getIntrinsicHeight();

        // items.add(new OverlayItem(getPoint(24.893379, 67.028061),
        // "Karachi", "Sindh, Pakistan"));

    }

    public SitesOverlay(Drawable marker, OverlayItem newlocationItem) {
        super(marker);
        this.marker = marker;

        dragImage = (ImageView) findViewById(R.id.drag);
        xDragImageOffset = dragImage.getDrawable().getIntrinsicWidth() / 2;
        yDragImageOffset = dragImage.getDrawable().getIntrinsicHeight();

        // items.add(new OverlayItem(getPoint(24.893379, 67.028061),
        // "Karachi", "Sindh, Pakistan"));

        items.add(newlocationItem);
        populate();

    }

    @Override
    protected boolean onTap(int index) {
        // TODO Auto-generated method stub

        OverlayItem item = items.get(index);
        AlertDialog.Builder dialog = new AlertDialog.Builder(
                getApplicationContext());
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());
        dialog.show();

        return super.onTap(index);
    }

    @Override
    protected OverlayItem createItem(int i) {
        return (items.get(i));
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        super.draw(canvas, mapView, shadow);

        boundCenterBottom(marker);
    }

    @Override
    public int size() {
        return (items.size());
    }

    @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView) {
        final int action = event.getAction();
        final int x = (int) event.getX();
        final int y = (int) event.getY();
        boolean result = false;

        if (action == MotionEvent.ACTION_DOWN) {
            for (OverlayItem item : items) {
                Point p = new Point(0, 0);

                map.getProjection().toPixels(item.getPoint(), p);

                if (hitTest(item, marker, x - p.x, y - p.y)) {
                    result = true;
                    inDrag = item;
                    items.remove(inDrag);
                    populate();

                    xDragTouchOffset = 0;
                    yDragTouchOffset = 0;

                    setDragImagePosition(p.x, p.y);
                    dragImage.setVisibility(View.VISIBLE);

                    xDragTouchOffset = x - p.x;
                    yDragTouchOffset = y - p.y;

                    break;
                }
            }
        } else if (action == MotionEvent.ACTION_MOVE && inDrag != null) {
            setDragImagePosition(x, y);
            result = true;
        } else if (action == MotionEvent.ACTION_UP && inDrag != null) {
            dragImage.setVisibility(View.GONE);

            GeoPoint pt = map.getProjection().fromPixels(
                    x - xDragTouchOffset, y - yDragTouchOffset);
            OverlayItem toDrop = new OverlayItem(pt, inDrag.getTitle(),
                    inDrag.getSnippet());
            Toast.makeText(
                    MainActivity.this,
                    "Latitude " + pt.getLatitudeE6() + "," + " "
                            + "Longitude " + pt.getLongitudeE6(),
                    Toast.LENGTH_SHORT).show();
            items.add(toDrop);
            populate();

            inDrag = null;
            result = true;

            /*
             * //--- Get the name of the location by Longitude and
             * latitude--- Geocoder geoCoder = new
             * Geocoder(getBaseContext(), Locale.getDefault()); try {
             * List<Address> addresses = geoCoder.getFromLocation(
             * pt.getLatitudeE6() / 1E6, pt.getLongitudeE6() / 1E6, 1);
             * String add = ""; if (addresses.size() > 0) { for (int i=0;
             * i<addresses.get(0).getMaxAddressLineIndex(); i++) add +=
             * addresses.get(0).getAddressLine(i) + "\n"; }
             * Toast.makeText(getBaseContext(), add,
             * Toast.LENGTH_SHORT).show();
             * 
             * } catch (IOException e) { e.printStackTrace(); }
             */

        }

        return (result || super.onTouchEvent(event, mapView));
    }

    private void setDragImagePosition(int x, int y) {
        RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams) dragImage
                .getLayoutParams();

        lp.setMargins(x - xDragImageOffset - xDragTouchOffset, y
                - yDragImageOffset - yDragTouchOffset, 0, 0);
        dragImage.setLayoutParams(lp);
    }

}

class GetPlaces extends AsyncTask<String, Void, ArrayList<String>> {

    @Override
    // three dots is java for an array of strings
    protected ArrayList<String> doInBackground(String... args) {

        Log.d("gottaGo", "doInBackground");

        ArrayList<String> predictionsArr = new ArrayList<String>();

        try {

            URL googlePlaces = new URL(
                    // URLEncoder.encode(url,"UTF-8");
                    "https://maps.googleapis.com/maps/api/place/autocomplete/json?input="
                            + URLEncoder.encode(args[0].toString(), "UTF-8")
                            + "&types=geocode&language=en&sensor=true&key=AIzaSyBBILczt124ZWZHlSYsB6hb_Fqjb2nFEaE");
            URLConnection tc = googlePlaces.openConnection();
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    tc.getInputStream()));

            String line;
            StringBuffer sb = new StringBuffer();
            // take Google's legible JSON and turn it into one big string.
            while ((line = in.readLine()) != null) {
                sb.append(line);
            }
            // turn that string into a JSON object
            JSONObject predictions = new JSONObject(sb.toString());
            // now get the JSON array that's inside that object
            JSONArray ja = new JSONArray(
                    predictions.getString("predictions"));

            for (int i = 0; i < ja.length(); i++) {
                JSONObject jo = (JSONObject) ja.get(i);
                // add each entry to our array
                predictionsArr.add(jo.getString("description"));
            }
        } catch (IOException e) {

            Log.e("YourApp", "GetPlaces : doInBackground", e);

        } catch (JSONException e) {

            Log.e("YourApp", "GetPlaces : doInBackground", e);

        }

        return predictionsArr;

    }

    // then our post

    @Override
    protected void onPostExecute(ArrayList<String> result) {

        Log.d("YourApp", "onPostExecute : " + result.size());
        // update the adapter
        adapter = new ArrayAdapter<String>(getBaseContext(),
                R.layout.item_list);
        adapter.setNotifyOnChange(true);
        // attach the adapter to textview
        textView.setAdapter(adapter);

        for (String string : result) {

            Log.d("YourApp", "onPostExecute : result = " + string);
            adapter.add(string);
            adapter.notifyDataSetChanged();

        }

        Log.d("YourApp",
                "onPostExecute : autoCompleteAdapter" + adapter.getCount());

    }

} 
```

我的活动代码

```
 import java.io.BufferedReader;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.InputStreamReader;
    import java.net.URL;
    import java.net.URLConnection;
    import java.net.URLEncoder;
    import java.util.ArrayList;
    import java.util.List;
    import org.apache.http.HttpEntity;
    import org.apache.http.HttpResponse;
    import org.apache.http.client.ClientProtocolException;
    import org.apache.http.client.HttpClient;
    import org.apache.http.client.methods.HttpPost;
    import org.apache.http.impl.client.DefaultHttpClient;
    import org.json.JSONArray;
    import org.json.JSONException;
    import org.json.JSONObject;
    import android.app.AlertDialog;
    import android.graphics.Canvas;
    import android.graphics.Point;
    import android.graphics.drawable.Drawable;
    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.text.Editable;
    import android.text.TextWatcher;
    import android.util.Log;
    import android.view.KeyEvent;
    import android.view.Menu;
    import android.view.MenuItem;
    import android.view.MotionEvent; 
    import android.view.View;
    import android.widget.ArrayAdapter;
    import android.widget.AutoCompleteTextView;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.ImageView;
    import android.widget.RelativeLayout;
   import android.widget.Toast;
   import com.google.android.maps.GeoPoint;
   import com.google.android.maps.ItemizedOverlay;
   import com.google.android.maps.MapActivity;
   import com.google.android.maps.MapController;
   import com.google.android.maps.MapView;
   import com.google.android.maps.MyLocationOverlay;
   import com.google.android.maps.OverlayItem;

   public class MainActivity extends MapActivity {
private MapView map = null;
private MyLocationOverlay me = null;
Button btn_Go;
Drawable marker;
EditText txtSearch;

AutoCompleteTextView textView;

private static final String API_KEY = "0f7ZWSUbQaZNR9_csQVFdRHpjnARCHAR1WbkFAQ";
ArrayAdapter<String> adapter;

private List<OverlayItem> items = new ArrayList<OverlayItem>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    map = (MapView) findViewById(R.id.map);
    btn_Go = (Button) findViewById(R.id.BtnSearch);

    // txtSearch = (EditText) findViewById(R.id.txt_searchbox);
    // Set the default Location of push pin
    map.getController().setCenter(getPoint(24.893379, 67.028061));
    map.setBuiltInZoomControls(true);

    marker = getResources().getDrawable(R.drawable.pushpin);

    marker.setBounds(0, 0, marker.getIntrinsicWidth(),
            marker.getIntrinsicHeight());

    map.getOverlays().add(new SitesOverlay(marker));

    me = new MyLocationOverlay(this, map);

    map.getOverlays().add(me);

    adapter = new ArrayAdapter<String>(this, R.layout.item_list);
    textView = (AutoCompleteTextView) findViewById(R.id.txtSearchBox);
    adapter.setNotifyOnChange(true);
    textView.setAdapter(adapter);
    textView.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            if (count % 3 == 1) {
                adapter.clear();
                GetPlaces task = new GetPlaces();
                // now pass the argument in the textview to the task
                task.execute(textView.getText().toString());
            }
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        public void afterTextChanged(Editable s) {

        }

    });

}

public void GoTolocation(View v) {

    String value = textView.getText().toString();
    // Do something with value!
    Log.d("value", value);
    MapController mc = map.getController();
    JSONObject Response = getLocationInfo(value);
    GeoPoint p = getGeoPoint(Response);
    // map.getOverlays().remove(0);
    // map.getController().setCenter(getPoint(24.893379, 67.028061));
    map.getController().setCenter(p);
    map.setBuiltInZoomControls(true);
    marker = getResources().getDrawable(R.drawable.pushpin);
    marker.setBounds(0, 0, marker.getIntrinsicWidth(),
            marker.getIntrinsicHeight());
    OverlayItem newlocation = new OverlayItem(p, value,
            "You Selected This place");
    SitesOverlay s = new SitesOverlay(marker, newlocation);
    // s.SetPoint(newlocation);
    map.getOverlays().add(s);
    me = new MyLocationOverlay(this, map);
    map.getOverlays().add(me);
    mc.setZoom(10);
    mc.animateTo(p);
    map.invalidate();

}

public static JSONObject getLocationInfo(String address) {
    StringBuilder stringBuilder = new StringBuilder();
    try {

        address = address.replaceAll(" ", "%20");

        HttpPost httppost = new HttpPost(
                "http://maps.google.com/maps/api/geocode/json?address="
                        + address + "&sensor=false");
        HttpClient client = new DefaultHttpClient();
        HttpResponse response;
        stringBuilder = new StringBuilder();

        response = client.execute(httppost);
        HttpEntity entity = response.getEntity();
        InputStream stream = entity.getContent();
        int b;
        while ((b = stream.read()) != -1) {
            stringBuilder.append((char) b);
        }
    } catch (ClientProtocolException e) {
    } catch (IOException e) {
    }

    JSONObject jsonObject = new JSONObject();
    try {
        jsonObject = new JSONObject(stringBuilder.toString());
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return jsonObject;
}

public static GeoPoint getGeoPoint(JSONObject jsonObject) {

    Double lon = new Double(0);
    Double lat = new Double(0);

    try {

        lon = ((JSONArray) jsonObject.get("results")).getJSONObject(0)
                .getJSONObject("geometry").getJSONObject("location")
                .getDouble("lng");

        lat = ((JSONArray) jsonObject.get("results")).getJSONObject(0)
                .getJSONObject("geometry").getJSONObject("location")
                .getDouble("lat");

    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return new GeoPoint((int) (lat * 1E6), (int) (lon * 1E6));

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.location:
        Toast.makeText(this, "You pressed the location!", Toast.LENGTH_LONG)
                .show();
        return true;

    case R.id.street:
        Toast.makeText(this, "You pressed the street!", Toast.LENGTH_LONG)
                .show();
        if (map.isSatellite() == true) {
            map.setSatellite(false);
        }
        return true;

    case R.id.satallite:
        Toast.makeText(this, "You pressed the satallite!",
                Toast.LENGTH_LONG).show();
        if (map.isSatellite() == false) {
            map.setSatellite(true);
        }

        return true;

    default:
        return super.onOptionsItemSelected(item);
    }

}

@Override
public void onResume() {
    super.onResume();

    me.enableCompass();
}

@Override
public void onPause() {
    super.onPause();

    me.disableCompass();
}

@Override
protected boolean isRouteDisplayed() {
    return (false);
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_S) {
        map.setSatellite(!map.isSatellite());
        return (true);
    } else if (keyCode == KeyEvent.KEYCODE_Z) {
        map.displayZoomControls(true);
        return (true);
    }

    return (super.onKeyDown(keyCode, event));
}

private GeoPoint getPoint(double lat, double lon) {
    return (new GeoPoint((int) (lat * 1000000.0), (int) (lon * 1000000.0)));
} 
```

这是我的主要 xml 代码

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content" 
android:layout_height="wrap_content">

<com.google.android.maps.MapView
    android:id="@+id/map"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:apiKey="0f7ZWSUbQaZNR9_csQVFdRHpjnARCHAR1WbkFAQ"
    android:clickable="true" />

<ImageView android:id="@+id/drag" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:src="@drawable/pushpin"
    android:visibility="gone" 
    android:contentDescription="@string/todo"/>

<Button
    android:id="@+id/BtnSearch"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:onClick="GoTolocation"
    android:text="Go" />

<AutoCompleteTextView
    android:id="@+id/txtSearchBox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_toLeftOf="@+id/BtnSearch"
    android:ems="10"
    android:hint="Search Here" >

    <requestFocus />
</AutoCompleteTextView>

    </RelativeLayout> 
```

这是我的主要文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.mapview_dragdrop_marker"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <uses-library android:name="com.google.android.maps" />

    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

下面是显示错误的 logcat。

```
 12-23 16:02:03.647: E/AndroidRuntime(788): FATAL EXCEPTION: main
   12-23 16:02:03.647: E/AndroidRuntime(788): java.lang.NullPointerException
   12-23 16:02:03.647: E/AndroidRuntime(788):   at   com.google.android.maps.ItemizedOverlay.getIndexToDraw(ItemizedOverlay.java:211)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at com.google.android.maps.ItemizedOverlay.draw(ItemizedOverlay.java:240)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at com.example.mapview_dragdrop_marker.MainActivity$SitesOverlay.draw(MainActivity.java:393)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at com.google.android.maps.Overlay.draw(Overlay.java:179) 
   12-23 16:02:03.647: E/AndroidRuntime(788):   at com.google.android.maps.OverlayBundle.draw(OverlayBundle.java:42)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at com.google.android.maps.MapView.onDraw(MapView.java:530)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.view.View.draw(View.java:6880)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.view.View.draw(View.java:6883)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.widget.FrameLayout.draw(FrameLayout.java:357)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.view.View.draw(View.java:6883)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.widget.FrameLayout.draw(FrameLayout.java:357)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1862)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.view.ViewRoot.draw(ViewRoot.java:1522)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.view.ViewRoot.performTraversals(ViewRoot.java:1258)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.os.Handler.dispatchMessage(Handler.java:99)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.os.Looper.loop(Looper.java:130)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at android.app.ActivityThread.main(ActivityThread.java:3683)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at java.lang.reflect.Method.invokeNative(Native Method)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at java.lang.reflect.Method.invoke(Method.java:507)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at                    com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
   12-23 16:02:03.647: E/AndroidRuntime(788):   at dalvik.system.NativeStart.main(Native Method) 
```

我不知道我在做什么错我什至填充列表以生成覆盖但它仍然给我错误

我正在使用 googleapi 10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:40:43.853

您的代码似乎有效（没有发现任何问题）。

尝试使用其他非常好的 google.maps 实现版本：

**MyMapViewActivity**

```
public class MyMapViewActivity extends MapActivity {
public static final int MENU_MY_LOCATION = 0;
public static final int MENU_SEARCH = MENU_MY_LOCATION+1;
public static final int MENU_SUBMIT = MENU_MY_LOCATION+2;

MapView myMapView = null;
MapController mc = null;
OverlayItem myMarker;
MyItemizedOverlay mItemizedoverlay;
int mInputId;

MyLocationOverlay myLoc = null;

GeoPoint mCurrentPoint;

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map);

    myMapView = (MapView) findViewById(R.id.mapView);

    myMapView.setBuiltInZoomControls(true);
    myMapView.setStreetView(true);

    mc = myMapView.getController();
    mc.setZoom(17);
    myLoc = new CustomMyLocationOverlay(this, myMapView);
    myLoc.runOnFirstFix(new Runnable() {
        public void run() {
            if (mCurrentPoint.equals(new GeoPoint(0,0))){
                mc.animateTo(myLoc.getMyLocation());
                mCurrentPoint = myLoc.getMyLocation();
            } 
            // new
            // SearchClicked(mapSearchBox.getText().toString()).execute();

        }
    });

    myMapView.getOverlays().add(myLoc);
    myMapView.postInvalidate();

    zoomToMyLocation();

    Drawable drawable = this.getResources().getDrawable(R.drawable.target);
    mItemizedoverlay = new MyItemizedOverlay(drawable, this);

    Intent i = getIntent();
    Bundle extras = i.getExtras();
    mInputId = extras.getInt("input_id");
    String defaultLocation = extras.getString("default_location");
    defaultLocation = defaultLocation.replace("[", "").replace("]", "");
    String[] defLocSp = defaultLocation.split(",");

    double lat = Double.parseDouble(defLocSp[0]);
    double lon = Double.parseDouble(defLocSp[1]);

    mCurrentPoint = new GeoPoint((int)lat,(int)lon);

    if (!mCurrentPoint.equals(new GeoPoint(0,0))){
        mc.animateTo(mCurrentPoint);
        setMarker();
    } 
}

@Override
protected void onResume() {
    super.onResume();

    myLoc.enableCompass();
    myLoc.enableMyLocation();

}

@Override
protected void onPause() {
    super.onPause();

    myLoc.disableCompass();
    myLoc.disableMyLocation();
}

public void zoomToMyLocation() {
    mCurrentPoint = myLoc.getMyLocation();
    if (mCurrentPoint != null) {
        myMapView.getController().animateTo(mCurrentPoint);
        // myMapView.getController().setZoom(10);
    }
}

private class SearchClicked extends AsyncTask<Void, Void, Boolean> {
    private String toSearch;
    private Address address;

    public SearchClicked(String toSearch) {
        this.toSearch = toSearch;
    }

    @Override
    protected Boolean doInBackground(Void... voids) {

        try {
            Geocoder geocoder = new Geocoder(getApplicationContext(), Locale.UK);
            List<Address> results = geocoder.getFromLocationName(toSearch, 1);

            if (results.size() == 0) {
                return false;
            }

            address = results.get(0);

              // Now do something with this GeoPoint:
            mCurrentPoint = new GeoPoint((int) (address.getLatitude() * 1E6), (int) (address.getLongitude() * 1E6));
            //Log.e("", "geocoded: "+mCurrentPoint.toString());
            myMapView.getController().animateTo(mCurrentPoint);

            myMarker = new OverlayItem(mCurrentPoint, "Submit", toSearch);
            mItemizedoverlay.addOverlay(myMarker);
            myMapView.getOverlays().add(mItemizedoverlay);

        } catch (Exception e) {
            Log.e("", "Something went wrong: ", e);
            return false;
        }
        return true;
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    MenuItem mi;
    mi = menu.add(0, MENU_MY_LOCATION, 0, "My Location");
    mi.setIcon(android.R.drawable.ic_menu_mylocation);

    mi = menu.add(0, MENU_SEARCH, 0, "Search");
    mi.setIcon(android.R.drawable.ic_menu_search);

    mi = menu.add(0, MENU_SUBMIT, 0, "Submit");
    mi.setIcon(android.R.drawable.ic_menu_add);

    return true;
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    menu.clear();

    MenuItem mi;
    mi = menu.add(0, MENU_MY_LOCATION, 0, "My Location");
    mi.setIcon(android.R.drawable.ic_menu_mylocation);

    mi = menu.add(0, MENU_SEARCH, 0, "Search");
    mi.setIcon(android.R.drawable.ic_menu_search);

    mi = menu.add(0, MENU_SUBMIT, 0, "Submit");
    mi.setIcon(android.R.drawable.ic_menu_add);

    return super.onPrepareOptionsMenu(menu);
}

@Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {
    switch(item.getItemId()) {
    case MENU_MY_LOCATION:  
        zoomToMyLocation();
        return true;

    case MENU_SEARCH:   
        searchLocation();
        return true;

    case MENU_SUBMIT:
        submitLocation();

        return true;

    default:
        return false;
    }
}

public void searchLocation(){
    final EditText input = new EditText(this);

    AlertDialog.Builder userInputDialogBuilder = new AlertDialog.Builder(this);
    userInputDialogBuilder.setTitle("Search Location")
    .setMessage("Enter Location:")
    .setView(input)
    .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {

            if (!input.getText().toString().equals("")){
                new SearchClicked(input.getText().toString()).execute();            
            }

        }
    }).setOnCancelListener(new Dialog.OnCancelListener() {
        public void onCancel(DialogInterface dialog) {
            //mUserInputDialog = null;
        }
    }).show();
}

public void submitLocation(){
    if (null != mCurrentPoint){
        Log.e("submit","Current point: "+mCurrentPoint.toString());

        Intent data = new Intent();
        Bundle extras = new Bundle();
        extras.putDouble("lat", mCurrentPoint.getLatitudeE6());
        extras.putDouble("lon", mCurrentPoint.getLongitudeE6());
        extras.putInt("input_id", mInputId);
        data.putExtras(extras);
        setResult(RESULT_OK,data);//Here I am Setting the Requestcode 1, you can put according to your requirement
        finish();
    }
}

public void setCurrentLocation(GeoPoint point){
    mCurrentPoint = point;

}

public void setMarker(){
    myMarker = new OverlayItem(mCurrentPoint, "Submit", "");
    mItemizedoverlay.clearOverlay();
    mItemizedoverlay.addOverlay(myMarker);
    myMapView.getOverlays().add(mItemizedoverlay);
}
} 
```

**MyItemizedOverlay**

```
 public class MyItemizedOverlay extends ItemizedOverlay<OverlayItem> {
private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
Context mContext;

public MyItemizedOverlay(Drawable defaultMarker) {
    super(boundCenterBottom(defaultMarker));
}

public void addOverlay(OverlayItem overlay) {
    mOverlays.add(overlay);
    populate();
}

public void clearOverlay(){
    mOverlays.clear();
}

@Override
protected OverlayItem createItem(int i) {
  return mOverlays.get(i);
}

@Override
public int size() {
  return mOverlays.size();
}

public MyItemizedOverlay(Drawable defaultMarker, Context context) {
    super(boundCenterBottom(defaultMarker));
    mContext = context;
}

@Override
protected boolean onTap(int index) {
  final OverlayItem item = mOverlays.get(index);

AlertDialog.Builder userInputDialogBuilder = new AlertDialog.Builder(mContext);
    userInputDialogBuilder.setTitle(item.getTitle())
    .setMessage(item.getSnippet())
    .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {

            ((CobytMapViewActivity)mContext).setCurrentLocation(item.getPoint());
            ((CobytMapViewActivity)mContext).submitLocation();

        }
    }).setOnCancelListener(new Dialog.OnCancelListener() {
        public void onCancel(DialogInterface dialog) {
            //mUserInputDialog = null;
        }
    }).show();
  return true;
}
} 
```

# eclipse - 设置 Xuggler 的初学者指南

> ID：14010557
> 
> 赞同：5
> 
> 时间：2012-12-23T11:22:41.437
> 
> 标签：eclipse, maven, jar, pom.xml, xuggler

要与 Xuggler 合作，您需要`xuggle-xuggler-5.4.jar`. 据制作这个的人说，大多数用户只需要上面提到的 JAR 文件。然而，这就是他们所说的在**没有**Maven 或 Ivy 的情况下使用 Xuggler：

> ## 在没有 Apache Maven 或 Apache Ivy 的情况下使用 Xuggler
> 
> 你是什​​么……困在 2003 年？无论如何，如果你坚持这一点，Xuggler 的预编译二进制文件（包括本机版本）可以在[这里找到](http://xuggle.googlecode.com/svn/trunk/repo/share/java/xuggle/xuggle-xuggler/)。确保 xuggle-xuggler.jar 及其依赖项包含在您的 Java 类路径中。查看与 Xuggler 版本一起分发的**xuggle-xugger-*.pom**文件，您可以使用它来查找（小）依赖 jar 集，并下载它们。

我下载了`xuggle-xuggler.jar`最新版本 5.4 的文件，但我不理解它的 pom 文件。

*   他在谈论什么**依赖关系？***   接下来，如何下载这些**依赖项**？*   获得这些依赖项后，如何开始在 Eclipse 中工作？

* * *

* * *

## 下载依赖后更新

我有以下目录结构：
![在此处输入图像描述](../Images/c16b600b56a8715771f9c501b68b05d9.png)

*   `xuggle-xuggler-5.4.jar`存储在**E:\xuggle**![在此处输入图像描述](../Images/06f8270011b8fbd4f784ed01ec6cacb7.png)
*   各种`xuggler dependencies`存储在**E:\xuggle\xuggle-dependencies**

## 问题：

*   如何开始在 Eclipse 中使用 Xuggler？我必须设置哪些路径以及这些路径具有哪些值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T13:59:45.067

以下文件列出了 xuggle 依赖的其他 jar：

*   [常春藤.xml](http://xuggle.googlecode.com/svn/trunk/repo/share/java/xuggle/xuggle-xuggler/5.4/ivy-5.4.xml)
*   [pom.xml](http://xuggle.googlecode.com/svn/trunk/repo/share/java/xuggle/xuggle-xuggler/5.4/xuggle-xuggler-5.4.pom)

您可以阅读这些内容，然后从适当的存储库中手动检索它们，但我会提交它更简单地开始使用依赖管理器。

你问如何下载这些依赖，嗯 ivy 有一个方便的[命令行](http://ant.apache.org/ivy/history/latest-milestone/standalone.html)操作模式。（见下面的例子）

Eclipse 集成非常困难......一旦您下载了 jar，您可以尝试生成“.classpath”文件，或者只是通过 Eclipse GUI 手动添加每个 jar。我不推荐这种方法的原因是因为 Maven 和 Ivy 的 Eclipse 插件会自动为您执行此操作。

# 例子

从命令行运行 ivy，如下所示：

```
java -jar ivy.jar -settings ivysettings.xml -dependency xuggle xuggle-xuggler 5.4 -retrieve "lib/[artifact]-[revision].[ext]" 
```

它会将 xuggle 及其所有依赖项检索到“lib”目录中，如下所示：

```
├── ivysettings.xml
└── lib
    ├── commons-cli-1.1.jar
    ├── logback-classic-1.0.0.jar
    ├── logback-core-1.0.0.jar
    ├── slf4j-api-1.6.4.jar
    └── xuggle-xuggler-5.4.jar 
```

## 常春藤设置.xml

该文件告诉 ivy 从[Maven Central](http://search.maven.org/)或 Xuggle 项目提供的 Maven 存储库中检索 jar。

```
<ivysettings>
    <settings defaultResolver="repos" />
    <resolvers>
        <chain name="repos">
            <ibiblio name="central" m2compatible="true"/>
            <ibiblio name="xuggle" m2compatible="true" root="http://xuggle.googlecode.com/svn/trunk/repo/share/java"/>
        </chain>
    </resolvers>
</ivysettings> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T12:04:25.693

不要与 Maven 对抗，拥抱它。如今，所有主要的构建系统都与 maven 兼容（Maven、Ivy、Gradle、Grape、Buildr ...）。但是您可以使用 Eclipse 中的 Maven：

使用以下内容创建一个名为 pom.xml 的文件：

```
<project>
 <groupId>com.foo<groupId>      <!-- change these -->
 <artifactId>foo</artifactId>   <!-- parameters to whatever -->
 <version>1.0-SNAPSHOT</version><!-- you like -->
 <repositories>
  <repository>
   <id>xuggle repo</id>
   <url>http://xuggle.googlecode.com/svn/trunk/repo/share/java/</url>
  </repository>
 </repositories>
 <dependencies>
  <dependency>
   <groupId>xuggle</groupId>
   <artifactId>xuggle-xuggler</artifactId>
   <version>5.2</version>
  </dependency>
 </dependencies>
</project> 
```

安装[m2e](http://www.eclipse.org/m2e/)扩展，并从 Eclipse 中执行`"File > Import ... > Existing Maven Projects"`. 在对话框中，选择包含 pom.xml 的文件夹。

确保文件夹的布局是这样的：

```
pom.xml
src/main/java // sources go here
src/test/java // test sources go here 
```

然后你应该有一个具有所需依赖项的工作 Eclipse 项目。

* * *

更新后更新：

查看此文件时可以看到依赖项：http: [//xuggle.googlecode.com/svn/trunk/repo/share/java/xuggle/xuggle-xuggler/5.2/xuggle-xuggler-5.2.pom](http://xuggle.googlecode.com/svn/trunk/repo/share/java/xuggle/xuggle-xuggler/5.2/xuggle-xuggler-5.2.pom)

*   commons-cli（用于命令行处理的实用程序库）
*   logback（一个日志框架）
*   junit（一个测试框架）

Maven 将负责为您加载这些依赖项。如果您使用上面建议的 m2e 插件，Eclipse 也会如此。

* * *

如果您绝对不想这样做，则必须手动下载依赖项。查看上面的 pom 文件，注意依赖的名称和版本，在[http://mvnrepository.com/](http://mvnrepository.com/)上查找并下载它们，例如这是 slf4j-api 的页面：http: [//mvnrepository.com /artifact/org.slf4j/slf4j-api/1.6.4](http://mvnrepository.com/artifact/org.slf4j/slf4j-api/1.6.4)

# text - 在raphael js中禁用文本上的鼠标悬停

> ID：14010559
> 
> 赞同：0
> 
> 时间：2012-12-23T11:23:33.337
> 
> 标签：text, raphael, mouseover, set

我刚开始使用 raphael js，我有点卡在这里：http: [//jsfiddle.net/wC9hX/50/](http://jsfiddle.net/wC9hX/50/)

我不希望鼠标悬停事件在文本标签上处于活动状态，因为它会导致文本随机消失/出现。已经问过这个问题，建议的解决方案是使用集合。

我尝试过使用集合，但它并没有解决我的问题。请帮帮我！谢谢！

这就是我创建集合的方式：

```
var group = paper.set();    
group.push(chevron);
group.push(text);
group.push(description); 
```

这是`mouseout`功能：

```
group.mouseout(function() {

    description.animate({
        opacity: 0
    }, 250, 'linear');

    chevron.animate({
        path: "M 5 250 l 200 25 l 200 -25 l 0 50 l -200 25 l -200 -25 z",
        fill: '#000'
    }, 500, 'linear');  

    text.animate({
        fill: '#fff'
    }, 500, 'linear');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T16:29:45.303

1.  从组中删除所有不应触发动画的形状（仅`chevron`应保留）。
2.  `stop()`在触发新的动画调用之前应用。

请参阅[更新的演示](http://jsfiddle.net/wC9hX/67/)。

# backbone.js - 主干嵌套视图 - 子视图属性在模板中设置不正确

> ID：14010563
> 
> 赞同：0
> 
> 时间：2012-12-23T11:23:57.067
> 
> 标签：backbone.js, handlebars.js, mv

我正在尝试创建一个`Library`包含其他模型集合的主干模型（让我们称之为）（让我们称之为`Books`）。我提供了一个视图 - `LibraryView`，它创建一个书柜的 HTML，其中包含一组由 生成的 HTML 表示的书籍`BookView`。另外，我使用 Handlebars.js 作为我的模板系统。

我遇到的问题是，在我什至通过函数`BookView`传递它之前，我在 this.el 元素上返回了奇怪的 html 。`render()`

**图书馆模型模型**

```
 var LibraryModel = Backbone.Model.extend({

    initialize: function() {

      var books = new BookCollection();

      _.each(book_data.books, function(value, index) {
        books.add(new Book());
      });

      this.books = books;

    }
  }); 
```

**图书馆视图视图：**

```
 var LibraryView = Backbone.View.extend({

    el: "#library",

    render: function() {

      var t = this;

      this.model.books.each(function(book, index) {
        //create new view for each Book model in the books collection
        var view = new BookView(book);
        //append HTML produced by the BookView into LibraryView el element
        t.$el.append(view.render().$el);
      });

      return this;  
    },

    initialize: function() {
      //snip
    }
  }); 
```

**BookView 视图：**

```
 var BookView = Backbone.View.extend({

    render: function() {
      var viewmodel = this.model;
      var source = $("#book-template").html();
      var template = Handlebars.compile(source);
      var html = template(viewmodel.toJSON());

      console.log(html); //prints <div test="wtf" anotherTest="123"><b>wtf</b> 123</div>
      this.$el.html(html);

      return this;  
    },

    initialize: function(book) {
      console.log(this.el.outerHTML); //prints <div test="wtf" anotherTest="123"></div>
      this.model = book;
      this.listenTo(this.model, "change", this.render);
    }
  }); 
```

我提供的模板是：`<b>{{test}}</b> {{anotherTest}}`

**BookModel 模型**

```
 var BookModel = Backbone.Model.extend({
    defaults: {
      test: "wtf",
      anotherTest: 123
    },

    initialize: function() {
        //snip
    }
  }); 
```

基本上，我遇到的问题是我`BookView`产生了奇怪的 HTML，其中我的每个模型属性都附加到 Backbone-generated `div`，如下所示：

```
<div test="wtf" anotherTest="123">
<b>wtf</b> 123
</div> 
```

我没有在代码的其他任何地方设置任何属性——这两个值都只来自默认值。

另外，我确认这不是 Handlebars 正在做的事情，因为模型属性作为 HTML 属性插入到模型生成`div`的Backbone 中`BookView`（注意，我没有手动提供 tagName 或 el，我希望 Backbone 为我创建一个 div ）。

所以这就是我卡住的地方。我有一个完美工作的 HTML 列表，由列表中的`BookView`每个模型生成，但由于某种原因，Backbone 生成的 div 包装器在其 HTML 属性中包含每个模型属性，如下所示：

```
<div id="#library">
<div test="wtf" anotherTest="123"><b>wtf</b> 123</div>
<div test="wtf" anotherTest="123"><b>wtf</b> 123</div>
<div test="wtf" anotherTest="123"><b>wtf</b> 123</div>
</div> 
```

我真的很担心这个问题，我怀疑这与我尝试使用 View-in-a-View 的事实有关。

你以前遇到过类似的问题吗？您有 MasterView 呈现 ChildView 集合的 Backbone 应用程序的好例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T12:58:00.797

创建新的`BookViews`. 该视图期望 a`BookModel`进入其初始化。但是，该`initialize()`方法总是需要一个`attributes`按约定调用的对象。您应该修改您的`BookView`，使其与此匹配：

```
var BookView = Backbone.View.extend({

    render: function() {
       // keep the same code
    },

    initialize: function(attributes) {
        this.listenTo(this.model, "change", this.render);
    }
}); 
```

在你的`LibraryView`你应该使用：

```
var view = new BookView({ model : book }); 
```

而不是以前的：

```
var view = new BookView(film); // which is a typo, and should pass book and not film 
```

所以现在你得到了预期的结果。

```
<div id="library">
    <div><b>wtf</b> 123</div>
    <div><b>wtf</b> 123</div>
    <div><b>wtf</b> 123</div>
</div> 
```

请记住，它`initialize(attributes)`会自动使用该映射调用 set，因此您不必`set(attr, value)`自己调用。考虑到这一点，我们可以理解为什么该视图具有两个属性，这实际上是您的两个模型的属性（它们正在`set()`初始化）。

# asp.net - 如何实时报告异步服务器任务的进度并使用客户端 JavaScript 读取进度

> ID：14010565
> 
> 赞同：1
> 
> 时间：2012-12-23T11:24:09.127
> 
> 标签：asp.net, ajax, jquery, xmlhttprequest

这是一个用例：

*   我正在使用 ASP .NET Web Forms 3.5 & jQuery
*   在网页上，我初始化了一个对服务器的 javascript 请求（例如 DoAsyncTask.aspx）
*   在服务器上，我利用了**RegisterAsyncTask**。在注册的异步任务中，我将进度信息直接写入响应输出流，如下所示：

```
// Called when task starts in order no to buffer the output 
Response.BufferOutput = false;
```

编写单个进度消息看起来像这样（也请评论它，因为它几乎可以按我的意愿工作）：

```
Response.Write(message + Environment.NewLine);    
Response.OutputStream.Flush(); 
```

当我从浏览器初始化对 DoAsyncTask.aspx 的请求时，它（几乎）工作得很好（我可以看到来自服务器的单行消息）。（我工作得几乎很好，因为有时我从服务器获得的单行被截断 - 可能是浏览器缓冲？？？）

但我不知道如何使用客户端和 jQuery 来做到这一点。我想在客户端做的是在某种元素（如 ）中显示来自服务器的刷新消息。我该怎么做？

# mysql - 向 PDO 注册用户

> ID：14010568
> 
> 赞同：0
> 
> 时间：2012-12-23T11:24:28.770
> 
> 标签：mysql, pdo

我在处理寄存器时遇到问题

这是该函数的代码：

```
<?php
include $_SERVER['DOCUMENT_ROOT']. "/config/config.php";
$conn = new PDO('mysql:host=' . $ip . ';dbname=' . $database, $username, $password);

function registerUser($username, $password, $passwordagain, $email, $mcname)
{
$validusername= "/^[a-z0-9]+$/";
$validpassword= "/^[A-Za-z0-9]+$/";
$validemail= "/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/";
$validmcname= "/^[A-Za-z0-9]+$/";
$error = 0;

if(strlen($username)<4 || strlen($username)>24)
{
$error = 1;
}
if(strlen($password)<6 || strlen($password)>24)
{
$error = 1;
}
if(strlen($mcname)<4 || strlen($mcname)>24)
{
$error = 1;
}
if(!preg_match($validusername, $username))
{
$error = 1;
}
if(!preg_match($validpassword, $password))
{
$error = 1;
}
if(!preg_match($validemail, $email))
{
$error = 1;
}
if(!preg_match($validmcname, $mcname))
{
$error = 1;
}
if($password != $passwordagain)
{
$error = 1;
}
$userexistquery = $conn->query('SELECT * FROM users WHERE username=' . $username);
$userexist = $userexistquery->fetch();
if(count($userexist) != 0)
{
$error=1;
echo "<div class='erroralert'>Username already exists!</div>";
}
$emailexistquery = $conn->query('SELECT * FROM users WHERE email=' . $email);
$emailexist = $emailexistquery->fetch();
if($emailexist != 0)
{
$error=1;
echo "<div class='erroralert'>E-mail already exists!</div>";
}
if($error != 1)
{
$encryptedpassword = hash('sha512', $password);
$registeruser = $conn->query("INSERT INTO users(username, password, email, mcname) VALUES ('$username', '$encryptedpassword', '$email', '$mcname')");
echo "<div class='successalert'>Succesfully registred</div>";
}
else
{
echo "<div class='erroralert'>An error occured during registration.</div>";
}
}
?> 
```

给我的错误是：

> 注意：未定义变量：第 45 行 C:\xampp\htdocs\functions\functions.php 中的 conn
> 
> 致命错误：第 45 行 C:\xampp\htdocs\functions\functions.php 中的非对象调用成员函数 query()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T11:27:13.033

您`$conn`在函数之外实例化变量。您必须将它作为参数传递才能在内部使用它。

# javascript - 如何分配某个样式 id div 标签

> ID：14010572
> 
> 赞同：0
> 
> 时间：2012-12-23T11:25:15.777
> 
> 标签：javascript, html

早上好！我遇到了创建一个javascript的问题，它将恢复带有特定容器div id的添加样式的链接。我的代码示例：

```
<a href="#" onmouseover="changeDiv()" onmouseout="defaultDiv()">Сантехника и электрика</a> 
```

在我添加了一个 html 代码之后

```
<script>
      function changeDiv(){
      document.getElementById("images_1").style.width="230px";
      document.getElementById("images_1").style.height="162px";
      document.getElementById("images_1").style.top="0px";
    }
</script> 
```

现在我的问题是如何一次为特定的 id 设置样式？如果我使用另外 5 个块 div

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T11:48:42.283

将一个类附加到您的 div，然后使用 document.getElementsByClassName('class')。这将返回一个元素数组，您可以使用 for 循环对其进行调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T11:28:51.157

使用参数

```
<script>
      function changeDiv(ids){
      document.getElementById(ids).style.width="230px";
      document.getElementById(ids).style.height="162px";
      document.getElementById(ids").style.top="0px";
    }
</script> 
```

并使用喜欢

```
<a href="#" onmouseover="changeDiv('image_1')" onmouseout="defaultDiv('do yourself')">Сантехника и электрика</a> 
```

编辑：（回答您的评论）

```
<script> function changeDiv(ids){ document.getElementById(ids).style.borderRadius="5px"; } </script> 
```

# ruby-on-rails - 如何成为 Ruby on Rails 中级/主开发人员

> ID：14010575
> 
> 赞同：0
> 
> 时间：2012-12-23T11:26:03.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3

大约 3 个月前，我开始在 Rails 上学习 Ruby。我已经关注了几个关于 twitter 克隆的教程，我正在完成 micheal hartl 的 Ruby on rails 教程，我想知道如何确保推动下一个级别。我的目标是能够制作出能够处理实际 Web 标准的出色应用程序。有很多内容可供初学者学习 Rails，但我想获得博客、教程、书籍或任何其他链接，以供那些想要推动有关框架的知识向前发展的人使用。谢谢你 。

我认为每个人的答案对这个问题都很重要，所以我不会通过尊重每个人来验证任何答案。但非常感谢并继续添加答案和反馈。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T11:55:44.760

简短的回答是：“练习、练习、练习”。

开始阅读您正在使用的 gems 的代码。您会惊喜地发现，您可以通过深入研究代码找到许多问题的答案。

在练习的同时，您应该始终了解新闻、提示、技巧和新功能。所以我建议你订阅[RubyWeekly](http://rubyweekly.com/)，除非你已经订阅了。阅读有关 Ruby on Rails 的文章并使用您从这些文章中阅读的代码示例。

我还建议您参与 TDD/BDD，它确实改变了关于如何编写代码的想法。

按照屏幕投射。您可能知道[RailsCasts](http://railscasts.com/)。我还建议您订阅[Destroy All Software](https://www.destroyallsoftware.com/screencasts)，每月收费 9 美元，但物有所值。

祝你好运。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T11:34:49.543

这里有很多关于编程的免费书籍（包括 ruby​​、sql、设计模式等）： http: [//programming-motherfucker.com/become.html](http://programming-motherfucker.com/become.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-23T11:45:34.250

我的建议。为了阅读：

1.  [http://www.amazon.com/Eloquent-Ruby-Addison-Wesley-Professional/dp/0321584104](https://rads.stackoverflow.com/amzn/click/com/0321584104)
2.  [http://www.amazon.com/Rails-Way-Addison-Wesley-Professional-Ruby/dp/0321601661](https://rads.stackoverflow.com/amzn/click/com/0321601661)
3.  [http://www.amazon.com/Rails-AntiPatterns-Refactoring-Addison-Wesley-Professional/dp/0321604814](https://rads.stackoverflow.com/amzn/click/com/0321604814)
4.  [http://www.amazon.com/Metaprogramming-Ruby-Program-Like-Pros/dp/1934356476](https://rads.stackoverflow.com/amzn/click/com/1934356476)

# objective-c - 我如何最好地构造一个返回推文坐标的请求

> ID：14010580
> 
> 赞同：1
> 
> 时间：2012-12-23T11:26:39.223
> 
> 标签：objective-c

我一直在寻找没有运气的年龄。如何构建搜索查询以返回我的纬度特定半径内的推文。我需要获取返回的推文的坐标，以便我可以在地图上绘制具体我需要在 1.1 api 中验证请求吗？如何遍历推文以获取坐标？有没有可以帮助我的教程？

# vba - VBA转换时间

> ID：14010581
> 
> 赞同：-2
> 
> 时间：2012-12-23T11:26:57.553
> 
> 标签：vba, time

我需要将时间从 14:54 转换为双 14+54/60。我使用以下代码执行此操作：

```
Private Function Omzetten(ByVal time As String) As Double
Dim min As Integer, hours As Integer, datum As Date
datum = CDate(time)
min = DatePart("n", datum)
hours = DatePart("h", datum)
Omzetten = hours + min / 60
End Function 
```

但是当时间是 26:00 时，他只给 2，因为 26-24 是 2。所以我想广告 day = DatePart("d", datum)，但后来他总是给 day = 30。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T12:54:30.093

如果它始终采用格式，`hours : mins`则使用以下内容：

```
Dim str As String
Dim strSplit() As String
Dim Val As Double

str = "26:00"
strSplit = Split(str, ":")

Val = CInt(strSplit(0)) + CInt(strSplit(1)) / 60 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T11:45:32.357

尝试以下，我使用了 VB.Net，从上面看起来它必须与较新的 VBA 变体兼容：

```
Private Function Omzetten(ByVal time As String) As Double
    Dim Hours As Integer = CInt(time.Substring(0, time.IndexOf(":")))
    Dim Minutes As Integer = CInt(time.Substring(time.IndexOf(":") + 1))
    Return Hours + Minutes / 60
End Function 
```

正如您可能想要添加一些额外检查的注释一样，上面的代码将例如在非数字输入或时间不包含冒号时失败。您可能需要更多类似以下的内容来处理不同的输入：

```
Private Function Omzetten(ByVal time As String) As Double
    Dim Hours As Integer = 0
    Dim Minutes As Integer = 0
    Dim HoursStr As String
    If time.IndexOf(":") = -1 Then
        HoursStr = time
    Else
        HoursStr = time.Substring(0, time.IndexOf(":"))
    End If
    If IsNumeric(HoursStr) Then
        Hours = CInt(HoursStr)
    End If
    If time.IndexOf(":") >= 0 Then
        Dim MinutesStr As String = time.Substring(time.IndexOf(":") + 1)
        If IsNumeric(MinutesStr) Then
            Minutes = CInt(MinutesStr)
        End If
    End If
    Return Hours + Minutes / 60
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T13:20:11.143

我认为您可以使用基本的 Excel 公式来实现这一点。

由于时间存储为数字，如果您将任何时间除以 1/24（即一小时），您将得到双倍的答案。

**注意**- 如果您想使用超过 24 小时的时间（例如 26:00），请将单元格自定义格式设置为**`[h]:mm:ss`**

*例子*

```
 A        B
1   14:54    =A1/(1/24) // = 14.9
2   26:00    =A1/(1/24) // = 26.0 
```

这有帮助吗？

# random - masm32 随机整数 0-9

> ID：14010584
> 
> 赞同：0
> 
> 时间：2012-12-23T11:27:11.207
> 
> 标签：random, integer, masm32

我正在学习 masm32，我需要该程序从 0-9 范围内生成一个随机整数，以与用户输入进行比较。如果我确实有一个整数，我对比较没有任何问题。每次运行程序时，是否有一种简单的方法可以从所述范围内生成一个新的随机整数？

我知道有 Irvine32 库，但是有没有办法做到这一点而无需下载额外的库？

谢谢。

另外，这个：

```
invoke GetTickCount
invoke nseed, eax
invoke nrandom, 10
mov number, eax

push offset number
call StdOut 
```

给我一些笑脸而不是数字，有没有办法让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:21:26.223

从 RTC 中选择结果或从用户计时/输入中收集熵，进行简单哈希，生成 1 字节随机数据，然后计算 mod 10

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T17:54:14.557

由于您使用的是 MASM32，它在库中包含其所有功能的文档，所以 RTFM ！！！打开 \masm32\help 并查看帮助文件！

为了在屏幕上显示一个数字，您需要首先将该数字转换为其 ASCII 等价物。ASCII "2" 与 2 不同。您可以使用自己的角色或使用名为 dwtoa 的 MASM32 库中的 DWORD 到 ASCII 函数。

因此，使用该函数，您的代码将变为：

```
invoke  GetTickCount
invoke  nseed, eax
invoke  nrandom, 10
invoke  dwtoa, eax, offset lpszNumber
invoke  StdOut, offset lpszNumber 
```

其中 lpszNumber 在该`.data?`部分中定义为： `lpszNumber db 2 dup (?)`当然，使缓冲区足够大以容纳数字和 NULL 终止符。使用该代码，每次启动程序时，它都会生成一个介于 0 和 9 之间的随机数，转换为 ASCII 并打印到控制台。

除了包含 MASM32 中包含的函数的文档之外，它还包含所有函数的源代码。打开\masm32\m32lib，你可以看一下代码，看看一切是如何完成的……你甚至可以修改以供自己使用。

# c++ - 逗号运算符是否必须是左结合的？

> ID：14010593
> 
> 赞同：11
> 
> 时间：2012-12-23T11:29:02.920
> 
> 标签：c++, operators, expression, associativity, comma-operator

根据[这个优先表](http://en.cppreference.com/w/cpp/language/operator_precedence)，[逗号运算符](https://stackoverflow.com/questions/52550/)是左结合的。也就是说，`a, b, c`被解析为`(a, b), c`. 这是必需品吗？不会`a, (b, c)`有完全相同的行为吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-23T11:32:26.000

由于存在可重载`operator,`，不，它不是相同的行为。`a, (b, c)`可以调用不同的重载`(a, b), c`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T17:30:03.200

逗号运算符具有从左到右的关联性。用逗号分隔的两个表达式从左到右求值。总是计算左操作数，并且在计算右操作数之前完成所有副作用。

在某些情况下，逗号可以用作分隔符，例如函数参数列表。不要将逗号用作分隔符与用作运算符混淆；两种用途完全不同。

[http://msdn.microsoft.com/en-us/library/zs06xbxh.aspx](http://msdn.microsoft.com/en-us/library/zs06xbxh.aspx)

# java - Java 中的 ResultSet.TYPE_FORWARD_ONLY

> ID：14010595
> 
> 赞同：-1
> 
> 时间：2012-12-23T11:29:08.790
> 
> 标签：java

```
 try {

        Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/employee", "root", "root");
        String query = "select * from sample;";
        Statement stmt = con.createStatement(ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY);
        stmt.executeQuery(query);
        ResultSet rs = stmt.getResultSet();
        rs.absolute(3);

        while (rs.next()) {
            System.out.println(rs.getString("name"));
        }
            rs.beforeFirst();
            while (rs.next()) {
            System.out.println(rs.getString("name"));
        }

 while (rs.previous()) {
            System.out.println(rs.getString("name"));
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    } 
```

这工作正常。这`ResultSet`是`TYPE_FORWARD_ONLY`但我也可以朝前一个方向前进。谁能解释一下，我用谷歌搜索，但没有得到任何满意的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T11:36:43.167

如[roseindia.net**所述**](http://www.roseindia.net/tutorial/java/jdbc/jdbcresultset/jdbcresultsetafterlast.html)：

> 此`ResultSet`方法将光标设置在最后一条记录之后。它将光标位置设置为 last + 1。`void afterLast()`将光标移动到该`ResultSet`对象的末尾，就在最后一行之后。如果结果集不包含行，则此方法无效。
> 
> 句法：
> 
> ```
> ResultSet rs;
> 
> void rs.afterLast(); 
> ```
> 
> 现在我们将使用此方法创建示例。在此示例中，afterLast() 指向结果集对象中的最后一个位置，结果集 previous() 将光标移动到此 ResultSet 对象中的上一行。

# android - 改变液晶触摸屏的可用区域

> ID：14010599
> 
> 赞同：0
> 
> 时间：2012-12-23T11:29:27.837
> 
> 标签：android, layout, screen

是否可以编辑 android 源代码让 Galaxy S 只使用液晶屏幕的特定部分。说很像改变分辨率，但创建它，所以只说 1 英寸向下是可用的。其余无效。

只是好奇这是硬件还是软件的事情。

和这有什么关系吗？ [http://developer.android.com/reference/android/view/Display.html](http://developer.android.com/reference/android/view/Display.html)

但我说的是整个设备。原生地说，将 rom 更改为仅显示本节中的内容，以下不显示。好像屏幕那么大。

![在此处输入图像描述](../Images/05717a9e6c391ec5389ecb708aba2c5e.png)

# r - R中的快速傅里叶变换

> ID：14010605
> 
> 赞同：29
> 
> 时间：2012-12-23T11:30:24.237
> 
> 标签：r, time-series, fft, period, spectral-density

我有一个数据集，其中包含动物在 12 个月内每小时访问的次数。我想使用快速傅立叶变换来检查周期性模式和周期性。过去，我为此使用过 Statistica；但是，我想使用 R 来绘制频谱密度与周期的关系图。有没有一种简单的方法可以在 R 中做到这一点？如果可能，我想确定 12 小时和 24 小时的活动高峰。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-23T12:58:57.787

您可以考虑以下功能。

*   `periodogram`from `TSA`package 立即绘制周期图。
*   `periodogram`from`GeneCycle`返回频率列表和估计的功率谱密度。它是一个`stats::spectrum`带有一些特殊选项集的包装函数。
*   `spectrum`from`stats`允许您选择用于估计谱密度的方法：周期图或使用自回归过程。
*   `cpgram`from`stats`绘制累积周期图和置信区间。

参见，例如，`?cpgram`或`?spectrum`所有细节，并记住它是，例如，`TSA::periodogram`当`GeneCycle::periodogram`函数的名称一致时。

网上也有大量关于如何使用这些功能的示例和教程。请参阅[此处](http://homepage.univie.ac.at/erhard.reschenhofer/pdf/zr/Spec.pdf)了解用法`fft`和[此处](http://www.di.fc.ul.pt/~jpn/r/fourier/fourier.html)了解更广泛的教程。

此外，您可能已经知道，必须对给定的时间序列进行去趋势化处理。因此，使用，例如，`diff(x)`而不是`x`。最后，您的时间序列的长度必须能被 12 整除，以便能够识别 12 小时和 24 小时的频率，这可以通过例如 来实现`x[-(1:(length(x) %% 12))]`，其中`x`是一个去趋势的时间序列。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-23T11:58:38.133

用于`spectrum`进行光谱密度分析；也`fft`适用于基本的快速傅里叶变换。

# charts - CombinedDomainXYPlot - 范围平移是否有效？

> ID：14010607
> 
> 赞同：1
> 
> 时间：2012-12-23T11:30:33.387
> 
> 标签：charts, jfreechart, panning

我创建了 CombinedDomainXYPlot 并在那里添加了一堆 XYPlot。

除了垂直平移（使用鼠标和 Y 轴移动图表）外，一切似乎都按预期工作。域平移（沿 X 轴）工作正常。

我都设置了

1.  组合图.setDomainPannaable(true);
2.  组合图.setRangePannaable(true);

并且还在 ChartPanel 的实例上调用了 setMouseWheelEnabled(true)；

有人知道范围平移是否有效吗？如果是的话，你能举一些例子如何正确打开它吗？

以防万一 - 在 JFreeChart 1.0.14、JDK 6、MacOS 10.8 下运行。

谢谢， 瓦尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T20:01:19.273

我使用这个[例子](https://stackoverflow.com/a/11895709/230513)得到了同样的结果。它没有明确记录，但它是有道理的。根据经验，只有组合（共享）轴支持平移，即使子图将支持在正交（独立）轴上平移：

*   [`CombinedDomainXYPlot`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/CombinedDomainXYPlot.html)支持*域*平移；调用. `setFixedRangeAxisSpaceForSubplots()`_[`draw()`](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/plot/CombinedDomainXYPlot.html#line.426)

*   [`CombinedRangeXYPlot`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/CombinedRangeXYPlot.html)支持*范围*平移；调用. `setFixedDomainAxisSpaceForSubplots()`_[`draw()`](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/plot/CombinedRangeXYPlot.html#line.372)

# html - CSS - 背景图像被截断

> ID：14010610
> 
> 赞同：4
> 
> 时间：2012-12-23T11:31:18.170
> 
> 标签：html, css, twitter-bootstrap

我想将非滚动背景图像（1170x700）设置为 1170px 宽的元素（）。为此，我使用了以下 css

```
.container
{
    background:url("bg-image1170x700.gif") no-repeat fixed center top #fff;
} 
```

问题： - 最初图像被截断，如果我正确向下滚动它的显示。不知道我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T11:41:09.820

您可以使用[背景大小](https://developer.mozilla.org/en-US/docs/CSS/background-size)：

```
.container
{
    background:url("bg-image1170x700.gif") no-repeat fixed center top #fff;
    background-size: contain;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T11:35:42.013

您正在显示它已修复。它很可能被另一个元素隐藏，并且当您滚动它时，它会从该元素后面滚动出来

# android - 是否可以使用 Z 坐标使安卓游戏兼容多种屏幕尺寸？

> ID：14010614
> 
> 赞同：1
> 
> 时间：2012-12-23T11:32:09.283
> 
> 标签：android, graphics, opengl-es

绘制 2D 图形只需要两个坐标，默认情况下 Z 坐标为 0。是否可以使用该 Z 坐标来调整图形大小。假设对于较大的屏幕，我将 Z 设置为 0，但当屏幕较小（ldpi）时，我将 z 设置为 -5 个单位，整个图形适合屏幕。这是好习惯吗？甚至可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:22:24.440

看起来您打算使用 z 坐标来放大或缩小，以便场景正确地适合屏幕。这是有效的一点，您可以通过这种方式“破解”投影矩阵来轻松做到这一点。我真正看到的唯一缺点是您需要为每个顶点再向管道发送一个坐标。只设置一个全局缩放因子会容易得多，它要么存储在模型视图投影矩阵中，要么传递给顶点着色器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T11:35:18.233

要将图形调整为屏幕大小（和旋转），您应该调整 opengl 视口大小。

不知道你到底打算用 z 坐标做什么，但这对我来说看起来不是一个好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T15:08:45.060

所以你想为你的 2D 应用程序添加一个“假”深度？

*   使用正交投影（在大多数 2D 渲染世界中使用），它将完全没用。
*   使用透视投影，当发生纹理缩小时，肯定会导致许多亚像素毛刺，或者在放大的情况下会变得模糊。

您可以调整精灵的大小，或者 - 更好的是 - 您可以创建一组不同大小的烘焙精灵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T20:19:45.513

我的猜测是（我的意思是不尊重）您对 2D 渲染知之甚少，并提出了这个想法。实际上并没有那么糟糕，这是一个很好的第一种方法，但该地区的情况非常好。你应该坚持标准的处理方式，除非你真的知道你在做什么。

标准方法是使用投影矩阵（或更高抽象级别的相机）。使用投影时，您可以定义“世界坐标”。投影将您的世界映射到 GL 视口（通常是孔屏幕），因此无论设备屏幕大小如何，您始终显示世界的同一部分。请注意，您必须处理拉伸。

我不知道我是否真的在回答你的问题。这不是你真正问的，而是我想你想问的。如果使用正交投影（这是 2D 的典型特征），您不应该为 z 分量而烦恼。

# spring - 使用 Spring RESTful 服务时出错

> ID：14010616
> 
> 赞同：0
> 
> 时间：2012-12-23T11:32:29.043
> 
> 标签：spring

我是 spring restful 服务的新手，当我输入以下 url 时，我想以不同的格式获得结果-----

```
localhost:7001/SpringRestService/restful/methodName/ALL/ALL/ALL/ALL.xml
localhost:7001/SpringRestService/restful/methodName/ALL/ALL/ALL/ALL.json
localhost:7001/SpringRestService/restful/methodName/ALL/ALL/ALL/ALL.pdf 
```

但是当我启动服务器时出现以下错误----

```
 <Servlet: "SpringRest" failed to preload on startup in Web application: "SpringRestService".
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.view.ContentNegotiatingViewResolver#0' defined in ServletContext resource [/WEB-INF/SpringRest-servlet.xml]: Cannot create inner bean 'org.springframework.web.servlet.view.UrlBasedViewResolver#20e0f98' of type [org.springframework.web.servlet.view.UrlBasedViewResolver] while setting bean property 'viewResolvers' with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.view.UrlBasedViewResolver#20e0f98' defined in ServletContext resource [/WEB-INF/SpringRest-servlet.xml]: Initialization of bean failed; nested exception is java.lang.IllegalArgumentException: Property 'viewClass' is required
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:282)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:121)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:353)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:154)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1391)
    Truncated. see log file for complete stacktrace
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.servlet.view.UrlBasedViewResolver#20e0f98' defined in ServletContext resource [/WEB-INF/SpringRest-servlet.xml]: Initialization of bean failed; nested exception is java.lang.IllegalArgumentException: Property 'viewClass' is required
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:532)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:271)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:121)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:353)
    Truncated. see log file for complete stacktrace
java.lang.IllegalArgumentException: Property 'viewClass' is required 
```

----------------------springRest-servlet.xml------------------------ --------

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

<!-- Specify a view resolver for JSP files-->
<bean id="viewResolvers" class="org.springframework.web.servlet.view.InternalResourceViewResolver"
p:prefix="/WEB-INF/view/" p:suffix=".jsp" />

<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
        <property name="mediaTypes">
            <map>
                <entry key="xml" value="application/xml"/>
                <entry key="html" value="text/html"/>
            </map>
        </property>
         <property name="viewResolvers">
    <list>
      <bean class="org.springframework.web.servlet.view.UrlBasedViewResolver"/>
    </list>
  </property>
  <property name="defaultViews">
    <list>
      <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
    </list>
  </property>
    </bean>   

</beans>

-----------------------------my controller class------------------------------ 
```

下面是我的控制器类

```
package org.nea.rest.unsr;

import java.util.ArrayList;
import java.util.List;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.nea.ia.services.util.uniserv.UniServGrantInfo;
import org.nea.spring.services.interfaces.uniservs.UniservSearchInterface;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class HelloWorldController1 {
    @Autowired
    UniservSearchInterface uniservService;

    public UniservSearchInterface getUniservService() {
        return uniservService;
    }

    public void setUniservService(UniservSearchInterface uniservService) {
        this.uniservService = uniservService;
    }
    protected final Log logger = LogFactory.getLog(getClass());

    /* commented
    @RequestMapping(value = "/showAllGrants/{userName}/{year}/{status}/{stateId}", method = RequestMethod.GET)
    public @ResponseBody
    List<UniServGrantInfo> getTextFromURL(@PathVariable("userName") String userName, @PathVariable("year") String year,
            @PathVariable("status") String status, @PathVariable("stateId") String stateId) {
        List<UniServGrantInfo> grantInfoList = new ArrayList<UniServGrantInfo>();

        grantInfoList = uniservService.showAllgrants(userName, year, status, stateId);
        return grantInfoList;
    }

    */

    @RequestMapping(value = "/showAllGrants/{userName}/{year}/{status}/{stateId}", method = RequestMethod.GET)
    public ModelAndView getTextFromURL(@PathVariable("userName") String userName, @PathVariable("year") String year,
            @PathVariable("status") String status, @PathVariable("stateId") String stateId) {
        List<UniServGrantInfo> grantInfoList = new ArrayList<UniServGrantInfo>();

        grantInfoList = uniservService.showAllgrants(userName, year, status, stateId);
        ModelAndView model = new ModelAndView("index");

        //ModelAndView mav = new ModelAndView();
       // mav.setViewName("index");
       // mav.addObject("sampleContentList", grantInfoList);
        return model;       
    }

}

can anybody help me telling where i am doing wrong or if i am missing any required jar file. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T17:43:03.633

您对 UrlBasedViewResolver 的配置不完整。异常指出缺少属性“viewClass”。例如一个完整的配置：

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
  <property name="prefix" value="/jsp/"/>
  <property name="suffix" value=".jsp"/>
  <property name="viewClass" 
    value="org.springframework.web.servlet.view.JstlView"/>
</bean> 
```

# objective-c - 地图中的往返路径

> ID：14010625
> 
> 赞同：1
> 
> 时间：2012-12-23T11:34:41.303
> 
> 标签：objective-c, google-maps, ios6, mapkit, map-directions

我正在创建要显示客户端所在位置的 iPhone 应用程序。我已经做到了。现在客户要求他们想要指示是否有人想到达我们的地方。

我可以在上面实现的任何链接/代码？

我想要的是我会像客户位置`From`一样接受输入`To`，我会知道这一点。一旦用户输入 FROM 信息，地图应显示如何到达客户地点的路径。

知道如何完成这项工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T13:12:53.633

我认为[**适用于 iOS 的 MTDirectionsKit**](http://www.cocoacontrols.com/controls/mtdirectionskit)正是我所寻找的。

但是，如果有人有任何其他解决方案，请提供给我。

# unit-testing - 为 Visual C++ 2012 编译单元测试时未解决的外部问题

> ID：14010627
> 
> 赞同：17
> 
> 时间：2012-12-23T11:34:48.737
> 
> 标签：unit-testing, visual-c++, visual-studio-2012

我想为 Visual C++ 项目创建单元测试。我尝试按照[这些 MSDN 说明](http://msdn.microsoft.com/en-us/library/hh419385.aspx)进行操作。我找到了区分非托管/混合/纯代码的页面，但我并不完全理解这些概念。我的代码不使用 .NET，并且可能会在 MinGW 下通过一些代码调整进行编译。

我的主项目构建了一个可执行文件，因此我按照*To reference export functions from the test project*下的步骤操作。对于初学者，我有不同的项目选择：

![](../Images/af641ed6311a1ca337e9a4ccb9d185f2.png)

我选择了*Native Unit Test Project*。我添加了对我的主项目的引用，并将*Include Directories*设置为`$(SolutionDir)\Cubes;$(IncludePath)`. 我编写了代码并在编译时得到了这个：

```
1>Creating library C:\Users\Pieter\Dropbox\Unief\TTUI\TTUIproject\Cubes\Debug\CubesTest.lib and object C:\Users\Pieter\Dropbox\Unief\TTUI\TTUIproject\Cubes\Debug\CubesTest.exp
1>LayoutTest.obj : error LNK2019: unresolved external symbol "public: __thiscall Room::Room(void)" (??0Room@@QAE@XZ) referenced in function "public: void __thiscall CubesTest::LayoutTest::NumOfRoomsConsistency(void)" (?NumOfRoomsConsistency@LayoutTest@CubesTest@@QAEXXZ)
1>LayoutTest.obj : error LNK2019: unresolved external symbol "public: __thiscall Layout::Layout(class Room *,int)" (??0Layout@@QAE@PAVRoom@@H@Z) referenced in function "public: void __thiscall CubesTest::LayoutTest::NumOfRoomsConsistency(void)" (?NumOfRoomsConsistency@LayoutTest@CubesTest@@QAEXXZ)
1>LayoutTest.obj : error LNK2019: unresolved external symbol "public: void __thiscall Layout::add(int,int,class Room *)" (?add@Layout@@QAEXHHPAVRoom@@@Z) referenced in function "public: void __thiscall CubesTest::LayoutTest::NumOfRoomsConsistency(void)" (?NumOfRoomsConsistency@LayoutTest@CubesTest@@QAEXXZ)
1>LayoutTest.obj : error LNK2019: unresolved external symbol "public: void __thiscall Layout::clear(int,int,bool)" (?clear@Layout@@QAEXHH_N@Z) referenced in function __catch$?NumOfRoomsConsistency@LayoutTest@CubesTest@@QAEXXZ$0
1>C:\Users\Pieter\Dropbox\Unief\TTUI\TTUIproject\Cubes\Debug\CubesTest.dll : fatal error LNK1120: 4 unresolved externals 
```

如果我没记错的话，这意味着编译器会找到头文件，而不是源文件。我错过了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-22T08:33:35.483

这是有关如何将 EXE 添加为单元测试目标的分步说明。

关键是要“导出”你想要测试的函数/类......你可以在这里下载完整的示例：[http](http://blog.kalmbachnet.de/files/CPP_UnitTestApp.zip) ://blog.kalmbachnet.de/files/CPP_UnitTestApp.zip （我没有更改任何项目设置，因此您可以在源代码中看到所有更改；当然，某些部分可以在项目设置中进行）。

1.  创建一个 Win32 应用程序（控制台或 MFC 或 Windows，无所谓）；我创建了一个名为的控制台项目`CPP_UnitTestApp`：

2.  添加您要测试的功能（您也可以添加类）。例如：

    ```
    int Plus1(int i)
    {
      return i+1;
    } 
    ```

3.  为要测试的函数添加头文件：`CPP_UnitTestApp.h`

4.  将方法的声明放入头文件，同时导出这些函数！

    ```
    #pragma once

    #ifdef EXPORT_TEST_FUNCTIONS

    #define MY_CPP_UNITTESTAPP_EXPORT __declspec(dllexport)
    #else
    #define MY_CPP_UNITTESTAPP_EXPORT
    #endif

    MY_CPP_UNITTESTAPP_EXPORT int Plus1(int i); 
    ```

5.  将此头文件包含在 main-cpp（此处为 CPP_UnitTestApp.cpp）中，并在包含头文件`EXPORT_TEST_FUNCTIONS`之前定义：

    ```
    #define EXPORT_TEST_FUNCTIONS
    #include "CPP_UnitTestApp.h" 
    ```

6.  现在添加一个新项目（本机单元测试项目：UnitTest1）

7.  将标头和库包含到“unittest1.cpp”文件中（根据需要采用路径）：

    ```
    #include "..\CPP_UnitTestApp.h"
    #pragma comment(lib, "../Debug/CPP_UnitTestApp.lib") 
    ```

8.  转到测试项目的项目设置添加对“UnitTest1”项目的引用（Project|Properties|Common Properties|Add New Reference...：在“Projects”下选择“CPP_UnitTestApp”-Project）

9.  创建单元测试函数：

    ```
    TEST_METHOD(TestMethod1)
    {
      int res = Plus1(12);
      Assert::AreEqual(13, res);
    } 
    ```

10.  运行你的单元测试；）

如您所见，重点是导出函数声明！`__declspec(dllexport)`即使它是一个 EXE，这也是通过它完成的。

正如我所说，演示项目可以在这里下载：[http ://blog.kalmbachnet.de/files/CPP_UnitTestApp.zip](http://blog.kalmbachnet.de/files/CPP_UnitTestApp.zip)

# python - 如何通过代码（在python中）找到网络的mtu值？

> ID：14010635
> 
> 赞同：7
> 
> 时间：2012-12-23T11:35:28.607
> 
> 标签：python, sockets, mtu

我必须编写一个代码，我需要在 python 中使用 udp 协议发送数据。我需要将数据包大小设置为网络的 MTU 值。有什么方法可以决定网络的 MTU 值在 python 中编写一些代码吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T15:07:06.400

此答案取自 [http://books.google.co.il/books?id=9HGUc8AO2xQC&pg=PA31&lpg=PA31&dq#v=onepage&q&f=false](http://books.google.co.il/books?id=9HGUc8AO2xQC&pg=PA31&lpg=PA31&dq#v=onepage&q&f=false) （第 31 页）

```
s = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)
hostName = #ip here
Port = 9999
s.connect((hostName, Port))
s.setsockopt(socket.IPPROTO_IP, IN.IP_MTU_DISCOVER, IN.IP_PMTUDISC_DO)
try:
    s.send('#' * 1473)
except socket.error:
    print 'The message did not make it'
    option = getattr(IN, 'IP_MTU', 14)
    print 'MTU:', s.getsockopt(socket.IPPROTO_IP, option)
else:
    print 'The big message was sent! Your network supports really big packets!' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-27T02:47:34.090

有一个提供此功能的 github-gist：

```
import re
import socket
import struct
import logging
import subprocess
from fcntl import ioctl

SIOCGIFMTU = 0x8921
SIOCSIFMTU = 0x8922

log = logging.getLogger(__name__)

def get_mtu_for_address(ip):
    routeinfo = subprocess.check_output(['ip', 'route', 'get', ip])
    dev = re.search('.*dev (\w+) .*', routeinfo).groups()[0]
    mtuinfo = subprocess.check_output(['ip', 'link', 'show', dev])
    mtu = re.search('.*mtu ([0-9]+) .*', mtuinfo).groups()[0]
    return int(mtu)

class Iface:
    def __init__(self, ifname):
        self.ifname = ifname

    def get_mtu(self):
        '''Use socket ioctl call to get MTU size'''
        s = socket.socket(type=socket.SOCK_DGRAM)
        ifr = self.ifname + '\x00'*(32-len(self.ifname))
        try:
            ifs = ioctl(s, SIOCGIFMTU, ifr)
            mtu = struct.unpack('<H',ifs[16:18])[0]
        except Exception, s:
            log.critical('socket ioctl call failed: {0}'.format(s))
            raise

        log.debug('get_mtu: mtu of {0} = {1}'.format(self.ifname, mtu))
        self.mtu = mtu
        return mtu

    def set_mtu(self, mtu):
        '''Use socket ioctl call to set MTU size'''
        s = socket.socket(type=socket.SOCK_DGRAM)
        ifr = struct.pack('<16sH', self.ifname, mtu) + '\x00'*14
        try:
            ifs = ioctl(s, SIOCSIFMTU, ifr)
            self.mtu = struct.unpack('<H',ifs[16:18])[0]
        except Exception, s:
            log.critical('socket ioctl call failed: {0}'.format(s))
            raise

        log.debug('set_mtu: mtu of {0} = {1}'.format(self.ifname, self.mtu))

        return self.mtu

if __name__ == "__main__":
    import sys
    logging.basicConfig()

    mtu = None
    if len(sys.argv) > 2:
        dev,mtu = sys.argv[1:]
    elif len(sys.argv) > 1:
        dev = sys.argv[1]
    else:
        dev = 'eth0'

    iface = Iface(dev)
    if mtu is not None:
        iface.set_mtu(int(mtu))

    print dev,'mtu =',iface.get_mtu() 
```

来源：[https ://gist.github.com/nzjrs/8934855](https://gist.github.com/nzjrs/8934855)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-14T22:28:41.560

接受的答案在 Python 3.7 中对我不起作用。我得到：`OSError: [Errno 6] Device not configured`

但是，`psutil`现在已经内置了。

```
import psutil
print(psutil.net_if_stats()) 
```

结果是：

```
{
  'lo0': snicstats(isup=True, duplex=<NicDuplex.NIC_DUPLEX_UNKNOWN: 0>, speed=0, mtu=16384), 
  'en0': snicstats(isup=True, duplex=<NicDuplex.NIC_DUPLEX_UNKNOWN: 0>, speed=0, mtu=1500), 
  ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-13T16:02:32.067

您可以简单地对带有`DF (Don't Fragment)`标志的 ping 进行二进制搜索。这是通过上述技术查找 MTU 的工作编码。它为您提供了完整数据包路由路径的最小 MTU，也就是您可以发送的最大有效负载。

**仅在 Windows 上测试（不适用于 Linux/Mac，因为不同操作系统中的 ping 标志不同）**

```
 # tested on Windows 10 Home and python 3.6 [at Great Istanbul, Turkey]
import subprocess
from time import perf_counter

class FindMinMtu:
    """
        - Find Minimum "Maximum Transmission Unit" of a packet routing path via Binary Search

        - Suppose you want to find how much data you can send in each packet
          from London to Turkey?
        - Now we need to remember MTU and MSS (Max. Segment size) isn't not the same.
          MSS is the actual data (not headers) you can send. A typical formula for MSS is
          MSS = MTU - (IP header_size  + TCP/UDP/Any Transport Layer Protocol header_size)
          whereas MTU = Everything in packet - Ethernet headers
          MTU typical refers to Ethernet MTU, AKA how much payload can an ethernet cable push through next hop.
    """

    def __init__(self, url: str):
        self.url = url

        self._low_mtu = 500
        # typically ethernet cables can carry 1500 bytes (but Jumbo fiber can carry upto 9K bytes AFAIK)
        # so increase it as per your requirements
        self._high_mtu = 1500
        self._last_accepted = self._low_mtu

    @staticmethod
    def yield_console_output(command):
        p = subprocess.Popen(command,
                             stdout=subprocess.PIPE,
                             stderr=subprocess.STDOUT)
        return iter(p.stdout.readline, b'')

    def does_accept_mtu_size(self, size) -> bool:
        command = 'ping {domain_name} -t -f -l {size}'.format(domain_name=self.url,
                                                           size=size).split()
        for line in self.yield_console_output(command):
            line = line.decode(encoding='utf-8')
            if line.startswith('Packet') and 'DF' in line:
                return False
            elif line.startswith('Reply'):
                return True

    def find_min_mtu(self):
        while self._low_mtu <= self._high_mtu:
            if not (self.does_accept_mtu_size(self._low_mtu), self.does_accept_mtu_size(self._high_mtu)):
                return self._last_accepted
            else:
                middle = (self._high_mtu + self._low_mtu) // 2
                print("Low: {} High: {} Middle: {}".format(self._low_mtu, self._high_mtu, middle))
                if self.does_accept_mtu_size(middle):
                    self._last_accepted = middle
                    self._low_mtu = middle + 1
                else:
                    self._high_mtu = middle - 1
        return self._last_accepted

if __name__ == '__main__':
    start = perf_counter()
    # please provide protocol less domain name (without http://, https:// and also without www or any subdomain)
    # provide the naked url (without www/subdomain)
    f = FindMinMtu("libwired.com")
    print("\nMTU: {} bytes (Found in {} seconds)".format(f.find_min_mtu(), perf_counter() - start)) 
```

# android - AndroidUpnpService 无法解析为类型

> ID：14010638
> 
> 赞同：1
> 
> 时间：2012-12-23T11:36:18.243
> 
> 标签：android, upnp

我正在尝试将[Cling](http://4thline.org/projects/cling/core/manual/cling-core-manual.html#chapter.Android)集成到我的 android 应用程序中，但无论我尝试什么它都不起作用，它一直告诉我它不被识别为一种类型。我不知道我必须添加什么作为库文件才能使其正常工作。有没有人在android上成功使用过紧贴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:39:04.810

您缺少 Cling 库。

1.  在这里下载（你想要 1.0）：http: [//4thline.org/projects/download/](http://4thline.org/projects/download/)
2.  将 Cling 核心和 Teleal 常用 jar 复制到您的项目中（例如 lib 目录）
3.  将 jars 添加到构建路径

# windows - 如何在 Windows 8 中运行后台任务？

> ID：14010639
> 
> 赞同：3
> 
> 时间：2012-12-23T11:36:23.510
> 
> 标签：windows, windows-8, microsoft-metro, windows-runtime

我需要你的帮助:(

我尝试激活 Windows 8 的后台任务以定期更新磁贴。我可以找到有用的链接“http://css.dzone.com/articles/how-create-debug-background”

我在这里得到的所有东西都在下面描述。

> > 要制作后台任务代理，我应该制作另一个项目。使用“Windows 运行时对象”会很好。
> > 
> > 我可以通过实现接口'IBackgroundTask'来制作代理。'IBackgroundTask.Run(IBackgroundTaskInstance taskInstance)' 中的代码会被定期处理。
> > 
> > 为了使它起作用，我应该在 .appmanifest 中引用“后台任务”。入口点与命名空间和实现“IBackgroundTask”的类相结合。

但是，它不起作用:(即使我正确复制了示例文件，但它根本不起作用。

我引用了包含我为此所做的解决方案文件的链接。请给我一个帮助:)

[http://sdrv.ms/UToyGu](http://sdrv.ms/UToyGu)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T13:54:30.557

“Test”项目没有对“BackgroundService”的引用

右键单击Test项目中的References -> Add Reference... -> Solution -> BackgroundService -> OK

# android - 姜饼和果冻豆的Android字体大小差异问题

> ID：14010644
> 
> 赞同：0
> 
> 时间：2012-12-23T11:37:02.230
> 
> 标签：android, layout, font-size

模拟器/设备规格：

**高密度脂蛋白**

**分辨率**1280 x 800

**屏幕尺寸**5.3

以下两个图像是从具有上述规格的两个模拟器中捕获的。两个模拟器除了操作系统版本外都一样

![在此处输入图像描述](../Images/40efa9bf1d6a55e8378d9b4c1fb46d4d.png) **ANDROID** 2.3.5（姜饼）

![在此处输入图像描述](../Images/1011283614c1ac34ec6e14ad1939b5f3.png) **ANDROID** 4.1.1（果冻豆）

我为 EditText 使用了自定义背景图像。对于两个模拟器，EditText **android:textAppearance**属性设置为**70sp**。

所以，我的问题是为什么果冻豆上的文字大小比姜饼上的文字大小大？

注意：这个问题也出现在 ICS 上。

**更新：**

![在此处输入图像描述](../Images/dfd316e447a42e61aab71e18ef0b7215.png)

这就是我在制作 EditText 背景图像九个补丁后现在得到的。文本不适合 EditText

以下是 XML 中的 EditText 属性。

```
 <EditText
        android:id="@+id/phone_number"
        android:layout_width="fill_parent"
        android:layout_height="150dip"
        android:layout_gravity="center"
        android:layout_marginLeft="28dip"
        android:layout_marginRight="28dip"
        android:background="@drawable/lcdscreen_no_glow"
        android:singleLine="true" 
        android:maxLength="12"
        android:inputType="phone"
        android:textAppearance="@style/EditTextStyleMedium"      
        android:gravity="center"
        android:textStyle="bold"
        android:clickable="false"
        android:longClickable="false"
        android:cursorVisible="false"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:44:12.100

> 我为 EditText 使用了自定义背景图像

该背景图像应该是一个包含九个补丁的 PNG 文件，以便它可以相应地拉伸。

> 所以，我的问题是为什么果冻豆上的文字大小比姜饼上的文字大小大？

如果没有别的，默认字体是不同的。Android 1.x/2.x 使用 Droid 字体系列，而 Android 4.x 使用 Ruboto。由于通过眼球，高度看起来相同，因此 Ruboto 字形`9`显然更宽。

# java - Spring阻止用户通过浏览器和ajax访问url

> ID：14010646
> 
> 赞同：2
> 
> 时间：2012-12-23T11:37:10.030
> 
> 标签：java, spring, spring-mvc, spring-security

我在使用 Springs 安全配置时遇到问题。我在下面分享我的代码。

我的问题是我想要`/user*`url 并且`/admin*`只有在用户登录到我的应用程序时才应该访问 url，我的应用程序有主要的 ajax 调用，所以我不希望用户在`/user*`没有登录的情况下访问 URL。但是当我尝试在其中键入 URL 时网络浏览器我什至没有被重定向到登录页面，而是进入了输入 URL 的页面。

所以任何人都可以帮我解决这个问题。

弹簧安全.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans:beans xmlns="http://www.springframework.org/schema/security"
     xmlns:beans="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.springframework.org/schema/beans 
     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
     http://www.springframework.org/schema/security
     http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<http auto-config="true">
    <intercept-url pattern="/user**" access="ROLE_USER" />
    <form-login login-page="/login" default-target-url="/user/home"
        authentication-failure-url="/loginfailed" />
    <logout invalidate-session="true" logout-success-url="/logout" />
</http>

<authentication-manager>
    <authentication-provider>
        <jdbc-user-service data-source-ref="dataSource"
            users-by-username-query="select USERNAME, PASSWORD from USER where USERNAME = ?"
            authorities-by-username-query="ROLE_USER"
        />
    </authentication-provider>
</authentication-manager> 
```

web.xml

```
 <?xml version="1.0" encoding="utf-8" standalone="no"?><web-app 
      xmlns="http://java.sun.com/xml/ns/javaee"
      xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5"
      xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
      http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<servlet>
    <servlet-name>Admin</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Admin</servlet-name>
    <url-pattern>/admin*</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>User</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>User</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<listener>
    <listener-class>
              org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/User-servlet.xml,
        /WEB-INF/Spring-Datasource.xml,
        /WEB-INF/spring-security.xml
    </param-value>
</context-param>

<!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>
              org.springframework.web.filter.DelegatingFilterProxy
    </filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<welcome-file-list>
    <welcome-file>index</welcome-file>
</welcome-file-list>
    <servlet>
          <servlet-name>SystemServiceServlet</servlet-name>
          <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
    <init-param>
        <param-name>services</param-name>
        <param-value/>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>SystemServiceServlet</servlet-name>
    <url-pattern>/_ah/spi/*</url-pattern>
</servlet-mapping>
    </web-app> 
```

ControllerServlet.java

```
 @Controller
    public class UserController {
    @RequestMapping(value = "/login", method = RequestMethod.GET)
    public String getUserLoginPage(){
        return "user/index";
    }

    @RequestMapping(value = "/loginfailed", method = RequestMethod.GET)
    public String showErrorLoginPage(ModelMap modelMap){
        modelMap.addAttribute("message", "Invalid Login Credentials");
        return "user/index";
    }

    @RequestMapping(value = "/user/home", method = RequestMethod.GET)
    public String getUserHomePage(ModelMap modelMap, Principal principal){
       //String name = principal.getName();
       //modelMap.addAttribute("name", name);
       return "user/home";  
    }

    @RequestMapping(value = "/logout", method = RequestMethod.GET)
    public String showLogoutPage(ModelMap modelMap){
       return "user/index";
    }
    } 
```

数据库设计/代码：

```
 create table USER(ID BIGINT NOT NULL AUTO_INCREMENT, USERNAME varchar(20) NOT NULL UNIQUE, PASSWORD varchar(20) NOT NULL, FIRSTNAME varchar(25) NOT NULL, LASTNAME varchar(25) NOT NULL, UPDATED_ON varchar(25) NOT NULL, PRIMARY KEY (ID)); 
```

登录表格代码：

```
 <form class="form-horizontal" method="POST"
                action="<c:url value='/j_spring_security_check' />" id="loginForm">
                <div class="span4"></div>
                <div class="span5" style="background-color: #FBFBFC; border: solid 1px #CCC;padding: 30px 5px 30px 5px;">
                <div class="span1"></div>
                <fieldset>                      
                    <legend>Login Here</legend>
                    <div class="control-group">
                        <label for="username">Username</label>
                        <input type="text" name="j_username" id="username"
                                placeholder="Username"
                                title="Please enter your username" data-placement="right" />
                        <div class="clear"></div>
                        <span id="errorSpan"></span>
                    </div>

                    <div class="control-group">
                        <label for="password">Password</label>
                        <input type="password" name="j_password" id="password"
                                placeholder="Password" title="Please enter your password"
                                data-placement="right" />
                        <div class="clear"></div>
                        <span id="errorSpan"></span>
                    </div>

                    <div class="control-group">
                        <label>&nbsp;</label>
                            <input type="submit" class="btn btn-primary" value="Sign In" />
                    </div>
                    <div class="span1"></div>
                </fieldset>
                </div>
                <div class="span3"></div>
            </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T11:42:30.140

你的模式是错误的

```
pattern="/user/**" 
```

应该是对的。
为了更好地理解图案中的星星：

*   `xx/**`意味着下面的完整树结构`xx`是安全的。

*   `xx/*`意味着只有其中的数据`xx`是安全的。

*   `xx/*.rar`在这种情况下`*`是文件的通配符，因此所有 .rar 文件都是安全的。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T12:27:09.810

有两个问题：

首先，您必须更正地址模式：例如`user/**`

其次，如果您对受保护的资源进行了安静的调用，则很可能会发生这种情况。
检查萤火虫。您会看到一个`302 redirect`作为对您请求的响应。在这种情况下，您最好不要使用重定向，而是给出`403 access denied`响应并在您的 ajax 框架中手动处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T12:15:09.577

您还应该像对 **users-by-username-query所做的那样，为****authority-by-username-query指定一个查询**

 **```
<jdbc-user-service data-source-ref="dataSource"
     users-by-username-query="select USERNAME, PASSWORD from USER where USERNAME = ?"
     authorities-by-username-query="ROLE_USER"
/> 
```

例如

```
authorities-by-username-query="select u.username, ur.authority from user u, user_roles ur 
              where u.user_id = ur.user_id and u.username =?" 
```

还可以考虑在您的配置中添加[密码编码器](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ns-config.html#ns-password-encoder)，这样您的数据库中就没有纯文本密码**

# java - 为什么 cookieManager 的 cookie 与 Android 中 httpClient 的 cookie 不同？

> ID：14010649
> 
> 赞同：1
> 
> 时间：2012-12-23T11:38:23.773
> 
> 标签：java, android, cookies

我正在为 Android 编写一个程序，它将一些发送`POST`到 webService， `HttpClient`如下所示：

```
 DefaultHttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://example.com/service");
          List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
      nameValuePairs.add(new BasicNameValuePair("email", email));
      nameValuePairs.add(new BasicNameValuePair("password", password));
         // Execute HTTP Post Request
      ResponseHandler<String> responseHandler=new BasicResponseHandler();
      String response = httpclient.execute(httppost , responseHandler) ; 
```

我试图检索一个名为“Form”的“www.example.com”cookie，如下所示：

```
 `
    Log.d("Cookie0" , httpclient.getCookieStore().getCookies().get(0).getValue()) ;              
    Log.d("Cookie1", CookieManager.getInstance().getCookie("http://example.com")); 
```

但是检索 cookie 的两种方法会为“Form”返回两个不同的值！为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:41:06.430

根据[文档](http://developer.android.com/reference/android/webkit/CookieManager.html) `CookieManager`用于 WebViews 中的 cookie：

> 管理应用程序的 WebView 实例使用的 cookie

所以如果你想从你的请求中获取cookie`httpclient.getCookieStore()`应该是正确的方法。

# git - git记不住密码

> ID：14010650
> 
> 赞同：8
> 
> 时间：2012-12-23T11:38:37.113
> 
> 标签：git, github, bitbucket

我是使用 git 的新手。每次我想将我的文件推送到 github 时，它总是向我显示输入密码的通知。例如：“https://username@bitbucket.org”的密码

我希望我的 git 为我记住密码。我应该如何在 Windows 7 上做到这一点？我已经在这里阅读了帮助页面[https://help.github.com/articles/set-up-git](https://help.github.com/articles/set-up-git)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-23T11:49:29.607

如果您按照 Github 上的说明进行操作，请注意这一行。

> 很高兴知道：凭据帮助程序仅在您克隆 HTTPS 存储库 URL 时起作用。如果您改用 SSH 存储库 URL，则使用 SSH 密钥进行身份验证。

您正在使用 ssh，因此 git 凭证助手无法正常工作。你有几个选择。

*   设置 ssh-agent 来存储您的 ssh 密钥密码。

ssh 问题并非特定于 git。您可以设置一个 ssh-agent，这样您只需输入一次 ssh 密钥密码。它将被记住，安全地存储在内存中，直到您注销。 [Github 有一个关于设置 ssh-agent 的教程](https://help.github.com/articles/working-with-ssh-key-passphrases#platform-windows)。

无论您选择哪个选项，我都强烈建议您花时间设置 ssh-agent。SSH 是如此有用且如此广泛，您将再次遇到这个问题。

*   切换到使用 https 而不是 ssh。

而不是从克隆，`git@github.com:username/my-repo.git`您可以从`https://github.com/username/my-repo.git`. 它是`http`您的项目页面上的按钮。然后 github 文档中描述的 git credential helper 将起作用。您可能必须先安装它，或者使用他们的 Github 应用程序。[这一切都在Github on Windows 设置指南](https://help.github.com/articles/set-up-git#platform-windows)的密码缓存部分中进行了描述。

*   使用他们的 Github 应用程序。

[该指南](https://help.github.com/articles/set-up-git#platform-windows)提到他们现在有一个 Github 应用程序，它可能会为你解决这个问题。然而，这只是一个权宜之计，因为其他 git 服务器不会有这样的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T12:15:58.570

github 允许两种不同的方法访问您的存储库：https 和 ssh。

在您问题的第一个版本中，您将 git 配置为通过 ssh 访问 github。因此 git 调用 ssh 尝试读取您的密钥并询问您 ssh 密钥的密码。

当您创建您的 ssh 密钥时，您可以通过密码来保护它或决定不这样做。

如果您决定输入密码，那么您要么必须在每次要使用密钥时输入密码（即推送、获取等），要么可以使用 ssh-agent。在最后一种情况下，您只需在将密钥添加到代理时输入一次密码。之后，代理将为您完成所有授权。

在 Windows 上，您可以使用 PuTTY 工具来管理您的密钥： http: [//www.chiark.greenend.org.uk/~sgtatham/putty/download.html](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)

您可以使用它`puttygen`来生成新密钥或更改现有密钥。（例如删除密码）

您可以`pagent`用作 ssh 代理。启动后它将驻留在通知区域。单击图标以添加您的密钥。

一旦您的代理知道了密钥，就不应再要求您提供 ssh 密码。

# python - 使用循环检查值是否已更改？

> ID：14010651
> 
> 赞同：2
> 
> 时间：2012-12-23T11:38:41.827
> 
> 标签：python, loops, python-2.7, detect

我对编程完全陌生，请多多包涵。我有一个关于循环和如何检测变化的问题。例如，我的清单是：

```
['09/2004', 297294186.0]
['09/2004', 257905788.0]
['09/2004', 768116019.0]
['09/2004', 458513425.0]
['08/2004', 251973518.0]
['08/2004', 265328010.0]
['08/2004', 330020350.0]
['08/2004', 383188410.0]
['08/2004', 487483400.0]
['08/2004', 800294431.0]
['08/2004', 999609680.0]
['08/2004', 1237831666.0]
['08/2004', 2242789646.0] 
```

我想找到每个月的平均值。我知道如何找到它，但我能想到的唯一方法是

```
for i in list:
 if month == '08'
    do average

    if month =='09'
    do average

    if month == '10'
    do average 
```

有没有什么办法可以做一个循环来自动检测月份何时发生变化，计算该月的平均值，然后自动继续，而不是执行大量的 if 命令？

任何帮助深表感谢

威廉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T11:42:42.013

你可以用你的月份制作一本字典：

```
from collections import defaultdict

months = defaultdict(list)

for date, number in data:
    month, year = date.split('/')

    months[month].append(number) 
```

现在，`months`看起来`{'08': [1, 2, 3, ...], '09': [5, 6, 7, ...]}`。从那里，计算平均值非常简单：

```
averages = {m: sum(months[m]) / len(months[m]) for m in months} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T11:46:54.423

使用`itertools.groupby()`：

```
In [7]: from itertools import groupby

In [8]: lis=[['09/2004', 297294186.0],
['09/2004', 257905788.0],
['09/2004', 768116019.0],
['09/2004', 458513425.0],
['08/2004', 251973518.0],
['08/2004', 265328010.0],
['08/2004', 330020350.0],
['08/2004', 383188410.0],
['08/2004', 487483400.0],
['08/2004', 800294431.0],
['08/2004', 999609680.0],
['08/2004', 1237831666.0],
['08/2004', 2242789646.0]]

In [10]: from operator import itemgetter

In [11]: for k,g in groupby(lis,key=itemgetter(0)):
    li=[x[1] for x in g]
    print k,sum(li)/float(len(li))
   ....:     
09/2004 445457354.5
08/2004 777613234.556 
```

如果您的列表未排序，那么您需要使用`groupby(sorted(lis),key=itemgetter(0))`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T11:45:28.783

如果我理解正确，您只想在列表中每月平均一次？我能想到的一种方法是分配标志。每个月都有一个带有标志的数组（例如，如果包含所有月份，则创建一个大小为 12 的布尔数组。这样每次都使用您读取的数字作为数组中的位置来检查平均值是否已完成

# ruby-on-rails - Rails 部分渲染和设计动作

> ID：14010653
> 
> 赞同：3
> 
> 时间：2012-12-23T11:39:00.427
> 
> 标签：ruby-on-rails, ruby, routing, partial-views

例如，在我的 rails 应用程序中，我设计了注册操作 (http:// ***** :3000/users/sign_up) 并得到错误：

```
No route matches {:controller=>"devise/vehicle_types", :action=>"search_vehicle_type"} 
```

我认为这是因为我在设计路由的命名空间中......但是我通常如何呈现注册视图？我的布局部分看起来是这样的：

```
= render :partial => 'vehicle_types/findtype' 
```

而这部分：

```
.form
  = form_tag :controller => 'vehicle_types', :action => 'search_vehicle_type' do 
    = select("post", "MFA_ID", Manufacturer.all.collect {|p| [ p.MFA_BRAND, p.MFA_ID ] }, {:prompt => 'Марка'}, :class => "login-input man-select")
    = select_tag "models", options_for_select(['Модель', nil]), :class => "login-input mod-select", :prompt => 'Модель', :disabled => :true
    = select_tag "fueltype", options_for_select([['Тип топлива', nil], ['Не важно', nil], ['Бензин', 53302], ['Дизель', 53205], ['Газ', 53241], ['Гибрид', 55554], ['Электродвигатель', 52433]]), :class => "login-input fuel-select"
    = text_field_tag "year", nil, :placeholder => "Год выпуска", :class => "login-input"
    .submit-area
      .left
        = submit_tag "Выбор", :class => "orange-button" 
```

在其他页面（非设计）上一切正常，但是当我去密码恢复或注册时，我得到了错误。但为什么？以及如何解决？

也是路线的一部分：

```
Oleg::Application.routes.draw do 
devise_for :users
match '/search_vehicle_type' => 'vehicle_types#search_vehicle_type'
root :to => 'pages#index'
end 
```

我还在这里阅读了有关链接[https://github.com/plataformatec/devise/issues/471](https://github.com/plataformatec/devise/issues/471)的信息，但是如何进行部分操作？

和`rake routes | grep devise`

```
new_admin_session GET    /admins/sign_in(.:format)                                                 devise/sessions#new
                  admin_session POST   /admins/sign_in(.:format)                                                 devise/sessions#create
          destroy_admin_session DELETE /admins/sign_out(.:format)                                                devise/sessions#destroy
                 admin_password POST   /admins/password(.:format)                                                devise/passwords#create
             new_admin_password GET    /admins/password/new(.:format)                                            devise/passwords#new
            edit_admin_password GET    /admins/password/edit(.:format)                                           devise/passwords#edit
                                PUT    /admins/password(.:format)                                                devise/passwords#update
      cancel_admin_registration GET    /admins/cancel(.:format)                                                  devise/registrations#cancel
             admin_registration POST   /admins(.:format)                                                         devise/registrations#create
         new_admin_registration GET    /admins/sign_up(.:format)                                                 devise/registrations#new
        edit_admin_registration GET    /admins/edit(.:format)                                                    devise/registrations#edit
                                PUT    /admins(.:format)                                                         devise/registrations#update
                                DELETE /admins(.:format)                                                         devise/registrations#destroy
               new_user_session GET    /users/sign_in(.:format)                                                  devise/sessions#new
                   user_session POST   /users/sign_in(.:format)                                                  devise/sessions#create
           destroy_user_session DELETE /users/sign_out(.:format)                                                 devise/sessions#destroy
                  user_password POST   /users/password(.:format)                                                 devise/passwords#create
              new_user_password GET    /users/password/new(.:format)                                             devise/passwords#new
             edit_user_password GET    /users/password/edit(.:format)                                            devise/passwords#edit
                                PUT    /users/password(.:format)                                                 devise/passwords#update
       cancel_user_registration GET    /users/cancel(.:format)                                                   devise/registrations#cancel
              user_registration POST   /users(.:format)                                                          devise/registrations#create
          new_user_registration GET    /users/sign_up(.:format)                                                  devise/registrations#new
         edit_user_registration GET    /users/edit(.:format)                                                     devise/registrations#edit
                                PUT    /users(.:format)                                                          devise/registrations#update
                                DELETE /users(.:format)                                                          devise/registrations#destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T04:38:28.617

虽然它可能不是最好的样式，但最简单的解决方法是在 form_tag 中使用实际路径：

```
.form
  = form_tag "/search_vehicle_type" do
  # Rest of the form 
```

另一种选择是在您的 routes.rb 文件中命名路由：

```
match '/search_vehicle_type' => 'vehicle_types#search_vehicle_type', :as => :search_vehicle_type 
```

然后在 form_tag 中使用该命名路由：

```
.form
  = form_tag search_vehicle_type_path do
  # Rest of the form 
```

# iphone - 我如何知道用户是否处于漫游状态

> ID：14010655
> 
> 赞同：0
> 
> 时间：2012-12-23T11:39:13.863
> 
> 标签：iphone

我如何知道用户是否处于漫游状态？

我可以为此使用可达性吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T12:52:10.690

不这么认为.. 可达性只会告诉您是否有互联网以及是通过 wifi 还是通过蜂窝网络。**它不提供详细的提供商信息/状态**

# android - RelativeLayout layout_torightof 不适用于自定义视图类

> ID：14010659
> 
> 赞同：0
> 
> 时间：2012-12-23T11:40:06.960
> 
> 标签：android

您好我正在尝试将我的自定义视图类定位在我的主要相对布局中。

relativelayout layout_torightof 在 xml 布局中不起作用，并导致其他视图在我的自定义视图类上绘制。这是我的代码。

```
public class LeftNavBarUI extends RelativeLayout implements OnClickListener {

TextView facebook, twitter;
private static Context mContext;

public LeftNavBarUI(Context context, AttributeSet attrs) {
    super(context);
    mContext = context;
    LayoutInflater li = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    li.inflate(R.layout.leftbar, this);

    facebook = (TextView) findViewById(R.id.facebook);
    twitter = (TextView) findViewById(R.id.twitter);
    facebook.setOnClickListener(this);
    twitter.setOnClickListener(this);
}

@Override
public void onClick(View v) {

    Intent intent = new Intent();
    intent.setClass(mContext, AlbumActivity.class);

    switch(v.getId()){

      case R.id.facebook: 
        {
            intent.putExtra(AppConstants.PROVIDER_NAME, "facebook");
            mContext.startActivity(intent);

           break;
        }
      case R.id.twitter: /** AlerDialog when click on Exit */
      {
          intent.putExtra(AppConstants.PROVIDER_NAME, "twitter");
          mContext.startActivity(intent);
          break;
      }

    }        
}
} 
```

```
<org.labs.lifeviewmobile.ui.LeftNavBarUI
android:id="@+id/leftbar"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
/>

<TextView
    android:id="@+id/title"
    style="@style/ActionBarView_TabText"
    android:layout_width="fill_parent"
    android:layout_height="30dip"
    android:textStyle="bold"
    android:textSize="13sp"
    android:background="@drawable/bar_gradient"
    android:layout_toRightOf="@+id/leftbar"
    android:paddingLeft="7dip"
    android:paddingBottom="5dip"
    android:paddingTop="5dip" />

<GridView
    android:id="@+id/gridview"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/title"
    android:animateLayoutChanges="true"
    android:clipChildren="true"
    android:gravity="top"
    android:layout_toRightOf="@+id/leftbar"
    android:listSelector="@drawable/image_background"
    android:numColumns="4"
    android:padding="10dip"
    android:paddingTop="10dp"
    android:scrollbarFadeDuration="0"
    android:scrollbarStyle="outsideOverlay"
    android:visibility="gone"
    android:scrollbars="vertical" />

 <TextView
    android:id="@+id/blank_message"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/leftbar"
    android:layout_centerVertical="true"
    android:textStyle="bold"
    android:textSize="13sp"
    android:textColor="#ffffff"
    android:paddingLeft="125dp"
    />
  <ProgressBar
    android:id="@+id/pbar"
    style="@android:style/Widget.ProgressBar.Small"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:visibility="gone"
    android:layout_centerInParent="true" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T20:55:18.813

问题在于这条线

android:layout_toRightOf="@+id/leftbar"

它应该是

android:layout_toRightOf="@id/leftbar"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T21:19:55.110

您忘记将 AttributeSet 传递给父级，将构造函数更改为：

```
public LeftNavBarUI(Context context, AttributeSet attrs) {
    super(context, attrs);

    // rest of your constructor code
} 
```

这些属性是您在 xml 中设置的，您需要将它们传递给您的父级，否则它们将不适用。

# c# - 查找包含闭包/ lambda的函数的属性

> ID：14010660
> 
> 赞同：2
> 
> 时间：2012-12-23T11:40:18.653
> 
> 标签：c#, .net, reflection

我有一个扩展功能......

```
public static class EventLibrary
{
    [EventCollection]
    public static Event Sequence(this Event ev)
    {
        ev.Started += (args) =>
        {
            // do something!
        }
    }
} 
```

然后，在 Event 内部，我使用以下命令查看委托订阅者...

```
var dels = new List<Delegate[]>();
if (Started != null) 
    dels.Add(Started.GetInvocationList()); 
```

原因是尝试检测创建闭包的函数是否具有属性，如本例所示`EventCollection`。在 Delegate 对象上，两者都`DelcaringType`返回类似的`ReflectedType`东西，`EventLibrary+<Sequence>c_AnonStorey1`但据我所知。

我很想在没有任何字符串操作的情况下做到这一点，但我不确定这是否可能......有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:59:53.740

我相信没有办法可靠地做到这一点。你能做的最接近的是得到`DeclaringType`，但没有类似的东西`DeclaringMethod`。

您似乎已经注意到您可以尝试使用 lambda 方法的名称，但这样做会很脆弱（方法重载呢？）并且在其他语言（如 VB.NET）或未来版本的编译器中可能无法正常工作.

我认为最好的方法是通过某种方式配置`Event`来告诉它你想要什么。可能是这样的：

```
var eventCollectionEvent = ev.EventCollection;
eventCollectionEvent.Started += …; 
```

# java - f:ajax 监听器没有被调用

> ID：14010662
> 
> 赞同：0
> 
> 时间：2012-12-23T11:40:39.430
> 
> 标签：java, ajax, jsf

我在考虑 JSF 和 AJAX 时遇到了问题。在访问者插入客户 ID 后，我正在尝试更新一些客户详细信息。

首先，摘自 xhmtl 代码：

```
 <h:form>
    <h:panelGrid columns="2">
        <h:panelGrid columns ="2" border="1" id="customer_grid">
            <h:outputLabel value="#{mbean_msg.reservation_lblCustomerNo}" for = "customer_id"/>
            <h:inputText id = "customer_id" value="#{reservationHandler.customer.customer_id}">
                <f:ajax listener="{reservationHandler.autocompleteCustomerDetails}" 
                    render="customer_grid" />
            </h:inputText>

            <h:outputLabel value="#{mbean_msg.reservation_lblLastname}" for="lastname"/>
            <h:inputText id="lastname" value="#{reservationHandler.customer.lastname}" required ="true" 
                requiredMessage="#{error_msg.errmsgLastname}" validator="#{reservationHandler.validateCustomer}"/>

            <h:outputLabel value="#{mbean_msg.reservation_lblFirstname}" for="firstname"/>
            <h:inputText id="firstname" value="#{reservationHandler.customer.firstname}" required ="true"
                requiredMessage="#{error_msg.errmsgFirstname}" validator="#{reservationHandler.validateCustomer}"/> 
```

侦听器方法在我的 java 文件 (ReservationHandler.java) 中实现，如下所示：

```
public void autocompleteCustomerDetails(){
      System.out.println("Auto Complete"); // for testing
} 
```

基本上我正在尝试使用侦听器调用方法*autocompleteCustomerDetails 。*不幸的是，这个方法永远不会被调用。无论如何，渲染似乎工作得很好，因为其他*inputTexts*更新自己（可见）。

有谁知道，为什么不叫听众？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T16:55:27.530

目前显示的代码有两个问题：

第一的，

```
<f:ajax listener="{reservationHandler.autocompleteCustomerDetails}" /> 
```

这不是有效的 EL 表达式。EL 表达式的形式为`#{}`, not `{}`。相应地修复它：

```
<f:ajax listener="#{reservationHandler.autocompleteCustomerDetails}" /> 
```

* * *

第二，

```
public void autocompleteCustomerDetails() { 
```

这不是`<f:ajax listener>`. [标签文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/ajax.html)清楚地说明了以下内容：

> 签名必须匹配`public void processAjaxBehavior(javax.faces.event.AjaxBehaviorEvent event) throws javax.faces.event.AbortProcessingException`。

所以，你忘记了争论。相应地添加它。对于`throws`未经检查的异常，声明不是强制性的，因此我们可以将其省略。

```
public void autocompleteCustomerDetails(AjaxBehaviorEvent event) { 
```

或者，如果你真的打算去掉这个参数，那么你应该在 EL 方法表达式中加上括号：

```
<f:ajax listener="#{reservationHandler.autocompleteCustomerDetails()}" /> 
```

请注意，这仅在您的容器支持 EL 2.2 时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:25:25.937

尝试这个：

```
<f:ajax listener="{reservationHandler.autocompleteCustomerDetails()}" 
                render="customer_grid" /> 
```

或将方法更改为：getAutoCompleteCustomerDetails

只是为了测试...

无论如何，您不允许使用任何 jsf 的组件库吗？喜欢素面？它以如此简单的方式完成工作......

无论如何，对于primefaces，我会这样做：

```
 <p:ajax event="blur" listener="#{prospectoRadarController.atualizarRadar(data)}" update=":mainForm:painelRadar" /> 
```

另一个猜测是，将 execute="@this" 添加到 ajax 标志...

对不起，这些都是疯狂的猜测，但我真的很想帮忙。请反馈！

# jquery - 如何使用 jQuery 触发 CSS3 缩放（动画）？

> ID：14010665
> 
> 赞同：2
> 
> 时间：2012-12-23T11:40:50.657
> 
> 标签：jquery, css-transitions, css-animations

我想要实现的是对动作的脉动效果（例如单击按钮）。所以我做的是这个（简化的[删除浏览器细节]）：

```
@keyframes pulse {
  0% {transform: scale(1);}
  50% {transform: scale(1.02);}
  100% {transform: scale(1);}
}

.pulsate{
  animation-name: pulse 0.2s linear 2;
} 
```

在 jQuery 中，我这样做了：

```
$('#btn').click(function(e)){
    e.preventDefault();
    $('#some_element').addClass('pulse');
} 
```

它工作正常，但只是第一次......一旦添加了“脉冲”类，它就不再触发......所以我试图做的是：

```
$('#btn').click(function(e)){
    e.preventDefault();
    $('#some_element').removeClass('pulsate').addClass('pulsate');
} 
```

它仍然无法正常工作......与此相反：

```
$('#btn').click(function(e){
    e.preventDefault();     
    $('#some_element').toggleClass('pulsate');
} 
```

这第一次有效，第二次无效，但第三次又有效；所以基本上每隔一段时间。

我很困惑。为什么它会以这种方式工作而不是再次删除和添加它？我什至尝试创建一个重置类（再次简化）：

```
.reset_transform(){
    transform: none;
} 
```

在 jQuery 中，我正在做类似的事情：

```
$('#btn').click(function(e)){
  e.preventDefault();
  $('#some_element').removeClass('pulsate').addClass('reset_transform').addClass('pulsate');
} 
```

但正如你可以想象的那样，它不起作用......有什么想法吗？我希望每次单击按钮时元素都会跳动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T13:00:50.853

这是我的问题的解决方案。正如@Aspiring Aqib 指出的那样，我在添加和删除类之间需要延迟。他使用了一个 delay() jquery，但它不起作用。

这是我使用 setTimeout() 的解决方案；

```
$('#some_element').addClass('pulsate');

setTimeout(function(){
   $('#some_element').removeClass('pulsate');
}, 800); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T11:50:03.993

`ToggleClass()`没有用，因为当您第一次单击它时，它添加了类并播放了动画。当您第二次单击它删除该类时，这一次，类被删除，这就是它不播放动画的原因。第三次，它像第一次一样工作，这个过程将继续：/

```
$('#btn').click(function(e)){

    e.preventDefault();

    $('#some_element').addClass('pulse').delay(200).removeClass('pulse');
} 
```

好吧，我不认为上面的代码会起作用！:)

# iis - IIS7.5 default.aspx 重定向到 root，但仅限于 www

> ID：14010675
> 
> 赞同：0
> 
> 时间：2012-12-23T11:42:16.517
> 
> 标签：iis, iis-7.5

我注意到，当在浏览器中以“www.mysite.com”的形式输入我的网站时，这正是它保持的方式，但是当输入“mysite.com”时，它会重定向到“www.mysite.com/default.aspx”。谁能给我解释

1.  为什么“www”不显示default.aspx，虽然我没有设置任何url重写，并且
2.  为什么“www”行为与非“www”行为不同。

我的目标是非“www”也不应该显示“default.aspx”。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:20:49.470

打开 IIS 管理器，这里是链接[如何：打开 IIS 管理器](http://msdn.microsoft.com/en-us/library/bb763170%28v=vs.100%29.aspx)

接下来在左侧面板上选择您的网站并双击“默认文档”图标

![在此处输入图像描述](../Images/2ceaef592ac03b1d5371103a5d98d8cd.png)

您可以在此处删除所有默认页面并添加您想要的页面。

![在此处输入图像描述](../Images/e0a05c7faa2d7946a8a88ffa9c0ad717.png)

您实际上不必有任何默认页面。

希望这可以帮助！

# php - 使用 .htaccess 将 .html 重定向到 .php

> ID：14010681
> 
> 赞同：0
> 
> 时间：2012-12-23T11:43:44.607
> 
> 标签：php, mod-rewrite

我有 5 个 wordpress 网站都使用相同的编码模板。该编码模板（我无法更改）使用一些基本的 html 布局代码调用名为“2012.orange.html”的文件。我在服务器的“/home/”目录中创建了一个“my_template.php”，并在我的模板目录中创建了另一个“2012_orange.php”文件，该文件“包含”来自“/home/”的“my_template.php”。

我的目标是让“/home/”目录中的“my_template.php”文件用于控制 5 个不同站点的布局，但我不知道如何获取特定的 .html 文件来调用.php 代替。

我使用以下代码对我的“robots.txt”做了类似的事情，效果很好：

```
# BEGIN - Robots Rewrite
RewriteEngine on
RewriteRule ^robots\.txt$ robots.php [L]
## END - Robots Rewrite 
```

但我无法让它工作......我没有得到任何 html 布局：

```
# BEGIN - Template Rewrite
RewriteEngine on
RewriteRule ^2012\.orange\.html$ 2012_orange.php [L]
## END - Template Rewrite 
```

再说一遍，2012_orange.php 将只包含以下内容：

```
<?php include ('/home/my_template.php'); ?> 
```

关于如何让 .htaccess 在调用原始 .html 时重定向到文件的 .php 版本的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:52:17.260

.htaccess 仅在 HTTP 请求中用于重定向*url*。脚本运行后，.htaccess 不会以任何方式包含模板，因为您包含的是文件，而不是 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T16:06:05.810

`2012_orange.php`您可以从公用文件夹中键入文件路径吗？

您的代码对于根目录中的 2012_orange.php 似乎工作正常，

如果您`2012_orange.php`在另一个文件夹中有文件，则必须更改路径`home/2012_orange.php`

```
# BEGIN - Template Rewrite
RewriteEngine on
RewriteRule ^2012\.orange\.html$ home/2012_orange.php [L]
## END - Template Rewrite 
```

# c++ - std::string 实现和表达式模板

> ID：14010682
> 
> 赞同：3
> 
> 时间：2012-12-23T11:43:54.687
> 
> 标签：c++, string, complexity-theory

似乎 std::string - 因为它不使用表达式模板 - 对于连接等某些操作具有 O(n^2) 复杂性而不是可能的 O(n) 复杂性。当您必须插入许多元素时，与 std::stringstream 类相同。

我想了解这一点，至少如果有人可以就这一点有一些很好的链接，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T14:30:29.397

将多个字符串连接在一起在 C++ 中具有不同的复杂性，具体取决于它是如何完成的。我相信您正在考虑的情况是：

```
string result = string("Hello, ") + username + "! " +
                "Welcome to " + software_product + "."; 
```

它连接了 6 个字符串。第一个字符串被复制 5 次，第二个字符串被复制 4 次，以此类推。正如[Leonid Volnitsky](https://stackoverflow.com/a/14011365/197788)在他的回答中指出的那样，这个 Θ(NM) 的确切界限，其中 M 是连接操作的数量，N 是被连接的字符串的总长度。当 M <= N 时，我们也可以称之为 O(N^2)。请注意，不能保证 M <= N，因为您可以通过尝试连接空字符串来增加 M 而不会增加 N。

表达式模板可以帮助加速这个用例，尽管它会导致C++11 中的类型推断`auto`和`decltype`C++98 中的模板类型推断出现问题。所有这些都会推断出的类型

```
auto result = string("Hello, ") + username + "! " +
              "Welcome to " + software_product + "."; 
```

是用于使表达式模板魔术发生的惰性求值字符串模板类型。表达式模板不是一个好主意的其他原因包括[Leonid Volnitsky](https://stackoverflow.com/a/14011365/197788)关于减慢编译时间的回答。它可能还会增加已编译二进制文件的大小。

相反，C++ 中还有其他解决方案可用于获得 Θ(N) 连接：

```
string result = "Hello, ";
result += username;
result += "! ";
result += "Welcome to ";
result += software_product;
result += "."; 
```

在这个版本中，字符串被原地修改，虽然已经复制到的数据`result`有时需要重新复制，但 C++ 字符串通常实现为[动态数组](http://en.wikipedia.org/wiki/Dynamic_array)，以指数方式分配新空间，因此每个新字符的插入都会分期恒定时间，导致重复连接的整体 Θ(N) 行为。

以下是做同样事情的一种方式，几乎在一条线上。它在内部使用相同的原理，但也支持使用 << 重载将非字符串类型转换为字符串。

```
stringstream result;
result << "Hello, " << username << "! " << "Welcome to " << software_product
       << ".";
// do something with result.str() 
```

最后，C++ 标准库不包含此功能，但可以定义以下函数，其中包含一些字符串流魔术。该实现留给读者作为练习。

```
template <typename... Items>
std::string concat(std::string const& a, std::string const& b, Items&&... args) 
```

然后，您可以`concat`在 O(N) 时间内在一行上调用重复连接：

```
string result = concat("Hello, ", username, "! ", "Welcome to ",
                       software_product, "."); 
```

据推测，所有这些都是比通过创建表达式模板类型来搞乱类型推断更好的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T13:32:54.623

如果我们有字符串表达式的总长度`N`和`M`连接操作，那么复杂度应该是`O(NM)`。

使用表达式模板可以加快速度。可能因为它们的复杂性，它没有完成。编译速度也会更慢——它需要 M 递归类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T11:54:05.620

我很难相信串联会上升到`O(n^2)`，但这里有一些与您的问题相关的答案：

> C++ 标准没有指定实现细节，仅在某些情况下指定了复杂性要求。std::string 操作的唯一复杂性要求是 size()、max_size()、operator[]、swap()、c_str() 和 data() 都是常数时间。其他任何事情的复杂性取决于实现您正在使用的库的人所做的选择。

参见参考：[C++ string::find complex](https://stackoverflow.com/questions/8869605/c-stringfind-complexity)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T12:11:07.130

怎么可能是 O(N^2)？字符串连接是：

*   必要时重新分配（恒定摊销时间）；
*   找到第一个字符串的结尾（恒定时间，因为它们是计数字符串）；
*   从第二个字符串 (O(N)) 复制字符。

我看不出模板与此有什么关系。

# php - 在数组中插入许多键=>值对

> ID：14010684
> 
> 赞同：0
> 
> 时间：2012-12-23T11:44:12.233
> 
> 标签：php, ajax, arrays

我在一个页面上有几个相同的表格（用于评级）。表格如下所示：

```
 <form id="contact" name="contact" action="#" method="post">

    <input  id="titel" name="titel">
    <textarea id="msg" name="comment" class="txtarea"></textarea>

    <button id="send">Send</button>
     </form> 
```

我通过 ajax 将表单数据发送到我想将所有键 => 值对存储在数组中的页面。

这是我在发送表单数据的 php 页面上的内容：

```
$arr = $_POST; 

$array = array();

$array['titel'] = $arr['titel'];
$array['comment'] = $arr['comment'];

print_r($array); 
```

当我发送第一个表单时，prin_r 给出： Array ( [title] => test [comment] => test2 )

这正是我想要的。但是当我发送下一个表单时，值不会插入到数组中，例如：

```
 Array ( [titel] => test [comment] => test2
    [titel] => test3 [comment] => test4

 ) 
```

事实上什么也没发生。值保持不变。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:29:36.833

主要是在这里总结评论。

**1.表单和请求隔离**

你说你提交了几个表格。每次向 PHP 脚本提交表单数据时，脚本都会逐行执行，完成后，整个过程将终止。当提交另一个表单时，这将是另一个脚本执行，其中没有您之前定义的可用变量。

这就是 HTTP 的工作方式。每个请求都是一个独立的执行。

“记住”绑定到特定客户端的数据的一种技术是创建会话。一个会话由一个 id 组成，它存储在客户端，默认情况下自动存储到一个 cookie 中，以及会话存储，它保存在服务器上，可以在多个独立的请求中重复使用。

在此处了解更多信息 [http://php.net/manual/en/features.sessions.php](http://php.net/manual/en/features.sessions.php)

**2\. PHP 中的数组**

数组键必须是唯一的。想象一下 - PHP 应该如何知道，如果这不是唯一约束，您想要访问哪个值。

你说“数组就像数据库结果的几行”

这看起来像这样

```
$result = array
(
    0 => array ( 'col1' => 'colval1' ),
    1 => array ( 'col1' => 'vol1val' )
) 
```

你也可以做到的

```
$survey = array (
    'step1' => array(...)
); 
```

像这样访问

```
$survey['step1']['..'] 
```

将其保存到会话中

```
session_start();
$_SESSION['step1'] = $survey['step1']; 
```

在以后的请求中访问它

```
print_r( $_SESSION['step1'] ); 
```

希望这会有所帮助:) 圣诞快乐

# mahout - Mahout 在想法中构建错误

> ID：14010688
> 
> 赞同：0
> 
> 时间：2012-12-23T11:45:12.967
> 
> 标签：mahout

我刚开始使用 Mahout，并从 git 获得了最新信息，但是当我构建项目时（仅在“数学”部分中）出现了大约一百个错误，例如：

```
import org.apache.mahout.math.set.OpenIntHashSet; 
```

“无法解析符号 OpenIntHashSet”

DoubleArrayList、DoubleDoubleProcedure 等也存在类似问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T13:23:47.593

您需要导入项目的 Maven 配置。

# r - 在 R 中推广公式的创建

> ID：14010689
> 
> 赞同：2
> 
> 时间：2012-12-23T11:45:14.823
> 
> 标签：r, formula, modeling, tilde

我正在尝试在 R 中创建一个公式，形式为

`Output~Var1+Var2+Var3`

用于模型。它似乎工作的方式是你给出你想要预测的变量名称，波浪号，你想要用作预测变量的变量名称，然后在后面的参数中你给出包含这些变量观察的数据框。但是，我正在使用的数据框中有很多变量，我不想将它们全部输入。这些变量也相对频繁地更改名称，因此不断更改我的代码将是一种努力。本质上，我想知道怎么写

```
Output~(All the variables that aren't the output) 
```

尽管我还需要排除一些其他变量。抱歉说得这么清楚，我不知道发生了什么， ?formula 没有太大帮助，这与我以前见过的任何其他编程或 R 结构都不一样。

谢谢你的帮助，

ñ

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T12:58:28.810

啊，我找到了一个更好的解决方案：函数

```
reformulate(termlabels = colnames(InputTable), response = 'Prediction') 
```

将从您提供的字符串创建一个公式。根据需要操作列名，以动态选择模型中使用的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T12:30:00.257

实际上， ?formula 文档提供了一种可能的答案。然而，它非常“hacky”，也是我能想象到的最不愉快的实现方式之一

```
## Create a formula for a model with a large number of variables:
xnam <- paste0("x", 1:25)
(fmla <- as.formula(paste("y ~ ", paste(xnam, collapse= "+")))) 
```

即，您只需将一个字符串粘贴在一起并将其用作您的公式。

# android - 未签名的 Android apk 文件不会安装

> ID：14010690
> 
> 赞同：0
> 
> 时间：2012-12-23T11:45:18.507
> 
> 标签：android, apk

我从我的 eclipse 项目中创建了一个未签名的 APK 文件，以便在另一台设备上演示我的应用程序。它在模拟器和连接的手机上运行良好。当我通过电子邮件发送并下载 apk 文件时（我已勾选允许来自未知位置的应用程序）但安装失败并显示消息。“安装失败”并没有更多信息。有什么想法我可以检查吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:51:19.687

我有同样的问题。通过从 Eclipse 卸载我通过 USB 安装的版本解决了这个问题。一旦那个版本离开我的手机，我就可以通过电子邮件给自己发送 APK，它们会很好地加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-07T20:29:53.790

您的所有应用都需要签名。在这里阅读：

[http://developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)

用 jarsigner 之类的东西签名

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T12:20:38.390

确保您尝试安装应用程序的手机的操作系统版本符合您在清单文件中声明的 minSdkVersion。或者，如果该应用程序已安装，则卸载该应用程序并重新安装。可能会奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T16:23:54.050

我遇到了同样的问题，最后只是签署了让他们完美安装的 apk。或者，如果您使用类似 astro 的游戏商店从运行它的手机备份您的 apk 并将其发送到另一部手机 - 这也可以。我认为它可能没有正确打包，或者由于某种原因它需要签名才能安装。也可能是在新手机上发现了冲突的签名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T11:50:43.847

在设备上，转到“设置”->“应用程序”->“未知来源”并确保已勾选。

确保手机上有足够的空间，并且手机运行的是正确的 Android 版本。

最后，如果这仍然不起作用，请签署您的 .apk 文件。

# php - 500 内部服务器错误与 csv 阅读器脚本

> ID：14010691
> 
> 赞同：0
> 
> 时间：2012-12-23T11:45:22.190
> 
> 标签：php

我正在研究下载和读取 csv 文件并将内容导入数据库的 php 脚本。但是我有一个问题：当这个脚本运行很长时间时，我会得到错误 500 - 内部服务器错误。我不知道为什么，但服务器已将执行时间设置为 90 秒，但我的脚本运行时间更长（大约 6 分钟），然后我收到此错误。

当我得到执行时间错误时没关系，因为我可以使用 register_shutdown_function() 捕获它并使用 cUrl 创建另一个实例，但是这个错误对我来说是无法捕获的。

有没有人知道如何捕捉它或使执行时间错误起作用？

我尝试了 set_time_limit()，但它也不起作用，因为服务器处于安全模式。它是虚拟主机，所以我不能更改 php.ini 或类似的东西。

感谢您的任何回答

# android - 避免循环导致过载

> ID：14010698
> 
> 赞同：2
> 
> 时间：2012-12-23T11:46:39.073
> 
> 标签：android, loops, try-catch

我正在开发一个有循环（不是游戏循环）的 android 游戏。如果我的一个布尔值发生了变化，这个循环就会做出反应。问题是当布尔值改变时，它会调用循环内的 void，直到应用程序因过载而崩溃。我所呼唤的空白被试探所包围，它必须如此，除非我必须重新制作我的游戏的其余部分。循环的代码是这样的：

```
private void listenerVoid(){
  int timeBetweenChecks = 100;
  final Handler h = new Handler();
  h.postDelayed(new Runnable(){
    public void run(){
      //Do something if myBool returns true, otherwise loop again
      if (myBool==false){
        listenerVoid();

      } else {  
        //Check if the listener has reacted to a change before 
        if(firstStart!=false){
          firstStart = false;
          theTryCatchVoid();  
          Log.i("MyClass","Boolean is changed");
        }
        else{
          //Already started
          Log.i("MyClass","Already started");
        }
      }
    }
  }, timeBetweenChecks);
}; 
```

我的 try-catch void 与此类似：

```
private void tryCatchVoid(){
  try{
    //Try to do something that soemtimes causes a crash
  }
  catch(Exception e){
    //Do nothing
  }
} 
```

我不能增加`timeBetweenChecks`时间，因为它会导致我的游戏等待时间很长。我怎样才能使`tryCatchVoid`唯一的被调用一次？

# rsa - 加解密涉及3方

> ID：14010703
> 
> 赞同：2
> 
> 时间：2012-12-23T11:47:37.547
> 
> 标签：rsa, public-key-encryption

我想知道一般情况下是否可以使用 RSA 或公钥加密算法进行以下操作。假设我们有 3 方，Alice、Bob 和 Caesar。

它们都有一个私钥-公钥对。现在，Alice 有两条信息，由 Alice 的公钥加密。爱丽丝将这些信息提供给鲍勃，让鲍勃选择其中之一。选择取决于鲍勃。该信息应该提供给 Caesar，Caesar 应该能够知道 Bob 选择了哪条信息，并能够将其解密回明文。但是，Alice 不应该知道 Bob 选择给 Caesar 的哪条信息，Bob 也不应该知道明文。

我想它可以这样做。爱丽丝用它的私钥加密两条信息，然后交给鲍勃。Bob 用 Caesar 的公钥加密其中一个并发送回 Alice。Alice 用 Alice 的私钥对其进行解密。爱丽丝仍然不知道实际信息，因为它现在是用凯撒的公钥加密的。Alice 将信息发送给 Caesar，Caesar 可以使用 Caesar 的私钥对其进行解密。

这条链可以吗？用 Alice 的公钥加密，用 Caesar 的公钥再次加密，用 Alice 的私钥解密，然后用 Caesar 的私钥解密。这些加密和解密的顺序会让明文最终出现还是只是垃圾？

我在问是否可以在“理论上”使用公钥加密来做到这一点，并且在实践中是否可以使用现有的库，或者它是否是一种太罕见的“特殊情况”，所以必须实施它从头开始？

谢谢！

编辑：

我想出了一个 Diffie-Hellman 启发的计划，就像这样......

假设您有 A、B 和 C 方。A 有两条信息，I1 和 I2，在这种情况下它们是单个整数。各方都有一个秘密，他们选择了自己，As、Bs 和 Cs，在这种情况下也是整数。

所以首先A通过添加它的秘密来“加密”信息并将其发送给B。

```
A  -- I1+As --> B
A  -- I2+As --> B 
```

现在 B 选择将哪条信息提供给 C，假设在这种情况下它是 I1。B 将其秘密添加到其中，以便对 A 隐藏它。现在 B 将其发送回 A，然后 A 将信息传递给 C。

```
A <-- I1+As+Bs -- B
A  -- I1+As+Bs --> C 
```

现在 C 也添加了它的秘密，并将其发送给 A，A 将其转发给 B。

```
A <-- I1+As+Bs+Cs -- C
A  -- I1+As+Bs+Cs --> B 
```

B 通过减法删除其秘密，并将其发送给 A。A 也删除其秘密并将其发送给 C。

```
A <-- I1+As+Cs -- B
A  -- I1+Cs --> C 
```

所以 C 可以减去它的秘密，并留下信息 I1。A 知道 I1 和 I2 的值，但不知道 C 有哪一个。B 知道 C 有信息 I1，但不知道它的值。你能看出这里有什么缺陷吗？是否有可能以某种方式采用适当的公钥加密？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:41:37.917

您正在搜索的内容称为多方加密。它是经典 RSA 算法的扩展版本，但它涉及超过 2 个素因数（三、四，等等……）

[http://daim.idi.ntnu.no/masteroppgave?id=4699](http://daim.idi.ntnu.no/masteroppgave?id=4699)

或者，您可以对任意数量的用户使用标准的 2-prime RSA，但正如您自己发现的那样，必须保留用户加密/解密数据的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T12:05:33.843

您所描述的链接的问题是，每次您使用公钥加密一大块数据时，您都会将其“包装”在只有那个人（或有权访问私钥的人）才能解密的加密中。因此，当爱丽丝从鲍勃那里收到一份用凯撒密钥加密的数据副本时，爱丽丝无法触摸它。

你能提供更多关于你到底想要达到什么目标的信息吗？感觉就像你在这个过程中投入了太多的心思。您是否正在寻找某种方式来验证收据或验证多方之间的数据完整性？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T08:30:31.167

关于加密/解密的东西，所有重要的事情都已经说过了。但是，我想指出的逻辑中还有一个重大缺陷：

*   A加密两条信息并发送给B
*   B选择其中之一，但A一定不知道B的选择
*   B 使用 C 的公钥加密 A 的一条消息并将其发送回 A

这是一个缺陷：A 可以只使用 C 的公钥来加密它自己的原始消息，从而确定 B 选择了两个信息中的哪一个。

# pug - 为翡翠文件中的变量赋值

> ID：14010705
> 
> 赞同：19
> 
> 时间：2012-12-23T11:47:56.573
> 
> 标签：pug

是否可以在玉文件中分配变量，以使代码更具可读性？

具体来说，我创建了这个玉文件：

```
extends layout
- var format = "%+1.0f"
block title
  title Your score table
block body
 ...
      td.utilityUtil #{sprintf(format,value)}
 ... 
```

最后一行出现错误，未定义“格式”。可能我没有正确分配它，但我没有找到正确的语法。

PS我有快递3。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-04T11:00:57.597

您必须在块范围内声明变量：

```
extends layout
block title
title Your score table
block body
    - var format = "%+1.0f"
    ...
    td.utilityUtil #{sprintf(format,value)}
    ... 
```

# arrays - AS3：将数组存储在共享对象中

> ID：14010707
> 
> 赞同：1
> 
> 时间：2012-12-23T11:48:11.943
> 
> 标签：arrays, actionscript-3, shared-objects

我已经为这个问题寻找了很长一段时间的答案，但似乎找不到一个明确的答案。基本上我要做的是获取一个数组并将其存储在一个共享对象中，然后读取存储在对象中的内容并在脚本启动时将其放回数组列表中（希望这是有道理的）。

目前我被引导相信共享对象只能存储多个变量，所以我不确定如何将一个数组添加到一个变量中。

数组本身的声明如下所示：

```
var lvl1highScores:Array = new Array(); 
```

用户每次在每个级别达到高分时都可以添加它，如下所示：

```
 lvl1highScores.push({score:int(vinylCollected) , player:String(highScoreInput.text)});
lvl1highScores.sortOn("score", Array.DESCENDING | Array.NUMERIC); 
```

我希望这是足够的信息，可以帮助某人。如果我无法将整个数组存储在共享对象中，还有其他方法可以存储此信息吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T16:32:28.060

你应该可以做到这一点，

写入共享对象

```
//returns the mySharedObject if it exists, if not creates a new one
var so:SharedObject = SharedObject.getLocal("mySharedObject");
//take your array and put it on the so
so.data.storedArray = myArray;
//save the data
so.flush(); 
```

在别处读回

```
//get the mySharedObject back
var so:SharedObject = SharedObject.getLocal("mySharedObject");
//get your array back
myArray = so.data.storedArray; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-14T14:15:02.300

我发现了一些有用的东西，我将添加到上面的代码答案中：

```
To read it back elsewhere

//get the mySharedObject back
var so:SharedObject = SharedObject.getLocal("mySharedObject","/");
//get your array back
myArray = so.data.storedArray; 
```

为避免无意中限制对共享对象的访问，请使用 localpath 参数。- 哪一个是 ”/”

# eclipse-plugin - 如何单独下载eclipse插件

> ID：14010710
> 
> 赞同：-1
> 
> 时间：2012-12-23T11:48:45.097
> 
> 标签：eclipse-plugin

嗨，我将为我的 eclipse ide 安装 javafx 插件。我想下载存档，然后从我的计算机上离线安装。网址是[http://javafx.com/downloads/eclipse-plugin/](http://javafx.com/downloads/eclipse-plugin/)

那么我该怎么做呢？提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T20:10:41.497

您的问题的 URL 中没有 Eclipse 插件。

JavaFX 2 eclipse 插件是 e(fx)clipse。以下是[安装说明](http://www.eclipse.org/efxclipse/install.html)。

# java - 如果键已存在，则将新行添加到列表中

> ID：14010712
> 
> 赞同：1
> 
> 时间：2012-12-23T11:48:56.590
> 
> 标签：java, hashmap

我必须构建包含键对象和与该键相关的实例列表的 hashMap。在构建地图的过程中，我想问一下键对象（vocKey）是否已经存在，不要为 Voc 键创建新实例，只需在 vocData 列表中添加新行，我该怎么做？

```
private HashMap<vocKey,List<vocData>> vocabulary = new HashMap<vocKey,List<vocData>>(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T11:53:43.420

参见[HashMap.get()](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#get%28java.lang.Object%29)

```
List<vocData> data = vocabulary.get(key);
if (data == null) {
    vocabulary.put(...);
} else {
    data.add(...);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T11:54:02.557

这只是一个指南。自己试一试

```
 1) First get the value using key.
 2) if a value exist add new line to value list
 3) if value does not exist create a new instance and add under new key. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T12:18:47.460

```
List<vocData> data = vocabulary.get(key);
if (data == null) {
    data = new ArrayList();
    vocabulary.put(key, data);
} 
data.add(...); 
```

# css - 为图像添加光晕

> ID：14010713
> 
> 赞同：1
> 
> 时间：2012-12-23T11:49:25.523
> 
> 标签：css, image, glow

我试图获得与[此处](http://twitter.github.com/bootstrap/base-css.html#forms)类似的效果（在这种情况下，焦点位于表单字段中）。但是我希望它围绕一个小图像，并在悬停时发生。显然我可以创建两个精灵，并在 CSS 中将图像替换为悬停时的发光图像，但这不包括动画。所以目前我有：

```
img.glow {
    -webkit-transition: all 0.5s ease; -moz-transition: all 0.5s ease; -o-transition: all 0.5s ease;
}

img.glow:hover {
    border-color: rgba(82, 168, 236, 0.8);
    outline: 0;
    outline: thin dotted \9;
    /* IE6-9 */

    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);
    -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);
} 
```

这可行，但问题是我的图像具有圆角，并且整个图像周围都会出现发光效果（即，它将图像视为正方形，并在发光中留下小的白色角落，而我希望发光拥抱图像的边缘）。图像是透明的PNG。我想做的事可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T11:58:42.193

只需添加一个`border-radius`属性，以便您的 img 元素具有漂亮的圆角。阴影将跟随元素的形状。

# javascript - AngularJS指令ng-click参数没有被传递

> ID：14010727
> 
> 赞同：1
> 
> 时间：2012-12-23T11:52:03.853
> 
> 标签：javascript, angularjs

我正在尝试构建一个指令来为分页控件（Twitter Bootstrap 样式）输出一些 HTML 格式的代码，该指令需要从我的控制器范围内获取当前页面和总页面，并且当单击分页链接时触发一个我的控制器上的函数来更改页面（构建一个 url 并调用 $location 来更改页面）。

我看过许多优秀的 YouTube angularjs 视频 (http://www.youtube.com/watch?v=nKJDHnXaKTY)，但似乎没有一个涵盖这个特殊的复杂场景。

任何帮助都会很棒！

这是 jsfiddle，它使它更清晰：

[http://jsfiddle.net/philjones88/dVFDT/](http://jsfiddle.net/philjones88/dVFDT/)

我无法工作的是传递参数，我得到：

```
changing page to: undefined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:26:43.127

在你的指令中添加 changePage 调用（我知道它不是你想要的）。让它使用相同的参数调用父范围 changePage。

```
$scope.changePage = function(index){
    console.log("running changePage");
    $scope.$parent.changePage(index); //might want to check if the parent scope has this too
} 
```

作为另一个提示，在指令中，您不应该在被发送的变量前面使用 $。在这种情况下，这将是 $scope、$element、$attrs。您在控制器（不是链接函数）的作用域前面看到的 $ 是为了让您知道它正在被注入。它没有被注入到链接控制器中。例如，这里：

```
app.directive("pager", function ($injector1, $injector2) { 
```

这是注入参数的地方，您希望能够区分它们两者。我意识到这有点偏离轨道，我希望我对 changePage 的建议是您正在寻找的。

**编辑**：更新小提琴[http://jsfiddle.net/dVFDT/48/](http://jsfiddle.net/dVFDT/48/)

**为未来的搜索者修改的答案**：您通过 click 方法传入的函数，如下所示：

```
..... click="changePage()"..... 
```

需要改为：

```
..... click="changePage"..... 
```

这意味着您传递的是函数而不是函数调用。这意味着在您的指令中，当您连接 changePage 回调时，您正在调用具有如下索引的函数：

```
changePage()(1) 
```

这就是为什么你变得不确定的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:37:12.357

我不完全理解，但在你的指令结束时你想执行你的控制器的功能吗？

尝试：

```
<div class="pagination">
   <pager current-page="currentPage" total-pages="totalPages" query="query" callback="changePage()"></pager>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T20:29:11.713

我意识到这个问题有点老了，但实际上还有另一种方法可以解决这个问题，不需要重新编译或调用父作用域。但是，它确实需要以稍微不同的方式从指令中调用该方法。

你可以在这里看到小提琴：[小提琴](http://jsfiddle.net/qYBWg/)

最感兴趣的行是在模板声明中。对 onClick 的调用要求您将对象传递给它，而不仅仅是值。

```
 template: 
    "<div ng:repeat='i in [] | range:totalPages'> " +
        "<a ng:click='onClick({page: i + 1})'>Page {{i + 1}}</a>" +
    "</div>", 
```

这也使用了[来自 Gloopy](https://stackoverflow.com/questions/11873570/angularjs-for-loop-with-numbers-ranges)的这个答案的过滤器，以便`n`在`ng:repeat`. 这允许绑定全部发生在模板中。

# c++ - deque 使用 front() 打印后面的元素而不是前面的元素

> ID：14010728
> 
> 赞同：-2
> 
> 时间：2012-12-23T11:52:12.750
> 
> 标签：c++, deque

我正在使用 dque 将我从文件中读取的一些元素推送到双端队列的后面，但是当我从前面打印它们时，我只得到最后一个元素

```
 fgets(line,100,file);
  qu.push_back(line);
  fgets(line,100,file);
  qu.push_back(line);
  fgets(line,100,file);
  qu.push_back(line);
  fgets(line,100,file);
  qu.push_back(line);

  while(!qu.empty())
            {
                puts(qu.front());
                qu.pop_front();
            } 
```

样本输入

```
a
b
c
d 
```

输出

```
d
d
d
d 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T12:12:37.073

您还没有提供 and 的声明`line`，`qu`但我猜它们是

```
char line[100];
std::dequeue<char*> qu; 
```

这意味着`qu`存储指向外部（到`qu`）缓冲区的指针，其中包含字符。在您的程序中，您只有一个缓冲区 ( `line`)，其地址被反复推入，但每次调用`qu`都会覆盖其内容。`fgets`

在学习 C++ 时，尽量远离指针。因此，不要使用`char*`字符串，而是使用`std::string`：

```
std::string line;
std::deque<std::string> qu;

getline(std::cin, line);
qu.push_back(line);
getline(std::cin, line);
qu.push_back(line);
getline(std::cin, line);
qu.push_back(line);
getline(std::cin, line);
qu.push_back(line);

while(!qu.empty())
{
    std::cout << qu.front() << std::endl;
    qu.pop_front();
} 
```

# r - 停止功能以闪亮开始，直到按下按钮

> ID：14010730
> 
> 赞同：2
> 
> 时间：2012-12-23T11:52:20.343
> 
> 标签：r, shiny

我已经开始使用闪亮创建一个网络应用程序，用户输入搜索词并返回包含该词的推文。

当我加载此应用程序时，该`searchTwitter`功能会自动启动，并且在主面板上出现错误：`Error: You must enter a query.`

在文本输入框中输入搜索词，并有一个提交按钮。您可以输入一个术语，它工作正常，但我不希望错误成为用户看到的第一件事。

ui.R:

```
library(shiny)

shinyUI(pageWithSidebar(  
  headerPanel("Twitter Generator"),

  sidebarPanel(    
    textInput("search", "Search Twitter For:", value = ""),    
    submitButton("Search")
    ),  

  mainPanel(
    h3(textOutput("search")),
    tableOutput("view"), 
    )
)) 
```

服务器.R：

```
library(shiny)
library(twitteR)

shinyServer(function(input, output) {

  datasetInput <- reactive(function(){
    rawTweets <- twListToDF(searchTwitter(paste(input$search)))
    rawTweets$cleanText <- as.vector(sapply(rawTweets$text, CleanTweet))  
    rawTweets[, colnames(rawTweets) != "created"]    
  })

  output$search <- reactiveText(function() {
    input$search    
  })

  output$view <- reactiveTable(function() {   
    head(datasetInput())
  })

}) 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:14:35.283

这是对您的应用程序设计的合乎逻辑的要求，您应该考虑如何去做。

一种简单的方法是添加一个提供 true/false 的刻度按钮，如果值为 ，则跳过实际的 twitter 搜索`FALSE`。您可能需要缓存 的先前值`rawTweets`，或将其设置为 NULL，或...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:13:53.160

主面板（

h3（文本输出（“搜索”）），

表输出（“视图”））

不带第二个“，”试试

# python - 使用列表作为参数定义 pyqt4 信号

> ID：14010731
> 
> 赞同：16
> 
> 时间：2012-12-23T11:52:30.270
> 
> 标签：python, signals, pyqt4, signals-slots

根据

[http://pyqt.sourceforge.net/Docs/PyQt4/new_style_signals_slots.html](http://pyqt.sourceforge.net/Docs/PyQt4/new_style_signals_slots.html)

我可以定义一个带有整数参数的 pyqt4 信号 `mysignal = pyqtSignal(int)`。我如何定义一个信号，它接受一个整数和一个字符串列表，或者更一般地说是一个称为`myobject`参数的对象。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-23T12:35:49.143

下面的代码创建一个信号，它接受两个参数：一个整数和一个对象列表。UI 只包含一个按钮。单击按钮时会发出信号。

```
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class Foo(object):
    pass

class MyWidget(QWidget):
    mysignal = pyqtSignal(int, list)

    def __init__(self, parent=None):
        super(MyWidget, self).__init__(parent)
        self.hlayout = QHBoxLayout()
        self.setLayout(self.hlayout)
        self.b = QPushButton("Emit your signal!", self)
        self.hlayout.addWidget(self.b)
        self.b.clicked.connect(self.clickHandler)
        self.mysignal.connect(self.mySignalHandler)

    def clickHandler(self):
        self.mysignal.emit(5, ["a", Foo(), 6])

    def mySignalHandler(self, n, l):
        print n
        print l

if __name__ == '__main__':
    import sys
    app = QApplication(sys.argv)
    w = MyWidget()
    w.show()
    sys.exit(app.exec_()) 
```

单击按钮时，您应该会看到如下内容：

```
5
['a', <__main__.Foo object at 0xb7423e0c>, 6] 
```

在您的终端上。

# jsf - JSF 多字段验证 NULLPointerException

> ID：14010734
> 
> 赞同：1
> 
> 时间：2012-12-23T11:52:55.737
> 
> 标签：jsf, jsf-2, validation

```
<h:form id="form">
Username: <br/>
<h:inputText id="username" value="#{home.username}" required="true" >
<f:validator validatorId="loginValidator"></f:validator> 
<f:attribute name="passwordComponent" value="#{passwordComponent}" ></f:attribute>
</h:inputText>
<br/>
Password: <br />
<h:inputText id="password"  bindig="#{passwordComponent}" value="#{home.password}"  required="true"></h:inputText>
<br/>
<h:commandButton value="login" id="login" action="#{home.login}"></h:commandButton>
</h:form>

public class LoginValidator implements Validator {

@Override
public void validate(FacesContext context, UIComponent component, Object value)
        throws ValidatorException {
    String username = (String)value;
    UIInput passwordInput = (UIInput)component.getAttributes().get("passwordComponent");
    String password = (String) passwordInput.getValue();

    if(username!="aa" || password!="aa"){
        passwordInput.setValid(false);
        throw new ValidatorException(new FacesMessage("Wrong username or password!"));
    }
} 
```

}

在这一行我得到 NuulPointerException：

字符串密码 = (String) 密码输入.getValue();

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T12:57:05.053

**下一行中“绑定**”一词的拼写不正确。

```
<h:inputText id="password"  bindig="#{passwordComponent}"... 
```

将**bindig**更改为**binding**。

# javascript - 这是javascript中的闭包吗？

> ID：14010735
> 
> 赞同：0
> 
> 时间：2012-12-23T11:53:08.473
> 
> 标签：javascript

我为我的对象（ newobj ）定义了“on”事件

万一我需要访问我之前保存的这个成员。

我在事件中没有得到这个值的问题。（不存在）

我认为我需要添加闭包我尝试添加它但它没有用。

你能告诉我有什么问题吗？

基本代码

```
 create : function() {
    var self = this;
    var newObj = createNewObj()         
    newObj.on('selectData', function(evt){
                 ///some code on self
            }); 
```

带关闭选项 1

```
 create : function() {
    var self = this;
    var newObj = createNewObj() 
             return function(){     
    newObj.on('selectData', function(evt){

                 ///some code
            })}; 
```

带关闭选项 2

```
 create : function() {
    var self = this;
    var newObj = createNewObj() 
            newObj.on('selectData', function(evt){

            })
             return function(){
              // some code
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:59:37.117

试试这个：

```
create : function() {
  var self = this;
  var newObj = createNewObj() 
  return (function(){     
    newObj.on('selectData', function(evt){
             ///some code
    }
  )})();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:01:21.430

您可以使用[绑定](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)功能。这个简单的改变了`this`里面的函数。

尝试这样的事情：

```
create : function() {
  var self = this;
  var newObj = createNewObj() 
  return (function(){     
    newObj.on('selectData', function(evt){
             ///some code
    }.bind(newObj)
  )})();
}; 
```

将来的某个时候，您将能够使用词法绑定函数。[看到这篇文章](http://javascriptweblog.wordpress.com/2012/04/09/javascript-fat-city/):)

# c# - 字符串和 4 字节 Unicode 字符

> ID：14010736
> 
> 赞同：6
> 
> 时间：2012-12-23T11:53:13.477
> 
> 标签：c#, string, unicode, astral-plane

我有一个关于 C# 中的字符串和字符的问题。我发现 C# 中的一个字符串是一个 Unicode 字符串，一个 char 需要 2 个字节。所以每个字符都是 UTF-16 编码。太好了，但我也在 Wikipedia 上读到，UTF-16 中有一些字符占用 4 个字节。

我正在做一个程序，可以让你为字母数字显示器绘制字符。在程序中还有一个测试器，你可以在里面写一些字符串，它会画出来让你看看它的样子。

那么我应该如何使用字符串，用户写入一个需要 4 个字节的字符，即 2 个字符。因为我需要逐个字符地遍历字符串，在列表中找到这个字符，并将其绘制到面板中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T11:57:07.930

你可以这样做：

```
for( int i = 0; i < str.Length; ++i ) {
    int codePoint = Char.ConvertToUTF32( str, i );
    if( codePoint > 0xffff ) {
        i++;
    }
} 
```

然后 将`codePoint`任何可能的代码点表示为 32 位整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T12:05:47.647

完全使用`String`对象；根本不使用`Char`。使用示例[`IndexOf`](http://msdn.microsoft.com/en-us/library/k8b1470s.aspx)：

```
var needle = "ℬ";    // U+1D49D (I think)
var hayStack = "a code point outside basic multi lingual plane: ℬ";
var index = heyStack.IndexOf(needle); 
```

类上的大多数方法`String`都有接受`Char`或的重载`String`。大多数方法`Char`都有覆盖，也可以使用`String`。只是不要使用`Char`.

# php - 没有命令行的 2 条腿誓言请求

> ID：14010738
> 
> 赞同：0
> 
> 时间：2012-12-23T11:53:33.217
> 
> 标签：php, oauth, yql

我想用 php 发出 2 条腿的 oauth yql 请求。至今：

```
// Include the PHP SDK.
include_once("yosdk/lib/Yahoo.inc");

// Define constants to store your API Key (Consumer Key) and
// Shared Secret (Consumer Secret).
define("API_KEY","her_comes the key");
define("SHARED_SECRET","here_comes_the_secret");

$two_legged_app = new YahooApplication(API_KEY,SHARED_SECRET);

$stock_query =  "elect * from ......";

$stockResponse = $two_legged_app->query($stock_query);
var_dump($stockrResponse); 
```

但问题是，我不想查询命令行.....我只想用我得到的 api 密钥进行 oauth 并直接使用我在输入 yql 时得到的命令的 url....

像这样：

```
$url='http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20('+url_stocks+')&format=json&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys'; 
```

（我编辑了我想要的网址）。请不要问我为什么不使用命令来查询（长话短说）。我会很高兴得到一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:12:18.010

解决了它：

[http://code.google.com/p/oauth-php/wiki/ConsumerHowTo](http://code.google.com/p/oauth-php/wiki/ConsumerHowTo)

> include_once "oauth/library/OAuthStore.php"; include_once"oauth/library/OAuthRequester.php";
> 
> > $key_1 = "你的钥匙"; $secret_1 = "你的秘密";
> > 
> > $ticks="%22AAPL%22%2C%22MSFT%22";
> > 
> > $options = array('consumer_key' => $key_1, 'consumer_secret' => $secret_1); OAuthStore::instance("2Leg", $options );
> > 
> > $url = "http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20('$ticks')&format= json&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys"; // 这是请求的 URL $method = "GET"; // 你也可以使用 POST 代替 $params = null;
> > 
> > try { // 获取我们要发出的请求的请求对象 $request = new OAuthRequester($url, $method, $params); // 签署请求，执行 curl 请求并返回结果， // 出错时抛出 OAuthException2 异常 // $result 是一个数组，形式为：array ('code'=>int, 'headers'=>array( ), 'body'=>string) $result = $request->doRequest();
> > 
> > ```
> >  $response = $result['body'];
> >     $resp_array=json_decode($response,TRUE);
> >     echo $resp_array['query']['results']['quote'][1]['symbol']; // MSFT 
> > ```
> > 
> > } 捕捉（OAuthException2 $e）{ }

# jquery - 使用 JSON 变量作为公共变量？

> ID：14010746
> 
> 赞同：0
> 
> 时间：2012-12-23T11:54:32.920
> 
> 标签：jquery, json, flickr

我正在将我的 Flickr 集加载到我的网站中，如下所示：

```
$(window).load(function() {
var apiKey = 'xxx';
var userId = '8378546@N08';

$.getJSON('http://api.flickr.com/services/rest/?format=json&method=flickr.photosets.getPhotos&photoset_id=' + photoset_id + '&per_page=1000' + '&page=1' + '&api_key=' + apiKey + '&user_id=' + userId + '&jsoncallback=?', function(data) {
    $.each(data.photoset.photo, function(i, flickrPhoto){
        var basePhotoURL = 'http://farm' + flickrPhoto.farm + '.static.flickr.com/'
        + flickrPhoto.server + '/' + flickrPhoto.id + '_' + flickrPhoto.secret + "_z.jpg";  

        var fullPhotoURL = 'http://farm' + flickrPhoto.farm + '.static.flickr.com/'
        + flickrPhoto.server + '/' + flickrPhoto.id + '_' + flickrPhoto.secret + "_l.jpg";          

        /*var FlickrLink = "http://www.flickr.com/photos/" + data.photoset.owner + "/" + flickrPhoto.id + "/";*/
        $("<img/>").attr("src", basePhotoURL).appendTo("#photographs").wrap(("<div class='item'></div>"))

    });

    **$("<a href='#' class='zoom'/>").appendTo(".item");**
    **$("<a href='#' class='flickr'/>").appendTo(".item");**

    $("#photographs").gridalicious({
        gutter: 2,
        animate: true,
        effect: 'fadeInOnAppear',
        width: 320,
        complete: onComplete()
    });

    function onComplete(){
        $("#loader").delay(20000).fadeOut("slow");
        $(".item").hover(function(){
            $(".zoom, .flickr", this).stop(true,true).fadeIn(300);
        }, function () {
            $(".zoom, .flickr", this).stop(true,true).fadeOut(300);
        });
    }
});
}); 
```

.zoom 和 .flickr div 附加到 .item div（其中包含图片）。我需要 var **fullPhotoURL**和 var **FlickrLink**因为我想在代码中突出显示（带星号）的锚点中使用它们。当我这样做时，我收到一个错误，即找不到 var **fullPhotoURL**和 var **FlickrLink**。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T12:01:29.317

您必须在 $.each 块之外定义变量：

```
$.getJSON('http://api.flickr.com/services/rest/?format=json&method=flickr.photosets.getPhotos&photoset_id=' + photoset_id + '&per_page=1000' + '&page=1' + '&api_key=' + apiKey + '&user_id=' + userId + '&jsoncallback=?', function(data) {

    var fullPhotoURL, FlickrLink;

    $.each(data.photoset.photo, function(i, flickrPhoto){
        var basePhotoURL = 'http://farm' + flickrPhoto.farm + '.static.flickr.com/'
        + flickrPhoto.server + '/' + flickrPhoto.id + '_' + flickrPhoto.secret + "_z.jpg";  

        fullPhotoURL = 'http://farm' + flickrPhoto.farm + '.static.flickr.com/'
        + flickrPhoto.server + '/' + flickrPhoto.id + '_' + flickrPhoto.secret + "_l.jpg";          

        /*FlickrLink = "http://www.flickr.com/photos/" + data.photoset.owner + "/" + flickrPhoto.id + "/";*/
    $("<img/>").attr("src", basePhotoURL).appendTo("#photographs").wrap(("<div class='item'></div>"))

   });

   $("<a href='#' class='zoom'/>").appendTo(".item"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:04:02.920

要在 Javascript 中定义全局变量，您需要跳过`var`声明项。

`var`“意味着”本地变量

首先为您的变量分配一个默认值：

```
fullPhotoURL = null;
FlickrLink = null; //Avoid first upcase char to define variable 
```

然后这些变量将在您的所有函数中可用

# c# - 使用无损 JPEG 压缩读取 TIFF 和 DICOM 图像

> ID：14010749
> 
> 赞同：1
> 
> 时间：2012-12-23T11:55:23.140
> 
> 标签：c#, imagemagick, jpeg, tiff

我对使用**无损 JPEG**压缩数据读取 TIFF 图像的任何方式感兴趣。我试过 ImageMagick，但它失败了：

```
convert.exe: Unsupported JPEG process: SOF type 0xc3\. `JPEGLib' @ error/tiff.c/TIFFErrors/562. 
```

根据 ImageMagick 论坛，ImageMagick 的官方发行版中没有无损 JPEG 支持，但有一个补丁可以提供帮助。问题是这个补丁有点过时了。

我也尝试过 Leadtools 和 ImageGear 库；他们工作得很好，但对我来说太贵了。

因此，如果有任何方法可以在当前版本的 ImageMagick 中启用无损 JPEG 处理，或者有任何库可以读取此类图像，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T18:09:57.863

我不知道 TIFF，但 GDCM 确实支持无损 JPEG。只需以这种方式使用它：

```
$ gdcmconv --raw jpeg.dcm uncompress.dcm
$ gdcm2pnm uncompress.dcm uncompress.ppm 
```

# ruby-on-rails-3 - 如何在 rails3 中使用 rake 任务使缓存部分过期？

> ID：14010750
> 
> 赞同：1
> 
> 时间：2012-12-23T11:55:29.427
> 
> 标签：ruby-on-rails-3, caching, rails-3.1

我正在使用 ruby​​ 1.9.2 创建一个应用程序 rails3。我有一个带有一些博客文章的左侧菜单。这显示在我的应用程序的每个页面中，因此我在视图中使用缓存概念。该博客帖子每天使用 rake 任务在数据库中更新。

在每天第一个小时更新rake任务数据库中，更新数据库后我想从rake任务中清除缓存部分。任何人都可以帮助如何编写用于过期缓存的 rake 任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T12:49:45.983

为您的 rake 口味使用 cronjob：[https ://github.com/javan/whenever](https://github.com/javan/whenever)

用清扫器过期片段：http: [//guides.rubyonrails.org/caching_with_rails.html#sweepers](http://guides.rubyonrails.org/caching_with_rails.html#sweepers)

# json - 如何让杰克逊使用单引号或不使用引号生成json字符串？

> ID：14010754
> 
> 赞同：18
> 
> 时间：2012-12-23T11:55:56.397
> 
> 标签：json, jackson, double-quotes

例如，我想生成一个 json 字符串`ng-style`：

```
<th ng-style="{width:247}" data-field="code">Code</th> 
```

但是对于杰克逊，结果是：

```
<th ng-style="{&quot;width&quot;:247}" data-field="code">Code</th> 
```

这并不容易阅读。

所以我希望[杰克逊](http://jackson.codehaus.org)生成带单引号或不带引号的 json 字符串。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-27T05:18:19.410

如果您可以控制该`ObjectMapper`实例，则将其配置为以您想要的方式处理和生成 JSON：

```
final ObjectMapper mapper = new ObjectMapper();
mapper.configure(JsonGenerator.Feature.QUOTE_FIELD_NAMES, false);
mapper.configure(JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES, true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-12-10T13:21:50.190

```
JsonGenerator.Feature.QUOTE_FIELD_NAMES 
```

已弃用，您可以改用它：

```
mapper.configure(JsonWriteFeature.QUOTE_FIELD_NAMES.mappedFeature(), false);
mapper.configure(JsonReadFeature.ALLOW_UNQUOTED_FIELD_NAMES.mappedFeature(), true); 
```

请注意，`JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES`不推荐使用（截至目前），`JsonReadFeature`此处提到的相应内容只是为了完整性。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2016-05-17T15:23:51.427

最简单也是最好的选择是使用正则表达式并更新字符串值。

示例代码如下所示。

`partNumberList=partNumberList.replaceAll(":", ":\"").replaceAll("}", "\"}");`

完整代码如下图

```
public static void main(String[] args) throws JsonParseException, JsonMappingException, 
    IOException {
    TestJack obj = new TestJack();
    //var jsonString ='{"it":"Stati Uniti d'America"}';
    //            jsonString =jsonString.replace("'", "\\\\u0027")
    ObjectMapper mapper = new ObjectMapper();
    String partNumberList = "[{productId:AS101R}, {productId:09902007}, {productId:09902002}, {productId:09902005}]";
    partNumberList = partNumberList.replaceAll(":", ":\"").replaceAll("}", "\"}");
    System.out.println(partNumberList);
    mapper.configure(com.fasterxml.jackson.core.JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES, true);
    List<ProductDto> jsonToPersonList = null;
    jsonToPersonList = mapper.readValue(partNumberList, new TypeReference<List<ProductDto>>() {
    });
    System.out.println(jsonToPersonList);
} 
```

# java - 弹跳球小程序

> ID：14010758
> 
> 赞同：1
> 
> 时间：2012-12-23T11:57:00.553
> 
> 标签：java, swing, animation

我制作了小程序 Bouncing Ball 并在类中使用方法`Ball.java`制作了内部类，当我运行小程序时，Java 一次又一次地绘制球而不是重新绘制球（不是删除，然后绘制）。`TimerListener``repaint()`

这是我的课程代码`Ball.java`

```
import javax.swing.Timer;
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class Ball extends JPanel {
private int delay = 10;

Timer timer=new Timer(delay, new TimerListener());

private int x=0;
private int y=0;
private int dx=20;
private int dy=20;
private int radius=5;

private class TimerListener implements ActionListener{
    public void actionPerformed(ActionEvent e) {
        repaint();
    }
}

public void paintComponent(Graphics g){

    g.setColor(Color.red);
    if(x<radius) dx=Math.abs(dx);
    if(x>(getWidth()-radius)) dx=-Math.abs(dx);
    if(y>(getHeight()-radius)) dy=-Math.abs(dy);
    if(y<radius) dy=Math.abs(dy);
    x+=dx;
    y+=dy;
    g.fillOval(x-radius, y-radius, radius*2, radius*2);
        }
public void suspend(){
    timer.stop();
}
public void resume(){
    timer.start();
}
public void setDelay(int delay){
this.delay=delay;
timer.setDelay(delay);
}   
} 
```

这是我的课程代码`BallControl.java`

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
public class BallControl extends JPanel{

private Ball ball = new Ball();
private JButton jbtSuspend = new JButton("Suspend");
private JButton jbtResume = new JButton("Resume");
private JScrollBar jsbDelay = new JScrollBar();

public BallControl(){
    JPanel panel = new JPanel();
    panel.add(jbtSuspend);
    panel.add(jbtResume);
    //ball.setBorder(new javax.swing.border.LineBorder(Color.red));
    jsbDelay.setOrientation(JScrollBar.HORIZONTAL);
    ball.setDelay(jsbDelay.getMaximum());
    setLayout(new BorderLayout());
    add(jsbDelay, BorderLayout.NORTH);
    add(ball, BorderLayout.CENTER);
    add(panel, BorderLayout.SOUTH);

    jbtSuspend.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            ball.suspend();
        }
    });

    jbtResume.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            ball.resume();
        }
    });

    jsbDelay.addAdjustmentListener(new AdjustmentListener() {
        public void adjustmentValueChanged(AdjustmentEvent e) {
            ball.setDelay(jsbDelay.getMaximum() - e.getValue());
        }
    });

}
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T11:58:59.503

Timer 不应该也改变 Ball 对象的位置吗？换句话说，它不应该改变它的 x 和 y 值吗？IE，

```
private class TimerListener implements ActionListener{
    public void actionPerformed(ActionEvent e) {

        // first change x and y here *****

        repaint();
    }
} 
```

否则，球应该如何移动更少反弹？

您的`paintComponent(...)`方法中似乎有此更改位置代码，这并不好，因为您无法完全控制何时甚至是否调用此方法。因此，更改此对象状态的程序逻辑和代码不属于该方法。

此外，您的`paintComponent(...)`方法覆盖需要在其第一行调用超级`paintComponent(...)`方法，以便在绘制新球之前可以擦除旧球。

# svn - 在内网中从eclipse连接到svn

> ID：14010759
> 
> 赞同：0
> 
> 时间：2012-12-23T11:57:05.450
> 
> 标签：svn, windows-7

我目前正在尝试连接到在具有给定内部 ip 的 Windows7 机器上运行的 TortoiseSVN `192.168.178.22`。我正在尝试通过运行 Ubuntu 10.x 的 Eclipse 从我的笔记本电脑连接。不幸的是，我无法连接，我不知道问题出在哪里。我在 Eclipse 中的 svn 连接器是`SVNKit 1.3.5...`. 我已经通过向 Win7 机器发送 ping 验证了 IP。这样可行。

现在的问题：我尝试从 svn 导入现有项目。输入 URL`svn://192.168.178.22`并尝试点击浏览 - 没有任何反应（相应的窗口打开，但一切都在等待中）。下一步是尝试通过控制台连接。所以我打开了一个终端并`svn checkout svn://192.168.178.22`再次尝试 - 没有任何反应（没有输出）。然后我尝试禁用 Windows 防火墙 -`svn checkout svn://192.168.178.22`再次进入导致`connection refused`.

现在我不知道到底是什么问题。为什么连接被拒绝？我在 svn 上没有用户名或密码，windows 防火墙已禁用。

对不起，如果这个问题是重复的。我在stackoverflow中发现了一些东西，但似乎没有什么是我的问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T16:31:00.170

正如 JB Nizet 指出的那样，我试图从一个 SVN 客户端连接到另一个。这是行不通的。
感谢您的提示。

# objective-c - 如何在 UIImageView 上方呈现一个不可见的交互按钮

> ID：14010762
> 
> 赞同：2
> 
> 时间：2012-12-23T11:57:24.517
> 
> 标签：objective-c, ios, uiimageview, uibutton

在我的应用程序中，我想通过 ImagePicker 从图库或相机中选择一些图像（尽管这部分工作正常）并将其呈现在 UIImageView 中。所以在 IB 中，我创建了一个视图、按钮和一个方法（选择了一个图像）：

```
@property (retain, nonatomic) IBOutlet UiImageView *sourceImageView;
@property (retain, nonatomic) IBOutlet UiButton *selectImageButton;

-(IBAction)selectImage; 
```

在应用程序的第一次运行时，我需要显示一个按钮而不是视图，因此我将它放在 IB 中的视图上方并隐藏视图。但是用户拿起图片后，需要在视图中呈现而不是按钮，如果用户想选择另一张图片，他应该在显示的图片上按下并选择另一张。所以，我认为，我需要以某种方式将按钮设置为不可见，但它应该位于视图上方并对触摸做出反应。我正在尝试一个明显的决定：

```
-(void)viewDidAppear{
_selectedImageButton.hidden=YES;
_sourceImageView.hidden=NO; 
```

它是不可触碰的。我还尝试将 _selectImageButton.alpha 设置为最小值，它可以工作，直到它等于 0。但在这种情况下，视图上方仍然可以看到一些按钮，我不能接受它。我觉得应该有一些简单的方法来做到这一点，因为这个问题似乎很常见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:04:30.730

来自 H2CO3 的评论：
如果您创建一个 UIButtonTypeCustom 样式的按钮，则默认情况下它将是不可见的（由于缺乏合理的默认图形属性）

只是让按钮是透明的，不需要隐藏任何东西

# excel - 我们可以将 Null 添加到 Array 列表中吗？

> ID：14010763
> 
> 赞同：0
> 
> 时间：2012-12-23T11:57:33.673
> 
> 标签：excel, vbscript, vba

请看下面，我在这里有点困惑：

```
 Dim myQueue
   Set myQueue= CreateObject("System.Collections.ArrayList")

   myQueue.add("over")
   myQueue.add("") 'is this valid statement
   myQueue.add("") 'is this valid statement 
```

现在假设一个数组(6)=(a,d,,,e,t)

```
 For I=0 to Ubound(array)-1

    myQueue.add(I)

   Next 
```

现在 Arraylist `myQueue`将包含非 Null 值（即 a、d、e、t）或所有数组元素？

**我刚刚测试过的代码** *，现在结果很好*

```
Option Explicit

    Dim myQueue,i
    Set myQueue = CreateObject("System.Collections.ArrayList")
    'Dim Set Dic = CreateObject("Scripting.Dictionary

    myQueue.Add("jumped")
    myQueue.Add("over")
    myQueue.Add("")
    myQueue.Add("")
    myQueue.Add("dog")
    myQueue.Add("Cat")

    i=0
    Do While myQueue.Count > i

      MsgBox(myQueue(i))
    i=i+1
    Loop

    MsgBox("Capacity=" & myQueue.Capacity & "Count:" & myQueue.Count)

    myQueue.Remove("dog")

    MsgBox("Capacity=" & myQueue.Capacity & "Count:" & myQueue.Count)

    i=0
    Do While myQueue.Count > i

      MsgBox(myQueue(i))
    i=i+1
    Loop 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:40:47.323

通过在列表中添加一个`null`，你会`validating for this null`在未来吗？意思是添加空值的目的是什么？

如果答案是肯定的，那么您可以添加一个特殊字符，然后验证`masks`null 的特殊字符，并省略或采取它认为的任何操作。

如果答案是否定的，那么是的，您可以将 null 传递到列表中。它没有添加。或者只是让它空着。

PS：

**根据我的评论**：如果您可以测试将空值添加到 arrayList 以查看您是否会被错误困扰，那就太好了**

# java - Tomcat 集群环境的架构问题

> ID：14010765
> 
> 赞同：8
> 
> 时间：2012-12-23T11:57:42.487
> 
> 标签：java, tomcat, web-applications, architecture, cluster-computing

我正在研究我们有身份验证机制的项目。我们在身份验证机制中遵循以下步骤。

1.  用户打开浏览器并在文本框中输入他/她的电子邮件，然后单击登录按钮。
2.  请求发送到服务器。我们生成一个随机字符串（例如，123456）并向用户的[Android](http://en.wikipedia.org/wiki/Android_%28operating_system%29) / [iPhone](http://en.wikipedia.org/wiki/IPhone)发送通知，并借助该`wait()`方法使当前线程等待。
3.  用户在他/她的手机上输入密码并点击他/她手机上的提交按钮。
4.  一旦用户点击提交按钮，我们就让一个 web 服务访问服务器并传递之前生成的字符串（例如，123456）和密码。
5.  如果密码对先前输入的电子邮件正确，我们将`notify()`方法调用到先前等待的线程并发送*成功*作为响应，并且用户进入我们的系统。
6.  如果密码与先前输入的电子邮件不正确，我们将`notify()`方法调用到先前等待的线程并发送*失败*作为响应，并向用户显示无效凭据消息。

一切正常，但最近我们转移到了集群环境。我们发现有些线程即使在用户回复后也没有得到通知，并且等待时间不受限制。

对于服务器，我们使用的是 Tomcat 5.5，我们遵循*[Apache Tomcat 5.5 Servlet/JSP Container](http://tomcat.apache.org/tomcat-5.5-doc/cluster-howto.html)*来制作 tomcat 集群环境。

**回答 :: 可能的问题和解决方案**

可能的问题是集群环境中的多个 JVM。现在我们还将集群的 Tomcat URL 连同生成的字符串一起发送到用户 Android 应用程序。

当用户单击回复按钮时，我们将生成的字符串与集群的 Tomcat URL 一起发送，因此在这种情况下，两个请求都将发送到同一个 JVM，并且工作正常。

但我想知道是否有针对上述问题的单一解决方案。

此解决方案存在问题。**如果集群的 Tomcat 崩溃了怎么办？** 负载平衡器将向第二个集群 Tomcat 发送请求，同样的问题将再次出现。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T09:16:54.670

您的问题的根本原因是 Java EE 被设计为以不同的方式工作 - 尝试阻塞/等待服务线程是重要的禁忌之一。我将首先给出原因，以及之后如何解决问题。

Java EE（Web 层和 EJB 层）旨在能够扩展到非常大的规模（集群中的数百台计算机）。但是，为了做到这一点，设计人员必须做出以下假设，这些假设是对如何编码的具体限制：

*   交易是：

    1.  短暂的（例如不要阻塞或等待超过一秒左右的时间）
    2.  彼此独立（例如线程之间没有通信）
    3.  对于 EJB，由容器管理
*   所有用户状态都保存在特定的数据存储容器中，包括：

    1.  通过例如 JDBC 访问的数据存储。您可以使用传统的 SQL 数据库或 NoSQL 后端
    2.  有状态会话 bean，如果您使用 EJB。将这些视为将其字段持久保存到数据库的 Java Bean。有状态会话 bean 由容器管理
    3.  [Web 会话](http://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/http/HttpSession.html)这是一个键值存储（有点像 NoSQL 数据库，但没有规模或搜索功能），它在会话中为特定用户保留数据。它由 Java EE 容器管理，并具有以下属性：

        1.  如果节点在集群中崩溃，它将自动重新定位
        2.  用户可以拥有多个当前 Web 会话（即在两个不同的浏览器上）
        3.  当用户通过注销结束他们的会话时，或者当会话处于非活动状态的时间超过可配置的超时时间时，Web 会话结束。
        4.  存储的所有值都**必须**是可序列化的，它们才能在集群中的节点之间持久化或传输。

如果我们遵循这些规则，Java EE 容器可以成功管理集群，包括关闭节点、启动新节点和迁移用户会话，而无需*任何特定的开发人员代码*。开发人员编写图形界面和业务逻辑——所有“管道”都由可配置的容器特性管理。

此外，在运行时，Java EE 容器可以由一些非常复杂的软件监控和管理，这些软件可以跟踪实时系统上的应用程序性能和行为问题。

< snark >嗯，这就是理论。实践表明，有一些非常重要的限制被遗漏了，这导致了 AOSP 和代码注入技术，但那是另一回事了</snark>

[关于这个，网上有很多讨论。一个专注于 EJB 的文章在这里：[为什么不鼓励在 Java EE 容器中生成线程？](https://stackoverflow.com/questions/533783/why-spawning-threads-in-java-ee-container-is-discouraged)对于 Tomcat 等 Web 容器也是如此]

很抱歉这篇文章 - 但这对你的问题很重要。由于线程的限制，您不应阻止 Web 请求等待另一个稍后的请求。

当前设计的另一个问题是，如果用户与网络断开连接、电量耗尽或只是决定放弃，会发生什么？大概你会超时，但过了多长时间？对一些客户来说，这可能还为时过早，这会导致满意度问题。如果超时时间过长，您最终可能会阻塞Tomcat 中的*所有*工作线程，并且服务器将冻结。这会使您的组织面临拒绝服务攻击。

**编辑：**在发布了更详细的算法描述后改进了建议。

尽管上面讨论了阻止 Web 工作线程的不良做法以及可能的拒绝服务，但很明显，用户会看到一个小的时间窗口来对 Android 手机上的通知做出反应，这可以保持合理的小以增强安全性。这个时间窗口也可以保持在 Tomcat 的响应超时以下。所以可以使用线程阻塞方法。

有两种方法可以解决此问题：

1.  **将解决方案的重点转移到客户端**——在浏览器上使用Javascript轮询服务器
2.  **集群中节点之间的通信**允许节点接收来自 Android 应用程序的授权响应，以解除阻塞 servlet 响应的节点。

对于方法 1，浏览器通过 Javascript 通过 AJAX 调用对 Tomcat 上的 Web 服务进行轮询；`True`如果 Android 应用通过身份验证，则 AJAX 调用返回。优点：客户端，服务器上的最小实现，服务器上没有线程阻塞。缺点：在等待期间，您必须进行频繁的调用（可能每秒一个 - 用户不会注意到这种延迟），这相当于*大量*的调用和服务器上的一些额外负载。

对于方法 2，还有一个选择：

1.  在共享数据存储中可选地存储节点 ID、IP 或其他标识符来阻止线程`Object.wait()`：如果是这样，接收 Android 应用授权的节点需要：

    1.  要么找到当前阻塞的节点，要么广播到集群中的所有节点
    2.  对于上面 1\. 中的每个节点，发送一条消息，标识要解除阻止的用户会话。该消息可以通过以下方式发送：

        1.  在每个节点上都有一个仅限内部的 servlet - 这由执行 Android 应用程序授权的 servlet 调用。内部 servlet 将调用`Object.notify`正确的线程
        2.  使用 JMS 发布-订阅消息队列向集群的所有成员广播。每个节点都是一个订阅者，收到通知后将调用`Object.notify()`正确的线程。
2.  轮询数据存储，直到线程被授权继续：在这种情况下，Android 应用程序需要做的就是将状态保存在 SQL DB 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T12:03:58.017

使用等待/通知可能会很棘手。请记住，任何线程都可以随时挂起。因此可以在等待之前调用通知，在这种情况下等待将永远阻塞。

在您的情况下，我不希望出现这种情况，因为您涉及用户交互。但是对于您正在执行的同步类型，请尝试使用信号量。创建一个数量为 0（零）的信号量。等待的线程调用acquire()，它会阻塞直到另一个线程调用release()。

以这种方式使用 Semaphore 比等待/通知您描述的任务更加健壮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T12:08:51.907

在分析了您的问题后，我得出的结论是，确切的问题是集群环境中的多个 JVM。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T13:17:38.427

确切的问题是由于集群环境。两个请求都不会发送到同一个 JVM。但是我们知道，当前一个线程等待时，普通/简单通知在同一个 JVM 上工作。

您应该尝试执行这两个请求（第一个请求，当用户从 Android 应用程序回复时的第二个请求）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-26T12:00:40.007

您的集群部署意味着集群中的任何节点都可以收到任何响应。

为 Web 应用程序使用线程等待/通知可能会累积大量可能无法通知的线程，这可能会泄漏内存或创建大量阻塞线程。这最终可能会影响服务器的可靠性。

更强大的解决方案是将请求发送到 android 应用程序并存储用户请求的当前状态以供以后处理并完成 HTTP 请求。要存储您可以考虑的状态：

*   所有tomcat节点都连接的[数据库](/questions/tagged/database "显示标记为“数据库”的问题")
*   一个可以跨 tomcat 节点工作的 java 缓存解决方案，例如[hazelcast](/questions/tagged/hazelcast "显示标记为“hazelcast”的问题")

此状态将对您的 tomcat 集群中的所有节点可见。

当来自 android 应用程序的回复到达不同的节点时，恢复您的线程正在执行的状态并继续在该节点上进行处理。

如果应用程序的 UI 正在等待来自服务器的响应，您可以考虑使用[ajax](/questions/tagged/ajax "显示标记为“ajax”的问题")请求来轮询来自服务器的响应状态。处理 android 应用程序响应的节点不需要与处理 UI 请求的节点相同。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-27T05:38:11.527

考虑使用内存网格，以便集群中的实例可以共享状态。我们使用[Hazelcast](http://www.hazelcast.com/products-community.jsp)在实例之间共享数据，因此如果响应到达不同的实例，它仍然可以处理它。

例如，您可以使用值为 1 的分布式倒计时锁存器来设置线程在发送消息后等待，并且当响应从客户端到达单独的实例时它可以减少，该实例可以将锁存器减少到 0 让运行第一个线。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-27T21:16:01.967

在 Web 服务环境中使用`Thread.wait`是一个巨大的错误。相反，维护一个用户/令牌对的数据库并定期将它们过期。

如果您想要一个集群，请使用可集群的数据库。我会推荐像 memcached 这样的东西，因为它在内存中（而且速度很快）并且开销很低（键/值对非常简单，所以你不需要 RDBMS 等）。memcached 已经为您处理了令牌的过期问题，因此它看起来非常合适。

我认为用户名 -> 令牌 -> 密码策略是不必要的，特别是因为您有两个不同的组件共享相同的 2 因素身份验证责任。我认为您可以进一步降低复杂性，减少用户的困惑，并为自己节省一些 SMS 发送费用。

与您的 Web 服务的交互很简单：

1.  用户使用用户名+密码登录您的网站
2.  如果主要身份验证（用户名/密码）成功，则生成一个令牌并将`userid`=`token`插入 memcached
3.  将令牌发送到用户的手机
4.  向用户呈现“输入令牌”页面
5.  用户通过电话接收令牌并将其输入表格
6.  根据用户的 id 从 memcached 中获取令牌值。如果匹配，则过期 memcached 中的令牌并认为第二因素成功
7.  令牌将在您想在 memcached 中设置的任何时间后自动过期

上述解决方案没有线程问题，它可以扩展到支持自己的软件所需的尽可能多的 JVM。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-28T01:12:37.530

恐怕，但线程无法在经典的[Java EE](http://en.wikipedia.org/wiki/Java_Platform,_Enterprise_Edition)集群上迁移。

您必须重新考虑您的架构以不同方式实现等待/通知（无连接）。

或者，您可以通过[terracotta.org](https://stackoverflow.com/questions/2761168/what-is-terracotta)尝试一下。看起来这允许在多台机器上集群整个[JVM进程。](http://en.wikipedia.org/wiki/Java_virtual_machine)也许这是你唯一的解决方案。

阅读*[OpenTerracotta 简介 中](http://www.infoq.com/articles/open-terracotta-intro)*的快速介绍。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-23T12:18:10.767

我想问题是，你的第一个线程在 JVM 1 中向用户的 Android 应用程序发送通知，当用户回复时，控制权转到 JVM 2。这就是主要问题。

不知何故，两个线程都可以访问同一个 JVM 以应用等待和通知逻辑。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-23T13:29:06.570

解决方案：

为所有等待线程创建单点联系。因此，在集群环境中，所有线程都将在第三个 JVM（单点接触）上等待，因此所有请求（任何集群[Tomcat](http://en.wikipedia.org/wiki/Apache_Tomcat)）都将联系同一个 JVM 进行等待和通知逻辑，因此没有线程会等待无限时间。如果有回复，那么如果同一个对象已经等待并且正在第二次被通知，那么线程将被通知。

# axapta - 无法在客户 (CustTable) 中选择记录

> ID：14010766
> 
> 赞同：-1
> 
> 时间：2012-12-23T11:57:55.887
> 
> 标签：axapta

有时我们会收到以下消息：

> 无法在客户 (CustTable) 中选择记录。用户账号： ， 。SQL 数据库已发出错误。

我们也让他们上`SalesTable`，`EmplTable`。

如何了解有关此类错误的更多信息以及如何修复它们。

任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:22:55.343

这听起来确实像是在 AX 之外引起的错误，并被冒泡到应用程序中。网络是一个显而易见的起点（正如上面 Alex 所指出的），而且还要检查数据库的完整性。应运行 DBCC CHECKDB 以查看 DB 是否为 100%

[链接到检查数据库](http://msdn.microsoft.com/en-us/library/ms176064.aspx)

此外，性能可能会导致超时，从而导致这些问题。良好的索引可以防止这些超时。这是 AX 索引最佳实践的链接，但索引可能更复杂。

[链接到 AX 索引最佳实践](http://msdn.microsoft.com/en-us/library/aa621872%28v=ax.10%29.aspx)

还要检查 AX SQL 服务器上的资源，尤其是 wrt 数据库 I/O。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T16:39:55.653

您可能有同步问题。您可以在“管理员 - 定期 - SQL 管理 - 表操作 - 同步数据库”中同步您的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T14:34:24.420

我相信当 AX 失去与 SQL 的连接时会发生这些错误。您很可能遇到网络问题。

编辑：为了补充我的答案，我**经常**收到这些，因为我们的网络团队一直遇到各种问题。

# ios - 无法登录游戏中心沙盒，以前可以工作

> ID：14010767
> 
> 赞同：0
> 
> 时间：2012-12-23T11:58:15.123
> 
> 标签：ios, game-center

登录 Game Center 沙盒环境时出现以下错误：

.

![在此处输入图像描述](../Images/fe86347f0f0b0158f8a0e9b3679a24b4.png)

...在终端中显示以下消息：

```
<Error>: CGImageCreate: invalid image size: 0 x 0. 
```

我一直在努力寻找解决方案，但不知道该怎么做。它曾经工作过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:17:32.397

我收到了完全相同的错误，为了验证它不是我的代码，我使用了 Erica Sadun（作者 iPhone 开发者食谱）的示例代码并且遇到了同样的错误。

我希望这不会继续通过 iTunes Connect 关闭。

更新* ***** 现在似乎工作但很慢..

# android - 读取文件中的上一行

> ID：14010768
> 
> 赞同：1
> 
> 时间：2012-12-23T11:58:19.480
> 
> 标签：android, pointers, random, file-handling

我在下面有这段代码，它读取下一行直到未编号文件的末尾（文件中的行没有数字），它工作得非常好。现在，我想读取前几行（向后读取）。如果也可能的话，随机播放（阅读随机行）。任何想法。

这是一个例子：

```
InputStream in;
BufferedReader reader;
String qline;

    try {
        in = this.getAssets().open("quotations.txt");       
        reader = new BufferedReader(new InputStreamReader(in));
        qline = reader.readLine();
        quote.setText(qline);

           } 
            catch (IOException e) {
            // TODO Auto-generated catch block
           e.printStackTrace();
                              } 
```

在我的 onClick 方法中，我有一个下一步按钮

```
 //code
    else if (v.getId() == R.id.next) {

        try{
     if (( qline = reader.readLine()) != null) {
            // myData = myData + qline;

                  quote.setText(qline);
                          }

          } catch (java.io.FileNotFoundException e) {
            // do something if the myfilename.txt does not exits

          } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

 else if (v.getId() == R.id.back) {

// code for the back option

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:22:02.933

您可以使用我的库 FileReader，或对其进行修改以适应您寻求的功能：

```
// FileReader, Khaled A Khunaifer

public class FileReader
{
    public static ArrayList<String> readAllLines (String path)
    {
        ArrayList<String> lines = new ArrayList<String>();
        InputStream fis;
        BufferedReader br;
        String line;

        try
        {
            fis = new FileInputStream(path);
            br = new BufferedReader(new InputStreamReader(fis, Charset.forName("UTF-8")));

            while ((line = br.readLine()) != null)
            {
                lines.add(line);
            }
        }
        catch (Exception e)
        {
            e.printStackTrace()
        }

        return lines;
    }

    // NOTE: LINE NUMBERS START FROM 1
    public static ArrayList<String> readLines (String path, long from, long to)
    {
            ArrayList<String> lines = new ArrayList<String>();
        long k = 1;
        InputStream fis;
        BufferedReader br;
        String line;

        try
        {
            fis = new FileInputStream(path);
            br = new BufferedReader(new InputStreamReader(fis, Charset.forName("UTF-8")));

            do
            {
                    line = br.readLine(); // read line k

                    if (k >= from)
                    {
                        if (k > to) break; // STOP

                        lines.add(line);
                    }

                k++;
            }
            while (line != null);
        }
        catch (Exception e)
        {
            e.printStackTrace()
        }

        return line;
    }

    // NOTE: LINE NUMBERS START FROM 1
    public static String readLine (String path, long i)
    {
        long k = 1;
        InputStream fis;
        BufferedReader br;
        String line;

        try
        {
            fis = new FileInputStream(path);
            br = new BufferedReader(new InputStreamReader(fis, Charset.forName("UTF-8")));

            do
            {
                    line = br.readLine(); // read line k

                    if (k == i)
                    {
                        break;
                    }

                k++;
            }
            while (line != null);
        }
        catch (Exception e)
        {
            e.printStackTrace()
        }

        return line;
    }
} 
```

# octave - 八度最大函数

> ID：14010769
> 
> 赞同：2
> 
> 时间：2012-12-23T11:58:28.870
> 
> 标签：octave

Octave 中的 max() 函数有问题。

```
x=-3:0.1:3;
y1 = sin(x);
y2 = cos(x);
plot(x,y1,x,y2,x,max(y1,y2)) 
```

看看图片： ![在此处输入图像描述](../Images/60558e77a86d9cfba38e5c08f9f12e97.png)![在此处输入图像描述](../Images/ff8c398a662ba40f2446763d2d2bb16c.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T12:03:42.220

max 函数没有任何问题。图上的 x 分辨率设置为 0.1，因此它在 -2.3 和 -2.4 处采样，并在其间画一条线。它在 sin/cos 曲线上做同样的事情，但由于没有尖角，你无法分辨。如果您需要更好的图表，请增加分辨率：

```
x=-3:0.01:3; 
```

# php - 如何通过 Imagick 实现 imagecopy (GD) 功能？

> ID：14010784
> 
> 赞同：1
> 
> 时间：2012-12-23T12:01:19.947
> 
> 标签：php, imagemagick, gd, imagick

我正在使用 imagick 并面临一些问题。我想合成两张图片：image01和image02，image01是背景图片，image02的一部分合成在image01上。该功能就像 GD 的[imagecopy](http://php.net/manual/en/function.imagecopy.php)功能一样。

```
bool imagecopy( resource dst_im, resource src_im, int dst_x, int dst_y, 
                int src_x, int src_y,int src_w, int src_h ) 
```

> 将 src_im 的一部分复制到 dst_im，从 x,y 坐标 src_x、src_y 开始，宽度为 src_w，高度为 src_h。定义的部分将被复制到 x,y 坐标、dst_x 和 dst_y。

问题是：如何通过 Imagick 实现 imagecopy 功能？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:46:22.477

这应该这样做：

```
//load files from source
$background = new Imagick(image01_src);
$overlay = new Imagick(image02_src);

//Crop the overlay to the required size
$overlay->cropImage ($new_width,$new_height,$x_offset,$y_offset);

//composite overlay on background
$background->compositeImage($overlay, Imagick::COMPOSITE_OVER, $margin_x, $margin_y);

//save result
$background->setImageFormat("png");
$background->writeImage(new_src);

//clean up
$background->clear();
$background->destroy();
$overlay->clear();
$overlay->destroy(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:31:40.103

使用[复合](http://php.net/manual/en/imagick.compositeimage.php)，例如：

```
$large_image->compositeImage($small_image, Imagick::COMPOSITE_OVER, $margin_x, $margin_y); 
```

如果你给我看源图片和最终图片，我可以给你确切的代码。

# ruby-on-rails - rails3 加载我的基类，但在代码更改时不评估我的子类

> ID：14010788
> 
> 赞同：0
> 
> 时间：2012-12-23T12:02:05.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-1.9.3

相当复杂，所以我会尽量简单。

我有一个 Rails 应用程序，当我在开发模式下工作并在服务器运行时更​​改我的代码时遇到问题。
我有以下模型（只有相关代码，如果您认为需要更多 - 告诉我，我会添加）：

```
---- file : app/models/entity.rb ----
class Entity < ActiveRecord::Base

  @@str_to_ent = {}

  def self.with_type(given_type)
    given_type = given_type.to_sym
    if @@str_to_ent[given_type] and self!=@@str_to_ent[given_type]
      raise "Type #{given_type} was already associated by #{@@str_to_ent[given_type}"
    end
    @@str_to_ent[given_type] = self
  end

  def self.by_type(type)
    @@str_to_ent[type.to_sym]
  end

  # rest of code
end
Dir["#{File.dirname(__FILE__)}/*.rb"].each {|file| puts "requiring #{file}"; require file }

---- file : app/models/ip_entity.rb ----
class IpEntity < Entity
  with_type :ip

  # rest of code
end

---- file : app/models/phone_entity.rb ----
class PhoneEntity < Entity
  with_type :phone

  # rest of code
end 
```

我希望为实体分配一个类型（字符串）以进行进一步查找（在其中一个控制器中，我需要实体的文本表示与实体类本身之间的映射）。
显然我需要加载所有子类实体，这就是为什么我在 entity.rb 上添加了最后一行来加载所有其他实体。（也尝试使用初始化程序，但它没有帮助，因为当代码更改时它没有重新加载）。

我的问题如下：

1.  我启动服务器。通过查看一些调试打印，我可以看到所有其他类都已加载，并且当我查看 @@str_to_ent 映射时 - 它已初始化。
2.  我打电话给控制器。一切都好。我一直用各种论据来称呼它——一切都很好。
3.  我更改了任何文件（添加空格线）
4.  从现在开始，我将收到一条错误消息，指出没有实体与给定类型关联（Entity.by_type 在先前初始化的类型上返回 nil）。

我确实明白，当代码更改时，rails（在开发模式下）会重新评估类文件。我也可以在我的调试打印中看到这一点。它需要 entity.rb 类，因此用 {} 覆盖 @@str_to_ent，但是虽然它需要 'ip_entity.rb' 和 'phone_entity.rb'，但它似乎实际上并没有评估它们，因为 Entity.with_type 是'没有再次调用，@@str_to_ent 哈希仍然是空的。这就是造成问题的原因。

我可以克服这个问题的唯一方法是重新启动服务器，但这会使整个调试过程非常烦人......

任何人都可以提供解决方案吗？当我需要以某种方式“配置”我的类（非常类似于“attr_accessible”或“validates_presence_of”）时，最佳实践是什么，但即使在 rails 重新加载类时我也需要这些方法的操作。（我对重新评估类没有问题，我的问题是它重新评估了基础并跳过了子类）。

谢谢，
扎克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:45:16.840

如果我正确理解您要实现的目标，则称为单表继承。在模型上实现继承时，这是 Rails 的默认行为。

在此文档中搜索[Single Table Inheritance](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)。

**更新**

我认为 using`require_dependency`也应该允许您重新加载子类：

```
class Entity
  ...
end
require_dependency 'ip_entity'
require_dependency 'phone_entity' 
```

# python - 删除所有 XML 标签，只保留标签之间的文本

> ID：14010791
> 
> 赞同：2
> 
> 时间：2012-12-23T12:02:15.683
> 
> 标签：python, xml

我有一个 XML（实际上是一个 XML 样式表）。使用 Python，我想从中删除所有标签，只保留标签之间的文本。

最简单的解决方案是什么？我在这里看到了一个类似的问题： [如何从下载的页面中删除所有 html 标签](https://stackoverflow.com/questions/3351485/python-how-to-remove-all-html-tags-from-downloaded-page)

但由于某种原因，这在这种情况下似乎不起作用。请注意，我不希望在标签中保留由引号分隔的文本 - 我真的想删除以“<”开头并以“>”结尾的所有内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T12:42:23.473

你可以使用[`xml.parsers.expat`](http://docs.python.org/2/library/pyexpat.html#module-xml.parsers.expat)：

```
from xml.parsers.expat import ParserCreate

def char_data(data):
    if data.strip(): # skip empty text if you want
        print data

parser = ParserCreate()
parser.CharacterDataHandler = char_data
parser.Parse(doc,True) 
```

或者[`xml.sax`](http://docs.python.org/2/library/xml.sax.html#module-xml.sax)：

```
from xml.sax import make_parser, handler

class extract_text(handler.ContentHandler):
    def characters(self,data):
        if data.strip():
            print data

parser = make_parser()
parser.setContentHandler(extract_text())
parser.feed(doc) 
```

如果它不是格式正确的 XML，您也可以尝试[`HTMLParser`](http://docs.python.org/2/library/htmlparser.html)：

```
from HTMLParser import HTMLParser

class extract_text(HTMLParser):
    def handle_data(self,data):
        if data.strip():
            print data

parser = extract_text()
parser.feed(doc) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:17:57.193

使用[`ElementTree`API](http://docs.python.org/2/library/xml.etree.elementtree.html)（或更快的 API 等效项[`lxml`](http://lxml.de/)），然后使用`etree.totext(tree, method='text')`函数将树序列化回文本内容：

```
>>> from xml.etree import ElementTree as ET
>>> doc='''\
... <?xml-stylesheet href="common.css"?>
... <?xml-stylesheet href="modern.css"
...   title="Modern" media="screen"
...   type="text/css"?>
... <?xml-stylesheet href="classic.css"
...   alternate="yes" title="Classic"
...   media="screen, print" type="text/css"?>
... <ARTICLE>
...   <HEADLINE>Fredrick the Great meets
...     Bach</HEADLINE>
...   <AUTHOR>Johann Nikolaus Forkel</AUTHOR>
...   <PARA>
...     One evening, just as he was
...     getting his
...     <INSTRUMENT>flute</INSTRUMENT>
...     ready and his musicians were
...     assembled, an officer brought him a
...     list of the strangers who had arrived.
...   </PARA>
... </ARTICLE>
... '''
>>> tree = ET.fromstring(doc)
>>> ET.tostring(tree, method='text')
'\n  Fredrick the Great meets\n    Bach\n  Johann Nikolaus Forkel\n  \n    One evening, just as he was\n    getting his\n    flute\n    ready and his musicians were\n    assembled, an officer brought him a\n    list of the strangers who had arrived.\n  \n' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T12:35:40.950

Lxml 可能会出现问题，您可以使用标准库中的 ElementTree 或 C 版本 cElementTree 执行 Martijn Pieters 所说的确切操作。

```
>>> from xml.etree import ElementTree
>>> doc='''
...  <?xml-stylesheet href="common.css"?>
...  <?xml-stylesheet href="modern.css"
...    title="Modern" media="screen"
...    type="text/css"?>
...  <?xml-stylesheet href="classic.css"
...    alternate="yes" title="Classic"
...    media="screen, print" type="text/css"?>
...  <ARTICLE>
...    <HEADLINE>Fredrick the Great meets
...      Bach</HEADLINE>
...    <AUTHOR>Johann Nikolaus Forkel</AUTHOR>
...    <PARA>
...      One evening, just as he was
...      getting his
...      <INSTRUMENT>flute</INSTRUMENT>
...      ready and his musicians were
...      assembled, an officer brought him a
...      list of the strangers who had arrived.
...    </PARA>
...  </ARTICLE>
...  '''

>>> xml = ElementTree.fromstring(doc)
>>> xml
<Element 'ARTICLE' at 0x9295e6c>
>>> ElementTree.tostring(xml,method='text')
'\n   Fredrick the Great meets\n     Bach\n   Johann Nikolaus Forkel\n   \n     One evening, just as he was\n     getting his\n     flute\n     ready and his musicians were\n     assembled, an officer brought him a\n     li
st of the strangers who had arrived.\n   \n ' 
```

请注意，cElementTree 更快，它在标准库中，但我认为 UTF8 存在一些问题，所以如果你需要 utf8，请使用“ElementTree”

# html - 日期框中的 dateFormat 不会生效

> ID：14010794
> 
> 赞同：3
> 
> 时间：2012-12-23T12:02:21.133
> 
> 标签：html, jsp, date, datepicker

我正在尝试使用 dateFormat 创建一个日期框，但看起来 dateFormat 不起作用。它给出了**day/month/year**，但我只想要**month/year**。

这是我的jsp：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <link rel="stylesheet" type="text/css" href="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
    <script src="http://dev.jtsage.com/cdn/datebox/latest/jquery.mobile.datebox.calbox.min.j‌​s"></script>
    <script src="http://dev.jtsage.com/cdn/datebox/i18n/jquery.mobile.datebox.i18n.en_US.utf8.js"></script>
</head>
<body>
    <div data-role="page">
        <input type="date" name="date" data-role="datebox" data-options='{"mode":"calbox","dateFormat":"%m/%Y"}' />
    </div>
</body>
</html> 
```

我看到了这个[线程](https://stackoverflow.com/questions/11724670/dateformat-option-for-datebox-does-not-work)，但我仍然不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T12:55:51.403

您提供的代码中似乎存在问题：

```
http://dev.jtsage.com/cdn/datebox/latest/jquery.mobile.datebox.calbox.min.j‌​s 
```

在“j‌​s”之间包含一些隐藏字符。通常，它将是 6a73 的十六进制，但在您的情况下，由于某种原因，它是 6ae2808ce2808b73，因此将该链接更改为

```
http://dev.jtsage.com/cdn/datebox/latest/jquery.mobile.datebox.calbox.min.js 
```

[证明](http://www.diffnow.com/?report=ix6f9)

但是，要回答您的问题，请尝试使用：

```
 <link rel="stylesheet" href="http://code.jquery.com/mobile/latest/jquery.mobile.css" />
    <link type="text/css" href="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.min.css" rel="stylesheet" /> 
    <link type="text/css" href="http://dev.jtsage.com/cdn/simpledialog/latest/jquery.mobile.simpledialog.min.css" rel="stylesheet" /> 
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script> 
    <script type="text/javascript" src="http://code.jquery.com/mobile/latest/jquery.mobile.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/jquery.mousewheel.min.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.core.min.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.mode.calbox.min.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.mode.datebox.min.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.mode.flipbox.min.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.mode.durationbox.min.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.mode.slidebox.min.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/i18n/jquery.mobile.datebox.i18n.en_US.utf8.js"></script>
    <div data-role="page">
        <input type="date" name="date" data-role="datebox" data-options='{"mode":"datebox","overrideDateFormat":"%m/%Y","overrideDateFieldOrder": ["m", "y"],"calUsePickers": true, "calNoHeader": true,"calShowDays": false,"calMonthMode": true}' />
    </div>​ 
```

仅强制选择月/年

[现场演示](http://fiddle.jshell.net/EHRQG/show/)| [来源](http://jsfiddle.net/EHRQG/)

# sql-server - 使用 SQL Server 2012 将 csv 值插入多行无法以所需方式工作

> ID：14010806
> 
> 赞同：1
> 
> 时间：2012-12-23T12:04:32.070
> 
> 标签：sql-server, tsql, sql-server-2012

```
Insert Into MessagingMessageReceipient
      (
       MessageId,
       ReceipientId,
       ReceipientType
      )
      SELECT
       @pEMailId,
       csv.Part,   -- each @pReceiver
       1
      FROM 
      dbo.inline_split_me(',',@pReceivers) csv 
```

情况1：

如果`@pReceiver`包含 -- “a”，仅

然后上面的存储过程导致插入两行（一个带有'a'，另一个带有空白）

案例2。

while if`@pReceiver`包含 -- 仅 "a"

然后上面的存储过程导致插入零行

案例3。

`@pReceiver`仅当包含 - “a，b”类型的值时，它才能正常工作

如何使它在所有类型的输入中都能正常工作

功能

```
CREATE FUNCTION inline_split_me (@SplitOn char(1),@String varchar(7998))
RETURNS TABLE AS
RETURN (WITH SplitSting AS
           (SELECT
                LEFT(@String,CHARINDEX(@SplitOn,@String)-1) AS Part
                    ,RIGHT(@String,LEN(@String)-CHARINDEX(@SplitOn,@String)) AS Remainder
                WHERE @String IS NOT NULL AND CHARINDEX(@SplitOn,@String)>0
            UNION ALL
            SELECT
                LEFT(Remainder,CHARINDEX(@SplitOn,Remainder)-1)
                    ,RIGHT(Remainder,LEN(Remainder)-CHARINDEX(@SplitOn,Remainder))
                FROM SplitSting
                WHERE Remainder IS NOT NULL AND CHARINDEX(@SplitOn,Remainder)>0
            UNION ALL
            SELECT
                Remainder,null
                FROM SplitSting
                WHERE Remainder IS NOT NULL AND CHARINDEX(@SplitOn,Remainder)=0
           )
           SELECT Part FROM SplitSting
       ) 
```

我正在使用 SQL Server 2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:29:13.517

```
Alter FUNCTION inline_split_me (@SplitOn char(1),@String varchar(7998))
RETURNS TABLE AS
RETURN (WITH SplitSting AS
           (SELECT
                LEFT(@String,CHARINDEX(@SplitOn,@String)-1) AS Part
                    ,RIGHT(@String,LEN(@String)-CHARINDEX(@SplitOn,@String)) AS Remainder
                WHERE @String IS NOT NULL AND CHARINDEX(@SplitOn,@String)>0
            UNION ALL
            SELECT
                LEFT(Remainder,CHARINDEX(@SplitOn,Remainder)-1)
                    ,RIGHT(Remainder,LEN(Remainder)-CHARINDEX(@SplitOn,Remainder))
                FROM SplitSting
                WHERE Remainder IS NOT NULL AND CHARINDEX(@SplitOn,Remainder)>0
            UNION ALL
            SELECT
                Remainder,null
                FROM SplitSting
                WHERE Remainder IS NOT NULL AND CHARINDEX(@SplitOn,Remainder)=0
           )
           SELECT Part FROM SplitSting where LEN(Rtrim(Coalesce(Part,''))) >0
       ) 
```

# git - git中的“浮动”提交

> ID：14010807
> 
> 赞同：5
> 
> 时间：2012-12-23T12:04:34.913
> 
> 标签：git, merge, rebase

在我们的一个项目中，像往常一样，我们有一个主分支。基于此是部署分支，其中设置被修改。同样基于此的是运行部署镜像的镜像分支。master 分支不应包含任何配置更改补丁。

镜像分支中开发了小功能和修复。所以添加一个特性后，它看起来像这样：

```
master:      history ┐
deployment:          ├─ deployment-config
mirror:              └─ mirror-config ── feature 
```

现在要将功能移回主控，我首先必须重新排序镜像分支中的补丁：

```
master:      history ┐
deployment:          ├─ deployment-config
mirror:              └─ feature ── mirror-config 
```

现在我可以快进合并到主

```
master:      history ┬─ feature ┐
mirror:              │          └─ mirror-config
deployment:          └─ deployment-config 
```

然后将master合并到mirror中，并将其rebase到master上

```
master:      history ── feature ┐
mirror:                         ├─ mirror-config
deployment:                     └─ deployment-config 
```

是否有插件或工具可以自动执行此操作，以便

*   每个新提交都会自动应用到顶部提交的“下方”，
*   每个合并或樱桃选择也会自动应用到顶部提交的“下方”，
*   来自这样一个分支的合并从“低于”最高提交的状态中提取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T04:09:18.697

一般来说，我建议尝试摆脱这种配置提交情况。您不能将配置存储在您的部署中吗？或者使用涂抹过滤器，正如我在这里解释的那样：[https ://stackoverflow.com/a/13616911/758345](https://stackoverflow.com/a/13616911/758345)

如果这不是一个选项，让我回答你的问题，因为 git 中的分支非常轻量级，因此有更简单的方法可以实现你想要的。这些都不是完全自动化的，但非常简单，您绝对可以为此编写一些小脚本。

### 每个新提交都会自动应用到顶部提交的“下方”

不太确定情况，但假设您进行了更改并想要提交它们：

1.  记住你当前的分支头的 SHA
2.  隐藏您的更改
3.  `git reset --hard HEAD^`
4.  `stash pop`
5.  犯罪
6.  挑选你的旧分支头

### 每个合并或樱桃选择也会自动应用到顶部提交的“下方”

同上：`reset --hard`，做你的工作，樱桃采摘老分支头

### 来自这样一个分支的合并从“低于”最高提交的状态中提取？

这个很简单：`git merge mybranch^`

* * *

如果您不想更改您的工作目录，并且您的“配置提交”修改的文件没有被您的其他操作触及，您可以这样做：

1.  记住你当前的分支头的 SHA
2.  进行软复位：`git reset HEAD^`
3.  通过 git 忽略你的配置文件`git update-index --assume-unchanged`
4.  创建你的提交
5.  运行`git update-index --no-assume-unchanged`您的配置文件
6.  再次提交——这将重新创建您的配置文件。

`--assume-unchanged`如果您通过脚本自动执行此操作，您可以使用 git通过查看配置提交来获取配置文件列表。如果您不想自动执行此操作，您可以跳过第 3 步和第 5 步，并确保您没有在第 4 步中提交您的配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T13:51:51.640

可以自动重新排序的是 a `git rebase -i --autosquash`，它可以根据提交消息为您重新排序/压缩提交：

> 如果您知道要将某些内容压缩到哪个提交中，则可以使用“<code>squash！$other_commit_subject”。
> 然后如果你运行`git rebase --interactive --autosquash commitish`，该行将自动设置为`squash`，并放置在主题为的提交下方`$other_commit_subject`。

[（更多细节在“修剪 GIT Checkins/Squashing GIT History](https://stackoverflow.com/questions/2302736/trimming-git-checkins-squashing-git-history) ”的第二部分）

这可能是一个促进“功能”提交重新排序的想法，特别是如果您将“功能”和“镜像配置”提交混合在一起。

重新排序后，`rebase --onto`可以将这些功能合并移动到正确的分支。
参见例如“[复杂的 git rebase 操作](https://stackoverflow.com/questions/2885172/complex-git-rebase-maneuver/2885516#2885516)”。

除此之外，我不知道有任何插件可以自动执行这些任务：所有关于`git rebase`.

# ios - 基于 NSExpression 的核心数据获取不检索当前值（iOS 5，GCD）

> ID：14010809
> 
> 赞同：5
> 
> 时间：2012-12-23T12:04:41.020
> 
> 标签：ios, objective-c, core-data, grand-central-dispatch, nsexpression

## 我想要做什么

我正在使用下面的代码将数据（历史外汇汇率）从我的后端服务器（parse.com）下载到我的应用程序的核心数据存储中。

该应用程序检查本地存储的最新可用数据，并仅从服务器获取较新的数据。如果本地还没有存储数据，它会从服务器获取所有数据。

代码的设置方式，它分批获取 100 个对象的数据，将对象保存在 Core Data 中，获取现在本地存储数据的最新最新日期（通过 using `NSExpression`）并获取下一批直到不再有新的对象留在服务器上 ( `objects.count = 0`)。

因为获取速度很慢，我决定在后台线程上运行获取和核心数据保存（使用 iOS 5 提供的新核心数据多线程模型）。

从后端服务器获取工作正常，但是......

## 我的问题

似乎只有那些对象被`NSExpression`存储在磁盘上（物理上在数据库中）的对象评估，而不是仍然在内存中并且很快将被保存的对象。因此，提取主要从磁盘（内存）中检索“旧”值。

但是，当使用以下 fetch 代码（没有`NSExpression`和`NSDictionary`作为结果类型）时，我得到了当前和正确的值：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:localEntityName];
NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"date" ascending:YES];
request.sortDescriptors = @[sortDescriptor];
NSArray *results = [backgroundContext executeFetchRequest:request error:&error];
ForexHistory *forexHistoryItem = results.lastObject;
NSDate *lastLocalDate = forexHistoryItem.date;
NSLog(@"last local date results: %@",lastLocalDate); 
```

下面的代码有什么问题，它使用`NSExpression`和字典作为 fetch resultType ？

## 我的问题

如何确保`NSExpression`查找最新的本地可用日期的 which 返回最新日期？

## 编码

```
- (void)seedForexHistoryInManagedObjectContext:(NSManagedObjectContext*)context {
  NSString* const localEntityName = @"ForexHistory";
  NSString* const parseEntityName = localEntityName;
  NSString* const parseDateIdentifier = @"date";

  NSExpression *keyPathExpression = [NSExpression expressionForKeyPath:@"date"];
  NSExpression *maxPeriodExpression = [NSExpression expressionForFunction:@"max:"   
             arguments:@[keyPathExpression]];

  NSString *expressionName = @"maxDate";
  NSExpressionDescription *expressionDescription  = [[NSExpressionDescription alloc] init];
  expressionDescription.name                      = expressionName;
  expressionDescription.expression                = maxPeriodExpression;
  expressionDescription.expressionResultType      = NSDateAttributeType;

  NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:localEntityName];
  request.propertiesToFetch = @[expressionDescription];
  request.resultType = NSDictionaryResultType;

  NSArray *currencies = @[@"AUD",@"EUR",@"NZD",@"GBP",@"BRL",@"CAD",@"CNY"];

  dispatch_queue_t downloadQueue;
  downloadQueue = dispatch_queue_create("download", NULL); // create serial dispatch queue

  NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
  moc.parentContext = context;
  dispatch_async(downloadQueue,^{
     [moc performBlockAndWait:^{
          NSArray *objects;
             do {
               NSError *error;
               NSArray *dateResults = [moc executeFetchRequest:request error:&error];
               NSAssert(dateResults.count == 1,@"Request error!");
               NSDate *lastLocalDate = dateResults.lastObject[expressionName];
               NSLog(@"last local date results: %@",lastLocalDate);

               PFQuery *query = [PFQuery queryWithClassName:parseEntityName];
               query.limit = 100;
               [query orderByAscending:parseDateIdentifier];

               if (lastLocalDate) [query whereKey:parseDateIdentifier greaterThan:lastLocalDate]; // else query all

                objects = [query findObjects];

                [objects enumerateObjectsUsingBlock:^(PFObject *obj, NSUInteger idx, BOOL *stop) {

                ForexHistory *forexHistory = [NSEntityDescription    insertNewObjectForEntityForName:localEntityName
                                                                                   inManagedObjectContext:moc];
                        forexHistory.date = NULL_TO_NIL(obj[@"date"]);

                        [currencies enumerateObjectsUsingBlock:^(NSString *currency, NSUInteger idx, BOOL *stop) {
                            [forexHistory setValue:NULL_TO_NIL(obj[currency]) forKey:currency.lowercaseString];
                        }];
                    }];
                    NSError *saveError = nil;
                    [moc save:&saveError];

                    if (!saveError) NSLog(@"%lu forex rates saved successfully.",(unsigned long)objects.count);
                    else NSLog(@"Error when downloading historic forex rates: %@",error.localizedDescription);

               } while (objects.count > 0);
          }];
} 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:51:44.713

不幸的是，这是不可能的。请参阅以下文档`setIncludesPendingChanges:`：

> **特别注意事项**
> 
> `YES`不支持 将 的值与结果类型 结合使用`NSDictionaryResultType`，包括聚合结果的计算（例如`max`和`min`）。对于字典，从 fetch 返回的数组反映了持久存储中的当前状态，并且不考虑上下文中的任何未决更改、插入或删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:07:47.883

包括待处理的更改：`[request setIncludePendingChanges:YES];`在您进行提取之前插入。

这可确保未保存的更改包含在提取中。

# java - 生成分形漩涡

> ID：14010810
> 
> 赞同：9
> 
> 时间：2012-12-23T12:05:02.213
> 
> 标签：java, algorithm, graph, fractals

我需要使用算法[Iterated Function System](http://www.stsci.edu/~lbradley/seminar/ifs.html)绘制分形漩涡。

![目标分形图像](../Images/7154f596bd5333921886506b62a79998.png)

这个分形有系数：

```
0.745455 -0.459091  0.406061  0.887121 1.460279 0.691072 0.912675
-0.424242 -0.065152 -0.175758 -0.218182 3.809567 6.741476 0.087325 
```

这是我的代码：

```
import java.awt.Graphics;
import javax.swing.JPanel;

public class Surface extends JPanel {
double a1 = 0.745455;
double b1 = -0.459091;
double d1 = 0.406061;
double e1 = 0.887121;
double c1 = 1.460279;
double f1 = 0.691072;
double p1 = 0.912675;

double a2 = -0.424242;
double b2 = -0.065152;
double d2 = -0.175758;
double e2 = -0.218182;
double c2 = 3.809567;
double f2 = 6.741476;
double p2 = 0.087325;

double x1(double x, double y) {
    return a1 * x + b1 * y + c1;
}

double y1(double x, double y) {
    return d1 * x + e1 * y + f1;
}

double x2(double x, double y) {
    return a2 * x + b2 * y + c2;
}

double y2(double x, double y) {
    return d2 * x + e2 * y + f2;
}

public void paint(Graphics g) {
    drawFractal(g);
}

void drawFractal(Graphics g) {
    double x1 = 300;
    double y1 = 300;
    double x2 = 0;
    double y2 = 0;
    g.fillOval(300 + (int) x1, 300 + (int) y1, 3, 3);
    for (int i = 0; i < 10000; i++) {
        double p = Math.random();
        if (p < 0.91675) {
            x2 = x1(x1, y1);
            y2 = y1(x1, y1);
            g.fillOval(300 + (int) x2, 300 + (int) y2, 3, 3);
            x1 = x2;
            y1 = y2;
        } else {
            x2 = x2(x1, y1);
            y2 = y2(x1, y1);
            g.fillOval(300 + (int) x2, 300 + (int) y2, 3, 3);
            x1 = x2;
            y1 = y2;
        }
    }
}
} 
```

不幸的是，使用这段代码我得到了错误的图片：

![当前分形图像](../Images/975b8416df8cad2d01f8a5ec4acc5759.png)

如果有人能指出我的错误，那就太好了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-23T13:54:50.483

您的这一代似乎是正确的（即不这样做`x1 = x2 +300; y1 = y2 +300;`），但您的问题是您的渲染目的远远超出了规模。这意味着很少有点落在图像的中心之外。

你的窗口是`[0..600]x[0..600]`。尝试将`x2`and`y2`与 50 相乘，以便渲染`[-6..6]x[-6..6]`区域而不是`[-300..300]x[-300..300]`空间区域。

请注意，绘制单个像素（作为自身的线）而不是 3x3 椭圆应该就足够了。

```
int xp = 300 + (int) (x2 * scale);
int yp = 300 + (int) (y2 * scale);
g.drawLine(xp, yp, xp, yp); 
```

根据渲染的内容，您可能需要稍微调整比例以使整个图像具有合理的边界。注意第二个变换偏移了`-6.7`，所以 30 的比例应该是正确的。

另请注意，通过使用`x1 = x2 +300; y1 = y2 +300;`您可以更改转换并获得*不同*的分形（以您期望的比例）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T14:18:31.237

这太好了，我错误地认为需要指数运行时间！分形看起来比我想象的更立体！

谢谢@Jan Dvorak！

以下也有效（在我的坐标中`xcenter=300`，`ycenter=100`和`radius=50`是全局绘图参数）并且工作得更快：

```
void drawFractal2(Graphics g) {

        double x1 = 0;
        double y1 = 0;
        double x2 = 0;
        double y2 = 0;
        double p;

        g.fillOval(xcenter + (int) (x1 * radius), ycenter + (int) (y1 * radius), 3, 3);

        for(int i=0; i<100000; ++i) {
            p = Math.random();

            if (p < p1) {
                x2 = x1(x1, y1);
                y2 = y1(x1, y1);

            }
            else {
                x2 = x2(x1, y1);
                y2 = y2(x1, y1);

            }

            g.fillOval(xcenter + (int) (x2 * radius), ycenter + (int) (y2 * radius), 3, 3);
            x1 = x2;
            y1 = y2;
        }

    } 
```

而且图片更好

![在此处输入图像描述](../Images/4f876ec75655e268b6325fe48ee08e5d.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T13:35:27.747

**以下是我的错误答案**

但它表明分形比直觉更大，所以我保留了它。

我猜你的算法应该是树状的（递归的），而你的算法是线性的。你只是画了一连串的点，一个接一个地变换它。所以你得到了一些螺旋状的链。它原则上不能生成任何分形图。

**我有你的照片**

你有两个错误：

1）您将 300 传递给迭代和绘图转换。这是次要的。

2）你的算法是线性的。线性算法不能画出树状图。如果您使用随机值，您应该多次运行算法。一条链仅绘制图片的一个随机部分。

我用以下递归算法得到了你的照片。它工作缓慢，但你要改进它。

```
 void drawFractal(Graphics g, double x1, double y1, int depth) {

        double x2 = 0;
        double y2 = 0;

        if( depth > 20 ) {
            return;
        }

        g.fillOval(xcenter + (int) (x1 * radius), ycenter + (int) (y1 * radius), 3, 3);

        x2 = x1(x1, y1);
        y2 = y1(x1, y1);
        drawFractal(g, x2, y2, depth+1);

        x2 = x2(x1, y1);
        y2 = y2(x1, y1);
        drawFractal(g, x2, y2, depth+1);

    } 
```

运行它我用

```
 public void paint(Graphics g) {
        //drawFractal(g);
        drawFractal(g, 0, 0, 0);
    } 
```

参数是

```
 int xcenter = 300;
    int ycenter = 100;

    int radius = 50; 
```

图片如下：

![在此处输入图像描述](../Images/9c86431496f8c8af279913bf4cdb8976.png)

# php - 在 CakePHP 应用程序中使用静态类

> ID：14010813
> 
> 赞同：0
> 
> 时间：2012-12-23T12:05:20.093
> 
> 标签：php, cakephp, cakephp-2.0, static-classes, vendor

> **可能重复：**
> [在类构造函数中实例化供应商类](https://stackoverflow.com/questions/13960938/instantiating-a-vendor-class-in-class-constructor)

我有一个名为**fancyVendor**的第 3 方供应商类，我将其加载到我的控制器中：

```
App::import('Vendor', 'fancyVendor', array('file' => 'fancyVendor.php'));
class MyController extends AppController {

} 
```

但我需要从其他控制器访问这个供应商类。看来我需要将其用作静态类。如何静态使用供应商类？

# emacs - 更改所选文本的字体属性（即使未选中）

> ID：14010816
> 
> 赞同：0
> 
> 时间：2012-12-23T12:05:42.733
> 
> 标签：emacs, fonts, alignment

由于我想使用在使用`align`函数时不能很好对齐的字体，我想我可以在对齐文本之前更改字体类型。

所以，我不想改变选中的文本会发生什么，但我想编辑选中的文本以改变当时的字体，允许使用对齐。

```
(defun set-font-and-align () 
  (change font type of the selected text)
  (align-regexp)
) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:59:59.140

经过一些工作，这就是我想出的：

`(overlay-put (make-overlay (region-beginning) (region-end)) 'face '(:family "Monospace"))`

这会将区域中文本的字体更改为 Monospace。类似地，可以添加`:bold`其他内容。

这是它的实际效果：我用它来标记段落，然后分配一个等宽字体，然后在`&`和上对齐`\\`。

```
(defun align-test ()
  (interactive)
  (mark-paragraph)
  (overlay-put (make-overlay (region-beginning)  (region-end)) 'face '(:family "Monospace"))

 (if (eq major-mode 'latex-mode)
    (progn   (align-regexp (region-beginning) (region-end)  "\\(\\s-*\\)&" 1 1 t )
         (align-regexp (region-beginning) (region-end)  "\\(\\s-*\\)\\\\\\\\" 1 1 t )))
  ) 
```

# reporting-services - 2012 中的 ReportViewer 不会绑定到 SQL Server Compact 数据源

> ID：14010817
> 
> 赞同：2
> 
> 时间：2012-12-23T12:05:46.100
> 
> 标签：reporting-services, sql-server-ce, ssrs-2008, sql-server-ce-4

我正在使用 Visual Studio 2012 和 SQL Server Compact 4.0。当我尝试通过设计器将 ReportViewer 控件绑定到数据源的实例时，它不会绑定（可选实例被禁用）

错误信息是：

> *本地报告处理过程中发生错误。
> 尚未指定报表“Report1”的报表定义
> 对象引用未设置为对象的实例。*

是否有可能做到这一点是背后的代码？几次尝试导致类似的绑定错误。

有没有人设法使用 SQL Server Compact 4.0 进行报告？在 VS2010 中，它适用于 SQL Server Compact 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:11:03.943

你在使用 MVC 吗？如果是这样，请查看以下帖子：[http](http://social.technet.microsoft.com/Forums/en-US/sqlce/thread/39cf2d43-7fc6-474f-bcbf-72e416bca7fd) ://social.technet.microsoft.com/Forums/en-US/sqlce/thread/39cf2d43-7fc6-474f-bcbf-72e416bca7fd 。这可能是一个已知的限制。

# visual-studio-2010 - 安装 XNA 4.0 Visual Studio 2010 Windows 8

> ID：14010819
> 
> 赞同：8
> 
> 时间：2012-12-23T12:06:11.593
> 
> 标签：visual-studio-2010, windows-8, xna-4.0

我一个月前安装了 Windows 8，现在想将 xna 游戏工作室 4.0 添加到我的 Visual Studio 2010 Ultimate 中。[我从http://www.microsoft.com/en-us/download/details.aspx?id=23714](http://www.microsoft.com/en-us/download/details.aspx?id=23714)下载了 xna 安装程序并运行了安装程序。首先它说了一些关于兼容性问题的信息，但设置仍在继续。完成后，我重新启动计算机并想做一个 xna 项目，但它没有显示在 c# 下拉菜单中。所以我看了一下 %programm files(x86)%/Microsoft viual studio 10.0/Common 7/IDE/extensions/Microsoft，但是没有 xna 文件夹。我做错了什么还是 Windows 8 与 vs2010 和 xna 4.0 有一些问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-23T12:36:06.987

XNA 在 Windows 8 上不受官方支持，而且永远不会支持，因为微软干脆放弃了它。

[该解决方案](http://www.demonixis.net/blog/installer-xna-4-0-sous-windows-8/)解释了如何在 Windows 8 上安装 XNA，但很明显，如果您想要一个稳定的开发环境，则必须在 Windows 7 机器上进行开发，但请记住，即使您精通 XNA，框架本身也注定要消失。

如果您想继续在 Windows 8 上使用 C# 进行开发，我只能建议您转移到[MonoGame](http://monogame.codeplex.com/)，它是 XNA 4 API 的开源实现，用于使用 CLR 或 Mono 的多个平台，因此基本上您的大部分 XNA 知识都可以在 MonoGame 中重用.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-24T15:47:05.890

如果您真的想继续使用 XNA 4.0 进行编程，有一个变通方法。只需安装以下程序（官方 windows 程序）：

[http://www.xbox.com/en-US/LIVE/PC/DownloadClient](http://www.xbox.com/en-US/LIVE/PC/DownloadClient)

这是 Windows 市场客户端，它似乎有很大帮助，安装后尝试再次安装 xna 它应该可以工作，至少它在我运行 Windows 8 的 PC 上运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T23:53:40.127

XNA Game Studio 在幕后安装了适用于 Windows 的游戏版本 – LIVE Redistributable。一些旧版本的 Windows 游戏 – LIVE Redistributable 尝试安装和使用 Windows 8 正在安装的文件，而旧版本的可再发行文件与 Windows 8 安装的新版本文件不兼容。较新版本的 Windows 游戏 – LIVE Redistributable 与 Windows 8 兼容，如果您在安装 XNA Game Studio 之前预安装新的可再发行组件，安装程序将识别它已经存在并使用新版本而不是尝试安装旧版。

如何解决此问题

如果您遇到此问题，可以使用以下步骤来解决此问题：

[从http://www.xbox.com/en-US/LIVE/PC/DownloadClient](http://www.xbox.com/en-US/LIVE/PC/DownloadClient)下载并安装最新版本的 Windows 游戏 - LIVE Redistributable 如果您正在安装 Windows Phone SDK 7.1，请重新运行安装程序并选择修复它。这将重新运行之前失败的 XNA Game Studio 安装程序，这次它们应该可以正确安装。如果您要安装独立的 XNA Game Studio 产品，请重新运行安装程序，这一次应该可以正确安装。如果您打算进行 Windows Phone 开发，您还应该在安装 Windows Phone SDK 7.1 之后安装 Windows Phone SDK 7.1.1 更新。此更新修复了阻止 Windows Phone SDK 7.1 中的模拟器在 Windows 8 上正常工作的问题。

据我所知，微软并没有放弃 XNA。他们只是还没有更新安装程序。也许他们会为 8.1 带来它。谁知道？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-01T14:13:30.843

我已经安装了 Windows 8 开发者预览版

我想在visual studio 2012上安装xna框架

但我有一个兼容性问题

所以这是解决这个问题的方法

继续从微软下载 Visual Studio 2010 Ultimate ISO

[Visual Studio 2010 Ultimate ISO Microsoft Center 下载](http://go.microsoft.com/?linkid=9709972)

然后使用刻录工具（Nero Express for exp）将其刻录到 cd 上

如果您没有 cd 刻录它，您可以使用 Daemon Tools 将 ISO 提升到虚拟 CD/DVD 驱动器中

[这是守护进程工具的下载链接](http://www.clubic.com/telecharger-fiche10729-daemon-tools-lite.html)

安装 Visual Studio 2010 后

安装 XNA 4.0 框架

重启你的电脑

享受 ：）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-10-09T04:46:09.793

这是官方的解决方案，微软的帮助指向你，以解决这个问题：

> 如何解决 Windows 8 上可能的 XNA Game Studio 或 Windows Phone SDK 安装失败 [http://blogs.msdn.com/b/astebner/archive/2012/02/29/10274694.aspx](http://blogs.msdn.com/b/astebner/archive/2012/02/29/10274694.aspx)

而且，如果您只是想让 XNA 4.0 正常工作，而与 Windows Phone SDK 7.1 无关，那么您只需安装“Games for Windows – LIVE Redistributable”，然后安装 XNA 4.0 即可。它对我有用。

# git - 在 git 的所有提交中编辑一个文件

> ID：14010822
> 
> 赞同：14
> 
> 时间：2012-12-23T12:06:58.583
> 
> 标签：git

我犯了一个错误，git 存储库中项目的一个文件包含密码。这不是问题，因为不是公共回购，但我想摆脱回购中的密码。

存储库历史非常简单，因为我是唯一的开发人员，所以它只有 12 个提交，其中一个提交被标记。

这种情况下的更改不会影响历史记录中的任何内容（差异将保持不变），因为我要删除的密码仅在第一次提交时就存在。我想删除那个字符串，就好像它从来没有出现过一样。

是否有某种命令可以执行此操作，或者我必须从头开始重新生成历史记录，并在没有密码的情况下使用新起点并在此基础上应用差异？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T16:20:44.387

请参阅[https://help.github.com/articles/remove-sensitive-data](https://help.github.com/articles/remove-sensitive-data)。该文件将出现在所有提交中，如果您没有删除它，因为所有提交都包含整个 repo 的状态。

基本上，您需要做的是在所有提交中运行一个过滤器分支，然后强制将其推送到 repo 中。该命令具有破坏性，并将更改该文件已存在于存储库中的所有提交，因此请小心。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T11:36:10.740

谢谢，这正是我正在寻找并阅读该文章和过滤器分支文档的命令，我得到了我想要使用 sed 从文件中删除字符串的确切语法。

```
git filter-branch --tree-filter "sed -i 's/\<password\>//g' ./path_to_file/filename" --prune-empty --tag-name-filter cat -- --all 
```

在哪里：

"password" -> 是需要去掉的字符串

"./path_to_file/filename" -> 是repo里面需要修改的文件的路径

在回购根目录中运行就像一个魅力一样。

更改完成后，必须将其推送到远程服务器。这需要强制，以便服务器接受全新的重写 refs 和标签。

因此，将 repo 强制推送到远程服务器（大多数情况下为源）

```
git push origin --all --force 
```

并将标签强制推送到远程服务器

```
git push origin --tags --force 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T19:50:38.873

我会做以下事情：

```
git rebase --interactive 
```

`pick`将第一次提交（带有密码的提交）前面的命令更改为`edit`并保持所有其他行不变。保存文件并退出。

然后从文件中删除密码（并进行任何其他所需的更改），然后：

```
git add name-of-file-with-password
git commit --amend
git rebase --continue 
```

# python - 使用 opencv 2.2 和 Python 2.7 录制失败

> ID：14010825
> 
> 赞同：1
> 
> 时间：2012-12-23T12:07:13.010
> 
> 标签：python, opencv, computer-vision, video-recording

我正在尝试编写一个代码来使用 opencv 2.2 和 python 2.7 从网络摄像头录制视频。我得到了一个似乎给我错误的代码。

代码：

```
import cv, sys

cap = cv.CaptureFromCAM(0)   # 0 is for /dev/video0
if not cap:
    sys.stdout.write("!!! Failed CaptureFromCAM")
    sys.exit(1)

frame = cv.RetrieveFrame(cap)
if not frame: 
    sys.stdout.write("!!! Failed to retrieve first frame")
    sys.exit(1)

fps = 25.0      # so we need to hardcode the FPS
print "Recording at: ", fps, " fps"  

frame_size = cv.GetSize(frame)
print "Video size: ", frame_size  

writer = cv.CreateVideoWriter("out.mp4", cv.CV_FOURCC('F', 'M', 'P', '4'), 
                              fps, frame_size, True)
if not writer:
    sys.stdout.write("!!! Error in creating video writer")
    sys.exit(1)

while True :
    if not cv.GrabFrame(cap) : 
        break
    frame = cv.RetrieveFrame(cap)
    cv.WriteFrame(writer, frame)

cv.ReleaseVideoWriter(writer)
cv.ReleaseCapture(cap) 
```

错误是：

```
!!! Failed to retrieve first frame Traceback (most recent call last): 
File "C:\Users\Acer\Desktop\WORKING PROGRAMS\mp4.py", line 11, in
<module>
    sys.exit(1) SystemExit: 1 
```

当我尝试在没有任何错误的情况下运行 python 程序时，我经常在我的 Windows 7 机器上遇到这样的错误[（图像） 。](http://i47.tinypic.com/2cndrux.png)

# ruby-on-rails - SslRequirement.disable_ssl_check 错误未定义方法？

> ID：14010829
> 
> 赞同：0
> 
> 时间：2012-12-23T12:08:01.843
> 
> 标签：ruby-on-rails, development-environment, rails-ssl-requirement

我正在开发一个已建立的项目 Rails 3，并试图在开发中启用 SSL。environment/development.rb 中的以下行会生成错误。

```
 config.after_initialize do
    SslRequirement.disable_ssl_check = true
  end 
```

错误读取：

```
undefined method `disable_ssl_check=' for SslRequirement:Module (NoMethodError) 
```

对此有任何指示吗？到目前为止，搜索几乎没有发现。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T22:19:20.853

根据您提供的版本号 ( `0.1.0`)，问题可能是由您使用不同的 gem 引起的。

您使用的是[ssl_requirement](https://rubygems.org/gems/ssl_requirement) ( [repo](https://github.com/rails/ssl_requirement) )，而该`disable_ssl_check`方法由[bartt-ssl_requirement](https://rubygems.org/gems/bartt-ssl_requirement) ( [repo](https://github.com/bartt/ssl_requirement) ) 提供。后者实际上是前者的一个分支，因此您可以尝试升级。

# jquery - Jquery 在加载的内容中不起作用

> ID：14010830
> 
> 赞同：2
> 
> 时间：2012-12-23T12:08:08.047
> 
> 标签：jquery

它似乎有一个简单的解决方案，但我还想不通，有一千个类似的主题，但没有一个对我有用，所以我以一种非常简单的方式问这个问题，

我有一个按钮，比如说按钮“A”，我想在单击此按钮时加载外部页面的一部分，

加载该部分后，有另一个按钮（“B”）（在加载的内容内）使用 jQuery 显示一些隐藏的内容，问题是第二个按钮不起作用。我尝试设置超时，使用 .load('content.html #1, script'); &...

以下是代码： **主页：**

```
<body>
<a href="#" id="load">Load</a>
<div id="holder"></div>

</body> 
```

**内容页面：**

```
<body>
<section id="1">
Content 111
<a href="#" id="show">Show...</a>
<div id="showhere"></div>
</section>
<section id="2">
Content 222
</section>

</body> 
```

**脚本**

```
$(document).ready(function() {

   $("#load").click(function() {
        $('#holder')
           .html('<div> Loading</div>')
           .load('content.html #1');
    });

$("#show").click(function() {
        $('#showhere')
           .html('<p>here it is</p>')
    });

 }); 
```

# 编辑：

感谢大家的完美答案，对于这种情况，我认为最短和最简单的方法是使用 .live 但问题是这只是一个让事情变得不那么复杂的示例，在实际项目中，我有一个复杂的 jquery 要在加载的内容，这不仅仅是添加一个 .html 元素，所以基本上，我要求一种解决方案来使 java 脚本在加载的内容上工作，也许在加载内容后进行某种重置或重新加载？

# 编辑2：

好吧，我还没有找到解决方案，所以我决定更改我的代码，我将 .live 添加到所有函数中，但是还有另一个问题，我知道对于事件我必须使用类似的东西

```
$("#show").live("click",function() { 
```

代替

```
 $("#show").click(function() { 
```

但是还有很多不在函数中的东西，例如：

```
var $itval = $("#holder li").length;
    $(".filters li input[value*='all']").parent().find('span').html($itval);

    $("#holder li, .played").show();

    $(".entry-made").hide(); 
```

有什么方法可以包装一个不会影响整个 jquery 内容的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T12:09:51.577

使用[.on()](http://api.jquery.com/on/)的委托版本将事件处理程序“扩展”到动态加载的内容

```
$("#holder").on("click", "#show", function() {
        $('#showhere').html('<p>here it is</p>')
    });
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T12:09:39.567

使用[`.on`](http://api.jquery.com/on/)方法将事件绑定到动态添加的元素。

```
 $("#show").on("click","#show",function() {
       $('#showhere').html('<p>here it is</p>')
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T12:28:23.587

在这种情况下，您也可以使用实时绑定。将您当前的“#show onclick”替换为此版本。

```
$("#show").live("click",function() {
    $('#showhere').html('<p>here it is</p>')
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T12:12:16.697

原因是当您尝试连接处理程序时，该元素*不存在*，因此没有任何连接。

你可以

1.  一旦元素实际存在，使用`load`回调并直接连接，或者

2.  使用事件委托

### 1.`load`回调

`load`如果要连接到加载内容中的特定元素，请使用回调：

```
$("#load").click(function() {
    $('#holder')
       .html('<div> Loading</div>')
       .load('content.html #1', function() { // <== This is the callback
            $("#show").click(function() {
                $('#showhere')
                   .html('<p>here it is</p>')
            });
       });
 }); 
```

### 2\. 事件委托

现在，如果您要加载和卸载大量要响应事件的内容，您可以考虑使用*事件委托*。这就是你在容器上挂钩事件的地方，但告诉 jQuery 让你知道它只有在它实际上开始于容器的匹配后代时才发生。

在您的情况下，您`#holder`作为容器是有意义的：

```
$("#load").click(function() {
    $('#holder')
       .html('<div> Loading</div>')
       .load('content.html #1')
       .delegate("#show", "click", function() {
            $('#showhere')
               .html('<p>here it is</p>')
        });
 }); 
```

我[`delegate`](http://api.jquery.com/delegate)用来设置委托事件处理程序。您还可以使用可笑的重载[`on`](http://api.jquery.com/on)（注意参数的顺序不同）：

```
 .on("click", "#show", function() { 
```

`on`...但我更喜欢使用直接处理程序和`delegate`委托处理程序的清晰性。

* * *

在下面的评论中，你说过

> ...问题是我在加载的内容中有很多功能，有没有办法让它们在不重新编码的情况下工作？

我猜你所说的“加载内容中的函数”的意思是你有 JavaScript`content.html`可以在其中的元素上工作，并且你想在这个文件中重用相同的脚本。

您这样做的方法是将该脚本放在其自己的 JavaScript 文件中，`content.html`并让您的主页和您的主页都引用该文件。让脚本不在加载时*执行*`contentPageHookUpNiftyEvents`，而是定义函数（如）。

`content.html`可以在加载后立即调用该函数（如果您将`script`标签放在文件底部，则直接调用，或者`ready`如果您有某些理由不这样做）。

您的主页将从上面#1 中提到`contentPageHookUpNiftyEvents`的回调中调用。`load`

# c# - 在win8中使用c#从开始菜单取消固定

> ID：14010832
> 
> 赞同：-1
> 
> 时间：2012-12-23T12:08:31.547
> 
> 标签：c#, windows-8, tile

我正在开发 ac# 桌面应用程序。

我们需要根据条件数量取消固定我们的应用程序磁贴。这可能在应用程序生命周期的任何时候发生，而不仅仅是在安装期间。

我看到了[这个](https://stackoverflow.com/questions/13362685/app-shortcut-without-pinning-to-start-screen-in-windows-8-using-c)关于如何在 CPP 中取消固定磁贴的问题。我也尝试在 C# 中这样做，但没有成功。

有什么帮助吗？

更新：

我能够编写将 AppUserModel_StartPinOption 设置为 APPUSERMODEL_STARTPINOPTION_NOPINONINSTALL 的 C# 代码，但它没有帮助:(

这是代码：

```
private static void InstallShortcut(string linkPath)
    {

        // Find the path to the current executable
        // String exePath = Process.GetCurrentProcess().MainModule.FileName;  //Path to the current exe file that is running.  C:\\...
        IShellLinkW newShortcut = (IShellLinkW)new CShellLink();

        // Create a shortcut to the exe
        ErrorHelper.VerifySucceeded(newShortcut.SetPath(targetPath));
       ErrorHelper.VerifySucceeded(newShortcut.SetArguments(""));

        // Open the shortcut property store, set the AppUserModelId property
        IPropertyStore newShortcutProperties = (IPropertyStore)newShortcut;

            var APPUSERMODEL_STARTPINOPTION_NOPINONINSTALL = new PropVariant(0);
            var StartPinOption = new PropertyKey(new Guid("{9F4C2855-9F79-4B39-A8D0-E1D42DE1D5F3}"), 12);
            ErrorHelper.VerifySucceeded(newShortcutProperties.SetValue(StartPinOption, APPUSERMODEL_STARTPINOPTION_NOPINONINSTALL));

            ErrorHelper.VerifySucceeded(newShortcutProperties.Commit());

        // Commit the shortcut to disk
        IPersistFile newShortcutSave = (IPersistFile)newShortcut;

        ErrorHelper.VerifySucceeded(newShortcutSave.Save(linkPath, true));
    } 
```

我尝试了两种方法：删除磁贴然后重新创建它，并更改现有磁贴的参数，但没有任何效果，磁贴保持固定在开始菜单上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T03:09:23.023

您是在谈论您的主要应用程序磁贴还是辅助磁贴？如果您指的是辅助磁贴，[本文](http://blogs.msdn.com/b/jennifer/archive/2012/11/19/real-world-secondary-tiles-top-three-tips-for-working-with-secondary-tiles-in-windows-8-apps.aspx)中有取消固定的示例代码。它的核心是（为了简单起见，我做了一些修改；完整代码请参见文章）：

```
 // Check to see if this restaurant exists as a secondary tile and then unpin it
 string restaurantKey = this.m_ViewModel.Restaurant.Key;
 Button button = sender as Button;
 if (button != null)
 {
     if (Windows.UI.StartScreen.SecondaryTile.Exists(restaurantKey))
     {
         SecondaryTile secondaryTile = new SecondaryTile(restaurantKey);
         bool isUnpinned = await secondaryTile.RequestDeleteForSelectionAsync(GetElementRect((FrameworkElement)sender), Windows.UI.Popups.Placement.Above);

         if (!isUnpinned)
         {
             // Do error handling here
         }
     }
     else
     {
         // If we ever get to this point, something went wrong or the user manually 
         // removed the tile from their Start screen.  
         Debug.WriteLine(restaurantKey + " is not currently pinned.");
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T01:34:26.777

根据[MSDN 文章： System.AppUserModel.StartPinOption (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/jj553605%28v=vs.85%29.aspx)，No pin install 选项应该是 (1)

```
var APPUSERMODEL_STARTPINOPTION_NOPINONINSTALL = new PropVariant(1); 
```

我这样做了。

# hibernate - 无法在 Hibernate 映射枚举映射中实例化自定义类型错误

> ID：14010834
> 
> 赞同：3
> 
> 时间：2012-12-23T12:08:58.540
> 
> 标签：hibernate, enums, hibernate-mapping

我试图将 POJO 类映射到 mysql 数据库表。该表尚不存在。我使用以下映射文件。

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="sor.hibernate.actors.User" table="testuser" catalog="test">
        <id name="id" type="java.lang.Integer">
            <column name="id" />
            <generator class="increment" />
        </id>
        <property name="username" type="java.lang.String">
            <column name="username" length="30" />
        </property>
        <property name="password" type="java.lang.String">
            <column name="password" length="128" />
        </property>
        <property name='userLevel'>
            <type name="org.hibernate.type.EnumType">
                <param name="UserLevel">sor.hibernate.acotrs.UserLevel</param>
            </type>
        </property>
        <property name="registrationDate" type="java.lang.Date">
            <column name="regDate" length="10" />
        </property>
        <property name="birthday" type="java.lang.Date">
            <column name="birthday" length="10" />
        </property>
    </class>
</hibernate-mapping> 
```

User 类如下（我删除了访问器方法，但它们存在于代码中！）：

```
public class User {

    private long id;
    private String username;
    private String password;
    private UserLevel userLevel;
    private Date birthday;
    private Date registrationDate;

} 
```

枚举类如下：

```
public enum UserLevel {

    GUEST,
    SUSPENDED,
    SUBSCRIBER,
    CLERK;

    private UserLevel() {
        // TODO Auto-generated constructor stub
    }
} 
```

我遇到的错误是：

```
23-dic-2012 12.56.24 org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
23-dic-2012 12.56.24 org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.4.Final}
23-dic-2012 12.56.24 org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
23-dic-2012 12.56.24 org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
23-dic-2012 12.56.24 org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
23-dic-2012 12.56.24 org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: HHH000040: Configuration resource: /hibernate.cfg.xml
23-dic-2012 12.56.25 org.hibernate.cfg.Configuration addResource
INFO: HHH000221: Reading mappings from resource: sor/hibernate/actors/User.hbm.xml
23-dic-2012 12.56.25 org.hibernate.cfg.Configuration doConfigure
INFO: HHH000041: Configured SessionFactory: null
%%%% Error Creating SessionFactory %%%%
org.hibernate.MappingException: Unable to instantiate custom type: org.hibernate.type.EnumType
    at org.hibernate.type.TypeFactory.custom(TypeFactory.java:193)
    at org.hibernate.type.TypeFactory.custom(TypeFactory.java:179)
    at org.hibernate.type.TypeFactory.byClass(TypeFactory.java:103)
    at org.hibernate.type.TypeResolver.heuristicType(TypeResolver.java:130)
    at org.hibernate.mapping.SimpleValue.getType(SimpleValue.java:296)
    at org.hibernate.mapping.SimpleValue.isValid(SimpleValue.java:289)
    at org.hibernate.mapping.Property.isValid(Property.java:238)
    at org.hibernate.mapping.PersistentClass.validate(PersistentClass.java:468)
    at org.hibernate.mapping.RootClass.validate(RootClass.java:270)
    at org.hibernate.cfg.Configuration.validate(Configuration.java:1294)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1736)
    at sor.hibernate.HibernateSessionFactory.<clinit>(HibernateSessionFactory.java:34)
    at tests.FirstTest.main(FirstTest.java:22)
Caused by: java.lang.NullPointerException
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.hibernate.internal.util.ReflectHelper.classForName(ReflectHelper.java:170)
    at org.hibernate.type.EnumType.setParameterValues(EnumType.java:173)
    at org.hibernate.type.TypeFactory.injectParameters(TypeFactory.java:131)
    at org.hibernate.type.TypeFactory.custom(TypeFactory.java:189)
    ... 12 more
23-dic-2012 12.56.25 org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
23-dic-2012 12.56.25 org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: HHH000040: Configuration resource: /hibernate.cfg.xml
23-dic-2012 12.56.25 org.hibernate.cfg.Configuration addResource
INFO: HHH000221: Reading mappings from resource: sor/hibernate/actors/User.hbm.xml
23-dic-2012 12.56.25 org.hibernate.cfg.Configuration doConfigure
INFO: HHH000041: Configured SessionFactory: null
23-dic-2012 12.56.25 org.hibernate.cfg.Configuration$MappingsImpl addImport
INFO: HHH000071: Duplicate import: sor.hibernate.actors.User -> sor.hibernate.actors.User
23-dic-2012 12.56.25 org.hibernate.cfg.Configuration$MappingsImpl addImport
INFO: HHH000071: Duplicate import: sor.hibernate.actors.User -> User
%%%% Error Creating SessionFactory %%%%
org.hibernate.InvalidMappingException: Could not parse mapping document from resource sor/hibernate/actors/User.hbm.xml
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processHbmXml(Configuration.java:3409)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processHbmXmlQueue(Configuration.java:3398)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processMetadata(Configuration.java:3386)
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1341)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1731)
    at sor.hibernate.HibernateSessionFactory.rebuildSessionFactory(HibernateSessionFactory.java:73)
    at sor.hibernate.HibernateSessionFactory.getSession(HibernateSessionFactory.java:55)
    at tests.FirstTest.main(FirstTest.java:22)
Caused by: org.hibernate.DuplicateMappingException: Duplicate class/entity mapping sor.hibernate.actors.User
    at org.hibernate.cfg.Configuration$MappingsImpl.addClass(Configuration.java:2574)
    at org.hibernate.cfg.HbmBinder.bindRoot(HbmBinder.java:172)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processHbmXml(Configuration.java:3406)
    ... 7 more
Exception in thread "main" java.lang.NullPointerException
    at tests.FirstTest.main(FirstTest.java:23) 
```

而程序是

```
Session session = HibernateSessionFactory.getSession();
Transaction tx = session.beginTransaction();

User  u = new User();
u.setUsername("first");
u.setPassword("ine");
u.setUserLevel(UserLevel.CLERK);

tx.commit();
session.close(); 
```

添加 hibernate.cfg.xml

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
          "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
          "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
<!-- Generated by MyEclipse Hibernate Tools. -->
<hibernate-configuration>

    <session-factory>
        <property name="hibernate.hbm2ddl.auto">update</property>
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
        <property name="connection.url">jdbc:mysql://localhost:3306/test</property>
        <property name="connection.username">root</property>
        <property name="connection.password">qwerty</property>
        <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="myeclipse.connection.profile">testDBdriverMySql</property>
        <property name="javax.persistence.validation.mode">none</property>
        <mapping resource="sor/hibernate/actors/User.hbm.xml" />
    </session-factory>

</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T22:24:46.080

我发现了问题。我应该在以下部分更改 hbm 文件

```
 <property name="userLevel">
        <type name="org.hibernate.type.EnumType">
            <param name="enumClass">sor.hibernate.actors.UserLevel</param>
            <param name="type">12</param>
        </type>
    </property> 
```

[这里已经解释过了](https://web.archive.org/web/20161102231932/http://www.thetekblog.com:80/2011/06/hibernate-3-enums-in-the-hbm-file-not-annotations/)

我注意到还有一个错字。acotrs -> 演员

# python - 迷宫/迷宫游戏 - 几个问题 - Python 2.7.3 Pyglet 1.1.4

> ID：14010836
> 
> 赞同：0
> 
> 时间：2012-12-23T12:09:19.277
> 
> 标签：python, python-2.7, pyglet, maze

我正在使用 Python 2.7.3 和 Pyglet 1.1.4 创建一个迷宫/迷宫游戏，我有一个问题和一个问题。

我的代码可以在这里找到：[https ://github.com/czarnot/labirynth_py](https://github.com/czarnot/labirynth_py)

要启动程序，请使用 python 启动 main.py。

要移动 CPU，请使用“a”按钮。这是我的主要问题。我想让 CPU 在没有用户输入的情况下移动 - 我希望它每 0.5 或 1 秒移动 1 步。

我尝试在 cpu 步骤之间使用 time.sleep() ，它只是在所有步骤中都睡着了，然后传送到最后。我认为这与 Pyglet 相关 - 可能具有绘图功能，因为睡眠运行良好（当有打印时，它会在睡眠后打印）。

这是它现在使用“A”按钮（main.py）工作的代码部分：

```
 elif symbol == key.A:
        if win == 0:
            #for item in cpu:
                item = cpu[x]
                window.clear()
                player.draw()
                if item == 'North':
                    player.y += fieldlength
                elif item == 'South':
                    player.y -= fieldlength
                elif item == 'East':
                    player.x += fieldlength
                elif item == 'West':
                    player.x -= fieldlength
                x += 1 
```

以及我尝试过的代码（我也尝试了其他几种组合......）：

```
 elif symbol == key.A:
        if win == 0:
            for item in cpu:
                window.clear()
                player.draw()
                if item == 'North':
                    player.y += fieldlength
                elif item == 'South':
                    player.y -= fieldlength
                elif item == 'East':
                    player.x += fieldlength
                elif item == 'West':
                    player.x -= fieldlength
                time.sleep(1) 
```

另一个问题：

我的地图生成算法非常简单 - 它选择随机单元格，然后选择该单元格的随机邻居，从他们的邻居列表中删除该单元格，并将墙壁放入 WallList。

我想制作更好的地图生成算法 - 就像维基百科中的这样：[http ://en.wikipedia.org/wiki/Maze_generation_algorithm#Depth-first_search](http://en.wikipedia.org/wiki/Maze_generation_algorithm#Depth-first_search)

我不确定我的墙绘制方法是否有效 - 为每个墙组合存储 12 个图像并在 MyMap 值中存储“WallNumber”值不是更好吗？这是 WallNumber 值的示例：http: [//imgur.com/DDfL1](http://imgur.com/DDfL1)

我也要求这个，因为我觉得我现在的方法会非常混乱和棘手，为此编写更好的地图生成算法。

@@EDIT @zenpoy：我之前尝试过使用这个功能，但我一定做错了什么，现在我尝试了它并且它有效:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:44:36.490

我没有经验，`Pyglet`但一般来说，大多数图形应用程序都循环通过两个函数`update()`和`draw()`. 该`draw()`函数在每一帧都被调用，并将模型的表示绘制到屏幕上。`update()`另一方面，调用该函数来更新模型。因此，您应该在`update()`函数内而不是在`draw()`函数内进行睡眠。

而不是等待和冻结整个循环，您应该使用`clock`模块`pyglet`来安排每次增量的更新：http: [//www.pyglet.org/doc/api/pyglet.clock-module.html](http://www.pyglet.org/doc/api/pyglet.clock-module.html)。

```
clock.schedule_interval(move_player, .5) 
```

# mysql - 选择用户的所有联系人（朋友）

> ID：14010845
> 
> 赞同：0
> 
> 时间：2012-12-23T12:11:09.337
> 
> 标签：mysql, database, select, contacts

我有以下数据库： ![数据库图](../Images/9bbc198b3b50953e428465c0c80a9a34.png)

Contacts 表中的 user_id 和 contact_id 是 Users 表中 user_id 字段的 PK 和 FK。如何选择特定用户的所有联系人（或朋友），包括该用户所有联系人的联系人数量。我尝试了不同的 SELECT 查询，但联系人数量不正确或 contact_status 打印错误。我使用 COUNT() 作为打印联系人数量的函数。我使用此查询，但 contact_status 打印错误：

```
SELECT COUNT(Contacts.contact_id), Users.user_id, Users.user_name, Users.name,     Users.user_picture, Users.mood_message, Users.phone_number, Users.email, Users.country,   Users.city, Users.website, Users.birth_date, Users.gender, Users.language, Users.about_me, Users.online_status, Users.privacy, Contacts.contact_status 
FROM Contacts JOIN Users ON Contacts.contact_id = Users.user_id 
WHERE Users.user_name IN ( 
      SELECT Users.user_name 
      FROM Users 
      WHERE Users.user_id IN ( 
            SELECT Contacts.contact_id 
            FROM Contacts 
            WHERE Contacts.user_id = 12 
)
)
GROUP BY Users.user_name; 
```

用户表：

user_id, user_name, ...
12 约翰 ...
13 马特 ...
14 杰克 ...

联系人表：

用户 ID、联系人状态、联系人 ID
12 1 13
13 1 12
12 2 14

如果我想打印 John 的所有联系人，结果应包括：

COUNT（Contacts.contacts_id），Users.user_name，用户。... , Contacts.contact_status
1 马特 ... 1
0 杰克 ... 2

上面的查询将 1, 1 打印为 contact_status 而不是 1, 2。

你能帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:20:17.677

如果我明白你的目标是什么，这应该有效：

```
SELECT c.contact_status, cc.contactCount, u.*
FROM Contacts c JOIN Users u ON (c.contact_id = u.user_id)
JOIN (
    SELECT user_id, COUNT(1) contactCount FROM Contacts
    GROUP BY user_id
) cc ON (c.user_id = cc.user_id)
WHERE c.user_id = 12 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T15:27:38.270

我希望我了解您的要求，但是使用子查询要简单得多，如下所示：

```
SELECT 
    u.* -- Whatever fields you need
    ,(
           select count(*) from Contacts c
           where c.contactid = co.userid -- refers to outer record
     ) as contact_count
FROM
Users u Inner Join Contacts co
      on co.UserId = u.UserId
WHERE
      U.UserId = 12 
```

# php - 如何获取表单输入，使用 javascript 和 jquery

> ID：14010847
> 
> 赞同：0
> 
> 时间：2012-12-23T12:11:31.660
> 
> 标签：php, javascript, jquery, html

我正在使用 php 在下面的 div 标签中填充一些数据

```
<div id="div_content">
<?=$text_content?>
</div> 
```

从下面的表格内容

```
 <form action="javascript:fill_content(parm)"> 
    <table>
    <tr>
    <td><textarea name='content_name' id='content_id'>This is a test</textarea> </td>
    </tr>
    </table>
    <input name='form_submit' type="submit" value='submit'>
    </form> 
```

我用jquery：

```
<script type="text/javascript">
function fill_content(textarea_content) {
  $('#div_content').load('/process.php?content=' + textarea_content);
}
</script> 
```

我怎样才能在as中获得`textarea`价值。`javascript:fill_content(parm)``parm`

我用`document.getElementByID('content_id').value`and 也`document.getElementsByName('content_name')[0]`代替了`parm`，但它们没有用。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T12:18:10.330

为什么不再次使用 jQuery 来处理 textarea 呢？你可以使用 $('#div_content').find('#content_id').val()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:20:09.300

```
 fill_content($("#content_id").val()); 
```

# php - php DOMDocument 查找类提取id值

> ID：14010848
> 
> 赞同：2
> 
> 时间：2012-12-23T12:11:40.487
> 
> 标签：php, class, element, extract, domdocument

我有这个来自 stagram 的 html：

```
<div id="photo351321902758808423_176859145" class="photoeach">
    <div class="photoeachinner">
        <div class="left">
            <div class="photowrapper">
                <div class="infomation_box clearfix">
                    <div class="profimage_small">

<div id="photo351295515670923844_176859145" class="photoeach">
    <div class="photoeachinner">
        <div class="left">
            <div class="photowrapper">
                <div class="infomation_box clearfix"> 
```

我需要找到类 photoeach 并提取 id 352034826703915686_176859145

我用正则表达式做了，但没有运气，所以我试着用 domdocument

我遵循 [通过类名获取 DOM 元素的步骤](https://stackoverflow.com/questions/6366351/getting-dom-elements-by-class-name)

```
$dom = new DomDocument();
$dom->load($filePath);
$finder = new DomXPath($dom);
$classname="photoeach";
$nodes = $finder->query("//*[contains(@class, '$classname')]"); 
```

但我无法弄清楚如何提取 ID

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T03:28:02.533

正如戴夫已经提到的那样，您并没有那么遥远：

```
$dom = new DomDocument();
$dom->load($filePath);
$finder = new DomXPath($dom);
$classname="photoeach";
$nodes = $finder->query("//*[@class = '$classname']");

foreach ($nodes as $node) {
    echo 'Id: ' , substr($node->getAttribute('id'), 5) , '<br>';
} 
```

演示：[http ://codepad.viper-7.com/xEdYLr](http://codepad.viper-7.com/xEdYLr)

*请注意，我已将`contains`类的选择器更改为仅匹配完全匹配，否则`photoeachinner`也会匹配。如果这不是您想要的，您可以轻松地恢复该更改。*

# javascript - 设置请求标头 jQuery Ajax

> ID：14010851
> 
> 赞同：39
> 
> 时间：2012-12-23T12:11:59.060
> 
> 标签：javascript, jquery, ajax

我陷入了一个非常奇怪的问题，我想在我的 ajax 请求中向服务发送一个额外的参数**授权**，就像这样

```
Request headers
Authorization: bearer t-3e57cc74-3e7a-4fc7-9bbb-f6c83252db01
User-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
Accept: */*
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: JSESSIONID=908D73C50F09E75C9A0D674C4CB33D2F; ROUTEID=.1; __unam=3c3246b-13bc693352d-aa1535c-1 
```

但是使用此代码

```
headerParams = {'Authorization':'bearer t-7614f875-8423-4f20-a674-d7cf3096290e'};
    obj = {
        type: 'get',
        url: 'https://api.sandbox.slcedu.org/api/rest/v1/students/test1',
        headers: headerParams,
    data: [],
    dataType: 'json',
    processData: false,
    success: function(data) {
        console.log('success');
        console.log(data);
    }
};

  jQuery.ajax(obj); 
```

它像这样发送没有传递值，它的请求类型也变成了 OPTION 而不是 GET，这里是控制台日志

```
Accept: */*
Accept-Encoding gzip, deflate
Accept-Language en-US,en;q=0.5
Access-Control-Request-Headers  authorization
Access-Control-Request-Method   GET
Connection  keep-alive
Host    api.sandbox.slcedu.org
Origin  http://localhost
User-Agent  Mozilla/5.0 (Windows NT 6.1; rv:17.0) Gecko/20100101 Firefox/17.0 
```

谁能告诉我我怎样才能像这样通过授权：bearer t-3e57cc74-3e7a-4fc7-9bbb-f6c83252db01

谢谢

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-11-04T11:09:14.297

使用 beforeSend 预请求回调我们可以实现这一点。

```
$.ajax({
url: 'https://api.sandbox.slcedu.org/api/rest/v1/students/test1',
type: 'GET',
beforeSend: function (xhr) {
    xhr.setRequestHeader('Authorization', 'Bearer t-7614f875-8423-4f20-a674-d7cf3096290e');
},
data: {},
success: function () { },
error: function () { },
}); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-09-03T09:49:11.697

您可以使用 ajaxSetup 为所有请求设置它

```
$.ajaxSetup({
    beforeSend: function(xhr) {
        xhr.setRequestHeader('Authorization', '...');
    }
}); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2019-09-20T07:51:13.470

另一个选项，使用“headers”键指定。

```
var settings = {
    "async": true,
    "crossDomain": true,
    "url": "https://api.example.com/action",
    "method": "POST",
    "headers": {
        "Content-Type": "application/x-www-form-urlencoded",
        "Authorization": "Bearer eyJraWQiOiJBbWZJSXU3UFhhdXlUbHM3UmNyZmNIQUd1MUdCWkRab2I0U05GaVJuWUFJPSIsImFsZyI6IlYYYjU2In0.eyJzdWIiOiJjNTYyEEE1ZS05Zjc3LTQ2NDAtYTFmOS1hJJJ5Njk1OGE0MzUiLCJhdWQiOiI3Z2ZsZnNmMm1vNnQ4dXJpOG0xcHY5N3BnayIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJldmVudF9pZCI6ImE2YWFjOTQxLTYzYWUtNGU5ZS1iYTE1LTRlYTNlOGIyZjQ5MSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNTY4OTY0NDI2LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtd2VzdC0yLmFtYXpvbmF3cy5jb21cL3VzLXdlc3QtMl9qanRiZFZkZEYiLCJjb2duaXRvOnVzZXJuYW1lIjoiYzU2MmFjNWUtOWY3Ny00NjQwLWExZjktYTgxOTY5NThhNDM1IiwiZXhwIjoxNTY4OTY4MDI2LCJpYXQiOjE1Njg5NjQ0MjcsImVtYWlsIjoiYnJ5YW5Ab3BlbndvbmsuY29tIn0.fV4bgaKwXx-HjrBmGtBnSzaDHdP0JEeJ0sbE6MzuOJYWafT5gWfh9pLtkpUv-mgsnX3cVIWDVKC0H8_XM4ziUhsulZIRBwTiSca0CfABvanuMdbdjk1iK70aUxsrjHX0gK4SDUi4Zl6JNGws_SRbVi9Yq_ntx7ttXfUpZHjimfZ2mLidOLUruYctG1V_gU-dLD6CARCUbGh5aRk5nwX_5-HBUTbBVPYK3sXcVg2YRk63d-p3TITA5hoOEj9lxtHs3ZM7ZqNPl0XPUGghxdbvWnpSIUKrFLugRHqCiWxC38ZYiBhP0NDYoEMaOI-UrnEH1W6j-kr3fnH2LD5wOMJ_8Q"
    },
    "data": {
        "someData": someData
    }
}

$.ajax(settings).done(function (response) {
    console.log(response)
}) 
```

# magento - 未找到 Magento 模块扩展模型资源设置

> ID：14010863
> 
> 赞同：4
> 
> 时间：2012-12-23T12:14:42.217
> 
> 标签：magento, magento-1.7

我正在尝试在 Magento 1.7.0.2 安装上安装 Magento Clever CMS 模块[https://github.com/jreinke/magento-clever-cms 。](https://github.com/jreinke/magento-clever-cms)

在我的开发环境中，我可以毫无问题地安装它，但在生产环境中，我得到一个内部服务器错误。

PHP致命错误：

> 在第 234 行的 /web/includes/src/Mage_Core_Model_Resource_Setup.php 中找不到类“JR_CleverCms_Model_Resource_Setup”

因此 Mage_Core_Model_Resource_Setup 没有使用 JR_CleverCms 资源设置进行扩展。我已经用 modgit 安装了模块，并仔细检查了所有文件是否都在那里以及文件的权限。任何人都知道问题可能是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T17:43:36.363

这是由于在您的生产环境中启用了编译，但该文件尚未“编译”（复制到包含/src）。

请参阅此[答案](https://stackoverflow.com/questions/11611433/magento-unable-to-load-the-observe-class/11611769#11611769)以获取解决方案。

# java - 防止 BoxLayout 扩展子级

> ID：14010864
> 
> 赞同：4
> 
> 时间：2012-12-23T12:14:58.843
> 
> 标签：java, swing, jpanel, boxlayout, preferredsize

我想在 JPanel 内垂直堆叠一些 JComponent，以便它们堆叠在顶部，而任何额外的空间都在底部。我正在使用 BoxLayout。每个组件都将包含一个 JTextArea，它应该允许文本在必要时换行。所以，基本上，我希望这些组件中的每一个的高度都是显示（可能是包装的）文本所需的最小值。

这是我正在做的包含代码示例：

```
import javax.swing.*;
import java.awt.*;
public class TextAreaTester {
    public static void main(String[] args){
        new TextAreaTester();
    }
    public TextAreaTester(){
        JFrame frame = new JFrame();
        JPanel panel = new JPanel();
        panel.setLayout(new BoxLayout(panel,BoxLayout.PAGE_AXIS));
        panel.setPreferredSize(new Dimension(100,400));
        for(int i = 0; i<3; i++){
            JPanel item = new JPanel(new BorderLayout());
            JTextArea textarea = new JTextArea("this is a line of text I want to wrap if necessary");
            textarea.setWrapStyleWord(true);
            textarea.setLineWrap(true);
            textarea.setMaximumSize( textarea.getPreferredSize() );
            item.add(textarea,BorderLayout.NORTH);
            panel.add(item);
        }
        panel.add(Box.createGlue());
        frame.add(panel);
        frame.setVisible(true);
        frame.pack();  
    }
} 
```

子 JPanel 正在扩展以填充垂直空间。我尝试使用胶水，因为我认为这就是胶水的用途，但它似乎什么也没做。有什么帮助吗？

注意：我发现了一些看起来几乎相同的问题，但没有一个问题有我可以应用的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T12:18:41.203

一种解决方案：使用 Borderlayout 将 JPanel 与外部 JPanel 嵌套，并使用 JPanel 将 BoxLayout 添加到此 BorderLayout.NORTH，也称为 BorderLayout.PAGE_START：

**为克利奥帕特拉编辑：**

```
import javax.swing.*;
import java.awt.*;

public class TextAreaTester {
   public static void main(String[] args) {
      new TextAreaTester();
   }

   public TextAreaTester() {
      JFrame frame = new JFrame();
      JPanel panel = new JPanel();
      panel.setLayout(new BoxLayout(panel, BoxLayout.PAGE_AXIS));
      // panel.setPreferredSize(new Dimension(100,400));
      for (int i = 0; i < 3; i++) {
         JPanel item = new JPanel(new BorderLayout());
         // item.setLayout(new BoxLayout(item,BoxLayout.LINE_AXIS));
         JTextArea textarea = new JTextArea(
               "this is a line of text I want to wrap if necessary", 3, 35);
         textarea.setWrapStyleWord(true);
         textarea.setLineWrap(true);
         // textarea.setMaximumSize(textarea.getPreferredSize());
         // item.setMaximumSize( item.getPreferredSize() );
         item.add(new JScrollPane(textarea), BorderLayout.NORTH);
         panel.add(item);
      }
      panel.add(Box.createGlue());

      JPanel mainPanel = new JPanel(new BorderLayout()) {
         private final int prefW = 100;
         private final int prefH = 400;

         @Override
         public Dimension getPreferredSize() {
            return new Dimension(prefW, prefH);
         }
      };
      // mainPanel.setPreferredSize(new Dimension(100, 400));
      mainPanel.add(panel, BorderLayout.PAGE_START);

      frame.add(mainPanel);
      frame.setVisible(true);
      // frame.getContentPane().add(jp);
      frame.pack();
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-06T14:40:31.727

或者，您可以使用[Box.Filler](http://docs.oracle.com/javase/8/docs/api/javax/swing/Box.Filler.html)。只需将您的电话替换`panel.add(Box.createGlue())`为

```
panel.add(new Box.Filler(new Dimension(0, 0),
    new Dimension(0, Short.MAX_VALUE),
    new Dimension(0, Short.MAX_VALUE))); 
```

如果您想为水平布局实现相同的效果，只需`Short.MAX_VALUE`在 Dimension 调用中使用宽度而不是高度。

# c - 3n+1 奇怪的事情发生

> ID：14010865
> 
> 赞同：1
> 
> 时间：2012-12-23T12:15:00.837
> 
> 标签：c

在模拟[Colatz 猜想](http://en.wikipedia.org/wiki/Collatz_conjecture)问题时，我进行了递归，当我想在递归中打印计数时，我得到了我需要的结果，但是当函数返回结果时，它给了我奇怪的数字，这是为什么呢？

```
#include <stdio.h>
#include <stdlib.h>

int divide(int n,int count){

    if(n<=1){printf("%d ",count);return count;} 

    if(n%2==1){divide(n=3*n+1, ++count);}
    else{divide(n/=2, ++count);}
}
int main(void) {  
    printf("%d ",divide(10,1)); 
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T12:15:34.433

您没有任何默认值`return`。所以返回值是未定义的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-23T12:19:43.500

您需要*返回*递归调用的结果：

```
if (n % 2) { return divide(3 * n + 1, count + 1); }
//           %%%%%%
else       { return divide(n / 2, count + 1); } 
```

请注意，分配给局部变量没有意义，因此我将其更改为简单的计算。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-23T12:21:33.497

A. 您需要从递归调用中返回返回值。B. 为什么要在除法调用中
赋值？`n`

```
#include <stdio.h>
#include <stdlib.h>

int divide(int n,int count){

    if(n<=1){printf("%d ",count);return count;} 

    if(n%2==1)
    {
        return divide(3*n+1, ++count);
    }
    else
    {
        return divide(n/2, ++count);
    }
}
int main(void) {  
    printf("%d ",divide(10,1)); 
    return 0;
} 
```

# c++ - 如何在同一个解决方案下为多个项目声明通用#define？

> ID：14010866
> 
> 赞同：2
> 
> 时间：2012-12-23T12:15:00.433
> 
> 标签：c++, visual-studio-2010, macros, versioning, definition

我在同一个解决方案下有几个项目。我想将此添加到我的所有 .rc 文件中：

```
#define STR(x) #x
#define STRING(x) STR(x)
#define TESTER STRING(MACRO1.MACRO2)

MACRO1 = 9
MACRO2 = 10
these are two macros that I added at the property pages using : "User Macros" 
```

我想使用相同的“用户宏”，但是如何在此处声明带有参数输入的宏？我也想过使用头文件，但它仍然是重复的..

有没有办法在公共属性中定义这些 STR 和 STRING ？或者只是为了让我的项目阅读它们？而不是向我的所有来源添加相同的代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:58:47.857

您可以创建一个包含所有全局数据的头文件并将其放在解决方案目录中。然后将此文件作为现有项目添加到您的解决方案中。例如`defines.h`：

```
#pragma once
#define STR(x) #x
#define STRING(x) STR(x)
#define TESTER STRING(MACRO1.MACRO2)

MACRO1 = 9
MACRO2 = 10 
```

您可以像这样在任何需要的地方使用相对地址来处理此标头（假设每个项目都有一个文件夹）：

```
#include "../defines.h" 
```

或者您可以将地址添加到项目中的附加包含文件中。

# android - 为 android 无边框按钮添加样式（android 4.0+）

> ID：14010870
> 
> 赞同：2
> 
> 时间：2012-12-23T12:15:31.987
> 
> 标签：android, android-layout, button, styles, android-xml

我想为无边框按钮添加边框。但是，如果我使用父无边框按钮创建自己的样式并覆盖背景标记，我会丢失状态更改动画等，因为这也是由背景定义的。我自己也无法实现它们，因为原生 android 可绘制对象不能作为公共对象使用，因此无法访问。我不想复制drawables。是否只能以编程方式覆盖`ondraw`，还是我缺少基于 xml 的解决方案？（顺便说一句，这是一个周期表，所以这不应该涉及每个按钮都有一个 xml 文件，因为它们大约有 100 个）谢谢斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:26:36.420

其中大部分来自[这篇文章](http://androidcookbook.com/Recipe.seam;jsessionid=8BED36512503CA63614CA9237248CBE7?recipeId=3307)。

执行以下操作有 4 个步骤：

1.  创建一个包含状态的 XML 文件。
2.  为每个状态创建一个 XML 文件（或背景）
3.  创建按钮的样式
4.  将按钮添加到您的布局中，然后查看它的外观。

最困难的事情是第一步，所以我将在这里展示一个。对于其他人，您可以访问该站点或做自己的事情。本质上，它看起来像这样。基本上需要捕获所有 4 个状态。这应该保存在可绘制文件夹中，并且它的名称是您的应用程序将用于可绘制的名称的名称。

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:state_enabled="false"
        android:drawable="@drawable/loc_for_button_disabled" />
    <item
        android:state_pressed="true"
        android:state_enabled="true"
        android:drawable="@drawable/loc_for_button_pressed" />
    <item
        android:state_focused="true"
        android:state_enabled="true"
        android:drawable="@drawable/loc_for_button_focused" />
    <item
        android:state_enabled="true"
        android:drawable="@drawable/loc_for_button_enabled" />
</selector> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:35:54.960

一种**简单的方法**是将您的按钮放置在单独的布局中，例如 a`LinearLayout`并为此布局提供背景颜色和例如 1dp 的填充。这将在按钮周围呈现“边框”。请注意，这在布局方面非常昂贵，因此当您有很多按钮时不要使用此方法。

**正确**的解决方案是为所有状态创建一个可绘制对象，并使用您的可绘制对象构建一个可绘制状态列表，并将此可绘制状态列表分配为按钮的背景。其实工作量不大，看看[http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

# regex - 使用正则表达式提取电子邮件和名称

> ID：14010875
> 
> 赞同：13
> 
> 时间：2012-12-23T12:16:21.013
> 
> 标签：regex, language-agnostic

从这样的字符串中提取名称和电子邮件的正则表达式是什么？

```
johndoe@example.com
John <johndoe@example.com>
John Doe <johndoe@example.com>
"John Doe" <johndoe@example.com> 
```

可以假设电子邮件是有效的。该名称将通过电子邮件由一个空格分隔，并且可能会被引用。

预期结果是：

```
johndoe@example.com
Name: nil
Email: johndoe@example.com

John <johndoe@example.com>
Name: John
Email: johndoe@example.com

John Doe <johndoe@example.com>
Name: John Doe
Email: johndoe@example.com

"John Doe" <johndoe@example.com>
Name: John Doe
Email: johndoe@example.com 
```

这是我到目前为止的进展：

```
(("?(.*)"?)\s)?(<?(.*@.*)>?) 
```

（可以在这里测试：[http](http://regexr.com/?337i5) ://regexr.com/?337i5 ）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-23T13:51:49.337

以下正则表达式似乎适用于所有输入，并且仅使用两个捕获组：

```
(?:"?([^"]*)"?\s)?(?:<?(.+@[^>]+)>?) 
```

[http://regex101.com/r/dR8hL3](http://regex101.com/r/dR8hL3)

感谢 @RohitJain 和 @burning_LEGION 分别介绍了非捕获组和字符排除的概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T12:33:42.173

使用这个正则表达式`"?([^"]*)"?\s*([^\s]+@.+)`

第 1 组包含名称

第 2 组包含电子邮件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-20T16:59:12.563

```
(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})) 
```

[https://regex101.com/r/pVV5TI/1](https://regex101.com/r/pVV5TI/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T12:27:42.853

您可以试试这个（与您的代码相同但改进了），但您需要在匹配后检查返回的组，因为电子邮件是在第 2 组或第 3 组中返回的，具体取决于是否给出了名称。

```
(?:("?(?:.*)"?)\s)?<(.*@.*)>|(.*@.*) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-02T00:37:49.857

通过这种方式，您可以使用或不使用名称，删除引号。

```
\"*?(([\p{L}0-9-_ ]+)\"?)*?\b\ *<?([a-z0-9-_\.]+@[a-z0-9-_\.]+\.[a-z]+)>? 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-26T19:02:59.040

尽管@hpique 有一个很好的答案，但该解决方案仅在名称/电子邮件字符串是正则表达式中唯一被分析的内容时才有效。当您有包含其他项目（例如电子邮件）的较长消息时，它将不起作用。当此人包含中间名时，许多其他解决方案也将无法匹配（即 James Herbert Bond <jbond@example.com）。

这是我编写的一个更强大的正则表达式解决方案，即使字符串中还有许多其他内容，它也可以提取你想要的名字、姓氏和电子邮件：

```
/(?:"?)(\b[A-Z][a-z]+\b ?)(\b[A-Z][a-z]+\b ?)*(?:"?) ?<([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)>|([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/g 
```

在此处查看上述语法：[Regexr 上的示例](https://regexr.com/5pg37)

# php - 无法使用 Facebook OAuth 获取访问令牌

> ID：14010876
> 
> 赞同：2
> 
> 时间：2012-12-23T12:16:22.323
> 
> 标签：php, facebook, facebook-graph-api, oauth, facebook-access-token

大约一周前，我网站上的 Facebook 登录工作正常，但现在当我尝试使用“代码”检索访问令牌时，出现错误“**已使用此授权代码**”。我检查了很多文档和建议，但没有任何结果。

重现步骤（使用 FB PHP SDK）：

1.  使用正确的 urlencoded 返回 uri（带有斜杠）将用户发送到 FB auth：

    ```
    https://www.facebook.com/dialog/oauth?client_id=[my_cid]&redirect_uri=http%3A%2F%2Fmydomain.com%2Fauth%2Ffacebook%2F&state=e15e0894cd922098f9f8f340c820538d&scope=email&display=page 
    ```

2.  在我的重定向 uri 上接收代码参数（一切正常）

3.  发送访问令牌请求：

    ```
    https://graph.facebook.com/oauth/access_token?client_id=[my_cid]&redirect_uri=http%3A%2F%mydomain.com%2Fauth%2Ffacebook%2F&client_secret=[my_secret]&code=[long_code_goes_here] 
    ```

我也试过没有urlencoded redirect_uri。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T06:40:24.503

这是由于到目前为止 Facebook 的更改是可选的，但将在 2012 年 12 月 5 日为所有人推出。来自 2012 年12 月重大变更的[开发者路线图：](https://developers.facebook.com/roadmap/#december-2012)

> **OAuth 授权代码的新安全限制** 我们只允许将授权代码交换为访问令牌一次，并要求在创建后 10 分钟内将它们交换为访问令牌。这符合 OAuth 2.0 规范，该规范从一开始就声明“授权代码必须是短暂的且一次性使用”。有关更多信息，请查看我们的身份验证文档。

因此，当您第一次为用户获取 access_token 时，您需要存储它，然后在下次用户需要与 FBAPI 交互时显式设置它： $facebook->setAccessToken($theToken);

# emacs - 绑定键以增加/减少emacs中的字体大小

> ID：14010895
> 
> 赞同：43
> 
> 时间：2012-12-23T12:20:29.217
> 
> 标签：emacs, elisp, font-size

在我的终端（我有[terminator](http://linux.die.net/man/1/terminator)）中，我可以使用组合键`Ctrl` `+`并`Ctrl` `-`增加/减少字体大小。

在 emacs 中，我可以执行以下操作来设置字体高度：

```
(set-face-attribute 'default nil :height 70) 
```

但我不知道如何增加/减少它。我怎样才能轻松地将它添加到我的 emacs 配置中？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-12-23T15:21:25.957

我想你想要`C-x C-+`或`C-x C--`。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-24T07:54:12.967

我建议：

```
(global-set-key (kbd "C-+") 'text-scale-increase)
(global-set-key (kbd "C--") 'text-scale-decrease) 
```

虽然@Stefan 提到的默认键绑定可以完成这项工作，但我也喜欢使用更常用的键绑定。顺便说一句，`C-x C-=`也增加了字体大小并`C-x C-0`恢复了默认字体大小。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-02-04T14:57:23.573

`C-x C-+`并且`C-x C--`只给你***部分***答案：文本缩放缓冲区。

您可以更改给定***帧***的字体大小（跨该帧中的所有窗口/缓冲区），或者您可以更改给定***缓冲区***的（表观）字体大小（跨所有窗口/帧）。后者称为**text scaling**，它是 vanilla Emacs给你的`C-x C-+`。`C-x C--`

库[`zoom-frm.el`](http://www.emacswiki.org/emacs-en/download/zoom-frm.el)使用相同的命令为您提供两种缩放。将相同的命令 , 绑定`zoom-in/out`到`C-x C--`和`C-x C-+`。它放大和缩小帧或缓冲区。普通前缀 arg 在缩放帧和缩放缓冲区之间切换。还将它绑定到鼠标键（我使用`S-mouse-1`（输入）和`C-S-mouse-1`（输出）以及鼠标滚轮（输入/输出）。

库[`face-remap+.el`](http://www.emacswiki.org/emacs-en/download/face-remap%2b.el)修复了文本缩放，以便窗口大小缩小或增长以适应不断变化的文本大小，这可以释放屏幕空间。

[这个 EmacsWiki 页面](http://www.emacswiki.org/emacs/SetFonts#toc4)有更多关于这个常见问题的信息。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-23T12:59:28.067

检查 purcell 的 .emacs.d 和他的字体[utils](https://github.com/purcell/emacs.d/blob/master/lisp/init-fonts.el)。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-09-10T22:15:16.387

对于按下控制键的鼠标滚轮变化：

```
(global-set-key [C-mouse-4] '(lambda () (interactive) (text-scale-increase 1)))
(global-set-key [C-mouse-5] '(lambda () (interactive) (text-scale-decrease 1))) 
```

这工作正常，但它是本地缓冲区。以下代码使用 control + 鼠标滚轮/触控板更改所有缓冲区的框架字体高度：

```
(defun change-font-height (delta)
  (set-face-attribute 'default 
                      (selected-frame)
                      :height (+ (face-attribute 'default :height) delta)))
(global-set-key [C-mouse-4] '(lambda () (interactive) (change-font-height +4)))
(global-set-key [C-mouse-5] '(lambda () (interactive) (change-font-height -4))) 
```

# javascript - 使用 jQuery 成功刷新 DIV

> ID：14010896
> 
> 赞同：0
> 
> 时间：2012-12-23T12:20:36.740
> 
> 标签：javascript, jquery, ruby-on-rails, ajax, best-in-place

我有一个 Rails 应用程序，在表格中显示员工的轮班。用户可以使用[Best In Place](https://github.com/bernat/best_in_place) gem直接在表中编辑`shiftstart`和。`shiftend`

我得到了数据库的更新工作，但`DIV`需要重新加载，因此显示班次持续时间的栏会根据开始和结束时间的变化而扩展或收缩。

我想我需要一些javascript来做到这一点，它可能很简单，但我想不通:)

看法

```
<div class="shift-data">

    <% @myShifts.where(:shiftdate => date).order(:shiftstart).each do |shift| %>

        <div id="shift_<%= shift.id %>" class="shift-item span" style="width: <%= (shift.shiftend - shift.shiftstart) / 60 / 60 / 24 * 100 %>%; left: <%= shift.shiftstart.seconds_since_midnight / 60 / 60 / 24 * 100 %>%; top: 0px;">
            <div class="hider" style="background-color: #<%= shift.type.color %>;">
                <p>
                    <i class="icon gear"></i>
                    <%= best_in_place shift, :shiftstart, :type => :input, :display_with => :format_time_bip %> - <%= shift.shiftend.strftime("%H.%M") %> <span class="tag"><%= shift.type.name.upcase %></span>
                </p>
            </div>
        </div>

    <% end %>

</div> 
```

应用程序.JS

```
$(document).ready(function() {
  /* Activating Best In Place */
  jQuery(".best_in_place").best_in_place();
});

$(function() {
  jQuery(".best_in_place").bind("ajax:success", function() {

    /* It's here I need some help .... */

  });
}); 
```

编辑：

呈现的 HTML：

```
<div class="shift-data">
  <div id="shift_3" class="shift-item span" style="width: 58.333333333333336%; left: 8.333333333333332%; top: 0px;">
    <div class="hider" style="background-color: #df5c64;">
      <p>
        <i class="icon gear"></i>
        <span id="best_in_place_shift_3_shiftstart" class="best_in_place" data-original-content="2000-01-01 02:00:00 +0100" data-type="input" data-attribute="shiftstart" data-object="shift" data-url="/shifts/3">02.00</span>
        - 16.00
        <span class="tag">FERIE</span>
      </p>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T12:27:23.557

ajax 成功回调应该给你 ajax 请求的响应：

```
$(function() {
  jQuery(".best_in_place").bind("ajax:success", function(data) {
    var id = $(this).data('url').split('shifts/')[1]; // Maybe you don't need this

    $('#shift_' + id).css({
        'left' : 'xx',
        'width': 'xx'
    });

  });
}); 
```

# php - mysql嵌套子查询与php

> ID：14010903
> 
> 赞同：0
> 
> 时间：2012-12-23T12:21:38.863
> 
> 标签：php, mysql

我有两张桌子。我希望能够从下面的订单表代码中获取信用表中每个 id 的订单：

```
$downlinequery = "SELECT recid, Level, sp1 FROM credit 
                  WHERE sp1 = '$id' or sp2 = '$id' or sp3 = '$id' or sp4 = '$id' 
                  or sp5 = '$id' or sp6 = '$id' or sp7 = '$id' or sp8 = '$id'" ; 
$downlineresult = mysql_query($downlinequery) ;
while ($downlinerow = mysql_fetch_array($downlineresult)) {
  extract($downlinerow) ;
  $orderquery = "SELECT date,cc,cop FROM order WHERE userid='1127'" ;
  $orderresult = mysql_query($orderquery) or die("unable to get orders");
  while($orderrow = mysql_fetch_array($orderresult)){
    extract($orderrow);
    echo "$date,$cc,$cop" ;
  }
} 
```

但我不断收到错误：无法获得订单

是否可以在另一个正在运行时进行查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T12:45:11.690

可能会发生错误，因为“ORDER”是[MySQL 中的保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。你应该用反引号来逃避它：

```
$orderquery = "SELECT date,cc,cop FROM `order` WHERE userid=1127" ; 
```

“日期”也应该如此，尽管这是可以容忍的（在我链接的同一页面中进一步查看）

至于您的问题，您当然可以循环进行查询（尽管就性能而言，这并不是最好的）。但是如果你的表有一个外键（我猜是'recid'和'userid'）你可以构建一个JOINed查询

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T12:35:05.273

对于您的实际问题：我认为这个问题不正确。第一个查询未运行。它运行并在 $downlineresult (mysql_query) 中填充了结果，然后，您只是遍历结果的各个部分 (mysql_fetch_array)。

您的 MySQL 查询似乎有错误，因此您应该使用：

```
echo mysql_error(); 
```

请参阅您使用的方法的说明：

*   [mysql_query](http://php.net/manual/en/function.mysql-query.php)
*   [mysql_fetch_array](http://php.net/manual/en/function.mysql-fetch-array.php)

# java - 鉴于 jdk1.6 及更高版本中的 HashMaps 导致多线程问题，我应该如何修复我的代码

> ID：14010906
> 
> 赞同：82
> 
> 时间：2012-12-23T12:22:26.247
> 
> 标签：java, multithreading, performance, collections

我最近在stackoverflow中提出了一个问题，然后找到了答案。最初的问题是[除了互斥锁或垃圾回收之外，还有哪些机制会减慢我的多线程 Java 程序的速度？](https://stackoverflow.com/questions/13969076/what-mechanisms-other-than-mutexs-or-garbage-collection-can-slow-my-multi-thread/14003357#14003357)

我惊恐地发现 HashMap 已经在 J​​DK1.6 和 JDK1.7 之间进行了修改。它现在有一个代码块，可以使所有创建 HashMaps 的线程同步。

JDK1.7.0_10 中的代码行是

```
 /**A randomizing value associated with this instance that is applied to hash code of  keys to make hash collisions harder to find.     */
transient final int hashSeed = sun.misc.Hashing.randomHashSeed(this); 
```

最终打电话

```
 protected int next(int bits) {
    long oldseed, nextseed;
    AtomicLong seed = this.seed;
    do {
        oldseed = seed.get();
        nextseed = (oldseed * multiplier + addend) & mask;
    } while (!seed.compareAndSet(oldseed, nextseed));
    return (int)(nextseed >>> (48 - bits));
 } 
```

查看其他 JDK，我发现这在 JDK1.5.0_22 或 JDK1.6.0_26 中不存在。

对我的代码的影响是巨大的。它使得当我在 64 个线程上运行时，我得到的性能低于我在 1 个线程上运行时的性能。JStack 显示大多数线程将大部分时间花在随机循环中。

所以我似乎有一些选择：

*   重写我的代码，以便我不使用 HashMap，而是使用类似的东西
*   不知何故弄乱了rt.jar，并替换了里面的hashmap
*   不知何故弄乱了类路径，所以每个线程都有自己的 HashMap 版本

在我开始使用这些路径中的任何一条之前（所有这些路径看起来都非常耗时并且可能会产生很大的影响），我想知道我是否错过了一个明显的技巧。你们中的任何人都可以堆栈溢出的人建议哪个是更好的路径，或者可能确定一个新想法。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-27T19:58:56.713

我是 7u6 中出现的补丁的原作者，CR#7118743 : Alternative Hashing for String with Hash-based Maps‌​。

我会提前承认 hashSeed 的初始化是一个瓶颈，但它不是我们预期的问题，因为它只在每个 Hash Map 实例中发生一次。要使此代码成为瓶颈，您必须每秒创建数百或数千个哈希映射。这当然不是典型的。*您的应用程序这样做真的*有正当理由吗？这些哈希图的寿命是多久？

无论如何，我们可能会研究切换到 ThreadLocalRandom 而不是 Random 以及 cambecc 建议的延迟初始化的一些变体。

**编辑 3**

对瓶颈的修复已被推送到 JDK7 update mercurial repo：

[http://hg.openjdk.java.net/jdk7u/jdk7u-dev/jdk/rev/b03bbdef3a88](http://hg.openjdk.java.net/jdk7u/jdk7u-dev/jdk/rev/b03bbdef3a88)

该修复程序将成为即将发布的 7u40 版本的一部分，并且已在 IcedTea 2.4 版本中提供。

7u40 的接近最终测试版本可在此处获得：

[https://jdk7.java.net/download.html](https://jdk7.java.net/download.html)

仍然欢迎反馈。将它发送到[http://mail.openjdk.java.net/mailman/listinfo/core-libs-dev](http://mail.openjdk.java.net/mailman/listinfo/core-libs-dev)以确保它被 openJDK 开发人员看到。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-23T16:22:54.897

这看起来像一个你可以解决的“错误”。有一个属性禁用了新的“替代散列”功能：

```
jdk.map.althashing.threshold = -1 
```

但是，禁用替代散列是不够的，因为它不会关闭随机散列种子的生成（尽管它确实应该）。因此，即使您关闭了 alt 哈希，在哈希映射实例化期间仍然存在线程争用。

解决此问题的一种特别讨厌的方法是用您自己的非同步版本强制替换`Random`用于哈希种子生成的实例：

```
// Create an instance of "Random" having no thread synchronization.
Random alwaysOne = new Random() {
    @Override
    protected int next(int bits) {
        return 1;
    }
};

// Get a handle to the static final field sun.misc.Hashing.Holder.SEED_MAKER
Class<?> clazz = Class.forName("sun.misc.Hashing$Holder");
Field field = clazz.getDeclaredField("SEED_MAKER");
field.setAccessible(true);

// Convince Java the field is not final.
Field modifiers = Field.class.getDeclaredField("modifiers");
modifiers.setAccessible(true);
modifiers.setInt(field, field.getModifiers() & ~Modifier.FINAL);

// Set our custom instance of Random into the field.
field.set(null, alwaysOne); 
```

为什么（可能）这样做是安全的？因为 alt 散列已被禁用，导致随机散列种子被忽略。所以我们的实例`Random`实际上不是随机的并不重要。像往常一样讨厌这样的黑客，请谨慎使用。

（感谢[https://stackoverflow.com/a/3301720/1899721](https://stackoverflow.com/a/3301720/1899721)提供设置静态最终字段的代码）。

### - - 编辑 - -

FWIW，以下更改`HashMap`将在禁用 alt 散列时消除线程争用：

```
-   transient final int hashSeed = sun.misc.Hashing.randomHashSeed(this);
+   transient final int hashSeed;

...

         useAltHashing = sun.misc.VM.isBooted() &&
                 (capacity >= Holder.ALTERNATIVE_HASHING_THRESHOLD);
+        hashSeed = useAltHashing ? sun.misc.Hashing.randomHashSeed(this) : 0;
         init(); 
```

类似的方法可用于`ConcurrentHashMap`等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-05T21:24:04.107

有很多应用程序在大数据应用程序中为每条记录创建一个瞬态 HashMap。例如，这个解析器和序列化器。将任何同步放入非同步集合类是一个真正的问题。在我看来，这是不可接受的，需要尽快修复。显然在 7u6 中引入的更改，CR#7118743 应该被还原或修复，而不需要任何同步或原子操作。

不知何故，这让我想起了在 JDK 1.1/1.2 中使 StringBuffer 和 Vector 和 HashTable 同步的巨大错误。多年来，人们为这个错误付出了沉重的代价。无需重复那种经历。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-23T13:55:09.680

假设您的使用模式是合理的，您将希望使用自己的 Hashmap 版本。

那段代码使哈希冲突更难引起，防止攻击者制造性能问题（[详细信息](http://emboss.github.com/blog/2012/12/14/breaking-murmur-hash-flooding-dos-reloaded/)） - 假设这个问题已经以其他方式处理，我认为你根本不需要同步。但是，无论您是否使用同步，您似乎都希望使用自己的 Hashmap 版本，这样您就不会过多地依赖 JDK 提供的内容。

所以要么你通常写一些类似的东西并指向它，要么覆盖JDK中的一个类。要执行后者，您可以使用`-Xbootclasspath/p:`参数覆盖引导类路径。但是，这样做会“违反 Java 2 运行时环境二进制代码许可证”（[来源](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/java.html)）。

# visual-studio - “此项目与当前版本的 Visual Studio 不兼容”

> ID：14010909
> 
> 赞同：105
> 
> 时间：2012-12-23T12:24:40.063
> 
> 标签：visual-studio

我从 Visual Studio 2010 收到以下消息。

> “此项目与当前版本的 Visual Studio 不兼容”

导致此错误的一种情况已在 Stackoverflow 上发布，但[该问题](https://stackoverflow.com/questions/12782863/the-error-this-project-is-incompatible-with-the-current-version-of-visual-studi)已关闭。我认为这是一个相当普遍的问题。由于我找到了“解决方案”，我将发布这个问题，并将我的解决方案作为答案。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-12-23T12:24:40.063

如果消息

> 此项目与当前版本的 Visual Studio 不兼容

是由于试图打开一个针对 .Net 4.5 的项目，那么“解决方案”或解决方法是编辑 .csproj 文件并将 TargetFrameworkVersion 从“v4.5”更改为“v4.0”。这至少允许加载项目，尽管如果程序依赖于 4.5 功能，它可能会导致编译器错误。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-05T05:23:03.723

VS 2012 支持不同的项目类型，具体取决于您在安装时安装的内容以及您拥有的版本。某些选项可用，例如 Web 开发工具、数据库开发工具等。因此，如果您尝试打开一个 Web 项目但未安装 Web 开发工具，则会显示此消息。

如果您在另一台机器上创建项目并尝试在新机器上打开它，就会发生这种情况。在我不小心卸载了 Web 工具后，我想办法打开一个 MVC 项目。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-06-30T14:48:55.040

安装 Visual Studio 2015 Update 3 后，我在几个项目中收到了相同的错误消息。对我来说，解决方案是安装[.NET Core](https://www.microsoft.com/net/core#windows)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-08-22T14:19:50.357

就我而言，这是一个不兼容的项目类型。编辑项目文件并删除***ProjectTypeGuids***节点解决了加载项目的问题（我已经按照[此处](https://stackoverflow.com/a/14010910/1133338)的建议重新定位了框架版本）。

可能（很可能）新版本的VS不支持项目类型，因此您必须调整（更新）代码才能正常工作（如果可能），但至少您可以通过VS看到内容。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-06-16T05:29:09.963

至于我，我意识到解决方案中有另一个 Web 项目，我的 VS2017 加载正常，所以我将`ProjectTypeGuids`它的元素复制到没有加载的项目中。它的区别是：

```
-    <ProjectTypeGuids>{E3E379DF-F4C6-4180-9B81-6769533ABE47};{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids>
+    <ProjectTypeGuids>{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

在此之后，它加载。不要问我为什么。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-02-23T10:17:26.900

我通过删除以下文件夹中的文件解决了这个问题

```
%localappdata%\Microsoft\VisualStudio\12.0\ComponentModelCache 
```

资料来源：[https ://forums.xamarin.com/discussion/70388/how-to-fix-incompatible-issue-after-visual-studio-2015-update-3](https://forums.xamarin.com/discussion/70388/how-to-fix-incompatible-issue-after-visual-studio-2015-update-3)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-14T10:38:17.303

如果您在实际上是扩展名 (.vsix) 的项目中遇到相同的错误，安装[Microsoft Visual Studio 2012 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=30668)就可以解决问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-28T06:37:05.337

**在为 Visual Studio 2015 安装 Update 3 后，我在打开我的Cordova**项目（**.jsproj** Javascript 项目文件）时突然收到“此项目与当前版本的 Visual Studio 不兼容”错误消息

要解决这个问题：

*   转到程序和功能
*   选择 Microsoft Visual Studio 2015 安装并单击更改
*   点击修改
*   安装跨平台移动开发部分的“HTML/Javascript (Apache Cordova) Update 10”

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-05-17T07:38:55.220

转到工具 -> 扩展和更新 -> 在线 -> 搜索项目安装程序 -> 下载

并重新启动 Visual Studio。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-30T15:01:14.057

对我来说，我在 VS 2015 中遇到了同样的错误，并且刚刚安装了[VS 2015 update 1](https://www.visualstudio.com/en-us/news/vs2015-update1-vs.aspx)，尽管从另一个答案来看，现在 VS 实际上已经更新到了 Update 3（之后，他们得到了错误并且必须安装[.NET Core](https://www.microsoft.com/net/core#windows)） . 当它遇到某些包时出现问题，比如 Windows SDK 包，并且不得不将安装程序指向我原始 CD 中的路径，对于某些人来说，即使这样也不起作用，不得不跳过它们并从连接互联网的计算机，将它们传输过来，然后手动运行它们（计算机未连接到互联网以便能够下载软件包的更新版本），但是在完成所有这些并重新启动之后，错误消失了，我的项目加载正常。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-08-18T20:54:38.653

我遇到了这个问题，经过数小时的卸载和重新安装后，我发现了我的实例中的问题。

我得到这个的原因是我没有**正确的扩展名**。

在我的情况下，ASP.net 项目（我的启动）是不兼容的项目，这是因为我没有以下内容：

*   Microsoft ASP.NET 和 Web 工具
*   Micrsoft ASP.NET Web 框架和工具

这是一个在**工具**菜单下进入**扩展和更新的简单案例**

 *** * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-31T10:01:39.370

我遇到了这个错误，发现这是由于 .csproj.user 文件中存在“导入”XML 标记。删除它后，Visual Studio 可以再次打开该项目。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-06-26T13:30:36.000

大多数人忘记的是，Visual Studio 的文件只是文本文件，具有一些特殊的配置，将向程序显示如何打开它。也就是说，我们可以更改它，因为它只是项目文件夹中某个文件中的文本。

好吧，知道了这一点，我们要做的就很简单了！

第一步是知道这个项目是什么类型的项目。（例如：类库）

第二步是新建一个（类库），因为你知道你的visual studio会创建一个自己支持的版本。卸载这个并单击“编辑 csproj”。

在这个文件中，我们可以找到告诉 VS 如何加载这个项目的配置，他的名字是 ProjectGuid，这个序列号根据项目的类型和版本而有所不同。

现在，查看您的“ok 项目”，复制“ProjectGuid”标签，粘贴到已卸载的 csproj 上，注意细微差别，使这些文件几乎相等，除了表示项目引用的标签 ItemGroup。

这样做，保存所有文件并关闭你的 VS 并再次打开，现在你的项目应该可以正常加载了。

我希望这些信息能帮助人们更多地了解 VS 的工作原理，并在必要时帮助解决问题。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-10-11T14:37:30.667

我检查了我是否可以创建一个新的解决方案并且因为没有 SSAS、SSIS 和 SSRS 作为选项而无法创建。

我从这里下载了 SSDT 并安装了它，它工作...

[https://docs.microsoft.com/en-us/sql/ssdt/download-sql-server-data-tools-ssdt?view=sql-server-2017](https://docs.microsoft.com/en-us/sql/ssdt/download-sql-server-data-tools-ssdt?view=sql-server-2017)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-04-13T13:51:22.013

如果您来这里寻找“.smproj”文件的问题，那是因为您缺少 SQL Server Analysis Services(SSAS)。为了克服这个问题，在你的系统中安装 SQL Server Data Tools(SSDT)，重新启动你的 Visual Studio，它就会工作。

谢谢。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2017-07-17T18:06:34.537

使用 VS 2015 并在一台 PC 上安装了 Update 3 而在另一台 PC 上未安装 Update 3 时，可能会导致此问题。这就是我的问题。**

# html - 如何让浏览器忽略html标签

> ID：14010911
> 
> 赞同：-2
> 
> 时间：2012-12-23T12:24:55.797
> 
> 标签：html

我创建了一个网站，用户可以通过输入用户名和密码来创建帐户，如果我创建一个帐户并输入`<h1> dan</h1>`我的用户名，用户名将作为标题显示在网站上。如果有人要使用 img src 或大量换行符，这可能会导致大量滥用。我如何让浏览器忽略 html 标签，所以如果我要输入`<h1> dan</h1>`它，它将摆脱 html 或只是将 html 作为常规文本打印出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T12:35:41.407

已经给出了一些编程语言的各种答案。[您可能想在http://www.owasp.org/](http://www.owasp.org/)上阅读底层技术（以及 Web 开发中的其他常见威胁）。

欢迎来到 Web 开发中的安全问题世界

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T12:37:51.970

您所说的称为输入验证。在这个主题上已经做了很多工作，从头开始做这件事从来都不是一个好主意。要记住的最重要的事情是输入验证必须在服务器端完成，因为客户端很容易被操纵。

[ESAPI](https://www.owasp.org/index.php/Input_Validation_Cheat_Sheet)（由 OWASP 提供）是一个用于 Web 安全的开源库，除其他外，您可以进行输入验证，它具有多种语言的实现，包括 PHP 和 Java。如果您有兴趣在 Java 中使用 ESAPI，您可以查看[我的博客](http://amirzucker.wordpress.com/2012/11/05/creating-an-online-service-dont-start-from-scratch/)，我在其中使用 ESAPI 进行输入验证，如果您使用另一种语言，则网络上有示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T12:28:21.980

只需使用 . 输出用户名[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)。

> 执行的翻译是：
> 
> *   '&'（和号）变为' `&amp;`'
> *   `&quot;`当 ENT_NOQUOTES 未设置时，'"'（双引号）变为 ' '。
> *   仅当设置了 ENT_QUOTES 时，“'”（单引号）才变为 ' `&#039;`'（或）。`&apos;`
> *   '<'（小于）变为' `&lt;`'
> *   '>' （大于）变为 ' `&gt;`'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T12:29:54.473

您可以在 PHP中使用[strip_tags()函数。](http://php.net/manual/en/function.strip-tags.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-23T12:30:04.563

当您在服务器端代码上创建用户时，也许您可​​以清理 html 标签。

另外：我认为必须在服务器端清除来自客户端的值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-23T12:30:34.050

要么你必须去掉所有的 html 标签，或者 - 更简单 - 用它们的 html 编码替换所有`<`和`>`字符，`&lt;`并且`&gt;`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-23T12:32:43.757

您不能在浏览器中执行此操作，您必须在后端执行此操作。

1.  识别用户名、密码中允许的字符，无论您要求什么值
2.  提交表单时 -> 根据您先前定义的模式（在服务器上）验证输入
3.  在将数据发送到客户端（浏览器）之前转义/编码您的数据，即这样`<h1> dan</h1>`会变成`&lt;h1glt; dan&lt;/h1&gt;`
4.  让自己对一些安全问题以及如何避免它们（如 sql 注入或跨站点脚本）充满信心

# c - 创建随机数

> ID：14010916
> 
> 赞同：1
> 
> 时间：2012-12-23T12:25:41.007
> 
> 标签：c, random

这是我在这里的第一个问题，我正在制作一个小游戏，为了分配角色，我需要随机数。我有这个代码，但是数字可能不重复吗？谢谢。

```
void giveroles() {
    srand(time(NULL));
    int r = rand() % i + 1; 
    switch ( r ) { /* ... */ }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T12:40:18.510

如果要随机分配一小组数字，而不是随机生成它们，请创建所需数字的列表，然后随机化列表的顺序（遍历列表，随机交换条目）。

例如：

```
int cards[52];
for(int i = 0 ; i < 52 ; i++)
{
    cards[i] = i;
}
for(int i = 0 ; i < 1000 ; i++)
{
    int r1 = rand()%52;
    int r2 = rand()%52;
    int t = cards[r1];
    cards[r1] = cards[r2];
    cards[r2] = t;
}
for(int i = 0 ; i < 52 ; i++)
{
    printf("%d\n", cards[i]);
} 
```

为了完整起见，已经指出以这种方式洗牌是有偏见的。这是一个应该不偏不倚的变体：

```
cards[0] = 0;
for(int i = 1 ; i < 52 ; i++)
{
    int r = rand() % (i+1);
    cards[i] = cards[r];
    cards[r] = i;
} 
```

（需要进一步注意的是，取rand()的模块也可能有偏差，因为rand()的范围不会是偶数）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T12:26:33.547

取出线`srand(time(NULL));`。通常，您应该只在程序中执行一次此操作，例如在开始时`main()`，以便随机化后续调用使用的种子`rand()`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-23T12:29:06.827

如果您不想重复随机数，解决方案是跟踪您以前使用过哪些随机数，如果您在现有数字列表中获得“命中”，请再试一次。

此外，使用`srand(time(NULL));`应该只进行一次。我怀疑这更像是您实际提出的问题。

# internet-explorer - Selenium Webdriver 在 IE8 上找不到元素

> ID：14010919
> 
> 赞同：1
> 
> 时间：2012-12-23T12:26:32.317
> 
> 标签：internet-explorer, selenium, selenium-webdriver

这是我现在面临的一个奇怪问题。

Firefox 驱动程序在我的网页中找到了一个元素，但我的 IE 驱动程序没有。我认为这将取决于浏览器处理 xpath 的方式不同，但这似乎不是我的问题：尝试通过 id、name 和其他所有内容查找元素在 IE 驱动程序中失败。

这让我相信 html 可能不是一个正确构建的。我又错了，它的结构非常好，如果我将网页保存为 html 并尝试在保存的 html 文件上使用 selenium 的 By id 或 By name，它就可以工作！

它只是在我的网页上不起作用。仅供参考，它已启用 SSL。我简直不敢相信这可能会导致问题，因为它可以轻松地在[https://www.google.com上找到元素。](https://www.google.com)有人有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T09:00:10.280

可能元素存在于不是父框架的框架中。如果是这样，您必须在识别其中的元素之前切换到框架。

[查看链接了解更多信息](http://code.google.com/p/selenium/issues/detail?id=3032)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-05T06:58:23.673

安全选项卡中的保护模式设置对于所有四个都应该相同。我也有同样的问题，在我为所有四个区域启用保护模式后，它现在可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T14:23:17.433

有点奇怪...但是您可以通过启用“**兼容模式**”来检查吗

**启用兼容模式**

1）工具->兼容性视图设置

2) 选中在兼容性视图中显示所有站点。

我希望它有帮助......一切顺利:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-20T11:01:41.990

如果您在防火墙后面使用 Internet Explorer，您可能需要在本地 Intranet、站点、高级设置中添加安全选项，然后添加您的网址。

对我来说它有效

# c++ - Qt 未定义对 vtable 的引用

> ID：14010922
> 
> 赞同：53
> 
> 时间：2012-12-23T12:26:42.303
> 
> 标签：c++, user-interface, qt4, codeblocks

我是 Qt 编程的初学者，并在我的编程中使用代码块。我创建了 3 个文件c​​ommunicate.h、commmunicate.cpp 和 main.cpp，如下所示：

**沟通.h**

```
 #ifndef COMMUNICATE_H
    #define COMMUNICATE_H

    #include <QWidget>
    #include <QApplication>
    #include <QPushButton>
    #include <QLabel>

    class Communicate : public QWidget
    {
      Q_OBJECT

      public:
        Communicate(QWidget *parent = 0);

      private slots:
        void OnPlus();
        void OnMinus();

      private:
        QLabel *label;

    };

    #endif 
```

**通信.cpp**

```
#include "communicate.h"

Communicate::Communicate(QWidget *parent)
    : QWidget(parent)
{
  QPushButton *plus = new QPushButton("+", this);
  plus->setGeometry(50, 40, 75, 30);

  QPushButton *minus = new QPushButton("-", this);
  minus->setGeometry(50, 100, 75, 30);

  label = new QLabel("0", this);
  label->setGeometry(190, 80, 20, 30);

  connect(plus, SIGNAL(clicked()), this, SLOT(OnPlus()));
  connect(minus, SIGNAL(clicked()), this, SLOT(OnMinus()));
}

void Communicate::OnPlus()
{
  int val = label->text().toInt();
  val++;
  label->setText(QString::number(val));
}

void Communicate::OnMinus()
{
  int val = label->text().toInt();
  val--;
  label->setText(QString::number(val));
} 
```

**主文件**

```
#include "communicate.h"

int main(int argc, char *argv[])
{
  QApplication app(argc, argv);

  Communicate window;

  window.setWindowTitle("Communicate");
  window.show();

  return app.exec();
} 
```

及其显示错误如下：

```
obj\Debug\main.o(.text$_ZN11CommunicateD1Ev[Communicate::~Communicate()]+0xb)||In function `ZN7QStringC1EPKc':|
C:\Qt\4.4.3\include\QtCore\..\..\src\corelib\arch\qatomic_windows.h||undefined reference to `vtable for Communicate'|
obj\Debug\main.o(.text$_ZN11CommunicateD1Ev[Communicate::~Communicate()]+0x17):C:\Qt\4.4.3\include\QtCore\..\..\src\corelib\arch\qatomic_windows.h||undefined reference to `vtable for Communicate'|
obj\Debug\communicate.o(.text+0x172)||In function `ZN11CommunicateC2EP7QWidget':|
E:\Project\cam2\communicate.cpp|5|undefined reference to `vtable for Communicate'|
obj\Debug\communicate.o(.text+0x17e):E:\Project\cam2\communicate.cpp|5|undefined reference to `vtable for Communicate'|
obj\Debug\communicate.o(.text+0x63a)||In function `ZN11CommunicateC1EP7QWidget':|
E:\Project\cam2\communicate.cpp|5|undefined reference to `vtable for Communicate'|
obj\Debug\communicate.o(.text+0x646):E:\Project\cam2\communicate.cpp|5|more undefined references to `vtable for Communicate' follow|
||=== Build finished: 6 errors, 0 warnings ===| 
```

大佬们帮忙看看。。。。搞不懂。。。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-23T12:33:10.183

这是我以前见过的一个微妙的错误（可能至少部分是编译器错误）。由于 QWidget 有一个虚拟析构函数，编译器需要一个用于您的类的 vtable。但是你的类没有任何虚函数，所以它没有为你的 Communicate 类构建一个。

为您的班级添加一个`virtual ~Communicate() {};`，一切都会好起来的。

是的，我也花了一些时间才弄清楚这一点！

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-12-23T12:46:22.450

MOC（元对象编译器）需要知道您的communicate.h（以及任何其他Q_OBJECT'ed 类）才能完成其工作。除非您将它们放入 HEADERS 部分下的 .pro 文件中 - 您将获得此“未定义参考”

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-12-23T17:51:36.130

解决问题的一个快速选项是**删除 Q_OBJECT 宏**，这将允许您编译和测试您的应用程序， 但是，如果您打算每天在 CB 上使用 QT 工作，则必须配置您的环境***，这不是一个正确的选择。***

我个人更喜欢的一个选项是创建自定义 makefile 和文件。应用程序的“pro”可以在其他环境中轻松传输，例如“QtCreator”“NetBeansIDE”等。

我将快速解释要遵循的步骤。如果你已经安装了 QtCreator 值得支持由 QtCreator 自行生成文件，并且有一点经验可以构建你自己的文件。

*此示例仅允许您编译和运行“目标发布”下的文件，稍后您将不得不自定义您的工作环境*

*   创建文件：*Makefile*

```
####### Compiler, tools and options

PROJECT_NAME  = Communicate
QT_INCLUDE    = /usr/local/QtSDK/Desktop/Qt/4.8.1/gcc/include/
QT_MKSPECS    = /usr/local/QtSDK/Desktop/Qt/4.8.1/gcc/mkspecs/
QT_LIB        = /usr/local/QtSDK/Desktop/Qt/4.8.1/gcc/lib
QT_QMAKE      = /usr/local/QtSDK/Desktop/Qt/4.8.1/gcc/bin/
CC            = gcc
CXX           = g++
DEFINES       = -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED
CFLAGS        = -pipe -O2 -Wall -W -D_REENTRANT $(DEFINES)
CXXFLAGS      = -pipe -O2 -Wall -W -D_REENTRANT $(DEFINES)
INCPATH       = -I$(QT_MKSPECS)linux-g++ -I../$(PROJECT_NAME) -I$(QT_INCLUDE)QtCore -I$(QT_INCLUDE)QtGui -I/usr/local/QtSDK/Desktop/Qt/4.8.1/gcc/include -I. -I../$(PROJECT_NAME) -I.
LINK          = g++
LFLAGS        = -Wl,-O1 -Wl,-rpath,$(QT_LIB)
LIBS          = $(SUBLIBS)  -L$(QT_LIB) -lQtGui -L$(QT_LIB) -L/usr/X11R6/lib -lQtCore -lpthread 
AR            = ar cqs
RANLIB        = 
QMAKE         = $(QT_QMAKE)qmake
TAR           = tar -cf
COMPRESS      = gzip -9f
COPY          = cp -f
SED           = sed
COPY_FILE     = $(COPY)
COPY_DIR      = $(COPY) -r
STRIP         = strip
INSTALL_FILE  = install -m 644 -p
INSTALL_DIR   = $(COPY_DIR)
INSTALL_PROGRAM = install -m 755 -p
DEL_FILE      = rm -f
SYMLINK       = ln -f -s
DEL_DIR       = rmdir
MOVE          = mv -f
CHK_DIR_EXISTS= test -d
MKDIR         = mkdir -p

####### Output directory

OBJECTS_DIR   = ./Release

####### Files

SOURCES       = ../$(PROJECT_NAME)/main.cpp \
        ../$(PROJECT_NAME)/communicate.cpp moc_communicate.cpp
OBJECTS       = main.o \
        communicate.o \
        moc_communicate.o
DIST          = $(QT_MKSPECS)common/unix.conf \
        $(QT_MKSPECS)common/linux.conf \
        $(QT_MKSPECS)common/gcc-base.conf \
        $(QT_MKSPECS)common/gcc-base-unix.conf \
        $(QT_MKSPECS)common/g++-base.conf \
        $(QT_MKSPECS)common/g++-unix.conf \
        $(QT_MKSPECS)qconfig.pri \
        $(QT_MKSPECS)modules/qt_webkit_version.pri \
        $(QT_MKSPECS)features/qt_functions.prf \
        $(QT_MKSPECS)features/qt_config.prf \
        $(QT_MKSPECS)features/exclusive_builds.prf \
        $(QT_MKSPECS)features/default_pre.prf \
        $(QT_MKSPECS)features/release.prf \
        $(QT_MKSPECS)features/default_post.prf \
        $(QT_MKSPECS)features/unix/gdb_dwarf_index.prf \
        $(QT_MKSPECS)features/warn_on.prf \
        $(QT_MKSPECS)features/qt.prf \
        $(QT_MKSPECS)features/unix/thread.prf \
        $(QT_MKSPECS)features/moc.prf \
        $(QT_MKSPECS)features/resources.prf \
        $(QT_MKSPECS)features/uic.prf \
        $(QT_MKSPECS)features/yacc.prf \
        $(QT_MKSPECS)features/lex.prf \
        $(QT_MKSPECS)features/include_source_dir.prf \
        ../$(PROJECT_NAME)/$(PROJECT_NAME).pro
QMAKE_TARGET  = $(PROJECT_NAME) Release
DESTDIR       = $(OBJECTS_DIR)
TARGET        = $(PROJECT_NAME)

first: all
####### Implicit rules

.SUFFIXES: .o .c .cpp .cc .cxx .C

.cpp.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"

.cc.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"

.cxx.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"

.C.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"

.c.o:
    $(CC) -c $(CFLAGS) $(INCPATH) -o "$@" "$<"

####### Build rules

all: Makefile $(TARGET)

$(TARGET):  $(OBJECTS)  
    $(LINK) $(LFLAGS) -o $(TARGET) $(OBJECTS) $(OBJCOMP) $(LIBS)

Makefile: ../$(PROJECT_NAME)/$(PROJECT_NAME).pro  $(QT_MKSPECS)linux-g++/qmake.conf $(QT_MKSPECS)common/unix.conf \
        $(QT_MKSPECS)common/linux.conf \
        $(QT_MKSPECS)common/gcc-base.conf \
        $(QT_MKSPECS)common/gcc-base-unix.conf \
        $(QT_MKSPECS)common/g++-base.conf \
        $(QT_MKSPECS)common/g++-unix.conf \
        $(QT_MKSPECS)qconfig.pri \
        $(QT_MKSPECS)modules/qt_webkit_version.pri \
        $(QT_MKSPECS)features/qt_functions.prf \
        $(QT_MKSPECS)features/qt_config.prf \
        $(QT_MKSPECS)features/exclusive_builds.prf \
        $(QT_MKSPECS)features/default_pre.prf \
        $(QT_MKSPECS)features/release.prf \
        $(QT_MKSPECS)features/default_post.prf \
        $(QT_MKSPECS)features/unix/gdb_dwarf_index.prf \
        $(QT_MKSPECS)features/warn_on.prf \
        $(QT_MKSPECS)features/qt.prf \
        $(QT_MKSPECS)features/unix/thread.prf \
        $(QT_MKSPECS)features/moc.prf \
        $(QT_MKSPECS)features/resources.prf \
        $(QT_MKSPECS)features/uic.prf \
        $(QT_MKSPECS)features/yacc.prf \
        $(QT_MKSPECS)features/lex.prf \
        $(QT_MKSPECS)features/include_source_dir.prf \
        $(QT_LIB)/libQtGui.prl \
        $(QT_LIB)/libQtCore.prl
    $(QMAKE) -spec $(QT_MKSPECS)linux-g++ -o Makefile ../$(PROJECT_NAME)/$(PROJECT_NAME).pro
$(QT_MKSPECS)common/unix.conf:
$(QT_MKSPECS)common/linux.conf:
$(QT_MKSPECS)common/gcc-base.conf:
$(QT_MKSPECS)common/gcc-base-unix.conf:
$(QT_MKSPECS)common/g++-base.conf:
$(QT_MKSPECS)common/g++-unix.conf:
$(QT_MKSPECS)qconfig.pri:
$(QT_MKSPECS)modules/qt_webkit_version.pri:
$(QT_MKSPECS)features/qt_functions.prf:
$(QT_MKSPECS)features/qt_config.prf:
$(QT_MKSPECS)features/exclusive_builds.prf:
$(QT_MKSPECS)features/default_pre.prf:
$(QT_MKSPECS)features/release.prf:
$(QT_MKSPECS)features/default_post.prf:
$(QT_MKSPECS)features/unix/gdb_dwarf_index.prf:
$(QT_MKSPECS)features/warn_on.prf:
$(QT_MKSPECS)features/qt.prf:
$(QT_MKSPECS)features/unix/thread.prf:
$(QT_MKSPECS)features/moc.prf:
$(QT_MKSPECS)features/resources.prf:
$(QT_MKSPECS)features/uic.prf:
$(QT_MKSPECS)features/yacc.prf:
$(QT_MKSPECS)features/lex.prf:
$(QT_MKSPECS)features/include_source_dir.prf:
$(QT_LIB)/libQtGui.prl:
$(QT_LIB)/libQtCore.prl:
qmake:  FORCE
    @$(QMAKE) -spec $(QT_MKSPECS)linux-g++ -o Makefile ../$(PROJECT_NAME)/$(PROJECT_NAME).pro

dist: 
    @$(CHK_DIR_EXISTS) .tmp/$(PROJECT_NAME)1.0.0 || $(MKDIR) .tmp/$(PROJECT_NAME)1.0.0 
    $(COPY_FILE) --parents $(SOURCES) $(DIST) .tmp/$(PROJECT_NAME)1.0.0/ && $(COPY_FILE) --parents ../$(PROJECT_NAME)/communicate.h .tmp/$(PROJECT_NAME)1.0.0/ && $(COPY_FILE) --parents ../$(PROJECT_NAME)/main.cpp ../$(PROJECT_NAME)/communicate.cpp .tmp/$(PROJECT_NAME)1.0.0/ && (cd `dirname .tmp/$(PROJECT_NAME)1.0.0` && $(TAR) $(PROJECT_NAME)1.0.0.tar $(PROJECT_NAME)1.0.0 && $(COMPRESS) $(PROJECT_NAME)1.0.0.tar) && $(MOVE) `dirname .tmp/$(PROJECT_NAME)1.0.0`/$(PROJECT_NAME)1.0.0.tar.gz . && $(DEL_FILE) -r .tmp/$(PROJECT_NAME)1.0.0

clean:compiler_clean 
    -$(DEL_FILE) $(OBJECTS)
    -$(DEL_FILE) *~ core *.core

####### Sub-libraries

distclean: clean
    -$(DEL_FILE) $(TARGET) 

#-$(DEL_FILE) Makefile

check: first

mocclean: compiler_moc_header_clean compiler_moc_source_clean

mocables: compiler_moc_header_make_all compiler_moc_source_make_all

compiler_moc_header_make_all: moc_communicate.cpp
compiler_moc_header_clean:
    -$(DEL_FILE) moc_communicate.cpp
moc_communicate.cpp: ../$(PROJECT_NAME)/communicate.h
    $(QT_QMAKE)moc $(DEFINES) $(INCPATH) ../$(PROJECT_NAME)/communicate.h -o moc_communicate.cpp

compiler_rcc_make_all:
compiler_rcc_clean:
compiler_image_collection_make_all: qmake_image_collection.cpp
compiler_image_collection_clean:
    -$(DEL_FILE) qmake_image_collection.cpp
compiler_moc_source_make_all:
compiler_moc_source_clean:
compiler_uic_make_all:
compiler_uic_clean:
compiler_yacc_decl_make_all:
compiler_yacc_decl_clean:
compiler_yacc_impl_make_all:
compiler_yacc_impl_clean:
compiler_lex_make_all:
compiler_lex_clean:
compiler_clean: compiler_moc_header_clean 

####### Compile

main.o: ../$(PROJECT_NAME)/main.cpp ../$(PROJECT_NAME)/communicate.h
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o main.o ../$(PROJECT_NAME)/main.cpp

communicate.o: ../$(PROJECT_NAME)/communicate.cpp ../$(PROJECT_NAME)/communicate.h
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o communicate.o ../$(PROJECT_NAME)/communicate.cpp

moc_communicate.o: moc_communicate.cpp 
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o moc_communicate.o moc_communicate.cpp

####### Install

install:   FORCE

uninstall:   FORCE

FORCE: 
```

*   创建项目文件：*Communicate.pro*

```
QT       += core gui

TARGET = Communicate
TEMPLATE = app

SOURCES += main.cpp\
        communicate.cpp

HEADERS  += communicate.h 
```

*   设置自定义 Makefile ...项目->属性：

![设置 Makefile](../Images/61381efeab3fd57ef28bcbc4416c9145.png)

*   设置运行操作...项目-> 属性：

![设置运行动作](../Images/079c7b888521e48c3ec9df77fc53e81b.png)

*   跑

![跑](../Images/acad0ace180b5891d04438c90ff1882b.png)

*虽然 CB 是使用 wxWidgets 和一般 C/C++ 的最佳环境，但我个人认为，在使用 Qt 的情况下，QtCreator 提供了一个更加原生和优化的开发环境，可以与您的项目 QT 一起使用。*

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-23T12:37:10.050

您需要定义析构函数。即使它从 QObject 派生，编译器也不足以使用默认构造函数/析构函数。

[Qt 链接器错误：“未定义对 vtable 的引用”](https://stackoverflow.com/questions/2555816/qt-object-linker-problem-undefined-reverence-to-vtable)

# node.js - 调用 fs.mkdir 时无法分配 req.session.user

> ID：14010924
> 
> 赞同：0
> 
> 时间：2012-12-23T12:26:58.467
> 
> 标签：node.js, session, express

`fs.mkdir`这是我创建的函数调用的 app.post 的代码`newdir`：

```
app.post('/register', express.bodyParser(), function (req, res, next){

 var newu = new UserModel({});

 newu.user = req.body.nuser;
 newu.pass = req.body.npass;
 newu.mail = req.body.nmail;

 UserModel.find({ user: req.body.user }, function (err, user){

    if (user.lenght == 1) {

        res.redirect('/');

    }

    else {    

    newdir(req.body.nuser);   

    next()   

    if (err) throw err;

          newu.save(function (err, newu){

               req.session.user = newu.user;  
               res.redirect('/home')

           });

     }

  });

}); 
```

这是代码`newdir`：

```
function newdir (username){

    var pathu = __dirname + '/users/' + username;

    fs.mkdir(pathu, function (err){

       if (err) throw err;

    });
} 
```

这是代码`/home`：

```
app.get('/home', function (req, res){

  console.log(req.session.user);

  res.send('Welcome ' + req.session.user + '!');

}); 
```

我可以`req.session.user`在我想要的所有 app.post/get 中分配一个，例如，当我使用它验证用户时，我可以正确分配 req.session.user：

```
app.post('/verify', express.bodyParser(), function (req, res){

  UserModel.find({ user: req.body.user }, function (err, user){

    if (user[0] == undefined) {

         res.redirect('/');

    }

     else{

       if (user[0].pass == req.body.pass) {

         req.session.user = user[0].user;
         res.redirect('/home');

       }

       else{

         res.redirect('/');

       }

   }

  if (err) throw err;

  });

}); 
```

但是，当我尝试`req.session.user`在同一个 app.post 中分配名为 fs.mkdir 的位置时，总是`req.session.user`未定义。也许我应该创建一个调用 fs.mkdir 的模块？我不知道该怎么办！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T15:43:09.023

在其他模块中调用时问题已解决`fs.mkdir`，非常简单：D

# java - ArrayIndexOutOfBoundsException 错误信息

> ID：14010925
> 
> 赞同：0
> 
> 时间：2012-12-23T12:27:01.483
> 
> 标签：java, sql, swing

我尝试使用 jTable 选择一行并将行值存储到 topicId 中。然后，我使用刚刚获得的 topicId 从数据库中检索数据。这是我的代码。

```
 jTable.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent e) {
                if (jTable.getValueAt(jTable.getSelectedRow(), 0) != null) {
                    int topicId = (Integer)jTable.getValueAt(jTable.getSelectedRow(), 0);}
                eForumTopics topics = new eForumTopics(topicId);
                topics.retrieveThread();
                getJFrame().dispose();
                eForumThreadContent myWindow = new eForumThreadContent(topicId);
                myWindow.getJFrame().setVisible(true);
            }
        }); 
```

但是，我收到此错误消息。

```
 Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: -1
at java.util.Vector.elementAt(Unknown Source)
at javax.swing.table.DefaultTableModel.getValueAt(Unknown Source)
at javax.swing.JTable.getValueAt(Unknown Source)
at kioskeForum.ui.eForumDiscussion$3.mouseClicked(eForumDiscussion.java:295) 
```

第 295 行是那里的 if 语句。我没有看到我的代码有什么问题，因为我没有看到任何数组。有人可以修复它吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T12:29:38.077

看起来`jTable.getSelectedRow()`返回`-1`不是`jTable.getValueAt()`. 如果未选择 jtable 中的任何行，则可能发生这种情况。

从文档中：

> 返回第一个选定行的索引，如果没有选择行，则返回 -1。

您应该将您的状况更新为：

```
if (jTable.getSelectedRow() >= 0 && jTable.getValueAt(jTable.getSelectedRow(), 0) != null) { 
```

# maven - 带有 maven 的推土机

> ID：14010927
> 
> 赞同：0
> 
> 时间：2012-12-23T12:27:16.333
> 
> 标签：maven, dozer

我想从 github 下载最新版本的 Dozer mapper，但我没有找到任何 jar。

有 pom.xml 文件，我尝试用 command 编译`mvn package`。我还将每个依赖项添加到 pom.xml 文件中。它创建了`dozer-5.5.0-SNAPSHOT.jar`.

接下来我将这个 jar 导入到我的项目中，但它抛出了我`java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory`的 .

我还尝试在 netbeans 中创建 POM 项目并使用依赖项进行构建。导入我的项目后，它抛出了同样的异常。

我对maven没有任何经验。如何获得正确的 JAR 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:38:16.800

猜猜你`dozer-package`有依赖`slf4j`，对吧？

然后你应该检查这个 Maven-Plugin：[Maven-Assembly-Plugin](http://maven.apache.org/plugins/maven-assembly-plugin/)

这会将您所需的依赖项放入 jar 中。

[在这里你可以阅读，如何使用它](http://maven.apache.org/plugins/maven-assembly-plugin/usage.html)

```
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-assembly-plugin</artifactId>
    version>2.4</version>
    <configuration>
      <descriptorRefs>
        <descriptorRef>jar-with-dependencies</descriptorRef>
      </descriptorRefs>
      <archive>
        <manifest>
        <mainClass>your.main.class</mainClass>
        </manifest>
      </archive>
    </configuration>
    <executions>
      <execution>
       <phase>package</phase>
         <goals>
        <goal>single</goal>
         </goals>
      </execution>
    </executions>
  </plugin>
</plugins> 
```

如果您希望在调用时始终执行 assemby-plugin，请将`mvn clean package` 其添加到您的 maven-assembly-plugin：

```
 <executions>
      <execution>
        <id>make-assembly</id> <!-- this is used for inheritance merges -->
        <phase>package</phase> <!-- bind to the packaging phase -->
        <goals>
          <goal>single</goal>
        </goals>
      </execution>
 </executions> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:24:46.160

你有一个正确的罐子。使用 dozer 简单地将 commons-beanutils lang 和 slf4j 添加到您的项目中，或者将此库添加为 maven 依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-04T08:53:27.290

Jars required for **Dozer** dependency.

[![enter image description here](../Images/fc19554cf4df51048f64bc6040fffce8.png)](https://i.stack.imgur.com/OQCVN.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-04-04T08:48:53.407

Make the entry in pom.xml file.Make sure the required Jars are present.

```
 <dependency>
        <groupId>net.sf.dozer</groupId>
        <artifactId>dozer</artifactId>
        <version>5.3.1</version>
    </dependency>
      <properties>
<osgi.version>4.3.0</osgi.version> 
```

# c# - 如何初始化列表 ?

> ID：14010934
> 
> 赞同：-1
> 
> 时间：2012-12-23T12:28:41.297
> 
> 标签：c#, list, matrix

我试图这样做：

```
rotation[0] = new double[3][];
for (int i = 0; i < 3; i++)
{
    rotation[0][i] = new double[3];
} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T12:33:41.853

假设那`rotation`是你的`List<double[][]>`，你可以这样做：

```
var tmp = new double[3][];
for (int i = 0; i < 3; i++) {
    tmp[i] = new double[3];
}
rotation.Add(tmp); 
```

您也可以使用 LINQ 执行此操作：

```
rotation.Add(Enumerable.Range(0, 3).Select(i => new double[3]).ToArray()); 
```

上面的两个片段都将 s 的单个 3x3 数组添加`double`到 a `List<double[][]>`。

如果您需要三个项目的列表，您可以这样做：

```
List<double[][]> rotation = new List<double[][]>();
for (int r = 0 ; r != 3 ; r++) {
    var tmp = new double[3][];
    for (int i = 0; i < 3; i++) {
        tmp[i] = new double[3];
    }
    rotation.Add(tmp);
} 
```

或者

```
List<double[][]> rotation = new List<double[][]>();
for (int r = 0 ; r != 3 ; r++) {
    rotation.Add(Enumerable.Range(0, 3).Select(i => new double[3]).ToArray());
} 
```

甚至

```
var rotation = Enumerable
    .Range(0, 3)
    .Select(r => Enumerable.Range(0, 3).Select(i => new double[3]).ToArray()); 
```

# php - 每个循环的复选框

> ID：14010952
> 
> 赞同：0
> 
> 时间：2012-12-23T12:31:31.867
> 
> 标签：php

你能看看代码吗？我哪里错了？

我有不同的复选框，其值如下，我想要做的是从字符串中添加上一个帖子名称 $total + 单独整数的总数，我需要复选框中的值与我所做的一样，所以不要担心为什么我执行此操作。无论用户选中的复选框值都将添加到 $total 变量中。Foreach 循环没有做我想要的，我知道它迭代循环并添加它。任何替代解决方案？

```
 $total=$_POST['total-price']; //prevoius page post
    foreach($_POST["features"] as $checkedValue) {
       echo $checkedValue . "<br />";
       $int = filter_var($checkedValue, FILTER_SANITIZE_NUMBER_INT); //seperate integer from string
       $sum= $int + $total;
       echo "final total:\$" .$sum . "<br />";
    } 
```

HTML 复选框：

```
<input id="2" type="checkbox"  onClick="" name="features[]" value="Mobile Development $100"/>
<input id="2" type="checkbox"  onClick="" name="features[]" value="Mobile Development $100"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T12:35:16.833

改变

```
echo "final total:$" .$sum . "<br>"; 
```

至

```
echo 'final total:$'.$sum . "<br>"; 
```

或者

```
echo "final total:\$" .$sum . "<br>"; 
```

# css - 包括 CSS Zend

> ID：14010956
> 
> 赞同：0
> 
> 时间：2012-12-23T12:32:13.613
> 
> 标签：css, zend-framework, styles, head

我试图在名为“index.phtml”的 Zend 布局中包含一个名为“style.css”的文件。我的文件夹树是：

```
 laltroposto
      |-public
      |   |-index.phtml
      |   |-css
      |   |   !-style.css
      |   !-...
      |-application
      |   |-layouts
      |   |   !-scripts
      |   |       !-index.phtml
      |   !...
      !-library
          !-... 
```

这是我包含 css 的代码（它在 head 的标签中）：

```
<?php echo $this->headLink()->appendStylesheet('css/style.css'); ?> 
```

我也试过：

```
<?php echo $this->headLink()->appendStylesheet('/css/style.css'); ?> 
```

这是我的错误：

```
Failed to load resource: the server responded with a status of 404 (Not Found) http://www.laltroposto.com/js/jquery.js 
```

一些帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T12:34:46.320

```
<?php echo $this->headLink()->appendStylesheet('css/style.css'); ?> 
```

`/css/style.css = index.phtml/css/style.css`

你在 css 之前有一个额外的斜杠！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:55:27.727

我决定在 www.laltroposto.org 而不是 www.laltroposto.com 上托管我的网站...我不知道为什么！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T20:36:51.143

您的 css 文件并没有真正的问题，但是 js 文件：jquery.js

```
404 (Not Found) http://www.laltroposto.com/js/jquery.js 
```

如前所述，不要忘记在 js 加载文件的起始路径添加斜杠，否则它被视为路由并发出 404 错误页面。

希望对你有帮助。

# visual-c++ - 如果使用 Visual-C++ 或 gnu g++ 编译，此函数会给出不同的结果

> ID：14010957
> 
> 赞同：3
> 
> 时间：2012-12-23T12:32:14.277
> 
> 标签：visual-c++, g++

如果在装有 Visual Studio 的 PC（运行 Windows 7 的 cpu Intel i7）或我的 Android 手机 (P880) 上执行以下函数（从 .cpp 文件中提取），则会给出两种不同的结果（即输出缓冲区`int_image`不同）。两个输入缓冲区`im1`和`im2`，类型`int8`（ 的同义词`char`）完全相同（已检查），以及参数`w`和`h`。我不明白为什么会这样：

```
void  Compute(int8* im1,
              int8* im2,
              int w, 
              int h,
              int* int_image)
{
  int index = 0;
  int sum;

  for(int i = 0; i<h; i++)
  {
    // reset this column sum
    sum = 0;

    for(int j = 0; j<w; j++)
    {
      int pn;
      int8 v1, v2;
      v1 = im1[index];
      v2 = im2[index];
      pn = v1*v2;
      //pn = ((int)im1[index]) * ((int)im2[index]);
      sum += pn;
      if (i==0)
        int_image[index] = sum;
      else
        int_image[index] = int_image[index - w] + sum;

      index++;
    }
  }
} 
```

笔记。char 图像 im1 和 im2 的大小可能会发生整数溢出（但我认为这种情况由两个编译器平等处理，但在这一点上我不太确定）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:21:39.397

找到了错误的根源。我定义`int8`为`char`，相信默认情况下它是一个有符号字符。相反，它在 gcc 上未签名，而在 Visual C++ 上签名。我不知道标准是怎么说的，但我建议所有程序员在为`signed char`and`unsigned char`定义自己的宏时明确`int8`使用`uint8`。 [在 stackoverflow 上对此进行了有趣的讨论。](https://stackoverflow.com/questions/2054939/char-is-signed-or-unsigned-by-default)

# gwt - 当 Android 上的键盘弹出窗口时，GWT 视图会缩小

> ID：14010960
> 
> 赞同：2
> 
> 时间：2012-12-23T12:32:44.007
> 
> 标签：gwt, keyboard

我在 GWT 视图中使用 LayoutPanel，每次按下 TextBox 时，键盘都会出现并挤压视图。

在 android 上会发生这种情况，而在 ios 上不会。

我想保持高度与视图原始高度成比例...

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T13:34:07.490

你有两个选择：

A. 在此视图中调整大小事件时，检查用户代理是否为 Android。如果是，则强制大小不要更改。

B. 为 Android 设备创建一个不同的视图，然后使用 GWT 的延迟绑定来替换您的视图类（如果用户代理是 Android）：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred#replacement](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred#replacement)

这是另一个好帖子：

[http://code.google.com/p/google-web-toolkit/wiki/ConditionalProperties](http://code.google.com/p/google-web-toolkit/wiki/ConditionalProperties)

# javascript - 通过 jQuery 横向动画

> ID：14010961
> 
> 赞同：4
> 
> 时间：2012-12-23T12:32:51.407
> 
> 标签：javascript, jquery, html, css, jquery-animate

我有一些`<div>`元素和一个菜单，它应该`<div>`通过自定义动画在点击时“调用”这些不同的 s。

这些是菜单：

*   普通的
*   偏僻的
*   工具
*   登记
*   登录
*   捐
*   接触
*   使用条款

现在我需要根据我点击的菜单项来控制和显示不同的 div。

我在两种情况下需要帮助：

1.  创建动画（参见下面的 jsfiddle）
2.  无需大量代码重写即可有效处理 div 之间的转换。

**场合1：**

当我单击一个菜单（例如*远程*）时，我希望另一个可见菜单将自己移动到其完整*的右侧*并消失（我已经`overflow: hidden`在主 div 上使用过），然后从*左侧*正确的 div 来在（*远程页面*div）。

所以基本上，我想让 slideDown 和 slideUp 水平。

这就是我到目前为止所得到的：http: [//jsfiddle.net/Dugi/UtH4m/8/](http://jsfiddle.net/Dugi/UtH4m/8/)

这是一个很好的例子，可以展示我在本地为我的网站所拥有的东西。当单击菜单按钮时，我未能从左侧进入正确的 div **，我只是可以做到，这样我就可以****隐藏**正在路上的 div。

**最后一个问题：**那么我如何使用*.animate()*使正确的 div 在另一个可见的 div 转到右侧之后从左侧进入？

**场合2：**

从上面的 jsfiddle 中可以看出，我必须遍历每个现有的`<div>`并隐藏它们：

```
$('#remote').click(function()
{
      $('#normal-page').animate({marginLeft: '100%'}, 'fast'); // here
      $('#tools-page').animate({marginLeft: '100%'}, 'fast');  // here   
}); 
```

**最后一个问题：**有没有办法使这个过程自动化并隐藏所有可见的 div 并在单击菜单按钮时显示正确的 div？

这就是我想知道的。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T12:58:12.117

您可以使用`complete`animate 函数的参数来实现这一点。如果您不介意的话，我冒昧地更改了一些 HTML 和 CSS。 [http://jsfiddle.net/UtH4m/9/](http://jsfiddle.net/UtH4m/9/)

最终版本：http: [//jsfiddle.net/UtH4m/13/](http://jsfiddle.net/UtH4m/13/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T13:52:16.697

我希望这是你想要的。我稍微改变了你的标记。我`#container`为所有移动的页面添加了一个。这就是它的样子：[jsFiddle](http://jsfiddle.net/ldaniell14260/UtH4m/10/)

# c++ - 使用静态变量的 C++ 继承成员函数

> ID：14010972
> 
> 赞同：5
> 
> 时间：2012-12-23T12:34:16.503
> 
> 标签：c++, inheritance, static-members

我正在尝试将一些 Python 类转换为 c++，但遇到了一些麻烦。我有一个基类，它有一个类（静态）变量和一个返回它的方法。我还有一个派生类，它像这样覆盖类（静态）变量，

在 Python 中：

```
class Base:
   class_var = "Base"
   @classmethod
   def printClassVar(cls):
      print cls.class_var

class Derived(Base):
   class_var = "Derived"

d = Derived()
d.printClassVar() 
```

它打印出所需的派生类变量“Derived”。知道如何在 c++ 中获得相同的功能吗？我已经尝试过，但最终得到了 Base 类的类变量。

在 C++ 中

```
class Base
{
public:
    static void printStaticVar(){cout << s_var << endl;}
    static string s_var;
};
string Base::s_var = "Base";

class Derived : public Base
{
public:
    static string s_var;
};
string Derived::s_var = "Derived";

void main()
{
    Derived d;
    d.printStaticVar();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T12:38:40.407

编写一个返回对静态成员的引用的虚函数：

```
class Base
{
public:
    void printStaticVar() {cout << get_string() << endl;}
    static string s_var;
    virtual string const& get_string() { return Base::s_var; }
};
string Base::s_var = "Base";

class Derived : public Base
{
public:
    static string s_var;
    virtual string const& get_string() { return Derived::s_var; }
};
string Derived::s_var = "Derived";

void main()
{
    Derived d;
    d.printStaticVar();
} 
```

请注意，它`printStaticVar`不应该是静态的。

* * *

您还可以`static`在 getter 中将字符串设为本地：

```
class Base
{
public:
    void printStaticVar() {cout << get_string() << endl;}
    virtual string const& get_string() { 
        static string str = "Base";
        return str;
    }
};

class Derived : public Base
{
public:
    virtual string const& get_string() { 
        static string str = "Derived";
        return str;
    }
};

void main()
{
    Derived d;
    d.printStaticVar();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T15:43:47.377

另一种可能是：

```
class Base
{
  const std::string var;
public:
  Base(std::string s="Base") : var(s) {}
  void printVar() { std::cout << var << std::endl }
};
class Derived : public Base
{
public:
  Derived(std::string s="Derived") : Base(s) {}
}; 
```

# asp.net - 我的 SQL Server 数据库位于何处？

> ID：14010973
> 
> 赞同：1
> 
> 时间：2012-12-23T12:34:22.623
> 
> 标签：asp.net, sql-server, localdb

对于我的学校项目，我正在 ASP.NET 中创建一个非常简单的 Web CRUD 应用程序。我的应用程序有效，但我认为它不应该。

在`web.config`配置文件中，我有这个连接字符串：

```
<connectionStrings>
    <add name="Librabry" 
         connectionString="Server=myserver;Database=mydatabase;User Id=myuser;Password=mypassword;" 
         providerName="System.Data.SqlClient " />
  </connectionStrings> 
```

我创建了数据初始化器对象并将它们分配在`Global.asax.cs`. 这些初始化程序应该创建数据库表和数据。

```
void Application_Start(object sender, EventArgs e)
{
            // Code that runs on application startup
            BundleConfig.RegisterBundles(BundleTable.Bundles);
            AuthConfig.RegisterOpenAuth();
// My data initializers
            Database.SetInitializer(new UserDatabaseInitializer());
            Database.SetInitializer(new BookDatabaseInitializer());            
} 
```

在`site.master`文件中我有这个代码：

```
<section style="text-align: center; background-color: #fff">
    <asp:ListView ID="categoryList"  
                  ItemType="Library.Models.User" 
                  runat="server"
                  SelectMethod="GetUsers" >
        <ItemTemplate>
           <b style="font-size: large; font-style: normal">
           <a href="/User.aspx?id=<%#: Item.UserID %>">
           <%#: Item.UserLogin %> k;lk;lk;</a>
           </b>
        </ItemTemplate>
        <ItemSeparatorTemplate> - </ItemSeparatorTemplate>
     </asp:ListView>
</section> 
```

每次我运行我的应用程序 (Ctrl+F5) 时，都会列出用户。尽管我更改了连接字符串（例如更改数据库名称），但应用程序不应连接到数据库。似乎数据库已在 {somewhere} 创建，但我找不到它的位置。当我列出（在 SQL Server Management Studio 中）所有现有数据库时，我的数据库不存在。我已经在我的计算机上安装了两个数据存储引擎 - SQL Server Express 版和 MS Local DB。

我很困惑，不知道我的数据在哪里？

# postgresql - PostgreSQL：将查询结果保存到文件并获取保存的行数，windows/odbc

> ID：14010974
> 
> 赞同：1
> 
> 时间：2012-12-23T12:34:23.137
> 
> 标签：postgresql

我正在尝试将查询结果自动保存到文本文件中，而不使用 ODBC Windows 连接在 VB.NET 中循环读取器对象。但我找不到方法！

这就是我到目前为止所尝试的：

```
mCmd = New OdbcCommand( _
"SELECT my_id FROM " & myTable & " WHERE myflag='1' \o 'c:/a_result.txt'", mCon)
n = mCmd.ExecuteNonQuery 
```

但这根本行不通。请建议或代码示例如何获取它。

第二...
理想情况下，将结果保存到文本中，我会在变量“n”中获得许多已保存的行。至于现在我只得到 0 或 1 取决于查询是否成功。

编辑：
经过一番战斗，我找到了一种或多或少成功的方法。
到txt文件：

```
mCmd = New OdbcCommand( _
"COPY (SELECT my_id FROM " & myTable & " WHERE myFlag='1' " & _
"ORDER BY my_id) TO 'c:/a_result.txt' DELIMITER AS '|'", mCon) 
```

到 csv 文件：

```
mCmd = New OdbcCommand( _
"COPY (SELECT my_id FROM " & myTable & " WHERE myFlag='1' " & _
"ORDER BY my_id) TO 'c:/a_result.csv' WITH CSV", mCon) 
```

那行得通，但我无法转义引号和“\”，所以我在输出文件中得到了双符号。
如果有经验的人知道如何实现 csv 文件的转义和更改分隔符，我会很高兴在给定的示例中看到它。

查询后的变量“n”包含许多导出的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T12:48:37.027

该`\o`序列是一个[psql](http://www.postgresql.org/docs/9.2/static/app-psql.html)元命令。这意味着它是`psql`. 如果你想要这个功能，你必须在你的客户端中实现它。不过这很容易。

# javascript - Jquery 活动页面链接

> ID：14010975
> 
> 赞同：0
> 
> 时间：2012-12-23T12:34:28.550
> 
> 标签：javascript, jquery, css

需要有关此代码的帮助，我从网络上下来了

```
$(document).ready(function(){
jQuery(".linkbar li").each(function(){
var href = jQuery(this).find('a').attr('href');
if (href === window.location.pathname) {
$(this).addClass('current');
}
});
}); 
```

如果我做 document.write(href);

我得到“未定义”

如果我将 var 放在函数`href = jQuery(this).find('a').attr('href');`之前`.each()`，它会更改我到当前类的所有链接

下面是我的 HTML 和 CSS 我需要更改当前页面的 css 链接，我对 Jquery/JS 不太好。请向我解释问题是什么以及如何解决。

```
<div class ="linkbar">

<a href = "/HTS/about-us.php"><li> ABOUT US </li> </a>
<a href = "service.php"><li> SERVICES </li> </a>
<a href = "download.php"><li> DOWNLOAD </li> </a>
</div> 
```

CSS

```
.linkbar li{
text-decoration:none;
float:left;
list-style-type: none;
font-size:11px;
width:auto;
padding:9px 18px 9px 18px;
}

.current{
background-color:#fecd0f;
vertical-align:center;
color:#fff;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:45:07.083

您的 HTML 无效。`<li>`标签必须在`<ul>`标签内。将`<a>`标签放入`<li>`标签中以使其`find("a")`工作：

```
<ul class ="linkbar">
  <li><a href = "/HTS/about-us.php">ABOUT US </a></li> 
  <li><a href = "service.php">SERVICES </a></li> 
  <li><a href = "download.php">DOWNLOAD </a></li> 
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:42:23.363

好吧，伙计，您有 .find() 可以在元素内部找到，并且您将标记锚定为 li 标记的父级，因此请使用以下命令：

```
var href = $(this).parent('a').attr('href'); 
```

如果是这样，你有这个：

```
<li><a href = "/HTS/about-us.php"> ABOUT US  </a></li>
<li><a href = "service.php"> SERVICES </a></li>
<li><a href = "download.php"> DOWNLOAD  </a></li> 
```

仍然从不使用`find()`但使用这个：

```
var href = $(this).children('a').attr('href'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T12:49:48.533

首先您应该删除该类，然后添加该类，您可以参考 Jquery 文档以获取更多信息： [http ://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

```
$(this).removeClass(".linkbar li").addClass('current'); 
```

你绝对应该把 li 标签放在 ul 里面

# objective-c - shouldAutorotateToInterfaceOrientation 在 ios6 模拟器中不起作用

> ID：14010992
> 
> 赞同：0
> 
> 时间：2012-12-23T12:36:33.980
> 
> 标签：objective-c, ios, ios6, ios-simulator

> **可能重复：**
> [shouldAutorotateToInterfaceOrientation：从未调用](https://stackoverflow.com/questions/12105085/shouldautorotatetointerfaceorientation-never-called)

我的应用程序使用了一些方向，但问题是当我将 ios6 模拟器向左或向右旋转时

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
 return YES;
} 
```

甚至不叫！，而当我使用它调用的 ios 5.1 模拟器时，它工作正常吗？任何帮助将不胜感激，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T12:48:00.830

它在 中已弃用`iOS 6.0`。改写`supportedInterfaceOrientations`and`preferredInterfaceOrientationForPresentation`方法。