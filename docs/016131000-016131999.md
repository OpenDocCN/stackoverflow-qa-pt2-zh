# StackOverflow 问答 16131000-16131999

# java - 如何计算程序中的代码行数？

> ID：16131001
> 
> 赞同：-2
> 
> 时间：2013-04-21T12:16:21.283
> 
> 标签：java

我想计算程序中的代码行数，并且我已经为此编写了计算`;`. 它可以正常工作，但在某些情况下（例如没有`;`存在的情况下（例如`if`和`while`语句））就不行。在这种情况下，我将一些关键字存储在一个字符串数组中，我想使用`readLine()`. 如果它工作正常，那么我会将它增加 1，但它不起作用。我已经尝试了很多，但它根本不起作用，并且显示异常。因为`Demo.java`您可以使用自己的代码。

**类检测1.java**

```
import java.io.*;
public class Classdetect1
{
    public static void main(String[] args) throws IOException
    {
        int i=0,j=0,k=0,p;
        String str1[]={"if","else","else if","while","for","goto","do"};

        // Open the file
        FileInputStream fstream = new FileInputStream("Demo.java");

        BufferedReader br = new BufferedReader(new InputStreamReader(in));

        String strLine;

        if (in == null){
            System.out.println("File is blank");
            System.exit(0);
        }

        while (i != -1)
        {
            i = in.read();
            if(i==';' || i=='{')
            {
                j=j+1;
            }

            if(i=='\'')
            {
                while(in.read()!='\'')
                    continue;
            }

            if(i=='\"')
            {
                while(in.read()!='\"')
                    continue;
            }

            if(i=='(')
            {
                while(in.read()!=')')
                    continue;
            }

            while ((strLine = br.readLine()) != null)
            {
                for(p=0;p<7;p++)
                {
                    if(str[p].equals(strLine))
                    {
                        k=k+1;
                    }
                }
            }
            System.out.println("Line of =" + k);
        }
        System.out.println("Total Line of code=" + j);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:29:23.537

在 Java 中，所有语句都`;`以`{` `}`. 一些例子：

```
System.out.println("One statement");

while (str.equals("One block of statements + one statement"))
{
    System.out.println("One statement");
} 
```

此外，`;`根本不需要在同一行：

```
System.out.println(
    "One statement"
); 
```

所以你可以简单地计算所有`;`（语句结束）和所有`{`（语句结束，块开始），它会相当准确。

```
if (true)
{                               // One statement ending with '{'
    doSomething();              // One statement ending with ';'
    while (false)
    {                           // One statement ending with '{'
        doSomethingElse();      // One statement ending with ';'
    }
}
// 4 statements in total. 
```

当然，（一如既往）有一些例外：

```
if (true) doSomething();  // One statement, or two?

do { doSomething(); } while (true); // Three statements, or two? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:30:21.207

尝试这个：

```
BufferedReader br = new BufferedReader(new FileReader(new File("C:/lines.txt")));
String s = "";
String text = "";

//save all the file in a string
while ((s = br.readLine()) != null) {
    text += s + "\n";
}

//remove empty lines with a regex
String withoutEmptyLines = text.replaceAll("(?m)^[ \t]*\r?\n", "");

//lines of code = text with newline characters length - text without newline characters length
int linesOfCode = withoutEmptyLines.length() - withoutEmptyLines.replaceAll("\n", "").length();
System.out.println("Lines: "+linesOfCode); 
```

我的`C:/lines.txt`文件：

```
01\. a
02\. 
03\. b
04\. c
05\. c
06\. d
07\. as
08\. d
09\. asd
10\. asd
11\. a
12\. 
13\. 
14\. 
15\. asd
16\. 
17\. asd
18\. 
19\. 
20\. 
21\. asdasd
22\. 
23\. 
24\. 
```

使用此文件，输出为：

```
Lines: 13 
```

希望这可以帮助

# ruby-on-rails - 将哈希图作为对象的属性访问

> ID：16131002
> 
> 赞同：1
> 
> 时间：2013-04-21T12:16:21.750
> 
> 标签：ruby-on-rails, ruby

我有一个像这样创建的对象的实例：

```
Example.create(:attrib0 => {
  :attrib1 => value,
  :attrib2 => [
    {:attrib3 => value},
    {:attrib4 => value}
    ]
}) 
```

我怎样才能访问`:attrib4`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:21:08.690

您应该`serialize`在您的模型中使用，然后您将能够正确返回哈希：

```
class SomeModel < ActiveRecord::Base
  serialize :attrib0
end 
```

然后以下应该返回哈希

```
hash  = @model.attrib0
# => {:attrib1 => value, :attrib2 => [{:attrib3 => value}, {:attrib4 => value}]

# now to access attrib4 you need to get the attrib2 array,
# then grab attrib4 by its index:
hash[:attrib2][1]
# => {:attrib4 => value}

# or to get the value:
hash[:attrib2][1][:attrib4]
# => value 
```

然而，上面的内容可能会变得非常复杂和丑陋，这就是为什么我建议为这些属性创建另一个模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T12:30:08.887

我认为你应该使用[嵌套属性](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)。它是这样的：

```
class Example
  has_one :attrib0

  accepts_nested_attributes_for :attrib0
end

params = { :attrib0 => { :attrib1 => value1, 
  :attrib2 => [ {:attrib3 => value3}, {:attrib4 => value4} ] }
}

example = Example.create(params[:attrib0])
example.attrib0.attrib1 #=> value1
example.attrib0.attrib2 #=> [ {:attrib3 => value3}, {:attrib4 => value4} ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T12:44:26.853

*仅使用 Ruby 技术：*

```
h = {:attrib0 => {
  :attrib1 => :value1,
  :attrib2 => [
    {:attrib3 => :value2},
    {:attrib4 => :value3}
    ]
}}

p h[:attrib0][:attrib2].last[:attrib4] #=> :value3 
```

# php - 另一个字符串中文本末尾的字符串

> ID：16131003
> 
> 赞同：0
> 
> 时间：2013-04-21T12:16:26.597
> 
> 标签：php, string, formatting

我想在另一个字符串中使用一个字符串，如下所示：

> $url = " [http://www.sample.com/index.php?nr=](http://www.sample.com/index.php?nr=) $string[0]";

我应该如何在最后插入这个字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:40:55.847

作为您的问题的解决方案，请尝试执行以下代码片段。

您需要使用点运算符（。）在 php 中连接字符串

```
 $url = "http://www.sample.com/index.php?nr=".$string[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:18:52.860

```
$url = "http://www.sample.com/index.php?nr={$string[0]}"; 
```

或者

```
$url = "http://www.sample.com/index.php?nr=" . $string[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T12:26:03.540

就像你的例子

```
$url = "http://www.sample.com/index.php?nr=$string[0]"; 
```

# matlab - 使用 x 大小 11 和 y 大小 6 的 matlab 冲浪函数

> ID：16131012
> 
> 赞同：1
> 
> 时间：2013-04-21T12:17:40.450
> 
> 标签：matlab, plot

我正在尝试使用 matlab 使用复合梯形规则计算函数的近似值，然后使用 surf 函数和 bar3 函数显示函数和近似值。问题是，当我尝试绘制函数 surf(x,y,Z) 时，我收到并错误提示尺寸不匹配。

**我的问题是，当我的 x、y 和 z 数组的大小不同时，如何让 surf 函数绘制 3D 图。**

我试图创建相同大小的 x 和 y 数组的零函数，然后将我的值添加到每个函数中，然后 NaN'ing 额外的 0，但是正如你看到的，我的每个数组都以 0 开头，因此 NaN'ing我在数组中找到零的地方会影响我的图表。而且我仍然得到相同的错误“尺寸不匹配”所以我认为那是因为我的 Z 数组大于我的 x 和 y。

**任何帮助，将不胜感激。**

我的 x 和 y 的代码是：`

```
 x = linspace(a,b,h); %h being 11 and breaks up the difference because datapoints a   and b into h number of sub intervals

 y = linspace(c,d,k); %k being 6 and breaks up the difference because data points c and d into k number of sub intervals

Z = zeros(h,k);
for i = 1:1:h      
    for j = 1:1:k
    Z(i,j) = f(x(i),y(j));
    end
end 
```

冲浪（X，Y，Z）；`

X

```
 0    0.3000    0.6000    0.9000    1.2000    1.5000    1.8000    2.1000    2.4000    2.7000    3.0000 
```

是的

```
 0    0.6286    1.2571    1.8857    2.5143    3.1429 
```

Z

```
 0         0         0         0         0         0
     0    0.1764    0.2854    0.2852    0.1761   -0.0004
     0    0.3528    0.5707    0.5705    0.3522   -0.0008
     0    0.5292    0.8561    0.8557    0.5283   -0.0011
     0    0.7056    1.1415    1.1410    0.7044   -0.0015
     0    0.8820    1.4268    1.4262    0.8804   -0.0019
     0    1.0584    1.7122    1.7115    1.0565   -0.0023
     0    1.2348    1.9975    1.9967    1.2326   -0.0027
     0    1.4112    2.2829    2.2820    1.4087   -0.0030
     0    1.5876    2.5683    2.5672    1.5848   -0.0034
     0    1.7640    2.8536    2.8525    1.7609   -0.0038 
```

使用 surf 时出错（第 75 行） 数据维度必须一致。

CompositeTrapazoidal>btnSolve_Callback 错误（第 167 行） surf(x,y,Z);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:23:50.140

试试`surf(x,y,Z');`（因为`x`' 的长度应该与`Z`' 的列数相匹配）

# qt - 如何在 Qt/PyQt/PySide QLabel 中右对齐富文本 (HTML)？

> ID：16131017
> 
> 赞同：4
> 
> 时间：2013-04-21T12:18:13.957
> 
> 标签：qt, pyqt, alignment, richtext, qlabel

我有一个简单的任务。

我想在 Qt 或 PyQt 或 PySide QLabel 中右对齐富文本 (HTML)。QLabel 工作正常，直到我调整小部件的大小使其小于文本长度。此时，右侧的文本被截断。QLabel 适用于纯文本。实际上，这只是[这里](https://stackoverflow.com/questions/16036126/how-to-get-a-right-aligned-left-elided-richtext-cell-item-in-pyqt)问题的简化版本。

在下面的 PyQt 示例中，我列出了数字一到十。即使调整小部件的大小，我也希望始终看到数字“十”。它适用于纯文本，但适用于富文本 (HTML)。这是Qt中的错误吗？我添加了几个屏幕截图来显示效果。

![缩小小部件之前](https://i.stack.imgur.com/S5vGv.jpg)

![缩小小部件后](https://i.stack.imgur.com/62lvM.jpg)

```
from PyQt4 import QtGui, QtCore

import sys

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    mw = QtGui.QWidget()

    labelPT = QtGui.QLabel()
    labelPT.setText('one two three four five six seven eight nine ten')
    labelPT.setAlignment(QtCore.Qt.AlignRight)

    labelRT = QtGui.QLabel()
    labelRT.setText('one two three four <b>five</b> six seven eight nine ten')
    labelRT.setAlignment(QtCore.Qt.AlignRight)

    vbox = QtGui.QVBoxLayout()
    vbox.addWidget(labelPT)
    vbox.addWidget(labelRT)

    mw.setLayout(vbox)
    mw.setMinimumWidth(30)
    mw.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:53:50.413

嗯......它适用于 PySide（Windows 上的 1.1.2 版）。

但是，您可以使用应该与富文本一起使用的样式表：

```
labelRT.setStyleSheet("qproperty-alignment: AlignRight;") 
```

# jquery - 从 html 页面 onclick 在 Jquery 选项卡中填充数据

> ID：16131018
> 
> 赞同：0
> 
> 时间：2013-04-21T12:18:33.057
> 
> 标签：jquery, html

我有很多 html 页面（x.html，y.html）。我正在使用 jquery ui 选项卡。

单击相关按钮时，如何在特定选项卡中的每个 html 页面中填充数据。

例如：

*   单击按钮“x”将在 x 选项卡中的 x.html 中填充数据。
*   单击按钮“y”将在 y 选项卡中填充 x.html 中的数据。

这是我正在使用的代码：

```
 <div id="tabs">
  <ul>
    <li><a href="#tabs-1">X</a></li>
    <li><a href="#tabs-2">Y</a></li>
  </ul>
  <div id="tabs-1">
    <p></p>
  </div>
  <div id="tabs-2">
    <p></p>
  </div>
    <p></p>
</div>
<script>
    $("#btn1").click(function () {
      $("#tabs-1").html(x.html);
      $("#tabs-2").html(y.html);
    });
    $("#btn2").click(function () {
      $("#tabs-1").html(z.html);
      $("#tabs-2").html(m.html);
    });
</script> 
```

# linux - 为什么我无法在 Linux 中编译 sctp 程序？

> ID：16131019
> 
> 赞同：4
> 
> 时间：2013-04-21T12:18:47.260
> 
> 标签：linux, undefined-reference, sctp

首先我在 Ubuntu 12.04 上安装 sctp
*sudo apt-get install libsctp-dev lksctp-tools*
然后在我的 .c 文件中，我包括：

```
#include < netinet/in.h >
#include < netinet/sctp.h >
#include < sys/socket.h >
#include < stdlib.h >
#include < unistd.h > 
```

但是，当我用 gcc 编译时，结果是：

```
 undefined reference to `sctp_recvmsg'
 undefined reference to `sctp_get_no_strms'
 undefined reference to `sctp_sendmsg' 
```

怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T23:03:53.483

如果你真的编译，`gcc temp.c -o temp`那么你没有链接任何库（除了默认`libc.6.so`），你需要一些额外的参数`gcc`; 也许尝试编译

```
 gcc -Wall -g temp.c -lsctp -o temp 
```

一旦您的程序在调试器的帮助下被`gdb`调试并且您认为它没有错误，您可以要求编译器使用

```
 gcc -Wall -O2 temp.c -lsctp -o temp 
```

程序参数的顺序`gcc`是重要且重要的。

# json - JSON Highstock 的多个系列

> ID：16131023
> 
> 赞同：0
> 
> 时间：2013-04-21T12:19:02.607
> 
> 标签：json, highcharts, highstock

我的 HighStock 有问题，我需要 JSON 的另一个系列。

我在**get_json.php中的代码**

```
include('config.php');

$cp = $_REQUEST["c_prot"];

$r=("SELECT * FROM data WHERE cp='$cp'"); 
$result=mysql_query($r);

while($row = mysql_fetch_array($result)){
    $date= strtotime($row['cas'])*1000;  // timestamp
    $values=hexdec($row['data']);        // series1 
    $val=hexdec($row['src']);            // series2

    $array[]=array($date, $values,$val);  //output array
}
echo json_encode($array); 
```

JSON 输出格式正确：[1364852734000, 557, 2884],.... 但问题是，我没有找到如何将第二个系列从 JSON 添加到 Highstock 代码

我想在图表 x 轴中显示：时间戳 y 轴：series1->data series2->src

图表现在仅在 x 轴时间戳和 y 轴数据上显示...但 series2 不起作用：/

高股票代码：

```
<script>
$(function () {
    $.getJSON('http://localhost/vojto/get_json.php?c_prot=<?=$_REQUEST['
    c_prot '];?>', function (data) {

        // Create the chart
        $('#container').highcharts('StockChart', {

            chart: { //zooming
                zoomType: 'x',
                height: 400,
            },

            legend: { //legenda
                enabled: true,
                align: 'left',
                backgroundColor: '#FCFFC5',
                borderColor: 'black',
                borderWidth: 1,
                layout: 'vertical',
                verticalAlign: 'top',
                y: 100,
                shadow: true
            },

            rangeSelector: { //range selector
                buttonTheme: {
                    width: 40,

                },

                buttonSpacing: 3, //mezera mezi buttony
                enabled: true,

                buttons: [{
                    type: 'minute',
                    count: 60,
                    text: 'Hour'
                }, {
                    type: 'day',
                    count: 1,
                    text: 'Day'
                }, {
                    type: 'week',
                    count: 1,
                    text: 'Week'
                }, {
                    type: 'all',
                    text: 'Reset'
                }]
            },

            title: { //title grafu
                text: 'Chart'
            },

            series: [{ //serie
                name: 'Data',
                data: data,
                color: '#57c72f',
                marker: {
                    enabled: true,
                    radius: 3
                },
                shadow: true,
                tooltip: {
                    valueDecimals: 2
                }
            }],

            xAxis: { // X-osa
                type: 'datetime',
                title: {
                    text: 'Date/time axis',
                },
                minRange: 600000,

            },
            yAxis: {
                min: 0,
            },
            navigator: {
                series: {
                    color: '#57c72f',
                    fillOpacity: 0.3,
                }
            },
            credits: {
                enabled: false
            },

            tooltip: { // formátování hodnot po najetí kurzoru... hover
                formatter: function () {
                    var s = '<b>' + Highcharts.dateFormat('DateTime ' + '%d-%m-%y ' + '%H:%M:%S', this.x) + '</b>';

                    $.each(this.points, function (i, point) {
                        s += '<br/>Data value : ' + point.y;
                    });

                    /* formát  23-04-13 09:34:27 */
                    return s;
                }
            },
        });
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:43:11.540

在你的脚本中：

```
$array = [];
while($row = mysql_fetch_array($result)){
    $date= strtotime($row['cas'])*1000;  // timestamp
    $values=hexdec($row['data']);        // series1 
    $val=hexdec($row['src']);            // series2

    $array[0][]=array($date, $values);  //output array
    $array[1][]=array($date ,$val); 
} 
```

您需要将值粘贴到适当的系列索引。换句话说，您可以准备 $array() 并将点添加到系列之一。老实说，我没有数据，所以这只是概念。

# sql - Oracle SQL 无法将字符串日期转换为日期日期

> ID：16131030
> 
> 赞同：0
> 
> 时间：2013-04-21T12:20:00.390
> 
> 标签：sql, oracle, date, format

我需要转换以下日期，但出现错误：

> ORA-01841: （完整）年份必须介于 -4713 和 +9999 之间，而不是 0

和 SQL：

```
SELECT TO_CHAR(TO_DATE('December 25th, 2004', 'MONTH DD, YYYY'), 'DD-MM-YY') FROM dual; 
```

我认为由于字符串日期格式而出现错误：**25th**

如果我从字符串中删除 'th' 它正在工作，但我需要用它进行转换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:46:53.990

要处理所有此类结尾，请使用 4 次替换：

```
with q as (
        select 'December 25th, 2004' dt from dual
        union
        select 'August 1st, 2004'  dt from dual
        union
        select 'December 2nd, 2004' dt from dual
        union
        select 'December 3rd, 2004' dt from dual
       )
select to_char( to_date(replace(replace(replace(replace(dt, 
                                   'th,', ''), 
                                   'st,', ''), 
                                   'nd,',''),
                                   'rd,',''),
                                    'MONTH DD YYYY'), 'DD-MM-YY') from q 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T12:31:46.327

如果将其括在双引号中，则可以在格式掩码中添加任意文字。

```
SQL> ed
Wrote file afiedt.buf

  1  SELECT TO_CHAR(TO_DATE('December 25th, 2004', 'MONTH DD"th", YYYY'),
  2                 'DD-MM-YY')
  3*   FROM dual
SQL> /

TO_CHAR(
--------
25-12-04 
```

当然，这只适用于字符串始终包含文字 string 的情况`th`。如果您有其他带有其他后缀（即`December 1st, 2004`）的字符串，您将收到错误消息

```
SQL> ed
Wrote file afiedt.buf

  1  SELECT TO_CHAR(TO_DATE('December 1st, 2004', 'MONTH DD"th", YYYY'),
  2                 'DD-MM-YY')
  3*   FROM dual
SQL> /
SELECT TO_CHAR(TO_DATE('December 1st, 2004', 'MONTH DD"th", YYYY'),
                       *
ERROR at line 1:
ORA-01861: literal does not match format string 
```

如果您想同时处理这两种情况，您可能需要先解析原始字符串以删除后缀，然后再将字符串转换为日期，然后再转换回不同的字符串

```
SQL> ed
Wrote file afiedt.buf

  1  WITH x AS (
  2    SELECT 'December 1st, 2004' str FROM dual UNION ALL
  3    SELECT 'December 25th, 2004' FROM dual
  4  )
  5  SELECT TO_CHAR(
  6           TO_DATE( SUBSTR( str, 1, INSTR( str, ',' ) - 3 ) ||
  7                      SUBSTR( str, INSTR( str, ',' ) ),
  8                    'MONTH DD, YYYY' ),
  9           'DD-MM-YY' )
 10*   FROM x
SQL> /

TO_CHAR(
--------
01-12-04
25-12-04 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T12:31:57.020

它可以在没有 , 的情况下工作`th`，`st`依此类推，即：

```
SELECT TO_CHAR(TO_DATE(
       REGEXP_REPLACE('December 25th, 2004',  
                      '([[:digit:]]{1,2})(st|nd|rd|th)', '\1'), 
                      'MONTH DD, YYYY'), 'DD-MM-YY')
  FROM dual; 
```

因此，此表达式删除与`st`、或连接的任何一位或两位数字组合`nd`，并从中计算日期。`rd``th`

希望这会有所帮助......干杯！

# c# - 在 LINQ 中使用方法来投影嵌套的 DTO

> ID：16131033
> 
> 赞同：2
> 
> 时间：2013-04-21T12:20:28.133
> 
> 标签：c#, nhibernate, linq-to-nhibernate

假设我们有以下实体：

```
public class Customer
{
    public virtual int Id { get; set; }

    public virtual string FirstName { get; set; }

    public virtual string LastName { get; set; }
} 
```

此外还有以下扩展方法：

```
public static string GetCard(this Customer @this)
   {
         throw new InvalidOperationException("Use only in IQueryable");
   } 
```

现在，我想执行这个查询：

```
var q = from c in this.Session.Query<Customer>()
        select new { Id = c.Id, InfoCard = c.GetCard() }; 
```

我虽然创建和注册以下 hql 生成器就足够了：

```
class GetCardGenerator : BaseHqlGeneratorForMethod
{
    public GetCardGenerator()
    {
        SupportedMethods = new[]
        {
            ReflectionHelper.GetMethodDefinition(() => CustomerExtensions.GetCard(null))
        };
    }

    public override HqlTreeNode BuildHql(MethodInfo method, Expression targetObject, ReadOnlyCollection<Expression> arguments, HqlTreeBuilder treeBuilder, IHqlExpressionVisitor visitor)
    {
        Expression<Func<Customer, Card>> definition = c => new Card
            {
                FirstName = c.FirstName,
                LastName = c.LastName,
                FullName = c.FirstName + " " + c.LastName
            };

        return visitor.Visit(definition);
    }
} 
```

不幸的是，异常 NotSupportedException 与消息 MemberInit 一起引发。在投资过程中，我在 Linq\Visitors\SelectClauseHqlNominator.cs 中发现 HQL 不支持 New 和 MemberInit 表达式的评论。

我的问题是：是否可以创建将在 LINQ 查询的 select 子句中使用并用于创建和填充 DTO 对象的方法？

**更新：**我不想从 IQueryable<Customer> 制作 IQueryable<Card> 但我正在寻找允许我在任何地方从客户中提取卡的解决方案，例如，我有参考客户的订单实体，我'想调用如下查询：

```
from o in this.Session.Query<Order>
select new  { Amount = o.OrderAmount, Customer = o.Customer.GetCard() }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T13:19:51.883

目前你所要求的东西不容易实现，因为处理投影 NHibernate 使用 ClientSideResultOperator 附加到 HQL （见方法）[`QueryModelVisitor`](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Linq/Visitors/QueryModelVisitor.cs#L218)`.VisitSelectClause`

例如对于以下查询

```
var q = from c in this.Session.Query<Customer>()
        select new Card
        {
            FirstName = c.FirstName,
            LastName = c.LastName,
            FullName = c.FirstName + " " + c.LastName
        }; 
```

NHibernate 将投影转换为基于数组的投影

```
var q = from c in this.Session.Query<Customer>()
        select new object[]
        {
            c.FirstName,
            c.LastName,
            c.FirstName + " " + c.LastName
        }; 
```

并添加以下转换结果

```
Expression<Func<object[], Card>> projectionExpression = array => new Card
{
    FirstName = (string)array[0],
    LastName = (string)array[1],
    FullName = (string)array[2]
}; 
```

但它**可能**仅适用于以下更简单的情况：

```
var q = from c in this.Session.Query<Customer>()
        select c.GetCart(); 
```

**替代解决方案**

我可以建议对内联`GetCart`方法进行预处理查询表达式。您可以手动完成，也可以使用[DelegateDecompiler](https://github.com/hazzik/DelegateDecompiler)。*DelegateDecompiler*具有扩展方法`.Decompile(this IQueryable<T> self)`，该方法查找表达式树以查找标有`[Decomile]`或`[Computed]`属性的方法和属性，并内联这些方法和属性。

所以你可以做以下

```
var q = (from c in this.Session.Query<Customer>()
         select new { Id = c.Id, InfoCard = c.GetCard() }).Decompile();

[Decompile]
public static string GetCard(this Customer @this)
{
    return new Card
        {
            FirstName = @this.FirstName,
            LastName = @this.LastName,
            FullName = @this.FirstName + " " + @this.LastName
        };
} 
```

查询将转换为

```
var q = from c in this.Session.Query<Customer>()
        select new 
        { 
            Id = c.Id, 
            InfoCard = new Card
            {
                FirstName = c.FirstName,
                LastName = c.LastName,
                FullName = c.FirstName + " " + c.LastName
            }) 
        }; 
```

# .net - 可移植类库中的配置值

> ID：16131037
> 
> 赞同：3
> 
> 时间：2013-04-21T12:20:48.617
> 
> 标签：.net, portable-class-library

我正在开发 Windows Store 和 WP8 应用程序将使用的 PCL。这个库需要一些配置，例如远程服务 url。我想将它们放入 app.config 并使用 ConfigurationManager 检索它们，但 System.Configuration 在 PCL 中似乎不可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:44:27.427

我会创建一个配置类。在最简单的情况¹中，它可能看起来像：

```
public class MyLibraryConfig
{
    public string RemoteServiceUrl{get;set;}
} 
```

然后通过标准依赖注入技术将此类的实例传递给库。例如，将其传递给构造函数并将其存储在字段中。然后应用程序负责从文件中读取配置`ConfigurationManager`，等等。

IMO 这是更好的设计，即使在可以访问`ConfigurationManager`. 否则，您会强制应用程序使用单个配置并使用特定的配置机制。

* * *

¹您还可以使用接口或不可变类。这稍微复杂一些，但 IMO 更好的设计。

# c# - 交互式动态 wpf 网格

> ID：16131038
> 
> 赞同：2
> 
> 时间：2013-04-21T12:20:52.213
> 
> 标签：c#, wpf, xaml, wpf-controls

我有一个想要放在网格上的集合。集合项目的属性是指项目应该放置在网格上的哪个位置，以及项目应该跨越多少列和多少行。所以这个项目看起来像这样：

```
public class Item
{
    public int FromRow { get; set; }
    public int SpanRow { get; set; }
    public int FromColumn { get; set; }
    public int SpanColumn { get; set; }
} 
```

我希望网格为集合动态生成正确数量的列和行，并显示其中每个项目的集合槽数据模板。我相信我已经解决了这部分问题，如下所示：

```
<ItemsControl ItemTemplate="{StaticResource ItemTemplate}"
              ItemsSource="{Binding ItemCollection">
  <ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
      <Grid x:Name="Grid"
            ShowGridLines="True"
            dataHelper:DynamicGrid.RowCount="7"
            dataHelper:DynamicGrid.ColumnCount="{Binding ColumnCount}"
            dataHelper:DynamicGrid.ColumnWidth="{Binding ColumnWidth}">
      </Grid>
    </ItemsPanelTemplate>
  </ItemsControl.ItemsPanel>
  <ItemsControl.ItemContainerStyle>
    <Style>
      <Style.Setters>
        <Setter Property="Grid.Row"
                Value="{Binding FromRow}" />
        <Setter Property="Grid.Column"
                Value="{Binding FromColumn}" />
        <Setter Property="Grid.RowSpan"
                Value="{Binding SpanRow}" />
        <Setter Property="Grid.ColumnSpan"
                Value="{Binding SpanColumn}" />
      </Style.Setters>
    </Style>
  </ItemsControl.ItemContainerStyle>
</ItemsControl> 
```

如您所见，我正在为动态网格部分使用附加属性。但是有两个问题我想不通。

第一个问题：我想在填充网格的项目上启用拖放功能，以便我可以操纵网格上的项目位置。现在我需要放置应该准确的鼠标位置。我四处搜寻，发现了这个：

```
private void OnMouseMove(object sender, MouseEventArgs e)
{
    var element = (UIElement)e.Source;

    int c = Grid.GetColumn(element);
    int r = Grid.GetRow(element);
} 
```

这意味着网格必须在每个单元格中都有 UIElements，但是 ItemsControl 不允许我向网格添加任何可以理解的内容。

第二个问题：我希望行和列具有迭代标题。我的意思是，第一列的第一个单元格中有“1”，第二列的第一个单元格中有“2”，依此类推。行也是如此。

我希望我已经解释了我的问题，以便你们理解它们。任何输入将不胜感激。如果您知道执行我所解释的更好的方法，除了 ItemsControl 中的普通网格之外的其他工具，请分享！:D

提前致谢！

# css - LESS 在 ASP.NET Web 工具 2012.2 中不起作用

> ID：16131044
> 
> 赞同：2
> 
> 时间：2013-04-21T12:21:25.897
> 
> 标签：css, visual-studio, less

我最近使用 ASP.NET Web Tools 2012.2 更新升级了 Visual Studio 2012，它使 LESS 文件成为 VS 中的一等公民。但是，自从升级后，对我的 .less 文件的更改不会转换为 .css 和 .css.min。此外，当我编辑我的 .less 文件时，我不再获得 CSS 预览窗格。

我已卸载/重新安装并尝试修复安装。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T09:17:22.527

根据这个问题（[VS2012.2 LESS Support](https://stackoverflow.com/questions/16474285/vs2012-2-less-support)）Visual Studio 2012 为 LESS 提供一流的支持，但您仍然需要安装[Web Essentials](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)才能集成编译器。

# java - 基于树层次结构生成唯一键

> ID：16131045
> 
> 赞同：0
> 
> 时间：2013-04-21T12:21:33.393
> 
> 标签：java

[我有一个与 stackoverflow 文章（从平面列表创建 java 层次结构树集](https://stackoverflow.com/q/9472087)）中解决的问题类似的问题

我目前正在尝试做的是将树打印到文件中，其中包含以下内容：

*   父母需要先被打印出来，所以如果他们被导入（在某个地方），他们会首先被创建，然后可以在他们下创建孩子。
*   我需要根据层次结构生成唯一键，例如：

    根>父>子> GrandChild1

    根>父>子> GrandChild2

`>`是节点的分隔符，但并不介意这是什么......

有人能建议我生成唯一密钥的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:30:27.697

我不确定你所说的钥匙是什么意思，等等......但这听起来微不足道。

要使用根首先使用前缀打印来打印树

这是您打印前缀的方式（这棵树有数字，但没关系，您明白了）。下面的方法使用递归。

```
private void printPrefix(Node<?> node){

        //If node is null, reached end of chain, return to caller
        if (node==null) {
            return;
        }

        //Print self
        System.out.print(node.getValue());
        System.out.print(" ");

        //Print all children
         for (Source child : node.children) //changed for multiple
{
    printPrefix(child);
}

        return;
    } 
```

在更好的数据结构建议中，您应该考虑使用 b-tree。 [https://www.google.com/search?q=b+tree&ie=UTF-8&oe=UTF-8&hl=en&client=safari#itp=open0](https://www.google.com/search?q=b+tree&ie=UTF-8&oe=UTF-8&hl=en&client=safari#itp=open0)

# wcf - WCF 服务窗口身份验证

> ID：16131049
> 
> 赞同：0
> 
> 时间：2013-04-21T12:21:56.787
> 
> 标签：wcf, sharepoint-2010, wcf-security

托管在我们内部服务器中的 WCF 服务。外部客户端将使用它，我们的服务将使用我们的 SharePoint 服务以编辑项目列表。WCF 服务将自动获得 Windows 身份验证以访问 SharePoint 站点，因此我不必提供登录名和密码而不是域名。

我不确定我应该如何编码我的服务：

```
NetworkCredential credential = CredentialCache.DefaultNetworkCredentials; 
```

会足够吗？

[建筑学](http://i.imgur.com/f50KYNM.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:58:37.627

但是，如果您确实需要使用特定帐户，则可以使用以下方法：

```
NetworkCredential credentials = new System.Net.NetworkCredential("name", "password", "optional:domain"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:17:07.660

IMO, it should be enough, if your wcf and SharePoint services in same (or trusted) domains, and you select appropriative security mode.

See for more details: [http://msdn.microsoft.com/en-us/library/ms733836.aspx](http://msdn.microsoft.com/en-us/library/ms733836.aspx)

# java - 通过仅存储根对象在 db4o 中存储树

> ID：16131055
> 
> 赞同：1
> 
> 时间：2013-04-21T12:23:06.243
> 
> 标签：java, database, tree, db4o

在我的 java 代码中，我创建了一个树，树中的一个节点是*Node 类型。*该节点有一个名称、属性和类型为*Node*的子节点。我正在使用[db4o](http://en.wikipedia.org/wiki/Db4o)来存储树。我通过简单地存储树的根节点来做到这一点。但是，我发现 db4o 并没有存储对象节点的所有子节点。当我从数据库中检索根并遍历树时，我最多只能遍历树的 3 层。似乎较低级别的子节点丢失了。有人可以帮助我，这样我就不会丢失任何节点吗？谢谢你。

下面是我的代码：

```
Node node1= new Node("root","this is the root",new ArrayList<Node>());
Node node2= new Node("zaid","123",new ArrayList<Node>());
Node node3= new Node("saad","999",new ArrayList<Node>());        
Node node4= new Node("safia","555",new ArrayList<Node>());
Node node5= new Node("ahmad","000",new ArrayList<Node>());

node1.getChildren().add(node2);
node2.getChildren().add(node3);
node3.getChildren().add(node4);
node4.getChildren().add(node5);

ObjectContainer db= Db4oEmbedded.openFile(Db4oEmbedded.newConfiguration(),"db");
db.store(node1);

Node node= new Node("root",null,null);
List<Node> result= db.queryByExample(node);
node= result.get(0);
System.out.println(node.getName()
        +","+node.getChildren().get(0).getName()
        +","+node.getChildren().get(0).getChildren().get(0).getName()
        +","+node.getChildren().get(0).getChildren().get(0).getChildren().get(0).getName()); 
```

我在最后一行代码中遇到异常，内容如下：

```
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 0, Size: 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T13:05:12.730

由于它对我有用，我向您展示了一个完整的工作示例：

```
import java.util.*;

class Node
{
  String _name;
  public String getName() {return _name;}
  public void setName(final String name) { _name = name;}

  String _value;
  public String getValue() {return _value;}
  public void setValue(final String value) { _value = value;}

  List<Node> _children;
  public List<Node> getChildren() {return _children;}
  public void setChildren(final List<Node> children) { _children = children;}

  Node(final String name, final String value, final List<Node> children)
  {
    setName(name);
    setValue(value);
    setChildren(children);
  }
} 
```

然后定义主类：

```
import java.util.*;
import com.db4o.*;
import com.db4o.query.*;
import com.db4o.ta.Activatable;

class test
{
  public static void main(String[] argv)
  {
Node node1= new Node("root","this is the root",new ArrayList<Node>());
Node node2= new Node("zaid","123",new ArrayList<Node>());
Node node3= new Node("saad","999",new ArrayList<Node>());        
Node node4= new Node("safia","555",new ArrayList<Node>());
Node node5= new Node("ahmad","000",new ArrayList<Node>());

node1.getChildren().add(node2);
node2.getChildren().add(node3);
node3.getChildren().add(node4);
node4.getChildren().add(node5);

ObjectContainer db= Db4oEmbedded.openFile(Db4oEmbedded.newConfiguration(),"db");
db.store(node1);

Node node= new Node("root",null,null);
List<Node> result= db.queryByExample(node);
node= result.get(0);
System.out.println(
             node.getName()
        +","+node.getChildren().get(0).getName()
        +","+node.getChildren().get(0).getChildren().get(0).getName()
        +","+node.getChildren().get(0).getChildren().get(0).getChildren().get(0).getName());
  }

} 
```

并且构建/运行可以这样完成：

```
javac -classpath "db4o-8.0.249.16098-all-java5.jar:." *.java
java -classpath "db4o-8.0.249.16098-all-java5.jar:." test 
```

您可以获得有关 db4o -> 文档 -> 教程 8.0 的更多信息。虽然 8.1 已经发布，但没有专门的教程。

# javascript - 在 Twitter Bootstrap Carousel 中显示下一张和上一张图片

> ID：16131056
> 
> 赞同：3
> 
> 时间：2013-04-21T12:23:12.477
> 
> 标签：javascript, jquery, css, twitter-bootstrap, carousel

我正在寻找一种在 Twitter Bootstrap Carousel 中显示下一张和上一张幻灯片图像的方法。

默认情况下，它只显示当前图像，如果我删除 display:none css 属性，它会将轮播中的每个项目都放在彼此下方。我尝试过使用 CSS，但没有让它工作。

这个想法是在中间显示当前的幻灯片图像，然后不透明地显示下一个和上一个图像，不一定可点击。

我尝试了不同的幻灯片和轮播，但似乎找不到满足这些要求的人，而且一些接近的人不会适应 Bootstrap 提供的响应式设计。

通常，当我将轮播与多个项目一起使用时，我只是将例如图像分组在`<div class="item"`> div 中，例如：

```
<div class="item active">
<img src="http://www.entiri.com/minett/img/slider/1.jpg" alt="">
<img src="http://www.entiri.com/minett/img/slider/2.jpg" alt="" style="">
<img src="http://www.entiri.com/minett/img/slider/3.jpg" alt="" style="">
</div>
<div class="item">
<img src="http://www.entiri.com/minett/img/slider/1.jpg" alt="">
<img src="http://www.entiri.com/minett/img/slider/2.jpg" alt="" style="">
<img src="http://www.entiri.com/minett/img/slider/3.jpg" alt="" style="">
</div>
<div class="item">
<img src="http://www.entiri.com/minett/img/slider/1.jpg" alt="">
<img src="http://www.entiri.com/minett/img/slider/2.jpg" alt="" style="">
<img src="http://www.entiri.com/minett/img/slider/3.jpg" alt="" style="">
</div> 
```

但这不会做我想要的，因为它会同时旋转所有三个项目，而不是每个项目都拍摄一张图像。

对于一些演练或教程的任何建议、建议或链接将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T01:51:06.493

这是帮助我的链接

[Twitter Bootstrap 101：轮播](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/twitter-bootstrap-101-the-carousel/)

# ruby-on-rails - 将 rails 站点从本地部署到 justhost 服务器

> ID：16131058
> 
> 赞同：1
> 
> 时间：2013-04-21T12:23:32.650
> 
> 标签：ruby-on-rails, web-deployment

我是 Rails 新手，这个问题可能非常基本。我学习了 ruby​​ on rails 来创建一个我也在 herokuapp 上测试过的小网站。

现在，我想将它部署在托管在 justhost 上的实际站点中。

应用程序应该如何部署？有什么方法可以将 herokuapp 直接移动到服务器上？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:51:24.570

您是否尝试过查看他们的帮助部分？他们网站上的本教程应该向您展示您需要的一切：[https ://my.justhost.com/cgi/help/upload-site](https://my.justhost.com/cgi/help/upload-site)

# php - 需要帮助在 php 中迭代 mysql 结果集

> ID：16131059
> 
> 赞同：0
> 
> 时间：2013-04-21T12:23:34.407
> 
> 标签：php, mysql

我有两张桌子：

```
Institute:
-----------
id       name         city
-----    -------      -------
1        Name 1       London    
2        Name 2       Leeds
3        Name 3       Edinburgh

Course:
--------
id       i_id     name                      stream
-----    -----    --------------------      -------
1        1        Computer Engineering      Engineering 
2        1        Chemical Engineering      Engineering
3        2        Electronics Engineering   Engineering 
4        3        Mechanical Engineering    Engineering 
```

我的结果集中需要以下信息：

1.  提供工程课程的机构（名称 1、名称 2、名称 3）。
2.  学院提供的所有课程。

现在，这是我实现此结果集的查询：

```
SELECT institute.id, institute.name AS i_name, institute.city, course.name AS c_name
FROM institute, course
WHERE institute.id = course.i_id
AND course.stream = 'Engineering'
ORDER BY institute.id 
```

此查询返回 4 条记录：

```
id      i_name      city           c_name
---     -------     ---------      ----------------
1       Name 1      London         Computer Engineering
1       Name 1      London         Chemical Engineering
2       Name 2      Leeds          Electronics Engineering
3       Name 3      Edinburgh      Mechanical Engineering 
```

如何迭代此结果集，以便获得网页上的以下数据列表：

```
 Found 3 Institutes
 ----------------------
 1) Name 1, London
    Courses Offered:-
    => Computer Engineering
    => Chemical Engineering

 2) Name 2, Leeds
    Courses Offered:-
    => Electronics Engineering

 3) Name 3, Edinburgh
    Courses Offered:-
    => Mechanical Engineering 
```

[*添加*]

我的网页上有分页设置。现在假设我想每页显示 2 条记录，我将使用`LIMIT 0,2`. 现在很明显，我查询中的前 2 条记录给了我相同的机构，所以在这种情况下，我也需要第三个机构。

我可以进行这样的动态查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:28:24.547

像这样的东西应该工作：

```
$currentInstitute = null;
$i = 1;
while($row = mysql_fetch_object($query)) {
  if($row->i_name != $currentInstitute)
    echo $i++.") $row->i_name, $row->city\n   Courses offered:-\n";
  $currentInstitute = $row->i_name;
  echo "    => $row->c_name\n"; 
} 
```

# java - 仅在我第一次按下调整大小按钮时出现空白图像

> ID：16131060
> 
> 赞同：2
> 
> 时间：2013-04-21T12:23:35.717
> 
> 标签：java, swing, bufferedimage, imageicon

好的，我编译代码并运行程序，图像应该出现在屏幕中央。我将尺寸放在 JTextFields 中，然后按调整大小按钮。一切正常。现在，如果我关闭窗口并再次运行，图像就会出现，但是如果我第一次按下调整大小按钮，它就会消失，如果我再次按下它，它就会出现并且一切正常。只有当我在窗口运行时编译代码并运行时，我才没有那个小问题。

有人知道发生了什么吗？

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import java.awt.image.BufferedImage;
public class ImageApp extends JFrame implements ActionListener{
//*********************************Variables*********************************
//***************************************************************************
    private JButton align_l,align_c,align_r,rsz;
    private JLabel w,h,pic;
    private JTextField w_txt,h_txt;
    private static final String IMG_PATH = "./hamster.jpg";
    private static int img_w,img_h;
    private static ImageIcon icon;
    private JMenuItem reset_option,double_option;
//********************************Constructor********************************
//***************************************************************************
    public ImageApp(String title){
        super(title);
        //****************************Align Panel****************************
        align_l = new JButton("Align Left");
        align_c = new JButton("Align Center");
        align_r = new JButton("Align Right");
        align_l.addActionListener(this);
        align_c.addActionListener(this);
        align_r.addActionListener(this);
        JPanel align_panel = new JPanel();
        align_panel.setLayout(new GridLayout(1,3));
        align_panel.add(align_l);
        align_panel.add(align_c);
        align_panel.add(align_r);
        add("North",align_panel);
        //***************************Picture Label***************************
        try {
             BufferedImage  img = ImageIO.read(new File(IMG_PATH));
             img_w = img.getWidth();
             img_h = img.getHeight();
             ImageIcon icon = new ImageIcon(img);
             pic = new JLabel(icon);
             add(pic);
        } catch (IOException e) {
                e.printStackTrace();
        }
        //****************************Resize Panel***************************
        w = new JLabel("Width:");
        h = new JLabel("Height:");
        w_txt = new JTextField(String.valueOf(img_w),4);
        h_txt = new JTextField(String.valueOf(img_h),4);
        rsz = new JButton("Resize");
        rsz.addActionListener(this);
        JPanel resize_panel = new JPanel();
        resize_panel.setLayout(new GridLayout(3,2));
        resize_panel.add(w);
        resize_panel.add(w_txt);
        resize_panel.add(h);
        resize_panel.add(h_txt);
        resize_panel.add(rsz);
        add("South",resize_panel);
        //*************************Menu Options Panel************************
        JMenuBar menu_bar = new JMenuBar();
        setJMenuBar(menu_bar);
        JMenu options_menu = new JMenu("Options");
        menu_bar.add(options_menu);
        JMenuItem reset_option = new JMenuItem("Reset");
        JMenuItem double_option = new JMenuItem("Double");
        options_menu.add(reset_option);
        options_menu.add(double_option);
        reset_option.addActionListener(this);
        double_option.addActionListener(this);
       //********************************************************************
        addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent evt) {
                System.exit(0);
            }
        });
    }
//**********************************Methods**********************************
//***************************************************************************
    public void actionPerformed(ActionEvent e){
        //Object b = e.getSource();
        String b = e.getActionCommand();
        if (b.equals("Align Left")){pic.setHorizontalAlignment(SwingConstants.LEFT);}
        else if (b.equals("Align Center")){pic.setHorizontalAlignment(SwingConstants.CENTER);}
        else if (b.equals("Align Right")){pic.setHorizontalAlignment(SwingConstants.RIGHT);}
        else if (b.equals("Resize")){
            int wid,hei;
            try{
                wid=Integer.parseInt(w_txt.getText());
                hei=Integer.parseInt(h_txt.getText());
            }catch(NumberFormatException nfe){
                wid=img_w;
                hei=img_h;
            }
            if(wid == 0 || hei == 0){
                wid=img_w;
                hei=img_h;
            }
            if(wid > 4096){
                wid=4096;
            }
            if( hei > 2048){
                hei=2048;
            }
            resize_image(wid,hei);
        }
        else if (b.equals("Reset")){
            resize_image(img_w,img_h);
        }
        else if (b.equals("Double")){
            Icon newIcon = pic.getIcon();
            int wid = 2 * newIcon.getIconWidth();
            int hei = 2 * newIcon.getIconHeight();
            if(wid > 4096){
                wid=4096;
            }
            if( hei > 2048){
                hei=2048;
            }
            resize_image(wid,hei);
        }
    }
    public void resize_image(int w,int h){
            Image im = Toolkit.getDefaultToolkit().getImage(IMG_PATH);
            BufferedImage b_i = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);
            Graphics g = b_i.createGraphics();
            g.drawImage(im, 0, 0, w, h, null);
            ImageIcon newIcon = new ImageIcon(b_i);
            pic.setIcon(newIcon);
            w_txt.setText(String.valueOf(w));
            h_txt.setText(String.valueOf(h));
    }
    public static void main(String [] args){
        ImageApp i = new ImageApp("Image Application.");
        i.setSize(800,600);
        i.setLocationRelativeTo(null);
        i.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:52:03.473

在`resize_image`：

```
public void resize_image(int w, int h) {
    Image im = Toolkit.getDefaultToolkit().getImage(IMG_PATH);
    /* ... */
    g.drawImage(im, 0, 0, w, h, null);
    /* ... */
} 
```

第一次`getImage`被调用，`im`并没有真正加载。当`drawImage`被调用时，AWT 开始在另一个线程中加载图像。**在加载图像之前它不会阻塞。**而且，因为`drawImage`认为**图像没有完全加载**，所以它什么都没有。

在第二次`getImage`调用时，由于**AWT 会自动缓存图像**`im`，所以已经加载完毕，所以一切正常。

 **解决方案：`MediaTracker`

```
public void resize_image(int w, int h) {
    Image im = Toolkit.getDefaultToolkit().getImage(IMG_PATH);
    waitForImage(im);
    /* ... */
    g.drawImage(im, 0, 0, w, h, null);
    /* ... */
}

private MediaTracker tracker = new MediaTracker(this);

private void waitForImage(Image image){
    tracker.addImage(image, 0);
    try {
        tracker.waitForID(0);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
} 
```**

# android - 如何从内部存储更新数据？

> ID：16131066
> 
> 赞同：0
> 
> 时间：2013-04-21T12:24:03.600
> 
> 标签：android, android-launcher

我创建了一个应用程序来*保护孩子*并*允许父母控制对*应用*程序*的访问。

它是一个具有*两个配置文件*的启动器：`Parent`和`child`。

*   `Parents`具有*管理权限*，*可以*从`list view`.

*   选择应用程序后，`list`应*保存在**内部存储*的文件中。

*   之后，App*应该正常*返回到`MainActivity`. 但是在返回的过程中`MainActivity`，更新没有发生！！

*   调试后发现上述过程*失败*，也通过阅读的方法确认了问题`application files`。

> 我不知道该怎么办！我是否重新启动`Activity`或`sharedPreferences`用于*录制*应用程序。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:38:07.133

您可以使用一种方法进行更新。[并在onActivityResult - Method](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)中使用该方法。

例如：

```
 @Override
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    reload();
    super.onActivityResult(requestCode, resultCode, data);       
 } 
```

`private void reload(){ //update your stuff }`

# .net - 如何在 MVC 中为标签设置特定宽度？

> ID：16131073
> 
> 赞同：1
> 
> 时间：2013-04-21T12:25:04.887
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-3

如何在 MVC 中为标签设置特定宽度？

以下方法不包含`HtmlAttributes`属性。

```
@Html.Label 
```

注意：我正在从控制器读取标签的宽度。它是动态的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:27:33.687

该方法`@Html.Label`确实具有 HtmlAttributes 属性。

所以应该这样做：

```
@Html.Label("my label", new {style = "width: 10px;"}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T04:38:56.390

How about new {@class = "myclass"} and set the width in css?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:47:13.123

您可以为标签编​​写 CSS。这样一个 CSS 就可以设置所有标签的宽度

# flash - 查看 Flash 播放器发出的 http 请求

> ID：16131074
> 
> 赞同：10
> 
> 时间：2013-04-21T12:25:22.893
> 
> 标签：flash, http, networking, request

我想在观看视频时查看 flash 插件发出的 http 请求。我在 Mac OSx 上使用谷歌浏览器。

我无法在网络面板中看到下载的视频，我也无法在提琴手中看到它。

请帮忙！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T07:13:15.507

打开工具 - 开发人员工具。选择“网络”选项卡。就是这样：您可以查看任何 http 请求，包括来自/发往 swf 的请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-31T20:17:48.957

这现在在最新版本的 Chrome 中得到修复。它们带有通过 DevTools 传递的 PPAPI 版本的 Flash 插件。

# android - Authlogic 和 Android，验证用户凭据

> ID：16131079
> 
> 赞同：0
> 
> 时间：2013-04-21T12:26:32.030
> 
> 标签：android, ruby-on-rails, authlogic, basic-authentication, communityengine

我有一个使用 Authlogic 的 Rails 应用程序（来自 gem Communityengine）。现在我希望用户能够在移动设备上登录（在这种情况下是 Android）

如果我理解正确，我可以使用 Http Basic Authentication 来授权指定的操作，但第一步（我认为）是，当用户在他的 Android 设备中输入他的用户名和密码时，检查该用户是否存在以及该密码是否正确.

我该怎么做？

密码在数据库中加密（使用 pw salt）所以据我所知，如果提供的用户和密码正确，我不能只检查数据库。

以下是我的应用程序中的一些 Http 标头，它们是我所做的不同 curl 请求的结果，我猜 Http 基本身份验证正在工作，因为我在提供用户凭据时得到了正确的 HTTP 代码：

```
martin@martin-desktop:~/Applications$ curl -I username:password@localhost:3000/users/username/posts/new
HTTP/1.1 200 OK
Date: Sun, 21 Apr 2013 12:17:29 GMT
Server: Apache/2.2.22 (Ubuntu)
X-Powered-By: Phusion Passenger (mod_rails/mod_rack) 3.0.19
X-UA-Compatible: IE=Edge,chrome=1
ETag: "b9aa82940f06722b7d8e35ce46e3166d"
Cache-Control: must-revalidate, private, max-age=0
X-Request-Id: 291ee45de8cb95e06ed4e8e6d3d9408c
X-Runtime: 0.335820
X-Rack-Cache: miss
Set-Cookie: _AppName_session=BAh7CkkiD3Nlc3Npb25faWQGOgZFRkkiJTA0ZDRhYmQwNDJjYmM1OGJmZTkyNzJjMTc5NThkODg0BjsAVEkiDnJldHVybl90bwY7AEZJIj1odHRwOi8vZ2l2LWR1ZXJlbi51bmktbXVlbnN0ZXIuZGUvdXNlcnMvbWFydGluL3Bvc3RzL25ldwY7AEZJIhV1c2VyX2NyZWRlbnRpYWxzBjsARkkiAYAzYWM2NTJlMjgyODA5MTY1ODg2ZTBjNTdhNGUzYjk5MzRkNWQ0YTE4MDdlN2M0MWI2OTQzYmQyNzZmOGFlMGI5NjliMjU3NzZhYTg4NjBkM2U0Y2Q5YTJjYzgwODVlNzY5NDgwMzE2MmQ3NTBjYzlhMmQ4ZTViYTJmNjJmYzVhZQY7AFRJIhh1c2VyX2NyZWRlbnRpYWxzX2lkBjsARmkGSSIQX2NzcmZfdG9rZW4GOwBGSSIxYzlIQitJNXNYZHNGa2NCb2hKcm5DY2tIcHNxdWJuWDEydVdZUU5WSlMvZz0GOwBG--2b5f5687425d7ec414e34b79eb89e0b6b465c86f; path=/; HttpOnly
Status: 200
Vary: Accept-Encoding
Content-Type: text/html; charset=utf-8

martin@martin-desktop:~/Applications$ curl -I localhost:3000/users/username/posts/new
HTTP/1.1 302 Found
Date: Sun, 21 Apr 2013 12:17:40 GMT
Server: Apache/2.2.22 (Ubuntu)
X-Powered-By: Phusion Passenger (mod_rails/mod_rack) 3.0.19
X-UA-Compatible: IE=Edge,chrome=1
Cache-Control: no-cache
X-Request-Id: 9e4b9094f99f5877c8fb79647a1a22f1
X-Runtime: 0.004657
X-Rack-Cache: miss
Set-Cookie: _AppName_session=BAh7B0kiD3Nlc3Npb25faWQGOgZFRkkiJWJhZGVlNzBjNjA0YmQ1MTgyYmI5OWMxZjcxOGIzZmZkBjsAVEkiDnJldHVybl90bwY7AEZJIj1odHRwOi8vZ2l2LWR1ZXJlbi51bmktbXVlbnN0ZXIuZGUvdXNlcnMvbWFydGluL3Bvc3RzL25ldwY7AEY%3D--32120aefd22c0748c352b016582451ede84225ca; path=/; HttpOnly
Location: localhost:3000/login
Status: 302
Vary: Accept-Encoding
Content-Type: text/html; charset=utf-8 
```

到目前为止，我还发现 Set-Cookie 使用 Base64 编码（这是来自 http 基本身份验证的结果字符串文字的编码）

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:03:42.103

没关系，我添加了这个方法，它检查用户名和密码的有效性并将结果写入标题中：

```
def auth
    authenticate_or_request_with_http_basic do |username, password|
      if user = User.find_by_login(username)
        response.headers['Auth'] = 'Password incorrect'
        if user.valid_password?(password)
          response.headers['Auth'] = 'Credentials correct'
        end
      else
        response.headers['Auth'] = 'Username incorrect'
        false
      end
    end
  end 
```

在我的移动应用程序中，我只需向 username:password@mysite.com 发送请求并读取 http 标头。不确定这是否是一种优雅的方法，或者它是否是 inteded，但它现在有效。

# php - 使用 jQuery 获取日期并使用 PHP 表单将其保存到 MySQL

> ID：16131081
> 
> 赞同：0
> 
> 时间：2013-04-21T12:26:56.017
> 
> 标签：php, jquery, mysql, forms, jquery-ui

我需要一个关于从 php 表单向 mysql db 发送日期的小例子。尝试了很多例子，但我似乎错过了一步。我已经为 3 个字段准备了一个表格，即姓名和出生日期。当我填写表格并提交提交日期变得疯狂:) 0000-00-00 00:00:00

我试图格式化日期，但这次我不明白如何将它传递给 mysql。这是我有趣的代码；

```
<?php include "header.php" ?>
<?php include "conn.php" ?>
<script>
    $(function() {
        $( "#bdate" ).datepicker();
    });
</script>
<?php
    if(isset($_POST['submit'])){
        $PlayerName = $_POST['PlayerName'];
        $PlayerLname = $_POST['PlayerLname'];
        $PlayerBdate = $_POST['PlayerBdate'];
        $query = "INSERT INTO tblPlayer (
                PlayerName, PlayerLname, PlayerBdate
    ) VALUES (
        '{$PlayerName}', '{$PlayerLname}', '{$PlayerBdate}'
    )";
        if(mysql_query($query,$connection)){
            //Sucess
            header("Location: players_list.php");
        } else{
            echo "<p>something is wrong</p>";
            echo "<p>" . mysql_error() . "</p>";
        }

    }
?>
<form action="add_player.php" method="post">
<table>
<tr>
   <td>Name: </td>
   <td><input type="text" name="PlayerName" /></td>
   </tr>
   <tr>
   <td>Lastname:</td>
   <td><input type="text" name="PlayerLastName" /></td>
   </tr>
   <tr>
   <td>Birthdate:</td>
   <td><input id="bdate" type="text" name="PlayerBdate" /></td>
   </tr>
   <tr>
   <td><input type="submit" name="submit" value="Save" /></td>
   <td align="right">&nbsp;</td>
   </tr>
   </table>
<?php ob_end_flush() ?>
<?php include ("footer.php") ?> 
```

header.php 包含

```
<?php ob_start(); ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<title>Untitled Document</title>
</head>
<body> 
```

conn.php 是标准连接 sting 文件。Footer.php 只是关闭连接:) 另外，如果没有 ob_start(); ，我也无法使我的代码工作。和结束功能：S

那么你能指出我如何以日/月/年格式获取日期并将其保存到 mysql 中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:30:49.540

因为你在 mysql 中的日期是`Y-m-d H:i:s`格式的.. 使用 php`date()`函数将日期转换为所需的格式。

代替

```
$PlayerBdate = $_POST['PlayerBdate']; 
```

和

```
 $PlayerBdate = date('Y-m-d H:i:s',strtotime($_POST['PlayerBdate'])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:03:59.330

最聪明的事情就是确保您的日期选择器以正确的格式返回它， $( "#bdate" ).datepicker({ dateFormat: "yy-mm-dd" }); 将使日期选择器以正确的格式返回它。它会错过时间，但 mysql 会自动为您填写。

# c# - 方法返回超类列表而不是子类

> ID：16131082
> 
> 赞同：1
> 
> 时间：2013-04-21T12:27:01.217
> 
> 标签：c#, inheritance, casting, type-conversion, subclass

我有一个`class X`代表一个元素。类`A`、和是 this 的子类，并为元素添加额外的行为`B`。`C``D`

我有一个`enum ElementType`with values `TypeA`, `TypeB`, `TypeC`and `TypeD`。

在我目前的情况下，有一个`class Y`包含类型的 Collection`X`并且有一个`method GetElementsByType(ElementType type)`.

调用此方法时，我想根据类型返回列表中每个项目的列表，其中包含元素。

在我的第一次尝试中，我结束了这个，但这导致了超类和子类之间的转换错误。

```
public List<X> GetElementsByType(ElementType type) {
        switch (type) {
            case ElementType.TypeA:
                return Elementen.OfType<A>().ToList();
            case ElementType.TypeB:
                return Elementen.OfType<B>().ToList();
            case ElementType.TypeC:
                return Elementen.OfType<C>().ToList();
            case ElementType.TypeD:
                return Elementen.OfType<D>().ToList();
            default:
                throw new ArgumentException();
        }
    } 
```

在我的第二次尝试中，我尝试通过让每个子类实现一个应该避免转换错误的公共接口来避免这种转换。

我最终得到了这个：

```
public interface IElement {
}

A : X, IElement
B : X, IElement
C : X, IElement
D : X, IElement

public List<IElement> GetElementsByType(ElementType type) {
            switch (type) {
                case ElementType.TypeA:
                    return new List<IElement>(Elementen.OfType<A>().ToList());
                case ElementType.TypeB:
                    return new List<IElement>(Elementen.OfType<B>().ToList());
                case ElementType.TypeC:
                    return new List<IElement>(Elementen.OfType<C>().ToList());
                case ElementType.TypeD:
                    return new List<IElement>(Elementen.OfType<D>().ToList());
                default:
                    throw new ArgumentException();
            }
        } 
```

但是，当我从某个地方调用此方法时，例如，

`var result = obj.GetElementsByType(ElementType.TypeA).FirstOfDefault(a => a.PropX == variable)`

我注意到 lambda 表达式无法从中检索任何属性，`Element`而是留下了在 IElement 中定义的所有内容（什么都没有）。

我该如何解决这个问题，以便我可以调用单个方法，添加一个枚举作为参数并从定义为超类`List`的单个返回一个子类？`Collection`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T12:31:34.060

您可以更简单地执行此操作：

```
public List<T> GetElementsByType<T>() where T : X
{  
        return Elementen.OfType<T>().ToList();
} 
```

# c# - 在框架中显示内容会干扰页面上的动画

> ID：16131083
> 
> 赞同：0
> 
> 时间：2013-04-21T12:27:01.747
> 
> 标签：c#, xaml, animation, windows-runtime

在 C#+xaml 上编写 Windows 8 应用程序时遇到了一个小问题。我的应用程序有一个主页，它分为两部分——左侧作为导航面板的 ListView 和右侧的 Frame。所有这些看起来和工作起来有点像[PC 设置面板](http://cloud.addictivetips.com/wp-content/uploads/2012/03/Windows-8-PC-Settings-Sync.png)。但是有一个区别——当页面到框架有足够的内容并且它是可滚动的时，我执行将导航面板折叠到仅图标状态的动画（当全宽时它有文本和图标）。

所以，这就是问题所在。假设我在第一页并且面板已折叠。然后我转到第二页，我必须回到面板的全宽状态。但由于我是在显示框架内容的同时进行的，所以动画会有一点冻结，当 GridView 有很多项目时，它变得非常明显。所以动画在中途冻结，然后 GridView 渲染所有项目图像，然后继续。

我想出的解决这个问题的唯一方法是在动画完成后进行导航。它看起来不是很漂亮，所以我先进入空白页面，执行动画，然后进入目标页面。但是这个方案还是感觉不对，从暂停恢复后的动画还是有一些问题。

那么，有什么办法可以保证 GridView 的渲染不会干扰我的动画呢？谢谢，对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:50:01.177

您可以将页面上的 NavigationCacheMode 设置为必需，并在所有页面中导航以预加载它们，同时使用 Opacity 属性隐藏 Frame，但第一次这样做会很慢。尝试限制需要在每个页面上解码和渲染的位图像素数。如果一切都失败了 - 看看 WinRT XAML 工具包中 AlternativeFrame 控件的 Preload() 方法是否有帮助。

# npm - 在非全局安装中使用 Grunt

> ID：16131084
> 
> 赞同：3
> 
> 时间：2013-04-21T12:27:12.017
> 
> 标签：npm, gruntjs

在尝试构建自定义版本的 jQuery 而不安装全局依赖项时，我遇到了以下问题：

```
$ node --version
v0.10.4
$ npm --version
1.2.18

$ git clone git://github.com/jquery/jquery.git
$ cd jquery
$ git checkout `git describe --abbrev=0 --tags` # latest tag
$ npm install
$ npm install grunt-cli

# variant A
$ npm run-script grunt custom:-ajax # does nothing

# variant B
$ node_modules/.bin/grunt custom:-ajax
Running "custom:-ajax" (custom) task
Creating custom build...
Warning: Error: not found: grunt Use --force to continue.
Aborted due to warnings. 
```

我以前很少使用 Grunt 或 Node，所以我在这里缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:11:12.547

这是因为 jQuery 自定义任务如何产生 grunt。我刚刚发送了一个拉取请求来解决这个问题：[https ://github.com/jquery/jquery/pull/1255](https://github.com/jquery/jquery/pull/1255)

# codeigniter - 如何通过在wordpress中插入/ ci-admin之类的/ wp-admin来获取管理员登录页面

> ID：16131085
> 
> 赞同：0
> 
> 时间：2013-04-21T12:27:15.203
> 
> 标签：codeigniter, url, admin

我想知道是否可以像我们在 wordpress 中那样通过在域名后键入 /CI_ADMIN 来查看管理员登录页面。

```
http://www.abc.com/wp-admin 
```

我想做

```
http://www.abc.com/ci-admin 
```

对于我的 codeigniter 网站。那可能吗 ？网址的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:47:47.183

您可以使用路由来执行此操作，只需在您的 routes.php 文件中定义路由

```
$route['ci-admin'] = 'ci_admin/login'; 
```

有关如何创建管理面板的更多信息，请阅读本文特别是第三种方法

[CI 管理面板](http://philsturgeon.co.uk/blog/2009/07/Create-an-Admin-panel-with-CodeIgniter)

# c# - 来自多个表的水晶报表数据？

> ID：16131086
> 
> 赞同：0
> 
> 时间：2013-04-21T12:27:15.780
> 
> 标签：c#, crystal-reports

我在程序中有 2 个表，我正在尝试将这些表中的数据显示到 Crystal 报表。

*   表 1：`student1`带有列（名称、RegID、Section、RollNo、sex、DOB、City、State）

*   表 2：`StudentCA`包含列（RegdID、LinuxCA、C#CA、SysCA、CryptoCA、DFCA、模式、总计）

代码：

```
string query = "SELECT student1.Name, student1.Section, student1.RegID, studentCA.mode, studentCA.LinuxCA, studentCA.C#CA, studentCA.SysCA, studentCA.CryptoCA, studentCA.DFCA FROM studentCA CROSS JOIN student1 studentCA.RegdID = student1.RegID WHERE (student1.RegID = '" + txtRegdID.Text + "')";
objDA.SelectCommand = new SqlCommand(query, conn);

conn.Open();

objDA.SelectCommand.ExecuteNonQuery();
conn.Close();

objDA.Fill(ds);
objCrystal.SetDataSource(ds);

crystalReportViewer1.ReportSource = objCrystal;
crystalReportViewer1.Refresh(); 
```

但此代码在运行时生成**DataSourceException 。**我正在使用 .Net 框架 4.0 和 Visual Studio 2010。

**我正在使用 .\sqlexpress 作为数据库。**

它给出如下错误：

**加载数据库信息失败。**

**文件 temp_eda0adfd-c6f7-45be-8440-fcbdcae02975 {289D4323-3A7B-45D7-80EA-345DD8BF7329}.rpt 出错：无法加载数据库信息。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:44:08.910

您的直接问题可能是由选择引起的`studentCA.C#CA`- 字段名称可能应该包含在 RDBMS 的适当列引用字符中 - 例如，`studentCA.[C#CA]`如果您使用的是 MS SQLServer。

也就是说，CROSS JOIN 可能不是连接两个表的最佳方式。

# python - Raspberry pi 使用 bluetooth.discover_devices() 和 python 不工作

> ID：16131087
> 
> 赞同：2
> 
> 时间：2013-04-21T12:27:17.167
> 
> 标签：python, bluetooth, raspberry-pi

我已经安装了蓝牙

```
sudo apt-get install bluetooth bluez-utils blueman 
```

我可以找到我的手机

```
hcitool scan 
```

问题是当我尝试在 python 文件中使用蓝牙时

```
import bluetooth 
```

工作正常。但是当我尝试

```
nearby_devices = bluetooth.discover_devices() 
```

它不工作。错误是

```
AttributeError: 'module' object has no attribute 'discover_devices' 
```

基于一些应该工作的网页。Ps 基本上我想以编程方式将文本文件发送到我的移动设备。这是该过程的开始。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T12:44:14.170

我已经解决了这个问题。这是一个非常愚蠢的错误。如果可以的话，我会删除这个问题。我在同一个文件夹中命名了我的另一个文件蓝牙。因此，当我编写 import bluetooth 时，导入的是我的另一个 python 文件，而不是蓝牙模块。

# c# - 无法更改关系..外键属性不可为空

> ID：16131090
> 
> 赞同：1
> 
> 时间：2013-04-21T12:27:37.577
> 
> 标签：c#, asp.net, entity-framework

我正在尝试更新类型的实体`MamConfiguration_V1`

已经存在于数据库中

它的参考成员很少（其中`MamConfigurationToBrowser_V1`）

```
 private void UpdateEfItem(MamConfiguration_V1 itemFromDb, MamConfiguration_V1 itemFromUi)
    {
        itemFromDb.UpdatedDate = DateTime.Now;

        itemFromDb.Description = itemFromUi.Description;

        itemFromDb.StatusId = itemFromUi.StatusId;

        itemFromDb.Name = itemFromUi.Name;

        itemFromDb.NumericTraffic = itemFromUi.NumericTraffic;

        itemFromDb.PercentageTraffic = itemFromUi.PercentageTraffic;

        itemFromDb.Type = itemFromUi.NumericTraffic;

        itemFromDb.MamConfigurationToBrowser_V1.Clear();

        for (int i = 0; i < itemFromUi.MamConfigurationToBrowser_V1.Count; i++)
        {
            var elementToAdd = itemFromUi.MamConfigurationToBrowser_V1.ElementAt(i);

            elementToAdd.Browser = mMaMDBEntities.Browsers.Single(browserItem => browserItem.BrowserID == elementToAdd.BrowserID);

            elementToAdd.MamConfiguration_V1 = itemFromDb;

            itemFromDb.MamConfigurationToBrowser_V1.Add(elementToAdd);
        } 
```

}

我收到以下数据库运行时错误：

操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。

但这很奇怪。所有引用都不为空：

![在此处输入图像描述](https://i.stack.imgur.com/QhneL.png)

![在此处输入图像描述](https://i.stack.imgur.com/4w2O7.png)

**更新2：**

我试过这段代码：

```
 try
        {
            item.ThrowIfNull("item");

            var itemFromDB = GetById(item.ConfigurationId);

            if (itemFromDB != null)
            {
                UpdateEfItem(itemFromDB, item);

                //mMaMDBEntities.MamConfiguration_V1.Detach(itemFromDB);

                //mMaMDBEntities.MamConfiguration_V1.Attach(item);

                //mMaMDBEntities.ObjectStateManager.ChangeObjectState(item, System.Data.EntityState.Modified);

                //mMaMDBEntities.ObjectStateManager.ChangeObjectState(itemFromDB, System.Data.EntityState.Modified);

                mMaMDBEntities.SaveChanges();

                return item;
            } 
```

}

```
 private void UpdateEfItem(MamConfiguration_V1 itemFromDb, MamConfiguration_V1 itemFromUi)
        {
            itemFromDb.UpdatedDate = DateTime.Now;
            itemFromDb.Description = itemFromUi.Description;
            itemFromDb.StatusId = itemFromUi.StatusId;
            itemFromDb.Name = itemFromUi.Name;
            itemFromDb.NumericTraffic = itemFromUi.NumericTraffic;
            itemFromDb.PercentageTraffic = itemFromUi.PercentageTraffic;
            itemFromDb.Type = itemFromUi.NumericTraffic;

            foreach (var item in itemFromDb.MamConfigurationToBrowser_V1.ToList())
            {
                if (itemFromUi.MamConfigurationToBrowser_V1.All(b => b.BrowserVersionId != item.BrowserVersionId))
                {
                    mMaMDBEntities.MamConfigurationToBrowser_V1.DeleteObject(item);
                }
            }

            for (int i = 0; i < itemFromUi.MamConfigurationToBrowser_V1.Count; i++)
            {
                var element = itemFromUi.MamConfigurationToBrowser_V1.ElementAt(i);
                var item = itemFromDb.MamConfigurationToBrowser_V1.SingleOrDefault(b => b.BrowserVersionId == element.BrowserVersionId);
                if (item != null)
                {
                    // copy properties from element to item
                }
                else
                {
                    element.Browser = mMaMDBEntities.Browsers.Single(browserItem =>
                        browserItem.BrowserID == element.BrowserID);

                    element.MamConfiguration_V1 = itemFromDb;

                    //have also tried: element.MamConfiguration_V1 = null;

                    //element.MamConfiguration_V1Reference = null;

                    itemFromDb.MamConfigurationToBrowser_V1.Add(element);
                }
            }
        } 
```

并出现此错误：

> {"违反 UNIQUE KEY 约束 'UQ_MamConfigurations_V1'。无法在对象 'dbo.MamConfiguration_V1' 中插入重复键。重复键值为 (elad_14Apr_1315)。\r\n语句已终止。"}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:15:00.573

这条线...

```
itemFromDb.MamConfigurationToBrowser_V1.Clear(); 
```

...不仅会清除集合，还会将集合中各个项目对父项的引用设置`itemFromDb`为`null`. 这是对这些项目的修改，EF 将尝试将它们保存到数据库中。它失败是因为（可能）引用是必需的并且不能是`null`.

您必须采取不同的方法，即逐个更新集合中的项目。您必须考虑到项目可能已在 UI 中删除，它们可能已被修改，并且可能已添加新项目。它看起来类似于：

```
private void UpdateEfItem(MamConfiguration_V1 itemFromDb,
    MamConfiguration_V1 itemFromUi)
{
    itemFromDb.UpdatedDate = DateTime.Now;
    itemFromDb.Description = itemFromUi.Description;
    itemFromDb.StatusId = itemFromUi.StatusId;
    itemFromDb.Name = itemFromUi.Name;
    itemFromDb.NumericTraffic = itemFromUi.NumericTraffic;
    itemFromDb.PercentageTraffic = itemFromUi.PercentageTraffic;
    itemFromDb.Type = itemFromUi.NumericTraffic;

    foreach (var item in itemFromDb.MamConfigurationToBrowser_V1.ToList())
    {
        if (!itemFromUi.MamConfigurationToBrowser_V1.Any(b =>
            b.BrowserID == item.BrowserID)
        {
            mMaMDBEntities.Browsers.DeleteObject(item);
        }
    }

    for (int i = 0; i < itemFromUi.MamConfigurationToBrowser_V1.Count; i++)
    {
        var element = itemFromUi.MamConfigurationToBrowser_V1.ElementAt(i);
        var item = itemFromDb.MamConfigurationToBrowser_V1
            .SingleOrDefault(b => b.BrowserID == element.BrowserID);
        if (item != null)
        {
            // copy properties from element to item
        }
        else
        {
            element.Browser = mMaMDBEntities.Browsers.Single(browserItem =>
                browserItem.BrowserID == element.BrowserID);

            itemFromDb.MamConfigurationToBrowser_V1.Add(element);
        }
    }
} 
```

# java - 如何在循环中的某个点打印“i”的值？

> ID：16131091
> 
> 赞同：-2
> 
> 时间：2013-04-21T12:27:41.783
> 
> 标签：java

```
public static void main(String[] args) {
    int largestChain = 0;
    for(int i = 1; i < 1000000; ++i) {
        if(chain(i) > largestChain) {
            largestChain = chain(i);  // Here, how do I print the final value
                                      // of 'i' that respects the rule chain(i)?
        }
    }
    System.out.print(largestChain);
} 
```

例如，如果`i = 13`, `chain(i) = 10`，并且`largestChain`13（从 1 开始）是 10。现在假设我们有一个循环，从 1 到 100，并且`largestChain`仍然是 10，相同的`i = 13`。`i`当循环必须完成其任务（并进入 100）时，我该如何打印？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:36:05.457

可能这就是你想要的：

```
public static void main(String[]args){

    int largestChain = 0;
    int largestIndex = 0;
    for(int i = 1; i < 1000000; ++i){
        if(chain(i) > largestChain){
            largestChain = chain(i); 
            largestIndex = i;
        }
    }
    System.out.print("Largest chain is :"+largestChain);
    System.out.print("Largest chain index is :"+largestIndex);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T12:35:24.433

```
 int largestChain = 0;
    int index =0;
    for(int i = 1; i < 1000000; ++i){
        if(chain(i) > largestChain){
            largestChain = chain(i); //here, how do I print the final value of 'i' that respects the rule chain(i) 
            index = i;
        }
    }
    System.out.print(largestChain + " index  : " + index); 
```

# macos - 没有端口的本地名称解析 - MAMP Pro

> ID：16131093
> 
> 赞同：5
> 
> 时间：2013-04-21T12:27:53.890
> 
> 标签：macos, redirect, dns, localhost, mamp

这一直困扰着我一段时间，在 MAMP Pro 中，我设置了一些使用“本地名称解析”的站点，但是它们只能使用端口号。我注意到很多人能够让他们在没有任何端口号的情况下工作。

例如，来自 CSS-Tricks 的 Chris Coyier 可以直接在**v10.whatup**上工作，而我自己的只能在**v10.whatup**上工作：*8888*

TL：博士。test.dev:8888 有效，但 test.dev/ 无效

我错过了什么/有什么问题吗？

更新/编辑：
如果我将 MAMP Pro 端口设置设置为使用 80/443 和 3306（Apache/SSL 和 MySQL），它似乎在 URL 后没有端口的情况下工作。虽然 MAMP 端口设置：8888/8890 和 8889 是您首次安装时的默认设置。

80/443 设置是否可以使用，即使它不是默认设置？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-21T14:24:05.653

似乎将端口更改为 80/443 和 3306（Apache/SSL 和 MySQL）而不是 MAMP 默认值：8888/8890 和 8889 将允许在域后没有任何端口的情况下使用本地名称解析。

# php - 如何使用 PHP 从 SQL 数据库下载文件？

> ID：16131094
> 
> 赞同：0
> 
> 时间：2013-04-21T12:28:13.907
> 
> 标签：php, sql, database, download

我将我的 sql 数据库中的文件内容保存为 longblob：

```
 CREATE TABLE IF NOT EXISTS `upload` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`name` varchar(30) NOT NULL,
`type` varchar(30) NOT NULL,
`size` int(11) NOT NULL,
`content` longblob NOT NULL,
 PRIMARY KEY (`id`)     ); 
```

当我尝试下载它时，我得到的只是用代码编写的内容。单击文件时，我想创建“另存为”选项。

这就是我存储数据的方式：

```
$query = "INSERT INTO upload (name, size, type, content ) ".
"VALUES ('$fileName', '$fileSize', '$fileType', '$content')"; 
```

这就是我获取数据的方式：

```
if (isset($_GET['id'])) {
    $con = mysql_connect('localhost', 'root', '') or die(mysql_error());
    $db = mysql_select_db('test', $con);
    $id = $_GET['id'];
    $query = "SELECT name, type, size, content " . "FROM upload WHERE id = '$id'";
    $result = mysql_query($query) or die('Error, query failed');
    list($name, $type, $size, $content) = mysql_fetch_array($result);
    header("Content-length: $size");
    header("Content-type: $type");
    header("Content-Disposition: attachment; filename=$name");
    ob_clean();
    flush();
    echo $content;
    mysql_close();
    exit;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:55:56.693

1.  在输出图像数据之前不要输出任何数据（如链接）。其他任何东西都会破坏图像。
2.  不要在任何内容已经显示后输出标题。由于 HTTP 的性质，一旦输出开始，您就无法修改或添加标头。这就是为什么没有显示内容类型标题并且您将所有内容都视为 HTML 的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:33:38.280

如果你得到一个包含代码的文件，你需要检查你的 LAMP 设置。至于您的代码，请尝试删除 flush();

# c - 运算符不被识别为加法。有没有办法这样做？

> ID：16131098
> 
> 赞同：1
> 
> 时间：2013-04-21T12:28:48.080
> 
> 标签：c

编译器有没有办法将运算符视为 +、-、/ 或 * 的真正含义？下面不起作用。

```
#include <stdio.h>

int main(void) {

int number1=10, number2=5;
char operator;
int result=0;

printf("Enter Operator ");
scanf("%c",&operator);

if (operator=='+')
result=number1+operator+number2;

printf("%d",result);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:30:26.447

这个：

```
result=number1+operator+number2; 
```

永远不会`C`像你想象的那样工作。当您实际添加`ascii`to`+`和.`number1``number2`

所以，我想做以下事情：

```
switch(operator){
    case '+':
        result = number1 + number2;
        break;
    case '-':
        result = number1 - number2;
        break;
    case '*':
        result = number1 * number2;
        break;
    case '/':
        result = number1 / number2;
        break;
    default:
        puts("Incorrect operator");
} 
```

这将允许获得正确的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T12:31:40.513

不，C 不是 JavaScript。它没有运行时评估功能。如果你想解析和评估数学表达式，那么你必须做一些更复杂的事情，就像[这个人所做的那样](https://stackoverflow.com/questions/2932016/parsing-of-mathematical-expressions)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T12:31:56.300

不，C 是一种静态类型语言。你不能这样做。

您可以做的是，要求用户选择一个操作，并根据用户输入，您可以拥有一个执行用户建议的操作的开关盒。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T12:32:22.007

不，C 不能那样做。

或者 ：

```
if (operator=='+')
    result=number1+number2; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-21T13:09:46.413

恐怕您必须像这样处理 switch 或语句中的每个运算符：

```
switch(operator){
    case '+': // Note that this works only for scalar values not string
        result = number1+number2;
    // ...
} 
```

头韵你可以像这样准备操作员回调列表：

```
typedef int (*operator_callback) (int operand1, int operand2);
typedef struct {
    char name;
    operator_callback callback;
} operator_definition;

int operator_add(int x, int y) {return x+y;}
int operator_minus(int x, int y) {return x-y;}

// And prepare list of those
operator_definition[] = {
    {'+', operator_add},
    {'-', operator_minus},
    {NULL, NULL}
};

// Function for fetching correct operator callback
operator_callback get_operator_callback(char op)
{
    int i;
    for( i = 0; operator_definition[i].name != NULL; ++i){
        if( operator_definition[i].name == op){
            return operator_definition[i].callback;
        }
    }
    return NULL;
}

// And in main function
operator_callback clbk = get_operator_callback(operator);
if( !clbk){
    printf( "Unknown operator %c\n", operator);
    return -1;
}
result = clbk(number1, number2); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-21T12:35:53.073

的值`operator`是一个字符，而不是函数或运算符。您不能仅将在运行时输入的字符解释为程序编译时构建的程序的一部分。

改为这样做：

```
if (operator == ’+') return number1 + number2; 
```

# r - 在R中的矩阵中的特定列对之间应用函数

> ID：16131099
> 
> 赞同：3
> 
> 时间：2013-04-21T12:28:58.590
> 
> 标签：r, matrix, apply, lsa

我正在使用 R 中的 lsa 包生成一个矩阵。创建矩阵后，我想计算矩阵中*特定*文档对（列）之间的余弦相似度。

目前，我正在使用嵌套的 for 循环来执行此操作，而且速度*非常*慢。在下面的代码中，有 150个*sourceID*和 6413个*targetID*，总共进行了 961.950 次比较。在我的数字运算机上运行了一个半小时后，它只通过了大约 300k 的数字。

有关更多信息，*sourceIDs*和*targetIDs*是列名称的向量，从包含这些名称的两个文件中加载。我想在所有源->目标对之间应用余弦函数。这些列由文档名称索引，该名称是一个字符串。

我确信使用*apply 可以*更快地做到这一点，但我无法理解它。

```
library(lsa)

# tf function
real_tf <- function(m)
{
    return (sweep(m, MARGIN=2, apply(m, 2, max), "/"))
}

#idf function
real_idf <- function(m)
{
    df = rowSums(lw_bintf(m), na.rm=TRUE)
    return (log(ncol(m)/df))
}

#load corpus
lsa.documents <- textmatrix(args[1], minWordLength=1, minDocFreq=0)

# compute tf-idf
lsa.weighted_documents <- real_tf(lsa.documents) * real_idf(lsa.documents)

# compute svd
lsa.nspace <- lsa(lsa.weighted_documents, dims = as.integer(args[5]))
lsa.matrix <- diag(lsa.nspace$sk) %*% t(lsa.nspace$dk)

# compute similarities
lsa.sourceIDs <- scan(args[2], what = character())
lsa.targetIDs <- scan(args[3], what = character())
lsa.similarities <- data.frame(SourceID=character(), TargetID=character(), Score=numeric(), stringsAsFactors=FALSE)
k <- 1
for (i in lsa.sourceIDs)
{
    for (j in lsa.targetIDs)
    {
        lsa.similarities[k,] <- c(i, j, cosine(lsa.matrix[,i], lsa.matrix[,j]))
        k <- k + 1
    }
}
lsa.ranklist <- lsa.similarities[order(lsa.similarities$Score, decreasing=TRUE),]

# save ranklist
write.table(lsa.ranklist, args[4], sep="\t", quote=FALSE, col.names=FALSE, row.names=FALSE) 
```

编辑：可重现的例子

```
# cosine function from lsa package
cosine <- function( x, y )
{
    return ( crossprod(x,y) / sqrt( crossprod(x)*crossprod(y) ) )
}

theMatrix <- structure(c(-0.0264639232505822, -0.0141165039351167, -0.0280459775632757, 
-0.041211247161448, -0.00331565717239375, -0.0291161345945683, 
-0.0451167802746869, -0.0116214407383401, -0.0381080747718958, 
-1.36693644389599, 0.274747343110076, 0.128100677705483, -0.401760905661056, 
-1.24876927957167, 0.368479552862631, -0.459711112157286, -0.544344448332346, 
-0.765378939625159, -1.28612431910459, 0.293455499695499, 0.025167452173962
), .Dim = c(3L, 7L), .Dimnames = list(NULL, c("doc1", "doc2", "doc3", 
"doc4", "doc5", "doc6", "doc7")))

sources <- c("doc1", "doc2", "doc3")
targets <- c("doc4", "doc5", "doc6", "doc7")

similarities <- data.frame(SourceID=character(), TargetID=character(), Score=numeric(), stringsAsFactors=FALSE)
k <- 1

for (i in sources)
{
    for (j in targets)
    {
        similarities[k,] <- c(i, j, cosine(theMatrix[,i], theMatrix[,j]))
        k <- k + 1
    }
}

ranklist <- similarities[order(similarities$Score, decreasing=TRUE),]
write.table(ranklist, "C:\\Temp\\outputfile.txt", sep="\t", quote=FALSE, col.names=FALSE, row.names=FALSE) 
```

产生（outputfile.txt）：

```
doc1    doc6    0.962195242094352
doc3    doc6    0.893461576046585
doc2    doc6    0.813856201398669
doc2    doc7    0.768837903803964
doc2    doc4    0.730093288388069
doc3    doc7    0.675640649189972
doc3    doc4    0.635982900340315
doc1    doc7    0.53871688669971
doc1    doc4    0.499235059782688
doc1    doc5    0.320383772495164
doc3    doc5    0.226751624753921
doc2    doc5    0.144680489733846 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T14:01:45.313

好的，感谢您提供可重现的示例。这是一个可能的解决方案。让我们首先将您`theMatrix`分成源矩阵和目标矩阵。我们不需要在这里使用名称，因为我们不会使用循环：

```
matrix1 <- theMatrix[,1:3]
matrix2 <- theMatrix[,4:7] 
```

然后我们将创建一个函数来循环遍历 matrix2 的每一列，保持 matrix1 中的单列不变：

```
cycleM2 <- function(x) {
    # x is a vector from matrix1 
    apply(matrix2,2,cosine,x)
} 
```

最后，我们将这个函数提供给 matrix1 的每一列：

```
(mydata <- apply(matrix1,2,cycleM2))

#      doc1      doc2      doc3
# doc4 0.4992351 0.7300933 0.6359829
# doc5 0.3203838 0.1446805 0.2267516
# doc6 0.9621952 0.8138562 0.8934616
# doc7 0.5387169 0.7688379 0.6756406 
```

最后，如果你真的需要你的原始数据格式：

```
require(reshape2)
melt(mydata) 
```

这应该可以很好地加速您的代码。此外，正如@flodel 所注意到的，当您使用循环时，请在内存中预先分配您的（空）目标对象，例如用 NA 填充它。就时间而言，内存分配是最昂贵的，这就是您原来的循环如此缓慢的原因。

编辑：

使用纯函数的更好形式可能是：

```
pairwiseCosine <- function(matrix1,matrix2) {
    apply(matrix1,2,function(x){
        apply(matrix2,2,cosine,x)
    })
}

pairwiseCosine(theMatrix[,1:3],theMatrix[,4:7]) 
```

# php - 在 PHP 中创建 IP 分层列表

> ID：16131100
> 
> 赞同：4
> 
> 时间：2013-04-21T12:29:10.253
> 
> 标签：php, algorithm, list, ip, hierarchical

我有一个存储 IP 地址的数据库表，如下所示：

```
 E_ID IP MASK 
```

我想让它看起来像这样：

```
E_ID Parent_ID IP MASK 
```

这样我就可以轻松获得我的 IP 地址树：

```
 80.17.0.0/18 (id=1 parent id = -1)
        80.17.0.0/24 (id=2, parent id=1)
            80.17.0.0/27 (id=3, parent id=2)
                80.17.0.0/31  (id=4, parent id=3)
                80.17.0.2/31  (id=5, parent id=3)
                80.17.0.4/31  (id=6, parent id=3)
                80.17.0.6/31  (id=7, parent id=3)
                80.17.0.8/31  (id=8, parent id=3)
                80.17.0.12/31  (id=9, parent id=3)
            80.17.0.32/27  (id=10, parent id=2)
                80.17.0.32/30 (id=11, parent id=10) 
                    80.17.0.32/32 (id=12, parent id=11) 
                    80.17.0.33/32 (id=13, parent id=11) 
                    80.17.0.34/32 (id=14, parent id=11) 
                    80.17.0.35/32 (id=15, parent id=11) 
```

所有 IP 和掩码都是 BINGINT (ip2long())。我想出了什么：

```
$sql = "SELECT IP, Mask, E_ID
        FROM test
        ORDER BY `IP`, `Mask` ASC";

$result = mysqli_query($db, $sql) or die(mysqli_error($db));

$space = array();
$i = 0;
array_push($space, mysqli_fetch_assoc($result));

while($r = mysqli_fetch_assoc($result)){
    if(!ipvsnet(long2ip($r['IP']), long2ip($space[$i]['IP']), long2ip($space[$i]['Mask']))){
        array_push($space, $r);
        $i++;
    }

function ipvsnet($ip, $network, $mask){
    if(((ip2long($ip))&(ip2long($mask))) == ip2long($network)){
        return 1;
        } else {
        return 0;
    }
} 
```

这给了我主要的父母地址。我不明白如何找到更深的节点，因为我不知道每个分支有多深。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:25:14.550

从外观上看，您尝试按网络 ID、子网掩码和节点 ID 对 IP 地址进行排序/组织。我认为您误解了子网掩码在 IP 寻址中的作用（这是一个非常常见的错误，我曾经也犯过这个错误 :)）。

子网掩码用于将网络 ID 与 IP 地址分开。子网掩码是一个二进制数，由一系列不间断的 1 位组成，从二进制字的最高有效位（4 字节二进制值）开始。例如：

```
11110000.00000000.00000000.00000000 // subnet_mask: /4
11111000.00000000.00000000.00000000 // subnet_mask: /5
11011000.00000000.00000000.00000000 // not a legal bitmask because of the 0 bit 
```

当你考虑一个随机的 IP 地址，比如 74.125.224.197（在这里做一些数学运算），我们得到位模式：

```
01001010.01111101.11100000.11000101 // This is the same as 74.125.224.197 
```

现在，如果我们有这个特定 IP 的子网掩码，比如说：

```
11110000.00000000.00000000.00000000 
```

然后网络 ID 将是子网掩码和 IP 地址的逻辑与：

```
 01001010.01111101.11100000.11000101 // ip
  & 11110000.00000000.00000000.00000000 // subnet mask
---------------------------------------
    01000000.00000000.00000000.00000000 // Network Id 
```

沿着逻辑相似的路线，节点 id 将是 IP 地址和子网掩码的 /negation/ 的逻辑与：

```
/* negation of subnet mask via XOR */
    11110000.00000000.00000000.00000000 // subnet mask
XOR 11111111.11111111.11111111.11111111 
---------------------------------------
    00001111.11111111.11111111.11111111 // negation of subnet mask

/* getting the node id from the IP address using the negation of subnet mask */
    00001111.11111111.11111111.11111111 // negation of subnet mask
&   01001010.01111101.11100000.11000101 // original IP address
---------------------------------------
    00001010.01111101.11100000.11000101 // the node Id 
```

所有这一切的重点是与您对子网掩码的性质以及您的排序顺序的理解相矛盾。考虑这样的子网掩码：

```
 01001010.01111101.11100000.11000101 // original IP address of google
&   11000000.00000000.00000000.00000000 // different subnet mask
---------------------------------------
    01000000.00000000.00000000.00000000 // same network id(sort of) as above 
```

我们如何区分我们这次生成的内容和上次计算网络 ID 的内容。答案与子网掩码有关。子网掩码实际上是关于确定网络 ID。IP 地址和子网掩码应该一起考虑，因为您需要两者来确定网络 ID（这就是您尝试订购的样子）。

如果您想组织数据以进行有意义的操作，请考虑首先将原始 IP 地址 + 子网掩码转换为正确的网络 ID 和节点 ID 部分。其余的将很快为您准备就绪。

我真的希望这对男人有帮助！

# .htaccess - Mod_rewrite - 缺少图像、样式和脚本

> ID：16131102
> 
> 赞同：1
> 
> 时间：2013-04-21T12:29:22.037
> 
> 标签：.htaccess, mod-rewrite

一开始我希望你注意，我确实尝试在 google 或 stackoverflow 中找到解决方案。我找到了一些提示，但它们对我不起作用，或者我只是没有按照说明进行操作。

所以，这是我的网站目录：

```
www.domain.pl/index.php    <--index file
www.domain.pl/images/      <--images folder
www.domain.pl/styles/      <--styles folder, for now just 1 css file
www.domain.pl/script/      <--scripts folder, js files, and 1 php file called with include
www.domain.pl/font/        <--font files 
```

现在，当我打开我的网站时，`www.domain.pl`它`www.domain.pl/index.php`就像一个魅力。但是我希望能够添加一些参数，例如`www.domain.pl/index.php?action=dosmth`，但它对用户来说看起来不太好，所以这就是我想使用**mod rewrite**的地方。

现在是棘手的部分，我希望它看起来像`www.domain.pl/index/actionparam/`但是当我这样做时，我在控制台中收到错误，说我的图像、脚本和 css 无法加载/找到。（我尝试像那样重写它：`RewriteRule ^index/([^-]+)/script/jquery-1.7.1.min.js$ script/jquery-1.7.1.min.js [L]`但我不能将它用于每个图像、脚本、css 或字体文件。需要更好的方法。

**所以，到目前为止，我的 mod 重写了：**

```
Options FollowSymLinks 
RewriteEngine On 
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://domain.pl/$1/ [L,R=301]

RewriteRule ^index.html$ index.php [L] 
RewriteRule ^index/$ index.php [L] 
RewriteRule ^index/([^-]+)/$ index.php?action=$1 [L] 
```

第一部分，如果用户没有把它放在那里，我试图在 url 的末尾添加“斜杠”。 `http://domain.pl/index`->`http://domain.pl/index/`或 `http://domain.pl/index/myaction`->`http://domain.pl/index/myaction/`

**问题**
是否可以在重写时以某种方式跳过带有图像、脚本等的文件夹？或者我怎么能一次重写所有图像？

**额外的问题**
`http://domain.pl/myaction/`直接重定向到`http://domain.pl/index.php?action=myaction`，而不需要放在`/index/`那里？是的，我正在学习 mod 重写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:58:11.163

您不必包含`index`在请求中，只需包含参数。例子：

要求：`http://domain.pl/myaction`

```
Options +FollowSymlinks -MultiViews
RewriteEngine On 
RewriteBase /

# Exclude existing files and directories.
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule .* -  [L]

# Get the parameter and pass it to index.php
RewriteCond %{REQUEST_URI} !index\.php  [NC]
RewriteRule ^([^/]+)/?  /index.php?action=$1  [L,NC] 
```

# php - PHP：到达方法调用时忽略其余代码

> ID：16131105
> 
> 赞同：0
> 
> 时间：2013-04-21T12:29:51.443
> 
> 标签：php, class

我已经很久没有使用 PHP 了，并且遇到了麻烦。

基本上，我有一个名为“database.php”的类文件，其中包含“Database”类。

在我的索引页面中，每当我到达以下行时，它都会忽略代码的其余部分（在本地 btw 中工作正常）。：

```
<?php
function __autoload($class_name) {
    include $class_name . '.php';
}
$db = Database::getInstance(); //<---- this line

some blablabla
?> 
```

功能有问题`__autoload`吗？

谢谢您的帮助 ！

注意：我将文件上传到使用 Plesk 的服务器上，并启用了 PHP...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:39:14.983

小心大写字母：

类 Database vs database.php ，这可能适用于 Windows，但不适用于 linux。在 _autoload 函数中尝试使用[lcfirst](http://php.net/manual/en/function.lcfirst.php)

```
include lcfirst($class_name) . '.php'; 
```

# php - mysqli在for循环中不同的插入准备好的语句

> ID：16131107
> 
> 赞同：-1
> 
> 时间：2013-04-21T12:30:06.417
> 
> 标签：php, loops, insert, mysqli

我试图做的是在**for 循环中创建****不同的插入语句**并在循环中执行它们。那可能吗？

 **这是**简化的代码**：

```
$mysqli = new mysqli("localhost", "user", "password", "database");

for($i=1; $i<10; $i++){

    // $query string is created through code, so 
    // INSERT statement is varying after each loop.
    // Lets say, in another step $query will be "INSERT INTO table (row4,row5) VALUES (?,?)";
    // $params will be array("value4","value5");

    $query = "INSERT INTO table (row1,row2,row3) VALUES (?,?,?)";
    $param_type = "sss";
    $params = array("value1","value2","value2");

    $insert_stmt = $mysqli->prepare($query);
    array_unshift($params, $param_type);
    call_user_func_array(array($insert_stmt, 'bind_param'), refValues($params));
    $insert_stmt->execute();
    $insert_stmt->close();

} 
```

如果我运行此代码，我得到的只是**一个插入的行**并**警告** “call_user_func_array() 期望参数 1 是有效的回调，第一个数组成员不是有效的类名或对象...”

所以我的问题是：如何通过for循环准备和插入不同的查询和参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:42:23.887

这是可能的，甚至很容易制作。
为此，您唯一需要的是 PDO：

```
$queries = array('insert 1', 'insert 2', ...);
$params  = array(array(...),array(...), ...);

foreach ($queries as $i => $sql) {
    $stm = $pdo->prepare($sql);
    $stm->execute($params[$i]);
} 
```

仅此*而已***

# php - 通过 .htaccess 或 PHP 删除 URL 中的重复斜杠

> ID：16131109
> 
> 赞同：0
> 
> 时间：2013-04-21T12:30:15.070
> 
> 标签：php, .htaccess, url, mod-rewrite, duplicates

我正在尝试从 URL 中删除重复的斜杠。以下 .htaccess 规则：

```
RewriteRule ^(.+)//+(.*)$ $1/$2 [L,NC,R=301] 
```

不要在如下 URL 上为我工作：

```
http://www.mp7.org/?site=69.com\\\\\\\\\\\\\\\\ 
```

.htaccess 文件

```
#### mod_rewrite in use
Options +FollowSymlinks
RewriteEngine On 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:38:19.733

此规则不适用于*反斜杠*。您必须使用反斜杠添加类似的规则

```
RewriteRule ^(.+)\\\\+(.*)$ $1\\$2 [L,R] 
```

如果您想用（正向）斜杠替换反斜杠，请改用此规则

```
RewriteRule ^(.+)\\\\+(.*)$ $1/$2 [L,R] 
```

并在请求结束时删除所有反斜杠

```
RewriteRule ^(.*?)[/\\]+$ $1 [L,R] 
```

和查询字符串一样

```
RewriteCond %{QUERY_STRING} ^(.*=.*?)[/\\]+$
RewriteRule ^.*$ $0?%1 [R,L,QSA] 
```

当一切按预期工作时，您可以更改`R`为`R=301`.

*永远不要*在启用的情况下进行测试，有关详细信息`301`，请参阅此答案 [提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T12:50:18.653

这是因为 IIS 服务器，而且几乎可以肯定您的网站是在 .Net .asp 或 . aspx 您需要使用一个微型脚本，当您的服务器获得 http 或 https 请求时，它必须是 Lcase(URL)。如果页面不是很多，您可以重命名全部小写，将网页的所有内部链接修改为小写，然后在谷歌网站管理员工具中上诉URL删除请求。

如何删除重复的网址

# javascript - 如何在 JavaScript 中准确地将数字转换为字符串

> ID：16131110
> 
> 赞同：2
> 
> 时间：2013-04-21T12:30:18.323
> 
> 标签：javascript, numbers, tostring

JavaScript 以双精度浮点格式存储所有数字，具有 52 位尾数和 11 位指数（用于存储数值的 IEEE 754 标准），因此其数字到字符串的转换通常不准确。例如，

```
111111111*111111111===12345678987654321 
```

是正确的，但是

```
(111111111*111111111).toString() 
```

返回“1234567898765432 **0** ”而不是“1234567898765432 **1** ”。同样，`0.362*100`产量`36.199999999999996`。

有没有一种简单的方法可以准确地将数字转换为字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:31:43.873

不准确的不是数字到字符串的转换。它是以浮点数存储数字本身，因为所有值都不能用浮点数精确表示，并且可以存储的有效数字的数量是有限的（大约 16 个）。如果您需要完美的精度，您根本不能使用浮点数，而且您当然不能使用具有这么多有效数字的数字。替代品是整数、二进制编码的小数、大十进制库等......

这是一个用浮点数表示某些值的问题的简单演示：http: [//jsfiddle.net/jfriend00/nv4MJ/](http://jsfiddle.net/jfriend00/nv4MJ/)

根据您实际尝试解决的问题，通常可以通过`toFixed(n)`在转换为显示时使用来解决小数精度问题。

其他参考资料阅读更多解释：

[如何处理 JavaScript 中的浮点数精度？](https://stackoverflow.com/questions/1458633/elegant-workaround-for-javascript-floating-point-number-problem)

[为什么十进制数不能用二进制精确表示？](https://stackoverflow.com/questions/1089018/why-cant-decimal-numbers-be-represented-exactly-in-binary)

[在 16、32 和 64 位 IEEE-754 系统中可以表示什么范围的数字？](https://stackoverflow.com/questions/872544/precision-of-floating-point)

[为什么浮点数可能会丢失精度 - MSDN - Microsoft](http://support.microsoft.com/kb/125056)

[浮点数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-floating-point-math-broken)

[JavaScript 中的精确浮点运算](https://stackoverflow.com/questions/10354155/accurate-floating-point-arithmetic-in-javascript)

[https://stackoverflow.com/questions/744099/is-there-a-good-javascript-bigdecimal-library](https://stackoverflow.com/questions/744099/is-there-a-good-javascript-bigdecimal-library)

# vhdl - “EOF”：第 2 行的语法错误

> ID：16131111
> 
> 赞同：0
> 
> 时间：2013-04-21T12:30:19.650
> 
> 标签：vhdl, modelsim

我正在尝试编写一个简单的 vhdl 代码。当我在 quartus 2 中运行这段代码时没有问题。但是，当我在 modelsim 上运行时，第 2 行出现错误，即“use ieee.std_logic_all.1164;”错误。. 我不知道，因为我是 vhdl 的新手。顺便说一句，我正在使用 Modelsim Starter edition 6.5e

```
library ieee;
use ieee.std_logic_all.1164;

entity tb is
end tb;

architecture behaviour of tb is 
component ORG is
port (
a : in std_logic;
b : in std_logic;
c : out std_logic;
 );

 signal ina, inb, outc : std_logic;
 constant period : time := 100ns;
 signal done : boolean := false;

begin
  process
    begin
      ina = '0';
      inb = '0';
      wait for period;

      ina = '1';
      inb = '0'

      wait for period;
      done <= true;
      wait;
  end process;
end behaviour; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:03:24.337

您的代码中有许多问题会导致语法错误。

1.  正如@rene 指出的那样，库名称是`std_logic_1164`-您将“1164”和“all”颠倒了（IEEE 的大写并不重要）。
2.  端口行的末尾不应*有分号*`c`
3.  您应该`end component;`在端口声明之后包含一个声明（即在右括号和分号之后）
4.  过程中的等号应该是`<=`
5.  `100`最后，和之间应该有一个空格`ns`

# php - How to get the Author ID of the product in magento

> ID：16131118
> 
> 赞同：0
> 
> 时间：2013-04-21T12:30:42.307
> 
> 标签：php, magento

I am now developing a magento website, at a first glance at the task I found getting the ID of the author of the product seems to be hard for me as I am a newbie in magento. Can anyone help me on how to get the Id of the user that created the product in product view? cause i want to show the information of the author of the product in the product view. Hope someone can help me in this. Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:46:13.113

根据默认的 magento 设置，只有管理员可以在管理员端创建产品。是否有用户正在创建产品的任何自定义部分。如果是这样，请将属性 author_id 添加到产品中，并在该自定义代码中保存当前登录的客户 ID，同时保存产品。

如需更多帮助，需要查看您当前的结构。你能提供一些代码片段或演示网址吗

# css - CSS : My site does not display correctly on Chrome and Safari, but on Firefox it's fine

> ID：16131130
> 
> 赞同：-2
> 
> 时间：2013-04-21T12:32:04.660
> 
> 标签：css, firefox, browser

There is an error on my website. I want to display my login links at the top of my website but that doesn't work in Google Chrome nor Safari, but it does in Firefox. I believe this has something to do with floating, but adding a clear:both div before the form does not work. Lalalalalala is the string I use as temporary replacement for the actual links.

This is the correct display: [http://imgur.com/fh71eBd,VIRHRYz#0](http://imgur.com/fh71eBd,VIRHRYz#0)

This is the wrong display: [http://imgur.com/fh71eBd,VIRHRYz#1](http://imgur.com/fh71eBd,VIRHRYz#1)

My website is: www.rajivmanichand.nl

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:38:19.270

好吧，很容易解决您针对错误元素的问题

添加`float:left;`到`img#logo` 并添加`clear:both;`到`nav`

**的CSS：**

```
img#logo{
display: inline-block;
float: left;
}
div#loginsection {
width: 300px;
height: 44px;
float: right;
display: inline;
margin-bottom: 50px;
}
nav {
clear: both;
} 
```

那应该为你解决

不要忘记从`div#loginsection`aswell 中删除 clear 否则它将忽略`img#logo`左侧的浮动

# java - 具有持续通信的 Java 套接字

> ID：16131137
> 
> 赞同：0
> 
> 时间：2013-04-21T12:32:58.773
> 
> 标签：java, sockets, tcp, javax.imageio

我希望能够在客户端执行以下操作：

*   打开插座
*   发送数据
*   等待
*   发送更多数据

和服务器端：

*   打开 msocket
*   接收数据
*   等待
*   保持recivieng（一遍又一遍地循环）

目前我不能让它循环:(

我有客户端：

构造函数：

```
s = new Socket(ServerIPAddr, 6100);
out = new ObjectOutputStream(s.getOutputStream()); 
```

循环功能：

```
 public void sendImage(BufferedImage image){

    System.out.println("Starting to send");
    try {

        ImageIO.write(image, "PNG", out);
        System.out.println("Sent");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } // png is lossless

} 
```

这可以一个接一个地调用很多次。

服务器端我有构造函数：

```
 public ServerConnectionThread(Socket clientSocket) {current = clientSocket;} 
```

运行功能：

```
 public void run() {
    int i = 0;
    System.out.println("Connection accepted");
    System.out.println("Threaded spanwed");
    try {ObjectInputStream in = new ObjectInputStream(current.getInputStream());
        while (capturing) {
            ImageIO.write(ImageIO.read(in), "PNG", new File("test" + i++
                    + ".png"));
            in.close();
        }
    } catch (IOException e) {e.printStackTrace();}

} 
```

有谁知道为什么它只适用于发送的第一条数据？并拒绝继续发送？

-更新-

```
while (capturing) {
            BufferedImage b = ImageIO.read(in);
            if(b == null){
                continue;
            }
            ImageIO.write(b, "PNG", new File("test" + i++
                    + ".png"));

        } 
```

似乎解决了这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:40:18.920

为什么要关闭 inputStream ？

试试这个 -

```
 while (capturing) {
            ImageIO.write(ImageIO.read(in), "PNG", new File("test" + i++ ".png"));
            //in.close();
      } 
```

# .htaccess - htaccess 用 subdir 重写 subdir

> ID：16131142
> 
> 赞同：0
> 
> 时间：2013-04-21T12:33:35.177
> 
> 标签：.htaccess, mod-rewrite, rewrite, subdirectory

如何将子目录应用于包含以下内容的 htacces。

但是我尝试`RewriteCond %{REQUEST_URI} !^/foo/`了然后我得到一个错误，没有它我被重定向到主站点。

脚本 htaccess

```
IfModule mod_rewrite.c>
  Options +FollowSymLinks
  RewriteEngine On

  # Get rid of index.php
  RewriteCond %{REQUEST_URI} /index\.php // I tried !^/subdir/index\.php 
  RewriteRule (.*) index.php?rewrite=2 [L,QSA]

  # Rewrite all directory-looking urls
  RewriteCond %{REQUEST_URI} /$
  RewriteRule (.*) index.php?rewrite=1 [L,QSA]

  # Try to route missing files
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} public\/ [OR]
  RewriteCond %{REQUEST_FILENAME} \.(jpg|gif|png|ico|flv|htm|html|php|css|js)$
  RewriteRule . - [L]

  # If the file doesn't exist, rewrite to index
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php?rewrite=1 [L,QSA]

</IfModule> 
```

wp htaccess

```
# BEGIN WPSuperCache
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
#If you serve pages from behind a proxy you may want to change 'RewriteCond %{HTTPS} on' to something more sensible
AddDefaultCharset UTF-8
RewriteCond %{REQUEST_URI} !^.*[^/]$
RewriteCond %{REQUEST_URI} !^.*//.*$
RewriteCond %{REQUEST_METHOD} !POST
RewriteCond %{QUERY_STRING} !.*=.*
RewriteCond %{HTTP:Cookie} !^.*(comment_author_|wordpress_logged_in|wp-postpass_).*$
RewriteCond %{HTTP:X-Wap-Profile} !^[a-z0-9\"]+ [NC]
RewriteCond %{HTTP:Profile} !^[a-z0-9\"]+ [NC]
RewriteCond %{HTTP_USER_AGENT} !^.*(AdsBot-Google|Android|BB10|BlackBerry\ 9350|BlackBerry\ 9360|BlackBerry\ 9370|BlackBerry\ 9380|BlackBerry\ 9780|BlackBerry\ 9790|BlackBerry\ 9800|BlackBerry\ 9810|BlackBerry\ 9850|BlackBerry\ 9860|BlackBerry\ 9900|BlackBerry\ 9930|BlackBerry9500|BlackBerry9520|BlackBerry9530|BlackBerry9550|CUPCAKE|Googlebot-Mobile|bada|dream|froyo|iPhone|iPod|incognito|s8000|webOS|webmate).* [NC]
RewriteCond %{HTTP:Accept-Encoding} gzip
RewriteCond %{HTTPS} on
RewriteCond %{DOCUMENT_ROOT}/wp-content/cache/supercache/%{SERVER_NAME}/$1/index-https.html.gz -f
RewriteRule ^(.*) "/wp-content/cache/supercache/%{SERVER_NAME}/$1/index-https.html.gz" [L]

RewriteCond %{REQUEST_URI} !^.*[^/]$
RewriteCond %{REQUEST_URI} !^.*//.*$
RewriteCond %{REQUEST_METHOD} !POST
RewriteCond %{QUERY_STRING} !.*=.*
RewriteCond %{HTTP:Cookie} !^.*(comment_author_|wordpress_logged_in|wp-postpass_).*$
RewriteCond %{HTTP:X-Wap-Profile} !^[a-z0-9\"]+ [NC]
RewriteCond %{HTTP:Profile} !^[a-z0-9\"]+ [NC]
RewriteCond %{HTTP_USER_AGENT} !^.*(AdsBot-Google|Android|BB10|BlackBerry\ 9350|BlackBerry\ 9360|BlackBerry\ 9370|BlackBerry\ 9380|BlackBerry\ 9780|BlackBerry\ 9790|BlackBerry\ 9800|BlackBerry\ 9810|BlackBerry\ 9850|BlackBerry\ 9860|BlackBerry\ 9900|BlackBerry\ 9930|BlackBerry9500|BlackBerry9520|BlackBerry9530|BlackBerry9550|CUPCAKE|Googlebot-Mobile|bada|dream|froyo|iPhone|iPod|incognito|s8000|webOS|webmate).* [NC]
RewriteCond %{HTTP:Accept-Encoding} gzip
RewriteCond %{HTTPS} !on
RewriteCond %{DOCUMENT_ROOT}/wp-content/cache/supercache/%{SERVER_NAME}/$1/index.html.gz -f
RewriteRule ^(.*) "/wp-content/cache/supercache/%{SERVER_NAME}/$1/index.html.gz" [L]

RewriteCond %{REQUEST_URI} !^.*[^/]$
RewriteCond %{REQUEST_URI} !^.*//.*$
RewriteCond %{REQUEST_METHOD} !POST
RewriteCond %{QUERY_STRING} !.*=.*
RewriteCond %{HTTP:Cookie} !^.*(comment_author_|wordpress_logged_in|wp-postpass_).*$
RewriteCond %{HTTP:X-Wap-Profile} !^[a-z0-9\"]+ [NC]
RewriteCond %{HTTP:Profile} !^[a-z0-9\"]+ [NC]
RewriteCond %{HTTP_USER_AGENT} !^.*(AdsBot-Google|Android|BB10|BlackBerry\ 9350|BlackBerry\ 9360|BlackBerry\ 9370|BlackBerry\ 9380|BlackBerry\ 9780|BlackBerry\ 9790|BlackBerry\ 9800|BlackBerry\ 9810|BlackBerry\ 9850|BlackBerry\ 9860|BlackBerry\ 9900|BlackBerry\ 9930|BlackBerry9500|BlackBerry9520|BlackBerry9530|BlackBerry9550|CUPCAKE|Googlebot-Mobile|bada|dream|froyo|iPhone|iPod|incognito|s8000|webOS|webmate).* [NC]
RewriteCond %{HTTPS} on
RewriteCond %{DOCUMENT_ROOT}/wp-content/cache/supercache/%{SERVER_NAME}/$1/index-https.html -f
RewriteRule ^(.*) "/wp-content/cache/supercache/%{SERVER_NAME}/$1/index-https.html" [L]

RewriteCond %{REQUEST_URI} !^.*[^/]$
RewriteCond %{REQUEST_URI} !^.*//.*$
RewriteCond %{REQUEST_METHOD} !POST
RewriteCond %{QUERY_STRING} !.*=.*
RewriteCond %{HTTP:Cookie} !^.*(comment_author_|wordpress_logged_in|wp-postpass_).*$
RewriteCond %{HTTP:X-Wap-Profile} !^[a-z0-9\"]+ [NC]
RewriteCond %{HTTP:Profile} !^[a-z0-9\"]+ [NC]
RewriteCond %{HTTP_USER_AGENT} !^.*(AdsBot-Google|Android|BB10|BlackBerry\ 9350|BlackBerry\ 9360|BlackBerry\ 9370|BlackBerry\ 9380|BlackBerry\ 9780|BlackBerry\ 9790|BlackBerry\ 9800|BlackBerry\ 9810|BlackBerry\ 9850|BlackBerry\ 9860|BlackBerry\ 9900|BlackBerry\ 9930|BlackBerry9500|BlackBerry9520|BlackBerry9530|BlackBerry9550|CUPCAKE|Googlebot-Mobile|bada|dream|froyo|iPhone|iPod|incognito|s8000|webOS|webmate).* [NC]
RewriteCond %{HTTPS} !on
RewriteCond %{DOCUMENT_ROOT}/wp-content/cache/supercache/%{SERVER_NAME}/$1/index.html -f
RewriteRule ^(.*) "/wp-content/cache/supercache/%{SERVER_NAME}/$1/index.html" [L]
</IfModule>

# END WPSuperCache

# BEGIN WordPress

# WPhtc: Begin Custom htaccess
Action application/x-hg-php53 /cgi-sys/php53
AddType application/x-httpd-php53 .php
# WPhtc: End Custom htaccess

# WPhtC: Limit upload size to 10 MB
LimitRequestBody 10485760 

# WPhtC: Protect WP-config.php
<files wp-config.php>
order allow,deny
deny from all
</files>

# WPhtC: Protect .htaccess file
<files ~ "^.*\.([Hh][Tt][Aa])">
order allow,deny
deny from all
</files>

# WPhtC: Protect comments.php
RewriteCond %{REQUEST_METHOD} POST
RewriteCond %{REQUEST_URI} .wp-comments-post\.php*
RewriteCond %{HTTP_REFERER} !.*http://www.mysite.com.* [OR]
RewriteCond %{HTTP_USER_AGENT} ^$
RewriteRule (.*) ^http://%{REMOTE_ADDR}/$ [R=301,L]

# WPhtC: Disable image hotlinking
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?mysite.com/.*$ [NC]
RewriteRule \.(jpg|jpeg|png|gif)$ http://www.mysite.com/hotlink.png [NC,R,L]
</IfModule>

# WPhtC: Disable file hotlinking
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?mysite.com/.*$ [NC]
RewriteRule \.(mp3|mp4|m4a|pdf|zip|rar|doc|docx)$ http://www.mysite.com [NC,R,L]
</IfModule>

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:07:39.683

要排除规则的子目录或文件，您可以[`!`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)在`RewriteRule`模式前面使用

```
RewriteRule !^subdir index.php?rewrite=2 [L,QSA] 
```

或者

```
RewriteRule !^subdir/index\.php$ index.php?rewrite=2 [L,QSA] 
```

# xml - 如何定义仅在父元素中首先出现的子元素？

> ID：16131144
> 
> 赞同：0
> 
> 时间：2013-04-21T12:33:52.220
> 
> 标签：xml, dtd

我想为 XML 文档创建文档类型定义。

我有以下形式的 XML 文档：

```
<parent>
    <first>Some PCDATA</first>
    <a>The elements aye...</a>
    <c>see</c>
    <b>and bee</b>
    <c>can occur in random order</c>
    <a>and with a random frequency</a>
    <last>Some PCDATA</last>
</parent> 
```

我只希望 element **first**是第一个元素（并且只出现一次），**最后**一个元素是最后一个子元素（并且只出现一次），并且元素**a**、**b**和**c**零次或多次以混合顺序出现。

我能做到吗？如果是，如何？如果不是，那么可能是接近此的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:04:25.050

这应该工作：

```
<!DOCTYPE parent [
    <!ELEMENT parent (first, (a|b|c)*, last) >
    <!ELEMENT first #PCDATA >
    <!ELEMENT a ANY >
    <!ELEMENT b ANY >
    <!ELEMENT c ANY >
    <!ELEMENT last #PCDATA >
]> 
```

# c++ - Win32 C++控制台清屏不闪烁

> ID：16131148
> 
> 赞同：5
> 
> 时间：2013-04-21T12:34:13.663
> 
> 标签：c++, windows, winapi, console-application

我见过一些控制台游戏，屏幕会自行刷新/清除而不会出现烦人的闪烁。我已经尝试了很多解决方案，这是我现在得到的：

```
while(true)
{
    if(screenChanged) //if something needs to be drawn on new position
    {
    COORD coordScreen = { 0, 0 };
    DWORD cCharsWritten;
    CONSOLE_SCREEN_BUFFER_INFO csbi;
    DWORD dwConSize;
    HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE);

    GetConsoleScreenBufferInfo(hConsole, &csbi);
    dwConSize = csbi.dwSize.X * csbi.dwSize.Y;
    FillConsoleOutputCharacter(hConsole, TEXT(' '), dwConSize, coordScreen, &cCharsWritten);
    GetConsoleScreenBufferInfo(hConsole, &csbi);
    FillConsoleOutputAttribute(hConsole, csbi.wAttributes, dwConSize, coordScreen, &cCharsWritten);
    SetConsoleCursorPosition(hConsole, coordScreen);
    } 

    ///printf all the time graphics on their right position with SetConsoleCursorPosition

    Sleep(33.3f);
} 
```

尽管如此，我还是得到了一些最小的眨眼。有人有想法么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T13:39:34.103

发生这种情况的原因是，在您清除控制台屏幕和实际绘制到它的时间之间，显示器会刷新。通常这会发生得如此之快，以至于你永远看不到它，但偶尔你会在正确的时间做它并且你会经历闪烁。

一个不错的选择是创建一个与控制台屏幕大小和宽度相同的屏幕外缓冲区，在此处进行所有文本输出和更新，然后使用[`WriteConsoleOutput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687404%28v=vs.85%29.aspx). 确保您考虑到屏幕缓冲区必须同时保存文本和属性信息，格式与控制台相同。

```
BOOL WINAPI WriteConsoleOutput(
  _In_     HANDLE hConsoleOutput,
  _In_     const CHAR_INFO *lpBuffer,
  _In_     COORD dwBufferSize,
  _In_     COORD dwBufferCoord,
  _Inout_  PSMALL_RECT lpWriteRegion
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T21:38:10.840

你想做相当于双缓冲。使用 CreateConsoleScreenBuffer 和 SetConsoleActiveScreenBuffer api 调用，您可以修改屏幕外缓冲区，然后切换缓冲区，就像我们过去在糟糕的日子里所做的那样 :) 这是一篇解释如何操作的文章：http: [//msdn.microsoft.com/en-us/库/windows/桌面/ms685032%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685032%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-08-23T20:27:59.367

您正在寻找双缓冲

# java - 使用 Java 从 COM 端口获取 Arduino 二进制文件

> ID：16131151
> 
> 赞同：1
> 
> 时间：2013-04-21T12:34:58.213
> 
> 标签：java, serial-port, usb, arduino, virtual

我想将 Arduino 代码放到虚拟串行端口上，而不是实际的 Arduino 上。IDE 通过 COM 端口将二进制代码发送到 Arduino，在这种情况下，它将是一个虚拟 COM 端口，而不是 Arduino。

我想读取并存储上传到 COM 端口的代码。我已经尝试了几个 Java 库（RXTX、jSSC 和 gnu.io），但我无法读取 COM 端口上的内容，因为它总是会给出它正在被另一个应用程序（即 Arduino IDE）使用的异常. 所以我想在一个虚拟端口上上传 Arduino 代码，在这个端口的另一端有一个 Java 应用程序可以读取发送到这个端口的内容。

相关问题：*[通过 Arduino IDE 在虚拟串口上上传 Arduino 代码](https://stackoverflow.com/questions/15785087/upload-arduino-code-on-virtual-serial-port-through-arduino-ide/)*。

如果有任何其他语言的解决方案可用或更容易，我愿意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:41:46.953

目前听起来你正试图用两个应用程序读取和写入同一个端口，并期望在另一个应用程序的输入上获得一个输出 - 它并不像那样工作。将 COM 端口视为您可以读取和写入的流的一端，而不是流本身 - 因此，当您告诉多个进程（在您的情况下为 Arduino 和您的 Java 程序）从同样的结局，它会失败。

我相信你所追求的是一个空调制解调器模拟器。使用[com0com 之](http://sourceforge.net/projects/com0com/)类的东西来创建一对虚拟 COM 端口，其中一个上的输入将显示为另一个上的输出（反之亦然）。然后您可以相对正常地进行操作，使用使用 jssc、RXTX 或您选择的任何其他串行库，使用您的 Java 程序在其他 COM 端口上侦听 Arduino IDE。

# regex - postgresql 中的正则表达式

> ID：16131152
> 
> 赞同：0
> 
> 时间：2013-04-21T12:35:01.740
> 
> 标签：regex, postgresql

这里是什么意思`E`：

```
regexp_replace('foobarbaz', 'b(..)',  E'X\\1Y', 'g') 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:49:25.140

使用正则[表达式匹配运算符](http://www.postgresql.org/docs/9.2/interactive/functions-matching.html#FUNCTIONS-POSIX-REGEXP)：

```
select *
from mytable
where col ~ '^.{3}(\d)' 
```

The`E`表示[带有 C 样式转义的字符串常量](http://www.postgresql.org/docs/9.2/interactive/sql-syntax-lexical.html#SQL-SYNTAX-CONSTANTS)

# c - C程序红绿灯好吗？

> ID：16131153
> 
> 赞同：0
> 
> 时间：2013-04-21T12:35:05.380
> 
> 标签：c

我必须用 C 编写一个简短的程序，它获取交通灯的状态（如果它是绿色或红色）并显示我们必须做的动作（通过道路/停止）。在我看来，我们必须使用这里的if子句..所以我用C写了这个但是当我运行它时，它显示“Red..”，如果我尝试按下某些东西，它只显示“Green”..我做错了什么？这是代码：

```
#include<stdio.h>
int main()
{

        int red,green;
        printf(" red :");
        scanf("%d",&red);
        printf(" green :");
        scanf("%d",&green);
        if ( red ){
                printf(" Stop %d\n",red);
        }
        else{
                printf("Pass the road - %d\n",green);
        }
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T12:56:13.003

您在 if 条件中使用了整数。在 C 中，任何在 if 语句中求值的正整数都被认为是真的。

```
if(some positive number)
{
// always true
}
else
{
//control never reaches here
} 
```

一种解决方法可能是针对不同条件使用特定值。

例如，试试这个

```
 if ( red == 1){
            printf(" Stop %d\n",red);
    }
    else{
            printf("Pass the road - %d\n",green);
    } 
```

现在，您的 if 条件具有特定且更好的进入条件，其中只有一个特定数字对应于给定条件。您可以继续使用 来添加打印绿色语句的条件`else-if`，或者让它成为默认条件。

使用 switch-case 的类似实现是：

```
switch(red)
{
case 1:  printf(" Stop %d\n",red);
         break;

default: printf("Pass the road - %d\n",green);
         break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T12:39:33.637

您使用 请求整数类型的输入`%d`。

根据 C 的布尔逻辑，0 为假，!0 为真。因此，除非您输入 0 作为第一个整数，否则您将始终在第一个子句中结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T13:07:06.917

您需要考虑用户将如何描述灯的当前状态。而不是问它是红色的吗？并检查他是否输入了一个非零整数，这意味着是，您可以要求用户输入颜色。然后根据他键入的内容，您会显示相应的消息。

```
#include<stdio.h>
#include<string.h>

int main(){
    char colorName[128];
    printf(" What color is the light: ");
    scanf("%s", colorName);

    if ( strcmp(colorName, "red") == 0 ){
         printf(" Stop!\n");
    }else  if ( strcmp(colorName, "green") == 0 ){
         printf("cross the road\n");
    }else {
         printf("is %s even a color?\n", colorName);
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T16:54:03.717

```
#include<graphics.h>
#include<conio.h>
#include<dos.h>
#include<stdlib.h>

main()
{
   int gd = DETECT, gm, midx, midy;

   initgraph(&gd, &gm, "C:\\TC\\BGI");

   midx = getmaxx()/2;
   midy = getmaxy()/2;

   setcolor(RED);
   settextstyle(SCRIPT_FONT, HORIZ_DIR, 3);
   settextjustify(CENTER_TEXT, CENTER_TEXT);
   outtextxy(midx, midy-10, "Traffic Light Simulation");
   outtextxy(midx, midy+10, "Press any key to start");
   getch();
   cleardevice();
   setcolor(WHITE);
   settextstyle(DEFAULT_FONT, HORIZ_DIR, 1);
   rectangle(midx-30,midy-80,midx+30,midy+80);
   circle(midx, midy-50, 22);
   setfillstyle(SOLID_FILL,RED);
   floodfill(midx, midy-50,WHITE);
   setcolor(BLUE);
   outtextxy(midx,midy-50,"STOP");
   delay(2000);
   graphdefaults();
   cleardevice();
   setcolor(WHITE);
   rectangle(midx-30,midy-80,midx+30,midy+80);
   circle(midx, midy, 20);
   setfillstyle(SOLID_FILL,YELLOW);
   floodfill(midx, midy,WHITE);
   setcolor(BLUE);
   outtextxy(midx-18,midy-3,"READY");

   delay(2000);
   cleardevice();
   setcolor(WHITE);
   rectangle(midx-30,midy-80,midx+30,midy+80);
   circle(midx, midy+50, 22);
   setfillstyle(SOLID_FILL,GREEN);
   floodfill(midx, midy+50,WHITE);
   setcolor(BLUE);
   outtextxy(midx-7,midy+48,"GO");
   setcolor(RED);
   settextstyle(SCRIPT_FONT, HORIZ_DIR, 4);
   outtextxy(midx-150, midy+100, "Press any key to exit...");

   getch();
   closegraph();
   return 0;
} 
```

# c++ - 在 C++ 类中使用字符串输出错误

> ID：16131154
> 
> 赞同：0
> 
> 时间：2013-04-21T12:35:06.327
> 
> 标签：c++, string, class

我想创建一个使用字符串库的 C++ 类。这是我的源代码：

测试.h：

```
#include <string>

class info {
public:
    // constructor
    info (string first_name, string last_name, int age);
    // deconstructor
    ~info ();

private:
    string first_name;
    string last_name;
    int age;

}; 
```

这是我的头辅助文件：test.cpp

```
#include <string>
#include "test.h"

info::info (string first_name, string last_name, int age) {
    this->first_name = first_name;
    this->last_name = last_name;
    this->age = age;

}
info::~info () {
} 
```

但是它给了我**语法错误：标识符“字符串”未定义**

这是为什么？我对 C++ 数据结构有点陌生

另外，我正在编译这是 Visual Studio 2012

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:35:57.580

在使用*限定名称*（命名空间中的标识符）时，您需要先`std::`拥有。`string`*`std`*

 *例如，您的构造函数应如下所示：

```
info (std::string const& first_name, std::string const& last_name, int age); 
```*

# c - 如何释放函数中分配的内存

> ID：16131155
> 
> 赞同：0
> 
> 时间：2013-04-21T12:35:14.700
> 
> 标签：c, unix, memory, malloc, free

正如本主题的主题。我有一个简单的功能：

```
char *to_str(int x)
{
    char *s = malloc(6);

    if (s == NULL) {
        error("malloc");
    }

    snprintf(s, sizeof(s), "%d", x);
    return s;
} 
```

它在它的主体中分配内存，并返回这样的值。我应该如何处理内存释放？最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T12:38:34.617

> 我应该如何处理内存释放？

小心。而且绝对比你现在做的更好。

> 最好的方法是什么？

最好的方法是`free()`当你不再需要它时记忆：

```
char *str = to_str(1337);
// do stuff with `str'
free(str); 
```

同样，这`sizeof()`是错误的。它为您提供指针的大小，而不是缓冲区的大小。您需要自己跟踪它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T12:36:09.703

调用代码需要使用以下方法释放内存`free()`：

```
void f(int x)
{
    char *s = to_str(x);
    // ...
    free(s);
} 
```

（顺便说一句，您有一个错误： in `to_str`，`sizeof(s)`是指针的大小，而不是指向的字符串的长度`s`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T14:51:26.123

The best is not to allocate memory inside function:

```
 char* to_str(char *buffer, size_t buffer_size, int x); 
```

this way you don't have to care about deallocation inside the function and everything is on the caller side.

If you want to create function with the signature you have in the question, you cannot use that in anything like `printf("%s", to_str(x))`, because this would be a memory leak. You have to make `char *str = to_str(x); printf("%s", str); free(str);` which is not nice...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T12:57:56.553

首先，`sizeof()`是一个运算符，它在括号中为您提供类型（变量类型）的字节长度。因此，您得到的不是分配的内存块的实际长度，而是指针的大小`s`，这通常不是您所期望的。

第二，在分配内存时，要了解它没有实际使用的时刻，并`free()`在它上面做。

另外，我不确定`5`符号+终止`0`是否足够长的字符串，因为如果字符串中的垃圾`x`会更长，那么您可能会破坏内存。

# gwt - GWT，RootPanel.get() 为空

> ID：16131156
> 
> 赞同：1
> 
> 时间：2013-04-21T12:35:16.637
> 
> 标签：gwt

我正在学习[http://www.tutorialspoint.com/gwt/gwt_style_with_css.htm](http://www.tutorialspoint.com/gwt/gwt_style_with_css.htm "教程点")上的初学者教程。HelloWorld.html 文件的代码是：

```
<html>
<head>
<title>Hello World</title>
   <link rel="stylesheet" href="HelloWorld.css"/>
   <script language="javascript" src="helloworld/helloworld.nocache.js">
   </script>
</head>
<body>

<div id="mytext"><h1>Hello, World!</h1></div>
<div id="gwtGreenButton"></div>
<div id="gwtRedButton"></div>

</body>
</html> 
```

在 HelloWorld.java（扩展入口点）中，我有：

```
RootPanel.get("gwtGreenButton").add(Btn1);
RootPanel.get("gwtRedButton").add(Btn2); 
```

2 行： RootPanel.get() 总是导致 null。我不知道发生了什么，要检查什么？（太糟糕了，该网站没有评论/讨论部分）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:28:28.153

文档说

[**RootPanel.get(java.lang.String id)**](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/DOM.html#getElementById%28java.lang.String%29)

> 获取与给定浏览器元素关联的根面板。

[**DOM.getElementById(java.lang.String)**](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/DOM.html#getElementById%28java.lang.String%29)

> 获取与整个文档中给定唯一 ID 关联的元素。

尝试

```
com.google.gwt.user.client.DOM.getElementById("gwtGreenButton");

com.google.gwt.user.client.DOM.getElementById("gwtRedButton"); 
```

# ruby-on-rails - Ubuntu 上的导轨安装错误

> ID：16131159
> 
> 赞同：0
> 
> 时间：2013-04-21T12:35:35.157
> 
> 标签：ruby-on-rails, ruby, gem

我正在尝试在 Ubuntu 11.04 上安装 Rail。我已经安装了 Ruby1.9.1 和 Gem1.3.7。当我输入：

```
gem install rails 
```

它返回以下错误：

```
ERROR:  While executing gem ... (ArgumentError)
invalid byte sequence in US-ASCII 
```

你有什么想法吗？

PS我很抱歉我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:08:01.423

我刚刚解决了。我犯了这个错误：我安装了 Ruby：

```
apt-get install ruby1.9.1 
```

而且该命令不是最佳选择（我不知道动机）。

我按照本[指南](https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm)在 Ubuntu 上安装 ruby​​，最后它可以工作了。

感谢您的所有解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:46:27.820

根据这篇文章：[当运行 bundle get invalid byte sequence in US-ASCII](https://stackoverflow.com/questions/7095845/when-run-bundle-get-invalid-byte-sequence-in-us-ascii)时，在 Gemfile 的顶部添加它应该可以修复它：

```
if RUBY_VERSION =~ /1.9/
  Encoding.default_external = Encoding::UTF_8
  Encoding.default_internal = Encoding::UTF_8
end 
```

# c# - 来自 Datagridview 的数据表（数据绑定）

> ID：16131161
> 
> 赞同：1
> 
> 时间：2013-04-21T12:35:53.887
> 
> 标签：c#, datagridview, datatable, bindingsource

我通过[msdn](http://msdn.microsoft.com/en-us/library/c12c1kx4.aspx) a 创建了两个 datagridviews 现在我需要从“detailsDataGridView”获取数据表，但我无法转换它。错误：无法将 System.Windows.Forms.BindingSource 强制转换为 System.Data.DataTable 类型。

任何想法？代码，我试过了。

```
 DataTable d = detailsDataGridView.DataSource as DataTable;
/////////////
        DataTable dt = new DataTable();
        dt = (DataTable)detailsDataGridView.DataSource;
////////////
        BindingSource bs = new BindingSource();
        bs.DataSource = detailsDataGridView.DataSource;
        DataTable d = (DataTable)(bs.DataSource);
////////////
DataTable data = GetDataTableFromDGV(dgvMyMembers);

    private DataTable GetDataTableFromDGV(DataGridView dgv)
    {
        var dt = ((DataTable)dgv.DataSource).Copy();
        foreach (DataGridViewColumn column in dgv.Columns)
        {
            if (!column.Visible)
            {
                dt.Columns.Remove(column.Name);
            }
        }
        return dt;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:46:34.047

试试这个方法，这就是你需要的：

> DataGridView 名称是 detailsDataGridView，因此您将执行以下操作：
> 
> 数据表数据 = GetDataTableFromDGV(detailsDataGridView);

那么数据就是数据表！

```
 private DataTable GetDataTableFromDGV(DataGridView dgv)
    {
        var dt = ((DataTable)dgv.DataSource).Copy();
        foreach (DataGridViewColumn column in dgv.Columns)
        {
            if (!column.Visible)
            {
                dt.Columns.Remove(column.Name);
            }
        }
        return dt;
    } 
```

[你可以在这里](https://stackoverflow.com/questions/16130605/datagrigview-convert-to-datatable/16130664#16130664)看到我对这个问题的回答

祝你好运！

# android - 实施 SelectAll 效果不佳

> ID：16131162
> 
> 赞同：0
> 
> 时间：2013-04-21T12:35:54.473
> 
> 标签：android, checkbox

我正在尝试实现一个全选复选框，onClick 将检查列表中的所有复选框。

在活动 onCreate 中，它会加载此布局。selectall 复选框将始终位于顶部的位置。

```
<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="50dp" >

    <CheckBox 
        android:id="@+id/cb_selectall" 
        android:text="@string/s_ab_selectall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    </CheckBox>
 </LinearLayout>

    <ListView
        android:id="@id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:cacheColorHint="#0000"
        android:clipToPadding="true"
        android:dividerHeight="1dp"
        android:scrollbars="none"
        android:soundEffectsEnabled="true" >
    </ListView> 
```

这是我尝试使用 setOnCheckedChangeListener 实现全选的适配器。

```
public class MyMediaAdapter extends ArrayAdapter<Media> {

        private final List<Media> list;
        private final Activity context;

        public MyMediaAdapter(Activity context, List<Media> list) {
            super(context, R.layout.media_view, list);
            this.context = context;
            this.list = list;
        }

        private class ViewHolder {
            protected TextView fName, fSub, fDuration, fSize;
            protected CheckBox checkbox;
            // protected CheckBox checkbox1;
        }

        @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;
        // Moved here to ensure the checkbox is persistent
        ViewHolder viewHolder = new ViewHolder();
        if (convertView == null) {
            LayoutInflater inflator = context.getLayoutInflater();
            view = inflator.inflate(R.layout.media_view, null);
            // Moved out of the if-else to solve the problem
            // view being recycled each time it scrolls
            // final ViewHolder viewHolder = new ViewHolder();
            viewHolder.fName = (TextView) view.findViewById(R.id.tvfname);
            viewHolder.fSub = (TextView) view.findViewById(R.id.tvsub);
            viewHolder.fDuration = (TextView) view.findViewById(R.id.tvduration);
            viewHolder.fSize = (TextView) view.findViewById(R.id.tvsize);
            viewHolder.checkbox = (CheckBox) view.findViewById(R.id.check);

            // viewHolder.checkbox.setId(position);
            viewHolder.checkbox.setOnClickListener(new OnClickListener() {  
                public void onClick(View v) {  
                    // TODO Auto-generated method stub  
                    CheckBox cb = (CheckBox) v;  
                    int id = cb.getId();  
                    if (selection[id]) {  
                        cb.setChecked(false);  
                        selection[id] = false; 
                        list.get(id).setSelected(false);
                    } else {  
                        cb.setChecked(true);  
                        selection[id] = true;  
                        list.get(id).setSelected(true);
                    }  
                }  
            });  

            view.setTag(viewHolder);
            // Moved out of the if-else to solve the problem
            // view being recycled each time it scrolls
            // viewHolder.checkbox.setTag(list.get(position));
        } else {
            view = convertView;
            // Moved out of the if-else to solve the problem
            // view being recycled each time it scrolls
            // ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));
            viewHolder = (ViewHolder) view.getTag();
        }

        final CheckBox checkbox1 = (CheckBox) findViewById(R.id.cb_selectall);

        checkbox1.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton button, boolean checked) {
                // TODO Auto-generated method stub

                if (checked) {
                    checkbox1.setText("Click to Deselect All");

                    for (int i = 0; i < getMediaList.size(); i++) {
                        selection[i] = true;
                        list.get(i).setSelected(true);
                    }
                } else {
                    checkbox1.setText("Click to Select All");

                    for (int i = 0; i < getMediaList.size(); i++) {
                        selection[i] = false;
                        list.get(i).setSelected(false);
                    }
                }
                Toast.makeText(getApplicationContext(), "this " +checked, Toast.LENGTH_LONG).show();
            }

        });

        // Moved here to ensure the checkbox is persistent
        viewHolder.checkbox.setId(position);
        viewHolder.checkbox.setTag(list.get(position));

        ViewHolder holder = (ViewHolder) view.getTag();
        holder.fName.setText(list.get(position).getName());
        holder.fSub.setText(list.get(position).getPath());
        // Converting duration from String to Long
        long milli = Long.valueOf(list.get(position).getDuration());
        // Put it in % min, % sec format to display
        holder.fDuration.setText(util.readableTime(milli));
        // Convert data size from String to Long
        long datasize = Long.valueOf(list.get(position).getData());
        // Put in human readable format
        holder.fSize.setText(util.readableFileSize(datasize));
        holder.checkbox.setChecked(list.get(position).isSelected());
        return view;
    }
    } 
```

问题是，当我勾选全选复选框时，我能够获取列表中的项目，就在视图本身中，单个复选框仅在我向下滚动时显示。当我选中全选复选框时，它不会立即得到检查。

更新：我通过简单地调用 notifyDataSetChanged(); 解决了我的问题；在 checkchangelistener 之后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:35:54.747

使您的父布局为相对布局，然后在您的全选复选框中添加此属性，

```
android:layout_alignParentTop="true" 
```

# directx - slimDx 中缺少 SetIndices

> ID：16131163
> 
> 赞同：0
> 
> 时间：2013-04-21T12:35:55.833
> 
> 标签：directx, direct3d, slimdx

我正在使用 SLIMDX 的 direct3d9，但是我找不到 Device 的 SetIndices() 方法。

```
device.BeginScene();
device.SetStreamSource(0, VB, 0, 3 * sizeof(float));
device.SetIndices(IB); // This method is missing !
device.DrawIndexedPrimitives(PrimitiveType.TriangleList, 0, 0, 8, 0, 12);
device.EndScene(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:38:45.107

哎呀。

应该使用 device.Indices = IB; 反而。

# objective-c - 什么是 class_setIvarLayout 和 class_getIvarLayout？

> ID：16131172
> 
> 赞同：7
> 
> 时间：2013-04-21T12:37:04.730
> 
> 标签：objective-c, objective-c-runtime

我正在尝试在运行时动态创建 objc 类，我需要`Ivar`在创建的类中添加一些。我发现`class_addIvar`which 应该做我想做的事，但我也发现了这些功能：

*   `class_setIvarLayout`
*   `class_getIvarLayout`
*   `class_getWeakIvarLayout`
*   `class_setWeakIvarLayout`

该文档并没有真正说明有关这些方法的任何有用信息，我也无法从网上找到任何有用的解释。那么它们是什么？如果我想做一些事情，我需要使用它们`Ivar`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T16:03:11.363

The `class_*IvarLayout` methods are used by the garbage collector (if/when you're using it) to determine which areas of an object's memory need to be scanned for strong/weak references.

It's unlikely you'll ever need to call these methods; the appropriate layouts are generated when you call `objc_registerClassPair`.

# kineticjs - Kinetic.js - 通过鼠标指针绘制手绘线

> ID：16131177
> 
> 赞同：1
> 
> 时间：2013-04-21T12:38:21.693
> 
> 标签：kineticjs

我是 Javascript 和 Kinetics 的新手，我需要实现一个函数来使用 Kinetics.Js 绘制手绘线。我找到了这个示例，但仅适用于开始和端点。我将通过鼠标指针实时绘制...我不知道如何更改功能或推送一些新坐标...

你有想法吗？

```
var moving = false;

function createLine() {
    line = new Kinetic.Line({
        points: [0, 0, 0, 0],
        stroke: "red",
        strokeWidth: 2,
        id: 'line',
        name: 'line',
        draggable: true
    });
    lineLayer.add(line);
    addHoverEffect(lineLayer, line);
    lineLayer.draw();
}

function drawLine() {
    stage.on("mousedown touchstart", function () {
        createLine();

        if (moving) {
            moving = false;
            lineLayer.draw();
        } else {
            var pos = stage.getPointerPosition();

            //start point and end point are the same
            line.getPoints()[0].x = parseInt(pos.x);
            line.getPoints()[0].y = parseInt(pos.y);
            line.getPoints()[1].x = parseInt(pos.x);
            line.getPoints()[1].y = parseInt(pos.y);

            moving = true;
            lineLayer.drawScene();
        }
    });
    stage.on("mousemove touchmove", function () {
        if (moving) {

            var pos = stage.getPointerPosition();

            line.getPoints()[1].x = parseInt(pos.x);
            line.getPoints()[1].y = parseInt(pos.y);
            moving = true;
            lineLayer.drawScene();
        }
    });
    stage.on("mouseup touchend", function () {
        moving = false;
        removeLineDrawEvents();
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T17:32:56.410

**你在正确的轨道上。以下是您需要了解的更多信息：**

舞台不会发出鼠标事件，因此`stage.on(“mousedown” …)`无法正常工作。

相反，创建一个填充整个舞台的背景矩形。这个背景矩形**可以**发出鼠标事件。

```
var background = new Kinetic.Rect({
    x: 0,
    y: 0,
    width: stage.getWidth(),
    height: stage.getHeight(),
    fill: 'white',
    stroke: 'black',
    strokeWidth: 1,
}) 
```

背景是侦听舞台范围鼠标事件的简单方法。但是，有**一种**方法可以在没有背景的情况下监听舞台鼠标事件。在这里讨论： [Detecting a Click on Stage but not on Shape in KineticJS](https://stackoverflow.com/questions/13902747/detecting-a-click-on-stage-but-not-on-shape-in-kineticjs)

要将您的单线变成“折线”，请维护一个您想要在您的线上的线段的外部数组，然后将您的线的 points 属性设置为该数组

```
var points=[];
points.push( …another line segment endpoint…);
 myLine.setPoints(points); 
```

然后做你正在做的事情！

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/42RHD/](http://jsfiddle.net/m1erickson/42RHD/)

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Prototype</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.3-beta.js"></script>

<style>
#container{
  border:solid 1px #ccc;
  margin-top: 10px;
}
</style>        
<script>
$(function(){

        // create a stage and a layer
        var stage = new Kinetic.Stage({
            container: 'container',
            width: 400,
            height: 400
        });
        var layer = new Kinetic.Layer();
        stage.add(layer);

        // an empty stage does not emit mouse-events
        // so fill the stage with a background rectangle
        // that can emit mouse-events
        var background = new Kinetic.Rect({
            x: 0,
            y: 0,
            width: stage.getWidth(),
            height: stage.getHeight(),
            fill: 'white',
            stroke: 'black',
            strokeWidth: 1,
        })        
        layer.add(background);
        layer.draw();

        // a flag we use to see if we're dragging the mouse
        var isMouseDown=false;
        // a reference to the line we are currently drawing
        var newline;
        // a reference to the array of points making newline
        var points=[];

        // on the background
        // listen for mousedown, mouseup and mousemove events
        background.on('mousedown touchstart', function(){onMousedown();});
        background.on('mouseup touchend', function(){onMouseup();});
        background.on('mousemove touchmove', function(){onMousemove();});

        // On mousedown
        // Set the isMouseDown flag to true
        // Create a new line,
        // Clear the points array for new points
        // set newline reference to the newly created line
        function onMousedown(event) {
            isMouseDown = true;
            points=[];
            points.push(stage.getMousePosition());
            var line = new Kinetic.Line({
                points: points,
                stroke: "red",
                strokeWidth: 5,
                lineCap: 'round',
                lineJoin: 'round'
            });
            layer.add(line);
            newline=line;
        }

        // on mouseup end the line by clearing the isMouseDown flag
        function onMouseup(event) {
            isMouseDown=false;
        }

        // on mousemove
        // Add the current mouse position to the points[] array
        // Update newline to include all points in points[]
        // and redraw the layer
        function onMousemove(event) {
            if(!isMouseDown){return;};
            points.push(stage.getMousePosition());
            newline.setPoints(points);
            layer.drawScene();
        }

}); // end $(function(){});

</script>       
</head>

<body>
    <div id="container"></div>
</body>
</html> 
```

# c# - C# 类的属性包

> ID：16131180
> 
> 赞同：4
> 
> 时间：2013-04-21T12:38:37.640
> 
> 标签：c#, reflection, properties, indexer, propertybag

访问像 javascript 语言这样的 c# 类属性会让生活变得更轻松。

我们如何在 C# 中做到这一点？

例如：

```
someObject["Property"]="simple string";
Console.WriteLine(someObject["FirstName"]); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T12:38:37.640

以下是如何通过添加几行代码在类中启用类似属性包的功能：

```
partial class SomeClass
{
    private static readonly PropertyDescriptorCollection LogProps = TypeDescriptor.GetProperties(typeof(SomeClass));

    public object this[string propertyName]
    {
        get { return LogProps[propertyName].GetValue(this); }
        set { LogProps[propertyName].SetValue(this, value); }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T12:59:39.343

您可以从`Dictionary<string, object>`. 但是，您可以简单地使用 JavaScript 而不是滥用 C#。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-30T18:14:28.987

这段代码可以工作

```
dynamic user= new ExpandoObject();
user.name = "Anonymous";
user.id=1234
user.address="12 broad way"
user.State="NY" 
```

导入 System.Dynamic 命名空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T12:44:15.623

[`dynamic`](http://msdn.microsoft.com/en-us/library/vstudio/dd264741.aspx)可以改用关键字。[在这里](https://dotnetfiddle.net/UDOY88)尝试自己

```
using System;
using System.Dynamic;

public class Program
{
    public static void Main()
    {
        dynamic foo = new ExpandoObject();
        foo.Property = "simple string";
        Console.WriteLine(foo.Property);
    }
} 
```

# android - Android 自动删除最后 2 分钟视频流之前的所有内容

> ID：16131183
> 
> 赞同：1
> 
> 时间：2013-04-21T12:38:49.343
> 
> 标签：android, camera

我想制作一个记录视频流的 android 应用程序，当用户不**按下**按钮时，视频流最后 120 秒之前的所有内容都会被删除。这应该运行几个小时，所以只有 ~50mb 一直在使用。有没有人知道如何录制视频，比如永无止境的数据流，让我可以访问某些点并删除这些点之前的所有内容？

我知道这个问题很笼统，但我发现很难访问靠近硬件的 android 相机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:53:44.133

如果不出意外，您可能会遇到文件大小限制。

更好的方法是继续录制 30 秒的视频，并删除任何超过两分钟的视频，直到用户按下“录制”按钮，此时您开始保留它们。

然后将它们拼接成一个长视频。

顺便说一句，这会耗尽你的电池。我假设你有能力处理这个问题。

# android - 将环境光传感器添加到 cordova-2.5.0.js - phonegap

> ID：16131187
> 
> 赞同：0
> 
> 时间：2013-04-21T12:39:15.063
> 
> 标签：android, cordova, phonegap-plugins

我必须使用 phongap 开发一个从设备检索传感器数据的 Android 应用程序。

我必须听的传感器之一是环境光传感器。这个传感器在 phoneGap 中没有实现，所以我必须将它作为插件添加到 PhoneGap。

我知道如何添加插件，我知道如何从 Java 访问 ALS 数据 - 但为了确保我很好地实现它，我想实现它，因为 PhoneGap 实现了其他传感器，如 Accelerometer。因此，我在 java 中编写了一个`ALSManager`类，当我发现 Accelerometer 在这里实现时，我实现了该类：

> [https://github.com/apache/cordova-android/blob/master/framework/src/org/apache/cordova/AccelListener.java](https://github.com/apache/cordova-android/blob/master/framework/src/org/apache/cordova/AccelListener.java)

并添加了 lightSensor 和 lightValues 模块，如加速器和加速模块。

但是当我运行此应用程序时，我收到以下错误消息：

> 类型错误：对象 # 没有方法 'getCurrentLight'

（并且在 lightSensor 模块中我有 getCurrentLight 方法）。

有人可以建议我缺少什么吗？或者我该怎么办？

提前致谢，

* * *

我在cordova-2.5.0.js 中添加的代码。如果还不够，请告诉我：

```
 // file: lib/common/plugin/LightValues.js
define("cordova/plugin/LightValues", function(require, exports, module) {

var Acceleration = function(lux, timestamp) {
    this.lux = lux;
    this.timestamp = timestamp || (new Date()).getTime();
};

module.exports = LightValues;

});
// file: lib/common/plugin/lightSensor.js
define("cordova/plugin/lightSensor", function(require, exports, module) {

/**
 * This class provides access to device accelerometer data.
 * @constructor
 */
var argscheck = require('cordova/argscheck'),
    utils = require("cordova/utils"),
    exec = require("cordova/exec"),
    LightValues = require('cordova/plugin/LightValues');

// Is the accel sensor running?
var running = false;

// Keeps reference to watchAcceleration calls.
var timers = {};

// Array of listeners; used to keep track of when we should call start and stop.
var listeners = [];

// Last returned acceleration object from native
var light = null;

// Tells native to start.
function start() {
    exec(function(a) {
        var tempListeners = listeners.slice(0);
        light = new LightValues(a.lux, a.timestamp);
        for (var i = 0, l = tempListeners.length; i < l; i++) {
            tempListeners[i].win(light);
        }
    }, function(e) {
        var tempListeners = listeners.slice(0);
        for (var i = 0, l = tempListeners.length; i < l; i++) {
            tempListeners[i].fail(e);
        }
    }, "Light", "start", []);
    running = true;
}

// Tells native to stop.
function stop() {
    exec(null, null, "Light", "stop", []);
    running = false;
}

// Adds a callback pair to the listeners array
function createCallbackPair(win, fail) {
    return {win:win, fail:fail};
}

// Removes a win/fail listener pair from the listeners array
function removeListeners(l) {
    var idx = listeners.indexOf(l);
    if (idx > -1) {
        listeners.splice(idx, 1);
        if (listeners.length === 0) {
            stop();
        }
    }
}

var lightSensor = {
    /**
     * Asynchronously acquires the current acceleration.
     *
     * @param {Function} successCallback    The function to call when the acceleration data is available
     * @param {Function} errorCallback      The function to call when there is an error getting the acceleration data. (OPTIONAL)
     * @param {AccelerationOptions} options The options for getting the accelerometer data such as timeout. (OPTIONAL)
     */
    getCurrentLight: function(successCallback, errorCallback, options) {
        //argscheck.checkArgs('fFO', 'lightSensor.getCurrentLight', arguments);

        var p;
        var win = function(a) {
            removeListeners(p);
            successCallback(a);
        };
        var fail = function(e) {
            removeListeners(p);
            errorCallback && errorCallback(e);
        };

        p = createCallbackPair(win, fail);
        listeners.push(p);

        if (!running) {
            start();
        }
    },

    /**
     * Asynchronously acquires the acceleration repeatedly at a given interval.
     *
     * @param {Function} successCallback    The function to call each time the acceleration data is available
     * @param {Function} errorCallback      The function to call when there is an error getting the acceleration data. (OPTIONAL)
     * @param {AccelerationOptions} options The options for getting the accelerometer data such as timeout. (OPTIONAL)
     * @return String                       The watch id that must be passed to #clearWatch to stop watching.
     */
    watchLight: function(successCallback, errorCallback, options) {
        //argscheck.checkArgs('fFO', 'lightSensor.watchLight', arguments);
        // Default interval (10 sec)
        var frequency = (options && options.frequency && typeof options.frequency == 'number') ? options.frequency : 10000;

        // Keep reference to watch id, and report accel readings as often as defined in frequency
        var id = utils.createUUID();

        var p = createCallbackPair(function(){}, function(e) {
            removeListeners(p);
            errorCallback && errorCallback(e);
        });
        listeners.push(p);

        timers[id] = {
            timer:window.setInterval(function() {
                if (light) {
                    successCallback(light);
                }
            }, frequency),
            listeners:p
        };

        if (running) {
            // If we're already running then immediately invoke the success callback
            // but only if we have retrieved a value, sample code does not check for null ...
            if (light) {
                successCallback(light);
            }
        } else {
            start();
        }

        return id;
    },

    /**
     * Clears the specified accelerometer watch.
     *
     * @param {String} id       The id of the watch returned from #watchAcceleration.
     */
    clearWatch: function(id) {
        // Stop javascript timer & remove from timer list
        if (id && timers[id]) {
            window.clearInterval(timers[id].timer);
            removeListeners(timers[id].listeners);
            delete timers[id];
        }
    }
};

module.exports = lightSensor;

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T14:41:21.187

我认为问题可能在于您正在将插件代码添加到`cordova-2.5.0.js`文件中。相反，您应该为每个 JavaScript 文件创建一个独立的 JS 文件，然后`cordova.require()`在 HTML 页面中要使用该功能的那些文件。

因此，在您的 www 文件夹中的某处创建`LightValues.js`并作为单独的文件。`LightSensor.js`然后在您的 HTML 文件中，确保包含 JS 文件：（`<script type="text/javascript" src="path-to-lightSensor.JS-file">`您只需要包含这个文件，因为它需要（）第二个文件。）

接下来，在`deviceReady()`函数中，您可以使用 调用光传感器`var lightSensor = cordova.require("cordova/plugin/lightSensor")`。请注意，**cordova/plugin/lightSensor**不是 JS 文件的路径，而是您在`define()`编写插件时在该部分中声明的模块的名称。

在此之后，您应该能够调用 lightSensor.getCurrentLight()。如果您`console.log(lightSensor)`希望看到您编写的所有可用方法。

请注意，我对此并不肯定，`cordova.require`并且`cordova.define`在 cordova-2.5 中工作。我希望他们这样做，但[这个页面有点暗示它可能直到 2.6 才受支持](https://github.com/phonegap/phonegap-plugins/wiki/Wrapping-your-Plugin%27s-JavaScript)。如果您在拆分文件后遇到问题，可能是因为这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T04:11:37.830

我刚刚开发了一个光传感器插件，幸运的是成功了。我刚刚阅读了上面的代码，发现了一些关于标识符的小错误，例如“var Acceleration = function(lux, timestamp)”，变量应该是 LightValues 而不是 Acceleration。所以请先检查代码以避免一些基本错误。然后，我首先使用“lux”作为变量的名称，但是在调试程序时我得到了一个未定义的 light 值。所以我将“lux”更改为“x”，它确实有效！

有 6 个文件需要注意：“LightListener.java”、“LightValues.js”、“LightSensor.js”、“cordova_plugin.js”、“index.html”和“config.xml”。如果您配置所有 6 个文件，该程序应该可以工作。

# vim - Vim - 删除直到找到模式，但方向相反

> ID：16131189
> 
> 赞同：4
> 
> 时间：2013-04-21T12:39:19.017
> 
> 标签：vim

我知道如何删除从光标位置到出现模式的部分文本，我的意思是`d``/<pattern>`。我想知道如何在光标位置之前删除部分文本，直到出现光标位置之前的模式。

在文件中的位置 x：

```
>>>>
aaaa
===x
bbbb
<<<< 
```

我要删除

```
>>>>
aaaa
==== 
```

如果模式在文件中只存在一次，这是可行的......并且 vim 没有选择。但是这样的文件存在问题：

```
>>>>
aaaa
====
bbbb
<<<<

foo
boo

>>>>
cccc
====
dddd
<<<< 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T13:01:39.060

您可以使用 向后搜索`?`。所以要删除直到一个模式，使用`d``?<pattern>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-18T08:44:34.103

可以使用 f 或 t 提前删除。例如，d2f_ 最多删除第二个下划线（包括第二个下划线），d2t_ 最多删除第二个下划线，但不包括第二个下划线。我刚刚在运行你知道什么的机器上尝试了 gVim，如果你将 f 或 t 大写，它会反向工作。因此 d2F_ 将删除 BACK TO 并包括倒数第二个下划线，而 d2T_ 将删除 BACK TO 但不包括倒数第二个下划线。

我很高兴找到了这个，我可以按一下我的脸颊腺体。

# php - Kohana 助手不起作用

> ID：16131192
> 
> 赞同：0
> 
> 时间：2013-04-21T12:39:41.243
> 
> 标签：php, kohana

我对 PHP 框架完全陌生。我一直试图让助手整个上午都工作，但他们拒绝这样做。我需要以某种方式启用它们吗？还是安装它们？

当我做：

```
<?php defined('SYSPATH') or die('No direct script access.');

class Controller_Api extends Controller {

    public function action_index()
    {
        echo url::base();
    } 
```

去：

```
myurl/api 
```

我得到：

> ErrorException [致命错误]：找不到类“Url”

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T18:34:36.100

由于 3.3 版本的类名区分大小写，因此您需要的是：

```
echo URL::base(); 
```

# c# - SQL Server CE Code First 迁移问题

> ID：16131193
> 
> 赞同：7
> 
> 时间：2013-04-21T12:39:55.690
> 
> 标签：c#, .net, visual-studio, entity-framework, entity-framework-migrations

我在尝试为我的桌面 .NET 应用程序的 SQL Server Compact 4.0 数据库启用（代码优先）迁移时遇到了一堆问题。

`Enable-Migrations`确实有效并`Migrations`创建了目录。之后，当我尝试运行时`Add-Migration InitialMigration`，我得到：

> 不允许访问数据库文件。[ 1914，文件名 = Logo.sdf，SeCreateFile ]

这是第一个问题，但我通过以管理员身份运行 Visual Studio 解决了这个问题……不喜欢那个解决方案，也不知道以后在生产中它是否可以在没有以管理员模式运行应用程序的情况下工作。我暂时把这个问题放在一边……

我的连接字符串：

```
<add name="LogoContext" 
     connectionString="Data Source=Logo.sdf" 
     providerName="System.Data.SqlServerCE.4.0"/>` 
```

所以`Add-Migration InitialMigration`在管理员模式下运行后，我得到一个空迁移......没关系。然后我删除迁移并添加一个新类：

```
using System;
using System.Collections.Generic;

public class Blog
{
    public int ID { get; set; }
    public string Title { get; set; }
} 
```

我添加了对上下文类的引用：

```
public class LogoContext : DbContext
{
    public DbSet<Word> Words { get; set; }
    public DbSet<User> Users { get; set; }
    public DbSet<Blog> Blogs { get; set; }
} 
```

然后`Add-Migration InitialMigration`再次运行并得到：

```
public partial class InitialMigration : DbMigration
{
    public override void Up()
    {
        CreateTable(
            "dbo.Blogs",
            c => new
                {
                    ID = c.Int(nullable: false, identity: true),
                    Content = c.String(maxLength: 4000),
                })
            .PrimaryKey(t => t.ID);
    }

    public override void Down()
    {
        DropTable("dbo.Blogs");
    }
} 
```

运行后`Update-Database`我看到：

```
Applying code-based migrations: [201304211225255_InitialMigration].
Applying code-based migration: 201304211225255_InitialMigration.
Running Seed method. 
```

现在问题出现了 - 在我的服务器资源管理器中，我检查了数据库`Logo.sdf`，但它**不**包括表`Blogs`！我什至尝试从我的应用程序运行此代码：

```
var db = new LogoContext();
db.Posts.Add(new Blog { Title= "moo" });
db.SaveChanges(); 
```

检查我的服务器资源管理器是否没有显示表格..但我得到一个例外：

> 指定的表不存在。[ 博客 ]

所以迁移显然没有应用于我的`Logo.sdf`文件:(

如果我从 中删除连接字符串`app.config`，则假定连接到 SQL Server Express 的本地实例。它在那里完美地工作！当我使用 SQL Server Management Studio 检查数据库时，我看到了新`Blogs`表以及有关迁移元数据的系统表...

另一个小信息：

当我再次尝试运行`Update-Database`时，我得到“没有挂起的基于代码的迁移”。`Logo.sdf`这告诉我一些数据毕竟被保存到......至少有一些关于迁移的元数据，但我仍然无法在服务器资源管理器中看到该表。

我正在使用 VS 2012 和 EF 5.0。

请帮助我理解这一点......在我看来，有些地方是严重错误的，因为它只适用于 SQL Server Express 实例，但不适用于 SQL Server CE 4.0。:((

谢谢！大卫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T20:16:16.533

所以问题是解决方案在这里创建了一个单独的 .sdf 文件：

> “C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Logo.sdf”

这是出乎意料和奇怪的恕我直言......

我最终使用了这个连接字符串：

```
<add name="LogoContext" connectionString="Data Source=|DataDirectory|\Logo.sdf" providerName="System.Data.SqlServerCE.4.0"/> 
```

这引用了 bin/Debug/Logo.sdf，它在开发期间和单独运行 .exe 时工作。

这种方式唯一的问题是我的 Logo.sdf 项目文件（它被复制到 Debug “如果更新”）现在完全被忽略了。所有迁移都将在调试文件上运行.. 这可能也很好....

感谢 Erik 的提示！大卫

# robot - Lego NXT-RobotC 超声波传感器

> ID：16131194
> 
> 赞同：0
> 
> 时间：2013-04-21T12:39:57.493
> 
> 标签：robot, nxt, lego

我是编程新手，所以我需要超声波传感器驱动的 NXT 机器人的帮助。它连接到电机（A），我希望它以 30° 的增量（总共七次测量）从机器人的中心线向左 90° 和向右 90° 扫描房间，将数据存储到数组中并基于最大距离将我的机器人指向进行测量的方向以避免障碍物。这可能吗？还是有更好的解决方案？任何建议或建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T15:28:17.767

我建议将超声波传感器连接到垂直的 180° 伺服系统上。您可以通过将该度数分配给伺服系统来进行特定度数的测量。使用这个：

```
int largestDistance = 0;
int Angle =0;    

for (int servovalue = 0; servovalue <= 255; rotateAngle += 30){
        Servo[servo1] = servovalue;
        if (SensorValue[Sonar] > largestDist) {
            largestDist = SensorValue[Sonar];
            Angle = servovalue;
        }
    }
    return Angle;
} 
```

它假定servo1 是您的垂直伺服，但如果您在RobotC 中编程，这应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:56:10.120

这在一定程度上可以避免障碍物，至于实现它，这取决于您对机器人进行编程。我只知道 lejos(java)，其中获取角度的函数类似于：

```
public static int scanArea(RegulatedMotor motorTop, UltrasonicSensor sonar) {
    int theAngle = 0;
    int largestDist = 0;
    int currentDist;
    for (int rotateAngle = -90; rotateAngle <= 90; rotateAngle += 30) {
        motorTop.rotateTo(rotateAngle);
        currentDist = sonar.getDistance();
        if (currentDist > largestDist) {
            largestDist = currentDist;
            theAngle = rotateAngle;
        }
        Delay.msDelay(25);
    }
    motorTop.rotateTo(0);
    return theAngle;
} 
```

如果您使用任何应该很容易转换的基于代码的语言对机器人进行编码（假设您具有诸如 rotateTo 之类的功能，否则您将不得不使用相对运动）。否则，我不知道在您最初使用的图形编程语言中做到这一点有多容易。

# paypal - paypal notify_url 是空的，即使它是在表单上传递的

> ID：16131197
> 
> 赞同：2
> 
> 时间：2013-04-21T12:40:28.350
> 
> 标签：paypal, paypal-ipn

imn 提交此表单以发送用户进行定期付款注册

```
 <form name='_xclick' id='_xclick' action='https://www.paypal.com/cgi-bin/webscr' method='post'>
        <input type='hidden' name='cmd' value='_xclick-subscriptions'>
        <input type='hidden' name='business' value='xxxxx@gmail.com'>
        <input type='hidden' name='currency_code' value='EUR'>
        <input type='hidden' name='no_shipping' value='1'>
        <input type='hidden' name='a3' value='90.00'>
        <input type='hidden' name='p3' value='1'>
        <input type='hidden' name='t3' value='M'>
        <input type='hidden' name='custom' value='customerId=F5C311'>
        <input type='hidden' name='src' value='1'>
        <input type='hidden' name='sra' value='1'>
        <input type='hidden' name='item_name' value='xxxxx'>
        <input type='hidden' name='cancel_return' value='http://www.xxxxxx.com/package-success?pplstatus=0&amp;customerId=F5C311'>
        <input type='hidden' name='return' value='http://www.xxxxxx.com/package-success?pplstatus=1&amp;customerId=F5C311'>
        <input type='hidden' name='notify_url' value='http://www.xxxxxx.com/package-success?pplstatus=IPN&amp;pplstatus=0&amp;customerId=F5C311'>
        <input type='hidden' name='rm' value='2'>
      </form>
    <script>document.forms['_xclick'].submit();</script> 
```

由于某种神秘的原因，当我检查 PayPal IPN 历史记录时，通知 URL 为空，当然，我的系统上没有处理付款（附加 PayPal 消息信息）。消息传递已启用，并且作为 URL 我写了[http://www.xxxxxxx.com/?pplstatus=IPN](http://www.xxxxxxx.com/?pplstatus=IPN)

![贝宝 IPN 消息信息](https://i.stack.imgur.com/ktqs3.png)

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:27:47.993

这是我们目前正在努力解决的已知问题。IPN 消息仍将正常发送，但 IPN 历史记录页面可能无法反映正确的状态/notify_url 详细信息。

**编辑：**截至 29/04 已解决此问题。如果您遇到任何进一步的问题，请告诉我。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T18:37:57.133

我有类似的问题，我在这里描述过：

[https://stackoverflow.com/questions/16174275/why-paypal-does-not-call-my-notify-url-but-on-sandbox-everything-works](https://stackoverflow.com/questions/16174275/why-paypal-does-not-call-my-notify-url-but-on-sandbox-everything-works)

但是我的状态是 Retrying 并且我的 IPN 没有被调用。我真的不知道发生了什么事。

# dom - AngularJS DOM 更新循环进度

> ID：16131198
> 
> 赞同：2
> 
> 时间：2013-04-21T12:40:28.507
> 
> 标签：dom, for-loop, angularjs

我有许多 AJAX 调用需要为数组中的每个条目运行，我试图提供一些关于通过数组的循环进度的视觉反馈，模型正在正确更新但我没有看到试图在循环中调用 $digest 的视图中更新的任何内容都不会影响 DOM。

我尝试将 $apply 添加到内部循环中的函数，但我仍然没有看到任何变化。

```
$scope.UploadEntry = function(item){
var oDBGet = new htmldb_Get(null, 
                            $v('pFlowId'), 
                            "APPLICATION_PROCESS=UploadTargetDates", 
                            $v('pFlowStepId'));

oDBGet.add('EX_TRD',$scope.Ext.TRDDate.val);
oDBGet.add('EX_MAX_TRD',$scope.Ext.MaxTRDDate.val);
oDBGet.add('EX_READ',Ext.ReadDownloadCheck);
oDBGet.get();
};

$scope.ShowUploadModal = true;
$scope.UploadDone = 0;
for(i in submissionList)
{
        $scope.UploadEntry(submissionList[i]);
        $scope.UploadDone += 1;
}
$scope.ShowUploadModal = false; 
```

但观点：

```
<div class="UploadModal" ng-show="ShowUploadModal">
Uploading entries: {{UploadDone}} complete
</div> 
```

从未见过条目已上传，但如果我 `$scope.ShowUploadModal = false;`从循环末尾取出，它会显示在循环末尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:52:16.153

**更新**

经过讨论，作者声明http请求是同步的。问题仍然是关于“同步性”，但有点棘手。看看[Angular 摘要概念](http://docs.angularjs.org/guide/scope)。它基本上一遍又一遍地运行所有的观察者、表达式（绑定）和进程`$evalAsync`，直到观察者的结果和表达式不再发生变化。就在这之后，DOM 被更新。

因此，问题在于您的所有同步请求都在摘要周期结束之前得到解决，并且 DOM 渲染只会在摘要周期完成处理后发生。

解决您的问题的最简单方法，正如您所说，您不能更改 API 来调用异步，是**确保您的请求是异步的**，获取他们的承诺，并且仅在所有请求都完成后隐藏 uploadModal（这可以通过承诺来实现API，阅读[承诺 API](http://docs.angularjs.org/api/ng.%24q)和[`$timeout`](http://docs.angularjs.org/api/ng.%24timeout))。像这样：

```
var loadingPromises = [];

$scope.ShowUploadModal = true;
$scope.UploadDone = 0;

for(i in submissionList) {
  loadingPromises.push($timeout((function(index) {
    return function() {
      $scope.UploadEntry(submissionList[index]);
      $scope.UploadDone += 1;
    };
  })(i), 0));
}

$q.all(loadingPromises).then(function() {
  $scope.ShowUPloadMOdel = false;
}); 
```

请注意我创建的闭包以确保将正确的索引传递给请求，并且您需要向`$q`控制器注入服务。尽管这将解决您的问题，**但您应该创建一个服务**并将您的加载逻辑移到那里，返回一个承诺（将您的 $scope 引用更改为参数）：

```
app.service('yourLoaderService', function($timeout) {
  this.load = function(url) {
    return $timeout(function() {
      var oDBGet = new htmldb_Get(null, 
                        $v('pFlowId'), 
                        "APPLICATION_PROCESS=UploadTargetDates", 
                        $v('pFlowStepId'));

      oDBGet.add('EX_TRD',$scope.Ext.TRDDate.val);
      oDBGet.add('EX_MAX_TRD',$scope.Ext.MaxTRDDate.val);
      oDBGet.add('EX_READ',Ext.ReadDownloadCheck);
      oDBGet.get();
    }, 0);
  };
}); 
```

和你的控制器：

```
var loadingPromises = [];

$scope.ShowUploadModal = true;
$scope.UploadDone = 0;

for(i in submissionList) {
  var promise = yourLoaderService.load(submissionList[i]).then(function() {
    $scope.UploadDone++;
  });

  loadingPromises.push(promise);
}

$q.all(loadingPromises).then(function() {
  $scope.ShowUPloadMOdel = false;
}); 
```

* * *

**第一个答案**

这是一个概念错误。你好像来自同步服务器端背景，可能是Python，我不知道。如果这是您的真实代码，那么问题在于您的代码是完全同步的。您正在显示上传模型，循环所有条目并隐藏模型，并且整个代码在 DOM 被渲染一次之前发生在几毫秒（或更短）内。

发生这种情况是因为当您请求上传时，Javascript 不会在上传过程中挂起，它只是请求并继续。您可以[在此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh700330.aspx)、[此处](http://www.html5rocks.com/en/tutorials/async/deferred/?redirect_from_locale=pt)、[此处](http://msdn.microsoft.com/en-us/library/ms228963.aspx)和[此处](http://www.infoq.com/articles/surviving-asynchronous-programming-in-javascript)找到有关异步编程的信息。

您必须在上传回调中连接您上传的计数。我不知道你用什么来上传，但你`$scope.uploadEntry`应该返回一个[promise](http://docs.angularjs.org/api/ng.%24q)，然后你等待它完成并更新计数。

```
$scope.ShowUploadModal = true;
$scope.UploadDone = 0;
for(i in submissionList)
{
  $scope.UploadEntry(submissionList[i]).then(function() {
    $scope.UploadDone += 1;
    scope.ShowUploadModal = $scope.UploadDone !== submissionList.length;      
  });
} 
```

如果您正在使用`$http`uypload 作业，只需将其返回即可，因为它已经是一个承诺并且`.then(funciton`每`.success(function`. 如果没有，这会有点复杂，你需要阅读[有关 promises 的 Angular 文档](http://docs.angularjs.org/api/ng.%24q)。

顺便说一句，您应该看看 Javascript 命名约定。Javascript 通常假设`cammelCase`变量，而不是`PascalCase`. 这是[大卫克拉克福德的对流](http://javascript.crockford.com/code.html)。

# nosql - EclipseLink NoSQL 限制、支持、未来

> ID：16131199
> 
> 赞同：2
> 
> 时间：2013-04-21T12:40:28.577
> 
> 标签：nosql, eclipselink

我试图更好地理解 EclipseLink NoSQL，但我无法理解它的局限性、它目前支持的功能，而且我根本找不到关于团队未来计划的任何信息。

所以，简而言之，如果你们不介意的话，我有很多我想知道的问题：

EclipseLink 是否支持：

1.  面向对象的查询
2.  实体的 CRUD
3.  多态实体
4.  可嵌入对象（组件）
5.  基本类型
6.  单向和双向关系（如果是，哪些？）
7.  集合（集合、列表、地图等）
8.  完整的 JPA 支持（我认为它支持，但以防万一我错了）
9.  非规范化
10.  复杂的连接和聚合

除了这些问题，我还应该知道其他限制或皇冠上的珠宝吗？另外，这个团队目前在做什么？未来的计划是什么？

如果这里有人可以为我提供上面提供的问题的链接或文档，我会非常高兴，因为我找不到任何东西：S

在此先感谢佩德罗。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T14:40:45.780

1.  这取决于 NoSQL 平台，对于 MongoDB，支持 JPQL 和 Criteria 的子集（不支持连接到外部关系）
2.  是的。
3.  是的，支持继承。
4.  是的，支持 Embeddables 和 ElementCollections（这些存储在 JSON 文档中）
5.  是的
6.  支持所有单向关系，不支持双向（mappedBy），在NoSQL中你只需要使用两个单向关系。
7.  是的。
8.  大多数JPA。如果 NoSQL 平台不支持某些功能，例如连接、原子事务，则不支持它们（JPA 事务可以工作，如果数据库不支持事务，则回滚不会导致任何刷新的更改回滚）。
9.  是的。
10.  不支持联接。对嵌入式关系的查询是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:58:24.140

为了完成本次讨论的内容，我现在发布我发现的内容。

目前（使用讨论日期作为参考）EclipseLink 支持：

*   复杂的层次结构（包括 XML）
*   索引分层数据
*   映射的分层数据（例如 JSON）
*   CRUD 操作
*   嵌入式对象和集合
*   遗产
*   关系
*   JP-QL 和 Criteria API 的子集，依赖于 NoSQL 数据库的查询支持

仍需回答：

*   Eclipselink 限制
*   未来的计划

### 资料来源：

*   [http://www.eclipse.org/eclipselink/documentation/2.5/concepts/nosql001.htm#BJEIHEJG](http://www.eclipse.org/eclipselink/documentation/2.5/concepts/nosql001.htm#BJEIHEJG)
*   [http://wiki.eclipse.org/EclipseLink/FAQ/NoSQL](http://wiki.eclipse.org/EclipseLink/FAQ/NoSQL)
*   [http://www.eclipse.org/eclipselink/documentation/2.5/concepts/app_tl_ext003.htm#CJAECHBD](http://www.eclipse.org/eclipselink/documentation/2.5/concepts/app_tl_ext003.htm#CJAECHBD)
*   [http://www.eclipse.org/eclipselink/documentation/](http://www.eclipse.org/eclipselink/documentation/)

# php - 在 PHP 中将数组转换为字符串

> ID：16131200
> 
> 赞同：1
> 
> 时间：2013-04-21T12:40:32.220
> 
> 标签：php, mysql, sql, phpmyadmin

我已经坚持了一段时间了。我确信有一个简单的解决方案，但我仍然围绕着 php。

我想从数据库中获取一些数据并将其保存到另一个数据库中。

使用 SQL 我设法获取该数据并将其保存在一个数组中。现在我想将该数据转换为字符串以保存到不同的数组中（如果有一种方法可以直接执行此操作而无需先保存到数组中，那么我全神贯注）。

我以这种格式获取数据。

```
Array ( [0] => Array ( [0] => 414208 [InterestedEntityId] => 414208 [1] => 126.61370996251785 [Score] => 126.61370996251785 ) [1] => Array ( [0] => 479516 [InterestedEntityId] => 479516 [1] => 73.531040944194 [Score] => 73.531040944194 ) [2] => Array ( [0] => 4129769 [InterestedEntityId] => 4129769 [1] => 54.390965049372674 [Score] => 54.390965049372674 ) 
```

我想将其转换为：

```
414208  126.61370996251785
479516  73.531040944194  
4129769 54.390965049372674 
```

这是我的代码：

```
$sql = mysql_query("SELECT Id, Score FROM users.`table1` WHERE UserId= $userID", $dbh1);

$table = array();

while ($row = mysql_fetch_array($sql))
    $table[] = $row;

$table = implode($table);

mysql_query("INSERT INTO $tbl_name(table) VALUES ('$table')", $dbh2); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:48:51.543

一个简单的 foreach 循环就可以完成这项工作。

**制作一张漂亮的桌子：**

```
$output = '<table border="1">';
foreach($table as $row){
    $output .= '<tr><td>'.$row[0].'</td><td>'.$row[1].'</td></tr>';
}
$output .= '</table>';
echo $output; 
```

**纯文本：**

```
$output = '';
foreach($table as $row){
    $output .= $row[0].' '.$row[1].'<br>';
}
echo $output; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:54:10.413

作为您的问题的解决方案，请尝试执行以下代码片段。

```
 <?php
   try
   {
        $a=array(array(414208,126.61370996251785),array(414208,126.61370996251785));
        $string='';
        foreach($a as $key=>$value)
        {
           if(!is_array($value))
           {
              throw new Exception('Not an array.');
            }
           else
           {
            $string=join(' ',$value);
           }        
           }
      }
     catch(Exception $e)
    {
   echo $e->getMessage();
    }    
   echo $string;

 ?> 
```

# mysql - 导轨中的多个表连接

> ID：16131201
> 
> 赞同：27
> 
> 时间：2013-04-21T12:40:49.150
> 
> 标签：mysql, ruby-on-rails, activerecord

如何将下面的mysql查询写入rails activerecord

```
select
    A.*,
    B.* 
from
    raga_contest_applicants_songs AS A 
    join
        raga_contest_applicants AS B 
        ON B.contest_applicant_id = A.contest_applicant_id 
    join
        raga_contest_rounds AS C 
        ON C.contest_cat_id = B.contest_cat_id 
WHERE
    C.contest_cat_id = contest_cat_id 
GROUP BY
    C.contest_cat_id 
```

我知道如何在两个表上编写连接；但是，我对如何在 3 个表上使用 join 不是很有信心。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-04-21T13:11:32.683

要重写您在问题中得到的 SQL 查询，我认为它应该如下所示（尽管我很难完全可视化您的模型关系，所以这有点猜测）：

```
RagaContextApplicantsSong.
  joins(:raga_contest_applicants => [:raga_content_rounds], :contest_cat).
  group('raga_contest_rounds.contest_cat_id') 
```

...这样该`joins`方法就可以同时处理两个连接以及`WHERE`子句，最后是`group`调用。

**作为更多参考：**

如果您将多个关联加入同一个模型[，您可以简单地列出它们](http://guides.rubyonrails.org/active_record_querying.html#joining-tables)：

```
Post.joins(:category, :comments)
Returns all posts that have a category and at least one comment 
```

如果您要加入嵌套表，您可以将它们列为散列：

```
Post.joins(:comments => :guest)
Returns all comments made by a guest 
```

嵌套关联，多级：

```
Category.joins(:posts => [{:comments => :guest}, :tags])
Returns all posts with their comments where the post has at least one comment made by a guest 
```

您还可以链接 ActiveRecord 查询接口调用，例如：

```
Post.joins(:category, :comments)
...produces the same SQL as...
Post.joins(:category).joins(:comments) 
```

如果所有其他方法都失败了，您始终可以[将 SQL 片段直接传递到`joins`方法](http://guides.rubyonrails.org/active_record_querying.html#using-a-string-sql-fragment)中，作为从工作查询到更以 ARQI 为中心的东西的垫脚石

```
 Client.joins('LEFT OUTER JOIN addresses ON addresses.client_id = clients.id')
=> SELECT clients.* FROM clients LEFT OUTER JOIN addresses ON addresses.client_id = clients.id 
```

# c++ - const char 变量的问题

> ID：16131203
> 
> 赞同：1
> 
> 时间：2013-04-21T12:40:56.827
> 
> 标签：c++, winapi

我正在用 C++ 编写一个服务器程序，并且我正在使用一种接受`const char`. 我有这段代码，但它不会编译说

```
27 26 C:\Users\Owner\Desktop\main.cpp [Error] expected primary-expression before ',' token 
```

有人可以解释一下我发生了什么。

```
std::string str = "Hello";
const char * c = str.c_str();
iResult = getaddrinfo(c*, 23, &hints, &result); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:42:11.287

你有一个额外`*`的 in `getaddrinfo(c*, ...`，你应该删除它，第二个参数应该是端口号作为字符串：

```
getaddrinfo(c, "23", &hints, &result); 
```

# persistence - 如何使用 eclipseLink 只保留时间？

> ID：16131204
> 
> 赞同：0
> 
> 时间：2013-04-21T12:41:19.850
> 
> 标签：persistence, eclipselink

我的 oracle 11g 数据库表中有一个时间戳属性。我从表中生成了 JPA 实体，并且时间戳属性被创建为日期实体。我只想将时间值存储和检索到数据库中。这个怎么做？我正在使用eclipseLink2.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:42:14.457

您可以使用`@Temporal(TemporalType.TIME)`注释

```
@Temporal(TemporalType.TIME)
private Date value; 
```

然后只有时间部分应该存储到数据库中。

如果您使用 JPA Criteria API 创建查询，则应确保现有数据的日期部分为零。即在 Oracle 数据库上，如果您查询`select to_char(timecolumn,'dd.mm.yyyy hh24:mi:ss') from sometable`结果应该像这样的数据`"01.01.1970 XX:XX:XX"`。通常，如果您使用 JPA 来存储时间值，`TemporalType.TIME`它会为您解决这个问题。如果日期部分不为零，则比较时间字段可能会出现问题。

# java - Linux 上的 Java 剪贴板（纯文本），有些程序可以读取，有些则不能，为什么

> ID：16131205
> 
> 赞同：4
> 
> 时间：2013-04-21T12:41:34.300
> 
> 标签：java, linux, text, clipboard

当我基于 Java 的应用程序（不是基于浏览器的小程序）将纯文本复制到 Linux 上的系统剪贴板时，许多程序无法访问剪贴板数据，但有些程序可以。

这是我能做的最简单的测试：

```
import java.awt.datatransfer.*;
import java.awt.Toolkit;
import java.io.*;

public final class PasteTest {
  public static void main (String...  args) {
    String mytext = "This is a test message, testing, 1, 2, 3....";
    StringSelection sel = new StringSelection(mytext);
    Clipboard clip = Toolkit.getDefaultToolkit().getSystemClipboard();
    clip.setContents(sel, null);
    try {
      Thread.sleep(1000);
    } catch (Exception e) {
    }
  }
} 
```

当该程序运行时，OpenOffice (LibreOffice 3.5.7.2) 中的文件 > 粘贴能够访问它放置在系统剪贴板上的文本。但是在 Gnome 终端、Mozilla Thunderbird 和 Firefox 以及许多其他程序中使用文件 > 粘贴是不行的。粘贴选项是灰色的，就像剪贴板是空的一样。

如何让我的 Java 程序将纯文本发布到 Linux 上的系统剪贴板（在 Ubuntu 12.04 上测试），以便所有程序都可以访问它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T00:16:25.313

你的代码很好。它的问题是它终止得太快了。

在 X 窗口系统下，将某些内容放在“剪贴板”（即名为“剪贴板”的选择）上的进程必须保持活动状态，以便复制的数据能够存活。（[阅读主动和被动缓冲区，并注意选择是主动类型的](http://en.wikipedia.org/wiki/X_Window_selection)）。

当您的进程运行时，即`sleep()`s，您可以将数据粘贴到任何地方。一旦它终止，剪贴板就会变空。

这不是 Java 的特殊行为；`charmap`您可以使用或您不介意关闭的任何其他程序轻松复制它。

我不知道 LibreOffice 在你的测试中是如何得分的。可能它是您的 alt+tab 列表中的第一个。在我的测试中，LibreOffice 的行为与任何其他应用程序一样：只要 Java 进程处于活动状态，“粘贴”就可以工作，并在进程终止时停止工作。

我不知道在一般情况下如何解决它。运行剪贴板管理器（它记住多个复制的项目，因此可能拥有所有这些项目）可能会有所帮助。

# background - 更改 JavaFX TabPane 背景

> ID：16131206
> 
> 赞同：1
> 
> 时间：2013-04-21T12:41:40.300
> 
> 标签：background, javafx

我正在 javaFx 中开发一个应用程序，我正在使用 TabPane 来组织内容。我的问题是，当我将一个节点作为选项卡的内容，然后设置同一节点的背景时，背景颜色变得有点模糊，正如您在图像中看到的那样，背景颜色是在 css 中定义的文件。

如果有人知道如何解决这个问题，将非常感谢您的帮助。

[http://i.stack.imgur.com/h3gNH.png](http://i.stack.imgur.com/h3gNH.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:26:55.553

我认为你是这个问题的受害者：

[渲染时 JavaFX 图像 (PNG) 透明度清晰度丢失](https://stackoverflow.com/questions/15160181/javafx-image-png-transparency-crispness-being-lost-when-rendering)

它可能会在即将发布的（即 Java 8）版本中得到修复。

目前，您可以使用链接问题的答案中记录的解决方法。为此，请将您的图像放在 CenteredRegion 中，并将其用作放置在选项卡中的 StackPane 的第一个元素。然后通过将内容添加到 StackPane 将其余选项卡内容叠加到图像上。这有点尴尬，对于您的特定情况可能会有更直接的解决方案。

```
class CenteredRegion extends Region {
  private Node content;

  CenteredRegion(Node content) {
    this.content = content;
    getChildren().add(content);
  }

  @Override protected void layoutChildren() {
    content.relocate(
      Math.round(getWidth()  / 2 - content.prefWidth(USE_PREF_SIZE)  / 2), 
      Math.round(getHeight() / 2 - content.prefHeight(USE_PREF_SIZE) / 2)
    );
  }

  public Node getContent() {
    return content;
  }
} 
```

# python - 用于返回与排序的 ndarray 的所有元素的索引相对应的元组列表的函数？

> ID：16131208
> 
> 赞同：2
> 
> 时间：2013-04-21T12:41:48.363
> 
> 标签：python, arrays, sorting, numpy

我知道`numpy.argsort()`，但它所做的是返回数组中元素的索引，该数组将沿某个轴排序。

我需要的是对N 维数组中的*所有*值进行排序，并得到一个线性元组列表作为结果。

像这样：

```
>>> import numpy
>>> A = numpy.array([[7, 8], [9, 5]])
>>> numpy.magic(A)
[(1, 0), (0, 1), (0, 0), (1, 1)] 
```

PS 我什至不明白 argsort 的输出试图告诉我这个数组是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:48:03.417

`np.argsort(A)`分别对每一行进行排序`A`。例如，

```
In [21]: np.argsort([[6,5,4],[3,2,1]])
Out[21]: 
array([[2, 1, 0],
       [2, 1, 0]]) 
```

相反，您希望将数组展平为一维值数组，然后对其进行 argsort 。这可以通过将`axis`参数设置为`None`（感谢@Akavall 指出这一点）来完成：

```
In [23]: np.argsort(A, axis=None)
Out[23]: array([3, 0, 1, 2]) 
```

然后使用[np.unravel_index](http://docs.scipy.org/doc/numpy/reference/generated/numpy.unravel_index.html#numpy-unravel-index)恢复`A`.

* * *

```
In [14]: import numpy as np

In [15]: A = np.array([[7, 8], [9, 5]])   

In [4]: np.column_stack(np.unravel_index(np.argsort(A, axis=None)[::-1], A.shape))
Out[4]: 
array([[1, 0],
       [0, 1],
       [0, 0],
       [1, 1]]) 
```

请注意，对于 NumPy 版本 1.5.1 或更早版本，`np.unravel_index`如果为其第一个参数传递了一个类似数组的对象，则会引发 ValueError。在这种情况下，您可以使用列表推导：

```
In [17]: [np.unravel_index(p, A.shape) for p in np.argsort(A, axis=None)[::-1]]
Out[17]: [(1, 0), (0, 1), (0, 0), (1, 1)] 
```

# url-rewrite-module - IIS 重写 2.0 模块 - 404 错误

> ID：16131217
> 
> 赞同：0
> 
> 时间：2013-04-21T12:42:42.477
> 
> 标签：url-rewrite-module

我已经在我的 Windows Server 2012 上通过 Web 组件安装了 IIS Rewrite 2.0 模块。

我已经阅读了几篇文章，但我似乎无法让我的简单重写工作。

我想改写`http://www.acme.com/news/13/Jan/20`为`http://www.acme.com/news.html#20-Jan-13`

这是我正在使用的规则：

```
<rule name="news articles" stopProcessing="true">
    <match url="^news\/(.*)\/(.*)\/(.*)$" />
    <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    </conditions>
    <action type="Rewrite" url="news.html#{R:3}-{R:2}-{R:1}" appendQueryString="false" />
</rule> 
```

当我申请`http://www.acme.com/news/13/Jan/20`作为我的测试模式时，重写工作。

但是，如果我浏览到`http://www.acme.com/news/13/Jan/20`我会收到 404 错误：

```
Requested URL      http://www.acme.com/news.html#20-Jan-13
Physical Path      C:\Webs\acme.com\www\news.html#20-Jan-13 
```

物理文件 news.html 存在，我可以直接浏览到它。

是不是把事情搞砸了？显然 C:\Webs\acme.com\www\news.html#20-Jan-13 不是物理文件，但我不知道如何解决这个问题。

我当然可以毫无问题地直接浏览[http://www.acme.com/news.html#20-Jan-13 。](http://www.acme.com/news.html#20-Jan-13)

有人可以帮忙吗？

提前谢谢了。

干杯，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:25:18.537

根据这个“[如何在 IIS 中编写允许 HTML 锚点的重写规则？](https://stackoverflow.com/a/6893647/403664) ”答案，浏览器不会在 URL 请求中的 # 之后向服务器发送任何内容。它们是仅供浏览器在结果页面上滚动到的标记。

如果您查看日志，您是否看到包含锚标记的页面的完整请求？

另一种方法可能是使用一些 DOM 加载的 JS 将页面滚动到 URL 中引用的锚点（需要 jQuery）：

```
$(function () {
  var a_tag = $("a[name='" + window.location.hash.replace("#", "") +']");
  $('html,body').animate({scrollTop: a_tag.offset().top}, 'slow');
}); 
```

虽然，这可能无法解决更友好 URL 的预期问题。

# bash - Bash 函数内部的间接变量赋值

> ID：16131218
> 
> 赞同：5
> 
> 时间：2013-04-21T12:42:45.413
> 
> 标签：bash, function, variables

我有一个脚本需要多次评估用户输入，我正在研究的解决方案是将评估位放入一个函数中，并且每次我需要评估输入时只需调用该函数。问题是，当我尝试更新`$1`变量（引用函数的第一个变量参数）时，我收到错误消息“$VARIABLE command not found”。

这是代码：

```
function input_handler() {
 if is_integer $1; then
  selid="$1 -1"
  if [[ "$1" -le "0" ]]; then
   echo "Please use a simple positive number!"
  else
   if [[ "$1" -le "${#array[*]}" ]]; then
    eval $1="${array[selid]}"
    echo "Ok, moving on..."
   else
    echo "That number seems too large, try again?"
   fi
  fi
 else
  if [ -e $2/$1 ]; then
   echo "Ok, moving on..."
  else
   echo "That item is not on the list, try again!"
  fi
 fi
} 
```

这个命令：

```
input_handler $doctype $docpath 
```

给出这个输出：

```
5
./test: line 38: 5=sun: command not found 
```

好吧，继续……

现在这几乎是正确的，但我之后是 doctype=sun，而不是 5=sun，换句话说，我需要`$1`变量名而不是它的值。更改线路`eval $1="${array[selid]}"`以`eval doctype="${array[selid]}"`修复此特定实例。但这并不能解决我的问题，因为我需要在具有不同名称的不同变量上运行此函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T13:49:53.613

也许不完全理解您想要实现的目标，但请查看下一个示例：

```
weirdfunc () {
    echo " weirdfunc: variable name is: $1"
    echo " weirdfunc: variable value is: ${!1}"
    eval "$1=$(( ${!1} + 1))" #assign
}

myvar="5"
echo "the value of myvar before: $myvar"

weirdfunc myvar #call with the NAME not with the value, so NOT weridfunc $myvar

echo "the value of myvar after: $myvar" 
```

简而言之 - 当你想在被调用函数中对变量*NAME做任何事情时，你应该传递变量的 NAME 而不是他的值。*所以调用函数

```
somefunc NAME 
```

代替

```
somefunc $NAME 
```

并使用上述构造来获取函数内部的名称和值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:25:37.737

如果您保护变量名，Bash 将评估并分配给 $1，而不是尝试执行 $1=value。

```
eval "$1"=${array[selid]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T13:48:38.717

您无法`$1`使用传统赋值更新 的值，但可以使用`set`内置函数更新位置参数。

```
$ f() { echo "$@"; set -- a b c; echo "$@"; echo $2; }
$ f 1 2 3
1 2 3
a b c
b 
```

请记住，这将清除您每次未重新设置的所有位置参数，因此`$2`如果您想保留它，则需要进行设置。

您最好的选择可能是将位置参数中的值分配给名称，然后只使用名称。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-21T13:05:07.443

位置参数是只读的。所以你想做的事情是不可能的。你应该做类似的事情

```
foo=$1 
```

然后使用`$foo`而不是`$1`

# php - 如何在sql中使用order by和group by？

> ID：16131219
> 
> 赞同：0
> 
> 时间：2013-04-21T12:42:46.623
> 
> 标签：php, sql, group-by, sql-order-by

这是我的问题：我有这些表：

```
felado  fogado  fehide  fohide  datum   olvasott    tartalom 
```

felado = 发送者，fogado = 接收者，

我想把所有的 felado 或fogado 都放在我的位置上，然后对这些线条进行分组。所以如果有下一行

```
sender 1 receiver 2 id 1
sender 1 receiver 2 id 2
sender 1 receiver 2 id 3
sender 2 receiver 1 id 4 
```

我只想从这些行中得到一个，最后一个是 ID。

现在我正在尝试这样：

```
SELECT * 
FROM belso_levelezes 
WHERE (felado="'.$_SESSION["userData"]["id"].'"
   or fogado="'.$_SESSION["userData"]["id"].'" )
ORDER BY id DESC 
GROUP BY felado, fogado 
```

它只给了我一个，但不是最后的记录。如何获取每个组的最后记录？我只想得到这个：

```
sender 2 receiver 1 id 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:09:07.547

您可以使用子查询来创建每个对话唯一的两列。然后，您可以对这些列进行分组，并获取对话的最大 ID。该示例假设您的用户 ID 为 42：

```
SELECT  sr1
,       sr2
,       max(id)
FROM    (
        SELECT  case when Sender < Receiver then Sender else Receiver end as sr1
        ,       case when Sender > Receiver then Sender else Receiver end as sr2
        ,       id
        FROM    YourTable
        WHERE   42 in (Sender, Receiver)
        ) as SubQueryAlias
GROUP BY
        sr1
,       sr2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:10:26.453

```
'SELECT MAX(id),felado,fegado,... FROM belso_levelezes WHERE (felado="'.$_SESSION["userData"]["id"].'" or fogado="'.$_SESSION["userData"]["id"].'" ) GROUP BY felado, fogado ' 
```

# php - 使用 json_encode 传递 php 数组以在 javascript 中使用

> ID：16131220
> 
> 赞同：1
> 
> 时间：2013-04-21T12:43:07.017
> 
> 标签：php, javascript, json

我知道这已经被问过很多次了，但是在阅读了有关该主题的所有其他帖子后，我仍然遇到了问题...在我的 php 代码和它所在的 javascript 之间的某个地方，我的数组正在运行。

在附加的代码中，我有一个用于调试 php.ini 的回显。当我从 javascript 中剪下 php 部分并在打开 echo 的情况下单独运行它时，它显示它正在正确构建我的 json_encoded 数组。

在 php 结束后的 javascript 中，我将 php 分配给 javascript 变量，因此我可以将其用于进一步处理（绘制图形）。放入display语句，将获取数组的php调用结果内容显示到javascript中，显示数组为空。

如果我剪切并粘贴 php echo 的输出并将此文字分配给 javascript chartData 数组，那么一切正常。为什么javascript没有获取php数组内容？

这是代码片段：

```
<script>
...some java script stuff;
<?php
// Define the mySQL db connection
$db = new PDO('mysql:host=localhost;dbname=remets;charset=UTF-8', 'remets', 'remets',         array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
// Define SQL query to fetch data from mySQL
$stmt = $db->query("SELECT WeekNumber,XAxisCategory,YAxisValue FROM Metric WHERE ReportID = 'Q3' ORDER BY WeekNumber,XAxisCategory ASC");

                                // declarations
                                $amData = array();
                                $amArray = array();
                                $ctrinner = 0;
                                $ctrouter = -1;
                                $prevweek = "9999";

                                // Fetch data from mySQL and put it in an array in the format we need
                                while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
                                    if ($prevweek !== $row['WeekNumber']) {
                                        $ctrouter++;
                                        $ctrinner = 0;
                                        $amData[$ctrouter]["week"] = "".$row['WeekNumber'];  // Prepending (or appending) the empty string makes the json encoding think the week number is a string, which is MUST have for AmCharts
                                  }
                                    $ctrinner++;
                                    $amData[$ctrouter][$row['XAxisCategory']] = $row['YAxisValue'];
                                    $prevweek = $row['WeekNumber'];
                                }

                                    // Using json_encode puts the data into an array format that we can use in a javascript
                                    $amJSONArray = json_encode($amData);

                                    // Echo is for debugging only.
                                    // echo $amJSONArray;

                            ?>

                            var chartData = <?php echo $amJSONArray; 
?>;

...more javascript stuff;

</script> 
```

@Mahdi： print_r 的输出是： Array ( [0] => Array ( [week] => 1301 [Accepted] => 30 [Failed] => 5 [Passed] => 20 [Planned] => 5 [跳过] => 5 [未知] => 26) [1] => 数组 ([周] => 1302 [接受] => 25 [失败] => 2 [通过] => 25 [计划] => 2 [跳过] => 3 [未知] => 20) [2] => 数组 ([周] => 1303 [接受] => 26 [失败] => 26 [通过] => 29 [计划] => 26 [跳过] => 26 [未知] => 10 ) )

@Mahdi：这是 php 之后的 jscript 代码（它被注释掉了，因为我尝试了很多不同的选项，这些选项在这个论坛的其他帖子和其他帖子中推荐 - 它们都不起作用。我可以运行 php 代码并且有效很好。如果我在我之前发布的 php 代码片段中复制 echo 的输出，然后简单地将其分配给 chartData（即：chartData =“”；我的图表制作得很好。问题不在于图表工具，而在于数组内容对 .js 文件中直接位于其下方的 javascript 不可见。感谢您到现在为止的时间。

```
 //var chartData = "<?php print($amJSONArray); ?>";  // This just returns the literal in the speech marks
                            //var chartData = '<?php print($amJSONArray); ?>';  // This also returns the literal in the speech marks
                            //var chartData = "<?php echo($amJSONArray); ?>";   // This just returns the literal in the speech marks
                            //var chartData = '<?php echo($amJSONArray); ?>';   // This also returns the literal in the speech marks
                            //var chartData = <?php echo ($amJSONArray) ?>;     // This returns empty
                            //var chartData = <?php echo $amJSONArray ?>;       // This returns empty
                            //var chartData = (<?php echo $amJSONArray ?>);     // This returns empty
                            //alert(chartData);                                                                 // Returns empty - just showing the contents of the array if I do the json_encode within the php part
                            //alert(<?php echo $amJSONArray ?>);                                // Returns empty - just showing the contents of the array if I do the json_encode during the array fetch 
```

更新：我认为我身边发生了一些根本性的错误。我使用了一个非常简单的示例，它应该在屏幕上写入“hello world”，但它什么也没返回。如果我用“警报”代替“写”，那么警报弹出窗口中仍然没有显示任何内容。有谁知道为什么这不起作用？代码是：

```
<?php
   $testvar = "Hello World";
?>
<html>
<head>
<script type="text/javascript">
function hello()
 {
   // create JavaScript variable, fill it with Php variable
   var testvar = "<? print $testvar; ?>";
  // output to screen

   document.write( testvar );   
 } 
</script>
</head>

<!-- Call JavaScript function to display variable -->
<body onload="hello()" >
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:27:49.047

如果您能够以字符串的形式访问数据，则可以尝试使用内置`JSON.parse()`将其转换为可用的 javascript。

# java - Java - 我应该在哪里初始化变量以提高内存效率？

> ID：16131221
> 
> 赞同：3
> 
> 时间：2013-04-21T12:43:40.453
> 
> 标签：java, performance, variables, memory

内存可以在将被相当频繁地调用的方法中初始化变量吗？基本上，是这个示例方法：

```
int amount;
private boolean method() {
    amount = Random.nextInt(0, 100);
    return amount == 50;
} 
```

就此方法的内存效率而言，更多/更少/相同：

```
private boolean method() {
    int amount = Random.nextInt(0, 100);
    return amount == 50;
} 
```

是的，我知道这些不是最好的例子，而且它们有一些冗余。对于那个很抱歉。

无论如何，提前谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T12:46:36.060

效率上的差异，如果有的话，很可能是完全不相关的。如果`amount`不需要在方法之外可见，则更喜欢第二个版本，因为它没有不必要的副作用并且是线程安全的。

扩展最后一点，如果多个线程要调用`method()`同一个对象，则第一个版本对竞争条件开放。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T12:55:29.907

来自*Effective Java（第 2 版）*：

**永远不要为了性能**而牺牲合理的架构原则（例如**信息隐藏**）。

 **> **第 55 条：明智地优化**
> 
> > *   不要为了性能而牺牲合理的架构原则。努力编写好的程序而不是快速的程序。
> > *   好的程序体现了信息隐藏的原则：在可能的情况下，它们将设计决策本地化在单个模块中，因此可以更改单个决策而不影响系统的其余部分。

和：

> **第 45 条：最小化局部变量的范围**
> 
> > 通过最小化局部变量的范围，您可以提高代码的可读性和可维护性，并降低出错的可能性。
> > 
> > 较早的编程语言，例如 C，要求必须在块的头部声明局部变量，一些程序员出于习惯继续这样做。这是一个值得打破的习惯。温馨提醒一下，Java 允许您在声明合法的任何地方声明变量。
> > 
> > *   首先使用了最小化局部变量范围以声明它的最强大的技术。
> >     
> >     
> > *   几乎每个局部变量声明都应该包含一个初始值设定项。

所以最好的方法似乎是第二种。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T12:49:35.770

如果您不需要在其他方法中使用第二种方法，则更好；性能不是问题，因为在堆栈上分配的方法内的变量非常快。

但是，在您的特定情况下，这种方法会更好，并且一个好的 IDE 会建议它：

```
private boolean method() {    
    return Random.nextInt(0, 100) == 50;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T12:48:01.567

我不会像担心**并发访问**导致的错误那样担心内存效率。

```
 return amount == 50; 
```

当跨多个实例使用此类时，实例变量`amount`可能会有所不同。如果没有适当的内存屏障，这将导致错误的结果。如果 int 是局部变量，则方法完成时 int 超出范围。

说到这里，为什么这里需要一个变量呢？这不会吗？

```
return Random.nextInt(0, 100) == 50; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T12:48:36.410

局部变量是方法的内部变量。最好使每个变量的范围尽可能小。但是如果多个方法需要访问一个变量，那么定义一个实例或类变量。**

# c# - KendoUI：按项目属性选择面板栏

> ID：16131222
> 
> 赞同：2
> 
> 时间：2013-04-21T12:43:41.653
> 
> 标签：c#, javascript, asp.net-mvc, kendo-ui

在剑道网站上给出的示例中：[http](http://demos.kendoui.com/web/panelbar/api.html) ://demos.kendoui.c​​om/web/panelbar/api.html ，它显示了如何通过索引位置以编程方式选择项目。

那么，我该如何根据 Id 选择一个项目？

这就是我将模型绑定到 Panelbar 控件的方式：

```
.BindTo(Model.FloorPlanGroups, mappings =>
    {
         mappings.For<Asis.Ibss.Web.Mvc.Areas.Monitoring.Models.FloorPlanGroupModel>(itemDataBound =>
        itemDataBound.ItemDataBound((item, group) =>
        {
           item.Text = group.Name;
           item.HtmlAttributes["data-groupid"] = group.Id;
         }) 
```

所以，我想根据 data-groupid 选择一个节点，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:32:40.373

我建议你尝试这样的事情：

```
.BindTo(Model.FloorPlanGroups, mappings =>
{
     mappings.For<Asis.Ibss.Web.Mvc.Areas.Monitoring.Models.FloorPlanGroupModel>(itemDataBound =>
    itemDataBound.ItemDataBound((item, group) =>
    {
       item.Text = group.Name;
       item.HtmlAttributes["data-groupid"] = group.Id;
       if(group.Id==5){
            item.Selected=true;
       }
     }) 
```

# html - 中心百分比网格，HTML

> ID：16131223
> 
> 赞同：0
> 
> 时间：2013-04-21T12:43:42.157
> 
> 标签：html, css, percentage

在转向 Sass 和 Less 之前，我目前正在构建自己的小型流体网格供我个人使用，因为我不需要大型框架，因为我希望了解它们背​​后的一些更简单的步骤。我想要做的是基于页面居中列。由于包装器仅使用屏幕的 90% 宽度

```
<body>
    <div class="wrapper">
        <div class="Column">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent euismod ultrices ante, ac laoreet nulla vestibulum adipiscing.</p>
        </div>

        <div class="Column">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent euismod ultrices ante, ac laoreet nulla vestibulum adipiscing.</p>
        </div>

        <div class="Column last">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent euismod ultrices ante, ac laoreet nulla vestibulum adipiscing.</p>
        </div>
    </div>
</body> 
```

CSS

```
body{
    text-align:center;
}

.wrapper{
    margin: 0 auto;
    width : 90%;
}

.Column{
    float : left;
    width : 22%;
    margin-right : 4%;
}

.last{
    margin-right : 0;
} 
```

我在这里设置了一个小测试，希望将列居中[http://jsfiddle.net/rjtK9/](http://jsfiddle.net/rjtK9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T12:48:36.463

您的包装器已经居中。您的列在包装器内浮动。因此，您可能应该只增加列的大小：

```
.Column{
    float : left;
    width : 30%;
    margin-right : 4%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T12:51:00.223

它已经居中了，你只是在给宽度时保守了两个
我刚刚放了一个小[小提琴](http://jsfiddle.net/anirudhvarma/8zNCb/)

我所做的是为 Column 提供 33% 的宽度，并在右侧设置一个 20px 的装订线。添加以下CSS

```
-webkit-box-sizing: border-box; 
-moz-box-sizing: border-box;   
 box-sizing: border-box; 
```

上面的代码包括 33% 宽度的填充。
有关盒子尺寸检查的更多信息，[请在此处查看](http://css-tricks.com/box-sizing/)

# c# - RAD PDF 服务消息工作线程未知异常

> ID：16131230
> 
> 赞同：1
> 
> 时间：2013-04-21T12:44:33.633
> 
> 标签：c#, asp.net, file, iis, permissions

我尝试通过[RadPdf](http://www.radpdf.com/)控件打开我的 PDF，但出现渲染错误。我检查事件查看器并获取以下数据：为了解决我必须创建的问题，`C:\WINDOWS\TEMP\RadPdfTemp\`并且管理员每隔一段时间清空 temp 并删除此文件夹，我尝试在我的网站中创建具有所需权限的此文件夹，但是仍然得到同样的错误！

* * *

```
 this.rad_pdf.CreateDocument("Document Name", pdfData); 
```

我`pdfData`通过：

```
 private byte[] AddReportToResponse(LocalReport followsReport)
    {
        string mimeType;
        string encoding;
        string extension;
        string[] streams = new string[100];
        Warning[] warnings = new Warning[100];
        byte[] pdfStream = followsReport.Render("PDF", "", out mimeType, out encoding, out extension, out streams, out warnings);

        return pdfStream;
    } 
```

* * *

```
Event Type: Error
Event Source:   RAD PDF
Event Category: None
Event ID:   0
Date:       4/21/2013
Time:       2:33:50 PM
User:       N/A
Computer:   -----
Description:
Event Category
-----------------
PdfService

Event Description
-----------------
RAD PDF Service Message Worker Thread Unknown Exception
Exception Type:
System.IO.DirectoryNotFoundException
Exception Message:
Could not find a part of the path 'C:\WINDOWS\TEMP\RadPdfTemp\p476.tmp'.
Exception Stack Trace:
   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.IO.File.WriteAllBytes(String path, Byte[] bytes)
   at #Ew.#Rw.#ix()
   at #Ew.#Rw.#9w()

Event User
-----------------
NT AUTHORITY\SYSTEM

Event Version
-----------------
2.12.0.0

For more information, see Help and Support Center at http://go.microsoft.com/fwlink/events.asp. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T08:58:15.937

您应该检查临时文件夹是否存在，否则在打开 PDF 文件之前创建它。这将确保文件夹在那里并且不会引发异常。

```
string tempDirectory = Path.Combine(Path.GetTempPath(), "RadPdfTemp");

if (!Directory.Exists(tempDirectory))
    Directory.CreateDirectory(tempDirectory);

this.rad_pdf.CreateDocument("Document Name", pdfData); 
```

# php - 阿贾克斯和砌体

> ID：16131231
> 
> 赞同：2
> 
> 时间：2013-04-21T12:44:39.517
> 
> 标签：php, ajax, load, jquery-masonry

大家好，我有一个小问题，我想用这段代码来加载更多

```
$(document).ready(function(){
var page = 1;
    var pages = $("#pages").val();

    $("#content").load("resources/more.php");
    $("#loadmore").bind("click", function(){
        var next = page+=1;

        $.get("resources/more.php?page="+next, function(data){
            var el = jQuery(data);
            if(next==pages){

                $("#loadmore").remove();
            }
            $("#content").append(el).masonry( 'appended', el, true );
                    //$("#content").append(el).masonry( 'reload' );
        });
    });
    }); 
```

负载更多工作得很好，但砌体根本不工作。感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T18:41:07.090

这个问题是由于我帮助找到的一个错误造成的！事实证明，$.get() 返回的 HTML 带有一些 Masonry 不喜欢的底层 DOM 结构。

要修复它，请更改此：

```
var el = jQuery(data); 
```

对此：

```
var el = jQuery(data).filter('div'); 
```

你可以在这里阅读更多关于它的信息： [https ://github.com/desandro/masonry/issues/374](https://github.com/desandro/masonry/issues/374)

# python - 如何找到那些偏好是给定 setpreference_list 超集的用户？

> ID：16131232
> 
> 赞同：1
> 
> 时间：2013-04-21T12:44:39.633
> 
> 标签：python, database, django, filter, django-orm

这是我一直在思考的一个问题，我想听听比我更有经验的 Django 开发人员的意见。说，我有以下模型：

```
class Preference(models.Model):
    name = models.CharField(max_length=50, unique=True)

class UserProfile(AbstractUser):
    preferences = models.ManyToManyField(Preference, blank=True) 
```

例如，偏好可能与食物有关。我喜欢牛肉和土豆，所以它们是我的偏好。

例如，找到偏好中至少包含牛肉和土豆的用户的最有效方法是什么？所以，我想找到一个除了牛肉和土豆之外还可以吃冰淇淋和沙拉的用户。

选项 1（迭代）：

```
query = UserProfile.objects.all()   # all user objects

for p in preference_list:           # preference_list contains beef and potatoes
     query = query.filter(preferences__in==p.id) 
```

选项 2（数据库，伪代码）：

```
SELECT * from UserProfile WHERE preferences is a superset of preference_list 
```

我认为选项 2 会更有效，但我不知道如何在 Django 中实现它。任何建议或意见如何布置这个问题的模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:12:24.920

您可以应用第一个过滤器以仅将首选项保留在集合中，然后使用以下命令确保您具有集合中的所有首选项`Count`：

```
preferences = ('beef', 'potatoes')
UserProfile.objects.filter(preferences__name__in=preferences
    ).annotate(pref_count=models.Count('preferences')
    ).filter(pref_count=len(preferences) 
```

这确实可能更有效，因为它不会为搜索的每个首选项添加连接（也是伪代码）：

```
SELECT * FROM userprofile
  LEFT OUTER JOIN userprofile_preferences
  LEFT OUTER JOIN preference
  WHERE preference IN (beef, potato)
  GROUP BY userprofile
  HAVING COUNT(userprofile_preferences) = 2 
```

# python - Python，将整数写入“.txt”文件

> ID：16131233
> 
> 赞同：11
> 
> 时间：2013-04-21T12:45:09.893
> 
> 标签：python, performance, pickle, robustness

使用 pickle 函数是否是将整数写入文本文件的最快、最可靠的方法？

这是我到目前为止的语法：

```
import pickle

pickle.dump(obj, file) 
```

如果有更强大的替代方案，请随时告诉我。

我的用例是编写用户输入：

```
n=int(input("Enter a number: ")) 
```

*   是的，人类需要阅读它并可能对其进行编辑
*   文件中将有 10 个数字
*   Python 可能需要稍后再读回它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-21T12:49:19.353

我认为这样做更简单：

```
number = 1337

with open('filename.txt', 'w') as f:
  f.write('%d' % number) 
```

但这实际上取决于您的用例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-23T12:07:02.443

## 写

```
result = 1

f = open('output1.txt','w')  # w : writing mode  /  r : reading mode  /  a  :  appending mode
f.write('{}'.format(result))
f.close() 
```

## 读

```
f = open('output1.txt', 'r')
input1 = f.readline()
f.close()

print(input1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-29T10:26:06.147

使用 python 2，您还可以执行以下操作：

```
number = 1337

with open('filename.txt', 'w') as f:
  print >>f, number 
```

当我不需要格式化时，我个人会使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T12:50:02.560

下面会打开一段时间，并在其上附加以下数字。

```
def writeNums(*args):
with open('f.txt','a') as f:
    f.write('\n'.join([str(n) for n in args])+'\n')

writeNums(input("Enter a numer:")) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-08T10:31:51.470

我刚刚遇到了类似的问题。我使用了一种简单的方法，将整数保存在变量中，并将变量作为字符串写入文件。如果您需要添加更多变量，您始终可以使用“a+”而不是“w”来追加而不是写入。

```
f = open("sample.txt", "w")
integer = 10
f.write(str(integer))
f.close() 
```

稍后您可以使用 float 读取文件，并且不会抛出错误。

# javascript - Jquery部分隐藏div

> ID：16131235
> 
> 赞同：0
> 
> 时间：2013-04-21T12:45:42.727
> 
> 标签：javascript, jquery

我想在单击事件上使用 jquery 调整 div 的宽度，但我似乎无法弄清楚确切的语法是什么。

下面是我迄今为止尝试过的一个例子。

```
$(function() {
    $("#square").on("click", function(){
        if($(this).css("width", "50")){
            $(this).animate({width:"500"}, 1000);
        } else {
            $(this).animate({width:"50"}, 1000);
        }
    });
}); 
```

[http://jsfiddle.net/4GGP8/](http://jsfiddle.net/4GGP8/)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:49:05.323

在你的 if 语句中尝试`$(this).width() == 50`改为，因为首先`css();`函数也会检索单位，其次你没有像这样在 if 语句中进行比较，如果你应该做任何事情`$(this).css('width') == "50px"`来检索宽度并比较它。

以供将来参考，您始终可以使用`parseInt();`摆脱 css 添加的单元，因此这样做也是有效的

```
if(parseInt($(this).css('width')) == "50") 
```

**编码：**

```
$(function() {
    $("#square").on("click", function(){
        if($(this).width() == 50){
            $(this).animate({width:"500"}, 1000);
        } else {
            $(this).animate({width:"50"}, 1000);
        }
    });
}); 
```

*这是生成的* [小提琴](http://jsfiddle.net/4GGP8/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:50:51.010

尝试这个 -

[jsFiddle](http://jsfiddle.net/mohammadAdil/4GGP8/7/)

```
 $("#square").on("click", function(){
        if($(this).css('width') == '50px'){
            $(this).animate({width:"500"}, 1000);
        } else {
            $(this).animate({width:"50"}, 1000);
        }
    }); 
```

# jquery-mobile - jquery mobile中的URL重定向

> ID：16131237
> 
> 赞同：0
> 
> 时间：2013-04-21T12:45:53.093
> 
> 标签：jquery-mobile, url-redirection

我有 2 页**page1.html**和**page2.php**。我正在发送用户信息 (GET)，例如`page2.php?new_user=true`. 在第 2 页中，第一页有`id="Welcome`“。在 page2.php 中，我将请求重定向到`<div datarole="page" > with id="NewUser"`（在 page2.php 内）。我正在使用 javascript 来执行此操作`$isnew= '<?php echo $_GET["new_user"]; ?>';`。目前我正在使用 if 条件进行重定向

```
if($isnew=="true")
{
window.location.href="#NewUser"
} 
```

问题是我想将#NewUser 显示为对话框而不是页面。任何人都可以为此提供任何其他可能的解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:56:39.883

要将页面显示为对话框：

```
$.mobile.changePage('#NewUser', { role:'dialog'}); 
```

[jQuery Mobile API - 对话框小部件](http://api.jquerymobile.com/dialog/)

# javascript - 让 EaselJS AlphaMaskFilter 工作

> ID：16131238
> 
> 赞同：1
> 
> 时间：2013-04-21T12:46:17.213
> 
> 标签：javascript, html, alpha, mask, easeljs

我难住了。我无法让 EaselJS 的 AlphaMaskFilter 工作。我不认为我做错了什么，但这并没有显示出我的期望。它应该看起来像您将手电筒指向谷歌广告牌。[http://jsfiddle.net/mLn8e/](http://jsfiddle.net/mLn8e/)

```
var stage = new createjs.Stage("c");

var mask = new createjs.Shape();
mask.graphics.beginRadialGradientFill(["rgba(255, 255, 255, 1)","rgba(255, 255, 255, 0)"], [0, 1], 0, 0, 0, 0, 0, 20).drawCircle(0, 0, 20);
mask.cache(-20, -20, 40, 40);
mask.x = 100;
mask.y = 100;

var bg = new createjs.Shape();
bg.graphics.beginFill("#000000").rect(0, 0, 400, 400);

stage.addEventListener("stagemousemove", function(e) {
    mask.x = e.stageX;
    mask.y = e.stageY;
    stage.update();
});

stage.addChild(bg, mask);
stage.update();

var img = new Image();
img.src = "https://www.google.nl/intl/en_ALL/images/logos/images_logo_lg.gif";
img.onload = function (e) {
    var bmp = new createjs.Bitmap(e.target);
    bmp.x = 0;
    bmp.y = 0;

    var amf = new createjs.AlphaMaskFilter(mask.cacheCanvas);
    bmp.filters = [amf];

    stage.addChild(bmp);
    stage.update();   
}; 
```

最重要的两行是 de var amf = ... 行和 bmp.filters = [amf]; 行，那两个破坏了程序。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:22:45.680

过滤器（如`createjs.AlphaMaskFilter`）不包含在 CreateJS 和 EaselJS 的主包中。您必须分别包含它们。这些信息可以在文档中找到：[http](http://www.createjs.com/Docs/EaselJS/classes/Filter.html) ://www.createjs.com/Docs/EaselJS/classes/Filter.html - 我知道，不是很突出，我有同样的问题:)

第二件事，在小提琴中调用您的 var`amff`并在下面的行中尝试使用`amf`（小提琴的第 28 + 29 行）

*编辑：我也刚刚注意到，您没有缓存`bmp`- 为了使过滤器生效，您必须在最初应用过滤器后缓存它，然后在 stagemousemove-listener 中使用 updateCache()。这是您尝试执行的类似使用的示例：[https ://github.com/CreateJS/EaselJS/blob/master/examples/AlphaMaskReveal.html](https://github.com/CreateJS/EaselJS/blob/master/examples/AlphaMaskReveal.html)

# ios - iOS：使表格视图单元格中的内容（文本）可编辑，但仅在编辑模式下

> ID：16131240
> 
> 赞同：1
> 
> 时间：2013-04-21T12:46:21.847
> 
> 标签：ios, tableview, cell, edit

我知道这已经被问过很多次了，但是有很多不同的信息和不同的案例，我只是不明白从哪里开始，也无法让它在我的应用程序中运行。

在我的应用程序中，我有一个表格视图，并且正在使用 NSFetchedResultsController。在正常模式下，表格单元格不应该是可编辑的，而是每次点击都应该是一个新的视图控制器（有效）。但是，在编辑模式下，如果您单击单元格，我希望您编辑文本，这会自动存储到数据库中。在这里我不知道。

我希望它尽可能简单。到目前为止我所读到的我想我必须继承 UITableViewCell 和一个 TextField。这已经是我的第一个问题：在每篇关于此的帖子中，TextField 都是用 Rect 初始化的，但是我如何知道单元格的确切宽度和高度？

我是否直接在 cellForRowAtIndexPath 中添加此单元格？还是仅当模式更改为编辑时？有些帖子建议您必须成为 UITextField 的代表，但为什么呢？

是否有一些示例代码可以准确地解决我遇到的问题？我没能找到它...

# ajax - 仅在插件加载后使用 wp_ajax_ 操作

> ID：16131245
> 
> 赞同：0
> 
> 时间：2013-04-21T12:46:48.967
> 
> 标签：ajax, wordpress

我使用 add_action('wp_ajax_loadcalendar_dates', 'loadcalendar_dates'); 加载自定义 ajax 函数。问题是我还使用 polylang 插件进行翻译，当调用 wp_ajax 动作挂钩时，女巫还没有准备好加载。只有在加载了所有插件之后，它是否存在任何加载 wp_ajax 的可能性？

我试过这样的东西，但它不起作用

```
add_action( 'plugins_loaded', 'load_ajax_functions' ); 

function load_ajax_functions() {
    add_action('wp_ajax_loadcalendar_dates', 'loadcalendar_dates');
    add_action('wp_ajax_nopriv_loadcalendar_dates', 'loadcalendar_dates');

        function loadcalendar_dates(){
            ...
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:08:12.893

没关系，这似乎是一个多语言问题，我还必须将 pll_load_front: 1 作为参数从 js 传递给 php。

# windows - 确定计算机是否已连接到 Internet

> ID：16131250
> 
> 赞同：2
> 
> 时间：2013-04-21T12:47:29.483
> 
> 标签：windows, winsock

我需要在 C++ 程序中确定 Windows 计算机是否连接到互联网。对于 Vista 及以上版本，有 IsInternetConnected() 函数，它按预期工作。对于 XP，应该可以通过 WSALookupServiceNext() 获取 _NLA_BLOB，如 [http://msdn.microsoft.com/en-us/library/ms700657(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms700657(v=vs.85).aspx)中所述。

但是，在 Windows 7 上运行时，它确实返回了一些 NLA_CONNECTIVITY 类型的 blob（用于物理和 vmware 虚拟 NIC），一些带有 NLA_INTERNET_YES 和一些带有 NLA_INTERNET_NO。当我在 Windows XP 上运行它时，根本没有这样的 blob。它应该在 XP 上以这种方式工作并且我做错了什么，还是我应该寻找其他方法？除非这是完成它的唯一方法，否则我宁愿不 ping 某些已知站点。

ps - 最终我们决定只 ping，至少在 XP 上。

# java - 如何使用 Apache POI 获取 xlsx 文件中图片的位置

> ID：16131256
> 
> 赞同：1
> 
> 时间：2013-04-21T12:48:10.093
> 
> 标签：java, apache-poi, xlsx

我可以获取图片文件，但我不知道如何获取图片的位置。我在 POI 中找不到正确的方法。

```
 InputStream is= new FileInputStream("test.xlsx");  
    XSSFWorkbook workbook = new XSSFWorkbook(is);  

    List<PictureData> list = (List)workbook.getAllPictures();
    int i = 0;
    System.out.println(list.size());
    for(Iterator<PictureData> it = list.iterator(); it.hasNext(); ){
        PictureData pd = it.next();
        savePic(i, pd);
        i++;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-21T12:28:48.160

还有另一种从 XSSFSheet 获取位置信息的方法。

```
 XSSFSheet sheet = workBook.getSheetAt(0);
        XSSFDrawing drawing = sheet.createDrawingPatriarch(); // I know it is ugly, actually you get the actual instance here
        for (XSSFShape shape : drawing.getShapes()) {
            if (shape instanceof XSSFPicture) {
                XSSFPicture picture = (XSSFPicture) shape;
                XSSFPictureData xssfPictureData = picture.getPictureData();
                ClientAnchor anchor = picture.getPreferredSize();
                int row1 = anchor.getRow1();
                int row2 = anchor.getRow2();
                int col1 = anchor.getCol1();
                int col2 = anchor.getCol2();
                System.out.println("Row1: " + row1 + " Row2: " + row2);
                System.out.println("Column1: " + col1 + " Column2: " + col2);
                // Saving the file
                String ext = xssfPictureData.suggestFileExtension();                
                byte[] data = xssfPictureData.getData();
                String filePath = "C:\\..\\Images\\" + xssfPictureData.getPackagePart().getPartName();
                try (FileOutputStream os = new FileOutputStream(filePath)) {
                    os.write(data);
                    os.flush();         
                }

            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T14:32:45.653

这就是 getAllPictures() 的实现方式：使用 getRelations() 查询 XSSFSheet (inSheet) 并查找 XSSFDrawing。

CTDrawing 类提供了几种获取图片锚点的方法。

```
for(POIXMLDocumentPart dr : inSheet.getRelations()) {
    if(dr instanceof XSSFDrawing) {
        CTDrawing ctDrawing = ((XSSFDrawing) dr).getCTDrawing();
        for (CTTwoCellAnchor anchor: ctDrawing.getTwoCellAnchorList()) {
            CTMarker from = anchor.getFrom();
            int row1 = from.getRow();
            int col1 = from.getCol();

            CTMarker to = anchor.getTo();
            int row2 = to.getRow();
            int col2 = to.getCol();

            // do something here
        }
    }
} 
```

# jakarta-ee - JBoss-AS 环境中的新项目 - 哪一个？

> ID：16131260
> 
> 赞同：0
> 
> 时间：2013-04-21T12:48:17.270
> 
> 标签：jakarta-ee, jpa, jboss

我有一本关于 JPA 的书，我想学习其中的一些教程。我想使用 JSF、JPA 和一些 EJB。我遇到了一些困难，选择哪种应用服务器和项目类型？目前我使用的是 Eclipse Juno 和 Windows 7，我安装了 JBoss-AS 7.1。有人告诉我 JBoss 也需要 Maven 插件。我安装了它。我可以选择大量看起来合适的项目，例如 EJB、JSF、JPA、ant、maven ......

我的第一个猜测是选择动态 Web 项目 - 这是正确的吗？我之前尝试过一些关于 Tomcat 的教程，所以我是应用服务器的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:24:03.227

如果您计划拥有重要的 JPA 层，请为此使用单独的项目（JPA 项目），否则创建 EJB 项目，您将在其中保留 EJB 和 JPA 实体。在这个项目中，您将开发应用程序的业务层。

然后创建动态 Web 项目，将您的 EJB 项目添加为依赖项并使用 JSF 创建 Web 界面。

最后一步是创建 EAR 项目（企业应用程序项目）并将您的 EJB 项目和动态 Web 项目添加到其中。作为产品，您将获得可在应用服务器上部署的应用程序。

请注意，您还可以使用可以部署在 WAR 应用程序中的新本地 EJB（如果您的目标是 Java EE 6）。在这种情况下，您不需要 EAR。

# codeigniter - 用户配置文件在 codeigniter 中路由配置

> ID：16131265
> 
> 赞同：0
> 
> 时间：2013-04-21T12:48:51.997
> 
> 标签：codeigniter, codeigniter-2

我有一个简单的问题，但我就是想不通。我编写了一个从 url 读取参数（一个参数是用户名）并查询该用户的所有数据并将其显示在页面中的方法。

唯一的问题是该方法是控制器的一部分，自然它必须显示在 url 中（简单地说：不太适合共享。我还必须编写如下字符串：

```
www.domain.com/controller/profile_guest?user=username 
```

我想摆脱用户名之前的所有内容。所以它显示为：

```
www.domain.com/username 
```

现在这里有两个场景需要介绍。

a) 有人浏览目录，点击个人资料名称，然后重定向到个人资料页面。一旦他喜欢他所看到的，他就会复制网址并分享它。

b）有人收到共享链接并点击它，所以应该加载的是带有他收到的 url 的配置文件页面，而不是显示控制器和方法的完整页面。

这有可能实现吗？

谢谢您的帮助 ：）

更新：

```
$route['default_controller'] = "main/index";
$route['404_override'] = ''; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:22:40.887

你可以使用这条路线：

```
$route['(:any)'] = "controller/profile_guest/$1"; 
```

但任何其他路线，您都需要在此路线上方手动编写。例如：

```
$route['controller/view'] = "controller/view";
$route['(:any)'] = "controller/profile_guest/$1"; 
```

**解释：**

路由按照它们出现在您的 routes.php 文件中的顺序进行处理，因此如果您放在`$route['(:any)']`顶部，它将处理任何事情。

假设你有一个控制器和一个函数，并且你需要执行它，例如：`www.domain.com/contoller/function`，你不能执行你的函数，因为它会匹配这个路由`$route['(:any)']`，所以你需要为它定义一个路由，`$route['(:any)']` 例如：

```
$route['contoller/function'] = "controller/function"
$route['(:any)'] = "controller/profile_guest/$1"; 
```

并对所有控制器及其功能做同样的事情，但你必须放在`$route['(:any)']`最后一条路线上。

# date - 如何在 Visual Basic 脚本中将月份作为整数？

> ID：16131267
> 
> 赞同：2
> 
> 时间：2013-04-21T12:49:04.313
> 
> 标签：date, vbscript, monthcalendar

我正在尝试将当前月份作为 Visual Basic 脚本中的短字符串：

```
Dim month
Dim mth

month = Now.Month    ' This doesn't work.
month = Now().Month  ' Tried this too.
month = Month(Now)   ' Also tried this.

mth = MonthName(month, True)  ' (e.g. "Apr" or "Mar") 
```

但是，我不断收到运行时错误：

```
Microsoft VBScript runtime error: Object required: 'Now'
Microsoft VBScript runtime error: Object required: 'Now()'
Microsoft VBScript runtime error: Type mismatch 'Month' 
```

我可以`Now`很好地用作字符串：

```
CStr(Now) 
```

或者作为一个普通的值

```
Dim val
val = Now 
```

如何`Now`用作对象来访问其成员函数？也许我将 Visual Basic 功能与 VB 脚本混淆了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:54:03.987

VBScript 日期不是对象 - 使用 Month(SomeDate) 函数获取 SomeDate 的月份**数**：

```
>> WScript.Echo Month(Now)
>>
4 
```

要获取月份的名称（缩写或完整），请使用：

```
>> WScript.Echo MonthName(Month(Now()),False)
>> WScript.Echo MonthName(Month(Now()),True)
>>
April
Apr 
```

（从@collapsar 窃取，但使用第二个参数的正确（布尔）类型）。

Month() 的官方文档：[这里](http://msdn.microsoft.com/en-us/library/0eeeket2%28v=vs.84%29.aspx) MonthName()：[这里](http://msdn.microsoft.com/en-us/library/58f13257%28v=vs.84%29.aspx)

[给出的示例是“活”代码，如果出现错误，则应归咎于您的代码]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T12:51:48.403

试试这行代码：

```
MonthName(Month(Now()),1) 
```

一个独立的解决方案：

```
Dim imonth
Dim mth

imonth = Month(Now())   ' Also tried this.

mth = MonthName(Month(Now()))

WScript.Echo "mth = " & mth
WScript.Echo "mth_short = )" & MonthName(Month(Now()),1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T13:08:46.080

问题是 Visual Basic 脚本不区分大小写，并且我的变量`month`与内置的`Month`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T12:55:04.810

如[这里](http://www.w3schools.com/vbscript/func_now.asp)和[这里给出的](http://www.w3schools.com/vbscript/func_month.asp)

句法：

```
Month(Now) 
```

# java - while 中的多个条件；第二个条件从不适用

> ID：16131275
> 
> 赞同：1
> 
> 时间：2013-04-21T12:49:36.963
> 
> 标签：java

我有一个复合语句如下：

```
for (int count = 0; count <= passLength; count++)
{            
    while( !(charGenerator >= 65 && charGenerator <= 90) || (charGenerator >= 97 && charGenerator <= 122))
    {
        charGenerator = randNum.nextInt(123);
    }
    System.out.print((char)charGenerator);
    charGenerator = 0;
} 
```

我将它放在 for 循环中，因此它会一次生成许多数字，但我的问题是它永远不会选择第二个范围内的数字，换句话说，我永远不会得到 97 到 122 之间的任何数字。它适用于第一个范围。我如何使它从两组中选择随机数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T12:52:03.240

`!`应用于 的第一项，而不是`||`整个表达式。添加一对括号：

```
while( !((charGenerator >= 65 && charGenerator <= 90) ||
         (charGenerator >= 97 && charGenerator <= 122)) ) 
```

# javascript - 使用 Javascript 创建倒计时

> ID：16131278
> 
> 赞同：1
> 
> 时间：2013-04-21T12:50:02.797
> 
> 标签：javascript, html, countdown

我在搜索创建 JavaScript 倒计时时发现了这个，但它似乎对我不起作用。我很惊讶，因为似乎没有其他人报告有问题。我一定错过了一些基本的东西，我不知道还能去哪里，但在这里。

[https://gist.github.com/nithinbekal/299417](https://gist.github.com/nithinbekal/299417)

这是 JSFiddle 上的代码，它似乎对我也不起作用。

[http://jsfiddle.net/96TWk/](http://jsfiddle.net/96TWk/)

```
function updateWCTime() {
    now      = new Date();
    kickoff  = Date.parse("April 27, 2013 09:00:00");
    diff = kickoff - now;

    days  = Math.floor( diff / (1000*60*60*24) );
    hours = Math.floor( diff / (1000*60*60) );
    mins  = Math.floor( diff / (1000*60) );
    secs  = Math.floor( diff / 1000 );

    dd = days;
    hh = hours - days  * 24;
    mm = mins  - hours * 60;
    ss = secs  - mins  * 60;

        document.getElementById("countdown")
            .innerHTML =
                dd + ' days ' +
                hh + ' hours ' +
                mm + ' minutes ' +
                ss + ' seconds';
}
setInterval('updateWCTime()', 1000 ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:52:16.967

将间隔更改为（现场小提琴：http: [//jsfiddle.net/96TWk/1/](http://jsfiddle.net/96TWk/1/)）

```
setInterval(updateWCTime, 1000 ); 
```

控制台说`updateWCTime`找不到该功能，我不知道究竟是为什么。铜好像还可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T13:06:33.220

您可以通过更改为来修复您的 jsFiddle：

```
setInterval(updateWCTime, 1000 ); 
```

或通过将 jsFiddle 左侧面板上的设置从`onload`更改为任一`no wrap`选项。这是一个仅将 jsFiddle 左侧面板设置更改为“No wrap - in”的演示：http: [//jsfiddle.net/jfriend00/rdj96/](http://jsfiddle.net/jfriend00/rdj96/)

这是为什么它不起作用的解释。当您将字符串传递给`setInterval()`这样的：

```
setInterval('updateWCTime()', 1000 ); 
```

javascript 解释器`eval()`用于评估字符串，并且该函数必须在全局范围内找到。但是，因为您`onload`在 jsFiddle 的左侧面板中，所以您的所有 javascript 都在另一个函数中（例如，不是全局的），因此`eval()`无法找到该函数。

将您的代码更改为

```
setInterval(updateWCTime, 1000 ); 
```

允许 javascript 仅使用普通函数引用，然后它可以在您的本地范围内找到该函数（不必是全局的）。

仅供参考，您几乎不应该将字符串传递给`setInterval()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T14:03:41.307

我将提出一种完全不同的倒计时方法；带有回调的生成器。一开始你可能会想，我为什么要这样做？但是使用生成器可以为您节省大量重复使用的代码。我还使用[`window.setTimeout`](https://developer.mozilla.org/en/docs/DOM/window.setTimeout)了 This 来确保如果您的回调执行时间比您的时间间隔长，您不会发生令人讨厌的事情。

代码中的注释应该可以帮助您了解正在发生的事情。

```
// createCountDown(Date end_time [, Function callback, Integer ms_interval])
// returns an Object properties: ms, ss, mm, hh, dd, MM, yy, timer (current)
// same Object is passed as parameter 1 to callback
function createCountDown(time, callback, ms) {
    var future = time.valueOf(), // cache these to save re-calling them later
        f_ms = time.getUTCMilliseconds(),
        f_ss = time.getUTCSeconds(),
        f_mm = time.getUTCMinutes(),
        f_hh = time.getUTCHours(),
        f_dd = time.getUTCDate(),
        f_MM = time.getUTCMonth(),
        f_yy = time.getUTCFullYear(),
        o = {timer: null}; // an object to make life easier
    var f = function () { // the function that will handle the setTimeout loops
        var d = new Date(), // the current time of each loop
            remain = future - d.valueOf(); // difference (in ms)
        if (remain > 0) {
            // Totals
            o['total_ms'] = remain; // if you'll never need all these, you can
            o['total_ss'] = remain /     1000 | 0; // comment or cut them out
            o['total_mm'] = remain /    60000 | 0;
            o['total_hh'] = remain /  3600000 | 0;
            o['total_dd'] = remain / 86400000 | 0;
            // Differences (via UTC)
            o['ms'] = (1000 + f_ms - d.getUTCMilliseconds()) % 1000; // same
            o['ss'] = (  60 + f_ss - d.getUTCSeconds()     ) %   60;
            o['mm'] = (  60 + f_ss - d.getUTCMinutes()     ) %   60;
            o['hh'] = (  24 + f_hh - d.getUTCHours()       ) %   24;
            o['dd'] = (       f_dd - d.getUTCDate()        )       ; // below
            o['MM'] = (  12 + f_MM - d.getUTCMonth()       ) %   12;
            o['yy'] = (       f_yy - d.getUTCFullYear()    )       ;
            if (o['dd'] < 0) { // fix for negative days
                d.setUTCMonth(d.getUTCMonth() + 1);
                d.setUTCDate(0); // using number of days in current month
                o['dd'] + d.getUTCDate();
            }
            callback(o); // invoke your callback
            o.timer = window.setTimeout(f, ms); // set up next loop
        }
    }
    ms || ms === 0 || (ms = 200); // default ms if not set
    callback || (callback = function () {}); // default empty fn
    f(); // start off the whole looping
    return o;
} 
```

现在写下你的`callback`，这要短得多，因为你已经把长的东西排除在外了。`console.log`便于演示目的。

```
function updateWCTime(o) {
    console.log(
        o['total_dd'] + ' days ' +
        o['hh'] + ' hours ' +
        o['mm'] + ' minutes ' +
        o['ss'] + ' seconds'
    );
} 
```

最后，启动它。

```
createCountDown(new Date("April 27, 2013 09:00:00"), updateWCTime); 
```

# mysql - Long mysql query

> ID：16131279
> 
> 赞同：1
> 
> 时间：2013-04-21T12:50:07.583
> 
> 标签：mysql, sql

I have a query

```
SELECT * 
  FROM tbl_auction_listing 
  JOIN tbl_user ON tbl_auction_listing.user_id = tbl_user.user_id 
  JOIN tbl_subject ON tbl_auction_listing.subject_id = tbl_subject.subject_id 
  JOIN tbl_medium ON tbl_auction_listing.medium_id = tbl_medium.medium_id 
  JOIN tbl_style ON tbl_auction_listing.style_id = tbl_style.style_id 
 WHERE tbl_auction_listing.item_number = '2736503389’ 
```

which is causing some issues with the site speed, sometimes to the point the site crashes. Would it be better for me to split this into multiple queries?

Indexes

```
tbl_auction_listing 0   PRIMARY 1   auction_listing_id  A   18739               BTREE       
tbl_auction_listing 1   Listing - subject_id    1   subject_id  A   32          YES BTREE       
tbl_auction_listing 1   Listing - medium_id 1   medium_id   A   32          YES BTREE       
tbl_auction_listing 1   Listing - style_id  1   style_id    A   38          YES BTREE       
tbl_auction_listing 1   Listing - colour_id 1   colour_id   A   30          YES BTREE       
tbl_auction_listing 1   Listing - user_id   1   user_id A   1441                BTREE       
tbl_auction_listing 1   Listing - price_id  1   price_id    A   20          YES BTREE       
tbl_auction_listing 1   Listing - status    1   status  A   8           YES BTREE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:58:27.413

您可以：
1\. 增加 Web 服务器的默认 http 请求时间
2\. 在 tbl_auction_listing.item_number 上建立索引
3\. 缓存一些不太容易经常更改的表
4\. 增加应用程序和数据库的 sql 查询超时服务器
5\. 非规范化数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:58:43.640

不，您最好将此查询分解为多个查询。

最好在数据库中添加索引以加快查询速度。每个子表都应该在其主键上有一个索引。例如，`tbl_style`应该有一个索引`tbl_style(style_id)`等等。

您的索引“方向错误”。它们应该在参考表本身上，而不是（或不仅）在主表上。

# javascript - 如何在 0:0 停止 JavaScript 计时器

> ID：16131280
> 
> 赞同：2
> 
> 时间：2013-04-21T12:50:20.697
> 
> 标签：javascript, timer

我有这个计时器代码，我试图让它在 0:0 停止，但它一直变成负数。任何解决此问题的想法都会有所帮助。

```
<html>
  <head>
    <script>
      function startTimer(m,s)
      {
        document.getElementById('timer').innerHTML= m+":"+s;
        if (s==0)
        {
          if (m == 0)
          {
            clearTimeout(t);
          }
          else if (m != 0)
          {
            m = m-1;
            s = 60;
          }
        }
        s = s-1;
        t=setTimeout(function(){startTimer(m,s)},1000);
      }
    </script>
  </head>

  <body>
    <button onClick = "startTimer(0,5)">Start</button>

    <p id = "timer">00:00</p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T12:53:43.427

你总是在 结束时触发一个新的计时器`startTimer`，即使你达到零。快速解决方法是添加`return;` ~~after~~而不是`clearTimeout(t);`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:21:15.383

只是一个评论 - 该功能可以更苗条：

```
function pad(n) {
  return (n<10? '0':'') + n;
}

function startTimer(m,s) {
  document.getElementById('timer').innerHTML = pad(m) + ":" + pad(s);
  s -= s? 1 : m-- && -59;
  if (m != -1) 
    setTimeout(function(){startTimer(m,s)},1000);
} 
```

它会慢慢漂移，因为 setTimeout 没有在指定的时间运行，因此它应该使用日期对象将延迟调整到下一整秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T13:32:42.987

您可以将超时函数设为外部并在时间超过 0:0 时调用它，如下所示：

```
 function startTimer(m,s)
  {
    document.getElementById('timer').innerHTML= m+":"+s;
    if (s==0)
    {
      if (m == 0)
      {
        alert('done');
      }
      else if (m != 0)
      {
        m = m-1;
        s = 60;
        t();
      }
    }
    s = s-1;
    t();
    function t(){setTimeout(function(){startTimer(m,s)},1000)};
  } 
```

或速记版本：

```
 function startTimer(m,s)
  {
    document.getElementById('timer').innerHTML= m+":"+s;
      (s == 0) ? (m == 0 ? alert('done') : (m--, s = 60, t())) : (s--, t());
      function t(){ setTimeout(function(){startTimer(m,s)},1000)};
  } 
```

[jsfiddle](http://jsfiddle.net/arcm111/8Lkaq/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-21T12:56:28.253

它是我写的旧代码：

```
 function CountDown(TimeToCount){

        if(First)
        {
            var startDatum=new Date();
            First = false;
            date.a = startDatum;
            bye = TimeToCount-200;
        }
        if(bye > 0 && CDown){
            var zielDatum=new Date();
            bye =Math.abs(Math.floor(( ((zielDatum-(TimeToCount-200)-date.a)/1000) - 0.1)*10)/10);

            if ( bye * 10 % 10 ==0)

                $(".CountDown").html(bye+".0");
            else
                $(".CountDown").html(bye);
            setTimeout(function(){CountDown(TimeToCount)},20);

        }
            else
        {           $(".CountDown").html("0.0");

        }
               }` 
```

# design-patterns - Design pattern: Only instanciate class if it is not a duplicate of an already instanciated object

> ID：16131283
> 
> 赞同：1
> 
> 时间：2013-04-21T12:50:31.187
> 
> 标签：design-patterns, factory

I have a class `RT` modelling a rooted tree (essentially).

Let's say, I have already an instance `rt1` holding the following tree:

```
 1
  / \
 0   2 
```

Now, I *could* construct another instance (`rt2`) holding the following tree:

```
 5
  / \
 4   9 
```

However, it is clear that these two trees are isomorphic (i.e. they have the same structure, and are the same up to renaming of nodes). I already have a routine computing whether two rooted trees are isomorphic (so this subproblem is already solved).

Now my question: For my purpose, I'd like a design pattern that prevents the program from actually constructing a new instance for `rt2`, but instead just giving the reference to the element `rt1` (which is already constructed).

On the other hand, consider another tree (`rt3`), namely the following:

```
 1
   / \
  2   5
 /
7 
```

The construction routine called for this graph should create a new instance representing this graph (since this is not isomorphic to `rt1`, and - thus - has not been generated up to now).

Is there such a thing?

I looked at the factory pattern, but I'm not sure (factory seems to *always* construct a new element). Can anybode tell me kind of "best-practice" way of solving this particular problem.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:15:21.950

您可以使用享元模式。

![1](https://upload.wikimedia.org/wikipedia/ru/e/ee/Flyweight.gif)

在 flyweights 数组中，您保存所有树，其中树的类型为`ITree`( `Flyweight`)。`ConcreteFlyweight`可以称为`BinaryTree`或，作为你的名字`RT`。您必须在树实现中实现相等的操作才能在`GetFlyweight`方法中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:59:36.263

通常，当您想要一个对象的一个​​实例并想要返回该单个实例时，您会使用 Singleton。不完全确定您是如何将其与创建树联系起来的，但它可能是 Singelton 和 Factory 的混合体。您谈论的所有模式都是创建类型模式：[http ://en.wikipedia.org/wiki/Creational_pattern](http://en.wikipedia.org/wiki/Creational_pattern)

这里是单例的描述：[http ://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T13:00:03.330

在我看来，您希望构建一个原型实例。在这种情况下，您需要使用原型设计模式。

见： http: [//www.dofactory.com/Patterns/PatternPrototype.aspx](http://www.dofactory.com/Patterns/PatternPrototype.aspx)

# iphone - Xcode 错误“无法创建应用程序容器”

> ID：16131284
> 
> 赞同：0
> 
> 时间：2013-04-21T12:50:39.790
> 
> 标签：iphone, ios, xcode

我正在尝试构建我的第一个 iPhone 应用程序。我有一个许可证，我刚刚下载并安装了一个配置文件。

早些时候我收到了“没有匹配的配置文件”的错误。通过从开发人员门户刷新（在管理器中，编辑器->从开发人员门户刷新）解决了这个问题。

现在，我尝试编译，我收到消息“构建成功”，但之后我（两次）收到一个弹出窗口，错误为“无法创建应用程序容器”。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:09:49.663

尝试删除所有配置文件并再次单击刷新。还要检查构建设置是否使用正确的分析器。

# java - 用java创建对象CoreNLP

> ID：16131292
> 
> 赞同：0
> 
> 时间：2013-04-21T12:51:19.927
> 
> 标签：java, netbeans-7, stanford-nlp

```
public static void main(String[] args) {
   Properties props = new Properties();
props.put("annotators", "tokenize, ssplit, pos, lemma, ner, parse, dcoref");
StanfordCoreNLP pipeline = new StanfordCoreNLP(props);

// read some text in the text variable
String text = "the quick fox jumps over the lazy dog";

// create an empty Annotation just with the given text
Annotation document = new Annotation(text);

// run all Annotators on this text
pipeline.annotate(document);

// these are all the sentences in this document
// a CoreMap is essentially a Map that uses class objects as keys and has values with custom types
List<CoreMap> sentences = document.get(SentencesAnnotation.class);

for(CoreMap sentence: sentences) {
  // traversing the words in the current sentence
  // a CoreLabel is a CoreMap with additional token-specific methods
  for (CoreLabel token: sentence.get(TokensAnnotation.class)) {
    // this is the text of the token
    String word = token.get(TextAnnotation.class);
    // this is the POS tag of the token
    String pos = token.get(PartOfSpeechAnnotation.class);
    // this is the NER label of the token
    String ne = token.get(NamedEntityTagAnnotation.class);       
  }

  // this is the parse tree of the current sentence
  Tree tree = sentence.get(TreeAnnotation.class);

  // this is the Stanford dependency graph of the current sentence
  SemanticGraph dependencies = sentence.get(CollapsedCCProcessedDependenciesAnnotation.class);
}

// This is the coreference link graph
// Each chain stores a set of mentions that link to each other,
// along with a method for getting the most representative mention
// Both sentence and token offsets start at 1!
Map<Integer, CorefChain> graph = 
  document.get(CorefChainAnnotation.class);
} 
```

}

我想运行我的程序，但收到此错误

```
Loading classifier from edu/stanford/nlp/models/ner/english.all.3class.distsim.crf.ser.gz ... Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
at java.lang.StringBuilder.toString(StringBuilder.java:405)
at java.io.ObjectInputStream$BlockDataInputStream.readUTFBody(ObjectInputStream.java:3066)
at java.io.ObjectInputStream$BlockDataInputStream.readUTF(ObjectInputStream.java:2862)
at java.io.ObjectInputStream.readString(ObjectInputStream.java:1636)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1339)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:370)
at java.util.HashMap.readObject(HashMap.java:1154)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1891)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1796)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1989)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1913)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1796)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1348)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:370)
at edu.stanford.nlp.ie.crf.CRFClassifier.loadClassifier(CRFClassifier.java:2255)
at edu.stanford.nlp.ie.AbstractSequenceClassifier.loadClassifier(AbstractSequenceClassifier.java:1444)
at edu.stanford.nlp.ie.AbstractSequenceClassifier.loadClassifier(AbstractSequenceClassifier.java:1421)
at edu.stanford.nlp.ie.AbstractSequenceClassifier.loadClassifier(AbstractSequenceClassifier.java:1500)
at edu.stanford.nlp.ie.AbstractSequenceClassifier.loadClassifier(AbstractSequenceClassifier.java:1487)
at edu.stanford.nlp.ie.crf.CRFClassifier.getClassifier(CRFClassifier.java:2386)
at edu.stanford.nlp.ie.ClassifierCombiner.loadClassifierFromPath(ClassifierCombiner.java:130)
at edu.stanford.nlp.ie.ClassifierCombiner.loadClassifiers(ClassifierCombiner.java:116)
at edu.stanford.nlp.ie.ClassifierCombiner.<init>(ClassifierCombiner.java:98)
at edu.stanford.nlp.ie.NERClassifierCombiner.<init>(NERClassifierCombiner.java:64)
at edu.stanford.nlp.pipeline.StanfordCoreNLP$6.create(StanfordCoreNLP.java:500)
at edu.stanford.nlp.pipeline.StanfordCoreNLP$6.create(StanfordCoreNLP.java:471) 
```

我不知道如何增加堆大小或此错误与我无法理解的另一个问题有关。任何人都可以帮助我吗？（对不起，我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:15:05.333

如果你的项目是java项目--->右键项目--->选择属性--->点击运行--->在右侧你会看到VM选项，你需要输入堆设置。

例子：

```
-Xmx512m 
```

注意：如果 512 不起作用，将其增加到 1024 并尝试。

# python - 手动枚举列表

> ID：16131294
> 
> 赞同：0
> 
> 时间：2013-04-21T12:51:29.733
> 
> 标签：python

我试图弄清楚如何手动枚举列表但是我被卡住了，因为我无法弄清楚如何拆分`data`列表。这是我到目前为止的代码..

```
enumerated_list = []
data = [5, 10, 15]

for x in (data):
    print(x)

for i in range(len(data)):
    enumerate_rule = (i, x)
    enumerated_list.append(enumerate_rule)

print(enumerated_list) 
```

这打印出来..

```
5
10
15
[(0, 15), (1, 15), (2, 15)] 
```

当我追求的是`[(0, 5), (1, 15), (2, 15)]`. 我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T12:52:55.967

使用[内置](http://docs.python.org/3.3/library/functions.html#enumerate)：[_`enumerate()`](http://docs.python.org/3.3/library/functions.html#enumerate)

```
>>> list(enumerate([5, 15, 15]))
[(0, 5), (1, 15), (2, 15)] 
```

您的原始代码的错误在于您`x`在循环中使用的事实，但是，`x`在该循环中没有改变，它只是从您打印值的上一个循环中遗留下来。

但是，这种方法是一种不好的方法。修复它需要按索引循环，这是 Python 不打算做的事情 - 它速度慢且难以阅读。相反，我们按值循环。`enumerate()`内置程序可以为我们完成这项工作，因为这是一项相当常见的任务。

如果您真的不想使用`enumerate()`（这从来没有真正有意义，但可能是一种任意限制，试图暂时教给您其他东西），那么还有更好的方法：

```
>>> from itertools import count
>>> list(zip(count(), [5, 15, 15]))
[(0, 5), (1, 15), (2, 15)] 
```

这里我们使用[`zip()`](http://docs.python.org/3.3/library/functions.html#zip)，这是用于一次循环两组数据的python函数。这从每个可迭代返回第一个值的元组，然后从每个返回第二个值的元组，等等......这给了我们在与 结合时我们想要的结果[`itertools.count()`](http://docs.python.org/3.3/library/itertools.html#itertools.count)，它在锡上所说的那样。

如果你真的觉得需要手动构建一个列表，那么做一些非 Python 的更 Python 的方式是：

```
enumerated_list = []
count = 0
for item in data:
    enumerated_list.append((count, item))
    count += 1 
```

但是请注意，通常，人们会使用[列表推导](http://www.youtube.com/watch?v=pShL9DCSIUw)来构建这样的列表 - 在这种情况下，一旦这样做，使用早期方法之一会更有意义。这种列表的产生效率低下且难以阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T12:53:55.537

由于`x` 遍历 `data 中的每个元素，因此在末尾：

```
for x in (data):
    print(x) 
```

`x`将是最后一个元素。这就是为什么你得到`15`每个元组中的第二个元素：

```
[(0, 15), (1, 15), (2, 15)] 
```

你只需要一个循环：

```
for i in range(len(data)):
    enumerate_rule = (i, data[i]) # data[i] gets the ith element of data
    enumerated_list.append(enumerate_rule) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T12:54:01.650

`enumerate_rule = (i, x)`是问题所在。`x`您每次都使用相同的值（ ，列表中的最后一项）。将其更改为`enumerate_rule = (i, data[i])`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T13:31:29.900

我会使用普通的“for 循环”，但使用 enumerated()，因此您可以在循环中使用索引 i：

```
enumerated_list=[]
data = [5, 10, 15]

for i,f in enumerate(data):
    enumerated_list.append((i,f))
print enumerated_list 
```

结果：

```
[(0, 5), (1, 15), (2, 15)] 
```

# tcl - The real namespace of a class

> ID：16131296
> 
> 赞同：2
> 
> 时间：2013-04-21T12:51:34.157
> 
> 标签：tcl

Inside a constructor, destructor or method, can I find out what namespace the class was created in, so I can just call `card` in my other classes instead of hard coding it as `blackjack::card`?

```
namespace eval blackjack {

  oo::class create card {
    ...
  }

  oo::class create deck {
    constructor {} {
      my variable cards
      set cards {}
      for {set suit 0} {$suit < 4} {incr suit} {
        for {set value 0} {$value < 13} {incr value} {
          lappend cards [blackjack::card new $suit $value]
        }
      }
    }
    ...
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:36:45.430

## 选项 0：完全限定名称

您已经知道这一点，而且我*实际上*几乎总是这样做，因为它直接而简单。（这是“选项 0”，因为它没有提出问题。）

## 选项1：`uplevel`

你可以这样做：

```
lappend cards [uplevel 1 [list card new $suit $value]] 
```

但这取决于`deck new`从正确的命名空间调用。

## 选项 2：类名手术

如果我们假设这两个类在同一个命名空间中：

```
constructor {} {
    set cardClass [namespace qualifiers [self class]]::card
    # ...
        lappend cards [$cardClass new $suit $value]
    # ...
} 
```

## 选项 3：扩展对象的`namespace path`

如果您添加到对象的路径（注意：现在必须在构造函数中基于每个对象完成），那么您可以简单地引用另一个类：

```
constructor {} {
    namespace path [list {*}[namespace path] ::blackjack]
    # ...
        lappend cards [card new $suit $value]
    # ...
} 
```

这里要注意的主要事情是 TclOO 设置了一个重要的默认值`namespace path`（你认为这是从哪里来的？`next`）`self`

## 选项 4：创建命令链接

您还有另一个选择，那就是使用`namespace export`并`namespace import`创建一个命令链接。

首先，从命名空间中导出相关类`::blackjack`：

```
namespace eval ::blackjack {
    namespace export card;   # You probably want to export “deck” as well

    # ...
} 
```

然后，在构造函数中进行导入：

```
constructor {} {
    namespace import ::blackjack::card
    # ...
        lappend cards [card new $suit $value]
    # ...
} 
```

## `deck`选项 5：在实例中创建一个特殊的子类

*这个很棘手！*

```
constructor {} {
    oo::class create card {superclass ::blackjack::card}
    # ...
        lappend cards [card new $suit $value]
    # ...
} 
```

这也意味着当牌组消失时，卡片将被*自动删除；*您不需要在析构函数中销毁它们（因为它们的实际类将被自动删除，并且会杀死实例）。这可能是也可能不是你需要的。（它确实提供了一种对 UML 组合关系进行建模的好方法；TDBC 在内部使用这种方法的变体来将语句与连接和结果集与语句相关联。）

# android - Does Dialog goes to Stack also? I want dialog above another dialog

> ID：16131297
> 
> 赞同：0
> 
> 时间：2013-04-21T12:51:40.467
> 
> 标签：android, dialog, stack, multiple-instances

I would like to know if dialogs go to stack, as Activities go.. Because I have now a dialog "A", and I can click on a button that opens a new dialog "B".. But if I close the dialog "B", there is no longer the dialog "A". And I dont want to create a new Dialog "A" I want to continue as the way I leave it..

The close button of "B" does nothing.. it has a null onClickListener:

```
new AlertDialog.Builder(activity).setNegativeButton("Exit", null).show(); 
```

Can someone help me? Thanks in advance ;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:31:50.040

在 Android 中，您根本无法堆叠`Dialog`实例。您可以自己管理工作流程（A -> B -> A）获得相同的结果，但您必须以某种方式自己保存/恢复 A 状态。

所以你可以选择：

1.  切换到`DialogFragment`并使用片段 backstack 及其实例管理
2.  子类 A 和 B`Activity`并应用于`Theme.Dialog`它们

# spring - 在 Jetty 中使用 Spring Aspects

> ID：16131311
> 
> 赞同：0
> 
> 时间：2013-04-21T12:53:01.287
> 
> 标签：spring, jetty, aop, aspects

我有一个使用 Spring 3.1 的 Aspects 的应用程序。它与 Tomcat 7 完美运行。建议的方法按预期调用。

我希望它与 Jetty 一起工作。我之前在 Spring 2.0 和 Jetty 中使用过 Aspects，除了添加 JVM 代理之外没有任何重大问题。但是，我对 Jetty 6.22 和我的 Spring 3.1 应用程序不满意。因此，我使用 javaagent 启动 Jetty

-javaagent:./spring-instrument-3.1.3.RELEASE.jar

Spring Instrument jar 在我的 CWD 中。

StackOverFlow 上有一个类似的问题，但没有人能够提出一个有效的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:05:51.937

首先，我强烈建议使用 jetty 9 而不是 jetty 6。Jetty 6 已经过时了，它缺少很多功能和错误修复！

除此之外，您是否在配置中的某处使用了 --exec 选项？这将启动第二个 jvm，并且可能没有使用 javaagent 设置位置启动第二个 jvm。您可以在 *nix 系统上使用“ps -ef | grep jetty”来验证这一点。

# javascript - 使用 mysql 查询创建嵌套的 json 对象

> ID：16131312
> 
> 赞同：0
> 
> 时间：2013-04-21T12:53:13.130
> 
> 标签：javascript

我目前有一个硬编码的 json 文件。这是一个片段：

```
 {
  "name": "Projects",
  "children": [
   {
     "name":"Project_Category(example:MobileApps)", 
     "description":"category",
     "children": [{
     "name":"Sub_category(example:MusicPlayer)",
     "description":"some_description(example:The music app will play music from an android device...)",
         "children":[
             {//child 1 of the MusicPlayer subcategory
             "name": "Actual_project_name(example:JukeBox)",
         "description":"Actual_project_description",
             "children":[
                 {"name":"projectGroupMember1", "email":"groupMember1Email@yahoo.com"},
         {"name":"projectGroupMemeber2", "email":"groupMember2Email@yahoo.com"}
              ]}, 
              { //child 2 of the MusicPlayer subcategory
        "name": "another_project_title",
        "description":"another_project_description",
                "children":[
            {"name":"projectGroupMember1", "email":"groupMember1Email@gmail.com"},
            {"name":"projectGroupMember2", "email":"groupMember2Email@gmail.com"}
                 ]
              }
           ]//end of MusicPlayer's children
    }, //end of MobileApps children
... 
```

拥有一个存储所有这些数据的数据库，我一直在尝试使用 php 和嵌套的 mysql 查询将此输出生成到一个 json 文件，我将用于其他任务（数据可视化）。我的目标是在每次打开 Web 应用程序时生成这个文件，这样我就可以从数据库中获得它的最新版本。但是，我在使用嵌套的 mysql 查询来创建此输出时遇到了困难。所以我的问题是，考虑到我的 json 文件的结构方式，这可行吗？我应该做更好的方法吗？任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:21:59.490

mysql 不会为您生成任何嵌套结构。你必须自己做。

有许多框架可以为您做到这一点。问题是你有什么服务器。

例如，Php 的 cakephp 可以为您提供非常相似的结构。带有代码的 ASP.NET MVC 也可以做到这一点。有很多可能性。

如果你想在没有任何框架的情况下这样做，我们仍然需要知道你使用哪个服务器。

# ruby - ruby 哈希表使用现有键插入新元素

> ID：16131313
> 
> 赞同：1
> 
> 时间：2013-04-21T12:53:27.410
> 
> 标签：ruby, hashtable

假设我有一个单词数组，不同的单词可能有不同的长度，我想按长度组织它们。所以稍后我可以通过给出长度参数来访问所有具有相同长度的单词。

```
words = Array.new()
#fill words by reading file

words.each do |word|
    #add word to hash table, key is the length of this word
    #what can I do?
end 
```

我检查了堆栈溢出中的其他问题和答案，但没有一个告诉如何在旧键下插入一个新值，同时将它们全部保持在数组形式中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T12:58:30.837

从文件中读取单词后，您可以使用`group_by`创建哈希：

```
data = %w[one two three four five six seven eight nine ten]
hash = data.group_by{ |w| w.size } 
```

那时，`hash`是：

```
{
    3 => [
        [0] "一",
        [1] “二”，
        [2]“六”，
        [3]“十”
    ],
    5 => [
        [0]“三”，
        [1] “七”，
        [2]“八”
    ],
    4 => [
        [0]“四”，
        [1]“五”，
        [2]“九”
    ]
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:56:33.043

```
%w(he is a good man).inject({}){|temp,ob| temp[ob.length] ||= [];temp[ob.length] = (temp[ob.length] + [ob]);temp} 
```

*输出：*

```
{2=>["he", "is"], 1=>["a"], 4=>["good"], 3=>["man"]} 
```

* * *

```
require 'pp'
pp %w[one two three four five six seven eight nine ten].inject({}){|temp,ob| temp[ob.length] ||= [];temp[ob.length] = (temp[ob.length] + [ob]);temp} 
```

*输出：*

```
{3=>["one", "two", "six", "ten"],
 5=>["three", "seven", "eight"],
 4=>["four", "five", "nine"]} 
```

# ruby-on-rails - Feature Spec passes every time in RSpec, Fails in Jenkins

> ID：16131314
> 
> 赞同：0
> 
> 时间：2013-04-21T12:53:30.103
> 
> 标签：ruby-on-rails, rspec, jenkins

I have a users factory:

```
FactoryGirl.define do
  factory :user, :aliases => [:assignee] do
    sequence(:email) { |n| "foo#{n}@example.com" }
    sequence(:username) { |n| "foo#{n}@example.com" }
    profile

  end
end 
```

And a jobs factory:

```
FactoryGirl.define do
  factory :job do
    association :assignee, factory: :user
    description "MyText"
    completion_comment "MyText"
    job_type "MyString"
    ...
  end
end 
```

Which are loaded into my jobs_feature_spec_helper:

```
def add_valid_job
  click_job
  within("#add_job") do
    select 'foo1@example.com', from: 'Assignee'
    fill_in_html("job__textarea", {:with => job[:description]})
    click_button "Save"
  end
end 
```

My feature page spec passes in RSpec on my machine, but my employer sent me an email saying that the spec failed in Jenkins. Here's the message he sent:

```
Unable to find option "foo1@example.com <mailto:foo1@example.com>"
./spec/support/job_feature_spec_helpers.rb:11:in `block in add_valid_job'
./spec/support/job_feature_spec_helpers.rb:10:in `add_valid_job'
./spec/features/jobs/edit_job_line_spec.rb:8:in `block (2 levels) in <top (required)>' 
```

So, it appears that when Jenkins runs the spec, it's not finding the assignee from the drop-down list, yet RSpec is. I have never personally used Jenkins, so if anyone has any advice that may help, I'd appreciate hearing it. Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:20:51.597

问题在于序列号。您不能`'foo1@example.com'`在测试中使用硬编码。

不能保证序列号会从1开始。我没有时间去弄清楚原因，只是知道事实。在我的测试中，我经常在运行几次测试后从几十处看到它。

我建议您从 db 中由 FactoryGirl 创建的现有用户那里获取电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T17:25:11.013

尽管这不是您的问题，但在 jenkins 和测试环境之间获得不同结果的一个可能原因是`different DBs`在每个环境中使用。

就我而言，我`sqlite`在詹金斯和`postgres`测试中使用，这产生了不同的结果。

在本地你可以运行

```
RAILS_ENV="jenkins" bundle exec rspec 
```

在 jenkins 环境中运行规范。

# python - 授予 django 应用程序 root 访问权限？

> ID：16131319
> 
> 赞同：2
> 
> 时间：2013-04-21T12:53:52.477
> 
> 标签：python, django, root, sudo

我正在尝试使用 django 构建一个 api，它应该使用 POST 参数更改 iptables。我正在使用 django 1.4、[djangorestframework](http://django-rest-framework.org/)、[python-iptables](https://github.com/ldx/python-iptables)。我面临的问题是 python-iptables 需要 root 访问权限才能更改 iptables 规则。我可以通过执行更改 iptables 规则，`$ sudo python`并且可以从 python shell 更改这些规则。我也可以通过使用[iptdump](https://pypi.python.org/pypi/iptdump)模块来更改这些规则，该模块接受 iptables 参数并创建这些规则，我以后可以将其保存在文件（iptables.rules.txt）中并使用 fabric 的`local('sudo iptables-restore < iptables.rules.txt')`. 但这总是会提示用户输入 root 密码。有没有办法可以给 django app root 权限，这样我就可以绕过 sudo 密码提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T16:00:31.400

[如果您确实需要应用程序的一部分以 root 身份运行，您可以将其重写为守护程序，并按照此答案](https://stackoverflow.com/a/4749073/2248275)中的建议从主 Django 应用程序与其通信。如果以下替代方案不符合您的要求，我只会推荐它。

替代`sudo iptables-restore < iptables.rules.txt`方法要简单得多，只需将其添加到您的**/etc/sudoers**文件中，告诉 sudo 不要仅询问此命令的密码：

```
djangouser ALL=(ALL) NOPASSWD: /sbin/iptables-restore 
```

`djangouser`运行 Django 进程的用户在哪里。

**编辑：**`iptables-restore`您可以通过将新的 iptables 直接发送到进程来避免编写中间文件：

```
import iptdump
import subprocess

ipt = iptdump.Iptables()
proc = subprocess.Popen(['sudo', '/sbin/iptables-restore'],
                        stdin=subprocess.PIPE)
proc.communicate(ipt.dump()) 
```

# bash - Shell script using curl to loop through urls

> ID：16131321
> 
> 赞同：28
> 
> 时间：2013-04-21T12:53:55.683
> 
> 标签：bash, loops, curl

I've been trying to create a simple script that will take a list of queries from a .txt file, append the main url variable, then scrape the content and output it to a text file.

Here's what I have so far:

```
#!/bin/bash

url="example.com/?q="
for i in $(cat query.txt); do
    content=$(curl -o $url $i)
    echo $url $i
    echo $content >> output.txt
done 
```

list:

```
images
news
stuff
other 
```

error log:

```
curl: (6) Could not resolve host: other; nodename nor servname provided, or not known
example.com/?q= other 
```

If I use this command straight from the command line I get some output into the file:

```
curl -L http://example.com/?q=other >> output.txt 
```

Ultimately I would like the output to be:

```
fetched:    http://example.com/?q=other
content:    the output of the page

followed by the next query in the list. 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-21T12:58:41.967

使用更多报价！

*   [http://mywiki.wooledge.org/Quotes](http://mywiki.wooledge.org/Quotes)
*   [http://mywiki.wooledge.org/Arguments](http://mywiki.wooledge.org/Arguments)
*   [http://wiki.bash-hackers.org/syntax/words](http://wiki.bash-hackers.org/syntax/words)

试试这个：

```
url="example.com/?q="
for i in $(cat query.txt); do
    content="$(curl -s "$url/$i")"
    echo "$content" >> output.txt
done 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-21T13:07:35.270

你有嵌套引号，试试这样的：

```
#!/bin/bash

url=https://www.google.fr/?q=
while read query
do
    content=$(curl "{$url}${query}")
    echo $query
    echo $content >> output.txt
done < query.txt 
```

# wpf - How to Cancel windowManager.ShowDialog() from ViewModel

> ID：16131329
> 
> 赞同：0
> 
> 时间：2013-04-21T12:55:03.277
> 
> 标签：wpf, caliburn.micro

I have a ShellViewModel which loads a Modal Dialog. The Dialog's ViewModel has its OnActivate() override, where it gathers the data to be displayed on the Dialog. I would like to know how can we ask the WindowManager to cancel its ShowDialog based on a condition in OnActivate of the ViewModel backing the dialog.

For example, lets say that I have following code in ShellViewModel which tries to load a modal dialog based on StationOpenViewModel

```
public class ShellViewModel : Conductor<object>, IShell, IHandle<ConnectionChangedEvent> {
    public void ShowOpenStationPage() {
        StationOpenViewModel viewModel = container.GetExportedValue<StationOpenViewModel>();
        windowManager.ShowDialog(viewModel);
    }
    ...
} 
```

and here is to code of OnActivate override of the StationOpenViewModel

```
public class StationOpenViewModel : Screen {
    ...
    protected override void OnActivate() {
        try {
            using (StationRepository stationRepository = new StationRepository()) {
            //code to get Station Data
        }
        catch (Exception ex) {
            //Here I have no data, so there is no point in showing the window. 
            //How to cancel showDialog() for this viewModel
        }
    ...
} 
```

So in the above code, if I get Exception in OnActivate override, I don't have any Station data to show and I would like to cancel the showDialog() for the StationOpenViewModel. I tried using TryClose(), but if I do so, the WindowManager.ShowDialog() throws exception saying that the operation is invalid.

In summary, if I call WindowManager.ShowDialog() for a dialog backed by some ViewModel, then in that ViewModel how do I cancel the ShowDialog() operation.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:48:49.147

CM 源码中的`ShowDialog()`实现是：

```
public virtual void ShowDialog(object rootModel, object context = null, IDictionary<string, object> settings = null) 
{
    var view = EnsureWindow(rootModel, ViewLocator.LocateForModel(rootModel, null, context));
    ViewModelBinder.Bind(rootModel, view, context);

    var haveDisplayName = rootModel as IHaveDisplayName;
    if(haveDisplayName != null && !ConventionManager.HasBinding(view, ChildWindow.TitleProperty)) {
        var binding = new Binding("DisplayName") { Mode = BindingMode.TwoWay };
        view.SetBinding(ChildWindow.TitleProperty, binding);
    }

    ApplySettings(view, settings);

    new WindowConductor(rootModel, view);

    view.Show();
} 
```

完整来源：

[http://caliburnmicro.codeplex.com/SourceControl/changeset/view/ae25b519bf1e46a506c85395f04aaffb654c0a08#src/Caliburn.Micro.Silverlight/WindowManager.cs](http://caliburnmicro.codeplex.com/SourceControl/changeset/view/ae25b519bf1e46a506c85395f04aaffb654c0a08#src/Caliburn.Micro.Silverlight/WindowManager.cs)

使用默认实现似乎没有很好的方法来做到这一点。您可能应该实现自己的`WindowManager`并将原始实现子类化

上面的`WindowConductor`代码文件负责窗口的生命周期，因此您的虚拟机可以实现的附加接口可以很好地工作：

```
public interface ICancelActivate
{
    public bool ActivationCancelled { get };
} 
```

然后只需将您的`MyWindowConductor`实现更改为：

```
 public MyWindowConductor(object model, ChildWindow view) 
    {
            // Added this field so the window manager can query the state of activation (or use a prop if you like)
            public bool ActivationCancelled;

            this.model = model;
            this.view = view;

            var activatable = model as IActivate;
            if (activatable != null) 
            {
                activatable.Activate();
            }

            // Added code here, check to see if the activation was cancelled:
            var cancelActivate = model as ICancelActivate;
            if(cancelActivate != null)
            {
                ActivationCancelled = cancelActivate.ActivationCancelled;                   
                if(ActivationCancelled) return; // Don't bother handling the rest of activation logic if cancelled
            }

            var deactivatable = model as IDeactivate;
            if (deactivatable != null) {
                view.Closed += Closed;
                deactivatable.Deactivated += Deactivated;
            }

            var guard = model as IGuardClose;
            if (guard != null) {
                view.Closing += Closing;
            }
        } 
```

然后停止显示视图：

```
 // This is in 'ShowDialog' - you can override the default impl. as the method is marked virtual        
    ApplySettings(view, settings);

    // Get a ref to the conductor so you can check if activation was cancelled
    var conductor = new MyWindowConductor(rootModel, view);

    // Check and don't show if we don't need to
    if(!conductor.ActivationCancelled)
        view.Show(); 
```

显然我只是把它放在一起，所以它可能不是最好的方法，我会仔细看看它在哪里留下你的应用程序的状态

你的虚拟机只是实现了这个：

```
public class StationOpenViewModel : Screen, ICancelActivation {

    private bool _activationCancelled;
    public bool ActivationCancelled { get { return _activationCancelled; } }

    ...
    protected override void OnActivate() {
        try {
            using (StationRepository stationRepository = new StationRepository()) {
            //code to get Station Data
        }
        catch (Exception ex) {
            _activationCancelled = true;
        }
        ... 
 } 
```

...当然，您可能有更好的方法来检查您是否需要首先打开虚拟机 - 我不确定它们会是什么，但仍然值得考虑

**编辑：**

我不只是在`WindowManager`...中这样做的原因

```
 new WindowConductor(rootModel, view);

    var cancel = rootModel as ICancelActivation;

    if(cancel == null || !cancel.ActivationCancelled) // fixed the bug here!
        view.Show(); 
```

是双重的 - 1：你仍然让`WindowConductor`add Deactivate 和 GuardClose 钩子，即使它们永远不应该被使用，这*可能会*导致一些不良行为（也不确定引用是否持有——这一次可能没问题，因为没有任何东西持有对导体/VM）

2：似乎激活 VM 的 WindowConductor 应该负责处理取消激活 - 好吧，这确实意味着`WindowManager`需要知道是否显示 VM，但它似乎更适合我

编辑2：

一个想法可能是将 view.Show() 移到指挥器中-这样您就可以取消激活而无需向经理公开详细信息。两者都相互依赖，所以对我来说都是一样的

# c# - Sharepoint adds unneded code to uploaded files

> ID：16131332
> 
> 赞同：0
> 
> 时间：2013-04-21T12:55:25.390
> 
> 标签：c#, sharepoint, sharepoint-2010

Playing with SharePoint 2010 and have noticed a very strange behavior. When uploading html or css file to the document library (by user and by C# code), SharePoint automatically adds such code into the files:

```
<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"><head>
<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
******************************
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head> 
```

That's really undesired behavior, cause uploaded files will be used later for validation purposes by custom library.

Is there any possibility to avoid such behavior at SharePoint side? It's not desired to modify the validation lib.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T12:18:32.413

好的。这个完成了。两种变体：

1.  如果通过代码添加项目 - 您可以在上传之前将文件格式修改为您的自定义（例如 prjectNamehtml）。然后在事件接收器（项目添加事件）中 - 检查这是否是我们的自定义格式 - 将格式更改回 html。在这种情况下，描述的代码不会被添加到文件中。
2.  此变体更通用，也适用于通过门户手动上传文件。需要使用事件接收器，在构造函数中我们应该获取当前的 Http Context 并将其保存到变量中。然后在 ItemAdding 中 - 我们应该检查这是否是 .html 文件 - 通过上下文获取它的内容并拒绝创建源文件。收到的内容应用于通过代码保存文件并按第一个变体进行处理。

# java - How to calcualate the distance between two Object of a class which have 3 coordinates points?

> ID：16131336
> 
> 赞同：0
> 
> 时间：2013-04-21T12:55:49.730
> 
> 标签：java, oop, class

This is my class 3DObj in 3DObj.java.

```
public class 3DObj {
    private double a;
    private double b;
    private double c;
    public double dist;

    public 3DObj() {

    }

    public 3DObj(double a, double b, double c) {
        this.a = a;
        this.b = b;
        this.c = c;

    }
    public double getA() {
        return a;
    }
    public double getB() {
        return b;
    }
    public double getC() {
        return c;
    }

    public double dist(3DObj p1, 3DObj p2, 3DObj p3) {
        dist = Math.sqrt(Math.pow((p2.a - p1.a), 2)
                         + Math.pow((p2.b - p1.b), 2) 
                         + Math.pow((p2.c - p1.c), 2));
        return dist;
    }

    public double getDist() {
        return dist;
    }
} 
```

Below is my 3DObjTest class in 3DObjTest.java

```
public class 3DObjTest {
    public static void main(String[] args) {
        3DObjTest 3DObj1 = new 3DObj(2.5, 2.5, 2.5);
        3DObjTest 3DObj2 = new 3DObj(2.0, 2.2, 3.0);
        System.out.println("Distance is " + 3DObj1.getDist());
    }
} 
```

but it is only showing 0.0 instead of any other number.

How can I calculate the distance between 3DObj1 and 3DObj2?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T12:59:04.263

您永远不会将`dist`变量分配给`dist()`函数的结果。此变量自动分配给 0.0，因此它显示为 0.0。

总而言之，您对此类的设置并不好，因为`dist`它不是您对象的特征。计算距离的函数应该在另一个类中创建，该类将处理对组的各种操作`3DObj`。

另一种解决方案是通过 计算这个`3DObj`到另一个的距离。在这种情况下，您无论如何都不需要变量（同样，它不是一个对象的特征）。`3DObj``object1.dist(object2)``dist`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T13:13:43.193

您不需要`dist`. `3DObj`始终在两个对象实例之间测量距离。恭敬，不需要`3DObje.getDist()`

您需要修复您的`dist()`功能：

```
public double dist(3DObj arg) {
    double dist = Math.sqrt(Math.pow((this.a - arg.a), 2)
                     + Math.pow((this.b - arg.b), 2) 
                     + Math.pow((this.c - arg.c), 2));
    return dist;
} 
```

在您的主要内容中，您可以使用：

```
System.out.println("Distance is " + 3DObj1.dist(3DObj2)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T13:27:19.397

您应该计算 3DObj 之外的距离。使用您当前的代码，您似乎正在尝试计算 3 个点（p1、p2、p3）之间的距离。您还尝试计算 3DObj 内部的距离，它构成了仅单个数据点（1 个 3D 对象）的蓝图。相反，距离应该从这个类中计算出来。

此外，a、b、c 属性在 3DObj 中是私有的，因此您应该使用访问器（getA()、getB()、getC()）来访问它们。

这是您编辑的代码。虽然我没有测试它是否有效，但它应该让您了解需要更改的内容。

```
public class 3DObj {
    private double a;
    private double b;
    private double c;

    public 3DObj(double a, double b, double c) {
        this.a = a;
        this.b = b;
        this.c = c;
    }
    public double getA() {
        return a;
    }
    public double getB() {
        return b;
    }
    public double getC() {
        return c;
    }
} 
```

您需要一些其他类来处理多个 3DObj。我们称它为 3DObjCollection，假设它计算两个 3DObj 之间的距离。

```
public class 3DObjCollection {
    private 3DObj p1;
    private 3DObj p2;

    public 3DObjCollection(3DObj p1, 3DObj p2) {
        this.p1 = p1;
        this.p2 = p2;
    }

    public dist() {
        double result = Math.sqrt(Math.pow((p2.getA() - p1.getA()), 2)
                        + Math.pow((p2.getB() - p1.getB()), 2) 
                        + Math.pow((p2.getC() - p1.getC()), 2));
        return(result);
    }
} 
```

现在，让我们创建测试类 3DObjTest：

```
public class 3DObjTest {
    public static void main(String[] args) {
        3DObj p1 = new 3DObj(2,4,6);
        3DObj p2 = new 3DObj(3,4,7);
        3DObjCollection c1 = new 3DObjCollection(p1, p2);
        System.out.println("Distance is " + c1.dist());
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T13:01:33.920

您从未调用过此方法，因此分配给 dist 的默认值为`0`.

```
public double dist(3DObj p1, 3DObj p2, 3DObj p3) 
```

为什么这种方法需要 3 个 3D 点？你可以用 2 来计算。

```
xdiff = x2-x1
ydiff = y2-y1
zdiff = z2-z1
diff = Math.sqrt(xdiff*xdiff + ydiff*ydiff + zdiff*zdiff) 
```

您的`dist`变量是公共的，并且还有一个`getter()`破坏了某些封装的变量。也请更正。最好使用返回此值的静态辅助方法（不一定在同一个类中）。没有必要维护结果，因为它没有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T13:02:49.730

您需要用 3DObj1 位置减去 3DObj2 位置，然后计算结果的长度。

例如：

```
X = 3DObj2.x - 3Dobj1.x;
Y = 3DObj2.y - 3Dobj1.y;
Z = 3DObj2.z - 3Dobj1.z; 
```

结果将是：

```
Distance = X+Y+Z; 
```

或者

```
Distance = sqrt(X*X+Y*Y+Z*Z); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-02T07:21:34.397

我建议你使用[https://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/java3d/forDevelopers/J3D_1_3_API/j3dapi/javax/vecmath/Point3d.html](https://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/java3d/forDevelopers/J3D_1_3_API/j3dapi/javax/vecmath/Point3d.html)

它还内置了一个距离方法。

这个答案附带一些免责声明：

1.  我不知道如何检查何时引入了 point3d 类，因此在您执行操作时它可能不存在。

2.  我可以很容易地想象你在教育环境中被分配了这个问题，所以你可能被要求从头开始构建自己的代码。

请原谅缺乏格式，从手机发布。

# jquery - jQuery Dragable 和 Resizable 冲突

> ID：16131345
> 
> 赞同：4
> 
> 时间：2013-04-21T12:56:50.897
> 
> 标签：jquery, html, jquery-ui-resizable, gridster

我正在使用 Gridster 插件（[http://gridster.net](http://gridster.net)）。我在 Github 上找到了一个可调整大小的更新演示。我还添加了 jQuery livequery 插件，以便更好地配合未来的项目。

添加新的网格项目后，可拖动/可调整大小都可以工作。默认项目工作正常，只有新项目的问题。这就是我使用代码的方式：

**调整大小 + 拖动**

```
var layout;
var grid_size = 30;
var grid_margin =5;

$(function() {
    layout = $('.layouts_grid ul').gridster({
        widget_margins: [grid_margin, grid_margin],
        widget_base_dimensions: [grid_size, grid_size],
        serialize_params: function($w, wgd) {
            return {
                x: wgd.col,
                y: wgd.row,
                width: wgd.size_x,
                height: wgd.size_y,
                id: $($w).attr('data-id'),
                name: $($w).find('.block_name').html(),
            };
        },
        min_rows: block_params.max_height
    }).data('gridster');

    $('.layout_block').livequery(function(){
        $('.layout_block').resizable({
            grid: [grid_size + (grid_margin * 2), grid_size + (grid_margin * 2)],
            animate: false,
            minWidth: grid_size,
            minHeight: grid_size,
            containment: '#layouts_grid ul',
            autoHide: true,
            stop: function(event, ui) {
                var resized = $(this);
                setTimeout(function() {
                    resizeBlock(resized);
                }, 300);
            }
        });
    });

    //This works only for default items
    $('.ui-resizable-handle').hover(function() {
        layout.disable();
    }, function() {
        layout.enable();
    });
}); 
```

**添加项目**

```
$('#add').click(function(){
     var tmpP = '<li class="layout_block new ui-resizable ui-resizable-autohide" style="background-color: #B60000;">New one</li>'
     var gridster = $(".layouts_grid ul").gridster().data('gridster');
     gridster.add_widget(tmpP, 2, 1);
}); 
```

请检查 JSFiddle 以及[http://jsfiddle.net/PrtrR/51/](http://jsfiddle.net/PrtrR/51/)

请帮我做这件事。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T20:26:31.700

我强烈推荐使用 jQueryUI Sortable 的网格示例：

[http://jqueryui.com/sortable/#display-grid](http://jqueryui.com/sortable/#display-grid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T12:37:50.790

```
$('#add').click(function(){
     var tmpP = '<li class="gs_w layout_block new ui-resizable ui-resizable-autohide" style="background-color: #B60000;">New one</li>'
    var gridster = $(".layouts_grid ul").gridster().data('gridster');
    gridster.add_widget(tmpP, 2, 1);
 }); 
```

请像我上面那样添加标签`class="gs_w"`属性`<li>`

# matlab - 向量化索引集构建

> ID：16131346
> 
> 赞同：0
> 
> 时间：2013-04-21T12:56:54.300
> 
> 标签：matlab, vectorization

我需要建立一个索引单元数组。`ori`每个单元格包含与以下代码中的唯一值相对应的所有索引：

```
oriVals = unique(ori);
oriIndicies = cell(numel(oriVals), 1);
for kOri = 1:numel(oriVals)
    oriIndicies{kOri} = find(ori == oriVals(kOri));
end 
```

我可以用 MATLAB 的本机函数更紧凑地编写它吗？我只是想确保在我自己写之前没有任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:04:33.343

代替：

```
oriIndicies = cell(numel(oriVals), 1);
for kOri = 1:numel(oriVals)
    oriIndicies{kOri} = find(ori == oriVals(kOri));
end 
```

你可以写：

```
oriIndicies = arrayfun(@(x) find(ori == x), oriVals, 'UniformOutput', false); 
```

但要小心，`oriIndicies`现在是一行，而不是一列。此外，这几乎肯定比`for`内存分配的循环慢，因为评估匿名函数很慢。

# db2 - 在 db2 中清除主键时如何使用修剪功能

> ID：16131351
> 
> 赞同：0
> 
> 时间：2013-04-21T12:57:31.847
> 
> 标签：db2

我想知道在db2中声明主键时如何使用trim函数。

例如，在表中`Employee(name,id)`如何限制这两个插入语句的使用：

```
insert into Employee(name,id) values (jay,1);
insert into Employee(name,id) values (jay,1); 
```

在上述语句中，`name`和`id`都是主键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:19:27.077

也许你的意思是独一无二的？如果是这样，那么您可以轻松解决这个问题，您所要做的就是在两个字段上创建一个主键;-)

像这样的东西：

`alter table Employee add constraint Employee_pk primary key (name, id)`

# php - 按日期时间显示来自多个表顺序的数据

> ID：16131358
> 
> 赞同：0
> 
> 时间：2013-04-21T12:58:02.723
> 
> 标签：php, mysql, sql-order-by

我有一个 php 页面，想显示来自多个表（当前 3 个表）的数据，
所有表都有日期时间列
，其他列完全不同（在数字和数据类型等方面）我想显示
其中任何一个的最新行三个表 三个表
中的任何一个中的第二个最近的行 三个表中的任何一个中的
第三个最近的行
，依此类推

我的表格结构如下

```
ATTANDANCE [a_id,date-time,employee,attandance_more....]   

TASKS_ASSIGN[ta_id,date-time,employee,title,detail,duration,task_assign_more.....]

TASK_COMPLETED [tc_id,date-time,employee,stars,task_completed_more....] 
```

我想显示为 facebook

```
 Alam has joined office at 23-mar-2013 **08:00am**   
 Haider has joined office at 23-mar-2013 **08:01am**  
 Alam has completed xyz-task at 22-mar-2013 **03:45pm**
 Alam has joined office at 22-mar-2013 **10:12am**
 ...... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:07:48.797

似乎您只想要列的一个子集。我不确定表格和您的结果之间的确切关系是什么，但类似于：

```
select  'attandance' as which, employee, `datetime`
from attendance
union all
select 'assign' as which, employee, `datetime`
from tasks_assign
union all
select `completed` as which, employee, `datetime`
from tasks_completed
order by `datetime` desc 
```

也就是说，您可以使用子查询来获取每个表中列的子集。然后使用`union all`将它们组合在一起并`order by`按照您想要的顺序放置它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:24:37.203

首先，将所有结果（来自 3 个表）添加到一个数组中。($theArray)
然后使用[usort](http://php.net/manual/en/function.usort.php)对数组进行排序。像这样的东西：

```
function cmp($a, $b)
{
    if ($a->date-time == $b->date-time) {
        return 0;
    }
    return ($a->date-time < $b->date-time) ? -1 : 1;
}

usort($theArray, "cmp"); 
```

# php - 图像的 URL 重写

> ID：16131361
> 
> 赞同：2
> 
> 时间：2013-04-21T12:58:30.680
> 
> 标签：php, .htaccess

我的`.htaccess`档案

```
Options +FollowSymLinks
RewriteEngine on

RewriteRule     ^the-image-([A-Za-z0-9]+)-([A-Za-z0-9+]+)/?$  images/userfolder/$1/$2 [NC,L] #Loading Images 
```

在我的 PHP 页面中

```
<img src='./the-image-$username-$image_id' alt='User Image' /> 
```

我的目标是根据每个用户的用户名和图像 ID 加载图像。

用户名存储在变量下`$username`和图像 ID 下。`$image_id`图像将位于`images/userfolder/username/image.jpg`

但是图像没有被加载。我的语法有什么错误？

注意：图像 ID 变量包含图像名称和扩展名。例子 ：`1.jpg`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:14:43.527

你可以试试这个：

```
RewriteRule  ^the-image-([^-]+)-([^-]+)/?$  images/userfolder/$1/$2 [NC,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:07:27.323

```
^the-image-([A-Za-z0-9]+)-([A-Za-z0-9+]+)/?$ 
```

末尾的正斜杠不会被转义。尝试以这种方式更改正则表达式

```
^the-image-([A-Za-z0-9]+)-([A-Za-z0-9+]+)\/?$ 
```

或者，如果您从不期望在 $image_id 之后出现任何正斜杠，则可以将其删除

```
^the-image-([A-Za-z0-9]+)-([A-Za-z0-9+]+)$ 
```

# joomla - 在 windows 目录中的哪里可以找到 Virtuemart 购物车组件文件？

> ID：16131367
> 
> 赞同：0
> 
> 时间：2013-04-21T12:58:57.597
> 
> 标签：joomla, content-management-system, directory, shopping-cart, virtuemart

所以我想从我的主页中删除这个 div 类（由于某种原因不禁用它），但我找不到这些文件的位置。谁能帮我指出来？![在此处输入图像描述]

谢谢你。

PS：我正在使用 Joomla 2.5.8 和 Virtuemart 2.0.20b ![在此处输入图像描述](https://i.stack.imgur.com/DzFdn.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T06:11:07.420

您可以按照以下步骤从 joomla 管理面板中删除“购物车”模块。

登录到管理员 -> 转到扩展 -> 模块管理器。搜索“VM - 购物车”并禁用模块。

# r - 从可能的向量矩阵中找到向量的最小偏差

> ID：16131379
> 
> 赞同：3
> 
> 时间：2013-04-21T13:00:41.223
> 
> 标签：r

我有以下数据

```
set.seed(11)
Data<-rbind(c(1:5),c(2:6))

Candidates <- matrix(1:25 + rnorm(25), ncol=5,
dimnames=list(NULL, paste0("x", 1:5)))
 colnames(Data)<-colnames(Candidates) 
```

我想从候选矩阵的每一行中减去我的每一行数据并返回最小的绝对差所以对于第一行我想找出可能的最小误差量

```
sum(abs(Data[1,]-Candidates[1,]))
sum(abs(Data[1,]-Candidates[2,]))
sum(abs(Data[1,]-Candidates[3,]))
sum(abs(Data[1,]-Candidates[4,]))
sum(abs(Data[1,]-Candidates[5,])) 
```

在这种情况下，它是 38.15826。目前我实际上对找出哪个候选行导致最小绝对偏差并不感兴趣，我只想知道每个数据行的最小绝对偏差。

然后我想得到一个新的数据集，它有我的原始数据和最小的偏差，例如第一行会这样：

```
x1 x2 x3 x4 x5 MinDev 
1  2  3  4  5  38.15826 
```

我真正的候选矩阵相对较小，但我的真实数据很大，所以目前我只是在构建一个循环

```
Err[i,]<- min(rbinds( 
    sum(abs(Data[i,]-Candidates[1,])),
    sum(abs(Data[i,]-Candidates[2,]))...)) 
```

但我确信有一种更好、更自动化的方法可以做到这一点，以便它可以容纳大型数据矩阵和不同大小的候选矩阵。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T13:19:31.807

您可以使用`sweep`、`rowSums`和`apply`自动执行此操作

```
sum(abs(Data[1,]-Candidates[1,]))  ## 38.15826 
```

测试第一行`Data`：

```
min(
    rowSums(abs(
                ## subtract row 1 of Data from each row of Candidates
                sweep(Candidates,2,Data[1,],"-"))))
## 38.15826 
```

为了方便/可读性，将其封装在一个函数中：

```
getMinDev <- function(x) {
    min(rowSums(abs(sweep(Candidates,2,x,"-"))))
} 
```

现在适用于每一行`Data`：

```
cbind(Data,MinDev=apply(Data,1,getMinDev)) 
```

可能有一些方法略快于`sweep`（例如@e4e5f4 的答案中给出的矩阵计算），但这应该是一个很好的基线。我喜欢`sweep`它，因为它是描述性的，并且不依赖于知道 R 使用列优先矩阵排序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T13:25:50.427

您可以使用`apply`一些矩阵运算：

```
CalcMinDev <- function(x)
{
    m <- t(matrix(rep(x, nrow(Candidates)), nrow=nrow(Candidates)))
    min(rowSums(abs(m - Candidates)))
}

cbind(Data, MinDev=apply(Data, 1, CalcMinDev)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-21T14:29:06.457

按照@BenBolker 的建议将我的评论（使用`dist`函数 with `method="manhattan"`）转为答案：

想法：诀窍是，如果您向 提供一个矩阵`dist`，它会将所有组合的距离作为下三角矩阵返回。

```
dist(rbind(Candidates, Data), method="manhattan")
#           1         2         3         4         5         6
# 2  8.786827                                                  
# 3 11.039044  3.718396                                        
# 4 16.120267  7.333440  6.041076                              
# 5 21.465682 12.678855 10.426638  5.345415                    
# 6 38.158256 45.763021 48.015238 53.096461 58.441876          
# 7 35.158256 40.763021 44.048344 48.096461 53.441876  5.000000 
```

在这里，第 6 行和第 7 行（从索引 1 到 5）是您感兴趣的距离。因此，基本上，您只需计算索引即可提取您感兴趣的元素。

* * *

最终代码如下所示：

```
idx1 <- seq_len(nrow(Data)) + nrow(Candidates)
idx2 <- seq_len(ncol(Candidates))
tt <- dist(rbind(Candidates, Data), method="manhattan")
transform(Data, minDev = apply(as.matrix(tt)[idx1, idx2], 1, min))
#   x1 x2 x3 x4 x5   minDev
# 6  1  2  3  4  5 38.15826
# 7  2  3  4  5  6 35.15826 
```

# c# - 你调用的对象是空的。- 应用程序配置

> ID：16131382
> 
> 赞同：6
> 
> 时间：2013-04-21T13:00:57.287
> 
> 标签：c#, winforms, ms-access

我收到错误，在本地窗口中我看到 conSettings 和 connectionString 值为 null。我可以说 ConfigurationManager 为空，我需要创建一个新对象。也许我正在使用 Access，也许我错过了 App.config 文件中的某些内容。有人可以帮我解决这个问题吗？提前致谢。

App.config 文件...

```
 <?xml version="1.0" encoding="utf-8" ?>
    <configuration>
    <appSettings>
       <add key="MyDBConnectionString" value="Provider=Microsoft.Jet.OLEDB.4.0;Data 
                   Source=E:\...\Database1.mdb"/>
    </appSettings>
    </configuration> 
```

Form.cs 文件...

```
 private void btnShow_Click(object sender, EventArgs e)
    {
        ConnectionStringSettings conSettings = ConfigurationManager.ConnectionStrings["MyDBConnectionString"];

        string connectionString = ConfigurationManager.ConnectionStrings["MyDBConnectionString"].ConnectionString; // error points here

        try
        {
            con = new OleDbConnection(connectionString);
            con.Open();
            cmd = new OleDbCommand("SELECT * FROM Table1", con);
            objReader = cmd.ExecuteReader();
            while (objReader.Read())
            {
                txtID.Text = ds.Tables[0].Rows[rno][0].ToString();
                CBAgeGroup.Text = ds.Tables[0].Rows[rno][1].ToString();
                CBGender.Text = ds.Tables[0].Rows[rno][2].ToString();
                CBCrimOffen.Text = ds.Tables[0].Rows[rno][3].ToString();
                if (ds.Tables[0].Rows[rno][4] != System.DBNull.Value)
                {
                    photo_aray = (byte[])ds.Tables[0].Rows[rno][4];
                    MemoryStream ms = new MemoryStream(photo_aray);
                   pictureBox1.Image = Image.FromStream(ms);
                }
                txtCV.Text = ds.Tables[0].Rows[rno][5].ToString();
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
            con.Close();
        }
    } 
```

有人建议我使用 App.config。

VS 2010 C# MS 访问 2003

**更新 1** 我的 App.config 现在看起来像这样......

```
<configuration>
    <ConnectionString>
        <add key="MyDBConnectionString"   value="Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Raj\Education\C_Sharp\Test1\Database1.mdb"/>
    </ConnectionString> 
```

我现在收到错误消息...“配置系统初始化失败”。我现在在谷歌上看它。

**更新 2** 尝试...

```
<configuration>
 <connectionStrings>
<add name="MyDBConnectionString" connectionString="Provider=Microsoft.Jet.OLEDB.4.0;Data   
        Source=E:\...\Database1.mdb"/>
  </connectionStrings>
 </configuration> 
```

收到“对象引用未设置为对象实例”的错误再次谷歌搜索

**更新 3**

```
<configuration>
<connectionStrings>
    <clear />
    <add name="MyDBConnectionString"
     providerName="System.Data.OleDb" connectionString="Provider=Microsoft.Jet.OLEDB.4.0; Source=\Database1.mdb" />
</connectionStrings> 
```

随着更新 3 我收到错误相同的错误。我已经包括了添加参考系统。配置，我已经使用 System.Configuration 进行了引用；

**结论**

也许VS 2010和Access 2003之间可能存在技术故障。这次我不会使用App.config。我知道 SQL Server 不会有问题。所以我会留下它。感谢 Damith 和 Clint 抽出宝贵时间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-21T13:06:59.400

您需要阅读 AppSettings 键，如下所示，

```
string connectionString = 
      ConfigurationSettings.AppSettings["MyDBConnectionString"]; 
```

您仍然收到空值，请尝试以下步骤

1.  在解决方案资源管理器中选择 App.Config 文件
2.  在属性窗口中选择复制到输出目录以始终复制。
3.  现在构建应用程序并重试。

要像下面这样访问，您需要在应用程序配置中添加 connectionStrings 部分

```
 string connectionString = 
      ConfigurationManager.ConnectionStrings["MyDBConnectionString"].ConnectionString; // error points here 
```

示例应用配置

> ```
> <?xml version="1.0"?>
> <configuration>
>   <connectionStrings>
>     <add name="MyDBConnectionString" 
>     connectionString="Provider=Microsoft.Jet.OLEDB.4.0;Data 
>                Source=E:\...\Database1.mdb"/>
>   </connectionStrings>
> </configuration> 
> ```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-26T16:43:53.833

检查您是否已将 app.config 文件放在启动项目下。就我而言，我只需要将 app.config 文件放在我的启动项目下，问题就解决了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-22T20:18:35.167

这发生在我的类库中，控制台应用程序设置为运行以进行调试。

有必要在控制台应用程序中添加到 app.config 的连接，因为如果您从外部进程启动它，它将不会在您的库中找到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T13:09:12.660

这个：

```
string connectionString = ConfigurationManager.ConnectionStrings["MyDBConnectionString"].ConnectionString; 
```

是你的问题。

您正在访问`ConfigurationManager.ConnectionStrings`以访问您的配置项，但是在`App.Config`您将其放在下面`appSettings`的文件中，配置文件的部分不同于`ConnectionStrings`

您可以将连接字符串放在`ConnectionStrings`app.config 的相关部分（可使用 访问`ConfigurationManager.ConnectionStrings`，或根据该部分访问它`appSettings`。

看：

[http://msdn.microsoft.com/en-us/library/ms254494(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms254494(v=vs.80).aspx)

有关存储连接字符串的 MSDN 指南。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-02T06:06:39.633

即使在多次检查 app.config 文件和我的代码是否有错误之后，我也面临同样的问题，但我没有在我的代码中发现任何错误。最终我发现了一个愚蠢的错误，我的编译器默认将应用程序配置文件名设为“app1.config”，当我将其更改为“app.config”时，一切对我来说都很好。

希望它会有所帮助。

# java - 每秒使用 Web 服务调用更新 Swing 客户端信息好不好？

> ID：16131383
> 
> 赞同：1
> 
> 时间：2013-04-21T13:01:20.693
> 
> 标签：java, web-services, swing, client, updates

我有一个在客户端机器上运行的 Java Swing 应用程序和一个为 Web 服务提供信息的 Java 服务器。我需要更新摆动客户端应用程序中显示的信息，例如每秒更新一次。通过每秒调用 Web 服务并更新信息来做到这一点是否是最佳实践，或者如果我使用其他方法会更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:16:23.887

我认为这取决于目的。是否有可能通过用户交互（例如单击按钮等）调用更新？因为用或多或少的随机时间（“1 秒”）更新对我来说似乎很脏。

最流畅的方式是实现观察者模式（push）。服务器通知客户端是否有任何改变。有关更多信息，请查看维基百科或[此链接](http://sourcemaking.com/design_patterns/observer)。

# c++ - unsigned int - 移位和 oring 产生负值

> ID：16131390
> 
> 赞同：1
> 
> 时间：2013-04-21T13:02:01.590
> 
> 标签：c++, c, bit-manipulation, bit-shift

当我从文件中读取原始字节时，我正在读取文件的标题并使用（左移）和（或）`wav`填充我的类成员。现在，巧合的是，我遇到了以下情况 ，其中is of type和is of所以我可以使用.`<<``|`
`uBytesPerSecond``unsigned``data``char*``std::fstream::read`

现在当我`uBytesPerSecond`在调试器中创建

```
this->uBytesPerSecond |= data[0x1F]; //0x00 ->uBytesPerSecond = 0x00000000
this->uBytesPerSecond <<= 8;         //     ->uBytesPerSecond = 0x00000000
this->uBytesPerSecond |= data[0x1E]; //0x02 ->uBytesPerSecond = 0x00000002
this->uBytesPerSecond <<= 8;         //     ->uBytesPerSecond = 0x00000200
this->uBytesPerSecond |= data[0x1D]; //0xb1 ->uBytesPerSecond = 0xffffffb1 !!!
this->uBytesPerSecond <<= 8;         //     ->uBytesPerSecond = 0xffffb100
this->uBytesPerSecond |= data[0x1C]; //0x10 ->uBytesPerSecond = 0xffffb110 
```

在这种情况下，预期的输出是`uBytesPerSecond = 0x00002b110`。请告诉这里发生了什么以及我如何解决这个问题。

我正在使用`MSVC2012`Windows 8，这是一个应用程序`VC++-Console`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T13:07:40.487

问题是您的平台`char`是签名类型。因此，包含的值将被符号扩展到 32 位以进行 or 操作，从而为您`0xffffffb1`提供`data[0x1D]`.

要解决这个问题，只需将类型更改`data`为`unsigned char*`。

**编辑：**如评论中所述，该问题的另一种解决方案是使用`0xFF`:`this->uBytesPerSecond |= data[0x1F] & 0xFF`等显式屏蔽操作数​​。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T13:25:31.940

为什么不使用联合而不是使用按位或移位？就像是

```
union ByteWord
{
    unsigned int word;
    char bytes[sizeof(unsigned int)];
} 
```

然后你可以做

```
ByteWord data;
myStream.read(data.bytes, sizeof(unsigned int));
this->uBytesPerSecond = myStream.word; 
```

`ntohl(myStream.word)`如果您需要字节交换，请使用它。

# eclipse - 在 Eclipse 中设置 Akka 项目

> ID：16131396
> 
> 赞同：1
> 
> 时间：2013-04-21T13:03:17.417
> 
> 标签：eclipse, scala, sbt, akka

我正在尝试在 Eclipse 中创建一个新的 Akka 项目。我按照[这里的步骤](http://typesafe.com/resources/tutorials/getting-started-with-akka-scala.html)

但我收到有关未找到 Akka 依赖项的错误消息。

感谢您的帮助。这是输出。

```
C:\Users\*\workspace\akka-project-in-scala>sbt
[info] Loading global plugins from C:\Users\*\.sbt\plugins
[info] Loading project definition from C:\Users\*\workspace\akka-project-in-scala\project
[info] Set current project to Akka Project In Scala (in build file:/C:/Users/*/workspace/akka-project-in-scala/)
> scala-version
[info] 2.10.1
> eclipse
[info] About to create Eclipse project files for your project(s).
Getting Scala 2.10.1 ...
downloading http://repo1.maven.org/maven2/org/scala-lang/scala-compiler/2.10.1/scala-compiler-2.10.1.jar ...
        [SUCCESSFUL ] org.scala-lang#scala-compiler;2.10.1!scala-compiler.jar (45634ms)
downloading http://repo1.maven.org/maven2/org/scala-lang/scala-library/2.10.1/scala-library-2.10.1.jar ...
        [SUCCESSFUL ] org.scala-lang#scala-library;2.10.1!scala-library.jar (21811ms)
downloading http://repo1.maven.org/maven2/org/scala-lang/scala-reflect/2.10.1/scala-reflect-2.10.1.jar ...
        [SUCCESSFUL ] org.scala-lang#scala-reflect;2.10.1!scala-reflect.jar (10590ms)
downloading http://repo1.maven.org/maven2/org/scala-lang/jline/2.10.1/jline-2.10.1.jar ...
        [SUCCESSFUL ] org.scala-lang#jline;2.10.1!jline.jar (1691ms)
:: retrieving :: org.scala-sbt#boot-scala
        confs: [default]
        5 artifacts copied, 0 already retrieved (24386kB/71ms)
[info] Updating {file:/C:/Users/*/workspace/akka-project-in-scala/}akka-project-in-scala...
[info] Resolving org.scala-lang#scala-library;2.10.1 ...
  [info] Resolving com.typesafe.akka#akka-actor;2.1.2 ...
[warn]  module not found: com.typesafe.akka#akka-actor;2.1.2
[warn] ==== local: tried
[warn]   C:\Users\*\.ivy2\local\com.typesafe.akka\akka-actor\2.1.2\ivys\ivy.xml
[warn] ==== Typesafe Releases: tried
[warn]   http://repo.typesafe.com/typesafe/releases/com/typesafe/akka/akka-actor/2.1.2/akka-actor-2.1.2.pom
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/com/typesafe/akka/akka-actor/2.1.2/akka-actor-2.1.2.pom
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: com.typesafe.akka#akka-actor;2.1.2: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[trace] Stack trace suppressed: run last *:update for the full output.
[error] (*:update) sbt.ResolveException: unresolved dependency: com.typesafe.akka#akka-actor;2.1.2: not found
[info] Updating {file:/C:/Users/*/workspace/akka-project-in-scala/}akka-project-in-scala...
[info] Resolving org.scala-lang#scala-library;2.10.1 ...
  [info] Resolving com.typesafe.akka#akka-actor;2.1.2 ...
[warn]  module not found: com.typesafe.akka#akka-actor;2.1.2
[warn] ==== local: tried
[warn]   C:\Users\*\.ivy2\local\com.typesafe.akka\akka-actor\2.1.2\ivys\ivy.xml
[warn] ==== Typesafe Releases: tried
[warn]   http://repo.typesafe.com/typesafe/releases/com/typesafe/akka/akka-actor/2.1.2/akka-actor-2.1.2.pom
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/com/typesafe/akka/akka-actor/2.1.2/akka-actor-2.1.2.pom
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: com.typesafe.akka#akka-actor;2.1.2: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[trace] Stack trace suppressed: run last *:update for the full output.
[error] (*:update) sbt.ResolveException: unresolved dependency: com.typesafe.akka#akka-actor;2.1.2: not found
[info] Updating {file:/C:/Users/*/workspace/akka-project-in-scala/}akka-project-in-scala...
[info] Resolving org.scala-lang#scala-library;2.10.1 ...
  [info] Resolving com.typesafe.akka#akka-actor;2.1.2 ...
[warn]  module not found: com.typesafe.akka#akka-actor;2.1.2
[warn] ==== local: tried
[warn]   C:\Users\*\.ivy2\local\com.typesafe.akka\akka-actor\2.1.2\ivys\ivy.xml
[warn] ==== Typesafe Releases: tried
[warn]   http://repo.typesafe.com/typesafe/releases/com/typesafe/akka/akka-actor/2.1.2/akka-actor-2.1.2.pom
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/com/typesafe/akka/akka-actor/2.1.2/akka-actor-2.1.2.pom
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: com.typesafe.akka#akka-actor;2.1.2: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[trace] Stack trace suppressed: run last *:update for the full output.
[error] (*:update) sbt.ResolveException: unresolved dependency: com.typesafe.akka#akka-actor;2.1.2: not found
[info] Updating {file:/C:/Users/*/workspace/akka-project-in-scala/}akka-project-in-scala...
[info] Resolving org.scala-lang#scala-library;2.10.1 ...
  [info] Resolving com.typesafe.akka#akka-actor;2.1.2 ...
[warn]  module not found: com.typesafe.akka#akka-actor;2.1.2
[warn] ==== local: tried
[warn]   C:\Users\*\.ivy2\local\com.typesafe.akka\akka-actor\2.1.2\ivys\ivy.xml
[warn] ==== Typesafe Releases: tried
[warn]   http://repo.typesafe.com/typesafe/releases/com/typesafe/akka/akka-actor/2.1.2/akka-actor-2.1.2.pom
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/com/typesafe/akka/akka-actor/2.1.2/akka-actor-2.1.2.pom
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: com.typesafe.akka#akka-actor;2.1.2: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[trace] Stack trace suppressed: run last *:update for the full output.
[error] (*:update) sbt.ResolveException: unresolved dependency: com.typesafe.akka#akka-actor;2.1.2: not found
[error] Could not create Eclipse project files:
[error] Error evaluating task 'external-dependency-classpath': error
[error] Error evaluating task 'update': error
[error] Error evaluating task 'external-dependency-classpath': error
[error] Error evaluating task 'update': error
> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:19:30.863

所以这不起作用（404）：[http ://repo1.maven.org/maven2/com/typesafe/akka/akka-actor/2.1.2/akka-actor-2.1.2.pom](http://repo1.maven.org/maven2/com/typesafe/akka/akka-actor/2.1.2/akka-actor-2.1.2.pom)

但这确实有效：[http ://repo1.maven.org/maven2/com/typesafe/akka/akka-actor_2.10/2.1.2/akka-actor_2.10-2.1.2.pom](http://repo1.maven.org/maven2/com/typesafe/akka/akka-actor_2.10/2.1.2/akka-actor_2.10-2.1.2.pom)

查看 g8 模板（[第 16 行](https://github.com/typesafehub/akka-first-tutorial-scala.g8/blob/master/src/main/g8/project/Build.scala#L16)）：

```
"com.typesafe.akka" % "akka-actor"      % "$akka_version$", 
```

我猜你需要编辑你的`project/Build.scala`，所以它说：

```
"com.typesafe.akka" % "akka-actor_2.10"      % "2.1.2", 
```

让我知道这是否有效。

# iphone - Facebook SDK FBSession 无限循环和崩溃

> ID：16131398
> 
> 赞同：3
> 
> 时间：2013-04-21T13:03:32.563
> 
> 标签：iphone, ios, objective-c, facebook, facebook-login

我最初使用 FBLoginView 在最新的 Facebook SDK (3.5) 中启动登录过程。但是，由于某种循环，这会使应用程序崩溃。然后我读到我应该尝试使用下面的代码作为测试登录：

```
[FBSession openActiveSessionWithReadPermissions:[NSArray arrayWithObjects:@"read_stream", nil] allowLoginUI:YES
                          completionHandler:^(FBSession *session,
                                              FBSessionState status,
                                              NSError *error) {
                              // session might now be open.
                              NSLog(@"Error - %@", error);
                          }]; 
```

我遇到了完全相同的问题。大量进程（同名）被调用，应用程序崩溃。有谁知道为什么在使用 Facebook SDK 时会发生这种情况？这是崩溃的线程的图像：
![碰撞](https://i.stack.imgur.com/TXmDx.png)

正如你所看到的，这里有些东西不对劲。有人有什么想法吗？

问候，
迈克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T05:42:29.847

这是一个错误，现在已修复。

已编辑——从适用于 iOS 的 Facebook SDK 3.5.1 开始，这已在客户端和服务器上修复。这是链接： [https ://developers.facebook.com/resources/facebook-ios-sdk-3.5.1.pkg](https://developers.facebook.com/resources/facebook-ios-sdk-3.5.1.pkg)

--

感谢您通知我们这个问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T23:21:14.940

我有同样的问题，并尝试将沙盒（在 fb 应用程序仪表板中）设置为 false，然后它工作了......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:50:31.670

我遇到了似乎完全相同的问题，并且几乎相同的堆栈跟踪，但我已经禁用了沙盒，事实上，我的应用程序已经投入生产 9 个月，但我们仍然使用 sdk 2.0 并且刚刚得到解决升级它。

我已经把它缩小了很多。在这里，我对我的问题给出了很好的解释，以及解决我的问题的临时解决方案，但它对生产是可行的 [。Facebook SDK FBLoginView 获取 EXC_BAD_ACCESS](https://stackoverflow.com/questions/16113756/facebook-sdk-fbloginview-getting-exc-bad-access/16148653#16148653)

![在此处输入图像描述](https://i.stack.imgur.com/TbwOI.png)

# c++ - Qt 中的第一个控制台应用程序

> ID：16131400
> 
> 赞同：0
> 
> 时间：2013-04-21T13:03:39.873
> 
> 标签：c++, qt

为什么我在 Qt 中的第一个控制台应用程序不起作用？

我正在使用版本：

Qt 创作者 2.7.0

基于 Qt 5.0.2（32 位）

Windows 7的

代码：

```
#include <QCoreApplication>
#include <QDebug>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    qDebug()<<"hello world";

    return a.exec();
} 
```

它给了我这个输出：

> 'cl' 不是内部或外部命令、可运行程序或批处理文件。乔姆：
> 
> C:\210\build-hello-Desktop_Qt_5_0_2_MSVC2012_64bit-Debug\Makefile.Debug [debug\main.obj] 错误 1 ​​jom：
> 
> C:\210\build-hello-Desktop_Qt_5_0_2_MSVC2012_64bit-Debug\Makefile [debug] Error 2 13:51:15: 进程
> 
> "C:\Qt\Qt5.0.2\Tools\QtCreator\bin\jom.exe" 退出并显示代码 2。构建/部署项目时出错 hello (kit: Desktop Qt 5.0.2 MSVC2012 64bit) 执行步骤 'Make' 时

编译器设置： ![在此处输入图像描述](https://i.stack.imgur.com/NE5Nd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:58:17.813

问题是该程序无权访问保存它的文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:21:14.253

我安装了 Microsoft Visual C++ IDE，然后安装了 Qt Creator。之后打开 Qt Creator，进入 Tools -> Options 菜单，在 Build & Run 选项中，选择 compilers 选项卡必须检测到 Microsoft Visual C++ 编译器，或者您可以添加它并尝试再次编译您的程序。你的程序似乎是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T15:59:57.207

我建议做的第一件事是尝试在 VS 命令提示符下使用 quake/nmake clean/nmake 编译您的项目，以查看工具链（意味着 VS）+ QT 安装是否正常工作。然后下一步继续使用 QT Creator。

VS2012 与 Qt5 完美配合，比 VS2010 快得多

如果您在 Start->Applications->Microsoft VS->Tools ..etc（快捷方式所在的位置）的某个位置安装了 VS，您应该会看到开发人员命令提示符。因此，您运行它，获取命令提示符，将工作目录更改为项目所在的位置。然后运行 ​​quake、nmake clean、nmake 命令。您的项目应该在命令行中构建。

# java - 从 Linux 移至 Windows 时，mysql 中表的密码列不匹配

> ID：16131404
> 
> 赞同：0
> 
> 时间：2013-04-21T13:04:05.157
> 
> 标签：java, mysql

我们有一个密码列，它存储从生成的 base64 哈希。所以当用户输入密码登录时，它会将数据库中的密码列与用户密码的base64进行比较。但是在将数据（使用 mysql mysqldump）从 Linux 迁移到 Windows 7 之后，密码不匹配。即使数据库中的密码和用户输入的密码生成的 base64 哈希似乎相同。从 linux 迁移到 windows 时，在迁移密码列时，我们是否需要在 mysql 中执行任何附加步骤。

注意：当我们将数据从 linux 迁移到另一个 linux 时它可以工作，所以我们认为我们应该在将它从 linux 迁移到 windows 时执行 unixtodos。但它仍然失败。

我们在应用程序中使用java![在此处输入图像描述](https://i.stack.imgur.com/uhMdY.jpg)

用于编码密码的代码

```
try
{
    MessageDigest md = MessageDigest.getInstance("SHA-512");
    md.update(password.getBytes());
    byte[] raw = md.digest();
    encodedPassword = (new BASE64Encoder()).encode(raw);
} 
```

# android - android webview INVALID_STATE_ERR

> ID：16131407
> 
> 赞同：1
> 
> 时间：2013-04-21T13:05:07.143
> 
> 标签：android, jquery, android-webview, autosuggest

我有具有 autoSuggest.js 库的 Web 应用程序，它在所有浏览器中都可以正常工作，但是当我使用 android webview 并且当我输入字符时，它使请求正常并得到结果，但是当我单击一个项目来选择它时，我得到了logcat 中的这个错误，没有任何反应。

```
 INVALID_STATE_ERR: DOM Exception 11: An attempt was made to use an
 object that is not, or is no longer, usable. at
 http://192.168.1.236:8080/resources/js/lib/jquery.min.js 
```

任何帮助请...

jQuery v1.7.2

# yii - Yii 以 [ 作为参数链接

> ID：16131408
> 
> 赞同：0
> 
> 时间：2013-04-21T13:05:08.987
> 
> 标签：yii, yii-components

通过 GII，我创建了一个记录列表。我使用管理视图，因此它们位于表格视图中。在表的顶部，它是带有记录状态的搜索。当状态下拉列表更改时，我提交表单并搜索表格。我希望管理员的默认视图只显示活动记录，所以我想在菜单中创建一个链接到此：medium/admin/?Medium[status]=active 当然实际链接是 medium/admin/?Medium %5B状态%5D=活动

我试图这样做：

```
CHtml::link('Mediums', array("medium/admin", array('Medium[status]' => 'active')))
CHtml::link('Mediums', array("medium/admin", array('Medium%5Bstatus%5D' => 'active'))) 
CHtml::link('Mediums', array("medium/admin", array('Medium' => array('status' => 'active')))) 
```

但所有链接都不正确，因此表的默认视图显示了所有记录。

创建此类链接的正确方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:58:29.163

[http://www.yiiframework.com/doc/api/1.1/CHtml#link-detail](http://www.yiiframework.com/doc/api/1.1/CHtml#link-detail)和[http://www.yiiframework.com/wiki/48/](http://www.yiiframework.com/wiki/48/)对你有用。

```
CHtml::link(CHtml::encode('Mediums'),array("medium/admin", "status"=>"active")); 
```

然后确保在你的控制器中你有这样的东西：

```
public function actionAdmin($status) 
```

现在你可以`'status'`在你的行动中使用。

# javascript - jQuery Scroll Current Position and Next-Prev Navigator

> ID：16131409
> 
> 赞同：3
> 
> 时间：2013-04-21T13:05:11.440
> 
> 标签：javascript, jquery

I need a bit of advice as I can't get my noob head around the following, please see this fiddle: [http://jsfiddle.net/NtUpw/](http://jsfiddle.net/NtUpw/)

The code works as intended, but when the current div offset goes > 41 and prev is hit, I'd like the page to return to the beginning of the current div, not to one before that. Any idea how can I add this condition?

I realise the current code isn't the cleanest (actually it's a combination of two fiddles), but I hope someone could take a look at it anyway. Thanks.

```
$('a.buttons').on('click', function (e) {
e.preventDefault();

var t = $(this).text(),
    that = $(this);

if (t === 'next' && $('.current').next('div.post').length > 0 ) {
    var $next = $('.current').next('.post');
    var top = $next.offset().top;

    $('body').animate({
        scrollTop: $('.current').next('div.post').offset().top - 40

    });

} else if (t === 'prev' && $('.current').prev('div.post').length > 0 ) {
    var $prev = $('.current').prev('.post');
    var top = $prev.offset().top;

    $('body').animate({
        scrollTop: $('.current').prev('div.post').offset().top - 40
    });
}

$(window).bind('scroll', function () {
    $('.post').each(function () {
        var post = $(this);
        var position = post.position().top - $(window).scrollTop();

        if (position <= 40) {

            post.addClass('current');
            post.prev().removeClass("current");

        } else {
            post.removeClass('current');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:04:38.947

prev 动作通过将 div 始终移动到上一个来起作用；解决方案是检查导航器相对于当前 div 的当前位置：

```
var $prev;
var top;

var firstElem = true;
if ($('.current').prev('div.post').length > 0) {
    $prev = $('.current').prev('.post');
    top = $prev.offset().top;
    firstElem = false
}

var currTop = $('.current').offset().top;
var navBottom = $('.navigation').offset().top + 40;

if (currTop == navBottom && !firstElem) {
    $('body,html').animate({
        scrollTop: $('.current').prev('div.post').offset().top - 40
    }); 
```

有了这个，导航器只有在不在当前的顶部时才会跳转到前一个 div；或者跳到上一个。

Firefox 问题取决于 Firefox 如何放置溢出，它将溢出放置在与其他浏览器不同的`html`级别。`body`为了让它工作，你必须定义滚动动作：

```
$('body,html').animate({

}); 
```

工作小提琴：http: [//jsfiddle.net/IrvinDominin/2QYgR/3/](http://jsfiddle.net/IrvinDominin/2QYgR/3/)

# java - Implementing methods from an interface but with different parameters

> ID：16131410
> 
> 赞同：3
> 
> 时间：2013-04-21T13:05:14.423
> 
> 标签：java, oop, polymorphism

I am looking for a good way to have different implementations of the same method which is defined in an interface but with different parameter types. Would this be possible?

In order to clarify this, suppose I have an interface Database and two implementing classes Database1 and Database2\. Database has a method createNode(...) and another one modifyNode(...). The problem is that for Database1 the return type of the createNode method should be a long (the identifier). For Database2, however, it would be an object specific from the technology (in this case OrientDB but this doesn't matter too much, it is simply something that extends Object, of course). And also both create(...) return types should be used as one of modifyNode(...) parameters.

What I was thinking to do is:

```
`public interface Database {
    public Object createNode(...);
    public void modifyNode(Object id, ...);
    ...
 }`

public class Database1 { 
    @Override
    public Object createNode(...) { 
        ...
        long result = // obtain id of created node
        return Long.valueOf(result);
    }

    @Override
    public void modifyNode(Object id, ...) { 
        ...
        // use id as ((Long)id).longValue();
    }
}

public class Database2 { 
    @Override
    public Object createNode(...) { 
        ...
        SomeObject result = // obtain id of created node
        return result;
    }

    @Override
    public void modifyNode(Object id, ...) { 
        ...
        // use id as (SomeObject)id
    }
} 
```

I wanted to know if there is a better way to do this. Specially to avoid Long -> long and long -> Long conversions. I saw many similar questions here in StackOverflow but none of them were what I was looking for. Thank you very much in advance.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T13:20:08.400

这是泛型的示例

**数据库**

```
public interface Database<T> {
    public T createNode(...);
    public void modifyNode(T id, ...);
    ...  
} 
```

**数据库1**

```
class Database1 implements Database<Long> { 
    @Override
    public Long createNode(...) { 
        ...
        long result = // obtain id of created node
        return result;
    }

    @Override
    public void modifyNode(Long id, ...) { 
        ...
        // use id
    }
} 
```

**数据库2**

```
public class Database2 implements Database<SomeObject> { 
    @Override
    public SomeObject createNode(...) { 
        ...
        SomeObject result = // obtain id of created node
        return result;
    }

    @Override
    public void modifyNode(SomeObject id, ...) { 
        ...
        // use id as (SomeObject)id
    } 
} 
```

顺便说一句，不用担心[自动装箱](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)。您正在使用 JDK >= 5，因为有 @Override 注释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T13:09:32.033

我想你想要[Generic Methods](http://docs.oracle.com/javase/tutorial/java/generics/methods.html)。

> 泛型方法是引入自己的类型参数的方法。这类似于声明泛型类型，但类型参数的范围仅限于声明它的方法。允许使用静态和非静态泛型方法，以及泛型类构造函数。
> 
> 泛型方法的语法包括类型参数，位于尖括号内，并出现在方法的返回类型之前。对于静态泛型方法，类型参数部分必须出现在方法的返回类型之前。

# php - How to redirect an unauthorized user to the login page in Laravel?

> ID：16131415
> 
> 赞同：1
> 
> 时间：2013-04-21T13:06:18.470
> 
> 标签：php, laravel, laravel-3

I'm new to Laravel ( version 3 ), i do not know how to set Route and filters in Laravel so that any unauthorized user that is trying to access any url redirects to the login page (NOT the 404 error), in another word the default home page for unauthorized users is going to be the login page and for the authorized users it's going to be the dashboard.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:19:49.013

如果你使用 laravel Auth 类，你可以创建一个授权的路由组。如果用户未登录，所有在此处定义的路由都将被重定向。您的路由器文件将如下所示：

```
Route::get('/', array('as' => 'intro', 'uses' => 'intro@index'));
Route::get( 'login', array('as' => 'login', 'uses' => 'user@login'));
Route::get( 'logout', array('as' => 'logout', 'uses' => 'user@logout'));

// PROTECTED
Route::group(array('before' => 'auth'), function()
{
   Route::get('dashboard', array('as' => 'dashboard', 'uses' => 'user@dashboard'));
});

// AUTH FILTER
Route::filter('auth', function()
{
    if (Auth::guest()) return Redirect::to('login');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:15:16.773

只需在这样的路由声明中添加一个前置过滤器

```
Route::get('edit_profile', array('before' => 'auth', function()
{
    return View::make('profile.edit');
})); 
```

Laravel 中默认存在 Auth 过滤器。

# c++ - 渐进细化辐射度算法

> ID：16131418
> 
> 赞同：0
> 
> 时间：2013-04-21T13:06:33.337
> 
> 标签：c++, opengl, lighting

我想找到一个详细的描述，最好是使用渐进细化辐射算法的 OpenGL 的例子，但不能。更准确地说，您如何计算应该用来更新收集器四边形的光能传递度以及其父射手四边形的未射击功率的值。

我尝试阅读[GPU gems](http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter39.html)，我认为我正在寻找的部分是

```
 DE = r * FF * E
  add DE to residual texture
  add DE to radiosity texture 
```

但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-18T02:59:18.370

没错，这就是将能量从源四边形分配到其他四边形的部分。FF 是一个形状因子，它是一个介于 0 和 1 之间的值。

外形尺寸考虑了四边形的距离和方向，以确定接收到多少光。因此，例如，两个非常靠近、相对的四边形将获得接近 1 的形状因子，而两个在其法线之间具有小角度、非常远或两者的四边形将获得接近 0 的值。

r 将是源四边形和收集四边形之间的差异面积。如果聚集四边形区域比源四边形大 4 倍，我认为 r 将为 4。如果你的四边形大小一致（它只是 1），你就不需要这个。

E 是从源四边形发射的能量。它是一个存储值，当四边形为源时不计算。它仅在四边形聚集时更新。

DE 是单个聚集四边形接收到的 E 量。

我认为这两篇文章更好：

[http://www.flipcode.com/archives/Radioity_In_English-The_Basics.shtml](http://www.flipcode.com/archives/Radiosity_In_English-The_Basics.shtml) [http://www.flipcode.com/archives/Radioity_In_English-Form_Factor_Calculation.shtml](http://www.flipcode.com/archives/Radiosity_In_English-Form_Factor_Calculation.shtml)

# multithreading - Canonical Way to Ensure Only One Instance of a Service Is Running / Starting / Stopping in Clojure?

> ID：16131420
> 
> 赞同：3
> 
> 时间：2013-04-21T13:06:48.067
> 
> 标签：multithreading, clojure, parallel-processing, singleton, stm

I'm writing a stateful server in Clojure backed by Neo4j that can serve socket requests, like HTTP. Which means, of course, that I need to be able to start and stop socket servers from within this server. Design-wise, I would want to be able to declare a "service" within this server and start and stop it.

What I'm trying to wrap my mind around in Clojure is how to ensure that starting and stopping these services is thread-safe. This server I'm writing will have NREPL embedded inside it and process incoming requests in a parallel way. Some of these requests will be administrative: start service X, stop service Y. Which opens up the possibility that two start requests come in at the same time.

1.  Starting should synchronously check a "running" flag and a "starting" flag and fail if either are set. In the same transaction, the "starting" flag should be set.
2.  After the "starting" flag is set, the transaction closes. That makes the "starting" flag visible to other transactions.
3.  Then the (start) function actually starts the service.
4.  If (start) succeeds, the "running" and "starting" flags are synchronously set.
5.  If (start) fails, the "starting" flag is set and the exception is returned.

Stopping needs the same thing, checking a "running" flag and checking and setting it's own "stopping" flag.

I'm trying to reason through all possible combinations of (start) and (stop).

Have I missed anything?

Is there a library for this already? If not, what should a library like this look like? I'll open source it and put it on Github.

Edit:

This is what I have so far. There's a hole I can see though. What am I missing?

```
(ns extenium.db
  (:require [clojure.tools.logging :as log])
  (:import org.neo4j.graphdb.factory.GraphDatabaseFactory))

(def ^:private
  db- (ref {:ref nil
            :running false
            :starting false
            :stopping false}))

(defn stop []
  (dosync
   (if (or (not (:running (ensure db-)))
           (:stopping (ensure db-)))
     (throw (IllegalStateException. "Database already stopped or stopping."))
     (alter db- assoc :stopping true)))
  (try
    (log/info "Stopping database")
    (.shutdown (:ref db-))
    (dosync
     (alter db- assoc :ref nil))
    (log/info "Stopped database")
    (finally
      (dosync
       (alter db- assoc :stopping false))))) 
```

In the try block, I log, then call .shutdown, then log again. If the first log fails (I/O exceptions can happen), then (:stopping db-) is set to false, which unblocks it and is fine. .shutdown is a void function from Neo4j, so I don't have to evaluate a return value. If it fails, (:stopping db-) is set to false, so that's fine too. Then I set the (:ref db-) to nil. What if that fails? (:stopping db-) is set to false, but the (:ref db-) is left hanging. So that's a hole. Same case with the second log call. What am I missing?

Would this be better if I just used Clojure's locking primitives instead of a ref dance?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:45:39.173

这实际上很适合简单的锁：

```
(locking x
  (do-stuff)) 
```

这`x`是要同步的对象。

详细说明：启动和停止服务是副作用；副作用不应从事务内部启动，除非可能作为代理操作。在这里，虽然锁正是设计所要求的。请注意，当它们非常适合手头的问题时，在 Clojure 中使用它们并没有错，实际上我想说`locking`的是这里的规范解决方案。（参见 Stuart Halloway 的[Lancet](https://github.com/stuarthalloway/lancet)，在*Programming Clojure*（第 1 版）中介绍了一个使用锁的 Clojure 库示例，该库已广泛使用，主要在 Leiningen 中。）

**更新：**添加快速失败行为：

这仍然非常适合锁，即[`java.util.concurrent.locks.ReentrantLock`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantLock.html)（Javadoc 的后续链接）：

```
(import java.util.concurrent.locks.ReentrantLock)

(def lock (ReentrantLock.))

(defn start []
  (if (.tryLock lock)
    (try
      (do-stuff)
      (finally (.unlock lock)))
    (do-other-stuff))) 
```

`(do-stuff)`获取锁成功后执行；否则，`(do-other-stuff)`会发生。在任何一种情况下，当前线程都不会阻塞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T01:24:55.380

这听起来像是代理的一个很好的用例，它们允许您将更改序列化为一个可变状态，[Clojure 代理文档](http://clojure.org/agents)有一个很好的概述。您可以使用错误处理程序和代理错误方法来处理异常，而无需担心锁定或竞争条件。

```
(def service (agent {:status :stopped}))

(defn start-service [{:keys [status] :as curr}]
  (if (= :stopped status)
    (do 
      (println "starting service")
      {:status :started})
    (do 
      (println "service already running")
      curr)))

 ;; start the service like this
 (send-off service start-service)

 ;; gets the current status of the service
 @service 
```

# jquery - jQuery Mobile 1.3.1 未捕获错误：无法在初始化之前调用弹出窗口上的方法；试图调用方法“打开”

> ID：16131431
> 
> 赞同：0
> 
> 时间：2013-04-21T13:07:43.887
> 
> 标签：jquery, jquery-mobile

我有一个简单的登录对话框，我在文档加载时弹出：

```
<div data-role="popup" id="signupPopup" data-theme="a" class="ui-corner-all" data-dismissible="false" data-add-back-btn="true" data-transition="pop">
    <h3 class="centerText">Login</h3>

    <div class="popup">
        <form>              
            <input type="email" name="email" id="email" class="centerText" placeholder="email" data-theme="a"/>
            <input type="text"  name="zip"   id="zip"   class="centerText" placeholder="pass" data-theme="a"/>                  
        </form>
    </div>
</div>

$(document).ready(function(){
    $("#signupPopup").popup('open');
}); 
```

这是[示例的 jsFiddle](http://jsfiddle.net/HVbMk)。现在，在正常加载时弹出弹出窗口没有问题，然后它将 url 哈希更新为[http://myurl.com/#&ui-state=dialog](http://myurl.com/#&ui-state=dialog)并且如果我在 url 中单击重新加载这个哈希我得到js错误：`Uncaught Error: cannot call methods on popup prior to initialization; attempted to call method 'open'`。

我试图在[http://view.jquerymobile.com/master/demos/widgets/popup/上复制相同的行为](http://view.jquerymobile.com/master/demos/widgets/popup/)

通过将 has 添加到链接中，如下所示：

[http://view.jquerymobile.com/master/demos/widgets/popup/#&ui-state=dialog](http://view.jquerymobile.com/master/demos/widgets/popup/#&ui-state=dialog)但我无法复制相同的错误。所以，我想知道是否有人遇到了这个错误以及他/她是如何解决的？顺便说一句，我确实检查了谷歌关于这个错误的所有前 20 个链接，但没有一个有帮助，包括一些来自 SO。另外，值得注意的是，如果我使用 jQuery Mobile 1.2 和 jQuery 1.7.1 ，我不会收到此错误。

我正在使用 jQuery Mobile 1.3.1 和 jQuery 1.9.1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-25T14:45:04.783

您可能没有“页面”元素内的弹出 HTML。

```
<div data-role="page"> <!-- popup inside here --> </div> 
```

我发现当我不小心把它放在我需要首先调用 .popup() 来初始化的页面之外时，但是弹出窗口中的按钮或其他元素永远不会用这种方法初始化。根本修复是将弹出窗口放在页面元素内。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T13:58:32.473

`$(document).ready()`不应在 jQuery Mobile 中使用。而是使用`pageinit`

[http://jquerymobile.com/demos/1.2.1/docs/api/events.html](http://jquerymobile.com/demos/1.2.1/docs/api/events.html)

```
$(document).bind('pageinit', function() {
    $("#signupPopup").popup('open');
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-14T22:11:00.783

尼古拉，

尝试在调用 open 方法之前初始化弹出窗口。

```
 $("#signupPopup").popup();
    $("#signupPopup").popup('open'); 
```

# java - Java, This 作为参数

> ID：16131434
> 
> 赞同：-2
> 
> 时间：2013-04-21T13:07:56.693
> 
> 标签：java, nullpointerexception, this

我正在尝试构建一个需要将自身传递给另一个的类，但是`NullPointerException`当我尝试这个时我总是得到一个。我应该先检查什么？我使用 netbeans 并用断点检查，但对象是正确的，而不是 null。

代码

```
class Kartya {
...
  public void setVisible(boolean bool) {
    MainJFrame.slotpool.addKGepSlots(this);
  }
} 
```

堆栈跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at jatek.kartya.Kartya.setVisible(Kartya.java:193)
    at jatek.jatekos.EmberiJatekos.lapHozzaad(EmberiJatekos.java:66)
    at gui.MainJFrame.huz(MainJFrame.java:88)
    at gui.MainJFrame.ujJatek(MainJFrame.java:57)
    at gui.MainJFrame.<init>(MainJFrame.java:29)
    at Main$1.run(Main.java:37)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:13:15.203

`MainJFrame.slotpool`一片空白...

# jquery - jQuery 动画底部填充

> ID：16131435
> 
> 赞同：0
> 
> 时间：2013-04-21T13:08:00.390
> 
> 标签：jquery, html, css, menu

我有另一个关于我的 jQuery 脚本的初学者问题。我有一个脚本可以让菜单向右移动一点。第一个问题是它以`<a>`某种方式得到底部填充，我不知道为什么以及如何。第二个问题是如何`<td>`用`<a>`元素填充整个。我是 jQuery 的初学者，正在寻找一些学习方法，所以请耐心等待。非常感谢您的任何回答。

jQuery代码：

```
$(document).ready(function(){
    $('.menu a').hover(function(){
        $(this).stop().animate({width: '180px'}, "slow");
    }, function(){
        $(this).stop().animate({width: '160px'}, "slow");
    });
}); 
```

jsFiddle 演示：[这里](http://jsfiddle.net/tKfAL/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:20:23.203

您不应该使用表格作为菜单。绝对没有理由这样做。请改用无序列表，例如：

```
<ul id="menu">
    <li><a href="#">Menu Item 1</a></li>
    <li><a href="#">Menu item 2</a></li>
</ul> 
```

然后，您可以将其设置为：

```
#menu {list-style-type: none; margin:0;padding:0;}
#menu > li {background: #8B0B04;width: 160px;padding: 7px 30px 7px 0px;}
#menu a {color: #A9A582;text-decoration: none; font: 17px bold Helvetica;width: 100%; height: 100%} 
```

关于你的第二个问题，我不知道你的意思是什么？（：

编辑：

哦，你可以把它改成：

```
$(document).ready(function(){
    $('#menu > li').hover(function(){
        $(this).stop().animate({width: '180px'}, "slow");
    }, function(){
        $(this).stop().animate({width: '160px'}, "slow");
    });
}); 
```

现在通过编辑，我理解了您的第二个问题。我做了一个小提琴：

[http://jsfiddle.net/k8vsA/](http://jsfiddle.net/k8vsA/)

# wpf - RichTextBox 中与其段落的相对绑定

> ID：16131436
> 
> 赞同：1
> 
> 时间：2013-04-21T13:08:08.637
> 
> 标签：wpf, binding, richtextbox, controltemplate

我想通过`ItemsControl`旁边的显示一行文本`RichTextBox`。因此我创建了这个`ControlTemplate`：

```
<RichTextBox Margin="5,0,5,0">
        <RichTextBox.Resources>
            <Style TargetType="{x:Type Paragraph}">
                <Setter Property="Margin" Value="5,0,5,0"/>
                <Setter Property="LineHeight" Value="30"/>
                <Setter Property="LineStackingStrategy" Value="BlockLineHeight"/>                    
            </Style>
        </RichTextBox.Resources>
        <RichTextBox.Template>
        <ControlTemplate>
            <StackPanel Orientation="Horizontal">
                    <ItemsControl ItemsSource="{Binding Lines}" Margin="5,0,5,0">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                        <DataTemplate>
                                <ToggleButton Content="{Binding}" Height="{Binding BIND_ME_TO_LineHeigh_OF_PARAGRAPH" />
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>                       
                    <Border Name="Border" CornerRadius="2" Padding="2" Background="White" BorderBrush="Black" BorderThickness="0" >
                    <ScrollViewer Margin="0" x:Name="PART_ContentHost"/>
                </Border>
            </StackPanel>
            </ControlTemplate>
        </RichTextBox.Template> 
```

为了使项目`ItemsControl`与段落的行大小相同，我想将`ToggleButton`' 高度绑定到我在`Style`段落 ( ) 中定义的段落的 LineHeight 。我怎样才能做到这一点？

谢谢

# c# - C# 解析查询令牌行号 1 时出错

> ID：16131441
> 
> 赞同：0
> 
> 时间：2013-04-21T13:08:47.600
> 
> 标签：c#, sql, sql-server-ce

C# 解析查询令牌行号 1 时出错

```
 cmmd.CommandText = "Select total from Dept_Sales where department ='" + department + "'";
     var dtotal = cmmd.ExecuteScalar().ToString();
     var nntotal = dtotal + price;

     SqlCeCommand cmmmmd = new SqlCeCommand("update [Dept_Sales] SET [total]=@val1) where [department]=@val2", conn);
     {
     cmmmmd.Parameters.AddWithValue("@val1", nntotal);
     cmmmmd.Parameters.AddWithValue("@val2", department);
     cmmmmd.CommandType = System.Data.CommandType.Text;
     cmmmmd.ExecuteNonQuery()           }
     }
     catch (Exception ex)
     {
     MessageBox.Show(ex.Message);
     }
     also dtotal =3.51
     and price = 3.51
     nntotal = 7.02 
```

我认为我的查询可能有问题我已经更改了 15 次相同的错误任何人都可以给我任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:10:24.490

不匹配的右括号：

```
[total]=@val1)
            ^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:10:11.930

从第 4 行删除额外内容`)`可能会有所帮助。所以应该是这样的：

```
SqlCeCommand cmmmmd = 
    new SqlCeCommand("update [Dept_Sales] SET [total]=@val1 
                      where [department]=@val2", conn); 
```

# ruby-on-rails-3 - Not able to overwrite object properties in "create" method

> ID：16131443
> 
> 赞同：0
> 
> 时间：2013-04-21T13:08:51.160
> 
> 标签：ruby-on-rails-3, custom-validators

I have a simple table for storing users accounts information (emails and passwords) with two additional columns:

1.  is_active - says if user account is enable or disabled - the column type is *boolean* and in the context of DB2 it is mapped with *decimal(1)*
2.  registration_date - says when the user was created - the column type is *datetime* and in the context ofDB2 it is mapped with *datetime*

As this fields will not be set by the user, I have deleted their inputs from the users _form.

I want to populated this fields in my users controller as follows:

```
def create

   @security_user = SecurityUser.new(params[:security_user])

   @security_user.is_active = 0
   @security_user.registration_date = DateTime.now

  ...

end 
```

But I can not pass the validations that I have in the model. They looks like:

```
class SecurityUser < ActiveRecord::Base

  # Loading custom validators
  require 'lib/date_format_validator'
  ...

  # Accessible columns
  ...

  # Relationships
  ...

  # Validations
  validates :is_active, inclusion: { in: 0..1, message: "only '0' and '1' allowed"}, presence: true
  validates :registration_date, date_format:true , presence: true

end 
```

where the 'lib/date_format_validator' looks like follows:

```
class DateFormatValidator < ActiveModel::EachValidator

  def validate_each(object, attribute, value)
    if (DateTime.parse(value) rescue ArgumentError) == ArgumentError
      object.errors[attribute] << (options[:message] || "is not valid datetime")
    end
  end

end 
```

What I am doing wrong?

EDIT: The screenshot below displays the errors:

![enter image description here](https://i.stack.imgur.com/AYGLY.png)

EDIT2: Sam Ruby's answer helps me to finish with something like this for my custom validator method:

```
class DateFormatValidator < ActiveModel::EachValidator

  def validate_each(object, attribute, value)
    unless value.kind_of? DateTime || (DateTime.parse(value) rescue ArgumentError) != ArgumentError
      object.errors[attribute] << (options[:message] || "is not valid datetime")
    end
  end

end 
```

and to transform the validates method for the is_active column as follows:

```
validates :is_active, inclusion: { in: [ true, false ], message: "only 'true' and 'false' allowed"} 
```

because as it is said in the official documentation:

```
Since false.blank? is true, if you want to validate the presence of a boolean field you should use validates :field_name, :inclusion => { :in => [true, false] }. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:39:17.573

问题是您试图验证 ActiveRecord 对象，就好像列是字符串类型一样。但是由于您已将列定义为布尔值和日期时间，因此您将验证的类型将是 TrueClass、FalseClass 或 ActiveSupport::TimeWithZone。

换句话说，这些值已经被解析了。

`true`永远是`0`或`1`。

`DateTime.parse(DateTime.now)`总会提高`ArgumentError`

如果要验证未解析的值，请在控制器中执行此操作。

# google-custom-search - How to display only site root url in results from google custom search engine?

> ID：16131444
> 
> 赞同：0
> 
> 时间：2013-04-21T13:08:59.703
> 
> 标签：google-custom-search

How can I display only the root url in the google custom search engine results. Can somebody guide me?

[Google CSE http://www.danieldeepak.com/wp-content/uploads/test.jpg](http://www.danieldeepak.com/wp-content/uploads/test.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:38:13.543

我正在使用简单的 CSS 规则来隐藏 Google CSE 的 URL。

这是相关的 CSS，您可以从[www.labnol.org下载完整的 CSS](http://www.labnol.org/)

![在此处输入图像描述](https://i.stack.imgur.com/lk784.jpg)

# xml - 如何在 C# 中基于 XML 创建动态表单

> ID：16131446
> 
> 赞同：0
> 
> 时间：2013-04-21T13:09:11.567
> 
> 标签：xml, forms, c#-4.0, dynamic

我想在基于 XML 的 C# 中创建一个动态窗口窗体。我想使用 xmlTextReader 类，并使用 while (reader.read()) 函数来检查 XML 的内容并创建表单。它应该非常简单（超级简单！！）例如，如果我的 XML 包含：

```
 <TITLE>
  <Field>
    <field_name>Tom</field_name>
    <field_type>textbox</field_type>
    <is_mandatory>1</is_mandatory>
  </Field>
</TITLE> 
```

这意味着我需要一个名为“Tom”的文本框，它应该是强制性的。如果我将创建更多“字段”元素，它将在文本框下方创建另一个。

你能给我一个如何做的示例代码吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-19T23:21:47.313

听起来你想要某种动态表单生成。[您可以使用诸如FormFactory](http://formfactoryaspmvc.azurewebsites.net/)之类的东西从 XML 模式构建表单，而不是重新发明轮子。（参见最后一个以编程方式创建表单的示例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:42:13.883

要回答你的问题，我需要写一个规范。只有你知道你想要什么功能。

*   选择一种技术（asp.net、winforms、silverlight、WPF、what-ev）
*   选择一个用于解析 XML 的库。
*   遍历您的 XML 文档。
*   在一些大的 switch 语句中适当地吐出 new Label() 和 new TextBox()
*   决定如何对所有这些进行模板化和样式化。
*   做一些数据绑定。

我推荐使用 Joel Spolskys 模板来做规范，因为它是过程和语用学之间的最佳平衡。大多数规范模板往往是非实用的和纯过程的。

# jquery - Div 在另一个下滑动

> ID：16131450
> 
> 赞同：0
> 
> 时间：2013-04-21T13:09:46.427
> 
> 标签：jquery, css, responsive-design

如果可以的话，我正在尝试通过 CSS 让一个绝对定位的 div 元素（#slideout）在另一个 div 元素 .menu 下滑动。

这是我的：[代码](http://the-jeans-shop.com/jquery/toggle/)

正如您在单击红色选项卡时看到的那样；#slideout 涵盖了 .menu，这不是我想要的。我希望它藏在 .menu 下，只留下突出的红色标签，以便用户可以再次单击以显示该元素。

我尝试过的事情：我给 .menu 一个高 z-index。我给 #slideout 一个较低的 z-index 甚至没有 z-index。

这虽然行不​​通。

如果整个事情也有响应，那就太好了。你能给我一些 CSS 技巧甚至 jQuery 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:13:06.750

*Z-index*默认情况下通过元素的顺序和定位继承它的位置*（例如，具有绝对定位的元素很可能会与没有任何定位的元素重叠，但大多数情况下它可能因浏览器而异）*，以覆盖你必须设置一个定位 { *relative,absolute,fixed* } 然后添加所需的 z-index。

* * *

在您的情况下，您必须添加它`position:relative;`才能`.menu`工作，否则正如我之前提到的，它将遵循元素顺序的继承或它们具有的定位。 **CSS：**

```
.menu {
  background: none repeat scroll 0 0 #E0E0E0;
  height: 100px;
  width: 100%;
  position:relative;
  z-index: 99999 !important;
} 
```

这将解决一切

# javascript - 滚动打开的引导模式时触发事件

> ID：16131452
> 
> 赞同：3
> 
> 时间：2013-04-21T13:09:53.553
> 
> 标签：javascript, twitter-bootstrap, debugging, jquery-events

我正在使用“Bootstrap”模态（实际上是它的一个分支，它在显示模态时禁用背景滚动并添加更多功能 - “bootstrap-modalmanager”）。

当模态被滚动时，我需要做一些事情。问题是我找不到实际滚动的内容。

当我使用 Chrome 开发工具时，我可以在时间线中看到事件“滚动”被触发，但我找不到在哪里看到它滚动的 div，我需要知道这样我才能做到：

这个：

```
 $(window).on('scroll',"THE ID I AM LOOKING FOR",function(){..}) 
```

或这个：

```
 $("THE ID I AM LOOKING FOR").on('scroll',function(){..}) 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-21T13:41:05.247

您可以在事件对象中查找目标元素。这将告诉您事件在哪里触发。

```
$(document).on('scroll', function(e) {
    e.target; //e.target will be the DOM element where the scroll event was fired
}); 
```

您可以根据您的要求将不同的 jQuery 选择器传递给 'on' 事件。

# android - How to place a text below another text

> ID：16131454
> 
> 赞同：0
> 
> 时间：2013-04-21T13:10:08.290
> 
> 标签：android

```
<LinearLayout
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:orientation="horizontal"
        android:layout_weight="1"
        android:clickable="true"
        android:gravity="center_vertical"
        >
        <TextView
            android:id="@+id/f_day_time"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Date/Time"
            android:textColor="#000000"
            android:gravity="left"
            android:paddingLeft="8dp"
             />
        <TextView
            android:id="@+id/f_time"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:textColor="#000000"
            android:gravity="left"
            android:paddingLeft="8dp"
             />
    </LinearLayout> 
```

I am trying to place `text under a text.` inside a linear layout. I don't want a relative layout here as i am placing them inside a ListView.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:12:41.950

利用`android:orientation="vertical"`

android 垂直方向将垂直放置视图组的子项（即向上向下方向），而您使用的水平方向将水平设置子项（即并排）。默认情况下，方向是水平的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T13:14:28.887

**机器人：方向=“垂直”**

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

    </LinearLayout> 
```

# c++ - 如何在 C++ 中通过 Rcpp 使用 Boost 库

> ID：16131462
> 
> 赞同：4
> 
> 时间：2013-04-21T13:10:55.913
> 
> 标签：c++, boost, rcpp

我在**R 3.0.0上使用****Rcpp**包。我正在尝试运行[**这个示例**](http://gallery.rcpp.org/articles/a-first-boost-example/)，但我不能，因为我不知道如何使用**Boost**。**[](http://gallery.rcpp.org/articles/a-first-boost-example/)**

 ******我在目录 /Users/giorgi/boost_1_53_0 中安装了 Boost，因此我进行了设置`Sys.setenv("PKG_CXXFLAGS"="-I /Users/giorgi/boost_1_53_0")`，但我不确定我是否做对了。对不起，但我对这些东西很无知！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-21T23:03:27.490

我会尝试一些事情：

1.  使用 Boost 编写一个三行独立的 C++ 程序，并编译它。这只是为了向自己证明你的`-I/some/dir`旗帜是正确的。

2.  编写一个简单的 Rcpp 函数并使用 eg`sourceCpp()`来编译和加载它。

3.  创建一个文件`~/.R/Makevars`并将`-I`标志从 1\. 设置为此处的一个`CXXFLAGS`或`CFLAGS`两个将由`R CMD ...`and 因此使用`sourceCpp()`。

4.  如果其他一切都失败了，创建一个小包并添加`LinkingTo: BH`为 CRAN 包 BH 提供您可以使用的 Boost 标头（一旦您安装了 BH）。

*编辑，大约 1 1/2 年后*

您也可以`// [[Rcpp::depends(BH)]]`在此代码中使用 as 例如

```
#include <Rcpp.h>
#include <boost/math/common_factor.hpp>  // included in BH  

// [[Rcpp::depends(BH)]]    

using namespace Rcpp;

// [[Rcpp::export]]   
int computeGCD(int a, int b) {
  return boost::math::gcd(a, b);
} 
```

当我们同时更新 Rcpp 和 BH 时，它的构建和运行都很好：

```
R> library(Rcpp)
R> sourceCpp("/tmp/simpleBoost.cpp")
R> computeGCD(6, 15)
[1] 3
R> 
```******

# php - PHP SESSIONS 检查用户是否仍在数据库中，同时登录

> ID：16131464
> 
> 赞同：1
> 
> 时间：2013-04-21T13:11:06.417
> 
> 标签：php, mysql, session

假设名为**Michael**的用户已**注册**，并且在我们的数据库中名为**users**的表中。

Michael 浏览了我的网站，当他这样做时，我从表中删除了他的用户。我的登录系统适用于会话。

从数据库中删除用户 Michael 后，浏览器可以使用“Michael”浏览网站，直到会话结束。

那是因为在会话处理之后，除非您每次都检查，否则它不会改变。

由于查询/请求过多，我的解决方案可能会增加巨大的引擎负载：

在 session.inc.php 添加一个检查器：

```
if (isset($_SESSION['user']))
{
    $check = $pdo->prepare("SELECT * FROM users WHERE user_name = :user")
    $check->execute(array( ":user" => $_SESSION['user']));

    if (!$check->rowCount())
    {
        session_destroy();
    }
} 
```

***它将检查是否存在与他当前使用会话登录的用户名完全相同的行，如果没有，它将破坏会话。***

**问题：**

如果我的网站有很多浏览用户，该解决方案会导致引擎负载过大吗？

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:15:47.530

当您从“用户”表中删除一行时，只需删除或过期该用户的会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:54:00.133

Ayush - 你打算如何破坏别人的会话？

user1761494 - 最好的方法是将会话保存在数据库中，这不仅可以增加您网站的安全性，还可以让您完全控制会话。当您将用户踢出（删除/禁止）时，只需删除该用户的会话记录即可。

# php - How to fetch youtube embed params from text?

> ID：16131465
> 
> 赞同：0
> 
> 时间：2013-04-21T13:11:18.080
> 
> 标签：php

How can I explode all Youtube embed values from a text using PHP? For example I have the text:

```
Fails: <iframe width="560" height="315" src="http://www.youtube.com/embed/Ujwod-vqyqA" frameborder="0" allowfullscreen></iframe>

More fails: <iframe width="560" height="315" src="http://www.youtube.com/embed/DYRTzXSYixQ" frameborder="0" allowfullscreen></iframe>

More the more: <iframe width="560" height="315" src="http://www.youtube.com/embed/uLWqUW_U6dQ" frameborder="0" allowfullscreen></iframe> 
```

And I want to use one of all videos embed for my facebook post, for example first video embed:

```
https://i3.ytimg.com/vi/Ujwod-vqyqA/mqdefault.jpg 
```

How can I do this? I tried with `strpos`, but this does not work.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:41:41.250

```
$text = 'Fails: <iframe ...';

foreach(preg_split("/((\r?\n)|(\r\n?))/", $text) as $line) {
    if(!empty($line)) {
        $line = str_replace(array("iframe", "<", ">", '"'), null, $line);
        $values = explode(" ", trim($line));
        foreach($values as $value) {
            if(strpos($value, "=")) {
                $explode = explode("=", $value);
                $thisparams[$explode[0]] = $explode[1];
            }
        }
        $params[] = $thisparams;
    }
} 
```

（[preg_split 的参考](https://stackoverflow.com/questions/1462720/iterate-over-each-line-in-a-string-in-php)）

# c - C: "read: Bad Address" and "write: Bad Address"

> ID：16131468
> 
> 赞同：-1
> 
> 时间：2013-04-21T13:11:36.310
> 
> 标签：c, linux, unix, system

I want to Server-Client model with FIFO's and Client get directory path but I get errors "read: Bad address" and "write: Bad address".

**Client**

Server's Error : "read: Bad address"

Client's Error : "write: Bad address"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:18:29.137

可能您误用了`read`和的返回值`write`。成功时，它们返回正值，您将它们作为错误处理。

读取字符串的大小时也不知道。所以`strlen`是不合适的。

```
 if( (controlRead = read(fdp,pathName,sizeof(pathName)) ) <= 0)
 {
     // error ... 
```

与 相同的条件`write`。

传输字符串时，最好同时传输字符串长度：

写作：

```
void write_string(int fd, const char *string)
{
    size_t len = strlen(string);
    write(fd, &len, sizeof(len));
    write(fd, string, len);
} 
```

阅读：

```
void read_string(int fd, char *buffer, size_t size, size_t *len)
{
    size_t t_len;

    read(fd, &t_len, sizeof(t_len));
    if (t_len > size) t_len = size;
    read(fd, buffer, t_len);
    if (t_len < size) buffer[t_len] = 0; // null-terminate if there is enough space
    if (len) *len = t_len; // return length if wanted
} 
```

# css - css下拉菜单位置不正确

> ID：16131473
> 
> 赞同：0
> 
> 时间：2013-04-21T13:12:16.217
> 
> 标签：css, drop-down-menu

大家好，这是我的下拉菜单的 CSS 代码：

```
#nav {
-moz-background-clip:border;
-moz-background-inline-policy:continuous;
-moz-background-origin:padding;
background-color:#60625C;
bottom:0;
left:0;
margin:0;
padding:0;
width:100%;
position:absolute;
z-index:1;
}
#nav, #nav ul {
line-height:40px;
list-style-image:none;
list-style-position:outside;
list-style-type:none;
width:100%;
}
#nav a, #nav a:hover {
-moz-background-clip:border;
-moz-background-inline-policy:continuous;
-moz-background-origin:padding;
border:medium none;
display:block;
text-decoration:none;
}
#nav li {
float:left;
list-style-image:none;
list-style-position:outside;
list-style-type:none;
border-right:1px solid #6E7073;
}
#nav a, #nav a:visited {
color:#FFFFFF;
display:block;
padding:0 20px;
}
#nav a:hover, #nav a:active, .current_page_item a, #home .on {
text-decoration:none;
}
#nav li ul {
border-bottom:1px solid #6E7073;
height:auto;
left:-999em;
line-height:30px;
margin:0;
padding:0;
position:absolute;
width:222px;
}
#nav li li {
-moz-background-clip:border;
-moz-background-inline-policy:continuous;
-moz-background-origin:padding;
background:#1E1F21 none repeat scroll 0 0;
border-left:1px solid #6E7073;
border-right:1px solid #6E7073;
border-top:1px solid #6E7073;
width:220px;
}
#nav li li a, #nav li li a:visited {
-moz-background-clip:border;
-moz-background-inline-policy:continuous;
-moz-background-origin:padding;
background:#1E1F21 none repeat scroll 0 0;
color:#FFFFFF;
font-size:0.9em;
font-weight:normal;
}
#nav li li a:hover, #nav li li a:active {
-moz-background-clip:border;
-moz-background-inline-policy:continuous;
-moz-background-origin:padding;
background:#60625C none repeat scroll 0 0;
}

#nav li:hover ul, #nav li li:hover ul, #nav li li li:hover ul, #nav li.sfhover ul, #nav li li.sfhover ul, #nav li li li.sfhover ul {
left:auto;
} 
```

但是，菜单被放置在屏幕底部的不需要的位置。

![在此处输入图像描述](https://i.stack.imgur.com/rSHMj.png)

如何让它显示在博客的标题和主要内容之间？

![在此处输入图像描述](https://i.stack.imgur.com/8XVq7.png)

这是与“header.php”中的导航相关的代码

```
<div id="navbar">
<div id="nav">      
<ul>
  <li><a href="<?php bloginfo('url'); ?>">Home</a></li>
    <?php wp_list_pages('title_li=&depth=0&sort_column=menu_order&exclude=56'); ?>
</ul>
</div> 
```

提前谢谢了。

# jquery - 如何一次显示一个单独的模式弹出窗口？

> ID：16131474
> 
> 赞同：1
> 
> 时间：2013-04-21T13:12:26.893
> 
> 标签：jquery, modal-dialog, popup

我需要一点 jQuery 帮助。我在页面上显示了许多单独的产品 div ( **.productsWrap** )，所有这些都带有隐藏的信息部分。这个想法是，当单击特定产品的**a.activator**时，一个半透明的叠加层（**.productsOverlay**）会下降，然后是该特定产品的信息部分（**.productsPopBox**）。页面上可能有十个**.productsWrap**，所以我只希望一次显示一个弹出窗口。

简而言之，如果有人单击给定产品 ( **.productsWrap ) 的 a.activator，那么****.productsOverlay**和**.productsPopBox**将仅针对该产品出现。

HTML 标记是：

```
<section class="productsWrap">
   <section class="blueHeader"><h2></h2></section>
   <article>
      <div class="productsText">
          <a class="activator">Full service details</a>
      </div>
   </article>
</section>

<div class="productsOverlay overlay" style="display:none;"></div>
<div class="productsPopBox popBox" >
    <h2></h2><span class="close">x</span>
</div> 
```

这是我对 jQuery 的错误尝试：[jsfiddle](http://jsfiddle.net/rXNKU/5/)

我的第一次尝试有点奏效。它看起来不错，因为弹出窗口确实做了一些事情并且效果看起来不错。但是，它导致所有**.productsWrap**的所有**.productsOverlay**和**.productsPopBox**同时下降。

 ****```
$('.activator').click(function(){
    $('.productsOverlay, .caseStudiesOverlay').fadeIn('fast',function(){
        $('.productsPopBox, .caseStudiesPopBox').animate({'top':'-150px'},500);
    });
});
$('.productsOverlay, .caseStudiesOverlay, span.close').click(function(){
    $('.productsPopBox, .caseStudiesPopBox').animate({'top':'-1000px'},500,function(){
       $('.productsOverlay, .caseStudiesOverlay').fadeOut('fast');
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:09:05.237

如果您还没有解决您遇到的问题，这里是您在链接的 jsfiddle 中的修改版本：[链接](http://jsfiddle.net/exafred/rXNKU/50/)

我不确定您是否要为“所有产品提供一个模式弹出窗口，弹出内容根据点击的产品而变化”或“每个产品都有自己的弹出窗口”。

如果是前者，您应该可以将 a.activator 的点击事件替换为：

```
$('.activator').click(function (e) {
    $('.productsOverlay, .popupClose, .productsPopBox').fadeOut(250);
    var wrapper = $(this).parents('.wrap');
    var html = $(this).siblings('.hiddenDetails').html();
    wrapper.children('.productsOverlay, .popupClose').fadeIn(250)
        .siblings('.productsPopBox').html(html).fadeIn(250);
}); 
```

并且只会显示当前产品的叠加层。

它（非常）粗糙，但我确信这只是意味着它很好，对吧？****

# php - 使用 get 方法将值插入数据库

> ID：16131478
> 
> 赞同：0
> 
> 时间：2013-04-21T13:12:46.410
> 
> 标签：php, html, sql

我在 php 中相对较新。我在将值插入数据库的“离开”表时面临的问题。错误如下..

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'where lid = 4' 附近使用正确的语法

这是我的代码

```
<?php

include_once 'config.php';
$accept = "accepted";
mysql_query("insert into `leave` (`action`) values ('$accept') where lid =           ".$_GET['id'] , $dbCon ) or die(mysql_error());  

header('location: admin_leave.php'); 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:15:53.090

您需要为此使用**更新**而不是**插入**

```
mysql_query("update leave set `action` ='$accept' where lid = ".$_GET['id'] , $dbCon ) or die(mysql_error()); 
```

并且不要使用 mysql_* 它们是贬值链接：[http](http://php.net/manual/en/function.mysql-db-query.php) ://php.net/manual/en/function.mysql-db-query.php 。使用任一`PDO/mysqli`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:16:07.830

`INSERT`不能使用 with `WHERE`，可能是您正在寻找`UPDATE`

```
mysql_query("UPDATE `leave` SET `action`='$accept' where lid = ".$_GET['id'] , $dbCon ) or die(mysql_error()); 
```

您的查询是完全开放的`SQL Injection`。开始使用`Mysqli`OR`PDO`和准备好的语句。

# c# - Page source does not reflect what browser displays

> ID：16131479
> 
> 赞同：0
> 
> 时间：2013-04-21T13:13:01.640
> 
> 标签：c#, javascript, asp.net, webforms

I have a webpage with the following:

```
<input id="ColourPicker" type="text" value="000000" />
<asp:Label ID="ColourChosen" runat="server" Text="000000" ClientIDMode="Static"></asp:Label> 
```

These are bound to a jPicker:

```
$(document).ready(
  function () {
    $('#ColourPicker').jPicker(
      {
        images: { clientPath: 'Scripts/images/' },
        window: { position: { x: '25', y: '0' }, expandable: true }
      },
    function(color) {
      var all = color.val('all');
      document.getElementById('ColourChosen').innerHTML = all.hex;
    });
  }); 
```

When I select a colour in jPicker and click OK the browser displays:

![ColourPicker](https://i.stack.imgur.com/0052L.png)

The box on the left is ColourPicker and the label on the right is ColourChosen.

When I view the Page Source I see this:

```
<input id="ColourPicker" type="text" value="000000" />
<span id="ColourChosen">000000</span> 
```

I have some code-behind of this:

```
protected void Button1Click(object sender, EventArgs e)
{
var l = new List<Borg.PlotColurs> {new Borg.PlotColurs()};
l[0].PlotColour = ColourChosen.Text;
Borg.BulkInsert(ConfigurationManager.ConnectionStrings["utilConnectionString"].ConnectionString, "PlotColours", l);
ListView2.DataBind();
} 
```

I want to see ColourChosen.Text to equal f41313, but it always equals 000000.

What am I doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:19:46.180

您正在查看的页面源是从服务器下载的源。以后通过 Javascript 制作的所有版本（包括插件）都不会反映在页面源中。

要查看您的更改，您应该使用 Firefox 中的 FireBug、Chrome 中的 Chrome devtools 或 Internet Explorer 开发人员工具。

# ios - 读取 UISlider 最大值和最小值

> ID：16131484
> 
> 赞同：1
> 
> 时间：2013-04-21T13:14:01.070
> 
> 标签：ios, objective-c, uislider

有没有办法读取 Interface Builder 的属性检查器中规定的 UISlider 的最大值和最小值？我想将这些值用作 UIView 中 X 坐标的范围，但我不确定如何执行此操作。

```
- (IBAction)sineXYPad:(UIPanGestureRecognizer *)trigger {
    float sinepadHeight = sinexyview.bounds.size.height;
    float sinepadWidth = sinexyview.bounds.size.width;
    CGPoint location = [trigger locationInView:sinexyview];

    if ((location.y >= 0) && (location.y < sinepadHeight) && (location.x >= 0) && (location.x < sinepadWidth)) {
        float maxX = sinePSlider.maximumValue;
        float minX = sinePSlider.minimumValue;
        float sinePitchXY = (location.x > minX) && (location.x < maxX);
        sinePSlider.value = sinePitchXY;
        [PdBase sendFloat:sinePitchXY toReceiver:@"sine_pitch"];
    }
} 
```

这是我的用户界面：

![在此处输入图像描述](https://i.stack.imgur.com/vzUl8.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:42:18.263

尝试：

```
[sinePSlider setMinimumValue:sinexyview.bounds.origin.x];
[sinePSlider setMaximumValue:sinexyview.bounds.size.width]; 
```

# ruby-on-rails - Need help refactoring and speeding up if statement for view

> ID：16131485
> 
> 赞同：1
> 
> 时间：2013-04-21T13:14:05.893
> 
> 标签：ruby-on-rails, optimization, refactoring, dry

I have the following Ruby on Rails code in my helper. My views are slow loading when I have many links on the page.

Can anyone show me a refactored version that would be DRY and speed it up?

[https://gist.github.com/anonymous/2afe1956e7565731ff20](https://gist.github.com/anonymous/2afe1956e7565731ff20)

```
module ApplicationHelper

  def link_to_doc(document)
    if document.document_type.downcase == "image"
      link_to "#{document.name}", "#{document.url}", class: "sublime"
    elsif document.document_type.downcase == "video"
      sublime_video_link_to(document)
    elsif document.url && document.url.length > 0
      link_to "#{document.name}", "#{document.url}", download: "#{document.name.parameterize}"
    elsif document.admin_url && document.admin_url.length > 0
     content_tag :a, href: document.admin_url do
       link_to "#{document.name}", document.admin_url
     end
    else
      link_to "#{document.name}", document_url(document)
    end
  end

  def btn_link_to_doc(document)
    if document.document_type.downcase == "image"
      link_to "View #{ document.document_type.downcase }", "#{document.url}", class: "document-link btn sublime"
    elsif document.document_type.downcase == "video"
      sublime_video_btn_link_to(document)
    elsif document.url && document.url.length > 0
      link_to "Download #{ document.document_type.downcase }", "#{document.url}", download: "#{document.name.parameterize}", class: "document-link btn"
    elsif document.admin_url && document.admin_url.length > 0
     content_tag :a, href: document.admin_url do
       link_to "View", document.admin_url, class: "document-link btn"
     end
    else
      link_to "View", document_url(document), class: "document-link btn"
    end
  end  

private

  def sublime_video_btn_link_to(document)
     tag=[]
      tag<<link_to("View #{ document.document_type.downcase}", "#video#{document.id}", class: "document-link btn sublime", data: { settings: 'close-button-visibility:visible' })  
      tag<<  content_tag(:video,{ id: "video#{document.id}", style: "display:none;", width:'480', height:'270', preload: true }) do
              content_tag(:source, nil,{src: document.url}) 
             end
      tag.join.html_safe
  end

  def sublime_video_link_to(document)
     tag=[]
      tag<<link_to("#{document.name}", "#video#{document.id}", class: "sublime", data: { settings: 'close-button-visibility:visible' })  
      tag<<  content_tag(:video,{ id: "video#{document.id}", style: "display:none;", width:'480', height:'270', preload: true }) do
              content_tag(:source, nil,{src: document.url}) 
             end
      tag.join.html_safe
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:44:56.533

而不是这些双重检查

```
 document.admin_url && document.admin_url.length > 0 
```

您可以使用

```
 document.url.to_s.blank? 
```

它将检查 nil 和空字符串

# udp - Ns-3 Distributed Coordination Function and Collision Avoidance

> ID：16131493
> 
> 赞同：0
> 
> 时间：2013-04-21T13:14:55.570
> 
> 标签：udp, wifi, simulation, packet-capture, ns-3

I am new to NS-3 and I have a UDP WiFi simulation that works fine. I need to expand my simulation by enabling Distributed Coordination Function with Collision Avoidance. Can someone please explain to me exactly how I modify my code to achieve this?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:12:07.757

UDP over IP over wifi 已经在使用 MAC 级 CSMA-CA DCF。简而言之，您的模拟已经在模拟您想要的。

# windows-phone-7 - WP7 - LongListSelector, how to hide vertical scroll bar

> ID：16131496
> 
> 赞同：0
> 
> 时间：2013-04-21T13:15:15.790
> 
> 标签：windows-phone-7, xaml, silverlight-toolkit, longlistselector

I need to hide vertical scrollbar in `LongListSelector`. For this I use:

> ScrollViewer.VerticalScrollBarVisibility="Hidden"

In ListBox it works well but in LongListSelector it doesn't work.

This is my LongListSelector code:

```
<Grid x:Name="ContentPanel"
      Grid.Row="1"
      Margin="12,0,12,0">
  <toolkit:LongListSelector x:Name="TasksLongListSelector"
                            Margin="0,12,0,0"
                            Background="Transparent"
                            ScrollViewer.VerticalScrollBarVisibility="Hidden">
    <toolkit:LongListSelector.GroupHeaderTemplate>
      <DataTemplate>
        <Border Width="431"
                Height="53"
                HorizontalAlignment="Left"
                BorderThickness="2"
                BorderBrush="White"
                Margin="13,0,0,22">
          <Grid HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*" />
              <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBlock Text="{Binding Key, Converter={StaticResource LocalDateConverter}}"
                       FontSize="20"
                       FontWeight="Bold"
                       Foreground="White"
                       HorizontalAlignment="Left"
                       Padding="14,10,0,0" />
            <Image Grid.Column="1"
                   Source="/Images/CalendarWhiteIcon.png"
                   Width="21"
                   Height="21"
                   HorizontalAlignment="Right"
                   VerticalAlignment="Top"
                   Margin="0,13,14,0" />
          </Grid>
        </Border>
      </DataTemplate>
    </toolkit:LongListSelector.GroupHeaderTemplate>
    <toolkit:LongListSelector.ItemTemplate>
      <DataTemplate>
        <Button Background="White"
                Width="455"
                Height="105"
                Margin="0,-12,0,12"
                Tag="{Binding Id}"
                HorizontalContentAlignment="Stretch"
                VerticalContentAlignment="Stretch"
                Click="Button_Click_1">
          <Grid HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="Auto" />
              <ColumnDefinition Width="Auto" />
              <ColumnDefinition Width="Auto" />
              <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
              <RowDefinition Height="*" />
              <RowDefinition Height="24" />
            </Grid.RowDefinitions>
            <TextBlock Grid.ColumnSpan="4"
                       Text="{Binding Name}"
                       FontSize="24"
                       Foreground="#400000" />
            <Image Grid.Row="1"
                   Visibility="{Binding Project, Converter={StaticResource StringToVisibilityConverter}}"
                   Source="/Images/ProjectIcon.png"
                   Width="20"
                   Height="18"
                   HorizontalAlignment="Left"
                   VerticalAlignment="Top"
                   Margin="0,0,5,0" />
            <TextBlock Grid.Row="1"
                       Grid.Column="1"
                       Visibility="{Binding Project, Converter={StaticResource StringToVisibilityConverter}}"
                       Text="{Binding Project, Converter={StaticResource ToUppercaseConverter}}"
                       FontSize="16"
                       Foreground="#666666"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       Margin="0,-2,9,0"
                       LineStackingStrategy="BlockLineHeight" />
            <Image Grid.Row="1"
                   Grid.Column="2"
                   Visibility="{Binding Context, Converter={StaticResource StringToVisibilityConverter}}"
                   Source="/Images/ContextIcon.png"
                   Width="20"
                   Height="18"
                   HorizontalAlignment="Left"
                   VerticalAlignment="Top"
                   Margin="-3,1,1,0" />
            <TextBlock Grid.Row="1"
                       Grid.Column="3"
                       Visibility="{Binding Context, Converter={StaticResource StringToVisibilityConverter}}"
                       Text="{Binding Context, Converter={StaticResource ToUppercaseConverter}}"
                       FontSize="16"
                       Foreground="#666666"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       Margin="0,-2,0,0"
                       LineStackingStrategy="BlockLineHeight" />
          </Grid>
        </Button>
      </DataTemplate>
    </toolkit:LongListSelector.ItemTemplate>
  </toolkit:LongListSelector>
</Grid> 
```

How can I hide vertical scrollbar in LongListSelector?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:47:45.217

我找到了解决方案。在 LongListSelector 事件 Loaded 中添加以下代码：

```
ScrollViewer sv = VisualTreeHelper.GetChild(VisualTreeHelper.GetChild(TasksLongListSelector, 0), 0) as ScrollViewer;
ScrollBar sb = ((FrameworkElement)VisualTreeHelper.GetChild(sv, 0)).FindName("VerticalScrollBar") as ScrollBar;
sb.Width = 0; 
```

# kotlin - Kotlin 注解：类型不匹配：推断类型为 java.lang.Class 但是 java.lang.Class 预计

> ID：16131498
> 
> 赞同：2
> 
> 时间：2013-04-21T13:15:37.930
> 
> 标签：kotlin

给定以下 Kotlin 注释：

```
public Retention(RetentionPolicy.RUNTIME) annotation class foo(val text : String) 
```

以及下面的代码来检查一个类是否被上面的注释注释：

```
if (javaClass<Bar>().isAnnotationPresent(javaClass<foo>())) {
    // do something here.
} 
```

如果注释类 ( `foo`) 和使用它的代码位于同一个模块（maven 工件）中，则代码可以毫无问题地编译和运行。

但是，如果我将它们分成不同的模块，则会发生以下编译错误：

> Kotlin：类型不匹配：推断类型为 java.lang.Class 但预期为 java.lang.Class

知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-07T17:34:02.903

问题似乎被标记为已修复。[https://youtrack.jetbrains.com/issue/KT-3197](https://youtrack.jetbrains.com/issue/KT-3197)这是一个错误。

# python - py2app error: in find_needed_modules TypeError: 'NoneType' object has no attribute '__getitem__'

> ID：16131500
> 
> 赞同：3
> 
> 时间：2013-04-21T13:15:43.370
> 
> 标签：python, macos, macports, py2app

I have some troubles with py2app; for some reason I have always the same error for all scripts that I developed. At the moment I am using last MacPorts version and after two days of testing I cannot figure out what is wrong.

One of the setup.py file for py2app is:

```
from setuptools import setup

APP = ['main.py']
OPTIONS = {'argv_emulation': True, 'includes': ['sip', 'PyQt4._qt', 'PyQt4.QtCore', 'PyQt4.QtGui'],
    'excludes': ['PyQt4.QtDesigner', 'PyQt4.QtNetwork', 'PyQt4.QtOpenGL', 'PyQt4.QtScript', 'PyQt4.QtSql', 'PyQt4.QtTest', 'PyQt4.QtWebKit', 'PyQt4.QtXml', 'PyQt4.phonon']}

setup(
      app=APP,
      options={'py2app': OPTIONS},
      setup_requires=['py2app'],
) 
```

And this is the log:

```
python setup.py py2app
running py2app
creating /Users/opensw/SkyDrive/SISSA/Kymograph/build/bdist.macosx-10.6-intel/python2.7-standalone/app
creating /Users/opensw/SkyDrive/SISSA/Kymograph/build/bdist.macosx-10.6-intel/python2.7-standalone/app/collect
creating /Users/opensw/SkyDrive/SISSA/Kymograph/build/bdist.macosx-10.6-intel/python2.7-standalone/app/temp
creating build/bdist.macosx-10.6-intel/python2.7-standalone/app/lib-dynload
creating build/bdist.macosx-10.6-intel/python2.7-standalone/app/Frameworks
*** using recipe: virtualenv ***
WARNING: ImportError in sip recipe ignored: No module named matplotlib-1
WARNING: ImportError in sip recipe ignored: No module named scipy-0
*** using recipe: sip ***
*** using recipe: matplotlib ***
*** using recipe: scipy ***
Traceback (most recent call last):
  File "setup.py", line 10, in <module>
    setup_requires=['py2app'],
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/core.py", line 152, in setup
    dist.run_commands()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py", line 972, in run_command
    cmd_obj.run()
  File "/Users/opensw/SkyDrive/SISSA/Kymograph/py2app-0.7.3-py2.7.egg/py2app/build_app.py", line 553, in run
    self._run()
  File "/Users/opensw/SkyDrive/SISSA/Kymograph/py2app-0.7.3-py2.7.egg/py2app/build_app.py", line 741, in _run
    self.run_normal()
  File "/Users/opensw/SkyDrive/SISSA/Kymograph/py2app-0.7.3-py2.7.egg/py2app/build_app.py", line 816, in run_normal
    self.process_recipes(mf, filters, flatpackages, loader_files)
  File "/Users/opensw/SkyDrive/SISSA/Kymograph/py2app-0.7.3-py2.7.egg/py2app/build_app.py", line 710, in process_recipes
    find_needed_modules(mf, packages=rval['packages'])
  File "build/bdist.macosx-10.6-intel/egg/modulegraph/find_modules.py", line 199, in find_needed_modules
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

Thanks for any help.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-08T15:53:24.350

问题是一些错误的输入已传递给算法，该算法试图检测依赖关系以便将它们打包到您的应用程序中 - 我遇到问题的地方之一是在包 README 中使用 github 风格的降价。 md 文件。

这是调试 setup.py 问题的一般指南，或者实际上是一般的 python 问题。

1.  以交互模式再次运行它，即`python -i setup.py py2app`. 退出`setup.py`后，您会发现自己处于 python 提示符中。

2.  运行`from pdb import pm; pm()`。您现在应该发现自己处于调试提示符下。

3.  键入`up`并按 Enter - 您现在是堆栈中更高的帧 - 您可以键入`list`以查看当前帧在源代码中的位置，并`args`查看传递给当前帧的参数（通常是函数或方法）。您还可以运行 python 命令来检查当前状态，并运行`pp var`以漂亮地打印该变量。

4.  重复上述步骤几次后，您会发现错误出现的位置 - 如果我遇到的是 README 文件，我发现了一个名为的变量`lineno`，它给出了导致错误的 README 文件的行。如果您的问题是模块导入，它可能会有所不同，但我的直觉是，您会发现自己`packages`在堆栈跟踪中看到的参数上循环，当前列表项将是您问题的关键。

# c - Cannot open the file created with O_CREAT

> ID：16131506
> 
> 赞同：0
> 
> 时间：2013-04-21T13:16:28.107
> 
> 标签：c, file-io

I created a file with the flag `O_CREAT`, but when I tried to open the created "out.txt" with Notepad. It said "cannot open this file" or something like "access denied".

```
fd = open("out.txt", O_CREAT); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T13:19:54.303

您必须使用`close`-call 关闭文件。否则它的内容不会被刷新并且文件不会被写入磁盘。此外，您可能会告诉您要在文件上做什么。

```
fd = open("out.txt", O_WRONLY | O_CREAT); //write to the file
//write to file
close(fd); //might check return value 
```

参见[维基百科](http://en.wikipedia.org/wiki/Open_%28system_call%29)。

# jsp - 如何将 Jsp 页面转换为 PDF 以及如何进一步保存

> ID：16131510
> 
> 赞同：0
> 
> 时间：2013-04-21T13:16:50.000
> 
> 标签：jsp, core

我正在制作一个基于 Web 的计费系统，首先我要获取用户填写的表格，然后需要将其转换为 PDF .. 我正在使用 JSP 所以我想问的是我不知道如何转换将 JSP 表单转换为 Pdf 并保存该 pdf 文件？请告诉我如何将该表格转换为 pdf 并将其保存到用户的机器中。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T05:44:21.723

```
package com.sample.pdfconvertor;       
import com.lowagie.text.Document;    
import com.lowagie.text.Paragraph;    
import com.lowagie.text.pdf.PdfWriter;    
import java.io.File;    
import java.io.FileOutputStream;    
public class PDFConversion    
{    
 /**   
  * This method is used to convert the given file to a PDF format   
  * @param inputFile - Name and the path of the file   
  * @param outputFile - Name and the path where the PDF file to be saved   
  * @param isPictureFile   
  */   

  private void createPdf(String inputFile, String outputFile, boolean isPictureFile)    
  {    
   /**   
    * Set the page size for the image   
    */   
     Rectangle pageSize = new Rectangle(2780, 2525);    
     Document pdfDocument = new Document(pageSize);    
     String pdfFilePath = outputFile;    

     try    
     {    
       FileOutputStream fileOutputStream = new FileOutputStream(pdfFilePath);    

       PdfWriter writer = null;    

       writer = PdfWriter.getInstance(pdfDocument, fileOutputStream);    

       writer.open();    

       pdfDocument.open();    

       /**   
        * Proceed if the file given is a picture file   
       */   

       if (isPictureFile)    
       {    
          pdfDocument.add(com.lowagie.text.Image.getInstance(inputFile));    
       }    

       /**  
        * Proceed if the file given is (.txt,.html,.doc etc)   
        */   

      else      
      {    
          File file = new File(inputFile);    
         pdfDocument.add(new Paragraph(org.apache.commons.io.FileUtils.readFileToString(file)));    

      }    

      pdfDocument.close();    

      writer.close();    
  }    
  catch (Exception exception)    
  {    
     System.out.println("Document Exception!" + exception);    
  }    

 }     

 public static void main(String args[])    
 {    

   PDFConversion pdfConversion = new PDFConversion();    

  //pdfConversion.createPdf("C:/shunmuga/tajmahal.jpg", "C:/shunmuga/tajmahal.pdf", true);    

  // For other files    

  pdfConversion.createPdf("a.html","sample.pdf", false);    

} 
```

# c++ - Maximum subarray_problem understanding

> ID：16131511
> 
> 赞同：0
> 
> 时间：2013-04-21T13:16:52.393
> 
> 标签：c++, c, algorithm

I am researching the maximum subarray problem. It would appear that I haven't gotten the core idea. Let's say you have the following array: `int arr[] ={10, 4, 2, 12, 16, 1}` From what I understand the maximum subarray should be equal to 14, since the lowest and highest possible sub array is 2 (the third element) and 16 (the 5th element) right? Well, apperantly not. I implemented the linear time algorithm which I found here: [http://heliang.me/wiki/index.php?title=4.1_The_maximum-subarray_problem](http://heliang.me/wiki/index.php?title=4.1_The_maximum-subarray_problem) It's implementation in c++"

```
int max_sarr(int arr[], int size)
{
    int  max_sum = -9999;
    int sum = 0;
    for(int i = 0; i < size; i++)
    {
        sum += arr[i];
        if(sum > max_sum)
            max_sum = sum;
        if(sum < 0)
            sum = 0;
    }
    return sum;
}
int main()
{
    int arr[] = {10, 4, 2, 12, 16, 1};
    int p = max_sarr(arr, 6);
    cout << p << endl;
    return 0;
} 
```

The output is 45\. So... where is the mistake in my thought process ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:19:52.450

你误解了这个问题。问题是找到给定数组的连续子数组，使其具有所有子数组的最高和。也就是说，它基本上会在数组中找到第一个元素和最后一个元素，如果将包括它们之间的元素相加，它将为您提供最大可能值。

如果数组中的所有值都是正数，则最大子数组始终是整个数组。在这种情况下，如果将数组中的所有元素相加，则得到 45。

考虑一个带有 values 的数组`{-5, 10, -3, 22}`。我们可以枚举它的所有子数组：

```
Subarrays of length 0: {}
Subarrays of length 1: {-5}             {10}         {-3}     {22}
Subarrays of length 2: {-5, 10}         {10, -3}     {-3, 22}
Subarrays of length 3: {-5, 10, -3}     {10, -3, 22}
Subarrays of length 4: {-5, 10, -3, 22} 
```

和最大的子数组为`{10 -3 22}`，其和为 29。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T13:32:12.360

sftrabbit 的答案很棒，但是我强烈推荐[CLRS 书页 68 中](http://en.wikipedia.org/wiki/Introduction_to_Algorithms)*的最大子数组问题*部分。它非常清楚，它还讨论了渐近复杂性和问题的现实生活。

除此之外，正如您所料，一个包含所有正元素的数组，它的最大子数组将是数组本身。

# java - 将字符串传递给Java中正确编码的函数

> ID：16131514
> 
> 赞同：0
> 
> 时间：2013-04-21T13:17:20.363
> 
> 标签：java, livelink

我有一个名为 Test 的文件夹，其中包含以下文件夹：

*   安永 1 P-¦+¡lohy k da+òov+¢m p-¦izn+ín+¡m 2002 - 2004

然后我有以下代码

```
public static void main( String[] args )
{
    File f = new File( "C:\\Test" );
    File [] children = f.listFiles();

    System.out.println( children[0].getName() );
    System.out.println( System.getProperty("file.encoding") );

    lapi.createObjectEx( 0, 3489025, LAPI_DOCUMENTS.OBJECTTYPE, LAPI_DOCUMENTS.FOLDERSUBTYPE , children[0].getName(), ci, oi );

} 
```

我执行了两次代码。一次使用 Netbeans 调试器，另一次使用 Windows 命令行中的 jar 文件。

Netbeans 调试输出

```
> EY 1 P-¦+¡lohy k da+òov+¢m p-¦izn+ín+¡m 2002 - 2004
> UTF-8 
```

Windows 命令行输出

```
> EY 1 P-ª+ílohy k da+‗ov+óm p-ªizn+Ýn+ím 2002 - 2004
> Cp1252 
```

lapi 对象代表 Livelink API，用于在 Livelink Server（现在称为 Content Server）中创建文件夹，这是 OpenText 的产品。

从 Netbeans 执行时，将在 Livelink 服务器中使用适当的名称创建文件夹。从 Windows 命令行执行时，文件夹名称包含很多问号。编码问题意味着文件夹名称无法在生成的网页中正确显示。

有没有人知道我如何能够解决这个问题并在将字符串传递给我的 lapi 函数时显式设置编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:22:01.927

使用此 VM（命令行）参数：

```
-Dfile.encoding=UTF-8 
```

# ios - Dynamically Creating A Core Data Model At Runtime

> ID：16131517
> 
> 赞同：7
> 
> 时间：2013-04-21T13:17:30.400
> 
> 标签：ios, sharepoint, core-data

Is it possible at runtime to generate a core data model from a set of entities on a server? e.g. SharePoint lists or SQL/MySQL/Parse.

I'm trying to go a dynamic route because fields in SharePoint lists/SQL/Parse may be added at any time in the future meaning the core data model version in the app has to change to match the SharePoint list on the server. If it was possible to generate an entity (SharePoint list) in core data dynamically then the app won't break when the columns in the entity change on the server.

If this is possible does anybody have an example?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T19:19:05.113

See the reference for NSEntityDescription. You can build up a model definition by defining entities in code.

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSEntityDescription_Class/NSEntityDescription.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSEntityDescription_Class/NSEntityDescription.html)

**Edit**

From our good friends at Cocoanetics: [http://www.cocoanetics.com/2012/04/creating-a-coredata-model-in-code/](http://www.cocoanetics.com/2012/04/creating-a-coredata-model-in-code/)

# java - How to get the location specific data for hibernate context file

> ID：16131518
> 
> 赞同：0
> 
> 时间：2013-04-21T13:17:34.893
> 
> 标签：java, hibernate

How to get the location specific data such as user name and propertyfile loadings at run time for hibernate context file. I am working in GWT framwork

I have this in my applicationcontext.xml

```
 <bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url"   value="jdbc:mysql://localhost:3306/dashboardsupervisor" />
    <property name="username" value="root" />
    <property name="password" value="1234" />
</bean> 
```

it works fine and connect with my database , Now my problem is that this password"1234" is in some file "monitor.properties" and the location of this file is UNKNOWN, I do not know the file location , it varies from machine to machine .

Any idea how can i get the password here instead of "1234" a password that is in the file which location in unknown ..

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:29:39.290

您可以使用返回 DataSource 对象的方法创建自定义工厂 Bean。在 Factory Bean 方法中，您将完全控制 DS 对象的创建方式，因此，例如，您可以从 Spring 配置中获取除密码之外的所有属性，但密码将以不同的方式找到。

只要您可以保证 monitor.properties 文件位于类路径上，还有更简单的方法。在这种情况下，您不需要设置确切的属性文件位置，而是使用

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
<property name="location" value="monitor.properties" />
</bean> 
```

如果您的 monitor.properties 中有密码属性，则可以将其引用为 ${password}

（查看完整示例：[http](http://www.mkyong.com/spring/spring-propertyplaceholderconfigurer-example/) ://www.mkyong.com/spring/spring-propertyplaceholderconfigurer-example/ ）

# nhibernate - NHibernate 身份插入

> ID：16131522
> 
> 赞同：1
> 
> 时间：2013-04-21T13:18:09.167
> 
> 标签：nhibernate

我一直在四处寻找，找不到 NHibernate 的这个问题的好答案。

我正在使用一个使用 NHibernate 的 API。我正在进行数据传输，并且正在尝试使用他们的 User 对象来保存用户数据。

我创建对象

```
User objUser = new User(); 
```

他们有一个映射文件，指定将 ID 设置为身份

```
<id name="Id" column="UserId" type="int">
  <generator class="native" />
</id> 
```

但我的要求之一是将旧 ID 保存到用户表中。我需要能够将身份插入临时设置为 ON 并保存记录，但仍然能够使用 User 对象来保存关联的数据。

我试着做这样的事情

```
 using (ISession session = MyDatabaseFactory.SessionFactory.OpenSession())
{
    using (ITransaction trans = session.BeginTransaction())
    {
       session.CreateSQLQuery("SET IDENTITY_INSERT Users  ON").UniqueResult();
       session.Save(objUser, objUser.Id);
       session.Flush();

       trans.Commit();

       session.CreateSQLQuery("SET IDENTITY_INSERT Users OFF").UniqueResult();

       session.Close();
       objUser= session1.Merge(objUser);
       }
 } 
```

但是当以后像这样再次尝试保存用户对象时

```
objUser.Passwords.Add("password1");
                    objUser.Save() 
```

我收到一个错误：具有相同标识符值的不同对象已与会话关联

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:54:05.637

`Save()`尝试将新对象插入数据库。您应该尝试`Update()`，它会更新数据库中的现有记录以获取持久对象。您还可以使用`SaveOrUpdate()`which 来决定要使用上述哪个。

通过再次调用`Save()`，我认为它正在尝试插入具有相同 ID 的另一条记录。 [这里的答案](https://stackoverflow.com/questions/1150854/saveorupdate-vs-update-and-save-in-nhibernate)有更多细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:15:01.887

如果您的要求只是针对非常特殊的情况，例如数据库更新或迁移，您可能会使用**不同的会话工厂**，其中 ID 是分配的：

```
<id name="Id" column="UserId" type="int">
  <generator class="assigned" />
</id> 
```

并分配 id：

```
User objUser = new User() { UserId = 42 }; 
```

* * *

如果您的案例与正常的业务案例紧密集成，那么这不是一个很好的解决方案。

您可以尝试实现自己的`IIdentifierGenerator`. 不要指望它简单直接。当您派生时，您可能有机会`IdentityGenerator`，合并来自`Assigned`生成器的一些代码并将这些东西破解`SET IDENTITY_INSERT Users ON`到其中......生成器需要知道何时使用哪种策略。例如，当 id 仍然为 0 时，让 SQL Server 创建一个，当它是别的东西时，插入分配的值。

# jquery - jquery添加类但chrome不呈现

> ID：16131523
> 
> 赞同：1
> 
> 时间：2013-04-21T13:18:13.163
> 
> 标签：jquery, css, google-chrome

CSS代码

```
#id .class1 .class2 .a{max-height:20px}
.b{max-height:100px} 
```

我使用 jquery 向具有类 'a' 的元素添加一个类 'b'，但 chrome 不会呈现它。但如果我写

```
#id .class1 .class2 .b{max-height:100px} 
```

chrome会渲染它...

我只想知道为什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:20:47.580

这是因为[css 规则优先级](http://www.w3.org/TR/CSS21/cascade.html)

前任：

```
<div id="id">
    <div class="class1">
        <div class="class2">
            <div class="a">
            </div>
        </div>
    </div>
</div> 
```

在上述情况下，如果将一个类`b`添加到`div.a`，则该规则`#id .class1 .class2 .a`将覆盖规则`.b`，因为它更具体

级联的工作方式如下：

1.  更重要的规则适用。
2.  如果同样重要，则适用更具体的规则。
3.  如果同样具体，则适用后一条规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:24:56.563

试试这个 -

```
.b{max-height:100px !important;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T13:25:01.690

我相信您的 CSS 选择器具有更高程度的特异性，这意味着它将优先于具有单个类的 jQuery 选择器。使用 jQuery 选择元素时，请尝试使用与 CSS 中相同的完整路径。

```
$('#id .class1 .class2 .a').addClass... 
```

# ruby-on-rails - Rails - Model association generates an invalid SQL query

> ID：16131524
> 
> 赞同：0
> 
> 时间：2013-04-21T13:18:22.757
> 
> 标签：ruby-on-rails, ruby

I have a rails app in which one model was built like this

```
class Forum::Thread < ActiveRecord::Base
  belongs_to :forum
  belongs_to :user
  attr_accessible :body, :title

  has_many :comments, dependent: :destroy
end 
```

In some point I've realized that `user` is not a good name, so I've changed it to `author`.

```
class Forum::Thread < ActiveRecord::Base
  belongs_to :forum
  belongs_to :author, class_name: 'User'
  attr_accessible :body, :title

  has_many :comments, dependent: :destroy
end 
```

Also, in `user` I have the following:

```
has_many :forum_threads, class_name: 'Forum::Thread', inverse_of: :author 
```

But when I try to fetch the list of threads (`@user.forum_threads`, for example), it seems like rails still builds a query that refers to the old `user_id` instead for the new `author_id`.

```
 Showing /home/giladnaaman/Programming/Eclipse/Hephaestus/app/views/users/show.html.erb where line #40 raised:

SQLite3::SQLException: no such column: forum_threads.user_id: SELECT COUNT(*) FROM "forum_threads"  WHERE "forum_threads"."user_id" = 1

Extracted source (around line #40):

37:                         # of Threads
38:                     </dt>
39:                     <dd>
40:                         <%= @user.forum_threads.count%> <%= link_to 'watch', '#', class: 'btn btn-mini pull-right'%>
41:                     </dd>
42:                     <br />
43:                     <dt> 
```

What can I do to fix this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:55:21.290

也许您应该使用外键，外键是指“user_id”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:22:09.673

也许尝试设置foreign_key？[http://guides.rubyonrails.org/association_basics.html#options-for-belongs_to](http://guides.rubyonrails.org/association_basics.html#options-for-belongs_to)

# django - django模板和视图的问题

> ID：16131528
> 
> 赞同：-1
> 
> 时间：2013-04-21T13:18:34.817
> 
> 标签：django, django-models, django-templates, django-views, django-urls

大家好，提前感谢您的帮助，我一般是编程新手。我想在配音演员（在 Film.html 中）中创建一个链接，并使用该 ID 打开一个新页面（Attore.html），其中仅加载与该 ID 关联的数据，但它不会这样做，因为它加载它们，但我不明白错误在哪里。我也不知道为什么不对 Attore.html 中的 CSS 收费，而在 Film.html 中没有问题，而且很奇怪，因为它位于 Base.html 上。

这是稍微简化的代码。

**模型.py：**

```
from django.db import models

class Attore( models.Model ):
    nome = models.CharField( max_length=30 )
    cognome = models.CharField( max_length=30 )
    foto = models.CharField( max_length=100 )
    data_inserimento = models.DateField( null=True, verbose_name="data d'inserimento" )
    def __unicode__(self):
        return self.nome + " " + self.cognome + " " + self.foto
    class Meta:
        verbose_name_plural = "Attori"

class Film( models.Model ):
    titolo = models.CharField( max_length=39 )
    trama = models.CharField( max_length=1000 )
    locandina = models.CharField( max_length=100 )
    copertina = models.CharField( max_length=100 )
    data_inserimento = models.DateField( null=True, verbose_name="data d'inserimento" )
    attori = models.ManyToManyField( Attore )
    def __unicode__(self):
        return self.titolo + " " + self.trama + " " + self.locandina + " " + self.copertina
    class Meta:
        verbose_name_plural = "Film" 
```

**视图.py：**

```
from django.shortcuts import render_to_response, get_object_or_404
from django.template import RequestContext
from models import *

def film(request):
    film = Film.objects.order_by("titolo")
    return render_to_response('Film.html', { 'film': film, })

def film_attore(request, id):
    get_attore_id = get_object_or_404( Attore, pk=id )
    return render_to_response('Attore.html', { 'film': Film.objects.filter( attori=get_attore_id ), 'attor': get_attore_id }) 
```

**网址.py**

```
from django.conf.urls.defaults import *

urlpatterns = patterns('',    
    (r'^Film$', 'Database.views.film'),
    (r'^Attore/(\d+)/$', 'Database.views.film_attore'),
) 
```

***模板：***

**基础.html：**

```
<!DOCTYPE html>
<html>
<head>
  <title>{% block titolo %}Titolo{% endblock %}</title>
  <link href="../static/css/Default.css" media="screen" rel="stylesheet" type="text/css">
</head>
<body>
  {% block contenuto %}Contenuto{% endblock %}
</body>
</html> 
```

**电影.html：**

```
{% extends "Base.html" %}

{% block titolo %}Film{% endblock %}

{% block contenuto %}
  {% for dato in film %}
    {% for attore in dato.attori.all %}
      <a href="/Database/Attore/{{ attore.id }}">{{ attore.nome }} {{ attore.cognome }}</a>
    {% endfor %}
  {% endfor %}
{% endblock %} 
```

**Attore.html：**

```
{% extends "Base.html" %}

{% block titolo %}Attore{% endblock %}

{% block contenuto %}
  {% for dato in film %}
    {% for attore in dato.attori.all %}
      <h2>{{ attore.nome }} {{ attore.cognome }}</h2>
    {% endfor %}
  {% endfor %}
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:28:27.170

第一件事是你应该为你的 css 设置一个绝对路径，而不是相对路径，这就是为什么不加载的原因。

然后，对我来说，代码看起来就像它所告诉的那样。在`film_attore`视图中，您将电影列表和演员传递给模板，但在模板中您不使用`attori`变量，而是遍历该演员的所有电影，然后查找并打印每部电影中所有演员的列表。

# arrays - 从经典asp中的函数返回一个简单（但很大）数组的最有效方法是什么？

> ID：16131529
> 
> 赞同：0
> 
> 时间：2013-04-21T13:18:38.440
> 
> 标签：arrays, function, asp-classic

我正在使用一个返回数组的经典 asp 函数，如下所示：

```
 function myArray()
            dim tmpArray(2) 
            tmpArray(0) = "abc"
            tmpArray(1) = "xyz"
            tmpArray(2) = "bob"
            myArray = tmpArray
        end function 
```

我想知道像这样重建它并绕过 tmpArray 变量是否有任何好处？

```
 function myArray()
            myArray(0) = "abc"
            myArray(1) = "xyz"
            myArray(2) = "bob"
        end function 
```

我知道在像这样简单的事情上性能并不是什么大问题......但是在部署的代码中，我们可能会使用大量这些数组，每个数组都包含数百个项目。

* * *

**额外问题：**
在第二个示例中，我将如何使数组大小变暗还是必须是动态的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:33:26.247

在进行测试时（为了记录，我使用了 VBA），您的第二种方法产生了堆栈溢出错误，因为**myArray(0) = "abc"**只会递归调用**myArray()**函数。

所以我尝试了另一个测试。我没有第二个函数返回一个数组，而是设置了一个在更高范围内声明的数组，因此我不必传递任何数组。

我使用了 1,000 个元素数组，并调用了每个函数 10,000 次。第一个函数用了 8 秒，第二个函数用了 2 秒。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T03:24:06.103

由于我看不到您的其余代码的上下文，因此我不能 100% 确定我的建议，但会说出来，以防它给您提供想法。根据您的数据来自哪里，有各种内置函数可能会满足您的目的。如果你有一个像 "frank, sue, ted, john" 这样的字符串，那么： - 你有没有研究过内置的 Split() 函数？或者，如果您的数据在数据库表中，那么： - 您是否查看过内置的 GetRows() 函数？

# c# - 在面板中滚动多张图片

> ID：16131530
> 
> 赞同：0
> 
> 时间：2013-04-21T13:18:43.413
> 
> 标签：c#, .net, scroll

我有一个面板，我将图片框放在面板中。所有图片框都是正方形且大小相同。我把它们放在 3 列中。我想自动滚动它们（向上移动）。当前三张图片（第一行）消失时，它来到底部。

我使用计时器逐像素向上移动，如果第一行消失，我会更改所有图片框的位置。但是他们flickr，我尝试了一些方法，但没有任何效果。请给我一些想法。这是另一种方式，我使用了 FlowLayoutPanel，但同样的问题。

```
class PicturesPanel : Panel {
    private FlowLayoutPanel flowPanel;
    internal Timer timer;
    private List<BorderPictureBox> PicturesList;
    private int top;

    public ImageList Images {
        get;
        set;
    }

    public PicturesPanel() {
        this.SetStyle(ControlStyles.AllPaintingInWmPaint | ControlStyles.OptimizedDoubleBuffer | ControlStyles.UserPaint, true);
        //this.AutoScroll = true;
        PicturesList = new List<BorderPictureBox>();
    }

    private void PicturesPanel_Click(object sender, EventArgs e) {
        loadImages();
    }

    private void loadImages() {
        if (this.Images != null) {
            int count = this.Images.Images.Count;
            int estimateHeight = 60 * (count / 3) - 4;

            flowPanel = new FlowLayoutPanel();
            flowPanel.Top = 0;
            flowPanel.Left = 0;
            flowPanel.Width = 200;
            flowPanel.Height = estimateHeight + 50;
            flowPanel.FlowDirection = FlowDirection.LeftToRight;
            this.Controls.Add(flowPanel);

            for (int i = 0; i < count; i++) {
                BorderPictureBox newPic = new BorderPictureBox();
                newPic.Image = this.Images.Images[i];
                newPic.Width = 56;
                newPic.Height = 56;
                newPic.SizeMode = PictureBoxSizeMode.StretchImage;
                newPic.Top = 60 * (i / 3);
                newPic.Left = 60 * (i % 3);
                flowPanel.Controls.Add(newPic);
                PicturesList.Add(newPic);
            }

            if (timer == null) {
                if (estimateHeight > this.Height) {
                    timer = new Timer();
                    timer.Interval = 25;
                    timer.Tick += new EventHandler(timer_Tick);
                    autoscroll = true;
                    timer.Start();
                }
            }
        }
    }

    private void timer_Tick(object sender, EventArgs e) {
        //this.VerticalScroll.Value += 1;
        //if (PicturesList[0].Bottom <= -4) {
        //    PicturesList.Add(PicturesList[0]);
        //    PicturesList.Add(PicturesList[1]);
        //    PicturesList.Add(PicturesList[2]);
        //    PicturesList.RemoveAt(0);
        //    PicturesList.RemoveAt(0);
        //    PicturesList.RemoveAt(0);
        //    this.VerticalScroll.Value = 0;

        //    for (int i = 0; i < PicturesList.Count; ++i) {
        //        PicturesList[i].Top = 60 * (i / 3);
        //        PicturesList[i].Left = 60 * (i % 3);
        //    }

        //}
        flowPanel.Top -= 1;
        if (flowPanel.Top <= -60) {
            flowPanel.SuspendLayout();
            flowPanel.Controls.RemoveAt(0);
            flowPanel.Controls.RemoveAt(0);
            flowPanel.Controls.RemoveAt(0);
            flowPanel.Controls.Add(PicturesList[0]);
            flowPanel.Controls.Add(PicturesList[1]);
            flowPanel.Controls.Add(PicturesList[2]);
            PicturesList.Add(PicturesList[0]);
            PicturesList.Add(PicturesList[1]);
            PicturesList.Add(PicturesList[2]);
            PicturesList.RemoveAt(0);
            PicturesList.RemoveAt(0);
            PicturesList.RemoveAt(0);
            flowPanel.Top = 0;
            flowPanel.ResumeLayout();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:19:42.320

我不会移动 FlowLayoutPanel 中的 PictureBoxes 来获得这种效果，尝试改变 FlowLayoutPanel 的滚动条的值：

```
void timer_Tick(object sender, EventArgs e) {
  flowPanel.VerticalScroll.Value += 1;
  if (flowPanel.VerticalScroll.Value + flowPanel.VerticalScroll.LargeChange > 
                                       flowPanel.VerticalScroll.Maximum) {
    ((Timer)sender).Enabled = false;
  }
} 
```

# ruby-on-rails - How make faker gem create english sentences and paragraphs

> ID：16131531
> 
> 赞同：6
> 
> 时间：2013-04-21T13:18:51.193
> 
> 标签：ruby-on-rails, faker

I use following code in `lib/tasks/sample_data.rake` file to generate fake data to fill development database.

```
namespace :db do
  desc "Fill database with sample data"
  task populate: :environment do
    Faker::Config.locale = :en
    99.times do |n|
      title  = Faker::Lorem.words(2..10)
      body  = Faker::Lorem.paragraphs(2..8)
      Topic.create!(title: title,
                   body: body)
    end
  end
end 
```

The problem is the generated text for title looks like this in `index` page

```
--- - doloribus - numquam - placeat - delectus - et - vero
--- - nostrum - numquam - laudantium - voluptas - est - laborum
--- - perferendis - nemo - facilis - quis - eos - quia - sint 
```

There are unnecessary hiphens in the generated output, This also happens in the generated paragraphs. As shown below.

```
--- - Fuga explicabo et ea. Excepturi earum ut consequatur minima iure.  
Molestias id tempora alias quisquam animi earum. Eius libero minima ut.  
Repudiandae eum commodi. - Iure aliquam at maxime. Rerum ea non corrupti  
asperiores est. Debitis suscipit nihil quod ut eaque sint repellat.   
quae doloremque. - Voluptatem facere deleniti nisi libero. Molestiae 
magni dolores repudiandae in corporis. Ut enim illum optio et architecto. 
```

How do I prevent this behavior of adding unnecessary hyphens, and create clean looking English statements and paragraphs with faker gem.

Thanks.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-21T13:35:19.667

我不认为 Faker 方法接受范围作为参数。在 doc 中，它只接受数字。因此，我什至无法通过复制您的代码在控制台中重现您的问题。

也许您想生成随机长度的单词或段落？您可以使用`rand`它来生成它。像这样：

```
title = Faker::Lorem.words(number: rand(2..10))
body  = Faker::Lorem.paragraphs(sentence_count: rand(2..8)) 
```

### 更新

Faker 将创建**HASH**而不是纯字符串。

所以，对于你的标题，你最好使用`sentence`而不是`words`然后 chomp 最后一个`.`

```
title = Faker::Lorem.sentence(word_count: rand(2..10)).chomp('.')
# or
title = Faker::Lorem.words(number: rand(2..10)).join(' ') 
```

对于正文，加入段落`\n`或任何你喜欢的

```
body  = Faker::Lorem.paragraphs(sentence_count: rand(2..8)).join('\n') 
```

#### 更新 2

[在 2019 年的 Faker 2.0 中，位置关键字被弃用，取而代之的是关键字参数](https://github.com/faker-ruby/faker/pull/1698)

[Faker::Lorem 参考](https://github.com/faker-ruby/faker/blob/master/doc/default/lorem.md)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-06T16:31:36.520

这解决了您关于获取随机英语单词的第二个问题。

有一些 Faker 类确实会生成英语中的随机单词。

`Faker::Commerce.product_name`会产生一些幽默的结果，例如：

*   “很棒的混凝土椅子”
*   “神奇的塑料帽子”
*   《华丽的钢裤》

`Faker::Company.catch_phrase`还会生成随机的英语流行语，例如：

*   “多边中间集团”
*   《高级面向对象的图形界面》
*   “可编程关键任务分析仪”

我发现使用这些给测试带来了一点轻松。

这是来自[http://rubydoc.info/github/stympy/faker/master/Faker/](http://rubydoc.info/github/stympy/faker/master/Faker/)。

# android - 将菜单添加到 Android 应用程序

> ID：16131533
> 
> 赞同：0
> 
> 时间：2013-04-21T13:19:14.123
> 
> 标签：android, menu

我一直在尝试向我的 android 应用程序添加一个菜单，但它不起作用。当我单击“菜单”按钮时，应用程序停止工作。这是我的 options_menu.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

  <item 
    android:title="Profile"
    android:id="@+id/menu_profile"/>

  <item 
    android:title="About"
    android:id="@+id/menu_about"/>

</menu> 
```

这是我的 OptionsMenu.java 类：

```
package com.carpool.jad;

import android.app.ListActivity;
import android.view.Menu;
import android.view.MenuInflater;

public class OptionsMenu extends ListActivity{

@Override
public boolean onCreateOptionsMenu(android.view.Menu menu) {
    // TODO Auto-generated method stub
    super.onCreateOptionsMenu(menu);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.options_menu, menu);
    return true;
}

} 
```

这是我的错误日志：

```
04-21 13:22:09.389: D/skia(1365): --- decoder->decode returned false

04-21 13:22:09.389: D/AndroidRuntime(1365): Shutting down VM

04-21 13:22:09.401: W/dalvikvm(1365): threadid=1: thread exiting with uncaught exception (group=0x40a70930)

04-21 13:22:09.479: E/AndroidRuntime(1365): FATAL EXCEPTION: main

04-21 13:22:09.479: E/AndroidRuntime(1365): android.view.InflateException: Binary XML file line #17: Error inflating class com.android.internal.view.menu.ExpandedMenuView

04-21 13:22:09.479: E/AndroidRuntime(1365):     at android.view.LayoutInflater.createView(LayoutInflater.java:613)

04-21 13:22:09.479: E/AndroidRuntime(1365):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)

04-21 13:22:09.479: E/AndroidRuntime(1365):     at android.view.LayoutInflater.inflate(LayoutInflater.java:466)

04-21 13:22:09.479: E/AndroidRuntime(1365):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)

04-21 13:22:09.479: E/AndroidRuntime(1365):     at com.android.internal.view.menu.ListMenuPresenter.getMenuView(ListMenuPresenter.java:99)

04-21 13:22:09.479: E/AndroidRuntime(1365):     at com.android.internal.policy.impl.PhoneWindow$PanelFeatureState.getListMenuView(PhoneWindow.java:3417)

04-21 13:22:09.479: E/AndroidRuntime(1365):     at com.android.internal.policy.impl.PhoneWindow.initializePanelContent(PhoneWindow.java:1130)

04-21 13:22:09.479: E/AndroidRuntime(1365):     at com.android.internal.policy.impl.PhoneWindow.openPanel(PhoneWindow.java:578)

04-21 13:22:09.479: E/AndroidRuntime(1365):     at com.android.internal.policy.impl.PhoneWindow.onKeyUpPanel(PhoneWindow.java:847)

04-21 13:22:09.479: E/AndroidRuntime(1365):     at com.android.internal.policy.impl.PhoneWindow.onKeyUp(PhoneWindow.java:1520)

04-21 13:22:09.479: E/AndroidRuntime(1365):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1854)

04-21 13:22:09.479: E/AndroidRuntime(1365):     at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3701)

04-21 13:22:09.479: E/AndroidRuntime(1365):     at   android.view.ViewRootImpl.handleImeFinishedEvent(ViewRootImpl.java:3651) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-24T19:42:45.480

您是否使用父主题为“android:Theme.Material”的主题？尝试更改为“Theme.AppCompat”，即使您的主题位于 values-v21 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:50:03.373

根据本[指南](http://developer.android.com/guide/topics/ui/actionbar.html#ActionItems)`super.onCreateOptionsMenu(menu)`，当您覆盖该功能时无需调用。

尝试删除该行，看看它是否有效。

另外，请查看这篇文章，这可能是您的问题：[Android：什么可能导致选项菜单膨胀错误？](https://stackoverflow.com/questions/2898697/android-what-could-cause-an-options-menu-inflation-error)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:32:35.977

我创建了另一个项目并将我的所有代码从旧项目复制/粘贴到新项目，并且它工作正常。不知道错误可能是什么。谢谢你们的帮助。

# c# - 无法获得 Math.Abs 的值（-2147483648）

> ID：16131544
> 
> 赞同：1
> 
> 时间：2013-04-21T13:20:16.540
> 
> 标签：c#

这是我的代码。

```
string strTemp = "";
for (int i = input1; i <= input2; i++)
{
    strTemp = Math.Abs(i).ToString();
    //other stuff here
} 
```

当 input1 的值为 -2147483648 时，我得到错误

> 对二进制补码的最小值取反是无效的。

我有点明白这是由于溢出异常。但是我该如何克服呢？请有任何建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-21T13:21:24.070

`+2147483648`大于 a 的最大值`int`，即 2 ^(31) - 1。
相反，您可以使用 a `long`; 其最大值为 2 ^(63) - 1。

如果这对你来说还不够；使用`BigInteger`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-08T09:11:39.290

正如@SLaks 所说

> +2147483648 大于 int 的最大值

您可以使用`Int32.MaxValue`and来检查`Int32.MinValue`：

```
x = -2147483648
if(Int32.MaxValue <= x || Int32.MinValue >= x) {
    return x;
} 
```

# html - 更好的用户界面设计，方便预订

> ID：16131547
> 
> 赞同：-1
> 
> 时间：2013-04-21T13:20:29.593
> 
> 标签：html, css, user-interface, twitter-bootstrap, usability

我正在使用**[Twitter Bootstrap UI](http://twitter.github.io/bootstrap)**为我的应用程序开发屏幕。

我创建了预订/预约页面。

![在此处输入图像描述](https://i.stack.imgur.com/7B6zI.png)

此页面将供医院工作人员使用。他们想快速填充数据，因为他们通过电话从用户那里收集所有数据，同时它们同时填充。

> 最终用户觉得这个页面看起来对他们来说有些困难，他们希望从用户体验的角度来改进这个设计。

我对设计一无所知。用户还可能希望将来在同一页面中检查所选医生的可用日期和时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T14:49:58.887

you can start with putting together elements that are logically connected to each other.
i did a quick example:
![regroup elements for a better understanding of what does what](https://i.stack.imgur.com/Ohafr.jpg)

then you can also wrap every block in a thin light-gray border and give them a title like "General info", "Submission Date" or whatever will fit your needs.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T13:31:06.837

我可以看到一些有帮助的改进：

1.  将一些相关的元素组合在一起，以便对眼睛更友好。
2.  您可以使用一些不同的背景颜色来增强 UI。
3.  使用选项卡索引可以更快地从一个元素导航到另一个元素。
4.  您可以预先填写一些更常见的选择（工作人员会告诉您），因此他们不必在每种情况下都更改所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T14:22:02.707

如果您使用的是 twitter bootstarp，我假设您使用的是 span* 和 .row 对吗？

您可以为每一行提供一个边框底部和边距 20px/40。并尝试使其像 4 列，因此责任人和类别应该是 span6 和父行中的边框底部 + 边距。

在那之后，盒子对其中的四个使用 span3，并且类似地将边框和边距放在底部。

希望对您有所帮助。虽然“Antonis Grigoriadis”的回答是正确的，但我只是让你开始这样做:)

# vb6 - 确定目录结构占用的磁盘空间

> ID：16131556
> 
> 赞同：1
> 
> 时间：2013-04-21T13:21:24.473
> 
> 标签：vb6, directory, diskspace

我有一个包含数千个文件/目录的目录结构。现在，我想确定这个目录结构占用了多少磁盘空间。确定这一点的方法之一是通过 using`filelen`语句测量每个文件消耗的磁盘空间，最后添加它们。但是，我正在寻找一个更好的替代品。是否有任何 Windows API 或其他任何东西可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:01:17.107

VB.NET 有一些内置命令可以做到这一点，但 VB6 没有。在进行搜索时，我发现对可以执行此操作的 API 的模糊引用，但没有实际的 API 名称。

但是，即使您找到它，您所要做的只是要求 Windows 做的事情与您要避免的事情完全相同。那就是递归遍历每个文件并将每个文件大小相加。Windows 不保存此信息，因此每次都必须保存。

最好只创建自己的函数并在需要时调用它。

祝你好运

# ios - 一起滚动 2 个组件时 UIPickerView 崩溃

> ID：16131557
> 
> 赞同：4
> 
> 时间：2013-04-21T13:21:30.033
> 
> 标签：ios, objective-c, crash, uipickerview, nszombies

其实，我之前也问过同样的问题，但我还没有找到解决方法，所以我又来了。

我的情况：

我有一个`UIPickerView`带有2个相关组件的，第二个或右侧组件中的行数和内容随着当前选择的第一或左侧组件中的行而变化，这是一个非常常见且有用的功能`UIPickerView`。

现在，如果我使用 2 个拇指同时滚动两个组件，我的应用程序很快就会很容易崩溃，并显示以下信息：

```
*** Terminating app due to uncaught exception of class '_NSZombie_NSException'
libc++abi.dylib: terminate called throwing an exception 
```

具有讽刺意味的是，我无法调试它。

实际上，如果我在方法中添加断点`pickerView:didSelectRow:inComponent`，我什至不能同时快速滚动两个组件，因为每次我将手指放在屏幕上时它都会在断点处停止。

我只能猜测原因是当第一个组件被滚动时，第二个组件中的假定行数不断变化，但与此同时，它`UIPickerView`正在询问第二个组件的标题和编号，然后它崩溃了。

但是我还没有找到任何可以用来判断一个组件是否被滚动的方法。所以我找不到正确的时间来拒绝`pickerView`'s`delegate`和`dataSource`第二个组件的请求。

有没有人遇到过类似的情况？

谢谢你的帮助！我会很感激的！

* * *

在我的代码中，这个错误是关于 的`typePicker`，所以我删除了所有其他与 . 无关的代码`typePicker`。

在这里，`type`and是 Core Data 中的两个实体，以及一个名为reach from to`detailTypes`的一对多关系。`details``type``detailsTypes`

例如，如果类型是“国家”，`detailTypes`则将是“美国”、“法国”、“中国”等。

所以在 中`typePicker`，第 1 个或左边的组件显示所有类型实体，第 2 个或右边的组件`detailTypes`根据第 1 个组件中当前选择的类型显示相应的实体。

并且两个组件的第一行`typePicker`总是“None”，让用户不选择特定的类型，这就是代码中有很多“+1”的原因。

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
if (pickerView == self.typePicker)
        return 2;
    return 1;
}
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    NSUInteger majorTypeRow = [self.typePicker selectedRowInComponent:0] - 1;
    if (pickerView == self.typePicker) {
        if (component == 0)
            return [self.types count] + 1;
        else {
            if (majorTypeRow == -1) // no major type entities
                return 1;
            NSString *majorTypeName = [[self.types objectAtIndex:majorTypeRow] name];
            NSArray *detailType = [self.detailTypes objectForKey:majorTypeName];
            if (detailType) 
                return [detailType count] + 1;
            else {
                NSManagedObject *majorType = [self.types objectAtIndex:majorTypeRow];
                NSSet *minorTypes = [majorType valueForKey:@"details"];
                NSSortDescriptor *sd = [[NSSortDescriptor alloc] initWithKey:@"order" ascending:NO];
                NSArray *sortDescriptors = [NSArray arrayWithObjects:sd, nil];
                NSArray *array = [minorTypes sortedArrayUsingDescriptors:sortDescriptors];
                [self.detailTypes setObject:array forKey:majorTypeName];
                [sd release];
                return [array count] + 1;
        }
    }
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    NSUInteger majorTypeRow = [self.typePicker selectedRowInComponent:0] - 1;
    row--;
    if (pickerView == self.typePicker) {
        if (component == 0)
            [pickerView reloadComponent:1]; // I believe this is where the bug starts, but I can't find the exact line of code that causes the crash
        else {
            if (row == -1)
                self._detailType = nil;
            else {
                NSString *majorTypeName = [[self.types objectAtIndex:majorTypeRow] name];
                NSArray *dt = [self.detailTypes objectForKey:majorTypeName];
                if (dt)
                    self._detailType = [dt objectAtIndex:row];
            }
        }
    }
    NSIndexPath *path = [self.tableView indexPathForSelectedRow];
    [self.tableView reloadData];
    [self.tableView selectRowAtIndexPath:path animated:YES scrollPosition:UITableViewScrollPositionNone];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-28T07:02:53.873

崩溃是由于您的代表中的这条线

```
NSUInteger majorTypeRow = [self.typePicker selectedRowInComponent:0] - 1; 
```

正如其他人指出的那样，您需要保留两个单独的数组或对象，它们可以为各个组件提供数据源。

你有一个majorType 和detailType。`majorTypes`你可以有一个和的数组`selectedMajorType`。保留一个额外的 selectedMajorType 消除了使用的需要，`selectedRowInComponent:`并且不再使应用程序崩溃。

```
#pragma mark - UIPickerViewDataSource

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 2;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    NSInteger rows = 0;
    if (component) {
         rows = [self.selectedMajorType.minorTypes count];
    }else{
        rows = [self.majorTypes count];
    }
    return rows+1;
} 
```

UIPickerViewDelegate 实现

```
- (NSString *)pickerView:(UIPickerView *)pickerView
             titleForRow:(NSInteger)row
            forComponent:(NSInteger)component
{
    row--;
    NSString *title = @"None";
    if (component) {
        NSArray *minorTypes = [self.selectedMajorType.minorTypes allObjects];
        if (row >= 0 && row < [minorTypes count]) {
            MinorType *minorType = minorTypes[row];
            title = minorType.name;
        }
    }else{
        if(row>=0 && row < [self.majorTypes count]){
            MajorType *majorType = self.majorTypes[row];
            title =  majorType.name;
        }
    }
    return title;
}

- (void)pickerView:(UIPickerView *)pickerView
      didSelectRow:(NSInteger)row
       inComponent:(NSInteger)component
{
    row--;
    if (component==0) {
        if (row >= 0 && row < [self.majorTypes count]) {
             self.selectedMajorType = self.majorTypes[row];
        }else {
           self.selectedMajorType = nil;
        }

        [pickerView reloadComponent:1];
    }
} 
```

[演示源代码](https://dl.dropboxusercontent.com/u/35012982/Demo%20Projects/TestMultiPickerView_V2.0.zip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T21:58:03.727

好的，我想我理解了这个问题：

一起滚动两个组件的问题在于，由于您使用数据关系创建的依赖关系，您的 UIPickerView 数据源可能会发生变化。我认为您需要创建两个分别代表左右的数组，并根据您更改的组件重新填充！

可以通过在此处查看类似问题来找到解决方案！[滚动两个组件时，具有两个组件的 UIPickerView 崩溃](https://stackoverflow.com/questions/9601144/uipickerview-with-two-components-crashes-when-scrolling-both)

此外，关于检查您的 UIPickerView 是否正在滚动，您可以简单地设置一个计时器。这里有一个有用的链接：[确定 UIPickerWheel 是否正在滚动](https://stackoverflow.com/questions/5304839/determining-if-uipickerwheel-is-scrolling)！通过检查当前行是否匹配，您可以（在很短的时间间隔内）判断用户是否移动了轮子！

我希望这是清楚和有帮助的！

# java - 将 android 应用程序作为库包含在另一个应用程序中时，谷歌地图不起作用

> ID：16131559
> 
> 赞同：1
> 
> 时间：2013-04-21T13:21:59.897
> 
> 标签：java, android, maps

所以实际上正如标题所暗示的那样，我制作了一个 android 应用程序，其中包括谷歌地图服务，我得到了钥匙，一切都很好。现在我将我的应用程序作为一个库并在另一个应用程序中使用它，但是谷歌地图向我显示了一个带有 LogCat 警告的空白页面：

```
Failed to load map.  Could not contact Google servers. 
```

什么会导致这个问题？我应该在谷歌 API 访问中指定新包吗？还是其他原因会导致它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:33:07.703

首先查看本指南的步骤，并确保您已提交其中的所有步骤：

[谷歌地图 API V2](https://blog-emildesign.rhcloud.com/?p=435)

接下来，据我所知，如果您没有以正确的方式生成密钥，您没有在 API 控制台中正确注册它，或者您的清单文件中存在某种权限问题，则可能会出现此错误。

因此，请查看这篇文章以及如何生成和注册密钥：

[谷歌地图 API V2 密钥](https://blog-emildesign.rhcloud.com/?p=403)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T13:48:39.053

我认为您需要在 google api 控制台中设置实际应用程序的包名称，而不是库包。

# java - 用于异步客户端到客户端消息传递的库

> ID：16131562
> 
> 赞同：0
> 
> 时间：2013-04-21T13:22:12.193
> 
> 标签：java, jquery, spring, asynchronous

我目前正在开发一个在线游戏，两个玩家可以互相对战（比如谁想成为百万富翁？）。而且我想实现一个异步服务，以便这两个玩家可以互相发送答案（我不希望他们等待）但我不知道从哪里开始，这样的问题的最佳解决方案是什么？

我使用 Spring 作为后端，在前端使用纯 JSP 和 jQuery。所以经过一番研究后，我来到了[Atmosphere](https://github.com/Atmosphere/atmosphere)框架，这是我想要的吗？或者像[Socket.IO](http://socket.io/)这样的基于 JS 的解决方案也可以工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:30:44.147

我建议使用 Apache ActiveMQ [http://activemq.apache.org/](http://activemq.apache.org/)。这是 Maven 依赖项

```
 <dependency>
        <groupId>org.apache.activemq</groupId>
        <artifactId>activemq-all</artifactId>
        <version>5.6.0</version>
    </dependency> 
```

# python - Is KeyError the appropriate Exception?

> ID：16131564
> 
> 赞同：1
> 
> 时间：2013-04-21T13:22:33.603
> 
> 标签：python, exception

I'm creating an open source project on Github and I want to make sure I do everything I can to make it robust, stable and that its Pythonic. To this end, I have a question about what kind of exception I should use when I expect a key to exist in a dictionary and it is not included.

That is, the calling function would be something like:

```
def calling_func():
    my_dict = {
        'value_1': 1,
        'value_2': None,
        'value_3': '3',
    }

    foo(my_dict) 
```

My function `foo` expects the dictionary to contain the `key` (and corresponding `value`), `value_4`. Would it be appropriate to raise `KeyError` in the following case?

```
def foo(my_dict):
    expected_keys = ['value_1', 'value_2', 'value_3', 'value_4']

    for key in expected_keys:
        if key not in my_dict:
            raise KeyError 
```

It seems the traditional use for `KeyError` is the inverse of this usage.

Should I create my own exception type for this?

```
class MissingKeyError(Exception):
    pass 
```

Or something to this effect?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:24:45.543

`KeyError`是适当的例外。

如果可能，请使用 Python 异常，尤其是适用于第 3 方的 API。这节省了进口和学习曲线。

您可以简化代码：

```
if not my_dict.viewkeys() >= set(expected_keys):
    raise KeyError 
```

或简单地访问所有密钥：

```
for key in expected_keys:
    my_dict[key]  # test for presence early 
```

或者*只是不测试*并让使用密钥的代码引发异常。

# c++ - 从视频流中提取前景

> ID：16131567
> 
> 赞同：1
> 
> 时间：2013-04-21T13:22:40.633
> 
> 标签：c++, opencv, image-processing, background-subtraction

我正在开发一个视频处理项目，该项目将摄像头输入作为输入并具有静态背景。我不需要像opencv中的BackgroundSubtractorMOG那样的任何类型的动态背景生成。我正在尝试将前景对象绑定在边界框内。所以这就是我所做的

```
cv::absdiff(back_frame,matProcessed,temp);         //back_frame is the background matProcessed is the frame from CAMERA in grayscale
cv::threshold(temp,temp,20,255,THRESH_BINARY);

cv::findContours(temp,contours,CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE, Point(0, 0));
std::vector<Rect> boundRect( contours.size() );
std::vector< std::vector<Point> > contours_poly( contours.size() );

int j=0;
for(int i = 0; i < contours.size(); i++ )
{
           if(contourArea(contours[i])>100)
           {
               approxPolyDP( Mat(contours[i]), contours_poly[i], 10, true );
               boundRect[j] = boundingRect( Mat(contours_poly[i]) );
               j++;
           }

 }
 cv::rect r;
   for (int i = 0; i < boundRect.size(); i++)
    {
        r = boundRect[i];

        cv::rectangle(
            frame,
            cv::Point(r.x, r.y),
            cv::Point(r.x + r.width, r.y + r.height),
            CV_RGB(0,255,0)
        );
    } 
```

但问题是我没有正确获得前景。无论如何我可以改进前景生成并始终使用一些矩形边界框来绑定前景对象，而不管背景复杂性和其他因素如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:13:34.590

有各种简单和复杂的方法可以做到这一点。绝对推荐使用逐像素概率方法。您还可以在外观上使用诸如马尔可夫模型之类的东西来优化您的结果。请参阅[本文](http://www.cs.cmu.edu/~yaser/SheikhJavedKanade_ICCV_2009.pdf)，特别是*相关工作*部分和他们细化前景对象的最后一点。

# nhibernate - 无法移除子对象

> ID：16131570
> 
> 赞同：0
> 
> 时间：2013-04-21T13:23:09.640
> 
> 标签：nhibernate, collections, parent-child, one-to-many

我有从子集合中删除对象的问题。我有一个带有子对象集合的父类。

```
public class Document
{
    public Document()
    {
        Pages = new List<DocumentPage>();
    }

    public virtual Int64 Id { get; set; }
    public virtual IList<DocumentPage> Pages { get; set; }
}
public class DocumentPage
{
public virtual Int64 Id { get; set; }
public virtual Document Document { get; set; }
} 
```

以下是映射器……</p>

```
 <class name="Document">
    <id name="Id">
      <generator class="native"/>
    </id>

    <bag name="Pages" table="DocumentPage" inverse="true" lazy="true" 
         fetch="select"  cascade="all-delete-orphan">
      <key>
        <column name="DocumentId" not-null="true" />
      </key>
      <one-to-many class="DocumentPage" />
    </bag>

  </class>

  <class name="DocumentPage">
    <id name="Id">
      <generator class="native"/>
    </id>
    <many-to-one name="Document" class="Document" fetch="select">
      <column name="DocumentId" not-null="true" />
    </many-to-one>
  </class> 
```

我必须删除子对象。为此，我将其从子对象集合中删除并保存父对象。

问题是我无法从页面集合中删除该页面。 **`document.Pages.Remove(page)`返回 false**并且集合保持不变。

我想这是因为代理类（`DocumentPageProxy`）。一些额外的检查表明：

```
page.Equals(document.Pages[0]) returns **false** when
Equals(page, document.Pages[0]) returns **true**.
document.Pages.RemoveAt(0) works fine. 
```

我不知道这里出了什么问题以及我应该如何删除/删除子对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:27:06.947

您需要覆盖 Equals 和 GetHashCode 以便 Remove 能够根据其标识符值而不是引用相等来找到 DocumentPage。或者你可以这样做：

```
var pageToRemove = document.Pages.Single(p => p.ID == page.Id);
document.Pages.Remove(pageToRemove); 
```

# html - div 没有正确浮动 - html

> ID：16131575
> 
> 赞同：2
> 
> 时间：2013-04-21T13:23:29.307
> 
> 标签：html, css

如果有人能帮我解决这个问题，我将不胜感激。

所以，在我的页面中，我有两个部分，一个是向右浮动的，另一个是向左浮动的侧边栏......侧面，但是当我尝试在任何浏览器上运行它时，左 div 很好，但右 div 显示在左 div 下，我彻底搜索了这个但没有找到任何东西。

这是我的 CSS 和 HTML 页面：

主页 ：

```
 <div id="page">
        <div id="main_sidebar">

        <div class="main_top_sidebar">

        </div>

        <div class="main_body_sidebar">

            <p> SOME TEXT SOME TEXT SOME TEXT SOME TEXT SOME TEXT SOME TEXT SOME TEXT SOME TEXT          SOME TEXT </p>

        </div>

        <div class="main_bottom_sidebar"></div>

    </div>

    <div id="main">

        <div class="main_top">
            <h1> Home </h1>

        </div>

        <div class="main_body">

            <p> SOME TEXT SOME TEXT SOME TEXT SOME TEXT SOME TEXT SOME TEXT SOME TEXT SOME TEXT       SOME TEXT </p>

        </div>

        <div class="main_bottom"></div>

    </div>

    </div> 
```

CSS表：

```
html, body {
text-align: center;
}
p {text-align: left;}

body {
margin: 0;
padding: 0;
background: #C1C1C1;
background-image:url('background2.png');
text-align: left;
font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
font-size: 13px;
color: #F1F5F8;
}
*
{
 margin: 0 auto 0 auto;
 text-align:left;}

html, body {
text-align: center;
}
p {text-align: left;}

#header h1
{
padding-top: 14px;
display:block;
float:left;
line-height:20px;
margin-left:17px;
width:260px;
color:#FFDE00;
text-align:left;
font-size:17px;
font-weight:bold;
font-family:Arial, Helvetica, sans-serif;
float:left;

}

#header ul {
padding-left: 100px;
list-style-type: none;
height:21px;
text-align:center;
height:85px;
overflow:hidden;
}
#header ul li , #header ul li a, #header ul li a:visited{
    display:block;
    float:left;
margin: 0px;
text-align:center;
line-height:72px;
width:133px;
color:#FFFFFF;
font-size:20px;
font-weight:bold;
text-decoration:none;
}

#header ul li a:hover{
color:#CCCCCC;
}

#main 
{
margin-top:10px;
margin-bottom:10px;
}

#main .main_top
{
float: right;
height:85px;
width:921px;
background-image:url(main_top.png);
background-repeat:no-repeat;
}

#main .main_body
{

padding-left:0px;
float: right;
height:auto;
width:921px;
background-image:url(main_body.png);
background-repeat:repeat-y;
color:#000000;
padding-bottom:20px;

}

#main .main_bottom
{
float: right;
height:8px;
width:921px;
background-image:url(main_bottom.png);
background-repeat:no-repeat;
}

#main .main_top h1
{
font-size:24px;
line-height:85px;
color:#000000;
padding-left:25px;
background-position:right;
background-repeat:no-repeat;
margin-right:25px;
}

#main .main_body p
{
line-height:19px;
letter-spacing:1px;
padding-bottom:15px;
padding-left:20px;
padding-right:20px;
}

#main .main_body ul li 
{
line-height:19px;
letter-spacing:1px;
padding-bottom:15px;
padding-left:20px;
padding-right:20px;
}

#page
{
  margin: 0 auto 0 auto; 
      margin-top:25px;
  display: block; 
  height:auto;
  position: relative; 
  overflow: hidden; 
  width: 1151px;
}

#header
{
background-image:url(header.png);
border-radius:15px;
background-repeat:no-repeat;
width:1151px;
height:134px;
}

#float {

width:1151px;
border-radius:15px;
height:170px;
border-color:#FFDE00;
border-style: solid;
border-width:2px ;
background-color:#404040;
color:#ffffff; 

}

#float ul li {
font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
font-size:14px
}

#footer {
float: right;
display:block;
width: 1151px;
height:74px;
background: url(footer.png) no-repeat;
border-radius: 15px;
text-align:right;
font-size:9px;
line-height:75px;
clear:both;
}

#footer p{
font-size: 12px;
text-align:center;
padding-top: 17px;
}

#footer, #footer a, #footer a:visited{
color:#FFDE00;
}

#footer a:hover{
text-decoration:none;
color:#CCCCCC;
}

#main_sidebar 
{
margin-top:10px;
margin-bottom:10px;

}

#main_sidebar .main_body_sidebar
{

padding-left:0px;
float: left;
height:auto;
width:230px;
background-image:url(main_body_sidebar.png);
background-repeat:repeat-y;
color:#000000;
padding-bottom:20px;
clear: left;

}

#main_sidebar .main_bottom_sidebar
{
float: left;
height:8px;
    width:230px;
background-image:url(main_bottom_sidebar.png);
background-repeat:no-repeat;
clear: left;
}

#main_sidebar .main_top_sidebar
{
float: left;
    height:85px;
    width:230px;
background-image:url(main_top_sidebar.png);
background-repeat:no-repeat;
clear: left;
}

    #main_sidebar .main_top_sidebar h1
{
font-size:24px;
line-height:85px;
    color:#000000;
padding-left:25px;
background-position:left;
background-repeat:no-repeat;
margin-right:25px;
}

#main_sidebar .main_body_sidebar p
{

line-height:19px;
letter-spacing:1px;
padding-bottom:15px;
padding-left:20px;
padding-right:20px;
}

#main_sidebar .main_body_sidebar ul li 
{
line-height:19px;
letter-spacing:1px;
padding-bottom:15px;
padding-left:20px;
padding-right:20px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:39:14.710

我想指出两点。

1.  将您的浮动放入您的标记中，因为回顾您的 CSS 以找出浮动/未浮动的内容很烦人，并且可能会导致意想不到的后果
2.  确保添加一个 clear 元素作为任何浮动元素的最后一个兄弟元素，这将解决 IE 中的浮动错误

例子：

CSS：

```
.fl {
  float: left;
}

.fr {
  float: right;
}

.clear {
  clear: both;
} 
```

HTML

```
<div class="fl">
  <!-- Contents of first floated item here -->
<div>
<div class="fl">
  <!-- Contents of second floated item here -->
<div>
<div class="clear">
  <!-- Leave this empty -->
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T13:35:28.280

添加`float:left;`到`#main_sidebar`其他像任何块元素一样，它将采用任何可用的宽度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T13:36:54.797

```
#main {
    float :right;
    width: 70%;
}

#main_sidebar {
    float: left;
    width: 30%;
} 
```

由于未定义的列宽或未考虑边距/填充/边框，您遇到的情况称为浮动下降。上面的代码将处理列布局，然后确保不要在两列中添加任何左右边距、填充或边框——而是将其添加到里面的元素中。

# google-analytics - 使用 Google Analytics 和 OOCharts 过滤表中的记录

> ID：16131577
> 
> 赞同：0
> 
> 时间：2013-04-21T13:23:35.573
> 
> 标签：google-analytics

我目前正在尝试使用名为[OOCharts](http://oocharts.org/)的插件将谷歌分析数据显示到我的网站上。它工作正常，只是我无法过滤表中填充的记录。我了解到我需要在 OO.Query 对象上使用 .setFilter() 函数，但我不知道如何将过滤后的查询传递给 OO.Table 对象。请输入是否有人对此有所了解，这是我到目前为止的代码：

```
oo.setOOId("<My OOID here>");
var from = "01/01/2011";

var today = new Date();

var to = today;

oo.load(doCharts());
jQuery(document).ready(function () {

});

function doCharts() {
    var q = new oo.Query("<My Profile ID here>", new Date("1/7/2013"), new Date("3/30/2013"));
    q.addDimension('ga:pageTitle');
    q.setFilter('ga:pageTitle==<my Filter string>');

    var t = new oo.Table("<My Profile ID here>", new Date(from), new Date(to));

    t.addMetric("ga:pageviews", "Page views");
    t.addDimension(q); //this doesn't seem right :/
    t.setOption('page', 'enable');
    t.setOption('pageSize', '20');
    t.draw('table1');

    q.execute(function (data) {
        alert(data);
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:52:45.357

您实际上可以像这样在提供表格的查询上设置过滤器：

```
var t = new oo.Table("<My Profile ID here>", new Date(from), new Date(to));

t.query.setFilter('ga:pageTitle==<my Filter string>'); 

//Go on to draw and add other params 
```

希望这可以帮助！

**编辑**

只是为了澄清，您甚至不需要顶部的查询对象。该表实际上是在构造时创建的，因此您可以在表的查询中使用 setFilter 方法。所有 OOcharts 对象下都有查询，并且可以在绘制之前进行操作，如上图所示：*t.query.someMethod()*

# php - 致命错误：未捕获的异常 'QueryPath\ParseException' 命名空间错误：

> ID：16131580
> 
> 赞同：2
> 
> 时间：2013-04-21T13:24:33.340
> 
> 标签：php, dom, querypath

我正在使用 QueryPath 来解析 Chimpmail 的电子邮件模板（[https://github.com/mailchimp/Email-Blueprints](https://github.com/mailchimp/Email-Blueprints)），但是当我尝试附加一个带有“mc:repeatable”属性的 tr 时，我收到了这个错误：

```
Fatal error: Uncaught exception 'QueryPath\ParseException' with message 'DOMDocumentFragment::appendXML(): namespace error : Namespace prefix mc for repeatable on tr is not defined 
```

有没有办法告诉 QueryPath 不要尝试解析命名空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T18:22:16.047

我设法通过添加所需的命名空间声明来解决这个问题，然后将其删除：

```
$el->append('<tr mc:repeatable="" xmlns:mc=http://doesntmatter.com"> [...] </tr>');
$el->removeAttr('xmlns:mc'); 
```

# xml - XPath 函数：包含错误（如果我使用它）！

> ID：16131582
> 
> 赞同：2
> 
> 时间：2013-04-21T13:24:41.787
> 
> 标签：xml, function, xpath

xml：</p>

```
<Root>
   <MyNode>
         <Name>东方a96</Name>
         <Status>0</Status>
   </MyNode>
   <MyNode>
          <Name>西方b92</Name>
          <Status>0</Status>
    </MyNode>
    <MyNode>
          <Name>东方a88</Name>
          <Status>0</Status>
     </MyNode>
</Root> 
```

代码：</p>

```
#import <msxml3.dll> named_guids
using namespace MSXML2;

......
strPath = CString(_T("/Root/MyNode[contains(Name,'a')]"));
pNodeList = m_pXmlQueryDoc->selectNodes((_bstr_t)strPath); 
...... 
```

BTW：如果我不使用xpath函数，没有错误。我已经测试了一些xpth函数，只有字符串函数可以使用，在selectNodes行所有错误。

我的系统：win8 x64 IDE：vs2012的VC MFC（Unicode项目）</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:52:00.430

**您需要将此添加到您的代码中**：

```
setProperty(BSTR strProp, VARIANT strVal); 
```

**其中**：

```
strProp 
    A BSTR string whose value is "SelectionLanguage".
strVal 
    A VARIANT string, whose value is  "XPath". 
```

如果未指定，则默认为“XSLPattern”——这意味着根本没有打开 XPath。

有关更多信息，请阅读以下内容：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms754679(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms754679(v=vs.85).aspx)

# ios - iOS 线程安全——在线程切换前完成一段代码

> ID：16131591
> 
> 赞同：1
> 
> 时间：2013-04-21T13:26:04.520
> 
> 标签：ios, objective-c, nsthread, synchronized

我正在寻找一种方法来确保某些代码行总是一起执行（在系统可能切换线程之前）。

据我所知，@synchronized 对此不起作用，因为它只会阻止另一个线程进入这个特定的块。在我的示例中，我有不同的代码部分相互影响，我想确保它们中的每一个都阻止另一个。

如何做到这一点？

编辑：一个用例可能是我正在播放一个 MIDI 文件。事件会自动在高优先级线程上发出。在处理单个事件时，玩家可能会被用户阻止。我想确保一个音符得到完全处理，或者播放器之前停止并且音符不会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:59:11.177

无法**确保**您的代码不会被操作系统抢占。您有两种选择可以限制发生这种情况的可能性：

1.  在高优先级线程上运行您的代码。`dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH);`将返回这样的队列。此队列上的代码将在任何其他较低优先级队列上的代码之前运行。尽管可能性较小，但您仍然可能会被抢占。

2.  使用锁、信号量、@synchrosized 或 @Rob 建议的专用串行调度队列来序列化对关键代码部分的访问。通过这样做，在另一个线程完成之前，没有其他线程能够运行那段代码。如果使用正确，这将保证代码段不会被两个线程同时执行。

也许你可以告诉我们更多关于你的问题？也许有一些代码示例？

# javascript - DataList 和 Enter 键事件

> ID：16131592
> 
> 赞同：9
> 
> 时间：2013-04-21T13:26:24.130
> 
> 标签：javascript, html, html-datalist

我有一个触发键事件的输入文本字段。输入时，我使用输入值处理一些特定代码。一切都很好。

**哈姆勒：**

```
%input#myField{:type => "text"} 
```

**JavaScript：**

```
my_field = document.getElementById('myField');

my_field.addEventListener("keypress", function (event) {
    if (event.keyCode == 13) {
        event.preventDefault();

        if (tag_field.value.length != 0) {
            console.log(my_field.value);
            // Run my specific process with my_field.value 
            my_field.value = '';
        }
    }
}, false); 
```

但现在我想在这个输入上添加数据列表。

**哈姆勒：**

```
%input#myField{:list => "htmlList", :type => "text"}
%datalist#htmlList
    %option{:value => "toto"} toto
    %option{:value => "foo"} foo 
```

问题是当我在 datalist 上导航以选择一个项目时，我按了 enter 键。在输入键上，我的侦听器被调用并使用输入的初始值处理我的代码。
在这一步，该字段的值为空。之后，该值将替换为在数据列表中选择的值。

所以我的问题是：

*   有没有办法改变数据列表的行为，用数据列表选择的值替换输入值而不按回车键？（禁用数据列表的输入键）

*   有没有办法检测数据列表何时处于活动状态（或可见）以处理我的 EventListener 中的不同行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T11:49:11.473

`Keypress`事件将在您按下键后但在数据注册到字段之前触发。 `Keyup`在您按下键但数据注册到字段后将触发事件

**HTML：**

```
<input list="browsers" id="myField"/>
<datalist id="browsers">
  <option value="Chrome">
  <option value="Firefox">
  <option value="Internet Explorer">
  <option value="Opera">
  <option value="Safari">
</datalist> 
```

**JS：**

```
var my_field = document.getElementById('myField');

      my_field.addEventListener("keyup", function (event) {
          if (event.keyCode == 13) {
              event.preventDefault();

              if (my_field.value.length != 0) {
                  console.log(my_field.value);
                  // Run my specific process with my_field.value 
                  my_field.value = '';
              }
          }
      }, false); 
```

[http://jsfiddle.net/5p6FZ/](http://jsfiddle.net/5p6FZ/)

# c# - 为什么 Sqrt(-4) 是 NaN 而 Sqrt(1/-4)=0？

> ID：16131594
> 
> 赞同：2
> 
> 时间：2013-04-21T13:26:31.763
> 
> 标签：c#, math

这给了我0：

```
int B=-4;
double A = Math.Sqrt(1/B); 
```

但是这个 NaN

```
double A = Math.Sqrt(-4); 
```

第一次计算怎么可能不会失败或至少不返回 NaN 以及存在负数的平方根

编辑：感谢您的回答。我将添加这个：

```
 int B=0;
 double A = 1/Math.Sqrt(B); 
```

这怎么不是零分例外？！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T13:28:13.373

这里

```
int B=-4;
double A = Math.Sqrt(1/B); 
```

是相同的

```
double A = Math.Sqrt(0); 
```

因为如果你将一个整数除以一个整数，你会得到一个整数

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T13:27:49.583

您的第一个代码相当于：

```
int B = -4;
int C = 1 / B;
double A = Math.Sqrt(C); 
```

现在这样做：

```
Console.WriteLine(C); 
```

# iphone - AngularJs 原始模板在被替换之前在 IOS 上简要显示

> ID：16131595
> 
> 赞同：0
> 
> 时间：2013-04-21T13:26:51.587
> 
> 标签：iphone, performance, cordova, angularjs

我有一个基于 angularJs 的移动网站，在普通机器上看起来不错。当我把它带到IOS时。我注意到原始模板在文本被 angularJs 替换之前简要显示。

即在我看到它被替换之前，我已经短暂地显示了 {{TitleText}}。在iphone上似乎比在ipad上更明显，我猜从机器的性能来看。在逻辑繁重的页面上也更加明显..

我的问题是有没有办法防止原始模板在较慢的浏览器上显示？也许是一个内置的加载屏幕来隐藏细节，直到页面加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:32:00.250

使用 ng-bind 的另一种替代方法是[ng-cloak](http://docs.angularjs.org/api/ng.directive%3angCloak)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T14:57:40.827

尝试使用[`ng-bind`](http://docs.angularjs.org/api/ng.directive%3angBind)

```
<h1 ng-bind="TitleText"></h1> 
```

在较慢的浏览器中，元素将显示为空，直到 angular 完成加载

编辑：可以使用占位符文本代替空元素。

```
<h1 ng-bind="TitleText">Loading Title...</h1> 
```

“正在加载标题...”将替换为`TitleText`angular 完成加载后的值。

# python - Pyside client and server

> ID：16131596
> 
> 赞同：2
> 
> 时间：2013-04-21T13:27:11.557
> 
> 标签：python, networking, pyside, raspberry-pi

I just start learning python to work with raspberry, my ultimate goal is to make a client / server application by creating a p2p network between raspberry. I chose to use the library asyncore to make client and server and initially pygame for graphics, now I'm trying to use PySide but I have a problem.

How can I integrate the asyncore.loop() into the main loop of pyside?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:49:43.327

Have you tried this?

```
class ClientThread(threading.Thread):

# Start the thread for the socket
def __init__(self, server, port, user, gui):
    threading.Thread.__init__(self)
    self.client = ClientConnection(server, int(port), user, gui)

# Run the asyncore loop
def run(self):
    try:
        asyncore.loop()
    except:
        return 0 
```

Maybe it can be usefull for you this example: [https://github.com/absolution/Month-2--Chat-Client-/blob/master/ClientGUI.py](https://github.com/absolution/Month-2--Chat-Client-/blob/master/ClientGUI.py)

# ms-access - Running named data macros from a linked table

> ID：16131597
> 
> 赞同：0
> 
> 时间：2013-04-21T13:27:15.680
> 
> 标签：ms-access

I recently succesfully split an access database. Everything seems to be functioning correctly apart from calling named data macros from a linked table. When attempting to call it through any front-end interface I get:

```
The data macro <linked table>.<macro name> could not be found. 
```

I am calling these named data macros through a button on a (front-end) form that uses its own macro to run the "RunDataMacro" command.

Before the database was split, selecting "RunDataMacro" provided me with a drop down list of all the named data macros currently attached to my tables. Now if I try it (with all my tables linked instead of being local) the drop down list is empty.

I have struggled to find similar problems online which leads me to believe it may be due to a small mistake, but I can't be sure. Nothing I have read leads me to believe that named data macros shouldn't work in this case.

Any idea on where I might be going wrong would be much appreciated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:43:44.820

链接表。链接表不支持数据宏；但是，您可以为典型的前端/后端应用程序在后端 ACCDB 数据库上关联逻辑。

[资源](http://blogs.office.com/b/microsoft-access/archive/2009/08/13/access-2010-data-macros-similar-to-triggers.aspx)

就个人而言，我无法忍受宏。我发现它们太局限了，调试起来很痛苦，而且你必须到处寻找各种宏。我意识到它的界面使它易于构建，但我建议学习 VBA（Visual Basic for Applications）。您会在网络上找到大量示例来帮助您解决几乎所有问题。另外，您会在这里找到更多我们来帮助解决您在编写 VBA 时可能遇到的未来问题。

祝你好运

# ckeditor - CKEditor：插件是否支持子菜单？

> ID：16131600
> 
> 赞同：0
> 
> 时间：2013-04-21T13:27:20.783
> 
> 标签：ckeditor

ckeditor插件中是否可以有子菜单？IE

![在此处输入图像描述](https://i.stack.imgur.com/3X30G.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T08:28:40.850

是的。支持子菜单（菜单组）。有一个如何定义它们的[示例。](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/tabletools/plugin.js#L807-L961)如果您`tabletools`在编辑器中加载了插件，则可以通过右键单击某个表格单元格来观察它。

![在此处输入图像描述](https://i.stack.imgur.com/bjxKi.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-18T09:23:46.503

此代码段必须添加父菜单项并从服务器获取子菜单项并将其添加到父菜单下。

```
var myMenu{
    openEditor: function(sender) {
        sender.ckeditor(function(element) {
        }, {
            on: {
                instanceReady: function(c) {
                    myMenu.setupParameterMenu(c.editor);
                }
            }
        });
    },
    setupParameterMenu: function(ceditor) {
        ceditor.addMenuGroup('Parameters');

        var subItems = {};

        var parentMenu = {};

        parentMenu.label = "Dynamic Parameters";
        parentMenu.group = 'Parameters';
        parentMenu.order = 1;
        parentMenu.getItems = function() {
            return subItems;
        };

        ceditor.addMenuItem("Dynamic Parameters", parentMenu);

        ceditor.contextMenu.addListener(function(element, selection) {
            return {"Dynamic Parameters": CKEDITOR.TRISTATE_OFF};
        });

        $.getJSON("/JSON/Parameters", function(json) {
            for (var i = 0; i < json.length; i++) {
                var subMenu = myMenu.subMenuItem(json[i], ceditor);

                for (var key in subMenu) {
                    subItems[key] = subMenu[key];
                }
            }
        });
    },
    subMenuItem: function(param, ceditor) {
        ceditor.addCommand(param, {
            exec: function(editor)
            {
                var element = CKEDITOR.dom.element.createFromHtml('<span contenteditable="false">' + param + '</span>');
                editor.insertElement(element);
            }
        });

        var zet = {};

        zet.label = param;
        zet.command = param;
        zet.group = 'Parameters';
        zet.order = i + 1;

        ceditor.addMenuItem("" + param, zet);

        var n = {};

        n[param] = CKEDITOR.TRISTATE_OFF;

        return n;
    }
  } 
```

# javascript - jqgrid 虚拟滚动不起作用

> ID：16131601
> 
> 赞同：1
> 
> 时间：2013-04-21T13:27:21.320
> 
> 标签：javascript, jquery, jqgrid

祝你有美好的一天。我试图在某个系统中嵌入一个 jqGrid 表，但遇到了一个错误，这阻止了我更进一步。我试图找到一个有类似问题的帖子，但没有成功。如果有帖子可以解决这个问题 - 请让我参考。

问题 - 在显示的最后一行下方滚动时没有触发事件。

请看一下。

```
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <base href="XXXX"/>
    <title>Table</title>

</head>
<body>
    <div id="outside">
        <div id="header">
        </div><!-- end of header -->

        <div id="topright">
            <h3>Main menu</h3>

        </div><!-- end of topright -->

        <div id="break"></div>

        <div id="left">
            <div id="nav">
                <h3>Navigation</h3>
                <ul>
                    <li><a href="/">Home</a></li>
                                            <li>
                        <a href="sitetrack"><strong>Hunting</strong></a>
                    </li>

                                            <li><a href="/players">Players</a></li>

                                            <li><a href="/status">Status</a></li>

                                            <li><a href="management">Management</a></li>

                                            <li><a href="/tools">Tools</a> <strong style="color: red; font-weight bold">NEW!</strong></li>

                    <li><a href="/logout">Log out</a></li> 
                </ul>
                <h3>Information</h3>
                                    <p>You are logged in as <strong></strong></p>
                <p style="font-size: 7pt">Access privileges:
                    <ul>
                        <li style="font-size: 6pt">system_administrator</li>
                    </ul>
                </p>

            </div><!-- end of nav -->
        </div><!-- end of left -->

        <div id="main">
                <link rel="stylesheet" href="bo_admin/libs/jquery-ui/themes/base/jquery-ui.css">
<link rel="stylesheet" href="bo_admin/libs/jQGrid/css/ui.jqgrid.css">
<link rel="stylesheet" href="bo_admin/css/menu.css">

<style>
    .ui-priority-secondary {
        background: none repeat scroll 0 0 gainsboro;
    }
</style>

<script src="bo_admin/libs/jquery/jquery-1.9.1.js"></script>
<script src="bo_admin/libs/jQGrid/js/i18n/grid.locale-en.js"></script>
<script src="bo_admin/libs/jQGrid/js/jquery.jqGrid.js"></script>

<script type="text/javascript">

(function ($) {

    $(function () {
        initGrid();
    });

function initGrid() {
    var options = {

        mtype:"GET",
        url: "XXXX/inbotablefeed?reportName=v_BO_big_ret",
        datatype: "json",
        height: "350",

        colNames: ['X', 'X', 'X',...,'X'],
        colModel: [{}, {}, {}],

        caption: "Bo Admin",
        altRows: false,
        width:1500,
        autowidth: false,
        scroll:true,
        prmNames: { npage: 'npage' },
        pager: $('#pager'),
        sortname: 'invdata',
        rownumbers: true,
        forceFit: false,

        shrinkToFit: false,
        viewrecords: true
    };

    $("#grid")
        .jqGrid(options)

        .navGrid(
            '#pager', 
            {
                edit: false,
                add: false,
                del: false
            },
            {}, 
            {}, 
            {}, 
            {
                multipleSearch:true, 
                multipleGroup:true
            }
        )

        .filterToolbar({
            stringResult: true,
            searchOnEnter: true
        });
    }

})(jQuery);

</script>
    <div style="position:fixed;">
           <ul id="menu">
            <li>
                <a href="/botable">Users</a>
                <ul>
                    <li><a href="/botable?reportName=v_BO_big_ret">Big Retention</a></li>
                    <li><a href="/botable?reportName=v_BO_user_list">User list</a></li>
                </ul>
            </li>
            <li><a href="/botable">XXXX</a></li>
            <li><a href="/botable">XXXXX</a></li>
            <li><a href="/botable">XXXX</a></li>
            <li><a href="/botable">XXX</a></li>
        </ul>
    </div>
            <div style="position:absolute; top: 120px;">
            <table id="grid"></table>
            <div id="pager"></div>
    </div>

        </div><!-- end of main -->

        <div id="bottombreak"></div>

        <div id="footer">
            (C) XXXXXX
        </div><!-- end of footer -->

    </div><!-- end of outside --> 
```

# asp.net - ASP.NET 从数据库中读取数据

> ID：16131602
> 
> 赞同：3
> 
> 时间：2013-04-21T13:27:32.420
> 
> 标签：asp.net, sql-server

那里的新问题。在从数据库中读取数据并且记录用完时，它只是说“当没有数据存在时尝试读取无效”，所以问题是如何防止这种情况发生？

这是我的代码：

```
{
    Label3.Text = Request.QueryString["Username"];

}

SqlConnection con = new SqlConnection("Data Source=JEVGENIJ-PC;Initial Catalog=ViaFitness;Integrated Security=True");
static SqlDataReader dr;
SqlCommand cmd;

protected void Button1_Click(object sender, EventArgs e)
{

    con.Open();

    SqlCommand cmd = new SqlCommand("select * from Summary where UserName='"+Label3.Text+ "'", con);

    dr = cmd.ExecuteReader();
    dr.Read();
    Label3.Text = dr[2].ToString();
    Label1.Text = dr[1].ToString();
    Label2.Text = dr[0].ToString();

}
 protected void Button2_Click(object sender, EventArgs e)
{
    dr.Read();
    Label3.Text = dr[2].ToString();
    Label1.Text = dr[1].ToString();
    Label2.Text = dr[0].ToString();
    con.Close();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:30:44.370

在每次获取之前调用 dr.read。检查它是否为真，这意味着数据存在

MSDN [SqlDataReader.Read](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.read.aspx)方法 - 将 SqlDataReader 推进到下一条记录。

```
SqlDataReader reader = command.ExecuteReader();

// Call Read before accessing data. 
while (reader.Read())
{
        ReadSingleRow((IDataRecord)reader);
}

// Call Close when done reading.
reader.Close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T13:31:00.563

您应该确保您的阅读器中有数据：

```
protected void Button1_Click(object sender, EventArgs e)
{

    con.Open();

    SqlCommand cmd = new SqlCommand("select * from Summary where UserName='"+Label3.Text+ "'", con);

    dr = cmd.ExecuteReader();
    if (dr.Read())
    {
        Label3.Text = dr[2].ToString();
        Label1.Text = dr[1].ToString();
        Label2.Text = dr[0].ToString();
    }

}
 protected void Button2_Click(object sender, EventArgs e)
{
    if (dr.Read())
    {
        Label3.Text = dr[2].ToString();
        Label1.Text = dr[1].ToString();
        Label2.Text = dr[0].ToString();
    }
    con.Close();
} 
```

查看 MSDN 页面了解更多信息：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.read.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.read.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T13:32:15.283

Datareader Read() 方法返回布尔值。如果它返回true，它成功读取下一条记录，如果它返回false - 它不是读取记录，因为没有更多记录。所以你应该测试 Read 方法的结果，然后尝试访问它的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T13:32:21.623

`Read()`跳转到下一条记录。没有什么是你不能访问的。只为一张唱片试试这个

```
If(dr.Read()) {
    Label3.Text = dr[2].ToString();
    Label1.Text = dr[1].ToString();
    Label2.Text = dr[0].ToString();
} 
```

或者这对所有人

```
While(dr.Read())) {
    ' do something
} 
```

# java - 坠落的物体，卡在使用定时器

> ID：16131604
> 
> 赞同：0
> 
> 时间：2013-04-21T13:27:36.543
> 
> 标签：java, swing, physics

我正在尝试以初始水平速度模拟坠落的物体。我知道如何让它水平移动（无加速度），但由于方程 y = gt^2/2 + vt + y0，我很难让它垂直移动。由于二次方程，我遇到了问题。

我试图做的是做一个时间变量，每次由 SwingTimer 执行动作时，它就会增加一个。所以我实际上会有一个时间变量。但我认为这不是最好的方法吗？

有人可以将我推向正确的方向吗？

您可以在下面找到我已经编写的代码：

```
 public class Simulation extends JPanel implements ActionListener
    {
    Timer timer = new Timer(5,this);;
    private int Xpos=0, Ypos=0, velX, velY;
    private int Px,Py;

    JButton dropknop;
    private boolean drop = false;

    public Simulation()
    {
        this.setBackground(Color.white);
        velX = 2;
        velY = 2;

        dropknop = new JButton("DROP");
        dropknop.addActionListener(this);
        this.add(dropknop);
    }
    public int getXpos() {
        return Xpos;
    }

    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.drawRect(Xpos, 0, 20, 20);

        if(drop)
        {
            g.fillRect(Px, Py, 5, 5);
        }
    }

    public void actionPerformed(ActionEvent ae) 
    {
        if(ae.getSource() == dropknop)
        {
            Px = getXpos();
            this.drop = true;
        }
        if(Xpos<0 || Xpos>986)
        {
            velX = -velX;
        }
        if(Ypos<0 || Ypos>708)
        {
            velY = - velY;
        }

        if(drop)
        {
            Px += velY;
            Py += velX;
        }

        Ypos += velY;
        Xpos += velX;
        repaint();
    }
} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:49:44.210

Gravity can be implemented by simply subtracting (assuming that the positive Y direction is up) a constant (the acceleration due to gravity) from the Y velocity in each frame.

The formula `y = gt^2/2 + vt + y0` is for calculating the position after a specified time, but you're simulating it for every frame, so you need an incremental method:

```
velY = velY - gravity; 
```

This yields an approximation of `y = gt^2/2 + vt + y0` . How much it diverges depends on the time step. The reason for the difference is that this does not simulate the continuous acceleration between steps. (In theory, the result would be the same if the time step was infinitely small).

One way to make it more accurate (used by at least some physics engines) is to calculate multiple steps of this per frame (i.e. do a few iterations of the physics before updating the display).

For a scientifically accurate simulation, if no other forces are acting on the body, the method you suggest in the post is the most accurate.

* * *

In your `actionPerformed` method, you should probably be checking that the action is the timer event, before updating the positions (so that it doesn't move faster if another event occurs).

# ocaml - Ocaml is the element in the list of lists

> ID：16131605
> 
> 赞同：1
> 
> 时间：2013-04-21T13:27:44.053
> 
> 标签：ocaml

I have created a list of lists, for example:

```
list1 = [[1; 2]; [3; 4]] 
```

I'm trying to create a function "is_element", which would return true if intiger is in the list, and false otherwise.

How should it work:

```
is_element list1 4;;
- : bool = true 
```

What I tried:

```
let rec is_element x = function
[[]] -> false
| [(a:int)::l] -> (a:int) == x || is_element x [l];; 
```

I do get a warning and this function doesn't seem to work.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T14:00:06.193

您可以使用[List.mem](http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html#VALmem)来检查元素是否是列表的一部分，并且可以使用 [List.exists](http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html#VALexists)来检查列表中的任何元素是否满足谓词。结合这两者，您可以检查列表列表是否包含您的元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-21T13:56:37.037

```
let rec is_element x lst = 
let rec aux y = function
  [] -> false
  | a::l -> a==y || aux y l
in
match lst with
  [] -> false
  | a::l -> aux x a || is_element x l;; 
```

您可以使用辅助函数来检查一个元素是否包含在列表中，然后将此函数应用于列表列表中的元素。然后你应该调用这个函数

```
is_element 4 list1;; 
```

或反转参数的顺序（x 和 lst）。

# stream - How to create streamable audio file with ffmpeg?

> ID：16131616
> 
> 赞同：5
> 
> 时间：2013-04-21T13:28:47.860
> 
> 标签：stream, ffmpeg, audio-streaming, mp4

I am trying to write streamable (fragmented?) mp4 files with FFMpeg. But the default of the FFMpeg bahavior of the `-f mp4` format is not this one.

Take for example this [AAC-LC MP4 test file](http://download.wavetlan.com/SVV/Media/HTTP/AAC/MediaCoder/MediaCoder_test2_AAC-LC_v4_Mono_ABR_192kbps_8000Hz.m4a) save it as `aac_lc_in.m4a` and run the `ffmpeg` command:

```
ffmpeg -y -i aac_lc_in.m4a -strict -2 -codec copy -f mp4 aac_lc_out.m4a 
```

The result is a non-streamable file (put it on a server and try to load it in your browser. It only starts after it is completely downloaded). This does not happen with the original file that can be started before the download completes.

I also tried using the `mp4` format parameters:

```
-movflags frag_keyframe+empty_moov
-movflags faststart+frag_keyframe
-movflags faststart+frag_keyframe+empty_moov
-movflags faststart+rtphint+frag_keyframe
-movflags rtphint+frag_keyframe
-movflags rtphint+frag_keyframe -rtpflags latm 
```

but nothing helped. Even if the output file looks very similar to the original one (File format box, sample table boxes, etc.), the generated file is not streamable.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:52:05.147

我找到了解决方案。仅使用格式的`-movflags faststart`参数`mp4`。完整的命令是：

```
ffmpeg -i aac_lc_in.m4a -strict -2 -codec copy -f mp4 -movflags faststart aac_lc_out.m4a 
```

现在`aac_lc_out.m4a`，只要单击播放，浏览器就会播放该文件。

# gwt - Network payload is less in RF when entity proxies are used. But how to validate it?

> ID：16131621
> 
> 赞同：0
> 
> 时间：2013-04-21T13:29:15.177
> 
> 标签：gwt, requestfactory

My basic question in one line is: **How to validate that only diff is sent across the browser in RequestFactory?**

Am stuck with that. Hope I can get it resolved.

Description:

I wrote a sample application that uses request factory and was trying to find out what difference it makes in the data that is sent over the wire. My sample screen looks like this:

![GUI screen](https://i.stack.imgur.com/j137a.png)

Am purposefully appending the address string with a huge string and able to get a payload in KBs for the first time. But when I try to update that entity again without changing that big string, diff is calculated and that string is not shown in the `P` element in Network but the data size remains the same to the previous request. I have attached those pics as well. What am in missing here?

![Look at address string set really long](https://i.stack.imgur.com/amfB5.png)

Why is network data in chrome showing the same value as before even though the big string is not sent in the next request?

I have tried my best to explain here. Kindly ask me if anything is unclear. Thanks a lot.

I could not upload image as some issue was preventing me from uploading image. I have added the payload information of the two requests here.

**An entity getting saved:-**

```
F: "com.first.shared.ExampleApplicationRequestFactory"
I: [{P:[{T:SthgDWKGDyVU7XY2_BerXnH$ujE=, R:1, C:1}], R:[*.*], O:Gmm2HER5ETasZhvmQq72gtmtEz0=}]
O: [{T:SthgDWKGDyVU7XY2_BerXnH$ujE=, P:{,…}, C:1, R:1, O:PERSIST},…]
0: {T:SthgDWKGDyVU7XY2_BerXnH$ujE=, P:{,…}, C:1, R:1, O:PERSIST}
C: 1
O: "PERSIST"
P: {,…}
address: {T:r3GDJrFpjlkGiv5IxQq56QaH0oQ=, R:1, C:2}
detail: {T:c2QMWXl3jRvuopMBwuBwIIjIBRc=, R:1, C:3}
firstName: "lpd"
lastName: "detail example detail example detail example detail example detail example detail example detail example detail example detail example detail example detail example detail example detail example .... [and so on]"
R: "1"
T: "SthgDWKGDyVU7XY2_BerXnH$ujE="
1: {T:r3GDJrFpjlkGiv5IxQq56QaH0oQ=, P:{city:Bangalore}, C:2, R:1, O:PERSIST}
C: 2
O: "PERSIST"
P: {city:Bangalore}
R: "1"
T: "r3GDJrFpjlkGiv5IxQq56QaH0oQ="
2: {T:c2QMWXl3jRvuopMBwuBwIIjIBRc=, P:{detail:India}, C:3, R:1, O:PERSIST}
Response Headersview source 
```

**Same entity getting updated:-**

```
F: "com.first.shared.ExampleApplicationRequestFactory"
I: [{P:[{T:SthgDWKGDyVU7XY2_BerXnH$ujE=, S:IjIi}], R:[*.*], O:Gmm2HER5ETasZhvmQq72gtmtEz0=}]
O: [{T:SthgDWKGDyVU7XY2_BerXnH$ujE=, V:MS4w, P:{firstName:lpd-2}, S:IjIi, O:UPDATE},…]
0: {T:SthgDWKGDyVU7XY2_BerXnH$ujE=, V:MS4w, P:{firstName:lpd-2}, S:IjIi, O:UPDATE}
O: "UPDATE"
P: {firstName:lpd-2}
firstName: "lpd-2"
S: "IjIi"
T: "SthgDWKGDyVU7XY2_BerXnH$ujE="
V: "MS4w"
1: {T:r3GDJrFpjlkGiv5IxQq56QaH0oQ=, V:MS4w, S:IjIi, O:UPDATE}
2: {T:c2QMWXl3jRvuopMBwuBwIIjIBRc=, V:MS4w, S:IjIi, O:UPDATE} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:09:41.127

这是根据 Thomas Broyer 提供的输入解决的。

如果您想量化事物，请在单击 Chrome 开发工具中的特定请求/响应时查看 Headers 选项卡中的 Content-Length 请求标头。——托马斯·布罗耶

# testing - 中止 DejaGNU 测试套件中的测试

> ID：16131622
> 
> 赞同：0
> 
> 时间：2013-04-21T13:29:17.583
> 
> 标签：testing, tcl

我正在为 Freeciv 编写回归测试套件，每次运行每个实际测试之前都需要设置一些东西。在这个样板测试代码中，可能会出现问题，例如无法连接到服务器。如果发生这种情况，我想中止该测试的其余部分，因为它几乎肯定会导致其余测试缓慢而可怕地失败。

如何在不导致 runtest 本身退出的情况下中止测试运行？我希望它仍然输出摘要信息，并且我不想将所有内容都包装在条件中，因为这很难看。还有其他选择吗？

# ruby-on-rails - Nil is not symbol in Rspec

> ID：16131623
> 
> 赞同：3
> 
> 时间：2013-04-21T13:29:26.550
> 
> 标签：ruby-on-rails, rspec

When I run in development mode on my localhost. Everything works, I can easily remove my posts. But my request specs are failing.

I get this error, when I run my tests:

```
1) Posts when logged in should delete posts
     Failure/Error: expect{click_on "Usuń spot"}.to change(Post.count).by(1)
     TypeError:
       nil is not a symbol 
```

# posts_spec.rb

```
describe "when logged in" do
    let(:user) {FactoryGirl.create(:user)}
    let!(:post) {user.posts.create(content: "Brilliant! I just saw the most amazing ever. She looked so cute!")}
    content = "Example of spot post, for TDD. It's not real spot. Not yet."

    before(:each) {
      log_user(user)
    }

    it "should delete posts" do
      visit user_post_path(user, post)
      expect{click_on "Usuń spot"}.to change(Post.count).by(1)
    end 
```

# show.haml

```
=@post.content
=link_to "Usuń spot", [@user,@post], method: :delete 
```

# posts_controller.rb

```
 def show
    @user = current_user
    @post = @user.posts.find(params[:id])
  end

  def destroy
    @user = current_user
    @post = @user.posts.find_by_id(params[:id])
    @post.destroy

    flash[:success] = "Post destroyed"

    redirect_to root_url
  end 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-21T13:40:05.013

`change`需要一个块，因此可以对其进行两次评估以验证值的变化。

这应该有效：

```
expect{click_on "Usuń spot"}.to change{Post.count}.by(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T20:08:22.427

```
change{Post, :count}.by(1) 
```

是正确的语法。 [文件](http://rubydoc.info/gems/rspec-expectations/3.0.0/RSpec/Matchers#change-instance_method)

# javascript - 停止表单提交并保留表单值

> ID：16131624
> 
> 赞同：2
> 
> 时间：2013-04-21T13:29:28.953
> 
> 标签：javascript, jquery, html

我在我的表单提交上添加了一个验证检查，但问题是它阻止了表单提交，但它也重置了我的整个表单。请让我知道我怎样才能`return false`停止表单提交并停止重置整个表单。谢谢

```
function error()
{
   if (!$("#form1 input[name='radio']:checked").val()) {
     alert('Error: Please select any check box!');
     return false;
   }
   else {
     //alert('One of the radio buttons is checked!');
   }
}

<form name="form1" id="form1">
  <input name="Name" type="text" id="name" size="70" />
  <input name="Age" type="text" id="age" size="70" />
  <input type="radio" name="radio" id="A18" value="18" />
  <input type="radio" name="radio" id="A19" value="19" />
  <input type="submit" onclick="error();" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:30:36.557

您需要做的不仅仅是`false`从函数返回：

```
<input type="submit" onclick="return error();" /> 
```

因为“onclick”属性的值本质上是用作*实际*处理函数的主体，所以它需要自己的`return`声明。

*编辑*- meagar 的回答是个好主意 - 处理表单上的“提交”事件而不是按钮上的“点击”事件是明智的。如果您像他的示例中那样通过 jQuery 设置事件处理程序，`return`那么您只需要“错误”函数中的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T13:31:37.723

您需要`submit`使用验证功能处理表单的事件，并返回`false`：

```
$("#form1").submit(error); 
```

从您的处理程序返回 false`submit`将取消表单提交，并且将保持表单元素的当前状态。

# qt - 如何清除 QPlainTextEdit 中的 ExtraSelections

> ID：16131628
> 
> 赞同：2
> 
> 时间：2013-04-21T13:30:16.673
> 
> 标签：qt, qplaintextedit

对不起，如果这是一个新手问题。我有一些用于在编辑器中标记错误的代码，但当错误消失时，我找不到如何清除标记。这是我为呈现错误而调用的方法。

```
void Editor::highlightErrors( Thing* t )
{
    if ( !t )
        return; 

    const std::vector<Thing::Error>& errors = t->errors();

    QTextCursor tc = textCursor();
    tc.select(QTextCursor::Document);

    QList<QTextEdit::ExtraSelection> extraSelections;
    for(int i = 0; i < errors.size(); ++i) {
        const Thing::Error& error = errors[i];
        QTextEdit::ExtraSelection sel;
        sel.format = this->errorFormat();
        sel.format.setToolTip(QString(error.error.c_str()));
        sel.cursor = tc;
        sel.cursor.clearSelection();
        sel.cursor.setPosition(error.startPos);
        sel.cursor.movePosition(QTextCursor::NextCharacter, QTextCursor::KeepAnchor, error.endPos - error.startPos);
        sel.cursor.mergeCharFormat(sel.format);
        extraSelections.append(sel);
    }
    setExtraSelections(extraSelections);
} 
```

我希望 QPlainTextEdit 在没有错误的情况下调用此方法时重新绘制没有错误格式的文本，但事实并非如此。QTextLayout::draw 被正确调用，额外的选择也被清除，但文本仍在以错误格式绘制。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:14:53.150

Seems more like a Qt bug to me.

If your just looking for a fix / workaround:

Add this after `tc.select(QTextCursor::Document);`:

```
 tc.setCharFormat(textCursor().charFormat()); 
```

That should sort the issue out.

**Details**:

This is the function I was testing this with. I just made the function take an int num and format those char positions as an `extraSelection` with custom format(Does not include fix I mentioned above).

```
void MainWindow::highlightErrors(int num) {
  QTextCursor tc = ui_.textEdit->textCursor();
  tc.select(QTextCursor::Document);
  QTextCharFormat format;
  QColor lineColor = QColor(Qt::red);
  format.setBackground(lineColor);
  // format.setFontCapitalization(QFont::AllLowercase);
  QList<QTextEdit::ExtraSelection> extraSelections;
  for(int i = 0; i < num; ++i) {
    QTextEdit::ExtraSelection selection;
    selection.format = format;
    selection.format.setToolTip(QString::number(i));
    selection.cursor = tc;
    selection.cursor.clearSelection();
    selection.cursor.setPosition(i);
    selection.cursor.movePosition(QTextCursor::NextCharacter, QTextCursor::KeepAnchor, 1);
    // selection.cursor.mergeCharFormat(selection.format);
    extraSelections.append(selection);
  }
  ui_.textEdit->setExtraSelections(extraSelections);
} 
```

In the above code 2 lines are commented. All that happens is a red background gets applied. Now this works fine.

However if we uncomment `format.setFontCapitalization(QFont::AllLowercase);`, and re-run we can see the background work as expected but the lowercase change does not get applied(make sure it's caps to begin-with) (This is what I reckon is the Qt bug since format changes only apply partially)

Now if we also uncomment `selection.cursor.mergeCharFormat(selection.format);`, we can see the lowercase format is applied as well but the format removal stops working.

Hence us needing a fix to reset the `CharFormat()` on entire document when `errorSelection()` is **changed**.

# linux - Going into directory using bash variable

> ID：16131629
> 
> 赞同：1
> 
> 时间：2013-04-21T13:30:17.427
> 
> 标签：linux, bash, shell, scripting

I have the following functions in my ~/.bash_aliases file

```
mycd() {
  dir=$(cat)
  echo "$dir"
  cd "$dir"
}
alias c=mycd 
```

and

```
gotoD() {
  find -name $1 -type $2 | awk '{ print $0 }' | sort -k2 | head -1 | c
}
alias goto=gotoD 
```

I want to be able to type

```
goto directory_name d 
```

and have the functions search for the directory and cd into the nearest one The problem is that though the found path to the directory gets into mycd, it is unable to actually change directories and simple remains in the same directory without any errors.

Any help would be greatly appreciated.

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:47:39.167

每当您将命令放入管道时，都会强制该命令作为单独的进程执行。由于每个进程都有自己的当前目录，因此您最终只会更改该进程的当前目录，而不是您输入的 shell 的当前目录。尝试像这样实现 gotoD：

```
gotoD() {
  cd $(find -name $1 -type $2 | awk '{ print $0 }' | sort -k2 | head -1)
} 
```

现在查找正确目录的逻辑仍然在另一个进程中执行，但`cd`命令由主进程执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:25:47.643

## 设置正确的 Bash 选项：cdable_vars

您可能正在寻找正确的*shopt*选项来设置`cdable_vars`. [手册页](http://www.gnu.org/software/bash/manual/html_node/The-Shopt-Builtin.html)说：

> cdable_vars
> 
> 如果设置了此项，则假定 cd 内置命令的一个不是目录的参数是一个变量的名称，该变量的值是要更改到的目录。

这简化了您的解决方案。例如：

```
shopt -s cdable_vars
goto=/etc
cd goto 
```

但是，您可以使用脚本、函数或管道将目录名称分配给 goto，而不是为 goto 分配静态*目录*。

# python - Python - I'm trying to get the output of pwd and instead i get the exit status

> ID：16131630
> 
> 赞同：4
> 
> 时间：2013-04-21T13:30:25.060
> 
> 标签：python

I'm trying to get the output of `pwd`:

```
#!python
import os
pwd = os.system("pwd")
print (pwd) 
```

it prints 0 which is the successful exit status instead the path. How can i get the path instead?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-21T13:34:23.757

使用 运行系统命令更好[`subprocess`](http://docs.python.org/3/library/subprocess.html)，但如果您`os`已经在使用，为什么不直接使用

```
pwd = os.getcwd() 
```

[`os.getcwd()`](http://docs.python.org/3/library/os.html#os.getcwd)在 Windows 和 Unix 上可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T13:34:17.193

要获取当前工作目录，请使用[os.getcwd()](http://docs.python.org/2/library/os.html#os.getcwd)。但一般来说，如果你想要输出和返回码：

```
import subprocess
PIPE = subprocess.PIPE
proc = subprocess.Popen(['pwd'], stdout=PIPE, stderr=PIPE)
out, err = proc.communicate()
errcode = proc.returncode
print(out)
print(errcode) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T13:34:54.367

你不能用 来做到这一点`os.system`，尽管`os.popen`确实会为你返回那个值：

```
>>> import os
>>> os.popen('pwd').read()
'/c/Python27\n' 
```

但是，该`subprocess`模块功能更强大，应改为使用：

```
>>> import subprocess
>>> p = subprocess.Popen('pwd', stdout=subprocess.PIPE)
>>> p.communicate()[0]
'/c/Python27\n' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-21T13:36:00.110

当前目录完整路径：

```
import os
print os.getcwd() 
```

# html - How to instruct browser to display a local page as if it was retrieved from the web

> ID：16131631
> 
> 赞同：0
> 
> 时间：2013-04-21T13:30:26.553
> 
> 标签：html, browser, web

I would like to open a html file, but in a way that the browser will act as if I browsed to that page from a specific site.That is, it should expand partial addresses with regards to this site, not my local file system.For example, `<img src=image/example.jpg>` should look for the image in [http://examplesite.com/image/example.jpg](http://examplesite.com/image/example.jpg) and NOT in the current path.Any `POST` commands should be forwarded to the real server, etc. I would like to do that, so that I will be able to download a simple webpage, edit it, and run it with the changes I made. Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:33:33.617

您应该包含一个基本标签。这将有效地告诉浏览器从哪里开始寻找参考：

```
<head>
    <base href="http://examplesite.com/">
</head> 
```

base-tag 需要 href-attribute，只能有一个并且必须在 head-tag 内

查看此链接了解更多信息：[http ://www.w3schools.com/tags/tag_base.asp](http://www.w3schools.com/tags/tag_base.asp)

# magento - 产品未显示在 Magento 的类别页面中

> ID：16131632
> 
> 赞同：3
> 
> 时间：2013-04-21T13:30:30.937
> 
> 标签：magento

我的服务器上安装了 Magento。问题是产品没有显示在类别页面中，尽管当我使用 www.mySite.com/dummy-product.html 之类的直接 URL 访问产品时产品工作正常。我通过重新索引、刷新缓存、批量禁用/启用产品进行了检查，但没有结果。
任何帮助，将不胜感激。
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:40:41.423

几件事情要检查

```
Product visibilty must be Catalog or Catalog,Search
Products must be Enabled.
Check product in stock and quantity must be greater than 0
If you are using mutiple website check to which website product points 
```

我认为这会解决。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-11T05:55:57.433

如果您的 Magento 产品未显示在前端类别页面中，那可能是因为以下一项或多项操作未正确完成。

产品必须正确设置以下设置才能显示在前端的类别页面中。您可以在任何单个产品的“管理产品”屏幕中检查以下所有内容。

```
- Status must be Enabled (under General tab)
- Visiblility should be Catalog OR Catalog, Search (under General tab)
- Stock Qty (quantity) should be greater than Qty for Item’s Status to Become Out  
  of  stock (under Inventory tab)
- Stock Availability must be IN STOCK
- Category should be assigned (under Categories tab)
- Website must be assigned (under Websites tab)
- Clear the cache, re-index the indexes related to product (Product prices, Product flat data and Category products) and everything should work as expected. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-16T04:47:06.170

即使我无法让产品更早出现在搜索中。我的产品有两个可配置属性：形状和大小（之前应用于选定产品：可配置产品）。据说形状和尺寸属性仅适用于“可配置产品”而不是“简单产品”（这是问题所在！）。

我们创建的相关产品（来自可配置产品）实际上是简单的产品。所以 Magento 要求我们为创建可配置产品创建的属性应该带有“简单产品”选项。

目录 > 属性 > 管理属性 > 尺寸 > 应用于 > 选定的产品类型 > 简单产品

然后这个属性可以用来创建属性集，进而创建一个可配置的产品（这用于创建简单的关联产品）。

请确保在管理员的“管理属性”部分中将产品属性应用于“简单产品”。

您可能必须删除之前的关联产品（使用可配置属性创建）。完成此操作后，可配置产品开始出现在搜索中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-17T09:12:46.863

我在使用 Magento 版本时遇到了这个问题。1.9.1.0。转到管理产品->选择产品->库存。将库存数量设置为某个值，并将库存可用性设置为“有货”。它对我有用，产品现在正在展示。

其他可能性：

1.  产品必须在目录中可见。
2.  产品必须启用。
3.  产品必须有库存数量。
4.  产品必须设置为有货。
5.  如果产品设置为不跟踪库存，它仍然必须有库存数量并设置为有库存。
6.  产品必须分配到目标类别。
7.  刷新你的缓存/索引，只是为了确保。

# c# - 空列表或字典的内存使用情况？

> ID：16131641
> 
> 赞同：11
> 
> 时间：2013-04-21T13:31:01.773
> 
> 标签：c#, memory

空列表或字典使用了多少内存？如：

```
List<double> list = new List<double>(); 
```

指针本身在 x86 和 x64 操作系统的 64 位上至少占用 32 位，但是列表本身呢？有 0 条记录。

问的原因是，您可以通过将列表设置为来节省一些字节`null`吗？

（想象一下，你有一个包含一些`List<T>`在某些情况下正在使用的类，而在其他情况下则不是，在这种情况下，有一个`boolean`like`IsEmpty`而`null`不是空列表可能会节省一些操作内存。特别是如果你有数千个这样的操作内存中的类，每一位都很重要。）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-21T13:38:51.810

由 dotPeek 反编译：

```
public class List<T> : IList<T>, ICollection<T>, IList, ICollection, IReadOnlyList<T>, IReadOnlyCollection<T>, IEnumerable<T>, IEnumerable
{
    private T[] _items; //4 bytes for x86, 8 for x64
    private int _size; //4 bytes
    private int _version; //4 bytes
    [NonSerialized]
    private object _syncRoot; //4 bytes for x86, 8 for x64
    private static readonly T[] _emptyArray; //one per type
    private const int _defaultCapacity = 4; //one per type
    ...
} 
```

在 x86 上总共有**20**个字节（16 个用于`List<T>`成员，4 个用于元数据引用开销）和**32 个**在 x64 上，包括对对象类型的引用，.net 中的每个对象都有。此计算大致完成，不包括对齐。

* * *

```
public class Dictionary<TKey, TValue> : ...
{
    private int[] buckets; //4 bytes for x86, 8 for x64
    private Dictionary<TKey, TValue>.Entry[] entries; //4 bytes for x86, 8 for x64
    private int count; //4 bytes
    private int version; //4 bytes
    private int freeList; //4 bytes
    private int freeCount; //4 bytes
    private IEqualityComparer<TKey> comparer; //4 bytes for x86, 8 for x64
    private Dictionary<TKey, TValue>.KeyCollection keys; //4 bytes for x86, 8 for x64
    private Dictionary<TKey, TValue>.ValueCollection values; //4 bytes for x86, 8 for x64
    private object _syncRoot; //4 bytes for x86, 8 for x64

    private const string VersionName = "Version"; //one per type
    private const string HashSizeName = "HashSize"; //one per type
    private const string KeyValuePairsName = "KeyValuePairs"; //one per type
    private const string ComparerName = "Comparer"; //one per type
} 
```

**x86为**44 ，x64 为****72**。再次粗略计算，因为需要不同对象的实例。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-24T12:46:51.960

> 问的原因是，您可以通过将列表设置为空来节省一些字节吗？

作为一般规则（与任何规则一样，也有例外），您不应将托管对象设置`null`为释放内存。相反，将其留给垃圾收集器来检测对象何时不再可访问。事实上，设置对的引用`null`可能会适得其反，因为它实际上可以[稍微延长对象的生命周期](https://blogs.msdn.microsoft.com/csharpfaq/2004/03/26/should-i-assign-null-to-my-local-variables/)。

一个例外可能是一个边缘情况，值得设置一个大对象`null`（例如，一个非常大的列表，它是另一个对象的属性，由于某种原因需要保持可访问性），但这种情况很少见，可能表示“代码闻”。**

# cuda - 安装 Nvidia Optix SDK 3.0.0 Ubuntu 12.04

> ID：16131650
> 
> 赞同：1
> 
> 时间：2013-04-21T13:32:03.273
> 
> 标签：cuda, ubuntu-12.04, nvidia, optix

您好我正在尝试在 Ubuntu 上安装 nVidia OptiX SDK 版本 3.0.0 für linux64。

我已经下载了 .run 文件。执行完成后，我得到一个名为 ~/NVIDIA-OptiX-SDK-3.0.0-linux64/ 的文件夹

它在我的主文件夹中。

预编译的示例工作正常，但是当我尝试编译自己的代码时，编译器似乎将 .cu 文件作为 CUDA 文件处理并尝试将它们编译为 .cu.o。我的程序错误的一个输出是：

```
Building NVCC (Device) object CMakeFiles/RayTracerExec.dir/src/Tracy/ObjectLoader/optixcu/./RayTracerExec_generated_triangle_mesh_target.cu.o 
```

通常这些文件应该编译成某种 ptx 文件？

以下错误是：

```
ptxas /tmp/tmpxft_00000eef_00000000-5_triangle_mesh_target.ptx, line 94; error   : Label expected for argument 0 of instruction 'call'
ptxas /tmp/tmpxft_00000eef_00000000-5_triangle_mesh_target.ptx, line 94; error   : Call target not recognized
ptxas /tmp/tmpxft_00000eef_00000000-5_triangle_mesh_target.ptx, line 94; error   : Function '_rt_buffer_get_64' not declared in this scope 
```

找不到该功能`_rt_buffer_get_64`让我觉得有些东西没有正确安装。

该文件夹中有名为 doc 的子文件夹，包括 lib64 SDK SDK-precompiled-samples 我所做的是将 include 的内容复制到 /usr/local/include 并将 lib64 的内容复制到 /usr/local/lib

有任何想法吗？问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:39:23.027

从输出中的文本来看，您似乎正在使用 CMake 构建示例。看起来构建系统认为您想要编译目标文件而不是 PTX 文件。您看到的错误消息也表示此症状。

从 CMake 中编译 CUDA 代码有多种方法。

如果您使用的是 CUDA 运行时，则通常执行以下操作：

```
cuda_add_executable(myprogram main.cpp mycuda.cu myheader.h) 
```

这将创建一个名为 myprogram 的可执行文件，该可执行文件由两个目标文件组成：main.cpp.o 和 mycuda.cu.o。CUDA 运行时要求 cuda 文件中的代码符合 CUDA 运行时 API。

除此之外`cuda_add_executable`还有`cuda_add_library`编译库而不是可执行文件。这两个宏都使用另一个名为的宏`cuda_wrap_srcs`，它完成了大部分繁重的工作，即生成构建命令来编译 CUDA 代码。除其他外，此宏有一个参数，用于指定您是要使用 CUDA 运行时还是仅针对 PTX（参数是 OBJ 或 PTX）。

要编译 OptiX 着色器，您必须以 PTX 为目标。在我们发布的 SDK 中，这是通过一个名为 CMake 的函数来处理的，该函数`OPTIX_add_sample_executable`可以在`<install>/SDK/CMakeLists.txt`. 这个函数的主要作用是调用`cuda_wrap_srcs`指定的 PTX 选项。我在这里也包含了该功能以供参考。

```
#########################################################
# OPTIX_add_sample_executable
#
# Convenience function for adding samples to the code.  You can copy the contents of this
# function into your individual project if you wish to customize the behavior.  Note that
# in CMake, functions have their own scope, whereas macros use the scope of the caller.
function(OPTIX_add_sample_executable target_name)

  # These calls will group PTX and CUDA files into their own directories in the Visual
  # Studio projects.
  source_group("PTX Files"  REGULAR_EXPRESSION ".+\\.ptx$")
  source_group("CUDA Files" REGULAR_EXPRESSION ".+\\.cu$")

  # Separate the sources from the CMake and CUDA options fed to the macro.  This code
  # comes from the CUDA_COMPILE_PTX macro found in FindCUDA.cmake.  We are copying the
  # code here, so that we can use our own name for the target.  target_name is used in the
  # creation of the output file names, and we want this to be unique for each target in
  # the SDK.
  CUDA_GET_SOURCES_AND_OPTIONS(source_files cmake_options options ${ARGN})

  # Create the rules to build the PTX from the CUDA files.
  CUDA_WRAP_SRCS( ${target_name} PTX generated_files ${source_files} ${cmake_options}
    OPTIONS ${options} )

  # Here is where we create the rule to make the executable.  We define a target name and
  # list all the source files used to create the target.  In addition we also pass along
  # the cmake_options parsed out of the arguments.
  add_executable(${target_name}
    ${source_files}
    ${generated_files}
    ${cmake_options}
    )

  # Most of the samples link against the sutil library and the optix library.  Here is the
  # rule that specifies this linkage.
  target_link_libraries( ${target_name}
    sutil
    optix
    ${optix_rpath}
    )
endfunction() 
```

# sql - 将外键添加到多个现有表

> ID：16131651
> 
> 赞同：1
> 
> 时间：2013-04-21T13:32:10.623
> 
> 标签：sql, sql-server-2008-r2, foreign-keys

我有一个用户 ID 为 PK 的表“用户”。我需要将其作为 FK 添加到多个现有表的 2 列中。现在，我正在更新每个表。方法。

```
alter table table1
add foreign key(createdby) references users(id)
go
alter table table1
add foreign key(createdby) references users(id)
go 
```

有没有一种更简单的方法可以一次性更新所有表。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:27:16.803

这是针对另一个具有不同语法和不同 DDL 更改但结构相同的数据库。声明一个游标，查询数据字典表并返回要运行的 SQL 语句，然后在执行每个语句时打开并循环游标。

```
DECLARE SQLStr SHORTSTRING(1000);
DECLARE NoDefaultsCursor CURSOR FOR
   SELECT 'ALTER TABLE "' || TABLE_NAME ||
          '" ALTER COLUMN "' || FIELD_NAME || '" SET DEFAULT ' ||
     CASE FIELD_TYPE_SQL
       WHEN 'INTEGER' THEN '0'
       WHEN 'BOOLEAN' THEN 'FALSE'
       WHEN 'SHORTSTRING' THEN ''''''
       WHEN 'CHARACTER VARYING' THEN ''''''
     END || ';' AS AddDefaultSQL
   FROM #FIELDS WHERE NOT FIELD_HASDEFAULT
     AND FIELD_TYPE_SQL IN
       ('INTEGER','BOOLEAN','SHORTSTRING','CHARACTER VARYING');
OPEN NoDefaultsCursor;
FETCH NEXT FROM NoDefaultsCursor INTO SQLStr;
WHILE @@FETCH_STATUS = 0 DO
    Execute Immediate SQLStr;
    FETCH NEXT FROM NoDefaultsCursor INTO SQLStr;
END WHILE;
CLOSE NoDefaultsCursor; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T14:42:10.290

也许这样的事情会成功！

```
DECLARE @TableName AS NVARCHAR(128)
DECLARE @Schema AS NVARCHAR(128)
DECLARE @Modify AS INTEGER
DECLARE @Created AS INTEGER
DECLARE @sql1 as nvarchar(max)
DECLARE @sql2 as nvarchar(max)
DECLARE curs CURSOR FOR
SELECT
A.[name],
S.[name] as schemaname,
(SELECT 1 FROM sys.all_objects innero 
where innero.[name] = 'FK_ModifiedBy' 
AND innero.parent_object_id = a.[object_id]) as ModifiedBy,
(SELECT 1 FROM sys.all_objects innero 
where innero.[name] = 'FK_CreatedBy' 
AND innero.parent_object_id = a.[object_id]) as CreatedBy
FROM
    sys.all_objects A
INNER JOIN
sys.all_columns O ON
A.[object_id] = O.[object_id]
INNER JOIN
SYS.schemas S ON
A.[schema_id] = S.[schema_id]
WHERE
O.name = 'ModifiedBy'
OPEN curs
FETCH NEXT FROM curs
INTO @TableName, @Schema, @Modify, @Created
WHILE @@FETCH_STATUS = 0
BEGIN
IF @Modify IS NULL
BEGIN
set @sql1 = N'ALTER TABLE ' + @Schema + '.' + @TableName 
 + ' ADD CONSTRAINT FK_ModifiedBy FOREIGN KEY (ModifiedBy) 
REFERENCES ' + @Schema + '.Users(userid)'
exec SP_EXECUTESQL @sql1
END
IF @Created IS NULL
BEGIN
set @sql2 = N'ALTER TABLE ' + @Schema + '.' + @TableName 
+ ' ADD CONSTRAINT FK_CreatedBy FOREIGN KEY (createdby) 
REFERENCES ' + @Schema + '.Users(userid)'
exec SP_EXECUTESQL @sql2
END
FETCH NEXT FROM curs
INTO @TableName, @Schema, @Modify, @Created
END
CLOSE curs
DEALLOCATE curs 
```

抱歉，在 sql 构建中缩进不好，在这里使它变得好似乎有点麻烦。如果某些表只有其他两列之一，这可能需要稍微调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T19:09:40.200

我还尝试了一个紧凑版本的 christer。这也很有效。认为可能对其他人有帮助

```
declare @tblname nvarchar(50),@sql1 nvarchar(max),@sql2 nvarchar(max)
declare curs cursor for
select TABLE_NAME from INFORMATION_SCHEMA.COLUMNS where COLUMN_NAME ='createdby'
open curs
 fetch next from curs into @tblname
 while @@FETCH_STATUS=0
  begin
   set @sql1='alter table dbo.'+ @tblname+
   ' add foreign key(createdby) references users(id)'
   exec sp_executesql @sql1
   set @sql2='alter table dbo.'+@tblname+
   ' add foreign key(modifiedby) references users(id)'
   exec sp_executesql @sql2
   fetch next from curs into @tblname
  end
close curs
deallocate curs 
```

# c++ - 运算符<< 重载（仅）用于 std::stringstream 派生类

> ID：16131658
> 
> 赞同：2
> 
> 时间：2013-04-21T13:32:38.810
> 
> 标签：c++

我正在实现一个使用流运算符的日志记录类。基本思想是自定义类型可以实现一个`operator<<`为日志记录提供可读表示。日志记录类将“收集”各种消息并将它们转发（到 syslog 或其他）作为销毁时的单个日志记录条目。

```
class log_stream : public std::ostringstream
{
    inline ~log_stream()
    {
        forward_to_log(str().c_str());
    }
};

class custom_type
{
};

std::ostream &operator<<(std::ostream &stream, const custom_type &)
{
    stream << "<custom_type data>";
    return stream;
}

log_stream() << "error in custom type: " << custom_type_variable; 
```

这实际上工作得很好，除非该语句不是以 std::ostream 的重载而是直接以自定义类型开头：

```
log_stream() << custom_type_variable; // no known conversion from 'log_stream'
                                      // to 'basic_ostream<char, ...>&
                                      // for 1st argument 
```

现在我想知道为什么，因为`log_stream`is-a `ostringstream`is-a `basic_ostringstream`is-a `basic_ostream`。有任何想法吗？

另外：有没有办法直接提供`operator<<`重载`log_stream&`而不是提供重载`std::ostream`（如果需要两个不同的日志重载 - 与 - 一起使用`log_stream`- 例如序列化到磁盘 - 与 - 一起使用`fstream`）？

**编辑#1**

如果添加“r 值能力” `operator<<`，第一个问题就解决了。

```
template <typename Type> inline log_stream &operator<<(log_stream &&stream, Type&& type)
{
    return operator<<(stream, std::forward<Type>(type));
} 
```

但是，它现在/仍然在类型转换为基类（无论是它`ostringstream`还是`ostream`）时中断。

```
log_stream() << custom_type(); // OK
log_stream() << custom_type() << "text"; // OK

log_stream() << "next"; // non-const lvalue reference to type 'log_stream' cannot bind
                        // to a value of unrelated type 'basic_ostream<char, ...>' 
```

为什么`basic_ostream<char, ...>`类型不相关？它*是*一个基类，`log_stream`应该*可以*在这里获得对这个基类的引用，不是吗？

**编辑#2**

好吧，它当然应该调用 member `operator<<`，这使它工作。

```
template <typename Type> inline log_stream &operator<<(log_stream &&stream, Type&& type)
{
    stream << std::forward<Type>(type);
    return stream;
} 
```

因此，C++11 的问题已解决 - 但它仍然不适用于 C++03 ( *argh* )。

想到的一种解决方案是提供“r 值到 l 值转换运算符”，其最短形式为`operator()`.

```
class log_stream
{
    inline log_stream &()() 
    {
        return *this;
    }
}

log_stream()() << custom_type() << "text"; 
```

不漂亮，但有点。有更好（更漂亮）的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:37:26.517

您的日志流是*临时*的，而插入运算符需要*非常量引用*。您不能将前者转换为后者。

您必须引入一个实际的命名变量类型`log_stream`并将其用作`<<`.

# java - 通过套接字发送 BufferedImages

> ID：16131660
> 
> 赞同：0
> 
> 时间：2013-04-21T13:32:56.197
> 
> 标签：java, sockets, serialization, bytearray, bufferedimage

我想通过网络发送缓冲图像作为我的自定义类的一部分。

我目前只是 writeObject 和 readObject 来获取我的课程。

要发送当前正在执行的图像：

`((DataBufferByte) i.getData().getDataBuffer()).getData();`

如何将其转换回 BufferedImage？

有没有更好的方法来做到这一点？

我发送的课程如下所示：

```
public class imagePack{

public byte[] imageBytes;
public String clientName;
public imagePack(String name, BufferedImage i){
    imageBytes = ((DataBufferByte) i.getData().getDataBuffer()).getData();
    clientName = name;
}

    public BufferedImage getImage(){
     //Do something to return it}

} 
```

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:57:33.607

如果要将其转换回 BufferedImage，您还必须知道它的宽度、高度和类型。

```
class imagePack {

    public byte[] imageBytes;
    public int width, height, imageType;
    public String clientName;

    public imagePack(String name, BufferedImage i) {
        imageBytes = ((DataBufferByte) i.getData().getDataBuffer())
                .getData();
        width = i.getWidth();
        height = i.getHeight();
        imageType = i.getType();
        clientName = name;
    }

    public BufferedImage getImage() {
        if (imageType == BufferedImage.TYPE_CUSTOM)
            throw new RuntimeException("Failed to convert.");
        BufferedImage i2 = new BufferedImage(width, height, imageType);
        byte[] newImageBytes = ((DataBufferByte) i2.getData()
                .getDataBuffer()).getData();
        System.arraycopy(imageBytes, 0, newImageBytes, 0, imageBytes.length);
        return i2;
    }
} 
```

# c# - 列表 我如何获得它的内容？

> ID：16131670
> 
> 赞同：-2
> 
> 时间：2013-04-21T13:34:00.130
> 
> 标签：c#, asp.net, html-agility-pack

我有以下类，它使用 HtmlAgilityPack 从当前页面/文档创建 uri 列表。

```
public List<Uri> getLinks() 
{
    var linksOnPage = from lnks in doc.DocumentNode.Descendants()
                      where lnks.Name == "a" &&
                           lnks.Attributes["href"] != null &&
                           lnks.InnerText.Trim().Length > 0
                      select new
                          {
                              Url = lnks.Attributes["href"].Value,
                          };

    List<Uri> Uris = new List<Uri>();

    foreach (var link in linksOnPage)
    {
        Uri baseUri = new Uri(urlBase, UriKind.Absolute);
        Uri page = new Uri(baseUri, link.Url.ToString());
        Uris.Add(page);
    }

    return Uris;
} 
```

**所以，我有以下问题：**

1.  从代码中的其他地方调用此类时，如何获取列表中的第一项？- 回答。

2.  例如，当我从代码中的其他地方调用它时，如果我希望将它们写出来，我该如何循环遍历列表中的所有 uri？- 已回答

3.  我该如何调整它以便它从输入字符串而不是整个文档中读取 uri？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:40:03.080

列表的第一项：

```
var first = getLinks().FirstOrDefault(); // null if the list is empty 
```

依次通过：

```
foreach (var uri in getLinks())
{
    // do the job
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:34:47.297

我意识到实现我的目标更简单的方法是：

```
matchString = Regex.Match(((Property)e.Item.FindControl("Property4")).Text, "<img.+?src=[\"'](.+?)[\"'].+?>", RegexOptions.IgnoreCase).Groups[1].Value;//image src 
```

# tinn-r - tinn-r 2.4.1.5 没有通过 zoomplot

> ID：16131671
> 
> 赞同：0
> 
> 时间：2013-04-21T13:34:00.040
> 
> 标签：tinn-r

我最近安装了 R 3.0.0，通过 Tinn R 2.4.1.5 传递命令

我尝试使用来自 TeachingDemos 的函数 zoomplot(locator)

我收到以下错误：

> .Primitive(".External2")(c(2799.10559440559, 2848.00769230769,) 中的错误：第一个参数必须是字符串（长度为 1）或本机符号引用

有趣的是，在其他一切都相同的情况下，该函数在 Tinn-R 1.7 上运行良好

我在 Windows XP 32 上运行 R。

任何建议将不胜感激。

最好的祝愿，

埃里贝托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:50:05.460

您尝试过吗： zoomplot(locator(n)) ，其中 n 是您要选择的点数

# c# - C# WPF Webbrowser 保存选择并突出显示文本

> ID：16131672
> 
> 赞同：0
> 
> 时间：2013-04-21T13:34:11.963
> 
> 标签：c#, wpf, user-interface, browser

我想用鼠标在 wpf 网络浏览器中选择一些文本或一些元素并保存选择，以便我可以将其发送到其他 PC/wpf 网络浏览器并用红色字体或背景突出显示它，如“... ”。

我找到了 IHTMLTxtRange 但可以通过编程方式设置它吗？

是否有捷径可寻？

# c# - C# Check if a string is of type ABC123

> ID：16131676
> 
> 赞同：1
> 
> 时间：2013-04-21T13:34:36.973
> 
> 标签：c#, visual-studio-2010

I want to check if a string is of type ABC123.

*   The length of the string must be 6\.
*   Only letters and numbers are allowed.
*   The first three values of the string must be letters.

This is what I have done. How can I improve the code?

```
 private void ValidationOfFlightCode(string flightCode)
    {
        if (flightCode.Length == 6)
        {
            bool state = Regex.IsMatch(flightCode, @"^[a-zA-Z0-9]+$");
            if (state)
            {
                bool isLetter = false;
                for (int i = 0; i < 3; i++)
                {
                    isLetter = Char.IsLetter(flightCode, i);
                    if (!isLetter)
                        break;
                }
                if (isLetter)
                {
                    MessageBox.Show(flightCode + ": " + state);
                }
                else
                {
                    MessageBox.Show("The letters must be before the numbers");
                }
            }
            else
            {
                MessageBox.Show("Only letters and numbers are allowed!");
            }
        }
        else
        {
            MessageBox.Show("Flight Code must be 6 characters long");
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T13:38:07.517

这个正则表达式应该可以工作：

```
^[a-zA-Z]{3}[a-zA-Z0-9]{3}$
//  ^     ^      ^      ^
//  |     |      |      |
//  |     |      |      +-- Three times
//  |     |      +--------- Letters or digits
//  |     +---------------- Three times
//  +---------------------- Only letters 
```

如果`IsMatch`在此正则表达式中返回`false`，您可以进行进一步验证以查看问题所在。

> 如何改进代码？

您可以创建一对正则表达式和错误消息的列表。每个正则表达式都应该比前一个更严格。浏览列表，并尝试将代码与正则表达式进行匹配。如果*不*匹配，则打印错误消息并退出循环。例如，您可以这样做：

*   `^.{6}$`- “代码必须包含六个字符”
*   '^[a-zA-Z0-9]{6}$' - "字符必须是字母数字"
*   '^[[a-zA-Z]{3}.{3}$' - “前三个字符必须是字母”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T13:46:39.807

如果您不需要对发生的错误如此具体，您可以编写一个一次性捕获整个规范的正则表达式。我假设表单总是 AAAXXX，即三个字母和三个数字（最后三个字符中永远不会有一个字母），但如果字母也可以，那么很容易适应。

```
bool isOK = Regex.IsMatch(flightCode, @"^[a-zA-Z]{3}[0-9]{3}$"); 
```

该正则表达式还强加了字符的顺序和总字符串长度。但是，我会更进一步，并将其作为`string`类型的扩展方法：

```
public static class FlightCodeValidationExtensions {
    public static bool IsValidFlightCode(this string str) {
        return Regex.IsMatch(flightCode, @"^[a-zA-Z]{3}[0-9]{3}$");
    }
} 
```

`str.IsValidFlightCode()`现在，只要您已经导入了上述类所在的命名空间，您就可以通过简单地调用将字符串验证为飞行代码（并且 Visual Studio 中有几个附加组件会自动为您执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T14:41:55.573

使用以下代码仅匹配字符串的最后三个字符：

```
bool isMatch = Regex.IsMatch("flightCode", @"[a-zA-Z0-9]{3}$"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T13:42:22.863

我了解您还希望有机会向用户提供有关错误的反馈？就个人而言，我可能会在一个正则表达式中测试所有这些条件，就像上面发布的那样。然后如果它失败了，我会测试它的其他表达式的数量，以获得失败的原因。我更相信正则表达式而不是一些测试迭代。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T13:37:55.427

在长度检查之前，您还可以进行空检查，具体取决于此函数如何获取其输入。

在旁注中，我个人觉得消息框很烦人。在显示错误的文本框旁边使用某种标签可能会更好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-21T13:50:39.363

*   第二个3个字符怎么样？你不测试那些
*   第一个 3 必须是“美国字母”？不能是任何其他语言环境？（如“é”，或中文/日文/希伯来文/等）

改进： * 你可以跳过正则表达式，因为你会做 char.IsLetter 无论如何。您还可以为第二个 3 个字符添加 char.IsLetterOrDigit（如果这 3 个必须是数字，则为 char.IsDigit）* 也可以在您的 for 失败时剪切“else”分支并抛出一条错误消息，并给出所需的格式一般（“航班代码必须为 6 个字符长、3 位数字和 3 个数字，例如 ABC123”）。这样你可以加快一点，因为你只会测试一次值（if-then-else）

# c++ - Socket printing weird

> ID：16131677
> 
> 赞同：1
> 
> 时间：2013-04-21T13:34:39.107
> 
> 标签：c++, sockets

I am brand new to using sockets in the winapi, but I have this code and I am trying to print all data coming from a socket, but when I try printing it it comes out as a jumbled mix of symbols what am I doing wrong. I have looked around for examples on how to do this but none of the examples show how to print the data after it is collected from the buffer.

```
do 
{
#define DEFAULT_BUFLEN 512
int recvbuflen = DEFAULT_BUFLEN;
char recvbuf[DEFAULT_BUFLEN];
recv(ConnectSocket, recvbuf, recvbuflen, 0);
printf("%.*s", recvbuflen, recvbuf);
} 
while (iResult > 0); 
```

ok guys i have changed my code to this

```
do 
{
#define DEFAULT_BUFLEN 1000000
int recvbuflen = DEFAULT_BUFLEN;
char recvbuf[DEFAULT_BUFLEN];
ssize_t len = recv(ConnectSocket, recvbuf, recvbuflen, 0);
recv(ConnectSocket, recvbuf, recvbuflen, 0);
printf("%.*s", recvbuflen, recvbuf);
} 
while (iResult > 0); 
```

but now it doesnt seem to print all information from socket just first part

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:16:46.920

正如 Valeri 和其他人所说，您**不应**忽略`recv`. 但是，默认情况下，所有套接字都是阻塞的，我没有看到您使用的是非阻塞套接字。所以除非连接被切断，否则`recv`会等到缓冲区满后再返回。我认为这不会导致您的问题。

如果您通过网络发送随机数据，那么您得到的结果正是人们所期望的。任何大于 127 的字符值称为[扩展 ASCII](http://en.wikipedia.org/wiki/Extended_ASCII)可能看起来是一个奇怪的符号。低于 32 的字符值（也称为[控制字符](http://en.wikipedia.org/wiki/ASCII#ASCII_control_characters)）可能会导致发出蜂鸣声或字符擦除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T13:43:19.757

您忽略了收到的内容的长度：

```
ssize_t len = recv(ConnectSocket, recvbuf, recvbuflen, 0);
if (len > 0)
{
    printf("%.*s", (int)len, recvbuffer);
}
else
{
    break; // error or EOF
} 
```

# servicebus - Windows 1.0 的服务总线错误

> ID：16131681
> 
> 赞同：3
> 
> 时间：2013-04-21T13:34:50.087
> 
> 标签：servicebus

我已经开始研究 Windows 1.0 的服务总线，以便为我们的应用程序创建本地服务总线，并且我按照此处显示的示例首次尝试使用该总线：http: [//msdn.microsoft.com/en-us/库/windowsazure/jj542433(v=azure.10).aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj542433(v=azure.10).aspx)

但是，当我运行示例时，我收到以下错误：

> 访问“https://{machineName.domainName}/ServiceBusDefaultNamespace/$STS/Windows/”时，令牌提供程序无法提供安全令牌。令牌提供程序返回消息：“底层连接已关闭：发送时发生意外错误。”

内部例外：

> 底层连接已关闭：发送时发生意外错误。

我搜索的所有内容都与本地生成的证书等问题有关。不是那样的。使用“https://{machineName.domainName}:9355/ServiceBusDefaultNamespace/”浏览 STS 会返回队列/主题的原子提要。有什么帮助推动这件事至少让样本工作吗？

源代码（与上面的示例链接 99% 相同；只有风格差异和 ServerFQDN 地址，它是本地的并且与安装数据匹配）：

```
using System;
using Microsoft.ServiceBus;
using Microsoft.ServiceBus.Messaging;

namespace ServiceBus1
{
    class Program
    {
        private const string ServerFQDN = "{machineName}.{domain}.net";
        private const int HttpPort = 9355;
        private const int TcpPort = 9354;
        private const string ServiceNamespace = "ServiceBusDefaultNamespace";

        static void Main( string[] args )
        {
            var connBuilder = new ServiceBusConnectionStringBuilder
                {
                    ManagementPort = HttpPort,
                    RuntimePort = TcpPort
                };
            connBuilder.Endpoints.Add( new UriBuilder { Scheme = "sb", Host = ServerFQDN, Path = ServiceNamespace }.Uri );
            connBuilder.StsEndpoints.Add( new UriBuilder { Scheme = "https", Host = ServerFQDN, Path = ServiceNamespace }.Uri );

            var messageFactory = MessagingFactory.CreateFromConnectionString( connBuilder.ToString() );
            var namespaceManager = NamespaceManager.CreateFromConnectionString( connBuilder.ToString() );

            const string queueName = "ServiceBusQueueSample";

            if ( namespaceManager == null )
            {
                Console.WriteLine( "\nUnexpectedError: NamespaceManager is NULL" );
                return;
            }

            if ( namespaceManager.QueueExists( queueName ) )
            {
                namespaceManager.DeleteQueue( queueName );
            }

            namespaceManager.CreateQueue( queueName );

            var myQueueClient = messageFactory.CreateQueueClient( queueName );

            try
            {
                // send a message to the queue
                var sendMessage = new BrokeredMessage( "Hello World!" );
                myQueueClient.Send( sendMessage );

                // receive the message from the queue
                var receivedMessage = myQueueClient.Receive( TimeSpan.FromSeconds( 5 ) );

                if ( receivedMessage != null )
                {
                    Console.WriteLine( "Message received: Body = {0}", receivedMessage.GetBody<string>() );
                    receivedMessage.Complete(); // releases msg lock and removes from queue?
                }
            }
            catch ( Exception e )
            {
                Console.WriteLine( "Unexpected exception {0}", e );
            }
            finally
            {
                if ( messageFactory != null )
                {
                    messageFactory.Close();
                }
            }

            Console.WriteLine( "Press ENTER to clean up and exit." );
            Console.ReadLine();
        }
    }
} 
```

# windows-7 - cx_freeze pyqt4 示例（“\samples\PyQt4”）不起作用

> ID：16131684
> 
> 赞同：4
> 
> 时间：2013-04-21T13:35:11.870
> 
> 标签：windows-7, 64-bit, pyqt4, cx-freeze, python-3.3

我的系统：

Windows 7、x64、Python 3.3.1、使用安装程序的 PyQt4 4.10 (py3.3-Qt5.0.1-x64)、cx_freeze 4.3.1 (win-amd64-py3.3)

什么有效：

*   在终端中导航到`..python33\lib\site-packages\cx_freeze\samples`文件夹（以及相应的示例文件夹）并执行`python setup.py build`

*   这适用于：`\simple`和`\tkinter`（只是为了确保我没有在其他地方出错）

问题：

*   但我的目标是获得我的 PyQt4-Project 的可执行文件/包，所以我尝试了相同的`\PyQt4`示例（顺便说一句。PyQt4app.py 完美地作为 python 应用程序工作）

*   `\PyQt4 >>> python setup.py build`最初不起作用：运行生成的`PyQt4app.exe`结果会出错，要求输入丢失的包“re”

*   随后我在`setup.py`文件中包含“re”。( `options = {"build_exe" : {"includes" : ["atexit", "re"]}}`)

*   现在它会生成一个 .exe 而不会引发错误 - 但运行这个 .exe 不会做任何事情，只是沉默......

*   cx_freeze 似乎找到了正确的依赖关系：`python33.dll`, `Qt5Core.dll`, `Qt5Gui.dll`, `PyQt4.QtCore.pyd`, `PyQt4.QtGui.pyd`（其中包括：sip、unicodedata 等）存在。

这里`setup.py`（不变，除了“重新”包括和评论被删除）

```
import sys

from cx_Freeze import setup, Executable

base = None
if sys.platform == "win32":
    base = "Win32GUI"

setup(
        name = "simple_PyQt4",
        version = "0.1",
        description = "Sample cx_Freeze PyQt4 script",
        options = {"build_exe" : {"includes" : ["atexit", "re"]}},
        executables = [Executable("PyQt4app.py", base = base)]) 
```

有什么建议我哪里出错了吗？哪些额外的信息会有用？

*   顺便提一句。- [docs.python.org/3/faq](http://docs.python.org/3/faq/windows.html#how-do-i-make-an-executable-from-a-python-script)链接到**py2exe** - 但 py2exe**不适用于 Python 3.x**！？

**编辑：**我设法`base = None`通过批处理文件设置和运行 .exe 来获得控制台输出。输出是：（`Failed to load platform plugin "windows". Available platforms are:`输出结束 - 没有列表或任何东西）。

那么在哪里以及如何加载这个插件呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T15:25:11.810

好的 - 我找到了解决方法：

将`qwindows.dll`WITH 其文件夹`\platforms\qwindow.dll`从`..\python33\lib\site-packages\PyQt4\plugins`.exe 所在的文件夹中复制。现在它起作用了。

**编辑：**

我`setup.py`现在看起来像这样，并且似乎也适用于其他情况：

```
import sys

from cx_Freeze import setup, Executable

base = "Win32GUI"
path_platforms = ( "..\..\..\PyQt4\plugins\platforms\qwindows.dll", "platforms\qwindows.dll" )
build_options = {"includes" : [ "re", "atexit" ], "include_files" : [ path_platforms ]}

setup(
    name = "simple_PyQt4",
    version = "0.1",
    description = "Sample cx_Freeze PyQt4 script",
    options = {"build_exe" : build_options},
    executables = [Executable("PyQt4app.py", base = base)]
    ) 
```

# javascript - How to catch F5 key pressed when the mouse is outside my page?

> ID：16131689
> 
> 赞同：2
> 
> 时间：2013-04-21T13:35:53.093
> 
> 标签：javascript, events, dom-events, keypress

How can I catch the `F5` key press when the mouse is outside my page?

For example hovering on a scroll bar, or on an address bar, or on a menu etc.

Because in this case `e.which`, which usually contains `116` for `F5`, contains `undefined`

EDIT: After playing with Alexey Lebedev' jsfiddle I discovered that if the last user click was inside my page, I actually can catch `F5`.

However if the last user click was outside my page, the problem remains.

I would think the browser client area is not in focus, but then it should not get the keypress and should not be refreshed at all.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:13:31.613

如果最后一次用户点击在您的页面之外，例如在地址栏中，刷新页面可能仍然是一个好主意`F5`，但该页面不应该能够窥探您正在输入的 URL，因此不应该t 接收键盘事件。

如果您的目标是防止在刷新时丢失未保存的数据，您可以在`beforeunload`.

# c# - 在边框上使用 DropShadow 调整大小

> ID：16131691
> 
> 赞同：1
> 
> 时间：2013-04-21T13:35:57.117
> 
> 标签：c#, wpf

我正在尝试使用 ResizeGrip，但因为我还需要 DropShadow，所以它会挂在人们看到的边界之外，并且看起来很奇怪。他们有什么办法把它推进去吗？ [http://speedcap.net/sharing/files/2c/5b/2c5b4e125f624f9f21f9f6b2fef85b50.png](http://speedcap.net/sharing/files/2c/5b/2c5b4e125f624f9f21f9f6b2fef85b50.png) 我有一个窗口，然后是网格，然后是带有 DropShadow 的边框，然后是包含我的内容的网格。 [http://pastebin.com/yTjNUXux](http://pastebin.com/yTjNUXux)

# c# - 设置下一个和上一个属性

> ID：16131699
> 
> 赞同：-1
> 
> 时间：2013-04-21T13:36:54.077
> 
> 标签：c#

我有一个由 Tokeniser 生成的令牌列表。

```
List<Token> tokenList = new List<Token>(); 
```

这是令牌类。

```
public class Token
{
    public Tokens TokenName { get; set; }

    public string TokenValue { get; set; }

    public Token Previous {
        get; set;
    }

    public Token Next {
        get; set;
    }

    public Token(Tokens name, string value)
    {
        TokenName = name;
        TokenValue = value;
    }
} 
```

而且我需要设置列表中每个标记的`Next`and`Previous`属性，但要避免它们指向`NEWLINE`or `WHITESPACE`or`TABSPACE`标记，而是使用它们的下一个标记。

这是我的代码。

```
Token token = null;

foreach (Token tkn in tokenList)
{
    if (token != null)
    {
        switch (token.TokenName)
        {
            case Tokens.NEWLINE:
            case Tokens.WHITESPACE:
            case Tokens.TABSPACE:
                break;
            default:
                switch (tkn.TokenName)
                {
                    case Tokens.NEWLINE:
                    case Tokens.WHITESPACE:
                    case Tokens.TABSPACE:
                        break;
                    default:
                        tkn.Previous = token;
                        token.Next = tkn;
                        token = tkn;
                        break;
                }
                break;
       }
    }
    else
    {
        token = tkn;
    }
} 
```

但是，它似乎不起作用。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:41:27.743

认为我使用了很多不必要的代码。谢谢@Lee，我已经使用了调试器。设置断点表明很多代码不是简单地执行的。这是我的工作代码。

```
Token token = null;

foreach (Token tkn in tokenList)
{
    switch (tkn.TokenName)
    {
        case Tokens.NEWLINE:
        case Tokens.WHITESPACE:
        case Tokens.TABSPACE:
            break;
        default:
            tkn.Previous = token;
            if (token != null)
                token.Next = tkn;
            token = tkn;
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T15:58:18.370

我希望这可以解决您的问题。请检查

```
class Program
{
    public enum TokenName { NEWLINE, WHITESPACE, TABSPACE, A, B, C};
    public class Token
    {
        public TokenName TokenName { get; set; }
        public string TokenValue { get; set; }

        public Token Previous
        {
            get;
            set;
        }

        public Token Next
        {
            get;
            set;
        }

        public Token(TokenName name, string value)
        {
            TokenName = name;
            TokenValue = value;
        }
    }

    static void Main(string[] args)
    {
        int count = 0, j=0;
        Token tkn = null;
        List<Token> tokenList = new List<Token>();

        tokenList.Add(new Token(TokenName.NEWLINE, "7"));
        tokenList.Add(new Token(TokenName.A, "1"));
        tokenList.Add(new Token(TokenName.B, "2"));
        tokenList.Add(new Token(TokenName.TABSPACE, "5"));
        tokenList.Add(new Token(TokenName.C, "3"));
        tokenList.Add(new Token(TokenName.WHITESPACE, "8"));

        foreach (Token tken in tokenList)
        {
            Console.WriteLine(tken.TokenName.ToString() +" "+  tken.TokenValue.ToString());
        }

        for(int i=0; i<tokenList.Count; i++)
        {
            switch (tokenList[i].TokenName)
            {
                case TokenName.NEWLINE:
                case TokenName.TABSPACE:
                case TokenName.WHITESPACE: break;

                default:

                    count++;
                    if (tkn == null)
                    {
                        tkn = tokenList[i];
                        j=i;                            
                    }

                    if (count > 1)
                    {
                        tokenList[i].Previous = tkn;
                        tkn.Next = tokenList[i];
                        tkn = tokenList[i];
                        count++;
                    }
                    break;                                        
            }                          
        }

        tkn = tokenList[j];
        do
        {
            Console.WriteLine(tkn.TokenName.ToString() +" "+ tkn.TokenValue.ToString());
            tkn = tkn.Next;                
        }
        while (tkn != null);

        Console.ReadLine();
    }
} 
```

# html - 解析 HTML 和更改锚点仅适用于每个跨度上的第一个锚点

> ID：16131701
> 
> 赞同：0
> 
> 时间：2013-04-21T13:36:58.130
> 
> 标签：html, domparser

我想替换 H​​TML 上的每个锚点并使用此代码，但似乎缺少一些东西：

```
foreach($html->find('div') as $dict) {
    $dict->find('SPAN', 0)->find('A', 0)->href = "link.php?" . $dict->find('SPAN', 0)->find('A', 0)->innertext;
} 
```

HTML结构如下：

```
<DIV>
    <SPAN> 
        Text text text <A HREF="link1.php">LINK_A</a>, 
        text text <A HREF="link1.php">LINK_B</a>.
    </SPAN>
</DIV>
... 
```

我应该用该代码做的是将html上的所有锚点更改为：

```
<DIV>
    <SPAN> 
        Text text text <A HREF="link.php?LINK_A">LINK_A</a>, 
        text text <A HREF="link.php?LINK_B">LINK_B</a>.
    </SPAN>
</DIV>
... 
```

但是该代码仅适用于每个跨度上的第一个锚点，例如：

```
<DIV>
    <SPAN> 
        Text text text <A HREF="link.php?LINK_A">LINK_A</a>, 
        text text <A HREF="link1.php">LINK_B</a>.
    </SPAN>
</DIV>
... 
```

我尝试将代码修改为：

```
foreach($html->find('div') as $dict) {
    foreach($dict->find('SPAN', 0)->find('A', 0) as $anchor) {
        $anchor->href = "link.php?" . $anchor->innertext;
    }
} 
```

但它变得最糟糕。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:02:01.903

您声明您只想在这里找到第一个跨度...

```
$dict->find('SPAN', 0)
// The 0 means the first one only I expect 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:02:00.743

您只是循环遍历每个 div，而不是您找到的每个锚标记。您的 JavaScript 代码看起来也非常低效。我不熟悉您使用的方法，但在 jquery 中您可以执行类似的操作

```
$("dic span a").each(function){
    //do something here
    //refer to the anchor tag using $(this)
}) 
```

# jquery - 在 AJAX 获取请求上过滤 XML 结果

> ID：16131703
> 
> 赞同：1
> 
> 时间：2013-04-21T13:37:20.000
> 
> 标签：jquery, html, xml, ajax

我是 AJAX 新手，我正在尝试将可过滤信息从 XML 文档拉到网页的示例放在一起。到目前为止，我正在尝试使用这些过滤的 XML 项创建一个数组，然后将数组中的项拉到页面上。

我的 XML 文档非常简单，我要做的就是显示“类型”为 100 的项目。在服务器端进行此过滤是最佳做法，还是在请求期间/之后进行过滤可以？有谁知道为什么这个脚本不起作用和/或是否有更有效的方法？

这是我的 XML：

```
<items>
    <item id="1">
        <type>100</type>
    <item>
    <item id="2">
        <type>101</type>
    <item>
    <item id="3">
        <type>100</type>
    <item>
    <item id="4">
        <type>102</type>
    <item>
</items> 
```

这是我的脚本：

```
$(document).ready(function(){

    var array = [];

    $.ajax({
        type: "GET",
        url: "text.xml",
        dataType: "xml",
        success: function(xml){
            $(xml).find("item").each(function(){
                if( x == $(this).find("type") == "100"){
                    $(this).push(array);
                }
            });   
    });

    $.each(array, function() {
        $(body).append("<p>" + $(this).attr("id") + "</p>" );
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:42:20.867

尝试

```
$(document).ready(function(){
    $.ajax({
        type: "GET",
        url: "text.xml",
        success: function(xml){
          var items = $(xml).find("item").filter(function(){
              return $('type', this).text() == '100';
          });
          items.each(function(index, item){
              $('body').append("<p>" + $(item).attr("id") + "</p>" );
          });
        }
    });
}); 
```

演示：[Plunker](http://plnkr.co/edit/N7PxSNJt3VkjecTmWQep?p=preview)

***注意：***你的xml有问题，结束标签for`item`不对，应该是`</item>`

# java - 如果 bean 之前作为关系加载，则集合未加载

> ID：16131704
> 
> 赞同：2
> 
> 时间：2013-04-21T13:37:23.387
> 
> 标签：java, hibernate, persistence

我有 A、B 和 C 类。A 对 B（多单）有一个属性，B 对 C（单单）有一个属性。这些类如下所示（相关属性的缩写）：

```
class A {
    [...]
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "fkb", nullable = false)
    private B b;
    [...]
}

class B {
    [...]
    @OneToMany(mappedBy = "b")
    @Cascade(value = { CascadeType.ALL })
    private Set<C> cs;

    public Set<C> getCs() {
    return cs;
    }
    [...]
}

class C {
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "fkb", nullable = false)
    private B b;
} 
```

现在的问题是，根据我加载 As 和 Bs 的顺序，B 中的 Cs 集合不再起作用：

```
// outputs correct count of Cs per B
List<B> bs = session.createCriteria(B.class).list();
for (B b : bs) {
  System.out.println(b.getCs().size());
}

// outputs always 0
List<A> as = session.createCriteria(A.class).list();
List<B> bs = session.createCriteria(B.class).list();
for (B b : bs) {
  System.out.println(b.getCs().size());
} 
```

我已经完成了以下调试：

*   在第二个代码中休眠触发没有选择语句来加载 Cs
*   在第一个代码中，返回的 B 属于 B 类型，而 C 的集合具有 org.hibernate.collection.PersistentSet 类型
*   在第二个代码中，返回的 B 的类型为 B_$$_javassist_58，而 C 的集合的类型为 java.util.HashSet

我正在使用休眠 3.8.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T10:26:13.630

您可以尝试以下操作：

1）通过 A 访问您的 B 实例：

```
List<A> as = session.createCriteria(A.class).list();
for (A a : as) {
    for(C c : a.getB().getCs()){
        System.out.println(c);
    }
} 
```

2) 使用此标准加载 B ：

```
List<B> bs = session.createCriteria(B.class).setFetchMode("cs", FetchMode.EAGER).list();
for (B b : bs) {
  System.out.println(b.getCs().size());
} 
```

编辑：您认为您的项目有可能以不同的方式查询您的数据库吗？例如，你可以试试这个（使用 HQL）：

```
List<B> bs = getSession().createQuery("Select b From B b").list(); 
```

# php - 输出用户消息后重定向PHP页面

> ID：16131707
> 
> 赞同：6
> 
> 时间：2013-04-21T13:37:49.100
> 
> 标签：php, redirect, header, output

我试图在成功执行后重定向页面。但是，我想在重定向完成时向用户显示一条消息（例如“已更改。重定向...”）。在页面输出后更改`header`变量会导致 PHP 出错，我知道这一点。我的问题是，我该怎么做？

我当前的代码类似于

```
// ... execution code
echo 'Changes made successfully. Now redirecting...';
header('Location: index.php'); 
```

这不起作用。我还看到了关于 SO 的答案，建议我分别在页面的开头和结尾使用`ob_start()`和。`ob_flush()`但这也没有解决我的问题，我仍然得到错误。

注意我只需要使用 PHP，我不需要 JavaScript 进行重定向。

**编辑：**我最终使用 JavaScript 进行重定向，因为我需要在重定向之前向用户输出一些有用的消息，而单独的 PHP 并不是最好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:42:49.900

首先，你不能在 echo 或任何输出之后使用“header”。第二，为什么你需要 php 呢？您可以使用 javascript 或最好的，只需将其放入 html 中，就像这里所说的[那样](http://www.internetofficer.com/seo/html-redirect/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-11T04:35:47.257

设置标题后回显。

```
header("refresh:1;url=test.php"); 
echo 'this is a test';
exit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-16T23:18:41.973

所有三种流行方法重定向的缺点

```
 header('Location:$url'); 
 echo "<meta http-equiv='refresh' content='3;$url>";
 echo "<body onload='window.location=$url'>"; 
```

是您需要在页面的任何部分显示给用户**之前决定可能的重定向。**当决策过程很耗时时，用户会在空白页上呆住。我将**延迟重定向**与 Javascript OnLoad 事件一起使用，该事件在页面顶部声明，但仅当 id='Redirect' 的隐藏对象稍后在 HTML 正文中的任何位置回显时，它才会执行实际重定向。

```
echo "<html><body onload='if (typeof(Redirect)!=undefined) 
setTimeout(function()
    {window.location=document.getElementById(\"Redirect\").value},3000);'>";
echo $HtmlBody; echo $FormToFill;flush();
if (CheckReceivedDataFailed()) echo "Wrong data, please fill the form again";
else echo "<input type='hidden' id='Redirect' value='$url'>
           Thanks, youll be redirected in 3 sec";
echo "</body></html>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T13:39:12.947

```
header( "refresh:5;url=wherever.php" ); 
```

您可以在 5 秒后将页面重定向到 where.php。请看这个问题：[Page redirect after some time PHP](https://stackoverflow.com/questions/6119451/page-redirect-after-certain-time-php)

# delphi - Delphi7，Showmessage命令在应用程序表单出现之前执行

> ID：16131715
> 
> 赞同：3
> 
> 时间：2013-04-21T13:38:28.243
> 
> 标签：delphi, action, message

我想知道为什么在应用程序表单出现之前执行命令“showmessage”，我的意思是，每当我运行程序时，首先出现消息，然后是应用程序表单：

```
procedure TForm1.FormCreate(Sender: TObject);
begin
button1.hide;
button2.hide;
image3.picture.loadfromfile('c:\EAS\std.bmp');
showmessage ('Hi');
end;

end. 
```

delphi 做的第一件事就是显示消息“Hi”。然后它会完成其余的工作（表单出现、隐藏按钮、加载图像等）。即使 showmessage 是最后一个，它也会首先执行。如何在表单出现后显示消息，隐藏按钮是否加载图像？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T13:40:57.883

原因是表单在`OnCreate`显示之前已创建（因此被触发）。

**解决方案 1**

一种解决方案是在创建表单时将窗口消息发布到表单。尝试这个：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs;

const
  WM_GREETING = WM_USER + 1;

type
  TForm1 = class(TForm)
    procedure FormCreate(Sender: TObject);
  private
  protected
    procedure WMGreeting(var Message: TMessage); message WM_GREETING;
  public
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  PostMessage(Self.Handle, WM_GREETING, 0, 0);
end;

procedure TForm1.WMGreeting(var Message: TMessage);
begin
  ShowMessage('Created and shown!');
end;

end. 
```

**解决方案 2**

另一种解决方案是利用`OnActivate`事件，每次表单获得键盘焦点时都会调用该事件：`FMessageShown: boolean`向表单类添加一个私有字段。然后，在 中`OnActivate`，如果标志为 false（默认情况下是类的字段），则显示您的消息并将标志设置为 true：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs;

type
  TForm1 = class(TForm)
    procedure FormActivate(Sender: TObject);
  private
    { Private declarations }
    FMessageShown: boolean;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormActivate(Sender: TObject);
begin
  if not FMessageShown then
  begin
    ShowMessage('Created and shown.');
    FMessageShown := true;
  end;
end;

end. 
```

在实践中，这两种方法都可以完美运行。第一个解决方案的缺点是它可能在某种程度上依赖于“实现细节”，而后一个解决方案的缺点非常明显：每次表单重新获得键盘焦点时，您都​​会检查一个标志，即使在表单最初创建几周后也是如此，并且该消息已显示。

**解决方案 3**

一个没有缺点但假设您不需要该`OnActivate`事件用于其他目的的解决方案只是在第一次（因此，仅）执行后“取消分配”事件：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs;

type
  TForm1 = class(TForm)
    procedure FormActivate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormActivate(Sender: TObject);
begin
  ShowMessage('Created and shown.');
  OnActivate := nil;
end;

end. 
```

（但是，如果您将事件替换为，则这种方法可以扩展到您*确实*需要事件用于其他目的的情况。）`OnActivate := nil``OnActivate := MySecondEventHandler`

# ember.js - Ember 访问 IndexController 中的另一个控制器？

> ID：16131716
> 
> 赞同：1
> 
> 时间：2013-04-21T13:38:36.893
> 
> 标签：ember.js

如何在 Ember 的索引控制器中访问另一个控制器？

```
App.IndexController = Ember.ArrayController.extend({
    doSomethingToAnotherController: function(params) { 
            // how do I access another controller other than the index controller here?
        }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:47:52.643

您可以使用`needs`将一个控制器连接到另一个：

```
App.OtherController = Ember.ObjectController.extend({
    //... code here
});

App.IndexController = Ember.ArrayController.extend({
    needs: ['other'],
    doSomethingToAnotherController: function() {
      //you can access the 'other' controller via get for example:
      this.get('controllers.other').doSomething();
    }
}); 
```

这是一个工作小提琴：http: [//jsfiddle.net/e2fXn/](http://jsfiddle.net/e2fXn/)

但是，似乎存在[一个未解决的问题](https://github.com/emberjs/ember.js/issues/2376)，即在循环中使用时会中断`{{#each}}`（这可能与您的`IndexController`extends相关`ArrayController`）。

希望这可以帮助！

# actionscript-3 - 从 Flash 访问未定义的属性到 Flashbuilder

> ID：16131719
> 
> 赞同：0
> 
> 时间：2013-04-21T13:38:45.570
> 
> 标签：actionscript-3, flash, flashbuilder4

搜索了whiled，但我无法在Stack上找到答案，所以我希望有人能帮助我。

我尝试了 Flash prof CS6 和 Flashbuilder，我在 Flash 中创建了一个名为 square_mc 的影片剪辑，并用名称 square 对其进行了实例化。

我已将一个名为 Main.as 的类文件链接到 FLash builder，并在 flash builder 中编写：

```
 package
{
    import flash.display.MovieClip;
    import flash.events.MouseEvent;

    public class Main extends MovieClip
    {
        public function Main()
    {
            super();

            circle.addEventListener(MouseEvent.CLICK, onToolClick);
    }

    function onToolClick(event:MouseEvent):void{
        trace("klickade på ontoolclick");
        }

    }
} 
```

在 Flash builder 中，我收到警告“访问未定义的属性圈”但是当我运行它时，它就像一个魅力。

我猜它只是 Flashbuilder 不知道我已经用 Flash 中的名称 circle 实例化了它，因此给出了警告。

有没有办法让 Flashbuilder 明白它的存在并且可以工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:05:15.730

**选项 1：** 为了解决这个问题，我通常在 Flash CS6 的动作脚本设置（文件 > 动作脚本设置）中取消选中“自动声明舞台实例”。然后在 Flash Builder 中声明您在 Flash CS6 中的舞台上的 MovieClip，如下所示：

```
package
{
    import flash.display.MovieClip;
    import flash.events.MouseEvent;

    public class Main extends MovieClip
    {
        public var circle:MovieClip; // manually declare circle

        public function Main()
    {
            super();

            circle.addEventListener(MouseEvent.CLICK, onToolClick);
    }

    function onToolClick(event:MouseEvent):void{
        trace("klickade på ontoolclick");
        }

    }
} 
```

**选项 2：** 如果您不想手动声明舞台上的所有电影，选项 2 是创建对 circle 的引用作为 Flash Builder 的单独变量：

```
package
{
    import flash.display.MovieClip;
    import flash.events.MouseEvent;

    public class Main extends MovieClip
    {
        private var _circle:MovieClip;

        public function Main()
    {
            super();
            _circle = this.getChildByName( "circle" ) as MovieClip;
            _circle.addEventListener(MouseEvent.CLICK, onToolClick);
    }

    function onToolClick(event:MouseEvent):void{
        trace("klickade på ontoolclick");
        }

    }
} 
```

这应该会阻止 Flash Builder 向您提供错误消息 :)

# jailbreak - 在 THEOS/LOGOS 中的 Hook 块内的类的条件调用

> ID：16131723
> 
> 赞同：0
> 
> 时间：2013-04-21T13:38:57.170
> 
> 标签：jailbreak, theos, logos

在我的 THEOS 调整中，我正在挂钩一个类并成功调用它的一个方法。

我的问题是方法名称在我正在调整的应用程序更新后发生了变化。

在旧版本中，有问题的方法采用一个参数（方法：arg1），然后更新为采用 2 个参数（方法：arg1:arg2）。现在我的代码看起来像这样

```
%hook className

- (void)method:arg1 {
    //
}

- (void)method:arg1:arg2 {
    //
}

%end 
```

此设置在新版本上运行良好，但会导致应用在旧版本中崩溃。有没有一种方法可以根据捆绑版本（[[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleVersion"]）有条件地调用其中一种方法？

我玩过#if 和#endif，但没走多远。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T21:03:51.527

如果 endif 是宏编译时，而不是您需要的运行时。

我也在学习 theos 徽标，但我认为您应该使用 %group 和 %ctor{} 有条件。

请参阅此处：[如何使用 Theos / Logos 中的 %group 功能？](https://stackoverflow.com/questions/12508442/how-do-i-use-the-group-feature-in-theos-logos)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T16:46:45.910

干杯

```
%group A
%hook className

- (void)method:arg1 {
    //
}

%end
%end
%group B
%hook className

- (void)method:arg1:arg2 {
    //
}

%end
%end
%ctor{
if([anObject respondsToSelctor:@selector(method:arg1:arg2)]){
%init(B)

}
else{
%init(A)
}
```

# nsis - how to remove the bottom left margin of side-panel in nsis script?

> ID：16131724
> 
> 赞同：-2
> 
> 时间：2013-04-21T13:39:03.383
> 
> 标签：nsis

I need to make an installer by using nsis script. In custom screen there is a margin at the bottom left corner of side panel. It's caused by the line above the "Back","Next" and "Cancel" button. How to remove it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T05:58:26.967

使用 ResHacker 工具并使用 UI（用户界面）编辑适当的 .exe 文件。

UI 文件存储在 Contrib\UIs 文件夹中。

要编辑的 UI 文件取决于您使用的安装程序类型（经典与现代等）

# c# - 我的秒表错误 (GetTimestamp)

> ID：16131725
> 
> 赞同：-1
> 
> 时间：2013-04-21T13:39:08.713
> 
> 标签：c#, stopwatch

我有这个代码，它将是一个秒表。

为什么不能通过实例引用访问？

错误：无法使用实例引用访问成员“System.Diagnostics.Stopwatch.GetTimestamp()”；而是用类型名称来限定它。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;
using System.Diagnostics;

namespace Pocitadlo
{
public partial class Form1 : Form
{
    public int minutys = 0, test = 0;
    Thread sekund;
    TimeSpan ts;
    Stopwatch stopky = new Stopwatch();

    public Form1()
    {
        InitializeComponent();
    }

    public void START_Click(object sender, EventArgs e)
    {
            sekund = new Thread(Sekund_pocet);
            this.START.Visible = false;
            this.STOP.Visible = true;
            sekund.Start();
    }

    public void Sekund_pocet()
    {
        stopky.Start();
        stopky.Stop();
        ts = stopky.GetTimestamp();
        string time = String.Format("{0:00}:{1:00}:{2:00}.{3:00}", ts.Hours, ts.Minutes, ts.Seconds, ts.Milliseconds / 10);
        cas.BeginInvoke(new Action(() => cas.Text = Convert.ToString(time)));
    }

    private void STOP_Click(object sender, EventArgs e)
    {
        this.STOP.Visible = false;
        this.START.Visible = true;
        test = 1;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T13:42:05.303

[GetTimestamp()](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.gettimestamp.aspx)是一个静态方法，因此是错误的。你应该这样做`ts = Stopwatch.GetTimestamp()`。

# c++ - Copy contructor error with no obvious copy

> ID：16131728
> 
> 赞同：2
> 
> 时间：2013-04-21T13:39:16.537
> 
> 标签：c++, iostream, stringstream, ostringstream

I'm attempting to build a bit of simple logging functionality from scratch, with a stream like '<<' interface, and am running into a bit of compiler issue. Here is the basics of my code:

```
#include <string.h>
#include <sstream>
#include <iostream>

class Logger
{
public:
    class Buffer
    {
    public:
        Buffer(Logger &parent) : mPar(parent)
        {
        }

        ~Buffer(void)
        {
            mPar.endline(os);
        }

        template<class T>
        Buffer& operator<<(const T& x)
        {
            os << x;
            return *this;
        }

        Logger& mPar;
        std::ostringstream os;
    };

    Buffer write(void)
    {
        return Buffer(*this);
    }

    void endline(std::ostringstream& os)
    {
        std::cout << os.str() << std::endl;
    }
};

int main(int argc, char **argv)
{
    Logger log;

    log.write() << "fred" << 3 << "bob";
} 
```

The errors I'm getting are:

```
In file included from /usr/include/c++/4.6/ios:45:0,
                 from /usr/include/c++/4.6/istream:40,
                 from /usr/include/c++/4.6/sstream:39,
                 from test.cpp:2:
/usr/include/c++/4.6/bits/ios_base.h: In copy constructor ‘std::basic_ios<char>::basic_ios(const std::basic_ios<char>&)’:
/usr/include/c++/4.6/bits/ios_base.h:788:5: error: ‘std::ios_base::ios_base(const std::ios_base&)’ is private
/usr/include/c++/4.6/bits/basic_ios.h:64:11: error: within this context
In file included from test.cpp:2:0:
/usr/include/c++/4.6/sstream: In copy constructor ‘std::basic_ostringstream<char>::basic_ostringstream(const std::basic_ostringstream<char>&)’:
/usr/include/c++/4.6/sstream:373:11: note: synthesized method ‘std::basic_ios<char>::basic_ios(const std::basic_ios<char>&)’ first required here
/usr/include/c++/4.6/streambuf: In copy constructor ‘std::basic_stringbuf<char>::basic_stringbuf(const std::basic_stringbuf<char>&)’:
/usr/include/c++/4.6/streambuf:782:7: error: ‘std::basic_streambuf<_CharT, _Traits>::basic_streambuf(const __streambuf_type&) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_streambuf<_CharT, _Traits>::__streambuf_type = std::basic_streambuf<char>]’ is private
/usr/include/c++/4.6/sstream:60:11: error: within this context
/usr/include/c++/4.6/sstream: In copy constructor ‘std::basic_ostringstream<char>::basic_ostringstream(const std::basic_ostringstream<char>&)’:
/usr/include/c++/4.6/sstream:373:11: note: synthesized method ‘std::basic_stringbuf<char>::basic_stringbuf(const std::basic_stringbuf<char>&)’ first required here
test.cpp: In copy constructor ‘Logger::Buffer::Buffer(const Logger::Buffer&)’:
test.cpp:8:8: note: synthesized method ‘std::basic_ostringstream<char>::basic_ostringstream(const std::basic_ostringstream<char>&)’ first required here
test.cpp: In member function ‘Logger::Buffer Logger::write()’:
test.cpp:33:22: note: synthesized method ‘Logger::Buffer::Buffer(const Logger::Buffer&)’ first required here 
```

From what I've been able to find so far, the errors are because you can't call the copy constructor on ostringstream. As far as I can tell though, I'm not calling a copy constructor directly, and I'm not copying Buffer, only constructing it in the 'return' statement.

The other interesting thing is that this code compiles fine under Visual Studio 2010 where I knocked it up before integrating it into my application (which is compiled using GCC 4.6.3).

Have I interpreted the issue correctly, and if so - where is the implicit copy, and how do eliminate it?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T13:47:32.997

第一个问题是[**`std::ostringstream`不可**](https://stackoverflow.com/questions/3442520/how-copy-from-one-stringstream-object-to-another-in-c)复制的，您在创建`Buffer`.

`Buffer`您在此`return`声明中创建副本的原因：

```
return Buffer(*this); 
```

是您的类`Buffer`没有隐式生成的移动构造函数。而它之所以没有，是因为它`Buffer`有一个用户定义的析构函数，它禁止隐式生成移动构造函数。

您可以明确定义一个：

```
 Buffer(Buffer&& b)
        :
        mPar(b.mPar),
        os(std::move(b.os))
    {
    } 
```

但是你应该知道标准库的一些实现并不完全兼容，并且没有[实现`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream/basic_ostringstream).

# javascript - jQuery datepicker overlaps input, when weeks number is increased in calendar

> ID：16131729
> 
> 赞同：1
> 
> 时间：2013-04-21T13:39:16.870
> 
> 标签：javascript, jquery, datepicker, jquery-ui-datepicker

[**JSFiddle DEMO**](http://jsfiddle.net/CEBzw/)
I have input with jQuery datepicker (that opens up on focus).

```
$( "#datepicker" ).datepicker() 
```

![enter image description here](https://i.stack.imgur.com/8Twaa.jpg)
when we choose another month, that have greater number of weeks, datepicker overlaps input.

![enter image description here](https://i.stack.imgur.com/AWkkI.jpg)
I can always open down datepicker, and this problem will be resolved, but it's not good solution.
Do you know another solution for this problem?

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:12:11.903

这是诀窍：

```
$(document).on('click','.ui-datepicker-prev, .ui-datepicker-next',function(){
    var height = $('.ui-datepicker').height();
    if(height > 245) {
        $('.ui-datepicker').css('top','20px');
    } else {
        $('.ui-datepicker').css('top','50px');
    }
}); 
```

`datepicker`因此，基本上，当您单击`next`或`previous`箭头并`top`根据计算出的高度调整 css 值时，此代码将获得您的高度。

**[小提琴](http://jsfiddle.net/CEBzw/1/)**

# c# - Troubles with MVVM binding

> ID：16131731
> 
> 赞同：0
> 
> 时间：2013-04-21T13:39:20.057
> 
> 标签：c#, wpf, wcf, mvvm, ado.net

I am new to mvvm, basicaly its my first attempt. At now I have a WPF window, ado.net to connect to my database, and wcf service to make connection between viewmodel and database. The problem is that I cant add data from my view to database. here some code My wcf methods:

```
[OperationContract]
    public void ManageOrder(Order order, EntityState state)
    {
        using (var context = new SvLaserEntities())
        {
            context.Attach(order);
            context.ObjectStateManager.ChangeObjectState(order, state);
            context.SaveChanges();
        }

    }
    [OperationContract]
    public void ManageClient(Client client, EntityState state)
    {
        using (var context = new SvLaserEntities())
        {
            context.Attach(client);
            context.ObjectStateManager.ChangeObjectState(client, state);
            context.SaveChanges();
        }

    } 
```

A command for binding to button:

```
public ICommand AddClient
    {
        get
        {
            if ((addClient == null) && (CurrentClient != null))
            {
                addClient = new RelayCommand(() => this.client.ManageClientAsync(CurrentClient, EntityState.Added));
            }
            return addClient;
        }
    } 
```

And xaml code for one of textboxes:

```
<TextBox HorizontalAlignment="Left" Height="28" 
                         Margin="469,50,0,0" TextWrapping="Wrap" 
                         VerticalAlignment="Top" Width="160"
                         Text="{Binding CurrentClient.Name, Mode=Default, UpdateSourceTrigger=PropertyChanged}"
                         /> 
```

Direct problem is when I am filling the textboxes and clicking to add them, I am catching null reference exception here, at client parameter:

```
public void ManageClient(Client client, EntityState state) 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:00:39.353

在您的 xaml 中更改

绑定到 TWOway 中的模式属性，例如

```
 <TextBox Text="{Binding CurrentClient.Name, Mode=TwoWay,  UpdateSourceTrigger=PropertyChanged}" /> 
```

请确保在 viewmodel 和 model 中实现了 INotifyPropertyChanged

# jquery - 使用动画jquery时css宽度不显示正确

> ID：16131732
> 
> 赞同：0
> 
> 时间：2013-04-21T13:39:27.480
> 
> 标签：jquery, css

我有一个固定位置的 div 并使用 jquery 的动画功能在这个位置增长这个 div 并进入这个隐藏 div 我有其他 div 在这种情况下显示信息 mobile_title

```
<style>

#mobile_col_left
{
  position:fixed;
  float:left;
  width:5%;
  height:150%;
  background-color:#000;
  z-index:9999999;
}

#mobile_menu_title
{
  position:relative;
  width:97%;
  height:38px;
  line-height:38px;
  margin:auto;
  background-color:#ccc;
  padding-legt:1%;
  font-family:Arial;
  color:#000;
  font-size:15px;
}

</style>

$("#mobile_col_left").animate({ width: '65%' }, "slow"); 
```

mobile_col 加载在 mobile_menu_title 内，当我加载 mobile_col 从 5% 开始时，人们可以看到这个宽度，当我激活动画时，div 增长到 65%，但在 div 内部，名为 mobile_menu_title 的 div 也没有增长97% , 总是保持其他尺寸的宽度

问题是为什么不增长名为 mobile_title 的 div ，当我假设增长时增加并覆盖其他 div 的所有大小，但没有发生这种情况

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:01:05.213

你的问题不是很清楚。

只是说父中的相对位置对固定位置的孩子没有任何作用，您可以开始这样想。

# python - NameError In Django View

> ID：16131733
> 
> 赞同：-1
> 
> 时间：2013-04-21T13:39:28.983
> 
> 标签：python, django, django-models, django-views

I have a model called `Finhall` and fields under it. But in my view I want to get the value of `state` field the user clicked on in order to filter other places in that same state. After trying this codes, I'm getting the below error:

```
 global name 'finhall' is not defined 
```

Models

```
class Finhall(models.Model):
    user=models.ForeignKey(User)
    name=models.CharField(max_length=250, unique=True)
    address=models.CharField(max_length=200)
    city=models.CharField(max_length=200)
    state=models.CharField(max_length=200, help_text='Las vegas')

    def __unicode__(self):
        return u'%s' % (self.name) 
```

Views

```
def homedetail(request,finhall_id,slug):
     qs=Finhall.objects.all()

     try:
         post=qs.get(id=finhall_id,slug=slug)
     except Finhall.DoesNotExist:
         post=None

     if post:
        similar_posts=qs.filter(finhall.state) #this line is causing the error

     else:
        similar_posts=Finhall.objects.none()
     return render_to_response('homedetail.html',{'post':post,'similar_posts':similar_posts},context_instance=RequestContext(request)) 
```

I've been trying to fix this error all day yet no success!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T06:54:59.653

下面是我修复的行：

```
 similar_posts=qs.filter(state=post.state) 
```

感谢马蒂亚斯的想法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:41:21.870

您是否已导入库？

```
from app.models import Finhall 
```

复制您的模型以获取更多信息。

# entity-framework - Entity Framework app.config settings. The default factory and value= with EF6.0

> ID：16131735
> 
> 赞同：9
> 
> 时间：2013-04-21T13:39:45.293
> 
> 标签：entity-framework

```
<entityFramework>
   <defaultConnectionFactory 
       type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
         <parameter value="v11.0" />           
      </parameters>
   </defaultConnectionFactory>
</entityFramework> 
```

**EDIT: QUESTION was reworded/reworked.**

**What does `<parameter value="v11.0">` mean ? Or better Said Why Have just a Db Value? What about using a full Data Source ? And what is LocalDbConnectionFactory implying**

These defaults are hard for me to understand.

Using the Sql default connection factory and parameter used SQL server LocalDbConnectionFactory did not work.

This did work:

```
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
  <parameters>
    <parameter value="Data Source=localhost; Integrated Security=True; MultipleActiveResultSets=True" /> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-21T13:53:35.463

> 配置部分允许您指定 Code First 应使用的默认连接工厂来定位要用于上下文的数据库。仅当未将连接字符串添加到上下文的配置文件中时，才使用默认连接工厂。

以下配置将导致 Code First 将 LocalDB 实例用于未设置显式连接字符串的上下文。

```
<entityFramework>
  <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
    <parameters>
      <parameter value="v11.0" />
    </parameters>
  </defaultConnectionFactory>
</entityFramework> 
```

**更新：** v11.0 是 LocalDb 的版本。

[更多信息。](http://odetocode.com/blogs/scott/archive/2012/08/15/a-troubleshooting-guide-for-entity-framework-connections-amp-migrations.aspx)

# login - Submit "Test notes" or "instructions WP8 app submission - Where can I find them?

> ID：16131738
> 
> 赞同：3
> 
> 时间：2013-04-21T13:40:05.187
> 
> 标签：login, submit, windows-phone, store

Short version: Can't find the field "Test Notes" or "Instructions" where I can include log in credentials for the app I'm submitting. Where can I find the fields?

Long version: My verification faild when I submitted a WP8 app, because I didn't include log in credentials so they could test the app. This simply because I didn't find any place to put them (don't want them to be public). So I got feedback from MS:

"Comments: The application cannot be tested for compliance for Windows Phone Application Certification Requirements due to geographic, hardware, and/or software limitation(s). Please provide valid test account credentials with resubmission."

But I just can't find where to put them! So I read the guidelines:

"If your app requires credentials, you must include them in the Test notes or instructions field when submitting your app on the Windows Phone Dev Center."

As I said, where can I find "Test notes" or "instructions"? Where are they?

Thanks!

// Tibbelit

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T14:04:11.580

答案可在此处找到：在上传并描述您的 XAP 下，单击更多 Xap 选项。

# c# - Replace `Page` with `WinRTXamlToolkit.Controls.AlternativePage`

> ID：16131740
> 
> 赞同：2
> 
> 时间：2013-04-21T13:40:20.270
> 
> 标签：c#, xaml, windows-runtime, winrt-xaml

I'm attempting to use [Windows RT XAML Toolkit](http://winrtxamltoolkit.codeplex.com/) so that I can have access to the `TreeView` control. I've created a new BlankApp that contains a MainPage containing XAML similar to this:

```
<Page
    x:Class="BlankApp.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:BlankApp"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">

    </Grid>
</Page> 
```

I want to change this `Page` to an `WinRTXamlToolkit.Controls.AlternativePage`. I've modified the XAML to be:

```
<xc:AlternativePage
    x:Class="BlankApp.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:xc="using:WinRTXamlToolkit.Controls"
    xmlns:local="using:BlankApp"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">

    </Grid>
</xc:AlternativePage> 
```

And modified the MainPage class to extend `WinRTXamlToolkit.Controls.AlternativePage` rather than `Page`.

Now when I launch my app, It fails in the following statement:

```
 if (rootFrame.Content == null)
        {
            // When the navigation stack isn't restored navigate to the first page,
            // configuring the new page by passing required information as a navigation
            // parameter
            if (!rootFrame.Navigate(typeof(MainPage), args.Arguments))
            {
                throw new Exception("Failed to create initial page");
            }
        } 
```

I receive the "Failed to create initial page", but not more details.

So my questions would be: 1\. How can I find out more details on why the `Navigate` call is failing? I tried adding `rootFrame.NavigationFailed += rootFrame_NavigationFailed;`, but the navigation failed event does not seem to be getting raised. 2\. How can I properly use the `WinRTXamlToolkit.Controls.AlternativePage` page?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:41:12.283

您是否完成了使用替代页面所需的其余更改？

查看 SDK 中的示例代码。具体在这里：

[http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/379f4af0e5862131aea1992f6875180abeddbcb6#WinRTXamlToolkit.Sample/AppShell.xaml.cs](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/379f4af0e5862131aea1992f6875180abeddbcb6#WinRTXamlToolkit.Sample/AppShell.xaml.cs)

```
public sealed partial class AppShell : UserControl
{
    public static AlternativeFrame Frame { get; private set; }

    public AppShell()
    {
        this.InitializeComponent();
        Frame = this.RootFrame;
        this.RootFrame.Navigate(typeof (MainPage));
    }
} 
```

# svg - 带有 d3.js 的箭头 SVG 渐变

> ID：16131757
> 
> 赞同：0
> 
> 时间：2013-04-21T13:41:41.363
> 
> 标签：svg, d3.js, gradient

有没有办法使用 d3.js 创建一个渐变定义，这将导致：

抱歉之前的 ASCII，这就是我想要实现的目标：

![在此处输入图像描述](https://i.stack.imgur.com/wvdwc.png)

而不是简单的线性渐变：

![在此处输入图像描述](https://i.stack.imgur.com/HkMov.png)

在不分割矩形和创建相反渐变的情况下，我无法找到一种方法来做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T15:41:29.443

使用 d3.js，您可以使用 SVG 元素进行绘图。SVG 支持[线性](http://www.w3.org/TR/SVG/pservers.html#LinearGradients)和[径向](http://www.w3.org/TR/SVG/pservers.html#RadialGradients)渐变。这种箭头样式的渐变可以从两个不同的线性渐变构建。

上面的链接描述了渐变的可能属性，但从 d3.js 中使用它并不是那么简单。所以这里有一个[径向渐变的例子，](http://freeconnection.blogspot.hu/2013/10/visual-story-about-zebra-d3js-animal.html)它很容易转化为你的版本。

绘制一个渐变矩形：

```
var rectangle = svgContainer.append("rect")
    .attr("x", 10)
    .attr("y", 10)
    .attr("width", 50)
    .attr("height", 100)
    .style("fill", "url(#gradient1)"); 
```

梯度必须像上面的例子一样定义：

```
var gradient1 = svgContainer.append("svg:defs")
    .append("svg:radialGradient")
    .attr("id", "gradient1")
    .attr("cx", "50%")
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-09T11:16:30.347

这是可以实现的。只是发布一个带有渐变和圆角的条形图示例。这将帮助您获得任何渐变效果。

```
var data = [40, 50, 30, 40, 90, 54, 20, 40, 50, 30, 40, 90, 54, 20];
		var x = d3.scaleLinear()	
		.domain([0, d3.max(data)]) 
		.range([0, 420]);
		d3.select(".chart")
		.selectAll("div")
		.data(data)
		.enter().append("div")
		.attr("class","roundedCorners")
		.style("width", function(d) {
		   return x(d) + "px";
		 })
		.text(function(d) { 
		   return d; 
		});
```

```
.roundedCorners{
   border-radius: 0px 40px 40px 0px;
}
.chart div {
   background: rgb(254,204,177); /* Old browsers */
   background: -moz-linear-gradient(top, rgba(254,204,177,1) 0%, rgba(241,116,50,1) 50%, rgba(234,85,7,1) 51%, rgba(251,149,94,1) 100%); /* FF3.6-15 */
   background: -webkit-linear-gradient(top, rgba(254,204,177,1) 0%,rgba(241,116,50,1) 50%,rgba(234,85,7,1) 51%,rgba(251,149,94,1) 100%); /* Chrome10-25,Safari5.1-6 */
   background: linear-gradient(to bottom, rgba(254,204,177,1) 0%,rgba(241,116,50,1) 50%,rgba(234,85,7,1) 51%,rgba(251,149,94,1) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
   filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#feccb1', endColorstr='#fb955e',GradientType=0 ); /* IE6-9 */
   text-align: right;
   padding: 5px;
   margin: 2px;
   color: white;
}
```

```
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.11.0/d3.min.js"></script>

<div class="chart"></div>
```

# c++ - i want to take out words from a string sentence and get this error in c++

> ID：16131759
> 
> 赞同：0
> 
> 时间：2013-04-21T13:41:55.940
> 
> 标签：c++, string, parsing, substring

```
#include<iostream>
#include<string>
using namespace std;

void extractFirstWord(string& sentence, string& word);
void processBlanks(string& sentence);

int main() {
    string sentence, word;
    cout << "Input a sentence: ";
    getline(cin, sentence);

    while (sentence != "") {
          processBlanks(sentence); // removes all blanks from the front of sentence
          if (sentence.length() > 0) { // removing blanks may have made sentence null - cannot extract from a null string
             extractFirstWord(sentence, word); // gets first word from sentence and puts into word
             cout << word << endl; // output one word at a time
          }
    }

    system("PAUSE");
    return 0;
}

void extractFirstWord(string& sentence, string& word)
    {
        int i=0;
        while(sentence[i]!=' ')
        {
            i++;        
        }
        word=sentence.substr(0,i);
        sentence=sentence.substr(i);
}
// extractFirstWord removes the substring of sentence 
// from the beginning to the first space from sentence 
// and stores the same string into word. sentence is
// shortened accordingly.
// Postcondition: sentence is shortened, and word
//                is appropriately the first word in
//                sentence.

void processBlanks(string& sentence)
    {
        int i=0;
        while(sentence[i]==' '){i++;}
        sentence=sentence.substr(i);
    } 
```

processBlanks will remove all of the spaces in front of sentence. Postcondition: sentence has no spaces in front of the first word.

i want to take out words from a string sentence and get this error in c++

Error is -> String subscript out of range

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:46:36.513

在中，如果您还没有找到空间`extractFirstWord`，您会继续增加。`i`但是，如果它是字符串中的最后一个单词，您可能会在字符串末尾之后进行索引。像这样改变`while`条件：

```
while(i < sentence.length() && sentence[i]!=' ') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:51:12.310

```
void extractFirstWord(string& sentence, string& word)
{
    int i=0;
    while(i<sentence.size() && sentence[i]!=' ')  // i should be less than sentence size
    {
        i++;        
    }
    word=sentence.substr(0,i);
    sentence=sentence.substr(i); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T13:48:17.857

只需考虑输入没有空格的情况，您的变量 i 将递增直到单词的长度，在这种情况下它将超出范围。尝试在 substr() 方法之前检查 i 是否等于单词的长度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T13:50:34.380

使用字符串流

```
#include <iostream>
#include <sstream>

int main(){
    std::stringstream ss("   first second.   ");

    std::string word;

    ss >> word;

    std::cout << word << std::endl;//first
} 
```

# mysql - Is a salted password and mySQL AES_ENCRYPT sufficient for storing sensitive information?

> ID：16131762
> 
> 赞同：4
> 
> 时间：2013-04-21T13:42:11.180
> 
> 标签：mysql, encryption

I am using Apache, MySQL and PHP via HTTPS.

I need to be able to store sensitive information so it can be shared among several people. If I have a database (secret) and two php files: (/var/www is my web root)

```
/var/inc.php
/var/www/secret.php 
```

In /var/inc.php, among other things, I have a variable named $enckey, which is a 32 character alphanumeric string. Its permissions are set to be read only.

In secret.php I have a username, password and key field. They key field ($key) is a string know by all users (each person has the same key since I'm using that as part of the salt), it would be a 8-12 alphanumeric with special characters string.

Everyone has their own username and password that are MySQL users/passwords as well. When they log in their user credentials would be validated with MySQL first. There are no database usernames or passwords in /var/inc.php.

My secret database has a table, `secret` like this:

```
CREATE TABLE `secret` (
    `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
    `name` varchar(64) DEFAULT NULL,
    `data` text,
    PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

If I store information in a MySQL table using:

```
AES_ENCRYPT('secret data', $enckey . $key) 
```

and extract the data out using

```
AES_DECRYPT(`secret`.`data`, $enckey . $key) 
```

am I doing enough to keep the data stored in the MySQL `data` column safe? Is there something more/different I should be doing?

**UPDATE**: Any one given access to the site (anyone with a valid user name/password) would have access to all sensitive data. The goal is to prevent a third party from getting the data if they were able to get to the database somehow.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:50:47.740

AES-128 加密的蛮力攻击是可以实现的，特别是考虑到显卡的计算能力或正在为比特币挖矿开发的一些基于 ASIC 的系统，但对于你得到的东西来说仍然很昂贵。您可以通过更改密钥（可能贵数百倍）或使用 AES-256（贵 2^128 倍！）来使您的加密更加昂贵。

更便宜且更有可能的攻击是有人试图窃取您的密钥。您的场景假设攻击者以某种方式进入了您的数据库。尝试想象攻击者实现该目标时的有利位置。从那个有利的角度来看，密钥的保护程度如何？

一些例子：

*   该数据库是从备份磁带或驱动器中获取的。您是否将密钥备份到同一磁带或驱动器？
*   攻击者以某种方式获得了对您的数据库服务器的 root 访问权限。该服务器是否与您拥有密钥的应用服务器分开？是否有任何 SSH 证书允许从您的数据库服务器访问应用程序服务器？您的网络是否阻止从您的数据库服务器直接访问您的应用程序服务器？
*   攻击者可以访问您的源代码控制管理系统。是否有任何密码（例如 /var/www/secret.php 中的密码）通过您的应用程序签入源代码控制？
*   您的管理员可能会被胁迫、欺骗或贿赂以提供密钥。您是否以一种易于检测且难以掩盖的方式记录活动？在可行的情况下，您是否可以划分职责，以便给定管理员可以访问数据或密钥，但不能同时访问两者？
*   如果其中一个有权访问该应用程序的人的笔记本电脑被盗，拥有该笔记本电脑的攻击者是否能够不受挑战地访问数据库？
*   密码文件据说是只读的。运行应用程序的帐户是否是只读的，除了 root 以外的任何人都无法读取？是否有其他应用程序共享该帐户？您是否阻止使用同一帐户对服务器进行 SSH 访问？该帐户的凭据是否安全？

# xcode - Tabris Xcode Apple Mach-O 链接器错误

> ID：16131768
> 
> 赞同：0
> 
> 时间：2013-04-21T13:42:55.710
> 
> 标签：xcode, linker, mach-o, tabris

我试图让 Tabris iOS-Client 工作。我在 Xcode 中导入了所有内容，在 Apple 的页面上将我的手机注册为开发者手机。下载了我的配置文件并在 Xcode 中创建了一个新的 Tabris 项目。

客户端应用程序在模拟器中运行完美，但是当我尝试在我的 iPhone 上运行它时，我收到以下错误：

```
ld: file is universal (2 slices) but does not contain a(n) armv7s slice: /Users/Shared/Tabris/Frameworks/Tabris.framework/Tabris for architecture armv7s 
```

clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我希望有人可以帮助我解决这个问题。:)

在此先感谢，托比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:14:50.733

它看起来与我们在 Tabris 1.0 之前遇到的问题非常相似，该问题通过将 XCode 项目中的“有效架构”设置为“armv7”来解决，即从列表中删除“armv7s”。

我不记得原因了，但这是我们通过谷歌搜索找到的，尝试过，它解决了我们的问题。

我们现在有一个与 Tabris 1.0 不同的 iOS 问题，但这将是另一个线程。

最好的问候，约翰

# ios - NSMutable 对象：removeAllObjects 与 containsObject 速度

> ID：16131769
> 
> 赞同：0
> 
> 时间：2013-04-21T13:42:59.430
> 
> 标签：ios, optimization

免责声明：我对 iOS 开发比较陌生。我在这个项目中使用 ARC。

我想知道这些操作中哪个更快，为什么？

```
if([selectedIndexes containsObject:indexPath]) {
    [selectedIndexes removeAllObjects];
    for(int i=0; i<self.options.count; i++) {
        [selectedIndexes addObject:[NSIndexPath indexPathForItem:i inSection:0]];   
    }
} 
```

**或者**

```
NSIndexPath *indexPath;
if([selectedIndexes containsObject:indexPath]) {
    for(int i=0; i<self.options.count; i++) {
        indexPath = [NSIndexPath indexPathForItem:i inSection:0];
        if(![selectedIndexes containsObject:indexPath])
            [selectedIndexes addObject:indexPath];
    }
} 
```

**编辑 1**

问题实际上是，是否执行 removeAllObjecs 然后添加东西会更快，或者必须检查项目是否已经不存在，将其添加到集合中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T18:18:18.523

让我们分析一下（`if`包装循环的内容是相同的，所以我将忽略它）：

选项1：：
`-removeAllObjects`从数组中删除所有对象，每个对象释放一次 ==> 最少 N 次操作 ==> O(N)
循环进行 N 次迭代，每次迭代：
* 创建一个`NSIndexPath`==> O(1)
* 将索引路径添加到数组末尾 ==> O(1)
==> O(N) + O(N) + N*O(1) + N*O(1) = 2O(N) + 2*N*O(1) = 4O(N) = O(N)

选项 2：
循环进行 N 次迭代，每次迭代：
* 创建一个`NSIndexPath`==> O(1)
* 验证数组中是否存在 ==> O(N)（数组必须假定它可能包含重复项）
*`if`语句将也有它的代价，因为它将被询问 N 次，并且会弄乱循环的分支预测。
** 循环中的加法是一个概率问题（让我们暂时忽略它）
==> N*(O(1) + O(N) + O(1)) = N*O(N) + 2*N *O(1) = O(N^2)

==> 平面分析表明第一个选项更好。

如果您要使用 a`NSMutableIndexSet`您的代码对于这两个选项将如下所示：

```
//Not tested
//Assume that selectedIndexes is a NSMutableIndexSet
if ([selectedIndexes containsIndex:indexPath.row]) {
    if (self.options.count) {//This could probably be optimised depend on your goal
        [selectedIndexes addIndexesInRange:NSMakeRange(0,self.options.count-1)];
    } else {
        [selectedIndexes removeAllIndexes];
    }
} 
```

==> 这里最坏的情况复杂度可能是 O(N)

**请随时纠正任何错误的假设或计算**

# objective-c - 在不阻塞主线程的情况下显示上下文 NSMenu

> ID：16131775
> 
> 赞同：6
> 
> 时间：2013-04-21T13:43:20.557
> 
> 标签：objective-c, multithreading, cocoa, appkit, nsmenu

显示上下文时，我得到了一些意想不到的结果`NSMenu`。我自己呈现菜单，而不是`menu`使用`NSResponder`. 事实证明，呈现 an`NSMenu`是一个阻塞操作。

在一个新的模板项目中，我只添加了以下代码`applicationDidLaunch:`

```
NSMenu *menu = [[NSMenu alloc] initWithTitle:@"Menu"];
[menu addItemWithTitle:@"Item 1" action:@selector(selected:) keyEquivalent:@""];
[menu addItemWithTitle:@"Item 2" action:@selector(selected:) keyEquivalent:@""];
[menu addItemWithTitle:@"Item 3" action:@selector(selected:) keyEquivalent:@""];
[menu popUpMenuPositioningItem:[menu itemAtIndex:0] 
                    atLocation:CGPointMake(500, 500) 
                        inView:nil];
NSLog(@"Context menu shown."); 
```

在`popUpMenuPositioningItem:atLocation:inView:`我选择一个项目或在外部单击以自动关闭菜单之前，呼叫不会返回。仅在关闭菜单后才会打印日志。

为什么会这样？我该如何预防呢？我发现有几个提到这个问题，但“解决方案”总是包括在后台执行其他事情，而不是防止`NSMenu`阻塞。

**编辑：**

如果我在后台线程中显示菜单，菜单会变得无响应，不会对内部或外部的点击做出反应。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
    [[menu popUpMenuPositioningItem:[menu itemAtIndex:0] 
                         atLocation:CGPointMake(500, 500) 
                             inView:nil];
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:57:21.103

我认为您要求的内容是不可能的，但是，您可以做一些看起来非常相似的事情：

1) 使用 NSPopover 而不是菜单。这是异步的，旨在用于可以使用弹出菜单的许多上下文中。如果您需要支持没有弹出窗口的操作系统版本，您也可以始终创建一个带有按钮的 NSWindow。

2) 如果你正在尝试运行定时器，或者在运行循环中安排的其他操作（例如下载），你可以在 NSEventTrackingRunLoopMode 中安排这些操作。默认情况下，它们仅被安排为 NSDefaultRunLoopMode（这是有道理的，因为当计时器触发显示警报时，您不想取消用户的菜单选择）。

老实说，您尝试做的事情似乎有点毫无意义，令人困惑，倒退和滥用菜单。但这可能只是因为我不知道你想要达到什么目的。你的高级任务是什么？为什么菜单启动时主线程上需要发生什么。您不能在第二个线程上发生*其他*事情（在您的示例中为 NSLog()）并将菜单留在主线程上吗？

# php - Image Resizer 的任何替代方法来调整网页中的图像大小？

> ID：16131777
> 
> 赞同：0
> 
> 时间：2013-04-21T13:43:47.920
> 
> 标签：php, image, image-processing

我已经帮助我网站的用户在他们的评论中发布外部图片。但有些图像大小可能超过我网页的大小。为了将图像保持在网页范围内，我在 google 上搜索并找到了一个名为**[Image Resizer](http://www.sevenskins.com/vbulletin-hacks/image-resizer.html)**的工具，但它仅适用于 Vbulletin 论坛。我不想实际减小图像的大小，我只想如果图像大小的宽度大于网页的宽度，那么该工具应将其宽度设置为我的特定给定宽度和相应的高度。有什么选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:05:58.297

尝试在该图像的 CSS 中设置“ **width:100%;height:100% ”。**这个对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:10:06.510

在图像标签中，您可以像这样确定宽度和高度

```
 <img src="http://www.hh4track.com/images/logo.png" width="100px" height="100px" /> 
```

或者您可以使用此类调整图像

```
 http://kazymjir.com/blog/image-resizing-php-class/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T17:50:01.410

感谢上帝。我找到了解决方案。解决方案很简单，但是我花了太多时间才找到它。

我只是稍微改变了我的 CSS，不需要使用任何第三方工具。

```
img
{
   max-width:100%;
   display:block;
   border:none;
} 
```

问题就解决了。所有大于网页的图像都在网页内，较小的图像保持原样。

# cocoa - 在 Cocoa 上发送 MCCS 命令

> ID：16131778
> 
> 赞同：14
> 
> 时间：2013-04-21T13:43:50.453
> 
> 标签：cocoa, gpu, iokit

我正在尝试为 Mac 编写一个简单的 Cocoa 应用程序，目的很简单：将我的戴尔显示器输入切换到另一个（这样我就可以在 PC 和 MAC 之间切换）。我已经找到了一个适用于 Windows 的应用程序（entechtaiwan 的 mControl），他们解释了他们在那里做了什么：

> “要通过软件切换输入，您可以使用 VESA MCCS 命令 60h。要将该命令发送到显示器，您需要读取和写入连接到显示器的 GPU I/O 板。在 Mac 上也是如此。”

有谁知道我如何从 Cocoa 应用程序发送这样的命令？也许有一个图书馆……不应该很简单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-22T21:16:15.427

似乎在 Linux 上有一个实现：http: [//ddccontrol.sourceforge.net](http://ddccontrol.sourceforge.net)

它使用 <sys/msg.h> api。该 api 似乎没有手册页，但它在 mac 上可用。我没有尝试编译 ddccontrol 工具，但看起来最接近你可以得到的，它应该是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-07T14:39:52.027

这个开源应用程序可让您控制外接显示器的亮度和对比度。由于它是开源的，因此您应该能够通过阅读源代码来了解如何编写自己的脚本。

[https://github.com/the0neyouseek/MonitorControl](https://github.com/the0neyouseek/MonitorControl)

[![在此处输入图像描述](https://i.stack.imgur.com/RQbP8.png)](https://i.stack.imgur.com/RQbP8.png)

# .net - IronPython - error while invoking

> ID：16131781
> 
> 赞同：0
> 
> 时间：2013-04-21T13:44:00.213
> 
> 标签：.net, com, interop, ironpython

Im trying to write an IronPython app that uses a COM object interface. I manage to import it using `clr.AddReference`, and manage also to call some of the functions, create objects, etc.

However at a certain point when trying to call a function I get :

> StandardError: Error while invoking GetK300RZ.

(GetK300RZ being the function name.)

Why is this happening to me? What does this error mean exactly? could this be related to the 'embed interop types' option?

I would greatly appriciate any insight as to how to get around this problem...

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T06:41:13.967

这仅适用于遇到类似问题的任何人 - 问题是函数的参数是 type`out`和`ref`in `C#`。无法调用该函数，因为没有相应的函数签名。我不得不使用`clr.Reference[]`显式创建函数参数的引用。

我想当使用外部 COM 对象时，应该停止思考 python 并开始思考 .net 或 C#...

# jasperserver - Dashboard For Home Page in JasperReports Server 5.0

> ID：16131782
> 
> 赞同：0
> 
> 时间：2013-04-21T13:44:01.177
> 
> 标签：jasperserver

I wanted to create role based jasper server home pages. I followed the [instructions](http://www.jaspersoft.com/how-set-role-based-jasperserver-home-pages) specified and created the same so that when the specified user logs into the system, he would see his home page which would be the dashboard itself.

But when I logged in with the created user, I see the home page which is the specified dashboard but only half of it.i.e, the dashboard has 4 charts, but only the first 2 are displayed. While creating this dashboard, I had set the guide to 1280*1024.

Is there something else that needs to be done so that the entire dashboard is seen as the home page?[Now only half is being displayed]

I am using JasperReports Server 5.0 Any help would be appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T07:00:46.267

显然，我们可以在新创建的主页[jsp]中设置框架的大小。高度和宽度可以根据 iFrame 部分的要求进行设置。新创建的主页将位于 [jasper home]\jasperreports-server-*\apache-tomcat\webapps\jasperserver-pro\WEB-INF\jsp\modules\home

# java - Java - volatile variable is not updating

> ID：16131783
> 
> 赞同：-1
> 
> 时间：2013-04-21T13:44:27.490
> 
> 标签：java, multithreading, javafx-2, javafx, volatile

I'm working on an interactive sorting application in JavaFx:

*   The numbers are represented by rectangles
*   Every time two numbers are swapped the rectangles are swapped(using timeline - animation)

This is one of the sorting algorithms:

```
 public class BubbleSort implements SortAlgorithm {
private volatile Boolean swaping;

public void sort(double[] array, CompareFunction compareFunction, Model model, Controller controller) {
    Boolean ord;
    int i;
    double aux;

    swaping = false;

    do {
        ord = true;

        for (i = 0; i < array.length - 1; i++) {
            if (compareFunction.compare(array[i], array[i + 1]) == false) {
                while (swaping);

                swaping = true;

                aux = array[i];
                array[i] = array[i + 1];
                array[i + 1] = aux;
                ord = false;

                controller.swapRectangles(model.getRectangles().get(i), model.getRectangles().get(i + 1), this);
            }
        }
    } while (ord == false);
}

public void setSwaping(Boolean swaping) {
    this.swaping = swaping;
} 
```

}

This is the prototype of the swapRectangles method:

```
public void swapRectangles(final Rectangle rectangle1, final Rectangle rectangle2,    final BubbleSort bubbleSort) 
```

And when timeline ends I udpate "swaping" value:

```
 timeline2.setOnFinished(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent actionEvent) {
            setRectangleFill(rectangle2, Color.BLACK);
            rectangle2.setX(rectangle1X);
            bubbleSort.setSwaping(false);
        }
    }); 
```

The problem is that the "swaping" variable is never updating(the setSwaping method is never called).

Do you know why?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T00:05:53.837

1.  运行`while(swaping);`对处理器施加了很大的压力，您正在消耗它的所有能量并将其交给“无所事事”循环。为了解决这个问题，要么在里面添加 sleep：`while(swaping) Thread.sleep(100);`要么使用更方便的同步机制，如[Semaphore](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html)

2.  此外，如果您`sort`在 UI 线程上运行，您会完全阻止它，因此`setOnFinished`永远不会有机会运行。您应该`sort`在单独的线程上运行：

    ```
    new Thread() {
        public void run() {
            new BubbleSort().sort(array, compareFunction, model, controller);
        }
    }.start(); 
    ```

如果您从此线程更新 UI，请确保将 UI 调用包装到[Platform.runLater](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#runLater%28java.lang.Runnable%29)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:54:22.423

我认为您`swaping = true`在方法中进行了更新，但在执行 while 循环之前`setSwaping`再次设置了排序方法。`swaping= false`所以我认为你的 while 循环永远不会执行，因为交换是错误的。所以你假设价值没有被更新。

`sort`从您的方法中删除此行：

```
swaping = false;

while (swaping); 
```

删除`;`并将您的代码放入 while 块中。

# jquery-mobile - whats the purpose of jquery.mobile-1.3.1.min.map in the jquery.mobile-1.3.1 distribution?

> ID：16131785
> 
> 赞同：14
> 
> 时间：2013-04-21T13:44:48.770
> 
> 标签：jquery-mobile

When i downloaded the jquery.mobile-1.3.1 dist i see the following structure:

```
demos -> directory for demos of jquery-mobile
images -> directory of images 
index.html -> index for demos
jquery.mobile-1.3.1.css -> Uncompressed with Default theme
jquery.mobile-1.3.1.js -> Uncompressed
jquery.mobile-1.3.1.min.css -> Minified with Default theme
jquery.mobile-1.3.1.min.js -> Minified
jquery.mobile-1.3.1.min.map -> ?? (what it is for? is it necessary for min version?)
jquery.mobile.structure-1.3.1.css -> Uncompressed structure without a theme
jquery.mobile.structure-1.3.1.min.css -> Minified structure without a theme
jquery.mobile.theme-1.3.1.css -> Uncompressed theme for structure without theme (can be changed by another theme)
jquery.mobile.theme-1.3.1.min.css -> Minified theme for structure without theme (can be changed by another theme) 
```

As you can see i dont know the purpose of jquery.mobile-1.3.1.min.map, what it is for? is it necessary for min version?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-21T13:46:50.977

那是一个源映射。它们在调试缩小的 JavaScript 文件时使用。由于它仅用于调试目的，因此不需要。

我推荐阅读[JavaScript Source Maps 简介](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/)。

# php - PHP multi language issue

> ID：16131789
> 
> 赞同：1
> 
> 时间：2013-04-21T13:45:16.407
> 
> 标签：php, multilingual

I have some code to change my language depending on session

Here is my php code

```
 function make_lang(){
      session_start();
      if(isset($_POST['a'])){
          $_SESSION['a']=true;
          unset ($_SESSION['e']);
          unset ($_SESSION['f']);
      }
      if(isset($_POST['e'])){
          $_SESSION['e']=true;
          unset ($_SESSION['a']);
          unset ($_SESSION['f']);
      }
      if(isset($_POST['f'])){
          $_SESSION['f']=true;
          unset ($_SESSION['e']);
          unset ($_SESSION['a']);
      }
  }

  function lang_path(){

      if(!isset($_SESSION['e']) or !isset($_SESSION['f'])){
          include('lan/a.php');
          echo '<link rel="stylesheet" type="text/css" href="css/style-z.php" />';
      }

      if(isset($_SESSION['a'])){
          $lang = "a";
      }

      if(isset($_SESSION['e'])){
          $lang = "e";
      }

      if(isset($_SESSION['f'])){
          $lang = "f";
      }

      $path="lan/".$lang.".php";

      return $path;
  }

  function lang_css(){  
      if(isset($_SESSION['a'])){
          $css = "style-z";
      }

      if(isset($_SESSION['e'])){
          $css = "style-zleft";
      }

      if(isset($_SESSION['f'])){
          $css = "style-zleft";
      }
      $css_i="css/".$css.".css";
      return $css_i;
  }

  make_lang();

  $l_file = lang_path();
  include($l_file);

  $l_css = lang_css();
  echo '<link rel="stylesheet" type="text/css" href="'.$l_css.'" />'; 
```

html form

```
 <form method="post" class="login-img">
       <input name="e" type="submit" value="English" class="login-img" />
       <input name="a" type="submit" value="Arabic" class="login-img" />
       <input name="f" type="submit" value="Frinch" class="login-img" />
       </form> 
```

The problem is

When you click on any hyperlink on the site does not work the code, but in the case of pressing a button language site appears well But in the case of pressure on any other hyperlink does not work well site

Web site link: [http://www.hh4track.com/](http://www.hh4track.com/)

Thanks for helping.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:17:52.017

查看您的页面源代码，您似乎在`<head></head>`标签之外和标签之前回显样式表`<!DOCTYPE ...>`-
索引页面源代码 -

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="tracker" />
<meta name="description" content="" />
<title>HH4track</title>
<link href="css/style-z.css" rel="stylesheet" type="text/css" />
</head> 
```

所有其他页面源代码 -

```
<link rel="stylesheet" type="text/css" href="css/style-z.php" /><link rel="stylesheet" type="text/css" href="css/.css" /><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
....
</head> 
```

无论单击哪种语言链接，您的回显样式表都是 -

```
<link rel="stylesheet" type="text/css" href="css/style-z.php" />
<link rel="stylesheet" type="text/css" href="css/.css" /> 
```

您的语言会话设置不正确。为什么还有3个`$_SESSION`变量？你可以用 1 来做 -`$_SESSION['lang']`并简化你的代码 -

```
session_start();
function make_lang(){
  if(isset($_POST['a'])){
    $_SESSION['lang']='a';}
  if(isset($_POST['e'])){
    $_SESSION['lang']='e';}
  if(isset($_POST['f'])){
    $_SESSION['lang']='f';}
 }

 function lang_path(){
    if($_SESSION['lang'] == 'a'){
       $lang = "a";}
    if($_SESSION['lang'] == 'e'){
       $lang = "e";}
    if($_SESSION['lang'] == 'f'){
       $lang = "f";}

    $path="lan/".$lang.".php";

    return $path;
 }

 function lang_css(){    
   if($_SESSION['lang'] == 'a'){
      $css = "style-z";}
   else{
      $css = "style-zleft";}

 $css_i="css/".$css.".css";
 return $css_i;
 }

 make_lang();

 $l_file = lang_path();
 include($l_file);

 $l_css = lang_css();
 echo '<link rel="stylesheet" type="text/css" href="'.$l_css.'" />'; 
```

# javascript - Problems passing select option values to function

> ID：16131790
> 
> 赞同：1
> 
> 时间：2013-04-21T13:45:17.470
> 
> 标签：javascript, jquery

I have created 2 select boxes and want to display the appropriate div when each select box is occupied, so when age is selected a check is done to make sure gender has been selected before running the validate function which gets passed the gender and age values. My problem is however that when female gets passed it seems to be read as male but I cant understand why. Can anyone advise how I can resolve this?

**Fiddle:** [http://jsfiddle.net/Nyh89/2/](http://jsfiddle.net/Nyh89/2/)

**JS**

```
var genderList = $('#gender'),
    ageList = $('#age'),
    gender,
    age;

genderList.on('change', function () {
    gender = $(this).find(":selected").data('gender');

    if (ageList.val()) {
        console.log(gender);
        validate(age, gender);
    }

});

ageList.on('change', function () {
    age = $(this).find(":selected").data('year');

    if (genderList.val()) {
        console.log(gender);
        validate(age, gender);
    }
});

function validate(age, gender) {

    var gen = gender;

    if (age <= 1996) {
        $('.' + gen + '-under-twelve').show();
    } else if (age >= 1997 && age <= 2002) {
        $('.' + gen + '-mid').show();
    } else {
        $('.' + gen + '-over-sixteen').show();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T13:51:56.180

您的代码在您提供的小提琴中正常工作。

但是，我认为您的 HTML 中有一个错误：

```
<div class="female-under-twelve">Show male under 12 info</div> 
```

您的 div 具有“女性”类，但文本显示“男性”。也许这就是为什么您将其视为错误的原因。

# c++ - 使用 Luajit 时，使用 FFI 还是普通的 lua 绑定更好？

> ID：16131793
> 
> 赞同：6
> 
> 时间：2013-04-21T13:45:30.667
> 
> 标签：c++, scripting, lua, ffi, luajit

我刚开始用 C++ 修改 Luajit，我发现它的 FFI 真的很容易使用，但我不确定它是否是所有（或至少大多数）情况的最佳解决方案。

那么使用其中一个更好，还是只是偏好？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T15:11:09.287

正如 LuaJIT 网站上所说，通过 FFI 绑定的 C 函数调用可以进行 JIT 编译（相对于通过 Lua C/API 的调用），因此在性能方面 FFI 肯定更好。此外，使用 FFI，您可以在 Lua 中使用本机 C 类型进行计算，这在某些情况下可以进一步提高性能（[示例](http://www.freelists.org/post/luajit/Suggestions-for-how-to-optimize-around-persistent-type-instability,5)）。

使用 FFI（如果您习惯于 C/API）时可能会遇到的一个问题是，当您希望 C 函数返回多个值时。在 Lua C/API 中这很简单，但在 FFI 的情况下，这需要一些技巧（例如，为 FFI C 调用编写包装函数）。但考虑到您获得的易用性和性能，我认为这是一个小缺点。

如果您的应用程序允许第三方脚本，还有一些安全考虑，例如，他们滥用 FFI 会很高兴地在没有警告的情况下使您的应用程序崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-13T13:21:45.117

WRT 到 C++，这里是关于调用 C++ 的 lua-l 列表上的一个线程，它涉及到这个： http: [//lua-users.org/lists/lua-l/2011-07/threads.html#00492](http://lua-users.org/lists/lua-l/2011-07/threads.html#00492)

除了 WB 的回答：这取决于您使用的是 JIT 编译器还是解释器。您不能在某些平台上运行 JIT（例如 iOS，由于许可限制）。因此，使用 LuaJit FFI 可能不会快多少（因为使用解释器时它慢了约 8-10 倍），但是 LuaJit 解释器比 Lua VM 快 2-3 倍。

我也有兴趣从 Lua 调用 C++，目前正在评估 LuaJit。[我使用Ponder](https://billyquith.github.io/ponder/)生成 Lua 绑定。

# java - 在 Java 画布上插入文本

> ID：16131797
> 
> 赞同：1
> 
> 时间：2013-04-21T13:45:54.003
> 
> 标签：java, swing, text, graphics, paint

以下代码用于在按下按钮时插入文本：

```
if(actionNum == 4){
dropText = JOptionPane.showInputDialog(null, "Please enter the required text");
}

currentAction = actionNum; 
```

然后调用下面的段将文本绘制到画布上：

```
if(currentAction == 4){
 int w2 = getFontMetrics().stringWidth(dropText) / 2;
 aShape = drawString(dropText, textPoint.x - w2, textPoint.y);
}else 
```

两个错误不断重复：

*   类 Component 中的方法 getFontMetrics 不能应用于给定类型：here:: line:259

*   找不到符号 :here:: line:260

我试图添加到我正在使用的程序中的代码，这是一个绘画程序，可以在[这里找到](https://stackoverflow.com/a/5312702/230513)

程序代码如下：

```
 import javax.swing.*;
    import javax.swing.event.ChangeEvent;
    import javax.swing.event.ChangeListener;

    import java.awt.event.*;
    import java.awt.*;
    import java.awt.geom.*;
    import java.text.DecimalFormat;
    import java.util.*;

    // Allows user text to be entered, for use in text
    // deployment to the canvas
    import java.io.*;
    import javax.swing.JOptionPane; 

    @SuppressWarnings("serial")
    public class Splat extends JFrame
    { 

    JButton brushBut, lineBut, clearBut, textBut, ellipseBut, rectBut,    strokeBut, fillBut;

    // Decleration of the string for use in text deployement on the canvas
 String dropText;
 private static final int W = 640;
    private static final int H = 480;
    private Point textPoint = new Point(W / 2, H / 2);
    private Point mousePoint;

    // Defines the arrays used on the DrawingBoard. These are Instantiated earlier
    // so that they may be cleared in the makeMeButtons method

    ArrayList<Shape> shapes = new ArrayList<Shape>();
    ArrayList<Color> shapeFill = new ArrayList<Color>();
    ArrayList<Color> shapeStroke = new ArrayList<Color>();
    ArrayList<Float> transPercent = new ArrayList<Float>();

    // Transparency slider

    JSlider transSlider;

    JLabel transLabel;

    // Limits the transparency float to 2 decimal points

    DecimalFormat dec = new DecimalFormat("#.##");

    // Standard 2D drawing rules for Java

    Graphics2D graphSettings;

    // Used to determine the shape/button selected

    int currentAction = 1;

    // Transparency of the shape

    float transparentVal = 1.0f;

    // Default stroke and fill colors

    Color strokeColor=Color.BLACK, fillColor=Color.BLACK;

    public static void main(String [] args)
    {
            new Splat();
    }

    public Splat()
    {
        // Define the defaults for the JFrame

        this.setSize(800, 600);
        this.setTitle("Splat");
        this.setFont(new Font("Serif", Font.ITALIC + Font.BOLD, 32));
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel buttonPanel = new JPanel();

        // Box that will hold the buttons

        Box theBox = Box.createHorizontalBox();

        // Make all the buttons by calling makeMeButtons and
        // makeMeColorButton

        brushBut = makeMeButtons("./src/brush.png", 1);
        lineBut = makeMeButtons("./src/Line.png", 2);
        clearBut = makeMeButtons("./src/Clear.png", 3);
        textBut = makeMeButtons("./src/Text.png", 4);
        ellipseBut = makeMeButtons("./src/Ellipse.png", 5);
        rectBut = makeMeButtons("./src/Rectangle.png", 6);

        // Make all the buttons in makeMeColorButton by passing the
        // button icon and true for stroke color or false for fill

        strokeBut = makeMeColorButton("./src/Stroke.png", 7, true);
        fillBut = makeMeColorButton("./src/Fill.png", 8, false);

        // Add the buttons to the box

        theBox.add(brushBut);
        theBox.add(lineBut);
        theBox.add(clearBut);
        theBox.add(textBut);
        theBox.add(ellipseBut);
        theBox.add(rectBut);
        theBox.add(strokeBut);
        theBox.add(fillBut);

        // Add the transparent label and slider

        transLabel = new JLabel("Transparent: 1");

        // Min value, Max value and starting value for slider

        transSlider = new JSlider(1, 99, 99);

        // Create an instance of ListenForEvents to handle events

        ListenForSlider lForSlider = new ListenForSlider();

        // Tell Java that you want to be alerted when an event
        // occurs on the slider

        transSlider.addChangeListener(lForSlider);

        theBox.add(transLabel);
        theBox.add(transSlider);

        // Add the box of buttons to the panel

        buttonPanel.add(theBox);

        // Position the buttons in the bottom of the frame

        this.add(buttonPanel, BorderLayout.SOUTH);

        // Make the drawing area take up the rest of the frame

        this.add(new DrawingBoard(), BorderLayout.CENTER);

        // Show the frame

        this.setVisible(true);
    }

    // Spits out buttons based on the image supplied
    // actionNum represents each shape to be drawn

    public JButton makeMeButtons(String iconFile, final int actionNum){
        JButton theBut = new JButton();
        Icon butIcon = new ImageIcon(iconFile);
        theBut.setIcon(butIcon);

        // Make the proper actionPerformed method execute when the
        // specific button is pressed
        // If the action number is 3 then the DrawingBoard is blanked instantly,
        // on the button press

        theBut.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                if(actionNum == 3)
                {
                    shapes.clear();
                    shapeFill.clear();
                    shapeStroke.clear();
                    transPercent.clear();
                    repaint();
                }
                else

                if(actionNum == 4){
                    dropText = JOptionPane.showInputDialog(null, "Please enter the required text");
                }

                    currentAction = actionNum;  
            }
        });

        return theBut;  
    }

    // Creates the Fill Colour and Stroke Colour Buttons

    public JButton makeMeColorButton(String iconFile, final int actionNum, final boolean stroke){
        JButton theBut = new JButton();
        Icon butIcon = new ImageIcon(iconFile);
        theBut.setIcon(butIcon);

        theBut.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {

                if(stroke){

                    // JColorChooser is a popup that lets you pick a color

                    strokeColor = JColorChooser.showDialog(null,  "Pick a Stroke", Color.BLACK);
                } else {
                    fillColor = JColorChooser.showDialog(null,  "Pick a Fill", Color.BLACK);
                }

            }
        });

        return theBut;  
    }

    private class DrawingBoard extends JComponent
    {

            Point drawStart, drawEnd;

            // Monitors events on the drawing area of the frame

            public DrawingBoard()
            {

                    this.addMouseListener(new MouseAdapter()
                      {

                        public void mousePressed(MouseEvent e)
                        {
        /*text input*/      if(currentAction == 4){
                                mousePoint = e.getPoint();
                                repaint();
                            }
                            else

                            if(currentAction != 1){

                            // When the mouse is pressed get x & y position

                            drawStart = new Point(e.getX(), e.getY());
                            drawEnd = drawStart;
                            repaint();

                            }

                            }

                        public void mouseReleased(MouseEvent e)
                            {

                            if(currentAction != 1){

                              // Create a shape using the starting x & y
                              // and finishing x & y positions

                            Shape aShape = null;

                            if (currentAction == 2){
                                aShape = drawLine(drawStart.x, drawStart.y,
                                        e.getX(), e.getY());
                            } else 

                            if(currentAction == 4){
                                int w2 = getFontMetrics().stringWidth(dropText) / 2;
                                aShape = drawString(dropText, textPoint.x - w2, textPoint.y);
                            } else

                            if (currentAction == 5){
                                aShape = drawEllipse(drawStart.x, drawStart.y,
                                        e.getX(), e.getY());
                            } else 

                            if (currentAction == 6) {

                                // Create a new rectangle using x & y coordinates

                                aShape = drawRectangle(drawStart.x, drawStart.y,
                                        e.getX(), e.getY());
                            }

                              // Add shapes, fills and colors to there ArrayLists

                              shapes.add(aShape);
                              shapeFill.add(fillColor);
                              shapeStroke.add(strokeColor);

                              // Add transparency value to ArrayList

                              transPercent.add(transparentVal);

                              drawStart = null;
                              drawEnd = null;

                              // repaint the drawing area

                              repaint();

                            }

                            }
                      } );

                    this.addMouseMotionListener(new MouseMotionAdapter()
                    {

                      public void mouseDragged(MouseEvent e)
                      {

                          if(currentAction == 4){
                            int dx = e.getX() - mousePoint.x;
                            int dy = e.getY() - mousePoint.y;
                            textPoint.setLocation(textPoint.x + dx, textPoint.y + dy);
                            mousePoint = e.getPoint();
                            repaint();
                          }
                          else

                          // If this is a brush have shapes go on the screen quickly

                          if(currentAction == 1){

                            int x = e.getX();
                            int y = e.getY();

                            Shape aShape = null;

                            // Make stroke and fill equal to eliminate the fact that this is an ellipse

                            strokeColor = fillColor;

                            aShape = drawBrush(x,y,5,5);

                            shapes.add(aShape);
                              shapeFill.add(fillColor);
                              shapeStroke.add(strokeColor);

                              // Add the transparency value

                              transPercent.add(transparentVal);
                        } 

                        // Get the final x & y position after the mouse is dragged

                        drawEnd = new Point(e.getX(), e.getY());
                        repaint();
                      }
                    } );
            }

            public void paint(Graphics g)
            {
                    // Class used to define the shapes to be drawn

                    graphSettings = (Graphics2D)g;

                    // Antialiasing cleans up the jagged lines and defines rendering rules

                    graphSettings.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                            RenderingHints.VALUE_ANTIALIAS_ON);

                    // Defines the line width of the stroke

                    graphSettings.setStroke(new BasicStroke(4));

                    // Iterators created to cycle through strokes and fills
                    Iterator<Color> strokeCounter = shapeStroke.iterator();
                    Iterator<Color> fillCounter = shapeFill.iterator();

                    // Iterator for transparency

                    Iterator<Float> transCounter = transPercent.iterator();

                    for (Shape s : shapes)
                    {

                        // Sets the shapes transparency value

                        graphSettings.setComposite(AlphaComposite.getInstance(
                                AlphaComposite.SRC_OVER, transCounter.next()));

                        // Grabs the next stroke from the color arraylist
                        graphSettings.setPaint(strokeCounter.next());

                        graphSettings.draw(s);

                        // Grabs the next fill from the color arraylist
                        graphSettings.setPaint(fillCounter.next());

                        graphSettings.fill(s);
                    }

                    // Guide shape used for drawing
                    if (drawStart != null && drawEnd != null)
                    {
                        // Makes the guide shape transparent

                        graphSettings.setComposite(AlphaComposite.getInstance(
                                AlphaComposite.SRC_OVER, 0.40f));

                        // Make guide shape gray for professional look

                        graphSettings.setPaint(Color.LIGHT_GRAY);

                        Shape aShape = null;

                        if (currentAction == 2){
                            aShape = drawLine(drawStart.x, drawStart.y,
                                    drawEnd.x, drawEnd.y);
                        } else 

                        if(currentAction == 4){
                            int w2 = g.getFontMetrics().stringWidth(dropText) / 2;
    g.drawString(dropText, textPoint.x - w2, textPoint.y);
                        }else

                        if (currentAction == 5){
                            aShape = drawEllipse(drawStart.x, drawStart.y,
                                    drawEnd.x, drawEnd.y);
                        } else 

                        if (currentAction == 6) {

                            // Create a new rectangle using x & y coordinates

                            aShape = drawRectangle(drawStart.x, drawStart.y,
                                    drawEnd.x, drawEnd.y);
                        }

                            graphSettings.draw(aShape);
                    }
            }

            private Rectangle2D.Float drawRectangle(
                    int x1, int y1, int x2, int y2)
            {
                // Get the top left hand corner for the shape
                // Math.min returns the points closest to 0

                    int x = Math.min(x1, x2);
                    int y = Math.min(y1, y2);

                    // Gets the difference between the coordinates and 

                    int width = Math.abs(x1 - x2);
                    int height = Math.abs(y1 - y2);

                    return new Rectangle2D.Float(
                            x, y, width, height);
            }

            // The other shapes will work similarly
            // More on this in the next tutorial

            private Ellipse2D.Float drawEllipse(
                    int x1, int y1, int x2, int y2)
            {
                    int x = Math.min(x1, x2);
                    int y = Math.min(y1, y2);
                    int width = Math.abs(x1 - x2);
                    int height = Math.abs(y1 - y2);

                    return new Ellipse2D.Float(
                            x, y, width, height);
            }

            private Line2D.Float drawLine(
                    int x1, int y1, int x2, int y2)
            {

                    return new Line2D.Float(
                            x1, y1, x2, y2);
            }

            private Ellipse2D.Float drawBrush(
                    int x1, int y1, int brushStrokeWidth, int brushStrokeHeight)
            {

                return new Ellipse2D.Float(
                        x1, y1, brushStrokeWidth, brushStrokeHeight);

            }

    }

 // Implements ActionListener so it can react to events on components

    private class ListenForSlider implements ChangeListener{

        // Called when the spinner is changed

        public void stateChanged(ChangeEvent e) {

            // Check if the source of the event was the button

            if(e.getSource() == transSlider){

                // Change the value for the label next to the spinner
                // Use decimal format to make sure only 2 decimals are ever displayed

                transLabel.setText("Transparent: " + dec.format(transSlider.getValue() * .01) );

                // Set the value for transparency for every shape drawn after

                transparentVal = (float) (transSlider.getValue() * .01);

            }

        }

    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:51:39.743

`getFontMetrics`接受一个`Font`论点：

```
getFontMetrics(getFont()).stringWidth(...) 
```

该方法`drawString`（第 260 行）也未在类中定义`DrawingBoard`。

一些旁注：在 Swing 中进行自定义绘画时，覆盖`paintComponent`而不是`paint`调用`super.paintComponent(g)`. 避免使用幻数，例如：

```
if (currentAction == 6) { 
```

可：

```
if (currentAction == RECTANGLE_ACTION) { 
```

从设计的角度来看，如果`currentAction`是`enum`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T13:48:59.253

你需要：

```
import java.awt.FontMetrics; 
```

# java - JSTL标签在jboss 4.0.2中抛出错误

> ID：16131798
> 
> 赞同：0
> 
> 时间：2013-04-21T13:46:00.140
> 
> 标签：java, jsp, spring-mvc, jboss, jstl

我们在 JBOSS 4.0.2 的 jsp 中使用 JSTL。使用标签库时，我们遇到以下异常。在本地部署在 tomcat 7 上但部署在服务器 jboss 上时不会发生错误

```
javax.servlet.ServletException: javax.servlet.jsp.tagext.TagAttributeInfo.<init>(Ljava/lang/String;ZLjava/lang/String;ZZ)V
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:272)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
    org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:240)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:258)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1174)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:901)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:809)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:511)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:760)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
    org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:81)

root cause

java.lang.NoSuchMethodError: javax.servlet.jsp.tagext.TagAttributeInfo.<init>(Ljava/lang/String;ZLjava/lang/String;ZZ)V
    org.apache.jasper.compiler.TagLibraryInfoImpl.createAttribute(TagLibraryInfoImpl.java:572)
    org.apache.jasper.compiler.TagLibraryInfoImpl.createTagInfo(TagLibraryInfoImpl.java:401)
    org.apache.jasper.compiler.TagLibraryInfoImpl.parseTLD(TagLibraryInfoImpl.java:248)
    org.apache.jasper.compiler.TagLibraryInfoImpl.<init>(TagLibraryInfoImpl.java:179)
    org.apache.jasper.compiler.Parser.parseTaglibDirective(Parser.java:418)
    org.apache.jasper.compiler.Parser.parseDirective(Parser.java:483)
    org.apache.jasper.compiler.Parser.parseElements(Parser.java:1543)
    org.apache.jasper.compiler.Parser.parse(Parser.java:126)
    org.apache.jasper.compiler.ParserController.doParse(ParserController.java:211)
    org.apache.jasper.compiler.ParserController.parse(ParserController.java:100)
    org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:146)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:286)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:267)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:255)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:556)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:293)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
    org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:240)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:258)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1174)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:901)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:809)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:511)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:760)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
    org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:81) 
```

这是 JSP 代码：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
</head>
<body>
<div>
<table>
<tr>
<th>Question name</th>
<tr>
    <c:forEach var="questions" items="${questionslist}">
                <tr>
                    <td><c:out value="${questions.Question}"  /></td>
                                   </tr>

                </c:forEach>
</table>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:29:05.060

据我所知，JBoss 4.0.2 没有嵌入 JSTL 库。将 jstl.jar 和 standard.jar 添加到应用程序的 lib 文件夹中。下载，取决于您要使用的 JSTL 版本：

*   [http://repo2.maven.org/maven2/javax/servlet/jstl/（JSTL](http://repo2.maven.org/maven2/javax/servlet/jstl/) 1.1）和
*   [http://repo2.maven.org/maven2/taglibs/standard/](http://repo2.maven.org/maven2/taglibs/standard/)

# iphone - 获取按钮的相关标签

> ID：16131799
> 
> 赞同：2
> 
> 时间：2013-04-21T13:46:03.317
> 
> 标签：iphone

我有很多按钮，并且我给了所有的标签值。每当我单击一个按钮时，我都需要获取该单击按钮的相关标签，相关标签表示上、下、右和左。

我想存储第一个放置的标签，并与下一个放置的标签进行比较，无论它在哪个位置。

怎么做？

请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:04:43.747

In your *.h file declare an action like:

```
-(IBAction)buttonTapped:(UIButton *)sender; 
```

Assign the "Touch Up Inside" action to this action.

In your *.m file do the following:

```
-(IBAction)buttonTapped:(UIButton *)sender
{
    switch(sender.tag) {
        case 1: // action for button 1
        case 2: // action for button 2
        ...
    }
} 
```

Note that tag is an integer number, not a string.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T19:11:12.423

只需登录并查看您单击的按钮的标签。

```
-(IBAction)buttonClicked:(UIButton *)sender
{
   int tag=sender.tag;
   NSLog(@"%d",tag);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T06:38:30.977

您可以添加该按钮的目标

```
[buttonName addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

```
-(void)buttonClicked:(UIButton *)sender
{
   int tag=sender.tag;

   UIButton *btn = (UIButton *)sender;  
   //Now you can access all he properties of that button as well as you can change it's property whatever you like.
   int tag = btn.tag;
} 
```

# php - 刷新后从选择菜单中获取最后一个值

> ID：16131801
> 
> 赞同：2
> 
> 时间：2013-04-21T13:46:21.350
> 
> 标签：php, javascript, jquery

我想在刷新之前获得用户选择的最后一个选项

这是代码选择菜单：

```
 <select name="category" id="category" onChange="BK.Ajax.Updates('newfile.php?id='+document.getElementById('category').value,'ajx');">
                                <option>.....</option>
                        <?
                        $sql_category=mysql_query("select * from  category");
                        while ($row=mysql_fetch_array($sql_category))
                        {
                            echo "<option value='$row[id]'> ";
                            echo $row['name'] ;
                            echo "</option>";
                        }

                        ?>
                        </select> 
```

像这个例子 [http://jsfiddle.net/Lyxut/6/]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:01:07.660

```
 <?php 
      if(isset($_POST['category'])){
     $lan = $_POST['category'];
      echo $lan;
      }
      ?>

   or 

   <?php 
    if(isset($_POST['category'])){
   $lan = $_POST['category'];
    sesison_start();
     $_SESSION['lang'] = $lan ;
     echo $_SESSION['lang'];
     echo $lan;
     }
     ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:55:08.347

为了保存前一页的数据/从一页或另一页移动时，您将不得不使用`$_SESSION`. 会议是为了帮助做这些事情。例如，在 a.php 页面中，您可以执行以下操作：

```
 session_start(); //initialize session
    if(!(isset($_SESSION['pageVisited']))){
        $_SESSION['pageVisited'] = 'a';
    }else{
       echo "last page visited is. ".$_SESSION['pageVisited'];
    } 
```

您可以将上面的代码添加到页面 b.php 并更改 `$_SESSION['pageVisited'] = 'b';` ，如果您的用户首先进入页面 a，然后移动到页面 b - 在访问页面 b 时，将打印消息“最后访问的页面是 a”。

会话结构是用户友好的，非常容易处理，更多信息请阅读： http: [//php.net/manual/en/features.sessions.php](http://php.net/manual/en/features.sessions.php)

# c++ - 使用 C++ 将音频从 mp4 提取到 mp3（不使用 args 执行 ffmpeg）

> ID：16131805
> 
> 赞同：8
> 
> 时间：2013-04-21T13:46:37.663
> 
> 标签：c++, mp3, mp4, converters

如何以编程方式从 mp4 视频文件格式转换（提取音频通道）？
我只是在网上找不到任何使用 C++ 的东西。

将命令行参数传递给 LAME 或 MPLAYER 或 FFMPEG 不是一种选择。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T12:36:15.593

您可以尝试使用 ffmpeg 在 C 或 C++ 中执行此操作。这是正常的步骤流程。

1.  使用 av_register_all() 初始化 ffmpeg；

2.  使用 avformat_open_input( &informat, sourcefile, 0, 0)) 打开输入文件。

3.  使用 avformat_find_stream_info(informat, 0)) 查找流信息。

4.  通过遍历流并将 codec_type 与 AVMEDIA_TYPE_AUDIO 进行比较来查找音频流。

5.  输入音频流后，您可以找到音频解码器并打开解码器。使用 avcodec_find_decoder(in_aud_strm->codec->codec_id) 和 avcodec_open2(in_aud_codec_ctx, in_aud_codec, NULL)。

6.  现在对于输出文件，使用 av_guess_format(NULL, (const char*)outfile, NULL) 猜测输出格式。

7.  为输出格式分配上下文。

8.  使用 avcodec_find_encoder(outfmt->audio_codec) 查找输出音频编码器。

9.  添加新的流音频流 avformat_new_stream(outformat, out_aud_codec)。

10.  用所需的采样率、采样 fmt、通道等填充输出编解码器上下文。

11.  使用 avio_open() 打开输出文件。

12.  使用 avformat_write_header(outformat, NULL) 写入输出标头。

13.  现在在 while 循环中开始读取数据包，仅解码音频数据包对它们进行编码并将它们写入打开的输出文件中。您可以使用 av_read_frame(informat, &pkt) , avcodec_decode_audio4(in_aud_codec_ctx, pframeT, &got_vid_pkt, &pkt), avcodec_encode_audio2() 和 av_write_frame()。

14.  最后使用 av_write_trailer 编写预告片。

您可以查看 ffmpeg 示例中提供的 demuxing.c 和 muxing.c。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-07T22:10:06.913

从[transcode_aac](https://github.com/FFmpeg/FFmpeg/blob/master/doc/examples/transcode_aac.c)官方示例开始。我们需要非常少的改变：

1.  在文件范围内添加一个全局变量：

    ```
    /* The index of audio stream that will be transcoded */
    static int audio_stream_idx = -1; 
    ```

2.  在 中，将第[83-88](https://github.com/FFmpeg/FFmpeg/blob/master/doc/examples/transcode_aac.c#L83)`open_input_file()`行替换为

    ```
    for (audio_stream_idx = 0; audio_stream_idx < (*input_format_context)->nb_streams; audio_stream_idx++) {
    if ((*input_format_context)->streams[audio_stream_idx]->codecpar->codec_type == AVMEDIA_TYPE_AUDIO)
        break;
    }

    if (audio_stream_idx >= (*input_format_context)->nb_streams) {
        fprintf(stderr, "Could not find an audio stream\n");
        avformat_close_input(input_format_context);
        return AVERROR_EXIT;
    } 
    ```

3.  在第[92](https://github.com/FFmpeg/FFmpeg/blob/master/doc/examples/transcode_aac.c#L92)和[107](https://github.com/FFmpeg/FFmpeg/blob/master/doc/examples/transcode_aac.c#L107)行，替换`streams[0]`为`streams[audio_stream_idx]`.

4.  在第[181](https://github.com/FFmpeg/FFmpeg/blob/master/doc/examples/transcode_aac.c#L181)行，将硬编码的编解码器 ID 替换`AV_CODEC_ID_AAC`为

    ```
    (*output_format_context)->oformat->audio_codec 
    ```

5.  在第[182](https://github.com/FFmpeg/FFmpeg/blob/master/doc/examples/transcode_aac.c#L182)行，替换错误消息：

    ```
    fprintf(stderr, "Could not find audio encoder for %s(%d).\n", (*output_format_context)->oformat->long_name, (*output_format_context)->oformat->audio_codec); 
    ```

6.  在`decode_audio_frame()`我们跳过非音频帧：在第[389](https://github.com/FFmpeg/FFmpeg/blob/master/doc/examples/transcode_aac.c#L389)行，写

    ```
    if (error != AVERROR_EOF && input_packet.stream_index != audio_stream_idx) goto cleanup; 
    ```

**PS请注意，当音频流**[不需要转码](https://stackoverflow.com/a/62200007/192373)时，此解决方案无法以最佳方式处理。大多数**mp4**文件都有 AAC 或 AC3 音轨，因此请确保使用相关的解码器和 MP3 编码器（例如，[shine](https://github.com/savonet/shine)）构建您的 ffmpeg。

**[这里的](https://github.com/alexcohn/mobile-ffmpeg/blob/49d82539a9f391d67e3bf6fe96cf5cabb1bd7ce3/android/app/src/main/cpp/doc_examples_transcode_aac.c)**PPS**是文件，适应 Adnroid。**

# python - GAE - 存储多个 OAuth 访问令牌

> ID：16131807
> 
> 赞同：0
> 
> 时间：2013-04-21T13:46:48.247
> 
> 标签：python, google-app-engine, database-design, oauth, google-cloud-datastore

对于我正在处理的项目，我需要存储用户访问令牌（以及我假设的身份验证代码和刷新令牌）。我为此使用 GAE，但我很难设计模型，这很简单。我没有使用 NoSQL 的经验，所以 GAE 数据存储很麻烦。

这是项目的全局架构

```
Android Mobile --- Python Server --- GAE Python Server
   |_______________________________________| 
```

用户将使用他们的谷歌帐户和 OAuth 通过 GAE 服务器通过 android 应用程序注册。然后我想我应该使用通过 GAE 检索的 user_id 创建一个用户对象。

之后我希望用户启用我的应用程序来访问一些云存储服务（Drive、Box、Dropbox，...）。一旦他这样做，我将拥有与此服务和用户相关的三个令牌，我需要以某种方式存储它们。

相对于 GAE 数据存储中的单个用户，存储多个服务的 Oauth 凭证的最佳方式是什么？

根据我的阅读，我可以使用 Expando 类并将服务逐个添加到用户实体，或者做一个单独的实体并使用引用和用户实体中的列表将它们存储，... 最相关的一条信息[GAE 凭证存储](https://developers.google.com/api-client-library/python/platforms/google_app_engine#Storage)。但是我怎么能将它用于多种服务，从而获得凭据呢？

我感谢大家的帮助

- - 编辑 - - - - - - - - - - - - - - -

看来我没有很好的关键词来研究这个主题。再过几个小时： [GAE - Google Developer - 建模实体关系](https://developers.google.com/appengine/articles/modeling)

```
class User(db.Model):
  name = db.StringProperty()

class ServiceOAuthAccess(db.Model):
  user = db.ReferenceProperty(User)
  service_name = db.StringProperty(choices=('Dropbox', 'Box', 'Drive'))
  .... 
```

但是，我还有一个问题：

我可以使用存储任何服务的 OAuth 令牌`com.google.api.client.auth.oauth2.Credential`吗？还是谷歌特有的？

也使用这个，我不会使用`AppEngineCredentialStore`. 如果我这样做会更好吗？反正我可以用这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T14:22:13.410

看来我没有很好的关键词来研究这个主题。再过几个小时：[GAE - Google Developer - 建模实体关系](https://developers.google.com/appengine/articles/modeling)

```
class User(db.Model):
  name = db.StringProperty()

class ServiceOAuthAccess(db.Model):
  user = db.ReferenceProperty(User)
  service_name = db.StringProperty(choices=('Dropbox', 'Box', 'Drive'))
  .... 
```

# asp.net-mvc-4 - 使用 MVC 4.0，RedirectToAction 不会将 PartialView 呈现为 Partial，它会发送整个页面

> ID：16131810
> 
> 赞同：4
> 
> 时间：2013-04-21T13:46:57.850
> 
> 标签：asp.net-mvc-4, c#-5.0, asp.net-mvc-partialview

我得到了一些复杂的东西，但我不明白为什么它不起作用：我的 Index.cshtml 中有一个 JSTree。当一个节点被选中时，我进行 Ajax 调用

```
public async Task<ActionResult> GetEBooksItems(string id) 
```

返回部分视图。这非常有效。

现在，除了树形搜索之外，我还有一个表单可以添加一些条件来缩小搜索范围。我使用 Ajax.BeginForm 将数据发布回控制器。

```
 public async Task<ActionResult> GetEBooksCustom(GenericSearchViewModel filter)
    {            
        vm = filter;
        //Session["GenreNodeId"] = id;
        Session["SearchCondition"] = (string.IsNullOrEmpty(vm.Condition) != true) ? vm.Condition : "All";
        Session["MaximumPrice"] = (string.IsNullOrEmpty(vm.MaxPrice) != true) ? vm.MaxPrice : "999999";
        Session["MinimumPrice"] = (string.IsNullOrEmpty(vm.MinPrice) != true) ? vm.MinPrice : "0";
        Session["SearchIndex"] = (string.IsNullOrEmpty(vm.SearchIndex) != true) ? vm.SearchIndex : "KindleStore";
        Session["SortOrder"] = (string.IsNullOrEmpty(vm.SortOrder) != true) ? vm.SortOrder : "price";
        Session["KeyWords"] = (string.IsNullOrEmpty(vm.Keywords) != true) ? vm.Keywords : "";
        Session["Title"] = (string.IsNullOrEmpty(vm.Title) != true) ? vm.Title : "";
        Session["Author"] = (string.IsNullOrEmpty(vm.Author) != true) ? vm.Author : "";
        return RedirectToAction("GetEBooksItems", new { id = vm.CategoryNodeId });                                    
    } 
```

到这个方法，然后用 RedirectToAction 调用第一个方法。

我一直在尝试我能想到的一切，我总是得到整个页面的结果，而不是像第一种方法那样的部分视图。

看起来对 GetEBooksCustom 的调用没有被“视为”为 Ajax 调用。我想念什么？谢谢你的帮助，伯纳德。

****** *** *** *6 小时后编辑****** ** *** ** *** ** *******

 **在这之间我做了建议，即从“GetEBooksItems”中提取功能，以便能够直接返回 PartialView 而不是使用 RedirectToAction。在调试器中，看起来一切都很完美，我看到来自服务器的 200 响应，但我仍然得到一个完整的页面显示，并且 url 显示控制器方法，而这不应该是 ajax 调用的情况。

问题是，我在其他地方有基本相同的表格，它可以按预期工作。看不出有什么不同？？？

一如既往，感谢您的帮助和建议。伯纳德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:23:36.227

我想这是因为`RedirectToAction`向您的浏览器返回 302 指示它，从字面上看，重定向到其他操作。您的浏览器通过重定向整个页面来处理这个问题。您应该（在某种程度上取决于`GetEBooksItems`方法的内容，能够通过直接调用另一个方法而不是使用重定向来解决这个问题：

```
return GetEBooksItems(vm.CategoryNodeId); 
```

或者，更好的是，将逻辑抽象`GetEBooksItems`到一个单独的方法中，重用它`GetEBooksCustom`并直接返回`PartialView`。这样，您根本不必解决重定向问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:24:38.727

我最终使用了[jQuery Form 插件](http://jquery.malsup.com/form/)而不是 Ajax.BeginForm。在为此浪费了几个小时之后，我花了大约 10 分钟才让它完全按预期工作！

对于那些可能感兴趣的人，这里有两种类型的编码：

```
 //using (Ajax.BeginForm("GetEBooksCustom", "Home", new AjaxOptions {
    //                            UpdateTargetId = "ListOfBooksHere", 
    //                          HttpMethod = "POST",                                    
    //                          OnBegin="ShowProcessingMsg",
    //                          OnComplete="HideProcessingMsg"

    $("#eBooksForm").ajaxForm({
        url: "/home/GetEBooksCustom",
        type: "POST",
        success: function(data) {
            $("#ListOfBooksHere").html(data);
        }
    }); 
```

我没有打扰 OnBegin 和 OnComplete，因为我正在使用这个：

```
 $(document).ajaxSend(function() {
        $('.loadingIndicator').show();
    });

    $(document).ajaxComplete(function() {
        $('.loadingIndicator').hide();
    }); 
```**

# java - JTextPane 中的可点击文本

> ID：16131811
> 
> 赞同：8
> 
> 时间：2013-04-21T13:47:04.953
> 
> 标签：java, swing, url, jtextpane

我有一个 JTextPane 声明如下：

```
JTextPane box = new JTextPane();
JScrollPane scroll = new JScrollPane();
StyledDocument doc = box.getStyledDocument();
scroll.setViewportView(box);
scroll = new JScrollPane(box); 
```

我正在向其附加文本，如下所示：

```
public void appendChatText(String text)
{   
    try
    {
        doc.insertString(doc.getLength(), text, null);
        box.setAutoscrolls(true);
        box.setCaretPosition(box.getDocument().getLength());    
    }
    catch(BadLocationException e)
    {
        e.printStackTrace();
    }
} 
```

我还设法轻松地让 JTextPane 根据需要显示图像和组件，但我不知道如何将可点击的文本编码到 JTextPane 中。例如，我希望它打印一条消息，上面写着“文件已上传到服务器。*接受**Decline*”，如果用户单击接受或拒绝字符串，则它会执行相应的功能。关于如何有效实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T16:24:49.820

我最终用一个 MouseListener 和一个扩展 AsbstractAction 的类来解决这个问题。我添加了我想成为 JTextPane 的可点击链接的文本，如下所示：

```
`Style regularBlue = doc.addStyle("regularBlue", StyleContext.getDefaultStyleContext().getStyle(StyleContext.DEFAULT_STYLE));
 StyleConstants.setForeground(regularBlue, Color.BLUE);
 StyleConstants.setUnderline(regularBlue, true);
 regularBlue.addAttribute("linkact", new ChatLinkListener(textLink));
 doc.insertString(doc.getLength(), textLink, regularBlue);` 
```

我在其他地方初始化了 JTextPane 上的 MouseListener，并将以下代码添加到我的侦听器类中：

```
public void mouseClicked(MouseEvent e)
        {
            Element ele = doc.getCharacterElement(chatbox.viewToModel(e.getPoint()));
            AttributeSet as = ele.getAttributes();
            ChatLinkListener fla = (ChatLinkListener)as.getAttribute("linkact");
            if(fla != null)
            {
                fla.execute();
            }
        } 
```

最后，这引用了实际执行操作的类：

```
class ChatLinkListener extends AbstractAction
    {
        private String textLink;

        ChatLinkListener(String textLink)
        {
            this.textLink = textLink;
        }

        protected void execute()
        {
            if("accept".equals(url))
            {
                //execute code
            }
            else if("decline".equals(url))
            {
                //execute code
            }
        }

        public void actionPerformed(ActionEvent e)
        {
            execute();
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T17:39:31.890

> 我还设法轻松地让 JTextPane 根据需要显示图像和组件......我希望它打印一条消息，上面写着“文件上传到服务器。接受*拒绝*”

为什么不添加“接受”和“拒绝”按钮？

否则，您可以使用 JEditorPane 来显示 HTML。然后您可以将 HyperlinkListener 添加到“Accept”和“Decline”文本中。阅读 JEditorPane API 以获取示例。当您单击文本时，HyperlinkListener 需要一个 URL，但我认为没有任何理由它不能只是一个字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-08T18:45:31.833

如果您不喜欢使用按钮，请使用 JLabel。

如果您使用的是 JTextPane，您可以使用 insertComponent() 方法插入与 JTextPane 字体具有相同字体的新 JLabel，您可以按照您想要的方式自定义 JLabel，例如将光标设置为手形光标，从而为其提供可点击的外观和感觉。

```
JLabel l=new JLabel("Click me");
l.setFont(textPane.getFont());
l.setCursor(new Cursor(Cursor.HAND_CURSOR));
l.addMouseListener(new MouseAdapter(){
   public void mouseClicked(MouseEvent me)
   {
         // your code
   }
});
textPane.insertComponent(l); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-21T14:01:12.890

将*mouselistener*添加到您希望可点击的文本并执行适当的操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T15:33:52.050

我认为它是您想要的“JOptionPane”类它应该为您提供可供选择的选项按钮 - 例如：（“ok”/“cancel”）

# c# - 与不可见网格的 Irrlicht 碰撞

> ID：16131815
> 
> 赞同：7
> 
> 时间：2013-04-21T13:47:26.700
> 
> 标签：c#, collision-detection, irrlicht

我正在用 Irrlicht 编写一个类似最终幻想的游戏引擎，具有 2D 背景和 3D 模型。为了计算与背景中物体的碰撞，我使用了一个像这样的不可见网格：

![在此处输入图像描述](https://i.stack.imgur.com/wSaaa.png)

我已经尝试过使用此代码，但是当玩家到达网格边缘时，它会掉下来：

```
TriangleSelector sel = device.SceneManager.CreateTriangleSelector(Program.field.currentScene.walkmeshLoaded, null);
CollisionResponseSceneNodeAnimator coll = device.SceneManager.CreateCollisionResponseAnimator(sel, playerNode);
playerNode.AddAnimator(coll);
coll.Drop();
sel.Drop(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T22:28:26.177

我没有使用您正在使用的系统，但是已经两天了，所以我想我会在黑暗中试一试。如果我没看错的话，听起来您正在使用预定义的系统和其中的网格。当玩家对象到达网格边缘时，它会从网格上掉下来，对吗？

听起来正在发生的事情是，您正在使用的引擎具有某种重力，并且该网格在底层之上（如果有的话）。把网格想象成一座桥；如果你离开边缘，你就会掉下来。您可能想要做的是沿着网格边缘设置墙壁以防止玩家从桥上掉下来，或者如果引擎允许，在网格上设置碰撞以防止玩家越过边缘。后者会是一个更好的主意，因为我假设您会希望敌人和 NPC 遵循这些相同的路径，而墙壁只是更多的碰撞检测（并且可能会妨碍飞行敌人等事情）。

我知道这不是一个确切的答案，但我希望这能得到一些想法。也许我很遥远，但这就是我从所提供的信息中想到的情况。

# ms-access - 访问/管理大小中的临时表

> ID：16131820
> 
> 赞同：0
> 
> 时间：2013-04-21T13:48:14.983
> 
> 标签：ms-access, ms-access-2007, vba

我有一个包含一些数据的 Access 文件。要执行某些计算，我需要使用来自原始数据的计算（生成）值创建某些表。这些临时表的大小约为每个条件 500 MB，我使用它。对于各种标准，这必须一遍又一遍地重复至少 50 次。

第一部分完成后 - 可以丢弃临时表。即使在删除行和删除表之后，Access 中的问题仍然存在，文件大小仍然很高。因此，在每次通过后，尽管丢弃了桌子，尺寸仍然会增加。很快，2GB 的墙就被击中了。

尝试过的解决方案： 1\. 使用 VBA - 创建一个临时 mdb 文件 -> 在此处创建表 -> 链接到原始访问文件 - 在此处保存生成值 -> 用于计算 -> 删除文件 重新开始。

将记录插入此表非常慢。我相信因为它是一个链接表。我要做的插入数量是几十万。

1.  使用 VBA 压缩和修复当前数据库 - 没有明确的答案。发送密钥工作 - 但失败证明。

2.  使用单独的 accdb 文件 'control_file_ ，它将在原始访问文件、删除表、压缩和修复上完成工作，然后为下一个标准重新做一遍。请为此提供 VBA 代码。VBA 代码中的这种连续性仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:37:20.637

我建议解决压缩数据库问题的最简单方法是简单地使用我不久前发布的代码以[编程方式重新启动和压缩 MSAccess 数据库](http://blog.nkadesign.com/2008/ms-access-restarting-the-database-programmatically/)。

否则，使用单独的临时数据库可能是最好的。关于性能的一件事：如果您注意保持链接表始终打开，则使用单独的链接数据库不会变慢。
使操作变慢的原因是数据库引擎需要过于频繁地创建和删除数据库锁定文件。如果您保持链接表打开（打开一个虚拟表的记录集并且不关闭它），那么锁定文件将保留并且您将获得适当的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T15:48:19.700

在 Access 2007 中的当前数据库中，压缩和修复是不可能的。您看到的所有关于此的技术要么是错误的，要么是指旧版本的 Access。

我遇到了与您相同的问题，最好的方法确实是拆分您的数据库，以便您可以在 BE 中执行计算并压缩和修复该临时数据库。此外，您在性能方面的问题实际上将使用 Renaud 的想法得到解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-09T16:17:24.783

我遇到了相同的问题，即我的数据库在导入原始数据时膨胀。我决定使用数据库对象 (DAO) 创建一个临时数据库，导入数据，从该临时数据库查询，然后删除它，而不是拆分数据库和常规压缩后端。基本代码如下所示：

```
Sub tempAccessDatabaseImport()
    Dim mySQL As String
    Dim tempDBPath As String
    Dim myWrk As DAO.Workspace
    Dim tempDB As DAO.Database
    Dim myObject

    'Define temp access database path
    tempPathArr = Split(Application.CurrentProject.Path, "\")
    For i = LBound(tempPathArr) To UBound(tempPathArr)
        tempDBPath = tempDBPath + tempPathArr(i) + "\"
    Next i
    tempDBPath = tempDBPath + "tempDB.accdb"

    'Delete temp access database if exists
    Set myObject = CreateObject("Scripting.FileSystemObject")
    If myObject.FileExists(tempDBPath) Then
        myObject.deleteFile (tempDBPath)
    End If

    'Open default workspace
    Set myWrk = DBEngine.Workspaces(0)

    'DAO Create database
    Set tempDB = myWrk.CreateDatabase(tempDBPath, dbLangGeneral)

    'DAO - Import temp xlsx into temp Access table
    mySQL = "SELECT * INTO tempTable FROM (SELECT vXLSX.*FROM [Excel 12.0;HDR=YES;DATABASE=" & RAWDATAPATH & "].[" & WORKSHEETNAME & "$] As vXLSX)"

    'DAO Execute SQL
    Debug.Print mySQL
    Debug.Print
    tempDB.Execute mySQL, dbSeeChanges

    'Do Something Else

    'Close DAO Database object
    tempDB.Close
    Set tempDB = Nothing

    myWrk.Close
    Set myWrk = Nothing

    'Delete temp access database if exists
    If myObject.FileExists(tempDBPath) Then
        'myObject.deleteFile (tempDBPath)
    End If
End Sub 
```

# asp.net - VB.NET：无法从引用访问函数

> ID：16131828
> 
> 赞同：1
> 
> 时间：2013-04-21T13:49:34.750
> 
> 标签：asp.net, vb.net, visual-studio-2010

我有一个项目 ，`Project 1`我已包含在另一个项目 ( `Project 2`) 中。我正在尝试从`Project 2`in访问 Function `Project 1`。我可以从 导航到我的解决方案中的函数`Project 2`，但是当尝试从我的文件中访问它时，我`Project 1`似乎无法访问。

我也尝试过添加引用，但是我收到一条消息说我已经引用了`Project 2`in `Project 1`; 我猜是当我将它添加到解决方案中时发生的。谁能帮我解决这个问题？谢谢！

**编辑** 也许我解释得不好我的解决方案的结构。这是我的解决方案资源管理器的“视觉”表示...

```
Solution 'Project1' (2 projects)
  Project1
     Folders
        Files
  Project2
     Folders
        Files 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T16:57:43.167

*   确保在要访问的项目中添加了对要访问的项目的引用。您可以通过右键单击解决方案资源管理器中的项目 > 添加参考来执行此操作。 > 单击解决方案选项卡 > 检查您要访问的项目 > 确定。

*   确保您要访问的课程是“公共”。

*   请记住使用您尝试在 Project2 中访问的任何内容的全名。例如，如果您有一个名为“MyClass”的类，它位于名为“SomeClasses”的命名空间内，则您必须像这样定位“MyClass”：*Project2.SomeClasses.MyClass*。您还可以使用“导入”关键字，这样您就不必每次都编写完整路径。

# jquery - jQuery Datatables 显示 1 到 NaN 的 NaN 条目

> ID：16131831
> 
> 赞同：1
> 
> 时间：2013-04-21T13:50:29.287
> 
> 标签：jquery, asp.net-mvc, datatables

我在我的视图中使用了 jQuery Datatable，如下所示；

```
<table id="CategoryGrid">
    <thead>
        <tr>
            <th>Id</th>
            <th>
                Name
            </th>
            <th>
                Description
            </th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table> 
```

以及 Datatable 的 javascript 代码；

```
 var catGrid = $('#CategoryGrid').dataTable({
        "bPaginate": true,
        "bServerSide": true,
        "bProcessing": true,
        "sAjaxSource": "@Url.Action("CategoriesGet")",
        "aoColumns": [
            {
                "sName": "CategoryId",
                "bSearchable": false,
                "bSortable": false,
                "fnRender": function (oObj) {
                    return '<a href=\"Company/Details/' + oObj.aData[0] + '\">View</a>';
                }
            },
            { "sName": "CategoryName" },
            { "sName": "CategoryDescription" }
        ]
    }); 
```

返回的JSON数据如下；

```
{"sEcho":"1","iTotalRecords":10,"TotalDisplayRecords":10,"aaData":[["1","For Sale","asdfasdf"],["2","Jobs","asdfasdfasdf"],["3","Classes","asdfasdf"],["4","Vehicles","asdfasdsadfa"],["45","test","asdff"],["46","asfd","sdf"],["47","test","sdf"],["48","another test","sfsdfsdf"],["49","another test","sdfsdfsdf"],["50","asfd","asdf"]]} 
```

**为什么我在 NaN 条目中显示 1 到 NaN**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T14:06:14.747

看起来你在`iTotalDisplayRecords`word 中有错字，你忘记了*i*字母前缀......

另外，看看这个[服务器端处理](http://datatables.net/usage/server-side)

一般来说，您从服务器的回复应包含：、、`iTotalRecords`和`iTotalDisplayRecords`属性...`sEcho``aaData`

> sEcho ：从客户端发送的未更改的 sEcho 副本。这个参数会随着每次抽奖而改变（它基本上是一个抽奖次数）——所以实现这一点很重要。请注意，出于安全原因，强烈建议您将此参数“强制转换”为整数，以防止跨站点脚本 (XSS) 攻击。

# c++ - 计算中间矢量角度

> ID：16131832
> 
> 赞同：0
> 
> 时间：2013-04-21T13:50:33.130
> 
> 标签：c++, vector, geometry

我有一个椭圆粒子系统，我正在尝试计算每个粒子的主轴与距下一个粒子中心的距离矢量之间的角度。这张照片应该很好地说明，我希望。 ![椭圆粒子矢量角](https://i.stack.imgur.com/0Pk2N.png)

在这个例子中，我在 (0,0) 和 (10,-10) 处初始化了两个粒子。每个粒子相对于笛卡尔系统的角度是 45 度。所以这两个是平行的。我想计算我在图片中标记为 90 度角的角度。

为此，我使用点积制作了这个功能：

```
 double temp = 0;
    double result = 0;
    double cosPhi = 0;
    double dotProd = 0;
    double cosTheta = cos(current->getTheta());
    //  If Theta = PI/2, there is a tiny difference between this rounded value
    // and the exact value of PI/2 due to double precision representation. This
    // gives cos(PI/2) = 6*10^-17 instead of 0\. So, manually set cos(PI/2) = 0.
    if(almostEqual(cosTheta,0))
        cosTheta = 0;
    double cellLengthX = current->getLength()*cosTheta;
    double cellLengthY = current->getLength()*sin(current->getTheta());
    double dist = Distance(current, next);
    if(dist == 0)
        return 0.0;
    //cout << "Dist " << dist << endl;
    // calculate the vector of distance 
    // next - current, because the end of the vector is the next cell,
    // while the start of the vector is the current cell.
    double distX = next->getCurrX() - current->getCurrX();
    double distY = next->getCurrY() - current->getCurrY();
    //cout <<"DistX " << distX <<" DistY " << distY << endl;
    // Dot product
    dotProd = cellLengthX*distX + cellLengthY*distY;
    //cout << "DotP " << dotProd << endl; 
    // angle from formula : vector_a*vector_b = |a||b|cos(phi)
    cosPhi = dotProd/(current->getLength()*dist);
    cout << "aCos " << acos(cosPhi) << endl;
    if(cosPhi == 1) // 0 degrees
    {
        return 0;
    }
    else if(cosPhi == -1) // 180 degrees 
    {
        return M_PI;
    }
    else if(cosPhi == 0) // 90 or 270 degrees
    {
        if(distX>0 || distY>0)
            return M_PI_2; // 90
        else
            return 3*M_PI_2; // 270
    }
    else if(-distX<=0 && -distY <0) // 1st quadrant -distX<=0
    {
        //cout << "Angle 1st :" << acos(cosPhi) << endl;
        return acos(cosPhi);
    }
    else if(-distX>=0 && -distY >0) // 3rd quadrant    -distX>=0
    {
        temp = acos(cosPhi);
        result = M_PI_2 + temp;
        //cout << "Angle 3rd :" << result << endl;
        return result;
    }
    else if(-distX >0 && -distY <=0) // 2nd quadrant  -distY <=0
    {
        //cout << "Angle 2nd :" << acos(cosPhi) << endl;
        return acos(cosPhi);
    }
    else if(-distX <0 && -distY >=0) // 4th quadrant    -distY >=0
    {
        temp = acos(cosPhi);
        result = 3*M_PI_2 + temp;
        //cout << "Angle 4th :" << result << endl;
        return result;
    } 
```

这种方法原则上是有效的，但是当我判断在哪个象限分配`acos(cosPhi)`. 正如我从其他人那里读到的那样（并发现自己）存在问题，`acos`因为您不知道在哪个象限中分配最终角度。

所以我用atan2(y,x)做了一个方法：

```
 double x1, y1, x2, y2, phi1, phi2, theta, omega;
    omega = 0;
    theta = current->getTheta();
    phi1 = 0;
    phi2 = 0;
    x1 = current->getLength()*cos(theta);
    y1 = current->getLength()*sin(theta);
    x2 = next->getCurrX() - current->getCurrX();
    y2 = next->getCurrY() - current->getCurrY();
    //phi1 = atan2(y1,x1);
    //phi2 = atan2(y2,x2);
    omega = atan2(y2-y1,x2-x1);//phi2 - phi1;
    cout << phi1 << "   " << phi2 <<  "   " << omega << endl;
    return omega; 
```

但是我得到的是第一个粒子的-90度（我想没关系）和第二个粒子的-180度，这是不行的。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:20:28.803

根据您的描述，很难确定，但是...试试这个：

```
double x2, y2, theta, omega;

theta = current->getTheta();

x2 = next->getCurrX() - current->getCurrX();
y2 = next->getCurrY() - current->getCurrY();

omega = atan2(y2,x2) - theta;
cout << omega << endl;
return omega; 
```

# jquery - 未捕获的类型错误：无法调用 null 的方法“datepicker”

> ID：16131836
> 
> 赞同：1
> 
> 时间：2013-04-21T13:50:39.483
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

**内联 JavaScript。**这应该是一个**js 冲突问题**，因为所有 javascripts 如果单独工作。 [源页面](http://rentbudapestapartments.com)

```
$(function () {
    $("input.datepicker").datepicker({
        minDate: "today",
        dateFormat: 'dd/mm/yy'
    });
});

$(document).ready(function () {
    $("input#leaving ").change(function () {
        var d = j$(this).val();
        if (d) $("input#arriving ").datepicker("option ", "minDate ", d);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:08:26.887

jQuery 包含两次：

首先在源代码的第 36 行：

```
36: <script type='text/javascript' src='http://www.rentbudapestapartments.com/wp-includes/js/jquery/jquery.js?ver=1.8.3'></script> 
```

源代码中第 58 行的第二个：

```
58: <script  type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.js"></script> 
```

第二个可能来自您从 WordPress 借来的或自动的模板。如果您可以控制它，我会在第 36 行删除第一个。

也在这条线上

```
var d = j$(this).val(); 
```

什么是`j$`？应该是这样的`$(this).val()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T22:02:16.093

感谢您提供有关两次调用脚本的意见。这可能会导致问题。我通过重命名 $ 变量来解决这个 cas**以避免 js 冲突**。

```
<script>
var abc = $;
$(function() {
abc("input.datepicker").datepicker({minDate:"today", dateFormat: 'dd/mm/yy'});
});
</script>
<script type="text/javascript">
var abc = $;
$(document).ready(function()
{
abc("input#leaving").change(function()
{
var d = abc(this).val();
if(d)abc("input#arriving").datepicker("option","minDate",d);
}
);
});
</script> 
```

这对我有用！

# c++ - 错误：“从属名称不是类型”。当在类中使用 typedef 类型作为返回值时，带有模板

> ID：16131838
> 
> 赞同：30
> 
> 时间：2013-04-21T13:50:47.193
> 
> 标签：c++

```
template <class Item>
class bag
{
public:
    //TYPEDEF
    typedef size_t size_type;
    typedef Item value_type;
...
} 
```

当我使用

```
template<class Item>
bag<Item>::size_type bag<Item>::count(const Item& target) const 
```

VC++ 报告错误为 Source.cpp(207): 警告 C4346: 'bag::size_type' : 依赖名称不是类型

谁能告诉我为什么？谢谢！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-21T13:52:47.077

它应该是

```
template<class Item>
typename bag<Item>::size_type bag<Item>::count(const Item& target) const 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-04-21T13:52:54.750

您需要在前面添加`typename`，`bag<Item>::size_type`因为它是*依赖类型*。

```
typename bag<Item>::size_type bag<Item>::count(const Item& target) const 
```

根据 C++11 标准：

> **14.6 名称解析**
> 
> 在模板声明或定义中使用并且依赖于模板参数的名称被假定为不命名类型，除非适用的名称查找找到类型名称或该名称由关键字限定`typename`。

相关：[我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

# java - android getThoroughfare 作为可写字符串？

> ID：16131842
> 
> 赞同：0
> 
> 时间：2013-04-21T13:51:13.960
> 
> 标签：java, android, location-based-service

我目前正在创建一个使用基于位置的变量的应用程序，并且为了参数，我想接受从`getThoroughfare()`和 afaik 分配的字符串，根据 API 它是一个字符串，但可以说我这样做

```
class Game extends MapActivity{

public random function(){
if(addresses!= null){
    Address address = addresses.get(0);
    this.locationText.append("\n" + address.getThoroughfare() + ", " + address.getLocality());  
        userLoc = address.getThoroughfare();
        System.out.println(userLoc);
        }
} 
```

这有效，将打印出街道的名称，但在另一个类中，如果我检查它

```
if(Game.userLoc == myStreetString){
//do stuff
} 
```

它不起作用，让我为匹配的字符串投保，什么给出？任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T13:59:47.977

您应该使用[equals](http://developer.android.com/reference/java/lang/String.html#equals%28java.lang.Object%29)而不是 == 来比较字符串。

```
if(Game.userLoc.equals(myStreetString)){ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-23T09:35:35.370

尝试使用以下代码

```
if(Game.userLoc.contains(myStreetString)){ 
```

下次请阅读地址文档上[地址的API文档](http://developer.android.com/reference/android/location/Address.html)

# java - Lotus Notes - Java UI - Eclipse 插件

> ID：16131848
> 
> 赞同：2
> 
> 时间：2013-04-21T13:51:56.277
> 
> 标签：java, eclipse, eclipse-plugin, lotus-notes, lotus

侧边栏插件可以使用动作监听器（或其他东西）来确定何时按下动作栏按钮“保存并发送邀请”（例如在新的日历条目中）？

如果是这样，它是否还可以在允许按钮操作继续之前拦截操作并执行后端或 ui 修改？

寻找有关如何给这只猫剥皮的任何想法（在编码过程中不会伤害任何实际的猫）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T18:47:28.803

单击 Notes 表单上的操作时运行的代码不是 Eclipse Java 代码，也不支持 Java 侦听器。要执行此类操作，您必须修改表单的设计（或共享操作，如果操作是共享的）。

另请注意，除了按操作按钮外，还有其他方法可以保存或发送文档。例如，您可以使用 Ctrl+S 保存，或按 Esc 以提示是否保存和/或发送。要拦截发送或保存尝试的每个场合，您必须使用表单（或子表单，如果有）的 Querysave 和/或 Querysend 事件。根据您正在处理的应用程序的设计，可能会有一个子表单专门用于在不编辑主表单的情况下进行自定义。

# android - 执行方法 OnDestroy 时如何显示活动

> ID：16131853
> 
> 赞同：1
> 
> 时间：2013-04-21T13:52:06.757
> 
> 标签：android

离开活动时如何显示活动，方法“OnDestroy”中的执行

```
protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        Bundle savedInstanceState = null;
        this.onCreate(savedInstanceState);

    //launch a code to display a activity   

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:55:05.367

`onCreate(savedInstanceState)`是您的方法中的`super`调用。像你开始任何事情一样做`onCreate()``Activity``Activity`

```
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
Intent intent = new Intent(CurrentActivity.this, NextActivity.class);
startActivity(intent);
} 
```

你现在在哪里`CurrentAcivity`，你想从哪里开始。`Actviity``NextActivity``Actviity`

[意图](http://developer.android.com/reference/android/content/Intent.html)

[活动](http://developer.android.com/reference/android/app/Activity.html)

通读上面的文档并特别注意活动生命周期。你不必这样做`onDestroy()`，如果这就是你在那里所做的一切，那么你根本不需要覆盖`onDestroy()`。您可以将其放在代码中的任何位置并调用`finish()`，`onDestroy()`系统会自动为您调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T14:01:21.957

您可以在此处查看此方法的文档。

[http://developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T14:22:58.003

onCreate 在创建活动时调用。

当您需要创建活动时，您不会调用它。

为了开始一个新的活动，调用 startActivity()。

# python - Python中的单字节乘法？

> ID：16131856
> 
> 赞同：2
> 
> 时间：2013-04-21T13:52:23.753
> 
> 标签：python, byte, multiplication

我需要使用简单的字节乘法来解码文件

对于文件中的每个字节，字节值乘以 0x69。结果不能是一个字，它必须是一个字节。

例子：

```
0x24 * 0x69 = 0xc4
0x6c * 0x69 = 0x4c
etc. 
```

很抱歉没有发布代码，但不知道现有的方法。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T13:56:07.957

关于什么

```
(0x6c * 0x69) & 0xFF 
```

?

如果你想要字符串中的十六进制表示，你可以这样做：

```
hex(result) 
```

# ruby - 在 S3 存储桶中复制文件（红宝石）

> ID：16131857
> 
> 赞同：9
> 
> 时间：2013-04-21T13:52:26.903
> 
> 标签：ruby, amazon-web-services, amazon-s3, buckets

我正在使用 gem aws-sdk-ruby 并且我想将文件 /images/image_a.png 复制到 /profile.png 都位于同一个存储桶中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T14:03:08.300

[从文档](http://docs.aws.amazon.com/AmazonS3/latest/dev/CopyingObjectUsingRuby.html)中提取，您必须使用`copy_to`. 例如：

```
s3 = AWS::S3.new

# Upload a file and set server-side encryption.
bucket1 = s3.buckets[source_bucket]
bucket2 = s3.buckets[target_bucket]
obj1 = bucket1.objects[source_key]
obj2 = bucket2.objects[target_key]

obj1.copy_to(obj2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-15T04:16:40.710

to do this with aws-sdk-v2 you can do the following:

```
bucket = Aws::S3::Bucket.new('my_aws_bucket')
bucket.object("new_photo_uploads/logos/my_new_copied_photo.png")
aws_response = object.copy_from(bucket.object("my_original_photo.png")) 
```

# python - 从python中的字符串中捕获选定的文本

> ID：16131859
> 
> 赞同：1
> 
> 时间：2013-04-21T13:52:35.407
> 
> 标签：python, regex, string

该变量`Field`存储一个字符串，如下所示：

```
Field = "In Field 'Testing':(Value1) has changed from (1) to (2)" 
```

我正在寻找一种从该变量中提取字段名称并将其存储为名为`name`. 在上面的示例中，字段名称是`Testing`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T13:55:49.740

您正在寻找的正则表达式是：

`'(.*?)'`

在 Python 中，您可以编写：

```
>>> import re
>>> Field= "In Field 'Testing':(Value1) has changed from (1) to (2)"
>>> print re.findall("'(.*?)'", Field) #Will print Testing 
```

得到之后`Testing`，我相信你打印出来就没有问题了`name=Testing`

* * *

**编辑**

要根据需要打印，您可以：

```
print ''.join(re.findall("'(.*?)'", Field)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T13:58:31.220

如果您不想使用正则表达式：

```
Field.split('\'')[1] 
```

或者另一种方式，

```
first_index = Field.index('\'') //Search for first '
second_index = Field.index('\'', first_index+1) //Search for second '
Field[first_index+1:second_index] //"Testing" //Substring 
```

# jquery - jQuery fancybox iframe 页面将内容更改为其他页面

> ID：16131861
> 
> 赞同：0
> 
> 时间：2013-04-21T13:52:43.593
> 
> 标签：jquery, fancybox

嗨，我正在使用 iframe 在 Fancybox 中创建表单。

我想在第一个弹出窗口上使用按钮来加载不同的页面。这是当前弹出窗口上按钮的代码。

```
<a href="javascript:parent.jQuery.fancybox.open({href : 'galeria_popup_form.html', title : 'My title'});">
<button class="cta_zaglosuj"></button></a> 
```

我不想在 iframe 中打开 iframe。我希望当前弹出窗口将其内容更改为不同的 html 文件。

如果没有浏览器将其理解为不安全的 JavaScript 尝试使用 URL 访问框架，是否有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:05:18.427

你需要这样的东西吗？（您应该知道您的 iframe id 或者如果它只是 iframe，那么只需将 #iframe_ID 更改为 iframe）：

```
$('.cta_zaglosuj').click(function(){
    $("#iframe_ID").attr("src") = "http://google.com";
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T14:04:58.723

好的，简单的链接正在同一个窗口中打开 href。愚蠢的问题，愚蠢的问题。

```
<a href="galeria_popup_form.html">
<button class="cta_zaglosuj"></button></a> 
```

# ruby-on-rails - Rails：重新应用上次迁移

> ID：16131863
> 
> 赞同：0
> 
> 时间：2013-04-21T13:52:52.987
> 
> 标签：ruby-on-rails, rails-migrations, rails-postgresql

有时会`rake db:migrate`尝试运行已成功迁移的迁移（没有任何错误）。当我检查 schema_migrations 表时，不存在重复迁移。

我注意到只有当我使用迁移来修改数据库中的数据而不更改数据库架构时才会发生这种情况（例如，更改表列的所有值）。

我的问题是，这种行为的原因是什么？在 Rails 中使用迁移来更改数据被认为是不好的做法吗？那么修改数据库数据的最佳方法是什么？

我正在使用带有 postgresql 的 rails 3.2.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:19:00.680

我认为迁移文件用于执行 DDL 部分

*   创建/删除表
*   添加/删除列
*   设置默认值

但是在使用 rails 近 9 个月以来，我现在使用 db 目录中的 seed.rb 文件来为 db 中的数据播种，您可以将其运行为

```
 rake db:seed 
```

# objective-c - 防止 UITableView 滚动到包含 textField 的单元格

> ID：16131873
> 
> 赞同：7
> 
> 时间：2013-04-21T13:53:38.427
> 
> 标签：objective-c

UITableView 似乎有一些自动行为，如果单元格包含 textField 或 textView，并且该字段或视图成为第一响应者，则 tableView 会自行滚动，以便单元格不会被键盘遮挡。我敢肯定，在大多数情况下，这非常方便。

就我而言，这不好。tableView 位于较小的 containerView 中，默认行为使该字段仍然被遮挡。我想自己处理整个容器的移动，而默认的滚动行为妨碍了我。

有谁知道我如何“关闭”UITableView 的这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T04:41:08.730

我遇到了同样的问题，我在一个较小的容器视图中有一个 UITableView，当我在 tableView 中选择一个 UITextField 时，它会自动滚动到不希望的位置。这是 UITableView 的默认行为，似乎没有任何方法可以将其关闭。

相反，我将这个 subView 控制器更改为 UIViewController 的子类，而不是 UITableViewController。即对于我的控制tableView的TransportViewController.h：

```
@interface TransportViewController : UITableViewController <UITextFieldDelegate> 
```

变成：

```
@interface TransportViewController : UIViewController <UITextFieldDelegate, UITableViewDataSource, UITableViewDelegate> 
```

通过将类设置为 UIViewController 类，表格单元格的自动滚动将不会发生。

既然您没有继承 UITableViewController，您现在必须手动设置“tableView”属性以指向适当的表格视图。您可以在 IB 中连接它，这将为您提供如下信息：

```
@property (strong, nonatomic) IBOutlet UITableView *tableView; 
```

最后，您还必须将这个新分配的 tableView 属性设置为表的委托和数据源。您可以在 'viewDidLoad' 方法中执行此操作，如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    _tableView.dataSource = self;
    _tableView.delegate = self;

} 
```

这将停止选择UITEXTFIELD时uitaiteViewController固有的自动滚动。然后由您来实现任何必要的 UITableViewDataSource 方法，并处理您自己的自动滚动方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-23T11:50:09.230

我通过实现该`scrollViewDidScroll:`方法（来自`UIScrollViewDelegate`协议）解决了这个问题。`UITableView`当键盘滚动时调用此方法。

这是我所做的：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    [tableViewController.tableView setContentOffset:CGPointMake(0., 0.)];
} 
```

# neo4j - 使用 Cypher 向 Neo4j 图形 2.0M01 添加标签

> ID：16131874
> 
> 赞同：2
> 
> 时间：2013-04-21T13:53:47.690
> 
> 标签：neo4j, cypher, graph-databases

试用最新的 Neo4j 2.0 M01。我还下载了完整的 cinecast graph.db 并根据 Michael 的精彩视频教程将其配置为与 2.0 商店一起使用，请参见此处：http: [//vimeo.com/63707662](http://vimeo.com/63707662)

我想熟悉标签，所以我的想法是向一些节点添加一些标签，这些节点被索引为用户，个人。

start n=node:Person("id: *") set n:Humans 返回计数 (* );

这行得通，它为所有被索引的节点添加了标签（但我无法在 Web 控制台中直观地看到它......但无论如何它在查询它时就在那里）

然而这不起作用：

```
neo4j-sh (0)$ start n=node:Person("id:*")  match n where ID(n)>700 and ID(n)<710 set n:Journalist return n; 
```

ResourceAcquisitionFailedException：事务被标记为仅回滚

两个问题：今天有任何类型转换函数字符串到 int 吗？ID(n) 是我唯一能更新索引的部分节点的东西，因为 id、names 等都是字符串。

其次，为什么不在上面的节点组上设置一个 Journalist 标签？ [http://docs.neo4j.org/chunked/2.0.0-M01/query-set.html#set-set-a-label-on-a-node](http://docs.neo4j.org/chunked/2.0.0-M01/query-set.html#set-set-a-label-on-a-node)

Als，标签可以是多个单词，例如：

```
start a=node(1,2,3,4) 
match a 
where a.name='Anders' 
set a:helicopter pilot
return a 
```

错误：预期的有效查询正文“设置 a：直升机飞行员”

最后，在 Neo4j api 文档中尝试查询时，node(0) 根目录中的某些内容不起作用，以下是有效的查询权（至少有用）？

```
start a=node(*) 
match a 
where a.name='Anders' 
return a 
```

错误：org.neo4j.cypher.EntityNotFoundException：节点 [0] 上不存在属性“名称”

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T17:43:21.300

太好了，你试试看。非常感谢您的反馈。

```
START n=node:Person("id:*")
MATCH n where ID(n)>700 and ID(n)<710 
SET n:Journalist 
RETURN n; //or count(*)

ResourceAcquisitionFailedException: The transaction is marked for rollback only 
```

这个错误不应该发生。

顺便提一句。在那个查询中你不需要`MATCH`.

`WITH`您可以使用和`LIMIT`/更新部分节点集`SKIP`

```
START n=node:Person("id:*") 
WITH n
// optional ORDER BY n.name
SKIP 700 LIMIT 10
SET n:Journalist
RETURN n; 
```

目前只有隐式类型转换 afaik，例如在添加字符串和数字时。

记者标签未设置失败交易的 b/c。

标签可以是多个单词，如果你用**反引号**引用它们。

```
start a=node(1,2,3,4) 
where a.name='Anders' 
set a:`helicopter pilot`
return a 
```

同样，您不需要`MATCH`在此查询中。

如果有一个节点没有 name 属性，您必须检查它之前是否存在，例如

`has(a.name) and a.name='Anders'`

有两种快捷方式，一种在属性不存在时返回 true（属性可选）

`a.name? ='Anders'`

当道具不存在时返回 false （需要属性）

`a.name! ='Anders'`

```
start a=node(*) 
match a 
where a.name?='Anders' 
return a 
```

# java - 如何在 Java 中的字符串 I/O 和对象 I/O 流之间切换？

> ID：16131877
> 
> 赞同：0
> 
> 时间：2013-04-21T13:54:03.660
> 
> 标签：java, bufferedreader, objectinputstream, objectoutputstream, printstream

我正在创建一个客户端-服务器应用程序，其中服务器或客户端使用 PrintStream 发送字符串并使用 BufferedReader/InputStreamReader 读取字符串。最终，我需要使用 ObjectInputStream/ObjectOutputStream 将对象从服务器发送到客户端，反之亦然。

如何从发送/接收字符串切换到发送/接收对象？我收到“无效的流标头：7372000E”。

以下是客户端的流部分（为简洁起见，我删除了所有例外）：

```
BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
BufferedReader fromServer;
PrintStream clientToServer;
try {
    fromServer = new BufferedReader(new InputStreamReader(sock.getInputStream()));
    clientToServer = new PrintStream(sock.getOutputStream());
} catch (IOException e) {
    System.out.println(e.getMessage());
    e.printStackTrace();
    return;
}

String username;
String opcode;
System.out.print(fromServer.readLine()); // MESSAGE 1
username = in.readLine();
clientToServer.println(username); // MESSAGE 2
System.out.println(fromServer.readLine()); // MESSAGE 3
if (!username.matches("[a-zA-Z]\\w+")) {
    return;
}
opcode = fromServer.readLine(); // MESSAGE 4 
```

如果 opcode1 的语句和文件内容，则：

```
ObjectInputStream ois;
ObjectOutputStream oos;
UUID u = null;
ois = new ObjectInputStream(new FileInputStream(f));
u = (UUID) ois.readObject();
oos = new ObjectOutputStream(sock.getOutputStream());
oos.writeObject(u); // MESSAGE 5 
```

操作码 2 的 Else 语句和更多文件内容，然后：

```
ObjectOutputStream oos;
ObjectInputStream ois;
UUID u;
ois = new ObjectInputStream(sock.getInputStream());
u = (UUID) ois.readObject(); // MESSAGE 5
System.out.println("UUID " + u.toString() + " received.");
oos = new ObjectOutputStream(new FileOutputStream(f));
oos.writeObject(u);
System.out.println("UUID " + u.toString() + " written to file."); 
```

服务器执行以下操作：

```
PrintStream output = new PrintStream(sock.getOutputStream()); 
BufferedReader input = new BufferedReader(new InputStreamReader(sock.getInputStream()));
output.println("Please enter your username: "); // MESSAGE 1
username = input.readLine(); // MESSAGE 2
output.println("Welcome back!"); // MESSAGE 3
output.println("opcode1") OR output.println("opcode2") // MESSAGE 4 
```

操作码 1 部分：

```
ObjectInputStream ois = new ObjectInputStream(sock.getInputStream());
UUID local = (UUID) ois.readObject(); // MESSAGE 5
if (user.getUUID().equals(local))
output.println("Your UUID is valid."); // MESSAGE 6 
```

操作码 2 部分：

```
ObjectOutputStream oos = new ObjectOutputStream(sock.getOutputStream());
oos.writeObject(u.getUUID()); // MESSAGE 5
output.println("You now have a UUID."); // MESSAGE 6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T14:22:59.817

如果您知道您将通过流发送不同的数据类型，您可以创建自己的“YourMessage”类来记录存储的数据类型。

```
private ObjectOutputStream sOutput;
private ObjectInputStream sInput;

class YourMessage {
    static final int STRINGTYPE = 0; OBJECTTYPE = 1; // etc
    int type;
    String str;
    // Any other message types

    // Constructor
    public YourMessage(int type, String str){
        this.type = type;
        this.str = str;
        // etc
    }

    // Create Getters here
    String getMessage(){
        return str;
    }

} 
```

然后通过 objectoutput 流发送消息，如下所示：

```
sOutput.writeObject(new YourMessage(YourMessage.STRINGTYPE, message)); 
```

然后在服务器上收到这个，

```
ym = (YourMessage) sInput.readObject();

switch (ym.getType()) {
    case YourMessage.STRINGTYPE:
        // do something with -
        ym.getMessage();
        break;
    case // other types of messages 
```

# c - 打印循环缓冲区

> ID：16131878
> 
> 赞同：0
> 
> 时间：2013-04-21T13:54:10.500
> 
> 标签：c, arrays, printing, struct, circular-buffer

我想知道如何打印出这个巨大的圆形缓冲区。前 3 个块是结构，而 while 循环在 main 中，这只是我的代码的一部分。我现在不关注格式或输出。这只是我应该得到的一个想法。这条线是我关注的地方：

```
// copies from and to destination of the string of the timestamp and the value.
strcpy(chart.buffer[asci].reading[chart.buffer[asci].end].timestamp,
  current.field[1]); 
```

我的输入是：

```
5、08:00:00、2、60  
5、08:00:01、5、15  
5, 08:00:10, 1, 986                     
5, 08:05:24, 2, 61  
5、08:07:21、2、58  
5, 08:10:11, 6, 0

```

我的输出应该是：

```

患者 ID = 5 的读数为：  
温度：  
08:00:10: 98.6   
心率：  
08:00:00:60  
08:05:24:61  
08:07:21:58  
收缩压  

舒张压  

呼吸频率  
08:00:11:15  

```

```
 /*
* Health Monitoring System
*/

#include <stdio.h>
#include <ctype.h>
#include <stdlib.h>
#include <string.h>

#define MAXPATIENTS 5
#define MAXREADINGS 10
#define MAXTYPES 5
#define MAXTIME 8

/* One health type reading: timestamp + actual value */
typedef struct{
    char timestamp[MAXTIME+1];
    int value;
}Element;

/* Circular buffer of health type readings */
typedef struct{
    int start;  /* index of oldest reading */
    int end;    /* index of most current reading */
    Element reading[MAXREADINGS];
}CircularBuffer;

/* Patient's health chart: ID + multiple health type readings */
typedef struct{
    int id;
    CircularBuffer buffer[MAXTYPES];
}Chart;

/*
* Health records for all patients defined here.
* The variable record is visible to all functions
* in this file, i.e. it is global.
*/
Chart record[MAXPATIENTS];  

typedef enum{false,true} bool;

typedef char f_string[30] ;

typedef struct{
    int nfields ;
    f_string field[30] ;
}health_line;

bool is_end_of_field(char ch){
    return (ch == ',') || (ch == '\n') || (ch == EOF);
}

int min(int x, int y){
    return x < y ? x : y;
}

//read the next field from standard input

int get_field(f_string field){
    int nextIndex;
    int next_char;
    next_char = getchar();
    for(nextIndex = 0; ! is_end_of_field(next_char); nextIndex++){
        field[nextIndex] = next_char;
        next_char = getchar();  
    }
    field[nextIndex] = '\0';
    return next_char;

}
// reads in a csv line and fields is filled with data
health_line get_line(){
    health_line line;
    int currentChar = 0;
    int lastChar;
    lastChar = get_field(line.field[currentChar++]);
    while(lastChar == ','){
        lastChar = get_field(line.field[currentChar++]);
    }
    line.nfields = (lastChar == EOF) ? 0: currentChar;
    return line;
}

void print_health(health_line data){
    int i =0;

    for(i = 0; i <data.nfields; i++){

        printf("%s \n",  data.field[i]);
    }

}
void print_line(health_line data){
    int type = atoi(data.field[2]);
    double tempType = atoi(data.field[3]);
    int patientID = atoi(data.field[0]);
    int value = atoi(data.field[3]);

    if(type == 1){
        tempType = tempType/10.0;
        printf("%s Temperature for Patient ID = %d is %.1f \n",data.field[1],patientID,tempType );  
    }
    else if(type == 2){
        printf("%s Heart Rate for Patient ID = %d is %d \n",data.field[1],patientID,value );
    }
    else if(type == 3){
        printf("%s Systolic Pressure for Patient ID = %d is %d \n",data.field[1],patientID,value );
    }
    else if(type == 4){
        printf("%s Diastolic Pressure for Patient ID = %d is %d \n",data.field[1],patientID,value  );
    }
    else if(type == 5){
        printf("%s Respiration Rate for Patient ID = %d is %d \n",data.field[1],patientID, value );
    }
    else if(type == 6){
        printf("%s Print command entered for Patient ID = %d \n", data.field[1], patientID);
    }   

}

void main(health_line data){
int i, j;

/* initialize health data records for each patient */

for( i=0; i < MAXPATIENTS; i++ ){
    record[i].id = i + 1;
    for( j=0; j < MAXTYPES; j++ ){
        record[i].buffer[j].start = 0;
    record[i].buffer[j].end = 0;
        }

}

printf("Welcome to the Health Monitoring System\n\n");

/*
*  YOUR CODE GOES HERE:
*  (1) Read a csv line of health data from stdin 
*  (2) Parse csv line into appropriate fields
*  (3) Store health data in patient record or print if requested
*  (4) Continue (1)-(3) until EOF
* 
*/
    health_line arrayTotal[30];
    health_line current;
    current = get_line();
    arrayTotal[0]  = current;
    int k = 0;
    int Index = 0;
    int printValue = atoi(data.field[2]);
    health_line temp;
    int asci;
    asci = atoi(current.field[2]);
    int printAsci;
    printAsci = atoi(current.field[2]); 
    double tempValue = 0.0;
    tempValue = atof(current.field[3]);
    int patientID;

    Chart chart;
    int valueType;

    //stores the current line read in to a temp array 
    while(asci != 6){

        current = get_line();
        asci = atoi(current.field[2]);
        patientID = atoi(current.field[0]); 
        arrayTotal[asci - 1] = current;

        //copies from and to destination of the string of the timestamp and the value.
        strcpy(chart.buffer[asci].reading[chart.buffer[asci].end].timestamp, current.field[1]);

        //why is this line giving me seg fault  
    //  chart.buffer[asci].reading[chart.buffer[asci].end].value = atoi(current.field[3]);

        if(chart.buffer[asci].start == chart.buffer[asci].end){
            chart.buffer[asci].start++;
        }
        chart.buffer[asci].end++;

    }   

    printf("\nReading for Patient ID = %d\n",patientID);

    //attempt to print out the result of the strcpy
    //printf("%s",chart.buffer[asci]);

    /*

    //checks the second field within an array to compare it to a condition to print out a certain string for a category
    int p;  
    int l;
        for(p = 0; p < 8; p++){
        health_line temp;
        temp = arrayTotal[p];

        int type;
        type = atoi(temp.field[2]);
        if(type == 1){
            printf("Temperature:\n%s: %.1f\n",temp.field[1],tempValue/10.0);
        }
        else if(type == 2){
            printf("Heart Rate:\n%s: %s\n", temp.field[1],temp.field[3]);
        }
        else if(type == 3){
            printf("Systolic Pressure:\n%s %s\n", temp.field[1],temp.field[3]);
        }
        else if(type == 4){
            printf("Diastolic Pressure:\n%s: %s\n", temp.field[1], temp.field[3]);
        }
        else if(type == 5){
            printf("Respiration Rate:\n%s: %s\n", temp.field[1], temp.field[3]);        
        }

    }*/         
      } 
```

# android - 要求打开蓝牙时程序不会停止

> ID：16131879
> 
> 赞同：0
> 
> 时间：2013-04-21T13:54:19.403
> 
> 标签：android, bluetooth, dialog

我尝试使用对话框`BluetoothAdapter.ACTION_REQUEST_ENABLE`询问用户是否打开蓝牙，但是当我使用它时，程序并没有等待对话框结束。
我必须知道用户是否允许打开蓝牙，这样如果他不允许，我可以返回到以前的活动。即使使用也无法获得结果`onActivityResult`。

我怎样才能得到对话的结果，怎样才能让程序等待对话的结果？

我尝试使用的对话框：

```
private int REQUEST_ENABLE_BT = 100;  
...  
Intent btEnable = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);  
startActivityForResult(btEnable, REQUEST_ENABLE_BT); 
```

之后它就继续进行而不等待结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:12:42.950

所以现在代码中的正确答案......

```
//Global  
REQUEST_CODE_1 = 0;  
REQUEST_CODE_2 = 1;

onCreate(Bundle savedInstanceState)  
{  
    super.onCreate(savedInstanceState);  
    Intent dialog = new Intent(myclass.this, dialog1.class);  
    startActivityForResult(dialog, REQUEST_CODE_1);  
}  

onActivityResult(int requestCode, int resultCode, Intent data)  
{  
if(requestCode == REQUEST_CODE_1)  
{
   if(resultCode == RESULT_OK)  
   {  
       Intent nextDialog = new Intent(myclass.this, nextDialog.class);  
       startActivityForResult(nextDialog, REQUEST_CODE_2);  
   }  
}

if(requestCode == REQUEST_CODE_2)  
{...}  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:06:28.723

> 但是当我使用它时，程序并没有等待对话框结束

这是不应该的。`startActivity()`并且`startActivityForResult()`是异步的。

> 我只是没有调用 onActivityResult。

你不打电话`onActivityResult()`。你实施`onActivityResult()`. 当用户完成您通过 启动的活动时，它将被调用`startActivityForResult()`。这在[文档](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)中有所介绍。

> public void onActivitResult(int RequestCode, int ResultCode, Intent Data) { super.onActivityResult(RequestCode, ResultCode, Data); if(RequestCode == REQUEST_ENABLE_BT).... } 这没有被调用

那是因为您拼写错误的方法名称。它是`onActivityResult()`，不是`onActivitResult()`。使用`@Override`注释来帮助检测这类问题。

> 我怎样才能得到对话框的结果

在`onActivityResult()`中，查看是否启用了蓝牙。

> 以及如何让程序等待对话框的结果？

你没有。Android 是事件驱动的；您通过`onActivityResult()`.

# java - 接口实现可比？

> ID：16131881
> 
> 赞同：0
> 
> 时间：2013-04-21T13:54:22.937
> 
> 标签：java, comparable

我们是几个朋友设计一个有趣的游戏。在我们的游戏中，我们让所有敌人都实现了一个`Combatable`接口，让实现者决定他们想要如何进行战斗，这使得添加不同种类的敌人变得非常容易。我们有（我们正处于测试阶段）一个炮塔，如果该敌人在射程内，它会每秒向最近的敌人射击。

我们希望以某种方式实现此接口`Comparable<Combatable>`，以便我们可以按与塔的距离对集合进行排序，因此我们只需要检查集合中的第一个元素是否在攻击范围内。我们意识到一个简单的解决方案是为可战斗对象创建一个包装类，除了实现之外什么都不`Comparable`做，但我们真的必须这样做吗？我意识到考虑一个接口实现另一个接口是没有意义的，但除此之外，它对于这种特定用途来说非常方便。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T13:55:57.667

一个接口不能实现**另一个**接口，但它可以**扩展**任意数量的其他接口。

做就是了

```
interface Combatable extends Comparable<Combatable> { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T13:57:30.847

接口扩展了另一个接口但没有实现它，因为接口不包含实现。所以你可以扩展可比性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T14:48:51.727

*   使用接口来定义类型。

*   创建一个新**类型**（Measurable），定义可在塔（或如果其超类型，例如**Building**）位置排序的事物。

*   然后让你的**Enemy**类实现**Combatable**和**Measurable**接口。现在你的敌人是可分​​类的塔。
*   编写新的比较器，将敌人与塔的位置进行分类。

.

```
interface Measurable { 

   // Compute the distance from a turret.
   // It would be better if you use a superclass of Turret to make your method more general
   double distance(Turret p);

};

class Enemy extends Measurable, Combatable {
};

class Turret {

  ...

  Position pos() { return pos; }

  boolean isInRange(Combatable c) { ... }

  void hit(Combatable combatable) { ... }

};

DistFromTurretComparator implements Comparable<Enemy> { 

  DistFromTurretComparator(Turret turret) { 
      this.turret = turret;
  }

  private int compareTo(Enemy other) {
      int dist = distance(turret);
      int oDist = other.distance(turret);

      return  dist > oDist ? + 1 : (dist < oDist ? -1 : 0);
  }

  private final Turret turret;

};

// Main
Tower tower = new Toweer(); 
List<Combatable> enemies = new ArrayList<>(Arrays.asList(enemy1, enemy2, ...));

Collections.sort(enemies, new DistFromTurretComparator(tower));
Enemy nearestEnemy = enemies.get(0);

if (tower.hasInRange(enemy)) {
    tower.hit(enemy);
} 
```

# windows-phone-7 - 使用 WP 调整图像大小并将 blob 更快地上传到 windows azure

> ID：16131890
> 
> 赞同：2
> 
> 时间：2013-04-21T13:55:54.210
> 
> 标签：windows-phone-7, azure, azure-blob-storage, blobstorage

我正在尝试构建一个 Windows 手机应用程序来将图像上传到天蓝色存储。我目前正在使用 nuget 包 - 适用于 Windows Phone 的 Windows Azure 存储客户端库以及用于上传图像的代码示例，但图像需要永远上传。在上传图像之前，我已经厌倦了调整图像大小。但是，我需要先将图像转换为位图，然后才能调整它的大小，然后我不知道如何将其更改回照片流以将其上传到天蓝色？

```
using System.Windows.Media.Imaging;

//Initialize and load your image.
var myImage = new WriteableBitmap();
int newWidth, newHeight;
var resizedImage = myImage.ResizeBicubic(newWidth, newHeight); 
```

我该如何调整图像大小并将其上传到 Windows azure，还有其他方法可以加快上传过程吗？

# android - 如何在android的按钮上方放置一个小文本？

> ID：16131893
> 
> 赞同：0
> 
> 时间：2013-04-21T13:56:07.987
> 
> 标签：android

我正在尝试制作一个计算器应用程序。我想在我的一些按钮上方设置一个小文本。我正在使用 LinearLayout 放置按钮 - 每行 5 个。我应该在按钮上方使用一个小的 TextView 还是我可以使用按钮的任何属性？但是在这种情况下，如何确保文本位于每个按钮的正上方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:05:52.580

您可以使用`RelativeLayout`代替和使用和/或`LinearLayout`的属性`android:layout_below=``android:layout_above=`

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Some Text" />

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:onClick="doSomething"
    android:text="This Button" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T14:08:17.950

在你的`LinearLayout`for 5 个按钮中，每个元素应该是另一个`LinearLayout`，这次是垂直的，然后使用 a`TextView`作为文本，然后是 a`Button`作为按钮。

```
<LinearView orientation='horizontal'>
    <LinearView orientation='vertical'>
        <TextView />
        <Button />
    </LinearView>
    <LinearView orientation='vertical'>
        ...
    </LinearView>
    ...
</LinearView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T14:04:47.497

您可以使用[GridLayout](http://developer.android.com/reference/android/widget/GridLayout.html)或者您可以为每个按钮添加另一个垂直线性布局，您可以在其中放置 textview 和按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T14:12:17.427

```
 <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <Button
        android:text=button"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

# c++ - ConcRT 的定期任务

> ID：16131897
> 
> 赞同：0
> 
> 时间：2013-04-21T13:56:37.843
> 
> 标签：c++, ppl, concurrency-runtime

我正在编写一个 C++ 应用程序，除其他职责外，它会定期（每小时一次）向服务器发出请求。
此计划任务可以被中断并强制执行更早（当应用程序接收到新的用户数据时）。为此，我决定使用 ConcRT。

*   有没有这种调度的标准方式（如 Win32 中的定时器队列）但有任务和任务组？
*   还是我应该将任务与延续联系起来？
*   也许代理库更适合这个？（我认为这对我的问题来说太过分了）

PS HTTP 请求是使用老式 WinHTTP 发出的（可执行文件不能依赖第三方库并保持较小的大小）。那么有没有符合 ConcRT 机制的 HTTP 请求功能的异步实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T15:05:47.810

您可以为此使用[concurrency::timer](http://msdn.microsoft.com/en-us/library/dd492468.aspx)类

# c - 为什么 printf 不在控制台上打印“操作员”？

> ID：16131899
> 
> 赞同：0
> 
> 时间：2013-04-21T13:56:45.950
> 
> 标签：c

底部`printf()`不在控制台上打印运算符变量。但只有`number1`和`number2`被打印出来。可能是什么原因？

输出： 2 7 是多少？

```
char operator;

    switch(type){   
        case 1: 
        operator=='+';
        result=number1+number2;
        break;
        case 2: operator=='-';
        result=number1-number2;
        break;
        case 3: operator=='*';
        result=number1*number2;
        break;
        case 4: 
        operator=='/';
        result=number1/number2;
        break;

    }       
    printf("How much is %d %c %d ?",number1, operator, number2); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-21T13:58:09.073

```
operator=='+'; 
```

应该

```
operator='+'; 
```

其他运营商也一样

c中的赋值`=`只有

相等的比较是用`==`例子`if(operator == '+')`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T14:01:22.103

`==`是相等运算符，它不分配值只是检查两侧是否相等。

您必须使用赋值运算符`=`。

例如：

`operator='/'`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-21T14:02:08.037

您使用的是**比较运算符**，而不是使用**赋值**运算符。`=`**`==`**

 **因此之后的`operator=='+'`值`operator`保持不变。**

# ruby-on-rails - BackboneJS 同步助手（如 Backbone.sync.rails）的目的是什么？

> ID：16131901
> 
> 赞同：3
> 
> 时间：2013-04-21T13:57:11.407
> 
> 标签：ruby-on-rails, backbone.js

我正在试验 Rails-BackboneJS 堆栈，我在一些演示项目中看到了 Backbone.sync.rails 的使用，例如这种风格： [https ://github.com/codebrew/backbone-rails/blob/master/vendor /assets/javascripts/backbone_rails_sync.js](https://github.com/codebrew/backbone-rails/blob/master/vendor/assets/javascripts/backbone_rails_sync.js)

据我了解，这会覆盖主干模型和集合的同步功能。然而，就我而言，我得到了一些奇怪的效果（模型中的意外嵌套，空集合）。

所以，我问自己，Rails 同步助手的目的是什么？何时（不）使用这些助手时需要考虑哪些重要事项？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T05:33:33.097

Sync 本质上是 Backbone 用于所有低级数据处理定制的通用挂钩。他们在同步文档中说了这么多：

> Backbone.sync 是 Backbone 每次尝试读取或保存模型到服务器时调用的函数。默认情况下，它使用 jQuery.ajax 发出一个 RESTful JSON 请求并返回一个 jqXHR。您可以覆盖它以使用不同的持久性策略，例如 WebSockets、XML 传输或本地存储。

在 Rails 同步助手的情况下，作者甚至没有改变同步的基本性质（例如，改为本地存储）。相反，他的同步仍然“使用 jQuery.ajax 发出 JSON 请求并返回 jqXHR”，但它：

1.  将 CSRF 令牌添加到请求中
2.  添加一个可选的“paramRoot”属性，您可以使用它来指定模型的数据应该添加到请求中

你可以在这里看到#1：

```
beforeSend: function( xhr ) {
    if (!options.noCSRF) {
      var token = $('meta[name="csrf-token"]').attr('content');
      if (token) xhr.setRequestHeader('X-CSRF-Token', token);  
    }
    model.trigger('sync:start');
} 
```

和＃2这里：

```
if(model.paramRoot) {
    data[model.paramRoot] = model.toJSON();
} else {
    data = model.toJSON();
} 
```

我无法确切地说出你为什么会得到

> 奇怪的效果（模型中的意外嵌套，空集合）

但我个人建议只编写自己的`Backbone.sync`. 正如您所看到的，实现它的功能并不多，通过制作您自己的自定义功能，您可以从本质上理解它的工作原理（这很好，因为它对您的应用程序非常重要）。

或者，您可以完全避免整个`Backbone.sync`覆盖方法。相反，您可以使用其他机制，例如 jQuery`.ajaxSend()`来处理 #1 或您自己的自定义`Model.toJSON`覆盖 #2。

# java - Java平台游戏碰撞

> ID：16131905
> 
> 赞同：0
> 
> 时间：2013-04-21T13:57:42.707
> 
> 标签：java, collision

我试图让玩家无法从左右穿过平台，并让玩家停在平台顶部。到目前为止，我所拥有的碰撞只是左右，但右侧不起作用，左侧正在窃听。我无法弄清楚如何进行平台游戏的基本碰撞，谁能给我一个可行的解决方案？

播放器类代码：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Rectangle;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

public class Player implements KeyListener
{
int x, y, width, height;

boolean jump, left, right;

PlayerThread playerThread;

int maxHeight = 40;
double heightC = 0;
boolean onPlatform = false;
boolean landed = true;
int prevY;
int prevX;
Rectangle playRect = new Rectangle();
boolean leftCollision = false;
boolean rightCollision = false;
Platform p;

public Player()
{
    x = 500;
    y = 350;
    width = 40;
    height = 50;
    playerThread = new PlayerThread();
    playerThread.start();
}

public void paint(Graphics g)
{
    String str = String.valueOf(x);
    String str2 = String.valueOf(y);

    g.setColor(Color.RED);
    playRect.setBounds(x, y, width, height);
    g.fillRect(x, y, width, height);

    g.drawString("X: " + str + ", Y: " + str2, 100, 100);
}

public void update(Platform p)
{
    this.p = p;
    CheckForCollision(p);

}

public void CheckForCollision(Platform p)
{
    int pX = p.getX();
    int pY = p.getY();
    int pWidth = p.getWidth();
    int pHeight = p.getHeight();

    //COLLISION WITH PLATFORM CODE
    if (playRect.intersects(p.plat) && left == true && !jump && !right && landed)
    {
        System.out.println("LEFT");
        x = prevX;
        leftCollision = true;
    }
    else
    {
        leftCollision = false;
    }

    if (playRect.intersects(p.plat) && right == true && !jump && !right && landed)
    {
        System.out.println("RIGHT");
        x = prevX;
        rightCollision = true;
    }
    else
    {
        rightCollision = false;
    }
}

public class PlayerThread extends Thread implements Runnable
{
    public void run()
    {
        while (true)
        {
            if (left && !leftCollision)
            {

                prevX = x;
                x -= 2;

            }

            if (right && !rightCollision)
            {
                prevX = x;
                x += 2;
            }

            if (jump)
            {
                if (heightC >= maxHeight)
                {
                    System.out.println(heightC);
                    jump = false;
                    heightC = 0;
                }
                else
                {
                    heightC += 1.5;
                    prevY = y;
                    y -= 5;
                    landed = false;
                }
            }

            //GRAVITY CODE
            if (!jump && !landed)
            {
                if (y < 400 - height)
                {
                    prevY = y;
                    y += 5;
                    //landed = false;
                }
            }

            if (y >= 400 - height && !landed)
            {
                y = 400 - height;
                landed = true;
            }

            try
            {
                sleep(17);
            } 
            catch (InterruptedException e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
}

@Override
public void keyPressed(KeyEvent e)
{
    switch (e.getKeyCode())
    {
    case KeyEvent.VK_LEFT:

        left = true;
        break;
    case KeyEvent.VK_RIGHT:
        right = true;
        break;
    case KeyEvent.VK_SPACE:
        if (landed)
        {
        jump = true;
        }
        break;
    }
}

@Override
public void keyReleased(KeyEvent e)
{
    switch (e.getKeyCode())
    {
    case KeyEvent.VK_LEFT:
        left = false;
        break;
    case KeyEvent.VK_RIGHT:
        right = false;
        break;
    case KeyEvent.VK_SPACE:
        break;
    }
}

public int getX()
{
    return x;
}

public void setX(int x)
{
    this.x = x;
}

public int getY()
{
    return y;
}

public void setY(int y)
{
    this.y = y;
}

public int getWidth()
{
    return width;
}

public void setWidth(int width)
{
    this.width = width;
}

public int getHeight()
{
    return height;
}

public void setHeight(int height)
{
    this.height = height;
}

@Override
public void keyTyped(KeyEvent e)
{
    // TODO Auto-generated method stub

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-21T00:00:26.067

这是我长期以来一直在努力解决的问题，我知道有很多解决方案。显然，您需要根据发生碰撞的平台的任何一侧来重置玩家的位置。

所以我要做的是首先检查矩形是否相交。然后我试图找出它与平台的哪一侧发生碰撞。我通过在播放器矩形的每一侧的外侧创建一个矩形来做到这一点。然后我得到平台矩形与每个边矩形的交集。然后我计算交叉点的面积。交叉点面积最大的那一侧就是发生碰撞的那一侧。然后你可以根据他碰撞到的平台的一侧来重置玩家的位置。[我创建了一个 Mask 类，使它在我的游戏引擎](http://youtu.be/LOBSNFYeGXk)中非常容易使用

复杂的部分看起来像这样。掩码是我用来表示矩形的类

此方法返回一个布尔数组，其中一个为真是发生碰撞的一侧

```
public static int left=2,top=3,right=0,bottom=1;
public boolean[] collisionSide(Mask m){

    boolean[] leftUp = new boolean[4];

    Rectangle[] boxes = new Rectangle[4];
    boxes[0] = new Rectangle(this.getRect().x-1, this.getRect().y, 1, this.getRect().height);
    boxes[1] = new Rectangle(this.getRect().x, this.getRect().y-1, this.getRect().width, 1);
    boxes[2] = new Rectangle(this.getRect().x + this.getRect().width, this.getRect().y, 1, this.getRect().height);
    boxes[3] = new Rectangle(this.getRect().x, this.getRect().y+this.getRect().height, this.getRect().width, 1);

    double greatestArea = 0;
    int greatest = 0;

    for( int bbb = 0; bbb<4; bbb++){
        if( Calc.getArea( boxes[bbb].createIntersection(m.getRect() ) ) > greatestArea){
            greatestArea = Calc.getArea( boxes[bbb].createIntersection(m.getRect() ) );
            greatest = bbb;
        }
    }

    for(int b=0; b<4; b++)
        leftUp[b] = false;

    leftUp[greatest] = true;

    return leftUp;
} 
```

# oop - 向下转换的实际用途

> ID：16131922
> 
> 赞同：0
> 
> 时间：2013-04-21T14:00:41.680
> 
> 标签：oop, downcast

我已经阅读了有关多态性和继承的章节，并完成了我的 Java 书籍中的所有练习。但我仍然不明白为什么我需要在实践中使用向下转换。你能否举一些你不得不使用向下转换的工作或项目的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:21:44.000

*假设您有一个基类，以及一个直接或间接从该基类派生的类。然后，只要将该基类类型的对象类型转换为派生类类型，就称为向下转换。*您需要向下转换以使实例特定。例如，假设`getobject()`是一个返回 a 的方法`Object`，因为`String`它是 的子类`Object`，所以该方法也可能返回 a `String`。

**情况（一）：**

```
Object o = getObject(); 
```

在这里，您已将方法返回的对象分配给`Object`引用变量。因此，您只能调用`Object`实例上类中定义的方法`o`。

**情况（ii）：**

```
Object o = getObject();
if(o instanceof String)
  String s = (String)o; 
```

在这里，如果`getobject()`实际上已经返回了一个`String`实例，那么您将它向下转换为`String`. 这样做的好处是您可以调用`String`在`s`Case(i) 中无法完成的方法。

# javascript - DataTables - 使用列名而不是索引

> ID：16131924
> 
> 赞同：4
> 
> 时间：2013-04-21T14:00:58.123
> 
> 标签：javascript, jquery, datatables

我有一个[DataTables](http://datatables.net)设置如下。

```
var pageData = [
    {
        "id":"2",
        "slug":"about\/history",
        "title":"History",
        "last_updated":"2013-04-21 09:50:41"
    },

    {
        "id":"3",
        "slug":"about",
        "title":"About",
        "last_updated":"2013-04-21 10:42:22"
    }
];

$(function () {
    $("#pageList").dataTable({
        "aaData"      : pageData,
        "aoColumns"   : [
            {
                "sTitle" : "slug"
            },
            {
                "sTitle" : "title"
            },
            {
                "sTitle" : "last_updated"
            },
            {
                "sTitle" : "id"
            }
        ]
    });
}); 
```

现在，当我运行它时，我收到以下错误警报

```
DataTables warning (table id = 'pageList'): 
    Requested unknown parameter '0' from the data source for row 0 
```

我认为这是因为数据表使用索引而不是列名来访问来自`pageData`. 我以为`sTitle`会做这项工作，但事实并非如此。`sName`现在，除了仅在将数据发送到服务器时使用之外，我找不到合适的选项来为数据表指定列名。

我觉得解决方案将是一个我忽略的简单解决方案。好吧，我在这里错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:27:22.460

jQuery 数据表接受数据作为数组的数组。因此，您必须将数据从对象数组转换为数组数组。

```
var pageData = [{
    "id": "2",
        "slug": "about\/history",
        "title": "History",
        "last_updated": "2013-04-21 09:50:41"
},

{
    "id": "3",
        "slug": "about",
        "title": "About",
        "last_updated": "2013-04-21 10:42:22"
}];

var aaPageData = [];
for (var i = 0; i < pageData.length; i++) {
    var item = pageData[i];
    aaPageData[i] = [item.slug, item.title, item.last_updated, item.id];
}

$(document).ready(function () {
    $("#table").dataTable({
        "aaData": aaPageData,
        "aoColumns": [{
            "sTitle": "slug",
        }, {
            "sTitle": "title"
        }, {
            "sTitle": "last_updated"
        }, {
            "sTitle": "id"
        }]
    });
}); 
```

演示：http: [//jsfiddle.net/BYcsk/](http://jsfiddle.net/BYcsk/)

编辑：你不需要转换。您可以通过指定`mData`列的属性来实现此目的。错误来了，因为你没有给出它。

```
var pageData = [{
    "id": "2",
        "slug": "about\/history",
        "title": "History",
        "last_updated": "2013-04-21 09:50:41"
},

{
    "id": "3",
        "slug": "about",
        "title": "About",
        "last_updated": "2013-04-21 10:42:22"
}];

$(document).ready(function () {
    $("#table").dataTable({
        "aaData": pageData,
        "aoColumns": [{
            "sTitle": "slug",
            "mData": "slug"
        }, {
            "sTitle": "title",
            "mData": "title"
        }, {
            "sTitle": "last_updated",
            "mData": "last_updated"
        }, {
            "sTitle": "id",
            "mData": "id"
        }]
    });
}); 
```

演示：http: [//jsfiddle.net/BYcsk/3/](http://jsfiddle.net/BYcsk/3/)

# c++ - 使用模板方法进行不一致的字符串排序

> ID：16131934
> 
> 赞同：1
> 
> 时间：2013-04-21T14:01:59.090
> 
> 标签：c++, string, templates, sorting

我正在尝试做一个对 3 个元素进行排序的模板函数，
数字（int，double）工作正常，但字符串的行为不符合预期

```
#include <cstdlib>
#include <algorithm>
#include <iostream>

using namespace std;

template<typename TYPE>
void sort3(TYPE n1, TYPE n2, TYPE n3) {
    TYPE arr[3];
    arr[0] = n1;
    arr[1] = n2;
    arr[2] = n3;
    sort(arr, arr + 3);

    for (int i = 0; i < 3; i++) {
        cout << arr[i] << " ";
    }
    cout << endl;
}

int main(int argc, char** argv) {
    sort3("B", "Z", "A");
    sort3(10.2, 99.0, 1.9);
    sort3(200, 50, 1);
    return 0;
} 
```

给我以下输出：

> AZB
> 
> 1.9 10.2 99
> 
> 1 50 200

`sort3("B", "Z", "A");`据我了解`A B Z`
，它不是特定于操作系统的，因为它在[在线编译器](http://ideone.com/7Q402J)
中给了我相同的结果， 那里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T14:04:22.267

那是因为您传递的是字符串文字，它们是字符数组。当将它们作为参数传递给函数时，**数组会衰减为指针**。因此，您要排序的是这些指针的*值*（而不是它们指向的字符串）。

尝试这个：

```
#include <string>

// ...

sort3(std::string("B"), std::string("Z"), std::string("A")); 
```

`operator <`这是有效的，因为存在for的重载`std::string`，并且在自定义比较器未作为第三个参数传递时用于比较元素（这是您的情况）[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)。`operator <`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T14:04:02.637

您最终会比较指针而不是实际的字符串内容。解决它的一种方法是这样的：

```
sort3(std::string("B"), std::string("Z"), std::string("A")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T14:43:09.150

如果您想继续调用 sort3 ，`const char*`您可以添加一个“专业”模板：

```
template<>
void sort3(const char* n1, const char* n2,const char* n3) {
    sort3( string(n1), string(n2), string(n3));
} 
```

这 `sort3("B", "Z", "A");` 也将起作用。

但是您的问题“那里发生了什么？” Andy Prowl 已经回答了。

# actionscript-3 - 使用 printJob 时 MouseEvent 出现问题

> ID：16131937
> 
> 赞同：0
> 
> 时间：2013-04-21T14:02:05.517
> 
> 标签：actionscript-3

我正在使用 AS3 和 AIR 进行演示，需要能够打印单个幻灯片（可能最终打印多张幻灯片）。我根本不是程序员。过去我在 AS2 上做了一些工作，现在我从 AS3 重新开始。

我从这段代码开始：

```
print_btn.addEventListener(MouseEvent.CLICK,printContent);

function printContent(evt:MouseEvent) {
   var printJob:PrintJob = new PrintJob();

   if (printJob.start()) {

      if (content_mc.width>printJob.pageWidth) {
         content_mc.width=printJob.pageWidth;
         content_mc.scaleY=content_mc.scaleX;
      }

      printJob.addPage(content_mc);
      printJob.send();
   }
} 
```

这可行，但有点功能失调，不会重置剪辑等。

然后我尝试了此处发布的最终代码：[AS3 using PrintJob to print a MovieClip](https://stackoverflow.com/questions/1422259/as3-using-printjob-to-print-a-movieclip)

只需将其放入时间线并更改一些事情会效果更好。至少就启动打印对话框、调整大小、打印、“重置剪辑”等而言。唯一缺少的是在打印页面上的位置更好……而且我在让鼠标事件正常工作时遇到了问题。我尝试将其设置为尽可能接近本文中的代码，如下所示：

```
printSlide12_btn.addEventListener(MouseEvent.CLICK, printMovieClip);
}

function printMovieClip(clip:MovieClip):void { 
```

但一直无法让这个或其他任何工作。我知道我可能只是在这里做一些完全错误的事情，但似乎找不到一个有帮助的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:21:41.547

您没有确切提到出了什么问题，但我可以看到您的处理程序不正确，试试这个：

```
function printMovieClip(e:MouseEvent):void
{
   // put your print code here
} 
```

您的事件处理程序应该接受 MouseEvent，因为这是侦听器正在侦听的内容。

“而且我在让鼠标事件正常工作时遇到问题”相当模糊，因此包含错误很有帮助，并且至少导致错误的行。

# c - 无法在项目中包含 _wfopen

> ID：16131942
> 
> 赞同：0
> 
> 时间：2013-04-21T14:03:28.930
> 
> 标签：c, static-libraries, freepascal, lazarus

我试图在 lazarus 项目中包含一个用 mingw 构建的静态库 (.a) 文件，但没有这样做。因为 lib 包含一个函数。

```
_wfopen() from stdio.h/wchar.h 
```

我已经包括了

```
{$LinkLib gcc}
{$LinkLib mylib}

Function soo(...); cdecl; external; 
```

静态库中使用的标头是

```
stdio.h
wchar.h
stdlib.h 
```

这里有什么问题。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:47:12.270

I think you miss the main C runtime, "c".

# c# - HTML 5 数据列表选项

> ID：16131946
> 
> 赞同：4
> 
> 时间：2013-04-21T14:04:03.967
> 
> 标签：c#, asp.net, html, html-datalist

如何使用数据库中的数据将其放入 HTML5 的数据列表中

例如

```
<input list="browsers">

<datalist id="browsers">
  <option value="Internet Explorer">
  <option value="Firefox">
  <option value="Chrome">
  <option value="Opera">
  <option value="Safari">
</datalist> 
```

如何从数据库中检索选项？而不是手动放置。我正在使用 asp.net C#

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T14:45:39.423

我已经通过使用此代码解决了我的问题。

```
protected void Page_Load(object sender, EventArgs e)
{
    bindProducts();
}

private void bindProducts()
{
    using (systemDbEntities context = new systemDbEntities())
    {
        var q = from c in context.Products select new { c.ProductId, c.Name };
        foreach (var item in q)
        {
            lstProducts.InnerHtml += "<option value='" + item.Name + "'>";
        }
    }
} 
```

```
<asp:TextBox ID="txtBoxSearch" runat="server" placeholder="Search"  
             list="lstProducts"></asp:TextBox>
<datalist id="lstProducts" runat="server"></datalist> 
```

感谢你们！:)

# android - android屏幕交互空闲10秒时弹出图像窗口

> ID：16131949
> 
> 赞同：0
> 
> 时间：2013-04-21T14:04:24.450
> 
> 标签：android, image, popup, timertask

当 android 手机的屏幕闲置或未使用 10 秒时，我在尝试实现弹出图像​​时遇到问题。目前我正在使用一个计时器，但需要实现一个空闲监听器，但我不知道如何做到这一点。有谁能够帮我？

弹出图像由下面代码中的计时器完成。

```
public class CustomPopupWindowExample extends Activity {
    private Animation animShow, animHide;
    com.example.custompopupwindowexample.TransparentPanel popup;

    @Override
    public void onCreate(Bundle icicle) {

        super.onCreate(icicle);

        setContentView(R.layout.popup);

        popup = (com.example.custompopupwindowexample.TransparentPanel) findViewById(R.id.popup_window);
        //Declare the timer
        Timer t = new Timer();
        //Set the schedule function and rate
        t.scheduleAtFixedRate(new TimerTask() {

            @Override
            public void run() {
                //Called each time when 1000 milliseconds (1 second) (the period parameter)

                //We must use this function in order to change the text view text
                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        popup.setVisibility(View.GONE);
                        initPopup();
                    }                        
                });
            }                    
        },
        //Set how long before to start calling the TimerTask (in milliseconds)
        10000,
        //Set the amount of time between each execution (in milliseconds)
        50000);
    }

    private void initPopup() {
        final com.example.custompopupwindowexample.TransparentPanel popup = (com.example.custompopupwindowexample.TransparentPanel) findViewById(R.id.popup_window);

        animShow = AnimationUtils.loadAnimation(this, R.anim.popup_show);
        animHide = AnimationUtils.loadAnimation(this, R.anim.popup_hide);

        final Button   hideButton = (Button) findViewById(R.id.hide_popup_button);

        final ImageView locationDescription = (ImageView) findViewById(R.id.location_description);

        locationDescription.setBackgroundResource(R.drawable.nike_logo);
        popup.setVisibility(View.VISIBLE);
        popup.startAnimation(animShow);
        hideButton.setEnabled(true);

        hideButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                popup.startAnimation( animHide );
                hideButton.setEnabled(false);
                popup.setVisibility(View.GONE);
        }});
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:08:07.063

你应该使用一个触摸监听器，所以 onTouchEvent 你可以检查用户是否触摸了它。定义一个变量来保存空闲时间值，如果他/她触摸然后将该变量设置为 0，否则将其递增，当它达到 10 秒（或您想要的任何值）时显示弹出。

# ruby-on-rails - rails-类型列使用什么值？（性病）

> ID：16131951
> 
> 赞同：1
> 
> 时间：2013-04-21T14:04:34.590
> 
> 标签：ruby-on-rails, inheritance, single-table-inheritance, sti

给定一个用户表：

```
create_table :users do |t|
  t.string :email
  t.string :website
  t.string :type
end

Class User < ActiveRecord::Base 
```

以及从 User 继承的订阅者

```
Class Subscriber < User 
```

插入订阅者时，我应该为类型列使用什么实际值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T14:12:03.870

Rails 会自动将类的名称保存在类型列中，使用`object#class.name`.

您可以使用 class 方法更改此行为`inheritance_column`以设置要存储类名的列，或者如果您希望禁用该行为，则将其设置为 nil。

# php - 如何动态获取 vimeo 移动网址

> ID：16131952
> 
> 赞同：2
> 
> 时间：2013-04-21T14:04:37.170
> 
> 标签：php, api, vimeo

我正在使用 vimeo 高级 api 来获取我的视频数组，但尽管事实上有一个选项可以使用您自己的播放器（我是 vimeo pro 会员），并且有一个包含不同选项的 url 列表，包括移动设备，我找不到移动网址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:09:07.120

Vimeo Advanced API 当前不公开源文件 url。

它已被宣布为 API 的下一版本中的一项功能，但尚未给出时间框架。

目前，必须从剪辑的视频文件页面手动处理。

# javascript - 如何将标签源保存在数组中

> ID：16131957
> 
> 赞同：1
> 
> 时间：2013-04-21T14:05:14.953
> 
> 标签：javascript, jquery, html, image, filter

这是我在这里的第一个问题，希望能得到您的帮助。

我的应用程序从一个网站接收 HTML 代码，然后我想以适当的方式显示该代码。

例如我收到：

```
<p>Lorem ipsum dolor sit amet, consetetur</p>
<p>Lorem ipsum dolor sit amet:</p>
<p><a href="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png"><img alt="Wiki" src="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png" width="600" height="534"></a></p>
<p><a href="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png"><img alt="Wiki" src="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png" width="600" height="534"></a></p>
<p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam/p>    
<p><a href="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png"><img alt="Wiki" src="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png" width="600" height="534"></a></p> 
```

现在，我想将每个 img 标签源保存在一个数组中。使用不同的过滤方法，我知道如何过滤掉第一个和最后一个 img 标签的来源，但我不能全部过滤掉。

我想过滤纯文本（没问题）并在最后添加图像。

感谢任何有助于找到解决方案的答案！非常感谢你。

可以使用 PS jQuery、Javascript 等。虽然没有 PHP。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T14:06:57.727

您可以选择[.map()](http://api.jquery.com/map/)。

```
var string = '<p>Lorem ipsum dolor sit amet, consetetur</p><p>Lorem ipsum dolor sit amet:</p><p><a href="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png"><img alt="Wiki" src="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png" width="600" height="534"></a></p><p><a href="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png"><img alt="Wiki" src="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png" width="600" height="534"></a></p><p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam/p>    <p><a href="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png"><img alt="Wiki" src="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png" width="600" height="534"></a></p>';

var array = $(string).find('img').map(function(index, item){
    return $(item).attr('src')
}).get(); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/cN7FB/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T14:25:01.417

带有过滤器正则表达式的原生 Js

```
var elms=document.getElementsByTagName('img');
function filterImgSrcToArray(elms){
    var array=[], count=0;
    var regex=arguments[1] || new RegExp(/.*/) ;
    for (var i=0;i<elms.length;i++){
        if (regex.test(elms[i].src)) array[count++]=elms[i].src;
    }
    return array;
}
console.log(filterImgSrcToArray(elms));
console.log(filterImgSrcToArray(elms,/pipi/)); //should be empty [] in your example
console.log(filterImgSrcToArray(elms,/\.png/)); //all *.png files in [] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-03T05:40:53.943

您可以使用 jQuery 的**push()**函数，

```
var $imgsrc=[];
$('p').each(function(){
   $imgsrc.push($(this).find('img').attr('src'));
})
console.log($imgsrc); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T14:16:36.263

如果你想使用纯 JavaScript，而不是 jQuery，你可以使用：

```
Object.prototype.mapAttribute = function (attr) {
    if (!attr) {
        return false;
    }
    else {
        var test = this.length,
            that = test ? [] : [this],
            arr = [];
        if (test) {
            for (var i = 0, len = this.length; i < len; i++){
                that[i] = this[i];
            }
        }
        for (var i = 0, len = that.length; i < len; i++){
            arr[i] = that[i].getAttribute(attr);
        }
        return arr;
    }
}; 
```

调用如下：

```
var sources = document.getElementsByTagName('img').mapAttribute('src');
console.log(sources); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/RAPrv/)。

或者（例如）：

```
var sources = document.getElementById('test').mapAttribute('src');
console.log(sources); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/RAPrv/1/)。

上面将从属性中获取值，例如，在以下 HTML 中：

```
<img src="images/testRelativePath.png" /> 
```

数组中返回的值将是：

```
['images/testRelativePath.png'] 
```

如果你想要，你可以使用绝对路径：

```
Object.prototype.mapAttribute = function (attr) {
    if (!attr) {
        return false;
    }
    else {
        var test = this.length,
            that = test ? [] : [this],
            arr = [];
        if (test) {
            for (var i = 0, len = this.length; i < len; i++){
                that[i] = this[i];
            }
        }
        for (var i = 0, len = that.length; i < len; i++){
            arr[i] = that[i][attr];
        }
        return arr;
    }
}; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/RAPrv/2/)。

这将返回（在链接的演示中，查看控制台中的最后一个值）：

```
"http://fiddle.jshell.net/_display/images/testRelativePath.png" 
```

而且，虽然您现在已经接受了答案，但以下是使用纯 JavaScript 执行相同操作的方法：

```
Object.prototype.mapAttributeFromString = function (elem, attr) {
    if (!elem || !attr) {
        return false;
    }
    else {
        var div = document.createElement('div'),
            arr = [];
        div.innerHTML = this;
        var elems = div.getElementsByTagName(elem);
        for (var i = 0, len = elems.length; i < len; i++){
            arr[i] = elems[i].getAttribute(attr);
        }
        return arr;
    }
};

var HTML = '<p>Lorem ipsum dolor sit amet, consetetur</p><p>Lorem ipsum dolor sit amet:</p><p><a href="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png"><img alt="Wiki" src="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png" width="600" height="534"></a></p><p><a href="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png"><img alt="Wiki" src="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png" width="600" height="534"></a></p><p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam/p><p><a href="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png"><img alt="Wiki" src="http://upload.wikimedia.org/wikipedia/de/b/bc/Wiki.png" width="600" height="534"></a></p>',
    sources = HTML.mapAttributeFromString('img','src');
console.log(sources); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/RAPrv/4/)。

# jquery - jQuery下拉菜单无法正常工作

> ID：16131960
> 
> 赞同：1
> 
> 时间：2013-04-21T14:05:22.157
> 
> 标签：jquery, menu

我对网站设计很陌生，从过去几个小时以来我一直在尝试解决这个解决方案，但找不到任何解决方案。我正在尝试制作一个下拉菜单。这是html代码..

```
<ul class="mainnav">
        <li><a href="#" class="navText"> <span class="navText"> Home </span> </a></li>
        <li><a href="#" class="navText"><span class="navText"> Games </span></a>
            <ul>
                <li> Battlefield 3</li>
                <li> Call Of Duty </li>
                <li> Assiaisn's creed </li>
            </ul>
         </li>
        <li><a href="#" class="navText"> <span class="navText"> Servers </span> </a></li>
        <li><a href="#" class="navText"> <span class="navText"> Coming Soon </span> </a></li>

</ul> 
```

而css就像......

```
ul.mainnav{
    background:#f9f9f9;
    font-size:25px;
    margin:0;
    padding:0;
    height:50px;
    display:inline-block;
    min-width:200px;
    list-style:none;
    border-bottom:1px solid #ccc;

}

ul.mainnav > li{
    background:#f9f9f9;
    height:50px;
    float:left;
    margin:0;
    padding:0;
}
ul.mainnav > li a{
    font-family: 'Poiret One', cursive;
    font-size:20px;
    color:#333333;
    text-decoration:none;
    display:inline-block;
    height:50px;
    line-height:50px;
    padding:0;
    position:relative;  
    top:0px;
    margin:0;   
    overflow:hidden
}
ul.mainnav > li a span.navText{
    height:50px;
    padding:0px 15px 0px 15px;
    display:block;
    /*outline:1px dashed blue; */
}
ul.mainnav > li a span.hiddenText{  
    display:block;
    line-height:50px;
    height:50px;
    color: red;
    padding:0;
    margin:0px;
    /* outline:1px dashed green; */
}

ul.mainnav > li  ul{
    width:200px;
    background:#CCCCCC;
    font-family: 'Poiret One', cursive;
    font-size:18px;
    position:absolute;
    margin:0px;
    padding:0px;
}

ul.mainnav > li  ul li{
    height:50px;
    line-height:50px;
    display:block;
    clear:left;
    float:left;
    width: 200px;
    margin:0;
} 
```

和js就像..

```
$(document).ready(function() { 

$( "span.navText" ).each(function(color) {
        var text = $(this).text()
        $(this).append('<br><span class="hiddenText">'+text+'</span>')
    });

$('ul.mainnav li a').hover(
        function(){
            $(this).stop().children('span.navText').stop().animate({
                marginTop: '-50',
            }, 250)

        },
        function(){
            $(this).stop().children('span.navText').stop().animate({
                marginTop: '0',
            }, 250)
        }

    )
}); 
```

现在的问题是子菜单没有正确定位。你可以在这里看到这个...... [http://jsfiddle.net/yMUUN/](http://jsfiddle.net/yMUUN/)

我想消除主菜​​单和子菜单之间的那个小差距。

如果你能帮助我解决这个问题，这对我很有帮助。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:10:55.777

向以下类添加 line-height 可以修复差距：

```
ul.mainnav > li{
    background:#f9f9f9;
    height:50px;
    float:left;
    margin:0;
    padding:0;
        line-height: 10px;
} 
```

# objective-c - 在 Objective C / Cocoa Touch 中将浮点数向下舍入到最接近的 0.5

> ID：16131961
> 
> 赞同：5
> 
> 时间：2013-04-21T14:05:23.007
> 
> 标签：objective-c, c, cocoa-touch

我想将一个浮点数向下舍入，这样我得到的值将在 0.5 到 7 之间（任何小数位数），同时将低于 0.5 的任何值舍入到 0.5。

例如，

```
0.1, 0.11442, 0.46 would all be 0.5.
1.1, 1.43, 1.35 would all be 1.
1.56, 1.6, 1.8 would all be 1.5. 
```

任何超过 5 的都将向下舍入到 5。

我想要的最终数据集是`0.5, 1, 1.5, 2, 2.5, 3, 3.5, 4, 4.5, 5`.

我不知道任何向下舍入的函数`Objective C`，而不是整数。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-21T14:08:40.013

`floor()`会将浮点数向下舍入到下一个整数。如果先乘以 2，向下取整，然后除以 2，您将得到所需的结果。

```
float rounded = value < 0.5f ? 0.5f : floorf(value * 2) / 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:30:24.620

要“四舍五入”间隔，请添加一半的间隔并截断到间隔边界。

对于四舍五入到最接近的 int ，`(int) (value + 0.5)`但它是一个具有 0.5 边界的头发棘手 - 添加一半的间隔很容易，但截断到 0.5 边界不是。

所以最实用的方法是将数字加倍，四舍五入到一个int边界，然后除以2。

另一种方法是将整数部分和小数部分分开 ( `fraction = value - (int) value;`)，然后使用简单的“if ladder”分别格式化小数部分。（当心——负数可能很棘手。）如果您需要四舍五入到一些不规则的边界集，这可能是一个更好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T15:17:01.620

第一条评论很好，但它跳过了零和负值.. 我的 5 美分：

```
float roundToHalf (float val)
{
    if (val==0) return 0;
    int sign = fabs(val)/val;
    return sign * (fabs(val) < 0.5f ? 0.5f : floorf(fabs(val)) * 2 / 2);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-04T09:29:09.440

好吧，我注意到，由于浮点代数，通过除法确定符号（如图所示）是胡说八道。在许多系统上它也很慢。

```
float round_half_f(float val) {
  short sign = (short)(val / fabs(val) );
  return floorf(fabs(val)*2.f) / 2.f * sign;
} 
```

做这个：

```
float round_half_f(float val) {
  short sign = val < 0 ? -1 : 1;
  return floorf(fabs(val)*2.f) / 2.f * sign;
} 
```

# opengl - 深度作为到 GLSL 中相机平面的距离

> ID：16131963
> 
> 赞同：8
> 
> 时间：2013-04-21T14:05:32.430
> 
> 标签：opengl, 3d, glsl, shader, depth

我有一对 GLSL 着色器，可以为我提供场景中对象的深度图。我现在得到的是每个像素到相机的距离。我需要的是获得从像素到相机平面的距离。让我用一张小图来说明

```
 *          |--*
  /           |
 /            |
C-----*       C-----*
 \            |
  \           |
   *          |--* 
```

3 个星号是像素，C 是相机。星号线是“深度”。在第一种情况下，我得到了从像素到相机的距离。第二，我希望得到每个像素到平面的距离。

必须有一种方法可以通过使用一些投影矩阵来做到这一点，但我很难过。

这是我正在使用的着色器。注意 eyePosition 是 camera_position_object_space。

顶点着色器：

```
void main() {
    position = gl_Vertex.xyz;
    gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
} 
```

像素着色器：

```
uniform vec3 eyePosition;
varying vec3 position;

void main(void) {
        vec3 temp = vec3(1.0,1.0,1.0);
        float depth = (length(eyePosition - position*temp) - 1.0) / 49.0;
        gl_FragColor = vec4(depth, depth, depth, 1.0);
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-21T22:46:19.957

你真的在努力做到这一点。只需将事物转换为相机空间，然后从那里开始工作。

```
varying float distToCamera;

void main()
{
    vec4 cs_position = glModelViewMatrix * gl_Vertex;
    distToCamera = -cs_position.z;
    gl_Position = gl_ProjectionMatrix * cs_position;
} 
```

在相机空间（一切都与相机的位置/方向相关的空间）中，到顶点的平面距离只是 Z 坐标的负值（负 Z 越高越远）。

所以你的片段着色器甚至不需要`eyePosition`；“深度”直接来自顶点着色器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-30T13:58:49.260

投影后的 W 分量包含进入场景的正交深度。您不需要为此使用单独的模型视图和投影矩阵：

```
varying float distToCamera;

void main()
{
    gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
    distToCamera = gl_Position.w;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T15:03:09.740

你暗示的是正交投影。您当前正在使用透视投影。实际上，您没有像素到相机的真实距离，而是视锥体中像素的 z 位置。在渲染的纹理上，最终的 z 深度在 [-1,1] 范围内被渲染，它描述了它在 NDC 空间中的 z 分量。

如您所知，您的所有点都使用透视投影“朝向”（实际上是在近平面上）投影到相机。您想要的是将它们正交投影到近平面。[这个链接](http://www.songho.ca/opengl/gl_projectionmatrix.html)详细描述了两个投影矩阵，矩阵的最终结果在底部。您的着色器应该能够很好地处理新的投影矩阵。只要确保您的 MVP 矩阵按照上面的建议计算即可。

请注意，正交投影可能并不代表渲染场景的深度。如果您使用透视投影将场景渲染到屏幕上，并且想要每个像素的深度，则应相应地使用相同的透视投影。因此，仅当您的场景使用相同的投影，或者某些算法需要与屏幕上看到的场景无关的深度信息时，使用正交投影渲染您的深度才会有用。

此外，我建议您查看核心 OpenGL 配置文件（3.x），因为您似乎正在使用已弃用的功能（gl_Vertex、gl_ModelViewProjectionMatrix 等）。自己设置所有缓冲区和着色器的工作量稍大一些，但最终会有所回报。

**编辑**

实际上，在您发表评论后，我明白您想要什么。不清楚您是否想在同一个调用中渲染它们，为此我建议在您的片段着色器中使用类似的内容：

```
uniform mat4 orthographicMatrix;
varying vec3 position;

void main(void) {
        vec4 clipSpace = orthographicMatrix * vec4(position, 1.0);
        gl_FragColor = vec4(clipSpace.zzz, 1.0);
} 
```

请注意，您不必进行 w 除法，因为正交投影已经是线性的（因此 w 设置为 1）。

# python - 如何从网站表格的列中提取信息？

> ID：16131965
> 
> 赞同：-1
> 
> 时间：2013-04-21T14:05:44.347
> 
> 标签：python

**这就是我能做到的！我正在尝试获取代理**

```
import urllib.request

page = urllib.request.urlopen("http://www.samair.ru/proxy/ip-address-01.htm")

page('\d+\.\d+\.\d+\.\d+') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T14:12:31.670

在这种情况下，表格并不是真正的 HTML 表格，而是用`<pre></pre>`. 您可以通过查看页面源来验证它。无论如何，使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)就像在公园里散步一样：

```
In [1]: from bs4 import BeautifulSoup

In [2]: from urllib.request import urlopen

In [3]: bs = BeautifulSoup(urlopen('http://www.samair.ru/proxy/ip-address-01.htm'))

In [4]: print(bs.find('pre').text)

IP address               Anonymity level   Checked time        Country
056.249.66.50:8080       transparent       Apr-21, 10:33       Bulgaria
1.63.18.22:8080          transparent       Apr-21, 05:56       China
1.9.75.8:8080            transparent       Apr-21, 12:58       Malaysia
103.247.219.165:8080     transparent       Apr-21, 04:01       Indonesia
103.4.165.190:80         transparent       Apr-21, 11:34       Indonesia
103.9.126.110:8080       transparent       Apr-21, 12:19       Indonesia
109.173.98.64:8080       transparent       Apr-20, 22:39       Russian Federation
109.197.194.142:8080     transparent       Apr-21, 12:07       Russian Federation
109.207.61.141:8090      transparent       Apr-21, 11:14       Poland
109.207.61.145:8090      transparent       Apr-21, 13:04       Poland
109.207.61.149:8090      transparent       Apr-21, 10:21       Poland
109.207.61.165:8090      transparent       Apr-21, 03:57       Poland
109.207.61.170:8090      transparent       Apr-21, 11:02       Poland
109.207.61.208:8090      transparent       Apr-21, 10:45       Poland
109.224.55.46:80         transparent       Apr-20, 21:50       Iraq
109.227.124.105:8080     transparent       Apr-21, 09:57       Ukraine
109.69.6.118:8080        transparent       Apr-21, 11:44       Albania
110.138.248.135:8080     transparent       Apr-21, 09:10       Indonesia
110.139.13.121:8080      transparent       Apr-21, 11:31       Indonesia
110.159.179.108:80       transparent       Apr-20, 20:35       Malaysia

In [5]: [l.split()[0] for l in bs.find('pre').text.split('\n')[1:]][1:]
Out[5]: 
['056.249.66.50:8080',
 '1.63.18.22:8080',
 '1.9.75.8:8080',
 '103.247.219.165:8080',
 '103.4.165.190:80',
 '103.9.126.110:8080',
 '109.173.98.64:8080',
 '109.197.194.142:8080',
 '109.207.61.141:8090',
 '109.207.61.145:8090',
 '109.207.61.149:8090',
 '109.207.61.165:8090',
 '109.207.61.170:8090',
 '109.207.61.208:8090',
 '109.224.55.46:80',
 '109.227.124.105:8080',
 '109.69.6.118:8080',
 '110.138.248.135:8080',
 '110.139.13.121:8080',
 '110.159.179.108:80'] 
```

# java - 如果目录以点开头，File.getCanonicalPath() 返回错误

> ID：16131968
> 
> 赞同：0
> 
> 时间：2013-04-21T14:05:57.467
> 
> 标签：java, file

**注意：**无效的问题，问题是由`!`父函数中的放错位置引起的。该问题已被标记，因此可以由版主删除。

* * *

我创建了一个函数来检查（文件/目录）路径是否有效，而不检查它是否存在；

```
public static boolean isValidPath(String path) {
    File f = new File(path);
    try {
        f.getCanonicalPath();
        return true;
    } catch (IOException e) {
        return false;
    }
} 
```

问题是`File.getCanonicalPath();`当任何目录以点开头时返回错误，尽管它是 Windows 的有效目录路径。这会导致函数返回`false`应该是`true`. 例如路径`C:\Users\Tim\AppData\Roaming\.minecraft\bin`返回`false`，而`C:\Users\Tim\AppData\Roaming\minecraft\bin`没有我的世界目录上的点返回`true`。我的系统上确实存在目录名称中带有点的第一个路径，并且我正在运行 Windows 7 64 位。是否有任何其他功能可以检查路径是否有效，或者我还能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:15:32.290

```
import java.io.*;

class TestDirWithDot {

    public static boolean isValidPath(String path) {
        File f = new File(path);
        try {
            f.getCanonicalPath();
            return true;
        } catch (IOException e) {
            e.printStackTrace();
            return false;
        }
    }

    public static void main(String[] arg) {
        System.out.println(System.getProperty("os.name"));
        String path = ".dir";
        System.out.println(isValidPath(path));
    }
} 
```

* * *

```
Windows Vista
true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:16:49.220

> 我的系统上确实存在目录名称中带有点的第一个路径，并且我正在运行 Windows 7 64 位。

所以你会得到

`IOException`- 如果发生 I/O 错误，这是可能的，因为规范路径名的构造可能需要文件系统查询。

> 是否有任何其他功能可以检查路径是否有效？尝试这个：

```
File file = new File("c:\fileName");
if (!file.isDirectory())
   file = file.getParentFile();
if (file.exists()){
    ...
} 
```

# php - 限制浏览器访问的文本文件权限

> ID：16131969
> 
> 赞同：0
> 
> 时间：2013-04-21T14:05:58.273
> 
> 标签：php, file, permissions

我创建了一个日志文件，每当有人登录我的网页时，该文件就会更新。记录是否成功。此日志包含一些敏感信息，例如不成功的密码尝试，大多数情况下会接近正确的密码。所以我不希望有人去 www.mysite.com/log.txt 并找到所有这些信息。

那么无论如何我可以修改这个txt文件的权限并使其只能从它写入它的php页面访问，当然只能通过FTP访问？意思是有没有办法限制从浏览器访问这个 txt 文件，同时允许从相邻的 php 文件写入它？

PS我已经为文本文件创建了一个随机名称，以使浏览器难以猜测，但我只是想要一种更安全的方法。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:11:20.563

如果要将文件放在您的 Web 根目录中，请创建一个单独的文件夹并将文件放入其中，然后创建一个 .htaccess 文件并使用以下代码填充它：

```
<Limit GET POST>
order deny,allow
deny from all
allow from 127.0.0.1
</Limit> 
```

# optimization - 提取并设置numpy数组的粗对角线

> ID：16131972
> 
> 赞同：2
> 
> 时间：2013-04-21T14:06:15.943
> 
> 标签：optimization, numpy, scipy, diagonal

我有一个简单的 numpy 问题。如何提取并因此设置具有“厚度”等于`width`恒定值的对角线？我知道[`fill_diagonal`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fill_diagonal.html)用给定值填充主对角线的函数。与此类似，我想填充主对角线及其周围的对角线。请参阅[带状对角矩阵](http://en.wikipedia.org/wiki/Band_matrix)。

例如：

```
In [293]: a = np.random.randint(1, 100, (5,5)) % 2 == 0

In [294]: a
Out[294]: 
array([[ True,  True, False, False, False],
       [ True,  True, False,  True, False],
       [ True,  True, False, False,  True],
       [False, False, False,  True, False],
       [False, False, False, False,  True]], dtype=bool)

In [295]: fill_banded(a, val=True, width=3) # width must be odd number (?)

In [296]: a
Out[296]: 
array([[ True,  True, False, False, False],
       [ True,  True,  True,  True, False],
       [ True,  True,  True,  True,  True],
       [False, False,  True,  True,  True],
       [False, False, False,  True,  True]], dtype=bool) 
```

到目前为止，我能够以`fill_banded`以下方式实现（有效）：

```
def fill_banded(a, val, width=1):
    # TODO: Add some error checking
    for i in range(width // 2):
        a[range(0,a.shape[0]-(i+1)),range(i+1,a.shape[1])] = val
        a[range(i+1,a.shape[0]),range(0,a.shape[1]-(i+1))] = val
    np.fill_diagonal(a, val) 
```

但我确信在 numpy / scipy 中有更好的方法。我可以在 Cython 中移动这个功能，但我会保留它作为最后的选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T14:25:32.530

```
In [53]: a = np.arange(25).reshape(5,5)

In [54]: a
Out[54]: 
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14],
       [15, 16, 17, 18, 19],
       [20, 21, 22, 23, 24]])

In [55]: mask = np.abs(np.add.outer(np.arange(5), -np.arange(5))) < 3

In [56]: mask
Out[56]: 
array([[ True,  True,  True, False, False],
       [ True,  True,  True,  True, False],
       [ True,  True,  True,  True,  True],
       [False,  True,  True,  True,  True],
       [False, False,  True,  True,  True]], dtype=bool)

In [57]: a[mask] = 100

In [58]: a
Out[58]: 
array([[100, 100, 100,   3,   4],
       [100, 100, 100, 100,   9],
       [100, 100, 100, 100, 100],
       [ 15, 100, 100, 100, 100],
       [ 20,  21, 100, 100, 100]]) 
```

* * *

**说明：** `np.add.outer`可用于制作加法表：

```
In [59]: np.add.outer(np.arange(5), np.arange(5))
Out[59]: 
array([[0, 1, 2, 3, 4],
       [1, 2, 3, 4, 5],
       [2, 3, 4, 5, 6],
       [3, 4, 5, 6, 7],
       [4, 5, 6, 7, 8]]) 
```

通过更改其中一个`arange`s 的符号（并使用`np.abs`），您可以测量到对角线的距离：

```
In [61]: np.abs(np.add.outer(np.arange(5), -np.arange(5)))
Out[61]: 
array([[0, 1, 2, 3, 4],
       [1, 0, 1, 2, 3],
       [2, 1, 0, 1, 2],
       [3, 2, 1, 0, 1],
       [4, 3, 2, 1, 0]]) 
```

因此，您可以通过编写一个简单的不等式来“选择”与对角线有一定距离的所有元素：

```
In [62]: np.abs(np.add.outer(np.arange(5), -np.arange(5))) < 3
Out[62]: 
array([[ True,  True,  True, False, False],
       [ True,  True,  True,  True, False],
       [ True,  True,  True,  True,  True],
       [False,  True,  True,  True,  True],
       [False, False,  True,  True,  True]], dtype=bool) 
```

拥有此布尔掩码后，您可以将新值分配给`a`with

```
a[mask] = val 
```

* * *

因此，`fill_banded`可能看起来像这样：

```
import numpy as np

def fill_banded(a, val, width=1):
    mask = np.abs(np.add.outer(np.arange(a.shape[0]), -np.arange(a.shape[1]))) < width
    a[mask] = val

a = np.arange(30).reshape(6,5)
fill_banded(a, val=True, width=3)
print(a) 
```

# python - 使用 wsgi 导入 django 设置失败

> ID：16131976
> 
> 赞同：0
> 
> 时间：2013-04-21T14:06:30.663
> 
> 标签：python, django, mod-wsgi, production-environment

我正在通过 mod_wsgi 设置 django 项目。问题是 wsgi 应用程序失败并出现错误`AttributeError: 'Settings' object has no attribute 'ROOT_URLCONF'`，我不明白为什么。当我通过它运行同一个项目时，`./manage.py runserver`它工作正常。

项目结构：

```
/var/www/python/projectname.org/projectname
./core/
./core/wsgi.py
./core/settings/
               ./__init__.py
               ./django.py
               ./extensions.py
               ./secrets.py
               ./server.py
               ./project.py
./app1
./app2
./templates
./static
... 
```

是的，通常的 Django 设置文件被分成几个。这在开发环境中工作得很好，不知道这是否与我在 WSGI 生产环境中遇到的问题有关。

在 python 的控制台中，我可以`projectname.core.settings`轻松导入，但它也没有`ROOT_URLCONF`内部。

wsgi.py：

```
import os
import sys
sys.path.append('/var/www/python/projectname.org')

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "projectname.core.settings")

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

apache虚拟主机配置：

```
<VirtualHost *:80>
ServerAdmin alex@projectname.org
ServerName projectname.org

DocumentRoot /var/www/python/projectname.org/projectname/core

WSGIScriptAlias / /var/www/python/projectname.org/projectname/core/wsgi.py

<Directory /var/www/python/projectname.org/projectname>
    <Files wsgi.py>
    Order deny,allow
    Allow from all
    </Files>
</Directory>
...
</VirtualHost> 
```

当我尝试`projectname.core.settings`在控制台中导入时 - 导入工作正常，但我也无法访问`ROOT_URLCONF`. 显然这是相关的，但为什么它可以通过`runserver`？以及如何通过 wsgi 或控制台使其工作？

# java - 抽象 CharBuffer 和包私有 HeapCharBuffer：有什么意义？

> ID：16131978
> 
> 赞同：0
> 
> 时间：2013-04-21T14:06:41.403
> 
> 标签：java, nio

所以，java.nio.CharBuffer 是一个抽象类，而 HeapCharBuffer 是包私有的。用户代码只能通过抽象超类 CharBuffer 的静态方法创建 HeapCharBuffer 对象，如下所示：

```
CharBuffer cb = CharBuffer.allocate(10);
// cb class is now HeapCharBuffer 
```

但是，为什么他们不把 CharBuffer 做成一个非抽象的公共类，它有一组构造函数，具有分配和包装方法的逻辑呢？这样的概念有什么意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:36:25.183

我认为这样作者保留更改 CharBuffer.allocate 返回的 CharBuffer 的具体实现的权利。

# regex - 仅当断点位于某个关键字对中时，才用空格替换换行符的正则表达式

> ID：16131981
> 
> 赞同：0
> 
> 时间：2013-04-21T14:07:00.647
> 
> 标签：regex, replace, newline, whitespace, linefeed

我正在尝试编写一个正则表达式来替换文本文件某些区域之间的换行符，但仅限于某些关键字（开始关键字和结束关键字未配对），但在第一部分之后运气不佳。

示例输入：

```
QUESTION NO: 1130

May a health plan require a provider to use a health care clearinghouse to conduct a HIPAA- covered transaction, or must the health plan acquire the ability to conduct the transaction directly with those providers capable of conducting direct transactions?

A. A health plan may conduct its covered transactions through a clearinghouse, and may require a
provider to conduct covered transactions with it through a clearinghouse. But the incremental cost of doing so must be borne by the health plan. It is a cost-benefit decision on the part of the health plan whether to acquire the ability to conduct HIPAA transactions directly with other entities, or to require use of a clearinghouse.  B. A health plan may not conduct it's covered transactions through a clearinghouse
C. A health plan may after taking specific permission from HIPAA authorities conduct its covered
transactions through a clearinghouse  D. is not as per HIPAA allowed to require provider to conduct covered transactions with it through

a clearinghouse

Answer: A

Explanation: Personnel security always have to deal more with Operational controls, Operational
controls provide the guidelines and the correct procedures to implement the different operations. Management controls are usually used only by managers. Human resources and Technical Controls are not related to personal security as the question states. See the different control definitions in your CISSP documentation. 
```

示例输出：

```
QUESTION NO: 1130

May a health plan require a provider to use a health care clearinghouse to conduct a HIPAA- covered transaction, or must the health plan acquire the ability to conduct the transaction directly with those providers capable of conducting direct transactions?

A. A health plan may conduct its covered transactions through a clearinghouse, and may require a provider to conduct covered transactions with it through a clearinghouse. But the incremental cost of doing so must be borne by the health plan. It is a cost-benefit decision on the part of the health plan whether to acquire the ability to conduct HIPAA transactions directly with other entities, or to require use of a clearinghouse.
B. A health plan may not conduct it's covered transactions through a clearinghouse
C. A health plan may after taking specific permission from HIPAA authorities conduct its covered transactions through a clearinghouse
D. is not as per HIPAA allowed to require provider to conduct covered transactions with it through a clearinghouse

Answer: A

Explanation: A View is a display of one or more table shows that shows the table data. You can even retrieve part of the table and display the same to the user. Before a user is able to use a view, they must have both, permission on the view and all dependent objects. Views can also be used to implement security, for example you can create a view that only shows 3 of 5 columns contained in a table. Views are not used to provide integrity you can use constraints, rule or other components of database systems. 
```

我的理想情况是，换行符之间的文本内容`"A. "`被`"Answer: "`删除，其余文本保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:29:47.977

在 Python 中你可以这样做；

**警告**：100% 依赖是不安全的。如果`X.`出现在正常的句子中，你*会*被“搞砸”。

```
import re

subject = '''A. A health plan may conduct its covered transactions through a clearinghouse, and may require a
provider to conduct covered transactions with it through a clearinghouse. But the incremental cost of doing so must be borne by the health plan. It is a cost-benefit decision on the part of the health plan whether to acquire the ability to conduct HIPAA transactions directly with other entities, or to require use of a clearinghouse.  B. A health plan may not conduct it's covered transactions through a clearinghouse
C. A health plan may after taking specific permission from HIPAA authorities conduct its covered
transactions through a clearinghouse  D. is not as per HIPAA allowed to require provider to conduct covered transactions with it through'''

result = re.findall(r'([A-Z]\. )(.*?)(?=[A-Z]\. |$)', subject, re.S)

new_string = ''

if len(result) > 0:
    for entry in result:
        new_string += entry[0] + entry[1].strip().replace('\n', ' ') + '\n'
else:
    print 'Nothing found'

print new_string 
```

积极的前瞻寻找新`X.`的或字符串的结尾。如果您匹配整个字符串，这可能*不起作用。*在这种情况下，让它继续查找，直到找到`Answer:`并去除尾随的换行符 ( `(?=[A-Z]\. |\n+Answer: \w)`)。

**终端输出**

```
iMac2011:Desktop allendar$ python test.py
A. A health plan may conduct its covered transactions through a clearinghouse, and may require a provider to conduct covered transactions with it through a clearinghouse. But the incremental cost of doing so must be borne by the health plan. It is a cost-benefit decision on the part of the health plan whether to acquire the ability to conduct HIPAA transactions directly with other entities, or to require use of a clearinghouse.
B. A health plan may not conduct it's covered transactions through a clearinghouse
C. A health plan may after taking specific permission from HIPAA authorities conduct its covered transactions through a clearinghouse
D. is not as per HIPAA allowed to require provider to conduct covered transactions with it through 
```

**更新代码**

```
import re

subject = '''QUESTION NO: 1130

May a health plan require a provider to use a health care clearinghouse to conduct a HIPAA- covered transaction, or must the health plan acquire the ability to conduct the transaction directly with those providers capable of conducting direct transactions?

A. A health plan may conduct its covered transactions through a clearinghouse, and may require a
provider to conduct covered transactions with it through a clearinghouse. But the incremental cost of doing so must be borne by the health plan. It is a cost-benefit decision on the part of the health plan whether to acquire the ability to conduct HIPAA transactions directly with other entities, or to require use of a clearinghouse.  B. A health plan may not conduct it's covered transactions through a clearinghouse
C. A health plan may after taking specific permission from HIPAA authorities conduct its covered
transactions through a clearinghouse  D. is not as per HIPAA allowed to require provider to conduct covered transactions with it through

a clearinghouse

Answer: A

Explanation: Personnel security always have to deal more with Operational controls, Operational
controls provide the guidelines and the correct procedures to implement the different operations. Management controls are usually used only by managers. Human resources and Technical Controls are not related to personal security as the question states. See the different control definitions in your CISSP documentation.'''

result = re.findall(r'([A-Z]\. )(.*?)(?=[A-Z]\. |\n{1,}Answer:\s\w+\s?\n+)', subject, re.S)

new_string = ''

if len(result) > 0:
    for entry in result:
        new_string += entry[0] + entry[1].strip().replace('\n\n', ' ').replace('\n', ' ') + '\n'
else:
    print 'Nothing found'

print new_string 
```

# php - 带有 utf-8 xml 输入的 PHP DOMDocument::loadXML

> ID：16131982
> 
> 赞同：0
> 
> 时间：2013-04-21T14:07:04.830
> 
> 标签：php, dom

对于后续代码，当我放

```
$doc = new DomDocument('1.0'); 
```

我在 DOMDocument::saveXML() xmlEscapeEntities 中收到警告：字符超出范围

当我把

```
$doc = new DomDocument('1.0','UTF-8'); 
```

我在 $xmldoc = DOMDocument::loadXML($xml);

有代码

```
function readXsltTemplateAdmin($XsltFileName,$arrData,$params="",$other="",$number="")
    {

        //      kreate XML from array
        /** primer:
        * $xml = <<<EOB
        * <alldata>
        *  <datarow>
        *   <name>sasa</name>
        *   <comment>aab</comment>  
        *  </datatrow>
        *  <datatrow>
        *   <name>dragana</name>
        *   <comment>eeeee</comment>  
        *  </commentrow>
        * </alldata>
        * EOB;
        */

        $doc = new DomDocument('1.0','UTF-8');
        //$doc = new DomDocument('1.0');

        // root 
        $root = $doc->createElement('alldata'.$number);
        $root = $doc->appendChild($root);

        if (is_array($other) || is_array($params))
        {
            if($other!="")
            {   
                foreach($other as $k => $v)     
                {
                      $child = $doc->createElement($k);
                      $child = $root->appendChild($child);
                      $value = $doc->createTextNode($v);
                      $value = $child->appendChild($value);                         
                }
            }

            foreach($params as $ParamKey => $ParamValue)        
            {
                $child = $doc->createElement($ParamKey);
                $child = $root->appendChild($child);
                $value = $doc->createTextNode($ParamValue);
                $value = $child->appendChild($value);                           
            }           

        }   

        if (sizeof($arrData)>0)
        {
            for ($i=0;$i<sizeof($arrData);$i++) {

                $occ = $doc->createElement("datarow");
                $occ = $root->appendChild($occ);
                foreach ($arrData[$i] as $fieldname => $fieldvalue) {

                $child = $doc->createElement($fieldname);
                $child = $occ->appendChild($child);

                $value = $doc->createTextNode($fieldvalue);
                $value = $child->appendChild($value);
              } 
            } 
        }

        $xml = $doc->saveXML();

        $handle = fopen($XsltFileName, "r");

        $xsl = fread($handle, filesize($XsltFileName)) or die();

        fclose($handle);    

        $xmldoc = DOMDocument::loadXML($xml);
        $xsldoc = DOMDocument::loadXML($xsl);

        $proc = new XSLTProcessor() ;
        $proc->registerPHPFunctions();
        $proc->importStyleSheet($xsldoc);

        $output=$proc->transformToXML($xmldoc);         
        return $output; 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:29:57.750

`loadXML`不是静态函数，所以像这样称呼它`DOMDocument::loadXML`是错误的。你应该使用 dom 实例：`$doc->loadXML($xml);`

除此之外，您的代码很好并且可以满足它的需求 - 我没有测试 xsl 的东西，因为我不知道应该包含的内容`$XsltFileName`

# g++ - g ++中的管道文件内容进行编译

> ID：16131984
> 
> 赞同：2
> 
> 时间：2013-04-21T14:07:19.647
> 
> 标签：g++, pipe

是否可以将文件的内容通过管道传输`g++`到编译程序？

我想这样做是因为我想使用数据库中的文件而不是磁盘上的物理文件。可以通过我制作的 API 轻松检索文件内容。

例如，我想做类似的事情：

```
g++ contents_of_file -o executable 
```

非常感谢。

山姆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T14:11:27.913

是的，如果您使用`-x`选项指定语言，则可以通过管道传输到 gcc；

```
echo "int main(){}" | gcc -Wall -o testbinary -xc++ - 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T16:37:41.063

更多乐趣：

```
alias true="gcc -xc++<(echo 'main()<%int(*)(int*)=6 "\?"<[:0:>;%>')&&a.out" 
```

嘿，为我工作。

# windows - 调用新的批处理文件或添加 VB 脚本？

> ID：16131987
> 
> 赞同：0
> 
> 时间：2013-04-21T14:07:40.203
> 
> 标签：windows

我在下面的内容允许用户从批处理菜单中输入设备的名称，然后它将在新的命令窗口中远程登录并自动登录。在下面的批处理运行后，我希望用户被提示输入新变量（主机）。一旦用户输入新变量（主机），我希望批处理在同一窗口内继续，并 ping 新变量（主机）。

我尝试了 call 命令，但无论我尝试哪种方式，它都会打开一个新窗口。我需要一个 vbscript 吗？我有点失落。

```
@echo off
:A
color 0A
Cls
echo.
echo.
echo.
echo Putty SSH
echo.
echo.
echo.
set /p computer=HOST:
start putty.exe -ssh xxxxxx@%computer% -pw xxxxxx
goto:options 
```

我接下来要介绍的示例。我不知道如何将下面的行添加到上面的批处理脚本中，并使其在“start putty.exe -ssh xxxxxx@%computer% -pw xxxxxx”打开的窗口中执行。我希望 %computer% 是一个新的变量。不是来自上述批次中的变量。

"

```
set /p computer=HOST:
ping %computer% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:34:52.760

可悲的是，没有办法从批处理文件中做到这一点。一旦您从批处理中“调用命令”，它就会被视为独立于您之前执行或稍后执行的其余批处理调用的东西。

我建议即使在第一次使用时也创建一个 vbs 文件，并将其用于您想要的所有操作。

这是一个小示例代码，供您查看如何“管理”您从 vbs 启动的命令窗口：

`Option Explicit`

 ````
Dim oShell

Set oShell = CreateObject("WScript.Shell") 
REM 1 == windowstate normal, false==don't wait for app to finish running
Call oShell.Run ("cmd /K CD C:\", 1, false)
Call WScript.Sleep (300)

REM you don't need it right after cmd.exe started up as it'll be
REM focused/activated by OS but may need later
REM Call oShell.AppActivate ("cmd.exe")

Call oShell.SendKeys ("echo yay! {ENTER}")

SET oShell = Nothing 
````  `您可以找到可以与“SendKeys”功能一起使用的命令列表：http: [//msdn.microsoft.com/en-us/library/8c6yea83%28v=vs.84%29.aspx](http://msdn.microsoft.com/en-us/library/8c6yea83%28v=vs.84%29.aspx)

希望这可以帮助！`

# html - 使图像像按钮一样

> ID：16131988
> 
> 赞同：34
> 
> 时间：2013-04-21T14:07:46.317
> 
> 标签：html, image, button

我正在处理一个简单的 HTML 页面，在该页面中，我想将这个图像用作按钮。

这是我的图像的代码：

```
<div style="position: absolute; left: 10px; top: 40px;"> 
    <img src="logg.png" width="114" height="38">
</div> 
```

基本上我想在其中添加这个功能：

```
<div>
    <input id="saveForm" name="saveForm" class="btTxt submit" type="submit" value="Submit"/>
</div> 
```

不需要按钮本身上的“提交”文本，因为我的图像具有它需要的文本。

那么无论如何，这可能吗？如果是这样，如何？:)

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-21T14:10:36.567

听起来你想要一个`image`按钮：

```
<input type="image" src="logg.png" name="saveForm" class="btTxt submit" id="saveForm" /> 
```

或者，您可以使用 CSS 使现有`submit`按钮使用您的图像作为其背景。

在任何情况下，您***都不***希望页面上有单独的`<img />`元素。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-21T14:11:30.823

您可以实现一个 JavaScript 块，其中包含您需要的函数。

```
<div style="position: absolute; left: 10px; top: 40px;"> 
    <img src="logg.png" width="114" height="38" onclick="DoSomething();" />
</div> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-21T14:14:34.617

您可以使用[图像提交按钮](http://www.w3.org/TR/html401/interact/forms.html#h-17.4.1)：

```
<input type="image"  id="saveform" src="logg.png " alt="Submit Form" /> 
```

# ios - 使用情节提要而不是笔尖时如何解决此问题？：获取“此类不符合键值编码”？

> ID：16131996
> 
> 赞同：0
> 
> 时间：2013-04-21T14:08:18.620
> 
> 标签：ios, objective-c, xcode

我遇到了和问这个问题的人一样的问题：

[接口构建器问题：连接 IBOutlet 时，获取“此类与键的键值编码不兼容”](https://stackoverflow.com/questions/2772771/interface-builder-problem-when-hooking-up-an-iboutlet-getting-this-class-is-n?rq=1)

我的问题是，我使用的是 Xcode 4 和 Storyboard，而不是 Interface Builder 和 nib。当我遇到同样的问题时该怎么办？

我可以从我的项目中上传任何需要的文件，但它与上述问题中的文件几乎相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T14:14:13.380

解决方案是一样的，故事板中的某些配置不正确。Xcode 现在包含 Interface Builder，情节提要基本上只是一个大的 NIB (XIB)，所以你的情况是相同的。检查情节提要中的所有类名称，以及是否有任何视图连接到不再存在的出口名称（如果您编辑了任何名称）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:18:09.567

我已经解决了我的问题！

看这里的第二个答案： [Can't seem to get rid of key value coding-compliant error](https://stackoverflow.com/questions/6876208/cant-seem-to-get-rid-of-key-value-coding-compliant-error?rq=1)。

我发现我的一些物品有额外的出口。您可以通过右键单击找到对象插座。单击小“x”以删除额外的网点。如果您重命名插座，而不在文件和情节提要中删除它并重新创建它，则会发生此错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-26T20:40:31.420

就我而言，问题是因为我更改了情节提要上的自定义单元格。无论出于何种原因，无论我清理或重置模拟器多少次，它都无法正常工作。所以我删除了 Storyboards 上的自定义类名，所以它将是 UITableViewCell （这就是我得到的）。清理，从模拟器中删除应用程序，再次运行它并使其失败。

之后，我回到故事板，在 UITableViewCell 中再次设置自定义类名，然后运行它，它就可以工作了。