# StackOverflow 问答 12530000-12530999

# css - 使用 fontsquirrel 调整字体大小以匹配 Arial

> ID：12530002
> 
> 赞同：1
> 
> 时间：2012-09-21T11:50:14.310
> 
> 标签：css, fonts, font-face, font-size

我正在使用新的令人惊叹的字体[Source Sans Pro](http://sourceforge.net/projects/sourcesans.adobe/files/)作为我的基本字体（它确实质量很好，并且厌倦了到处看到 Ariel）。

我的问题是，如果由于任何原因字体没有加载并且由于字体大小的变化而恢复为 Ariel，这会破坏我的布局。

无论如何调整字体大小，使其与 Ariel 的大小相同？我尝试在专家模式下使用：[http](http://www.fontsquirrel.com/fontface/generator) ://www.fontsquirrel.com/fontface/generator并选择了 X-height Matching 但这不起作用，并且没有下载任何内容，它只会永远加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:22:04.267

a) 确保它不会成为问题。为什么字体会失败？

b) 设计您的网站以使用任何一种字体。用可以更好地定义区域的 div 将您的标题（我认为这是问题）封装起来。

c) 我开发了一个[jQuery 插件，它可以确定是否已加载自定义字体](https://stackoverflow.com/a/12316349/1455709)，它执行此操作。

演示： http: [//pulse-dev.com/files/stackoverflow/fontfacedelay/index3.htm](http://pulse-dev.com/files/stackoverflow/fontfacedelay/index3.htm)

# css - HTML5 部分 - 如何在这种情况下标记和样式？

> ID：12530005
> 
> 赞同：0
> 
> 时间：2012-09-21T11:50:25.370
> 
> 标签：css, html

我已经在我有一个部分的地方给出了这个布局，其中包含一些信息。然而，在视觉上，该部分有一些行横跨 100% 宽的屏幕，而内容只有 70%。

样式是内联的，以便澄清建议：

**问题 1** - 这是一个可接受的标记吗？

```
<section>
  <div class="row-red" style="width=100%; background-color: red;">
    <h1 style="width:70%">section header here</h1>
    <p style="width:70%">paragraph 1</p>
  </div>
  <div class="row-blue" style="width: 100%; background-color: blue;">
    <p style="width:70%">paragraph 2</p> 
  </div>
</section> 
```

提前致谢

这是一个取自首先在这里写的小提琴的例子：

[http://jsfiddle.net/gSLww/9/](http://jsfiddle.net/gSLww/9/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:01:32.220

是的，这是一个可以接受的标记，但只有你必须处理它的 CSS。像这样写：

```
.row-red,.row-blue{
    padding-right:30%
} 
```

**HTML**

```
<section>
  <div class="row-red" style="background-color: red;">
    <h1>section header here</h1>
    <p>paragraph 1</p>
  </div>
  <div class="row-blue" style="background-color: blue;">
    <p>paragraph 2</p>
  </div>
</section> 
```

检查这个[http://jsfiddle.net/gSLww/15/](http://jsfiddle.net/gSLww/15/)

# asp.net-mvc-3 - 如何在 MonoDevelop 中获取 MVC 3 或 4 模板？

> ID：12530010
> 
> 赞同：3
> 
> 时间：2012-09-21T11:50:36.910
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, monodevelop, archlinux

刚开始在 Archlinux 上使用 Mono 和 MonoDevelop，我可以毫无问题地创建一个新的 ASP.NET MVC 2 项目并运行它。但我不知道如何创建 MVC 3 或 4 项目。[我在一个论坛](http://mono.1490590.n4.nabble.com/ASP-NET-MVC-3-Project-Template-td4650368.html)上读到MonoDevelop 中有 MVC 3 项目模板，但它有一些依赖项以便在 New Solution.. 对话框中显示它。所以我的问题是：当我在 Linux 上运行 MonoDevelop 时，如何获得 MVC 3 或 4 解决方案模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T20:01:49.080

要显示 MVC 3 模板，您需要安装 Mono 2.11.3 或更高版本。在 Archlinux 中，您可以通过从 AUR 存储库安装 mono-git 来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-03T11:22:48.243

为单声道调整的 Asp.Net MVC 模板在这里： [https ://www.cafe-encounter.net/p1510/asp-net-mvc4-net-framework-version-4-5-c-razor-template-for- mono-on-mac-and-linux](https://www.cafe-encounter.net/p1510/asp-net-mvc4-net-framework-version-4-5-c-razor-template-for-mono-on-mac-and-linux)

其中“tweaked”表示，例如修复区分大小写的文件名问题。

# entity-framework-4 - 使用 EntityFramework 或 ADO.net 哪个更好

> ID：12530012
> 
> 赞同：1
> 
> 时间：2012-09-21T11:50:39.567
> 
> 标签：entity-framework-4, ado.net

我要创建一个新网站，这对我来说是第一次，我对使用 ADO.net 或 EntityFrameWork 感到困惑，任何人都可以帮助我了解哪个更好用以及每个网站的优点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:18:14.700

这个家伙的博客对实体框架有很好的见解，并从他自己对实体框架与传统 ADO.Net 的经验中进行了比较……[为什么要使用实体框架](http://blogs.msdn.com/b/dsimmons/archive/2008/05/17/why-use-the-entity-framework.aspx)

我目前正在开展一个项目，将大量 ADO.Net 强类型数据集转换为 Entity Framework 4，我可以看到他所说的所有内容都是真实的，还有更多...... EF 似乎得到了很好的支持，并且不会枯萎和死亡就像微软的一些其他技术一样，如上所述，它只是 ADO.Net 的一个包装器，它为您提供了一个具有许多好处的抽象层，主要缺点是 Linq to SQL 比 Linq to Entities 更全面地开发，它可以有时会很痛苦，尽管总有办法实现你的愿望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:16:32.787

实体框架是 ADO.Net 的包装器，并提供了一种更简单的方式来访问您的数据库。在大多数情况下，我建议在原始 ADO.net 上使用 EF，但在需要批量操作性能的情况下，您可能决定不使用 EF。

# asp.net-mvc - 什么是 MVC 子操作？

> ID：12530016
> 
> 赞同：58
> 
> 时间：2012-09-21T11:50:47.533
> 
> 标签：asp.net-mvc

我在 MVC（基础书籍）中阅读了有关子动作的内容，但我真的不知道它是什么？

有人可以解释这些方法吗？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-09-21T11:52:55.217

[Phil Haack 在这篇博](http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx)文中很好地解释了这一点。基本上，子操作是一个控制器操作，您可以使用`Html.Action`帮助程序从视图中调用它：

```
@Html.Action("SomeActionName", "SomeController") 
```

然后，此操作将在视图中的指定位置执行并呈现其输出。与 Partial 的区别在于，partial 只包含指定的标记，除了主要动作之外没有其他动作执行。

因此，您基本上拥有接收请求并呈现视图的主要操作，但在此视图中，您可以渲染多个子操作，这些操作将经历它们独立的 MVC 生命周期并最终呈现输出。而这一切都将在单个 HTTP 请求的上下文中发生。

子操作对于创建整个可重用的小部件很有用，这些小部件可以嵌入到您的视图中，并经历它们独立的 MVC 生命周期。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-29T05:49:03.537

子动作是通过使用 html.renderaction 或 html.action 助手从视图内部调用的动作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-12T12:31:11.497

子操作是通过**@Html.Action()**在视图中调用的操作方法。

> 示例我的控制器上有一个动作。

```
public DateTime Time(DateTime time)
{
    return time;
} 
```

要从**视图**中调用此操作，我将使用：

```
@Html.Action("Time", new { time = DateTime.Now }) 
```

# redirect - Lighttpd 301 问题

> ID：12530017
> 
> 赞同：2
> 
> 时间：2012-09-21T11:50:49.220
> 
> 标签：redirect, http-status-code-301, lighttpd

Facebook 现在在其链接中添加如下参数：

```
http://www.page.com/news/?fb_action_ids=3727229231866&fb_action_types=og.likes&fb_source=timeline_og&action_object_map=etc... 
```

如果我找到参数“ **fb_action_ids** ” ，我可以在 Apache 中重写 url 并进行“ **301 重定向**”。如果我不这样做，我总是会收到“404 错误”

 **```
RewriteCond %{QUERY_STRING} ^(.)fb_action_ids(.)$ [NC]
RewriteRule ^(.*)$ /$1? [L,R=301]** 
```

但是现在我的网站在**lighttpd 服务器**上，我尝试了一千种方法（使用**url.redirect**），但我的 lighttpd 能力有点有限。

任何专家都可以告诉我如何在 lighttpd 中做同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:10:34.433

试试看：

```
$HTTP["url"] =~ "fb_action_ids" {
        url.redirect = (
                "^/(.*)" => "/$1"
        )
} 
```**

# c++ - 多次加载同一个dll

> ID：12530022
> 
> 赞同：12
> 
> 时间：2012-09-21T11:51:14.007
> 
> 标签：c++, winapi, dll, process, loadlibrary

我想多次加载相同的dll，例如Lib.dll！

-> 需要为每个 LoadLibrary 创建一个新进程（CreateProcess 函数）！

任何人都有一个例子或一些提示？！

谢谢和问候

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-21T15:34:09.903

听起来您希望 DLL 的每个实例都有单独的数据段。这是我能想到这个问题的唯一原因。

实现此目的的唯一方法是确保每次调用`LoadLibrary`DLL 时都有不同的文件名。每次需要加载 DLL 时，将其复制到临时文件中，确保您使用的名称不同于任何加载的 DLL 实例。

我赞同上面鼓励您重新设计系统架构的评论。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-21T12:06:03.923

您不能将同一个 DLL 多次加载到单个进程中（或者没有并且有任何影响）。

根据您的评论，DLL 会根据其中一个函数调用执行不同的操作，因此您需要使用“会话”系统，在该系统中为每个函数保留单独的数据集并根据需要（通过另一个调用）创建它们并传递句柄或类似于每个函数调用。这是大多数 Win32 API 的工作方式（文件句柄、窗口句柄、GDI 对象等）

如果您使 DLL 成为 COM 主机并使用 COM 对象，则每个类实例都会自动处理。

如果您想使用一个单独的进程，那么您可以通过启动一个新进程来托管 DLL 并使用多种 IPC 形式之一与其通信来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T16:24:42.427

您将 DLL 视为对象实例。这根本不是 DLL 的工作方式。DLL 不是对象，它们是一堆代码和资源。无论理论上您可以加载多少次 DLL，这些事情都不会改变。因此，在同一个进程中加载​​ DLL 的多个实例是没有意义的。

这是一个很好的例子，说明了为什么全局变量往往是一个坏主意。数据需要能够根据需要进行实例化。

因此，如果您需要一个对象的多个实例来处理，您应该设计 DLL 来完全做到这一点。正如其他人所说，某种会话，或者只是您可以随时实例化的某个对象。

这是对抽象问题的抽象回答。如果你能解释更多关于这个 DLL 究竟做了什么，以及为什么你需要它的多个实例，那将会有很大帮助。

# google-apps-script - 如何通过谷歌应用脚 本从管理员帐户访问域用户的数据

> ID：12530024
> 
> 赞同：1
> 
> 时间：2012-09-21T11:51:20.800
> 
> 标签：google-apps-script

我无法从该用户的管理员帐户访问域用户的数据......我尝试在下面的 url 下制作谷歌文档的域用户的存档：'https://docs.google.com/feeds/[userName]/private /档案'

和这个 url 来获取域用户的联系方式：https://www.google.com/m8/feeds/contacts/[userName]/full"

但它不起作用......请给出一些建议或其他解决方案来做到这一点。

```
for contacts, code is :
 function getContacts(user){
      var scope = 'https://www.google.com/m8/feeds/';
      //oAuth
      user="user@yourdomain.com"

      var fetchArgs = googleOAuth_('contacts', scope);
      var url = scope +'contacts/'+ user+'/full?v=3&alt=json';
      var urlFetch = UrlFetchApp.fetch(url, fetchArgs);
    }

    //--------------------------------------------------------------------------------------
    //Google oAuth
    //Used by getDocuments(user)
    function googleOAuth_(name,scope) {
      var oAuthConfig = UrlFetchApp.addOAuthService(name);
      oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
      oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
      oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
      oAuthConfig.setConsumerKey(consumerKey);
      oAuthConfig.setConsumerSecret(consumerSecret);
      return {oAuthServiceName:name, oAuthUseToken:"always", method: "GET"};
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:08:02.087

我编写了一些使用 Google Docs 原生 API 访问用户提要的代码。你可以在这里查看。 [https://sites.google.com/site/appsscripttutorial/urlfetch-and-oauth/get-the-document-list-of-a-domain-user](https://sites.google.com/site/appsscripttutorial/urlfetch-and-oauth/get-the-document-list-of-a-domain-user)

可以将相同的概念扩展到执行您在问题中提出的其他目标

# android - android将时间范围格式化为字符串

> ID：12530025
> 
> 赞同：-1
> 
> 时间：2012-09-21T11:51:27.190
> 
> 标签：android, datetime-format

> **可能重复：**
> [如何计算 Java 中的时间跨度并格式化输出？](https://stackoverflow.com/questions/635935/how-can-i-calculate-a-time-span-in-java-and-format-the-output)

是否有一个简单的函数将时间范围格式化为字符串？目前我可以生成这样的输出：

*“81天”*

```
final Calendar today = Calendar.getInstance();
int today_day = today.get(Calendar.DAY_OF_YEAR);

final Calendar startCal = Calendar.getInstance();
startCal.add(Calendar.Day_OF_YEAR,81);  
int start_day = startCal.get(Calendar.DAY_OF_YEAR);

 int dif= start_day-today_day;
 if (dif >1){
   str = "in "+dif+" days";
 } 
```

但我希望它是

*“2个月零20天”*

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-21T12:09:51.550

我建议您使用日期对象：

```
Date startDay = new Date(); //today
Date targetDay = new Date();
targetDay.setDate(startDay.getDate() + 81);
Date difference = new Date(startDay.getTime() - targetDay.getTime());
// you may format as you want i.e difference.getMonth()
String differenceDateString = difference.toString(); 
```

`Calendar`的`getTime`方法也返回`Date`对象。

# algorithm - 插入排序分析和求和符号

> ID：12530026
> 
> 赞同：8
> 
> 时间：2012-09-21T11:51:28.820
> 
> 标签：algorithm, complexity-theory, insertion

我试图了解插入排序的最坏情况分析，但我对[幻灯片 21 (ppt)](http://www.cse.unr.edu/%7Ebebis/CS477/Lect/InsertionSortBubbleSortSelectionSort.ppt)中涉及的数学有疑问。

我理解第一个公式：

![Σ(j=1 到 n) j=n(n+1)/2](../Images/98496f148c09822213f5ce2dd11c36d7.png)

但我正在努力解决这些问题：

1.  为什么最后有a `- 1`？
    ![Σ(j=2 到 n) j=n(n+1)/2-1](../Images/1df833dd8a0adb9db6a3b078da486efa.png)
2.  另外，我不明白这个：
    ![Σ(j=2 到 n)(j-1) = n(n-1)/2](../Images/2958eebfe88d34a2080c9990a3e6359a.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T11:56:23.160

从 1 到 n 的数字相加是高斯的诀窍：

![高斯的把戏](../Images/66570b9d68d9744ddb8a9113f6117206.png)

## 第一个公式

但是，您要计算的总和从 开始`2`，而不是`1`，这就是为什么您必须从公式中减去第一项（即 1）：

![在此处输入图像描述](../Images/14cbbc83a18bcb95c09be8b0dac65d57.png)

## 第二个公式

本质上，您计算从 1 到 (n-1) 的总和。如果你用 替换`n`高斯的技巧`n-1`，你会得到他们使用的第二个公式。

您还可以通过索引转换看到这一点：

![在此处输入图像描述](../Images/fb9850a42172de67eaf13b69fd08ddbf.png)

正如你所看到的，我已经调整了总和的边界：总和的上限和下限都减少了 1。实际上，这会使总和中的*所有*项都减少 1，要纠正这个问题，你必须加 1到 Σ 下的项：`(j-1) + 1`= `j`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:53:08.257

`Σ(j=2 to n) j=n(n+1)/2-1`从 2 而不是 1 开始。所以除了 1 之外，它是相同的项加在一起。所以总和少了 1。

`Σ(j=2 to n)(j-1)`是与 相同的项加在一起`Σ(j=1 to n-1)(j)`。所以要在公式中找到它的总和替换`n`为。`n-1``n(n+1)/2`

# sql - 复制表并将其移动到不同的文件组

> ID：12530027
> 
> 赞同：0
> 
> 时间：2012-09-21T11:51:30.373
> 
> 标签：sql, sql-server

我需要复制 atable （不复制数据），然后将其移动到*不同的文件组*。类似于以下内容（这对我不起作用）。

```
SELECT * INTO NewTable ON [FG_newFilegroup] FROM oldTable WHERE 1=0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-04T15:27:26.620

SELECT INTO 方法不会将约束、外键或索引复制到新表。要做到这一点是一项重大的努力。

另一种策略是通过在目标文件组上重建表的聚集索引来仅移动表的主要数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:54:53.983

您可以在 之前更改默认文件组`select into`，并在之后重置它：

```
select 41 as i into newtable1
alter database test modify filegroup [secondary] default
select 41 as i into newtable2
alter database test modify filegroup [primary] default

select  t.name as TableName
,       f.name as Filegroup
from    sys.tables t
join    sys.indexes i
on      t.object_id = i.object_id
join    sys.filegroups f
on      f.data_space_id = i.data_space_id
where   t.name like 'newtable%' 
```

这打印：

```
TableName   Filegroup
newtable1   PRIMARY
newtable2   SECONDARY 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T13:40:55.780

使用它来创建一个没有数据的新表：

```
从 OldTable 中选择 TOP 0 * INTO NewTable
```

如果您还想要数据，请删除**TOP 0 。**之后你可以对新表做任何事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T11:56:07.340

你应该这样写：

```
INSERT INTO NewTable
SELECT * FROM oldTable WHERE 1 = 0 
```

请注意，您在查询中编写的表达式始终为 false，因此不会从第二个语句`1 = 0`返回任何行。`SELECT`因此，这将导致根据查询的 SELECT 子句中的列创建一个空表，并且不会将第二个表中的数据复制到新创建的表中。要复制数据，您还需要在`WHERE`子句中提供一个真正的表达式，例如`WHERE 1 = 1`.

# spring-mvc - Spring DM、Rest、JAXB 集成问题

> ID：12530031
> 
> 赞同：1
> 
> 时间：2012-09-21T11:51:43.197
> 
> 标签：spring-mvc, osgi

我正在将 Spring Rest 与 Spring DM (OSGi) 一起使用。我需要使用 JAXB 进行编组/解组。当模型对象属于同一个项目时，我可以轻松地将 JAXB 与 Spring 一起使用。但是，当我尝试在 OSGi（Spring DM）中做同样的事情时遇到了问题。因为我将模型对象保存在不同的包中，`jaxb2Marshaller`所以无法找到带有注释的模型`@XmlRootElement`。

例外是：

> org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException：来自 ServletContext 资源 [/WEB-INF/building-servlet.xml] 的 XML 文档中的第 51 行无效；嵌套异常是 org.xml.sax.SAXParseException；行号：51；列号：52；cvc-complex-type.2.4.c：匹配通配符是严格的，但找不到元素'tx：annotation-driven'的声明

请建议我一些解决方法来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T21:11:27.997

这很可能与系统捆绑包也提供 jaxb 的事实有关，因为 jre 包含 jaxb。确保导入它的特殊版本，并确保已安装此版本。这可能会对您有所帮助。您可能还需要确保系统包导出的版本配置正确。为此，您需要更改 etc 文件夹中的 jre.properties 并将正确的版本设置为 jaxb 包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T06:29:01.563

刚好重温了我的这个帖子。这个问题很久以前就解决了。我使用 Spring 的“开箱即用”JAXB Marshaller (org.springframework.oxm.jaxb.Jaxb2Marshaller) 为我们进行编组和取消编组。对不起，我的回复晚了，感谢您的关注。

# c# - 如何从平板电脑 c#.net 中的浏览器读取 GPS 信息

> ID：12530035
> 
> 赞同：0
> 
> 时间：2012-09-21T11:51:48.430
> 
> 标签：c#, android, browser, gps

我有一个基于网络的应用程序。当我的客户从他们的平板电脑访问该网站时，我需要记录他们的 GPS 坐标。谁能帮我弄清楚我该怎么做？我的应用程序是一个 c#.net 应用程序。我想连续上传客户端的位置到服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:55:23.660

您需要使用[Geolocation browser api](http://dev.w3.org/geo/api/spec-source.html)。查看[此](https://stackoverflow.com/questions/1959141/how-do-i-detect-users-location-from-a-webpage-opened-in-the-android-browser)问题以获取更多信息。需要考虑的一件事是，无论设备的位置如何，如果未打开它，则可能无法使用 gps。

# ruby-on-rails - 如何在 RSpec 测试中生成 PDF？

> ID：12530037
> 
> 赞同：3
> 
> 时间：2012-09-21T11:51:49.567
> 
> 标签：ruby-on-rails, rspec, rspec-rails, prawn, prawnto

我正在使用 Prawn 和 Prawnto 在 Rails 3.2.6 中生成 PDF

我有一个响应 .pdf 扩展名的控制器，如下所示：

```
respond_to do |format|
  format.pdf { prawnto some_options }
end 
```

以及执行此操作的测试：

```
get :pdf_route, :format => :pdf
response.header['Content-Type'].should include 'application/pdf' 
```

PDF 渲染大约需要 2-3 秒，并且大大降低了我的测试套件的速度。

也就是说，由于**我不想**在我的控制器测试中测试 PDF 的内容，我想完全取消 PDF 生成，并确保我使用 respond_to 委托给适当的 PDF 视图模板。这是我无法弄清楚的一点。

这是我到目前为止所尝试的：

```
format = mock("format")
format.stub(:pdf).and_return "some PDF stuff"
controller.stub(:respond_to).and_yield(format) 
```

然而，这似乎没有帮助，控制器仍然最终呈现 PDF。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T06:28:14.637

这个怎么样？

```
it "generates a pdf with prawnto" do
  controller.should_receive(:prawnto)
  get :pdf_route, :format => :pdf
end 
```

# java - Java Applet 背景颜色

> ID：12530042
> 
> 赞同：1
> 
> 时间：2012-09-21T11:52:11.247
> 
> 标签：java, applet, background-color

我创建了一个显示登录页面的小程序。小程序的代码如下：

```
import java.net.*;
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;

/**
 * Class login - write a description of the class here
 * 
 * @author (your name) 
 * @version (a version number)
 */

public class login extends JApplet

    implements ActionListener
{
    // instance variables - replace the example below with your own

    private JTextField input;
    private JTextField pass;
    private JPasswordField pwd;
    private final String LOGIN = "LOGIN";
    private final String PASSWORD = "PASSWORD";
    private final String CLEAR = "CLEAR";
    private final String Fgt_pwd="Forgot Password";
    private final String REGISTER="REGISTER";
     /**
     * Called by the browser or applet viewer to inform this JApplet that it
     * has been loaded into the system. It is always called before the first 
     * time that the start method is called.
     */
    public void init()
    {
        // provide any initialisation necessary for your JApplet
    }

    public void actionPerformed(ActionEvent e)
    {
        String command = e.getActionCommand();
        if(LOGIN.equals(command))
        {
            input.setText("Login Successful");
           try{
               URL url = new URL(getDocumentBase(), "feedback.html");
               getAppletContext().showDocument(url);
            }catch(MalformedURLException ex){
                showStatus("URL not found");
            }

        }    
        else if(CLEAR.equals(command))
            input.setText("");
        else if(Fgt_pwd.equals(command))
            input.setText("Redirecting to Forgot Password Page");
        else if(REGISTER.equals(command))
            input.setText("Redirecting to Registration Page");
    }

    /**
     * Called by the browser or applet viewer to inform this JApplet that it 
     * should start its execution. It is called after the init method and 
     * each time the JApplet is revisited in a Web page. 
     */
    public void start()
    {
        // provide any code requred to run each time 
        // web page is visited
         // this is a workaround for a security conflict with some browsers
        // including some versions of Netscape & Internet Explorer which do 
        // not allow access to the AWT system event queue which JApplets do 
        // on startup to check access. May not be necessary with your browser.
        Container contentPane = getContentPane();
        JScrollPane sPane = new JScrollPane();
        JPanel pContPanel = new JPanel();

        pContPanel.setLayout(new GridBagLayout());

        GridBagConstraints gbc = new GridBagConstraints(6, 5, 1, 1, 0, 0, GridBagConstraints.CENTER, GridBagConstraints.HORIZONTAL, new Insets(10,10,10,10), 20, 20);

        Font myFont = new Font("Ariel",Font.BOLD,22);

        JLabel mtitle = new JLabel("WELCOME TO D.A.S.H.");
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 1;
        gbc.gridy = 0;
        gbc.gridwidth = 1;
        pContPanel.add(mtitle, gbc);
        mtitle.setFont(myFont);

        //Adding the title
        JLabel title = new JLabel("SIGN IN TO YOUR ACCOUNT");
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 1;
        gbc.gridwidth = 3;
        pContPanel.add(title, gbc);

        //Create upper left part for Login ID
        JPanel panel1 = new JPanel();
        JLabel prompt = new JLabel("Enter Login ID");
        panel1.add(prompt);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 2;
        gbc.gridwidth = 1;
        pContPanel.add(panel1, gbc); 
       // prompt.setAlignmentX(Component.LEFT_ALIGNMENT);

        //adding the textfield for username
        input = new JTextField(15);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 1;
        gbc.gridy = 2;
        gbc.gridwidth = 2;
        pContPanel.add(input, gbc); 

        //adding the label for password
        JPanel passPanel=new JPanel();
        JLabel passLabel = new JLabel("Enter Password");
        passPanel.add(passLabel);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 3;
        gbc.gridwidth = 1;
        pContPanel.add(passPanel, gbc);

        //adding the password field
        pwd=new JPasswordField(15);
        pwd.setEchoChar('*');
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 1;
        gbc.gridy = 3;
        gbc.gridwidth = 2;
        pContPanel.add(pwd, gbc);

        JLabel rtitle = new JLabel("NEW USER? CLICK HERE TO REGISTER.");
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 5;
        gbc.gridwidth = 3;
        pContPanel.add(rtitle, gbc); 

        //Now create button for login
        JButton bLogin = new JButton(LOGIN);
        bLogin.addActionListener(this);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 4;
        gbc.gridwidth = 1;
        pContPanel.add(bLogin, gbc);

        //now create button for clear
        JButton bPassword = new JButton(CLEAR);
        bPassword.addActionListener(this);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 1;
        gbc.gridy = 4;
        gbc.gridwidth = 1;
        pContPanel.add(bPassword, gbc);

        //now create button for forgot password
        JButton bForgotPwd = new JButton(Fgt_pwd);
        bForgotPwd.addActionListener(this);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 2;
        gbc.gridy = 4;
        pContPanel.add(bForgotPwd, gbc);

        JButton bRegister = new JButton(REGISTER);
        bRegister.addActionListener(this);
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 2;
        gbc.gridy = 5;
        gbc.gridwidth = 1;
        pContPanel.add(bRegister, gbc);

       //adding the panel to the scrollpane 
       sPane.setViewportView(pContPanel);
       //adding scrollpane to the ContentPane
       contentPane.add(sPane, BorderLayout.CENTER);

    } 
```

还有一种绘画方法，目前不包含任何内容。代码的输出是完美的。当我尝试通过将paint方法添加到上述代码中来添加背景颜色时：

```
public void paint(Graphics g)
    {

        // simple text displayed on applet
        setBackground(Color.blue);
    } 
```

我看到的输出是一个只有蓝色背景的窗口（在 appletviewer 中）隐藏了最初显示的所有其他按钮和文本字段。如果我在浏览器中输出，它会显示没有任何背景颜色的原始输出。

你能帮我添加一些图形（背景和文本颜色，可能是图像），以便小程序看起来不错吗？（我必须将其作为大学迷你项目提交）。

# javascript - 如何在jquery mobile中启用垂直滚动

> ID：12530043
> 
> 赞同：1
> 
> 时间：2012-09-21T11:52:17.163
> 
> 标签：javascript, html, jquery-mobile, scroll, jquery-datatables

我需要能够使用 jquery mobile滚动**表格元素。**

例如，现在我在表中有很多数据。我的页面显示了 20 条记录，我知道有 25 条记录，所以当我想垂直滚动时，我的整个页面都在移动，而不是我的表应该移动。

我正在为表格使用 DataTables 插件。

代码：

```
<table id="level" width="100%" border="1" cellspacing="2" cellpadding="5" >
                <thead>
                    <tr class="even">
                        <th></th>
                        <th><span class="time_var">Time</span></th>
                        <th><span class="id_level_var">ID Level</span></th>
                        <th><span class="level_var">Level</span></th>
                    </tr>
                </thead>

              <tbody>
              </tbody>
        </table> 
```

和 javascript：

```
$(document).ready(function() {
        oTable = $('#level').dataTable( {
            "bLengthChange": false,
                    "aaSorting": [[1,'asc']],
            "bProcessing": true,
            "bServerSide": true,
            "sPaginationType": "full_numbers",
            "sScrollY": "500px",
            "bDeferRender": true,
            "sAjaxSource": "table.php"
        } ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:15:02.983

缺少一个

```
} ); 
```

抓住你的文件。准备好了吗？

```
$(document).ready(function() {
    oTable = $('#level').dataTable( {
        "bLengthChange": false,
                "aaSorting": [[1,'asc']],
        "bProcessing": true,
        "bServerSide": true,
        "sPaginationType": "full_numbers",
        "sScrollY": "500px",
        "bDeferRender": true,
        "sAjaxSource": "table.php"
    } );
}); 
```

您的代码在这里工作：http: [//live.datatables.net/otihog/edit#javascript,html](http://live.datatables.net/otihog/edit#javascript,html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:04:58.353

你有没有尝试过 ：

```
<div style="width:260px; overflow:scroll" >
   //your dataTable
</div> 
```

# ruby-on-rails - 瘦服务器中的 em.synchrony 需要使用后返回结果

> ID：12530052
> 
> 赞同：4
> 
> 时间：2012-09-21T11:52:52.287
> 
> 标签：ruby-on-rails, thin, eventmachine

瘦服务器基于 EventMachine，因此我无法从 EM.synchrony 块中阻止它。但在这种情况下，输出是：2, 1 但不是 1,2。我该如何解决？

```
 EM.synchrony do
    update_ads ads_hash, invalid_ads, ip, params, user_agent, request
    EM::Synchrony::FiberIterator.new([1,2,3]).each do |i|
      # some http requests 
    end
    puts "1"  
    # EventMachine.stop
 end
 puts "2" 
```

感谢提前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:32:05.057

由于其异步特性，EM 不保证执行顺序。1 仅在 FiberIterator 完成其工作后执行，而 2 更早执行。如果您需要在 1 之后执行 2，请将其放在`EM.synchrony`块内。

**更新**：

```
x = EM.synchrony do
  # update_ads ads_hash, invalid_ads, ip, params, user_agent, request
  EM::Synchrony::FiberIterator.new([1,2,3]).each do |i|
    # some http requests 
  end
   "1"
end

puts x
puts "2" 
```

# java - 为什么子类中的静态块没有被执行？

> ID：12530053
> 
> 赞同：3
> 
> 时间：2012-09-21T11:52:52.743
> 
> 标签：java, static-block

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T12:06:28.697

从[JLS 12.4.1](http://docs.oracle.com/javase/specs/jls/se5.0/html/execution.html#12.4.1)开始：

> 类或接口类型 T 将在以下任何一项第一次出现之前立即初始化：
> 
> *   T 是一个类，并创建了一个 T 的实例。
> *   T 是一个类，并且调用了 T 声明的静态方法。
> *   分配了一个由 T 声明的静态字段。
> *   使用了由 T 声明的静态字段，并且该字段不是常量变量（第 4.12.4 节）。
> *   T 是一个顶级类，并且执行一个词法嵌套在 T 中的断言语句（第 14.10 节）。

正如您所看到的，这些都不会在您的代码中发生（请注意，`name`在 中声明`Parent`，而不是在 中`Child`），因此`Child`不会被初始化并且它的静态块不会被执行。

如果你做一些事情来触发初始化`Child`，你会得到一个预期的输出：

```
new Child();
System.out.println(Child.name); 
```

但是请注意，静态字段不是继承的，因此`Child.name`实际上`Parent.name`是指相同的字段。这就是为什么在实践中使用类似于您的示例的代码没有多大意义。

另请注意，尽管`Child.name`实际上指`Parent.name`的是 ，但它仍然`Child.name`在字节码中被引用，因此您的代码会触发 的加载`Child`，但不会触发其初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T11:53:59.950

`Child.name`实际上`Parent.name`，不需要 Child 。

你可能会觉得这很有趣。

```
public class ClassResolution {
    static class Parent {
        public static String name;

        static {
            System.out.println("this is Parent");
            name = "Parent";
        }

    }

    static class Child extends Parent {
        static {
            System.out.println("this is Child");
            name = "Child";
        }

        static String word ="hello";
    }

    public static void main(String[] args) {
        System.out.println(Child.name);
        System.out.println(Child.word);
        System.out.println(Child.name);
    }
} 
```

印刷

```
this is Parent
Parent
this is Child
hello
Child 
```

`javap`此类打印的引用被`Child`保留。

```
C:\>javap -c -classpath . ClassResolution
Compiled from "ClassResolution.java"
public class ClassResolution {
  public ClassResolution();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public static void main(java.lang.String[]);
    Code:
       0: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;
       3: getstatic     #3                  // Field ClassResolution$Child.name:Ljava/lang/String;
       6: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
       9: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;
      12: getstatic     #5                  // Field ClassResolution$Child.word:Ljava/lang/String;
      15: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      18: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;
      21: getstatic     #3                  // Field ClassResolution$Child.name:Ljava/lang/String;
      24: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      27: return
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T12:07:05.047

[JLS#12.4.1。初始化发生时](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4)

> 对静态字段的引用（第 8.3.1.1 节）只会初始化实际声明它的类或接口，即使它可能通过子类、子接口或实现接口的类的名称来引用。

**我想上面已经说明了一切..**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T11:58:29.910

简而言之，`Child.name`等于`Parent.name`，编译器就是这样编译的。

因为`name`是Parent类的静态字段，所以是Parent中的类方法，不是Child。Java 编译器允许一个快捷方式，其中子类可以调用静态父类方法/字段，就好像它们来自自己的类一样，但在内部它们是相对于父类进行编译的。

尽管您的代码引用了`Child.name`，但它是内部`Parent.name`的，由编译器处理。然后，因为 Child 类没有被初始化，所以`<clinit>`静态初始化块永远不会运行，并且`name`仍然是“Parent”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T12:29:46.120

糟糕，我错了，对 Child 的引用没有被删除，并且类确实被加载了，但没有初始化。恭喜，您发现了一个 JVM 错误。转到 Oracle 站点并归档。如果您不想这样做，请告诉我，我会自己做。

编辑：我又错了，请参阅下面的评论。这不是一个错误，这是一个“陷阱”。

# android - 不同线程中的Android控制器

> ID：12530057
> 
> 赞同：0
> 
> 时间：2012-09-21T11:53:02.523
> 
> 标签：android, android-activity, controller

我听说主 Activity 应该在与实际程序不同的线程中运行。那里的最佳做法是什么，我应该在哪里开始一个新线程。我有一个控制器可以启动和组织一些东西，我应该在不同的线程中运行控制器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:59:48.117

要知道的一点是，所有回调都在`Activity`UI 线程上运行，您不应该在 UI 线程上做任何冗长的工作。否则，您将影响 UI 的响应能力并可能导致 ANR。

如果您需要执行任何类型的冗长操作，例如一些严重的数字运算、从远程服务器下载数据、涉及阻塞调用等，那么您应该在一个新的、非 UI 线程上执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:40:07.270

ANR = 应用程序无响应 ;-)

# php - 将产品添加到购物车之前的 Magento 事件

> ID：12530063
> 
> 赞同：4
> 
> 时间：2012-09-21T11:53:12.707
> 
> 标签：php, events, magento

我想根据客户选择的选项计算价格。例如，有两个可配置的属性`length,width`

在将产品添加到购物车之前，我想根据选择的长度和宽度修改价格

```
$finalPrice=$rrp+($length*$width) 
```

是否有任何活动可以实现这一目标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T13:14:34.990

我会查看`catalog_product_get_final_price`，有关示例用法，请参阅[`Mage_CatalogRule_Model_Observer::processFrontFinalPrice()`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/CatalogRule/Model/Observer.php#L92)。请注意，基于期权的定价是在此事件之后处理的；见[`Mage_Catalog_Model_Product_Type_Price::getFinalPrice()`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Catalog/Model/Product/Type/Price.php#L74)和[`Mage_Catalog_Model_Product_Type_Configurable_Price::getFinalPrice()`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Catalog/Model/Product/Type/Configurable/Price.php#L43)。

请记住，自定义此功能需要对不同的报价状态、客户状态、产品类型等进行大量测试。例如，考虑第一次添加到购物车的产品，然后从购物车更新其数量. 通常有必要在几个方法/观察者中实现逻辑来处理所有排列。

客户未登录时在 CE1.7 中触发的事件的完整列表、新购物车、简单产品：

**controller_front_init_routers**

*   `Mage_Cms_Controller_Router::initControllerRouters()`

**controller_action_predispatch**

*   `Mage_Log_Model_Visitor::initByRequest()`
*   `Mage_PageCache_Model_Observer::processPreDispatch()`
*   `Mage_Persistent_Model_Observer::emulateQuote()`
*   `Mage_Persistent_Model_Observer_Session::renewCookie()`
*   `Mage_Persistent_Model_Observer::checkExpirePersistentQuote()`
*   `Mage_Persistent_Model_Observer::emulateCustomer()`

**catalog_product_load_after**

*   `Mage_CatalogInventory_Model_Observer::addInventoryData()`

**custom_quote_process**

*   `Mage_Persistent_Model_Observer::setLoadPersistentQuote()`

**sales_quote_config_get_product_attributes**

*   `Mage_SalesRule_Model_Observer::addProductAttributes()`

**prepare_catalog_product_collection_prices**

*   `Mage_CatalogRule_Model_Observer::prepareCatalogProductCollectionPrices()`

**sales_quote_item_collection_products_after_load**

*   `Mage_CatalogInventory_Model_Observer::addInventoryDataToCollection()`

**sales_quote_item_qty_set_after**

*   `Mage_CatalogInventory_Model_Observer::checkQuoteItemQty()`

**sales_quote_collect_totals_before**

*   `Mage_Tax_Model_Observer::quoteCollectTotalsBefore()`

**sales_quote_address_collect_totals_before**

*   `Mage_Sales_Model_Observer::changeQuoteCustomerGroupId()`

**sales_quote_address_collect_totals_after**

*   `Mage_Sales_Model_Observer::restoreQuoteCustomerGroupId()`

**sales_quote_address_collect_totals_before**

*   `Mage_Sales_Model_Observer::changeQuoteCustomerGroupId()`

**catalog_product_get_final_price**

*   `Mage_CatalogRule_Model_Observer::processFrontFinalPrice()`

**sales_quote_address_collect_totals_after**

*   `Mage_Sales_Model_Observer::restoreQuoteCustomerGroupId()`

**sales_quote_collect_totals_after**

*   `Mage_Sales_Model_Observer::setQuoteCanApplyMsrp()`

**sales_quote_save_before**

*   `Mage_Persistent_Model_Observer::setQuotePersistentData()`

**sales_quote_save_after**

*   `Mage_Checkout_Model_Observer::salesQuoteSaveAfter()`
*   `Mage_Log_Model_Visitor::bindQuoteCreate()`

**sales_quote_item_save_before**

*   `Mage_Reports_Model_Event_Observer::checkoutCartAddProduct()`

**checkout_cart_add_product_complete**

*   `Mage_Wishlist_Model_Observer::processAddToCart()`

**controller_action_postdispatch**

*   `Mage_Log_Model_Visitor::saveByRequest()`

**controller_front_send_response_after**

*   `Mage_Persistent_Model_Observer_Session::synchronizePersistentInfo()`

# ruby-on-rails - Rails 康斯卡宝石

> ID：12530072
> 
> 赞同：0
> 
> 时间：2012-09-21T11:53:36.417
> 
> 标签：ruby-on-rails, cancan

嗨，我需要新的（对我而言）gem 'cancan' 的帮助

我有下一个问题：在我的应用程序中，我有“发布”模型和“照片”模型（路线：）

```
 resources :posts do
    resources :photos
  end 
```

在ability.rb中我写道：

```
class Ability
  include CanCan::Ability

  def initialize(user)

    user ||= User.new

    if user.roles.first.nil?
        can :read, Post
    #not logged
    elsif user.roles.first.name == "user"
        #loged in as user
        can :read, Post
        can :create, Post
        can :update, Post, :user_id => user.id
        can :destroy, Post , :user_id => user.id 

    elsif user.roles.first.name == "admin"
        # login as admin
        can :manage, Post
    end

  end
end 
```

而且我不知道那是什么逻辑：如果帖子由另一个用户创建，则当前用户无权访问页面

```
localhost:3000/post/97/photos 
```

而且他（当前用户）不能在那里创建任何东西或破坏，换句话说，他只能阅读`localhost:3000/post/97/`

但是，如果当前用户是 auto - 他可以访问`localhost:3000/post/97/photos`,`localhost:3000/post/97/photos/new`并且`localhost:3000/post/97/photo/244/show`...

有类似的能力：can :destroy, Photo , @photo.post.user_id => user.id // 但是如何定义@photo ?? 或者如果你知道更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:43:59.797

您可以使用如下块：

```
can :manage , Post  do | post |
  post.user_id == user.id
end 
```

这意味着只有当前用户创建了帖子，它才能管理它。

# java - Java泛型和继承混淆

> ID：12530075
> 
> 赞同：0
> 
> 时间：2012-09-21T11:53:57.947
> 
> 标签：java, generics

在 Kathy Sierra 关于 SCJP 的书中，我们了解到，当我们写

```
List <A> list = new ArrayList <A> (); 
```

这意味着这个列表将只接受 A 类型的元素，而不是它的子类型或超类型，只接受 A 类型。然后我遇到了这个例子

```
import java.util.*;

interface A {
    public void a();
}
class B implements A {
    public void a() { }
    public void b() { }
}

class C extends B {
    public void a() { }
}

class D extends C {

}

public class Generics {
    public static void main() {
        List <B> lst = new ArrayList <B> ();
        lst.add(new B());
        lst.add(new C());
        lst.add(new D());
    }
} 
```

这里已经用 B 声明了一个列表作为它的绑定类型。但它看起来也接受它的子类型的对象。为什么会这样？如果可能的话，那么这个声明在java中是否可用

```
List <? extends B> list = new ArrayList <B> (); 
```

现在用这个符号我们告诉编译器任何扩展 B 的类型都可以进入这个列表。请帮忙，我真的很困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:56:42.113

集合中允许的类型与集合本身的声明类型之间存在区别。为了

```
List <A> list = new ArrayList <A> (); 
```

它声明了一个元素列表。每个元素**都是-a** `A`。每个元素都可以是 的子类`A`，但列表本身被视为`A`s 的列表。

注意区别。香蕉**是**水果。但是香蕉的集合*不是*水果的集合（违反直觉）。否则，您可以获取该香蕉集合，将其视为水果集合，然后添加一个苹果。

```
List <? extends B> list = new ArrayList <B> (); 
```

表示该列表可以是 B 的列表，也可以是 B 的子类型的列表。例如以下都是有效的：

```
List <? extends B> list = new ArrayList <B> ();
List <? extends B> list = new ArrayList <C> ();
List <? extends B> list = new ArrayList <D> (); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:33:35.710

用 List 示例教授泛型的问题是人们可以理解示例，但仍然不能理解规则。

随着泛型的出现，编译器没有被人类知识指导，所以它不知道 a`List<A>`是*一个有序的元素序列*（它可能是一个长而弯曲的象牙的[长鼻](http://en.wikipedia.org/wiki/Mammoth)），因此它不能保证 List只*接受*类型的元素`A`。编译器知道的所有内容都由以下定义提供

```
interface List<E> {
  public void add(E);
  public E get(int index);
} 
```

这段代码没有定义单一类型：它定义了无限系列的类型：

```
interface ListOfStrings {
  public void add(String s);
  public String get(int index);
}

interface ListOfShapes {
  public void add(Shape e);
  public Shape get(int index);
} 
```

取决于您如何**实例化**参数化类型。由于在 Java 中每个子类型都是其超类型的有效替代品，因此 a`Rectangle`是 a 的合法`List<Shape>`参数`add(Shape s)`。

这是一个人认为“*泛型，我终于找到你了！* ”的时候。然后他启动了一个 IDE，输入

```
List<Shape> shapes = new LinkedList<Rectangle>(); 
```

并且编译器拒绝编译。*“-这是怎么回事？我可以将矩形添加到形状列表中，但矩形列表不是形状列表？”* . 问题是人们从列表、形状和矩形的角度来思考，但编译器不知道这些。它看到

```
T reference = <expression returning type S> 
```

所以它想知道*“ - 是`S`type 的有效替代品`T`吗？”* . 换句话说，类型层次结构中`T`的父级是`S`根据 Java 规则构造的吗？所以它仔细检查了它的旧 Java 书，发现没有，`X<A>`不是`X<B>`父级。非法代码。停止。

*“-但是矩形列表肯定包含形状！我刚刚编译了一个程序，它在一个矩形中添加了一堆矩形`List<Shape>`！”* . 这对编译器来说没有任何意义，它不是一个聪明的程序——你看……它只能解释它几年前学到的那几条规则，甚至无法区分 a`List`和 a之间的区别`Mammoth`。它只知道它的旧 Java 书，并且在书中明确说明并指出 and**之间没有子类型关系`X<A>`，`X<B>`无论`A`and之间如何`B`相互关联**。*“ - 如果只有泛型像数组一样实现......你，愚蠢的Java人......”*事实上：

```
String[] strings = new String[10];
Object[] objects = strings;
objects[0] = new Rectangle(); // ArrayStoreException at runtime 
```

也许你现在明白了。毕竟，那些 Java 人并没有那么愚蠢……至少，他们为自己的类型系统选择的那些*花哨的规则*是有目的的，至少他们这样做是出于实际原因。他们使数组是*协变*的，但泛型是*不变*的。由于数组和列表的内容都可以更改（它们是*可变*的），这会将数组（但不是列表）暴露给上面看到的问题。例如，[Scala](https://stackoverflow.com/q/6684493/315306)通过使列表协变但不可变（a`List[Integer]`可以分配给 a `List[Number]`，但它们是只读的）和数组可变但不变（你不能在需要 an 的`Array[Integer]`地方使用 an `Array[Number]`，但你可以修改）来实现类型安全他们的内容）。

最后，为了将子类型关系移植`A`到`B`泛型世界中，可以使用通配符`?`，但这对于一个全新的故事来说很重要。我只是预计在旧的 Java 书中写的是`List<Rectangle>`不扩展`List<Shape>`的，但它是`List<? extends Shape>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:59:02.783

“这意味着这个列表将只接受 A 类型的元素，而不是它的子类型或超类型，只接受 A 类型。然后我遇到了这个例子”

这是错误的——它将接受任何派生类型。Java 泛型也是在编译器中使用擦除实现的。

这与有一个接受 B 的方法参数相同，它应该接受 B、C 和 D。

另请注意，在运行时由于擦除没有类型检查，所以：

```
List <B> lst = new ArrayList <B> (); 
```

变成

```
List <object> lst = new ArrayList <object> (); 
```

这可能会帮助您：

[http://www.ibm.com/developerworks/java/library/j-jtp01255/index.html](http://www.ibm.com/developerworks/java/library/j-jtp01255/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T12:08:13.177

“这意味着这个列表将只接受类型 A 的元素，而不是它的子类型或超类型，只接受类型 A” - 这是不正确的。我可以重写你的代码如下：

```
List <A> list = new ArrayList <A> ();
B b = new B();
B c = new C();
B d = new D();
list.add(b);
list.add(c);
list.add(d); 
```

当我们将变量 b、c 和 d 分配给 B、C 和 D 的实例时，它们都是类型“B”。多态性？

如果您看到，B、C 和 D 实现了 A，因此我可以将 B、C、D 的实例分配给 A。

# c# - 从资源加载 dll 失败

> ID：12530081
> 
> 赞同：0
> 
> 时间：2012-09-21T11:54:07.237
> 
> 标签：c#, wpf

我的应用程序依赖于几个 DLL。我将它们全部放在资源中，然后在应用程序启动时使用我在网上找到的方法加载它们：

```
public static void LoadDllsFromResources()
        {
        AppDomain.CurrentDomain.AssemblyResolve += (sender, a) =>
        {
            string dllName = a.Name.Contains(',')
                                ? a.Name.Substring(0, a.Name.IndexOf(','))
                                : a.Name.Replace(".dll", "");

            dllName = dllName.Replace(".", "_");

            if (dllName.EndsWith("_resources")) return null;

            System.Resources.ResourceManager rm =
                new System.Resources.ResourceManager(
                    "DesktopDashboard" + ".Properties.Resources",
                    System.Reflection.Assembly.GetExecutingAssembly());

            byte[] bytes = (byte[])rm.GetObject(dllName);

            return System.Reflection.Assembly.Load(bytes);
        };
    } 
```

在我尝试添加 WPFToolkitExtended.dll 之前，它对我来说很好。比我的应用程序抛出错误。是什么让这个 DLL 如此特别？

> System.Windows.Markup.XamlParseException：“设置 connectionId 引发异常。” 行号“4”和行位置“37”。---> System.InvalidCastException：[A]Xceed.Wpf.Toolkit.BusyIndi​​cator 不能转换为 [B]Xceed.Wpf.Toolkit.BusyIndi​​cator。类型 A 源自字节数组中上下文“LoadNeither”中的“WPFToolkit.Extended, Version=1.7.4644.13122, Culture=neutral, PublicKeyToken=3e4669d2f30244f4”。类型 B 源自字节数组中上下文“LoadNeither”中的“WPFToolkit.Extended, Version=1.7.4644.13122, Culture=neutral, PublicKeyToken=3e4669d2f30244f4”。在 DesktopDashboard.LogoutWindow.System.Windows.Markup.IComponentConnector.Connect(Int32 connectionId, Object target) 在 MS.Internal.Xaml.Runtime.ClrObjectRuntime.SetConnectionId(Object root,
> 在 System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs) 在 MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler) 在 System.Windows .Threading.DispatcherOperation.InvokeImpl() 在 System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(Object state) 在 System.Threading.ExecutionContext.runTryCode(Object userData) 在 System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode 代码，CleanupCode backoutCode , 对象 userData) 在 System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state) 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext,System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) 在 System.Windows.Threading.DispatcherOperation.Invoke() 在 System.Windows.Threading.Dispatcher.ProcessQueue() 的 ContextCallback 回调，对象状态，布尔 ignoreSyncCtx) ) 在 System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& 处理) 在 MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& 处理) 在 MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o) 在 System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs) 在 MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method,对象参数，Int32 numArgs, Delegate catchHandler) 在 System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority 优先级, TimeSpan 超时, 委托方法, Object args, Int32 numArgs) 在 MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam) 在 MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg) 在 System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame) 在 System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)System.Windows.Threading.Dispatcher.PushFrameImpl（DispatcherFrame 框架）处的 DispatchMessage（MSG 和消息） System.Windows.Threading.Dispatcher.PushFrame（DispatcherFrame 框架）System.Windows.Threading.Dispatcher.PushFrameImpl（DispatcherFrame 框架）处的 DispatchMessage（MSG 和消息） System.Windows.Threading.Dispatcher.PushFrame（DispatcherFrame 框架）
> 在 System.Windows.Application.RunDispatcher(Object ignore) 在 System.Windows.Application.RunInternal(Window 窗口) 在 System.Windows.Application.Run(Window 窗口) 在 System.Windows.Application.Run() 在 DesktopDashboard.App .Main（字符串 [] 参数）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:38:54.917

您的代码不止一次加载同一个程序集。当您使用 Assembly.Load(byte[]) 时，这是一个问题，CLR 无法帮助您确定程序集是否已加载。技术术语是这样的程序集是在没有“加载上下文”的情况下加载的。接下来的问题是同一类型不再兼容，类型标识不仅包括命名空间名称和类型名称，还包括它来自的程序集。

您的工作是确保在请求相同的程序集时返回完全相同的程序集引用。最好的办法是`Dictionary<string, Assembly>`跟踪此类程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:05:02.337

假设您使用的是 Visual Studio，您可以直接从 IDE 将它们添加到项目中。[看这里](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.80%29.aspx)。

# ios - 带有两个标题/方法的按钮

> ID：12530084
> 
> 赞同：0
> 
> 时间：2012-09-21T11:54:28.577
> 
> 标签：ios, button, states, awakefromnib

每个人都知道应用商店中的按钮，上面写着“购买”，当您购买它时，它会变为“下载”。我想要一个带有“下载”和“删除”的类似按钮。但我无法弄清楚如何创建它。方法不是问题，但是如何配置按钮？

我认为它应该照顾数据，如果它存储按钮显示“删除”并在单击时调用删除方法，否则在按钮显示“下载”时调用下载方法。有人可以给我一个建议吗？

我需要“awakeformnib”吗？在初始化按钮之前应该对文件进行研究，并在用户使用按钮时进行动态更改。

希望有人可以帮助我:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:08:45.853

当我需要这样的东西时，我只需创建两个具有相同框架的不同按钮，一次只能看到其中一个。在他们的方法中，我不仅做代表那个按钮的事情，而且还隐藏/显示它们。
所以我认为你也可以这样做——首先检查数据，配置第一个按钮，然后隐藏/显示另一个按钮。
希望这可以帮助。

# macos - 如何在 Mac OS X 10.8.2 上设置 SVN？

> ID：12530085
> 
> 赞同：12
> 
> 时间：2012-09-21T11:54:30.753
> 
> 标签：macos, svn, installation

我找到了 Mac OS X 附带 SVN 的信息。但是我的系统上没有 SVN。我已经安装了`Subversion-1.6.17-1_10.7.x.pkg`，一切都很好。但是在更新到 Mac OS X 10.8.2 之后，所有的 SVN 文件都会自动从系统中删除。我已尝试`Subversion-1.6.17-1_10.7.x.pkg`再次安装 - 但下一步按钮已禁用。我试图找到一个更新版本 - 但现在没有 Mac OS 支持。

如何在 Mac OS X 10.8.2 上简单地设置 SVN？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-21T14:04:41.997

安装 Xcode 4.5 后，您需要按照[这些说明](https://stackoverflow.com/a/9329325/253056)安装命令行工具。成功完成后，您应该会看到 svn 已安装：

```
$ which svn
/usr/bin/svn
$ svn --version
svn, version 1.6.18 (r1303927)
   compiled Aug  4 2012, 19:46:53

Copyright (C) 2000-2009 CollabNet.
Subversion is open source software, see http://subversion.apache.org/
This product includes software developed by CollabNet (http://www.Collab.Net/).

The following repository access (RA) modules are available:

* ra_neon : Module for accessing a repository via WebDAV protocol using Neon.
  - handles 'http' scheme
  - handles 'https' scheme
* ra_svn : Module for accessing a repository using the svn network protocol.
  - handles 'svn' scheme
* ra_local : Module for accessing a repository on local disk.
  - handles 'file' scheme

$ 
```

# ios5 - ARC 和手动引用计数

> ID：12530087
> 
> 赞同：0
> 
> 时间：2012-09-21T11:54:39.303
> 
> 标签：ios5

对不起这个愚蠢的问题。

我有一个类文件 MyClass.h 和 MyClass.m。

我可以为 MyClass.h 和手动参考计数 MyClass.m 设置 ARC。

我看过一个示例库创建代码。因为他们维护了我上面提到的文件。

但我什至无法运行示例源。

这样做是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:32:22.953

您能否发布您正在使用的示例库代码的链接？或提供您正在使用的示例代码。根据[这个](https://stackoverflow.com/a/6449609/1350513)答案，一个类必须是完全 ARC 或非 ARC，因此您不能将类的标头设置为使用 ARC，而将实现文件设置为手动引用计数，这在您使用必须的属性时是有意义的定义为 MRC 的保留/分配/复制或 ARC 中的强/弱。

如果您想在项目中使用完整的 ARC 和 MRC 类，最好的方法可能是使用 ARC 创建整个项目，然后设置

> -fno-objc-弧

不使用 ARC 的文件的编译器标志。查看此[答案](https://stackoverflow.com/a/6658549/1350513)以获取有关设置编译器标志的信息。

# .net - 无法从 IIS 7.5 中托管的 Web 应用程序连接到 WCF 服务

> ID：12530091
> 
> 赞同：1
> 
> 时间：2012-09-21T11:54:44.967
> 
> 标签：.net, wcf, iis, ssl

我有以下问题。我有一台运行 WCF 服务的机器。该服务配置如下：

```
<system.web>
  <authentication mode="Windows" />
</system.web>
<system.serviceModel>
  <client />
  <services>
    <service name="AnchorWcfService.AnchorService" behaviorConfiguration="serviceBehavior">
      <endpoint address="AnchorService" contract="AnchorWcfService.IAnchorService" binding="wsHttpBinding" bindingConfiguration="TransportSecurity" />
      <endpoint address="mex" contract="IMetadataExchange" binding="mexHttpsBinding" />
    </service>
  </services>
  <bindings>
    <wsHttpBinding>
      <binding name="TransportSecurity" maxReceivedMessageSize="5000000">
        <readerQuotas maxStringContentLength="5000000" maxDepth="128" maxArrayLength="5000000" />
        <security mode="Transport">
          <transport clientCredentialType="Windows" />
        </security>
      </binding>
    </wsHttpBinding>
  </bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="serviceBehavior">
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceMetadata httpsGetEnabled="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

该服务设置为使用 HTTPS，并且我已经使用`netsh`命令行工具添加了必要的测试证书。我通过以下方式创建了证书：

首先我在我的机器上运行这个命令来创建根证书

```
makecert -n "CN=RootCATest" -r -sv RootCATest.pvk RootCATest.cer 
```

然后我将 cer 文件复制到托管 wcf 服务的机器和 Web 服务器，并使用 mmc 将其导入。

然后在托管 wcf 服务的机器上，我运行了附加命令；

```
makecert -sk MyWcfService -iv RootCATest.pvk -n "CN=1.2.3.4" -ic RootCATest.cer -sr localmachine -ss my -sky exchange -pe 
```

其中 1.2.3.4 是托管 wcf 服务的机器的 IP。

然后我创建了这样的 SSL 证书：

```
netsh http add sslcert ipport=0.0.0.0:8080 certhash=<Thumbprint from the sertificate created in the last step> appid={00112233-4455-6677-8899-AABBCCDDEEFF} 
```

从 Web 服务器机器上，我已经使用`wcftestclient`我创建的另一个 .NET 控制台应用程序成功连接到该服务。

问题是当我尝试从 Web 应用程序连接时。我在控制台应用程序和 Web 应用程序中使用完全相同的代码来使用 WCF 服务：

```
IAnchorService channel = null;
var binding = new WSHttpBinding(SecurityMode.Transport);
var channel = ChannelFactory<IAnchorService>.CreateChannel(binding, endpoint.Address);
var anchor = channel.GetAnchorDetails(); 
```

在控制台应用程序上，最后一行成功地从 wcf 服务检索锚详细信息，但在 Web 应用程序上，我得到以下异常：

`System.ServiceModel.Security.MessageSecurityException: The HTTP request was forbidden with client authentication scheme 'Negotiate'. ---> System.Net.WebException: The remote server returned an error: (403) Forbidden.`

我还测试了删除 Security.Transport 并在客户端和服务器上设置 Security.None （因此使用普通 HTTP 而不是 HTTPS），然后一切正常。

此外，如果我将服务与 Web 服务器放在同一台机器上，但仍然使用 HTTPS，它也可以工作。

所以只有当 web 服务器和 wcf 服务在不同的机器上运行并且启用了 SSL 时它才会失败。

我已经尝试了我现在能想到的一切。我必须做些什么才能让它在我的 Web 应用程序上运行？

# c# - 访问引用的 xaml 文件中的对象

> ID：12530095
> 
> 赞同：0
> 
> 时间：2012-09-21T11:55:00.153
> 
> 标签：c#, wpf, xaml, preferences

我有一个项目（c#，wpf），我正在引用一个包含另一个 xaml 文件（当然是其他命名空间）的 Lib。然后我正在创建一个在 Lib 中定义的类的对象：

```
DialogStandard newWindow = new DialogStandard();
newWindow.Title = "my title";
newWindow.mainLabel.Content = "my label"; 
```

DialogStandard 是 window 类型（当然是在 xaml 中定义的对象）

```
public partial class DialogStandard : Window 
```

我能够访问 Title (newWindow.Title = "my title")，因为 Title 是类 Window 的一个属性。但我无法访问 mainLabel，因为它是在 DialogStandard 的 xaml 文件中定义的：

```
<Label Margin="5,5,0,10" Name="mainLabel" VerticalAlignment="Center"/> 
```

如何使在 DialogStandard 的 xaml 文件中定义的对象对我引用定义 DialogStandard 的 Lib 的项目可访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:13:40.667

[在FrameworkElement.FindName](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findname.aspx)方法的帮助下获取您的最简单`Label`的方法：`Name`

```
DialogStandard newWindow = new DialogStandard();
newWindow.Title = "my title";
Label mainLabel = (Label)newWindow.FindName("mainLabel");
mainLabel.Content = "my label"; 
```

# solr - 在 Solr 中存储坐标的正确方法

> ID：12530100
> 
> 赞同：5
> 
> 时间：2012-09-21T11:55:41.087
> 
> 标签：solr, lucene

我花钱请了第三方编码人员为 Solr 开发模式，但现在我对自己有了更多的了解，我有一个问题。

目的是进行空间搜索，所以在我的模式中我有这个：

```
<field name="latlng" type="location" indexed="true" stored="false" />
<field name="latlng_0_coordinate" type="double" indexed="true" stored="false" />
<field name="latlng_1_coordinate" type="double" indexed="true" stored="false" /> 
```

我的网站通过 JSON 提交到 lat_lng_0_coordinate 和 latlng_1_coordinate*但没有提交到 latlng*。

此外，在我的 schema.xml 中没有其他提及“latlng”，所以据我所见，它不像那里有一个 combine 或 join 函数。

所以，我的问题是，latlng 是有目的的还是编码人员把它弄错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T12:27:38.330

latlng 字段类型定义为位置。位置字段的定义如下。

```
<fieldType name="location" class="solr.LatLonType" subFieldSuffix="_coordinate"/> 
```

它需要创建带有`_coordinate`后缀的动态字段。

在您的示例中，`latlng_0_coordinate`应用于纬度字段和`latlng_1_coordinate`经度字段。

然后通过使用空间查询，您可以使用 latlng 字段。

例如，为了找到给定点 5 公里内最近的位置，您可以使用以下查询。41.431、28.431 只是我写的随机位置。

```
{!geofilt sfield=latlng}&pt=41.431,28.431&d=5 
```

结果，这不是一个错误，它是有目的的。

另请参阅 Solr 文档：[https ://wiki.apache.org/solr/SpatialSearch#QuickStart](https://wiki.apache.org/solr/SpatialSearch#QuickStart)

# c++ - sizeof(array) 在这个 strstr 重新实现中没有给出预期值

> ID：12530103
> 
> 赞同：1
> 
> 时间：2012-09-21T11:55:49.147
> 
> 标签：c++, arrays, pointers, sizeof

我有这个简单`strstr`的重新制作作为练习，但有一个我不明白的错误

```
#include <iostream>
#include "windows.h"

using namespace std;

int strstr2(char *arr, char *findme)
{
    const int sizearr = sizeof(arr) / sizeof(char);
    const int sizefindme = sizeof(findme) / sizeof(char);

    int j=0;
    for(int i=0; i<sizearr; i++)
    {
        if(arr[i] == findme[j])
        {
            // Match
            if(j == sizefindme-1)
                return i;
            else
                j++;
        }
        else
        {
            j = 0;
        }
    }
    return -1;
}

int main (int argc, char **argv) 
{
    char arr[] = "I'd like 2% milk";
    char toBeFound[] = "like";

    int pos = strstr2(arr, toBeFound);
    Sleep(3000);
} 
```

由于某种原因，这条线

```
const int sizefindme = sizeof(findme) / sizeof(char); 
```

返回`sizefindme = 8`，而字符串的长度`"like"`实际上是 4（或 5 与空终止符）。并且空终止符实际上存在于`toBeFound`数组中。有什么问题`sizeof`？我无法发现错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T11:58:20.127

`sizeof(arr)`是指针的大小，而不是数组的大小。

您可以将数组的长度传递给函数，或者`strlen`如果您总是传递一个以空值结尾的字符串，则使用。

注意：`sizeof(char)`总是一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T11:58:33.983

`findme`不是数组，它是`char *`，并且您在 64 位机器上，所以：

```
sizeof(findme) = 8
大小（字符）= 1

```

您将需要`strlen(findme)`改用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T11:58:21.097

`arr`和˛`findme`函数内部`strstr2`是指向 的指针`char`，而不是数组。`sizeof`正在返回该指针的大小，在您的平台上恰好是 8。与有些常见的误解相反，数组*不是*指针。您可以`strlen`改用或通过另一个参数将数组的大小传递给函数。

阅读[这个很棒的问题和答案](https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c)，了解有关数组的更多信息。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-21T11:58:33.717

在您的示例中，“findme”不是一个数组——它是一个指针。您可能在 64 位系统上，因此指针的大小为 8。

您不能将 sizeof() 用于各种“大小是多少”的问题。如果您想要 C 字符串的大小，请使用 strlen()。或者将长度作为附加参数传递，因为如果将 sizeof() 应用于实际数组，您将获得更好的结果:-)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-21T11:58:42.220

为什么不使用strlen？我相信 sizeof(findme) 可能会返回*指针*的大小，在 64 位机器上将是 8 个字节。

# c++ - 在 O(logn) 中 std::set begin() 和 std::set 迭代器之间的距离

> ID：12530106
> 
> 赞同：11
> 
> 时间：2012-09-21T11:55:59.677
> 
> 标签：c++, stl, iterator, set, std

我需要在 std::set 中找到一个元素的索引。该索引可以可视化为迭代器与开始的距离。一种方法可以是：

```
for(int i = 0, set<int>::iterator it = s.begin(); it != iteratorToBeFound; ++it, ++i); 
```

这显然需要 O(n) 时间。但是我们知道，通过 set 内部实现的二叉搜索树中到根的距离可以在 O(log n) 时间内找到。

他们有什么方法可以在 C++ 集中找到 O(log n) 时间的索引吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T12:02:37.587

您可以使用该函数[`std::set<>::find`](http://www.cplusplus.com/reference/stl/set/find/)搜索元素`x`并计算到集合的第一个迭代器的[距离。](http://www.cplusplus.com/reference/std/iterator/distance/)

```
std::distance(s.begin(), s.find(x)) 
```

然而，正如评论所指出的，距离的运行时间取决于所使用的迭代器的类型。在集合的情况下，这是一个双向迭代器，距离为 O(n)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T15:50:53.377

您可以使用排序`std::vector<int>`。如果已排序，则可以在`O(log n)`. 你可以在恒定时间内找到距离`O(1)`。

通过排序向量，我的意思是在每次插入之后（或在多次插入之后）你做`std::sort(v.begin(), v.end());`

如果您的内部类型`std::set<T>`不像`int`- 您可以同时保留 -`std::set<T>`和排序的迭代器向量`std::vector<std::set<T>::iterator>`。但让这些结构保持同步并非易事。也许你可以添加一些类似的位置`T`？或者保持`std::set<std::pair<T,int>, comp_first_of_pair<T>>`where`comp_first_of_pair`只是为了`set`排序`T`，第二个`int`是为了保持位置？

只是一些想法 - 有均匀的`O(1)`距离时间......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-09T08:20:16.270

您可以使用有序集合在 O(log(N)) 中找到集合中元素的索引：[https](https://www.geeksforgeeks.org/ordered-set-gnu-c-pbds/) ://www.geeksforgeeks.org/ordered-set-gnu-c-pbds/ 。这被实现为红黑树。我知道这个话题很老了，但它可能对未来的读者有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T12:12:45.003

您不能将 matematics 与双向迭代器一起使用。所以唯一可以接受的方法是自己计算（你插入集合中有多少**int**小于 X）。

但是，如果您已经将“数据收集”和“数据使用”阶段完全分开 - 可能值得将**std::set**替换为排序的**std::vector**。它更难维护，但有自己的好处，包括迭代器数学（因此您可以使用**std::binary_search**使用 O(log n) 进行搜索，使用 O(1) 进行距离）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T07:37:22.177

如果计算索引**确实是**您的瓶颈，那么我看到 2 个选项：

*   存储索引。无论是在节点本身还是在单独的`std::map`. 当然，这意味着您必须保持此缓存更新。
*   使用`std::vector`. 这并不像最初看起来那么糟糕。如果您始终对向量进行排序，则可以像使用`set`. 性能将类似于`set`。最大的缺点是：节点可能会被复制很多。（这可以通过使用指针`boost:shared_ptr`或`std::unique_ptr`[仅限 c++11] 来补偿）
    查找您使用的元素`std::lower_bound`。
    而不是 insert/push_back 你这样做：`insert( lower_bound(b,e,x), x )`

# asp.net-mvc-3 - 母版页控制asp.net MVC 3中的内容页面

> ID：12530115
> 
> 赞同：0
> 
> 时间：2012-09-21T11:56:24.157
> 
> 标签：asp.net-mvc-3

如何获得对内容页面的母版页控制。

就像我们使用的 asp.net 代码一样：

**`Master.FindControl("controlID").Visible = false;`**

现在我在我的 Asp.net MVC 应用程序中所做的工作相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:01:47.870

MVC 的工作方式与 Web 表单不同，因为您没有在内存中维护“控件”的所有开销，您不能只找到控件并将其设置为不可见。相反，在您的 MVC 3 布局中，您可以在调用上放置一个 if 语句，`@RenderBody()`让您控制是否呈现内容页面。除此之外，您可以向视图包添加一个值，然后您的内容页面可以有一个 if 语句来决定是否呈现内容的特定部分。随着 MVC 增加的简单性和性能提升，失去了一些便利......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:03:57.783

是的，你可以这么做。在此之前，只需在内容页面（您想要母版页控制的页面）上添加母版页的注册表。

# c# - 获取简短的日期名称

> ID：12530116
> 
> 赞同：24
> 
> 时间：2012-09-21T11:56:28.827
> 
> 标签：c#, datetime-format

我想知道如何编写一个方法来返回一个包含短日期名称的字符串，例如：

```
public static string GetShortDayName(DayOfWeek day) 
```

现在如果我打电话：

```
string monday = GetShortDayName(DayOfWeek.Monday); 
```

如果文化是 en，我将返回“mo”，如果文化是示例，我将返回“lu”。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-21T12:00:31.817

您可以使用[`DateTimeFormatInfo.AbbreviatedDayNames`](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.abbreviateddaynames.aspx). 例如：

```
string[] names = culture.DateTimeFormat.AbbreviatedDayNames;
string monday = names[(int) DayOfWeek.Monday]; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-07-10T11:26:16.893

您可以在[自定义格式字符串](https://docs.microsoft.com/en-us/dotnet/standard/base-types/custom-date-and-time-format-strings)中使用“ddd”来获取短日期名称。例如。

```
DateTime.Now.ToString("ddd"); 
```

正如@Loudenvier 在评论中所建议的那样。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-21T12:00:51.903

您可以获得的最接近的是使用[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)- 特别是`ddd`。

这将返回一个缩写 - 您可以将结果子串化为 2 个字符。

您将需要使用`DateTime`与您希望的星期几相对应的日期。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-10-20T13:06:01.557

```
DateTimeFormatInfo.ShortestDayNames 
```

获取或设置与当前 DateTimeFormatInfo 对象关联的最短唯一缩写日期名称的字符串数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T12:01:51.140

尝试：

```
CultureInfo english = new CultureInfo("en-US");
string sunday = (english.DateTimeFormat.DayNames[(int)DayOfWeek.Sunday]).Substring(0, 2); 
```

或者：

```
dateTimeFormats = new CultureInfo("en-US").DateTimeFormat;
string sunday = (dateValue.ToString("dddd", dateTimeFormats)).Substring(0, 2); 
```

# php - Titanium 通过 Tether 访问文件

> ID：12530117
> 
> 赞同：0
> 
> 时间：2012-09-21T11:56:30.033
> 
> 标签：php, titanium, wamp, httprequest

我有一个应用程序需要访问本地 WAMP 服务器才能由 PHP 脚本提供服务，但前提是插入 USB 电缆。该应用程序需要完全脱机运行。我已经使用 USB 隧道等进行了研究，但到目前为止还没有干净简单的解决方案。也许我在寻找解决方案的范围太广了？

这个项目的最终结果是我需要将一个数据库从 WAMP 服务器复制到设备数据库。我计划通过 PHP 脚本为它提供一个 JSON 可解析的字符串。

我正在尝试使用 XHR 实现这一目标：

```
var url = "http://10.0.2.2:8080/home/yey.php";
    var xhr = Ti.Network.createHTTPClient({
        onload: function(e){
            alert(this.responseText);
        },
        onerror: function(e){
            alert(e.error);
        },
        timeout: 5000
    });

xhr.open("GET", url);
xhr.send(); 
```

我尝试过的其他IP地址是：

```
192.168.0.1
127.0.0.1
10.0.2.2
// My PC's IP

// and ports
8888
80
8080 
```

我目前正在使用 easyPHP 进行开发，但最终产品将在专用服务器上运行。

Titanium 还有其他方法可以访问本地托管的 php 脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:59:41.910

只有在使用模拟器时才能访问指定 IP 地址的文件。不在设备上。

如果要使用该设备，则需要指定计算机的实际 IP 地址。*我猜你知道如何在本地找到你的IP地址吗？*

如果你的路由器是`192.168.0.1`，那么通常你的机器会有别的东西而不是`1`

*   `10.0.2.2`是父机器（因此，在模拟器中，运行模拟器的计算机）
*   `192.168.0.1`很可能是你的路由器
*   `127.0.0.1`是设备本身

这将在本地工作，但不适用于 USB。为什么你还需要那个？

要使用的端口完全取决于计算机上 apache 的设置。

# model-view-controller - 动作视图不采取布局zend框架

> ID：12530122
> 
> 赞同：0
> 
> 时间：2012-09-21T11:57:01.363
> 
> 标签：model-view-controller, zend-framework, layout, action

我有联系我们的控制器，它有一个提交发送操作的表单，所以在提交链接后，contactus/send/

您可以在 contactus 索引视图中看到完整的布局设计，但是当我调用该操作时，他似乎看不到布局，并且仅表示为没有 css 或 javascript 的文本。

# mysql - 通过 django 将时间插入 mysql 数据库时，它存储不同的时间

> ID：12530124
> 
> 赞同：0
> 
> 时间：2012-09-21T11:57:16.237
> 
> 标签：mysql, django, django-models, timezone

通过 django 项目将时间插入 mysql 数据库时，它存储为标准格林威治时间，而不是我的标准时间 GMT+5.30。例如，当我通过 django 给下午 5.30 时，它存储为 12.00 AM。如何解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:18:25.880

如果您使用的是 Django 1.4+，`USE_TZ=True`则日期时间在传递给 MySQL 时会转换为 UTC。当它们被取回时，Django 将这些日期时间转换为正在使用的时区。

如果您想存储当地时间（[通常不是一个好主意](http://pytz.sourceforge.net/#problems-with-localtime)），您可以关闭时区管理：`USE_TZ=False`.

如果要将 TZ 信息存储在 DB 上，则必须切换到 PostgreSQL。

Django 和时区文档： [https ://docs.djangoproject.com/en/dev/topics/i18n/timezones/](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:05:49.110

您是否在 settings.py 文件中更改了 TimeZone？

# css - 是否有一个 CSS 选择器来选择给定元素的所有第一个后代？

> ID：12530125
> 
> 赞同：1
> 
> 时间：2012-09-21T11:57:16.603
> 
> 标签：css

```
<article>
 <header targetme!>
  <h1 don't target me></h1>
 </header>
 <p targetme! ></p>
 <p targetme! ></p>
 <div targetme!>
  <p don't target me></p>
 </div>
</article> 
```

是否有一个 CSS 选择器（IE7 及更高版本）可以用来仅选择给定元素（在本例中为文章）的第一个后代？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T11:59:00.720

您可以使用[子组合](http://www.w3.org/TR/css3-selectors/#child-combinators)器, `>`，它只会选择直接子元素，以及[通用选择器](http://www.w3.org/TR/css3-selectors/#universal-selector),`*`来匹配所有元素：

```
article > * {
    /* Your styles */
} 
```

请注意，虽然 IE7 确实支持子组合器，但 IE6 不支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:58:50.100

使用`>`选择选择器的第一个后代/子元素

```
.selector > .childelementonlyselector 
```

这适用于 id 选择器`#id`、标签选择器`div`和类选择器，如上例所示`.class`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:59:09.143

您可以执行以下操作来选择所有直系后代：

```
article > * 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-21T12:00:14.737

您可以使用`$('article').children();`

那应该做你想做的事，请参阅[**.children()**](http://api.jquery.com/children/) api 参考。

# mysql - 从mysql获取许多分组值

> ID：12530127
> 
> 赞同：8
> 
> 时间：2012-09-21T11:57:34.857
> 
> 标签：mysql, performance, group-by

我有一个这样的表结构：

```
CREATE TABLE `test` (
  `a` tinyint(3) unsigned DEFAULT 0,
  `b` tinyint(3) unsigned DEFAULT 0,
   `c` tinyint(3) unsigned DEFAULT 0,
  `d` tinyint(3) unsigned DEFAULT 0,
  `e` tinyint(3) unsigned DEFAULT 0
  ); 
```

这有大约 30 列，其中一些列的值从 0-200 (a,b) 和一些只有 5 个值 (0,1,2,3,4)（列 cd）。大约有。表中有 120k 行。

为了显示每行的项目数，我对每一列使用查询：

```
select a, count(*) FROM test group by a;
select b, count(*) FROM test group by b;
select c, count(*) FROM test group by c;
select d, count(*) FROM test group by d;
select e, count(*) FROM test group by e; 
```

这样做的问题是它将触发 30 个查询（每列一个），并且每次基本上都会遍历同一组数据。

有一个更好的方法吗？

我已经尝试过使用 GROUP BY WITH ROLLUP 但这会导致结果集比每个单独的查询处理得慢。

您可以查看 SQLfiddle 上的数据选择：[http ://sqlfiddle.com/#!2/a9fd8/1](http://sqlfiddle.com/#!2/a9fd8/1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:08:20.697

```
select 'a' as `column`, a as data, count(*) 
FROM test 
group by 'a', a
union
select 'b', b, count(*) 
FROM test 
group by 'b', b
union
select 'c', c, count(*) 
FROM test 
group by 'c', c
union
select 'd', d, count(*) 
FROM test 
group by 'd', d
union
select 'e', e, count(*) 
FROM test 
group by 'e', e 
```

不知道它是否更好，但至少规划者将有机会对其进行优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:44:35.430

也许这样的事情会更快。

```
select qq, q, count(*) from
(
select 'a' qq, a q FROM test
union all select 'b' qq, b q FROM test
union all select 'c' qq, c q FROM test
union all select 'd' qq, d q FROM test
union all select 'e' qq, e q FROM test
) t
group by qq, q; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T11:31:34.933

**编辑**：这个答案完全偏离了轨道

尝试以下操作；这是一个更简洁的查询，只需通过一次，但由于 DISTINCT，我不确定它的性能如何：

```
SELECT 
  COUNT(DISTINCT a) AS a,
  COUNT(DISTINCT b) AS b,
  COUNT(DISTINCT c) AS c,
  COUNT(DISTINCT d) AS d,
FROM
  t
; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T06:29:47.423

根据这里的生态，建立一个聚合数据表可能更有效，然后在修改该表时保持最新。您的聚合数据表将为每个（当前）值包含一行，然后是 30 个额外的计数列。然后，您可以在更新计数的原件上放置触发器。当然，这会减慢原始表上的写入操作，尽管添加 30 个索引也会如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T12:34:52.957

没有什么原创的，但你可以试试这个。

```
SELECT t.col, t.val, t.c FROM
(
    SELECT 'a' col, a val, count(*) c FROM test GROUP BY a
    UNION ALL
    SELECT 'b' col, b val, count(*) c FROM test GROUP BY b
    UNION ALL
    SELECT 'c' col, c val, count(*) c FROM test GROUP BY c
    UNION ALL
    SELECT 'd' col, d val, count(*) c FROM test GROUP BY d
    UNION ALL
    SELECT 'e' col, e val, count(*) c FROM test GROUP BY e
) t 
```

但是，如果这里的性能有问题，我想建议@edze 建议的同样的事情 - 列索引（是的，所有 30）。它会占用空间，但会提高性能。甚至创建视图表

```
CREATE TABLE `test_view` (
   `col` char(1), 
   `value` tinyint(3), 
   `count` int
); 
```

对于此任务，如果经常执行，则只需执行简单的选择即可。

# log4net - 用于 WebEmail 的 Log4Net SmtpAppender - 不发送

> ID：12530128
> 
> 赞同：8
> 
> 时间：2012-09-21T11:57:37.650
> 
> 标签：log4net, smtpappender

我正在尝试让 Log4Net 与网络电子邮件（Yahoo 或 Gmail）一起使用。如果你有这个工作，我会很感激一些帮助，并提前感谢。

我有一个默认的根记录器，带有一个 RollingFileAppender 和一个 SmtpAppender。文件附加程序工作正常。SmtpAppender 什么也没给我。

我从诊断按钮单击调用记录器...

```
protected void btnReloadContractConfig_Click(object sender, EventArgs e)
{
    // DIAGNOSTIC - Test email logger
    log4net.ILog logger = log4net.LogManager.GetLogger("root");
    logger.Error("btnReloadContractConfig_Click() - This is a TEST of delivery of error messages via email, triggered from the Admin.aspx.cs code file.");
} 
```

...并且 RollingFileAppender 正在收到消息...

LOC=20120921-12:03:16.319,UTC=20120921-11:03:16.319,DELTA=10078,THR=6,ERROR,LOG=root,[(null)] - btnReloadContractConfig_Click() - 这是一个交付测试通过电子邮件触发的错误消息，由 Admin.aspx.cs 代码文件触发。

Log4Net 的 web.config 条目在这里::

```
 <appSettings>
    <add key="log4net.Internal.Debug" value="true"/>        
  <appSettings>

  <log4net 
    xsi:noNamespaceSchemaLocation="http://csharptest.net/downloads/schema/log4net.xsd" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <root>
      <level value="DEBUG" />
      <appender-ref ref="LogFileAppender" />
      <appender-ref ref="SmtpAppender" />
    </root>

    <appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="MiniMkt01Log.txt"/>
      <!-- <file value="${TMP}\log-file.txt" /> -->
      <appendToFile value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="10MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout" >
    <header value="[Header]&#13;&#10;" />
    <conversionPattern value="LOC=%date{yyyyMMdd-HH:mm:ss.fff},UTC=%utcdate{yyyyMMdd-HH:mm:ss.fff},DELTA=%timestamp,THR=%thread,%-5level,LOG=%logger,[%property{NDC}] - %message%newline" />
      </layout>  
    </appender>

    <appender name="SmtpAppender" type="log4net.Appender.SmtpAppender">
      <to value="FacelessDevTeam@yahoo.com" />
      <from value="hiblet@yahoo.com" />
      <subject value="Logging Message" />
      <smtpHost value="smtp.yahoo.com" />
      <port value="25"/>
      <authentication value="Basic" />
      <username value="FacelessDevTeam@yahoo.com"/>
      <password value="?????[real password hidden for obvious reasons]"/>
      <!-- <EnableSsl value="true" /> -->
      <bufferSize value="10" />
      <lossy value="true" />
      <evaluator type="log4net.Core.LevelEvaluator">
    <threshold value="WARN"/>
      </evaluator>
      <layout type="log4net.Layout.PatternLayout">
    <header value="[Header]&#13;&#10;" />
    <!-- Previously... <conversionPattern value="%newline%date,%utcdate,%timestamp,[%thread],%-5level,%logger,[%property{NDC}] - %message%newline%newline%newline" /> -->
    <conversionPattern value="%newlineLOC=%date{yyyyMMdd-HH:mm:ss.fff},UTC=%utcdate{yyyyMMdd-HH:mm:ss.fff},DELTA=%timestamp,THR=%thread,%-5level,LOG=%logger,[%property{NDC}] - %message%newline%newline%newline" />
      </layout>
    </appender>

  </log4net> 
```

web.config 正在 Global.asax 文件中的 Application_Start() 处理程序中获取...

```
void Application_Start(object sender, EventArgs e) 
{
    // Start Log4Net, signal app has started
    log4net.Config.XmlConfigurator.Configure();
    log4net.ILog logger = log4net.LogManager.GetLogger("root");
    logger.Info("Application_Start()");
} 
```

触发电子邮件尝试的管理网页似乎要么无限期挂起，要么暂时挂起（半秒）并继续。
开发环境不会因异常而崩溃，它要么挂起要么滑行而不会出错。

*   如何从 SmtpAppender 获得额外的诊断信息？
*   我可以独立测试端口/配置以检查传出编程电子邮件上的本地块吗？
*   是否保证发送 log4net 电子邮件？有损和缓冲区大小属性似乎非常敏感，如果我设置有损=假，我会无限期挂起......

作为参考，我正在使用 VS 2010、ASP.Net4 和大量咖啡因。再次感谢任何即将到来的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T13:53:58.957

好的，想通了，现在正在接收电子邮件。我在互联网上找不到很多解决方案，所以这就是我必须做的。

我首先设置了一个小型控制台电子邮件程序，以验证我可以从我的机器发送基本的电子邮件。这需要您在 web.config（或本例中的 app.config）中添加一个配置 SMTP 客户端的部分。

当我开始工作时，我可以从独立应用程序发送电子邮件，我将所需的部分复制到我的主项目的 web.config 文件中，并且，hot-diggity-dog，它工作了。在这里，出于对我同胞的纯粹爱，是与 Gmail 一起为我工作的 system.net 部分......

```
<configuration>

[... your config stuff]

  <system.net>
    <mailSettings>
      <smtp deliveryMethod="Network" from="chunkyLover69@gmail.com">
        <network
          host="smtp.gmail.com"
          enableSsl="true"
          port="587"
          userName="chunkyLover69@gmail.com"
          password="yesThisIsMyRealPasswordIAmAnIdiot"
          defaultCredentials="false"/>
      </smtp>
    </mailSettings>
  </system.net>

[... some more of your config stuff]

</configuration> 
```

所以这是关键，我的 .config 文件中没有 system.net 部分，因此史诗般的失败。希望这对将来的其他人有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T07:36:43.147

对于 gmail，您必须将 EnableSsl 设置为 true。您需要 log4net 版本 1.2.11.0 才能执行此操作。此外，出于测试目的，您可以将 bufferSize 设置为 1，即将写入每个日志。

同样出于测试目的，您可以尝试以编程方式配置 log4net，例如：

```
public class TestingLog4Net
{
    public void TestSmtpAppender()
    {
        ConfigureLog4NetSmtp();
        var logger = GetLogger();

        logger.Fatal(new Exception("Testing"));
    }

    private static ILog GetLogger()
    {
        var logger = LogManager.GetLogger(typeof (TestSmtpAppender));
        return logger;
    }

    private static void ConfigureLog4NetSmtp()
    {
        var smtp = GetSmtpAppender();
        BasicConfigurator.Configure(smtp);
    }

    private static SmtpAppender GetSmtpAppender()
    {
        var smtp = new SmtpAppender
                       {
                           Name = "GMail",
                           Username = "your_user_name",
                           Password = "your_password",
                           SmtpHost = "smtp.gmail.com",
                           From = "your_sender@gmail.com",
                           To = "some_target@mail.com",
                           EnableSsl = true,
                           Port = 587,
                           Authentication = SmtpAppender.SmtpAuthentication.Basic,
                           Subject = "Testing log4net SmtpAppender",
                           BufferSize = 1,
                           Lossy = true,
                           Evaluator = new LevelEvaluator(Level.Fatal),
                           Layout =
                               new PatternLayout(
                               "%newline%date [%thread] %-5level %logger [%property{NDC}] - %message%newline%newline%newline")
                       };
        return smtp;
    }
} 
```

下载 LinqPad 最新的 beta 版本。选择 C# 程序作为 LinqPad 查询并将上面的代码复制到查询中。使用您的 gmail 帐户并设置一些目标电子邮件地址。这应该有效。

# scala - 在理解 Scala 代码片段方面需要帮助

> ID：12530132
> 
> 赞同：0
> 
> 时间：2012-09-21T11:57:50.673
> 
> 标签：scala

> **可能重复：**
> [任何人都可以解释如何在 Scala 中使用符号“=>”](https://stackoverflow.com/questions/12529582/can-anyone-explain-how-the-symbol-is-used-in-scala)

```
val list = List("abc", "cde", "fg")
list.count (s => s.length == 3) 
```

上面的代码片段返回`list`长度等于的字符串元素的数量`3`。但是我无法理解该片段，因为我无法掌握`=>`在这种情况下操作符的用法。任何解释都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:08:34.637

是的，Scala 可能很难理解。我会尽力解释它，尽管我也可能不会正确。

该`List.count`方法将返回布尔值的代码作为参数 a `block`。

块只是一小段代码，可以通过多种方式创建，例如将代码包含在`{ }`

在 scala 文档中，这被描述为

```
def count (p : (A) => Boolean) : Int 
```

所以`count`接受一个参数，该参数`p`是一个块，它接受一个类型的参数`A`并返回一个`Boolean`

所以在这个例子中：

```
s => s.length == 3 
```

是一段`block`代码。块通常遵循格式

```
[arguments] => [Code to execute] 
```

所以在这种情况下`s`是块的输入，`s.length == 3`是应该返回布尔值的代码。您可以随意命名参数，只要它们的顺序正确。

当使用迭代集合的方法时，例如`count`, `map`,`each`等，传递的参数将是它正在迭代的集合中的当前项。

如果您想了解更多相关信息，您应该查看我的 Martin Odersky（scala 的创建者）正在运行的 Coursera 课程，并将详细介绍此类细节：[https ://www.coursera.org/course /progfun](https://www.coursera.org/course/progfun)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:04:03.393

这只是定义了一个方法，你也可以这样看：

```
def isValid(s:String) = s.length ==3
list.count(isValid) 
```

所以，当你使用 count 函数时，你给它一个条件，它是一个函数作为参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:10:59.680

（我没有看到您发布了另一个（重新措辞的）问题。这是我对您的第一个问题的回答）

不仅仅是传递值/名称，`=>`还用于定义函数文字，这是用于定义函数的替代语法。

示例时间。假设您有一个接收另一个函数的函数。集合中充满了它们，但我们会挑选`filter`。`filter`，当用于集合（如列表）时，将取出导致您提供的函数返回 false 的任何元素。

```
val people = List("Bill Nye", "Mister Rogers", "Mohandas Karamchand Gandhi", "Jesus", "Superman", "The newspaper guy")
// Let's only grab people who have short names (less than 10 characters)
val shortNamedPeople = people.filter(<a function>) 
```

我们*可以*从其他地方传入一个实际的函数（`def isShortName(name: String): Boolean`也许是 ），但将它放在那里会更好。唉，我们可以使用函数文字。

```
val shortNamedPeople = people.filter( name => name.length < 10 ) 
```

我们在这里所做的是创建一个函数，该函数接受一个字符串（因为`people`它是 type `List[String]`），并返回一个布尔值。很酷，对吧？

此语法在许多情况下使用。假设*您*要编写一个接收另一个函数的函数。这个其他函数应该接受一个字符串，并返回另一个字符串。

```
def myFunction(f: String => Int): Int = {
  val myString = "Hello!"
  f(myString)
}
// And let's use it. First way:
def anotherFunction(a: String): Int = {
  a.length
}
myFunction(anotherFunction)
// Second way:
myFunction((a: String) => a.length) 
```

这就是函数字面量。回到`by-name`and `by-value`，有一个技巧，你可以强制一个参数不被评估，直到你想要。经典例子：

```
def logger(message: String) = {
  if(loggingActivated) println(message)
} 
```

这看起来没问题，但`message`实际上`logger`是在调用时评估的。如果`message`需要一段时间来评估怎么办？例如，`logger(veryLongProcess())`, where`veryLongProcess()`返回一个字符串。哎呀？并不真地。我们可以利用我们对函数文字的了解来强制`veryLongProcess()`在实际需要之前不要调用它。

```
def logger(message: => String) = {
  if(loggingActivated) println(message)
}
logger(veryLongProcess()) // Fixed! 
```

`logger`现在正在接受一个不带参数的*函数*（因此`=>`左侧是裸露的）。您仍然可以像以前一样使用它，但现在，仅在使用它`message`时才评估（在 中`println`）。

# ms-access - 在表单模块中创建的 VBA 引用对象

> ID：12530136
> 
> 赞同：1
> 
> 时间：2012-09-21T11:58:05.870
> 
> 标签：ms-access, vba

我创建了自己的班级，称为组织。在用户输入组织详细信息的弹出表单中，组织类的实例被实例化。

例如

```
Public myOrg as COrganisation
Set myOrg = New COrganisation 
```

然后设置对象的属性。

例如

```
myOrg.name = "General Corp"
myOrg.address1 = "1 Enterprise Ave" 
```

然后该弹出表单将关闭。从主窗体（用户选择特定选项时弹出窗体的来源）然后我想访问组织类的属性。所以我尝试了

```
myOrg.name 
```

但收到错误“需要对象”。即使我将其声明为公共，我也不能在此处访问该对象吗？

提前致谢

# asp.net - 带有 IE8 问题的 ASP gridview 中的按钮

> ID：12530140
> 
> 赞同：0
> 
> 时间：2012-09-21T11:58:14.870
> 
> 标签：asp.net, html, css, internet-explorer, web

我在使用 Internet Explorer 8 渲染 ASP.NET 网格视图时遇到问题。它在其他浏览器中运行良好，但 IE 给我带来了问题。

当用户单击编辑按钮时，它将显示一个保存/取消按钮，但它们似乎没有放在 IE 中的同一行上。在其他浏览器中，它将减小单元格的大小并适当地平铺按钮。

在 IE8 中看起来像这样： ![IE](../Images/ff5811c49cece737365ac16532652fc1.png)

这是它的外观（来自 Opera）： ![恰当的](../Images/d1ba3b7142020002db73d80560fb985a.png)

生成 gridview 的代码可以在[这个 pastebin](http://pastebin.com/7w7Anifj)中找到。

可以在[这个 pastebin中找到 gridview 样式的 css](http://pastebin.com/NKXXXGx2)

我也执行了一个 css 重置[，](http://pastebin.com/0WaEKcsV)所以我不太确定为什么我会遇到这个问题，因为它应该处理默认值，我还使用 XHTML 1.0 Strict 文档类型，它应该强制 IE 进入稍微更标准化模式。

感谢您的指点或帮助，感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:11:02.423

Internet Explorer 8 似乎有很多已知的宽度计算错误：

[http://snook.ca/archives/html_and_css/ie8-bug-max-width-overflow](http://snook.ca/archives/html_and_css/ie8-bug-max-width-overflow)

[http://edskes.net/ie/ie8overflowandexpandingboxbugs.htm](http://edskes.net/ie/ie8overflowandexpandingboxbugs.htm)

[Internet Explorer 8 忽略了“显示：表格单元”元素的宽度](https://stackoverflow.com/questions/4608278/internet-explorer-8-ignores-width-for-display-table-cell-element)

您可能需要手动强制表格单元格的宽度，或者将单元格的内容包装在具有强制宽度的 div 中。

# wpf - 文本未按预期显示在文本块中

> ID：12530142
> 
> 赞同：0
> 
> 时间：2012-09-21T11:58:19.130
> 
> 标签：wpf

我有一个带有一个窗口的 WPF 应用程序。这个窗口有一个图像和一个文本块。应用程序接受一个命令行参数，该参数是要挂载的 ISO 的名称。然后，如果需要，它会更改屏幕分辨率，在虚拟 cd 上加载应用程序并等待该进程终止。卸载 ISO 后，屏幕恢复到原始状态。当所有这些都在进行时，会向用户显示一条消息，告诉他们他们在过程中的位置。

我正在使用文本块向用户显示进度文本，整个过程从以下事件开始。

```
private void Window_ContentRendered(object sender, EventArgs e)
{

    txtMessage.Text = ConfigurationManager.AppSettings.Get("MountISO");
    //Call routine to mount ISO

    txtMessage.Text = ConfigurationManager.AppSettings.Get("SettingResolution");
    // call routine to set resolution

    .
    .
    .
    .etc

} 
```

但是，窗口按预期加载，但文本块中不显示任何文本。

我确实有`Window_Loaded`事件中的代码，但窗口保持最小化，直到处理完成。

我显然是以错误的方式解决这个问题，但找不到任何东西可以告诉我我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:05:59.247

异步编程可能是您想要在这里做的事情。在StackOverflow 中搜索类似`Task`C# 的内容，或阅读有关[Task 类](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)的 Microsoft 文档。

该`ContentRendered`活动不是放置此类东西的地方。通常它会`Window_Loaded`像你一开始所做的那样，但是应用程序当然会被你正在执行的持久操作所阻止。

# android - Jquery Mobile + Phonegap Android - 底部自定义按钮

> ID：12530154
> 
> 赞同：2
> 
> 时间：2012-09-21T11:58:34.713
> 
> 标签：android, layout, cordova, jquery-mobile

我正在 jquery mobile 和 phonegap 中开发我的第一个应用程序。用于使用 `listview`RSS 提要填充我的页面。现在我想添加位于屏幕底部的自定义按钮。

我试图把它们放在我的`footer`，但那行不通。由于用户必须向下滚动所有列表才能转到页面底部。我希望这些按钮始终在屏幕底部对用户可见，而不是网页。我知道我可以使用相对布局在 Android 中轻松做到这一点。

我如何在这里实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:01:05.267

尝试这个 ：

```
 <div data-role="footer" data-position="fixed">
   <div data-role="navbar" data-iconpos="bottom">
        <ul>
            <li><a href="#button1" data-icon="grid">Button 1</a></li>
            ...
        </ul>
    </div><!-- /navbar -->
   </div><!-- /footer --> 
```

# spring - JAX-RS：使用 XSD、JAXB 进行请求验证

> ID：12530155
> 
> 赞同：3
> 
> 时间：2012-09-21T11:58:39.207
> 
> 标签：spring, xsd, jaxb, jax-rs, resteasy

**技术栈**：Java 1.6、JAXB、Spring 3、JAX-RS (RESTEasy)

我已经编写了一个 Web 服务 (REST)，现在我想使用模式来验证请求。我有一个工作代码，如此处所示[，](https://stackoverflow.com/questions/3428273/validate-jaxbelement-in-jpa-jax-rs-web-service/3440388#3440388)用于验证。

我的代码如下所示：

```
public abstract class AbstractValidatingReader<T> implements MessageBodyReader<T> {

    @Context
    protected Providers providers;

    private Schema schema;

    public AbstractValidatingReader() {
       ....
    }

    @SuppressWarnings("unchecked")
    @Override
    public boolean isReadable(Class<?> arg0, Type arg1, Annotation[] arg2, MediaType arg3) {
        ....
        return arg0 == readableClass;
    }

    @SuppressWarnings("unchecked")
    @Override
    public T readFrom(Class<T> arg0, Type arg1, Annotation[] arg2, MediaType arg3, MultivaluedMap<String, String> arg4,
            .....
        return type;
    }

    protected abstract T validate(T arg0) throws WebApplicationException;
} 
```

和，

```
@Component
@Provider
@Consumes({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML, MediaType.APPLICATION_XAMF })
public class ValidatingReaderImpl extends AbstractValidatingReader<Person> {

    @Override
    protected Person validate(Person arg0) throws WebApplicationException {

        return arg0;
    }

} 
```

这适用于**Person**类，并且请求正在得到验证。但是，我还有很多其他要求，例如联系人、链接、就业等。

*我是否必须为每种请求类型扩展 AbstractValidatingReader 类？*

我正在**针对相同的架构进行验证**，因此看起来有很多代码\类来执行此操作。

谢谢，阿迪

# javascript - 将文件从 Javascript 上传到 PHP

> ID：12530158
> 
> 赞同：6
> 
> 时间：2012-09-21T11:58:43.677
> 
> 标签：javascript, file, upload, status, progress

我正在编写一个脚本，让用户上传文件并查看上传状态，然后将文件保存在服务器上。

问题是我不能使用 php api。所以我想用javascript上传文件，在那里我可以很容易地获得上传状态，但是我想将文件传递给php并保存它。

这可能吗？

这是要上传的 javascript 代码。

```
<!DOCTYPE html>
<html>
<head >
<title>Upload Files using XMLHttpRequest</title>

<script type="text/javascript">
    function fileSelected() {
        var file = document.getElementById('fileToUpload').files[0];
        if (file) {
            var fileSize = 0;
            if (file.size > 1024 * 1024)
                fileSize = (Math.round(file.size * 100 / (1024 * 1024)) / 100).toString() + 'MB';
            else
                fileSize = (Math.round(file.size * 100 / 1024) / 100).toString() + 'KB';

            document.getElementById('fileName').innerHTML = 'Name: ' + file.name;
            document.getElementById('fileSize').innerHTML = 'Size: ' + fileSize;
            document.getElementById('fileType').innerHTML = 'Type: ' + file.type;
        }
    }

    function uploadFile() {
        var fd = new FormData();
        fd.append("fileToUpload", document.getElementById('fileToUpload').files[0]);
        var xhr = new XMLHttpRequest();
        xhr.upload.addEventListener("progress", uploadProgress, false);
        xhr.addEventListener("load", uploadComplete, false);
        xhr.addEventListener("error", uploadFailed, false);
        xhr.addEventListener("abort", uploadCanceled, false);
        xhr.open("POST", "UploadHandler.ashx");
        xhr.send(fd);
    }

    function uploadProgress(evt) {
        if (evt.lengthComputable) {
            var percentComplete = Math.round(evt.loaded * 100 / evt.total);
            document.getElementById('progressNumber').innerHTML = percentComplete.toString() + '%';
            document.getElementById('prog').value = percentComplete;
        }
        else {
            document.getElementById('progressNumber').innerHTML = 'unable to compute';
        }
    }

    function uploadComplete(evt) {
        /* This event is raised when the server send back a response */
        alert(evt.target.responseText);
    }

    function uploadFailed(evt) {
        alert("There was an error attempting to upload the file.");
    }

    function uploadCanceled(evt) {
        alert("The upload has been canceled by the user or the browser dropped the connection.");
    }
</script>

</head>
<body>
    <form id="form1">
    <div>
        <label for="fileToUpload">
            Select a File to Upload</label>
        <input type="file" name="fileToUpload[]" id="fileToUpload" onchange="fileSelected();" />
    </div>
    <div id="fileName">
    </div>
    <div id="fileSize">
    </div>
    <div id="fileType">
    </div>
    <div>
        <input type="button" onclick="uploadFile()" value="Upload" />
    </div>
    <div id="progressNumber">
    </div>
    <progress id="prog" value="0" max="100.0"></progress>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T16:30:32.673

我对此有一个[要点](https://gist.github.com/2410898)。它使用`xhr.send(FormData)`并显示最少的代码来处理 PHP 中的文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T12:25:49.300

向 PHP 文件发出 AJAX 请求，发送上传的文件属性，如名称等，然后让它打开、移动、重命名或任何需要的东西。应该可以的吧？

我是否正确理解了您的问题？

**示例代码：**

在 Javascript 中：

```
// xhr
var http = new XMLHttpRequest();
var url = "file_handler.php";
var file_data = "name=mypic.jpg&size=123&othe=etc";
http.open("POST", url, true);

// headers
http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
http.setRequestHeader("Content-length", file_data.length);
http.setRequestHeader("Connection", "close");

http.onreadystatechange = function() {
    if(http.readyState == 4 && http.status == 200) {
        alert(http.responseText);
    }
}

http.send(file_data); 
```

在`file_handler.php`：

```
// file data
$file_data = $_POST['file_data'];

// working on the file
$temp_dir = 'usr/upload/';
$new_dir = 'usr/photos/';

// new unique name
$new_name = time() . '_' . $file_data['name'];

// copy?
if (copy($temp_dir . $file_data['name'], $new_dir . $new_name)) {
    unlink($temp_dir . $file_data['name']);
}

// rename?
rename($temp_dir . $file_data['name'], $temp_dir . $new_name);

// delete old file?
unlink($temp_dir . $file_data['name']);

// do whatever else needed here ...
// echo some JSON data to interact with your client-side JS code, maybe ... 
```

# actionscript-3 - Flex3 无法使用括号访问 XML 的值

> ID：12530159
> 
> 赞同：1
> 
> 时间：2012-09-21T11:58:44.510
> 
> 标签：actionscript-3, apache-flex, xml-parsing, flex3

我有以下 XML 对象：

```
<ns2:errorCode>
  3001
</ns2:errorCode> 
```

如果我只有一个字符串表示 errorCode，我如何访问该值。

我想做类似的事情：

`xml['*::'+str]``xml`具有上述节点的 XML 对象 在哪里，`str`我的字符串变量包含`"errorCode"`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:54:53.497

感谢您的帮助。如果有人感兴趣，这就是我解决它的方法。

使任务变得困难的是命名空间。这行得通！

```
var t:XMLList = xml.*.(localName() =='errorCode'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:13:08.473

您可能需要检查如何在 ActionScript3 中遍历 XML 结构：

[http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e6b.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e6b.html)

`str = xml.errorCode`应该做的伎俩。

# c# - 选择选项更改下拉列表 C# ASP.NET 火灾事件

> ID：12530161
> 
> 赞同：9
> 
> 时间：2012-09-21T11:58:47.007
> 
> 标签：c#, asp.net

我在 asp.net 中有一个下拉列表当我单击一个选项时，我应该获取选定的值，然后将其传递给数据库，然后使用查询结果来填充第二个下拉列表。

单击第一个下拉菜单时，我似乎无法“触发”此事件。以下是我所拥有的：

**ASPX 代码**

```
<td class="style3">
                <asp:DropDownList ID="Currencies" runat="server" 
                    onselectedindexchanged="Currencies_SelectedIndexChanged">
                </asp:DropDownList>
            </td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td class="style2">
                Payment Mode</td>
            <td class="style3">
                <asp:DropDownList ID="PaymentModes" runat="server">
                </asp:DropDownList>
            </td> 
```

**CodeBehind 代码 C#**

```
String conn = WebConfigurationManager.ConnectionStrings["pvconn"].ToString();
    protected void Page_Load(object sender, EventArgs e)
    {
        populatecurrencylist();

    }

    public void populatecurrencylist() 
    {
        SqlCommand sql = new SqlCommand("SELECT * FROM CURRENCIES_TBL ORDER BY Currency_Initials",new SqlConnection(conn));
        sql.Connection.Open();
        SqlDataReader listcurrencies;
        listcurrencies = sql.ExecuteReader();
        Currencies.DataSource = listcurrencies;
        Currencies.DataTextField = "Currency_Initials";
        Currencies.DataValueField = "Currency_Group_ID";
        Currencies.DataBind();
        sql.Connection.Close();
        sql.Connection.Dispose();
    }

    protected void TextBox1_TextChanged(object sender, EventArgs e)
    {

    }
    protected void Currencies_SelectedIndexChanged(object sender, EventArgs e)
    {
        var currid = Currencies.SelectedValue;
        HttpContext.Current.Response.Write(currid);
        //int currid = 0;
        try
        {
            SqlCommand sql = new SqlCommand("SELECT * FROM PAYMENT_MODES_TBL WHERE Currency_ID = @currencyid", new SqlConnection(conn));
            SqlParameter param0 = new SqlParameter();
            param0.ParameterName = "@currencyid";
            param0.SqlDbType = System.Data.SqlDbType.Int;
            param0.Value = currid;

            sql.Parameters.Add(param0);
            sql.Connection.Open();
            SqlDataReader listpaymodes;
            listpaymodes = sql.ExecuteReader();
            PaymentModes.DataSource = listpaymodes;
            PaymentModes.DataTextField = "Payment_Mode";
            PaymentModes.DataValueField = "Paying_Account_Code";
            PaymentModes.DataBind();
            sql.Connection.Close();
            sql.Connection.Dispose();
        }
        catch(Exception s)
        {
            HttpContext.Current.Response.Write("Error Occured " + s.Message);
        }            
    } 
```

我可以毫无问题地填充第一个下拉列表。第二个似乎不起作用。在 ASP.NET 中非常新。我来自 PHP 背景，使用 jquery ajax 可以轻松实现，但我想学习 C#。

任何帮助表示赞赏。

**编辑**

所有答案都表明我将货币下拉列表设置为**`AutoPostBack = true`** 我已经这样做了：

```
<asp:DropDownList ID="Currencies" runat="server" AutoPostBack="True" 
                    onselectedindexchanged="Currencies_SelectedIndexChanged">
                </asp:DropDownList> 
```

但它似乎仍然不起作用。在旁注中，页面重新加载，我的选择菜单选项被重置为第一个选项。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T12:00:30.953

改变

```
<asp:DropDownList ID="Currencies" runat="server" 
                    onselectedindexchanged="Currencies_SelectedIndexChanged">
                </asp:DropDownList> 
```

到

```
<asp:DropDownList ID="Currencies" runat="server" AutoPostBack="True"
                    onselectedindexchanged="Currencies_SelectedIndexChanged">
                </asp:DropDownList> 
```

更新

在您更新后更新您的问题。

改变这个：

```
protected void Page_Load(object sender, EventArgs e)
    {
        populatecurrencylist();

    } 
```

对此：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if(!IsPostBack) {
        populatecurrencylist();
        }

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T12:01:29.337

确保您的下拉列表`Currencies`设置为`AutoPostBack="True"`.

因为你是新手。通过下面的链接。

[http://asp-net-example.blogspot.in/2009/03/how-to-use-dropdownlist-autopostback.html](http://asp-net-example.blogspot.in/2009/03/how-to-use-dropdownlist-autopostback.html)

此链接可能对您有所帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T12:01:59.750

使**货币**下拉自动回发为真。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T12:06:00.113

默认情况下， 的[`AutoPostBack`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.autopostback.aspx)属性`DropDownList`为假。

> 如果用户更改列表选择时自动回发到服务器，则返回 true；否则为假。默认值为假。

将其指定为 true：

```
<asp:DropDownList ... AutoPostBack="True" ...>
  ...
</asp:DropDownList> 
```

如果这仍然不起作用，那么可能是您在 an 中有控件`UpdatePanel`并且需要指定触发器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-26T08:29:28.227

您只需设置 Autopostback=True。

# iphone - 如何使在 IOS 5 上开发的应用程序与 IOS 6 兼容

> ID：12530168
> 
> 赞同：4
> 
> 时间：2012-09-21T11:59:04.377
> 
> 标签：iphone, ios, ios5

我已经在 IOS 5 中开发了一个应用程序，现在我想让该应用程序与 IOS 6 兼容。任何人都可以详细解释一下。在检测到设备系列后，我需要根据屏幕的新尺寸设置 UI 对象的框架，以防 iPhone 3.4 英寸视网膜或 iPhone 4 英寸视网膜。我是否还需要为这两个设备系列设置图像？

此外，图像 Def​​ault-568h@2x.png 似乎永远不会加载。所以我必须以不同的方式为这两个设备添加图像，就像在 iPhone 和 iPad App 的情况下一样。

# c++ - 模板函数查找

> ID：12530174
> 
> 赞同：7
> 
> 时间：2012-09-21T11:59:13.233
> 
> 标签：c++, templates

考虑这段代码：

```
#include <iostream>
#include <vector>

template<typename A>
void foo(A& a) {
    std::cout << "the wrong foo" << std::endl;
}

template<typename A>
void do_stuff(A& a) {
    foo(a);
}

template<typename X>
void foo(std::vector<X>& a) {
    std::cout << "the right foo" << std::endl;
}

int main()
{
    std::vector<int> q;
    do_stuff(q);
} 
```

为什么它称“错误”的foo？如果 foo 的第一个声明被删除，则调用正确的 foo。

我正在使用 gcc 4.6.3。

**更新：** 如果按以下顺序声明函数，则调用正确的 foo 。

```
template<typename A> void do_stuff(A& a) { ... }
template<typename A> void foo(A& a) { ... }
template<typename X> void foo(std::vector<X>& a) { ... } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:06:28.233

观察到的行为是正确的，与`foo(a)`类型相关的表达式一样，根据：

```
14.6.2.2 Type-dependent expressions                         [temp.dep.expr]

1) Except as described below, an expression is type-dependent if any
   subexpression is type-dependent.

2) this is type-dependent if the class type of the enclosing member
   function is dependent (14.6.2.1).

3) An id-expression is type-dependent if it contains

    — an identifier associated by name lookup with one or more declarations 
      declared with a dependent type,
    ... 
```

并在 14.6.4（从属名称解析）下：

```
14.6.4.2 Candidate functions                              [temp.dep.candidate]

For a function call that depends on a template parameter, the candidate
functions are found using the usual lookup rules (3.4.1, 3.4.2, 3.4.3) except
that:

— For the part of the lookup using unqualified name lookup (3.4.1) or qualified
  name lookup (3.4.3), only function declarations from the template definition 
  context are found.
— For the part of the lookup using associated namespaces (3.4.2), only function
  declarations found in either the template definition context or the template
  instantiation context are found.

If the function name is an unqualified-id and the call would be ill-formed or
would find a better match had the lookup within the associated namespaces
considered all the function declarations with external linkage introduced in
those namespaces in all translation units, not just considering those
declarations found in the template definition and template instantiation
contexts, then the program has undefined behavior. 
```

选择“错误”是因为它*是模板定义*`foo()`时唯一可见的，而“正确”不被考虑，因为它不在*与函数参数类型关联的命名空间中*。*`foo()`*

 **如果您修改代码以使“正确”`foo()`位于关联的命名空间中，则会选择它而不是“错误” `foo()`。（在这种特殊情况下，标准不允许这样做，因此请不要执行以下操作，但使用您自己的命名空间/类型，它应该是这样工作的）

```
#include <iostream>
#include <vector>

template<typename A> void foo(A& a)
{
    std::cout << "the wrong foo" << std::endl;
}

template<typename A>
void do_stuff(A& a) {
    foo(a);
}

namespace std { // evil, don't do this with namespace std!

template<typename X>
void foo(std::vector<X>& a) {
    std::cout << "the right foo" << std::endl;
}

}

int main()
{
    std::vector<int> q;
    do_stuff(q); // calls the "right" foo()
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T13:19:27.893

在模板定义中，对非依赖名称（即`foo`不依赖于模板参数的名称）的名称查找在模板定义的地方执行，而不是在模板实例化的地方执行。这是由标准规定的：

> C++11 14.6.3 模板定义中使用的非依赖名称是使用通常的名称查找找到的，并在使用它们的位置绑定。

并通过与您类似的示例进行说明：

```
void g(double);
void h();

template<class T> class Z {
public:
  void f() {
    g(1);           // calls g(double)
    h++;            // ill-formed: cannot increment function;
                    // this could be diagnosed either here or
                    // at the point of instantiation
  }
};

void g(int);        // not in scope at the point of the template
                    // definition, not considered for the call g(1) 
```

关于您的更新：我相信，两个`foo`声明都放在 之后`do_stuff`，程序应该是格式错误的，并且 GCC 在使用点失败时（显然）将查找推迟到实例化点是不正确的。

**更新：**正如评论中所指出的，这种行为确实是不正确的，并且在 gcc-4.7 中得到了修复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T12:14:41.253

当你调用`do_stuff`的类型`a`是`std::vector<int>`. 编译器然后搜索 a并`foo`发现`std::vector<int>`它可以使用`foo(A&)`（'错误' `foo`）`foo(std::vector<B>&)`尚未声明。如果您删除此声明，您应该会收到编译器错误，因为模板必须在使用之前定义。如果您不这样做，则可能是 gcc 模板系统中的错误，而不是该语言的功能。尝试一下`clang++`，你应该会看到：

```
test.cpp:6:5: error: call to function 'foo' that is neither visible in the template definition nor found by
  argument-dependent lookup
foo(a);
^ 
```

编辑：似乎这实际上是`clang++`处理模板的方式中的一个错误，它应该能够解决对`foo`模板实例化之前出现的第二个的调用。**

# windows-phone-7 - BackgroundAudioPlayer 不会释放音乐文件

> ID：12530177
> 
> 赞同：3
> 
> 时间：2012-09-21T11:59:23.730
> 
> 标签：windows-phone-7, background-audio

我正在使用 BackgroundAudioPlayer 播放存储在隔离存储中的音频文件。

用户可能想要删除这些文件之一。如果文件正在播放，则文件被 BackgroundAudioPlayer 锁定。只有在曲目播放完毕后才能删除文件。

即使我在 BackgroundAudioPlayer 上调用 Stop 函数，文件仍然被锁定。

如何让 BackgroundAudioPlayer 解除锁定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:51:33.573

To release the audio file, you have to call the `Close` method of the `BackgroundAudioPlayer`.

[http://msdn.microsoft.com/en-us/library/microsoft.phone.backgroundaudio.backgroundaudioplayer.close(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.backgroundaudio.backgroundaudioplayer.close(v=vs.92).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:29:22.427

尝试将`Track`属性设置为空。

# function - 如何在mathematica中定义一个通用函数？

> ID：12530179
> 
> 赞同：8
> 
> 时间：2012-09-21T11:59:29.397
> 
> 标签：function, wolfram-mathematica, expression, definition

如果没有 Mathematica 中的精确表达式，我如何定义一个通用函数？例如，我不需要这个：

```
a[x_, y_]:= 2x + 3y, 
```

我需要使用一般参数 a(x,y) 来代替：

```
a[x_, y_]:= a[x, y]. 
```

当然，这条线不太好用。

编辑1：

好吧，我在另一个未知函数中使用该参数（未知，因为它仅在包中定义），它基本上作为导数工作，即它是一阶和二阶导数的非常复杂的组合。

这条线

```
a[x_, y_]:= a[x, y], 
```

实际上有效（有点），因为参数“生存”包作为函数，除了在输出中我得到烦人的“ `Hold[a[x,y]]`”而不是 just `a[x,y]`，我不能再将结果用作函数了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T08:21:51.460

在不指定表达式的情况下“定义”函数的方法是*不*定义它。就用它吧。

例子：

```
D[f[x] g[x],x]
(*
==> g[x] f'[x] + f[x] g'[x]
*) 
```

如您所见，我没有定义`f`or `g`，但 Mathematica 使用它们进行计算没有问题。

请注意，您也可以使用这些函数进行定义。例如：

```
modify[a[x_,y_]]:=a[y,x+y]
modify[a[2,3]]
(*
==> a[3, 5]
*) 
```

您甚至可以对它们定义算术运算。例如，您可以定义一个函数`exp`来符号计算指数（注意小写，因为`Exp`已经是内置的指数函数），然后定义

```
exp/: exp[a_] exp[b_] := exp[a+b]
exp/: exp[a_]^n_Integer := exp[n a] 
```

然后写

```
expression = 3 exp[x] exp[y+z]^3
(*
==> 3 exp[x + 3 (y + z)]
*) 
```

# ruby-on-rails - 链接到 Rails 中的特定页面

> ID：12530194
> 
> 赞同：0
> 
> 时间：2012-09-21T12:00:20.877
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试在帖子标题中创建链接，该链接使用此帖子打开新页面。我试过`<%= link_to post.title, posts_path(path) %>`了，但出现错误

```
undefined local variable or method `posts_path' for #<#<Class:0x007fbf134f2b88>:0x007fbf13c17d78> 
```

我究竟做错了什么？

耙：路线：

```
 posts_index GET    /posts/index(.:format)         posts#index
               posts_new GET    /posts/new(.:format)           posts#new
            posts_create POST   /posts/create(.:format)        posts#create
                         GET    /posts/:id(.:format)           posts#show
                    root        /                              home#index
                    root        /                              home#index
        new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
            user_session POST   /users/sign_in(.:format)       devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
           user_password POST   /users/password(.:format)      devise/passwords#create
       new_user_password GET    /users/password/new(.:format)  devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                         PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
       user_registration POST   /users(.:format)               devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                         PUT    /users(.:format)               devise/registrations#update
                         DELETE /users(.:format)               devise/registrations#destroy
                   users GET    /users(.:format)               users#index
                    user GET    /users/:id(.:format)           users#show 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T12:07:16.020

如果你只是想去show action，写就够了

```
<%= link_to post.title, post %> 
```

这与

```
<%= link_to post.title, post_path(post) %> 
```

看看文档：[http ://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:55:43.433

您正在尝试链接到单数帖子，但使用了不带对象的路由助手的复数形式。使用`post_path`：

```
<%= link_to post.title, post_path(path) %> 
```

复数形式是列出该 url 处的所有资源。单数形式用于显示一个资源。

有关更多详细信息，请参阅此[导轨路由指南](http://guides.rubyonrails.org/routing.html#singular-resources)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T21:01:43.543

我只需将此链接添加到我的显示页面

```
<%= link_to 'Write a Review', new_comic_review_review_path(@comic_review)%> 
```

# php - 如何在另一个页面中获取数组值

> ID：12530196
> 
> 赞同：0
> 
> 时间：2012-09-21T12:00:22.360
> 
> 标签：php

page1.php

```
$destinationCity = $_POST['destination'];
$sr = new searchArray();
$final = $sr->searcharray($destinationCity);
echo "<pre>";
print_r($final);
echo $final->vc[0];
echo "</pre>"; 
```

Page2.php

```
class searchArray {

public function searcharray($arr) {
   $rst = array();
   $length = strlen($arr);
    if ($length == 2){
        $sql = "select code from ukhotels where postcode LIKE '$arr%'";
        $rsd = mysql_query($sql);
        while($rs = mysql_fetch_array($rsd)){
        $co = $rs['code'];
        $vc = &$rst['vc'];
        $vi = &$rst['vi'];

        $vc[] = substr($co, 0, 2);
        $vi[] = substr($co, 3, strlen($co));

    }

    } 
```

在 page1 中，我使用一个参数调用该函数。在 page2 中，我将结果保存在关联数组中。

当我从 page1 打印数组时，它显示我的输出为

```
Array
(
[vc] => Array
    (
        [0] => CB
        [1] => RD
        [2] => RT
        [3] => YX
    )

[vi] => Array
    (
        [0] => 01461 
        [1] => 95101 
        [2] => 30818 
        [3] => 77126 
    )

) 
```

我想像这样在page1中使用数组

```
for($i=0, $j=1;$i<=20;$i++)
{
$params["VendorLocation"]["VendorCode"] = "{$final->vc[$i]}";
$params["VendorLocation"]["VendorLocationID"] = "{$final->vi[$i]}";
$params["VendorLocation"]["Key"] = "{$j}";
$j++;
} 
```

但它给我一个错误说“注意：试图获取非对象的属性”

谁能帮我解决这个问题。

问候海莉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:07:44.160

$final 是一个数组，像这样访问值：

```
for($i=0, $j=1; $i<=20; $i++) {
    $params["VendorLocation"]["VendorCode"] = '{' . $final['vc'][$i] . '}';
    $params["VendorLocation"]["VendorLocationID"] = '{' . $final['vi'][$i] . '}';
    $params["VendorLocation"]["Key"] = "{$j}";
    $j++;
} 
```

# ios - iOS - 如何在活动视图仍在动画时显示 UIView？

> ID：12530197
> 
> 赞同：0
> 
> 时间：2012-09-21T12:00:23.980
> 
> 标签：ios, animation, uiview

当我的应用程序正在加载某些屏幕时，我有代码显示带有活动轮的“正在加载...”视图。如果加载时间特别长（例如，超过 4 秒），那么我想显示一条附加消息，上面写着“抱歉，这需要很长时间，请耐心等待！” 我这样做的方法是在 4 秒延迟上使用 NSTimer，它调用一个方法来创建一个等待视图，然后将这个新视图覆盖在加载视图上，这样单词不会重叠。如果页面加载时间少于 4 秒，则加载视图被隐藏，等待视图永远不会被触发，用户继续他或她的快乐方式。

当我测试需要超过 4 秒的屏幕加载时，我似乎无法显示额外的视图。这是我的代码：

```
// this method is triggered elsewhere in my code
// right before the code to start loading a screen
- (void)showActivityViewer
{     
    tooLong = YES;
    waitTimer = [NSTimer scheduledTimerWithTimeInterval:4.0
                                                   target:self
                                                 selector:@selector(createWaitAlert)
                                                 userInfo:nil
                                                  repeats:NO];
    [[NSRunLoop currentRunLoop] addTimer: waitTimer forMode: NSDefaultRunLoopMode];

    loadingView = [LoadingView createLoadingView:self.view.bounds.size.width     :self.view.bounds.size.height];    
    [self.view addSubview: loadingView];

    // this next line animates the activity wheel which is a subview of loadingView
    [[[loadingView subviews] objectAtIndex:0] startAnimating]; 
}

- (void)createWaitAlert
{
    [waitTimer invalidate];
    if (tooLong) 
    {
        UIView *waitView = [LoadingView createWaitView:self.view.bounds.size.width :self.view.bounds.size.height];
        [self.view addSubview:waitView];
    }
}

// this method gets triggered elsewhere in my code
// when the screen has finished loading and is ready to display
- (void)hideActivityViewer
{
    tooLong = NO;
    [[[loadingView subviews] objectAtIndex:0] stopAnimating];
    [loadingView removeFromSuperview];
    loadingView = nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:12:10.003

你确定你是从主线程执行的吗？尝试这个：

```
- (void)showActivityViewer
{     
    tooLong = YES;

    dispatch_async(dispatch_queue_create(@"myQueue", NULL), ^{
        [NSThread sleepForTimeInterval:4];
        [self createWaitAlert];
    });

    loadingView = [LoadingView createLoadingView:self.view.bounds.size.width     :self.view.bounds.size.height];    
    [self.view addSubview: loadingView];

    // this next line animates the activity wheel which is a subview of loadingView
    [[[loadingView subviews] objectAtIndex:0] startAnimating]; 
}

- (void)createWaitAlert
{
    dispatch_async(dispatch_get_main_queue(), ^{
        if (tooLong) 
        {
            UIView *waitView = [LoadingView createWaitView:self.view.bounds.size.width :self.view.bounds.size.height];
            [self.view addSubview:waitView];
        }
    });
} 
```

# ios - 极高的内存使用率 - 如何在 iPad 上处理大图像？

> ID：12530199
> 
> 赞同：6
> 
> 时间：2012-09-21T12:00:28.847
> 
> 标签：ios, ipad, memory-management, instruments, large-files

我最近在我的应用程序中遇到了一些内存管理问题。

该应用程序利用了一些高质量的图像，这极大地增加了内存使用量。

以下是有关项目和图像详细信息的一些信息，以使问题更加清晰：

*   我的项目中添加了大约 90 张图像。其中一半采用@2x 尺寸设计，以支持新 iPad 视网膜显示屏。因此，每个设备的最大图像数量约为 45。

*   所有图像的 Retina 版本的总大小约为 25 兆字节（每个单独图像的大小从 10 KB 到 6.8 MB 不等）。同时，所有标准图像的大小等于 11 兆字节。

*   该项目的 XCode 存档大小等于 44 兆字节。

*   标准版图像中单个图像的最大分辨率约为 1500x4000 像素，而最小值约为 60x60 像素。

*   Retina 版本图像中单个图像的最大分辨率约为 3000x8000 像素，而最小值约为 120x120 像素。

*   Retina 版本的图像名称中有“@2x~ipad”后缀，而其他图像的名称后缀是“~ipad”。

*   大多数图像只有一个实例是在应用生命周期中创建的。

*   大约 25 张图片是在应用启动期间加载的，其余的则是在游戏过程中加载的。

*   我在想加载图像的任何地方都使用了 [UIImage imageNamed:@"image_name.png"] （使用 [UIImage imageWithContentsOfFile] 和 [UIImage imageWithData] 效率极低）。

但是这里有问题：

当我使用 Instruments 跟踪内存使用情况时，我发现该应用程序的内存使用情况非常高。以下是不同情况下内存分配的统计数据：

*   启动时使用标准图像在 iPad 2 上分配的内存：58 MB

*   在游戏过程中使用标准图像在 iPad 2 上分配的内存（加载所有图像时）：131 MB

*   在启动时使用 Retina 图像在新 iPad 上分配的内存：211 MB
*   在游戏过程中使用 Retina 图像在新 iPad 上分配的内存（加载所有图像时）：470 MB

任何想法为什么分配的内存比图像的总大小高很多？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:21:33.290

这可能是因为您使用的图像是用 png 或 jpg 压缩的，并且解码到内存时的大小比原始文件的大小要大得多。无论图像内容如何，​​它都会占用宽度 * 高度 * 4 字节的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:58:30.710

首先是*不*使用`-[UIImage imageNamed:]`符合任何条件的图像：

*   大号
*   中型
*   “……只有一个实例……在应用程序生命周期中创建。”

但是您需要注意这些更改如何影响您的程序。您目前尽可能依赖内存。我的建议是将其中一些责任转移到其他领域。分配负载，因此它仍然感觉很快，但具有更好的资源平衡。一旦您使用较少的缓存，您会注意到您最终可能会多次读取和扩展某些文件。然后尝试找出应该在哪里共享加载的图像。当然，只加载你需要的。然后把你学到的东西拿来看看它是否可以应用于你的其他图像。

另外，分解你的图像——你的图像比显示器的尺寸大几倍。如果它们需要达到那个大小，则将它们分解——如果它们只在呈现时按比例缩小，然后在分发之前调整它们的大小（例如，它们不需要缩放——显示速度会更快，看起来更好，并消耗更少的内存）。

# module - 在方案中向右折叠

> ID：12530206
> 
> 赞同：2
> 
> 时间：2012-09-21T12:00:56.640
> 
> 标签：module, scheme, racket

我使用 DrRacket 作为方案编译器。当我尝试使用 fold-right 功能时，我得到“fold-right：模块中的未绑定标识符：fold-right。” 在调用这个函数之前我需要包含一些库吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T12:40:36.787

我想你正在寻找`foldr`. [foldr](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket/private/list..rkt%29._foldr%29%29)是 fold-right 的球拍实现。

从文档中：

> Like `map`，`foldl`将过程应用于一个或多个列表的元素。而`map`将返回值组合到一个列表中，`foldl` 则以由 proc 确定的任意方式组合返回值。

[…]

> [ `foldr`is ] like `foldl`，但列表是从右到左遍历的。与 不同`foldl`，`foldr`在与 lsts 的长度成比例的空间中处理 lsts（加上每次调用 proc 的空间）。

**编辑：**

您可能还想使用[Chris](https://stackoverflow.com/users/13/chris-jester-young)建议的 srfi/1 库，特别是如果您希望 fold-right 像[srfi/1 推荐](http://srfi.schemers.org/srfi-1/srfi-1.html#FoldUnfoldMap)一样工作。有一些细微的差别：

```
#lang racket
(require srfi/1)
(foldr list* '() '(a b c) '(1 2 3))
(fold-right list* '() '(a b c) '(1 2 3 4))
(foldr list* '() '(a b c) '(1 2 3 4)) 
```

输出：

```
Welcome to DrRacket, version 5.3 [3m].
Language: racket; memory limit: 128 MB.
'{a 1 b 2 c 3}
'{a 1 b 2 c 3}
[ERROR] foldr: given list does not have the same size as the first list: '{1 2 3 4} 
```

注意：`fold-right`在不同大小的列表上不会出错，但您仍然只能从第二个列表中获得 1、2、3 个原子。这符合 srfi/1 规范：

> 当最短列表用完值时，折叠操作终止

`foldr`会出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:07:31.800

您应该添加`(require (only-in srfi/1 fold-right))`到代码的顶部。

# android - 从 android 中的 Spinner 将 int 值发送到我的 http 服务器

> ID：12530208
> 
> 赞同：-1
> 
> 时间：2012-09-21T12:01:01.143
> 
> 标签：android

```
pair.add(new BasicNameValuePair("gender", gender.getSelectedItem()
                    .toString())); 
```

我怎样才能解决这个问题？我需要从微调器向我的数据库发送一个 int 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:07:06.330

尝试

```
pair.add(new BasicNameValuePair("gender", Integer.parseInt(gender.getSelectedItem() .toString()))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:09:57.140

将 String 转换为 int 并将整数值添加到对中后，它将解决您的问题。

```
String s=gender.getSelectedItem().toString();
int i=Integer.parseInt(s);
pair.add(new BasicNameValuePair("gender", i)); 
```

# iphone - 自定义 UISlider IOS 6

> ID：12530210
> 
> 赞同：4
> 
> 时间：2012-09-21T12:01:03.777
> 
> 标签：iphone, objective-c, ios, uislider, ios6

所以我有这段代码可以创建一个自定义 UISlider 。在 IOS 6 之前它工作正常。在 IOS 6 中，图像不显示，它显示默认滑块。有人可以解释为什么会这样吗？

```
[sliderFPS setMinimumTrackImage:[[UIImage imageNamed:@"camera_slider_empty.png"] stretchableImageWithLeftCapWidth:8 topCapHeight:0]
                       forState:UIControlStateNormal];
[sliderFPS setMaximumTrackImage:[[UIImage imageNamed:@"camera_slider_full.png"] stretchableImageWithLeftCapWidth:8 topCapHeight:0]
                       forState:UIControlStateNormal];

[sliderFPS setThumbImage:[UIImage imageNamed:@"camera_fps_slider_button"]      
                forState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T12:21:50.170

我希望这个[文件](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)会有所帮助..

因为在 iOS 5 中不推荐使用以下方法。

```
 - (UIImage *)stretchableImageWithLeftCapWidth:(NSInteger)leftCapWidth topCapHeight:(NSInteger)topCapHeight 
```

根据您的代码，使用这一行而不是前两行。

```
[sliderFPS setMinimumTrackImage:[[UIImage imageNamed:@"camera_slider_empty.png"] resizableImageWithCapInsets:UIEdgeInsetsFromString(@"8")]
                       forState:UIControlStateNormal];
[sliderFPS setMaximumTrackImage:[[UIImage imageNamed:@"camera_slider_full.png"] resizableImageWithCapInsets:UIEdgeInsetsFromString(@"8")]
                       forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T12:17:41.483

`stretchableImageWithLeftCapWidth:topCapHeight:`在 iOS 5 中已`resizableImageWithCapInsets:`弃用

# android - Android如何获得每分钟的wifi下载和上传速度？

> ID：12530214
> 
> 赞同：0
> 
> 时间：2012-09-21T12:01:11.873
> 
> 标签：android, android-wifi

我想获得 wifi 的下载和上传速度。但我不会做任何背景工作。我想知道使用 wifi 信号电平或 rssi 值。.

请建议我得到它。

谢谢， 拉杰什 K

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:33:37.497

获得下载/上传速度的唯一方法是下载/上传一些东西。您无法从信号级别或类似级别计算它。这主要是因为吞吐量不仅仅受到信号强度的影响（例如 wifi 路由器有多忙，它的网络连接有多快，服务器有多快，wifi 路由器和服务器之间的每个组件有多快， ETC）

简而言之 - 你必须下载/上传一些东西（最好是足够大的东西，你可以平均几个读数以获得准确的结果）

编辑：如果您想要 wifi 连接的理论速度（例如 a/b/g/n 类型连接的标称速度），那么我不确定 - 我认为没有标准接口来获取wifi连接模式...

# jquery - 客户端上的jQuery更改ID，并且在服务器上不再可以找到控件？

> ID：12530215
> 
> 赞同：0
> 
> 时间：2012-09-21T12:01:14.057
> 
> 标签：jquery, asp.net, gridview, .net-4.0, jquery-selectors

我有一个网格视图，用户可以在其中添加新行。在添加行时，id会像这样改变..

```
$('<div class=".grdLoaded">').load("GridRow.htm", function () {
                    // insert the html
$(_InsertionID).after($(this).html());
// now change the default id(s) that were present on GridRow.htm
// to something that represent current value(s)
$('#grdEntry').find('#grdEntry_ctl00_lblSNO').attr('id', 'SNo_' + _insCurRowNumber + '');
$('#grdEntry').find('#grdEntry_ctl00_lblQty').attr('id', 'Qty_' + _insCurRowNumber + '');
$('#grdEntry').find('#grdEntry_ctl00_lblItemName').attr('id', 'ItemName_' + _insCurRowNumber + '');
$('#grdEntry').find('#grdEntry_ctl00_lblProcess').attr('id', 'Prc_' + _insCurRowNumber + '');
$('#grdEntry').find('#grdEntry_ctl00_lblRemarks').attr('id', 'Remarks_' + _insCurRowNumber + '');
$('#grdEntry').find('#grdEntry_ctl00_lblColor').attr('id', 'Color_' + _insCurRowNumber + '');
$('#grdEntry').find('#grdEntry_ctl00_lblAmount').attr('id', 'Amount_' + _insCurRowNumber + ''); 
```

正在添加的当前行 ID在哪里`insCurRowNumber`，第一次是 1，第二次是 2 等等。问题是如果我尝试访问服务器上的任何这些控件，像这样

```
((Label)grdEntry.Rows[i].FindControl("ItemName_1").Text; 
```

或事件，如果这样

```
Page.FindControl("ItemName_1") 
```

我得到一个`null reference exception`. 似乎问题是服务器端找不到这些动态生成的 ID。如果这是原因，我该如何规避呢？如果不是原因，那么是什么导致了这种行为，我如何找到这些控件来访问它们的值？

**编辑**：作为对 Steven Hunt 的回应，请求采用邮寄格式，这是密钥的集合。

```
 Request.Form.AllKeys    {string[177]}   string[]
    [0] "__EVENTTARGET" string
    [1] "__EVENTARGUMENT"   string
    [2] "__LASTFOCUS"   string
    [3] "__VIEWSTATE"   string
    [4] "__EVENTVALIDATION" string
    [5] "check" string
    [6] "txtDueDate"    string
    [7] "txtTime"   string
    [8] "txtCustomerName"   string
    [9] "grdEntry$ctl01$txtQty" string
    [10]    "grdEntry$ctl01$txtName"    string
    [11]    "grdEntry$ctl01$txtProcess" string
    [12]    "grdEntry$ctl01$txtRate"    string
    [13]    "grdEntry$ctl01$txtRemarks" string
    [14]    "tags"  string
    [15]    "grdEntry$ctl01$txtColor"   string
    [16]    "txtRemarks"    string
    [17]    "drpCheckedBy"  string
    [18]    "btnSaveBooking"    string
    [19]    "txtCurrentDue" string
    [20]    "a" string
    [21]    "txtDiscount"   string
    [22]    "txtDiscount_TextBoxWatermarkExtender_ClientState"  string
    [23]    "txtDiscountAmt"    string
    [24]    "txtSrTax"  string
    [25]    "txtTotal"  string
    [26]    "txtAdvance"    string
    [27]    "txtBalance"    string
    [28]    "txtItemName"   string
    [29]    "txtItemSubQty" string
    [30]    "txtNewItemName"    string
    [31]    "txtItemCode"   string
    [32]    "hdntemp"   string
    [33]    "hdnItemCode"   string
    [34]    "txtProcessCode"    string
    [35]    "txtProcessName"    string
    [36]    "txtCNameSearch"    string
    [37]    "txtAddress"    string
    [38]    "txtPhoneNo"    string
    [39]    "grdCustomerSearch$ctl02$lnkBtnCustomerCode"    string
    [40]    "grdCustomerSearch$ctl03$lnkBtnCustomerCode"    string
    [41]    "grdCustomerSearch$ctl04$lnkBtnCustomerCode"    string
    [42]    "grdCustomerSearch$ctl05$lnkBtnCustomerCode"    string
    [43]    "grdCustomerSearch$ctl06$lnkBtnCustomerCode"    string
    [44]    "grdCustomerSearch$ctl07$lnkBtnCustomerCode"    string
    [45]    "grdCustomerSearch$ctl08$lnkBtnCustomerCode"    string
    [46]    "grdCustomerSearch$ctl09$lnkBtnCustomerCode"    string
    [47]    "grdCustomerSearch$ctl10$lnkBtnCustomerCode"    string
    [48]    "grdCustomerSearch$ctl11$lnkBtnCustomerCode"    string
    [49]    "grdCustomerSearch$ctl12$lnkBtnCustomerCode"    string
    [50]    "grdCustomerSearch$ctl13$lnkBtnCustomerCode"    string
    [51]    "grdCustomerSearch$ctl14$lnkBtnCustomerCode"    string
    [52]    "grdCustomerSearch$ctl15$lnkBtnCustomerCode"    string
    [53]    "grdCustomerSearch$ctl16$lnkBtnCustomerCode"    string
    [54]    "grdCustomerSearch$ctl17$lnkBtnCustomerCode"    string
    [55]    "grdCustomerSearch$ctl18$lnkBtnCustomerCode"    string
    [56]    "grdCustomerSearch$ctl19$lnkBtnCustomerCode"    string
    [57]    "grdCustomerSearch$ctl20$lnkBtnCustomerCode"    string
    [58]    "grdCustomerSearch$ctl21$lnkBtnCustomerCode"    string
    [59]    "grdCustomerSearch$ctl22$lnkBtnCustomerCode"    string
    [60]    "grdCustomerSearch$ctl23$lnkBtnCustomerCode"    string
    [61]    "grdCustomerSearch$ctl24$lnkBtnCustomerCode"    string
    [62]    "grdCustomerSearch$ctl25$lnkBtnCustomerCode"    string
    [63]    "grdCustomerSearch$ctl26$lnkBtnCustomerCode"    string
    [64]    "grdCustomerSearch$ctl27$lnkBtnCustomerCode"    string
    [65]    "grdCustomerSearch$ctl28$lnkBtnCustomerCode"    string
    [66]    "grdCustomerSearch$ctl29$lnkBtnCustomerCode"    string
    [67]    "grdCustomerSearch$ctl30$lnkBtnCustomerCode"    string
    [68]    "grdCustomerSearch$ctl31$lnkBtnCustomerCode"    string
    [69]    "grdCustomerSearch$ctl32$lnkBtnCustomerCode"    string
    [70]    "grdCustomerSearch$ctl33$lnkBtnCustomerCode"    string
    [71]    "grdCustomerSearch$ctl34$lnkBtnCustomerCode"    string
    [72]    "grdCustomerSearch$ctl35$lnkBtnCustomerCode"    string
    [73]    "grdCustomerSearch$ctl36$lnkBtnCustomerCode"    string
    [74]    "grdCustomerSearch$ctl37$lnkBtnCustomerCode"    string
    [75]    "grdCustomerSearch$ctl38$lnkBtnCustomerCode"    string
    [76]    "grdCustomerSearch$ctl39$lnkBtnCustomerCode"    string
    [77]    "grdCustomerSearch$ctl40$lnkBtnCustomerCode"    string
    [78]    "grdCustomerSearch$ctl41$lnkBtnCustomerCode"    string
    [79]    "grdCustomerSearch$ctl42$lnkBtnCustomerCode"    string
    [80]    "grdCustomerSearch$ctl43$lnkBtnCustomerCode"    string
    [81]    "grdCustomerSearch$ctl44$lnkBtnCustomerCode"    string
    [82]    "grdCustomerSearch$ctl45$lnkBtnCustomerCode"    string
    [83]    "grdCustomerSearch$ctl46$lnkBtnCustomerCode"    string
    [84]    "grdCustomerSearch$ctl47$lnkBtnCustomerCode"    string
    [85]    "grdCustomerSearch$ctl48$lnkBtnCustomerCode"    string
    [86]    "grdCustomerSearch$ctl49$lnkBtnCustomerCode"    string
    [87]    "grdCustomerSearch$ctl50$lnkBtnCustomerCode"    string
    [88]    "grdCustomerSearch$ctl51$lnkBtnCustomerCode"    string
    [89]    "grdCustomerSearch$ctl52$lnkBtnCustomerCode"    string
    [90]    "grdCustomerSearch$ctl53$lnkBtnCustomerCode"    string
    [91]    "grdCustomerSearch$ctl54$lnkBtnCustomerCode"    string
    [92]    "grdCustomerSearch$ctl55$lnkBtnCustomerCode"    string
    [93]    "grdCustomerSearch$ctl56$lnkBtnCustomerCode"    string
    [94]    "grdCustomerSearch$ctl57$lnkBtnCustomerCode"    string
    [95]    "grdCustomerSearch$ctl58$lnkBtnCustomerCode"    string
    [96]    "grdCustomerSearch$ctl59$lnkBtnCustomerCode"    string
    [97]    "grdCustomerSearch$ctl60$lnkBtnCustomerCode"    string
    [98]    "grdCustomerSearch$ctl61$lnkBtnCustomerCode"    string
    [99]    "grdCustomerSearch$ctl62$lnkBtnCustomerCode"    string
    [100]   "grdCustomerSearch$ctl63$lnkBtnCustomerCode"    string
    [101]   "grdCustomerSearch$ctl64$lnkBtnCustomerCode"    string
    [102]   "grdCustomerSearch$ctl65$lnkBtnCustomerCode"    string
    [103]   "grdCustomerSearch$ctl66$lnkBtnCustomerCode"    string
    [104]   "grdCustomerSearch$ctl67$lnkBtnCustomerCode"    string
    [105]   "grdCustomerSearch$ctl68$lnkBtnCustomerCode"    string
    [106]   "grdCustomerSearch$ctl69$lnkBtnCustomerCode"    string
    [107]   "grdCustomerSearch$ctl70$lnkBtnCustomerCode"    string
    [108]   "grdCustomerSearch$ctl71$lnkBtnCustomerCode"    string
    [109]   "grdCustomerSearch$ctl72$lnkBtnCustomerCode"    string
    [110]   "grdCustomerSearch$ctl73$lnkBtnCustomerCode"    string
    [111]   "grdCustomerSearch$ctl74$lnkBtnCustomerCode"    string
    [112]   "grdCustomerSearch$ctl75$lnkBtnCustomerCode"    string
    [113]   "grdCustomerSearch$ctl76$lnkBtnCustomerCode"    string
    [114]   "grdCustomerSearch$ctl77$lnkBtnCustomerCode"    string
    [115]   "grdCustomerSearch$ctl78$lnkBtnCustomerCode"    string
    [116]   "grdCustomerSearch$ctl79$lnkBtnCustomerCode"    string
    [117]   "grdCustomerSearch$ctl80$lnkBtnCustomerCode"    string
    [118]   "grdCustomerSearch$ctl81$lnkBtnCustomerCode"    string
    [119]   "grdCustomerSearch$ctl82$lnkBtnCustomerCode"    string
    [120]   "grdCustomerSearch$ctl83$lnkBtnCustomerCode"    string
    [121]   "grdCustomerSearch$ctl84$lnkBtnCustomerCode"    string
    [122]   "grdCustomerSearch$ctl85$lnkBtnCustomerCode"    string
    [123]   "grdCustomerSearch$ctl86$lnkBtnCustomerCode"    string
    [124]   "grdCustomerSearch$ctl87$lnkBtnCustomerCode"    string
    [125]   "grdCustomerSearch$ctl88$lnkBtnCustomerCode"    string
    [126]   "grdCustomerSearch$ctl89$lnkBtnCustomerCode"    string
    [127]   "grdCustomerSearch$ctl90$lnkBtnCustomerCode"    string
    [128]   "grdCustomerSearch$ctl91$lnkBtnCustomerCode"    string
    [129]   "txtExtraProcess1"  string
    [130]   "txtExtraRate1" string
    [131]   "txtExtraProcess2"  string
    [132]   "txtExtraRate2" string
    [133]   "txtWholeRemark"    string
    [134]   "drpTitle"  string
    [135]   "txtCName"  string
    [136]   "txtCAddress"   string
    [137]   "txtMobile" string
    [138]   "drpPriority"   string
    [139]   "txtNewPriority"    string
    [140]   "txtAreaLocaton"    string
    [141]   "txtRemarks1"   string
    [142]   "txtBDate"  string
    [143]   "txtADate"  string
    [144]   "hdnMAC"    string
    [145]   "hdnEditItemId" string
    [146]   "hdnOption" string
    [147]   "hdnCustId" string
    [148]   "hdnUpdate" string
    [149]   "BranchId"  string
    [150]   "hdnItems"  string
    [151]   "hdnDataValues" string
    [152]   "hdnFirstAdd"   string
    [153]   "hdnCustomerNameFocusOut"   string
    [154]   "hdnCurrentValue"   string
    [155]   "hdnCurrentGrossAmt"    string
    [156]   "isInEditMode"  string
    [157]   "hdnDefaultItem"    string
    [158]   "hdnDefaultProcess" string
    [159]   "hdnDefaultItemProcessRate" string
    [160]   "hdnTaxBefore"  string
    [161]   "hdnAllDiscount"    string
    [162]   "hdnAllTax" string
    [163]   "hdnUrgentRateApplied"  string
    [164]   "hdnAllDiscountFocusOut"    string
    [165]   "isNetAmountInDecimal"  string
    [166]   "hdnRecompTax"  string
    [167]   "hdnRecompDiscount" string
    [168]   "hdnCustCode"   string
    [169]   "hdnTaxAmtRecomp"   string
    [170]   "hdnDisAmtRecomp"   string
    [171]   "hdnBalance"    string
    [172]   "hdnTotal"  string
    [173]   "hdnDiscountValue"  string
    [174]   "hdnGrdRowCount"    string
    [175]   "hdnAllGridData"    string
    [176]   "hiddenInputToUpdateATBuffer_CommonToolkitScripts"  string 
```

它只包含网格标题的数据（那些带有 的值`grdEntry$ctl01$txtQty`，而不是行的数据。但是，我找到了解决方法，将所有变量存储在一个临时数组中并将其传递给服务器，工作完成了！
感谢您的努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:04:17.870

首先，“id”属性不会在回发时被发送回服务器，这就是“name”属性的用途。其次，您需要在 Request.Form（用于发布）或 Request.QueryString（用于获取）集合中查找您的数据，因为它们不会绑定到控件。ASP .net 必须参与控件的实例化，当您在 javascript 中创建它们时，它们不会神奇地存在于回发中。

# html - 如何将 CSS 复制到 Chrome 中的另一个选项卡？

> ID：12530217
> 
> 赞同：1
> 
> 时间：2012-09-21T12:01:24.290
> 
> 标签：html, css, google-chrome, copy, google-chrome-devtools

在 Chrome 中，我可以使用*Developer Tools*窗口将实时网页的 HTML 从一个选项卡复制到另一个选项卡，方法是查询`escape(document.documentElement.innerHTML)`、将结果复制粘贴到另一个选项卡的*Developer Tools*窗口、在那里创建一个新元素并设置它的`.innerHTML`. 但是，这不会复制 CSS 或事件处理程序。我不关心 JavaScript 和事件处理程序，但我想复制 HTML 和 CSS。什么是最简单但最忠实的方法？我对 Google Chrome 最感兴趣，但我会考虑在 Firefox 中也可以使用的解决方案。

我知道我可以遍历`<link ...>`and`<style ...>`标记并复制它们，但这有点间接。我想复制页面实际 CSS 的连接的最终版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:24:54.890

您可以选择原始页面中的元素，然后在“样式”窗格中拖动选择并复制其所有 CSS，然后将其粘贴到目标页面的样式表中。到目前为止，没有更好的方法。

如果您对它如何以其他方式工作有任何想法，请在[http://new.crbug.com](http://new.crbug.com)提交功能请求（以“DevTools：”开头的摘要以获得更快的问题分类）。

# azure - 部署到 Azure 网站可能需要数小时才能上线

> ID：12530218
> 
> 赞同：3
> 
> 时间：2012-09-21T12:01:26.290
> 
> 标签：azure, visual-studio-2012, azure-web-app-service, azure-deployment, azure-git-deployment

我刚刚开始使用 Azure 网站来托管我正在开发的网站之一。到目前为止一切都非常顺利，但我意识到当我们更新我们的网站时，有时该更新会立即可用，但通常可能需要几个小时才能使更改生效。

我尝试通过 Visual Studio 2012 中的发布工具和使用 将 Git 存储库推送到网站来进行部署`git push azure master`，并且都遇到了相同的延迟。当我推送更新时，正确的提交会立即显示在 Azure 管理门户中，但更改直到数小时后才会对网站产生影响。那里似乎有某种缓存，这很烦人。

我运行一个共享网站实例（不是免费的），如果这有什么不同的话。

我在 MSDN 上读过[这篇文章](http://social.msdn.microsoft.com/Forums/sv-SE/windowsazuredevelopment/thread/03f255d2-129c-4037-b3c4-df77729ee9d3)，似乎是相关的，但该线程没有提供解决方案，而且我无法追踪任何其他信息。

这是一个已知的错误，有什么办法可以绕过它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T12:52:07.717

在门户中停止和启动网站。在启动网站之前，请确保网站已离线。我遇到了类似的问题，它似乎正在缓存网站，并且在上传后没有应用更改。这似乎为我解决了这个问题。

# javascript - 如何获取当前光标位置及其在 textarea 中的行号？

> ID：12530221
> 
> 赞同：-3
> 
> 时间：2012-09-21T12:01:28.933
> 
> 标签：javascript, jquery

我需要光标在textarea中的位置，如果用户按回车键（返回）它应该给我光标位置（textarea中的行号）？我想验证 textarea 中的 75 个字符（单行中的 15 个字符 - 总行数必须为 5 用户不应在此之后按 Enter（返回））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:35:26.073

```
function getCaret(el) {
  if (el.selectionStart) {
    return el.selectionStart;
  } else if (document.selection) {
    el.focus();

    var r = document.selection.createRange();
    if (r == null) {
      return 0;
    }

    var re = el.createTextRange(),
        rc = re.duplicate();
    re.moveToBookmark(r.getBookmark());
    rc.setEndPoint('EndToStart', re);

    return rc.text.length;
  } 
  return 0;
} 
```

# vbscript - 尝试使用 VBScript 访问 powerpoint 并在幻灯片中添加文本

> ID：12530222
> 
> 赞同：-3
> 
> 时间：2012-09-21T12:01:29.970
> 
> 标签：vbscript, ms-office, powerpoint

任何人都可以将代码发送给我，如何使用 vbscript 在现有的 power point 中添加文本？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:05:21.357

检查这些文章中的一些指针：

[如何使用 Visual Basic 自动化 PowerPoint - Microsoft 支持 Microsoft Kb kb/555191](http://support.microsoft.com/kb/222929)

[使用 VBA 自动化 Powerpoint 演示](http://www.mahipalreddy.com/vba/ppvba.htm)

代码的基础是这样的：

```
Dim oPPt, oPPs
Set oPPt = CreateObject("PowerPoint.application")
oPPt.Visible = True
' Assuming your adding it to an existing powerpoint : '
Dim sPPtFile: sPPtFile = "C:\yourPowerpoint.pptx"
Set oPPs = oPPt.Presentations.Open(sPPtFile)

Dim oSlide
Set oSlide = oPPs.Slides.Add(1, 2)
oSlide.Shapes(1).TextFrame.TextRange.Text = "My first slide "

oPPTFile.SaveAs "C:\yourPowerpointUpdated.pptx" 
oPPt.quit
set oPPt = nothing 
```

# android - 异步任务类不适用于较新的 Android 版本

> ID：12530225
> 
> 赞同：1
> 
> 时间：2012-09-21T12:01:41.217
> 
> 标签：android, android-layout, android-intent

我想解析 xml，所以我编写了代码，它可以工作到 2.3，但在最新版本上它不起作用，所以我阅读了 asynctask 并修改了我的代码，但我的 imageview 仍然是空白的，我在 logcat 上没有收到任何错误，这意味着有Asynctask 的实施中的问题。

```
{
    setContentView(R.layout.actionbar);
    String URL = "http://ws.audioscrobbler.com/2.0/?method=artist.search&artist=ricky_martin&api_key=97855e265470056987425832aa9aa81&limit=" + 1 + "&page=" + 1;
    new FetchXMLAsyncTask().execute(URL);
    icon = (ImageView) findViewById(R.id.icon);
}

class FetchXMLAsyncTask extends AsyncTask<String, Void, Void> {
    String name;
    @Override
    protected Void doInBackground(String... params) {
        try {
            // TODO Auto-generated method stub
            final String Artist = "artist";
            final String KEY_NAME = "name";
            final String API = "b25b959554ed76058ac220b7b2e0a026";
            final String KEY_IMAGE ="image";
            //final String KEY_COST = "cost";
            //final String KEY_DESC = "description";
            String URL = params[0]; 
            XmlParser parser = new XmlParser();
            String xml = parser.getXmlFromUrl(URL); // getting XML
            Document doc = parser.getDomElement(xml); // getting DOM element
            XPathFactory xPathfactory = XPathFactory.newInstance();
            XPath xpath = xPathfactory.newXPath();
            XPathExpression expr;
            expr = xpath.compile("//image[@size=\"large\"]");
            NodeList nl = (NodeList) expr.evaluate(doc, XPathConstants.NODESET);
            // looping through all item nodes <item>
            for (int i = 0; i < nl.getLength(); i++) {
                Element e = (Element) nl.item(i);
                String name = parser.getValue(e, KEY_NAME);// name child value
                image = parser.getValue(e, KEY_IMAGE);
                // Toast.makeText(this, "name"+name+"url"+image, Toast.LENGTH_SHORT).show();
            } }catch (XPathExpressionException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        return null;
    }
    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        //do something after parsing is done
        URL thumb_u;
        try {
            thumb_u = new URL(image);
            Drawable thumb_d = Drawable.createFromStream(thumb_u.openStream(), "src");
            icon.setImageDrawable(thumb_d);
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T08:23:02.037

默认情况下，每次启动 Honeycomb AsyncTasks。也许您还有其他任务未完成并阻止该任务运行（新任务正在等待旧任务完成，因为它不会并行运行）。

启动 android 3.0 你应该在 THREAD_POOL_EXECUTOR 中启动任务

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, params);
} else {
    task.execute(params);
} 
```

# actionscript-3 - 多人游戏的最佳方法

> ID：12530227
> 
> 赞同：0
> 
> 时间：2012-09-21T12:01:46.227
> 
> 标签：actionscript-3, apache-flex

我开始在 flex/as3 中开发多人游戏。目前我滥用`HTTPService`类在回合制游戏中向服务器发出请求。我不知道使用这个组件是否可以。

如果我需要制作大型多人游戏怎么办？

我可以就这些问题提供一些提示吗？像最佳方法、组件等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:15:53.410

WebSockets，虽然它们似乎是所有程序员滥用的新锤子，但在多人游戏中使用它是完全有意义的，目前有许多使用 TCP 协议的解决方案，尽管使用 UDP 会更有利：

“UDP 确实比 TCP 快，原因很简单，因为它是不存在的确认数据包 (ACK) 允许连续的数据包流，而不是 TCP 确认一组数据包，通过使用 TCP 窗口大小和舍入来计算 -行程时间（RTT）。”

您仍然可以使用任何可用的 TCP 并不是必需的（尽管性能较低的性能将比持续的 HTTP 请求高 100 倍），并且将利用 HTTP 的许多优势（对象序列化 {不再是讨厌的 XML}）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:04:21.683

您还可以使用 Flash [Remoting](http://www.silexlabs.org/amfphp/)和[Flash Media Server](http://www.adobe.com/products/flash-media-server-family.html)（或[类似软件](https://stackoverflow.com/questions/190802/alternatives-to-flash-media-server-for-multiplayer-game-development)）来更有效地与服务器通信。

# java - 我的jsp代码中没有定义jquery

> ID：12530228
> 
> 赞同：0
> 
> 时间：2012-09-21T12:01:46.540
> 
> 标签：java, javascript, jquery, jsp

我的 jsp**中没有定义 jQuery 。**错误在这里：

> "jQuery('#Frame').animate360({"

在以下代码中：

```
<body>
<script type="text/javascript">
    window.onload = function () {
        jQuery('#Frame').animate360({
            centerInWindow: true,
            xmlPath: '/',
            objPath: 'Images/',
            iconPath: 'HTML5/Images/'
        });
    };
</script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:23:03.460

这里可能会出现很多问题。我会建议回到基础，以确保 jQuery 首先被正确加载。

1.  下载`jquery.js`地址：[https ://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js)
2.  放入`jquery.js`与您的 JSP 相同的文件夹中。
3.  将上面的代码更新为：

    ```
    <body>
    <script src="jquery.js"></script>
    <script type="text/javascript">
        if (typeof jQuery != 'undefined') {
            alert("jQuery library is loaded!");
        } else {
            alert("jQuery library is not found!");
        }
    </script>
    </body> 
    ```

来源：[http ://www.mkyong.com/jquery/how-to-check-if-jquery-library-is-loaded/](http://www.mkyong.com/jquery/how-to-check-if-jquery-library-is-loaded/)

一旦您确定 jQuery 正在工作，您就可以更改加载它的位置，例如：

`<script type="text/javascript" src="HTML5/jQuery.js"></script>`

如果继续得到“jQuery 库已加载！” 消息然后你可以放回你的 window.onload 分配。

# android - android parse xml 有很多同名的节点

> ID：12530232
> 
> 赞同：0
> 
> 时间：2012-09-21T12:01:52.043
> 
> 标签：android, xml, nodes

我有一个这样的xml：

```
<dict>
    <key>id</key>
    <string><![CDATA[ 1 ]]></string>
    <key>posizione</key>
    <string><![CDATA[ 1 ]]></string>
    <key>id_parent</key>
    <string><![CDATA[ 0 ]]></string>
    <key>prodotto</key>
    <string><![CDATA[ Caduta temporanea ]]></string>
</dict>
<dict>
    <key>id</key>
    <string><![CDATA[ 1 ]]></string>
    <key>posizione</key>
    <string><![CDATA[ 1 ]]></string>
    <key>id_parent</key>
    <string><![CDATA[ 0 ]]></string>
    <key>prodotto</key>
    <string><![CDATA[ Caduta temporanea ]]></string>
</dict> 
```

我如何解析这个以获得每个的简单字符串？通常，我使用这种方法：[带有 cdata 的 Android xml 只返回](https://stackoverflow.com/questions/12527477/android-xml-with-cdata-return-nothing) 这个，我只获得前几个

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:37:55.400

使用下面的代码使用 Dom Parser 解析相同的标签。

```
public class DomParserSampleActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ScrollView mScrView1 = new ScrollView(this);

        /** Create a new layout to display the view */
        LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(1);

        /** Create a new textview array to display the results */
        TextView id[];
        TextView published[];
        TextView content[];
        TextView title[];

        TextView mediacontent[];
        TextView mediathumbnail[];

        try {
            URL url = new URL("URL_OF_XML_FILE");
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc = db.parse(new InputSource(url.openStream()));
            doc.getDocumentElement().normalize();

            NodeList nodeList = doc.getElementsByTagName("dict");

            /** Assign textview array length by arraylist size */
            firstkey = new TextView[nodeList.getLength()];
            secondkey = new TextView[nodeList.getLength()];
            thirdkey = new TextView[nodeList.getLength()];
            fourthkey = new TextView[nodeList.getLength()];

            for (int i = 0; i < nodeList.getLength(); i++) {

                Node node = nodeList.item(i);

                firstkey[i] = new TextView(this);
                secondkey[i] = new TextView(this);
                thirdkey[i] = new TextView(this);
                fourthkey[i] = new TextView(this);

                Element fstElmnt = (Element) node;

                NodeList keyList = fstElmnt.getElementsByTagName("key");
                Element keyElement = (Element) keyList.item(0);
                keyList = keyElement.getChildNodes();
                firstkey[i].setText("key is = "
                        + ((Node) keyList.item(0)).getNodeValue());
                secondkey[i].setText("key is = "
                        + ((Node) keyList.item(1)).getNodeValue());
                thirdkey[i].setText("key is = "
                        + ((Node) keyList.item(2)).getNodeValue());
                fourthkey[i].setText("key is = "
                        + ((Node) keyList.item(3)).getNodeValue());

                layout.addView(firstkey[i]); 
                layout.addView(secondkey[i]); 
                layout.addView(thirdkey[i]); 
                layout.addView(fourthkey[i]);    
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        /** Set the layout view to display */

        mScrView1.addView(layout);
        setContentView(mScrView1);
    }
} 
```

# javascript - 带有硒的 Javascript

> ID：12530237
> 
> 赞同：-1
> 
> 时间：2012-09-21T12:01:59.307
> 
> 标签：javascript, python, selenium

我有一个使用`jquery.treeview.js`多个嵌套分支的站点。每个分支都有一个 javascript 按钮：

```
<a href="javascript:void(0);" id="show_link" class="show_links" onclick="$(this).parent().children('div#data_316')
.load('keyword_browse_ajax.php', {keyword_id:316,lp:'et',mode:'ajax'}); $(this).parent().children('div#data_316').toggle(); $(this)
.parent().children('a#hide_link').toggle(); $(this).toggle();" style="display: none; "><img src="http://pic.gif" alt="show"></a> 
```

还有一个“空”的 div：

```
<div id="data_316" style="background: whitesmoke; display: none; margin: 0px 0px 10px 0px; padding: 5px; line-height:150%;"></div> 
```

在“显示链接”点击中填充：

```
<div id="data_316" style="background-color: rgb(245, 245, 245); margin: 0px 0px 10px; padding: 5px; line-height: 150%;
background-position: initial initial; background-repeat: initial initial; ">
Name O.;
 <a href="link.php" target="_blank">text1</a>; 1993, nr 1, p 1-20<br>
Name T.;
 <a href="link.php" target="_blank">text2</a>; 1994, nr 1, p 1-20<br>
</div> 
```

Selenium 有没有办法解开树，这样我就可以抓取新填充的 div 内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:51:13.127

由于我是 selenium 的新手，因此需要进行一些测试才能开始，但这很简单：

```
from selenium import webdriver

browser = webdriver.Chrome() # Get local session of Chrome
browser.get("http://www.somepage.com") # Load page

elem = browser.find_element_by_id("show_links") # Find javascript button
elem.click() # Click on the button that 'populates the div' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T09:30:25.443

第1步：

使用给定的信息以防万一我们需要使用下面给出的特定 CSS 选择器，如下所示

显示链接的 CSS 选择器：

css=#show_link > img[src*='pic.gif']

然后使用下面给出的方法执行单击上面的css，如下所示

driver.find_element_by_css_selector("#show_link > img[src*='pic.gif']").click()

# assembly - 当必须首先将偏移量添加到内存地址时，是否需要额外的周期来取消引用内存地址？

> ID：12530240
> 
> 赞同：2
> 
> 时间：2012-09-21T12:02:00.937
> 
> 标签：assembly, x86

是否`mov 0x10(%esp),%esi`需要比`mov (%ebx),%esi`现代 CPU 更多的时间来完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T12:34:42.233

根据 Intel 的优化手册表 2-8，在 Sandy Bridge 上，仅基址寄存器或基址加偏移量小于 2048 的加载延迟为 4 个周期，而基址加索引加偏移量或基址加偏移量为2048 或更大是 5 个周期。因此，在您的示例中，这两条指令应该花费相同的时间。如果您使用 2048 或更大的偏移量，则需要更长的时间。

当然，如果内存不在您的 L1 缓存中，这并不重要，因为内存访问的成本将使其他一切的成本相形见绌。

# javascript - 在tinymce编辑器中选择文本

> ID：12530243
> 
> 赞同：0
> 
> 时间：2012-09-21T12:02:06.960
> 
> 标签：javascript, tinymce

我正在尝试在我的网站中添加搜索功能。我想在tinymce编辑器中搜索内容并在找到匹配项时选择它们。

如果匹配，我该如何选择文本。如果有人知道请回复 ![在此处输入图像描述](../Images/fa9ccdbc869c3d2b4838a479aa1af6fc.png)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-21T12:34:59.447

这并不难。最简单的事情是看一下 searchreplace 插件的 searchNext-function（我将添加下面的代码）。

插件代码在 tinymce 弹出上下文中执行，因此您需要对其进行一些调整。以下是您需要提前设置的变量以使该功能正常工作：

```
var ed = tinymce.get('your_editor_id');
var se = ed.selection;
var r = se.getRng();
// var m = this.lastMode; // not needed here
var fl = 0;
var w = ed.getWin();
var wm = ed.windowManager;
var fo = 0;
//var f = document.forms[0];  //not needed here (plugin relevant)
var s = 'word_to_be_searched_for';
var b = 0; // direction of the search (forward=0, backward = 1)
var ca = 0; // casesensitiviy of the search (not casesensitive = 0, casesensitive = 1)
var rs = ''; // possibility to use a string to replace found text 
```

这是功能：

```
searchNext : function(a) {
    var ed = tinyMCEPopup.editor, se = ed.selection, r = se.getRng(), f, m = this.lastMode, s, b, fl = 0, w = ed.getWin(), wm = ed.windowManager, fo = 0, err = 0;

    // Get input
    f = document.forms[0];
    s = f[m + '_panel_searchstring'].value;
    b = f[m + '_panel_backwardsu'].checked;
    ca = f[m + '_panel_casesensitivebox'].checked;
    rs = f['replace_panel_replacestring'].value;

    if (tinymce.isIE) {
        r = ed.getDoc().selection.createRange();
    }

    if (s == '')
        return;

    function fix() {
        // Correct Firefox graphics glitches
        // TODO: Verify if this is actually needed any more, maybe it was for very old FF versions? 
        r = se.getRng().cloneRange();
        ed.getDoc().execCommand('SelectAll', false, null);
        se.setRng(r);
    };

    function replace() {
        ed.selection.setContent(rs); // Needs to be duplicated due to selection bug in IE
    };

    // IE flags
    if (ca)
        fl = fl | 4;

    switch (a) {
        case 'all':
            // Move caret to beginning of text
            ed.execCommand('SelectAll');
            ed.selection.collapse(true);

            if (tinymce.isIE) {
                ed.focus();
                r = ed.getDoc().selection.createRange();

                while (r.findText(s, b ? 1 : 1, fl)) {
                    r.scrollIntoView();
                    r.select();
                    replace();
                    fo = 1;

                    if (b) {
                        r.moveEnd("character", -(rs.length)); // Otherwise will loop forever
                    }
                }

                tinyMCEPopup.storeSelection();
            } else {
                while (w.find(s, ca, b ? 0 : 0, false, false, false, false)) {
                    replace();
                    fo = 1;
                }
            }

            if (fo)
                tinyMCEPopup.alert(ed.getLang('searchreplace_dlg.allreplaced'));
            else
                tinyMCEPopup.alert(ed.getLang('searchreplace_dlg.notfound'));

            return;

        case 'current':
            if (!ed.selection.isCollapsed())
                replace();

            break;
    }

    se.collapse(b);
    r = se.getRng();

    // Whats the point
    if (!s)
        return;

    if (tinymce.isIE) {
        ed.focus();
        r = ed.getDoc().selection.createRange();

        if (r.findText(s, b ? -1 : 1, fl)) {
            r.scrollIntoView();
            r.select();
        } else
        {
            err = 1;
            tinyMCEPopup.alert(ed.getLang('searchreplace_dlg.notfound'));
        }
        tinyMCEPopup.storeSelection();
    } else {
        if (!w.find(s, ca, b, false, false, false, false))
        {
            err = 1;
            tinyMCEPopup.alert(ed.getLang('searchreplace_dlg.notfound'));
        }
        else
            fix();
    }

    // Focus input field if search yieled no error
    if (!err && !tinymce.isIE) {
        f[m + '_panel_searchstring'].focus();
    }
} 
```

# jakarta-ee - 如何重置弹出窗口中选择的选项卡？

> ID：12530246
> 
> 赞同：1
> 
> 时间：2012-09-21T12:02:21.013
> 
> 标签：jakarta-ee, jsf-2, primefaces

当我打开弹出窗口并更改所选选项卡时，如果我关闭此弹出窗口并再次打开相同的所选选项卡。

此弹出窗口打开时如何始终重置？

在第二个屏幕截图中避免双电梯的最佳解决方案是什么？

查看代码：

```
 <p:dialog id="dialog" rendered="true"
            header="#{gestSoftware.action} Configuration des produits"
            widgetVar="confProd" resizable="false" showEffect="clip"
            hideEffect="fold">

            <h:panelGrid id="display" columns="2" cellpadding="4">

                <p:layout style="min-width:900px;min-height:600px;" id="layout">

                    <p:layoutUnit position="north" style="text-align:center;">

                        <p:panelGrid>
                            <p:row>
                                <p:column styleClass="ui-widget-header"
                                    style="text-align:center"><h:outputText value="Reference"/></p:column>
                                <p:column styleClass="ui-widget-header"
                                    style="text-align:center"><h:outputText value="Indice Majeur"/></p:column>
                                <p:column styleClass="ui-widget-header"
                                    style="text-align:center"><h:outputText value="Indice Mineur"/></p:column>
                                <p:column styleClass="ui-widget-header"
                                    style="text-align:center" colspan="2"><h:outputText value="Modele"/></p:column>
                            </p:row>
                            <p:row>

                                <p:column>
                                    <p:inputText
                                        value="#{gestConfigurationProductBean.referenceConfProduct}" />
                                </p:column>

                                <p:column>
                                    <p:inputText
                                        value="#{gestConfigurationProductBean.majorIndexConfProduct}" />
                                </p:column>
                                <p:column>
                                    <p:inputText
                                        value="#{gestConfigurationProductBean.minorIndexConfProduct}" />
                                </p:column>
                                <p:column colspan="2">
                                    <p:selectOneMenu
                                        value="#{gestConfigurationProductBean.selectedProductConfModel}">

                                        <f:selectItems
                                            value="#{gestConfigurationProductBean.productConfModelList}"
                                            var="productConf" itemLabel="#{productConf.reference}"
                                            itemValue="#{productConf}" />
                                        <f:converter converterId="productConfModelConverter" />
                                    </p:selectOneMenu>
                                </p:column>

                            </p:row>

                            <p:row>

                                <p:column styleClass="ui-widget-header"
                                    style="text-align:center"><h:outputText value="Identifiable"/></p:column>
                                <p:column styleClass="ui-widget-header"
                                    style="text-align:center"><h:outputText value="Etat"/></p:column>
                                <p:column styleClass="ui-widget-header"
                                    style="text-align:center"><h:outputText value="Famille"/></p:column>
                                <p:column styleClass="ui-widget-header"
                                    style="text-align:center"><h:outputText value="Alimentation"/></p:column>
                                <p:column styleClass="ui-widget-header"
                                    style="text-align:center"><h:outputText value="Fiche Suiveuse"/></p:column>
                            </p:row>

                            <p:row>

                                <p:column>
                                    <p:selectBooleanCheckbox
                                        value="#{gestConfigurationProductBean.identifiableConfProduct}" />
                                </p:column>

                                <p:column>
                                    <p:selectOneMenu
                                        value="#{gestConfigurationProductBean.stateConfProduct}">
                                        <f:selectItem itemLabel="actif" itemValue="1" />
                                        <f:selectItem itemLabel="inactif" itemValue="0" />

                                    </p:selectOneMenu>
                                </p:column>
                                <p:column>
                                    <p:selectOneMenu
                                        value="#{gestConfigurationProductBean.selectedProductFamily}">

                                        <f:selectItems
                                            value="#{gestConfigurationProductBean.productFamilyList}"
                                            var="productFam" itemLabel="#{productFam.name}"
                                            itemValue="#{productFam}" />
                                        <f:converter
                                            converterId="configurationProductFamilyConverter" />
                                    </p:selectOneMenu>
                                </p:column>
                                <p:column>
                                    <p:selectOneMenu
                                        value="#{gestConfigurationProductBean.selectedProductSupply}">
                                        <f:selectItem itemLabel="" itemValue="" />
                                        <f:selectItems
                                            value="#{gestConfigurationProductBean.productSupplyList}"
                                            var="productSupply" itemLabel="#{productSupply.name}"
                                            itemValue="#{productSupply}" />
                                        <f:converter converterId="productSupplyConverter" />
                                    </p:selectOneMenu>
                                </p:column>

                                <p:column>
                                    <p:selectOneMenu
                                        value="#{gestConfigurationProductBean.selectedFollowingFormModel}">
                                        <f:selectItem itemLabel="" itemValue="" />
                                        <f:selectItems
                                            value="#{gestConfigurationProductBean.followingFormModelList}"
                                            var="follFormModel" itemLabel="#{follFormModel.name}"
                                            itemValue="#{follFormModel}" />
                                        <f:converter converterId="followingFormModelConverter" />
                                    </p:selectOneMenu>
                                </p:column>

                            </p:row>
                        </p:panelGrid>

                    </p:layoutUnit>

                    <p:layoutUnit position="center" size="200px">
                        <p:tabView id="tabViewElement" dynamic="true" activeIndex="0">
                            <p:ajax event="tabChange"
                                Listener="#{gestConfigurationProductBean.onTabChange}"
                                update="tabViewElement" />

                            <p:tab id="idTabElementView" title="Elements Sectionnes">

                                <p:scrollPanel style="width:100%;height:100%">
                                    <p:dataTable id="productConfs" var="productConf"
                                        value="#{gestConfigurationProductBean.productConfsList}"
                                        rowKey="#{productConf.idProductConf}">

                                        <f:facet name="header">
                                            <h:outputText value="ELEMENTS" />
                                        </f:facet>

                                        <p:column headerText="Reference">
                                            <h:outputText value="#{productConf.reference}" />
                                        </p:column>

                                        <p:column headerText="Indice majeur">
                                            <h:outputText value="#{productConf.majorIndex}" />
                                        </p:column>

                                        <p:column headerText="Indice majeur">
                                            <h:outputText value="#{productConf.minorIndex}" />
                                        </p:column>

                                        <p:column headerText="Designation">
                                            <h:outputText
                                                value="#{productConf.productConfModel.reference}" />
                                        </p:column>

                                        <p:column headerText="Identifiable">
                                            <p:selectBooleanCheckbox disabled="true"
                                                value="#{productConf.identifiable}" />
                                        </p:column>

                                    </p:dataTable>
                                </p:scrollPanel>
                            </p:tab>

                            <p:tab id="tabSelectedElement" style="padding:none"
                                title="Choisir Elements">
                                <p:scrollPanel style="width:100%;height:100%">
                                    <p:dataTable id="cardsElements" var="cardElement"
                                        value="#{gestConfigurationProductBean.cardElementList}"
                                        rowKey="#{cardElement.idProductConf}"
                                        selection="#{gestConfigurationProductBean.selectedElement}"
                                        selectionMode="single">

                                        <f:facet name="header">
                                            <h:outputText value="ELEMENTS" />
                                        </f:facet>

                                        <p:column headerText="Selection">
                                            <p:selectBooleanCheckbox
                                                value="#{cardElement.selectedElement}">
                                                <p:ajax
                                                    listener="#{gestConfigurationProductBean.checkBoxElement}" />
                                            </p:selectBooleanCheckbox>
                                        </p:column>

                                        <p:column headerText="Reference">
                                            <h:outputText value="#{cardElement.reference}" />
                                        </p:column>

                                        <p:column headerText="Indice majeur">
                                            <h:outputText value="#{cardElement.majorIndex}" />
                                        </p:column>

                                        <p:column headerText="Indice majeur">
                                            <h:outputText value="#{cardElement.minorIndex}" />
                                        </p:column>

                                        <p:column headerText="Designation">
                                            <h:outputText
                                                value="#{cardElement.productConfModel.reference}" />
                                        </p:column>

                                        <p:column headerText="Identifiable">
                                            <p:selectBooleanCheckbox disabled="true"
                                                value="#{cardElement.identifiable}" />
                                        </p:column>
                                    </p:dataTable>
                                </p:scrollPanel>
                            </p:tab>
                        </p:tabView>
                    </p:layoutUnit>

                    <p:layoutUnit position="south" style="margin-top:10px;">
                        <p:tabView id="softwareTabView">
                            <p:ajax event="tabChange"
                                Listener="#{gestConfigurationProductBean.onTabChange}"
                                update="softwareTabView" />
                            <p:tab id="idSoftwareView" title="Logiciels selectionnes">
                                <p:scrollPanel style="width:100%;height:100%">
                                    <p:dataTable id="softwares" var="software"
                                        value="#{gestConfigurationProductBean.softwareList}"
                                        rowKey="#{software.idSoftware}">

                                        <f:facet name="header">
                                            <h:outputText value="LOGICIELS" />
                                        </f:facet>

                                        <p:column headerText="Nom">
                                            <h:outputText value="#{software.name}" />
                                        </p:column>

                                        <p:column headerText="Version">
                                            <h:outputText value="#{software.version}" />
                                        </p:column>

                                    </p:dataTable>
                                </p:scrollPanel>
                            </p:tab>

                            <p:tab id="idSelectedSoftwareView" title="Choisir Logiciels"
                                height="100%">
                                <p:scrollPanel style="width:100%;height:100%">
                                    <p:dataTable id="softwaresSelected" var="softwareSelected"
                                        value="#{gestConfigurationProductBean.softwareElementList}"
                                        rowKey="#{softwareSelected.idSoftware}">

                                        <f:facet name="header">
                                            <h:outputText value="LOGICIELS" />
                                        </f:facet>

                                        <p:column headerText="Selection">
                                            <p:selectBooleanCheckbox
                                                value="#{softwareSelected.selectedSoftware}">
                                                <p:ajax
                                                    listener="#{gestConfigurationProductBean.checkBoxSoftware}" />
                                            </p:selectBooleanCheckbox>
                                        </p:column>
                                        <p:column headerText="Nom">
                                            <h:outputText value="#{softwareSelected.name}" />
                                        </p:column>

                                        <p:column headerText="Version">
                                            <h:outputText value="#{softwareSelected.version}" />
                                        </p:column>
                                    </p:dataTable>
                                </p:scrollPanel>
                            </p:tab>
                        </p:tabView>
                    </p:layoutUnit>
                </p:layout>
            </h:panelGrid>
            <h:panelGrid columns="2">
                <p:commandButton value="Editer"
                    actionListener="#{gestConfigurationProductBean.buttonForm}"
                    update="message,productConfModels" />

                <p:commandButton value="Annuler"
                    actionListener="#{gestConfigurationProductBean.quit}" />
            </h:panelGrid>
        </p:dialog> 
```

![在此处输入图像描述](../Images/975766c4d42dfbe34861d15fb2f54e4f.png) ![在此处输入图像描述](../Images/8530a8b18a256868a2577847cb680ab8.png)

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:00:41.643

要确保在打开对话框时选择了选项卡，您可以使用`onShow`对话框的属性。

```
<p:dialog onShow="tabview.select(1)">
    <p:tabView widgetVar="tabview">
        <p:tab>
            This is tab 1
        </p:tab>
        <p:tab>
            This is tab 2
        </p:tab>
    </p:tabView>
</p:dialog> 
```

# algorithm - 限制每个时间段的事件数

> ID：12530252
> 
> 赞同：10
> 
> 时间：2012-09-21T12:03:11.780
> 
> 标签：algorithm, rate-limiting

我需要限制时间段*deltaT期间允许的事件数**n*。我能想到的任何方法，空间都是*O(m)*，其中*m是每个**deltaT*或*O(deltaT/r)*发送的最大事件请求数，其中*r*是可接受的分辨率。

 ***编辑：deltaT 是相对于时间戳的滑动时间窗口。

例如：保持事件时间戳的循环缓冲区。在事件裁剪所有比*t-deltaT*更早的时间戳。如果时间戳数超过*n*则拒绝事件。将时间戳添加到缓冲区。

*或者，初始化一个大小为deltaT/r*的整数的循环桶缓冲区，该缓冲区按相对于当前分辨率*r*的时间进行索引。维护指针*i*。*发生事件时， i*自上次事件以来的时间除以*r*递增。将原始*i*和新 i 之间的缓冲区归零。在*i*处增加。拒绝，如果错误的总和超过*n*。

有什么更好的方法？

* * *

我刚刚在 c# 中实现了我上面的第二个建议，固定*deltaT*为 1 s，固定分辨率为 10 ms。

```
public class EventCap
{
    private const int RES = 10; //resolution in ms

    private int _max;
    private readonly int[] _tsBuffer;
    private int p = 0;
    private DateTime? _lastEventTime;
    private int _length = 1000 / RES;

    public EventCap(int max)
    {
        _max = max;

        _tsBuffer = new int[_length];
    }

    public EventCap()
    {
    }

    public bool Request(DateTime timeStamp)
    {
        if (_max <= 0)
            return true;

        if (!_lastEventTime.HasValue)
        {
            _lastEventTime = timeStamp;
            _tsBuffer[0] = 1;
            return true;
        }

        //A
        //Mutually redundant with B
        if (timeStamp - _lastEventTime >= TimeSpan.FromSeconds(1))
        {
            _lastEventTime = timeStamp;
            Array.Clear(_tsBuffer, 0, _length);
            _tsBuffer[0] = 1;
            p = 0;
            return true;
        }

        var newP = (timeStamp - _lastEventTime.Value).Milliseconds / RES + p;

        if (newP < _length)
            Array.Clear(_tsBuffer, p + 1, newP - p);

        else if (newP > p + _length)
        {
            //B
            //Mutually redundant with A
            Array.Clear(_tsBuffer, 0, _length);
        }
        else
        {
            Array.Clear(_tsBuffer, p + 1, _length - p - 1);
            Array.Clear(_tsBuffer, 0, newP % _length);
        }

        p = newP % _length;
        _tsBuffer[p]++;
        _lastEventTime = timeStamp;

        var sum = _tsBuffer.Sum();

        return sum <= 10;
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-21T14:02:24.973

拥有这些变量怎么样：num_events_allowed、time_before、time_now、time_passed

在初始化时，您将执行以下操作：`time_before = system.timer(), num_events_allowed = n`

收到事件后，请执行以下操作：

```
 time_now = system.timer()
  time_passed = time_now - time_before
  time_before = time_now

  num_events_allowed += time_passed * (n / deltaT);

  if num_events_allowed > n 
      num_events_allowed = n

  if num_events_allowed >= 1
      let event through, num_events_allowed -= 1
  else
      ignore event 
```

这个算法的好处是 num_events_allowed 实际上是增加了自上次事件以来经过的时间以及可以接收事件的速率，这样您就可以按顺序增加每个 time_passed 可以发送的事件数保持在 n 的范围内。因此，如果您过早地收到一个事件，您会将其增加小于 1，如果它在太多时间之后您将增加超过 1。当然，如果事件通过，您将在刚刚收到事件时将津贴减 1。如果余量超过了 n 的最大事件，则将其返回到 n ，因为在任何时间阶段都不能允许超过 n 。如果配额小于1，则不能发送整个事件，不要让它通过！

这是漏桶算法：[https ://en.wikipedia.org/wiki/Leaky_bucket](https://en.wikipedia.org/wiki/Leaky_bucket)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T22:37:39.227

为每个传入请求保留滑动窗口并使其保持 O(1) + 非常小的 O(n) 的一种方法是制作一个合适大小的整数数组并将其保持为循环缓冲区并将传入请求离散化（请求为与 A/D 转换器中的采样电平集成，或者如果您是统计学家，则作为直方图集成）并跟踪循环缓冲区的总和，如下所示

```
assumptions: 
"there can be no more than 1000 request per minute" and 
"we discretize on every second"

int[] buffer = new zeroed int-array with 60 zeroes
int request-integrator = 0 (transactional)
int discretizer-integrator = 0 (transactional)

for each request:
    check if request-integrator < 1000 then
         // the following incs could be placed outside 
         // the if statement for saturation on to many
         // requests (punishment)
         request-integrator++                     // important
         discretizer-integrator++
         proceed with request

once every second:                    // in a transactional memory transaction, for God's saké 
    buffer-index++
    if (buffer-index = 60) then buffer-index=0    // for that circular buffer feeling!
    request-integrator -= buffer[buffer-index]    // clean for things happening one minute ago
    buffer[buffer-index] = discretizer-integrator // save this times value
    discretizer-integrator = 0                    // resetting for next sampling period 
```

请注意，请求积分器的增加“可以”每秒只进行一次，但这会留下一个漏洞，以便在一秒钟内用 1000 个或更糟的请求饱和它，大约每分钟一次，具体取决于惩罚行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T14:19:56.463

在阅读有关该问题的各种可能解决方案时。我遇到了令牌桶算法（[http://en.wikipedia.org/wiki/Token_bucket](http://en.wikipedia.org/wiki/Token_bucket)）。如果我完全理解你的问题，你可以实现一个令牌桶算法，而实际上没有一个带有 N 个令牌的桶，而是采用一个可以相应地递增和递减的计数器。像

```
syncronized def get_token = 
    if count>0 
       { --count, return true }
    else return false

syncronized def add_token = 
    if count==N
       return;
    else ++count 
```

现在剩下的部分是在 deltaT/r 时间内重复调用 add_token。

为了使其完全线程安全，我们需要一个原子引用来计数。但是上面的代码是为了展示在 O(1) 内存中执行它的基本思想。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-28T22:50:03.553

我写了下面的类（ActionQueue）来限制函数调用的频率。一件好事是它使用计时器将事物从队列中弹出......所以CPU的使用最少（如果队列为空，甚至根本不使用）......与任何轮询类型的技术相反.

例子...

```
 // limit to two call every five seconds
    ActionQueue _actionQueue = new ActionQueue(TimeSpan.FromSeconds(5), 2);
    public void Test()
    {
        for (var i = 0; i < 10; i++)
        {
            _actionQueue.Enqueue((i2) =>
            {
                Console.WriteLineAction " + i2 + ": " + DateTime.UtcNow);
            }, i);
        }
    } 
```

现实世界的例子...

```
 ActionQueue _actionQueue = new ActionQueue(TimeSpan.FromSeconds(1), 10);

    public override void SendOrderCancelRequest(Order order, SessionID sessionID)
    {
        _actionQueue.Enqueue((state) =>
        {
            var parms = (Tuple<Order, SessionID>)state;
            base.SendOrderCancelRequest(parms.Item1, parms.Item2);
        }, new Tuple<Order, SessionID>(order, sessionID));
    }
    public override void SendOrderMassStatusRequest(SessionID sessionID)
    {
        _actionQueue.Enqueue((state) =>
        {
            var sessionID2 = (SessionID)state;
            base.SendOrderMassStatusRequest(sessionID2);
        }, sessionID);
    } 
```

实际上课...

```
public class ActionQueue
{
    private class ActionState
    {
        public Action<object> Action;
        public object State;
        public ActionState(Action<object> action, object state)
        {
            Action = action;
            State = state;
        }
    }
    Queue<ActionState> _actions = new Queue<ActionState>();
    Queue<DateTime> _times = new Queue<DateTime>();

    TimeSpan _timeSpan;
    int _maxActions;
    public ActionQueue(TimeSpan timeSpan, int maxActions)
    {
        _timeSpan = timeSpan;
        _maxActions = maxActions;           
    }
    public void Enqueue(Action<object> action, object state)
    {
        lock (_times)
        {
            _times.Enqueue(DateTime.UtcNow + _timeSpan);

            if (_times.Count <= _maxActions)
                action(state);
            else
                _actions.Enqueue(new ActionState(action, state));

            CreateDequeueTimerIfNeeded();
        }
    }

    System.Threading.Timer _dequeueTimer;
    protected void CreateDequeueTimerIfNeeded()
    {
        // if we have no timer and we do have times, create a timer
        if (_dequeueTimer == null && _times.Count > 0) 
        {
            var timeSpan = _times.Peek() - DateTime.UtcNow;
            if (timeSpan.TotalSeconds <= 0)
            {
                HandleTimesQueueChange();
            }
            else
            {
                _dequeueTimer = new System.Threading.Timer((obj) =>
                {
                    lock (_times)
                    {
                        _dequeueTimer = null;
                        HandleTimesQueueChange();
                    }
                }, null, timeSpan, System.Threading.Timeout.InfiniteTimeSpan);
            }
        }
    }

    private void HandleTimesQueueChange()
    {
        _times.Dequeue();
        while (_times.Count > 0 && _times.Peek() < DateTime.UtcNow)
            _times.Dequeue();

        while (_actions.Count > 0 && _times.Count < _maxActions)
        {
            _times.Enqueue(DateTime.UtcNow + _timeSpan);
            var actionState = _actions.Dequeue();
            actionState.Action(actionState.State);
        }

        CreateDequeueTimerIfNeeded();
    }
} 
```***

# sql - 如何使用 SQL 中的联接检索数据

> ID：12530255
> 
> 赞同：-1
> 
> 时间：2012-09-21T12:03:17.550
> 
> 标签：sql, join

我正在寻找这样的东西：

```
Table 1:

Column-A  C-B C-C
1          1   1
2          5   2
4          3   2

Table 2:

Column-D  C-E 
1          3 
7          9  
6          5  

result set:

1   1
2   5
4   3
1   3
7   9
6   5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:07:07.237

```
select columnA, C-b from table1
union all
select columnD, C-E from table2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:11:11.307

尝试这个

```
 select column1,column2 from tablename1
          union all 
          select column3,column4 from tablename2 
```

# javascript - 如何捕获浏览器关闭事件并通过 javascript 在该事件上向 Web 服务方法发出请求

> ID：12530259
> 
> 赞同：0
> 
> 时间：2012-09-21T12:03:21.997
> 
> 标签：javascript, html, javascript-events

我有一个应用程序，我正在使用我页面上的 api 通过第三方设备进行录制。录制是通过 asp.net Web 服务启动和停止的。

在正常情况下，我可以通过 javascript 开始和停止录制，并且功能在所有浏览器中都可以正常工作。

但是，有一次不小心有一位用户没有停止视频，就关闭了浏览器，在这种情况下无法停止录制..然后继续录制..

所以，请给我建议一种方法，以便我可以向服务器传递请求以在浏览器关闭时自动停止录制..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:06:34.280

你不能。

您可以使用[onBeforeUnload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)显示标准对话框或执行一些快速的非交互式操作，例如在 localStorage 中写入，但您无法发出请求（在大多数浏览器中）。

您*必须*处理浏览器关闭（或网络丢失，或任何事件）服务器端的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:11:11.813

不久前我问了这个问题来关闭弹出窗口，[这个网站](http://atashbahar.com/post/Detect-when-a-JavaScript-popup-window-gets-closed.aspx)帮助了我。

```
var win = window.open('http://www.google.com', 'google','width=800,height=600,status=0,toolbar=0'); 
var timer = setInterval(function() { 
if(win.closed) {
    clearInterval(timer);
    alert('closed');
}
}, 1000); 
```

将函数中的代码替换为您自己的代码。

祝你好运！

**编辑：**但是我必须说，我还没有在所有浏览器中尝试过这个，所以你必须测试一下。

# iphone - 如何从 App 促销网站向 iPhone 发送下载链接？

> ID：12530260
> 
> 赞同：-2
> 
> 时间：2012-09-21T12:03:21.983
> 
> 标签：iphone, ios, promotions

我想制作一个“获取应用程序”链接，以向用户 iPhone 发送下载链接。是否有任何服务可以轻松为您做到这一点？

[您可以从http://piictu.com/](http://piictu.com/)查看示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-30T23:45:32.173

您无需编写任何代码即可使用[http://linksense.io](http://linksense.io)和[http://linktexting.com 。](http://linktexting.com)

LinkSense.io 将创建一个链接来检测设备类型并将用户发送到正确的商店。

LinkTexting.com 将允许您注册 Twilio 和/或连接您的 Twilio 帐户以制作嵌入式 SMS 表单。

# android - Android - 如何使用 Asynchtask 的 onPreExecute() 方法的背景图像显示 ProgressBar

> ID：12530261
> 
> 赞同：0
> 
> 时间：2012-09-21T12:03:29.363
> 
> 标签：android, android-asynctask

我是安卓新手。我正在为我的应用程序使用 XML 解析，以及如何在单击我的应用程序时显示背景图像并在其顶部显示 ProgessBar，它会保持屏幕直到我的数据不会出现。我正在使我的应用程序像 BBC 新闻 android 应用程序一样

```
AsyncTask<Void, Void, Drawable> downloader = new AsyncTask<Void, Void, Drawable>() {

    @Override
    protected Drawable doInBackground(Void... params) {
        AndroidHttpClient client = AndroidHttpClient.newInstance(context.getPackageName());
        try {
            HttpGet get = new HttpGet(url);
            final HttpParams httpParams = new BasicHttpParams();
            HttpClientParams.setRedirecting(httpParams, true);
            get.setParams(httpParams);
            HttpResponse resp = client.execute(get);
            int status = resp.getStatusLine().getStatusCode();
            if(status != HttpURLConnection.HTTP_OK){
                //Log.i(LOGTAG, "Couldn't download image from Server: " + url + " Reason: " + resp.getStatusLine().getReasonPhrase() + " / " + status);
                return null;
            }
            HttpEntity entity = resp.getEntity();
            //Log.i(LOGTAG, url + " Image Content Length: " + entity.getContentLength());
            InputStream is = entity.getContent();
            FileOutputStream fos = context.openFileOutput(filename, Context.MODE_PRIVATE);
            copyStream(is, fos);
            fos.close();
            is.close();
            FileInputStream  fis = context.openFileInput(filename);
            return loadDrawableFromStream(context, fis);
        }
        catch (Exception ex) {
            //Log.e(LOGTAG, "Exception during Image download of " + url, ex);
            return null;
        }
        finally {
            client.close();
        }
    }

    @Override
    protected void onPostExecute(Drawable result) {
        if (result == null)
            result = defaultDrawable;
        mPendingDownloads.remove(url);
        cache.put(url, result);
        for (ImageView iv: downloads) {
            // validate the url it is waiting for
            String pendingUrl = mPendingViews.get(iv);
            if (!url.equals(pendingUrl)) {
                //Log.i(LOGTAG, "Ignoring out of date request to update view for " + url);
                continue;
            }
            mPendingViews.remove(iv);
            if (result != null) {
                final Drawable newImage = result;

                Drawable newSize=resize(newImage);

                final ImageView imageView = iv;

                imageView.setImageDrawable(newSize);
            }
        }
    }

    private BitmapDrawable resize(Drawable newImage) {
        // TODO Auto-generated method stub

        Bitmap d = ((BitmapDrawable)newImage).getBitmap();
        Bitmap bitmapOrig = Bitmap.createScaledBitmap(d, 75, 75, false);
        return new BitmapDrawable(bitmapOrig);                                              
    }
};
downloader.execute();
}

private static Hashtable<ImageView, String> mPendingViews = new Hashtable<ImageView, String>();
private static Hashtable<String, ArrayList<ImageView>> mPendingDownloads = new Hashtable<String, ArrayList<ImageView>>();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:07:43.240

```
private ProgressDialog progressDialog;

protected void onPreExecute() {
        progressDialog = ProgressDialog.show(context, "", context.getResources().getString(R.string.searching_wait_message), true);
}
protected void onPostExecute(Vector<SearchResult> result) {
    progressDialog.dismiss();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:41:29.647

异步任务：

```
private ProgressDialog mDialog;

Override
protected void onPreExecute() {
     mDialog = new ProgressDialog(...);
     mDialog.setContentView(R.layout.dialog_layout);

     // define your mDialog object further...

     mDialog.show()
}

@Override
protected Drawable doInBackground(...) {
     // do stuff
}

@Override
protected void onPostExecute(...) {
     mDialog.dismiss();
} 
```

dialog_layout.xml（伪）

```
<LinearLayout
     background=...>

     <ProgressBar />

</LinearLayout> 
```

# git - Git rebase 问题 - 我应该“推 --force origin”

> ID：12530262
> 
> 赞同：1
> 
> 时间：2012-09-21T12:03:33.377
> 
> 标签：git

我似乎搞砸了我的 git 存储库，可能是犯了“不要对已推送到公共存储库的提交进行变基”的罪过。

场景是这样的：

*   我在我的 master 分支中跟踪来自上游存储库的更改，我将自己的更改保存在一个名为 devel 的分支中。
*   当上游存储库发生更改时，我将其拉入主分支。
*   然后我结帐开发并`rebase master`对其进行操作，以在主分支之上进行我自己的更改。这会导致冲突，在几次提交时会出现以下错误消息（我在下面仅包括其中一个作为示例）：

> 回退到修补基础和 3 路合并... 自动合并 public/scala/qscript/org/broadinstitute/sting/queue/qscripts/AlignWithBWA.scala CONFLICT（内容）：在 public/scala/qscript/org 中合并冲突/broadinstitute/sting/queue/qscripts/AlignWithBWA.scala 未能合并更改。补丁在 0038 失败 添加了对索引文件的检查。
> 
> 解决此问题后，运行“git rebase --continue”。如果您希望跳过此补丁，请运行“git rebase --skip”。要检查原始分支并停止变基，请运行“git rebase --abort”。

*   然后我使用`git rebase --skip`跳过导致问题的提交，最后得到我想要的代码。

现在，问题是，*每次*我想变基时，我都必须经历这个过程。我有什么办法可以避免将来发生同样的冲突吗？我的想法是使用`push --force origin devel`, 覆盖远程存储库中的历史记录，而不会导致冲突的提交。这是要走的路吗？或者有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:17:51.463

假设上游没有重写公共历史，您应该调整您的提交以在 master 的最新代码之上工作。相反，您正在跳过该冲突的提交。您需要改为解决冲突，然后使用`git add`, 标记它们已解决，然后`git rebase --continue`(not `--skip`)。

冲突不断发生的原因是因为您每次都在跳过它们。

这样做`git push --force`会为使用该分支的其他人重写公共历史记录（您可能会删除或重新排序他们已经拉下并在其上工作的提交）。最好避免这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:23:51.207

推力只能在最可怕的情况下进行。

如果自您开始工作以来其他任何人对远程分支进行了任何更改，您实际上将覆盖它们。

所以你最好手动解决冲突。

如果代码在同一行有更改，您需要手动解决它们。使用武力不是“解决”它们的方法。

你不会每次都遇到冲突，如果这是你的经验，那只是在你学习的时候，而在你这样做、实验和学习的时候，有些事情可能会发生。

要考虑的另一个选择可能是只获取代码，制作副本，删除 -r .git 目录并为其创建一个新的 git repo (git init)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:52:12.970

我认为`git push --force`这里不是一个好主意。在任何情况下，在使用之前，`git push --force`您都应该做类似的事情`git fetch`，并`git diff devel origin/master`查看您在推送中添加和删除的内容，并记住，在`--force`其他开发人员收到警告之后，可能需要重新调整并重新推送他们的更改。

1.  我希望`git rebase --skip`您跳过开发者的提交，而不是获取主人的提交；
2.  在“rebase”之后应该能够在没有“--force”的情况下推送（除非新的提交足够快地到达那里需要另一个 fetch/rebase 周期）。

一些注意事项：

*   如果您不想一遍又一遍地解决相同的冲突，可以使用“git rerere”
*   Git 自动将远程内容镜像为“origin/master”，您可以使用“git fetch”对其进行更新。然后你可以在你的开发中使用“git rebase origin/master”，而无需在“master”分支之间来回切换。

# c - 从麦克风获取音频

> ID：12530263
> 
> 赞同：2
> 
> 时间：2012-09-21T12:03:44.133
> 
> 标签：c, audio, posix, microphone

在免费的 POSIX 兼容操作系统中从麦克风获取音频的最便携方式是什么？我真的对 OSS（已弃用？）、ALSA、JACK、PulseAudio 感到困惑。我应该使用哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:21:40.550

[ALSA](http://en.wikipedia.org/wiki/Advanced_Linux_Sound_Architecture)为 Linux 提供低级 API。类似于 Windows 的[DirectSound](http://en.wikipedia.org/wiki/DirectSound)。如果您想使用低级功能并拥有完全控制权，请使用 ALSA。否则我认为它的 API 很难使用。

查看[PJSIP](http://trac.pjsip.org/repos/wiki/Getting-Started/Autoconf)的源代码，它可在 Linux 和 Windows 之间移植（使用 C 语言）。在这个项目中，您将看到 ALSA 是如何被包装成更简单的接口的。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T04:39:16.247

没有**标准**的方法可以做到这一点。声音 API 没有正式的标准。

您可以*期望*的最好的 API 是可在足够广泛的 Linux 和 Bsd 的系列/版本/发行版中使用的 API，以达到令人满意的效果。这个问题空间的历史意味着它几乎可以保证没有单一的 API 可以为您提供全面的覆盖。

我的建议是将自己限制在主流/现代操作系统中，而将较旧/最少使用的东西留给其他人处理。并将您的代码作为开源发布......这样就*可以*解决移植它的问题。

# python - python启动包含暂停命令的批处理文件，引发异常

> ID：12530271
> 
> 赞同：2
> 
> 时间：2012-09-21T12:04:27.227
> 
> 标签：python, batch-file, operating-system

我编写了简单的 python 脚本，它启动 ( `os.start(path)`) 一个批处理文件并等待它完成 `os.spawnv(os.P_WAIT,bat,())`。

问题是它抛出了一个异常：

“exceptions.EOFError:[Errno 10054] 现有连接被远程主机强行关闭”

该脚本在 Windows 7 64 位上运行，批处理文件包含简单的命令，如 cd..

代码：

```
import os
bat = r'C:\new folder\start.bat'
os.spawnv(os.P_WAIT,bat,())
print "ok" 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T17:31:05.013

要在 Windows 上运行批处理文件，您实际上必须`os.spawn()`或`subprocess.call()`带有参数的东西来模拟类似于以下的命令行：

```
cmd.exe /c "C:\new folder\start.bat" 
```

`/c`参数`cmd.exe`告诉它执行提供的命令并退出。您还需要在包含嵌入空格字符的任何路径周围加上双引号，如上所示。

# ruby-on-rails - ruby on rails 友谊以下节目总是我的名字

> ID：12530274
> 
> 赞同：0
> 
> 时间：2012-09-21T12:04:50.763
> 
> 标签：ruby-on-rails, view, model, friend

**友谊.rb**

```
belongs_to :user, :include => [:profile]
belongs_to :friend, :class_name => 'user' 
```

**用户.rb**

```
 #following code
  has_many :friendships
  has_many :friends, :through => :friendships

  #followers code
  has_many :inverse_friendships, :class_name => "Friendship", :foreign_key => "friend_id"
  has_many :inverse_friends, :through => :inverse_friendships, :source => :user 
```

使用此代码显示我已加好友以及已加好友的人

**看法**

```
 <h2>Friends</h2>
    <ul>
      <% for friendship in @user.friendships.includes(:user) %>
        <li>
          <%= friendship.user.username %>
          (<%= link_to "remove", friendship, :method => :delete %>)
        </li>
      <% end %>
    </ul>

    <p><%= link_to "Find Friends", users_path %></p>

    <h2>Friended by Users</h2>
    <ul>
      <% for user in @user.inverse_friends %>
        <li><%=h user.username %></li>
      <% end %>
    </ul> 
```

在第一个循环块上，我总是打印我的用户名，让我们称之为“ **fxuser** ”在第二个循环块上，我得到了与我成为朋友的正确用户名......

如何解决这个问题，以便第一个循环将显示我交友的正确用户名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:36:22.387

在你的第一个循环中，我相信`friendship.user`是指回你自己；您正在寻找`friendship.friend`. 另外，我认为您想`friendship`删除删除链接中的 ，而不是相反的。

```
 <% for friendship in @user.friendships.includes(:friend) %>
    <li>
      <%= friendship.friend.username %>
      (<%= link_to "remove", friendship, :method => :delete %>)
    </li>
 <% end %> 
```

你也需要改变

```
belongs_to :friend, :class_name => 'user' 
```

到

```
belongs_to :friend, :class_name => 'User' 
```

# objective-c - Objective C 中的类自动装配

> ID：12530276
> 
> 赞同：0
> 
> 时间：2012-09-21T12:05:06.823
> 
> 标签：objective-c, ios, xcode, design-patterns, inversion-of-control

来自过去的线程：[Cocoa 的依赖注入框架？](https://stackoverflow.com/questions/309711/dependency-injection-framework-for-cocoa)，虽然有人说像Obj-C这样的动态语言不需要IoC框架，但是人们经常会漏掉核心特性之一——**运行时类的布线**。它们对于`compiled language`像Obj-C这样的语言很重要

有一些现有的用于 Obj-C 的所谓 IoC 容器，例如`objection`仍然需要您破解代码才能更改实现。

是否有任何类似的工具`spring`可以改变`implementations`和自动连接，例如，使用 XML 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:35:08.720

为什么不使用 InterfaceBuilder？这基本上就是它的作用。对象不需要是 UI 组件。

# c# - 转换可枚举 到 xpathnodeiterator

> ID：12530277
> 
> 赞同：1
> 
> 时间：2012-09-21T12:05:21.683
> 
> 标签：c#, .net, webforms, umbraco

我环顾四周，如果我重复了这个问题，我深表歉意

我有一个标准清单，即

```
List<String> WordsRequested = new List<String>(); 
```

我需要返回此列表的 XPathNodeIterator

执行此转换的最有效方法是什么？

伪代码中的 EG

```
XMlDocument xd = new XmlDocument("<WordsRequested></WordsRequested>");
//imaginary method to add each string as a <Word/> Element
xd.Append(WordsRequested, "Word"); 
XPathNodeIterator xpni = xd.Select("//WordsRequest/Word");
return xpni; 
```

我将此返回到 Umbraco 的 XSLExtension

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:20:54.663

由于您使用的是 Umbraco，您可以使用 'umbraco.library.Split' 方法。这将采用一个分隔字符串并返回一个 XPathNodeIterator。

一个示例 XSLT 扩展如下所示：

```
public static XPathNodeIterator GetWordsAsXml(List<string> words)
{
    return umbraco.library.Split(string.Join(",", words), ",");
} 
```

# apache-camel - Camel：Smooks 过滤操作失败

> ID：12530278
> 
> 赞同：0
> 
> 时间：2012-09-21T12:05:33.160
> 
> 标签：apache-camel, smooks

我正在使用骆驼，我正在尝试在我的路线中添加一个 smooks 转换：

```
public void configure() throws Exception {
    from("file:src/main/resources/smookFromCsvToXml/from?fileName=test.jtl")
        .log("Before SmooksComponent\n${body}")
        .to("smooks://smooks-config.xml")
        .to("file:src/main/resources/smookFromCsvToXml/to")
        .log("After SmooksComponent\n${body}");
} 
```

当我运行这条路线时，我收到以下错误

```
[sources/smookFromCsvToXml/from] route1                         INFO  Before SmooksComponent
Tom,Fennelly,Male,4,Ireland
Mike,Fennelly,Male,2,Ireland
[sources/smookFromCsvToXml/from] DefaultErrorHandler            ERROR Failed delivery for (MessageId: ID-WM-WAMS-DAD-61818-1348228740355-0-15 on ExchangeId: ID-WM-WAMS-DAD-61818-1348228740355-0-14). Exhausted after delivery attempt: 1 caught: org.milyn.SmooksException: Smooks Filtering operation failed.
org.milyn.SmooksException: Smooks Filtering operation failed.
    at org.milyn.Smooks._filter(Smooks.java:548)[milyn-smooks-all-1.5.1.jar:]
    at org.milyn.Smooks.filterSource(Smooks.java:482)[milyn-smooks-all-1.5.1.jar:]
    at org.milyn.smooks.camel.processor.SmooksProcessor.process(SmooksProcessor.java:107)[milyn-smooks-all-1.5.1.jar:]
    at org.apache.camel.impl.ProcessorEndpoint.onExchange(ProcessorEndpoint.java:101)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.impl.ProcessorEndpoint$1.process(ProcessorEndpoint.java:71)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.SendProcessor$2.doInAsyncProducer(SendProcessor.java:120)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.impl.ProducerCache.doInAsyncProducer(ProducerCache.java:292)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:115)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:71)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:91)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.fabric.FabricTraceProcessor.process(FabricTraceProcessor.java:81)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:330)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:220)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:45)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:304)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.Pipeline.process(Pipeline.java:117)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.Pipeline.process(Pipeline.java:80)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:45)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.UnitOfWorkProcessor.processAsync(UnitOfWorkProcessor.java:150)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:117)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.RouteInflightRepositoryProcessor.processNext(RouteInflightRepositoryProcessor.java:50)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:71)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:388)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:198)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:159)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:140)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:92)[camel-core-2.9.0.fuse-70-084.jar:2.9.0.fuse-70-084]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)[:1.6.0_25]
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)[:1.6.0_25]
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)[:1.6.0_25]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)[:1.6.0_25]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)[:1.6.0_25]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)[:1.6.0_25]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)[:1.6.0_25]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)[:1.6.0_25]
    at java.lang.Thread.run(Thread.java:662)[:1.6.0_25]
[sources/smookFromCsvToXml/from] GenericFileOnCompletion        WARN  Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@1a779dce for file: GenericFile[test.jtl] 
```

虽然我的转型如下：

```
<smooks-resource-list 
    xmlns="http://www.milyn.org/xsd/smooks-1.1.xsd" 
    xmlns:core="http://www.milyn.org/xsd/smooks/smooks-core-1.4.xsd"
    xmlns:csv="http://www.milyn.org/xsd/smooks/csv-1.2.xsd">

    <csv:reader fields="firstname,lastname,gender,age,country" rootElementName="people" recordElementName="person" />

    <core:exports>
        <core:result type="org.milyn.payload.StringResult"/>
    </core:exports>

</smooks-resource-list> 
```

接缝表明 smooks 无法读取传入的消息。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:15:32.750

您可以事先将消息转换为字符串，例如在 smooks 之前添加

```
<convertBodyTo type="String"/> 
```

# javascript - 如何在 JavaScript 中创建一个命名的多维数组？

> ID：12530285
> 
> 赞同：-1
> 
> 时间：2012-09-21T12:06:04.800
> 
> 标签：javascript, jquery

> **可能重复：**
> [javascript多维数组？](https://stackoverflow.com/questions/2529865/javascript-multidimensional-array)

大家好，我需要创建一个可以像这样访问的数组：

```
var cssValue = cssArray[element][property][value]; 
```

你知道我怎么能做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T12:09:30.717

我宁愿创建一个对象而不是一个数组

```
var cssObject = {
   element : {
      property : {
         value : "your value"
      }
   }
} 
```

因为您的结构中似乎可能有一些非整数键（`property/value`可能是字符串）

你得到了价值

```
 cssObject["element"]["property"]["value"] 
 // or cssObject.element.property.value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:08:54.667

这将是一种简单的方法：

```
var myarray = new Array(10);
for (i=0; i <10; i++){
myarray[10] = new Array();
} 
```

# grails - grails 插件兼容性

> ID：12530287
> 
> 赞同：2
> 
> 时间：2012-09-21T12:06:09.437
> 
> 标签：grails, versioning, grails-plugin

有人可以解释在 Grails 应用程序中使用 Grails 插件的兼容性规则（就 Grails 版本而言）到底是什么。

我的猜测是使用 Grails 2.X 开发的插件不能在 Grails 1.X 应用程序中使用，即使该插件不使用 Grails 1.X 应用程序中不可用的任何功能，对吗？

我是否假设在这种情况下，应该可以将 Grails 2.X 插件的源代码复制到一个空的 Grails 1.X 插件项目中，打包它，然后在 Grails 1.X 应用程序中使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:36:43.787

你不正确。插件在其插件描述符中定义了*grailsVersion*，它指示了它工作的 Grails 版本：

```
// the version or versions of Grails the plugin is designed for
def grailsVersion = "1.1.1 > *" 
```

插件是在应用程序启动期间（在开发环境中）或在创建 .war 文件期间编译的。这意味着针对 2.x 编写的插件确实可以在旧版本中工作，前提是它们限制自己使用这些版本中支持的功能。

# php - 如何通过在 php 中保持值的 id 在 foreach 方法中工作

> ID：12530289
> 
> 赞同：-3
> 
> 时间：2012-09-21T12:06:11.083
> 
> 标签：php, javascript, html

我尝试把数据和删除功能的链接。我可以获取值的链接，但删除按钮不起作用。我该如何解决？谢谢

```
<table width='100%'>
<tr>
<td style='font-weight:bold;'>Yol</td>
<td width='10' style='font-weight:bold;'>:</td><td>Faz<?= $veri[5] ?> > 
 <?= $aciklamalar[0][5] ?> > <?= $aciklamalar[0][3] ?> > <?= $veri[1] ?> </td></tr>
<tr><td    style='font-weight:bold;'>Node Tipi</td><td style='font-weight:bold;'>:</td>
<td> <?= $veri[7] ?> </tr><tr><td style='font-weight:bold;'>Toplam Yön</td>
 <td  style='font-weight:bold;'>:</td><td><?= $toplamyonaciklama[0][0] ?></tr><tr>
 <td style='font-weight:bold;'>Görüntüler</td><td style='font-weight:bold;'>:</td>
 <td>
     <? foreach($sistemResimleri as $sistemResimleri2){
         echo "<a href='../phps/sistemGoruntuleme.php?resimLinki=".$sistemResimleri2[1]."&faz=".$veri[5]."&bolge=".$aciklamalar[0][5]."&il=".$aciklamalar[0][3]."&merkez=".$veri[1]." 'onclick='return hs.htmlExpand(this,{ ".$a.",".$b.", width: 700, height:500 })'>".$sistemResimleri2[1]." </a> <button  width: 50px; height: 50px; onclick='deleteFunction($sistemResimleri2[0])'>Delete</button> <br/>  ";
     }?></td></tr></table>

function deleteFunction($pic_id)
{

    $picid=x;
    $sql="delete sysrom where picId =$picid";
      $_SESSION["VT"]->doQuery($sql);  

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:16:35.533

您的代码不起作用，因为您试图将服务器端语言 (PHP) 与客户端语言 (JS) 混合使用。

我建议对服务器端和客户端语言之间的差异进行一些研究，以帮助您理解您的问题。

这是[一个不错的起点](http://www.developer.com/tech/article.php/923111/Client-side-Versus-Server-side-Coding---Part-1.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:47:00.803

不要在单引号中使用变量...最好将它们取出或在单引号中使用 {$variable} 语法而不是变量值，但 $variable 将被转储到 html 代码中。

（Tek tırnak içine alma sen en güzeli :) ）

尝试这个

```
echo "<a href='../phps/sistemGoruntuleme.php?resimLinki=".$sistemResimleri2[1]."&faz=".$veri[5]."&bolge=".$aciklamalar[0][5]."&il=".$aciklamalar[0][3]."&merkez=".$veri[1]." 'onclick='return hs.htmlExpand(this,{ ".$a.",".$b.", width: 700, height:500 })'>".$sistemResimleri2[1]." </a> <button  width: 50px; height: 50px; onclick='deleteFunction($sistemResimleri2[0])'>Delete</button> <br/>  " 
```

至

```
echo "<a href='../phps/sistemGoruntuleme.php?resimLinki=".$sistemResimleri2[1]."&faz=".$veri[5]."&bolge=".$aciklamalar[0][5]."&il=".$aciklamalar[0][3]."&merkez=".$veri[1]." 'onclick='return hs.htmlExpand(this,{ ".$a.",".$b.", width: 700, height:500 })'>".$sistemResimleri2[1]." </a> <button  width: 50px; height: 50px; onclick='deleteFunction(".$sistemResimleri2[0].")'>Delete</button> <br/>  " 
```

# tridion - 如何仅为文件夹操作显示 GUI 扩展按钮？

> ID：12530290
> 
> 赞同：3
> 
> 时间：2012-09-21T12:06:12.497
> 
> 标签：tridion, tridion-2011

我创建了一个 GUI 按钮，我想在用户仅选择任何文件夹时启用该按钮。

我试图提供如下所示的配置 xml，但它总是显示。

```
 <ext:apply>                
            <ext:view name="DashboardView">
              <ext:control id="DashboardToolbar"/>
            </ext:view>
              <ext:view name="FolderView">
                  <ext:control id="ItemToolbar"/>
              </ext:view>

          </ext:apply> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:20:41.753

您必须通过以下检查在接口中实现该`isEnabled`方法`Command`，以确保所选元素的类型为 FOLDER。

```
YourEditor.YourCommand.prototype.isEnabled = 
            function YourCommand$isEnabled(selection) {
    var itemID = selection.getItem(0);

    if ($models.getItemType(itemID) != $const.ItemType.FOLDER) {
        return false;
    }
    else
        return true;   
}; 
```

*   如果您返回`true`该`isEnabled`功能，该按钮将被启用。
*   如果您返回`false`，该按钮将被禁用

如果您需要有关如何设置扩展的更多信息，您可以参考：

*   [https://sdltridionworld.com/articles/sdltridion2011/tutorials/GUIextensionIn8steps.aspx](https://sdltridionworld.com/articles/sdltridion2011/tutorials/GUIextensionIn8steps.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:16:12.700

没有“文件夹视图”之类的东西。将 Tridion 的 GUI 中的视图视为屏幕。所以你有一个 DashboardView，左边有一个树，右边有一个列表，然后当你打开一个组件时会弹出一个组件视图，等等。

根据您的要求，您正在向 DashboardView 添加一个按钮，并希望它根据选择启用/禁用。您必须在`isEnabled`命令的 JavaScript 方法中实现该逻辑。

如果您查看任何现有的扩展，您将看到一个`selection`参数被传递到此方法中。您可以从中确定哪些项目（以及它们的类型），从而确定何时启用/禁用您的按钮。

# iphone - 具有时区的日期时间对象在目标 C 应用程序开发中不起作用

> ID：12530299
> 
> 赞同：0
> 
> 时间：2012-09-21T12:06:49.877
> 
> 标签：iphone, objective-c, ios, xcode, cordova

我有以下目标-C代码。dateServer ， dateClient 显示相同的值，但实际上它们应该不同，因为 timeDiff 为空。

```
NSDate *dateClient  = [NSDate date];

[NSTimeZone setDefaultTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"PDT"]];
NSDate *dateServer = [NSDate date];

NSLog(@"dateServer=%@",[dateServer description]);
NSLog(@"dateClient=%@",[dateClient description]);

NSTimeInterval timeDiff = [dateClient timeIntervalSinceDate:dateServer];

NSString *dateStr = @"2012-09-21 05:34:24";

// Convert string to date object
NSDateFormatter *formatter2 = [[NSDateFormatter alloc] init];
[formatter2 setDateFormat:@"yyyy-MM-dd hh:mm:ss"];
NSDate *dateNew = [formatter2 dateFromString:dateStr];  
NSLog(@"date new %@" , [dateNew description]); 
```

最后， date new 出现的不是指定的字符串。为什么会发生这种情况，我只想将字符串转换为日期。任何人都可以提出这两个地方可能出现的问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:14:40.347

使用下面的代码

```
NSDate* dateClient = [NSDate date];

NSTimeZone* sourceTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"PDT"];
NSTimeZone* destinationTimeZone = [NSTimeZone systemTimeZone];

NSInteger sourceGMTOffset = [sourceTimeZone secondsFromGMTForDate:dateClient];
NSInteger destinationGMTOffset = [destinationTimeZone secondsFromGMTForDate:dateClient];
NSTimeInterval interval = destinationGMTOffset - sourceGMTOffset; 
```

![NSTimeInterval](../Images/6bab1e536936da97d63f819e2280dd45.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:13:37.193

[NSD日期]；正在给你当前时间。所以你正在比较 dateClient 和 dateServer 之间的 timeInterval，它们都带有当前时间。这就是 timeDiff 结果为零的原因。

# c# - 获取数据后关闭 EXCEL 应用程序进程

> ID：12530303
> 
> 赞同：2
> 
> 时间：2012-09-21T12:07:08.657
> 
> 标签：c#, excel, process

我正在尝试通过这种方式从列表中的 Excel 文件中获取列数据：

```
private void Form1_Load(object sender, EventArgs e)
        {
            Excel.Application xlApp = new Excel.Application();
            Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(@"D:/test.xlsx");
            Excel.Worksheet xlWorksheet = xlWorkbook.Sheets[1];
            Excel.Range xlRange = xlWorksheet.UsedRange;

            int rowCount = xlRange.Rows.Count;
            int colCount = xlRange.Columns.Count;

            List<string> FirstColumnValues = new List<string>();
            List<string> SecondColumnValues = new List<string>();

            for (int row=1; row <= rowCount; row++)
            {
                for (int col = 1; col <= colCount; col++)
                {
                    switch (col)
                    {
                        case 1:
                            FirstColumnValues.Add(xlRange.Cells[row, col].Value2.ToString());
                            break;
                        case 2:
                            SecondColumnValues.Add(xlRange.Cells[row, col].Value2.ToString());
                            break;
                    }
                }
            }

            if (FirstColumnValues.Count != 0 && SecondColumnValues.Count != 0)
            {
                xlWorkbook.Close();
                xlApp.Quit();
                MessageBox.Show("Completed");
                Marshal.ReleaseComObject(xlRange);
                Marshal.ReleaseComObject(xlWorksheet);
                Marshal.ReleaseComObject(xlWorkbook);
                Marshal.ReleaseComObject(xlApp);
                xlApp = null;
            }
        } 
```

`EXCEL.EXE`问题是，即使我已经尝试了所有方法来正确关闭它，该过程也没有关闭。我知道这里发布了很多关于正确关闭 excel 流程的问题。但我不是专业人士，我已经尝试了几乎所有我能做的事情。仍然没有运气。

那么，有人可以告诉我这段代码有什么问题吗？当所有数据都存储在列表中时，如何关闭进程一次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T00:08:05.860

我知道这个问题已经得到解答，但我想我会分享我在尝试解决相同问题时的发现。希望有人会发现这很有用。这是在 vb.net 中，但我确信它可以被翻译。

```
Dim proc As System.Diagnostics.Process
        For Each proc In System.Diagnostics.Process.GetProcessesByName("EXCEL")
            If proc.MainWindowTitle.ToString = "" Then
                proc.Kill()
            End If
        Next 
```

我发现当我通过我的应用程序打开 Excel 文件时，窗口标题为空，因此我没有关闭每个正在运行的 Excel 进程，而是关闭了没有标题的那些。

**编辑：**

如果您要终止该过程，因为您找不到[尚未清理的剩余变量](http://jake.ginnivan.net/vsto-com-interop)（基本上是您使用两个点设置的任何变量），那么至少杀死正确的 Excel 实例：

```
[DllImport("user32.dll", SetLastError = true)]
private static extern int GetWindowThreadProcessId(IntPtr hwnd, ref int lpdwProcessId);

...

if (xlApp != null)
{
  GetWindowThreadProcessId(new IntPtr(xlApp.Hwnd), ref excelProcessId);

  Process ExcelProc = Process.GetProcessById(excelProcessId);
  if (ExcelProc != null)
  {
    ExcelProc.Kill();
  } 
```

我不提倡杀死进程，你应该用 VSTO Contrib 正确清理，例如：

```
using (var xlApp = new Microsoft.Office.Interop.Excel.Application().WithComCleanup()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:12:25.933

我以前去过那里。这是一篇真正帮助我解决问题的文章：

[http://devcity.net/Articles/239/1/article.aspx](http://devcity.net/Articles/239/1/article.aspx)

Excel 似乎对终止进程非常固执。您很可能最终会使用 System.Diagnostics.Process 终止进程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:18:01.727

也许，您可能会考虑使用`try{}catch{}finally{}`并尝试[Marshal.FinalReleaseComObject](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.finalreleasecomobject.aspx)。

不确定你是否看过[这篇文章](https://stackoverflow.com/questions/158706/how-to-properly-clean-up-excel-interop-objects-in-c-sharp)，它也可能会给你一些见解。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T23:35:12.517

确保您正在运行的 Excel 实例最终终止（即当您的应用程序退出时）的最简单方法是将顶级对象包装在 try/finally 块中。

```
Excel.Application xlApp;  
try{  
   xlApp = new Excel.Application();  
   ...do some work...  
}  
finally{  
   xlApp.DisableAlerts=True;  
   xlApp.Quit();  
   xlApp.DisableAlerts=False;  
   Marshal.ReleaseComObject(xlApp);  
}  

//If you don't mind having the Excel process kept alive for a while,  
//you don't even have to call ReleaseComObject() on the intermediate objects.  
//The runtime will eventually free the underlying COM objects.  

//If you want to clean up right away, your bookkeeping needs to be more thorough.  
//Every time you access a method or property that returns a runtime callable wrapper  
//(System.__ComObject), you'll need to assign them to a variable  
//and make sure Marshal.ReleaseComObject() is called.  

// More thorough bookkeeping...    
Excel.Application xlApp;  
try{  
   xlApp = new Excel.Application();  

   Excel.Workbooks xlWorkbooks = xlApp.Workbooks;  
   Excel.Workbook xlWorkbook = xlWorkbooks.Open(@"D:/test.xlsx");  
   Excel.Sheets xlSheets = xlWorkbook.Sheets;  
   Excel.Worksheet xlWorksheet = xlSheets[1];  
   Excel.Range xlRange = xlWorksheet.UsedRange;  

   ...inside the loop...  
   Excel.Range xlCell = xlRange.Cells[row, col];  
   FirstColumnValues.Add(xlCell.Value2.ToString());  
   Marshal.ReleaseComObject(xlCell);  

   ...inside the loop...  
   Excel.Range xlCell = xlRange.Cells[row, col];  
   SecondColumnValues.Add(xlCell.Value2.ToString());  
   Marshal.ReleaseComObject(xlCell);  

   ...do more work...  

   ...clean up...  
   Marshal.ReleaseComObject(xlRange);  
   Marshal.ReleaseComObject(xlWorksheet);  
   Marshal.ReleaseComObject(xlSheets);  
   Marshal.ReleaseComObject(xlWorkbook);  
   Marshal.ReleaseComObject(xlWorkbooks);  
}  
finally{  
   xlApp.DisableAlerts=True;  
   xlApp.Quit();  
   xlApp.DisableAlerts=False;  
   Marshal.ReleaseComObject(xlApp);  
} 
```

# plone - 在 Plone 中使用 Javascript 访问门户 URL

> ID：12530308
> 
> 赞同：4
> 
> 时间：2012-09-21T12:07:21.583
> 
> 标签：plone

Plone (4) 是否以某种方式将门户 URL 公开给 Javascript？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T12:12:19.933

看起来它是通过`plone_javascript_variables`CMFPlone 中的视图暴露的

[https://github.com/plone/Products.CMFPlone/blob/master/Products/CMFPlone/browser/jsvariables.py](https://github.com/plone/Products.CMFPlone/blob/master/Products/CMFPlone/browser/jsvariables.py)

# cqrs - CQRS 事件存储的结构

> ID：12530310
> 
> 赞同：13
> 
> 时间：2012-09-21T12:07:40.153
> 
> 标签：cqrs, event-sourcing

我目前正在尝试了解如何构建事件存储的内部结构。到目前为止我得到了什么：

*   一个事件存储有两个表（集合，...），一个用于聚合，一个用于事件。
*   聚合表包含以下数据：（`aggregateId`可能是一个 GUID）和`aggregateVersion`（它是一个整数，仅表示影响此聚合的最后一个事件的数量）。
*   events 表包含以下数据：（`eventId`同样是一个 GUID）、`aggregateId`（事件所属的）`payload`、 和 a `version`（它是一个简单的整数，用于描述事件的顺序）。

到目前为止这是正确的吗？是否应该使用整数对事件进行排序？还是应该根据时间戳对它们进行排序？各有什么优势？有什么缺点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T12:19:53.277

我建议您查看[Jonathan Oliver 的 EventStore](https://github.com/joliver/EventStore)以供参考。

在 SQL 持久化版本中，只有一张表。您可以轻松地在没有聚合表的情况下生活，并将聚合 ID 存储在事件表中。可以使用 max() 查询来检索最新版本。

除此之外，我认为您应该考虑在事件表中包含标题，因为总是有一些有趣的元数据您不想存储在事件本身中。

而且，我认为您应该在事件表中添加一个日期列。

最后，您可能希望有某种标志来说明事件是否已被下游调度。此添加使您能够在一个线程或进程中写入并在另一个中分派。

Aaand 那里，我有点建议 Jonathans EventStore 的结构。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T12:18:19.433

查看[http://geteventstore.com/](http://geteventstore.com/) - Greg Young 的这个版本也有[可供您阅读的源代码 [在 GitHub 上有 BSD 3 条款许可证]](https://github.com/eventstore)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-22T05:28:34.220

我不能为 Mikael 的回答添加太多内容。

这里还有一件事可以作为参考：几年前，Greg Young 写下了他对事件存储实现的想法。该文档可在[http://cqrs.wordpress.com/documents/building-event-storage/找到](http://cqrs.wordpress.com/documents/building-event-storage/)

尽管我相信他的方法在此期间也有所发展。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T12:20:27.237

聚合与 cqrs 相关，但不直接与事件存储相关。没错，有两个集合，但它们是事件和快照。有关更多详细信息，请查看： [https ://github.com/jamuhl/nodeEventStore](https://github.com/jamuhl/nodeEventStore)

# java - JLabel 彼此重叠放置

> ID：12530312
> 
> 赞同：1
> 
> 时间：2012-09-21T12:07:40.873
> 
> 标签：java, swing, jframe, jlabel, layout-manager

你好新手java程序员，这可能是一个非常愚蠢的问题，但我在向我的视图中添加多个JLabel时遇到问题。他们似乎在互相掩护。我一直在阅读有关三个布局管理器的信息，但似乎找不到关于它们的简单教程。

```
 //Size and positioning
    setSize(500,400);
    setLocationRelativeTo(null);

    //Set Frame Background color

    //Set Labels
    JLabel labelTitle = new JLabel("<html><center>My CD/DVD Collection</center></html>",null,JLabel.CENTER);
    labelTitle.setFont(new Font("Arial",0 , 28));
    labelTitle.setVerticalAlignment(JLabel.TOP);
    add(labelTitle);
    labelTitle.setBorder(BorderFactory.createEmptyBorder( 50 /*top*/, 0, 0, 0 ));

    JLabel labelContent = new JLabel("<html><center> created by Daniel Del Core <br> Java</center></html>",null,JLabel.CENTER);

    add(labelContent); 
```

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:12:49.717

您的代码将元素直接添加到 a `JFrame`or `JDialog`，默认情况下具有 a `BorderLayout`，因此您的所有标签都以`BorderLayout.CENTER`. 这就是它们重叠的原因。

这是使用 a`FlowLayout`为您的代码的示例。请注意，我正在使用一个面板来添加标签，并且该面板已添加到您窗口的内容窗格中。

```
JPanel panel = new JPanel();
panel.setLayout(new FlowLayout());
//Set Labels
JLabel labelTitle = new JLabel("<html><center>My CD/DVD Collection</center></html>",null,JLabel.CENTER);
labelTitle.setFont(new Font("Arial",0 , 28));
labelTitle.setVerticalAlignment(JLabel.TOP);
panel.add(labelTitle);
labelTitle.setBorder(BorderFactory.createEmptyBorder( 50 /*top*/, 0, 0, 0 ));

JLabel labelContent = new JLabel("<html><center> created by Daniel Del Core <br> for <br> Java Programming and Applications</center></html>",null,JLabel.CENTER);
panel.add(labelContent);
getContentPane().add(panel); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T12:12:54.877

我猜您是针对`JFrame`. 当您调用`add()`a`JFrame`时，您实际上将组件添加到`JFrame`( `JFrame.getContentPane()`) 的内容窗格中。默认情况下，内容窗格使用[`BorderLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html#border). 当您将无约束的组件添加到使用 的容器时`BorderLayout`，您会将它们添加到中心。由于一次只能在中心显示一个组件，因此您只能看到其中一个。

试试这个（只是为了看看效果）：

```
getContentPane().setLayout(new FlowLayout()); 
```

看看这些教程：

*   [http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)
*   [http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:43:34.400

除了其他答案，如果要垂直堆叠 Swing 组件，请使用[`BoxLayout`](http://docs.oracle.com/javase/7/docs/api/javax/swing/BoxLayout.html)布局管理器。有关详细信息，请参阅[如何使用 BoxLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)。

# iphone - 使用委托返回不工作的对象

> ID：12530316
> 
> 赞同：0
> 
> 时间：2012-09-21T12:07:47.143
> 
> 标签：iphone, objective-c, ios

我有一个视图控制器，它有一个动作来呈现一个视图控制器

GoodNewsBodyViewController.h

```
@interface GoodNewsBodyViewController : UIViewController<EventListDelegate> 
```

GoodNewsBodyViewController.m

```
-(IBAction)goToEvents:(id)sender {
                EventTableViewController* eventsController = [[EventTableViewController alloc] initWithNibName:@"EventTableViewController" bundle:nil];

        [eventsController setListOfEvents:goodNews.Events];
        //try both ways
        [eventsController setDelegate:self];
        eventsController.delegate = self;

        [self presentModalViewController:eventsController animated:YES];
    }
    - (void)loginFormDidFinish:(EventTableViewController*)loginForm {
        // do whatever, then
        // hide the modal view

        EventViewController *eventController = [[EventViewController alloc] initWithNibName:@"EventViewController" bundle:nil];
        [eventController setEvent:loginForm.event];
        [self.navigationController pushViewController:eventController animated:YES];
        // clean up
        [self dismissModalViewControllerAnimated:YES];
    } 
```

EventTableViewController.h

```
@class EventTableViewController;

@protocol EventListDelegate
- (void)loginFormDidFinish:(EventTableViewController*)loginForm;
@end
@interface EventTableViewController : UIViewController <RKObjectLoaderDelegate, UITableViewDataSource, UITableViewDelegate> {
    id<EventListDelegate> delegate;
    NSArray* eventList;
    Organisation* organisation; 
    IBOutlet UITableView* _tableView; 
    NSMutableArray* listOfEvents;
    Event* event;

}
@property (strong) id<EventListDelegate> delegate;
@property (nonatomic, strong) IBOutlet UITableView* _tableView; 
@property (nonatomic, strong) NSArray* eventList;
@property (nonatomic, strong) Organisation* organisation; 
@property (nonatomic, strong) NSMutableArray* listOfEvents;
@property (nonatomic, strong) Event* event; 
```

当在 eventstableviewcontroller 中选择一个事件时，我希望将该事件回发。我试图通过将事件作为在 eventstableviewcontroller 的 didselect 方法中设置的属性来做到这一点。The events list is being presented and when an event is selected it, the list disapears. 这都是正确的，但 - (void)loginFormDidFinish:(EventTableViewController*)loginForm;

事件似乎没有触发，我在那里设置了断点，但它们永远不会被击中......感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:49:33.523

你的`loginFormDidFinish:`方法应该是这样的

-

```
(void)loginFormDidFinish:(EventTableViewController*)loginForm {
        // hide the modal view
        [self dismissModalViewControllerAnimated:NO];//without animation

        EventViewController *eventController = [[EventViewController alloc] initWithNibName:@"EventViewController" bundle:nil];
        [eventController setEvent:loginForm.event];
        [self.navigationController pushViewController:eventController animated:YES];
        [eventController release];
        // clean up
} 
```

# sql - 案例语句集参数

> ID：12530317
> 
> 赞同：1
> 
> 时间：2012-09-21T12:07:48.323
> 
> 标签：sql, sql-server, sql-server-2005

```
SELECT (CASE
        WHEN(percentage >= @Start AND percentage < @End)                        
        THEN 
            SET @body ='<html><body><H3>Report</H3>
                        <table border = 1> 
                        <tr>
                        <th>No </th> <th> date </th> <th> lag </th> <th> Variance </th></tr>'    
            SET @body = @body + @xml +'</table></body></html>' 
        ELSE 'NULL' END) as Variance  
    FROM TestTbl 
```

消息 156，级别 15，状态 1，过程 SP_CheckDB，第 31 行关键字“SET”附近的语法不正确。消息 156，级别 15，状态 1，过程 SP_CheckDB，第 36 行关键字“ELSE”附近的语法不正确

请帮助这个声明

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T12:23:40.887

用这个

```
Declare @str VARCHAR(MAX)

SET @str = '<html><body><H3>Report</H3>
            <table border = 1> 
            <tr>
                <th>No </th> <th> date </th> 
                <th> lag </th> <th> Variance </th>
            </tr>'+ @xml +'</table></body></html>' 

SELECT (CASE
        WHEN(percentage >= @Start AND percentage < @End)                        
        THEN @str
        ELSE 'NULL' END) as Variance  
FROM TestTbl 
```

*或者*

```
DECLARE @body VARCHAR(MAX) = 'NULL'

    IF(percentage >= @Start AND percentage < @End) THEN
    BEGIN
        SET @body ='<html><body><H3>Report</H3>
                    <table border = 1> 
                    <tr>
                        <th>No </th> <th> date </th> 
                        <th> lag </th> <th> Variance </th>
                    </tr>'    
        SET @body = @body + @xml +'</table></body></html>' 
    END

    SELECT Variance = @body 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:13:45.900

如果你只想要条件赋值，那么你需要这样做：

```
SELECT TOP 1 @body = (CASE
        WHEN(percentage >= @Start AND percentage < @End)                        
        THEN 
             '<html><body><H3>Report</H3>
                        <table border = 1> 
                        <tr>
                        <th>No </th> <th> date </th> <th> lag </th> <th> Variance </th></tr>'    
            + @xml +'</table></body></html>' 
        ELSE 'NULL' 
        END)
 FROM TestTbl 
```

尽管请注意，您不能在同一语句中分配 + 选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:17:48.363

```
SELECT @body=(CASE WHEN(percentage >= @Start AND percentage < @End)                        
        THEN ('<html><body><H3>Report</H3>
                        <table border = 1> 
                        <tr>
                        <th>No </th> <th> date </th> <th> lag </th> <th> Variance </th></tr>'+@xml +'</table></body></html>')
        ELSE 'NULL' END) as Variance  
    FROM TestTbl 
```

# c++ - 如何将 Qwt 图绘制到图像中

> ID：12530318
> 
> 赞同：2
> 
> 时间：2012-09-21T12:07:48.973
> 
> 标签：c++, qt, qwt

我想在视频流上叠加一个图形，即自定义小部件中的 QImage。我将如何将 Qwt 图绘制到 Qwt 图以外的表面？

Qt 的方法是什么？子类 Qwt 图？定义一个能够将图像设置为背景的自定义画布？还是有什么明显的我遗漏的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T22:12:32.730

使用 QwtPlotRenderer。

在几乎所有 Qwt 示例中，您都可以看到如何将绘图渲染为 Pdf、Postscript、SVG 或 Qt 支持的任何图像格式。

最好在官方 Qwt 支持频道上询问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:15:48.827

我似乎与您描述的您想做的事情相似，它们都是使用 QPixmap（或 QImage）的自定义实现。

您可以尝试将 qwt 图子类化，但我认为您会发现性能会比自定义实现更差。

您可能希望能够相对于彼此缩放轴（或图像/像素图），如果您将该部分实现为 QGraphicsViews（例如缩放），这可能会更容易。如果它只是一个简单的 x/y 图，那么实现你自己应该相对轻松。

祝你好运！

# c# - 是否可以以类似于 .NET 环境处理 app.config 或 web.config 的方式以分层方式配置 log4net

> ID：12530321
> 
> 赞同：2
> 
> 时间：2012-09-21T12:08:17.643
> 
> 标签：c#, log4net, configuration-files, log4net-configuration

我们有一个运行着大量服务的分布式系统。我们目前为每个应用程序实例提供一个通用的 log4net 配置文件。要在现场修改一系列应用程序的日志记录，支持和实施人员发现必须修改所有看起来完全相同的配置文件既乏味又容易出错。

我想知道是否可以将 log4net 配置文件合并在一起，类似于 .NET 管理其 environment.config、machine.config、app.config 和 web.config 的方式；基本上是从树的顶部开始，并在运行时从较低级别查找和合并配置。

如果可能的话，我们可以有一个单独的位置，我们可以在其中添加一个新的 appender；然后修改每个应用程序配置文件以仅启用该附加程序。

我在 log4net 配置示例中找不到任何可以启用此功能的内容。

有谁知道这是否可能；或者也许可以使用一种替代方法来达到相同的效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:28:21.627

我不知道 Log4Net 中有任何机制，但您可以使用该`XInclude`指令在 Log4Net 配置文件中包含（部分）Xml 文件。

将常用的日志记录位放在部分中，让各个配置文件包含常用的部分 Xml 文件

[XML 常见问题解答 - 19\. 如何在另一个 XML 文件中包含一个 XML 文件？](http://xml.silmaril.ie/includes.html)

希望这可以帮助

# mongodb - 在数组中本地查询 MongoDB

> ID：12530322
> 
> 赞同：2
> 
> 时间：2012-09-21T12:08:20.277
> 
> 标签：mongodb

我有一个 monogoDB，其中包含以下结构的数据：

```
{   "Locales" : {
    "Invariant" : {
      "Checksum" : "7B4C15B697AAFC1484679076667267D2",
      "Metadata" : {
        "app" : {
          "@appType" : "app",
          "@id" : "284896113",
          "categories" : {
            "category" : [{
                "@id" : "6011",
                "@parentid" : "36",
                "@type" : "GENRE",
                "##text##" : "Music"
              }, {
                "@id" : "6016",
                "@parentid" : "36",
                "@type" : "GENRE",
                "##text##" : "Entertainment"
              }],
            "##category" : null
          },
          "rating" : "2.5",
          }
        }
      },
      "ModifiedDate" : ISODate("2012-09-07T09:07:58.218Z")
    }   },   "_id" : "selection/live/app(284896113)" 
```

我的数据库中有大约 100,000 个。我需要找出几件事。首先，其中有多少具有“类别”数组，然后其中有多少在其下方具有一个或多个“类别”数组，最后，其中有多少具有##text## 的值？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:12:57.227

您可以使用 $exists：

```
db.things.count( { 
   'Locales.Invariant.Metadata.app.categories': {$exists: true }} );

db.things.count( { 
   'Locales.Invariant.Metadata.app.categories.category': {$exists: true }} );

db.things.count( { 
   'Locales.Invariant.Metadata.app.categories.category.##text##': 
      {$exists: true }} ); 
```

请注意，这将返回文档数，而不是匹配数。在您的示例中，它将返回“1”，因为只有一个文档，而不是“2”（对于两次出现的##text##）。

# jquery - 检查是否选择了选项

> ID：12530327
> 
> 赞同：-4
> 
> 时间：2012-09-21T12:08:52.720
> 
> 标签：jquery

> **可能重复：**
> [检查是否使用 jQuery 选择了选项，如果没有选择默认值](https://stackoverflow.com/questions/149573/check-if-option-is-selected-with-jquery-if-not-select-a-default)

我有这样的html：

```
<div id="somedivid">

<select class="someclass">
<!-- options -->
</select>

<select class="someclass">
<!-- options -->
</select>

</div> 
```

如何检查两个选择框中是否选择了选项？

编辑：我不能更改 html，所以这意味着我不能添加 id 来选择元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:10:09.333

一个选择总是有一个选择。

但是假设您像这样输入一个空选项：

```
​&lt;select id=select1>
    <option></option>
    <option>A</option>
    <option>B</option>
</select>​ 
```

你可以测试一下：

```
if ($('#select1').val() && $('#select2').val()) {
   // both have selection 
```

编辑：如果你没有 id 或名字，你可以使用这个：

```
var allSelected = true:
$('#somedivid select').each(function() {
    if (!$(this).val()) {
       allSelected = false;
       break;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:15:07.017

```
<script type="text/javascript">
    $( function() { 
        $( '#somedivid > select' ).bind( 'change', function(){
            if( $( '#sel1').attr( 'value' ) != 'default' && $( '#sel1' ).attr( 'value' ) != 'default' ){
                //do something here.
            }
        });
    } );
</script>
<div id="somedivid">

    <select id="sel1">
        <option value="default" selected="selected"></option>
        <!-- options -->
    </select>

    <select id="sel2">
        <option value="default" selected="selected"></option>
        <!-- options -->
    </select>

</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:16:26.070

考虑到两个选择框都有一些默认选项值 =“none”

```
var isBothSelected=0;
if($('#selectbox1 option:selected').val() =='none'){
    alert('Plase select the select1');
    isBothSelected=isBothSelected+1;
    //return false;
}
if($('#selectbox2 option:selected').val() =='none'){
    alert('Plase select the select2');
   isBothSelected=isBothSelected+1;
    // return false;
}
if(isBothSelected ==2){
  alert('Both are not selected')
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T12:16:52.303

试试这个

```
 var val=  $("#selectid option:selected").value();
           if(val==="")
               {
          alert("your code on not selected condition");
           } 
```

# javascript - 使用 javascript 获取多个复选框值

> ID：12530331
> 
> 赞同：0
> 
> 时间：2012-09-21T12:09:08.770
> 
> 标签：javascript, jquery, ajax

我有这个表格，我使用 ajax 和 jquery 提交，嗯，我有这个多个复选框，我从中得到一些值。

现在我在这里犯了一个错误，因为复选框的值没有发布在数据库中。这是 html/php 部分：

```
 while($row = mysql_fetch_assoc( $result )) {
    echo '<input type="checkbox" value="'.$row['regione'].'" id="regioni_gestite_ag" name="regioni_gestite_ag[]">' . $row['regione'] . '<br>';
    } 
```

这就是我用javascript得到它的方式：

```
var js_regioni_gestite_ag = $('input:checkbox[name=regioni_gestite_ag]:checked').val(); 
```

如果我回显该值，我会得到未定义...为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:11:51.913

因为您没有`name`正确指定属性。选择器应该是

```
$('input[name="regioni_gestite_ag[]"]:checkbox:checked') 
```

但是，这仍然不会使一切正常，因为[`.val()`](http://api.jquery.com/val/)仅返回第*一个*匹配元素的值（因此它仅适用于第一个复选框）。

最后，您的 PHP 代码会生成多个具有相同`id`属性的元素，这是非法的 HTML，会使随机的 jQuery 和/或 DOM API 无法正常工作。这应该立即修复，也许通过`id`完全删除？

**更新**：将所有复选框的值作为数组获取，您可以使用

```
var values = $.makeArray($('input[name="regioni_gestite_ag[]"]:checkbox:checked')
                          .map(function() { return $(this).val() })); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:12:14.340

尝试使用[开始](http://api.jquery.com/attribute-starts-with-selector/)选择器 ( `^=`) ，如下所示：

```
var js_regioni_gestite_ag = $('input:checkbox[name^=regioni_gestite_ag]:checked').val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:28:09.427

试试这个：

```
var js_regioni_gestite_ag = [];//[name="regioni_gestite_ag[]"]
if($('input[name="regioni_gestite_ag[]"][type=checkbox]:checked').length){
    // check if any checkboxes are checked
    $('input[name="regioni_gestite_ag[]"][type=checkbox]:checked').each(function(o){
        // get their values
        js_regioni_gestite_ag.push($(this).val());
    });
}

// clears all selected checkboxes
function clearSelection() {
    $('input[name="regioni_gestite_ag[]"][type=checkbox]:checked').each(function(o){
        $(this).removeAttr('checked');
    });
} 
```

希望这可以帮助。

# python - python：酸洗c对象

> ID：12530333
> 
> 赞同：11
> 
> 时间：2012-09-21T12:09:13.890
> 
> 标签：python, pickle

首先，我并不期待解决方案，只是希望获得一些关于如何开始的指示。

我有一个带有嵌入式 Python 解释器的 C 程序。程序用作输入的 Python 脚本显然是指 C 定义的对象和函数。我现在想让这些对象中的一些可腌制。

pickle 文档描述了如何使用`__reduce__`. 但这是一个 Python 方法——我将如何在底层 PyObject 中定义它？

相当肯定我误解了一些东西......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T12:22:46.283

该`pickle`模块有纯 python 和 C 变体（称为`cPickle`）。因此，该`__reduce__`方法需要可从 Python 代码调用。

因此，您需要`__reduce__`在您的 C 对象[`PyMethodDef`结构](http://docs.python.org/c-api/structures.html#PyMethodDef)中提供一个具有合适实现的条目。

或者，您也可以使用[`copy_reg`模块](http://docs.python.org/library/copy_reg.html)注册酸洗功能。这个模块的原始用例是为了更好地支持扩展模块；该模块的[源代码](http://hg.python.org/cpython/file/53fa224b95f4/Lib/copy_reg.py)状态：

> 这仅对添加对 C 中定义的扩展类型的 pickle 支持有用，而不适用于用户定义类的实例。

# windows - 编写在 Windows 启动期间运行的程序 - 例如 chkdsk？

> ID：12530345
> 
> 赞同：1
> 
> 时间：2012-09-21T12:10:04.980
> 
> 标签：windows, winapi, boot

像 ScanDisk/chkdsk 这样的程序可以在 Windows 启动时运行，即在登录屏幕出现之前。我以为这仅适用于 Windows 内部程序，但我见过 Avast！防病毒软件提供了相同的功能，可以在尚未加载 Windows 时执行病毒检查。这是如何实现的？即我必须使用什么样的 API 来编写这样的程序？它可以是任何类型的命令行程序，我是否仅限于 Windows API 的子集，我是否必须实现特定的接口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:15:16.233

查看注册表项

**HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager**

**以及BootExecute**的值

 **更多信息在这里：

[http://technet.microsoft.com/en-us/library/cc963230.aspx](http://technet.microsoft.com/en-us/library/cc963230.aspx)**

# facebook - Facebook 应用程序无限滚动问题

> ID：12530348
> 
> 赞同：5
> 
> 时间：2012-09-21T12:10:17.757
> 
> 标签：facebook, iframe, facebook-canvas, infinite-scroll, scrolltop

我正在尝试在我们当前正在构建的 Facebook 应用程序上使用无限滚动，但由于位于 iframe 中，它无法正常工作。

有没有人想出解决这个或类似情况的方法。

[https://github.com/paulirish/infinite-scroll](https://github.com/paulirish/infinite-scroll)

# c++ - 将 UTC tm* 转换为本地化 tm* 的跨平台方法？

> ID：12530349
> 
> 赞同：1
> 
> 时间：2012-09-21T12:10:21.650
> 
> 标签：c++, windows, linux, macos, time

这个问题已经让我难过一分钟了。我正在开发一个用 C++ 编写的程序，我需要能够在两个不同的服务器之间发送以 ISO8601 编码的时间。这里的主要坚持者似乎是 Windows。

到目前为止，我已经`strptime()`从 NetBSD 移植过来，以便轻松地从网络上读取日期/时间字符串并将其转换为`tm*`. 但是，在正确地将其转换为本地化时，我完全被难`tm*`住了，因此我可以使用`strftime()`. 一种天真的方法是简单地取 和 之间的差异`localtime(time(0))`，`gmtime(time(0))`但这对于涉及夏令时的任意日期是不一致的。

到目前为止，我一直采用的方法是仅使用 POSIX 日期和时间函数，并在必要时编写 Windows 填充程序（`strptime()`目前已完成，如果有必要，`timegm()`可能在将来完成）。我宁愿继续这样做，但简单的事实是`tm*`Windows 中的结构缺少 Linux 和 OSX 所做的一些字段，所以我可能别无选择，只能编写由`#if WIN32`. 我也真的不希望为此增加动力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:06:42.053

给定 a`struct tm *utc_tm`你可以把它变成一个`time_t utc`using (nonportable) `timegm`，然后把它变成一个`struct tm *local_tm`using `localtime`：

```
time_t utc = timegm(utc_tm);
struct tm local_tm;
localtime_r(&utc, &local_tm); 
```

据我所知，最简单的实现`timegm`涉及使用月表和闰年计算自己进行转换。或者，如果您`strptime`填写`tm_yday`正确，您可以使用[https://stackoverflow.com/a/9076848/567292](https://stackoverflow.com/a/9076848/567292)中的公式：

```
tm_sec + tm_min*60 + tm_hour*3600 + tm_yday*86400 +
    (tm_year-70)*31536000 + ((tm_year-69)/4)*86400 -
    ((tm_year-1)/100)*86400 + ((tm_year+299)/400)*86400 
```

# php - 在mysql中显示行的创建日期

> ID：12530351
> 
> 赞同：1
> 
> 时间：2012-09-21T12:10:36.953
> 
> 标签：php, mysql

我在用户表中添加了一个新行，以显示每个用户的创建日期。我为此尝试了时间戳和日期时间类型，但它仍然在每个用户旁边显示 0000-00-00 00:00:00。

这是我将行添加到用户表的代码

```
$first_name = trim($_REQUEST['first_name']);
$last_name = trim($_REQUEST['last_name']);
$username = trim($_REQUEST['username']);
$password = trim($_REQUEST['password']);
$email = trim($_REQUEST['email']);
$created = strftime("%Y-%m-%d %H:%M:%S", time());
$insert_sql = sprintf("INSERT INTO users (first_name, last_name, username, password, email, created)" .
"VALUES('%s', '%s', '%s', '%s', '%s', '%s');",
mysql_real_escape_string($first_name),
mysql_real_escape_string($last_name),
mysql_real_escape_string($username),
mysql_real_escape_string(crypt($password, $username)),
mysql_real_escape_string($email),
mysql_real_escape_string($created));
mysql_query($insert_sql) or die(mysql_error()); 
```

这是显示信息的代码

```
$select_users = "SELECT * FROM users";
$result =  mysql_query($select_users);
while ($user = mysql_fetch_array($result)) {
$user_row = sprintf(
"<td><input type='checkbox' name='checkbox[]' id='checkbox[]' value='%d'/></td>" .
"<td>%s %s</td> " .
"<td>%s</td>" .
"<td><a href='mailto:%s'>%s</a></td> " .
"<td>%s</td>" .
"<td><a href='javascript:delete_user(%d);'><img class='delete_user' src='images/trash.png' alt='' title='' border='0' /></a></td>",
$user['user_id'], $user['first_name'], $user['last_name'], $user[username],
$user['email'], $user['email'], $user['created'], $user['user_id']);
echo $user_row; 
```

除了显示 0000-00-00 00:00:00 的创建日期外，我得到了正确显示的所有字段。我不知道我做错了什么。感谢您的帮助。

编辑：我已经有一个名为“updated”的字段，它使用“Current_timestamp”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:17:48.390

您可以在数据库中创建一个名为 created 类型的时间戳，并将默认值设置为 CURRENT_TIMESTAMP，而不是使用 php 设置时间。这将在没有 php 的情况下自动执行您需要的操作。这是代码：

```
 ALTER TABLE `users` ADD COLUMN `created` timestamp DEFAULT CURRENT_TIMESTAMP; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:18:09.530

MySQL 有可能在创建记录时插入的字段上具有时间戳。

在您的 SQL 中，将其用于创建：

```
`Created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP 
```

您不需要任何 PHP 代码来处理时间戳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:11:36.720

一个潜在的解决方法是，由于您知道 $created 的值，因此您实际上不需要转义它。因此，您的 $insert_sql 将是：

```
$insert_sql = sprintf("INSERT INTO users (first_name, last_name, username, password, email, created)"
. "VALUES('%s', '%s', '%s', '%s', '%s', '".$created."');",
mysql_real_escape_string($first_name),
mysql_real_escape_string($last_name),
mysql_real_escape_string($username),
mysql_real_escape_string(crypt($password, $username)),
mysql_real_escape_string($email)); 
```

请注意，这仅适用于您绝对控制有关变量的所有内容时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T12:15:27.910

尝试 $created = date("mdy H:i:s", time());

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T12:16:41.263

您实际上可以在 MySQL 中添加当前时间，而无需重用 current_timestamp。试试这个作为你的插入查询；它不涉及任何数据库架构更改，它仍然应该为您提供正确的结果：

```
$query = "INSERT INTO users (first_name, last_name, username, password, email, created)"
. "VALUES('%s', '%s', '%s', '%s', '%s', now())" 
```

# java - 与热点设备断开连接时，Wifi 设备未从热点列表中清除

> ID：12530354
> 
> 赞同：0
> 
> 时间：2012-09-21T12:10:54.117
> 
> 标签：java, android, android-wifi, jvm-hotspot

我正在使用以下代码扫描连接到启用热点的设备的 wifi 设备。它正在检测几乎所有设备，但问题是当 wifi 设备与热点断开连接时列表没有刷新（即列表显示 wifi 设备，即使它们已断开连接，列表不应该显示设备已断开连接）。如果 wifi 设备连接到我的热点设备一次，它会在列表中显示 wifi 设备，并且设备列表在我不关闭热点之前不会刷新以下是我的代码片段...

> 公共 ArrayList getClientList(boolean onlyReachables, intreachableTimeout) {

```
 BufferedReader br = null;
    ArrayList<ClientScanResultSO> result = null;

   try {
        result = new ArrayList<ClientScanResultSO>();
        br = new BufferedReader(new FileReader("/proc/net/arp"));
        String line;
        while ((line = br.readLine()) != null) {
            String[] splitted = line.split(" +");

            if ((splitted != null) && (splitted.length >= 4)) {
                // Basic sanity check
                String mac = splitted[3];
                System.out.println("mac is***************"+ mac);
                if (mac.matches("..:..:..:..:..:..")) {
                    boolean isReachable = InetAddress.getByName(splitted[0]).isReachable(reachableTimeout);
                    String name = InetAddress.getByName(splitted[0]).getHostName();
                    if (!onlyReachables || isReachable) {
                        result.add(new ClientScanResultSO(splitted[0], splitted[3], splitted[5], isReachable, name));
                    }
                }
            }
        }
    } catch (Exception e) {
        Log.e(this.getClass().toString(), e.getMessage());
    } finally {
        try {
            br.close();
        } catch (IOException e) {
            Log.e(this.getClass().toString(), e.getMessage());
        }
    }

    return result;
} 
```

我希望 wifi 设备与我的启用热点的 android 设备断开连接时不会显示在列表中有人请在这方面帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:21:04.400

我不确定我的理解是否正确，我对您的代码 **String[] splitted = line.split(" +");的以下行有疑虑** 您是否使用空格和 + 符号来连接设备的 MAC 地址。

问候阿吉尔

# ms-access - 在线 MS Access SQL 脚本测试

> ID：12530357
> 
> 赞同：8
> 
> 时间：2012-09-21T12:11:07.653
> 
> 标签：ms-access

是否有一些类似于[SQL Fiddle](http://sqlfiddle.com)但适用于 MS Access 的在线工具？我花了几分钟搜索，我找不到任何东西。

# jquery - ajax 将远程 url 加载到 div

> ID：12530360
> 
> 赞同：0
> 
> 时间：2012-09-21T12:11:17.220
> 
> 标签：jquery, ajax, iframe

问题：

我正在显示来自许多网站的新闻提要。当我点击一个链接时，我希望弹出一个模式面板，并且模式面板必须加载链接的内容。

我尝试的解决方案：

1.  使用 Jquery load,$.get 方法获取远程 url 的内容。这很好用，除了网站反过来在其 html 中使用相对 url 的事实。例如。ibm.com 在提到图像时有它们的来源

    `<img src="/some/relative/path/image.jpg" />`

2.  尝试使用 iframe。它在某些网站上运行良好，但某些网站被阻止在 iframe 中显示并抛出错误消息

    拒绝显示文档，因为 X-Frame-Options 禁止显示。

    请提供适当的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:14:19.027

你可以使用jquery`load`方法更好

例如：-`$("#someDiv").load("external_url");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T15:04:23.263

我会采用 jQuery.load 方法，然后您需要一些解决方法来解决相对 URL 问题。

load 方法有一个回调选项，您可以使用它来修复注入的相对 URL。

你可以这样做：

```
var baseSite = "http://www.somewhere.com";
var baseURL = "/your/folder/";
var container = $('#container').load(baseSite+baseURL+"your-page.html", function(){
    //once you're here, DOM has been updated already!

    //fix relative URLs like "../assets/img/logo.png"
    container.find("img[src^='/']").each(function(){
        $(this).attr('src', baseSite+baseURL+$(this).attr('src'));
    });

    //fix absolute URLs like "/base/path/img/logo.png" (needed only if different domain!)
    container.find("img[src$='/']").each(function(){
        $(this).attr('src', baseSite+$(this).attr('src'));
    });

    //TODO: the same for links!
}); 
```

# visual-studio-2010 - 更改 Visual Studio 2010 缩进规则

> ID：12530361
> 
> 赞同：1
> 
> 时间：2012-09-21T12:11:24.163
> 
> 标签：visual-studio-2010, indentation

有没有办法改变 C++ 的 VS2010 缩进规则？

基本上我只想删除命名空间内容的自动缩进。

从：

```
namespace name {
    //contents automatically indented
    class MyClass
    {
        //...
    };
} 
```

至

```
namespace name {

//contents automatically indented
class MyClass
{
    //...
};

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:24:32.403

是的，有一个可用的**宏**，从积极的反馈来看，它运行良好。代码在[这里](https://stackoverflow.com/questions/3727862/is-there-any-way-to-make-visual-studio-stop-indenting-namespaces)。

安装后，可以在宏资源管理器 ( `Tools->Macros->Macro Explorer`) 中访问宏。这不适用于 VS Express 版本。

其他基本格式选项位于`Tools > Options > Text Editor > C++ > Formatting`

# jquery - 为 jquery 模型添加一个关闭按钮（BlockUI）

> ID：12530369
> 
> 赞同：6
> 
> 时间：2012-09-21T12:11:56.590
> 
> 标签：jquery, jquery-plugins

我使用了以下正常工作但我需要一个关闭按钮而不是自动关闭如何做到这一点？（我正在使用 jQuery BlockUI [http://www.malsup.com/jquery/block/#demos](http://www.malsup.com/jquery/block/#demos)）

```
 $(document).ready(function() { 
     $('#app').click(function() { 
         $.blockUI({ 
             theme:     true, 
             title:    'Welcome to your page', 
             message:  '<p>Please have a look..</p>', 
             timeout:   2000 
        }); 
    });    
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:58:38.970

我不知道你是否仍然对此感兴趣，但我一直在寻找它但找不到它，所以我不得不创建自己的解决方案。您必须更新插件（jquery.blockUI.js），然后转到这一行：

```
if ( opts.title ) {
    s +=  '<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title || '&nbsp;')+'</div>'; 
```

并用这个替换它：

```
if ( opts.title ) {
    s += '<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"><span id="ui-id-1" class="ui-dialog-title">' +(opts.title || '&nbsp;')+ '</span><button id="btnCloseBlockUI" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only ui-dialog-titlebar-close" role="button" aria-disabled="false" title="close"><span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span></button></div>'; 
```

这将在标题栏中添加一个按钮。要添加按钮单击处理程序：

```
//Unblocks the UI when clicking the close button
$("button#btnCloseBlockUI.ui-button").click(function () {
    $.unblockUI();
}); 
```

您可以更花哨并添加一个额外的选项，例如`showCloseButtonUI`并仅在设置为 true 时才显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:23:36.403

看看[这个](http://www.malsup.com/jquery/block/#dialog)。

这个想法是显示一个自定义对话框，并调用 $.unblockUI(); 当用户单击“否”按钮时。

# asp.net - 首先在 ASP.NET 中加载特定部分

> ID：12530375
> 
> 赞同：0
> 
> 时间：2012-09-21T12:12:14.220
> 
> 标签：asp.net

页面中充满横幅的右侧面板需要在左侧面板之前或并排加载。问题是左侧面板充满了数据，加载需要很长时间，因此右侧面板在左侧面板加载完成之前永远不会出现。有人可以告诉我如何首先或并排加载右侧面板吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:42:14.297

您可以使用 jQuery load() 函数并将面板放在外部 aspx 文件中：

[http://api.jquery.com/load](http://api.jquery.com/load)

这种技术将在大约同时加载面板。

我假设您的面板中没有任何服务器端事件处理...

# lua - Lua--从 .txt 文件中解析文本并存储值

> ID：12530377
> 
> 赞同：2
> 
> 时间：2012-09-21T12:12:18.747
> 
> 标签：lua

当我尝试运行我的代码时收到以下错误：

```
lua:readFile.lua:7: attempt to call method 'split' (a nil value) 
```

我正在自学 Lua 并做一些练习。我正在尝试解析文本文件中的各个值，然后对它们进行处理。我可以打开文件，如果我不尝试解析值，我可以打印内容。
我已经单独尝试过：

```
dollars, tickets = line:split(" ")  
dollars, tickets = line:split("(%w+)", " ") 
```

连同其他几个迭代，我现在不记得了。

这是我的代码：

```
myfile = io.open("C:\\tickets.txt", "r")

if myfile then
print("True")    --test print
for line in myfile:lines() do
    local dollars, tickets = unpack(line:split(" "))
    print(dollars)
end
end
print("Done")  --test print
myfile:close() 
```

这是tickets.txt文件的全部内容：

250 5750
100 28000
50 35750
25 18750

我显然在 split 方法中遗漏了一些东西，但我不知道是什么。

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:59:55.157

如果您只想从文件中读取数字并且不想强制它们在每行上为两个，您可以使用以下代码：

```
while true do
  local dollars,tickets = myfile:read("*n","*n")
  if dollars==nil or tickets==nil then break end
  print(dollars)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T12:36:24.750

Lua 中的字符串库不包含“拆分”函数。您必须自己实现一个（Lua wiki 上有示例），或者使用 Lua 的模式匹配功能来解析出这些片段。例如，您可以执行以下操作：

```
local dollars, tickets = line:match("(%d+) (%d+)") 
```

# java - 如何更改二维数组中数组元素的值？

> ID：12530380
> 
> 赞同：-1
> 
> 时间：2012-09-21T12:12:27.250
> 
> 标签：java, arrays, 2d

假设我得到了这张打印出来的地图：

```
00000
00000
00000 
```

如何将 [0][0] 中的元素更改为 X？

换句话说，如何使用屏幕输入使它看起来像这样：

```
X0000
00000
00000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:16:03.340

考虑到它的`2D Array`类型`String`......

`arr[0][0] = "X";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:24:43.867

运行这个：

```
import java.util.*;
import java.lang.*;

class Main
{
        public static void main (String[] args) throws java.lang.Exception
        {
                String[][] array = {{"0","0","0"},{"0","0","0"},{"0","0","0"}};

                System.out.println("Before: ");
                printArray(array);

                array[0][0] = "x";
                System.out.println("After: ");
                printArray(array);

        }

        private static void printArray(String[][] array){
                for(int i=0; i<array.length; i++){
                        for(int j=0; j<array[0].length; j++){
                                System.out.print(array[i][j]);
                        }
                        System.out.println("");         
                }
        }
} 
```

或者去这里：http: [//ideone.com/2DQC1](http://ideone.com/2DQC1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-25T12:57:35.017

在此示例中，用户 k 检查数组元素值并更改它们

```
import java.util.Scanner;

public class HelloWorld{

     public static void main(String []args){
         Scanner in = new Scanner(System.in);
        int inputcol = 0;
        int inputrow = 0;
        int newnum = 0;
        int uinput = 0;
        int repeat = 1;
        int[][] a = new int[][]{
         { 10, 20, 30, 40, 50, 60, 70, 80, 90, 100 },
         { 110, 120, 130, 140, 150, 160, 170, 180, 190, 200 },
         { 210, 220, 230, 240, 250, 260, 270, 280, 290, 300 },
         { 310, 320, 330, 340, 350, 360, 370, 380, 390, 400 },
         { 410, 420, 430, 0, 440, 450, 460, 470, 490, 500 }
        }; 
        while(repeat!=0)
        {
        System.out.println("Select Option:\n 1 for View Value:\n 2 for Replace Value: ");
        uinput = in.nextInt();
        //int b[][]={{1,3,4},{3,4,5}}; 
        if(uinput==1)
        {
        System.out.println("Enter Row: ");
        inputrow = in.nextInt();
        System.out.println("Enter Cols:");
        inputcol = in.nextInt();
        System.out.println(a[inputrow][inputcol]);
        }
        else
        if(uinput==2)
        {
            System.out.println("Enter Row: ");
        inputrow = in.nextInt();
        System.out.println("Enter Cols:");
        inputcol = in.nextInt();
        System.out.println("Enter New Number: ");
        newnum = in.nextInt();
        a[inputrow][inputcol] = newnum;
        }
        else
        {
            System.out.println("Check your input. ");
        }
        System.out.println("Want to repeat it? if yes press 1\n for exit press 0 ");
        repeat = in.nextInt();
        }

     }
} 
```

# multidimensional-array - 使用数组的 Numpy 索引

> ID：12530381
> 
> 赞同：1
> 
> 时间：2012-09-21T12:12:28.590
> 
> 标签：multidimensional-array, numpy

我试图从数组中返回一个（方形）部分，其中索引环绕边缘。我需要处理一些索引，但是它可以工作，但是，我希望最后两行代码具有相同的结果，为什么不呢？numpy 如何解释最后一行？

还有一个额外的问题：我用这种方法效率低下吗？我正在使用 ，`product`因为我需要对范围取模以便它环绕，否则我`a[imin:imax, jmin:jmax, :]`当然会使用 。

```
import numpy as np
from itertools import product

i = np.arange(-1, 2) % 3
j = np.arange(1, 4) % 3

a = np.random.randint(1,10,(3,3,2))

print a[i,j,:]
# Gives 3 entries [(i[0],j[0]), (i[1],j[1]), (i[2],j[2])]
# This is not what I want...

indices = list(product(i, j))
print indices

indices = zip(*indices)

print 'a[indices]\n', a[indices]
# This works, but when I'm explicit:
print 'a[indices, :]\n', a[indices, :]
# Huh? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T12:41:25.963

问题是在以下情况下会触发[高级索引：](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#advanced-indexing)

> 选择对象*obj*是 [...] 具有至少一个序列对象或 ndarray 的元组

在您的情况下，最简单的解决方法是使用重复索引：

```
a[i][:, j] 
```

另一种方法是使用`ndarray.take`，如果您指定，它将为您执行模运算`mode='wrap'`：

```
a.take(np.arange(-1, 2), axis=0, mode='wrap').take(np.arange(1, 4), axis=1, mode='wrap') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T12:46:30.520

提供另一种高级索引方法，我认为它比`product`解决方案更好。

如果每个维度都有一个整数数组，它们会一起广播，并且输出与广播形状相同（您会明白我的意思）...

```
i, j = np.ix_(i,j) # this adds extra empty axes

print i,j 

print a[i,j]
# and now you will actually *not* be surprised:
print a[i,j,:] 
```

请注意，这是一个 3x3x2 数组，而您有一个 9x2 数组，但简单的整形将解决该问题，并且 3x3x2 数组实际上可能更接近您想要的。

Actually the surprise is still hidden in a way, because in your examples `a[indices]` is the same as `a[indices[0], indicies[1]]` but `a[indicies,:]` is `a[(indicies[0], indicies[1]),:]` which is not a big surprise that it is different. Note that `a[indicies[0], indicies[1],:]` does give the same result.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:24:23.380

请参阅：[http ://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#advanced-indexing](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#advanced-indexing)

添加时`:`，您将混合整数索引和切片。这些规则非常复杂，并且比我在上面的链接中解释得更好。

# java - Spring Web MVC 与 JAX WS 的结合

> ID：12530382
> 
> 赞同：2
> 
> 时间：2012-09-21T12:12:35.993
> 
> 标签：java, spring-mvc, jax-ws

大家好，我正在将 Spring web mvc 集成到 Jax-ws 下面是我的代码。web.xml

```
<web-app id="WebApp_ID" version="2.4"
xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

<display-name>Spring Web MVC Application</display-name>

<servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/spring/*</url-pattern>
</servlet-mapping>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/mvc-dispatcher-servlet.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
 <servlet>
    <servlet-name>jaxws-servlet</servlet-name>
    <servlet-class>com.sun.xml.ws.transport.http.servlet.WSSpringServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>jaxws-servlet</servlet-name>
    <url-pattern>/hello</url-pattern>
</servlet-mapping> 
```

我的 mvc-dispatcher-servlet.xml 文件如下

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:jaxws="http://cxf.apache.org/jaxws" xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ws="http://jax-ws.dev.java.net/spring/core"
xmlns:wss="http://jax-ws.dev.java.net/spring/servlet" xmlns:context="http://www.springframework.org/schema/context"
xmlns:beans="http://www.springframework.org/schema/beans" xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
    http://jax-ws.dev.java.net/spring/core  http://jax-ws.dev.java.net/spring/core.xsd
    http://jax-ws.dev.java.net/spring/servlet http://jax-ws.dev.java.net/spring/servlet.xsd
    http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">
<mvc:resources mapping="/resources/**" location="/resources/" />

<context:component-scan base-package="com.softid" />

<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/WEB-INF/pages/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean>
<wss:binding url="/hello">
    <wss:service>
        <ws:service bean="#helloWs" />
    </wss:service>
</wss:binding> 
```

我的 Pom.xml 文件在下面

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.mkyong.common</groupId>
<artifactId>SpringMVC</artifactId>
<packaging>war</packaging>
<version>1.0-SNAPSHOT</version>
<name>SpringMVC Maven Webapp</name>
<url>http://maven.apache.org</url>
<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>com.sun.xml.ws</groupId>
        <artifactId>jaxws-rt</artifactId>
        <version>2.2.3</version>
    </dependency>

    <!-- Library from java.net, integrate Spring with JAX-WS -->
    <dependency>
        <groupId>org.jvnet.jax-ws-commons.spring</groupId>
        <artifactId>jaxws-spring</artifactId>
        <version>1.8</version>
        <exclusions>
            <exclusion>
                <groupId>javax.servlet</groupId>
                <artifactId>servlet-api</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-core</artifactId>
            </exclusion>
            <exclusion>
                <artifactId>xbean</artifactId>
                <groupId>org.apache.xbean</groupId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-context</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-context</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.xml.stream.buffer</groupId>
                <artifactId>streambuffer</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.jvnet.staxex</groupId>
                <artifactId>stax-ex</artifactId>
            </exclusion>

        </exclusions>
    </dependency>

</dependencies>
<build>
    <finalName>SpringMVC</finalName>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

现在的问题是，当我添加 spring jax-ws 东西时，spring dispatcher servelt 不起作用。就像我点击一个 URL 一样`http://localhost:8080/SpringMVC/spring/welcome`，它会给出 404 错误。在控制台中显示

```
WARNING: No mapping found for HTTP request with URI [/SpringMVC/spring/welcome] in DispatcherServlet with name 'mvc-dispatcher'. 
```

如果我删除 jax-ws 的东西，那么它工作正常。谁能告诉我我在做什么错。

编辑：

我的欢迎控制器类是

```
package com.softid.controller;

import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
@RequestMapping("/welcome")
public class HelloController {

    @RequestMapping(method = RequestMethod.GET)
    public String printWelcome(ModelMap model) {
        model.addAttribute("message", "Spring 3 MVC Hello World");
        return "hello";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:41:59.300

我认为您在调度程序 xml 文件中缺少一个重要标签。

```
<mvc:annotation-driven />
&
<context:annotation-config> 
```

这些启用 Spring MVC @Controller 编程模型。在 xmlns 条目之后的 xml 开头添加这些。这应该有效。阅读[此](https://stackoverflow.com/questions/3977973/whats-the-difference-between-mvcannotation-driven-and-contextannotation)内容供您参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:23:44.157

你应该使用“SpringMVC/spring/hello”而不是“SpringMVC/spring/welcome”。因为您提到 wsdl 名称为“hello”

# jquery - 使用图像 src jQuery 更改 id

> ID：12530384
> 
> 赞同：1
> 
> 时间：2012-09-21T12:12:39.130
> 
> 标签：jquery, attributes

我正在尝试创建一个工具提示效果，我正在创建一个新的 DIV，用另一个页面的内容填充它，然后在该图像被鼠标悬停时将其显示在图像下方。这是用于创建 div、用内容和鼠标悬停填充它的代码。

```
$(document).ready(function() {
    $('<div id="DETAILS"> </div>').appendTo("body");
    $('#DETAILS').load('Test.html #CREATEYOUROWN');
    $("#DETAILS").hide();
    $('#PUZZLE').mouseover(function() {
        $("#DETAILS").show();
    });
    $('#PUZZLE').mouseleave(function() {
        $("#DETAILS").hide();
    });
});​ 
```

这行得通。但是，我需要将其放入 CMS 中，其中大约有 20 个设置为项目并由内容编辑器添加到页面中，在他们构建页面时从列表中直接选择。这些项目有能力将 javascript 归因于它们，但是当它们被添加到页面时，它们没有自己的 id。唯一保持不变的是图像源。

有没有办法使用图像源来改变图像的id？

我对 jQuery 还是很陌生，所以如果有办法让这整个事情做得更好，那么我将非常感谢您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:16:34.730

听起来你应该使用像 jsRender 这样的 javascript 模板引擎：[https ://github.com/BorisMoore/jsrender](https://github.com/BorisMoore/jsrender)

这样，您可以构建一个模板并像这样定义您的 ID：

`<div id="mydiv_{{>counter}}"></div>`

jsRender 演示和示例代码：[http ://borismoore.github.com/jsrender/demos/index.html](http://borismoore.github.com/jsrender/demos/index.html)

另外，请记住，还有许多其他引擎，我只是碰巧喜欢 jsRender。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:24:14.757

我不完全理解这个问题，但您可以通过其来源选择一个项目并使用 jQuery 更改它的 id：

$('[src="image"]').attr('id', 'newId');

我不知道这是否会有所帮助，但请尝试一下。

# mysql - 具有多个相同记录的布尔标志

> ID：12530393
> 
> 赞同：0
> 
> 时间：2012-09-21T12:13:10.730
> 
> 标签：mysql, database, boolean

从我的表中插入/更新布尔值的最佳解决方案是什么。

每周或每月，`point`可以更改数量，例如当前数据：

```
+----+----------+-----------+--------------+-------+--------+
| id | phone_id | tarrif_id | affiliate_id | point | active |
+----+----------+-----------+--------------+-------+--------+
|  2 |        6 |         2 |            3 |   7.3 |      0 |
|  3 |        6 |         2 |            3 |   8.5 |      0 |
|  4 |        6 |         2 |            3 |  12.5 |      0 |
|  5 |        6 |         2 |            3 |   3.5 |      1 |
|  6 |       20 |         2 |            3 |  10.5 |      1 |
+----+----------+-----------+--------------+-------+--------+ 
```

我会插入一个新的记录`phone_id`，`tarrif_id`并`affiliate_id`带有一个新的点并禁用其他记录`active=0`。

新点更改，例如：

```
+----+----------+-----------+--------------+-------+--------+
| id | phone_id | tarrif_id | affiliate_id | point | active |
+----+----------+-----------+--------------+-------+--------+
|  2 |        6 |         2 |            3 |   7.3 |      0 |
|  3 |        6 |         2 |            3 |   8.5 |      0 |
|  4 |        6 |         2 |            3 |  12.5 |      0 |
|  5 |        6 |         2 |            3 |   3.5 |      0 |
|  6 |       20 |         2 |            3 |  10.5 |      0 |
|  7 |        6 |         2 |            3 |  20.2 |      1 |
|  8 |       20 |         2 |            3 |  33.7 |      1 |
+----+----------+-----------+--------------+-------+--------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:25:18.710

你可以这样做：

```
-- 1\. Disable other records
UPDATE point SET active = 0;

-- 2\. Insert new rows
INSERT INTO point (phone_id, tarrif_id, affiliate_id, point, active)
SELECT phone_id, tarrif_id, affiliate_id, /* Your computation here */, 1
FROM point
GROUP BY phone_id, tarrif_id, affiliate_id
WHERE active = 0; 
```

您仍然需要知道如何计算新`point`值（在您的示例中为 20.2 和 33.7）。

# c# - 是否有任何用于 Visual Studio 2012 的库、插件或任何其他工具或方法来为现有数据库创建 C# 初始化程序类？

> ID：12530396
> 
> 赞同：2
> 
> 时间：2012-09-21T12:13:17.227
> 
> 标签：c#, database, visual-studio, entity-framework

使用 SQL Server Management Studio，我们能够将整个现有数据库编写成一个包含所有数据库架构和数据的 sql 脚本。我需要的是一些工具，它会自动创建类似的 C# 数据库初始化器类或类，它们将表示数据库结构模型，并用它的数据填充这个数据库。也许有可能以某种方式将 SQL 脚本转换为 C#？有什么建议么？

PS 要创建数据库，我使用 EntityFramework codefirst 策略。

# c++ - gcc 4.8 或更早版本对正则表达式有问题吗？

> ID：12530406
> 
> 赞同：104
> 
> 时间：2012-09-21T12:13:43.107
> 
> 标签：c++, regex, gcc, c++11, libstdc++

我正在尝试在 C++11 代码中使用 std::regex，但似乎支持有点错误。一个例子：

```
#include <regex>
#include <iostream>

int main (int argc, const char * argv[]) {
    std::regex r("st|mt|tr");
    std::cerr << "st|mt|tr" << " matches st? " << std::regex_match("st", r) << std::endl;
    std::cerr << "st|mt|tr" << " matches mt? " << std::regex_match("mt", r) << std::endl;
    std::cerr << "st|mt|tr" << " matches tr? " << std::regex_match("tr", r) << std::endl;
} 
```

输出：

```
st|mt|tr matches st? 1
st|mt|tr matches mt? 1
st|mt|tr matches tr? 0 
```

当使用 gcc (MacPorts gcc47 4.7.1_2) 4.7.1 编译时，或者使用

```
g++ *.cc -o test -std=c++11
g++ *.cc -o test -std=c++0x 
```

或者

```
g++ *.cc -o test -std=gnu++0x 
```

此外，如果我只有两个替代模式，例如`st|mt`，正则表达式效果很好，所以看起来最后一个由于某些原因不匹配。该代码适用于 Apple LLVM 编译器。

关于如何解决这个问题的任何想法？

**更新**一种可能的解决方案是使用组来实现多种替代方案，例如`(st|mt)|tr`.

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2012-09-30T21:45:38.863

**`<regex>`在 GCC 4.9.0 中实现并发布。**

在您的（旧）版本的 GCC 中，它[没有实现](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53631)。

该原型`<regex>`代码是在 GCC 的所有 C++0x 支持**高度**实验性的时候添加的，跟踪早期的 C++0x 草案并可供人们进行试验。这使人们能够在标准定稿之前发现问题并向标准委员会提供反馈。当时，很多人很高兴能够在 C++11 完成之前以及许多其他编译器提供*任何*支持之前访问前沿特性，而这些反馈确实有助于改进 C++11。这是一件好事^(TM)。

该`<regex>`代码从未处于有用状态，而是像当时许多其他代码一样作为正在进行的工作添加。它被签入并可供其他人合作，如果他们愿意的话，目的是最终完成。

这通常是开源的工作方式：[尽早发布，经常发布](http://en.wikipedia.org/wiki/Release_early,_release_often)——不幸的是，`<regex>`我们只得到了早期的部分，而不是完成实施的经常部分。

库的大部分部分更完整，现在几乎完全实现了，但`<regex>`还没有实现，所以它自添加以来一直处于未完成状态。

> 不过说真的，谁认为只提供“返回 false”的 regex_search 实现是个好主意呢？

几年前这不是一个坏主意，当时 C++0x 仍在进行中，我们发布了许多部分实现。没有人认为它会在这么长时间内无法使用，所以事后看来，也许它应该被禁用并且需要一个宏或内置选项来启用它。但是那艘船很久以前就航行了。*libstdc++.so*库中的导出符号依赖于正则表达式代码，因此简单地删除它（例如，在 GCC 4.8 中）并非易事。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-12-16T14:07:54.633

# 特征检测

这是一个片段，用于检测是否`libstdc++`使用 C 预处理器定义实现了实现：

```
#include <regex>
#if __cplusplus >= 201103L &&                             \
    (!defined(__GLIBCXX__) || (__cplusplus >= 201402L) || \
        (defined(_GLIBCXX_REGEX_DFS_QUANTIFIERS_LIMIT) || \
         defined(_GLIBCXX_REGEX_STATE_LIMIT)           || \
             (defined(_GLIBCXX_RELEASE)                && \
             _GLIBCXX_RELEASE > 4)))
#define HAVE_WORKING_REGEX 1
#else
#define HAVE_WORKING_REGEX 0
#endif 
```

# 宏

*   `_GLIBCXX_REGEX_DFS_QUANTIFIERS_LIMIT`[定义](https://github.com/gcc-mirror/gcc/blob/gcc-4_9_0-release/libstdc%2B%2B-v3/include/bits/regex.tcc#L35)在_ `bits/regex.tcc`_`4.9.x`
*   `_GLIBCXX_REGEX_STATE_LIMIT`[定义](https://github.com/gcc-mirror/gcc/blob/gcc-5_1_0-release/libstdc%2B%2B-v3/include/bits/regex_automaton.h#L33)在_ `bits/regex_automatron.h`_`5+`
*   `_GLIBCXX_RELEASE``7+`由于[这个答案](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=78905)而被添加到，并且是 GCC 主要版本

# 测试

您可以像这样使用 GCC 对其进行测试：

```
cat << EOF | g++ --std=c++11 -x c++ - && ./a.out
#include <regex>

#if __cplusplus >= 201103L &&                             \
    (!defined(__GLIBCXX__) || (__cplusplus >= 201402L) || \
        (defined(_GLIBCXX_REGEX_DFS_QUANTIFIERS_LIMIT) || \
         defined(_GLIBCXX_REGEX_STATE_LIMIT)           || \
             (defined(_GLIBCXX_RELEASE)                && \
             _GLIBCXX_RELEASE > 4)))
#define HAVE_WORKING_REGEX 1
#else
#define HAVE_WORKING_REGEX 0
#endif

#include <iostream>

int main() {
  const std::regex regex(".*");
  const std::string string = "This should match!";
  const auto result = std::regex_search(string, regex);
#if HAVE_WORKING_REGEX
  std::cerr << "<regex> works, look: " << std::boolalpha << result << std::endl;
#else
  std::cerr << "<regex> doesn't work, look: " << std::boolalpha << result << std::endl;
#endif
  return result ? EXIT_SUCCESS : EXIT_FAILURE;
}
EOF 
```

# 结果

以下是各种编译器的一些结果：

* * *

```
$ gcc --version
gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-11)
Copyright (C) 2015 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ ./a.out
<regex> doesn't work, look: false 
```

* * *

```
$ gcc --version
gcc (GCC) 6.2.1 20160830
Copyright (C) 2016 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ ./a.out
<regex> works, look: true 
```

* * *

```
$ gcc --version
gcc (Debian 4.9.2-10) 4.9.2
Copyright (C) 2014 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ ./a.out
<regex> works, look: true 
```

* * *

```
$ gcc --version
gcc (Ubuntu 6.2.0-5ubuntu12) 6.2.0 20161005
Copyright (C) 2016 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ ./a.out
<regex> works, look: true 
```

* * *

```
$ gcc --version
gcc (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609
Copyright (C) 2015 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ ./a.out
<regex> works, look: true 
```

* * *

```
$ gcc --version
gcc (GCC) 6.2.1 20160830
Copyright (C) 2016 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ clang --version
clang version 3.9.0 (tags/RELEASE_390/final)
Target: x86_64-unknown-linux-gnu
Thread model: posix
InstalledDir: /usr/bin
$ ./a.out  # compiled with 'clang -lstdc++'
<regex> works, look: true 
```

* * *

# 这里是龙

这是完全不受支持的，它依赖于 GCC 开发人员已放入`bits/regex*`标头中的私有宏的检测。*他们随时*都可能变身离开。希望它们不会在当前的 4.9.x、5.x、6.x 版本中被删除，但它们可能会在 7.x 版本中消失。

如果 GCC 开发人员`#define _GLIBCXX_HAVE_WORKING_REGEX 1`在 7.x 版本中添加了一个（或其他东西，提示提示轻推）并持续存在，则可以更新此代码段以包含该代码段，并且以后的 GCC 版本将与上面的代码段一起使用。

据我所知，除了 YMMV 之外，所有其他编译器都可以正常`<regex>`工作`__cplusplus >= 201103L`。

显然，如果有人在标头之外定义`_GLIBCXX_REGEX_DFS_QUANTIFIERS_LIMIT`or宏，这将完全中断。`_GLIBCXX_REGEX_STATE_LIMIT``stdc++-v3`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-10T18:25:53.720

目前（在 g++ (GCC) 4.9.2 中使用 std=c++14）仍然不接受 regex_match。

这是一种类似于 regex_match 但使用 sregex_token_iterator 的方法。它适用于 g++。

```
string line="1a2b3c";
std::regex re("(\\d)");
std::vector<std::string> inVector{
    std::sregex_token_iterator(line.begin(), line.end(), re, 1), {}
};

//prints all matches
for(int i=0; i<inVector.size(); ++i)
    std::cout << i << ":" << inVector[i] << endl; 
```

它将打印 1 2 3

您可以阅读 sregex_token_iterator 参考： [http ://en.cppreference.com/w/cpp/regex/regex_token_iterator](http://en.cppreference.com/w/cpp/regex/regex_token_iterator)

# c++ - 在编译时常量中下标字符串文字

> ID：12530408
> 
> 赞同：2
> 
> 时间：2012-09-21T12:13:49.320
> 
> 标签：c++, c++11, language-lawyer, constexpr

> **可能重复：**
> [字符串文字可以在常量表达式中下标吗？](https://stackoverflow.com/questions/7424647/can-a-string-literal-be-subscripted-in-a-constant-expression)

如果我下标字符串文字，结果是编译时常量吗？换句话说，以下代码是否有效？

```
constexpr char x = "a"[0]; 
```

GCC 4.7 说它是，但是标准在这个问题上必须说什么？

对于好奇的人：我不能只写`'a'`，因为字符串文字是字符串化运算符的结果。一些编译器确实有一个字符化运算符，但它只是一个扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:19:27.873

我认为您正在查看 5.19 [expr.const]：

> 2 - 条件表达式是核心常量表达式，除非它涉及以下 [...]
> 
> *   左值到右值的转换（4.1），除非它应用于
>     *   整数或枚举类型的非易失性左值，它引用具有先前初始化的非易失性 const 对象，用常量表达式初始化 [注意：字符串文字 (2.14.5) 对应于此类对象的数组。——尾注] [...]

因此，字符串文字下标操作的结果可以转换为核心常量表达式中的右值。

这在为用户定义的文字和用户定义的字符串文字定义 constexpr 运算符时很有用，尽管在某些情况下可变参数形式可能更可行。

# android - 如何从字符串中的单选按钮获取文本并检查它是否为空

> ID：12530409
> 
> 赞同：-2
> 
> 时间：2012-09-21T12:13:54.533
> 
> 标签：android, android-button

`radioButton1.getText().toString().equals("")`下面的代码中的错误是什么？

我想强制用户填写此字段，如果他将该字段留空，则发送一条填写必填字段的消息。我该怎么做呢？

```
page1.setOnClickListener(new View.OnClickListener() { 

public void onClick(View v) { 
    if(radioButton1.getText().toString().equals("")||radioButton2.getText().toString().equals("")||radioButton3.getText().toString().equals("")||radioButton4.getText().toString().equals("")
||petn.getText().toString().equals("")||breed.getText().toString().equals("")||color.getText().toString().equals("")||alergic.getText().toString().equals("")||ath_locat.getText().toString().equals("")||d_condi.getText().toString().equals("")||weight1.getText().toString().equals("")
    )
    { 
    Log.e("onclick", ",pd"); 
    Toast msg = Toast.makeText( 
    My2Activity.this,"Please fill the * required field",Toast.LENGTH_LONG); 
    msg.show(); 
     } 
    else{ 
    PostData(); 
    Intent d = new Intent(getApplicationContext(), 
    My1Activity.class); 
    startActivity(d); 
    } 
    } 
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:27:31.163

```
if(radioButton1.isChecked())
{

}
else
{

} 
```

您想将 OnCheckedChangeListener 设置为单选按钮

```
radioButton1.setOnCheckedChangeListener(new RadioButton.OnCheckedChangeListener()
{
@Override
public void onCheckedChanged(CompoundButton arg0, boolean arg1) 
{

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:25:40.470

我认为你应该使用

```
radioButton1.isChecked() 
```

# c# - 从列表中选择 3 个相同的项目

> ID：12530410
> 
> 赞同：0
> 
> 时间：2012-09-21T12:13:55.597
> 
> 标签：c#, linq

我需要查找列表中是否有 3 个相同的项目。

**它应该使用覆盖的`.Equals()`方法**比较元素。我尝试了很多方法，但都失败了。它是否返回 bool 值或 items 本身并不重要。每次添加新项目后都会调用该函数，所以只要它检测到3个相同项目在列表中的点就没有关系。

这可能是微不足道的，但我对 Linq 的了解非常薄弱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:17:03.840

尝试

```
return
    collection.Any(any => collection.Count(item => item.Equals(any)) == 3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:26:58.950

通过将项目本身分组并评估任何组是否恰好包含三个项目，您将收到预期的结果。

```
private bool ContainsTriple<T>(IList<T> items){
    return items.GroupBy(i => i).Any(l => l.Count() == 3);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T14:10:01.980

为了更好地表达我的概念：

```
static class EnumerableExtensions
{
    public static IEnumerable<T> FirstRepeatedTimes<T>(this IEnumerable<T> sequence, int threshold)
    {
        if (!sequence.Any())
            throw new ArgumentException("Sequence must contain elements", "sequence");
        if (threshold < 2)
            throw new ArgumentException("DuplicateCount must be greater than 1", "threshold");

        return FirstRepeatedTimesImpl(sequence, threshold);
    }

    static IEnumerable<T> FirstRepeatedTimesImpl<T>(this IEnumerable<T> sequence, int threshold)
    {
        var map = new Dictionary<T, int>();
        foreach(var e in sequence)
        {
            if (!map.ContainsKey(e))
                map.Add(e, 0);
            if (map[e] + 1 == threshold)
            {
                yield return e;
                yield break;
            }
            map[e] = map[e] + 1;
        }
    }
} 
```

你会像这样使用它：

```
var list = new List<int>() { 1,2,2,3,4,3,3 };

// list contains anything for 3 times?
var found = list.FirstRepeatedTimes(3).Any(); 
```

它可能会消耗更多内存，但它最多枚举列表一次。这是林克吗？我写它的方式，它只产生一个元素（第一个找到的），或者没有元素，如果你愿意，你可以在它上面进一步组合。您可以使用`FirstOfDefault()`而不是`Any()`，然后使用找到的元素或`0`（或者`null`如果我们处理引用类型）。这样你就可以选择了。

这只是另一种看待它的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T12:20:46.537

```
 static void Main(string[] args)
    {
        List<string> col = new List<string>();

        col.Add("a");
        Console.WriteLine(Has_3(col));
        Console.ReadKey();
        col.Add("a");
        Console.WriteLine(Has_3(col));
        Console.ReadKey();
        col.Add("a");
        Console.WriteLine(Has_3(col));
        Console.ReadKey(); 
        col.Add("a");
        Console.WriteLine(Has_3(col));
        Console.ReadKey();
    }

    static bool Has_3(List<string> col)
    {
        return col.Count(x => x == "a").Equals(3);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T12:21:30.827

我的第一个想法是，这可能可以通过使用 Group() 方法来完成，如下所示：

```
var ints = new List<int>(new[] { 1, 2, 3, 4, 5, 6, 2, 2 });

var first = ints.GroupBy(n => n)
    .Select(g => new { g.Key, Count = g.Count() })
    .First(g => g.Count >= 3);

Console.WriteLine("Found {0} instances of {1}", first.Count, first.Key); 
```

此代码段检查 3 个或更多相同项目，并选择第一个符合条件的项目，您可能想要更改此设置。并使其适应您的特定对象而不是整数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T12:21:42.933

这是一个扩展：

```
public static bool ContainsNTimes<T>(this IEnumerable<T> sequence, T element, int duplicateCount)
{
    if (element == null)
        throw new ArgumentNullException("element");
    if (!sequence.Any())
        throw new ArgumentException("Sequence must contain elements", "sequence");
    if (duplicateCount < 1)
         throw new ArgumentException("DuplicateCount must be greater 0", "duplicateCount");

    bool containsNTimes = sequence.Where(i => i.Equals(element))
                            .Take(duplicateCount)
                            .Count() == duplicateCount;
    return containsNTimes;
} 
```

用法：

```
var list = new List<int>() { 1,2,2,3,4,3,3 };

// list contains 2 for 3 times?
bool contains2ThreeTimes = list.ContainsNTimes(2, 3);

// any element in the list iscontained 3 times (or more)?
bool anyContains3Times = list.Any(i => list.ContainsNTimes(i, 3));

Console.WriteLine("List contains 2 for 3 times? " + contains2ThreeTimes); // false
Console.WriteLine("Any element in the list is contained 3 times (or more)? " + anyContains3Times); // true (3) 
```

演示：http: [//ideone.com/Ozk9v](http://ideone.com/Ozk9v)

应该非常有效，因为它使用延迟执行。它枚举序列，直到找到 n 项。

# c# - 如何使用 Html.ActionLink 将文本框 (DatePicker) 变量传递给我的控制器？

> ID：12530412
> 
> 赞同：0
> 
> 时间：2012-09-21T12:13:56.273
> 
> 标签：c#, asp.net, .net, asp.net-mvc, actionlink

我有一个链接，可以在新窗口中打开 pdf，而无需离开页面。我有这个链接工作......

```
<script type="text/javascript">
$(function () {

    $("#DatePicker").mask("99/99/9999").datepicker({ maxDate: new Date() });
});
if (document.images) {
    var pic1 = new Image(100, 200);
    pic1.src = '<%=Url.Content("~/images/calendarContent.png") %>'
}
</script>

<%= Html.ActionLink("Click ME", "Controller", "Home", new { id = Model.id }, new { onclick = "stayHomeFunc()"})%></div> 
```

经过审查，我必须添加一个 DatePicker 函数，允许用户选择一个日期。如何将该日期选择传递给我的控制器？这就是我到目前为止所拥有的，顺便说一句，它返回一个空 startDate ......

```
Enter Date:<input name="DatePicker" id="DatePicker" type="text" style="width: 80px" />
<%= Html.ActionLink("Click ME", "Controller", "Home", new { id = Model.id, startDate = DatePicker }, new { onclick = "stayHomeFunc()"})%></div>

public ActionResult COntroller(string id, string startDate){...} 
```

有任何想法吗？提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:27:08.533

你有两种可能性：

1.  `#DatePicker`在包含该字段的表单内使用提交按钮。这样你就不需要传递任何东西，当表单提交时，所有输入值都会自动发送到服务器：

    ```
    @using (Html.BeginForm("SomeAction", "Home"))
    {
        @Html.TextBoxFor(x => x.DatePicker)
        <input type="submit" value="Click Me" />
    } 
    ```

2.  如果要使用锚点，则需要使用 javascript 将 datepicker 的值附加到查询字符串中。因此，在`stayHomeFunc`单击链接时触发的函数内部：

    ```
    function stayHomeFunc(link) {
        var date = $('#DatePicker').datepicker('getDate');
        var formattedDate = $.datepicker.formatDate('yy-mm-dd', date);
        link.href += '?DatePicker=' + formattedDate;
    } 
    ```

    然后不要忘记将锚实例传递给 onclick 事件：

    ```
    <%= Html.ActionLink(
        "Click ME", 
        "SomeAction", 
        "Home", 
        new { id = Model.id }, 
        new { onclick = "stayHomeFunc(this)"}
    ) %> 
    ```

就我个人而言，我会选择第一个选项，因为它在语义上更正确并且不需要任何 javascript。

还要注意模型绑定器使用的 DateTime 格式以及 GET 和 POST 请求之间存在的差异。有关详细信息，请参阅[以下文章](http://weblogs.asp.net/melvynharbour/archive/2008/11/21/mvc-modelbinder-and-localization.aspx)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T16:26:02.157

您也可以使用 FormCollection。

看法

```
 @using (Html.BeginForm("SomeAction", "Home"))
{

<input type="text" id="DatePicker"  name="date">
} 
```

控制器

```
 public ActionResult SomeAction( FormCollection form)
    {
     var date = form["date"];

               if (date != String.Empty)
                {
                    MyModel model = new MyModel();
                    model.date= DateTime.Parse(date);
                }
       return RedirectToAction("YourNewAction", new {date = model.date});

    } 
```

# iphone - iPhone 保存应用程序视图状态

> ID：12530413
> 
> 赞同：0
> 
> 时间：2012-09-21T12:13:58.957
> 
> 标签：iphone, ios

我在 iPhone 5 上使用 UINavigationController

如何在用户移动到下一个视图之前保存视图的状态？这样当用户单击“返回”时，他们的更改不会丢失？

我的问题与此类似： [iPhone How To Save View States](https://stackoverflow.com/questions/6827787/iphone-how-to-save-view-states)

但是我正在使用故事板和segue ..所以没有堆栈？

我从 1 个视图移动到下一个视图的代码是：

```
[self performSegueWithIdentifier:@"SegueAnnotationDetail" sender:self]; 
```

然后我有`prepareForSegue`：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    // save view state here?

    if ([[segue identifier] isEqualToString:@"SegueAnnotationDetail"])
    {
        AnnotationDetailViewController *vc = [segue destinationViewController];

        [vc setMyAnnotationView:selectedAnnotation];
    }
} 
```

理想情况下，我会放入一些代码`//save view state here`来保存视图的状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:58:04.740

我自己回答了这个问题

我的代码中有一个错误 - 正因为如此

# django - 关于一个 RESTful 资源中的美味派和映射多个模型类

> ID：12530428
> 
> 赞同：1
> 
> 时间：2012-09-21T12:14:48.363
> 
> 标签：django, rest, tastypie

我正在使用 django+tastypie+postgreSQL 做 Web 应用程序的后端。然后，在另一个“项目”中，我的朋友正在实现一个前端，它将利用我的后端 API 创建 AJAX 调用，从而用一些数据填充 html。好的。到目前为止，我了解如何做到这一点。

为我的 Restful API 创建不同资源时出现问题。我有一块我的模型定义如下：

```
# COUNTRY + MANAGER
class CountryManager(models.Manager):
    def create(**kwargs):
        try:
            country = Country.objects.get(short_name=kwargs['short_name'])            
        except:
            country = Country(name=kwargs['name'], short_name=kwargs['short_name'])
            country.save()
        return country

class Country(models.Model):
    short_name = models.CharField(max_length=max_short_len, unique=True)  
    name = models.CharField(max_length=max_short_len, unique=False)
    lat = models.DecimalField(max_digits=11, decimal_places=9, default=0.0)
    lon = models.DecimalField(max_digits=12, decimal_places=9, default=0.0)
    objects = CountryManager()

# REGION +`MANAGER
class RegionManager(models.Manager):
    def create(**kwargs):
        try:
            region = Region.objects.get(short_name=kwargs['short_name'])            
        except:
            region = Region(name=kwargs['name'], short_name=kwargs['short_name'], country=kwargs['country'])
            region.save()
        return region

class Region(models.Model):
    name = models.CharField(max_length=max_short_len, unique=False, default='NoName')
    short_name = models.CharField(max_length=max_short_len, unique=False, default='NoName')  
    lat = models.DecimalField(max_digits=11, decimal_places=9, default=0.0)
    lon = models.DecimalField(max_digits=12, decimal_places=9, default=0.0)
    country = models.ForeignKey('Country')
    objects = RegionManager()

# CITY + MANAGER
class CityManager(models.Manager):
    def create(**kwargs):
        try:
            city = City.objects.get(short_name=kwargs['short_name'])
            city.lat = kwargs['lat']
            city.lon = kwargs['lon']            
        except:
            city = City(name=kwargs['name'], short_name=kwargs['short_name'], lat=kwargs['lat'], lon=kwargs['lon'])
        city.save()
        return city
class City(models.Model):
    name = models.CharField(max_length=max_short_len, unique=False)
    short_name = models.CharField(max_length=max_short_len, unique=False, default='NoName')
    lat = models.DecimalField(max_digits=11, decimal_places=9, default=0.0)
    lon = models.DecimalField(max_digits=12, decimal_places=9, default=0.0)
    region = models.ForeignKey('Region')
    objects = CityManager() 
```

现在，如果可能的话，我想将我的 /location 资源映射为城市、地区和国家的混合体。因此，例如，如果我 GET /api/location/1，我将获得一个 JSON，例如：

```
{"location":[
    {"city":"London", 
        "region":"London", 
        "country":"UK"
    }]
} 
```

此外，如果我发布 /api/location/1，提供 JSON，我想调用放置在模型文件中 City 类中的方法：

```
def saveLocation(**kwargs):
    # countryN, countrySN, regionN='No region', regionSN='No region', cityN, citySN, cityLat, cityLon, locationType
        # define args
        countryN = kwargs.get('countryN', None)
        countrySN = kwargs.get('countrySN', None)
        regionN = kwargs.get('regionN', None)
        regionSN = kwargs.get('regionSN', None)
        cityN = kwargs.get('cityN', None)
        citySN = kwargs.get('citySN', None)
        cityLat = kwargs.get('cityLat', None)
        cityLon = kwargs.get('cityLon', None)
        locationType = kwargs.get('locationType', None)
        # put nulls in the args
        if regionN is None: regionN = 'No region'
        if regionSN is None: regionSN = 'No region'
        # control over the params
        if regionSN is None or countrySN is None or citySN is None: raise Exception('Invalid parameters')
        #Save the country    
        country = Country.objects.create(name=countryN, short_name=countrSN)
        countryId = country.pk
        #Save the region, if any. Else save it like "no region"
        region = Region.objects.create(name=regionN, short_name=regionSN, country = country)
        regionId = region.pk
        #Save the city
        city = City.objects.create(name=cityN, short_name=citysN, lat=cityLat, lon=cityLon, region=regionId)
        return city 
```

我遵循了 Tastypie 手册（http://django-tastypie.readthedocs.org/en/latest/cookbook.html），但它仅适用于资源=模型环境。

此外，我尝试实现自己的类 MyResource(Resource) 以避免 ModelsResource 所做的直接模型映射。但我没有这样做的技能或知识。

我想请求一些 git repo 或一些示例代码，我可以在其中学习如何在没有资源 = 模型的情况下使用 Django 实现 Restful API。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:24:33.800

我认为您应该必须创建一个 Location 模型，或者使用 City 模型作为基础。想想看，“真正”的位置是城市，地区和国家是继承的。

我对此的建议是创建一个简单的资源（不是模型资源）并实现您需要的方法：

*   `obj_create`对于 POST 部分（创建）：[https ://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L1018](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L1018)

*   `obj_get_list`[获取位置列表（ GET](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L967) /location/）：https://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L967

*   `obj_get`获取单个位置（[/location/1/）：https://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L992](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L992)

那应该涵盖您需要的所有内容。看看`ModelResource`这些方法是如何实现的。

# xcode - XCode 4.5 - libxml2 上的错误

> ID：12530429
> 
> 赞同：1
> 
> 时间：2012-09-21T12:14:50.360
> 
> 标签：xcode, libxml2

我有一个可以正常编译的应用程序，但是当我将 XCode 更新到 4.5 版时，它开始抱怨 libxml2。

问题出在这一行：

```
typedef void *(LIBXML_ATTR_ALLOC_SIZE(1) XMLCALL *xmlMallocFunc)(size_t size); 
```

错误：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/include/libxml2/libxml/xmlmemory.h:66:39: Expected parameter declarator
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/include/libxml2/libxml/xmlmemory.h:66:39: Expected ')'
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/include/libxml2/libxml/xmlmemory.h:66:50: Expected ')'
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/include/libxml2/libxml/xmlmemory.h:66:38: Function cannot return function type 'void *(size_t)' 
```

有人面临同样的问题吗？

问候！

# java - 如何从网页中提取句子

> ID：12530436
> 
> 赞同：2
> 
> 时间：2012-09-21T12:15:14.900
> 
> 标签：java, html-parsing, jsoup

我想从网页中提取句子（不仅仅是 html 剥离的文本）。我想知道流行的 HTML 解析库（如 Jsoup）是否支持这种功能？

谢谢，

**编辑**：

抱歉，如果帖子不清楚。我需要自然语言句子，所以不一定用点分隔。

谢谢大家。我刚刚找到了这个库[http://alias-i.com/lingpipe/demos/tutorial/sentences/read-me.html](http://alias-i.com/lingpipe/demos/tutorial/sentences/read-me.html)，它似乎正是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:18:56.083

`JSoup`确实提供了非常方便`API`的**提取**和**操作** `data`，简而言之......是的，它确实提供了这个功能......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T12:22:46.020

您可以为此使用 jquery

`var t = $('p').text();
var sentences = t.split('.');`

# android - 简单的 Android XML 解析任务

> ID：12530440
> 
> 赞同：-3
> 
> 时间：2012-09-21T12:15:43.107
> 
> 标签：android, xml, regex

我需要在我的 Android 活动中解析以下 XML 结构。我有它的字符串格式：

```
<Cube>
  <Cube time="2012-09-20">
    <Cube currency='USD' rate='1.2954'/>
    <Cube currency='JPY' rate='101.21'/>
    <!-- More cube tags here -->
  </Cube>
</Cube> 
```

为此，我想获得一系列货币名称（美元、日元等）及其各自的汇率。可选地，在上述指定格式的 XML 文档中仅出现一次的日期。还要注意空的 Cube 标签。可能还有其他类似的奇怪事件。我只需要获取同时设置了货币和汇率的 Cube 标签。

最好使用一些 XML 解析库而不是正则表达式，但如果它诉诸于此，我也准备好使用它。

编辑：这是我到目前为止想出的。问题是在数组中插入匹配的元素，我不知道该怎么做。

```
Pattern p = Pattern.compile("<Cube\\scurrency='(.*)'\\srate='(.*)'/>");
Matcher matcher = p.matcher(currency_source);
while (matcher.find()) {
    Log.d("mine", matcher.group(1));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:12:21.247

这是一个自定义处理程序，它应该获取您想要的数据：

```
public class MyHandler extends DefaultHandler {

    private String time;
    // I would use a simple data holder object which holds a pair
    // name-value(or a HashMap)
    private ArrayList<String> currencyName = new ArrayList<String>();
    private ArrayList<String> currencyValue = new ArrayList<String>();

    @Override
    public void startElement(String uri, String localName, String qName,
                Attributes attributes) throws SAXException {
        if (localName.equals("Cube")) { // it's a Cube!!!
            // get the time
            if (attributes.getIndex("", "time") != -1) {
                // this Cube has the time!!!
            time = attributes.getValue(attributes.getIndex("", "time"));
            } else if (attributes.getIndex("", "currency") != -1
                && attributes.getIndex("", "rate") != -1) {
                // this Cube has both the desired values so get them!!!
                // but first see if both values are set
                String name = attributes.getValue(attributes.getIndex("",
                            "currency"));
                String value = attributes.getValue(attributes.getIndex("",
                            "rate"));
                if (name != null && value != null) {
                    currencyName.add(name);
                    currencyName.add(value);
                }
            } else {
                // this Cube doesn't have the time or both the desired values.
            }
        }
    }

} 
```

然后你可以在[http://developer.android.com/reference/android/util/Xml.html](http://developer.android.com/reference/android/util/Xml.html)或成千上万的教程之一中使用它来解析你的 xml `String`。

# vb.net - ListView 工具提示闪烁

> ID：12530444
> 
> 赞同：3
> 
> 时间：2012-09-21T12:16:02.717
> 
> 标签：vb.net, winforms, listview, tooltip, flicker

我有一个具有某些 id 值的 ListView。我正在使用 movemove 方法在工具提示中显示有关此 ID 的其他详细信息。

该代码是用 VB2003 编写的，到目前为止它运行良好。最近我们迁移到 VB2008。

现在工具提示闪烁。详情如下。

希望这对 .NET 大男孩来说是一件容易的事。我是一名 Java EE 开发人员，所以我对自己做错了什么知之甚少（没有）。

编译器设置：目标框架 .NET 2.0

代码：

```
Dim m_HoveredItem As ListViewItem

Private Sub cancellationList_MouseMove(ByVal sender As Object, ByVal e As MouseEventArgs) Handles CancellationList.MouseMove
    Dim lvi As ListViewItem = Me.CancellationList.GetItemAt(e.X, e.Y)

    If Not lvi Is m_HoveredItem Then
        m_HoveredItem = lvi
        If lvi Is Nothing Then
            Me.cancelrejectToolTip.SetToolTip(Me.CancellationList, "")
        Else
            Dim orderText As String() = lvi.Text.Split("(")
            Dim orderRef As Integer = CInt(orderText(0).Trim)
            Dim orderIsin As String
            Dim orderDesc As String
            Dim order As AppOrder= New AppOrder(_server, orderRef)
            orderIsin = order.Isin
            orderDesc = order.OrderDescription
            cancelrejectToolTip.SetToolTip(Me.CancellationList, (orderRef.ToString & "/" & orderIsin & "/" & orderDesc))
        End If
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:31:43.107

看起来鼠标移动一直在可见工具提示上移动，使其隐藏，但随后鼠标移动使其再次可见，并且循环继续。最简单的方法是使用 Show 方法偏移工具提示的位置：

```
Private Sub cancellationList_MouseMove(ByVal sender As Object, _
                                       ByVal e As MouseEventArgs) _
                                       Handles CancellationList.MouseMove
  Dim lvi As ListViewItem = Me.CancellationList.GetItemAt(e.X, e.Y)

  If Not lvi Is m_HoveredItem Then
    m_HoveredItem = lvi
    If lvi Is Nothing Then
      Me.cancelrejectToolTip.Hide(Me.CancelleationList) 
    Else
      Dim orderText As String() = lvi.Text.Split("(")
      Dim orderRef As Integer = CInt(orderText(0).Trim)
      Dim orderIsin As String
      Dim orderDesc As String
      Dim order As AppOrder= New AppOrder(_server, orderRef)
      orderIsin = order.Isin
      orderDesc = order.OrderDescription

      cancelrejectToolTip.Show(orderRef.ToString & "/" & orderIsin & "/" & orderDesc, _
                               Me.Cancellationlist, _
                               New Point(e.X + 16, e.Y + 16))
    End If
  End If
End Sub 
```

# c# - Arraylist 同步问题

> ID：12530447
> 
> 赞同：0
> 
> 时间：2012-09-21T12:16:08.933
> 
> 标签：c#, multithreading, arraylist, synchronization, locking

我有一个每秒不断更新的数组列表。我必须在另外两个线程中使用相同的数组列表并制作它的本地副本。我已经完成了所有这些，但是我得到了 index out of bound 的奇怪异常，到目前为止我发现我必须确保数组列表的一些同步机制可以跨多个线程使用。

这就是我让它同步的方式：

```
for (int i = 0; i < Globls.iterationCount; i++)
            {
                if (bw_Obj.CancellationPending)
                {
                    eve.Cancel = true;
                    break;
                }

                byte[] rawData4 = DMM4.IO.Read(4 * numReadings);
                TempDisplayData_DMM4.Add(rawData4);
                Globls.Display_DataDMM4 = ArrayList.Synchronized(TempDisplayData_DMM4);
                Globls.Write_DataDMM4 = ArrayList.Synchronized(TempDisplayData_DMM4);

            } 
```

在其他线程中，我执行以下操作来制作本地副本：

```
ArrayList Local_Write_DMM4 = new ArrayList();
Local_Write_DMM4 = new ArrayList(Globls.Write_DataDMM4); 
```

我是否以正确的方式同步数组列表？，在复制数组列表时我是否也需要锁定：

```
 lock (Globls.Display_DataDMM4.SyncRoot){Local_Temp_Display1 = new ArrayList(Globls.Display_DataDMM4);} 
```

还是单次操作安全？我实际上并没有运行这段代码，我需要在周末运行它，我不想看到另一个异常:(。请帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:51:54.127

正如@Trickery 所说，分配需要被锁定，因为源数组`Globls.Write_DataDMM4`可以在枚举期间被另一个线程修改。*因此，在填充原始数组和*制作副本时都必须锁定

```
for (int i = 0; i < Globls.iterationCount; i++)
{
    if (bw_Obj.CancellationPending)
    {
        eve.Cancel = true;
        break;
    }

    byte[] rawData4 = DMM4.IO.Read(4 * numReadings);
    TempDisplayData_DMM4.Add(rawData4);

    lock (Globls.Display_DataDMM4.SyncRoot)
    {
    Globls.Write_DataDMM4 = ArrayList.Synchronized(TempDisplayData_DMM4);
    }

} 
```

和

```
lock (Globls.Display_DataDMM4.SyncRoot)
{
     Local_Temp_Display1 = new ArrayList(Globls.Display_DataDMM4);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:43:03.667

是的，对 ArrayList 的所有操作都需要使用 Lock。

编辑：对不起，由于某种原因，该网站不允许我对您的问题添加评论。

# c - 类型转换。我该如何处理 C 中 libpq 中的 PostgreSQL OID 值？

> ID：12530449
> 
> 赞同：9
> 
> 时间：2012-09-21T12:16:13.430
> 
> 标签：c, postgresql, libpq

我正在使用 PostgreSQL C API，libpq。我需要能够将 a 中的值转换`PGresult*`为它们在 Ruby 中的等效数据类型。我目前只是选择所有数据并使用`PQgetvalue()`，这给了我一个`char*`可以转换为 ruby​​ 字符串。这很容易。但是有没有人可以分享根据返回的 OID从`char*`to或进行类型转换的示例？`int``float``double``PQftype()`

实际上，简而言之，我不知道如何解释 OID，并且[文档](http://www.postgresql.org/docs/9.1/static/libpq-exec.html)似乎没有给出任何指示。我找到[了这个页面](http://www.postgresql.org/docs/9.1/static/datatype-oid.html)，但这无助于理解如何使用这个 OID 在 C API 中进行类型转换。我猜在某个地方有一个常量列表，我可以从中做一个大的 switch 语句？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-21T13:46:30.057

我问了这个问题后找到了答案。基本上，除了 libpq-fe.h 和 postgres.h 之外，还有一个名为 catalog/pg_type.h 的文件。在包含 libpq-fe.h 和 postgres.h 后需要包含，然后您可以访问定义，如,`TEXTOID`等。`BOOLOID``INT4OID`

```
#include <stdio.h>
#include <postgres.h>
#include <libpq-fe.h>
#include <catalog/pg_type.h>

// ... snip ...

if (PQgetisnull(result, row, col)) {
  // value is NULL, nothing more to do
} else {
  char * value  = PQgetvalue(result, row, col);
  int    length = PQgetlength(result, row, col);

  switch (PQftype(result, col)) {
    case INT2OID:
    case INT4OID:
    case INT8OID:
      // process value as an integer
      break;

    default:
      // just default to a text representation
  }
} 
```

您需要查看 pg_type.h 中的所有 OID 以实际拥有一个广泛的列表，或者只是测试您在执行基本`SELECT 't'::boolean`类型查询等时返回的内容，并仅在您需要新类型支持时构建开关。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T12:34:37.183

要从 OID 获取类型名称，只需将其转换为[`regtype`](http://www.postgresql.org/docs/current/interactive/datatype-oid.html)：

```
SELECT  700::oid::regtype -- real 
```

要获取任何列的类型（或 plpgsql 中的变量），请使用[`pg_typeof()`](http://www.postgresql.org/docs/current/interactive/functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE)：

```
SELECT  pg_typeof(1::real) -- real 
```

为您提供与 psql 或 pgAdmin类似的类型`regtype`的答案。如果需要，您可以将其显式转换为：`displayed``text``text`

```
SELECT  pg_typeof(1::real)::text -- real 
```

还有这个“大列表”，vulgo 目录表`pg_type`，其中注册了类型。这可能很大，看看：

```
SELECT * from pg_type LIMIT 10; 
```

[优秀手册中的更多信息。](http://www.postgresql.org/docs/current/interactive/catalog-pg-type.html)

# php - 在产品页面中删除 Opencart 类别路径

> ID：12530459
> 
> 赞同：0
> 
> 时间：2012-09-21T12:17:01.530
> 
> 标签：php, mysql, shopping-cart, opencart

在 Opencart - 我希望下面的 url 必须更改 [http://ecbiz111.inmotionhosting.com/~dvdcdd5/store/index.php?route=product/product&path=20_59&product_id=110](http://ecbiz111.inmotionhosting.com/~dvdcdd5/store/index.php?route=product/product&path=20_59&product_id=110)

进入

[http://ecbiz111.inmotionhosting.com/~dvdcdd5/store/index.php?route=product/product&product_id=110](http://ecbiz111.inmotionhosting.com/~dvdcdd5/store/index.php?route=product/product&product_id=110)

即使我从类别路径中单击，也需要删除“path =”查询字符串并仅在查询字符串中显示产品 ID。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:39:06.223

如果您想要更好的 seo，为什么不通过从管理面板打开 seo 来使用 SEF 链接。

否则，您需要定义一种将类别分配给产品的方法。然后根据需要更改 URL 创建功能（根据分配的类别到产品定义）但是您可能需要为此更改许多文件。因为 $route $url 等和类似面包屑的逻辑将需要该信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:11:54.700

您应该打开 catalog/controller/product/category.php 并找到此代码（第 171 行）

```
'href' => $this->model_tool_seo_url->rewrite(HTTP_SERVER .
'index.php?route=product/product&path=' . $this->request->get['path'] .
'&product_id=' . $result['product_id']) 
```

消除

```
&path=' . $this->request->get['path'] . ' 
```

# extjs - ExtJS Grid 不会排序

> ID：12530462
> 
> 赞同：0
> 
> 时间：2012-09-21T12:17:10.297
> 
> 标签：extjs, extjs3

我在 ExtJS 3.4 中有一个网格，但它不会排序。单击列标题时，我在萤火虫中收到此错误：

无效的 Array.prototype.sort 参数

48523线

我如何解决它？

这是存储、列和网格定义：

```
function AircraftFeesStore() {
    return new Ext.data.JsonStore(Ext.apply({
        url: AVRMS.ROOT_CONTEXT + "/ssl/json/general/GetAircraftFees.aspx",
        idProperty: 'AircraftOid',
        baseParams: {
            OwnerOid: 0,
            SelectedAircraft: ''
        },
        fields: ['AircraftOid','NNumber', 'Make', 'Model', 'RegistrationFeeFormatted']
    }));
}   

var colModel = new Ext.grid.ColumnModel([
        { id: 'AircraftOid', width: 100, sortable: true, locked: true, hidden: true, dataIndex: 'AircraftOid' },
        { header: "N-Number", width: 100, sortable: true, hidden: true, dataIndex: 'NNumber' },
        { header: "Make", width: 250, sortable: true, hideable: false, dataIndex: 'Make' },
        { header: "Model", width: 250, sortable: true, hideable: false, dataIndex: 'Model' },
        { header: "Registration Fee", width: 150, sortable: true, hideable: false, dataIndex: 'RegistrationFeeFormatted' }
    ]); 

var registrationGrid = new Ext.grid.GridPanel(
    {
        store: aircraftFeesStore,
        cm: colModel,
        sm: new Ext.grid.RowSelectionModel({ singleSelect: true }),
        viewConfig: {
            forceFit: true
        },
        width: 970,
        height: 150,
        split: true,
        region: 'north',
        frame: true,
        title: 'Selected Aircraft with Total'
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T11:58:54.617

尝试给予

```
remoteSort:true 
```

在你的网格中

# vba - 将 word 中的 HTML 列表转换为项目符号列表

> ID：12530463
> 
> 赞同：1
> 
> 时间：2012-09-21T12:17:13.793
> 
> 标签：vba, ms-word

如何在 VBA (Word) 中创建一个将运行的宏：

```
<ul><li>this is just a test</li><li>woop</li><li>test</li></ul> 
```

并生成一个

*   这只是一个测试
*   呜呜
*   测试

使用 Word 2010。

原因是 html 通过来自 3rd 方系统的 mailmerge 进入。

这必须通过我的最终用户的宏来完成！:)

更多详细信息：我将不得不创建如下内容来搜索 Italic html 标记并插入 Font.Italic。

```
With ActiveDocument.Range.Find
    .ClearFormatting
    .MatchCase = False
    .MatchWildcards = True
    .Text = "[<][iI][>]*[<]/[iI][>]"
    .Replacement.Font.Italic = True
    .Execute Replace:=wdReplaceAll
End With 
```

所以我的问题是，我如何像这样遍历文档并找到`<ul>`实例并遍历每个`<li>`标签并将标签中的文本作为项目符号列表插入...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:03:17.780

这是实现您想要的简单方法。

**逻辑**

1.  创建一个 IE 实例
2.  设置`.InnerHTML`为您的 html 字符串
3.  将IE中的内容复制到word

简而言之，让 IE 做脏活。

**代码**

```
Option Explicit

Sub Sample()
    Dim ie As Object
    Dim strHtml As String

    strHtml = "<ul><li>this is just a test</li><li>woop</li><li>test</li></ul>"

    Set ie = CreateObject("InternetExplorer.Application")

    ie.Visible = True

    ie.Navigate "about:blank"

    ie.Document.body.InnerHTML = strHtml

    Do While ie.readystate <> 4: DoEvents: Loop

    ie.Document.body.createtextrange.execCommand "Copy"

    Selection.Paste
End Sub 
```

**截屏**

![在此处输入图像描述](../Images/42baf28194fb5df3469432b224fd9b73.png)

# jsf-2 - 如何清除 p:dataTable 中的所有输入字段？

> ID：12530469
> 
> 赞同：2
> 
> 时间：2012-09-21T12:17:39.237
> 
> 标签：jsf-2, primefaces

我正在使用带有 PrimeFaces 的 JSF 2.0。我有一个`<p:dataTable>`. 我有`<p:inputText>`一列。我可以编辑并保存它。我也有一个重置按钮，但它不起作用。

```
<h:form id="f">
    <f:facet name="head">Enteri Karbon Hesaplaması</f:facet>
    <p:dataTable value="#{orderBean.orderList}" var="o" id="bir">
        <p:column>
            <f:facet name="header">Hayvan Adi</f:facet>
            <h:outputText value="#{o.hayvanadi}"/>
        </p:column>
        <p:column>
            <f:facet name="header">Karbon Salinimi Değeri</f:facet>
            <h:outputText value="#{o.karbonsalinimi}"/>
        </p:column>
        <p:column>
            <f:facet name="header">Adet</f:facet>
            <p:inputText id="spinner"  maxlength="12" value="#{o.adet}"/>
        </p:column>
    </p:dataTable>
    <p:commandButton value="Kaydet"  action="#{orderBean.saveAction()}" update="bir"/>
    <p:commandButton value="Temizle"  update="bir" process="@this" actionListener="#{orderBean.reset}"/>
</h:form> 
```

这是我的支持 bean 的相关部分：

```
@ManagedBean
@SessionScoped
public class OrderBean {
    private static final ArrayList<Order> orderList = 
        new ArrayList<Order>(Arrays.asList(
            new Order("Süt İneği", 99 , 0),             
            new Order("Diğer İnekler", 58, 0),      
            new Order("Koyun",5, 0),
            new Order("Keçi",5, 0),     
            new Order("At ",18, 0),     
            new Order("Eşek ",10, 0)                
        )
    );

    public String saveAction() {
        for (Order order : orderList){
            order.setEditable(false);
        }

        return null;
    }

    public String editAction(Order order) {
        order.setEditable(true);
        return null;
    }

    public void reset() {  
        RequestContext.getCurrentInstance().reset("form:f");  
    }  

    // ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T17:59:42.060

将命令按钮的类型更改为重置，即：

```
<p:commandButton type="reset" value="Temizle"  update="bir" process="@this" actionListener="#{orderBean.reset}"/> 
```

此外，由于您基本上是在尝试再次使数据表为空，因此您可以在 reset 函数中将 orderList 设置为空列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T09:31:35.980

`<p:commandButton type="reset"`您可以使用或重置表单`<p:commandButton update="@form"`。后者也用于`p:inplace`.

编辑：您的按钮不起作用的原因是因为其更新属性中引用的 id 不正确。应该是`:formId:dataTableId`。不过比较`@form`容易。

# lucene - OR 术语查询与提升

> ID：12530475
> 
> 赞同：1
> 
> 时间：2012-09-21T12:17:55.743
> 
> 标签：lucene

使用 Lucene，我想将索引中的文档与其余文档进行比较。我发现一个[简单的方法](https://stackoverflow.com/questions/1844194/get-cosine-similarity-between-two-documents-in-lucene)是将文档作为查询提交。问题是我需要将术语作为 OR-Ring 放置，并且最困难的部分是使用`term frequency`.

我认为如果我修剪文档的所有空格并将它们替换为`' OR '`， lucene 将解析它并解释它。但是有没有最复杂的方法来处理这个问题？

用它们各自的频率来提升这些术语的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:58:46.873

看起来您正在尝试重新实现 Lucene 的[MoreLikeThis](http://lucene.apache.org/core/3_6_0/api/contrib-queries/org/apache/lucene/search/similar/MoreLikeThis.html)。

# jquery - jquery动画后如何保持div可见

> ID：12530476
> 
> 赞同：1
> 
> 时间：2012-09-21T12:17:56.163
> 
> 标签：jquery, jquery-animate

我正在尝试实现一个 jQuery .animate 调用来切换几个 div 的高度。其中一个 div 我想像现在一样消失，但另一个 div 我想保持可见。我怎样才能做到这一点？这是我到目前为止所拥有的：

```
$(document).ready(function() {
  $('#divTitle').on('click', function() {
    $('#divDetails').slideToggle('slow');
    $('#divContents').animate({marginTop:'toggle',display:'block'},'slow');
  })
}); 
```

...

谢谢，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:23:27.313

而不是使用`.animate()`put 另一个 div 在你的之间，而不是 margin 属性：

```
<div id="divMargin" style="height: 10px;"></div> 
```

然后`.slideToggle()`在你的函数中：

```
$('#divTitle').on('click', function() {
  $('#divDetails').slideToggle('slow');
  $('#divMargin').slideToggle('slow');
}) 
```

# jquery - Creating an li dynamically based on data-attribute using JQuery

> ID：12530477
> 
> 赞同：1
> 
> 时间：2012-09-21T12:17:57.717
> 
> 标签：jquery, html

I want something that functions like this: You click on a name such as Mary Smith and it dynamically generates the data-name value in another ul and li element. I have that part working, however, I need it to not change all of the li elements to that value. Each time Mary Smith or Tom Jones is clicked it needs to create an li with that value and not change the value of the existing ones.

You can find the fiddle here: [http://jsfiddle.net/rsxavior/zHkS8/3/](http://jsfiddle.net/rsxavior/zHkS8/3/) Basically I need it to function as if the .account-select class could be considered the 'this' value for the function. I am not sure of a way to go about doing that.

```
<ul>
    <li><a href="#" class="account" data-name="John Smith">John Smith</a></li>
    <li><a href="#" class="account" data-name="Mary Jones">Mary Jones</a></li>
</ul>

<ul class="account-hidden-li"></ul>

$('.account').click(function () {
    $('.account-hidden-li').append('<li class="account-select"><a class="close bcn-close" data-dismiss="alert" href="#">&times;</a></li>');
    $('.account-select').text($(this).data("name")).prependto();
}); 
```

[http://jsfiddle.net/rsxavior/tS9H8/9/](http://jsfiddle.net/rsxavior/tS9H8/9/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:22:38.377

You can use `:last` selector:

```
$('.account-select:last a').text($(this).data("name")); 
```

[http://jsfiddle.net/FwTYe/](http://jsfiddle.net/FwTYe/)

Or:

```
$('.account').click(function () {   
    var txt =  $(this).data("name");
    $('<li/>', {
        'class': 'account-select',
        'html': '<a class="close bcn-close" data-dismiss="alert" href="#">'+txt+'</a>'
    }).appendTo('.account-hidden-li')
}); 
```

[http://jsfiddle.net/42FYA/](http://jsfiddle.net/42FYA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:46:35.793

I'm a little confused, I think there might be another error in your code. Using `.text()`, you are wiping out the `<a>` element within each li.account-select.

I think this solves your question and also preserves your "close" links:

```
$('.account').click(function () {
    $('.account-hidden-li').append('<li class="account-select">'+$(this).data("name")+'<a class="close bcn-close" data-dismiss="alert" href="#">&times;</a></li>');
}); 
```

# r - 在人口五分位数的估算数据集中查找变量的平均值

> ID：12530482
> 
> 赞同：2
> 
> 时间：2012-09-21T12:18:12.693
> 
> 标签：r

我有一个缺少值的数据集“base_data”。因此，我使用包“Amelia”将缺失值归入对象“a.output”。

我已经能够使用以下代码在估算结果中找到一些变量的平均值：

```
q.out<-NULL
se.out<-NULL
for(i in 1:m) {   
dclus <- svydesign(id=~site, data=a.output$base_data[[i]]) 

q.out <- rbind(q.out, coef(svymean(~hh_expenditure, dclus)))
se.out <- rbind(se.out, SE(svymean(~hh_expenditure, dclus)))} 
```

我使用以下方法组合了结果：

```
svymean.combine <- mi.meld(q = q.out, se = se.out) 
```

这给了我整个人口的家庭支出 (hh_expenditure) 的平均误差和标准误差。

但是，我有一个变量将人口分成财富五分位数（wealth_quin）。

因此，我现在想要找到每个财富 quin 的家庭支出的平均值和标准误差（变量为 1、2、3、4 或 5）。

我最初尝试对插补数据进行子集化，但这出现了很多错误。

有没有办法做到这一点，而不必在输入数据之前将数据分成 5 个财富五分位数？

干杯，

提摩太

编辑：这是一个可行的例子

```
require(Amelia)
require(survey)
a<-as.data.frame(c(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16))
b<-as.data.frame(c(1,2,2,1,2,1,1,2,1,2,2,1,1,2,1,2))
c<-as.data.frame(c(2,7,8,5,4,4,3,8,7,9,10,1,3,3,2,8))
d<-as.data.frame(c(3,9,7,4,5,5,2,10,8,10,12,2,4,4,3,7))
e<-as.data.frame(c(2500,8000,NA,4500,4500,NA,2500,NA,7400,9648,1112,1532,3487,3544,NA,7000)

impute<-cbind(a,b,c,d,e)
names(impute) <- c("X","site","var2","var3", "hh_inc") 
```

所以不，我们有一个数据框可以使用，我想估算的 hh_inc 缺少值。第一步，设置插补数

```
m<-5 
```

现在运行插补：

```
a.output <- amelia(x = impute, m=m, autopri=0.5,cs="X",
               idvars=c("site","var2"),
               logs=c("hh_inc","var3")) 
```

a.output 现在保存来自 5 个插补的数据。

我现在要做的是使用来自 amelia 的估算值分别找到站点 1 和站点 2 的平均（和标准误差）hh_inc。

那怎么可能呢？我知道如果我忽略 NA 是可以做到的。但这可能会引入偏见，因此我首先估算了这些值。

干杯，

提摩太

编辑：我对此给予了赏金。如果没有人知道确切的方法，那么可以使用鲁宾斯公式（http://sites.stat.psu.edu/~jls/mifaq.html#minf）将各个估算数据集的结果组合起来。 ，我将奖励能够将 5 个独立的估算数据集从 Amelia 对象转换为 5 个独立的、完整的数据帧的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T13:45:09.203

```
require(Amelia)
require(survey)
require(data.table)
require(plotrix)

a<-as.data.frame(c(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16))
b<-as.data.frame(c(1,2,2,1,2,1,1,2,1,2,2,1,1,2,1,2))
c<-as.data.frame(c(2,7,8,5,4,4,3,8,7,9,10,1,3,3,2,8))
d<-as.data.frame(c(3,9,7,4,5,5,2,10,8,10,12,2,4,4,3,7))
e<-as.data.frame(c(2500,8000,NA,4500,4500,NA,2500,NA,7400,9648,1112,1532,3487,3544,NA,7000))

impute<-cbind(a,b,c,d,e)
names(impute) <- c("X","site","var2","var3", "hh_inc") 

summary(impute)

m <- 5
a.output <- amelia(x = impute, m=m, autopri=0.5,cs="X",
               idvars=c("site","var2"),
               logs=c("hh_inc","var3"))

stats.out <- NULL
for(i in 1:m){
df2 <- data.table(a.output$imputations[[i]])
df3 <-  data.frame(dataset=i,df2[,list(std.error(hh_inc),mean(hh_inc)), by="site"])
stats.out <- rbind(stats.out, df3)
}
colnames(stats.out) <- c("dataset","site","stdError","mean")
stats.out 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:04:08.727

我不确定我是否理解您的问题或您的数据结构（特别是数据是否被估算的重要性），但这是我按组完成一些汇总统计的方式。

```
require(data.table)
require(plotrix)

# create some data
df1 <- data.frame(id=seq(1,50,1), wealth = runif(50)*1000)
df1$cutter <- cut(df1$wealth, 5, labels=FALSE)
head(df1)
# put the data into a data.table to speed things up  
df2 <- as.data.table(df1)
head(df2)

grp1StdErr <- df2[,std.error(wealth), by="cutter"]
grp1Mean <- df2[,mean(wealth), by="cutter"] 
```

希望这可以帮助。

或者，在一个分组步骤中：

```
df2[,list(std.error(wealth),mean(wealth)), by=cut(wealth,5,labels=FALSE)] 
```

# android - 如何在android中使用列表视图实现编辑文本

> ID：12530483
> 
> 赞同：0
> 
> 时间：2012-09-21T12:18:15.470
> 
> 标签：android

我的活动中有列表视图。在列表视图中，我有一个带有填充值的编辑文本框。我正在使用哈希图填充值。如果用户可以更改列表视图中的编辑文本值，我需要更新哈希图并使用更新值刷新列表视图

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:24:14.480

没有代码，在这里做一堆假设......

在您的自定义适配器内（在您的`getView`方法中），`setOnFocusChangeListener`在 EditText 上使用并让它触发您的代码以更新哈希图。

```
yourEditText.setOnFocusChangeListener(new View.OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        if (!hasFocus) {                                   // run when focus is lost
            String value = v.getText().toString();         // get the value from the EditText
            // Your code to update hashmap
        }
    }
}); 
```

# javascript - 如何获取文件的所有属性？

> ID：12530488
> 
> 赞同：0
> 
> 时间：2012-09-21T12:18:31.123
> 
> 标签：javascript, file, properties

我在 Javascript 中使用以下行来获取文件的属性：

```
 var fso = new ActiveXObject("Scripting.FileSystemObject");
  var fileObj = fso.GetFile("C:\ACME_Explosive_Bold.ttf");  
  alert('File Attribute: '+fileObj.Attributes); 
```

在IE9中，它显示一个警告窗口然后说：“文件属性：32”，这不是我想要的，我想看到的是这个文件的“标题”属性，如附图所示，如何我得到它 ？我试过 alert('File Attribute: '+fileObj.Attributes[10]); 但没有用。

数字“10”是标题，见这里：[http ://technet.microsoft.com/en-us/library/ee176615.aspx](http://technet.microsoft.com/en-us/library/ee176615.aspx)

![在此处输入图像描述](../Images/2615db2c35b7494f24a51bb18642cabc.png)

# javascript - Javascript超时功能 - 奇怪的行为

> ID：12530489
> 
> 赞同：1
> 
> 时间：2012-09-21T12:18:35.087
> 
> 标签：javascript

我试图实现一个[简单的 blckjack 游戏](http://venko.byethost14.com/)，问题是 timeOut 函数没有像我预期的那样工作。我写了一些调试信息来帮助你理解我的意思。用两个词我看到的是该函数被调用一次，然后由于某种原因它从函数中退出，程序继续执行自身，然后返回到 timeOut 函数......我想要的是暂停程序执行以等待用户选择是否停止申请新卡。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:25:28.820

waitForUserInput() 方法在哪里被调用？另外，为什么要使用超时来获取用户输入？为什么不简单地订阅鼠标点击事件呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:27:26.697

`setTimeout`不会停止执行脚本。这只是为了延迟执行。在你调用它之后 - 程序的执行将照常继续，但在指定的时间之后 - 作为第一个参数传递的函数将被执行。等待用户输入 - 查看 click/keyup/keydown 等事件。

您不应该在 JS 中执行以下操作。JS 总是单线程的，这样的循环只会冻结你的界面。在你的情况下，看起来你应该`onclick`在卡片块上放置事件并放一个代码来满足你的需要。

```
while(true){
        waitForUserInput();
        if(requestCard){
            userHand.hitMe();

            var userHandCards = userHand.printHand().split(",");
            displayCard(userHandCards[cardIndex]);
            cardIndex++;
            //console.log(">"+userHand.score());

            if(userHand.score()>21){
                break;
            }
        }else{
            break
        }

    }; 
```

> 我想要的是暂停程序执行以等待用户选择是否请求新卡ot停止

您应该放置一些指定了 onclick 处理程序的按钮。只需根据单击的按钮运行您需要的代码。现在我看不到用户如何对你的程序说他的选择。如果这是一个键盘命令（“s”按下而不是停止，“n” - 下一张卡片） - 你可以尝试使用`document.onkeyup`.

# php - 使用图形 API 的 Facebook 通知不起作用

> ID：12530493
> 
> 赞同：0
> 
> 时间：2012-09-21T12:19:01.570
> 
> 标签：php, facebook, facebook-graph-api, facebook-app-requests

我正在尝试使用 Graph api 向多个朋友发送应用请求通知，这是我的代码

```
 $apprequest_url="https://graph.facebook.com/" .
                       $user_id .
                       "/apprequests?message='My Message'" .
                       "&data='My Data'&"  .  
                       $app_access_token . "&method=post";

                     $result = file_get_contents($apprequest_url); 
```

这里 $result 什么也没给。它应该返回成功消息。

我不想用

```
FB.ui({
method: 'apprequests',
    message: 'My Message',
    link: "http://topperlearning.com",
    picture: "http://mydomain.com/abc.jpg",
    to:userIds,
    title:'TopperLearning.com'
}, function(response) {
        console.log(response);            
    });` 
```

因为它首先给出弹出窗口，然后用户必须单击发送请求。这就是为什么我正在尝试图形 api.BUt 不工作。我只是因为这个而被困

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:41:06.990

如果您记得激活无摩擦请求，您应该能够使用 Javascript 版本。

```
FB.init({
    appId  : 'YOUR_APP_ID',
    frictionlessRequests: true
  }); 
```

在 PHP 版本中，您似乎缺少**"access_token="**。$app_access_token
你也应该对你的数据进行urlencode。

# uilabel - How can I use Autolayout to create a layout that expands in height based on the content of a UILabel

> ID：12530495
> 
> 赞同：6
> 
> 时间：2012-09-21T12:19:08.590
> 
> 标签：uilabel, ios6, autolayout

I am attempting to build a dynamic layout using the new autolayout api in iOS 6.0\. The layout that I am attempting to build has 2 buttons with a label inbetween them as shown in the image below:

![enter image description here](../Images/688630059d32615eb3667275ef0abcce.png)

What I would like is for the container view shown in grey to increase or decrease in size depending on the amount of text in the label.

So far I've managed to get the layout to work exactly as described with one small issue that I've not been able to resolve. The problem I am having is that the intrinsic height of the label is alway calculated with the original width of the label (e.g. the one set in interface builder) and not the width of the label that is set from the constraints I have on it.

The constraints that I have on the views are as follows:

*   H:|-[leftButton]-[label]-[rightButton]-|
*   Both buttons are centered Vertically
*   V: |-[label]-|
*   the content hugging priority of the buttons is higher than the label
*   the compression Resistance of the label is higher than the container view

All of these constraints together create the desired layout.

However:

*   If the Width of the label in interface builder (the literal size in interface builder) is less than the width of the view at runtime, then the height of the container is too large.

![enter image description here](../Images/fb1125d1dbf264b8151b0e3b0fd63e26.png)

To help clarify this, the IB view of the above layout was as follows (note much narrower)

![enter image description here](../Images/560849d5772f1ba8499cda25fe4bd8f7.png)

*   If the Width of the label in interface builder (the literal size in interface builder) is greater than the width of the view at runtime, then the height of the container is too small and lines of text get cut off.

What appears to be happening is that although there is no constraint on the labels width, the label seems to calculate its height (and thus the autolayout calculated height of the container) based on the original width of the label when it was created. However whats so strange is that the text appears to be the correct width and height but the label itself has a frame thats just too big or small.

I guess this is related to the order in which things are happening, and have tried calling updateConstraintsIfNeeded in the containerViews layoutSubview method however this doesn't appear to do anything.

Any suggestions would be greatly appreciated.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T20:07:21.327

May be I am late but any way I've found solution. Any time when label width is changed you need to manually update preferredMaxLayoutWidth for Label. For example:

```
Label.preferredMaxLayoutWidth = 200; 
```

Interface builder sets preferredMaxLayoutWidth with initial label width. Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:48:04.770

Have you tried calling -invalidateIntrinsicContentSize on your label?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T10:25:40.217

Yes, `-invalidateIntrinsicContentSize` can also be used for this.

1.  Make a Custom Class like 'CustomLabel'.
2.  Set this Class for UILabel in interface builder.
3.  Override the functions which returns the IntrinsicContentSize

    ```
    -(CGSize)intrinsicContentSize {
    //If the width is Zero.
    if (self.frame.size.width == 0) {
        return [super intrinsicContentSize];
    }

    return [self.text sizeWithFont:self.font constrainedToSize:CGSizeMake(self.frame.size.width, MAXFLOAT)];
    } 
    ```

4.  Inform the system, to reCalculate it's Intrinsic Size by calling the method. `[CustomLabel invalidateIntrinsicContentSize];`

Hope this would help.

# javascript - Javascript - 覆盖对象内的属性（不是方法）

> ID：12530496
> 
> 赞同：5
> 
> 时间：2012-09-21T12:19:11.123
> 
> 标签：javascript

让我们用一个例子来解释这个问题。我有一个文本框。文本框（每个文本框）都有一个名为“值”的属性。我想超越它`textbox.value`并想出新事物。当文本框中的文本为“ranjan”时，该`textbox.VALUE`属性返回“ranjan”。现在我想覆盖它，这样当你输入时`textbox.VALUE`你会得到一个不同的东西，例如，RaNjAn 或者说，Ranjan 先生或其他什么。

我们可以使用 Object.PROTOTYPE 属性覆盖方法。但是对于对象内部的非函数对象，例如在这种情况下的“值”属性，我们如何做到这一点。

如果我需要使问题更清楚，请提及。

问候 - 兰詹。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T12:43:07.633

您可以使用为您的元素定义自定义属性`Object.defineProperty`

例如，如果您需要获取元素的值`Mr. <value>`，那么这种方法将很有用。覆盖标准属性可能不是一个好主意。

**演示**：http: [//jsfiddle.net/zvCGw/2/](http://jsfiddle.net/zvCGw/2/)

**代码**：

```
var foo = document.getElementById('foo');

Object.defineProperty(foo, "xvalue", {
    get: function() {
        return 'Mr. ' + foo.value;
    },
    set: function(_newValue) {
        foo.value = _newValue;
    }
});

foo.xvalue = 'Hello';

alert(foo.xvalue); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:43:20.580

您正在尝试做的事情称为类型扩充。在 javscript 中有各种类型的东西，比如对象类型、数组类型等。

您可以使用原型来扩充这些内置类型，例如，添加一个可以在任何类型为数组的对象上调用的新方法：

```
Array.prototype.myNewMethod = function() {
    //the method logic
} 
```

然后你可以在任何数组上调用你的方法：

```
[0,1,2].myNewMethod(); 
```

JavaScript 中没有 INPUT 类型，DOM 元素被归类为对象。但是你可以把一些东西混在一起做你需要的东西，就像这样

```
Object.prototype.changeValue = function(el) {
    if (el.tagName === "INPUT") {
        return "Mr " + el.value;
    }
}

var testEl = document.getElementById("test");
document.write(testEl.changeValue(testEl)) 
```

与此文本框一起使用：

```
<input id="test" value="Dan" /> 
```

然后你会得到输出'丹先生'

然而，这不是很好，它只是为了说明这一点，只是让你开始......

我做[了一个小提琴](http://jsfiddle.net/2VZyb/)，所以你可以玩它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:56:02.877

你可以重新声明价值，但它不会有好处;）

如果 test 是文本框，则此示例将执行此操作

```
var input = document.getElementById("test");

Object.defineProperty(input, "value", {
    get : function () {
        return "'" + this["value"] + "'";
    },
    set : function (val) {
        this["value"] = val;
    }
});

input.value = "Hello World";
alert(input.value); 
```

不幸的是，“this.value”将引用导致​​无限递归的 getter。

一旦重新定义，原始值将不再存在，因此您将削弱元素对象。

至少在我能够测试的范围内。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-31T01:07:16.940

如果您尝试覆盖的属性也可以由 HTML 属性（例如输入的`value`）表示，那么您可以使用`getAttribute`and `setAttribute`。

```
Object.defineProperty(myInputElement, 'value', {
    get: function () {
        return myInputElement.getAttribute('value');
    },
    set: function (value) {
        myInputElement.setAttribute('value', value);
    }
}); 
```

但是请注意，如果不重新实现它，则无法覆盖此覆盖本身。

# java - 如何在 Android 中压缩 RAR 格式的文件？

> ID：12530497
> 
> 赞同：2
> 
> 时间：2012-09-21T12:19:11.797
> 
> 标签：java, android

在我的项目中，我需要仅使用**RAR 格式**压缩文件。

如何在**Android中将****文件压缩为 RAR**格式？

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T13:07:47.653

RAR 是一种专有格式，具有封闭的算法，因此您可能找不到任何开源的 Java API。

但是 Zip 会做你想做的事，并且可以广泛使用，并且带有 Java 中的 Api。**

# c++ - sizeof - 将指针转换为数组

> ID：12530498
> 
> 赞同：0
> 
> 时间：2012-09-21T12:19:24.443
> 
> 标签：c++, c

> **可能重复：**
> [如何找到 sizeof（指向数组的指针）](https://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array)

我有以下代码

```
int myfunc(char *arr)
{
const int sizearr = sizeof( arr ) / sizeof(char);
} 
```

这会产生指针的大小，而不是我传递给函数的 char 数组 [17] 的大小。

我知道我可以使用 strlen 并解决问题，但是有什么方法可以将 char*arr 指针转换回我传递给函数的 char 数组 [17] 以便使用 sizeof(char 数组 [17]) ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T12:23:06.427

如果要传递 17 个字符的数组，则需要通过引用传递它（仅限 C++）：

```
int myfunc(char (&arr)[17])
{
    unsigned int const sizearr = sizeof arr;
    // ...
} 
```

或者做一个模板来推导出大小：

```
template <unsigned int sizearr>
int myfunc(char (&arr)[sizearr])
{
    // ...
} 
```

在 C 中，您根本不能将数组作为参数传递，因此*您*有责任单独传达数组大小。

*更新：*正如@David 所建议的，您可以通过将指针传递给数组来修复 C 中的数组类型：

```
int myfunc(char (*arr)[17])
{
    unsigned int const sizearr = sizeof *arr;
    // ...
}

int main()
{
    char s[17];
    return myfunc(&s);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:24:12.790

不，没有这样的方法。但在 C++ 中，您可以通过数组大小参数化函数模板并通过引用传递数组：

```
template <size_t size> void myfunc(char (&arr)[size])
{
   for(size_t i = 0; i < size; ++i) std::cout << arr[i];
}

// Usage
char array[] = "My char array";
myfunc(array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:21:25.490

不。

没有这样的方法。该类型`char *`不包含有关“源”的任何信息，即数组。这就是为什么说数组“衰减”为指针的原因。指针的信息比数组少。

[另外，`sizeof (char)`是 1。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T12:21:44.910

不是真的，因为一旦数组[衰减到一个指针，](https://stackoverflow.com/questions/1461432/what-is-array-decaying)所有关于它的“原始”形式的信息都已经丢失了。您始终可以将指针转换为 a`char[17]`但这是不好的做法。

如果您确实需要一个数组，请将函数签名更改为接受一个数组。

# php - Magento：触发定期通话（结帐）

> ID：12530501
> 
> 赞同：1
> 
> 时间：2012-09-21T12:19:34.363
> 
> 标签：php, api, magento

我正在寻找有关每次在 Magento 中进行重复/销售/结帐时如何触发 http 调用或函数/方法/类的链接或教程。

我需要在外部会计服务中预订所有销售

看过这个链接，但它看起来不能触发 Magento 中的事件？！在这里，您需要拨打外部 [http://www.magentocommerce.com/wiki/doc/webservices-api/api](http://www.magentocommerce.com/wiki/doc/webservices-api/api)

真的希望有人可以帮助我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:30:43.553

In every event, **magento** has been add a `dispatchEvent`.

like `sales_order_save_after/sales_order_delete_after/customer_customer_save_after` or many more. check the `$_eventPrefix` on a class. if there is `$_eventPrefix` on a class then you can call the Mage::DispatchEvent for trigger a call.

[MagentoCommerce](http://www.magentocommerce.com/boards/viewthread/3459/)

[Inchoo](http://inchoo.net/ecommerce/magento/dispatching-before-and-after-events-to-magento-core-actions/)

# c# - C# - OR 是否像 Else If 一样？

> ID：12530505
> 
> 赞同：0
> 
> 时间：2012-09-21T12:19:58.677
> 
> 标签：c#

> **可能重复：**
> [是否会执行逻辑表达式中的所有方法？](https://stackoverflow.com/questions/781832/will-all-methods-in-a-logical-expressions-be-executed)

让我解释一下：假设我们有这两个代码：

```
foreach(Object o in Objs)
    if(o is Class1 || o is Class2)
        DoSomething(); 
```

__

```
foreach(Object o in Objs)
    if(o is Class1)
        DoSomething();
    else if(o is Class2)
        DoSomething(); 
```

现在，在这种情况下当然 OR 更好，但我的问题是不同的，只是出于好奇：在第一种情况下 o 是 Class1 类型时，编译器是停止并运行代码还是检查接下来会发生什么？在第二种情况下会这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T12:22:20.863

`||`是短路，这意味着：如果第一个参数返回`true`，第二个参数**不被计算**。这样，*是*的，它大致等同于您的第二个示例，但更简洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:23:07.220

[|| 的 MSDN 文档 C#中的运算符](http://msdn.microsoft.com/en-us/library/6373h346.aspx)

> 条件或运算符 (||) 对其布尔操作数执行逻辑或。如果第一个操作数的计算结果为真，则不计算第二个操作数。如果第一个操作数的计算结果为 false，则第二个运算符确定整个 OR 表达式的计算结果为 true 还是 false。

注意：我所知道的所有类 C 语言（C、C++、Java、C#）也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:23:56.210

在操作`x || y`中，`y`仅当`x`为假时才评估。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T12:24:06.603

是的。

双管或“||” 如果某个条件为真，会从左到右查找，是否停止查找其他条件并执行该段代码。简单的管道或“|” 会做同样的事情，但会检查所有条件（所以通常你会更喜欢使用“||”）。

# c# - 访问 AD 信息的问题（PowerShell 脚本有效，C# 代码无效）

> ID：12530507
> 
> 赞同：1
> 
> 时间：2012-09-21T12:20:07.453
> 
> 标签：c#, powershell, active-directory, adsi

我发现了这个在域中搜索 Exchange 服务器的 PowerShell 脚本。

```
 Function Get-ExchangeServerInSite {
    $ADSite = [System.DirectoryServices.ActiveDirectory.ActiveDirectorySite]
    $siteDN = $ADSite::GetComputerSite().GetDirectoryEntry().distinguishedName
    $configNC=([ADSI]"LDAP://RootDse").configurationNamingContext
    $search = new-object DirectoryServices.DirectorySearcher([ADSI]"LDAP://$configNC")
    $objectClass = "objectClass=msExchExchangeServer"
    $site = "msExchServerSite=$siteDN"
    $search.Filter = "(&($objectClass)($site))"
    $search.PageSize=1000
    [void] $search.PropertiesToLoad.Add("name")
    [void] $search.PropertiesToLoad.Add("msexchcurrentserverroles")
    [void] $search.PropertiesToLoad.Add("networkaddress")
    $search.FindAll() | %{
        New-Object PSObject -Property @{
            Name = $_.Properties.name[0]
            FQDN = $_.Properties.networkaddress |
                %{if ($_ -match "ncacn_ip_tcp") {$_.split(":")[1]}}
            Roles = $_.Properties.msexchcurrentserverroles[0]
        }
    }
}

    $role = @{
    2  = "MB"
    4  = "CAS"
    16 = "UM"
    32 = "HT"
    64 = "ET"
}

   foreach ($server in Get-ExchangeServerinSite) {
  $roles = ($role.keys | ?{$_ -band $server.roles} | %{$role.Get_Item($_)}) -join ", "
  $server | select Name, @{n="Roles";e={$roles}},FQDN
} 
```

因为我需要在不使用 PowerShell 的情况下在 C# 代码中执行相同的任务。我尝试以相同的方式使用 .Net 类，甚至调试了两个脚本并且信息是相同的。

现在我的问题。PowerShell 脚本正确显示服务器并且 C# 代码返回一个空集合。

这里是 C#

```
string siteDN = ActiveDirectorySite.GetComputerSite().GetDirectoryEntry().Properties["distinguishedName"].Value.ToString();

DirectoryEntry RootDSE = new DirectoryEntry( @"LDAP://RootDSE" );
string baseStr = @"LDAP://" + RootDSE.Properties["configurationNamingContext"].Value ;

DirectorySearcher searcher = new DirectorySearcher(baseStr ); 

string classObj = "objectClass=msExchExchangeServer";
string site = "msExchServerSite="+siteDN;
searcher.Filter = string.Format("(&({0})({1}))",classObj,site);

searcher.PropertiesToLoad.Add( "name" );
searcher.PageSize = 1000;
searcher.ServerTimeLimit = new TimeSpan(0,1,0);
searcher.CacheResults = false;

SearchResultCollection coll = searcher.FindAll(); 
```

我能找到的唯一区别是`[ADSI]`PowerShell 代码中的标签，但我无法从中找出 C# 部分是什么。

# jquery - 自动高度fancybox2

> ID：12530508
> 
> 赞同：0
> 
> 时间：2012-09-21T12:20:13.800
> 
> 标签：jquery, fancybox, fancybox-2

我在我的一个网站上使用了 fancybox 插件。我真的很喜欢使用它，直到遇到这个问题。在fancybox里面我想放一个手风琴。问题是我希望花式框的高度增加，并且在折叠手风琴时不显示滚动条。

请点击[这里](http://jsfiddle.net/sunnyjaysabuero90/wufGk/)查看我当前的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:36:40.953

花哨的盒子打开后，您需要更新高度。更新了您的代码添加`afterShow`

```
$(".fancybox").fancybox({
    openEffect : 'elastic',
    openSpeed  : 150,
    closeEffect : 'elastic',
    closeSpeed  : 150,
    autoDimensions: true,
    height: 'auto',
    afterShow: function(){
        $.fancybox.update()
    }
}); 
```

这是工作演示，[http://jsfiddle.net/muthkum/wufGk/1/](http://jsfiddle.net/muthkum/wufGk/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:36:20.530

用这个：

```
$.fancybox.update(); 
```

演示：http: [//jsfiddle.net/wufGk/2/](http://jsfiddle.net/wufGk/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:09:29.850

我在下面的网址 [http://jsfiddle.net/sunnyjaysabuero90/wufGk/](http://jsfiddle.net/sunnyjaysabuero90/wufGk/)的 height:'auto' 之后添加了下面的代码，它可以工作

```
    $(".fancybox").fancybox({
        openEffect : '弹性',
        开放速度：150，
        closeEffect : '弹性',
        关闭速度：150，
        自动尺寸：真，
        高度：'自动'，

    演出前：函数（）{
       this.width = $('.fancybox-iframe').contents().find('html').width();
       this.height = $('.fancybox-iframe').contents().find('html').height();
      }
        适合查看：假
    });

    $('.accordionButton').click(function() {
        $('.accordionButton').removeClass('accordionButton-open');
        $('.accordionContent').slideUp('fast');
        if($(this).next().is(':hidden') == true) {
        $(this).addClass('accordionButton-open');
        $(this).next().slideDown('fast');
        }
    });

```

# andengine - 如何在andengine中放置类似场景的广告弹出窗口

> ID：12530511
> 
> 赞同：1
> 
> 时间：2012-09-21T12:20:40.370
> 
> 标签：andengine, ads, scene

我想开始在我的 andengine 游戏中放置广告，并在我的结果显示屏幕之前显示一个广告（例如水果忍者）。由于我的结果屏幕是一个场景而不是一个活动，我希望在我玩游戏之后和结果之前弹出一个广告，然后点击按钮，广告就会消失。我认为有一个名为 popupscene 的类，但我不确定是否要使用它。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:21:28.437

我使用 GLES1 版本的引擎做了一个例子： [https ://github.com/zfoley/AndengineAdmobLayoutExample](https://github.com/zfoley/AndengineAdmobLayoutExample)

最主要的是使用 LayoutGameActivity 而不是 BaseGameActivity。除了 GLSurfaceView 之外，LayoutGame 活动还支持具有其他视图。

一旦你做到了，实现 admob API 或你正在使用的任何广告服务都非常简单。在我的示例中，我使用 admob。

# php - 从 DNS 或 DHCP 服务器获取信息

> ID：12530514
> 
> 赞同：0
> 
> 时间：2012-09-21T12:20:47.980
> 
> 标签：php, networking, dns, lan, dhcp

我正在用 PHP 制作一个网络监控程序。我希望能够连接到 DNS 或 DHCP 服务器并获取属于网络的所有计算机。目前我正在运行嵌套的 for 循环来 ping 每个可能的 IP 地址，但是它需要很长时间才能使用超过 10 个子网。我正试图从像菜鸟一样做事变成像老板一样做事。我想获取所有计算机名称和 IP 地址的列表，以及它们的 IP 是动态分配还是静态分配。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:27:55.240

无法枚举网络上的所有主机，即使 ping 所有主机也不够，因为有些主机可能不会回复 ping。对于动态分配的，您可以查询 DHCP 服务器，但作为协议的 DHCP 不支持此功能，您必须编写一个守护进程并查询日志或分配文件。

如果您确实想通过 ping 来执行此操作，我建议您编写一个小程序，在后台运行并 ping 一切，将结果保存在内存中，然后让您的 php 脚本查询。这样，您的响应时间将接近即时。只要主机不频繁出现和消失（听起来不太可能），那么这应该没问题。

# jquery - 如何在使用 jquery 的单击事件后转到特定选项卡？

> ID：12530515
> 
> 赞同：-1
> 
> 时间：2012-09-21T12:20:50.997
> 
> 标签：jquery, html, jquery-ui

单击事件后如何转到特定选项卡，我尝试过，`$("#tabs").tabs()`因为每次刷新它都会回到原来的状态但仍然无法正常工作，正确的做法是什么？

这是我的jQuery代码：

```
$(function() {
    $("#tabs").tabs();
    $("#btn").click(function() {
    //what to put here?
    //I tried this but do not work, since i notice every refresh it go back to its original tab
    $("#tabs").tabs();
    });
}); 
```

这是我的 HTML 代码：

```
<div id="tabs">
<ul>
<li><a href="#login">Login</a></li>
<li><a href="#register">Register</a></li>
</ul>
<div id="login">
</div>
<div id="register">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:24:08.453

可以使用`select`jquery ui tabs的方法：

```
$(function() {
    $("#tabs").tabs();
    $("#btn").click(function() {
        $("#tabs").tabs("select", "mytab"); // will switch to mytab
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:24:28.250

试试看：`$('#tabs').triggerTab(2);`//2这里是注册标签

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:25:55.353

使用指定的选定选项初始化选项卡。

```
$( ".selector" ).tabs({ selected: 3 }); 
```

在 init 之后获取或设置选定的选项。

```
//getter
var selected = $( ".selector" ).tabs( "option", "selected" );
//setter
$( ".selector" ).tabs( "option", "selected", 3 ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T12:27:46.043

您可以将最新的选项卡存储在 Cookie 中，而无需太多额外代码：

[http://jqueryui.com/demos/tabs/#option-cookie](http://jqueryui.com/demos/tabs/#option-cookie)

```
$( ".selector" ).tabs({ cookie: { expires: 30 } }); 
```

然后它总是会返回到您所在的最后一个选项卡。

然后转到特定选项卡：http: [//jqueryui.com/demos/tabs/#option-selected](http://jqueryui.com/demos/tabs/#option-selected)

```
$( ".selector" ).tabs( "option", "selected", 3 ); 
```

# javascript - 如何提高此 FileReader 的响应能力？

> ID：12530518
> 
> 赞同：2
> 
> 时间：2012-09-21T12:21:08.930
> 
> 标签：javascript, memory, filereader

您如何改善我制作的文件阅读器的响应能力？

我创建了一个简单的动画来看看它是如何影响 UI 的，并且它确实会在很大程度上阻止 UI。

我什至尝试使用`File.slice`分块读取文件，但它似乎只获得了轻微的性能提升，代价是加载文件需要更长的时间。

这里有一个小提琴：http: [//jsfiddle.net/8A3tP/2/](http://jsfiddle.net/8A3tP/2/)

**更新**

通过使用递归函数代替 for 循环依次加载它们中的每一个，我设法获得了更好的结果：http: [//jsfiddle.net/8A3tP/5/](http://jsfiddle.net/8A3tP/5/)

# c# - 以单个类作为源代码的 NuGet 包

> ID：12530520
> 
> 赞同：2
> 
> 时间：2012-09-21T12:21:18.510
> 
> 标签：c#, nuget, nuget-package

我有一个简单的类，我喜欢在进行单元测试时使用。我想创建一个 NuGet 包，以便我可以轻松使用它并在我的解决方案之间传播更新。

我是否必须创建它的程序集，或者是否可以创建一个 NuGet 包，其中仅包含一个源文件，然后与其他所有文件一起编译？如果是这样，您将如何配置该软件包？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T12:43:30.910

如果你想创建一个只有源代码文件的包，这很简单。有关更多说明，请参阅[此博客文章。](http://haacked.com/archive/2010/11/19/nuget-transformation.aspx)

首先，创建您的代码文件，并将其保存为（例如）myFile.cs.pp（注意 pp（预处理器）扩展名。您可以对文件进行一些预处理，例如命名空间。添加.MySubNameSpace 的命名空间，将代码文件中的声明更改为 `namespace $rootnamespace$.MySubNameSpace` 将此文件添加到 nuget 包的内容部分。构建包，一切就绪。

您的 .nupec 包文件将如下所示。

```
<?xml version="1.0" encoding="utf-16"?>
<package xmlns="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd">
    <metadata>
        <id>MyPackageName</id>
        <version>1.0.0</version>
        <title>My Package Name</title>
        <authors>Your Name</authors>
        <owners />
        <requireLicenseAcceptance>false</requireLicenseAcceptance>
        <description>My package description.</description>
    </metadata>
    <files>
        <file src="content\myCodeFile.cs.pp" target="content\myCodeFile.cs.pp" />
    </files>
</package> 
```

您可以通过[NuGet 包资源管理器](http://npe.codeplex.com/)完成所有这些操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T12:25:47.033

编辑：正如其他答案所说，NuGet*可以*让您分发简单的源代码。但是，我强烈建议您采用更主流的方法，即只提供一个程序集。NuGet 可以很快地做到这一点 - 您必须经历为这个源文件创建一个单独的项目并为该程序集创建一个包的“痛苦”，但这一切都非常简单。

这有一个额外的好处，当您（几乎不可避免地）想要添加更多类型时，它不会给依赖它的项目带来任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:36:30.203

只需使用此处引用的内容文件夹[Nuspec 参考](http://docs.nuget.org/docs/reference/nuspec-reference)（查找“内容文件”部分）

```
<file src="css\mobile\*.css" target="content\css\mobile" /> 
```

# git - 在没有父母的情况下提交后 Git 责备被打破

> ID：12530528
> 
> 赞同：1
> 
> 时间：2012-09-21T12:21:38.690
> 
> 标签：git

我做了坏事..我不知道我做了什么，但我现在有两个没有父母的提交。据我所知，我只应该有一个，这是初始提交。

每当我责备时，*时髦*提交之前的所有更改都指向提交 2139f47。

这是我的 reflog 的*时髦*部分：

```
...
49d0d22 HEAD@{313}: commit (merge): unused questions widget removed
2139f47 HEAD@{314}: commit: unused questions widget removed
e548c10 HEAD@{315}: commit: unused questions widget removed
e7d174b HEAD@{316}: pull: Fast-forward
... 
```

内部链接看起来像这样：

```
 HEAD
   |
  ...         e548c10
   |             |
49d0d22 -----+   |
   |         |   |
2139f47     e7d174b
   |           |
  nil         ...
               |
            initial 
```

合并提交对象（49d0d22）的内容是：

```
tree c3989e79c49df4b141b080502192bf0be0f67195
parent 2139f479dac242ad2ef757519aef77f3003ca996
parent e7d174bef4ab7e89b96f8c3de3551d0b760c80f8
author Michael Andersen <***> 1345190024 +0200
committer Michael Andersen <***> 1345190024 +0200

unused questions widget removed 
```

没有父级的*时髦*提交 (2139f47) 的内容是：

```
tree 4cfebc6b5a2a525bc255e4e095008b6aa8b106cc
author Michael Andersen <***> 1345189769 +0200
committer Michael Andersen <***> 1345189918 +0200

unused questions widget removed 
```

似乎没有对象指向（e548c10）的提交的内容是：

```
tree 0ae0960fccee7faec86ce7a82dd30af70f9c225a
parent e7d174bef4ab7e89b96f8c3de3551d0b760c80f8
author Michael Andersen <***> 1345189769 +0200
committer Michael Andersen <***> 1345189769 +0200

unused questions widget removed 
```

**所以我的问题是：**

我可以删除时髦的提交吗？以及这如何影响我的程序员同事的起源和本地存储库？

- - 编辑 - -

我不在乎丢失一些提交对象。如我所见，我需要去掉 2139f47 和 e548c10。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T07:29:12.627

您可以执行以下操作：

1.  使用与 相同的树创建提交`49d0d22`，但具有单个父级，`e7d174b`。这一步需要一个不是每天都使用的“管道”命令。

2.  将的后代重新定位`49d0d22`到此新提交。这使您`HEAD`再次可用。

3.  警告您的同事您即将执行*非快进推送*。（如果 repo 被定制为拒绝非快进推送，请与 repo 管理员联系以暂时启用它。）执行推送。

4.  确保您的同事更新他们的树`git pull --rebase`，这样他们就不会尝试与您的旧合并`HEAD`。为了验证这一点，让他们`git merge-base HEAD 49d0d22`在拉动后运行——它应该是空的。

实现这些步骤的命令应如下所示：

```
# 0.
git checkout master # or whatever your working branch is called

# 1.
commit=$(git commit-tree -m "unused questions widget removed" -p e7d174b 49d0d22:)

# $commit should now identify the new commit; you should be able to see it
# with git log $commit or any other git inspection tool.

# 2.
git rebase 49d0d22 --onto $commit
# now your HEAD should be in a valid state.
# git merge-base HEAD 49d0d22 should output nothing

# 3.
git push origin master

git checkout master # or whatever your main branch is called 
```

至于提交`e548c10`——忽略它。删除引用它的本地和远程分支，并告诉其他人也忽略它。因为这个提交没有以`2139f47`任何方式引用，所以这个步骤完全独立于上面的手术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T21:27:34.443

使用一些移植物或替换物为您的 repo 提供正确的外观（链接），然后使用过滤器分支使其永久化。

这假设那些时髦的部分尚未与其他依赖它的人一起发布。

* * *

编辑 不久前，我问[了如何做 git-grafts-and-replace-differ，现在不推荐使用 grafts 了吗？](https://stackoverflow.com/questions/6800692/how-do-git-grafts-and-replace-differ-are-grafts-now-deprecated)关于这两种技术。

在实践中，我发现移植物更容易设置。它只是您想要尊重的提交-父对的列表，而不是提交中列出的现有父对。

这意味着，例如，您可以使用一对绕过错误提交的提交链来中断提交链（请记住，所有提交都只是快照；-）。

在您的情况下，您可以通过将必要的链接添加到移植文件中来使任何提交看起来在提交链中的任何位置。您甚至可以使用移植物（两个父母在线）创建“假”合并。

因此，创建列出您希望更改的链接的列表（grafts 文件），然后它将以您想要的方式显示（看起来）。那时您可能希望将其永久化，因此只需运行`git filter-branch`以重写这些部分。只要确保任何同事都知道会发生什么，这样他们就不会“感到惊讶”。

# android - 将按钮添加到 Android 软键盘

> ID：12530533
> 
> 赞同：0
> 
> 时间：2012-09-21T12:21:48.183
> 
> 标签：android, android-softkeyboard

我可以在软键盘上添加下一个按钮，但我也想添加上一个按钮，如果可以，请告诉我怎么做？

我正在尝试这个

[Android - 在我的活动中单击编辑文本时将下一个和上一个按钮添加到软键盘](https://stackoverflow.com/questions/8783875/android-add-next-and-prev-button-to-softkeyboard-which-appears-on-click-of-an)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:38:25.553

请参阅您自己参考的第一个答案。它有一条评论说你不能同时拥有下一个和上一个。你可以有下一个和完成，但不能下一个和上一个。只需检查此网址。developer.android.com/resources/articles/on-screen-inputs.html

# xcode - 如何记录自定义 LLDB 命令（别名）？

> ID：12530535
> 
> 赞同：4
> 
> 时间：2012-09-21T12:21:50.383
> 
> 标签：xcode, gdb, lldb

在 GDB 中（通常在 .gdbinit 文件中）我用来记录我添加的自定义命令，如下所示：

```
define parg    <-- this define my custom command
p *($arg0*)($ebp+8+(4*$arg1))     <--- what in does
end

document parg   <--- HERE IS THE COMMENT / DOCUMENTATION ON THIS CUSTOM COMMAND
Prints current function arguments

parg <type> <index>
Prints the <index>th argument of the current function as type <type>
<index> is 0-based
end 
```

我知道如何在 LLDB 中添加命令（命令别名 ...），但我该如何记录呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T21:52:56.903

记录命令别名没有任何余地——它们通常非常简单，在它们上运行“帮助”将显示它们扩展的内容——但如果你在 python 中定义一个命令，你可以向该命令添加文档。例如，

```
(lldb) script
Python Interactive Interpreter. To exit, type 'quit()', 'exit()' or Ctrl-D.
>>> def say_hello(debugger, command, result, dict):
...   print 'hello!'
...   description = '''This command says hello.'''
...   usage = 'usage: say_hello'
... 
>>> ^D
(lldb) command script add -f say_hello say_hello
(lldb) say_hello
hello!
(lldb) help say_hello
   Run Python function say_hello  This command takes 'raw' input (no need to quote stuff).

Syntax: say_hello
(lldb) 
```

请注意我在空行上按回车键的第四行“...”。

有关 lldb 中的 python 脚本的更多信息，请参阅[http://lldb.llvm.org/python-reference.html](http://lldb.llvm.org/python-reference.html)

但是不，您的问题的答案是您今天不能记录命令别名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T15:07:48.000

[您可以使用Python 参考](http://lldb.llvm.org/python-reference.html)中记录的文档字符串记录自定义 lldb 命令：

> 或者，您还可以提供 Python 文档字符串，LLDB 将在为您的命令提供帮助时使用它，如下所示：

```
(lldb) script
>>> def documented(*args):
...     '''
...     This command is documented using a docstring.
...
...     You can write anything!
...     '''
...     pass
...
>>> exit
(lldb) command script add -f documented documented
(lldb) help documented

    This command is documented using a docstring.

    You can write anything!

Syntax: documented
(lldb) 
```

# jquery - ASP.NET MVC 方括号集合模型绑定

> ID：12530536
> 
> 赞同：3
> 
> 时间：2012-09-21T12:21:52.120
> 
> 标签：jquery, asp.net-mvc, collections, model-binding, jquery-select2

ASP.NET MVC 的集合模型绑定需要名称属性中的方括号索引`<input />`才能正确绑定集合模型，例如`<input name="Lines[0].Name" />`，使用如下操作：

```
public ActionResult Create(IEnumerable<MyInputModel> Lines) {
    // ...
} 
```

但是，名称属性中的句点和方括号是某些 jQuery 插件的一个[已知问题](http://blogs.teamb.com/craigstuntz/2009/02/11/38013/)，包括我正在使用的[Select2列表选择器。](http://ivaynberg.github.com/select2/)

由于我不想破解 Select2，我如何告诉 ASP.NET MVC 使用句点或下划线而不是方括号来分隔集合索引，例如`<input name="Lines.0.Name" />`？

* * *

**注意：**我正在使用这个[集合模型绑定技术](http://weblogs.asp.net/nmarun/archive/2010/03/13/asp-net-mvc-2-model-binding-for-a-collection.aspx)来生成非顺序`Guid`索引，所以我已经声明了一个自定义的`HtmlFieldPrefixScope`.

* * *

**更新：**我通过破解 Select2 事件中的自定义滚动/调整大小事件名称来解决这个问题，这些事件将无效`[`或`]`字符传递给`bind`/ `unbind`jQuery 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:15:19.577

```
public ActionResult Create(List<MyInputModel> Lines) {
    // ...
}

<input name="Lines[0].Name" /> 
```

确保输入名称**与列表名称**和**索引以 0 开头**。

哦，对不起，我想念明白。试试这个方法。

```
@foreach (var item in Model)
{
   var name = string.Format("Lines[{0}].name", i);
   <input type="text" name="@name" value="@item.name" />
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:37:08.153

您真的需要实体列表吗？因为如果不是，并且字符串列表就足够了，您可以跳过带索引的括号：[就像这里](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:53:53.320

您不能自定义 DefaultModelBinder 来实现这一点。但是您可以使用自定义`FormValueProvider`将传入的前缀格式转换`List.0.Name`为`List[0].Name`并返回值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T15:55:26.197

我不确定您是否可以更改选择器以使用“id”属性而不是“名称”属性。如果是这样，MVC 中的集合绑定仍然有效，并且您将在 id 属性中拥有 jquery 安全值，您可以将其与 Select2 一起使用：

```
@for(int i=0; i<Lines.Count; i++) {
    <input name="@Html.FieldNameFor(m=>m.Name)" id="@Html.FieldIdFor(m => m.Name)" />
} 
```

# sql - 将 SQL 转换为 LINQ 到实体

> ID：12530538
> 
> 赞同：1
> 
> 时间：2012-09-21T12:21:55.140
> 
> 标签：sql, linq, count, linq-to-entities, linq-group

我正在尝试将以下不是我自己编写的 SQL 转换为 Linq to Entity 查询。

```
select 
    u.user_Id, 
    u.forename,
    u.surname,
    u.client_code,
    u.user_name, 
    u.password, 
    u.email, 
    u.gender, 
    u.Report_Date, 
    u.EmailDate,
    count(ut.test_Id) as testcount, 
    sum(cast(isnull(ut.completed,0) as int)) as Testcompleted, 
    u.job_function, 
    lu.lookupvalue
from 
users u inner join user_Relationship ur
    on u.user_Id= ur.child_Id       
left join user_tests ut
    on ut.user_id=u.user_id 
inner join lookup lu on u.first_languageId = lu.lookupid
where ur.parent_Id = @Parent_Id 
group by 
    u.user_Id, u.forename,u.surname,u.client_code,u.user_name, u.password, 
    u.email, u.gender, u.first_languageId, u.Report_Date,u.EmailDate,  
    u.job_function, lu.lookupvalue 
```

到目前为止，我已经能够做到这一点：

```
from u in db.Users

join ur in db.User_Relationship on u.User_ID equals ur.Child_ID

join ut in db.User_Tests on u.User_ID equals ut.User_ID into ps
from ut in ps.DefaultIfEmpty()

join lu in db.Lookups on u.First_LanguageID equals lu.LookupID

where ur.Parent_ID == 45875

select new UserViewModel
{
    User_ID = u.User_ID,
    Forename = u.Forename,
    Surname = u.Surname,
    Client_Code = u.Client_Code,
    User_Name = u.User_Name,
    Password = u.Password,
    Email = u.Email,
    Gender = u.Gender,
    Report_Date = u.Report_date,
    Email_Date = u.EmailDate,
    //Insert Test_Count and Test_Completed
    Job_Function = u.Job_Function,
    Lookup_Value = lu.LookupValue
}); 
```

如何复制SQL的`Group`and函数？`Count()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:58:48.297

很好地围绕这个解决方案进行调整，因为目前我没有.Net 环境来测试这个解决方案，但你肯定会知道`grouping`在 linq 中是如何完成的。

```
from u in db.Users

join ur in db.User_Relationship on u.User_ID equals ur.Child_ID

join ut in db.User_Tests on u.User_ID equals ut.User_ID into ps
from ut in ps.DefaultIfEmpty()

join lu in db.Lookups on u.First_LanguageID equals lu.LookupID

where ur.Parent_ID == 45875 group new{u,lu} by new {u.User_ID,u.Forename,
                          u.Surname,u.Client_Code,
                          u.User_Name,u.Password,
                          u.Email,u.Gender,u.Report_date,
                          u.EmailDate,u.Job_Function,
                          lu.LookupValue} into g
let Test_Count = ps.Count(x=>x.test_Id)
let Test_Completed = ps.Sum(x=>x.completed)
select new UserViewModel
                      {
                          User_ID = g.Key.User_ID,
                          Forename = g.Key.Forename,
                          Surname = g.Key.Surname,
                          Client_Code = g.Key.Client_Code,
                          User_Name = g.Key.User_Name,
                          Password = g.Key.Password,
                          Email = g.Key.Email,
                          Gender = g.Key.Gender,
                          Report_Date = g.Key.Report_date,
                          Email_Date = g.Key.EmailDate,
                          Test_Count = Test_Count,
                          Test_Completed = Test_Completed,
                          Job_Function = u.Job_Function,
                          Lookup_Value = lu.LookupValue
                      }); 
```

# html - 在居中的主体元素内展开 div 元素

> ID：12530542
> 
> 赞同：0
> 
> 时间：2012-09-21T12:22:14.053
> 
> 标签：html, expand, document-body

我的html页面的body放在页面中间，如下图：

```
<body style="margin:0 auto; width:75%"> 
```

现在我想放一个带有背景颜色的条带，沿着屏幕的整个宽度展开，就像这样。

```
<body style="margin:0 auto; width:75%">
<div style=" margin-left:0; margin-right:0;width:100%; height:20px; background- color:
#e6e3e3;"></div>
</body> 
```

但是，这是行不通的。div 元素不会超出 body 元素指定的边界。如何做呢？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:29:18.903

除非您想使用 javascript 来查找窗口的宽度并以编程方式设置 div 的宽度，否则您最好的选择是将页面结构调整为：

```
<html>
  <body>
    <div style="margin:0, width:100%, padding:0"></div>
    <div class="content" style="margin:0 auto, width:75%"></div>
  </body>
</html> 
```

因此，不是使整个 body 元素居中，而是有一个居中的“内容”div。这将允许您将某些元素放在内容 div 之外，它们可以是整个窗口的宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:40:09.063

你想达到这样的目标吗？

[**http://jsfiddle.net/TZ9Y7/**](http://jsfiddle.net/TZ9Y7/)

CSS：

```
html, body {
    height: 100%;
}

body{ margin:0 12.5%; border: 2px solid black; }

.div1 { 
    width: 100%;
    height: 30px;
    background: #ccc;
}

.div2 { 
    width: 100%;
    height: 30px;
    background: red;
    position: absolute;
    left: 0;
} 
```

​</p>

# jquery - JQgrid 隐藏/显示内联删除按钮

> ID：12530543
> 
> 赞同：1
> 
> 时间：2012-09-21T12:22:17.697
> 
> 标签：jquery, jqgrid

我需要在某些行中显示/隐藏内联删除按钮，但我看到隐藏内联删除按钮的错误。

我像这样隐藏按钮：

```
gridComplete: function(){    var ids = $("#tableLesVersions").jqGrid('getDataIDs');    
     for(var i=0;i < ids.length;i++){     
        var cl = ids[i];    
        jQuery('tr#'+ids[i]+' td:last div:first div.ui-inline-    del',jQuery(this)).hide();     
     }     
} 
```

但是当我编辑一行然后单击内联保存或内联取消按钮时，内联删除按钮重新出现。

如果我设置

`formatter:'actions', formatoptions:{keys:true,delbutton: false}`

即使我设置它也永远不会显示 inline-del 按钮：

```
gridComplete: function(){    
var ids = jQuery("#tableLesFlux").jqGrid('getDataIDs');   
  for(var i=0;i < ids.length;i++){   
       var cl = ids[i];   
       var disponibiliteVal = jQuery('#tableLesFlux').getCell(cl, 'disponibilite');   
       if (disponibiliteVal.indexOf("production") < 0){   
          //Show delete button   
          jQuery('tr#'+ids[i]+' td:last div:first div.ui-inline-del',jQuery(this)).show();   
        }   
     }   
 } 
```

有人有想法吗？

谢谢。

# java - 在继承类中重载 Javadoc

> ID：12530546
> 
> 赞同：1
> 
> 时间：2012-09-21T12:22:29.453
> 
> 标签：java, javadoc

我在 Java 中重新创建了以下功能层次结构：

```
 Diagram
     |
     |--Model
          |
          |--Entity 
```

所有这些对象都共享一些共同的属性（id、name）以及对层次结构中父对象的引用。所以我实现了一个抽象类：

```
abstract class DBObject{
   private final int id;
   private final String name;
   private final DBObject parent;

   //constructors, getters, setters here

   /**
    * @return reference to parent object in hierarchy.
    */
    public final getParent(){
       return parent;
    }
} 
```

到目前为止没有问题。问题是，Diagram 没有父级，并且总是返回 null。这是通过实施来确保的。但我想在 Diagram Javadoc 中反映“父级始终为空”。是否可以在不覆盖方法的情况下重载 Javadoc？解决方案是在抽象类中将其声明为注释，但这不是我正在寻找的答案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:28:10.197

这个怎么样？

```
/**
* @return reference to parent object in hierarchy. may be null.
*/
@Nullable
public final DBObject getParent(){
   return parent;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:31:13.740

要替换 Javadoc，您必须覆盖子类中的方法。

例如

Iterator.iterator() 在
Collection.iterator() 中被覆盖，它被
Set.iterator() 覆盖，它被
NavigableSet.iterator() 覆盖，只是为了给每个不同的 Javadoc。

# php - 在可能有会话的其他页面上显示表单变量？

> ID：12530549
> 
> 赞同：0
> 
> 时间：2012-09-21T12:22:40.070
> 
> 标签：php, forms, validation, post

我的代码的目的是： - 验证表单并检查空字段 - 向管理员发送电子邮件 - 将数据添加到 Mysql 数据库 - 在 result.php 上显示数据

目前我在 result.php 上显示我的数据时遇到问题

测验.php

```
 <?php

require_once("php/db.php");                 /* Database Class */
require_once('php/utils/is_email.php');     /* Email Validation Script */

$contact = new Contact();

/* Class Contact */
class Contact
{
        private $db;                        /* the database obj */

        //we have to init $errors array, as otherwise form will produce errors on missing array entry
        private $errors = array(            /* holds error messages */
                'aanhef' => '',
                'contactpersoon' => '',
                'bedrijfsnaam' => '',
                'email' => '',
                'telefoon' => '',
                'vraag1_antwoorden' => '',
                'vraag2_antwoorden' => ''
        );

        private $has_errors;                /* number of errors in submitted form */

        public function __construct()
        {
                $this->db = new DB();
                if (!empty($_POST['newcontact'])) {
                        $this->processNewMessage();
                }
        }
        public function processNewMessage()
        {
                $aanhef             = $_POST['aanhef'];
                $contactpersoon     = $_POST['contactpersoon'];
                $bedrijfsnaam       = $_POST['bedrijfsnaam'];
                $telefoon           = $_POST['telefoon'];
                $email              = $_POST['email'];
                $vraag1_antwoorden  = $_POST['vraag1_antwoorden'];
                $vraag2_antwoorden  = $_POST['vraag2_antwoorden'];

                /* Server Side Data Validation */
                if (empty($aanhef)) {
                        $this->setError('aanhef', 'Vul uw aanhef in');
                }

                if (empty($contactpersoon)) {
                        $this->setError('contactpersoon', 'Vul uw contactpersoon in');
                }

                if (empty($bedrijfsnaam)) {
                        $this->setError('bedrijfsnaam', 'Vul uw bedrijfsnaam in');
                }

                if (empty($telefoon)) {
                        $this->setError('telefoon', 'Vul uw telefoon in');
                }

                if (empty($vraag1_antwoorden)) {
                        $this->setError('vraag1_antwoorden', 'Selecteer een antwoord a.u.b.');
                }

                if (empty($vraag2_antwoorden)) {
                        $this->setError('vraag2_antwoorden', 'Selecteer een antwoord a.u.b.');
                }

                if (empty($email)) {
                        $this->setError('email', 'Vul uw e-mail in');
                }

                /* No errors, insert in db
                else*/

                if(!$this->has_errors) {
                        if(($ret = $this->db->dbNewMessage($aanhef, $contactpersoon, $bedrijfsnaam, $email, $telefoon, $vraag1_antwoorden, $vraag2_antwoorden)) > '') {
                                //$json = array('result'         => 1);
                                if (SEND_EMAIL) {
                                        $this->sendEmail($aanhef,$contactpersoon,$bedrijfsnaam,$email,$telefoon,$vraag1_antwoorden,$vraag2_antwoorden);
                                        //This is for relocating to successful result page
                                        header('Location: result.php');
                                        exit;
                                } else {
                                        //This will need special treatment. You have to prepare an errorpage
                                        //for database-related issues.

                                        header("Location: database-error.html");
                                        exit;
                                }
                        }
                }
        }

        public function sendEmail($aanhef,$contactpersoon,$bedrijfsnaam,$email,$telefoon,$vraag1_antwoorden,$vraag2_antwoorden)
        {
        /* Just format the email text the way you want ... */
                $message_body   = "<div style=\"font-size:12px; font-weight:normal;\">Hallo,<br><br>"
                ."Het volgende bedrijf heeft zich zojuist aangemeld voor de Veiligheids Quiz:</div><br>"
                ."<table cellpadding=\"1\" cellspacing=\"1\" width=\"550px\"><tr><td style=\"font-size:12px; color:#000000\">Bedrijfsnaam:</td><td style=\"font-size:12px; color:#000000\">".$bedrijfsnaam."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Aanhef:</td><td style=\"font-size:12px; color:#000000\">".$aanhef."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Contactpersoon:</td><td style=\"font-size:12px; color:#000000\">".$contactpersoon."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Telefoonnummer:</td><td style=\"font-size:12px; color:#000000\">".$telefoon."</td></tr><tr><td style=\"font-size:12px; color:#000000\">E-mail:</td><td style=\"font-size:12px; color:#000000\">".$email."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Antwoord vraag 1:</td><td style=\"font-size:12px; color:#000000\">".$vraag1_antwoorden."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Antwoord vraag 2:</td><td style=\"font-size:12px; color:#000000\">".$vraag2_antwoorden."</td></tr></table><br>";

                // Geef GELDIGE adressen op
                // Een korte benaming voor jouw website

                $website_naam = 'Aanmelding Quiz';
                // Jouw eigen geldige emailadres
                $eigen_emailadres = 'MY MAIL';
                // Een geldig emailadres voor errors
                $error_emailadres = 'MY MAIL';
                // De naam van de verzender
                $naam_verzender = ''.$bedrijfsnaam.'';
                // Het geldige emailadres van de afzender
                $email_verzender = ''.$email.'';
                // Een geldig emailadres of helemaal leeg laten
                $bcc_emailadres = '';
                // HTML mail? True/False
                $html = true;

                // De headers samenstellen
                $headers     = 'From: ' . $website_naam . ' <' . $eigen_emailadres . '>' . PHP_EOL;
                $headers    .= 'Reply-To: ' . $naam_verzender . ' <' . $email_verzender . '>' . PHP_EOL;
                $headers    .= 'Return-Path: Mail-Error <' . $error_emailadres . '>' . PHP_EOL;
                $headers    .= ($bcc_emailadres != '') ? 'Bcc: ' . $bcc_emailadres . PHP_EOL : '';
                $headers    .= 'X-Mailer: PHP/' . phpversion() . PHP_EOL;
                $headers    .= 'X-Priority: Normal' . PHP_EOL;
                $headers    .= ($html) ? 'MIME-Version: 1.0' . PHP_EOL : '';
                $headers    .= ($html) ? 'Content-type: text/html; charset=iso-8859-1' . PHP_EOL : '';

                mail(EMAIL_TO,MESSAGE_SUBJECT,$message_body,$headers);
        }

        public function setError($field, $errmsg)
        {
                $this->has_errors     = true;
                $this->errors[$field] = $errmsg;
        }

        public function errors($field)
        {
                if (array_key_exists($field,$this->errors)){
                        return $this->errors[$field];
                }

                return '';
        }
};
?>

<table width="675px" cellpadding="0" cellspacing="0">
<form id="contact_form" method="post" action="">
<label class="label_aanhef" for="aanhef_1"><input name="aanhef" id="aanhef_1" type="radio" value="Dhr." /> Dhr.</label><label class="label_aanhef" for="aanhef_2"><input name="aanhef" id="aanhef_2" type="radio"  value="Mevr." /> Mevr.</label>
<span class="error"><?php echo $contact->errors('aanhef'); ?></span>

<input id="contactpersoon" name="contactpersoon" maxlength="120" type="text" onFocus="window.scrollTo(0, 0);"/><span class="error"><?php echo $contact->errors('contactpersoon'); ?></span>
<input id="bedrijfsnaam" name="bedrijfsnaam" maxlength="120" type="text" onFocus="window.scrollTo(0, 0);"/><span class="error"><?php echo $contact->errors('bedrijfsnaam'); ?></span>
<input id="email" name="email" maxlength="120" type="text" onFocus="window.scrollTo(0, 0);"/><span class="error"><?php echo $contact->errors('email'); ?></span>
<input id="telefoon" name="telefoon" maxlength="120" type="text" onFocus="window.scrollTo(0, 0);"/><span class="error"><?php echo $contact->errors('telefoon'); ?></span>

<label class="label_radio" for="vraag1_A"><input name="vraag1_antwoorden" id="vraag1_A" value="A. Dat is helaas fout, het goede antwoord is: C) < 1 Ohm" type="radio" />A) Geen eis</label>
<label class="label_radio" for="vraag1_B"><input name="vraag1_antwoorden" id="vraag1_B" value="B. Dat is helaas fout, het goede antwoord is: C) < 1 Ohm" type="radio"  />B) < 0,1 Ohm</label>
<label class="label_radio" for="vraag1_C"><input name="vraag1_antwoorden" id="vraag1_C" value="C. Gefeliciteerd dat is het goede antwoord." type="radio"  />C) < 1 Ohm</label>
<label class="label_radio" for="vraag1_D"><input name="vraag1_antwoorden" id="vraag1_D" value="D. Dat is helaas fout, het goede antwoord is: C) < 1 Ohm" type="radio" />D) < 10 Ohm</label>
<span id="vraag1_antwoorden" class="foutmelding_quiz">
<?php echo $contact->errors('vraag1_antwoorden'); ?>
</span>

<label class="label_radio" for="vraag2_A"><input name="vraag2_antwoorden" id="vraag2_A" value="A. Gefeliciteerd dat is het goede antwoord." type="radio" />A) Geen eis</label>
<label class="label_radio" for="vraag2_B"><input name="vraag2_antwoorden" id="vraag2_B" value="B. Dat is helaas fout, het goede antwoord is: A)  Geen eis" type="radio" />B) < 0,1 Ohm</label>
<label class="label_radio" for="vraag2_C"><input name="vraag2_antwoorden" id="vraag2_C" value="C. Dat is helaas fout, het goede antwoord is: A)  Geen eis" type="radio" />C) < 1 Ohm</label>
<label class="label_radio" for="vraag2_D"><input name="vraag2_antwoorden" id="vraag2_D" value="D. Dat is helaas fout, het goede antwoord is: A)  Geen eis" type="radio" />D) < 10 Ohm</label>
<span id="vraag2_antwoorden" class="foutmelding_quiz">
<?php echo $contact->errors('vraag2_antwoorden'); ?>
</span>
<input class="button submit" type="submit" value="" /><input id="newcontact" name="newcontact" type="hidden" value="1"></input>
</form> 
```

结果.php

```
Aanhef: <?php echo $_POST["aanhef"]; ?><br />
Contactpersoon: <?php echo $_POST["contactpersoon"]; ?><br />
Bedrijfsnaam: <?php echo $_POST["bedrijfsnaam"]; ?><br />
Telefoon: <?php echo $_POST["telefoon"]; ?><br />
E-mail: <?php echo $_POST["email"]; ?><br /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:25:53.760

```
if(!empty($_POST['newcontact'])){
    $contact = new Contact();
 } else{
    //header('Location: result.php');
 } 
```

将其更改为

```
$contact = new Contact(); 
```

我的意思是说：删除条件 if() ：

当页面未发布时，它的 b'coz 不会创建联系人类的对象。

由于这个错误来了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:28:38.087

你确定 $contacts 真的被填满了吗？我在页面的开头看到了这个声明：

```
if(!empty($_POST['newcontact'])){
        $contact = new Contact();
} else{
        //header('Location: result.php');
} 
```

但没有进一步检查是否实际设置了联系人。如果 POST 为空，则联系人将为空。检查contacts是否为null，如果是，不要在其上调用方法或变量。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:30:13.500

你应该更换：

```
if(!empty($_POST['newcontact'])){
        $contact = new Contact();
} else{
        //header('Location: result.php');
} 
```

经过 ：

```
$contact = new Contact(); 
```

因为如果`$_POST['newcontact']`是空的，你的`$contact`对象没有设置，并且`if(!empty($_POST['newcontact']))`已经在你`__construct()`的`Contact`

将类似这样的内容添加到联系人以替换您的重定向：

```
private $display_form = true;

public function getDisplayForm() {
    return $this->display_form;
} 
```

并替换：

```
header('Location: result.php');
exit; 
```

经过 ：

```
$this->display_form = false; 
```

在下面，像这样包装你的 HTML：

```
<?php if ($contact->getDisplayForm()) { ?>

<!-- Your Form -->

<table width="675px" cellpadding="0" cellspacing="0">
<form id="contact_form" method="post" action="">
...
</form>
</table>

<?php } else { ?>

<!-- Your Results -->

Aanhef: <?php echo $_POST["aanhef"]; ?><br />
Contactpersoon: <?php echo $_POST["contactpersoon"]; ?><br />
Bedrijfsnaam: <?php echo $_POST["bedrijfsnaam"]; ?><br />
Telefoon: <?php echo $_POST["telefoon"]; ?><br />
E-mail: <?php echo $_POST["email"]; ?><br /> 

<?php } ?> 
```

# bash - 如何将 .c 文件复制到编号列表

> ID：12530550
> 
> 赞同：0
> 
> 时间：2012-09-21T12:22:42.767
> 
> 标签：bash, unix

我只是想将我的 .c 文件复制到行号列表文件中。基本上从我的 .c 文件生成一个 .prn 文件。我很难找到正确的 bash 命令来执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T12:28:21.203

你的意思是`nl`？

```
nl -ba filename.c 
```

对所有行进行编号的`-ba`方法，而不仅仅是非空行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T12:28:14.460

```
awk '{print FNR ":" $0}' file1 file2 ... 
```

是一种方式。

FNR 是 FileNumberRecord（每个文件的当前行号）。

您可以根据需要更改“：”。

`$0`意思是“整个输入线”

或者你可以做

```
 cat -n file1 file2 .... 
```

IHTH

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T12:36:09.643

在我的 linux 系统上，我偶尔会使用`pr -tn`为列表添加行号前缀。-t 选项抑制页眉和页脚；-n 表示为行号添加前缀。-n 允许可选的格式和数字说明符；参见手册页。无论如何，要将文件 xyz.c 打印到带有行号的 xyz.prn，请使用：

```
pr -tn xyz.c > xyz.prn 
```

请注意，这不像`cat -n xyz.c > xyz.prn`（使用`cat -n`前一个答案中建议的那样）那么紧凑和方便；但`pr`有许多其他选项，当我想对行进行编号并将它们放入多个列或并排打印多个文件时，我最常使用它。例如，对于 2 列编号的列表使用：

```
pr -2 -tn xyz.c > xyz.prn 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T13:00:09.560

我认为 shellter 的想法是正确的。但是，如果您需要将输出写入带有`prn`扩展名的文件，这是一种方法：

```
awk '{ sub(/\.c$/, "", FILENAME); print FNR ":" $0 > FILENAME ".prn" }' file1.c file2.c ... 
```

要对当前工作目录中的所有文件执行此操作：

```
for i in *.c; do awk '{ sub(/\.c$/, "", FILENAME); print FNR ":" $0 > FILENAME ".prn" }' "$i"; done 
```

# google-maps - 防止谷歌地图自定义地图预下载所有信息窗口内容

> ID：12530555
> 
> 赞同：0
> 
> 时间：2012-09-21T12:23:00.903
> 
> 标签：google-maps, google-maps-markers, bandwidth

我有一个包含许多标记的自定义谷歌地图，每个标记都在其信息窗口中包含一个图像。当我将地图嵌入网站时，在查看地图时，页面似乎正在下载这些图像中的每一个，这导致了不必要的巨大页面大小（页面的每个视图大约 50MB）。由于这些图像是从我们自己的服务器加载的，这可能会对服务器/带宽使用造成巨大且不必要的压力。

有没有办法告诉谷歌地图不要预先下载这些图像，而是只在点击特定标记时才通过 AJAX 加载标记的内容？由于这是非自定义地图的默认行为，因此感觉必须有一种简单的方法来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:43:18.190

我假设您的意思是*信息窗口*包含图像？您可以使用该`InfoWindow.setContent()`函数将内容动态添加到信息窗口。与您已经拥有的用于打开信息窗口的事件侦听器一起执行此操作，以执行 ajax 请求以获取该内容。

# java - 使用 [href] 转义 html 锚标记

> ID：12530571
> 
> 赞同：1
> 
> 时间：2012-09-21T12:23:48.540
> 
> 标签：java, html, escaping

如果 URL 不同，如何转义每个 html 动态锚标记？

```
<a href="*_url">*_url</a> 
```

我需要将上述代码保存在数据库中

```
&lt;a href="*_url"&gt;*_url&lt;/a&gt; 
```

我已经逃脱了其他标签，如`<code>`, `<html>`, `<strong>`... 使用

```
`StringUtils.replaceEach(post, search, replacement);` 
```

因为它们是静态标签。但是锚标记`"href"`作为动态内容保存。

我怎样才能通过一种`Java`方法立即完成这项工作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:35:31.257

`StringEscapeUtils.escapeHtml()`从[Apache Commons Lang](http://commons.apache.org/lang/api-2.1/org/apache/commons/lang/StringEscapeUtils.html#escapeHtml%28java.lang.String%29)使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:06:00.997

使用 XML/HTML 解析器并在两个标签中获取文本很容易。

我在[这里找到了](http://www.jsoup.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T18:31:25.323

David Grant's solution seems correct to me. In the meantime `escapeHtml` has gotten obsolete. You can choose between `escapeHtml3` and `escapeHtml4`.

1) Add to Your Gradle Dependency List:

```
compile 'org.apache.commons:commons-lang3:3.3.2' 
```

For Maven it is:

```
<dependency>
<groupId>org.apache.commons</groupId>
<artifactId>commons-lang3</artifactId>
<version>3.3.2</version>
</dependency> 
```

2)

```
import org.apache.commons.lang3.StringEscapeUtils; 
```

3) Then invoke...

```
StringEscapeUtils.escapeHtml4(...) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T12:31:08.330

您可以将[java.net.URLEncoder.encode](http://docs.oracle.com/javase/6/docs/api/java/net/URLEncoder.html#encode%28java.lang.String,%20java.lang.String%29)与*StringUtils.replaceEach*结合使用。您可能想要解析锚标记并使用 URLEncoder 对其进行编码。

# jenkins - Robotium 测试不在 Jenkins 上运行，而是在本地运行

> ID：12530579
> 
> 赞同：5
> 
> 时间：2012-09-21T12:24:12.940
> 
> 标签：jenkins, robotium

我尝试将我的 Robotium 测试集成到我们的 Jenkins 服务器上。我实现了一个基于我们的应用项目的 android 测试项目。当我在 Eclipse 之外的 Windows 上的本地机器上运行测试时，以及通过调用从 shell 调用时，一切都像魅力一样

```
'adb shell am instrument -w <our-package>/android.test.InstrumentationTestRunner' 
```

到目前为止，一切都很好，但是在我在 Jenkins 中设置了构建作业之后，让项目通过 maven clean install sign 等构建。我的任何测试都不会进行。我还尝试`'adb shell am instrument -w <our-package>/android.test.InstrumentationTestRunner'`在构建步骤之后调用 shell 命令，但也没有结果。构建结束时只有 2 个测试显示在下面的日志中

```
[workspace] $ /bin/sh -xe /tmp/hudson3571502822112946903.sh
+ /home/jenkins/tools/android-sdk-linux/platform-tools/adb shell pm list instrumentation
instrumentation:com.android.emulator.connectivity.test/android.test.InstrumentationTestRunner (target=com.android.emulator.connectivity.test)
instrumentation:com.android.emulator.gps.test/android.test.InstrumentationTestRunner (target=com.android.emulator.gps.test)
instrumentation:com.zeppelin.zemos.test.addispo/android.test.InstrumentationTestRunner (target=com.zeppelin.zemos.addispo)
+ /home/jenkins/tools/android-sdk-linux/platform-tools/adb shell am instrument -w com.zeppelin.zemos.test.addispo/android.test.InstrumentationTestRunner

android.test.AndroidTestCase:.
android.test.LoaderTestCase:.
Test results for InstrumentationTestRunner=..
Time: 0.031

OK (2 tests) 
```

只显示了 2 个测试 AndroidTestCase 和 LoaderTestCase，似乎我所有的其他测试用例（我已经实现了 11 个）都没有被 Jenkins 处理。

我花了很长时间在谷歌上搜索，但没有找到解决方案。这可能是蚂蚁问题吗？我在 Jenkins 服务器上有 1.8 版本和 1.6 版本。或者还有其他我看不到的问题.....

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T11:27:01.597

您可以尝试使用“adb uninstall your_package”从设备/模拟器卸载包然后，再次进行干净的调试安装，然后运行测试。

# php - 使用 PHP 添加水印

> ID：12530581
> 
> 赞同：0
> 
> 时间：2012-09-21T12:24:20.737
> 
> 标签：php, image, gd, php-gd

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:32:18.160

你有错误的设置。您的 HTML 应如下所示：

```
<img src="image.php?src=images/ornek.jpeg" /> 
```

`image.php`应该是这样的：

```
$stamp = imagecreatefromjpeg('images/wm.png');
$im = imagecreatefromjpeg($_GET['src']); 
$marge_right = 10;
$marge_bottom = 10;
$sx = imagesx($stamp);
$sy = imagesy($stamp);

// Copy the stamp image onto our photo using the margin offsets and the photo 
// width to calculate positioning of the stamp. 
imagecopy($im, $stamp, imagesx($im) - $sx - $marge_right, imagesy($im) - $sy - $marge_bottom, 0, 0, imagesx($stamp), imagesy($stamp));

// Output and free memory
header('Content-type: image/png');
imagepng($im);
imagedestroy($im); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T12:31:23.880

您不能将二进制数据放入`src`图像标签的属性中。

该`src`属性通常需要一个图像的 URL。

您可以使用 base64 编码来做到这一点：

```
$file = base64_encode(img_watermark('images/ornek.jpeg'));
echo "<img src='data:image/jpeg;base64,".$file."' alt='watermarked image'>"; 
```

并删除`header`函数中的行，除非您的 PHP 文件应该发送图像数据而不是 HTML。最好不要把这些东西混在一起:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:27:08.623

将此设置为您的标题：

```
header("Content-type:image/jpeg"); 
```

代替：

```
header("Content-type:image/png"); 
```

# asp.net - 在表格的行和列之间绘制边框

> ID：12530584
> 
> 赞同：2
> 
> 时间：2012-09-21T12:24:27.533
> 
> 标签：asp.net, html-table, border, rows

如何在 asp.net(C#) 表的行和列之间绘制边框？

我有以下内容：

```
<asp:Table ID="Table1" runat="server" BackColor="White" BorderColor="Black" 
        BorderWidth="1px" ForeColor="Black">
    </asp:Table> 
```

在代码隐藏文件中，我添加了行：

```
for (int i = 0; i < games.Count(); i++)
            {
                TableRow tr = new TableRow();

                for (int j = 0; j < 9; j++)
                {
                    TableCell tc = new TableCell();
                    tc.Text = games[i].getData(j);
                    tr.Cells.Add(tc);
                }
                tr.BorderWidth = 1;
                tr.BorderColor = Color.Black;
                Table1.Rows.Add(tr);
            } 
```

但是，我看不到表格的行和列之间的任何边界。表格是：

![在此处输入图像描述](../Images/8487a11e5d30c14a7bd7366a90eb1790.png)

那么，如何在asp.net表格的行和列之间绘制边框呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T12:35:35.703

您缺少两个属性

```
GridLines="Both" BorderStyle="Solid" 
```

应该

```
<asp:Table ID="Table1" runat="server" BackColor="White" BorderColor="Black" 
    BorderWidth="1" ForeColor="Black" GridLines="Both" BorderStyle="Solid"> 
```

CSS样式虽然更好

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T12:30:34.777

我只会使用 CSS 来绘制边框：

```
#table1 {
  border: solid thin black;
}

#table1 td {
  border: solid thin black;
} 
```

此外，通过代码创建表格很糟糕！您应该考虑使用中继器控件。

# android - 使用 Android HttpClient 重用 SSL 连接

> ID：12530589
> 
> 赞同：6
> 
> 时间：2012-09-21T12:24:32.510
> 
> 标签：android, ssl, httpclient

我正在我自己实现的 java web 代理（将请求转发到实际的 web 服务）和一个 android 应用程序之间开发一个安全的 web 服务。

使用标准（不安全）http 连接这样做非常有效。现在我想在代理和安卓客户端之间使用安全（SSL）连接。

只要我为每个请求实例化一个新的 HttpClient ，这就会起作用，除了浪费资源非常慢，因为我正在为每个请求进行双向握手。

因此，我尝试为每个请求重用 HttpClient，这会导致以下异常中的安全连接

> java.lang.IllegalStateException：连接已经打开。在 org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:150) 在 org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119) 在 org.apache.http.impl .client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360) 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555) 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient .java:487) 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)

当我将代理和客户端更改为无 SSL 通信时，它可以正常工作。有人知道我做错了什么吗？非常感谢你的帮助！

顺便说一句，除了使用带有加载证书的 SSLServerSocket 而不是使用 ServerSocket 之外，服务器代码完全相似。

客户端参数设置

```
// Set basic data
    HttpParams params = new BasicHttpParams();
    HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
    HttpProtocolParams.setContentCharset(params, "UTF-8");
    HttpProtocolParams.setUseExpectContinue(params, true);
    HttpProtocolParams.setUserAgent(params, "Android app/1.0.0");

    // Make pool
    ConnPerRoute connPerRoute = new ConnPerRouteBean(12);
    ConnManagerParams.setMaxConnectionsPerRoute(params, connPerRoute);
    ConnManagerParams.setMaxTotalConnections(params, 20);

    // Set timeout
    HttpConnectionParams.setStaleCheckingEnabled(params, false);
    HttpConnectionParams.setConnectionTimeout(params, connectionTimeoutMillis);
    HttpConnectionParams.setSoTimeout(params, socketTimeoutMillis);
    HttpConnectionParams.setSocketBufferSize(params, 8192);

    // Some client params
    HttpClientParams.setRedirecting(params, false); 
```

Http客户端创建

```
// load truststore certificate
            InputStream clientTruststoreIs = context.getResources().openRawResource(R.raw.server);
            KeyStore trustStore = KeyStore.getInstance("BKS");
            trustStore.load(clientTruststoreIs, "server".toCharArray());

            // initialize trust manager factory with the read truststore
            TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
            trustManagerFactory.init(trustStore);

            // setup client certificate

            // load client certificate
            InputStream keyStoreStream = context.getResources().openRawResource(R.raw.client);
            KeyStore keyStore = KeyStore.getInstance("BKS");
            keyStore.load(keyStoreStream, "client".toCharArray());

            // initialize key manager factory with the read client
            // certificate
            KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
            keyManagerFactory.init(keyStore, "client".toCharArray());

            // initialize SSLSocketFactory to use the certificates
            SSLSocketFactory socketFactory = new SSLSocketFactory(SSLSocketFactory.TLS, keyStore, "client", trustStore, null, null);

            // Register http/s shemas!
            SchemeRegistry schReg = new SchemeRegistry();
            schReg.register(new Scheme("https", socketFactory, port));
            ClientConnectionManager conMgr = new ThreadSafeClientConnManager(params, schReg);

            httpClient = new DefaultHttpClient(conMgr, params); 
```

客户端请求执行

```
HttpResponse response = httpClient.execute(request);
        HttpEntity entity = response.getEntity();
        in = entity.getContent();
        String result = convertStreamToString(in);
        in.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T07:38:06.630

我对 Android 和 HttpClient 也有同样的问题——它似乎只在使用客户端证书时才表现出来，就像你一样。删除客户端身份验证，它工作正常，尚未找到解决方法。

编辑：

启用陈旧连接检查。

> HttpConnectionParams.setStaleCheckingEnabled(params, true);

为我修好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:54:15.020

你在使用线程安全的连接管理器吗？如果不是，那么如果您在多个线程中使用相同的 HttpClient 可能就是问题所在。

本文有详细信息：[http ://candrews.integralblue.com/2011/09/best-way-to-use-httpclient-in-android/](http://candrews.integralblue.com/2011/09/best-way-to-use-httpclient-in-android/)

# c++ - 在 C++ 中使用 Boost 为命名管道序列化对象

> ID：12530591
> 
> 赞同：1
> 
> 时间：2012-09-21T12:24:41.440
> 
> 标签：c++, serialization, boost, named-pipes

我正在尝试使用用于序列化的 Boost 库从命令行应用程序序列化一些 EEG 数据，并通过命名管道将该序列化数据发送到在 Visual Studio C++ 2010 中构建的用户界面表单。

从 boost 库教程中，我能够序列化我的数据结构，并且， [http://www.boost.org/doc/libs/1_48_0/libs/serialization/doc/tutorial.html#simplecase](http://www.boost.org/doc/libs/1_48_0/libs/serialization/doc/tutorial.html#simplecase)

从这篇关于 Win32 命名管道的教程中，我可以构建管道并在应用程序之间发送文本。 [http://avid-insight.co.uk/joomla/component/k2/item/589-introduction-to-win32-named-pipes-cpp?tmpl=component&print=1](http://avid-insight.co.uk/joomla/component/k2/item/589-introduction-to-win32-named-pipes-cpp?tmpl=component&print=1)

boost 库教程为文本文件序列化：

```
std::ofstream ofs("filename");

// create class instance
const gps_position g(35, 59, 24.567f);

// save data to archive
{
    boost::archive::text_oarchive oa(ofs);
    // write class instance to archive
    oa << g;
    // archive and stream closed when destructors are called
} 
```

我想知道我需要序列化什么才能通过命名管道发送我的数据结构？IOstream c++ 库似乎总是需要一个文件来传输/传输？[http://www.cplusplus.com/reference/iostream/](http://www.cplusplus.com/reference/iostream/)

我不想序列化到文件并且我不确定要序列化到什么？如果您能告诉我我需要序列化到什么，我将非常感激，如果您能告诉我是否需要除 boost::archive:: **text_oarchive**之外的其他 boost 命令，因为我一直无法找到替代。

感谢您的时间！真的很感激！

（之前有人问过这个问题：[Serialize and send a data structure using Boost?](https://stackoverflow.com/questions/652193/serialize-and-send-a-data-structure-using-boost)，但有人告诉他不要使用 boost，因为他的简单数据结构 boost 会有太多开销，所以它确实仍然是浮动的。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:18:12.873

感谢ForEveR，很简单，不知道怎么错过了！:) 与上面发布的两个教程相关的解决方案：

```
 const EEG_Info g(35, 59, 24.567f);
std::stringstream MyStringStream ;
boost::archive::text_oarchive oa(MyStringStream);
    // write class instance to archive
    oa << g;
// This call blocks until a client process reads all the data

string strData;
strData = MyStringStream.str(); 

DWORD numBytesWritten = 0;
result = WriteFile(
    pipe, // handle to our outbound pipe
    strData.c_str(), // data to send
    strData.length(), // length of data to send (bytes)
    &numBytesWritten, // will store actual amount of data sent
    NULL // not using overlapped IO
); 
```

# c++ - 为什么 C++ 编译器不将模板函数参数转换为匹配预期结果类型？

> ID：12530592
> 
> 赞同：0
> 
> 时间：2012-09-21T12:24:41.627
> 
> 标签：c++, templates

> **可能重复：**
> [基于函数返回类型的模板推导？](https://stackoverflow.com/questions/2612961/template-deduction-for-function-based-on-its-return-type)

我试图弄清楚 C++ 模板是如何工作的。例如，我想编写一个简单的数据结构，`triple`它的行为类似于 STL ，`pair`但包含三个项目。当然，我想使用模板来实现它。从我的角度来看，我正面临着一种奇怪的行为。

首先，我有一个工作示例。这是有效的 C++ 代码：

```
template<typename T1, typename T2>
T1 getSum(T1 a1, T2 a2) {
    return a1 + a2;
}

int main(int argc, int *argv[]) {
    long l1 = 1, l2 = 0, l3 = 0, l4 =0;
    short s1 = 2, s2 = 0, s3 = 0, s4 = 0;
    l2 = getSum(l1, s1);
    l3 = getSum(s1, l1);
    l4 = getSum(1, 2);
    s2 = getSum(l1, s1);
    s3 = getSum(s1, l1);
    s4 = getSum(1, 2);
    cout << l2 << " " << l3 << " " << l4 << endl;
    cout << s2 << " " << s3 << " " << s4 << endl;
    return 0;
} 
```

这个程序的结果是两行包含`3 3 3`每一行。由于我`getSum`使用各种参数组合调用函数：`(long, short)`and`(short, long)`并且每次`(integer literal, integer literal)`都将返回值分配给`long`and`short`变量，因此我假设编译器知道如何通过返回值进行适当的转换或*猜测类型*（在整数文字的情况下）每一次。

在这里，我们回到简单的`triple`实现。我以几乎相同的方式做所有事情（在我看来），但我得到一个转换错误。这就是我的意思。我的代码如下所示：

```
template <typename T1, typename T2, typename T3>
struct triple {
    T1 first;
    T2 second;
    T3 third;
};

template <typename T1, typename T2, typename T3>
triple<T1, T2, T3> mt(T1 f, T2 s, T3 t) {
    triple<T1, T2, T3> tr;
    tr.first = f;
    tr.second = s;
    tr.third = t;
    return tr;
};

int main(int argc, char* argv[]) {
    triple<char, char, unsigned short> t = mt(0, 0, 65000);
    cout << t.first << " " << t.second << " " << t.third << endl;
    return 0;
} 
```

但是，当我尝试编译它时，出现以下错误：

```
22: error: conversion from 'triple<int, int, int>' to non-scalar type
'triple<char, char, short unsigned int>' requested 
```

（第 22 行是`main`函数的第一行）。

毫不奇怪，上述两个`triple`s 之间的转换不是编译器的工作。但令我惊讶的是，编译器*无法确定*由于我想得到函数`triple<char, char, short unsigned int>`的结果`mt`，因此模板参数应确定为`T1 == char`, `T2 == char`, `T3 == unsigned short`。

而且由于现在事情是这样工作的，我对`make_pair`函数的工作方式感到困惑。它的[代码](http://www.cplusplus.com/reference/std/utility/make_pair/)看起来很像我的（再次，在我看来）。

所以，我的问题是：请澄清我的代码和工作代码之间的本质区别:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T12:37:26.803

通常，C++ 不会根据该类型的使用方式来推断返回类型。相反，它根据您告诉它的返回类型推断返回类型。

```
template<typename T1, typename T2>
T1 getSum(T1 a1, T2 a2) 
```

在这里，代码表示返回类型与第一个参数的类型相同`T1`。算术类型的问题是它们之间存在隐式转换，因此代码中的所有赋值语句都可以工作，要么是因为返回类型与被赋值的类型相同，要么是因为返回类型可以转换为分配给的类型。

```
template <typename T1, typename T2, typename T3>
triple<T1, T2, T3> mt(T1 f, T2 s, T3 t) 
```

在这里，代码告诉编译器返回类型是 a `triple`，它的三个元素与函数的三个参数具有相同的类型。该调用`mt(0, 0, 65000)`具有三个 int 类型的参数，因此返回类型为`triple<int, int, int>`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T12:29:13.983

您的问题是您的函数`mt`已经具有固定的返回类型：（`Triple<int, int, int>`由参数确定，`int`除非另有说明，否则始终认为整数常量）。一旦以这种方式创建，它就不能被分配，因为它是一个不同的类型，并且没有定义类型转换或构造函数来允许你尝试做的事情。

目前，您的结构中根本没有明确定义构造函数`triple`- 这意味着只有默认构造函数和复制构造函数（仅适用于完全相同的类型）！

但是有一个解决办法：看一下[pair的定义](http://www.cplusplus.com/reference/std/utility/pair/)：看拷贝构造函数（又是模板化*的*，除了基类上的模板参数）。要使其适用于您的情况，请添加您自己的模板化复制构造函数：

```
template <typename T1, typename T2, typename T3>
struct triple {
    template <typename U1, typename U2, typename U3>    
    triple(U1 f, U2 s, U3 t):
        first(f),
        second(s),
        third(t) {}
    T1 first;
    T2 second;
    T3 third;
}; 
```

除了使用返回三元组的函数，您还可以简单地使用另一个带有三个参数的构造函数：

```
template <typename T1, typename T2, typename T3>
struct triple {
    triple(T1 f, T2 s, T3 t):
        first(f),
        second(s),
        third(t) {}
    T1 first;
    T2 second;
    T3 third;
}; 
```

然后主要你可以写：

```
triple<char, char, unsigned short> t(0, 0, 65000); 
```

写的也少！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T12:44:36.120

为了澄清编译器错误，它没有发生的原因`std::pair`是`make_pair`它`std::pair`有一个接受`std::pair`任何类型的模板构造函数。

Changing to the following code will mirror `std::pair` much more and resolve the compiler error:

```
template <typename T1, typename T2, typename T3>
struct triple {
    T1 first;
    T2 second;
    T3 third;

    triple() {}

    template <typename U1, typename U2, typename U3>
    triple(const triple<U1, U2, U3>& rhs)
      : first(rhs.first),
        second(rhs.second),
        third(rhs.third)
    {}
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T12:44:36.523

The reason it works for `std::pair` is not due to the functionality of `std::make_pair`, but instead is due to one of the extra constructors `std::pair` has.

Looking at [the list of pair constructors](http://en.cppreference.com/w/cpp/utility/pair/pair), you will find that #4 is

```
template< class U1, class U2 >
pair( const pair<U1,U2>& p ); 
```

This allows `std::pair` to be initialized from any other pair, as long as U1 is convertible to T1, and U2 is convertible to T2.

To make it work with your triple, you would have to add the same sort of constructors/assignment operators. Note, `std::tuple` or `boost::tuple` already provide that functionality if they are available to you.

# automatic-ref-counting - ARC [rewriter] NSInvocation 的 setArgument 不能安全地与拥有 __unsafe_unretained 之外的所有权的对象一起使用

> ID：12530596
> 
> 赞同：1
> 
> 时间：2012-09-21T12:24:45.417
> 
> 标签：automatic-ref-counting, nsinvocation

我一直在将我的项目转换为 ARC，但我遇到了这个错误。

&object,&invocation 和 &callerToRetain 向我显示错误“[rewriter] NSInvocation 的 setArgument 不能安全地用于拥有除 __unsafe_unretained 之外的所有权的对象”

```
+ (void)performSelector:(SEL)selector onTarget:(id *)target withObject:(id)object amount:(void *)amount callerToRetain:(id)callerToRetain{if ([*target respondsToSelector:selector]) {
    NSMethodSignature *signature = nil;
    signature = [*target methodSignatureForSelector:selector];
    NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:signature];

    [invocation setSelector:selector];

    int argumentNumber = 2;

    // If we got an object parameter, we pass a pointer to the object pointer
    if (object) {
        [invocation setArgument:&object atIndex:argumentNumber];
        argumentNumber++;
    }

    // For the amount we'll just pass the pointer directly so NSInvocation will call the method using the number itself rather than a pointer to it
    if (amount) {
        [invocation setArgument:amount atIndex:argumentNumber];
    }

    SEL callback = @selector(performInvocation:onTarget:releasingObject:);
    NSMethodSignature *cbSignature = [ASIHTTPRequest methodSignatureForSelector:callback];
    NSInvocation *cbInvocation = [NSInvocation invocationWithMethodSignature:cbSignature];
    [cbInvocation setSelector:callback];
    [cbInvocation setTarget:self];
    [cbInvocation setArgument:&invocation atIndex:2];
    [cbInvocation setArgument:&target atIndex:3];
    if (callerToRetain) {
        [cbInvocation setArgument:&callerToRetain atIndex:4];
    }

    CFRetain(invocation);

    // Used to pass in a request that we must retain until after the call
    // We're using CFRetain rather than [callerToRetain retain] so things to avoid earthquakes when using garbage collection
    if (callerToRetain) {
        CFRetain(callerToRetain);
    }
    [cbInvocation performSelectorOnMainThread:@selector(invoke) withObject:nil waitUntilDone:[NSThread isMainThread]];
}} 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T14:00:23.893

`NSInvocation`为了提高效率，默认情况下不保留或复制给定的参数，因此作为参数传递的每个对象在调用调用时必须仍然存在。这意味着传递给 -setArgument:atIndex: 的指针作为 __unsafe_unretained 处理。

如果你`NSInvocation`在 ARC 中使用，让它工作的最简单方法是

1.  创建调用`[invocation retainArguments]`对象后调用。这意味着调用将保留给定的参数。
2.  传递参数时，将它们转换为`__unsafe_unretained`.
3.  没有第 3 步。

# c# - 将“掩码”应用于字符串

> ID：12530598
> 
> 赞同：14
> 
> 时间：2012-09-21T12:24:57.877
> 
> 标签：c#, .net, vb.net, string

我有一个标志枚举 (int) 掩码，我需要将其转换为表示星期几的字符串。

说这是完整的字符串和任意掩码

```
strFullWeek = "MTWtFSs"
strWeekMask = "0100110"
-----------------------
strResult   = "-T--FS-" 
```

您建议以什么方式从整周和掩码字符串中获取 strResult？

# 更新

这是我的“整个上下文”（VB.NET）

```
<Flags()> Public Enum Week
  Monday = 1
  Tuesday = 2
  Wednesday = 4
  Thursday = 8
  Friday = 16
  Saturday = 32
  Sunday = 64
End Enum

Dim mondayOrSunday = Week.Monday Or Week.Sunday
Dim strDays = "MTWtFSs"

Dim strMondayOrSundayBinary = Convert.ToString(
  mondayOrSunday, 2).PadRight(7, CChar("0"))

Dim charMondayOrSunday = strDays.Zip(
  strMondayOrSundayBinary,
  Function(day, mask) If(mask = CChar("1"), day, CChar("-"))).ToArray()

Dim strMondayOrSunday = New String(charMondayOrSunday)

Console.WriteLine("{0} I see as {1}",
                  mondayOrSunday,
                  strMondayOrSunday) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-21T12:27:19.733

有一种相当简洁的 LINQ 方式：

```
var chars = strFullWeek.Zip(strWeekMask, (day, mask) => mask == '1' ? day : '-'))
                       .ToArray();
string text = new string(chars); 
```

它不会非常有效，但它可能已经足够好了......

编辑：好的，假设您对枚举版本的 C# 代码感到满意

```
// TODO: Rename "Week" to comply with .NET naming conventions
Week mask = Week.Monday | Week.Sunday;
var chars = strFullWeek.Select((value, index) => (int) mask & (1 << index) != 0) 
                                                 ? value : '-')
                       .ToArray();
string text = new string(chars); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T12:46:58.740

我的快速解决方案使用`StringBuilder`. 它允许您就地操作字符串。但是，除非您将此代码调用一百万次，否则与 LINQ 解决方案相比，您不会注意到速度上有任何差异。

```
string strFullWeek = "MTWtFSs";
string strWeekMask = "0100110";

var sb = new StringBuilder(strFullWeek);
for (int i = 0; i < strWeekMask.Length; i++) {
    if (strWeekMask[i] == '0') {
        sb[i] = '-';
    }
}
string result = sb.ToString(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T12:36:04.260

干得好：

```
var strFullWeek = "MTWtFSs";
var strWeekMask = "0100110";

var strFullWeekArray = strFullWeek.ToList();
var strWeekMaskArray = strWeekMask.ToList();

Console.WriteLine(string.Join(
    string.Empty,
    strFullWeek.Select(c => (strWeekMaskArray[strFullWeekArray.IndexOf(c)] == '1')
        ? c
        : '-'))); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T12:40:16.510

如果您正在寻找可读性，这是另一种选择：

```
string fullWeek = "MTWtFSs";
string weekMask = "0100110";

const char blankChar = '-';

int totalChars = fullWeek.Length;

StringBuilder result = new StringBuilder();

for (int index = 0; index < totalChars; index++)
{
    if (weekMask[index] == '1')
    {
        result.Append(fullWeek[index]);
    }
    else
    {
        result.Append(blankChar);
    }
}

Console.WriteLine(result); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T12:58:22.443

我参加晚会迟到了；但我想试试。这是我不太酷的 LINQ 方法：

```
var result = new string(strFullWeek.Select((letter, index) 
                         => strWeekMask[index] == '1' ? letter : '-').ToArray()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-21T13:07:02.807

如果你想直接使用枚举，你可以这样做：

```
[Flags()]
enum Week
{
    Monday = 1,
    Tuesday = 2,
    Wednesday = 4,
    Thursday = 8,
    Friday = 16,
    Saturday = 32,
    Sunday = 64
}

const string strFullWeek = "MTWtFSs";

string GetMaskedWeek(Week days)
{
    char[] result = new char[strFullWeek.Length];
    for (int i = 0; i < strFullWeek.Length; i++)
    {
        if ((((int)days >> i) & 1) != 0)
            result[i] = strFullWeek.ToCharArray(i, 1)[0];
        else
            result[i] = '-';
    }
    return new string(result);
} 
```

或者，在 VB.NET 中：

```
<Flags()> Public Enum Week
    Monday = 1
    Tuesday = 2
    Wednesday = 4
    Thursday = 8
    Friday = 16
    Saturday = 32
    Sunday = 64
End Enum

Dim strFullWeek As String = "MTWtFSs"

Private Function GetMaskedWeek(ByVal days As Week) As String
    Dim result(strFullWeek.Length) As Char
    For i As Integer = 0 To strFullWeek.Length - 1
        If ((days >> i) And 1) <> 0 Then
            result(i) = strFullWeek.ToCharArray(i, 1)(0)
        Else
            result(i) = "-"c
        End If
    Next
    Return New String(result)
End Function 
```

# visual-studio - 为什么 resharper 7 测试会话窗口不显示 Visual Studio 2012 中的单元测试总执行时间？

> ID：12530602
> 
> 赞同：8
> 
> 时间：2012-09-21T12:25:13.933
> 
> 标签：visual-studio, unit-testing, resharper

当我运行单元测试并通过按启用测试执行时间显示时

![在此处输入图像描述](../Images/3b572ea4a5308341ce55d368e0d42c04.png)

这个按钮，Resharper 会显示每个测试的执行时间，但不会显示摘要执行时间，如下一个屏幕截图所示。我的问题是为什么以及如何修复或设置它？

![在此处输入图像描述](../Images/f66a7baf35f53e20a8d1f4b437dd765b.png)

# mysql - MySQL触发器在事件后找到一列

> ID：12530603
> 
> 赞同：-2
> 
> 时间：2012-09-21T12:25:16.860
> 
> 标签：mysql, database, triggers

我有一个触发器，它在插入/更新/删除发生之前更新另一个值。

我想要做的是在刚刚添加的行中找到特定列的值，并在我的插入或更新中使用该值。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:30:35.283

您应该创建附加表并记录所有更改。在触发器内部，您可以使用`NEW`,`OLD`前缀访问旧的、新的值。将它们全部（如果您需要所有已更改的值）放入日志表中。

日志记录可以不同。您可以使用新列 {log_id, log_dtm} 创建具有相同结构的表。或者，如果您只需要记录某些字段，您可以创建日志表：{log_id, table, field, value, log_dtm}（或类似的东西）。

当然，要做到这一点，您应该更改触发器以添加新功能。

# c++ - OpenSSL 解密文本长度

> ID：12530612
> 
> 赞同：0
> 
> 时间：2012-09-21T12:25:45.460
> 
> 标签：c++, linux, openssl, aes, cryptoapi

我正在使用这个简单的函数来解密 AES 加密字符串

```
unsigned char *aes_decrypt(EVP_CIPHER_CTX *e, unsigned char *ciphertext, int *len)
{
  int p_len = *len, f_len = 0;
  unsigned char *plaintext = (unsigned char*)malloc(p_len + 128);
  memset(plaintext,0,p_len);
  EVP_DecryptInit_ex(e, NULL, NULL, NULL, NULL);
  EVP_DecryptUpdate(e, plaintext, &p_len, ciphertext, *len);
  EVP_DecryptFinal_ex(e, plaintext+p_len, &f_len);

  *len = p_len + f_len;
  return plaintext;
} 
```

问题是 len 返回的值与整个解码字符串不匹配。可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:06:40.810

当您说“字符串”时，我假设您的意思是一个以零结尾的文本字符串。加密过程取决于密码块大小，并且通常是填充。实际编码和解码的内容取决于应用程序......它是密码的所有二进制数据。如果您的文本字符串小于解密过程返回的字符串，则您的应用程序需要确定有用的部分。因此，例如，如果您知道结果中的字符串以零结尾，则可以通过简单的 strlen 获得长度。如果你不能保证输入当然是有风险的......可能最好在结果中搜索一个空值直到解码长度......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T05:48:42.437

如果您在 ECB、CBC 或其他一些链接模式中使用密码，则必须将纯文本填充到长度，即密码块长度的倍数。例如，您可以查看 PKCS#5 标准。OpenSSL 中的高级函数可以为程序员透明地执行填充。因此，加密文本可以比纯文本大到额外的密码块大小。

# uitableview - 刷新表视图数据不起作用

> ID：12530615
> 
> 赞同：-1
> 
> 时间：2012-09-21T12:25:50.147
> 
> 标签：uitableview, xcode4, reloaddata

我有一个 UITableView，名为收藏夹部分。如果我将一个条目添加到收藏夹部分，我可以看到它在收藏夹部分中正确加载，但是如果我继续并尝试添加另一个条目，它只会在我转到收藏夹部分，然后是原始部分然后返回时才有效到了收藏夹，好像有什么东西让她提神醒脑。
我试图将
[UiTableView reloadData] 放在 viewWillAppear 中，但仍然没有结果。我什至尝试了**[self.tableView reloadData]**并且仍然如此。有什么想法该怎么做？
请注意，我正在使用标签栏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T06:29:47.183

请确保您已在数据源中正确添加记录，之后只有您重新加载数据。

如果您知道要在哪个部分添加其他部分，则可以只重新加载一个部分，您可以使用 insertRows 方法来更新表中的新记录，为一行重新加载整个表是不好的做法。

希望这可以帮助

# gcc - 配置文件生成与 PG

> ID：12530620
> 
> 赞同：10
> 
> 时间：2012-09-21T12:25:59.500
> 
> 标签：gcc, compiler-construction, profiling, gprof

任何人都可以向我解释选项之间`profile-generate`的区别吗？`pg`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T12:47:19.117

两者都将生成配置文件数据。但它们的用法不同。

`fprofile-generate`是使用分析信息生成二进制文件，当您再次使用`fprofile-use`.

例如：

```
$ gcc -fprofile-generate filename.c 
```

如果执行 about 命令生成的二进制文件，它将生成一个名为`filename.gcda`配置文件数据的文件。

当你`fprofile-use`再次编译它时：

```
$ gcc -fprofile-use filename.c 
```

这一次，gcc 将使用该数据`filename.gcda`进一步优化。

当您执行使用 编译的二进制文件时`-pg`，它将生成`gmon.out`以后可以使用[`gprof`](https://sourceware.org/binutils/docs/gprof/)命令来分析代码。这更像是静态分析，它将提供有关代码路径的信息。

# iphone - 无法从 iPhone 的 UItable 视图中删除行？

> ID：12530622
> 
> 赞同：1
> 
> 时间：2012-09-21T12:26:05.307
> 
> 标签：iphone

我试图从我的表格视图中删除一行，但到目前为止一直没有成功。问题是行数据已成功删除，但无法删除表视图的分隔线，因为它是表视图骨架，因为它是数据。

我用来尝试删除行的代码如下。

```
[autocompleteTableView beginUpdates];
NSLog(@"animationArray Count: %d",[autocompleteSignalsList count]);

for (int i=[autocompleteSignalsList count]-1; i>=0; i--) {
            [autocompleteTableView reloadData];
    NSArray *paths = [NSArray arrayWithObject:[NSIndexPath indexPathForRow:i inSection:0]];
    [self.autocompleteSignalsList removeObjectAtIndex:i];
    [autocompleteTableView deleteRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationFade];
   [autocompleteTableView delegate];
}
[autocompleteTableView endUpdates]; 
```

现在对于我希望得到回答的问题：如何正确删除行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:52:59.920

分隔线自动出现在空的 UITableView 中。摆脱它的最好方法是为您的 tableView 创建一个页脚。[这](https://stackoverflow.com/a/5377569/1350513)是一个很好的答案，其中包含有关如何执行此操作的信息。

我还会稍微优化你的循环代码：

```
[autocompleteTableView beginUpdates];
NSLog(@"animationArray Count: %d",[autocompleteSignalsList count]);
NSMutableArray *paths = [NSMutableArray new];
for (int i=[autocompleteSignalsList count]-1; i>=0; i--) {
    [paths addObject:[NSIndexPath indexPathForRow:i inSection:0]];
    [self.autocompleteSignalsList removeObjectAtIndex:i];
}
[autocompleteTableView deleteRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationFade];
[autocompleteTableView endUpdates]; 
```

# html - 使用 HTML 网页读取和写入 Access

> ID：12530623
> 
> 赞同：0
> 
> 时间：2012-09-21T12:26:11.873
> 
> 标签：html, database, excel, ms-access

我对 HTML 很陌生。我想要做的是在 HTML 中创建一个表格（我已经使用标准表格标签 (table)(/table) 等完成了...

该表有许多标题，例如名称、数字、10/10、百分比、选项

（这些不是确切的标题，但你明白了）

名称和编号标题只是不会更改的文本（这些列下方的文本相同），这一切都很好，很漂亮，很容易做到。

我正在努力的部分是需要能够编辑和保存的表格的一部分。简而言之，我想要 2 列做什么：

加载网页时，显示存储在`MS-Access`或中的信息`MS-Excel`（因此在页面加载时自动从文件中读取）当用户更改网页上的信息时，我希望它修改访问页面上正确单元格中的数据，因此覆盖它，就好像您自己在 Access 中输入内容并单击保存按钮一样。

这可能使用 HTML、Javascript 和/或 PHP 吗？一切都需要在客户端。网页已构建，我正在为表格中的文本框使用 Input type="text"，我想知道是否使用 (form) (/form) 和一些 (Script) 可以做到这一点。我在互联网上搜索并找到了一些示例，您可以在其中读取和写入 Excel，但需要在 IE 上启用 ActiveX。这是一台工作计算机，是我被要求完成的任务。系统上没有管理员权限，我无法在 IE 中启用 ActiveX 控件，因此其他方法对我不起作用。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:34:44.330

您无法将文件访问、读取和写入数据库**客户端**等内容存档。您需要使用服务器端技术，顺便说一下，PHP 是一种**服务器端**技术，而不是客户端。

**客户端**是在用户浏览器、IE Chrome 等上运行的所有内容。**服务器端**是在将 HTML 发送到客户端之前在 Web 服务器中运行的所有内容。

我能感觉到你在走到这里之前就想跑。您需要研究网站如何运作。

# php - Symfony 1.4 - 如何在 table_method 中使用后端过滤器？

> ID：12530628
> 
> 赞同：1
> 
> 时间：2012-09-21T12:27:03.707
> 
> 标签：php, symfony1, symfony-1.4, filtering

我想在我的 table_method 中使用自定义过滤器来扩展查询。不幸的是，我不知道如何从方法中访问字段的值。我正在使用 SF 1.4 /w Doctrine 1.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:22:22.020

我认为您必须更改 doBuildQuery filterForm 方法。

在任何 filterForm 类中，您都可以：

```
public doBuildQuery(array $values) {
    $q = parent::doBuildQuery($values);

    if($values['....']) ... {
       $q->addWhere($q->getRootAlias().".column = ?",$values['...']);
    }

    return $q; 
} 
```

此方法是从后端生成的模块中自动调用的方法。如果要添加另一个小部件，请在 configure() 方法中执行，然后在 doBuildQuery() 中处理值。

# database-design - 加密数据库密码字段的必要性

> ID：12530634
> 
> 赞同：1
> 
> 时间：2012-09-21T12:27:23.363
> 
> 标签：database-design, encryption, passwords, security

我听说出于安全问题，建议在数据库中保持密码字段加密。

如果只有我的网站，我可以访问数据库。根据我们的网站政策，我查看其他密码也没有问题。

这是否也适用于我的网站，或者说这件事背后还有其他一些安全原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T12:44:02.047

[指导原则](https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet)是，任何人（甚至用户自己）都应该能够看到密码，并且不应以允许检索密码的方式将密码存储在数据库中。这是因为这些数据可能会以多种方式丢失 - 管理员可能会打印出一份报告，然后将其留在办公桌上；攻击者可能能够使用 SQL 注入来运行数据库查询；有人可能会闯入您的建筑物并偷走备份磁带。

许多客户在多个网站上使用相同的密码 - 因此，如果您的网站是最薄弱的链接，如果他们重复使用密码，您可能会使他们在其他网站上面临风险。

建议使用一种称为“哈希”的加密技术，该技术将明文密码转换为无意义的字符串；没有办法反转散列，这意味着即使我窃取了散列密码，我也无法弄清楚原始的纯文本是什么。

对相同的字符串进行两次哈希处理会得到相同的哈希值——因此当有人登录时，您会对他们的明文密码进行哈希处理，并将其与数据库中的哈希值进行比较。

OWASP 链接提供了有关此主题的更多信息，包括“加盐”哈希。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T21:15:07.327

您根本不应该在数据库中存储任何密码，无论是加密的还是其他的。

相反，**存储一个 hash**。当用户尝试登录时，计算用户输入的密码的哈希值，并将其与存储在数据库中的哈希值进行比较。

不幸的是，普通哈希很容易受到所谓的“彩虹”攻击。如果攻击者掌握了你的表，(s)他可以预先计算整个英语¹字典的哈希值，甚至是直到一定长度的所有字符组合的哈希值，生成所谓的**“彩虹表”**，然后快速比较它到数据库表以获取匹配的哈希值。您的一些用户一定会使用在这种攻击下可能失败的弱密码。

为防止彩虹攻击，请勿对密码本身进行哈希处理。而是哈希密码+盐。**salt**是一个随机的、特定于用户的字符串，不需要比散列本身更秘密²。这引入了散列的变化，因此攻击者不能再对所有用户使用相同的彩虹表。攻击者实际上必须为每个用户（和他/她的盐）生成一个新的彩虹表，希望它变得非常昂贵。

缺乏盐渍化导致了今年 LinkeIn 的大规模安全漏洞。引用[纽约时报的这篇文章](http://www.nytimes.com/2012/06/11/technology/linkedin-breach-exposes-light-security-even-at-data-companies.html?pagewanted=all&_moc.semityn.www)：

*“安全专家说，加盐密码是安全 101——LinkedIn、eHarmony 和 Lastfm.com 都未能采取的基本步骤。”*

当然，这应该只是多层防御的最后一层，该层旨在使攻击者在已经读取您的数据库后更加困难。你应该尽你所能从一开始就防止这种情况发生，包括防止 SQL 注入、严格的层级分离、适当的数据库安全、防火墙、定期修补等......

* * *

*¹或其他感兴趣的人类语言。*

*²但理想情况下，应该单独存储，例如在定义良好的 Web 服务 API 后面。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:32:00.227

您应该始终对密码进行哈希处理。用户没有理由信任您，您也无法知道您的数据库是否已被入侵。对于这样的问题，我只能假设您对网站安全有基本的了解。我们生活在索尼、美国政府、银行等公司每周都会被黑客入侵的时代。如果您认为您对此豁免，那么您应该在注册时发布它，让您的用户知道您不关心他们的隐私。

没有任何理由可以读取您的用户密码之一。

要实现密码哈希，您应该在注册期间获取密码并在存储到数据库之前对其进行哈希处理。然后当用户登录时，您应该对密码进行哈希处理，然后将哈希值与数据库中的哈希值进行比较。如果他们比较，那么它的密码相同。

另外，记得给密码加盐。这意味着如果您有一个密码“test”并对其进行哈希处理，如果另一个站点上的用户拥有密码“test”，则两个哈希值相同，他们可以根据之前的哈希值计算出密码。加盐就像在散列之前向密码添加额外数据，因此数据库中的“test”实际上可能是“test123”，每当有人输入密码时，您的 PHP 会自动将“123”附加到它。这样，在将您站点的哈希值与另一个站点进行比较时，相同密码的哈希值是不相同的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T12:33:31.240

你的意思是你认为你是唯一可以访问它的人。安全性应该分层实施，所以如果一个失败，后面总会有另一个。

密码应始终经过哈希处理和加盐处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-22T09:52:39.993

我想在已经提供的好的答案上加一点。哈希算法应该很**慢**，否则很容易暴力破解，直到找到匹配项。一个现成的 GPU 可以计算大约 8 Giga 的组合，因此您可以在不到一毫秒的时间内尝试完整的英语词典！

这就是为什么你应该使用**Bcrypt**来散列你的密码，它是专门为散列密码而设计的。它具有成本因素，可以适应未来（因此更快）的硬件。

# javascript - three.js - 在管几何内移动相机

> ID：12530637
> 
> 赞同：1
> 
> 时间：2012-09-21T12:27:32.217
> 
> 标签：javascript, three.js

在 3d 场景中，管几何是通过从外部 javascript 文件加载 200 个点作为 JSON 数据构建的。下面是完整的代码：

```
 <!DOCTYPE html>
<html lang="en">
    <head>
        <title>3d Model using HTML5 and three.js</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                font-family: Monospace;
                background-color: #f0f0f0;
                margin: 0px;
                overflow: hidden;
            }
            #Find_panel {
                position: absolute;
                right: 5px;
                top: 5px;
                color: #fff;
                text-align: left;
                background: rgba(0, 0, 0, 0.5);
                padding: 10px;
                width: 290px;
                height: 120px;
                border: solid 1px black;
                border-radius: 5px;
            }
            #Find_panel input {
                padding: 2px 4px;
                margin-bottom: 3px;
            }
        </style>
    </head>
    <body>          
        <input type="button" value="plot" onClick="return plotPath();" />        
        <script src="three.min.js" type="text/javascript"></script>
        <script src="Curve.js" type="text/javascript"></script>
        <script src="TubeGeometry.js" type="text/javascript"></script>      
        <script src="Stats.js" type="text/javascript"></script>
        <script src="Detector.js" type="text/javascript"></script>
        <script src="path.js" type="text/javascript"></script>

        <script>

        // variables
        var container, stats, form;

        var camera, scene, renderer, splineCamera, cameraHelper, cameraEye;

        var text, plane, tube, tubeMesh, parent;

        var targetRotation = 0;
        var targetRotationOnMouseDown = 0;

        var mouseX = 0;
        var mouseXOnMouseDown = 0;

        var windowHalfX = window.innerWidth / 2;
        var windowHalfY = window.innerHeight / 2;

        var binormal = new THREE.Vector3();
        var normal = new THREE.Vector3();

        var materials = []; 
        var onMouseDownMouseX = 0, onMouseDownMouseY = 0,
            lon = 0, onMouseDownLon = 0,isUserInteracting = false,
            lat = 0, onMouseDownLat = 0,
            phi = 0, theta = 0;

        function plotPath()
        {                       
            var obj = getPath();            
            var segments = 50;
            var closed = false;
            var debug = true;
            var radiusSegments = 12;
            var tube;
            var points = [];
            var x=0,y=0,z=0;

            for(var i=0; i<obj.path.length; i++)
            {                               
                console.log(obj.path[i].point);
                points.push(obj.path[i].point);
                extrudePath = new THREE.SplineCurve3(points);
                extrudePath.dynamic = true;

                tube = new THREE.TubeGeometry(extrudePath, segments, 2, radiusSegments, closed, debug);
                tube.dynamic = true;

                tubeMesh = new THREE.Mesh(tube ,new THREE.MeshBasicMaterial({
                    color: 0x000000,side: THREE.DoubleSide,
                    opacity: 0.5,transparent: true,
                    wireframe: true}));
                tubeMesh.__dirtyVertices = true;
                tubeMesh.dynamic = true;

                parent = new THREE.Object3D();
                parent.position.y = 100;

                if ( tube.debug ) tubeMesh.add( tube.debug );
                parent.add( tubeMesh );                                 
            }           
            scene.add( tubeMesh );
            scene.add(parent);
            animate();                          
        } 

        init();                     
        //animate();

        function init(){

            // container
            container = document.createElement( 'div' );
            document.body.appendChild( container );

            // renderer         
            renderer = new THREE.WebGLRenderer( { antialias: true } ); 
            renderer.setSize( window.innerWidth, window.innerHeight );
            container.appendChild( renderer.domElement );

            // scene            
            scene = new THREE.Scene();

            // camera
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1100);          
            camera.position.set(0, 50, 500);            
            camera.lookAt(parent);          

            // CONTROLS         
            controls = new THREE.TrackballControls( this.camera, container );   

            // light            
            scene.add( new THREE.AmbientLight( 0x404040 ) );
            light = new THREE.DirectionalLight( 0xffffff );
            light.position.set( 0, 1, 0 );
            scene.add( light );                 

            // Grid
            geometry = new THREE.Geometry();
            geometry.vertices.push( new THREE.Vector3( - 500, 0, 0 ) );
            geometry.vertices.push( new THREE.Vector3( 500, 0, 0 ) );

            for ( var i = 0; i <= 20; i ++ ) {

                line = new THREE.Line( geometry, new THREE.LineBasicMaterial( { color: 0x000000, opacity: 0.2 } ) );
                line.position.z = ( i * 50 ) - 500;
                scene.add( line );

                line = new THREE.Line( geometry, new THREE.LineBasicMaterial( { color: 0x000000, opacity: 0.2 } ) );
                line.position.x = ( i * 50 ) - 500;
                line.rotation.y = 90 * Math.PI / 180;
                scene.add( line );
            }           

            // projector
            projector = new THREE.Projector();

            // stats
            stats = new Stats();
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.top = '0px';
            //container.appendChild( stats.domElement );

            document.addEventListener( 'mousedown', onDocumentMouseDown, false );
            document.addEventListener( 'mouseover', onDocumentMouseOver, false );
            document.addEventListener( 'mousemove', onDocumentMouseMove, false );
            document.addEventListener( 'touchstart', onDocumentTouchStart, false );
            document.addEventListener( 'touchmove', onDocumentTouchMove, false );
            document.addEventListener( 'mousewheel', onDocumentMouseWheel, false );
            document.addEventListener( 'DOMMouseScroll', onDocumentMouseWheel, false);
            window.addEventListener( 'resize', onWindowResize, false );

        }       

        function onWindowResize() {

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize( window.innerWidth, window.innerHeight );

        }

        function onDocumentMouseDown( event ) {
            event.preventDefault();

            document.addEventListener( 'mousemove', onDocumentMouseMove, false );
            document.addEventListener( 'mouseup', onDocumentMouseUp, false );
            document.addEventListener( 'mouseout', onDocumentMouseOut, false );

            isUserInteracting = true;

            onPointerDownPointerX = event.clientX;
            onPointerDownPointerY = event.clientY;

            onPointerDownLon = lon;
            onPointerDownLat = lat;
        }

        function onDocumentMouseMove( event ) {

            if ( isUserInteracting ) {
                    lon = ( onPointerDownPointerX - event.clientX ) * 0.1 + onPointerDownLon;
                    lat = ( event.clientY - onPointerDownPointerY ) * 0.1 + onPointerDownLat;
                }
        }

        function onDocumentMouseUp( event ) {

            isUserInteracting = false;
            document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
            document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
            document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

        }

        function onDocumentMouseOut( event ) {

            document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
            document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
            document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

        }

        function onDocumentMouseOver( event ) {

            document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
            document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
            document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

        }

        function onDocumentTouchStart( event ) {

            if ( event.touches.length === 1 ) {

                event.preventDefault();

                mouseXOnMouseDown = event.touches[ 0 ].pageX - windowHalfX;
                targetRotationOnMouseDown = targetRotation;

            }

        }

        function onDocumentTouchMove( event ) {
            if ( event.touches.length === 1 ) {
                event.preventDefault();
                mouseX = event.touches[ 0 ].pageX - windowHalfX;
                targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.05;
            }
        }

        function onDocumentMouseWheel( event ) {

            // WebKit

            if ( event.wheelDeltaY ) {

                fov -= event.wheelDeltaY * 0.05;

            // Opera / Explorer 9

            } else if ( event.wheelDelta ) {

                fov -= event.wheelDelta * 0.05;

            // Firefox

            } else if ( event.detail ) {

                fov += event.detail * 1.0;

            }

            camera.projectionMatrix.makePerspective( fov, window.innerWidth / window.innerHeight, 1, 1100 );
            render();

        }

        function animate() {
            requestAnimationFrame( animate );           
            render();
            update();
        }

        function update()
        {
            controls.update();
            stats.update();
        }

        function render() {                         

            lat = Math.max( - 85, Math.min( 85, lat ) );
            phi = ( 90 - lat ) * Math.PI / 180;
            theta = lon * Math.PI / 180;

            camera.target = 500 * Math.sin( phi ) * Math.cos( theta );
            camera.target = 500 * Math.cos( phi );
            camera.target = 500 * Math.sin( phi ) * Math.sin( theta );

            tubeMesh.rotation.y += ( targetRotation - tubeMesh.rotation.y ) * 0.15;         
            camera.updateMatrixWorld();
            camera.lookAt( camera.target );

            renderer.render( scene, camera );
        }
        </script>        
    </body>
</html> 
```

path.js 文件

```
function getPath()
{
    var path = {"path": 
        [
            {"point":new THREE.Vector3(0,0,-4.8)},
            {
                "point":new THREE.Vector3(3,-1.9,-4.8)
            },
            {
                "point":new THREE.Vector3(361.2,-1.9,-4.8)
            },
            {
                "point":new THREE.Vector3(378,-1.97,-4.85)
            },
            {
                "point":new THREE.Vector3(386,-2.02,-4.89)
            },
            {
                "point":new THREE.Vector3(396,-2.05,-4.93)
            },
            {
                "point":new THREE.Vector3(405,-2.06,-4.99)
            },
            {
                "point":new THREE.Vector3(417,-2.13,-5.07)
            },
            {
                "point":new THREE.Vector3(435,-2.21,-5.09)
            },
            {
                "point":new THREE.Vector3(461,-2.35,-5.04)
            },
            {
                "point":new THREE.Vector3(484.99,-2.82,-5.06)
            },
            {
                "point":new THREE.Vector3(513.97,-3.99,-5.17)
            },
            {
                "point":new THREE.Vector3(543.88,-6.25,-5.47)
            },
            {
                "point":new THREE.Vector3(571.67,-9.57,-6.06)
            },
            {
                "point":new THREE.Vector3(600.32,-14.04,-6.64)
            },
            {
                "point":new THREE.Vector3(628.83,-19.34,-7.14)
            },
            {
                "point":new THREE.Vector3(658.12,-25.79,-7.56)
            },
            {
                "point":new THREE.Vector3(686.17,-33.14,-7.83)
            },
            {
                "point":new THREE.Vector3(712.87,-41.54,-8.28)
            },
            {
                "point":new THREE.Vector3(736.45,-49.81,-8.98)
            },
            {
                "point":new THREE.Vector3(743.95,-52.61,-9.18)
            },
            {
                "point":new THREE.Vector3(783.56,-69.29,-9.89)
            },
            {
                "point":new THREE.Vector3(810.36,-82.1,-10.27)
            },
            {
                "point":new THREE.Vector3(835.8,-95.37,-10.06)
            },
            {
                "point":new THREE.Vector3(869.69,-114.96,-8.2)
            },
            {
                "point":new THREE.Vector3(885.47,-124.91,-6.93)
            },
            {
                "point":new THREE.Vector3(911.47,-140.99,-5.56)
            },
            {
                "point":new THREE.Vector3(935.87,-154.92,-5.28)
            },
            {
                "point":new THREE.Vector3(960.87,-168.16,-5.85)
            },
            {
                "point":new THREE.Vector3(986.6,-180.75,-7.54)
            },
            {
                "point":new THREE.Vector3(1015.85,-193.98,-11.05)
            },
            {
                "point":new THREE.Vector3(1042.4,-205,-15.55)
            },
            {
                "point":new THREE.Vector3(1069,-215.17,-21.53)
            },
            {
                "point":new THREE.Vector3(1095.28,-224.51,-29.08)
            },
            {
                "point":new THREE.Vector3(1121.58,-232.81,-38.03)
            },
            {
                "point":new THREE.Vector3(1147.96,-239.95,-48.02)
            },
            {
                "point":new THREE.Vector3(1173.78,-246.06,-58.7)
            },
            {
                "point":new THREE.Vector3(1199.97,-251.68,-70.8)
            },
            {
                "point":new THREE.Vector3(1225.44,-256.37,-83.85)
            },
            {
                "point":new THREE.Vector3(1250.21,-259.76,-97.73)
            },
            {
                "point":new THREE.Vector3(1275.18,-261.91,-112.89)
            },
            {
                "point":new THREE.Vector3(1299.18,-262.72,-128.25)
            },
            {
                "point":new THREE.Vector3(1324.16,-261.9,-145.17)
            },
            {
                "point":new THREE.Vector3(1347.12,-259.26,-162.01)
            },
            {
                "point":new THREE.Vector3(1370.1,-254.79,-180.44)
            },
            {
                "point":new THREE.Vector3(1391.44,-249.33,-199.45)
            },
            {
                "point":new THREE.Vector3(1412.08,-242.89,-219.66)
            },
            {
                "point":new THREE.Vector3(1431.21,-235.86,-240)
            },
            {
                "point":new THREE.Vector3(1448.85,-228.85,-259.77)
            },
            {
                "point":new THREE.Vector3(1466.93,-221.02,-281.17)
            },
            {
                "point":new THREE.Vector3(1482.61,-212.83,-301.56)
            },
            {
                "point":new THREE.Vector3(1499.46,-201.99,-325.61)
            },
            {
                "point":new THREE.Vector3(1514.79,-190.3,-349.76)
            },
            {
                "point":new THREE.Vector3(1528.46,-178.3,-373.74)
            },
            {
                "point":new THREE.Vector3(1540.44,-165.72,-396.95)
            },
            {
                "point":new THREE.Vector3(1551.12,-152.11,-420.22)
            },
            {
                "point":new THREE.Vector3(1560.6,-137.69,-443.65)
            },
            {
                "point":new THREE.Vector3(1568.68,-122.77,-467.03)
            },
            {
                "point":new THREE.Vector3(1575.1,-107.38,-490.63)
            },
            {
                "point":new THREE.Vector3(1579.83,-90.95,-514.17)
            },
            {
                "point":new THREE.Vector3(1582.85,-73.58,-537.44)
            },
            {
                "point":new THREE.Vector3(1584.44,-56.31,-559.55)
            },
            {
                "point":new THREE.Vector3(1585.69,-37.18,-583.4)
            },
            {
                "point":new THREE.Vector3(1586.7,-19.01,-605.85)
            },
            {
                "point":new THREE.Vector3(1587.11,0.09,-627.93)
            },
            {
                "point":new THREE.Vector3(1587.12,19.32,-649.89)
            },
            {
                "point":new THREE.Vector3(1587.14,37.95,-672.25)
            },
            {
                "point":new THREE.Vector3(1587.15,56.42,-694.74)
            },
            {
                "point":new THREE.Vector3(1587.16,74.88,-717.49)
            },
            {
                "point":new THREE.Vector3(1587.18,86.94,-732.49)
            },
            {
                "point":new THREE.Vector3(1587.02,90.22,-736.59)
            },
            {
                "point":new THREE.Vector3(1585.94,98.3,-746.72)
            },
            {
                "point":new THREE.Vector3(1584.12,110.12,-761.35)
            },
            {
                "point":new THREE.Vector3(1582.37,126.31,-780.87)
            },
            {
                "point":new THREE.Vector3(1581.35,144.78,-802.65)
            },
            {
                "point":new THREE.Vector3(1581,164.31,-824.89)
            },
            {
                "point":new THREE.Vector3(1581.48,183.79,-845.82)
            },
            {
                "point":new THREE.Vector3(1582.68,202.72,-864.75)
            },
            {
                "point":new THREE.Vector3(1584.17,225.59,-885.31)
            },
            {
                "point":new THREE.Vector3(1585.18,248.06,-903.31)
            },
            {
                "point":new THREE.Vector3(1585.82,270.32,-919.26)
            },
            {
                "point":new THREE.Vector3(1586.13,295.79,-935.66)
            },
            {
                "point":new THREE.Vector3(1586.18,320.82,-950.1)
            },
            {
                "point":new THREE.Vector3(1586.18,346.44,-963.02)
            },
            {
                "point":new THREE.Vector3(1586.08,372.73,-975.03)
            },
            {
                "point":new THREE.Vector3(1585.94,398.95,-986.7)
            },
            {
                "point":new THREE.Vector3(1585.79,425.21,-998.77)
            },
            {
                "point":new THREE.Vector3(1585.63,450.33,-1010.68)
            },
            {
                "point":new THREE.Vector3(1585.41,476.3,-1023.12)
            },
            {
                "point":new THREE.Vector3(1585.28,502.88,-1036.15)
            },
            {
                "point":new THREE.Vector3(1585.33,528.34,-1049.39)
            },
            {
                "point":new THREE.Vector3(1585.06,553.75,-1063.35)
            },
            {
                "point":new THREE.Vector3(1584.58,577.19,-1076.95)
            },
            {
                "point":new THREE.Vector3(1584.17,603.04,-1092.95)
            },
            {
                "point":new THREE.Vector3(1583.93,625.7,-1107.8)
            },
            {
                "point":new THREE.Vector3(1583.78,649.56,-1124.45)
            },
            {
                "point":new THREE.Vector3(1583.65,673.62,-1142.71)
            },
            {
                "point":new THREE.Vector3(1583.58,696.13,-1160.68)
            },
            {
                "point":new THREE.Vector3(1583.51,718.5,-1178.97)
            },
            {
                "point":new THREE.Vector3(1583.63,740.65,-1197.37)
            },
            {
                "point":new THREE.Vector3(1583.93,762.65,-1215.8)
            },
            {
                "point":new THREE.Vector3(1584.15,784.53,-1234.98)
            },
            {
                "point":new THREE.Vector3(1584.18,805.02,-1253.63)
            },
            {
                "point":new THREE.Vector3(1584.12,827.32,-1273.69)
            },
            {
                "point":new THREE.Vector3(1584.16,848.92,-1292.44)
            },
            {
                "point":new THREE.Vector3(1584.28,870.61,-1310.92)
            },
            {
                "point":new THREE.Vector3(1584.31,891.39,-1328.32)
            },
            {
                "point":new THREE.Vector3(1584.15,913.88,-1347.1)
            },
            {
                "point":new THREE.Vector3(1583.87,935.63,-1365.2)
            },
            {
                "point":new THREE.Vector3(1583.66,958.97,-1384.67)
            },
            {
                "point":new THREE.Vector3(1583.6,980.53,-1402.69)
            },
            {
                "point":new THREE.Vector3(1583.52,1004.11,-1422.36)
            },
            {
                "point":new THREE.Vector3(1583.46,1026.39,-1440.92)
            },
            {
                "point":new THREE.Vector3(1583.46,1048.47,-1459.25)
            },
            {
                "point":new THREE.Vector3(1583.63,1070.67,-1477.76)
            },
            {
                "point":new THREE.Vector3(1583.79,1091.96,-1495.32)
            },
            {
                "point":new THREE.Vector3(1583.74,1114.66,-1513.84)
            },
            {
                "point":new THREE.Vector3(1583.51,1136.87,-1532.64)
            },
            {
                "point":new THREE.Vector3(1583.39,1159.24,-1553.08)
            },
            {
                "point":new THREE.Vector3(1583.51,1180.05,-1573.28)
            },
            {
                "point":new THREE.Vector3(1583.6,1200.71,-1593.62)
            },
            {
                "point":new THREE.Vector3(1583.63,1221.51,-1613.84)
            },
            {
                "point":new THREE.Vector3(1583.67,1242.52,-1634.25)
            },
            {
                "point":new THREE.Vector3(1583.66,1263.01,-1654.49)
            },
            {
                "point":new THREE.Vector3(1583.6,1283.47,-1675.04)
            },
            {
                "point":new THREE.Vector3(1583.66,1304.07,-1695.74)
            },
            {
                "point":new THREE.Vector3(1583.71,1311.2,-1703.03)
            },
            {
                "point":new THREE.Vector3(1583.83,1330.87,-1723.79)
            },
            {
                "point":new THREE.Vector3(1583.92,1350.74,-1744.92)
            },
            {
                "point":new THREE.Vector3(1583.93,1370.59,-1765.93)
            },
            {
                "point":new THREE.Vector3(1583.9,1390.29,-1787.2)
            },
            {
                "point":new THREE.Vector3(1583.92,1410.08,-1808.67)
            },
            {
                "point":new THREE.Vector3(1583.93,1429.9,-1829.84)
            },
            {
                "point":new THREE.Vector3(1584.27,1447.08,-1848.41)
            },
            {
                "point":new THREE.Vector3(1584.54,1460.96,-1863.9)
            },
            {
                "point":new THREE.Vector3(1584.2,1480.03,-1886.4)
            },
            {
                "point":new THREE.Vector3(1583.92,1497.61,-1908.95)
            },
            {
                "point":new THREE.Vector3(1584.04,1521.63,-1942.18)
            },
            {
                "point":new THREE.Vector3(1584.12,1538.22,-1966.08)
            },
            {
                "point":new THREE.Vector3(1584.04,1554.3,-1989.74)
            },
            {
                "point":new THREE.Vector3(1583.86,1570.59,-2014.21)
            },
            {
                "point":new THREE.Vector3(1583.64,1587.01,-2038.23)
            },
            {
                "point":new THREE.Vector3(1583.6,1603.9,-2061.56)
            },
            {
                "point":new THREE.Vector3(1583.7,1621.04,-2084.58)
            },
            {
                "point":new THREE.Vector3(1583.71,1638.71,-2107.95)
            },
            {
                "point":new THREE.Vector3(1583.66,1656.08,-2131.42)
            },
            {
                "point":new THREE.Vector3(1583.44,1673.04,-2155.19)
            },
            {
                "point":new THREE.Vector3(1583.29,1689.5,-2178.95)
            },
            {
                "point":new THREE.Vector3(1583.43,1705.84,-2202.9)
            },
            {
                "point":new THREE.Vector3(1583.5,1722.15,-2227)
            },
            {
                "point":new THREE.Vector3(1583.45,1738.47,-2251.09)
            },
            {
                "point":new THREE.Vector3(1583.45,1754.53,-2275.72)
            },
            {
                "point":new THREE.Vector3(1583.44,1770.43,-2299.72)
            },
            {
                "point":new THREE.Vector3(1583.62,1787.54,-2323.14)
            },
            {
                "point":new THREE.Vector3(1583.99,1805.05,-2346.5)
            },
            {
                "point":new THREE.Vector3(1584.4,1823.38,-2368.96)
            },
            {
                "point":new THREE.Vector3(1584.79,1843.52,-2390.09)
            },
            {
                "point":new THREE.Vector3(1585.26,1865.03,-2410.12)
            },
            {
                "point":new THREE.Vector3(1585.72,1887.27,-2428.4)
            },
            {
                "point":new THREE.Vector3(1585.81,1911.12,-2445.42)
            },
            {
                "point":new THREE.Vector3(1585.65,1935.65,-2460.87)
            },
            {
                "point":new THREE.Vector3(1585.56,1960.84,-2475.45)
            },
            {
                "point":new THREE.Vector3(1585.55,1986.39,-2488.95)
            },
            {
                "point":new THREE.Vector3(1585.54,2012.8,-2500.9)
            },
            {
                "point":new THREE.Vector3(1585.56,2039.95,-2511.38)
            },
            {
                "point":new THREE.Vector3(1585.68,2067.37,-2520.49)
            },
            {
                "point":new THREE.Vector3(1585.84,2095.54,-2528.14)
            },
            {
                "point":new THREE.Vector3(1585.95,2124.01,-2534.66)
            },
            {
                "point":new THREE.Vector3(1585.85,2152.62,-2540.46)
            },
            {
                "point":new THREE.Vector3(1585.66,2181.3,-2545.39)
            },
            {
                "point":new THREE.Vector3(1585.47,2209.9,-2549.55)
            },
            {
                "point":new THREE.Vector3(1585.15,2239.28,-2553.11)
            },
            {
                "point":new THREE.Vector3(1584.91,2268.14,-2555.99)
            },
            {
                "point":new THREE.Vector3(1584.65,2297.08,-2559)
            },
            {
                "point":new THREE.Vector3(1584.51,2325.96,-2563.23)
            },
            {
                "point":new THREE.Vector3(1584.69,2355.01,-2568.93)
            },
            {
                "point":new THREE.Vector3(1585,2382.93,-2575.94)
            },
            {
                "point":new THREE.Vector3(1585.22,2410.98,-2584.41)
            },
            {
                "point":new THREE.Vector3(1585.56,2438.87,-2593.69)
            },
            {
                "point":new THREE.Vector3(1586.12,2465.93,-2604.11)
            },
            {
                "point":new THREE.Vector3(1586.28,2492.55,-2616.1)
            },
            {
                "point":new THREE.Vector3(1586.05,2518.24,-2629.53)
            },
            {
                "point":new THREE.Vector3(1585.72,2543.28,-2644.54)
            },
            {
                "point":new THREE.Vector3(1585.16,2566.25,-2659.83)
            },
            {
                "point":new THREE.Vector3(1584.5,2587.99,-2675.66)
            },
            {
                "point":new THREE.Vector3(1584.07,2609.47,-2692.17)
            },
            {
                "point":new THREE.Vector3(1583.9,2632.23,-2709.99)
            },
            {
                "point":new THREE.Vector3(1583.58,2652.96,-2726.97)
            },
            {
                "point":new THREE.Vector3(1583.31,2673.99,-2745.45)
            },
            {
                "point":new THREE.Vector3(1583.25,2694.96,-2765.47)
            },
            {
                "point":new THREE.Vector3(1583.18,2713.75,-2785)
            },
            {
                "point":new THREE.Vector3(1583.12,2732.02,-2805.55)
            },
            {
                "point":new THREE.Vector3(1582.65,2749.82,-2826.9)
            },
            {
                "point":new THREE.Vector3(1581.74,2767.17,-2848.6)
            },
            {
                "point":new THREE.Vector3(1580.85,2784.22,-2870.03)
            },
            {
                "point":new THREE.Vector3(1579.57,2801.31,-2891.28)
            },
            {
                "point":new THREE.Vector3(1578.92,2808.08,-2899.67)
            }
        ]
    }
    return path;
} 
```

如何通过键盘或轨迹球使相机移动到管状几何体中？ [管几何的屏幕截图](https://www.dropbox.com/s/edgt2ys7xg6hat4/tube_geometry.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-04T16:43:18.420

有几种方法可以在 TubeGeometry 内移动。如果您只需要跟随一些轨道，您可以创建一个样条线，然后使用

```
spline.getPointAt( 0 -1 ) 
```

在你的车、相机或任何你在管子里移动的东西上。旋转会变得有些棘手。

# javascript - Javascript无限对象

> ID：12530647
> 
> 赞同：-1
> 
> 时间：2012-09-21T12:27:55.893
> 
> 标签：javascript, math, infinity

我正在计算函数请求/秒的平均值，结果数字有时太长，因此显示为无穷大，有没有办法将其舍入以仅显示数字？或者在 Infinity 上进行 sleep()/wait()？

准确地说，我在图表上监控请求/秒，当它是无穷大时，这条线不会上升到零

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:31:38.147

展示时间不会太长。如果你得到 Inf ，那么除了知道它大于最大可能值之外，你不能做任何事情。这是JavaScript 中使用的[IEEE 浮点数的行为。](http://en.wikipedia.org/wiki/IEEE_floating_point)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:32:51.983

这个无穷大的原因可能是除以零，而不是一个大数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:34:58.347

您很可能无意中被零除。

```
var num = 1/0;
console.log(num);
//>Infinity 
```

有条件地检查除数是否不为空。

您可以检查整数的最大值，如下所示：

```
console.log([Number.MAX_VALUE, Number.MIN_VALUE]);
//>[1.7976931348623157e+308, 5e-324] 
```

另请参阅有关数字的官方[ECMA 描述](http://ecma262-5.com/ELS5_HTML.htm#Section_8.5)

# asp.net-mvc-3 - 使用数据注释进行 MVC3 验证？

> ID：12530648
> 
> 赞同：1
> 
> 时间：2012-09-21T12:28:00.783
> 
> 标签：asp.net-mvc-3, validation, data-annotations

仅当用户选择的选项与值为 o（零）的选项不同时，是否可以使用数据注释属性来使下拉列表有效。值为o（零）的选项是“请选择一个帐户”，默认选中。我使用 [Required] 属性来验证这个下拉列表，但它没有任何效果，因为，正如我所说，默认情况下，值 o（零）的选项 - “请选择一个帐户” - 被选中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:43:54.617

就像是：

```
[Range(1, int.MaxValue, ErrorMessage = "Please enter a value bigger than {1}")]
public int Value { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:47:40.307

制作一个需要的下拉列表没有意义。您需要的是用户从下拉列表中选择一个非零值。所以应该需要的是 SelectedAccount 属性。您应该使用 MVC 帮助器方法将下拉选择的值绑定到 SelectedAccount 属性：

```
@Html.DropdownListFor(m => m.SelectedAccount, new SelectList(Model.Accounts)) 
```

我可能对语法不了解，但你可以查一下。

现在关于确保值不为零的其他问题。帐号是表示为数字还是可以包含非数字字符？如果它是一个数字，那么您应该在代码中这样表示它。如果它确实是一个字符串，那么下拉列表的第一个值应该是一个空字符串而不是零。

如果您确定它是一个数字，则使用 Range 注释来确保该值大于零：

```
[Required]
[Range(1, Int32.MaxValue)]
public string SelectedAccountNumber {get;set;} 
```

希望有帮助！

# git - Hudson - 将 scm 更改为 git 后，config.xml 中的 svn 标签过时

> ID：12530653
> 
> 赞同：1
> 
> 时间：2012-09-21T12:28:15.090
> 
> 标签：git, svn, version-control, jenkins, hudson

我正在使用 hudson 2.2.0 版从 svn 迁移到 git 后，我​​注意到 subversion 相关标签、源代码位置没有从 config.xml 中删除。（Git 相关标签正确存在）

如果我手动删除不需要的配置，它会在我使用 UI 后重新出现（重新保存） 其他人是否遇到过这个问题？

构建不受此影响。但是我们有一些 perl/python 代码来动态更新配置，这些脚本需要识别作业配置是基于 svn 还是基于 git。这些现在受到影响，因为 config.xml 包含 svn 和 git 相关标签。

我说的是以下标签，它不再与当前工作相关（因为它已移至 git）。

`<scm class="hudson.scm.SubversionSCM">
<locations>
<hudson.scm.SubversionSCM_-ModuleLocation>
<remote> path-to-old-svn-repo
... </scm>`

任何的想法？

谢谢，
加亚瑟里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:52:40.267

如果保留历史构建数据不是最重要的问题，那么当您创建一个新作业并将其配置为从一开始就使用 git 时会发生什么？不要复制作业配置，实际上是从头开始创建它

此外，由于在您的 .xml 中显示了对模块的引用，您可以尝试删除禁用的模块。在工作主页上有一个链接。

# xml - xpath /descendant-or-self - 在特定树中搜索节点

> ID：12530657
> 
> 赞同：4
> 
> 时间：2012-09-21T12:28:24.740
> 
> 标签：xml, xpath, tree, descendant

我正在阅读捷径“//”，这显然是以下方面的捷径：

'/后代或自我'

从这种表达的一个简单例子中可以很清楚地看到什么，例如，

//我的节点

它将返回文档中所有实例的节点列表，从根中找到，称为“myNode”的元素。

但是，更复杂的表达是什么意思，比如：

//aNode//myNode

?

由于 //（是 '/descendant-or-self' 的快捷方式）两次匹配根节点，这是否意味着表达式 '//aNode' 的第一部分是多余的，只会增加完成所需的时间表达式的执行（在整个文档中仍然只找到'myNode'的所有表达式之后）？

'//myNode' 和 '//aNode//myNode' 会产生完全相同的结果吗？

最后，如果我在文档中搜索节点“myNode”的实例，它是节点“interestingTree”的间接后代。但是我不想要节点“myNode”的实例，它是节点“nonInterestingTree”的间接后代，我应该怎么做？

例如，在文档中搜索：

```
<root>
    <anode>
        <interestingTree>
            <unknownTree>
                <myNode/><!-- I want to find this one, not the other, where I don't know the path indicated by 'unknownTree' -->
            </unknownTree>
        </interestingTree>
        <nonInterestingTree>
            <unknownTree>
                <myNode/>
            </unknownTree>
        </nonInterestingTree>
    </anode>
    <anode>
        <someOtherNode/>
    </anode>
</root> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T12:34:09.143

> '//myNode' 和 '//aNode//myNode' 会产生完全相同的结果吗？

是的，在这种情况下，因为 all`myNodes`也是`anode`. 然而，在一般意义上，`//aNode//myNode`显然不会匹配在其祖先树中没有`anode`父节点的节点。

xpath：

```
//aNode//myNode 
```

`aNode`将忽略and之间的任何中间层次结构`myNode`，即它将匹配`/aNode/myNode`, `/anyNodes/anode/myNode`, and`/anyNodes/anode/xyzNode/myNode`

这回答了您的最后一个问题，您可以像这样在有趣的子路径中找到节点：（同样，忽略层次结构中的任何中间元素）

```
//anode//interestingTree//myNode 
```

当然，理想情况下，您应该尽可能明确地使用路径，因为`//`可能会由于需要搜索大量元素而导致性能开销。

**编辑**这可能有帮助吗？

为了清楚起见，我已将您的 xml 输入调整为：

```
<root>
    <anode>
        <interestingTree>
            <unknownTree>
                <myNode>
                    MyNode In Interesting Tree
                </myNode>
            </unknownTree>
        </interestingTree>
        <nonInterestingTree>
            <unknownTree>
                <myNode>
                    MyNode In Non-Interesting Tree
                </myNode>
            </unknownTree>
        </nonInterestingTree>
    </anode>
    <anode>
        <someOtherNode/>
    </anode>
    <bnode>
        <myNode>
            MyNode in BNode
        </myNode>
    </bnode>
</root> 
```

通过样式表解析时：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/">
        Matched by `//myNode`
        <xsl:apply-templates select="//myNode">
        </xsl:apply-templates>

        Matched by `//aNode//myNode`
        <xsl:apply-templates select="//anode//myNode">
        </xsl:apply-templates>

        Matched by `//aNode//interestingTree//myNode`
        <xsl:apply-templates select="//anode//interestingTree//myNode">
        </xsl:apply-templates>
    </xsl:template>

    <xsl:template match="myNode">
        <xsl:value-of select="text()"/>
    </xsl:template>
</xsl:stylesheet> 
```

返回以下内容：

```
Matched by `//myNode`
        MyNode In Interesting Tree
        MyNode In Non-Interesting Tree
    MyNode in BNode

Matched by `//aNode//myNode`
        MyNode In Interesting Tree
        MyNode In Non-Interesting Tree

Matched by `//aNode//interestingTree//myNode`
        MyNode In Interesting Tree 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:08:22.173

你问“'//myNode' 和 '//aNode//myNode' 会产生完全相同的结果吗？”

不必要。第一个将返回`myNode`文档中命名的所有元素；第二个将返回`myNode`作为元素命名的后代出现的所有命名元素`aNode`。在您的示例 XML 中，这两个描述碰巧定义了相同的集合，但在某些 XML 文档中它们不会。

另一方面，表达式`//aNode//myNode`and将始终返回相同的节点集。`//myNode[ancestor::aNode]`

# mysql - 在布尔搜索中过滤掉电子邮件地址

> ID：12530658
> 
> 赞同：1
> 
> 时间：2012-09-21T12:28:25.333
> 
> 标签：mysql

我正在用照片构建一个数据库。通过使用布尔搜索，我得到了使用搜索（短语）的正确图像。

现在我遇到了这个问题：在许多描述中，人或主题的电子邮件地址都被标记了。像**my.name@telenet.be** 现在，当我想查找**Telenet 公司**的图像时，我会得到包含提供商电子邮件地址的所有记录。谁对我的搜索无关紧要。

这是我的搜索示例：

```
SELECT ID,auteur, title, datetaken, description,
keywords,thumbnail,URL,rel_date,showa,initialen,type
FROM archief
WHERE MATCH(description, keywords) AGAINST(' +telenet ' IN BOOLEAN
MODE) AND rechten <> '0' AND showa = '1' AND type >= '2' AND rel_date
<= '20120921' ORDER BY datetaken desc LIMIT 60'
in 'where clause' 
```

我该怎么做才能过滤掉包含`@`符号的搜索短语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:19:20.663

我认为您可以尝试 REGEXP 运算符，因为它看起来像：

```
SELECT *
FROM archief
WHERE
    description REGEXP '[^@]telenet' OR
    keywords REGEXP '[^@]telenet' 
```

此查询应选择所有包含`telenet`字符串的记录，而不是前面`@`的 in `description`or`keywords`字段。

# objective-c - [myArray objectAtIndex:i].kvc 中的属性

> ID：12530662
> 
> 赞同：2
> 
> 时间：2012-09-21T12:28:41.483
> 
> 标签：objective-c, key-value-coding, kvc

任何人都知道此代码之前的 kvc 密钥/密钥路径

```
[myArray objectAtIndex:i].property 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T12:36:16.243

嗯，你可以去的最接近的可能是：

```
[[myArray valueForKey:@"property"] objectAtIndex:i] 
```

因为数组自己没有实现 KVC，所以他们重新定义它以将键应用于元素并返回结果数组。

# xmpp - 在 pidgin 的聊天室中删除输入行和左行

> ID：12530665
> 
> 赞同：10
> 
> 时间：2012-09-21T12:28:59.823
> 
> 标签：xmpp, pidgin

如何在 pidgin 的聊天室中删除“输入”和“左”行？

```
xx left the room (Disconnected: closed).

xx entered the room. 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T00:47:10.587

pidgin 中包含的 Join/Part Hiding 插件可以做到这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-11T22:02:32.017

`Ctrl`+`U`打开插件列表。

向下滚动到“加入/部分隐藏”。选中该框并配置插件。

我将其设置为将这些消息隐藏在超过 2 的房间中。

# android - 发现蓝牙设备列出重复名称

> ID：12530666
> 
> 赞同：4
> 
> 时间：2012-09-21T12:29:09.313
> 
> 标签：android, bluetooth, discovery

我正在使用 DeviceListActivity 来发现蓝牙设备。这是在 Android 蓝牙聊天程序示例中使用的活动。

我在虚拟机上运行程序。

**问题：**当我开始扫描/发现蓝牙设备时：

![在此处输入图像描述](../Images/603c5c07b14791a961935b79714ce525.png)

它列出了重复的设备名称：

![在此处输入图像描述](../Images/fec1c117e4ca8812496ca0570fa12e0a.png)

我有一个可发现的设备，但程序不止一次列出它。

**如何防止列出重复的设备名称？**

活动代码：

```
package com.example.android.BluetoothChat;

import java.util.Set;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.Window;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.AdapterView.OnItemClickListener;

/**
 * This Activity appears as a dialog. It lists any paired devices and
 * devices detected in the area after discovery. When a device is chosen
 * by the user, the MAC address of the device is sent back to the parent
 * Activity in the result Intent.
 */
public class DeviceListActivity extends Activity {
    // Debugging
    private static final String TAG = "DeviceListActivity";
    private static final boolean D = true;

    // Return Intent extra
    public static String EXTRA_DEVICE_ADDRESS = "device_address";

    // Member fields
    private BluetoothAdapter mBtAdapter;
    private ArrayAdapter<String> mPairedDevicesArrayAdapter;
    private ArrayAdapter<String> mNewDevicesArrayAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Setup the window
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        setContentView(R.layout.device_list);

        // Set result CANCELED incase the user backs out
        setResult(Activity.RESULT_CANCELED);

        // Initialize the button to perform device discovery
        Button scanButton = (Button) findViewById(R.id.button_scan);
        scanButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                doDiscovery();
                v.setVisibility(View.GONE);
            }
        });

        // Initialize array adapters. One for already paired devices and
        // one for newly discovered devices
        mPairedDevicesArrayAdapter = new ArrayAdapter<String>(this, R.layout.device_name);
        mNewDevicesArrayAdapter = new ArrayAdapter<String>(this, R.layout.device_name);

        // Find and set up the ListView for paired devices
        ListView pairedListView = (ListView) findViewById(R.id.paired_devices);
        pairedListView.setAdapter(mPairedDevicesArrayAdapter);
        pairedListView.setOnItemClickListener(mDeviceClickListener);

        // Find and set up the ListView for newly discovered devices
        ListView newDevicesListView = (ListView) findViewById(R.id.new_devices);
        newDevicesListView.setAdapter(mNewDevicesArrayAdapter);
        newDevicesListView.setOnItemClickListener(mDeviceClickListener);

        // Register for broadcasts when a device is discovered
        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
        this.registerReceiver(mReceiver, filter);

        // Register for broadcasts when discovery has finished
        filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
        this.registerReceiver(mReceiver, filter);

        // Get the local Bluetooth adapter
        mBtAdapter = BluetoothAdapter.getDefaultAdapter();

        // Get a set of currently paired devices
        Set<BluetoothDevice> pairedDevices = mBtAdapter.getBondedDevices();

        // If there are paired devices, add each one to the ArrayAdapter
        if (pairedDevices.size() > 0) {
            findViewById(R.id.title_paired_devices).setVisibility(View.VISIBLE);
            for (BluetoothDevice device : pairedDevices) {
                mPairedDevicesArrayAdapter.add(device.getName() + "\n" + device.getAddress());
            }
        } else {
            String noDevices = getResources().getText(R.string.none_paired).toString();
            mPairedDevicesArrayAdapter.add(noDevices);
        }
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();

        // Make sure we're not doing discovery anymore
        if (mBtAdapter != null) {
            mBtAdapter.cancelDiscovery();
        }

        // Unregister broadcast listeners
        this.unregisterReceiver(mReceiver);
    }

    /**
     * Start device discover with the BluetoothAdapter
     */
    private void doDiscovery() {
        if (D) Log.d(TAG, "doDiscovery()");

        // Indicate scanning in the title
        setProgressBarIndeterminateVisibility(true);
        setTitle(R.string.scanning);

        // Turn on sub-title for new devices
        findViewById(R.id.title_new_devices).setVisibility(View.VISIBLE);

        // If we're already discovering, stop it
        if (mBtAdapter.isDiscovering()) {
            mBtAdapter.cancelDiscovery();
        }

        // Request discover from BluetoothAdapter
        mBtAdapter.startDiscovery();
    }

    // The on-click listener for all devices in the ListViews
    private OnItemClickListener mDeviceClickListener = new OnItemClickListener() {
        public void onItemClick(AdapterView<?> av, View v, int arg2, long arg3) {
            // Cancel discovery because it's costly and we're about to connect
            mBtAdapter.cancelDiscovery();

            // Get the device MAC address, which is the last 17 chars in the View
            String info = ((TextView) v).getText().toString();
            String address = info.substring(info.length() - 17);

            // Create the result Intent and include the MAC address
            Intent intent = new Intent();
            intent.putExtra(EXTRA_DEVICE_ADDRESS, address);

            // Set result and finish this Activity
            setResult(Activity.RESULT_OK, intent);
            finish();
        }
    };

    // The BroadcastReceiver that listens for discovered devices and
    // changes the title when discovery is finished
    private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();

            // When discovery finds a device
            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                // Get the BluetoothDevice object from the Intent
                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                // If it's already paired, skip it, because it's been listed already
                if (device.getBondState() != BluetoothDevice.BOND_BONDED) {
                    mNewDevicesArrayAdapter.add(device.getName() + "\n" + device.getAddress());
                }
            // When discovery is finished, change the Activity title
            } else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
                setProgressBarIndeterminateVisibility(false);
                setTitle(R.string.select_device);
                if (mNewDevicesArrayAdapter.getCount() == 0) {
                    String noDevices = getResources().getText(R.string.none_found).toString();
                    mNewDevicesArrayAdapter.add(noDevices);
                }
            }
        }
    };

} 
```

**编辑：** 这个问题在我的真实设备（智能手机）上消失了。我不知道为什么模拟器会出现这样的问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-23T12:14:04.793

简单的。要过滤，请使用`Set`.

### 例子

```
HashSet 
```

添加蓝牙地址`HashSet`并使用方法验证`contains()`。

如果`contains()`返回`false`，则将蓝牙数据添加到列表中

如果`contains()`返回`true`，则不要将蓝牙数据添加到列表中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:59:05.040

把这个写在你**的 ACTION_FOUND 里面。**

```
if (mNewDevicesArrayAdapter.size() < 1) {
    mNewDevicesArrayAdapter.add(device.getName() + "\n" + device.getAddress());
    mNewDevicesArrayAdapter.notifyDataSetChanged();
}
else {
    boolean flag = true;    // flag to indicate that particular device is already in the arlist or not
    for(int i = 0; i<mNewDevicesArrayAdapter.size();i++)
    {
        if(device.getAddress().equals(mNewDevicesArrayAdapter.get(i).getAddress()))
        {
            flag = false;
        }
    }
    if(flag == true)
    {
        mNewDevicesArrayAdapter.add(device.getName()+"\n"+device.getAddress());

        mNewDevicesArrayAdapter.notifyDataSetChanged();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-29T10:06:06.993

这个对我有用

```
public class MainActivity extends ActionBarActivity {

    private ListView listView;
    private ArrayList<String> mDeviceList = new ArrayList<String>();
    private BluetoothAdapter mBluetoothAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        listView = (ListView) findViewById(R.id.listView);

        mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        mBluetoothAdapter.startDiscovery();

        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
        registerReceiver(mReceiver, filter);

    }

    @Override
    protected void onDestroy() {
        unregisterReceiver(mReceiver);
        super.onDestroy();
    }

    private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                BluetoothDevice device = intent
                        .getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                mDeviceList.add(device.getName() + "\n" + device.getAddress());
                Log.i("BT", device.getName() + "\n" + device.getAddress());
                listView.setAdapter(new ArrayAdapter<String>(context,
                        android.R.layout.simple_list_item_1, mDeviceList));
            }
        }
    }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-29T07:26:56.403

在 BluetoothDevice.ACTION_FOUND 的 onReceive 中，在将蓝牙设备添加到 Arraylist 之前，使用 ArrayList 的 contains() 方法检查 Arraylist 是否已经包含该设备。仅当 contains() 返回 false 时才将设备添加到列表中。

```
Code is as below:

List<BluetoothDevice> availableDevices = new ArrayList<>();

 class BluetoothReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (action != null) {
            switch (action) {
                case BluetoothDevice.ACTION_FOUND: {
                    // Discovery has found a device. Get the BluetoothDevice
                    // object and its info from the Intent.
                    BluetoothDevice bluetoothDevice =
                            intent.getParcelableExtra(BluetoothDevice
                                    .EXTRA_DEVICE);

                   //Add the device to the list only if contains() returns false.

                    if (!availableDevices.contains(bluetoothDevice)) {
                        availableDevices.add(bluetoothDevice);
                    }

                    displayAvailableDevices();
                    break;
                } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-23T06:24:25.417

它对我有用

```
 @Override
public void onDeviceDiscovered(BluetoothDevice device) {
    listener.endLoading(true);
    devices.contains(device);
    //======================To add only unique device not repeating same device in listView========================
    if(  devices.contains(device)){

    }else {
        devices.add(device);
    }

    //======================End of add only unique device not repeating same device in listView====================
    notifyDataSetChanged();
} 
```

# php - Google 转化跟踪未注册动态值

> ID：12530675
> 
> 赞同：0
> 
> 时间：2012-09-21T12:29:30.233
> 
> 标签：php, javascript, html, magento-1.7

我一直在尝试在 Magento 1.7 上设置转化跟踪。这是我获取动态值并将其添加到 success.phtml 页面的代码：

```
<?php $order = Mage::getSingleton('sales/order');
    $order->loadByIncrementID($this->getOrderId());
    $_totalData = $order->getData();
    $_grand = $_totalData['grand_total'];
    $_grand = number_format($_grand, 1, ".", "");
?>
<!-- Google Code for Successful transaction Conversion Page -->
<script type="text/javascript">
    /* <![CDATA[ */
    var google_conversion_id = XXXXXXXXXX;
    var google_conversion_language = "en";
    var google_conversion_format = "3";
    var google_conversion_color = "ffffff";
    var google_conversion_label = "XXXXXXXXXXX";
    var google_conversion_value = <?php echo $_grand; ?>;
    /* ]]> */
    </script>
    <script type="text/javascript" src="http://www.googleadservices.com/pagead/conversion.js">
</script>
<noscript>
    <div style="display:inline;">
        <img height="1" width="1" style="border-style:none;" alt="" src="http://www.googleadservices.com/pagead/conversion/XXXXXXXXXX/?value=<?php echo $_grand; ?>&amp;label=XXXXXXXXXX&amp;guid=ON&amp;script=0"/>
    </div>
</noscript> 
```

然而，这不起作用，尽管已经看到页面上的代码以及其中的正确值和所有内容。Google 唯一实际注册该值的时间是 10.0 并在 Google Conversions 中特定操作的“设置”面板中进行设置。

任何人都可以对此有所了解吗？有什么我可能错过或没有设置的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:49:08.143

您是否在System -> Configuration -> Google API -> Google Analytics中使用 magento 内置 Google Analytics 功能

if so, then you could just link you google analytics and adwords account (without the need to add any custom code) read more @ [http://support.google.com/adwords/bin/answer.py?hl=en&answer=2375435](http://support.google.com/adwords/bin/answer.py?hl=en&answer=2375435)

# c++ - sql 控制台应用程序中的 MFC 库

> ID：12530677
> 
> 赞同：0
> 
> 时间：2012-09-21T12:29:40.860
> 
> 标签：c++, sql, mfc, linker, libraries

我正在开发将在数据库中插入 blob 文件的应用程序。我正在使用**ODBC**连接到数据库。我还需要使用一些 MFC 库。所以我的问题是为了使用我更改的 MFC 库`proget->Config`。`Setting->General->Use MFC in a shared DLL`，但是当我这样做时，我得到了这个链接错误：

```
InsertBlob.obj : error LNK2019: unresolved external symbol _SQLFreeHandle@8 referenced in function "public: bool __thiscall ODBC::InternalConnect(char *)" (?InternalConnect@ODBC@@QAE_NPAD@Z)
InsertBlob.obj : error LNK2019: unresolved external symbol _SQLDriverConnect@32 referenced in function "public: bool __thiscall ODBC::InternalConnect(char *)" (?InternalConnect@ODBC@@QAE_NPAD@Z) 
```

我只发布了其中两个，但总共有 12 个。如果我将设置改回使用标准 Windows 库，链接错误就会消失，但我不能使用 CString CFile 等。

有没有办法在同一个应用程序中使用它们两个？我是 C++ 新手。

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:51:00.267

使用“在共享 DLL 中使用 MFC”，我还在链接器 - 输入 - 附加依赖项中列出了以下文件：

odbc32.lib odbccp32.lib

这些文件来自 Windows SDK，因此这些文件的路径可能类似于：

C:\Program Files\Microsoft SDKs\Windows\version???\Lib\

# seo - 与发布小型内容网站相关的一般 SEO 策略，目的是为网店增加流量

> ID：12530682
> 
> 赞同：-1
> 
> 时间：2012-09-21T12:30:31.940
> 
> 标签：seo, web-traffic

呼叫所有 SEO 专家！

我工作的网络公司将开始系统地推出一堆 1-5 页的小型网站，以内容为重点，旨在为网络商店增加流量。

这些网站的外观和工作方式与提供产品的附属网站相同。所有产品图片等仅来自 XML 和文本文件。

我们一直在尝试决定如何托管较小的站点。我们的常驻搜索引擎优化“专家”声称我们应该 a）在外部托管网站，b）我们应该在我们有网店的每个国家/地区托管。所以我们的 co.uk 域应该在英国托管，并且我们的 .de 域名应该在德国托管。

这给管理带来了巨大的后勤问题。

我的问题是：真的有必要在外部托管这些小型内容网站吗？我们是否需要将它们传播到上帝的绿色欧洲？

谢谢！

/布莱恩

PS不，我不相信我们常驻SEO“专家”的能力......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:45:40.050

根据我的经验，与 TLD 相比，域名所在的国家/地区没有任何区别。例外情况可能是您的用户的页面加载时间，这是影响 Google 排名的一个因素，但将其放在“附近”就足够了 - 只要您的用户之间的往返行程，它实际上不需要在特定国家/地区和服务器是可以接受的。如果您的客户在德国，那么在美国托管可能没有意义，但英国可能没问题（假设它是一个具有良好互联网连接的好主机等）。

就 SEO 而言，更重要的是拥有一个具有相关信息的良好、干净的站点，该站点可以快速加载，并与其他具有相关信息的良好、干净的站点链接。

# android - Android绘制路径

> ID：12530684
> 
> 赞同：6
> 
> 时间：2012-09-21T12:30:36.710
> 
> 标签：android, performance, path, draw

每次调用 Draw 方法时都构造路径对象不是一个好主意。每次都保持路径对象和清除/设置点更好吗？

更新：还有一个问题——“reset”和“rewind”路径对象有什么区别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T12:43:08.140

是的，最好重置路径并设置点，而不是建立一个新点。这可以防止过度分配内存，从而导致频繁的垃圾收集。当 GC 运行时，图形可能会暂停片刻，尤其是在旧设备上，因此您希望将其保持在最低限度。

和方法都具有几乎相同的效果，除了`reset()`保持[内部数据结构完整](http://developer.android.com/reference/android/graphics/Path.html#rewind%28%29)，这可以提高性能，特别是如果您的路径始终具有相同数量的点。`rewind()``rewind()`

# python - 如何将东西“添加”在一起python

> ID：12530686
> 
> 赞同：2
> 
> 时间：2012-09-21T12:31:01.310
> 
> 标签：python

我写了一个这样的函数，`op`给出了一个类似或更多的操作符号`'+','-','*','/'`，代码“添加”了所有使用给定运算符的东西，

**这是代码：**

```
def arithmetic(op,*args):
  result = args[0]
    for x in args[1:]:
       if op =='+':
           result += x
       elif op == '-':
           result -= x
       elif op == '*':
           result *= x
       elif op == '/':
           result /= x
  return result 
```

有没有办法可以`+,-,*,/`直接使用？所以我不必写 If-Else 语句？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T12:35:33.893

您可以使用相应的[运算符](http://docs.python.org/library/operator.html)：

```
import operator
def arithmetic(opname, *args):
    op = {'+': operator.add,
          '-': operator.sub,
          '*': operator.mul,
          '/': operator.div}[opname]
    result = args[0]
    for x in args[1:]:
       result = op(result, x)
    return result 
```

或更短，带有[`reduce`](http://docs.python.org/library/functools.html#functools.reduce)：

```
import operator,functools
def arithmetic(opname, arg0, *args):
    op = {'+': operator.add,
          '-': operator.sub,
          '*': operator.mul,
          '/': operator.div}[opname]
    return functools.reduce(op, args, arg0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T12:33:55.057

我认为您正在寻找与以下内容`reduce`相结合的内置函数`operator`：

```
import operator
a = range(10)
reduce(operator.add,a) #45
reduce(operator.sub,a) #-45
reduce(operator.mul,a) #0 -- first element is 0.
reduce(operator.div,a) #0 -- first element is 0. 
```

当然，如果你想使用字符串来做到这一点，你可以使用 dict 将字符串映射到一个操作：

```
operations = {'+':operator.add,'-':operator.sub,} # ... 
```

然后它变成：

```
reduce(operations[your_operator],a) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:35:35.900

对于`+`操作员，您具有内置`sum`功能。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-21T12:37:40.423

您可以使用执行：

```
def arithmetic(op, *args):
 result = args[0]
 for x in args[1:]:
   exec('result ' + op + '= x')
 return result 
```

# java - 从 Java 运行时的 SVN Info 命令与在终端中运行时不同

> ID：12530689
> 
> 赞同：0
> 
> 时间：2012-09-21T12:31:05.627
> 
> 标签：java, svn, exec, runtime.exec

我正在使用`svn`来自 Java 的命令来获取有关工作副本的信息。

```
final Process exec = Runtime.getRuntime().exec(
    new String[]{"svn","info","--xml","/path/to/wc"}
);
ByteStreams.copy(exec.getErrorStream(), System.err);
// ... more code to read output 
```

这给出了错误输出

```
/path/to/wc
:  (Not a versioned resource) 
```

但是，如果我在终端窗口中运行相同的命令，我会得到我想要的输出。在终端中运行时，我还尝试排除环境：

```
env -i svn info --xml /path/to/wc 
```

但输出仍然是正确的。为什么从 Java 运行时它的行为会有所不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:46:17.350

真实`/path/to/wc`的在它的末尾有一个换行符。如果我更熟悉 SVN 错误输出，我可以看到它：

```
/path/to/wc
:  (Not a versioned resource) 
```

注意前面的换行符`:`

`exec("readlink -m " + path)`我通过用纯 Java替换早期偶然发现了这一点`path.getCanonicalName()`。

# ruby-on-rails - 开发生成 HTML 的辅助函数：我应该使用嵌套的 content_tag()s 还是 partials？

> ID：12530692
> 
> 赞同：3
> 
> 时间：2012-09-21T12:31:15.533
> 
> 标签：ruby-on-rails, gem, rails-engines

我正在开发一个 Rails 引擎（和 gem），它应该提供许多为视图生成 HTML 的小帮助函数。

现在我想知道是否建议使用许多嵌套`content_tag`调用来生成 HTML，或者仅依赖部分更实用。

在我看来，第一种方法可能更干净（但性能较慢），但第二种方法似乎更容易做到，所以我想我会喜欢第二种方法。你们有什么感想？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:36:16.807

> 许多嵌套`content_tag`调用

听起来好像您不应该在助手中执行此操作。1 或 2 级标签是我个人的限制，高于此我会选择部分。

这只是我的感觉，这里不涉及任何理论:-)

# matlab - 如何在 matlab 中求解 n*log2(n)=A？

> ID：12530696
> 
> 赞同：3
> 
> 时间：2012-09-21T12:31:34.663
> 
> 标签：matlab, equation-solving

`n*log2(n) = A`，具有`A`已知值。`n`Matlab中如何求解？请注意，这`n`不是整数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T13:20:06.313

或[解析方程](http://www.wolframalpha.com/input/?i=n%2alog2%28n%29=A)并使用它：

```
n = A*log(2)/lambertw(A*log(2)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T12:43:28.017

不是最优雅的解决方案，但您可以使用[fmincon](http://www.mathworks.com/help/optim/ug/fmincon.html)

```
n = fmincon(@(N) abs(N*log2(N)-A),10, [],[],[],[],1,Inf) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T14:26:40.120

只需使用`fzero`：

```
solution = fzero(@(n) n.*log2(n)-A, A/5); 
```

通过检查解决方案在 0-1000 区间内的行为，我凭经验找到了最初的猜测；您可能需要针对您的用例进行调整。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T14:18:00.803

如果您安装了 Symbolic Math Toolbox，您只需要：

```
solve('n*log2(n)=A', 'n')

ans =
    (A*log(2))/lambertw(0, A*log(2)) 
```

您还可以`solve`使用`syms`：

```
syms n A

solve(n*log2(n)==A, n) 
```

之后`syms n A`还可以定义 的值`A`：

```
A = 0
solve(n*log2(n)==A, n)

ans =
    1

A = 2
solve(n*log2(n)==A, n)

ans =
    2

A = 3
solve(n*log2(n)==A, n)

ans =
    (3*log(2))/lambertw(0, 3*log(2)) 
```

# entity-framework - 如何验证 PO Detail 数量是否超过 PoOrder 数量？

> ID：12530698
> 
> 赞同：1
> 
> 时间：2012-09-21T12:31:39.787
> 
> 标签：entity-framework, ef-code-first

我的问题是，如果 PoOrder 表中的数量超出，如何在添加新数据之前先验证 PoDetail 表中的数量？如果我是对的，这是我想要创建的业务规则。我正在使用 asp.net mvc 4，EF 代码优先和存储库模式。

这是一个示例数据。

```
INSERT INTO PoOrders
SELECT 1,'PO123',5000

INSERT INTO PoDetails
SELECT 1,1,2500
UNION ALL
SELECT 2,1,2000 
```

如果我尝试添加新的 PoDetail（例如，数量为 1000），它必须显示一条消息或阻止添加新记录。

POCO 类

```
public class PoOrder
{
    [Key]
    public int PoID { get; set; }

    public string PoNumber { get; set;}

    public int PoQty {get; set;}
 }

 public class PoDetail
 {
    [Key]
    public int ID { get; set; }
    public int Po_ID {get; set;}
    public int ReleaseQty { get; set;}

    [ForeignKey("Po_ID")]
    public virtual PoOrder PoOrders { get; set; }     
 } 
```

非常感谢任何提示或解决方案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:59:16.113

`PoOrder`首先，拥有一个`PoDetails`收藏似乎更合适。假设你改变它，这会做你想要的：

```
var query = 
    from o in PoOrders
    where o.PoId == orderId
    select new { o.PoQty, SumQty = o.PoDetails.Sum(d => d.ReleaseQty) };

var orderData = q.Single();
if (orderData.PoQty < orderData.SumQty + newQty)
    // message 
```

其中`orderId`和`newQty`是两个变量，分别包含订单的 id 和要添加的数量。

# ios - 将格式奇怪的日期转换为格式良好的日期

> ID：12530701
> 
> 赞同：0
> 
> 时间：2012-09-21T12:31:46.860
> 
> 标签：ios, xcode

我查看了 apples api，并且正在弄清楚如何转换表示日期和时间的字符串，如下所示：

2012-02-09 18:58:25

进入如下所示的日期和时间：

2012 年 9 月 2 日下午 6 点 59 分。

我该怎么做呢？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:34:05.150

这里将使用 NSDateFormatter 对象，我在评论中包含了文档的链接。

# android - 允许用户将项目添加到 Android 中的菜单？

> ID：12530703
> 
> 赞同：0
> 
> 时间：2012-09-21T12:31:54.383
> 
> 标签：android, xml, contextmenu, add

我正在尝试为用户添加将项目添加到上下文菜单的功能。

菜单的 XML 数组当前为：

```
<array name="serverchoice">
    <item>@string/chicago_server</item>
    <item>@string/london_server</item>
    <item>@string/sanjose_server</item>
    <item>@string/washington_server</item>
    <item>@string/chicagoq_server</item>
    <item>@string/londonq_server</item>
    <item>@string/sanjoseq_server</item>
    <item>@string/washingtonq_server</item>
</array> 
```

如您所见，它是服务器列表，我希望用户能够添加自己的服务器，而不必使用预设服务器。

我创建了一个带有文本框和按钮的页面，以便用户可以输入服务器。当用户单击添加服务器按钮时，我希望将条目添加到列表中。

单击时我当前处理菜单项的方式如下：

```
 // Choose Server method

    private void openServerDialog() {
        new AlertDialog.Builder(this)     
        .setTitle(R.string.server_title)  
        .setItems(R.array.serverchoice,   
                new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialoginterface,
                    int i) {
                setServer(i);   
            }
        })
        .show();
    }

private void setServer(int i) {   

        if (String.valueOf(i).equals("0")){
            CustomServer.setText("mcsord.visualware.com");
        }
        else if (String.valueOf(i).equals("1")){
            CustomServer.setText("mcslhr.visualware.com");
            }
        else if (String.valueOf(i).equals("2")){
            CustomServer.setText("mcssjc.visualware.com");
            }
        else if (String.valueOf(i).equals("3")){
            CustomServer.setText("mcsiad.visualware.com");
            }
        else if (String.valueOf(i).equals("4")){
            CustomServer.setText("qualitytestord.visualware.com");
            }
        else if (String.valueOf(i).equals("5")){
            CustomServer.setText("qualitytestlhr.visualware.com");
            }
        else if (String.valueOf(i).equals("6")){
            CustomServer.setText("qualitytestsjc.visualware.com");
            }
        else if (String.valueOf(i).equals("7")){
            CustomServer.setText("qualitytestiad.visualware.com");
            }

} 
```

所以我的下一个问题是我将如何处理新条目。

无论哪种方式，第一步都是将新条目添加到列表中。

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:41:11.413

创建一个包含 2 个编辑文本的警报对话框；一个用于名称，另一个用于 URL；然后用它来引入一个新条目；[就像它在这个例子](http://www.mkyong.com/android/android-prompt-user-input-dialog-example/)中提到的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:19:01.297

您将无法将用户的输入存储到包含您静态创建的服务器的数组资源中。您必须将用户输入的服务器存储到您保存到手机内存、SQLite 数据库或使用共享首选项（推荐）的文件中。[http://developer.android.com/guide/topics/data/data-storage.html]。

在回答您的第二个问题时，我可能采用了不同的整体方法。

在您的应用程序的入口点中，使用共享首选项设置您的系统

```
// Shared Preference string
public static final String PREFS = "SomeName";
// Editor to customize preferences
private Editor settingsEditor;
// Shared preference
private SharedPreferences prefs;
//list that will hold all the servers for the menu
private ArrayList<String> menuList = new ArrayList<String>(); 
```

在您的 onCreate 方法中（用户第一次打开应用程序时），您将把定义的服务器名称放入系统中

```
prefs = getSharedPreferences(PREFS, MODE_PRIVATE);

// Get shared preferences and set up the preference editor
settingsEditor = prefs.edit();

// See if the app has been initialized
if (!prefs.getString("initialized", "").equals("yes")) {

settingsEditor.putString("server0","mcsord.visualware.com");
settingsEditor.putString("server1","mcslhr.visualware.com");   

//...do the above step to put the rest of them in
settingsEditor.putInt("menuItemsCount",8);
settingsEditor.putBoolean("initialized", true);
settingsEditor.commit();
} 
```

之后，您将要填充菜单列表

```
int i = prefs.getInt("menuItemCount", 0);
for(j = 0; j < i; j++)
     menuList.add(prefs.getString("sever" + j,""); 
```

现在您要做的是在用户打开页面后，输入他们的服务器名称并单击按钮： 如果它是同一活动中的对话框，您可以将其添加到列表和共享首选项中 如果它在另一个活动中，通过意图发送它，覆盖 onActivityResult 方法，然后将字符串添加到列表和共享首选项中。

在您的 onCreateContextMenu 方法中，遍历包含所有服务器的列表并将它们添加到您的菜单中。最后你可以在你的代码中做到这一点

```
private void openServerDialog() {
         new AlertDialog.Buildr(this)
              .setTitle(R.string.server_title)
              .setItems(R.array.serverchoice,
              new DialogInterface.OnClickListener(){
                  public void onClick(DialogInterface dialoginterface,
                  int i) {
                     CustomServer.setText(menuList.get(i));
              }
          }).show();
} 
```

希望这可以帮助。

# android - Android水平滚动和水平翻转

> ID：12530708
> 
> 赞同：-1
> 
> 时间：2012-09-21T12:32:02.763
> 
> 标签：android, scroll, horizontal-scrolling, flip

我有一个 webview，我在其中加载图像。

当我放大时，我希望用户滚动查看其余内容。但是当我水平滚动时，会触发水平翻转。

有没有办法阻止这一切？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:34:09.027

这个博客在这件事上非常有用：[Preserving screen state in WebView](http://www.devahead.com/blog/2012/01/preserving-the-state-of-an-android-webview-on-screen-orientation-change/)。它甚至适用于 JavaScript 变量等。

# c# - 启动自定义屏保+锁机

> ID：12530711
> 
> 赞同：0
> 
> 时间：2012-09-21T12:32:42.350
> 
> 标签：c#, wpf

在我的应用程序中，当用户想要休息并单击注销按钮时，我想完成两件事。

1.  锁定机器
2.  启动一个自定义屏幕保护程序，显示用户注销的时间。

我设法通过以下方式轻松完成锁定：

```
[DllImport("user32.dll")]
private static extern void LockWorkStation(); 
```

我找到了有关如何制作自定义屏幕保护程序的[教程。](http://www.harding.edu/fmccown/screensaver/screensaver.html)我下载了示例代码，它运行良好。但是当我添加**LockWorkStation();** 行它杀死了屏幕保护程序。

你能帮我解决这个问题或建议一个解决方法吗？

**编辑**

教程中的这个屏幕保护程序只是 w WinForm。我应该以某种方式将其安装到系统中吗？是否有可能形成我的应用程序级别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:37:57.130

最有可能的解决方案如下：

1.  锁定工作站
2.  显示屏幕保护程序

对于第二步，以下内容很重要：

您的应用程序只是一个显示窗口的程序。因此，当工作站被锁定时，它尝试显示的任何窗口都不会显示给用户。[仅当您将程序注册](https://stackoverflow.com/questions/5282456/how-to-install-screensaver-programmatically)为真正的屏幕保护程序，将其设置为当前屏幕保护程序并启动它（例如使用消息）
时，才会显示您的窗口。[`SC_SCREENSAVE`](https://stackoverflow.com/questions/267728/launch-system-screensaver-from-c-sharp-windows-form)

# jquery - 使用 jquery 调整窗口大小的框

> ID：12530716
> 
> 赞同：0
> 
> 时间：2012-09-21T12:33:32.457
> 
> 标签：jquery, each, window-resize

这是一个[jsfiddle](http://jsfiddle.net/YZKZL/) ，您可以在其中看到以下代码。

`window resize`触发事件时，我尝试使用 jquery 调整选定框的大小。

但只有第**一个**带有“选定”类的框受到影响。为什么是这样？

我怎样才能使具有相同班级的其他盒子工作？

**html**

```
 <ul class="selection">
        <li class="selected">selected 1</li>
        <li>2</li>
        <li class="selected">selected 3</li>
        <li class="selected">selected 4</li>
        <li>5</li>
        <li class="selected">selected 6</li>
    </ul>​ 
```

**jQuery**

```
 $(window).resize(function(){

        $(".selected").each(function() {

            //Define ratio & minimum dimensions
            var minwidth = .5*(1024);
            var minheight = .5*(600);
            var ratio = 600/1024;

            //Gather browser and current size
            var imagewidth = $(this).width();
            var imageheight = $(this).height();
            var browserwidth = $(window).width();
            var browserheight = $(window).height();

            //Check for minimum dimensions
            if ((browserheight < minheight) && (browserwidth < minwidth)){
               $(this).height(minheight);
               $(this).width(minwidth);
            }
            else
            {    
             //When browser is taller    
             if (browserheight > browserwidth){
             imageheight = browserheight;
             $(this).height(browserheight);
             imagewidth = browserheight/ratio;
             $(this).width(imagewidth);

                 if (browserwidth > imagewidth){
                   imagewidth = browserwidth;
                   $(this).width(browserwidth);
                   imageheight = browserwidth * ratio;
                   $(this).height(imageheight);
                 }

               }

                    //When browser is wider
                    if (browserwidth >= browserheight){
                        imagewidth = browserwidth;
                        $(this).width(browserwidth);
                        imageheight = browserwidth * ratio;
                        $(this).height(imageheight);

                        if (browserheight > imageheight){
                            imageheight = browserheight;
                            $(this).height(browserheight);
                            imagewidth = browserheight/ratio;
                            $(this).width(imagewidth);
                        }
                    }
                }
                return false;
            });

            });

​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:36:10.547

删除`return false;` 最后的：此语句`each`在第一次执行后打破循环

小提琴示例：http: [//jsfiddle.net/YZKZL/1/](http://jsfiddle.net/YZKZL/1/)

# internet-explorer - GCF 中的 IE=Edge 有什么用？

> ID：12530723
> 
> 赞同：7
> 
> 时间：2012-09-21T12:34:15.950
> 
> 标签：internet-explorer, meta-tags, google-chrome-frame

谷歌 chrome 框架[开发者指南](http://goo.gl/GRNYi)说，

> 以下完整示例表明 IE6 用户使用 Google Chrome Frame，否则将“Edge”参数传递给更高版本的 IE：

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=IE6"> 
```

“将 EDGE 参数传递给更高版本的 IE”是什么意思？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T12:38:12.260

来自 MSDN[定义文档兼容性](http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx#setmode)

> 文档兼容性模式允许您控制 Internet Explorer 解释和显示您的网页的方式
> 
> 指定`IE=edge`指示 IE 为已建立和新兴的行业标准使用最高可用引擎。

例如，在 IE9 中，引擎的最高版本是 9（IE8 的最高版本也是 8），但 IE9 也可以使用 IE8、IE7 或 IE5 引擎（带有所有旧错误）渲染网页，而 IE8 可以也像 IE7 或 IE5 那样渲染页面。

如果您有一个专为 IE7 设计的页面，但用户现在使用的是 IE9，则有分页符；与其更新所有代码以与这两种引擎一起使用，不如添加`<meta>`标签指定 IE9 使用 IE7 引擎。

Chrome 框架建议建议使用此方法来验证代码对新版本 IE 的影响。通过指定*“使用最新版本”*，您不会将页面限制为特定版本的 IE。

在您的问题的上下文中，我不认为使用*Edge*特定于 GCF，而是对 IE 的说明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T12:37:35.303

它使 IE 使用最新版本的渲染引擎。

[http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T13:58:08.800

> [http://msdn.microsoft.com/en-us/library/jj676915(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/jj676915%28v=vs.85%29.aspx)
> 
> 注意边缘模式仅用于测试目的；不要在生产环境中使用它。

# java - 查找并删除数组中的 int 重复项

> ID：12530725
> 
> 赞同：1
> 
> 时间：2012-09-21T12:34:29.943
> 
> 标签：java, arrays, duplicate-removal

首先，我知道已经有很多重复的答案，但我找不到我想要的，甚至在谷歌中搜索。这是面试时提出的问题。

所以，对于我的问题：我有下一个 int 数组：

`int[] array = {1, 1, 1, 2, 2, 3, 4, 4, 4, 5, 5, 6, 7, 7, 8, 8, 9, 9};`

**编辑：**您可以假设数组已排序。

我只想获得不同的值，而不是重复的，这意味着：

```
array = {1, 2, 3, 4, 5, 6, 7, 8, 9, ......}; 
```

**编辑：** 假设您不需要缩小数组，而是按排序顺序返回值，并在最后返回其余值。

有几个说明：

1.  不要使用任何其他或新数组，这意味着使用相同的数组来返回结果。
2.  不要使用任何集合，如 Set 或 ArrayList。
3.  让它尽可能地有用。

我试过用 Set 来做这件事，但现在我想要一些不同的东西。还尝试用 -1 值替换重复值，但这仅在我假设我仅使用正值时才成立。

如果您发现相同的问题，请告诉我，我将删除此问题。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T12:38:16.903

如果它们是有序的，那并不是非常困难。

```
/**
 * removes duplicates in the provided sorted array
 * @return the number of different elements (they're at the beginning)
 */
public static int shrink(int[] array) {
    int w = 0;
    for (int i=0; i<array.length; i++) {
      if (i==0 || array[i]!=array[i-1]) {
          array[w++]=array[i];
      }
    }
    return w;
} 
```

在那之后，只有第一个`w`元素是有趣的。

# svn - Assembla SVN 结帐错误

> ID：12530735
> 
> 赞同：1
> 
> 时间：2012-09-21T12:35:11.070
> 
> 标签：svn, assembla

我在做的时候收到以下错误`svn checkout`：

> 身份验证领域：[https](https://subversion.assembla.com:443) ://subversion.assembla.com:443 （空）
> “...”的密码：
> 中止陷阱：6

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:56:09.173

这看起来像一个 svn 客户端核心转储。

您使用什么来检查您的 svn 存储库以及您使用的是什么操作系统？您可以在网络浏览器中对您的 svn 存储库进行身份验证吗？当您从另一台计算机或客户端尝试它时会发生什么？

您可能需要完全重新安装您的客户端或 libsvn。

# javascript - jQuery单击处理程序在尝试使用对象标记时触发一次

> ID：12530736
> 
> 赞同：0
> 
> 时间：2012-09-21T12:35:11.803
> 
> 标签：javascript, jquery

我在使用下面的代码时遇到问题：

```
$('#thing1').on('click',function() {
    writeNewHtml(parm1, 550, 925);
}); 
```

这每次都有效，除非我尝试使用如下对象标签：

```
function writeNewHtml(parm1, height, width) {
     $('#div').html("object/embed tag");
} 
```

所以我的问题是，是否有任何理由说明在使用对象标签时它只写入一次内部 html，但如果我使用任何其他标签，它会按预期工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:16:06.567

在您的 jsfiddle[链接](http://jsfiddle.net/ajsehr/2KdRC/8/)中，您可以看到您在绑定 onClick 事件之前使用了“可选”插件。这使得到该对象的任何其他 onclick 绑定都已过时。**删除以下代码**将使其工作，但您将无法再在“Thing 1”和“Thing 2”元素上使用可选插件：

```
$('#thing1').selectable();
$('#thing2').selectable(); 
```

# android - android RegEx 外部 GPS 字符串

> ID：12530737
> 
> 赞同：0
> 
> 时间：2012-09-21T12:35:13.620
> 
> 标签：android, regex, gps

我在从外部 GPS 流中获取的字符串中分离信息时遇到问题。

下面是一个字符串的例子：

```
$GPGSV,3,3,12,22,09,276,31,25,24,247,24,27,54,131,,32,04,359,19*71
$GPGLL,5703.85365,N,00953.88360,E,075510.00,A,A*69
$GPPWR,028a,1,0,1,1
$GPRMC,075511.00,A,5703.85369,N,00953.88430,E,0.335,302.17,070912,,,A*6E
$GPVTG,302.17,T,,M,0.335,N,0.621,K,A*3A 
```

我想做的是把“ `$GPGLL,5703.85365,N,00953.88360,E,075510.00,A,A*69`”拿出来，这样我就可以抓住经度和纬度，然后用它更新我的文本视图。但是不断地从 bounch exeption 中获取字符串，我开始怀疑我是否以错误的方式处理这个问题。

任何人都可以让我在如何解决这个问题上朝着正确的方向前进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T21:35:13.390

这是一种直接从 GPS 处理 NMEA 语句的方法：

```
 // Listener for NMEA sentences
public void  onNmeaReceived(long timestamp, String nmea) {
            // Split the sentence into its comma-separated pieces
    String [] sentence = nmea.split(",");
            // See if it's the sentence we're interested in
    if(sentence[0].equalsIgnoreCase("$GPGLL")) {
    /* In here, process the data components of the sentence, which will
               be in sentence[1], sentence[2], etc. */
        }
    }
} 
```

# sql - 将单个触发器应用于相同的表

> ID：12530739
> 
> 赞同：2
> 
> 时间：2012-09-21T12:35:21.927
> 
> 标签：sql, sql-server, tsql, triggers, sql-server-2008-r2

我可以将单个触发器应用于某些表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:38:07.647

触发器是**每个表的**- 您不能共享它们。

如果您需要五个表上的触发器 - 您需要创建五个触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:44:10.887

如果您有在触发器之间共享的功能，那么您可以构建一个存储过程并从您必须为每个表构建的触发器中调用它。

# php - 在 Symfony 2.1 中作为增强键/值形式的 Doctrine MongoDB Hash 类型

> ID：12530740
> 
> 赞同：0
> 
> 时间：2012-09-21T12:35:30.570
> 
> 标签：php, mongodb, symfony, symfony-forms, symfony-2.1

我在 MongoDB 中有一个作为哈希类型的映射，名为“meta_info”，它只包含一些东西的键/值列表，我想将它变成 Symfony2 中可以动态增强（使用 js）的表单，拥有它看起来（基本上）像这样：

```
<input type="text" name="meta_info[key][]" /><input type="text" name="meta_info[field][]">   [- remove row]
<input type="text" name="meta_info[key][]" /><input type="text" name="meta_info[field][]">   [+ add row] 
```

我的第一个想法是制作两个可以使用 js 复制的文本字段（键/值）（这不是问题），并在我的 Document 类的 setter 方法中转换为 json 字符串并转换回数组。但这似乎有点肮脏..

我也在考虑嵌入表单（现在在 sf2.1 中嵌入文档效果很好！） - 但我不知道如何为简单的键/值哈希实现这一点（它也应该像存储在 mongodb 中一样)

感谢您的任何想法和方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:31:27.867

从 Symfony 表单的角度考虑这一点，您可能希望拥有一个内部表单的动态[集合](http://symfony.com/doc/current/reference/forms/types/collection.html)，每个表单都有键和值输入字段。我想不出另一种实现来处理这种情况，因为您基本上通过使用哈希字段来超越任何模式的概念。这主要是这种情况与 ODM 中的嵌入式文档（具有映射）的区别，即使 MongoDB 将以相同的方式存储（嵌套对象）。

一种替代实现是拥有包含键和值属性的文档的 EmbedMany 关系。OpenSky 在内部使用它来表示产品属性。它在 MongoDB 文档中消耗了更多存储空间，因为您有一个带有`key`和`value`字段的对象数组，而不是键/值对的单个对象，但有一些明显的好处：

*   可以映射结构，这与您现有的 ODM 模式很好地配合。
*   因为每个键/值对都有一个模型，所以用 Symfony 形式来表示它更自然。
*   也许最重要的是，如果您要按此数据进行查询，您可以利用[多键索引](http://www.mongodb.org/display/DOCS/Multikeys)来索引动态键和值，然后使用`$elemMatch`查询进行键/值查找。如果您只是使用带有动态键的哈希字段，则没有直接的方法来索引多个键（每个不同的字段路径都需要显式索引，或在复合索引中显式提及）。

# akka - Akka 和会话 Bean

> ID：12530747
> 
> 赞同：2
> 
> 时间：2012-09-21T12:35:58.970
> 
> 标签：akka, actor, typesafe-stack

[Typesafe 白皮书 (v5)](http://typesafe.com/resources/typesafe-stack-whitepaper)指出：

“在不同的场景中，actor 可以替代：线程；Java EE 会话 bean；......”

我不明白actor如何替代会话bean，因为它们的工作方式完全不同：通过向它传递消息来串行调用一个actor，它按照发送的顺序一次处理一个消息。这意味着actor内部任何业务逻辑的运行都是同步的。另一方面，会话 bean 是池化的——它们有很多，并且多个线程可以随时运行相同的业务逻辑，这意味着逻辑是同时运行的。

谁能澄清我对这个声明的误解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:53:56.333

过多的 ejb 并发通常会导致各种锁争用和性能下降。

同时 akka 是针对异步处理和 nio 的。当线程数接近 CPU 内核数时，这种方法最有利。

请注意，akka 并不强制执行一个处理线程。参见例如[Akka 控制线程池线程](https://stackoverflow.com/questions/6855154/akka-control-threadpool-threads)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:59:45.787

您可以汇集 Actors（子代）或 Akka 路由器后面（技术上也是子代），这样您就可以调整“并发”。

# tsql - 案例 - 查询优化

> ID：12530755
> 
> 赞同：0
> 
> 时间：2012-09-21T12:36:19.723
> 
> 标签：tsql

我有这个查询：

```
INSERT INTO #t1 (VALUE1, VALUE2)
SELECT 
CASE
WHEN EXISTS(SELECT * FROM T2)
THEN SELECT VALUE1, VALUE2 FROM T2
END 
```

这不起作用，我得到：“INSERT 语句的选择列表包含的项目少于插入列表。SELECT 值的数量必须与 INSERT 列的数量相匹配。”

相反，我必须使用：

```
INSERT INTO #t1 (VALUE1, VALUE2)
SELECT 
CASE
WHEN EXISTS(SELECT * FROM T2)
THEN SELECT VALUE1 FROM T2
END

CASE
WHEN EXISTS(SELECT * FROM T2)
THEN SELECT VALUE2 FROM T2
END 
```

但这会降低性能。有没有办法正确地做到这一点？在单个 CASE 中，受益于对第二个表 t2 的 sinqle 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:41:26.053

EXISTS(SELECT * FROM T2) 没有做任何事情并且语法错误

尝试这个：

```
INSERT INTO #t1 (VALUE1, VALUE2)
SELECT VALUE1, VALUE2 FROM T2 
```

这也是有效的，虽然不是很有用，但它似乎是你想要做的：

```
INSERT INTO #t1 (VALUE1, VALUE2)     
SELECT VALUE1, VALUE2 FROM T2
WHERE exists (SELECT 1 FROM T2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:41:33.127

为什么不：

```
INSERT INTO #t1 (VALUE1, VALUE2)
SELECT VALUE1, VALUE2 FROM T2 
```

如果 T2 中没有行，则不会将任何内容插入 #t1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:41:56.113

只需简化：

```
INSERT INTO #t1 (VALUE1, VALUE2)
SELECT VALUE1, VALUE2
FROM T2 
```

没有行的情况在这里也没有*任何作用*。你不需要为此做一个特殊的测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T12:43:56.400

你不能使用类似的东西

```
 INSERT INTO #t1 (VALUE1, VALUE2)
  SELECT value1, value2 from #t2 WHERE NOT (value1 IS NULL AND value2 IS NULL) 
```

反而？

否则你的意图可能是

```
 INSERT INTO #t1 (VALUE1)
  SELECT CONCAT(value1, value2) from t2 Couldn't you use something like 

  INSERT INTO #t1 (VALUE1, VALUE2)
  SELECT value1, value2 from t2 WHERE NOT (value1 IS NULL AND value2 IS NULL) 
```

反而？

否则你的意图可能是

```
 INSERT INTO #t1 (VALUE1)
  SELECT value1, value2 from #t2 WHERE NOT (value1 IS NULL AND value2 IS NULL) 
```

如果 t2.value2 为空，这会导致在 t1.value1 中插入“t2.value2”

# php - 使用 ghostscript 输出文件目录

> ID：12530761
> 
> 赞同：2
> 
> 时间：2012-09-21T12:36:42.853
> 
> 标签：php, pdf, jpeg, ghostscript

我需要使用 php 将 PDF 文件解析为图像。我在ghostscript的帮助下完成了它。这是脚本：

```
$result = exec("gs -sDEVICE=jpeg -sOutputFile=%03d.jpeg $pdfname.pdf"); 
```

但我需要将最终图像放在另一个文件夹中。我尝试过以很多类似的方式编写`-sOutputFile=/img/%03d`或`-sOutputFile=img/%03d`...但是当我添加这些东西时，程序甚至都无法工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:54:02.780

您需要在运行 Ghostscript**之前**`/img/`创建或`./img`目录。

 **如果它们不存在，Ghostscript 不会自动创建它们。**

# tomcat - 如何将 Play 2 应用程序部署到 Tomcat？

> ID：12530766
> 
> 赞同：4
> 
> 时间：2012-09-21T12:37:20.873
> 
> 标签：tomcat, playframework-2.0

是否可以将 Play 2 应用程序部署到 Apache Tomcat？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T12:41:25.847

Play 2.0 本身并不支持 Tomcat 部署，但有一个插件可以创建 WAR 包以部署在 Tomcat 上：[https ://github.com/dlecan/play2-war-plugin/](https://github.com/dlecan/play2-war-plugin/)

# c# - 多播委托的返回类型必须为 void。为什么？

> ID：12530767
> 
> 赞同：9
> 
> 时间：2012-09-21T12:37:24.930
> 
> 标签：c#, delegates, multicastdelegate

Multicast Delegates 的返回类型必须为 void 否则会抛出异常。

我想知道它背后的原因是什么，如果多个方法可以具有与委托相同的返回类型怎么办？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-21T12:45:24.033

前提是错误的；它工作正常：

```
Func<int> func = delegate { Console.WriteLine("first part"); return 5; };
func += delegate { Console.WriteLine("second part"); return 7; };
int result = func(); 
```

那是一个具有非空结果的多播委托，工作正常。您可以从控制台看到这两个部分都已执行。*最后*一项的结果是返回的。我们可以证明这是一个真正的多播委托：

```
if(func is MulticastDelegate) Console.WriteLine("I'm multicast"); 
```

*即使在第一行之后*它也会写“我正在多播” （当只列出一个方法时）。

如果您需要对单个结果进行更多控制，请使用`GetInvocationList()`：

```
foreach (Func<int> part in func.GetInvocationList())
{
    int result = part();
} 
```

这使您可以查看每个单独的结果。

在 IL 术语中：

```
.class public auto ansi sealed Func<+ TResult>
    extends System.MulticastDelegate` 
```

也就是说：`Func<T>`继承自`MulticastDelegate`. 基本上，就所有意图和目的而言， .NET 中的**所有**委托都是多播委托。您*可能*能够在托管 C++ 中获得非多播委托，我不知道。但肯定不是来自 C#。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T12:38:27.943

*以下答案实际上是错误的，因为您目前*可以*拥有具有非 void 返回类型的多播委托（关于这是否一直如此，尚无定论）。但是，它确实回答了“为什么一种语言不允许这样的代表？”这个问题，所以为了完整起见，我将其保留。*

*现在去投票给马克。*

* * *

因为多个方法会返回多个值，那么委托的一个返回值应该是什么呢？显然，没有任何答案可以在所有情况下都令人满意。您可以争辩说多播委托应该：

*   按调用顺序返回第一个方法的值（但未指定 IIRC 调用顺序，那么这将如何工作？）
*   返回最后一个方法的值，如上
*   返回所有委托返回的单个不同值；如果不是所有人都同意，则抛出异常

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-30T05:44:58.443

在多播中，问题是它覆盖所有值，如果它具有返回类型，则只打印最后一个方法值，因此您必须逐个捕获返回类型，让我们看看下面的代码

```
 class Program
{
    // i am going to add and subtract two num but i wanna get result in string the same thing you can do for int and what ever you want
      delegate string mydeledagte(int a,int b);
      delegate string d(int s, int t);
    static void Main(string[] args)
    {
        mydeledagte ab = new mydeledagte(ad);
        mydeledagte d= new mydeledagte(sub);
        mydeledagte multi = ab + d;

        foreach (mydeledagte individualMI in multi.GetInvocationList())
        {
            string retVal = individualMI(3, 5);
            Console.WriteLine("Output: " + retVal);
            Console.WriteLine("\n***developer of KUST***");
            Console.ReadKey();
        }
    }
    static string ad(int a, int b)
    {

        return (a + b).ToString();

    }
    static string sub(int a, int b)
    {

        return (a - b).ToString(); ;
    }
} 
```

# c# - 在指定日期期间从数据库中选择数据

> ID：12530771
> 
> 赞同：1
> 
> 时间：2012-09-21T12:37:52.857
> 
> 标签：c#, mysql

我有一个包含员工信息的数据库和一个程序，该程序应该从该数据库中检索数据。

数据库结构看起来像这样：

```
ID | Date        | signedIn | SignedOut
1    01-10-2012    08:00:00   16:00:00
1    14-10-2012    08:00:00   16:00:00
1    13-09-2012    08:00:00   16:00:00 
```

然后，当我尝试在和之间检索数据时`01-10-2012`，`15-10-2012`我只想获取前两行。所以我总共工作了 16 个小时。

但是现在我得到的总数是 24，因为它也检索最后一个，即使它是上个月的

sql语句：

```
SELECT Info.UserID, Info.SurName, Info.FirstName, timetabel.Date, 
FROM Info
INNER JOIN timestabel
ON Info.UserID = Bruger_tidstabel.UserID
WHERE Info.UserID = '1'
AND timetabel.Date >= '01-10-2012'
AND timetabel.Date <= '14-10-2012'" 
```

该句子有效，因此它可以从数据库中检索数据。

有没有办法告诉数据库，我正在处理日期，所以它只会检索两个 surden 日期之间的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:42:28.483

尝试 BETWEEN 语句，例如：

```
"... WHERE Info.UserID = '1' AND (timetabel.Date BETWEEN '01-10-2012' AND '14-10-2012')" 
```

检查有无 () .. 还要检查日期模式是否正确，取决于您的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:43:55.370

您可以使用`BETWEEN`运算符，它在 WHERE 子句中用于选择两个值之间的数据范围。

```
SELECT column_name(s)
 FROM table_name
 WHERE column_name
 BETWEEN value1 AND value2 
```

您的表格字段`Date`最好采用日期或时间戳格式。此外，年份位于日期格式的前面，如下所示：

```
SELECT Info.UserID, Info.SurName, Info.FirstName, timetabel.Date, FROM Info INNER JOIN timestabel ON Info.UserID = Bruger_tidstabel.UserID WHERE Info.UserID = '1' AND timetabel.Date BETWEEN '2012-10-01' AND '2012-10-14' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:52:28.953

将日期表示为字符串时始终需要小心，因为正如 Christian 所说，它们并不总是按预期处理。确保使用日期时间类型或使用日期函数之一（DATEADD、DATEDIFF 等），以便将日期与日期进行比较！不幸的是，SQL 经常会毫无错误地运行，但它从您的 SQL 中解释的内容并不总是如预期的那样！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T13:00:36.207

虽然没有直接回答您的问题（其他问题已经回答），但我想警告您在使用日期范围时注意一个常见的陷阱。

```
timetabel.Date <= '14-10-2012' 
```

如果存储的日期/时间是 会发生`timetabel.Date`什么`14-10-2012 08:30`？该日期将被排除。我个人更喜欢使用这个更安全的测试

```
timetabel.Date < '15-10-2012' 
```

这相当于上面的一个（原因的时间部分除外）。所以与其比较

```
table.column <= date 
```

我比较

```
table.column < (date + one day) 
```

# speech-recognition - Kinect 语音识别慢

> ID：12530774
> 
> 赞同：2
> 
> 时间：2012-09-21T12:38:03.370
> 
> 标签：speech-recognition, kinect

我正在使用 Kinect 语音识别功能，并注意到存在令人沮丧的延迟，使其无法使用。这甚至适用于它只需要识别几个单词的情况（你必须通过语法告诉它要查找哪些单词）。即使在 MS 提供的示例以及 MS 自己用于推广该技术的视频（海龟示例）上，我也看到了这种延迟。

有谁知道我在这里是否缺少一些明显的配置设置？一定是有点头晕。

旁白：我不能在 kinect 的 msdn 论坛上问这个问题，因为论坛网站对我不起作用 - 我登录后出现奇怪的无限重定向循环......似乎影响了很多人，但他们无法报告在论坛上，因为他们不能因为问题本身而提问。

# python - 类设计：共享大量相同代码的方法

> ID：12530780
> 
> 赞同：1
> 
> 时间：2012-09-21T12:38:24.243
> 
> 标签：python, oop, methods

此时我想创建一个具有两种方法的类（我也希望能够明显地改变类）。

```
class ogrGeo(object):

    def __init__(self):
        pass

    def CreateLine(self, o_file, xy):
        #lots of code

    def CreatePoint(self, o_file, xy):
        # lot's of the same code as CreateLine(), 
        # only minor differences 
```

为了使事情保持清洁并尽可能少地重复代码，我正在寻求一些建议。这两种方法`CreateLine()` 并`CreatePoint()`共享很多代码。减少冗余：是否应该定义两种方法都可以调用的第三种方法？在这种情况下，您仍然可以单独调用 `o = ogrGeo() o.CreateLine(...) o.CreatePoint(...)`。还是应该将它们合并为一种方法？还有其他我没有想到或一无所知的解决方案吗？

已经感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:41:49.857

是否应该将这些方法合并为一个是 API 设计的问题。如果这些功能有不同的目的，那么你将它们分开。如果客户端代码可能遵循该模式，我*会合并它们*

```
if some_condition:
    o.CreateLine(f, xy)
else:
    o.CreatePoint(f, xy) 
```

但否则，不要合并。相反，将公用代码重构为私有方法，如果公用代码不涉及，甚至可以将其重构为独立函数`self`。Python 没有内置在语言中的“私有方法”的概念，但带有前导的名称`_`将被识别为这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T12:42:51.797

将通用代码分解为（私有）辅助方法是完全正常的：

```
class ogrGeo(object)
    def __init__(self):
        pass

    def CreateLine(self, o_file, xy):
        #lots of code
        value = self._utility_method(xy)

    def CreatePoint(self, o_file, xy):
        # lot's of the same code as CreateLine(), 
        # only minor differences
        value = self._utility_method(xy)

    def _utility_method(self, xy):
        # Common code here
        return value 
```

该方法可以返回一个值，也可以直接操作`self`.

一个忠告：阅读[Python 风格指南](http://www.python.org/dev/peps/pep-0008/)并遵守它的约定。大多数其他 python 项目都这样做，如果你这样做，它将使其他 Python 开发人员更容易理解你的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:44:49.403

对于将重叠的代码片段，请考虑它们是否也可以是它们自己的单独函数。然后`CreateLine`将由对某些函数的几次调用组成，其中参数选择对 有意义`CreateLine`，同时`CreatePoint`将是几个函数调用，具有适当的参数以创建一个点。

即使这些新的辅助功能不会在其他地方使用，最好将它们模块化为单独的功能，而不是复制/粘贴代码。但是，如果创建这些结构所需的辅助函数非常具体，那么为什么不将它们分解为自己的类呢？

您可以创建一个“对象”类，其中包含创建对象的所有基础知识，然后具有派生自“对象”的“线”和“点”类。在这些类中，覆盖必要的函数，以便构造是特定的，依赖于基“对象”类中的辅助函数来处理重叠的代码部分。

然后`ogrGeo`该类将构造这些其他类的实例。即使“Line”或“Shape”的最终消费者不需要完整的类对象，您仍然可以使用这种设计，并赋予`ogrGeo`返回 Line 实例或 Point 实例的子片段的能力消费者确实希望使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T12:46:24.110

这几乎无关紧要。您希望类方法尽可能地可用于调用程序，并且拥有两个方法比拥有一个带有要创建的对象类型的附加参数的单个方法更容易和更有效：

```
def CreateObj(self, obj, o_file, xy)    # obj = 0 for Point, 1 for Line, ... 
```

建议：使用单独的 API 调用并将通用代码分解为可在您的类中调用的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T13:05:04.410

你也可以去另一个方向。特别是在以下情况下：

```
def methA/B(...):
    lots of common code
    small difference
    lots of common code 
```

那么你可以做

```
def _common(..., callback):
    lots of common code
    callback()
    lots of common code
def methA(...):
    def _mypart(): do what A does
    _common(..., _mypart)
def methB(...):
    def _mypart(): do what B does
    _common(..., _mypart) 
```

# grails - 集成测试启动真的很慢

> ID：12530784
> 
> 赞同：0
> 
> 时间：2012-09-21T12:38:39.827
> 
> 标签：grails

我正在使用 grails 1.3.7，在运行集成测试时，我在测试开始之前看到以下消息。

```
[copy] Copying 1 file to C:\Users\<USER_NAME>\.grails\1.3.7\projects\<PROJECT_NAME> 
```

这一步需要很长时间，有时大约 5 分钟。（我有 8 个演出的 i7 和一个相对不错的硬盘）

我在这个目录中看不到大文件，都是文件夹。这里发生了什么，它试图复制哪个文件。

有什么办法让它更快。

# asp.net-mvc - Asp.net 4 Gridview Gridview 验证

> ID：12530788
> 
> 赞同：0
> 
> 时间：2012-09-21T12:39:04.617
> 
> 标签：asp.net-mvc

我的 gridview 上有一些验证控件，并且希望它们仅在我尝试在 gridview 行中保存/更新数据时才处于活动状态，而不是在使用取消按钮取消时处于活动状态。我该如何实现这一点。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:52:10.933

为取消按钮设置**CausesValidation="False"**。

**Control.CausesValidation 属性**

如果 CausesValidation 属性设置为 false，则会抑制 Validating 和 Validated 事件。

此外，为您的控件指定**“ValidationGroup” ：**

验证组允许您将页面上的验证控件组织为一组。每个验证组都可以独立于页面上的其他验证组执行验证。

您可以通过将 ValidationGroup 属性设置为要分组的所有控件的相同名称（字符串）来创建验证组。您可以为验证组分配任何名称，但您必须为该组的所有成员使用相同的名称。

在回发期间，Page 类的 IsValid 属性仅根据当前验证组中的验证控件进行设置。

**参考链接：**

[Control.CausesValidation 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.causesvalidation.aspx)

[指定验证组](http://msdn.microsoft.com/en-us/library/ms227424%28v=vs.100%29.aspx)

# iphone - 类中的 NSInvocation 错误不再存在

> ID：12530790
> 
> 赞同：0
> 
> 时间：2012-09-21T12:39:14.167
> 
> 标签：iphone, ios, class, core-data

我有一个名为“Object”的类，将名称更改为 TheObject（在我的项目中的任何地方），因为我认为它会导致问题。（TheObject 是 CoreData 生成的类）

现在我得到这个错误：

```
2012-09-21 14:19:45.794 Choose3[1348:fb03] *** NSInvocation: warning: object 0x191f500 of class 'Object' does not implement methodSignatureForSelector: -- trouble ahead
2012-09-21 14:19:45.794 Choose3[1348:fb03] *** NSInvocation: warning: object 0x191f500 of class 'Object' does not implement doesNotRecognizeSelector: -- abort 
```

为什么 Xcode 仍然认为我有一个名为 Object 的类而我没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:29:17.103

模型中实体的名称已更改，但实体的类仍然是 Object，而不是 TheObject。

# spring - Maven Jetty 运行 JNDI 配置

> ID：12530792
> 
> 赞同：3
> 
> 时间：2012-09-21T12:39:26.037
> 
> 标签：spring, maven, jndi, maven-jetty-plugin

我的项目结构如下所示：

```
parent POM 
|-- app-core
|-- app-model
|-- app-services
`-- app-web 
```

在我`pom.xml`的 for 中 `app-web`：

```
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>maven-jetty-plugin</artifactId>
    <version>6.1.10</version>
    <configuration>
    <webDefaultXml>src/test/resources/webdefault.xml</webDefaultXml>
    </configuration>
 </plugin> 
```

热部署工作正常，没有问题`mvn jetty:run`

**问题**：app-core 使用 springs 如何在这个多模块层次结构中为**Jetty maven 插件**配置这个 JNDI ，应该可以在 app-core 模块中访问

**更新 ：**

像这样添加了**pom.xml**

```
 <plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>maven-jetty-plugin</artifactId>
    <version>6.1.10</version>
    <configuration>
    <webDefaultXml>src/main/resources/webdefault.xml</webDefaultXml>
    <jettyConfig>src/main/resources/jetty.xml</jettyConfig>
    </configuration>
  </plugin> 
```

我的 jetty.xml 看起来像这样：

```
 <Configure class="org.mortbay.jetty.webapp.WebAppContext">
<New id="icatDB" class="org.mortbay.jetty.plus.naming.Resource">
    <Arg>jdbc/testDB</Arg>
    <Arg>
<New class="net.sourceforge.jtds.jdbcx.JtdsDataSource">
    <Set name="serverName">localhost</Set>
    <Set name="databaseName">test</Set>
    <Set name="user">sa</Set>
    <Set name="password"></Set>
</New>
</Arg>
</New>
 </Configure> 
```

之后，当我运行 mvn jetty:run 时出现此错误

```
Failure: Object is not of type class org.mortbay.jetty.webapp.WebAppContext 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T08:58:10.187

好的，这对我有用：

我需要使用 jettyEnvXml 而不是 jettyConfig。

```
 <plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>maven-jetty-plugin</artifactId>
    <version>6.1.10</version>
    <configuration>
    <webDefaultXml>src/main/resources/webdefault.xml</webDefaultXml>
    <jettyEnvXml>src/main/resources/jetty.xml</jettyEnvXml> 
    </configuration>
  </plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T12:49:07.317

*   Jetty 中 JNDI 的配置见这个[jetty 文档](http://docs.codehaus.org/display/JETTY/JNDI)
*   有关如何将配置文件添加到构建过程的方法，请参阅此[Maven Jetty 文档](http://docs.codehaus.org/display/JETTY/Maven+Jetty+Plugin)

# mongodb - 在我的 java 代码中执行文件中存在的 Mongo DB 原始查询

> ID：12530795
> 
> 赞同：2
> 
> 时间：2012-09-21T12:39:53.150
> 
> 标签：mongodb

> **可能重复：**
> [MongoDB (Java) - 如何运行保存在 javascript 文件中的查询？](https://stackoverflow.com/questions/10792663/mongodb-java-how-to-run-query-saved-in-javascript-file)

我已经编写了java代码来搜索/插入值到java中的集合中。但我想要的是我有一个包含原始MongoDB查询ex：db.collectionname.find（fieldname：fieldvalue）的.js文件，现在我想阅读.js 文件逐行执行原始 mongoDB 查询。请帮助我了解将在 java 中执行原始 Mongo DB 语句的任何想法或函数，例如 statement.executequery("select * from tablename"); 在 sql

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:28:19.307

您可以使用 JSON 解释器，例如[在 ANTLR 中实现的这个](http://www.antlr.org/wiki/display/ANTLR3/JSON+Interpreter)解释器，并输出嵌套`BasicDBObject`的。剩下的唯一部分是解析`db.collectionname.find(...)`，这应该相对简单。除了[ANTLR](http://www.antlr.org)，您还可以找到可能许多 Java JSON 解析器之一并`BasicDBObject`自己实例化 's。

# google-analytics - 我可以将服务帐户与 Google Analytics（分析）一起使用吗？

> ID：12530796
> 
> 赞同：3
> 
> 时间：2012-09-21T12:40:00.407
> 
> 标签：google-analytics, jwt

几天以来，我一直在尝试使用 Using [OAuth 2.0 for Server to Server Applications with JWT](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)来使用我的 C# 获取用户配置文件。

对于谷歌驱动器，我知道我们可以使用服务器到服务器的方法，但我不确定谷歌分析。我们可以使用它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T13:01:25.597

是的你可以！

```
Service Accounts

Useful for automated/offline/scheduled access to Google Analytics data for your own account. For example, to build a live dashboard of your own Google Analytics data and share it with other users.
There are a few steps you need to follow to configure service accounts to work with Google Analytics:

1\. Register a project in the APIs Console.
2\. In the Google APIs Console, under the API Access pane, create a client ID with the Application Type set to Service Account.
3\. Sign-in to Google Analytics and navigate to the Admin section.
4\. Select the account for which you want the application to have access to.
5\. Add the email address, from the Client ID created in the APIs Console from step #2, as a user of the selected Google Analytics account.
6\. Follow the instructions for Service Accounts to access Google Analytics data. 
```

来源：[https ://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtAuthorization](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtAuthorization)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T14:01:30.197

还没有。请参阅[服务帐户已到达](http://googledevelopers.blogspot.com/2012/03/service-accounts-have-arrived.html)。

> > 以下 Google 开发者服务目前支持服务帐号：
> > 
> > *   谷歌云存储
> > *   谷歌预测 API
> > *   谷歌网址缩短器
> > *   谷歌 OAuth 2.0 授权服务器
> > *   Google API 控制台
> > *   适用于 Python、Java 和 PHP 的 Google API 客户端库
> > 
> > 随着时间的推移，将支持更多的 Google API 和客户端库。

注册[Google Developers 博客](http://googledevelopers.blogspot.com/)和[Analytics 博客](http://analytics.blogspot.com/)供稿。他们将在 GA 向服务帐户开放时发布（如果有的话）。

# php - 将带有单引号的表单数据存储到 MySQL

> ID：12530799
> 
> 赞同：1
> 
> 时间：2012-09-21T12:40:21.613
> 
> 标签：php, mysql, mysqli

> **可能重复：**
> [PHP，你为什么逃避我的报价？](https://stackoverflow.com/questions/6324614/php-why-do-you-escape-my-quotes)

例如，如果我在输入字段中输入文本，然后尝试使用 PHP mysqli Prepared Statements 将其显示或保存到 MySQL，我会在单引号之前得到一个额外的反斜杠。

```
$name = $_POST['name'];
echo "name=($name)"; 
```

这个输出：不要，我也得到这个额外的反斜杠存储在 MySQL 中。

我怎样才能避免这种情况并且仍然能够输入反斜杠？

问候， 马格努斯·斯特兰德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:07:20.023

使用stripslashes，

```
echo stripslashes("Who\'s Kai Jim?"); //Who's Kai Jim? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:09:23.160

打开您的 php.ini 文件并转到第 460 行（几乎）并关闭魔术引号。喜欢

```
; Magic quotes for incoming GET/POST/Cookie data.
magic_quotes_gpc = Off

; Magic quotes for runtime-generated data, e.g. data from SQL, from exec(), etc.
magic_quotes_runtime = Off 
```

保持魔术引号关闭是开始应用程序安全性的好方法。魔术引号本质上是坏的。它们旨在清理对 PHP 脚本的输入，但在不知道如何使用该输入的情况下，不可能正确清理。

关于魔术引号的 PHP 手册页同意：

```
"This feature has been DEPRECATED as of PHP 5.3.0 and REMOVED as of PHP 6.0.0\. Relying on this feature is highly discouraged. Magic Quotes is a process that automagically escapes incoming data to the PHP script. It's preferred to code with magic quotes off and to instead escape the data at runtime, as needed." 
```

# git - Github - 使用一个 SSH 密钥复制两个存储库

> ID：12530802
> 
> 赞同：0
> 
> 时间：2012-09-21T12:40:38.930
> 
> 标签：git, bash, github

我想通过 bash 脚本将两个私有 github 存储库拉到我的服务器。我以前只做一个，效果很好。这是对我有用的过程：

*   在服务器上生成 SSH
*   添加到 github repo 的 ssh 列表
*   完成 git pull 请求

现在我正在尝试这样做：

*   生成 SSH
*   将密钥添加到第一个 github repo 的 ssh 列表
*   将密钥添加到第二个 github repo 的 ssh 列表
*   完成第一个 repo git pull request
*   完成第二个 repo git pull request

但是，当我尝试将相同的密钥添加到要复制的第二个仓库时，github 说它已经在使用中。我该怎么做？我是否应该在服务器上生成两个单独的 SSH 密钥并将一个用于一个 github 存储库，一个用于另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:51:12.297

github 上的 SSH 密钥是特定于用户的，而**不是**特定于repo 的。从第一个仓库拉出后，您是否尝试从第二个仓库中简单地 git pull？

# tfs - 获取过期试用版的 TFS 历史记录

> ID：12530803
> 
> 赞同：1
> 
> 时间：2012-09-21T12:40:41.963
> 
> 标签：tfs

我安装了 Basic TFS 试用版，现在它已经过期了。我必须了解 TFS 的历史。

*   它在哪里存储历史记录？它是否将其存储在 SQL Express 中？
*   有什么方法可以获取保存的历史记录吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T21:39:01.747

挖掘数据库并非易事。您必须将历史拼凑起来，并对所有博客[进行去错综复杂的处理。](http://social.msdn.microsoft.com/Forums/en/tfsversioncontrol/thread/fdf49109-bbb8-49f6-9966-3f0b93caec91)

让您的 TFS 实例再次工作会容易得多，这样您就可以从中取出文件。 [TFS Express 2012](http://blogs.msdn.com/b/bharry/archive/2012/02/23/coming-soon-tfs-express.aspx)现在可用，并且没有这样的时间限制。它对最多 5 个用户免费。您也许可以升级现有的安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T21:01:40.423

如果您仍然能够获得，则可以连接[git-tfs](https://github.com/git-tfs/git-tfs)。执行[git-tfs clone](https://github.com/git-tfs/git-tfs/wiki/Clone)后，您将能够使用[git](http://git-scm.com/)查看历史记录。您可以查看[本教程](http://elegantcode.com/2011/03/15/git-tfs-where-have-you-been-all-my-life/)以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T15:45:34.507

您是否考虑过尝试查询 TFSWarehouse 并使用自动脚本来重新创建历史记录？

**参考**：[将 TFS 2010 历史记录导出到 Excel 或文本文档](https://stackoverflow.com/questions/10282506/export-tfs-2010-history-to-excel-or-text-document)

# c - 为什么 C 中不同的数据类型有不同类型的指针？

> ID：12530806
> 
> 赞同：13
> 
> 时间：2012-09-21T12:40:57.760
> 
> 标签：c

如果我们必须保存任何数据类型的地址，那么我们需要该数据类型的指针。

但是指针只是一个地址，而地址始终是`int`类型。那么为什么任何数据类型的保存地址都需要该类型的指针呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-21T12:45:51.350

有几个原因：

*   并非所有地址都是平等的；特别是，在非冯诺依曼（例如[哈佛](http://en.wikipedia.org/wiki/Harvard_architecture)）体系结构中，指向代码内存（通常存储常量）的指针和指向数据内存的指针是不同的。
*   您需要知道基础类型才能正确执行访问。例如，读或写 a`char`不同于读或写 a `double`。
*   您需要额外的信息来执行指针运算。

请注意，在 C 语言中有一种指针类型表示“只是一个指针”，称为`void*`. 您可以使用此指针来传输内存中的地址，但您需要将其转换为有用的东西以便在 . 指向的内存中执行操作`void*`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T12:46:56.730

指针不只是`int`. 它们隐含地具有语义。

这里有几个例子：

*   `p->member``p`仅当您知道类型指向什么时才有意义。

*   `p = p+1;`根据您指向的对象的大小，行为会有所不同（从某种意义上说，“p”实际上是递增的，当被视为无符号整数时，它所指向的类型的大小）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-08T08:01:25.413

下面的例子可以帮助理解不同类型的指针之间的区别：

```
#include <stdio.h>

int main()
{
    // Pointer to char
    char * cp = "Abcdefghijk";
    // Pointer to int
    int * ip = (int *)cp; // To the same address

    // Try address arithmetic
    printf("Test of char*:\n");
    printf("address %p contains data %c\n", cp, *cp);
    printf("address %p contains data %c\n", (cp+1), *(cp+1));
    printf("Test of int*:\n");
    printf("address %p contains data %c\n", ip, *ip);
    printf("address %p contains data %c\n", (ip + 1), *(ip + 1));

    return 0;
} 
```

输出是：

[![在此处输入图像描述](../Images/1509a738769944dd85b2b8f9bcae3823.png)](https://i.stack.imgur.com/vXbaj.png)

重要的是要理解`address+1`表达式会根据`address`类型给出不同的结果，即`+1`表示`sizeof(addressed data)`，比如`sizeof(*address)`。

所以，如果在你的系统中（对于你的编译器）`sizeof(int)`和`sizeof(char)`是不同的（例如，4和1），结果`cp+1`和`ip+1`也是不同的。在我的系统中是：

```
E05859(hex) - E05858(hex) = 14702684(dec) - 14702681(dec) = 1 byte for char
E0585C(hex) - E05858(hex) = 14702684(dec) - 14702680(dec) = 4 bytes for int 
```

注意：在这种情况下，具体的地址值并不重要。唯一的区别是指针持有的变量类型，这显然很重要。

**更新：**

顺便说一句，地址（指针）算术不受`+1`or的限制`++`，可以举出很多例子，比如：

```
int arr[] = { 1, 2, 3, 4, 5, 6 };
int *p1 = &arr[1];
int *p4 = &arr[4];
printf("Distance between %d and %d is %d\n", *p1, *p4, p4 - p1);
printf("But addresses are %p and %p have absolute difference in %d\n", p1, p4, int(p4) - int(p1)); 
```

带输出：

[![在此处输入图像描述](../Images/1d4e1277cdb8fa32cb87fd1c20523bbb.png)](https://i.stack.imgur.com/MHxIl.png)

因此，为了更好地理解，请阅读[教程](https://www.tutorialspoint.com/cplusplus/cpp_pointer_arithmatic.htm)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T12:42:13.293

因为您假设“地址始终是 int 类型”是错误的。

完全有可能创建一个计算机体系结构，例如，由于某种原因，指向字符的指针大于指向单词的指针。C 会处理这个问题。

此外，当然，可以*取消引用*指针，并且当您这样做时，编译器需要知道您希望在相关地址中找到的数据类型。否则，它无法生成正确的指令来处理该数据。

考虑：

```
char *x = malloc(sizeof *x);
*x = 0;

double *y = malloc(sizeof *y);
*y = 0; 
```

这两个片段将写入完全不同的内存量（或者如果分配失败，则爆炸，暂时不要介意），但实际的文字常量（`0`类型为`int`）在两种情况下都是相同的。关于指针类型的信息允许编译器生成正确的代码。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-21T12:45:43.263

您可以非常轻松地在 C 中使用无类型指针——您只需将`void *`其用于所有指针。尽管出于两个我能想到的原因，这将是相当愚蠢的。

首先，通过指定类型中指向的数据，编译器可以避免许多愚蠢的错误、拼写错误或其他错误。相反，如果您剥夺了编译器的这些信息，那么您肯定会花费大量时间来调试本不应该成为问题的事情。

此外，您可能使用过“指针算法”。例如，`int *pInt = &someInt; pInt++;`-- 将指针前进到内存中的下一个整数；无论类型如何，这都有效，并前进到正确的地址，但只有在编译器知道所指向内容的大小时它才能工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T12:45:55.313

它主要适用于那些在您之后阅读代码的人，以便他们知道该地址存储了什么。此外，如果您在代码中执行任何指针运算，编译器需要知道如果您执行 pSomething++ 之类的操作，他应该前进多少，这是由指针的类型给出的，因为您的数据类型的大小是编译前已知。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-21T12:46:30.263

因为指针的类型告诉编译器一次可以执行多少字节的操作。

示例：在 的情况下`char`，只有一个字节。如果是两个字节的 int，它可能会有所不同。

# c++ - 忽略全局覆盖的新建/删除

> ID：12530807
> 
> 赞同：7
> 
> 时间：2012-09-21T12:41:01.170
> 
> 标签：c++, visual-studio

嗨，我正在使用一个全局覆盖新/删除的库。但是我对这个库有一个问题，问题是它必须在主函数中手动初始化。

现在我正在尝试使用另一个在调用 main 之前初始化一些函数的库，不幸的是这个库在这些函数中使用了 new 。所以我收到错误，因为使用覆盖的 new/delete 关键字的内存管理器尚未初始化。

我真的很想使用默认的内存管理器，因为我想向这个库添加单元测试。使用我要测试的库也被我的单元测试库使用的内存没有多大意义。

所以我的问题是，是否可以在包含第二个库时忽略全局覆盖的 new/delete 并只使用默认的 new/delete？

我在 Windows 7 上使用带有标准 C++ 编译器的 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:41:15.743

如果不修改库本身，我认为这是不可能的。我猜它是关于一个静态库（在 dll 中，被覆盖的 new/delete 将由 dll 中的函数指向。）

您可以使用以下命令（可视命令提示符）从静态库中删除 obj 文件：

```
 LIB /REMOVE:obj_to_remove /OUT:removed.lib input.lib 
```

要找出要删除的 obj，首先运行：

```
 DUMPBIN /ARCHIVEMEMBERS input.lib 
```

您将看到诸如

```
 Archive member name at 14286: /0  compilation.dir\objfile1.obj 
```

`14286`'标识' obj 文件。要查看每个符号的位置，请运行：

```
 DUMPBIN /LINKERMEMBER:1 input.lib > members.txt 
```

并寻找新的/删除。`members.txt`will 包含每个符号的错位名称和该符号所在的 obj 的标识符。例如

```
 14286 ?_Rank@?$_Arithmetic_traits@C@std@@2HB 
```

`14286`告诉你符号所在的 obj '标识符' 。如果您在查找新/删除时遇到问题，可以运行：

```
 DUMPBIN /SYMBOLS input.lib > sym.txt 
```

它将刷新到`sym.txt`每个符号的损坏和未损坏名称中。

最后，使用上面的命令删除 obj 文件，在我们的示例中`LIB`替换`obj_to_remove`为`compilation.dir\objfile1.obj`，并链接到`removed.lib`.

现在，如果您不走运，您需要的其他符号可能与 new/delete 位于同一目标文件中。在这种情况下，您可以使用类似这样的方式“破解”库[（](https://stackoverflow.com/questions/678254/c-function-conflict/678350#678350 "这个")例如重命名`new`为`dew`和。）`delete``nelete`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:17:02.483

您可以将内存管理器的初始化从 main 放到共享库中吗？

如果这是可能的，您可以尝试强制库的*初始化顺序*（通过依赖项）在加载其他任何内容之前加载（并初始化）内存管理器。然而，这是一个非常脆弱（或特定）的解决方案，因为它将依赖于平台特定的解决方法来强制共享库的初始化顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T22:09:42.983

如果使用宏完成覆盖，您可以使用

```
#pragma push_macro ("new")
#undef new
...code with standard new here ...
#pragma pop_macro ("new") 
```

如果它真的是通过函数覆盖完成的，那么您可以自己临时构建一个“新”宏，它调用一个具有另一个名称的函数，该函数位于其他地方，它只调用标准函数。宏在函数调用之前被解析。

# amazon-s3 - 防止机器人创建多个免费帐户和上传文件

> ID：12530808
> 
> 赞同：3
> 
> 时间：2012-09-21T12:41:01.013
> 
> 标签：amazon-s3, amazon-web-services, security, registration, dropbox

我正在为我的大学开发一个网站，用户可以在其中创建一个帐户并上传图片。图片是私密的，只有上传者才能看到。例如，就像一个云文件系统。

每个用户都有一个 500MB 的免费帐户。我使用 Amazon S3 来存储图像，也就是说存储意味着成本。

**如何避免机器人上传数百万 MB？如何避免机器人创建数百万个新帐户并为每个帐户上传 500MB 而不会影响用户体验？**

一方面，我绝对不想在注册表中添加验证码，因为它会对转化率产生负面影响。另一方面，我不想支付数千美元，因为机器人上传了数百万张虚拟图像。

有谁知道 Dropbox、Google Drive 等是否受此影响（由机器人上传的内容）？这似乎不是问题，因为我找不到任何关于它的东西。我能读到的所有与垃圾邮件相关的问题都只涉及论坛中的垃圾邮件。这也是有道理的。论坛中的垃圾邮件可以被其他用户阅读。Dropbox 或 Google Drive 等服务中的垃圾邮件无人问津。尽管如此，我必须保护它以避免成本意外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:48:38.893

我建议：

1.  让用户使用他们的电子邮件注册
2.  不允许单个电子邮件使用多个帐户
3.  向他们发送电子邮件注册确认，并在短时间内（例如 3 天）后停用“未确认”帐户

AFAIK，Drupal 嵌入了这种开箱即用的控件，或者不费吹灰之力（并且没有编程）。

这不会解决您的所有问题，但实际上它会降低机器人攻击的风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T00:36:21.883

据我所知，不使用验证码可以做到：

*   设置监控系统，对特定的滥用模式发出警告（同一个 IP 上传大量数据并重复创建新帐户）。
*   限制遵循这些模式的用户；希望这将使他们意识到并使该过程变得毫无价值。如果失败，则禁用这些帐户并让其所有者通过邮件/与您交谈，以解释发生了什么。
*   既然您说它是您大学的系统，请让用户提供入学证明（例如大学电子邮件地址）以防滥用。
*   在您的使用条款中明确说明这种禁止的用法。

当然，足够聪明的机器人可以解决所有这些问题。

对于更高级的解决方案，您可以尝试一些机器学习或人工智能来了解正常和异常的使用模式，然后应用该信息来判断可能的滥用者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:35:48.217

正如您所说您需要注册，有两点可以解决这个问题 - 确保没有机器人注册和/或限制上传数量。

我个人会使用这两点。对于用户注册，设计一个登录表单，用户必须在其中输入其电子邮件地址，向他们发送包含链接的邮件，并仅在单击此链接后激活他们的帐户。或者让用户在注册时解决一个简单的数学问题。

对于第二点，您可以存储每个用户和时间上传的字节数。然后，您可以为每次允许的上传使用量设置配额，例如，您每小时上传的流量不得超过 10MB。如果用户达到此限制超过 n 次，您可以停用他的帐户。

并且：建立警报和监控系统。例如监控未激活用户的数量，监控上传量等，并在这些超过某个阈值时设置警报。

上述方法可能并不完美，可能不会阻止所有机器人，但它们至少会使机器人更难上传不需要的数据。这些方法也很简单，所以你可以从你的项目开始，看看这是否真的是一个问题。如果你让机器人上传数据，你至少会收到警报，然后可以发明更好的解决方案。

# javascript - 淘汰赛数组绑定只工作一次

> ID：12530810
> 
> 赞同：0
> 
> 时间：2012-09-21T12:41:10.607
> 
> 标签：javascript, knockout.js

我正在研究一个文件上传代码，目前仅适用于 Chrome 和 Firefox。它允许用户拖放上传的文件。上传进度显示在网格中。

这是html

```
<form id="fileUploadForm" action="home/upload" method="post" enctype="multipart/form-data">
    <input type="file" id="fileselect" name="files" multiple="multiple" />
    <div id="filedrag">Drop files here</div>
    <button type="submit" id="submitbutton">Upload Files</button>
</form>

<table class="datatable" data-bind="visible:files().length>0">
    <thead>
        <tr>
            <th>Name</th>
            <th>Status</th>
            <th>Upload progress</th>
            <th>Progress bar</th>
        </tr>
    </thead>
    <tbody data-bind="foreach:files">
        <tr>
            <td data-bind="text:name"></td>
            <td data-bind="text:status"></td>
            <td data-bind="text:percentUploaded"></td>
            <td>
              <progress max="100" data-bind="attr: {value:percentUploaded}"></progress>
              <span data-bind="text:$root.files().length"></span></td>
        </tr>

    </tbody>
</table>

<pre data-bind="text: ko.toJSON($data.files, null, 2)"></pre> 
```

这是JavaScript：

```
var File = function (f) {
    this.name = f.name;
    this.type = f.type;
    this.size = f.size;
    this.lastModified = f.lastModifiedDate.toDateString();
    this.status = ko.observable(f.status);
    this.percentUploaded = ko.observable(0);
};

var ViewModel = function () {
    var self = this,
      maxFileSize = 5000000,
      onFileSelecting = function (e) {
          e.stopPropagation();
          e.preventDefault();
          e.target.className = (e.type == "dragover" ? "hover" : "");
      },
    onFileSelected = function (e) {
        onFileSelecting(e);// cancel event and hover styling
        var files = e.target.files || e.dataTransfer.files;
        for (var i = 0, f; f = files[i]; i++) {
            var validationResult = validate(f);
            f.status = validationResult || 'Uploading';
            self.addFile(f);
            uploadFile(f);
        }
    },
    validate = function (f) {
        if (f.size > maxFileSize)
            return 'Too large, should be less than 5MB';
        if (f.type.indexOf("text") != 0)
            return 'Wrong file type';
    },
    uploadFile = function (f) {
        var file = self.files()[0];

        var fd = new FormData();
        fd.append("files", f, f.name);

        var xhr = new XMLHttpRequest();
        xhr.upload.addEventListener("progress", function (e) {
            file.status("Uploaded " + parseInt(e.loaded / e.total * 100) + "%");
            file.percentUploaded(parseInt(e.loaded / e.total * 100));
        }, false);

        xhr.onreadystatechange = function (e) {
            if (xhr.readyState == 4) {
                file.status((xhr.status == 200 ? "success" : "failure"));
            }
        };

        xhr.open("POST", $("#fileUploadForm")[0].action, true);
        xhr.setRequestHeader("X_FILENAME", file.name);
        xhr.send(fd);
    };

    self.files = ko.observableArray();
    self.addFile = function (f) { self.files.unshift(new File(f)); };

    $(document).ready(function () {
        if (window.File && window.FileList && window.FileReader) {
            var fileSelector = $("#fileselect"),
              fileDragArea = $("#filedrag"),
              submitButton = $("#submitbutton");

            fileSelector.change(onFileSelected);
            var xhr = new XMLHttpRequest();
            if (xhr.upload) {
                filedrag.addEventListener("dragover", onFileSelecting, false);
                filedrag.addEventListener("dragleave", onFileSelecting, false);
                filedrag.addEventListener("drop", onFileSelected, false);
                filedrag.style.display = "block";
                submitbutton.style.display = "none";
                fileSelector.hide();
            }
        }
    });
};

var model = new ViewModel();
ko.applyBindings(model); 
```

当我拖放一组文件时，一切正常。但是，当我拖放另一组时，文件数组会更新，但网格不会显示其他行。

但是，当我取出这段 HTML5 标记时，一切正常：

```
<progress max="100" data-bind="attr: {value:percentUploaded}"></progress> 
```

我已经创建了小提琴（[http://jsfiddle.net/9aJtG/1](http://jsfiddle.net/9aJtG/1)），但它还有其他问题 - 1）小提琴上的拖放只会打开文件（不知道为什么）2）删除文件被提交，但没有可以与 JSFiddle 表单发布一起使用的服务器端代码

我在另一个例子中尝试过使用进度条，它没有这个问题[http://jsfiddle.net/bxfXd/800/](http://jsfiddle.net/bxfXd/800/)

有任何想法吗？

非常感谢！

# python - 如何快速制作这个 python 脚本？（与来自此处的帖子的分支预测相关的基准测试）

> ID：12530812
> 
> 赞同：3
> 
> 时间：2012-09-21T12:41:21.863
> 
> 标签：python, optimization, branch-prediction

从[这里 - 一个分支预测问题](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array)，我开始编写程序的 Python 版本来检查 Python 中排序/未排序版本的运行时。我试过先排序。

这是代码：

```
import time

from random import *
arraysize = 327
data = []

for  c in range(arraysize):
    data.append( randint( 1 , 256 )  ) 

## !!! with this, the next loop runs faster
data.sort()

## test

start_time = time.clock()

sum = 0

for i in range(100000):
    for c in range(arraysize):
        if data[c] >= 128:
            sum += data[c]

print time.clock() - start_time 
```

我不确定我的简单计时方法的准确性，但它似乎已经足够好了。当我设置时，`arraysize = 32768`我第一次等了> 20分钟！超过20分钟！但是`arraysize = 327`，我得到了一个时间`8.141656691s`。

如果我在代码中的某个地方有错误，或者以某种方式使用 Numpy/Scipy 是否会加快速度，请纠正我。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-25T03:20:22.260

我从@mgilson 的答案开始，并对其进行了一些修改。我想测试我对原始问题的回答中讨论的“决策位”和查找表技术：[https ://stackoverflow.com/a/17782979/166949](https://stackoverflow.com/a/17782979/166949)

我对原作做了一些改动。有些只是反映我个人喜好的风格。然而，我发现了原始的错误，我认为测量正确的代码很重要。

我让 Python 代码现在从命令行获取参数，并编写了一个 shell 脚本，该脚本使用 Python 2.x、Python 3.x 和 PyPy 运行 Python 脚本。确切的版本是：Python 2.7.6、Python 3.4.0 和 PyPy 2.7.3

我在 Linux Mint 17 64 位版本上运行了测试。CPU 是 AMD Phenom 9850，运行频率为 2.5 GHz，内存为 16 GB。Linux 内核版本 per`uname -r`为：3.13.0-24-generic

我让代码从命令行获取参数的原因是 327 是一个非常短的列表。我认为`sum()`当列表更长时，and generator 表达式会做得更好，所以我让列表大小和试验次数从命令行传递。结果显示了哪个 Python，以及列表长度和试验次数。

结论：令我惊讶的是，即使列表很长，Python 使用`sum()`列表理解也是最快的！运行生成器的开销似乎比构建列表然后将其拆除的开销要慢。

但是，如果列表真的很大，我预计生成器将开始超越列表理解。对于一百万个随机值的列表，listcomp 仍然更快，但是当我达到 1600 万个随机值时，genexp 变得更快。对于较短的列表，生成器表达式的速度损失并不大。所以我仍然倾向于将生成器表达式作为在 Python 中解决这个问题的首选方法。

有趣的是，PyPy 的查表速度最快。这是有道理的：这是我在 C 中发现的最快的方式，而 PyPy 正在从 JIT 生成本机代码。

对于 CPython，使用它的虚拟机，调用单个操作比调用多个操作要快；Python VM 的开销可能超过更昂贵的基本操作。因此整数除法比位掩码加位移更快，因为除法是一个单一的操作。但是在 PyPy 中，位掩码+移位比除法快得多。

此外，在 CPython 中， using`sum()`可以让您的代码在 C 内部运行，因此它可以非常快；但是在 PyPy 中，`sum()`这比编写一个 JIT 可以变成一个邪恶的快速本机循环的直接循环要慢。我的猜测是，生成器机制对于 PyPy 来说很难理解和优化为原生代码。

外壳脚本：

```
for P in python python3 pypy; do
    echo "$P ($1, $2)"
    $P test_branches.py $1 $2
    echo
done 
```

Python代码：

```
import random
import sys
import timeit

try:
    RANGE = xrange
except NameError:
    RANGE = range

if len(sys.argv) != 3:
    print("Usage: python test_branches.py <length_of_array> <number_of_trials>")
    sys.exit(1)

TEST_DATA_LEN = int(sys.argv[1])
NUM_REPEATS = int(sys.argv[2])

_test_data = [random.randint(0,255) for _ in RANGE(TEST_DATA_LEN)]

def test0(data):
    """original way"""
    total = 0
    for i in RANGE(TEST_DATA_LEN):
        if data[i] >= 128:
            total += data[i]
    return total

def test1(data):
    """better loop"""
    total = 0
    for n in data:
        if n >= 128:
            total += n
    return total

def test2(data):
    """sum + generator"""
    return sum(n for n in data if n >= 128)

def test3(data):
    """sum + listcomp"""
    return sum([n for n in data if n >= 128])

def test4(data):
    """decision bit -- bit mask and shift"""
    lst = [0, 0]
    for n in data:
        lst[(n & 0x80) >> 7] += n
    return lst[1]

def test5(data):
    """decision bit -- division"""
    lst = [0, 0]
    for n in data:
        lst[n // 128] += n
    return lst[1]

_lut = [0 if n < 128 else n for n in RANGE(256)]

def test6(data):
    """lookup table"""
    total = 0
    for n in data:
        total += _lut[n]
    return total

def test7(data):
    """lookup table with sum()"""
    return sum(_lut[n] for n in data)

test_functions = [v for k,v in globals().items() if k.startswith("test")]
test_functions.sort(key=lambda x: x.__name__)

correct = test0(_test_data)

for fn in test_functions:
    name = fn.__name__
    doc = fn.__doc__
    if fn(_test_data) != correct:
        print("{}() not correct!!!".format(name))
    s_call = "{}(_test_data)".format(name)
    s_import = "from __main__ import {},_test_data".format(name)
    t = timeit.timeit(s_call,s_import,number=NUM_REPEATS)
    print("{:7.03f}: {}".format(t, doc)) 
```

结果：

```
python (327, 100000)
  3.170: original way
  2.211: better loop
  2.378: sum + generator
  2.188: sum + listcomp
  5.321: decision bit -- bit mask and shift
  4.977: decision bit -- division
  2.937: lookup table
  3.464: lookup table with sum()

python3 (327, 100000)
  5.786: original way
  3.444: better loop
  3.286: sum + generator
  2.968: sum + listcomp
  8.858: decision bit -- bit mask and shift
  7.056: decision bit -- division
  4.640: lookup table
  4.783: lookup table with sum()

pypy (327, 100000)
  0.296: original way
  0.312: better loop
  1.932: sum + generator
  1.011: sum + listcomp
  0.172: decision bit -- bit mask and shift
  0.613: decision bit -- division
  0.140: lookup table
  1.977: lookup table with sum()

python (65536, 1000)
  6.528: original way
  4.661: better loop
  4.974: sum + generator
  4.150: sum + listcomp
 10.971: decision bit -- bit mask and shift
 10.218: decision bit -- division
  6.052: lookup table
  7.070: lookup table with sum()

python3 (65536, 1000)
 12.999: original way
  7.618: better loop
  6.826: sum + generator
  5.587: sum + listcomp
 19.326: decision bit -- bit mask and shift
 14.917: decision bit -- division
  9.779: lookup table
  9.575: lookup table with sum()

pypy (65536, 1000)
  0.681: original way
  0.884: better loop
  2.640: sum + generator
  2.642: sum + listcomp
  0.316: decision bit -- bit mask and shift
  1.573: decision bit -- division
  0.280: lookup table
  1.561: lookup table with sum()

python (1048576, 100)
 10.371: original way
  7.065: better loop
  7.910: sum + generator
  6.579: sum + listcomp
 17.583: decision bit -- bit mask and shift
 15.426: decision bit -- division
  9.285: lookup table
 10.850: lookup table with sum()

python3 (1048576, 100)
 20.435: original way
 11.221: better loop
 10.162: sum + generator
  8.981: sum + listcomp
 29.108: decision bit -- bit mask and shift
 23.626: decision bit -- division
 14.706: lookup table
 14.173: lookup table with sum()

pypy (1048576, 100)
  0.985: original way
  0.926: better loop
  5.462: sum + generator
  6.623: sum + listcomp
  0.527: decision bit -- bit mask and shift
  2.334: decision bit -- division
  0.481: lookup table
  5.800: lookup table with sum()

python (16777216, 10)
 15.704: original way
 11.331: better loop
 11.995: sum + generator
 13.787: sum + listcomp
 28.527: decision bit -- bit mask and shift
 25.204: decision bit -- division
 15.349: lookup table
 17.607: lookup table with sum()

python3 (16777216, 10)
 32.822: original way
 18.530: better loop
 16.339: sum + generator
 14.999: sum + listcomp
 47.755: decision bit -- bit mask and shift
 38.930: decision bit -- division
 23.704: lookup table
 22.693: lookup table with sum()

pypy (16777216, 10)
  1.559: original way
  2.234: better loop
  6.586: sum + generator
 10.931: sum + listcomp
  0.817: decision bit -- bit mask and shift
  3.714: decision bit -- division
  0.752: lookup table
  3.837: lookup table with sum() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T12:47:37.120

一个小的优化，也是风格问题，列表可以直接迭代，而不需要索引它们：

```
for d in data:
    if d >= 128:
        sum += d 
```

这节省了一些函数调用。

如果您使用内置`sum`函数，此循环也可能会更快：

```
my_sum += sum( d for d in data if d>=128 ) 
```

列表组合*可能*比上面的生成器更快（以额外的内存为代价）：

```
my_sum += sum( [d for d in data if d>=128] ) 
```

* * *

当然，从算法的角度来看，我们可以去掉最外层循环，因为内层循环的总和不会改变：

```
my_sum = 100000 * sum( d for d in data if d>=128 ) 
```

但我猜你已经知道了...

* * *

最后，这是我将如何进行基准测试：

```
import random
import timeit

N = 327
testarr = [random.randint(1,256) for _ in range(N)]

def test1(data):
    """Original way"""
    s = 0
    for c in range(N):
        if data[c] >= 128:
            s += data[c]

def test2(data):
    """better loop"""
    s = 0
    for d in data:
        if d >= 128:
            s += d

def test3(data):
    """ sum + generator """
    sum( d for d in data if d >= 128 )

def test4(data):
    """ sum + listcomp """
    sum( [ d for d in data if d >= 128 ])

NNUMBER = 100000
print timeit.timeit('test1(testarr)','from __main__ import test1,testarr',number=NNUMBER)
print timeit.timeit('test2(testarr)','from __main__ import test2,testarr',number=NNUMBER)
print timeit.timeit('test3(testarr)','from __main__ import test3,testarr',number=NNUMBER)
print timeit.timeit('test4(testarr)','from __main__ import test4,testarr',number=NNUMBER) 
```

我的结果（OS-X Mavericks，python 2.7.5 - 里程可能会有所不同）：

```
2.80526804924  # loop with range
2.04129099846  # loop over elements
1.91441488266  # sum with generator
2.05234098434  # sum with list 
```

对我来说，发电机以`sum`微弱优势获胜。list-comp with`sum`和显式循环大致相等。循环遍历索引（毫不奇怪）是最慢的。

# c# - 我应该在 Umbraco 中使用 INode 还是 Node ？

> ID：12530813
> 
> 赞同：2
> 
> 时间：2012-09-21T12:41:23.790
> 
> 标签：c#, asp.net, umbraco

在许多 Umbraco 示例中，我看到了针对相同类型工作的两种不同方法。有时人们选择、查询并返回**INode**。其他人用**Node**做所有事情。

谁能告诉我首选的工作方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T13:29:51.883

我不熟悉 Umbraco，但我认为答案不必针对它。

如果您 return `INode`，它将为您提供将来的灵活性，因为您可以（内部）返回从 扩展的任何类`INode`。如果`INode`包含 的所有属性和方法`Node`，那么这样做不会丢失任何功能。

举个例子，使用`IEnumerable`vs的机会`List`

```
IEnumerable<int> x = MyClass.MyMethod(); 
```

的以下两个定义`MyMethod`在此类示例中都是有效的。

```
public static IEnumerable<int> MyMethod()
{
    return new List<int>() { 1, 2, 3 };
}

....

public static IEnumerable<int> MyMethod()
{
    return new int[] {1, 2, 3};
} 
```

这使您可以更改实现，`MyMethod`而无需修改每个调用者。

对于您的方法，您应该返回提供与其上下文相关的所有功能的最简单类型。假设您需要修改返回的列表`MyMethod`，那么返回`IEnumerable`是一个糟糕的选择（因为它是不可变的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:35:15.113

就像马修说的，这取决于你想要达到的目标。

但是，如果您是初学者并且不知道自己在做什么，我建议您返回 Node，因为否则在某些时候您可能不得不将您的 INode 转换回 Node（这不一定是一个大问题，但通常会首先破坏返回 INode 的目的，因为您会将代码耦合到非抽象 Node 类）。

# java - 以 Swing 形式浏览 HTML 文件

> ID：12530820
> 
> 赞同：0
> 
> 时间：2012-09-21T12:41:37.270
> 
> 标签：java, html, swing, html-parsing

我正在使用 Java 中的 Swing 工作，我想以 Swing 形式显示 HTML 页面，是否有任何工具可以显示或显示 HTML 文件，该文件可能具有链接，单击这些链接应显示其他文件。简而言之，我希望像浏览器这样的任何控件以 Swing 形式浏览。是否可以请帮助我我不知道它的代码

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:47:22.037

你可以使用`JEditorPane`：

```
String url = "http://host/path";
JEditorPane htmlPane = new JEditorPane(url);
htmlPane.setContentType("text/html"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:26:08.447

[SwingBox](http://cssbox.sourceforge.net/swingbox/)提供了一个用于显示 HTML 文档的 Swing 组件。它支持的 CSS 比标准的 JEditorPane 更多。软件包中包含一个演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:52:11.793

大多数 Swing 组件都可以包含 html 格式，但是为了获得正确的链接行为，它们需要实例化一个 HyperlinkListener，这适用于 JEditorPane

[http://docs.oracle.com/javase/7/docs/api/javax/swing/event/class-use/HyperlinkListener.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/class-use/HyperlinkListener.html)

# c# - 如何检查所选项目是否已从先前选择的项目更改？

> ID：12530822
> 
> 赞同：0
> 
> 时间：2012-09-21T12:41:38.640
> 
> 标签：c#, winforms, listbox

I have a listbox in my winform, when an item in the listbox is selected, a value is placed into a textbox in the same Form. There my many items in my listbox which when selected, i want the text box to be empty so i can pass in the new value. 我如何检查用户是否点击了他们最初选择的项目以外的东西？我得到如下当前选择的项目：

```
var selectedItem = (ReportItems)listbox.selectedItem 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:46:45.770

您可以[`SelectedIndexChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selectedindexchanged.aspx)在`ListBox`. 您可以为此事件创建一个事件处理程序，以确定何时`ListBox`更改了 中的选定索引。当您需要根据 ListBox 中的当前选择在其他控件中显示信息时，这会很有用。您可以使用此事件的事件处理程序来加载其他控件中的信息。

请参阅 MSDN 文档：[链接](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selectedindexchanged.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:46:08.993

您可以为您的 ReportItems 添加一个全局变量并将其命名为“selItem”。

在用户更改所选项目后，您使用“selItem”变量检查“新”selectedItem。我认为列表框没有一种方法可以检查选择是否与前一个相比发生了变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:50:27.060

我不确定你是否有理由不利用[`SelectionChanged`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectionchanged.aspx)事件，`ListBox`但如果你没有，你应该这样做。此外，确定它是否与最初选择的项目不同应该非常简单，因为您可以将最初选择的项目保存在`private`表单中的变量中，并在每次`SelectionChanged`触发方法处理程序时进行比较。

除此之外，我没有什么可以建议的了，因为你的问题不是*很*清楚，也没有代码可以看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T13:08:00.330

我的解决方案是始终先清除文本框。因此，一旦用户在列表视图中选择了一个项目，而不是立即填充文本框，请在填充之前清除文本框。

明文（）；单击列表框项时立即调用。

```
 public void clearText()
    {
        textBox1.Clear();
        textBox2.Clear();
        textBox3.Clear();
        textBox4.Clear();
        textBox5.Clear();
        textBox6.Clear();
        textBox7.Clear();
        textBox8.Clear();
        textBox9.Clear();
        textBox10.Clear();
        textBox11.Clear();
        textBox12.Clear();
    } 
```

# c# - 多次调用我的 WCF 服务方法

> ID：12530825
> 
> 赞同：1
> 
> 时间：2012-09-21T12:41:54.793
> 
> 标签：c#, .net, silverlight, mvvm

我已经用一个简短而直接的问题更新了我的问题，如下所述：我了解 MVVM 的基本知识，但我不知道它的实现。问题： -

*   所有的方法，如 private void UserControl_Loaded()、void serviceClient_GetDeptIDNameCompleted()、private void cbDeptName_SelectionChanged()、void serviceClient_GetSectionsListCompleted()、private void cbDeptSections_SelectionChanged()、void serviceClient_GetSectionDetailCompleted() 都是第一次依次调用。
*   如果我从任何组合框中更改任何选择，那么每个方法都会调用几次（可变）次。

我认为这是因为实施不当或标准编码低。任何机构都可以向我推荐一个好的实施方案。提前致谢。

更新：-我的 a.xml

```
<Departments>

    <Department>

        <deptID>
            1
        </deptID>

        <deptName>
            Arts
        </deptName>

        <Sections>

            <Section>
                <sectionID>A</sectionID>
                <sectionName>Political Science</sectionName>
                <NoOfLecturers>5</NoOfLecturers>
            </Section>

            <Section>
                <sectionID>B</sectionID>
                <sectionName>Economics</sectionName>
                <NoOfLecturers>3</NoOfLecturers>
            </Section>

            <Section>
                <sectionID>C</sectionID>
                <sectionName>Social Studies</sectionName>
                <NoOfLecturers>7</NoOfLecturers>
            </Section>

            <Section>
                <sectionID>D</sectionID>
                <sectionName>History</sectionName>
                <NoOfLecturers>5</NoOfLecturers>
            </Section>

            <Section>
                <sectionID>E</sectionID>
                <sectionName>Geography</sectionName>
                <NoOfLecturers>2</NoOfLecturers>
            </Section>

        </Sections>

    </Department>

    <Department>

        <deptID>
            2
        </deptID>

        <deptName>
            Sciences
        </deptName>

        <Sections>

            <Section>
                <sectionID>A</sectionID>
                <sectionName>Physics</sectionName>
                <NoOfLecturers>10</NoOfLecturers>
            </Section>

            <Section>
                <sectionID>B</sectionID>
                <sectionName>Mathematics</sectionName>
                <NoOfLecturers>2</NoOfLecturers>
            </Section>

            <Section>
                <sectionID>C</sectionID>
                <sectionName>Chemistry</sectionName>
                <NoOfLecturers>6</NoOfLecturers>
            </Section>

            <Section>
                <sectionID>D</sectionID>
                <sectionName>Botany</sectionName>
                <NoOfLecturers>5</NoOfLecturers>
            </Section>

            <Section>
                <sectionID>E</sectionID>
                <sectionName>Zeology</sectionName>
                <NoOfLecturers>4</NoOfLecturers>
            </Section>

        </Sections>

    </Department>

    <Department>

        <deptID>
            3
        </deptID>

        <deptName>
            Commerce
        </deptName>

        <Sections>

            <Section>
                <sectionID>A</sectionID>
                <sectionName>Accounting</sectionName>
                <NoOfLecturers>3</NoOfLecturers>
            </Section>

            <Section>
                <sectionID>B</sectionID>
                <sectionName>Marketing</sectionName>
                <NoOfLecturers>2</NoOfLecturers>
            </Section>

            <Section>
                <sectionID>C</sectionID>
                <sectionName>Human Resources</sectionName>
                <NoOfLecturers>5</NoOfLecturers>
            </Section>

            <Section>
                <sectionID>D</sectionID>
                <sectionName>Finance</sectionName>
                <NoOfLecturers>5</NoOfLecturers>
            </Section>

        </Sections>

    </Department>

    <Department>

        <deptID>
            4
        </deptID>

        <deptName>
            Library
        </deptName>

        <Sections>

            <Section>
                <sectionID>A</sectionID>
                <sectionName>Incharge</sectionName>
                <NoOfLecturers>3</NoOfLecturers>
            </Section>

            <Section>
                <sectionID>B</sectionID>
                <sectionName>Clerk</sectionName>
                <NoOfLecturers>3</NoOfLecturers>
            </Section>

        </Sections>

    </Department>

</Departments> 
```

* * *

我的 WCFService.cs 类（Service1.svc.cs）

```
// NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in code, svc and config file together.
    public class Service1 : IService1
    {
        XmlDocument doc;

        string xmlPath = @"D:\WcfService1\WcfService1\Resources\a.xml";

        public Dictionary<string, string> GetDeptIDName()
        {
            try
            {
                if (!File.Exists(xmlPath))
                {
                    return null;
                }
                else
                {
                    Dictionary<string, string> depIDName = new Dictionary<string, string>();
                    doc = new XmlDocument();
                    doc.Load(xmlPath);
                    XmlNodeList nl = doc.GetElementsByTagName("Department");

                    foreach (XmlNode node in nl)
                    {
                        string id = (node.FirstChild.InnerXml).Replace("\r", "").Replace("\n", "").Replace("\t", "");
                        string name = (node.FirstChild.NextSibling.InnerXml).Replace("\r", "").Replace("\n", "").Replace("\t", "");
                        depIDName.Add(id, name);
                    }

                    return depIDName;
                }
            }
            catch (Exception)
            {
                return null;
            }
        }

        public List<string> GetSectionsList(string deptName)
        {
            try
            {
                if (!File.Exists(xmlPath))
                {
                    return null;
                }
                else
                {
                    List<string> lstSectionList = new List<string>();
                    doc = new XmlDocument();
                    doc.Load(xmlPath);
                    XmlNodeList nl = doc.GetElementsByTagName("Department");

                    foreach (XmlNode node in nl)
                    {
                        string name = (node.FirstChild.NextSibling.InnerXml).Replace("\r", "").Replace("\n", "").Replace("\t", "");
                        if (name == deptName)
                        {
                            UpdateSectionsList(ref lstSectionList, node.LastChild);
                        }
                    }

                    return lstSectionList;
                }
            }
            catch (Exception)
            {
                return null;
            }
        }

        private void UpdateSectionsList(ref List<string> lstSectionList,
                                        XmlNode xmlNode)
        {
            XmlNodeList nl = xmlNode.ChildNodes;

            foreach (XmlNode xNode in nl)
            {
                foreach (XmlNode sectionNode in (XmlNodeList)xNode.ChildNodes)
                {
                    if ("sectionID" == sectionNode.Name)
                    {
                        lstSectionList.Add(sectionNode.InnerXml);
                    }
                }
            }
        }

        /// <summary>
        /// Get all the sections detail.
        /// </summary>
        /// <param name="deptName"></param>
        /// <param name="sectionID"></param>
        /// <returns></returns>
        public CompositeType GetSectionDetail(string deptName,
                                              string sectionID)
        {
            try
            {
                if (!File.Exists(xmlPath))
                {
                    return null;
                }
                else
                {
                    CompositeType compositeObj = new CompositeType();

                    doc = new XmlDocument();

                    doc.Load(xmlPath);

                    XmlNodeList nl = doc.GetElementsByTagName("Department");

                    foreach (XmlNode node in nl)
                    {
                        string name = (node.FirstChild.NextSibling.InnerXml).
                                       Replace("\r", "").
                                       Replace("\n", "").
                                       Replace("\t", "");

                        if (name == deptName)
                        {
                            UpdateSectionDetail(out compositeObj,
                                                GetSectionNodes(node.LastChild,
                                                                sectionID));
                        }
                    }

                    return compositeObj;
                }
            }
            catch (Exception)
            {
                return null;
            }
        }

        private void UpdateSectionDetail(out CompositeType compositeObj,
                                         XmlNode xmlNode)
        {
            compositeObj =
                new CompositeType();

            compositeObj.SectionID = 
                xmlNode.FirstChild.InnerXml;

            compositeObj.SectionName = 
                xmlNode.LastChild.PreviousSibling.InnerXml;

            compositeObj.SectionLecturers =
                xmlNode.LastChild.InnerXml;
        }

        private XmlNode GetSectionNodes(XmlNode xmlNode,
                                        string sectionID)
        {
            try
            {
                XmlNodeList nl = xmlNode.ChildNodes;

                XmlNode returnNode = xmlNode;

                foreach (XmlNode xNode in nl)
                    foreach (XmlNode sectionNode in (XmlNodeList)xNode.ChildNodes)
                        if (("sectionID" == sectionNode.Name)
                                        &&
                            (sectionNode.InnerXml == sectionID))
                        {
                            returnNode = xNode;
                        }

                return returnNode;
            }
            catch(Exception)
            {
                return null;
            }
        }
    } 
```

* * *

IService1.cs 接口

```
// NOTE: You can use the "Rename" command on the "Refactor" menu to change the interface name "IService1" in both code and config file together.
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        Dictionary<string, string> GetDeptIDName();

        [OperationContract]
        List<string> GetSectionsList(string deptName);

        [OperationContract]
        CompositeType GetSectionDetail(string deptName, string sectionID);

        // TODO: Add your service operations here
    }

    // Use a data contract as illustrated in the sample below to add composite types to service operations.
    [DataContract]
    public class CompositeType
    {
        string sectionID = string.Empty, sectionName = string.Empty, NoOfLectures = string.Empty;

        [DataMember]
        public string SectionID
        {
            get
            {
                return sectionID; 
            }
            set 
            {
                sectionID = value; 
            }
        }

        [DataMember]
        public string SectionName
        {
            get
            {
                return sectionName;
            }
            set
            {
                sectionName = value;
            }
        }
        [DataMember]
        public string SectionLecturers
        {
            get
            {
                return NoOfLectures;
            }
            set
            {
                NoOfLectures = value;
            }
        }
    } 
```

* * *

MainPage.xaml.cs 类

```
 public partial class MainPage : UserControl
    {
        Service1Client serviceClient = new Service1Client();

        public MainPage()
        {
            InitializeComponent();
        }

        private void UserControl_Loaded(object sender, RoutedEventArgs e)
        {
            serviceClient.GetDeptIDNameCompleted += new EventHandler<GetDeptIDNameCompletedEventArgs>(serviceClient_GetDeptIDNameCompleted);
            serviceClient.GetDeptIDNameAsync();
        }

        void serviceClient_GetDeptIDNameCompleted(object sender, GetDeptIDNameCompletedEventArgs e)
        {
            cbDeptName.ItemsSource = e.Result;
            cbDeptName.SelectedItem = cbDeptName.Items[0];
        }

        private void cbDeptName_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            //Remove square brackets from the List box item.
            string lstBoxItem = Regex.Replace(cbDeptName.SelectedValue.ToString(),
                                              @"[\[\]\s]",
                                              string.Empty);

            //Split the list box item into two parts by considering the (,)
            //to separate the DICOM ID and Patient name.
            string[] strItems = (lstBoxItem).Split(Convert.ToChar(","));

            serviceClient.GetSectionsListCompleted += new EventHandler<GetSectionsListCompletedEventArgs>(serviceClient_GetSectionsListCompleted);
            serviceClient.GetSectionsListAsync(strItems[1]);
        }

        void serviceClient_GetSectionsListCompleted(object sender, GetSectionsListCompletedEventArgs e)
        {
            cbDeptSections.ItemsSource = e.Result;
            cbDeptSections.SelectedItem = cbDeptSections.Items[0];
            //serviceClient.GetSectionDetailCompleted += new EventHandler<GetSectionDetailCompletedEventArgs>(serviceClient_GetSectionDetailCompleted);
            //serviceClient.GetSectionDetailAsync(strItems[1], cbDeptSections.SelectedItem.ToString());
        }

        private void cbDeptSections_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            if (null == cbDeptSections.SelectedItem)
                return;

            lbSectionDetail.Items.Clear();

            //Remove square brackets from the List box item.
            string lstBoxItem = Regex.Replace(cbDeptName.SelectedValue.ToString(),
                                              @"[\[\]\s]",
                                              string.Empty);

            //Split the list box item into two parts by considering the (,)
            //to separate the DICOM ID and Patient name.
            string[] strItems = (lstBoxItem).Split(Convert.ToChar(","));

            serviceClient.GetSectionDetailCompleted += new EventHandler<GetSectionDetailCompletedEventArgs>(serviceClient_GetSectionDetailCompleted);
            serviceClient.GetSectionDetailAsync(strItems[1], cbDeptSections.SelectedItem.ToString());
        }

        void serviceClient_GetSectionDetailCompleted(object sender, GetSectionDetailCompletedEventArgs e)
        {
            CompositeType compositeObj = e.Result;
            //lbSectionDetail.Items.Clear();
            lbSectionDetail.Items.Add(compositeObj.SectionID);
            lbSectionDetail.Items.Add(compositeObj.SectionName);
            lbSectionDetail.Items.Add(compositeObj.SectionLecturers);
        }
    } 
```

* * *

主页.xaml

```
<StackPanel>

        <StackPanel        
            x:Name      ="LayoutRoot"
            Background  ="White"
            Orientation ="Horizontal"
            >

            <ComboBox
                x:Name                      ="cbDeptID"
                MinWidth                    ="50"
                HorizontalContentAlignment  ="Center"
                DisplayMemberPath           ="Key"
                SelectedValue               ="{Binding ElementName=cbDeptName, Path=SelectedValue, Mode=TwoWay}"
                />

            <ComboBox
                x:Name              ="cbDeptName"
                MinWidth            ="50"
                DisplayMemberPath   ="Value"
                SelectionChanged    ="cbDeptName_SelectionChanged"
                />

            <ComboBox
                x:Name              ="cbDeptSections"
                MinWidth            ="100"
                SelectionChanged    ="cbDeptSections_SelectionChanged"
                />

        </StackPanel>

        <ListBox
            x:Name                                      ="lbSectionDetail"
            ScrollViewer.HorizontalScrollBarVisibility  ="Auto"
            ScrollViewer.VerticalScrollBarVisibility    ="Auto"
            /> 
```

客户端访问策略.xml

```
<?xml version="1.0" encoding="utf-8" ?>
<access-policy>
    <cross-domain-access>
        <policy>
            <allow-from http-request-headers="SOAPAction">
                <domain uri="*"/>
            </allow-from>
            <grant-to>
                <resource path="/" include-subpaths="true"/>
            </grant-to>
        </policy>
    </cross-domain-access>
</access-policy> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:10:06.707

我认为您多次通话的罪魁祸首可能是

```
serviceClient.GetSectionDetailCompleted += new EventHandler<GetSectionDetailCompletedEventArgs>(serviceClient_GetSectionDetailCompleted); 
```

在我看来，您多次注册完成事件，但从不取消注册。调用`cbDeptName_SelectionChanged`和的次数`cbDeptName_SelectionChanged`越多，创建的事件处理程序就越多。当您的服务返回响应时，它们都会被调用。

编辑：当您的应用程序加载时第一次调用这些方法的原因是因为在绑定组合框控件时，它们会自动将其选定项目更改为列表中的第一项，从而调用`SelectionChanged`事件。

编辑2：为避免多次调用同一事件，您应该**仅**在您的事件上注册该`Loaded`事件，就像您这样做`serviceClient.GetDeptIDNameCompleted`

您的 Load 事件应如下所示：

```
private void UserControl_Loaded(object sender, RoutedEventArgs e)
{
    // Put these here instead of where they are now
    serviceClient.GetSectionsListCompleted += new EventHandler<GetSectionsListCompletedEventArgs>(serviceClient_GetSectionsListCompleted);
    serviceClient.GetSectionDetailCompleted += new EventHandler<GetSectionDetailCompletedEventArgs>(serviceClient_GetSectionDetailCompleted);

    serviceClient.GetDeptIDNameCompleted += new EventHandler<GetDeptIDNameCompletedEventArgs>(serviceClient_GetDeptIDNameCompleted);
    serviceClient.GetDeptIDNameAsync();
} 
```

不要忘记从它们现在在代码中的位置删除这些行。

# firefox - 不支持“video/mp3”的 HTTP“Content-Type”

> ID：12530828
> 
> 赞同：0
> 
> 时间：2012-09-21T12:41:57.680
> 
> 标签：firefox, html5-video

我在 Firefox 上运行 mediaelement 然后 Firefox 在下面抛出错误消息

不支持“video/mp3”的HTTP“Content-Type”。加载媒体资源xxxxxx

请任何人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:46:13.287

mp3 的 Content-Type 不是**video/mp3**它是**audio/mpeg 。您可以**[在此处](http://en.wikipedia.org/wiki/Internet_media_type#Type_audio)参考媒体类型 。

如果你想播放 MP4 文件，那么它必须是**video/mp4 。你可以**[在这里](http://en.wikipedia.org/wiki/Internet_media_type#Type_video)查看更多的视频媒体类型

您可以[在此处](https://developer.mozilla.org/en-US/docs/Media_formats_supported_by_the_audio_and_video_elements)参考Firefox 支持的媒体类型。

# android - 如何在Android中振铃时接收呼叫方键盘上按下的号码？

> ID：12530834
> 
> 赞同：2
> 
> 时间：2012-09-21T12:42:14.130
> 
> 标签：android, telephonymanager

我正在开发一个 android 应用程序，我想知道是否有可能在被叫方的电话上接收数字或 DTMF 音或任何此类相关数据，主叫方正在他/她的手机上打字，而对方的电话被叫方正在振铃。

为了使问题更清楚，请考虑以下两个人 A 和 B 的情况：

1.  呼叫者**A**正在呼叫**B**。
2.  **B**的电话在**响**。
3.  ****当电话还在响铃时，** **A**在他的电话上键入一个序列或一个数字。**
***   这些数字是在**B**的电话上收到的。*   根据它是什么数字/什么序列，将在**B**的手机上触发一个动作（通过我的应用程序）。**

 **我只是想知道上述情况或任何等效或远程类似的情况是否可能。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:45:27.253

不能。首先，我们无法访问通话中的音频流，除非电话处于免提模式。其次，我不知道有任何 Android 设备会在用户未拿起电话的铃声上播放来电的音频。**

# python - 在 Python 中获取概率分布

> ID：12530835
> 
> 赞同：0
> 
> 时间：2012-09-21T12:42:19.163
> 
> 标签：python, distribution, probability

我在文件中有以下几行数据（当然还有更多行）：

```
data1 0.20
data2 2.32
data3 0.02
dataX x.xx

data1 1.13
data2 3.10
data3 0.96
dataX x.xx

.... 
```

我想为每个数据创建概率分布*。我可以手动做到这一点，但也许有一个库可以让我更自动地做到这一点。理想情况下，我想避免预先格式化行（并用上述行提供库，但如果不可能，我将不得不这样做）。

更新

对不起，不准确。我想找到的是有多少数字属于自定义范围。例子：

```
[0.0 - 0.1) - 2 numbers;
[0.1 - 0.2) - 3 numbers;
[0.2 - 0.3) - ... 
```

当然，我想轻松设置不同的范围（更宽或更窄），然后 - 有了它 - 我想生成图表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:35:11.943

“概率”的概念有点微妙——如果数据是平稳随机过程的输出，那么您可以通过测量过去的输出来估计该过程未来输出的概率。但是相同的数据集可以确定性地生成，在这种情况下不涉及概率，并且每次运行该过程时，您都会得到相同的数据（而不是具有相似分布的不同数据）。

在任何一种情况下，您都可以通过将数据分箱为直方图来获得数据的分布。可以通过以下方式将数据格式化为单独的列表：

```
import collections, re

data = ["data1 0.20", "data2 2.32", "data3 0.02",
        "data1 1.13", "data2 3.10", "data3 0.96" ]

hist = collections.defaultdict(list)
for d in data:
    m = re.match("data(\d+)\s+(\S+)", d)
    if m:
        hist[int(m.group(1))].append(float(m.group(2)))
for k in hist.keys():
    print(k, hist[k]) 
```

生产：

```
1 [0.2, 1.13]
2 [2.32, 3.1]
3 [0.02, 0.96] 
```

然后，您可以使用[如何在 Python 中将一系列浮点值合并到直方图中来构建直方图？](https://stackoverflow.com/questions/1721273/howto-bin-series-of-float-values-into-histogram-in-python). 最后，对 bin 值进行归一化，使其总和为 1.0（将每个 bin 除以所有 bin 的总数）以形成概率分布。不是用于创建数据**的概率分布，而是它的近似值。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:23:50.917

您可以使用[scipy stats norm](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.norm.html)（和集合）。

拆分您的数据（我认为您的意思是采用这种形式）：

```
raw_data = ( line.split() for line in raw_data.split('\n') )

data = collections.defaultdict(list)
for item in raw_data:
    data[item[0]] = item[1]

data['data1'] # [0.2, 1.13...] 
```

然后对于每个数据集：

```
for i in xrange(X):
    scipy.stats.norm.fit(data['data'+i]) # (mean, standard deviation)

scipy.stats.norm.fit(data['data1']) # (0.66499999999999992, 0.46499999999999991) 
```

目前尚不清楚您的确切概率是多少，但均值和标准差是一个好的开始（您可以在[scipy 的统计函数](http://docs.scipy.org/doc/scipy/reference/stats.html#statistical-functions)中找到其他概率）。

# spring-security - Spring Security - bean类[org.springframework.security.authentication.UsernamePasswordAuthenticationToken]的无效属性'principal'

> ID：12530837
> 
> 赞同：1
> 
> 时间：2012-09-21T12:42:25.303
> 
> 标签：spring-security, principal

我必须为一个项目实现一个自定义的“身份验证提供程序”，但是当我尝试在 JSP 中访问身份验证的对象属性时遇到了麻烦。详细信息：我的自定义身份验证提供程序成功创建了一个身份验证对象

```
Authentication auth = new UsernamePasswordAuthenticationToken(username, password, getAuthorities(userRoles));
log.info("User is authenticated");
return auth; 
```

（这里只有相关代码）

然后，在控制器方法中，我只显示带有用户名的日志消息（这证明 Authentication 对象已创建并放置在安全上下文中）：

```
Authentication auth = SecurityContextHolder.getContext().getAuthentication();        
log.info("Welcoming user " + auth.getPrincipal()); 
```

然后在 JSP 页面中，我想使用显示用户名

```
<sec:authentication property="principal"/> 
```

但是，这会引发错误 500：

```
org.springframework.beans.NotReadablePropertyException: Invalid property 'principal' of bean class [org.springframework.security.authentication.UsernamePasswordAuthenticationToken]: Bean property 'principal' is not readable... 
```

我也注意到

```
<sec:authorize ifAnyGranted="role">... 
```

不起作用，尽管用户在 Authentication 对象中添加了必要的角色。

有什么我做错了吗？身份验证工作正常，我只是无法访问身份验证对象的属性。

非常感谢，祝您有美好的一天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:58:24.997

您的 AuthenticationProvider 必须返回 UserDetails 对象。

来自 spring 文档 这个标签允许访问存储在安全上下文中的当前 Authentication 对象。它直接在 JSP 中呈现对象的属性。因此，例如，**如果 Authentication 的 principal 属性是 Spring Security 的 UserDetails 对象的一个​​实例，那么 using 将呈现当前用户的名称。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:13:01.010

鉴于我看不出您的情况有什么问题，我认为这可能是[SPR-8347](https://jira.springsource.org/browse/SPR-8347)错误，该错误已在 Spring 3.1.1 中修复。可以升级吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-20T14:47:30.317

老问题，但我认为我可以帮助其他人。

作为 UsernamePasswordAuthenticationToken 的第一个参数，您可以发送一个用户。

而不是传递用户名，而是传递用户本身。但用户必须是扩展 org.springframework.security.core.userdetails.UserDetails 的类：

```
Authentication auth = new UsernamePasswordAuthenticationToken(user, password, getAuthorities(userRoles));
log.info("User is authenticated");
return auth; 
```

查看您使用的方法：

```
public UsernamePasswordAuthenticationToken(Object principal, Object credentials,
            Collection<? extends GrantedAuthority> authorities) {
        super(authorities);
        this.principal = principal;
        this.credentials = credentials;
        super.setAuthenticated(true); // must use super, as we override
    } 
```

现在，在你的 tamplete 中，嗯可以使用这样的东西：

```
<span class="hidden-sm-down" sec:authentication="principal.email">Email</span> 
```

# openid - 了解 OpenID 消息流

> ID：12530844
> 
> 赞同：3
> 
> 时间：2012-09-21T12:42:56.150
> 
> 标签：openid, dotnetopenauth

作为 OpenID 的新手，我已经阅读了 v2.0 规范并勾勒出我认为在一个相当简单的身份验证案例中发生的事情。然后我下载了 DotNetOpenAuth 示例，并使用这些和各种网络搜索试图更好地理解示例和流程，但我很挣扎。
我正在尝试编写一个 OpenID 提供程序，但由于 DotNetOpenAuth 的文档太少，我可以找到的文档太少，而且周围的各种教程要么太简短、太旧 (v1) 或太混乱，因此很难学习每一步。
我想在 OpenID 网站上解密与谷歌的对话，但谷歌设法阻止 Fiddler 解密其 ssl 流量。
谁能指出我编写 OpenID 提供程序的技术但清晰的教程/介绍/指南，最好使用 DotnetOpenAuth 库？我想我快到了！
TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:49:25.447

我希望[这](http://scatteredcode.wordpress.com/2011/12/01/dotnetopenauth-oauth-and-mvc-for-dummies/)和/或[这](http://blog.techcle.com/2010/03/20/simple-oauth-integration-for-twitter-in-asp-net-mvc/)可以帮助你。

编辑：也找到[了这个例子](http://weblogs.asp.net/haithamkhedre/archive/2011/03/13/openid-authentication-with-asp-net-mvc3-dotnetopenauth-and-openid-selector.aspx)。

我也在努力理解和找到很多有用的材料`dotnetopenauth`。

# jquery - 附加 Facebook 喜欢按钮

> ID：12530845
> 
> 赞同：1
> 
> 时间：2012-09-21T12:43:01.370
> 
> 标签：jquery, ajax, facebook, facebook-like

我想使用动态 URL 将 Facebook like 按钮附加到某个 div。请看一下这个简单的动态 URL 示例：[JsFiddle](http://jsfiddle.net/f6Lfs/3/)

所以现在我将代码放在 ajax 调用中，但它不起作用：[JsFiddle](http://jsfiddle.net/m4QCt/149/)

奇怪的是，当我使用 chrome 开发人员查看源代码时，我可以看到带有适当 URL 的类似按钮。但它没有显示，因为尺寸是 0 x 0 ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T12:47:58.020

相关的stackoverflow帖子：[为什么我的Facebook Like按钮坏了？](https://stackoverflow.com/questions/7311721/why-is-my-facebook-like-button-broken/)

因为 facebook 脚本通过 DOM 来获取点赞按钮，并且您在事后添加了这些按钮，所以您必须告诉它再次查看。看来这`FB.XFBML.parse();`将是解决这个问题的关键。

# c# - 在 datagridview 和 windows 窗体之间进行通信

> ID：12530852
> 
> 赞同：0
> 
> 时间：2012-09-21T12:43:22.477
> 
> 标签：c#, datagridview

我有一个显示来自 mysql 数据库的数据的 datagridview。我还有一个显示相同信息的表单，但此表单使用绑定导航器来显示每条记录。我希望当我双击 datagridview 中的一行时，会显示具有相关行的绑定导航器表单。我在网上看到一些代码将参数传递给表单的构造函数，但这对我不起作用，这是我目前在 datagridview 表单上的内容。

```
if (this.dataGridView1.CurrentCell != null)
        { 
            DataGridViewRow r = dataGridView1.CurrentRow;
            Add_Edit ae = new Add_Edit(r);
            ae.Show();
        } 
```

这在这个绑定导航器表单上

```
private DataGridViewRow row;    
    public Add_Edit(DataGridViewRow row)
    {

        InitializeComponent();
        this.row = row;
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:18:43.397

您不应该将 DataGridViewRow 传递给其他表单，因为它不应该知道您正在使用 DataGridView（但这是一个高级编程主题）。请改用绑定到 DataGridViewRow 的对象。

```
private void dataGridView1_CellDoubleClick(object sender, DataGridViewCellEventArgs e) {
    object item = dataGridView1.Rows[e.RowIndex].DataBoundItem;
    Add_Edit ae = new Add_Edit(item);
    ae.Show();
} 
```

将 Add_Edit 的构造函数参数更改为 object 类型，因为 DataBoundItem 将返回一个，并将其分配给用于填充导航器的 BindingSource。因为您不能直接设置 SelectedItem，所以您必须获取该项目的 BindingSource 索引并设置它的 Position 属性。

```
public Add_Edit(object item) {
    InitializeComponent();

    bindingSource1.Position = bindingSource1.IndexOf(item);
} 
```

# ruby - 使用 em-http-request 没有性能提升

> ID：12530853
> 
> 赞同：1
> 
> 时间：2012-09-21T12:43:22.763
> 
> 标签：ruby, sinatra, eventmachine

我试图了解如何在 Ruby 中使用各种非阻塞 IO 库，并制作了一个简单的应用程序来使用 Sinatra 进行测试，

```
# proxy.rb
require 'bundler/setup'
require 'sinatra/base'
require 'sinatra/synchrony'
require 'faraday'

class ProxyApp < Sinatra::Base
  register Sinatra::Synchrony

  get "/proxy" do
    conn = Faraday.new("http://mirror.yandex.ru") do |faraday|
      faraday.use Faraday::Adapter::EMSynchrony
    end
    conn.get "/ubuntu-releases/precise/ubuntu-12.04.1-alternate-i386.iso"
    "Hello, world"
  end

  get "/" do
    "Hello, world"
  end
end 
```

据我了解，使用非阻塞 IO 下载文件应该允许执行其他请求，但它不会 - 如果我使用`ab`打开`/proxy`路径（我使用 Thin 作为应用程序服务器），请求`/`接受很长一段时间。难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:00:15.193

西纳特拉::同步？为什么？

配置.ru：

```
require File.join Dir.pwd, 'proxy.rb'
run Proxy 
```

宝石文件：

```
source 'https://rubygems.org'

gem 'sinatra'
gem 'thin'
gem 'faraday'
gem 'em-synchrony'
gem 'em-http-request'
gem 'rack-fiber_pool' 
```

代理.rb：

```
require 'bundler'
Bundler.require

class Proxy < Sinatra::Base
  use Rack::FiberPool

  get "/proxy" do
    conn = Faraday.new("http://mirror.yandex.ru") do |faraday|
      faraday.use Faraday::Adapter::EMSynchrony
    end
    conn.get "/ubuntu-releases/precise/ubuntu-12.04.1-alternate-i386.iso"
    "Hello, world"
  end

  get "/" do
    "Hello, world"
  end
end 
```

开始：

```
thin start -d
wget localhost:3000/proxy 
```

在另一个终端：

```
wget localhost:3000/ 
```

无论您在并行中对 /proxy 提出多少请求，都会立即回复 /。

# php - Google API Oauth php 永久访问

> ID：12530854
> 
> 赞同：16
> 
> 时间：2012-09-21T12:43:26.053
> 
> 标签：php, google-api, oauth-2.0, access-token

我正在使用谷歌日历 API。这就是我想要的，一旦您授予应用程序权限，我就可以随时使用该应用程序，而无需每天授予访问权限。我一直听说我需要保存访问令牌或使用刷新令牌来做我想做的事情。这是事情，你是怎么做的？代码看起来如何？我尝试将令牌保存在 cookie 中，但一个小时后，访问令牌已过期。如何让用户保持登录状态？

PS：请给我带有解释的代码示例。

这是我的代码（使用 CakePHP）：

```
$client = new Google_Client();

    $client->setApplicationName("Wanda3.0 Agenda");

    $cal = new Google_CalendarService($client);

    if (isset($_GET['code'])) {

        $client->authenticate($_GET['code']);

        $_SESSION['token'] = $client->getAccessToken();

        header('Location: http://'.$_SERVER['HTTP_HOST'].$_SERVER['PHP_SELF']);

    }

    if (isset($_SESSION['token'])) { $client->setAccessToken($_SESSION['token']); }

if ($client->getAccessToken()) {
        /************* Code entry *************/

    }else{
        /************* Not connected to google calendar code *************/
        $authUrl = $client->createAuthUrl();

        $returnArr = array('status' => 'false', 'message' => "<a class='login' href='$authUrl'>Connect Me!</a>");

        return $returnArr;

    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-24T07:06:12.350

好的，等了几天，Terry Seidler 的建议（下面的评论）让这一切都发生了！这是我关于如何自动刷新访问令牌而不每次使用 cookie 进行身份验证的代码。

（注意：将刷新令牌保存在数据库中更安全）

这就是魔法（使用 cookie）：

```
$client = new Google_Client();

    $client->setApplicationName("Wanda3.0 Agenda");

    $cal = new Google_CalendarService($client);

    $client->setAccessType('offline');

    if (isset($_GET['code'])) {

        $client->authenticate($_GET['code']);

        $_SESSION['token'] = $client->getAccessToken();

        header('Location: http://'.$_SERVER['HTTP_HOST'].$_SERVER['PHP_SELF']);

    }

    //Where the magic happends
    if (isset($_SESSION['token'])) {

        //Set the new access token after authentication
        $client->setAccessToken($_SESSION['token']);

        //json decode the session token and save it in a variable as object
        $sessionToken = json_decode($_SESSION['token']);

        //Save the refresh token (object->refresh_token) into a cookie called 'token' and make last for 1 month
        $this->Cookie->write('token', $sessionToken->refresh_token, false, '1 month');
    }

    //Each time you need the access token, check if there is something saved in the cookie.
    //If $cookie is empty, you are requested to get a new acces and refresh token by authenticating.
    //If $cookie is not empty, you will tell the client to refresh the token for further use,
    // hence get a new acces token with the help of the refresh token without authenticating..
    $cookie = $this->Cookie->read('token');

    if(!empty($cookie)){
        $client->refreshToken($this->Cookie->read('token'));
    } 
```

就是这样！如果您有任何疑问，请随时在下面发表评论，我会尽力回答。祝你好运，干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:23:30.333

您应该将其保存在数据库中并使用它，而不是使用 cookie 和会话。

drupal 站点的类似实现位于[http://drupal.org/sandbox/sadashiv/1857254](http://drupal.org/sandbox/sadashiv/1857254)的 Google OAuth2 沙箱中。 此模块允许您处理来自 drupal 管理界面的身份验证。然后，您可以使用从 google 获取的访问令牌，然后使用 google_oauth2_account_load 或 google_oauth2_client_get 的 api 函数获取 Google_Client 并携带您的 api 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T07:53:02.717

与希望行业非常相似，但经过测试，我只想在必要时刷新令牌。完整源代码只需更改顶部的键等：

```
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_CalendarService.php';
session_start();
$client = new Google_Client();
$client->setApplicationName("Google Calendar PHP Starter Application");
// Visit https://code.google.com/apis/console?api=calendar to generate your
// client id, client secret, and to register your redirect uri.
$client->setClientId('your_id');
$client->setClientSecret('your_secret');
$client->setRedirectUri("http://localhost/your_redirect.php");
$client->setDeveloperKey('your_key');

$cal = new Google_CalendarService($client);

if (isset($_GET['code'])) {
    $client->authenticate($_GET['code']);
    $_SESSION['token'] = $client->getAccessToken();
    header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'] . $query_string);
}

if (isset($_SESSION['token'])) {
    $client->setAccessToken($_SESSION['token']);//update token
    //json decode the session token and save it in a variable as object
    $sessionToken = json_decode($_SESSION['token']);
    //Save the refresh token (object->refresh_token) into a cookie called 'token' and make last for 1 month
    if (isset($sessionToken->refresh_token)) { //refresh token is only set after a proper authorisation
        $number_of_days = 30 ;
        $date_of_expiry = time() + 60 * 60 * 24 * $number_of_days ;
        setcookie('token', $sessionToken->refresh_token, $date_of_expiry);
    }
}
else if (isset($_COOKIE["token"])) {//if we don't have a session we will grab it from the cookie
    $client->refreshToken($_COOKIE["token"]);//update token
}

if ($client->getAccessToken()) {
    $calList = $cal->calendarList->listCalendarList();
    print "<h1>Calendar List</h1><pre>" . print_r($calList, true) . "</pre>";
    $_SESSION['token'] = $client->getAccessToken();
} else {
    $authUrl = $client->createAuthUrl();
    print "<a class='login' href='$authUrl'>Select a calendar!</a>";
} 
```

# html - IE中的表td固定大小

> ID：12530857
> 
> 赞同：1
> 
> 时间：2012-09-21T12:43:32.423
> 
> 标签：html, internet-explorer

HTML 是

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">

<html>
<body>
    <table width="100%" border="1" cellspacing="0" cellpadding="0">
        <tbody>

            <tr>
                <td  valign="top" align="right" style="height:10px;vertical-align:center;background-repeat: no-repeat;">
                    <div><img width="25" height="16" src="images/hide.jpg" id="hide"></div>
                </td>   
                <td rowspan="2" valign="top">
                 <iframe src="dynamic.html" id="mainFrame" name="mainFrame" frameborder="0" scrolling="no" width="1100" height="500"></iframe>
                </td>
            </tr>

            <tr>
                <td valign="top">
                <iframe src="navigation.html" id="leftFrame" name="leftFrame" frameborder="0" scrolling="auto" width="200" height="500"></iframe>
                </td>
            </tr>
        </tbody>
    </table>
</body>
</html> 
```

首先按预期在每个浏览器中工作，但在**IE** 中打开 mainFrame 中的任何文档时，它会被拉伸，如下所示

![在此处输入图像描述](../Images/e33cee28b6b1c4e3d4971f9cd0fb30d5.png)

当我在大型机中打开任何文档时，它会像这样拉伸行

![在此处输入图像描述](../Images/af026f90a774f79500acc06277c31500.png)

如何摆脱这个..

# ios - iOS 6 UIGestures (Swipe) 停止使用 QLPreviewController

> ID：12530859
> 
> 赞同：8
> 
> 时间：2012-09-21T12:43:35.803
> 
> 标签：ios, uigesturerecognizer, ios6, qlpreviewcontroller

在 iOS 6 beta 4 和 iOS 5.1.1 中，我有左/右滑动允许用户在不同的 QLPreviewControllers 之间滑动，托管在 UIViewController 中。

在 iOS 6 的发布版本中，现在完全忽略了滑动。

试图将 UIView 作为预览控制器的子视图，以试图让托管预览控制器的视图在预览控制器有机会吞下它们之前拦截滑动，但这些从未被触发。

任何看到这个或知道解决方法的人。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:12:16.920

我遇到了同样的问题，但 UITapGestureRecognizer 不能在 QLPreviewController 上工作。在 iOS 6 中，这对于 UIGestureRecognizer 对象来说就像是一个黑洞……没有什么能让它脱离那里！

但是我确实找到了解决方法。我是 QLPreviewController 的子类，所以在我的子类中我滥用了（相对）新的 viewWillLayoutSubviews 方法并添加了以下代码片段：

```
UIView *overlay = [[UIView alloc] initWithFrame:self.view.frame];
overlay.backgroundColor = [UIColor whiteColor];
overlay.alpha = .002f;
for (UIView *v in self.view.subviews)
{
    [v addSubview:overlay];
}
[overlay release]; 
```

这可能有点矫枉过正，但我​​基本上进入了所有快速查看子视图，并向它们添加了一个可以接受手势的视图。我选择了 .002 alpha，因为降低它会导致手势再次被忽略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T07:52:39.217

我还发现使用相同的代码，UIGestureRecognizers 已经停止在 iOS 6 下工作。但它并没有完全损坏。Apple 开发示例项目“SimpleGestureRecognizers”仍然有效。比较代码后，我发现明确的“addGestureRecognizer”解决了问题（除了您在 IB 下使用的所有其他步骤）。假设您的 IBOutlets 名称之一是 leftSwiftRecognizer，您可以这样做：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    ....
    // swipe recognizer
    [self.view addGestureRecognizer:self.leftSwiftRecognizer];

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T17:39:26.053

您尝试的解决方案很接近，但可能与您应该做的相反。与其将另一个视图添加为预览控制器的子视图，不如将预览控制器添加为 UIView 的子视图。

在标准 UIView 中子视图预览控制器。然后，将您的手势重新分配给 UIView 的 gestureRecognizers 集合，将它们从 QLPreviewController 的集合中删除。

不知道为什么会发生这种变化，但我的应用程序也遇到了同样的问题，除了我，它是 UITableView 不再滚动了。

# html - 文字间距大，怎么解决？

> ID：12530860
> 
> 赞同：0
> 
> 时间：2012-09-21T12:43:44.710
> 
> 标签：html, css

我有两个 div 在浏览器中预览时它们之间有很大的差距。

代码：

```
<div id="title-1">
        <p>XXX is pleased to announce the launch of our Social Enterprise - Experience Us</p>
    </div>
    <div id="maindescription-1">
        <p>XXX are conducting unique tours to celebrate us, the beating heart of our culture in Scotland.  We will be 
        taking people on a journey through Glasgow, Scotland on a guided tour about the stories of the locals and pioneers that
        made Glasgow what it is today, and then expanding the experiences with tasting tours of the variety of delicious cuisines
        on offer.  Please see below for more information:</p> 
```

CSS：

```
#title-1 {
    font: normal normal bold 100% "Trebuchet MS", "Lucida Sans Unicode", "Lucida Grande", "Lucida Sans", Arial, sans-serif;
    float: left;
    width: 850px;
    padding: 10px;
    color: #FFFF00;
    text-align: justify;
    vertical-align: baseline;
}
#maindescription-1 {
    font: 100% "Trebuchet MS", "Lucida Sans Unicode", "Lucida Grande", "Lucida Sans", Arial, sans-serif;
    float: left;
    width: 850px;
    padding: 10px;
    color: #FFFFFF;
    text-align: justify;
    vertical-align: baseline;
} 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T06:01:48.067

您可以使用重置来防止浏览器默认设置偷偷摸摸。我喜欢 Eric Meyer 的重置： [http ://bkaprt.com/rwd/9/](http://bkaprt.com/rwd/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:44:34.893

只需调整元素的边距和填充（默认情况下在每个浏览器上应用不同）`<p>`

例如

```
p {
    margin : 1em 0 0 0; // or 0
    padding : 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:46:53.517

首先你需要关闭最后一个 div

```
 <div id="title-1">
            <p>XXX is pleased to announce the launch of our Social Enterprise - Experience Us</p>
        </div>
        <div id="maindescription-1">
            <p>XXX are conducting unique tours to celebrate us, the beating heart of our culture in Scotland.  We will be 
            taking people on a journey through Glasgow, Scotland on a guided tour about the stories of the locals and pioneers that
            made Glasgow what it is today, and then expanding the experiences with tasting tours of the variety of delicious cuisines
            on offer.  Please see below for more information:</p>    
</div> 
```

你应该将 p 的边距设置为 0

```
p 
{
    margin : 0;
} 
```

# c# - 如何将 Windows 窗体另存为 pdf

> ID：12530867
> 
> 赞同：2
> 
> 时间：2012-09-21T12:44:00.130
> 
> 标签：c#, pdf, visual-studio-2005, pdfsharp

我正在 Microsoft Visual Studio 2005 中创建一个包含多个表单的 Windows 应用程序。我希望用户能够将当前打开的表单导出为 PDF 文件。我遇到了一些推荐 PDFSharp 的答案，但我不知道如何使用它……我试图通过阅读论坛、其他问题和答案来弄清楚，但我不知道从哪里开始。那么，有人可以通过告诉我如何在我的项目中使用 PDFSharp 来帮助我开始吗？

我已经尝试过以下方法： [Converting windows form in C# to PDF using PdfSharp](https://stackoverflow.com/questions/10618036/converting-windows-form-in-c-sharp-to-pdf-using-pdfsharp)

从我的 GDI+ 文件夹中将引用“PdfSharp”添加到我的项目后，我无法将变量创建为 PdfDocument 类型。

或者，如果你们对如何将 Windows 窗体保存为 pdf 有其他建议/建议，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:30:16.283

只需包含`using PdfSharp.Pdf;`在 C# 文件的开头即可。

# php - 在带有反馈的 2 台服务器之间传输文件

> ID：12530872
> 
> 赞同：2
> 
> 时间：2012-09-21T12:44:24.347
> 
> 标签：php, ftp

我需要在 Server_1 上实现 Wordpress（或其他一些 CMS）网站，当用户上传文件时，它们会被传输到另一个 Server_2，由某个应用程序处理并返回到 Server_1，以便用户可以下载或查看。因为文件可能很大，我发现最好的解决方案是 FTP 传输，例如：[http://www.designaeon.com/transfer-files-bw-servers-php](http://www.designaeon.com/transfer-files-bw-servers-php) 传输文件时，应启动 Server_2 上的应用程序并在它处理文件之后，它们应该返回到 Server_1。

所以我的问题是：实现这一点的最佳方法是什么？

我是否应该使用 php 和 ftp 传输以及一些侦听器来检查 Server_2 上的文件夹（如果文件已处理）或某些外部应用程序每隔几分钟检查一次文件夹并复制到另一个服务器文件...我将不胜感激有关如何实现这一点以及在哪里看。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:23:14.747

这是一种可能的方法：

1.  在 Server_1 上，通过 http 可访问文件夹将新上传的文件托管在一个秘密中。
2.  在 Server_2 上，托管一个能够下载、处理和输出文件的 php。
3.  上传文件时，将其放在可访问的文件夹中，然后使用 curl 或 wget 查询 Server_2 上的 php，将 URL 传递给新上传的文件（即`wget http://server_2/path/to/processor.php?file=http://server_1/path/to/secret/dir/original.pdf`）
4.  然后，processor.php 将下载该文件，对其进行修改并作为响应将其写回 Server_1 上的 curl 或 wget 进程
5.  让 Server_1 上的 curl 或 wget 进程将修改后的文件保存到您想要的位置。

# mysql - 保留跟踪

> ID：12530875
> 
> 赞同：1
> 
> 时间：2012-09-21T12:44:35.490
> 
> 标签：mysql, sql, excel, pivot, ansi-sql

**假设我有一个愤怒的小鸟游戏。**

我想知道有多少玩家在系统的LTV中购买了前几个月购买了猛鹰武器的玩家每个月购买了“猛鹰”武器

我有每个客户购买的所有物品的日期。

我实际上想要的是一个二维矩阵，它将告诉我对于当前特定月份的 X<Y 的每种组合，从 LTV_month_X 移动到 LTV_month_Y 的玩家百分比是多少？

**一个例子：**

[example_png](http://i.stack.imgur.com/nSTf9.png) （它没有让我把图片内联，所以请点击链接查看图片）

现在，我找到了一种方法，可以`LTV_month_X to LTV_month_Y that LTV_month_Y`使用 SQL 查询和 Excel 数据透视表来获取实际移动的玩家数量是他们当前在系统内的活动月份。

我试图找出的主要是如何获得可能进行这种转变的人的基数。

几个定义： `LTV_month_X = DATEDIFF(MONTH, first_eagle_month, specific_eagle_month)+1`

最好我想在**ANSI-SQL**中有解决方案，如果没有，那么 MySQL 或 MSSQL 但**根本不应该使用 Oracle 函数**。

由于我正在寻找过渡两步计划的百分比也可以工作，所以首先找到潜在的，然后找到实际的，以衡量从 LTV_month_X 到 LTV_month_Y 的留存率。

最后一个问题：我需要能够向下钻取并找到从任何阶段 X 移动到任何其他阶段 Y (> X) 的客户的实际 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:19:19.913

LTV 一词在这里的使用并不清楚。我假设您的意思是用户的生命周期。

如果我理解了这个问题，您是在问，基于每个具有一个或多个事件的实体列表，我如何按最后一个事件的月份和最后一个事件的前一个月对实体进行分组（例如计数）。

在 mysql 中，您可以使用变量来执行此操作。我不打算解释整个概念，但基本上，当您在 SELECT 语句中编写 @var:=column 时，该变量被分配该列的值，您可以使用它来比较连续列之间的值，例如最少（如果（@var=column,@same:=@same+1,@same:=0),@var:=column）

LEAST 的使用是确保执行顺序的技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:16:34.710

您正在寻找的二维是

1.  实际购买月份
2.  相对购买月份

```
 SELECT 
   player_id, 
   TRUNCATE(first_purchase,'MM') AS first_month , 
   TRUNCATE(current_purchase_date ,'MM') AS purchase_month, 
   months_between(current_purchase _date, first_purchase_date)+1 AS relative_month, 
   SUM(purchase_amount) AS total_purchase, 
   COUNT(DISTINCT player_id) AS player_count 
FROM ... 
```

现在您可以将购买月份转换为相对月份并进行汇总

# ruby - send_data 或 send_file(ruby) 在 Safari 浏览器中不起作用？

> ID：12530876
> 
> 赞同：3
> 
> 时间：2012-09-21T12:44:35.190
> 
> 标签：ruby, ruby-on-rails-3, safari

我使用以下代码在客户端的浏览器上发送或下载文件。在我刷新页面时单击链接后，这在所有浏览器中都可以正常工作，但在 safari 中它使我的会话为零。

def export_csv

csv = CSV.generate(:force_quotes => true) 做 |line| line <<[“员工代码”，“姓名”，“状态”，“技能”]
end

```
send_data csv,
  :type => 'text/csv; charset=iso-8859-1; header=present',
  :disposition => "attachment; filename=EmployeeSkillsData-#{Time.now.strftime('%d-%m-%y--%H-%M')}.csv" 
```

结尾

我也用其他一些应用程序尝试了这段代码，但结果是一样的。请帮助解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:24:34.723

```
send_data csv,
  :type => 'text/csv; charset=iso-8859-1; header=present',
  :disposition => "inline",  # optional
  :filename=>"EmployeeSkillsData-#{Time.now.strftime('%d-%m-%y--%H-%M')}.csv" 
```

# objective-c - UITableViewCell 内元素的垂直对齐方式

> ID：12530880
> 
> 赞同：0
> 
> 时间：2012-09-21T12:44:50.063
> 
> 标签：objective-c, uitableview

是否可以以编程方式设置 UITableView 原型单元（UILabel、UIImageView）内所有元素的垂直对齐方式（中间）？我想把它设置为中间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:00:55.817

是的，可以通过自定义单元格进行。

# visual-studio-2010 - Visual Studio 2010 中的键盘随机故障

> ID：12530885
> 
> 赞同：2
> 
> 时间：2012-09-21T12:45:04.177
> 
> 标签：visual-studio-2010

我无法追查为什么 Visual Studio 2010 中的随机操作会导致键盘和/或鼠标开始执行与预期不同的操作，或者经常停止响应某些操作。

我从来没有完全失去控制，但我可以从另一个屏幕返回 VS，并且可能会发生以下任何情况：

*   用鼠标单击文本，就像我按下 shift 键并尝试突出显示整个区域

*   箭头键将不再移动光标

*   删除、退格或回车将停止响应

我不确定它是否总是在从运行应用程序/调试返回之后，但这绝对是我遇到问题的大部分时间。大多数时候我必须完全关闭 VS 并重新启动才能恢复键盘功能。大多数时候，其他功能仍然有效，例如打字。

我应该注意，我总是检查另一个应用程序，这些键正在响应，因为它们应该验证它只是在 VS 中发生了问题。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:17:05.843

我偶尔并且很长一段时间都在 VS 中看到“粘性”修饰键（Ctrl、Alt、Shift），尤其是在退出调试会话之后。对我来说，通常是 Ctrl 键将 Shift-F5（停止调试）转换为 Ctrl-Shift-F5（重新开始调试）。这有点令人沮丧。

我知道的最好的解决方法是：当您注意到这种行为时，按下每个修改键以“松开”它们，这听起来就像您在“检查另一个应用程序”时所做的那样。

# iphone - 如何处理网络或服务器错误？

> ID：12530889
> 
> 赞同：0
> 
> 时间：2012-09-21T12:45:24.507
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在使用以下代码

```
NSMutableArray *image=[[NSMutableArray alloc]init];
    for(int i=1;i<4;i++)
    {
        NSString *urlString =[NSString stringWithFormat:@"http://www.isco.com/webproductimages/appBnr/bnr%d.jpg",i];
        NSData *photoData = [NSData dataWithContentsOfURL:[NSURL URLWithString:urlString]];
       [image addObject:photoData];
    } 
```

我的问题是，如果发生网络故障，它显示线程......如何处理这个线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:56:29.743

```
 NSMutableArray *image=[[NSMutableArray alloc]init];
        for(int i=1;i<4;i++)
        {
            NSString *urlString =[NSString stringWithFormat:@"http://www.isco.com/webproductimages/appBnr/bnr%d.jpg",i];

         NSError *error;
     NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:urlString] options:NSDataReadingUncached error:&error    ];

        if (data) {
      [image addObject:photoData];
         }
        else{
            if (error) {
                NSLog(error);
            }
        }

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:58:00.153

您的“线程”问题（这是一个错误/异常）可能是由多种因素引起的。可能是 Internet 连接中断，或者服务器抛出某种形式的 http 错误。

首先，确保在运行网络操作时不会丢失任何 Internet 连接。关于如何检查互联网连接有很多建议。一种是使用`Reachability`SDK本身提供的类。看看这篇文章如何做到这一点：[如何在 iOS 或 OSX 上检查活动的 Internet 连接？](https://stackoverflow.com/questions/1083701/how-to-check-for-an-active-internet-connection-on-iphone-sdk)

本文还将为您提供有关 Internet 连接的进一步见解：[Testing internet connection on iPad app using ios5](https://stackoverflow.com/questions/9094830/testing-internet-connection-on-ipad-app-using-ios5)

当您确定不是 Internet 连接，而是 http 服务器错误时。确保您调用的 http 服务正确地传回数据。我使用一些 REST 客户端工具来检查这个（[REST 客户端](https://code.google.com/p/rest-client/)）

最后，我测试了您尝试在浏览器上调用的 URL，它会引发`Bad Request`错误。这意味着它与您的 iOS 代码无关。如果此服务器在您的控制之下，您应该修复它。

# javascript - jQuery - 一一触发多个事件

> ID：12530895
> 
> 赞同：0
> 
> 时间：2012-09-21T12:45:42.463
> 
> 标签：javascript, dom, jquery

我正在使用 jquery [tagsInput 插件](http://xoxco.com/projects/code/tagsinput/)，我需要动态修改查询（删除查询或输入新查询），而无需实际输入与 tagsInput 插件连接的搜索框。

我的问题是我想先触发**退格事件**，然后再**输入事件**。这是代码。

```
function triggering_events() {
    $(".tag").each(function() {
        var e = jQuery.Event("keydown");
        e.keyCode = 8;
        e.which = 8;
        $("#input-search_tag").trigger(e); //triggering backspace event
    });
    var input = $("#input-search_tag");
    input.val("food");
    input.trigger(e); //triggering enter event
} 
```

但只有退格事件是从上面的代码触发的。如何使该输入事件起作用？

谁能指出我犯的错误？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:57:00.693

这里有一个问题：

```
$("#input-search_tag").val("food").trigger(e); //triggering enter event 
```

`.val()`返回 jquery 元素的字符串值，它不是可链接的方法。字符串没有`trigger`方法。

您可以通过将其拆分为两个调用来解决此问题：

```
var input = $("#input-search_tag");
input.val("food");
input.trigger(e); // triggering enter event 
```

或使用[`.end()`](http://api.jquery.com/end/)：

```
$("#input-search_tag").val("food").end().trigger(e); //triggering enter event 
```

编辑：将它们放在一起，以及重用一个事件而不是创建多个事件：

```
function triggering_events() {
    var e = jQuery.Event("keydown");

    e.which = 8;
    $(".tag").each(function() {
        $("#input-search_tag").trigger(e); // triggering backspace event
    });

    e.which = 13;
    $("#input-search_tag").val("food").end().trigger(e); // triggering enter event
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:47:45.413

您可以尝试使用这些方法`removeTag`并`addTag`删除和添加标签：

```
function triggering_events() {

    var 
        idInput = 'input-search',
        input = $("#" + idInput);

    $("#"+idInput+"_tagsinput .tag").each(function() {
        var tag = $.trim($(this).find('span:eq(0)').text());
        input.removeTag(tag);
    });

    input.addTag("food");
} 
```

[跑](http://jsfiddle.net/adescalzo/KnwYf/)

# java - 如何使用 selenium webdriver 中的 isTextPresent() 等效函数提高性能？

> ID：12530897
> 
> 赞同：0
> 
> 时间：2012-09-21T12:45:43.333
> 
> 标签：java, selenium, selenium-webdriver

我已经实现了数据驱动框架，因此我的 isTextPresent 函数可能具有动态值。另外，我的应用程序中需要有很多断言文本。我尝试使用 xpath 之类的

`boolean b=driver.findElement(By.xpath("//*[contains(.,stringc3)]")).getText().contains(stringc3);`

其中 stringc3 是要检查的文本。但是这个实现需要很长时间（使用 webdriverbackedselenium，我的测试过去需要大约 3 分钟，但使用 webdriver 及以上代码，大约需要 20 分钟）。那么有没有办法让这个测试运行得更快呢？

我知道现在支持从 selenium ide 导出这些函数（http://code.google.com/p/selenium/source/detail?r=17718）

那么，有没有打算在 webdriver 中实现 isTextPresent 功能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:41:57.290

我相信这不过是标签`isTextPresent`的内部文本。`body`因此，您可以先从页面中获取所有文本，然后再找到您需要的字符串。

```
string alltext = driver.findElement(By.tagName("body")).getText(); 
```

# javascript - 如何使用 HTML 切换表单我目前正在开发一个 Web 应用程序，该应用程序要求我根据用户的类别注册用户。我有一个组合框，用户可以在其中选择他们是哪种类型的用户。我要做的是根据用户选择的值显示一个相关的表格。我正在使用 PHP 来实现所有功能，但我是 jQuery 的新手。任何人都可以展示如何实现这一点，或者在不重新加载页面的情况下展示一种不同的方式吗？mp3 的 Content-Type 不是 video/mp3 它是 audio/mpeg。您可以在此处参考媒体类型。如果要播放 MP4

> ID：12530900
> 
> 赞同：0
> 
> 时间：2012-09-21T12:46:05.573
> 
> 标签：javascript, jquery, html, css

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T12:54:01.223

您可以尝试使用如图所示的类别下拉列表。

## HTML 代码

### 落下

```
<select id="category">
   <option value="#form1">Category 1</option>
   <option value="#form2">Category 2</option>
   <option value="#form3">Category 3</option>
</select> 
```

### 形式

```
<form id="form1">
</form>    

<form id="form2">
</form>

<form id="form3">
</form> 
```

## jQuery 代码

```
$(function(){
    var forms = $('form'); //cache all Forms
    forms.hide(); //hide initial

    $('#category').on('change', function(){
        forms.hide();                 //on change hide all forms
        var formId = $(this).val();   //get form id to show
        $(formId).show();    //find form by its id in cached forms and show.
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:51:28.923

您可以使用 jQuery [show()](http://api.jquery.com/show)和[hide()](http://api.jquery.com/hide)函数：

例子：

```
$('#form1').hide();
$('#form2').hide();
$('#form3').show(); 
```

在此示例中，您的表单定义如下：

```
<form id="form1">...</form>
<form id="form2">...</form>
<form id="form3">...</form> 
```

如果你想要一些效果，你也可以喜欢它并使用[fadeIn()](http://api.jquery.com/fadeIn/)和[fadeOut() 。](http://api.jquery.com/fadeOut/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:53:00.950

您可以使用 jQuery`toggle()`函数：

```
$('#your_form').toggle(); 
```

从[文档：](http://api.jquery.com/toggle/)

> 通过更改 CSS 显示属性，匹配的元素将立即显示或隐藏，没有动画。如果元素最初被显示，它将被隐藏；如果隐藏，它将显示。根据需要保存和恢复显示属性。如果一个元素的显示值为 inline，然后被隐藏并显示，它将再次被显示为 inline。

# c# - 为什么在空的用户定义结构上没有“使用未分配的局部变量”编译错误？

> ID：12530908
> 
> 赞同：8
> 
> 时间：2012-09-21T12:46:30.257
> 
> 标签：c#

以下编译成功：

```
struct Foo {}

void Test()
{
    Foo foo;
    foo.ToString();
} 
```

而以下产生“使用未分配的局部变量”编译错误。

```
struct Foo
{
    int i;
}

void Test()
{
    Foo foo;
    foo.ToString();
} 
```

似乎在第一种情况下，编译器做出了某种推断，即由于结构没有成员，因此不需要初始化它们。但我不确定这对我是否有意义。编译器可能会强制您将`foo`变量初始化为`new Foo()`.

那么，如果在 C# 中所有局部变量都必须在访问之前进行初始化，*那么为什么第一个示例会编译*？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T12:53:43.220

C# 5 规范的第 5.3 节涵盖了这一点：

> 如果*结构类型*变量的每个实例变量都被认为是明确分配的，则认为结构类型变量是明确分配的。

当没有实例变量时，自动出现这种情况，因此该变量被认为是明确分配的，并且可以在`ToString()`调用中使用。

# haskell - 我怎样才能给这个子函数一个明确的类型？

> ID：12530913
> 
> 赞同：4
> 
> 时间：2012-09-21T12:46:52.210
> 
> 标签：haskell, types, typeclass

我有以下haskell代码来扩展字符串中的环境变量（省略解析代码）：

```
import Control.Monad (liftM)

data Token = Literal String | EnvReference String deriving Show

expandTokens :: (Monad m) => (String -> m (Maybe String)) -> [Token] -> m String
expandTokens getEnv toks = liftM concat (mapM toString toks) where
    toString (Literal s) = return s
    toString (EnvReference v) = liftM (maybe "" id) (getEnv v) 
```

（它打算与 getEnv 的 IO 实现一起使用，但我认为如果可以与任何 monad 一起使用它会更好地进行测试）

当我写它的时候，我试图给嵌套`toString`函数一个明确的类型：

```
toString :: Monad m => Token -> m String 
```

但是 ghc 说：

```
Sample.hs:8:58:
    Could not deduce (m ~ m1)
    from the context (Monad m)
      bound by the type signature for
                 expandTokens :: Monad m =>
                                 (String -> m (Maybe String)) -> [Token] -> m String
( ... ) 
```

我知道expandTokens中的“Monad m”必须`m`与类型完全相同`toString`（因为它引用了`getenv`包含函数的），但我不知道如何编写一个明确的类型来`toString`尊重- 我不认为有任何方法可以引用不同类型声明中的任何内容，甚至可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T12:52:09.903

我想你正在寻找[`ScopedTypeVariables`](http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/other-type-extensions.html#scoped-type-variables). 我从来没有用过，但它看起来不错。

# android - 如何在上下文菜单中获取价值？

> ID：12530916
> 
> 赞同：0
> 
> 时间：2012-09-21T12:46:53.707
> 
> 标签：android, android-layout, contextmenu

> **可能重复：**
> [从 oncontextitemselected 获取视图 ID](https://stackoverflow.com/questions/6016569/get-view-id-from-oncontextitemselected)

我有包含项目**ID**（如 TextView）、**名称**和**描述**的项目列表视图，这些项目来自数据库。当我单击并按住一个列表项时，它将显示带有选项的上下文菜单`delete`和`rename`.

`id textView`我已经完成了这段代码，但问题是我如何从in获取 id `contextmenu onContextItemSelected()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:51:20.750

你明白了`MenuItem`，对吧？它有`getItemId`方法。这可能是你想要的？

进一步，`MenuItem.getMenuInfo()`返回一个 AdapterContextMenuInfo（需要强制转换）。这反过来有一个`position`领域。有了那个位置，您就可以`get`查看。

# c# - 如何将图标绑定到资源中定义的上下文菜单

> ID：12530918
> 
> 赞同：2
> 
> 时间：2012-09-21T12:46:55.937
> 
> 标签：c#, wpf, icons, contextmenu, menuitem

我想将图标绑定到 WPF 数据网格中的上下文菜单项。虽然这适用于数据网格本身的上下文菜单（右键单击数据网格中的空白区域），但它不适用于数据网格中的项目（右键单击数据行）。任何想法为什么这不起作用？感谢您的回答。

代码：

```
datagridTarget.DataContext = contextIcons;
// contextIcons contains the icon elements 
```

XAML：

```
<DataGrid Name="datagridTarget">
    <DataGrid.Resources>
        <ContextMenu x:Key="DGTContextMenu">
            <MenuItem Header="Delete" Click="datagridTargetDelete_Click">
                <MenuItem.Icon>
                    <Image Height="16" Width="16" Source="{Binding ContextDeleteIcon}"/>
                </MenuItem.Icon>
            </MenuItem>
        </ContextMenu>
    </DataGrid.Resources>
    <ContextMenuService.ContextMenu>
        <ContextMenu>
            <MenuItem Header="Delete" Click="datagridTargetDelete_Click">
                <MenuItem.Icon>
                    <Image Height="16" Width="16" Source="{Binding ContextDeleteIcon}"/>
                </MenuItem.Icon>
            </MenuItem>
        </ContextMenu>
    </ContextMenuService.ContextMenu>
    <DataGrid.Columns>
        <DataGridTemplateColumn Header="" Width="Auto" IsReadOnly="True">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Image ContextMenu="{DynamicResource DGTContextMenu}" Height="16" Width="16" Source="{Binding ObjectImage}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:02:10.120

DataGrid 中的项目通常每个都有不同的 DataContext 来表示每个项目。例如，对于绑定到“Person”类列表的 DataGrid，每一行代表每个人。

如果你想绑定到你的父 DataContext，你需要使用更高级的绑定语法，例如：

```
{Binding DataContext.ContextDeleteIcon, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}} 
```

# php - 记录存在于 zf2 with 子句中

> ID：12530926
> 
> 赞同：0
> 
> 时间：2012-09-21T12:47:51.847
> 
> 标签：php, database, zend-framework2, validation

我的用户表有以下列和数据。

编号 | 姓名 | is_deleted

##########################

1 | 迪努 | 1

2 | dddd | 0

我想检查未删除的用户是否存在。我该怎么做？

我在编辑用户时使用以下代码检查没有 is_deleted 的用户。现在我想用 is_deleted 检查用户行。我使用排除来检查当前用户 ID。

```
$validator = new Zend\Validator\Db\RecordExists(
    array(
        'table'   => 'users',
        'field'   => 'name',
        'exclude' => array(
             'field' => 'id',
             'value' => $id
        )
    )
);

if ($validator->isValid($username)) {

} 
```

标准的验证文件有以下代码。但我不能使用它。

```
$email     = 'user@example.com';
$clause    = $db->quoteInto('email = ?', $email);
$validator = new Zend\Validator\Db\RecordExists(
    array(
        'table'   => 'users',
        'field'   => 'username',
        'exclude' => $clause
    )
); 
```

什么是 $db ？它不是适配器。我试试看。请再次帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T14:35:16.860

我认为 ZF2 Validation Classes 手册中关于条款的部分已经过时了。

`quoteInto()`ZF2 中删除了方法

但是，我得到了基于报价的 Db 验证过滤器工作..

您可以使用“where”表达式作为字符串，如下所示：

```
$clause = "id != $myid AND status != false"; 
```

..或使用上面提到的关联数组。

接着：

```
 'validators' => array(
            array(
                'name'    => 'Db\NoRecordExists',
                'options' => array(
                    'adapter' => $dbAdapter,
                    'table' => $tableName,
                    'field' => $fieldName,
                    'exclude' => $clause,
                ),
            ),
        ), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:47:26.120

好的，我不知道 ZF2 是否也是如此，但现在我只是假设是这种情况。在 ZF1 中，我们可以选择排除单个字段。尝试以下操作：

```
$validator = new Zend\Validator\Db\RecordExists(array(
    'table' => 'users',
    'field' => 'name',
    'exclude' => array(
        'field' => 'is_deleted',
        'value' => 1
    )
)); 
```

这应该告诉验证者类似的东西。`Look for user with name $name but is_deleted 0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:17:10.243

您还可以在 Zendframework 2 [Include Records validator](https://gist.github.com/4635137)中创建自定义验证器。只包括那些记录以验证哪些未被删除。

我创建了一个与排除相反的自定义验证器，它是包含。

```
<?php

//Check no other users have the username

$user_id = $user->getId();

$validator = new Zend\Validator\Db\CustomNoRecordExists(

array(

'table' => 'users',

'field' => 'username',

'include' => array(

'field' => 'id',

'value' => $user_id

)

)

);

if ($validator->isValid($username)) {

// username appears to be valid

} else {

// username is invalid; print the reason

$messages = $validator->getMessages();

foreach ($messages as $message) {

echo "$message\n";

}

}

?> 
```

# go - “围棋之旅”想要表达什么？

> ID：12530928
> 
> 赞同：7
> 
> 时间：2012-09-21T12:48:00.487
> 
> 标签：go

如果你不知道我猜，教程中有几点会让你自己没有线索或链接。所以我很抱歉这些长度：

[http://tour.golang.org/#15](http://tour.golang.org/#15)

```
Try printing needInt(Big) too 
```

我猜整数允许的位数少于常量？

* * *

[http://tour.golang.org/#21](http://tour.golang.org/#21)

```
the { } are required.

(Sound familiar?) 
```

指的是哪种语言？

* * *

[http://tour.golang.org/#25](http://tour.golang.org/#25)

```
(And a type declaration does what you'd expect.) 
```

为什么我们需要单词`type`和单词`struct`？我应该期待什么？

* * *

[http://tour.golang.org/#28](http://tour.golang.org/#28)

为什么在构造函数中隐含零？这听起来像是 Go 的一个危险的设计选择。是否有 PEP 或任何超出[http://golang.org/doc/go_faq.html](http://golang.org/doc/go_faq.html)的内容？

* * *

[http://tour.golang.org/#30](http://tour.golang.org/#30)

`Make`? 有构造函数吗？`new`和有什么区别`make`？

* * *

[http://tour.golang.org/#33](http://tour.golang.org/#33)

是从哪里来`delete`的？我没有导入。

* * *

[http://tour.golang.org/#36](http://tour.golang.org/#36)

`%v`格式化程序代表什么？价值？

* * *

[http://tour.golang.org/#47](http://tour.golang.org/#47)

```
panic: runtime error: index out of range

goroutine 1 [running]:
tour/pic.Show(0x400c00, 0x40ca61)
    go/src/pkg/tour/pic/pic.go:24 +0xd4
main.main()
    /tmpfs/gosandbox-15c0e483_5433f2dc_ff6f028f_248fd0a7_d7c2d35b/prog.go:14 +0x25 
```

我想我以某种方式破产了......

```
package main

import "tour/pic"

func Pic(dx, dy int) [][]uint8 {
    image := make([][]uint8, 10)
    for i := range image {
        image[i] = make([]uint8, 10)
    }
    return image
}

func main() {
    pic.Show(Pic)
} 
```

* * *

[http://tour.golang.org/#59](http://tour.golang.org/#59)

当函数失败时我返回错误值？我必须通过错误检查来限定每个函数调用？写疯狂的代码时程序的流程是不间断的？例如`Copy(only_backup, elsewhere);Delete(only_backup)`，复制失败....

他们为什么要这样设计？

* * *

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-21T13:13:38.070

*   [#15](http://tour.golang.org/#15)：

    > 我猜int允许的位数少于常量？

    对，就是这样。根据规范，[“数字常量表示任意精度的值并且不会溢出”](http://golang.org/ref/spec#Constants)，而[type`int`有 32 位或 64 位](http://golang.org/ref/spec#Numeric_types)。

*   [#21](http://tour.golang.org/#21)：

    > 指的是哪种语言？

    没有任何; 它暗指[#16](http://tour.golang.org/#16)，它用同样的词说同样的事情，关于`for`-loops。

*   [#25](http://tour.golang.org/#25)：

    `a type declaration does what you'd expect`有点不幸，我同意（因为它对读者的期望有太多假设......）但这意味着您正在定义一个结构（使用`struct`关键字）并将类型名称“Vertex”绑定到它，使用`type Vertex`部分（见[http://golang.org/ref/spec#Type_declarations](http://golang.org/ref/spec#Type_declarations)）

*   [#28](http://tour.golang.org/#28)：

    在许多情况下，未初始化的结构被归零的事实确实非常有用（许多标准结构，如缓冲区也使用它）

    它不仅隐含在构造函数中。看这个

    `var i int; fmt.Println(i)`

    这打印出来`0`。这类似于 java，其中原始类型具有隐式默认值。布尔值是假的，整数是零，等等[。关于零值的规范。](http://golang.org/ref/spec#The_zero_value)

*   [#30](http://tour.golang.org/#30)：

    `new`分配内存并返回一个指向它的指针，while`make`是一个仅用于 Slice、map 和 channel 的特殊函数。有关vs的更深入解释，请参见[http://golang.org/doc/effective_go.html#allocation_new](http://golang.org/doc/effective_go.html#allocation_new)`make``new`

*   [#33](http://tour.golang.org/#33)：

    `delete`, like `append`or`copy`是该语言的基本运算符之一。查看它们的完整列表：http: [//golang.org/ref/spec#Predeclared_identifiers](http://golang.org/ref/spec#Predeclared_identifiers)

*   [#36](http://tour.golang.org/#36)：

    是的，`%v`代表“价值”。见[http://golang.org/pkg/fmt/](http://golang.org/pkg/fmt/)

*   [＃47](http://tour.golang.org/#47)：

试试这个：

```
func Pic(dx, dy int) [][]uint8 {
    image := make([][]uint8, dy) // dy, not 10
    for x := range image {
        image[x] = make([]uint8, dx) // dx, not 10
        for y := range image[x] {
            image[x][y] = uint8(x*y) //let's try one of the mentioned 
                                             // "interesting functions"
         }    
    }
    return image
} 
```

*   [＃59](http://tour.golang.org/#59)：

    > 该语言的设计和约定鼓励您在错误发生的地方明确检查错误（与其他语言中抛出异常并有时捕获它们的约定不同）。在某些情况下，这会使 Go 代码变得冗长，但幸运的是，您可以使用一些技术来最大程度地减少重复错误处理。

    （引自[错误处理和 Go](http://blog.golang.org/2011/07/error-handling-and-go.html)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T13:30:19.440

`I'm guessing int's are allowed less bits than constants?`

是的，数值常量是高精度值。任何语言中的 an`int`都不具备其他数字类型的精度。

`Which language is alluded to?`

没有线索，但它从 C 和 Java 向后退，哪里`( )`是必需的并且`{ }`是可选的。

`Why do we need the word type and the word struct? What was I supposed to expect?`

如果您熟悉 C，那么它可以满足您的期望。

`Why implicit zeroes in the constructor?`

它不仅隐含在构造函数中。看这个

```
var i int
fmt.Println(i) 
```

这打印出来`0`。这类似于 java，其中原始类型具有隐式默认值。布尔值是假的，整数是零，等等。

`Make? Are there constructors? What's the difference between new and make?`

`make`接受用于初始化数组、切片或映射大小的附加参数。`new`另一方面，只返回一个指向类型的指针。

```
type Data struct {}
// both d1 and d2 are pointers
d1 := new(Data)
d2 := &Data{} 
```

至于`are there constructors?`，只有当你制作和引用它们时。这通常是在 Go 中实现构造函数的方式。

```
type Data struct {}

func NewData() *Data {
    return new(Data)
} 
```

`What's the %v formatter stand for? Value?`

是的

`I return error values when a function fails? ... Why would they design it like that?`

一开始我也有同样的感觉。不过我的看法变了。如果您愿意，您可以忽略 std 库中的错误，而不必自己费心，但是一旦我掌握了它，我个人发现我有更好（并且更易读）的错误检查。

我能说的是，当我做错时，感觉就像是重复的错误处理，感觉没有必要。当我终于开始做正确的事时......好吧，我刚才说的。

# c# - c#和finereader lib的

> ID：12530930
> 
> 赞同：1
> 
> 时间：2012-09-21T12:48:21.600
> 
> 标签：c#, dll, finereader

我听说，有用于 c# 的精细阅读器库，这样我就可以阅读图像上的文本，但我没有在网络上找到这个，有教程吗？代码？另外，我还可以使用什么来读取图像上的 Windows 窗体应用程序文本？

简单：在代码中我加载图像，然后将其发送到方法，该方法在我的图像上读取此文本......但是图像很嘈杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:16:03.390

有一个很好的 OCR 库称为[tesseract](http://code.google.com/p/tesseract-ocr/)，但它是 C++ 本地库，您可以通过控制台模式使用它。我找不到更好的选择。

# data-annotations - 将数据注释属性注入 ViewModel

> ID：12530932
> 
> 赞同：0
> 
> 时间：2012-09-21T12:48:43.890
> 
> 标签：data-annotations, t4

我正在寻找将数据注释属性注入到 MVC 中的 ViewModel 的解决方案。想法是用相关实体和edmx文件路径装饰ViewModel类，然后读取Edmx文件和实体元数据信息。一旦识别出的实体元数据遍历视图模型的属性，找到匹配的实体属性，然后根据实体信息用RequiredAttribute、StringLengthAttribute 等装饰视图模型。

是否可以使用 t4 模板，因为我必须阅读用户创建的现有 .cs 文件，修改并保存它。

我怎样才能做到这一点？请建议。

# java - Jetty 中的共享 HashMap

> ID：12530934
> 
> 赞同：0
> 
> 时间：2012-09-21T12:48:59.200
> 
> 标签：java, hashmap, jetty, concurrenthashmap

我目前正在使用带有嵌入式 Jetty 的 Jersey 构建一个简单的 REST 接口。

```
Server server = new Server(8080);
ContextHandlerCollection contexts = new ContextHandlerCollection();
ServletContextHandler  servletContextHandler = new ServletContextHandler(server, "/", ServletContextHandler.SESSIONS);
ServletHolder sh = new ServletHolder(ServletContainer.class);
servletContextHandler.addServlet(sh, "/*");
server.setHandler(servletContextHandler);
sh.setInitParameter("com.sun.jersey.config.property.packages", "my.package.containing.jersey.resource"); 
```

在我的资源`@GET, @PUT, @DELETE`中，我定义了所有从哈希图中获取/放置/删除对象的方法。

目前我在我的资源类中将其定义`HashMap`为静态`ConcurrentHashMap`的，到目前为止效果很好。

```
public class MyResource {

private static final Map<String, MyObjects> myRepository = new ConcurrentHashMap<String, MyObjects>();

@GET
...

@PUT
...

} 
```

但是，我计划让`HashMap`潜在的其他资源和 servlet 可以访问。
因此希望将它添加到一些更广泛的应用程序上下文中。
**但不确定，如何最好地做到这一点？**
理想情况下以编程方式。
（我已经看到 jetty.webapp 中有一个 WebAppContext，但不确定这是否是要走的路）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:55:43.727

在您的应用程序（Spring、Guice）中使用一些依赖注入来在需要访问/修改它的所有资源中注入一个 hashmap 实例。

# android - 键盘不自动显示

> ID：12530937
> 
> 赞同：0
> 
> 时间：2012-09-21T12:49:17.743
> 
> 标签：android

当用户单击按钮时，我会显示一个警报对话框：

```
public class CommentDialog {

public static void buildDialog(final Context context,
        final String identifier, Boolean automaticKeyboard,
        final int idToUpdate) {

    AlertDialog.Builder alert = new AlertDialog.Builder(context);
    alert.setIcon(ViewBuilder.getDrawableFromDB("text.png"));
    alert.setTitle("Commentaar");

    // Edittext configuration//
    final EditText input = new EditText(context);

    String currentComment = EnteredValues.getInstance()
            .getValueForIdentifier(identifier);

    if (currentComment != null) {
        input.setText(currentComment);
        input.setSelection(currentComment.length());
    }

    input.setHint("Gelieve uw commentaar in te voeren.");

    Display display = ((WindowManager) context
            .getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
    int width = display.getWidth();

    input.setMinimumWidth(width);
    input.setMaxLines(3);
    input.setImeOptions(EditorInfo.IME_ACTION_DONE);
    input.setFocusableInTouchMode(true);
    input.requestFocus();

    final InputMethodManager inputMethodManager = (InputMethodManager) context
            .getSystemService(Context.INPUT_METHOD_SERVICE);
    inputMethodManager.showSoftInput(input,
            InputMethodManager.SHOW_IMPLICIT);

    // Add edittext to dialog
    alert.setView(input);

    // Set actions of dialog
    alert.setPositiveButton("Bewaren",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {

                    String value = input.getText().toString();

                    EnteredValues.getInstance().addValue(identifier, value);

                    View v = ShowScreenActivity.mActivity
                            .findViewById(idToUpdate);
                    EditText e = ((EditText) v);
                    e.setText(value);
                    e.setSelection(e.getText().length());

                    return;
                }
            });

    alert.setNegativeButton("Cancel",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {

                    return;
                }
            });

    alert.show();
}
} 
```

我已经尝试了几件事，但键盘没有自动显示。它似乎也取决于设备，带有蜂窝的 Galaxy Tab 10.1，键盘出现了。但是对于 2.3.6 上的星系 gio，它不会..

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:55:09.857

这可能会帮助您在 Manifest 中尝试

```
 <activity
            android:name=".YourActivity"
           android:windowSoftInputMode="stateHidden"> </activity> 
```

# regex - 什么是 Perl 正则表达式，可以将“2012 年 12 月 26 日 12:00AM”等日期转换为 yyyymmdd？

> ID：12530938
> 
> 赞同：1
> 
> 时间：2012-09-21T12:49:31.530
> 
> 标签：regex, perl, datetime, type-conversion

我已经非常努力地使用 Perl 正则表达式找到这种特定转换（这些日期格式）的示例，但无济于事。有人可以帮我在这些格式之间转换日期吗？

```
Dec 26 2012 12:00AM ==>  201212126 
```

以下是我最初的尝试，但运行速度太慢（显然，我使用 substr 5 次，这太荒谬了）。

```
# Format the input time to yyyymmdd from 'Dec 26 2012 12:00AM' like format.
sub formatTime($)
{
    #Get passed in value of format 'Dec 26 2012 12:00AM'.
    my $col = shift; 

    if (substr($col, 4, 1) eq " "){
        substr($col, 4, 1) = "0";
    }

    return substr($col, 7, 4).$months{substr($col, 0, 3)}.substr($col, 4, 2);
} 
```

注意：这是为了工作，用于将输入文件转换为非常大的数据库摄取，不幸的是，python 在平台上不受支持，这是我选择的脚本语言。我尝试制作自己的 Perl 正则表达式，但我只是没有时间在做其他部分时阅读并弄清楚它。昨天我已经浪费了大部分时间来编写 Perl 脚本并在其余部分中快速学习，这种转换只是花了我太长时间。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-21T13:12:11.957

我建议您使用模块[DateTime](https://metacpan.org/module/DateTime) + [DateTime::Format::Strptime](https://metacpan.org/module/DateTime::Format::Strptime)。

```
#!/usr/local/bin/perl
use strict;

use DateTime;
use DateTime::Format::Strptime;

my $strp = DateTime::Format::Strptime->new(
      pattern => '%b %d %Y %l:%M%p',
      locale  => 'en_US',
);

# convert date to 
my $date = 'Dec 26 2012 10:10AM';
my $dt   = $strp->parse_datetime( $date );
printf "%s -> %s\n", $date, $dt->strftime("%Y-%m-%d %H:%M"); 
```

**输出**

```
Dec 26 2012 10:10AM -> 2012-12-26 10:10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:12:21.290

那么，有哪些`Dec 26 2012 12:00AM`有趣的部分呢？

```
Dec    26   2012     12:00      AM
$month $day $year $hour:$minute $pm 
```

所以我们只需定义简单的正则表达式，捕获有趣的信息，并将它们放入适当的变量中：

```
my ($month, $day, $year, $hour, $minute, $pm)
  = ($string =~ m{
        (\w{3})   \s+             # 3 word characters
        (\d{1,2}) \s+             # 1 or 2 digits
        (\d{4})   \s+             # 4 digits
        (\d{2}) : (\d{2}) (AM|PM) # the hour, minute and AM/PM context
      }ix;
    ); 
```

接下来，我们将月份设为数字并使用 AM/PM 信息：

```
$month = {
  Jan => 1,
  Feb => 2,
  ...
  Dec => 12,
}->{$month} or die "Unknown month $month";

$hour += $pm =~ /pm/i ? 12 : 0; # if $pm contains "pm", then add 12 h 
```

然后，我们通过以下方式构建一个适当的零填充字符串`sprintf`：

```
my $format_string = "%04d%02d%02d" . ($include_hour ? "%02d%02d" : "");
my $date = sprintf $format_string,
  $year, $month, $day, $hour, $minute; 
```

如果您有野心，您也可以轻松添加时区；-)

当输入是 like 时，这种方法会产生奇怪的结果`16:00PM`，因为这会输出`2800`为时间，这显然是错误的。如果这可能是一个问题，请`pm`仅进行更正`if $hour <= 12`。但是，仅当`$include_hour`设置为真值时才重要。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T13:28:28.903

```
use strict;
use warnings;

my $str = "Dec 26 2012 12:00AM";

my %months = (
    Jan => "01",
    [...]
    Dec => "12"
);
$str =~ /^(\w{3}) (\d{1,2}) (\d{4})/; 

print $3.$months{$1}.$2; 
```

# php - 将数组写入文件的最佳方法？

> ID：12530940
> 
> 赞同：7
> 
> 时间：2012-09-21T12:49:34.280
> 
> 标签：php, mysql

我想避免写入数据库并将常量/数组用于 lang 文件等。

IE：

```
$lang = array (
  'hello' => 'hello world!'
); 
```

并能够从后台编辑它。（然后我不会从可怜的数据库中获取它，而是使用 $lang['hello']..）。

你对最好和最有效的方法有什么建议？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-21T12:59:21.580

我发现最有效的方法是这样的：

以某种方式在 php 中构建您的数组并将其导出到文件中`var_export()`

```
file_put_contents( '/some/file/data.php', '<?php return '.var_export( $data_array, true ).";\n" ); 
```

然后稍后，无论您需要这些数据，都像这样拉它

```
$data = include '/some/file/data.php'; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-21T13:25:09.820

绝对是 JSON

要保存它：

```
file_put_contents("my_array.json", json_encode($array)); 
```

要取回它：

```
$array = json_decode(file_get_contents("my_array.json")); 
```

就如此容易 ！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-21T12:58:04.303

好吧，如果您坚持将数据放入文件中，您可能会考虑使用 php 函数`serialize()`，`unserialize()`然后使用`file_put_contents`.

例子：

```
<?php
$somearray = array( 'fruit' => array('pear', 'apple', 'sony') );
file_put_contents('somearray.dat', serialize( $somearray ) );
$loaded = unserialize( file_get_contents('somearray.dat') );

print_r($loaded);
?> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-21T13:15:53.070

你可以试试`json_encode()`和`json_decode()`。

`$save = json_encode($array);`

将 $save 的内容写入文件

要加载语言，请使用：

```
$lang = file_get_contents('langfile');
$lang = json_decode($lang, true); 
```

# mysql - mysql CakePHP 2.0

> ID：12530941
> 
> 赞同：0
> 
> 时间：2012-09-21T12:49:37.600
> 
> 标签：mysql, cakephp-2.0

我想在 CakePHP 2.0 中进行 MySQL 查询，如下所示：

```
select p.ciname HOSTNAME
    ,a.status HPSA
    ,m.status SM9
    ,p.status LDAP 
from hpsas a, hpsms m, ldaps p 
where (p.ciname = a.ciname) 
and (p.ciname = m.ciname) 
order by p.ciname; 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:46:12.410

您可以使用该`Model.query()`方法在 CakePHP 中进行任意 SQL 查询。例如，在控制器中：

```
$sql = ...your sql here...
$results = $this->ModelName->query($sql); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:57:04.383

如果您尝试使用 cake ORM 进行此查询，我认为这将是朝这个方向迈出的一步：

```
$options = array();
$options['fields'] => array('p.ciname AS HOSTNAME', 'a.status AS HPSA', 'm.status AS SM9', 'p.status AS LDAP');
$options['joins'][] => array('table' => 'hpsas', 'alias' => 'a', 'conditions' => array('p.ciname = a.ciname'));
$options['joins'][] => array('table' => 'hpsms', 'alias' => 'm', 'conditions' => array('p.ciname = m.ciname'));

$result = $this->Test->find('all', $options); 
```

这些字段和表名不符合 cake 约定，如果您正在迁移或集成您的项目，这是可以理解的。如果您现在开始，您可能想要重命名它们。

[http://book.cakephp.org/1.3/en/view/901/CakePHP-Conventions](http://book.cakephp.org/1.3/en/view/901/CakePHP-Conventions)

# actionscript-3 - 更改/编辑文本区域时如何在 flex 中自动保存文本文件。请帮我

> ID：12530945
> 
> 赞同：-1
> 
> 时间：2012-09-21T12:50:07.873
> 
> 标签：actionscript-3, apache-flex, flex4, flex3, flex4.5

我遇到过这样的情况......当文本区域被更改/编辑时，我需要自动以 .text 文件的形式保存一个文本区域字段。请有人帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:00:11.333

在 Flex TextInput 或 TextArea 中，您可以使用[change 事件](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/SkinnableTextBase.html#event%3achange)来检测何时发生了更改。因此，您可能希望使用它来触发“保存此文本”代码。

如果您想将内容保存为服务器上的文件，那么您可以使用该更改事件来触发您的服务。

如果你想在客户端机器上保存东西，你可能会遇到更多的困难。

如果您正在处理 AIR 应用程序，则可以使用[File 类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html)将文件保存在本地。

在基于浏览器的应用程序中；如果没有用户输入，您将无法保存文件。所以文件的位置和文件名是你无法控制的。在将来的某个时间访问该文件也需要用户输入。

您可以将值存储为[shared object](http://livedocs.adobe.com/flex/3/html/help.html?content=lsos_5.html)，这本质上是 cookie 的 Flex 版本。

# android - NavigationGroup android in Titanium

> ID：12530946
> 
> 赞同：5
> 
> 时间：2012-09-21T12:50:14.540
> 
> 标签：android, mobile, titanium

Hi Im new to titanium which allow developer to create cross platform apps. I need to create a navigation group that works with both android and iOS. is there any clear solution ( as Ti.UI.iPhone.createNavigationGrou() only works on iphone,

Thank you

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T17:31:13.773

I have the following NavigationController that lives in the android and iphone folders:

**android**

```
var NavigationController = function() {
    var self = this;

    self.open = function(windowToOpen) {
        //make "heavyweight" and associate with an Android activity
        windowToOpen.navBarHidden = windowToOpen.navBarHidden || false;

        if(!self.rootWindow) {
            windowToOpen.exitOnClose = true;
            self.rootWindow = windowToOpen;
        }

        windowToOpen.open();
    };

    self.close = function(windowToClose) {
        windowToClose.close();
    };

    return self;
};

module.exports = NavigationController; 
```

**iphone**

```
var NavigationController = function() {
    var self = this;

    function createNavGroup(windowToOpen) {
        self.navGroup = Ti.UI.iPhone.createNavigationGroup({
            window : windowToOpen
        });
        var containerWindow = Ti.UI.createWindow();
        containerWindow.add(self.navGroup);
        containerWindow.open();
    };

    self.open = function(windowToOpen) {
        if(!self.navGroup) {
            createNavGroup(windowToOpen);
        }
        else {
            self.navGroup.open(windowToOpen);
        }
    };

    self.close = function(windowToClose) {
        if(self.navGroup) {
            self.navGroup.close(windowToClose);
        }
    };

    return self;
};

module.exports = NavigationController; 
```

Then, you can just use it (you will automatically get the correct one based on your runtime):

```
var NavigationController = require('NavigationController')
var MyView = require("ui/MyView");

var controller = new NavigationController();
var myView = new MyView(controller);
controller.open(myView); 
```

You can continue opening windows and they go on the stack. Notice I passed the controller into the first view. You keep doing that:

```
controller.open(new SecondView(controller)); 
```

The `back` button will automatically push things off your stack. If you need to do it programatically, just tell the controller to close it:

```
controller.close(myView); 
```

# c++ - 未解析的外部符号 - IdnToAscii

> ID：12530947
> 
> 赞同：5
> 
> 时间：2012-09-21T12:50:19.300
> 
> 标签：c++, linker, visual-studio-2012, idn

我尝试在 msdn 上构建以下示例应用程序：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd319089%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319089%28v=vs.85%29.aspx)

我在 Windows 7 64 位机器上的 Visual Studio 2012 Premium 中创建了一个新的 C++ 命令行项目，并将示例代码复制到主 cpp 文件中。

当我尝试编译时，出现以下错误：

```
Error   1   error LNK2001: unresolved external symbol __imp__IdnToAscii@20 
```

从[其他有类似错误的人的帖子](https://stackoverflow.com/questions/6598181/error-lnk2001-unresolved-external-symbol)中，我想我应该包含一些头文件或 lib 文件。但是是哪一个？我如何在 VS2012/C++ 中做到这一点（我是一个完整的 C++ 菜鸟......）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T13:11:38.787

从[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318149%28v=vs.85%29.aspx)看来，您需要链接到`Normaliz.dll`.

尝试添加`Normaliz.lib`链接器 -> 输入 -> 附加依赖项

![图片](../Images/c6fa838964f911bda4e79587567907f6.png)

# java - 如何在 Eclipse 中更改 Android 的 Java 构建路径？

> ID：12530952
> 
> 赞同：0
> 
> 时间：2012-09-21T12:50:33.597
> 
> 标签：java, android, eclipse

我遇到了一个特定文件的构建问题，我无法更改我的 Android 项目的路径。这是问题的图片：

![在此处输入图像描述](../Images/cfba243daed6577ee4e15cb8441cbac0.png)

如何更改此路径：图片中显示的**/Users/apple/Downloads/dolphin_player/p/libs**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:51:55.763

从库选项卡中更改它。您无法从订单和导出选项卡中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:52:39.863

在**库**选项卡上，删除或编辑它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:59:25.333

很简单，只要按照这些步骤，

*   右键单击您的项目，选择属性，
*   从对话框中选择左侧的“Java Compiler”，见图

![在此处输入图像描述](../Images/25c8947252439aea0ea09f9375023de3.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T13:13:45.950

这取决于您使用的 Java 版本。只需转到库选项卡并执行以下操作。

如果您使用的是**1.6**版本的 java，那么无论何时您想要添加任何第三方 jar 文件，您都必须通过在 library 选项中**添加外部 jar文件来添加它。**

如果您使用的是**1.7**版本的 java，那么您必须创建一个名为**libs**的文件夹并将所有外部 jar 文件放在此文件夹中。它会自动将文件添加到您的构建路径中，并将其添加到**"Android Dependencies"**中。

# mysql - MySQL 如何计算每个 ID 的出现次数？

> ID：12530956
> 
> 赞同：0
> 
> 时间：2012-09-21T12:51:08.223
> 
> 标签：mysql, sql

可能很难解释我所追求的，如果问题含糊，请道歉。

我有一个表，它使用 ID 将产品与关键字相关联

所以我可能有产品 ID，2,3,4,5 与关键字 id 14 相关联，产品 ID 3,6,9 与关键字 id 15 相关联

我的问题是如何计算和存储与关键字 14 相关联的 ID 以及与关键字 15 相关联的 ID 的总数等等（一直添加新关键字）？

到目前为止，我的 SQL：

```
select products_keyword_categories.key_cat_name 
from products_keyword_to_product 
inner join products_keyword_categories 
on products_keyword_categories.key_cat_id = products_keyword_to_product.key_cat_id 
group by products_keyword_categories.key_cat_name 
```

非常感谢您的任何建议。此外，如果有任何术语可以帮助我通过谷歌搜索进行进一步的研究，那也是最受欢迎的。

编辑添加：在上面的示例中，包含关联的表是 products_keyword_to_product - 我内部连接另一个表以返回关键字名称。

编辑添加（2）：对不起，我担心我的问题会含糊不清。如果我只想计算使用关键字 ID 14 的所有产品，我会使用 COUNT() AS - 如答案中所述，但我还需要计算使用关键字 ID 15 和关键字 ID 16 等的产品数量 - 希望这样更有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:59:21.337

```
select key_cat_name ,count(*) 
from products_keyword_categories pkc 
    inner join products_keyword_to_product ptk on pkc.id=ptk.key_id 
group by id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:36:36.353

```
select cat.key_cat_name, count(*) from
products_keyword_categories cat inner join products_keyword_to_product prod
on prod.key_cat_id=cat.key_cat_id
group by cat.key_cat_name 
```

**编辑：**

```
select cat.key_cat_name, prod_assoc.product_id, count(*) from
products_keyword_categories cat inner join products_keyword_to_product prod_assoc
on prod_assoc.key_cat_id=cat.key_cat_id
group by cat.key_cat_name,prod_assoc.product_id 
```

假设您的表结构是这样的：

**products_keyword_categories**

```
key_cat_id key_cat_name

1          Electronics

2          Toys

3          Software 
```

**products_keyword_to_product**

```
key_cat_id  product_id

1           1 

2           1

3           2

1           2 
```

**产品**

```
product_id name

1          Product A

2          Robot 
```

**编辑2：**

试试这个

```
SELECT key_cat_name, product_id, COUNT(*)
FROM
(select cat.key_cat_name, prod_assoc.product_id from
products_keyword_categories cat inner join products_keyword_to_product prod_assoc
on prod_assoc.key_cat_id=cat.key_cat_id) as tbl
GROUP BY key_cat_name, product_id 
```

**编辑3：**

上面的查询由两部分组成：

内部部分：

```
(select cat.key_cat_name, prod_assoc.product_id from
products_keyword_categories cat inner join products_keyword_to_product prod_assoc
on prod_assoc.key_cat_id=cat.key_cat_id) 
```

每个 product_id 和 key_cat_name 组合给出 1 行。

外部：

```
SELECT key_cat_name, product_id, COUNT(*)
FROM (...) as tbl
GROUP BY key_cat_name, product_id 
```

它对内部的结果（作为 tbl）进行操作，计算 key_cat_name 和 product_id 的组合出现在内部的次数。

检查这个：[MySQL 中的子查询，第 1 部分](http://dev.mysql.com/tech-resources/articles/subqueries_part_1.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:58:52.557

你快到了，你只需要添加以下内容：

select count(products_keyword_to_product.id), products_keyword_categories.key_cat_name ...其余正确

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T12:59:53.267

更新答案：

```
SELECT COUNT(*), reference_field FROM table WHERE...
HAVING field=value
GROUP BY field 
```

对于聚合条件，您必须使用`HAVING`

# email - 电子邮件分类的电子邮件标题

> ID：12530957
> 
> 赞同：0
> 
> 时间：2012-09-21T12:51:09.410
> 
> 标签：email, header

我一直在玩电子邮件标题。我试图在电子邮件标题中包含一个记录标识号，以便如果我发送一封电子邮件然后回复它，我收到的回复将根据标题中的记录标识在我的电子邮件客户端中自动分配。

当我尝试这样做时，在回复我的电子邮件时，包含我的记录标识的原始标题将被删除。

有没有更好的方法来做到这一点？我在想我可以将它添加到主题中，但是我希望标识符对用户不可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-22T03:27:27.633

将回复与原始消息匹配正是标准 Message-ID: 标头的用途。它是标识电子邮件的唯一字符串，通常包含在回复中。您不需要——也不应该——为此发明任何新的标头或对现有标头进行任何特殊处理。（如果您想了解所有血腥细节，请查看电子邮件 RFC 文档。）

如果它们没有为您显示，问题不在于信息不存在，而在于您的电子邮件程序不是很聪明。（或者也许你必须在电子邮件程序中打开一些选项......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:28:49.517

[如果您的电子邮件客户端支持地址标签](http://en.wikipedia.org/wiki/Email_address#Address_tags)，您可能正在寻找它。您可以将标签放在回复地址中，而不是电子邮件标题中。我认为您不能期望您的标题保留在回复中。

# php - 使用 PHP simplexml_load_string 解析 xml

> ID：12530959
> 
> 赞同：2
> 
> 时间：2012-09-21T12:51:14.403
> 
> 标签：php, xml, xml-parsing

所以我有这个 XML：`var_dump`

```
string '
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<data>
<entry key="message Type">
<![
    CDATA[
        urgent
    ]
]></entry><entry key="message Title"><![
    CDATA[
        teswt
    ]
]></entry><entry key="message Body"><![
    CDATA[
        teasd
    ]
]></entry><entry key="message Priority"><![
    CDATA[
        1
    ]
]></entry></data>
' (length=260) 
```

我的代码如下所示：

```
$xml = simplexml_load_string($tablerow['data']);
$inputs = $xml->xpath("/schema/user_input[@type!='hidden']/input|/schema/input");
foreach($inputs as $cur_input) {

        $cur_input_name = (string)$cur_input['name'];
        $cur_input_value = $task_input_values[$cur_input_name];
        $input_name = isset($cur_input['label']) ? (string)$cur_input['label'] : $cur_input['name'];
}
        var_dump($tablerow['data']); 
```

`$tablerow['data']`是来自数据库的 XML。任何帮助如何从中获得`message Title`价值？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:15:15.083

您使用的 XPath 表达式甚至不像您发布的 XML 文档，所以我不知道您希望如何找到您正在寻找的值。以下将从您的示例 XML 文档中提取“teswt”：

```
<?php
$xml = simplexml_load_string($tablerow['data']);
$title = '';

foreach ($xml->entry as $entry) {
    if ((string) $entry['key'] == 'message Title') {
        $title = (string) $entry;
        break;
    }
}

echo $title;
?> 
```

**编辑：**更新为使用 SimpleXML“样式”而不是 XPath。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:35:10.510

您的 XML 应该是正确的方式。

检查这个

```
 <?php
    $xmlString = '<?xml version="1.0" encoding="UTF-8" standalone="no"?>
            <data>
                <entry key="message Type">
                    <![CDATA[urgent]]>
                </entry>
                <entry key="message Title">
                    <![CDATA[teswt]]>
                </entry>
                <entry key="message Body">
                    <![CDATA[xxxxx]]>
                </entry>
                <entry key="message Priority">
                    <![CDATA[1]]>
                </entry>
            </data>';

    $xml = simplexml_load_string($xmlString);

    foreach ($xml->entry as $entry)
    {   
       echo $entry['key']."<br/>";
    }
    ?> 
```

# php - 我应该以这种方式使用数组吗？

> ID：12530960
> 
> 赞同：2
> 
> 时间：2012-09-21T12:51:16.240
> 
> 标签：php, arrays

我有这样的功能：

```
$arrayz = fetch_array_from_somewhere();
if($arrayz) {
   $arrayz['foo'] = 12;
} 
```

现在，如果`array`最终为空，它将是错误的，如果它有一些东西，但我不在乎它有什么，因为我只是，例如，向该数组添加更多数据；这样使用`if()`语句可以吗？

对象数组的同样问题（只是 $arrayz->foo = 12 代替）？

或者我应该使用empty()？

编辑1：只是为了澄清当我说对象数组时，我的意思是：对象数组。

所以我知道我总会得到一个数组。我不在乎里面有什么。

编辑2：

因此，总而言之，如果我知道我将获得一个数组，无论是完整的还是`array()`，如果它是常规数组或对象数组（对象数组），我应该只使用这种形式。

但如果我认为我会得到除此之外的东西，我应该使用额外的检查。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:55:53.260

如果`fetch_array_from_somewhere`只返回数组，那么你可以这样做。一个空数组被评估为`false`。

对于对象，您不能这样做，对象总是被评估为`true`除了从空标签创建的 SimpleXML 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T13:00:39.157

您可以使用自己的，也可以使用以下任何一种：

```
if(sizeof($array)){
    // has array values
} 
```

这将检查数组的大小。如果它返回 0 那么它是空的 - 我喜欢使用它（或下面的计数），因为它是检查数组值的实际数量的正确方法，例如`if(sizeof($array) > 2){ // more than 2 array values }`.

```
if(count($array)){
    // has array values
} 
```

这与上述相同。

```
if(!empty($array)){
    // its not empty
} 
```

这将检查它是否为空（即没有数组值）或者它是否根本没有设置（与 相同`isset()`）

**可是等等...**

```
if(is_array($array)){
    // its an array
} 
```

这总是很好的混合。字符串、数字、对象和其他任何不是数组的东西都将匹配上述所有内容。在您开始尝试访问它之前，您要确保您正在处理的**实际上是一个数组。**

所以，这通常是我的代码：

```
if(is_array($array) && sizeof(array)){
   // manipulate
}
else {
  // isn't an array or doesn't have any values.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:53:11.600

使用`empty()`是要走的路。如果函数返回布尔值，则应该使用布尔值检查。

# visual-studio-2010 - Tfs 2012 - Visual Studio 2010 终极使用

> ID：12530961
> 
> 赞同：3
> 
> 时间：2012-09-21T12:51:19.643
> 
> 标签：visual-studio-2010, tfs

我有一个 Visual Studio 2010 Ultimate 版本，并希望将它与 Team Foundation Server 2012 一起使用。本机 VS 2010 Team explorer 是否足够，或者我应该安装其他东西来完全支持新的 Team Foundation Server 2012？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:10:31.740

VS 2010 将本机连接到 TFS 2012 的*本地*安装，它将能够执行它可以使用 TFS 2010 服务器执行的所有操作。TFS 2012 有一些新功能（如本地工作区），只有在您拥有 VS 2012 客户端时才可用。

如果您想连接到 tfspreview.com（TFS 的新托管服务），那么您将需要 VS 2010 托管 GDR：[https ://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=39070](https://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=39070)

# c# - aforge 和 C#.net 中用于 tiff 图像的斑点检测算法

> ID：12530965
> 
> 赞同：1
> 
> 时间：2012-09-21T12:51:33.710
> 
> 标签：c#, blob, extraction, aforge

我必须使用 Aforge blob 提取方法提取红色标记图，但我无法提取该特定网格以读取它。 ![在此处输入图像描述](../Images/1d7f05f1709e00f496cf58a76b9dbd12.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:15:45.540

无需进一步使用 AForge 即可轻松解决此任务。

如果您的样本中的所有网格都具有相似的结构：即具有垂直-水平功能图形的同质网格，您可以使用以下算法：

1.  如下图所示，计算垂直方向的白色像素密度。它只是每条水平线中所有 RGB 分量之和的归一化值（不知道它的名称。如果有人知道，请报告）。 ![水平和垂直方向的白色像素密度](../Images/06fb8fc31f364fb786d88d012238bc7a.png)

2.  您必须提取白色像素密度最低的 y 轴值，并忽略绿色椭圆中的 y 轴值。如果尚未建立此最小值，则还必须考虑绿色椭圆中的值。如果在考虑的 y 轴值中，图像右侧的白色像素太多，请忽略它。否则，恭喜！我们找到了直到直角的黑线段。

3.  之后，必须重复此过程以进行下一个水平线检测，直到图像结束。

4.  从已建立的水平线构建最终功能。

![在此处输入图像描述](../Images/e7062daf6300da31c5d7471f797bb59b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T06:17:07.363

如果您只想将图形保留在网格中并删除所有其他线或线段，并且如果您的图像是您计划处理的所有图像的样本，那么我看到两个选项可供尝试：

1）如果没有图形线的区域的灰度阈值与图形线的灰度阈值存在差异，则使用该阈值并应用 Aforge.Net 的阈值 API 之一，如 IterativeThreshold。

2）您可以尝试AForge.Net的errosion API并迭代N次，直到除图形线之外的所有其他线都被侵蚀。如果图形线由于侵蚀而变浅，请在其顶部应用 Dillation。

# jquery-masonry - jQuery-Masonry 项目不会在隐藏 Div/元素时重新排列

> ID：12530966
> 
> 赞同：0
> 
> 时间：2012-09-21T12:51:33.687
> 
> 标签：jquery-masonry

我试图在**jQuery-masonry 上实现一个过滤器。**
但问题是如果我隐藏一个中间元素，其他元素不会重新排列。
这在两者之间留下了很多**排水沟**。尝试了**.masonry('reload');**

任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-19T15:36:51.267

有一个[未解决的问题](https://github.com/desandro/masonry/issues/126)。解决方法：在选择器上使用*:visible 。*

```
$('#container').masonry({
  itemSelector: '.mybrick:visible'
}); 
```

# css - 浮动 div 中的文本

> ID：12530969
> 
> 赞同：0
> 
> 时间：2012-09-21T12:51:35.383
> 
> 标签：css, html, text, css-float

情况是：

**HTML：**

```
<div id="main">
    <div id="a"></div>
    <div id="b">Some Text</div>
</div> 
```

**CSS：**

```
#a{
    float:left;
    width:800px;
    height:150px;
    background-color:#CCC;
}

#b{
    width:1000px;
    height:100px;
    background-color:#9CC;
} 
```

**结果：** ![在此处输入图像描述](../Images/89e3cc0a53d6aa5f700b7248ec4a4d40.png)

为什么文本不在**div#a**后面？为什么“某些文本”的行为就像**div#a**仍在**正常流程中**一样？如何强制文本按预期运行（在 div#a 下）？

**更新：** 当我的意思是在下方时，我的意思是在 Z 轴下方，而不是在 Y 轴下方。div 应该保持在这个位置，唯一需要移动的部分是文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:19:39.500

如果浮动一个元素，下一个元素将“触摸”它，如果它有位置并且它是块级元素（本机或由 CSS 设置）。

如果您希望元素“不”彼此相邻，则不要使用浮动！请记住，它们必须是块级才能彼此下方。

浮动不会“提升”元素，例如`position: absolute`会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:50:14.313

看看这个：

[http://css-tricks.com/absolute-positioning-inside-relative-positioning/](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

我认为 z-index 语句也可能有用

附录

```
<style type="text/css">
<!-- 
#id {
position:relative;
}

#a{
/* float:left;  */
 position: absolute;
 top:0%;
 left0%;
width:800px;
height:150px;
background-color:#CCC;
    z-indez:1;
}

#b{
position: absolute;
 top:0%;
 left0%;
width:1000px;
height:100px;
background-color:#9CC;
    z-index:-1;
} 
```

诀窍（在 chrome, ff, IE6 中）我无法让它工作，直到我给了 id=ba 负 z 索引信任这很有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T13:50:41.843

[http://www.w3.org/wiki/CSS/Properties/float](http://www.w3.org/wiki/CSS/Properties/float)

> • left
> 该元素生成一个向左浮动的块框。内容在框的右侧流动，从顶部开始。

的内容`#b`是应有的作用。它浮动到它前面的浮动元素的右侧。

因此，如果您想要“分层”效果，请使用可以正确提供它的 CSS 声明：`position`

**注意：**保持`#a`定位到它的父级，而不是`<body>`：

```
#main { position:relative }
#a { position:absolute } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T12:54:20.810

浮动元素浮动到非浮动元素的左侧，如蓝色元素。要强制浮动元素下方的蓝色元素，您可以`clear: left;`对其应用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T13:02:18.007

如果您的两个 div ID 都分配了 float:left 则第二个 div #b 将效仿并位于 #a 下方

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T13:10:23.100

添加此代码：

```
float:left; 
```

#b 风格

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-21T13:33:40.520

给#a、#b两个显示块

# mysql - MySQL - 在 LOAD DATA INFILE 上设置多个

> ID：12530971
> 
> 赞同：6
> 
> 时间：2012-09-21T12:51:40.653
> 
> 标签：mysql, csv, load

我有一个`table_name`这样的：

```
No | Name | Inserted_Date | Inserted_By
===================================== 
```

然后我有这样的文件名.csv

```
no,name
1,jhon
2,alex
3,steve 
```

我想`table_name`使用如下语法加载这些文件：

```
LOAD DATA INFILE 'name.csv' INTO TABLE table1
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n'
IGNORE 1 LINES
??? 
```

问题是，我应该穿什么，`???`这样我才能存储这样的数据：

```
No | Name  | Inserted_Date | Inserted_By
=====================================
1  | jhon  | sysdate()     | me
2  | ales  | sysdate()     | me
3  | steve | sysdate()     | me 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-21T13:14:42.977

我不明白您的表中是否`inserted_date`已经`inserted_by`存在列。如果没有，您可以在运行之前添加它们`LOAD DATA INFILE`：

```
LOAD DATA INFILE 'name.csv' INTO TABLE table1
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n'
IGNORE 1 LINES
(@no, @name)
set
  no = @no,
  name = @name,
  inserted_date = now(),
  inserted_by = 'me' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T13:17:00.670

像这样的事情会做到这一点：

```
LOAD DATA INFILE 'name.csv' INTO TABLE table1 
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n'
IGNORE 1 LINES
    SET inserted_date=CURRENT_DATE(), inserted_by='me' 
```

看看手册： [http ://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-17T07:34:54.957

1分钟内在数据库中批量插入超过7000000条记录（带计算的超快速查询）

```
mysqli_query($cons, '
    LOAD DATA LOCAL INFILE "'.$file.'"
    INTO TABLE tablename
    FIELDS TERMINATED by \',\'
    LINES TERMINATED BY \'\n\'
    IGNORE 1 LINES
    (isbn10,isbn13,price,discount,free_stock,report,report_date)
     SET RRP = IF(discount = 0.00,price-price * 45/100,IF(discount = 0.01,price,IF(discount != 0.00,price-price * discount/100,@RRP))),
         RRP_nl = RRP * 1.44 + 8,
         RRP_bl = RRP * 1.44 + 8,
         ID = NULL
    ')or die(mysqli_error());
$affected = (int) (mysqli_affected_rows($cons))-1; 
$log->lwrite('Inventory.CSV to database:'. $affected.' record inserted successfully.'); 
```

RRP 和 RRP_nl 和 RRP_bl 不在 csv 中，但我们是在插入之后计算出来的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-21T13:03:00.010

没有办法在 mysql 中使用 load data 命令来做到这一点。数据必须在您的输入文件中。

如果您在 Linux 上，使用 sed 或类似工具将其他字段数据添加到输入文件中会很容易。

另一种选择是上传您的文件，然后运行查询以使用您想要的数据更新缺少的字段。

假设您要使用 mysql 用户名值，您还可以在表上设置触发器以在插入发生时填充这些字段。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-08-08T20:59:50.037

```
LOAD DATA Local INFILE 'name.csv' INTO TABLE table1 
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n'
IGNORE 1 LINES
    SET inserted_date=CURRENT_DATE(), inserted_by='me' 
```

# android - 在两个应用程序之间共享文件/安装目录

> ID：12530972
> 
> 赞同：2
> 
> 时间：2012-09-21T12:51:46.123
> 
> 标签：android, authentication, sharing, data-sharing

我在 Android 上有两个应用程序需要在它们之间共享一些文件。现在我通过 ftp 服务器共享文件。

有没有办法可以相互验证这些应用程序，以便它们可以查看彼此安装的目录？

谢谢你。AAT

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:29:59.403

您需要在清单中为两个应用程序设置[android:sharedUserId](http://developer.android.com/guide/topics/manifest/manifest-element.html#uid)并使用相同的证书对其进行签名：

> 将与其他应用程序共享的 Linux 用户 ID 的名称。默认情况下，Android 会为每个应用程序分配其自己的唯一用户 ID。但是，如果两个或多个应用程序的此属性设置为相同的值，则它们都将共享相同的 ID — 前提是它们也由相同的证书签名。具有相同用户 ID 的应用程序可以访问彼此的数据，并且如果需要，可以在同一进程中运行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T12:59:27.093

版本 1（com.example.v1）：

使用以下标志调用 SharedPrefences：

```
getSharedPreferences(PREFS_NAME, MODE_WORLD_READABLE | MODE_MULTI_PROCESS); 
```

免费版（com.example.v2）：

```
try {
     mContext = createPackageContext("com.example.game.v2", 0);
     mSharedPrefs = mContext.getSharedPreferences(PREFS_NAME, MODE_WORLD_READABLE | MODE_MULTI_PROCESS);
} catch (NameNotFoundException e) {
     e.printStackTrace();
} 
```

这两种方式都适用，您可以在应用程序之间共享您的偏好

# sql - SQL Server 数据库大小 - 为什么这么大？

> ID：12530974
> 
> 赞同：3
> 
> 时间：2012-09-21T12:51:55.320
> 
> 标签：sql, sql-server, sql-server-2008, database-design

我正在构建一个包含大约 30 个表的数据库：

*   表中的最大列数约为 15。
*   对于数据类型，我主要使用 VarChar(50) 作为文本
*   和 Int og SmallInt 用于数字。
*   标识列是唯一标识符

我一直在测试一些填充数据并再次删除。我没有删除所有数据，所以everey表是空的。但是，如果我在 Management Studio 中查看数据库的属性，大小显示为 221,38 MB！

怎么会这样？请帮忙，我收到了来自托管公司的通知，说我超出了我的限制。

此致， ：-）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T13:31:11.030

我建议您首先查看数据库的恢复模式。默认情况下，恢复模式为 FULL。这将使用您执行的所有事务填充日志文件，在您进行备份之前永远不会删除它们。

要更改恢复模式，请右键单击数据库并选择属性。在属性列表中，选择选项（在右侧窗格中）。然后将“恢复模型”更改为简单。

您可能还想缩小文件。为此，请右键单击数据库并选择 Tasks --> Shrink --> Files。您可以通过更改中间的“文件类型”选项来缩小数据文件和日志文件。

马丁的评论很有趣。即使日志文件处于自动截断模式，您仍然会遇到记录删除的问题。如果您创建了大型表，则日志文件仍会扩展，并且在您截断文件之前不会恢复空间。你可以通过使用`TRUNCATE`rathe than来解决这个问题`DELETE`：

```
truncate table <table> 
```

不会记录被删除的每条记录 (http://msdn.microsoft.com/en-us/library/ms177570.aspx)。

```
delete * from table 
```

记录每条记录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T13:09:13.960

当您插入、更新、删除和设计更改每个事务的日志文件时，就会创建一大堆其他数据。此事务日志是 SQL Server 数据库的必需组件，因此无法在任何可用设置中禁用。

以下是 Microsoft 的一篇文章，内容是通过备份来缩小 SQL Server 生成的事务日志。

[http://msdn.microsoft.com/en-us/library/ms178037(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms178037%28v=sql.105%29.aspx)

另外，您是否在为您的列编制索引？在具有高行数的表上，由多列组成的索引可能会变得不必要地大，尤其是在您只是进行测试时。尝试只在每个表的一列上设置一个聚集索引。

您可能还想了解表统计信息。它们可以帮助您的索引，还可以帮助您执行 SELECT DISTINCT 或 SELECT COUNT(*) 等查询。

[http://msdn.microsoft.com/en-us/library/ms190397.aspx](http://msdn.microsoft.com/en-us/library/ms190397.aspx)

最后，您需要升级 SQL Server 数据库的存储分配。您使用它的次数越多，它就会越快地增长。

# sql - ACCESS SQL：如何计算两个日期之间每个员工的工资（乘法函数）和计算工作日数（计数，不同）

> ID：12530983
> 
> 赞同：0
> 
> 时间：2012-09-21T12:52:17.053
> 
> 标签：sql, ms-access

我需要根据我选择的 Date_start 和 Date_end 创建一个表格来汇总每个员工的工资。

我有 3 个相关的表。

```
tbl_labor
 lb_id | lb_name  | lb_OT ($/day) | If_social_sec
   1   |  John    |    10         |    yes
   2   |  Mary    |    10         |    no

tbl_production 
pdtn_date  | lb_id  | pdtn_qty(pcs) | pd_making_id 
 5/9/12    |   1    |     200       |    12
 5/9/12    |   1    |     40        |    13
 5/9/12    |   2    |     300       |    12
 7/9/12    |   1    |     48        |    13
 13/9/12   |   2    |     220       |    14
 15/9/12   |   1    |     20        |    12
 20/9/12   |   1    |     33        |    14
 21/9/12   |   2    |     55        |    14
 21/9/12   |   1    |     20        |    12

tbl_pdWk_process 
pd_making_id | pd_cost($/dozen) | pd_id 
    12       |     2            |   001
    13       |     5            |   001
    14       |     6            |   002 
```

结果将如下所示：

```
lb_name | no.working days | Total($)| OT payment | Social_sec($)| Net Wage             | 
  John  |        4        |  98.83  |  20 (2x10) |     15       |  103.83 (98.83+20-15)|
  Mary  |        2        |  160    |  10 (1x10) |     0        |  170 (160+10-0)      | 
```

我的条件是：

> 1.  工资是在我指定的两个日期之间计算的，例如。5/9/12 - 20/9/12
>     
> 2.  工资必须根据 (pd_cost * pdtn_qty) 计算。但是，pdtn_qty 被保存在“碎片”中，而 pd_cost 被保存在“打”中。因此公式应该是 (pdtn_qty * pd_cost)/12
>     
> 3.  添加 OT * 编号。每个工人加班的天数（例如约翰有 2 天加班，玛丽有 1 天加班）
>     
> 4.  必须扣除总工资，例如。15$ 如果 If_social_sec 为“真”
>     
> 5.  数数 每个员工工作的工作日。

我已经尝试过，但我无法将所有这些条件合并到一个 SQL 语句中，所以请你帮帮我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:56:35.047

好的，这真的很乱。主要是因为 Access 没有 COUNT(DISTINCT) 选项。所以计算工作日是一团糟。如果你可以跳过它，那么你可以删除所有 pdn1、pdn2、pdn3 的东西。但 id 确实有效。几点注意事项 1\. 我认为你的数学在给出的例子中不太正确，我是这样写的： ![在此处输入图像描述](../Images/2e33b87e3076b2d296c79cded4c0adbf.png)

2 我使用 IIF 子句来模拟 2 OT 代表 john，1 代表 mary。你需要改变它。祝你好运。

```
 select
  lab.lb_name,
  max(days),
  sum(prod.pdtn_qty * pdWk.pd_cost / 12) as Total ,
  max(lab.lb_OT * iif(lab.lb_id=1,2,1)) as OTPayment,
  max(iif(lab.if_social_sec='yes' , 15,0 )  ) as Social_Sec,
  sum(prod.pdtn_qty * pdWk.pd_cost / 12.00) +
  max(lab.lb_OT * iif(lab.lb_id=1,2,1)) -
  max(iif(lab.if_social_sec='yes' , 15,0 )  ) as NetWage
from
  tbl_labor as lab,
  tbl_production as prod,
  tbl_pdWk_process as pdwk,

(select pdn2.lb_id, count(pdn2.lb_id) as days from
  (select  lb_id
  from tbl_production  pdn1
  where pdn1.pdtn_date >= #9/5/2012#
  and   pdn1.pdtn_date <= #2012-09-20#
  group by lb_id, pdtn_date ) as pdn2
     group by pdn2.lb_id) as pdn3

where prod.pdtn_date >= #9/5/2012#
and   prod.pdtn_date <= #2012-09-20#
and prod.lb_id = lab.lb_id
and   prod.pd_making_id = pdwk.pd_making_id
and lab.lb_id = pdn3.lb_id
group by lab.lb_name 
```

可以添加不在生产表中的项目，您需要附加如下内容：

```
Union
select lab.lb_name,
0,
0,
max(lab.lb_OT * iif(lab.lb_id=1,2,1)) ,
max(iif(lab.if_social_sec='yes' , 15,0 )  ),0
from tbl_labor lab
where lb_id not in ( select lb_id from tbl_production   where pdtn_date >= #2012-09-05#      and   pdtn_date <= #2012-09-20#  )
group by lab.lb_name 
```

希望这可以帮助。

# jquery - Jquery循环，在滚动图像的顶部放置一个div

> ID：12530988
> 
> 赞同：1
> 
> 时间：2012-09-21T12:52:36.023
> 
> 标签：jquery, html, css, jquery-cycle

我使用 jquery 插件 jquery.cycle.all.js

基本上我想在图像顶部放置一个 div 菜单。菜单位于正确的位置，但由于滑块位于其顶部，因此无法看到。

谁能帮我把菜单放在滑块的顶部

这是我使用的代码，任何帮助将不胜感激。

```
 <div id= "MiddleContent">

             <div class="Menu">
                        <ul>
                            <li style="background-color:Red;">item</li>
                            <li style="background-color:blue;">item</li>
                            <li style="background-color:green;">item</li>
                            <li style="background-color:yellow;">item</li>
                            <li style="background-color:orange;">item</li>
                        </ul>
                    </div>

                <div class="slideshow">
                    <img src="images/Slider1.png"  alt="" />
                    <img src="images/Slider2.png"  alt="" />
                    <img src="images/Slider3.png"  alt="" />
                    <img src="images/Slider4.png"  alt="" />
                    <img src="images/Slider5.png"  alt="" />
                    <img src="images/Slider6.png"  alt="" />
                </div>
             </div> 
```

这是CSS

```
 /************************************/
    /* #MiddleContent                   */
  /************************************/
     div#MiddleContent
 {

   position: relative;
    margin:                 50px 50px 50px 50px;

  }
  div#MiddleContent .slideshow
  {
        overflow: hidden;

float:                  left;
  margin:                 0px 0px 0px 0px;
  padding:                0px 0px 0px 0px;
  }
  div#MiddleContent  .Menu
  {
     position: absolute;
     left: 0px; right: 0; bottom: 0px;  top: 0px;
 min-height: 300px;
 max-width : 250px;
 background: white;
    z-index: 1000px;

    margin:                 0px 0px 0px 0px;
    padding:                0px 0px 0px 0px;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:06:19.933

你的主要问题是`z-index: 1000px;`这应该是`z-index: 1000;`

```
 div#MiddleContent  .Menu
  {
     position: absolute;
     left: 0px; right: 0; bottom: 0px;  top: 0px;
     min-height: 300px;
     max-width : 250px;
     z-index: 1000;
     margin:    0px 0px 0px 0px;
     padding:   0px 0px 0px 0px;
  } 
```

还删除背景，使菜单变得透明

# java - 在 JPanel 子类中添加组件

> ID：12530992
> 
> 赞同：1
> 
> 时间：2012-09-21T12:52:49.077
> 
> 标签：java, swing, inheritance, jpanel, composition

我想创建一个包含一些 JLabel 的 JPanel 子类。我开始编写我的代码，但我立即发现了一个大问题。添加到 JPanel 子类的组件不可见（或者它们未添加到 JPanel 我不知道）。这是 JPanel 子类的代码：

```
public class ClientDetails extends JPanel
{

    private JLabel nameAndSurname = new JLabel ("Name & Surname");
    private JLabel company = new JLabel ("Company");

    private JPanel topPanel = new JPanel ();

    public ClientDetails ()
    {

        this.setBackground(Color.white);
        this.setLayout(new BorderLayout());

        topPanel.setLayout(new BoxLayout(topPanel, BoxLayout.Y_AXIS));
        topPanel.add(nameAndSurname);
        topPanel.add(company);

        this.add(topPanel,BorderLayout.PAGE_START);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:14:16.003

你需要

*   将 JPanel 放在顶级容器中（如 JFrame）
*   调用 pack() 以便 LayoutManager 为你的东西找到空间

.

```
public  class Test extends JPanel {

    private JLabel nameAndSurname = new JLabel ("Name & Surname");
    private JLabel company = new JLabel ("Company");

    private JPanel topPanel = new JPanel ();
    JFrame frame;

    public Test()
    {
        this.setBackground(Color.white);
        this.setLayout(new BorderLayout());

        topPanel.setLayout(new BoxLayout(topPanel, BoxLayout.Y_AXIS));
        topPanel.add(nameAndSurname);
        topPanel.add(company);

        this.add(topPanel,BorderLayout.PAGE_START);

        frame = new JFrame("test");
        frame.add(this);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# arrays - CObject、CStringArray 和错误 C2248

> ID：12530994
> 
> 赞同：0
> 
> 时间：2012-09-21T12:52:53.523
> 
> 标签：arrays, mfc

```
class MyClass : public CObject
{
public:
   MyClass();

private:
   CStringArray m_myArray;
}; 
```

导致错误 c2248

这有什么问题？我认为这与 CStringArray 和 MyClass 都派生自 CObject 的事实有关。

从 CObject 派生的旧类目前使用 CustomArray，这对我来说似乎是错误的，所以我想用 CStringArray 替换它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:55:50.990

Microsoft 编译器错误[C2248](http://msdn.microsoft.com/en-us/library/tsbce2bh.aspx)表示“派生类的成员无法访问基类的私有成员”。

我只能假设您正在尝试`MyClass::m_myArray`从代码中的某处直接引用，而不使用公共访问器函数。

**更新** 真正的答案是问题是由 MyClass 的复制构造函数引起的，试图复制 m_myArray，但它不能，因为默认情况下 CObject 派生类不可复制。解决方案是自己编写一个复制构造函数，而不是尝试复制数组，而是一次复制一个内容，从源数组到目标数组。要么使用，要么使用`std::vector`（无论如何你都应该这样做，因为 MFC 容器太可怕了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:21:45.997

错误`C2248`说“派生类的成员不能访问基类的私有成员。”

CStringArray 类不公开 Copy 构造函数和赋值运算符，在代码中查找这些位置并通过 elemnet 副本将代码替换为 elemenet。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:47:56.503

您正在尝试访问`CObject`. 由于 your`MyClass`和`CStringArray`derived from `CObject`，如果没有更多上下文，就不可能知道确切的问题。

唯一想到的想法，基本上是因为我已经多次陷入陷阱，那`CObject`就是复制构造函数是私有的，所以如果你试图复制`CStringArray`或你自己的类，显式或隐式，你会得到错误。

**更新：**
我刚刚查看了`CObject`' 的声明，赋值运算符也是私有的。其他一切要么是公开的，要么是受保护的。

# c++ - c++中的结构属性继承

> ID：12530996
> 
> 赞同：5
> 
> 时间：2012-09-21T12:52:58.547
> 
> 标签：c++

结构的属性是否在 C++ 中继承

例如：

```
struct A {
    int a;
    int b;
}__attribute__((__packed__));

struct B : A {
    list<int> l;
}; 
```

结构 B（结构 A）的继承部分会继承打包属性吗？

我不能在没有得到编译器警告的情况下将a**属性**(( **packed )) 添加到 struct B：**

```
ignoring packed attribute because of unpacked non-POD field 
```

所以我知道整个 struct B 不会被打包，这在我的用例中很好，但是我需要将 struct A 的字段打包到 struct B 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:07:06.677

> struct B（struct A）的继承部分会继承packed属性吗？

是的。继承的部分仍将被打包。但是 pack 属性本身并没有被继承：

```
#include <stdio.h>

#include <list>
using std::list;

struct A {
    char a;
    unsigned short b;
}__attribute__((__packed__));

struct B : A {
    unsigned short d;
};

struct C : A {
    unsigned short d;
}__attribute__((__packed__));

int main() {
   printf("sizeof(B): %lu\n", sizeof(B));
   printf("sizeof(C): %lu\n", sizeof(C));

   return 0;
} 
```

当被调用时，我得到

```
sizeof(B): 6
sizeof(C): 5 
```

我认为您的警告来自非 POD 类型且本身未打包的 list<> 成员。另请参阅[C++ 中的 POD 类型是什么？](https://stackoverflow.com/questions/146452/what-are-pod-types-in-c)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T13:08:29.840

是的，成员`A`将被打包`struct B`。必须是这样，否则会破坏整个继承点。例如：

```
std::vector<A*> va;
A a;
B b;
va.push_back(&a);
vb.push_back(&b);

// loop through va and operate on the elements. All elements must have the same type and behave like pointers to A. 
```