# StackOverflow 问答 15435000-15435999

# android - 如何在 Android 中将设备添加到 WifiP2pGroup

> ID：15435000
> 
> 赞同：1
> 
> 时间：2013-03-15T14:32:15.767
> 
> 标签：android, android-4.0-ice-cream-sandwich, wifi-direct

我严重困惑...

android 文档非常好，但范围非常有限。

假设我有一个可以调用的设备`createGroup(Channel,GroupInfoListener)`。可用时，`onGroupInfoAvailable(WifiP2pGroup)`被调用。此时，组中唯一的设备是所有者。（因为调用create group的设备是group owner）

从这里开始，组就建立起来了，需要做的就是用客户端设备填充组。

我不确定它是如何从这里工作的，但我在想客户端可以加入组，`joinGroup`或者客户端可以请求加入，在这种情况下 GroupOwner`joinGroup`用来加入。问题是，没有`joinGroup`方法。那么，peer 如何将自己添加到组中，或者 GroupOwner 如何将客户端添加到组中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:14:05.213

您将使用一台设备`createGroup`，然后使用其他设备`discoverPeers`和`requestPeers`。

当 时`onPeersAvaiable`，您将遍历's 并在每个设备上`WifiP2pDevice`调用该方法。`isGroupOwner`

对于获得的每个群主地址，客户端随后`connect`将向群主发送。

建立连接后，您将调用`requestConnectionInfo`.

当`onConnectionInfoAvailable`您检查`WifiP2pInfo`对象以确保`groupFormed`布尔值为真时。

然后，使用`groupOwnerAddress`InetAddress，您可以使用 Java 套接字在两者之间发送信号。

然后，您可以向组所有者发送一个字符串，说“BLAH BLAH BLAH UNIQUE VALUE”。如果组所有者返回“I UNDERSTAND”，那么您知道组所有者属于您的应用程序。我群主返回任何东西，或者没有回复，那么你知道群主无效。

如果您使用 API 16+，您可以使用服务发现来检查设备是否正在运行您的应用程序，然后连接。

# cuda - 可以用 CUDA 在网格中选择一些块吗？

> ID：15435001
> 
> 赞同：0
> 
> 时间：2013-03-15T14:32:16.613
> 
> 标签：cuda

我对网格中的控制线程块有疑问。

我的来源是图像上的递归作业。但在处理过程中，许多块满足结束条件的次数约为 8 次。只有几个块导致执行再次循环超过 16 次。所以我想跳过满足执行结束条件的块。

有可能的？

```
__global__ main(){
/* previous */
int *blockMap;
cudaMalloc((void**)&blockMap, sizeof(int) * nXBlockNum * nYBlockNum);
cudaMemset((void**)&blockMap, 0, sizeof(int) * nXBlockNum * nYBlockNum);

kernel<<<nblocks, nthreads>>>(inputimage, outputbuffer, blockmap);
/* after */}

__global__
kernel(byte* inputeimage, byte* outputbuffer, int* blockmap) {
    __shared__ int *skipFlag;

    if((blockDim.x * threadIdx.y + threadIdx.x) == 0)
    {
        *skipFlag = g_bMap[blockIdx.y * gridDim.x + blockIdx.x];
    }

    if(*skipFlag == 0)
    {
              /* recursive job */
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:16:08.023

是的，你可以这样做，但你展示的内核代码并不完全是这样做的。假设您希望*每个 block 都有*一个整数标志，那么代码应该类似于：

```
__global__
kernel(byte* inputeimage, byte* outputbuffer, int* blockmap) {
    __shared__ int skipFlag;

    if (threadIdx.x == 0)
    {
        skipFlag = g_bMap[blockIdx.x];
    }
    __syncthreads();

    if(skipFlag == 0)
    {
              /* recursive job */
    }
} 
```

这里每个块中的第一个线程从全局加载该特定块的标志并将其存储到共享内存整数变量中。在逐块同步之后，每个线程都可以读取该值并相应地对其进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:06:07.960

我不太明白你的问题，但这种方式似乎是正确的。每个块`skipFlag`在它们的共享内存中都有一个唯一的，得到的`true`那些不会执行其余的代码。

而且，也许`__syncthreads()`两个ifs之间的一个好主意。

# asp.net - ASP.Net 301 重定向错误

> ID：15435002
> 
> 赞同：0
> 
> 时间：2013-03-15T14:32:20.167
> 
> 标签：asp.net

我目前正在尝试创建 301 重定向，但遇到了一些奇怪的错误..

这是我正在使用的代码：（文件名为 test.aspx）

```
<html>
<head>
<script runat="server">
private void Page_Load(object sender, System.EventArgs e) {
    Response.Status = "301 Moved Permanently";
    Response.AddHeader("Location","http://www.XXXXX.com/");
}
</script>   
</head>
<body>
</body>
</html> 
```

但我收到此错误：

```
Runtime Error

Description: An application error occurred on the server. The current custom error settings for this application prevent the details of the application error from being viewed remotely (for security reasons). It could, however, be viewed by browsers running on the local server machine. 

Details: To enable the details of this specific error message to be viewable on remote machines, please create a <customErrors> tag within a "web.config" configuration file located in the root directory of the current web application. This <customErrors> tag should then have its "mode" attribute set to "Off".

<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration>

Notes: The current error page you are seeing can be replaced by a custom error page by modifying the "defaultRedirect" attribute of the application's <customErrors> configuration tag to point to a custom error page URL.

<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <customErrors mode="RemoteOnly" defaultRedirect="mycustompage.htm"/>
    </system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:37:05.563

您可以使用：

```
Response.Redirect("http://www.XXXXX.com/"); 
```

尽管这不是永久的 HTTP 301。

在[.NET Fx 4.0+](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.redirectpermanent.aspx)中，您可以：

```
Response.RedirectPermanent("http://www.XXXXX.com/"); 
```

如果您想手动操作或使用较早版本的框架，则必须`Response.End`在`Page_Load`事件处理程序中。（如果你不发送一些标题，然后发送一个不适用于标题的正文。）

```
private void Page_Load(object sender, System.EventArgs e) {
    Response.Status = "301 Moved Permanently";
    Response.AddHeader("Location","http://www.XXXXX.com/");
    Response.End();
} 
```

# android - Android - 自定义 ArrayAdapter 空指针异常

> ID：15435003
> 
> 赞同：-1
> 
> 时间：2013-03-15T14:32:19.760
> 
> 标签：android, arraylist, android-asynctask, nullpointerexception, android-arrayadapter

在我的项目中，我必须在一个普通的 Activity 中设置多个 ListView（这些 ListView 的数量取决于 ArrayList 的大小）。

所以我必须以编程方式动态添加 ListView 和 Custom ArrayAdapter。

我的想法是制作一个 AsyncTask 来做这些肮脏的事情：制作一个自定义 ArrayAdapter 数组，并为数组中的每个 Adapter 动态设置一个 ListView。

但我遇到的主要问题是当我尝试做`MyAdapterArray.add(MyAdapter)`......我有一个空指针异常：

```
03-15 15:24:21.738: E/AndroidRuntime(21672): FATAL EXCEPTION: main
03-15 15:24:21.738: E/AndroidRuntime(21672): java.lang.RuntimeException: Unable to start activity ComponentInfo{azur.mobile.incomrestau/azur.mobile.incomrestau.SousCarteActivity}: java.lang.NullPointerException
03-15 15:24:21.738: E/AndroidRuntime(21672):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
03-15 15:24:21.738: E/AndroidRuntime(21672):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-15 15:24:21.738: E/AndroidRuntime(21672):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-15 15:24:21.738: E/AndroidRuntime(21672):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-15 15:24:21.738: E/AndroidRuntime(21672):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-15 15:24:21.738: E/AndroidRuntime(21672):    at android.os.Looper.loop(Looper.java:137)
03-15 15:24:21.738: E/AndroidRuntime(21672):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-15 15:24:21.738: E/AndroidRuntime(21672):    at java.lang.reflect.Method.invokeNative(Native Method)
03-15 15:24:21.738: E/AndroidRuntime(21672):    at java.lang.reflect.Method.invoke(Method.java:511)
03-15 15:24:21.738: E/AndroidRuntime(21672):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-15 15:24:21.738: E/AndroidRuntime(21672):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-15 15:24:21.738: E/AndroidRuntime(21672):    at dalvik.system.NativeStart.main(Native Method)
03-15 15:24:21.738: E/AndroidRuntime(21672): Caused by: java.lang.NullPointerException
03-15 15:24:21.738: E/AndroidRuntime(21672):    at azur.mobile.incomrestau.SousCarteActivity.onCreate(SousCarteActivity.java:43)
03-15 15:24:21.738: E/AndroidRuntime(21672):    at android.app.Activity.performCreate(Activity.java:5206)
03-15 15:24:21.738: E/AndroidRuntime(21672):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
03-15 15:24:21.738: E/AndroidRuntime(21672):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
03-15 15:24:21.738: E/AndroidRuntime(21672):    ... 11 more 
```

我的活动在这里：

```
public class SousCarteActivity extends Activity {
    private String nom_categorie;
    private ArrayList<String> arraySousCategoriesName;
    private ArrayList<ArrayList<ElementFood>> arraySousCategories;
    private ArrayList<MyAdapter> myAdapters;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_souscarte_list_item);

        nom_categorie = getIntent().getStringExtra("nom_categorie");

        FoodsContainer.setSousCategoriesNameArray(nom_categorie);
        FoodsContainer.setSousCategoriesArray(nom_categorie);

        arraySousCategories = FoodsContainer.sousCategoriesArray;

        MyAdapter adapter = new MyAdapter(this, arraySousCategories.get(0));
        myAdapters.add(0, adapter);

        //new DoDirtyJobAsyncTask().execute();
    }

    @Override
    protected void onResume() {
        super.onResume();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        return super.onOptionsItemSelected(item);
    }

    private class DoDirtyJobAsyncTask extends AsyncTask<Void, MyAdapter, Void> {
        @Override
        protected Void doInBackground(Void... params) {
            for (ArrayList<ElementFood> arrayElement : arraySousCategories) {
                MyAdapter myAdapter = new MyAdapter(getApplicationContext(), arrayElement);
                myAdapters.add(myAdapter);
                publishProgress(myAdapter);
            }
            return null;
        }

        @Override
        protected void onProgressUpdate(MyAdapter... myAdapters) {
            int currViewId = 1;
            for (final MyAdapter myAdapter: myAdapters) {
                ListView listview = new ListView(getApplicationContext(), null);
                listview.setId(currViewId);
                listview.setAdapter(myAdapter);

                LinearLayout ll = (LinearLayout) findViewById(R.id.souscarte_linearlayout);
                ll.addView(listview);
                currViewId++;
            }
        }

    }

    class MyAdapter extends ArrayAdapter<ElementFood> 
    {
            LayoutInflater inflat;
            private ArrayList<ElementFood> items;

            public MyAdapter(Context context, ArrayList<ElementFood> objects) 
            {
                super(context, R.layout.activity_souscarte_list_item_elementsouscategorie, objects);
                this.items = objects;
                this.inflat = LayoutInflater.from(context);
            }
           private class ViewHolder{
                public TextView title;
                public TextView prix;
                public TextView desc;
            }

           @Override
           public View getView(int position, View convertView, ViewGroup parent) {
               ViewHolder holder = null;
               if (convertView == null) {
                       holder = new ViewHolder();
                       convertView = inflat.inflate(R.layout.activity_souscarte_list_item_elementsouscategorie, null);
                       holder.title = (TextView) convertView.findViewById(R.id.souscarte_element_title);
                       holder.prix =  (TextView) convertView.findViewById(R.id.souscarte_element_prix);
                       holder.desc =  (TextView) convertView.findViewById(R.id.souscarte_element_desc);

                       convertView.setTag(holder);
               } else {
                       holder = (ViewHolder) convertView.getTag();
               }
               ElementFood element = items.get(position);
               if (element != null) {
                   holder.title.setText(element.getName());
                   holder.prix.setText(Float.toString(element.getPrice()));
                   holder.desc.setText(element.getDescription());
               }
               return convertView;
           }
    }
} 
```

PS：我的数组“arraySousCategories”很好，当我正常使用时适配器工作正常（没有适配器数组）..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:36:23.763

`myAdapters.add(0, adapter);`在你的这一行`onCreate`，`myAdapters`是空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:40:08.317

你可能想要一个`ArrayList<MyAdapter> myAdapters = new ArrayList<MyAdapter>()`在你打电话之前，`myAdapters.add(0, adapter)`否则`myAdapters`为空

# eclipse - 选择要安装的包 - 安装按钮灰显

> ID：15435007
> 
> 赞同：3
> 
> 时间：2013-03-15T14:32:30.717
> 
> 标签：eclipse

我正在尝试使用 sdk 管理器安装一组软件包，但即使在选择“全部接受”之后，“安装”按钮仍然是灰色的。

我可以看到一些文字说“这个包依赖于'缺少 SDK 平台 Android，API 17'，但不知道我需要做什么来安装'缺少 SDK 平台 Android，API 17'......它应该在我已经在 SDK 管理器中看到的要安装的东西的列表？...它的名称是否略有不同？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-24T01:18:34.203

您只需要先更新 SDK 工具——它会阻止它。

这对我有用：单击“取消全选”以清除所有选择。然后，在 Tools 下，选择所有包（Android SDK Tools 和 Android SDK Platform-tools 等）。

先安装这些包。关闭 SDK 管理器和 ADT，然后重新启动它。然后对 API 做同样的事情（对我来说是 API18），然后冲洗并重复其他包。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T14:58:10.263

它是官方可用软件包的一部分。为确保您看到它们，请查看这些菜单项

*   工具 -> 管理 AVD 插件站点。主要站点都应该检查。
*   包 -> 显示新的/更新的包。应该检查一下。
*   包 -> 重新加载。这样您就可以强制 SDK 管理器重新下载所有信息。它通常会将信息缓存 24 小时，如果信息在上次下载时损坏，这可能会导致不显示可用的软件包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-22T17:48:53.967

清除缓存并刷新后似乎工作正常。

查看此链接： [安装 Android 4.2 API时遇到问题](https://stackoverflow.com/questions/13372835/trouble-installing-android-4-2-apis)

# javascript - 如何使用javascript字符串/n字符

> ID：15435014
> 
> 赞同：0
> 
> 时间：2013-03-15T14:32:47.117
> 
> 标签：javascript, html, string, escaping

我正在开发一个允许用户单击单词列表的 div

*   *关于我们
*   常问问题
*   服务
*   接触

在位于这些单词旁边的 div 中，内容将使用 javascript 字符串替换进行更改。我遇到的问题是使用文字转义字符将这些段落的字符串放在新行上。

这是我正在使用的 javascript 代码示例。

```
else if(x == "faqButton"){
    //alert("FAQ Button");
    document.getElementById('informationContent').innerHTML ="FAQ Click";   
} 
```

一旦我弄清楚如何正确格式化文本，内容“faq click”最终将被替换。显然这不是全部代码，但我只需要一个示例来修复其余部分。我如何将“点击”放在下一行，所以在新的 div 中，它会像

常见问题
点击

我试过了

```
document.getElementById('informationContent').innerHTML ="FAQ /n Click";
document.getElementById('informationContent').innerHTML ="FAQ" + /n + "Click"; 
```

两者都不起作用，底部的一个完全破坏了我的代码。

请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T14:34:06.590

设置时`innerHTML`，您将提供**HTML**。源文本中的换行符只是 HTML 中的空格（想想您编写的 HTML 文件中的换行符）。（也就是说，除非它在一个`pre`元素或任何`white-space: pre`通过 CSS 应用或类似应用的元素中。）

要真正让事物出现在不同的行上，您通常要么`<br>`在它们之间使用，要么使用一系列块级元素。后者可能更常见于导航。

例如：

```
this.innerHTML = "FAQ<br>Index"; 
```

[实例](http://jsbin.com/elazug/1)| [资源](http://jsbin.com/elazug/1/edit)

或者

```
this.innerHTML = "<div>FAQ</div><div>Index</div>"; 
```

[实例](http://jsbin.com/elazug/2)| [资源](http://jsbin.com/elazug/2/edit)

`li`同样，在导航中使用元素（通常是`display: block`通过 CSS 应用到它们的元素，在`ul`元素内部，尽管新[`nav`元素](http://www.w3.org/TR/html5/sections.html#the-nav-element)越来越受欢迎）在导航中更常见。

# c# - 使用反射获取接口未实现的对象的所有属性

> ID：15435017
> 
> 赞同：8
> 
> 时间：2013-03-15T14:32:49.400
> 
> 标签：c#, asp.net, reflection

我希望能够使用反射来遍历不实现接口的对象的属性

本质上我想实现与此相反的[效果如何使用反射来获取显式实现接口的属性？](https://stackoverflow.com/questions/278997/how-do-i-use-reflection-to-get-properties-explicitly-implementing-an-interface)

原因是我想将对象映射到另一个对象，其中任何未由接口定义的属性都被添加到`KeyValuePairs`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T14:39:53.947

使用这个例子：

```
interface IFoo
{
  string A { get; set; }
}
class Foo : IFoo
{
  public string A { get; set; }
  public string B { get; set; }
} 
```

然后使用此代码，我只`PropertyInfo`得到`B`.

```
 var fooProps = typeof(Foo).GetProperties();
  var implementedProps = typeof(Foo).GetInterfaces().SelectMany(i => i.GetProperties());
  var onlyInFoo = fooProps.Select(prop => prop.Name).Except(implementedProps.Select(prop => prop.Name)).ToArray();
  var fooPropsFiltered = fooProps.Where(x => onlyInFoo.Contains(x.Name)); 
```

# mysql - 无法使用便携式 Xampp 通过 Django 连接到 MySQL

> ID：15435019
> 
> 赞同：2
> 
> 时间：2013-03-15T14:32:52.603
> 
> 标签：mysql, django, python-2.7, xampp

我需要测试一个使用mysql的django应用程序，所以我安装了portable-xampp并加载了数据库，但是我无法用django访问它。它在我使用远程数据库时有效，但在本地无效。用户、密码和数据库都可以，我也尝试使用 root，只是为了测试目的有什么想法吗？

在 settings.py 中：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'awe_db',            # Or path to database file if using sqlite3.
        'USER': 'awe_db',                      # Not used with sqlite3.
        'PASSWORD': 'mypwd',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

错误：

```
Traceback (most recent call last):
File "C:\Program Files (x86)\JetBrains\PyCharm 2.6.1\helpers\pycharm\django_manage.py", line 21, in <module>
run_module(manage_file, None, '__main__', True)
File "C:\Python27\lib\runpy.py", line 176, in run_module
fname, loader, pkg_name)
File "C:\Python27\lib\runpy.py", line 82, in _run_module_code
mod_name, mod_fname, mod_loader, pkg_name)
File "C:\Python27\lib\runpy.py", line 72, in _run_code
exec code in run_globals
File "C:\Users\Fernando Alves\Dropbox\Projetos\nova_b2blue\manage.py", line 14, in <module>
                                                                                    execute_manager(settings)
File "C:\Python27\Lib\site-packages\django\core\management\__init__.py", line 459, in execute_manager
utility.execute()
File "C:\Python27\Lib\site-packages\django\core\management\__init__.py", line 382, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File "C:\Python27\Lib\site-packages\django\core\management\base.py", line 196, in run_from_argv
self.execute(*args, **options.__dict__)
File "C:\Python27\Lib\site-packages\django\core\management\base.py", line 231, in execute
self.validate()
File "C:\Python27\Lib\site-packages\django\core\management\base.py", line 266, in validate
num_errors = get_validation_errors(s, app)
File "C:\Python27\Lib\site-packages\django\core\management\validation.py", line 103, in get_validation_errors
connection.validation.validate_field(e, opts, f)
File "C:\Python27\Lib\site-packages\django\db\backends\mysql\validation.py", line 14, in validate_field
db_version = self.connection.get_server_version()
File "C:\Python27\Lib\site-packages\django\db\backends\mysql\base.py", line 415, in get_server_version
self.cursor().close()
File "C:\Python27\Lib\site-packages\django\db\backends\__init__.py", line 306, in cursor
cursor = self.make_debug_cursor(self._cursor())
File "C:\Python27\Lib\site-packages\django\db\backends\mysql\base.py", line 387, in _cursor
self.connection = Database.connect(**kwargs)
File "C:\Python27\Lib\site-packages\MySQLdb\__init__.py", line 81, in Connect
return Connection(*args, **kwargs)
File "C:\Python27\Lib\site-packages\MySQLdb\connections.py", line 187, in __init__
super(Connection, self).__init__(*args, **kwargs2)
_mysql_exceptions.OperationalError: (2003, "Can't connect to MySQL server on 'localhost' (10061)") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-05T15:30:54.310

为了方便从 Google 找到此内容的人，请尝试以下操作：

```
DATABASES = {
  'default': {
    'ENGINE': 'django.db.backends.mysql',
    'NAME': 'dbname', 
    'USER': 'user',
    'PASSWORD': 'password',
    'HOST': '/Applications/XAMPP/xamppfiles/var/mysql/mysql.sock', 
    'PORT': '7777', 
  }
} 
```

mysql.sock 文件是这里的关键。

# sql - 使用元数据在视图中查找计算列

> ID：15435022
> 
> 赞同：0
> 
> 时间：2013-03-15T14:32:59.780
> 
> 标签：sql, sql-server, sql-server-2005

有什么方法可以使用 SQL Server 元数据在视图中查找作为计算/表达式结果的列？`sys.columns`目录视图具有该字段`Is_Computed`，但`0`在我的一个视图中返回的几个字段是`CASE`表达式的结果，所以我猜它只适用于表中的计算列。是否有任何类似的元数据适用于视图？

编辑：我在这里想要实现的是对一些`instead of`触发器的审计。我有许多视图需要使用触发器进行更新，并且我想确保视图中的每一列都在触发器中进行说明，因此不会丢失数据。问题是我的查询标记了*无法*更新的字段，因为它们是计算的结果，我希望找到一种方法将这些从我的结果中排除。

# c# - 在 Canvas 中的 XAML 中动态添加图像

> ID：15435023
> 
> 赞同：1
> 
> 时间：2013-03-15T14:32:59.790
> 
> 标签：c#, wpf, xaml

我有一个看法：

```
 <Grid>
    <Canvas Grid.Row="1" Grid.Column="1" Grid.RowSpan="2" HorizontalAlignment="Stretch" 
        VerticalAlignment="Stretch" x:Name="ImageHolder">
        <!-- there is something to do here !!! -->
        <!-- like 
             <ImageCollection>
             <DataTemplate For One Image>
                <Image Canvas.Left="{Binding Path=posX}" 
                       Canvas.Top="{Binding Path=posY}" 
                       Source="{Binding Path=fileName}"
                       x:Name="{Binding Path=fileName}"
                       MouseDown="Img_MouseDown" 
                       MouseUp="Img_MouseUp" /> 
             </DataTemplate For One Image>
             </ImageCollection> -->
     </Canvas>
 </Grid> 
```

并且是.cs

```
public partial class WindowBoard : Window
{

    protected MyCollectionVM _myCollection; // this class inherits of INotifyPropertyChanged

    public WindowBoard()
    {
        InitializeComponent();
        _myCollection = new MyCollectionVM();
    }
} 
```

我将在此 XAML 中动态添加图像，以便将 dataBinding 与我的 ViewModelClass 一起使用。

换句话说，我会知道如何使用一个 dataTemplate 图像创建一个 userControl，但对于许多图像是动态添加的。

我知道如何使用列表视图来做到这一点，但我不知道如何使用画布而不是 gridView/gridviewCellTemplate 等来做到这一点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:45:09.570

您可以使用[ItemsControl](http://rachel53461.wordpress.com/2011/09/17/wpf-itemscontrol-example/)并将其`ItemsPanel`设置为`Canvas`

这将创建一个父控件（在本例中为 a `Canvas`），然后将遍历对象集合并将每个对象添加到父面板。`ItemTemplate`您可以使用属性指定如何绘制对象

请注意， a`ItemsControl`将每个项目包装在 a 中`<ContentPresenter>`，因此您需要将`ContentPresenter`放在 Canvas 上的 中`ItemContainerStyle`，而不是`Image`本身中。

您的最终代码将如下所示：

```
<ItemsControl ItemsSource="{Binding MyCollectionOfImages}">
    <!-- ItemsPanelTemplate -->
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Canvas />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>

    <!-- ItemContainerStyle -->
    <ItemsControl.ItemContainerStyle>
        <Style>
            <Setter Property="Canvas.Left" Value="{Binding posX}" />
            <Setter Property="Canvas.Top" Value="{Binding posY}" />
        </Style>
    </ItemsControl.ItemContainerStyle>

    <!-- ItemTemplate -->
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Image x:Name="{Binding Path=fileName}"
                   Source="{Binding Path=fileName}"
                   MouseDown="Img_MouseDown" 
                   MouseUp="Img_MouseUp" /> 
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:36:57.037

看到这个[问题](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/9db0527f-9cbb-4cbc-bb6e-284936846ac2)

```
 <Window x:Class="WpfApplication1.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Width="750" Height="350" 
            FontSize="16">
        <Grid>
            <ComboBox x:Name="cb" ItemsSource="{Binding}" IsSynchronizedWithCurrentItem="True" VerticalAlignment="Top"
                      DisplayMemberPath="Title" SelectedValuePath="Image">
            </ComboBox>
            <Canvas Margin="0,50,0,0" Width="100" Height="100" >
                <Canvas.Background>
                    <ImageBrush ImageSource="{Binding ElementName=cb, Path=SelectedValue}"/>
                </Canvas.Background>
            </Canvas>
        </Grid>
    </Window> 
```

并在 C# 中

```
using System.Collections.Generic;
using System.Windows;
using System.Linq;

namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            cb.DataContext = new[] 
            {
                new { Title="title1", Image=@"C:\img001.jpg" },
                new { Title="title2", Image=@"C:\img002.jpg" }
            };
        }
    }
} 
```

# mysql - 返回 MySQL 中所有超过 2 个十进制数字的数字

> ID：15435024
> 
> 赞同：3
> 
> 时间：2013-03-15T14:33:06.050
> 
> 标签：mysql

我的数据库中有类似的数据：

```
+----+----------------+
| id | summ (varchar) |
+----+----------------+
|  1 | 30.23          |
|  2 | 10.235         |
|  3 | 20.2300        |
|  4 | 100.005        |
|  5 | 5.031          |
|  6 | 0.0010002      |
+----+----------------+ 
```

如何在 MySQL 查询中接收超过 2 个十进制数字（零也算在内）的所有数据？

一开始我只需要得到那些有 3 位数字并以 5 结尾的数字，所以我使用了这个命令`substring( summs * 100, -2 ) = '.5'`，但我不知道如何获得各种数字。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T14:36:29.787

你可以做这样的事情： -

```
SELECT * 
FROM `table` 
WHERE LENGTH(SUBSTR(`summ `,INSTR(`summ `,"."))) >3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:45:32.017

因此，您希望 SQL 查询排除“20.23”但包含“20.2300”，是吗？

鉴于这些是字符串，而不是浮点数，您可以在查询中使用字符串函数，特别是[INSTR()](http://www.tutorialspoint.com/mysql/mysql-string-functions.htm#function_instr)和 LENGTH() 的组合。使用前者定位小数点（句点），然后将其与字符串的长度（减 2）进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-26T05:39:33.700

你也可以这样做：

```
SELECT *
FROM tableName
WHERE columnName <> ROUND (columnName, 2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-11T13:19:13.733

**我猜@Rahul Tripathi 的解决方案很可能是最好的。**

但是我在不同的上下文中尝试了一些东西，并根据这个问题的答案找到了另一种*可能的解决方案：* [Store only numbers after Comma mysql](https://stackoverflow.com/questions/18043639/store-only-numbers-after-comma-mysql)

这个解决方案相当“受到严格限制”，在这种情况下它可以正常工作，因为 MySQL 如何使用和存储浮点值等。

假设这`summ`是一个数字（如果是字符串，则需要强制转换或仅使用@Rahul Tripathi 的解决方案）。由于精度和存储原因，`summ`最好是*十进制*数而不是浮点数*。*

```
SELECT * 
FROM `table` 
WHERE (LENGTH(TRIM(TRAILING "0" from MOD(`summ`, 1))) - 2) > 2; 
```

要测试它：

```
set @fraction = 100.005;
set @modulo = mod(@fraction, 1);
set @modulo = trim(trailing "0" from @modulo);
set @decimals = length(@modulo) - 2;

select @fraction, @modulo, @decimals;
+-----------+---------+-----------+
| @fraction | @modulo | @decimals |
+-----------+---------+-----------+
|   100.005 |   0.005 |         3 |
+-----------+---------+-----------+
1 row in set (0.00 sec) 
```

注意：casting with`CAST("12.345" as DECIMAL(10,5))`需要事先了解可能出现的位数。如果您正在计算数据库中的值或使用 将它们从字符串中转换`"12.345" + 0`，它会有些工作，但由于二进制浮点数的存储方式，您会得到类似：`"12.345" + 0`→`12.34500000000000064`这不是您可能想要的答案。然后，您可以尝试再次舍入以在某个位置后删除数字，依此类推...

# jquery - 未加载子网格数据

> ID：15435025
> 
> 赞同：0
> 
> 时间：2013-03-15T14:33:09.420
> 
> 标签：jquery, jqgrid

我发现了一个类似的问题，但它并没有帮助我（显然也没有其他提问者......）。所以这里是：

我正在尝试用产品制作网格。对于每个产品，我想要一个显示订单的子网格。

我无法在子网格中加载数据。永远不会加载“load_sub_data_json.php”...

这是我的 HTML 文件的 JS：

```
<pre>
jQuery(document).ready(function() { 
  $("#list").jqGrid({
    height: 'auto',
    blockui: true,
    altRows: true,
    loadonce: true,
    url:'load_main_data_json.php',
    datatype: 'json',
    mtype: 'GET',
    colNames:['ProductCode','ProductName', 'ProductVendor'],
    colModel :[ 
      {name:'productcode', index:'productcode', width:100, align:'right'}, 
      {name:'productname', index:'productname', width:280, align:'right'}, 
      {name:'productvendor', index:'productvendor', width:200, align:'right'}
    ],
    rowNum:35,
    rowList:[25,50,75,100,125,150,175,200],
    sortname: 'productcode',
    sortorder: 'desc',
    viewrecords: true,
    caption: 'My first grid',
    subGrid: true,
    subGridUrl: 'load_sub_data_json.php',
    subGridModel: [
      { name  : ['Order number','Order date','Shipped date','Comments'],
        index : ['orderNumber', 'orderDate', 'shippedDate', 'comments'], 
        width : [55,100,100,200],
        align : ['right','right','right','right'],
        params: ['productcode']
      } 
    ]
  });
});
</pre> 
```

这是我将数据加载到子网格的 php 文件：

```
<pre> 

include("dbconfig.php");

$id = $_REQUEST['id'];
$productCode = $_REQUEST['productcode']; // param passed by query

// connect to the database
$db = mysql_connect($dbhost, $dbuser, $dbpassword) or die("Connection Error: " .     mysql_error());

// select database
mysql_select_db($database) or die("Error conecting to db.");

// select columns
$SQL = "select o.orderNumber, o.orderDate, o.shippedDate, o.comments from orderdetails d inner join orders o on o.orderNumber = d.orderNumber where d.productcode='" . $id. "';";

$result = mysql_query( $SQL ) or die("Couldnt execute query.".mysql_error());

$response = new stdClass;
$i=0;
while($row = mysql_fetch_array($result,MYSQL_ASSOC)) {
    $response->rows[$i]['id']=$row['orderNumber'];
    $response->rows[$i]    ['cell']=array($row['orderNumber'],$row['orderDate'],$row['shippedDate'],$row['comments']);
    $i++;
}

echo json_encode($response);

</pre> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:25:05.090

我认为您缺少 subGridModel 中的映射

试试这个，添加

```
mapping : ['orderNumber', 'orderDate', 'shippedDate', 'comments'], 
```

# android - 安卓计数没有。文件夹及其子文件夹中的图像

> ID：15435032
> 
> 赞同：-3
> 
> 时间：2013-03-15T14:33:22.573
> 
> 标签：android

我想制作一个可以计算文件夹及其子文件夹中图像数量的应用程序。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:36:46.430

这是使用 FileFilter 和 File.listFiles() 进行的简单图形搜索。你去：

```
private ArrayList<File> listFiles(String folder) {
    ArrayList<File> files = new ArrayList<File>();
    files.add(new File(folder));
    return listFiles(files);
}

private ArrayList<File> listFiles(ArrayList<File> files) {
    ArrayList<File> result = new ArrayList<File>();

    for (int i = 0; i < files.size(); i++) {
        if (files.get(i).isDirectory()) {
            File file = files.get(i);
            files.remove(i);
            File[] files2 = file.listFiles(filter);
            if (files2 == null)
                continue;
            ArrayList<File> f = new ArrayList<File>();
            for (int j = 0; j < files2.length; j++) {
                f.add(files2[j]);
            }
            result.addAll(listFiles(f));
        } else {
            result.add(files.get(i));
        }
    }

    return result;
}

FileFilter filter = new FileFilter() {

    @Override
    public boolean accept(File arg0) {
        return arg0.getName().endsWith(".jpg") || arg0.getName().endsWith(".bmp")
                || arg0.getName().endsWith(".png") || arg0.isDirectory();
    }

}; 
```

# ms-access - 如何在 ACCESS QUERY 中定义 CRITERIA 以从另一个表的字段中获取？

> ID：15435033
> 
> 赞同：0
> 
> 时间：2013-03-15T14:33:24.953
> 
> 标签：ms-access, criteria

我创建了一个带有日期过滤条件的简单查询，我在查询的设计形式中手动输入了该条件。

```
 SELECT tbl_CountryDefs.Country_Name, tbl_CRatings.CReportDate, tbl_CRatings.CRating
    FROM tbl_CRatings INNER JOIN tbl_CountryDefs ON tbl_CRatings.CCountry = tbl_CountryDefs.CMAPPING
    WHERE (((tbl_CRatings.CReportDate)="2013-JAN"))
    ORDER BY tbl_CountryDefs.Country_Name; 
```

如果我创建一个将条件定义作为字段的新表，我如何在没有任何宏或 VBA 的情况下在该查询中定义条件以查找新表中字段的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:07:06.737

除非我误解了，否则您可以通过简单的`DLookup`. 如果您创建一个新表（比如称为 QueryCriteria，其中有一个名为 ReportDate 的文本字段），则以下内容应该有效：

```
SELECT tbl_CountryDefs.Country_Name, tbl_CRatings.CReportDate, tbl_CRatings.CRating
FROM tbl_CRatings INNER JOIN tbl_CountryDefs ON tbl_CRatings.CCountry = tbl_CountryDefs.CMAPPING
WHERE tbl_CRatings.CReportDate = DLookup("ReportDate","QueryCriteria")
ORDER BY tbl_CountryDefs.Country_Name; 
```

在此示例中，如果表`ReportDate`中`QueryCriteria`的值为`2013-JAN`，它将实现与原始硬编码查询相同的效果。

# highcharts - 导出服务器准备好到 Highcharts V3 了吗？

> ID：15435035
> 
> 赞同：0
> 
> 时间：2013-03-15T14:33:30.120
> 
> 标签：highcharts, export, beta

有人知道 export.highcharts.com 上的 Highcharts 导出服务器当前是否支持 Highcharts 3.0beta？我正在尝试将我的气泡图发送给它，但它失败了，并显示了一个常见错误......

感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:01:13.120

用我自己的 Highcharts 配置对 jsFiddle 进行了一个小测试，我发现：Highcharts 导出服务器似乎对发送给它的字符很严格。我给它发送了一些……奇怪的……字符；更换它们解决了问题。

希望对其他人有用，谢谢！

# javascript - 使用 jquery/javascript 限制文本框中第一个位置的空间

> ID：15435036
> 
> 赞同：2
> 
> 时间：2013-03-15T14:33:35.123
> 
> 标签：javascript, jquery

我有一种情况，我需要限制用户在 TextBox 的开头输入空格。我能够限制文本框中的空间输入。但没有任何关于不允许在第一位置的线索。

我正在寻找使用 JavaScript 或 jQuery 的解决方案。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-15T14:38:13.713

[`keypress`](http://api.jquery.com/keypress/)活动解决方案：

```
$("input").on("keypress", function(e) {
    if (e.which === 32 && !this.value.length)
        e.preventDefault();
}); 
```

**演示：http:** [//jsfiddle.net/pdzBy/](http://jsfiddle.net/pdzBy/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-20T04:29:02.650

我试过了，但是在写了一些东西并将光标移动到第一个字母之后，它允许在那里有一个空间。此解决方案不允许在文本框的开头输入空格字符。

```
$("input").on("keypress", function(e) {
    var startPos = e.currentTarget.selectionStart;
    if (e.which === 32 && startPos==0)
        e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T14:37:48.520

如果你使用 jQuery，你可以调用 trim 方法。

```
$.trim(' Hello World!'); // -> 'Hello World' 
```

请注意，这将删除字符串开头和结尾的所有空白字符。

这是一个使用按钮的演示：http: [//jsfiddle.net/3Enr4/](http://jsfiddle.net/3Enr4/)

# embedded - 引导加载程序工作

> ID：15435038
> 
> 赞同：4
> 
> 时间：2013-03-15T14:33:37.757
> 
> 标签：embedded, bootloader, u-boot

我正在研究 Uboot 引导加载程序。我对 Bootloader 的功能和它要处理的应用程序有一些基本的问题：

Q1：据我所知，引导加载程序用于将应用程序下载到内存中。在互联网上，我还发现引导加载程序将应用程序复制到 RAM，然后应用程序从 RAM 运行。我对引导加载程序的工作感到困惑......当通过串行或 TFTP 向引导加载程序提供应用程序时，接下来会发生什么，引导加载程序是先将其复制到 RAM 还是直接写入闪存。

Q2: 为什么需要 Bootloader 将应用程序复制到 RAM 中，然后从 RAM 中运行应用程序？如果我们的应用程序从 FLASH 运行，我们会遇到什么困难？

Q3：“My application is running from RAM/FLASH”是什么意思？这是否意味着我们应用程序的 .text 段或 .code 段在 RAM/FLASH 中？我们并不关心 .bss 部分，因为它被设计为在 RAM 中。

谢谢 Phogat

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T16:08:25.880

在设计任何硬件系统时，设计人员必须考虑可执行代码的位置。答案取决于微控制器、包含的存储器类型和系统要求。所以答案因系统而异。一些系统执行位于 RAM 中的代码。其他系统执行位于闪存中的代码。您没有告诉我们足够多的有关您的系统的信息，以至于无法了解它的设计目的。

系统可能被设计为从 RAM 执行代码，因为 RAM 访问时间比闪存快，因此代码可以更快地执行。系统可能被设计为从闪存执行代码，因为闪存很丰富，而 RAM 可能没有。系统可能被设计为从闪存执行代码，以便更快地启动。这些只是一些示例，还有其他考虑因素。

RAM 是易失性的，因此它不会通过电源循环保留代码。如果系统执行位于 RAM 中的代码，则需要引导加载程序在上电时获取代码并将其写入 RAM。闪存是非易失性的，因此可以在上电时立即开始执行，并且不需要引导加载程序（但可能仍然有用）。

关于Q3，答案是肯定的。如果系统从 RAM 运行，则 .text 将位于 RAM 中（但直到引导加载程序将其复制到那里之后）。如果系统从闪存运行，那么 .text 部分将位于闪存中。.bss 部分是变量，无论 .text 部分在哪里，都将在 RAM 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T15:17:56.850

是的，一般来说，引导加载程序会引导系统，但它也可能提供一种中断默认引导路径的机制，并允许下载和运行备用固件，以及其他功能（如刷写）。

传统的 rom 有一个传统的 ram，如接口、地址、数据、芯片选择、读/写等。你仍然可以通过这种方式购买 rom，但从引脚空间的角度来看，使用基于 spi 或 i2c 的东西更便宜，这速度较慢。不希望从 ram 运行，但可以容忍一次读取然后从 ram 运行。较新的闪存技术可能/已经存在读取干扰问题，如果您的代码处于读取相同指令的紧密循环中或由于任何其他原因闪存读取速度过快，则电荷可能会下降，从而导致读取返回错误数据，可能导致程序改变路线或崩溃。此外，您的 PC 和其他 linux 平台用于将内核从 NV 存储（硬盘）复制到 ram，然后从那里运行，因此从闪存复制到 ram 并从 ram 运行具有舒适度，并且通常比闪存快。所以有很多不使用闪存的潜在原因，但根据系统的不同，它可能可以从闪存运行就好（某些系统有问题的闪存无法直接访问且不可执行，当然该系统中的某些 rom 需要可执行/可引导）。

如果您使用 ram 中的东西对闪存进行编程，它会简化编码挑战。您可以一次创建和调试从 ram 读取并写入闪存以及从闪存读取并写入 ram 的代码。完毕。现在您可以处理从串行到内存或从内存到串行接收数据的单独代码。完毕。然后处理通过以太网或 USB 或任何 DONE 执行相同操作的代码。您不必处理发明协议或解决时间问题。闪存写入非常慢，即使 xmodem 速度适中也可能太快，因此无论如何您都必须在 ram 中缓冲该数据，还不如让任务完全分开，而不是 xmodem 或任何其他基于串行的闪存加载程序使用基于大内存的先进先出，只需将数据移动到内存，然后分别从内存到闪存。其他接口也一样。技术上可以缓冲数据并产生从下载界面直接进入闪存的错觉，并且根据协议，技术上可以推迟发送方，以便在编程之前在 ram 中只需要一个闪存页面闪光。使用较旧的并行闪光灯，您可以做一些很酷的事情，我认为大多数人都无法理解。当您在某个已知时间段内停止写入闪存页面时，闪存将自动开始对该页面进行编程，您必须等待 10 毫秒或类似的时间才能完成。人们假设您必须对顺序地址进行编程，并且必须在那段时间内为下一个地址获取新数据，并且需要高串行端口速度等，现实情况是，您可以用相同的数据一遍又一遍地敲击相同的地址，并且闪存不会开始对页面进行编程，并且下载界面可能会无限慢。串行闪光灯的工作方式不同，要么不需要技巧，要么有不同的技巧。

RAM/FLASH 不是一些行业术语。这可能意味着 .text 位于 rom（闪存）中，而 .data 和 .bss 位于 ram 中。.data 的初始状态的副本也可能在闪存上，并在调用 main() 之前复制到 ram，同样，在调用 main() 之前，.bss 将归零。查看 gnu 源代码（glibc，还是 gcc，我不知道）中大多数平台的 crt0.S，以了解引导程序如何以通用方式工作的要点。

运行 linux 或其他操作系统不需要引导加载程序，您不需要 uboot，但它非常有用。Linux 非常简单，你复制内核和根文件系统，或者在内存中设置一些寄存器或一些标签，或者两者都分支到内核中的入口点，linux 从那里接管。因为 linux 非常复杂，所以希望有一个复杂的引导加载程序，它可以利用像以太网这样的高速接口（而不是仅限于串行或更慢的接口）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T16:24:13.113

关于第二季度，您从 Flash 执行时可能面临的一个困难是另一个代码更新。如果您从尝试更新的同一块 Flash 执行，系统将崩溃。这取决于您的系统架构（您的应用程序和引导加载程序在 Flash 中的组织方式），但如果您尝试更新引导加载程序本身，则可能特别难以避免。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T16:23:11.130

关于您的问题 Q2，我将添加一些内容。

Q2: 为什么需要 Bootloader 将应用程序复制到 RAM 中，然后从 RAM 中运行应用程序？如果我们的应用程序从 FLASH 运行，我们会遇到什么困难？

这不仅仅是关于拥有 SPI 或类似的串行外部代码存储器（无论如何这并不常见）。

即使是连接到通常高速并行总线的外部 ROM/FLASH/EPROM/ 也会阻止系统在最大时钟（零等待状态）上运行，即使在相对较慢的 MCU 上，由于外部存储器访问时间的原因。对于 100 MHz 时钟，您需要 10 ns 的 FLASH 访问时间，这并不容易获得（如果经济上可行的话）。你会同意 100 MHz 不再是大脑旋转的速度了:-)

这就是为什么许多 MCU/CPU 架构正在通过一次读取乘法指令，或拥有内部现金，或做任何需要补偿缓慢的外部代码存储器的技巧。只有大多数较旧的 8 位架构可以直接从闪存（“就地”）执行代码。

即使您唯一的代码存储器是内部闪存，也需要做一些事情来加速它。看看这篇文章的例子：

[http://www.iqmagazineonline.com/magazine/pdf/v_3_2_pdf/pg14-15-18-19-9Q6Phillips-Z.pdf](http://www.iqmagazineonline.com/magazine/pdf/v_3_2_pdf/pg14-15-18-19-9Q6Phillips-Z.pdf)

它描述了 ARM7 如何整合他们称为 MAM（内存加速器模块）的东西。这是一本很好的读物，您会在那里找到一些措施来加快特定 ARM7 架构的代码内存访问（适用于大多数其他架构）：

1.  限制最大时钟频率（文章中的示例从 80 MHz 到大约 20 MHz）
2.  在闪存访问期间插入等待周期
3.  使用指令缓存
4.  将程序代码从闪存复制到 RAM

显然，如果指令缓存不是一个选项（太小或时钟太高），那么在启动时将代码重新定位到那里之后，您实际上只能从 RAM 执行。

还可以选择仅运行 RAM 中的特定代码部分，这可以指定给链接器。对于 DSP（数字系统处理）系统，即使在过去只有几十兆赫兹的时钟，也确实没有从 EPROM/FLASH 运行的选项，更不用说现在了。

另一个问题是调试，用于调试放在 ROM 甚至 Flash 中的代码的选项非常有限（您必须将部分代码移动到 RAM 才能在大多数系统上设置断点）。

# xpages - 自定义控件中的寻呼机

> ID：15435039
> 
> 赞同：1
> 
> 时间：2013-03-15T14:33:38.637
> 
> 标签：xpages

我有两个自定义控件。一个用于表格本身（cc-table），另一个在表格周围有 4 个分页器控件（cc-pager、2 个分页器、1 个分页器展开/折叠、1 个分页器大小），带有可编辑区域。我已经将两个 cc 组合在一个 xpage 中，当我在网络上预览它时，它看起来很好。即使单击寻呼机工作并且视图面板（cc-table）得到更新，但寻呼机控件本身没有得到更新。例如。在标准寻呼机控件中：当我单击“下一步”时，“二”应变为灰色文本，“一”应变为可点击链接。就我而言，寻呼机保持不变，因此我无法返回第一页。

编辑：自定义控件：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
xmlns:xe="http://www.ibm.com/xsp/coreex">

<xp:this.resources>
    <xp:styleSheet href="/custom.css"></xp:styleSheet>
</xp:this.resources>
<xp:panel>
    <xp:table style="width:100%">
        <xp:tr>
            <xp:td>
            <xp:div style="text-align:left" styleClass="viewCtrlLeft">
                <xe:pagerExpand id="pagerExpand1"
                    collapseText="Alle Komprimieren" expandText="Alle Erweitern"
                    for="viewPanel1">
                </xe:pagerExpand>
            </xp:div>
            </xp:td>

            <xp:td>
            <xp:div style="text-align:right" styleClass="viewCtrlRight">
                <xp:pager layout="Previous Group Next"
                    partialRefresh="true" id="pager1" for="viewPanel1">
                </xp:pager>
            </xp:div>
            </xp:td>
        </xp:tr>
    </xp:table>
</xp:panel>
<xp:panel>
    <xp:callback facetName="facet_1" id="callback1"></xp:callback>
</xp:panel>
<xp:panel>
    <xp:table style="width:100%">
        <xp:tr>
            <xp:td>
            <xp:div style="text-align:left" styleClass="viewCtrlLeft">
                <xe:pagerSizes id="pagerSizes1" for="viewPanel1"></xe:pagerSizes>
            </xp:div>
            </xp:td>
            <xp:td>
            <xp:div style="text-align:right" styleClass="viewCtrlRight">
                <xp:pager layout="Previous Group Next"
                    partialRefresh="true" id="pager2" for="viewPanel1">
                </xp:pager>
            </xp:div>
            </xp:td>
        </xp:tr>
    </xp:table>
</xp:panel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:51:15.237

Set the partialRefresh="false" and it will begin to refresh the pager along with the view itself.

Original Response...

Is the pager a facet of the viewpanel? In cases when I've used a pager with a repeat or data table, I've seen this behavior when I've forgotten to set the *for* property of the pager.

```
<xp:pager
    partialRefresh="true"
    layout="Previous Group Next"
    id="pager1"
    style="text-align:right"
    for="rptRules">
</xp:pager> 
```

Can you post the code so we can see it for ourselves?

# servicestack - 为什么servicestack服务路由到GET而不是PUT

> ID：15435042
> 
> 赞同：3
> 
> 时间：2013-03-15T14:33:41.107
> 
> 标签：servicestack, ormlite-servicestack

本周我获准学习 ServiceStack。我喜欢它。这是一个了不起的框架。但是我遇到了一种情况，我无法获得一个相当直接的例子来工作。（虽然它诚然不如示例那么简单，但可能是一个更现实的示例。）

提前为这个冗长的问题道歉。

我有一个简单的 DTO，它映射到这样的数据库......

```
[Description("Customer")]
[Alias("Customers")]
    public class Customer : IHasId<int>
    {
        [Alias("Id")]
        [AutoIncrement]
        public int Id { get; set;}

        [Required]
        public int CompanyId { get; set;}

        [Required]
        public string FirstName { get; set;}

        [Required]
        public string LastName { get; set;}

        public string MiddleInitial { get; set;}
        public string EmployerName { get; set;}
        public string ServiceLocationDescription { get; set;}
        public string Street1 { get; set;}
        public string Street2 { get; set;}
        public string City { get; set;}
        public string State { get; set;}
        public string Zip { get; set;}

        [Required]
        public string Phone { get; set;}
        public string Fax { get; set;}

        [Required]
        public string EmailAddress { get; set;}
    }
} 
```

我还创建了看起来像这样的请求 DTO...

```
//request dto
[Route("/customers/{companyId/customer/{customerId}", "GET")]
public class GetCustomer  : Customer
{
}

[Route("/customers/{companyId}/customer/{customerId}", "PUT")]
public class UpdateCustomer  : Customer
{
} 
```

我意识到路线是相同的......这可能是问题......但我指定了不同的http方法......

最后我有一个看起来像这样的服务......

```
public CustomerResponse Get(GetCustomer request)
{
    return new CustomerResponse { Customer = customerRepository.GetCustomer(request.CustomerId), };
}

public object Put(UpdateCustomer request)
{
    customerRepository.UpdateCustomer(request);
    return new HttpResult
    {
        StatusCode = HttpStatusCode.NoContent,
        Headers = {
            { HttpHeaders.Location, this.RequestContext.AbsoluteUri.CombineWith(request.Id.ToString()) }
        }
    };
} 
```

所以为了测试它，我创建了以下简单的 html...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="en-us" http-equiv="Content-Language" />
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Untitled 1</title>
</head>

<body>

<form action="http://localhost:8080/co/1/customers/1000" method="get">
    <br />
    <label id="Label1">CompanyId&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input name="CompanyId" type="text" /></label><br />
    FirstName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input name="FirstName" type="text" /><br />
    LastName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input name="LastName" type="text" /><br />
    Middle Initial&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    **OTHER FIELDS**  
    <input type="submit" />
</form>

</body>

</html> 
```

所有这一切都很好，只有 PUT 路由到 GET 服务。

我的目标当然是用新值更新客户行。

我没有显示客户存储库类，但它工作正常。我猜。我有一个具体的一般问题。

如何路由到 PUT 而不是 GET。是否有使用该服务进行更新的“最佳实践”。例如...... PUT 服务是否应该接收客户对象而不是所有值......然后回购代码获取记录并进行更新？

POST 方法（未显示）效果很好顺便说一句。它与 PUT 方法完全相同（接收客户对象等）

**编辑**

我也刚刚确定我尝试使用 DELETE http 方法也路由到 GET。这是一个简单的类型，甚至不从 Customer 继承。它只得到两个删除参数。现在我真的很困惑。

**编辑 2**

它似乎只是路由到返回具体类型的服务方法。例外是返回对象的 POST...Get 返回一个客户响应对象。获取客户返回一个客户（复数）响应对象并且可以工作。其余的服务方法是返回对象。是这样吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T17:04:07.323

正如 Eli 指出的那样，浏览器不支持 PUT/DELETE。应该能够让它与 ServiceStack 一起使用`X-HTTP-Method-Override`作为输入字段。@mythz 抢走了我的风头，并[在这里](https://github.com/ServiceStack/ServiceStack/commit/563057a8af37cad14f9a7240683f71e0e8792181)增加了对它的支持（对于他打败我这件事并不痛苦）

此外，您的`<form>`方法是“获取”，它应该始终路由到您的 ServiceStack 的服务“获取”方法。

未经测试，但我认为这应该有效。

```
<form action="http://localhost:8080/co/1/customers/1000" method="POST">
    <br />
    <input name="X-HTTP-Method-Override" type="hidden" value="PUT" />
    <label id="Label1">CompanyId&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input name="CompanyId" type="text" /></label><br />
    FirstName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input name="FirstName" type="text" /><br />
    LastName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input name="LastName" type="text" /><br />
    Middle Initial&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    **OTHER FIELDS**  
    <input type="submit" />
</form> 
```

# web-services - 为外部 Web 服务生成 WSDL 代理

> ID：15435043
> 
> 赞同：0
> 
> 时间：2013-03-15T14:33:42.523
> 
> 标签：web-services, wso2, wso2esb

我正在尝试在 WSO2 ESB 中配置 wsdl 代理。它不允许以下 WSDL URL。

[https://secure-ausomxapa.crmondemand.com/OnDemand/user/Opportunity.wsdl?WSDLOBJ=Opportunity&WSDLTYPE=CUSTOM&XSDOnly=N&ECBS=Y](https://secure-ausomxapa.crmondemand.com/OnDemand/user/Opportunity.wsdl?WSDLOBJ=Opportunity&WSDLTYPE=CUSTOM&XSDOnly=N&ECBS=Y)

我在创建时选中了“发布相同的服务合同”复选框。但它抛出错误 - RPCMessageReceiver com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected chara cter '=' (code 61); 实体 'WSDLTYPE' 的引用后应有分号

但上面的 url 是正确的，它通过提供用户名和密码正确打开。

我已经对上面的 WSDL URL 进行了编码，但它甚至不允许我编码。请建议我这个 URL 应该是什么问题。

谢谢&问候， 拉古

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:26:07.887

将特定的 wsdl 下载到本地文件系统，并为“wsdl uri”选项提供 wsdl 路径，例如；

```
file:E:/releases/wso2esb-4.0.3/repository/samples/resources/proxy/sample_proxy_1.wsdl 
```

# c# - DateTimePicker.selectedDate 与 DateTimePicker.Text 不同

> ID：15435049
> 
> 赞同：7
> 
> 时间：2013-03-15T14:34:04.313
> 
> 标签：c#, wpf, datetimepicker

我有一个 dateTimePicker。为了将此 DateTimePicker 内容写入我的数据库，我通过以下方式获取值：

```
myDateTimePicker.selectedDate.value. 
```

用户手动选择日期就可以了。

但是......当用户直接在 DateTimePicker 中键入日期时，`SelectedDate.value`给我较旧的值。物有所值，在`.Text`财产。

有没有办法与`.Text`同步`.SelectedValue.value`？

也许我需要阅读其他财产？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:14:01.680

发生这种情况是因为仅当控件失去焦点时才执行验证。通常像这样的控件在对话框（即 ShowDialog）上，通过激活 OK 按钮（直接或间接通过 AcceptButton 属性）来完成对话框。这会导致控件失去焦点并验证自身。

如果您在无模式窗口上使用 DateTimePicker，您需要在使用其选定值之前从它移除焦点，以便它执行验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-21T01:15:24.683

可以在代码中使用这些转换进行运行时处理。也可以使用“on change”方法，但这是最快的方法。它们甚至也可以用于这些方法。

日期到文本转换

```
setdate.Text = setdate.SelectedDate.ToString(); 
```

文本到日期的转换（如果格式可以接受）

```
setdate.SelectedDate = DateTime.Parse(setdate.Text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:13:06.673

您可以使用扩展 WPF 工具包中的[DateTimePicker](http://wpftoolkit.codeplex.com/wikipage?title=DateTimePicker&referringTitle=Home)。

有属性`Value`，当您开始在此控件的文本框中输入值时，输入的值将自动分配给您的绑定属性。

例子：

XAML：

```
<extToolkit:DateTimePicker Value="{Binding MyDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" /> 
```

其中“extToolkit”是：

```
xmlns:extToolkit="http://schemas.xceed.com/wpf/xaml/toolkit" 
```

视图模型类：

```
class MainViewModel : INotifyPropertyChanged
{
    private DateTime _myDate;

    public DateTime MyDate
    {
        get { return _myDate; }
        set 
        { 
            _myDate = value; 
            OnPropertyChanged("MyDate"); 
            // only for testing...
            Console.WriteLine("value: " + value);
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    }
} 
```

# sql - SQL：查询 1 没有查询 2

> ID：15435052
> 
> 赞同：0
> 
> 时间：2013-03-15T14:34:14.420
> 
> 标签：sql, filter, where

我正在尝试编写一个查询，在其中取出第一个子查询的剩余部分并取出第二个子查询的所有内容，所以基本上（从下面的示例中）说 Q1 - Q2 = 121 - 7 = 114（ParticipantID 在 Q1而不是在第二季度）

```
select ParticipantID
 from
 (
 Query 1 results (121 in my case)
 ) AS Q1
 Join 
 (
 Query 2 results (7)
 ) AS Q2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:36:31.577

使用`NOT IN`谓词：

```
select ParticipantID
from
(
   -- Query 1 results
) AS Q1
WHERE ParticipantID NOT IN(
                           -- SELECT ParticipantID 
                           -- FROM Query 2 results
                          ) 
```

或者，`LEFT JOIN`

```
SELECT ...
FROM
(
   --- Query 1 results
) AS Q1
LEFT JOIN
(
   -- Query 2 
) AS Q2 ON ... -- JOIN condition here
WHERE Q2.ParticipantID IS NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:37:18.893

```
Select Q1.ParticipantID from (query1) as Q1 where Q1.ParticipantID NOT IN (select participantID from query2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:38:17.370

您可以使用`NOT IN`：

```
SELECT * FROM Q1
WHERE id NOT IN (SELECT ParticipantID FROM Q2) 
```

或使用`EXCEPT`（或`MINUS`，取决于数据库引擎）：

```
SELECT ParticipantID FROM Q1
EXCEPT
SELECT ParticipantID FROM Q2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T14:38:43.243

如果您使用的是 Sql 服务器：

您可以使用：

[除外](http://msdn.microsoft.com/en-IN/library/ms188055.aspx)：EXCEPT 返回左侧查询中未在右侧查询中找到的任何不同值。

句法

```
{ <query_specification> | ( <query_expression> ) } 
{ EXCEPT | INTERSECT }
{ <query_specification> | ( <query_expression> ) } 
```

例如：

```
SELECT ParticipantID
FROM Q1
EXCEPT
SELECT ParticipantID
FROM Q2; 
```

# java - NFC 与 NFC-Tools，创建 NDEF 应用程序

> ID：15435054
> 
> 赞同：10
> 
> 时间：2013-03-15T14:34:19.960
> 
> 标签：java, nfc, ndef

我正在尝试做我猜想会很简单的事情，但事实证明并非如此。我有一个 ACR122 NFC 读卡器和一堆 Mifare Classic 和 Mifare Ultralight 标签，我要做的就是从 Java 应用程序读取和写入每张卡的 mime 类型和短文本字符串。这是我到目前为止所做的工作：

*   我可以连接到我的阅读器并收听标签
*   我可以检测阅读器上的标签类型
*   在 Mifare Classic 标签上，我可以遍历标签上的所有数据（在通过手机对标签进行编程之后）并构建一个 ascii 字符串，但大部分数据是“垃圾”数据
*   我可以确定标签上是否有应用程序目录。

这是我的代码：

主要的：

```
public static void main(String[] args){
        TerminalFactory factory = TerminalFactory.getDefault();
        List<CardTerminal> terminals;
        try{
            TerminalHandler handler = new TerminalHandler();
            terminals = factory.terminals().list();
            CardTerminal cardTerminal = terminals.get(0);
            AcsTerminal terminal = new AcsTerminal();
            terminal.setCardTerminal(cardTerminal);
            handler.addTerminal(terminal);
            NfcAdapter adapter = new NfcAdapter(handler.getAvailableTerminal(), TerminalMode.INITIATOR);
            adapter.registerTagListener(new CustomNDEFListener());
            adapter.startListening();
            System.in.read();
            adapter.stopListening();
        }
        catch(IOException e){
        }
        catch(CardException e){
            System.out.println("CardException: " + e.getMessage());
        }

} 
```

自定义NDEFListener：

```
public class CustomNDEFListener extends AbstractCardTool
{
    @Override
    public void doWithReaderWriter(MfClassicReaderWriter readerWriter)
            throws IOException{
        NdefMessageDecoder decoder = NdefContext.getNdefMessageDecoder();
        MadKeyConfig config = MfConstants.NDEF_KEY_CONFIG;
        if(readerWriter.hasApplicationDirectory()){
            System.out.println("Application Directory Found!");
            ApplicationDirectory directory = readerWriter.getApplicationDirectory();
        }
        else{
            System.out.println("No Application Directory Found, creating one.");
            readerWriter.createApplicationDirectory(config);

        }
    }
} 
```

从这里开始，我似乎对如何实际创建应用程序并与之交互感到茫然。一旦我可以创建应用程序并向其写入 Record 对象，我应该能够使用 TextMimeRecord 类型写入我需要的数据，我只是不知道如何到达那里。有什么想法吗？

::Addendum:: 显然没有 nfc-tools 标签，应该有。有足够代表的人会善意地创建一个并重新标记我的问题以包含它吗？

::Second Addendum:: 另外，如果有人能指出我需要的库的方向，我愿意放弃 NFC-Tools，它有据可查，并且可以在 Windows 环境中运行。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-05-16T00:17:25.390

你检查过[这个](https://github.com/grundid/nfctools)图书馆吗？它写得很好，但是文档很差。其实不外乎JavaDoc。

# linux - 双引号内的Grep字符串

> ID：15435056
> 
> 赞同：11
> 
> 时间：2013-03-15T14:34:30.567
> 
> 标签：linux, bash, grep

在我使用这个的那一刻，试图在双引号内 grep 一个字符串

```
grep user file | grep -e "[\'\"]" 
```

这将到达我需要的文件部分并突出显示双引号，但它不会在双引号中给出刺痛

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-15T14:37:42.827

尝试这样做：

```
$ cat aaaa
foo"bar"base
$ grep -oP '"\K[^"\047]+(?=["\047])' aaaa
bar 
```

我使用先进的*正则表达式*技术*环顾四周。*

 *如果你也想要引号：

```
$ grep -Eo '["\047].*["\047]'
"bar" 
```

笔记 ：

```
\047 
```

是单引号的八进制 ascii 表示

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-15T14:43:48.723

```
$ cat aaaa
foo"bar"base

$ grep -o '"[^"]\+"'
"bar" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T14:41:18.183

尝试：

```
grep "Test" /tmp/junk | tr '"' ' ' 
```

这将从 grep 的输出中删除引号

或者您可以尝试以下方法：

```
grep "Test" /tmp/junk | cut -d '"' -f 2 
```

这将使用引号作为分隔符。只需指定要选择的字段。这使您可以挑选所需的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-30T05:54:21.130

这对我有用。这也将打印包括双引号的数据。

```
 grep -o '"[^"]\+"' file.txt 
```

如果我们想在没有双引号的情况下打印，那么我们需要将 grep 输出通过管道传递给 sed 命令。

```
grep -o '"[^"]\+"' file.txt | sed 's/"//g' 
```*

# sql - 更新不正确的外键？

> ID：15435060
> 
> 赞同：-1
> 
> 时间：2013-03-15T14:34:36.590
> 
> 标签：sql, oracle, oracle11g

我有一些损坏的数据需要清理。鉴于数据的当前状态，我该如何做到这一点？

Share 表包含一个引用 Room 表的外键。目前，Room 表中有重复项。应该是多个 Share 指向一个 Room。但是，情况是每个共享的房间表中都有一个条目。Room 条目是相同的，我希望删除多余的条目。显然，首先要做的是更正 Share 表中的引用。

冗余房间条目： ![房间](../Images/d1213583db17b4f47405dc4ac1c43d35.png) 对应的共享条目： ![在此处输入图像描述](../Images/10a3b528857161c963a9b76a22ddae76.png)

如何使所有 Share.room_id 指向 Room 表中的同一条目？我尝试了各种更新语句但没有成功。下面的 Update 语句没有意义，因为我指定了 Room 条目，这当然不起作用。但我必须以某种方式关闭 Room 表上的连接。

```
UPDATE share s
   SET room_id = (SELECT DISTINCT MIN(s.room_id) FROM room r
                   WHERE s.room_id = r.id
                   GROUP BY ROLLUP(r.addition_id, r.area, r.first_effective_at)) 
```

任何建议将不胜感激。先感谢您。

只是想发布对我有用的更新声明：

```
UPDATE share s
  SET room_id = (SELECT MIN(r.id) FROM room r
              JOIN room r2
                ON (r.addition_id = r2.addition_id 
                  AND r.area = r2.area 
                  AND r.first_effective_at =  r2.first_effective_at
                  AND r.permanent_id = r2.permanent_id)
                  WHERE r2.id = s.room_id
              GROUP BY r.addition_id, r.area, r.first_effective_at, r.permanent_id); 
```

它超级慢，可能效率极低，但它只需要运行一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:17:19.623

也许是这样的，未经测试：

```
update share s
   set room_id =
         (select min(r.id)
            from   room r
                 join
                   (select addition_id, area, first_effective_at
                      from room
                     where s.room_id = id)
                   as r2
             on r.addition_id = r2.addition_id and r.area = r2.area and r.first_effective_at =  r2.first_effective_at
          group by r.addition_id, r.area, r.first_effective_at); 
```

# google-visualization - 奥地利与下奥地利和维也纳的地理地图

> ID：15435062
> 
> 赞同：1
> 
> 时间：2013-03-15T14:34:46.740
> 
> 标签：google-visualization, gwt-visualization

当我使用 gwt-visualization 和 GeoMap 时，碰巧当我给 Vienna 赋值时它工作正常，但是如果我给 lower austria 赋值 -> Vienna 不再显示在地图上。

![地图图片](../Images/aede3cadb819f2f47dafc45f5b2f4f3b.png)

这是我用来创建地理地图的代码：

```
private Options createOptions() {
        Options options = Options.create();
        options.setDataMode(DataMode.REGIONS);
        options.setWidth(1000);
        options.setHeight(650);
        options.setRegion("AT");
        return options;
    }

    private AbstractDataTable createTable2() {
        DataTable data = DataTable.create();
        data.addColumn(ColumnType.STRING, "Bundesland");
        data.addColumn(ColumnType.NUMBER, "Sessions");

        data.addRows(9);

        data.setValue(0, 0, "Niederösterreich");
        data.setValue(0, 1, 200);

        data.setValue(1, 0, "Salzburg");
        data.setValue(1, 1,56);

        data.setValue(2, 0, "Tirol");
        data.setValue(2, 1, 11);

        data.setValue(3, 0, "Oberösterreich");
        data.setValue(3, 1, 11);

        data.setValue(4, 0, "Burgenland");
        data.setValue(4, 1, 55);

        data.setValue(5, 0, "Vorarlberg");
        data.setValue(5, 1, 567);

        data.setValue(6, 0, "Kärnten");
        data.setValue(6, 1, 11);

        data.setValue(7, 0, "Steiermark");
        data.setValue(7, 1, 99);

        data.setValue(8, 0, "Wien");
        data.setValue(8, 1, 1);

        return data;
    } 
```

我认为发生这种情况的原因是因为较低的奥地利环绕着维也纳。有没有办法让这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T23:56:37.417

看起来 GeoMaps 的地图中不包含 AT-9。幸运的是，[GeoCharts](http://code.google.com/apis/ajax/playground/?type=visualization#geo_chart)（GeoMaps 的非 Flash 较新版本）可以。

我不使用 GWT，所以我无法告诉您如何将其转换为 GWT（抱歉，也许其他人可以添加正确的语法）。这是代码：

```
function drawVisualization() {
  var data = google.visualization.arrayToDataTable([
    ['Bundesland', 'Sessions'],
    ['AT-3', 200],
    ['AT-5', 56],
    ['AT-7', 11],
    ['AT-4', 11],
    ['AT-1', 55],
    ['AT-8', 567],
    ['AT-2', 11],
    ['AT-6', 99],
    ['AT-9', 1]
  ]);

  var geochart = new google.visualization.GeoChart(
      document.getElementById('visualization'));
  geochart.draw(data, {region: 'AT', resolution: 'provinces', width: 556, height: 347});
} 
```

一般来说，我建议对您映射的任何国家/地区使用[ISO-3166 代码](http://en.wikipedia.org/wiki/ISO_3166-2%3aAT)，以使其渲染速度更快。让我知道它是否有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T17:59:13.870

createOptions() 应该返回一个对象类 GeoMap.Options。这可能是问题所在。

```
private GeoMap.Options createOptions() {
        GeoMap.Options options = GeoMap.Options.create();
        options.setDataMode(DataMode.REGIONS);
        options.setWidth(1000);
        options.setHeight(650);
        options.setRegion("AT");
        return options;
    } 
```

# meteor - 将 domain.com 设置为与 www.domain.com 相同的 Meteor 部署

> ID：15435064
> 
> 赞同：1
> 
> 时间：2013-03-15T14:34:53.343
> 
> 标签：meteor

对于 Meteor JS 部署，如何在与 www.domain.com 相同的部署中指向 domain.com？

我的 A 记录指向与 www. 相同的 IP 地址，但我收到“在此地址消息处没有部署站点”：

[http://emiliotelevision.com](http://emiliotelevision.com)

看来 Meteor 的服务器不够智能，无法使正在运行的 www.emiliotelevision.com 上的站点在没有 www..

有没有比指向您自己的另一台配置为重定向到 www 的服务器更好的解决方案。版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:15:38.480

为 www.emiliotelevision.com 和 emiliotelevision.com 使用指向 yourserver.meteor.com的[CNAME 记录](http://docs.meteor.com/#deploying)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T05:15:31.790

您需要设置域重定向。emiliotelevision.com 应重定向到 www.emiliotelevision.com。

现在您可以将流星部署到 www.emiliotelevision.com。

您也许可以从购买域主的地方设置重定向。

# jquery - jQuery Cycle，100% 宽度，图像垂直居中，窗口调整大小问题

> ID：15435065
> 
> 赞同：1
> 
> 时间：2013-03-15T14:34:55.133
> 
> 标签：jquery, responsive-design, jquery-cycle

html代码：

```
<div id="rotatorholder">
    <div id="slide1" class="slide"></div>
    <div id="slide2" class="slide"></div>
    <div id="slide3" class="slide"></div>
</div> 
```

CSS 代码：

```
#rotatorholder {
    margin: 0;
    border-bottom: 1px solid #cacaca;
    height: 100px;
    overflow: hidden;
}
#rotatorholder .slide {
    height: 100px;
    width: 100%;
}
#rotatorholder #slide1 {
    background: transparent url('http://swiatlemmalowane.pl/tmp/test.jpg') 50% 0 no-repeat;
}
#rotatorholder #slide2 {
    background: transparent url('http://swiatlemmalowane.pl/tmp/test.jpg') 50% 0 no-repeat;
}
#rotatorholder #slide3 {
    background: transparent url('http://swiatlemmalowane.pl/tmp/test.jpg') 50% 0 no-repeat;
} 
```

js代码：

```
$('#rotatorholder').cycle({
    before: function () {
        console.log($('#rotatorholder').width());
        $("#rotatorholder div.slide").each(function () {
            $(this).width($('#rotatorholder').width());
        })
    }
    after: function () {
        console.log($('#rotatorholder').width());
        $("#rotatorholder div.slide").each(function () {
            $(this).width($('#rotatorholder').width());
        })
    }
});

$(window).resize(function () {
    var boxwidth = $('#rotatorholder').width();
    $("#rotatorholder div.slide").each(function () {
        $(this).width(boxwidth);
    })
}); 
```

问题：在调整浏览器窗口大小之前，一切正常。之后 .slide 元素根据原始的#rotatorholder 宽度固定其宽度。我已经设法在调整窗口大小时修复了元素宽度（第二个 js 部分），元素也通过在 jQuery Cycle 标注中使用“之前”获得了正确的新宽度，但仍然在一秒钟后，它们达到了它们的原始宽度。

看看： http: [//jsfiddle.net/Cyber​​ek /Q7bAJ/](http://jsfiddle.net/Cyberek/Q7bAJ/)

以较小的浏览器宽度运行它，然后重新缩放到浏览器以更大的宽度 - 图像的“中心”应该仍然在中心并且它正在调整大小，但是当您停止调整大小并等待循环更改元素时，幻灯片的宽度会以某种方式变为原始容器宽度。

感谢帮助。

# python - 使用 python 和 numpy 读取二进制 .pgm 文件

> ID：15435070
> 
> 赞同：0
> 
> 时间：2013-03-15T14:35:09.287
> 
> 标签：python, opencv, numpy, python-imaging-library, pgm

我需要读取 64x64 pgm 纯格式图像文件并将结果值放入一个 numpy 矩阵中。只有当我使用 Opencv 和 PIL 函数打开图像时，我才能做到这一点，但是产生的最终 numpy 矩阵具有 3 通道，并且返回的值是 0 和 255，而不是 0 和 1（图像是二进制的）。我也尝试使用 genfromtxt 但它不能将值放在一个 numpy 矩阵中。

我只想要一个来自 pgm 图像的 0 和 1 的 1 通道 numpy 矩阵。我怎么能用python做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:30:12.623

如果 PIL 以 RGB 格式打开您的图像文件，但您希望它们是二进制文件，我认为您唯一的选择是在打开后进行转换。

```
im = Image.open('imagefile').convert('1') 
```

# java - 应用程序意外停止，我想做的只是激活一个按钮并进入另一个屏幕

> ID：15435073
> 
> 赞同：0
> 
> 时间：2013-03-15T14:35:19.427
> 
> 标签：java, android

我正在做一个简单的测试，看看我是否可以制作安卓游戏。我要做的就是当用户单击我的开始按钮时，它进入游戏屏幕，现在显示“游戏屏幕”但是当我单击按钮时，它说应用程序已停止发生意外错误，我被迫关闭。

我是 eclipse 和 android 新手，但我不是 java 新手，我的代码没有错误

因此，如果有人可以帮助我解决这个问题，我将非常感激

这是我的主要内容：

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        buttonClickMethod();
    }

    private void buttonClickMethod() {
        // TODO Auto-generated method stub
        Button start = (Button) findViewById(R.id.startB);
        start.setOnClickListener( new OnClickListener(){

                public void onClick(View v){

                    Intent i = new Intent(v.getContext(), GameView.class);
                    startActivityForResult(i,0);
                }
                });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

这是我的游戏视图代码：

```
package com.example.coloroblind;

import android.app.Activity;
import android.os.Bundle;

public class GameView extends Activity{

    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.game);
    }

} 
```

感谢您的输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:11:34.887

我同意 Simon 的观点，每当你创建一个新的 Intent 时，你必须在你的清单文件中输入它。你所有的意图都应该出现在这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:51:39.883

我几乎可以猜到您的问题出在 Android Manifest 中。你在那里声明了你的 GameView Activity 吗？它应该是 `<activity android:name=".GameView" />`，这里有一些示例代码放在哪里。

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".GameView" />
</application> 
```

# c++ - 传递二维数组，该列是强制性的

> ID：15435080
> 
> 赞同：1
> 
> 时间：2013-03-15T14:35:38.867
> 
> 标签：c++, arrays, function

在传递二维数组时，我们必须指定列。例如：

```
void funtion1(a[])// works
{
}
void function2(a[][4])//works
{
}
void function3(a[][])//doesn't work
{
} 
```

`function3`被认为是不正确定义的可能原因是什么。是否有不同的定义方式，`function3`以便我们可以将行和列都留空。阅读一些回复：你能解释一下如何`x[n]`和`x[]`不同吗？我猜前者代表一个特定的数组位置，后者是未指定的数组。更多解释将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:40:14.850

您不能在不指定第二维的情况下传递 2D 数组，否则参数“a”将衰减为指针，编译器需要知道第二维需要多长时间来计算偏移量（原因是 2D 数组存储为 1D在记忆中）。因此，编译器必须知道 *a 的大小，这就要求给出第二维。您可以使用向量的向量来替换二维数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:42:27.563

`void function2(a[][4])`它知道每行有 4 个元素。有了`void function3(a[][])`它不知道，所以它无法计算`a[i]`应该在哪里。
使用向量，因为它是 c++

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:16:28.830

C 风格的数组不像你想象的那样工作。将它们视为一块内存，尺寸告诉编译器与原始地址偏移多远。

`int a[]`基本上是一个指针，每个元素都是一个 int，这意味着 a[1] 相当于`*(a + 1)`，其中每个 1 是 sizeof(int) 个字节。`a`数组没有限制或结束（简单地说） 。您可以使用 a[999999] 并且编译器不会在意。

`int a[][4]`类似，但现在编译器知道每一行都是 4*sizeof(int)。所以 a[2][1] 是`*(a + 2*4 + 1)`

`int a[][]`另一方面，是一个不完整的类型，所以对于编译器来说，a[2][1] 是`*(a + 2*?? + 1)`，谁知道呢？方法。

不要使用`int **a`，这意味着一个指针数组，这很可能是你不想要的。

正如一些人所说，对于 STL，使用向量代替。使用起来相当安全`std::vector<std::vector<int> > a`。您仍然可以获得[2][1]。

当您使用它时，请改用引用，`const std::vector<std::vector<int> > &a`. 这样，您就不会在每个函数调用中复制整个数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T15:17:29.497

编译器如何计算 a[x][y] 的地址？很简单：

> address_of_a+(x*SECOND_SIZE+y)

现在想象一下你想要

> 一个[2][3]

编译器必须计算：

> address_of_a+(2*SECOND_SIZE+3)

如果编译器不知道 SECOND_SIZE 它如何计算它？你必须明确地给他。您在代码中使用 a[2][1], a[100][13]，因此编译器必须知道如何计算这些对象的地址。

[在这里查看更多](http://www.java2s.com/Code/Cpp/Data-Structure/Defineandinitiateatwodimensionalarray.htm)

# asp.net-mvc-4 - 模型未在帖子上填充

> ID：15435086
> 
> 赞同：0
> 
> 时间：2013-03-15T14:35:51.937
> 
> 标签：asp.net-mvc-4

我有这个部分视图

```
@using (Html.BeginForm(MVC.Inventory.ActionNames.AddVehicles, MVC.Inventory.Name, new { model = Model.Items }))
{
   <div><button>@AuctionControllerResource.AddToBiddingProcess</button></div>
} 
```

post方法是这里

```
[HttpPost]
        public virtual ActionResult AddVehicles(List<VehicleViewModel> model)
        {
            return null;
        } 
```

当我在视图中放置一个断点时，我可以看到 Model.Items 中应该有 1 个项目。但是，当我点击按钮点击 Post 操作方法时，模型中没有项目。

我在表格中添加了这个

```
@Html.HiddenFor(m => m.Items) 
```

但这无济于事。

我究竟做错了什么？

谢谢，

萨钦

**编辑**

附加代码

```
 public class ListViewModel<T> : IQuery
        where T : class
    {

        public List<T> Items { get; set; }
     ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:10:32.053

以下不做你认为它做的事：

```
new { model = Model.Items } 
```

你不能像那样传递复杂的对象。如果您希望它起作用，您必须在表单中生成隐藏字段。

> 我在表格中添加了这个
> 
> @Html.HiddenFor(m => m.Items)

不，没有帮助是正常的。隐藏字段仅适用于简单类型。您必须遍历集合中的项目并为每个元素的每个属性生成相应的字段：

```
@using (Html.BeginForm(MVC.Inventory.ActionNames.AddVehicles, MVC.Inventory.Name))
{
    for (var i = 0; i < Model.Items.Count; i++)
    {
        @Html.HiddenFor(x => x.Items[i].Prop1)
        @Html.HiddenFor(x => x.Items[i].Prop2)
        @Html.HiddenFor(x => x.Items[i].ComplexProp3.Prop1)
        @Html.HiddenFor(x => x.Items[i].ComplexProp3.Prop2)
        ...
    }
    <div>
       <button>@AuctionControllerResource.AddToBiddingProcess</button>
    </div>
} 
```

但这似乎很浪费。由于用户无法在表单中修改这些值，我建议您简单地传递一个 id，这将允许您在 POST 操作中从数据存储中检索相应的项目：

```
@using (Html.BeginForm(MVC.Inventory.ActionNames.AddVehicles, MVC.Inventory.Name, new { id = Model.ItemsId }))
{
    <div>
       <button>@AuctionControllerResource.AddToBiddingProcess</button>
    </div>
} 
```

进而：

```
[HttpPost]
public virtual ActionResult AddVehicles(int id)
{
    List<VehicleViewModel> model = GetItemsFromDataStore(id);
    ...
} 
```

# linux - 如何设置 pthread 最大堆栈大小

> ID：15435087
> 
> 赞同：5
> 
> 时间：2013-03-15T14:35:52.027
> 
> 标签：linux, pthreads

该 API`pthread_attr_setstacksize(pthread_attr_t *attr, size_t stacksize)`
用于设置为创建的线程堆栈分配的**最小**堆栈大小（以字节为单位）。

但是如何设置**最大**堆栈大小？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T21:19:40.420

如果您自己管理堆栈的内存分配，则`pthread_attr_setstack`可以精确设置堆栈大小。所以在这种情况下，最小值与最大值相同。例如，下面的代码说明了程序尝试访问的内存超过为堆栈分配的内存并导致程序段错误的情况。

```
#include <pthread.h>

#define PAGE_SIZE 4096
#define STK_SIZE (10 * PAGE_SIZE)

void *stack;
pthread_t thread;
pthread_attr_t attr;

void *dowork(void *arg)
{
 int data[2*STK_SIZE];
 int i = 0;
 for(i = 0; i < 2*STK_SIZE; i++) {
   data[i] = i;
 }
}

int main(int argc, char **argv)
{
  //pthread_attr_t *attr_ptr = &attr;
  posix_memalign(&stack,PAGE_SIZE,STK_SIZE);
  pthread_attr_init(&attr);
  pthread_attr_setstack(&attr,&stack,STK_SIZE);
  pthread_create(&thread,&attr,dowork,NULL);
  pthread_exit(0);
} 
```

如果您依赖自动分配的内存，那么您可以指定最小数量，但不能指定最大数量。但是，如果您的线程的堆栈使用量超过了您指定的数量，那么您的程序可能会出现段错误。

请注意，手册页`pthread_attr_setstacksize`说：

`A thread's stack size is fixed at the time of thread creation. Only the main thread can dynamically grow its stack.`

要查看此程序的示例，请尝试查看[此链接](https://computing.llnl.gov/tutorials/pthreads/#Stack)

您可以试验他们提供的代码段，看看如果您没有分配足够的堆栈空间，那么您的程序可能会出现段错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:37:59.263

在大多数 pthreads() 实现中，每个线程的默认堆栈大小通常非常大。如果您遇到需要它大于默认值的问题，您可以尝试使用 pthread_attr_stacksize() 增加它，检查返回值并尝试找到更大的值。实际限制可能基于特定系统上的每个进程地址空间限制。

如果您只想找出默认堆栈大小是多少，可以使用 pthread_attr_getstacksize()。它不会变得比这更大，除非您在创建线程之前通过自己调整它来告诉它。

此处显示了一些使用 pthread 调整堆栈大小的代码 [https://stackoverflow.com/a/15356607/2159730](https://stackoverflow.com/a/15356607/2159730)

注意：链接中的示例是为了尽量减少堆栈使用，并找到最小值（这是危险的，没有进行大量测试）。有点与您似乎想要做的相反，但该示例可能仍然对您有所帮助。只是以不同的方式处理它。

通常，您可能不需要将 pthread 堆栈大小提高到默认值以上。如果你发现你这样做了，你可能应该试着理解为什么会这样。这是相当不寻常的。

如果您可以解释自己代码中实际发生的情况，而不是一般性问题，其他解决方案可能会出现。我想知道您是否真的在尝试减少每个线程堆栈的大小，而只是没有清楚地解释自己。如果是这种情况，该链接也可能因此而有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:52:26.207

我不认为有这样做的选择。

如果您参考`<pthread.h>`，请查找常数`PTHREAD_STACK_MIN`常数。这是默认情况下所有新创建的线程的预定堆栈大小。

的行为`pthread_attr_setstacksize`可以在[这里](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_attr_setstacksize.html)找到：

```
The pthread_attr_setstacksize() function will fail if:
[EINVAL]
    The value of stacksize is less than PTHREAD_STACK_MIN 
    or exceeds a system-imposed limit. 
```

因此，要准确回答您的问题，您不能使用 POSIX 库设置线程的最大堆栈大小。

# javascript - jqplot没有隐藏图表区域之外的点

> ID：15435088
> 
> 赞同：0
> 
> 时间：2013-03-15T14:36:00.443
> 
> 标签：javascript, jquery, css, jqplot

我有以下 JQ 图表。

```
 plot1 = $.jqplot('chart1',[arr2],{
                axes:{
                    xaxis:{
                        renderer:$.jqplot.DateAxisRenderer,
                        tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                        tickOptions:{formatString:'%d %b %Y'},

                    min:'Mar 01, 2013',
                        max: 'Jun 01, 2013',
                        tickInterval:'1 month',
                        numberTicks: '11',
                        label: 'Release Date',
                    },
                    yaxis:{
                        renderer:$.jqplot.LogAxisRenderer,
                        tickOptions:{showMark: true},
                        label: 'Media Buzz',
                        showGridline: true,
                        show: false,
                        //padMin: '0',
                        //padMax: '0',
                        min: '0.2',
                        max: '50',

                    }
                },
                cursor:{ 
                    show: true,
                    zoom:true, 
                    showTooltip:false,
                    constrainZoomTo: 'x',
                    showVerticalLine: true
                },
                seriesDefaults:{
                    renderer: $.jqplot.BubbleRenderer,
                    rendererOptions: {
                     autoscaleBubbles: false,
                    escapeHtml: false
                        },
                    shadow: true
                }
            } 
```

问题是，当数组 'arr2' 包含位于图表区域之外的数据点时，它们会显示在网格之外（见下图）。有没有办法确保它们是隐藏的？

![图 1](../Images/8ed1d77380755027608f571a3ee58d83.png)

中的数据`arr2`是：

```
["2013-02-27",30,10,"Events","Oscars"],
["2013-02-01",1.7730000000000001,10,"E1",‌​"Anti-viral",
{"budget":0,"genres": [
    {"id":9648,"name":"Mystery"},
    {"id":878,"name":‌​"Science Fiction"},
    {"id":53,"name":"Thriller"}
  ],
  "id":125490,
  "imdb_id":"tt2099556",
  "origin‌​al_title":"Antiviral",
  "overview":"...",
  "popularity":1.7730000000000001,
  "productio‌​n_companies":[],
  "production_countries":[],
  "release_date":"2012-10-12",
  "revenue":0‌​,
  "runtime":110,
  "spoken_languages":[
    {"iso_639_1":"en","name":"English"}
  ],
  "title":"‌​Antiviral",
  "vote_average":7.3,
  "vote_count":2
}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:34:18.283

好的，我终于想通了！

问题出在气泡渲染器上。一个快速的 CSS 修复工作

```
.jqplot-series-canvas {overflow: hidden;} 
```

# google-chrome - Chrome 和 IE 不会触发 Drupal 7 中自动完成字段的“更改”事件

> ID：15435090
> 
> 赞同：0
> 
> 时间：2013-03-15T14:36:06.643
> 
> 标签：google-chrome, drupal-7

我正在构建一个包含 2 个依赖字段的表单——第一个是过滤第二个。我正在使用 Drupal 7 Form API 并在第一个字段中使用“#ajax”属性。第一个字段是 Drupal 自动完成，可能正因为如此，“更改”事件没有被触发。在 Firefox 中它工作正常 - 在 Chrome 和 IE 上它没有。

我尝试检查我的 js 脚本中的更改事件，但它根本没有被触发。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-09T19:00:47.393

在 /misc/autocomplete.js 中的文件中进行以下更改

改变：

```
Drupal.jsAC.prototype.select = function (node) {
  this.input.value = $(node).data('autocompleteValue');
}; 
```

至：

```
Drupal.jsAC.prototype.select = function (node) {
  this.input.value = $(node).data('autocompleteValue');
  $(this.input).trigger('change');
}; 
```

当单击自动完成列表中的选项时，这将允许更改触发器工作。

为了在使用箭头键选择并按 Enter 时触发更改，您需要在 hidePopup 函数更改中添加触发器：

```
Drupal.jsAC.prototype.hidePopup = function (keycode) {
  // Select item if the right key or mousebutton was pressed.
  if (this.selected && ((keycode && keycode != 46 && keycode != 8 && keycode != 27) || !keycode)) {
    this.input.value = $(this.selected).data('autocompleteValue');
  }
  // Hide popup.
  var popup = this.popup;
  if (popup) {
    this.popup = null;
    $(popup).fadeOut('fast', function () { $(popup).remove(); });
  }
  this.selected = false;
  $(this.ariaLive).empty();

}; 
```

至：

```
Drupal.jsAC.prototype.hidePopup = function (keycode) {
  // Select item if the right key or mousebutton was pressed.
  if (this.selected && ((keycode && keycode != 46 && keycode != 8 && keycode != 27) || !keycode)) {
    this.input.value = $(this.selected).data('autocompleteValue');
    $(this.input).trigger('change');
  }
  // Hide popup.
  var popup = this.popup;
  if (popup) {
    this.popup = null;
    $(popup).fadeOut('fast', function () { $(popup).remove(); });
  }
  this.selected = false;
  $(this.ariaLive).empty();

}; 
```

对 autocomplete.js 文件进行这些更改后，您应该能够像往常一样调用 .change 触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-02T21:38:37.920

Drupal 7 Autocomplete 使用事件`autocompleteSelect`。这包括使用鼠标或键盘完成时的选择和更改。根据您构建或更改表单的方式，您需要`#ajax`在不同的位置设置属性。`my_`用您的代码特定变量替换所有前缀值。

在代码中自己构建表单将是：

```
$form['my_field']['#ajax'] = array(
  'event' => 'autocompleteSelect',
  'callback' => 'my_callback',
  'wrapper' => 'my_wrapper',
); 
```

使用`hook_form_FORM_ID_alter()`它是：

```
$form['my_field']['my_language'][0]['target_id']['#ajax'] = array(
  'event' => 'autocompleteSelect',
  'callback' => 'my_callback',
  'wrapper' => 'my_wrapper',
); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-09-30T18:14:28.253

尝试使用“autocompletechange”事件。有些人喜欢这个代码

```
$('your selector').on('autocompletechange', function() {
    code;
}); 
```

# objective-c - 如何计算while的重复次数？

> ID：15435093
> 
> 赞同：-1
> 
> 时间：2013-03-15T14:36:13.200
> 
> 标签：objective-c, loops, count, while-loop, numbers

我正在上一年大学，在某个特定点上遇到了很多困难....

我需要编写一个代码来读取美国和巴西的人口，因为我知道美国的人口高于巴西。

问题是我需要计算 while 循环的数量，毕竟如果 1 意味着再多一年，如果它比它大 2 年是 2 等等。代码在这里并且是客观的...

```
int pAmericana, pBrasileira, ano;

int main(int argc, const char * argv[])
{

@autoreleasepool {

    NSLog(@"What year is it?");
    scanf("%i", &Ano);
    NSLog(@"which the American people?");
    scanf("%i", &pAmericana);
    NSLog(@"which the Brazilian people?");
    scanf("%i", &pBrasileira);

    while (pAmericana >= pBrasileira) {

        pAmericana=(pAmericana*0.2)+pAmericana;
        pBrasileira=(pBrasileira*0.4)+pBrasileira;

    }
     //FAILURE TO KNOW HOW TO COUNT HOW OFTEN HAPPENS THE LOOP .....
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:39:08.533

您可以在循环内使用计数器：

```
int i = 0;
while (pAmericana >= pBrasileira) {

    pAmericana=(pAmericana*0.2)+pAmericana;
    pBrasileira=(pBrasileira*0.4)+pBrasileira;
    i++;
}

NSLog(@"Loop count %i", i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:52:09.773

`while`在循环中添加一个计数变量是可行的。但你也可以使用`for`循环：

```
int i = 0;
for (; pAmericana >= pBrasileira; i++) {
    pAmericana=(pAmericana*0.2)+pAmericana;
    pBrasileira=(pBrasileira*0.4)+pBrasileira;
}

NSLog(@"Loop executed %d times", i); 
```

您必须在循环之前声明变量，`for`以便它的值在循环之后可用。

注意 - 您可以将计算更改为：

```
int i = 0;
for (; pAmericana >= pBrasileira; i++) {
    pAmericana *= 1.2;
    pBrasileira *= 1.4;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:41:15.113

您可以在循环外声明一个整数变量，`while`然后在循环内递增它，如下所示：

```
int i = 0; // Initialise the counter

while (pAmericana >= pBrasileira) {
  ...
  i++; // Increment the counter
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T14:39:54.243

`int i = 0`在while之前，`i++;`在while循环中，`NSLog(@"Loops: %d", i);`在循环之后。

# django - django中项目结构和目录所有者的好方法是什么？

> ID：15435095
> 
> 赞同：1
> 
> 时间：2013-03-15T14:36:16.443
> 
> 标签：django, apache, ubuntu

想象一下，我的 django 项目包含很少的应用程序。在服务器上它位于`/var/www/ProjectName`目录。我的用户名是 Foo，有时我想编辑服务器文件。下一个问题的最佳解决方案是什么？

1.  什么所有者`/var/www`？
2.  什么所有者`/var/www/ProjectName`？
3.  什么apache进程所有者？
4.  在哪里找到静态文件（css、js）？它是来自一个目录中的所有应用程序还是来自不同应用程序的不同目录？这个目录的所有者是什么？
5.  哪里可以找到媒体文件（上传用户）？它是来自一个目录中的所有应用程序还是来自不同应用程序的不同目录？这个目录的所有者是什么？
6.  py 和 pyc 文件的所有者，应用程序的目录？

PS。也许项目位于我的主目录中？

我对此有一些建议，但我想听听更有经验的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:44:48.137

1.  在 Ubuntu 12.04 上`root` `drwxr-xr-x 3 root root 4096 Nov 8 11:59 www`

2.  `cd /var/www && ls -la`看到所有者，可能是root？

3.  `www-data`, 在 12.04`www-data`的家目录是`/var/www`( `www-data:x:33:33:www-data:/var/www`)

4.  你可以`collectstatic`到你想要的项目中的任何目录。我经常有一个名为`static`next的目录`manage.py`。所有者可能与您的 django 项目的所有者相同。您只需要允许 apache 对该文件夹的读取权限

5.  您可能需要考虑一个集中式`media`文件夹，而不是为每个应用程序提供媒体。对于静态和媒体，您可以使用相当轻松地将所有内容上传到 s3`django-storages`

6.  所有者可以是您想要的任何人，我不能说所有者，因为它是您的机器。但是，我认为，网络服务器将需要执行`py`文件，因此您可以更改您的权限以允许这样做。

您可以在任何地方找到项目。在 apache 虚拟主机中，您提供`wsgi`文件的位置。您的项目没有理由必须存在`/var/www`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:13:53.400

这是我正在使用的结构。

```
django/
├── project_virtualenv                       (virtualenv folder)
└── versioned                                (folder for things that are versioned)
    ├── devdoc                               (documentation)
    └── py                                   (code)
        └── project                          (django project)
            ├── django_app                   (django app)
            │   
            ├── project                      (project folder)                  
                ├── files                    
                │   ├── media                (media, user uploads, etc)
                │   ├── production_static    (statics for production)
                │   └── static               (statics for development)
                └── templates 
```

目录 django 位于生产服务器的主目录中，只有`wsgi.py`在公开可用的文件夹中（在我的例子中是`/home/user/public_html/wsgi`.

我已将`chmod`Django 文件夹中的所有内容编辑为 777，只是为了让所有内容都在测试生产服务器上运行。不确定有什么安全风险，即使文件不直接提供。

# java - 无法访问帐号

> ID：15435096
> 
> 赞同：0
> 
> 时间：2013-03-15T14:36:17.273
> 
> 标签：java

```
 import java.text.DecimalFormat;
        import java.util.ArrayList;

        public class AccountOwner {
            private Account account;
            private String firstname;
            private String lastname;
            private String address;
            private double currentBalance;
            private ArrayList<Integer> withdrawAmount = new ArrayList<Integer>(5);
            private ArrayList<Double> deposits = new ArrayList<Double>();
            private ArrayList<Double> purchases = new ArrayList<Double>(5);
            private DecimalFormat formatter = new DecimalFormat("##0.00"); 

            public AccountOwner(String firstname, String lastname, String address) {
                this.firstname = firstname;
                this.lastname = lastname;
                this.address = address;
            }

            public String getFirstName() {
                return firstname;
            }

            public String getLatName() {
                return lastname;
            }

            public String getAddress() {
                return address;
            }

            public String checkBalance() {

                for (Double deposit : deposits) {
                    this.currentBalance += deposit;
                }

                return formatter.format(currentBalance);
            }

            public void makeDeposit(double amount) {
                deposits.add(amount);
            }

            public void viewAllDeposits() {

                double allDeposits = 0.0;
                System.out.println("All deposits till today:");
                for (int i = 0; i < deposits.size(); i++) {
                    allDeposits = deposits.get(i);

                    System.out.print("\t"+"$"+allDeposits);
                }
                System.out.println();
            }

            public void withdrawMoney(int amount) {
                withdrawAmount.add(amount);
                currentBalance -= amount;
            }

            public String getActualBalance() {
                return formatter.format(currentBalance);
            }

            public void withdrawAmounts(){
                System.out.println("All Withdrawls till today");
                for(int i = 0; i < withdrawAmount.size(); i++){
                    System.out.print("\t"+"$"+withdrawAmount.get(i));
                }
                System.out.println();
            }

            public void makePurchase(double itemPrice){
                purchases.add(itemPrice);
                this.currentBalance -= itemPrice;
            }

            public void viewAllmadePurchases() {

                double purchase = 0.0;
                System.out.println("All purchases made till today:");
                for (int i = 0; i < purchases.size(); i++) {
                    purchase = purchases.get(i);

                    System.out.print("\t"+"$"+purchase);
                }

            }

            public void viewMyPersonalInformation(){
                System.out.println("Firstname:" + this.firstname);
                System.out.println("LastName:" +this.lastname);
                System.out.println("Address:" +this.address);
                System.out.println("Balance:" +this.checkBalance());
                viewAllDeposits();
                withdrawAmounts();
                viewAllmadePurchases();

            }

        public class Account {
            private AccountOwner customer;
            private int accountNumber;

            public Account(){
                customer = null;
                accountNumber = 0000000;

            }

            public Account(int accountNumber, AccountOwner owner){
                       this.accountNumber = accountNumber;
                       customer = owner;

            }

            public int accountNumberIs(){
                return accountNumber;
            }

        public class BankManager {
            private Account account;
            private AccountOwner accountOwner;
            private int accountNumber;

                public void createNewAccount(int accountNumber, AccountOwner owner){
                account = new Account(accountNumber, owner);
                this.accountNumber = accountNumber;
                this.accountOwner = owner;
                }

            public int getaccountNumber(){

                return accountNumber;
            }

            public void setAccountNumber(int newaccountnumber){
                accountNumber = newaccountnumber;
            }

            public void customerInformation(){
                accountOwner.viewMyPersonalInformation();
            }
public class MainProgram {

    /**
     * @param args
     */
    public static void main(String[] args) {
        BankManager manager = new BankManager();
        AccountOwner owner = new AccountOwner("Tom", "Smith", "208 W 119th St");
        manager.createNewAccount(389745, owner);
        Account acc = new Account();

        owner.makeDeposit(550);
        owner.makeDeposit(700);
        owner.makeDeposit(122.93);
        owner.makeDeposit(195.93);
        owner.withdrawMoney(200);
        owner.makePurchase(200);
        owner.makeDeposit(100);
        owner.makePurchase(1220);
        owner.withdrawMoney(30);

        owner.viewMyPersonalInformation();
        System.out.println();
        System.out.println();
        System.out.println();
        System.out.println(acc.accountNumberIs()); 
```

我遇到的问题是我试图从 accountowner 访问帐号而不涉及对 bankmanager 类的引用。我怎样才能让它工作。我一直在尝试使用帐户类本身，因为我创建了一个构造函数并将这些参数分配给帐户类中的字段，但似乎不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:43:04.927

此代码包含一个错误：

```
public Account(int accountNumber, AccountOwner owner){
    AccountOwner cstomer = owner;
    int acctNumber = accountNumber;
    accountNumber = acctNumber;
    //System.out.println(accountNumber);
} 
```

`accountNumber`您传递给构造函数的参数优先于您的类的`accountNumber`字段。你`Account`的`accountNumber`领域从未真正设置过。

这相当于：

```
public Account(int accountNumber, AccountOwner owner){
    AccountOwner cstomer = owner;
    accountNumber = accountNumber;
} 
```

* * *

要确保您正在访问该字段，请使用以下`this`关键字：`this.accountNumber`

```
public Account(int accountNumber, AccountOwner owner){
    AccountOwner cstomer = owner;
    this.accountNumber = accountNumber;
    //System.out.println(accountNumber);
} 
```

还有另一个错误，`Account.customer`未分配：

```
public Account(int accountNumber, AccountOwner owner){
    customer = owner;
    this.accountNumber = accountNumber;
} 
```

我建议您学习使用调试器或更好地编写单元测试（首先）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:41:27.407

```
class AccountOwner {
//...
    private Account account;
//...
    public Integer getAccountNumber() {
        return this.account != null ? this.account.accountNumberIs() : null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:44:16.433

您已将 accountNumber 类型设置为**int**并将其设置为 0000000 （*对于 int 类型仅等于 0*），因此当您调用 getAccountNumber() 方法时会得到 0。

相反，将 accountNumber 类型更改为**String**并将其初始化为 '0000000'。然后您将看到 0000000 正在打印。

# xcode - 如何在应用程序的开头加载视图控制器？

> ID：15435097
> 
> 赞同：2
> 
> 时间：2013-03-15T14:36:19.697
> 
> 标签：xcode, uiviewcontroller, uitabbarcontroller, uistoryboard

我有一个选项卡视图控制器作为我在应用程序中的根控制器，它由 3 个选项卡组成，我们称它们为视图 A、视图 B、视图 C。我想在我的应用程序启动后立即加载这些选项卡，我认为可以在其中完成 `didFinishLaunchingWithOptions`功能，但我不确定，有人知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:59:23.470

出于这些目的，我使用了这种方法：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UIWindow *window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window = window;

    UITabBarController *tabBarController = [[UITabBarController alloc] init];

    rootView = [[SGMenuViewController alloc] init];

    UIViewController *tab1VC = [[UIViewController alloc] init];
    UIViewController *tab2VC = [[UIViewController alloc] init];
    UIViewController *tab3VC = [[UIViewController alloc] init];
    UIViewController *tab4VC = [[UIViewController alloc] init];

    navController = [[UINavigationController alloc] initWithRootViewController:rootView];
    UINavigationController *secondNavController = [[UINavigationController alloc] initWithRootViewController:tab3VC];

    NSArray* controllers = [NSArray arrayWithObjects:navController, tab2VC, secondNavController, tab4VC, nil];
    tabBarController.viewControllers = controllers;

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.rootViewController = tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

您基本上创建了一个`UITabBarController`并将所有视图放在那里。`UINavigationController`如果您需要在选定的选项卡中推送/弹出视图，您可以创建一个。在上面的示例中，只有`1st`和`3rd`选项卡具有`UINavigationController`，因此我可以`self.navigationController pushViewController:`在它们上使用。

# c - 在配置阶段确定错误位置的工具/提示 - PHP 扩展编码

> ID：15435109
> 
> 赞同：0
> 
> 时间：2013-03-15T14:36:31.827 元素？
> 
> 标签：c, debugging, syntax-error, php-extension

我试图在 C 中编写一个 PHP 扩展后`phpize`，我做`./configure`了并得到了这个错误

```
checking Whether extensionB is enabled... yes, shared
./configure: line 4171: syntax error near unexpected token `;'
./configure: line 4171: ;' 
```

我应该如何找到导致错误的行？有什么工具可以做到这一点？

**文件夹结构**

```
extensionB
         config.m4
         extensionB.c
         extensionB.h 
```

配置.m4

```
PHP_ARG_ENABLE(extensionB, Whether extensionB is enabled, [--enable-extensionB enable extensionB support])

if $PHP_EXTENSIONB != "no" then
    PHP_NEW_EXTENSION(extensionB,extensionB.c,$ext_shared);
fi 
```

扩展B.h

```
#ifndef PHP_EXTENSIONB_H
#define PHP_EXTENSIONB_H 1

#define PHP_EXTENSIONB_VERSION "1.0"
#define PHP_EXTENSIONB_EXTNAME "extensionB"

PHP_FUNCTION(extensionBFn1);

extern zend_module_entry extensionB_module_entry;
#define phpext_extensionB_ptr &extensionB_module_entry

#endif 
```

扩展B.c

```
#include "php.h"
#include "extensionB.h"

static function_entry extensionBFns[] = 
{
 PHP_FE(extensionBFn1,NULL)
 {NULL,NULL,NULL}
};

zend_module_entry extensionB_module_entry = 
{
    STANDARD_MODULE_HEADER,
    PHP_EXTENSIONB_EXTNAME,
    extensionBFns,
    NULL,NULL,NULL,NULL,NULL,
    PHP_EXTENSIONB_VERSION,
    STANDARD_MODULE_PROPERTIES
};

#ifdef COMPILE_DL_EXTENSIONB
    ZEND_GET_MODULE(extensionB)
#endif

PHP_FUNCTION(extensionB)
{ 
  RETURN_STRING("Extension B returns a string from Fn 1",1);
} 
```

**编辑**

通过我的代码，我意识到我的文件 config.m4 应该包含

```
if test "$PHP_EXTENSIONB" != "no";
then 
```

现在它通过了 ./configure 阶段，但是否有任何工具可以显示该位置。像gdb？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:30:53.223

没有什么像 GDB 那样，但 configure.log 文件：搜索失败的测试，在它周围的行中，它告诉你准确执行了什么以及失败了什么。

# git - 将现有的 NetBeans 项目移动到远程服务器并将其置于版本控制之下

> ID：15435114
> 
> 赞同：2
> 
> 时间：2013-03-15T14:36:43.030
> 
> 标签：git, netbeans, remote-server

我有一个项目，我已经工作了大约一个月。我们将用于生产的服务器终于可用了。我想将此项目放在服务器上并使用 Git 进行版本控制。

我正在尝试按照本教程进行操作，但它并没有解决我的情况。
[http://git-scm.com/book/en/Git-Basics-Getting-a-Git-Repository](http://git-scm.com/book/en/Git-Basics-Getting-a-Git-Repository)

我已经在 Netbeans 中初始化了一个本地 Git 存储库（7.3 版已内置 Git 支持），但下一步是什么？

谢谢你的帮助。第一次使用Git。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:54:47.157

您的下一步是在远程服务器上创建一个裸存储库，每个人都将在其中进行协作。您可以按照[本教程](http://git-scm.com/book/en/Git-on-the-Server-Setting-Up-the-Server)执行此操作，或者考虑更灵活的安装，例如[Gitolite](http://git-scm.com/book/en/Git-on-the-Server-Gitolite)。

这是否足够，或者您是否还希望在服务器上拥有一个目录，其中一个分支已签出？

# android - 由 AlarmManager 重新创建的服务

> ID：15435117
> 
> 赞同：1
> 
> 时间：2013-03-15T14:36:49.073
> 
> 标签：android, android-service, android-alarms

我有一个相当标准的服务，我希望使用警报来触发它。这是服务的启动部分：

```
class MyService extends Service {
    private Context context;
    private AlarmManager  alarmManager = null;

    private final String startReason = "com.stuff.myreason";
    private final int REASON_NO_INTENT = 0;
    private final int REASON_ALARM     = 1;
    private final int REASON_X         = 2; // and so on.

    @Override
    void onCreate() {
        super.onCreate();
        context = getApplicationContext();
        alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
        // do onCreate stuff
    }

    @Override
    int onStartCommand (Intent intent, int flags, int startId) {
        int reason = REASON_NO_INTENT;
        if (intent != null) {
            reason = intent.getExtra(startReason, REASON_NO_INTENT);
        }

        switch(reason) {
            // handle the different reasons we may have been "started"
        }

        return START_STICKY;
    }
} 
```

当我从活动中使用 context.startService 触发它时，它绝对正常启动。特别是，如果它已经在运行，它不会（重新）从头开始，而只是通过`onStartCommand()`. 这是预期的行为。但是，当我使用 AlarmManager 触发它时：

```
Intent intent = new Intent(context, MyService.class);
intent.putExtra(purposeOfStartCode, REASON_ALARM);

PendingIntent pi = PendingIntent.getService(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

alarmManager.set(AlarmManager.RTC_WAKEUP, /* A time in the future */, pi); 
```

当警报到期时，它似乎从头开始重新启动服务：它开始一个新的实例化，`onCreate()`然后调用，`onStartCommand()`而不是仅仅调用`onStartCommand()`已经运行的实例化。

我已经尝试将`PendingIntent`标志更改为`FLAG_ONE_SHOT`并替换`context`为`MyService.this`没有任何改进。

我对此感到困惑 - 任何人都可以解释这种行为并提出让它按预期运行的方法吗？

编辑 - 导致解决方案的操作集合在我下面的答案中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T20:00:07.733

经过一番调查和工作，我发现了很多事情。完成所有这些后，这个问题看起来已经消失了：

1.  如果您在服务中覆盖 onStart 和 onStartCommand（以允许较旧的设备）并将 super.onStartCommand 放在后者中，它将调用 onStart，这意味着您将每个意图都输入两次！

2.  根据其他答案之一（及其评论），AlarmManager 被设计和指定为传递广播意图，而不是其他类型。然而，在实践中，它并不挑剔，似乎尊重其他形式。我认为这是解决问题的关键之一。

3.  如果该服务与其他活动等处于同一进程中，则该服务有时似乎“刚刚重新启动”。这可能是此问题中指出的问题的实际原因。请参阅[Android 服务 onCreate 被多次调用而不调用 onDestroy](https://stackoverflow.com/questions/7211066/android-service-oncreate-is-called-multiple-times-without-calling-ondestroy)。

4.  仅使用意图与服务通信而不是绑定和使用 Messenger 或绑定和访问方法时，事情似乎更稳定。虽然这两个都是正确的，但它们管理起来相当复杂（尽管您可以使用这种方法：[从服务线程调用 Android Activity 的首选方法是什么](https://stackoverflow.com/questions/15413667/what-is-the-preferred-way-to-call-an-android-activity-back-from-a-service-thread/15414328#15414328)和[使用 Android 应用程序类来持久化数据](https://stackoverflow.com/questions/4208886/using-the-android-application-class-to-persist-data)）。虽然我完全理解 android 文档不同意我的观点，但在我观察到转向广播意图时，只有交流似乎是关键。如果您采用单独的流程方法，无论如何您都必须这样做。

5.  在声明和处理类的方式上保持一致是值得的。这有点混乱，但是，因为有时使用全名（“com.company.superapp.CleverService”）而不是短名（“CleverService”或“.CleverService”）似乎是值得的。所以，最好总是使用全名。

6.  关于上下文的经验法则（“使用getApplicationContext”）并不是真正的正确方法。请参阅[何时调用活动上下文或应用程序上下文？](https://stackoverflow.com/questions/7298731/when-to-call-activity-context-or-application-context/7298955#7298955); 本质上使用它，除非你真的需要使用更广泛的上下文，并很好地管理你的变量。

7.  如果它是在不再存在的 Activity、Service、Thread、AsyncTask 等中创建的，那么垃圾收集器可能会清除仍在使用的东西。如果应用程序是基于服务的，那么制作传入的类的副本可能是明智的，这样它们就不会在以后被清除。

8.  启动服务的一种比通常建议的更简洁的方法是给服务一个 intentFilter，并以它的全名作为操作。然后，您可以创建意图以仅使用类名作为字符串来启动它。这意味着您不必担心上下文。请参阅[呼叫服务中的问题](https://stackoverflow.com/questions/13194035/issue-in-calling-service)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:44:45.550

好吧，我真的很惊讶它完全运行你`Service`！`PendingIntent`您传递给`AlarmManager`需要的是广播`Intent`。所以你需要重新架构你的代码。将`AlarmManager`触发 a `BroadcastReceiver`，`BroadcastReciever`然后可以调用`startService()`。

见描述[`AlarmManager.set()`](http://developer.android.com/reference/android/app/AlarmManager.html#set%28int,%20long,%20android.app.PendingIntent%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T01:30:26.720

我通过使用以下代码使其工作：

```
AlarmManager almgr = (AlarmManager)MyContext.getSystemService(Context.ALARM_SERVICE);
Intent timerIntent = new Intent(MyUniqueLabel);
timerIntent.addFlags(Intent.FLAG_RECEIVER_FOREGROUND);
PendingIntent pendingOffLoadIntent = PendingIntent.getBroadcast(MyContext, 1, timerIntent, 0); 
```

你必须做这些事情才能让它工作。
1.) 调用 addFlags 和意图并将其传递到 FLAG_RECEIVER_FORGROUND
2.) 在 PendingIntent.getBroadcast 中使用非零请求代码

如果您将这些步骤中的任何一个排除在外，它将无法正常工作。

# webrtc - webRTC 数据通道消息的最大大小是多少？

> ID：15435121
> 
> 赞同：7
> 
> 时间：2013-03-15T14:36:52.980
> 
> 标签：webrtc

我正在尝试使用 webRTC，似乎对每条消息中可以发送的字节数有任意限制。[我使用的这个人](https://github.com/rohansingh/rtc-p2p)的例子选择了 100（加上一些）字节的限制。在我的测试中，它似乎接近 200 字节。然而，从 TCP 和[UDP](http://en.wikipedia.org/wiki/User_Datagram_Protocol#Packet_structure)上读取这些协议支持高达约 65kb 的包，即使考虑到不同类型网络的[MTU](https://stackoverflow.com/a/2614188/1165146)，它仍然应该比约 200 字节多得多的可用空间。

我发现唯一提到硬限制的来源是[这个 WebRTC 数据通道协议草案](https://datatracker.ietf.org/doc/html/draft-jesup-rtcweb-data-protocol-04#section-7.3)，但它只说 TBD。

所以我的问题是：

1.  如果有任何来源指定任何浏览器中的当前消息大小限制？
2.  如果我可以假设限制总是相同的，如果不能，是否有任何方法可以让我的应用程序知道限制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T11:53:31.533

sharefest 项目找到了一种解决速率限制的方法 - 您可以修改传出报价以更改带宽设置（根据[http://www.ietf.org/rfc/rfc2327.txt](http://www.ietf.org/rfc/rfc2327.txt)）

详细信息：[https ://github.com/Peer5/ShareFest/blob/master/public/js/peerConnectionImplChrome.js#L201](https://github.com/Peer5/ShareFest/blob/master/public/js/peerConnectionImplChrome.js#L201)

根据我自己的经验，每条消息仍然限制为 ~800 字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-23T10:58:12.990

我一直在测试通过数据通道将 jpegs 发送到 chrome 57，现在高达 64k 的消息似乎是可靠的。

webRTC 数据通道确实具有可靠性机制，它使用 SCTP over DTLS（通过 UDP） - SCTP 允许您设置可靠性和排序行为，但默认情况下 WebRTC 使用有序+可靠 - 这意味着您可以获得与 TCP 相似的语义 - 除了消息边界被保留——至少在理论上是这样。

实际上，如果空间不足，Chrome 可能会将部分消息传递到 javascript，因此最好在处理之前检查您是否有完整的消息。

# phpunit - 测试输出不包含文本

> ID：15435123
> 
> 赞同：7
> 
> 时间：2013-03-15T14:36:57.217
> 
> 标签：phpunit

我知道如何使用 PHPUnit 库测试 php 输出，使用`expectOutputString()`or `expectOutputString()`。现在我需要确保输出不包含给定的字符串。我可以使用输出缓冲和在内部搜索字符串来做到这一点，但可能更好的方法是使用`expectOutputString()`正确的表达式。

这个表达式应该如何构建？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T06:28:50.453

您想使用正则表达式，并且要进行否定匹配，您必须使用前瞻断言语法。例如，测试输出不包含“hello”：

```
class OutputRegexTest extends PHPUnit_Framework_TestCase
{
    private $regex='/^((?!Hello).)*$/s';

    public function testExpectNoHelloAtFrontFails()
    {
        $this->expectOutputRegex($this->regex);
        echo "Hello World!\nAnother sentence\nAnd more!";
    }

    public function testExpectNoHelloInMiddleFails()
    {
        $this->expectOutputRegex($this->regex);
        echo "This is Hello World!\nAnother sentence\nAnd more!";
    }

    public function testExpectNoHelloAtEndFails()
    {
        $this->expectOutputRegex($this->regex);
        echo "A final Hello";
    }

    public function testExpectNoHello()
    {
        $this->expectOutputRegex($this->regex);
        echo "What a strange world!\nAnother sentence\nAnd more!";
    }
} 
```

给出这个输出：

```
$ phpunit testOutputRegex.php 
PHPUnit 3.6.12 by Sebastian Bergmann.

FFF.

Time: 0 seconds, Memory: 4.25Mb

There were 3 failures:

1) OutputRegexTest::testExpectNoHelloAtFrontFails
Failed asserting that 'Hello World!
Another sentence
And more!' matches PCRE pattern "/^((?!Hello).)*$/s".

2) OutputRegexTest::testExpectNoHelloInMiddleFails
Failed asserting that 'This is Hello World!
Another sentence
And more!' matches PCRE pattern "/^((?!Hello).)*$/s".

3) OutputRegexTest::testExpectNoHelloAtEndFails
Failed asserting that 'A final Hello' matches PCRE pattern "/^((?!Hello).)*$/s".

FAILURES!
Tests: 4, Assertions: 4, Failures: 3. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-04T05:18:50.917

这很简单。测试该字符串不包含其他字符串：

## 编辑

2020 年为 PHPUnit 9.x 提供了另一种简洁的方法：

```
$this->assertStringNotContainsString(needle, haystack); 
```

请参阅 PHPUnit[断言文档](https://phpunit.readthedocs.io/en/9.1/assertions.html#assertstringcontainsstring)。并非所有可用的断言都记录在文档中。

找到这些的好方法是`dd($this)`（或`var_dump($this)`）从您的 PHPUnit 测试类中并滚动浏览输出`methods`部分。在那里，您可以看到可用的断言，包括未记录的断言。

## 较旧的答案

更详细、更灵活的不同断言不仅适用于字符串。

```
$string='just some string'; 
$this->assertThat($string, $this->logicalNot($this->stringContains('script')));
// Assertion is passed. 
```

基于来自[http://www.kreamer.org/phpunit-cookbook/1.0/assertions/use-multiple-assertions-in-one-test的同一测试中多个断言的绝佳示例](http://www.kreamer.org/phpunit-cookbook/1.0/assertions/use-multiple-assertions-in-one-test)

我用它来检查表单字段的清理是否正常。

在 PHPUnit 测试中，我建立了一个测试数组，`<script>`其中包含要清理的标签。将其传递给正在测试的消毒方法。[序列化](http://php.net/manual/en/function.serialize.php)清理结果（以避免弄乱断言数组，并且在`var_dump`序列化结果时更容易让我看到）。

然后如上所示[`stringContains`](http://apigen.juzna.cz/doc/sebastianbergmann/phpunit/function-stringContains.html)在断言中应用该方法并享受:)[`assertThat`](https://phpunit.readthedocs.io/en/7.1/assertions.html?#assertthat)

# php - 教义迁移不断生成日期时间字段

> ID：15435127
> 
> 赞同：6
> 
> 时间：2013-03-15T14:37:03.997
> 
> 标签：php, mysql, symfony, doctrine

我将 Symfony 2.1.* 与 Doctrine 2.3.* 一起使用，我遇到了以下问题：

为我的 mysql (5.5) 数据库生成迁移时，它会不断为我的日期时间字段生成查询。

我的模型如下所示：

```
class User {
    /**
     * @var \DateTime $createdAt
     *
     * @ORM\Column(type="datetime", nullable=true, options={"default"=null})
     */
    private $createdAt;

    /**
     * @var \DateTime $updatedAt
     *
     * @ORM\Column(type="datetime", nullable=true, options={"default"=null})
     */
    private $updatedAt;
} 
```

这是每次生成的迁移：

```
$this->addSql("ALTER TABLE user CHANGE created_at created_at DATETIME DEFAULT NULL, CHANGE updated_at updated_at DATETIME DEFAULT NULL"); 
```

这让我发疯了，因为我做了很多重组，而且每次我都必须删除 +/- 15 个不同实体的这些查询。

这是一个已知问题，还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:59:21.863

正如@BetaRide 上面提到的，您应该删除`options={"default"=null}`

# android - 从服务发送到活动的数据丢失。为什么？

> ID：15435133
> 
> 赞同：0
> 
> 时间：2013-03-15T14:37:29.753
> 
> 标签：android, android-intent, android-activity

我是 android 新手，我的 Service 中有以下代码：

```
int icon = R.drawable.gcm_notification;
long when = System.currentTimeMillis();
String notificationText = "Message From SimplePay";

//get the notification service
NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
Notification notification = new Notification(icon,notificationText,when);
String title = context.getString(R.string.app_name);

String messageBody = "You have " + 1 + " payment request pending";

Intent notificationIntent = new Intent(context,InvoiceActivity.class);

notificationIntent.putExtra("invoice",message);

 System.out.println(message);

//always create a new activity! So recent values get updated
PendingIntent intent = PendingIntent.getActivity(context,0,notificationIntent,PendingIntent.FLAG_ONE_SHOT);
notification.setLatestEventInfo(context,title,messageBody,intent);
notification.flags |= Notification.FLAG_AUTO_CANCEL;
notificationManager.notify(0,notification); 
```

我可以看到`message`我正在传递的意图是存在的（即它不是`null`）。但就我`InvoiceActivity`而言，当我试图找回`message`价值时，我得到`null`了所有的时间。我像这样使用以下代码`InvoiceActivity`：

```
 Bundle extras = getIntent().getExtras();
 message = extras.getString("invoice");
 System.out.println(message); //always null 
```

我不确定为什么会这样。我在哪里犯错误？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:36:22.777

这就是我为服务所拥有的：（确保您在 onReceive 中使用正确的意图。onReceive 接收一个意图；启动服务的那个。我注意到当 Eclipse 创建 onReceive 时，Intent 参数的默认名称是“intent “（你不想使用这个）。另外，你为什么使用变量上下文而不是关键字 this？Service 类扩展了 ContextWrapper，它扩展了 Context。

```
package com.example.solution;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.IBinder;

public class Serv extends Service {

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // TODO Auto-generated method stub

        String message = "Hello";
        long when = System.currentTimeMillis();
        String notificationText = "Message From SimplePay";

        //get the notification service
        NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.ic_launcher, notificationText,when);
        String title = this.getString(R.string.app_name);

        String messageBody = "You have " + 1 + " payment request pending";

        Intent notificationIntent = new Intent(this,InvoiceActivity.class);

        notificationIntent.putExtra("invoice",message);

        //always create a new activity! So recent values get updated
        PendingIntent intentp = PendingIntent.getActivity(this,0,notificationIntent,PendingIntent.FLAG_ONE_SHOT);
        notification.setLatestEventInfo(this,title,messageBody,intentp);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notificationManager.notify(0,notification);
        return START_STICKY;
    }

} 
```

这是主要活动（启动器）。

```
package com.example.solution;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

        startService(new Intent(this,Serv.class));
    }
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    stopService(new Intent(this,Serv.class));
}
} 
```

这是InvoiceActivity

```
package com.example.solution;

import android.app.Activity;
import android.util.Log;

public class InvoiceActivity extends Activity {
@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

    Log.e("MESSAGE",getIntent().getExtras().getString("invoice"));
}
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:21:16.987

如果您的活动正在运行，则新意图可能在 onNewIntent 中传递

```
@Override
protected void onNewIntent(Intent intent)
{
    super.onNewIntent(intent);

    message = getIntent().getStringExtra("invoice");
    System.out.println(message); //always null 
} 
```

# mysql - 将mysql数据库从远程服务器复制到本地计算机

> ID：15435144
> 
> 赞同：55
> 
> 时间：2013-03-15T14:37:53.647
> 
> 标签：mysql

我在 VPN 下，我没有远程服务器的 SSH 访问权限。

我可以通过控制台连接到远程数据库

```
mysql -u username -p -h remote.site.com 
```

现在我正在尝试将远程数据库克隆到本地计算机

```
mysqldump -u username -p -h remote.site.com mysqldump | mysql -u root -ppassword webstuff 
```

我有错误

```
mysqldump: Got error: 1045: Access denied for user 'webstaff'@'10.75.1.2' 
(using password: YES) when trying to connect 
```

如何将mysql数据库从远程服务器复制到本地计算机？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-03-15T14:47:28.893

假设以下命令成功运行：

```
mysql -u username -p -h remote.site.com 
```

for 的语法`mysqldump`相同，并将数据库转储输出到`stdout`. 将输出重定向到计算机上的本地文件：

```
mysqldump -u username -p -h remote.site.com DBNAME > backup.sql 
```

替换`DBNAME`为您要下载到计算机的数据库的名称。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-15T14:47:29.113

检查语法并一次执行一个命令，然后验证输出。

```
mysqldump -u remoteusername -p remotepassword -h your.site.com databasename > dump.sql

mysql -u localusername -p localpassword databasename < dump.sql 
```

匹配所有密码后，您可以使用管道。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-11T04:34:38.697

通常我们的数据库非常大，并且需要时间直接从远程机器转储到其他机器，正如我们的其他朋友在上面所建议的那样。

在这种情况下，您可以做的是使用[MYSQLDUMP 命令在远程机器上进行转储](http://www.oyewiki.com/mysql/mysql-dump-how-to-take-mysql-dump-export-mysql-data)

**MYSQLDUMP -uuser -p --all-databases > file_name.sql**

然后使用[Linux SCP 命令将该文件从远程服务器传输到您的计算机](http://www.oyewiki.com/linux/linux-unix-scp-command)

**scp user@remote_ip:~/mysql_dump_file_name.sql ./**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T14:43:00.633

这可能有不同的原因，例如：

*   您使用的密码不正确
*   MySQL 服务器在尝试将客户端主机的 IP 地址解析为名称时出错
*   没有权限授予用户

您可以尝试以下步骤之一：

通过以下方式重置远程用户的密码：

```
SET PASSWORD FOR some_user@ip_addr_of_remote_client=PASSWORD('some_password'); 
```

通过以下方式授予用户访问权限：

```
GRANT SELECT, INSERT, UPDATE, DELETE, LOCK TABLES ON YourDB.* TO user@Host IDENTIFIED by 'password'; 
```

希望这对您有所帮助，如果没有，那么您将不得不阅读[文档](http://dev.mysql.com/doc/refman/5.1/en/access-denied.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-22T09:07:08.047

请检查这个要点。

[https://gist.github.com/ecundar/789660d830d6d40b6c90](https://gist.github.com/ecdundar/789660d830d6d40b6c90)

```
#!/bin/bash

# copymysql.sh

# GENERATED WITH USING ARTUR BODERA S SCRIPT
# Source script at: https://gist.github.com/2215200

MYSQLDUMP="/usr/bin/mysqldump"
MYSQL="/usr/bin/mysql"

REMOTESERVERIP=""
REMOTESERVERUSER=""
REMOTESERVERPASSWORD=""
REMOTECONNECTIONSTR="-h ${REMOTESERVERIP} -u ${REMOTESERVERUSER} --password=${REMOTESERVERPASSWORD} "

LOCALSERVERIP=""
LOCALSERVERUSER=""
LOCALSERVERPASSWORD=""
LOCALCONNECTION="-h ${LOCALSERVERIP} -u ${LOCALSERVERUSER} --password=${LOCALSERVERPASSWORD} "

IGNOREVIEWS=""
MYVIEWS=""
IGNOREDATABASES="select schema_name from information_schema.SCHEMATA where schema_name != 'information_schema' and schema_name != 'mysql' and schema_name != 'performance_schema'  ;"

# GET A LIST OF DATABASES
databases=`$MYSQL $REMOTECONNECTIONSTR -e "${IGNOREDATABASES}" | tr -d "| " | grep -v schema_name`

# COPY ALL TABLES
for db in $databases; do
    # GET LIST OF ITEMS
    views=`$MYSQL $REMOTECONNECTIONSTR --batch -N -e "select table_name from information_schema.tables where table_type='VIEW' and table_schema='$db';"
    IGNOREVIEWS=""
    for view in $views; do
        IGNOREVIEWS=${IGNOREVIEWS}" --ignore-table=$db.$view " 
    done
    echo "TABLES "$db
    $MYSQL $LOCALCONNECTION --batch -N -e "create database $db; "
    $MYSQLDUMP $REMOTECONNECTIONSTR $IGNOREVIEWS --compress --quick --extended-insert  --skip-add-locks --skip-comments --skip-disable-keys --default-character-set=latin1 --skip-triggers --single-transaction  $db | mysql $LOCALCONNECTION  $db 
done

# COPY ALL PROCEDURES
for db in $databases; do
    echo "PROCEDURES "$db
    #PROCEDURES
    $MYSQLDUMP $REMOTECONNECTIONSTR --compress --quick --routines --no-create-info --no-data --no-create-db --skip-opt --skip-triggers $db | \
    sed -r 's/DEFINER=`[^`]+`@`[^`]+`/DEFINER=CURRENT_USER/g' | mysql $LOCALCONNECTION  $db 
done

# COPY ALL TRIGGERS
for db in $databases; do
    echo "TRIGGERS "$db
    #TRIGGERS
    $MYSQLDUMP $REMOTECONNECTIONSTR  --compress --quick --no-create-info --no-data --no-create-db --skip-opt --triggers $db | \
    sed -r 's/DEFINER=`[^`]+`@`[^`]+`/DEFINER=CURRENT_USER/g' | mysql $LOCALCONNECTION  $db 
done

# COPY ALL VIEWS
for db in $databases; do
    # GET LIST OF ITEMS
    views=`$MYSQL $REMOTECONNECTIONSTR --batch -N -e "select table_name from information_schema.tables where table_type='VIEW' and table_schema='$db';"`
    MYVIEWS=""
    for view in $views; do
        MYVIEWS=${MYVIEWS}" "$view" " 
    done
    echo "VIEWS "$db    
    if [ -n "$MYVIEWS" ]; then
      #VIEWS
      $MYSQLDUMP $REMOTECONNECTIONSTR --compress --quick -Q -f --no-data --skip-comments --skip-triggers --skip-opt --no-create-db --complete-insert --add-drop-table $db $MYVIEWS | \
      sed -r 's/DEFINER=`[^`]+`@`[^`]+`/DEFINER=CURRENT_USER/g'  | mysql $LOCALCONNECTION  $db  
    fi    
done

echo   "OK!" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-11T15:47:10.783

> 将mysql数据库从远程服务器复制到本地计算机

我遇到了同样的问题。我无法用其他答案完成它。所以这就是我最终是如何做到的（是的，一个初学者教程）：

第 1 步：在本地 phpmyadmin 中创建一个新数据库。

第二步：将远程服务器上的数据库转储到一个sql文件中（这里我使用了Putty/SSH）：

```
mysqldump --host="mysql5.domain.com" --user="db231231" --password="DBPASSWORD" databasename > dbdump.sql 
```

第 3 步：通过 FTP 客户端下载`dbdump.sql`文件（应位于根文件夹中）

第 4 步：将 sql 文件移动到 localhost 安装的文件夹中`mysql.exe`。我正在使用统一服务器，这将是在`C:\uniserver\core\mysql\bin\`，使用 XAMPP 它将是`C:\xampp\mysql\bin`

第五步：执行`mysql.exe`如下：

```
 mysql.exe -u root -pYOURPASSWORD YOURLOCALDBNAME < dbdump.sql 
```

第 6 步：等待...取决于文件大小。您可以在 phpmyadmin 中查看进度，查看新创建的表。

第7步：完成。转到您本地的 phpmyadmin 以检查数据库是否已填满整个数据。

希望有帮助。祝你好运！

注意1：启动uniformer-server时可以指定mysql的密码。这是您必须在上面为您的密码使用的那个。

注意 2：如果登录失败并且您遇到密码问题，请检查您的密码是否包含特殊字符，例如`!`. 如果是这样，那么您可能需要逃避它们`\!`。

注意3：如果导入后本地db中不能找到所有mysql数据，可能是你的dbdump.sql的mysql指令有问题

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-07T17:19:43.383

最好使用 oneliner：

将 remoteDB 转储到 localDB：

```
mysqldump -uroot -pMypsw -h remoteHost remoteDB | mysql -u root -pMypsw localDB 
```

将 localDB 转储到 remoteDB：

```
mysqldump -uroot -pmyPsw localDB | mysql -uroot -pMypsw -h remoteHost remoteDB 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-20T05:54:35.103

```
C:\Users\>mysqldump -u root -p -h ip address --databases database_name -r sql_file.sql
Enter password: your_password 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-20T21:00:15.453

这个答案不是远程服务器而是本地服务器。逻辑应该是一样的。要将我的本地计算机 MAMP 数据库复制并备份到我的本地桌面计算机文件夹，然后转到控制台

```
mysqldump -h YourHostName -u YourUserNameHere -p YourDataBaseNameHere > DestinationPath/xxxwhatever.sql 
```

在我的情况下`YourHostName`是`localhost`. `DestinationPath`是下载路径；您可以拖放所需的目标文件夹，它会粘贴路径。

然后可能会询问密码：

```
Enter password: xxxxxxxx 
```

# python - 如何区分一个点和两个点的线？

> ID：15435146
> 
> 赞同：0
> 
> 时间：2013-03-15T14:37:56.380
> 
> 标签：python, python-2.7, distinguishedname

我想提取句子的特定部分。我的问题是我有一个句子列表，每个句子都有不同的格式。例如：

```
X.y.com
 x.no
 x.com
 y.com
 z.co.uk
 s.com
 b.t.com 
```

如何根据它们拥有的点数分割这些线？如果我希望句子的第二部分带有两个点，而句子的第一部分带有一个点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:40:06.443

您想要最后一个点之前的部分；只是在点上分开并取最后一部分：

```
for line in data:
    if not '.' in line: continue
    elem = line.strip().split('.')[-2] 
```

对于您的输入，这给出了：

```
>>> for line in data:
...     print line.strip().split('.')[-2]
... 
y
x
x
y
co
s
t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:45:58.560

我会遵循这个逻辑：

对于每一行：

*   删除开头和结尾的所有空格
*   用点分割线
*   参加拆分列表的最后一个部分

这应该给你你正在寻找的句子的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:03:06.843

要回答您的问题，您可以使用[`count`](http://docs.python.org/2/library/string.html#string.count)“。”来计算次数。出现，然后做任何你需要的。

```
>>> 't.com'.count('.')
1
>>> 'x.t.com'.count('.')
2 
```

您可以在循环中使用它：

```
for s in string_list:
    dots = s.count('.')
    if dots == 1:
        # do something here
    elif dots == 2:
        # do something else
    else:
        # another piece of code 
```

更多pythonic方式来解决您的问题：

```
def test_function(s):
    """
        >>> test_function('b.t.com')
        't'

        >>> test_function('x.no')
        'x'

        >>> test_function('z')
        'z'
    """
    actions = {0: lambda x: x
               1: lambda x: x.split('.')[0],
               2: lambda x: x.split('.')[1]}
    return actions[s.count('.')](s) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T15:39:57.520

只需使用拆分功能。

```
a = 'x.com'
b = a.split('.') 
```

这将列出 b 中的 2 个项目。如果您有两个点，则列表将包含 3 个项目。该函数实际上根据给定的字符拆分字符串。

# android - Imagebutton 慢转为按下状态

> ID：15435152
> 
> 赞同：3
> 
> 时间：2013-03-15T14:38:18.197
> 
> 标签：android, android-layout, imagebutton, android-image, android-selector

我有一个 ImageButton 并且我已经为它制作了一个选择器，所以当我按下 imagebutton 时，会显示另一个图像。但是当按下图像按钮时，似乎必须等待 1 秒才能更改图像。这对用户体验真的不好。。

有没有可能解决这个问题？我已经查找了一些答案，但我现在不知道在哪里更改它。

这是我的代码

选择器：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item
    android:state_pressed="true"
    android:state_enabled="true"
    android:drawable="@drawable/main_pressed" />
<item
    android:state_enabled="true"
    android:drawable="@drawable/main" />
</selector> 
```

布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:background="@drawable/bg" >

    <ImageButton
          android:id="@+id/mainMosque"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_centerInParent="true"
          android:background="@null"
          android:contentDescription="@string/mainMosque"
          android:src="@drawable/main_btn_mosque" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:16:18.157

我不确定这是否会解决问题，因为这对我来说确实是新问题。但是您可以尝试以下方法

```
<ImageButton
      android:id="@+id/mainMosque"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_centerInParent="true"
      android:background="@drawable/main_btn_mosque"
      android:contentDescription="@string/mainMosque"/> 
```

和 main_btn_mosque

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">    
<item
    android:state_pressed="true"
    android:drawable="@drawable/main_pressed" />
<item
    android:drawable="@drawable/main" />
</selector> 
```

在`selector`它只是一个优化，默认情况下它是启用的。

现在如果问题仍然存在。再尝试一件事。代替`ImageButton`使用`Button`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-03T14:23:31.650

您可以使用 ImageView 代替 ImageButton，并使用 Glide 库将图像加载到视图中，这将提高应用程序的性能，您可以在此处阅读更多信息：[https](https://github.com/bumptech/glide) ://github.com/bumptech/glide 希望这可行为你！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-26T16:21:17.437

[如何使按钮响应更快？](https://stackoverflow.com/questions/5040303/how-can-i-make-a-button-more-responsive)

此链接提供了一些线索，说明导致此问题的原因，但是我没有成功实施答案。

> 嗯...我通常扩展 Button 类并覆盖 onTouchEvent 方法
> 
> ```
> public boolean onTouchEvent (MotionEvent event) 
> {
>    if (event.getAction() == MotionEvent.ACTION_DOWN) 
>    {
>       setPressed(true);
>    }
>    return super.onTouchEvent(event);
> } 
> ```

# oracle - 使用 nhibernate 调用带有可选参数的 oracle 过程

> ID：15435154
> 
> 赞同：2
> 
> 时间：2013-03-15T14:38:34.320
> 
> 标签：oracle, nhibernate, plsql, procedure, optional

我有这样的程序：

```
Procedure MyProc(param1 IN VARCHAR2 default 'default_value', param2 IN VARCHAR2 default null); 
```

要在 PL-SQL 中调试它，我正在做：

```
MyPackage.MyProc(param2 => '20130301'); 
```

它在 Hbm 文件中的 Nhibernate 中映射：

```
<sql-query name="MyMappedProc">
   <![CDATA[  call MyPackage.MyProc(param2 => :parametro2); ]]>
</sql-query> 
```

并在应用程序中被调用：

```
_Query = Session.GetNamedQuery("MyMappedProc");
_Query.SetParameter("parametro2", "value_var");

var lista = _Query.List<object>(); 
```

我遇到了这个错误：

`{"ORA-00907: missing right parenthesis"}`

有没有办法用 NHibernate 调用带有可选参数的过程？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:37:44.693

我现在如何在生产代码中执行此操作

```
<sql-query name="Recalc">
    CALL P_DATA.RECALC.CONST_QUERY(:map, :id)
</sql-query> 
```

然后从 C# 代码

```
session.GetNamedQuery("Recalc").SetParameter("id", this.id)
    .SetParameter("map", "MyMap").ExecuteUpdate(); 
```

像往常一样 ShowSQL 或[了不起的 Ayende 的 NHibernate 分析器](http://www.hibernatingrhinos.com/products/nhprof)是你的朋友

# curl - 我的 curl 上传多个文件有什么问题

> ID：15435157
> 
> 赞同：1
> 
> 时间：2013-03-15T14:38:44.227
> 
> 标签：curl, upload

我尝试运行以下 curl 语句

```
curl --form file[]=@s1.png --form file[]=@s2.png http://api.website.com/upload.php 
```

但我的upload.php 只收到s1.png。它没有得到 s2.png。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:41:50.947

使用这个技巧

```
curl --form "file1=@s1.png" --form "file2=@s2.png" http://api.website.com/upload.php 
```

# c# - 扩展方法覆盖

> ID：15435158
> 
> 赞同：5
> 
> 时间：2013-03-15T14:38:45.820
> 
> 标签：c#, extension-methods

假设我有两节课。

```
public class A {...} 
public class B : A {...} 
```

我想要实现的是覆盖这两种类型的扩展函数。

```
public static void HelperExtension(this A a) {...}
public static void HelperExtension(this B b) {...} 
```

我知道它们不是虚拟功能或表现得像它们。但是我真的很想知道在这种情况下编译器的行为。

有没有办法在不解析其类型的情况下调用 B 类型的函数？或者任何自动解决的建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T14:42:41.723

这不是*压倒一切*的——它是**重载**，如果有的话。

很好 - 因为签名不同，编译器编译它不会有任何问题，即使在同一个命名空间中。

但是，将调用哪种扩展方法取决于变量的确切类型。

* * *

现在：

> 有没有办法在不解析其类型的情况下调用 B 类型的函数？或者任何自动解决的建议？

没有铸造这是不可能的。扩展绑定到正在扩展的确切类型，因此您需要具有确切的类型才能在其上调用扩展。

这就是为什么大多数 LINQ 都是在`IEnumerable<T>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T14:48:14.170

正如您所说，没有办法只使扩展成为虚拟。

您可以[通过静态方法自己实现整个虚拟方法模式，](http://blogs.msdn.com/b/ericlippert/archive/2011/03/17/implementing-the-virtual-method-pattern-in-c-part-one.aspx)但我有一种强烈的感觉，这对您没有任何实际用途，它更像是一个有趣的理论解决方案，因为所涉及的工作对于这么简单的事情来说是令人望而却步的。

如果有固定的、有限数量的可能子类，您可以让第一种方法具有以下内容：

```
public static void HelperExtension(this A a)
{
    B b = a as B;
    if(b != null)
       HelperExtension(b);
    else
       //the rest of the method.
} 
```

如果您有很多子类，您可以使用 a`Switch`甚至 a `Dictionary<Type, Action<A>>`，但这会很乏味，难以维护，并且不支持编译时未知的任意继承者。

另一种选择是在编译时通过使用`dynamic`. 我强烈建议尽可能避免使用它，但在这种特殊情况下，它允许您在 上拥有一个公共扩展`A`，每个子类型都有一堆私有静态方法（具有不同的名称），然后是一个调度调用：

```
public static void HelperExtension(this A a)
{
    ExtenstionImplementation((dynamic)a);
}

private static void ExtenstionImplementation(A a){...}
private static void ExtenstionImplementation(B a){...}
private static void ExtenstionImplementation(C a){...} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T13:43:39.660

我最近遇到了类似的问题。我有一个包含类层次结构的第三方类库（比如说 IBase、Base 和 Derived，其中 IBase 实际上是一个接口）。

```
public interface IBase {...}
public class Base : IBase {...}
public class Derived : Base {...} 
```

然后，我有一个类，其中包含对 IBase 的引用。ext 的具体类型可以是 Base 也可以是 Derived。

```
public class MyClass {
    // other stuff
    public IBase ext;
} 
```

我真正需要的是在 IBase 中定义并在每个后代类中重写的虚拟方法 AdditionalMethod()，但这是不可行的。因此，可能会想定义一个包含一组重载扩展方法的类：

```
public static class MyExtensions
{
    public static void AddedMethod(this IBase arg) {...}
    public static void AddedMethod(this Base arg) {...}
    public static void AddedMethod(this Derived arg) {...}
} 
```

然后，在 MyClass 对象上调用 ext.AddedMethod()。这不起作用：因为扩展方法是静态绑定的，所以总是调用第一个方法（即 AdditionalMethod(this IBase arg)），而不管 ext 的实际类型。通过在 IBase 上定义单个扩展方法，然后使用反射选择参数类型与传递给扩展方法的实际类型匹配的私有静态方法的正确实例，可以绕过该问题：

```
public static class MyExtensions
{
    // just one extension method
    public static void AddedMethod(this IBase arg){
        // get actual argument type
        Type itsType = arg.GetType();

        // select the proper inner method
        MethodInfo mi = typeof(MyExtensions).GetMethod("innerAddedMethod",
            BindingFlags.NonPublic | BindingFlags.Static,
            null,
            new Type[] { itsType },
            null);

        // invoke the selected method
        if (mi != null) {
            mi.Invoke(null, new object[] { arg });
        }
    }

    private static void innerAddedMethod(Base arg) {
        // code for Base type arg 
    }

    private static void innerAddedMethod(Derived arg) {
        // code for Derived type arg
    } 
```

是否应该将新的派生类 Derived2 添加到 IBase 层次结构中，我们必须简单地向 MyExtensions 类添加一个以 Derived2 作为参数的重载的 innerAddedMethod()。

# google-app-engine - 如果包含，则不调用操作

> ID：15435160
> 
> 赞同：0
> 
> 时间：2013-03-15T14:38:55.007
> 
> 标签：google-app-engine, jsf, richfaces

如果我放置在一个包含文件中，该操作将不会回调 bean。

主文件：

```
<h:form id="ifLogin">
    <h:panelGrid
        rendered="#{userSession.isLogin}"
        columns="2" columnClasses="columnAlignLeft, columnAlignRight"
        border="0" cellpadding="0">

        <ui:include src="\test.xhtml" />        

    ...

    </h:panelGrid>
</h:form> 
```

包含文件 (test.xhtml)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">

    <h:panelGrid border="0" columns="4"> 
        <h:graphicImage value="#{msg.urlImageHome}"
            style="height:26px;width:26px;" />
        <f:subview>             
            <h:commandLink value="#{msg.home}" style="font-size: small;" immediate="true" 
                action="#{pageNavigationBean.updateCeaAppName}">
                <f:param name="requestName" value="CEA_MAIN_PAGE" />
                <f:param name="ceaAppName" value="" />      
            </h:commandLink>    
        </f:subview>
    </h:panelGrid>  
</ui:composition> 
```

解决方法是取出包含文件，直接将代码放到主文件中，如下所示：

主文件（不使用包含）

```
<h:form id="ifLogin">
    <h:panelGrid
        rendered="#{userSession.isLogin}"
        columns="2" columnClasses="columnAlignLeft, columnAlignRight"
        border="0" cellpadding="0">

        <h:panelGrid border="0" columns="4"> 
            <h:graphicImage value="#{msg.urlImageHome}"
                style="height:26px;width:26px;" />
            <f:subview>             
                <h:commandLink value="#{msg.home}" style="font-size: small;" immediate="true" 
                    action="#{pageNavigationBean.updateCeaAppName}">
                    <f:param name="requestName" value="CEA_MAIN_PAGE" />
                    <f:param name="ceaAppName" value="" />      
                </h:commandLink>    
            </f:subview>
        </h:panelGrid>          

    ...

    </h:panelGrid>
</h:form> 
```

我使用richface 4.3.1 奇怪的是当我从本地GAE 运行时不会发生这个问题。在线部署到 GAE 后，出现问题（即如果使用包含，则不会触发操作。

这是jsf中的错误吗？或richface实现或GAE？有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:42:44.643

问题识别

这不是使用引起的`<ui:include>`

当包含文件是从后台bean动态生成时，问题就出现了，例如：

```
<ui:include src="#{pageNavigationBean.appDropDownMenuUrl}" /> 
```

如果明确提及 url，它会起作用，例如：

```
<ui:include src="\test.xhtml" /> 
```

好吧，如果从我的本地 GAE 运行，两种方式都可以工作，但是当在线部署时，我需要使用显式位置而不是从 bean 生成。可能是由于 GAE 问题导致状态保存在客户端（javax.faces.STATE_SAVING_METHOD）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T04:00:39.207

我无法使用完全相同的包含代码（test.xhtml）重现该问题，但这里有一些建议：

1.  转义 '>' 字符（替换`>>>`为`&gt;&gt;&gt;`）
2.  指定`id`属性`f:subview`（根据 tld 是必需的）
3.  将反斜杠 ('\') 更改为斜杠 ('/')。所以包容将是`<ui:include src="/test.xhtml" />`

# html - CSS3 具有多列布局的两个 div 的宽度，并排

> ID：15435162
> 
> 赞同：0
> 
> 时间：2013-03-15T14:39:07.113
> 
> 标签：html, css, multiple-columns

我有两个 div，都具有多列布局。我想让它们并排放置，但我尝试的一切（如浮动）都会搞砸。我认为问题在于`width:auto;`占用了所有宽度。

我做了一个 jsfiddle 来更好地解释：http: [//jsfiddle.net/2fPZ2/](http://jsfiddle.net/2fPZ2/)

红色和紫色的 div 应该在同一行。

结果必须是水平布局，其中部分是红色和紫色 div。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:41:22.573

只需添加`-webkit-column-count:2`到`.container`.

**CSS**

```
.container{
    height:100%;
    width:100%;
    position:relative;
    background:red;
    -webkit-column-count: 2;
} 
```

[JSF](http://jsfiddle.net/2fPZ2/2/)中。

更多信息：[列数](https://developer.mozilla.org/en-US/docs/CSS/column-count)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:43:06.737

您的回答由 Matthew James Taylor 提供：

[http://matthewjamestaylor.com/blog/equal-height-columns-2-column.htm](http://matthewjamestaylor.com/blog/equal-height-columns-2-column.htm)

# delphi - 在 DWScript 中从 Delphi 向记录类型添加方法

> ID：15435165
> 
> 赞同：2
> 
> 时间：2013-03-15T14:39:11.143
> 
> 标签：delphi, methods, records, dwscript

在我创建了一个 TRecordSymbol 之后，如何向它添加构造函数和方法？我尝试使用 TMethodSymbol 收效甚微，因为我找不到定义方法执行的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:32:12.367

方法符号（像所有 TFuncSymbol 一样）将执行推迟到接口（通过 Executable 属性定义）以进行“正常”执行（即，使用堆栈帧和参数评估并压入堆栈）。另一方面，“魔术”函数符号需要一个专用的表达式类，并且它们接管了整个函数调用（因此开销更少，但你必须保护自己免受所有事情的影响）。

对于示例，您可以查看 dwsMathComplex 和 3d 单元的作用，它们使用自定义方法引入记录。

# javascript - javascript - 中的数组值

> ID：15435166
> 
> 赞同：1
> 
> 时间：2013-03-15T14:39:12.093
> 
> 标签：javascript, arrays

我怎样才能显示我的数组值`<li></li>`

我的代码：

**HTML**

```
<ul id="navp">
<li></li>
<li></li>
<li></li>
</ul> 
```

**JS**

```
 var myList = [ 
    ['1','one'],
    ['1','two'],
    ['1','three'],
    ];
for (var tok in myList) { console.log(tok, myList[tok][1]); } 
```

我想显示`one, two, three`在列表 ( `<li></li>`) 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:41:21.310

一种可能的方式：

```
var li = document.getElementById("navp").getElementsByTagName("li");
for (var i = 0, len = li.length; i < len; i++) {
    li[i].innerHTML = myList[i][1];
} 
```

另一种方法是使用现代[`querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)：

```
var li = document.querySelectorAll("#navp > li");
for (var i = 0, len = li.length; i < len; i++) {
    li[i].innerHTML = myList[i][1];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:54:34.577

**使用 HTML：**

```
<ul id="navp">
</ul> 
```

**试试这些 JS 代码：**

```
var myList = [ 
    ['1','one'],
    ['1','two'],
    ['1','three'],
    ];

var mainList = document.getElementById("navp");

for(var i=0;i<myList.length;i++){
         var item = myList[i];
         var elem = document.createElement("li");
         elem.value=item[0];
         elem.innerHTML=item[1];

         mainList.appendChild(elem);
    } 
```

[jsfiddle链接](http://jsfiddle.net/Tf4ky/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-24T09:18:31.560

你可以使用like，动态地依赖于数组push li标签的长度

```
const emailList = [];
data.invalidEmailIds.forEach((email) => {
 emailList.push("<li>" + email + "</li>");
}); 
```

在 html 中，你可以使用 {{emailList}}

# ember.js - ember-data 中的继承映射

> ID：15435169
> 
> 赞同：0
> 
> 时间：2013-03-15T14:39:15.897
> 
> 标签：ember.js, ember-data

我可以想象这有点太早了，但是支持 ember-data 继承的计划是什么？我目前的用例是为不同的应用程序配置身份验证密钥，例如 Dropbox 的用户密钥、Twilio 的用户密钥、AppX 的用户密钥。我想存储“密钥”的集合，特别是可以是 DropboxKey、TwilioKey 或 AppXKey。我会看到以下 DS.Model 类：

```
var Account = DS.Model.extend({ name: DS.attr('string') });
var DropboxAccount = Account.extend({ key: DS.attr('string'), secret: DS.attr('string')});
var FastbillAccount = Account.extend({ email: DS.attr('string'), key: DS.attr('string')}); 
```

现在我想做

```
Account.find() 
```

# multithreading - 杂注中的 Haskell 线程模式切换

> ID：15435170
> 
> 赞同：2
> 
> 时间：2013-03-15T14:39:16.440
> 
> 标签：multithreading, haskell, network-programming

通过编译指示文档进行的所有搜索我都找不到使用编译指示打开/关闭线程的方法，有什么提示吗？不想只为我正在玩的这个小代码创建一个 cabal 文件，但我认为更改线程模式将使我的 killThread 尝试能够杀死一个与之分叉的线程，如果甚至线程开关不会让我杀死这个线程（在 Windows 中运行）：

```
repeatAccept s p = do
  c <- accept s
  t <- forkFinally (echoHandler c) (exitPool p)
  atomically $ do
    p' <- readTVar p
    writeTVar p ((t,c):p')
  repeatAccept s p 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T14:54:08.897

[`-threaded`是一个静态标志](http://www.haskell.org/ghc/docs/7.4.2/html/users_guide/flag-reference.html#id612286)，所以你不能使用它来设置它[`{-# OPTIONS_GHC #-}`](http://www.haskell.org/ghc/docs/7.4.2/html/users_guide/ch04s02.html#source-file-options)。

你运气不好。咬紧牙关，写一个 .cabal 文件。

# php - 使用准备好的语句和 php 创建一个函数来执行标准删除

> ID：15435173
> 
> 赞同：0
> 
> 时间：2013-03-15T14:39:22.823
> 
> 标签：php, sql, prepared-statement

我目前正在阅读关于构建 twitter 克隆的 nettuts.com 教程，他们有一个用于从数据库中删除行的函数，并且他们正在使用查询方法，但我尝试将该函数转换为准备好的语句。但是我得到了 `Invalid parameter number: parameter was not defined`错误.这是函数的代码

```
public function delete($table, $arr){
    $query = "DELETE FROM " . $table;
    $pref = "WHERE ";

    foreach ($arr as $key => $value) {
        $query .= $pref. $key . " = " . ":" . $key;
        $pref = "AND ";
    }
    $query .= ";";
    $result = $this->db->prepare($query);
    $result->execute($arr);
}

$connect = new Model();

$connect->delete("ribbits", array("user_id" => 2,
                                "ribbit" => "trial ribbit"
                                )); 
```

有人可以告诉我我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:00:53.423

当您将数组传递给 时`->execute()`，键需要`:`在它们之前有字符（就像它们出现在 SQL 查询中一样）。

因此，在您的`delete`函数中，像这样构建 SQL 查询：

```
public function delete($table, $arr){
    $keys = array();
    $values = array();

    foreach($arr as $key => $value){
        $keys[] = $key . " = :" . $key;
        $values[":".$key] = $value;
    }

    $query = "DELETE FROM " . $table . " WHERE " . implode(" AND ", $keys);
    $result = $this->db->prepare($query);
    $result->execute($values);
} 
```

# sql - 使用正则表达式转换字符串

> ID：15435176
> 
> 赞同：0
> 
> 时间：2013-03-15T14:39:39.037
> 
> 标签：sql, regex

我使用子字符串对其进行了转换，它工作正常，但我必须转换很多，这需要时间。

有人告诉我正则表达式效率更高，速度更快。

关于正则表达式的任何建议？

使用正则表达式将 string1 转换为 string2

```
string1 = '96457fa012456c41bf9200011da2d8fa'

string2='\96\45\7f\a0\12\45\6c\41\bf\92\00\01\1d\a2\d8\fa' 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:02:10.600

这适用于 Oracle - 用 SQL Server 替换 Oracle 的正则表达式实现应该很简单：

```
select regexp_replace(
  '96457fa012456c41bf9200011da2d8fa', 
  '(..)', 
  '\\\1') 
from dual 
```

解释：

*   我们要匹配任何一对字符 => ".."
*   我们想“存储”我们刚刚匹配的字符，因此将它们包含在一个捕获组中 => "(..)"
*   在我们的替换字符串中，我们想要获取匹配组的内容 => "\1"
*   我们想在每个组之前添加一个反斜杠 => "\\\1"
*   dual 只是 Oracle 中的一个虚拟表

# database - 测试依赖数据库的代码的更好做法是什么？模拟和存根？还是种子数据？

> ID：15435177
> 
> 赞同：0
> 
> 时间：2013-03-15T14:39:40.280
> 
> 标签：database, unit-testing, testing, integration-testing

似乎我永远都读过，在测试时，使用模拟数据库对象或存储库。没有理由测试别人的数据库代码，对吧？无需让您的代码实际上与数据库中的数据混淆，对吗？

现在最近我看到测试建立了一个数据库（可能在内存中）并用测试数据播种它，只是为了运行测试。

一种方法比另一种更好吗？如果带有种子数据的测试值得运行，是否应该为模拟数据库连接而烦恼？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:07:00.940

有很多方法可以测试与数据库交互的代码。

存储库模式是在数据访问代码上创建外观的一种方法。它可以在测试期间轻松存根/模拟存储库。当需要单独测试一段业务逻辑并且虚拟值可以帮助测试代码的不同分支时，这很有用。

假数据库（内存或本地文件）不太常见，因为需要一些“中间件”知道如何从真实数据库和假数据库中读取数据。在整个事物上拥有一个存储库并模拟存储库通常是有意义的。这种方法在一些已有基础设施的旧系统中更可行。例如，您使用真实数据库，然后出于测试性能原因切换到假数据库。

另一种选择是使用真实的数据库，用虚假数据填充它。这种方法速度较慢，需要编写大量脚本。但是，这种方法作为集成测试的一部分相当普遍。我曾经编写过很多“事务性”测试，在这些测试中我使用数据库事务在运行测试后回滚更改。我会编写一个大型测试，在特定表上共同执行我的所有 CRUD 操作。

当您测试将 SQL 结果转换为对象的代码时，最后一种方法很有意义。您的 SQL 可能无效（或者您使用了错误的存储过程名称）。在映射到对象时，也很容易忘记检查空值、执行无效转换等。这段代码应该在某个时候进行测试。ORM 可以帮助减轻很多此类测试。

这些天我通常很懒惰。我使用存储库。我的大部分数据层代码在执行实际集成测试时都会被触及（使用虚拟数据访问真实数据库），因此我不会费心测试单个数据库调用（不再进行事务测试）。我还使用 ORM 来执行我的大部分 SELECT 语句。我认为很多行业都在朝着这种更懒惰的方式发展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:06:50.267

你应该同时使用两者。

业务服务应依赖 DAO，并通过 mock DAO 进行测试。这允许快速、易于实施、易于维护的测试。

DAO 的独特职责是包含数据库访问代码（查询等），并且还应该进行测试。因此，您应该使用带有测试数据的测试数据库，并检查他们的查询是否返回/保存他们支持返回/保存的内容。

我不是使用内存数据库的忠实拥护者，这与生产中使用的数据库不同。某些查询、约束等的行为会因数据库而异，您最好确保代码可以在生产数据库上运行，而不是在仅供测试使用的内存数据库中运行。

# typo3 - “新闻系统”在不同系统上作用不同

> ID：15435179
> 
> 赞同：0
> 
> 时间：2013-03-15T14:39:42.527
> 
> 标签：typo3, tx-news

我有 2 台服务器，我认为它们是同步的（开发和实时），但“新闻系统”（扩展键“新闻”）有所不同。

在开发服务器这一行

```
<f:format.date format="%A">{newsItem.datetime}</f:format.date> 
```

正如预期的那样输出“Freitag”（那是德语的星期五）

但在 Live Server 中，它输出`%AM`. 更奇怪的是`l`（单独，没有 %）用英语输出“Friday”。

我检查了我见过的所有配置，但似乎找不到系统之间的差异。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:22:43.540

TYPO3 正在使用`DateTime::format`（[http://de2.php.net/manual/en/datetime.format.php](http://de2.php.net/manual/en/datetime.format.php)）来格式化日期。此方法使用与`date()`不使用语言环境相同的语法，因此所有输出都是英语。

我唯一无法解释的是为什么您的开发环境接受`%A`呈现日期。有不同的 PHP 版本吗？您使用的是哪个 TYPO3 版本？看看`/typo3/sysext/fluid/Classes/ViewHelpers/Format/DateViewHelper.php`，你会在那里得到答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:37:38.457

我刚刚解决了！原来我的实时服务器中有 4.7.7，并且不支持 stftime。

好笑，没想到在4.7.X更新中会加入这么重要的功能……

# json - json读取方法上的map scala类

> ID：15435182
> 
> 赞同：0
> 
> 时间：2013-03-15T14:39:45.897
> 
> 标签：json, scala

您好我正在尝试实现此方法：

```
override def reads(json: JsValue): JsSuccess[Data] = JsSuccess( new Data(
      (json \ "title").as[String], 
      (json \ "User").as[User]
      ) 
) 
```

但是当我尝试使用它时

```
val b = jsonData.as[Data] 
```

它给了我一个错误：

```
models.Data$dataFormat$.reads(Data.scala:73) 
```

第 73 行是`(json \ "User").as[User]`

任何人都可以帮助我，因为我无法解决问题所在。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:27:57.743

假设 User 是一个案例类，您是否为 User 定义了一个隐式读取函数，以便可以完成 User 的反序列化？

看看：这个对[json 处理的精彩解释 play](http://mandubian.com/2012/09/08/unveiling-play-2-dot-1-json-api-part1-jspath-reads-combinators/)，它应该适用于任何基于 jackson 的库。

# javascript - 从javascript运行循环以保存在Mysql中

> ID：15435183
> 
> 赞同：0
> 
> 时间：2013-03-15T14:39:46.737
> 
> 标签：javascript, mysql

您好，我目前正在我的 php 页面（如下）上运行一个 javascript，它带有我需要的每个数据，有什么方法可以将它连接到 mysql 数据库吗？（我是 javascript 新手）

```
<script>
 var allItems = JSON.parse(localStorage.getItem('itemsArray')) || [];
for(var i = 0; i < allItems.length; i++) {
  var item = allItems[i];
  console.log('Current item: %o', item);

}
</script> 
```

'itemsArray 来自保存功能'

```
function save(){

var oldItems = JSON.parse(localStorage.getItem('itemsArray')) || [];

var newItem = {};
var num = document.getElementById("num").value;

newItem[num] = {
    "methv": document.getElementById("methv").value
    ,'q1': document.getElementById("q1").value,
    'q2':document.getElementById("q2").value,
    'q3':document.getElementById("q3").value,
    'q4':document.getElementById("q4").value,
    'comm':document.getElementById("comm").value
};

oldItems.push(newItem);

localStorage.setItem('itemsArray', JSON.stringify(oldItems));

}); 
```

谢谢

PS我已经有数据库设置的连接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:45:18.050

使用 ajax/json 请求将您的数据发布到 php 函数，并使用 php 完成所有与数据库相关的工作。接下来返回成功或失败状态，这将在这个被调用的 js 函数中捕获，然后您可以使用 javascript 显示成功或失败消息。

例子：

包括 jQuery 库：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

使用 jQuery 的 ajax 请求脚本：

```
 var path = 'http:/your_url/your_php_script_file.php';
    var data = 'json_data=' + JSON.stringify(newItem[num]);
        $.ajax({
            url: path,
            type: "POST",
            data: data,
            cache: false,
            success: function ($returm_msg){
                alert($returm_msg);
            }
        }); 
```

用于在数据库中保存/更新的 PHP：

```
$receive_value = json_decode($_POST['json_data'], true)); 
```

你会得到像

```
$receive_value['methv'],$receive_value['q1'],....,$receive_value['comm']; 
```

现在在数据库中进行保存操作。

```
$result = mysql_query("INSERT INTO .....") or die(mysql_error());
if($result){
    return "Success!"; // if not function then simply echo "Success!";
}else{
    return "Failure!"; // if not function then simply echo "Failure!";
} 
```

有用的网址：

1.  [http://www.bennadel.com/resources/presentations/jquery/demo21/index.htm](http://www.bennadel.com/resources/presentations/jquery/demo21/index.htm)
2.  [http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)

# java - 对象管理

> ID：15435190
> 
> 赞同：-2
> 
> 时间：2013-03-15T14:39:54.883
> 
> 标签：java, c++, pointers

我对使用 java 或 c++ 管理对象有疑问。

情况是，在 C++ 中，当你想创建一个动态对象时，它比创建它的块范围更有效，你必须做一个新的，你会收到一个指针。否则，如果您只想在块范围内使用此对象，则无需使用 new...

但是在 Java 中，您总是必须使用 new 创建它们，因为如果不是，则该对象为 null，您可以使用它。

这是为什么？只是它的工作原理吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:49:43.823

我能想到的最好的类比是，C++ 中的所有类型都表现得*有点*像 Java 中的原语。如果您在 Java 中声明一个原语，则不必使用`new`，您可以立即使用该变量。但是这样一个原语，就像 C++ 中的大多数对象一样，只能在当前范围内存活。在 C++ 中，如果您希望一个对象存在于当前范围之外，您需要将这一点告诉您的编译器，因为它必须在堆而不是堆栈上分配内存。您可以使用`new`. 在 Java 中，*所有*对象（保存原语）都分配在堆上，堆栈上的唯一数据是对堆内存的引用和原语。因此，在 Java 中，所有内存分配都是使用`new`.

以上是Java中实际内存管理的简化。有关原语的堆栈/堆内存的更全面讨论，请查看[此处](https://stackoverflow.com/questions/3646632/does-the-java-primitives-go-on-the-stack-or-the-heap)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:47:04.567

这种差异是因为 Java 使用垃圾收集器进行内存管理。由于垃圾收集器会在其作用域结束时自动释放对象（并且它没有可访问的引用），因此无需使用两种不同的方法来创建对象。

你可以说 Java 中的对象自动表现得像 C++ 中的对象，它们在没有**new**的情况下初始化，因为你不必考虑删除它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:46:46.663

基本上，这就是它的工作原理。一旦使用了新关键字，就会创建对象并将其弹出到堆上。如果您没有在方法之外引用该对象，那么垃圾收集器将自动回收该对象。我建议您阅读 Java 堆和垃圾收集的基础知识，以便更好地理解。那里有很多资源。我总是向新来的人推荐头部第一本书。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T14:54:16.627

在 C++ 中，任何东西都可以在堆栈上分配（当你说

```
ObjectType o; 
```

在 C++ 中。

在 Java 中，只有原语真正分配在堆栈上。对象永远不会在堆栈上（就是这样）。当你说

```
ObjectType o; 
```

在 Java 中，没有分配对象，只有一个“变量”。一个变量可以引用一个对象，但目前它没有。本质上，这和说的一样

```
ObjectType *o = NULL 
```

在 C++ 中。

为了实际分配一个对象供这个引用引用，你必须`new`在 Java 中使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T15:18:05.767

> 情况是，在 C++ 中，当你想创建一个动态对象时，它比创建它的块范围更有效，你必须做一个新的，你会收到一个指针。

C++ 中的**new**运算符在**堆上**分配空间。堆是主内存的较大部分所在的位置。如果您这样做，您有责任在使用**free**运算符完成后释放该空间。

> 否则，如果您只想在块范围内使用此对象，则无需使用 new...

当您在 C++ 中声明变量时，内存是在**堆栈**上分配的。堆栈是存储本地数据的地方，当函数返回时，您在执行函数时向其**推送**（添加）的所有内容都将自动**弹出**（删除）。栈通常比堆小很多，但使用它有一些好处：你不需要担心内存管理，它更快等。

> 但是在 Java 中，您总是必须使用 new 创建它们，因为如果不是，则该对象为 null，您可以使用它。

当您在 Java 中声明变量时，它们会再次存储在堆栈中 如您所知，您不会在原始数据类型（例如）上调用**new 。**`int i = new int(3);`当您执行类似`Object x;`声明时，这`x`将是对 type 对象的**引用**`Object`。但是，您没有为其分配值，因此引用为**空**（不是对象，因为没有对象）。

Java 中的**new**运算符，粗略地说，在堆上分配空间，调用它所调用对象的构造函数，并返回对构造对象的引用。与 C++ 的不同之处在于您不需要自己释放对象 - 有一个**垃圾收集器**。本质上，它的作用是监控有多少引用指向一个对象，如果它们降为零，它会自动删除该对象。

所以当你这样做时

```
对象 y = 新对象（）；
x = y;
```

您将获得两个指向同一个对象的引用（x 和 y）。当你有这样的函数调用时

```
对象 foo() {
    对象 y = 新对象（）；
    返回 y;
}无效酒吧（）{
    对象 x = foo();
    ...
}
```

在您的`...`一部分中，`bar()`您将拥有引用`x`，指向在 中创建的对象`foo()`。由于`foo`已经返回，`y`引用已被释放，因此在程序部分中将只有一个对该对象的引用`...`。如果您不将`x`引用复制到任何地方`bar`并`bar`返回，那么对该对象的引用将是 0，并且垃圾收集器会**收集**它（尽管不是立即）。

-斯坦

# php - foreach 循环插入所有复选框（选中和未选中）

> ID：15435198
> 
> 赞同：0
> 
> 时间：2013-03-15T14:40:13.997
> 
> 标签：php, html, mysql, loops, foreach

我有一个使用 php 生成 html 复选框的表单，如下所示

```
<p><form name="university" action="/university_handler" method="post">
  <fieldset>
    <table class="table">
      <thead>
        <tr>
          <th><span class="help-block">University Department</span></th>                            
        </tr>
      </thead>
      <tbody>  
        <tr> 
          <td><?php 
            $query = mysqli_query($db, "SELECT university_department FROM university WHERE university_id = '$university_id'") 
                or die  ("Could not search!");
            while($row = mysqli_fetch_array($query)){
              $university_department = $row['university_department'];
              $_SESSION['university_department'] = $university_department;
              $universityDepartment = $_SESSION['university_department'];
              echo "<label><input type='checkbox' name='university_department[]' value='{$universityDepartment}'>$universityDepartment</label><br><input type='text' value='' name='professor_name[{$universityDepartment}]' placeholder='Professor-Name'><input type='text' value='' name='class_name[{$universityDepartment}]' placeholder='Class-Name'>";}
          ?></td>
        </tr>
      </tbody>
    </table> 
    <button type="submit" name="Submit"class="btn btn-info">Submit</button>
  </fieldset>
</form></p> 
```

现在，当我使用 my`university_handler`将值插入数据库时​​，所有复选框都在插入，而不仅仅是那些已被选中的复选框。我一直在尝试一系列的事情似乎没有任何工作。这是处理程序。

```
<?php
session_start();
include("connect.php");

$university_id = $_SESSION['university_id'];

// check if share_form is submitted and not empty
$error_message = "";
if(is_array($_POST['university_department']) && !empty($_POST['university_department'])){
  $error = array();
  $universityDepartment = $_POST['university_department'];
  if (count($universityDepartment)>0){
    foreach (str_replace('#', '', $_POST['class_name']) as $departmentName => $stripid){
      $class_name_backslash = $stripid . '/';
      $class_name = mysqli_real_escape_string($db, $stripid);
      print_r($class_name);
    }
    $query_uni = ("INSERT INTO temp_list(departmentName, class_name, professor_name) VALUE ('$departmentName','$class_name', '$professor_name')");
    $q_u = mysqli_query($db, $query_uni) or die ('Error posting data');
}
}?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:05:24.057

我喜欢@Martin 的回答。我唯一想改变的是`$_REQUEST`

使用时，`$_REQUEST`您是在说嘿查看帖子或获取变量并使用任一值。那么，如果您同时拥有同名的 a`$_POST`和 a变量会发生什么？`$_GET`一个会被使用，而另一个不会。

因此，让我们以不同的方式使用相同的代码。

```
$checkBoxName = (isset($_POST['checkBoxName']) ? $_POST['checkBoxName'] : (isset($_GET['checkBoxName']) ? $_GET['checkBoxName'] : ''));
if ($checkBoxName != '') {
    //do stuff here
} 
```

通过这种方式，如果不使用 Google Chrome 开发者工具之类的工具，您将无法查看帖子信息，因此最好按此顺序进行操作，以便在您可以看到之前检查未看到的内容。

希望这会有所帮助=)

编辑：

根据您给我的信息，我能够想出一种方法来仅插入您检查的类。随意进行更改，但这应该可以

```
<?php
$departList =   ($_POST['university_department'] ? $_POST['university_department'] : ($_GET['university_department'] ? $_GET['university_department'] : array()));
$classList =    ($_POST['class_name'] ? $_POST['class_name'] : ($_GET['class_name'] ? $_GET['class_name'] : array()));
$profList = ($_POST['professor_name'] ? $_POST['professor_name'] : ($_GET['professor_name'] ? $_GET['professor_name'] : array()));
if (count($departList) > 0) {
    foreach ($departList as $key => $val) {
        $class =    $classList[$val];
        $professor =    $profList[$val];
        $query_uni = ("INSERT INTO temp_list(departmentName, class_name, professor_name) VALUE ('$val','$class', '$professor')");
        $q_u = mysqli_query($db, $query_uni) or die ('Error posting data');
    }
}

?> 
```

祝你好运=）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:50:35.930

您可以使用 isset 函数来检查复选框是否被选中。

```
if (isset($_REQUEST['checkBoxName']));
   {

    $variable = $_REQUEST['checkBoxName'];
    } 
```

使用此方法，您只会得到具有值的复选框。

希望这可以帮助

# c# - 我能负担得起在类库项目中添加win forms资源文件吗

> ID：15435200
> 
> 赞同：1
> 
> 时间：2013-03-15T14:40:15.710
> 
> 标签：c#, winforms, resources

我有一个相当大的项目，并且在文件夹中以类的形式有很多逻辑。

现在我需要创建一个包含这些类的单独项目。

所有这些类都引用语言的资源文件..

喜欢

```
Localization.MyStringVariable 
```

在单独的项目中也复制资源文件使其构建但在运行时引发错误。

**错误是没有为中性文化加载资源文件...**

非常感谢任何帮助。

确切的错误：

{“找不到任何适合指定区域性或中性区域性的资源。确保“Project.Localization.resources”在编译时正确嵌入或链接到程序集“ProjectDAL”，或者所有附属程序集required 是可加载且完全签名的。"}

# plsql - Oracle plsql 过程未覆盖

> ID：15435201
> 
> 赞同：0
> 
> 时间：2013-03-15T14:40:17.210
> 
> 标签：plsql

我是 pl/sql 的新手。我创建了一个名为 PROC1 的过程，如果另一个人创建具有相同名称的过程并且我的过程将被覆盖。是否有任何解决方案不使用同名覆盖我的过程 proc1 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:57:40.090

如果该人创建程序并起诉“创建程序...”，那么他们当然会收到警告，而“创建或替换程序...”不会引发错误。所以是的，

独立过程与表、视图、序列、私有同义词、独立过程、独立存储函数、包、物化视图和用户定义类型共享一个命名空间，因此具有相同名称的预先存在的对象这些类型将阻止创建函数。

但这通常不是问题，并且不需要人们在对象名称前加上 TAB 或 FNC 或任何东西，因为这些对象的结构良好的名称通常指向它的对象类型——例如。USERS（复数名词 -> 表），CREATE_INVOICE（ACTION + NOUN -> 过程），ACTIVE_USERS（形容词 + 名词 -> 视图）

但是，您可能有多个名称相同但规格不同的过程，如果它们被定义在一个包中，它们可以愉快地共存。所有过程都作为包的一部分存在，而不是独立存在，有很强的论据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:32:38.870

注意事项：

1.  如果`PROC1`您的架构中存在名为的过程，则不能`PROC1`在您的架构中命名其他过程/函数。不过，可以创建一个具有相同名称的包，并在其中创建具有 name 的函数/过程`PROC1`。

2.  如果`PROC1`在其他用户的模式中命名了公共同义词，并且您指定`PROC1`,`CALL PROC1`等，则将调用您自己的过程而不是另一个。如果他们调用`PROC1`，他们将访问自己的对象，而不是您的过程。

3.  对该过程的调用不会改变它。必须`CREATE OR REPLACE PROCEDURE proc1`在您的架构中使用以将其替换为他们的版本。

# java - 为时间关键的 Web 应用程序结合 java spring/thread 和数据库访问

> ID：15435207
> 
> 赞同：4
> 
> 时间：2013-03-15T14:40:38.657
> 
> 标签：java, multithreading, spring

我正在开发一个 MVC spring web 应用程序，我想将用户的操作（他们点击的内容等）存储在数据库中以进行离线分析。假设一个动作是一个元组（长 userId、长 actionId、日期时间戳）。我对用户的行为并不特别感兴趣，但我以此为例。

我期望很多（不同的）用户按分钟（秒）执行很多操作。因此，处理时间至关重要。

在我当前的实现中，我定义了一个带有连接池的数据源来将操作存储在数据库中。我从控制器的请求方法调用服务，该服务调用将操作保存到数据库中的 DAO。

这种实现效率不高，因为它等待来自控制器的调用一直到数据库完成以将响应返回给用户。因此，我正在考虑将这种“动作保存”包装到一个线程中，以便对用户的响应更快。线程不需要完成即可获得响应。

我在这些大规模、并发和时间关键的应用程序方面没有经验。因此，任何反馈/评论都会非常有帮助。

现在我的问题是：

*   你会如何设计这样的系统？你会实现一个服务，然后将它包装到一个在每个动作中调用的线程中吗？

*   我应该使用什么？我检查了 spring Batch 和这个 JobLauncher，但我不确定它是否适合我。

*   当控制器、服务、DAO 和数据源级别存在并发访问时会发生什么？

更一般地说，设计此类应用程序的最佳实践是什么？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:08:17.643

通常，在 Java EE 应用程序中生成自己的线程被认为是不好的形式。

更好的方法是通过 JMS 写入本地队列，然后有一个单独的组件，例如，一个消息驱动的 bean（使用 EJB 或 Spring 很容易）将其持久化到数据库中。

另一种方法是只写入日志文件，然后让进程读取日志文件并每天或随时写入数据库一次。

要考虑的事情是： -

*   您需要多长时间的最新信息？
*   信息有多重要，你会丢失一些吗？
*   订单需要有多可靠？

所有这些都将影响您处理队列/日志文件的线程数、是否需要持久 JMS 队列以及是否应该在主容器的远程系统上进行处理。

希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T15:21:50.197

如果您对用户执行的操作感兴趣，您应该能够从他们发送的 HTTP 请求中弄清楚这一点，因此您最好将传入请求记录在转发到您的应用程序服务器的 Apache 网络服务器中。将一组 Web 服务器放在应用程序服务器前面是一种典型的做法（它们很适合提供静态内容），而且它们通常都会记录请求。这样，日志记录将很快，您的应用程序将不必处理它，最大的工作将是编写一个脚本来将日志记录到可以进行分析的数据库中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T15:31:06.660

这是我为此所做的：

使用 aspectJ 标记我要收集的用户的所有操作。然后我使用异步 dbAppender 将其发送到 log4j ...

这使您可以使用 log4j 日志记录级别打开或关闭它。

完美运行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-24T03:37:43.963

Take a singleton object @ apps level and update it with every user action. This singleton object should have a Hashmap as generic, which should get refreshed periodically say after it reached a threshhold level of 10000 counts and save it to DB, as a spring batch.

Also, periodically, refresh it / clean it upto the last no.# of the records everytime it processed. We can also do a re-initialization of the singleton instance , weekly/ monthly. Remember, this might lead to an issue of updating the same in case, your apps is deployed into multiple JVM. So, you need to implement the clone not supported exception in singleton.

# java - Android替换片段不隐藏底层片段

> ID：15435210
> 
> 赞同：2
> 
> 时间：2013-03-15T14:40:47.517
> 
> 标签：java, android, fragment

我有以下问题：

我的应用程序由几个动态添加的片段组成。有一个带有按钮和文本编辑器的片段（称为“fragA”）。

如果我单击按钮，我想显示一个带有一些文本的不同片段（称为'fragB'）。我使用以下代码（在 fragA 类中）执行此操作：

```
btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
            Fragment howFragment = new HowFragment();

            FragmentTransaction transaction = null;
            transaction = getFragmentManager().beginTransaction();
            transaction.replace(R.id.flQuestion, howFragment);
            transaction.addToBackStack(null);
            transaction.commit();

            }
        }); 
```

现在问题是这样的：

当我按下 fragA 上的按钮时，会创建片段（fragB）并显示在屏幕上，但是当我按下按钮在 fragA 上的位置时，它会生成一个新片段（fragB）。此外，如果我推动 fragA 上的 textedit 所在的位置，它会在 fragB 上打开一个键盘。

看起来 FragB 只是覆盖 fragA 而没有替换它。

我还想实现这一点，当我滑动到下一个片段时，fragB 被删除并且 fragA 正常显示（未按下按钮时的状态）

# 更新 ＃

尝试添加和删除时，这是以下 logcat 输出：

```
FATAL EXCEPTION: main
java.lang.IllegalArgumentException: No view found for id 0x7f090015      (com.example.eindwerkappv1:id/flQuestion) for fragment HowFragment{419c93c8 #3   id=0x7f090015}
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:903)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)  
at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
at   android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429) 
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4441)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:59:00.673

我猜你的`fragA`片段是在你的 XML 布局中定义的？

根据[文档](http://developer.android.com/guide/components/fragments.html#Adding)`<fragment>`，这是使用标签时发生的情况：

> 系统将片段返回的视图直接插入到元素的位置。

这就是为什么您不能删除前一个片段，因为它不存在。如果要从代码中更改片段，则还必须从代码中添加第一个片段。

您需要使用像 a`FrameLayout`这样的容器，并`onCreate()`使用[`FragmentTransaction.add()`](http://developer.android.com/reference/android/app/FragmentTransaction.html#add%28int,%20android.app.Fragment,%20java.lang.String%29).

然后`FragmentTransaction.replace()`方法应该起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:43:44.537

那么你为什么不直接调用`.remove()`Fragment`EditText`和`.add()`new`TextView` `Framgent`而不是 osing`.replace()`

做这样的事情：

```
fragmentTransaction = fragmentManager.beginTransaction();
fragmentTransaction.remove(addCommentFragment)
.add(R.id.containerForFragments, commentFragment, "comment"+ 
String.valueOf(numOfComments)).commit(); 
```

这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:54:04.973

我现在找到了解决方案。

我仍然使用 replace 方法，但我必须在新片段中捕获 ontouch 事件：

[另一个片段问题的片段](https://stackoverflow.com/questions/10389620/fragment-over-another-fragment-issue)

答案见上一个链接

# youtube - youtube 视频播放器播放列表的最长播放时间

> ID：15435211
> 
> 赞同：0
> 
> 时间：2013-03-15T14:40:50.383
> 
> 标签：youtube, timeout, youtube-api, youtube-javascript-api

如果 Youtube 在其 javascript/flash 播放器中实现超时（最大播放）功能，我无法找到任何文档。有没有人遇到过这个？

我的团队遇到了一个问题，我们有一个播放列表在一夜之间在电视上运行。我们发现视频在随机时间保持冻结（停止播放）。

根据我们的网络团队，我们没有任何中断、问题等；

根据我错过的一些文档，这是可能的超时/最大播放列表时间问题吗？

我们目前调用`<iframe>`播放列表并让它运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:48:32.593

I am not aware of any intentional policies that would stop playback after a certain amount of time had passed. My suggestion would be to look into the HTTP requests being generated by the player (fairly easy to do if you're running a standard web browser on a PC that's hooked up to your TV) and see whether the failure occurs when an HTTP request is made that doesn't receive a response (for some reason).

Additionally, add some logging in to your application that detects the `onError` and `onStateChange` events and try to correlate specific events with playback stopping.

Regardless of the root cause, it's possible that you could work around this by detecting PAUSED/ENDED events in the player and using the Player API to explicitly start playback.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-20T16:21:37.490

我在做这样的事情（对于亚马逊电视），但只有一个视频。检测到错误时我会重新加载。此错误为 0 是异常错误（您可以在此[页面](https://developers.google.com/youtube/iframe_api_reference?hl=es#Events)中查看事件）。我还有一个问题，也许你可以帮助我。我看到黑色的视频，我没有看到解决方案。

```
function startVideo(player,src){
         player = new YT.Player(player, {
         height: '100%',
         width: '100%',
         videoId: src,

         playerVars: {
                controls: 0,
                showinfo: 0 ,
                modestbranding: 1,
                wmode: "opaque",
                loop: true,
               },
               events: {
                 'onReady': onPlayerReady,
                 'onStateChange': onPlayerStateChange,
                 'onError': onPlayerError,
              }
          });
}
function onPlayerError(event){
            var D = new Date();
            var d = millisToTime(D.getTime());
            $("#m").html($("#m").html()+"</br></br> <b>-Error: "+event.data+"</b> -"+d);

            var url = window.location.href;    
            if (url.indexOf('?') > -1){
                   url += '&p=1'
               }else{
                   url += '?p=1'
               }
               window.location.href = url;
            } 
```

# laravel - Laravel 3 HTTP 和 HTTPS 路由

> ID：15435212
> 
> 赞同：2
> 
> 时间：2013-03-15T14:40:52.043
> 
> 标签：laravel, laravel-3

我有以下代码：

```
Route::get('/',   function()
{
    return 'non secure page';
});
Route::get('/',  array('https' => true, function()
{
    return 'secure page';
})); 
```

我预计会发生的是，这两条路线将被区别对待。第一个用于[http://example.com](http://example.com)请求，第二个用于[https://example.com](https://example.com)。这些页面应分别显示文本“非安全页面”和“安全页面”。实际发生的是两者都显示文本“安全页面”。这必须意味着两条路由被视为相同，即请求是通过 https 还是 http 无关紧要 - 触发相同的路由。

我知道我可以通过使用来解决我的问题，`if (Request::secure()){ //routes };`但这让我想到 laravel 中的 HTTPS 安全路由有什么用？它们能达到什么目的，什么时候应该使用它们？

我查看了文档，但我不清楚应该发生什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T12:20:52.573

文档说：

> 定义路由时，您可以使用“https”属性来指示在生成 URL 或重定向到该路由时应使用 HTTPS 协议。

“https”并且`::secure()`仅在生成路由的 URL 时使用，它们不用于提供仅限 https 的路由。您可以编写一个过滤器来防止非 HTTPS 路由（下面的示例）。或者，如果您想阻止对整个域的任何非 HTTPS 访问，那么您应该重新配置您的服务器，而不是在 PHP 中这样做。

```
Route::filter('https', function() {
    if (!Request::secure()) return Response::error(404);
}); 
```

替代过滤器响应：

```
Route::filter('https', function() {
    if (!Request::secure()) return Redirect::to_secure(URI::current());
}); 
```

参考：

1.  [http://laravel.com/docs/routing#https-routes](http://laravel.com/docs/routing#https-routes)
2.  [http://laravel.com/docs/routing#filters](http://laravel.com/docs/routing#filters)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T15:00:41.243

该问题与 HTTPS 无关。

文件说，

> 注意：路由是按照它们注册的顺序进行评估的，所以在你的 routes.php 文件的底部注册任何“catch-all”路由。

这意味着你的

```
Route::get('/',  array('https' => true, function()
{
    return 'secure page';
})); 
```

正在覆盖

```
Route::get('/',   function()
{
    return 'non secure page';
}); 
```

我实际上是由来自 laravel.io 的 Spark 领导的，我想无论如何我都会澄清这个疑问。

问候

# php - 使用 JSON/PHP 从 android 接收错误响应

> ID：15435219
> 
> 赞同：0
> 
> 时间：2013-03-15T14:41:16.910
> 
> 标签：php, android, json, phpmyadmin, jsonresult

我正在编写我的 android 应用程序，该应用程序与本地服务器中的 PHP 论坛共享数据库表。我的应用程序用户需要先注册才能开始使用该应用程序，并且我的应用程序中的功能之一是允许这些注册用户向论坛发送/查看帖子和评论，所有这些都是从 Android 应用程序界面完成的，而不是通过将整个论坛呼叫到我的手机中，但我在此任务中使用了 JSON 并有不同的响应。不幸的是，每次我注册时都会收到错误响应，但我不知道为什么

这是我得到的错误响应

```
03-14 16:14:52.361: E/JSON(400): {"tag":"register","success":0,"error":1,"error_msg":"Error occured in Registartion"} 
```

这是我的 index.php

```
<?php

   /**
 * File to handle all API requests
 * Accepts GET and POST
*
* Each request will be identified by TAG
 * Response will be JSON data

/**
* check for POST request
 */
if (isset($_POST['tag']) && $_POST['tag'] != '') {
// get tag
$tag = $_POST['tag'];

// include db handler
require_once 'include/DB_Functions.php';
$db = new DB_Functions();

// response Array
$response = array("tag" => $tag, "success" => 0, "error" => 0);

// check for tag type
if ($tag == 'login') {
    // Request type is check Login
    $email = $_POST['email'];
    $password = $_POST['password'];

    // check for user
    $user = $db->getUserByEmailAndPassword($email, $password);
    if ($user != false) {
        // user found
        // echo json with success = 1
        $response["success"] = 1;
        $response["id"] = $user["unique_id"];
        $response["user"]["name"] = $user["username"];
        $response["user"]["email"] = $user["email"];
        $response["user"]["created_at"] = $user["created_at"];
        $response["user"]["updated_at"] = $user["updated_at"];
        echo json_encode($response);
    } else {
        // user not found
        // echo json with error = 1
        $response["error"] = 1;
        $response["error_msg"] = "Incorrect email or password!";
        echo json_encode($response);
    }
} else if ($tag == 'register') {
    // Request type is Register new user
    $name = $_POST['username'];
    $email = $_POST['email'];
    $password = $_POST['password'];

    // check if user is already existed
    if ($db->isUserExisted($email)) {
        // user is already existed - error response
        $response["error"] = 2;
        $response["error_msg"] = "User already existed";
        echo json_encode($response);
    } else {
        // store user
        $user = $db->storeUser($name,  $password, $email);
        if ($user) {
            // user stored successfully
            $response["success"] = 1;
            $response["id"] = $user["unique_id"];
            $response["user"]["name"] = $user["username"];
            $response["user"]["email"] = $user["email"];
            $response["user"]["created_at"] = $user["created_at"];
            $response["user"]["updated_at"] = $user["updated_at"];
            echo json_encode($response);
        } else {
            // user failed to store
            $response["error"] = 1;
            $response["error_msg"] = "Error occured in Registartion";
            echo json_encode($response);
        }
    }
} else {
    echo "Invalid Request";
}
  } else {
echo "Access Denied";
  }
  ?> 
```

这是我的 STOREUSERFUNCTION

```
 public function storeUser($name, $password, $email) {
    $uuid = uniqid('', true);
    $hash = $this->hashSSHA($password);
    $encrypted_password = $hash["encrypted"]; // encrypted password
    $salt = $hash["salt"]; // salt
    $result = mysql_query("INSERT INTO user(unique_id, username, password, salt, email,  created_at) VALUES('$uuid', '$name',  '$encrypted_password', '$salt', '$email',  NOW())");
    // check for successful store
    if ($result) {
        // get user details
        $id = mysql_insert_id(); // last inserted id
        $result = mysql_query("SELECT * FROM user WHERE id = $id");
        // return user details
        return mysql_fetch_array($result);
    } else {
        return false;
    }
} 
```

我真的不知道这里出了什么问题，因为之前我可以很好地运行它但是现在我修改了这段代码以将详细信息存储在论坛的用户表中，这样我就可以处理一个用户数据表我对新的感觉很舒服这里的代码 - 我的意思是我猜这不是错误响应的原因 - 但我怀疑表格，但无论如何我不确定触发错误响应的错误在哪里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:43:40.963

好的，伙计们现在我修好了，没问题，这是我的android端发出登录请求的函数，它的参数设置的顺序与我的php文件中函数的顺序不匹配。非常感谢伙计，特别感谢 karmafunk，你帮了我很多，祝你一切顺利

希望我的问题能帮助其他人解决同样的问题。

# java - Eclipse：类路径引用的存档不存在

> ID：15435221
> 
> 赞同：32
> 
> 时间：2013-03-15T14:41:18.927
> 
> 标签：java, eclipse, maven, pom.xml

我的 Eclipse 是 Indigo Java 经典。

我有一个 java 项目，它有 mockito-all 作为依赖项。pom.xml：

```
<dependency>
    <groupId>org.mockito</groupId>
    <artifactId>mockito-all</artifactId>
    <version>1.8.5</version>
    <scope>test</scope>
</dependency> 
```

运行`mvn clean install`，一切正常。然后我确实`mvn eclipse:eclipse`解决了 Eclipse 中的所有依赖项。

当我尝试在 Eclipse 中运行 Junit 时，它没有运行并给我这个错误：

```
'Launching YourTest' has encountered a problem.

The archive: /home/shengjie/.m2/repository/org/mockito/mockito-all/1.9.5.jar which is referenced by the classpath, does not exist. 
```

我的项目 pom.xml 声称它依赖于 mockito-all 1.8.5，我不确定 1.9.5 引用来自哪里。有任何想法吗？

==编辑==

```
$ mvn dependency:tree | grep mockito
[INFO] +- org.mockito:mockito-all:jar:1.8.5:test
[INFO] \- org.powermock:powermock-api-mockito:jar:1.4.12:test
[INFO] \- org.powermock:powermock-api-mockito:jar:1.4.12:test
[INFO]    +- org.mockito:mockito-all:jar:1.8.5:test (version managed from 1.9.0)
[INFO] |  +- org.mockito:mockito-all:jar:1.8.5:test (version managed from 1.9.5; scope managed from compile)
[INFO] |  +- org.mockito:mockito-all:jar:1.8.5:test (version managed from 1.9.5; scope managed from compile)
[INFO] \- org.powermock:powermock-api-mockito:jar:1.4.12:test
[INFO] +- org.mockito:mockito-all:jar:1.8.5:test
[INFO] +- org.powermock:powermock-api-mockito:jar:1.4.12:test
[INFO] |  +- org.mockito:mockito-all:jar:1.8.5:test (version managed from 1.9.5; scope managed from compile) 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-10-08T12:39:02.937

I had a similar problem while I was trying to start my tomcat. I would suggest that you check "Classpath" the following way:

1) Run Configurations

*   Right click on your project
    *   then click "Run" -> "Run Configurations..."
    *   there check your settings for you project (e. g. in my case it was the Apache Tomcat)
    *   here look into you tab "Classpath" under "User Entries"

2) Project classpath

*   Right click on your project -> "Properties" -> "Java Build Path"
    *   now check the "Source" Tab as well as your "Libraries" Tab
    *   Problems should be marked red in the "Libraries" tab

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-21T16:04:20.687

在我使用 ANT 的情况下，我更改了 Windows --> Preferences --> Ant --> Runtime --> Global Entries 中的设置。您需要将 tools.jar 添加为外部 Jar。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-10T07:23:22.050

转到窗口 > 显示视图 > 导航器

在那里您将看到与您的**M2 Repo**`.classpath`相关的依赖项的文件

 **一个例子是 -

```
<classpathentry 
 exported="true" 
 kind="var" 
 path="M2_REPO/javax/activation/activation/1.1.1-redhat-2/activation-1.1.1-redhat-2.jar"/> 
```

将版本更改为以下版本

> Project Explorer > Your Project > Libraraies > Maven 依赖项

[![在此处输入图像描述](../Images/b312bab76b1cbef7deb66dac446d9959.png)](https://i.stack.imgur.com/D8wNG.png)

希望这将解决问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-09T10:52:48.760

就我而言，我安装了 JRE，然后添加了 JDK。即使我将项目更改为使用 JDK，ANT 似乎仍坚持使用 JRE。

要解决这个问题，我必须这样做： 1\. 选择“Run As...” 2\. 选择第二个“Ant build...”选项 3\. 这会打开一个面板以允许设置配置。选择“JRE”选项卡并将选定的 JRE 更改为 JDK

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-03T09:06:05.007

如果以前的任何答案都不起作用，请尝试以下操作：右键单击您的项目 -> 调试为 -> 打开调试对话框 ... -> 在类路径中，您会找到导致您遇到问题的 jar。去掉它。

希望这对你有用，因为它对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-29T14:46:17.973

我重现了这个问题

[![在此处输入图像描述](../Images/af2bf0df6c04062f3437ed0a6dab55f2.png)](https://i.stack.imgur.com/SseWg.png)

**解析度 ：-**

如错误“归档：类路径引用的/AutomationPrj/src/test/resources/**资源****不存在**”中所述。

在我的项目中 /AutomationPrj/src/test/resources**/resources** 确实不存在。我在适当的位置创建了资源文件夹 [empty] 并解决了问题。

[![在此处输入图像描述](../Images/de8e685b686621ccec6683de36db45d1.png)](https://i.stack.imgur.com/piVMc.png)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-02-21T12:10:56.613

可能是java和eclipse的版本问题。

我从开普勒升级到火星，我使用的是 JAVA 1.7。我在使用 tools.jar 时遇到了同样的问题。

我降级了eclipse，这次构建成功运行。它可能会帮助你。**

# django - 模型中的返回选择

> ID：15435227
> 
> 赞同：0
> 
> 时间：2013-03-15T14:41:25.740
> 
> 标签：django

我有一个模型：

```
class Detail(models.Model):
    types_choices = (
        (1, 'Sport'),
        (2, 'Turbo'),
        (3, 'Turbo++'),
    )   
    car = models.ForeignKey(Car)
    d_type = models.PositiveIntegerField(choices=types_choices, max_length=1)
    def __unicode__(self):
        return u"%s, %s" % (self.car.name, types_choices[self.d_type][1]) 
```

在管理界面中出现错误：`global name 'types_choices' is not defined`. 我认为这是关于我的回归。如何解决？我需要在管理界面的一个字符串中包含汽车名称和“运动”（或涡轮增压等）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:46:31.063

你忘记了自己。

```
class Detail(models.Model):
    types_choices = (
        (1, 'Sport'),
        (2, 'Turbo'),
        (3, 'Turbo++'),
    )   
    car = models.ForeignKey(Car)
    d_type = models.PositiveIntegerField(choices=types_choices, max_length=1)
    def __unicode__(self):
        return u"%s, %s" % (self.car.name, self.types_choices[self.d_type][1]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T14:46:56.470

你应该使用`self.get_d_type_display()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:47:23.533

你应该使用`self.types_choices`. 这是因为`types_choices`是您 `Detail`班级的一个属性。

Django 文档对如何使用选项有一个很好的模式：[https ://docs.djangoproject.com/en/dev/ref/models/fields/#choices](https://docs.djangoproject.com/en/dev/ref/models/fields/#choices)

您还可以使用`self.get_d_type_display()`获取选择字段的详细名称。

# jsf - 如何为 HTTPS 会话设置默认的非安全 cookie

> ID：15435231
> 
> 赞同：2
> 
> 时间：2013-03-15T14:41:41.557
> 
> 标签：jsf, cookies, jsf-2, https, glassfish

在我的应用程序中，用户访问的`Login.xhtml`第一个页面可以是安全 HTTPS 页面。因此，当我在 Chrome 上检查 cookie 时，它​​最初是为`Secure connections only`. 因此，在用户成功登录后，我无法使用该 cookie 将他重定向到任何非安全页面。

如果您能告诉我如何使我的 cookie 成为不安全的，即使是在第一次 HTTPS 请求中，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:51:12.073

在您的 sun-web.xml 中，使用 cookieSecure 属性更改 cookie 属性

```
<?xml version="1.0" encoding="UTF-8"?>
<sun-web-app>
<session-config>
  <cookie-properties>
    <b><property name="cookieSecure" value="false"/></b>
  </cookie-properties>
</session-config> 
```

以下是您可以设置的每个值的说明：

**true**：容器代表 Web 应用程序创建的任何 JSESSIONID cookie 都将被标记为安全的。

**false**：容器代表 Web 应用程序创建的任何 JSESSIONID cookie 都将被标记为不安全。

**动态**：由容器代表 Web 应用程序创建的 JSESSIONID cookie 将从发起相应会话的请求继承其安全设置：如果会话由 HTTPS 请求发起，则其 JSESSIONID cookie 将被标记为安全，并且将否则保持不安全。这是默认设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-24T12:51:26.877

`requireSSL="False"`在服务中设置属性`web.config`。

```
httpCookies httpOnlyCookies="true" requireSSL="false" lockItem="true" 
```

# linux - 我在哪里可以获得 x86 的 32 位 Linux 内核源代码

> ID：15435233
> 
> 赞同：1
> 
> 时间：2013-03-15T14:41:42.553
> 
> 标签：linux, linux-kernel

我是 Linux 内核的新手，想要为 x86 arcthitecture 提供 32 位 Linux 内核源代码，但是当我从 kernel.org 下载它时，它给了我 x86_64 的源代码，这不是我需要的。我特别在寻找 3.4.28 版本。

或者我必须仅使用 x86_64 源构建 32 位 x86 Linux。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T14:46:42.503

没有特定的 32 位 linux 内核源代码。所有架构都包含在同一个 tarball / git 存储库中。

大部分 linux 内核都是用可移植的 C 语言实现的，可用于所有架构。体系结构特定部分位于目录下方的单独子目录中`arch`。另请参阅[https://github.com/torvalds/linux/tree/master/arch](https://github.com/torvalds/linux/tree/master/arch)。

在`x86_64`机器上配置和编译时，默认会得到一个`x86_64`内核。如果要`x86`在同一台机器上构建 32 位内核，则需要进行[交叉编译](http://tinkering-is-fun.blogspot.co.uk/2009/12/compiling-linux-kernel-for-x86-on-x8664.html)，例如：

```
# make ARCH=i386 menuconfig 
```

将为您提供必要的选项来选择基于 x86 的处理器类型。

```
# make ARCH=i386 
```

然后将构建基于 x86 的内核映像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:44:37.543

这是你要找的东西吗 [http://stacklet.com/downloads/kernels/xen/xenU-2.6.31](http://stacklet.com/downloads/kernels/xen/xenU-2.6.31)

或试试这个 [http://rpmfind.net//linux/RPM/opensuse/updates/12.2/noarch/kernel-source-3.4.28-2.20.1.noarch.html](http://rpmfind.net//linux/RPM/opensuse/updates/12.2/noarch/kernel-source-3.4.28-2.20.1.noarch.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T14:47:51.580

如果您在[https://www.kernel.org/pub/linux/kernel/v3.x/linux-3.4.28.tar.gz](https://www.kernel.org/pub/linux/kernel/v3.x/linux-3.4.28.tar.gz)下载内核源代码，您可以为 x86 编译这些源代码以生成 32 位二进制文​​件。您可以使用相同的内核源代码为不同的架构（x86、x86_64、PPC 等）生成二进制文件。请参阅[https://www.kernel.org/doc/index-old.html#Cross_compiling_vs_native_compiling](https://www.kernel.org/doc/index-old.html#Cross_compiling_vs_native_compiling)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T14:48:13.203

请参阅[内核源代码](https://www.kernel.org/)。另外，看看[阅读 Linux 内核源代码](http://en.wikiversity.org/wiki/Reading_the_Linux_Kernel_Sources)。

# sql - 如何将聚合值添加到 SELECT？

> ID：15435239
> 
> 赞同：2
> 
> 时间：2013-03-15T14:42:03.067
> 
> 标签：sql, oracle10g

我从多个表中选择数据，我还需要在这些表上获得最大的“时间戳”。我将需要它来创建自定义缓存控件。

```
tbl_name     tbl_surname
id | name    id | surname
---------    ------------
 0 | John     0 | Doe
 1 | Jane     1 | Tully
  ...          ... 
```

我有以下查询：

```
SELECT name, surname FROM tbl_name, tbl_surname WHERE tbl_name.id = tbl_surname.id 
```

我需要将以下信息添加到结果集中：

```
SELECT MAX(ora_rowscn) FROM (SELECT ora_rowscn FROM tbl_name
UNION ALL
SELECT ora_rowscn FROM tbl_surname); 
```

我试图使用 UNION 但我得到错误 - 混合组而不是单组数据 - 或类似的东西，我知道为什么我不能使用联合。

我不想将其拆分为 2 个调用，因为我需要从数据库获取的当前快照的时间戳来进行缓存管理。在 select 和对 MAX 的调用之间，数据库可能会发生变化。

这是我想要的结果：

```
John | Doe   | 123456
Jane | Tully | 123456 
```

其中 123456 是表 tbl_name 和 tbl_surname 上次更改（插入、更新、删除）的大致时间。

我对 DB 具有只读访问权限，因此无法创建触发器、存储过程、额外表等...

感谢您的任何建议。

编辑：值 *ora_rowscn* 是按行块分配的。因此，在一个表中，该值每行可能不同。我需要查询中涉及的两个（所有）表的最大值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:39:02.123

尝试：

```
SELECT name, 
       surname, 
       max(greatest(tbl_name.ora_rowscn, tbl_surname.ora_rowscn)) over () as max_rowscn
FROM tbl_name, tbl_surname 
WHERE tbl_name.id = tbl_surname.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T14:55:53.390

此处无需聚合 - 只需在查询中包含两个 ora_rowscn 值并取最大值：

```
SELECT 
  n.name, 
  n.ora_rowscn as n_ora_rowscn,
  s.surname,
  s.ora_rowscn as s_ora_rowscn,
  greatest(n.ora_rowscn, s.ora_rowscn) as last_ora_rowscn
FROM tbl_name n
join tbl_surname s on n.id = s.id 
```

顺便说一句，我已经用 ANSI 样式替换了您的旧式连接 - 更好的可读性，恕我直言。

# sql - 使用 top 属性查询更快

> ID：15435240
> 
> 赞同：5
> 
> 时间：2013-03-15T14:42:08.990
> 
> 标签：sql, sql-server, sql-server-2008-r2, query-hints

为什么此查询在 SQL Server 2008 R2（版本 10.50.2806.0）中更快

```
 SELECT
        MAX(AtDate1),
        MIN(AtDate2)
    FROM
    (
        SELECT TOP 1000000000000
            at.Date1 AS AtDate1,
            at.Date2 AS AtDate2
        FROM
            dbo.tab1 a
        INNER JOIN
            dbo.tab2 at
        ON
            a.id = at.RootId
        AND CAST(GETDATE() AS DATE) BETWEEN at.Date1 AND at.Date2
        WHERE
            a.Number = 223889
    )B 
```

然后

```
 SELECT
        MAX(AtDate1),
        MIN(AtDate2)
    FROM
    (
        SELECT 
            at.Date1 AS AtDate1,
            at.Date2 AS AtDate2
        FROM
            dbo.tab1 a
        INNER JOIN
            dbo.tab2 at
        ON
            a.id = at.RootId
        AND CAST(GETDATE() AS DATE) BETWEEN at.Date1 AND at.Date2
        WHERE
            a.Number = 223889
    )B 
```

?

具有该`TOP`属性的第二条语句快六倍。

内部`count(*)`子查询的 9280 行。

我可以使用提示声明 SQL Server 优化器使其正确吗？ ![执行计划](../Images/d1226ee872412856eccef2b4e62b6953.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T19:16:37.903

我看到你现在已经发布[了计划](http://www.dateiupload.net/download.php?file=0875b65fb14d01c90b48c5fd146a36e3)。只是抽奖的运气。

您的实际查询是 16 表连接。

```
SELECT max(atDate1)  AS AtDate1,
       min(atDate2)  AS AtDate2,
       max(vtDate1)  AS vtDate1,
       min(vtDate2)  AS vtDate2,
       max(bgtDate1) AS bgtDate1,
       min(bgtDate2) AS bgtDate2,
       max(lftDate1) AS lftDate1,
       min(lftDate2) AS lftDate2,
       max(lgtDate1) AS lgtDate1,
       min(lgtDate2) AS lgtDate2,
       max(bltDate1) AS bltDate1,
       min(bltDate2) AS bltDate2
FROM   (SELECT TOP 100000 at.Date1  AS atDate1,
                          at.Date2  AS atDate2,
                          vt.Date1  AS vtDate1,
                          vt.Date2  AS vtDate2,
                          bgt.Date1 AS bgtDate1,
                          bgt.Date2 AS bgtDate2,
                          lft.Date1 AS lftDate1,
                          lft.Date2 AS lftDate2,
                          lgt.Date1 AS lgtDate1,
                          lgt.Date2 AS lgtDate2,
                          blt.Date1 AS bltDate1,
                          blt.Date2 AS bltDate2
        FROM   dbo.Tab1 a
               INNER JOIN dbo.Tab2 at
                 ON a.id = at.Tab1Id
                    AND cast(Getdate() AS DATE) BETWEEN at.Date1 AND at.Date2
               INNER JOIN dbo.Tab5 v
                 ON v.Tab1Id = a.Id
               INNER JOIN dbo.Tab16 g
                 ON g.Tab5Id = v.Id
               INNER JOIN dbo.Tab3 vt
                 ON v.id = vt.Tab5Id
                    AND cast(Getdate() AS DATE) BETWEEN vt.Date1 AND vt.Date2
               LEFT OUTER JOIN dbo.Tab4 vk
                 ON v.id = vk.Tab5Id
               LEFT OUTER JOIN dbo.VerkaufsTab3 vkt
                 ON vk.id = vkt.Tab4Id
               LEFT OUTER JOIN dbo.Plu p
                 ON p.Tab4Id = vk.Id
               LEFT OUTER JOIN dbo.Tab15 bg
                 ON bg.Tab5Id = v.Id
               LEFT OUTER JOIN dbo.Tab7 bgt
                 ON bgt.Tab15Id = bg.Id
                    AND cast(Getdate() AS DATE) BETWEEN bgt.Date1 AND bgt.Date2
               LEFT OUTER JOIN dbo.Tab11 b
                 ON b.Tab15Id = bg.Id
               LEFT OUTER JOIN dbo.Tab14 lf
                 ON lf.Id = b.Id
               LEFT OUTER JOIN dbo.Tab8 lft
                 ON lft.Tab14Id = lf.Id
                    AND cast(Getdate() AS DATE) BETWEEN lft.Date1 AND lft.Date2
               LEFT OUTER JOIN dbo.Tab13 lg
                 ON lg.Id = b.Id
               LEFT OUTER JOIN dbo.Tab9 lgt
                 ON lgt.Tab13Id = lg.Id
                    AND cast(Getdate() AS DATE) BETWEEN lgt.Date1 AND lgt.Date2
               LEFT OUTER JOIN dbo.Tab10 bl
                 ON bl.Tab11Id = b.Id
               LEFT OUTER JOIN dbo.Tab6 blt
                 ON blt.Tab10Id = bl.Id
                    AND cast(Getdate() AS DATE) BETWEEN blt.Date1 AND blt.Date2
        WHERE  a.Nummer = 223889) B 
```

无论是好计划还是坏计划，执行计划都将“提前终止语句优化的原因”显示为“超时”。

这两个计划的加入顺序略有不同。

计划中唯一不满足索引搜索的连接是 on `Tab9`。这有 63,926 行。

执行计划中缺少的索引详细信息建议您创建以下索引。

```
CREATE NONCLUSTERED INDEX [miising_index]
ON [dbo].[Tab9] ([Date1],[Date2])
INCLUDE ([Tab13Id]) 
```

在 SQL Sentry Plan Explorer 中可以清楚地看到坏计划的问题部分

![糟糕的计划](../Images/5795d0e649f838af95360d0446edc528.png)

SQL Server 估计将返回 1.349174 行，这些行将从之前进入 join on 的连接中返回`Tab9`。因此，嵌套循环连接的成本就好像它需要对内部表执行 1.349174 次扫描一样。

事实上，有 2,600 行输入到该连接中，这意味着它对`Tab9`（2,600 * 63,926 = 164,569,600 行）进行了 2,600 次完整扫描。

碰巧的是，在好的计划中，估计进入连接的行数是 2.74319。这仍然是三个数量级的错误，但略微增加的估计意味着 SQL Server 更倾向于使用哈希连接。哈希连接只做一次通过`Tab9`

![好计划](../Images/51a6374def99b1ae05adb6e53c11e97a.png)

我会首先尝试在`Tab9`.

此外/相反，您可以尝试更新所有相关表的统计信息（尤其是那些带有日期谓词的表`Tab2` `Tab3` `Tab7` `Tab8` `Tab6`），看看这是否有助于纠正计划左侧估计行与实际行之间的巨大差异。

此外，将查询分解成更小的部分并将它们具体化为具有适当索引的临时表可能会有所帮助。SQL Server 然后可以使用这些部分结果的统计信息来为计划中稍后的连接做出更好的决策。

只有作为最后的手段，我才会考虑使用查询提示来尝试强制执行带有哈希连接的计划。您的选择是`USE PLAN`提示，在这种情况下，您可以准确地指定您想要的计划，包括所有连接类型和顺序，或者通过说明`LEFT OUTER HASH JOIN tab9 ...`。第二个选项还具有修复计划中所有连接顺序的副作用。两者都意味着 SQL Server 将受到严重限制的是它根据数据分布的变化调整计划的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:37:28.363

很难回答不知道表的大小和结构，也无法查看整个执行计划。但是这两个计划的区别在于“top n”查询的哈希匹配连接与另一个的嵌套循环连接。Hash Match 是一种资源密集型连接，因为服务器必须准备哈希桶才能使用它。但是对于大表来说它变得更加有效，而嵌套循环将一个表中的每一行与另一个表中的每一行进行比较对于小表来说效果很好，因为不需要这样的准备。我认为，通过在子查询中选择 TOP 1000000000000 行，您可以向优化器提示您的子查询会产生大量数据，因此它使用哈希匹配。但实际上输出很小，所以 Nested Loops 效果更好。

# javascript - 移除的 iframe 注入的 Javascript 函数

> ID：15435241
> 
> 赞同：2
> 
> 时间：2013-03-15T14:42:09.390
> 
> 标签：javascript, iframe

是否可以将在 iframe 中定义的 javascript 函数注入到父窗口中，以便即使在删除 iframe 后也可以使用它？这是我所做的：在 iframe 中我有：

```
var f = function(){console.log("iframe function")}
window["iframeFunction"] = f; 
```

父级可以成功调用该函数，直到 iframe 可用..之后它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:51:25.663

假设这是您的 iframe (ifr.htm)-

```
<html>
<head>
    <script type="text/javascript">
        function func() {
            window.top.window.f = function() {
                alert('iframe hack');
            }
        }
        window.onload = function() {
            alert('iframe loaded');
            func();
        };
    </script>
</head>
<body>
    this is the test iframe.
</body>
</html> 
```

这是你的父窗口-

```
<html>
<head>
    <script type="text/javascript">
        window.onload = function() {
            i = document.getElementById('iframe'); //remove the iframe
            i.parentNode.removeChild(i);
            window.f(); //you can still call f() method     
        };
    </script>
</head>
<body>
    this is the parent window.
            <iframe src="ifr.htm" id="iframe"></iframe>
</body>
</html> 
```

这基本上使用访问父级`top`并向其添加一个函数。因此，即使`iframe`从 DOM 中删除了 ，该函数仍将保留，因为它已添加到父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:55:22.423

[根据浏览器支持](http://caniuse.com/#feat=x-doc-messaging)要求，我会推荐[postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)。优点是：

1.  不需要污染父级的全局命名空间（在所需范围之外发生冲突/可用性的可能性较小）
2.  通知家长新功能的可用性（而不是假设或轮询更改）

**编辑：**即使您希望使用 iframe 指定的标签在父级的全局命名空间中使用该功能，第 2 点仍然适用。

编码：

```
// In your iframe
var f = function(){console.log("iframe function")}
window.top.postMessage({f:f}, '*');

// In the parent
window.addEventListener('message', function capturePassedFunction(e){
    // If you want to keep this in scope
    var f    = e.data.f;
    // You can still chuck it on the `window` object if you want!
    window.f = e.data.f;
}, false); 
```

# pdf - 如何通过 HTTP REST 请求在 Adob e LiveCycle ES3 中将 XDP 转换为 PDF

> ID：15435242
> 
> 赞同：4
> 
> 时间：2013-03-15T14:42:11.870
> 
> 标签：pdf, adobe, livecycle, xdp-pdf

我有：LiveCycle 服务器（ES3、JBOSS）、Workbench、Designer。使用 LC Desginer 我将 PDF 转换为 XDP - 现在是模板。现在我需要将该 XDP 文件转换为 PDF。所以，我想我应该以某种方式通过 HTTP 请求调用 LiveCycle 服务器，在这个请求的正文中，我可以发送 XDP 文档的正文。我从 LC 需要的只是 PDF。

看起来很简单的任务，但我找不到任何信息如何做到这一点。我看到了很多如何在 Java 中执行此操作的示例，但我不需要 Java，我需要通过 HTTP（REST 端点或 SOAP，如果不可能）来执行此操作。

也许我需要在 Workbench 中创建一些“应用程序”？如果是这样，是否有任何分步文档？或者也许有人可以解释我，如何做到这一点。也许 ES3 Server 中已经有内置应用程序 - 我认为这是非常常见和简单的情况。

**UPD：**我已经为这个问题在 Odesk 找到~~了~~工作，我保证在这里发布解决方案以与社区分享知识

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:27:26.837

正如所承诺的，这是解决此问题的方法：

1.  仅仅将 PDF 放入 LiveCycle Designer 是不够的。您完全需要在 LC Designer 中设计表格。您可以将 PDF 用作模板，但对于您希望通过自定义数据完成的所有内容，您需要在 LC Designer 中添加对象（查看“插入”菜单，尝试表格或文本字段）并添加数据“数据视图”选项卡中的连接。我认为这对专业人士来说很容易，但初学者可能需要一些时间。例如，将您的工作结果保存为`Template.xdp`文件。
2.  此外，您现在有了 XML 文件的示例 - 数据源。让我们命名`DataSource.xml`
3.  现在我们可以安装 LiveCycle Server。最适合 LC ES3 的是 RHEL 5.5（我们花了大约 2 天时间才找到操作系统和设置的正确组合）。你需要一个聪明的系统管理员（或者只是在 Adob​​e LiveCycle 方面有经验:)）
4.  服务器现在正在工作，您可以看到 Web 界面，所以让我们在 Adob​​e LiveCycle Workbench ES3 中创建应用程序。添加一个具有新名称的应用程序并向该应用程序添加一个进程。描述过程的所有步骤需要很多词，只需看一下结果的屏幕截图（还要注意变量）： ![步骤1](../Images/c4130964cdd235a1c40d376e22a57655.png) ![第2步](../Images/e98ffc3ab228cb9e735ad81e7ddb5c52.png) ![第 3 步](../Images/18696d8fe02e3b49c00247945900143c.png)

5.  现在最简单的部分 - 通过 HTTP 请求调用这个应用程序。但是我们不能只向 Adob​​e LiveCycle 发送通常的 POST 请求 :) 我们必须将 2 个文件 (`Template.xdp`和`DataSource.xml`) 的内容作为 multipart/form-data 发送，并且这些部分的名称是输入变量的名称（在我的示例中是`xmlTemplate`and `xmlData`） . 并且不要忘记带有基本授权凭据的授权标头。

6.  在响应中，您将收到 PDF 文档的 base64 编码正文。

感谢[Thierry Stortenbeker](https://www.odesk.com/users/~01b1d6d92f7aff0be8)提供此应用程序以及帮助和耐心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:29:10.020

是的，您必须使用 Workbench 创建一个 LC 应用程序。这是如何做到的：

1.  使用 File -> New -> Application 在工作台中创建一个新应用程序。
2.  使用应用程序的右键菜单创建一个新进程。
3.  从活动中放入 renderPDF 表单活动并将其命名为“renderPDFForm”。
4.  选择 renderPDF 表单活动以使用底部的变量窗格添加变量。
5.  添加一个“Document”类型的变量并将其命名为“inputXDP”。我们将使用它来传递 xdp 文件。将其标记为“输入”变量。
6.  添加“文档”类型的变量并将其命名为“outPDF”。将其标记为“输出”变量。
7.  现在双击 renderPDFForm 活动，这将在左侧打开一个属性编辑器。
8.  如果尚未展开，请展开“输入”部分。确保从变量中提取“表格”。然后从下拉列表中选择“inputXDP”。
9.  如果尚未展开，请展开“输出”部分。确保从变量中提取“渲染表单”。然后从下拉列表中选择“outPDF”变量。
10.  现在通过应用程序上的右键菜单部署您的应用程序。

这就对了。你准备好了。现在保存该过程并双击“默认起点”以获取将公开此服务的其余 url。其余网址应如下所示*`http://localhost:8080/rest/services/RestFormRender/renderForm:1.0`*。这里 RestFormRender 是应用程序的名称，renderForm 是进程的名称。现在对此 REST url 进行 GET/POST 调用，并在“inputXDP”请求参数中指定 XDP 字节。

# regex - 匹配模式与异常

> ID：15435251
> 
> 赞同：0
> 
> 时间：2013-03-15T14:42:31.493
> 
> 标签：regex

我想使用正则表达式匹配一个模式，但我需要一些例外来匹配。例如，匹配“John Doe”的所有出现，除了那些“John Doe”被粗体标签括起来的出现，即“ `<b>`John Doe `</b>`”。

```
Match: John Doe
Don't match: <b>John Doe</b> 
```

如何使用正则表达式实现这一点？

澄清：我想排除粗体标签之间的*所有内容。*此排除的内容可能包含多种字符、换行符等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:46:51.237

如果您的正则表达式方言允许环视，您可以使用否定的lookbehind和否定的lookahead来完成该任务：

```
(?<!<b>)John Doe(?!<b>) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:47:15.633

使用 Perl，您可以使用否定的lookbehind：

```
$ echo "<b>John Doe</b>" | perl -ne 'print if /(?<!<b>)John Doe/' 
```

（上面没有打印 - 不匹配）。

```
$ echo "John Doe" | perl -ne 'print if /(?<!<b>)John Doe/'
John Doe 
```

（以上匹配）。

Symbol`(?<!<b>)`是一个否定的lookbehind - 如果它后面没有跟它里面的内容（`<b>`在这种情况下），则字符串匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:47:28.817

您可以为此使用负面的环顾四周：

```
(?<!<b>)John Doe(?!</b>) 
```

那不匹配`<b>John Doe`，或者`John Doe</b>`两者都不匹配。

如果您只想不将实例与开始和结束标签匹配，您可以执行以下操作：

```
John Doe(?!(?<=<b>John Doe)</b>) 
```

或者稍短一些（但不太容易理解 - 8 是 的长度`John Doe`）：

```
 John Doe(?!(?<=<b>.{8})</b>) 
```

# macos - 如何在 OS X 10.8 中将 Caps Lock 键重新映射到 Control？

> ID：15435253
> 
> 赞同：92
> 
> 时间：2013-03-15T14:42:41.377
> 
> 标签：macos, emacs

我想使用 Emacs 并且需要将 Caps 键重新映射到 Ctrl （切换它们）。我该怎么做？

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2013-03-17T14:45:11.887

只需转到**Apple Menu -> System Preferences... -> Keyboard -> Keyboard Tab -> Modifier Keys**并选择`Control`for `Caps Lock`。

# javascript - 使用 Capybara-Jasmine 进行无头 Jasmine 测试：AJAX 测试失败

> ID：15435261
> 
> 赞同：0
> 
> 时间：2013-03-15T14:43:08.297
> 
> 标签：javascript, jasmine, capybara-webkit, jasmine-jquery

所以这是一个 ruby​​-NO-rails 项目，我正在使用 Jasmine、Jasmine-Jquery 进行前端测试。

我还使用 LoadFixtures 来测试模板上的 DOM 操作。在浏览器上，一切都是草绿色的，太棒了。

然后我去无头：我使用 Capybara-Webkit，Capybara-Jasmin gems。测试是绿色的，只是那些使用 Jasmin-Jquery LoadFixture mathode（使用 ajax）的测试是血红色的，让我很生气。

将 WaitsFor 添加到我原来的 Jasmine 测试中不会有帮助。PreloadFixtures 也没有。我认为应该对水豚茉莉花进行一些调整..

任何疯狂的想法将不胜感激。也欢迎更好的测试设置。

ķ

# javascript - JSF 将悬停添加到面板

> ID：15435267
> 
> 赞同：0
> 
> 时间：2013-03-15T14:43:36.860
> 
> 标签：javascript, jsf, jsf-2, primefaces, hover

*JSF-2.0、Mojarra 2.1.19、PrimeFaces 3.4.1*

我需要一个`p:panel`组件的悬停事件（mouseOver mouseOut）。让我们假设有：

```
<h:form id="dataTableForm">
    <p:dataTable id="dataTable>
        <p:panel id="hoverPanel">
            <p:commandLink id="button" value="Show" rendered="condition"></p:commandLink>
        </p:panel>
    </p:dataTable>
</h:form> 
```

我的功能要求告诉，当鼠标指针在`hoverPanel`，`p:commandLink`组件需要显示，否则（mouseOut）它需要被隐藏。`display`我猜这可以通过设置它的 CSS属性来完成。我不想使用`rendered`属性 of`p:commandLink`因为它已经有一个，这不应该需要去服务器然后回来，它必须在客户端完成。

我试过使用：

```
$('.hoverPanel').hover(
   alert('mouseOn');           
); 
```

但这不起作用，我也需要某事。对每个不同`hoverPanel`的组件更具体，因为它们包含在`p:dataTable`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:09:53.443

您使用了错误的选择器：您没有在面板上定义类，而是定义了将由命名容器更改的 id。考虑到您的评论，最简单的解决方案是为所需面板定义一个附加类。

风景：

```
<h:form id="form">
    <p:dataTable id="table">
        <p:panel id="hoverPanel" styleClass="base-class #{bean.condition ? 'change-panel' : ''}">
            <p:commandLink id="button" styleClass="btn" value="Show" rendered="condition">
            </p:commandLink>
        </p:panel>
    </p:dataTable>
</h:form> 
```

并在 JavaScript 中完成你的工作：

```
$('.change-panel').hover(
    function () {
       $(this).find('.btn').toggleClass('visible');
    }
    //or do your job by binding two function handlers to distinguish between mouse events
); 
```

## 完整答案

根据您的评论和给出的自我回答，这显然不是完成这项工作的最佳方式，我将发布一个完整的答案。当您决定提出下一个问题并得到答案时，请尽最大努力全面调查您提供的代码。此外，在此过程中学习一些 JavaScript/jQuery 也是明智之举。

该视图显示了一个双列数据表，第二列显示了带有所需链接的面板。该表包含所有可能的替代方案，因此请务必为您选择最佳设置。

**查看**：

```
<h:head>
    <h:outputScript name="js/js.js" target="body"/>
    <style>
        .invisible {
            display: none
        }
    </style>
</h:head>
<h:body>
    <h:form id="form">
        <p:dataTable value="#{bean.data}" var="data" id="table" rowIndexVar="index">
            <p:column headerText="Data">
                <h:outputText value="#{data}"/>
            </p:column>
            <p:column headerText="Other functions">
                <p:panel id="hoverPanel" styleClass="#{((index eq 0) || (index eq 1) || (index eq 2)) ? 'change-panel' : ''}">
                    <h:outputText value="Row #{index + 1}"/>
                    <p:commandLink id="button" value="Show"
                                   rendered="#{!((index eq 1) || (index eq 3))}"
                                   styleClass="btn #{(index eq 0) ? 'invisible' : ''}"/>
                </p:panel>
            </p:column>
        </p:dataTable>
    </h:form>
</h:body> 
```

**JavaScript**：

```
$(document).ready(function() {
    $('.change-panel').hover(
        function () {
           $(this).find('.btn').toggleClass('invisible');
        }
    );
}); 
```

**豆**：

```
@ManagedBean
@RequestScoped
public class Bean implements Serializable {

    private List<String> data = new ArrayList<String>();

    public Q15435267Bean() {
        data.add("Data element 1");
        data.add("Data element 2");
        data.add("Data element 3");
        data.add("Data element 4");
        data.add("Data element 5");
    }

    public List<String> getData() {
        return data;
    }

    public void setData(List<String> data) {
        this.data = data;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:17:44.103

您首先删除 commandLink 上的渲染，好像条件为 false 链接将不存在于您的 html 中：

```
<h:form id="dataTableForm" prependId="false">
    <p:dataTable id="dataTable" rowIndexVar="index">
        <p:panel id="hoverPanel_#{index}">
            <p:commandLink id="button" value="Show" style="display: none;">             </p:commandLink>
        </p:panel>
    </p:dataTable>
</h:form>

$("[id$='hoverPanel_1']").hover(
function(){
if'(#{put your condition where it was in render}'=='true'){
$("[id$='button']").show();
   alert('mouseOn');           
}
}, function(){
$("[id$='button']").hide(); 
```

});

# svn - 如何在 SVN 中重命名存储库？

> ID：15435270
> 
> 赞同：2
> 
> 时间：2013-03-15T14:43:44.753
> 
> 标签：svn, svnadmin, svnserve, svn-repository

我需要将现有的存储库根名称重命名为新名称。

我正在使用 svnserve 服务器。

```
URL: svn://somename.dev.loc.con.dept/export/svnrepo/**old_name/CL_abc/trunk
Repository Root: svn://somename.dev.loc.con.dept/export/svnrepo/**old_name 
```

1.  将 svn://somename.dev.loc.con.dept/export/svnrepo/ **old_name**
    重命名 为
    svn://somename.dev.loc.con.dept/export/svnrepo/ **new_name**

2.  在命令行中应该是：

    ```
    /export/svnrepo/**old_name**  to /export/svnrepo/**new_name** 
    ```

3.  也需要重命名回购名称

    CL_abc
    到
    CL_newname

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:14:47.017

您需要在运行该`svnserve`命令的 Subversion 服务器上执行此操作。该`svnserve`命令可以采用使用该命令创建的存储库的名称，也可以采用`svnadmin create`包含使用该命令创建的多个存储库的目录`svnadmin`。

### 一个存储库

```
$ hostname
$ mysvn
$ cd /opt/repos
$ svnadmin create foo
$ svnserve -r foo -d 
```

### 访问该存储库

```
$ svn ls svn://mysvn
$ svn mkdir svn://mysvn/trunk svn://mysvn/tags svn://mysvn/branches
$ svn co svn://mysvn/trunk 
```

在上面的示例中，我创建了一个名为 的 Subversion 存储库`foo`，并`svnserve`使用该存储库作为服务器的根目录运行。

当我访问该存储库时，该 URL 中没有存储库名称。我的 URL的*根*就是机器名。没有什么可重命名的。

### 多个存储库

```
$ hostname
$ mysvn
$ cd /opt/repos
$ svnadmin create foo
$ svnadmin create bar
$ svnserve -r . -d 
```

### 访问这些存储库

```
$ svn ls svn://mysvn
svn: E210005: Unable to connect to a repository at URL 'svn://localhost'
svn: E210005: No repository found in 'svn://localhost'
$ svn ls svn://mysvn/foo
$ svn ls svn://mysvn/bar
$ svn mkdir svn://mysvn/bar/trunk svn://mysvn/bar/tags svn://mysvn/bar/branches
$ svn co svn://mysvn/bar/trunk 
```

在本例中，我在目录下创建了两个名为`foo`和的Subversion 存储库目录。当我启动时，我给它包含我的 Subversion 存储库的目录的名称。我的存储库名称是我的目录的名称。我有目录，这就是名字。如果我想更改存储库的名称，我需要在服务器上更改它们：`bar``/opt/repos``svnserve``foo``bar`

```
$ hostname
mysvn
$ pkill svnserve   #Stop the SVN server
$ cd /opt/repos
$ mv bar to fubar  #Change the repo name
$ svnserve -r /opt/repos -d 
```

### 访问存储库

$ svn ls svn://mysvn/fubar/trunk

当我重新启动 SVN 服务器时，我的存储库有一个新名称。

看起来您需要执行以下操作：

```
$ ssh somename.dev.loc.con.dept  #Get on the Subversion server
$ pkill svnserve                 #Shutdown the server
$ mv /export/svnrepo/oldname /export/svnrepo/newname
$ svnserve -r / -d 
```

现在，您将能够使用新名称访问您的存储库。但是，我建议您通过以 root 身份启动该`svnserve`过程来简化您的 Subversion URL：`/export/svnserve`

```
$ svnserve -r /export/svnrepo -d 
```

现在，用户可以使用稍短的名称访问他们的项目：

```
$ svn co svn://somename.dev.loc.con.dept/newname/CL_abc/trunk 
```

# java - 玩！2.1 更新 Play! 后表单损坏！2.0 应用

> ID：15435276
> 
> 赞同：0
> 
> 时间：2013-03-15T14:43:58.870
> 
> 标签：java, playframework, playframework-2.1

简单的代码片段不言自明。

```
[error]   Form<User> userForm = Form.form(User.class).bindFromRequest();
[error]                             ^
[error]   symbol:   method form()
[error]   location: class Form 
```

我检查了文档：[http ://www.playframework.com/documentation/2.1.0/JavaForms](http://www.playframework.com/documentation/2.1.0/JavaForms)

不明白这是怎么回事...

文档对此很清楚：

[http://www.playframework.com/documentation/2.1.0/Migration](http://www.playframework.com/documentation/2.1.0/Migration)

Java API 也很清楚：

[http://www.playframework.com/documentation/api/2.1.0/java/play/data/Form.html#form(java.lang.Class)](http://www.playframework.com/documentation/api/2.1.0/java/play/data/Form.html#form(java.lang.Class))

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T08:30:31.090

```
Form<User> userForm = form(User.class); 
```

**或者**

```
DynamicForm requestData = form().bindFromRequest(); 
```

从 play 2.0.x 切换到 2.1.x 会导致上述代码出错。

**解决方案：**

play.data.Form.* 是静态导入。

在您的文件中使用`import static play.data.Form.*;`& 错误将得到解决。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T14:57:29.633

该`form`方法已在 2.1 版中移动。

检查您是否实际使用`play.data.Form.form()`（`play.mvc.Controller.Form`如果我没记错的话，它以前是在使用的）。

如果您确实更改了它，请尝试`play clean clean-all`并重新运行编译。那么它应该工作......

# php - 如何使用 file_get_contents 查找流？

> ID：15435277
> 
> 赞同：1
> 
> 时间：2013-03-15T14:44:02.383
> 
> 标签：php, stream, file-get-contents

我正在使用 PHP 来运行 web 服务。其中一个 url 需要从 POST 正文中获取几张图片。我目前使用 fopen/fread 解决方案：

```
$size1 = intval($_REQUEST['img1']);
$size2 = intval($_REQUEST['img2']);
$sizeToRead = 4096;
$datas1 = null;
$datas2 = null;

$h = fopen('php://input','r+');
while($size1 > 0) {
    if($sizeToRead > $size1)
        $sizeToRead = $size1;

    $datas1 .= fread($h,$sizeToRead);
    $size1 -= $sizeToRead;
}
fclose($h);

file_put_contents('received1.png',$datas1);
//Same thing for the second image 
```

该解决方案工作正常，但我试图通过使用使其更具可读性`file_get_contents()`：

```
file_put_contents('received1.png',file_get_contents('php://input',false,null,0,$size1)); 
```

但这给了我一个错误：

> file_get_contents() 流不支持查找
> file_get_contents() 在流中查找位置 21694 失败

这甚至可以在流中寻找吗？也许通过将第三个参数更改为其他参数？

如果没有，有没有办法让我的代码更优雅/高效？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:57:13.760

引用[手册](http://www.php.net/manual/en/wrappers.php.php)：

> 注意：使用 php://input 打开的流只能读取一次；**该流不支持查找操作**。但是，根据 SAPI 实现，可能会打开另一个 php://input 流并重新开始读取。这只有在请求正文数据已保存时才有可能。通常，这是 POST 请求的情况，但不是其他请求方法，例如 PUT 或 PROPFIND。

（我的重点）

# vb.net - 设置 Stylemanager.ManagerColorTint 时表单加载冻结

> ID：15435279
> 
> 赞同：1
> 
> 时间：2013-03-15T14:44:07.753
> 
> 标签：vb.net, winforms, form-load

当我的`foarload`事件方法触发时，我有

```
Try 
    '//this is the default or modified color tint
    StyleManager1.ManagerColorTint = ColorTint
Catch ex As Exception
End Try 
```

它到达`StyleManager1.ManagerColorTint = ColorTint` 然后当我继续它只是冻结，

`StyleManager1` 是`DevComponents.DotNetBar.StyleManager`

目前`stylemanager1.managercolortint`是 255, 50, 50, 50 `ColorTint`。

如果我在这条线上放了一个断点，它仍然会冻结，除非我绕过那条线，否则一切都运行良好。

如果它再次触及那条线，它仍然会冻结。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T21:23:37.257

嗯...也许在 catch ex as Exception 行下，尝试打印一些内容，例如 msgbox("Error") 以查看它是否到达那里，即使您说它冻结了。

我希望这会有所帮助，如果没有，我道歉和 gl。

# asp.net - 如何将 createuserwizard 和登录工具指向远程 sql 服务器？

> ID：15435282
> 
> 赞同：0
> 
> 时间：2013-03-15T14:44:13.403
> 
> 标签：asp.net, visual-studio-2010, login, createuserwizard

我不知道如何将 createuserwizard 和登录工具指向远程 sql-server。我正在建立一个基于 ASP.net 的网站。我需要添加任何代码或 web.config 以使其连接吗？

谢谢吉米

# php - cakephp - 使用多字搜索字符串构建查询，搜索多个字段

> ID：15435284
> 
> 赞同：1
> 
> 时间：2013-03-15T14:44:19.680
> 
> 标签：php, mysql, cakephp

我有一个模型“混合”，它具有字段（我希望可搜索）“名称”“描述”和“标签字”，以及一个布尔字段“已发布”。如果“已发布”字段设置为 1，用户应该能够输入多词搜索词并获取出现在任何可搜索字段中的任何词的结果

到目前为止，在谷歌的帮助下，我在这里阅读：

```
if ($this->request->is('post')) {
    $conditions = array();
    $search_terms = explode(' ', $this->request->data['Mix']['search']);
    foreach($search_terms as $search_term){
        $conditions[] = array('Mix.name Like' =>'%'.$search_term.'%');
        $conditions[] = array('Mix.description Like' =>'%'.$search_term.'%');
        $conditions[] = array('Mix.tag_words Like' =>'%'.$search_term.'%');
    }
    $searchResults = $this->paginate('Mix', array('conditions' => array('Mix.published'=>1, 'AND'=>array('OR' => $conditions))));
} 
```

但由于它只返回大量错误，我可以猜测它是完全错误的。我很困惑，正确的语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:53:56.667

您不使用`AND`索引，它已经暗示：-

```
$searchResults = $this->paginate('Mix', array('conditions' => array('Mix.published'=>1, 'OR' => $conditions))); 
```

# hibernate - 标准 API。按最新的孩子排序

> ID：15435287
> 
> 赞同：0
> 
> 时间：2013-03-15T14:44:36.757
> 
> 标签：hibernate, hibernate-criteria

我很难完成一些我认为应该很容易的事情。

基本上我有一个 OrderBean 和一个 OrderInsertBean。它们都是映射到 mySQL 表的实体。一个 OrderBean 可以有多个 OrderInsertBean，而一个 OrderInsertBean 只有一个 OrderBean。

我正在编写 Hibernate Criteria 查询来构建一个动态查询，该查询将从这些表中搜索和排序结果。它大部分工作正常，除非我尝试按下一个 OrderInsertBean 对订单进行排序。

您会看到，OrderInsertBean 有一个 insertDate，对于每个 Order，我想选择第一个 insertDate 大于今天的 OrderInsert，并按此日期对订单进行排序。

在普通的 SQL 中很容易。可以用多种方式编写，但这是一种方法：

```
select o.*, (select min(oi2.insertDate) 
from AIDA_ORDER_INSERT oi2 where oi2.insertDate > curdate() 
and oi2.orderId = o.orderId) as insertDateNew 
from AIDA_ORDER o 
order by insertDateNew 
```

但是***怎么能像 Hibernate Criteria 查询一样写呢？或者 JPA 2 Criteria Query 也不错。

这是我所得到的……

```
Criteria crit = session.createCriteria(OrderBean.class, "order");
DetachedCriteria subquery = DetachedCriteria.forClass(OrderInsertBean.class, "oi");
subquery.add(Restrictions.ge("oi.insertDate", new Date()));

ProjectionList projectionList = Projections.projectionList();
projectionList.add(Projections.min("oi.insertDate"));
projectionList.add(Projections.groupProperty("oi.orderId"));
subquery.setProjection(projectionList);

// How to add the subquery to the main query to get the desired results??

// Finally ordering the results:
crit.addOrder(Order.asc("insertDateNew")); 
```

我认为我需要以某种方式将子查询添加到条件选择列表中，给它一个别名，然后按它排序......

但我卡住了，不知道去哪里。谁能帮助一个可怜的家伙？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:05:33.580

您是否尝试过`Order`在标准中添加一个？

喜欢：

```
crit.addOrder(Order.asc("insertDateNew")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:58:26.037

您已经映射了 Order 和 OrderInsert 之间的关联。这不起作用吗？

```
Criteria crit = session.createCriteria(OrderBean.class, "order");

crit.createAlias("orderInserts", "oi");

crit.add(Restrictions.ge("oi.insertDate", new Date()));

ProjectionList projectionList = Projections.projectionList();
projectionList.add(Projections.min("oi.insertDate"));
projectionList.add(Projections.groupProperty("oi.orderId"));
crit.setProjection(projectionList);

// Finally ordering the results:
crit.addOrder(Order.asc("oi.insertDateNew")); 
```

# c# - 字段永远不会分配给并且将始终具有其默认值 0

> ID：15435292
> 
> 赞同：2
> 
> 时间：2013-03-15T14:44:44.367
> 
> 标签：c#, winforms

我的代码中出现以下错误，我不确定为什么：

警告 -`'SummaryForm.m_difficulty' is never assigned to, and will always have its default value 0`

代码

```
public partial class SummaryForm : Form
{
    // Declares variables with the values pulled from the 'MainForm'
    int iCorrectACount = MainForm.iCorrectACount;
    int iCurrentQIndex = MainForm.iCurrentQIndex;

    private Difficulty m_difficulty;

    public SummaryForm()
    {

        InitializeComponent();

        double modifier = 1.0;
        if (m_difficulty == Difficulty.Easy) { modifier = 1.0; }
        if (m_difficulty == Difficulty.Medium) { modifier = 1.5; }
        if (m_difficulty == Difficulty.Hard) { modifier = 2; }

        // Sets the labels using integer values
        lblCorrectNum.Text = iCorrectACount.ToString();
        lblWrongNum.Text = (iCurrentQIndex - iCorrectACount).ToString();
        lblScoreTotal.Text = (iCorrectACount * modifier).ToString();
    } 
```

也许这与为什么`lblScoreTotal.Text`不会更改为 value * 修饰符但会更改为另一种形式有关？

我在这里问这个问题的原因是有人建议我禁用警告消息，但我认为这不是合适的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:47:03.847

`m_difficulty`是私有的，因此无法从您的班级外部访问它，但您永远不会在内部分配它，因此它永远不会改变。

因此，比较它没有实际意义，因为它总是等于 0。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T14:46:41.390

编译器是完全正确的：就你所展示的而言，*没有什么*会改变你的领域。`m_difficulty`您*希望*设置该值是什么？您是否真的打算将其设置为基于`MainForm`as`iCorrectACount`和的东西`iCurrentQIndex`？

您如何期望它会是除了`(Difficulty) 0`评估为之外的任何东西？

从静态访问的表单实例中提取初始值也是非常狡猾的，IMO。如果构造函数接受构造它的任何东西的初始值会好得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:47:20.837

在声明变量后，您应该始终对其进行初始化。

```
private Difficulty m_difficulty = new Difficulty(); 
```

类似的东西。

所以你阻止它为空（在这种情况下你会得到一个异常）。

警告只是告诉你这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T15:10:28.237

在我看来，您希望 m_difficulty 绑定到您的用户表单上的下拉选择。它不是。即使是这样，您也希望访问 SelectedValue 属性而不是对象本身。也许这就是你要找的。

```
Difficulty m_difficulty = (Difficulty)Enum.Parse(ddDifficulty.SelectedValue); 
```

# cloudbees - 播放 2 和 Cloudbees：无法解析替换为值

> ID：15435297
> 
> 赞同：2
> 
> 时间：2013-03-15T14:45:05.763
> 
> 标签：cloudbees, playframework-2.1

我正在部署我的 Play！2.1 在 Cloudbees 上的应用。

我的*application.conf*中有：

```
# Database configuration
# ~~~~~ 
db.default.driver=com.mysql.jdbc.Driver
db.default.url=${MYSQL_URL_DB}
db.default.user=${MYSQL_USERNAME_DB}
db.default.password=${MYSQL_PASSWORD_DB} 
```

我在 Cloudbees 配置中定义了这些值：

```
$ bees config:list -a myself/my-app 
Application Parameters:
  proxyBuffering=false
  MYSQL_URL_DB=jdbc:cloudbees://my-app
  MYSQL_USERNAME_DB=my-app
  MYSQL_PASSWORD_DB=yummy
Runtime Parameters:
  java_version=1.7 
```

`git push cloudbees cloudbees:master`我使用触发 Jenkins 的git ( ) 发布我的应用程序。但是在部署应用程序时，我会进入 Jenkins 日志：

> [错误]（编译：编译）com.typesafe.config.ConfigException$UnresolvedSubstitution：conf/application.conf：16：无法解析替换为值：${MYSQL_PASSWORD_DB}

还有什么可以让 Jenkins 了解配置吗？我是不是误会了什么？

谢谢你的帮助！

阿尔班

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-25T09:39:26.857

你可以加 ”？” 到开头，因此它将被视为覆盖。

```
db.default.url=${?MYSQL_URL_DB} 
```

如果您愿意，您还可以使用这种方法处理回退情况。

```
db.default.url=mysql://fallback_url
db.default.url=${?MYSQL_URL_DB} 
```

如果 MYSQL_URL_DB 不存在，将使用 fallback_url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T07:28:30.487

此配置是在运行时注入的，而不是在构建时注入的。你必须找到一种方法让 sbt 构建忽略未解决的替换。似乎一种可能的解决方法是将 MYSQL_URL_DB=foo 等设置为构建环境变量，这样检查就不会中断，因为它们实际上不会被注入到您的配置中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-26T07:38:49.027

我使用这样的配置：

[https://github.com/CloudBees-community/play2-clickstart/blob/master/conf/application.conf](https://github.com/CloudBees-community/play2-clickstart/blob/master/conf/application.conf)

和这样的构建命令：

```
java -Xms512M -Xmx1536M -Xss1M -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=384M -jar /opt/sbt/sbt-launch-0.11.3-2.jar -Dsbt.log.noformat=true clean compile test dist 
```

而且它不担心缺少环境变量。我的猜测是有一个 scala 宏或触发编译器解析这些变量的东西。添加它们是好的。

我已经修改了 clickstart 以设置默认值以备不时之需。

# c# - 动态上下文菜单

> ID：15435306
> 
> 赞同：3
> 
> 时间：2013-03-15T14:45:24.850
> 
> 标签：c#, .net, winforms, contextmenu

我正在尝试提出一种解决方案来创建可以在运行时生成的动态上下文菜单。我已经实现了一个`IGuiCommand`接口，它实现了类似于普通命令模式的东西。

```
interface IGuiCommand
{
    Execute();
    Undo();
    bool CanUndo {get;set;}
    Redo();
    string CommandName {get;set;}
    string CommandDescription {get;set;}
} 
```

这个想法是允许右键单击的控件提交它自己的命令列表以显示在给定的上下文菜单中。

虽然我可以让每个控件构建一个上下文菜单，但我更喜欢使用单个上下文菜单并动态生成菜单，以便在运行时更轻松地进行管理。当控件状态或应用程序状态发生变化时，我希望上下文菜单能够反映这种变化。例如，如果我右键单击一个复选框，则该复选框将根据复选框的当前 Checked 值向上下文菜单提交启用或禁用命令以显示。

我想如果我有办法知道哪个控件是“右键单击”以便为该特定控件调出上下文菜单，我可以轻松地实现这一点。

令人惊讶的是，`ContextMenu`事件没有提供`EventArg`指示右键单击的控件（或任何会导致上下文菜单弹出的命令）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:23:11.700

您只需要覆盖 ContextMenuStrip_Opening 事件。发送者对象是一个 ContextMenuStrip，它包含一个 SourceControl 元素。当您应用适当的演员表时，您将可以访问所需的一切。

```
private void contextMenuStrip1_Opening(object sender, System.ComponentModel.CancelEventArgs e) {
  var contextMenu = (sender as ContextMenuStrip);
  if (contextMenu != null) {
    var sourceControl = contextMenu.SourceControl;
    contextMenuStrip1.Items.Clear();
    //contextMenuStrip1.Items.Add(...);
  }
} 
```

# java - Ant 构建的 Jar 程序看不到具有显式设置的类路径的类

> ID：15435308
> 
> 赞同：0
> 
> 时间：2013-03-15T14:45:29.150
> 
> 标签：java, ant, classpath

所以，这是我的 build.xml：

```
<?xml version="1.0"?>
  <project name="test" default="hello_jar">
  <path id="commons" >
    <fileset dir="lib">
      <include name="commons-lang-2.6.jar"/>
    </fileset>
  </path>
  <target name="compile">
    <mkdir dir="build/classes"/>
    <javac srcdir="src/test_package" destdir="build/classes" classpathref="commons"/>
  </target>
<target name="hello_jar" depends="compile">
  <mkdir dir="build/jar"/>
  <jar destfile="build/jar/hello.jar">
    <fileset dir="build/classes">
      <include name="test_package/Hello.class"/>
    </fileset>
    <manifest>
      <attribute name="Main-Class" value="test_package.Hello"/>
    </manifest>
  </jar>
</target> 
```

成功构建 jar 后，我使用显式设置的类路径执行它：

```
java -classpath lib/commons-lang-2.6.jar -jar build/jar/hello.jar test_package.Hello 
```

我得到以下信息：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/lang/math/Range
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2451)
    at java.lang.Class.getMethod0(Class.java:2694)
    at java.lang.Class.getMethod(Class.java:1622)
    at sun.launcher.LauncherHelper.getMainMethod(LauncherHelper.java:494)
    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:486)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.lang.math.Range
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 6 more 
```

为什么找不到'commons-lang' jar？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:54:18.070

你应该选择：

*   要么你使用`-jar`，JVM 将使用 jar 内的清单文件中指定的类路径。它还将使用清单来了解必须执行哪个主类。因此应该没有`-cp`选项，也没有指定类名：

    ```
    java -jar build/jar/hello.jar 
    ```

*   或者你使用`-cp`(or `-classpath`)，你应该在类路径中添加每个 jar (commons 和 hello)，你应该指定要执行的主类名：

    ```
    java -cp lib/commons-lang-2.6.jar:build/jar/hello.jar test_package.Hello 
    ```

在您的情况下，由于您尚未在清单中配置类路径，因此您应该选择第二个选项。

# android - Android：在网格视图中拖动末端（android 4.0 +）

> ID：15435311
> 
> 赞同：0
> 
> 时间：2013-03-15T14:45:36.917
> 
> 标签：android

在我的应用程序中，我有一个带有网格视图的屏幕，其中我在 2 列中显示照片。我想增加通过拖放来重新排序照片的可能性。我有 android 4.0，我使用了 android 本机拖放：

[http://developer.android.com/guide/topics/ui/drag-drop.html](http://developer.android.com/guide/topics/ui/drag-drop.html)

所以，我已经添加了拖放功能，但问题是，当用户试图将顶部图像拖到底部时，我需要滚动网格视图。使用 smoothSctollTo() 方法以编程方式滚动 gridView 不是问题，但是当我拖动项目时，我需要检查手指是否位于屏幕底部。问题是：

```
 @Override
    public boolean onDrag(final View v, final DragEvent event) {
        Log.v("Coordinates", " " + v.getY());
        switch (event.getAction()) {
        case DragEvent.ACTION_DRAG_STARTED:
            break;
        case DragEvent.ACTION_DRAG_ENTERED:
            break;
        case DragEvent.ACTION_DRAG_EXITED:
            break;
        case DragEvent.ACTION_DROP:
            break;
        case DragEvent.ACTION_DRAG_ENDED:
            break;
        default:
            break;
        }
        return true;
    }
}; 
```

只有当一个 gridview 项目与另一项目相交时，才会调用所有这些事件。但是当我将项目拖动到干净的 gridView 空间时，不会调用拖动。拖动项目时如何获取手指坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:27:08.833

您可以实现[DraggableGridView](https://github.com/thquinn/DraggableGridView)或[PagedDragDropGrid](http://www.androidviews.net/2012/12/pageddragdropgrid/)，它们都可以为您解决这个问题。

编辑：这是一个直接扩展 GridView 的新库： [https ://github.com/askerov/DynamicGrid](https://github.com/askerov/DynamicGrid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:50:18.043

根据我对 android 的了解，我建议您为要滚动的视图设置一个[OnTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.html)，这样，如果您已到达视图的底部（根据视图位置和高度进行一些数学运算），您就可以开始滚动了。

# c++ - 在 C++ 中漂亮地打印 std::vector

> ID：15435313
> 
> 赞同：5
> 
> 时间：2013-03-15T14:45:44.830
> 
> 标签：c++, stdvector

我怎样才能漂亮地打印一个`std::vector`？例如，如果我构造 a `std::vector<int>(6, 1)`，我可以通过什么运行它来获得像`{1 1 1 1 1 1}`C++ 中的输出？它需要是通用的，因为大小和值可能会发生变化`std::vector<int>(4, 0)`，`{0 0 0 0}`.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-15T14:51:06.000

```
#include <vector>
#include <algorithm>
#include <iterator>

template<typename T>
std::ostream & operator<<(std::ostream & os, std::vector<T> vec)
{
    os<<"{ ";
    std::copy(vec.begin(), vec.end(), std::ostream_iterator<T>(os, " "));
    os<<"}";
    return os;
} 
```

`operator<<`然后你可以用正常的语法输出你的向量：

```
std::cout<<yourVector; 
```

[你可以在这里](http://ideone.com/IOCsKq)看到这个。

但对于更灵活的解决方案，请查看[上面链接的问题](https://stackoverflow.com/questions/4850473/pretty-print-c-stl-containers)。

* * *

编辑：如果你不想要两个空格（在开头和结尾）：

```
template<typename T>
std::ostream & operator<<(std::ostream & os, std::vector<T> vec)
{
    os<<"{";
    if(vec.size()!=0)
    {
        std::copy(vec.begin(), vec.end()-1, std::ostream_iterator<T>(os, " "));
        os<<vec.back();
    }
    os<<"}";
    return os;
} 
```

# extjs - 将存储绑定到网格面板组合框列 extjs

> ID：15435321
> 
> 赞同：1
> 
> 时间：2013-03-15T14:46:33.950
> 
> 标签：extjs, grid, store

我想使用 Extjs 4 和 MVC 架构将商店动态绑定到我的网格面板中的组合框，我在按钮的 clic 处理程序中执行了此操作：

```
var prodRelStore = this.getGetProdRelDataStore();   
var mygridprodrel = scopegrid.getView().getHeaderCt().getHeaderAtIndex(2);//the combo column
    prodRelStore.getProxy().url = 'getprodrel.php';
    prodRelStore.autoSync = true;
    prodRelStore.load({
    params: {
            scope_name: scopename
            },
            scope : this
    });
    mygridprodrel.bindStore(prodRelStore);
    scopegrid.getView().refresh(); 
```

但我得到：`Uncaught TypeError: Object [object Object] has no method 'bindStore'` 将商店动态绑定到网格面板内的组合框的正确方法是什么？

# c# - 使用 Selenium 向 tinymce 控件发送文本不适用于 IE9

> ID：15435322
> 
> 赞同：2
> 
> 时间：2013-03-15T14:46:34.650
> 
> 标签：c#, internet-explorer, selenium, tinymce

我有一个扩展方法可以将文本发送到一个 tinymce 控件，用于一个 Web 应用程序的一系列测试用例，该应用程序在整个过程中都有许多 tinymce 控件。我的方法适用于 FireFox 和 Chrome，但不适用于我们支持的其他浏览器 IE。任何帮助使它在 IE 中工作将不胜感激 - 下面是我的方法代码：

```
public static void SendTextToMCE(this IWebDriver driver, string mceControl, string message)
    {
        driver.SwitchTo().Frame(mceControl);
        driver.FindElement(By.Id("tinymce")).SendKeys(message);
        driver.SwitchTo().Window(driver.CurrentWindowHandle);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:06:57.237

如果您的页面中有*一个*TinyMCE 元素，那么您可以通过 TinyMCE 的脚本发送您的文本：

```
var obj = ((IJavaScriptExecutor)webDriver).ExecuteScript("tinyMCE.activeEditor.setContent('" + text + "');"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T11:35:16.393

我尝试在 C# 中使用以下代码，这对我来说很好。

```
public void main ()
{
  driver.SwitchTo().Frame("description-editor_ifr");
  IWebElement element = _WebDriver.FindElement(By.CssSelector("body"));
  element.Clear();
  element.SendKeys("Hello");

  //Go back to main frame
  driver.SwitchTo().ParentFrame();
} 
```

# svn - Intellij IDEA：我想将 Web-Inf/Classes 添加到颠覆

> ID：15435327
> 
> 赞同：0
> 
> 时间：2013-03-15T14:46:41.523
> 
> 标签：svn, intellij-idea, web-inf

我想使用 Intellij IDEA 将 WEB-INF/类添加到颠覆。它可能不是理想的工作流程，但它是我因工作而必须使用的工作流程。Tortoise SVN 检测到 .class 更改，但 IDEA 只给了我提交 .java 文件的选项。

知道为什么乌龟看到了变化，但 IDEA 没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:43:57.437

除了@vinnyjames 的回答，您还可以在`Settings > Version Control > Ignored Files`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:47:51.017

该文件夹可能包含在特殊`svn:ignore`属性中。从命令行运行：

```
cd /path/to/PROJECT/WEB-INF
svn proplist .
svn propget "svn:ignore" . 
```

这将告诉您它们是否实际上被忽略了，应该对类目录及其子目录进行相同的测试。

# python - python - 如何用标签替换html中的所有链接标签？

> ID：15435329
> 
> 赞同：0
> 
> 时间：2013-03-15T14:46:42.733
> 
> 标签：python, html-parsing

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:52:31.583

您可以为此使用简单的正则表达式：

```
import re
'<em>' + re.search(r'<a.+>(.+)</a>',r'my long text with <a href="" target="_blank">links</a>').group(1) + '</em>' 
```

# c++ - 监视器 c++11和c++03中的类实现？

> ID：15435330
> 
> 赞同：5
> 
> 时间：2013-03-15T14:46:45.357
> 
> 标签：c++, boost, c++11, synchronization

Herb Sutter 在“C++ and Beyond 2012: Herb Sutter - C++ Concurrency”中描述了模板 Monitor 类的实现：

```
template<class T> class monitor {
private:
     mutable T t;
     mutable std::mutex m;
public:
     monitor( T t_ ) : t( t_ ) { }

     template<typename F>
     auto operator()( F f ) const -> decltype(f(t))
     {  std::lock_guard<mutex> hold{m};  return f(t);  }
}; 
```

我正在尝试包装我现有的类 Logger：

```
Logger logger;
monitor< Logger > synchronizedLogger( logger ) ; 
```

我有两个问题。为什么这段代码不能在 Visual Studio 2012 中用 c++11 编译？编译器说“'Debug' : is not a member of 'monitor'”，其中 Debug 是 Logger 类的方法。

如何使用 Boost 库与 C++03 编译器实现相同的监视器模板类。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T14:54:45.247

您可能正在尝试执行`monitor< Logger >::Debug(...)`呼叫之类的操作。这行不通。

您的显示器可以调用函数尝试：

```
monitor< Logger > logger;
logger(boost::bind(&Logger::Debug, _1, "blah")); 
```

PS：*我没用过C++11 lambdas，为了不犯错我提供了boost::bind版本*

**编辑**：戴夫好心地提供了那个版本

```
logger([](Logger& l){ l.Debug("blah"); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:37:28.557

谢谢大家的回答和评论。在您的帮助下，我使用 C++03 和 Boost 库实现了监视器<T>。

```
#include <boost/bind.hpp>
#include <boost/thread/mutex.hpp>
#include <boost/thread/locks.hpp>
#include <boost/utility/result_of.hpp>

template<class T> class monitor
{
private:
     mutable T& t;
     mutable boost::mutex m;
public:
     monitor( T& t_ ) : t( t_ )
     {
     }

     template< typename F >
     typename boost::result_of< F() >::type operator()( F f ) const
     {
          boost::lock_guard< boost::mutex > hold( m );
          return f( t );
     }
}; 
```

谈到这个解决方案的正确性（锁的粗粒度等），我正在考虑在单元测试中使用这个类作为我的 ILogger 接口的 Google Mock 实现的包装器。谷歌模拟文档指出它在 Windows 上不是线程安全的。

```
 ILogger * mockedLogger = new MockedLogger();
 monitor< ILogger > synchronizedLogger( *mockedLogger ) ;
 synchronizedLogger( boost::bind( &ILogger::Debug, _1, "blah" ) ); 
```

# .net - 如何有效维护大量服务端点配置？

> ID：15435335
> 
> 赞同：1
> 
> 时间：2013-03-15T14:46:52.503
> 
> 标签：.net, wcf, service

我们得到的是一个大系统，分布着很多服务，包括WCF窗口服务、IIS窗口服务、IIS Web服务、自托管服务、WebApi服务等等。总共大约 30 个项目并且它不断增加，所以我们最终遇到了配置噩梦。NServiceBus 或 any 不是我们客户的选择，所以我认为我们在这里有两个选择：

1.  将所有配置保存在一个大型配置文件中。[在这里](http://www.paraesthesia.com/archive/2008/11/26/reading-wcf-configuration-from-a-custom-location.aspx)你可以找到几个例子。
2.  设计和开发自定义配置机制，并将所有配置保存在一个单独的 DLL 中，该 DLL 将在每个服务中引用并自动提供/执行所有配置内容。Juval Lowe 在他的书（上一版）中对这个主题有一点概念，不幸的是我找不到在线参考。

我知道这个问题可以结束，但如果有人一直坚持这个问题并且有解决方案或好的建议会很棒。一个问题本身可以定义为：*这两个选项中的哪一个更可取，为什么？*

如果您知道任何第三方解决方案，请提供链接。

谢谢你的帮助。

# php - PHP - FPDI - 不能写入超过一页

> ID：15435337
> 
> 赞同：0
> 
> 时间：2013-03-15T14:46:54.730
> 
> 标签：php, fpdi

问题是，我需要将数据写入同一个导入的 pdf 文件的多个副本，并将其保存为一个 pdf。我可以将数据写入一页就好了，但是当我尝试写入多个，甚至继续文本（使用`SetAutoPageBreak()`）时，一旦它到达下一页，它就会停止写入。虽然，如果我添加一个任意循环来写入更多数据，生成的 pdf 的页数会增加以容纳添加的数据，但第一个页面之外的页面仍然是空白的。我已经将我正在尝试做的事情简化为一个更小的例子来说明这个问题：

```
public function actionSample() {
    $pdf = new FPDI();
    $pdf->AcceptPageBreak();
    $pdf->SetAutoPageBreak(true, 30);
    $pagecount = $pdf->setSourceFile('images/sample.pdf');
    for ($i = 1; $i <= $pagecount; $i++) {
        $pdf->AddPage();
        $tplidx = $pdf->ImportPage($i);
        $pdf->useTemplate($tplidx, 10, 10, 200);
        $s = $pdf->getTemplatesize($tplidx);
        $pdf->SetTextColor(32,32,32);
        $pdf->SetFontSize(10);
        $pdf->SetXY($pdf->getX(), $pdf->getY()+10);
        $pdf->Write(2, 'This is not!');
    }

    $pdf->Output('Sample.pdf', 'D');
} 
```

示例文档最初有 3 个空白页。（我这样做是为了更容易看到正在写的内容）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-12T09:16:45.323

```
$pdf->AddPage(); 
```

您只需将这段代码放在右大括号附近的 for 循环中。

一切顺利..！！

# javascript - animate scrollTop 触发滚动事件

> ID：15435338
> 
> 赞同：3
> 
> 时间：2013-03-15T14:46:55.230
> 
> 标签：javascript, jquery, html, events

我有一些代码可以监听页面的滚动，它负责两件事，当“页面”发生更改时执行必要的操作（有效），但也会将 scrollTop 动画到最近的“页面”，但这样做滚动事件被触发，因此它按顺序爬过所有“页面”，直到到达文档的末尾。

如何阻止动画 scrollTop 触发滚动事件？甚至可能吗？

*“页面”*，因为这是一个 iPad html 页面，每个 1024x768 视图都是一个“页面”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:50:25.137

您可以在这篇文章中找到答案： [https ://stackoverflow.com/a/1659231/237838](https://stackoverflow.com/a/1659231/237838)

> 您可以编写自己的代码来设置动画值，并设置一个标志来指示更改来自动画。
> 
> 例如：（未测试）
> 
> ```
> var scrollAnimating = false
> jQuery.fx.step.scrollTop = function(E) {
>     scrollAnimating = true;
>     E.elem.scrollTop = E.now;
>     scrollAnimating = false;
> };
> 
> $('#gototop').click(function() {
>     $('body').animate({scrollTop:0},3000);
>     $(window).scroll(function () {
>         if (!scrollAnimating)
>             $('body').stop();
>     });
>     return false;
> }) 
> ```

# excel - 当我关闭我的 Excel 源时，将 Excel 源加载到 sql server 表问题

> ID：15435344
> 
> 赞同：0
> 
> 时间：2013-03-15T14:47:05.133
> 
> 标签：excel, ssis

当我尝试将 Excel 源数据加载到 SQL Server 表中时，它会引发以下错误……但是当我打开要加载到目标的所有源时，我的 SSIS 包已成功加载到目标。因此，如果未打开我的所有资源，则此处执行失败。你们中的任何人都可以解决我的问题吗？

> TITLE：包验证错误
> 
> 包验证错误
> 
> 附加信息：
> 
> 数据流任务 [Excel 源 [1]] 出错：SSIS 错误代码 DTS_E_CANNOTACQUIRECONNECTIONFROMCONNECTIONMANAGER。
> 
> 对连接管理器“Excel 连接管理器”的 AcquireConnection 方法调用失败，错误代码为 0xC0202009。
> 
> ;在此之前可能会发布错误消息，其中包含有关 AcquireConnection 方法调用失败原因的更多信息。数据流任务 [SSIS.Pipeline] 中的错误：
> 
> 组件“Excel Source”(1) 验证失败并返回错误代码 0xC020801C.Error at Data Flow Task [SSIS.Pipeline]：
> 
> 一个或多个组件验证失败。数据流任务出错：

任务验证期间出现错误：

> Eco P 和 L [连接管理器“Excel 连接管理器”] 出现错误：
> 
> SSIS 错误代码 DTS_E_OLEDBERROR。;
> 
> 发生 OLE DB 错误。
> 
> 错误代码：0x80004005。
> 
> OLE DB 记录可用。;
> 
> 来源：“Microsoft JET 数据库引擎”；
> 
> 结果：0x80004005；
> 
> 描述：“无法解密文件。”。
> 
> (Microsoft.DataTransformationServices.VsIntegration)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T18:11:30.003

我也遇到了这个错误。原来我的excel文件受到保护。如果我转到“审阅”选项卡并单击“取消保护工作表”，那么我可以导入 excel 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-25T17:22:56.047

从错误快照中可以清楚地看出文件已加密或`delay validation =false`.

所以请确保 excel 文件不应该被加密和设置`Delay Validation= True`。

我想你不会再发现这个错误了。

# html - CSS页脚问题

> ID：15435345
> 
> 赞同：0
> 
> 时间：2013-03-15T14:47:05.067
> 
> 标签：html, css

您知道有时当您的内容不足时，页脚就位于内容下方吗？不要使用固定位置将其粘贴到底部，否则，为什么不将所有内容都放在页脚下，与页脚的背景颜色相同（如果可能，不要更改正文背景）。此外，使用 100% 作为高度，所以它是动态的。

例如：

之前： [http](http://gyazo.com/801af7d0c1c797900ca00648cc82443e) ://gyazo.com/801af7d0c1c797900ca00648cc82443e 之后： [http](http://gyazo.com/5cb8503f122107d83a01ddae2c7fbc2a) ://gyazo.com/5cb8503f122107d83a01ddae2c7fbc2a 我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:49:03.070

当没有足够的内容填充页面时，使用 CSS 粘性页脚确保页脚粘在视口底部 - [http://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:50:35.090

您可以使页面具有页脚的背景颜色，例如：

```
body { background: blue; }
div.footer { background: blue; } 
```

然后，您希望您的主要内容 div 具有良好的颜色，例如白色：

```
div.content { background: white; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:51:34.517

我通常让页面的主体在页脚下方具有您想要的颜色。然后让一个容器（宽度为 100%）具有实际的页面颜色。为了避免“闪烁”或黑页（取决于颜色），我将其添加到容器中：

```
#container {
background-color: white; /* Page color */
min-height: 600px;
overflow:auto;
} 
```

# mysql - 将mysql列合并到行

> ID：15435346
> 
> 赞同：1
> 
> 时间：2013-03-15T14:47:11.177
> 
> 标签：mysql, sql, merge

我有一个具有以下结构的表：

```
+-----+------------+------------+------------+------------+
| ID  |  FEATURE1  |  FEATURE2  |  FEATURE3  |  FEATURE4  |
+-----+------------+------------+------------+------------+
|  1  |  red       |  blue      |  black     |  grey      |
|  2  |  yellow    |            |            |            |
|  3  |  orange    |  red       |  green     |  golden    |
|  4  |  orange    |  grey      |  blue      |            | 
```

我想做的是查询表并返回所有可能的功能以在自动完成调用中使用。我需要查询只返回唯一值。

```
SELECT (FEATURE1, FEATURE2, FEATURE3, FEATURE4, FEATURE5) FEATURE
FROM products
WHERE `FEATURE` LIKE 'gr%\' 
```

我想要的输出是：

```
+----------+
| FEATURE  |
+----------+
|  green   |
|  grey    | 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:48:27.910

基本上，您可以使用`UNION`将所有列组合在一行中。

```
SELECT  * 
FROM
(
    SELECT FEATURE1 FEATURE FROM TableName
    UNION
    SELECT FEATURE2 FEATURE FROM TableName
    UNION
    SELECT FEATURE3 FEATURE FROM TableName
    UNION
    SELECT FEATURE4 FEATURE FROM TableName
) sub
WHERE   FEATURE LIKE 'gr%' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/2653a/1)

# javascript - 删除按钮上的确认对话框

> ID：15435356
> 
> 赞同：19
> 
> 时间：2013-03-15T14:47:47.447
> 
> 标签：javascript, html, angularjs

我正在使用 Angular 开发一个应用程序。

我目前有一个删除按钮，上面附有确认信息`onClick()`

```
<a class="delete button" href="#" onClick="return confirm('Are you absolutely sure you want to delete?')" ng-click="remove_user(user, $event)" ></a> 
```

问题是当确认弹出时，“确定”和“取消”都删除了该项目，我错过了什么让“取消”简单地取消？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-15T15:01:26.853

也许只是使用角度点击处理程序并执行确认逻辑值得一试。

```
function FooController($scope, $window) {
  $scope.removeUser = function() {
    var deleteUser = $window.confirm('Are you absolutely sure you want to delete?');

    if (deleteUser) {
      $window.alert('Going to delete the user');
    }
  }
} 
```

```
function FooController($scope, $window) {
  $scope.removeUser = function() {
    var deleteUser = $window.confirm('Are you absolutely sure you want to delete?');

    if (deleteUser) {
      $window.alert('Going to delete the user');
    }
  }
}
```

```
body {
  padding: 0;
  margin: 0;
  background: #3FA8C6;
  background-image: -moz-linear-gradient(top, #3fa8c6 0%, #3fa8c6 0%, #399ab2 100%);
  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #3fa8c6), color-stop(0%, #3fa8c6), color-stop(100%, #399ab2));
  background-image: -webkit-linear-gradient(top, #3fa8c6 0%, #3fa8c6 0%, #399ab2 100%);
  background-image: -o-linear-gradient(top, #3fa8c6 0%, #3fa8c6 0%, #399ab2 100%);
  background-image: -ms-linear-gradient(top, #3fa8c6 0%, #3fa8c6 0%, #399ab2 100%);
  background-image: linear-gradient(to bottom, #3fa8c6 0%, #3fa8c6 0%, #399ab2 100%);
  color: #fff;
  font-family: 'Doppio One', sans-serif;
  text-shadow: 0 1px 0 rgba(0, 0, 0, .3);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
}
.wrapper {
  width: 50%;
  margin: 0 auto;
}
h1,
h2,
h3,
h4,
h5,
h6 {
  letter-spacing: -0.03em;
  font-size: 2em;
}
a {
  border-bottom: 1px solid #fff;
  border-bottom: 1px solid rgba(255, 255, 255, 0.7);
  padding-bottom: 0.15em;
  position: relative;
  color: white;
  text-decoration: none;
}
a:after {
  content: '';
  position: absolute;
  height: 1px;
  left: 0;
  right: 0;
  bottom: -2px;
  background: rgba(0, 0, 0, .1);
}
a:hover {
  color: #C0E3EC;
}
h1 {
  margin: 0.667em 0 0;
  padding-left: 0.5em;
  text-align: left;
}
h2 {
  font-size: 1.5em;
}
small {
  margin-top: 1em;
  display: block;
  font-style: italic;
  font-size: 0.667em;
}
p em {
  font-style: none;
}
#welcome {
  position: relative;
  overflow: hidden;
  padding-bottom: 1em;
  padding-left: 20px;
}
#welcome > div {
  padding-top: 1px;
}
#dave {
  float: left;
  margin-top: 3em
}
#welcome > h2 {
  margin-top: 0.5em;
  padding-left: 0.5em;
  margin-bottom: 0;
}
.bubble p {
  line-height: 22px;
}
.bubble {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.1);
  padding: 0.667em 1em;
  position: relative;
}
.bubble:after {
  content: "";
  position: absolute;
  width: 0;
  height: 0;
  border-top: 20px solid transparent;
  border-bottom: 20px solid transparent;
  border-right: 20px solid white;
  border-right-color: inherit;
  top: 50px;
  left: -20px;
}
#features {
  margin: 0.444em 0 0;
  clear: both;
}
#features > h2 {
  margin: 0;
}
#features ol {
  position: relative;
  padding: 1em 0 1.5em;
  background: rgba(0, 0, 0, .1);
  border-color: rgba(0, 0, 0, .1);
  margin: 0;
  overflow: hidden;
  list-style: none;
  counter-reset: item;
}
#features li {
  width: 30%;
  padding: 0 1.5%;
  float: left;
  text-align: center;
  margin-bottom: 1em;
}
#features li h2 {
  display: block;
  padding: 1em;
  margin: 0.667em auto 1em;
  font-size: 1em;
  line-height: 1em;
  text-align: center;
  background: rgba(0, 0, 0, .1);
  border-radius: 2em;
  box-shadow: inset 0 0 1em rgba(0, 0, 0, .1), 0 2px 2px rgba(255, 255, 255, .1);
}
#next > div {
  width: 45%;
  float: left;
  padding: 0 2.5%;
}
img {
  z-index: 1;
  -webkit-transition: -webkit-transform 2s ease-in-out;
  -moz-transition: -moz-transform 2s ease-in-out;
  -o-transition: -o-transform 2s ease-in-out;
  -ms-transition: -ms-transform 2s ease-in-out;
  transition: transform 2s ease-in-out;
  position: relative;
}
img:active {
  -webkit-transform: rotate(1440deg) scale(1.2);
  -moz-transform: rotate(1440deg) scale(1.2);
  -o-transform: rotate(1440deg) scale(1.2);
  -ms-transform: rotate(1440deg) scale(1.2);
  transform: rotate(1440deg) scale(1.2);
}
@media screen and (max-width: 1200px) {
  .wrapper {
    width: 80%;
  }
}
@media screen and (max-width: 768px) {
  .wrapper {
    width: auto;
    margin: 0;
  }
  #welcome {
    margin-right: 2.5%;
  }
}
@media screen and (max-width: 500px) {
  .wrapper {
    text-align: center;
  }
  #dave {
    float: none;
  }
  #welcome {
    padding: 0 1.5em;
    margin: 0;
  }
  h1 {
    text-align: center;
    margin-bottom: 0;
    padding-left: 0;
    font-size: 1.8em;
  }
  #welcome > h2 {
    margin-bottom: 0.667em;
  }
  .bubble {
    text-align: center;
  }
  .bubble:after {
    display: none;
  }
  #features li {
    width: 47%;
  }
  #features li:last-child {
    float: none;
    clear: both;
    margin: 0 auto;
  }
  #next > div {
    float none;
    width: auto;
  }
}
```

```
<html ng-app ng-controller="FooController">

<body>
  <a class="delete button" href="#" ng-click="removeUser(user, $event)">Delete</a> 

  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.min.js"></script>
</body>
</html>
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-05-20T23:12:00.143

这有点晚了，但对于未来的读者来说，就像 15 分钟前的我一样：

“**角度方式**”将按照[此处的建议](https://gist.github.com/pdgago/9569037)创建一个指令：

```
'use strict';

angular.module('confirm', [])
    .directive('confirm', [function () {
        return {
            priority: 100,
            restrict: 'A',
            link: {
                pre: function (scope, element, attrs) {
                    var msg = attrs.confirm || "Are you sure?";

                    element.bind('click', function (event) {
                        if (!confirm(msg)) {
                            event.stopImmediatePropagation();
                            event.preventDefault;
                        }
                    });
                }
            }
        };
    }]); 
```

* * *

**用法：**

```
<button ng-click="save()" confirm="Save Changes?">Save</button> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-20T18:21:01.853

如果您将引导程序用于*UI*，我建议您使用[angular-dialog-service](https://github.com/m-e-conroy/angular-dialog-service)。包含模块依赖项后，您可以像这样确认它。

```
function FooController($scope, $dialogs)
{
  $scope.removeUser = function() {
    var dlg = dialogs.confirm('Please Confirm', 'Are you absolutely sure you want to delete?');
    dlg.result.then(function () {
      console.log("User has confirmed");//do something when user confirms
    },function(){
      console.log("User has cancelled");//do something when user cancels. Can omit the 2nd function if no handling is required
    });
  }
} 
```

有关更多详细信息，请参阅[此示例](http://codepen.io/m-e-conroy/pen/ALsdF)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-12T07:19:04.237

它可能对其他人有帮助

HTML 代码示例

```
<button confirmed-click="removeRowIndex(col, row)" 
        ng-confirm-box-click="Are you sure want to delete?" 
        class="btn btn-xs btn-default"/> 
```

AngularJs 代码示例

```
app.directive('ngConfirmBoxClick', [

      function () {
          return {
              link: function (scope, element, attr) {
                  var msg = attr.ngConfirmBoxClick;
                  var clickAction = attr.confirmedClick;
                  element.bind('click', function (event) {
                      if (window.confirm(msg)) {
                          scope.$eval(clickAction)
                      }
                  });
              }
          };
      }
]); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-20T09:36:34.880

只需替换下面的 onclick 方法即可。

```
onclick="javascript:return confirm('Are you absolutely sure you want to delete?')" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-20T08:59:29.340

好吧，我会创建一个函数来勾选一个全局变量并在提交时检查它

```
<form onsubmit='check_delete()'
<input type='submit' onclick='set_delete()' 
```

Javascript

```
 function set_delete(){delete_flag = 1 ;} // this is a global var set by default to 0
 function check_delete(){if(delete_flag == 1) confirm(''sure?);} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-15T14:55:14.660

```
<a class="delete button" href="#" onClick="return false" ng-click="if(confirm('Are you absolutely sure you want to delete?')){remove_user(user, $event);}" ></a> 
```

尝试这个？我认为这与您停止默认的“onclick”侦听器但不影响“ng-click”侦听器的事实有关。相反，我将确认逻辑移动到“ng-click”侦听器和“return false”onclick 中，因为您不希望链接将您带走。

# jsp - 使用隐藏字段在 jsp 页面之间传递 rs.getString 值

> ID：15435358
> 
> 赞同：0
> 
> 时间：2013-03-15T14:47:52.920
> 
> 标签：jsp

我想使用隐藏字段将 rs.getString 值从 1st.jsp 传递到 2nd.jsp

```
 <input type="hidden" value="<%=rs.getString(1)%>" name="h"> 
```

并在 2nd.jsp String s=request.getParameter("h");

并打印字符串，但它打印 null

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:08:36.050

检查这是表单标签内的隐藏字段吗？确保您必须设置 input type=" **submit** " 并确保表单操作与您的 @WebServlet 定义是否匹配。

# .net - msdn 中有两个版本的 RichTextBox。为什么存在两个版本？

> ID：15435361
> 
> 赞同：0
> 
> 时间：2013-03-15T14:48:05.647
> 
> 标签：.net, c++-cli, msdn

msdn (.NET Framework 4.5.) 中有两个版本的 RichTextBox。为什么存在两个版本？它们都有不同的属性。例如看

```
AcceptsReturn. 
```

我不知道什么是正确的版本。

[富文本框 msdn1](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.aspx)

[富文本框 msdn2](http://msdn.microsoft.com/en-us/library/ms612650.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:49:40.513

这很简单：

*   [`System.Windows.Forms.RichTextBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.aspx)适用于 Windows 窗体应用程序
*   [`System.Windows.Controls.RichTextBox`](http://msdn.microsoft.com/en-us/library/ms612650.aspx)适用于 WPF 应用程序（和 Silverlight）

它们是两个独立的 GUI 框架，具有不同的控件集。

> 我不知道什么是正确的版本。

那么您是在构建 Windows 窗体应用程序还是 WPF 应用程序？

# maven - 在我的 mojo 中获取 maven 插件安装位置

> ID：15435362
> 
> 赞同：1
> 
> 时间：2013-03-15T14:48:08.053
> 
> 标签：maven

我有一个 mojo maven 插件。如果是（在构建期间），我需要捕获项目 jar 的安装路径（在本地存储库中）。目前我只在我的 mojo 中使用 MavenProject 并从那里获取所有需要的信息。虽然无法从那里找到安装位置。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:03:19.197

maven-install-plugin 正在使用此方法解析安装路径：

```
 org.apache.maven.artifact.repository.ArtifactRepository.pathOf(Artifact artifact) 
```

所以我想你也必须调用它，可能是这样的：

```
String artifactPath = localRepository.pathOf(mavenProject.getArtifact()); 
```

**编辑**

以下是如何获取对本地存储库的引用：

```
/**@parameter default-value="${localRepository}" */
private org.apache.maven.artifact.repository.ArtifactRepository localRepository; 
```

从[这个来源](http://docs.codehaus.org/display/MAVENUSER/Mojo+Developer+Cookbook#MojoDeveloperCookbook-Foraccessingartifactsandrepositories)

# asp.net-mvc - VS2012 Enable NuGet Package Restore 消失，不见了

> ID：15435366
> 
> 赞同：29
> 
> 时间：2013-03-15T14:48:15.750
> 
> 标签：asp.net-mvc, visual-studio-2012, nuget, restore

我有两个项目，一个是类库，一个是 mvc3 项目。他们都有与之关联的nuget包。在类库上，当我右键单击解决方案时，我得到“启用 NuGet 包还原”选项

![在此处输入图像描述](../Images/7feb05058d9ac6d75f78fedb6346e645.png)

在 MVC 中，我没有。

![在此处输入图像描述](../Images/6e4da70adad10b217f15abc166082fd4.png)

不用说我想要这两个项目的功能。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-15T15:34:42.400

当扩展检测到包含执行包还原所需的 nuget.exe、nuget.config 和 nuget.targets 的 $(SolutionDir).nuget 文件夹时，NuGet 包还原上下文菜单项将隐藏。

MVC 应用程序已经有这些，所以应该启用恢复。如果没有，只需删除 .nuget 文件夹，您就会看到菜单项重新出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-17T08:53:38.860

对我来说，这很简单：

“管理解决方案的 NuGet 包”->“还原”（对话框右上角）

# javascript - 拖动 HTML 时防止自动滚动

> ID：15435375
> 
> 赞同：2
> 
> 时间：2013-03-15T14:48:38.520
> 
> 标签：javascript, css, scroll, raphael, drag

我正在使用 raphael 在屏幕上绘制项目。我有包含在 a`div`和中的绘图对象的容器`overflow: scroll`。在**除**IE 7/8 之外的所有浏览器中，当用户绘制它时，它不会滚动。但是，在 IE 7/8 中，当用户拖动（即绘制一条线）时，它会在用户靠近边缘时自动滚动。我找到了一些关于 jQuery 的帮助，并尝试覆盖`onscroll`div 的事件，但没有奏效。

我没有使用 jQuery，无法添加它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:57:17.947

有时滚动是由窗口中的“选择”文本引起的（在此 SO 页面上单击并从上到下拖动以了解我的意思）。[如果没有看到jsFiddle](http://jsfiddle.net)示例或示例代码，我无法从您的描述中判断这是否是问题，但您可以尝试禁用选择。

正如您提到的，jQuery 不是您的选择。如果是，您只需使用[`disableSelection()`](http://api.jqueryui.com/disableSelection/).

**对于 vanilla Javascript 解决方案，请尝试：**

```
function disableSelection(target) {
    if (typeof target.onselectstart != "undefined") { //IE
        target.onselectstart = function () {
            return false;
        };
    } else if (typeof target.style.MozUserSelect != "undefined") { //Firefox 
        target.style.MozUserSelect = "none";
    } else { //All other ie: Opera
        target.onmousedown = function () {
            return false;
        };
    }
    target.style.cursor = "default";
}

window.onload = function () {
    disableSelection(document.body);
}; 
```

*来源（为清楚起见稍作修改）：[使用 Javascript 在浏览器上禁用选择](http://www.thedesilva.com/2010/03/disable-selection-on-browser-using-javascript/)*

# ssh - 如何通过 ssh 执行 Mathematica 脚本

> ID：15435378
> 
> 赞同：1
> 
> 时间：2013-03-15T14:48:53.310
> 
> 标签：ssh, wolfram-mathematica

这是我的问题：我想在远程计算机上通过 ssh 运行 Mathematica 脚本，这样我就可以关闭计算机上的终端并使其在远程计算机上运行。

我的问题出现了，因为脚本在交互模式下运行，所以当我关闭终端时，进程也被关闭。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:18:13.020

使用[tmux](http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&sektion=1)或[GNU screen](http://www.gnu.org/software/screen/manual/screen.html)。

工作流程：

*   ssh 进入远程机器
*   启动 tmux/screen，例如`tmux`或`screen`
*   在 tmux/screen 会话中启动 Mathematica 脚本
*   分离 tmux/screen 会话，例如`Ctrl+B` `d`(tmux) 或`Ctrl+A` `d`(screen)
*   关闭 ssh 连接

然后后来：

*   ssh 进入远程机器
*   重新附加到 tmux/screen 会话，例如`tmux attach`或`screen -d -R`
*   查看完成的 Mathematica 脚本输出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:28:14.893

几种情况：

*   如果您不需要与其交互或需要在评估期间可视化笔记本

    1.  用ssh登录机器
    2.  然后，要在后台运行内核并将其与当前会话分离，请使用`nohup`工具（命令的标准输出将转储到 myNotebook.out）：

        ```
        nohup math < myNotebook.nb > myNotebook.out & 
        ```

    3.  至此，可以在不杀掉 Mathematica 的情况下关闭 ssh 会话
    4.  或者，您可以使用命令监视`math`命令输出`tail`（使用 CTRL-C 退出`tail`监视）

        ```
        tail -f myNotebook.out 
        ```

*   如果您需要查看正在发生的事情、在计算过程中可视化图表或能够以图形方式进行交互，请使用远程桌面 (vnc) 并通过隧道与远程计算机进行通信。细节取决于 Linux 发行版（vnc 客户端和服务器可能不同）。您甚至可以从 Windows 或 Mac 将远程桌面连接到您的 linux 机器并对其进行操作。我建议您在网上搜索`remote desktop` `ssh tunnel`+ 您的发行版以获取教程。

# excel - 在跨多个工作表的多个表上使用单个宏

> ID：15435380
> 
> 赞同：1
> 
> 时间：2013-03-15T14:48:55.517
> 
> 标签：excel, vba

我有一本分成一页=一年中的一个月的工作簿。在每张纸上都有一个表格，上面有各种条件格式。从那里我过滤信息的几种方式来获取某些信息，（未结余额，等待调度的项目等）

我正在尝试设置一些简单的宏来加快过滤速度，例如仅显示来自特定公司的已发送但未付款的订单。

我的问题是，宏只适用于我创建它的工作表/表格，是否可以改写 vb 代码以使宏在我的工作簿的所有工作表/表格中工作？

这是其中一个宏的示例，抱歉，如果此论坛上有插入代码的协议，请恕我无知。

```
Sub HSWC_only()
'
' HSWC_only Macro
' leaves only hi-spec jobs
'
' Keyboard Shortcut: Ctrl+m
'
    ActiveSheet.ListObjects("Table25").Range.AutoFilter Field:=3, Criteria1:= _
        "=HSWC*", Operator:=xlAnd
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:57:53.610

看起来您的宏应该这样做，因为它引用了`ActiveSheet`，因此它应该适用于您当前所在的任何工作表。

如果不是，那是因为`ListObjects("Table25").Range`参考 - 您可能希望将其更改为类似于以下内容的内容`UsedRange`

您的代码看起来类似于：

```
ActiveSheet.UsedRange.AutoFilter Field:=3, Criteria1:= _
    "=HSWC*", Operator:=xlAnd 
```

在没有看到您的工作表/布局的情况下，这是我能提供的最接近解决方案的方法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:56:00.520

您正在寻找的关键是`ActiveSheet`，这现在仅将自动过滤器应用于您在您面前看到的工作表。如果您将其更改为可以链接到每个工作表的对象，则可以按顺序将其应用于每个工作表。

现在，当您的工作表都只有一个 List 时，您可以引用第一个 ListObject 而不是其名称。

如果你把这条线放在`Loop`这样的地方：

```
Sub HSWC_only() 
'
'HSWC_only Macro 
' leaves only hi-spec jobs 
'
' Keyboard Shortcut: Ctrl+m
'
    Dim ws as Worksheet

    For each ws in ThisWorkbook.Worksheets
        ws.ListObjects(1).Range.AutoFilter Field:=3, Criteria1:= _ 
            "=HSWC*", Operator:=xlAnd 
    Next ws
End Sub 
```

# perl - Perl 中的 Unix 命令？

> ID：15435382
> 
> 赞同：1
> 
> 时间：2013-03-15T14:48:57.790
> 
> 标签：perl, unix

我对 Perl 很陌生，我想制作一个程序来创建一个目录并使用 Unix 命令将文件移动到该目录中，例如：

```
mkdir test 
```

我知道会创建一个名为“test”的目录。从那里我想提供更多选择，例如：

```
mv *.jpg test 
```

这会将所有 .jpg 文件移动到我的新目录中。

到目前为止，我有这个：

```
#!/usr/bin/perl

print "Folder Name:";
$fileName = <STDIN>;
chomp($fileType);

$result=`mkdir $fileName`;
print"Your folder was created \n"; 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:52:57.737

尝试这样做：

```
#!/usr/bin/perl

use strict; use warnings;

print "Folder Name:";
$dirName = <STDIN>;
chomp($dirName);

mkdir($dirName) && print "Your folder was created \n";
rename $_, "$dirName/$_" for <*.jpg>; 
```

使用内置`perl`函数比使用 Unix 命令有更好的控制。这就是我的片段的重点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:54:05.533

大多数（如果不是全部）Unix 命令都有相应的版本作为函数

例如

mkdir - 见[这里](http://perldoc.perl.org/functions/mkdir.html)

mv - 看[这里](http://perldoc.perl.org/functions/rename.html)

等等。要么从各种手册页中打印出来（或者可能去书店一趟——O'Reilly 坚果壳书和其他书都很好）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:54:54.270

在 perl 中，您可以在反引号中使用 bash 命令。但是，当目录不是由 mkdir 命令创建时会发生什么？您的程序没有收到通知，并继续以愉快的方式认为一切都很好。

您应该在 perl 中使用内置命令来做同样的事情。

*   [http://perldoc.perl.org/functions/mkdir.html](http://perldoc.perl.org/functions/mkdir.html)
*   [http://perldoc.perl.org/functions/rename.html](http://perldoc.perl.org/functions/rename.html)

使用这些函数捕获错误并优雅地失败要容易得多。此外，它们运行得更快，因为您不必为每个运行的命令创建一个新进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T14:56:22.520

Perl 有一些类似于 shell 的功能。你可以使用

```
mkdir $filename; 
```

您可以使用反引号来运行 shell 命令，但仅当命令将任何内容返回到其标准输出时才有用，而标准输出`mkdir`则没有。对于没有输出的命令，使用`system`：

```
0 == system "mv *.jpg $folder" or die "Cannot move: $?"; 
```

# wpf - Image.Height TemplateBinding 不起作用

> ID：15435385
> 
> 赞同：1
> 
> 时间：2013-03-15T14:49:04.213
> 
> 标签：wpf, wpf-controls, custom-controls, dependency-properties

我已经创建了一个从 WPF 中的 Button 类实现的 CustomControl。

```
public class ImageButton : Button
{
      ...

       public int ImageHeight
       {
           get { return (int)GetValue(ImageHeightProperty); }
           set { SetValue(ImageHeightProperty, value); }
       }
       public static readonly DependencyProperty ImageHeightProperty =
           DependencyProperty.Register("ImageHeight", typeof(int), typeof(ImageButton), new UIPropertyMetadata(32)); 

       ...
} 
```

我有这样的资源模板：

```
<Setter Property="Template">
   <Setter.Value>
     <ControlTemplate TargetType="{x:Type custom:ImageButton}">
       <Border>
         <StackPanel>
          <Image Name="image" Height="{TemplateBinding ImageHeight}"/>
          <TextBlock Text="{TemplateBinding Text}" />
         </StackPanel>
       </Border>
     <ControlTemplate.Triggers>
   </ControlTemplate>
 </Setter.Value> 
```

ImageHeight 依赖属性不绑定。当我像下面这样写时，它会成功。

```
Height="32" 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:08:28.777

您是否尝试`{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Progress}`改用？

有关更多详细信息，请参阅这些答案...

[WPF TemplateBinding 与 RelativeSource TemplatedParent](https://stackoverflow.com/questions/1131222/wpf-templatebinding-vs-relativesource-templatedparent)

[将自定义依赖属性绑定到自定义 WPF 样式](https://stackoverflow.com/questions/973372/binding-custom-dependency-property-to-custom-wpf-style)

希望这可以帮助

# matlab - 如何在matlab中做这个对角矩阵？

> ID：15435386
> 
> 赞同：1
> 
> 时间：2013-03-15T14:49:12.183
> 
> 标签：matlab, matrix, diagonal

你能帮我处理这种类型的对角矩阵吗？

```
 |      1| 
  |     1 |
  |    1  |
I=|   1   |
  |  1    |
  | 1     |
  |1      | 
```

我不知道如何在Matlab中做到这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T14:51:49.327

您可以使用

```
fliplr(eye(7)) 
```

这导致

```
ans =

     0     0     0     0     1
     0     0     0     1     0
     0     0     1     0     0
     0     1     0     0     0
     1     0     0     0     0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T14:55:29.550

更多选项（为了完整起见）：

```
rot90(eye(7))

flipud(eye(7)) 
```

# php - 链接到 localhost 中的 css 在多个页面中丢失

> ID：15435387
> 
> 赞同：0
> 
> 时间：2013-03-15T14:49:13.123
> 
> 标签：php, css, xampp, localhost

我最近刚刚安装了 XAMPP，并一直试图让我以前在线托管的网站在其中工作。

一切都好，直到我浏览我的 baseurl。让事情变得更复杂一些，我一直是使用 jquery-mobile 的页面，所以所有内容都是通过 AJAX 获取的。

baseurl = 127.0.0.1/mobilebrowsergame/

当我在此页面上刷新（开始）时，一切正常，因为它使用 CSS 文件的默认根目录。

但是，如果我在更深的页面上开始/刷新，即。

127.0.0.1/mobilebrowsergame/structure/1

css显然不起作用。

我最初包括`<?php echo base_url() ?>css/stylesheet.css ?>`但被迫删除 base_url() 因为它没有在 localhost 下加载。

在这一点上，我不知所措。我不知道如何在不为基础页面创建新的 CSS 的情况下解决这个问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:51:42.537

看起来您正在使用相对 URL 指向您的 CSS 文件。如果您在路径前添加`/`，它将自动从 Web 服务器根目录（在本例中为`127.0.0.1`）开始，而不是从当前目录开始。

即试试这个

```
<link rel="stylesheet" type="text/css" href="/mobilebrowsergame/css/stylesheet.css" /> 
```

# jquery - 无法用 jQuery 解析这个 JSON

> ID：15435388
> 
> 赞同：0
> 
> 时间：2013-03-15T14:49:14.543
> 
> 标签：jquery, json, jquery-1.9

我正在获取一些 JSON 数据，其中包含单行的最简单示例是：

```
{ max: [[Date.UTC(2013,1,22,13,11,13), 999.0000]] } 
```

它似乎形成良好：

```
>>> console.log({ max: [[Date.UTC(2013,1,22,13,11,13), 999.0000]] })
Object { max=[1]} 
```

不过，如果我尝试：

```
>>> $.parseJSON("{ max: [[Date.UTC(2013,1,22,13,11,13), 999.0000]] }");

SyntaxError: JSON.parse: expected property name or '}' 
```

为什么是这样？

谢谢大家，我还没有意识到 JavaScript Object Notation 和 Strict JSON 之间的区别。我把它改成这样的输出：

```
{ "max": [[1353007547000,70.0000]] } 
```

此数据的上下文是用于通过 ajax 加载一些 HighCharts 数据，但所有示例均采用上述格式，无 ajax。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T14:50:36.843

JSON 是一个严格的标准，它恰好是 Javascript 的一个子集。`Date`是它忽略的事情之一 - 如果你想要日期，你必须将它作为字符串（或 int）传输。您的代码是有效的 JavaScript，但不是有效的 JSON。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T15:04:18.253

您仍在处理***~~类似于 JSON~~***而不是真正的 JSON的***JavaScript 对象。***~~对于 .parseJSON，您需要严格的 JSON。~~

 ~~这意味着您的 Date 对象需要是一个字符串，并且您的属性名称需要用双引号括起来。

[http://jsonlint.com/](http://jsonlint.com/)之类的工具通常非常有用。

@c4p 建议首先在您的 JavaScript 对象上使用 JSON.stringify，这通常是一个很好的第一步，因为它通常会处理很多需要在解析之前进行调整的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T14:54:35.403

如果您将 Javascript 对象转储为 JSON：

```
JSON.stringify({ max: [[Date.UTC(2013,1,22,13,11,13), 999.0000]] });

"{"max":[[1361538673000,999]]}" 
```

请注意，`max`键变成了字符串`"max"`，并且`Date`被转换为时间戳。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T14:55:56.727

Date 是一个 javascript 对象，不是 JSON 的一部分。您正在尝试通过序列化表单传递 javascript 函数调用，这将不起作用。

它在控制台日志中起作用的原因是 Date.UTC 函数在调用 console.log 之前解析为一个值。看起来这个字符串很可能最初是为了传递给可以执行函数的 eval（它执行文字 javascript）而设置的，而您正试图通过使用 parseJSON（这很好！）来降低它的脆弱性。

此处的解决方案取决于您对接收的 JSON 数据的控制程度。如果您的控制为零，那么您可能会被迫使用 eval。否则，json 应该包含传递给 UTC 的参数数组（或时间戳本身），当它被解析时，您需要在结果上调用 Date.UTC 以获取您的 UTC 日期。~~

# actionscript-3 - 无法连接到 FMS

> ID：15435391
> 
> 赞同：1
> 
> 时间：2013-03-15T14:49:23.537
> 
> 标签：actionscript-3, adobe, flash-media-server, netconnection

为什么连接不上？当我运行应用程序时，我在输出中收到 NetConnection.failed。你能仔细看看我的代码吗？我相信我的字符串 url 是正确的。我不确定我的 FMS 是否已关闭或是否存在代码错误。

谢谢你

```
import flash.net.NetConnection;
import flash.events.NetStatusEvent;
import flash.net.NetStream;
import flash.media.Camera;
import flash.media.Video;
import flash.media.Microphone;
import fl.controls.Button;

var nc:NetConnection;
var ns:NetStream;
var cam:Camera;
var microphone:Microphone;
var vid:Video;
var connectButton:Button;

//Connecting to Flash Media Server
nc = new NetConnection();

nc.connect("rtmfp:/fms/streamExample");

nc.addEventListener(NetStatusEvent.NET_STATUS, netHandler);

function netHandler(event:NetStatusEvent):void
{
    switch (event.info.code)
    {
        case "NetConnection.Connect.Success":
        {
            connectButton.label = "Disconnect";
            connectButton.enabled = true;
            sendButton.enabled = true;
            onConnect();
            break;
        }

        case "NetConnection.Connect.Closed":
        {
            connectButton.label = "Connect";
            connectButton.enabled = true;
            sendButton.enabled = false;
            nc.close();
            break;
        }

        case "NetConnection.Connect.Failed":
        {
            trace("Sorry your connection failed");
            break;
        }

        case "NetConnection.Connect.Rejected":
        {
            trace("Oops the connection has been rejected");
            break;
        }
    }
}
ns = new NetStream(nc);

ns.publish("live", "viewing");

ns.attachCamera();

//Setting the video
var vid:Video = new Video();
vid.height = cam.height;
vid.width = cam.width;
vid.x = 10;
vid.y = 10;
addChild(vid);

cam = Camera.getCamera();
cam.setMode(400, 300, 20);
cam.setQuality(0, 85);
cam.setKeyFrameInterval(18);
vid.attachCamera();
addChild(cam);

//Setting the audio
microphone = Microphone.getMicrophone();
microphone.codec = SoundCodec.SPEEX;
microphone.framesPerPacket = 1;
microphone.setSilenceLevel(0, 200);
microphone.gain = 50;
NetStream.attachAudio(microphone); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:49:12.037

如果您的 Flash Media Server 与测试应用程序的计算机位于同一台计算机上，则应将服务器的 URL 更改为`rtmfp://localhost/streamExample` 如果您的服务器位于另一台计算机上，则只需替换`localhost`为运行服务器。

`NetConnection`在执行`connect()`呼叫之前，您还应该在您的上添加事件侦听器。

为了帮助您了解失败的原因，您可能还需要跟踪事件的描述。

这是一个包含所有这些迹象的样本：

```
nc = new NetConnection();
nc.addEventListener(NetStatusEvent.NET_STATUS, netHandler);
nc.connect("rtmfp:/localhost/streamExample");

function netHandler(event:NetStatusEvent):void
{
    switch (event.info.code)
    {
        case "NetConnection.Connect.Success":
        {
            connectButton.label = "Disconnect";
            connectButton.enabled = true;
            sendButton.enabled = true;
            onConnect();
            break;
        }
        case "NetConnection.Connect.Closed":
        {
            connectButton.label = "Connect";
            connectButton.enabled = true;
            sendButton.enabled = false;
            nc.close();
            break;
        }
        case "NetConnection.Connect.Failed":
        {
            trace("Sorry your connection failed");
            trace("Reason is: " + event.info.description);
            break;
        }
        case "NetConnection.Connect.Rejected":
        {
            trace("Oops the connection has been rejected");
            break;
        }
    }
} 
```

# java - 如何遍历一个面向层次的结构？

> ID：15435392
> 
> 赞同：0
> 
> 时间：2013-03-15T14:49:24.800
> 
> 标签：java, xml, traversal

我有一个线性数据结构，其中每个节点都有一个级别。父节点的级别为 1，父节点的子节点的级别为 2，子节点的子节点的节点为 3，另一个父节点的级别为 1。例如下面

```
<node level=1> //parent node
<node level=2> //child of encountered parent node
<node level=2> //child of encountered parent node
<node level=3> //child of encountered child node
<node level=2> //child of encountered parent node
<node level=1> //parent node
<node level=1> //parent node
<node level=2> //child of encountered parent node
<node level=3> //child of encountered child node
<node level=4> //child of encountered child node
<node level=1> //parent node 
```

本质上我正在尝试建立一个列表。（对其他建议开放），使得列表中的每个元素都是一个父节点，每个父节点都有子节点列表，每个子节点可以有子节点列表等。每个元素都是一个节点和所有属性是一样的。

我已经通过跟踪当前级别尝试了代码，但是我不确定如何正确地将具有子节点的子节点添加回第一个子节点的父节点。我觉得这可能最好通过递归来处理，但我从来没有能够以有序的方式真正实现递归。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:07:19.673

你不必考虑所有的嵌套。你只需要考虑你在哪里（例如，节点列表中的上一个条目是什么级别）以及下一个条目在哪里。

在这种情况下，解决方案在于读取树的方式。请注意，在作为树输入源的节点列表中，紧跟在父节点之后，下一个节点是子节点。如果某个节点之后的节点不是该节点的子节点（即，如果它的级别不是低一级），则它是前一个节点的祖先之一的子节点。

所以：

1.  如果第 n 行的级别等于 1 加上第 n-1 行的级别，则第 n 行包含第 n-1 行的子节点。
2.  否则，从第 n-1 行的节点向上走，直到找到一个比第 n 行的级别低一级的节点。该祖先节点是第 n 行节点的父节点。

您也不必递归地执行此操作。

```
currLevel = 0;
currNode = root;
do {
   node = read();
   if (somethingRead()) {
      // If this one is one level below the last one, it goes in as a child and we're done
      if (node.level == currNode.level + 1) {
         currNode.addChild(node);
         currNode = node;
      } else {
         // Otherwise this one has to be at a level above this node's child, so back up
         while (node.level >= currNode.level) {
            currNode = currNode.parent(); // check for root left out here ...
         }
         if (node.level == currNode.level + 1) {
            currNode.addChild(node);
            currNode = node;
         } else {
            // handle illegal condition in list
         }
      }
   }
} while (moreNodesToRead()); 
```

**对您的解决方案的回应**

您的解决方案反映了您不愿意使用假节点作为树的根。这是一个可以做出的设计选择。这是我的版本。

我有点担心您如何处理被弄乱的传入数据

1.  呈现的节点比其前一层多一层。
2.  显示的第一个节点不在级别 1。
3.  节点的级别为 0 或更低（不检查以下内容）

另外，我建议您允许`currNode`在`null`当前节点应该是根时。从理论上讲，它可能发生在`while`备份当前节点的循环中，但请注意，在代码中的这一点上，您已经知道新节点的级别高于 1，因此`currNode`永远不应备份超过级别 1 的节点。如果该假设是错误的，让它生成 NPE 是合理的。

我建议进行以下更改：

```
Node currNode = null;
List<Root> roots = new ArrayList<Root>();

do {
      Node node = generateNode(nodesList.next());
      if (node.getLevel() == 1) { //implies root level node
         roots.add(node);
         currNode = node;
      } else if (currNode == null) {
         // ... handle misformed input ... first node isn't level 1, ignore it
      } else if (node.getLevel() == currNode.getLevel() + 1) {
         currNode.childrenList.addChild(node);
         node.setParent(currNode);
         currNode = node;
      } else {
         Node savedCurrNode = currNode;
         while (node.getLevel() <= currNode.getLevel()) {
             currNode = currNode.getParent();
         }
         if (node.getLevel() == currNode.getLevel() + 1) {
             currNode.childrenList.addChild(node);
             node.setParent(currNode);
             currNode = node;
         } else {
             // ... handle misformed input ... node level > last node level + 1, ignore it
             currNode = savedCurrNode;
         }

} while (hasMoreNodes(nodesList)); 
```

**印刷**

我对其进行了一些重新排列并更改了一些名称和职责（在评论中列出）。只是从上面详细说明一点，如果根只是一个节点，则根本不需要'printRoots（）'方法。只需在级别设置为 0 的假根节点上调用“printChildren()”即可。但它会在顶部多打印一行。

（如果您缩进输出，它总是更容易阅读。）

警告：未经测试。

```
/** Print all the root nodes, each with any children it may have */
private void printRoots(List<Node> roots) {

    for (int j = 0; j < roots.size(); j++) {
        Node node = roots.get(j);
        printContents(node, 1);
    }

}

/** Print one node and any children it might have */
private void printContents(Node node, int level) {

    for (int i=1 ; i < level ; ++i) {
        print("    ");
    }
    print(node.toString());
    println();

    printChildren(node, level+1);

}

/** Print each child of the supplied node. Notice how this is just like getting the
 * list of children and calling 'printRoots()'
 *//
private void printChildren(Node node, int level) {

    for (int i = 0; i < node.getChildrenList().size(); i++) {
        Node childNode = node.getChildrenList().get(i);
        printContents(childNode, level);
    }

} 
```

# ruby-on-rails - Carrierwave - 处理后的图像尺寸太大

> ID：15435395
> 
> 赞同：2
> 
> 时间：2013-03-15T14:49:32.090
> 
> 标签：ruby-on-rails, carrierwave

我有一个 Carrierwave 上传器并像这样处理图像：

```
version :thumbnail do
    process :resize_to_model
    process :quality => 90   
end

def resize_to_model
  thumbs_size = model.thumbnail_size
  resize_to_fill thumbs_size[:width], thumbs_size[:height]
end 
```

然而，在处理了一个 1024x724px 和 214x151px 的图像之后，文件大小仅从 2.1mb 下降到 1.8mb。我认为 1,8mb 对于这种大小来说确实很多。我能做点什么吗？即使有 90% 的质量，图像也应该是 100kb 左右？

在有人问之前，其余的工作完美。没有错误，以 px 为单位的大小是正确的，其他一切也都很好。

编辑：我忘了提到我使用 rmagick(resize_to_fill)。这可能是一个原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:02:49.840

100% 和 90% 质量之间的差异是如此之小，节省的存储空间可以忽略不计。如果您真的只是将此版本用作缩略图，您应该考虑使用低得多的质量，例如 60% 或 40%。

如果您担心确保质量仍然“足够好”，那么您还可以查看不同的压缩技术。在这种情况下，可以使用为 Retina 显示器提供 @2x 图像的过程。[Filament Group 的文章Compressive Images](http://filamentgroup.com/lab/rwd_img_compression/)中提供了一个很好的资源。

tl;dr 版本基本上是使用图像的原始（或接近原始）尺寸，但大幅降低图像质量（至 0-20%）。然后，当使用降低质量的图像时，请务必在元素中提供`width`和`height`属性以将`<img>`其调整为缩略图大小。因为图像将按比例缩小，所以您不会看到“缩略图”图像质量的降低。

# c# - C# 中的动态语法

> ID：15435401
> 
> 赞同：20
> 
> 时间：2013-03-15T14:49:53.987
> 
> 标签：c#

最近，我遇到了使用如下语法的 C# 示例：

```
var result = new { prop1 = "hello", prop2 = "world", prop3 = "." }; 
```

我很喜欢。它看起来有点像 JSON。但是，我不知道这种语法叫什么。出于这个原因，我不确定如何进一步了解它。我真的很想弄清楚如何在结果中定义对象数组。例如，如果我想为 prop3 返回一个项目数组怎么办？那会是什么样子？这种语法叫什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-15T14:50:52.560

这在 C# 中称为[匿名类型。](http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx)

要返回一个数组，您可以简单地内联它：

```
var result = new { prop1 = "hello", prop2 = "world", prop3 = new int[] {1,2,3} }; 
```

或者事先声明并使用它：

```
int[] array = new int[] {1,2,3};
var result = new { prop1 = "hello", prop2 = "world", prop3 = array}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T14:51:45.770

它被称为[匿名类型](http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx)。要返回 prop3 中的对象数组，您可以编写

```
var result = new { prop1 = "hello", prop2 = "world", prop3 = new[] { "h", "e", "l", "l", "o" } }; 
```

我正在使用字符串，但对于任何类型的对象都是相同的：

```
var result = new { prop1 = "hello", prop2 = "world", prop3 = new[] { new YourType(), new YourType(), new YourType() } }; 
```

请注意，数组中对象的类型在数组的声明中不是必需的；你不需要写`new YourType[]`，编译器不需要它，而且 IMO 简单地使用它更干净`new[]`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T14:58:20.530

这里有几个新功能：

1.  [对象初始化器](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx)- 让您在不先构造对象的情况下设置对象的属性。

2.  [隐式类型变量](http://msdn.microsoft.com/en-us/library/bb384061.aspx)- 使用关键字`var`将让编译器确定对象是什么类型。

你可以结合这些特性来形成一个[匿名类型](http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx)。由于您不必在编译时声明或构造类型，因此您可以声明此对象，编译器将生成适当的类型并在 IL 中为您构造它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T14:50:51.450

这些是对象和集合初始化器。请参阅[http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-15T14:51:53.370

以下代码是使用对象初始化器的匿名类型示例

```
var result = new { prop1 = "hello", prop2 = "world", prop3 = "." }; 
```

有关更多信息，请参阅[匿名类型（C# 编程指南）](http://msdn.microsoft.com/en-gb/library/vstudio/bb397696.aspx)和[对象和集合初始化器（C# 编程指南）](http://msdn.microsoft.com/en-gb/library/vstudio/bb397696.aspx)

# ruby-on-rails - 处理请求时出现意外错误：getaddrinfo：名称解析临时失败

> ID：15435403
> 
> 赞同：1
> 
> 时间：2013-03-15T14:50:17.917
> 
> 标签：ruby-on-rails, nginx, thin

我有一个使用 Ubuntu 的 Bitnami Rails 堆栈。我正在使用 5 个瘦 Web 应用程序服务器设置 Nginx。当我尝试通过浏览器访问我的 Rails 应用程序时，看起来 Nginx 正在将请求发送到瘦服务器。但是，我在浏览器中得到“内部服务器错误”。

然后，thin.3000.log 包含以下条目：

```
>> Thin web server (v1.5.0 codename Knife)
>> Maximum connections set to 1024
>> Listening on 127.0.0.1:3000, CTRL+C to stop
!! Unexpected error while processing request: getaddrinfo: Temporary failure in name resolution
!! Unexpected error while processing request: getaddrinfo: Temporary failure in name resolution 
```

这是否意味着某种 DNS 问题？

这是我的 thin.yml = [https://dl.dropbox.com/u/35302780/thin.yml](https://dl.dropbox.com/u/35302780/thin.yml)

这是我的 nginx.conf = [https://dl.dropbox.com/u/35302780/nginx.conf](https://dl.dropbox.com/u/35302780/nginx.conf)

这是包含在 nginx.conf = [https://dl.dropbox.com/u/35302780/ndeavor.conf中的 ndeavor.conf](https://dl.dropbox.com/u/35302780/ndeavor.conf)

谢谢您的帮助！

更新1

即使我只是单独运行 Thin，我也会遇到同样的错误。

```
bitnami@linux:/opt/bitnami/projects/ndeavor/current$ thin -e production start
>> Using rack adapter
/opt/bitnami/projects/ndeavor/releases/20130314191109/config/application.rb:3:in `<top (required)>': iconv will be deprecated in the future, use String#encode instead.

[DEVISE] Devise.use_salt_as_remember_token is deprecated and has no effect. Please remove it.

>> Thin web server (v1.5.0 codename Knife)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:3000, CTRL+C to stop
!! Unexpected error while processing request: getaddrinfo: Temporary failure in name resolution 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:32:23.920

它最终成为一个停机的 DNS 服务器。

# java - 什么是支持范围查询的对 java 友好的内存映射？

> ID：15435409
> 
> 赞同：1
> 
> 时间：2013-03-15T14:50:27.733
> 
> 标签：java, data-structures, key-value-store

我正在寻找具有支持范围查询的 Java 友好 API（不一定是 Java）的内存映射。我们的设计还没有要求分发它。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:56:32.500

使用[TreeMap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)。可以使用方法`lowerEntry`和`higherEntry`和`higherKey`来完成范围查询`lowerKey`。找到小于范围左端的第一个键，第一个大于右端的键并返回它们之间的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:16:45.353

根据您需要的灵活性和可扩展性等，您可以考虑使用内存数据库；这将为您提供比您在此处提到的更多的功能，并且可能仅在您认为有一天可能会使用更多时才有趣。你会花费大量的复杂性，可能还有空间，以获得极其灵活的东西。但是您应该知道，有几个（免费）Java 数据库提供内存配置，包括 Derby（随 Java 发布）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T17:43:09.970

[区间树](http://en.wikipedia.org/wiki/Interval_tree)可能是您正在寻找的吗？

# jquery-ui - Jquery 和 Primefaces 的问题

> ID：15435410
> 
> 赞同：0
> 
> 时间：2013-03-15T14:50:34.290
> 
> 标签：jquery-ui, primefaces

我在使用 Primefaces 放置按钮时遇到问题。我看到了一些其他帖子 [如何使用](https://stackoverflow.com/questions/11112058/how-to-use-jquery-with-primefaces) 带有类似问题的 PrimeFaces 的 jQuery 和 jQuery 插件，但没有得到任何结果。

继承人的代码示例：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <f:view locale="#{templateManager.userLocale}">
        <h:head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <title>#{msgs['report.title']}</title>
            <h:outputStylesheet name="ssl-common.css" library="css"/>
            <h:outputStylesheet name="final.css" library="css"/>
            <link href="#{resource['img:favicon.ico']}" rel="icon"/>
            <h:outputScript library="primefaces" name="jquery/jquery.js" />

        </h:head>
        <body id="reportList">
            <ui:include src="../WEB-INF/header.xhtml" />
            <section>
                <h:form prependId="false">
                    <nav>
                        <div id="actionBar">
                            <div class="wraper">
                                <hgroup>
                                    <h1>#{msgs['report.title']}</h1>
                                </hgroup>
                                <div id="subMenu" style="padding: 10px">

                                    <script>
                                        $(function() {
                                            $("#radio").buttonset();
                                        });
                                    </script>

                                    <div id="radio">
                                        <input type="radio" id="radio1" name="radio" /><label for="radio1">Choice 1</label>
                                        <input type="radio" id="radio2" name="radio" checked="checked" /><label for="radio2">Choice 2</label>
                                        <input type="radio" id="radio3" name="radio" /><label for="radio3">Choice 3</label>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </nav>

       (...)

            <h:outputScript library="js" name="common.js"/>
            <h:outputScript library="js" name="script.js"/>
            <h:outputScript library="js" name="primefacesLocalePT-PT.js" />
            <!--<h:outputScript library="js" name="jquery-ui-1.8.2.js" />-->
            <script src="http://maps.google.com/maps/api/js?sensor=true&amp;language=#{templateManager.userLocale}" type="text/javascript"/>
        </body>
    </f:view>
</html> 
```

使用此代码，我收到错误：

TypeError: $(...).buttonset 不是一个函数 [Break On This Error]

$("#radio").buttonset();

有人有类似的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:52:18.913

您还需要包含 jQuery UI。现在脚本标签被注释掉了。

# c# - 嵌套类和动态调用问题

> ID：15435414
> 
> 赞同：2
> 
> 时间：2013-03-15T14:50:40.350
> 
> 标签：c#, reflection, nested-class

我有以下情况：

```
public class Restriction
{
    public string RestrictionName { get; set; }
    public bool Eval(decimal Value2)
    {
        Type typeRestriction = Type.GetType(RestrictionName);
        return (bool)typeRestriction.InvokeMember("Eval",
            BindingFlags.InvokeMethod | BindingFlags.Public | BindingFlags.Static,
            null,
            null,
            new object[] { this, Value2 });
    }

    /* Nested Classes */
    class A
    {
        public static bool Eval(Restriccion r, decimal value)
        {
            // Do something
        }
    }

    class B
    {
        public static bool Eval(Restriccion r, decimal value)
        {
            // Do something
        }
    }
} 
```

当我尝试时：

```
 Restriction r = new Restriction();
    r.RestrictionName = "A";
    r.Value = 15;
    r.Eval(16); 
```

我得到`System.NullReferenceException: Object reference not set to an instance of an object.` 调试显示我 `typeRestriction`是空的。为什么？嵌套类有特殊处理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:04:11.720

在这种情况下，类型`A`和`B`是嵌套类型。因此他们的名字分别是`Restriction+A`和`Restriction+B`。此外，名称中`Restriction`必须包含包含的名称空间。例如，如果命名空间是，`ConsoleApplication`您将需要使用名称`ConsoleApplication.Restriction+A`作为`A`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:54:39.257

这是一个命名空间问题，请尝试使用以下方法引用类类型：

```
Type typeRestriction = Type.GetType(string.Format("Restriction+{0}", RestrictionName)); 
```

# windows-phone-8 - Phonegap 条码扫描仪无法识别 windows phone 上的任何条码

> ID：15435421
> 
> 赞同：15
> 
> 时间：2013-03-15T14:51:06.880
> 
> 标签：ios, windows-phone-8, cordova, phonegap-plugins, barcode-scanner

我正在尝试将 Phonegap 条形码扫描仪插件添加到我的 Phonegap 应用程序中。我主要为 windows phone 8 开发，但我也想针对 ios 和 android 平台。我设法正确添加了插件，但是当我开始扫描时，我的 windows phone 无法识别任何条形码。它只显示带有焦点按钮和绿色方块的视频屏幕。

这是我的扫描代码：

```
 function Scan() {
      window.plugins.barcodeScanner.scan(function (result) {
        barcode = result;
        alert(barcode.text);
      }, function (error) {
        alert("Scanning failed: " + error);
      });
  }; 
```

此函数在 deviceready 事件上调用。

难道我做错了什么？还是我错过了插件中的某些内容？我读到 android 和[ios](/questions/tagged/ios "显示标记为“ios”的问题")需要设置权限才能执行这个插件。我是否也需要获得许可才能在 Windows Phone 中进行扫描？

**更新 ：**

看来我可以扫描二维码，但不能扫描常规二维码（SCC 码）。有人对此有线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:29:31.087

尝试使用适用于 Windows Phone 的 ZXing Barcode Scanner。它工作得很好。

[http://silverlightzxing.codeplex.com](http://silverlightzxing.codeplex.com)

您可以使用 PhoneGap 调用您创建的类。然后让ZXing的原生插件完成所有繁重的工作，并使用成功函数将扫描的代码以Javascript返回给您。

# scala - 伪代码 à la Scala

> ID：15435432
> 
> 赞同：0
> 
> 时间：2013-03-15T14:51:29.157
> 
> 标签：scala, pseudocode

是否有任何使用 Scala 风格编写[伪代码的好例子，这些伪代码](http://en.wikipedia.org/wiki/Pseudocode)可用于以抽象方式指定算法。例如省略隐含或不必要的类型？

我的想法是用结构类型别名来描述能力，例如

```
type Vertex = {
  val preLabel
  val postLabel
} 
```

但直觉上我会使用`if ... then ... else`而不是`if (...) ... else ...`

# jsf - 导航到另一个页面时查看参数

> ID：15435434
> 
> 赞同：0
> 
> 时间：2013-03-15T14:51:33.270
> 
> 标签：jsf, parameters

我正在使用 JSF2，我需要能够通过 commandLink 将参数从一个 JSF 页面传递到另一个页面。

我在页面上`funding.xhtml`（ViewScoped）并定义了以下链接：

```
<p:commandLink styleClass="toolbar" 
               action="/application/customerApplicationManagement.jsf">
    <p:graphicImage url="/resources/gfx/search.png" />
    <h:outputText value="#{msg.menu_searchApplications}" styleClass="toolbarLink" />
</p:commandLink> 
```

我需要将一个字符串值传递给 customerApplicationManagement 页面，指示我来自哪个页面，以便在选择应用程序后，我可以返回该页面。我已经尝试了几个关于如何传递这个值的建议，包括`f:param`, `f:viewParam`。我什至尝试将其直接添加到 url ( `?fromPage=funding`) 等，但它们似乎只有在将值传递回当前页面时才有效，而不是我正在导航到的新页面。

有人可以告诉我如何最好地实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:50:00.240

Use `<f:param>` and `<f:viewParam>`:

**Source page:**

```
<p:commandLink styleClass="toolbar" 
           action="/application/customerApplicationManagement.jsf">
    <p:graphicImage url="/resources/gfx/search.png" />
    <h:outputText value="#{msg.menu_searchApplications}" styleClass="toolbarLink" />
    <f:param name="fromPage" value="funding.xhtml" />
</p:commandLink> 
```

**Destination page (bound):**

```
<f:metadata>
    <f:viewParam name="fromPage" value="#{destinationBacking.fromPage}" />
</f:metadata />

<h:link value="Go back!" outcome="#{destinationBacking.fromPage}" /> 
```

**Destination page (unbound):**

```
<f:metadata>
    <f:viewParam name="fromPage" />
</f:metadata />

<h:link value="Go back!" outcome="fromPage" /> 
```

**Backing bean (only if you want to bind the param):**

```
@ManagedBean
@ViewScoped
public class DestinationBacking{
    String fromPage;

    public String getFromPage(){
        return fromPage;
    }

    public void setFromPage(String frompage){
        fromPage = frompage;
    }
} 
```

Your view path will be binded to `fromPage` property from the destination backing bean and after you can use it to return to the original page.

Also I want to say that this way is a bit 'hackeable' by the end user, I mean, you're passing the original path through pure url. See also other ways to achieve that, as [flash scope](http://mkblog.exadel.com/2010/07/learning-jsf2-using-flash-scope/), which is very useful specially if you're working with `@ViewScoped` beans.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:27:46.907

我不知道您尝试实现目标的方法的细节，因此我们无法判断它们出了什么问题，但是如果我们认为您的代码“原样”，您将没有*任何*可以传递您想要的字符串的东西.

不要重复我们自己，这里有很多专门用于使用这种或那种方法的答案，所以在我看来，当然，我会给你最好的参考。

1.  [如何将参数传递给数据表内的命令链接](https://stackoverflow.com/questions/4994458/how-can-i-pass-a-parameter-to-a-commandlink-inside-a-datatable/4994833#4994833)；
2.  [ViewParam 与 @ManagedProperty](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id/4889226#4889226)；
3.  [可以`<f:metadata>`和`<f:viewParam>`用于](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for/6377957#6377957)什么。

关于 JSF 中后退按钮的使用，您还可以查看我自己关于[How to get back to the same page in JSF](https://stackoverflow.com/questions/15130190/how-to-get-back-to-same-jsf-page-on-pressing-of-some-button-from-another-jsf-pag/15135899#15135899)的回答。

顺便说一句，使用 POST 进行页面到页面导航被认为是一种不好的做法。如果您只需要导航到另一个页面，您最好使用plain`<h:link>`或`<h:button>`代替。

# visual-studio-2010 - Visual Studio 2010 如何在运行测试时停止更改执行路径

> ID：15435438
> 
> 赞同：1
> 
> 时间：2013-03-15T14:51:41.957
> 
> 标签：visual-studio-2010, unit-testing

我正在尝试测试一个在处理过程中加载程序集并使用包含的信息解析文件的应用程序。问题是，虽然我有从哪里加载程序集的路径，指向我的测试项目 bin 文件夹，但最终发生的事情是当测试开始运行时，它从动态创建的不同位置运行（我相信) 由 NUnit 提供。如何强制测试使用我设置的本地测试项目 bin 路径？

使用它，我可以访问下面的执行路径，这不是我想要的。

System.IO.Path.GetDirectoryName(_System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase)

文件：\C:\XXXXDEV\XXXXXXXXXXXXXXXXXXXXX\TestResults\LX####S1Z 2013-03-15 09_44_19\Out

我宁愿它指向 Test Projects 自己的本地文件夹，在该文件夹中找到我想要加载的 dll。

C:\XXXXXXXXX\XXXXXXXXXXXX\XXXXXXXXX.Watcher.Test\bin\Debug\XXXXXXOutputXXXXX.dll

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:12:37.180

我选择了**Test(menu) > Edit Test Settings > Local(local.testsettings)**打开测试设置窗口。然后我向下滚动以选择窗口左侧的单元测试选项。在右侧，我浏览并选择我的测试项目 /bin/Debug 文件夹作为**要加载的程序集的 Root 文件夹**。然后我检查了**在测试目录中为程序集使用加载上下文**复选框。单击**应用**，然后单击**关闭**。在此之后，当我运行测试时，程序集会正确加载。

![在此处输入图像描述](../Images/630d87e8bf0ff9ce25c5a7dda7b179b1.png)

# jquery - 我需要在我的 html 页面中链接什么 jQuery 脚本才能使以下代码正常工作？

> ID：15435446
> 
> 赞同：0
> 
> 时间：2013-03-15T14:52:01.740
> 
> 标签：jquery, html, css, scroll

我想让它在一个独立的 HTML 文件中工作：http: [//jsfiddle.net/J8XaX/2/](http://jsfiddle.net/J8XaX/2/)

我的脚本是：

```
var divs = $('.fademe');
$(window).on('scroll', function() {
   var st = $(this).scrollTop();
   divs.css({ 'opacity' : (1 - st/130) });
}); 
```

我已经尝试过这些包括，但它们都不起作用：

```
<script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.min.js'></script>
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

有什么建议么？

编辑：它被包装了。我的 HTML 中的脚本是：

```
<script type='text/javascript'>
$(document).ready(function(){
    var divs = $('.fademe');
    $(window).on('scroll', function() {
   var st = $(this).scrollTop();
   divs.css({ 'opacity' : (1 - st/700) });
});
</script> 
```

它在 jsFiddle 中有效，但当我尝试将其作为自己的 HTML 页面查看时则**无效**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T14:53:43.820

将您的代码包装在

```
$(document).ready(function() {

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T14:55:46.133

该`.on()`函数是在 jQuery 1.7 中添加的，而该`.css()`函数是在 jQuery 1.0 中添加的，因此这三个文件中的任何一个都将包含所有必要的函数；前两个是同一个文件，一个刚刚被压缩（缩小 - 因此文件名的“.min”部分）。

但是，您的代码可能执行得太早 - 在构造 DOM 之前 - 因此无法选择元素。`DOM ready`使用事件处理程序延迟该代码的执行：

```
$(document).ready(function() {
    // your code
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:54:11.697

您正在错误地访问 div。
如果您要将 jquery 函数应用于您选择的变量，则必须这样做。

```
$(divs).css({ 'opacity' : (1 - st/130) }); 
```

# ios - 将用户输入字符串转换为有效的文件名

> ID：15435454
> 
> 赞同：5
> 
> 时间：2013-03-15T14:52:32.567
> 
> 标签：ios, objective-c, cocoa-touch, nsstring, nsfilemanager

在 iOS 上将用户输入字符串转换为有效文件名时需要考虑哪些特殊注意事项？有什么方法可以提供帮助吗？`NSString`我在or上找不到任何明显的东西`NSFileManager`。

上下文允许用户在应用程序中保存搜索。在幕后，这些名称被转换为 Core Data 持久存储的名称。实际的文件名永远不会暴露给用户。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:08:59.937

主要关注点应该是用户体验：用户可以键入任何内容来识别文件。回到数据时，她希望看到与她输入的字符串完全相同的字符串。

处理此信息的最佳方法是将实际输入存储在其他位置并使用映射来获取实际文件。

您可以只使用保存在 plist 文件中的字典。字典将包含用户输入作为键和 UUID 作为值。然后使用 UUID 作为文件名保存该文件。这样您就可以确保文件名始终有效，并且用户可以键入任何她想要的内容，而不必担心文件名无效。

与仅去除无效字符相比，一个优点是用户可以使用例如“/”和“//”作为有效标识符，如果她愿意的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:58:27.120

如果您只是保存搜索，则不需要文件或文件名。有几种方法可以做到这一点，但为什么不直接使用 Core Data 来保存搜索呢？您可以有一个“搜索”实体并将所有相关信息存储在那里。

不需要文件，而且您显然已经掌握了使用核心数据的速度，所以在这里也可以使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:56:52.707

替换非法字符。像这样的东西：

```
filename = [[filename componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] componentsJoinedByString:@"" ];
filename = [[filename componentsSeparatedByCharactersInSet:[NSCharacterSet illegalCharacterSet]] componentsJoinedByString:@"" ];
filename = [[filename componentsSeparatedByCharactersInSet:[NSCharacterSet symbolCharacterSet]] componentsJoinedByString:@"" ];
fileURLString = [NSTemporaryDirectory() stringByAppendingPathComponent:filename];
fileURL = [NSURL URLWithString:fileURLString]; 
```

检查文件是否存在。像这样的东西：

```
[[NSFileManager defaultManager] fileExistsAtPath:[fileURL absoluteString]] 
```

# c# - 可延期内容 xaml

> ID：15435459
> 
> 赞同：4
> 
> 时间：2013-03-15T14:53:08.250
> 
> 标签：c#, xaml

此代码提示 XamlParseException ：

> *'设置属性'System.Windows.ResourceDictionary.DeferrableContent' 引发异常。行号 '15' 和行位置 '14'*。

```
<UserControl  x:Class="MyView.MainWindow"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:bv="clr-namespace:MyModel.FaultLibrary;assembly=Controller"
         xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"       
         xmlns:i18n="http://wpflocalizeextension.codeplex.com"
         i18n:LocalizeDictionary.DesignCulture="en"
         i18n:ResxLocalizationProvider.DefaultAssembly="MyView"
         i18n:ResxLocalizationProvider.DefaultDictionary="I18n"
         xmlns:gif="http://wpfanimatedgif.codeplex.com"
         mc:Ignorable="d" 
         d:DesignHeight="448" d:DesignWidth="955" FontFamily="Arial"
         TextOptions.TextFormattingMode="Display"
         SnapsToDevicePixels="True"
         UseLayoutRounding="True"> 
```

内部异常：

> 项目已添加。字典中的键：'DataTemplateKey(MyModel.FaultLibrary.TestPoint)' 添加的键：'DataTemplateKey(MyModel.FaultLibrary.TestPoint)'

我不知道为什么...

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-18T14:36:13.487

似乎有一些样式/模板似乎具有相同的键，否则，某些元素设置了多个样式。检查您的资源和资源库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-23T18:46:20.063

如果一个样式是全局的（没有 x:Key 集），它的 TargetType 将用作查找它的键。如果您有多个具有相同 TargetType 和不同键的样式，则需要在设置 TargetType 之前设置 x:Key-Attribute。示例 - 更改此：

```
<Style TargetType="Control" x:Key="MyStyle" /> 
```

对此：

```
<Style x:Key="MyStyle" TargetType="Control" /> 
```

因此，所有样式都可以通过资源字典的唯一键添加。

# javascript - Javascript 中的 Prolog 系统

> ID：15435462
> 
> 赞同：17
> 
> 时间：2013-03-15T14:53:32.513
> 
> 标签：javascript, compilation, prolog, iso-prolog, transpiler

Javascript 似乎作为其他编程语言的实现语言变得流行。[(C)LP 到 JavaScript](http://clip.dia.fi.upm.es/papers/clp-to-js-iclp12.pdf)的轻量级编译一文 。[ICLP 2012](http://clip.dia.fi.upm.es/papers/clp-to-js-iclp12.pdf) 引起了我的注意。

网上有很多用 Javascript 编写的 Prolog 系统的概念验证原型。

什么是当前的、积极维护的、最好是符合 ISO 标准的用 Javascript 编写的 Prolog 系统？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-15T19:36:26.423

我知道的 JavaScript 中唯一的 Prolog 是[YieldProlog](http://yieldprolog.sourceforge.net/)，但我没有广泛尝试过，只是[QueryEditor](http://yieldprolog.sourceforge.net/queryEditor.html)中可用的代码。

我希望它比使用 yield 构造更轻量级（我在 C# 中广泛使用了这种构造，我发现它 - 与 lambda 配对 - 相当强大）。

但是当我（概括地）检查源时，我发现它非常复杂，尽管有假设。

*编辑*

我最近发现了这些看起来非常有趣的贡献： [proscript](https://github.com/thetrime/proscript)和[proscript2](https://github.com/thetrime/proscript2)。

*编辑*

一个新的实现可用：

[Tau Prolog](http://tau-prolog.org/)，从 Jan 在 SWI 邮件列表中引起了我的注意

*编辑*

新的东西，[hhprolog](https://github.com/CapelliC/hitchhicker-prolog)，一个纯 Prolog 引擎，基于 Paul Tarau 提供的代码和文档，由我移植到 Javascript。因此，在浏览器和 NodeJS 中都可用。

该项目仍处于初步阶段，最需要的是引导解释器：现在（预）编译 Prolog 到（新型）虚拟机必须安装 SWI-Prolog，正确配置（需要 JPL）。

为了实现这样的引导，我可能需要实现否定，重用 Paul 的接口，或者 - 更好地 - 尝试实现一些停留在纯范式中的东西。特别是，只有无界整数算术（同样由 Paul Tarau 提供，有一些 Python 代码可用 - 我会尝试懒惰地移植到 Javascript）。

# mysql - 使用 MySql 连接器在 Entity Framework Code First 中创建表时出错。

> ID：15435473
> 
> 赞同：0
> 
> 时间：2013-03-15T14:54:07.640
> 
> 标签：mysql, entity-framework, ef-code-first, code-first

在 MySql 中创建表 Order 时出现错误。

我收到“您在 'Order (OrderId) ON UPDATE NO ACTION... 附近的 mysql 中出现错误...”

它只发生在此表上，具有任何类型的外键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:54:07.640

在查看了生成的脚本（mysql 连接器 6.6.5）之后，我注意到在创建外键时，表 Order 没有像这样写`Order`，因此保留字**order by**。我的解决方案是使用 Order 类中的 Table 属性重命名该表。我正在报告适当的错误

祝你好运

# android - Android，如何测量经过的时间

> ID：15435475
> 
> 赞同：1
> 
> 时间：2013-03-15T14:54:08.373
> 
> 标签：android

我正在开发一个演示应用程序，它显示不同的图像。在那里，我想让演示文稿在很短的时间后通过我的图像、视频和 pdf 文件列表滑动。

我从意图开始我的不同观点，`startActivityForResult(intent, RESULT_OK);`

开始视频和关闭视频不是问题。我用过`onPreparedListener`，`setOnCompletionListener`一切都像一个魅力。

然而，有了图片，这完全不同。

`Thread`我在我的中创建了一个新`ImageView`线程并将该线程放入`sleep()`，之后我调用了`setresult()`方法和`finish()`。但不是等待，而是根本没有显示图片，演示文稿卡在那里，没有设置结果并完成活动。

所以我开始在android中搜索一些时间的解释，发现了这个解释：

[解释](http://developer.android.com/reference/android/os/SystemClock.html#uptimeMillis%28%29)

我通读了一遍，试图很好地理解那里的解释。但是我想得越多，我就越不安全，这是为我的预期目的实现等待行为的最佳方式。

因此，我更感兴趣的不是一些代码，而是你会建议我使用什么以及为什么使用一个（如果可能的话）详细的解释。

1.  `elapsedRealtime()`?
2.  `uptimeMillis()`?
3.  `System.currentTimeMillis()`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T15:08:42.900

来自安卓文档：

> • System.currentTimeMillis() 是标准的“挂钟”（时间和日期），表示自纪元以来的毫秒数。挂钟可以由用户或电话网络设置（参见 setCurrentTimeMillis(long)），因此时间可能会意外地向后或向前跳跃。仅当与现实世界的日期和时间的对应关系很重要时才应使用此时钟，例如在日历或闹钟应用程序中。间隔或经过时间测量应使用不同的时钟。如果您使用 System.currentTimeMillis()，请考虑收听 ACTION_TIME_TICK、ACTION_TIME_CHANGED 和 ACTION_TIMEZONE_CHANGED Intent 广播，以了解时间何时更改。
> 
> • uptimeMillis() 以系统启动后的毫秒数计算。此时钟在系统进入深度睡眠（CPU 关闭、显示器变暗、设备等待外部输入）时停止，但不受时钟缩放、空闲或其他省电机制的影响。这是大多数间隔计时的基础，例如 Thread.sleep(millls)、Object.wait(millis) 和 System.nanoTime()。这个时钟保证是单调的，适用于区间不跨越设备睡眠的区间计时。大多数接受时间戳值的方法目前都需要 uptimeMillis() 时钟。
> 
> • elapsedRealtime() 和 elapsedRealtimeNanos() 返回系统启动后的时间，包括深度睡眠。这个时钟保证是单调的，即使在 CPU 处于省电模式时也会继续计时，因此是通用间隔计时的推荐基础。

如果您要测量的时间间隔相对较短，您几乎可以使用任何可以为您提供正确时间的方法。我更喜欢 currentTimeMillis()。如果时间间隔真的很长，推荐的方法是使用 elapsedRealtime()。

此外，如果您只想做一些延迟的事情，只需使用：[http://developer.android.com/reference/android/os/Handler.html#postDelayed(java.lang.Runnable](http://developer.android.com/reference/android/os/Handler.html#postDelayed(java.lang.Runnable) , long) 。它很简单，效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:26:27.187

实现这一目标的最简单方法是`CountDownTimer`

```
private final class CountDownTimerImpl extends CountDownTimer {
    //5 sec.
    private static final long TIME_INTERVAL = 5000;
    private final ImageView imageView;
    private final List<Drawable> images;

    public CountDownTimerImpl(ImageView imageView, List<Drawable> images) {
        super(TIME_INTERVAL, TIME_INTERVAL);
        this.imageView = imageView;
        this.images = images;

        //set first image from images array to imageView
        imageView.setImageDrawable(images.get(0));
    }       

    //this method is executed after TIME_INTERVAL (5 sec.)
    public void onFinish() {
        //remove drawable from imageView
        imageView.setImageDrawable(null);
        //remove this drawable from array
        images.remove(0);
        //if array is not empty start another count down
        if (!images.isEmpty()) {
            new CountDownTimerImpl(imageView, images).start();
        }
    }

    public void onTick(long millisUntilFinished) {
        //nothing to do here
    }
} 
```

您应该通过以下方式启动此 CountDownTimer：

```
new CountDownTimerImpl(imageView, images).start(); 
```

`images`当然，您的演示图像的drawables数组在哪里。

我没有时间测试这个解决方案，但它应该可以工作 - 如果没有，请发表评论，我稍后会更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:07:43.223

您可以使用 TimerTask

```
int counter=0;   
final Handler handler = new Handler();
Timer ourtimer = new Timer();
TimerTask timerTask = new TimerTask() {
      public void run() {
              handler.post(new Runnable() {
                      public void run() {
counter++;
              //you can do stuffs here say  like if (counter==15) { do something}

                      }
             });
      }};

ourtimer.schedule(timerTask, 0, 1000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T15:51:58.140

您可以通过编写回调模块的不同方式执行此操作

创建一个名为 BaseActivity 的活动并让所有活动来扩展它现在声明一个方法调用是`void callback(){}`保持主体为空

现在在 onCreate 中创建一个如上所述的计时器并调用回调函数，您的代码将如下所示

```
onCreate(){
final Handler handler = new Handler();
Timer callTimer = new Timer();
TimerTask timerTask = new TimerTask() {
      public void run() {
              handler.post(new Runnable() {
                      public void run() {
            callback();

                      }
             });
      }};

callTimer.schedule(timerTask, 0, 1000);
} 
```

现在在您的活动中覆盖将在您在计时器中指定的时间之后调用的回调方法，

前任

```
Class a extends BaseActivity(){

@Override 
 onCreate(){
// playVideo
}

@Override 

void onCallBack(){
 //navigate to another activity
}

} 
```

# c++ - 从类函数内部调用 DLL 的外部函数

> ID：15435479
> 
> 赞同：0
> 
> 时间：2013-03-15T14:54:14.060
> 
> 标签：c++, c, dll, dllexport

我有一个 example.cpp 文件，其中包含 Windows 中的 example.h。在文件 example.h 中有一个函数声明为

```
 //example.h  
   _EXTERN S16BIT _DECL function(); 
```

该函数是从 DLL 外部化的。在我的 example.cpp 文件中，我有一个类`myclass`，我想`function()`从类的成员函数中调用它，`classfunc()`所以，

```
 //example.cpp
  class myclass{
  public:
    classfunc(){
    function(); 
  }

 } 
```

它编译得很好，但是当它运行时它给了我一个访问冲突异常。我知道这是错误的，但不知道解决方案。

编辑：_EXTERN 被定义为空；

```
 #define _EXTERN 
```

_DECL 定义为；

```
 #define _DECL __stdcall 
```

S16BIT 2 字节

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:14:21.670

您似乎想从 DLL 调用/使用纯 C 函数 function() 。请注意，这`__stdcall`是 C++ 函数的调用约定，您应该使用`__cdecl`

在你的 h 文件中声明你的函数是这样的

```
extern "C" __declspec( dllexport ) signed short function(); 
```

# http - IIS7 启动页

> ID：15435481
> 
> 赞同：0
> 
> 时间：2013-03-15T14:54:17.010
> 
> 标签：http, iis-7, subdomain, cpanel

我在地址[http://blog.wherelionsroam.co.uk/](http://blog.wherelionsroam.co.uk/)有一个子域，但是当我导航到 www.blog.wherelionsroam.co.uk（我知道）时，它会将我重定向到 IIS7 启动页面。我是否需要进入 cpanel 并在某个目录中安装 IIS7 工具以防止这种情况发生，否则我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:12:43.670

您可以停止根站点（这将停止任何响应），也可以编辑为子域提供服务的 IIS 站点的绑定，以响应 WWW 主机标头。

# python - 由于循环，列表超出范围

> ID：15435483
> 
> 赞同：2
> 
> 时间：2013-03-15T14:54:19.983
> 
> 标签：python, loops, bounds

我试图创建一个查看列表并删除所有奇数的函数。我有一个问题，我的循环超出了界限，我不知道如何解决它，有人可以帮忙吗？谢谢

```
def isEven(number):
    if(number % 2) == 0 and (number != 0):
        return True
    else:
        return False

def only_even(intList):
    for i in range(0, len(intList)):
        if(isEven(intList[i])) == False:
           del intList[i]
    return intList

print(only_even([5, 8, 17, 6, 0, 20, 3])) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:00:27.827

列表超出范围的原因是您在缩小列表的同时迭代原始大小的范围！

```
def only_even(intList):
    intList[:] = [i for i in intList if isEven(i)]
    return intList 
```

我正在执行切片分配`[:]`以保留变异和返回列表的确切语义。如果您只想返回列表，它会更短

```
def only_even(intList):
    return [i for i in intList if isEven(i)] 
```

您还可以简化您的 is even 函数，因为它已经评估为 True/False

```
def isEven(number):
    return number % 2 == 0 and number != 0   # Why isn't 0 even? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T15:17:41.460

当您使用 时`del`，您正在更改列表的长度，但`for`循环试图迭代列表的原始长度，因此最终它将超出列表的范围。也就是说，`len(intList)`不是每次`for`循环都评估。

对此的解决方案是从旧列表创建一个新列表并返回，如下所示：

```
def only_even(intList):
    new_list = []
    for i in range(0, len(intList)):
        if isEven(intList[i]) == True:
            new_list.append(intList[i])
    return new_list 
```

现在您的打印语句将起作用：

```
>>> print(only_even([5, 8, 17, 6, 0, 20, 3]))
[8, 6, 20] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:03:46.117

```
def only_even(intList):
    intList[:] = filter(isEven, intList)
    return intList 
```

或者，如果您不需要就地修改列表：

```
def only_even(intList):
    return list(filter(isEven, intList)) 
```

# sql-server - 动态替换 XML DML 中节点的值

> ID：15435485
> 
> 赞同：4
> 
> 时间：2013-03-15T14:54:21.393
> 
> 标签：sql-server, xml, tsql, xquery, dml

我现在正在为此苦苦挣扎：如何在文本等于某个变量值的无类型 XML 列中替换节点的值？是否可以？

我的 XML：

```
<attrs>
  <attr>ManualInsert</attr>
  <attr>ManualInsert2</attr>
  <attr>ManualInsert4</attr>
  <attr>ManualInsert8</attr>
</attrs> 
```

我的尝试：

```
DECLARE @OldValue Varchar(255) =  'ManualInsert'
DECLARE @NewValue Varchar(255) =  'ReplacedValue'

UPDATE
    Labels
SET
    Attributes.modify('replace value of (/attrs/attr/text())[1]
                       with
                       if ((/attrs/attr/text() = sql:variable("@OldValue")))
                       then sql:variable("@NewValue")
                       else () ')
WHERE
    Id = 2000046 
```

信息： `(0 row(s) affected)`

```
DECLARE @OldValue Varchar(255) =  'ManualInsert'
DECLARE @NewValue Varchar(255) =  'ReplacedValue'

UPDATE
    Labels
SET
    Attributes.modify('replace value of (/attrs/attr[text() = sql:variable("@OldValue")])[1]
                       with sql:variable("@NewValue")')
WHERE
    Id = 2000046 
```

信息：

```
Msg 2356, Level 16, State 1, Line 7
XQuery [Labels.Attributes.modify()]: The target of 'replace value of' must be a non-metadata attribute or an element with simple typed content, found 'element(attr,xdt:untyped) ?' 
```

预期结果：

```
<attrs>
  <attr>ReplacedValue</attr>
  <attr>ManualInsert2</attr>
  <attr>ManualInsert4</attr>
  <attr>ManualInsert8</attr>
</attrs> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T15:05:45.353

```
modify('replace value of (/attrs/attr[. = sql:variable("@OldValue")]/text())[1]
        with sql:variable("@NewValue")') 
```

您的第二次尝试实际上只是缺少指定应该替换的是 text() 。这也将起作用。

```
modify('replace value of (/attrs/attr[text() = sql:variable("@OldValue")]/text())[1]
        with sql:variable("@NewValue")') 
```

# java - 在 Hibernate 中使用瞬态实体更新/合并现有的持久对象

> ID：15435486
> 
> 赞同：8
> 
> 时间：2013-03-15T14:54:23.467
> 
> 标签：java, hibernate, merge, xstream, transient

我正在处理我的数据库中一个相当复杂的对象图。我正在使用 XStream 序列化和反序列化这个工作正常的对象图。当我导入数据库中存在的对象的对象图时，它最初是瞬态的，因为没有 ID 并且 hibernate 对此一无所知。然后，我有业务逻辑，通过确定新临时导入的对象映射到现有持久对象中的哪些对象，在我的对象图的某些部分上设置 ID。然后我使用 Hibernate 的 merge() 和 saveOrUpdate()。

一些伪代码可以让您更好地了解我在做什么：

```
ComplexObject transObj = xstream.import("object.xml");
ComplexObject persistObj = someService.getObjByName(transObj.getName());
for (OtherObject o : c.getObjects()) {
    if (persistObj.getObjects().contains(o.getName())) {
        o.setId(persistObj.getObjectByName(o.getName()).getId())
    }
    ... set a bunch of other IDs deeper in the object graph ...
}

transObj = session.merge(transObj);
session.saveOrUpdate(transObj); 
```

现在这不起作用，因为我收到以下错误：

```
 org.springframework.dao.InvalidDataAccessApiUsageException: deleted object would be re-saved by cascade (remove deleted object from associations): [com.......SomeObject#353296]; nested exception is org.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations): [com.......SomeObject#353296] 
```

似乎休眠合并并不意味着将瞬态对象与持久对象相关联。

有什么方法可以实现我想要做的事情，而不必在会话中获取持久对象并对其进行修改，而不是修改瞬态对象，并尝试保存并覆盖现有的持久对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T05:09:54.590

> *似乎休眠合并并不意味着将瞬态对象与持久对象相关联*

合并是 JPA 标准 - 将“新的和分离的实体实例”合并到“（持久性上下文）托管实体实例”。将跨标记为 Cascade.MERGE 或 Cascade.ALL 的 FK 关系级联。

从**JPA**的角度来看 - 不，合并并不是为了将您的 Xstream 流式瞬态对象与持久对象相关联。JPA 打算让合并与正常的 JPA 生命周期一起工作 - 创建新对象、持久化它们、获取/查找它们、分离它们、修改它们（包括添加新对象）、合并它们、选择性地修改它们，然后持久化/保存它们. 这是经过深思熟虑的设计，因此 JPA 是流线型和高性能的 - 每个单独的对象都持久保存到数据库中，不需要在检索对象状态之前确定是否/要插入/更新什么。JPA 持久性上下文对象状态已经包含足够的细节来确定这一点。

你的问题是你有新的实体实例，你想表现得***好像***它们已经被分离了——这不是 JPA 的方式。

SaveOrUpdate 是一种休眠的专有操作——如果一个实体有一个身份，它就会被更新，但如果它没有实体，那么它就会被插入。

从**休眠**的角度来看 - 是的，合并后的 saveOrUpdate 理论上可以用于将（Xstream 流式传输的）瞬态对象与持久对象相关联，但在与 JPA 操作结合使用时可能会有限制。saveOrUpdate 确实在每个对象持久存储到数据库之前进行检索以确定是否/要插入/更新的内容 - 它很聪明，但它不是 JPA 并且它不是最高性能的。即，您应该能够通过一些谨慎和正确的配置来让它工作 - 并在发生冲突时使用休眠操作而不是 JPA 操作。

> *我收到以下错误：*
> 
> *org.hibernate.ObjectDeletedException：已删除的对象将被级联重新保存（从关联中删除已删除的对象）：[com.......SomeObject#353296]*

我认为这可能是由两个因素造成的：

*   在您（Xstream 创建的）对象图中的某处，如果您使用 JPA 进行（级联）检索，则缺少一个子实体实例：这会删除对象
*   在您（Xstream 创建的）对象图中的其他地方，存在相同的子实体：这使对象被重新保存

    如何调试： (a) 从 Xstream 创建对象图并完整打印出来 - 每个实体，每个字段；(b) 通过 JPA 加载相同的对象图，从顶部实体级联检索并完整打印出来 - 每个实体，每个字段 (c) 比较两者 - (a) 中缺少的东西 (b) )??

> *有什么方法可以实现我想要做的事情，而不必在会话中获取持久对象并对其进行修改，而不是修改瞬态对象，并尝试保存并覆盖现有的持久对象？*

通过刚刚建议的调试/修复 - 希望如此。

或者我的蛮力建议（愚蠢地）绕过这个错误（虽然会降低性能一点）：在对象图中填充 ID 后，调用 EntityManager.clear()，然后继续执行 merge() 和 saveOrUpdate() . 但是对数据库结果进行单元测试 - 以确保您在填充 Xstream 图表时没有忽略一些重要的事情。

对于测试 / 作为最后的手段，请尝试不使用 merge() 的 saveOrUpdate()，但您可能会被迫 clear() 实体管理器以避免 Hibernate 异常，例如 NonUniqueObjectException。

如果您了解更多/有更多信息，请告诉我 B^)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:06:50.177

```
 Hibernate merge was not meant for associating transient objects 
to persistent ones. 
```

merge() 应该非常适合您，因为您实际上是在处理分离的对象。由于您在调用合并之前在“transObj”中设置 id，因此休眠会将它们视为分离的（不是瞬态的）。

我认为您的代码的问题在于它正在触发休眠。

在您的代码中，您正在从数据库中加载“persistObj”。现在，hibernate 在会话中持有这个“persistObj”。然后，您在“transObj”中设置“persistObj”中的一些 id，然后调用 merge。'persistObj' 和 'transObj' 中的一些子对象具有相同的 id，hibernate 会感到困惑。

```
ComplexObject transObj = xstream.import("object.xml");
ComplexObject persistObj = someService.getObjByName(transObj.getName());
for (OtherObject o : c.getObjects()) {
    if (persistObj.getObjects().contains(o.getName())) {
        o.setId(persistObj.getObjectByName(o.getName()).getId())
     }
    ... set a bunch of other IDs deeper in the object graph ...
}
transObj = session.merge(transObj);
session.saveOrUpdate(transObj); 
```

在加载“persistObj”后尝试调用 session.clear()，以便休眠删除 persistObj 并只考虑您分离的对象。

```
ComplexObject transObj = xstream.import("object.xml");
ComplexObject persistObj = someService.getObjByName(transObj.getName());
// Clear the session, so that hibernate removes 'persistObj' from it's cache
session.clear();
for (OtherObject o : c.getObjects()) {
    if (persistObj.getObjects().contains(o.getName())) {
        o.setId(persistObj.getObjectByName(o.getName()).getId())
     }
    ... set a bunch of other IDs deeper in the object graph ...
}
transObj = session.merge(transObj);
session.saveOrUpdate(transObj); 
```

# c# - 二维数组返回为空

> ID：15435487
> 
> 赞同：2
> 
> 时间：2013-03-15T14:54:27.033
> 
> 标签：c#, arrays, null, unity3d

我正在开发一个项目，该项目需要我访问多个不同的 2D 数组以进行对话映射。我有两个不同的类，**talkinterface**是主类，其代码调用另一个，会话类**busstaionconvo**。但是，当我调用它并显示字符串 [] 时，它返回为 Null。谁能帮我解决这个问题？我在 MonoDevelop 中用 C# 编写，使用 Unity 游戏引擎，代码如下。

主类**talkinterface**部分代码：

```
...public class talkinterface : MonoBehaviour {

....ai = new string[,]{
      {"",""}   
    };  

public static void eOption(bool eval, string response){
    if(response == "bus"){
        Debug.Log (ai); //DISPLAYS string[]
        responses = busstationconvo.responses;
        ai = busstationconvo.ai;
        Debug.Log (busstationconvo.responses); //DISPLAYS null
        Debug.Log (ai); //DISPLAYS null
    }
 } 
```

二等**busstationconvo**完整代码：

```
using UnityEngine;
using System.Collections;

public class busstationconvo : MonoBehaviour {
public static string[,] ai;
public static string[,] responses;
// Use this for initialization
void Start () {
    ai = new string[,]{
        {"Hola, bienvenido al estacion del autobus." , "0"},
        {"Estoy bien y tu?", "1"},
        {"Esta es el estation de autobuses.","2"},
        {"Que necesitas?","3"},
        {"Si, tengo un boleto, cuesta dos dolares.","4"},
        {"Para usar el autobus, necesitas un boleto.","5"},
        {"Gracias, aqui esta tu boleto.","6"}   

    };
    responses = new string[,]{
        //HOLA 0
        {"Hola, como estas? ","1"},
        {"Que es este lugar?","2"},
        {"Necesito ayuda por favor.","3"},
        {"Adios.","999"},
        //ESTOY BIEN Y TU? 1 
        {"Estoy bien, adios ","999"},
        {"Bien, pero que es este lugar?","2"},
        {"Bien pero, necesito ayuda por favor.","3"},
        {"Adios.","999"},
        //THIS IS THE BUS STATION 2
        {"Claro, adios.","999"},
        {"Gracias, pero necesito ayuda por favor","3"},
        {"Adios.","999"},
        {"","2"},
        //WHAT HELP DO YOU NEED 3
        {"Nada, adios.","999"},
        {"Necesito un boleto.", "4"},
        {"Necesito un autobus.","5"},
        {"Adios.","999"},
        //IT COSTS 2 DOLLARS 4
        {"Que caro, no gracias.","999"},
        {"Que ganga! Tengo dos dolares.", "6"},
        {"Por su puesto, tengo dos dolares.","6"},
        {"Adios.","999"},
        //YOU NEED A TICKET 5
        {"Tienes un boleto?","4"},
        {"","5"},
        {"","5"},
        {"","5"},
        //HERE’S YOUR TICKET 6
        {"Gracias, adios.","999"},
        {"","6"},
        {"","6"},
        {"","6"}
    };
}

// Update is called once per frame
void Update () {

}

} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:02:29.400

Unity 中的 Monobehaviors 通过 Unity 自己的初始化方案运行 - 使用构造函数或静态方法将数据填充到其中是不可靠的，因为 Unity 正在膨胀对象并连接已在 Unity 检查器视图中填充的关系。您希望在代码中完成的初始化需要在`Start()`函数中触发（就像评论所说的那样）。

您正在通过第一个对象上的静态方法访问代码，因此可能会在 Unity 对第二个行为运行 Start 之前运行。

# javascript - JQuery 多次替换 iframe

> ID：15435493
> 
> 赞同：0
> 
> 时间：2013-03-15T14:54:42.910
> 
> 标签：javascript, jquery

如果您在[这里查看此页面](http://mountainfoodstorage.com/index.php/media)，您会发现我创建了一些 Youtube 视频库。当它起作用时，它应该将页面主要部分（顶部）中的视频替换为单击的缩略图，并且右侧的文本也将替换为与该视频相关的文本。

文本替换似乎工作正常，但我遇到了一个问题，在交换过程中，iFrame 似乎被多次放置，因此视频播放 2-3 次。

Javascript 在下面——这是我错过的吗？

```
<script>
function replaceVideo(id) {
  originalSrc = jQuery("iframe", "#" + id).attr("src");
  autoPlay = originalSrc + "&autoplay=1";
  jQuery("iframe", "#" + id).attr("src", autoPlay);
  video = jQuery(".video-wrap", "#" + id).html();
  jQuery(".flex-video").html(video);
  text = jQuery(".video-description", "#" + id).html();
  jQuery(".vid_desc").html(text);
  jQuery("iframe", "#" + id).attr("src", originalSrc);
}

jQuery(".video-list li").click(function() {
  id = jQuery(this).attr("id");
  replaceVideo(id);
});

    jQuery(window).load(function() {
  if(window.location.search.substring(1)) {
        element = window.location.search.substring(1).split('&');
        if (document.getElementById(element[0])) {
            document.onload = replaceVideo(element[0]);
        }
    }
});
</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:05:08.563

`jQuery(".flex-video")`在您的 javascript 控制台中运行它。你会看到有三个具有该类的 div。所以`jQuery(".flex-video").html(video);`这行 JS 将 3 个元素的内部 HTML 更改为 iframe。

```
<div class="flex-video widescreen">
  <iframe width="583" height="328" src="http://www.youtube.com/embed/TWmFCX40BQc?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe>
</div> 
```

您需要使上述 div 与其他`flex-video`帧区分开来。给父 div 一个 id 或其他类或要查询的东西。这样做，然后你会没事的。

编辑：顺便说一句，这段代码是错误的：

```
if(window.location.search.substring(1))
{
    element = window.location.search.substring(1).split('&');
    if (document.getElementById(element[0])) {
        document.onload = replaceVideo(element[0]);
    }
} 
```

将 document.onload 设置为函数调用将调用 replaceVideo 并将`onload`属性设置为它返回的任何内容，这没什么。它可能会因为视频播放而起作用，但这只是因为您正在调用该`replaceVideo`方法。将您的 if 设置为此，可能对您来说就足够了（除非您可以解释为什么将其设置为`onload`）

```
if(document.getElementById(element[0]))
     replaceVideo(element[0]); 
```

# sql-server-2008 - 如何使用 SQL Server 2008 在 Windows 上保存 DTS 包？

> ID：15435501
> 
> 赞同：-1
> 
> 时间：2013-03-15T14:55:16.307
> 
> 标签：sql-server-2008, dts

我在 Windows 7 上安装了 SQL Server 2008 标准版。然后我可以从 C:\Program Files (x86)\Microsoft SQL Server\110\DTS\Binn\DTSWizard.exe 运行旧版 DTS 包向导。

我试图为这种情况导出。在向导结束时，我想保存 DTS 包，但收到以下消息：

在 SQL Server Express、Web 或 Workgroup 中，您可以运行导入和导出向导创建的包，但不能保存它。要保存向导创建的包，您必须升级到 SQL Server Standard、Enterprise、Developer 或 Evaluation。

实际上我已经安装了 SQL Server 2008 Standard。不知道为什么仍然收到此消息，我无法保存。

这种情况下如何保存 DTS 包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:29:12.863

我最近遇到了同样的问题。只需使用您的 sql server 安装来安装 Management Studio 和/或（对不起，我不记得哪个实际解决了问题）Visual Studio 的 BIDS 工具，您会没事的。您需要像安装新的 Sql Server 实例一样开始，然后选择“附加功能/工具”（或类似的东西）。

# blackberry - BlackBerry 中的 Horizo ntalFieldManager 对齐

> ID：15435503
> 
> 赞同：0
> 
> 时间：2013-03-15T14:55:27.827
> 
> 标签：blackberry, java-me

在水平方向上，我想显示两个自定义按钮，并在它们之间显示一个 BlackBerry 应用程序中的标签字段。我查看了“ [BlackBerry Horizo​​ntalFieldManager alignment](https://stackoverflow.com/questions/4183026/blackberry-horizontalfieldmanager-alignment) ”，但没有取得任何成功。这是我想在 BlackBerry 中创建的屏幕截图。 ![在此处输入图像描述](../Images/aab2c1fc19b5c64c1178d9f726318b9c.png)

**这是我为此屏幕创建的代码：**

```
 package mypackage;

import net.rim.device.api.system.Bitmap; 
import net.rim.device.api.ui.Field; 
import net.rim.device.api.ui.FieldChangeListener; 
import net.rim.device.api.ui.Font; 
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.XYEdges; 
import net.rim.device.api.ui.component.BasicEditField; 
import net.rim.device.api.ui.component.BitmapField; 
import net.rim.device.api.ui.component.ButtonField; 
import net.rim.device.api.ui.component.Dialog; 
import net.rim.device.api.ui.component.LabelField; 
import net.rim.device.api.ui.component.PasswordEditField; 
import net.rim.device.api.ui.container.HorizontalFieldManager; 
import net.rim.device.api.ui.container.MainScreen; 
import net.rim.device.api.ui.container.VerticalFieldManager; 
import net.rim.device.api.ui.decor.Background; 
import net.rim.device.api.ui.decor.BackgroundFactory; 
import net.rim.device.api.ui.decor.Border; 
import net.rim.device.api.ui.decor.BorderFactory;

  /**
 * A class extending the MainScreen class, which provides default standard * behavior   for BlackBerry GUI applications. */ public final class HelloBlackBerryScreen extends MainScreen { BasicEditField username; PasswordEditField password;

 /**
* Creates a new MyScreen object
*/ public HelloBlackBerryScreen() {   // Set the linear background.  this.getMainManager().setBackground(BackgroundFactory.createLinearGradientBackground(0x91e7ff,0x0099CCFF,0x00336699,0x91e7ff));
 // SET HEADER OF SCREEN VerticalFieldManager vfm = new
 VerticalFieldManager(Manager.USE_ALL_WIDTH); BitmapField header = new
 BitmapField(Bitmap.getBitmapResource("header.png"),FIELD_HCENTER);

 HorizontalFieldManager hfm = new
 HorizontalFieldManager(Field.FIELD_VCENTER |Manager.USE_ALL_WIDTH);
setTitle(header);

hfm.add(vfm); add(hfm);  

//SET Container 

 LabelField usernameTxt = new LabelField("Username:",LabelField.FIELD_TOP);

 usernameTxt.setFont(Font.getDefault().derive(Font.PLAIN, 30));

 usernameTxt.setMargin(20, 0, 0, 160);

 LabelField passwordTxt = new LabelField("Password :",LabelField.FIELD_BOTTOM);

  passwordTxt.setFont(Font.getDefault().derive(Font.PLAIN, 30));

  passwordTxt.setMargin(10, 0, 0, 160);

   username = new BasicEditField(BasicEditField.FIELD_BOTTOM);username.setMargin(10, 110, 0, 160);   //username.setMaxSize(getHeight());  
   username.setBorder(BorderFactory.createRoundedBorder(new XYEdges(3, 3,3, 3), 0x999999, Border.STYLE_FILLED));
   username.setBackground(BackgroundFactory.createSolidBackground(0xe0e0e0));
     password = new PasswordEditField();   password.setMargin(10, 110, 0,160);  password.setBorder(BorderFactory.createRoundedBorder(new
       XYEdges(3, 3, 3, 3), 0x999999, Border.STYLE_FILLED));
     password.setBackground(BackgroundFactory.createSolidBackground(0xe0e0e0));

  ButtonField loginBtn = new ButtonField("   Log-In   ", ButtonField.CONSUME_CLICK);   loginBtn.setMargin(30, 0, 0,240);
  ButtonField recoveryBtn = new ButtonField("Forget Password", ButtonField.CONSUME_CLICK);   recoveryBtn.setMargin(10, 0, 0,200);

  add(usernameTxt); add(username); add(passwordTxt); add(password);
  add(loginBtn); add(recoveryBtn);
  loginBtn.setChangeListener(btnlistener); } FieldChangeListener
  btnlistener = new FieldChangeListener() {

      public void fieldChanged(Field field, int context) {  
          //Open a new screen   
           String uname = username.getText();   
           String pwd   =password.getText();

        //If there is no input  if (uname.length() == 0 || pwd.length()==0)
          Dialog.alert("One of the textfield is empty!");       
          else if
          (uname.equals("user") && pwd.equals("admin"))
        UiApplication.getUiApplication().pushScreen(newwelcome());         
            //Open a
            new Screen else 
               Dialog.alert("Username or password not found!");     
             }

       };

         FieldChangeListener btnlistener2 = new FieldChangeListener() {

       public void fieldChanged(Field field, int context) {     
           screen if variables are not empty

            [1]: http://i.stack.imgur.com/PlDRu.png 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:40:38.827

为此，您需要像这样使用自定义管理器。

**此屏幕的主要字段管理器**

```
VerticalFieldManager vfm = new VerticalFieldManager(VerticalFieldManager.USE_ALL_HEIGHT
                |VerticalFieldManager.USE_ALL_WIDTH|VerticalFieldManager.FIELD_VCENTER|VerticalFieldManager.FIELD_HCENTER){
            //Override the paint method to draw the background image.
            public void paint(Graphics graphics){
                //Draw the background image and then call super.paint
                //to paint the rest of the screen.
                    graphics.setBackgroundColor(Color.DEEPSKYBLUE);
                graphics.clear();
                super.paint(graphics);
            }
        };

        add(vfm); 
```

并像这样添加自定义管理器

//在特定位置放置返回、主页图标和标题

```
HorizontalFieldManager customManager = new HorizontalFieldManager(HorizontalFieldManager
                .USE_ALL_WIDTH)
        {
            //Applying background color for that Manager
            public void paint(Graphics graphics)
            {
                graphics.setBackgroundColor(Color.DEEPSKYBLUE);//blue
                graphics.clear();
                super.paint(graphics);
            }
            //Placing the Fields
            protected void sublayout(int width, int height) {

                setPositionChild(
                        getField(0), 
                        0, 
                        0);
                layoutChild(
                        getField(0), 
                        getField(0).getPreferredWidth(), 
                        getField(0).getPreferredHeight());

                setPositionChild(
                        getField(1), 
                        Display.getWidth()/2 - getField(1).getPreferredWidth()/2, 
                        0);
                layoutChild(
                        getField(1), 
                        getField(1).getPreferredWidth(), 
                        getField(1).getPreferredHeight());    

                setPositionChild(
                        getField(2), 
                        Display.getWidth() - getField(2).getPreferredWidth(), 
                        0);
                layoutChild(
                        getField(2), 
                        getField(2).getPreferredWidth(), 
                        getField(2).getPreferredHeight());    

                setExtent(width, 50);
            }      
        }; 
```

//显示返回图标

```
 final Bitmap bmp1 = Bitmap.getBitmapResource("back.png");
  BitmapField bmpfield1 = new BitmapField(bmp1,BitmapField.FOCUSABLE|BitmapField.FIELD_LEFT); 
```

//显示主页图标

```
final Bitmap bmp2 = Bitmap.getBitmapResource("home.png");
BitmapField bmpfield2 = new BitmapField(bmp2,BitmapField.FOCUSABLE |BitmapField.FIELD_RIGHT); 
```

//显示标题

```
LabelField lbl = new LabelField("Login",LabelField.FIELD_VCENTER); 
```

//添加字段

```
customManager.add(bmpfield1);
customManager.add(lbl);
customManager.add(bmpfield2);
vfm. add(customManager); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:00:50.413

如果您想按照我从您的评论中了解到的那样将标题固定在顶部，您可以做的是创建一个`HorizontalFieldManager`并添加您的后退、标题和主页按钮，然后您可以使用[setTitle(hfm)](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/container/MainScreen.html#setTitle%28net.rim.device.api.ui.Field%29)在标题中设置该水平字段管理器. 同样，如果您还需要修复页脚，您可以使用`setStatus(hfm)`.

# c# - 清除 RDP 虚拟通道内容

> ID：15435505
> 
> 赞同：1
> 
> 时间：2013-03-15T14:55:34.483
> 
> 标签：c#, c++, rdp

我正在开发一种工具，用于从 RDP 客户端与 RDP 服务器进行字符串通信。通过 RDP 虚拟通道进行通信。

差不多完成了，但我需要在 Server-Start 上清除虚拟频道内容。我是说，

第一个上去的是客户端，由 MSTSC 应用程序加载。所以服务器端在通信交换上总是有点晚。我需要在服务器端启动之前清除所有通信的字符串。

我发现了这个清除功能（用于服务器和客户端）：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa383850(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383850(v=vs.85).aspx)

但是如果我使用它们中的任何一个，通信就会中断。没有错误，但双方没有传达任何信息。他们在文档中有这个注释：

```
'This function currently is not used by Remote Desktop Services.' 
```

我正在寻找开箱即用的东西。不是我自己开发的东西。

谢谢。

# jsf - JSF 表单 onload reset() 功能不起作用

> ID：15435507
> 
> 赞同：0
> 
> 时间：2013-03-15T14:55:44.703
> 
> 标签：jsf, primefaces

我正在使用 jsf 和 primefaces。我想在我的表单加载时调用重置功能。但到目前为止，我无法实现它。

```
<script type="text/javascript">
function reset(){

      alert("dsdsd");
      document.getElementById('A1938:create-ticket').reset();
       }
     window.onload=function(){reset();};
   </script>

<h:form id="create-ticket">
           <p:dialog id="dialog" header="Select different user" widgetVar="dlg" modal="true">

              <ui:include src="searchpopup.xhtml" />
         </p:dialog> 
```

这肯定不会起作用，因为 jsf 以不同的方式翻译页面。任何想法。

警报被调用。所以我再次希望表单在加载时自行重置，类似于 form.reset()

谢谢，赛德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:12:15.320

在页面加载时调用 reset 毫无意义。可能你误解了 的意思`reset()`。`form.reset()`不会**清除**输入字段，而是将输入值**重置**为其初始值。即，当您获得一个带有预填充输入的表单然后更改它们时，`reset()`它将使用初始值重新初始化它们，就像加载页面时一样。`reset()`因此，只有当初始值本身*已经*为空时，表单才会被清除。

因此，要实现您的具体功能要求，您需要直接清除 bean 属性，而不是摆弄`form.reset()`which 不会做您认为它做的事情。或者，更好的是，将 bean 放在请求或视图范围内，并确保表单由新的 GET 请求打开。

# wpf - 刷新数据网格项目而不丢失所选行 - XAML

> ID：15435513
> 
> 赞同：2
> 
> 时间：2013-03-15T14:55:57.413
> 
> 标签：wpf, xaml, wpfdatagrid

我有两个`datagrid'`（主/细节）。我`DispatcherTimer`每 5 秒刷新一次窗口。当我在我的主网格上选择任何行时，所选行上的焦点仅保留那 5 秒，之后选择焦点移动到最上面的行。

如何在 XAML 中克服这个问题？

**编辑**

```
 public partial class MyWindow : Window
{
    ProdEntities _prodEntities = new ProdEntities();

    public MyWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        try
        {
            RebindData();
            SetTimer();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
    }

    private void SetTimer()
    {
        DispatcherTimer dispatcherTimer = new DispatcherTimer();
        dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
        dispatcherTimer.Interval = new TimeSpan(0, 0, 5);
        dispatcherTimer.Start();
    }

    protected void dispatcherTimer_Tick(object sender, EventArgs e)
    {
        RebindData();
    }

    private void RebindData()
    {
        CollectionViewSource serversViewSource = (CollectionViewSource)(FindResource("serversViewSource"));
        IQueryable<Server> serversQuery = this.GetServersQuery(_prodEntities );
        serversViewSource.Source = serversQuery.ToList();

        //serversViewSource.View.Refresh();
    }

    private IQueryable<Server> GetServersQuery(ProdEntities _prodEntities)
    {
        var serversQuery = _prodEntities.Servers.Where(c => c.Components.Any());
        return serversQuery;
    }

    private void SaveChanges_Click(object sender, RoutedEventArgs e)
    {
        _prodEntities.SaveChanges();
    }       
} 
```

XAML

```
 <DataGrid AutoGenerateColumns="False" Foreground="DarkBlue"   DataContext="StaticResource serversComponentsViewSource}"
 ItemsSource="{Binding}" Name="componentsDataGrid"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:22:17.103

嗨，您需要在致电之前保留 DataGrid 的 SelectedItem

```
serversViewSource.Source = serversQuery.ToList(); 
```

然后将其分配回该 DataGrid 的 SelectedItem。但是，在将该对象分配回 SelectedItem 之前，您必须在 Collection 中找到与保留的 SelectedItem 具有相同值的项目。

```
private void RebindData()
    {
        CollectionViewSource serversViewSource = (CollectionViewSource)(FindResource("serversViewSource"));
        var selectedItem = (Server)componentsDataGrid.SelectedItem;
        IQueryable<Server> serversQuery = this.GetServersQuery(_prodEntities);
        serversViewSource.Source = serversQuery.ToList();

        foreach (var item in (IEnumerable<Server>)serversViewSource.Source )
        {
            if (selectedItem.PropName == item.PropName)//Compare the values here
            {
                componentsDataGrid.SelectedItem = item;
                break;
            }

        }
        //serversViewSource.View.Refresh();
    } 
```

# sql - Rails SQL 查询列在哪里？

> ID：15435515
> 
> 赞同：2
> 
> 时间：2013-03-15T14:56:04.677
> 
> 标签：sql, ruby-on-rails-3, autocomplete

我正在 Rails 中编写一个自动完成查询，它返回以键入的内容开始的项目。如何扩展它以包含句子中的所有单词？

例子：

项目：从控制台添加记录

如果用户搜索“控制台”，我如何将其包含在结果中并仍然保留第一个条件？

**我的查询**

```
SubCategory.where("name LIKE ?", "#{params[:q]}%") 
```

![订购结果](../Images/24b0b4bbd4e914ac41a726dca3bc00f2.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T16:38:30.133

所以，如果输入是*bla*，那么你想要

*   *bla*开头的名字
**   以及后跟*bla的空格的名称**

 *那将是：

```
YourModel.where("name LIKE ? OR name LIKE ?", "#{term}%", "% #{term}%") 
```*

# reporting-services - 将字段添加到 SSRS 2008 报告中的表达式中

> ID：15435517
> 
> 赞同：0
> 
> 时间：2013-03-15T14:56:08.463
> 
> 标签：reporting-services, ssrs-2008, field, ssrs-expression

提前感谢您抽出宝贵时间回答我的问题。

我在使用 SSRS 报告系统中的表达式时遇到问题。我正在从报告中提供的数据集中添加必填字段，但是当我尝试预览报告时，我收到以下消息：

> “用于报表参数 'Policies_Total' 的值表达式引用一个字段。字段不能用于报表参数表达式。”

这是我的表达：

```
=IIF(Sum(Fields!policy_id.Value, "DataSet1") Is Null, 0, Count(Sum(Fields!policy_id.Value, "DataSet1"))) 
```

这应该是从具有以下表达式的 Crystal 报表转换而来的：

```
If IsNull ({usp_rep_agent_cases;1.policy_id}) then
    0
Else
    Count ({usp_rep_agent_cases;1.policy_id}) 
```

任何帮助深表感谢。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:08:05.280

我认为在大多数情况下创建字段之前，应该将“参数”传递到 SSRS 中，这可能很简单。如果此参数取决于首先选择的其他值的值，则您不能首先列出它，因为据我所知，该字段尚未填充。当您只是创建数据集并直接引用该字段时，您似乎正在尝试使用表达式从数据集中的字段中计算某些内容。因此，您可以选择其他一些选项，而不是尝试表达式：

1.  在参数“可用值”的左侧窗格中选择“从查询中获取值”。您可以使用作为“数据集”的查询，值是不言自明的，标签是最终用户将看到的显示内容。

2.  选项“允许空”值将接受空值

您可能会遇到需要使用多个数据集、多个选择或查询对象的情况。根据我使用 SSRS 的经验，当您尝试引用用于显示数据的数据集和用于确定事件或操作的数据集时，有时会很生气。SSRS 也会使相对性变慢，您这样做的表达式越多，只使用表达式就可以完成整个报告，而不是利用 RDL 语言的内置功能，恕我直言，这并不值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:16:32.600

对于您需要`IsNothing`用于`NULL`检查的 SSRS 表达式，例如：

```
=IIF(
  IsNothing(Sum(Fields!policy_id.Value, "DataSet1"))
  , 0
  , Count(Sum(Fields!policy_id.Value, "DataSet1"))
) 
```

事实上，整个表达方式似乎有点奇怪。你特别想用你的表达来实现什么？你只是想计算非空值吗？

```
=Sum(IIf(IsNothing(Fields!policy_id.Value), 1, 0), "DataSet1") 
```

此外，您的错误似乎是在不允许参数引用字段时，这可能无法通过更改语法来解决；我认为这里需要更多关于你想要达到的目标的信息。

# javascript - 骨干扩展功能错误

> ID：15435521
> 
> 赞同：0
> 
> 时间：2013-03-15T14:56:24.970
> 
> 标签：javascript, backbone.js

我有以下收藏模型

```
define([
  'underscore',
  'backbone',
  'models/domain'
], function(_, Backbone, DomainModel){
  var DomainCollection = Backbone.Collection.extend({
    model : DomainModel,
    getAll : function() {
      console.log('test');
    }.
  });   // <--- error here
  return DomainCollection;
}); 
```

它会抛出错误或在上面指定的行上：

> SyntaxError: 需要一个标识符，但找到了 '}'

如果我删除该`getAll`功能，它可以工作。有谁明白为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:58:23.603

```
getAll : function() {
  console.log('test');
}. // <---- error here 
```

应该更像：

```
var DomainCollection = Backbone.Collection.extend({
  model : DomainModel,
  getAll : function() {
    console.log('test');
  } // no period
}); 
```

# android - 如何在android中比较字符串和字符数组？

> ID：15435524
> 
> 赞同：0
> 
> 时间：2013-03-15T14:56:38.947
> 
> 标签：android, string, character-arrays

我有一个字符串`"sss"`和一个字符数组`{'s','s','s'}`。我将数组转换为字符串，但在比较它们时不会打印**“两者相等”的消息。**为什么？

```
public class RoughActivity extends Activity 
{
 private Button checkButton;
 private TextView text;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
        start();
        }

        private void start() {
            int i;
            checkButton=(Button)findViewById(R.id.go);
            text=(TextView)findViewById(R.id.display);
            final String question="sss";
            final char answer[]=new char[question.length()];
            for(i=0;i<question.length();i++)
            {
                answer[i]='s';
            }
            checkButton.setOnClickListener(new View.OnClickListener(){ //on clicking the button,the text must be filled with "both are equal"
                public void onClick(View v){
                    if(question.equals(answer))
                    {
                        text.setText("both are equal");
                    }

                }});
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T14:58:40.613

从 char 数组创建一个新字符串并进行比较。

```
If(question.equals(new String(answer)){
} 
```

或者

```
If(question.equals(answer.toString()){
} 
```

话虽如此，我无法想象您为什么要尝试将答案存储在 char[] 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:02:48.463

```
public boolean equals (Object object) 
```

此方法将指定对象与此字符串进行比较，如果相等则返回 true。该对象必须是具有相同字符且顺序相同的字符串实例。

> 因此，首先您需要使用 toString 方法将其转换为 first 为 String 。

例如：

```
String string = charArray.toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:02:54.710

你可以使用循环。

```
boolean equal = true;
for (int i = 0; i < answer.length; i++) {
      if (!question.charAt(i) == answer[i] {
           equal = false;
           break;
      }
 } 
```

我认为这应该有效。

# jquery - jQuery 选择器 - 检查当前 div 属性是否包含文本？

> ID：15435528
> 
> 赞同：2
> 
> 时间：2013-03-15T14:56:55.813
> 
> 标签：jquery, jquery-selectors, attributes

我的代码正在遍历一些 div，我试图找到在其 style 属性中包含某些文本的那个。这是我最好的尝试，但没有找到。

```
$("#RootDiv > div").each(function (index)
{
    if ($(this).is("[style~='bg-stripes.gif']"))
            alert("found");
}); 
```

html

```
<div id="RootDiv">
<div style="background-color: White;"></div>
<div style="background-image: url(bg-stripes.gif);"></div>
<div style="background-color: White;"></div></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:07:21.387

尝试改用`*=`选择器：

```
$(this).is("[style*='bg-stripes.gif']") 
```

选择`~=`器仅适用于单个单词而不是子字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:03:57.123

正如@FelixKling 所说，您不需要使用选择器，我认为在这种特殊情况下使用选择器会更加混乱，您可以简单地尝试：

```
if ($(this).attr('style').indexOf('bg-stripes.gif') > -1 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:03:13.737

运算符查找空格分隔的`~=`单词，这可能不适合该`style`属性。

尝试改用`*=`“包含”运算符。您也可以在原始选择器中组合它：

```
$("#RootDiv > div[style*='bg-stripes.gif']")... 
```

这将为您提供所需的元素，而无需对它们进行迭代并`.is()`单独测试它们。

# mongodb - 使用 MongoDB 生成的 _ids 作为“秘密数据”（例如，OAuth 令牌）

> ID：15435530
> 
> 赞同：5
> 
> 时间：2013-03-15T14:57:17.527
> 
> 标签：mongodb

MongoDB`_id`字段是否足够随机/不可猜测以充当秘密数据？

例如：如果我正在构建服务器端 OAuth，我可以使用 _id 作为用户的 OAuth 令牌吗？我想这样做是因为它为数据库提供了清洁度和可索引性（例如，“tokens._id”=> oauth_token）。

检查 MongoDB _id 对象的结构，它们似乎是相当随机的，但我确实对恶意实体蛮力猜测一个存在一些挥之不去的担忧。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T15:25:54.450

In short, no. Mongo `ObjectIds` are easy to guess. In particular, under high load, these are often consecutive numbers, because timestamp, machine and process id don't change. If you look at [the structure of Objectid](http://docs.mongodb.org/manual/core/object-id/), they are composed of

```
a 4-byte timestamp, 
a 3-byte machine identifier, 
a 2-byte process id, and 
a 3-byte counter, starting with a random value. 
```

Hence, they have very little randomness. I often see consecutive ids in the database, for instance if some controller action writes a domain object, and a log entry in quick succession.

If the timestamp can be guessed and the machine id is determinable (which it is unless you have a huge cluster), there are only five bytes left. By looking at a number of generated ids, I can probably reduce that to like 50 processes so the effective entropy is somewhere in the 28 bit range. This is still hard to guess, but it's way too risky for an access token.

Use a cryptographically strong pseudo random number generator instead and create a token from that. For example, in .NET, the `RNGCryptoServiceProvider` allows to create arbitrary length random data.

As a sidenote, I suggest to have an additional cryptographic wrapper around your OAuthTokens, for two reasons:

a) You want to be able to determine invalid tokens quickly. A valid cryptographic shell might still include an invalid token (a revoked or expired grant), but you don't have to hit the database on brute force attacks every time. Also, the client

b) Clients can request tokens over and over. While it's not a requirement, almost all systems I know return different tokens every time (no matter if they are self-validating or not). Usually, that's because the token itself has a limited validity period. That is not the same validity period that the OAuth grant has.

In the database, what you really want to store is the grant, i.e. the permission that was given by some user to some client. If this grant is removed, all tokens become invalid. Inserting a new token every time is very unhandy because the user would have to delete all of them to effective remove the application grant.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:22:32.550

尽管非常困难，但猜测它是可能的。实际上，猜测大多数其他 OAuth 令牌可能会更好。

它如何变得非常困难的一个例子是它包含 PID。如果您使用的是 PHP 之类的语言，那么 PID 会随着生成的每个 PHP 进程而变化，这意味着每个进程都`_id`可能有自己的移动 PID，并且是完全随机的，当然这取决于您运行 PHP 的模式；如果在 fcgi 模式下，那么 PID 可能是恒定的。

mahcine id 也是另一个。大多数网站都有为其数据库自动扩展的服务器集群，所以即使在重负载等情况下，唯一真正可预测的变量是很多情况下的时间戳，即使那样，由于它是毫秒级的，它仍然不是很容易猜测; 您需要确切地知道该网站需要多少流量才能构建一种算法来以合理的方式计算时间。当然，首先装饰该信息的唯一方法是实际获取它的_id，catch 22。

然而，考虑到这一点，我能想到暴力破解的唯一方法`_id`是获得足够的计算能力来迭代所有可能存在的 ObjectId（考虑到 ObjectId 变量的随机性，这里可能是数万亿/无限），然后 ping 那些到数据库中的每个 App ID（您应该始终要求 OAuth 令牌和 App ID），这再次提供了另一个层次的神秘感。

所以在我看来，是的，有人可以蛮力，但需要大量的计算能力，甚至可能需要几年时间才能破解一些不值得的东西。

# php - 动态生成的内容 DIV

> ID：15435533
> 
> 赞同：0
> 
> 时间：2013-03-15T14:57:20.537
> 
> 标签：php, javascript, jquery, tags

我已经看到了引导 github 页面以及他们如何处理侧边栏，该侧边栏向下滑动并具有文章的所有标题。

我正在尝试一种可以建立在当前系统上的方法，该系统手动输入每个锚点并为其创建链接。

目前我有

```
<h1>Main Title</h1>
<a href="#Para5" class="scroll">Para5</a>
<a href="#Para10" class="scroll">Para10</a>
<a href="#Para15" class="scroll">Para15</a>
<a href="#Para20" class="scroll">Para20</a>
<br/>
<h2>Para1</h2>
     <p>.....</p>
<h2>Para2</h2>
     <p>.....</p>
<h2>Para3</h2>
     <p>.....</p>
<h2>Para4</h2>
     <p>.....</p>
<h2>Para5</h2>
     <p>.....</p>
etc... 
```

然后，我必须手动添加此类标题的 id，旨在让每 5 个标题都有一个链接和一个显示“全部显示”的按钮，该按钮将显示页面的所有标题。

创建页面时，我使用 HTML 嵌入式文本编辑器输入，因此代码是不可见的并存储在 MySQL 数据库中。

我只想输入标题和段落，然后输入主页标题，但要让链接在主标题下方动态插入页面。

1.  捕获 h2 和 /h2 之间的文本，为其创建链接和 ID。对页面上的所有 h2 执行此操作。

我一辈子都想不到如何从 PHP 创建的页面中捕获这样的信息。

页面的处理可以在后期使用 jQuery 和 Javascript 或在 PHP 中进行。

更喜欢用 PHP 做事。

* * *

忽略第五个元素。

```
<h1>Main Title</h1>
<div id="paraNav">
</div>
<br/>
<div id="headings">
<h2>Para1</h2>
     <p>.....</p>
<h2>Para2</h2>
     <p>.....</p>
<h2>Para3</h2>
     <p>.....</p>
<h2>Para4</h2>
     <p>.....</p>
<h2>Para5</h2>
     <p>.....</p>
</div> 
```

目的是获取标题的文本，例如：

```
$('#headings h2').each(function(i,$el){
    var headingTitle = $el.text;  **  
      document.write('<a href="#headingTitle" class="scroll">headingTitle</a>')
    $('h2').append.attr({
         'id':headingTitle
    });
}); 
```

**不确定该位是否存在。（获取标签之间的内容/值/文本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:12:17.810

你可以用 jQuery 做到这一点。

这是快速而肮脏的，但可能会让你开始。我没有测试过这个。可能存在语法错误。

```
var linkArray = [];

$('h2:nth-child(5)').each(function () {
    linkArray.push({
        text: $(this).text,
        // href: $(this).id
    });
});

for (var i = 0; i < linkArray.length; i++) {
    $('#linkcontainer').append('<a href="' + linkArray[i].text + '">' + linkArray[i].text + '</a>');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:14:45.597

我认为 jQuery 有一些更好的工具来做你想做的事。如果您尝试使用 PHP 来做这件事，这可能是一项草率的工作，而 jQuery 您可以用几行代码来完成。就像是

```
$('#content h2:nth-of-type(5n)').each(function(i,$el){
    ver headingId = $el.attr('id');
    $('#contentNav').append(
        $('<a/>').html(headingId).attr({
            'href':'#'+headingId,
            'class':'scroll'
        })
    );
}); 
```

# javascript - 屏蔽文本输入

> ID：15435534
> 
> 赞同：1
> 
> 时间：2013-03-15T14:57:27.197
> 
> 标签：javascript, html, placeholder

嘿，我正在尝试制作一个类似这样的简单输入文本。

```
<input type="text" id="pin" name="pin" maxlength="4" size="4" placeholder="____"> 
```

现在在前端，我希望该占位符保留，直到用户键入所有字符。

例如：

```
1___
12__
123_
1234 
```

这清楚吗？谢谢您的帮助

编辑：让我更清楚地说明这一点。我希望占位符或模拟占位符的东西在输入所有字符之前保持可见！这意味着当我输入一个字符时，它并没有消失。它在尚未输入的字符上插入下划线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:07:57.187

占位符默认情况下不会这样工作，因为这是一个坏主意。以这种情况为例：

```
<input type="text" placeholder="Type something here!"/> 
```

如果用户开始输入“Hello, world!”，过程将是：

```
"Hype something here!"
"Hepe something here!" ...
"Hellosomething here!" ...
"Hello world!ng here!" 
```

如果您的占位符几乎不可见，这会很好，但在大多数情况下，这会很丑陋并且可能也会令人困惑 - 用户可能会认为他们必须准确输入作为占位符的内容，或者他们可能会尝试清除输入完全没有成功。

占位符只是为文本输入元素提供虚拟内容*，直到*添加了真实内容。

# shell - 替换sql文件中括号中的字符串

> ID：15435538
> 
> 赞同：0
> 
> 时间：2013-03-15T14:57:36.387
> 
> 标签：shell, unix

我需要批量替换许多 sql 文件中的字符串（最好在 shell 中）。我需要替换的字符串看起来像这样`(20120408, 20120409, 20120410)`，但它里面可以有任意数量的空格（虽然不是数字）。例如它可以是

```
(20120408,  20120409   , 20120410 ) or 
(    20120408   , 20120409   ,    20120410) 
```

我需要放一些其他的字符串，比如说（XXX）而不是它。括号必须保留。

在此先感谢您的帮助。

编辑。

让我更具体一点。我只需要将上述类型的字符串转换为（xxx）。这意味着数字很重要。我不想只替换两个括号之间的任何东西，所以如果我有 (19002344) 我不希望它被替换。

唯一需要替换的是上面括号中的三个数字，中间有任意数量的空格。

希望这能消除误解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:03:09.783

这个怎么样？

```
sed -e 's/20120408/XXX/' -e 's/20120409/YYY/' -e 's/20120410/ZZZ/' input 
```

输出：

```
(XXX,  YYY   , ZZZ ) or 
(    XXX   , YYY   ,    ZZZ) 
```

或一气呵成：

```
$ sed 's/20120408\|20120409\|20120410/XXX/g' input
(XXX,  XXX   , XXX ) or 
(    XXX   , XXX   ,    XXX) 
```

**更新**

```
$ cat input
(    20120408,  20120409   , 20120410 )
( 20120408,  20120409   , 19002344 )

$ sed 's/^(\s*20120408\s*,\s*20120409\s*,\s*20120410\s*)$/(xxx)/' input
(xxx)
( 20120408,  20120409   , 19002344 ) 
```

以上假设每行一个条目；如果有几个使用这个代替：

```
sed 's/(\s*20120408\s*,\s*20120409\s*,\s*20120410\s*)/(xxx)/g' input 
```

# three.js - 三.js 3ds 文件加载慢

> ID：15435540
> 
> 赞同：1
> 
> 时间：2013-03-15T14:57:47.073
> 
> 标签：three.js

我正在使用 Three.js 来显示 3d 点基因数据。作为项目的一部分，我还需要展示一个用 3ds 开发的“模型”。我使用Blender将3ds文件转换为jason。文件大约7K。我正在使用以下方法加载文件：

```
loader.load( "temp.js", function( geometry ) {
    mesh = new THREE.Mesh( geometry, new THREE.MeshNormalMaterial() );
    scene.add( mesh ); } ); 
```

代码运行良好，但图像显示需要一分钟多的时间。一旦在屏幕上它很好，旋转，缩放，......它只是看起来很慢的初始过程。有没有办法加快这个速度？

谢谢，

格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:26:57.697

尝试从 3ds 导出 obj。然后使用 OBJLoader 加载模型。应该很快。

# mysql - 需要 SQL 查询来查找每天在两个不同时段有活动的用户

> ID：15435541
> 
> 赞同：0
> 
> 时间：2013-03-15T14:57:49.593
> 
> 标签：mysql, sql

我正在尝试对我们基于 Web 的应用程序的使用情况进行一些分析。我有一个包含以下列电子邮件地址活动日期的表格

我想创建一个查询来回答这个问题：对于过去 180 天内的每一天，有多少人在 60 到 30 天之前进行了活动，并且在 30 到 0 天之前进行了活动。

我已经把它作为一个存储过程工作，我在过去的 180 天中逐字循环（使用每天 1 行的日期表），但这有点慢，因为我正在执行 180 个查询。

我还尝试使用带有 IN 子句的查询来完成此操作，但完成大约需要 5 分钟（该表总共只有大约 2,000 行，所以我猜它是高度未优化的）

我将如何使用一个优化的查询（甚至是存储过程）来做到这一点？

如果有帮助，这是当前存储的过程（可以工作但速度很慢）：

```
BEGIN
    DECLARE mydate DATE;
    DECLARE period1 INT;
    DECLARE period2 INT;
    DECLARE done INT;

    DECLARE cur CURSOR FOR SELECT date_value from dim_date  order by date_value DESC;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
    SET done = 0;
    OPEN cur;

    REPEAT

    FETCH cur INTO mydate;
    IF NOT done THEN
  REPLACE INTO churn (payment_received,period2,period1,churn_name)

    select
mydate, 
count(distinct(case when (sales.payment_received BETWEEN DATE_SUB(mydate,INTERVAL p2 month) AND DATE_SUB(mydate,INTERVAL p1 month)) then email end)) AS period2,
(
select count(distinct(case when (sales.payment_received BETWEEN DATE_SUB(mydate,INTERVAL p1 month) AND mydate) then email end))
from sales where subscription = 1 AND email in (select email from sales where sales.payment_received BETWEEN DATE_SUB(mydate,INTERVAL p2 month) AND DATE_SUB(mydate,INTERVAL p1 month) ) 
) 
AS period1,
churn_name as cname
from sales 
where subscription = 1;

    END IF;    
    UNTIL done END REPEAT;
    CLOSE cur;

END;; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:31:24.387

我将继续假设这`dim_date`是一个日历表（非常方便的东西）它可能也很高兴知道你可能有什么（如果有的话）索引，但是在 2000 行时，一个像样的 RDBMS 可能会将整个表加载到内存*无论如何*，所以这可能不是一个因素。

不幸的是，无论你怎么看，这种类型的分析都需要时间。我相当肯定将其转换为完全基于集合的方法会加快速度，但我没有真正测试的实例。我将首先像这样重写语句：

```
SELECT Dim_Date.date_value, 
       COUNT(DISTINCT Period_2.email), COUNT(DISTINCT Period_1.email),
       Period_1.churn_name
FROM Dim_Date
JOIN Sales Period_2
  ON Period_2.payment_received >= DATE_SUB(Dim_Date.date_value, INTERVAL 60 DAY)
     AND Period_2.payment_received < DATE_SUB(Dim_Date.date_value, INTERVAL 30 DAY)
     AND Period_2.subscription = 1
LEFT JOIN Sales Period_1
       ON Period_1.payment_received >= DATE_SUB(Dim_Date.date_value, INTERVAL 30 DAY)
          AND Period_1.payment_received < Dim_Date.date_value
          AND Period_1.subscription = 1
          AND Period_1.email = Period_2.email
          AND Period_1.churn_name = Period_2.churn_name
WHERE Dim_Date.date_value >= DATE_SUB(CURRENT_DATE, INTERVAL 180 DAY)
      AND Dim_Date.date_value < CURRENT_DATE
GROUP BY Dim_Date.date_value, Period_1.churn_name 
```

该语句应该运行，但未经测试。
（......我不确定我最初在这里的想法，我没有关联*每个用户*的两组......）

一件事-您似乎没有`subscription = 1`作为最内层子查询的条件；我不知道这是故意的，还是疏忽。我还假设`churn_name`应该是相关的，不管是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:47:35.457

第 1 步）获取上个月有活动的用户（DISTINCT，因为我们不在乎上个月有多少次，只是天气他们完全活跃）：

```
SELECT DISTINCT email
FROM sales 
WHERE payment_received BETWEEN NOW() AND DATE_ADD(NOW(),INTERVAL -1 MONTHS) 
```

步骤 2) 获取 1-2 个月前有活动的用户：

```
SELECT DISTINCT email
FROM sales 
WHERE payment_received BETWEEN DATE_ADD(NOW(),INTERVAL -1 MONTHS) AND DATE_ADD(NOW(),INTERVAL -2 MONTHS) 
```

步骤 3) 将这些加入到一个结果集中

```
SELECT M1.email
FROM (
  SELECT DISTINCT email
  FROM sales 
  WHERE payment_received BETWEEN NOW() AND DATE_ADD(NOW(),INTERVAL -1 MONTHS)
) M1,
(
  SELECT DISTINCT email
  FROM sales 
  WHERE payment_received BETWEEN DATE_ADD(NOW(),INTERVAL -1 MONTHS) AND DATE_ADD(NOW(),INTERVAL -2 MONTHS)
) M2
WHERE M1.email = M2.email 
```

# mercurial - 我应该如何：管理一个项目的 2 个生活分支

> ID：15435543
> 
> 赞同：1
> 
> 时间：2013-03-15T14:57:54.763
> 
> 标签：mercurial

我有一个使用 Mercurial 管理的 Web 项目。

“默认”分支是主要的。我们在我的公司中使用它作为发布分支。

现在我需要«克隆»这个版本来为新消费者添加自定义表单：我创建了一个新分支：“idea”

当我发现默认错误时，我只需要将“默认”合并到“想法”中，并且该修复可用于 fork。

但是当我在一个版本中修复“idea”中的一个错误时，我如何将它应用到默认而不在默认分支中添加自定义表单？

在这种情况下，我需要默认合并 rev 110 和 111，但只有这些 rev

```
o  111[tip]   3d14d9c9096d   2013-03-14 18:11 +0100   darius
|    ajout de la gestion des droit sur etat de tickets
|
o  110   5be5e130241c   2013-03-14 16:49 +0100   darius
|    correction bug unité article
|
o    109:100,108   8c2ea9d76a2f   2013-03-14 16:44 +0100   darius
|\     fusion avec default
| |
| @  108   7d175b11327f   2013-03-14 16:36 +0100   darius
| |    correction du bug des unité
| |
| o  107   adc0dcf2bfc8   2013-03-14 14:59 +0100   darius
| |    correction taille bar
| |
| o  106   f41472a6c515   2013-03-14 14:44 +0100   darius
| |    correction js des popup de fichiers attaché
| |
| o  105   e5c7e243bcca   2013-03-13 17:15 +0100   darius
| |    correction bug de blocnote et z-index typeahead
| |
| o  104   72566ddba6b3   2013-03-08 12:28 +0100   darius
| |    ajout des graphes d'activité par client
| |
| o  103   d069dfb24006   2013-03-08 10:09 +0100   darius
| |    correction du bug de blocnote supprimé a cause de char null dans le blocnote
| |
| o  102   6dc51702fde0   2013-03-07 18:06 +0100   darius
| |    ajout du lien de fichier qui ouvre dans une autre fenetre
| |
| o  101:99   96f6af3df7f7   2013-03-07 17:12 +0100   darius
| |    refractoring des stats dans une appli ticket_stats et ajout du activite by clien
| |
o |  100:97,99   941134915ff0   2013-03-06 15:34 +0100   darius
|\|    Fusion avec default
| |
| o  99   67a2e2f2b263   2013-03-06 15:11 +0100   darius
| |    correction click sur adress mail dans les ticket
| |
| o  98:95   a20ba888c900   2013-03-06 12:26 +0100   darius
| |    correction du bug des accents dans les nom de fichiers et de la modif d'activite
| |
o |  97   b1930e15c1be   2013-03-05 17:59 +0100   darius
| |    modif du settings.dev_on_prod et du formulaire de ticket
| |
o |  96:92,95   a51f00d107d7   2013-03-05 17:55 +0100   darius
|\|    Fusion avec default
| |
| o  95   f3f3234f38e6   2013-03-05 17:54 +0100   darius
| |    ajout des user pas admin ok
| |
| o  94   2c0e09aab0ab   2013-03-05 17:43 +0100   darius
| |    correction bug de creation d'utilisateur via admin
| |
| o  93:91   051d00064aba   2013-03-05 17:38 +0100   darius
| |    retrait du cache sur les ticket a cause de boucles recursive au niveau du cache
| |
o |  92:89,91   0d7ce90cd324   2013-03-05 17:08 +0100   darius
|\|    Fusion avec default
| |
| o  91   43357d05bdd6   2013-03-05 17:07 +0100   darius
| |    correction cas ou pas de hierarchie
| |
| o  90:88   984da3636ded   2013-03-05 16:12 +0100   darius
| |    correcion bug creation contacts
| |
o |  89   605374295adc   2013-03-05 15:14 +0100   darius
|/     ajout de la branche idea
|
o  88   2f699fca00d5   2013-03-05 15:12 +0100   darius
|    mise a jour des libs required
|
o  87   f37e580921cc   2013-03-05 14:32 +0100   darius
|    ajout du cache sur les objet Cegid
| 
```

对不起我糟糕的英语。这不是我的母语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:48:22.633

最好只在默认分支中提交修复。如果已经在“idea”分支中提交了修复，那么最好的做法是将修复变更集导出为补丁，并将此补丁应用到默认分支。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T19:27:02.190

这看起来像是贪污的工作。

```
hg -v help graft

This command uses Mercurial's merge logic to copy individual changes from
other branches without merging branches in the history graph. This is
sometimes known as 'backporting' or 'cherry-picking'.
... 
```

在您的情况下，您需要：`hg graft "110::111"`

编辑：看起来你已经在 108 上，否则>`hg update 108`

# c++ - std::function typedef 中的参数名称

> ID：15435547
> 
> 赞同：3
> 
> 时间：2013-03-15T14:58:04.013
> 
> 标签：c++, c++11, boost, std-function, boost-function

我知道我可以[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)像这样 typedef ：

```
typedef std::function<void (const std::string&)> TextChangedHandler 
```

是否允许在 typedef 中指定参数名称，以使其更具自文档性？例如：

```
typedef std::function<void (const std::string& text)> TextChangedHandler 
```

我可以添加参数名称，它在 Visual C++ 2010 上编译得很好，但我想确保 C++03/C++11 标准允许它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T15:16:48.627

是的。

这种指定函数类型而没有命名函数的声明符的形式在语法上是*type-id* (8.1)：

```
type-id:
    type-specifier-seq abstract-declarator[opt]

abstract-declarator:
    ptr-operator abstract-declarator[opt]
    direct-abstract-declarator

direct-abstract-declarator:
    direct-abstract-declarator[opt] ( parameter-declaration-clause ) cv-qualifier-seq exception-specification
    direct-abstract-declarator[opt] [ constant-expression ]
    ( abstract-declarator ) 
```

*parameter-declaration-clause*语法与普通函数声明中的语法相同，它允许每个参数有名称（*declarator*）或没有名称（*abstract-declarator*）（8.3.5）：

```
parameter-declaration-clause:
    parameter-declaration-list[opt] ...[opt]
    parameter-declaration-list[opt] , ...

parameter-declaration-list:
    parameter-declaration
    parameter-declaration-list , parameter-declaration

parameter-declaration:
    decl-specifier-seq declarator
    decl-specifier-seq declarator = assignment-expression
    decl-specifier-seq abstract-declarator[opt]
    decl-specifier-seq abstract-declarator[opt] = assignment-expression 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T15:06:52.007

是的，您可以像使用常规函数指针一样指定参数名称。请记住，尽管这些名称仅对记录功能有价值，但它们没有“真正的”效果。

# python - 用numpy计算欧几里得距离

> ID：15435551
> 
> 赞同：1
> 
> 时间：2013-03-15T14:58:23.173
> 
> 标签：python, numpy

我有一个点集，我将其坐标存储在三个不同的数组（xa、ya、za）中。现在，我想计算这个点集（xa[0]、ya[0]、za[0] 等）的每个点与另一个点集（xb、yb、zb）的所有点之间的欧几里得距离) 并且每次都将最小距离存储在一个新数组中。

假设 xa.shape = (11,), ya.shape = (11,), za.shape= (11,)。分别为xb.shape = (13,), yb.shape = (13,), zb.shape = (13,)。我想做的是每次取一个xa[]，ya[]，za[]，并计算它与xb，yb，zb的所有元素的距离，最后将最小值存储到xfinal中。形状 = (11,) 数组。

您认为 numpy 可以实现这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T15:42:13.803

一个不同的解决方案是使用来自 scipy 的空间模块，特别是 KDTree。

这个类从一组数据中学习，并且可以在给定一个新数据集的情况下进行询问：

```
from scipy.spatial import KDTree
# create some fake data
x = arange(20)
y = rand(20)
z = x**2
# put them togheter, should have a form [n_points, n_dimension]
data = np.vstack([x, y, z]).T
# create the KDTree
kd = KDTree(data) 
```

现在，如果您有一个点，您可以通过以下方式询问最近点（或 N 个最近点）的距离和索引：

```
kd.query([1, 2, 3])
# (1.8650720813822905, 2)
# your may differs 
```

或者，给定一个位置数组：

```
#bogus position
x2 = rand(20)*20
y2 = rand(20)*20
z2 = rand(20)*20
# join them togheter as the input
data2 = np.vstack([x2, y2, z2]).T
#query them
kd.query(data2)

#(array([ 14.96118553,   9.15924813,  16.08269197,  21.50037074,
#    18.14665096,  13.81840533,  17.464429  ,  13.29368755,
#    20.22427196,   9.95286671,   5.326888  ,  17.00112683,
#     3.66931946,  20.370496  ,  13.4808055 ,  11.92078034,
#     5.58668204,  20.20004206,   5.41354322,   4.25145521]),
#array([4, 3, 2, 4, 2, 2, 4, 2, 3, 3, 2, 3, 4, 4, 3, 3, 3, 4, 4, 4])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:15:14.143

您可以使用 计算每个 xa 到每个 xb 的差异`np.subtract.outer(xa, xb)`。到最近的 xb 的距离由下式给出

```
np.min(np.abs(np.subtract.outer(xa, xb)), axis=1) 
```

要将其扩展到 3D，

```
distances = np.sqrt(np.subtract.outer(xa, xb)**2 + \
    np.subtract.outer(ya, yb)**2 + np.subtract.outer(za, zb)**2)
distance_to_nearest = np.min(distances, axis=1) 
```

如果您真的想知道*哪个*b 点是最近的，请使用`argmin`代替`min`.

```
index_of_nearest = np.argmin(distances, axis=1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:42:44.337

有不止一种方法可以做到这一点。最重要的是，内存使用和速度之间存在权衡。这是浪费的方法：

```
s = (1, -1)
d = min((xa.reshape(s)-xb.reshape(s).T)**2
     + (ya.reshape(s)-yb.reshape(s).T)**2
     + (za.reshape(s)-zb.reshape(s).T)**2), axis=0) 
```

另一种方法是迭代设置的点`b`以避免扩展到完整的矩阵。

# php - 函数中 foreach 循环的位置

> ID：15435555
> 
> 赞同：0
> 
> 时间：2013-03-15T14:58:29.977
> 
> 标签：php, mysql, arrays

我正在尝试从我的数据库中提取客户订单，但是我目前拥有的代码仅显示来自一个订单的数据，但客户可能会下多个订单。因此，我知道我需要添加一个 foreach 循环，但是我对它们很陌生，并且不确定确切的位置以及如何在我的代码中使用它。我的 $order_id 变量同时显示了 $order_id，所以我认为它需要高于 $order_detail，因此对于每个 order_id，显示详细信息

```
function viewOrders($session_mem_id){
//This block grabs the orders
$order_list = "";
//Selecting all the orders in the table from that member
$sql = mysql_query("SELECT `order_id` FROM `transactions` WHERE `mem_id` = $session_mem_id") or die(mysql_error());

$orderCount = mysql_num_rows($sql);
if ($orderCount > 0) {
    while($row = mysql_fetch_array($sql)){
        //creating variables from the information
        $order_id = $row["order_id"];

    }

    $order_details = mysql_query("SELECT * FROM `transactionDetails` WHERE `order_id` = $order_id") or die(mysql_error());
    $orderDetailsCount = mysql_num_rows($order_details);
    while($row = mysql_fetch_array($order_details)){
        //creating variables from the information
        $order_product_id = $row["Product_ID"];
        $order_product_price = $row["Price"];
        $order_product_quantity = $row["Quantity"];
        $order_List .='<tr>';
        $order_List .='<td>' . $order_id .'</td>';
        //$order_List .='<td><a href="product.php?id=' . $order_product_id . '">' . $product_name . '</a></td>';
        $order_List .='<td>Â£' . $order_product_price .'</td>';
        $order_List .='<td>' .$order_product_quantity .'</td>';
        $order_List .='</tr>';
        }
    } else {
    //displaying a message if no products were found
    $order_list = "You have no orders to display";
}
print_r($order_List);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:06:51.593

尝试这个：

```
<?php
function viewOrders($session_mem_id)
{
    //This block grabs the orders
    $order_list = "";
    //Selecting all the orders in the table from that member
    $sql = mysql_query("SELECT `order_id` FROM `transactions` WHERE `mem_id` = $session_mem_id") or die(mysql_error());

    while ($transactions = mysql_fetch_array($sql)) {
        //creating variables from the information
        $order_id = $transactions["order_id"];

        $order_details = mysql_query("SELECT * FROM `transactionDetails` WHERE `order_id` = $order_id") or die(mysql_error());
        $orderDetailsCount = mysql_num_rows($order_details);
        while ($row = mysql_fetch_array($order_details)) {
            //creating variables from the information
            $order_product_id = $row["Product_ID"];
            $order_product_price = $row["Price"];
            $order_product_quantity = $row["Quantity"];
            $order_list .= '<tr>';
            $order_list .= '<td>' . $order_id . '</td>';
            //$order_list .='<td><a href="product.php?id=' . $order_product_id . '">' . $product_name . '</a></td>';
            $order_list .= '<td>Â£' . $order_product_price . '</td>';
            $order_list .= '<td>' . $order_product_quantity . '</td>';
            $order_list .= '</tr>';
        }
    }

    if (count($order_list)==0) {
        $order_list = "You have no orders to display";
    }

    print_r($order_list);
} 
```

# cuda - 为两个不同的向量使用动态共享内存分配

> ID：15435559
> 
> 赞同：13
> 
> 时间：2013-03-15T14:58:50.097
> 
> 标签：cuda

在内核函数中，我想要两个共享内存向量，两者都有`size`长度（实际上`sizeof(float)*size`）。

如果需要变量，则无法直接在内核函数中分配内存，因此我必须动态分配它，例如：

```
 myKernel<<<numBlocks, numThreads, 2*sizeof(float)*size>>> (...); 
```

并且，在内核内部：

```
extern __shared__ float row[];
extern __shared__ float results[]; 
```

但是，这行不通。

取而代之的是，我使用分配`extern __shared__ float rowresults[]`的内存只制作了一个包含所有数据的向量。`2*size`所以`row`调用还是一样的，`results`调用就像`rowresults[size+previousIndex]`. 这确实有效。

这不是一个大问题，因为无论如何我都会得到预期的结果，但是有没有办法将我动态分配的共享内存分成两个（或更多）不同的变量？只为美丽。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T15:09:47.793

[__shared__ 上](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#shared)的C 编程指南部分包括从动态分配的共享内存分配多个数组的示例：

```
extern __shared__ float array[];
__device__ void func()      // __device__ or __global__ function
{
    short* array0 = (short*)array; 
    float* array1 = (float*)&array0[128];
    int*   array2 =   (int*)&array1[64];
} 
```

由于您只是获取指向元素的指针并将其创建为新数组，因此我相信您可以对其进行调整以使用动态偏移量而不是示例中的静态偏移量。他们还指出，对齐方式必须相同，这在您的情况下应该不是问题。

# php - 从查询中获取 10 行

> ID：15435560
> 
> 赞同：1
> 
> 时间：2013-03-15T14:58:52.950
> 
> 标签：php, mysql, arrays

我有一个由连接组成的查询，输出大约 30,000 多条记录。我想在不使用 SQL 命令 ORDER BY rand() 的情况下从这些记录中获取 10 个随机行。

我尝试遍历记录并将它们放入一个数组并随机播放（在随机播放后获得第一个 10 个），但生成大约需要 8-12 秒。我想不惜一切代价减少这个处理时间。

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T15:03:19.563

好的，如果您不想使用 RAND()，请先快速选择 id 列，然后仅选择您想要的 10 行

1.  将 ID 选择到 $idarray
    `SELECT id FROM table`
2.  洗牌和切片 $idarray
    `shuffle($idarray);`
    `$ids=array_slice($idarray,0,10);`
3.  选择完整的行
    `$sql="SELECT ... WHERE id IN (".implode(', ', $idarray).")";`

编辑：这肯定比使用 ORDER BY RAND() 快得多！

# jquery - .click 未触发 jQuery 对话框中的标记

> ID：15435564
> 
> 赞同：0
> 
> 时间：2013-03-15T14:59:05.933
> 
> 标签：jquery

我在使用 .click 函数时遇到问题

jQuery 对话框中的标记。

我有一个 jQuery 对话框内的 aap 标签，如下所示。

```
<p class="userColor" id="CMP|8|25691/XX|25691/59|59" style="text-decoration:underline;cursor:pointer;">59   - GRAPE</p> 
```

div

```
<div id="colorPickerWindow" style="width: auto; min-height: 89px; max-height: none; height: auto;" class="ui-dialog-content ui-widget-content">
    <p class="userColor" id="CMP|8|25691/XX|25691/20|20" style="text-decoration:underline;cursor:pointer;">20   - RED</p>
</div> 
```

我已经尝试过 .click 和 .on 并且我都尝试过使用选择器，但是我无法为 P 标签触发点击操作。

jQuery

```
$(".userColor").on({
    click:function(){}            
}); 
```

在 jQuery 对话框中触发点击事件的正确 jQuery 是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:00:53.177

这将起作用：

```
$(document).on("click", ".userColor", function(){
 alert("yippie");
}); 
```

或者（如果内容是动态加载的，则单独单击将不起作用）

```
$(".userColor").click(function(){
 alert("yippie");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:03:32.097

如果您的内容是动态加载的，请使用以下格式`.on()`：

```
$(document).on("click", ".userColor", function(event){
   //dostuff
}); 
```

从[.on() 文档](http://api.jquery.com/on/)：

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。

# c# - 循环浏览视图模型并更新我的 C# MVC 应用程序中的值

> ID：15435565
> 
> 赞同：0
> 
> 时间：2013-03-15T14:59:06.480
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq, entity-framework

我有一个视图模型：

```
public class RatesViewModel
{
    public string RoomName { get; set; }
    public string TypeName { get; set; }
    public long TypeID { get; set; }
    public int TypeCount { get; set; }
    public virtual IQueryable<Occ> Occs { get; set; }

}
public class Occ
{
    public string occ { get; set; }
    public decimal ratetocharge { get; set; }
    public int numOfOcc { get; set; }
    public virtual RatesViewModel RatesViewModel { get; set; }
} 
```

这填充了一个变量“房间”。

根据某些情况，我想更新 Occ.ratetocharge - 例如，将它们全部更改为扣除 50：

```
 foreach (var r in rooms)
        {
        // do a query which looks up a value from another table
        if (conditionMet == true)
        {
             r.Occs.ratetocharge = r.Occs.ratetocharge - 50;
        }
        } 
```

然而，

```
r.Occs.ratetocharge 
```

……不允许。所以我想知道如何更新ratetocharge？我的视图模型设置是否错误，还是有更好的方法来实现我想要实现的目标？

谢谢你的任何建议，

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:02:40.423

您应该使用索引号

```
 r.Occs[Index].ratetocharge - 50; 
```

或使用循环

```
foreach (var r in rooms)
        {
        // do a query which looks up a value from another table
        if (conditionMet == true)
           {
       foreach(Occ occ in r.Occs)
           {
         occ.ratetocharge = occ.ratetocharge - 50;
           }       
          }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:01:31.483

你必须做这样的事情

```
if (conditionMet == true)
{
    foreach(Occ occ in r.Occs)
    {
        occ.ratetocharge = occ.ratetocharge - 50;
    }
} 
```

# jquery - 使用 Html.Kendo().EditorFor 时如何在 Jquery 中选择编辑器

> ID：15435567
> 
> 赞同：0
> 
> 时间：2013-03-15T14:59:10.537
> 
> 标签：jquery, telerik-mvc, telerik-editor

我正在将 Telerik Kendo UI 编辑器用于可以发布到服务器的字段。

```
@( Html.Kendo().EditorFor(model => model.TickerContent)
                           .Name("TickerContent")
                           .Encode(true)
                           .HtmlAttributes(new { style = "width:100%;height:440px" })) 
```

在与表单相同的页面上，我有一个我希望能够编辑的项目列表，因此我需要设置编辑器的值。演示代码使用以下代码来获取和设置编辑器的值：

```
<script>
    $(document).ready(function () {
        var editor = $("#Editor").data("kendoEditor");

        var setValue = function () {
            editor.value($("#value").val());
        };

        $("#get").click(function () {
            alert(editor.value());
        });

        $("#set").click(setValue);
    });
</script> 
```

变量编辑器的值始终未定义。我的问题是如何获取和设置编辑器值？

我试过 var editor = $("#TickerContent").data("kendoEditor"); 但编辑器仍然未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-03T15:47:22.357

同样的问题，这是我所做的：

对于 html

```
@Html.TextAreaFor(model => model.TickerContent); 
```

对于 JS

```
 <script>
         $(function(){
            $("#TickerContent").kendoEditor().data("kendoEditor");
            var editor  = $("#TickerContent").data("kendoEditor");
         })
    </script> 
```

那么“编辑器”不是未定义的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T14:21:37.210

我认为您需要删除 .Name("TickerContent")。我遇到过同样的问题。为什么，我不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-31T06:57:38.300

要设置编辑器值，您可以这样设置：

```
$("#Editor").data("kendoEditor").value($("#value").val()); 
```

# android - Android：通过 Spinner 动态获取结果

> ID：15435570
> 
> 赞同：0
> 
> 时间：2013-03-15T14:59:14.607
> 
> 标签：android, android-emulator

我是 android 新手，任何人都可以帮我解决这个简单的问题，但我无法识别这个执行过程。我需要通过 Spinner 动态获取结果，但这里 Spinner 仅在运行时执行（不点击 Spinner）对不起问这个问题我无法解决这个问题......:(

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.loanpayment);
    try {
        et1 = (EditText) findViewById(R.id.et1);
        et2 = (EditText) findViewById(R.id.et2);
        et3 = (EditText) findViewById(R.id.et3);
        ans = (TextView) findViewById(R.id.editText1);
        b1 = (Button) findViewById(R.id.button1);
        b2 = (Button) findViewById(R.id.button2);
        s = (Spinner) findViewById(R.id.spin);

    }
    catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    }
    ArrayAdapter<String> a = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_spinner_item, values);
    a.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    s.setAdapter(a);

    s.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View view,
                int position, long id) {

            // TODO Auto-generated method stub
            String item = parent.getItemAtPosition(position).toString();
            if(item.equals("Yearly")) {
                Pattern p = Pattern.compile("([0-9 .]*)");

                if (et1.getText().toString().trim().length() > 0 && et2.getText().toString().trim().length() > 0 && et3.getText().toString().trim().length() > 0) {
                    Matcher m = p.matcher(et1.getText().toString().trim());
                    Matcher m1 = p.matcher(et2.getText().toString().trim());
                    Matcher m2 = p.matcher(et3.getText().toString().trim());

                    if (m.matches() && m1.matches() && m2.matches()) {

                        amount = Float.valueOf(et1.getText().toString());
                        interest = Float.valueOf(et2.getText().toString());
                        year = Float.valueOf(et3.getText().toString());
                        s1 = interest/100;
                        s2 = year;
                        ans1 = s1 * amount;
                        ans2 = (float) (1-Math.pow((1+s1), -s2));
                        tot = (float) Math.round(ans1/ans2);
                        String an = Float.toString(tot);
                        ans.setText("Amount to Pay=" +an);

                    } 
                     else {
                        Toast.makeText(getApplicationContext(),
                                "Incorrect value", Toast.LENGTH_SHORT)
                                .show();
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:20:36.333

如果我理解正确，[这个 SO Answer](https://stackoverflow.com/questions/14113164/odd-android-spinner-behavior/14114880#14114880)应该可以解决您的问题

正如@Sam 在评论中所说

> ... Spinner 在加载默认值时调用 onItemSelected()。

所以，我的理解是它`onItemSelected()`会在`Spinner`加载时被调用，所以你需要使用一些标志来让函数知道它最初是加载的并跳过逻辑。然后您可以更改标志，以便在用户选择项目后，该功能将继续执行逻辑。希望这可以帮助。

**笔记**

我还没有在文档中找到任何关于此的内容，但我已经逐步完成了该功能以验证是否发生了这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:22:25.007

一旦你设置了你的 spinner.setOnItemClickListener 它会在布局放置后立即调用一次，你必须手动设置一些标志来处理它

# android - Android 在 hdpi 设备上缩放 hdpi 图像

> ID：15435571
> 
> 赞同：1
> 
> 时间：2013-03-15T14:59:15.200
> 
> 标签：android, android-resources, hdpi

我注意到我的应用程序中的所有图像似乎都比原始图像小。例如。

我将图像放在这样的活动上：

```
<ImageView android:layout_width="wrap_content" android:layout_height="wrap_content"
           android:src="@drawable/ic_search_dark"
           /> 
```

我从结果中截取了一张截图，并将图像测量为 25x25：

[http://petromi.com/get/86b23cdb63.png](http://petromi.com/get/86b23cdb63.png)

但它的实际尺寸是 28x28：

[http://petromi.com/get/fd68913104.png](http://petromi.com/get/fd68913104.png)

图像已放入`drawables-hdpi`文件夹。设备是 1280x800 平板电脑。我已将其显示指标记录如下：

```
Log.d("Screen (%s, %s) - [%s, %s] [%s]", dm.widthPixels, dm.heightPixels, dm.xdpi, dm.ydpi, dm.densityDpi); 
```

我得到了：

```
Screen (1280, 736) - [160.0, 160.15764] [213]
Screen (800, 1216) - [160.0, 160.15764] [213] 
```

（用于纵向和横向）

令我惊讶的是，Android 在 hdpi 设备上缩放来自 drawable-hdpi 的图像。可以吗？如果是的话，你们能给我一个描述这些规则的链接吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T15:03:09.803

如果设备注册为`hdpi`设备，它将从`hdpi`文件夹中获取图像。然后它将继续将图像缩放到设备的实际规格。这个是正常的。

dpi`hdpi`为`240`. 您所拥有的是`213`，因此图像仍将根据`240 dpi`设置进行缩放。

如果您不想进行任何缩放，则需要将图像放入`drawable-nodpi`文件夹中。

# jquery - 防止 jQuery show() 转换的水平滚动

> ID：15435573
> 
> 赞同：0
> 
> 时间：2013-03-15T14:59:22.580
> 
> 标签：jquery, css, scroll

我正在使用 jQuery 从目标页面加载 div 并用新加载的内容替换现有 div。为了使它看起来更好一点，我添加了一个 jQuery 过渡效果到“滑动”，然后将现有内容向左滑动，并从右侧“滑动”新内容。

JS 提取：

```
...
$('#content-slider').hide('drop', {}, 2000, function() {
    ('#content-slider').load(pageurl + '?rel=tab  #content-slider');
    $('#content-slider').show('drop', {direction:'right'}, 2000);
});
... 
```

问题是新加载的 div 通过从右侧“滑入”进行动画处理会导致 div 具有“动画”水平滚动条。当 div 滑动到位时，滚动条会减小，直到新的 div 内容到位时它最终消失。

我需要防止出现水平滚动条。显而易见的选择只是去做，`overflow-x: hidden;`但这并不能阻止效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:40:11.287

`#content-slider`设置为固定宽度的父级和`overflow: hidden`. 如果您不想要固定宽度，也可以使用[`max-width`](https://developer.mozilla.org/en-US/docs/CSS/max-width).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:01:52.793

你有没有尝试过

```
overflow: hidden !important; 
```

# sql - 替换字段中的值

> ID：15435577
> 
> 赞同：0
> 
> 时间：2013-03-15T14:59:29.683
> 
> 标签：sql

感谢您一直以来的帮助。这是上一个线程的延续。

[如何在 SQL 中透视数据](https://stackoverflow.com/questions/15417705/how-to-pivot-data-in-sql)

我想要做的是替换结果字段之一（比如说PROJECT_ID）中的值来做这样的事情。我希望这很简单。但这个项目还有更多。

```
select oc.ncr_no,
  max(case when OC.LU_NAME = 'Project' then OC.KEY_REF end) PROJECT_ID,
  max(case when OC.LU_NAME = 'SupplierInfo' then OC.KEY_REF end) SUPPLIER_ID,
  max(case when OC.LU_NAME = 'PurchaseOrder' then OC.KEY_REF end) ORDER_NO,
  max(case when OC.LU_NAME = 'PurchaseReceipt' then OC.KEY_REF end) PURCHASE_RECEIPT,
  max(case when OC.LU_NAME = 'InventoryPart' then OC.KEY_REF end) INVENTORY_PART,
  replace(PROJECT_ID,'PROJECT_ID=','') as PROJECT_ID
from OC
group by oc.ncr_no 
```

我在示例中使用了这个模式（从 SQL Fiddle 中提取）。不幸的是，我不知道如何保存它。

```
CREATE TABLE OC 
(
  [NCR_NO] int, 
  [LU_NAME] varchar(15), 
  [KEY_REF] varchar(33)
);

INSERT INTO OC ([NCR_NO], [LU_NAME], [KEY_REF])
VALUES
    (100001, 'Project', 'PROJECT_ID=PROJECT1^'),
    (100001, 'SupplierInfo', 'SUPPLIER_ID=UNIQUESUPPLIERNUMBER^'),
    (100001, 'PurchaseOrder', 'ORDER_NO=UNIQUEORDERNO^'),
    (100196, 'PurchaseReceipt', 'UNIQUE PURCHASE RECEIPT'),
    (100511, 'InventoryPart', 'CONTRACT=UNIQUECONTRACTNO'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:09:57.893

目前尚不清楚是否要删除`=`each之前的所有内容`KEY_REF`。如果是这样，您可以使用：

```
select ncr_no,
  max(case when LU_NAME = 'Project' then KEY_REF end) Project,
  max(case when LU_NAME = 'SupplierInfo' then KEY_REF end) SupplierInfo,
  max(case when LU_NAME = 'PurchaseOrder' then KEY_REF end) PurchaseOrder,
  max(case when LU_NAME = 'PurchaseReceipt' then KEY_REF end) PurchaseReceipt,
  max(case when LU_NAME = 'InventoryPart' then KEY_REF end) InventoryPart
from
(
  select ncr_no, 
    LU_NAME, 
    substring(KEY_REF, charindex('=', key_ref)+1 , len(key_ref)) KEY_REF
  from yourtable
) src
group by ncr_no; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/419d9/18)。

注意：这是您可以使用的基本语法，但这可能会根据您使用的数据库而改变。

# ruby-on-rails-3 - 如何使用带有 from_tag 而不是 form_for 的 filepicker_field

> ID：15435583
> 
> 赞同：0
> 
> 时间：2013-03-15T14:59:49.037
> 
> 标签：ruby-on-rails-3, filepicker.io

我正在尝试将 Filepicker 与 Rails 中使用 form_tag 的表单集成。所有示例和文档（[此处](https://github.com/Filepicker/filepicker-rails/blob/master/README.md)）均使用 form_for。

当我像这样使用它时显然会出错（haml）：

```
= form_tag(@form_params, id: 'abc', url:'/url') do
  = filepicker_field '@variable', 'field' 
```

错误：

`undefined method filepicker_field' for #<Class...>`

我无法更改表单结构。有没有支持的方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:28:02.010

从我在文档中看到的仅支持 form_for 。

您可以使用非活动记录模型（[http://railscasts.com/episodes/121-non-active-record-model](http://railscasts.com/episodes/121-non-active-record-model)）或虚拟属性（[http://railscasts.com/episodes/16-virtual-attributes-revised](http://railscasts.com/episodes/16-virtual-attributes-revised) ) 允许 form_for 为您工作？

# javascript - 向 Javascript/JQuery HTML 表热图添加第三个颜色级别

> ID：15435585
> 
> 赞同：1
> 
> 时间：2013-03-15T14:59:56.143
> 
> 标签：javascript, jquery, algorithm, math, heatmap

我通过以下方式使用 HTML 表热图 JQuery 脚本：

[http://www.designchemical.com/blog/index.php/jquery/jquery-tutorial-create-a-flexible-data-heat-map/](http://www.designchemical.com/blog/index.php/jquery/jquery-tutorial-create-a-flexible-data-heat-map/)

我已经能够修改它并清理它并使用我们的数据集。但是，当前脚本仅允许使用两种颜色，并且不计算具有标准偏差的介质以包含第三种颜色，例如黄色。

这是下面的当前脚本：

```
<script type="text/JavaScript">
    $(document).ready(function () {
        // Function to get the Max value in Array
        Array.max = function (array) {
            return Math.max.apply(Math, array);
        };

        // get all values
        var counts = $('.heatmap tbody td').not('.first_row').map(function () {
            return parseInt($(this).text().replace(/,/g, "").replace(/\(|\)/g, ""));
        }).get();

        // return max value
        var max = Array.max(counts);

        // red color for lowest data
        xr = 251;
        xg = 121;
        xb = 105;

        // green color for highest data
        yr = 138;
        yg = 251;
        yb = 107;
        n = 100;

        // add classes to cells based on nearest 10 value
        $('.heatmap tbody td').not('.first_row').each(function () {
            var val = parseInt($(this).text().replace(/,/g, "").replace(/\(|\)/g, ""));
            var pos = parseInt((Math.round((val / max) * 100)).toFixed(0));
            red = parseInt((xr + ((pos * (yr - xr)) / (n - 1))).toFixed(0));
            green = parseInt((xg + ((pos * (yg - xg)) / (n - 1))).toFixed(0));
            blue = parseInt((xb + ((pos * (yb - xb)) / (n - 1))).toFixed(0));
            clr = 'rgb(' + red + ',' + green + ',' + blue + ')';
            $(this).css({
                backgroundColor: clr
            });
        });
    });
</script> 
```

热图当前从红色变为绿色，我想添加一个计算，为中等范围添加黄色。我在这里创建了一个 jsFiddle：http: [//jsfiddle.net/7z8D4/](http://jsfiddle.net/7z8D4/)，其中包含我正在使用的脚本和热图表结构。

例如，如果我有以下数据集，它应该是彩色的，例如：

```
1      red
2      red
3      pink
4      pink
5      yellow
6      yellow
7      lime green
8      lime green
9      green
10     green 
```

我非常感谢对此的任何见解。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:26:00.077

红色（0%）到黄色（50%）到绿色（100%）

```
var pos = val / (max * 1.0);

red =  Math.round(pos < 0.5 ? 255 : ((1 - pos) * 2) * 255);
green = Math.round(pos < 0.5 ? (pos * 2) * 255 : 255);
blue = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T01:33:48.907

我创建了一个非常简单的 JavaScript 函数（请参阅[http://jsfiddle.net/4vCfc/](http://jsfiddle.net/4vCfc/)），它在红色到黄色和蓝色渐变上提供 RGB 颜色，我将其用于热图来演示字段的使用以一种形式。

这是函数定义：

```
function getHeatColorAsRbg(percentage) //percent is a number between 0 and 1.
{
//RED - YELLOW (255, 0, 0) to (255, 255, 0)
//THEN YELLOW TO BLUE (255,255,0) to (0, 0, 255)
var red = 0;
var blue = 0;
var green = 0;

//Two cases - 1.0 down to 0.5 and 0.5 down to 0.

if(percentage >= 0.5)
{
    red = 255;
    green = Math.round(255 * 2 * (1 - percentage));
    blue = 0;
}
else
{
    blue = 255 - Math.round((percentage/0.5)*255);
    red = 255 - blue;
    green = red;
}

return "rgb(" + red + "," + green + "," + blue + ")"; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-26T21:17:20.803

如果没有找到数组中的最小值，您的方法只是半方法。））

# c++ - 在 AIX 7.1 xlc++ 上编译静态模板函数

> ID：15435587
> 
> 赞同：1
> 
> 时间：2013-03-15T15:00:04.403
> 
> 标签：c++, aix, dbx

我们的源代码有一堆独立的静态模板函数。我需要使用 IBM 的本机`xlc++`编译器在 AIX 7.1 Power 7 系统上编译它。将`static`关键字与独立函数一起使用已过时，并且不受支持`xlc++`，因此为了编译我的程序，我从函数声明中删除了该关键字。程序编译成功后，第一次运行就崩溃了（在`Linux/g++`相同的输入数据下完全稳定）。

我试图用 调试`dbx`，但调试器抱怨`internal error`和`segmentation fault in extend_brk`。没有使用内存配额，所以它不是内存/磁盘空间短缺。系统配置为创建完整的核心转储，使用`-g`选项编译的程序。所有库都是静态链接的，所以在共享库中抛出异常不是问题。`xlc++`1）是否可以在不删除关键字的情况下编译静态模板函数`static`，所以我可以确定所有代码都与 RHEL 系统中的相同？2）为什么调试器不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:33:04.053

看来我有 32/64 位可移植性问题，在这种情况下删除**static**关键字是无害的。在我的 .kshrc 文件中添加以下行后，问题就消失了：

```
export OBJECT_MODE=64 
```

默认情况下，IBM XL 编译器以 32 位模式运行，即使在 64 位 AIX 7.1 系统上也是如此。要覆盖默认行为，程序员可以设置环境变量或向编译器提供 -q64 参数。

# c# - 从 ObservableCollection XAML 更改一个对象的样式

> ID：15435589
> 
> 赞同：1
> 
> 时间：2013-03-15T15:00:19.163
> 
> 标签：c#, .net, xaml, winrt-xaml, observablecollection

我有包含 5 个对象的 ObservableCollection。我可以在 xaml 中为整个集合设置颜色、背景等，如下所示：

```
<GridView.ItemTemplate>
    <DataTemplate>
        <Grid Width="200">
            <Rectangle Width="auto" Fill="#333333" />
            <TextBlock Text="{Binding}" Foreground="#fff" FontSize="80" FontFamily="Verdana" FontWeight="Bold" VerticalAlignment="Center" HorizontalAlignment="Center" />
        </Grid>
    </DataTemplate>
</GridView.ItemTemplate> 
```

但这会影响此集合中的每个对象。如何设置不同的颜色，例如最后一个对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:19:28.923

您可以将**Background**属性添加到填充**ObservableCollection**并在 xaml 中使用绑定的对象

```
<Grid Width="200" Background="{Binding Background}" /> 
```

这样，您可以选择网格中的每个项目颜色并动态更改它，只需更改对象属性，但**背景**属性必须是分配有有效颜色的字符串

```
object.Background = "Red" 
```

或者，您可以使用**转换器**将对象中的某些现有属性转换为颜色。例如，如果您有一些**Group**属性并且每个组都应该用自己的颜色表示，您可以执行以下操作：

## XAML

```
<Grid Width="200" Background="{Binding Group, Converter={StaticResource ColorConverter}}" /> 
```

## C＃

```
public class ColorConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        if (parameter == null)
        {
            return value;
        }

        string group = (string) parameter;
        string color = "";

        if(group.equals("Group 1"))
        {
            color = "Red";
        }else if(group.equals("Group 2"))
        {
            color = "Green";
        }else{
            color = "Blue"
        }

        return color;
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        return value;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:07:36.893

您可以使用一个 DataTemplateSelector（请参阅：[教程](http://tech.pro/tutorial/807/wpf-tutorial-how-to-use-a-datatemplateselector)）

# java - 为延迟加载的 EJB JPA 实体处理 JAX-WS 代理对象的最佳方式是什么？

> ID：15435590
> 
> 赞同：0
> 
> 时间：2013-03-15T15:00:25.933
> 
> 标签：java, web-services, jpa, ejb, jax-ws

不幸的是，我们坚持使用 JPA 1.0 和 Java EE 5（SAP 实现）。如果重要的话，我们使用的是 Oracle 数据库。

我们有一个实体类，它基本上是文件类型对象的数据库描述，包含名称、文件类型和 byte[] (blob) 项。

当调用对表的查找时，我们不想每次都急切地加载 blob 对象，并通过 Web 服务返回它，但是我们仍然希望加载文件名和类型字段。

现在，我们尝试了几件事：-

首先，我们尝试了`@Basic(fetch= FetchType.LAZY)`. 无论如何，这似乎没有任何作用。（可能这不是强制执行的 JPA 协议）

其次，我们尝试与单独表中的字节数据建立一对一的关系，并将其设置为惰性获取类型。执行此操作时，Web 服务中会发生异常，因为此项的 Jax WS 代理对象几乎是空的。

第三，我们尝试过加载整个“文件”表，但在数据库查询后只清空字节[]数据；这不会通过 Web 服务返回大字节数据，但它并不理想，因为字节数据仍会从数据中检索到程序“上下文”中。

那么，如果代理对象为空，有没有办法告诉 Jax WS 忽略特定字段？我似乎在文档中找不到任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:03:14.587

为什么不直接创建一个单独的 jax-ws 类型，例如“FileMetadata”，它只包含名称和类型字段？

# .net - VSTO 和 ClickOnce 的部署陷阱

> ID：15435595
> 
> 赞同：0
> 
> 时间：2013-03-15T15:00:34.320
> 
> 标签：.net, excel, vsto, ms-office, clickonce

我将 Visual Studio 2010 与 Excel Workbook 2007 VSTO 项目一起使用。

它使用 .NET 4 和 VSTO4 运行时。

我正在使用 ClickOnce 发布此内容。

我设置的先决条件是 .NET 4、VSTO 运行时和 Windows 安装程序。我没有包括主互操作程序集。

我已将此设置为从与我的应用程序相同的位置下载。

发布后，当我得到一个在他们的机器上只安装了 .NET 的用户时......他们尝试打开 Excel 工作簿以查看发生了什么，他们收到错误`"The common language runtime could not be loaded... Contact an administrator"`

我还尝试为该用户运行“setup.exe”，甚至直接单击 VSTO4 运行时安装程序，我收到了以下消息`"Do not have the required administrator privileges"`

谁能向我确认，我可以为 Office 使用 ClickOnce 项目的唯一方法是让用户拥有管理员访问权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:51:33.530

您需要管理员权限才能安装 VSTO 运行时等先决条件。实际的加载项不需要管理员权限。

# css - 使用文本旋转解决 css3 错误

> ID：15435596
> 
> 赞同：0
> 
> 时间：2013-03-15T15:00:41.650
> 
> 标签：css, webkit, border

链接查看问题：

[http://www.dev.pingag.ch/allsystems/fileadmin/templates/diagramm.html#](http://www.dev.pingag.ch/allsystems/fileadmin/templates/diagramm.html#)

我用 html 和 css 创建了这个图表。每个单词（integrität、innovation 等）周围都是一个 div，一个 div 围绕着所有内容。

“kompetenz”和“kunden”这两个词的文本被旋转为：

```
 **-webkit-transform:rotate(-90deg);
-moz-transform:rotate(-90deg);
-o-transform: rotate(-90deg);** 
```

适用于 Mozilla、Chrom 和 Opera。

对于我使用的 Internet Explorer：

**写作模式：tb-rl；**

旋转文本。

Internet Explorer 中的结果是完美的，但在 Mozilla、Chrom 和 Opera中，顶部和底部**出现了不需要的白色边框。**

你有什么想法我可以解决这个问题吗？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:15:55.690

你为什么不改变你的div的宽度 98px -> 100px 左右和+ 3-4px 右上角和bot右

# c++ - 我的红黑树析构函数出了什么问题？

> ID：15435603
> 
> 赞同：1
> 
> 时间：2013-03-15T15:01:07.177
> 
> 标签：c++, destructor, red-black-tree

我正在构建一棵红黑树，但我的类 RBTree 的析构函数可能存在一些问题。我将 10^7 值添加到树中，然后调用析构函数，但内存似乎没有被释放。（我查看系统监视器，我的程序仍然使用 200MB）。

你能告诉我我的析构函数有什么问题吗？这是我的源代码。

对不起我的英语不好。

```
#include<cstdio>
#include<cstdlib>
#include<iostream>
using namespace std;

enum Color {RED, BLACK};

template<class Data> class RBNode;
template<class Data> class RBTree;

template<class Data> class RBNode {
    Color color; RBNode *p, *left, *right;
public:
    Data v;
    RBNode(Color color, RBNode *p, RBNode *left, RBNode *right, Data v):
        color(color), p(p), left(left), right(right), v(v) {}
    RBNode() {}
    friend class RBTree<Data>;
};

template<class Data> class RBTree {
    typedef RBNode<Data> Node;
    typedef Node * PNode;
    PNode root, nil;

    void LeftRotate(PNode x) {
        PNode y = x->right; x->right = y->left;
        if(y->left != nil) y->left->p = x;
        y->p = x->p;
        if(x->p == nil) root = y;
        else if(x == x->p->left) x->p->left = y;
        else x->p->right = y;
        y->left = x; x->p = y;
    }

    void RightRotate(PNode y) {
        PNode x = y->left; y->left = x->right;
        if(x->right != nil) x->right->p = y;
        x->p = y->p;
        if(y->p == nil) root = x;
        else if(y == y->p->left) y->p->left = x;
        else y->p->right = x;
        x->right = y; y->p = x;
    }

    void insertFixUp(PNode z) {
        while(z->p->color == RED) {
            if(z->p == z->p->p->left) {
                PNode y = z->p->p->right;
                if(y->color == RED) z->p->color = y->color = BLACK, z->p->p->color = RED, z = z->p->p;
                else {
                    if(z == z->p->right) LeftRotate(z = z->p);
                    z->p->color = BLACK; z->p->p->color = RED; RightRotate(z->p->p);
                }
            } else {
                PNode y = z->p->p->left;
                if(y->color == RED) z->p->color = y->color = BLACK, z->p->p->color = RED, z = z->p->p;
                else {
                    if(z == z->p->left) RightRotate(z = z->p);
                    z->p->color = BLACK; z->p->p->color = RED; LeftRotate(z->p->p);
                }
            }
        }
        root->color = BLACK;
    }

public:
    RBTree() {
        nil = new Node;
        nil->color = BLACK;
        nil->p = nil->left = nil->right = nil;
        nil->v = Data();
        root = nil;
    }

    ~RBTree() {
        delete root;
        delete nil;
    }

    void insert(Data v) {
        PNode y = nil, x = root;
        while(x != nil) {
            y = x;
            x = v < x->v ? x->left : x->right;
        }
        PNode z = new Node; *z = Node(RED, y, nil, nil, v);
        if(y == nil) root = z;
        else if(v < y->v) y->left = z;
        else y->right = z;
        insertFixUp(z);
    }
};

int main() {
    RBTree<int> tree;
    for(int i = 0; i < 10000000; ++i) tree.insert(i);
    tree.~RBTree();
    getchar();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:09:03.387

您需要向您的 中添加一个析构函数`RBNode`，该析构函数会删除其子项：

```
template<class Data> class RBNode {
    ...
    ~RBNode() {
        delete left;
        delete right;
    }
    ...
}; 
```

照原样，您将在删除树时删除根节点，但根节点本身不会释放其资源。因此，您丢失了对 root 的子节点及其所有子节点等的所有引用。因为您不再拥有对这些节点的引用，所以无法删除它们，您有内存泄漏。

析构函数确保当我们即将失去对节点子节点的引用时，这些子节点被释放（以及它们的子节点等等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:12:14.577

首先，它的问题在于您没有使用智能指针。其次，您没有在 Node 类中使用智能指针，因此当根被删除时，其他对象都不会被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:09:26.580

我找到了我的析构函数，但我还有一些属性，比如大小和父指针，但我认为它会有所帮助

```
 ~RBTree() {
       RBNode *p(root);
       while(size!=0) {
          if(p==root && size==1) { delete root; size--;}
          else if(p->right!=0) p=p->right;
          else if(p->left!=0) p=p->left;
          else {
            RBNode *c(p);
            p=p->parent;
            if(p->left==c) {
                delete c;
                p->left=0;
            }
            else {
                delete c;
                p->right=0;
            }
            size--;
          }
       }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T15:06:53.293

您的树节点似乎不会递归地删除它们的子节点。您需要在节点中使用析构函数，然后当根被销毁时一切都会级联。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T15:08:04.943

你的析构函数只释放了两个元素：root 和 nil。要释放树的其余部分，您应该以某种方式传播释放树下的元素，例如：

```
~RBNode() {
    if (left != nil ) delete left;
    if (right != nil) delete right;
} 
```

（这只是想法，当然这段代码不会真正起作用，因为你在析构函数中看不到 nil ）。

# jms - Cloundfoundry 应用程序之间的 AMQP 连接 (RabbitMQ) 是否可行？

> ID：15435605
> 
> 赞同：0
> 
> 时间：2013-03-15T15:01:07.877
> 
> 标签：jms, rabbitmq, cloud-foundry

我在 Cloudfoundry 上部署了两个应用程序：一个计算内容的服务应用程序（又名 computeService）和一个为我们凡人呈现 html 以点击按钮的客户端应用程序（又名 clientService）。我希望 clientService 中的控制器向 computeService 发送命令（当凡人按下按钮时）。broker 和 computeService 在同一台机器上运行。

我知道我无法将远程 AMQP 连接到 cloudfoundry.com 上的服务，但我认为我可以在应用程序之间建立连接。但是，bro​​ker 和 clientService 的每个合理地址组合都会给我同样的错误：

```
javax.jms.JMSException: Could not connect to broker URL: tcp://127.0.0.1:61616\. Reason: java.net.ConnectException: Connection refused 
```

无论我尝试什么地址，我都无法发布到队列中。该代码在我的本地机器上完美运行。

**我的问题**：我可以使用 RabbitMQ 在 Cloudfoundry 上的两个应用程序之间传递消息吗？如果是这样，我应该使用哪些地址？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:19:49.827

One way to try this out is to create two replicas of the rabbit message example at [Spring Samples](https://github.com/SpringSource/cloudfoundry-samples)

...a message sender and a message receiver. When deployed, they should share the same rabbit service.

I pushed the rabbit message which worked for me to: [rabbitmessage-sndrcv](https://github.com/eightyoctane/rabbitmessage-sndrcv)

# django - 如何获取随机对象“数据”且仅当“秘密”为 False 时？

> ID：15435616
> 
> 赞同：0
> 
> 时间：2013-03-15T15:01:36.597
> 
> 标签：django

```
class Data(models.Model):
    title = models.CharField(max_length=255)
    secret = models.BooleanField(default=False) 
```

如何获取随机对象`Data`且仅当`secret`为 False 时？

意见：

```
Data.objects.get(..) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:06:12.580

所有这些功能都包含在 Django [QuerySet](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.order_by)文档中。

```
Data.objects.filter(secret=False).order_by('?')[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:21:22.290

```
from random import shuffle

[.....]
    datas = Data.objects.filter(secret=False)
    items = list(datas)
    shuffle(items)
[.....] 
```

# svn - svn diff 的输出未生成预期内容

> ID：15435617
> 
> 赞同：1
> 
> 时间：2013-03-15T15:01:37.600
> 
> 标签：svn, diff

当我从工作目录运行以下命令时：

```
svn diff > c:\temp\diff-results.diff 
```

我希望 diff-results.diff 文件将我对文件所做的修改存储在我的工作目录中，而不是看到如下所示的输出：

```
Index: MyClass.cs
==================================================
c:\repository>"C:\Program Files (x86)\Beyond Compare 2\BC2.exe" "MyProject\.svn\text-base\MyClass.cs.svn-base" /title1="MyClass.cs  (revision 481282)" "MyClass.cs" /title2="MyClass.cs (working copy)" 
```

所以我的问题是如何让它存储我所做的实际更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:01:37.600

发生这种情况是因为我定制了 subversion 以运行特定的差异程序（Beyond Compare）。我运行了以下命令并看到了预期的结果：

```
svn diff --diff-cmd diff > c:\temp\diff-results.diff 
```

# php - PHP锁定文本文件进行编辑？

> ID：15435619
> 
> 赞同：6
> 
> 时间：2013-03-15T15:01:38.947
> 
> 标签：php, file-locking

我有一个将其输入写入文本文件的表单。是否可以锁定文本文件以进行编辑，并可能给出友好消息“文件已被其他用户编辑，请稍后再试”。

如果文件同时有多个编辑器，我想避免冲突。

这是当前添加条目的方式。

```
$content = file_get_contents("./file.csv");
$fh = fopen("./file.csv", "w");
fwrite($fh, $date_yy . '-' . $date_mm . '-' . $date_dd . '|' . $address . '|' . $person . '|' . $time_hh . ':' . $time_mm) ;
fwrite($fh, "\n" . $content);
fclose($fh);
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:05:28.830

您可以使用`flock()`函数来锁定文件。有关更多信息，请参阅[此](http://www.tuxradar.com/practicalphp/8/11/0)

就像是：

```
 <?php

      $content = file_get_contents("./file.csv");
      $fp = fopen("./file.csv", "w"); // open it for WRITING ("w")
      if (flock($fp, LOCK_EX)) 
      {
      // do your file writes here
      fwrite($fh, $date_yy . '-' . $date_mm . '-' . $date_dd . '|' . $address . '|' .  $person . '|' . $time_hh . ':' . $time_mm);
      fwrite($fh, "\n" . $content);
      fclose($fh);
      flock($fh, LOCK_UN); // unlock the file
      } 
   ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T15:06:07.843

按意愿排序：

1.  使用数据库。
2.  使用多个文本文件。
3.  使用[锁](http://www.php.net/manual/en/function.flock.php)：

例如：

```
$lockwait = 2;       // seconds to wait for lock
$waittime = 250000;  // microseconds to wait between lock attempts
// 2s / 250000us = 8 attempts.
$myfile = '/path/to/file.txt';

if( $fh = fopen($myfile, 'a') ) {
  $waitsum = 0;
  // attempt to get exclusive, non-blocking lock
  $locked = flock($fh, LOCK_EX | LOCK_NB); 
  while( !$locked && ($waitsum <= $lockwait) ) {
    $waitsum += $waittime/1000000; // microseconds to seconds
    usleep($waittime);
    $locked = flock($fh, LOCK_EX | LOCK_NB);
  }
  if( !$locked ) {
    echo "Could not lock $myfile for write within $lockwait seconds.";
  } else {
    // write out your data here
    flock($fh, LOCK_UN);  // ALWAYS unlock
  }
  fclose($fh);            // ALWAYS close your file handle
} else {
  echo "Could not open $myfile";
  exit 1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:19:19.730

您可以使用[PHP 的flock 函数](http://php.net/manual/en/function.flock.php "PHP 群")来锁定文件以进行写入，但是该锁定不会在Web 请求中持续存在，并且不适用于NFS 挂载（至少根据我的经验）。

最好的办法可能是在同一目录中创建一个令牌文件，检查其是否存在，如果存在则报告错误。

与任何锁定方案一样，您将在操作完成后保留竞争条件和锁定，因此您需要一种方法来缓解这些情况。

我建议在编辑该值并将其存储在锁定文件中之前创建文件的哈希值。还将该哈希作为编辑表单的一部分发送给客户端（因此它作为提交请求中的数据返回）。在写入之前，将传递的哈希值与文件中的值进行比较。如果它们相同，则提交数据并移除锁。

如果它们不同，则显示错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T15:05:46.050

你可以试试`flock — Portable advisory file locking`？

[http://php.net/manual/en/function.flock.php](http://php.net/manual/en/function.flock.php)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-15T15:05:35.683

我只会使用一个简单的整数或类似的东西。

```
 $content = file_get_contents("./file.csv");
  $fh = fopen("./file.csv", "w");
  $status = 1;

...      

if($status == 1){
   fwrite($fh, $date_yy . '-' . $date_mm . '-' . $date_dd . '|' . $address . '|' . $person . '|' . $time_hh . ':' . $time_mm);
   fwrite($fh, "\n" . $content);
   fclose($fh);
   $status = 0;
  }
else
     echo "the file is edited by another user, please try again later."; 
```

你是这个意思吗？

# ios6 - 如何在 PayPal iOS SDK 1.0.1 上获取 TransactionID

> ID：15435620
> 
> 赞同：0
> 
> 时间：2013-03-15T15:01:41.013
> 
> 标签：ios6, paypal

如何使用 PayPal iOS SDK 1.0.1 从 iOS 设备获取 TransactionId？！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T00:27:07.043

其实这是一个公平的问题。新的 PayPal iOS SDK 1.0.1 不再提供 TransactionID。您从 SDK 获得的东西称为“购买证明”。您可以在此页面上找到详细信息：[https ://developer.paypal.com/webapps/developer/docs/integration/mobile/verify-mobile-payment/](https://developer.paypal.com/webapps/developer/docs/integration/mobile/verify-mobile-payment/)

您是否有理由特别需要 TrasactionID ？

# objective-c - 使用 fmdb 打印准备好的语句

> ID：15435629
> 
> 赞同：3
> 
> 时间：2013-03-15T15:02:02.183
> 
> 标签：objective-c, sqlite, fmdb

有没有办法打印准备好的语句，或者至少在使用 fmdb 时实现 sqlite3_trace 函数？尝试从 FMResultset 访问该语句不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:42:14.827

一个`sqlite3_trace`函数

```
void myTraceFunc(void *uData, const char *statement)
{
    NSLog(@"%s", statement);
} 
```

可以用

```
FMDatabase *db = ...;
[db open];
sqlite3_trace([db sqliteHandle], myTraceFunc, NULL); 
```

# ms-word - MS Word 2007 - 如何设置占位符文本以模仿文本而不是格式化

> ID：15435633
> 
> 赞同：2
> 
> 时间：2013-03-15T15:02:10.520
> 
> 标签：ms-word, word-template, word-field, word-contentcontrol

对于这个特定的问题，我可能会咬得比我能咀嚼的更多，但我会尽量做到具体，以防它在我的范围内。免责声明：除了简单的数据输入/某些格式之外，我对 MS Word 的经验并不丰富，而且我使用宏或 VBasic 的经验绝对为零。不幸的是，我担心我的问题的解决方案将以最后两个之一的形式出现。

目标：

我想要做的是在我的模板文档中使用占位符文本，当它的第一个实例被更改时，它会更改内容但不会格式化。基本上，我正在为软件套件的支持手册编写模板。每个应用程序都有某些相似的功能，例如菜单栏、数据输入屏幕、诊断日志屏幕、交易历史记录等，因此我会预先编写这些部分并在需要插入某些应用程序特定属性时使用占位符。

我开始使用 Insert->Quick Parts->Document Property->Subject 工具，我用它作为应用程序名称的占位符。我将属性设置为 [Subject]，然后在整个文档中使用 Insert->Quick Parts->Field->Subject，只要我需要包含应用程序名称。在这种情况下这很好用，因为应用程序名称将始终大写。我只需更改第一个 [Subject] 中的文本（内容受控）并更新整个文档中的字段，它们都很好地匹配，简单易行，工作完成，回家喝啤酒，对吗？

不完全的。

我们的软件通过扫描仪和 SQL Server 处理零件跟踪，因此虽然应用程序中的界面和菜单基本保持不变，但它们跟踪的零件因应用程序而异。因此，当我在手册文本中引用它时，我需要更改部件名称；例如，如果我在 ToiletPap.app 中工作并且我们的 TP 被滚动跟踪，我需要将 [Component] 的每一次提及都更改为滚动。如果我在 LightBulbs.app 中工作，我需要 [Component] 来表示灯泡。

我首先尝试使用 Document Properties 下拉菜单下的 Advanced 选项卡创建一个名为 Component 的自定义文档属性。然后，我围绕我的第一个 [Component] 标题为 Component 创建了一个纯文本内容控件，并使我的下一个 [Component] 成为一个带有修改代码的字段：{COMPONENT * MERGEFORMAT}。这来自复制我在 [主题] 工作时可以找到的内容。这根本不起作用。更新第一个 CC 中的文本不会更改 Content doc 属性，并且我的字段返回“！未定义的书签，组件”。

通过使用最初设置为 [Component] 的 [Comments] 文档属性，我接近了我需要的内容。我就像 [Subject] 一样使用它，但是（这是当我意识到大写将成为一个问题时）当我在文本中提到我的 [component] 时，我经常需要小写而不是大写.

我已经查看了 MS 的论坛和其他一些论坛以及 SO，我找不到任何试图做同样事情的人，更不用说如何回答了。回答时请记住，如果您包含有关如何输入/实施您提供的代码的分步说明，这将对我有很大帮助，因为正如我所提到的，我不知道如何进行编辑MS Word 的宏/VBasic。

重申和总结我的整体问题：如何使用显示文本“[Component]”的占位符，以便当我将 [Component] 的第一个实例更改为其他内容时，说“hopper”，每个后续实例 [ Component] 已更新为 hopper 但仍保持其当前的大小写和格式方案？

对请求的长度表示歉意，但我想确保我尽可能准确地解释了情况。提前感谢您的考虑和回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:57:06.240

经过几个小时的修修补补，我设法解决了这个问题。我也不需要宏或 VBasic。

在 [component] 的第一个实例上，我创建了一个纯文本内容控件作为容器（不是必需的，但它使它看起来更好。最终可能会导致问题，但现在，它按预期工作）和给它加了书签。然后，对于 [container] 的所有其他实例，我选择了每个实例并使用 Insert->Quick Parts->Field->Ref 和以下字段代码：

```
REF Text1 \*Lower 
```

其中“Text1”是我的书签，“*Lower”表示全部小写。*Lower 可以替换为 *Upper 或 *FirstCap，分别表示全部大写或首字母大写。现在，每个字段都反映了第一个字段的文本，大小写适合每个字段在文档中的位置。就像使用带有 [Subject] 的 doc 属性一样，需要 ^a -> f9 来更新文档中的所有字段。

# login - 是否存在向用户提供个人页面的开源登录系统？

> ID：15435635
> 
> 赞同：0
> 
> 时间：2013-03-15T15:02:12.893
> 
> 标签：login

大家好，感谢您抽出时间来看看我的问题。

我对网站编程比较陌生，想知道是否有任何开源登录系统可以让用户在登录时拥有自己的页面，其中包含他们的个人详细信息。

与例如 facebook 或 yahoo 电子邮件的概念相同，当用户输入凭据时，他们将被带到他们自己的空间，而不是网站的通用成员专用部分。

任何意见或建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-24T03:29:03.980

这可能有点晚了，但我讨厌没有答案的问题。（最令人沮丧）

当谈到这种风格的事情时，我并不是什么大师，但有许多开源内容管理系统 (CMS) 应用程序可以处理这种类型的事情。

我个人的偏好是[Drupal](https://drupal.org/)，因为我发现它非常直观，具有相当大的支持基础以及许多可以处理用户帐户、登录重定向、购物车等的功能和插件\模块。

我还会看一下[Wordpress](http://wordpress.com/)和[Joomla](http://www.joomla.org/)，因为它们也很好地支持开源 CMS 应用程序。所有这三个 CMS 都有很棒的教程，可以通过谷歌搜索或前往 Youtube 找到。

# c# - 从字典中复制对对象的引用或直接从字典中访问它是否更快？

> ID：15435636
> 
> 赞同：7
> 
> 时间：2013-03-15T15:02:16.053
> 
> 标签：c#, performance, dictionary

问题很简单

是这个代码

```
public Dictionary<string, SomeObject> values = new Dictionary<string, SomeObject>();

void Function()
{
    values["foo"].a = "bar a";
    values["foo"].b = "bar b";
    values["foo"].c = "bar c";
    values["foo"].d = "bar d";
} 
```

和这段代码一样快

```
public Dictionary<string, SomeObject> values = new Dictionary<string, SomeObject>();

void Function()
{
    var someObject = values["foo"];
    someObject.a = "bar a";
    someObject.b = "bar b";
    someObject.c = "bar c";
    someObject.d = "bar d";
} 
```

常识告诉我，在字典中查找一次引用并将其存储在某个地方应该更快，这样就不需要多次查找，但我真的不知道字典是如何工作的。

那么它是否更快？为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T15:05:24.937

是的，你是对的。您的第一种方法执行字典查找 4 次，而第二种方法执行一次。第二个肯定更好。

然而，在现实生活中，字典查找速度快得离谱，所以除非你有一个庞大的字典，否则差异不会很明显，甚至可能无法测量。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T15:37:59.813

乔是绝对正确的，但好像还不够我做了一个简单的明显测试：

```
static void Main(string[] args)
{
    var dict = new Dictionary<string, Foo>();
    var number = 10000000;
    for (int i = 0; i < number; i++)
    {
        dict[i.ToString()] = new Foo();
    }

    var watch = new Stopwatch();

    watch.Start();
    for (int i = 0; i < number; i++)
    {
        var key = i.ToString();
        dict[key].A = "a";
        dict[key].B = "b";
        dict[key].C = "c";
        dict[key].D = "d";
    }

    watch.Stop();
    Console.Out.WriteLine(watch.ElapsedMilliseconds);

    watch.Reset();

    watch.Start();
    for (int i = 0; i < number; i++)
    {
        var key = i.ToString();
        var foo = dict[key];

        foo.A = "a";
        foo.B = "b";
        foo.C = "c";
        foo.D = "d";
    }

    watch.Stop();
    Console.Out.WriteLine(watch.ElapsedMilliseconds);
}   

class Foo
{
    public string A { get; set; }
    public string B { get; set; }
    public string C { get; set; }
    public string D { get; set; }
} 
```

在我的机器上，这输出到：

```
3423
2113
Press any key to continue . . . 
```

只有 1 次查找肯定会减少大数字的总时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:32:47.830

我很好奇。以下单元测试（可能）表明第二种方法快了大约 25%。（121 毫秒对 91 毫秒）。从 6 个字段到 2 个字段缩小了差距，分别为 40 毫秒和 33 毫秒。我说可能是因为我写得很快，而且我不相信它不会测量一些副作用，但它显示了预期的行为，所以为什么要质疑它。（哈）。

```
using System;
using System.Text;
using System.Collections.Generic;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System.Diagnostics;

namespace TestProject1
{

public class DataObject
{
    public string A { get; set; }
    public string B { get; set; }
    public string C { get; set; }
    public string D { get; set; }
    public string E { get; set; }
    public string F { get; set; }
}

[TestClass]
public class UnitTest1
{
    public static Dictionary<string, DataObject> dict = new Dictionary<string, DataObject>();
    static string lookie;

    [ClassInitialize()]
    public static void MyClassInitialize(TestContext testContext) {

        Random rand = new Random(123545);
        for (int i = 0; i < 10000; i++)
        {
            string key = rand.NextDouble().ToString();
            DataObject dob = new DataObject();
            dict.Add(key, dob);
            if (i == 4567)
                lookie = key;
        }

    }

    [TestMethod]
    public void TestMethod()
    {
        Stopwatch sw = new Stopwatch();
        sw.Start();
        for (int j = 0; j < 100000; j++)
        {
            dict[lookie].A = "val" + j;
            dict[lookie].B = "val" + j;
            dict[lookie].C = "val" + j;
            dict[lookie].D = "val" + j;
            dict[lookie].E = "val" + j;
            dict[lookie].F = "val" + j;
        }
        sw.Stop();

        System.Diagnostics.Debug.WriteLine(sw.ElapsedMilliseconds);

        sw.Reset();
        sw.Start();
        for (int j = 0; j < 100000; j++)
        {
            DataObject dob = dict[lookie];
            dob.A = "val" + j;
            dob.B = "val" + j;
            dob.C = "val" + j;
            dob.D = "val" + j;
            dob.E = "val" +j;
            dob.F = "val" +j;
        }
        sw.Stop();

        System.Diagnostics.Debug.WriteLine(sw.ElapsedMilliseconds);
    }
  }
} 
```

# trac - trac 在默认安装中将用户和密码存储在哪里？

> ID：15435637
> 
> 赞同：2
> 
> 时间：2013-03-15T15:02:16.577
> 
> 标签：trac

我有一长串要删除的用户。我登录了 trac.db，但没有找到任何类似于用户/密码表的内容。trac 在默认安装中将用户和密码存储在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T05:57:34.230

供将来参考：可能最简单的方法（[自 Trac 0.12 起](http://trac.edgewall.org/ticket/1347)）是使用

```
$ trac-admin <path-to-trac-env> session list
$ trac-admin <path-to-trac-env> session delete username1 username2 ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T13:06:02.250

首先也是最重要的：直到现在，Trac 中还没有明确的既不是帐户也不是用户的概念。所谓的“用户名”基本上是经过身份验证的会话 ID，或映射到“匿名”会话的任意字符串。

查看[关于 Trac 的数据库模式的权威参考](http://trac.edgewall.org/wiki/TracDev/DatabaseSchema)：

**会话**表包含所有有效的会话 ID。请注意，密钥是“sid”+“已验证”标志（0 = 未验证，1 = 已验证）。如果愿意，匿名会话中的用户可以通过会话首选项选择另一个更容易记住的会话 ID。

这取决于 Trac db 后端，如果*会话的主键在***session_attribute**中也被强制为外键。这是另一个相关表，其中包含给定会话的其他属性，例如名字+姓氏或电子邮件地址。同样，'sid' + 'authenticated' 标志组合是那里的主键。

*Trac 会在一段时间不活动后自动清除匿名会话（注意会话*表的“last_visit”中的 POSIX 秒/微秒时间戳），而经过身份验证的会话的条目将永远保留在那里。您很可能正在寻找它们（SELECT sid,last_visit FROM session WHERE authenticated=1）。

您不会在 Trac 数据库中找到密码哈希。只有像 AccountManager 的 SessionStore 这样的 Trac 插件才会将他们的密码哈希（永远不应该是明文密码）存储在数据库中（在这种情况下是表 'session_attribute'）。根据您的身份验证设置，用户凭据是独立管理的，即在 Apache htpasswd/htdigest 格式的文件中，由运行 Web 服务器 Trac 使用，或*tracd*用于独立的 Trac 设置。

# wpf - 使用 datatriggers 和 IValueConverter 更新 datagridview 行背景颜色

> ID：15435640
> 
> 赞同：3
> 
> 时间：2013-03-15T15:02:28.037
> 
> 标签：wpf, datagridview, datatrigger, ivalueconverter

我有一个 datagridview 并试图根据一列和其他两列之间的比较结果动态更新行的背景颜色。我的 datagridview 绑定到一个数据表。datagridview 中的三个不同列是 min、max 和 present。min 和 max 列中的值是静态的，不会更改。每行的当前列中的值动态更新。

我使用了一个名为 MinMaxTester 的类，它实现了 IValueConverter 接口来比较单元格的内容以返回画笔颜色。

使用我实施的解决方案，我注意到背景颜色有时会更新。datagridview 是选项卡控件中选项卡项的一部分。当 datagridview 对用户不可见时，背景颜色通常会更新。当 datagridview 对用户可见时（即选项卡控件内的选项卡项已被选中），背景颜色不会更新。

我想知道我需要在我的解决方案中进行哪些更改以使行背景颜色始终更新？

XAML 文件代码

```
<Window.Resources>
    <local:MinMaxTester x:Key="MinMaxTester"/>
</Window.Resources>

<DataGrid.Columns>
<DataGridTextColumn Header="Present" Binding="{Binding Present}"/>
<DataGridTextColumn Header="Min" Binding="{Binding Min}"/>
<DataGridTextColumn Header="Max" Binding="{Binding Max}"/>
</DataGrid.Columns>

<DataGrid.RowStyle>
    <Style TargetType="{x:Type DataGridRow}">
         <Setter Property="Background" Value="{Binding Converter={StaticResource MinMaxTester}}"/>
    </Style>
<DataGrid.RowStyle> 
```

实施代码

```
[ValueConversion(typeof(DataRowView),typeof(Brush))]
public class MinMaxTester: IValueConverter
{
    public object Convert(object datagridrow, Type target, object parameter, System.Globalization.CultureInfo culture)
    {
        int min, max, present;
        DataRowView r = datagridrow as DataRowView;
        min = int.Parse(r["Min"].ToString());
        max = int.Parse(r["Max"].ToString());
        present = int.Parse(r["Present"].ToString());
        if (present >= min && present <= max) 
            return Brushes.Green;
        else
            return Brushes.Red;
    }
    public object ConvertBack(object datagridrow, Type target, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException("Not using the ConvertBack function in  MinMaxTester");

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-28T10:48:49.587

你试过这个吗？

```
<Window.Resources>
        <my:RowBackgroundColorConverter x:Key="rowBackgroundColorConverterResource"></my:RowBackgroundColorConverter>
    </Window.Resources> 
```

* * *

```
 <DataGrid.RowStyle>
                            <Style TargetType="{x:Type DataGridRow}">
                                <Setter Property="Background" Value="{Binding fieldXXX, Converter={StaticResource converterXXX}}"></Setter>
                            </Style>
                        </DataGrid.RowStyle> 
```

**和转换器代码：**

```
using System;
using System.Globalization;
using System.Windows.Data;
using System.Windows.Media;
using System.Windows;
using System.Windows.Controls;

namespace XXX.Converters
{
    public class RowBackgroundColorConverter : IValueConverter
    {
        private readonly Color expiredColor = Colors.Red;

        private readonly Color normalColor = Colors.Gray;

        public object Convert(
            object value,
            Type targetType,
            object parameter,
            CultureInfo culture)
        {

            if (XXXXX)
                return new SolidColorBrush(expiredColor);

                return new SolidColorBrush(normalColor);
        }

        public object ConvertBack(
            object value, 
            Type targetType, 
            object parameter, CultureInfo culture)
        {
            throw new NotSupportedException();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:00:19.653

我不确定您`Present`在做什么以及在哪里，但这可能会满足您的需要（无需过多更改代码）

```
<MultiBinding Converter="{StaticResource converter}" Mode="OneWay">
    <MultiBinding.Bindings>
        <Binding Path="Present" />
        <Binding Path="" />
    </MultiBinding.Bindings>
</MultiBinding> 
```

...然后在你的转换器中（现在是`IMultiValueConverter`- 所有类似的只是一个字段）你有两个值。您使用“行”来计算。
...并且您使用直接绑定`Present`来触发更改。

您还需要确保“持有”现在的任何东西 - 已经提到了 INotifyPropertyChanged。

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:45:00.447

您说您绑定到 a `DataTable`，但是 a 中的数据`DataTable`没有实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)，因此不会`PropertyChange`发出通知来告诉 UI 它需要更新。

我建议切换到将您`DataGrid`从 a绑定`DataTable`到a `ObservableCollection<MyDataObject>`，并确保`MyDataObject`实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

# ruby-on-rails - 如何为演示目的设置默认 current_user

> ID：15435641
> 
> 赞同：1
> 
> 时间：2013-03-15T15:02:28.490
> 
> 标签：ruby-on-rails, devise

我设置了一个假用户来演示我的应用程序。这个想法是，不会登录的访问者应该仍然能够看到真实用户将拥有的所有功能。当未登录的访问者访问该站点时，该应用程序将登录演示用户，访问者将看到属于该演示用户的虚假数据。

考虑到这个目标，我像这样设置我的应用程序控制器。

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :set_current_user

  def demo_user
    @demo_user ||= User.find_by_email("demo@example.com")
  end

  protected
    def set_current_user
      if current_user.nil?
        sign_in(demo_user)
      end
    end
end 
```

我的问题是我不小心让真实用户无法登录。只要真实用户按下“登录”链接，他们就会被告知他们已经登录（作为演示用户）。

很明显，我所做的与“最佳实践”相去甚远。在这种情况下，聪明的程序员会怎么做？如何让我漂亮的自动登录演示用户保持登录状态，但仍然让真实用户登录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:07:54.997

您需要添加一个`:except`到您的`:before_filter`，以便它不会在 sign_in 操作上运行，无论它可能是什么。假设您正在使用设计，那就是`SessionsController#new`，所以它看起来像：

```
before_filter :set_current_user, :except => :new 
```

请注意，这将跳过所有“新”操作的过滤器，因此更有针对性的方法是（再次假设您使用的是设计）创建一个`SessionsController`继承自的自定义`Devise::SessionsController`并将其留空，除了：

```
skip_before_filter :set_current_user, :only => [:new, create] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:12:57.777

您的`set_current_user`函数在 a`before_filter`中，这意味着它为每个请求运行一次。这`current_user`将是`nil`任何人第一次访问，因此他们将作为演示用户登录。您可以跳过`before_filter`您的`sessions_controller#create`操作（或在您的应用程序中调用的任何内容。例如，如果您使用的是设计：

```
class SessionsController < Devise::SessionsController
  skip_before_filter :set_current_user, :only => :create
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:08:39.230

这就是我最终的结果。我从 Omnikron 的解决方案开始，但我需要更多。

这篇文章有帮助：[https](https://groups.google.com/forum/#!msg/plataformatec-devise/0WylcwjSAJY/ITDF6kFjJvwJ) ://groups.google.com/forum/#!msg/plataformatec-devise/0WylcwjSAJY/ITDF6kFjJvwJ 。

```
class SessionsController < Devise::SessionsController
  skip_before_filter :set_current_user, only: [:new, :create]
  skip_before_filter :require_no_authentication, :only => [:new, :create]

  def new
    if user_signed_in?
      sign_out current_user
      redirect_to new_user_session_path
    else
      super
    end
  end
 end 
```

# python - python 不会将文件句柄释放到日志文件

> ID：15435652
> 
> 赞同：55
> 
> 时间：2013-03-15T15:02:57.890
> 
> 标签：python, logging

我有一个必须运行许多模拟运行的应用程序。我想设置一个日志记录机制，其中所有日志记录都记录在 general.log 中，模拟运行的所有日志都转到 run00001.log，...。为此，我定义了一个类 Run。为运行日志添加了`__init__()`一个新的文件句柄。

问题是运行的日志文件永远不会被释放，因此在多次运行后可用的句柄被耗尽并且运行崩溃。

我已经设置了一些例程来测试它，如下所示

主程序

```
import Model
try:
    myrun = Model.Run('20130315150340_run_49295')
    ha = raw_input('enter')
    myrun.log.info("some info")
except:
    traceback.print_exc(file=sys.stdout)

ha = raw_input('enter3') 
```

类 Run 在模块 Model 中定义如下

```
import logging
class Run(object):

    """ Implements the functionality of a single run. """
    def __init__(self, runid):
        self.logdir="."
        self.runid          = runid
        self.logFile        = os.path.join(self.logdir , self.runid + '.log')
        self.log            = logging.getLogger('Run'+self.runid)
        myformatter         = logging.Formatter('%(asctime)s %(name)-12s %(levelname)-8s %(message)s')
        myhandler      = logging.FileHandler(self.logFile)
        myhandler.setLevel(logging.INFO)
        myhandler.setFormatter(myformatter)
        self.log.addHandler(myhandler) 
```

然后我使用程序进程资源管理器来跟踪文件处理程序。我看到运行日志出现了，但从未消失。

有没有办法我可以强制这样做？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-03-18T10:29:14.077

您需要调用`.close()`文件处理程序。

当您的`Run`课程完成时，请致电：

```
handlers = self.log.handlers[:]
for handler in handlers:
    handler.close()
    self.log.removeHandler(handler) 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2018-11-14T14:58:36.077

您也可以完全[关闭日志记录](https://docs.python.org/3/library/logging.html#logging.shutdown)。在这种情况下，正在释放文件句柄：

```
logging.shutdown() 
```

它关闭所有已配置的日志记录处理程序的打开句柄。

我需要它能够在单元测试完成后删除日志文件，并且我能够在调用该`logging.shutdown()`方法后立即删除它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-05-26T19:52:30.320

我使用的是交互式 Python 环境（Spyder）。显然，Spyder 在内部使用日志记录。因此， logging.shutdown() 不会产生预期的效果。同一程序的下一次执行使日志记录翻了一番，第三次执行使它们增加了三倍，等等。在此环境中，shutdown() 显然不会删除处理程序。此外，我并没有通过发出明确的 shutdown() 调用以任何方式破坏 Spyder。令人费解。

Martijn 的代码一次一个地显式关闭和删除处理程序，在 Spyder 环境中确实有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-29T11:00:13.430

可能我们只想要's`.close()`而`FileHandler`不是其他人，所以接受的答案可以稍微修改如下：

```
for handler in self.log.handlers:
    if isinstance(handler, logging.FileHandler):
        handler.close() 
```

此外，对于我们只配置了一个记录器的更简单的情况，`logging.basicConfig()`可以通过调用来检索处理程序`logging.getLogger().handlers`。

# html - 需要以相同大小显示 td，我想删除图像并需要放置文本

> ID：15435665
> 
> 赞同：0
> 
> 时间：2013-03-15T15:03:14.983
> 
> 标签：html

我有这个与图像正常工作

```
 <td width="32%" valign="top"><img src="<?php echo $appConfigurations['url'];?>03.png" width="200" height="13" /></td> 
```

当我放置文本而不是图像时，它没有正确显示我我想要完全相同大小的 td 以便我可以写文本

```
 <td width="32%" valign="top" bgcolor="#4A4A4A"><span class="style1" style="display: block;"><?php echo "Hello !!!!";?></span></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:10:19.390

您应该使用 CSS 设置 td 样式。尝试这个：

```
<td valign="top" style="width:32%; height:13px; overflow:hidden; background-color:#4A4A4A;"> ..code ..</td> 
```

# ios - 如何在协议委托方法中发送对象以获取通知和要操作的对象

> ID：15435673
> 
> 赞同：0
> 
> 时间：2013-03-15T15:03:49.953
> 
> 标签：ios, objective-c, delegates, protocols

```
@protocol VideoDelegate <NSObject>

 @optional
-(void)videoPlayBackDidFinish:(NSObject*)currencyInfo;
-(void)videoPlayBackDidStart; 
```

我想用 发送一个 json 对象，`videoPlayBackDidFinish`这样我就可以收到它已完成的通知，并且我可以选择使用该对象的一部分

前任：`object.valueOfWhatever`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:22:21.723

将 JSON 转换为字典，然后在通知中将其作为 userInfo 发送：

```
NSDictionary *quickDict = [NSDictionary dictionaryWithObjectsAndKeys:object1, key1, nil];

NSNotification* notification = [NSNotification notificationWithName:kVideoDidFinishNotification object:self userInfo:quickDict];
[[NSNotificationCenter defaultCenter] postNotification:notification]; 
```

我不知道如何使 videoPlayBackDidFinish 成为消息的接收者，而无需在您的代表中执行以下操作：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(videoPlayBackDidFinish:) name:kVideoDidFinishNotification object:nil]; 
```

然后在获取字典的方法中：

```
-(void)videoPlayBackDidFinish: (NSNotification*)notification
{
    NSDictionary *jsonInfo = [notification userInfo];
} 
```

# jquery - 使用 Google Analytics 跟踪基于 ajax 的搜索

> ID：15435674
> 
> 赞同：7
> 
> 时间：2013-03-15T15:03:53.343
> 
> 标签：jquery, google-analytics

我们有一个搜索框，可以显示嵌入到页面中的谷歌地图上的结果。我们使用对服务器的 ajax 异步调用来执行搜索，然后将结果显示在地图上，而无需对页面 url 进行任何重定向或更改。

是否可以使用 Google Analytics 的站点搜索来跟踪这一点？那会是什么设置？或者这根本不是要使用站点搜索功能进行跟踪的东西？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-14T21:55:58.200

只是对已经很好的答案的谷歌通用分析的语法更新：

```
ga('send', 'pageview', '/mysite/?q=searchterm'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-15T15:37:50.673

在您的 ajax 请求中使用您的搜索参数作为虚拟 url 中的获取参数（必须在 GA 后端配置搜索参数的名称）在您的 ajax 请求中放置一个虚拟网页浏览（带有第二个参数的 trackPageview 调用）。

```
...(on ajax success)..:
_gaq.push(['_trackPageview','mysite/?q=searchterm']); 
```

# iis - 如何找出在 IIS 中注册的 .Net 版本

> ID：15435686
> 
> 赞同：2
> 
> 时间：2013-03-15T15:04:25.130
> 
> 标签：iis, iis-7

一个可以使用

> aspnet_regiis.exe

在命令行中向 IIS 注册版本（前提是您先 cd 到正确的目录），这一切都很好

但是有没有办法找出哪些版本已经在 IIS 中注册？

如，我想注册一个版本，但我不确定它是否已经注册。我该怎么说？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T22:07:21.080

您可以运行以下检查来验证注册版本：

> aspnet_regiis.exe -lv

已注册的框架应返回已注册 aspnet_isapi.dll 位置的行

> appcmd.exe 列出 apppool /managedRuntimeVersion:v4.0

这将列出指定运行时版本的所有已安装应用程序池，因此如果它返回 none - 运行时可能未注册。

> appcmd.exe 列表配置-section:system.webServer/isapiFilters

应该返回已注册的 isapi 过滤器列表，aspnet_filter.dll 就是其中之一，驻留在框架文件夹中，例如“c:\Windows\Microsoft.NET\Framework\v2.0.50727\aspnet_filter.dll”

另一种可能的解决方案是使用 .net 代码扫描可用的应用程序池并获取它们的运行时版本：

```
using Microsoft.Web.Administration;
...
public static bool IsAspNetRegistered(string v = "v4.0")
{
    using (var mgr = new ServerManager())
    {
        return mgr.ApplicationPools.Any(pool => pool.ManagedRuntimeVersion == v);
    }
} 
```

# c# - 在读取异常时执行 webrequest 和接收错误：底层连接已关闭：接收时发生意外错误

> ID：15435687
> 
> 赞同：1
> 
> 时间：2013-03-15T15:04:26.780
> 
> 标签：c#, asp.net, c#-4.0

我正在尝试在 asp.net4.0 c# 中进行发布请求。但我在阅读响应时收到错误。

错误：异常：基础连接已关闭：接收时发生意外错误。

```
 public static string PostWithResponse(string PostUrl, string DataUrl, string PostContentType, bool isTimeOut, int ResponseTimeOut)            
  {
        string returnPostResponse = string.Empty;
        HttpWebRequest PostRequest = (HttpWebRequest)WebRequest.Create(PostUrl);
        PostRequest.ContentType = PostContentType;
        PostRequest.Method = "POST";
        byte[] bytes = Encoding.ASCII.GetBytes(DataUrl);
        Stream os = null;
        try
        {
            PostRequest.ContentLength = bytes.Length;
            os = PostRequest.GetRequestStream();
            os.Write(bytes, 0, bytes.Length);
            if (isTimeOut)
            {
                PostRequest.Timeout = ResponseTimeOut;
            }
        }
        catch (Exception ex)
        {
            //
        }
        finally
        {
            if (os != null)
            {
                os.Close();
            }
        }

        try
        {
            HttpWebResponse PostResponse = (HttpWebResponse)PostRequest.GetResponse();
            if (PostResponse == null)
            {
                //
            }
            StreamReader sr = new StreamReader(PostResponse.GetResponseStream());
            returnPostResponse = sr.ReadToEnd().Trim();
        }
        catch (Exception ex)
        {
            //Error Found Here
        }
        return returnPostResponse;
  } 
```

# angularjs - AngularJs搜索和分页代码重复

> ID：15435688
> 
> 赞同：0
> 
> 时间：2013-03-15T15:04:27.033
> 
> 标签：angularjs

我正在编写的应用程序的某些模块为用户提供了过滤数据集并对结果进行分页的选项。

在让一切按预期工作后，我正在尝试重构代码以删除代码重复。

上述每个模块都共享相同的过滤和分页逻辑。

我想知道为了消除这种重复，最好遵循哪种做法。

到目前为止，我正在考虑使用以下 API 创建一个“过滤器和分页”服务：

*   Paginate(items,predicate,itemsPerPage) 返回一个对象：{ paginatedItems nrOfPages }

集合中传递的每个项目都会调用谓词，它用于根据用户偏好选择项目。

现在每个模块都可以利用该 API。

有没有更好的推荐方法？

在此先感谢您的帮助

# wcf - 如何使用个人证书进行 WCF 通信？

> ID：15435689
> 
> 赞同：1
> 
> 时间：2013-03-15T15:04:27.803
> 
> 标签：wcf, encryption, runtime, certificate, smartcard

将智能卡插入读卡器时，证书将被读入个人存储，我的问题很简单，然后我如何向 WCF 解释它应该在运行时使用特定的（这些）证书？

我的 WCF 服务是自托管的，并通过 TCP 与客户端通信。

我已经有一个使用证书的通信，但这些证书在配置文件中说明（一个用于服务，一个用于客户端）。

现在我需要在通信之前在客户端切换证书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:18:24.267

您应该尝试找到一组特定的属性，这些属性对于您要使用的证书是唯一的。例如我们使用这样的过滤：

```
 /// <summary>
    /// Get the certificate we need for authentication
    /// </summary>
    /// <returns>the certificate</returns>
    /// <exception cref="InvalidOperationException">when no certificate is available</exception>
    public static X509Certificate2 GetCertificate()
    {
        // open private certificate store of the user
        X509Store store = new X509Store(StoreName.My);
        store.Open(OpenFlags.ReadOnly);

        // get the collection of certificates which we need
        X509Certificate2Collection certColl = store.Certificates
            .Find(X509FindType.FindByExtension, new X509KeyUsageExtension().Oid.Value, false)
            .Find(X509FindType.FindByKeyUsage, X509KeyUsageFlags.NonRepudiation, false);

        store.Close();
        // if more certificates match the criteria, let the user choose one
        if (certColl.Count > 1)
        {
            certColl = X509Certificate2UI.SelectFromCollection(
                certColl, "Choose certificate", "We were unable to find the correct certificate. Please choose one from the list.",
                X509SelectionFlag.SingleSelection);
        }
        // if no certificate is available, fail
        if (certColl.Count < 1)
        {
            throw new InvalidOperationException("No certificates selected");
        }
        else
        {
            return certColl[0];
        }
    } 
```

检查所需证书的属性并尝试创建自己的查找条件。当然，用户可以在他的商店中拥有符合标准的附加证书，在这种情况下，会弹出一个对话窗口并要求用户自己执行此操作。

当然，一旦用户选择了正确的证书，您可以将证书的 CN 存储在应用程序配置文件中，这样下次他就不必再执行这些步骤了。

# c# - 强制转换 ExecuteScalar() 结果 c#

> ID：15435695
> 
> 赞同：6
> 
> 时间：2013-03-15T15:04:46.663
> 
> 标签：c#, asp.net, casting, executescalar

为什么这行得通

```
int collectionCharge = (int)cmdCheck.ExecuteScalar(); 
```

但这会产生异常

```
double collectionCharge = (double)cmdCheck.ExecuteScalar(); 
```

> System.InvalidCastException：指定的强制转换无效。

为什么它无效？

**编辑** 我试图简单地从查询中返回一个结果，得到一些运费的价格。所以我不能把它变成一个，`int`因为它必须有小数，因此试图转换为`double`. 我还在学习 asp.net，所以如果有更好的方法来实现这一点，请给我指出正确的方向:)

**使用 SQL编辑 2** 的完整代码...

```
using (SqlCommand cmdCheck = new SqlCommand("SELECT FREIGHT_PRICE FROM FREIGHT_QUOTER_BELNL_NEW WHERE CUSTOMER_NO = @CUSTOMER_NO AND COUNTRY = @COUNTRY AND ROUND(WEIGHT_FROM,0) < @WEIGHT AND ROUND(WEIGHT_TO,0) >= @WEIGHT AND SHIPVIA = '48';", connection))
                {
                    double collectionCharge = (double)cmdCheck.ExecuteScalar();
                    FreightAmount = collectionCharge;
                } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T15:08:20.453

这里的问题`ExecuteScalar`是返回一个`int`被装箱的`object`. 为了转换为a `double`，您必须先取消装箱为an，`int`然后再转换为a`double`

```
double collectionCharge = (double)(int)cmdCheck.ExecuteScalar(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-19T07:20:06.850

使用 Convert.ToXXX 来避免无效的强制转换异常。

IE

```
collectionCharge=Convert.ToDouble(cmdCheck.ExecuteScalar()); 
```

看起来 ExecuteScalar 返回一个 Object 所以代码：

```
double collectionCharge = (double)cmdCheck.ExecuteScalar(); 
```

仍然可能失败

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T15:38:56.977

感谢@DJKRAZE。

我更新了我的查询`SELECT CASE(FREIGHT_PRICE AS FLOAT)`，现在可以使用（双重）演员表。

```
double collectionCharge = (double)cmdCheck.ExecuteScalar(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-17T12:22:11.640

阅读所有答案后，我确实收到了十进制值，解决方案很简单！我刚刚将函数声明为字符串，并将十进制值作为字符串接收！

```
public static string Sals_AccountExpensesGetSums(int accountID)

{

SqlParameterHelper sph = new 
SqlParameterHelper(ConnectionString.GetWriteConnectionString(), 
"sals_AccountExpenses_GetAllSums", 1);

sph.DefineSqlParameter("@AccountID", SqlDbType.Int, ParameterDirection.Input, accountID);

string res = sph.ExecuteScalar().ToString();

return res;
} 
```

在业务层中，我将结果更改为加倍！

```
public static decimal GetAccountExpensesSums(int accountId)
{
string res = "";
decimal sums = 0;

res = DBAccount.Sals_AccountExpensesGetSums(accountId);

// check so we will not have exception 
if ( res != "")
sums = Convert.ToDecimal(res);

return sums;

} 
```

结果根据需要完美：889678.70

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-09-23T10:25:51.827

我建议使用以下代码：

```
object o = c.ExecuteScalar();
     if (o != null)
     {
         int x = Int32.Parse(o.ToString());      
     } 
```

这有两件事。首先，它确保您的 c.ExecuteScalar() 没有返回**null**如果它这样做并且您尝试强制转换，那么您会遇到问题。

其次，它使转换变得更加简单，因为它可以应用于从查询中读取的几乎所有情况。

对象变为字符串。如果你想要它作为一个字符串，你就完成了。如果您希望它作为布尔值，请检查该 string.Equals("true") 如果您希望它作为 int，`Int32.Parse(string);` 如果您希望它作为 long，`Int64.Parse(string);`

基本上，您不必担心完全理解重载/显式转换。

# sql - 不显示重复项

> ID：15435697
> 
> 赞同：1
> 
> 时间：2013-03-15T15:04:58.203
> 
> 标签：sql, duplicates

我的结果显示了我不想要的重复项。我们有一个列调用地址类型，它根据在 db 中输入的内容返回 B 或 L。如果选择 B，则输入数据是不正确的，因为这既是交货地址又是法定地址。

提取数据时，我得到序列号等，但我得到了两次……那些在 B 和 L 中都有地址数据的。

这是我的查询 - 如何使双行不显示？

```
USE inventory
SELECT distinct
dbo.addressinfo.locationinfoid, dbo.equipmentlocationscurrent.serialnum,    dbo.addressinfo.addresstype
FROM dbo.equipmentlocationscurrent
full join dbo.addressinfo
on  dbo.equipmentlocationscurrent.locationinfoid = dbo.addressinfo.locationinfoid
where  (clientName = 'cps lease')
and (locationtype = 'merchant')
and (addresstype = 'b' or addresstype = 'l')
order by serialnum 
```

结果样本

```
locationinfoid  serialnum
2887540       301-252-800   B
2887540       301-252-800   L 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:10:06.647

`addresstype`根据您的评论，由于您要为 each 选择哪个值并不重要，请`locationinfoid`使用 a `GROUP BY locationinfoid, serialnum`with `MAX`：

```
SELECT
  a.locationinfoid, 
  e.serialnum, 
  MAX(a.addresstype)
FROM dbo.equipmentlocationscurrent AS e
full join dbo.addressinfo AS a on e.locationinfoid = a.locationinfoid
where clientName = 'cps lease'
 and locationtype = 'merchant'
 and addresstype = 'b' or addresstype = 'l'
GROUP BY a.locationinfoid, e.serialnum
order by serialnum; 
```

这将为您提供不同的值`locationinfoid`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:14:06.367

你有很多选择，

*   从结果中排除地址类型并使用 distinct
*   使用聚合函数并按函数分组
*   知道重复项的子句的交叉并集

如果您不想获取地址类型并且想知道重复项，我会以这种方式重写查询：

```
SELECT     A.locationinfoid, E.serialnum
FROM dbo.equipmentlocationscurrent E
inner join dbo.addressinfo A
on  E.locationinfoid = A.locationinfoid
where  (clientName = 'cps lease')
and (locationtype = 'merchant')
and (addresstype = 'b')
order by serialnum

INTERSECT

SELECT     A.locationinfoid, E.serialnum
FROM dbo.equipmentlocationscurrent E
inner join dbo.addressinfo A
on  E.locationinfoid = A.locationinfoid
where  (clientName = 'cps lease')
and (locationtype = 'merchant')
and (addresstype = 'L')
order by serialnum 
```

如果您只想获取它们，请不要使用 distinct 在您的选择中包含 AddressType

```
 SELECT  DISTINCT   A.locationinfoid, E.serialnum
    FROM dbo.equipmentlocationscurrent E
    FULL join dbo.addressinfo A
    on  E.locationinfoid = A.locationinfoid
    where  (clientName = 'cps lease')
    and (locationtype = 'merchant')
    and (addresstype IN('b', 'l'))
    order by serialnum 
```

您也可以在您的分句中使用像 MAX 或 MIN 这样的聚合函数，这样您就不需要使用不同的分句

```
SELECT  A.locationinfoid, E.serialnum, MAX(A.addresstype ) AS addresstype 
        FROM dbo.equipmentlocationscurrent E
        FULL join dbo.addressinfo A
        on  E.locationinfoid = A.locationinfoid
        where  (clientName = 'cps lease')
        and (locationtype = 'merchant')
        and (addresstype IN('b', 'l'))
        Group by  A.locationinfoid, E.serialnum
        order by serialnum 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:08:22.453

Distinct 返回选择列表中包含的*任何列的任何不同记录。*所以如果你有不同的值`addressinfo.locationinfoid`，`serialnum`或者`addressinfo.addresstype`你会得到重复的记录

在这种情况下，看起来您正在提取两个不同`addresstypes`的记录，因此如果 a`locationinfoid`和`serialnum`pair 各有一个，您将获得 2 个“重复”记录。您对包含返回值的编辑证实了这一点。

如果您不关心，则不要将其`addresstype`包含在选择列表中。尝试：

```
USE inventory
SELECT distinct
dbo.addressinfo.locationinfoid, dbo.equipmentlocationscurrent.serialnum
FROM dbo.equipmentlocationscurrent
full join dbo.addressinfo
on  dbo.equipmentlocationscurrent.locationinfoid = dbo.addressinfo.locationinfoid
where  (clientName = 'cps lease')
and (locationtype = 'merchant')
and (addresstype = 'b' or addresstype = 'l')
order by serialnum 
```

# php - 将多个链接添加到给定分隔符的字符串

> ID：15435701
> 
> 赞同：0
> 
> 时间：2013-03-15T15:05:01.980
> 
> 标签：php

A 有一个与此类似的字符串

```
$string='@[Carlos]({user}:529) is going to rock @[NEW YORK]({city}:111)'; 
```

表示`@`存在标记词，类型和`main_id`. 我的目标是像这样链接标记的单词：

```
<a href="/user.php?id=529">@Carlos</a> is going to rock <a href="/city.php?id=111">@NEW YORK</a> 
```

打印后将如下所示，并带有关于 Carlos 和 New York 的链接

> @Carlos 要摇滚 @NEW YORK

使用`substr_count`我将能够知道有多少标签。我有一个函数来获取两个分隔符之间的字符串

```
function get_string_between($string, $start, $end){
    $string = " ".$string;
    $ini = strpos($string,$start);
    if ($ini == 0) return "";
    $ini += strlen($start);
    $len = strpos($string,$end,$ini) - $ini;
    return substr($string,$ini,$len); 
```

我被困在如何解决这个问题上，任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:08:22.450

使用正则表达式 (preg_match/preg_match_all/preg_replace)。示例代码：

```
<?php
$string='@[Carlos]({user}:529) is going to rock @[NEW YORK]({city}:111)';

print preg_replace('/@\[([^]]+)\]\(\{([a-z]+)\}:([0-9]+)\)/i', '<a href="/\2.php?id=\3">@\1</a>', $string);

?> 
```

但是为了安全起见，您可能希望使用 preg_replace_callback 对标签执行一些 htmlspecialchars() 。以及类型上的 urlencode() 。像这样：

```
function tag2url($matches) {
  $tag = $matches[1];
  $type = $matches[2];
  $id = $matches[3];
  return '<a href="/' . urlencode($type) . '.php?id=' . urlencode($id) . '">' . htmlspecialchars($tag) . '</a>';
}

print preg_replace_callback('/@\[([^]]+)\]\(\{([a-z]+)\}:([0-9]+)\)/i', "tag2url", $string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:20:49.420

您的数据格式很好，非常适合正则表达式。

我会使用一个看起来像这样的：

```
/@\[([\w\s]*)]\({(\w*)}:(\d*)\)/ 
```

这会寻找一个`@`符号，然后`[<words>]`是 ，然后是`({<word>}:<number>)`。

然后，您可以`preg_replace`一次用链接替换字符串。

```
$string = '@[Carlos]({user}:529) is going to rock @[NEW YORK]({city}:111)';
$regex = '/@\[([\w\s]*)]\({(\w*)}:(\d*)\)/';

$newString = preg_replace($regex, '<a href="/$2.php?id=$3">@$1</a>', $string); 
```

演示：http: [//ideone.com/EYf4KR](http://ideone.com/EYf4KR)

# ssl - 使用 Heroku 获取相互 SSL 身份验证信息

> ID：15435704
> 
> 赞同：11
> 
> 时间：2013-03-15T15:05:11.053
> 
> 标签：ssl, heroku, ssl-certificate, mutual-authentication

我正在寻找与 Heroku 建立相互 ssl 身份验证，其中第三方调用 Heroku 端点，而 Heroku 的响应取决于哪个第三方调用 Heroku。我需要使用双向 ssl，因为第三方非常注重安全。

我有一个第三方使用证书调用 Heroku（通过 SSL 插件）并且能够得到响应。因此，相互 SSL 握手似乎奏效了。

但是，我的应用程序无法确定哪个第三方调用了 Heroku，因为没有要检查的证书信息。我查看了 Heroku 标头以查看 SSL 插件是否提供了其他信息，但找不到任何东西。

有没有办法通过 Heroku 的任何其他方法从相互 sal 握手中获取证书信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-31T17:36:45.660

Heroku SSL 是使用 Amazon Elastic Load Balancer (ELB) 实现的，它在 Heroku 的路由网格之前使用您的 SSL 证书提供 SSL 终止。

因为 SSL 被终止并且协商的细节没有通过，**所以您无法从相互 SSL 握手中获取证书信息。**

但是，如果您的目标是使用基于证书的身份验证来对 HTTP 客户端进行身份验证，您可以在应用层构建它。

**免责声明：**我不是密码学家，在编写任何基于加密的身份验证机制之前，您应该咨询其中一位。

客户端的证书可用于签署您可以验证的令牌。通常，身份验证令牌将包括 some `user_id`、 a`timestamp`和 large `nonce`。您可以通过 HTTP 标头或 HTTP 查询参数将其与请求一起传递，在应用程序级别而不是 SSL 级别提供身份验证。

例如：

```
# Half-ass ruby-ish pseudocode
def generate_auth_token(user_id, cert_private_key)
  auth_payload = "#{user_id}::#{timestamp}::#{nonce}"
  token = sign(cert_private_key, auth_payload)
end

def authenticate(cert_public_key, token)
  user_id = extract_user_id(token)
  valid_token = validate_signature(token, cert_public_key)

  valid_token ? user_id : nil 
end

def validate_signature(cert_public_key, token)
  # False if signature isn't valid cryptographically based on key
  # False if timestamp isn't recent
  # False if format isn't legit
  # Otherwise true
end 
```

# python - 重新定义__init__

> ID：15435705
> 
> 赞同：0
> 
> 时间：2013-03-15T15:05:17.423
> 
> 标签：python, matplotlib

我有一个库中的类，我想修改构造函数的行为。

我在做：

```
from library import TheClass

TheClass._original_init = TheClass.__init__

def f(self, *karg, **kargw):
  print "hello"
  self._original_init(*karg, **kargw)

TheClass.__init__ = f 
```

这是正确的方法吗？在这种特定情况下我有问题：

```
import matplotlib.pyplot as plt
from matplotlib import axes
from matplotlib.ticker import MultipleLocator

axes.Subplot._original_init = axes.Subplot.__init__ 

def f(self, *karg, **kargw):
    def add_minor_locator(axis, n = 5):
        ticklocs = axis.get_ticklocs()
        diff = ticklocs[1] - ticklocs[0]
        minorLocator = MultipleLocator(diff/float(n))
        axis.set_minor_locator(minorLocator)
    add_minor_locator(self.get_xaxis())
    add_minor_locator(self.get_yaxis())

    self._original_init(*karg, **kargw)

axes.Subplot.__init__ = f

fig, ax = plt.subplots(nrows=1, ncols=1) 
```

我得到：

```
 File "/usr/lib64/python2.7/site-packages/matplotlib/axes.py", line 1319, in get_xaxis
    return self.xaxis
AttributeError: 'AxesSubplot' object has no attribute 'xaxis' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:13:54.543

您假设原始`__init__`版本已经运行；`self.get_xaxis()`只应在初始化发生*后调用：*

```
def f(self, *karg, **kargw):
    _original_init(self, *karg, **kargw)

    def add_minor_locator(axis, n = 5):
        ticklocs = axis.get_ticklocs()
        diff = ticklocs[1] - ticklocs[0]
        minorLocator = MultipleLocator(diff/float(n))
        axis.set_minor_locator(minorLocator)
    add_minor_locator(self.get_xaxis())
    add_minor_locator(self.get_yaxis()) 
```

# zend-framework - 无法打开流：没有这样的文件或目录 & 需要打开失败

> ID：15435714
> 
> 赞同：1
> 
> 时间：2013-03-15T15:05:39.467
> 
> 标签：zend-framework, loader, fatal-error

**免责声明：** *堆栈溢出中发布了类似的问题，但这些问题是它们各自的答案，既不适合这个问题，也没有他们的答案有助于解决。这些问题是不同的，答案只适合那些特定的问题，而不是通用的。经过长时间的挣扎，他们没有任何帮助，我想了两次我发布这个问题以获得帮助。如果有人不喜欢这个问题或不明白，请沟通并澄清，而不是勉强设置flag来关闭这个问题；更好的是你可以忽略并传递......谢谢！*

**要求：**我正在将 Zend 框架用于谷歌日历 API 和一个核心 PHP 网站。这是一个在线出租车预订。如果有人想预订出租车，表格应该使用预订详细信息在谷歌日历上标记，然后是数据库，最后是贝宝。如果付款是在贝宝中进行的，那么它应该通过将日历数据重新措辞更新为“已付款”或“付款 - 待处理”之类的内容。

**问题：**如果我尝试在文件中添加以下代码，程序会抛出来自以下代码行的错误消息。

* * *

*   **以下是必须阅读的，因为上面是可选的**

.

此代码用于将事件添加到谷歌日历。

**我应该如何解决这个问题？**

**源代码：**

> 错误报告（E_ALL）；
> 
> 定义（'ROOT_DIR'，目录名（目录名（**文件**）））；

// Zend 框架文件的设置路径

> set_include_path('.' . PATH_SEPARATOR . ROOT_DIR.'/app/' . PATH_SEPARATOR . ROOT_DIR.'/lib/' . PATH_SEPARATOR . ROOT_DIR.'/lib/incubator' . PATH_SEPARATOR . get_include_path() );
> 
> echo 'Zend 框架文件的设置路径 - 完成'。
> ';
> 
> 错误报告（E_ALL）；

//注册自动加载器

> require_once 'Zend/Loader.php';
> 
> echo 'loader.php - require() 完成'。'
> ';
> 
> Zend_Loader::loadClass('Zend_Gdata'); Zend_Loader::loadClass('Zend_Gdata_ClientLogin'); Zend_Loader::loadClass('Zend_Gdata_Calendar'); Zend_Loader::loadClass('Zend_Http_Client');
> 
> echo '注册自动装载机 - 完成';

// 连接到服务

> $gcal = Zend_Gdata_Calendar::AUTH_SERVICE_NAME; $user = "email@gmail.com"; $pass = " ******* "; $client = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $gcal);
> 
> echo '连接到服务 - 已完成';

**错误：**

// 我已经打印了这个语句 - 参考上面的代码。

Zend Framework 文件的设置路径 - 已完成

> 1.  警告：require_once(Zend/Loader.php)：打开流失败：第 20 行的 /home/website/public_html/add-session-dev.php 中没有这样的文件或目录
>     
>     
> 2.  致命错误：require_once()：无法打开所需的“Zend/Loader.php”（include_path='.:/home/website/app/:/home/website/lib/:/home/website/lib/incubator:.: /usr/share/pear:/usr/share/php') 在第 20 行的 /home/website/public_html/add-session-dev.php

在上述错误之后没有执行任何操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:11:10.567

搜索

从下面更改

> 定义（'ROOT_DIR'，目录名（目录名（文件）））；

到下面

> 定义（'ROOT_DIR'，目录名（目录名（**文件**））。“/public_html/zend”）；

一切对我来说都很好。如果有人无法解决此问题，请告诉我。

# c++ - OpenGL / Glut 按钮和键

> ID：15435715
> 
> 赞同：7
> 
> 时间：2013-03-15T15:05:40.720
> 
> 标签：c++, input, keyboard, glut

`Pearson, Computer Graphics with OpenGL`我正在使用's 的书自学。

我目前正在尝试做一个简单的方形移动，但在我超越自己之前，我需要确保我了解 Glut 中内置了哪些键。

我知道以下键：

*   `GLUT_KEY_F1, GLUT_KEY_F2, ..., GLUT_KEY_F12`- F1 到 F12 键
*   `GLUT_KEY_PAGE_UP, GLUT_KEY_PAGE_DOWN`- Page Up 和 Page Down 键
*   `GLUT_KEY_HOME, GLUT_KEY_END`- 主页和结束键
*   `GLUT_KEY_LEFT, GLUT_KEY_RIGHT, GLUT_KEY_UP, GLUT_KEY_DOWN`- 方向键
*   `GLUT_KEY_INSERT`- 插入键

我要么在我的书中找到它们，要么在另一篇文章的 Stackoverflow 上找到它们。

但是还有吗？例如，对于键盘和鼠标上的所有键？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T15:17:54.337

`glut`将键盘中的键除以`glutSpecialFunc`w/c 采用特殊键，例如 F1、F2...、NUMPADS 等，同时`glutKeyboardFunc`采用可以用字母、数字、ESC（“ASCII”中的 27）等字符表示的所有键， ENTER（'ASCII' 中的 32）等。

总之，在任何字符之前`glutKeyboardFunc`获取`char`可以不使用任何'\'（反斜杠，如'\t'，'\n'）来表示的参数，其余的由处理`glutSpecialFunc`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-30T22:16:46.863

键盘有两组按钮：可以用 ASCII 码表示的按钮和不能用 ASCII 码表示的按钮。可以用 ASCII 表示的那些在按下时返回 1 个字节，那些不能返回两个字节的第一个是`NULL`

glut 通过为您提供两组处理键盘事件的函数来抽象这一点：一组处理普通的 ASCII 标准按钮`glutKeyboardFunc`，另一组处理特殊的两字节按钮 `glutSpecialFunc`

特殊功能具有常用键盘特殊按钮的常量：

`GLUT_KEY_F1`：0x0001， `GLUT_KEY_F2`：0x0002， `GLUT_KEY_F3`：0x0003， `GLUT_KEY_F4`：0x0004， `GLUT_KEY_F5`：0x0005， `GLUT_KEY_F6`：0x0006， `GLUT_KEY_F7`：0x0007，：0x0007， `GLUT_KEY_F8`：0x0008， `GLUT_KEY_F9`：0x0009， `GLUT_KEY_F10`：0x000a， `GLUT_KEY_F11`：0x000b， `GLUT_KEY_F12`：0x000c， `GLUT_KEY_LEFT`：0x0064， `GLUT_KEY_UP`：0x0065， `GLUT_KEY_RIGHT`：0x0066， `GLUT_KEY_DOWN`：0x0068， `GLUT_KEY_PAGE_UP`：0x0067 , `GLUT_KEY_PAGE_DOWN`:0x0069, `GLUT_KEY_HOME`:0x006A, `GLUT_KEY_END`:0x006B, `GLUT_KEY_INSERT`:0x006C, `GLUT_KEY_REPEAT_OFF`:0x0000, `GLUT_KEY_REPEAT_ON`:0x0001, `GLUT_KEY_REPEAT_DEFAULT`:0x0002。

鼠标点击可以用 处理，`glutMouseFunc`与鼠标按钮相关的常量是 `GLUT_LEFT_BUTTON`：:0x0000, `GLUT_MIDDLE_BUTTON`:0x0001, `GLUT_RIGHT_BUTTON`:0x0002

glut 还可以处理`glutJoystickFunc`具有以下常量的 操纵杆`GLUT_HAS_JOYSTICK`：:0x0264, `GLUT_OWNS_JOYSTICK`:0x0265, `GLUT_JOYSTICK_BUTTONS`:0x0266, `GLUT_JOYSTICK_AXES`:0x0267, `GLUT_JOYSTICK_POLL_RATE`:0x0268, `GLUT_JOYSTICK_BUTTON_A`:0x0001, `GLUT_JOYSTICK_BUTTON_B`:0x0002, `GLUT_JOYSTICK_BUTTON_C`:0x0004, `GLUT_JOYSTICK_BUTTON_D`:0x0008。

如果您使用的是游戏鼠标或带有更多按钮的键盘/操纵杆，您可以通过将按下的按钮输出到控制台来测试每个按钮返回的内容，然后直接在代码中使用此值来了解是否按下了其中一个按钮

# c++ - 类线程中的静态 const char [] 安全吗？

> ID：15435720
> 
> 赞同：5
> 
> 时间：2013-03-15T15:05:52.067
> 
> 标签：c++, multithreading, static, constants, mutex

`static const`'s 在类线程中安全吗？在下面的代码中，我有`trailingBytesForUTF8`一个`static const`字符数组。可能有许多线程拥有自己的`CConvertUTF`类对象实例。`trailingBytesForUTF8`当多个线程同时访问同一个数组或任何其他线程问题时，是否会出现任何可变状态问题？另请注意，线程*永远不会*共享该类的相同对象实例`CConvertUTF`。

```
// .h
class CConvertUTF final
{
    private:
        static const char trailingBytesForUTF8[256];
    public:
        bool IsLegalUTF8Sequence(const char *source, const char *sourceEnd);
        bool IsLegalUTF8(const char *source, int length);
};

// .cpp
const char CConvertUTF::trailingBytesForUTF8[256] = {
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1, 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
    2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2, 3,3,3,3,3,3,3,3,4,4,4,4,5,5,5,5
};

bool CConvertUTF::IsLegalUTF8Sequence(const char *source, const char *sourceEnd) {
    int length = trailingBytesForUTF8[*source]+1;
    if (source+length > sourceEnd) {
    return false;
    }
    return IsLegalUTF8(source, length);
}

bool CConvertUTF::IsLegalUTF8(const char *source, int length) {
    char a;
    const *char = source+length;
    switch (length) {
    default: return false;
    /* Everything else falls through when "true"... */
    case 4: if ((a = (*--srcptr)) < 0x80 || a > 0xBF) return false;
    case 3: if ((a = (*--srcptr)) < 0x80 || a > 0xBF) return false;
    case 2: if ((a = (*--srcptr)) > 0xBF) return false;

    switch (*source) {
        /* no fall-through in this inner switch */
        case 0xE0: if (a < 0xA0) return false; break;
        case 0xED: if (a > 0x9F) return false; break;
        case 0xF0: if (a < 0x90) return false; break;
        case 0xF4: if (a > 0x8F) return false; break;
        default:   if (a < 0x80) return false;
    }

    case 1: if (*source >= 0x80 && *source < 0xC2) return false;
    }
    if (*source > 0xF4) return false;
    return true;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T15:22:09.587

只读 (const) 变量在它们被销毁之前始终是线程安全的。由于静态对象仅在程序终止时被销毁，因此它们对程序的生命周期有益。

唯一的例外是具有`mutable`成员的对象，但这不适用于`char`数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T15:24:46.920

任何指定为`static const`全局且只读的数据。

这意味着不受竞争条件的影响，因为没有人会修改数据。

要出现数据竞争条件，必须至少有写入操作

# asp.net - json传递多个字符串

> ID：15435721
> 
> 赞同：0
> 
> 时间：2013-03-15T15:05:52.770
> 
> 标签：asp.net, json

```
 <input id="SubmitCommentsToInvoice" type="button" value="Comments" onclick="ShowCommentBox()" />    
    <script>
                function ShowCommentBox() {
                    var obj =          
                    {
                    "name":"Jim",
                    "Description":"Keep er lit",
                    "Price":"12.5"
                    };

                    $("#WhereNameGoes").text(obj.name);

                    $("#dialog").dialog({ modal: true });             }
        </script>
<div id="dialog" title="Comments"  style="display:none;">
         <table class="detailstable FadeOutOnEdit">
             <tr>
                <th>Item</th>
                <th>Description</th>
                <th>Owed</th>
             </tr>
             <tr>
                 <td id="WhereNameGoes"></td>
                 <td id="Description"></td>
                 <td id="Price"></td>
             </tr>
         </table> 
         <br />
        </div> 
```

Tyring 在我的 asp.net 项目中使用 JSON 来传递字符串并在屏幕上显示。当点击评论 btn 时，只有 'jim' 出现在 div 中......为什么描述和价格没有？

塔克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:08:09.787

因为你没有告诉它。你所拥有的是：

```
 $("#WhereNameGoes").text(obj.name); 
```

您需要以相同的方式设置其他两个。

# php - 在会话中传递 Javascript 变量和 PHP 变量的混合

> ID：15435725
> 
> 赞同：1
> 
> 时间：2013-03-15T15:06:06.183
> 
> 标签：php, javascript

我有一个表单，用户在其中输入某些信息，然后他们通过 Javascript 取回一些信息。

我想将 Javascript 中的信息传递到另一个页面。虽然，在用户输入的表单中，有一个输入字段，我也想将其传递到下一个屏幕。我知道我可以通过 $POST 和 session 传递这个 Input 字段，但这是我正在努力解决的 Javascript 字段。

这是我的表单（我将显示一个字段，以免代码淹没屏幕）：

```
//I added this hidden field and it stopped my javascript form updating//
<input id="amount" type="hidden">
//===========================================================// 
<input class="applyForm-input"  id="amount" name="amount" type="text"  autocomplete="off" maxlength="6" style="position:relative; left:200px; top:-24px;"> 
```

这是通过 Javascript 输出的位置：

```
<div class="loanForm-totalToBorrow v-number" id="amountdiv"> 
```

这是我针对这个特定领域的 Javascript：

```
function updateCost() {

var amount = parseFloat(document.getElementById("amount").value) || 0.00;
    delivery = parseFloat(document.getElementById("delivery").value);
        if(delivery !='select' && delivery)
        {
            delivery=parseFloat(delivery);
        }
        else
        {
           delivery= 0.00;
        }
    total = amount + delivery;
    fixedrate =  total / 100 * 12.2;
    grandtotal = fixedrate + total;   

document.getElementById("amountdiv").innerHTML = amount.toFixed(2); 
```

现在我知道 PHP 是服务器端，Javascript 是客户端。那么我如何将这些数据传递给 PHP 变量。

在我的第二页上，我想输出一些会话。下面的一个例子：

```
<?php
echo ' <tr class="blah1"> ';
echo ' <td class="blah2">&#163;' . $_SESSION['amountdiv'] . ' </td> ';
echo ' </tr> ';
?> 
```

我查看了stackoverflow，人们提到了隐藏的输入字段。虽然，当我添加这些时，我的 Javascript 停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:25:19.033

You can use jQuery's AJAX abilities

```
$(document).ready(function(){ 
    $("#mysubmitbutton").click(function(){
    var amount = parseFloat(document.getElementById("amount").value) || 0.00;
        delivery = parseFloat(document.getElementById("delivery").value);
            if(delivery !='select' && delivery)
            {
                delivery=parseFloat(delivery);
            }
            else
            {
               delivery= 0.00;
            }
        total = amount + delivery;
        fixedrate =  total / 100 * 12.2;
        grandtotal = fixedrate + total;
        .post("mysecondpage.php", {total: total, fixedrate: fixedrate, 
                                   grandtotal: grandtotal});
    });
}); 
```

The above grabs your JavaScript variables and posts them to the PHP page you want to redirect to

```
<?php

$total = $_POST["total"];
$fixedrate = $_POST["fixedrate"];
$grandtotal = $_POST["grandtotal"];

?> 
```

You can then grab the transferred values

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:13:05.323

您在上面发布了 2 个“输入”字段。问题是，您的隐藏输入与您的文本字段具有相同的 id="amount" 。

id-attributes 的值在整个 html 页面中必须是唯一的。

因此，我建议重命名隐藏输入字段的 id，您的 javascript 应该会再次工作，您可以使用隐藏输入发布到下一页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:12:08.543

您可以在页面加载时将 php 变量值分配给 javascript 变量。

```
$var = $_SESSION['session_var'];

<script type="text/javascript">
 var myVAr = <?php echo $var; ?>;
</script> 
```

# python - 从 python 列表中删除字符串中所有出现的单词

> ID：15435726
> 
> 赞同：8
> 
> 时间：2013-03-15T15:06:07.153
> 
> 标签：python, regex

我正在尝试使用已编译的正则表达式从字符串中匹配和删除列表中的所有单词，但我正在努力避免单词中出现。

当前的：

```
 REMOVE_LIST = ["a", "an", "as", "at", ...]

 remove = '|'.join(REMOVE_LIST)
 regex = re.compile(r'('+remove+')', flags=re.IGNORECASE)
 out = regex.sub("", text) 
```

在：*“敏捷的棕色狐狸跳过一只蚂蚁”*

出：*“快棕狐跳过t”*

预期：*“快褐狐跳过去”*

我尝试更改字符串以编译为以下内容，但无济于事：

```
 regex = re.compile(r'\b('+remove+')\b', flags=re.IGNORECASE) 
```

有什么建议还是我错过了一些非常明显的东西？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-15T15:19:03.777

这是您可能要考虑的不使用正则表达式的建议：

```
>>> sentence = 'word1 word2 word3 word1 word2 word4'
>>> remove_list = ['word1', 'word2']
>>> word_list = sentence.split()
>>> ' '.join([i for i in word_list if i not in remove_list])
'word3 word4' 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-15T15:11:33.900

一个问题是只有第一个`\b`在原始字符串中。第二个被解释为退格字符（ASCII 8）而不是单词边界。

修复，改变

```
regex = re.compile(r'\b('+remove+')\b', flags=re.IGNORECASE) 
```

到

```
regex = re.compile(r'\b('+remove+r')\b', flags=re.IGNORECASE)
                                 ^ THIS 
```

# doctrine-orm - Zend\Form\Element\Collection 包含来自 Doctrine Class Table 继承的元素？

> ID：15435730
> 
> 赞同：2
> 
> 时间：2013-03-15T15:06:18.607
> 
> 标签：doctrine-orm, zend-framework2

我有一个关于使用 Doctrine ORM 的类表继承 (CTI) 和 ZF2 的问题`Zend\Form`。在我们的系统中，每个用户可以有多个角色，这些角色是通过类表继承方案定义的，因此我们可以定义角色特定的配置文件字段（即：“年级”仅适用于学生帐户）。为了构造它，有一个与（CTI“基”类）`Account`有 OneToMany 关联的实体：`Account\Role`

```
<?php
namespace CdliPortal\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="account")
 */
class Account implements AccountInterface
{
    // Other Fields Omitted

    /**
     * @ORM\OneToMany(targetEntity="CdliPortal\Entity\Account\Role", mappedBy="account", cascade={"ALL"})
     */
    protected $roles;
} 
```

我已经设置了一个`Zend\Form`绑定`Account`实体的实例（我按照[文档中的](https://github.com/doctrine/DoctrineModule/blob/master/docs/hydrator.md)[示例进行`DoctrineModule`](https://github.com/doctrine/DoctrineModule/blob/master/docs/hydrator.md)操作），并且一切似乎都正常工作...除了 CTI 集合。在我的 Form 对象中，我添加了一个`Zend\Form\Element\Collection`成员：

```
$roles = $user->getRoles();
if ( count($roles) > 0 ) {
    $formAccount->add(array(
        'type' => 'Zend\Form\Element\Collection',
        'name' => 'roles',
        'options' => array(
            'count' => count($roles),
            'target_element' => $this->serviceLocator->get('cdliportal_form_account_role'),
        ),
    ));
} 
```

但是，正如您在上面看到的，在设置`roles`字段时`target_element`（在本例中为字段集）是在集合级别指定的，这意味着集合必须是统一的。对于我的上述情况，我需要能够为`target_element`集合的每个元素单独指定，具体取决于它代表的 CTI 的哪个成员。

关于我如何以一种仍然允许在绑定 Account 对象时自动填充集合元素的方式实现这一点的任何想法/建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:25:29.440

我已经破解了一个适用于我的用例的解决方案：构建一个自定义`NonuniformCollection`表单元素，该元素传递一组原型（每个 CTI 实体一个），并在填充元素时克隆适当的元素。

我已将代码放在 Gist 中：[https ://gist.github.com/adamlundrigan/5195646](https://gist.github.com/adamlundrigan/5195646)

一个警告是模板功能不再起作用，因为它不知道要使用哪个原型。

如果有人有任何建议，我仍然愿意被展示一种更清洁的方式来实现这一点:)

# javascript - 使用 ajax 或 jQuery 在 ruby on rails 上更新数据库

> ID：15435731
> 
> 赞同：-1
> 
> 时间：2013-03-15T15:06:22.253
> 
> 标签：javascript, jquery, ruby-on-rails, ajax

我有一个文本字段输入，它包含数据库属性（参考）的值。从代码中可以看出，当我关注文本字段时，会出现边框，当单击 out 时，边框会消失。

我的问题是，当我点击时，我希望文本字段中的数据将存储在数据库中，而不需要提交按钮。

```
<script>
$(document).ready(function(e){

    $('.class1').focusin(function(){
        $(this).attr('readonly',false);
        $(this).css('border','1px black solid');
    })

    $('.class1').focusout(function(){
        $(this).attr('readonly',true);
        $(this).css('border','0px white solid');

    })
} );
</script> 

<div>Ref: <%= text_field_tag(:ref,@ref.to_s,:readonly=>true, :class => "classe1" )%>  </div> 
```

如何将值发送到我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:25:43.807

要更新特定记录，您只需`blur`使用 jquery 为该输入字段或文本框调用函数。使用输入字段的类名或 id 调用 blur 函数。

```
$('#ref').blur(function() {
    update_ref_field();
}); 
```

调用ajax的JS函数：

```
function update_ref_field(){
    var ref_value = $('#ref').val();
    var url = '/controller_name/action_name/?ref='+ref_value;
    $.ajax({
       type: 'put',
       url: url,
       dataType: "jsonp",  
       // You can use this jsonp if your request related to cross domain
       error: function (result, status, xhr){
            alert('result='+result+'::status='+status+'::xhr= '+ xhr);
            alert('Error occurred while updating the record.');           },
       success: function(result, status, xhr){
           alert('result='+result+'::status='+status+'::xhr= '+ xhr);
           alert('Record updated successfully.');

    });
    return false;
} 
```

**更新代码**

```
function update_ref_field(){
  var ref_value = $('#ref').val();
  var url = '/controller_name/action_name/?ref='+ref_value;
  $.ajax({
    type: 'post',
    url: url,
    dataType: 'script',
    error: function(data){
      alert('Error occurred while updating the record.');
    }, 
    success: function(data){
      alert('Record updated successfully.');
    });
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:24:06.653

Sending an ajax request: [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/). Make the "type" a "PUT" if the record exists and you're updating it, and a "POST" if it's a new record. The url to send this to is most likely the name of the controller which I don't think you provided. e.g. "/controller".

Example:

```
$.ajax({
  type: "POST",
  url: "/controller",
  data: {ref: $('.classe1').html().trim()}
}); 
```

If you can't get it working you'll need to provide some more information about the rails code you're working with, I took a few generic guesses.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:31:24.690

这是我的代码：
在视图中：

```
 <script> 
     function update_ref_field(){
     var ref_value = $('#ref1').val();
     var url = '/ModController/update_ref_field/?ref1='+ref_value;
    $.ajax({
        type: "POST",
        url: url,
        //dataType: "jsonp",
        // You can use this jsonp if your request related to cross domain
        error: function (result, status, xhr){
            alert('result='+result+'::status='+status+'::xhr= '+ xhr);
            alert('Error occurred while updating the record.');           },
        success: function(result, status, xhr){
            alert('result='+result+'::status='+status+'::xhr= '+ xhr);
            alert('Record updated successfully.');
        }});
       return false;
       }

        $('#ref1').focusin(function(){
            $(this).attr('readonly',false);
            $(this).css('border','1px black solid');
        })

        $('#ref1').focusout(function(){
            $(this).attr('readonly',true);
            $(this).css('border','0px white solid');
            $javascript:update_ref_field();

    })
} ); 
```

在控制器上：
def update_ref_field()
begin
@projj=Project.find(params[:project_id]) #projet courant
@local_date = Time.new().to_date
@sem = caluculer_semaine(@local_date)
@existe_mom_pour_cet_semaine = Mod.find( :all, :conditions => {:project_id => @projj.id , :semaine => @sem})
#ce cas 对应一个 un update
begin
@existe_mom_pour_cet_semaine.each do |a|
if (params[:ref1]) != "" || (params[:ref1]) != nil
a.update_attributes(:ref => params[:ref1])
end
if a.save
flash[:notice] ="mise a jour de ref "
else
flash[:error] ="mise ajour fr ref non aboutit"
end
end
rescue Exception => e
puts e.message
puts e.backtrace.inspect
end
redirect_to :action=>'reunion'
end
end

当我使用 tag_form 时，我可以正常工作，但我希望数据库上的更改将在后台进行
谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T10:45:57.417

感谢你的帮助。
这个问题的解决方案是使用一个javascript函数来调用控制器中的另一个函数

```
 function loadXMLDoc(id, val, name)
{

    var xmlhttp;
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            //document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
            alert();
        }
    }

            //update_ref_field => methode in the contoller with complete the update in the data     base
            xmlhttp.open("GET","update_ref_field?ref1="+val ,true);
            xmlhttp.send();

} 
```

# java - 如何防止更改 Java 系统属性（在 Java EE 中）？

> ID：15435732
> 
> 赞同：0
> 
> 时间：2013-03-15T15:06:24.647
> 
> 标签：java, jakarta-ee, ejb, code-access-security

我维护的一个应用程序使用第三方商业 EJB 实现。我没有能力更改源代码，但我可以阅读它。

我已经确定 EJB 的源代码正在设置使用的具体实现`javax.xml.parsers.DocumentBuilderFactory`：

```
System.setProperty("javax.xml.parsers.DocumentBuilderFactory", 
    "org.apache.xerces.jaxp.DocumentBuilderFactoryImpl"); 
```

我想防止这种情况——但来自 WAR 文件。

我的耳朵是：

> ```
> EAR
>   application.xml
>   weblogic-application.xml
>   3rd-party-ejb.jar
>   my-web-app.war 
> ```

有一个关于实现我现在正在研究的自定义[java.lang.SecurityManager的](http://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html)[检测 System.setProperty 方法调用问题，但我仍然不明白 WAR 文件如何影响 3rd-party-ejb.jar 行为。](https://stackoverflow.com/questions/4206489/detecting-system-setproperty-method-invocations)

什么是正确的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:45:36.610

看看[这个](https://stackoverflow.com/questions/10710450/how-to-detect-if-a-java-system-property-has-changed)SO 答案。我相信它描述了一个非常简单的解决您的问题的方法。

**更新：为了解决评论。**

因此，如上面的链接中，您实现自己的属性并用它替换系统属性。这是我将如何实现它以防止更改以下内容

```
System.setProperty("javax.xml.parsers.DocumentBuilderFactory", "org.apache.xerces.jaxp.DocumentBuilderFactoryImpl"); 
```

起任何作用：

```
public class MyProperties extends Properties {

    public MyProperties(Properties properties) {
        super(properties);
    }

    @Override
    public Object setProperty(String key, String value) {
        if ("javax.xml.parsers.DocumentBuilderFactory".equals(key) && "org.apache.xerces.jaxp.DocumentBuilderFactoryImpl".equals(value)) {
            return null;
        } else {
            return super.setProperty(key, value);
        }
    }
} 
```

然后只需确保您运行（例如在 servlet 生命周期侦听器中）：

```
MyProperties newProps = new MyProperties(System.getProperties());
System.setProperties(newProps); 
```

在您试图阻止影响的代码有机会运行之前。

# require - Dojo 请求 AMD 模块并回调

> ID：15435736
> 
> 赞同：0
> 
> 时间：2013-03-15T15:06:37.963
> 
> 标签：require, dojo, amd

我只是想知道，这只是一个让我的大脑发痒的一般性问题。Dojo 1.7 及以上版本使用 AMD 模块，这是调用小部件和帮助类的好方法。

使用回调调用类或 AMD 模块的正常方式的问题如下所示：

```
require(['dojo/_base/lang', 'dojox/grid/DataGrid', 'dojo/data/ItemFileWriteStore', 'dojo/dom', 'dojo/domReady!'],
    function(lang, DataGrid, ItemFileWriteStore, dom){ 
```

通过这种方式，我调用 lang、DataGrid 和 ItemFileWriteStore 模块，并在函数中回调以使用这些模块，一些模块没有回调，例如 dojo/domReady!。

那么有区别还是会导致调用模块的顺序出错？或者重要的部分是让它们在 require 和 function 中的顺序相同。但是先调用哪个并不重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T01:03:10.527

我不确定你在问什么。但是函数中的参数应该与您导入的模块名称的顺序/顺序相同（如给定示例中）。

如果模块没有返回对象（如 domReady），建议您将其作为最后一个模块，因为它们中的大多数仍然返回一些东西（如 HTML 文档或函数或其他东西）。

您当然可以将它们添加到您想要的任何位置，但如果您切换`dojo/dom`and `dojo/domReady!`，则意味着该变量`dom`将不再包含其他模块的代码，`dojo/dom`而是包含其他模块（无对象）的代码。这意味着您必须执行以下操作：

```
require(['dojo/_base/lang', 'dojox/grid/DataGrid', 'dojo/data/ItemFileWriteStore', 'dojo/domReady!', 'dojo/dom'],
    function(lang, DataGrid, ItemFileWriteStore, placeholder, dom){ 
```

哪里`placeholder`没有实际用处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:19:45.843

我想你可能误解了一些东西，或者我误解了你在说什么。

该`define()`函数有两个参数：

*   作为依赖项的模块名称数组
*   需要这些依赖项的回调函数

模块或模块名称本身不是回调，回调是您编写的函数，并在加载所有模块时触发。

正如 Demitri M 所说，将不返回值的模块（因为它们执行其他操作）放在回调函数的末尾是有意义的，因为这样可以缩短参数列表。

# c++ - 为什么下标运算符 C++ 经常成对出现？

> ID：15435738
> 
> 赞同：4
> 
> 时间：2013-03-15T15:06:50.140
> 
> 标签：c++, operator-overloading, constants, operator-keyword

[C++ FAQ](http://www.parashift.com/c++-faq/multidim-arrays3.html)正在定义一个模板容器`Matrix`以避免棘手的`new` `delete`代码。教程说下标运算符经常成对出现？为什么会这样？

```
T&       operator() (unsigned i, unsigned j); 
T const& operator() (unsigned i, unsigned j) const; 
```

为什么会这样？

这也称为：常量重载。

常见问题解答提供线索。您还有其他意见吗？

特别是，是否应该`mutate()`遵守某些规则才能安全地仅用于 const 对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T15:23:02.237

简而言之，因为作业有两个方面：左侧和右侧。

非常量版本：`T& operator() (unsigned i, unsigned j);`主要用于赋值的左侧（即，用作赋值的目标）。

const 版本：`T const& operator() (unsigned i, unsigned j) const;`专门用于赋值的右侧。

注意这里的措辞不同：const 版本*只能*用在赋值的右边，而非 const 版本*可以*用在两边。但是，如果您有一个`const`-qualified 对象，则只能调用 const 限定的成员函数，因此在这种情况下根本无法使用它。这正是您（至少通常）想要的——它可以防止修改您说过不应该修改的对象（通过 const 限定它）。

就目前而言，它通常仅用于在*逻辑*状态和*按位*`mutate`状态之间存在差异的对象。一个常见的例子是一个懒惰地做一些（通常是昂贵的）计算的类。为了避免重新计算该值，它会在计算后保存该值：

 **```
class numbers { 
    std::vector<double> values;
    mutable double expensive_value;
    bool valid;
public:
    numbers() : valid(false) {}

    double expensive_computation() const { 
        if (valid) return expensive_value;
        // compute expensive_value here, and set `valid` to true
    }
}; 
```

所以在这里，结果`expensive_computation`完全取决于 中的值`values`。如果您不关心速度，则可以在每次用户调用时重新计算该值`expensive_computation`。在一个 const 对象上重复调用它总是会产生相同的结果——所以调用它一次后，我们假设它可能会被再次调用，为了避免重复执行相同的昂贵计算，我们只需将值保存到`expensive_value`. 然后，如果用户再次请求它，我们只需返回该值。

换句话说，从*逻辑*的角度来看，`const`即使我们修改了`expensive_value`. 对象的可见状态不会改变。我们所做的只是让它更快地完成 const 的事情。

为了使其正常工作，我们还希望`valid`在用户修改`values`. 例如：

```
void numbers::add_value(double new_val) {
   values.push_back(new_val);
   valid = false;
} 
```

在某些情况下，我们可能还需要一个中间级别的有效性——我们可能能够通过（例如）确切地知道哪些数字已被添加到 中，而不是仅仅使用布尔值来说明它是否是当前的，`expensive_value`从而更快地重新计算`values`有效与否。

我可能应该补充一点，C++11 对`const`和`mutable`. 长话短说，在大多数情况下，您需要确保任何是`const`和/或`mutable`也是线程安全的。您可能想观看[Herb Sutter 的视频](http://herbsutter.com/2013/01/01/video-you-dont-know-const-and-mutable/)。然而，我确实觉得有必要补充一点，我认为他的结论`mutable`可能*有点*夸张（但我宁愿你自己观看并决定，而不是相信我的话）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T15:06:50.140

在对象上调用下标运算符，调用`T&`第一个非常量运算符。然后，允许检查和变异操作。

在对象上调用下标运算符，`T const &`调用第二个 const 运算符。然后，允许检查，但不允许变异。

例子在这里

```
void f(MyFredList const& a)  ← the MyFredList is const
{
  // Okay to call methods that DON'T change the Fred at a[3]:
  Fred x = a[3];
  a[3].inspect();

  // Error (fortunately!) if you try to change the Fred at a[3]:
  Fred y;
  a[3] = y;       ← Fortunately(!) the compiler catches this error at compile-time
  a[3].mutate();  ← Fortunately(!) the compiler catches this error at compile-time
} 
```

归功于 C++ 常见问题解答，更多信息请[点击此处](http://www.parashift.com/c++-faq/const-overloading.html)。**

# ios - NSMutableArray 添加或删除

> ID：15435742
> 
> 赞同：2
> 
> 时间：2013-03-15T15:06:51.923
> 
> 标签：ios, objective-c, nsmutablearray, add

在这里，我在第二个 vc 中的一个 vc 中有一个可变数组，其中包含一些值。

我需要更改`self.namesFoodSubCategory`问题中的值是否也会更改第一个 vc 数组中的值。

现在，如果我将其更改为 `self.namesFoodSubCategory = [namesArray copy] ;` 现在，它会很好地复制，但我无法在其中添加或删除元素`self.namesFoodSubCategory`会导致崩溃。

有谁能够帮我？？？？

```
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil andParamArray:(NSMutableArray *)namesArray
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        self.namesFoodSubCategory = namesArray ;

        NSLog(@"In Sec   %@",self.namesFoodSubCategory);

    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T15:10:21.467

该`copy`方法创建对象的不可变副本。为了保持可变性，您需要使用`-mutableCopy`替代或便利构造函数（假设您使用 ARC，因此不需要自动释放等）：

```
self.namesFoodSubCategory = [namesArray mutableCopy]; 
```

或者

```
self.namesFoodSubCategory = [MSMutableArray arrayWithArray:namesArray]; 
```

# java - Java 7 泛型类型推断：返回值与方法参数

> ID：15435747
> 
> 赞同：25
> 
> 时间：2013-03-15T15:07:04.963
> 
> 标签：java, generics, type-inference

为什么编译器能够`String`在函数返回类型的情况下正确推断类型参数。

```
public class Generics {
    private static List<String> function() {
        return new ArrayList<>();
    }
} 
```

但是当要推断的类型是方法参数时它会失败：

```
public class Generics {
    public static void main(String[] args) {
        method(new ArrayList<>());
    }    

    private static void method(List<String> list) {

    }
} 
```

这种情况下的错误是：

```
The method method(List<String>) in the type Generics is not applicable 
for the arguments (ArrayList<Object>) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T15:29:09.830

这是类型推断尚未按预期工作的地方之一。

不幸的是，这种行为是完全有效且符合要求的。

好消息是[Java 8](http://openjdk.java.net/projects/jdk8/)将包括[改进的类型推断 (JEP 101)](http://openjdk.java.net/jeps/101)，所以像这样的情况应该像你期望的那样编译：

> 当这种泛型方法调用的结果被传递给另一个方法时，编译器应该能够推断类型似乎是合理的 [...]。
> 
> 不幸的是，这在 JDK 5/6/7 中是不允许的——程序员唯一可用的选择是使用显式类型参数。

除了直接改进（即您在此处提到的情况）之外，此更改对于能够更有效地使用[Lambdas (JEP 126)](http://openjdk.java.net/jeps/126)也是必要的（即无需输入大量类型信息）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T15:33:41.830

[在 JLS 中推断未解析类型参数](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.8)的部分相当复杂，但我知道第一种情况的菱形出现在它需要进行*赋值转换*的地方，而在第二种情况下，它出现在*方法调用转换*中，即遵循不同的规则。

# linux - 在 64 位 RHEL 上安装 32 位库（glibc）而不使用 yum

> ID：15435751
> 
> 赞同：5
> 
> 时间：2013-03-15T15:07:07.100
> 
> 标签：linux, redhat, rhel

我正在尝试让 32 位应用程序在 64 位 RHEL 6.1 上运行，但该机器无法访问互联网。有什么方法可以在不使用 yum 的情况下在 64 位 RHEL 上安装 32 位 glibc，即只使用 RPM 安装？我从 RHEL 6.1 ISO 中获取了 glibc-*i686.rpm 及其许多依赖项，包括 nss-softokn-freebl*i686.rpm，但如果不忽略依赖项 (rpm --nodeps)，我仍然无法安装它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-13T12:45:48.603

挂载安装 DVD：

```
mkdir -p /mnt/RHEL
mount /dev/cdrom /mnt/RHEL 
```

或者，如果您只有 ISO，则可以使用它：

```
mkdir -p /mnt/RHEL
mount -o loop /path/to/RHEL.iso /mnt/RHEL 
```

现在创建一个使用 DVD 作为存储库的 Yum 存储库：

```
/etc/yum.repos.d/rhel-dvd.repo
[rhel-dvd]
name=Red Hat Enterprise Linux $releasever - $basearch - DVD
baseurl=file:///mnt/RHEL/Server/
enabled=1
gpgcheck=0 
```

您现在应该能够清理 yum 缓存，并安装 32 位 C 库：

```
yum clean all
yum install glibc.i686 
```

您会看到很多类似的指南告诉您安装和运行**createrepo**命令，但您不需要这样做。RHEL 光盘已经是一个存储库，它已经具有定义存储库的**/repodata/repomd.xml文件。**

但是，如果您获取 RHEL 光盘上的 RPM 文件并将它们复制到其他地方并开始添加您自己的包*，那么*您需要 createrepo 来为您创建的新存储库构建元数据。

# c++ - 使用 __declspec(dllexport)

> ID：15435752
> 
> 赞同：1
> 
> 时间：2013-03-15T15:07:08.800
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11, declspec

我正在以 OOP 方式实现我的 .dll 库

我的宏是：

```
#ifndef _SWC_
#define DLLINTERFACE  __declspec(dllexport)
#else
#define DLLINTERFACE __declspec(dllimport) 
```

在我`DLLINTERFACE`使用一些`std`s 将类名放在类名之前后，编译器给了我几个警告，我应该`dll-interface`为每个与 s 一起使用的函数 提供一个警告`std`。我尝试通过添加`DLLINTERFACE`一些功能来解决这个问题，但现在给了我一个错误，因为我已经把它放在了类名上。也许，我可以通过`DLLINTERFACE`用它定义我的所有公共函数来删除警告。但是如何通过只定义类名而不是单个函数来消除警告？

像这样：

```
class DLLINTERFACE Foo
{
 public:
    std::string bar();
}; 
```

但不是这个：

```
class Foo
{
 public:
    std::string DLLINTERFACE bar();
}; 
```

# javascript - 使用javascript从url获取第二个路径元素

> ID：15435757
> 
> 赞同：5
> 
> 时间：2013-03-15T15:07:21.643
> 
> 标签：javascript, regex

如何执行以下操作？

我有以下网址

[http://www.example.com/example/test/search](http://www.example.com/example/test/search)

如何使用 javascript 从 url 获取“测试”？

我想要一个调用 q = getUrlVars() 的函数，当我执行 q[1] 时，它应该给我来自 url 的“测试”（或第二个斜杠后的参数）。

我是 JavaScript 新手。我知道正则表达式是入门的方法，但我不确定如何使用它来获得我需要的东西。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T15:09:22.503

这里不需要正则表达式。这应该可以解决问题：

## 使用当前网址时

```
var path = window.location.pathname.split("/");
// Use path[2] to get 'test' 
```

## 将任何 url 作为字符串使用时：

```
var strUrl = "http://www.example.com/example/test/search";
var path = strUrl.replace(/^https?:\/\//, '').split('/');
// Use path[2] to get 'test' 
```

请注意，这`path`将是一个从零开始的`Array`，因此您会认为 for`path[1]`可以解决问题。但是，在这种情况下，`path[0]`将返回 的第一个结果`.split()`，一个空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:47:12.343

尝试[URI.js](http://medialize.github.com/URI.js/)。特别是，[segment()](http://medialize.github.com/URI.js/docs.html#accessors-segment)方法应该给你你需要的东西。

# python - 使用 TypedChoiceField 的 FormSet 不会每约 2000 个请求强制为 int 一次

> ID：15435760
> 
> 赞同：5
> 
> 时间：2013-03-15T15:07:40.390
> 
> 标签：python, django, django-forms, python-2.6

我正在使用一个包含多个表单的 FormSet，每个表单都有一个数量字段，其定义如下：

```
quantity = TypedChoiceField(coerce=int, required=False) 
```

我想知道是否至少有一个数量 > 0，所以在我的表单集的干净中，我写了这个：

```
def clean(self):
    if sum([form.cleaned_data['quantity'] for form in self.forms]) == 0:
        raise forms.ValidationError(_('No products selected')) 
```

所以，通常这只是工作，并且 form.cleaned_data['quantity'] 是一个 int（由 coerce=int 设置）。但是每隔一段时间（比如每 2000 次对这个表单的请求一次），我得到一个异常告诉我：

```
TypeError: unsupported operand type(s) for +: 'int' and 'str' 
```

在那一行，这意味着 form.cleaned_data['quantity'] 是一个字符串，而 sum() 不喜欢对字符串求和，所以它会抛出一个异常。您可以通过启动 python 控制台并键入以下内容自行测试：

```
>>> sum([u'1', u'2'])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for +: 'int' and 'unicode'
>>> 
```

所以我的问题是，为什么会发生这种情况？还有为什么这种情况很少发生？django 文档告诉我 TypedChoiceField 的强制保证在 clean() 被调用之前完成，所以这不应该发生。

这个错误很难修复，因为它很难重现，所以我希望你们中的一个人遇到过类似的问题。

这是在 python 2.6 和 django 1.3.1 上。

提前致谢！

**编辑** 所以这里是堆栈跟踪：

```
File "****/handlers/products.py" in process
  429\.                if formset.is_valid():
File "/usr/local/lib/python2.6/dist-packages/django/forms/formsets.py" in is_valid
  263\.        err = self.errors
File "/usr/local/lib/python2.6/dist-packages/django/forms/formsets.py" in _get_errors
  241\.            self.full_clean() 
File "/usr/local/lib/python2.6/dist-packages/django/forms/formsets.py" in full_clean
   287\.            self.clean()
File "****/handlers/products.py" in clean
  217\.        if sum([form.cleaned_data['quantity'] for form in self.forms]) == 0: 
```

异常类型：异常值处的 TypeError `/****/url` ：+ 不支持的操作数类型：“int”和“str”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:14:01.890

[根据docs](https://docs.djangoproject.com/en/dev/ref/forms/fields/#typedchoicefield)`empty_value` ， a 的默认值`TypedChoiceField`是空字符串，并且该值不是强制的。

我认为你很可能有时会得到一个空值，而抛出 TypeError 的字符串是空字符串。尝试：

```
quantity = TypedChoiceField(coerce=int, required=False, empty_value=0) 
```

# java - 包 org.apache.thrift 不存在

> ID：15435764
> 
> 赞同：5
> 
> 时间：2013-03-15T15:07:45.020
> 
> 标签：java, jar, import, thrift

我正在尝试编写一个使用 Thrift 的基本 Java 应用程序。我缺少的是一个工作 jar 文件。

我已经从官网下载页面下载了 0.8.0 gz 版本的 thrift，并自己创建了 jar 包（`jar cf thrift-0.8.0.jar src/org`）。我已将新的 jar 文件移动到我的项目目录中。然后，我手动将此 jar 文件添加到项目中 - 我在 NetBeans IDE 中工作。一切似乎都应该工作，但它没有 - 在我想使用节俭库的任何地方都会出现红色错误消息。这是我的一段代码：

```
package com.blogspot.symfonyworld.thrift;

import com.blogspot.symfonyworld.thrift.server.MainService;
import org.apache.thrift.TException;

public class MainServiceHandler implements MainService.Iface {

  @Override
    public int add(int n1, int n2) throws TException {
        return n1 + n2;
    }

    @Override
    public int sub(int n1, int n2) throws TException {
        return n1 + n2;
    }

} 
```

和另一个文件：

```
/**
 * Autogenerated by Thrift Compiler (0.8.0)
 *
 * DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING
 *  @generated
 */
package com.blogspot.symfonyworld.thrift.server;

import org.apache.thrift.scheme.IScheme;
import org.apache.thrift.scheme.SchemeFactory;
import org.apache.thrift.scheme.StandardScheme;

import org.apache.thrift.scheme.TupleScheme;
import org.apache.thrift.protocol.TTupleProtocol;
import java.util.List;
import java.util.ArrayList;
import java.util.Map;
import java.util.HashMap;
import java.util.EnumMap;
import java.util.Set;
import java.util.HashSet;
import java.util.EnumSet;
import java.util.Collections;
import java.util.BitSet;
import java.nio.ByteBuffer;
import java.util.Arrays;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class MainService {

  public interface Iface {

    public int add(int n1, int n2) throws org.apache.thrift.TException;

    public int sub(int n1, int n2) throws org.apache.thrift.TException;

  }

  public interface AsyncIface {

    public void add(int n1, int n2, org.apache.thrift.async.AsyncMethodCallback<AsyncClient.add_call> resultHandler) throws org.apache.thrift.TException;

    public void sub(int n1, int n2, org.apache.thrift.async.AsyncMethodCallback<AsyncClient.sub_call> resultHandler) throws org.apache.thrift.TException;

  } 
```

当我运行构建时，我收到以下错误：

```
ant -f /var/www/laughing-thrift-duck jar
init:
Deleting: /var/www/laughing-thrift-duck/build/built-jar.properties
deps-jar:
Updating property file: /var/www/laughing-thrift-duck/build/built-jar.properties
Compiling 2 source files to /var/www/laughing-thrift-duck/build/classes
/var/www/laughing-thrift-duck/src/com/blogspot/symfonyworld/thrift/MainServiceHandler.java:4: package org.apache.thrift does not exist
import org.apache.thrift.TException;
/var/www/laughing-thrift-duck/src/com/blogspot/symfonyworld/thrift/server/MainService.java:9: package org.apache.thrift.scheme does not exist
import org.apache.thrift.scheme.IScheme;
/var/www/laughing-thrift-duck/src/com/blogspot/symfonyworld/thrift/server/MainService.java:10: package org.apache.thrift.scheme does not exist
import org.apache.thrift.scheme.SchemeFactory;
/var/www/laughing-thrift-duck/src/com/blogspot/symfonyworld/thrift/server/MainService.java:11: package org.apache.thrift.scheme does not exist
import org.apache.thrift.scheme.StandardScheme;
/var/www/laughing-thrift-duck/src/com/blogspot/symfonyworld/thrift/server/MainService.java:13: package org.apache.thrift.scheme does not exist
import org.apache.thrift.scheme.TupleScheme;
/var/www/laughing-thrift-duck/src/com/blogspot/symfonyworld/thrift/server/MainService.java:14: package org.apache.thrift.protocol does not exist
import org.apache.thrift.protocol.TTupleProtocol;
# and many many more... 
```

主要问题是：**包 org.apache.thrift 不存在**- 怎么会？！

有人可以指出我在将自定义 jar 导入我的项目时做错了什么吗？我认为这与节俭无关，而是与一般的进口罐子有关。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T15:18:42.337

> 我已经从官网下载页面下载了 0.8.0 gz 版本的 thrift 并自己创建了 jar 存档（jar cf thrift-0.8.0.jar src/org）

你为什么要创建自己的罐子？为什么你用源文件创建它？jar 库必须至少包含可供使用的字节码类。

你必须让 thrift 自己编译成一个 jar，然后使用它：

*   浏览到`/lib/java`
*   `ant`在终端运行
*   检查构建文件夹，你会看到一个`.jar`
*   使用那个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:19:13.887

When you use the command `jar cf thrift-0.8.0.jar src/org` to create the jar file, the classes for the org package (and under it) are stored in the src/org instead of org, so Java can't find it. Try to use this command instead `jar cf thrift-0.8.0.jar -C src org`, which should produce the correct structure.

You may verify it by running `jar tf thrift-0.8.0.jar` and see the content.

# c# - 搜索/查询 ListView 并将结果打印到新的 ListView

> ID：15435766
> 
> 赞同：0
> 
> 时间：2013-03-15T15:07:51.437
> 
> 标签：c#, linq, listview, search

我想搜索具有四列的现有 ListView，并在全新的 ListView 中打印搜索结果。到目前为止，这是我所拥有的：

```
private void qryBtn_Click(object sender, EventArgs e)
{
    var results = listResx.Items.Cast<ListViewItem>()
      .Where(x => x.Text.Contains(textQuery.Text));

    foreach (var d in results)
    {
        listQuery.Items.Add(d.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:12:59.163

如果您尝试在每个项目的所有四列中进行搜索，那么这样的事情应该是诀窍：

```
var results = listResx.Items.Cast<ListViewItem>()
      .Where(x => x.Subitems.Cast<ListViewItem.ListViewSubItem>()
                  .Any(si => si.Text.Contains(textQuery.Text)
            ); 
```

`results`然后将包含查询文本与任何子项匹配的 ListViewItems。据我记得，子项目的集合也包括项目的文本。

要将它们作为完整列表项插入另一个列表视图中，您必须为结果枚举中的每个项目创建一个新的 ListViewItem，因为您不能同时在两个不同的列表视图中插入相同的 ListViewItem：

```
foreach (var d in results)
{
    ListViewItem lvi = new ListViewItem();
    foreach(ListViewItem.ListViewSubItem si in d.SubItems)
    {
        lvi.SubItems.Add(si.Text);
    }
    listQuery.Items.Add(lvi);
} 
```

# javascript - 如何在Javascript中获取一组固定元素的元素索引

> ID：15435773
> 
> 赞同：0
> 
> 时间：2013-03-15T15:08:10.717
> 
> 标签：javascript, performance, indexing, element

我在容器中有一组固定的元素（比如 30 个）。现在，当单击一个元素时，我想找出它在该容器中的索引。

我知道我能做什么：

1.  在具有各自索引的所有元素上设置点击处理程序，以便在单击它们时他们已经从闭包范围中知道它们的索引
    优点：可能是最快的方法
    缺点：更多事件处理程序->更多对象->更多内存

2.  遍历所有子元素，将每个元素与单击的元素进行比较并计算索引直到达到它
    优点：有效
    缺点：您必须遍历列表并进行比较（较慢）

3.  （在 SO 上提出）使用 previousSibling 属性返回到 null 计算沿途的每个孩子以确定您的索引
    优点：工作，可能比选项 2 好一点，因为您直接从孩子开始
    缺点：仍在遍历元素
4.  （我想到的解决方案）由于有一个固定的集合，我们可以在每个元素上设置“tabindex”属性（在html中或通过JS），当点击元素时，我们只需检查元素的tabindex属性
    优点：应该只是与选项 1 一样
    快

那么就性能（速度和内存）而言，以上哪一个是最好的方法，或者有更好的方法吗？

提前非常感谢，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:11:41.597

选项 5，比上述所有方法都好 - 将索引作为`data-index`属性存储在节点上，并在事件处理程序中检索它。

您可以在容器上注册它，然后使用“事件冒泡”，而不是在每个节点上注册事件处理程序。由于子节点未处理 click 事件，它会通过 DOM 冒泡到节点的父节点，您可以在其中`event.target`找到最初接收事件的节点。

```
var container = ... // your container;

container.addEventListener('click', function(ev) {
    var target = ev.target;    // which child was actually clicked
    var index = target.getAttribute('data-index');
    ...
}, false); 
```

在较新的浏览器上，您可以使用`target.dataset.index`而不是`getAttribute`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T06:33:10.580

您可以将[sourceIndex](http://msdn.microsoft.com/en-us/library/ie/ms534635%28v=vs.85%29.aspx)用于所有 IE 浏览器，并将[previousElementSibling](https://developer.mozilla.org/en-US/docs/Web/API/ChildNode.previousElementSibling)用于其他浏览器。

使用 sourceIndex 是最简单和最快的，但仅限 IE。

如果可以更改 DOM 节点，则设置属性 data-index 不是一个好的解决方案。

previousElementSibling 和 previousSibling 不是很慢。

```
function getChildrenIndex(ele){
    //IE is simplest and fastest
    if(ele.sourceIndex){
        return ele.sourceIndex - ele.parentNode.sourceIndex - 1;
    }
    //other browsers
    var i=0;
    while(ele = ele.previousElementSibling){
        i++;
    }
    return i;
} 
```

# asp.net - response.transmitfile 改变文件名

> ID：15435789
> 
> 赞同：1
> 
> 时间：2013-03-15T15:08:55.557
> 
> 标签：asp.net, vb.net

我有以下代码

```
 Protected Sub Button1_Click(sender As Object, e As System.EventArgs) Handles submit1.Click

    Dim filename As String = "C:\pdfs\" + TextBox1.Text
    Response.TransmitFile(filename)

End Sub 
```

Textbox1.text 是包含扩展名的 pdf 的名称。这工作正常，除了 pdf 的文件名被更改为我调用它的网页的名称。c:\pdfs 中的 pdf 名称保持不变。

我可以阻止它更改名称吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:37:17.793

将 Response.TransmitFile 更改为

```
Dim fileInfo As FileInfo = new FileInfo("C:\pdfs\" + TextBox1.Text)

 Response.ContentType = "application/octet-stream";
 Response.AddHeader("Content-Disposition", String.Format("attachment;filename=\"{0}\"", TextBox1.Text));
 Response.AddHeader("Content-Length", fileInfo.Length.ToString());
 Response.WriteFile(fileInfo.FullName);
 Response.End(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-10T21:28:55.660

如果您愿意，您可以继续使用 Transferfile，但以这种方式。

```
FileInfo file = new FileInfo(filePath); 
```

//LINE1：将“**文件名**”和附件添加到标题和名称中，这将强制显示打开/取消/保存对话框

```
response.AddHeader("Content-Disposition", "attachment; filename=" + fileName); 
```

//将文件大小添加到响应头中

```
response.AddHeader("Content-Length", file.Length.ToString()); 
```

//设置内容类型

```
response.ContentType = file.Extension.ToLower(); 
```

//将文件写入响应（TransmitFile 适用于 ASP.NET 2.0。在 ASP.NET 1.1 中，您必须改用 WriteFile）

```
response.TransmitFile(file.FullName); 
```

# javascript - window.open 总是在 iPad 版 Mobile Safari 中打开新标签页

> ID：15435791
> 
> 赞同：1
> 
> 时间：2013-03-15T15:09:01.437
> 
> 标签：javascript, safari, mobile-safari, window.open

我的公司正在使用 Karmasoft 的 UltimateEditor 来支持 textarea 字段中的富文本以及拼写检查的能力。

我们遇到的一个问题是，在 iPad 版 Safari 上，拼写检查器在新选项卡中打开，而不是在当前窗口顶部的新窗口中打开。

我尝试查看 Safari 设置，看看是否可以找到“在选项卡中打开页面而不是窗口”设置，该设置存在于 Windows 版 Safari 中，但我在 iPad 上找不到类似的 Safari 设置。

我在[http://apple.stackexchange.com](http://apple.stackexchange.com)上问过，基本的回答是这就是它在 iPad 中的工作方式，因为“iOS 的 Safari 中没有窗口的概念，所以你只需要一个新标签”

有没有其他人遇到过这个问题，他们有没有找到解决方法？UltimateEditor 插件用于`window.open()`打开拼写检查窗口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:16:16.857

这就是移动 Safari 的工作原理。您无法像在非移动环境中那样打开“迷你窗口”。

您可以考虑做的是覆盖该`window.open`函数以打开一个带有 iframe 的 div。我不知道这将如何传播并影响编辑器。如果这样更容易，您还可以选择尝试覆盖编辑器直接调出拼写检查器的方法。我已经采取了两条路线，并且根据组件的不同，每条路径都可能比另一条更容易。这实际上取决于您正在编辑的组件。

有关覆盖 window.open 的示例，请参见此 SO 线程：[如何覆盖 window.open 功能？](https://stackoverflow.com/questions/9172505/how-to-override-the-window-open-functionality)

我意识到这不是您可能正在寻找的直截了当的答案，但是在我认为这将是您必须采取的道路之前已经这样做了。直接覆盖`window.open`或开始修改编辑器对象。或者选项三，找到另一个编辑器。

# jsf-2 - 如何将 p:dataGrid 的最后一页设置为默认显示页面

> ID：15435793
> 
> 赞同：0
> 
> 时间：2013-03-15T15:09:12.140
> 
> 标签：jsf-2, primefaces

我有一个 primefaces`p:dataGrid`组件，我想将最后一页设置为要显示的默认页面（不是第一页）。如何才能做到这一点 ？

我正在尝试`p:dataGrid`在单击*上一个*和*下一个*自定义按钮时动态生成组件。当我单击上一个时，我想转到数据网格的最后一页，而不是第一个。

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:25:14.050

您需要在支持 bean 中检索组件并手动设置要显示的第一行（您必须实际计算）。根据第一行 Primefaces 计算将显示的页面。

首先将`preRenderView`事件监听器添加到您的页面：

```
<f:metadata>
  <f:event listener="#{myBean.initDatagrid}" type="preRenderView"/>
</f:metadata> 
```

并在支持bean中执行逻辑：

```
public void initDatagrid() {
  FacesContext fc = FacesContext.getCurrentInstance();
  if (!fc.isPostback()) {
    DataGrid dg = (DataGrid) fc.getViewRoot().findComponent("dataGrid_id");
    int firstRow = initFirstRow(); // set firstRow to first row on last page that should be displayed
    dg.setFirst(firstRow);
  }
} 
```

# javascript - 单击带有复选框结果的表单转移到另一个 PHP 页面

> ID：15435794
> 
> 赞同：0
> 
> 时间：2013-03-15T15:09:15.197
> 
> 标签：javascript, php, jquery, html-table, comparison

我在一个页面上有一组复选框，并且 value="compare" 的提交按钮不在表单中。我已经为表单之外的按钮比较编写了一个 jQuery。我正在并排比较一组表格。我的代码在同一个页面中运行良好。我不知道如何在另一个页面中显示结果。任何人请帮助我。

```
<?php
require('db.php');

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Comparision</title>
</head>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
<script type="text/javascript"> 
$(document).ready(function(){
    $("#compare_id").click( function(){
$("input:checkbox:not(:checked)").each(function() {
    var column = "table ." + $(this).attr("name");
    $(column).hide();
});
    });
});
$(document).ready(function(){
    $("#compare_id").click( function(){
$("input:checkbox:(:checked)").each(function(){
    var column = "table ." + $(this).attr("name");
    $(column).toggle();
});
    });
});

</script>
</head>
<body>
<input name="compare" id="compare_id" type="button" value="Compare"  />

<form  action="test.php"  method="post" name="printers_comparision">
  <p>
    <label>
      <input type="checkbox" name="p1" value="Printer1" id="CheckboxGroup1_0" />
      Printer1</label>

    <label>
      <input type="checkbox" name="p2" value="Printer2" id="CheckboxGroup1_1" />
      Printer2</label>

    <label>
      <input type="checkbox" name="p3" value="Printer3" id="CheckboxGroup1_2" />
      Printer3</label>

    <label>
      <input type="checkbox" name="p4" value="Pritner4" id="CheckboxGroup1_3" />
      Printer4</label>

    <label>

</form>
<table width="1023" border="1">
  <tr>
    <td width="193"></td>
    <td class="p1" width="113"><img src="images/im.png"/></td>
    <td class="p2" width="67"><img  src="images/im.png"/></td>
    <td class="p3" width="67"><img  src="images/im.png"/></td>
    <td class="p4" width="67"><img  src="images/im.png"/></td>
</tr>
<tr>
  <td>Title</td>
    <td class="p1" >Printer1</td>
    <td class="p2" >Printer2</td>
    <td class="p3" >Printer3</td>
    <td class="p4" >Printer4</td>
</tr>
<tr>
    <td>Manufacturer</td>
    <td class="p1" ><?php $query=mysql_query('select Manufacturer from printers where printers_id="1";');
while($row=mysql_fetch_array($query)) echo $row['Manufacturer'] ?></td>
    <td class="p2" ><?php $query=mysql_query('select Manufacturer from printers where printers_id="2";');
while($row=mysql_fetch_array($query)) echo $row['Manufacturer'] ?></td>
    <td class="p3" ><?php $query=mysql_query('select Manufacturer from printers where printers_id="3";');
while($row=mysql_fetch_array($query)) echo $row['Manufacturer'] ?></td>
    <td class="p4" ><?php $query=mysql_query('select Manufacturer from printers where printers_id="4";');
while($row=mysql_fetch_array($query)) echo $row['Manufacturer'] ?></td>
</tr>
</body>
</table>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:12:09.877

如果需要跨页面显示数据，您可以尝试使用`SESSION`变量或设置`COOKIE`

# javascript - Chrome 扩展 - 修改消息事件的弹出页面

> ID：15435795
> 
> 赞同：4
> 
> 时间：2013-03-15T15:09:18.870
> 
> 标签：javascript, google-chrome-extension

嗨，我有带有内容脚本的 chrome 扩展，可以将消息事件发送到后台页面我想修改消息事件上的弹出背景页面。背景页面最初是空白的

我试过了：

```
chrome.extension.onMessage.addListener(function (request, sender, sendResponse) {
   console.log('message received');
   chrome.extension.getBackgroundPage().document.innerHTML = 'hello world';
} 
```

但是当我点击扩展图标时它仍然是空白的。你能帮我吗？我可以在控制台中看到，该消息已收到。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T16:14:09.640

弹出窗口虽然是扩展页面，但不是背景页面。只有在打开时才能访问。因此，根据其他信息更改弹出页面的最佳方式是从弹出窗口本身启动消息。我认为您正在使用内容脚本在页面上获取某种信息，然后根据该信息更改弹出窗口。您可以准备数据并`onMessage`在内容脚本本身中有一个侦听器，或者您可以将信息传递到后台页面并从弹出窗口中请求它。第一个例子是：

**内容脚本**

```
...
//assume that you already have the info you want stored in 'info'

chrome.runtime.onMessage.addListener(function(message,sender,sendResponse){
  sendResponse(info);
}); 
```

**弹出窗口**

```
chrome.tabs.query({'active': true,'currentWindow':true},function(tab){
  chrome.tabs.sendMessage(tab[0].id,"stuff", function(response){
    //assuming that info was html markup then you could do
    document.body.innerhtml = response;
    //I personally wouldn't do it like this but you get the idea
  });
}); 
```

正如这里所要求的，它使用背景页面作为中介：

**内容脚本**

```
// same assumption that info is already defined as the info you want
chrome.runtime.sendMessage({'method':'setInfo','info':info}); 
```

**背景页面**

```
var info;
chrome.runtime.onMessage(function(message,sender,sendResponse){
  // When we get a message from the content script
  if(message.method == 'setInfo')
    info = message.info;
  // When we get a message from the popup
  else if(message.method == 'getInfo')
    sendResponse(info);
}); 
```

**弹出窗口**

```
chrome.runtime.sendMessage({'method':'getInfo'},function(response){
  //response is now the info collected by the content script.
  console.log(response);
}); 
```

当然，您可以以比简单的全局变量更好的方式将信息存储在后台页面中。一种好方法是使用[`storage API`](http://developer.chrome.com/extensions/storage.html).

# jquery - 更改 TD 文本后，jQuery Datatable 不更新搜索

> ID：15435804
> 
> 赞同：3
> 
> 时间：2013-03-15T15:10:06.560
> 
> 标签：jquery, search, datatables, jquery-datatables

在我的数据表中，我有一个隐藏列包含最近行中数据的当前状态的名称，但是当按下输入复选框时，通过这种方式更改该隐藏列的文本：

```
$("#rBuscarPerfil").on('click','input[type="checkbox"]',function() {
    if($(this).is(':checked')) {
        $(this).closest('tr').find('td:last').html("Activo");
    } else {
        $(this).closest('tr').find('td:last').html("Desactivado");
    }
........
} 
```

并且当按下顶部的按钮时，例如：

活动的，在 dataTable 的输入搜索中放置了文本“Activo”，并且表显示仅结果在每行的最后一个 td 中包含“Activo”字样。

Inactivo，在 dataTable 的输入搜索中放置文本并仅显示结果，在每行的最后一个 td 中包含“Desactivado”字样。

问题是这样的：搜索仅在打开页面或刷新浏览器时有效，但如果我选中或取消选中每一行中的任何复选框，则最后一行中的文本最后一行中的文本会正确更改。但似乎该表处于当前状态并且不会更新其属性，并且搜索不会显示具有这些更改的结果。

![在此处输入图像描述](../Images/71abbc5efb3f19aa906d1ce714c1d202.png)

**html代码表**

```
<table cellspacing="1" id="rBuscarPerfil" class="tableResultsSearch" name="rBuscarPerfil">
<thead>
    <tr>
        <th>NOMBRE</th>
        <th>DESCRIPCIÓN</th>
        <th>ACCIÓN</th>
        <th>STATUS</th>
        <th style="display:none;">STATUS2</th>
    </tr>
</thead>
<tbody>
</tbody>
</table> 
```

**js加载表格内容**

```
if(response.success == "success") {
if(area == "perfil") {
    $('#rBuscarPerfil tbody tr').remove();
    $.each(response, function (index,record){
        if(valNumber(index)) {
            var row = $("<tr class='"+record.IdPerfil+"'/>");
            $("<td nombre='"+record.NomPerfil+"'/>").text(record.NomPerfil).appendTo(row);
            $("<td />").text(record.DesPerfil).appendTo(row);
            $("<td />").html("<img src='media/icons/edit_item.png' class='bModifyProfile' cve='"+record.DesPerfil+"' alt='Editar' title='Editar'></img><img src='media/icons/delete_item.png' class='bDeleteProfile' cve='"+record.IdPerfil+"' alt='Eliminar' title='Eliminar'></img>").appendTo(row);

           if (record.EdoPerfil == 1) {
                $("<td />").html("<input type='checkbox' checked/>").appendTo(row);
                row.css("backgroundColor","#b0f2b1");
            } else {
                $("<td />").html("<input type='checkbox' />").appendTo(row);
                row.css("backgroundColor","#ffddec");
            }

            $("<td style='display:none;' />").text(record.nomStatus).appendTo(row);
            row.appendTo("#rBuscarPerfil tbody");
        }
    });
}
}

var oTable = $('#rBuscarPerfil').dataTable({
    "bJQueryUI": true,
    "bRetrieve" : true,
    "bDestroy" : true,
    "aaSorting": [[ 0, "desc" ]],
    "sPaginationType" : "full_numbers"
});

oTable.fnDraw(); 
```

我希望我已经解释过了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-14T20:36:50.193

Well I had the same problem as you and I fixed it by using the "cell" API object. Basically you have to make the changes with the API.

If you use the "oldschool" DataTable constructor you have to use `dataTable().api()` , but if you're using the new constructor, it becomes implicitly `DataTable()` with all the API

```
// 1\. Get the referenced table with its API 
   var tableAPI = $("#rBuscarPerfil").dataTable().api();

// 2\. Get the row nodes, because you have to apply the changes to the plugin data
   var nodes    = tableAPI.rows().nodes();

// 3\. Let's do the magic!
   $('input[type="checkbox"]', nodes).on('click','input[type="checkbox"]', function () 
   {
     // Let's Store the reference
        var checkBox = this;

     // Could you convert it to a valid DataTable cell, please?
        var cell     = tableAPI.cell( $(checkBox, nodes).closest("tr").find("td:last") );
     // Thanks!

     // Finally change the sweet and tasty data
        cell.data( 
             $(checkBox).is(":checked") ? "Activo" : "Desactivado" 
        ).draw(); // Don't forget to call this beauty
    }); 
```

PS. Is my first answer so I hope it helped you.

**UPDATED** Well I realized about the `draw()` call at the end -- *it refresh the data* --, but also draws the data from the begining; so if you are in other page, after you make the change with the checboxes it will return you to the first page in the DataTable.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-19T13:55:06.070

我的例子：

```
<td id="H105" class="locker-bg-selected-td spacer" title="118242"><a class="lnkLocker locker-bg-selected-a cls0" href="javascript:$(`#modalLockStudent`).modal(`show`);$(`#`+$(`#H105`).find(`.span-coverScreen`).text()).fadeOut(5000);void(0);">H105</a><span class="span-student-name" style="display:none">My student 1/span><span id="spanH105" class="span-student-id" style="display:none">0101010</span><span class="span-ada" style="display:none"></span><span class="span-broken" style="display:none"></span><span class="span-reserved" style="display:none"></span><span class="span-serial" style="display:none">A1A1A1</span><span class="span-combo" style="display:none">18-02-32</span><span class="span-coverScreen" style="display:none">coverScreen</span></td>

<script>
        function updateDataTablesSearch(locker, studentId, studentName, coverScreen) {
            if (locker != null && locker != '') {                
                var tableAPI = $("#tbAD1").dataTable().api();
                var cell = tableAPI.cell('#' + locker);

                $(cell.node()).attr('title', studentId);
                $(cell.node()).find('.span-student-id').text(studentId);
                $(cell.node()).find('.span-student-name').text(studentName);
                $(cell.node()).find('.span-coverScreen').text(coverScreen);

                cell.data( 
                    cell.node().innerHTML
                );
                cell.draw();            
            }
        }
</script> 
```

# python - 什么是 PEP8 的 E128：为视觉缩进而缩进不足的续行？

> ID：15435811
> 
> 赞同：338
> 
> 时间：2013-03-15T15:10:15.063
> 
> 标签：python, sublimetext2, pep8

刚刚使用 Sublime Text（使用 Sublime Linter）打开了一个文件，并注意到我以前从未见过的 PEP8 格式错误。正文如下：

```
urlpatterns = patterns('',
    url(r'^$', listing, name='investment-listing'),
) 
```

它正在标记第二个参数，即开始的行`url(...)`

我正要在 ST2 中禁用此检查，但***我想***在忽略它之前知道我做错了什么。你永远不知道，如果这看起来很重要，我什至可能会改变我的方式:)

* * *

## 回答 #1

> 赞同：528
> 
> 时间：2013-03-15T15:11:37.030

[如果你在第一行放了任何东西， PEP-8 建议](http://www.python.org/dev/peps/pep-0008/#indentation)你将行缩进到左括号，所以它应该缩进到左括号：

```
urlpatterns = patterns('',
                       url(r'^$', listing, name='investment-listing')) 
```

或者不在起跑线上放置任何参数，然后缩进到统一的级别：

```
urlpatterns = patterns(
    '',
    url(r'^$', listing, name='investment-listing'),
)

urlpatterns = patterns(
    '', url(r'^$', listing, name='investment-listing')) 
```

我建议通读 PEP-8 - 你可以浏览很多内容，而且它很容易理解，不像一些技术性更强的 PEP。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-11-05T08:14:20.853

这也适用于这样的语句（由 PyCharm 自动格式化）：

```
 return combine_sample_generators(sample_generators['train']), \
           combine_sample_generators(sample_generators['dev']), \
           combine_sample_generators(sample_generators['test']) 
```

这将给出相同的样式警告。为了摆脱它，我不得不将其重写为：

```
 return \
        combine_sample_generators(sample_generators['train']), \
        combine_sample_generators(sample_generators['dev']), \
        combine_sample_generators(sample_generators['test']) 
```

# haskell - Haskell TransformListComp 扩展

> ID：15435814
> 
> 赞同：3
> 
> 时间：2013-03-15T15:10:21.503
> 
> 标签：haskell, language-extension

我阅读[了有关 haskell 语言扩展的指南](https://www.fpcomplete.com/user/PthariensFlame/guide-to-ghc-extensions/list-comprehension-extensions)，并且对 TransformListComp 的解释感到有些困惑。我试图在没有糖的情况下重写所有 TransformListComp 表达式，但我不确定我是否正确。

另外我认为指南中有一个错误：“then group using clauses”的示例是不可能的，因为“（groupBy（==））”的类型不正确（“Eq a”不能使用）

```
[foo |  x1 <- xs1,
        x2 <- xs2,
        ...
        xi <- xsi,
        then f,
        xj <- xsj,
        ...
        xn <- xni
    ]

==
[foo |  f x1 <- xs1,
        f x2 <- xs2,
        ...
        f xi <- xsi,
        xj <- xsj,
        ...
        xn <- xni
    ]

-------------------

[foo |  x1 <- xs1,
        x2 <- xs2,
        ...
        xi <- xsi,
        then f by exp,
        xj <- xsj,
        ...
        xn <- xni
    ]

==

f (\(x1,x2,...,xi) -> exp) [(x1,x2,...,xi) | 
        x1 <- xs1,
        x2 <- xs2,
        ...
        xi <- xsi]

>>=(\(x1,x2,...,xi) -> 
    [foo |  
        xj <- xsj,
        ...
        xn <- xni
    ])

-------------------

[foo |  x1 <- xs1,
        x2 <- xs2,
        ...
        xi <- xsi,
        then group using f,
        xj <- xsj,
        ...
        xn <- xni
    ]

==

map unzipI (f [(x1,x2,...,xi) | 
        x1 <- xs1,
        x2 <- xs2,
        ...
        xi <- xsi])

>>=(\(xs1,xs2,...,xsi) -> 
    [foo |
        x1 <- xs1,
        x2 <- xs2,
        ...
        xi <- xsi,
        xj <- xsj,
        ...
        xn <- xni
    ])

unzipI :: [(t1,t2,...tn)] -> ([t1],[t2]..,[tn])

-------------------

[foo |  x1 <- xs1,
        x2 <- xs2,
        ...
        xi <- xsi,
        then group by exp using f,
        xj <- xsj,
        ...
        xn <- xni
    ]

==

 map unzipI (f (\(x1,x2,...,xi) -> exp) [(x1,x2,...,xi) | 
        x1 <- xs1,
        x2 <- xs2,
        ...
        xi <- xsi])

>>=(\(xs1,xs2,...,xsi) -> 
    [foo |
        x1 <- xs1,
        x2 <- xs2,
        ...
        xi <- xsi,
        xj <- xsj,
        ...
        xn <- xni
    ])

unzipI :: [(t1,t2,...tn)] -> ([t1],[t2]..,[tn]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-27T08:37:15.980

你可以重写

```
[ foo | x1 <- xs1
      , x2 <- xs2
      , then f
      , x3 <- xs3 ] 
```

更正确地为

```
[ foo | (x1, x2) <- f [ (x1, x2) | x1 <- xs1
                                 , x2 <- xs2 ]
      , x3 <- xs3 ] 
```

与此同时，该`groupBy`错误似乎已得到修复，文章的示例有效。

这个扩展的另一个有用的来源是在这个[博客文章](https://ocharles.org.uk/blog/guest-posts/2014-12-07-list-comprehensions.html)中，也可以看到原文章[综合理解](https://www.microsoft.com/en-us/research/publication/comprehensive-comprehensions-comprehensions-with-order-by-and-group-by/)。

# c++ - `istream::get` 和 `operator>>(istream&, char&)` 之间的区别

> ID：15435818
> 
> 赞同：-4
> 
> 时间：2013-03-15T15:10:32.147
> 
> 标签：c++, data-structures

`istream::get`使用和 和有什么区别`operator>>(istream&, char&)`：

```
char ch;    
cin.get(ch);
cin>>ch; 
```

您能否解释**块 1**无效而**块 2**有效的可能原因

```
cin.get().get();//Error **block 1**
char ch;
cin.get(ch).get(ch);//Doesn't gives an error  **block 2** 
```

我的猜测是：

块 1 等效于`cin>> >>;`块 2`cin>>ch>>ch;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:15:26.203

`istream::get(char c)`返回 an `istream&`，而另一个无参数版本返回 int。

因此，在第二个版本中，您调用完全合法`.get(ch)`的 an `istream&`，而在第一个版本中，您尝试调用**不合法**的 int 的方法 get 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:15:57.763

**>>**被称为**提取运算符**，例如，当您希望将输入存储在某个变量中时可以使用它。详情请参考此[链接](http://www.cplusplus.com/reference/istream/istream/operator%3E%3E/)。

当你使用**.** ，这意味着你要访问一个类对象的方法。

您的第一个块不正确，因为**cin.get()**返回**int**类型，它没有与之关联的方法**get()**。其中 cin,get(ch) 返回**istream&**类型的值。

# actionscript-3 - 从 swf 中列出本地文件夹的内容

> ID：15435820
> 
> 赞同：0
> 
> 时间：2013-03-15T15:10:37.770
> 
> 标签：actionscript-3, flash

我已成功从 as3 中的本地计算机读取文件，我想知道是否可以以某种方式列出文件夹的内容。swf 将从浏览器运行并仅访问本地文件。没有服务器，没有外界联系。这就是我访问和显示本地文件的方式。

```
var loader:URLLoader = new URLLoader();
loader.addEventListener(Event.COMPLETE, useData);
loader.load(new URLRequest("abc.txt"));

function useData(event:Event):void {
  var data:String = event.target.data.toString();
   myTextField.text = data;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:34:15.523

您可以向用户展示一个标准的操作系统窗口来打开一个他们可以从他们的文件系统中选择的文件。

来自手册：[FileReference.browse](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#browse%28%29)：

> 显示一个文件浏览对话框，让用户选择要上传的文件。该对话框是用户操作系统的本机。用户可以在本地计算机上或从其他系统中选择文件，例如，通过 Windows 上的 UNC 路径。

因此，即使您不能自己列出目录中的文件，也可以提示用户为您选择文件。

# android - Android中不同选项卡中的相同片段

> ID：15435821
> 
> 赞同：1
> 
> 时间：2013-03-15T15:10:42.827
> 
> 标签：android, fragmentpageradapter

我有一个 PagerFragmentAdapter 有两个选项卡，但只有一个片段 PartOne() ：

```
@Override
    public Fragment getItem(int arg0) {
        Bundle data = new Bundle();
        switch(arg0){
            case 0:
                PartOne oneFragment = new PartOne();                
                data.putInt("current_page", arg0+1);
                oneFragment.setArguments(data);
                return oneFragment;
            case 1:
                PartOne twoFragment = new PartOne();
                data.putInt("current_page", arg0+1);
                twoFragment.setArguments(data);
                return twoFragment; 
        }
        return null;
    } 
```

当 PartOne() 加载时，我检索

```
partChosen = getArguments().getInt("current_page"); 
```

我用的

```
if (partChosen == 1) { // Code } 
```

如所描述的那样使用，片段的两个实例以相同的方式运行，给出相同的结果（就像 partChosen == 2 即使它不是）。但是，当我在案例 1 中将 Fragment PartOne() 替换为 PartTwo()* 时，它们会按照我需要的方式行事。

*PartTwo() 的代码与 PartOne() 完全相同，只是名称不同。

请问，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:34:36.570

除了重复之外，您的代码还可以。

编写 getItem() 的更好方法是：

```
@Override
public Fragment getItem(int position) {
    Bundle data = new Bundle();
    PartOne oneFragment = new PartOne();                
    data.putInt("current_page", position + 1);
    oneFragment.setArguments(data);
    return oneFragment;

} 
```

我能想到的唯一问题是你声明为`partChosen`静态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T23:48:38.133

我遇到了同样的问题并解决了：

```
@Override
    public Fragment getItem(int arg0) {

        switch(arg0){
            case 0:
                Bundle data = new Bundle();
                PartOne oneFragment = new PartOne();                
                data.putInt("current_page", arg0+1);
                oneFragment.setArguments(data);
                return oneFragment;
            case 1:
                Bundle data = new Bundle();
                PartOne twoFragment = new PartOne();
                data.putInt("current_page", arg0+1);
                twoFragment.setArguments(data);
                return twoFragment; 
        }
        return null;
    } 
```

并在片段的 onCreateView 方法中获取参数：

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
View view = inflater.inflate(R.layout.fragment_monday, container, false);
        TextView textView = (TextView) view.findViewById(R.id.textview1);
        textView.setText(getArguments().getInt("current_page"););

        return view;
    } 
```

# perl - Perl 脚本系列。BASH、批处理、外壳？

> ID：15435823
> 
> 赞同：2
> 
> 时间：2013-03-15T15:10:43.687
> 
> 标签：perl, bash, shell, batch-file

我有一系列 perl 脚本，我想在 unix 系统上一个接一个地运行它们。这是什么类型的文件/我可以在文档中引用它吗？BASH、BATCH、Shell 脚本文件？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:21:05.750

只需将用于手动运行它们的命令放在一个文件中（例如，`perlScripts.sh`）：

```
#!/bin/sh

perl script1.pl
perl script2.pl
perl script3.pl 
```

然后从命令行：

```
$ sh perlScripts.sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:25:27.193

Consider using Perl itself to run all of the scripts. If the scripts don't take command line arguments, you can simply use:

```
do 'script1.pl';
do 'script2.pl'; 
```

etc.

[`do 'file_name'` basically copies the file's code into the current script and executes it](http://perldoc.perl.org/functions/do.html). It gives each file its own scope, however, so variables won't clash.

This approach is more efficient, because it starts only one instance of the Perl interpreter. It will also avoid repeated loading of modules.

If you do need to pass arguments or capture the output, you can still do it in a Perl file with backquotes or `system`:

```
my $output = `script3.pl file1.txt`; #If the output is needed.

system("script3.pl","file1.txt");    #If the output is not needed. 
```

This is similar to using a shell script. However, it is cross-platform compatible. It means your scripts only rely on Perl being present, and no other external programs. And it allows you to easily add functionality to the calling script.

# dynamics-crm-2011 - 如何使用 CRM SDK 删除解决方案？

> ID：15435824
> 
> 赞同：2
> 
> 时间：2013-03-15T15:10:45.327
> 
> 标签：dynamics-crm-2011, dynamics-crm

抱歉，如果这非常明显，但我找不到有关如何通过 SDK 从组织中删除解决方案的信息。

我已经使用 ImportSolutionRequest 对象成功完成了导入，但找不到删除解决方案的等效项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:32:05.930

MS在MSDN上有一个指南[here](http://msdn.microsoft.com/en-us/library/gg509050.aspx)

从那个链接

```
using (_serviceProxy = ServerConnection.GetOrganizationProxy(serverConfig))
{
    // This statement is required to enable early-bound type support.
    _serviceProxy.EnableProxyTypes();

    // Delete a solution
    QueryExpression queryImportedSolution = new QueryExpression
    {
        EntityName = Solution.EntityLogicalName,
        ColumnSet = new ColumnSet(new string[] { "solutionid", "friendlyname" }),
        Criteria = new FilterExpression()
    };
    queryImportedSolution.Criteria.AddCondition("uniquename", ConditionOperator.Equal, ImportedSolutionName);
    Solution ImportedSolution = (Solution)_serviceProxy.RetrieveMultiple(queryImportedSolution).Entities[0];
    _serviceProxy.Delete(Solution.EntityLogicalName, (Guid)ImportedSolution.SolutionId);
} 
```

# javascript - 将鼠标悬停在 jquery 上时将 Div 展开到其他人之上

> ID：15435827
> 
> 赞同：5
> 
> 时间：2013-03-15T15:10:55.350
> 
> 标签：javascript, jquery, css

我实际上是在尝试在表格中构建产品列表。我已经有了从 db 获取数据并放置在页面中的 php 代码，但我被 jquery 和 javascript 困住了，我就是这样的菜鸟。我一直在阅读一些文档，然后使用了这个脚本：

javascript

```
$(window).load(function(){
$('.principale').hover(function() {
    $(this).animate({
        width: 215, height: 350, margin: 0,
    }, 'fast');
/*  $(this).animate().css('box-shadow', '0 0 10px #44f')*/
    $(this).animate().css('box-shadow', '0 0 5px #000')

    }, function() {
        $(this).animate().css('box-shadow', 'none')
        $(this).animate({
            width: 210, height: 240, margin: 0,
        }, 'fast');
    });
}); 
```

css

```
.tabellainizio {
    margin-top:100px;
}
.bordini {
    border: 1px #DDD solid;
}
.principale {
    height: 240px;
    width: 210px;
    overflow: hidden;
}
.principale .contenitore {
    height: 240px;
    width: 210px;
    float: left;
    display: block;
}
.immagine {
    border: 1px solid maroon;
    text-align: center;
    margin: 15px;
    height: 168px;
    width: 168px;
    position:relative;
}
.content {
    display: none;
margin: 15px;
}
.contenitore:hover {
    width: 215px;
    height: 350px;
    margin: 0px;
    border: 1px solid black;
}
.contenitore:hover .content {
    display: block;
}
.contenitore:hover .immagine {
    position:relative;
} 
```

你可以在这里看到一个演示：http: [//jsfiddle.net/fozzo/EWJGJ/](http://jsfiddle.net/fozzo/EWJGJ/)

但这并不是我真正需要的。当一个 div 扩展时，它应该从中心扩展到其他应该保持在其位置的其他人。就我阅读工作示例而言，我认为这涉及在 css 中使用 z-index 和位置，但我真的不明白如何使其工作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T15:18:52.600

**答案已根据 OP 对他的问题的澄清进行了修改**

您必须`.contenitore`绝对定位并将其从父容器的左上角定位`.principale`。父级应该有一个相对位置，而内容子级应该是绝对定位的。

```
.principale {
    height: 240px;
    width: 210px;
    position: relative;
}
.principale .contenitore {
    background-color: #fff;
    height: 240px;
    width: 210px;
    position: absolute;
    display: block;
    top: 0;
    left: 0;
} 
```

此外，您不能使用`text-align: center`使图像元素居中。而是使用`margin: 15px auto`：

```
.immagine {
    border: 1px solid maroon;
    margin: 15px auto;
    height: 168px;
    width: 168px;
    position:relative;
} 
```

在悬停事件中，您可以更改内容的大小并为顶部和左侧位置设置动画：

```
$(window).load(function(){
$('.contenitore').hover(function() {
    $(this).animate({
        width: 300,
        height: 400,
        top: -80,  // Half the height difference 0.5*(400-240)
        left: -45  // Half the width difference 0.5*(300-210)
    }, 'fast');
    $(this).animate().css('box-shadow', '0 0 5px #000');
    $(this).css({
        zIndex: 100  // Change z-index so that is the positioned above other neighbouring cells
    });
}, function() {
    $(this).animate().css('box-shadow', 'none')
    $(this).animate({
        width: 210,
        height: 240,
        top: 0,
        left: 0
    }, 'fast');
    $(this).css({
        zIndex: 1
    });
});
}); 
```

在这里看小提琴 - [http://jsfiddle.net/teddyrised/EWJGJ/6/](http://jsfiddle.net/teddyrised/EWJGJ/6/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T15:46:45.990

如果你稍微重新考虑一下这种方法，你实际上可以在没有任何 js 的情况下做到这一点...... HTML 标记有点不同，但如果只用 css 完成，你会有更好的性能：

[http://jsfiddle.net/adamco/GeCXe/](http://jsfiddle.net/adamco/GeCXe/)

```
ul,li{
list-style:none;padding:0;margin:0;
}
ul{
    width:400px;
}
li, .item {
    width:100px;
    height:100px;   
}
li {
    float:left;
    margin:5px;
    position:relative;
}
.item {
    background-color: #eee;
    border:1px solid #ccc;
    position:absolute;
    z-index:1;
    -webkit-transition:all 0.1s ease-in-out;
}
.item:hover {
    width:110px;
    height:200px;
    z-index:2;
    -webkit-transform:translate(-5px,-5px);
    -webkit-box-shadow: 1px 1px 1px #888;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:47:16.737

我建议不要使用表格来设置产品列表的布局。使用设置宽度/高度的 div 更适合您的应用程序。在设置为相对定位的框中使用绝对定位将使您可以轻松地实现您想要做的事情。

**CSS**：

```
 .outside {
        float: left;
        width: 150px;
        height: 150px;
        position: relative;
        padding: 10px;
    }

    .inside {
        position: absolute;
        border: 1px solid #000;
        width: 150px;
        height: 150px;
        background: #eee;
        z-index: 900;
    } 
```

**jQuery** :

```
$('.inside').hover(

function () {
    $(this).animate({
        height: '200px',
        width: '200px'
    }, 200);
},

function () {
    $(this).animate({
        height: '150px',
        width: '150px'
    }, 200);
}); 
```

这是完整的示例：http: [//jsfiddle.net/wms6x/](http://jsfiddle.net/wms6x/)

# css - 媒体查询不起作用？响应式网络

> ID：15435829
> 
> 赞同：0
> 
> 时间：2013-03-15T15:10:57.113
> 
> 标签：css, media, viewport

我目前正在尝试为不同的设备大小创建一个具有不同媒体查询的网站，问题是，当我在 media-queries.css 文件中为不同的视口添加媒体查询时，浏览器只会读取一个。

我最近添加了一个最大宽度为 1500 像素的媒体查询，但现在 max-980px 的媒体查询不起作用。

这是css，有人可以帮助我吗？

```
/************************************************************************************
smaller than 980
*************************************************************************************/

@media screen and (max-width: 980px) {

    .slider-container {
        width:                              100%;
        height:                             100px;
        background-color:                   white;
        overflow:                           hidden;
        -moz-border-radius:                 20px;
        border-radius:                      20px;
    }

    .wrapper .slider-container #slideshow { 
        position:                           relative; 
        width:                              100%;
        height:                             300px;
    }

    .wrapper .slider-container #slideshow > div { 
        position:                           absolute; 
    }

    .wrapper .slider-container #slideshow > div img { 
        border:                             20px solid #00e800;
        height:                             100%;
    }

}

/************************************************************************************
smaller than 1500
*************************************************************************************/

@media screen and (max-width: 1500px) {

    .slider-container {
        width:                              100%;
        height:                             400px;
        background-color:                   white;
        overflow:                           hidden;
        -moz-border-radius:                 20px;
        border-radius:                      20px;
    }

    .wrapper .slider-container #slideshow { 
        position:                           relative; 
        width:                              100%;
        height:                             400px;
    }

    .wrapper .slider-container #slideshow > div { 
        position:                           absolute; 
    }

    .wrapper .slider-container #slideshow > div img { 
        border:                             15px solid #f3f70a;
        height:                             100%;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:13:50.893

将`min-width`组件添加到更大的最大宽度：

```
@media screen and (min-width:981px) and (max-width: 1500px) { 
```

这应该告诉系统分离这两个选择，因为 < 980 也总是 < 1500。

# passwords - 分配给用户帐户的服务和计划任务

> ID：15435830
> 
> 赞同：1
> 
> 时间：2013-03-15T15:11:00.657
> 
> 标签：passwords, scheduled-tasks, group-policy, password-policy

在 Windows Server 2008 R2 中

让我们假设用户帐户：User1

用户密码：1234

我已经根据 User1 的凭据分配了一个自动服务来运行以启动服务。我还创建了一个每天运行的计划任务，称为 ST1，它被分配在相同的用户“User1”登录凭据下运行。

如果用户的密码设置为不过期且密码未更改，则一切正常。

但是，我需要每隔 90 天根据组策略为用户更改密码。

此密码更改不会更新用户密码更改的服务或计划任务，因此这些服务和计划任务不再起作用，最终用户必须手动转到分配了此类登录凭据的每个位置并更改密码。

由于密码更改是通过 Windows 用户帐户启动的，是否有某种方法可以自动执行此密码更改以更新正在使用用户登录的所有位置？

有没有办法获取分配给特定用户的所有服务和计划任务的列表？至少这会提醒我需要手动更新哪些位置。

# android - Android Repository 导出项目以及所有依赖项

> ID：15435833
> 
> 赞同：0
> 
> 时间：2013-03-15T15:11:22.107
> 
> 标签：android

我将一个 Android 应用程序从 Android 存储库导入到我的 eclipse 中，我看到它们是对无法解析的类的许多引用。有没有办法自动签出项目的所有依赖项？我的意图是制作一个自己的APK版本，这可能实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:14:15.117

您首先需要检查项目目录中的libs文件夹，如果存在所需的jar文件，只需右键单击您的项目->属性->java构建路径并添加库

# ldap - Bugzilla 4.2.4 - 关闭 LDAP 身份验证

> ID：15435834
> 
> 赞同：2
> 
> 时间：2013-03-15T15:11:29.140
> 
> 标签：ldap, bugzilla

我安装了 Bugzilla 4.2.4。安装后，我被要求创建一个管理员帐户。所以我输入了一个电子邮件地址和一个密码。打开 Bugzilla 并以管理员身份登录。通过管理员配置。我想使用 LDAP 来授权我的用户。所以我设置了 LDAP 配置。

我注销了，当我尝试使用我的 LDAP 密码重新登录时。我收到以下错误：

```
Failed to bind to the LDAP server. The error message was: No such object
Traceback:
    at Bugzilla/Auth/Verify/LDAP.pm line 168
Bugzilla::Auth::Verify::LDAP::_bind_ldap_for_search(...) called atBugzilla/Auth/Verify/LDAP.pm line 60
Bugzilla::Auth::Verify::LDAP::check_credentials(...) called at Bugzilla/Auth/Verify/Stack.pm line 62
Bugzilla::Auth::Verify::Stack::check_credentials(...) called at Bugzilla/Auth.pm line 72
Bugzilla::Auth::login(...) called at Bugzilla.pm line 345
Bugzilla::login(...) called at /www/https/htdocs/bugzilla/index.cgi line 40 
```

我可能把 LDAP 变量放错了。但现在我无法回到 Bugzilla。我去了 ./checksetup 并重新创建了管理员密码。但是，Bugzilla 仍在尝试通过 LDAP 进行身份验证。

如何告诉 Bugzilla 不要使用 LDAP 身份验证，以便我可以重新登录并检查我的 LDAP 变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T14:55:27.213

在`Bugzilla/data/params`文件内部，您可以将值设置`'user_verify_class'`回`DB, LDAP`

# jquery - 使下拉菜单保持不可见，直到将鼠标悬停在

> ID：15435835
> 
> 赞同：1
> 
> 时间：2013-03-15T15:11:29.500
> 
> 标签：jquery, html, css

过去我创建了无数的 jQuery 下拉菜单，大部分时间都涉及到一些尝试和错误，但这次无论我如何更改菜单的内容都保持可见。任何帮助将不胜感激。

这是我的html：

```
 <nav>
        <ul>
            <li>Content Management (CMS)
                <ul>
                    <li><a class="a1" href="#">Catalog</a></li>
                    <li><a class="a1" href="#">Images</a></li>
                </ul>
            </li>
            <li>Developer
                <ul>
                    <li><a class="a1" href="#">Pages</a></li>
                    <li><a class="a1" href="#">Static Blocks</a></li>
                </ul>
            </li>
            <li>Tools
                <ul>
                    <li><a class="a1" href="#">Analytics <i>BETA</i></a></li>
                </ul>
            </li>
        </ul>
    </nav> 
```

CSS：

```
nav {position:absolute; margin-top:-20px;}
nav ul{text-align:left; list-style-type:none; }
nav ul li {float:left; background:#FFF; width:250px;}
nav ul li:hover {background:#FFF; border:2px solid #b1953a;}
nav ul li a {display:block; width:200px; font-size:14px;}
nav ul li ul {position:absolute; width:50px; padding:2px;}
nav ul li ul li{background:#FFF; border-left:2px solid #ccc; padding:5px;} 
```

和 jQuery：

```
 $('nav li ul').hide();
 $('nav li').hover(
  function () {
   $('ul', this).stop().slideDown(100);
  },function () {
   $('ul', this).stop().slideUp(100);
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:23:41.123

Do `$('nav li ul').hide();` in CSS `nav ul li ul {display:none;}`

Also, you had missed a 'ul' tag in that jQuery selector.

Works for me: [http://jsfiddle.net/4kqRv/](http://jsfiddle.net/4kqRv/)

* * *

You can actually do the dropdown in CSS really.

```
nav ul li:hover ul {display:block;} 
```

Won't be as nice, but works: [http://jsfiddle.net/WRGJS/](http://jsfiddle.net/WRGJS/)

# mongodb - Mongo 查询在 mongo shell 中有效，但在 bash mongo --eval 中无效？

> ID：15435838
> 
> 赞同：4
> 
> 时间：2013-03-15T15:11:41.467
> 
> 标签：mongodb

这是一个示例查询：

`db.readings.find( {"_id.s" : ISODate("2012-11-01T00:05:00Z") } ).count()`

查询在 mongo shell 中工作。但是，在 bash 脚本中或直接在 Ubuntu shell 中

`mongo fivemin --eval "printjson(db.readings.find( {"_id.s" : ISODate("2012-11-01T00:05:00Z") } ).count())"`

返回一个`SyntaxError: missing : after property id (shell eval):1`

我似乎找不到查询的问题。我恢复到`{ "_id" : {"s" : ...} }`，它仍然给出了同样的问题。`find().count()`但是有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-02-07T20:22:23.987

在 bash shell 中有同样的问题。

由于双引号，这将失败：

```
mongo fivemin --eval "printjson(db.readings.find( {"_id.s" : ISODate("2012-11-01T00:05:00Z") } ).count())" 
```

但是在单引号中使用 eval 字符串它可以工作：

```
mongo fivemin --eval 'printjson(db.readings.find( {"_id.s" : ISODate("2012-11-01T00:05:00Z") } ).count())' 
```

如果你使用像 $regex 这样的 $ 符号，你需要转义它：

```
mongo fivemin --eval 'printjson(db.readings.find( {"_id.s" : {"\$regex":"2012-11-01T*"} } ).count())' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-20T16:37:28.197

使用单引号成双引号，

例如：

```
mongo fivemin --eval "printjson(db.readings.find( {'_id.s' : ISODate('2012-11-01T00:05:00Z') } ).count())" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T15:26:08.307

如果查询包含 mongo 运算符 ie等，则使用`--eval`with [bash 双引号](https://www.gnu.org/software/bash/manual/bashref.html#Double-Quotes-1)还有另一个可能的问题，因为运算符以.`$ne``$gt``$`

双引号：

```
$ echo " '$ne': null "
$ => '': null 
```

单引号：

```
$ echo ' "$ne": null '
$ => "$ne": null 
```

Bash 尝试用变量替换这些运算符。

```
$ ne = 'test'
$ echo " '$ne': null "
$ => 'test': null 
```

所以，我总是建议使用`--eval`单引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T15:16:06.380

只是坐着想了想。bash 在 " 上退出似乎是一个问题（应该立即注意到！）。相反，我使用了 ' （或者我猜你可以使用 /" 作为 JSON）所以查询看起来像：

`printjson(db.readings.find({'_id.s' : ISODate('2013-01-01T00:05:00Z') }).count())"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-27T12:07:34.990

处理此问题的最佳方法是在 var 中构建 mongo 命令。然后使用`eval`command 执行 mongo 命令：

```
mongo_update_query="db.collectionName.update({ name:\""${some_name}"\", \
{ \$addToSet: { nick_names : { \$each : [ ${name_array} ] }}});"

mongo_cmd_str=$(echo "mongo --host ${mongo_host} --port ${mongo_port} ${mongo_database} --eval '${mongo_update_query}'")

# the actual call to mongo query
eval ${mongo_cmd_str} 
```

# c# - 在用户控件中回发后保留文本框中的值

> ID：15435840
> 
> 赞同：0
> 
> 时间：2013-03-15T15:11:43.083
> 
> 标签：c#, jquery, asp.net, postback

我通过 jquery 将文本加载到文本框中，如下所示：

```
 $.ajax({
        type: "POST",
        url: "../myfile.ascx/myfunction",
        data: "{variable:'" + value + "'}",
        contentType: "application/json",
        dataType: "json",
        success: function (response) {
            $('input[id$=txtMyTextBox]').val(response.d);

        }
    }); 
```

这部分工作正常，但是当我使页面从其他控件回发时，我失去了它在 txtMyTextBox 中插入的值。现在我使用的是用户控件，所以我有一个数据绑定而不是页面加载。我试过这个：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
            Page.ClientScript.RegisterStartupScript(this.GetType(), "alert", "RefreshJob();", true);
    } 
```

但这也不会带来价值。我添加了一个隐藏字段，该字段在任何回发后保存该值，但不确定如何将值保存在文本框中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:18:13.057

我认为您正在使用 html 输入元素，请改用 asp 文本框控件并将其 ID 传递给 jquery，`$('#<%=txtbox.ClientID%>').val(response.d);`并使用 viewstate 来维护文本框控件的状态

# sql - 第二个表中的顶行

> ID：15435857
> 
> 赞同：1
> 
> 时间：2013-03-15T15:12:47.413
> 
> 标签：sql, sql-server

我在让 TOP 在我的 SQL 查询中工作时遇到问题。我只想查看 PART_AML 表中的第一行。我没有任何运气尝试只查询该表而不查询 PART 表。

我怎样才能只显示 PART_AML 表中的第一行？我正在使用 Microsoft SQL。

感谢您的帮助，非常感谢。

```
SELECT  innovator.PART.STATE, 
    innovator.PART.NAME, 
    innovator.PART.ITEM_NUMBER, 
    innovator.PART.ID, 
    innovator.PART.TYPE, 
    innovator.MANUFACTURER_PART.SPEC_URL

FROM innovator.PART     

join innovator.PART_AML
    on innovator.PART_AML.SOURCE_ID = innovator.PART.ID

join innovator.MANUFACTURER_PART
    on innovator.MANUFACTURER_PART.ID = innovator.PART_AML.RELATED_ID

WHERE
(innovator.PART.IS_CURRENT = 1) AND (innovator.PART_AML.IS_CURRENT = 1) AND (innovator.MANUFACTURER_PART.IS_CURRENT = 1) 
```

电流输出

```
 Number  Name        ID      Type        Spec
    E000836 1k          ID1     Resistor    SPEC 1
    E000836 1k          ID1     Resistor    SPEC 2
    E000836 1k          ID1     Resistor    SPEC 3
    E003455 14.400MHz   ID2     Crystal     SPEC 1
    E003455 14.400MHz   ID2     Crystal     SPEC 2
    E003455 14.400MHz   ID2     Crystal     SPEC 3 
```

首选输出

```
 Number  Name        ID      Type        Spec
    E000836 1k          ID1     Resistor    SPEC 1
    E003455 14.400MHz   ID2     Crystal     SPEC 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:18:13.303

您可以使用排名功能`ROW_NUMBER() OVER(ORDER BY ...)`来做到这一点：

```
WITH CTE
AS
(
    SELECT  
      i.STATE, 
      i.NAME, 
      i.ITEM_NUMBER, 
      i.ID, 
      i.TYPE, 
      p.SPEC_URL,
      ROW_NUMBER() OVER(PARTITION BY i.ID
                        ORDER BY p.SPEC_URL) AS Rownum
    FROM innovator.PART AS i
    INNER JOIN innovator.PART_AML          AS a on a.SOURCE_ID = i.ID
    INNER JOIN innovator.MANUFACTURER_PART AS p on p.ID        = a.RELATED_ID
    WHERE i.IS_CURRENT = 1 
      AND a.IS_CURRENT = 1
      AND p.IS_CURRENT = 1
)
SELECT *
FROM CTE
WHERE rownum = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:53:23.240

您也可以使用带有 MIN() 函数的简单[GROUP BY子句](http://msdn.microsoft.com/en-us/library/ms177673.aspx)

```
SELECT innovator.PART.STATE, 
       innovator.PART.NAME, 
       innovator.PART.ITEM_NUMBER, 
       innovator.PART.ID, 
       innovator.PART.TYPE, 
       MIN(innovator.MANUFACTURER_PART.SPEC_URL) AS SPEC_URL
FROM innovator.PART join innovator.PART_AML on innovator.PART_AML.SOURCE_ID = innovator.PART.ID
                    join innovator.MANUFACTURER_PART on innovator.MANUFACTURER_PART.ID = innovator.PART_AML.RELATED_ID
WHERE (innovator.PART.IS_CURRENT = 1) AND (innovator.PART_AML.IS_CURRENT = 1) AND (innovator.MANUFACTURER_PART.IS_CURRENT = 1)
GROUP BY innovator.PART.STATE, innovator.PART.NAME, innovator.PART.ITEM_NUMBER, innovator.PART.ID, innovator.PART.TYPE 
```

# youtube-api - 查询不返回 JSON，尽管它应该

> ID：15435858
> 
> 赞同：1
> 
> 时间：2013-03-15T15:12:49.133
> 
> 标签：youtube-api

为什么此链接返回 xml 内容...？：

[https://gdata.youtube.com/feeds/api/videos/uENITui5_jU#!?v=2&alt=json](https://gdata.youtube.com/feeds/api/videos/uENITui5_jU#!?v=2&alt=json)

而这个返回正确的 JSON？

[https://gdata.youtube.com/feeds/api/videos/Zce-QT7MGSE?v=2&alt=json](https://gdata.youtube.com/feeds/api/videos/Zce-QT7MGSE?v=2&alt=json)

我怀疑这是因为 URL 的 video_id 字段中的 bang 或井号。有谁知道如何修理它？不，引用它们也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:51:49.197

YouTube ID 中永远不会有锚点 (#)，所有 YouTube ID 都是 11 个字符。基本上，锚点之后的所有内容都会被 Web 服务器以不同的方式处理，因此“!?v=2&alt=json”在您的请求中被忽略。

您要查找的视频 ID 是“uENITui5_jU”，因此这是正确的请求： [https ://gdata.youtube.com/feeds/api/videos/uENITui5_jU?v=2&alt=json](https://gdata.youtube.com/feeds/api/videos/uENITui5_jU?v=2&alt=json)

不知道你是如何得到额外的“#！” 里面的人物。。

# c# - 插入 SQL Server 数据库 ASP.net

> ID：15435859
> 
> 赞同：1
> 
> 时间：2013-03-15T15:12:49.470
> 
> 标签：c#, asp.net, sql-server

我要做的是将用户名及其每月小时限制插入我的 SQL Server 数据库。我使用自动生成的语句进行更新和删除。我现在只需要添加新用户。据我所知，下面的代码应该可以工作，但事实并非如此。我想这就是我写它的方式。

注释中的部分是`Userdata.aspx`文件自动生成的，所以我试图将其转换为使用我的 2 个文本框。

非常感谢。

```
protected void Button1_Click1(object sender, EventArgs e)
{
     string sql = "INSERT INTO [UserData]([UserName], [MonthlyHourLimit]) VALUES ("+ TextBox1.Text + "," + TextBox2.Text + ")";

     //INSERT INTO [UserData] ([UserName], [MonthlyHourLimit]) VALUES (@UserName, @MonthlyHourLimit)" 
     SqlDataSource1.InsertCommand = sql;
     GridView1.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T15:21:40.650

您需要配置数据源以使用参数。

```
 <asp:sqlDataSource ID="EmployeeDetailsSqlDataSource" 
   SelectCommand="select [UserName], [MonthlyHourLimit] from [UserData] where UserName= @UserName"

   InsertCommand="IINSERT INTO [UserData] ([UserName], [MonthlyHourLimit]) VALUES (@UserName, @MonthlyHourLimit);"

   ConnectionString="<%$ ConnectionStrings:MyConnection %>"
   RunAt="server">

   <SelectParameters>
      <asp:Parameter Name="UserName" Type="Int32" DefaultValue="0" />
   </SelectParameters>

   <InsertParameters>
      <asp:Parameter Name="UserName" Direction="Input" Type="String" />
      <asp:Parameter Name="MonthlyHourLimit" Direction="Input" Type="String" />
   </InsertParameters>

 </asp:sqlDataSource> 
```

更新：我忘了提，你想使用[ControlParameter](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.controlparameter%28v=vs.100%29.aspx)而不是简单的参数。看看下面的片段：

```
 <asp:СontrolParameter Name="UserName" ControlId="ddlUserNames" PropertyName="SelectedValue"/>

  ...

  <asp:DropdownList
      ID="ddlUserNames"
      runat="server"
      Autopostback="True">
      <asp:Listitem Selected="True">Users</asp:Listitem>
      <asp:Listitem Value="Peter">Peter</asp:Listitem>
      <asp:Listitem Value="Jessica">Jessica</asp:Listitem>
  </asp:Dropdownlist> 
```

请查看相应的[MSDN](http://msdn.microsoft.com/en-us/library/fkzs2t3h%28v=vs.100%29.aspx)页面，详细描述 SqlDataSource 的用法。

更新2：完整的例子，以避免混淆

```
 <asp:sqlDataSource ID="EmployeeDetailsSqlDataSource" 
                    SelectCommand="select [UserName], [MonthlyHourLimit] from [UserData] where UserName= @UserName"
                    InsertCommand="IINSERT INTO [UserData] ([UserName], [MonthlyHourLimit]) VALUES (@UserName, @MonthlyHourLimit);"

                    ConnectionString="<%$ ConnectionStrings:MyConnection %>"
                    RunAt="server">
      <SelectParameters>
          <asp:Parameter Name="UserName" Type="Int32" DefaultValue="0" />
      </SelectParameters>
      <InsertParameters>
          <asp:ControlParameter Name="UserName" ControlId="txtUserName" Direction="Input" Type="String" />
          <asp:ControlParameter Name="MonthlyHourLimit" ControlId="txtMonthlyHourLimit" Direction="Input" Type="String" />
      </InsertParameters>
 </asp:sqlDataSource>

 <asp:TextBox runat="server" ID="txtUserName" /> 
 <asp:TextBox runat="server" ID="txtMonthlyHourLimit" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:17:28.990

```
Datasource.InsertCommand is a property.
Datasource.Insert() is a method. 
```

您还应该使用参数。

```
datasource.insertparameters("username").defaultvalue = TextBox1.Text + "," + TextBox2.Text 
```

# spring - Spring JavaConfig，bean 的自定义作用域和注解

> ID：15435860
> 
> 赞同：13
> 
> 时间：2013-03-15T15:12:49.657
> 
> 标签：spring, configuration, annotations, scope

我有一个问题要解决：1）我们的项目使用 Spring JavaConfig 方法（所以没有 xml 文件）2）我需要创建自定义范围，xml 中的示例如下所示：

```
<bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
<property name="scopes">
    <map>
        <entry key="workflow">
            <bean
                class="com.amazonaws.services.simpleworkflow.flow.spring.WorkflowScope" />
        </entry>
    </map>
</property> 
```

我用 JavaConfig 弄明白了，它看起来像这样：

```
 @Bean
public CustomScopeConfigurer customScope () {
    CustomScopeConfigurer configurer = new CustomScopeConfigurer ();
    Map<String, Object> workflowScope = new HashMap<String, Object>();
    workflowScope.put("workflow", new WorkflowScope ());
    configurer.setScopes(workflowScope);

    return configurer;
} 
```

如果我的假设有误，请纠正我。

3) 我需要再次将我的类注释为@Component (scope="workflow") xml 配置如下所示：

```
<bean id="activitiesClient" class="aws.flow.sample.MyActivitiesClientImpl" scope="workflow"/> 
```

所以基本上问题是 - 我的假设是正确的使用 @Component (scope="workflow") 还是预期以其他方式？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T15:21:11.130

您需要使用注释`@Scope`。像这样：

```
@Scope("workflow") 
```

也可以创建自定义范围限定符：

```
@Qualifier
@Scope("workflow")
@Target({ ElementType.TYPE, ElementType.METHOD })
@Retention(RetentionPolicy.RUNTIME)
public @interface WorkflowScoped {
} 
```

并以这种方式使用它：

```
@Component
@WorkflowScoped 
class SomeBean 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-16T13:30:18.887

我在我的项目中遇到了类似的情况，请参见[此处](https://stackoverflow.com/questions/58397235/a-java-config-analog-of-xml-configuration-not-working)。

本质上，您必须将`WorkflowScope`类实例作为`customScope()`方法中的参数传递并使用它；否则，它将不起作用：

```
@Bean
public CustomScopeConfigurer customScope(WorkflowScope workflowScope) {
    CustomScopeConfigurer configurer = new CustomScopeConfigurer();
    Map<String, Object> workflowScope = new HashMap<>();
    workflowScope.put("workflow", workflowScope);
    configurer.setScopes(workflowScope);

    return configurer;
} 
```

# ruby-on-rails - 如何根据控制器调用具有各种参数的 before_filter？

> ID：15435861
> 
> 赞同：1
> 
> 时间：2013-03-15T15:12:49.713
> 
> 标签：ruby-on-rails, ruby

我有两个控制器：

```
class MyController < ApplicationController
  before_filter :get_model
  # Actions
end

class MyOtherController < ApplicationController
  before_filter :get_model
  # Actions
end 
```

在我的`ApplicationController`中，我有一个用于获取某个模型的函数：

```
def get_model
  @model = Model.find(params[:model_id])
end 
```

但是，用于保存模型 id 的参数对于两个控制器并不相同。

我怎样才能在不重复自己的情况下完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:12:49.713

`before_filter`可以接受 Proc 或 lambda 作为其第一个参数。

重构您的`get_model`函数，使其接受和 id ：

```
def get_model(id)
  @model = Model.find(id)
end 
```

然后使用 lambda 调用 before_filter，并传递相应的 id ：

```
before_filter lambda { get_model(params[:whatever_id]) } 
```

# php - symfony 1.4 使用 ajax 将子表单嵌入到另一个子表单中

> ID：15435864
> 
> 赞同：0
> 
> 时间：2013-03-15T15:12:56.697
> 
> 标签：php, ajax, forms, symfony-1.4

我知道 symfony 1.4 表单系统不是最好的，给很多人带来很多麻烦，但我需要完成这项任务，我需要帮助。

我需要将子表单嵌入到嵌入主表单的子表单中，并通过 Ajax 进行。

基本上我有 aForm、bForm 和 cForm 并且 aForm 嵌入 bForm 和 bForm 可以有一个或多个 cForm。

当我从每个表单的 configure() 函数中正常嵌入它们时，它可以工作。但是当我尝试使用 Ajax 将多个 cForms 嵌入到 bForm 中时，我无法绑定它们。

这是有效的版本。一切都很好嵌入并且验证正常。

```
class BookingForm extends BaseBookingForm
{
  public function configure()
  {     
      $this->embedRelation('Journey as journey');
  }
}

[...]

class JourneyForm extends BaseJourneyForm
{
  public function configure()
  {
      $pickup_form = new JourneyItineraryForm();
      $this->embedForm('pickup_form', $pickup_form);

  }
} 

[...]

class JourneyItineraryForm extends BaseJourneyItineraryForm
{
  public function configure()
  {
  }
}

[...] 
```

现在，如果我尝试通过 ajax 嵌入 JourneyItineraryForm，我设法让小部件显示在模板中，但无法绑定它们。它对我说**意外的额外表单字段名为“航点”。**

查看下面的代码：

```
class JourneyForm extends BaseJourneyForm
{
      public function configure()
      {
          $waypoint_form = new JourneyItineraryForm();
          $this->embedForm('waypoint', $waypoint_form);

      }

      public function addNewWaypoint($number)
      {
       /*
       * Called from actions.class.php after an ajax request
       */

       $new_waypoints = new BaseForm();

       for($i=0; $i <= $number; $i+=1)
       {
         $waypoint = new JourneyItinerary();
         $waypoint_form = new JourneyItineraryForm($waypoint);
         $new_waypoints->embedForm($i,$waypoint_form);
       }

      $this->embedForm('waypoint', $new_waypoints);
      }

    public function bind(array $taintedValues = null, array $taintedFiles = null)
    {

      $new_occurrences = new BaseForm();
      foreach($taintedValues['waypoint'] as $key => $new_occurrence)
      {
        $occurrence = new JourneyItinerary();      
        $occurrence_form = new JourneyItineraryForm($occurrence);
        $new_occurrences->embedForm($key,$occurrence_form);
      }

      $this->embedForm('waypoint',$new_occurrences);

      parent::bind($taintedValues, $taintedFiles);
    }
 } 
```

我的模板我设法显示航点小部件，例如

```
$form['journey']['waypoint'][0]['field_name']->renderRow(); 
```

我还尝试从 BookingForm 覆盖 bind 方法，但我不知道我是否正确：

```
public function bind(array $taintedValues = null, array $taintedFiles = null)
{   
    $new_occurrences = new sfForm();
    foreach($taintedValues['journey']['waypoint'] as $key => $new_occurrence)
    {
      $occurrence = new JourneyItinerary();      
      $occurrence_form = new JourneyItineraryForm($occurrence);

      $new_occurrences->embedForm($key,$occurrence_form);
    }

    $this->embedForm('journey',$new_occurrences);

    parent::bind($taintedValues, $taintedFiles);
} 
```

我遵循了本教程： [http](http://tech.cibul.net/embedded-forms-with-symfony-1-4-and-jquery/) ://tech.cibul.net/embedded-forms-with-symfony-1-4-and-jquery/ 并阅读了官方文档[http://symfony.com/legacy/doc/more -with-symfony/1_4/en/06-Advanced-Forms](http://symfony.com/legacy/doc/more-with-symfony/1_4/en/06-Advanced-Forms)

非常感谢任何帮助:) 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:24:25.590

你可以试试这个插件[ahDoctrineEasyEmbeddedRelationsPlugin](http://www.symfony-project.org/plugins/ahDoctrineEasyEmbeddedRelationsPlugin)，它简单快速。但是你不能在嵌入中嵌入，但在你的情况下，你有一种形式 2 嵌入形式。

# c++ - Linux 强制应用程序在特定显示器上全屏显示

> ID：15435870
> 
> 赞同：0
> 
> 时间：2013-03-15T15:13:11.267
> 
> 标签：c++, linux, fullscreen, multiple-monitors

为了工作，我正在开发一个非常专业的软件，它需要运行两个全屏应用程序，每个监视器上一个。为简单起见，我目前使用的是 LUbuntu 64 位，配备 AMD Radeon HD 显卡（目前不记得确切的版本，但它相当新）。

如果可能的话，我想坚持使用 SDL2，但如果我需要对其进行一些修改或移动到不同的库，我对此相当满意。

所以，我的问题是，是否可以在 Linux 的不同显示器上运行两个全屏应用程序（如果可以，我需要采取什么样的设置步骤）？枚举显示器以获得其左上角 x/y 位置的最佳选择是什么，以便我可以告诉 SDL 将我的窗口移动到该显示器上以全屏显示？

*注意：* 我没有将这个发布到 askubuntu，因为我不确定这个问题是否严格围绕 Ubuntu 平台。

**更新：**

这是来自的输出`xrandr -q`：

```
Screen 0: minimum 320 x 200, current 3200 x 1080, maximum 3200 x 3200
DFP1 disconnected (normal left inverted right x axis y axis)
DFP2 disconnected (normal left inverted right x axis y axis)
DFP3 disconnected (normal left inverted right x axis y axis)
DFP4 disconnected (normal left inverted right x axis y axis)
DFP5 disconnected (normal left inverted right x axis y axis)
DFP6 disconnected (normal left inverted right x axis y axis)
DFP7 disconnected (normal left inverted right x axis y axis)
DFP8 disconnected (normal left inverted right x axis y axis)
DFP9 connected 1920x1080+1280+0 (normal left inverted right x axis y axis) 533mm x 312mm
   1280x1024      50.0 +   75.0     60.0     30.0     24.0  
   1920x1080      60.0 +   50.0*    59.9     30.0     25.0     30.0     24.0     30.0     30.0     24.0  
   1776x1000      50.0     59.9     25.0     24.0     30.0     30.0  
   1680x1050      50.0     60.0     30.0     24.0  
   1400x1050      50.0     60.0     30.0     24.0  
   1600x900       50.0     60.0     30.0     24.0  
   1440x900       50.0     59.9     30.0     24.0  
   1280x960       50.0     60.0     30.0     24.0  
   1280x800       50.0     59.8     30.0     24.0  
   1152x864       50.0     59.9     75.0     30.0     24.0  
   1280x768       50.0     59.8     30.0     24.0  
   1280x720       60.0     50.0     59.9     30.0     24.0  
   1024x768       50.0     75.0     70.1     30.0     24.0     60.0  
   1152x648       50.0     59.9  
   800x600        50.0     30.0     24.0     72.2     75.0     60.3     56.2  
   720x576        59.9     30.0     24.0     50.0  
   720x480        50.0     30.0     24.0     60.0     59.9  
   640x480        50.0     30.0     24.0     75.0     72.8     67.0     60.0     59.9  
DFP10 connected 1280x1024+0+0 (normal left inverted right x axis y axis) 376mm x 301mm
   1280x1024      60.0*+   76.0     75.0     72.0  
   1280x960       76.0     75.0     72.0     60.0  
   1152x864       75.0     60.0  
   1280x768       76.0     75.0     72.0     60.0  
   1280x720       76.0     75.0     72.0     60.0  
   1024x768       75.0     70.1     60.0  
   800x600        72.2     75.0     60.3  
   640x480        75.0     72.8     67.0     59.9  
   640x350        60.0     70.1  
CRT1 disconnected (normal left inverted right x axis y axis) 
```

我已经尝试搜索一些论坛以更好地解释如何处理这些信息，看来我应该这样做：

`xrandr --output DFP9 --auto --output DFP10 --auto`

当我这样做时，我仍然只有一个显示（“：0”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:39:56.800

你的设置是什么？您实际上有 2 个单独的 X 显示器，还是使用 Xinerama 将两者结合起来？

如果您使用 2 个显示器，它们应该有自己的 -display 或 DISPLAY 环境变量。您可以使用它来执行新应用程序。

```
$ echo $DISPLAY
:0.0
$ xterm -display :0.0 
```

在另一个显示器中打开一个外壳以获取您的另一个显示器环境变量。

还有-geometry，格式为[Wth,Ht+X+Y]

```
$ xterm -geometry 132x80+500+0 
```

启用 Xinerama 时，您的其他显示通常是 +X+Y 偏移量。

当然，这确实需要应用程序处理命令行参数。然后在初始化窗口时将它们传递给 X。对于 xterm，宽度和高度是文本字符的单位，其中 X/Y 是屏幕像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:30:39.103

如果您可以控制 X 配置，并且如果其他应用程序不会显示在生产工作站上，您可能需要禁用“Xinerama”功能并设置两个屏幕。然后你可以让你的应用程序连接`:0.0`并`:0.1`从每个应用程序中获取屏幕大小。

# java - 服务器端 Web 服务异步的推荐模式

> ID：15435872
> 
> 赞同：0
> 
> 时间：2013-03-15T15:13:13.937
> 
> 标签：java, web-services, design-patterns, asynchronous, server-side

我已经成功地实现了轮询和回调**客户**端异步示例，但现在我对实现具有**服务器**端异步的 Web 服务感兴趣。基础架构是使用 JBoss AS 6.x 的 Java EE。

我试图实现的模式（据我所知）将涉及两个 Web 服务操作，一个是发起请求，另一个是检查请求是否完成并检索结果。

1.  客户端通过 SOAP over HTTP 使用搜索参数调用 Web 服务端点操作 1。
2.  Web 服务端点通过 JMS 队列 1 将请求发送到消息驱动 bean。
3.  消息驱动 bean (MDB) 从队列 1 中获取请求。
4.  MDB 通过通过 JMS 队列 2 向 Web 服务端点发送包含相关因子 ID 的消息来确认服务请求。（我假设这个相关器 ID 将是生成的 JMS 消息 ID。）
5.  MDB 确认原始消息以将其从队列 1 中删除。
6.  MDB 开始长时间运行数据库查询，可能使用相关因子 ID 作为检索键将结果构建到临时表中。
7.  Web 服务端点通过 HTTP 上的 SOAP 将包含相关因子 ID 的回复发送回客户端。

我猜，由于获取结果不需要长查询，我不需要 JMS，我可以简单地查询数据库以查看结果是否准备好。所以，第二个操作是：

1.  客户端通过 HTTP 上的 SOAP 调用具有相关器 ID 的 Web 服务端点操作 2。
2.  Web 服务使用相关器 ID 查询数据库。结果代码将是：未找到结果、操作仍在进行中或找到结果。
3.  Web 服务以某种复杂的结构响应客户端，将结果代码与任何结果结合起来。

所以，我有很多问题。我已经看到了一些对服务器端异步支持的引用，但它们似乎都以某种方式特定于服务器。例如，我看到了一个准确描述第一个操作的图表，但它似乎是特定于 OC4J 的。如果有人可以将我引导到一个通用示例或实现类似这样的教程，请这样做。其他子任务可能是，我是否应该使用 JMS 消息 ID 作为相关因子返回给客户端？我假设我应该使用 CLIENT-ACKNOWLEDGE 作为 JMS 会话模式，以便 MDB 可以向 Web 服务发送回复，然后从队列中删除消息。或者，我应该打扰吗？如果 Web 服务端点只生成 JMS 消息，将其弹出队列并将消息 ID 直接返回给服务客户端，而无需经历让 MDB 通过 JMS 队列 2 发回相关器的所有繁琐工作？[编辑：实际上，我考虑得越多，Web 服务会发送一条消息然后，什么，阻塞等待队列 2 的回复似乎是错误的？]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:42:53.343

Correlation id 可以在步骤 2 中生成并立即返回给客户端。这在响应客户端之前减少了额外的跃点。将持久消息生成到队列中就足够了。我也没有看到需要两个队列。我更喜欢应用程序生成的相关 ID。

# c# - 用其他对象制作一个对象

> ID：15435877
> 
> 赞同：1
> 
> 时间：2013-03-15T15:13:34.523
> 
> 标签：c#, user-controls

我用 C# `textboxes`和一些 `comboboxes`. 我希望它们包含在一个对象中，以便同时拖动它们。我怎样才能做到这一点？例如，我有这张照片。我怎样才能同时拖动所有这些？谢谢！ ![在此处输入图像描述](../Images/0a8dfb8128c1052260a93bd6ce29271f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:15:32.433

是的。

或者将它们全部放在某种面板中，以便它们可以一起移动。或者，如果您需要重新使用它，请创建一个用户控件。只需将一个新的用户控件添加到您的项目中，并像您为表单的这一部分所做的那样设计它。然后在需要的地方添加用户控件。

# c++ - cudaMemcpyToSymbol 使用或不使用字符串

> ID：15435880
> 
> 赞同：4
> 
> 时间：2013-03-15T15:13:39.340
> 
> 标签：c++, c, cuda

我试图以这种方式将结构复制到常量内存：

```
struct Foo {
    int a, b, c;
};

__constant__ Foo cData;

int main() {
    Foo hData = {1, 2, 3};
    cudaMemcpyToSymbol(cData, &hData, sizeof(Foo));
    // ...
} 
```

这很好用，在我的内核中我可以直接访问常量数据：

```
__global__ void kernel() {
    printf("Data is: %d %d %d\n", cData.a, cData.b, cData.c); // 1 2 3
} 
```

但后来我尝试使用`const char *`符号名称，事情停止了：

```
cudaMemcpyToSymbol("cData", &hData, sizeof(Foo)); // prints 0 0 0 
```

我认为两个版本相似，但似乎我错了。

怎么了？

编辑：我想用 cudaGetSymbolAddress 报告同样的行为，如果没有`const char *`使用，这对我有用：

```
__constant__ int someData[10];
__constant__ int *ptrToData;

int *dataPosition;
cudaGetSymbolAddress((void **)&dataPosition, someData); // Works
// cudaGetSymbolAddress((void **)&dataPosition, "someData"); // Do not work
cudaMemcpyToSymbol(ptrToData, &dataPosition, sizeof(int *)); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T15:50:14.223

从 CUDA 5 开始，不再支持使用字符串作为符号名称。[这在此处](http://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html)的 CUDA 5 发行说明中有所介绍

> • 不再支持使用字符串来指示设备符号，这在某些 API 函数中是可能的。相反，应直接使用该符号。

原因之一与启用真正的设备链接器有关，这是 CUDA 5 中的新功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T19:27:14.200

因为一次又一次地遇到同样的错误，我想分享这个示例代码，它显示了这个问题的几乎所有示例案例（所以我以后再次犯同样的错误时可以参考这里）。

```
//file: main.cu
#include <stdio.h>
#include <stdlib.h>
#include <cuda.h>

__constant__ float constData[256];
__device__ float devData;
__device__ float* devPointer;

int main(int argc, char **argv)
{
  cudaFree(0);

  float data[256];
  cudaError_t err = cudaMemcpyToSymbol(constData, data, sizeof(data));
  printf("Err id: %d, str: %s\n", err, cudaGetErrorString(err));

  float value = 3.14f;
  err = cudaMemcpyToSymbol(devData, &value, sizeof(float));
  printf("Err id: %d, str: %s\n", err, cudaGetErrorString(err));

  float* ptr;
  cudaMalloc(&ptr, 256 * sizeof(float));
  err = cudaMemcpyToSymbol(devPointer, &ptr, sizeof(ptr));
  printf("Err id: %d, str: %s\n", err, cudaGetErrorString(err));
  cudaFree(ptr);

  return EXIT_SUCCESS;
} 
```

我得到“无效的设备符号”和许多其他与**_*常量*_*****设备***_内存使用**有关的信息。**此代码在运行时不会出现此类错误。

# php - 我应该将 php 文件（Web 服务）放在 Apache tomcat 7 的什么位置？

> ID：15435883
> 
> 赞同：-5
> 
> 时间：2013-03-15T15:13:52.897
> 
> 标签：php, database, web-services, tomcat

我正在创建一个 android 应用程序 .. 为此我需要调用 Web 服务来访问数据库 .. 我为 Web 服务 php 选择的语言！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:22:30.810

无处。引用[主页](http://tomcat.apache.org/)：*Apache Tomcat 是 Java Servlet 和 JavaServer Pages 技术的开源软件实现*。它非常适合运行 Java 程序，据我所知，它不能执行 PHP。（我确实找到[了这个 wiki 条目](http://wiki.apache.org/tomcat/UsingPhp)，它解释了如何通过编辑 PHP 的源代码并重新编译它来使一个古老的、不受支持的 PHP 版本在 Tomcat 下工作。不要将 Tomcat 用于 PHP！）

如果您想运行 PHP，请使用适合它的服务器，例如带有[mod_php的](http://www.php.net/manual/en/install.unix.apache2.php)[Apache HTTPD](http://httpd.apache.org/)或带有[FastCGI的](http://www.php.net/manual/en/install.unix.lighttpd-14.php)[lighttpd](http://www.lighttpd.net/)。

如果您真的非常想通过 Tomcat 运行 PHP，那么您可以通过[CGI](http://tomcat.apache.org/tomcat-7.0-doc/cgi-howto.html)来实现。不过我不推荐它，CGI 效率不高。

如果您想同时运行带有 Tomcat 和 PHP 应用程序的 Java 应用程序，那么将一个普通的 HTTPD 作为最终客户端连接的一个。它可以处理PHP。当您想运行 Java 时，将其用作Tomcat 服务器[的代理。](http://tomcat.apache.org/tomcat-7.0-doc/proxy-howto.html)

# asp.net - 如何更改 user.identity.name 的值

> ID：15435886
> 
> 赞同：3
> 
> 时间：2013-03-15T15:13:57.123
> 
> 标签：asp.net

我认为这是一个非常基本的问题——但我不知道该怎么做。

我正在尝试测试具有不同用户登录 ID 的应用程序（因为这些用户具有不同的角色）。该应用程序使用系统用户的登录信息并且没有自己的登录信息。`user.identity.name`用于获取值。但是我想覆盖这个值来测试不同的用户登录。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:19:55.237

当您设置身份验证票时，请在此处进行更改。我假设它正在使用 Forms Auth（以用户身份登录）。

```
FormsAuthentication.RedirectFromLoginPage("Joe",false); 
```

如果使用 Windows 身份验证，您可以使用模拟。

如果使用 Windows 身份验证，另一种选择是修改浏览器设置以提示您登录。然后以其他用户身份登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:30:08.323

你总是可以用 Moq 之类的东西来模拟它

```
Mock<ControllerContext> ControllerContextMock;
string UserName = "TestUser";
ControllerContextMock = new Mock<ControllerContext>();
ControllerContextMock.SetupGet(p => p.HttpContext.User.Identity.Name).Returns(UserName); 
```

这就是我进行单元/行为测试的方式

根据我下面的评论，我在获取用户名周围添加了一个包装器

```
public string OverideName;

private string GetUserName()
{
    string name;
    if(OverideName != null && OverideName.Langth>0)
    {
       name = OverideName;
    }else
    {
       name = User.Identity.Name;
    }
    return name;
} 
```

对于大多数较旧的 asp.net 网络表单测试，这确实是测试内容的唯一方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-28T14:02:13.570

我也想做同样的事情。

我的想法是创建一个“更改身份”页面（只有在我的应用程序中具有管理员角色的人才能访问）。然后他们可以选择成为不同的人/角色来测试应用程序。

我的应用程序中的每个页面都测试以查看会话集用户 ID 和角色是否有效（在首次使用应用程序时设置）并加载页面以显示该用户/角色要查看的信息/功能。因此，这个“改变身份”功能会将会话用户 id 和角色设置为被测用户的身份，并允许测试的人表现得好像他们是另一个人一样。还提供了一个重置​​选项来重置自己。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-12T07:31:39.283

最简单的解决方案是当用户更新名称时 - 将他注销并要求登录。它为我工作

# jsf - 如何导航到文件夹中的页面？

> ID：15435889
> 
> 赞同：1
> 
> 时间：2013-03-15T15:14:05.330
> 
> 标签：jsf, navigation

当我将 JSF 页面移动到文件夹中时，我在导航到 JSF 页面时遇到问题，例如，我有一个名为 ListOfUsers.xhtml 的页面，它通常保存在根文件夹中（我相信 Web Pages 文件夹是根文件夹）并且工作正常, 单击按钮时加载的页面。该按钮的代码如下所示：

```
<h:form>
<h:commandButton action="ListOfUsers" value="Manage users" /><br/>
</h:form> 
```

现在我已将文件移动到网页/用户文件夹中，它给了我 FileNotFound 异常或“无法找到匹配的导航案例与 from-view-id '/MainPage.xhtml' for action '../users/ListOfUsers' 结果'../users/ListOfUsers'"
我正在尝试所有组合，例如 /users/ListOfUsers、../users/ListOfUsers，但似乎没有任何效果。我意识到这很容易，但我不能再浪费时间尝试解决它，我将不胜感激任何帮助尝试。

# php - 使用产品密钥检查数据库行中是否存在数据

> ID：15435891
> 
> 赞同：0
> 
> 时间：2013-03-15T15:14:06.773
> 
> 标签：php, mysql

我的代码有问题。如果存在数据库行中的数据，则它可以工作。但是，如果数据不存在，那么它也会给出消息，因为 12345-12345-12345-12345(sample key) already registered 。使用另一个键。

这是代码：

```
 $namecheck = mysql_query("SELECT pkey FROM license_key WHERE pkey ='$userEnteredProductKey'");
      if(is_resource($namecheck) && mysql_num_rows($namecheck) > 0 ){
            $sql_result = mysql_fetch_assoc($namecheck);
            echo $userEnteredProductKey . " already registered . use another key";
   } 
```

如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:23:36.590

First of all before doing anything else please phase out **mysql_*** functions and switch to use **PDO** or **MySQLi**. Especially if your project is dealing with serial keys or some unique keys. As of now your query can be easily hacked by **injecting** extra **SQL**

Back to problem:

since it executes **echo** statement it means that if statement gets executed which means **is_resource**() and **mysql_num_rows**() both return true.

why dont you check the database and see again if there exists a record with **12345-12345-12345-12345**, seems like **mysql_num_rows** returns **> 0**

Also why dont you var_dump **$sql_result** and see what it prints

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:37:50.597

不建议使用 mysql_query。在下面试试这个。

```
$mysqli = new mysqli(DB_SERVER, DB_USERNAME, DB_PASSWORD, DB_SELECT, DB_PORT);

$stmt = $mysqli->prepare("SELECT pkey FROM license_key WHERE pkey =?");
$stmt->bind_param('s',$userEnteredProductKey) ;

$stmt->execute();
$stmt->bind_result( $pKey );
$stmt->fetch();
$stmt->close();

if($pkey!=''){
  echo $userEnteredProductKey . " already registered . use another key";
} 
```

# c# - Windows 8 网格应用程序中的自定义详细信息页面

> ID：15435892
> 
> 赞同：10
> 
> 时间：2013-03-15T15:14:10.720
> 
> 标签：c#, .net, xaml, data-binding, windows-8

我创建了一个简单的 C# Windows 8 网格应用程序。

如果你不熟悉这个布局，这里有一个简短的解释：

[关联](http://blogs.msdn.com/b/window_8_avtar/archive/2012/09/24/part-1-create-your-first-window-8-app-using-quot-grid-app-xaml-quot-template-and-c-and-xaml-from-scratch.aspx)

我想要的很简单——一些自定义`ItemDetailPages`。我希望能够单击 和 上的某些项目`GroupDetailPage`并`GroupedItemsPage`导航到自定义`.xaml`文件，我可以在其中包含多个图像。

我确信有一种我错过了的简单方法，而且我也确信这些信息将对很多人有用，所以我将在这个问题上提供赏金。

到目前为止，我一直在努力做到这一点：

我`CustomDataItem`在`SampleDataSource.cs`课堂上创建了一个：

```
 /// <summary>
    /// Generic item data model.
    /// </summary>
    public class CustomDataItem : SampleDataCommon
    {
        public CustomDataItem(String uniqueId, String title, String subtitle, String imagePath, String description, String content, SampleDataGroup group)
            : base(uniqueId, title, subtitle, imagePath, description)
        {
            this._content = content;
            this._group = group;
        }

        private string _content = string.Empty;
        public string Content
        {
            get { return this._content; }
            set { this.SetProperty(ref this._content, value); }
        }

        private SampleDataGroup _group;
        public SampleDataGroup Group
        {
            get { return this._group; }
            set { this.SetProperty(ref this._group, value); }
        }
    } 
```

然而，显然，增加`ObservableCollection`

```
private ObservableCollection<SampleDataGroup> _allGroups = new ObservableCollection<SampleDataGroup>();
public ObservableCollection<SampleDataGroup> AllGroups
{
    get { return this._allGroups; }
} 
```

使用不同的数据类型是不可能的。那么在这种情况下我该怎么办？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T17:15:23.187

是的，您应该能够创建自定义或不同的数据类型。如果您使用网格模板创建 Win8 应用程序，您会看到该模板为您做了三件事：1) 它创建了三种类型，SampleDataCommon，它是基础，SampleDataItem，它实现了 SampleDataCommon 并添加了两个新属性 - content 和 group ，以及同样实现 SampleDataCommon 的 SampleDataGroup，添加了一个方法 ItemsCollectionChanged，并添加了两个属性 Items 和 TopItems。2) 它创建了一个名为 SampleDataSource 的类，其中创建了一个 SampleDataGroup 集合并命名为 AllGroups：ObservableCollection AllGroups。3) 它将 SampleDataSource 的 Items 和 AllGroups 绑定到 XMAL 页面中的对象。

在您的情况下，您使用相同的数据结构。换句话说，您将创建一个包含项目等的组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T06:56:59.403

> 我有一个简单的网格应用程序；如何使组项目页面中的元素之一链接到自定义项目详细信息页面成为可能？

好的，让我们来看看使用 Visual Studio 中的“Grid App”模板时生成的应用程序。

组项目页面上元素的数据类是`SampleDataItem`类。您可以添加某种类型的数据字段（`bool`、`int`或其他）来指示如何处理导航。在这个例子中，我们保持简单，所以我们添加一个`bool`来指示导航是否是自定义的。

```
public class SampleDataItem : SampleDataCommon
{
    // add flag as last param
    public SampleDataItem(String uniqueId, String title, String subtitle, 
        String imagePath, String description, String content, SampleDataGroup group, 
        bool isCustomNav = false)
    : base(uniqueId, title, subtitle, imagePath, description)
    {
        this._content = content;
        this._group = group;
        this.IsCustomNav = isCustomNav;
    }

    // to keep it simple this doesn't handle INotifyPropertyChange, 
    // as does the rest of the properties in this class.
    public bool IsCustomNav { get; set; }

    ...
} 
```

因此，当您添加`SampleDataItem`要显示的新对象时，您只需要`isCustomNav`在构造函数中设置字段即可。

现在我们要做的就是在分组项目页面 (GroupedItemsPage.xaml.cs) 的网格中更改已经存在的单击事件处理程序：

```
void ItemView_ItemClick(object sender, ItemClickEventArgs e)
{
    // Navigate to the appropriate destination page, configuring the new page
    // by passing required information as a navigation parameter
    var item = (SampleDataItem)e.ClickedItem;
    var itemId = item.UniqueId;

    if (item.IsCustomNav == false)
    {
        // default
        this.Frame.Navigate(typeof(ItemDetailPage), itemId);
    }
    else
    {
        // custom page
        this.Frame.Navigate(typeof(ItemDetailPage2), itemId);
    }
} 
```

我们上面所做的就是获取选定的项目，然后测试我们之前添加的导航标志。基于此，我们导航到原始的`ItemDetailPage`或新的名为`ItemDetailPage2`. 正如我之前提到的，导航标志不一定是`bool`. 它可以是一个`int`或`enum`其他类型，告诉我们在哪里导航。

请注意，如果您想在 上进行类似的行为`GroupDetailsPage`，您只需以相同的方式更新 click 事件处理程序。

希望有帮助。

# c#-4.0 - 有人可以进一步解释这个 C# 代码吗

> ID：15435895
> 
> 赞同：0
> 
> 时间：2013-03-15T15:14:17.227
> 
> 标签：c#-4.0, lambda, predicatebuilder

我正在使用来自[http://www.albahari.com/nutshell/predicatebuilder.aspx的 PredicateBuilder 类](http://www.albahari.com/nutshell/predicatebuilder.aspx)

```
public static Expression<Func<T, bool>> Or<T> (this Expression<Func<T, bool>> expr1,
                                                      Expression<Func<T, bool>> expr2)
  {
    var invokedExpr = Expression.Invoke (expr2, expr1.Parameters.Cast<Expression> ());
    return Expression.Lambda<Func<T, bool>>
          (Expression.OrElse (expr1.Body, invokedExpr), expr1.Parameters);
  } 
```

此扩展方法使用 OR 运算符链接谓词。在页面上，解释说

*我们首先使用第一个表达式的参数调用第二个表达式。Invoke 表达式使用给定的表达式作为参数调用另一个 lambda 表达式。我们可以从第一个表达式的主体和第二个表达式的调用版本创建条件表达式。最后一步是将其包装在一个新的 lambda 表达式中。*

* * *

所以如果例如我有

```
Predicate<Book> p1 = b => b.Title.Contains("economy");
Predicate<Book> p2 = b=>b.PublicationYear>2001;
Predicate chain = p1.And(p2); 
```

我不太明白解释。有人可以解释一下上面扩展方法的代码是如何工作的吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:42:32.133

让我们像这样重写方法体：

```
return Expression.Lambda<Func<T, bool>>(
    Expression.OrElse(
        expr1.Body,
        Expression.Invoke(expr2, expr1.Parameters.Cast<Expression>())
    ),
    expr1.Parameters); 
```

我们还应该记住，`expr1`您现有的表达式采用 a`T`并返回 a `bool`。此外，虽然我们正在使用的表达式树实际上并没有*做*任何事情（它们*代表*了一些东西），但我以后将使用“do”，因为它更容易阅读。从技术上讲，要使表达式树实际执行某些操作，您必须先对其进行[编译](http://msdn.microsoft.com/en-us/library/bb356928.aspx)，然后再调用生成的委托。

好的，那么我们这里有什么？这是一个 lambda 表达式，它接受任何参数`expr1`（见最后一行），根据[文档](http://msdn.microsoft.com/en-us/library/bb353063.aspx)，它的主体是

> a`BinaryExpression`表示条件 OR 运算，仅当第一个操作数的计算结果为 false 时才计算第二个操作数。

第一个操作数是`expr1.Body`，这意味着结果函数（实际上不是函数，请参见上面的注释）评估`expr1`。如果结果是当场`true`返回。`true`否则，它调用`expr2`与传递给的参数相同的参数`expr1`（这意味着单个`T`参数）并返回结果。

# c# - 在 asp.net mvc4 中类顶部的 InitializeSimpleMembership 注释的目的

> ID：15435898
> 
> 赞同：3
> 
> 时间：2013-03-15T15:14:42.160
> 
> 标签：c#, asp.net, .net, asp.net-mvc

我在网上搜索过，但没有找到关于其真正目的的明确答案。

我认为这与成员资格和`WebSecurity`属性有关。

有人可以阐明其真正目的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:42:00.593

来自 Rick_Anderson 的博文[InitializeSimpleMembership Attribute and SimpleMembership Exceptions](http://blogs.msdn.com/b/rickandy/archive/2012/08/15/initializesimplemembership-attribute-and-simplemembership-exceptions.aspx)

> InitializeSimpleMembership 属性确保在运行任何与成员资格（登录/注册）相关的功能之前，已创建成员资格数据库。如果数据库尚未创建，代码将自动创建一个。如果简单的成员身份初始化失败，Web 应用程序可以继续运行不需要成员身份的请求。

# java - 从 Red Hat 上的 Weblogic 上的同一应用程序获取 400 个错误请求

> ID：15435899
> 
> 赞同：0
> 
> 时间：2013-03-15T15:14:43.107
> 
> 标签：java, rest, weblogic

我一直在开发一个提供 REST 服务的应用程序。我有一些经过测试的代码，我针对它运行，看看它是否可以正常工作。

针对部署在本地 Weblogic 开发服务器上的应用程序运行它时，它运行良好。

但是，当我将它部署到 Red Hat 机器上的另一个 Weblogic 服务器上时，我收到 400 Bad Request 错误。

这是我用来测试服务的客户端代码：

```
 Client client = Client.create();
    //WebResource webResource = client.resource("http://10.1.1.2:7001/NotificationFramework/rest/notifications/createNotification");
    WebResource webResource = client.resource("http://rhvm:7003/NotificationFramework/rest/notifications/createNotification");

    ClientResponse clientResponse = webResource.type("application/json").post(ClientResponse.class, testJsonObject.toString());
    JSONObject response2 = new JSONObject(clientResponse.getEntity(String.class)); 
    System.out.println(response2); 
```

注释行是我本地机器上的行。

这是我得到的回复：

```
An error occurred: Server returned HTTP response code: 400 for URL: http://rhvm:7003/NotificationFramework/rest/notifications/createNotification 
```

以下是提供 REST 服务的代码摘录：

```
@Path("/notifications")
public class RestServices {     

    @POST
    @Path("/createNotification")
    @Consumes( {MediaType.APPLICATION_JSON} )
    @Produces( {MediaType.APPLICATION_JSON} )
    public static NotificationResponse createNotification(JAXBElement<Notification> n) {
// do some stuff

return notificationResponse;
} 
```

我已经尝试在末尾添加一个额外的 / 。我已经使用 Firefox 的 RESTClient 插件对其进行了测试，并且得到了完全相同的行为。

任何帮助将不胜感激。

提前致谢。

**// 编辑**

我发现这与 JAXBElement 有关。

以下服务有效：

```
@POST
@Path("testRest3")
@Consumes( {MediaType.APPLICATION_JSON} )
@Produces({MediaType.APPLICATION_JSON})
public static NotificationResponse testRest3() {
    logger.info("yo3");

    return new NotificationResponse(101, "yo");
} 
```

但以下没有：

```
@POST
@Path("testRest4")
@Consumes( {MediaType.APPLICATION_JSON} )
@Produces({MediaType.APPLICATION_JSON})
public static NotificationResponse testRest4(JAXBElement<Notification> n) {
    logger.info("yo4");

    return new NotificationResponse(101, "yo");
} 
```

我按照pestrella 的建议检查了Notification 类，发现@XmlRootElement 丢失了。我添加了这个，但这仍然没有解决问题。我不确定它是否应该是@Xml .. 但我是新手。遵循 vogella 的[教程](http://www.vogella.com/articles/REST/article.html)。

这是我的通知类：

```
@XmlRootElement
public class Notification {
    private int applicationId;
    private int notificationId;
    private int priority;
    private String message;
    private String detail;
    private String appUrl;

// methods and stuff

} 
```

这是与 Firefox 的 RESTClient 插件一起提交的正文：

```
{"appUrl":"","message":"my message","notificationId":1110001,"detail":"my detail","priority":3,"applicationId":111} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:04:27.967

这种情况下的`400`响应可以指示在解组主体时出现某种错误`POST`。

使用`@XMLRootElement`就好了。但是，让 JAXB 解组为原始类型可能会遇到问题（取决于您拥有的版本）。

让 JAXB 解组`Notification`对象的最安全方法是使用`Integer`类型而不是原始`int`类型。

```
@XmlRootElement
public class Notification {
    private Integer applicationId;

    /* and the rest... */
} 
```

此外，如果您使用注释，则不需要包装`Notification`对象。尝试删除包装：`JAXBElement``@XmlRootElement``JAXBElement`

```
@POST
@Path("testRest")
@Consumes({MediaType.APPLICATION_JSON})
@Produces({MediaType.APPLICATION_JSON})
public static NotificationResponse testRest(Notification n) {
    logger.info("yo!");
    return new NotificationResponse(101, "yo");
} 
```

* * *

如果问题仍然存在，那么您始终可以使用 a`MessageBodyReader`手动解组请求正文。

对 JSON 请求主体执行此操作的典型方法是实现`MessageBodyReader`和使用您选择的 JSON 解析器，例如 Gson 或 Jackson。

```
@Provider
@Consumes("application/json")
public class CustomJsonReader<T> implements MessageBodyReader<T> {

    @Override
    public boolean isReadable(Class<?> type, Type genericType,
            Annotation[] annotations,MediaType mediaType) {
        return true;
    }

    @Override
    public T readFrom(Class<T> type, Type genericType, Annotation[] annotations,
            MediaType mediaType, MultivaluedMap<String, String> httpHeaders,
            InputStream entityStream) throws IOException, WebApplicationException {

        /* Convert the request body (passed in as InputStream) to a String.
         * Here I'm using apache commons IOUtils to convert the input stream
         */
        StringWriter writer = new StringWriter();
        IOUtils.copy(entityStream, writer, "UTF-8");
        String json = writer.toString();

        /* Use JSON parser to unmarshal the JSON to a complex object */
        return new Gson().fromJson(json, genericType);
    }
} 
```

# haskell - 为什么我的字符回显等待换行符，回显整个字符串而不是 char-for-char

> ID：15435901
> 
> 赞同：0
> 
> 时间：2013-03-15T15:14:45.343
> 
> 标签：haskell

我期望的一小段代码，因为我正在使用 char get/put 方法应该响应每个输入字符，但情况似乎并非如此；而是等待换行符，然后运行整个字符串，这对我来说完全没有意义......

我究竟做错了什么？我如何让它对每个输入字符做出反应？

```
main = repeatUntilExit stdin stdout putChar ""

repeatUntilExit :: Handle -> Handle -> (Char -> IO ()) -> [Char] -> IO ()
repeatUntilExit hIn hOut f "exit\n" = hPutStrLn hOut "bye\n"
repeatUntilExit hIn hOut f x = hGetChar hIn >>= \c -> f c >> repeatUntilExit hIn hOut f (appendToLastFive c)
  where appendToLastFive a = (reverse . (:)a . take 4 . reverse) x 
```

结果是：

```
C:\temp>echo.exe
an entire line of text
an entire line of text
exit
exit
bye

C:\temp> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T15:18:35.647

这是一个[缓冲](http://www.haskell.org/ghc/docs/latest/html/libraries/base-4.6.0.1/System-IO.html#g:12)问题。

```
import System.IO

hSetBuffering stdin NoBuffering 
```

但是，这在 Windows 上不起作用，仍然是[此处](http://hackage.haskell.org/trac/ghc/ticket/2189)指出的未解决问题。

# php - 为什么 Wordpress 循环输出完整的帖子？

> ID：15435905
> 
> 赞同：0
> 
> 时间：2013-03-15T15:14:49.717
> 
> 标签：php, wordpress

以下代码输出帖子标题列表。在此列表下方，它还输出与类别 8 中的标签“test”匹配的每个完整帖子。为什么它会输出完整帖子？我该如何防止呢？

```
$query_str = "cat=8&tag=test";
query_posts($query_str);

while ( have_posts() ) : the_post();
   echo '<div><a href="';
    the_permalink();
    echo '">';
    the_title();
    echo '</a></div>';
endwhile; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:35:58.413

试试这个尺寸，而不是像这样使用`query_posts`错误的使用`WP_Query`

```
$args = array('cat' => 8, 'tag' => 'test');

$the_query = new WP_Query( $args );

while ( $the_query->have_posts() ) :
$the_query->the_post();
echo '<div><a href="'. get_permalink($the_query->post->ID).'"/>' . get_the_title() . '</a></div>';
endwhile;

wp_reset_postdata(); 
```

# c# - 将 DateTime 转换为 US 不好

> ID：15435907
> 
> 赞同：0
> 
> 时间：2013-03-15T15:14:51.623
> 
> 标签：c#, wpf, xaml, datetime, cultureinfo

我在 WPF 中有一个 DateTimePicker。dateTimePicker 给我一个欧洲格式

在我的 DateTimePicker 中，我选择“01/02/2014”（欧洲格式）

我想读取该值，并将其转换为具有美国文化的 shortDateString。

**我已经这样做了：**

```
CultureInfo m_UsCulture = new CultureInfo("en-us");
string str = m_dDate.Date.ToShortDateString().ToString(m_UsCulture); 
```

**str 变量是**：“01/02/2014”而不是“2/1/2014”

ShortDateString 似乎没问题，但不是“ToString(m_UsCulture);”。

我想在一行中做到这一点。你有这个错误的想法吗？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:21:48.087

`ToShortDateString`使用当前文化，因此您不能使用此方法指定您的美国文化（除非您更改当前文化）。我会改用`ToString`美国特有的短日期模式：

```
CultureInfo usCulture = CultureInfo.GetCultureInfo("en-us");
var stringRep = yourDate.ToString(
    usCulture.DateTimeFormat.ShortDatePattern, 
    usCulture); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T15:18:55.080

> dateTimePicker 给我一个欧洲格式

仅当您使用该`Text`属性时，这才是正确的。我建议您使用该[`SelectedDate`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datepicker.selecteddate.aspx)属性，它会为您提供 a`DateTime?`代替 - 而 a*没有*`DateTime`格式......您可以根据需要对其进行格式化。

 *然后要将它们转换为美国短日期格式，您应该同时使用[`ToString`](http://msdn.microsoft.com/en-us/library/8tfzyc64.aspx)并指定`d`（对于短日期格式）*和*文化：

```
string str = m_dDate.Date.ToString("d", m_UsCulture); 
```

您当前的代码正在使用`DateTime.ToShortDateString()`它将使用当前文化，*然后*调用`ToString` **结果字符串**，它不会关心您传递的文化。*

# android - 设置背景图像，使其不调整大小（像素完美）

> ID：15435914
> 
> 赞同：0
> 
> 时间：2013-03-15T15:15:15.797
> 
> 标签：android, android-layout, android-ui

我有一个`Button`带有背景的可绘制对象，`android:layout_width="wrap_content"`并且 `android:layout_height="wrap_content"`. 按钮上没有文字。但是，它的显示大小使得可绘制对象稍微调整大小并且看起来模糊，除非我将宽度和高度设置为可绘制对象的宽度和高度`px`。我怎样才能`wrap_content`工作？或者任何其他不涉及硬编码按钮大小的方式，这样当可绘制的大小发生变化时我不需要进行额外的编辑？

这是我的 XML：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" xmlns:tools="http://schemas.android.com/tools">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:paddingBottom="3dp"
            android:paddingTop="3dp" >

            <Button
                android:id="@+id/btn"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/btn" />

        </RelativeLayout>
    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:37:34.700

使用 ImageButton 而不是常规的 Button。它提供对该属性的访问`android:src`并在那里设置您的图像，而不是作为背景。背景图像始终适合填充，其中“源”属性通过该`android:scaleType`属性控制图像大小。请参阅：http: [//developer.android.com/reference/android/widget/ImageButton.html](http://developer.android.com/reference/android/widget/ImageButton.html)和[http://developer.android.com/reference/android/widget/ImageView.html#attr_android:scaleType](http://developer.android.com/reference/android/widget/ImageView.html#attr_android:scaleType)

请注意，对于您的 ImageButton，您还需要确保`android:background="@null"`，否则您将在源图像后面看到默认按钮图像。

编辑：

这是您的 XML 的更新版本。尽管我使用了我的一张图像，但我在您开始使用的按钮上方添加了一个新按钮。特定的图像很长，而且没有那么高。在常规 Button 中，它会拉伸以填充小部件，从而失去视角。在顶部的新 ImageButton 中，它保持其透视。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" xmlns:tools="http://schemas.android.com/tools">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:paddingBottom="3dp"
            android:paddingTop="3dp" >

            <ImageButton
                android:id="@+id/new_btn"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@null"
                android:scaleType="fitCenter"
                android:src="@drawable/postwall" />

            <Button
                android:id="@+id/btn"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/new_btn"
                android:background="@drawable/postwall" />

        </RelativeLayout>
    </LinearLayout>

</ScrollView> 
```

# java - Java文件读取

> ID：15435919
> 
> 赞同：-1
> 
> 时间：2013-03-15T15:15:27.747
> 
> 标签：java, file, io, readfile

我正在尝试用 Java 读取文件。文件结构如下

```
** <br/>
f=1100<br/>
d=111<br/>
e=1101<br/>
b=101<br/>
c=100<br/>
a=0<br/>
**

11001100110011001100110111011101110111011101110111011101100100100100100100100100100100100
101011011011011011011011011011011011011011111111111111111111111111111111111111111111111110
00000000000000000000000000000000000000000000 
```

它以 ** 开头，然后是一些我只想阅读的内容。又有 ** 和一个空行和更多的数据。我知道如何读取数据，但我无法处理如何读取仅介于 ** 之间的数据

到目前为止，我已经做到了

```
 File toRead=new File("output.txt");
 FileInputStream fis=new FileInputStream(toRead);
 Scanner sc=new Scanner(fis);
 String currentLine;
 sc.delimiter = "**";
 while(sc.hasNext()){

     currentLine=sc.nextLine();
     system.out.println(sc.next());

  }
 fis.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:36:54.190

试试这个 ：

```
File f = new File("output.txt");
    try {
        Scanner s = new Scanner(f);
        String line = "";
        while(s.hasNext()){
            line=s.nextLine();
            if(line.startsWith("**")){
                line=line.replaceAll("[**]", "");
                System.out.println(line);
                while((line=s.nextLine())!=null){  
                    if(!(line.endsWith("**")))
                        System.out.println(line);
                    else if(line.endsWith("**")){
                           line=line.replaceAll("[**]","");
                        System.out.println(line);
                        break;
                    }

                }
            } 
        }
    } catch (Exception ex) {

        System.out.println(ex.getMessage());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:30:04.700

好像你在问如何解析。解析的基础是下推自动机 (PDA)。要做一个真正通用的解析器，你需要理解它。过去，lexx 和 yak 就是用来做这个的，它们为解析器生成 C 代码。java可能有类似的东西。

如果做不到这一切，您只需对解析器进行硬编码：

```
while(sc.hasNext()){
 currentLine=sc.nextLine();
 system.out.println(sc.next());  //Great for debugging
 if(currentLine.equals("**") {   //use a constant instead
   newRecord = true;
   continue;
 } else if(currentLine.equals(???) {
   //set some values
 }  //etc 
```

}

您的定界符代表状态转换，您需要在代码中跟踪它……这当然是 PDA 的地址。如果您了解状态、标记和转换，就会容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:52:15.020

在您的情况下，唯一的问题是您想使用分隔符但没有正确放入。

```
File toRead=new File("output.txt");
FileInputStream fis=new FileInputStream(toRead);
Scanner sc=new Scanner(fis);
String currentLine;
sc.useDelimiter("\\*\\*");
while(sc.hasNext()){

 currentLine=sc.nextLine();
 System.out.println(sc.next());

 }
fis.close(); 
```

您必须使用正则表达式调用 useDelimiter 并且需要转义 *. 所以你的正则表达式是`\*\*`（在 * 之前有一个 \ 来逃避它）

因为 useDelimiter 接受 String 你必须转义 \ 所以`\\ -> \`和`\\*\\* -> \*\*`

# ios - 带有完成块的 NSOperation

> ID：15435920
> 
> 赞同：1
> 
> 时间：2013-03-15T15:15:28.737
> 
> 标签：ios, optimization, objective-c-blocks, nsoperation, nsoperationqueue

我有一些图像处理需要很多时间和资源，所以我使用[`NSOperation`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)++[`NSOperatioQueue`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/occ/cl/NSOperationQueue)委托进行回调。和所有的工作。

现在我想使用块，因为它非常优雅且易于在 tableView 中使用。

我需要做的就是[`AFJSONRequestOperation`](https://github.com/AFNetworking/AFNetworking)例如：

```
NSURL *url = [NSURL URLWithString:@"url"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
NSLog(@"App.net Global Stream: %@", JSON);
 } failure:nil];
[operation start]; 
```

在这个例子中我没有看到任何 operationQueue ！我该怎么做？

```
 [ImageManagerOperation modifyImage:(UIImage*)image completitionBlock:(void (^)(UIImage *modifiedImage))complete]; 
```

其中 ImageManagerOperation 是一个 NSOperation。

我知道我可以设置一个完成块，但我仍然需要将操作添加到队列中。

我想最小化我的代码中的行号（如果可能的话:)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T14:02:22.140

通常，an 中的代码`NSOperation`是同步的。`NSOperationQueue`提供在后台运行代码所需的线程。因此，您将操作添加到队列中，然后队列`start`在后台线程上调用您的操作。

`AFJSONRequestOperation``NSOperation`是被调用的一种特殊类型`concurrent`，这意味着该操作已经在内部提供了它自己的后台线程。在某些情况下，您可以在队列之外调用操作的`start`方法。`concurrent`因为该操作已经提供了它自己的后台线程，所以它仍然会在后台运行。在这种情况下`start`，可能会直接调用以最小化示例中显示的代码。

通常，您仍然会`concurrent`向 an 添加操作，`NSOperationQueue`因为您想利用队列提供的其他功能，例如管理`dependancies`和`maxConcurrentOperationCount`.

因此，只需创建自己`NSOperationQueue`并添加您的操作即可。您不需要调用`start`队列会为您执行此操作。

# hibernate - JPA 原生查询结果返回重复的子对象

> ID：15435923
> 
> 赞同：4
> 
> 时间：2013-03-15T15:15:35.420
> 
> 标签：hibernate, jpa, hibernate-onetomany, nativequery, sqlresultsetmapping

我的数据库中有一个父表和一个子表，并且在它们对应的实体类中有一个 OneToMany 映射。子表有一个外键 parent_id。我将 JPA 2 与 Hibernate 和 MySQL DB 一起使用。

我希望使用 SQL 本机查询基于某些父属性检索所有父对象及其相应的子对象。

为此，我有一个 SqlResultSetMapping 如下：

```
@SqlResultSetMapping(name="ParentsWithChildren",
       entities={ @EntityResult(entityClass = Parent.class),
                  @EntityResult(entityClass = Child.class)}) 
```

我查询如下：

```
String queryString = "select p.*, c.* from parent p left join child c on p.id = c.parent_id where p.property = <some_property>";
Query query = entityManager.createNativeQuery(queryString, "ParentsWithChildren");
List<Object[]> resultList =  query.getResultList(); 
```

在遍历结果列表时，我发现子表中不同行的重复子对象，如输出所示：

```
for(Object obj[]: resultList){
      Parent parent = (Parent) obj[0];
      Child child = (Child) obj[1];
      System.out.println("Parent: " + parent + ", Child: " + child);
} 
```

输出：

```
Parent: Parent@3966c600, Child: Child@1
Parent: Parent@3966c600, Child: Child@1
Parent: Parent@3966c600, Child: Child@1
Parent: Parent@3966c600, Child: Child@1
Parent: Parent@3966c600, Child: Child@1
Parent: Parent@3966c600, Child: Child@1
Parent: Parent@3966c600, Child: Child@1
Parent: Parent@3966c600, Child: Child@1 
```

我不明白这是为什么。有什么方法（映射）可以通过本机查询获取所有（不同的）子对象。使用列名获取可以工作并且不需要相应的对象映射，但我想获取子表的所有列，因此更喜欢用户 c.* 在 sql 查询中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:42:30.887

我会使用普通的 HQL 查询而不是本机查询。在 HQL 中，您可以使用 fetch join：

```
"select p.*, c.* from parent p left join fetch child c on p.id = c.parent_id where p.property = <some_property>" 
```

使用 fetch 连接集合可以使用单个选择与它们的父对象一起初始化。

# ssl - 尝试使用刀创建 EC2 服务器时出现 SSLError

> ID：15435925
> 
> 赞同：0
> 
> 时间：2013-03-15T15:15:38.327
> 
> 标签：ssl, amazon-ec2, openssl, chef-infra, knife

我正在尝试使用刀创建和配置一个新的 EC2 实例，但一直遇到 SSL 错误：

```
$bundle exec knife ec2 server create
ERROR: Excon::Errors::SocketError: hostname "ec2.us-east-1b.amazonaws.com" does not match the server certificate (OpenSSL::SSL::SSLError) 
```

我正在使用 ruby​​ 2.0.0p0 从 mac (10.7) 运行它：

```
$ruby -v
ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-darwin11.4.2] 
```

我相当确定我正确编译了带有 openssl 支持的 ruby​​。`require 'openssl'`从 irb运行返回 true。我正在使用通过自制软件安装的 OpenSSL 1.0.1e。

我也试过用 ruby​​ 1.9.3-p194 跑刀。这具有相同的结果，但有用的错误消息略少：“错误：Excon::Errors::SocketError: hostname does not match the server certificate (OpenSSL::SSL::SSLError)”。这种差异是此拉取请求的结果，它改进了错误消息：[https](https://github.com/ruby/ruby/pull/122) ://github.com/ruby/ruby/pull/122 。

curl 的以下输出可能是相关的：

```
$curl -v https://ec2.us-east-1b.amazonaws.com
* About to connect() to ec2.us-east-1b.amazonaws.com port 443 (#0)
*   Trying 67.215.65.132... connected
* Connected to ec2.us-east-1b.amazonaws.com (67.215.65.132) port 443 (#0)
* SSLv3, TLS handshake, Client hello (1):
* SSLv3, TLS handshake, Server hello (2):
* SSLv3, TLS handshake, CERT (11):
* SSLv3, TLS handshake, Server finished (14):
* SSLv3, TLS handshake, Client key exchange (16):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSL connection using AES256-SHA
* Server certificate:
*    subject: serialNumber=UoFmxu6ta5ecJiIs4su2w-q-u8rxJ/d3; OU=GT55236522; OU=See www.rapidssl.com/resources/cps (c)12; OU=Domain Control Validated - RapidSSL(R); CN=*.opendns.com
*    start date: 2012-08-23 10:11:50 GMT
*    expire date: 2014-09-25 12:42:00 GMT
*    subjectAltName does not match ec2.us-east-1b.amazonaws.com
* Closing connection #0
* SSLv3, TLS alert, Client hello (1):
* SSL peer certificate or SSH remote key was not OK
curl: (51) SSL peer certificate or SSH remote key was not OK 
```

为了用刀成功创建 EC2 实例，我还需要配置其他东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T21:18:44.507

在我的knife.rb 配置文件中，我有这一行：

```
knife[:region] = 'us-east-1b' 
```

这在过去的某个时候有效，但正确的当前设置是：

```
knife[:region] = 'us-east-1' 
```

删除“b”可解决 SSL 主机名错误：

```
$curl -v https://ec2.us-east-1.amazonaws.com
* About to connect() to ec2.us-east-1.amazonaws.com port 443 (#0)
*   Trying 205.251.242.7... connected
* Connected to ec2.us-east-1.amazonaws.com (205.251.242.7) port 443 (#0)
* SSLv3, TLS handshake, Client hello (1):
* SSLv3, TLS handshake, Server hello (2):
* SSLv3, TLS handshake, CERT (11):
* SSLv3, TLS handshake, Server finished (14):
* SSLv3, TLS handshake, Client key exchange (16):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSL connection using RC4-MD5
* Server certificate:
*    subject: C=US; ST=Washington; L=Seattle; O=Amazon.com Inc.; CN=ec2.us-east-1.amazonaws.com
*    start date: 2010-10-08 00:00:00 GMT
*    expire date: 2013-10-07 23:59:59 GMT
*    subjectAltName: ec2.us-east-1.amazonaws.com matched
*    issuer: C=US; O=VeriSign, Inc.; OU=VeriSign Trust Network; OU=Terms of use at https://www.verisign.com/rpa (c)09; CN=VeriSign Class 3 Secure Server CA - G2
*    SSL certificate verify ok.
> GET / HTTP/1.1
> User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5
> Host: ec2.us-east-1.amazonaws.com
> Accept: */*
>
< HTTP/1.1 301 Moved Permanently
< Location: http://aws.amazon.com/ec2
< Content-Length: 0
< Date: Sat, 16 Mar 2013 21:15:51 GMT
< Server: AmazonEC2
<
* Connection #0 to host ec2.us-east-1.amazonaws.com left intact
* Closing connection #0
* SSLv3, TLS alert, Client hello (1): 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T05:26:37.743

当你在你的 mac book 上安装 chef-client 时，它会自动安装刀和依赖库，你不必手动安装。您不必使用 bundle exec 运行，只需键入knife ec2 server create，您将获得以下输出

```
** EC2 COMMANDS **
knife ec2 server list (options)
knife ec2 server delete SERVER [SERVER] (options)
knife ec2 server create (options)
knife ec2 instance data (options)
knife ec2 flavor list (options) 
```

如果你得到这个输出，那么你的刀工作正常。并确保您的knife.rb 配置正确，如果您有任何问题，请告诉我。

# php - MSSQL+ODBC+PHP = 结果中有 0 行

> ID：15435927
> 
> 赞同：1
> 
> 时间：2013-03-15T15:15:47.637
> 
> 标签：php, sql-server, odbc, pivot, freetds

我通过 php + linux ODBC 使用远程 MSSQL 库。`SET`一切都很好，但今天我用+编写查询`PIVOT`并得到错误：

```
[unixODBC][FreeTDS][SQL Server]SELECT failed because the following SET options have 
incorrect settings: 'ANSI_NULLS, QUOTED_IDENTIFIER, CONCAT_NULL_YIELDS_NULL,
ANSI_WARNINGS, ANSI_PADDING'. Verify that SET options are correct for use with indexed views 
and/or indexes on computed columns and/or filtered indexes and/or query notifications and/or 
XML data type methods and/or spatial index operations. 
```

我尝试编写 SET`ANSI_NULLS ON`等，但它不起作用，结果中有 0 个字段。通过 MSSQL 工作室直接在服务器上执行的相同查询完美运行。知道哪里有问题吗？谢谢。

**更新：**
freetds.conf

```
[syserver]
host =192.168.1.200
port = 1433
tds version = 7.0
AnsiNPW=YES
QuotedID=YES 
```

odbc.ini

```
[sy_odbc]
Driver = FreeTDS
Description  = ODBC connection via FreeTDS
Trace = No
Servername = syserver
Database = Insy 
```

odbcinst.ini

```
[FreeTDS]
Description = TDS driver (Sybase/MS SQL)
Driver = /usr/lib/odbc/libtdsodbc.so
Setup = /usr/lib/odbc/libtdsS.so
CPTimeout =
CPReuse =
FileUsage = 1 
```

在 I 之前`got tds version=6.0`，以及将其更改为 7.0 之后，所有错误`ANSI_NULLS`都消失了，但结果中仍然有 0 行。`AnsiNPW=YES`不`QuotedID=YES`为我做任何事。如果尝试在简单查询的结果中将版本更改为 8.0，我有`??????????`。`TDS_version=7.0`在`odbc.ini`也无所作为。

我的查询[在这里](http://www.sqlfiddle.com/#!3/88499/2)。我的连接字符串是：`$conn=odbc_connect('sy_odbc','t','t');`

**更新 2：**当我更改或
时，我的一些 php 页面停止工作，所以我将其返回到 6.0。 您建议的连接字符串对我不起作用。完全没有。（我用我的一年多了，在那个问题之前很好）[这](http://pastebin.com/gNsbBWjq)是6.0版本的问题查询的错误日志（这里我们有等警告）[这](http://pastebin.com/M4eSQKgd)是7.0版本的问题查询的错误日志（没有警告，但结果为 0 行） `TDS_version to 7.0``7.2`

`ANSI_NULLS`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:36:25.087

我能想到的还有两件事 Sergii：

1）您的连接字符串。[手册](http://php.net/manual/en/function.odbc-connect.php)说您的连接字符串应如下所示：

```
$conn = odbc_connect('Driver={sy_odbc};Server=192.168.1.200;Database=Insy', $username, $password); 
```

所以我会先尝试一下，看看它是否有帮助。

2) 任何时候您遇到 ODBC 连接问题时都应打开日志记录，以便捕获错误消息。为此，将以下行添加到您的 /etc/odbcinst.ini 文件中：

```
[ODBC]
Trace     = yes
TraceFile = /tmp/odbc.log 
```

如果您的查询仍然不起作用，请编辑您的问题并添加 odbc.log 文件的输出（假设其中有错误消息）。

# java - 如何从 ArrayList 收集 SQL 请求

> ID：15435928
> 
> 赞同：0
> 
> 时间：2013-03-15T15:15:53.567
> 
> 标签：java, sql

我有一个这样的arrayList：

```
 List<String> list = new  ArrayList<String>();
    list.add("A");
    list.add("B");
    list.add("C"); 
```

我想在这样的 SQL 查询字符串中插入这些信息：

```
AND Column_X in ('A' ,'B' , 'C') 
```

你能帮助我吗 ？

编辑：

谢谢:)我找到了其他解决方案，这就是我想要的：

```
Iterator<String> iterator = list.iterator();
    String sqlStr= "";
    while (iterator.hasNext()){
        sqlStr+= "'"+iterator.next()+"'";
        if(iterator.hasNext()) sqlStr+= ',';
    }
    System.out.println(sqlStr); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:36:41.017

您可以使用 StringBuilder - 自己迭代列表，构造一个“，”分隔的字符串。或者使用一个有用的 API，比如`StringUtils.join()`已经这样做的 apache commons 项目。请记住，参数需要正确转义以避免语法错误，或者更糟糕的 SQL 注入攻击

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:45:21.677

你可以写一个这样的实用方法：

```
public static String getCommaSeparatedTexts(List<String> texts){
   final StringBuilder commaSeparatedTextBuilder = new StringBuilder("'");
   for (final String text : texts.values()) {
      commaSeparatedTextBuilder.append(text);
      commaSeparatedTextBuilder.append(',');
   }

   final int length = commaSeparatedTextBuilder.length();
   commaSeparatedTextBuilder.setLength(length - 1);

   return commaSeparatedTextBuilder.toString();
} 
```

But be careful, when the returned String is empty, your SQL statement will fail.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:22:48.670

覆盖`toString`arrayList 的方法并以您期望的形式创建一个字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T15:36:34.587

试试这个：

```
Connection c = ...
Statement stmt = c.createStatement();
String sql = "SELECT * FROM test WHERE Column_X IN ('";
for(int i=0; i < list.size(); i++) {
   if(i > 0) {
      sql += ",'"
   }
   sql += list.get(i) + "'";
}
sql += ")";
ResultSet r = stmt.executeQuery(sql); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T15:36:51.230

`list.toString()`给你`[A, B, C]`。你必须忽略它`[`，`]`并从中隔开。

`AND Column_X in ("'"+(list.toString().substring(1,list.toString().length()-1)).toString().replaceAll(",", "','").replaceAll(" ","")+"'")`

# javascript - jquery Mobile弹出对话框在选项上可关闭不起作用

> ID：15435934
> 
> 赞同：3
> 
> 时间：2013-03-15T15:16:02.760
> 
> 标签：javascript, jquery-mobile

jquerymobile 1.30 + jquery 1.91

```
//dismissible doesn't apply
 $("#popupDialogCategoriesButton").click(function (e) {
                $("#popupDialogCategories").popup("open", { dismissible: false })
            });

//dismissible does apply , set it after open
     $("#popupDialogCategoriesButton").click(function (e) {
            $("#popupDialogCategories").popup('open');
            $("#popupDialogCategories").popup("option", "dismissible", false);
            }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:44:54.153

**更新**

为了同时打开`popup`和更改 的值，`dismissible`在标记中添加`data-dismissible=""`无值/空白`popup`，然后您可以将其更改为`true`或`false`。

标记

```
<div data-role="popup" id="popupBasic" data-dismissible="">
 <p>To close me, hit the button below.
 <p> <a href="#" data-role="button" data-rel="back">close</a>
</div> 
```

JQM

```
$(document).on('click', '#openpopup', function () {
 $('#popupBasic').popup('open', { dismissible: false });
}); 
```

你有两个选择：

**1）定义标记`data-dismissible`中的值。`popup`**

标记

```
<div data-role="popup" id="popupBasic" data-dismissible="false">
 <p>To close me, hit the button below.<p>
 <a href="#" data-role="button" data-rel="back">close</a>
</div>

<a href="#" data-role="button" id="openpopup">click me</a> // open it 
```

JQM

```
$(document).on('click', '#openpopup', function() {
 $('#popupBasic').popup("open");
}); 
```

**`dismissible`2）在打开它之前/之后更改值。**

标记

```
<div data-role="popup" id="popupBasic">
 <p>To close me, hit the button below.<p>
 <a href="#" data-role="button" data-rel="back">close</a>
</div>

<a href="#" data-role="button" id="openpopup">click me</a> // open it 
```

JQM

```
$(document).on('click', '#openpopup', function() {
 $('#popupBasic').popup("open");
 $('#popupBasic').popup({ dismissible: false });
}); 
```

[实时示例 - 更新](http://jsfiddle.net/Palestinian/ZuV7p/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T06:28:46.113

我遇到了同样的问题，我的解决方案是在下面列出所有选项

```
$("#popupDialog").popup({history: false});
$("#popupDialog").popup({corners: false});
$("#popupDialog").popup({shadow: false});
$("#popupDialog").popup("open"); 
```

它不好看，但运行良好。

# css - 在页眉和页脚之间拉伸 div

> ID：15435936
> 
> 赞同：2
> 
> 时间：2013-03-15T15:16:16.340
> 
> 标签：css

我遇到的任务看起来很标准：我有一个固定高度的容器，`div`里面有 3 。我希望第二个`div`在顶部和底部之间拉伸`div`。当第二个内容`div`溢出时-我想显示滚动条。

我知道如何使用`absolute`定位来完成这项任务。一个问题是：我可以使用`table`on `div`s 吗？

附加要求：如果可能，我想避免将标题的高度设置为固定。

我试图在我的小提琴中对其进行编码，但是，如您所见，[我失败了](http://jsfiddle.net/USZXa/)。

**CSS：**

```
.container {
    height: 500px;
    background-color: gainsboro;
}

.table {
    display: table;
    height: 100%;
}

.table > div {
    display: table-row;
}

.table > div > div {
    display: table-cell;
    vertical-align: middle;
    border: 1px solid black;
    overflow: scroll;
}

.center > div {
    height: 100%;
}

.content {
    height: 700px;
} 
```

**HTML：**

```
<div class="container">
    <div class="table">
     <div>
         <div>XXX</div>
     </div>
     <div class="center">
         <div>
             <div class="content"></div>
         </div>
     </div>
     <div>
         <div>YYY</div>
     </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:41:09.127

您的方式是正确的，只需进行一些更改（请参阅此[Fiddle](http://jsfiddle.net/USZXa/40/)）：

```
html, body, .container, .table {
    margin: 0;
    height: 100%;
}

#header,#footer {
    height: 1px;
} 
```

这应该有效，因为如果内容需要，表格单元格的高度会增加。

只是一个提示：你可以改进整个事情，例如我会使用 HTML 5 和`<header/>`and`<footer/>`元素。但这不是你问题的一部分。无论如何，这是您[小提琴](http://jsfiddle.net/USZXa/69/)的另一个更新：

```
 <div>
      <header>
          <div>XXX</div>
      </header>
      <main>
          <div>
              <div class="content"></div>
          </div>
      </main>
      <footer>
          <div>YYY</div>
      </footer>
 </div> 
```

使用 CSS：

```
html, body, body > div {
    margin: 0;
    height: 100%;
}

body {
    background-color: gainsboro;
}

body > div {
    display: table;
    width: 100%;
}

body > div > * {
    display: table-row;
}

body > div > * > div {
    display: table-cell;
    vertical-align: middle;
    border: 1px solid black;
}

header, footer {
    height: 1px;
} 
```

`main`如果您想知道的话，它对 HTML 5 来说是非常新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:58:06.670

这是一种可能的解决方案：

```
<div class="container">
    <div class="header">
        <div>Top Header Block</div>
    </div>
    <div class="center">
        <div class="content">
            <p>Lorem ipsum ...</p>
            <p>Lorem ipsum ...</p>
        </div><!-- .content -->
    </div><!-- .center -->
    <div class="footer">
        <div>Bottom Footer Block</div>
    </div>
</div> 
```

和CSS：

```
.container {
    height: 200px;
}
.header, .footer {
    background-color: gainsboro;
}
.center {
    height: inherit;
}
.content {
    background-color: #F0F0F0;
    height: inherit;
    overflow: auto;
} 
```

由于您正在固定容器的高度，因此您继承了 the`.center`和`.content` `<div>`'s 中的高度。

如果调整容器高度，中心 div 会扩展，但页眉和页脚 div 保持相同的高度。

在内容 div 上使用`overflow`以允许滚动。

小提琴参考：http: [//jsfiddle.net/audetwebdesign/nae5z/](http://jsfiddle.net/audetwebdesign/nae5z/)

# c# - Selenium WebDriver 在 TFS 构建过程中测试失败

> ID：15435939
> 
> 赞同：2
> 
> 时间：2013-03-15T15:16:19.170
> 
> 标签：c#, selenium, tfs, build-process

我使用 ChromeDriver 进行 Web 应用程序测试。单元测试在我的机器上本地工作正常。但是当我在构建服务器上开始自动测试运行时，它会失败并出现异常`new ChromeDriver()`：

> System.ComponentModel.Win32Exception：系统找不到指定的文件。

所有必需的二进制文件都存在于`TestResults\Out`文件夹中。带有 ChromeDriver 的示例控制台程序在构建机器上运行良好。我试图以交互（控制台）模式开始构建服务，但它也没有帮助。

有什么建议么？

# javascript - 如何在javascript中模拟点击@Html.ActionLink？

> ID：15435943
> 
> 赞同：1
> 
> 时间：2013-03-15T15:16:32.820
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-4

我有这部分观点：

```
@foreach (var item in Model.listeStations){
   <tbody>
       <tr id="ligneRecherche">
           <td id="tdId">
               @Html.DisplayFor(modelItem => item.nom)
           </td>
           <td id="tdData">
               @Html.DisplayFor(modelItem =>item.adr)
           </td>
           <td id="tdLangue">
               @Html.DisplayFor(modelItem => item.cp)
           </td>
           <td id="tdType">
               @Html.DisplayFor(modelItem => item.ville)
           </td>
           <td id="selection">
               @Html.ActionLink("Choisir", "DetailsStation", new { id=item.id })
           </td>
       </tr> 
   </tbody>
}
</table> 
```

如果一个用户在表格的某一行上单击任意位置，它就会执行 actionLink。可以在 JS 或其他中做到这一点吗？提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:21:51.647

添加`class`到您的`tr`标签以使用 jquery 选择它。

```
<tr id="ligneRecherche" class="row"> 
```

并使用 jquery 选择单击的行

```
$(".row").click(function(){
    var url = $('td a', this).attr('href');
    window.location = url;
}); 
```

而且您的视图应如下所示：（将`tbody`标签删除到 out of `foreach`）

```
<tbody>
@foreach (var item in Model.listeStations){
   <tr id="ligneRecherche" class="row">
       <td id="tdId">
           @Html.DisplayFor(modelItem => item.nom)
       </td>
       <td id="tdData">
           @Html.DisplayFor(modelItem =>item.adr)
       </td>
       <td id="tdLangue">
           @Html.DisplayFor(modelItem => item.cp)
       </td>
       <td id="tdType">
           @Html.DisplayFor(modelItem => item.ville)
       </td>
       <td id="selection">
           @Html.ActionLink("Choisir", "DetailsStation", new { id=item.id })
       </td>
   </tr> 
}
</tbody> 
```

还有一个信息：`id`of`tr`和`td`标签是没有意义的。因为它们是重复的元素。

# asp.net - rdlc 报告 - '没有为数据源提供数据源实例' 错误

> ID：15435944
> 
> 赞同：2
> 
> 时间：2013-03-15T15:16:41.003
> 
> 标签：asp.net, visual-studio-2012, reporting, rdlc

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T15:22:30.473

你必须意识到最后一步是谁`defining of datasource`

链接：[http ://ruchitech.blogspot.fr/2012/07/how-to-create-rdlc-report-in-c.html](http://ruchitech.blogspot.fr/2012/07/how-to-create-rdlc-report-in-c.html)

注意：请参阅选择数据源

![在此处输入图像描述](../Images/c5fd25616454bbb61a32a08b216455a1.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T17:45:13.710

最后我找到了原因，它是一个不对应的 Tablix 数据集名称属性。我不得不将它从 dataSet1 重命名为 dsProducts。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-15T05:13:43.757

```
// ReportViewer1.LocalReport.DataSources.Clear();
ReportViewer1.LocalReport.DataSources.Add(Student); 
```

在页面加载中，确保将上述 clear 函数`ReportViewer`作为注释或删除以避免`Data source`未提供实例错误。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-08-31T21:59:00.043

Visual Studio 13 提供了一个优雅的解决方案来处理 sql server 存储过程中的参数：

ReportViewer 使用 ReportViewer 的 Web 版本创建 Web 报表的步骤

1.  使用网站创建 Web 表单/添加新项目

2.  在网页上拖动 ReportViewer

3.  选择创建新报告 (rdlc)
4.  选择报表的数据源（保存前一定要重命名）
5.  使用报告生成器在报告中放置字段。
6.  保存报告，然后将 report1.rdlc 的默认值重命名为所需的名称
7.  将报告和网页移动到所需目录
8.  转到网页报告查看器任务并选择报告。
9.  然后选择数据源（可以在数据源中添加报表的参数）

选择新建数据源，否则报告会报错：

尚未为数据源提供数据源实例'</p>

10.  将出现一个显示各种数据源的新屏幕。一般选择SQL数据

11.  选择指定自定义 SLQ 语句，然后点击 NEXT

12.  选择存储过程或选择 SLQ 语句并使用查询生成器。选择存储过程将允许用户为存储过程的参数选择控件。然后，向导将正确配置 Web 代码，从而无需输入 vb 代码，如下所示：

> ```
> Protected Sub ReportViewer1_Load(sender As Object, e As EventArgs) Handles ReportViewer1.Load
>     Dim Parm As New ReportParameter("BillingReportParm1", Profile.TherapistNo)
>     ReportViewer1.LocalReport.SetParameters(Parm)
>     ReportViewer1.LocalReport.Refresh()
> End Sub 
> ```

13.  完成的 HTML 代码示例如下所示：

```
<asp:Content ID="Content2" ContentPlaceHolderID="cpMC" Runat="Server">
	<rsweb:ReportViewer ID="ReportViewer1" runat="server" Font-Names="Verdana" Font-Size="8pt" WaitMessageFont-Names="Verdana" WaitMessageFont-Size="14pt" Height="383px" Width="721px">
		<LocalReport ReportPath="Reports\BillingPendingRpt.rdlc">
			<DataSources>
				<rsweb:ReportDataSource DataSourceId="SqlDataPendRpt" Name="BillingPendingRptDataSet" />
			</DataSources>
		</LocalReport>
	</rsweb:ReportViewer>
	<asp:SqlDataSource ID="SqlDataPendRpt" runat="server" ConnectionString="<%$ ConnectionStrings:MMBDataConnectionString %>" SelectCommand="sp_WorkHour_Rpt" SelectCommandType="StoredProcedure">
		<SelectParameters>
			<asp:ProfileParameter Name="Therapist" PropertyName="TherapistNo" Type="String" />
		</SelectParameters>
	</asp:SqlDataSource>
</asp:Content>
```

# jquery - jQuery - 创建元素并附加到所有链接，除了一些

> ID：15435946
> 
> 赞同：3
> 
> 时间：2013-03-15T15:16:49.827
> 
> 标签：jquery

我正在构建的页面样式是每个链接后面都有一个小三角形。因此，我构建了一个小脚本，在每个链接之后附加一个 <span> 。

我正在创建一个新的跨度，其中包含一个类并将其附加到所有锚点，但我不希望它在导航锚点中对其进行操作。

当然，我可以为那些我不想要的隐藏附加的 spansin css，但我当然可以调整我所拥有的：

```
$('<span/>',{
    'class': 'im'
    }).appendTo('a').not(".nav ul > li > a"); 
```

not() 部分不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T15:19:04.387

它应该是

```
$('<span/>',{
    'class': 'im'
    }).appendTo($('a').not(".nav ul > li > a")); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/QX2wD/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:17:58.543

该`not`部分应在`'a'`选择器中：

```
... 
.appendTo('a:not(.nav ul > li > a)') 
```

我建议您`a`以某种方式标记您的锚点，以简化选择器的工作，例如：

1.  在bar中为s添加一个`navLink`类，`a``.nav`
2.  然后您的选择器变为`'a:not(.navLink)'`，并且选择节点将涉及更少的 jQuery 工作

# php - 打印 PHP 值或单词而不是其相应的递增数字 ID

> ID：15435949
> 
> 赞同：0
> 
> 时间：2013-03-15T15:17:03.133
> 
> 标签：php, wordpress

$page_id++ 表示 wordpress 网站中从 0 到 5 的页面顺序 ID 并递增。

然后我包含一些 HTML，如下所示：

```
<div class="page_title <?php echo page_item;?>" id="about"><?php the_title()?></div> 
```

第一个 div 类的输出是“page_title 0”。

我想知道的是我是否可以用单词或类替换数字。我试过创建一个数组：

```
<?php $page_id = array (0 === 'one', 1 === 'two',2 === 'three',3 ==='four',4 ==='five', 5=== 'six')?> 
```

但它只是返回：“page_title Array”

编辑：我也尝试在数组中用 => 替换 ===。

我知道我需要在这里阅读我的语法（甚至逻辑！），但任何帮助/解释或线索都将一如既往地受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:27:57.937

看起来您实际上并没有引用数组中的项目，而只是引用了数组本身。您是否使用 foreach 循环将这些打印出来？

```
<?php foreach($page_id as $page_item):?>

   <div class="page_title <?php echo $page_item;?>" id="about"><?php the_title()?></div>

<?php endforeach;?> 
```

或者手动进行：

```
 <div class="page_title <?php echo $page_id[0];?>" id="about"><?php the_title()?></div> 
```

所以你会这样做，引用键 0 - 5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:23:26.700

Try something more like:

```
<?php

    $pageIDs = array(0 => 'one', 1 => 'two'); // and so on... 
    $page_id = $pageIds[$page_id ];

    // ... Other wordpressy stuff... 
```

Essentially, the idea being you grab the value from an array, rather than passing an array as the variable, when you get $page_id in this case, it'll be the string.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:22:56.073

您可以而且实际上*应该*使用数字以外的东西作为类名。我大约 78% 确定一个类名应该包含至少一个非数字字符，并且应该以字母开头。（这实际上是 ID 的规则，似乎。我没有为类找到一个硬性规则，但是嗯。）

至于如何将数字映射到单词，您应该在数组中查找 id 而不是回显整个内容。

```
<?php $page_classes = array(...); ?>
...
<div class="page_title <?= $page_classes[$page_id] ?>" id="about">
  <?php the_title()?>
</div> 
```

（注意，如果您在希望打印多个这样的 div 的情况下执行此操作，您应该认真考虑丢失`id`属性或使其等于您要打印的类名或......某事。 ID 应该是唯一的。）

# mysql - Grails hibernate/Searchable 通过给出以下异常来停止服务器启动

> ID：15435950
> 
> 赞同：6
> 
> 时间：2013-03-15T15:17:13.960
> 
> 标签：mysql, hibernate, grails, compass-lucene, grails-searchable

我们在我们的 Grails 应用程序中使用 Grails 2.1.1 和 Searchable 插件 0.6.4，并在一些域上实现了可搜索，如下所示，所有映射。

```
class User {
      .....
      static hasMany = [userEducations : UserEducations , userWorkings : UserWorkings ]
      ......
      static searchable = {
        content: spellCheck 'include'
        all termVector: "yes"
        userEducations  component: true
        userWorkings component: true
      }
      ......
}

class UserEducations {
    .....
    Schools schools 
    .....
    static belongsTo = [user : User ]
    ......
    static searchable = {
        content: spellCheck 'include'
        all termVector: "yes"
        schools  component: true
    }
      ......
}

class UserWorkings {
      .....
      Organizations organizations 
      .....
     static belongsTo = [user : User ]
     ....
     static searchable = {
        content: spellCheck 'include'
        all termVector: "yes"
        organizations  component: true
     }
     ......
}

class Schools {
      ......
      static searchable = true
      ......
}

class Organizations {
      ......
       static searchable = true
      ......
} 
```

使用正确的映射和约束成功保存数据。

当我们在具有关系的表用户中有下面的drowslike时，问题就开始了

用户 a1 -> UserEducations b1 -> 学校 d1

和

用户 a2 -> UserEducations b2 -> 学校 d1

或者

用户 a1 -> UserWorkings c1 -> 组织 e1

和

用户 a2 -> UserWorkings c2 -> 组织 e1

**（我们不确定上述事实可能是由于大量数据而发生的问题。）**

然后当我们尝试启动服务器时，我们收到以下异常并且服务器无法启动

我们尝试删除可搜索索引并重新启动，然后它也无法启动。

仅当我们截断与上述 5 个域对应的表时，服务器才会启动。

```
18:30:54,133 [Compass Gps Index [pool-5-thread-5]] ERROR indexer.ScrollableHibernateIndexEntitiesIndexer  - {hibernate}: Failed to index the database
org.compass.core.engine.SearchEngineException: Processor [4]: Failed to add job [Job Create [alias [Organizations] uid [Organizations#456#]] Resource [{Organizations} [stored/uncompressed,indexed,omitNorms<alias:Organizations>],[stored/uncompressed,indexed,omitNorms,omitTf<$/Organizations/id:456>],[stored/uncompressed,indexed<active:true>],[stored/uncompressed,indexed<dateCreated:2013-02-28-14-03-05-0-PM>],[stored/uncompressed,indexed,tokenized<aaa:109122482450911>],[stored/uncompressed,indexed<lastUpdated:2013-02-28-14-03-05-0-PM>],[stored/uncompressed,indexed,tokenized<name:Asc>],[stored/uncompressed,indexed<version:0>],[stored/uncompressed,indexed,omitNorms,omitTf<$/uid:Bs#456#>]]] after [10000ms] and backlog size [100]
        at org.compass.core.lucene.engine.transaction.support.AbstractConcurrentTransactionProcessor$Processor.addJob(AbstractConcurrentTransactionProcessor.java:496)
        at org.compass.core.lucene.engine.transaction.support.AbstractConcurrentTransactionProcessor.create(AbstractConcurrentTransactionProcessor.java:158)
        at org.compass.core.lucene.engine.LuceneSearchEngine.createOrUpdate(LuceneSearchEngine.java:290)
        at org.compass.core.lucene.engine.LuceneSearchEngine.create(LuceneSearchEngine.java:268)
        at org.compass.core.impl.DefaultCompassSession.create(DefaultCompassSession.java:413)
        at org.compass.core.impl.DefaultCompassSession.create(DefaultCompassSession.java:397)
        at org.compass.core.impl.ExistingCompassSession.create(ExistingCompassSession.java:305)
        at org.compass.gps.device.hibernate.indexer.ScrollableHibernateIndexEntitiesIndexer$RowBuffer.flush(ScrollableHibernateIndexEntitiesIndexer.java:212)
        at org.compass.gps.device.hibernate.indexer.ScrollableHibernateIndexEntitiesIndexer$RowBuffer.close(ScrollableHibernateIndexEntitiesIndexer.java:206)
        at org.compass.gps.device.hibernate.indexer.ScrollableHibernateIndexEntitiesIndexer.performIndex(ScrollableHibernateIndexEntitiesIndexer.java:151)
        at org.compass.gps.device.support.parallel.ConcurrentParallelIndexExecutor$1$1.doInCompassWithoutResult(ConcurrentParallelIndexExecutor.java:104)
        at org.compass.core.CompassCallbackWithoutResult.doInCompass(CompassCallbackWithoutResult.java:29)
        at org.compass.core.CompassTemplate.execute(CompassTemplate.java:133)
        at org.compass.gps.impl.SingleCompassGps.executeForIndex(SingleCompassGps.java:147)
        at org.compass.gps.device.support.parallel.ConcurrentParallelIndexExecutor$1.call(ConcurrentParallelIndexExecutor.java:102)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:679) 
```

我们的问题类似于下面的帖子

[http://grails.1312388.n4.nabble.com/hibernate-Searchable-failing-to-index-on-program-start-td4119566.html](http://grails.1312388.n4.nabble.com/hibernate-Searchable-failing-to-index-on-program-start-td4119566.html)

我们已尽力解决问题，但没有运气。请帮助我们解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T16:31:15.553

转到您的控制台并输入：

```
grails install-searchable-config 
```

然后打开 myproject/grails-app/conf/Searchable.groovy 并搜索以下内容并更改我指出的值。

```
mirrorChanges = false
bulkIndexOnStartup = false 
```

在 Bootstrap.groovy 中：

```
class BootStrap {
   def searchableService

   def init = { servletContext ->
      // do any data loading you would normally do

      // Manually start the mirroring process to ensure that it comes after the automated migrations.
      println "Performing bulk index"
      searchableService.reindex()
      println "Starting mirror service"
      searchableService.startMirroring()
   }
} 
```

# asp.net-mvc-4 - MVC 4 ASP.NET 4.5 动态表单生成器选项？

> ID：15435954
> 
> 赞同：-2
> 
> 时间：2013-03-15T15:17:35.697
> 
> 标签：asp.net-mvc-4, asp.net-4.0, asp.net-4.5, dynamic-forms

3 年前，我使用 ASP.NET 开发了自定义表单构建器类型的应用程序。现在正在开发新项目，它有类似的要求。我认为使用 MVC4 或 ASP.NET 4.5 Web 表单必须有一些新的和容易做的事情。任何指针？

要求详细，

*   这是一个网络应用程序
*   授权用户登录网站并选择填写表格
*   此表格捕获然后发送给第三方的信息
*   第三方会不断审查他们的系统，将来可能会要求提供更多详细信息
*   我的应用程序需要修改以捕获这些额外的（或者说是变化的）信息

有什么方法可以只更改数据库模型以适应这些额外的字段，并且它们会自动出现在表单上，​​而无需对 UI 或 BL 级别进行任何代码更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:25:29.890

我不太确定您要完成什么，但也许这会有所帮助？

[http://lostechies.com/erichexter/2012/11/20/twitter-bootstrap-mvc4-the-template-nuget-package-for-asp-net-mvc4-projects/](http://lostechies.com/erichexter/2012/11/20/twitter-bootstrap-mvc4-the-template-nuget-package-for-asp-net-mvc4-projects/)

看看他们如何根据传递的视图模型自动生成引导视图。

# image-resizing - imageresizing.net 资源未找到问题

> ID：15435959
> 
> 赞同：0
> 
> 时间：2013-03-15T15:17:51.837
> 
> 标签：image-resizing, imageresizer

我目前在 IIS7.5 上托管的 ASP.NET MVC 4 Web 项目中使用 imageresizer.dll ver3.3.3。我在 bin 文件夹中包含了 imageresizer.mvc.dll 并添加了 mvc shim 插件。

一切都在我的本地机器上正常工作。但在生产机器中，我面临资源未找到问题。生产机器也有 ASP.NET MVC 4, IIS7.5 和 bin 目录包含 dll 和 web.config 文件如下：

在生产机器中。1\. 当我用.ashx 执行图像请求时，我得到资源未找到异常。2.为了验证图像是否真的存在，我删除了 .ashx 并且图像加载没有问题。所以我在生产机器的图像调整部分缺少一些东西。3\. 我尝试通过执行 /resizer.debug.ashx 来诊断问题，但在这里我也得到资源未找到异常。4\. 我尝试省略 .ashx 扩展名，但在查询字符串中使用宽度参数。图像大小不受影响。

我完全不确定解决这个问题的下一步是什么。谁能指导我我缺少什么？

谢谢和问候， G Hemant

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T22:11:56.230

我尽我所能按照安装说明进行操作，并且在 /resizer.debug 方面遇到了与您相同的问题

我没有整体使用 MVC；但是，我正在使用路由，并且在 global.asax 的 Application_Start 部分中有一个 RegisterRoutes 方法。

添加到 RegisterRoutes 方法的这一行解决了我无法访问 resizer.debug.ashx 的问题：

```
 routes.Ignore("{resource}.ashx/{*pathInfo}"); //ignore ashx files 
```

现在我可以从 Cassini 和 iis7 访问。

# javascript - 如何重置 raphael 文本元素的 bbox 数据

> ID：15435972
> 
> 赞同：0
> 
> 时间：2013-03-15T15:18:36.610
> 
> 标签：javascript, raphael

我正在尝试更改 raphael 元素的 bbox 数据，但它不起作用。

我尝试设置

`textElement.attr("text","1");`

但它看起来像保持最新最宽的文本宽度，我假设将 bbox 值缩小为更小的文本。

显然我错过了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:14:55.630

Raphael 不会让您对元素的边界框进行任何控制。字体元素的边界框限于文本的宽度。如果要更改字体大小，只需使用`font-size`属性：

```
textElement.attr("font-size","12"); 
```

# ruby-on-rails - Rails ActiveRecord 中的复合外键

> ID：15435975
> 
> 赞同：1
> 
> 时间：2013-03-15T15:18:43.803
> 
> 标签：ruby-on-rails, database, activerecord

我目前有一个名为`Image`. 该模型与`Article`.

```
class Article < ActiveRecord::Base
  has_many: images
end 
```

Image 表包含一个`article_id`，因此图像与文章相关联。

但是，我也想将我的图像与其他模型一起使用。因此我想象`article_id`变成类似的东西`owner_id`并添加一个名为模型`owner_model`的新属性。`Image`

这样其他模型也可以有许多图像。

知道这是否可以使用 ActiveRecord 优雅地实现以及如何去做？

在旁注中，我使用 CarrierWave 来拍摄图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:22:30.887

您可以使用多态关联。

[rails guide](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)有一个与您的问题相关的简洁示例。

```
class Picture < ActiveRecord::Base
  belongs_to :imageable, :polymorphic => true
end

class Employee < ActiveRecord::Base
  has_many :pictures, :as => :imageable
end

class Product < ActiveRecord::Base
  has_many :pictures, :as => :imageable
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:22:30.883

您是否研究过多态关联？Ryan 有一段视频：[http ://railscasts.com/episodes/154-polymorphic-association](http://railscasts.com/episodes/154-polymorphic-association)

它将允许您将不同的类与您的图像相关联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:22:43.917

您正在寻找的是所谓的多态关联（[http://guides.rubyonrails.org/association_basics.html#polymorphic-associations](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)）。

# html - 给定秒的视频事件

> ID：15435976
> 
> 赞同：0
> 
> 时间：2013-03-15T15:18:46.017
> 
> 标签：html, video

需要播放下一个视频，当当前视频时间达到给定值时，但不知道为什么应该获取 currentTime 的事件根本没有触发？也许有人知道为什么（显然最简单的任务是最容易出现问题的任务）

```
 function setupVideoPlayer() { 
var currentVideo = 1;
// i.e. [video url, start time, end time]
var videos = [["1.mp4", 0, 4], ["2.mp4", 3, 7]];
var videoPlayer = document.getElementById('videoPlayer');
// set first video clip
videoPlayer.src = videos[0][0]; // 1.mp4
// Syncrhonization function should come here

videoPlayer.addEventListener('timeupdate', function(e){
    if (this.currentTime == videos[currentVideo-1][2]) {
        currentVideo += 1;
        this.src = videos[currentVideo-1][0];
        this.play();
    }
}, true);

// It makes sure the seek will happen after buffering 
// the video
videoPlayer.addEventListener('progress', function(e) {
    // Seek to start point
    this.currentTime = videos[currentVideo-1][1]; 
}, false)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:21:41.810

我建议将时间检查更改为 > 而不是 = 因为 currentTime 事件不是整数

```
if (this.currentTime == videos[currentVideo-1][2]) { 
```

变成

```
if (this.currentTime > videos[currentVideo-1][2]) { 
```

（或者您可以将其转换为用于测试的积分器）

如果还有其他问题，值得`console.log(this.currentTime)`在事件中添加一个以查看它是否触发了代码

# android - 自定义 ViewGroup 上的 ImageView 布局仅移动“边界框”，而不是图像

> ID：15435977
> 
> 赞同：0
> 
> 时间：2013-03-15T15:18:46.237
> 
> 标签：android, imageview, android-imageview, android-custom-view

我正在尝试将 ImageView 定位在自定义 ViewGroup 中。使用 Eclipse 中的图形布局，我可以看到边界框放置在我想要的位置，但图像本身停留在父级的 (0,0) 处。

我是否错过了对 ImageView 的测量或布局相关调用，或者布局定位错误？如何将图像与其布局边界分开？

这是我所描述的截图：http: [//dl.dropbox.com/u/13477196/gameboard.png](http://dl.dropbox.com/u/13477196/gameboard.png)

以及来自 ViewGroup 的代码位：

```
public class GameViewGroup extends ViewGroup {
...
    @Override
    public void onLayout(boolean changed, int l, int t, int r, int b) {
        for (int col = 0; col < COLS; ++col) {
            for (int row = 0; row < ROWS; ++row) {
                ImageView image = (ImageView) findViewById(pieceId[col][row]);
                final Bitmap bitmap = ((BitmapDrawable) image.getDrawable()).getBitmap();

                final int imgLeft = l + (int) board.getVertexX(col) - (bitmap.getWidth() / 2);
                final int imgTop = t + (int) board.getVertexY(col, row) - (bitmap.getHeight() / 2);
                final int imgRight = imgLeft + bitmap.getWidth();
                final int imgBot = imgTop + bitmap.getHeight();

                image.layout(imgLeft, imgTop, imgRight, imgBot);
            }
        }
    }

    @Override
    protected void dispatchDraw(Canvas canvas) {
        // Draw the game board from cache
        canvas.drawBitmap(cachedBitmap, 0, 0, null);

        // Draw the pieces
        for (int col = 0; col < COLS; ++col) {
            for (int row = 0; row < ROWS; ++row) {
                ImageView image = (ImageView) findViewById(pieceId[col][row]);
                image.draw(canvas);
            }
        }
    }
...
} 
```

我使用 XML 将 ImageViews 附加到自定义 ViewGroup：

```
<?xml version="1.0" encoding="UTF-8"?>
<GameViewGroup 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/game_view"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent" 
    tools:context=".GameActivity">

    <ImageView android:id="@+id/piece1"
        android:src="@drawable/piece"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:visibility="visible"
        android:contentDescription="@string/piece" />
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:00:53.750

我在 onLayout() 中对 image.layout() 的调用下添加了以下内容：

```
image.setPadding(imgLeft, imgTop, imgRight, imgBot); 
```

这将图像定位在与 Eclipse 图形布局中的边界框完全相同的位置。

但是，在我的设备上启动该应用程序时，它仍然无法正常工作。

# asp.net - 在 DropDownList_SelectedIndexChanged 事件中，在 gridview 编辑模式下访问下拉列表的值

> ID：15435982
> 
> 赞同：0
> 
> 时间：2013-03-15T15:19:00.947
> 
> 标签：asp.net, vb.net, gridview

我正在尝试在编辑模式下使用 Gridview 中的下拉列表执行回发。我在获取下拉列表的值时遇到问题。我不能在 RowDatabound 事件中执行此操作。

回发并没有结束写行，我正在进入我想要执行一些操作的 DropDownList7_SelectedIndexChanged 事件，所以它甚至还没有到达那里。我在页面加载事件中有 If Postback。

```
 Protected Sub DropDownList7_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs)

    Dim row As GridViewRow = DirectCast(GridView1.Rows.Item(0), GridViewRow)
    Dim newNumDDL As DropDownList = row.Cells(0).FindControl("DropDownList7")

    Dim newVal As Integer = newNumDDL.SelectedValue
    Dim newKey As String = newNumDDL.SelectedItem.ToString
    Dim newindex As Integer = newNumDDL.SelectedIndex 
```

我相信问题是 findcontrol 我找不到 DDL，一直没有回来。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:37:40.707

你可以不使用：

```
Dim newNumDDL As DropDownList = DirectCast(sender, DropDownList) 
```

# c# - C# 正则表达式验证输入格式

> ID：15435987
> 
> 赞同：-4
> 
> 时间：2013-03-15T15:19:14.510
> 
> 标签：c#, regex

我有这样的输入格式：

```
{random string} + " " + {integer} 
```

例如

```
a)    stringInput 43

b)    abcdefghijkl 89 
```

如何使用正则表达式验证这种格式？

我遇到了一个问题：字符串的正则表达式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T15:24:41.487

```
public bool IsValidString(string s)
{
  string[] strs = s.Split(' ');
  int i = 0;
  if (strs.Length != 2)
    return false;
  return (int.TryParse(strs[1], out i);
} 
```

You don't really need to use regex for this if you don't understand it, just an alternative method if you wanted to have a look. It may be easier to read, I personally find `Regex` very hard to read.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T15:22:17.063

试试这个，

```
bool _result = Regex.IsMatch(yourStr, @"^[A-Za-z]+\s\d+$"); 
```

正则表达式模式的解释，

自卫队

*   在行首断言位置（在字符串的开头或换行符之后）`^`
*   匹配下面列表中的单个字符`[A-Za-z]+`
    *   一次和无限次之间，尽可能多次，按需回馈（贪婪）`+`
    *   介于“A”和“Z”之间的字符`A-Z`
    *   介于“a”和“z”之间的字符`a-z`
*   匹配作为“空白字符”的单个字符（空格、制表符和换行符）`\s`
*   匹配单个数字 0..9`\d+`
    *   一次和无限次之间，尽可能多次，按需回馈（贪婪）`+`
*   在行尾断言位置（在字符串末尾或换行符之前）`$`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:24:24.013

应该管用

```
bool _result = Regex.IsMatch(yourStr,@"^\w+?.\d+?$"); 
```

# opencv - OpenCV 是否支持 v4l2？

> ID：15435988
> 
> 赞同：3
> 
> 时间：2013-03-15T15:19:14.927
> 
> 标签：opencv, v4l2

我正在使用 OpenCV 编写 Python 程序，但无法从 v4l2 相机捕获图像。

我尝试了 PS2 EyeToy 和 Droidcam（Android 虚拟网络摄像头），它们都使用 v4l2，但它们都不起作用：cv.CaptureFromCAM(0) 只返回 None。

我可以在其他程序中使用这两个网络摄像头（尝试过 VLC 和 Kamerka）。

我猜 OpenCV 只支持 v4l，不支持 v4l2。

我怎么解决这个问题？是否存在 v4l2->v4l 转换器？

编辑：我读到 cv.CaptureFromFile 使用 ffmpeg 解码视频文件。是否可以手动指定格式，以便我可以使用 ffmpeg 的`video4linux2`demuxer？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-06-18T05:14:32.160

对于 OpenCV 3.2.0，在 cmake 选项中包括以下内容对我有用

来自[https://github.com/opencv/opencv/issues/7974](https://github.com/opencv/opencv/issues/7974)

```
-DWITH_V4L=ON 
-DWITH_LIBV4L=ON 
```

我不太确定这个是否有影响，但来自[VideoCapture 在 Anaconda 中不起作用](https://stackoverflow.com/questions/29249611/videocapture-does-not-work-in-anaconda)

```
-DWITH_FFMPEG=1 
```

在我的 cmake 选项中包括所有 3 个似乎是最终使我工作的原因

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T20:01:26.200

**OpenCV 确实支持 V4L2**，但默认情况下可能不支持。

下载 OpenCV 的源代码并**确保您的系统上安装了 v4l2 头文件和库**。

用 配置 OpenCV 后`cmake`，检查它的输出：

```
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  YES (ver 2.2.0)
--     FFMPEG:                      YES
--       codec:                     YES (ver Unknown)
--       format:                    YES (ver Unknown)
--       util:                      YES (ver Unknown)
--       swscale:                   YES (ver Unknown)
--       gentoo-style:              YES
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     QuickTime:                   NO
--     QTKit:                       YES
--     V4L/V4L2:                    NO/NO 
```

如果您注意到上面的输出，那么在我的系统上将不会在支持 V4L/V4L2 的情况下构建 OpenCV，因为我没有安装必要的开发文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-03-06T18:25:00.890

我必须更新相机的权限，然后 OpenCV 开始为我工作。

```
sudo chmod 0777 /dev/video0 
```

# php - 如何使用 PHP 的 SoapClient 创建这个 xml？

> ID：15435989
> 
> 赞同：1
> 
> 时间：2013-03-15T15:19:16.813
> 
> 标签：php, soap

通过调试另一个应用程序，我发现它会将以下 xml 发送到一个肥皂服务器（此示例中的代码部分已最小化，xml 大约 200 行长：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:m0="http://schemas.ccs.nl/datacatalogus/modellen/modelrelatie">
<SOAP-ENV:Header>
    <m:header xmlns:m="http://schemas.ccs.nl/soap">
        <m:account>account</m:account>
        <m:naam>naam_header</m:naam>
        <m:wachtwoord>wachtwoord</m:wachtwoord>
        <m:bedrijfsnummer>bedrijfsnummer</m:bedrijfsnummer>
        <m:tussenpersoonnummer>tussenpersoonnummer</m:tussenpersoonnummer>
    </m:header>
</SOAP-ENV:Header>
<SOAP-ENV:Body>
    <m:RelatieMuteren xmlns:m="http://schemas.ccs.nl/services/relatieservice">
        <m:relatie pc="W">
            <m0:adres>adres</m0:adres>
        </m:relatie>
    </m:RelatieMuteren>
</SOAP-ENV:Body> 
```

显然，两者之间的部分`<m0:adres></m0:adres>`要大得多，并且对应于我存储在数组中的数据。但是，如果我尝试使用 发送请求`__soapCall`，PHP 会构建以下请求：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
                   xmlns:ns1="http://schemas.ccs.nl/datacatalogus/modellen/modelrelatie"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns:ns2="http://schemas.ccs.nl/services/relatieservice" xmlns:ns3="http://schemas.ccs.nl/soap">
    <SOAP-ENV:Header>
        <ns3:header>
            <ns3:account>account</ns3:account>
            <ns3:naam>naam</ns3:naam>
            <ns3:wachtwoord>wachtwoord</ns3:wachtwoord>
            <ns3:bedrijfsnummer>bedrijfsnummer</ns3:bedrijfsnummer>
            <ns3:tussenpersoonnummer>tussenpersoonnummer</ns3:tussenpersoonnummer>
        </ns3:header>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <ns2:RelatieMuteren>
            <ns2:relatie pc="I">
                <ns1:adres>Postbus 53</ns1:adres>
            </ns2:relatie>
        </ns2:RelatieMuteren>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

如您所见，第二个 xml 与第一个完全不同。谁能解释我为什么它不同以及如何创建第一种类型的 xml？

我使用以下代码来执行请求：

```
$client = new SoapClient( "http://www.cdsverzekeringen.nl/ws_prod/services/RelatieService.asmx?WSDL", array( 'trace' => 1 ) );
$aHeader =  array(
    'account' => "PRIVATE", 
    'naam' => "PRIVATE",
    'wachtwoord' => "PRIVATE",
    'bedrijfsnummer' => "PRIVATE",
    'tussenpersoonnummer' => "PRIVATE",
);
$client->__setSoapHeaders( new SoapHeader( "http://schemas.ccs.nl/soap", 'header', $aHeader ) );
$vtResult = $client->__soapCall( "RelatieMuteren", array( $aRelatieInfo ) ); 
```

$aRelatieInfo 数组的格式如下：

```
array
  'relatie' => 
    array
      'adres' => string 'Postbus 53' (length=10) 
```

我希望有人可以帮助我。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:42:30.163

像这样使用 SoabVar API 怎么样，

```
$aHeader = '
<m:header xmlns:m="http://schemas.ccs.nl/soap">
    <m:account>account</m:account>
    <m:naam>naam_header</m:naam>
    <m:wachtwoord>wachtwoord</m:wachtwoord>
    <m:bedrijfsnummer>bedrijfsnummer</m:bedrijfsnummer>
    <m:tussenpersoonnummer>tussenpersoonnummer</m:tussenpersoonnummer>
</m:header>';
$soap_var_header = new SoapVar( $aHeader , XSD_ANYXML, null, null, null);

$client->__setSoapHeaders( new SoapHeader( "http://schemas.ccs.nl/soap", 'm', $soap_var_header ) ); 
```

# sql-server-2008 - 为批量插入创建测试数据

> ID：15435992
> 
> 赞同：4
> 
> 时间：2013-03-15T15:19:21.527
> 
> 标签：sql-server-2008, bulkinsert, test-data

我有兴趣学习一些新技能，并且一直在阅读有关批量插入的信息。所以我在 sql server 2008 中创建了两个表 1) Client 2)ClientDetails，设置设计如下：

```
Client Table

ClientID | ClientName | DetailsID

ClientDetails Table

DetailsID | Address1 | Address2 | Country 
```

我的问题是，我想创建大约 10,000 行数据来尝试使用批量插入，我如何创建 10,000 行随机测试数据以使用批量插入到两个表中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T15:23:53.110

网上有许多数据生成器站点。我用得最多的是[http://www.generatedata.com/#generator](http://www.generatedata.com/#generator)。这将允许您创建大量真实数据，包括姓名、电话、地址和国家/地区等内容，并以各种格式导出它们。它最多只允许 5,000 条记录，但只需运行两次即可获得 10,000 条记录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-04T09:11:45.553

*迟到的答案，但可能对线程访问者有用*

您是否尝试过 ApexSQL 生成？它可以从 CSV 或 TXT 文件（一种非常知名且常用的数据源）生成测试数据。您可以插入 CSV/TXT 文件中的所有数据——您只需首先设置分隔符、列索引等。

你可以免费下载这个工具并使用它——据称它可以快速生成数百万行。

要了解有关该工具的更多信息，您可以访问[https://www.apexsql.com/sql_tools_generate.aspx](https://www.apexsql.com/sql_tools_generate.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:23:23.543

您可以使用一个非常好的功能：

```
select 'test' as x, getdate() as gd
go 10 
```

您可以编写一个插入并将其设为“GO 1000”。当然，根据您的需要，您可能必须编写一个批处理来随机化数据，但它仍然比循环好。

# c++ - 如何从另一个 C++ .exe 打开一个 .exe？

> ID：15435994
> 
> 赞同：50
> 
> 时间：2013-03-15T15:19:23.257
> 
> 标签：c++, windows, exe

我想要做的是从另一个 .exe 打开一个 .exe。我真的不知道该怎么做，所以我搜索了互联网。我尝试了一些来自互联网的建议方法，但没有奏效。

这是我的代码：

```
#include <iostream>
#include <windows.h>
using namespace std;

int main()
{
    system ("OpenFile.exe");
    system ("pause");
    return 0;
} 
```

当我在 DEV C++ 中运行它时，它会编译，但我得到一个错误。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-03-15T18:53:00.307

您应该始终避免使用`system()`，因为

*   资源繁重
*   它破坏了安全性——你不知道这是一个有效的命令，或者在每个系统上都做同样的事情，你甚至可以启动你不打算启动的程序。 **危险在于，当您直接执行程序时，它会获得与您的程序相同的权限——这意味着，例如，如果您以系统管理员身份运行，那么您刚刚无意中执行的恶意程序也会以系统管理员身份运行。如果这不会吓到您，请检查您的脉搏。**
*   防病毒程序讨厌它，您的程序可能会被标记为病毒。

您应该使用[CreateProcess()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)。

您可以使用 Createprocess() 来启动一个 .exe 并为其创建一个新进程。该应用程序将独立于调用应用程序运行。

这是我在一个项目中使用的示例：

```
#include <windows.h>

VOID startup(LPCTSTR lpApplicationName)
{
   // additional information
   STARTUPINFO si;     
   PROCESS_INFORMATION pi;

   // set the size of the structures
   ZeroMemory( &si, sizeof(si) );
   si.cb = sizeof(si);
   ZeroMemory( &pi, sizeof(pi) );

  // start the program up
  CreateProcess( lpApplicationName,   // the path
    argv[1],        // Command line
    NULL,           // Process handle not inheritable
    NULL,           // Thread handle not inheritable
    FALSE,          // Set handle inheritance to FALSE
    0,              // No creation flags
    NULL,           // Use parent's environment block
    NULL,           // Use parent's starting directory 
    &si,            // Pointer to STARTUPINFO structure
    &pi             // Pointer to PROCESS_INFORMATION structure (removed extra parentheses)
    );
    // Close process and thread handles. 
    CloseHandle( pi.hProcess );
    CloseHandle( pi.hThread );
} 
```

编辑：您得到的错误是因为您需要指定 .exe 文件的路径而不仅仅是名称。Openfile.exe 可能不存在。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-09-17T04:02:40.493

我在这方面取得了巨大的成功：

```
#include <iostream>
#include <windows.h>

int main() {
    ShellExecute(NULL, "open", "path\\to\\file.exe", NULL, NULL, SW_SHOWDEFAULT);
} 
```

如果你有兴趣，完整的文档在这里：

[http://msdn.microsoft.com/en-us/library/bb762153(VS.85).aspx](http://msdn.microsoft.com/en-us/library/bb762153(VS.85).aspx)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-16T02:35:46.380

尝试这个：

```
#include <windows.h>

int main ()

{
    system ("start notepad.exe") // As an example. Change [notepad] to any executable file //

    return 0 ;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-16T16:52:10.280

您收到此错误是因为您没有提供完整路径。(C:\Users...\file.exe) 如果您想删除此错误，请提供完整路径或将该应用程序（您要打开）复制到您的项目（.exe）所在/保存的文件夹中。

```
#include <windows.h>
using namespace std;
int main()
{
  system ("start C:\\Users\\Folder\\chrome.exe https://www.stackoverflow.com"); //for opening stackoverflow through google chrome , if chorme.exe is in that folder..
  return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-14T18:08:12.967

提供文件的完整路径，`openfile.exe` 记住不要在路径中加上斜杠`/`，例如 `c:/users/username/etc....` 代替那个使用 `c:\\Users\\username\etc` （对于Windows）

可能这会对你有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-10T20:50:53.457

当可执行路径在系统中有空格时，调用

```
#include<iostream>
using namespace std;
int main()
{
    system("explorer C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe ");
    system("pause");
return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-06T15:22:07.200

我知道这有点晚了，但这是为了帮助所有新的 c++ 开发人员。

基本上我发现如果你将文件路径设置为该位置然后调用程序你可以绕过错误。

```
 cout << "Opening Firefox";
        system("cd C:\\Program Files\\Mozilla Firefox");
        Sleep(1000);
        system("start firefox.exe -P"); 
```

如您所见，我将文件路径设置为 Firefox 的位置，然后启动它。就我而言，我正在启动 Firefox 的配置文件管理器，**如果您只想启动 Firefox，请删除 -P**。我还输入了一个 Sleep() 让我的计算机有时间切换文件路径。**如果要返回默认文件路径，请使用**, `system(cd C:\\Windows\\System32);`. 我通过在 windows 的命令行中复制命令来做到这一点，但如果你正在使用 Linux 特定的命令 + 文件路径，你会使用它。

# jax-ws - 使用 EasyMock 测试 JAX-WS 客户端

> ID：15435995
> 
> 赞同：1
> 
> 时间：2013-03-15T15:19:30.093
> 
> 标签：jax-ws, easymock

我使用与服务器端通信的 jaxws-maven-plugin 2.2 构建了一个 java WS 客户端。

现在，我正在使用 EasyMock 实现单元测试来测试客户端行为，但我是新手。

谁能告诉我一些关于使用 EasyMock 测试 jax-ws 模拟服务器端的教程/帖子？

谢谢！

# php - SOAP ws-addressing 和 ws-security 的 PHP 实现

> ID：15435997
> 
> 赞同：0
> 
> 时间：2013-03-15T15:19:34.483
> 
> 标签：php, soap, ws-security, ws-addressing

我尝试在 PHP 中调用一个在 .Net 中实现的 SOAP Web 服务，使用多个“扩展”，如 ws-security 和 ws-addressing。我使用了wsf/php(wso2)，基于ramart和axis2，没有成功。我们询问了另一个开发这些 SOAP 服务器（在 .Net 中）的开发团队，他们也失败了。WSO2 似乎未实现、存在漏洞且未维护。最后一个问题是key大于1024字节的缓冲区溢出，但是之前有一堆问题。

谁使用 ws-* 实现了服务器或客户端？有哪些库和困难？