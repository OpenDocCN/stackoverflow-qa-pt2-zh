# StackOverflow 问答 15441000-15441999

# symfony - HWIOAuthBundle 的 PathUserResponse 错误

> ID：15441001
> 
> 赞同：0
> 
> 时间：2013-03-15T19:51:00.327
> 
> 标签：symfony, oauth

几乎所有项目在我的项目中都运行良好，除了当我使用在我的数据库（FOSUserBundle）中没有对应关系的用户登录（使用 facebook）时，我被重定向到 /registration/{id} 只是得到一个错误：

`The form's view data is expected to be an instance of class Naroga\Reader\CommonBundle\Entity\User, but is an instance of class HWI\Bundle\OAuthBundle\OAuth\Response\PathUserResponse. You can avoid this error by setting the "data_class" option to null or by adding a view transformer that transforms an instance of class HWI\Bundle\OAuthBundle\OAuth\Response\PathUserResponse to an instance of Naroga\Reader\CommonBundle\Entity\User.`

我还必须覆盖 connect.confirm.html.twig 以删除以下行：

```
{% if userInformation.profilePicture is not empty %}
    <img src="{{ userInformation.profilePicture }}" />
{% endif %} 
```

它说 PathUserResponse 没有 profilePicture 方法。我的猜测是我不应该使用 PathUserResponse，但我不知道我做错了什么。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:59:57.820

HWI/OAuth-Bundle 的好心人已经解决了这个问题。我以为我做错了什么，但那些实际上是已知的错误。

# c# - 如何将字节数组从 C# 传递到非托管 C++，对其进行修改并将其传递回 C#

> ID：15441003
> 
> 赞同：1
> 
> 时间：2013-03-15T19:51:10.187
> 
> 标签：c#, c++, arrays, interop, unmanaged

是否可以将 Byte[] 从 C# 传递给非托管 C++，并在 C++ 内部对其进行修改，然后在 C# 中读取它的值？就像是：

* * *

```
C#:
[DllImport("MyDll.dll")]
public static extern bool UnmanagedFunction(ref Byte[] a, short b, ref ulong c);
...
bool success;
Byte[] a = new Byte[65];
ulong c = 0;
success = UnmanagedFunction(ref a, (short)a.Length, ref c); 
```

* * *

```
C++:
extern "C" __declspec(dllexport) BOOL WINAPI UnmanagedFunction(
    __inout_ecount(b)       PBYTE          a, 
    __in                    INT16          b,
    __out                   DWORD          c
) {
    BOOL success = FALSE;
    PBYTE uA;
    OVERLAPPED d;
    ...
    success = ReadFile(
        readHandle,
        uA,
        b,
        &c,
        &d);
   if ( success ) {
       a = uA;
   }
   free(uA);
   return success;
} 
```

* * *

当我在调用“UnmanagedFunction”后尝试在 C# 上读取变量“a”时，它只显示数组的第一个位置，我对 C 代码感到抱歉，我对 C++ 中的指针和引用真的很陌生

我试图遍历“uA”“c”次将每个位置设置在“a”上，每个位置都已定义，但是当代码返回其托管部分时，我收到一个异常，告诉我内存已损坏，例如：

```
for ( int i = 0; i < c; ++i )
    a[i] = uA[i]; 
```

我已经看到函数返回一个 IntPtr 然后在托管端调用 Marshal.Copy ，但我想知道是否有可能接近我在上面想要实现的目标

提前致谢！

# testing - Paypal 定期付款负测试

> ID：15441005
> 
> 赞同：0
> 
> 时间：2013-03-15T19:51:24.247
> 
> 标签：testing, paypal, payment, recurring

我正在使用 PayPal Pro 和 NVP API 开发定期付款。我在这里读过：[https](https://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/pp_payflowpro_recurringbilling_guide.pdf) ://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/pp_payflowpro_recurringbilling_guide.pdf负面测试应该适用于经常性付款。我有我的个人资料设置以允许负面测试。

我正在寻找导致我的初始付款失败。为此，我将我的 AMT 和 INITAMT 设置为 2010。根据文档，我认为这会导致付款失败，但初始付款是成功的。

有没有人通过定期付款进行负面测试？对于预定付款还是初始付款？如果是这样，您能否提供任何步骤和/或提示？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:24:01.333

尝试这个：

```
PARTNER=PayPal
PWD=yourpass
VENDOR=yourvendor
USER=youruser
ACTION=A
TENDER=C
ACCT=5105105105105100
EXPDATE=0115
TRXTYPE=R
PROFILENAME=MonthlySubscription
AMT=50000
START=12122013
PAYPERIOD=MONT
TERM=12
OPTIONALTRX=S
OPTIONALTRXAMT=2000.00
COMMENT1=First Time Customer 
```

设置 OPTIONALTRXAMT=2000 将触发拒绝，或者您需要的任何代码。

# ruby-on-rails - 将参数添加到 ON 子句的任何可能方法包括导轨上的左连接？

> ID：15441012
> 
> 赞同：0
> 
> 时间：2013-03-15T19:51:57.713
> 
> 标签：ruby-on-rails, activerecord, join, left-join, on-clause

我有一个像这样的巨大复杂查询：

```
@objects = Object.joins({ x: :y }).includes(
  [:s, { x: { y: :z } }, { l: :m },:q, :w,
    { important_thing: 
      [:h, :v, :c,:l, :b, { :k [:u, :a] }]  
    }
  ]).where(conditions).order("x.foo, x.bar") 
```

然后我想显示所有`Objects`并且只有`Important_things`在两个日期之间创建的。

如果我把它放在那里的`where`条款上，我不会得到所有，`Objects`只有在知情日期之间。`Objects``Important_things`

使用原始 sql 的解决方案是：

`select * from objects left join important_things on important_things.object_id = objets.id and important_things.created_at between 'x' and 'y'`

代替：

`select * from objects left join important_things on important_things.object_id = objets.id where important_things.created_at between 'x' and 'y'`

我真的需要所有这些对象，我不想使用原始 SQL、任何解决方法或将参数传递给`ON`关联子句的可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:42:11.700

我这样做，

```
class VendorsRatings < ActiveRecord::Base

  def self.ratings(v_ids,sort = "DESC")

    joins("RIGHT OUTER JOIN vendors_lists v 
           ON v.vendor_id = vendors_ratings.vendor_id").where(conditions)

  end 

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T19:42:46.917

我做了一个丑陋的解决方法：

```
class Parent < ActiveRecord::Base
  cattr_accessor :dt_begin, dt_end
  has_many :children, conditions: Proc.new { { created_at: (@@dt_begin..@@dt_end) } }
end

class MetasController < ApplicationController
  def index
    Parent.dt_begin = Date.parse(param[:dt_begin])
    Parent.dt_end = Date.parse(param[:dt_end])

    @parents = Parent.includes(:children).where("children.age = ?", params[:age])
  end
end 
```

因此，`Parents`即使我`Children`在这些指定日期之间没有 created_at，我也可以通过这种方式获得所有信息。

其中最重要的部分是 ActiveRecord 中的所有对象。

但要小心，因为我确实弄乱了 cattr_accessor 所以我每次搜索之前都必须设置`Parents`。

# delphi - 如何将 IStream 加载到 TMemoryStream

> ID：15441014
> 
> 赞同：1
> 
> 时间：2013-03-15T19:52:04.790
> 
> 标签：delphi, activex, delphi-xe2, c++builder

如何使用 TComInterface<IStream> 对象并将其读入 TMemoryStream？我可以采用 TComInterface<IStream> 并将其用作 TStream* 以某种方式使用 TMemoryStream LoadFromStream 调用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T21:59:27.997

一种方法是`Read()`将`IStream`数据放入缓冲区，然后`Write()`将其放入`TMemoryStream`，例如：

```
TComInterface<IStream> pIStrm;
TMemoryStream *pMStrm;

...

STATSTG stat = {0};
OleCheck(pIStrm->Stat(&stat, STATFLAG_NONAME));

LARGE_INTEGER li;
li.QuadPart = 0;
ULARGE_INTEGER ul;
OleCheck(pIStrm->Seek(li, STREAM_SEEK_CUR, &ul));
unsigned __int64 ulPos = ul.QuadPart;

BYTE buffer[1024];
while (ulPos < stat.cbSize.QuadPart)
{
    ULONG ulRead;
    OleCheck(pIStrm->Read(buffer, min(stat.cbSize.QuadPart - ulPos, sizeof(buffer)), &ulRead));
    pMStrm->WriteBuffer(buffer, ulRead);
    ulPos += ulRead;
}

... 
```

另一种选择是编写一个`TStream`访问内部的派生类`IStream`（类似于 RTL 的`TStreamAdapter`类如何包装 a`TStream`以便它可以作为 a 传递`IStream`），例如：

```
class TIStreamWrapper : public TStream
{
private:
    TComInterface<IStream> pIStrm;

protected:
    virtual __int64 __fastcall GetSize();
    virtual void __fastcall SetSize(const __int64 NewSize);

public:
    __fastcall TIStreamWrapper(IStream *Strm);
    virtual int __fastcall Read(void *Buffer, int Count);
    virtual int __fastcall Write(const void *Buffer, int Count);
    virtual __int64 __fastcall Seek(const __int64 Offset, TSeekOrigin Origin);
};

__fastcall TIStreamWrapper::TIStreamWrapper(IStream *Strm)
    : pIStrm(Strm, true)
{
}

__int64 __fastcall TIStreamWrapper::GetSize()
{
    STATSTG stat = {0};
    OleCheck(pIStrm->Stat(&stat, STATFLAG_NONAME));
    return stat.cbSize.QuadPart;
}

void __fastcall TIStreamWrapper::SetSize(const __int64 NewSize)
{
    ULARGE_INTEGER ul;
    ul.QuadPart = NewSize;
    OleCheck(pIStrm->SetSize(ul));
}

int __fastcall TIStreamWrapper::Read(void *Buffer, int Count)
{
    ULONG ulRead;
    OleCheck(pIStrm->Read(Buffer, Count, &ulRead));
    return ulRead;
}

int __fastcall TIStreamWrapper::Write(const void *Buffer, int Count)
{
    ULONG ulWritten;
    OleCheck(pIStrm->Write(Buffer, Count, &ulWritten));
    return ulWritten;
}

static const DWORD IStreamSeekOrigin[] = {STREAM_SEEK_SET, STREAM_SEEK_CUR, STREAM_SEEK_END};

__int64 __fastcall TIStreamWrapper::Seek(const __int64 Offset, TSeekOrigin Origin)
{
    LARGE_INTEGER li;
    li.QuadPart = Offset;
    ULARGE_INTEGER ul;
    OleCheck(pIStrm->Seek(li, IStreamSeekOrigin[Origin], &ul));
    return ul.QuadPart;
} 
```

```
TComInterface<IStream> pIStrm;
TMemoryStream *pMStrm;
...
TIStreamWrapper *pWrapper = new TIStreamWrapper(pIStrm);
try
{
    pMStrm->LoadFromStream(pWrapper);
    // or: pMStrm->CopyFrom(pWrapper, 0);
}
__finally
{
    delete pWrapper;
}

... 
```

# c++ - C++ 这段代码是做什么的？

> ID：15441019
> 
> 赞同：-5
> 
> 时间：2013-03-15T19:52:15.657
> 
> 标签：c++

在我的书中有一段我不明白的代码。遗憾的是没有解释它的作用......

```
int big = 200;
int small = 100;
int max = (a <= b) ? big : small; 
```

所以我所知道的是有 3 个变量（大声笑..）。
整数“max”的值很大，但为什么呢？`(a <= b)`显然是一个条件，但 '?' 是做什么的？和'：'呢？

我希望有人可以解释我...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T19:55:10.320

`?`是[三元运算符](http://en.wikipedia.org/wiki/%3F%3a)

```
int max = (a <= b) ? big : small; 
```

与

```
int max;
if(a <= b) max = big;
else max = small; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T19:54:20.623

如果`a`小于或等于，`b`则 max 等于 big，否则 max 等于 small。更多检查[三元运算符](http://www.cplusplus.com/articles/1AUq5Di1/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T19:54:40.957

`?:`是条件运算符。

```
int max =(a<=b) ? big : small 
```

表示如果`a<=b`为真，则为`max=big i.e. 200` 其他`max=small i.e. 100`

一般语法：

```
condition ? value_if_true : value_if_false 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-15T19:54:28.627

这与以下内容相同：

```
if(a <= b){
    max = big;
}
else{
    max = small;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-15T19:54:34.797

一样的：

```
int big = 200, small = 100, max;

if (a <= b)
  max= big;
else
  max = small; 
```

# clickonce - ClickOnce 部署问题

> ID：15441021
> 
> 赞同：0
> 
> 时间：2013-03-15T19:52:16.427
> 
> 标签：clickonce, updating

我在查看 ClickOnce 如何知道它如何比较文件以及如何查找这些文件时遇到问题。我将让 ClickOnce 应用程序连接到服务器，但它是否在内部执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T01:22:54.950

如果您不想进行编程更新，请在“更新”对话框中设置“运行前检查更新”（单击“发布”屏幕上的“更新”）。然后，当您发布新版本时，它与原始部署位于相同的文件夹中。当用户运行应用程序时，它会检查是否有更新，并询问他是否要安装它。此时，用户可以跳过它，或接受更新。

如果您使最低版本（在更新对话框中）等于您正在部署的版本，它不会询问他，它只会更新应用程序。

如果他跳过更新，他将在几周内再也看不到它，如果有的话。微软说 2 周，但我不相信它会再次出现，所以他可能不得不等到 NEXT 更新或手动安装新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:55:40.037

您将在*[发布 ClickOnce 应用程序](http://msdn.microsoft.com/en-US/library/748fh114%28v=vs.110%29.aspx)*( [MSDN](http://en.wikipedia.org/wiki/Microsoft_Developer_Network) ) 中找到所需的一切。

从*[如何：使用 ClickOnce 部署 API 以编程方式检查应用程序更新](http://msdn.microsoft.com/en-us/library/ms404263.aspx)*：

> 1.  使用您喜欢的命令行或可视化工具创建一个新的 Windows 窗体应用程序。
> 2.  创建您希望用户选择以检查更新的任何按钮、菜单项或其他用户界面项。从该项目的事件处理程序中，调用以下方法来检查和安装更新。

```
private void InstallUpdateSyncWithInfo()
{
    UpdateCheckInfo info = null;

    if (ApplicationDeployment.IsNetworkDeployed)
    {
        ApplicationDeployment ad = ApplicationDeployment.CurrentDeployment;

        try
        {
            info = ad.CheckForDetailedUpdate();

        }
        catch (DeploymentDownloadException dde)
        {
            MessageBox.Show("The new version of the application cannot be downloaded at this time. \n\nPlease check your network connection, or try again later. Error: " + dde.Message);
            return;
        }
        catch (InvalidDeploymentException ide)
        {
            MessageBox.Show("Cannot check for a new version of the application. The ClickOnce deployment is corrupt. Please redeploy the application and try again. Error: " + ide.Message);
            return;
        }
        catch (InvalidOperationException ioe)
        {
            MessageBox.Show("This application cannot be updated. It is likely not a ClickOnce application. Error: " + ioe.Message);
            return;
        }

        if (info.UpdateAvailable)
        {
            Boolean doUpdate = true;

            if (!info.IsUpdateRequired)
            {
                DialogResult dr = MessageBox.Show("An update is available. Would you like to update the application now?", "Update Available", MessageBoxButtons.OKCancel);
                if (!(DialogResult.OK == dr))
                {
                    doUpdate = false;
                }
            }
            else
            {
                // Display a message that the app MUST reboot. Display the minimum required version.
                MessageBox.Show("This application has detected a mandatory update from your current " + 
                    "version to version " + info.MinimumRequiredVersion.ToString() + 
                    ". The application will now install the update and restart.", 
                    "Update Available", MessageBoxButtons.OK, 
                    MessageBoxIcon.Information);
            }

            if (doUpdate)
            {
                try
                {
                    ad.Update();
                    MessageBox.Show("The application has been upgraded, and will now restart.");
                    Application.Restart();
                }
                catch (DeploymentDownloadException dde)
                {
                    MessageBox.Show("Cannot install the latest version of the application. \n\nPlease check your network connection, or try again later. Error: " + dde);
                    return;
                }
            }
        }
    }
} 
```

# java - 了解如何使用 Jython 的问题

> ID：15441023
> 
> 赞同：4
> 
> 时间：2013-03-15T19:52:31.473
> 
> 标签：java, python, compilation, jython, jython-2.5

我刚刚开始学习 Jython，但在实施方面遇到了一些问题。我查看了 Jython 2.5 附带的 Demo 文件，但我仍然不确定如何实现 Jython 以获得我想要的。

目前，我有 Java 代码将 Python 服务器作为进程执行。Python 服务器依次启动 Java 代码的第二部分作为子进程。我原本打算用 Java NIO 服务器替换 Python 服务器，但这让我很伤心，这也是我尝试 Jython 的原因。我也想把所有这些都放到一个 .jar 中。

我尝试制作一个简单的 Python 文件 ( `print "Hello World"`)。它与 Jython 一起运行，但是当我尝试使用 java 运行它时（在执行`jython -m compileall`. 之后）它说它找不到 main。我假设我需要在我的 Python 代码中添加一些东西以使其工作，但我不确定是什么。

编辑：我得到的确切错误是 -

```
Exception in thread "main" java.lang.NoClassDefFoundError: jythonTest
Caused by: java.lang.ClassNotFoundException: jythonTest
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: jythonTest.  Program will exit. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:59:37.053

我认为答案是 CLASSPATH。

### 你好.py

```
print "Hello" 
```

让我们运行它

```
> python hello.py
Hello

> jython hello.py
Hello 
```

编译（我使用 py_compile 编译单个文件）

```
> jython -m py_compile hello.py 
```

运行`java`

```
> java -classpath d:\P\jython253\jython.jar;. hello$py
Hello 
```

注意类路径中的点。java需要在当前目录中找到您编译的类。

# sql - 带有动态查询的存储过程

> ID：15441024
> 
> 赞同：0
> 
> 时间：2013-03-15T19:52:40.070
> 
> 标签：sql, stored-procedures, dynamic-sql

我正在使用动态 SQL 编写存储过程。

在我的程序中，我说了大约 10 个类似列的表。

例如，如果我考虑`Designation`&`Department`表，`Designation`表有以下列：

```
Designation, Code, EntryBy, EntryOn, ModifiedBy, ModifiedOn 
```

和`Department`表有这些列：

```
Department, Code, EntryBy, EntryOn, ModifiedBy, ModifiedOn 
```

同样，我还有其他八张桌子。

在我的存储过程中，我需要更新数据并将数据插入所有表中。因此，我没有为每个表编写更新和插入语句，而是使用一个存储过程，它接受表名作为参数并检查该行是否已存在于该表中。

如果该行存在，则该记录将被更新，否则该记录将被插入到相应的表中。

```
 ALTER PROC UpdateMasterItems
    (
        @MasterTypeTmp  varchar(50),
        @NameTmp    varchar(50),
        @CodeTmp    varchar(10))
    AS
    BEGIN   
       DECLARE @CntTmp numeric(2,0)

       EXEC('select count(*)' + @CntTmp + ' from ' + @MasterTypeTmp + ' where ' + @MasterTypeTmp  + ' = ' + @NameTmp)

       IF(@CntTmp > 1)
       BEGIN
          EXEC('UPDATE ' + @MasterTypeTmp + ' SET ' + 'Code = ' + @CodeTmp + ', ModifiedBy = CURRENT_USER, MOdifiedOn = CURRENT_TIMESTAMP WHERE' + @MasterTypeTmp + ' = ' +  @NameTmp)
          RETURN 10
       END      
       ELSE
       BEGIN    
          EXEC('INSERT INTO ' + @MasterTypeTmp + '(' + @MasterTypeTmp + ', Code, EntryBy, EntryOn, ModifiedBy, ModifiedOn )  VALUES (' + @NameTmp + ',' + @CodeTmp + ',' + 'CURRENT_USER, CURRENT_TIMESTAMP, CURRENT_USER, CURRENT_TIMESTAMP )') 
          RETURN 11
       END
END 
```

表名在哪里`@MasterTypeTmp`（可以是`Department`/ `Designation`.....）

执行过程时出现错误：

**执行语句：**

```
EXEC UpdateMasterItems 'Designation', 'TestName', 'TestCode' 
```

**错误陈述：**

> *列名“TestName”无效。*
> 
> *列名“TestCode”无效。*

但是`TestName`&`TestCode`不是列名。这些是列的值。请让我知道我的动态查询是否错误或问题出在哪里！

提前致谢

穆尼卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:09:15.250

我认为错误消息是因为您使用`'`(ie;`'Designation'`是错误的) 包装了列名。应该`Designation`

但还有其他问题。

1.  我认为您不能在动态 sql 之外定义变量并在内部分配它们。因为`dynamic sql runs in a different session`和因此在范围之外定义的变量是未知的。（即；`@CntTmp`）

2.  即使您正在检查`@CntTmp > 1`您并没有真正为其分配 count(*) 值（由于原因 1 无论如何都不会工作）

3.  如果记录数> 99，您`@CntTmp`将溢出（如果您没有错误数据，则不是真正的问题）

如果您需要按照您描述的方式完成这项工作，您必须声明变量，检查记录的存在，然后更新/插入*`all within the same dynamic query`*。你可以不用变量使用`if exists (select ....) update ... else insert...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:13:15.467

首先，这部分会给你一个错误：`Error converting data type varchar to numeric.`

```
DECLARE @CntTmp numeric(2,0)
EXEC('select count(*)' + @CntTmp + ' from ' + @MasterTypeTmp + ' where ' + @MasterTypeTmp  + ' = ' + @NameTmp) 
```

因为`CntTmp`是数字，不能直接在该表达式中使用。

如果你改成这样：

```
EXEC('select count(*)' + cast(@CntTmp as varchar(30)) + ' from ' + @MasterTypeTmp + ' where ' + @MasterTypeTmp  + ' = ' + @NameTmp) 
```

它会给你一个错误，因为你不能在动态 SQL 中直接使用变量。此外，它不会给你输出，因为`CntTmp`它是空的。

因此，您可以创建另一个变量来存储从转换到的结果`numeric`，`varchar`然后执行[ISNULL](http://msdn.microsoft.com/en-us/library/ms184325.aspx)函数来为变量赋值（如果它为空）。

其次，您缺少`'`列值。

这是工作存储过程：

```
ALTER PROC UPDATEMASTERITEMS   
( @MASTERTYPETMP VARCHAR(50), @NAMETMP VARCHAR(50), @CODETMP VARCHAR(10))    
AS

BEGIN

DECLARE @CNTTMP NUMERIC(2,0)
DECLARE @CNTTMPVAL VARCHAR(30) = ISNULL(CAST(@CNTTMP AS VARCHAR(30)) , '')

EXEC ('SELECT COUNT(*) ' + @CNTTMPVAL + ' FROM ' + @MASTERTYPETMP + ' WHERE ' + @MASTERTYPETMP  + ' = ''' + @NAMETMP + '''')
IF(@CNTTMP > 1)
    BEGIN
     EXEC('UPDATE ' + @MASTERTYPETMP + ' SET ' + 'CODE = ''' + @CODETMP + ''', MODIFIEDBY = CURRENT_USER, MODIFIEDON = CURRENT_TIMESTAMP WHERE' + @MASTERTYPETMP + ' = ''' +  @NAMETMP + '')
     RETURN 10
    END
ELSE
    BEGIN 
    EXEC('INSERT INTO ' + @MASTERTYPETMP + '(' + @MASTERTYPETMP + ', CODE, ENTRYBY, ENTRYON, MODIFIEDBY, MODIFIEDON )  VALUES (''' + @NAMETMP + ''',''' + @CODETMP + ''',' + 'CURRENT_USER, CURRENT_TIMESTAMP, CURRENT_USER, CURRENT_TIMESTAMP )') 
     RETURN 11
    END

END 
```

无论如何，您可以使用[它来格式化您的 SQL](http://www.dpriver.com/pp/sqlformat.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:08:24.697

您的字符串连接丢失了一些`'`，数据库将这些值解释为列名：

```
EXEC('INSERT INTO ' + @MasterTypeTmp + '(' + @MasterTypeTmp + ', Code, EntryBy, EntryOn, ModifiedBy, ModifiedOn )  
VALUES (''' + @NameTmp + ''',''' + @CodeTmp + ''',' + 'CURRENT_USER, CURRENT_TIMESTAMP, CURRENT_USER, CURRENT_TIMESTAMP )') 
```

# c++ - 列表控件按特定列删除项目

> ID：15441026
> 
> 赞同：-5
> 
> 时间：2013-03-15T19:52:55.363
> 
> 标签：c++, winapi, listcontrol

如何删除仅知道特定列的特定项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:31:41.207

嗯，找到答案了..

```
LVITEM lvi;
ZeroMemory(&lvi, sizeof(LVITEM));
lvi.pszText = "SomeText";
lvi.iSubItem = 1;
SendMessage(GetDlgItem(hWindow, IDC_LIST_USERS), LVM_GETITEM, 0, (LPARAM)(&lvi));
SendMessage(GetDlgItem(hWindow, IDC_LIST_USERS) , LVM_DELETEITEM, lvi.iItem, 0); 
```

# xml - XML文件中的处理指令

> ID：15441027
> 
> 赞同：1
> 
> 时间：2013-03-15T19:52:58.417
> 
> 标签：xml

**处理指令：**用于向处理此文件的应用程序传递指令。处理指令采用以下语法编写：

```
<?xml version="1.0"?> 
```

为什么这是必要的？如果没有处理指令行，应用程序或机器就不能理解标签吗？这是标准还是建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:57:55.290

这不是处理指令。这是 XML 声明。

是的，它完全是可选的。仅当您的 XML 文件与默认值不匹配时才有必要，即`version="1.0"`,`encoding="UTF-8"`和`standalone="yes"`（并且这些不是实际属性，而是伪属性）。

XML 声明配置解析器，它不是结果文档的一部分。

相反，稍后可能会遵循的实际处理指令是文档*的*一部分。

是的，当然。[这是一个标准](http://www.w3.org/TR/REC-xml/#NT-XMLDecl)。

# visual-studio - VS 数据库项目和实体框架是否一起工作？

> ID：15441028
> 
> 赞同：8
> 
> 时间：2013-03-15T19:53:00.010
> 
> 标签：visual-studio, entity-framework, build, visual-studio-2012, database-project

我一直对 Visual Studio 数据库项目很感兴趣，虽然它们看起来很有能力，但除了简单的概念验证工作之外，我从未在任何程度上使用它们。我想在一个新项目中尝试这个，我也有兴趣在它上面使用一个 EF 层，但在过去的测试项目中，这需要付出一些体面的努力。

我很好奇：Visual Studio 是否成熟了其产品集成以支持构建数据库项目、在其之上构建 EF 层并最终构建代码的单一工作流，而不涉及中间步骤？

我们是一个小团队，没有专门的 SQL 开发人员，我们的主要目标是将数据库引入 Visual Studio 并使其在源代码控制 (TFS) 下得到很好的控制，并实现端到端之间的强集成。我们有兴趣成长为 EF，并且可能会通过将其视为简单的 ORM 工具来开始，如果可能的话。

有没有人真正做到这一点，可以提供对过程的洞察力？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-30T00:12:45.117

我们用过VS2014，工具看起来和早期版本差不多

我们在解决方案中有 EDMX 模型和一个 DB 项目，这是否意味着您需要使 db 项目保持最新。但这很容易做到，您只需将 EDMX 发布到本地框/目标然后可以将更改与本地模式比较导入项目。

所以他们仍然可以拥有模型驱动的数据库设计并使用数据库项目将更改部署到 Dev/Stage/Live 框，并且还可以通过自动部署进行发布。

db 项目有一个后期构建脚本选项，您可以在其中使用它来执行种子数据，还有一个预构建，如果需要在数据位于实时数据库上时更改字段类型的结构和类型，您可以在其中进行数据库操作。

架构比较工具在 Visual Studio 中相当不错 可以将数据库与数据库、数据库与项目或架构文件进行比较

# teechart - 获取鼠标指针下的 X 和 Y 值

> ID：15441029
> 
> 赞同：1
> 
> 时间：2013-03-15T19:53:01.070
> 
> 标签：teechart

我有一个简单的图表，仅使用带有单个 Y 轴的 TLineSeries。当鼠标指针在图表上移动时，我想获得与指针位置相关的 X 和 Y 值，而与任何系列无关。

我可以处理 MouseMove 事件并获取屏幕 X 和 Y 坐标，但我发现转换它们的唯一方法是通过 Series->XValues->Locate 和 Series->YValue->Locate 方法。

这有两个问题：

1 - 从 Series->YValue->Locate 返回的值始终为 -1，无论指针是否在系列线上。

2 – 从 Series->XValue->Locate 返回的值是 -1，除非指针位于包含系列线的图表的一部分上。

为什么 Series->YValue->Locate 总是返回 -1？

更重要的是，无论指针是否在带有系列线的图表的一部分上，我如何才能获取值？

我正在使用 Rad Studio XE3 附带的 TeeChart 版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:33:53.777

> 为什么 Series->YValue->Locate 总是返回 -1？

这是因为[Locate](http://www.steema.net/TeeChartDocs/TChartValueList.Locate.html)使用系列值并返回其在系列中的点索引。OnMouseMove 提供屏幕像素坐标，而不是系列值。

> 更重要的是，无论指针是否在带有系列线的图表的一部分上，我如何才能获取值？

您可以将轴用作参考而不是系列，例如：

```
procedure TForm2.Chart1MouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);
var
  XVal: double;
  YVal: double;
begin
  XVal:=Chart1.Axes.Bottom.CalcPosPoint(X);
  YVal:=Chart1.Axes.Left.CalcPosPoint(Y);

  Chart1.Title.Text[0]:=FormatFloat('#.##', XVal) + ' - ' + FormatFloat('#.##', YVal);
end; 
```

# c# - 将具有多个命名空间的 XML 反序列化为对象

> ID：15441030
> 
> 赞同：4
> 
> 时间：2013-03-15T19:53:01.727
> 
> 标签：c#, xml, deserialization

我正在尝试将此 XML 反序列化为 C# .NET 4.5 中的对象：

```
<DIDL-Lite xmlns:dc="http://purl.org/dc/elements/1.1/"
       xmlns:upnp="urn:schemas-upnp-org:metadata-1-0/upnp/"
       xmlns="urn:schemas-upnp-org:metadata-1-0/DIDL-Lite/">
    <item id="28" parentID="19" restricted="1">
        <dc:creator>Alicia Keys</dc:creator> 
        <dc:date>2003-01-01</dc:date>
        <dc:title>Gangsta Lovin&apos; (feat. Alicia Keys)</dc:title>
    </item>
</DIDL-Lite> 
```

代码：

我没有得到任何“项目”列表。该对象未反序列化。

```
MemoryStream reader = new MemmoryStream(System.Text.Encoding.Unicode.GetBytes(Result));
var ser = new XmlSerializer(typeof(DIDLLite));
DIDLLite device = (DIDLLite)ser.Deserialize(reader); 
```

类`DIDLLite`：

```
[XmlRoot("DIDL-Lite", Namespace = "urn:schemas-upnp-org:metadata-1-0/DIDL-Lite/")]
public class DIDLLite {
    DIDLLite() {
        this.serviceItem = new List<ContainerItem>();
    }

    [System.Xml.Serialization.XmlArrayItem("item", typeof(ServiceListTypeService), IsNullable = false)]
    List<ContainerItem> serviceItem = new List<ContainerItem>();
} 
```

类`ContainerItem`：

```
public class ContainerItem
{
    [System.Xml.Serialization.XmlAttribute("id")]
    public string id { get; set; }

    [System.Xml.Serialization.XmlAttribute("parentID")]
    public string parentID { get; set; }

    [System.Xml.Serialization.XmlAttribute("restricted")]
    public string restricted { get; set; }

    [System.Xml.Serialization.XmlAttribute("searchable")]
    public string searchable { get; set; }

    public string title { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:39:50.050

你有几个问题：

1.  您定义了一个`XmlArrayItem`属性 - 但实际上，在您的 XML 中，您没有任何项目列表。如果您想使用 Xml 数组构造，您的 XML 需要有这样的东西：

    ```
    <DIDL-Lite .....>
        <Items>
           <item id="28" parentID="19" restricted="1">
            ......
           </item>
           <item id="29" parentID="19" restricted="1">
            ......
           </item>
        </Items>
    </DIDL-Lite> 
    ```

    所以你需要在你的元素`<Items>...</Items>`周围有一个包装器。`<item>`

2.  你有这个声明：

    ```
    [XmlArrayItem("item", typeof(ServiceListTypeService), IsNullable = false)] 
    ```

    但是`ServiceListtypeService`定义在哪里？我看不到它的踪迹......

我稍微简化了你的代码 - 这很好用：

```
[XmlRoot("DIDL-Lite", Namespace = "urn:schemas-upnp-org:metadata-1-0/DIDL-Lite/")]
public class DIDLLite
{
    [XmlElement("item")]
    public ContainerItem Item { get; set; }
}

public class ContainerItem
{
    [XmlAttribute("id")]
    public string id { get; set; }

    [XmlAttribute("parentID")]
    public string parentID { get; set; }

    [XmlAttribute("restricted")]
    public string restricted { get; set; }

    [XmlAttribute("searchable")]
    public string searchable { get; set; }

    // you were missing these elements and their namespace

    [XmlElement(Namespace = "http://purl.org/dc/elements/1.1/")]
    public string creator { get; set; }
    [XmlElement(Namespace = "http://purl.org/dc/elements/1.1/")]
    public string date { get; set; }
    [XmlElement(Namespace = "http://purl.org/dc/elements/1.1/")]
    public string title { get; set; }
} 
```

现在，当我运行您的代码来反序列化您的 XML 时，我确实很好地填充了对象。

# asp.net - SQL 注入与 Microsoft 数据访问应用程序块 SQL 帮助程序类

> ID：15441040
> 
> 赞同：0
> 
> 时间：2013-03-15T19:54:07.773
> 
> 标签：asp.net, c#-2.0, sql-injection

我正在使用 Microsoft 助手类（[http://www.sharpdeveloper.net/source/SqlHelper-Source-Code-cs.html](http://www.sharpdeveloper.net/source/SqlHelper-Source-Code-cs.html)）

我正在使用这种方法在表中插入数据：

```
string query = @"INSERT INTO table(col1, col2) Values(@val1, @val2)";
SqlParameter[] param = new SqlParameter[2];
param[0] = new SqlParameter("@val1", "abc");
param[1] = new SqlParameter("@val2", 123);
int rows = SqlHelper.ExecuteNonQuery(DataAccess.ConnectionString, CommandType.Text, query, param); 
```

我想知道使用这种方式（即 SQL 注入等）是否存在任何安全风险？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:55:15.947

您发布的代码很好，并为您的 SQL 命令的所有变量组件使用参数，因此它不受 SQL 注入攻击。

# xml - 是否有用于可读性的正式 XML 编码标准？

> ID：15441043
> 
> 赞同：-2
> 
> 时间：2013-03-15T19:54:28.073
> 
> 标签：xml

我是一家商店的合同程序员，我将提供他们的第一个 Android 和第一个 .Net WPF 产品。在我完成之后，他们将不得不维护它，但是因为这是他们的第一个，所以他们没有针对 XML（和 XAML）编码风格的现有标准或约定，也没有意见。

我知道 XML 最初的构想是更多地用于机器消费而不是人类可读性，但现实是 Android 的 XML 用于其布局/UI 和 WPF 的 XAML 通常需要大量的手动编辑和阅读。

在其他商店，我遵循现有的惯例，但我不得不承认，对于我自己的个人物品，这些年来我并没有那么一致。我见过无数不同风格的缩进、空格、注释、关闭元素等，例如，有些人将所有属性与开始元素标签放在同一行，有些人在新行开始属性，有些人使用一个每个属性的行等

所以**我的问题是**：是否存在由标准机构（W3C？）或主要公司编写的用于编码可读 XML 的正式标准或指南，如果有，它是什么？

我只是发布这个，因为在广泛的谷歌搜索之后我没有看到一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:04:55.367

不，[语言规范](http://www.w3.org/TR/REC-xml/#sec-conformance)中没有样式指南之类的东西。

Spec 仅根据文档结构定义格式良好的文档，而不考虑元素之间的空格。

关于注释，介于`<!--`和之间`-->`（参见[XML 规范的第 2.5 节](http://www.w3.org/TR/REC-xml/#sec-comments)）。如果你想使用可能被解析器误认为是标记的字符，你也可以使用`CDATA`section。

如果我是你，我会选择一些符号并在你的项目中保持一致。Android 的 Eclipse 插件使用某种特定样式的 XML 格式，因此您可以坚持使用。

# symfony - Symfony2:FOSUserBundle：获取有限制的用户

> ID：15441045
> 
> 赞同：1
> 
> 时间：2013-03-15T19:54:33.047
> 
> 标签：symfony, fosuserbundle

我想通过 FOSUserBundle 添加用户。我可以做这个：

```
$userManager = $this->get('fos_user.user_manager');
$users = $userManager->findUsers(); 
```

但是，我有很多用户并且想使用限制。如何使用 FOSUserBundle 做到这一点？

我有一个单独的查询，或者您可以使用 User 实体的存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:17:27.700

UserManager 没有办法限制结果。我建议只使用存储库并编写自己的方法。它应该是一个非常简单的方法，例如：

```
$qb = $this->getEntityManager()->createQueryBuilder();

$qb->select('u');
$qb->from('MyBundle:UserEntity', 'u');

$qb->setMaxResults($limit);

$qb->getQuery()->getResult(); 
```

# java - 创建 SQL 表

> ID：15441057
> 
> 赞同：-6
> 
> 时间：2013-03-15T19:55:15.380
> 
> 标签：java, sql

我将如何创建一个在日志表中存储名称、年龄的 SQL 文件。我对 SQL 有非常非常基本的了解，但我没有足够的能力去做我需要用 Java 做的事情。我寻找了一些教程，但没有找到我想做的事情。

请注意，我不想连接到实际的数据库，而是创建一个可以导入 SQL 数据库的文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T19:58:37.260

您需要[创建一个数据库表](http://msdn.microsoft.com/en-us/library/ms174979.aspx)，然后连接到数据库并使用[`INSERT`](http://msdn.microsoft.com/en-us/library/ms174335.aspx)命令向表中添加数据行。

我认为这个问题对于堆栈溢出来说有点太宽泛了，你应该做更多的研究。查看上面的链接，[`java.sql`](http://docs.oracle.com/javase/6/docs/api/java/sql/package-summary.html)代码以及[关系数据库](http://en.wikipedia.org/wiki/Relational_database)的一般研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:02:50.530

> 请注意，我不想连接到实际的数据库，而是创建一个可以导入 SQL 数据库的文件

然后编写 Java 程序以 CSV 格式写入数据。逗号分隔的文本文件可以导入到基于 SQL 的数据库中。

# c# - EmguCV中图像之间的乘法运算

> ID：15441060
> 
> 赞同：2
> 
> 时间：2013-03-15T19:55:20.870
> 
> 标签：c#, emgucv

我想知道 EmguCV 是否允许一种简单而有效的方法来执行 MATLAB 中的以下行：

```
C = A .* B 
```

（假设 A、B、C 是表示具有相同维度和类型的灰度图像的矩阵）。

假设我想做上面相同的操作，但是使用`Image<Gray, byte>`EmguCV 的两个对象，那么问题是：**有没有办法将两个相同尺寸的图像逐点相乘？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T14:24:45.373

我解决了这个问题。假设我们有三个灰度图像，以这种方式定义：

```
//We can use, for example, two files with the same dimensions, e.g. 100x100
Image<Gray, byte> A = new Image<Gray, byte>("imgA_100x100.jpg");
Image<Gray, byte> B = new Image<Gray, byte>("imgB_100x100.jpg");

//The image C will be the result of point-by-point multiplication
//We need to initialize it
Image<Gray, byte> C = new Image<Gray, byte>(A.Width, A.Height); 
```

为了执行乘法，您只需要使用以下代码：

```
CvInvoke.cvMul(A.Ptr, B.Ptr, C.Ptr, scale); 
```

上面的行使用我称为的比例因子逐点执行乘法`scale`。使用伪代码来解释上面代码的含义，我们可以说：

```
C[i, j] = A[i, j] * B[i, j] * scale 
```

# playframework - 播放框架2：控制器之间传递java对象

> ID：15441061
> 
> 赞同：1
> 
> 时间：2013-03-15T19:55:36.393
> 
> 标签：playframework, playframework-2.0

我有一个 java User 对象，我想将它从我的登录控制器传递到我的仪表板控制器。我读了一堆，我正在尝试以下实现

```
public static Result authenticate(){
    Form<LoginForm> loginform = Form.form(LoginForm.class).bindFromRequest();
    if(loginform.hasErrors()){
        return badRequest(login.render(loginform));
    }
    else{
        session().clear();
        AppUser user = AppUser.getUserByEmail(loginform.get().email);
        Context.current().args.put("user", user);
        return redirect(routes.DashBoard.index());
    } 
```

和我的仪表板控制器

```
public static Result index(){
    AppUser user = (AppUser) Context.current().args.get("user");
    return ok(views.html.dashboard.index.render(user));
} 
```

这导致空指针异常

这是因为这两个请求当然不是同一个请求。

如何以一种友好的方式解决这个问题顺便说一句，我在文档中看到了一些关于动作组合的东西，但我不明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:35:16.063

尽管我同意 Mauno 的回答，但我想补充一点，可以使用[缓存 API](http://www.playframework.com/documentation/2.1.0/JavaCache)来执行您的要求。

要记住的一件事是缓存在多个用户之间是相同的。如果您希望能够从缓存中访问特定的用户对象，那么您将必须拥有一个唯一的 ID。您还将在请求之间存储该 ID。玩游戏是一种简单的方法。

这是一个例子

```
public static Result authenticate(){
    Form<LoginForm> loginform = Form.form(LoginForm.class).bindFromRequest();
    if(loginform.hasErrors()){
        return badRequest(login.render(loginform));
    }
    else{
        session().clear();
        AppUser user = AppUser.getUserByEmail(loginform.get().email);

        String uuid= java.util.UUID.randomUUID().toString();
        Cache.set(uuid,user);
        //store uuid in session for extracting the proper user from cache later
        session("uuid",uuid); 

        return redirect(routes.DashBoard.index());
    }

public static Result index(){
    //gather uuid stored in session (cookies)
    String uuid = session("uuid") 
    AppUser user = Cache.get(uuid);

    return ok(views.html.dashboard.index.render(user));
} 
```

此外，这些对象不会有可预测的寿命，因此您必须确保检查它们的存在并可能重新创建对象。

**编辑**：我不确定最后一条语句，在 playframework 1 中，如果缓存中的对象有一段时间不使用，它们将被删除，但是[从这篇文章](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/dOY5YpyYJfM)中可以看出，如果你没有在 playframework 2 中指定超时，默认情况下，它们可能会无限期地持续存在。这实际上取决于与 play api 一起使用的配置/模块。

对于您描述的情况，我不会推荐此解决方案。数据库是存储此信息的合理位置，您应该只检索每个请求的用户数据。

只想说对象的缓存是可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T08:13:03.910

*注意：由于您的问题通常是关于“**在动作之间传递对象**”，因此迈克的回答最适合您的需求，结论是：使用缓存和/或准备充分的 SQL 语句（意味着在没有其他关系的情况下目前尽可能少地获取数据等)*

我认为这是“接受答案”的最佳人选。

另一方面，从讨论中可以清楚地看出，您是在 auth 的上下文中询问，这是我的 2cc：

*   Mauno 的回答描述了典型的身份验证方法。是的，它需要额外的查询，但是如果您将在嵌入模式下使用示例 H2 数据库，它应该不是一个大问题 - 它很快。此外，您可以使用缓存 API 对其进行一些优化。
*   实际上这种方法**存在**一些安全漏洞......虽然会话cookie是签名的，所以它们理论上不能被操纵......这并不能改变事实，它们可以被其他人劫持和重用。最简单的解决方案是在服务器端保存会话 - 在数据库或缓存中，因此您可以比较更多详细信息，如 IP、指纹等。最重要的是，您还可以在注销或一段时间不活动后使整个服务器端会话无效，所以即使攻击者会抢到会话，他也不能再重用它了。当然，这种方法会创建额外的数据库查询，您需要自己选择对您来说更重要的内容，安全性或性能:)
*   已准备好使用授权/身份验证堆栈： [Play-Authenticate](https://github.com/joscha/play-authenticate)，被劫持的可能性警告我已经在其上创建了一个示例，以演示如何使用缓存和/或 DB 添加会话处理：[https://github。 com/biesior/play-authenticate/commits/2.0.4_sessions/samples/java/play-authenticate-usage](https://github.com/biesior/play-authenticate/commits/2.0.4_sessions/samples/java/play-authenticate-usage) - 检查我最新提交的评论和代码差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T20:11:57.270

你不应该这样做（甚至不需要这样做），这实际上是我在开始使用 play 时也在考虑的事情 - 然后我意识到我没有使用框架来使用它。

动作组合实际上是用于保护某些被访问的方法或控制器的东西。（尽管您也可以将它用于其他事情）。- 但是在您实现登录时需要它。

而不是传递你的`User`对象..你的用户`email`（用户名）被放入会话中，以后不能在你的控制器端和模板中检索它。（任何控制器或模板。）

```
public static Result authenticate() {
    Form<Login> loginForm = form(Login.class).bindFromRequest();
    if (loginForm.hasErrors()) {
        return badRequest(login.render(loginForm));
    } else {
        session().clear();
        session("email", loginForm.get().email);
        return redirect(
            routes.Application.index()
        );
    }
} 
```

我强烈建议您查看**完整**的 zentask 教程，如果您只是更想了解登录，可以查看[zentask 第 4 页](http://www.playframework.com/documentation/2.1.0/JavaGuide4)（工作 zentask 示例也位于您`play/samples/java/zentasks`的内部，因此非常容易上手）。

相关部分包括设置自己的登录表单、视图、带有`authenticate`方法和`Secured`类的控制器来处理实际的方法和或控制器动作保护。不要忘记将您的用户持久保存到数据库 - 否则没有太多要检查的内容；）

**编辑：**

如果您打开 zentask 教程，您可以看到控制器需要身份验证以及从会话中获取用户名时的示例，请参阅注解：`@Security.Authenticated(Secured.class)`以及`request().username()`将用户名作为字符串返回的方法。请参阅：[Http.Request.html#username( ) 文件](http://www.playframework.com/documentation/api/2.0/java/play/mvc/Http.Request.html#username%28%29)

```
@Security.Authenticated(Secured.class)
public class Projects extends Controller {
    /**
     * Display the dashboard.
     */
    public static Result index() {
        return ok(
            dashboard.render(
                Project.findInvolving(request().username()),
                Task.findTodoInvolving(request().username()),
                User.find.byId(request().username())
            )
        );
    }

... 
```

方法本身例如从数据库`User.find.byId(request().username())`加载完整`User`的模型以呈现模型。:)

但是请阅读我提供的教程，它的完整示例。干杯。

# php - PHP 5.3 中的排序（$new，SORT_NATURAL | SORT_FLAG_CASE）

> ID：15441063
> 
> 赞同：7
> 
> 时间：2013-03-15T19:55:42.500
> 
> 标签：php, sorting

```
sort( $new, SORT_NATURAL | SORT_FLAG_CASE ); 
```

SORT_NATURAL 是 php 5.4 中的新功能，但我的本地主机（ubuntu 12.04）上运行了 5.3.10，因此并不打算升级。

什么是 php 5.3 中的等价物，我读过这就像 natsort。

是`natsort( $new, SORT_FLAG_CASE );`一样的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T20:03:28.067

[PHP 手册](http://php.net/sort)指出这与它`natsort ($array)`的等价`sort($array,SORT_NATURAL);`点也相同，`SORT_FLAG_CASE`直到 5.4.0 才添加。

您可以使用[`natcasesort($array)`](http://php.net/natcasesort)which 等效于`sort($array,SORT_NATURAL | SORT_FLAG_CASE)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-08T22:01:36.120

虽然它们本质上是相同的，但要注意的重要区别`natsort($array)`和`sort($array, SORT_NATURAL)`是关键关联。

`natsort()`维护键关联，这意味着键和值保持链接。

但是，`sort()`不是主要关联，因此值会根据其新顺序重新分配键。

# php - joomla 在一个函数中使用多个数据库查询

> ID：15441065
> 
> 赞同：3
> 
> 时间：2013-03-15T19:55:47.403
> 
> 标签：php, joomla, joomla2.5

在某些功能中，我可能需要像这样进行一些查询：

```
 $user = & JFactory::getUser();
    $db = & JFactory::getDBO();
    $query  = $db->getQuery(true);

    $query->select('id');
    $query->from($db->quoteName('#__users'));
    $query->where('username='.$db->quote($response->username));
    $db->setQuery($query);
    $user_id = $db->loadResult();

    if ($user_id == "") 
    {
           //do something
    }

    $query1  = $db->getQuery(true);
    $query1->select('app_id');
    $query1->from($db->quoteName('#__app_ids'));
    $query1->where('app_descr='.$db->quote($this->app_descr).' AND app_valid=TRUE');
    $db->setQuery($query1);
    $app_id = $db->loadResult(); 
```

我发现如果我不更改`query`为，`query1`我将无法使其适用于后续查询。在 Joomla 之外，我从来没有这样做过，因为我关闭了 mysql 连接，只要它的顺序正确，就使用相同的变量，一切都很好。

两个问题：

1.  这是正确的吗？还是有更好的方法来做到这一点？
2.  我需要检查mysql失败`loadResult`吗？我该怎么办。经常查看 Joomla 核心，我什么也看不到，但有时需要混合处理这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T20:47:54.877

1）它应该使用相同的变量名，因为您将获得一个新的查询对象，因为您的方法参数设置为`true`. `$query->clear();`在获取查询对象后尝试调用

```
$query  = $db->getQuery(true);
$query->clear();
$query->select('app_id'); 
```

2）在 Joomla 3 中，它应该类似于

```
try
{
    $db->setQuery($query);
    $user_id = $db->loadResult();
}
catch (RuntimeException $e)
{
    $e->getMessage();
} 
```

在 Joomla 2.5 中

```
if ($db->getErrorNum()) {
    JError::raiseWarning(500, $db->getErrorMsg());
} 
```

还有，改变

```
$user = & JFactory::getUser();
$db = & JFactory::getDBO(); 
```

至

```
$user = JFactory::getUser();
$db = JFactory::getDBO(); 
```

无论如何，在 PHP 5 中对象都是通过引用返回的，并且自 php 5.3+ 起它会抛出一个警告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-28T19:02:15.330

好吧，在 Joomla*上，JFactory::getDBO()*总是返回相同的连接实例，（在今天的实际版本中）所以每次你设置 SQL 时，你确实是在重写以前的 SQL。在简历中，这段代码需要多个连接，这种方式不支持，你需要编写自己的 JDatabaseDriver 版本，也许你自己的全局静态数组版本来控制你自己的 mysqli 连接池。PHP 在池连接方面很差，不像 JAVA 或 .NET，要快速编写代码，您需要考虑逻辑并尝试每次只使用一个连接，每次打开一个查询，总是认为*JFactory::获取 DBO()*不是线程安全的，请注意这一点。如果没有提交或回滚，您永远无法在一个 php 中启动一个事务，这会导致其他页面的执行出现问题。

# asp.net-mvc - Razor MVC4 Url.Action 不起作用

> ID：15441085
> 
> 赞同：7
> 
> 时间：2013-03-15T19:56:30.480
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-routing, url.action

我在剃刀视图中有如下代码

```
<a href="@Url.Action("Details", "Mycontr", new {id =16}, Request.Url.Scheme)"> 
```

当我双击这个项目时，它被重定向到下面的 Url

```
http://localhost:49280/Mycontr/Section/@Url.Action( 
```

但是，虽然预期是

```
http://localhost:49280/Mycontr/Details/16 
```

下面是RouteConfig

```
routes.MapRoute(
   name: "Capsule",
   url: "Mycontr/Details/{id}",
   defaults: new { controller = "Mycontr", action = "Details", id = UrlParameter.Optional }
 );
 routes.MapRoute(
   name: "Section",
   url: "Mycontr/Section/{id}",
   defaults: new { controller = "Mycontr", action = "Section", id = UrlParameter.Optional }
 ); 
```

请建议。

我缩小了问题的范围。Html.Raw 导致问题。我有这样的代码

```
@Html.Raw(HttpUtility.HtmlDecode(Model.sContent)) 
```

该变量包含生成的具有 Ur.Action 的 html。如果我只是将 html 生成的代码直接放在没有 Html.Raw 的 razor 视图中，它工作正常。但是，如果我取出 Html.Raw 运行时生成的 html 脚本，显示如下

```
&lt;style type=&#39;text/css&#39;&gt;&lt;/style&gt;&lt;center&gt;&lt;div style=&quot;width:460px;&quot;&gt;&lt;div style=&quot;width: 460px; float: left;&quot;&gt;&lt;div s... 
```

有没有一种方法可以在不使用 Html.Raw 编码的情况下在变量中显示 html 脚本？通过使用 HtmlString 代替字符串变量来保存生成的 Html 脚本，解决了一半的问题，但 HtmlString 无法解码字符串中的 @Url.Action 语法。

下面是我一直在努力让它工作的最新代码。请帮忙。

```
 string templFile = string.Format("{0}\\DivTemplate.htm", path);
            HtmlDocument divDoc = new HtmlDocument();
            StreamReader sRdr = new StreamReader(templFile, Encoding.UTF8);
            divDoc.Load(sRdr);
            XmlNodeList divs = regions.ChildNodes;
            IEnumerator enmrDivs  = divs.GetEnumerator();
            while (enmrDivs.MoveNext())
            {
                XmlNode node = (XmlNode)enmrDivs.Current;
                string divId = node["DivId"].InnerText;
                string capId = node["CapsuleId"].InnerText;
                HtmlString sUrlAct = new HtmlString("@Url.Action(\"Capsule\", \"Publication\", new { id=\""+capId+"\" }))");
                //string sUrlAct = "@Url.Action(\"Capsule\", \"Publication\", new { id=\""+capId+"\"})";
                string divFile = string.Format("{0}\\{1}.htm", path, divId);

                HtmlDocument divRgnDoc = new HtmlDocument();
                StreamReader sR = new StreamReader(divFile, Encoding.UTF8);
                divRgnDoc.Load(sR);
                foreach (HtmlNode link in divRgnDoc.DocumentNode.SelectNodes("//a[@href]"))
                {
                    link.Attributes.RemoveAll();
                    link.Attributes.Add("href", sUrlAct.ToString());
                }
                HtmlNode divNode = divDoc.GetElementbyId(divId);
                divNode.AppendChild(divRgnDoc.DocumentNode.FirstChild.CloneNode(true));
                sR.Close();
            }

            sContent = new HtmlString (divDoc.DocumentNode.InnerHtml);
            sRdr.Close(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-17T09:50:56.913

我知道它有点晚了，但我在寻找某些东西时遇到了这篇文章。

在您的代码中，问题在于您的锚标记和双引号。

```
<a href="@Url.Action("Details", "Mycontr", new {id =16}, Request.Url.Scheme)"> 
```

您在技术上告诉解析器您正在引用**“URL”**（双引号）之间的超链接，这意味着 href 是**@Url.Action(**。您可以这样做（使用单引号来分配您的 href）并希望有效

```
<a href='@Url.Action("Details", "Mycontr", new {id =16}, Request.Url.Scheme)'> 
```

现在你的 href 将是**@Url.Action("Details", "Mycontr", new {id =16}, Request.Url.Scheme)**

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-03-17T08:16:35.313

我已经解决了这个问题。我真的不需要@Url.Action 到href。我刚刚将代码替换为逻辑路径，如下所示

```
/Publication/Capsule/ + capId 
```

[这个链接](https://stackoverflow.com/questions/8992721/how-to-call-url-action-in-mvc-with-javascript-function)帮助我解决了这个问题。感谢 Jorge 节省了工作时间 :)

# objective-c - 如何获取 NSMutableString 数据并将其放在不同的字符串中？

> ID：15441086
> 
> 赞同：-1
> 
> 时间：2013-03-15T19:56:34.250
> 
> 标签：objective-c, core-data

我有一个包含数据的方法。我想创建该数据的字符串并将其写入文本文件。我创建了一个写入文本的方法。如何将 UpLoadDeviceData 方法中的 NSMutableString 数据获取到我的 writetotext 方法的 string* 内容？这是提取数据的方法：

这是我写到文本的方法：

```
-(void) writeToTextFile{

    //get mydocuments dir
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    // System's date and timestamp
    NSDate *currentDate = [NSDate date]; 
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"MM.dd.YYYY HH:mm:ss"];
    NSString *dateString = [dateFormatter stringFromDate:currentDate];
    // NSLog(@"%@",dateString); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:54:46.493

您可以从可变字符串创建一个非可变字符串并写入文件：

```
NSMutableString *theMutableString; 
NSString *nonMutableString = [NSString stringWithString:theMutableString]; 
[nonMutableString writeToFile:path atomically:YES encoding:NSUTF8Encoding error:nil]; 
```

或者，更短的，将可变字符串写入文件：

```
[theMutableString writeToFile:path atomically:YES encoding:NSUTF8Encoding error:nil]; + 
```

关于如何构造更长的字符串的一些话：

*   如果要将字符串附加到可变字符串，请使用`appendString:`.

*   效率低得多的方法是使用`NSString`类方法`stringByAppendingString:`。这会分配一个新字符串并产生不必要的开销。

*   您首选的方法，使用 then`NSString`类方法`stringWithFormat:`更糟糕，因为现在需要额外的工作来扫描格式字符串。

因此：最好的方法是逐个构造可变字符串，然后将其写入单行文件中。

# iphone - 如何为多个属性解析 XML？

> ID：15441088
> 
> 赞同：0
> 
> 时间：2013-03-15T19:56:45.150
> 
> 标签：iphone, ios, xml-parsing, attributes, nsdictionary

高度我是 iphone 开发的菜鸟，我正在尝试使用包含多个属性的元素解析 xml。我有几个关于解析 XML 的教程，但没有一个显示解析具有多个属性的元素的步骤。我正在尝试使用 NSXMLParser 解析 xml。我想解析 media:thumbnail 元素的第一次出现以获取第二个属性的值。任何帮助是极大的赞赏。

我的代码：

//XML

```
<item>
   <title>March 15 AM Metals Commentary: Eric Zuccarelli</title>
   <link>http://link.brightcove.com/services/link/bcpid1683318714001/bclid1644543007001/bctid2228319176001?src=mrss</link>
   <description>Eric Zuccarelli, Independent Copper Trader</description>
   <guid>http://link.brightcove.com/services/link/bcpid1683318714001/bclid1644543007001/bctid2228319176001?src=mrss</guid>
   <pubDate>Fri, 15 Mar 2013 06:40:38 -0700</pubDate>
   <media:player height="546" url="http://link.brightcove.com/services/link/bcpid1683318714001/bclid1644543007001/bctid2228319176001?src=mrss" width="966" / >
   <media:keywords>commentary,CME Group,financial products,cmedaily,nymex,metals,youtube,Market Commentary,Zuccarelli</media:keywords>
   <media:thumbnail height="90" url="http://brightcove.vo.llnwd.net/d21/unsecured/media/49919183001/49919183001_2228333209001_th-514324d6e4b02e906f7476ba-806787304001.jpg?pubId=49919183001" width="120" / >
   <media:thumbnail height="360" url="http://brightcove.vo.llnwd.net/d21/unsecured/media/49919183001/49919183001_2228333208001_vs-514324d6e4b02e906f7476ba-806787304001.jpg?pubId=49919183001" width="480" / >
   <media:category>Metals</media:category>
   <bc:playerid>1683318714001</bc:playerid>
   <bc:lineupid>1644543007001</bc:lineupid>
   <bc:titleid>2228319176001</bc:titleid>
   <bc:duration>215</bc:duration>
   <dcterms:valid / >
   <bc:accountid>49919183001</bc:accountid>
</item> 
```

我的代码如下：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{            
    //NSLog(@"found this element: %@", elementName);
    currentElement = [elementName copy];
    if ([elementName isEqualToString:@"item"]) {
        // clear out our story item caches...
        item = [[NSMutableDictionary alloc] init];
        currentTitle = [[NSMutableString alloc] init];
        currentDate = [[NSMutableString alloc] init];
        currentSummary = [[NSMutableString alloc] init];
        currentLink = [[NSMutableString alloc] init];
        currentBright = [[NSMutableString alloc] init];
        if([elementName isEqualToString:@"media:thumbnail"]){
            if([attributeDict objectForKey:@"height"]==90){
                currentBright = [attributeDict objectForKey:@"url"];
                NSLog(@"Brightcove Url:%@", currentBright);  //<--Not reaching this point.
            }
        } 
    }
} 
```

编辑

```
if([elementName isEqualToString:@"media:thumbnail"]&&[attributeDict objectForKey:@"height"]==90){
    currentBright = [attributeDict objectForKey:@"         
    NSLog(@"Brightcove Url:%@", currentBright);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:43:54.137

试试这个....

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {          

  currentElement = [elementName copy];
  if ([elementName isEqualToString:@"item"]) {
    item = [[NSMutableDictionary alloc] init];
    currentTitle = [[NSMutableString alloc] init];
    currentDate = [[NSMutableString alloc] init];
    currentSummary = [[NSMutableString alloc] init];
    currentLink = [[NSMutableString alloc] init];
    currentBright = [[NSMutableString alloc] init];
 }
 else if([elementName isEqualToString:@"media:thumbnail"]) {
    if([attributeDict objectForKey:@"height"]==90) {
         currentBright = [attributeDict objectForKey:@"url"];
         NSLog(@"Brightcove Url:%@", currentBright); 
    }
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:11:06.350

你永远不会达到你的第二个或第三个条件，因为 elementName 怎么能在没有被推进的情况下发生变化？相反，您应该取消嵌套条件。

现在发生的事情是：

-didStartTag

ElementName = item -> 第一个条件命中 -> 第二个失败

-didStartTag

ElementName = title -> 第一个条件失败

ETC....

# php - modx php 获取当前页面名称

> ID：15441091
> 
> 赞同：1
> 
> 时间：2013-03-15T19:56:51.010
> 
> 标签：php, modx

在 ModX 中，我试图根据用户所在的页面进行简单的重定向。在我的网站上，我有一个块，其中包含指向“关于我们”、“职业”等页面的各种链接。这个夹头用于网站上的所有页面。

我的问题从这里开始 - 在“职业”页面中，有一个指向新页面的链接，其中包含所有可用的职位发布。我想这样当用户在“职业”页面上时，单击块上“职业”页面的链接会将他们直接带到职位发布页面，而不是让他们直接返回“职业”页面。

职业页面的网址采用以下格式：

```
www.example.com/index.php?q=careers.html 
```

因此，如果用户在“职业”页面上，我的代码块中的代码将重定向到工作列表：

```
<?php
    if ($_SERVER['PHP_SELF'] == "index.php?q=careers.html") {
      echo '<p><a href="www.joblistsite.com">Careers</a></p>';
    } 
    else {
      echo '<p><a href="index.php?q=careers.html">Careers</a></p>';
    }
?> 
```

但这不起作用。它继续链接回职业页面而不是工作列表页面。我试过使用页面的 ID，但也没有。我应该使用**if**语句来获取 ModX 中的当前页面？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:06:09.380

The above solutions would work (especially WayFinder) but what I would suggest is to use MODX built in functionality which allows you to specify page alias to generate SEO friendly urls. Such alias can be used to easily locate the current page.

Simple and yet effective solution is to use page alias and compare it to the current one:

```
$page_alias = $modx->resource->get('alias'); // get alias of the current page

if($page_alias == 'something'){
// do something
} 
```

If you deal with multi-level pages you may want to get the resource parent to make the above work more efficently:

```
$parent = $modx->resource->get('parent'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T21:48:45.173

我猜你对MODX很陌生。通常，[Wayfinder](http://rtfm.modx.com/display/ADDON/Wayfinder)用于构建动态菜单，避免像您正在做的那样需要硬编码的解决方案。

开始： [http ://rtfm.modx.com/display/ADDON/Wayfinder+Introductory+Examples](http://rtfm.modx.com/display/ADDON/Wayfinder+Introductory+Examples)

To switch the href attribute like you want to do, you can specify a different `&hereTpl` parameter which will be displayed for the menu item relating to the current page. The `www.joblistsite.com` url might be contained in a Template Variable set on each page.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:11:33.083

我没有使用 modx 的经验，但确定这一点的最佳选择是调试`$_SERVER`变量并检查其中的各种“键”的内容；

```
echo '<pre>'; print_r($_SERVER); echo '</pre>'; 
```

# c# - 将控件集中在 TableLayoutPanel 中

> ID：15441096
> 
> 赞同：2
> 
> 时间：2013-03-15T19:57:05.603
> 
> 标签：c#, tablelayoutpanel

我开始使用 C# 并尝试创建一个包含许多不同控件的表单。为了简单起见，我使用 a`TableLayoutPanel`来处理格式。但是，我希望所有控件都集中在各自的单元格中。经过一番搜索，我找到[了这个页面](https://stackoverflow.com/questions/491399/centering-controls-within-a-form-in-net-winforms)，它表明要这样做，您只需设置`control.Anchor = AnchorStyles.None`并且控件将在其单元格中居中。

这确实工作得很好，但我现在发现了一个奇怪的行为。我现在开始构建表单，所以它完全是裸露的，上面有一个简单的图表，下面有一个文本框。完成后，图表将占据面板的整个第一行，所有其余控件将分布在其下方。

因此，我打算简单地设置`panel.SetColumnSpan(graph, 2)`（在两列的情况下）。这正如预期的那样工作，只是现在下面的 TextBox 不再集中。

这是我到目前为止的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Windows.Forms.DataVisualization.Charting;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Form form = new Form();
            form.AutoSize = true;
            form.FormBorderStyle = FormBorderStyle.FixedDialog;

            Chart chart = new Chart();
            chart.Anchor = AnchorStyles.None;
            //...

            TextBox text = new TextBox();
            text.Text = "A";
            text.Anchor = AnchorStyles.None;

            TableLayoutPanel box = new TableLayoutPanel();
            box.AutoSize = true;
            box.RowCount = 2;
            box.ColumnCount = 2;
            box.Controls.Add(chart,0,0);
            box.SetColumnSpan(chart, 2);
            box.Controls.Add(text,0,1);

            form.Controls.Add(box);
            form.ShowDialog();
        }
    }
} 
```

以下是`box.SetColumnSpan`注释掉的结果： ![已注释掉](../Images/0f4fd6788f39d89d6f316273de81db97.png)

并且随着它的活跃：
![积极的](../Images/03467f1bedda94831865372b8e98c492.png)

* * *

更新：使用 ColumnSpan(2) 设置 TextBox 也可以，但它有点过分了。例如，如果我想在第二行有两个 TextBox，我希望它们每个都在各自的单元格中居中。

在这种情况下，我现在添加第二个文本框：

```
 TextBox text2 = new TextBox();
        text2.Text = "B";
        text2.Anchor = AnchorStyles.None; 
```

并将其添加到面板中：

```
 TableLayoutPanel box = new TableLayoutPanel();
    box.AutoSize = true;
    box.RowCount = 2;
    box.ColumnCount = 2;
    box.Controls.Add(chart,0,0);
    box.SetColumnSpan(chart, 2);
    box.Controls.Add(text,0,1);
    box.Controls.Add(text2, 1, 1); 
```

然而，结果再一次不能令人满意：每个文本框显然都是“左对齐”的。 [![两个文本框都是左对齐的](../Images/e70b9753cd5ec0b217853d793ea2801d.png)](https://i.stack.imgur.com/XxCpp.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:42:31.487

更新：您的代码缺少列样式。只需设置为这样，你就完成了：

```
this.box.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 50F));
this.box.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 50F)); 
```

* * *

为了使您的文本框在表单（TableLayoutPanel）的中心对齐，请将列跨度也设置为 2。如果不是，则根据文本框的大小，它位于第一列的中心。

```
this.box.ColumnCount = 2;
this.box.RowCount = 2;
this.box.Controls.Add(this.chart, 0, 0);
this.box.Controls.Add(this.text, 0, 1);

this.box.SetColumnSpan(this.chart, 2);

this.text.Anchor = System.Windows.Forms.AnchorStyles.None; 
```

给

![在此处输入图像描述](../Images/54724d89d78547e84a942e6b2e615044.png)

并设置：

```
this.box.SetColumnSpan(this.text, 2); 
```

![在此处输入图像描述](../Images/968902d0b01a69d6254ca2dd86c29884.png)

并且没有文本列跨度，但有文本框：

![在此处输入图像描述](../Images/4e33223da3dfee1e31db9c9d36d6ecc1.png)

# c# - 在任务完成之前等待不阻塞

> ID：15441098
> 
> 赞同：2
> 
> 时间：2013-03-15T19:57:09.943
> 
> 标签：c#, asynchronous, async-await

我试图阻止`RequestHandler.ParseAll()`，`await ConsumerTask;`但是当我在那里设置断点时，我总是先得到“完成......”输出......然后`Parse2()`失败并出现 NullReferenceException。（这是我的猜测：“GC 开始清理，因为`_handler`超出了范围”）

无论如何，我无法弄清楚为什么会发生这种情况。

```
class MainClass
{
    public async void DoWork()
    {
        RequestHandler _handler = new RequestHandler();
        string[] mUrls;
        /* fill mUrls here with values */
        await Task.Run(() => _handler.ParseSpecific(mUrls));
        Console.WriteLine("Done...");
    }
}
static class Parser
{
    public static async Task<IEnumerable<string>> QueryWebPage(string url) { /*Query the url*/ }

    public static async Task Parse1(Query query) 
    { 
        Parallel.ForEach(/*Process data here*/);
    }

    public static async Task Parse2(Query query)
    {
        foreach(string line in query.WebPage)
            /* Here i get a NullReference exception because query.WebPage == null */
    }
}
sealed class RequestHandler
{
    private BlockingCollection<Query> Queue;
    private Task ConsumerTask = Task.Run(() => /* call consume() for each elem in the queue*/);

    private async void Consume(Query obj)
    {
        await (obj.BoolField ? Parser.Parse1(obj) : Parser.Parse2(obj));
    }

    public async void ParseSpecific(string[] urls)
    {
        foreach(string v in urls)
            Queue.Add(new Query(await QueryWebPage(v), BoolField: false));

        Queue.CompleteAdding();
        await ConsumerTask;
        await ParseAll(true);
    }

    private async Task ParseAll(bool onlySome)
    {
        ReInit();
        Parallel.ForEach(mCollection, v => Queue.Add(new Query(url, BoolField:false)));
        Queue.CompleteAdding();
        await ConsumerTask;
        /* Process stuff further */
    }
}
struct Query
{
    public readonly string[] WebPage;
    public readonly bool BoolField;
    public Query(uint e, IEnumerable<string> page, bool b) : this()
    {
        Webpage = page.ToArray();
        BoolField = b;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T20:02:24.883

CodesInChaos 在评论中发现了这个问题。它源于异步方法返回`void`，您几乎*不*应该这样做 - 这意味着您无法跟踪它们。

相反，如果您的异步方法没有任何实际值要返回，您应该让它们返回`Task`。

发生的事情是，`ParseSpecific`它只同步运行，直到第一个`await QueryWebPage(v)`没有立即完成。然后它返回......所以任务从这里开始：

```
await Task.Run(() => _handler.ParseSpecific(mUrls)); 
```

... 立即完成，并打印“完成”。

一旦你让所有异步方法返回`Task`，你就可以等待它们。你也根本不需要`Task.Run`。所以你会有：

```
public async void DoWork()
{
    RequestHandler _handler = new RequestHandler();
    string[] mUrls;
    await _handler.ParseSpecific(mUrls);
    Console.WriteLine("Done...");
} 
```

...

```
public async TaskParseSpecific(string[] urls)
{
    foreach(string v in urls)
    {
        // Refactored for readability, although I'm not sure it really
        // makes sense now that it's clearer! Are you sure this is what
        // you want?
        var page = await QueryWebPage(v);
        Queue.Add(new Query(page, false);
    }

    Queue.CompleteAdding();
    await ConsumerTask;
    await ParseAll(true);
} 
```

您的`Reinit`方法也需要更改，因为目前该方法`ConsumerTask`基本上`Consume`会立即完成，因为它是*另一个*返回 void 的异步方法将立即返回。

老实说，如果没有正确理解 async/await，你所得到的看起来*非常复杂。*我会阅读更多关于 async/await 的内容，然后可能从头开始。我强烈怀疑您可以使这变得非常简单。您可能还想阅读[TPL Dataflow](http://msdn.microsoft.com/en-gb/library/hh228603.aspx)，它旨在简化生产者/消费者场景。

# python - 如何跟踪组内单个任务的进度，该组构成芹菜和弦的标题？

> ID：15441101
> 
> 赞同：11
> 
> 时间：2013-03-15T19:57:19.863
> 
> 标签：python, django, celery

```
import celery
def temptask(n):
    header=list(tempsubtask.si(i) for i in range(n))
    callback=templink.si('printed at last?')
    r = celery.chord(celery.group(header))(callback)
    return r

@task()
def tempsubtask(i):
    print i    
    for x in range(i):
        time.sleep(2)
        current_task.update_state(
            state='PROGRESS', meta={'completed': x, 'total': i })

@task()
def templink(x):
    print 'this should be run at last %s'%x

#executing temptask
r = temptask(100) 
```

我想访问由 tempsubtask 更新的进度状态。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-04-24T08:28:28.280

我有一个类似的问题。网络上的大多数示例都已过时，文档并没有太大帮助，但文档有指向资源的链接，阅读对我有帮助。我的目标是分组组织并行任务。这些组必须按顺序依次执行。所以我决定在单独**启动任何任务之前生成任务 ID，**并且只分配它们。我正在使用芹菜 4.3.0

这是一个简短的例子。

首先，我需要一个虚拟任务来使执行顺序并能够检查某个组的状态。由于这是一个回调，它只会在组中的所有其他任务之后完成。

```
@celery.task(bind=True, name="app.tasks.dummy_task")
def dummy_task( self, results=None, *args, **kwargs ):
    return results 
```

我在这里的评论解释了我如何分配 ID。

```
from celery.utils import uuid
from celery import group, chord, chain

# Generating task ids, 
# which can be saved to a db, sent to the client and so on
#
# This is done before executing any tasks

task_id_1 = uuid()
task_id_2 = uuid()

chord_callback_id_1 = uuid()
chord_callback_id_2 = uuid()

workflow_id = None

# Generating goups, using signatures
# the group may contain any number of tasks
group_1 = group(
        [
            celery.signature(
                    'app.tasks.real_task', 
                    args=(), 
                    kwargs = { 'email': some_email, 'data':some_data },
                    options = ( {'task_id': task_id_1 } )
                )
        ]
    )

group_2 = group(
        [
            celery.signature(
                    'app.tasks.real_task', 
                    args=(), 
                    kwargs = { 'email': some_email, 'data':some_data },
                    options = ( {'task_id': task_id_2 } )
                )
        ]
    )

# Creating callback task which will simply rely the result
# Using the task id, which has been generated before
# 
# The dummy task start after all tasks in this group are completed
# This way we know that the group is completed

chord_callback = celery.signature( 
        'app.tasks.dummy_task',
        options=( {'task_id': chord_callback_id_1 } )
    ) 

chord_callback_2 = celery.signature( 
        'app.tasks.dummy_task',
        options=( {'task_id': chord_callback_id_2 } )
    ) 

# we can monitor each step status
# by its chord callback id

# the id of the chord callback  
step1 = chord( group_1, body=chord_callback )
# the id of the chord callback  
step2 = chord( group_2, body=chord_callback_2 )

# start the workflow execution
# the steps will execute sequentially 
workflow = chain( step1, step2 )()

# the id of the last cord callback
workflow_id = workflow.id

# return any ids you need
print( workflow_id ) 
```

这就是我可以检查应用程序中任何任务状态的方式。

```
# This is a simplified example
# some code is omitted
from celery.result import AsyncResult

def task_status( task_id=None ):

    # PENDING
    # RECEIVED
    # STARTED
    # SUCCESS
    # FAILURE
    # REVOKED
    # RETRY

    task = AsyncResult(task_id)

    response = {
      'state': task.state,
    }

    return jsonify(response), 200 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T06:23:10.710

经过数小时的谷歌搜索，我偶然发现了[http://www.manasupo.com/2012/03/chord-progress-in-celery.html](http://www.manasupo.com/2012/03/chord-progress-in-celery.html)。尽管那里的解决方案对我来说不是开箱即用的，但它确实激发了我尝试类似的东西。

```
from celery.utils import uuid
from celery import chord

class ProgressChord(chord):

    def __call__(self, body=None, **kwargs):
        _chord = self.type
        body = (body or self.kwargs['body']).clone()
        kwargs = dict(self.kwargs, body=body, **kwargs)
        if _chord.app.conf.CELERY_ALWAYS_EAGER:
            return self.apply((), kwargs)
        callback_id = body.options.setdefault('task_id', uuid())
        r= _chord(**kwargs)
        return _chord.AsyncResult(callback_id), r 
```

而不是执行 celery.chord 我使用 ProgressChord 如下：

```
def temptask(n):
    header=list(tempsubtask.si(i) for i in range(n))
    callback=templink.si('printed at last?')
    r = celery.Progresschord(celery.group(header))(callback)
    return r 
```

r 的返回值包含一个包含回调的异步结果和组结果的元组。所以成功看起来像这样：

```
In [3]: r
Out[3]: 
(<AsyncResult: bf87507c-14cb-4ac4-8070-d32e4ff326a6>,
 <GroupResult: af69e131-5a93-492d-b985-267484651d95 [4672cbbb-8ec3-4a9e-971a-275807124fae, a236e55f-b312-485c-a816-499d39d7de41, e825a072-b23c-43f2-b920-350413fd5c9e, e3f8378d-fd02-4a34-934b-39a5a735871d, c4f7093b-9f1a-4e5e-b90d-66f83b9c97c4, d5c7dc2c-4e10-4e71-ba2b-055a33e15f02, 07b1c6f7-fe95-4c1f-b0ba-6bc82bceaa4e, 00966cb8-41c2-4e95-b5e7-d8604c000927, e039c78e-6647-4c8d-b59b-e9baf73171a0, 6cfdef0a-25a2-4905-a40e-fea9c7940044]>) 
```

我继承和覆盖`[celery.chord][1]`而不是`[celery.task.chords.Chord][2]`因为我在任何地方都找不到它的来源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-27T09:58:02.673

老问题，我浪费了几天时间来寻找更好的现代解决方案。在我当前的项目中，我必须单独跟踪小组进度并在最终回调中释放锁定。

目前的解决方案要简单得多（但更难猜），主题行最后评论：

```
@celery_app.task(name="_scheduler", track_started=True, ignore_result=False)
def _scheduler():
    lock = cache.lock("test_lock")
    if not lock.acquire(blocking=False):
        return {"Error": "Job already in progress"}

    lock_code = lock.local.token.decode("utf-8")

    tasks = []
    for x in range(100):
        tasks.append(calculator.s())

    _group = group(*tasks)
    _chord = chord(_group)(_get_results.s(token=lock_code))

    group_results = _chord.parent # This is actual group inside chord
    group_results.save() # I am saving it to usual results backend, and can track progress inside.

    return _chord # can return anything, I need only chord. 
```

我在工作`Celery 5.1`

# ibm-mq - 如何在linux中进行queuemanager备份和恢复

> ID：15441102
> 
> 赞同：2
> 
> 时间：2013-03-15T19:57:20.820
> 
> 标签：ibm-mq

您好，我有名为 QM_1 的队列管理器。在这里，我已经备份了 QM_1，如下所示。之后我在其他系统中创建了同名的队列管理器（QM_1），我需要恢复保存的 qmgr 属性。请提供如何恢复队列管理器属性？

```
saveqmgr -m QM_1 -f 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T20:12:56.173

一些选项位于[SupportPac MS03](http://ibm.co/SupptPacMS03)登录页面上。（MS03 是包含该`saveqmgr`程序的 SupportPac。）详细说明在下载文档中。以下说明复制自 SupportPac MS03 页面：

* * *

您可以运行以下`saveqmgr`命令（见下文）来创建 2 个输出文件。两个输出文件都是文本，可以编辑。

*   一个带有对象定义（使用选项 -f） - 此示例中的文件名是：qmgr_data.mqsc
*   另一个具有权限记录（使用选项 -z 为 setmqaut 生成条目）
*   此示例中的文件名是：qmgr_auth.bat（在 Windows 中）或 qmgr_auth.sh（在 UNIX 中）

以下命令同时保存对象和权限记录：

UNIX：

```
saveqmgr -m QMGR -f /tmp/mq/qmgr_data.mqsc -z /tmp/mq/qmgr_auth.sh 
```

视窗：

```
saveqmgr.exe -m QMGR -f C:\temp\mq\qmgr_data.mqsc -z C:\temp\mq\qmgr_auth.bat 
```

`qmgr_data.mqsc`尝试将内容恢复到新的队列管理器时，可以按如下方式运行该文件：

```
runmqsc TEST < qmgr_data.mqsc 
```

文件 qmgr_auth.bat（在 Windows 中）或 qmgr_auth.sh（在 UNIX 中）具有独立的条目，它们为每个权限记录调用带有适当参数的 setmqaut 命令。需要执行此批处理/脚本文件才能恢复权限记录。

UNIX：

```
chmod u+x qmgr_auth.sh
./qmgr_auth.sh 
```

视窗：

```
qmgr_auth.bat 
```

* * *

[要找到这个和所有其他 SupportPac，请在此处](http://ibm.co/SupptPacs)转到 SupportPac 登录页面。

**2014 年 11 月 6 日更新：**
虽然 OP 询问*了如何*从`saveqmgr`备份中恢复，但值得注意的是 IBM 已提供`dmpmqcfg`从 7.1 版开始的命令。`MQSC`您可以使用以下语法以格式备份 QMgr ：

`dmpmqcfg -m [QUEUE_MANAGER] > BACKUP_FILE.mqsc`

这将对象定义*和*授权捕获在单个文件中。默认情况下，授权被捕获为`SET AUTHREC`条目而不是`setmqaut`命令。

请注意，初始版本`dmpmqcfg`并未捕获您可能已定义的所有授权设置。所有版本都必须应用最新的 Fix Pack 才能使用`dmpmqcfg`. 此行为可能会在以后的 Fix Pack 中回归，因此建议在切换到此命令并应用 Fix Pack 后将备份与您的 auths 创建脚本进行协调。

从文件中恢复 QMGgr 就像从`dmpmqcfg`文件中恢复一样`saveqmgr`：

`runmqsc [QMNAME] < output_of_dmpmqcfg_or_saveqmgr.mqsc > logfile.txt 2>&1`

这`MQSC`会将文件定义运行到 QMgr（包括命令）中，并将`SET AUTHREC`输出保存到日志文件中。`STDOUT``STDERR`

# ember-data - 没有 id 的 Ember 数据建立关系

> ID：15441104
> 
> 赞同：0
> 
> 时间：2013-03-15T19:57:27.073
> 
> 标签：ember-data

我正在尝试使用 MongoDB 后端构建 Ember 应用程序。Ember-data 现在支持嵌入对象，这使得能够将对象直接从嵌套文档中提取出来变得非常简单和棒。

我的问题是弄清楚如何将对象相互关联。

让我们看一个有学生和作业的教室的例子。

```
{
  students: [
    { name: 'Billy' },
    { name: 'Joe' }
  ],
  assignments: [
    { name: 'HW1', score: 70, student_name: 'Billy' },
    { name: 'HW2', score: 80, student_name: 'Billy' },
    { name: 'HW1', score: 60, student_name: 'Joe' },
    { name: 'HW2', score: 75, student_name: 'Joe' }
  ]
} 
```

我将如何为他们建立关系，`student`以便我可以撤回他们的所有`assignments`？

相关，我试图弄清楚如何关联嵌套在彼此内部的对象。我创建了一个[jsbin](http://jsbin.com/agarat/9/edit)试图在嵌套对象之间建立关系（向上而不是向下），但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:02:46.103

您可以使用下面的 repo 来指导您如何进行嵌入式关联。虽然他们没有使用 mongodb，但重要的是在 ember-data 方面，他们正在做嵌入式关联。

[https://github.com/dgeb/ember_data_example/blob/master/app/assets/javascripts/controllers/contact_edit_controller.js](https://github.com/dgeb/ember_data_example/blob/master/app/assets/javascripts/controllers/contact_edit_controller.js)

请注意，此处 App.PhoneNumber 嵌入在 App.Contact 中。但它应该让您了解如何解决您的问题。

```
App.Contact = DS.Model.extend({
  firstName: DS.attr('string'),
  lastName: DS.attr('string'),
  email: DS.attr('string'),
  notes: DS.attr('string'),
  phoneNumbers: DS.hasMany('App.PhoneNumber'),
});

App.PhoneNumber = DS.Model.extend({
  number: DS.attr('string'),
  contact: DS.belongsTo('App.Contact')
}); 
```

[https://github.com/dgeb/ember_data_example/blob/master/app/assets/javascripts/store.js](https://github.com/dgeb/ember_data_example/blob/master/app/assets/javascripts/store.js)

```
App.Adapter = DS.RESTAdapter.extend({
  bulkCommit: false
});

App.Adapter.map('App.Contact', {
  phoneNumbers: {embedded: 'always'}
});

App.Store = DS.Store.extend({
  revision: 12,
  adapter: App.Adapter.create()
}); 
```

[https://github.com/dgeb/ember_data_example/blob/master/app/assets/javascripts/controllers/contact_edit_controller.js](https://github.com/dgeb/ember_data_example/blob/master/app/assets/javascripts/controllers/contact_edit_controller.js)

```
App.ContactEditController = Em.ObjectController.extend({
 needs: ['contact'],

 startEditing: function() {
   // add the contact and its associated phone numbers to a local transaction
   var contact = this.get('content');
   var transaction = contact.get('store').transaction();
   transaction.add(contact);
   contact.get('phoneNumbers').forEach(function(phoneNumber) {
   transaction.add(phoneNumber);
 });
   this.transaction = transaction;
  },

  save: function() {
   this.transaction.commit();
  },

  addPhoneNumber: function() {
    this.get('content.phoneNumbers').createRecord();
  },

}); 
```

# javascript - 比较 JavaScript 中的两个字段

> ID：15441112
> 
> 赞同：0
> 
> 时间：2013-03-15T19:57:42.817
> 
> 标签：javascript

我正在制作这个表格，它是费用计算器，它有两个字段，Fee Due 和 Fee Paid 然后有一个说余额，最后第四个字段是文本字段，说明它使用 JavaScript 根据余额自动更新为 Paid、Unpaid 或分期付款它工作正常，但唯一的问题是由于某种原因，当输入某些特定值时状态字段变为空白它不会根据 JavaScript 更新它应该说分期付款，这是我的 JavaScript

```
 function ff_feecalc_new_init()
    {
        setInterval("calc()", 500)
    } 

    function calc(){

        ff_getElementByName('status').value='';
        ff_getElementByName('balance').value=Number(ff_getElementByName('amountdue').value)-Number(ff_getElementByName('amountpaid').value);

        if (ff_getElementByName('amountpaid').value==0 && ff_getElementByName('amountdue').value>0){

            ff_getElementByName('status').value="unpaid";
        }
        if(ff_getElementByName('amountpaid').value>0){
            if ((ff_getElementByName('balance').value <ff_getElementByName('amountdue').value){

                ff_getElementByName('status').value="installments";
            }
        }

        if (ff_getElementByName('amountpaid').value == ff_getElementByName('amountdue').value && ff_getElementByName('amountpaid').value>0){

            ff_getElementByName('status').value="paid";
        }
    } 
```

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:27:28.327

建议在 javascript 比较中使用 '===' 而不是 '=='。尝试使用 parseFloat() 或 parseInt() 。

例子：

```
if (parseInt(ff_getElementByName('amountpaid').value)===0 && parseFloat(ff_getElementByName('amountdue').value)>0){
...
} 
```

# c# - 进行异步调用的正确方法

> ID：15441115
> 
> 赞同：0
> 
> 时间：2013-03-15T19:57:51.637
> 
> 标签：c#, .net, asp.net-mvc, asynchronous

我有一种情况，可扩展性至关重要。我有一个 API 端点，它必须调用第 3 方 Web 服务，并且可能需要 10 多秒才能完成。我担心的是 Web 请求在等待第 3 方请求完成时堆积在我们的服务器上。我需要确保对“StartJob”的请求立即返回，并且作业实际上在后台运行。最好的方法是什么？

```
// Client polls this endpoint to find out if job is complete
public ActionResult GetResults(int jobId)
{
    return Content(Job.GetById(jobId));
}

//Client kicks off job with this endpoint
public ActionResult StartJob()
{
    //Create a new job record
    var job = new Job();
    job.Save();

    //start the job on a background thread and let IIS return it's current thread immediately
    StartJob(); //????

    return Content(job.Id);
}

//The job consists of calling a 3rd party web service which could take 10+ seconds.
private void StartJob(long jobId)
{
   var client = new WebClient();
   var response = client.downloadString("http://some3rdparty.com/dostuff");

   var job = Job.GetById(jobId);
   job.isComplete = true;
   job.Save();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:09:17.797

如果调用者不关心结果，您可以执行以下操作：

```
Task.Factory.StartNew(StartJob(job.Id)); 
```

[您也可以按照 Servy 在此评论](https://stackoverflow.com/questions/15441115/proper-way-to-make-an-async-call#comment21843379_15441262)中的建议使用此改编。

```
Task.Factory.StartNew(StartJob(job.Id), TaskCreationOptions.LongRunning); 
```

# mysql - 具体5数据库工作流程

> ID：15441118
> 
> 赞同：0
> 
> 时间：2013-03-15T19:58:04.220
> 
> 标签：mysql, concrete5

我正在规划一个类似于 Copper Project 或 PHP Collab 的基于 Web 的项目管理/协作应用程序，使用 concrete5 作为我的框架。

我想集成一些功能，但我不完全确定如何实现这一点，看看 DB 表是如何用块生成的。

我想到的功能如下： 1）当客户经理或项目经理创建新客户时，他们必须为客户分配三个字符的前缀。示例：如果（运气不好）我将 Diesel 添加为客户端，我想为它们分配前缀 DSL。

2) 客户经理或项目经理新建项目时，项目ID应与客户直接相关，而不是与所有客户的项目总数相关。换句话说，Diesel 与我的第一个项目的项目 ID 应该是 DSL001，而不是 DSL016，因为在此之前还有十五个其他客户的项目（参见 Copper 和 PHP Collab，它们遵循全局项目 ID 逻辑，如与每个客户的项目 ID 逻辑相反）。此项目 ID 将在 AM/PM 创建的前端项目页面上可见，也可用作成本估算、发票等内容的参考 ID。

所以从工作流程规划的角度来看，这就是我遇到问题的地方。我对 MySQL 的理解是，如果我想遵循自己的项目 ID 逻辑，则必须为每个客户创建一个新表，以包含有关其项目的所有数据，以便数据库可以正确输出唯一的 ID 号。

但是，我对 C5 的理解是，例如，如果在创建此应用程序的过程中，我决定将项目表单创建为要插入到前端模板中的块，则 db.xml 文件将创建一个通用的数据库中所有客户的项目数据表，而不是每个客户一个。

有什么建议可以在 C5 框架的上下文中完成我想要做的事情吗？

如果有什么不清楚的地方，我可以展示一些项目页面外观的模型。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T01:00:36.460

这是一个一般的数据库模式问题，与具体的 Concrete5 无关。您关于为每个客户端需要一个单独的表以便 MySQL 可以生成唯一 ID 号的想法已经过时了。

数据库模式有一个一般原则，即记录的“ID”号只能用于在*内部*（在您的应用程序和数据库代码中）唯一地标识记录——您几乎不应该将主 ID 号用于实际的“业务”逻辑”。在您的情况下，您有一个项目 ID，其中包含字母和数字，因此即使您想为此使用 MySQL 生成的 ID，也不能（因为这些 ID 只是整数，而不是字母）。

此外，为相同类型的数据创建单独的表与数据库的工作方式完全相反。相反，您要做的是为客户准备一张桌子，为项目准备另一张桌子。客户端表将有一个“id”字段（自动增量编号）和一个客户端前缀字段（您的示例中的“DSL”）。然后，projects 表有它自己的“id”字段（同样是自动增量编号）和一个“client id”，它将该项目与 client 表中的记录联系起来。然后，您将在项目表中有另一个字段用于“项目编号”。*这个*项目编号字段是您向用户显示的内容（您可以将其与客户的 3 个字母前缀结合起来——所以实际上您在数据库中存储了两个单独的值，

这个“项目编号”字段**不**应该是一个自动递增的数字，因为正如您所发现的，MySQL 每个表只有一个编号序列。因此，当您有一个新项目时，您将在您的应用程序中的某个地方为您生成此编号的一些代码。该代码将是这样的：

```
function save_new_project($client_id, $project_data) {
    $db = Loader::db();

    //Determine the highest existing project number for this client
    $sql = "SELECT MAX(project_number) FROM projects WHERE client_id = ?";
    $vals = array($client_id);
    $max_project_number = $db->GetOne($sql, $vals);
    if (empty($max_project_number)) {
        $max_project_number = 0; //first project for this client
    }

    //Insert new project with next-highest number
    $new_project_number = $max_project_number + 1;
    $sql = "INSERT INTO projects (client_id, project_number, some_field, another_field) VALUES (?, ?, ?, ?)";
    $vals = array($client_id, $new_project_number, $project_data['some_field'], $project_data['another_field']);
    $db->Execute($sql, $vals);
} 
```

顺便说一句，Concrete5 可能不是用于此类项目的好框架。您可能想研究一个更通用的框架，该框架适用于 Web 应用程序，例如 CodeIgniter、Symfony、CakePHP、Kohana 等。

# javascript - 从javascript访问剃刀视图页面上的model.Id

> ID：15441119
> 
> 赞同：0
> 
> 时间：2013-03-15T19:58:20.227
> 
> 标签：javascript, jquery, asp.net-mvc

在查看页面上，我拥有我想要访问我的 Model.Id 的 JavaScript 代码。如何做到这一点？

```
@model MyModel
<script type="text/javascript">
    function initialize() {
       var id = model.Id // this doesnt work
    }
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:00:42.823

您需要跟踪服务器上的内容和客户端上的内容。该`@Model`变量仅在服务器上使用，Javascript 没有模型对象的概念，因此您需要将值打印在 html 中。

```
<script type="text/javascript">
    function initialize() {
       var id = "@Model.Id"; // this will work
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:59:27.197

这应该有效。还是需要使用razor语法`@`...

```
@model MyModel
<script type="text/javascript">
    function initialize() {
       var id = "@Model.Id" // this doesnt work
    }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T20:00:04.603

将 model.id 设为“@Model.id”，例如：

```
@model MyModel
<script type="text/javascript">
function initialize() {
   var id = "@Model.Id"
}
</script> 
```

# json - 将 Vim 宏应用于多行

> ID：15441121
> 
> 赞同：2
> 
> 时间：2013-03-15T19:58:31.707
> 
> 标签：json, vim, macros

我做了一个简单的宏来增加 json 对象中的数字，如下所示：

```
{
    image: 'images/2.jpg',
    thumb: 'images/2-thumb.jpg',
    big: 'images/2.jpg',
    title: '',
    description: '',
    link: 'images/2.jpg'
}, 
```

和：

```
q, n, shift-v, down-till-end, p, move-to-numbers, c-a, return-to-top, q, 150@n 
```

（抱歉，如果这不是在 SE 中发布 vim 宏的适当语法）

它有效，但直到 9 日才会增加。我错过了什么？

提前致谢。

**编辑：**

我试图达到这样的目标：

```
{
    image: 'images/3.jpg',
    thumb: 'images/3-thumb.jpg',
    big: 'images/3.jpg',
    title: '',
    description: '',
    link: 'images/3.jpg'
},
{
    image: 'images/4.jpg',
    thumb: 'images/4-thumb.jpg',
    big: 'images/4.jpg',
    title: '',
    description: '',
    link: 'images/4.jpg'
},
... until *nth* value 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:46:52.523

假设您的光标位于第一个左括号上，这是一种方法：

```
qn                    " start recording in register n
V%                    " select from here to the closing bracket, linewise
y                     " yank the selection
%                     " jump to the closing bracket
p                     " paste after the current line
:'[,']norm <C-v><C-a> " executing the normal mode command <C-a>(1) on all the lines that we just pasted
q                     " stop recording 
```

然后做`150@n`。

(1)`<C-v><C-a>`用于插入文字`^A`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:14:51.613

尝试这个：

进入可视模式并选择要包含在宏执行中的行类型：

```
:normal @n 
```

然后，当您按 Enter 时，宏将应用于选定的行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T21:27:23.593

我试了一下：

```
qqv%:s/\d\+/\=submatch(0)+1/^M[[yGGp 
```

简短的解释

```
qq                              "recording to register q
v%                              "select things between { and }
:s/\d\+/\=submatch(0)+1/^M      "just do +1 to all numbers (selected range)
[[                              "back to begin {
yG                              "yank till the end
Gp                              "paste at the end 
```

然后做`150@q`

如果您录制相同的宏，`^M`只需键入`Enter`

如果您将宏指定为`@q`键入`^M`方式`<c-v><enter>`

顺便说一句，这不会赢得高尔夫，因为函数名`submatch(0)`太长了......:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T16:01:59.357

使用我的[UnconditionalPaste 插件](http://www.vim.org/scripts/script.php?script_id=3355)，将原始块拉入寄存器后，您可以`[N]`简单地粘贴自动递增的块`[N]gPp`（*按行粘贴，所有数字递增*）。

该插件还允许对粘贴文本的方式进行其他几种操作。

# sql-server - 从数据库中的表中复制具有 n 行的数据库

> ID：15441122
> 
> 赞同：0
> 
> 时间：2013-03-15T19:58:34.233
> 
> 标签：sql-server

我需要为我在工作中的本地设置获取一个开发数据库。我遇到了一个主要问题，其中一张表（占数据库活动的 99%）大约 7GB。我没有必要从该表中获取所有行，前 10,000 行左右就可以了。

无论如何，在脚本或任何我可以复制数据库并指定某个表中的行数的地方？我知道这是一个远射。由于一张表的大小，我不需要花费半天的时间来恢复数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:10:51.380

如果您想花哨（谁不想呢？），您可以在生产中将该表放在其自己的文件组中，然后在 dev 中恢复除该文件组之外的所有文件组。然后你可以在恢复时创建新的表，导入一些数据（我会为此编写一个简单的 SSIS 包），你应该会很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:24:55.137

您实际上可以尝试一些事情来导出（然后导入）数据，您可以使用以下任何一种方法，

1.  SSIS 包
2.  [SSMS 中的SQL Server 导入导出向导](http://msdn.microsoft.com/en-us/library/ms140052.aspx)（也可以创建 SSIS 包）
3.  使用查询结果选项卡，并将结果保存为 CSV
4.  使用[带有 QueryOut 标志](http://msdn.microsoft.com/en-us/library/ms162802.aspx)的 BCP 导出数据
5.  使用[带有 -o](http://msdn.microsoft.com/en-us/library/ms162773.aspx)标志的 SQLCMD

# parallel-processing - 安装额外的线程版本的 Tcl/Tk 并在集群中的某些节点上运行代码

> ID：15441124
> 
> 赞同：0
> 
> 时间：2013-03-15T19:58:43.360
> 
> 标签：parallel-processing, centos, tcl, cluster-computing, pre-compilation

我需要并行使用 tcl/tk 语言编写的代码，在一个集群中有 12 个节点，我的 IP 注册以访问 4 个节点，每个节点有 4 个处理器，每个处理器有 2 个内核。操作系统是 linux centos 64 位，我有管理员用户通行证和普通用户通行证。

所以我的问题是安装 tcl/tk。可以在每个节点上完成！以不改变版本的方式在其他节点上工作！？。如果可以，那么如何链接或启动其中一个版本。编译代码！

或者应该为所有集群完成！并且应该为所有其他用户停止先前的运行，同时为所有用户更新所有节点中的代码。该代码适用于 tcl/tk 8.4。

我没有线程版本 8.4.7。我在 4.8.14 线程节点之一的一个目录中安装了一个新版本。但是使用 tclshell 只是给了我旧版本的平台。所以应该这样做改变$ PATH。

当我在节点中发出 echo $PATH 时，我看不到任何特定的 tcl 目录。也许它在根。但我不知道它是全局根还是节点根！

# vb.net - VB.NET 的 LINQ 查询问题

> ID：15441125
> 
> 赞同：0
> 
> 时间：2013-03-15T19:58:46.740
> 
> 标签：vb.net, linq

我需要修改一个函数，该函数使用 LINQ 查询通过为每个项目添加一个额外的布尔值来返回数据集合，因此为简单起见，我决定将返回类型更改为`KeyValuePairs`. 但是，我有一个我无法解决或不幸理解的错误。

原版或功能如下：

```
Private Function GetSelectedExtractors() As List(Of ExtractionMapping)

    Return _extractionSelections _
        .SelectMany(Function(x) x.ExtractionRoutineSelection) _
        .Where(Function(x) x.Selected) _
        .Select(Function(x) x.ExtractionMapping)

End Function 
```

有错误的新版本如下：

```
Private Function GetSelectedExtractors() As List(Of KeyValuePair(Of ExtractionMapping, Boolean))

    Return _extractionSelections _
        .SelectMany(Function(x) x.ExtractionRoutineSelection) _
        .Where(Function(x) x.Selected) _
        .Select(Function(x) New KeyValuePair(Of ExtractionMapping, Boolean) _
                     (x.ExtractionMapping, x.DeleteExistingInstances))

End Function 
```

我收到的错误是这样的：

```
Overload resolution failed because no accessible 'Select' can be called with these     arguments:
Extension method 'Public Function Select(Of TResult)(selector As System.Func(Of ExtractionRoutineSelection, Integer, TResult)) As System.Collections.Generic.IEnumerable(Of TResult)' defined in 'System.Linq.Enumerable': Nested function does not have a signature that is compatible with delegate 'System.Func(Of ExtractionRoutineSelection, Integer, TResult)'.
Extension method 'Public Function Select(Of TResult)(selector As System.Func(Of ExtractionRoutineSelection, Integer, TResult)) As System.Collections.Generic.IEnumerable(Of TResult)' defined in 'System.Linq.Enumerable': Data type(s) of the type parameter(s) cannot be inferred from these arguments. Specifying the data type(s) explicitly might correct this error.
Extension method 'Public Function Select(Of TResult)(selector As System.Func(Of ExtractionRoutineSelection, TResult)) As System.Collections.Generic.IEnumerable(Of TResult)' defined in 'System.Linq.Enumerable': 'DeleteExistingInstances' is not a member of 'Domain.ProductionWizard.ExtractionRoutineSelection'.
Extension method 'Public Function Select(Of TResult)(selector As System.Func(Of ExtractionRoutineSelection, TResult)) As System.Collections.Generic.IEnumerable(Of TResult)' defined in 'System.Linq.Enumerable': Data type(s) of the type parameter(s) cannot be inferred from these arguments. Specifying the data type(s) explicitly might correct this error. 
```

我在 C# 中做了很多 LINQ 查询，但在 VB 中没有那么多，所以这很可能是我对语法的理解。我尝试了几种变体都没有成功，我可以将它转换为匿名类型而不是 a `KeyValuePair`，但这不适合这种实现。

任何解决方案或提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:14:07.367

看起来`x.DeleteExistingInstances`无效：

```
'DeleteExistingInstances' is not a member of Domain.ProductionWizard.ExtractionRoutineSelection' 
```

修复它，它应该可以按您的意愿工作。

但是，我建议使用[`Tuple`](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)而不是`KeyValuePair`：

```
Private Function GetSelectedExtractors() As List(Of Tuple(Of ExtractionMapping, Boolean))

    Return _extractionSelections _
        .SelectMany(Function(x) x.ExtractionRoutineSelection) _
        .Where(Function(x) x.Selected) _
        .Select(Function(x) Tuple.Create(x.ExtractionMapping, x.DeleteExistingInstances))
        .ToList()

End Function 
```

# jsf-2 - AJAX：OmniFaces FullAjaxExceptionHandler 说它会显示错误页面，但它不会

> ID：15441126
> 
> 赞同：0
> 
> 时间：2013-03-15T19:58:49.817
> 
> 标签：jsf-2, primefaces, omnifaces

当我收到 ViewExpiredException 时（在开发中，我通过清理 Tomcat 的工作目录来强制执行此操作）在 PrimeFaces 的 AJAX 请求之后，FullAjaxExceptionHandler 不会重定向到错误页面。请参阅下面的堆栈跟踪：

```
GRAVE: FullAjaxExceptionHandler: An exception occurred during processing JSF ajax request. Error page '/Erro.jsf' will be shown.
javax.faces.application.ViewExpiredException: viewId:/PesquisaBeneficiario.jsf - A exibição de /PesquisaBeneficiario.jsf não pôde ser restaurada.
at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:205)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at br.com.bb.sgn.jsf.util.FiltroDesabilitaCacheNavegador.doFilter(FiltroDesabilitaCacheNavegador.java:30)
at org.omnifaces.filter.HttpFilter.doFilter(HttpFilter.java:75)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.omnifaces.filter.FacesExceptionFilter.doFilter(FacesExceptionFilter.java:56)
at org.omnifaces.filter.HttpFilter.doFilter(HttpFilter.java:75)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at br.com.bb.sgn.jsf.util.sso.FiltroSeguranca.doFilter(FiltroSeguranca.java:140)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

我将错误页面注册为：

```
<error-page>
    <exception-type>java.lang.Throwable</exception-type>
    <location>/Erro.jsf</location>
</error-page> 
```

我看到问题[stackoverflow.com/questions/15320192/jsf-error-page-not-shown-when-viewexpiredexception-occurs](https://stackoverflow.com/questions/15320192/jsf-error-page-not-shown-when-viewexpiredexception-occurs)并已将 OmniFaces 更新到 1.4.1 版本。

有什么我想念的吗？谢谢。

PS：Mojarra-2.1.20、OmniFaces-1.4.1、PrimeFaces-3.5

# asp.net-mvc-4 - 在 ASP.NET MVC 4 中填充和选择下拉列表值

> ID：15441127
> 
> 赞同：9
> 
> 时间：2013-03-15T19:58:53.670
> 
> 标签：asp.net-mvc-4

ASP.NET MVC 中的下拉列表让我感到困惑。我有一个模型课。模型类有一个名为 SelectedValue 的字符串。此字符串表示先前选择的值。我有一组从数据库中提取的项目。集合的每个项目都有一个 ID 和一个 Name 值。我的问题是，我不知道将这些信息导入 UI 的推荐方法是什么。

我不确定我应该使用 ViewBag 还是 Model。但是，一旦值在那里，我什至不确定填充 UI 的最佳方式是什么。我见过 HTML 助手和使用 RAZOR 语法的人。我很困惑。人们推荐什么？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T04:06:24.213

我就是这样做的，假设你有 2 个模型`Team and Player`：

**播放器.cs**

```
public class Player
{
    [HiddenInput(DisplayValue = false)]
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }        

    [Required]
    [ForeignKey("Team")]
    [Display(Name = "Team")]
    public int TeamId { get; set; }        

    [Display(Name = "First name")]
    public string FirstName { get; set; }

    [Display(Name = "Last name")]
    public string LastName { get; set; }

    public virtual Team Team { get; set; }        
} 
```

**团队.cs**

```
 public class Team
{
    [Key]
    [HiddenInput(DisplayValue = false)]
    public int TeamId { get; set; }

    [Display(Name = "Full Name:")]
    public string Name { get; set; }        

    public virtual ICollection<Player> Players { get; set; }
} 
```

然后在你的 PlayerController 中： **注意：团队需要存在才能创建一个玩家**

```
 private void PopulateTeamsDropDownList(object selectedTeams = null)
    {
        var teamsQuery = from d in _dataSource.Teams
                         orderby d.Name
                         select d;
        ViewBag.TeamID = new SelectList(teamsQuery, "TeamId", "Name", selectedTeams);
    }

    [HttpGet]
    public ActionResult Create()
    {
        PopulateTeamsDropDownList();
        return View();
    }

    [HttpPost]
    public ActionResult Create(Player model)
    {
        if (ModelState.IsValid)
        {
            using (EFootballDb db = new EFootballDb())
            {
                try
                {
                    var player = new Player
                                     {
                                         FirstName = model.FirstName,
                                         LastName = model.LastName
                                     };
                    db.Players.Add(player);
                    db.SaveChanges();
                    return RedirectToAction("About", "Home");
                }
                catch (Exception)
                {
                    ModelState.AddModelError("", "Unable to save changes. Try again, and if the problem persists, see your system administrator.");
                }
            }
        }
        PopulateTeamsDropDownList(model.TeamId);
        return View(model);
    } 
```

最后，您的 Create View for Player 将如下所示：

```
@{
ViewBag.Title = "Create";
 }

<h2>Create</h2>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>Player</legend>

    <div class="editor-label">
            @Html.LabelFor(model => model.TeamId, "Pick Your Team")
    </div>
    <div class="editor-field">
        @Html.DropDownList("TeamId", String.Empty)
        @Html.ValidationMessageFor(model => model.TeamId)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.FirstName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.FirstName)
        @Html.ValidationMessageFor(model => model.FirstName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.LastName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.LastName)
        @Html.ValidationMessageFor(model => model.LastName)
    </div>        

    <p>
        <input type="submit" value="Create" />
    </p>
  </fieldset>
 }

 <div>
     @Html.ActionLink("Back to List", "Index")
 </div>

 @section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-16T01:43:07.450

我这样做的方式是让下拉列表成为我的 ViewModel 的一部分 .... 说它是 Products .... 所以在我的 ViewModel 中我有一个

```
public SelectList Products { get; set;}
public int ProductId { get; set; }  // For the the selected Product 
```

因此，当视图加载时，我正在填充模型以返回控制器中的视图，我会执行以下操作：

```
model.Products = new SelectList(MyEnumerableofProducts, "ValueField", "TextField", {value of the selected item in the dropdown, as a string) 
```

在我看来，我会：

```
@Html.DropDownListFor(model => model.ProductId, Model.Products, "Please Select")

return View(model) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-20T20:25:07.523

除了上述方法，您还可以使用**[此](https://stackoverflow.com/questions/18288473/posting-dropdownlist-value-from-view-to-controller-in-mvc4)**方法在查找表中使用多个外键。据我所见，它非常清晰有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-12T13:09:59.813

如果您使用的是 VB.Net - MVC4- Razor 这个答案与 Frigik 几乎相同（感谢 Frigik）

在您的模型中创建两个字段，一个是保存 SelectedItem 的字段（这里是字符串的 TagType），第二个是下拉值（TagTypeList）

## 模型类- Tag.vb

```
Imports System.Web.Mvc

Private _tagType As String
Private _tagTypeList As List(Of SelectListItem)

Public Property TagType() As String
        Get
            Return _tagType
        End Get
        Set(ByVal value As String)
            _tagType = value
        End Set
End Property

Public Property TagTypeList() As List(Of SelectListItem)
        Get
            Return _tagTypeList
        End Get
        Set(value As List(Of SelectListItem))
            _tagTypeList = value
        End Set
    End Property

'In the constructor

Sub New()
        TagTypeList = CommonUtility.LoadDropDownByName("TAGTYPE")
End Sub 
```

## 在 CommonUtility 类中 - CommonUtility.vb

```
Imports System.Web.Mvc
Imports System.Collections.Generic

Public Shared Function LoadDropDownByName(ByVal DropDownName As String) As List(Of SelectListItem)
        Dim dt As DataTable
        Dim ds As DataSet
        Dim results As List(Of SelectListItem) = Nothing
        Try
            ds = objSignOn.LoadDropDown(DropDownName)   'Pass the dropdown name here and get the values from DB table which is - select ddlId, ddlDesc from <table name>
            If Not ds Is Nothing Then
                dt = ds.Tables(0)
                If (dt.Rows.Count > 0) Then
                    results = (From p In dt Select New SelectListItem With {.Text = p.Item("ddlDesc").ToString(), .Value = p.Item("ddlId").ToString()}).ToList()
                End If
            End If
        Catch ex As Exception
        End Try
        Return results
    End Function 
```

## 在视图中

```
@Html.DropDownListFor(Function(x) x.TagType, Model.TagTypeList, "", New With {.id = "ddlTagType",.class = "dropDown", .style = "width: 140px"}) 
```

这里第三个参数（可选）为空，它将在下拉列表中插入第一个为空的项目。第一个参数是 selectedItem，一旦值已经存在于 DB 表中，它有助于填充。

希望这对使用 VB.Net 的人有所帮助

# teechart - GetAxisLabel 总是为 ValueIndex 传递 -1

> ID：15441129
> 
> 赞同：0
> 
> 时间：2013-03-15T19:59:16.167
> 
> 标签：teechart

我需要能够在 TeeChart Standard 2012 图表上格式化 X 轴标签。我正在处理 GetAxisLabel 事件，但 ValueIndex 始终为 -1。

我找到了这段文档：

轴标签是值。在这种情况下，Series 参数将为 nil，而 ValueIndex 将为 -1。

轴标签是系列点。Series 参数将是一个有效的 TChartSeries，而 ValueIndex 将是当前的 Series 点位置。

问题是我找不到将轴标签设置为系列点的方法。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:49:44.620

您需要将 LabelStyle 设置为：

```
 Chart1.Axes.Bottom.LabelStyle:=talPointValue; 
```

或者

```
 Chart1.Axes.Bottom.LabelStyle:=talText; 
```

在你的图表中。然后你就可以做这样的事情：

```
procedure TForm2.Chart1GetAxisLabel(Sender: TChartAxis; Series: TChartSeries;
  ValueIndex: Integer; var LabelText: string);
begin
  if ((Series <> nil) and (ValueIndex <> -1)) then
  begin
    LabelText:=FormatFloat('#.00', Series.XValue[ValueIndex]);
  end;
end; 
```

[但是，使用AxisValuesFormat](http://www.steema.net/teechartdocs/TChartAxis.AxisValuesFormat.html)属性实现上述方法要容易得多：

```
 Chart1.Axes.Bottom.AxisValuesFormat:='#.00'; 
```

# c++ - C/CUDA 程序输出

> ID：15441130
> 
> 赞同：4
> 
> 时间：2013-03-15T19:59:17.840
> 
> 标签：c++, c, cuda

以下是一个 CUDA 编程示例，它基本上是 C 语言，但其中包含 NVidia CUDA 函数。我一直在尝试解释这个代码示例并弄清楚它想要做什么。我的问题是这个程序编译得很好，但它需要什么参数？例如，这个 CUDA 程序正在 Linux 模拟器中运行，但是在运行 ./program 时它会返回：

用法：./program number 分段错误

程序输入参数是什么。谢谢你。

```
#include <assert.h>
#include <stdio.h>

//#define N 100000

__host__ void saxpy_host(int length, float alpha, float * x, float * y)
{
    for (int i = 0; i < length; ++i)
    y[i] = alpha*x[i] + y[i];
}

__global__ void saxpy (int length, float alpha, float * x, float * y)
{
   int i;
   i = blockIdx.x*blockDim.x + threadIdx.x;
   if (i < length) y[i] = alpha*x[i]+y[i];
   __syncthreads();
}

int main(int argc, char* argv[]) {

if (argc != 2) { 
  printf("Usage: %s number\n", argv[0]);
  return -1;
}

int N = atoi(argv[1]);

// host data
float alpha = 0.5;
float x[N], xback[N];
float y[N], yback[N];

int size;
int i;
int blocks;

// determining size 
size = sizeof(float)*N;

// device data
float * dxp, * dyp;

// fill host data
for (i = 0; i < N; i++) {
   x[i] = (float) (rand () % 128);
   y[i] = (float) (rand () % 256);
}

// Allocating and Moving data to device
cudaMalloc((void**) &dxp, size);
cudaMalloc((void**) &dyp, size);
cudaMemcpy (dxp, x, size, cudaMemcpyHostToDevice);
cudaMemcpy (dyp, y, size, cudaMemcpyHostToDevice);

// size of thread blocks
blocks = (N + 31)/32;
saxpy <<< blocks, 32 >>> (N, alpha, dxp, dyp);

// bring back data
cudaMemcpy (xback, dxp, size, cudaMemcpyDeviceToHost); 
cudaMemcpy (yback, dyp, size, cudaMemcpyDeviceToHost);

// Calculating host SAXPY
saxpy_host (N, alpha, (float *) &x, (float *) &y);

// checking computation on host matches computation on GPU
for (i = 0; i < N; i++) {
  assert (yback[i] == y[i]) ;
  //printf ("%i %f %f \n", i, yback[i], y[i]);
}

// free device data
cudaFree(dxp); cudaFree(dyp);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:07:14.253

```
int N = atoi(argv[1]); 
```

该程序将单个整数作为命令行参数。（例如，尝试将其称为`./program 5`。）

然后它计算一个 SAXPY（一个源自早期 BLAS 实现的旧术语，但它卡住了。它的意思是“单个（精度，又名浮点）实数 alpha x 加 y”。）带有维度向量`N`。

# android - OnReceive Battery（如何跟踪每 1%）

> ID：15441135
> 
> 赞同：-3
> 
> 时间：2013-03-15T19:59:43.313
> 
> 标签：android

我有一个简单的广播器来监听 ON_CHANGE 事件，所以我的主要问题是为什么我的手机有时不是下降 1%，而是下降 2%、3% 或 4%？

有时感觉手机睡着了，没有收到那个意图，但一段时间后它从睡眠中恢复过来，不是 1%，而是 4% **编辑**

```
 /* Broadcast Receiver for battery stats                                               */
            IntentFilter batteryLevelFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);

            batteryLevelReceiver = new BroadcastReceiver(){
                @Override
                public void onReceive(Context context, Intent intent){
                    int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
                    int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);
                    int isCharging = intent.getIntExtra(BatteryManager.EXTRA_PLUGGED, -1);

......

    registerReceiver(batteryLevelReceiver, batteryLevelFilter); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:02:54.857

> 所以我的主要问题是为什么我的手机有时不会下降 1% 而是下降 2%、3% 或 4%？

这不应该发生。通常在电池耗尽 1%（或电池状态一般发生变化）后，广播会启动。不过有一个例外。在某些摩托罗拉设备上，`ACTION_BATTERY_CHANGED`每 10% 才会启动一次。对于 Broadcastreceiver 的工作示例，它收听了`ACTION_BATTERY_CHANGED`我不久前给出的[这个答案](https://stackoverflow.com/questions/15102124/battery-changed-broadcast-receiver-crashing-app-on-some-phones/15102295#15102295)。

> 但过了一段时间，它从睡眠中恢复过来，不是 1%，而是 4%

Broadcastreceiver 不会唤醒您的手机，所以这并不罕见 :)

# regex - 正则表达式规则：匹配一个常量和字符串的最后一部分

> ID：15441136
> 
> 赞同：0
> 
> 时间：2013-03-15T19:59:44.390
> 
> 标签：regex

我不太擅长编写正则表达式，但我需要匹配 URL 的某些部分。

``http://example.com/service-page/service1/sub-service2/other-service/``

我的尝试看起来像

``service-page/(.?.+?)$``

捕获看起来像`service1/sub-service2/other-service/`

但我只需要匹配`service-page`网址内是否有常量并捕获网址的最后一部分`other-service`

``http://example.com/[service-page]/service1/sub-service2/[other-service]/``

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:04:23.270

要捕获最后一个子文件夹的名称：

```
ServicePageSubFolder("http://example.com/service-page/service1/sub-service2/other-service/");

public string ServicePageSubFolder(string url)
{
    Regex regex = new Regex(@"service-page.*/([^/]+)/?");
    Match match = regex.Match(url);
    if (match.Success)
        return match.Groups[1].Value;
    return null;
} 
```

祝你的任务好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:15:50.883

我不得不承认我没有 WP 可以测试，但是基于与其他正则表达式引擎的合作，我不明白为什么这不应该工作：

```
service-page/.*?([^/]+)/?$ 
```

# java - Spring MVC 控制器更改 URL 或发出不正确的 URL

> ID：15441138
> 
> 赞同：0
> 
> 时间：2013-03-15T19:59:50.427
> 
> 标签：java, http, url, spring-mvc, url-rewriting

我有一个 SpringMVC 应用程序，我不确定它是否正常工作。我有一个注册表单，`http://localhost:8080/myapp/registration.htm`当我单击查询按钮时读取的 url 将应用程序发布到控制器，并且用户被发布到第二页 getList.htm，它显示结果列表但是当发布到第二页时，url 仍然读取`http://localhost:8080/myapp/registration.htm`。

当发布第二页时，假设用户被带回第一页`http://localhost:8080/myapp/registration.htm`以显示从 getList.htm 中选择的记录（这会显示多条记录）。

当用户被回发到`http://localhost:8080/myapp/registration.htm`url 时，读取`http://localhost:8080/myapp/getList/1985121244.htm`其中 1985121244 是记录号。`http://localhost:8080/myapp/registration.htm`一旦用户被发布回第一页，是否应该显示 url ？

此外，如果用户在从 getList.htm POST 返回后尝试发布第一页，您将获得 HTTP 400 并且 url 读取`http://localhost:8080/myapp/getList/registration.htm`。第二页附加到 url，这不是控制器中的适当映射。有人可以解释这里发生了什么以及它是如何修复的。

**已编辑**

此外，当我第一次进入应用程序时，主菜单是`http://localhost:8080/myapp/hello.htm`当我单击 aa href 时，我被带到注册页面，但是页面显示但 url 没有改变。当从 hello.htm 页面单击 href 标记时，控制器会请求获取注册页面并使用返回它`return new ModelAndView("registration");`我看到一些网站说我应该使用 return new`ModelAndView("redirect:/registration");`但是当使用它时我得到了`404 Not Found - http://localhost:8080/myapp/registration"`。在我发布代码之前我可以看到的任何想法我的代码很多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:30:41.020

对我来说，您似乎只是在登录后返回视图名称。当然，这不会改变您的网址。不要返回视图名称，而是使用“redirect:/getList.htm”指向您需要的 url。

然后处理 getList.htm 的控制器检查用户是否登录并返回正确的视图名称。

# c - 浮点运算的准确性

> ID：15441139
> 
> 赞同：8
> 
> 时间：2013-03-15T19:59:53.103
> 
> 标签：c, floating-point, floating-accuracy, ieee-754

我无法理解该程序的输出

```
int main()
{
    double x = 1.8939201459282359e-308;
    double y = 4.9406564584124654e-324;
    printf("%23.16e\n", 1.6*y);
    printf("%23.16e\n", 1.7*y);
    printf("%23.16e\n", 1.8*y);
    printf("%23.16e\n", 1.9*y);
    printf("%23.16e\n", 2.0*y);
    printf("%23.16e\n", x + 1.6*y);
    printf("%23.16e\n", x + 1.7*y);
    printf("%23.16e\n", x + 1.8*y);
    printf("%23.16e\n", x + 1.9*y);
    printf("%23.16e\n", x + 2.0*y);
} 
```

输出是

```
9.8813129168249309e-324
9.8813129168249309e-324
9.8813129168249309e-324
9.8813129168249309e-324
9.8813129168249309e-324
1.8939201459282364e-308
1.8939201459282364e-308
1.8939201459282369e-308
1.8939201459282369e-308
1.8939201459282369e-308 
```

我正在使用 IEEE 算法。该变量`y`包含最小的 IEEE 编号。前五张照片显示的数字是我预期的两倍。令我困惑的是，接下来的五张照片显示了不同的数字。如果`1.6*y`是一样的`2.0*y`那么怎么`x + 1.6*y`会不同`x + 2.0*y`呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T20:36:51.943

## 简而言之

你说你的编译器是 Visual C++ 2010 Express。我无权访问此编译器，但我知道它生成的程序最初将 x87 CPU 配置为使用 53 位精度，以便尽可能模拟 IEEE 754 双精度计算。

不幸的是，“尽可能接近”并不总是足够接近。为了模拟双精度，历史 80 位浮点寄存器的有效位宽度可能受到限制，但它们始终保留完整的指数范围。在操作非规范化（例如您的 ）时，差异尤其明显`y`。

## 怎么了

我的解释是 in `printf("%23.16e\n", 1.6*y);`,`1.6*y`被计算为 80 位减少有效位的全指数数（因此它是一个普通数），然后转换为 IEEE 754 双精度（导致非正规），然后打印。

另一方面， in `printf("%23.16e\n", x + 1.6*y);`,`x + 1.6*y`使用所有 80 位缩减有效位和全指数数字（同样所有中间结果都是正常数字）计算，然后转换为 IEEE 754 双精度，然后打印。

这可以解释为什么`1.6*y`打印与`2.0*y`添加到`x`. 打印的数字是双精度非正规数。添加到的数字`x`是一个 80 位减少有效位和全指数正常数（不是同一个）。

## 生成 x87 指令时其他编译器会发生什么

其他编译器，如 GCC，不配置 x87 FPU 来操作 53 位有效位。这可能产生相同的结果（在这种情况下`x + 1.6*y`，将使用所有 80 位全有效位和全指数计算，然后转换为双精度以打印或存储在内存中）。在这种情况下，这个问题更加明显（您不需要涉及非正规数或无限数来注意到差异）。

David Monniaux 的这篇[文章](http://arxiv.org/abs/cs/0701192)包含您可能希望的所有详细信息以及更多信息。

## 删除不需要的行为

为了摆脱这个问题（如果你认为它是一个问题），找到告诉你的编译器为浮点生成 SSE2 指令的标志。它们完全实现了单精度和双精度的 IEEE 754 语义。

# jquery - 递增的 JavaScript 变量未作为参数传递

> ID：15441146
> 
> 赞同：0
> 
> 时间：2013-03-15T20:00:19.567
> 
> 标签：jquery

```
<script type="text/javascript">
$(document).ready(function() {

    var $item = $('div.imgItem'), //Cache your DOM selector
        visible = 1, //Set the number of items that will be visible
        index = 0, //Starting index
        endIndex = ( $item.length / visible ) - 1, //End index
        imgIndex = 1; 

    $('div#imageItem' + imgIndex).click(function(){
        if (index == 0 || index == (endIndex-1))
        {
            var animatePX = imgWidth * .85 + 2;
        }
        else
        {
            var animatePX = imgWidth * .9 + 2;
        }

        if(index < endIndex ){
          index++;
          imgIndex++;
          //alert (imgIndex);
          $item.animate({'left':'-='+animatePX});
        }
    });

}); 
```

我正在尝试创建幻灯片..我的问题是变量 imgIndex 在函数内部递增，但是第二次调用该函数时，imgIndex 的值仍然是 0.. 有人可以帮我解决这个问题.. 我想要每次作为参数传递的递增值..

@jfriend00 这是我的 html

```
<div class="imgItem" id="imgItem0">
</div>
<div class="imgItem" id="imgItem1">
</div>
<div class="imgItem" id="imgItem2">
</div>
<div class="imgItem" id="imgItem3">
</div>
<div class="imgItem" id="imgItem4">
</div> 
```

每个 div 中都会加载一个图像。当我创建一个滑块时，我想单击下一个图像来滑动它。这就是为什么我为 div 使用不同的 id 的原因。

现在你能告诉我应该如何改变这条线

```
$('div#imageItem' + imgIndex).click(function(){ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:04:42.653

代码行：

```
$('div#imageItem' + imgIndex).click(function(){ 
```

似乎是唯一正在使用的代码行，`imgIndex`它只运行一次，因此它只会以 for 的初始值执行`0`一次`imgIndex`。

如果您希望它执行多次，那么您要么需要在`.click()`处理程序中再次执行它，要么创建一个`for`循环以使用多个值多次执行它，或者您需要设置不同类型的事件处理，其中您的初始事件处理程序适用于许多对象。

我们必须查看您的 HTML 并更多地了解您要完成的工作，才能知道哪条路径是最好的。

* * *

如果您想要多个对象的单击处理程序，那么最好在它们上放置一个通用类名，以便您可以像这样设置事件处理程序：

```
$('.imageItemCommon').click(function(){{/* code here */}); 
```

或者，如果这些是动态创建的元素，则使用委托事件处理：

```
$(static parent selector).on('.iamgeItemCommon', 'click', function() {/* code here */}); 
```

* * *

PS 没有理由使用`'div#imageItem0'`，而不仅仅是`'#imageItem0'`作为选择器。添加 'div' 部分只会减慢选择器引擎的速度，并且由于 id 在文档中是唯一的，因此您不需要将其作为过滤器的一部分。

* * *

好的，既然您已经展示了实际的 HTML，我建议您使用这种形式的事件处理程序，因为这适用于所有幻灯片（不需要 id）：

```
// advance to next slide on click
$(".imgItem").click(function() {
    // use $(this) to refer to the currently clicked on slide

}); 
```

* * *

而且，这是我认为做这种动画的更简单的方法：

```
var imgsNum = $(".imgItem").length
var imgWidth = 200;

$(".slideHolder").click(function() {
    var holder = $(this);
    var slideNum = -parseInt(holder.css("left"), 10) / imgWidth;
    if ((slideNum + 1) < imgsNum) {
        holder.animate({left: "-=" + imgWidth + "px"}, 1000);
    } else {
        holder.animate({left: "0"}, 1000);
    }
}); 
```

在此处使用 HTML 和 CSS 进行演示：http: [//jsfiddle.net/jfriend00/AZ7NY/](http://jsfiddle.net/jfriend00/AZ7NY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:06:34.507

您的选择器：

```
$('div#imageItem' + imgIndex) 
```

只创建一次，当`imgIndex=1`. 您需要创建更通用的东西：

```
$('div[id^=imageItem]').click(function(){
    if ('imageItem'+imgIndex === this.id) {
        if (index == 0 || index == (endIndex-1))
        {
            var animatePX = imgWidth * .85 + 2;
        }
        else
        {
            var animatePX = imgWidth * .9 + 2;
        }

        if(index < endIndex ){
          index++;
          imgIndex++;
          //alert (imgIndex);
          $item.animate({'left':'-='+animatePX});
        }
    }
}); 
```

# python - python2.7 csv：遍历行并通过附加split（）存储在数组中

> ID：15441155
> 
> 赞同：0
> 
> 时间：2013-03-15T20:00:52.143
> 
> 标签：python, arrays, list, iteration

我试图弄清楚我在循环中的评论是否正确。变量“设备”会像我希望的那样成为“列表列表”吗？如果是这样，我可以使用 device[0][0] 调用数据吗？或者，假设我想要第三行和第二项，使用 device[2][1]？

```
def deviceFile():
    devFile = raw_input('Enter the full file path to your device list file: \n-->')
    open(devFile, 'r')
    device = []
    for line in devFile:
        # creating an array here to hold each line. Call with object[0][0]
        device.append(line.split(','))
    return(device) 
```

编辑：

```
def deviceFile():
'''This def will be used to retrieve a list of devices that will have
commands sent to it via sendCommands(). The user will need to supply
the full file path to the raw_input(). This file will need to be a csv,
will need to have column0 be the IP address, and column1 be the 
hostname(for file naming purposes). If a hostname is not supplied in
column1, the file will be named with the IP address.'''

devFile = raw_input('Enter the full file path to your device list file: \n-->')
thisFile = open(devFile, 'r')
device = []

for line in thisFile:
    # creating an array here to hold each line. Call with object[0][0]
    device.append(line.split(','))
thisFile.close()
return(device) 
```

这更像是一个“我这样做是否合乎逻辑”而不是“我的代码是否完美”类型的问题。我希望 csv 的每一行都是它自己的列表，并且能够通过在我的主程序中调用它来访问它：

设备 = 设备文件（）

机器=设备[0][0]

返回第一行的第一项

机器=设备[2][1]

返回第三行的第二项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:44:13.687

你的问题是你没有对文件对象（`open`返回的东西）做任何事情，而是试图对文件名进行操作，就好像它是一个文件对象一样。所以，只要改变这个：

```
devFile = raw_input('Enter the full file path to your device list file: \n-->')
open(devPath, 'r') 
```

对此：

```
devPath = raw_input('Enter the full file path to your device list file: \n-->')
devFile = open(devPath, 'r') 
```

一旦你这样做了，它就会“工作”，但可能不是你想要的方式。例如，对于这个文件：

```
abc, def
ghi, jkl 
```

你会得到这个：

```
[['abc', ' def\n'], ['ghi', ' jkl\n']] 
```

这些`'\n'`字符在那里是因为`for line in devFile:`返回保留换行符的行。如果你想摆脱它们，你必须做一些事情，比如`rstrip('\n')`。

空格在那里是因为`split`没有对空格做任何神奇的事情。你要求它分裂`'abc, def'`，`','`你会得到`'abc'`和`' def'`回来。如果你想摆脱它们，`strip`结果。

你还有其他各种小问题——例如，你永远不会关闭文件——但它们都不会真正阻止你的代码工作。

所以：

```
def deviceFile():
    devPath = raw_input('Enter the full file path to your device list file: \n-->')
    devFile = open(devPath, 'r')
    device = []
    for line in devFile:
        # creating an array here to hold each line. Call with object[0][0]
        device.append([value.strip() for value in line.rstrip('\n').split(',')])
    return(device) 
```

现在你将返回这个：

```
[['abc', 'def'], ['ghi', 'jkl']] 
```

这`device.append([value.strip() for value in line.rstrip('\n').split(',')])`看起来相当复杂。在你可以之前调用`rstrip`每一行`split`没什么大不了的，但是调用`strip`每个值的列表理解使它有点难以阅读。如果你不知道什么是列表推导（这似乎很可能，因为你有一个明确`append`的`device`列表循环），你必须做这样的事情：

```
device = []
for line in devFile:
    values = []
    for value in line.rstrip('\n').split(','):
        values.append(value.strip())
    device.append(values) 
```

但是，有一种更简单的方法可以做到这一点。标准库中的[`csv`模块](http://docs.python.org/2/library/csv.html)使用换行符和空格处理所有棘手的事情，以及您甚至还没有想到的事情（如引用或转义值）。

```
def deviceFile():
    devPath = raw_input('Enter the full file path to your device list file: \n-->')
    with open(devPath) as devFile:
        return list(csv.reader(devFile)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T20:14:08.657

如果我错了，请纠正我，我认为您正在尝试读取文件，然后将文件中的每一行（用逗号分隔）存储到一个数组中。例如，如果您有一个简单地说“一、二、三”的文本文件，您是否希望它创建一个数组 ['one', 'two', 'three']？如果是这样，您不需要 for 循环，只需执行以下操作：

```
def deviceFile():
    devFile = raw_input('Enter the full file path to your device list file: \n-->')
    myFile = open(devFile, 'r') # Open file in read mode
    readFile = myFile.read() # Read the file

    # Replace enter characters with commas
    readFile = readFile.replace('\n', ',')
    # Split the file by commas, return an array
    return readFile.split(',') 
```

您不需要 for 循环的原因是 str.split() 已经返回一个数组。事实上，你甚至不需要附加“设备”，你根本不需要设备。有关更多信息，请参阅[字符串文档](http://docs.python.org/2/library/stdtypes.html#str.split)。

# c++ - 从 C++ 调用 C 函数，“无匹配函数”错误

> ID：15441156
> 
> 赞同：4
> 
> 时间：2013-03-15T20:00:58.273
> 
> 标签：c++, c, compiler-construction

我已经定义了以下头文件（在 C 中），省略了函数实现，因为不需要 thise：

```
#ifndef FFMPEG_MEDIAMETADATARETRIEVER_H_
#define FFMPEG_MEDIAMETADATARETRIEVER_H_

#include <libavcodec/avcodec.h>
#include <libavformat/avformat.h>
#include <libavutil/dict.h>

int setDataSource(AVFormatContext** pFormatCtx, const char* path);

#endif /*FFMPEG_MEDIAMETADATARETRIEVER_H_*/ 
```

在 C++ 中，我定义了我的第二个头文件：

```
#ifndef MEDIAMETADATARETRIEVER_H
#define MEDIAMETADATARETRIEVER_H

using namespace std;

extern "C" {
  #include "ffmpeg_mediametadataretriever.h"
}

class MediaMetadataRetriever
{
public:
    MediaMetadataRetriever();
    ~MediaMetadataRetriever();
    int setDataSource(const char* dataSourceUrl);
};

#endif // MEDIAMETADATARETRIEVER_H 
```

在 mediametadataretriever.cpp 中，我定义了以下函数：

```
int MediaMetadataRetriever::setDataSource(
    const char *srcUrl)
{
    // should call C function
    AVFormatContext* pFormatCtx;
    return setDataSource(&pFormatCtx, srcUrl);
} 
```

当我尝试在 Eclipse 中编译这个（C++）项目时，我得到一个“没有匹配的函数调用...”错误，与以下内容相关：

```
return setDataSource(&pFormatCtx, srcUrl); 
```

如果我注释掉调用，代码编译得很好：

```
int MediaMetadataRetriever::setDataSource(
    const char *srcUrl)
{
    return 0;
} 
```

这似乎是一个链接问题，有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-15T20:03:22.533

`setDataSource`在该上下文中是成员函数的名称。要调用 free 函数，请尝试完全限定其名称：

```
return ::setDataSource(&pFormatCtx, srcUrl);
//     ^^ 
```

# c++ - gtkmm - 多个窗口/弹出窗口

> ID：15441157
> 
> 赞同：3
> 
> 时间：2013-03-15T20:01:06.353
> 
> 标签：c++, gtk, gtk3, gtkmm

我一直在搜索很多，但我仍然找不到一个很好的例子来说明如何在同一个应用程序中使用`GTK`. 我的程序在里面，`C++`但我不介意举个例子`C`来帮助我理解这个原理。

因此，基本思想是创建我自己的派生对象，`Gtk::Window`而不是`Gtk::Dialog`. `Dialog`有一个运行方法可以完美地打开一个模式弹出窗口，但是对于我想要做的事情来说它不够灵活。有谁知道当我单击程序中的按钮时我会如何生成一个新窗口？

例如：

```
void MainWindow::on_button_clicked()
{

    NewWindow window;
    //Some code to display that window and stay in a loop until told to return
} 
```

NewWindow 的来源`Gtk::Window`是这样的：

```
class NewWindow : public Gtk::Window
{

   //Normal stuff goes here

} 
```

任何事情都会有所帮助......我在这里真的很困惑！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-08T23:58:27.130

Another way to have a new window is to create a pointer to a Gtk window variable(`Gtk::Window* about_window_;`) then set the Gtk window variable to a new instance of the other window (`about_window_ = new Window;`), after that show the new window (`about_window_->show();`). Below is a full example of this:

```
class AboutWindow : public Gtk::Window
{
public:
    AboutWindow();
    ~AboutWindow();

protected:
    Gtk::Label lbl_;
};

AboutWindow::AboutWindow()
{
    this->set_default_size(100, 100);
    this->set_title("About");

    lbl_.set_label("About label");
    this->add(lbl_);

    this->show_all_children();
}

AboutWindow::~AboutWindow()
{

}

class MainWindow : public Gtk::Window
{
public:
    MainWindow();
    virtual ~MainWindow();

protected:
    void onButtonClicked();
    void aboutWinClose();

    Gtk::Button button_;
    Gtk::Label lbl_;
    Gtk::Box box_;
    Gtk::AboutWindow* aboutw_;
};

MainWindow::MainWindow()
{
    this->set_default_size(100, 100);
    box_.set_orientation(Gtk::ORIENTATION_VERTICAL);
    this->add(box_);
    box_.pack_start(lbl_);

    lbl_.set_label("a test");

    button_.set_label("Open About Window");
    box_.pack_end(button_);

    button_.signal_clicked().connect(sigc::mem_fun(*this, &MainWindow::onButtonClicked));

    aboutw_ = 0;

    this->show_all_children();
}

MainWindow::~MainWindow()
{

}

void MainWindow::onButtonClicked()
{
    if(aboutw_ != 0)
        return;

    aboutw_ = new AboutWindow;
    aboutw_->signal_hide().connect(sigc::mem_fun(*this, &MainWindow::aboutWinClose));
    aboutw_->show();
}

void MainWindow::aboutWinClose()
{
    aboutw_ = 0;
} 
```

Added for reference.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T12:29:10.240

If you don't want the new window to be modal, then simply create it, `show()` it, and return from your main window's method *without* entering a loop.

# c - MPI_Waital 失败

> ID：15441163
> 
> 赞同：6
> 
> 时间：2013-03-15T20:01:53.823
> 
> 标签：c, parallel-processing, mpi

我想知道是否有人可以为我了解 MPI_Waital 函数。我有一个使用 MPI_Isend 和 MPI_Irecv 传递信息的程序。在所有发送和接收完成后，程序中的一个进程（在本例中为进程 0）将打印一条消息。我的 Isend/Irecv 正在工作，但消息在程序中的某个随机点打印出来；所以我试图使用 MPI_Waital 等到所有请求都完成后再打印消息。我收到以下错误消息：

```
Fatal error in PMPI_Waitall: Invalid MPI_Request, error stack:
PMPI_Waitall(311): MPI_Waitall(count=16, req_array=0x16f70d0, status_array=0x16f7260) failed
PMPI_Waitall(288): The supplied request in array element 1 was invalid (kind=0) 
```

以下是一些相关代码：

```
MPI_Status *status;
MPI_Request *request;

MPI_Init(&argc, &argv);
MPI_Comm_rank(MPI_COMM_WORLD, &taskid);
MPI_Comm_size(MPI_COMM_WORLD, &numtasks);
status = (MPI_Status *) malloc(numtasks * sizeof(MPI_Status));
request = (MPI_Request *) malloc(numtasks * sizeof(MPI_Request));

/* Generate Data to send */
//Isend/Irecvs look like this:
MPI_Isend(&data, count, MPI_INT, dest, tag, MPI_COMM_WORLD, &request[taskid]);
MPI_Irecv(&data, count, MPI_INT, source, tag, MPI_COMM_WORLD, &request[taskid]);
MPI_Wait(&request[taskid], &status[taskid]

/* Calculations and such */

if (taskid == 0) {
        MPI_Waitall (numtasks, request, status);
        printf ("All done!\n");
}
MPI_Finalize(); 
```

如果不调用 MPI_Waitall，程序运行干净，但只要进程 0 的 Isend/Irecv 消息完成，就会打印“All done”消息，而不是在所有 Isend/Irecvs 完成后打印。

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T20:38:31.717

您只设置了`request`数组的一个元素，即`request[taskid]`（顺便说一下，您用接收元素覆盖发送请求句柄，不可撤销地丢失前者）。请记住，MPI 用于对分布式内存机器进行编程，每个 MPI 进程都有自己的`request`数组副本。在等级中设置一个元素`taskid`不会神奇地将值传播到其他等级，即使这样做，请求也只有本地有效性。正确的实现是：

```
MPI_Status status[2];
MPI_Request request[2];

MPI_Init(&argc, &argv);
MPI_Comm_rank (MPI_COMM_WORLD, &taskid);
MPI_Comm_size (MPI_COMM_WORLD, &numtasks);

/* Generate Data to send */
//Isend/Irecvs look like this:
MPI_Isend (&data, count, MPI_INT, dest, tag, MPI_COMM_WORLD, &request[0]);
//          ^^^^
//           ||
//      data race !!
//           ||
//          vvvv
MPI_Irecv (&data, count, MPI_INT, source, tag, MPI_COMM_WORLD, &request[1]);
// Wait for both operations to complete
MPI_Waitall(2, request, status);

/* Calculations and such */

// Wait for all processes to reach this line in the code
MPI_Barrier(MPI_COMM_WORLD);

if (taskid == 0) {
  printf ("All done!\n");
}
MPI_Finalize(); 
```

顺便说一句，您的代码中存在数据竞争。两者`MPI_Isend`都`MPI_Irecv`使用相同的数据缓冲区，这是不正确的。如果您只是尝试发送 to 的内容`data`然后`dest`从 接收到它`source`，那么`MPI_Sendrecv_replace`请改用并忘记非阻塞操作：

```
MPI_Status status;

MPI_Init(&argc, &argv);
MPI_Comm_rank (MPI_COMM_WORLD, &taskid);
MPI_Comm_size (MPI_COMM_WORLD, &numtasks);

/* Generate Data to send */
MPI_Sendrecv_replace (&data, count, MPI_INT, dest, tag, source, tag,
                      MPI_COMM_WORLD, &status);

/* Calculations and such */

// Wait for all processes to reach this line in the code
MPI_Barrier(MPI_COMM_WORLD);

if (taskid == 0) {
  printf ("All done!\n");
}
MPI_Finalize(); 
```

# css - 无法让 z-index 正常工作

> ID：15441165
> 
> 赞同：0
> 
> 时间：2013-03-15T20:02:09.987
> 
> 标签：css, z-index

我无法让侧边栏上的底部三角形的 z-index 正常工作。我需要它位于标题框下方，这样我才能看到 3D 效果.. 有什么想法吗？

该网站是 - [http://www.dunkleysdairy.com](http://www.dunkleysdairy.com)

侧边栏在右侧（带有黄色标题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:52:45.420

您遇到的问题是您试图将元素的 z-index 设置为低于它嵌套的元素。这是不可能的 - 请参阅链接以获取图形示例： [https ://developer.mozilla.org/ zh-CN/docs/CSS/Understanding_z-index/The_stacking_context](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context)

您需要做的是确保要向后移动的元素不是您希望在前面的项目的子后代。

在您的特定情况下，您可以通过将 .heading 样式应用于 h2 来解决此问题。

或者，您可以考虑为此使用伪元素，这样您就不必添加额外的 div。您的 html 将是：

```
<div class="heading">Title goes here</div> 
```

然后，您将使用此规则添加到您当前的 .heading 样式（确保在您的 .heading 上保持 relative:positioning 但从中删除任何 z-index）：

```
.heading:before{
content:" "; display:block; position:absolute;
border-color: transparent #dfb704 transparent transparent; border-style: solid; border-width: 15px;
height: 0px; width: 0px; 
left: -15px; bottom: -15px;
z-index: -1;
} 
```

这会将您的三角形直接设置在 z-index 堆栈中的标题下方。这是一个简单的例子： [http ://codepen.io/chrisboon27/pen/Fprxk](http://codepen.io/chrisboon27/pen/Fprxk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:36:03.250

`frame`是 的后代`heading`，因此 的 z-index 属性`frame`会影响它。如果您希望为它们提供不同的 z 深度，则需要将它们放置在 DOM 树的不同分支上。例如：两者都可以是`block`.

# javascript - JS在传递之前绑定函数的上下文

> ID：15441167
> 
> 赞同：1
> 
> 时间：2013-03-15T20:02:26.687
> 
> 标签：javascript, closures

我正在尝试设置一个存储回调的函数，该回调可以稍后在事件中触发，但我没有得到正确绑定的上下文。设置基本上是这样的：

```
app.myObject = function(){
  this.bindEvents();
};
app.myObject.prototype = {
  bindEvents: function(){
    var self = this;
    this.library = new OutsideLibrary();
    this.library.onMyEvent = function(data) {
      OtherLibrary.processData(data, self.runCallback); // I'm not able to pass a context here...
    }
  },
  sendToLibrary: function(message,callback) {
    this.callback = callback;
    this.library.send(message);
  }
  // ... and this doesn't work because it gets evaluated in the wrong context.
  runCallback: function() { 
    if (this.callback) {
      this.callback();
      this.callback = null;
    }
  }
} 
```

我希望上面的代码有意义。这个想法是，我正在尝试公开一个可以调用的 API：

```
app.myObject.sendToLibrary("something", function() {...}); 
```

...并且回调函数将在整个链完成后运行。

问题是，我不能`sendToLibrary`直接传递接收到的回调，因为当事件触发时，回调需要传递给另一个对象。另外，由于我必须存储当前传递的回调，并且回调是可选的，所以一旦它被触发，我需要取消设置它，所以我实际上需要传递`runCallback`函数来运行回调，然后取消设置它。

无论如何，问题是当`runCallback`最终被执行时，它不再处于正确的上下文中，所以它不起作用。我对如何解决这个问题的第一个想法是更改`runCallback`函数以包含上下文参数，这样我就可以通过`self.runCallback(self)`——但它会立即执行，所以它违背了目的。

无论如何，我有点迷失在这里的回调树林中，希望能得到一些帮助找到我的出路:)

我的问题是：有没有办法包装一个回调函数和正确的上下文，而不是现在执行它，以便当它最终触发它时，它会从正确的上下文中执行？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:17:54.430

```
OtherLibrary.processData(data, function() {
    self.runCallback();
)}; 
```

然后 inside of`runCallback` `this`指的是 的一个实例`app.myObject`，如果这是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:21:38.690

安德鲁，我想你可能有点太努力了，在这里。

如果您要做的只是绑定上下文，则可以执行以下操作之一：

```
var working_method = context.method.bind(context);
// bind is IE9+, and does something similar to the below

// or, from whatever scope your context/method are available in, define this function
var working_method = function () { context.method(); }; 
```

如果您需要参数，并且您已经知道足迹：

```
var working_method = function (a, b, c) { context.method(a, b, c); }; 
```

可变参数长度的解决方案（即：广义的“绑定”方法）更长，但如果您正在在线定义内容，我在这里得到的可能就是您所需要的。

只需确保不要`this`在包装函数中使用（无论是将其保存到 var，还是直接将其传递给另一个函数），因为它将引用`window`.

# c - C Makefile 编译一些选择性文件

> ID：15441169
> 
> 赞同：0
> 
> 时间：2013-03-15T20:02:36.390
> 
> 标签：c, makefile

我正在开发一个包含大约 200 个 .c 文件和一些 .h 文件的 C 项目。最终产品中并不需要所有这 200 个文件。目前需要编译大约 180 个文件。我们有一个文件“compile_only_these.c”，其中包括项目所需的这 180 个 *.c 文件。我们的 makefile 只编译这个文件而不是单独的 .c 文件。

```
/* file: compile_only_these.c*/

#include "file1.c"
#include "file2.c"
.
.
.
#include "file180.c" 
```

但我认为包含 .c 文件是个坏主意。因为每次我修改这些文件中的任何一个时，都会重新编译所有文件。

你能建议一种更好的方法来编译这些文件吗？

更多信息：

*   所有 .c 文件都在同一个文件夹“../project/src”中
*   我不断添加需要编译的新 .c 文件。我不想每次添加新文件时都修改 Makefile。
*   我仍然想保留我现在没有编译的那 20 个 .c 文件。我将来可能会使用它。删除这些文件将它们移动到其他目录不是解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:10:45.127

如前所述，管理项目是一种奇怪的方式，但考虑到您必须使用的内容，您可能会尝试这种方法......

```
CC = gcc
OBJFILE = myprog

# Tweak to match whatever you compile with normally
CFLAGS  = -O2 -Wall -std=c89 -pedantic
LDFLAGS= # Extra flags here, for example -lm -pthread 

RM = rm -f

SRCS = $(wildcard *.c)
OBJS = $(SRCS:.c=.o)

$(OBJFILE):$(OBJS)
    $(CC) -o $@ $^ $(LDFLAGS)

clean:
    $(RM) core *~ $(OBJS) $(OBJFILE) 
```

如果您想在 make 中做的不仅仅是编译这个文件列表，您显然需要针对构建层次结构的细节调整路径，但这是使用通配符替换获取所有文件的通用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:24:16.037

您需要的是 makefile 中的一个变量，一个所需目标文件的列表，如下所示：

```
OBJS := file1.o file2.o ... file180.o 
```

您可以让 Make 从`compile_only_these.c`文件中构造它，如下所示：

```
OBJS := $(shell sed -e '/\#include/!d' -e 's/\#include "\(.*\)\.c"/\1.o/' compile_only_these.c) 
```

您是否还需要掌握使用这些对象构建最终产品的规则？

# sql - 当数据包含逗号时将 sql 后台打印到 CSV

> ID：15441170
> 
> 赞同：7
> 
> 时间：2013-03-15T20:02:36.953
> 
> 标签：sql, oracle, sqlplus

我正在尝试使用命令提示符将 sql 查询假脱机到 CSV 文件，但是我返回的一列数据在数据中包含逗号，并导致数据进入下一列。有没有办法解决这个问题？理想情况下，我希望在查询中间返回这个特定的列，而不是在最后。

我目前正在使用以下命令：

```
set termout off;
set colsep ',';
set underline off;
set feedback off;
set pagesize 0;
set linesize 1500;
set trimspool on; 
```

我知道 set colsep ',' 命令是问题所在，但无法弄清楚用什么替换它。有人有什么建议吗？

此外，就在我的 sql 查询之前，我正在使用 select 语句来提取标题信息。从对偶中选择'a，b，c'；不确定这是否会对答案产生影响。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T20:22:55.047

两个可能的答案。他们都不完美。如果某些结果中有逗号，但没有管道 ( `|`)，则可以切换到用管道分隔的

```
set colsep '|' 
```

大多数可以读取的软件都可以`csv`使用这种格式。

如果这对您不起作用，您可以意识到要在列中处理逗号，您需要将每个数据项括在引号中：

```
"data 1","data 2","data,with,commas" 
```

为此，每个分隔符都需要`","`这样，您可以

```
set colsep '","' 
```

这不会在每行的开头和结尾有引号，因此您可以将每一行用引号括起来`sed`：

```
sed 's/^[^$]*$/"&"/' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-03T22:24:04.260

您可以修改您的选择查询，例如

```
select REPLACE(column_name, ',',' ') column name from table_name 
```

这将用空格替换列数据中的逗号值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T20:21:44.733

您可以修改返回结果集的查询，方法是用双引号将该列括起来。假设`b`是罪魁祸首：

```
select a
      , '"' || trim(B) || '"' as b
      , c
from your_table; 
```

正确的语法当然取决于您的 RDBMS 版本。

# java - 随机数字串

> ID：15441172
> 
> 赞同：0
> 
> 时间：2013-03-15T20:02:39.410
> 
> 标签：java, arrays

我想打印一串数字，但我得到以下内容：[I@7c230be4

这是我的代码：

```
import java.util.Random;

class Aleatorio {
    public static void main(String[] args) {
        Random diceRoller = new Random();
        int cifra[]= new int[5];
        for (int i = 0; i < cifra.length; i++) {
            int roll = diceRoller.nextInt(9)+1 ;
            cifra[i]=roll;
        }
        System.out.println(cifra);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:04:58.487

您正在看到数组的`Object#toString`表示。要显示其内容，您可以使用：`int``Object`

```
Arrays.toString(cifra) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:07:05.287

尝试这个

```
for (int c : cifra) {
  System.out.println(c);
} 
```

而不是这个

```
System.out.println(cifra); 
```

# android - 应用程序意外停止，请稍后再试

> ID：15441173
> 
> 赞同：-3
> 
> 时间：2013-03-15T20:02:40.733
> 
> 标签：android

这是我的 World_Heritage 活动代码，请帮帮我。它有三个按钮（下一个、上一个、第一个）和一个图像视图。如果我单击下一个按钮，图像应该会改变

公共类 World_Heritage 扩展 Activity 实现 View.OnClickListener {

```
ImageView draw = (ImageView)findViewById(R.id.imageView1);
int a=0;
Button butnnext;

/** Called when the activity is first created. */
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.worldheritage);
    Button butnpre = (Button)findViewById(R.id.buttonprevious);
    butnpre.setOnClickListener(this);

    Button butnfir = (Button)findViewById(R.id.buttonfirst);
    butnfir.setOnClickListener(this);

    butnnext = (Button)findViewById(R.id.buttonnext);
    butnnext.setOnClickListener(this);

    // TODO Auto-generated method stub
}

public void onClick(View v)
{
    switch(v.getId())
    {
    case R.id.buttonfirst:
        draw.setImageResource(R.drawable.agra_fort);
        a=0;
        break;

    case R.id.buttonnext:
        if(a==0)
        {
        draw.setImageResource(R.drawable.ajantha_caves);
        a=1;
        }
        else if(a==1)
        {
            draw.setImageResource(R.drawable.bhimbetka);
            a=2;
        }
        else if(a==2)
        {
            draw.setImageResource(R.drawable.champaner);
            a=3;
        }
        else if(a==3)
        {
            draw.setImageResource(R.drawable.chttrabadhi);
            a=4;
        }
        else if(a==4)
        {
            draw.setImageResource(R.drawable.church);
            a=5;
        }
        else if(a==5)
        {
            draw.setImageResource(R.drawable.elephanta);
            a=6;
        }
        else if(a==6)
        {
            draw.setImageResource(R.drawable.ellora_caves);
            draw.setClickable(false);
        }
        break;
    case R.id.buttonprevious:
        a--;
        butnnext.performClick();
        break;
    }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:04:23.843

改变

```
ImageView draw = (ImageView)findViewById(R.id.imageView1); 
```

至

```
ImageView draw; 
```

和下

```
setContentView(R.layout.worldheritage); 
```

放

```
draw = (ImageView)findViewById(R.id.imageView1); 
```

这样做的原因是因为您的`Views`诸如`Buttons`,`ImagViews`等... 包含在您的`Layout`. 你`layout`不存在，直到你使用它膨胀它，`setCOntentView()`或者`inflater`因此你的`Views`意志是`null`

另外，从现在开始，当评论者要求您发布代码/logcat/其他任何内容时，请编辑您的 OP 而不是创建新帖子。使用帖子下方的“编辑”按钮

# python - 从 db 执行结果时索引超出范围

> ID：15441179
> 
> 赞同：0
> 
> 时间：2013-03-15T20:03:06.990
> 
> 标签：python, sqlite, execute, indexing

我在尝试简单地从 db (sqlite3) 的行中执行数据时遇到问题。DB 输入有 4 个字段，因此一旦输入，它们就会被保存。但这是我的问题，我执行所有 4 行，如果其中一个字段未填写，我会收到错误消息。

那是数据库执行代码：

```
def ids(self):
    con = lite.connect('foo.db')

    with con:

        cur = con.cursor()    
        cur.execute("SELECT Id FROM foo")

    while True:

        ids = cur.fetchall()

        if ids == None:
            continue

        return ids 
```

由于有 4 行，我的输出代码：

```
 print ''.join(ids[0]) + ',' + ''.join(ids[1]) + ',' + ''.join(ids[2])
 + ',' + ''.join(ids[3]) 
```

所以我的问题是，当没有现有行不显示任何内容而只留下实际存在的行时，如何破例？我试过这样做`if ids[0] is not None: #do something`，但这会使我的代码非常慢，而且我猜它是非 Pythonic 方式。有没有更好的方法来完成这项工作？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:12:08.037

你似乎没有 4 行。使其通用，只需加入任意数量的行：

```
ids = someobject.ids()
print ','.join(''.join(row) for row in ids) 
```

您可以简化数据库查询，无需“轮询”查询：

```
def ids(self):
    with lite.connect('foo.db') as con:
        cur = con.cursor()    
        cur.execute("SELECT Id FROM foo")
        return cur.fetchall() 
```

您也可以直接在游标上循环，数据库将在您获取时处理缓冲：

```
def ids(self):
    with lite.connect('foo.db') as con:
        cur = con.cursor()    
        cur.execute("SELECT Id FROM foo")
        return cur   # just the cursor, no fetching

ids = someobject.ids()
# this'll loop over the cursor, which yields rows as required
print ','.join(''.join(row) for row in ids) 
```

# android - Android canvas.drawBitmap() 渲染错误

> ID：15441180
> 
> 赞同：1
> 
> 时间：2013-03-15T20:03:11.687
> 
> 标签：android, canvas, bitmap, rendering

[使用附加代码更新]

我在某些（我知道的 Nexus 7 和 10）但不是所有设备上的自定义视图的 onDraw() 方法中正确渲染一些位图时遇到了一个重大问题。它可以在我用于测试的 Android 手机上正确呈现。这是后果的片段：

```
/* set up mImagePaint earlier */
mImagePaint.setAntiAlias(true);
mImagePaint.setFilterBitmap(true);
mImagePaint.setDither(true);
mImagePaint.setStyle(Paint.Style.FILL_AND_STROKE);
mImagePaint.setStrokeWidth(0);
mImagePaint.setColor(Color.WHITE);

protected void onDraw(Canvas canvas) {
    final float vw = getWidth();
    final float vh = getHeight();
    final float bw = mBitmap.getWidth();
    final float bh = mBitmap.getHeight();
    final float ba = bw / bh;
    final float va = vw / vh;
    if (va > ba) {
        final float top = (bh - ba / va * bh) / 2;
        mSrcRect.set(0, (int) top, (int) bw, (int) (bh - top));
    } else {
        final float left = (bw - va / ba * bw) / 2;
        mSrcRect.set((int) left, 0, (int) (bw - left), (int) bh);
    }
    mContentRect.set(0, 0, vw, vh);
    canvas.drawBitmap(mBitmap, mSrcRect, mContentRect, mImagePaint);
} 
```

Nexus 7 和 10 上的结果不正确，并呈现如下所示的宽白色边框。这是位图渲染的一部分，但不是原始位图或矩形的一部分。

![Nexus 7 上的渲染不正确](../Images/ff077c8d4cfa7706d57f8d1675335c79.png)

三星 Galaxy 手机上的正确（期望）结果：

![三星 Galaxy 手机上的正确渲染](../Images/12183033ff1000efc3a6665ed1507d19.png)

上面两个示例中显示的图像和代码完全相同。我已经尝试过使用 null paint、null srcRect 甚至使用替代方法 drawBitmap(bitmap, 0, 0, null) 并获得相同结果的变体。查看框架代码，当然 drawBitmap() 直接调用我无法查看其源代码的本地方法。

只有少数图像似乎表现出这个问题，而且似乎大多数方形图像都表现出这个问题。但这里只有另一个非方形图像表现出这个问题：

![Nexus 7 上的非方形图像不正确](../Images/963c7c75e74dd568feaf1f8608519c9d.png)

鉴于所需的自定义视图，这些图像中的大多数都略微旋转，现在我发现旋转可能是问题的一部分，但可能不是因为画布没有旋转，只是当它被复制到父画布位图支持时安卓。

有任何想法吗？这是疯了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:45:39.823

您确定图片足够大而无需在这些设备上放大即可显示吗？

# c# - 无延迟地循环插入和退出剪贴板

> ID：15441188
> 
> 赞同：4
> 
> 时间：2013-03-15T20:03:57.487
> 
> 标签：c#, clipboard

我正在使用以下代码将文本复制到剪贴板。

```
System.Windows.Forms.SendKeys.SendWait("^c"); 
```

然后我用

```
Clipboard.GetText() 
```

从剪贴板中获取文本。它工作正常，但是当我在循环中使用剪贴板并且我得到的内容应该被下一个复制的文本覆盖时，它看起来像是在延迟。如果我放置 Thread.sleep，它工作正常。我怎样才能快速复制并从剪贴板中毫无延迟地获取正确的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:34:05.860

您绝对不能循环更新剪贴板并期望数据立即可用（并且您的应用程序可以访问）。您向其发送击键的应用程序正在其自己的进程中运行，并且 Windows 是多处理、多线程等。因此，您正在寻找要更新的剪贴板，在其他应用程序获得之前有机会复制它。
此外，由于系统上可能运行其他程序，监视剪贴板的更新（剪贴板查看器），当您尝试从剪贴板获取数据时，您将与这些程序发生冲突。
我不知道你为什么要尝试做你正在做的事情，但你应该意识到它不会一直有效。在某些情况下，您可能可以让它工作，但不是所有情况。除非这是供您自己使用的教育练习，否则您应该放弃这种方法。

请阅读有关该主题的引文：

“在没有用户明确指示的情况下，程序不应将数据从剪贴板传输到我们的外部。”<br> — Charles Petzold，Programming Windows 3.1，Microsoft Press，1992

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T20:25:57.993

这似乎是一个记录在案的问题。[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx)承认“时间问题”，但不包括完全解决这些问题的方法，尽管似乎确实有一种“较新”的方法，您需要告诉您的程序默认使用该方法。这是文档的一部分：

> SendKeys 类已针对 .NET Framework 3.0 进行了更新。SendKeys 类容易受到时间问题的影响，一些开发人员不得不解决这些问题。更新后的实现仍然容易受到时序问题的影响，但速度稍快一些，并且可能需要更改变通方法。SendKeys 类首先尝试使用以前的实现，如果失败，则使用新的实现。因此，SendKeys 类在不同操作系统上的行为可能不同。此外，当 SendKeys 类使用新实现时，SendWait 方法将不会等待消息被发送到另一个进程时被处理。如果您的应用程序依赖于一致的行为而不考虑操作系统，

```
<appSettings>
<add key="SendKeys" value="SendInput"/>
</appSettings> 
```

我在另一个公告板上发现了[类似的（旧）问题](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/dfb56254-2d12-43c6-8ffa-9a59ba142e8f)，但不幸的是，他们的修复与您的相同 - 在访问剪贴板之前延迟几分之一秒。我找不到任何其他解决该问题的方法。考虑到有 a`Send`和 a `SendWait`，期望后者在发送后实际等待似乎并不过分！:)

# c++ - 我们应该将 COM 中的 BSTR 类型视为值还是引用？

> ID：15441189
> 
> 赞同：5
> 
> 时间：2013-03-15T20:04:16.743
> 
> 标签：c++, com, atl, cstring, bstr

*从ATL Internals*一书中，我知道 BSTR 与 OLECHAR* 不同，BSTR 有 CComBSTR 和 CString。

根据 MSDN [Allocating and Releating Memory for a BSTR](http://msdn.microsoft.com/en-us/library/vstudio/xda6xzx7%28v=vs.110%29.aspx)，我知道调用者/被调用者的内存管理责任。

从 MSDN 取这条线，

`HRESULT CMyWebBrowser::put_StatusText(BSTR bstr)`

我仍然不知道如何`bstr`在我的实现中正确处理。因为我还有一个关于 BSTR 的基本问题——我们应该将`bstr`其视为一个值（如 int）还是作为一个引用（如 int*），至少在 COM 接口边界上。

我想在我的实现中尽快将 BSTR 转换为 CString/CComBSTR。对于转换，值或引用语义将完全不同。我已经深入研究了 CComBSTR.Attach、CComBSTR.AssignBSTR 等。但代码无法解决我的疑问。

MSDN CComBSTR.Attach 有一些代码片段，我觉得这是错误的，因为它不遵守[为 BSTR 分配和释放内存](http://msdn.microsoft.com/en-us/library/vstudio/xda6xzx7%28v=vs.110%29.aspx)。ATL Internals 说 SetSysString 将“释放传入的原始 BSTR”，如果我使用它，它将违反 BSTR 参数约定，就像 CComBSTR.Attach 一样。

总而言之，我想在实现中使用CString来处理原始BSTR，但不知道正确的方法......我在我的项目中写了一些只是工作代码，但我总是感到紧张，因为我不知道是否我是对的。

让我谈谈编码语言

```
HRESULT CMyWebBrowser::put_StatusText(BSTR bstr)
{
// What I do NOT know
CString str1;  // 1\. copy bstr (with embeded NUL)
CString str2;  // 2\. ref bstr

// What I know
CComBSTR cbstr1;
cbstr1.AssignBSTR(bstr); // 3\. copy bstr 
CComBSTR cbstr2;
cbstr2.Attach(bstr); // 4\. ref bstr, do not copy

// What I do NOT know
// Should we copy or ref bstr ???
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T20:23:21.177

`CComBSTR`只是*raw*的[**RAII 包装器**](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)。因此，请随意使用而不是 raw来帮助编写异常安全的代码，这使得泄漏资源（即原始 BSTR）等变得更加困难。 *`BSTR``CComBSTR``BSTR`*

 *如果 the`BSTR`是一个**输入**参数，它就像 a `const wchar_t*`（以长度为前缀，并且可能包含一些`NUL`s`L'\0'`字符）。如果s`BSTR`没有`NUL`嵌入其中，您可以简单地将其传递给`CString`构造函数，该构造函数将对其进行深层复制，并且您可以在本地使用`CString`. 对它的修改`CString`将不会在原始`BSTR`. 您也可以使用 std::wstring （请注意，它`std::wstring`也可以处理嵌入`NUL`的 s）。

```
void DoSomething(BSTR bstrInput)
{
    std::wstring myString(bstrInput);
    // ... work with std::wstring (or CString...) inside here
} 
```

相反，如果`BSTR`是**输出**参数，则使用另一个间接级别传递它，即`BSTR*`。在这种情况下，您可以`CComBSTR::Detach()`在您的方法中使用来释放`BSTR`安全包装到 中的内容`CComBSTR`，并将其所有权转移给调用者：

```
HRESULT DoSomething( BSTR* pbstrOut )
{
    // Check parameter pointer
    if (pbstrOut == nullptr)
        return E_POINTER;

    // Guard code with try-catch, since exceptions can't cross COM module boundaries.
    try
    {
        std::wstring someString;
        // ... work with std::wstring (or CString...) inside here

        // Build a BSTR from the ordinary string     
        CComBSTR bstr(someString.c_str());

        // Return to caller ("move semantics", i.e. transfer ownership
        // from current CComBSTR to the caller)
        *pbstrOut = bstr.Detach();

        // All right
        return S_OK;
    }
    catch(const std::exception& e)
    {
        // Log exception message...
        return E_FAIL;
    }
    catch(const CAtlException& e)
    {
        return e; // implicit cast to HRESULT
    }
} 
```

基本上，这个想法是**仅*****在边界***`BSTR`使用（包装在 RAII 类中`CComBSTR`），并使用or进行本地工作。*`std::wstring``CString`*

 *作为“读物”，请考虑[*Eric Lippert 的 BSTR 语义指南*](http://blogs.msdn.com/b/ericlippert/archive/2003/09/12/52976.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T20:24:24.937

输入`BSTR`后，您不负责发布它。转换为`CString`很容易：

`CString sValue(bstr);`

或者，如果您更喜欢在 MBCS 构建中保留 Unicode 字符：

`CStringW sValue(bstr);`

如果您需要在有`[out]`参数时转换回来，您可以这样做（简单版本）：

```
VOID Foo(/*[out]*/ BSTR* psValue)
{
  CString sValue;
  *psValue = CComBSTR(sValue).Detach();
} 
```

完整版是：

```
STDMETHODIMP Foo(/*[out]*/ BSTR* psValue)
{
    _ATLTRY
    {
        ATLENSURE_THROW(psValue, E_POINTER); // Parameter validation
        *psValue = NULL; // We're responsible to initialize this no matter what
        CString sValue;
        // Doing our stuff to get the string value into variable
        *psValue = CComBSTR(sValue).Detach();
    }
    _ATLCATCH(Exception)
    {
        return Exception;
    }
    return S_OK;
} 
```**

# svn - 无法连接到存储库浏览器中的存储库

> ID：15441191
> 
> 赞同：2
> 
> 时间：2013-03-15T20:04:19.203
> 
> 标签：svn, tortoisesvn, windows-firewall

我在 Windows Server 2008 上设置了 SVN 服务器。我从其他系统成功访问了存储库。但最近我在另一台服务器 Windows Server 2003 上安装了 TortoiseSVN (TSVN)，我无法访问存储库。

我可以从网络浏览器成功访问我的存储库。但不确定 TSVN 回购浏览器发生了什么。它甚至不会提示我输入用户名 - 密码，而是直接显示无法连接到存储库的消息。

我的防火墙可能不允许此连接吗？我怎样才能检查它？

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T09:05:04.540

Web 浏览器可以（在某些情况下）显示*存储库的根目录*并将所有真实存储库列为子目录，TSVN 的存储库浏览器不能这样做（现在，在 1.8 版本之前，该功能在 Subversion 中承诺，AFAICR）。

你可以：

*   使用现有存储库的真实 URL
*   检查从 CLI 到远程仓库的连接（如果你安装了 TortoiseSVN 的命令行客户端）`svn ls <URL-OF-REPO>`

# javascript - 在变量 a href 中添加 onClick 函数

> ID：15441195
> 
> 赞同：0
> 
> 时间：2013-03-15T20:04:33.337
> 
> 标签：javascript, onclick

我是 Javascript 的初学者，我想知道是否有更好的方法来编写这段代码：

```
var images = [], 
index = 0;
images[0] = "<a href = 'link' onclick='_gaq.push(['_link', this.href]);return false;'>
<img src='image.jpg'></a>";
images[1] = "<a href = 'link1' onclick='_gaq.push(['_link', this.href]);return false;'>
<img src='image1.jpg'></a>";
index = Math.floor(Math.random() * images.length);
document.write(images[index]); 
```

这段代码不起作用，我认为是因为我在变量描述中包含了 onClick 函数......

该功能将随机打印图像，但在 url 图像链接中添加 _gaq.push 参数。

还有其他方法可以编写此代码吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:08:06.427

无需在 javascript 中创建 html。您可以执行以下操作：

JavaScript（必须在呈现 html 之前实例化）：

```
var pushMe = function(link){
    _gaq.push(['_link', link.href]);return false;
}; 
```

html:

```
<a href = "link" onclick="pushMe(this);">
<img src="image.jpg"></a> 
```

# android - Android 命令行工具 - 带有库的项目中的 Ant 调试

> ID：15441204
> 
> 赞同：1
> 
> 时间：2013-03-15T20:05:08.757
> 
> 标签：android, maven, ant, build, command-line-tool

我创建了一个测试项目来了解如何使用命令行工具构建和运行测试。我设法创建了一个项目，并用

```
android update project -p . 
```

并调试

```
ant debug 
```

当我在这个测试项目中添加一个库项目时，由于找不到库的 build.xml，ant 调试开始失败。我发现 atm 的唯一解决方案是也更新库项目（[在此处找到](https://stackoverflow.com/questions/13929734/build-and-run-android-project-having-a-subproject-in-command-line-using-ant-debu)）。这是正确的方法吗？我在我使用的许多库中都看到了 pom.xml 文件。我知道它被 Maven 使用（尽管我对此一无所知），它可能会帮助我找到另一种解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:28:36.490

Ant是构建android apk的*官方*方式。Maven 是一种替代方法（官方不支持，但效果很好）。

使用 maven 或 ant 时，默认项目布局几乎没有区别，但如果您进行一些额外的配置工作（即某些信息将被复制），则可以让两个构建系统在相同的源代码上工作。

**使用 Maven 的默认项目布局**

*   java源文件在`/src/main/java`下
*   依赖项在 pom.xml 中定义（使用 maven 定义依赖项的方式，类型`apklib`为 android 库）

**使用 ant（和 eclipse ADT 插件）的默认项目布局**

*   java源文件在`/src`
*   依赖项在相对路径中定义`/project.properties`并使用相对路径指定。

这是一个示例`project.properties`（它是引用其他 2 个库项目的库项目的典型示例）：

```
target=android-15
android.library=true
android.library.reference.1=../somelib
android.library.reference.2=../someOtherLib 
```

（如您所见，此文件中存储了一些附加信息：android 目标以及项目是库或应用程序这一事实。当您使用 maven 时，此信息位于 pom.xml 中）

**如何用 ant 构建一个 maven android lib？**

问题（当您需要构建`maven-layout-android-library`with 时`ant`）如下：

*   有一个适当的`/build.xml`（可以通过`android update library-project ...`这里是[关于这个命令的官方文档](http://developer.android.com/tools/projects/projects-cmdline.html)来完成）
*   有一个适当的`/project.properties`（它部分由`android update ...`命令完成，但您可能需要`android.library.reference`手动添加一些或使用 eclipse ADT 插件）
*   告诉`ant`java源文件不在默认位置，但在`/src/main/java`

对于最后一点，这里是如何做到的：

*   创建一个文件`/ant.properties`（在你的`maven-layout-android-library`）
*   将以下条目放入其中：

    source.dir=src/main/java

（**重要**：并不总是需要，因为有时 java 源文件已经`/src`在 maven-layout-project 下，在这种情况下，pom.xml 包含源目录所在的信息`/src`）

就这样。现在，你`maven-layout-android-library`可以用`ant debug`

# objective-c - MFMailComposeViewController 不会在 iOS 6 上关闭

> ID：15441205
> 
> 赞同：1
> 
> 时间：2013-03-15T20:05:12.953
> 
> 标签：objective-c, ios6

在 iOS 6 中，`MFMailComposeViewController`如果用户尝试发送第二封电子邮件，则呈现的内容不会消失...

一切正常，第一次运行并发送电子邮件。但是，如果再次选择电子邮件选项`MFMailComposeViewController`，取消时不会关闭。

以下是我的实现方式：

```
- (IBAction)buttonEmailClick:(id)sender {
    if (![MFMailComposeViewController canSendMail]) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Can't send" message:@"This device is unable to send emails." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        return;
    }
    NSDictionary *contactsInfo = [self contactsInfoFromPlistNamed:kConfigPlistName];
    [mailComposeViewController setToRecipients:[NSArray arrayWithObject:[contactsInfo objectForKey:@"email"]]];
    //[mailComposeViewController setSubject:kEmailDefaultSubject];
    //[mailComposeViewController setMessageBody:text isHTML:NO];
    [self presentModalViewController:mailComposeViewController animated:YES];
} 
```

然后这个：

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error {
    UIAlertView *alert = nil;
    if (result == MFMailComposeResultSent) {
        alert = [[UIAlertView alloc] initWithTitle:@"Sent" message:@"Your email was sent." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    }
    else if (result == MFMailComposeResultFailed) {
        alert = [[UIAlertView alloc] initWithTitle:@"Failed" message:@"An error occured and your email was not sent." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    }

    [alert show];
    [self dismissModalViewControllerAnimated:YES];
} 
```

它在 iOS 5 中运行良好，但在 iOS 6 中不行。我尝试用 iOS 6 的非弃用方法替换，但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T20:08:19.887

您是否尝试过在他们每次发送电子邮件时创建一个新的 MFMailComposeViewController？我不确定你是否应该重复使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T18:46:37.497

你可以试试这个：

```
MFMailComposeViewController * composer = [[MFMailComposeViewController alloc] init];
composer.delegate = self; 
```

-(void)mailComposeController:didFinishWithResult:error: 如果您将该类分配给委托，则应调用

# android - 通过活动设置imageview src

> ID：15441210
> 
> 赞同：1
> 
> 时间：2013-03-15T20:05:39.070
> 
> 标签：android

我一直试图通过我的主要活动设置一个图像视图，它一直在 LogCat 中返回一个空指针异常。我的代码是相当不言自明的。

我正在从 JSON url 中提取数据并将数据从对象中提取出来。

```
for (int i=0; i<forecastday_arr.length(); i++) {                        
    HashMap<String, String> map = new HashMap<String, String>();    
    JSONObject e = forecastday_arr.getJSONObject(i);

    JSONObject date_obj = e.getJSONObject("date");

    String curDate = date_obj.getString("weekday");
    String conditions = e.getString("conditions");
    String icon_to_use = e.getString("icon");

    map.put("weekday", curDate);
    map.put("conditions", conditions);
    map.put("icon", icon_to_use);

    if (icon_to_use=="rain") {
        ImageView imgView = (ImageView) findViewById(R.id.imageViewDayOne);
        imgView.setImageBitmap(BitmapFactory.decodeResource(this.getResources(), R.drawable.rain));
    }      

    mylist.add(map);    
} 
```

从我的代码中，我正在检查“icon”中的值是否等于雨，它是（今天），如果是，则返回存储在我的可绘制文件夹中的雨图标。即使没有 if 语句，我也会得到相同的空指针异常。我对 Android 很陌生，所以调试现在不是最简单的事情。

我想我正在正确设置图像。我在下面附上了我的 LogCat 的图片。![在此处输入图像描述](../Images/bc0be109f920c276427c2bb81eaf489f.png)

抱歉这么含糊，但我认为设置图像真的很简单。如果我也遗漏了什么，我很抱歉 - 如果我有，我会尽快纠正。

我的 MainActivity.java 的粘贴箱：http: [//pastebin.com/uNfYDGAw](http://pastebin.com/uNfYDGAw)和我的 activity_main.xml 的粘贴箱：http: [//pastebin.com/M1xy1buB](http://pastebin.com/M1xy1buB)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:15:09.147

所以看起来你`NullPointerException`来自这条线：

```
 imgView.setImageBitmap(BitmapFactory.decodeResource(this.getResources(), R.drawable.rain)); 
```

我怀疑其中一个`this.getResources()`或更可能`BitmapFactory.decodeResource`正在返回`null`。

幸运的是，有一种更简单的方法可以在`ImageView`. 您可以使用[`setImageResource`](http://developer.android.com/reference/android/widget/ImageView.html#setImageResource%28int%29)在运行时设置可绘制资源，如下所示：

```
 imgView.setImageResource(R.drawable.rain); 
```

## **- 编辑 -**

在尝试引用任何using**之前**，您还需要确保`setContentView`使用包含`ImageView`您尝试使用`onCreate`的布局进行调用。`MainActivity`**`View``findViewById`**

 **```
setContentView(R.layout.layoutContainingImageViewDayOne); 
```

最后，如果您尝试执行任何网络请求，则应在后台线程（关闭 UI 线程）或应用程序中完成“应用程序无响应”崩溃。`AsyncTask`s 对此很有用（但是还有其他方法）。有关更多信息，请参阅[http://developer.android.com/training/basics/network-ops/connecting.html](http://developer.android.com/training/basics/network-ops/connecting.html)。

## **--编辑2--**

因此，既然您发布了所有代码，我发现这里存在一些重大缺陷。您`R.layout.activity_main`实际上应该重命名为，`R.layout.list_row`因为它包含您的行元素。现在您正尝试对您的和它的使用相同的布局 ( `R.layout.activity_main`) ，这是不可能的。需要有一个，你附上你的。您还尝试在您的代码中为您的列表行设置您的代码，这已经为您完成了。`Activity``ListAdapter``R.layout.activity_main``ListView``ListAdapter``ImageView``Activity``ListAdapter`

所以我建议你看一些例子并重构你的应用程序，Vogella 有一些很棒的教程 - [http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:08:29.197

首先使用`equals`方法来比较字符串。而不是==

```
if (icon_to_use != null && icon_to_use.equals("rain")) {

   ....

} 
```

> NullPointerException 的原因

这可能是因为您没有调用 setContentView 到布局或没有设置正确的布局。装置`imageViewDayOne`未在该布局中定义。**

# android - 动态生成 SQLite 数据库

> ID：15441212
> 
> 赞同：0
> 
> 时间：2013-03-15T20:05:50.527
> 
> 标签：android, database, sqlite, dynamically-generated

我正在构建一个作为表单生成器的应用程序（它使用基于配置文件的 SQLite 数据库创建表单）。问题是数据库永远不会相同，所以我需要让它动态意味着我希望能够指定数据库的所有表行和表。

我遇到的问题是，因为它是一个配置文件，所以当我创建数据库时，我还不知道表和/或表行是什么，所以我不能依赖`onCreate()`数据库。

我想知道是否有更好的方法来进行，而不是重写`onCreate()`to do nothing 并制作我自己的`tableCreate()`函数。

我不知道这是否足够清楚，因为英语不是我的母语，但如果需要，我会编辑我的问题。顺便说一句，我是 android 新手，所以很感谢 snipet + explications。

*   当应用程序加载时，它使用推送到应用程序的配置文件（一个简单的文本文件）创建数据库（仅当数据库不存在时）。

*   然后它再次根据配置文件创建表（表行的名称和数据类型）。

*   该应用程序基于配置文件构建表单，该属性允许我将答案保存在先前创建的数据库中。

此应用程序的目标是能够以非常快速的方式有效地创建新表单，以便收集有关给定人员的一些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:15:02.843

Ok so I managed to build a workaround: what I came up with is that I have a db with 4 fields (_id, farmerId, fieldName and fieldValue) this allows me to have some kind of value key for a specific farmer.

Then I builded some functions that generate a JSONObject with the different rows concerning a specific farmer and returns it to my activity. This way, it does not really matters if an "object" would need 5 or 6 fields.

# node.js - AuthenticationFailed 与 Azure node.js SDK 的 createContainerIfNotExist 方法

> ID：15441220
> 
> 赞同：2
> 
> 时间：2013-03-15T20:06:38.500
> 
> 标签：node.js, azure, blob, azure-blob-storage

我正在尝试使用 Azure node.js sdk 连接到博客存储服务。这就是我所说的：

```
var blobService = azure.createBlobService(nconf.get("BlobStorage.account"),
                                          nconf.get("BlobStorage.key"));

blobService.createContainerIfNotExist(
    "test1"
    , {publicAccessLevel : 'blob'}
    , function(error){
        if(error){
            console.log(error);
        }
}); 
```

这是我得到的错误：

```
code: 'AuthenticationFailed',
message: 'Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature.\nRequestId:7ff326e7-2bc6-47ad-898e-2235dc26c03d\nTime:2013-03-15T19:45:25.0167404Z',
authenticationerrordetail: 'The MAC signature found in the HTTP request \'xg3cY11YCPo3mYPxDF5UV7cTPOErleERogcozwGVm6s=\' is not the same as any computed signature. Server used following string to sign: \'PUT\n\n\n0\n\n\n\n\n\n\n\n\nx-ms-blob-public-access:blob\nx-ms-date:Fri, 15 Mar 2013 19:45:25 GMT\nx-ms-version:2011-08-18\n/[containername removed for post]/test1%3Frestype=container\'.' 
```

谁能指出我正确的方向来解决这个问题？

额外细节：

*   在本地机器上运行，访问云中的 azure blobstorage
*   操作系统：Mountain Lion 和 Windows 8
*   节点版本：0.10.0
*   Azure NodeJS SDK 版本：0.6.10

## 更新 - 2013 年 3 月 15 日下午 1:23

azure nodejs sdk 0.6.10 和 node 0.10 似乎存在问题。 [https://github.com/WindowsAzure/azure-sdk-for-node/issues/645](https://github.com/WindowsAzure/azure-sdk-for-node/issues/645)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:43:07.563

仅供参考 Azure NodeJS SDK 目前支持最高 0.8.x 的 nodeJS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:21:08.363

@user1144313 我们知道它不起作用并正在调查它。[http://codebetter.com/glennblock/2013/03/18/node-0-10-compat-issues-with-the-azure-sdk-and-cli/](http://codebetter.com/glennblock/2013/03/18/node-0-10-compat-issues-with-the-azure-sdk-and-cli/)

现在请使用节点 0.8.x。一旦我们有修复程序，我们将发布更新版本。[您还可以在https://github.com/windowsazure/azure-sdk-for-node](https://github.com/windowsazure/azure-sdk-for-node)和[https://github.com/windowsazure/azure-sdk-tools](https://github.com/windowsazure/azure-sdk-tools)查看 wiki ，我们将在发布更新后立即更新.

任何不便敬请谅解。

# c - C编码中具有合并排序功能的分段错误

> ID：15441223
> 
> 赞同：-1
> 
> 时间：2013-03-15T20:06:50.700
> 
> 标签：c

我一直在处理这段代码，我相信我的逻辑是正确的，但它一直在抛出分段错误。我只是希望能得到另一双眼睛来帮助我看看我做错了什么。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:21:45.183

看起来您在这里使用了错误的数组下标：

```
else if ((strcmp(*(array2 + i) , *(array1 + j)) < 0)) //compares first position in each array again 
```

您将`i`下标与`array2`when it should be 一起使用`j`。你也交换了下标`array1`。

顺便说一句，你知道你可以说`array1[i]`代替`*(array1 + i)`吗？

**编辑：**

您有两个`if`块用于测试`array1[i]`和`array2[j]`获取`NULL`值。我认为您需要在`continue;`每个代码块的末尾添加一个。否则，您点击以下`if`语句并传递`NULL`给`strcmp()`.

`NULL`当你有`count`参数告诉每个数组中有多少条目时，你真的需要测试吗？

# python - 我可以在 Mac OS X 上将 enthought python 重新链接到新版本的 openssl 吗？

> ID：15441224
> 
> 赞同：10
> 
> 时间：2013-03-15T20:06:51.123
> 
> 标签：python, macos, openssl, pip, enthought

今天早上，我在 Mac OS X 10.6.8 上使用 EPD 7.3 时遇到了与 SSL 相关的问题。当我运行 pip（版本 1.3.1）时，我得到：

```
pip install requests
Downloading/unpacking requests
  Could not fetch URL https://pypi.python.org/simple/requests/: There was a problem confirming the ssl certificate: <urlopen error [Errno 1] _ssl.c:504: error:0D0890A1:asn1 encoding routines:ASN1_verify:unknown message digest algorithm>
  Will skip URL https://pypi.python.org/simple/requests/ when looking for download links for requests
  Could not fetch URL https://pypi.python.org/simple/: There was a problem confirming the ssl certificate: <urlopen error [Errno 1] _ssl.c:504: error:0D0890A1:asn1 encoding routines:ASN1_verify:unknown message digest algorithm>
  Will skip URL https://pypi.python.org/simple/ when looking for download links for requests
  Cannot fetch index base URL https://pypi.python.org/simple/
  Could not fetch URL https://pypi.python.org/simple/requests/: There was a problem confirming the ssl certificate: <urlopen error [Errno 1] _ssl.c:504: error:0D0890A1:asn1 encoding routines:ASN1_verify:unknown message digest algorithm>
  Will skip URL https://pypi.python.org/simple/requests/ when looking for download links for requests
  Could not find any downloads that satisfy the requirement requests
No distributions at all found for requests 
```

我想我遇到了[https://github.com/pypa/pip/issues/829](https://github.com/pypa/pip/issues/829)和[https://groups.google.com/d/msg/python-virtualenv/C_a_IX_8Ejc/83l8XfpUarQJ](https://groups.google.com/d/msg/python-virtualenv/C_a_IX_8Ejc/83l8XfpUarQJ)中详述的问题——即python链接的openssl版本太旧：

> python -c "导入 ssl；打印 ssl.OPENSSL_VERSION"

返回

> OpenSSL 0.9.7l 2006 年 9 月 28 日

**我的问题是我是否有可能让 EPD Mac 版本的 Python 链接到更新版本的 openssl —— 或者这种改变是 Enthought 需要做的吗？**

（我刚想在我的 Mac 上编译 openssl（使用[http://techscienceinterest.blogspot.com/2010/12/compiling-openssl-on-mac-os-x-snow.html](http://techscienceinterest.blogspot.com/2010/12/compiling-openssl-on-mac-os-x-snow.html)上的说明）并使用自制软件构建我自己的 Python 可执行文件使用更新版本的 openssl ( [http://hackercodex.com/guide/python-virtualenv-on-mac-osx-mountain-lion-10.8/](http://hackercodex.com/guide/python-virtualenv-on-mac-osx-mountain-lion-10.8/) )。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T14:32:50.967

雷蒙德，谢谢你的报告。EPD 的继任者，现在处于后期测试阶段，包含`OpenSSL 0.9.8r 8 Feb 2011`，并且没有这个问题。（FWIW，它还包含最新版本的`requests`，您在遇到 SSL 问题时尝试安装该版本。）

它很快就会退出测试版，但与此同时，如果您想在那里试用，我看到您已经收到了测试版邀请。

我们还将调查 EPD 7.3 的可能修复或解决方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-19T18:24:46.857

I'm finding that with the new SSL-conscious pypi I have to allow-unverified and allow-external for a lot of packages. So for `requests`, this would be:

```
pip install --upgrade --force-reinstall --allow-all-external --allow-unverified requests requests 
```

# file-upload - Kendo UI Upload - 同步模式，将组选择显示为单独的文件

> ID：15441225
> 
> 赞同：4
> 
> 时间：2013-03-15T20:06:51.203
> 
> 标签：file-upload, kendo-ui

我正在使用 Kendo UI Upload Control 并希望在同步模式下允许多个文件，但是当同时添加多个文件时，它们被组合在同一个行项目中。有没有办法在组选择时将每个单独的文件作为自己的行项目？在链接的屏幕截图中，有 2 个订单项，但我想要 3 个订单项；每个文件一个

Javascript：

```
$('#files').kendoUpload({
    localization: {
        select: 'Select files to upload<br />-or-<br />Drag files here to upload'
        },
    multiple: true,
    showFileList: true,
    success: function (e)
    {
    },
    select: function (e)
    {
    }
}); 
```

HTML：

```
<form method="post" action="/Api/UploadUrl" style="width:100%">
    <div>
        <input name="files" id="files" type="file" />
        <p><input type="submit" value="Submit" class="k-button" /></p>
    </div>
</form> 
```

分组截图：http: [//i.imgur.com/sMl8RSl.png](http://i.imgur.com/sMl8RSl.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-25T11:02:31.687

这些文件不能在不同的列表项中列出。[同步上传小部件与应用了multiple 属性](https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/multiple)`<input type="file" />`的常规元素没有什么不同，这意味着所有文件都添加到当前输入的[FileList中。](https://developer.mozilla.org/en-US/docs/Web/API/FileList)

# php - 关于在 PHP 中使用 OOP 的迭代器的一般帮助

> ID：15441226
> 
> 赞同：0
> 
> 时间：2013-03-15T20:06:53.187
> 
> 标签：php, oop, iterator, iteration

我只是从一本书中了解 PHP 中的 OOP，而关于迭代器和迭代的部分让我很困惑。

据我了解，我认为为了遍历对象的属性，您需要实现内置类 Iterator。然后实现 IteratorAggregate 接口并在其中创建一个 getIterator 方法。但是，我目前对这些元素中的每一个所扮演的角色以及它们需要以什么格式编写感到困惑。换句话说，我只是在寻找对这些概念的简单（简单的英语）解释和一个简单的例子。任何帮助将不胜感激！！！！！

并提前感谢您的时间和帮助！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:17:25.890

你想要循环的东西必须实现[`Traversable`](http://www.php.net/manual/en/class.traversable.php)。但是，您不能`Traversable`直接实施；您必须实现其子类型之一。你将如何做事取决于对象将如何被使用。

如果你愿意，你可以实现[`Iterator`](http://www.php.net/manual/en/class.iterator.php). 如果您的类型已经打算成为仅转发的内容列表，那它就足够了。如果您决定构建一个迭代器，您将有 5 种方法可以实现：

*   `current`，它检索当前位置的值；
*   `key`，它检索当前位置的密钥；
*   `next`，前进到下一个位置；
*   `rewind`，将当前位置重置为第一个；和
*   `valid``false`，如果迭代从被迭代的东西列表的末尾脱落，则返回。

PHP 在迭代过程中调用这些方法。具体来说，假设您有这样的代码：

```
foreach ($it as $key => $value) {
    doStuffWith($key, $value);
} 
```

这相当于以下内容：

```
for ($it->rewind(); $it->valid(); $it->next()) {
    $value = $it->current();
    $key = $it->key(); // only if the foreach has a `$key =>`

    doStuffWith($key, $value);
} 
```

基本上，您只需要构建一个类型，`implements Iterator`并正确响应以大致该顺序调用的那些方法。理想情况下，也应该有可能在两者之间发生一些事情......但这通常不是问题，除非你正在传递引用。

如果您不需要自定义迭代，则可以只实现[`IteratorAggregate`](http://www.php.net/manual/en/class.iteratoraggregate.php)，并返回现有的迭代器类型（如果它能够满足您的需要）。（例如，如果您想允许在内部数组上循环，那么已经有一个`ArrayIterator`为工作而设计的。无需自己动手。）对于`IteratorAggregate`，您只需要实现`getIterator`，它会返回可遍历的内容。如果您的某些东西已经可以被[内置 SPL 迭代器](http://www.php.net/manual/en/spl.iterators.php)之一遍历，或者可以轻松地简化为数组或其他东西，那么这是一个更好的解决方案。

上面的相同循环，如果在 IteratorAggregate 上调用，将等同于类似

```
foreach ($it->getIterator() as $key => $value) {
    doStuffWith($key, $value);
} 
```

`getIterator()`必须返回一个实现`Iterator`或一些原始的可遍历的东西，比如一个数组。

对于 Java 风格的迭代器，您可以构建一个 Iterator 子类型，它可以记住它的位置并遍历您的集合，然后[`IteratorAggregate`](http://www.php.net/manual/en/class.iteratoraggregate.php)在您的集合上实现以返回迭代器类型的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:13:04.913

对于基本功能，您只需要为、、、和方法`implement Iterator`添加相关功能。请参阅下面的示例：`rewind``valid``key``current``next`

```
 /**
   * Awesome
   *
   * Do awesome stuff
   */
  final class Awesome implements Iterator
  {

    /**
     * An array of data
     *
     * @access private
     * @var array $_data
     */
    private $_data;

    /**
     * Store the initial data
     *
     * @access public
     * @param array $data
     */
    public function __construct(array $data = array())
    {
      $this->_data = $data;
    }

    /**
     * Rewind the iterator
     *
     * @access public
     */
    public function rewind()
    {
      reset($this->_data);
    }

    /**
     * Validate the existence of the next element
     *
     * @access public
     * @return boolean
     */
    public function valid()
    {
      return isset($this->_data[$this->key()]);
    }

    /**
     * Return the current key
     *
     * @access public
     * @return integer
     */
    public function key()
    {
      return key($this->_data);
    }

    /**
     * Return the current value
     *
     * @access public
     * @return mixed
     */
    public function current()
    {
      return current($this->_data);
    }

    /**
     * Increment the iteration index
     *
     * @access public
     */
    public function next()
    {
      next($this->_data);
    }

  }

  // Instantiate a new Awesome object
  $awesome = new Awesome(array('Michael', ' ', 'Rushton', ' ', 'is', ' ', 'awesome', '!'));

  // Iterate over the awesome object and output a universal truth
  foreach ($awesome as $almost_awesome)
  {
    echo $almost_awesome;
  } 
```

如果您希望迭代对象的属性，只需将其更改`__construct`为：

```
/**
 * Construct the object
 *
 * @access public
 */
public function __construct()
{

  // Get the properties
  $object_vars = get_object_vars($this);

  // Unset the data reference
  unset($object_vars['_data']);

  // Set the data
  $this->_data = $object_vars;

} 
```

# weka - Arff 文件 - 标头中未声明的标称值。

> ID：15441227
> 
> 赞同：3
> 
> 时间：2013-03-15T20:06:53.453
> 
> 标签：weka, arff

我正在使用 Java 程序生成一个 .arff 文件。该文件有大约 600 个属性。

我无法在 Weka Explorer 中打开该文件。它说：“标称值未在标头中声明，请阅读 Token[0]，第 626 行。”

这是第一个属性行：@attribute vantuono numeric
这是第 626 行的前几个字符：0,0,0,0,1,0,0,0,0,1,0,1...

**为什么 WEKA 无法将“0”解析为数值？**

有趣的是，这只发生在这个文件中。我有其他具有数字属性的文件接受“0”作为值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T10:52:46.400

你确定你的声明是正确的吗？[WEKA 常见问题解答](http://weka.wikispaces.com/ARFF+file+doesn%27t+load)说：

> **标头中未声明的标称值，读取 Token[X]，行 Y**
> 
> 如果您收到此错误消息，那么您似乎在 ARFF 标头部分中声明了一个名义属性，但 Weka在数据（在**Y**行）中遇到了一个未列出的特定属性的值（ **“X”** ）可能的价值。 **数据中出现的所有**标称值都必须在标题中声明。

 ****还有一个[关于稀疏 ARFF 文件的错误](http://weka.wikispaces.com/ARFF+%28stable+version%29#Sparse%20ARFF%20files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-02T11:34:36.263

我得到了同样的错误。然后我看到我的程序添加了一个额外的撇号。当我删除撇号时，它可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-04T07:59:02.720

如果您收到此错误，则更有可能是在您的数据集中（@data 行之后），您保留了已声明的 HEADER（列名）。请删除该标题行，您应该一切顺利。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-08T20:46:04.480

使用 -B #noOfRecords 选项增加内存以容纳所有行。

java weka.core.converters.CSVLoader 文件名.csv 文件名.arff -B 33000

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-22T07:24:01.630

我有这样一个问题，它让我付出了代价，所以你不会付出代价 好的。只需将类属性放在最后，并确保属性与文本中的顺序一致。****

# c# - gridview奇数行索引不显示数据

> ID：15441228
> 
> 赞同：1
> 
> 时间：2013-03-15T20:06:54.403
> 
> 标签：c#, asp.net

我的 Gridview 有一个类别列。此列编辑模板有一个 DropDownList。下拉列表数据源：

```
protected void grdProducts_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowState == DataControlRowState.Edit && e.Row.RowType == DataControlRowType.DataRow)
    {
        DropDownList ds = (DropDownList)e.Row.FindControl("ddlCategory");
        int ids = Convert.ToInt16(((Label)e.Row.FindControl("LID")).Text);
        ds.DataTextField = "Name";
        ds.DataValueField = "ID";
        ds.DataSource = model.Categories.ToList();
        ds.DataBind();
        var idBynames = model.Products.Where(s => s.ID == ids).FirstOrDefault();
        string names = idBynames.CategoryName;
        var categorys = model.Categories.Where(s => s.Name == names).FirstOrDefault();
        ds.SelectedValue = categorys.ID.ToString();
    }
} 
```

所以问题是奇数行索引下拉列表为空，但偶数行索引工作正常。什么是问题？我看不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:21:14.557

你会注意到上面[`DataControlRowState`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datacontrolrowstate.aspx)有[`FlagsAttribute`](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)套装。如果您设置了 AlternatingRowStyle，那么您的交替行将`RowState`包含 flag `DataControlRowState.Alternate`。

尝试检查该`DataControlRowState.Edit`标志，而不考虑任何其他标志，方法是将您的`if`语句更改为：

```
if ((e.Row.RowState & DataControlRowState.Edit) == DataControlRowState.Edit && e.Row.RowType == DataControlRowType.DataRow) 
```

添加按位运算符仅检查`Edit`.

# ruby-on-rails - Rails I18n 不适用于 Rails 3.2.11 中的资产管道模板

> ID：15441229
> 
> 赞同：1
> 
> 时间：2013-03-15T20:07:01.877
> 
> 标签：ruby-on-rails, asset-pipeline, sprockets, rails-i18n

我需要本地化一个应用程序，所以我为西班牙语翻译创建了一个文件，但该`config/locales/es.yml`文件似乎没有正确加载，或者它可能在我的模板评估后加载。

首先是一点上下文，我正在使用[handlebars_assets](https://github.com/leshill/handlebars_assets)和[haml_assets](https://github.com/carezone/haml_assets) gems。后者允许`ActionView`在资产管道的模板中使用助手，并且它还可以访问应用程序类，因此可以编写如下模板：

```
.some_div
  = SomeModel.model_name.human 
```

它有效，除了它返回模型的后备名称。如果我在视图中进行这些类型的翻译（而不是`.hbs.haml`模板），我会得到正确的翻译字符串。如果我在 rails 控制台中执行翻译方法也是如此。

遵循[Rails 指南](http://guides.rubyonrails.org/i18n.html)，我创建了以下初始化程序：

```
I18n.default_local = :es 
```

如果我认为在视图中翻译会呈现预期的输出，那么它可以正常工作。我的应用程序主要位于客户端，所以我真的不使用 Rails 的视图，它是在 Backbone 的帮助下管理的单页应用程序。所有 UI 都存在于通过资产管道呈现的模板中。所以我的问题是，有没有人设法让 I18n 使用这个设置？

# couchbase - Couchbase 可尾光标

> ID：15441231
> 
> 赞同：1
> 
> 时间：2013-03-15T20:07:09.137
> 
> 标签：couchbase

Couchbase 中是否有可尾光标的概念？

我的意思是一个游标在获取所有数据后保持打开状态，并在新数据可用时产生新数据。

我的目标是创建一个工人，它将所有数据从特定视图传输到其他资源（[迪斯科](http://discoproject.org)）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:41:57.190

这在 Couchbase 中当前不可用，因此您每次都必须查询您的视图

# java - 在“Win32 刷新守护进程”期间发生内部错误

> ID：15441232
> 
> 赞同：0
> 
> 时间：2013-03-15T20:07:13.997
> 
> 标签：java, eclipse, eclipse-juno

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:40:12.260

如果错误仍然存​​在，请取消选中 Windows -> Preferences -> General -> Workspace -> Refresh using native hooks or polling 下的复选框。

如果其他一些工具修改了 Eclipse 之外的底层文件系统，Eclipse 会自动刷新工作区。您的错误发生在执行该工作的后台作业中。

当然，您可能必须在禁用该选项的情况下手动刷新工作区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:37:22.010

使用 -clean 参数启动 Eclipse 解决了这个问题。

# jquery - Fullcalendar on Rails，不同任务的不同颜色

> ID：15441235
> 
> 赞同：1
> 
> 时间：2013-03-15T20:07:29.377
> 
> 标签：jquery, ruby-on-rails, fullcalendar

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:57:38.527

这很容易做到。您只需要在源对象中设置类名。覆盖默认样式选项需要相当多级别的 CSS 选择器，看看在你的情况下什么是有效的。

CSS：

```
.fc-content .fc-view .localSource2 div.fc-event-inner {
  background: red;
} /* you might want to trim this selector down, but it worked for me */ 
```

Javascript：

```
localSource = {
  events: [ {title: 'All Day Event', start: new Date(y, m, 1)}, 
            /* More Event Data here */ ],
  className: 'localSource', // an option!
  currentTimezone: 'Europe/Bucharest', // an option!        
}; 
USHolidays = {
  url: 'http://www.google.com/calendar/feeds/usa__en%40holiday.calendar.google.com/public/full',    
  className: 'gcal-event', // an option!
  currentTimezone: 'America/Chicago', // an option!
};
options = {
    eventSources: [localSource, USHolidays]
};

fullCalendar(options); // EventSources are set in options 
```

[事件源文档](http://arshaw.com/fullcalendar/docs/event_data/Event_Source_Object/)也提到了其他属性（颜色、文本颜色）。

# ajax - JSON响应中的特殊字符编码

> ID：15441243
> 
> 赞同：2
> 
> 时间：2013-03-15T20:08:17.030
> 
> 标签：ajax, json, utf-8

我需要在 json 响应中使用西班牙语文本。我已经尝试了所有可能的方法，但消息仍然在 UI 上显示奇怪的字符。我想传达的信息是，

```
 Número de Seguro Social 
```

但它显示为，

```
 N�mero de Seguro Social 
```

在 Java 方面，

```
 //response.setContentType("application/json");
 //response.setCharacterEncoding("UTF-8");
 response.setContentType("application/json;charset=utf-8");
 OutputStream out = null;
 out = response.getOutputStream();
 out.write(jsonResponse.toString().getBytes());
 out.close(); 
```

在 head 部分添加了元标记。

```
 <meta http-equiv="content-type" content="text/html;charset=utf-8"> 
```

我还在 ajax 调用中设置了内容类型

```
 $.ajax({
      async: false,
      cache: false,
      type: get,
      contentType: "application/json; charset=utf-8",
      url: //url,
      data: //data,
      dataType: //dataType,
      success: //callbackfn,
      error: //errorfn
  }); 
```

似乎没有任何工作。我还能做些什么来让特殊字符按我的意图工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T02:36:24.433

我会通过发送字符串来测试错误首先发生在哪里：

```
 "N\u00famero de Seguro Social" 
```

对于显示 UTF 字符串的浏览器，只是为了确保它能够理解和显示您尝试显示的 UTF 字符串。

但实际问题可能出在：

```
out.write(jsonResponse.toString().getBytes()); 
```

因为 getBytes 将获取系统默认字符集的字节，这可能不是 UTF-8。你可以通过调用来检查这个`Charset.defaultCharset();`

我猜`jsonResponse`是您自己的类用于存储响应数据，然后在最后将其转换为 JSON。我建议使用来自[http://www.json.org/](http://www.json.org/)的库，例如[Google JSON 库](https://code.google.com/p/google-gson/)来进行 JSON 转换，因为有很多像这个一样的小问题，只要你使用一个不错的库来进行编码/解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:28:28.373

```
$.ajax({
type: "Get",
url: your url,
data: { inputParam : JSON.stringify(inputParam)},
    dataType: "json",
    success: //callbackfn,
    error: //error
}); 
```

# svg - SVG标记：防止继承其形状比例

> ID：15441245
> 
> 赞同：4
> 
> 时间：2013-03-15T20:08:22.690
> 
> 标签：svg

我需要 SVG 中的可扩展架构。但是有些元素，比如箭头，应该在模式上具有相同的大小，而不管模式的规模如何。
我正在通过[SVG 转换属性和通过](http://www.w3.org/TR/SVG/coords.html#TransformAttribute)[SVG 标记](http://www.w3.org/TR/SVG/painting.html#Markers)的箭头实现模式可扩展性。
但我遇到了麻烦：当`transform=scale(s)`应用于形状时，它们的标记也是比例。

SVG中有什么方法可以将标记应用于缩放的形状，以便标记不会根据形状的转换进行缩放？
还是我为此使用了错误的方法？

请参见此处的示例：

```
<svg id="svg-root" class="drawing" width="100%" height="500" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <marker id="myMarker" refX="6" refY="6" markerWidth="12" markerHeight="12" stroke-width="1" stroke="blue" orient="auto" fill="none" markerUnits="strokeWidth">
            <circle cx="6" cy="6" r="5" />
        </marker>
    </defs>
    <g transform="scale(2)">
        <line id="line1" x1="20" y1="50" x2="200" y2="50" stroke="green" stroke-width="1" marker-start="url(#myMarker)" vector-effect="non-scaling-stroke"/>
    </g>
    <g transform="scale(3)">
        <line id="line2" x1="20" y1="50" x2="200" y2="50" stroke="green" stroke-width="1" marker-start="url(#myMarker)" vector-effect="non-scaling-stroke"/>
    </g>
</svg> 
```

两条线`line1`都`line2`应该有半径=“6”的圆圈和圆圈笔画宽度=“1”。
现在半径是“12”和“18”。宽度相应地为“2”和“3”。那不合适。

我正在尝试应用于`vector-effect="non-scaling-stroke"`形状。然后形状笔画宽度不缩放。我正在申请`markerUnits="strokeWidth"`标记。
但这无济于事。

我暂时可以想象的唯一一种解决方法是停止使用`transform`模式缩放。在这种情况下，将在模式比例更新后手动重新计算形状的坐标。这看起来不太好，实际上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-17T02:50:06.293

从[这里](http://tutorials.jenkov.com/svg/marker-element.html)：

> 要*避免*标记的自动缩放以适应使用它的路径的笔划宽度，请将`markerUnits`属性设置为`userSpaceOnUse`. 这样，无论使用它的路径的笔划宽度如何，标记都将保持其大小。

例如：

```
<marker id="myMarker" markerUnits="userSpaceOnUse">
  ...
</marker> 
```

# c# - 根据其他整数列表控制 LINQ 查询顺序

> ID：15441260
> 
> 赞同：1
> 
> 时间：2013-03-15T20:09:15.027
> 
> 标签：c#, linq

我正在做一个 LINQ 查询，我从表 Videos 中选择视频信息。该查询仅选择 ID 出现在以下列表中的那些视频：

```
List<int> results; //Has some values
var query = from l in dataContext.Videos
                 where results.Contains(l.ID)
                 select l; 
```

现在我如何在查询中订购项目（视频信息），使其 ID 遵循与列表结果相同的顺序？

我可以这样做：

```
List<int> results; //Has some values
var query = from k in results
            from l in dataContext.Videos
            where k==l.ID
            select l; 
```

但这很慢，我需要更快的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T20:15:38.033

使用 a `join`，它要快得多

```
var orderedByIDList = from k in results
join l in dataContext.Videos
on k equals l.Id
select l; 
```

* * *

由于@MarcinJuraszek 和@Phil 的评论，插件/编辑，谢谢大家。

基本上先抓取你的数据，然后排序，这就是我得到的：

```
var myList = (from l in dataContext.Videos
where results.Contains(l.ID)
select l).ToList(); //grab data and resolve to list or array

var orderedByIDList = from k in results
join l in myList
on k equals l.Id
select l; //result type IEnumerable<Video> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:40:27.473

这是我的替代尝试（可能不如连接快），它检索最小的行集，然后在本地对数据进行排序。

```
var results = new List<int>{ 9, 2, 3, 6, 8 };

// record the original order
var results2 = results.Select ((r, index) => new {r, index});

// get results and convert to list
var videos = dataContext.Videos.Where(v => results.Contains(v.Id)).ToList();

// order according to results order
var ordered = videos.Select (v => 
    new {v, results2.Single (r => r.r == v.Id).index})
    .OrderBy (v => v.index).Select (v => v.v) 
```

# c# - 为什么标签没有用Thread填写“for”

> ID：15441265
> 
> 赞同：1
> 
> 时间：2013-03-15T20:09:36.410
> 
> 标签：c#

我正在尝试使用简单的例程，当我传入**For**更改标签值时。我睡了一秒钟，但什么也没发生

为什么这不起作用？我正在调试并看到标签的值传递，但屏幕没有变化。

**代码**

```
Random rand = new Random();
int randomNumber = 0;

for(int i = 0 ; i < 4; i++)
{
    randomNumber = rand.Next(1, 10);
    System.Threading.Thread.Sleep(TimeSpan.FromSeconds(1));
    lblNumber.Text = Convert.ToString(randomNumber);
}

lblNumber.Text = Convert.ToString(randomNumber); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T20:10:57.397

> 但不会改变屏幕。

您正在阻止用户界面线程。标签只会在方法完成后更新一次，用户界面可以正常处理消息。

如果您想查看更新，则需要将此“工作”移至后台线程，并编组调用以将文本框设置回 UI 线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T20:12:02.180

在 UI 线程上执行 Thread.Sleep 不会导致它更新显示（让它进入睡眠状态只会导致它在处理器上放弃它的时间大约 1 秒）。

如果你真的想触发更新，你可以考虑调用：`Application.DoEvents()`代替 Thread.Sleep。这将导致 UI 线程处理待处理的消息（其中将包括由于标签文本的更改而导致的一些重绘消息），这将反过来重绘控件。

但是您应该知道，这两种方法都被认为是不好的做法，并且表明您的代码存在一些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T20:49:48.890

设置标签的文本会告诉程序“下次您更新此表单的外观时，重新绘制标签”。但是由于您将要进行绘图的线程置于睡眠状态，因此在唤醒之前不会重绘标签。

睡眠不是你想在这里做的；如果您在 UI 线程上调用 Sleep，那么您几乎可以肯定做错了什么。

如果您使用的是 C# 5，则可以通过标记您的方法`async`然后使用来解决此问题

```
await Task.Delay(whatever); 
```

而不是`Thread.Sleep`. “await”的意思是“去异步做某事，但不要进入睡眠等待结果。相反，将控制权返回给调用者。当异步操作完成时，将向 UI 线程发送一条消息，表示要恢复这种方法你离开的地方”。

为了使用`await`，您正在等待的方法*必须*返回`void`or`Task`或`Task<T>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T20:12:50.853

你可以试着打电话

```
randomNumber = rand.Next(1, 10);
System.Threading.Thread.Sleep(TimeSpan.FromSeconds(1));
lblNumber.Text = Convert.ToString(randomNumber);
lblNumber.Refresh(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-15T20:12:34.363

这是因为您的 UI 更新在另一个线程中运行。除非您使用不同的线程，否则您不会看到标签更改。您可以使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)来完成此操作。

# ruby-on-rails - 无法让模型属性保留在控制台中

> ID：15441266
> 
> 赞同：0
> 
> 时间：2013-03-15T20:09:49.917
> 
> 标签：ruby-on-rails

假设我的控制台中有一堆由 Review.rb 模型创建的评论，它有一个布尔属性“完成”来指示评论是否完整。在我的开发数据库中，每条评论的完成属性当前都设置为“真”，这是我通过 UI 完成的。但是，我现在想使用控制台将完成的属性设置回其原始设置 (nil)，以便我可以在 UI 中进行一些实验。因此，我在 Rails 控制台中执行了此操作。

```
>> Review.all.each do |s|
?> s.finished = nil
>> end 
```

运行它的输出表明“完成”被设置为 nil。但是，当我再次查询 Review.all 时，finished 属性仍然设置为“true”。我猜我必须以某种方式保存它，但我不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:13:17.353

做这个：

```
Review.all.each do |s|
      s.finished = nil
      s.save!
end 
```

或尝试`Review.save_all`在最后打电话

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:16:18.527

`save`对象：

```
 >> Review.all.each do |s|
   ?> s.finished = nil
   ?> s.save!
   >> end 
```

或者：

```
 Review.update_all(:finished => nil)  #in one line 
```

# jquery - jquery为某些字符串添加readmore

> ID：15441268
> 
> 赞同：1
> 
> 时间：2013-03-15T20:09:54.043
> 
> 标签：jquery

在文本块中，如果出现“###”，我想用图像替换它，之后的所有内容都应在单击时隐藏，一切都会淡入，添加另一个图像，阅读更多图像被隐藏并单击无读图像, text slidesup 和 readmoreimage 再次可见。

这是一个例子：http: [//jsfiddle.net/TkPt6/7/](http://jsfiddle.net/TkPt6/7/)

并且只有一个元素可以正常工作，但是应该可以将###添加到多个元素，但是有一个问题：

[http://jsfiddle.net/TkPt6/6/](http://jsfiddle.net/TkPt6/6/)

如何应用它只影响应该受影响的元素？

顺便说一句，如何编写更好的代码？

那是我的js代码：

```
$('div.ce_text p').each(function() {
    if($(this).text().indexOf("###") > -1) {
        var readmore = '<p class="more">more</p>';
        var readmoreselector = 'p.more';
        var readless = '<p class="less">less</p>'
        var readlessselector = 'p.less';

        $(this).nextAll().wrapAll('<div class="more_content">');
        $(this).replaceWith(readmore);

        var hiddentext = $('div.more_content');
        $(hiddentext).append(readless);
        $(readmoreselector).click(function(){
            $(hiddentext).slideDown('slow');
            $(readmoreselector).css('display','none');
        })
        $(readlessselector).click(function(){
            $(hiddentext).slideUp('slow');
            $(readmoreselector).css('display','block');
        })            

    }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:40:22.900

改变这个：

```
$(hiddentext).slideDown('slow'); 
```

对此：

```
$(this).next().slideDown('slow'); 
```

演示：http: [//jsfiddle.net/TkPt6/9/](http://jsfiddle.net/TkPt6/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:45:32.077

使用您现有的代码，我可以对其进行修改以适用于各个部分。

此外，您还有一个逻辑错误，即`less`每次迭代都将其添加到每个部分，这会导致它被多次添加到已完成的任何先前部分。

使用`on()`with delegate`click`可以将 click 事件绑定移动`p.more`到`p.less`每个循环之外。

更新`click`事件以使用当前范围仅影响与当前相关的元素。

```
$('div.ce_text p').each(function () {
    var $this = $(this); // cahced $(this);

    if ($(this).text().indexOf("###") > -1) {
        var readmore = '<p class="more">more</p>';
        var readmoreselector = 'p.more';
        var readless = '<p class="less">less</p>'
        var readlessselector = 'p.less';

        $this.siblings().last().after(readless); // fixed the issue of duplicated less
        $this.nextAll().wrapAll('<div class="more_content">');
        $this.replaceWith(readmore);
    }
})

// moved this outside the each as those can be bound using `on` with delegation
$('div.ce_text').on('click', 'p.more', function () {
    $(this).next().slideDown('slow');
    $(this).css('display', 'none');
})

// moved this outside the each as those can be bound using `on` with delegation    
$('div.ce_text').on('click', 'p.less', function () {
    $(this).parent().slideUp('slow');
    $(this).closest('div.ce_text').find('p.more').css('display', 'block');
}) 
```

* * *

[**演示**](http://jsfiddle.net/gUvBE/)

* * *

我确信有很多方法可以做到这一点，但我尝试尽可能多地使用您现有的代码。

# apache - .htaccess 重定向和代理端口

> ID：15441271
> 
> 赞同：1
> 
> 时间：2013-03-15T20:10:00.433
> 
> 标签：apache, .htaccess, redirect, proxy, port

我有一个 apache 服务器，它是云服务器网络的一部分。虚拟服务器配置为在端口 9000 响应，但您可以通过端口 80 从外部访问。这工作正常，除非我尝试从 .htaccess 文件进行重定向

我有接下来的 2 行将错误重定向到文件夹索引

```
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} !-f
RewriteRule .* /folder/ [R=301,L] 
```

这试图将用户重定向到：www.domain.com:9000/folder/，它应该重定向到 www.domain.com/folder（这意味着 www.domain.com:80）

我怎样才能避免这种情况？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:07:01.273

我解决了它，将重写规则更改为：

```
RewriteRule .* http://%{HTTP_HOST}/folder/ [R=301,L] 
```

# coffeescript - 在对象数组中，如何根据对象属性进行聚合？

> ID：15441272
> 
> 赞同：2
> 
> 时间：2013-03-15T20:10:05.700
> 
> 标签：coffeescript, underscore.js

假设我有以下对象数组：

```
dataArray = [ 
  { id: "a", score: 1 }, 
  { id: "b", score: 2 }, 
  { id: "c", score: 5 }, 
  ...
  { id: "a", score: 3 },
  ...
  { id: "c", score: 2},
  ...
 ] 
```

如何获得如下结果数组：

```
resultArray = [
  { id: "a", score: sum of all the scores when id is a },
  { id: "b", score: sum of all the scores when id is b },
  ...
  ...
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:33:39.060

如果您使用下划线库：

```
_.map  _.groupBy(dataArray, 'id'), (v, k) -> 
    {id: k, score: _.reduce(v, ((m, i) -> m + i['score']), 0) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:56:36.927

下划线版本可能是最简洁的。这是一个普通的 CoffeeScript 版本，它只创建一个辅助对象以通过 id 快速访问并使整个事情 O(n)：

```
aggregateScores = (dataArr) ->
  scores = {}
  for {id, score} in dataArr
    scores[id] = (scores[id] or 0) + score
  {id, score} for id, score of scores

console.log aggregateScores [ 
  { id: "a", score: 1 }
  { id: "b", score: 2 } 
  { id: "c", score: 5 } 
  { id: "a", score: 3 }
  { id: "c", score: 2 }
 ]
 # Output:
 # [{id:"a", score:4}, {id:"b", score:2}, {id:"c", score:7}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:44:15.137

这只是普通的 JavaScript，但这里是您问题的长答案：

```
function aggregate(values, init, keyGetter, valueGetter, aggregator) {
        var results = {}
        for (var index = 0; index != values.length; ++index) {
            var value = values[index]
            var key = keyGetter(value)
            var soFar;
            if (key in results) {
                soFar = results[key]
            } else {
                soFar = init
            }
            value = valueGetter(value)
            results[key] = aggregator(soFar, value)
        }
        return results
    }

    var array = [
        { id: 'a', score: 1 },
        { id: 'b', score: 2 },
        { id: 'c', score: 5 },
        { id: 'a', score: 3 },
        { id: 'c', score: 2 }
    ]

    function keyGetter(value) {
        return value.id
    }

    function valueGetter(value) {
        return value.score
    }

    function aggregator(sum, value) {
        return sum + value
    }

    function ready() {
        var results = aggregate(array, 0, keyGetter, valueGetter, aggregator)
        console.info(results)
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T21:18:51.173

这是一个简单的咖啡脚本版本：

```
data = [
  { id: "a", score: 1 }
  { id: "b", score: 2 }
  { id: "a", score: 5 }
  { id: "c", score: 2 }
  { id: "b", score: 3 }
]

# Aggregate scores in a map.
resultSet = {}
for obj in data
  resultSet[obj.id] ?= 0
  resultSet[obj.id] += obj.score
console.log resultSet

# Create array from map.
resultArr = for key, val of resultSet
  { id: key, score: val}
console.log resultArr 
```

输出是：

```
{ a: 6, b: 5, c: 2 }
[ { id: 'a', score: 6 },
  { id: 'b', score: 5 },
  { id: 'c', score: 2 } ] 
```

我确信可以使用下划线中的函数创建一个更高级的解决方案，但是咖啡脚本解决方案还不错，所以我选择了一些简单易懂的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T13:06:10.110

如果这是您想要做的唯一聚合，那就有点矫枉过正了，但是有一个记录良好的聚合库[Lumenize](http://lmaccherone.github.com/Lumenize/docs/Lumenize-docs/index.html#!/api/Lumenize.OLAPCube)，除了更高级的数据透视表、n 维立方体、分层滚动之外，它还可以执行类似这样的简单分组操作ups 和时区精确的时间序列聚合。

[这是](http://jsfiddle.net/lmaccherone/VrJqA/)Lumenize 解决方案的 jsFiddle。

如果你想在 node.js 中尝试：

```
npm install Lumenize --save 
```

然后将其放入名为 lumenizeGroupBy.coffee 的文件中：

```
lumenize = require('Lumenize')
dataArray = [
  { id: "a", score: 1 },
  { id: "b", score: 2 },
  { id: "c", score: 5 },
  { id: "a", score: 3 },
  { id: "c", score: 2}
]

dimensions = [{field:'id'}]
metrics = [{field: 'score', f: 'sum', as: 'sum'}]
config = {dimensions, metrics}

cube = new lumenize.OLAPCube(config, dataArray)
console.log(cube.toString(null, null, 'sum')) 
```

并运行

```
coffee lumenizeGroupBy.coffee 
```

# objective-c - 如何通过 Mac App 以编程方式聚焦桌面/Finder？

> ID：15441275
> 
> 赞同：3
> 
> 时间：2013-03-15T20:10:32.417
> 
> 标签：objective-c, macos, cocoa, desktop, finder

我想通过我的应用程序关注桌面/查找器，特别是如果用户当前在全屏应用程序中。我一直在尝试使用类似的东西：

```
[[NSWorkspace sharedWorkspace] launchApplication:@"Finder"]; 
```

和

```
[[NSWorkspace sharedWorkspace] openFile:nil withApplication:@"Finder"]; 
```

但是使用这些代码行，一个新的 Finder 窗口将打开“所有文件”。
我只想专注于桌面/Finder，我该怎么做？寻找适用于 App Store 的代码。
谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T22:18:22.697

您可以使用可可的 NSWorkspace 来完成 - 不需要特殊权利

```
NSArray *apps = [[NSWorkspace sharedWorkspace] runningApplications];

for (NSRunningApplication *app in apps) {
    if([app.bundleIdentifier.lowercaseString isEqualToString:@"com.apple.finder"]) {
        [app activateWithOptions:NSApplicationActivateAllWindows|NSApplicationActivateIgnoringOtherApps];
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T21:54:14.577

这可以使用 applescript 来完成，经过一些研究和一些权利条目后，它*应该*可以与 mac 商店应用程序一起使用。

这是一个 AppleScript 脚本，可以满足您的要求：

```
tell application "Finder" to activate 
```

权利条目：

```
<key>com.apple.security.temporary-exception.apple-events</key>
<array>
    <string>com.apple.finder</string>
</array> 
```

[您可以在此处](http://www.leancrew.com/all-this/2011/08/the-app-store-sandboxing-and-applescript/)和[此处](https://stackoverflow.com/questions/12858642/mac-app-rejection-temporary-exception-entitlement-key-for-safari)阅读有关权利流程的更多信息。

我知道这不是一个完整的答案 - 我不是 Mac 专家。我只是想尝试为您指出解决问题的正确方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-14T14:06:15.170

斯威夫特，使用`NSRunningApplication.runningApplications`

```
NSRunningApplication.runningApplications(withBundleIdentifier: "com.apple.finder").first?.activate(options: []) 
```

# .net - .net 成员身份验证在第一次尝试/成功登录后失败

> ID：15441276
> 
> 赞同：0
> 
> 时间：2013-03-15T20:10:34.377
> 
> 标签：.net, authentication, membership

我正在使用 .net 成员资格创建 SSO 系统。我已经成功验证了用户，但是，问题是一旦用户登录，如果用户注销，然后尝试再次登录，下一次登录尝试将失败（“您的登录尝试不成功”）。

EG 从默认登录页面，（使用 .net 登录控件）用户登录/验证并重定向到 loginstatus.aspx。用户从 loginstatus.aspx 注销（使用 .net 登录状态控件）并再次重定向到默认登录页面。用户尝试使用相同的凭据再次登录，身份验证失败。

在本地调试中，每次我开始和停止调试时，这都会“清除”问题并且用户只能再次进行身份验证。我也在服务器上尝试过，结果相同。此外，如果第一次身份验证尝试失败（密码错误），用户在下次尝试使用正确密码时将无法登录。

我没有自定义或覆盖任何登录控制方法（尽管我在 login.authenticate 上尝试了 members.validateuser 并遇到了同样的问题）。

我正在使用 MySQLMembershipProvider 的 6.2.3.0 版本（我已经阅读了有关散列密码和 MySqlMembershipProviders 的一些问题，但添加 SHA1 不会影响该问题，并且用户可以进行一次身份验证 - [MySQL Forms Authentication Hashed password problem](https://stackoverflow.com/questions/3090476/mysql-forms-authentication-hashed-password-problem)）。

调试可能发生的事情的任何提示？

这是我的 web.config 示例（我也使用了 AutoGenerate 机器密钥，问题仍然存在）：

```
 <membership defaultProvider="MySqlMembershipProvider" userIsOnlineTimeWindow="15">
        <providers>
            <clear/>
            <add name="MySqlMembershipProvider" type="MySql.Web.Security.MySQLMembershipProvider, MySql.Web, Version=6.2.3.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" 
         connectionStringName="MySqlMembershipConnection" 
         applicationName="myapp" 
         enablePasswordRetrieval="false" 
         enablePasswordReset="true" 
         requiresQuestionAndAnswer="false" 
         requiresUniqueEmail="true" 
         passwordFormat="Hashed" 
         maxInvalidPasswordAttempts="5" 
         minRequiredPasswordLength="8" 
         minRequiredNonalphanumericCharacters="2"/>
        </providers>
    </membership>
    <machineKey validationKey="AD45EA85C19163E399E0ACEBC5523A9C740EFFF42154518FCDFA349E415DF51894C2CA25ABF8CF419C9F206DBE4878118D8BE8CF4DAA2E9708E7296B288ED980" 
            decryptionKey="C1ECCEF762BABCC02A44CD50571C2C3EDF6E7E4F7208886ACE157EF22AFCA27A" 
            validation="SHA1" decryption="AES"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:59:22.397

结果发现数据库模式有些问题。我更新到 mysql 连接器 v 6.5.5.0，解析器抛出一个关于 mysqlroleprovider “缺少或不正确的模式”的错误，我让它自动生成模式，创建了新模式（这次表名中没有大写字母），问题似乎解决了。

# java - 如何编写返回抽象类实例的方法？

> ID：15441277
> 
> 赞同：1
> 
> 时间：2013-03-15T20:10:42.960
> 
> 标签：java

我是 Java 的初学者，我试图理解抽象类。下面是我写的代码；问题是：我如何编写一个返回该类实例的方法。

```
public abstract class VehicleEngine
{
    protected String name;
    protected double fabricationCons;
    protected double consum;
    protected int mileage;

    public VehicleEngine(String n, double fC)
    {
        name = n;
        fabricationCons = fC;
        mileage = 0;
        consum = 0;
    }

    private void setFabricationCons(double fC)
    {
        fabricationCons = fC;
    }

    public abstract double currentConsum();

    public String toString()
    {
        return name + " : " + fabricationCons + " : " + currentConsum();
    }

    public void addMileage(int km)
    {
        mileage += km;
    }

    public double getFabricationConsum()
    {
        return fabricationCons;
    }

    public String getName()
    {
        return name;
    }

    public int getMileage()
    {
        return mileage;
    }

    //public VehicleEngine get(String name){ 
    //if(getName().equals(name)){
    //return VehicleEngine;
    //}
    //return null;
    //}
}

public class BenzinVehicle extends VehicleEngine
{
    public BenzinVehicle(String n, double fC)
    {
        super(n, fC);
    }

    @Override
    public double currentConsum()
    {
        if (getMileage() >= 75000) {
            consum = getFabricationConsum() + 0.4;
        } else {
            consum = getFabricationConsum();
        }
        return consum;
    }
}

public class DieselVehicle extends VehicleEngine
{
    public DieselVehicle(String n, double fC)
    {
        super(n, fC);
    }

    @Override
    public double currentConsum()
    {
        int cons = 0;
        if (getMileage() < 5000) {
            consum = getFabricationConsum();
        } else {
            consum = getFabricationConsum() + (getFabricationConsum() * (0.01 * (getMileage() / 5000)));
        }
        return consum;
    }
} 
```

这是主要的。

```
public class Subject2
{
    public static void main(String[] args)
    {
        VehicleEngine c1 = new BenzinVehicle("Ford Focus 1.9", 5.0);
        DieselVehicle c2 = new DieselVehicle("Toyota Yaris 1.4D", 4.0);
        BenzinVehicle c3 = new BenzinVehicle("Citroen C3 1.6",5.2);

        c1.addMileage(30000);
        c1.addMileage(55700);
        c2.addMileage(49500);
        c3.addMileage(35400);

        System.out.println(c1);
        System.out.println(c2);
        System.out.println(VehicleEngine.get("Citroen C3 1.6")); //this is the line with problems
        System.out.println(VehicleEngine.get("Ford Focus "));
    }
} 
```

输出应该是：

```
Ford Focus 1.9 : 5.0 : 5.4
Toyota Yaris 1.4D : 4.0 : 4.36
Citroen C3 1.6 : 5.2 : 5.2
null 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:16:13.420

根据定义，您*不能*返回抽象类的实例。您可以做的是返回扩展它的具体（非抽象）子类之一的实例。例如，在`VehicleEngine`给定实例类型和预期参数的情况下，您可以创建一个返回实例的工厂，但这些实例必须是具体的子类`VehicleEngine`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:15:37.173

看看[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern#Java)模式。您的具体类将实现一个返回类实例的抽象方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:28:33.197

抽象类不保留其实例的列表。实际上没有Java类这样做。如果你真的想这样做，你可以像这样向 VehicleEngine 添加一个静态地图：

```
private static Map<String, VehicleEngine> instanceMap = new HashMap<String, VehicleEngine>(); 
```

并将您的 get 方法更改为这样的静态方法：

```
public static VehicleEngine get(String name) {
    return instanceMap.get(name);
} 
```

并将这一行添加到 VehicleEngine 的构造函数的末尾：

```
VehicleEngine.instanceMap.put(n, this); 
```

这样，每个创建的新实例都会将自己放入静态地图中。然而，这实际上不是实现此类功能的好方法。您可以尝试使用工厂来创建实例，或者如果您将拥有有限的预定义实例数量，则可以考虑将此类转换为枚举。

# java - 用于正确解析逗号分隔的键 = 值分配列表的 Java 库或代码

> ID：15441279
> 
> 赞同：3
> 
> 时间：2013-03-15T20:10:52.137
> 
> 标签：java

这感觉就像必须多次重新发明的东西，并且不应该有一个，而是应该有几个库。

我想解析包含多个“key=value”形式的“赋值”的文本行，用逗号分隔。问题在于，应该可以尽可能地指定值，以接近 Java 允许指定字符串或数值的方式。例如转义字符串、指定 Unicode 字符或将制表符指定为 \t。

有谁知道有方法的开源或 LGPL 库？

更新：我认为（尚未）看到如何轻松使用属性，因为我必须处理一个包含多个键=值对的字符串，用逗号分隔。这里的问题是除非解析器知道如何正确解析值（当然可以包含逗号），否则没有简单的方法可以在逗号处拆分字符串。本质上，我想要做的是将这样的字符串转换为：`var1=1, var2="asdf",var3="x,y,z\n",var4="\""`转换为哈希图，或者 Value 包装一些字符串、布尔值或数值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:13:37.150

我认为 Java Properties API 可以用于此

[http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-12T12:51:30.907

不需要图书馆。

```
 String[] strArray= "var1=1,var2=2,var3=test".split(",");
    Map<String, String> map = new HashMap<>();
    for (String pair : strArray) {
        String split[] = pair.split("=");
        map.put(split[0], split[1]);
    } 
```

如果你真的想使用图书馆，你可以试试[Guava](https://github.com/google/guava)

```
Iterable<String> split = Splitter.on(',').omitEmptyStrings().split("var1=1,var2=2,var3=test"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:14:16.527

你说的是属性文件吗？您可以使用以下方法执行此类操作[`Properties`](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)：

```
Properties properties = new Properties();
properties.load(new FileInputStream("/path/to/file.properties")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T20:17:06.250

你不能使用 java java.util.Properties 吗？

[http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)

```
Properties props = new Properties();
props.load(new FileInputStream("myfile.properties")); 
```

# php - symfony2 无法设置Flash message

> ID：15441280
> 
> 赞同：0
> 
> 时间：2013-03-15T20:10:53.920
> 
> 标签：php, session, symfony

我不能在我的普通控制器中这样做：

```
$this->setFlash('settings_successfully_uploaded', 'settings.upload.successfully'); 
```

我用谷歌搜索了这样的解决方案：

```
$this->get('session')->getFlashBag()->add('add_remove_friend', $flashMessageText); 
```

但是我想知道为什么不能直接setFlash？因为在我的另一个控制器中似乎没有什么特别之处，我在那里使用我可以直接做到这一点......所以..有什么问题？第二个控制器被覆盖`FOSProfileController`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:20:55.723

在 Symfony 2.0 中，API 将使用`$this->setFlash`，就像您在第一个代码片段中所做的那样。根据[此处](https://github.com/symfony/symfony/issues/1863)的讨论和相关的链接问题，决定这个键/值对不是一个好主意。

该解决方案体现在`$this->get('session')->getFlashBag()`您在第二个代码片段中提到的新 API 中。新的 API 允许更大的灵活性。请参阅[升级说明](https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md#session)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:37:40.510

你确定第二个控制器被覆盖 FOSProfileController 吗？不延长？我想您在调用 $this->setFlash() 期间正在调用父方法。在其他 FOS 包中，我看到了 setFlash() 方法的实现。

请检查专利类别。

# ios - GTMOAuthViewControllerTouch 和 LinkedIn 注销

> ID：15441283
> 
> 赞同：2
> 
> 时间：2013-03-15T20:10:58.677
> 
> 标签：ios, objective-c, oauth, linkedin

我在从 LinkedIn 注销时遇到问题。我希望用户在执行注销方法后看到带有用户名和密码的 LinkedIn 唱歌。

**唱入法：**

```
NSURL *authorizeTokenURL = [NSURL URLWithString:@"https://www.linkedin.com/uas/oauth/authenticate"];
NSURL *accessTokenURL = [NSURL URLWithString:@"https://api.linkedin.com/uas/oauth/accessToken"];

GTMOAuthViewControllerTouch *authViewControllerTouch = [[GTMOAuthViewControllerTouch alloc] initWithScope:nil language:nil requestTokenURL:requestTokenURL authorizeTokenURL:authorizeTokenURL accessTokenURL:accessTokenURL authentication:authentication appServiceName:@"AppServiceName" delegate:self finishedSelector:@selector(linkedInAuthSelector:finishedWithAuth:error:)];

[authViewControllerTouch setBrowserCookiesURL:[NSURL URLWithString:@"https://api.linkedin.com/"]];

UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:authViewControllerTouch];
[self presentViewController:navigationController animated:YES completion:nil]; 
```

**出线方法：**

```
- (void) logout{
    [GTMOAuthViewControllerTouch removeParamsFromKeychainForName:@"AppServiceName"];
} 
```

但是，下次我唱歌时，OAuth 错过了我需要输入 LinkedIn 凭据的步骤。

该应用程序仅在删除并重新安装时才请求登录名和密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:23:30.163

尽管存在 [GTMOAuth clearBrowserCookies] 方法。我在 singout 方法中手动删除域中带有“linkedin”的所有 cookie

```
NSHTTPCookieStorage *cookieStorage;
cookieStorage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
NSArray *cookies =  [cookieStorage cookies];

for (NSHTTPCookie *cookie in cookies) {
    if ([cookie.domain rangeOfString:@"linkedin"].location != NSNotFound) {
        [cookieStorage deleteCookie:cookie];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-28T00:14:26.127

在 Swift 3 中，使用以下代码：

```
 // LinkedIn Cookie Purge
    let cookieStorage: HTTPCookieStorage = HTTPCookieStorage.shared
    if let cookies = cookieStorage.cookies {
        for cookie in cookies {
            if cookie.domain.contains("linkedin") {
                cookieStorage.deleteCookie(cookie)
            }
        }
    } 
```

# python - Python csv阅读器返回公式而不是值

> ID：15441286
> 
> 赞同：0
> 
> 时间：2013-03-15T20:11:11.657
> 
> 标签：python, excel, csv

我有一个 txt 文件，其中包含一些“excel 公式”，我已使用 Python csv 读取器/写入器将其转换为 csv 文件。现在我想读取 csv 文件的值并进行一些计算，但是当我尝试访问 .csv 文件的特定列时，它仍然在“excel 公式”中返回我而不是实际值？虽然当我打开 csv 文件时.. 公式被转换为值？？
有任何想法吗？

这是代码

将txt转换为csv的代码

```
def parseFile(filepath):

    file = open(filepath,'r')
    content = file.read()
    file.close()

    lines = content.split('\n')

    csv_filepath = filepath[:(len(filepath)-4)]+'_Results.csv'
    csv_out = csv.writer(open(csv_filepath, 'a'), delimiter=',' , lineterminator='\n')             
    for line in lines:

                data = line.split('\t')
                csv_out.writerow(data)   

   return csv_filepath 
```

在 csv 文件中进行一些计算的代码

```
def csv_cal (csv_filepath):

    r = csv.reader(open(csv_filepath)) 

    lines = [l for l in r]
    counter =[0]*(len(lines[4])+6)

    if lines[4][4] == 'Last Test Pass?' :
        print ' i am here'

        for i in range(0,3):
            print lines[6] [4]  ### RETURNS FORMULA ??

    return 0 
```

我是python新手，任何帮助将不胜感激！谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T00:01:20.060

您可以在选择“**仅值**”选项的情况下在 Excel 中进行**特殊粘贴**。您可以选择全部并粘贴到另一张表中并保存。这将使您不必在 python 中实现某种解析器。或者，您可以使用.**`eval`**

 **编辑：

我听说[xlrd](http://www.python-excel.org/)可以从[pypi](https://pypi.python.org/pypi/xlrd)下载。它加载 .xls 文件。

听起来你只是想要过去特别版可以做的最终数据。**

# java - LoadRunner 与自定义 Java 代码相结合，为每个 vuser 创建 saml 令牌

> ID：15441290
> 
> 赞同：1
> 
> 时间：2013-03-15T20:11:41.947
> 
> 标签：java, customization, saml, loadrunner

想要实现一些自定义 Java 代码来为我的 http loadrunner vuser 脚本中的每个 vuser 创建一个 saml 令牌，我想知道如何设置它？假设开发人员可以开发一些代码来生成用于每个 vuser 请求的 saml 令牌，这可以每个 vuser “调用”吗？如何设置 Loadrunner 以在 vuser 脚本中使用自定义 Java 代码？脚本是用 C 语言编写的，但生成 saml 令牌的代码/逻辑是用 Java 开发的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:51:30.930

多条路径是开放的

(1) 将 Java 算法转换为 C 函数，然后与基于 C 的虚拟用户集成。

(2) 将基于 C 的 Web 虚拟用户转换为 Java，然后使用 Java 版本的代码。当您沿着这条路走下去时，您将不得不访问与您的 Java 版本、您的 LoadRunner 版本、32 位与 64 位相关的黑暗魔法领域，以及需要牺牲多少侏儒才能使其无缝协同工作。

顺便说一句，这个挑战不仅仅来自于 Java，它也来自于 .Net（在更大程度上！）。这是由于语言版本（Java、.Net 变体）的变化速度比工具供应商能够跟上支持特定版本的速度更快引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:03:12.557

我有时使用的一种选择是：

*   编写一个封装了我想要的功能的Java servlet
*   在某处的 Web 服务器上运行它（通常是我们在其中一个测试台上运行的 Tomcat 实例）
*   创建一个使用 servlet 的 Web/HTTP 脚本
*   或者，将其全部包装在一个可重用的函数中。

它避免了将任何代码从一种语言移植到另一种语言的需要，或者处理 LoadRunner 的（有些不稳定的）Java 支持。此外，您可能会发现您的组织没有购买足够（或实际上没有）Java vuser 许可证，但拥有大量 Web/HTTP 许可证。

# c++ - 层次结构中的所有派生类都需要访问虚拟基类吗？

> ID：15441294
> 
> 赞同：6
> 
> 时间：2013-03-15T20:11:52.580
> 
> 标签：c++, constructor, virtual-inheritance

当我尝试编译以下代码时：

```
class A {
public:
    A(int v) : virt(v) { }
    int virt;
    int getVirt(void) const { return virt; }
};

class B : private virtual A {
protected:
    B(int v) : A(v) { }
    using A::getVirt;
};

class C : public B, private virtual A {
protected:
    C(int v) : A(v), B(v) { }
    using A::getVirt;
};

class D : public C {
public:
    D(void) : C(3) { }
    using C::getVirt;
};

#include <iostream>

int main(int argc, char *argv[]) {
    D d;
    std::cout << "The number is: " << d.getVirt() << std::endl;

    return 0;
} 
```

我收到关于 D 没有实例化 A 的错误；那是对的吗？如果虚拟基嵌入在层次结构中，所有派生类是否也需要虚拟地从该基派生，以便它们可以调用虚拟基的参数构造函数？

顺便说一句，这是 G++ 产生的错误：

```
Main.cpp: In constructor ‘D::D()’:
Main.cpp:22:18: error: no matching function for call to ‘A::A()’
Main.cpp:22:18: note: candidates are:
Main.cpp:3:5: note: A::A(int)
Main.cpp:3:5: note:   candidate expects 1 argument, 0 provided
Main.cpp:1:7: note: A::A(const A&)
Main.cpp:1:7: note:   candidate expects 1 argument, 0 provided 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T20:17:08.457

这与访问控制无关（至少主要不是）。相反，您必须了解虚拟基的工作原理：虚拟基子对象由*派生最多*的类初始化。由于您没有`A`在 的构造函数初始化列表中提及，`D`因此尝试了默认构造函数，但不存在。

要解决此问题，请`A`在以下位置正确初始化`D`：

```
 D() : A(3), C(3) { } 
```

当您说 时`A(3)`，名称查找是根据 12.6.2/2 执行的：

> 在*mem-initializer-id*中，在构造函数类的范围内查找初始的非限定标识符，如果在该范围内找不到，则在包含构造函数定义的范围内查找。

正如 Drew Dorman 正确指出的那样，您可以通过调用虚拟基类来强制直接路径，`::A`从而获得所需的访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:48:10.267

正如 Kerrek SB 提到的，您*需要*`A`在构造函数中初始化`D`.

但是，您还必须使用范围运算符明确告诉编译器您**不是**`A`从其（私有）派生的上下文中访问的。

```
class D : public C {
public:
    D(void) : ::A(3), C(3) { }
//            ^^ Access this constructor from a global context
    using C::getVirt;
}; 
```

这也意味着您的构造函数必须是公共的，就像您的代码一样。

# java - 登录基于 php 的站点并抓取数据 - 问题

> ID：15441299
> 
> 赞同：1
> 
> 时间：2013-03-15T20:12:02.943
> 
> 标签：java, php, httpclient

我正在创建一个需要连接到基于 php 的站点并登录以收集相关数据的第 3 方 java 应用程序（桌面）。没有可访问的 Web 服务，没有 API，每个用户都将拥有自己的安全登录。该站点使用 dojo（如果这很重要），我正在使用 Java HttpClient 发送帖子。

```
HttpPost httppost = new HttpPost("https://thewebsite.net/index/login"); // .php ?
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();

//initialize the response string    
String nextpage = "";

try {
    // Add nvps
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);
    nameValuePairs.add(new BasicNameValuePair("", ""));
    nameValuePairs.add(new BasicNameValuePair("login", "USER"));
    nameValuePairs.add(new BasicNameValuePair("", ""));
    nameValuePairs.add(new BasicNameValuePair("pass", "PASSWORD"));
    nameValuePairs.add(new BasicNameValuePair("Submit", ""));

    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

HttpResponse response = httpclient.execute(httppost);
userID = EntityUtils.toString(response.getEntity());

System.out.println(nextpage);
httppost.releaseConnection();
}
... 
```

现在，我遇到的问题是给我的响应是用户的验证 jscript/通过 dojo 传递字段。

```
<script type='text/javascript'> 
dojo.require("dojox.validate._base"); 

function validate_RepeatPassword(val, constraints)
{
    var isValid = false; 

    if(constraints)  { 
        var otherInput =  dijit.byId(constraints[0]); 
        if(otherInput) { 
        var otherValue = otherInput.value; 
            isValid = (val == otherValue); 
        } 
    } 
    return isValid; 
}

</script> 
```

我只是想连接，解析一个 html 响应，然后关闭连接。

当我使用 firebug 时，我把它作为 post 方法，但我似乎无法让它运行：Referer [https://thewebsite.net/index/login](https://thewebsite.net/index/login) Source login=USER&pass=PASSWORD

当我使用 HttpPost 客户端构建没有名称值对的直接发布 url 时：

```
HttpPost httppost = new HttpPost("https://thewebsite.net/index/login?login=USER&pass=PASSWORD"); 
```

，我收到一条错误响应，指出“用户和密码字段不能留空”。

我的问题是：是否有一种直接的登录方法比我缺少的更简单，可以让我成功地继续过去的登录？

谢谢 - 我喜欢 SO 社区；希望你能帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:55:46.147

我认为最好的库是[jsoup](http://jsoup.org/)

```
Connection.Response res = 
Jsoup.connect("https://thewebsite.net/index/login?login=USER&pass=PASSWORD")
.method(Method.POST)
.execute(); 
```

在此之后，您还需要进行验证。您需要读取 cookie、请求参数和标头参数，这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:13:22.747

我最终没有使用您的确切代码（使用 post 参数），但 JSoup 是解决方法。

这是我用的：

```
`res = Jsoup.connect("https://thewebsite.net/index/login")
    .data("login", User).data("pass", Pass)
    .userAgent("Chrome").method(Method.POST).execute();

//then I grabbed the cookie and sent the next post for the data

Document t = res.parse(); //for later use
SessionID = res.cookie("UNIQUE_NAME");

//the JSON
Connection.Response driverx =     Jsoup.connect("https://thewebsite.net/datarequest/data").cookie("UNIQUE_NAME",SessionID).userAgent("Chrome").method(Method.POST).execute();` 
```

# streaming - 如何让 Rails 4 ActionController::Live 流与 Thin 和 Ruby 2 一起使用？Thin 和 Puma 如何通过直播进行扩展？

> ID：15441302
> 
> 赞同：7
> 
> 时间：2013-03-15T20:12:14.153
> 
> 标签：streaming, thin, ruby-on-rails-4, ruby-2.0, puma

我让它与 Puma 一起工作，但在 Thin 上，我没有得到任何流输出，我必须终止服务器才能停止它。我正在使用tenderlove 输出当前时间的初始示例进行测试：

[http://tenderlovemaking.com/2012/07/30/is-it-live.html](http://tenderlovemaking.com/2012/07/30/is-it-live.html)

对我来说，一个更普遍的问题是，这种类型的流媒体在流量很大的应用程序中是否实用？我想如果不是成千上万的用户在这样的应用程序中一次连接到流，那么很容易就会有很多人。彪马将如何在这里扩展？我读到 Puma 每个连接使用 1 个线程。那效率高吗？那么薄呢？所有连接都在同一个线程中吗？这样会更有效率吗？

我遇到的另一个问题是，即使使用 Puma，我也只能获得一个本地连接。当我从第二个终端卷曲时，我没有得到任何输出......有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T14:28:17.383

如果您在环境中更改 development.rb：

**/config/environments/development.rb**

```
config.cache_classes = true

config.eager_load = true 
```

您将能够与 puma localy 建立多个联系！缺点是每次您想查看所做的任何更改时都必须重新启动。

# ios - 在 UIView 中挖一个洞

> ID：15441312
> 
> 赞同：3
> 
> 时间：2013-03-15T20:12:59.203
> 
> 标签：ios, xcode

我正在尝试使用 UIView 作为掩码添加到另一个 UIView 前面。我需要这个来创建我的应用程序的教程。这是代码：

```
UIView *baseView = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
//self.view = baseView;
[self.view addSubview:baseView];
[baseView setBackgroundColor:[UIColor blackColor]];
baseView.userInteractionEnabled = YES;
baseView.alpha = 0.5;

CAShapeLayer *mask = [[CAShapeLayer alloc] init];
mask.frame = baseView.layer.bounds;
CGRect biggerRect = CGRectMake(mask.frame.origin.x, mask.frame.origin.y, mask.frame.size.width, mask.frame.size.height);
CGRect smallerRect = CGRectMake(200.0f, 500.0f, 300.0f, 200.0f);

UIBezierPath *maskPath = [UIBezierPath bezierPath];
[maskPath moveToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMinY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMaxY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(biggerRect), CGRectGetMaxY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(biggerRect), CGRectGetMinY(biggerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(biggerRect), CGRectGetMinY(biggerRect))];

[maskPath moveToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMinY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMaxY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(smallerRect), CGRectGetMaxY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMaxX(smallerRect), CGRectGetMinY(smallerRect))];
[maskPath addLineToPoint:CGPointMake(CGRectGetMinX(smallerRect), CGRectGetMinY(smallerRect))];

mask.path = maskPath.CGPath;
[mask setFillRule:kCAFillRuleEvenOdd];
mask.fillColor = [[UIColor blackColor] CGColor];
baseView.layer.mask = mask; 
```

这样我就有了一个带有矩形孔的黑色透明 UIView。我想这样做，如果用户触摸 UIView 中除剪切部分之外的任何其他位置，则不会发生任何事情。如果用户触摸了剪切部分的任何位置，就好像用户触摸了它下面的 UIView。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:32:04.610

您可能希望覆盖`- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event;`充当叠加层的视图的方法。

从这里您可以看到该点是否在剪切区域内，如果它返回 NO。

您可以在此处查看[此 stackoverflow 问题](https://stackoverflow.com/questions/1694529/allowing-interaction-with-a-uiview-under-another-uiview)，其中包含更多信息。

[该文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)做了一个合理的工作来解释 pointInside:withEvent 和 hitTest:withEvent 之间的关系。

# java - Java和Hash算法比较文件

> ID：15441315
> 
> 赞同：6
> 
> 时间：2013-03-15T20:13:09.523
> 
> 标签：java, hash, md5, sha

我必须对文件进行指纹匹配才能匹配双胞胎。2013 年的 Java 推荐什么？我还应该比较文件大小，还是这是不必要的检查？

误报的概率应该非常接近0

编辑：很多答案，谢谢。今天备份软件的标准是什么？SHA-256？更高？我猜md5不适合？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-15T20:21:30.697

如果误报的概率必须*为零*，而不是“低于你被闪电击中的概率”，那么根本就不能使用哈希算法；您必须逐字节比较文件。

对于它的价值，如果您可以使用第三方库，您可以使用[Guava](http://guava-libraries.googlecode.com)逐字节比较两个文件

```
Files.asByteSource(file1).contentEquals(Files.asByteSource(file2)); 
```

它负责打开和关闭文件以及比较的细节。

如果您愿意接受比被闪电击中的可能性更小的误报，那么您可以这样做

```
Files.hash(file, Hashing.sha1()); // or md5(), or sha256(), or... 
```

它返回 a `HashCode`，然后您可以测试它与另一个文件的哈希是否相等。（该版本还处理了`MessageDigest`正确打开和关闭文件等的混乱情况。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:20:00.467

您是否在问如何在 Java 中获取文件的 md5 校验和？如果是这种情况，请在[此处](https://stackoverflow.com/questions/415953/generate-md5-hash-in-java)和[此处](https://stackoverflow.com/questions/304268/getting-a-files-md5-checksum-in-java)阅读已接受的答案。基本上，这样做：

```
import java.security.DigestInputStream;
...
...

MessageDigest md_1 = MessageDigest.getInstance("MD5");
MessageDigest md_2 = MessageDigest.getInstance("MD5");
InputStream is_1 = new FileInputStream("file1.txt");
InputStream is_2 = new FileInputStream("file2.txt");
try {
  is_1 = new DigestInputStream(is_1, md_1);
  is_2 = new DigestInputStream(is_2, md_2);
}
finally {
  is_1.close();
  is_2.close();
}
byte[] digest_1 = md_1.digest();
byte[] digest_2 = md_2.digest();

// compare digest_1 and digest_2 
```

> 我还应该比较文件大小，还是这是不必要的检查？

这是不必要的。

# java - 初学者 Java（循环）- 缺少 return 语句

> ID：15441322
> 
> 赞同：0
> 
> 时间：2013-03-15T20:14:02.327
> 
> 标签：java, loops, if-statement, while-loop, return-value

```
import java.util.Scanner;

public class Vending {
    public double vend(double balance) {
        Scanner in = new Scanner(System.in);
        balance = 0;
        System.out.print("Enter a command = ");
        String command = in.nextLine();

        while (in.hasNext()) {
            if (command.equals("penny")) {
                balance = balance + 0.01;
                System.out.println("balance = " + balance);
            }
            return balance;
        }
    }
} 
```

你好！我已经尝试了一切来弄清楚为什么 return 语句没有被识别。如果我将“退货余额”放在其他任何地方，它会说 system.out.println 无法访问......你们中的任何人都可以帮我解释为什么这可能不起作用吗？谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:16:04.247

该`return`语句在`while`循环内部和`if`条件段之外，因此代码在第一次迭代时就中断了循环。

可能的解决方案：移动`return`外部`while`

```
while (in.hasNext()) {
    if (command.equals("penny")) {
        balance = balance + 0.01;
        System.out.println("balance = " + balance);
    }
}
return balance; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:17:59.400

您的方法`vend(double balance)`被定义为返回一个`double`. 无论方法中发生什么，它都必须返回一个双精度值。现在你在这里有一个返回语句：

```
while (in.hasNext()) {
    if (command.equals("penny")) {
        balance = balance + 0.01;
        System.out.println("balance = " + balance);
    }
    return balance;
} 
```

但是，如果您的语句`in.hasNext()`返回，会发生什么`false`？那么`return`它的内部将永远无法到达。因此编译器不能保证你的方法是有效的java，因此会抱怨。

您应该在`while`.

当你说

> 如果我将“退货余额”放在其他任何地方，则表示 system.out.println 无法访问

您将 return 语句放在语句之前`System.out.println()`。当一个方法返回时，它放弃了`return`语句之后可能发生的任何事情，基本上使它之后的任何事情都变得无用。该`return`语句必须是方法的某个执行分支中的最后一条语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:17:49.480

那是因为编译器不能保证 return 语句会执行，因为它在你的循环中。它必须假设`in.hasNext()`可能返回 false 并且永远不会达到返回值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T20:18:11.677

您收到“缺少返回语句”错误，因为您的`while`循环可能永远不会执行。这导致程序到达函数的末尾而没有返回。

```
while (in.hasNext()) {
  if (command.equals("penny")) {
    balance = balance + 0.01;
    System.out.println("balance = " + balance);
  }
  return balance;
} 
```

如果我们假装`in`从来没有任何行，那么程序通过了`while`，因此`return`导致了这个问题。对于您的情况，您可能只是有一个默认返回，例如`return 0;`或者您想处理这种情况。

# android - Play商店多久更新一次缓存

> ID：15441323
> 
> 赞同：7
> 
> 时间：2013-03-15T20:14:06.763
> 
> 标签：android, in-app-purchase, google-play-services

我想知道 Play 商店多久更新一次缓存。问题是我将实施托管购买（一旦你购买，你就不会再购买）。问题是我一直在阅读，很多人说 Play 商店不会经常更新其缓存。情景。用户在手机上进行购买，然后转到他在平板电脑上没有购买的平板电脑，并且查询平板电脑并没有显示该商品已被购买。如何在不要求用户再次购买商品的情况下强制更新 Google Play 商店缓存（这通常会更新 Play 商店缓存，因为它会返回该商品已经购买）。

因此，Google Play 商店多久更新一次其本地缓存，如果它只是在设备启动和购买请求时，是否有另一种方法可以强制更新缓存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-16T13:40:37.143

回答了我的问题，但这里是为其他可能有这个问题的人准备的：

我发现 Play 商店会在每次购买时更新其缓存，并且每隔几个小时（当我取消订单时，它通常会在 3 小时内更新，当我在几天内退还订单以获得退款时）。因此，我可以根据我自己的个人经验说，Play Store 应用程序会经常更新其缓存，很可能是在您每次打开它之后。我认为每次打开它都是因为打开它需要多长时间（从谷歌的服务器获取所有当前信息，我希望你的应用程序购买信息在其中）。

同样来自 Google IO 2013，他们说谷歌缓存大约每 24 小时更新一次。

# php - 如何复制子目录/文件夹中的内容？

> ID：15441324
> 
> 赞同：0
> 
> 时间：2013-03-15T20:14:07.460
> 
> 标签：php

我有一个简单但令人难以置信的问题。

我有一个 PHP 代码来创建两个目录：

```
mkdir("uploads", 0777); // Create Folder
mkdir("uploads/input", 0777); // Create Folder 
```

上面的代码创建了上述文件夹。然后我有另一个 PHP 代码将图像文件复制到*上传/输入*并复制图像。

同样，我有 upload.php 一个 PHP 代码来将文件复制到 Dropbox：

```
$dirtocopy = '/uploads/output/';
$dropboxdir = '/Public/backupdir/'; 
```

当我运行保管箱代码时，它不会复制*/uploads/output/*并且 error_log 给了我以下信息：

```
PHP Warning:  opendir(/uploads/output/) [<a href='function.opendir'>function.opendir</a>]: failed to open dir: No such file or directory in /home5/../upload.php on line 9 
```

虽然当我更改`$dirtocopy = '/uploads/output/';`为`$dirtocopy = './';`它时，它会复制父目录中的所有文件，但文件夹除外！

我想我的问题在于`$dirtocopy`。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:02:54.700

你只是说你想移动上传的图像，而不是存储在文件夹中的图像（我得到了这个印象）。

您有几种选择，一种是循环遍历 /uploads/input 中的目录名称，在输出文件夹中动态创建一个新目录，然后将文件复制过来。如果需要（听起来是这样），然后将文件复制到 /uploads/input。

但这很复杂，而且您正在处理用户上传的文件。您采取了哪些措施来防止任何安全问题？为什么要同时处理文件夹和图片？

您应该对通过代码提交的内容有 100% 的控制权，以避免不一致并让您自己更轻松地处理此问题。我建议您全面了解您正在尝试做的事情，然后向我们发送包含更多代码的更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:21:05.653

改变

```
$dirtocopy = '/uploads/output/'; 
```

至

```
$dirtocopy = 'uploads/output/'; 
```

它应该工作吗？

# android - 使用 Android 教程方法重新缩放图像

> ID：15441328
> 
> 赞同：2
> 
> 时间：2013-03-15T20:14:10.563
> 
> 标签：android, android-intent, thumbnails, android-camera

我使用本教程作为向我的应用程序添加功能的指南：

**[http://developer.android.com/training/camera/photobasics.html](http://developer.android.com/training/camera/photobasics.html)**

本教程附带的示例不完整，包含一些“错误”。我将错误一词放在引号中，因为主要教程的目的已经涵盖：使用相机。

我专注于从拍摄的大照片中获取缩略图。当您运行该示例时，您会很快注意到，尽管大照片的缩略图已正确存储在指定的目录中，但大多数情况下都不会显示该缩略图。

做了一些工作，我发现了以下“错误”：

1.-图像的路径值经常丢失，因为活动由于内存不足而被破坏。我修复了在 onSaveInstanceState() 方法中存储照片路径的问题。

这样我总是能够访问我的图像，但它仍然没有出现。我继续进行一些测试并发现：

2.- 大多数情况下，当要求图像视图的测量值（宽度和高度）以重新缩放图像时，值是 0。我认为这可能是问题并发现它是因为在查看视图之前无法获得测量值画。所以我用一个处理程序修复了这个问题，并发送了一条延迟消息（1.5''）来执行。现在，测量值总是正确的，但即使缩略图大部分时间都没有显示

所以我认为 Bitmap.decodeFile 方法返回一个空值，尽管所有变量都设置正确。但事实并非如此，它正在返回一个位图。所以男孩和女孩，我知道我无法找到为什么不显示缩略图。

一点帮助将不胜感激。谢谢！

这是重新缩放图像的方法：

```
//Scaling the real size photo to the image view size
private void setImagenPequena()
{
    Log.w("PAth: ", n_path_foto_actual);
     // Get the dimensions of the View
    int targetW = n_iv_foto.getMeasuredWidth();
    int targetH = n_iv_foto.getMeasuredHeight();

    // Get the dimensions of the bitmap
    BitmapFactory.Options bmOptions = new BitmapFactory.Options();
    bmOptions.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(n_path_foto_actual, bmOptions);
    int photoW = bmOptions.outWidth;
    int photoH = bmOptions.outHeight;

    Log.w("setImagenPequena: ", "photoW: " + Integer.toString(photoW));
    Log.w("setImagenPequena: ", "photoH: " + Integer.toString(photoH));
    Log.w("setImagenPequena: ", "targetW: " + Integer.toString(targetW));
    Log.w("setImagenPequena: ", "targetH: " + Integer.toString(targetW));

    if(targetW > 0 && targetH > 0)
    {
    // Determine how much to scale down the image
    int scaleFactor = Math.min(photoW/targetW, photoH/targetH);
    bmOptions.inSampleSize = scaleFactor;
    }
    // Decode the image file into a Bitmap sized to fill the View
    bmOptions.inJustDecodeBounds = false;
    bmOptions.inPurgeable = true;

    Bitmap bitmap = BitmapFactory.decodeFile(n_path_foto_actual, bmOptions);

    if(bitmap == null)
        Log.w("valor bitmap: ", "null");
    else
        Log.w("valor bitmap: ", "!=null");
    n_iv_foto.setImageBitmap(bitmap);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-04T08:31:53.730

我在本教程中也遇到了很多问题，但我最终修复了它。我做了什么 ：

*   改变

> int scaleFactor = 数学。**分钟**（照片宽/目标宽，照片高/目标高）；

经过

> int scaleFactor = 数学。**最大值**（照片宽/目标宽，照片高/目标高）；

是关键。在此之前，我得到的是空白图像而不是图片。

*   我在我的视图中放了一张默认图片。这可能不是一个全面的答案，但我认为无论如何它都能提供更好的用户体验。
*   您可以使用[http://blog-emildesign.rhcloud.com/?p=590](http://blog-emildesign.rhcloud.com/?p=590)来获得一个有效的 decodeSampledBitmapFromFile 示例。
*   否则在这里使用我的一些代码：

    ```
    WindowManager wm = (WindowManager) getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    mWidth = size.x;
    mHeight = size.y;
    ...

    private void setPic() {

            int targetW = mWidth;
            int targetH = mHeight;
            // Get the dimensions of the bitmap
            BitmapFactory.Options bmOptions = new BitmapFactory.Options();
            bmOptions.inJustDecodeBounds = true;

            BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);
            int photoW = bmOptions.outWidth;
            int photoH = bmOptions.outHeight;

            // Determine how much to scale down the image
            int scaleFactor = Math.max(photoW/targetW, photoH/targetH);
            bmOptions.inPreferredConfig = Bitmap.Config.RGB_565;
            // Decode the image file into a Bitmap sized to fill the View
            bmOptions.inJustDecodeBounds = false;
            bmOptions.inSampleSize = scaleFactor;
            bmOptions.inPurgeable = true;

            Bitmap bitmap = BitmapFactory.decodeFile(mCurrentPhotoPath,                 
            bmOptions);
            mImageView.setImageBitmap(bitmap);
    } 
    ```

# wpf - 绘制程序控件和组件？

> ID：15441335
> 
> 赞同：0
> 
> 时间：2013-03-15T20:14:36.223
> 
> 标签：wpf, winforms, components

有哪些组件或 3d 方控件可用于创建类似于 Photoshop 或 ArtRage for WinForms 和 WPF 的基于绘画或画布的程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:32:18.623

您将需要使用 Canvas 控件。[这里](http://wpftutorial.net/Canvas.html)有它的介绍。您也可以使用装饰器和鼠标事件自定义它。

# sql-server - 如何防止 Access 在每个查询中登录和退出？

> ID：15441338
> 
> 赞同：1
> 
> 时间：2013-03-15T20:14:56.587
> 
> 标签：sql-server, ms-access, ms-access-2010, linked-tables

我继承了一个 Access 应用程序，数据在链接表中。实际数据位于 SQL Server 框中。我在 SQL Profiler 中注意到的一件事是 Access 在每次查询时都会连接和断开连接。

我是 Access 的菜鸟，但我猜想提高性能的一种方法是建立一个持久连接。

有没有办法在这个应用程序中做到这一点？还是没有那么简单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:33:54.667

您永远不想拥有持久连接。您总是想连接、获取数据和断开连接。否则，数据库服务器上会有不必要的开销。一切都按原样以最佳方式工作。SQL Server 使用连接池来提高连接性能。

# modelica - 如何在 Dymola/Modelica 的启动路径中添加自定义包？

> ID：15441340
> 
> 赞同：4
> 
> 时间：2013-03-15T20:15:03.500
> 
> 标签：modelica, dymola

我有一个自定义包，我发现自己在 Dymola 模型中重复使用它，我想将此包放在一个公共目录中，该目录在我启动 Dymola 时会自动加载。我目前的策略是在加载我正在处理的模型时加载自定义包，然后保存总计。这并不优雅，因为自定义包的内容最终保存在我硬盘上的多个位置，如果我更改其中一个，更改不会反映在任何地方。我想要一种更强大的方式来将此自定义包分发到我的所有模型。有没有办法告诉 Dymola 每次都自动加载我的自定义包装？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T14:08:11.717

诀窍是将以下几行添加到 c:/Users/USERNAME/AppData/Roaming/Dynasim 中的 settings.mos 中：

```
Utilities.setenv("MODELICAPATH", "C:\Users\USERNAME\Documents\Dymola");
openModel("c:\Users\USERNAME\Documents\Dymola\UserDefined\package.mo") 
```

第一行将目录添加到 Dymola 用于搜索在模型第一次运行之前尚未加载的包的路径中，第二行加载指定的包。这两个命令可能有些多余，但我都这样做是因为除了加载 UserDefined 包之外，我还想确保我的自定义包在路径上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T13:29:14.193

两个建议。首先，您需要将您的包添加到 MODELICAPATH。您必须查阅 Dymola 文档才能准确了解您需要做什么。但通常，这意味着您必须设置一个环境变量，该变量提供`;`要搜索您的包的目录列表（分隔）。现在它将把它放在你的路径中，这样它就可以自动找到它，但在需要它之前它不会加载它。

如果您希望它始终出现在包浏览器中，您可能需要设置一个 .mos 文件（脚本）来加载它。Dymola 具有该功能，但您必须阅读手册以了解必须调用该脚本的内容以及 Dymola 期望在何处找到它。

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-14T12:55:58.370

在 Dymola 2018 -> insert -> dymola.mos 的安装文件夹中，我添加了以下行：

```
Utilities.setenv("MODELICAPATH", "C:\Users\XXXX\Documents\Dymola");
openModel("C:\Users\XXXX\Documents\Dymola\DCOL\package.mo");
openModel(“C:\Users\XXXX\Documents\Dymola\Annex60 1.0.0\package.mo”); 
```

现在我没有得到实用程序语句，因为没有它，DCOL 包可以很好地加载，并且在包菜单中添加的“实用程序”包是无用的。但它并没有打开附件60 包。

我尝试了很多不同的组合，但无法加载多个包。我怀疑文本作品中也添加了“cd”和“Advanced.ParallelizeCode”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-19T13:19:39.593

自 Dymola 2017 FD01 以来，[已接受](https://stackoverflow.com/a/15525868/8725275)的答案不起作用，因为不再使用文件 settings.mos。用户设置存储在 setup.dymx 文件中，位于

```
C:\Users\USERNAME\AppData\Roaming\DassaultSystemes\Dymola 
```

与 setup.mos 文件相比，您不能在 setup.dymx 中包含带有 modelica 脚本的自定义行。

使用 dymola.mos的[答案](https://stackoverflow.com/a/48787785/8725275)仍然有效，但您需要管理员权限才能修改此文件。

这是一个适用于所有 Dyomola 版本的简单解决方案：您可以将 .mos-script 作为第一个参数传递给 dymola.exe。

这可以像这样完成：

*   使用 openModel() 等命令在某处创建一个 .mos 脚本。
*   创建 Dymola.exe 的桌面快捷方式
*   打开快捷方式的属性并在目标文本字段中添加 .mos 脚本的路径。然后它看起来像这样：

`"C:\Program Files\Dymola 2018 FD01\bin64\Dymola.exe" "C:\<some-path>\startup.mos"`

*   使用桌面快捷方式启动 Dymola。该脚本将被执行，最终的错误或消息将显示在“命令”窗口中

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-08T12:18:08.203

另一个建议您不需要将包硬编码到操作系统的环境变量中（对于没有经验的程序员来说可能更安全）：

1.  转到安装 Dymola 的文件夹（例如 C:\Program Files\Dymola 2020）。
2.  在插入文件夹中搜索 Dymola.mos 文件。[“插入”文件夹](https://i.stack.imgur.com/ZnWfb.png)
3.  打开脚本（例如，在记事本++中）
4.  在此处使用 openModel 语句将链接添加到您的 Dymola-library-package.mo 文件，例如**openModel("C:/IDEAS/package.mo");** [Dymola.mos 脚本](https://i.stack.imgur.com/tWF4G.png)
5.  保存脚本。现在，每次打开 Dymola 时，您的库都会自动加载。

# html - 在具有 3 个 div 的容器内居中文本

> ID：15441345
> 
> 赞同：0
> 
> 时间：2013-03-15T20:15:21.500
> 
> 标签：html, css

我有以下 HTML：

```
<div id="Container">

    <input type="button" value="button" id="button1" />

    <div id="text1">
        some text here
    </div>

    <div id="TheButtons">
        <input type="button" value="button" class="MyButtons" id="button2" />
        <input type="button" value="button" class="MyButtons" id="button3" />
        <input type="button" value="button" class="MyButtons" id="button4" />
        <input type="button" value="button" class="MyButtons" id="button5" />
    </div>

</div> 
```

以及以下 CSS：

```
#Container{
    background:red;
    width:500px;
    height:50px;}

#button1{
    margin:7px;
    float:left;}

#text1{
    margin:7px;
    text-align:center;
    float:left;}

#TheButtons{
    float:right;
    margin:7px;}

.MyButtons{
    margin:0px 3px;
    float: left;} 
```

正如您在此处的[**JsFiddle**](http://jsfiddle.net/dX7eF/)中看到的那样，文本向左对齐。右边的按钮对于不同的语言会有不同的文本，所以我不能明确定义第三个 div 的宽度`TheButtons`。如何使文本居中在`button1`和之间`TheButtons`？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:22:30.060

将div 放在 HTML 中的`theButtons`div 之前。`text1`然后删除浮动`text1`并添加`overflow:auto`到您的`Container`div 中。

**[jsFiddle 示例](http://jsfiddle.net/j08691/dX7eF/2/)**

# html - 需要帮助为 CSS3 配置 PIE.htc

> ID：15441346
> 
> 赞同：0
> 
> 时间：2013-03-15T20:15:22.313
> 
> 标签：html, css, css3pie

我发现使用 PIE.htc 将有助于解决 IE7-8 使用框阴影时的问题。

我完全按照他们在官方网站上的解释做了：http: [//css3pie.com/](http://css3pie.com/)

但我无法让它在 IE7 和 IE8 上运行：

这是我的代码：

```
.shadow {
    behavior: url(PIE.htc);
    width: 200px;
    height: 200px;
    border: 1px solid #696;
    text-align: center; 
    -webkit-box-shadow: #666 0px 0px 5px;
    -moz-box-shadow: #666 0px 0px 5px;
    box-shadow: #666 0px 0px 5px;
    background: #EEFF99;
}
<div class="shadow">
    Example
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:22:43.387

只需将您的`PIE.htc`文件放在放置 html 的同一目录中，希望它会起作用。

```
behavior: url(PIE.htc); 
```

根据[文档](http://css3pie.com/documentation/getting-started/)

> 当然，您需要调整路径以匹配您在第 2 步中上传 PIE.htc 的位置。注意：此路径相对于正在查看的 HTML 文件，而不是调用它的 CSS 文件。

参考图像：[Image1](http://i.stack.imgur.com/PMgsj.png) [Image 2](http://i.stack.imgur.com/PTBR4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T12:17:49.553

给 .shadow{ 位置：相对}

为了让 PIE 正常工作，通过 CSS 给它一个位置。

# php - codeigniter 文件上传失败

> ID：15441349
> 
> 赞同：3
> 
> 时间：2013-03-15T20:15:35.060
> 
> 标签：php, upload, codeigniter-2

无法上传文件。`$this->upload->do_upload('anonsphoto');`返回`false`。找不到原因。

我添加了上传库以这种方式自动加载：`$autoload['libraries'] = array('upload');`

这是我的看法：

```
<?php
echo form_open_multipart('InterviewController/saveInterview');

$anons_data = array(
    'name'        => 'anons',
    'id'          => 'anons_area',
    'value'       => 'Введите анонс'
);
echo form_textarea($anons_data); ?>

<p>Картинка анонса</p>
<?php
echo form_upload('anonsphoto'); ?> 
```

这是上传文件的控制器：

```
public function saveInterview() {
    $config['upload_path'] = '/application/upload/';
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size'] = '10000';
    $config['file_name'] = 'img_' . (string) time();
    $this->upload->initialize($config);

    $this->upload->do_upload('anonsphoto');
    return;
} 
```

上传文件是 3 kb 大小的 png 文件。我不明白为什么 do_upload 返回错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:31:41.227

文件上传课程说明了您所需要的一切。[https://www.codeigniter.com/userguide3/libraries/file_uploading.html](https://www.codeigniter.com/userguide3/libraries/file_uploading.html)

这是一个关键：

```
$config['upload_path'] = './uploads/';
$config['allowed_types'] = 'gif|jpg|png';
$config['max_size'] = '100';
$config['max_width'] = '1024';
$config['max_height'] = '768';

$this->load->library('upload', $config);

// Alternately you can set preferences by calling the initialize function. Useful if you auto-load the class:
$this->upload->initialize($config); 
```

“。” （点）表示当前上传路径的目录。因此，您的应用程序无法正常工作，因为您处于未以（点）开头的根路径上。

您的文件夹应具有 0755 的完全权限 (CHMOD)。

这：

```
$config['upload_path'] = './uploads/'; 
```

表示：当前目录和上传目录

或者：

```
$config['upload_path'] = $_SERVER['DOCUMENT_ROOT'].'/application/upload/'; 
```

表示：您的完整文档 URI 路径和`'/application/upload/'`Can 所说的目录。

不要忘记放 (dot) 。`$_SERVER['DOCUMENT_ROOT']`和之间`'/application/upload'`。

最大大小应为 KiB 值：`$config['max_size'] = '10000';`

希望这有助于理解它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:25:40.067

我认为你的上传路径是错误的。尝试使用

```
$config['upload_path'] = $_SERVER['DOCUMENT_ROOT'].'/application/upload/'; 
```

并确保该目录是可写的。

# jsp - 如何在 Sitemesh 3 中使用自定义属性

> ID：15441352
> 
> 赞同：1
> 
> 时间：2013-03-15T20:15:44.390
> 
> 标签：jsp, templates, sitemesh

给定一个由 Sitemesh 3 渲染的简单模板 JSP：

```
<%@include file="../jsp_inc/taglibs.jsp" %>
<!DOCTYPE html>
<head>
    <link rel="stylesheet" type="text/css" href='<c:url value="/css/global.css" />' >
</head>
<body>
<h1>[HEADING]</h1>
<div>
    <sitemesh:write property='body'/>
</div>
</body> 
```

该模板按预期工作，将 JSP 元素的内容插入到模板中。

正如您可能从上面所期望的那样，我希望能够将 JSP 中设置的值（例如 h1 元素）插入到我的模板中的适当元素中。

我试过了：

```
<sitemesh:getProperty property="page.heading"></sitemesh:getProperty> 
```

在模板/装饰器中，并且：

```
<content tag="heading"></content> 
```

在 JSP 中，根据关于 SO 的另一个问题，但我认为这可能是指 Sitemesh 2。我正在使用 Sitemesh 3。

有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-07T05:49:01.440

不确定您是否仍在使用 Sitemesh 3，但我正在检查它并在浏览源代码后发现您已经配置了构建器。

我正在使用[基于 Java 的配置](http://wiki.sitemesh.org/display/sitemesh3/Configuring+SiteMesh+3)并创建了自己的子类，该子类添加了支持 Sitemesh 2 样式内容块的标记处理规则包：

```
public class MySiteMeshFilter extends ConfigurableSiteMeshFilter {
    @Override
    protected void applyCustomConfiguration(SiteMeshFilterBuilder builder) {
        builder.addTagRuleBundle(new Sm2TagRuleBundle());
    }
} 
```

通过 sitemesh3.xml 中的 XML 配置：

```
<sitemesh>
    <content-processor>
        <tag-rule-bundle class="org.sitemesh.content.tagrules.html.Sm2TagRuleBundle" />
    </content-processor>
    <!-- Your mappings go here -->
    <mapping ... />
</sitemesh> 
```

这样做允许您使用内容标签，例如：

```
<content tag="heading"></content> 
```

在装饰器/模板页面中使用不再存在的`sitemesh:write`标签：`sitemesh:getProperty`

```
<sitemesh:write property="page.heading"/> 
```

# asp.net-mvc - 在 JSON 中将 KeyValuePair 序列化为 [Key,Value]

> ID：15441359
> 
> 赞同：2
> 
> 时间：2013-03-15T20:16:14.450
> 
> 标签：asp.net-mvc, json, serialization, keyvaluepair

我需要用这个结构返回 json ：

```
{"asks": [[PRICE, AMOUNT], ...],
 "bids": [[PRICE, AMOUNT], ...]} 
```

`PRICE`是十进制。`AMOUNT`是十进制

例子

```
{"asks":[[7.449,1],[7.4499,6.711]],
 "bids":[[7.40001,5],[7.3325,27.449]]} 
```

我有一个带动作的控制器

```
public ActionResult GetTrades() 
{
  ///how should I construct the object ? 
  return Json(data, JsonRequestBehavior.AllowGet);
} 
```

我试图返回这个对象：

```
public class OrderBook
{
    public List<KeyValuePair<decimal, decimal>> asks { get; set; }
    public List<KeyValuePair<decimal, decimal>> bids { get; set; }
} 
```

但我得到这样的回应：

```
{"asks":[{"Key":145.00000,"Value":152.38820689}],
 "bids":[{"Key":145.00000,"Value":3.48965517}]} 
```

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:24:45.950

替换`KeyValuePair`为 a`List<decimal>`或`decimal[2]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T21:22:53.307

由于您对键和值使用相同的数据类型，因此可能 List 是一种可能性，在您的情况下，每个十进制数组的长度为 2。

# authentication - 使用自定义 AbstractAuthenticationProcessingFilter 和自定义 CustomAuthenticationProvider 的身份验证无法正常工作

> ID：15441361
> 
> 赞同：5
> 
> 时间：2013-03-15T20:16:17.250
> 
> 标签：authentication, spring-security, authorization, saml-2.0

我们使用 spring security 根据来自外部应用程序的一些用户详细信息（如 userid ）对用户进行身份验证，并使用安全上下文持有者执行授权。我们正在使用 AbstractAuthenticationProcessingFilter 的自定义实现和 CustomAuthenticationProvider 的自定义实现，并将我们自己的 UserDetailsS​​erviceImpl 注入提供程序以从数据库中获取用户详细信息。

当单个用户尝试登录时，它可以正常工作，创建身份验证对象并将其正确设置为 SecurityCONtextHolder。但是当另一个用户尝试登录时，旧的身份验证对象会被新的身份验证对象覆盖。看起来没有在每个用户登录时创建新会话。

过滤器和提供者的实现如下 -

```
 public class DefaultAuthenticationProcessingFilter extends
    AbstractAuthenticationProcessingFilter {

private final static Logger logger = LoggerFactory.getLogger(DefaultAuthenticationProcessingFilter.class);

private static final String INTERCEPTOR_PROCESS_URL = "/sso/landingpage.action";

public DefaultAuthenticationProcessingFilter() {
    super(INTERCEPTOR_PROCESS_URL);
}

public DefaultAuthenticationProcessingFilter(
        String defaultFilterProcessesUrl) {
    super(defaultFilterProcessesUrl);
    Assert.notNull(defaultFilterProcessesUrl, "Configuration error :: DefaultFilterProcessesUrl must be specified");
}

/**
 * Method to do authentication of user
 */
@Override
public Authentication attemptAuthentication(HttpServletRequest request,
        HttpServletResponse response) throws AuthenticationException,
        IOException, ServletException {

    logger.info("Authenticating the user .....");

    Authentication authResult = null;
    try {

        String eid = request.getParameter("EID");

        if( StringUtils.isEmpty(eid)) {
             throw new PreAuthenticatedCredentialsNotFoundException("EID param not found in request.");
        }

        String credentials = "NA";
        PreAuthenticatedAuthenticationToken authRequest = new PreAuthenticatedAuthenticationToken(eid, credentials);
        authRequest.setDetails(authenticationDetailsSource.buildDetails(request));
        authResult = getAuthenticationManager().authenticate(authRequest);
    } catch (AuthenticationException e) {
        unsuccessfulAuthentication(request, response, e);
    } 
    return authResult;
}
    }

    protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response,
            Authentication authResult) throws IOException, ServletException {

        if (logger.isDebugEnabled()) {
            logger.debug("Authentication success. Updating SecurityContextHolder to contain: " + authResult);
        }

        SecurityContextHolder.getContext().setAuthentication(authResult);

        getRememberMeServices().loginSuccess(request, response, authResult);

        // Fire event
        if (this.eventPublisher != null) {
            eventPublisher.publishEvent(new InteractiveAuthenticationSuccessEvent(authResult, this.getClass()));
        }

        getSuccessHandler().onAuthenticationSuccess(request, response, authResult);
 }
    } 
```

自定义提供者的实现如下 -

```
 public class CustomAuthenticationProvider implements AuthenticationProvider, InitializingBean {

private final static Logger logger = LoggerFactory.getLogger(CustomAuthenticationProvider.class);

private AuthenticationUserDetailsService<PreAuthenticatedAuthenticationToken> preAuthenticatedUserDetailsService = null;
/**
* 
*/
public Authentication authenticate(Authentication authentication) throws AuthenticationException {

    if (!supports(authentication.getClass())) {
        return null;
    }

    if (logger.isDebugEnabled()) {
        logger.debug("PreAuthenticated authentication request: " + authentication);
    }

    if (authentication.getPrincipal() == null) {
        logger.debug("No pre-authenticated principal found in request.");
        return null;
    }

    UserDetails ud = preAuthenticatedUserDetailsService.loadUserDetails((PreAuthenticatedAuthenticationToken)authentication);

    PreAuthenticatedAuthenticationToken result =
            new PreAuthenticatedAuthenticationToken(ud, authentication.getCredentials(), ud.getAuthorities());
    result.setDetails(authentication.getDetails());

    return result;

}

@Override
public void afterPropertiesSet() throws Exception {
    // TODO Auto-generated method stub
}

@Override
public boolean supports(Class<?> authentication) {
    return PreAuthenticatedAuthenticationToken.class.isAssignableFrom(authentication);
}

/**
 * @return the preAuthenticatedUserDetailsService
 */
public AuthenticationUserDetailsService<PreAuthenticatedAuthenticationToken> getPreAuthenticatedUserDetailsService() {
    return preAuthenticatedUserDetailsService;
}

/**
 * @param preAuthenticatedUserDetailsService the preAuthenticatedUserDetailsService to set
 */
public void setPreAuthenticatedUserDetailsService(
        AuthenticationUserDetailsService<PreAuthenticatedAuthenticationToken> preAuthenticatedUserDetailsService) {
    this.preAuthenticatedUserDetailsService = preAuthenticatedUserDetailsService;
}
} 
```

我们还配置了自定义身份验证成功处理程序，以在身份验证时将用户重定向到适当的 URL -

```
 public class CustomAuthenticationSuccessHandler extends SavedRequestAwareAuthenticationSuccessHandler {

/**
 * redirect user to appropriate home page based on user role
 */
@Override
public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws ServletException, IOException {

    Set<GrantedAuthority> authorities = ((UserDetails)authentication.getPrincipal()).getAuthorities();
    if(CollectionUtils.isNotEmpty(authorities)){
        GrantedAuthority role = getHighestRole(authorities);
        String targetURL = getTargetURL(role);
        if (targetURL != null) {
            log.debug("Redirecting to target Url: " + targetURL);
            getRedirectStrategy().sendRedirect(request, response, targetURL);
            return;
        }
    }

    super.onAuthenticationSuccess(request, response, authentication);

}
  } 
```

弹簧安全配置文件如下 -

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:security="http://www.springframework.org/schema/security"
xsi:schemaLocation="http://www.springframework.org/schema/beans
                       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                       http://www.springframework.org/schema/security
                       http://www.springframework.org/schema/security/spring-security-3.1.xsd">

 <security:http use-expressions="true" auto-config="false" pattern="/sso/*" entry-point-ref="http403ForbiddenEntryPoint" access-denied-page="/accessdenied.action" >
    <security:anonymous enabled="false"/>
    <security:custom-filter position="BASIC_AUTH_FILTER" ref="defaultBasicAuthFilter" />
    <security:expression-handler ref="expressionHandler"/>
</security:http>

<security:http use-expressions="true" auto-config="false" pattern="/rcd/associate/*" entry-point-ref="http403ForbiddenEntryPoint"  access-denied-page="/accessdenied.action">
    <security:intercept-url pattern="/saml/sso/*" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
        <security:custom-filter position="BASIC_AUTH_FILTER" ref="defaultBasicAuthFilter" />
    <security:expression-handler ref="expressionHandler"/>
</security:http>

<bean id="http403ForbiddenEntryPoint"
    class="org.springframework.security.web.authentication.Http403ForbiddenEntryPoint" />

<bean id="expressionHandler" class="org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler">
     <property name="permissionEvaluator" ref="customPermissionEvaluator" /> 
</bean>

<bean id="defaultBasicAuthFilter"
    class="com.example.security.authentication.DefaultAuthenticationProcessingFilter">
    <property name="authenticationManager" ref="authenticationManager" />
    <property name="authenticationSuccessHandler" ref="successRedirectHandler"/>
    <property name="AuthenticationFailureHandler" ref="failureHandler"></property>
</bean>

<bean id="authProvider"
class="com.example.security.authentication.CustomAuthenticationProvider">
    <property name="preAuthenticatedUserDetailsService">
        <bean id="userDetailsServiceWrapper"
            class="org.springframework.security.core.userdetails.UserDetailsByNameServiceWrapper">
            <property name="userDetailsService" ref="userDetailsService" />
        </bean>
    </property>
</bean>

<security:authentication-manager alias="authenticationManager">
    <security:authentication-provider
        ref="authProvider" />
</security:authentication-manager>

<bean id="userDetailsService" class="com.example.security.authorization.UserDetailsServiceImpl" />

 <bean id="successRedirectHandler"
      class="com.example.security.authentication.CustomAuthenticationSuccessHandler">
        <property name="defaultTargetUrl" value="/user1/user1LandingPage.action"/>
     </bean>

<bean id="failureHandler"
      class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
    <property name="defaultFailureUrl" value="/accessdenied.action"/>
</bean> 
```

我们还配置了 web.xml

```
<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring/spring-app-context.xml <!-- ,/WEB-INF/spring/security.xml -->
    </param-value>
</context-param>

<servlet>
    <servlet-name>example-dispatcher-servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/mvc.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<!-- Map all /example*.action requests to the example-dispatcher-servlet for handling -->
<servlet-mapping>
    <servlet-name>example-dispatcher-servlet</servlet-name>
    <url-pattern>*.action</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>/rcd/pages/index.jsp</welcome-file>
</welcome-file-list>

<listener>
    <listener-class>com.example.HttpSessionListenerImpl</listener-class>
</listener>

<!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
  <filter-name>springSecurityFilterChain</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping>
</web-app> 
```

我们正在使用 spring 3.1.3 和 spring security 3.1.3 在每个用户登录时应该创建新的会话并相应地设置安全上下文。但它发生在我的情况下。我检查了调试我的应用程序，发现用户登录时没有创建新会话。可能是我在某个地方想念它。我在任何地方都找不到任何相关的解决方案。

在这方面的任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-13T13:14:37.123

对不起，伙计们，虽然我当时和那个时候本身已经解决了这个问题，但我很长时间没有看这个问题 -

我在元素中使用了 securityContextPersistenceFilter 并配置如下 -

```
<security:http>
 <security:custom-filter before="SECURITY_CONTEXT_FILTER" ref="securityContextPersistenceFilter"/> 
```

……

```
<bean id="securityContextPersistenceFilter" class="org.springframework.security.web.context.SecurityContextPersistenceFilter">
    <property name="forceEagerSessionCreation" value="true"></property>
     <property name="securityContextRepository" ref="httpSessionSecurityContextRepository"/>
</bean>

<bean id="httpSessionSecurityContextRepository" class="org.springframework.security.web.context.HttpSessionSecurityContextRepository">
 <property name="allowSessionCreation" value="false" />
</bean> 
```

# html - 设置视频的尺寸

> ID：15441366
> 
> 赞同：0
> 
> 时间：2013-03-15T20:16:31.507
> 
> 标签：html, google-chrome, html5-video

我正在创建这个网站，旨在向用户展示各种游戏的视频，但我偶然发现了一个问题。现在这是我真的无法解决的问题，我搜索了互联网，但没有成功......如果我要设置视频元素的宽度和高度，它并不总是这样电影/视频的尺寸将是相同的。所以我只输入了它的宽度，并希望高度能够自行修复，它确实做到了。但是，在我的页面上进行更多编辑后，高度不是以前的值。它现在已更改为宽度的像素。我试图删除所有可能导致它的最近操作，我什至删除了其他可以做到这一点的东西，但没有成功。我也在 IE 上尝试过这个，它和之前在我之前的网络浏览器 Chrome 上一样完美地运行。所以为什么' 是吗？我该如何解决这个问题？我也试过清除缓存并重新启动我的电脑，但没有结果......

正常：
......
视频
............

现在在 Chrome 中是什么样的（“||”是由视频元素创建的空闲空间）：
||||||||||||||
......
视频
............
|||||||||||||||

HTML（使用 PHP）：

```
<video poster="dasdsadsakaslmklda.jpg" id="video_video_video" controls>
                              <source src="videos/'.$id.'.mp4" type="video/mp4">
                            Your browser does not support the video tag.
                            </video> 
```

CSS：

```
.video_video video{
    width:294px;
    /*height:390px;*/
} 
```

**编辑：** 当它加载时，一切都应该是......但是，即使我已经删除了所有最近的代码，它仍然会在页面完成加载后呈现相同的错误方式。我怎么知道这个？好吧，我添加了用于更改尺寸的 Js 和 JQuery 代码，然后它完美地工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:28:28.800

会不会只是笔误？

在 CSS 中，与 id (video_video_video) 相比，有一个空格而不是下划线 (video_video video)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T00:15:34.403

It may have been something with the cache, however it did not work at first after clearing my cache. After a couple of reboots it finally worked again.

# ruby-on-rails - 表格标签不显示

> ID：15441369
> 
> 赞同：0
> 
> 时间：2013-03-15T20:16:46.000
> 
> 标签：ruby-on-rails, ruby

我是 ruby​​ on rails 的新手，实际上我读了一本入门书！问题是有一个示例如何使用 new.html.erb 中的表单在数据库中创建新的条目所以示例如下

```
<% @title = "neu" %>
 <h2>Neuen Favorit erstellen</h2>
<% form_for :bookmark, :url => {:action => "create"} do |f| %>
<p>
 <label for="bookmark_title">Titel</label>
<%= f.text_field :title %>
</p>
<p>
<label for="bookmark_url">URL</label>
<%= f.text_field :url %>
 </p>
<p>
 <label for="bookmark_comment">Kommentar</label>
<%= f.text_area :comment %>
</p>
 <p>
 <%= submit_tag "speichern" %>
 </p>
 <% end %>
<p><%= link_to "Zurück zur Liste", :action => "index" %></p> 
```

不知何故，只有标题、`<h2>`和最后一个`<p>`显示在浏览器中！没有任何形式显示！感谢帮助！来自德国的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:18:20.073

改变：

`<% form_for`

到

`<%= form_for`

此外，正如 Ryan 所说，用于`f.label`使您的代码更清洁，如下所示：

`<%= f.label :url, "URL" %>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:20:21.590

您应该使用 <%=，而不是 <%，来开始所有行，除了您要结束表单的位置。一个例子：

```
<%= form_for @order_item do |f| %>
  <div class="field">
<%= f.select(:product_id, options_for_select(Product.all.collect {|p| ["#{p.color} - 
     #{p.size}", p.id ] })) %>
  </div>
  <div class="field">
<%= f.label :quantity %>
<%= f.number_field :quantity %>
  </div>
  <div class="actions">
<%= f.submit "Add to Cart" %>
   </div>
<% end %> 
```

# azure-sql-database - 创建 Azure SQL 联合将 INT/LONGINT 的最后一位分片？

> ID：15441371
> 
> 赞同：0
> 
> 时间：2013-03-15T20:16:47.757
> 
> 标签：azure-sql-database, federation, federated-table

假设一个表有一个类型为or的主键 ( `CustId`) 。我们想根据是奇数还是偶数将该表分片成一个联合表。IE`int``longint``OrderId`

联合“主键”= `(Fed_key, CustId)`where`OrderId`是类型`int`或=如果 CustId==偶数，`longint`如果CustId==奇数。`Fed_key``0``1`

例如：

```
CustId = 1234 => Federated 'primary key' = (0,1234) 

CustId = 6789 => Federated 'primary key' = (1,6789) 
```

这基本上给了我们 2 个联邦成员（又名分区）。稍后我们可能会将 Fed_key 分组为 (1,3,5)、(2,4,6) 和 (7,8,9,0) 以用于其他分区。我们认为我们不需要超过 5 个分区。

***问题***：如何将上述逻辑表达到 Azure SQL？我想这需要在联合创建或联合表创建期间完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:16:50.073

来自文档（[链接](http://msdn.microsoft.com/en-us/library/windowsazure/hh597469.aspx)）：

> 联合列不能是持久或非持久计算列。

另外，假设一个客户有多个订单，你真的要查询x个联盟成员来得到所有订单吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:26:06.087

首先，我们从 INT/LONGINT 身份转到非分片主键的 GUID/唯一标识符。GUID 在应用程序层中创建。在应用程序层本身中，我们选择 guid 的最后一个半字节并确定 partitionId。

现在`PartitionId, CustId`是联邦范围的主键，应用程序在任何事务期间将其呈现给数据库层。这已经过测试可以工作。

# javascript - 用于书签的 Google Analytics

> ID：15441373
> 
> 赞同：2
> 
> 时间：2013-03-15T20:16:51.833
> 
> 标签：javascript, google-analytics, bookmarklet, google-analytics-api

我制作了一个书签，我想使用 Google Analytics 来跟踪它的使用情况。我该怎么做？我发现 Remy Sharp 的一篇旧帖子可以满足我的需求，但我不确定它是否过时。[http://remysharp.com/2009/02/27/analytics-for-bookmarklets-injected-scripts/](http://remysharp.com/2009/02/27/analytics-for-bookmarklets-injected-scripts/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T02:19:32.047

您可能需要更新脚本以指向 GA 最新的请求 URL 格式，但原则上还是可以的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:52:08.210

我最终做了以下事情

```
(function() {
 //loading ga.js - not greatest idea, but can't rely on page having ga.js already
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);

 //made a "cool_name" to be able to sort in GA and added domain URL/URI      
    var url = "/cool_name/" + location.host + location.pathname;

 //used "anotherGA" as a 'namespace' to not screw up the real GA for that domain
    _gaq.push(['anotherGA._setAccount', 'UA-XXXXXX-XX']);
    _gaq.push(['anotherGA._setDomainName']);//not sure if i need this
    _gaq.push(['anotherGA._trackPageview', url]);
})(); 
```

请参阅：[https](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApi_gaq) ://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApi_gaq （朝向页面底部）

老实说，我不知道这是否是一种反模式和对 API 的滥用，但它似乎有效。

# c# - 替换 UNC 路径中的 ServerName

> ID：15441376
> 
> 赞同：0
> 
> 时间：2013-03-15T20:17:05.467
> 
> 标签：c#, unc, replace

我想编写一种方法来换出 UNC 路径中的服务器名称。所以如果我有`"\\server1\folder\child"`我想换`"\\server2\folder\child"`。.net 处理反斜杠（正则表达式、Path.Combine）的各种尝试都遇到了锯齿状的边缘。我不会在运行时知道“server1”的名称。

这是我在 LinqPad 中测试的一个片段，虽然它看起来很 hacky：

```
string path = @"\\server1\folder\child";

var uri = new Uri(path);

string newPath = @"\\server2\";

foreach (var part in uri.Segments)
{
 if (part == "/")
     continue;

 newPath += part;
}

var x = new Uri(newPath);

uri.Dump();

x.LocalPath.Dump(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:26:05.700

你走在正确的道路上（没有双关语）

快速编辑您的代码留下以下内容：

```
string path = @"\\server1\folder\child";

var uri = new Uri(path);

string newPath = @"\\server2" + uri.AbsolutePath.Replace('/', '\\');

var x = new Uri(newPath); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:28:33.900

试试这个使用`string.Format`方法；

```
string path = @"\\server1\folder\child";
string server = "server2";
string newPath = string.Format(@"\{0}\{1}" + server + @"\{3}\{4}", 
                               path.Split('\\')); 
```

或者这个使用`Substring`和`IndexOf`方法；

```
string s = @"\\server1\folder\child";
string server = @"\\server2";
string s2 = server + s.Substring( s.Substring(2).IndexOf(@"\")+2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:30:04.963

我不确定您使用`Regex`es 尝试了什么，但我认为这基本上应该可以满足您的需求：

```
var path = @"\\server1\folder\child";
var replaced = Regex.Replace(path, @"\\\\[A-Za-z0-9]*\\", @"\\server2\"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T20:30:54.263

```
string ReplaceServer(string path, string newServer)
    {
        return path.Replace(path.Split('\\')[2], newServer);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T20:50:05.760

并证明有一千种不同的方法可以给猫剥皮：

```
string oldPath = "\\testserver1\\folder\\child";    
string newServer ="testserver2";
var subPath = oldPath.Split(new []{'\\'},StringSplitOptions.RemoveEmptyEntries)
    .Skip(1)
    .Take(Int32.MaxValue)
    .ToList();
subPath.Insert(0,newServer);
var newPath = Path.Combine(subPath.ToArray());
newPath = @"\\"+newPath;
newPath.Dump(); 
```

# python - 我需要帮助从字典列表中提取特定数据

> ID：15441377
> 
> 赞同：0
> 
> 时间：2013-03-15T20:17:05.543
> 
> 标签：python, list, dictionary, text-files

我有一个文本文件，其中列出了一组员工的姓名、身份证号、性别和工作年限。第一行包含员工人数。它被称为employees.txt。这里是：

7

约翰

能源部

33

272838

米

玛丽

约翰逊

38

3849383

F

奥派

狗

6

839293

米

小姐

狗

4

238392

F

约翰

布拉

28

834282

米

阿米莉亚

斯宾

2

5789812

F

谢恩

卡森斯蒂恩

2

567891

米

* * *

我想将这些信息组织成一个字典列表，然后找到所有女性员工并打印出她们的名字和姓氏。我可以让字典列表工作，但是当我尝试查找并打印出女性员工的姓名时出现错误。这是我的代码：

```
def employee_write(file):
    employee_dict = {}
    employee_dict["First"] = file.readline().strip()
    employee_dict["Last"] = file.readline().strip()
    employee_dict["Experience"] = file.readline().strip()
    employee_dict["ID"] = file.readline().strip()
    employee_dict["Gender"] = file.readline().strip()
    return employee_dict

def female_print(x2):
    for term in x2:
        for word in employee_dict:
            if employee_dict["Gender"] == "F":
                print(employee_dict["First"])
                print(employee_dict["Last"])

def main():
    file = open("employees.txt", "r")
    n = int(file.readline())
    x1 = employee_write(file)
    employee_list = []
    for i in range(n):
        employee_list.append(x1)
        x2 = employee_list
    print(x2)
    female_print(x2)

main() 
```

我的错误是什么？female_print() 函数不起作用，因为它表示未定义名称“employee_dict”。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:31:10.673

我很难理解你的变量命名和用法，所以我简化了一点：

```
def employee_write(file):
    employee_dict = {}
    employee_dict["First"] = file.readline().strip()
    employee_dict["Last"] = file.readline().strip()
    employee_dict["Experience"] = file.readline().strip()
    employee_dict["ID"] = file.readline().strip()
    employee_dict["Gender"] = file.readline().strip()
    return employee_dict

def female_print(employee_list):
    for employee in employee_list:
        if employee["Gender"] == "F":
            print(employee["First"])
            print(employee["Last"])

def main():
    file = open("employees.txt", "r")
    n = int(file.readline())
    employee_list = []
    for i in range(n):
        employee_list.append(employee_write(file))
    print(employee_list)
    female_print(employee_list)

main() 
```

产生

```
[{'Gender': 'M', 'Last': 'Doe', 'ID': '272838', 'Experience': '33', 'First': 'John'}, {'Gender': 'F', 'Last': 'Johnson', 'ID': '3849383', 'Experience': '38', 'First': 'Mary'}, {'Gender': 'M', 'Last': 'Dog', 'ID': '839293', 'Experience': '6', 'First': 'Opie'}, {'Gender': 'F', 'Last': 'Dog', 'ID': '238392', 'Experience': '4', 'First': 'Missy'}, {'Gender': 'M', 'Last': 'Bla', 'ID': '834282', 'Experience': '28', 'First': 'John'}, {'Gender': 'F', 'Last': 'Spien', 'ID': '5789812', 'Experience': '2', 'First': 'Amelia'}, {'Gender': 'M', 'Last': 'CasenStien', 'ID': '567891', 'Experience': '2', 'First': 'Shane'}]
Mary
Johnson
Missy
Dog
Amelia
Spin 
```

那是你要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:43:40.527

在`main`中，函数`employee_write`, （可能应该被调用`employee_read`）只被调用*一次*。

尝试这样的事情：

```
In [1]: with open('employees.txt', 'r') as ef:
    txt = ef.read()
   ...:     

In [2]: lines = txt.split()

In [3]: records = [lines[i:i+5] for i in xrange(1, len(lines), 5)]

In [4]: records
Out[4]: [['John', 'Doe', '33', '272838', 'M'], ['Mary', 'Johnson', '38', '3849383', 'F'], ['Opie', 'Dog', '6', '839293', 'M'], ['Missy', 'Dog', '4', '238392', 'F'], ['John', 'Bla', '28', '834282', 'M'], ['Amelia', 'Spien', '2', '5789812', 'F'], ['Shane', 'CasenStien', '2', '567891', 'M']]

In []: for r in records:
    print r
   ....:     
['John', 'Doe', '33', '272838', 'M']
['Mary', 'Johnson', '38', '3849383', 'F']
['Opie', 'Dog', '6', '839293', 'M']
['Missy', 'Dog', '4', '238392', 'F']
['John', 'Bla', '28', '834282', 'M']
['Amelia', 'Spien', '2', '5789812', 'F']
['Shane', 'CasenStien', '2', '567891', 'M'] 
```

注意：此代码*假定*输入文件的格式正确！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:34:58.020

您在这里有两个（主要）问题。一方面，您实际上并没有阅读整个文件。您正在读取第一条记录（作为 x1），然后将该记录附加到列表中 N 次。您可以从印刷品中看到您只获得了一条记录。

此外，您的 print_female 函数引用了一个不存在的变量“employee_dict”——您可能需要在某处定义它。也许您的意思是使用“术语”？这会引发堆栈跟踪。

如果你解决了这两个问题，你的代码的基本前提是健全的。

# html - 从 div 标签中删除样式 css

> ID：15441383
> 
> 赞同：-5
> 
> 时间：2013-03-15T20:17:27.633
> 
> 标签：html, css

除了使用样式标签参数将宽度硬编码到 div 标签中，我如何更改以下内容，以便我可以使用 css 文件来更改宽度。我不能尝试它，因为我在我的牢房中几乎不知道在哪里，但我会提供以下工作吗？如果没有，有人可以就更正提出建议！

目前：

```
<div class="test_ml" style="width:936px"></div>
<div class="test_mr" style="width:912px"></div>
<div class="test_mm" style="width:912px"></div> 
```

将以下工作？

CSS 文件：

```
div.test_ml { width:936;}
div.test_mr { width:912;}
div.test_mm { width:912;} 
```

HTML 文件：

```
<div class="test_ml"></div>
<div class="test_mr"></div>
<div class="test_mm"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:22:58.417

是的，它会

这是[jsfiddle](http://jsfiddle.net/hfBg3/1/)

```
<div style="width:936px;border:1px solid red">a</div> 
```

是一样的有

```
<div class="test_mlx">a</div>
div.test_ml {
    width:936px;border:1px solid red
} 
```

警告，用户 DavidTomas 提出了一个观点：

> 您的宽度需要单位（无论是像素 (px)、em、点 (pt) 还是其他任何单位）。——大卫·托马斯

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T20:34:09.940

正如@David Thomas 之前所说，您应该在数量之后添加单位类型。

例如：

```
div.test_ml { width:936px;} 
```

顺便说一句，我建议您使用能够自动更正和自动填充代码的软件，这将使您的生活更轻松、更短。

# c# - C# XML 序列化每个元素的属性

> ID：15441384
> 
> 赞同：0
> 
> 时间：2013-03-15T20:17:29.133
> 
> 标签：c#, xml

我想创建以下 xml：

```
 <StartLot>
      <fileCreationDate level="7">201301132210</fileCreationDate>
      <fmtVersion level="7">3.0</fmtVersion>
 </StartLot> 
```

下面是序列化代码：

```
[Serializable]
class StartLot
{
    public fileCreationDate{get; set;}

    [XmlAttribute("level")] 
    public string level = "7";

    public fmtVersion{get; set;}

    [XmlAttribute("level")] 
    public string level = "7"; ??
} 
```

由于我已经声明了属性级别，如何添加最后一个属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:25:29.130

您可以使用包装类来存储这两个值，如下例所示：

```
public class StackOverflow_15441384
{
    const string XML = @"<StartLot>
                               <fileCreationDate level=""7"">201301132210</fileCreationDate>
                               <fmtVersion level=""7"">3.0</fmtVersion>
                            </StartLot>";
    public class StartLot
    {
        [XmlElement("fileCreationDate")]
        public LevelAndValue FileCreationDate { get; set; }
        [XmlElement("fmtVersion")]
        public LevelAndValue FmtVersion { get; set; }
    }
    public class LevelAndValue
    {
        [XmlAttribute("level")]
        public string Level { get; set; }
        [XmlText]
        public string Value { get; set; }
    }
    public static void Test()
    {
        XmlSerializer xs = new XmlSerializer(typeof(StartLot));
        StartLot sl = (StartLot)xs.Deserialize(new MemoryStream(Encoding.UTF8.GetBytes(XML)));
        Console.WriteLine("FCD.L = {0}", sl.FileCreationDate.Level);
        Console.WriteLine("FCD.V = {0}", sl.FileCreationDate.Value);
        Console.WriteLine("FV.L = {0}", sl.FmtVersion.Level);
        Console.WriteLine("FV.V = {0}", sl.FmtVersion.Value);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:26:18.900

我总是觉得`Linq To Xml`更容易使用

```
var xDoc = XDocument.Parse(xml); /* XDocument.Load(filename); */

var items = xDoc.Root.Descendants()
                .Select(e => new
                {
                    Name = e.Name.LocalName,
                    Level = e.Attribute("level").Value,
                    Value = e.Value
                })
                .ToList(); 
```

# javascript - 奇怪的错误，但在 javascript onkeydown

> ID：15441389
> 
> 赞同：3
> 
> 时间：2013-03-15T20:18:02.900
> 
> 标签：javascript, html, onkeydown

我有这个脚本工作，但它允许字母并且不允许键盘顶部的数字，但由于某种原因它允许数字键盘。我怎么做，所以它只允许小写字母？

```
function isAlphaKey(evt){
    var charCode = (evt.which) ? evt.which : event.keyCode;
     if ((charCode==231 || charCode==199) || (charCode==241 || charCode==209) ||(charCode==8 || charCode==32) || ( (charCode >= 65 && charCode <= 90) || (charCode >= 97 && charCode <= 122) ) ) {
        return true;
     }
     else {
         return false;
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:23:13.860

修改后的代码，只允许 231、199、241、209、8、32 及小写字符

```
var allowedNumber = [231, 199, 241, 209, 8, 32];
function isAlphaKey(evt){
    var charCode = (evt.which) ? evt.which : event.keyCode;
     if ( allowedNumber.indexOf(charCode) != -1 || ( charCode >= 97 && charCode <= 122) ) {
        return true;
     }
     else {
         return false;
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:29:02.417

检查 ascii 编号使用控制台日志（键事件）查看正确小键盘中的这些数字是什么，并在您的条件语句中删除它们

# delphi - 将 Tidhttp 与 Twebbrowser 一起使用

> ID：15441390
> 
> 赞同：5
> 
> 时间：2013-03-15T20:18:02.977
> 
> 标签：delphi, internet-explorer, activex, indy, twebbrowser

我正在使用 tidhttp 控件来加快 Twebbrowser 中网页的加载速度。导航到 url 很慢，所以这就是我不使用它的原因（`WebBrowser1.Navigate('some_url_here')`）。这是我的做法：

```
procedure TForm1.Button2Click(Sender: TObject);
  procedure LoadHtmlIntoBrowser(var WB: TweBbrowser; const HTMLString: string);
  var
    v: OleVariant;
    HTMLDocument: IHTMLDocument2;
  begin
    WB.Navigate('about:blank');
    while WB.ReadyState < READYSTATE_INTERACTIVE do
      forms.Application.ProcessMessages;

    if Assigned(WB.Document) then
    begin
      HTMLDocument := WB.Document as IHTMLDocument2;
      v := VarArrayCreate([0, 0], varVariant);
      v[0] := HTMLString;
      HTMLDocument.Write(PSafeArray(TVarData(v).VArray));
      HTMLDocument.Close;
    end;
    forms.Application.ProcessMessages;
  end;

var
  str:string;
begin
  str:=idhttp1.Get('http://localhost/myhome.html');
  LoadHtmlIntoBrowser(WebBrowser1,str);
end; 
```

我使用 将`idHTTP`html 内容转换为字符串，然后将该字符串直接写入 Webbrowser。我有一个本地网络服务器设置（XAMPP）。我遇到的问题是，在将 html 内容写入浏览器并单击显示的链接后，它没有去哪里，即它显示一个大部分空白的页面，顶部带有“twopage.html”。当我右键单击并“查看源代码”时，我得到`"<html>twopage.html</html>"`了这很奇怪，而不是页面的实际 html。

“myhome.html”文件包含

```
<html>
  <head></head>
  <body><h1>My home</h1><a href="twopage.html"></a></body>
</html> 
```

`The other webpage, "twopage.html" contains`

```
<html>
  <head></head>
  <body><h1>Another Webpage</h1></body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T04:04:12.010

在将 HTML 加载到 Web 浏览器之前，您需要`<base>`在 HTML 中插入一个标记，以便在解析相对 url 时它有一个可用的基本 url。

# php - 在 Phing 中运行 Composer 安装的任务

> ID：15441392
> 
> 赞同：2
> 
> 时间：2013-03-15T20:18:03.513
> 
> 标签：php, composer-php, phing

我有一个 PHP 应用程序正在使用 Composer 安装它的依赖项。Composer 将二进制文件放在 bin 文件夹中。我想使用 Phing 对我的代码执行一些测试，但 Phing 没有找到安装在 {basedir}/bin/ 中的应用程序。

例如，这有效：

```
 <exec command="./bin/phpcs --standard=zend ." passthru="true"></exec> 
```

但这失败了：

```
 <phpcodesniffer standard="ZEND" /> 
```

Phing 错误消息基本上说没有安装 phpcs。当使用 phpcodesniffer 的内置任务（其输出比上面的 exec 示例更好）时，如何告诉 Phing 从 bin 目录运行二进制文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:16:01.040

我回答了我自己的问题。我只需要在上面的 phpcodesniffer 行上方添加它：

```
<exec command="export PATH=./bin:$PATH" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-10T21:34:23.057

如果有人想知道，还可以将 Composer 的自动加载添加到 Phing 的自动加载例程中。像下一行

```
<autoloader autoloaderpath="${project.basedir}/vendor/autoload.php"/> 
```

这将允许 Phing “看到” composer 提供的所有依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-02T21:25:09.887

您还可以使用该[`includepath`](https://www.phing.info/phing/guide/en/output/hlhtml/#IncludePathTask)任务在（默认情况下）添加到 include_path 的路径，类似于`export PATH=./bin:$PATH`

```
<includepath classpath="./bin" /> 
```

# java - 随机 (?) ElementNotVisibleException

> ID：15441393
> 
> 赞同：1
> 
> 时间：2013-03-15T20:18:03.917
> 
> 标签：java, selenium, junit, selenium-webdriver

我已经查看了涵盖该主题的其他一些问题，但我在任何地方都没有看到这个特定问题。我有一个点击 Web 元素的测试。我尝试通过 ID 和 XPath 引用它，并等待它使用`wait.until()`.

有时它似乎工作正常，但其他时候我得到`ElementNotVisibleException`. （实际上，由于我添加了`wait.until()`，我得到了`TimeoutException`，但如果我删除了它，它会抛出`ElementNotVisibleException`。）也就是说，我可以运行一次测试，它将能够单击元素并继续完成。其他时候，我得到了例外。问题不在于我是否得到一个异常，问题是有时会得到异常，但有时能够毫无例外地引用元素。

我没有做出任何我知道的更改。该页面似乎每次都能快速正确地加载。我知道没有服务器问题。大约一半的时间它抛出异常，另一半它可以毫无问题地引用元素。

这可能是底层网站代码的问题，而不是 Selenium？我已经手动检查了计算的 CSS 值，它们似乎表明该元素应该是可见的。

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-03-16T05:17:10.567

主要问题是加载页面。如果页面加载延迟，则在引发异常时找不到 Web 元素。

要解决上述问题，请使用

```
Thread.sleep(milliseconds); method. 
```

# entity-framework-5 - 通过接口使用 DataContext 时如何使用实体框架执行本机 SQL

> ID：15441398
> 
> 赞同：0
> 
> 时间：2013-03-15T20:18:14.093
> 
> 标签：entity-framework-5

**设置**

好的，所以我有一个遵循 Onion 架构方法的应用程序，即：

前端参考 > 服务和域

服务参考 > 领域和数据

数据参考 > 域

领域参考 > 没有

我使用的是最新版本的 EF，我也使用 Unity 作为我的 IOC。

**问题**

我的应用程序的服务层通过接口访问数据层中的 DataContext。

```
public class TestService : ITestService
{
    private readonly IDataContext _context;

    public TestService(IDataContext context)
    {
         _context = context;
    }

    public BaseResponse SomeServiceCall(BaseRequest request)
    {
           _context.Database.ExecuteSqlCommand("SELECT * FROM test");
    }
}

 public class DataContext : DbContext, IDataContext
 {
    public DataContext() :
        base("DefaultConnection")
    {
          Database.SetInitializer<DataContext>(null);
    }

   public DataContext(string connection) :
        base(connection)
    {
        Database.SetInitializer<DataContext>(null);
    }

    public Database Database { get; set; }

    Public IDBContext<Test> Tests {get;set;}
}

 public interface IDataContext
 {
      Database Database { get; set; }

      IDBContext<Test> Tests {get;set;}
 } 
```

我必须公开 Database 对象才能访问 ExecuteSQL 方法。但是现在当我在我的服务中运行它时，数据库对象返回一个空引用异常，我不知道如何初始化它。任何帮助将不胜感激！

乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:23:11.767

您不初始化`Database`对象。它由上下文自动初始化 - 如果您的代码使用真实的上下文。顺便提一句。您不需要公开数据库。您可以在上下文接口上公开一个方法，并将数据库访问包装在派生上下文的实现中。

# ruby-on-rails-3 - 使用具有嵌套关联的多态路径创建新项目

> ID：15441401
> 
> 赞同：0
> 
> 时间：2013-03-15T20:18:23.873
> 
> 标签：ruby-on-rails-3, cancan, nested-routes

我希望能够分别为这两个模型撰写评论（使用具有嵌套关联的多态路径）。目前，我有一个问题，如果我想为城市写评论，那么记录是为国家创建的，而不是为城市创建的

* * *

```
http://localhost:3000/countries/1/reviews/new 
```

为国家创造了良好的概述，

```
=> #<Review id: 1, content: "", reviewable_id: 1, reviewable_type: "Country", created_at: "2013-03-15 18:57:15", updated_at: "2013-03-15 18:57:15"> 
```

但：

```
http://localhost:3000/countries/1/cities/1/reviews/new 
```

再次为国家创建审查，而不是为城市创建

```
=> [#<Review id: 2, content: "second", reviewable_id: 1, reviewable_type: "Country", created_at: "2013-03-15 19:00:34", updated_at: "2013-03-15 19:00:34">] 
```

请告诉我，如何使用带有嵌套关联的多态路径为城市创建评论？

* * *

我的路线.rb：

```
 resources :countries do
    resources :reviews
    resources :cities do
      resources :reviews
    end
  end 
```

审查控制人

```
class ReviewsController < ApplicationController
  load_resource :country
  load_resource :city
  load_and_authorize_resource :review, :through => [:country, :city]

  def new; end

  def create
    respond_to do |format|
      if @review.save
        format.html { redirect_to @review, notice: 'Review was successfully created.' }
        format.json { render json: @review, status: :created, location: @review }
      else
        format.html { render action: "new" }
        format.json { render json: @review.errors, status: :unprocessable_entity }
      end
    end
  end

  ....
end 
```

评论索引

```
%h1 Listing reviews
= link_to 'New Review', new_polymorphic_path([@country, @city, :review]) if can? :new, Review 
```

和形式

```
= form_for(@review, url: polymorphic_path([@country, @city, @review])) do |f|

  .field
    = f.label :content
    %br/
    = f.text_area :content
  .actions
    = f.submit 
```

提前致谢！

# r - 使用R计算纵向数据集的导数（即一个变量的变化基于另一个变量的变化）

> ID：15441405
> 
> 赞同：2
> 
> 时间：2013-03-15T20:18:53.920
> 
> 标签：r

我正在处理一个包含时间序列数据的大型数据集（约 100 万个 obs）。换句话说，我的数据集`id`每天都包含对唯一标识符 ( ) 的多次观察（为了提供一个简单的示例，它只是一个整数值）。例如，我的数据可能如下所示：

```
id    var    day
1     49     1
1     51     2
1     53     3
1     50     4
2     45     1
2     46     2
2     45     3
2     44     4 
```

现在，我想计算`var`连续几天之间的导数。换句话说，我想计算每个`var`1 和 2 天、2 天和 3 天等之间的变化`id`。因此，生成的数据集将如下所示：

```
id    var    day   deriv
1     49     1     NA
1     51     2     2
1     53     3     2
1     50     4     -3
2     45     1     NA
2     46     2     1
2     45     3     -1
2     44     4     -1 
```

我怀疑有一些非常简单的解决方案使用`melt`我不知道的东西。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:51:34.080

尝试：

```
> dfrm$deriv <- ave(dfrm$var, dfrm$id, FUN=function(v) c(NA, diff(v)) )
> dfrm
  id var day deriv
1  1  49   1    NA
2  1  51   2     2
3  1  53   3     2
4  1  50   4    -3
5  2  45   1    NA
6  2  46   2     1
7  2  45   3    -1
8  2  44   4    -1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:48:09.277

如果`d`是矩阵并且`day`变量是有序的，试试这个：

`do.call("c",lapply(unique(d[,1]),function(x){y <- d[d[,1]==x,];z <- y[2:nrow(y),]-y[1:(nrow(y)-1),]; c(NA,z[,2]/z[,3])}))`

这会给你一个对应于的向量`delta_var`

# ubuntu - 绘制未显示在 OpenModelica 中的变量

> ID：15441408
> 
> 赞同：1
> 
> 时间：2013-03-15T20:19:10.967
> 
> 标签：ubuntu, modelica, openmodelica

今天，在 Ubuntu 12.10 中安装了 OpenModelica，并在模拟中运行了其中一个示例。它第一次工作得很好。然后我关闭了 OpenModelica 编辑器中的 Plotting Variables 窗口，当我再次运行相同的模拟时，该窗口没有列出绘图变量，而是仅显示应存储变量的 .mat 文件的路径。如何恢复默认行为？是否有我可以在某处删除的设置文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:09:46.813

我不确定我首先做了什么导致问题，但是我通过使用命令发现了有问题的配置文件

```
find -iname '*omedit*' 
```

在主目录中，然后

```
rm -rf .config/openmodelica/ 
```

删除有问题的配置目录。反正我没有任何重要的配置信息，所以可以从头开始。问题现已解决，输出变量显示在“绘图变量”窗口中。情节看起来很棒。

# javascript - 用javascript加载文档时如何知道输入的属性

> ID：15441411
> 
> 赞同：-5
> 
> 时间：2013-03-15T20:19:35.390
> 
> 标签：javascript

当文档完成加载时，我真的需要知道输入的属性。例如：

```
<input type="text" data-type="string" />
<input type="text" data-type="string" />
<input type="text" data-type="date" /> 
```

并且应该显示带有警报的javascript

```
you have 2 string data-type and 1 date data-type 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:31:38.660

与jQuery。

```
$.each( $("input") , function(_index, _item){    
    alert($(_item).attr("data-type"));
}); 
```

您现在必须计算并显示您的信息...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:05:25.417

冒着给你太多代码的风险......鉴于你的问题没有被标记`jQuery`纯Javascript实现可能如下：

```
(function(){
    var loader = window.onload;
    window.onload = function(){
        if(typeof loader == 'function') loader();
        var els = document.getElementsByTagName('input'), data = [];
        for(var i=0;i<els.length;i++){
            var type = els[i].getAttribute('data-type') || 'unknown';
            if(typeof data[type] == 'undefined') data[type] = 1;
            else data[type]++;
        }
        var out = '';
        for(var key in data){
            if(out != '') out += 'and '; else out += 'You have ';
            out += data[key] + ' ' + key + ' data-type ';
        }
        alert(out);
    }
})(); 
```

有点令人费解，也许令人困惑 - 但如果您发布任何进一步的问题，请包括**您尝试过**的代码示例并说明您究竟在哪里模糊。

# javascript - 使用 google places api 请求详细信息

> ID：15441421
> 
> 赞同：2
> 
> 时间：2013-03-15T20:20:26.400
> 
> 标签：javascript, google-places-api

我读了很多书，但还是有点糊涂。我正在尝试构建一个应用程序，该应用程序可以在 google 地方获取商业列表并显示“详细信息”，例如地址、评论、图像、位置、描述。

我不想执行搜索，因为我已经知道公司名称和位置（用户不会搜索，而是查看导航到的页面）

我一直在关注这个：[https ://developers.google.com/maps/documentation/javascript/places#place_details_requests](https://developers.google.com/maps/documentation/javascript/places#place_details_requests)

并在此处使用代码表单： [Google Places API - Places detail request undefined](https://stackoverflow.com/questions/9520808/google-places-api-places-detail-request-undefined)

```
function initialize() {
    var pyrmont = new google.maps.LatLng(50.458447,-3.509552);

    map = new google.maps.Map(document.getElementById('map_canvas'), {
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: pyrmont,
      zoom: 15
    });

    var request = {
      location: pyrmont,
      radius: 5000,
      types: ['bar']
    };
    infowindow = new google.maps.InfoWindow();
    service = new google.maps.places.PlacesService(map);
    service.search(request, callback);
  }

  function callback(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
      for (var i = 0; i < results.length; i++) {
        createMarker(results[i]);
      }
    }
  }

  function createMarker(place) {
    var placeLoc = place.geometry.location;
    var marker = new google.maps.Marker({
      map: map,
      position: place.geometry.location
    });

    google.maps.event.addListener(marker, 'click', function() {
      infowindow.setContent(place.name + "<br />" + place.formatted_address +"<br />" + place.website + "<br />" + place.rating + "<br />" + place.formatted_phone_number);
      infowindow.open(map, this);
    });
  } 
```

HTML：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script> 
```

```
</head>
<body>
    <div id="content">

        <div id="map_canvas">
            map
        </div>

    </div>
</body> 
```

执行获取请求并将其打印在特定业务列表的 html 中的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-24T02:52:09.533

我无法帮助您处理 javascript 代码。但我可以告诉你，你需要检查你的业务两次。一次在 Places API 中获取唯一的 PlaceID，然后在 Details API 中第二次（使用 PlaceID）。存储 PlaceID，这样您就无需再次执行第一次查找。评论和时间会随着时间而改变。

# batch-file - 在批处理脚本中替换字符串的字符

> ID：15441422
> 
> 赞同：9
> 
> 时间：2013-03-15T20:20:27.043
> 
> 标签：batch-file

我需要`*`从一个字符串中替换字符，这有点像这样：
`*10.*31.**2.*65`

我想`*`使用批处理脚本从此字符串中删除所有内容。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-09-12T15:58:30.303

您可以将删除过程简化为一行。例如，如果我有这样的字符串：

```
set string=hello! 
```

我想删除“！” 在里面，我可以做到

```
set string=%string:!=% 
```

该字符串现在将具有该值`"hello"`而不是`"hello!"`

**编辑：**正如[jeb 在评论中指出的那样](https://stackoverflow.com/questions/15441422/replace-character-of-string-in-batch-script/25812295#comment63141151_25812295)，您无法`"*"`使用此方法进行替换。这是因为它是批处理文件模式匹配的通配符（[此处](https://stackoverflow.com/a/11685376/3704301)`*`对此进行了精彩的解释）。在发布此答案时我不知道这一点，因为我认为这种替换方法适用于所有输入字符串。如果您特别需要更换，我建议您遵循[magoo 的回答](https://stackoverflow.com/a/15441692/3704301)。否则，我将为那些需要通用、简短、单行解决方案来批量替换字符串的人保留这个答案。`*`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T20:38:44.243

```
@ECHO OFF
SETLOCAL
SET mystring=*10.31.*2.*65
:deaster
FOR /f "tokens=1* delims=*" %%i IN ("%mystring%") DO (
   SET mystring=%%j
   IF DEFINED mystring (
      SET mystring=%%i%%j
      GOTO deaster
   ) ELSE (
      SET mystring=%%i
   )
)
ECHO result=%mystring%= 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T02:18:33.520

您不需要为此编写完整的脚本。你只需要一个`for /f`循环。

```
C:\Users\rojo>set test=*10.*31.**2.*65

C:\Users\rojo>echo %test%
*10.*31.**2.*65

C:\Users\rojo>for /f "tokens=1-4 delims=.^*" %I in ("%test%") do @set test=%I.%J.%K.%L

C:\Users\rojo>echo %test%
10.31.2.65 
```

如果要将`for`循环放入批处理脚本，请使用`%%I`, `%%J`,`%%K`而`%%L`不是单个百分比。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-10T16:43:19.133

所述问题的另一个解决方案是在批处理脚本中使用 PowerShell*替换命令。*

```
set var=*10.*31.*2.*65
echo %var%>var.txt && powershell -command "(get-content var.txt) -replace '[\x2A]+', '' | set-content var.txt"
set /p var=<var.txt
echo %var% 
```

在上面的代码中，第二行

*   将您的字符串写入文本文件
*   调用 PowerShell 命令来获取该文件的内容
*   将 * 字符替换为 null
*   用新值覆盖文本文件

完成后，您将值读回变量中。

为了进一步解释*替换*命令，第一个单引号是您要搜索的内容。我们使用方括号将 * 字符标识为[十六进制字符](http://www.asciitable.com/)（\x2A 是 * 的十六进制值）。在逗号之后，第二组单引号不包含任何值，以便删除搜索的对象。

另一种选择是使用插入符号搜索*除*括号中标识的内容之外的所有内容。这将删除我们希望您保留的所有内容。为此，您可以将第二行替换为：

```
echo %var%>var.txt && powershell -command "(get-content var.txt) -replace '[^\x30-x39\x2E]+', '' | set-content var.txt" 
```

第一组字符 \x-30-x39 标识 0 - 9。\x2E 是句点。

完成文本文件后，输入一行以将其删除。

```
if exist var.txt del var.txt 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-11T15:58:23.623

```
@echo off
setlocal EnableDelayedExpansion

set "str=*10.*31.**2.*65"

set "char=" & set "repl=" & set "loc=0"

echo !str!

call :replace

echo !repl!

exit /b

:replace
  set "char=!str:~%loc%,1!
  if "!char!" == "" exit /b
  if "!char!" equ "*" set "char=_"
  set "repl=!repl!!char!"
  set /a "loc+=1"
goto :replace

endlocal 
```

这是另一种解决方案。也许有点慢，但调用集太慢了。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-12-16T15:16:47.727

此代码将 a 替换为 b 字符：

```
Set search=%search:a=b% 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-03-15T20:40:22.997

查看[sed](http://en.wikipedia.org/wiki/Sed)，流编辑器。如果您使用的是 Windows（假设您是），则可以在 Web 上找到预编译的二进制文件。

```
echo "*10.31.*2.*65" | sed 's/\*//g' 
```

# machine-learning - 在命令行上学习 Weka

> ID：15441428
> 
> 赞同：16
> 
> 时间：2013-03-15T20:21:09.883
> 
> 标签：machine-learning, classification, weka

我对 Weka 相当陌生，在命令行上对 Weka 更是陌生。我发现文档很差，我正在努力找出一些要做的事情。例如，想要获取两个 .arff 文件，一个用于训练，一个用于测试，并获取测试数据中缺失标签的预测输出。

我怎样才能做到这一点？

我有这个代码作为起点

```
java -classpath weka.jar weka.classifiers.meta.FilteredClassifier
-t "training_file_with_missing_values.arff"
-T "test_file_with_missing_values.arff"
-F weka.filters.unsupervised.attribute.ReplaceMissingValues -- -c last
-W weka.classifiers.functions.MultilayerPerceptron -- -L 0.3 -M 0.2 -H a 
```

运行该代码给了我“非法选项 -c last”，我不知道为什么。我也不打算使用 MLP，因为当我从文本数据中获得几千个特征时，NN 往往会太慢。我知道如何将其更改为另一个分类器（例如 NB 或 libSVM，这很好）。

但我不确定如何在一次调用中添加多个过滤器，因为我还需要添加 StringToWordVector 过滤器（可能还有 Reorder 过滤器以使该类成为最后一个属性，而不是第一个属性）。

然后我如何让它实际输出每个类的预测标签？然后将这些与初始数据一起存储在 arff 中。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-16T10:43:06.163

Weka 并不是真正的文档示例，但您仍然可以在他们的网站上找到有关它的有价值的信息。你应该从[Primer](https://webcache.googleusercontent.com/search?q=cache:WL-e_bOe4TUJ:https://weka.wikispaces.com/Primer)开始。我知道您想对文本文件进行分类，因此您还应该看看[Text categorization with WEKA](https://webcache.googleusercontent.com/search?q=cache:SdU8ij_oxaQJ:https://weka.wikispaces.com/Text%2Bcategorization%2Bwith%2BWEKA)。还有一个新的[Weka 文档站点](https://waikato.github.io/weka-wiki/)。

[**编辑**：Wikispaces 已经关闭，Weka 还没有在其他地方打开这些站点，所以我修改了指向 Google 缓存的链接。如果有人阅读了这篇文章并且新的 Weka Wiki 已经上线，请随时编辑链接并删除此注释。]

您在问题中发布的命令行包含错误。我知道，您从我对另一个问题的回答中复制了它，但我也刚刚注意到它。您必须省略`-- -c last`，因为`ReplaceMissingValue`过滤器不喜欢它。

在 Primer 中它说：

> **weka.filters.监督**
> 
> 类层次结构中低于 weka.filters.supervised 的类用于**监督**过滤，即利用类信息。必须通过 -c 分配一个类，以便 WEKA 默认行为使用`-c last`。

but`ReplaceMissingValue`是一个**无监督**过滤器，和 一样`StringToWordVector`。

# 多个过滤器

添加多个过滤器也没有问题，这就是`MultiFilter`它的用途。不过，命令行可能会有点混乱：（我选择了`RandomForest`这里，因为它比 NN 快得多）。

```
java -classpath weka.jar weka.classifiers.meta.FilteredClassifier \
  -t ~/weka-3-7-9/data/ReutersCorn-train.arff \
  -T ~/weka-3-7-9/data/ReutersCorn-test.arff \
 -F "weka.filters.MultiFilter \
     -F weka.filters.unsupervised.attribute.StringToWordVector \
     -F weka.filters.unsupervised.attribute.Standardize" \
 -W weka.classifiers.trees.RandomForest -- -I 100 \ 
```

# 做出预测

以下是 Primer 关于获得预测的内容：

> 但是，如果需要有关分类器预测的更详细信息，-p # 仅输出每个测试实例的预测，以及一系列从 1 开始的属性 id（0 表示无）。

将这些常规选项`-p 0`直接放在您调用的类之后是一个很好的约定，因此命令行将是

```
java -classpath weka.jar weka.classifiers.meta.FilteredClassifier \
  -t ~/weka-3-7-9/data/ReutersCorn-train.arff \
  -T ~/weka-3-7-9/data/ReutersCorn-test.arff \
  -p 0 \
 -F "weka.filters.MultiFilter \
     -F weka.filters.unsupervised.attribute.StringToWordVector \
     -F weka.filters.unsupervised.attribute.Standardize" \
 -W weka.classifiers.trees.RandomForest -- -I 100 \ 
```

# WEKA 分类器/过滤器的结构

但是正如你所看到的，从命令行调用 WEKA 会变得非常复杂。这是由于 WEKA 分类器和过滤器的树形结构。虽然每个命令行只能运行一个分类器/过滤器，但它的结构可以任意复杂。对于上述命令，结构如下所示：

FilteredClassifier 将在训练数据集上初始化一个过滤器，过滤训练和测试数据，然后在训练数据上训练一个模型并对给定的测试数据进行分类。

```
FilteredClassifier
 |
 + Filter
 |
 + Classifier 
```

如果我们想要多个过滤器，我们使用 MultiFilter，它只是一个过滤器，但它会按照给定的顺序调用多个其他过滤器。

```
FilteredClassifier
 |
 + MultiFilter
 |  |
 |  + StringToWordVector
 |  |
 |  + Standardize
 |
 + RandomForest 
```

从命令行运行这样的事情的困难部分是将所需的选项分配给正确的类，因为通常选项名称是相同的。例如，该`-F`选项也用于 the`FilteredClassifier`和 the `MultiFilter`，因此我必须使用引号来明确哪个 -F 属于哪个过滤器。

在最后一行中，您会看到`-I 100`属于的选项`RandomForest`不能直接附加，因为那样它将被分配给`FilteredClassifier`并且您将得到`Illegal options: -I 100`。因此，您必须`--`在它之前添加。

# 将预测添加到数据文件

[添加预测的类标签](https://webcache.googleusercontent.com/search?q=cache:62a1IJ4Z43QJ:https://weka.wikispaces.com/Making%2Bpredictions)也是可能的，但更复杂。AFAIK 这不能一步完成，但您必须先训练和保存模型，然后使用这个模型来预测和分配新的类标签。

训练和保存模型：

```
java -classpath weka.jar weka.classifiers.meta.FilteredClassifier \
  -t ~/weka-3-7-9/data/ReutersCorn-train.arff \
  -d rf.model \
  -F "weka.filters.MultiFilter \
      -F weka.filters.unsupervised.attribute.StringToWordVector \
      -F weka.filters.unsupervised.attribute.Standardize" \
  -W weka.classifiers.trees.RandomForest -- -I 100 \ 
```

这会将训练的模型序列化`FilteredClassifier`到文件`rf.model`中。这里重要的是初始化的过滤器也会被序列化，否则过滤后测试集将不兼容。

加载模型，进行预测并保存：

```
java -classpath weka.jar weka.filters.supervised.attribute.AddClassification \
  -serialized rf.model \
  -classification \
  -remove-old-class \
  -i ~/weka-3-7-9/data/ReutersCorn-test.arff \
  -o pred.arff \
  -c last 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T20:33:53.153

使用 GUI Explorer 完成所有操作的更好方法。以下是如何做所有你想做的事：

**1）取两个单独的文件进行训练和测试。**

使用“预处理”选项卡下的“打开文件”选择您的训练文件。使用“分类”选项卡下的“提供的测试集”单选来选择您的测试文件。

**2）输出缺失标签的预测。**

使用“更多选项”并选择“分类”选项卡下的“输出预测”以查看预测。

**3) 使用多个过滤器**

使用“预处理”选项卡下的“过滤器”在分类之前应用任意数量的过滤器。

**4) 使类成为最后一个属性**

这实际上是不必要的。您可以选择任何属性作为您的类。类是您希望分类器预测的任何属性。使用 Classify 选项卡上的 Nom(Class) 下拉菜单选择哪个属性是您的类。

# bash - 如何从文本文件向交互式 bash 脚本提供输入

> ID：15441430
> 
> 赞同：5
> 
> 时间：2013-03-15T20:21:16.747
> 
> 标签：bash, io

我有一个脚本（来自供应商......用于屏蔽密码），它遍历一系列用户输入，并根据输入生成一些输出。我希望能够围绕它包装另一个脚本，该脚本从文本文件中提供输入，然后捕获输出以供以后使用。有人有这方面的例子吗？

更新：我进行了一些挖掘，结果表明 shell 脚本正在启动一个 java 进程，该进程正在请求用户输入。xargs 和 <,>,| 似乎对此不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T20:38:29.790

`myscript < input_file > output_file`（从命令行）将`input_file`逐行读取，就好像它是用户输入一样，然后将输出写入`output_file`. 但是要小心，如果`output_file`已经存在，它将被完全覆盖而没有任何警告。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T10:37:34.763

您可以尝试`expect`大多数 linux 发行版的软件包。它使用简单的脚本语言来提供交互式程序。示例脚本可以是这样的：

```
#!/usr/bin/expect
spawn passwordmanager
expect "Enter password for testuser:"
send "verysecret123" 
```

该脚本会告诉`expect`启动程序`passwordmanager`，然后等待提示`Enter password for testuser:`并回答它`verysecret123`等等。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-15T20:26:05.720

shell函数怎么样

```
function script_plus ()
{
   if [ $# != 2 ]; then echo "usage: ..."; exit; fi
   src=$1;
   tgt=$2;
   if [ ! -f $src ]; then echo "usage: ..."; exit; fi
   cat $src | xargs script > $tgt
} 
```

假设“脚本”是您的供应商脚本。不进行错误检查（仅用于说明）。如果不是 shell 函数，则上面的主体`script_plus`可能是 shell 脚本文件的内容。

# java - 关闭 JFrame 时如何在后台运行应用程序？

> ID：15441431
> 
> 赞同：5
> 
> 时间：2013-03-15T20:21:19.597
> 
> 标签：java, swing, jframe, system-tray

我在我的 java 应用程序中使用了**系统托盘。**我想**消失 GUI并在****后台**运行应用程序，但是当用户单击JFrame的**关闭按钮时，系统托盘必须保持可用。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T21:18:10.290

> 我想消失 GUI 并在后台运行应用程序，但是当用户单击 JFrame 的关闭按钮时，系统托盘必须保持可用。

*   为 ,设置适当的[JFrames 方法`DefaultCloseOperation`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html#setDefaultCloseOperation%28int%29)，`JFrame.setDefaultCloseOperation(HIDE_ON_CLOSE)`默认在 API 中实现

设置用户在此框架上启动“关闭”时默认发生的操作。您必须指定以下选项之一：

> DO_NOTHING_ON_CLOSE（在WindowConstants中定义）：什么都不做；要求程序在注册的WindowListener对象的windowClosing方法中处理操作。
> 
> HIDE_ON_CLOSE（在 WindowConstants 中定义）：在调用任何注册的 WindowListener 对象后自动隐藏框架。
> 
> DISPOSE_ON_CLOSE（在 WindowConstants 中定义）：在调用任何已注册的 WindowListener 对象后自动隐藏和处置框架。
> 
> EXIT_ON_CLOSE（在 JFrame 中定义）：使用系统退出方法退出应用程序。仅在应用程序中使用它。
> 
> 该值默认设置为 HIDE_ON_CLOSE。更改此属性的值会触发属性更改事件，属性名称为“defaultCloseOperation”。

*   然后从[`SystemTray`](http://docs.oracle.com/javase/6/docs/api/java/awt/SystemTray.html)调用`JFrame.setVisible(true)`，此事件可从

    1.  [`TrayIcon`](http://docs.oracle.com/javase/6/docs/api/java/awt/TrayIcon.html#addActionListener%28java.awt.event.ActionListener%29)

    2.  [`JPopupMenu added to SystemTray`](https://stackoverflow.com/a/6290045/714968)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T03:34:00.287

**将此作为答案发布**

就像 MadProgrammer 说的：

> 不要将框架设置为 EXIT_ON_CLOSE 或在框架关闭时调用 System.exit。事件调度线程将继续运行，直到 JVM 终止

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:23:30.913

您可以在单独的线程中使用系统托盘。

# javascript - 从 Angular JS 开始的基本指南

> ID：15441438
> 
> 赞同：17
> 
> 时间：2013-03-15T20:21:57.763
> 
> 标签：javascript, jquery, html, angularjs

我很困惑在创建我的应用程序时要开始。

当我单击添加按钮时，我想显示一个表单 - 我是否将 div 附加到该按钮？

我该如何攻击这个？

**代码：**

```
<body>
<div id="wrap">

  <!-- Begin page content -->
  <div classa="container">
    <div class="page-header">
      <h1>Birthday Reminders</h1>
    </div>
       <p>Data Here</p>
  </div>

  <div id="push"></div>
</div>

<div id="footer">
  <div class="container">
    <a href="#">Add</a>
  </div>
</div>
    <script type="text/javascript" src="js/cordova-2.5.0.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-03-15T21:00:59.290

好的，从上到下！:-)

首先，你必须在某个地方告诉 AngularJS 你正在使用它。标签和`body`任何地方一样好：`<body ng-app="myApp">`. [这](http://docs.angularjs.org/api/ng.directive:ngApp)告诉 AngularJS 使用一个称为`myApp`应用程序根的模块。所以现在让我们定义它：

```
// app.js

var app = angular.module( 'myApp', [] ); 
```

第二个参数是一个依赖数组。我们现在不用担心这个了。所以现在我们有了一个[模块](http://docs.angularjs.org/api/angular.Module)。AngularJS 是一个[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)框架，所以我们还需要在某个地方定义一个控制器。让我们将其添加到我们的`app.js`文件中：

```
app.controller( 'MainCtrl', function( $scope ) {
  // we control our app from here
}); 
```

变量是我们如何将`$scope`控制器逻辑粘合到视图上。说到视图，我们必须告诉 AngularJS 在某个地方使用这个控制器。`body`让我们再次编辑标签：

```
<body ng-app="myApp" ng-controller="MainCtrl"> 
```

繁荣！我们的应用程序有效。所以现在 AngularJS 已经全部设置好并且可以工作了，所以我们可以解决你的问题。

你想让某些东西出现在某个动作上。有一个名为[`ngShow`](http://docs.angularjs.org/api/ng.directive:ngShow). 当条件为真时，它将显示其中的任何内容：

```
<form ng-show="visible"> 
```

是什么`visible`？那是一种[表达](http://docs.angularjs.org/guide/expression)。在这种情况下，它只是一个变量。定义在哪里？在我们的范围内！

```
app.controller( 'MainCtrl', function( $scope ) {
  $scope.visible = false;
}); 
```

好的，现在它开始为`false`; `true`当我们单击一个按钮时，我们如何将其更改为？有一个被调用的指令[`ngClick`](http://docs.angularjs.org/api/ng.directive:ngClick)也需要一个表达式：

```
<a class="btn" ng-click="visible = true">Show the Form</a> 
```

在这种情况下，我们的表达式将`visible`变量更改为`true`。并立即显示表格！这是一个完整的 Plunker：[http ://plnkr.co/edit/Kt4dR2tiTkShVYWCqQle?p=preview](http://plnkr.co/edit/Kt4dR2tiTkShVYWCqQle?p=preview)

欢迎来到 AngularJS！

* * *

以下是您应该了解的一些补充资源：

*   教程：[http ://docs.angularjs.org/tutorial](http://docs.angularjs.org/tutorial)
*   指南：[http ://docs.angularjs.org/guide/](http://docs.angularjs.org/guide/)
*   从 jQuery 迁移：[“在 AngularJS 中思考”如果我有 jQuery 背景？](https://stackoverflow.com/q/14994391/259038)

并加入我们的[邮件列表](https://groups.google.com/forum/#!forum/angular)！我们是好人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:40:44.373

听起来你才刚刚开始测试 Angular。我现在才用了大约一个星期。当你意识到它们是如何工作的时候，事情就变得很酷了。希望有更好/更多的文档。我起草了一个快速的[JSFiddle 示例](http://jsfiddle.net/enigmarm/3CVEJ/32/)，听起来像是您正在寻找的。让我知道这是否是您正在寻找的东西。应该完全工作。

```
<div ng-controller="bdayCtrl">
<h3>Birthday Reminders</h3>
<table border="1">
    <tr ng-repeat="bday in bdays">
        <td>{{bday.name}}</td>
        <td>{{bday.date}}</td>
    </tr>
</table>

<a class="btn" ng-click="visible = true">Add new</a><br>

<form class="form-horizontal" ng-show="visible" ng-submit="newDate()">
    <input type="text" ng-model="bdayname" placeholder="Name"><br>
    <input type="text" ng-model="bdaydate" placeholder="Birthdate">
    <button class="btn" type="submit"><i class="icon-plus"></i>Add</button>
</form>
</div> 
```

还有你的脚本：

```
var app = angular.module('myApp', []);

function bdayCtrl($scope) {
$scope.bdays = [{
        "name": "Jamal",
        "date": "Jan 1, 1980"
}, {
        "name": "Paula",
        "date": "Jan 1, 2000"
}, {
        "name": "Damon",
        "date": "Jun 30, 1800"
}];

$scope.newDate = function () {
    $scope.bdays.push({name:$scope.bdayname, date:$scope.bdaydate});
    $scope.bdayname = '';
    $scope.bdaydate = '';
};
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T19:30:40.017

您可以在没有先验知识的情况下找到一个简单且更复杂的创建 Angular 应用程序的示例：

[格式化一个html元素](http://www.angularbasics.co.uk/?Id=4)

和

[添加数据编辑工具](http://www.angularbasics.co.uk/?Id=8)

它们应该有助于提供简单的熟悉。

# python - sudo python 运行旧的python版本

> ID：15441440
> 
> 赞同：7
> 
> 时间：2013-03-15T20:22:14.390
> 
> 标签：python, centos, sudo, centos6

我已经按照这些说明在 CentOS 6 上安装了 python 2.7.3

[http://villaroad.com/2010/10/rolling-python-2-6-2-on-centos-5-3/](http://villaroad.com/2010/10/rolling-python-2-6-2-on-centos-5-3/)

我已经为新 python 的 root 和 myuser 的 bash_profile 添加了别名。现在，当我将 python 写入 shell 时，它会从两个用户正确运行 python2.7.3。

但是，如果我写 sudo python 它仍然运行旧版本 python2.6.6

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T20:26:50.767

`sudo`不使用你的shell来运行命令，它只是`exec`直接的命令。这意味着 (a) 没有任何来源 root's `bash_profile`，因此放在那里的内容无关紧要，并且 (b) 即使设置了 shell 别名也无关紧要。

因此，如果您想使用`alias`es 指定与 PATH 中的 Python 不同的 Python，则不能使用它`sudo python`来运行相同的 Python。

最简单，也可能是最安全的修复方法是明确的：运行`sudo /path/to/other/python`。如果您需要经常这样做，您总是可以为此创建一个别名。

如果你真的想，你*可以*使用`sudo`shell。要么显式生成`bash`运行的命令行`python`，要么（更简单地）只使用`-s`or`-i`标志。（在这种情况下，如果您试图让 root`~/.bash_profile`运行，`-s`不会这样做，但会这样做`-i`。）但是`sudo`ing shell 不如`sudo`ing 程序安全。您`sudoers`甚至可能被明确配置为阻止您这样做。（如果你愿意，你可以解决这个问题`visudo`，但是在不了解你正在打开什么的情况下打开一个安全漏洞通常被认为是一件坏事。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:33:41.607

我建议`sudo -i`在调用脚本时使用。直接来自[man sudo](http://linux.die.net/man/8/sudo)：

> -i [命令]
> 
> -i（模拟初始登录）选项将目标用户的 passwd(5) 条目中指定的 shell 作为登录 shell 运行。这意味着 shell 将读取特定于登录名的资源文件，例如 .profile 或 .login。如果指定了命令，则将其传递给 shell 执行。否则，将执行交互式 shell。sudo 在运行 shell 之前尝试更改到该用户的主目录。它还初始化环境，保持 DISPLAY 和 TERM 不变，设置 HOME 、 MAIL 、 SHELL 、 USER 、 LOGNAME 和 PATH ，以及 Linux 和 AIX 系统上 /etc/environment 的内容。所有其他环境变量都被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-18T20:11:33.403

bin 目录可能引用了旧版本的 Python

```
> ls -la /usr/bin/python
lrwxrwxrwx 1 root root 9 Dec 21  2013 /usr/bin/python -> python2.7 
```

将默认的 python 版本重定向到您想要的版本。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T20:39:16.183

问题是您`$PATH`在执行时正在改变。

您可以使用`sudo -E`：

> **-E** -E（保留环境）选项将覆盖 sudoers(5) 中的 env_reset 选项。仅当匹配的命令具有 SETENV 标记或在 sudoers(5) 中设置了 setenv 选项时，它才可用。

...或者您可以指定可执行文件的完整路径。`sudo `which python``.

（看起来您`alias`按照文档使用。此方法也可以处理。）

# opencl - 如何在 OpenCL 中将无顺序数据复制到 GPU 内存缓冲区？

> ID：15441442
> 
> 赞同：1
> 
> 时间：2013-03-15T20:22:16.920
> 
> 标签：opencl

我知道如何将数组从主机复制到 GPU。但是，如果我有一个存储在主机上的列主矩阵，我想复制到 GPU 上的缓冲区，会发生什么情况。

还有其他方法可以在 forloop 中同时复制一个元素吗？

A_host [0 3 6 1 4 7 2 5 8]。

GPUBuffer = [0 1 2 3 4 5 6 7 8]。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T03:05:17.987

在这种情况下，如果矩阵足够大，您可能希望将其“按原样”发送到 GPU，并插入一个额外的转置内核（或将其合并到您的第一个内核）。

# arrays - 比较两个数组 ActionScript 3

> ID：15441443
> 
> 赞同：1
> 
> 时间：2013-03-15T20:22:24.140
> 
> 标签：arrays, actionscript, compare

假设我有两个数组：

```
var arrOne:Array = ["fish", "cat", "dog", "tree", "frog"];
var arrTwo:Array = ["cat", "cat", "fish", "dog", "fish"]; 
```

我需要能够比较它们以确定以下内容：

*   在同一位置有多少匹配项（在上面的情况下将是 1：arrOne[1] 和 arrTwo[1] 都是 cat）。
*   有多少匹配项不在同一位置（在上面的这种情况下，有 2 个：猫和鱼）。

这会将用户的输入与随机生成的值数组进行比较；基本上，我希望能够说“你有一个正确的位置在正确的位置，还有两个正确的位置但在错误的位置”。希望这是有道理的。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:05:53.113

我只会以常见的方式比较元素。唯一的问题是我们应该如何对待第二种情况的“鱼”。

这是我针对两种情况的解决方案。1 - 如果我们不关心重复的项目，2 - 如果我们关心。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
<fx:Script>
    <![CDATA[
        import mx.controls.Alert;
        import mx.events.FlexEvent;

        private var arrOne:Array = ["fish", "cat", "dog", "tree", "frog"];
        private var arrTwo:Array = ["cat", "cat", "fish", "dog", "fish"];

        protected function compare():void
        {
            var rule1:int = 0;
            var rule2:int = 0;

            for (var i: int = 0; i < arrOne.length; i++)
            {
                for (var j: int = 0; j < arrTwo.length; j++)
                {
                    if (arrOne[i] == arrTwo[j])
                    {
                        if (i == j)
                            rule1 ++;
                        else
                            rule2 ++;
                    }
                }
            }

            Alert.show("You got " + rule1.toString() + " correct and in the right spot, and " + rule2.toString() + " correct but in the wrong spot");

        }

        protected function compareWithoutRepeat():void
        {
            var rule1:int = 0;
            var rule2:int = 0;
            var temp:Array = new Array();

            for (var i: int = 0; i < arrOne.length; i++)
            {
                for (var j: int = 0; j < arrTwo.length; j++)
                {
                    if (arrOne[i] == arrTwo[j])
                    {
                        if (i == j)
                            rule1 ++;
                        else
                        {
                            var flag:Boolean = false; //is there the same word in the past?
                            for (var k:int = 0; k < temp.length; k++)
                            {
                                if (temp[k] == arrTwo[j])
                                {
                                    flag = true;
                                    break;
                                }

                            }

                            if (!flag) //the word is new, count it!
                            {
                                rule2 ++;
                                temp.push(arrTwo[j]);
                            }

                        }
                    }
                }
            }

            Alert.show("You got " + rule1.toString() + " correct and in the right spot, and " + rule2.toString() + " correct but in the wrong spot");

        }
    ]]>
</fx:Script>
<s:Button x="10" y="10" width="153" label="Compare" click="compare()"/>
<s:Button x="10" y="39" label="Compare without repeat" click="compareWithoutRepeat()"/>
</s:Application> 
```

# java - linux服务器上的Recaptcha连接超时

> ID：15441451
> 
> 赞同：0
> 
> 时间：2013-03-15T20:22:48.947
> 
> 标签：java, linux, captcha, recaptcha

我在我的网站上使用[ReCaptcha进行验证码。](http://www.google.com/recaptcha)当我在本地主机服务器上运行它时，它运行良好。但是当我在 linux 服务器上运行它时，它会给我连接超时消息。我不知道为什么？

我看到很多人都有同样的问题，但没有解决方案有人知道可能是什么问题吗？我正在使用文档中给出的 Java 示例。

在这里-> [https://developers.google.com/recaptcha/docs/java](https://developers.google.com/recaptcha/docs/java)

```
net.tanesha.recaptcha.ReCaptchaException：无法加载 URL：连接超时
    在 net.tanesha.recaptcha.http.SimpleHttpLoader.httpPost(SimpleHttpLoader.java:89)

```

我对端口 80 的 iptable 设置是：

```
-A 输入 -p tcp -m tcp --dport 80 -j 接受
-A 输出 -p tcp -m tcp --dport 80 -j 接受

```

我试着卷曲

```
 http://www.google.com/recaptcha/api/verify 
```

从网络服务器，它不允许。我猜主机无法从服务器访问。如何允许从 linux 服务器发布/获取到 google api 网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-26T21:01:47.537

1）。您的输入链中的错误：

```
-A INPUT -p tcp -m tcp --dport 80 -j ACCEPT 
```

这里必须是**--sport**而不是**--dport**。因为 curl 可以将任何端口用于新的输出请求，并且将等待响应。例如 44254 或任何其他。

2）。可能有必要为 443 端口添加类似的规则，因为新版本的 Google RECaptcha 默认使用它。

# ruby-on-rails - 在 ruby 中解析任意 gmt 偏移中的时间

> ID：15441464
> 
> 赞同：4
> 
> 时间：2013-03-15T20:23:42.143
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, parsing, timezone

我在 Rails 3.2 中运行，我想不出一种很好的方法来解析在任意时区给我的时间。

例如，这是我在单独的键中给出的格式

```
{
  "start_date"=>"2013-04-24 13:00:00",
  "timezone"=>"America/Los_Angeles",
  "timezone_offset"=>"GMT-0700",
  ...
} 
```

[这个问题](https://stackoverflow.com/questions/6615463/how-can-i-use-ruby-to-parse-a-time-as-though-it-is-in-a-time-zone-i-specify-wit)非常接近于回答：

```
time = ActiveSupport::TimeZone.new('UTC').parse('2010-02-05 01:00:01') 
```

问题是当我将“America/Los_Angeles”作为参数输入时`Timezone.new`，它会吐出 GMT-8 的时区，我认为是由于 DST 的变化。另一方面，我收到的数据定义了与 GMT 的时区偏移量。因此，对于我的示例，所需的输出是 GMT-7 的时区。

如果我知道 gmt 偏移量，而不是使用时区的名称，有什么方法可以获取时区？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:39:29.497

您可以使用`[]`on `ActiveSupport::Timezone`，以小时为单位传递 gmt 偏移量作为参数。

如[api.rubyonrails.org 所示](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-c-5B-5D)：

`[](arg)`

> 定位特定时区对象。如果参数是字符串，则将其解释为要定位的时区名称。如果它是一个数值，则它是要查找的时区的小时偏移量或第二个偏移量。（将返回具有该偏移量的第一个。）如果系统不知道这样的时区，则返回 nil。

代码示例：

```
ActiveSupport::TimeZone["America/Los_Angeles"]                              
 => (GMT-08:00) America/Los_Angeles
ActiveSupport::TimeZone[-8]                              
 => (GMT-08:00) America/Los_Angeles 
```

所以，你要做的是：

```
time = ActiveSupport::TimeZone[-7].parse('2013-04-24 13:00:00') 
```

但是，要小心，因为一个偏移量可能等同于多个时区，因为许多时区可以在同一个偏移量上。

# python - 执行脚本忽略用户的 PYTHONPATH

> ID：15441467
> 
> 赞同：1
> 
> 时间：2013-03-15T20:23:53.033
> 
> 标签：python, pythonpath

我有一组脚本，它们是使用特定的 python 安装执行的（用第一行 #! 设置）。网络上有几种不同的 python 安装，不同的组有自己的设置和工作流程。一些团体已经指示人们在他们的 shell 登录中修改他们的 PYTHONPATH，以便运行他们的工具。如果有人修改了他们的 PYTHONPATH，并且其中的一个目录包含与我的脚本不兼容的包版本，那么是否有推荐的方法：

*   忽略用户的 PYTHONPATH 环境变量，或者
*   确保首先搜索特定的站点包目录？

基本上，人们已经修改了他们的 PYTHONPATH，并且还需要运行我的脚本。我想让它们在系统上普遍可用，而人们不必弄乱他们的设置。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:25:27.937

您可以在脚本的开头执行此操作：

```
import sys
sys.path.insert(0, 'specific/site-packages') 
```

相当于`specific/site-packages`是第一个`PYTHONPATH`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:29:14.933

我建议要么安装[模块框架](http://modules.sourceforge.net/)并编写适当的模块，要么创建`.pysource`用户`source`在运行脚本之前应该使用的自定义文件（例如）。

# php - Laravel - 从另一个控制器调用页面片段（在捆绑中）

> ID：15441470
> 
> 赞同：0
> 
> 时间：2013-03-15T20:24:07.917
> 
> 标签：php, laravel, hmvc

我不确定我在这里做的事情是否完全错误。但基本上我想要做的是从我的主应用程序控制器调用我的一个包中的一个函数，这种行为在 Laravel 中是否可能。

实际情况是我的主控制器位于 /application/controllers/home.php 中，如下所示：

```
class Home_Controller extends Base_Controller {

    public function action_index()
    {       
            $blog = ?;
            return View::make('common.html_template')->with($blog, 'blog');
    }
} 
```

我还在 /bundles/blog/controllers/home.php 中构建了一个带有控制器的博客包，如下所示：

```
class Blog_Home_Controller extends Base_Controller {

    public function get_latest()
    {
        //bit of code here
    }
} 
```

是否可以将 get_latest 的内容作为页面片段加载到我的 $blog 变量中，或者我是否错误地处理了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:29:02.607

即使有可能，根据 MVC 方法，您的方法也是错误的。一个控制器不应该知道另一个控制器。如果您需要从某个地方获取一些数据，请尝试使用库或模型而不是控制器，或者您可以`get_latest()`在`Home_Controller`

# class - 运算符 += 类重载：参数错误

> ID：15441472
> 
> 赞同：0
> 
> 时间：2013-03-15T20:24:20.847
> 
> 标签：class, operator-overloading, overloading

```
CPP-file:

Matrix2x2& operator +=(const Matrix2x2 & rhs)
{
    for (int i = 0; i < 2; i++)
    {
        for (int n = 0; n < 2; n++)
        {
            this->anArray.[i][n] += rhs.anArray[i][n];
        }
    }
    return *this;
} 
```

头文件：

```
class Matrix2x2
{
private:
    double anArray[2][2];
public:
    Matrix2x2();
    Matrix2x2(int a, int b, int c, int d);
    void setArrayValues(int row, int column, double value);
    const double getArrayValues(int row, int column) const;
    Matrix2x2& operator +=(const Matrix2x2 & rhs)
}; 
```

主文件：

```
Matrix2x2 aMatrix(4,4,4,4);
Matrix2x2 bMatrix;
aMatrix += bMatrix; 
```

当我尝试运行它时，我得到了这个：

错误：'Matrix2x2& operator+=(const Matrix2x2&)' 必须正好有两个参数

我看不出为什么？

我把它换成了

```
Matrix2x2& Matrix2x2::operator+=(const Matrix2x2 & rhs); 
```

然后我得到了这些错误：

```
error: extra qualification 'Matrix2x2::' on member 'operator+=' 
```

在头文件和

```
error: expected unqualified-id before '[' token| 
```

在这一行：

```
 this->anArray.[i][n] += rhs.anArray[i][n]; 
```

更新2

我已经在头文件中向您展示了我的类声明、主文件中的调用以及我的 cpp 文件中的函数定义。还有什么可以展示的？我目前已更正您指出的所有内容，但我仍然遇到相同的错误之一：

```
error: extra qualification 'Matrix2x2::' on member 'operator+= 
```

在cpp和头文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:30:50.267

好吧，一大堆问题。

首先，在你的头文件中，这一行需要*在类声明*中`Matrix2x2`（最好在`public:`标签下）

```
Matrix2x2& operator +=(const Matrix2x2 & rhs); 
```

其次，您需要将您的定义*放在 CPP 文件中*，它需要看起来像这样：

```
Matrix2x2& Matrix2x2::operator+=(const Matrix2x2 & rhs)
{
    for (int i = 0; i < 2; i++)
    {
        for (int n = 0; n < 2; n++)
        {
            this->anArray[i][n] += rhs.anArray[i][n];
        }
    }
    return *this;
} 
```

`.`第三，你的 for 循环中有一个额外的 " "。将其更改为：

```
this->anArray.[i][n] += rhs.anArray[i][n]; 
```

至：

```
this->anArray[i][n] += rhs.anArray[i][n]; 
```

我不能保证没有更多问题。但这些是我根据您向我们展示的内容看到的。

# sql - 在 THEN 之后使用 INSERT 是可能的

> ID：15441474
> 
> 赞同：0
> 
> 时间：2013-03-15T20:24:26.963
> 
> 标签：sql, insert, case

我很抱歉这个网站的新手....MS SQL Server 2008 R2 / 那是正在运行语句的数据库。尝试在 THEN 之后使用 INSERT ...可能吗？建议？

userindex 是表
sysname 是列

这是 SQL 语句

```
Select CASE when sysname <> system_user Then insert into USERINDEX (sysname, truncun, first, last, cname) values (system_user, right(system_user, len(system_user) - charindex('\', system_user)), '{Enter First Name:}', '{Enter Last Name:}', host_name() ) ELSE End From userindex 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:33:17.193

在不知道所使用的 DBMS 的情况下，很难说出确切的语法是什么，但一般来说，您不需要做`CASE`您想做的事情。像这样的东西会起作用：

```
insert into USERINDEX
(sysname, truncun, first, last, cname)
(select system_user,
        right(system_user, len(system_user) - charindex('\', system_user)),
        '{Enter First Name:}', '{Enter Last Name:}', host_name() 
 from userindex
 where sysname <> system_user
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:29:57.403

不，你不能如果你使用的是 T-SQL，你可以将两个或多个句子包装到一个过程中并调用它

# python - 简单的密码验证

> ID：15441475
> 
> 赞同：0
> 
> 时间：2013-03-15T20:24:41.863
> 
> 标签：python, encryption, hash, passwords

我不想制作 1000 个密码并将它们提供给用户。密码包含 6 位数字 - 它们看起来像随机的 6 位数字。

当用户进来时，除了这个密码之外没有任何信息，我想验证它。

我可以遍历数据库来查找这个密码，但是我想将这个操作的难度从 O(N) 降低到 O(1)，其中 N 是密码的数量。

是否有任何方法可以通过简单的检查方法生成 1000 个“随机”密码？

UPD：现在我正在考虑进行加密。例如（Python）

```
key = 'top_secret'
N = 1000
passwords = [encrypt(i, key) for i in range(N)]

def check(s):
    try:
        return int(decrypt(s, key))<1000
    except ValueError:
        return False 
```

但这我想有一个更好的解决方案

UPD2：3 位和 6 位仅为示例。它们可能是 64 位和 128 位数字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:34:39.590

不是 100% 确定，但您可以生成一个[uuid4](http://docs.python.org/2/library/uuid.html#uuid.uuid4)并将其存储为身份验证-> 用户名查找，例如：

```
import uuid

userpass = {uuid.uuid4().hex:'user{:05}'.format(idx) for idx in xrange(1, 1001)}
an_item = next(iter(userpass)) # one we know is in there
for check in (an_item, 'bob'): # 'bob' we know won't be...
    print check, 'belongs to', userpass.get(check, '*nobody*')

# 8411d50aa7ec42d8a6b4736284d1837b belongs to user00381
# bob belongs to *nobody* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:59:07.910

由于密码很短，您可能需要使用位图。您需要 1000000 位 = 125000 字节 ~= 122kB，即相当少量的内存。

因此，创建一个[位图](http://en.wikipedia.org/wiki/Bit_array)并初始化它（完全未设置）。生成您的密码并在位图中设置适当的位。当用户尝试登录时检查位图。

## **非常重要的警告！**

您在这里尝试做的是**EXTREMELY UNSECURE**。

您写道，用户仅使用其密码登录，因此，与您选择保存密码的数据结构无关，登录系统只需尝试猜测**一个**密码。由于 1000 存在于 [0;1000000[ 范围内，第一次尝试猜测密码的概率为 0,001，这是一个**非常**高的值。本质上，正如您所描述的，您的系统不要求输入密码 - 它要求输入用户名。

在某些情况下，6 位密码可能是可以的，但**切勿**将密码用作用户名+密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:34:51.507

创建一个以密码为键的哈希。在 Perl 中的示例中，散列提供恒定时间查找 (O(1))。

这可能看起来像这样：

```
my %pass;

foreach ( 1 .. 1000 ) {
        # generate_next_pass() is your algorithm
        # of getting new password.
        my $p = generate_next_pass();
        $pass{$p} = 1;
} 
```

然后 O(1) 检查密码是否在哈希中：

```
# $user_input is a password to be validated.
if ( exists $pass{$user_input} ) {
  # password correct
} else {
  # password incorrect
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T21:10:46.563

如果密码*只有*数字，您可以将它们用作列表索引：

```
# Create a list of all possible passwords
pwds = [False for n in xrange(10**6)]
# Make 1000 valid passwords
for j in xrange(1000):
    i = random.randint(0, 10**6)
    print 'password is {:06d}'.format(i)
    pwds[i] = True 
```

查找它们应该是 O(1)：

```
testpw = '103076'
if pwds[int(testpw)]:
    print 'Password is OK'
else:
    print 'Invalid password!' 
```

请注意，六位数密码不是很安全。他们很容易被猜到。

更好的方法是让用户选择密码。然后将该密码的 SHA512 散列存储为字典的键，例如用户的数据作为值。当用户给出其密码时，对其进行散列并查看该密钥是否在字典中。

# java - 如何在运行时以编程方式添加 Log4J2 附加程序？

> ID：15441477
> 
> 赞同：46
> 
> 时间：2013-03-15T20:24:43.887
> 
> 标签：java, logging, log4j, log4j2

是否可以使用 XML 配置中的规范以编程方式添加 Log4J2 附加程序？

我计划在 log4j2.xml 中定义它，然后像这样根据情况选择附加程序（不会编译）：

```
if (arg[0].equals("log") ) {
    Logger.getLogger("loggerNameFromXMLConfig").addAppender("appenderNameFromXMLConfig");
} else {
    //...
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-11-02T07:49:59.873

有许多请求支持更好的 Log4j 2 编程配置。抱歉，花了这么长时间。从 Log4j 2.4 开始，API 被添加到 log4j-core 以方便[编程配置](http://logging.apache.org/log4j/2.x/manual/customconfig.html)。

新的`ConfigurationBuilder`API 允许用户构建组件*定义*。使用此 API，无需直接使用实际配置对象（如 LoggerConfig 和 FileAppender），这需要大量了解 Log4j 如何在后台工作的知识。组件定义被添加到 ConfigurationBuilder 中，一旦收集了所有定义，所有实际的配置对象（如 Loggers 和 Appenders）就会被构建。感觉有点像 XML 配置语法，只是您正在编写 Java 代码。

请注意，新`ConfigurationBuilder`API 允许用户代码创建新配置或完全替换现有配置。如果您的用例不同，并且您想在 Log4j 启​​动后以编程方式修改（而不是替换）现有配置，那么您将需要使用实际的配置对象。在这种情况下，请参阅手册的“[初始化后以编程方式修改当前配置](http://logging.apache.org/log4j/2.x/manual/customconfig.html#AddingToCurrent)”部分。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-07-24T18:36:41.363

编辑：有关最新版本的 log4j2，请参阅[https://stackoverflow.com/a/33472893/1899566](https://stackoverflow.com/a/33472893/1899566)。

我的印象是他们不希望你这样做，但这对我有用：

```
if (arg[0].equals("log") ) {
  org.apache.logging.log4j.Logger logger
    = org.apache.logging.log4j.LogManager.getLogger("loggerNameFromXMLConfig");
  org.apache.logging.log4j.core.Logger coreLogger
    = (org.apache.logging.log4j.core.Logger)logger;
  org.apache.logging.log4j.core.LoggerContext context
    = (org.apache.logging.log4j.core.LoggerContext)coreLogger.getContext();
  org.apache.logging.log4j.core.config.BaseConfiguration configuration
    = (org.apache.logging.log4j.core.config.BaseConfiguration)context.getConfiguration();

  coreLogger.addAppender(configuration.getAppender("appenderNameFromXMLConfig"));
} else {
  //...
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-04-04T23:14:34.687

正如我上面提到的，我无法让[https://logging.apache.org/log4j/2.x/manual/customconfig.html#AddingToCurrent](https://logging.apache.org/log4j/2.x/manual/customconfig.html#AddingToCurrent)工作，至少不是我期望的那样（我的附加程序会永远不会收到路由到它的消息）。我终于偶然发现了一种对我有用的模式——允许我在运行时添加一个 appender，并让该 appender 实际上将日志消息路由到它。

*编辑*我从这里删除了一堆没有做任何事情的令人困惑的代码......

```
 LoggerContext lc = (LoggerContext) LogManager.getContext(false);
    FileAppender fa = FileAppender.newBuilder().withName("mylogger").withAppend(false).withFileName(new File(outputDirectory, "ConsoleOutput.txt").toString())
            .withLayout(PatternLayout.newBuilder().withPattern("%-5p %d  [%t] %C{2} (%F:%L) - %m%n").build())
            .setConfiguration(lc.getConfiguration()).build();
    fa.start();
    lc.getConfiguration().addAppender(fa);
    lc.getRootLogger().addAppender(lc.getConfiguration().getAppender(fa.getName()));
    lc.updateLoggers(); 
```

对我来说，一个关键点是调用 addAppender 并直接传递你的 appender 是行不通的，但按名称要求你的 appender 似乎是可行的。这没有意义……但是自从工作以来，我厌倦了在应该如此简单的事情上浪费时间……

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-19T05:51:19.193

不知道有没有用：可以通过调用当前Configuration的addLoggerAppender方法来添加一个Appender到Logger中。参考： http: [//logging.apache.org/log4j/2.x/manual/architecture.html](http://logging.apache.org/log4j/2.x/manual/architecture.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-04-10T08:32:36.850

在 Log4j2 结构中

```
 ---"Config"---
                Appenders
                        Appender(0)
                            Console
                        Appender(1)
                            File
                    LoggerConfigs
                        -- LoggerConfig(0) 
                        -- LoggerConfig(1)
                        -- LoggerConfig(2)

        ----"LoggerConfig"----
                - AppenderRefs
                    -- AppenderRef(0)
                        -- Name Console
                        -- Level : DEBUG
                - Appenders
                    -- Appender(0)
                        -- Name Console
                        -- Level : DEBUG
                - Level -- ALL 
```

loggerConfig.getAppenders() --> 将返回“Config”中的 Appenders。对我来说这是一个BUG

loggerConfig.getAppenderRefs() --> 运行良好！！

# c# - 使用单个 Class 获取 DataGridView 值并以新形式显示它们

> ID：15441484
> 
> 赞同：0
> 
> 时间：2013-03-15T20:25:17.047
> 
> 标签：c#, winforms

这个概念很简单。用户选择一行并单击“编辑”，打开表单，该行中的所有数据都在编辑表单的透视字段中。

我使用 SelectedItems[0].Tag 对 ListView 执行此方法没有问题，但现在使用 DataGridView 并且我得到一个未设置为对象实例的对象引用。

我一直在谷歌搜索，似乎可以完成的唯一方法是首先将 DataGridView 行的值放入列表中。

所以像 firstcell = part.item1、secondcell = part.item2 等。

最后告诉它 List = part;

```
 private void EditPart()
    {
        PartData part;

        // Ignore if no row is selected
        if (DgParts.SelectedRows.Count == 0)
        {
            return;
        }

        try
        {
            // Is not tagging data at all.
            part = (PartData) DgParts.SelectedRows[0].Tag;

            // Open Form with Data
            var edit = new FrmPartsAddEdit(this, "Edit", part);

            // Commit if OK
            if (edit.ShowDialog() == DialogResult.OK)
            {
                part = edit.GetPart();
            }
        }
        catch (Exception ex)
        {
            MessageBoxError(ex.Message);
        }
    } 
```

DataGridView 处于全行选择状态，多选为 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:33:33.403

整个 WinForms 中使用的 Tag 属性在内部不使用。如果您觉得它有用，它就在那里供您使用。它必须被设置为某物才能有某物。

Tag 属性在这里不合适。您需要的是可以获取 DGV 行并将其转换为 PartData 的东西，然后可以将其传递给您的对话 ctor。

大概 DGV 行包含（在其列中）构成 PartData 的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:51:29.693

`DgParts.SelectedRows[0].Tag`与其发送，不如发送`DgParts.SelectedRows[0]`。这将是一个`DataGridViewRow`.

然后在您发送 this 的类中`DataGridViewRow`，假设它被称为`myRow`，您可以使用`myRow.Cells['column name']`or浏览元素`myRow.Cells[columnIndex]`。或者您可以遍历元素。

另一种方法是使用`DgParts.SelectedRows[0].Cells.List`. 这会将行的内容发送到`ArrayList`.

有关更多信息，请查看：

[DataGridViewRow 类](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewrow.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:42:42.327

警告：VB 语法，但很容易转换为 C#。

假设`PartData`是代表您的数据的类，您希望将通用部件列表绑定`List(Of PartData)`到 DataGridView。然后在`SelectionChanged`事件中，您可以获得对在 List 中选择的 PartData 对象的基础引用，并将其传递给编辑表单的构造函数进行编辑：

```
If DgParts.CurrentRow.DataBoundItem IsNot Nothing Then

    Dim f as New EditPartForm(DgParts.CurrentRow.DataBoundItem)

End If 
```

的构造函数`EditPartForm`将采用 type 的参数`PartData`。

需要记住的一件事是将 List(Of PartData) 绑定到 DataGridView 将为 PartData 类的每个属性显示一列。您必须`.Visible = False`在不想显示的每一列上进行设置。

# linux - VMware Linux LAMP 服务器互联网

> ID：15441485
> 
> 赞同：0
> 
> 时间：2013-03-15T20:25:22.370
> 
> 标签：linux, vmware, lamp

我正在为 LAMP 服务器在 VM 中安装 Ubuntu 服务器 12.04。我应该如何为 VM 配置网络，以便我可以从主机 pc 访问托管在其上的网页，并且 VM 仍然可以访问 Internet，以下载更多包？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T01:56:08.947

看起来您正在使用 VMware 工作站或 Fusion，如果是，则有 3 种网络配置方式。

1.  NAT 模式（主机 PC 和 Internet）
2.  仅主机（主机 PC）
3.  桥接模式（主机 PC 和 Internet？？）

显然，如果您希望 VM 可以从主机访问，并且还需要自己的 Internet 访问权限，那么您最好的选择是 NAT 模式。Bridge 可能对您有用，但它取决于您是否有额外的有效 Internet IP 可以授予。有一个链接供您参考 ( [http://communities.vmware.com/docs/DOC-2527](http://communities.vmware.com/docs/DOC-2527) )。它是关于融合的，但工作站几乎是一回事。

以上希望对你有所帮助。

# python - Python中列表的循环索引

> ID：15441495
> 
> 赞同：4
> 
> 时间：2013-03-15T20:26:15.387
> 
> 标签：python, data-structures

`foo`假设我有一个包含例如元素的数组`[1, 2, 3]`，并且我想检索`foo`好像`foo`已“*无限连接*”的元素。

例如`foo[0:2]`将返回（如普通列表）：

`[1, 2]`

并`foo[0:5]`会返回：

```
[1, 2, 3, 1, 2] 
```

而`foo[7:13]`会返回：

```
[2, 3, 1, 2, 3, 1] 
```

Python 中是否有任何数据容器或扩展模块已经促进了这种类型的访问？如果不是，那么提供这个容器的好/简单的方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T20:39:23.123

恐怕您必须自己实施。不过这并不难：

```
class cyclist(list):
    def __getitem__(self, index):
        return list.__getitem__(self, index % len(self))

    def __getslice__(self, start, stop):
        return [self[n] for n in range(start, stop)]

foo = cyclist([1, 2, 3])
print foo[0:2]    # [1, 2]
print foo[7:13]   # [2, 3, 1, 2, 3, 1]
print foo[0:5]    # [1, 2, 3, 1, 2] 
```

它缺少一些细节，例如处理省略的切片参数、切片中的负数和切片步骤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T20:56:16.397

在处理看起来像列表但行为本质上不同的序列时，您应该小心。我建议使用 Pavel Anossov 的酷实现，但提供指定的`get_cyclic_item`and `get_cyclic_slice`，而不是覆盖列表的`__getitem__`and `__getslice__`。

该类的用户可以轻松地对他正在使用的列表的行为做出假设（期望 ISA 关系，如“cyclicallist IS A list”），这将导致错误/错误。

`cyclicallist`如果调用者不知道他使用的是 a而不是常规列表，以下是使用列表可能会令人困惑的情况的一些示例...

```
a = cyclicallist([ 0, 1, 2 ])
# appending a value at the end changes an "existing" index
print a[100]
a.append(99)
print a[100]
# deleting a value changes an index preceding it
print a[100]
del a[999]  # currently gives an error: IndexError: list assignment index out of range
print a[100]  # even if no error, what should this print?
# hmm...
del a[100:99999] 
```

当然，空的语义`cyclicallist`没有明确定义......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T01:09:06.723

即使与上面建议的基于模的实现相比效率低得离谱，我认为使用它`itertools`可能是一种有趣的方式......</p>

```
>>> from itertools import islice, cycle
>>> make_cyclic = lambda lst: lambda start, stop: list( islice( cycle( lst ), start, stop ) )
>>> make_cyclic( [ 1, 2, 3 ] )
>>> c(7, 13)
[2, 3, 1, 2, 3, 1] 
```

# mongodb - 编译 MongoDB C++ 驱动程序，Boost 错误（Windows）

> ID：15441496
> 
> 赞同：1
> 
> 时间：2013-03-15T20:26:18.460
> 
> 标签：mongodb, boost

我正在尝试在 Windows 上编译 MongoDB C++ 驱动程序。我正在使用 SCons“制作”工具。它给了我一个 Boost 错误，我有引导库，但我不确定如何让它与 SCons 构建文件链接。我习惯于在 VS 中添加引用。看起来我需要一个环境变量引用，但我不确定。

这是错误：

```
scons mongoclient
scons: Reading SConscript files ...
Checking for C++ library boost_thread-mt... (cached) no
Checking for C++ library boost_thread... (cached) no
Checking for C++ library boost_filesystem-mt... (cached) no
Checking for C++ library boost_filesystem... (cached) no
Checking for C++ library boost_system-mt... (cached) no
Checking for C++ library boost_system... (cached) no
scons: done reading SConscript files.
scons: Building targets ...
cl /Fobuild\mongo\bson\oid.obj /c src\mongo\bson\oid.cpp /TP /nologo /EHsc /O2 /
D_SCONS /DMONGO_EXPOSE_MACROS /Ibuild /Isrc /Ibuild\mongo /Isrc\mongo
oid.cpp
src\mongo/pch.h(48) : fatal error C1083: Cannot open include file: 'boost/shared
_ptr.hpp': No such file or directory
scons: *** [build\mongo\bson\oid.obj] Error 2
scons: building terminated because of errors. 
```

在 SConstruct 文件中，我找到以下内容，但不确定查找 boost 库的确切含义。

```
boostLibs = ["thread", "filesystem", "system"]
conf = Configure(env)
for lib in boostLibs:
    if not conf.CheckLib(["boost_%s-mt" % lib, "boost_%s" % lib],
                         language="C++"):
        if not win:
            Exit(1)
conf.Finish() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:40:18.750

所以我终于能够通过发现这个来提升 Libs 的出现：

```
scons --extrapath=c:\boost 
```

C:\boost 是 boost 的目录。我现在遇到编译器错误，但这比以前更严重。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T13:43:37.523

您可以使用 --cpppath 选项添加其他包含路径

```
--cpppath : Include path if you have headers in a nonstandard directory 
```

此外，请记住编译您的引导库并链接到包含 boost 库 .lib 文件的正确文件夹

```
--libpath : Library path if you have libraries in a nonstandard directory 
```

因此，您应该发出类似于以下的命令：

```
scons --cpppath=c:\boost --libpath=c:\boost\stage\lib 
```

# android - facebook 应用程序为登录和未知主机异常配置错误

> ID：15441499
> 
> 赞同：1
> 
> 时间：2013-03-15T20:26:27.010
> 
> 标签：android, facebook-android-sdk, android-facebook

我完全无法解决以下问题：

（问题会足够大）

我正在开发一个安卓应用程序。我想为此创建一个 facebook 登录。当我在我的机器（Linux）上工作时，我能够执行这些操作。我已经在 Fb 开发者网站上注册了我的应用程序。我也可以使用 Facebook 登录到我的应用程序。我还授予了获取电子邮件信息的权限。一切正常。我很高兴。我正在使用不推荐使用的方法。

现在，当我在我的朋友机器（Windows）上移动完全相同的代码时，它不能正常工作。（我的意思是不能正常工作，当我从我的应用程序中单击登录按钮时，它不幸停止了。）我已按照所有步骤操作在他的机器上也正确（据我所知），比如，我已经安装了 facebook sdk，在他的模拟器中安装了 apk（按照 fb 开发者网站上的说明）。我还使用他的模拟器中的 fb 应用程序检查了登录到 fb。一切正常。

但是，当我尝试从我的应用程序（在我的 PC 上运行的完全相同的代码）登录时，我收到以下消息：

```
Sorry , Login failed t reach facebook servers. Please check your network connection 
or try again later (unable to resolve host "api.facebook.com"
No address associated with hostname [java.net.UnknownHostException] 
```

但我知道网络连接运行良好。我得到的另一条消息是：流程成功进入我的应用程序页面（登录后）并说我的应用程序是

```
 misconfigured for facebook login 
```

但我没有更改我的应用程序的任何设置。为什么会这样？？我真的很烦！

请帮忙。在我的电脑上一切正常，但为什么不在这里？

另一个错误：登录错误！！并且我的 onFaceBook 错误也被调用了所有这些错误都是随机发生的

# python - 为什么这个 Python 函数会创建一个 Unix 可执行文件？

> ID：15441500
> 
> 赞同：0
> 
> 时间：2013-03-15T20:26:34.157
> 
> 标签：python, macos, unix

我正在创建一个原始套接字服务器来教自己更多关于网络的知识。在我尝试创建它时，我决定尝试创建一个“聊天记录”。我的计划是让服务器后端脚本（支持 Tkinter GUI 的脚本）将所有发送的消息附加到一个名为`old_msg.txt`.

为此，我创建了一个名为`old_msg`. 它在这里定义。

```
def old_msg(data):
    while True:
        oldmsg = open("old_msg.txt", "a+")
        try:
            oldmsg.write("%s \n" % (data))
        except TypeError:
            print "SERVER MSG >>> NO MESSAGE SENT"
        oldmsg.close() 
```

我在另一个函数中调用它，`clientthread`如果数据不为空，它会附加数据。

```
while True:

    #Receiving from client
    data = connection.recv(1024)
    if not data:
        break
    if data:
        connection.sendall(data)
        old_msg(data)
    print data

connection.close() 
```

不同寻常的是，这段代码创建了一个`UNIX_EXECUTABLE.`It is called `old_msg`，下面是 shell 中显示的一些文本。这重复了数千次。

```
/Volumes/***'s USB/Python Programs/Sockets/IM Project/Server/Different Idea/old_msg: line 43159: hello: command not found
/Volumes/***'S USB/Python Programs/Sockets/IM Project/Server/Different Idea/old_msg: line 43160: hello: command not found
logout 
```

为什么这段代码会创建一个 unix 可执行文件？

**编辑**

我向服务器发送了消息“Hello World”。[你可以在这里](http://pastebin.com/BtRUDdCE)找到 pastebin

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:57:37.593

此代码写入一个`old_msg.txt`包含消息的文本文件，`hello world`. 此文本文件使用非 UNIX 文件系统（如 FAT32）写入 USB 磁盘或记忆棒。因此，文本文件默认设置了执行位。这是因为 FAT32 没有执行位，并且 Mac OS X 显示和使用的 UNIX 权限是由操作系统组成的。此外，Mac OS X 似乎对`.txt`您隐藏了扩展名（我相信这在 Finder 的设置中是可调的）。所以你得到了一个名为`old_msg`. 当您单击它运行它时，操作系统会尝试将其解释为脚本，这会导致您看到错误消息；消息的第一个单词`hello world`被解释为要运行的 UNIX 命令的文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:46:04.253

此代码不会创建 unix 可执行文件。但是不知何故，您已将文件的可执行位设置为 true。但是，您的代码不会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:49:11.013

**这是部分答案。我对其他人持开放态度——这只是我发现的。**

我相信我的代码的问题是`while True`old_msg(data) 变量中的行。当我摆脱它时，没有创建脚本/exec/whatever-it-was。

问题是来自`old_msg()`函数的双循环和函数内的另一个循环`clientthread`。

# mercurial - Mercurial 更新没有要求合并和覆盖工作目录

> ID：15441504
> 
> 赞同：1
> 
> 时间：2013-03-15T20:26:47.157
> 
> 标签：mercurial, tortoisehg, bitbucket, visualhg

# 环境

*   两名开发商
*   [比特桶](http://bitbucket.org)
*   [TortoiseHg](http://tortoisehg.bitbucket.io)（水银）
*   [VisualHg](http://visualhg.codeplex.com)在 Visual Studio 2010 中使用

我们目前没有分支机构或单独的负责人。
我们每个人的个人电脑上都有自己的工作目录*（显然）*。

# 问题

**开发人员 A**将提交推送到[BitBucket](http://bitbucket.org)。
**开发人员 B**尝试进行提交和推送，但由于进行了更改而失败。
**开发人员 B**拉动了最新的变更集。
**开发人员 B**执行更新...

此时，当任何文件存在差异时，通常会出现合并弹出窗口。没有这样的弹出窗口，因此覆盖了**Developer B**的工作目录。

# 问题

有没有办法找回在**开发者 B**执行更新之前被覆盖的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:47:01.327

在从 repo 中提取时，您可能已经将头部设置为隐藏开发人员正在处理的另一个分支的特定变更集。要查看磁头列表，请使用`hg heads`，然后您可以手动合并它们，`hg merge -r <NUM1> -r <NUM2>`。

# php - symfony2 获取路由参数（控制器参数与请求）

> ID：15441507
> 
> 赞同：10
> 
> 时间：2013-03-15T20:27:09.277
> 
> 标签：php, symfony, parameters, routing, controller

哪个访问路由参数更快？

1.  将路由参数作为控制器参数
2.  获取路由参数`$this->getRequest()->get('param')`

那么请求对象呢？更好的方法是将请求对象作为控制器参数或`getRequest()`在控制器对象上调用方法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-15T20:53:54.450

有人可能会争辩说，由于您需要`Request`从容器中拉出对象，因此它的方法较慢，但我两者都做了，差异可以忽略不计。当您需要`Request`对象时，最好将其作为控制器方法参数，因为您将立即拥有它，并且 PHP 类型提示将在体面的 IDE 中提供附加信息（自动完成等）（我个人推荐 PHPStorm）。这也适用于其他控制器方法参数，给您直接变量，无需从其他地方拉两次。

```
class SthController extends Controller
  {
  public function indexAction(Request $request, $arg1, $arg2)
    {
    // you have $request object with type hint and all goodness
    }
  } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-02T08:53:39.040

我认为您应该使用 getRequest() 方法，因为它更具动态性！

# php - PHP循环遍历数组并找到最大值

> ID：15441509
> 
> 赞同：0
> 
> 时间：2013-03-15T20:27:20.207
> 
> 标签：php, arrays

嘿，我想看看这个数组中的**最高票数**是多少，然后从中获取**file_path**。

```
images =>
  backdrops =>
    0 =>
      file_path => /gM3KKiN80qbJgKHjPnmAfwxSicG.jpg
      width => 1920
      height => 1080
      iso_639_1 =>
      aspect_ratio => 1.78
      vote_average => 5.4529616724739
      vote_count => 19
    1 =>
      file_path => /7u3pxc0K1wx32IleAkLv78MKgrw.jpg
      width => 1920
      height => 1080
      iso_639_1 =>
      aspect_ratio => 1.78
      vote_average => 5.4509803921569
      vote_count => 22
    2 =>
      etc etc.... 
```

我尝试这样做，但无法获取任何数据：

```
foreach($theMovieData['images']['backdrops'][0]['vote_count'] as $key => $item) {
    echo $item;
} 
```

我会做错什么？在找到**最高票**​​后我将如何获得**file_path**？

 **谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:33:59.597

foreach 循环旨在循环遍历数组，您在发布的代码示例中试图实现的是单个变量中的循环。您应该将代码更改为：

```
$max = 0;
$pathMax = null;
foreach ($theMovieData['images']['backdrops'] as $data){
    $voteCount = $data['vote_count'];
    $path = $data['file_path'];
    if ((int)$voteCount > $max){
        $max = (int)$voteCount;
        $pathMax = $path;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:32:24.683

您需要迭代`backdrops`，而不是`votecount`. 还使用临时变量来存储和比较先前的值。

```
$temp = -1;
foreach($theMovieData['images']['backdrops'] as $key => $item) {

if ($item["vote_count"] > $temp)
$temp = $item["vote_count"];
} 
```**

# android - 如何使用共享首选项存储数据

> ID：15441510
> 
> 赞同：-3
> 
> 时间：2013-03-15T20:27:23.410
> 
> 标签：android, sharedpreferences

我正在制作一个简单的应用程序，其中用户在编辑文本小部件中输入输入。我想使用共享首选项存储字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:35:47.583

这是你的研究。这里有足够的例子和信息来回答你的问题。

[存储选项](http://developer.android.com/guide/topics/data/data-storage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:39:34.173

在提出问题之前尝试在谷歌中搜索，对于共享偏好，请检查此[**保存键值集**](http://developer.android.com/training/basics/data-storage/shared-preferences.html)

# assembly - NASM 没有打印出我所有的指令；跳过代码块

> ID：15441515
> 
> 赞同：0
> 
> 时间：2013-03-15T20:27:33.600
> 
> 标签：assembly, nasm

我正在开发一个玩具 NASM 程序，它将把特定程序中的所有值相加。我现在正在玩 NASM，因为我正在构建我的程序以了解一切是如何工作的。

到目前为止，在我的程序中，我已经放置了一系列显示“有效”的输出，这样我就可以缩小错误所在的范围。

目前我希望看到五份“工作”的打印件，但我只看到四份。显然，下面的代码`Output:`无法打印，但我一生都无法弄清楚原因。

```
segment .data
    ;studentInfo: db 10,'Program by Raphael Stein', 10, '6079652', 10, 10 ;
    ;infoLen: equ $-studentInfo

    NUM_ROWS: equ 5
    NUM_COLUMNS: equ 5
    NUM_ROW_BYTES: equ 10

    ;Default matrix
    matrix: dw  5, 4, 9, 7, 2
        dw  1, 4, 6, 8, 7
        dw  9, 9, 2, 3, 7
        dw  6, 5, 8, 3, 4
        dw  1, 2, 8, 2, 6   
    matrixLen: equ $-matrix

    sum:    db "The sum of the last column is: ", 10

    ;FOR TESTING
    works: db 'Works!', 10
    worksLen: equ $-works

segment .bss
    counter resb 1

segment .text
    global main

main:
;------------------------------------------------------------------------
    mov eax, 4      ; system call 4
    mov ebx, 1      ; standard output 
    mov ecx, works      ; Works!            1
    mov edx, worksLen
    int 0x80
;-------------------------------------------------------------------------
    ;mov CX, NUM_ROWS           ;Works!
    mov ECX, counter
    sub AX, AX
    sub EBX, EBX
    mov ESI, NUM_COLUMNS-1

;------------------------------------------------------------------------
    mov eax, 4      ; system call 4
    mov ebx, 1      ; standard output 
    mov ecx, works      ; Works!            2
    mov edx, worksLen
    int 0x80
;------------------------------------------------------------------------

sum_loop:               
    add EAX, [matrix + EBX + ESI*2]
    add EBX, NUM_ROW_BYTES
    add ECX, 1
    cmp EAX,ECX
    mov esi, eax
    jge Output
    LOOP sum_loop

;------------------------------------------------------------------------
    mov eax, 4      ; system call 4
    mov ebx, 1      ; standard output 
    mov ecx, works      ; Works!            3
    mov edx, worksLen
    int 0x80
;-------------------------------------------------------------------------

Output:
    mov eax, 4  
    mov ebx, 1
    mov ecx, works
    mov edx, worksLen
    int 0x80

;------------------------------------------------------------------------
    mov eax, 4      ; system call 4
    mov ebx, 1      ; standard output 
    mov ecx, works      ; Works!            4
    mov edx, worksLen
    int 0x80
;-------------------------------------------------------------------------

EXIT:
    mov eax, 1
    xor ebx, ebx
    int 0x80 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T00:06:36.053

我在这里看到了一些问题。没有特别的顺序：

*   您真的想将临时调试打印指令序列抽象为一个单独的函数。这将是一个很好的实践机会。这样做可以消除代码重复并可能消除一些错误。如...
*   在 sum_loop 标签下，第一条指令添加到 EAX。根据最近的修改（看起来像打印副本/粘贴），EAX 为 4。
*   所以在第一条 ADD 指令之后，EAX = 4 + address_of(matrix) + EBX + ESI*2。这将是......一个相当大的数量（地址会使它变大）。该代码将其与包含...“works”字符串的偏移量的 ECX 进行比较。同样，由于复制/粘贴，这看起来像是一个错误。ECX 可能应该是计数器，在前一个块中定义。
*   “jge 输出”指令从前一个 CMP 指令（即“CMP EAX，ECX”）获取结果。这样做的最终效果是：“如果 (EAX >= ECX) 然后转到输出”。指针在 .data 部分中的排列方式与（有时是偶然的）数学相结合意味着这是真的。这表示...
*   正在执行输出标签下的代码。至少，我的阅读表明了这一点。您的各种调试打印并没有真正提供任何正在触发的数据。我希望输出标签*之前*的调试打印块没有被执行。
*   sum_loop 无意中短路可能是一件幸事。否则，它永远不会终止。阅读 x86 LOOP 指令 - 递减 ECX，如果 ECX 不为 0，它会分支。请注意，您通过每次迭代将 1 添加到 ECX。所以，它在做：“ECX += 1; if (--ECX != 0) then loop”。这永远不会终止。

良好的开端和主动性。保持练习。

# wix - 使用自定义主题时，wix WixStdbaLicenseUrl 不会隐藏许可证

> ID：15441516
> 
> 赞同：2
> 
> 时间：2013-03-15T20:27:43.047
> 
> 标签：wix, burn

我用它来隐藏许可证对话框

```
<WixVariable Id="WixStdbaLicenseUrl" Value=""/ 
```

哪个有效，直到我使用

```
<WixVariable Id="WixStdbaThemeXml" Value="Resource\RtfTheme.xml" />
<WixVariable Id="WixStdbaThemeWxl" Value="Resource\RtfTheme.wxl" /> 
```

我的主题只是内置 RtfTheme 的副本，经过微调。我更改了窗口大小，并删除了修复按钮。

当我这样做时，将显示许可证对话框（尽管文本为空）。我希望对话保持隐藏。

为什么？怎么修？

这是我尝试过的几种变体之一：

```
<BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.HyperlinkLicense" >
    <bal:WixStandardBootstrapperApplication
            LicenseFile="..\..\Tools\Building\buildIncludes\LicenseAgreement-Memo.rtf"
      LogoFile="..\..\Tools\Building\buildIncludes\my.logo.png"
            SuppressOptionsUI="yes"
   />

</BootstrapperApplicationRef>
<!-- supress license display in boot strapper -->
<WixVariable Id="WixStdbaLicenseUrl" Value=""/>
<WixVariable Id="WixStdbaLicenseFile" Value=""/>
<!-- we are using a customized theme -->
<WixVariable Id="WixStdbaThemeXml" Value="Resource\RtfTheme.xml" />
<WixVariable Id="WixStdbaThemeWxl" Value="Resource\RtfTheme.wxl" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T15:26:07.313

默认情况下，基于 RTF 的许可证主题主题不提供隐藏 RTF 对话框的方法。您可以编辑主题以删除 RTF 许可证并自己接受复选框。

基于超链接的许可证主题**确实**提供了一种隐藏许可证超链接和接受复选框的方法，方法是将`bal:WixStandardBootstrapperApplication`元素的`LicenseUrl`属性设置为`""`.

因此，要回答您的问题，我建议您执行以下操作：

```
<BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.HyperlinkLicense">
  <bal:WixStandardBootstrapperApplication LicenseUrl=""
       LogoFile="="..\..\Tools\Building\buildIncludes\"
       ThemeFile="Resources\CustomHyperlinkBasedTheme.xml" />

  <Payload SourceFile="Resources\OtherStuffIfYouNeed.It" />
</BootstrapperApplicationRef>
<WixVariable Id="WixStdbaThemeWxl" Value="Resources\CustomHyperlinkBasedTheme.wxl" /> 
```

重要的部分是将您的自定义主题基于超链接选项......或者只是自定义主题，这样它就没有您不想要的东西。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T01:17:06.270

猜猜我应该知道...由于我使用的是自定义主题，因此我可以通过编辑 RthTheme.xml 来删除 rtf 许可证文本和接受按钮的控件来解决该问题。

不过，在使用自定义主题时，将 WixStdbaLicenseUrl 设置为空字符串可能是一个错误。

希望我能得到自己的奖励积分！

# php - 无法链接到样式表和 javascript

> ID：15441519
> 
> 赞同：0
> 
> 时间：2013-03-15T20:28:02.153
> 
> 标签：php, html, apache, .htaccess

我正在使用 .htaccess 文件，因此您不必键入 index.php?url=

```
ErrorDocument 401 default
ErrorDocument 403 default
ErrorDocument 404 /404.html
ErrorDocument 500 default
RewriteEngine On
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

但我现在遇到的问题是我无法链接任何样式表和 javascript 文件，因为它直接进入索引页面。

请帮我找到解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:29:48.103

添加检查文件夹/文件是否存在：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

# javascript - 通过单击图像隐藏和显示 div

> ID：15441520
> 
> 赞同：2
> 
> 时间：2013-03-15T20:28:02.957
> 
> 标签：javascript, jquery, onclick, show-hide

我正在尝试根据单击的图像显示和隐藏 div，因此当您单击餐厅图像时，它会显示名为成员窗口的 div。我得到的错误是`Uncaught SyntaxError: Unexpected token {`.

这是一个单独的 JavaScript 文件上的脚本

```
 $(document).ready(resteraunt(){

    $('people').click(function(){
    $("memberswindow").show();

    });

    }); 
```

这是HTML

```
 <!DOCTYPE html>

   <html>

   <head> <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
       <script src="Wolfeboro_Connection/Scripts/homepage.js"></script>
       <script src="Wolfeboro_Connection/Scripts/menu.js"></script>

   <link rel='stylesheet' href='Wolfeboro_Connection/CSS/index.css'> 

   </head>

   <body>

   <img src="Wolfeboro_Connection/wc.png" id="wc">

   <a href='' onclick='resteraunt();'><img src='Wolfeboro_Connection/resteraunt.jpg'        
   id="resteraunt"></a>
   <a href='' onclick='map();'><img src='Wolfeboro_Connection/map.jpg' id="map"></a>
   <a href='' onclick='mail();'><img src='Wolfeboro_Connection/mail.jpg' id="mail"></a>
   <a href='' onclick='people();'><img src='Wolfeboro_Connection/people.jpg' id="people"></a>

   <div id="window"> <div id="memberswindow"> <input type="text" id="username"   
   placeholder="Username">

   <input type="text" id="loginpassword" placeholder="Password">

   <input type="text" id="email" placeholder="Email"> </div> </div>

   <div id="banner"> <h1> Wolfeboro Connection </h1> </div>

   </body>

   </html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T20:30:56.937

jquery 要求您通过表示符号“。”来声明目标元素是“类”还是“id”。和“#”分别

尝试这个：

```
$("#people").click(function(){
  $("#memberswindow").show();
}); 
```

您用于 document.ready() 调用的语法也不正确，请尝试将此作为完整解决方案：

```
$(document).ready(function(){
    $("#people").click(function(){
      $("#memberswindow").show();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:52:48.993

您不可能为不同的变体创建方法。想象一下，当你必须为 100 种不同的场景显示 div 时？

可以采取通用方法。

1.  为每个实体创建 rel/class 属性

    ```
    <div id="ListenAllClick">
      <a href="#"><img src="mysrx" rel="divIdToShow"/></a>
      <a href="#"></a>
    </div> 
    ```

2.  抓取所有锚点点击事件

    ```
    $(function() {  // equivalent to $(document).ready(function(){});

       $("a").on("click", function(eV) { 

          /* for better performance use 
              $("#ListenAllClick").on("click", "a", function() {});
              instead of 
              $("a").on("click", function() { 
          */
          eV.preventDefault();
          $("#" + $(this).attr("rel"/*"class"*/)).show();
       });
    }); 
    ```

# java - 如何确定 Hibernate Session 使用的 DataSource？

> ID：15441522
> 
> 赞同：7
> 
> 时间：2013-03-15T20:28:28.960
> 
> 标签：java, hibernate, junit, hsqldb

我有几个应该使用 HSQLDB 的单元测试，但我知道其中一些实际上是在访问物理数据库。我想在测试中添加一个检查，以确保正在使用的 DataSource 用于 HSQLDB 而不是 live DB。

从休眠会话对象（`org.hibernate.classic.Session`），我如何检查数据源

***更新：** 我还可以访问会话工厂 ( `org.hibernate.impl.SessionFactory`)。*

***详细信息：**休眠 3.2*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T21:12:40.580

不管 Hibernate/Spring 等的包装器和具体实现如何，您可以检查的不是 DataSource，而是数据库类型（这可能是合适的）。

这个想法是在使用[DatabaseMetaData](http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html)并针对它检查类型（因为 Hibernate 检测到方言）：

```
private boolean isTestDb(Session session) {
    return session.doReturningWork(new ReturningWork<Boolean>() {
        @Override
        public Boolean execute(Connection connection) throws SQLException {
            DatabaseMetaData metaData = connection.getMetaData();
            return metaData.getDatabaseProductName().startsWith("HSQL");
        }
    });
} 
```

请注意，可以按照您想要的方式更改方法主体（检查 JDBC URL，检查驱动程序名称，检查几乎所有内容）。

**编辑**：上面的方法适用于休眠 3.5+。

对于 Hibernate 早期版本（例如 3.2），它可能更容易：

```
private boolean isTestDb(Session session) {
    Conection connection = session.connection();//deprecated method, which was dumped in hibernate 3.5+
    DatabaseMetaData metaData = connection.getMetaData();
    return metaData.getDatabaseProductName().startsWith("HSQL");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T20:46:53.370

如果它是 的子类`AbstractTransactionalDataSourceSpringContextTests`，那么您尝试过 `getJdbcTemplate().getDataSource()`吗？

否则你可以试试

```
((SessionImplementor) session).getJdbcConnectionAccess().obtainConnection()
       .getMetaData().getDatabaseProductName() 
```

但这有点恶心。:) 并且似乎在 Hibernate 4.x 中引入。

### 编辑：

在旧版本上使用现已弃用的：

```
 ((SessionImpl) session).getSessionFactory().getConnectionProvider()
                           .getConnection().getMetaData().getDatabaseProductName(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T21:06:22.737

这完全是一个技巧，可能不起作用，因为您需要转换为您的设置可能未使用的特定类。

```
SessionFactoryImpl factory = (SessionFactoryImpl) session.getSessionFactory(); // or directly cast the sessionFactory
DatasourceConnectionProviderImpl provider = (DatasourceConnectionProviderImpl)factory.getConnectionProvider();
DataSource dataSource = provider.getDataSource(); 
```

`factory.getConnectionProvider()`返回`ConnectionProvider`可以[由任意数量的类](http://docs.jboss.org/hibernate/orm/4.0/javadocs/org/hibernate/service/jdbc/connections/spi/ConnectionProvider.html)实现的（接口）实例。其中之一是`DatasourceConnectionProviderImpl`，然后您可以使用它来获取数据源。

`DatasourceConnectionProviderImpl`应该是默认值，除非您使用的是休眠 C3P0 或 Proxool 池。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-25T13:12:17.143

如果您想在不打开新连接的情况下检测数据库提供者，您可能会发现使用方言类很有用。

```
 String dialectName = ((SessionFactoryImplementor)sessionFactory).getDialect().getClass().getSimpleName().toLowerCase();
    if(dialectName.contains("oracle"))
        ...
    else if(dialectName.contains("mysql"))
        ... 
```

# php - 新帖子的 Facebook 按钮代码错误

> ID：15441525
> 
> 赞同：1
> 
> 时间：2013-03-15T20:28:33.347
> 
> 标签：php, facebook, codeigniter, nginx, facebook-like

我有一个网站，其中上传的每张新图片都有自己**的查看页面**，其网址如下

```
http://mysite/pictures/view/27963\. // App is made with Codeigniter over nginx 
```

从大约一周前开始，**所有新图片都**显示了静态的点赞数：

![在此处输入图像描述](../Images/db62852ec87cf06a46d7ab658f11b937.png)

如果**我喜欢**任何新图片**，都会受到影响，请为它们添加 1 个赞**

但年长者显示了他们真实的喜欢数量。即，**此错误仅影响在给定日期**(03/12/2013) 之后发布的图片。

两个视图（旧的和新的）背后的代码完全相同：

```
<div class="fb-like" data-href="http://mysite/pictures/view/xxx" data-send="true" data-layout="box_count" data-width="450" data-show-faces="false"></div> 
```

所有元标记均已设置：

```
<meta property="fb:app_id" content="xxx" />
<meta property="og:title" content="My Site" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://mysite/pictures/view/27963" />
<meta property="og:image" content="http://mysite/documents/large/71b44e139f54400c2beaf459821dc1f3.jpg" />
<meta property="og:site_name" content="My Site" />
<meta property="og:description" content="My description" />
<meta property="fb:admins" content="yyy" /> 
```

使用[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)我有这些警告：

> 使用名称而不是属性的元：页面上的元标记使用名称“作者”指定，它与此对象类型的配置属性匹配。除非使用元属性而不是元名称属性指定，否则它将被忽略。
> 
> og:image 应该更大：larger：前提是 og:image 不够大。请使用至少 200x200，最好是 1500x1500 的图片。（最大图像大小为 5MB。）将使用图像“http://mysite/documents/large/fbc7f9f7a63552a9ce3192c2cf720b73.jpg”。

**og:** image 引用的图片存在且可达，且大于200x200。

**注意**：通过 FB 调试器传递失败的页面后，它们都**开始正常工作**，第二个警告“og：图像应该更大：更大：”消失。

欢迎任何建议...

# javascript - HTML Canvas 不会画线

> ID：15441533
> 
> 赞同：2
> 
> 时间：2013-03-15T20:29:05.997
> 
> 标签：javascript, html, canvas

我有以下代码来绘制一条线，但它不会绘制。我只看到画布边框。我在控制台中看不到任何错误。

索引.html：

```
<div id="chart_area">
     <canvas id="chart1" width="800" height="600"></canvas>
</div>
...
<script>
     processChart()
</script> 
```

样式.css：

```
#chart_area
 {
 text-align:center;
 color:red;

 } 

 #chart1
 {
 text-align:center;
 border:solid;
 color:blue;

 } 

#control_panel
 {
 text-align:center;
 color:red;
 float:right;
 clear:both;
 } 
```

图表.js：

```
function processChart() {
        var b_canvas = document.getElementById("chart1");
        var b_context = b_canvas.getContext("2d");
            b_context.moveTo([0,0]);
            b_context.lineTo([300,300]);
            b_context.stroke()  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:33:43.980

这些函数有两个参数，而不是一个数组。还要确保在绘制路径之前调用 beginPath，如果你不这样做，你以后会感到困惑 :) 你的代码应该是

```
b_context.beginPath();
b_context.moveTo(0, 0);
b_context.lineTo(300, 300);
b_context.stroke() 
```

一些画布教程：

*   [MDN](http://developer.mozilla.org/en/Canvas_tutorial)总是好的。
*   [来自 html5tutorial.info 的这个](http://www.html5tutorial.info/html5-canvas-path.php)看起来不错，并且专注于路径绘制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:41:02.430

你应该删除你的'['试试这个：

```
b_canvas = document.getElementById("chart1");
        var b_context = b_canvas.getContext("2d");
            b_context.moveTo(11,0);
            b_context.lineTo(200,300);
            b_context.stroke(); 
```

# javascript - 谷歌电子表格如何在不改变焦点的情况下检测单元格点击

> ID：15441535
> 
> 赞同：1
> 
> 时间：2013-03-15T20:29:12.273
> 
> 标签：javascript, jquery, google-sheets

我正在开发自己的基于 Web 的电子表格。我让它检测公式和其他单元格引用。我想做的下一步是...

当我激活功能栏（焦点）时，如果我的第一个字符是等号，并且我单击另一个单元格，我希望能够检测到该单元格然后返回到编辑栏并插入该单元格位置。

我遇到的问题是弄清楚如何在不让单元格获得焦点的情况下跟踪从公式栏到单元格的移动。剩下的我不会有问题。我在 JavaScript 中完成了大部分工作，并使用了相当多的 jQuery。我只是还没弄清楚要跟踪哪些事件。

至于例子，我正在开发的网站被锁定以进行开发，但是制作谷歌电子表格甚至使用 Excel，你应该看到我正在谈论的例子。

编辑栏是文本输入，所有单元格都在一个表格中并且是文本输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:34:25.273

使用“mousedown”事件并防止立即传播。这应该防止焦点发生，允许您引用文本输入但不向它发送焦点。

```
$(".cell input[type=text]").mousedown(function(event){

    if($("#formulaBar").val()[0] == "+"){

        event.stopImmediatePropagation();

        var cell = $(this).parent();
        var row = cell.attr("data-row");
        var col = cell.attr("data-column");

        //Do something with the formula bar
    }

}); 
```

我假设 HTML 标记是这样的：

```
<td data-row="0" data-column="0">
    <input type="text" />
</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:59:18.810

嗨，这是一个关于如何做到这一点的示例，使用 focusOut 和 by 和焦点，如果公式文本框以“=”开头，那么您可以添加单元格坐标并将焦点返回到您的公式文本框，如果您单击输入公式已完成，您可以保存它或其他任何东西。

```
<html>
    <head>
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    </head>
    <body>
    <input type="text" id="txtFormular" style="width:100%"/>
    <br />
    <input type="text"  id="txtCell1" Coord="A1"  style="width:50px"/>
    <input type="text"  id="txtCell2" Coord="A2" style="width:50px"/> 
    <input type="text"  id="txtCell3" Coord="A3" style="width:50px"/>
    <input type="text"  id="txtCell4" Coord="A4" style="width:50px"/>
    <input type="text"  id="txtCell5" Coord="A5" style="width:50px"/>
    <input type="text"  id="txtCell6" Coord="A6" style="width:50px"/>
    <input type="text"  id="txtCell7" Coord="A7" style="width:50px"/>
    <script>
    $(function(){
        var formulaOn = false;
        $("#txtFormular").focusout(function(){
        if(this.value.indexOf("=") == 0)
        formulaOn = true
        else
        formulaOn = false;
        });
        $('#txtFormular').keypress(function (e) {
          if (e.which == 13) {
            //Save you formula
            this.value = "";
            this.blur();
          }
        });
        $("input[id^='txtCell']").focus(function(){
            if(formulaOn)
            {
                var txtFormulaVal = $("#txtFormular").val();
                $("#txtFormular").val(txtFormulaVal +$(this).attr("Coord"));
                $("#txtFormular").focus();
            }
        });
    });
    </script>
    </body>
    </html> 
```

# python - Python - 如何检查字符串是否包含列表中的项目，以及当返回 true 时，将列表中的项目作为可在循环中使用的索引

> ID：15441537
> 
> 赞同：1
> 
> 时间：2013-03-15T20:29:15.360
> 
> 标签：python

基本上我希望它是：

*   循环检查字符串是否包含列表中的字符串/项目之一。基本上，“当列表的当前索引在查找时返回 true 时，将该项目作为字符串附加到新列表中”

来自另一篇文章的示例：

```
some_list = ['abc-123', 'def-456', 'ghi-789', 'abc-456']
for any("abc" in s for s in some_list):
    #s isn't the index, right? 
```

好吧，问题基本上是，我该怎么做。对不起，我的格式和英语不好，等等。

例子：

我有一个字符串 `"La die la Blablabla and flowers are red"`

我有一个数组*TheArray*，`['Blablabla', 'thisonewillnotbefound', 'flowers', 'thisonenoteither', 'red']`

我需要一个循环遍历数组中的每一项，只要找到其中存在的一项，它就会被附加到一个全新的列表中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T20:39:35.087

这将为您提供在文本中找到该单词的列表的索引列表

```
>>> text = 'Some text where the words should be'
>>> words = ['text', 'string', 'letter', 'words']
>>> [i for i, x in enumerate(words) if x in text]
[0, 3] 
```

[`enumerate`](http://docs.python.org/2/library/functions.html#enumerate)将采用一个迭代器并给另一个带有元组的迭代器，其中第一个元素是从 0 开始的索引，第二个是您传递给它的迭代器中的一个元素。

`[i for i, x in ...]`is a[`list comprehension`](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)只是编写 for 循环的一种简短形式

# android - 如何使用微调器将文本视图设置为字符串？

> ID：15441542
> 
> 赞同：0
> 
> 时间：2013-03-15T20:29:35.667
> 
> 标签：android, spinner

我有下面的代码，一旦从第二个微调器中选择一首诗，它应该在文本视图中显示一首诗摘录。摘录存储在字符串 xml 下的 values 文件夹中。问题是我不确定如何根据选择的内容将文本视图内容设置为诗歌，有人可以帮忙吗？

代码：

```
 public class Poets extends Activity implements
OnItemSelectedListener {

  // defining variables
Spinner PoetSpinner, PoemSpinner;
String Poets[] = { "", "Robert Burns", "James Beattie",
"Duncan MacGregor Crerar" };
String Poems1[] = { "", "Tam O Shanter", "Auld Lang Syne" };
String Poems2[] = { "", "Judgement Of Paris", "The Minstrel" };
String Poems3[] = { "", "A Poem Commemorating Robbie Burns",
"My Bonnie Rowan Tree" };

TextView selectedPoem;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

// set to fullscreen mode
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
  WindowManager.LayoutParams.FLAG_FULLSCREEN);
// set content view
setContentView(R.layout.poet);

initialize(); // call this method
}

public void initialize() {

// initializing items that are in the class
PoetSpinner = (Spinner) findViewById(R.id.spPoet);
PoemSpinner = (Spinner) findViewById(R.id.spPoem);
// Hide the second spinner
PoemSpinner.setVisibility(View.GONE);
selectedPoem = (TextView) findViewById(R.id.tvSelectedPoem);
// setting up array adapters
//
// for each spinner
ArrayAdapter<CharSequence> adapter = ArrayAdapter
.createFromResource(this, R.array.poet_arrays,
  android.R.layout.simple_spinner_item);
// Specify the layout to use when the list of choices appears
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
// Apply the adapter to the spinner
PoetSpinner.setAdapter(adapter);
PoetSpinner.setOnItemSelectedListener(this);

PoemSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

  public void onItemSelected(AdapterView<?> parent, View view,
    int position, long id) {
    Object poem = parent.getItemAtPosition(position);
    selectedPoem.setText(poem.toString());
  }

  public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

  }
});
}

  public void onItemSelected(AdapterView<?> parent, View view, int pos,
  long id) {
  ArrayAdapter<CharSequence> adapter = null;
  switch (pos) {
  case 1:
  adapter = ArrayAdapter.createFromResource(this,
    R.array.poem_arrays1, android.R.layout.simple_spinner_item);
  break;
  case 2:
  adapter = ArrayAdapter.createFromResource(this,
    R.array.poem_arrays2, android.R.layout.simple_spinner_item);
  break;
  case 3:
  adapter = ArrayAdapter.createFromResource(this,
    R.array.poem_arrays3, android.R.layout.simple_spinner_item);
  break;
  default:
  // Hide the poem spinner
  PoemSpinner.setVisibility(View.GONE);
  break;
}

if (adapter != null) {
  // Set the poem spinners content and show the spinner
  adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
  PoemSpinner.setAdapter(adapter);
  PoemSpinner.setVisibility(View.VISIBLE);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:31:58.720

```
Resources res = getResources();
String text = res.getString(R.string.insert_poem_identifier_here); 
```

该示例代码应该满足您的需求，只需插入您需要的字符串资源标识符。

# java - 从另一个类调用方法，得到错误

> ID：15441546
> 
> 赞同：0
> 
> 时间：2013-03-15T20:29:47.757
> 
> 标签：java, jakarta-ee, bluej

我从另一个类调用方法时出错。我在**StockManager类中，想在****Product**类中调用**toString**方法。

 **但我收到错误：*类 Product 中的构造函数产品不能应用于给定类型：必需：int.java.lang.String; 发现：没有参数；原因：实际参数列表和格式参数列表的长度不同*

顺便说一句，我正在使用 BlueJ。

请注意下面的 printProductDetails() 方法。这就是我想要写的。

这是我在 StockManager 课程中获得的所有内容。我正在尝试在下面的 printProductDetails() 方法中打印出 Product 类中 toString 的详细信息：

```
import java.util.ArrayList;

/**
 * Manage the stock in a business.
* The stock is described by zero or more Products.
 * 
 * @author (your name) 
 * @version (a version number or a date)
 */
public class StockManager
{
// A list of the products.
private ArrayList<Product> stock;

/**
 * Initialise the stock manager.
 */
public StockManager()
{
    stock = new ArrayList<Product>();
}

/**
 * Add a product to the list.
 * @param item The item to be added.
 */
public void addProduct(Product item)
{
    stock.add(item);
}

/**
 * Receive a delivery of a particular product.
 * Increase the quantity of the product by the given amount.
 * @param id The ID of the product.
 * @param amount The amount to increase the quantity by.
 */
public void delivery(int id, int amount)
{

}

/**
 * Try to find a product in the stock with the given id.
 * @return The identified product, or null if there is none
 *         with a matching ID.
 */
public Product findProduct(int id)
{
    return null;
}

/**
 * Locate a product with the given ID, and return how
 * many of this item are in stock. If the ID does not
 * match any product, return zero.
 * @param id The ID of the product.
 * @return The quantity of the given product in stock.
 */
public int numberInStock(int id)
{
    return 0;
}

/**
 * Print details of all the products.
 */
public void printProductDetails()
{
    Product string = new Product();
    string.toString(); {
                    System.out.println("Attempt to restock " +
                           name +
                           " with a non-positive amount: " +
                           amount);
                        }

}
} 
```

关于如何解决这个问题的具体帮助以及建议的一些原因将不胜感激谢谢。

产品类别：

```
/**
 * Model some details of a product sold by a company.
 * 
 * @author David J. Barnes and Michael Kölling.
 * @version 2011.07.31
 */
public class Product
{
// An identifying number for this product.
private int id;
// The name of this product.
private String name;
// The quantity of this product in stock.
private int quantity;

/**
 * Constructor for objects of class Product.
 * The initial stock quantity is zero.
 * @param id The product's identifying number.
 * @param name The product's name.
 */
public Product(int id, String name)
{
    this.id = id;
    this.name = name;
    quantity = 0;
}

/**
 * @return The product's id.
 */
public int getID()
{
    return id;
}

/**
 * @return The product's name.
 */
public String getName()
{
    return name;
}

/**
 * @return The quantity in stock.
 */
public int getQuantity()
{
    return quantity;
}

/**
 * @return The id, name and quantity in stock.
 */
public String toString()
{
    return id + ": " +
           name +
           " stock level: " + quantity;
}

/**
 * Restock with the given amount of this product.
 * The current quantity is incremented by the given amount.
 * @param amount The number of new items added to the stock.
 *               This must be greater than zero.
 */
public void increaseQuantity(int amount)
{
    if(amount > 0) {
        quantity += amount;
    }
    else {
        System.out.println("Attempt to restock " +
                           name +
                           " with a non-positive amount: " +
                           amount);
    }
}

/**
 * Sell one of these products.
 * An error is reported if there appears to be no stock.
 */
public void sellOne()
{
    if(quantity > 0) {
        quantity--;
    }
    else {
        System.out.println(
            "Attempt to sell an out of stock item: " + name);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:40:36.190

您需要在 Product 类中定义一个默认构造函数（不带参数），或者在获取 Product 实例时传递 int id、String name：

```
// ...
Product string = new Product(1, "test value");
string.toString();
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:46:39.433

该方法不应该`printProductDetails`打印所有产品`stock`吗？这就是文档所说的：

> *   打印所有产品的详细信息。

所以我的猜测是你需要实际迭代你的`stock`而不是尝试构建一个`Product`.

```
public void printProductDetails() {
    for (Product product:stock) {
        System.out.println(product);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:39:48.873

从你的问题来看，这就是我的想法。

您需要`toString()`在您的`Product class`. 将此方法添加到您的`Product class`

```
public String toString()
{
     String str = "\n******Product ******\n"+
                   "Name :"+this.name+
                   "\nType :"+this.type;
    return str;
} 
```

您可以使用`System.out.println(product)`where `product`is instance of`Product class`**

# c# - 如何使用 ABCpdf 检索自定义文档属性？

> ID：15441550
> 
> 赞同：1
> 
> 时间：2013-03-15T20:29:59.073
> 
> 标签：c#, abcpdf

[此页面](http://www.websupergoo.com/helppdf9net/source/4-examples/14-setprops.htm)提供了一个有用的示例，说明如何为 pdf 设置自定义文档属性。

所以我已经这样做了（并且我已经验证了文件中设置了自定义属性）：

```
Doc theDoc = new Doc();
int theID = theDoc.AddObject("<< >>");
theDoc.SetInfo(-1, "/Info:Ref", theID.ToString());
theDoc.SetInfo(theID, "/Company:Text", "ACME");
theDoc.Save(FileName); 
```

我正在尝试稍后检索该属性。我试过了：

```
Doc theDoc = new Doc();
theDoc.Read(FileName);
int theID = theDoc.AddObject("<< >>");
theDoc.SetInfo(-1, "/Info:Ref", theID.ToString());
return theDoc.GetInfo(theID, "/Company:Text"); //returns empty string 
```

和

```
//...read theDoc
int theID = theDoc.GetInfoInt(-1, "/Info");
return theDoc.GetInfo(theID, "/Company:Text"); //returns empty string 
```

有人知道我如何检索该属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:08:06.153

我找到了另一种设置这些值的方法：

```
if (theDoc.GetInfo(-1, "/Info") == "")
    theDoc.SetInfo(-1, "/Info:Ref", theDoc.AddObject("<< >>").ToString());
theDoc.SetInfo(-1, "/Info*/Company:Text", "ACME"); 
```

以这种方式设置值后，我可以像这样检索它们：

```
if (theDoc.GetInfo(-1, "/Info") == "")
    theDoc.SetInfo(-1, "/Info:Ref", theDoc.AddObject("<< >>").ToString());
string companyName = theDoc.GetInfo(-1, "/Info*/Company:Text"); 
```

# xml - 根据其唯一 ID 显示 XML 子元素信息

> ID：15441553
> 
> 赞同：0
> 
> 时间：2013-03-15T20:30:07.760
> 
> 标签：xml, xslt, xpath, coldfusion, hyperlink

我有一个存储电影及其演员的 XML 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="index.xsl"?>
<movies
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="movies.xsd">

<movie movieID="1">
    <actors>
        <actor actorID="1"> 
            <name>Bob</name>
            <age>23</age>
        </actor>

        <actor actorID="2"> 
            <name>Jack</name> 
            <age>25</age>
        </actor>

        <actor actorID="3"> 
            <name>James</name>
            <age>38</age>
        </actor>
    </actors>   
</movie>

<movie movieID="2">
    <actors>
        <actor actorID="1"> 
            <name>Mike</name>
            <age>19</age>
        </actor>

        <actor actorID="2"> 
            <name>Daniel</name>
            <age>29</age>
        </actor>

        <actor actorID="3"> 
            <name>Phil</name> 
            <age>41</age>
        </actor>
    </actors>   
</movie>

</movies> 
```

从上面的代码可以看出，我有 2 个“电影”元素，其中包含 3 个“演员”子元素。每个“movieID”都是唯一的，每个“actorID”在其对应的“movieID”父元素中都是唯一的。

这是我的 XSLT 代码，它在两部电影的列表中显示演员的姓名：

```
<xsl:template match="/">
    <xsl:text>Actors: </xsl:text>
    <xsl:apply-templates select="/movies/movie/actors/actor/name"/>
</xsl:template>

<xsl:template match="name">
      <xsl:element name="a">
          <xsl:attribute name="href">actor_details.cfm?actorID=<xsl:value-of select="../@actorID"/></xsl:attribute>
          <xsl:value-of select="." />
      </xsl:element>
      <xsl:element name="br" />
</xsl:template> 
```

所有 6 个演员的名字都根据他们对应的“演员 ID”超链接到 actor_details.cfm 页面。

这是我的 actor_details.cfm 代码：

```
<cfset MyXmlFile = Expandpath("movies.xml")>
<cffile action="READ" variable="xmlInput"  file="#MyXmlFile#">
<cfset MyXslFile = Expandpath("actor_details.xsl")>
<cffile action="READ" variable="xslInput"  file="#MyXslFile#">

<cfset xslParam = StructNew() >
<cfset xslParam["actorID"] = "#url.actorID#" >

<cfset xmlOutput = XMLTransform(xmlInput, xslInput, xslParam )>
<!--- data is output --->
<cfcontent type="text/html" reset="yes">
<cfoutput>#xmloutput#</cfoutput> 
```

这是我的 actor_details.xsl 代码

```
<xsl:param name="actorID">1</xsl:param>

<xsl:template match="/">
    <title>Actor details</title>
    <xsl:apply-templates select="/movies/movie/actors/actor[@actorID=$actorID]"/>
</xsl:template>

<xsl:template match="actor">
    <xsl:text>Name: </xsl:text>
    <xsl:value-of select="name"/>
    <xsl:element name="br"/>
    <xsl:text>Age: </xsl:text>
    <xsl:value-of select="age"/>
    <xsl:element name="br"/>
</xsl:template> 
```

当我单击页面上显示的 6 个演员姓名中的任何一个时，它会将我带到显示演员“姓名和年龄”的特定 actor_details 页面。我唯一的问题是在两部电影中有两个 ID 为 1 的演员、两个 ID 为 2 的演员和两个 ID 为 3 的演员。

因此，当我单击 Bob (actorID="1") 时，它会将我带到特定的 actorID 详细信息页面。但它不仅显示 Bob 信息（姓名和年龄），还显示 Mike 信息。

这是因为 Mike 的详细信息也与“actorID="1" 相关，只是它位于另一个电影元素中。我的程序无法区分位于不同 MovieID 中的相同 ActorID 之间的区别。它只显示所有相关信息到那个特定的 ID。所以无论我点击 Bob 还是 Mike（两者的 actorID="1"），页面都会显示 Bob 和 Mike 的信息（他们的姓名和年龄）。

这是 actor_details 页面显示的内容：

![演员页面](../Images/878a6a80f3d480d32178ceb01f180abd.png)

这就是我希望 actor_details 页面显示的内容：

![演员第 2 页](../Images/07219912976a0fb04ac6761eeda45a58.png)

因此，即使 Bob 和 Mike 具有相同的 ActorID，它们与不同的 MovieID 相关，因此，我想分别显示它们的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:43:06.780

你有两个选择。您可以将 MovieID 作为超链接中的参数传递：

```
<xsl:attribute name="href">actor_details.cfm?movieID=<xsl:value-of select="../../../@movieID"/>&amp;actorID=<xsl:value-of select="../@actorID"/></xsl:attribute> 
```

或者，您为每个演员定义唯一的 ID（不是在每部电影中）：

```
 <movie movieID="17">
     <actors>
          <actor actorID="17_1">...</actor>
          <actor actorID="17_2">...</actor>
 ... 
```

如果您选择第一个选项，则必须稍微修改您的 actor_details.xsl：

```
<xsl:param name="movieID"/>
...
<xsl:apply-templates select="/movies/movie[@movieID=$movieID]/actors/actor[@actorID=$actorID]"/> 
```

# asp.net - 为什么 JSON 返回值在生产中包含“\”但在暂存时没有？

> ID：15441558
> 
> 赞同：1
> 
> 时间：2013-03-15T20:30:42.780
> 
> 标签：asp.net, json, wcf

我有一个在同一个暂存站点和生产站点上运行的函数，在暂存 WCF 时返回一个 JSON 结果，就像我在浏览器调试器中观看它时一样正常，并且 JSON.parse(result) 是可以的。但是在生产中，相同的环境设置和功能，WCF 返回一个带有“\”的 JSON，或多或少像一个字符串，所以 JSON.parse(result) 会抛出错误、无效字符或 JSON.parse: bad escaped character。

示例：ON staging JSON 格式很好，可以解析为 JSON 数据类型。但在生产中，它看起来像这样：

```
{ "d" : [{"type": "SearchFilterModel.LookupSearchListItem", "base_where_clause": " (1 = 1)  and (last_name like \'%Yes%\') ", "filters": "[{\"operator\":[{\"OperatorId\":1,\"DisplayName\":\"Contains\",\"SqlName\":\"like\"}] }]} 
```

如您所见，JSON 数据源中已插入“\”，但暂存时未插入。有谁知道为什么在同一个 IIS6 服务器下却为 JSON 生成两个不同的结果？

# android - ContactsContract - 我应该显示哪些联系人？（可见组）

> ID：15441559
> 
> 赞同：2
> 
> 时间：2013-03-15T20:30:45.177
> 
> 标签：android, visible, contactscontract

我需要创建一个包含设备上找到的所有电话号码的列表。所以我所做的是查询`ContactsContract.Data.CONTENT_URI`如下：

```
 Uri uri = Data.CONTENT_URI;
    String[] PROJECTION = new String[] { Data.IN_VISIBLE_GROUP,// 0
            Data.DISPLAY_NAME, // 1
            Phone.NUMBER, // 2
            Phone.TYPE, // 3
            Phone.LABEL, // 4
    };
    String SELECTION = Data.MIMETYPE + "='" + Phone.CONTENT_ITEM_TYPE
            + "' AND " + Data.IN_VISIBLE_GROUP + " = 1";
    String[] SELECTARGS = null;
    String SORTORDER = null;
    Cursor c = getContentResolver().query(uri, PROJECTION, SELECTION,
            SELECTARGS, SORTORDER); 
```

当我在 Nexus 4 上运行代码时，无论我在“人脉”应用程序（默认联系人管理器）中设置的显示选项如何，光标始终充满相同的联系人。不应该根据该设置更改 Data.IN_VISIBLE_GROUP 的值吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T09:14:13.880

访问文档[`ContactsContract.Data`](http://developer.android.com/reference/android/provider/ContactsContract.Data.html)变量 IN_VISIBLE_GROUP

> int IN_VISIBLE_GROUP 只读 请参阅 ContactsContract.Contacts。

遵循[`ContactsContract.Contacts`](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html)和发现`IN_VISIBLE_GROUP`解释为：

> 此联系人是否应该在 UI 中可见的指示器。如果联系人至少有一个原始联系人属于可见组，则为“1”；否则为“0”。

因此，这似乎`Data.IN_VISIBLE_GROUP`与“人脉”应用可见性状态有关。

* * *

另一方面，当您单击它时，您会移到[此处](http://developer.android.com/reference/android/provider/ContactsContract.ContactsColumns.html#IN_VISIBLE_GROUP)提到的位置：

> 反映此联系人的任何 [ContactsContract.CommonDataKinds.GroupMembership的](http://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds.GroupMembership.html)[GROUP_VISIBLE](http://developer.android.com/reference/android/provider/ContactsContract.GroupsColumns.html#GROUP_VISIBLE)状态的标志。常数值：“in_visible_group”

其中`GROUP_VISIBLE`指：

> 指示属于该组的联系人是否应在任何用户界面中可见的标志。
> 
> 类型：整数（布尔值）常量值：“group_visible”

考虑到最后两个引号，它应该可以按您的预期运行！

# php - 如果表为空，则从视图中隐藏字段和字段名称

> ID：15441565
> 
> 赞同：0
> 
> 时间：2013-03-15T20:31:09.427
> 
> 标签：php, cakephp

我有一个显示项目字段视图的页面。这是我要完成的工作：如果表数据为空（例如，表单中没有输入城市的数据），那么我想隐藏字段和字段名称/标签。如此处所示：
![](../Images/5660624018c31fc84213a31a6df4c724.png)

因此，Notes、City 和 Branch 字段不应显示。我怎样才能做到这一点？

这是我的视图页面代码：

```
<div class="projects view">
<h2><?php echo __('Project'); ?>: <small><?php echo h($project['Project']['title']); ?></small></h2>
<div class="well">
    <dl>
        <dt><?php echo __('Name'); ?></dt>
        <dd>
            <?php echo h($project['Project']['title']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Url'); ?></dt>
        <dd>
            <?php echo h($project['Project']['slug']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Notes'); ?></dt>
        <dd>
            <?php echo h($project['Project']['description']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Branch'); ?></dt>
        <dd>
            <?php echo h($project['Project']['test']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Type of Work'); ?></dt>
        <dd>
            <?php echo h($project['Project']['type']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Street Address'); ?></dt>
        <dd>
            <?php echo h($project['Project']['street_address']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('City'); ?></dt>
        <dd>
            <?php echo h($project['Project']['city']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('State'); ?></dt>
        <dd>
            <?php echo h($project['Project']['state']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Supervisor'); ?></dt>
        <dd>
            <?php echo h($project['Project']['supervisor']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Supervisor Phone'); ?></dt>
        <dd>
            <?php echo h($project['Project']['supervisor_phone']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('# of Workers Needed'); ?></dt>
        <dd>
            <?php echo h($project['Project']['workers']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Hotel Name'); ?></dt>
        <dd>
            <?php echo h($project['Project']['hotel_name']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Hotel Address'); ?></dt>
        <dd>
            <?php echo h($project['Project']['hotel_address']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Hotel City'); ?></dt>
        <dd>
            <?php echo h($project['Project']['hotel_city']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Hotel State'); ?></dt>
        <dd>
            <?php echo h($project['Project']['hotel_state']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Hotel Phone'); ?></dt>
        <dd>
            <?php echo h($project['Project']['hotel_number']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Total # of Rooms'); ?></dt>
        <dd>
            <?php echo h($project['Project']['room_number']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Hotel Notes'); ?></dt>
        <dd>
            <?php echo h($project['Project']['hotel_notes']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('PPE'); ?></dt>
        <dd>
            <?php echo h($project['Project']['ppe']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Phases'); ?></dt>
        <dd>
            <?php echo h($project['Project']['phase_count']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('% Completed'); ?></dt>
        <dd>
            <?php echo h($project['Project']['percent_completed']); ?>%
            &nbsp;
        </dd>
        <dt><?php echo __('Start Date'); ?></dt>
        <dd>
            <?php echo $this->Layout->displayProjectDates($project['Project']['date_start']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('End Date'); ?></dt>
        <dd>
            <?php echo $this->Layout->displayProjectDates($project['Project']['date_end']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Project Duration'); ?></dt>
        <dd>
            <?php echo $this->Time->dateDiffDays($project['Project']['date_start'], $project['Project']['date_end']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Archived'); ?></dt>
        <dd>
            <?php echo $this->Layout->boolYesNo($project['Project']['archived']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Created'); ?></dt>
        <dd>
            <?php echo $this->Layout->displayTimeDefault($project['Project']['created']); ?>
            &nbsp;
        </dd>
        <dt><?php echo __('Modified'); ?></dt>
        <dd>
            <?php echo $this->Layout->displayTimeDefault($project['Project']['modified']); ?>
            &nbsp;
        </dd>
    </dl>
</div> 
```

现在我假设代码看起来像这样？：

```
 <?php if (!empty($project['Project']['city'])) { } ?> 
```

我仍在学习 PHP，经验不足，因此将不胜感激！如果您需要查看我的控制器以获得更好的想法，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:56:42.950

我通常检查它是否为 NULL 而不是空的。但逻辑是你检查城市的价值。因此，如果它为 NULL，您只需跳过它。只需修剪数据以确保它确实是空的，因为它们之间可能有一个空格，您将不知道它为什么仍在打印它。

希望您使用的是“foreach”循环，对吗？因为如果你不是，你将需要更多的逻辑编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:04:03.203

尽管您的`!empty()`方法是一个合适的解决方案，但您可以考虑将这个过程自动化一点。考虑到所有字段都在一个数组中，您可以“循环”通过数组，如果值不为空，则只输出一行。

但是在 PHP 中使用时要小心`empty()`，因为 PHP 会将任何 'falsy' 值视为 'empty'（例如`null`, `0`, `''`, `false`）将被视为空，因此*不会*输出 'zero' 。为了防止这种情况，请执行 'strict ' 与空字符串进行比较。您可能还需要检查`null`值*并*检查是否`value`是“标量”值，而不是（例如）数组（如果模型与其他模型有关联，则可以这样做）

通过使用数组，您不必重复检查每个字段，并且视图甚至可以重复用于您网站中的各种操作

例子;

```
foreach($project['Project'] as $name => $value) {
    if('' === trim($value) {
        // skip empty values
        continue;
    }

    ?>
    <dt><?php echo __($name); ?></dt>
    <dd><?php echo h($value); ?></dd>
    <?php
} 
```

请注意，您必须为 .po 文件中的字段名称添加适当的“翻译”（例如，阅读有关本地化的章节；

app/Locale/eng/LC_MESSAGES/default.po

```
msgid "type"
msgstr "Type of work" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T14:10:02.490

这是一个示例，应该对您有用：

```
<?php if (!empty($project['Project']['test'])): ?>
                <dt><?php echo __('Branch'); ?></dt>
                <dd>
                    <?php echo h($project['Project']['test']); ?>
                    &nbsp;
                </dd>
            <?php endif; ?> 
```

# mysql - 更新具有潜在冲突的主键字段

> ID：15441568
> 
> 赞同：0
> 
> 时间：2013-03-15T20:31:17.233
> 
> 标签：mysql, sql

我有一个需要乘以 10 来更新的主键字段。

目前我的身份证是：

```
`id`
- 1
- 2
- ...
- 10
- 11
- etc. 
```

要进行我尝试的更新：

```
START TRANSACTION;
UPDATE status SET id = id*10;
COMMIT; 
```

但是，我收到了 pk 投诉（因为 1*10 = 10，这是当前的主键）。

我将如何解决此问题并进行此更新？

**更新**：由于我需要更新旧表，这是必需的。我不是在寻找关于 db 设计的建议，而是我将如何完成这个更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:33:50.787

您的主键应该用于唯一标识每一行......不提供任何类型的排序。您不应该通过操作主键来尝试在其他项目之间放置项目。

相反，`OrderID`如果您需要能够硬编码这些行的任意顺序，请考虑向表中添加一列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:52:47.660

您可以在更新查询中提供 ORDER BY 语句：

```
UPDATE status SET id = id*10 ORDER BY id DESC; 
```

这应该可以防止任何冲突，因为首先更新较高的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T20:37:23.910

好吧，虽然我们对您的问题缺乏更巧妙的解决方案，但您可以

1.  创建具有相同结构的临时表
2.  做一个`INSERT INTO TEMP_TABLE SELECT id*10, --all other fields`. 这不会导致 id 冲突。
3.  从原始表中删除所有数据
4.  从临时表执行并`INSERT INTO`返回到原始表

**重要提示：**请确保在此之前进行备份。

# ios - 从 plist 获取更新的数据

> ID：15441573
> 
> 赞同：0
> 
> 时间：2013-03-15T20:31:28.300
> 
> 标签：ios, objective-c, cocoa-touch, dictionary, plist

我的应用设置 plist 中有一个 plist。

我有 2 个视图。

使用呼叫按钮的第一个视图-我从 appdelegate 字典中获取电话号码。第二个视图我设置了电话号码。当我更改电话号码时，没有任何变化。我需要重新加载应用程序以获取更改。

这是我的代码：Appdelegate：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Settings" ofType:@"plist"];
self.settingsDic = [[NSMutableDictionary alloc] initWithContentsOfFile:path]; 
```

第一视图：

```
self.app=(AppDelegate*) [UIApplication sharedApplication].delegate;
[self.app getDataFromPlist];
emergencyPhone=[self.app.settingsDic objectForKey:@"emergencyPhone"];
if (emergencyPhone.length==0) {
[btnEmergency setEnabled:NO];
btnEmergency.titleLabel.numberOfLines=3;
[btnEmergency setTitle:@" Not set " forState:UIControlStateNormal];
} 
```

设置视图：

```
- (IBAction)btnSaveSettings:(id)sender {
[self.app.settingsDic setValue:[NSString stringWithFormat:@"%@",etEmergencyPhone.text] forKey:@"emergencyPhone" ];
etEmergencyPhone.borderStyle=UITextBorderStyleNone;
[etEmergencyPhone setEnabled:NO];
NSString *path = [[NSBundle mainBundle] pathForResource:@"Settings" ofType:@"plist"];
[self.app.settingsDic writeToFile:path atomically:YES];
[self.app getDataFromPlist];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:12:22.523

```
self.app=(AppDelegate*) [UIApplication sharedApplication].delegate;
[self.app getDataFromPlist];
emergencyPhone=[self.app.settingsDic objectForKey:@"emergencyPhone"];
if (emergencyPhone.length==0) {
[btnEmergency setEnabled:NO];
 }
else{
[btnEmergency setEnabled:YES];
} 
```

# php - zip存档打不开

> ID：15441580
> 
> 赞同：0
> 
> 时间：2013-03-15T20:31:45.790
> 
> 标签：php, zip, ziparchive

所以我有以下代码：

```
$z = new ZipArchive();
$zopen = $z->open('https://github.com/AdamKyle/Aisis-Framework/archive/Aisis1.1.7.zip', 4);
if ($zopen === true) {
    for ($i = 0; $i < $zip->numFiles; $i++) {
        $filename = $zip->getNameIndex($i);
        var_dump($filename);
    }
} else {
    echo "fail";
}
exit; 
```

它不断导致失败。我提供的 URL 在浏览器中适用于我，但不适用于上述代码。这是怎么回事？

**更新**

我被问到什么结果：

`var_dump(stream_get_wrappers());`

是，他们在下面

```
array (size=12)
  0 => string 'https' (length=5)
  1 => string 'ftps' (length=4)
  2 => string 'compress.zlib' (length=13)
  3 => string 'compress.bzip2' (length=14)
  4 => string 'php' (length=3)
  5 => string 'file' (length=4)
  6 => string 'glob' (length=4)
  7 => string 'data' (length=4)
  8 => string 'http' (length=4)
  9 => string 'ftp' (length=3)
  10 => string 'phar' (length=4)
  11 => string 'zip' (length=3) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:01:52.447

阅读后，我认为`ZipArchive`不支持通过 URI 打开 zip 文件。

为了使用 zip，您首先需要将其复制到本地磁盘...

```
$content = file_get_contents('https://github.com/AdamKyle/Aisis-Framework/archive/Aisis1.1.7.zip');
file_put_contents('/tmp/name.zip', $content);
$zip = new ZipArchive();
$zip->open('/tmp/name.zip'); 
```

确保`allow_url_fopen`启用了 ini 设置。

# php - PHP 5.3.3 会忽略我的代码还是什么？

> ID：15441582
> 
> 赞同：0
> 
> 时间：2013-03-15T20:32:06.257
> 
> 标签：php

我正在使用一个非常简单的代码

```
<? if ($_GET["end"]=='1') { ?>
    <div id="header-message">
        this is the message
    </div>
<?  } ?> 
```

在我的公司服务器中，代码被忽略，浏览器显示 DIV

在我的个人服务器上，除非变量 $end 是 !="" 否则不会显示消息

我很难过什么会导致这个问题...是 phph 5.3.3 和 5.4 的区别吗？要不然？或者可能代码是错误的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:33:45.820

很可能是因为您缺少`php`php 标记的部分。

```
<? if ($_GET["end"]=='1') { ?>
    <div id="header-message">
        this is the message
    </div>
<?  } ?> 
```

变成

```
<?php if ($_GET["end"]=='1') { ?>
    <div id="header-message">
        this is the message
    </div>
<?php  } ?> 
```

**更新**

正如其他人所说，如果您启用了[short_open_tag](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)指令，则第一个选项是有效的。另请注意，从 PHP 5.4.0 开始，您不需要指定 short_open_tag 指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:38:22.137

`1`表示`true`但“1”是一个`string`或`'1'`。所以你使用 only `1`or `true`for 检查是真的。

并使用完整标签`<?php ... ?>`而不是短标签`<? ... ?>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:36:29.300

试试这个： if ($_GET["end"]==1) 而不是 '1'.. 如果你的 php.ini 允许短标签，他的代码也应该使用。

Maybe 在一个 case 中被读取为整数，在另一个 case 中被读取为 string。

# vb.net - Escape 键正在关闭没有代码或设置与之关联的 Windows 窗体窗体

> ID：15441583
> 
> 赞同：2
> 
> 时间：2013-03-15T20:32:12.440
> 
> 标签：vb.net, winforms

我在面向 .NET Framework 3.5 的 Visual Studio 2010 中使用 VB.NET。

在我们的（相当大的）客户端应用程序中，有一个表单（[Windows Forms](http://en.wikipedia.org/wiki/Windows_Forms)）我们遇到了问题。它使用 .ShowDialog 显示（它不是使用 .ShowDialog 显示的唯一表单）。表单上有 Close 和 Cancel 按钮，Enter 键和 Escape 键分别与这些控件相关联（在其他表单上也是如此）。按钮中的代码执行一个 Hide 方法调用以使表单不可见（它实际上是稍后在业务流程逻辑中卸载的），我们再次在其他地方使用其他表单执行此操作。

单击关闭或取消按钮可按需要工作。按下该`Enter`键也可以根据需要工作（运行关闭单击）。但是当按下 Escape 键时，首先运行 Cancel 按钮逻辑，正如预期的那样，但随后我们收到一个 Form Closed 事件，并且表单被卸载！

没有代码在其他地方寻找 Escape 键并在表单上执行 Close。我们尝试在 Closing 事件中设置 Cancel 参数，但无济于事 - 表单仍在卸载。我们还断开了 Escape 键与 Cancel 按钮的连接，按下 Escape 然后不会运行 Cancel 代码（如预期的那样），但 Form Closed 事件仍然会触发。

我无法在测试程序中复制这种行为，所以很遗憾我不能发布一个工作（实际上不工作）的代码示例。

关于发生了什么的任何输入？为什么 Escape 键关闭表单？

也许最重要的是，我需要做些什么来进一步调查并弄清楚呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T10:01:25.000

第一个嫌疑人是`CancelButton`形式。还要检查`DialogResult`取消按钮的。

如果`CancelButton`将表单的 设置为按钮，则按下该`Esc`键会调用按钮的`Click`事件，将表单设置`DialogResult`为`Cancel`并关闭表单。此外，当您将[`DialogResult`](http://msdn.microsoft.com/en-us/library/system.windows.forms.button.dialogresult.aspx)按钮的属性设置为 以外的任何值`None`时，单击该按钮将关闭表单。来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.button.dialogresult.aspx)：

> 如果该属性的 DialogResult 设置为 None 以外的任何值，并且如果父窗体是通过 ShowDialog 方法显示的，则单击该按钮将关闭父窗体，而无需连接任何事件。

为了进一步研究，覆盖`OnFormClosing`表单上的方法，在方法上设置断点，当断点被击中时，给我们当前的调用堆栈（来自调用堆栈窗口）。

# asp.net-mvc - 在 MVC Razor 视图页面中使用 string.Format

> ID：15441584
> 
> 赞同：20
> 
> 时间：2013-03-15T20:32:13.240
> 
> 标签：asp.net-mvc, razor

我想使用`string.Format`这样的方式在 Razor 视图中渲染图像......

```
foreach (var p in @Model.Photos)
{                        
    string.Format("<img src='{0}' width='100' alt='{1}' />", p.Path, 
                                 p.AlternateText);                    
} 
```

这里显然有问题，因为在渲染此页面时，此部分中没有任何内容。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-15T20:34:48.463

`string.Format()`返回一个字符串，您将丢弃该字符串。

您需要将该字符串打印到页面：

```
@string.Format(...) 
```

请注意，由于这不是一个声明，所以不应该有`;`.

另请注意，最好使用 Razor 本身：

```
<img src="@p.Path" width="100" alt="@p.AlternateText" /> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-06-04T10:51:39.827

我只是这样做来解决这个问题：

```
@model UXLab.Areas.SectionArea.ViewModels.SectionViewModel
<section>
    <header>@Model.Title</header>
    <p>
        @{var contentBuilder = new System.Text.StringBuilder(); }
        @foreach (var link in Model.Links)
        {
            contentBuilder.append(Html.ActionLink(link.LinkText, link.Action, 
                                                    link.Controller));
        }
        @Html.Raw(contentBuilder.ToString())
    </p>
</section> 
```

在这个例子中，我遍历了一些我想显示到页面的链接，这些链接存储在`ViewModel`.

为了在页面上显示链接，我循环遍历它们，将它们附加到 a `StringBuilder`，然后用于`Html.Raw`显示原始 Html，如果您不使用，`Raw`那么您将无法通过页面示例获得引号和内容：

```
1: @String.Format("\"Hello {0}\"", Model.Name)

2: @Html.Raw(String.Format("\"Hello {0}\"", Model.Name)) 
```

第 1 行将显示`&#34; Hello &#34; Melman`
第 2 行将显示`"Hello Melman"`

只是我在玩输出到页面时发现的一些东西。基本思想是，您构建页面 html，然后显示它。因此，一种随用随存的方法，一旦你完成了对 html 输出的操作，你就可以使用`@`任何的外部站点来显示它`{}`

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-10-05T18:30:09.880

在 Razor 中使用确实`string.Format`很痛苦，但你*确实*有一个`Html.FormatValue`，这里是如何使用它：

```
@Html.FormatValue("value", "format") 
```

方法签名是：

```
FormatValue(object value, string format) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-30T15:26:27.517

我遇到了同样的问题，我已经使用 Url.Content 和 string.Format 完成了这样的操作：

```
<img src="@Url.Content(string.Format("~/Content/img/{0}", Resources.MyImage))" /> 
```

# scala - 具有泛型类型的 Scala 复制案例类

> ID：15441589
> 
> 赞同：11
> 
> 时间：2013-03-15T20:32:26.837
> 
> 标签：scala, generics, case-class

我有两个类`PixelObject`，`ImageRefObject`还有更多，但这里只是这两个类来简化事情。它们都是`trait Object`包含 uid 的 a 的子类。我需要通用方法，它将使用给定的 new 复制案例类实例`uid`。我需要它的原因是因为我的任务是创建一个类 ObjectRepository ，它将保存任何子类的实例`Object`并用 new 返回它`uid`。我的尝试：

```
trait Object {
  val uid: Option[String]
}

trait UidBuilder[A <: Object] {
  def withUid(uid: String): A = {
    this match {
      case x: PixelObject => x.copy(uid = Some(uid))
      case x: ImageRefObject => x.copy(uid = Some(uid))
    }
  }
}

case class PixelObject(uid: Option[String], targetUrl: String) extends Object with UidBuilder[PixelObject]

case class ImageRefObject(uid: Option[String], targetUrl: String, imageUrl: String) extends Object with UidBuilder[ImageRefObject]

val pix = PixelObject(Some("oldUid"), "http://example.com")

val newPix = pix.withUid("newUid")

println(newPix.toString) 
```

但我收到以下错误：

```
➜  ~  scala /tmp/1.scala
/tmp/1.scala:9: error: type mismatch;
 found   : this.PixelObject
 required: A
      case x: PixelObject => x.copy(uid = Some(uid))
                                   ^
/tmp/1.scala:10: error: type mismatch;
 found   : this.ImageRefObject
 required: A
      case x: ImageRefObject => x.copy(uid = Some(uid))
                                      ^
two errors found 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T21:39:38.437

我会坚持 Seam 提出的解决方案。几个月前我也做过同样的事情。例如：

```
trait Entity[E <: Entity[E]] {
  // self-typing to E to force withId to return this type
  self: E => def id: Option[Long]
  def withId(id: Long): E
}
case class Foo extends Entity[Foo] {
  def withId(id:Long) = this.copy(id = Some(id))
} 
```

因此，不是为你的 trait 的所有实现定义一个匹配的 UuiBuilder，而是在你的实现本身中定义方法。您可能不想在每次添加新实现时都修改 UuiBuilder。

此外，我还建议您使用自输入来强制执行 withId() 方法的返回类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:41:27.313

当然更好的解决方案是实际利用子类型？

```
trait Object {
  val uid: Option[String]
  def withNewUID(newUid: String): Object
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:50:17.640

转换为 A 可以解决问题 - 可能是由于您的案例类的递归定义。

```
trait UidBuilder[A <: Object] {
  def withUid(uid: String): A = {
    this match {
      case x: PixelObject    => x.copy(uid = Some(uid)).asInstanceOf[A]
      case x: ImageRefObject => x.copy(uid = Some(uid)).asInstanceOf[A]
    }
  }
} 
```

也许有一个更优雅的解决方案（除了 - 为每个案例类很好地实现 withUid，我认为这*不是*你所要求的），但这有效。:) 我认为使用 UidBuilder 执行此操作可能不是一个简单的想法，但它仍然是一种有趣的方法。

为了确保你不会忘记一个案例 - 我认为所有需要的案例类都在同一个编译单元中 - 制作你`Object`的 a`sealed abstract class`并添加另一个演员

```
this.asInstanceOf[Object] 
```

如果您在其中一个案例类中遗漏了一个案例，您将收到警告。

# arrays - 尝试将浮点值添加到 MIPS 中的数组但出现异常 7 错误

> ID：15441590
> 
> 赞同：0
> 
> 时间：2013-03-15T20:32:27.037
> 
> 标签：arrays, mips, spim

我必须编写一个程序，允许我在 2 个数组中添加和搜索浮点数，每个数组有 20 个位置（数组 HEIGHT 和 RADIOUS）。我在添加部分时遇到问题...我读取了用户输入，然后当我尝试将第一个浮点值添加到数组中时，我收到一个异常 7 错误...它说数据地址错误。我不知道还能做什么......我正在使用 Spim..

这是我的代码：

```
 .data
menu:    .asciiz "\nOptions: \n 0\. Exit \n 1\. Enter Firework \n 2\. Search Inventory \n . . . . . . . . .\n"
option1: .asciiz "Enter the height: \n"
option1b: .asciiz "Enter the radius: \n"
full:    .asciiz "Array is full\n"
height: .space 80 #array with 80 bytes (20 positions)
radius: .space 80 #array with 80 bytes (20 positions)
       .text

pre:
     addi $t1, $zero, 1 #register containing the value 1
     addi $t2, $zero, 2 #register containing the value 2
     la $s0, height #loads array height
     la $s1, radius #loads array radius
     add $t5, $zero, $zero #number of elements in the arrays height and radius
     addi $t7, $zero, 20 #max number of elements in the array

main:
     addi $v0, $zero, 4 
     la $a0, menu #load menus
     syscall #prints string

     addi $v0, $zero, 5
     syscall #reads options

     beq $v0, $zero, exit #goes to exit if option is zero
     beq $v0, $t1, op1 #goes to op1 if option is 1
     beq $v0, $t2, op2 #goes to op2 if option is 2

op1:
    slt $t6, $t5, $t7 #sets $t6 to 1 if (t5 < t7)

    bne $t6, $zero, message #if array height is full goes to message

    addi $v0, $zero, 4 
    la $a0, option1 #loads option1
    syscall #prints string

    addi $v0, $zero, 6
    syscall #reads float value

    swc1 $f0, 0($s0) #adds to array height
    addi $s0, $s0, 4 #advances array in one position

    addi $v0, $zero, 4 
    la $a0, option1b #load option1b
    syscall #prints string

    addi $v0, $zero, 6
    syscall #reads float value

    swc1 $f0, 0($s1) #adds to array radius
    addi $s1, $s1, 4 #advances array in one position

    addi $t5, $t5, 1 #increments counter in 1

    jr $ra

op2:
    j main

message:
    addi $v0, $zero, 4 
    la $a0, full #load menus
    syscall #prints string
    j main    

exit:
    jr $ra 
```

谢谢！

# c# - 如何在 Master->Slave 环境中使用 Solrnet？

> ID：15441591
> 
> 赞同：1
> 
> 时间：2013-03-15T20:32:32.363
> 
> 标签：c#, solrnet

我目前正在为我们公司实施 Solr 以替换我们的 GSA 系统，并且正在实施中。我正在使用 SolrNet 作为客户端访问代码，以通过 C# 与 Solr 交互。

现在我正在关注 wiki 并通过`Startup.Init<XosContentDocument>("http://localhost:8080/solr/xosContent");`. 然后我通过检索 solr 集合`ServiceLocator.Current.GetInstance<ISolrOperations<XosContentDocument>>();`

这目前有效（是的，我要将 url 移动到配置设置，因此它不直接在代码中）但是我对添加冗余后如何工作感到困惑。

我的计划是建立两个 Solr 实例，一个是主实例，第二个是从属实例，并在两者之间为读取请求提供一个内部可访问的域名（例如 solr.internal.whatever.com）负载平衡。但是，根据我对研究 Solr 复制的理解，我必须只对 master 进行写入，因为任何去往 slave 的写入都将在后续复制时被丢弃。

因此，我真的需要 2 个实例`ISolrOperations<XosContentDocument>>`，1 个指向查询负载均衡器的地址，另一个直接指向主 solr 实例的地址。由于我看到初始化和检索 an 的唯一方法`ISolrOperations<T>`是使用`Startup.Init<T>(); ServiceLocator.Current.GetInstance<ISolrOperations<T>>`，我如何实现这种双重性质？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T14:51:22.753

在主/从环境中使用 SolrNet 的过程与用于多核环境的过程相同。您可以在这里阅读更多相关信息：[https ://code.google.com/p/solrnet/wiki/MultiCoreAccess](https://code.google.com/p/solrnet/wiki/MultiCoreAccess)

更准确地说，我这样做的方式是让一个核心指向主服务器进行索引，另一个指向其他从服务器进行查询。

# mongodb - MongoDB - 按匹配字段数对结果进行排序

> ID：15441598
> 
> 赞同：1
> 
> 时间：2013-03-15T20:33:23.237
> 
> 标签：mongodb

假设我有一个只有 firstName 和 lastName 字段的非常简单的集合，并且我正在使用以下查询进行搜索：

`{"$or:[{"firstName":"John"},{"lastName":"Smith"}]}`

如何对结果进行排序，以便我首先获得与 John 和 Smith 匹配的文档，然后是 John 或 Smith？我需要为此使用聚合吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:51:59.320

好吧，我认为您需要使用聚合。我会使用这样的查询：

```
db.yourcollection.aggregate([

    /* Match documents with firstName == "John" OR lastName == "Smith" */
    {
        $match:{
            $or:[
                {firstName:"John"},
                {lastName:"Smith"}
            ]
        }
    },

    /* Project data creating a new field named "good".
       With the comparisons good will be true if
       firstName == "John" AND lastName == "Smith" */
    {
        $project:{
            _id:1,
            firstName:1,
            lastName:1,
            good:{
                $and:[
                    {$eq:["$firstName","John"]},
                    {$eq:["$lastName","Smith"]}
                ]
            }
        }
    },

    /* Sort by "good", descending, so true values come first */
    {$sort:{good:-1}}
]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T22:51:09.830

虽然v2.4 中的[文本索引](http://docs.mongodb.org/manual/release-notes/2.4/#text-indexes)仍然是一个实验性功能，但我相信它会给你你想要的东西。

如果您创建一个文本索引的权重`firstName`均等`lastName`，则查询结果将按分数降序排列，最高分数匹配两个字段。

# html - MySQL 不允许我使用 '<' 或 '>' 作为值

> ID：15441601
> 
> 赞同：-1
> 
> 时间：2013-03-15T20:33:29.127
> 
> 标签：html, mysql, special-characters, html-escape-characters

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:36:02.363

It is not related to database, it is related to strip_tags() function which strips HTML and PHP tags from a string

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:37:53.697

> when I put in '<' or '>' i receive blanks in my database.

That's what the [strip_tags](http://www.php.net/manual/en/function.strip-tags.php) method does

> and when I put in '☺' or '☻' i receive '?' as an input.

That's an [encoding](https://stackoverflow.com/a/11432833/1291428) problem.

As for

> Security of my database is at first priority

I suggest you migrate your code to prepared statements (mysqli or pdo).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:40:40.533

Use [`htmlentities`](http://php.net/manual/en/function.htmlentities.php) or [`htmlspecialchars`](http://www.php.net/manual/en/function.htmlspecialchars.php) instead of strip tags. Strip tags removes any HTML tags from the string. The two functions I mentioned convert the HTML tags into html entities (a textual representation of that character eg `&lt;`) which means they can be outputted on a page as text and not be parsed as HTML by the browser.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T13:18:23.570

Thank you guys for your help. I found the issue. The code that I am editing was changing the special character code from '&' to %HEX for database reasons.

# boost - 仅将 boost::units 添加到 C++ 项目

> ID：15441602
> 
> 赞同：0
> 
> 时间：2013-03-15T20:33:33.317
> 
> 标签：boost, boost-units

我有一个开源热力学属性库，它全部用 C++ 编码，我终于对处理单位感到沮丧。因此，我想添加`boost::units`到我的核心代码中，以便使用`boost::units`零（？）计算开销来完成所有单元处理。

但是我需要我的代码来运行跨平台/交叉编译器（Boost 可以做到这一点），并且理想情况下不需要下载所有 Boost，因为它不完全是一个小包。

我想知道：

是否可以只包含 Boost 的一小部分？甚至不下载 Boost 的其他部分？我知道如果不包含其他 Boost 模块，它们将不会包含在构建中，但我什至不想下载其他模块。

此外，是否`boost::units`需要编译还是仅标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:00:43.350

它是一个只有头文件的库，它确实依赖于其他 Boost 库。

快速检查表明您至少需要：

*   提升::数学
*   升压::mpl
*   boost::type_traits
*   boost::序列化
*   提升::配置
*   提升::实用程序
*   升压::λ
*   提升::版本

加上这些库可能包含的其他内容。从 1.49 版开始，所有这些库都只有标头。

如果你只是安装 Boost 而不编译它，你应该可以直接使用头库。安装后，如果跨多个平台安装标头的过程很繁琐，您可以将相关标头传输到 SVN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:03:49.190

我想出了如何做到这一点。以下是针对 Windows 的说明，但在其他平台上基本相同。

1.  下载最新的提升源

2.  `cd`进入 boost 源文件夹

3.  `bootstrap`

4.  `.\b2`建造一切，去喝杯咖啡

5.  [从http://www.boost.org/doc/libs/1_53_0/doc/html/boost_units/Quick_Start.html](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_units/Quick_Start.html)复制示例单元代码并保存到`sample.cpp`

6.  `"dist\bin\bcp.exe" --scan sample.cpp boost_units`

# javascript - 使用应用程序脚本在 Google 电子表格中拆分（拆分）合并的表格单元格

> ID：15441604
> 
> 赞同：4
> 
> 时间：2013-03-15T20:33:35.053
> 
> 标签：javascript, google-apps-script, google-sheets

在操作（复制/移动）包含合并单元格的范围时，我总是收到错误“您的粘贴与合并的单元格重叠。请取消合并单元格，然后重试”。但是，当尝试使用 取消合并范围内的单元格时`Range#breakApart`，我收到另一个错误：“无法合并选定的单元格。”，这更加令人困惑，因为我没有尝试合并任何内容，我只是想打破细胞分开。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T20:33:35.053

结果`breakApart`只有当它被调用的范围包含*所有合并的单元格*时才有效，而不仅仅是合并区域的一部分。

这不会太糟糕。一旦您意识到 API 中无法获取合并单元格的范围，问题就开始了。所以解决这个问题的最好方法（到目前为止我发现）只是轻轻地扩大你的范围，直到没有错误发生：

```
var breakRange = myRange;
for(;;) {
  try {
    breakRange.breakApart();
    break;
  } catch(e) {
    breakRange = mySheet.getRange(
      breakRange.getRowIndex(),
      breakRange.getColumnIndex(),
      Math.min(
        breakRange.getHeight()+5,
        mySheet.getMaxRows()-breakRange.getRowIndex()+1
      ),
      Math.min(
        breakRange.getWidth()+5,
        mySheet.getMaxColumns()-breakRange.getColumnIndex()+1
      )
    );
  }
} 
```

（我添加了五行/列而不是一个，因为获取范围似乎是一个相当昂贵的过程）。只要您在扩展搜索区域时没有添加其他合并的单元格，这就会很好地工作。

当涉及到电子表格中的合并单元格时，Google Apps Scripts API 从根本上至少在以下方面被破坏：

1.  无法在工作表/范围中获取合并单元格范围的数组。
2.  应该有一种方法可以查看哪些单元格已被拆分（`breakApart`仅返回“用于链接”的原始范围）。这使得无法拆分合并，然后让每个单元格包含原始合并单元格的内容。
3.  尝试`breakApart`在仅包含合并单元格的一部分的范围内使用仍应拆分整个合并而不是引发异常。

总而言之，目前的 API 仅适用于脚本作者自己可以完全控制其布局和使用的电子表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-24T13:54:56.090

此函数拆分与提供的单元格或范围**部分相交**的合并单元格的范围。它使用表格高级服务来识别给定表格中的所有合并范围，正如 Adam Morris ( [@clssrmtechtools](https://twitter.com/clssrmtechtools) ) 在此[线程](https://twitter.com/clssrmtechtools/status/1253585013087469568)中所建议的那样。

演示电子表格[在这里](https://docs.google.com/spreadsheets/d/1xWPAOQTuYiAasQai_IXRtduVWkXxn1WKn0r81aS_1Z4/edit?usp=sharing)。

```
/** 
* Breaks apart merged cells in range
* @param {sheet} sheet Sheet of range
* @param {range} rangeToSplit Cell or cells that intersect with whole merged range
*/
function breakApartAux(sheet, rangeToSplit) {

  // Current spreadsheet & sheet
  let ss = SpreadsheetApp.getActiveSpreadsheet();
  let activeSSId = ss.getId();
  let activeSId = sheet.getSheetId();

  // Get sheet's merges using advanced sheets service
  let merges = Sheets.Spreadsheets.get(activeSSId).sheets.find(s => s.properties.sheetId == activeSId).merges;

  if (merges == undefined) SpreadsheetApp.getUi().alert('No merged cells found in sheet.');
  else {

    // Logger.log(merges);

    // Cells to merge R/C
    let rowS = rangeToSplit.getRow();
    let rowE = rowS + rangeToSplit.getNumRows() - 1;
    let colS = rangeToSplit.getColumn();
    let colE = colS + rangeToSplit.getNumColumns() - 1;

    // Find overlapping merged range
    // Advanced service merged ranges start in 0 and are right-open [..)
    let merge = merges.find(m => {
                            let mRowS = m.startRowIndex + 1;
                            let mRowE = m.endRowIndex;
                            let mColS = m.startColumnIndex + 1;
                            let mColE = m.endColumnIndex;

                            // Check for overlapping
                            return ((rowS >= mRowS && rowS <= mRowE)  || 
                                    (rowE <= mRowE && rowE >= mRowS)  ||
                                    (rowS < mRowS && rowE > mRowE)) &&
                                   ((colS >= mColS && colS <= mColE)  ||
                                    (colE <= mColE && colE >= mColS)  ||
                                    (colS < mColS && colE > mColE));
    })

    // Overlapping range?
    if (merge == undefined) SpreadsheetApp.getUi().alert('No merged cells found in specified range.');
    else {
      // Break apart whole range
      ss.getActiveSheet().getRange(merge.startRowIndex + 1,
                                   merge.startColumnIndex + 1,
                                   merge.endRowIndex - merge.startRowIndex,
                                   merge.endColumnIndex - merge.startColumnIndex).breakApart();
    }
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-24T06:30:22.417

受拉斐尔回答的启发，这是如何取消合并工作表中的所有单元格。这是我用于合并具有相邻空值的单元格的数据导入的内容，即我将单元格 a1 与单元格 b1 取消合并，其中 a1 有一个值而 b1 没有：

```
function unmergeSheet() {

let mySheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet()
let myRange = mySheet.getDataRange()
myRange.breakApart();

} 
```

更新了 Juuso Nykänen 的建议

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-16T06:14:38.017

这是我发现的最简单的方法：

```
function unmerge() {
  var sheetName = 'Sheet1';   // Change!
  var a1Notation = 'A1:B15';  // Change!  
  var range = SpreadsheetApp.getActive().getSheetByName(sheetName).getRange(a1Notation);  
  var mergedRanges = range.getMergedRanges();
  for (var i = 0; i < mergedRanges.length; i++)
  {
    mergedRanges[i].breakApart();
  }
} 
```

# visual-studio - NuGet 包更新和 Package.config 删除问题 (TF400024)

> ID：15441609
> 
> 赞同：21
> 
> 时间：2013-03-15T20:33:43.447
> 
> 标签：visual-studio, nuget

我们最近遇到了 NuGet 包更新和 TFS 源代码控制集成的问题。这给我们的团队带来了很多麻烦，让我们在完全采用 NuGet 包时犹豫不决。

问题/错误：不是更新某些项目“package.config”文件，而是将它们从文件系统中删除（并在 TFS 源代码控制中标记为已删除）我不知道为什么。

*我们看到的行为如下*：

1.  在 VS.NET 2012 中打开解决方案（大约 18 个项目）
2.  通过包管理对话框启动解决方案级别包更新到最新版本，如此[处](http://docs.nuget.org/docs/start-here/managing-nuget-packages-using-the-dialog)所述。
    *   package.config 存在并且是所述选定解决方案中项目的一部分。
    *   这些 packages.configs 尚未从 TFS 中签出。
3.  发生 NuGet 包更新，选择 package.config 将从项目中删除并在 TFS 中标记为已删除，并且引用保留在项目中更新到当前版本。
4.  显然，这意味着当我签入解决方案和项目时，packages.config 将被删除，使未来的更新（我相信）像上面的项目一样痛苦，NuGet 不会注意到。
5.  我注意到这一点并撤消签出并收到此错误：

    ```
    TF400024: The change on xxx\packages.config cannot be undone because a file already exists at xxx\packages.config. The file must be deleted from disk for the undo to succeed. 
    ```

    *   有趣的是，对于 TFS，文件被标记为已删除但它仍然驻留在我的文件系统上？

下面列出的包管理器提供的输出并不表明已删除 package.config 的项目存在任何问题。

```
Updating 'NugetPackageAssemblyA' from version '1.5.18.0' to '1.5.23.0' in project 'CommonUnitTests'.
 Removed reference 'AssemblyAA.dll' from project 'CommonUnitTests'
 Removed reference 'AssemblyBB.dll' from project 'CommonUnitTests'
 Removed reference 'AssemblyCC.dll' from project 'CommonUnitTests'
 Removed reference 'NugetPackageAssemblyA.dll' from project 'CommonUnitTests'
 Added file 'packages.config'.
 Removed file 'packages.config'
 Successfully removed 'NugetPackageAssemblyA 1.5.18.0' from CommonUnitTests.
 Added reference 'AssemblyAA' to project 'CommonUnitTests'
 Added reference 'AssemblyBB' to project 'CommonUnitTests'
 Added reference 'AssemblyCC' to project 'CommonUnitTests'
 Added reference 'NugetPackageAssemblyA' to project 'CommonUnitTests'
 'packages.config' already exists. Skipping...
 Successfully added 'NugetPackageAssemblyA 1.5.23.0' to CommonUnitTests. 
```

**开发。环境统计：**

*   Nuget 包管理器：版本 2.2.40116.9051
*   Visual Studio 2012：版本 11.051106.01 更新 1

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-04-10T16:45:06.080

将代码简单地签入到 Visual Studio Online 对我来说就是诀窍。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-01-09T20:57:40.350

这里发生的事情（很可能）是您有 .dll 的先前版本（或相同版本）作为参考，并且在某些时候（无论您是这样做还是 VS 这样做），它删除了该引用。虽然您没有在文件夹中看到引用，但 TFS / GIT 签入过程仍在等待“签入”您已将其删除的事实。所以如果你没有检查这个事实，VS 认为它仍然存在，而实际上它不是。您可以在 Team Explorer 区域中验证这一点，您应该能够在该区域中看到已删除的 .dll（由一条穿过它的线表示）。

有点傻，但事情就是这样。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-02-02T11:08:46.237

我也有这个问题。

要解决这个问题：

1.  打开您的源代码管理资源管理器（Team Foundation）
2.  找到解决方案的“包”文件夹
3.  签入此文件夹

在此之后，您将可以安装 Nuget 包而不会收到 TF400024 错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-18T18:16:11.820

尝试：

*   解除所有项目与源代码控制的绑定
*   安装nuget包
*   再次重新绑定所有项目

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-01T20:25:53.333

我们的解决方法是检查整个解决方案，然后更新您的 NuGet 包。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-13T19:31:57.023

当您升级包含内容文件的包时，NuGet 会卸载旧版本，删除文件并导致删除挂起的更改。我为此避免的做法是：

1.  获得一个干净的工作空间
2.  打开包.json
3.  删除对旧 NuGet 包的引用
4.  像第一次一样安装 NuGet 最新版本

这样您就不必进行肮脏的签到。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-10T11:03:59.057

我有同样的问题。问题是我之前已经安装和卸载了这个包。即使我在安装后将项目签入 TFS，该包仍保留在我的 TFS 解决方案的包文件夹中。

为了解决这个问题，我打开了源代码管理资源管理器窗口并找到了包安装错误消息中标识的问题文件夹：“\packages[folder][package].nupkg 上的更改无法撤消，因为文件已经存在于 \包[文件夹][包].nupkg。必须从磁盘中删除该文件才能成功撤消。"

然后我删除了 \packages[folder] 并签入。

在此之后，我的 NuGet 包安装没有问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-20T21:23:50.320

如果您从 TFS 签出代码，并且由于包之间的复杂关系您无法重新加载一个或多个 nuget，这就是我所做的：

1.  删除整个解决方案文件夹。
2.  再次检查代码。
3.  右键单击解决方案，然后单击“还原 NuGet 包”

但只需确保在上次签入之前使用的代码可以正常工作。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-04-19T15:10:28.690

我有一个类似的问题，我做了以下事情：

1.  从我的电脑中删除文件。
2.  签入更改。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2019-04-10T11:43:32.510

在更新包之前清除 nuget 缓存可以解决问题。

# c++ - 在 PreTranslateMessage 中按 Ctrl+C 时收到 Ctrl+R 消息

> ID：15441623
> 
> 赞同：2
> 
> 时间：2013-03-15T20:34:06.600
> 
> 标签：c++, winapi, mfc

我有一个处理 PreTranslateMessage 中某些消息的 MFC 对话框应用程序。我感兴趣的其中之一是`Ctrl`+ `R`。但是，当我单击另一个窗口（Visual Studio 2010 中的代码编辑器、notepad++ 等）并使用`Ctrl`+ `C`（或 Ctrl+X）复制一些文本时，我会收到此消息。`Ctrl`请注意， +似乎不会发生这种情况，并且可以同时使用and`V`来重现。行为非常混乱！要重现，请在 Visual Studio 10 中创建一个基本的 MFC 对话框，将 pretranslate 添加为：`GetKeyState``GetASyncKeyState`

```
BOOL CPreTranslateTestDlg::PreTranslateMessage(MSG *pMsg)
{
    if (GetKeyState(VK_CONTROL) & 0x8000 && pMsg->wParam == 'R')
    {
        return true;
    }

    return CDialogEx::PreTranslateMessage(pMsg);
} 
```

在 上放一个断点`return true;`，启动对话框。然后转到您的 Visual Studio Code 窗口，然后`Ctrl`+`C`一些文本；你的断点将被击中。

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T21:14:14.303

`GetKeyState`旨在为您提供键的状态，无论您的对话框是否具有焦点，因此在您的情况下，它正确指示 Ctrl 已按下。

其次，您没有检查刚刚发生的消息的类型，因此它可能不是 keydown 等。我怀疑正在触发一条与键无关的消息，其 wParam 值恰好等于“R”。

我会更改代码，以便您检查您的对话框是否有焦点并用于`GetAsyncKeyState`确定是否`R`也关闭，例如

```
BOOL CPreTranslateTestDlg::PreTranslateMessage(MSG *pMsg)
{
    if (GetKeyState(VK_CONTROL) & 0x8000 && 
     GetKeyState(VK_R) & 0x8000 && 
     GetFocus == this)
    {
        return true;
    }

    return CDialogEx::PreTranslateMessage(pMsg);
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:58:17.633

我这样做是为了在对话框中捕捉键盘快捷键。

首先，您需要有一个加速器表，其中包含要在对话框中使用的加速器，在资源文件中。

例如：

IDR_MYDIALOG_ACCEL

```
IDC_CTRL_R    Ctrl+R    Virtkey 
```

在对话框的消息映射中，您应该有如下内容：

```
BEGIN_MESSAGE_MAP(CMyDialogDlg, CDialog)
  //{{AFX_MSG_MAP(CMyDialogDlg)
  ...
    ON_COMMAND(IDC_CTRL_R, OnMyCtrlRHandler)
    ON_WM_DESTROY()
  ...
    //}}AFX_MSG_MAP
END_MESSAGE_MAP() 
```

**OnMyCtrlRHandler**是快捷方式将调用的方法。

加载加速器表是在**OnInitDialog**中完成的，如下所示：

```
BOOL CMyDialogDlg::OnInitDialog()
{
  ...
    m_hAccel = LoadAccelerators ( AfxGetResourceHandle(), 
                                  MAKEINTRESOURCE(IDR_MYDIALOG_ACCEL) );
  ...
} 
```

`m_hAccel``CMyDialogDlg`作为type的成员`HACCEL`。

像这样覆盖 PretranslateMessage：

```
BOOL CMyDialogDlg::PreTranslateMessage(MSG* pMsg)
{
    if (::TranslateAccelerator(m_hWnd, m_hAccel, pMsg))
      return(TRUE);
    else
      return CDialog::PreTranslateMessage(pMsg);
} 
```

最后，您应该在 OnDestroy 处理程序中销毁加速器表：

```
void CMyDialogDlg::OnDestroy()
{
  ...
  DestroyAcceleratorTable(m_hAccel) ;
  ...
} 
```

# c# - 在 asp.net 网站中使用 Jeditable、JQuery 进行在线编辑

> ID：15441627
> 
> 赞同：1
> 
> 时间：2013-03-15T20:34:21.000
> 
> 标签：c#, jquery, asp.net-ajax, webforms, jeditable

我正在尝试将 Jeditable 插件与 Jquery 中的数据表一起使用。我已从数据库中检索数据并显示它。现在，我想为单元格添加内联编辑功能。我只能在 MVC 应用程序中找到编辑步骤，而不是在简单的 Web 表单应用程序中找到。

aspx页面如下：

```
 <asp:Repeater ID="rptBooks" runat="server">
  <HeaderTemplate>
    <table id="tblBookdet" cellpadding="0" cellspacing="0" border="0" class="display">
      <thead>
        <tr>
            <th>Book Name</th>
            <th>Image Path</th>
            <th>Description</th>

        </tr>
      </thead>
      <tbody>
  </HeaderTemplate>
  <ItemTemplate>
    <tr>
      <td><%# Eval("Name") %></td>
      <td><%# Eval("Imagepath") %></td>
      <td><%# Eval("Desc") %></td>

    </tr>
  </ItemTemplate>
  <FooterTemplate>
    </tbody>
    </table>
    </FooterTemplate>
</asp:Repeater>

   <script type="text/javascript">
       $(document).ready(function () {

           $('#tblBookdet').dataTable({
               "oLanguage": { "sSearch": "Search the Records:" },
               "iDisplayLength": 10,
               "aaSorting": [[0, "asc"]]

           });

           $('table#tblBookdet').dataTable().makeEditable({
           sUpdateURL: "Test.aspx"
           });

         });
</script> 
```

我重定向到的页面具有以下代码，只是为了查看“temp”是页面上的标签时发生了什么：

```
protected void Page_Load(object sender, EventArgs e)
    {
        var postedvalues = Request.Form;
        string key;
        key = postedvalues["columnName"];

        temp.Text = key;
    } 
```

我还读过在修改文本后按回车键调用 AJAX 发布方法。我应该如何捕获其中返回的值（在我的例子中是 Test.aspx 页面）？

# playframework-2.0 - 在 cloudbees 上部署时如何为用户指定哪个 application.conf

> ID：15441628
> 
> 赞同：5
> 
> 时间：2013-03-15T20:34:21.270
> 
> 标签：playframework-2.0, cloudbees

我按照这里的说明[https://developer.cloudbees.com/bin/view/RUN/Playframework](https://developer.cloudbees.com/bin/view/RUN/Playframework)并且可以部署。但它只使用application.conf。

我的应用 ID 是“mrm”，所以我在 conf 目录中创建了一个“mrm.conf”。

然后我尝试了“play cloudbees-deploy-config mrm”，但在部署后我收到以下错误消息：

```
[success] Total time: 110 s, completed Mar 15, 2013 9:08:36 PM
[error] Not a valid command: mrm (similar: run)
[error] Expected '/'
[error] Expected ':'
[error] Not a valid key: mrm (similar: run)
[error] mrm 
```

并且部署仍然使用application.conf

然后我运行play，输入：“cloudbees-deploy-config mrm”我没有错误，但是这种方式也部署了application.conf

我的“mrm.conf”包含以下内容：

```
include "application.conf"
cloudbees.applicationId=mrm 
```

我尝试按照此拉取请求中描述的说明进行操作： [https ://github.com/CloudBees-community/sbt-cloudbees-play-plugin/pull/1](https://github.com/CloudBees-community/sbt-cloudbees-play-plugin/pull/1)

根据 play help 应该是这样的：

```
cloudbees-deploy-config

  Deploy a configuration of your app to a Run@Cloud app id. Arguments are:
  (1) the base name of a conf file in your project's conf directory, defaulting to     "application"/
  (2) Optional. The application id to which this configuration should deploy. You can omit this
      arg if you have either set cloudbees.applicationId in the config file from the first
      arg or have set the project ID in your PlayProject.

  Example usage: `> cloudbees-deploy-config live`, where live.conf exists in the project's conf/
  directory and contains a key cloudbees.applicationId. 
```

关于我可能做错的任何提示？我需要它在 cloudbees 部署中使用 mrm.conf ......

回答：

```
play "cloudbees-deploy-config mrm" 
```

更新：刚刚在我的博客上发布了解决方案的摘要：[http ://www.poornerd.com/2013/04/08/how-deploy-play-framework-apps-with-different-configurations-to-cloudbees/](http://www.poornerd.com/2013/04/08/how-deploy-play-framework-apps-with-different-configurations-to-cloudbees/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T16:48:50.483

如何在 CloudBees 上调整应用程序/框架的配置因框架而异。您需要使用的基本技术是：

1.  弄清楚在本地运行时如何告诉应用加载此备用配置文件
2.  弄清楚如何让 CloudBees 在启动应用程序时做同样的事情

## 加载备用播放配置文件

根据 Play2 站点上的[Configuration](http://www.playframework.com/documentation/2.0/Configuration)或[ProductionConfiguration](http://www.playframework.com/documentation/2.0/ProductionConfiguration)文档，您似乎可以指定 -Dconfig.resource=CONF_FILENAME 系统属性来告诉 Play2 加载您的替代配置：

> 使用 -Dconfig.resource
> 
> 它将在应用程序类路径中搜索替代配置文件（您通常在打包之前将这些替代配置文件提供到您的应用程序 conf/ 目录中）。
> 
> ```
>  $ start -Dconfig.resource=prod.conf 
> ```

基于此，我们现在知道如何告诉您的运行时框架（Play）加载备用配置文件。接下来，我们需要弄清楚让 CloudBees 做同样的事情。

## 在 CloudBees 上设置系统属性

[CloudBees SDK包括用于](http://developer.cloudbees.com/bin/view/RUN/BeesSDK)[设置应用程序配置参数](http://developer.cloudbees.com/bin/view/RUN/Configuration+Parameters)的命令行选项，这些参数将在启动期间作为系统属性（对于基于 JVM 的应用程序）注入。这可以通过在 app:deploy 命令行上指定 -Pname=value 选项来完成，或者您可以改用 config:set 命令。

由于您使用 SBT 插件来部署您的应用程序（可能不支持此功能），因此使用 SDK 的 config:set 命令可能是最简单的：

```
bees config:set -a APPID config.resource=mrm.conf 
```

*注意：您需要重新启动应用程序才能应用此配置参数*

如果我正确理解 Play2 文档，这应该会导致 Play 在 conf/mrm.conf 中加载配置文件。

## 更简单的解决方案？- 只需覆盖密钥

根据您的示例，我注意到您似乎试图仅覆盖默认 application.conf 文件中特定配置键的值...

查看 Play [ProductionConfiguration](http://www.playframework.com/documentation/2.0/ProductionConfiguration)文档，似乎覆盖整个配置文件可能是矫枉过正，而您可以简单地使用系统属性指定要覆盖的值。CloudBees SDK [config:set](http://developer.cloudbees.com/bin/view/RUN/Configuration+Parameters)命令专为此用例而设计，为您注入自定义应用程序参数提供了一种简单的方法。CloudBees 上基于 Java 的堆栈会将这些参数作为系统属性注入，这意味着它们应该由您的 Play 应用程序自动获取。

根据您的 mrm.conf 文件中的示例覆盖，以下内容应该有效：

```
bees config:set -a APPID cloudbees.applicationId=mrm 
```

如果这对您有效，我会将其中一些信息添加回[CloudBees Play](http://developer.cloudbees.com/bin/view/RUN/Playframework)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:52:19.200

我建议逆转情况：对于实时应用程序，将 CloudBees 所需的所有配置都放入其中，`application.conf`这样您就不需要覆盖配置文件。

在本地机器上创建类似 local_conf.conf 的内容，并且只有 CloudBees 特定的“停用”配置参数。另外，您可以在本地环境中编写单行 bash 脚本，以运行具有附加配置的应用程序（因此您无需每次都使用 -Dconfig.file-...”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T20:16:15.463

这只是部分解决方案，但是：

如果我开始玩，然后输入“cloudbees-deploy-config mrm”，然后它与 mrm.conf 一起部署

# r - 尝试运行模拟时，“闭包”类型的对象不是子集错误

> ID：15441632
> 
> 赞同：1
> 
> 时间：2013-03-15T20:34:36.480
> 
> 标签：r, simulation

我正在尝试运行具有 5 个状态的概率矩阵的模拟。

```
N<-10 #for 10 simulations
state<-simulat(P,N,1) #P is a matrix defined earlier in my code

for(i in 1:N)
    {
        if (state[i]=='0')
        {
            time[i]<-rexp(1,Mu)
        }
        if (state[i]=='1' || state[i]=='2' || state[i]=='3')
        {
            time[i]<-rexp(1,(Mu+Lamda))
        }
        if (state[i]=='4')
        {
            time[i]<-rexp(1,Lamda)
        }
    }
Error in time[i] <- rexp(1, Mu) : 
  object of type 'closure' is not subsettable 
```

这是格式问题还是我错误地定义了我的状态[i]？我尝试将我的 [] 切换为 ()，但是它给了我一个错误，说它找不到函数“状态”，即使我刚刚在上面定义了它。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:51:12.427

除了我的评论，这是另一个解决方案：

```
tiempo <- ifelse(state == '0', rexp(N,Mu), 
                 ifelse(state == '4', rexp(N,Lambda), rexp(N, Mu+Lambda))) 
```

避免循环可能会缩短执行时间。

# c++ - C ++中运算符重载中的参数数量

> ID：15441633
> 
> 赞同：25
> 
> 时间：2013-03-15T20:34:39.910
> 
> 标签：c++, operator-overloading

我正在学习 C++，并创建了两个简单的 hello-world 应用程序。在他们两个中，我都使用运算符重载，但这是问题所在。在第一个上，我可以为重载运算符提供两个参数，这很好。

*标题：*

```
enum Element {a,b,c,d,e};
Element operator + (Element x, Element y);
//more overloads for -, *, / here 
```

*来源：*

```
Element operator + (Element x, Element y) {
    return ArrayOfElements[x][y];
} 
```

但是在我的第二个应用程序（简单的复数计算器）中 - 这种方法不起作用。在谷歌搜索并找出原因之后，我最终得到了以下代码：

*标题：*

```
struct Complex {
        double Re;
        double Im;

        Complex (double R, double I) : Re(R), Im(I) { }

        Complex operator + (Complex &Number);
        //more overloads
    }; 
```

*来源：*

```
Complex Complex::operator + (Complex &Number)
    {
        Complex tmp = Complex(0, 0);
        tmp.Re = Re + Number.Re;
        tmp.Im = Im + Number.Im;
        return tmp;
    } 
```

**它现在可以工作了，但我想知道，为什么在第一段代码中我被允许在`operator`重载中放置两个参数，但在第二个代码中我得到了以下错误？**

```
complex.cpp:5:51: error: 'Complex Complex::operator+(Complex, Complex)' must take either zero or one argument 
```

无论我是否使用类，它都是一样的。我一直在寻找许多文档，第二种方式似乎更正确。也许是因为不同的参数类型？

`-Wall -pedantic`使用参数编译的两个源`g++`都使用相同的库。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-15T20:48:35.173

假设你有一个这样的类：

```
class Element {
public:
    Element(int value) : value(value) {}
    int getValue() const { return value; }
private:
    int value;
}; 
```

有四种方法可以定义二元运算符，例如`+`.

1.  作为一个只能访问`public`类成员的自由函数：

    ```
    // Left operand is 'a'; right is 'b'.
    Element operator+(const Element& a, const Element& b) {
        return Element(a.getValue() + b.getValue());
    } 
    ```

    `e1 + e2 == operator+(e1, e2)`

2.  作为成员函数，可以访问类的所有成员：

    ```
    class Element {
    public:
        // Left operand is 'this'; right is 'other'.
        Element operator+(const Element& other) const {
            return Element(value + other.value);
        }
        // ...
    }; 
    ```

    `e1 + e2 == e1.operator+(e2)`

3.  作为一个`friend`函数，可以访问类的所有成员：

    ```
    class Element {
    public:
        // Left operand is 'a'; right is 'b'.
        friend Element operator+(const Element& a, const Element& b) {
            return a.value + b.value;
        }
        // ...
    }; 
    ```

    `e1 + e2 == operator+(e1, e2)`

4.  作为`friend`在类体之外定义的函数——与#3 的行为相同：

    ```
    class Element {
    public:
        friend Element operator+(const Element&, const Element&);
        // ...
    };

    Element operator+(const Element& a, const Element& b) {
        return a.value + b.value;
    } 
    ```

    `e1 + e2 == operator+(e1, e2)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T20:36:39.703

如果您更喜欢`operator+`将两个操作数都作为显式参数，则必须将其定义为自由（即非成员）函数：

```
class Complex {
    friend Complex operator+(const Complex& lhs, const Complex& rhs);
}

Complex operator+(const Complex& lhs, const Complex& rhs) {
    ...
} 
```

如果左操作数是原始类型或您无法控制的类（因此无法添加成员函数），您*必须使用这种形式。*

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-15T20:40:17.420

由于 + 是二元运算符，如果在结构/类中重载它，则只能再提供一个操作数，原因是第一个操作数隐式为调用对象。这就是为什么在第一种情况下，您有两个参数，因为它超出了类/结构的范围，而在第二种情况下，它被重载为成员函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-09T14:55:35.020

如果重载函数是类的成员函数，我们只传递一个参数，并且有一个隐藏参数（*this*指针）指向执行二进制操作所需的其他对象，如“+”。*this*指针指向操作数之一并调用重载函数；而其他操作数作为参数传递。例子：

```
class ExampleClass
{
public:
   int x;
   //a this pointer will be passed to this function
   ExampleClass& operator+(const ExampleClass& o){ return x+o.x; }
};

ExampleClass obj1, obj2, obj;
obj = obj1 + obj2; //the overloaded function is called as obj1.operator+(obj2) internally
                  //this pointer is passed to the function 
```

当重载函数不是成员函数（自由函数或友元函数）时，我们没有提供给重载函数的*this指针。*在这种情况下，编译器需要函数的两个参数用作操作数。

```
class ExampleClass
{
    public:
       int x;
       //this pointer will not be passed to this function
       friend ExampleClass& operator+(const ExampleClass& o1, const ExampleClass& o2){ return o1.x+o2.x; }
};

obj = obj1 + obj2; //the overloaded function is called as operator+(obj1, obj2) internally 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-22T07:02:45.140

e1 + e2 == e1.operator+(e2) 这意味着 e1 是一个对象，operator+ 是一个成员，e2 是一个变量。基本 oops 允许我们只编写 e1 + e2 编译器自动理解为 e1.operator+(e1 )

# c++ - “首先在这里定义”错误

> ID：15441636
> 
> 赞同：0
> 
> 时间：2013-03-15T20:34:48.990
> 
> 标签：c++, linux, gcc, qt-creator

我有一个错误，即使我有保护标头，我也无法将我的头文件包含在多个 cpp 中。当从 main 中删除 DatabaseManager 的包含时，ccode 构建得很好

这是头文件：

```
#ifndef DATABASEMANAGER_H
#define DATABASEMANAGER_H
#include <QSqlDatabase>
#include <QSqlQuery>
class DatabaseManager
{
 private:
    QSqlDatabase PatternLibrary;
    QSqlQuery query;
 public:
  DatabaseManager();
};
#endif 
```

这是.cpp：

```
#include "DatabaseManager.h"
#include <QSqlError>
#include <QDebug>

DatabaseManager::DatabaseManager()
{
} 
```

这是主要的：

```
#include "DatabaseManager.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    DatabaseManager x;
    MainWindow w;
    w.show();

    return a.exec();
} 
```

给出这些错误：

> /Code/DB_RangePattern-build-desktop-Qt_4_8_1_in_PATH_ *System* _Debug/../DB_RangePattern/main.cpp:6: 错误：首先在这里定义
> 
> collect2: ld 返回 1 个退出状态

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:44:02.590

您只发布了一个较大的错误，但我可以冒险猜测问题所在。您似乎不确定您的班级是`DataBaseManager`还是`DatabaseManager`（注意大写的变化`B`）。

此外，如果您的头文件与其他源文件一起使用，请确保您正在执行`#include "DatabaseManager.h"`（不使用`<`and `>`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:47:55.173

我很确定 QSqlDatabase 使用/包含 QSqlError 因为它有一个定义的公共函数

```
QSqlError   lastError () const 
```

并且重新定义将来自您的包括 QSqlError

# multithreading - 替代版本的交换！还返回换出的值

> ID：15441638
> 
> 赞同：4
> 
> 时间：2013-03-15T20:34:52.350
> 
> 标签：multithreading, concurrency, clojure, atomic

*我今天在 IRC 的#clojure*频道上谈到了这一点，但我想在这里更详细地介绍一下。基本上，为了更好地理解原子、`swap!`和`deref`Clojure 并发作为一个整体，我想尝试编写一个函数，它不仅返回使用 换入`swap!`的值，还返回换出的值。

```
(def foo (atom 42))

.
.
.

((fn [a]
  (do
    (println "swapped out: " @a)
    (println "swapped in: "(swap! a rand-int)))) foo) 
```

可以打印：

```
swapped out:  42
swapped in:   14 
```

但是，如果另一个线程在调用和调用`swap!`之间执行相同的原子，那么我可能会换出一个不是 42 的值。`@a` `deref``swap!`

如何编写一个正确返回两个值（换出和换入）的函数？

我不关心原子确实更改为的各种值：我只想知道换出的值是什么。

这可以使用保证不会死锁的代码来编写吗？如果可以，为什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T21:07:49.750

Clojure`swap!`只是一个旋转的比较和设置。您可以定义返回任何您喜欢的替代版本：

```
(defn alternate-swap [atom f & args]
  (loop []
    (let [old @atom
          new (apply f old args)]
      (if (compare-and-set! atom old new)
        [old new]  ; return value
        (recur))))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T20:43:01.527

原子是不协调的，因此似乎任何尝试在它自身的交换功能之外执行此操作都可能会失败。您可以编写一个您调用的函数而不是交换！它构造一个函数，在应用实际函数之前保存现有值，然后将此构造函数传递给`swap!`.

```
user> (def foo (atom  []))
#'user/foo
user> (defn save-n-swap! [a f & args] 
         (swap! a (fn [old-val] 
                    (let [new-val (apply f (cons old-val args))] 
                       (println "swapped out: " old-val "\n" "swapped in: " new-val) 
                       new-val)))) 
#'user/save-n-swap!
user> (save-n-swap! foo conj 4) 
swapped out:  [] 
 swapped in:  [4]
[4] 
user> (save-n-swap! foo conj 4) 
swapped out:  [4]
 swapped in:  [4 4]
[4 4] 
```

此示例打印它，将它们推送到存储在另一个原子中的更改日志也是有意义的

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T07:53:32.430

如果你想要返回值，Stuart 的答案是正确的，但如果你只是要做一堆 println 来了解 atom/refs 是如何工作的，我建议在 atom/ref [http:// clojuredocs.org/clojure_core/1.2.0/clojure.core/add-watch](http://clojuredocs.org/clojure_core/1.2.0/clojure.core/add-watch)

```
(add-watch your-atom :debug (fn [_ _ old new] (println "out" old "new" new))) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-16T08:11:12.020

您可以使用如下宏：

```
(defmacro swap!-> [atom & args]
  `(let [old-val# (atom nil)
         new-val# (swap! ~atom #(do
                                  (swap! old-val# (constantly %))
                                  (-> % ~args)))]
     {:old @old-val# :new new-val#}))

(def data (atom {}))

(swap!-> data assoc :a 3001)
=> {:new {:a 3001} :old {}} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-24T15:17:16.480

参考swap-vals！从 1.9 开始可用：[https ://clojuredocs.org/clojure.core/swap-vals%21](https://clojuredocs.org/clojure.core/swap-vals%21)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-13T21:51:49.003

您可以依靠承诺将当前值存储在`swap!`操作中。然后在向量中返回新旧值，如下所示：

```
(defn- swap-and-return-old-value!
  [^clojure.lang.IAtom atom f & args]
  (let [old-value-promise (promise)
        new-value (swap! atom
                     (fn [old-value]
                       (deliver old-value-promise old-value)
                       (apply f old-value args)))]
    [new-value @old-value-promise])) 
```

# python - 我可以对这些子图中的重叠标签做些什么？

> ID：15441646
> 
> 赞同：5
> 
> 时间：2013-03-15T20:35:27.707
> 
> 标签：python, matplotlib

下面是我用 matplotlib 创建的图。问题很明显——标签重叠，整个事情变得难以理解。

![在此处输入图像描述](../Images/f0f4890f2f24c87a36dd4cdaa37e2075.png)

我尝试调用`tight_layout`每个子图，但这会使我的 ipython-notebook 内核崩溃。

我能做些什么来修复布局？可接受的方法包括为每个子图固定 xlabel、ylabel 和标题，但另一种（也许更好）的方法是为整个图形设置一个 xlabel、ylabel 和标题。

这是我用来生成上述子图的循环：

```
for i, sub in enumerate(datalist):
    subnum = i + start_with
    subplot(3, 4, i)

     # format data (sub is a PANDAS dataframe)
    xdat = sub['x'][(sub['in_trl'] == True) & (sub['x'].notnull()) & (sub['y'].notnull())]
    ydat = sub['y'][(sub['in_trl'] == True) & (sub['x'].notnull()) & (sub['y'].notnull())]

    # plot
    hist2d(xdat, ydat, bins=1000)
    plot(0, 0, 'ro')  # origin

    title('Subject {0} in-Trial Gaze'.format(subnum))
    xlabel('Horizontal Offset (degrees visual angle)')
    ylabel('Vertical Offset (degrees visual angle)')

    xlim([-.005, .005])
    ylim([-.005, .005])
    # tight_layout  # crashes ipython-notebook kernel

show() 
```

**更新：**

好的，这`ImageGrid`似乎是要走的路，但我的身材仍然看起来有点不稳定：

![在此处输入图像描述](../Images/80533e6babe533ccb71b77bc1c580080.png)

这是我使用的代码：

```
fig = figure(dpi=300)
grid = ImageGrid(fig, 111, nrows_ncols=(3, 4), axes_pad=0.1)

for gridax, (i, sub) in zip(grid, enumerate(eyelink_data)):
    subnum = i + start_with

     # format data
    xdat = sub['x'][(sub['in_trl'] == True) & (sub['x'].notnull()) & (sub['y'].notnull())]
    ydat = sub['y'][(sub['in_trl'] == True) & (sub['x'].notnull()) & (sub['y'].notnull())]

    # plot
    gridax.hist2d(xdat, ydat, bins=1000)
    plot(0, 0, 'ro')  # origin

    title('Subject {0} in-Trial Gaze'.format(subnum))
    xlabel('Horizontal Offset\n(degrees visual angle)')
    ylabel('Vertical Offset\n(degrees visual angle)')

    xlim([-.005, .005])
    ylim([-.005, .005])

show() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:09:02.177

你想要`ImageGrid`（[教程](http://matplotlib.org/mpl_toolkits/axes_grid/users/overview.html)）。

第一个示例直接从该链接中提取（并稍作修改）：

```
import matplotlib.pyplot as plt
from mpl_toolkits.axes_grid1 import ImageGrid
import numpy as np

im = np.arange(100)
im.shape = 10, 10

fig = plt.figure(1, (4., 4.))
grid = ImageGrid(fig, 111, # similar to subplot(111)
                nrows_ncols = (2, 2), # creates 2x2 grid of axes
                axes_pad=0.1, # pad between axes in inch.
                aspect=False, # do not force aspect='equal'
                )

for i in range(4):
    grid[i].imshow(im) # The AxesGrid object work as a list of axes.

plt.show() 
```

# javascript - 使“输入”键从输入类型 =“文本”运行函数

> ID：15441647
> 
> 赞同：1
> 
> 时间：2013-03-15T20:35:29.480
> 
> 标签：javascript, html

所以，我在这里遇到了一个小问题。

我有一个文本字段（不是区域），我希望在按 Enter 时运行一个 JS 函数。这不是有一个单独的“提交”按钮。现在我正在尝试使用'onKeyPress'事件，但每次我输入一个字母时都会运行该函数。所以如果我想写'LIKE'，它会发布'L'然后'LI'然后'LIK'然后“喜欢”。每次我按下任何东西时它都会做出反应，而不仅仅是在我进入时。

我没有表格，只是一个简单的输入 type="text"：

```
<input type="text" id="' + post_id + '" onKeyPress="fbComment(\''+post_id+'\')"> Post a comment </input> 
```

如果你们中的一些人还记得我的最后一个问题，这将是我的 facebook_footer 变量的一部分（我正在尝试 FB API），完成的东西看起来像这样：

```
var facebook_footer = '<button onClick="fbLike(\''+post_id+'\')"> Like </button> <input type="text" id="' + post_id + '" onKeyPress="fbComment(\''+post_id+'\')"> Post a comment </input>'; 
```

你们中有人知道我能做些什么来完成这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:13:58.350

这是一个简单的功能 -

```
textElement.onkeydown=function(e){
    if(e.keyCode==13){
        alert('you press enter')
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T20:38:45.900

您可以检测输入中的回车键：

```
$("#inputIDHERE").keypress(function(e) {
    if(e.which == 13) {
        alert('You pressed enter!');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T19:31:16.823

这对我有用：

```
$("#inputIDHERE").bind('keypress', function(e) {
    if(e.which == 13) {
        alert('You pressed enter!');
    }
}); 
```

我还在输入标签周围添加了 <form></form>，尽管这可能不是必需的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T20:46:34.867

当然，你可以这样做——你只需要在你的 javascript 中添加一些额外的逻辑。

查看[键盘事件教程](http://javascript.info/tutorial/keyboard-events)

您只需要查看 keypress 事件即可查看输入的键。事件对象有一个 keycode 或哪个属性将具有对应于按下的键的值，并且 keycode 13 是输入/返回按钮。

附加参考：[Javascript 字符代码](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

# android - 两个自定义操作栏

> ID：15441653
> 
> 赞同：-2
> 
> 时间：2013-03-15T20:35:50.820
> 
> 标签：android, android-actionbar

我想在我的应用程序中获得两个操作栏，如下所示：

![图片](../Images/6a475463867effd0e22dae2c3dd63ba3.png)

是否可以？如果是，如何实施？它还必须在 Android 2.x 上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:43:11.483

> 是否可以？如果是，如何实施？它还必须在 Android 2.x 上运行。

是的，这是可能的。这是正常`ActionBar`的，有一个 Spinner、一些动作和一个溢出图标（实际上是两个，但你只能有一个，所以*这*几乎是不可能的）。`ActionBar`底部是[`split ActionBar`](http://developer.android.com/guide/topics/ui/actionbar.html#SplitBar)一个。您可以[`ActionBarSherlock`](https://github.com/JakeWharton/ActionBarSherlock)用于向后兼容。

# r - 多核编程：使用包`parallel`的主/从系统

> ID：15441655
> 
> 赞同：0
> 
> 时间：2013-03-15T20:35:58.940
> 
> 标签：r, parallel-processing

**这个问题在什么是在 R 中并行化矢量化函数的最简单方法中没有答案** *？*因为我不是要求一种简单的方法，而是要求通过主/从系统额外控制进程的操作以及何时死亡。

这是我的问题：我成功使用`mcparallel`并`mccollect`并行化了一些任务，如下所示（`X`是一个列表）：

```
p1 <- mcparallel( lapply( X[1:25],  function(x) my.function(x, theta) ) )
p2 <- mcparallel( lapply( X[26:50], function(x) my.function(x, theta) ) )
p3 <- mcparallel( lapply( X[51:75], function(x) my.function(x, theta) ) )
x4 <- lapply(X[76:100], function(x) my.function(x, theta) )

c( mccollect(p1), mccollect(p2), mccollect(p3), x4 ) 
```

的元素`X`大，参数`theta`小，目的是对 进行优化`theta`。请注意，这对我的问题`mclapply(X, ...)`表现*非常*糟糕（几乎没有时间获得）。`%dopar%`我也从包装中尝试过`foreach`：根本没有时间！

为了减少开销并避免每次计算出现新的分叉，我想使用[本 Rmpi​​ 教程](http://math.acadiau.ca/ACMMaC/Rmpi/)中示例的主/从逻辑。我可以为奴隶提供 的新值`theta`，这将避免在每次新计算时出现新的分叉，（我猜）在每个新分叉处复制整个内存，等等。由于`theta`很小，因此 的结果也很小，`my.function`进程之间的计算会很快，这将允许在后续计算中获得大量时间。

但是，有人告诉我 MPI 是一种更适合使用多台计算机的协议。我使用的是多核计算机（16 核），有人告诉我更轻的协议更适合。

你能给我一个建议吗？特别是，是否可以使用该`parallel`软件包在多核计算机上实现主/从系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:32:20.663

我找到了一个解决方案。

```
> library('parallel')
> makeCluster(2) -> cl
> # loading data to nodes:
> invisible(clusterApply( cl, 4:5, function(t) a <<- t ))
> # computations on these data with different arguments
> clusterApply( cl, 1:2, function(t) a+t )
[[1]]
[1] 5

[[2]]
[1] 7
> clusterApply( cl, 10:11, function(t) a+t )
[[1]]
[1] 14

[[2]]
[1] 16
> stopCluster(cl) 
```

我认为它会做我想做的事，但我仍然等待其他建议（因此我不接受我自己的答案）。

# c# - 本地网络获取文件路径但不上传文件

> ID：15441656
> 
> 赞同：1
> 
> 时间：2013-03-15T20:36:00.603
> 
> 标签：c#, asp.net, file

我知道出于安全原因上传文件时，浏览器在使用文件上传控件时不会获取文件目录。但我正在寻找的是让本地网络用户在网络驱动器中选择一个文件并捕获路径和文件名但不上传该文件。这只是将他们选择的文件存储在表格中。有没有办法做到这一点？某种解决方法？我唯一想到的是放置一个文本框并让用户复制/粘贴文件路径，但有没有更简单的方法？再次不上传文件只是捕获本地网络用户想要使用的文件和位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:16:04.367

无法使用文件上传控件（html 输入元素）来完成。您必须使用（可能）Flash 之类的插件或自定义 ActiveX 控件。

使用标准 Web 技术（html、css、js）无法实现您正在寻找的内容。

# r - 使用 auto.key 在格中填充符号颜色

> ID：15441661
> 
> 赞同：4
> 
> 时间：2013-03-15T20:36:24.223
> 
> 标签：r, lattice

我正在使用`xyplot`in `lattice`(R 15.2, lattice 0.20-13) 制作一个图，其中我有几个组，我想通过标记的形状来区分它们。我需要使用一个向下的三角形，它只能作为空心符号 ( `pch=25`) 使用，而向上三角形可以作为填充 ( `pch=17`) 或空心 ( `pch=24`) 符号使用。我可以在 中为这些符号指定轮廓颜色和填充颜色`par.settings(superpose.line())`，但是当我绘制 时`auto.key`，没有填充。有什么方法可以让`auto.key`与情节符号一致？

这是我所描述的一个例子：

```
data <- data.frame(x_var = rep(1:10, 2), y_var = rnorm(20), group=rep(c(1,2),each=10))

xyplot(y_var ~ x_var, groups=group, data=data,
       par.settings=list(superpose.symbol=list(col=c("red", "blue"), fill=c("red", "blue"), pch=c(24, 25), cex=2)),
       auto.key=list(space="right")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T14:21:53.480

我已经尝试过您的版本和今天[CRAN 提供](http://cran.r-project.org/web/packages/lattice/)的版本（0.20-14）。他们都未能填补传说中的符号。但是，您的代码可以在[0.20-10](http://cran.r-project.org/src/contrib/Archive/lattice/lattice_0.20-10.tar.gz)版本中正常工作。因此，恐怕您发现了一个错误。可以发邮件给维护者吗？

更新：此错误已在版本 0.20-15 中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-12T17:55:29.320

试试：par.settings = list(strip.background=list(col="red"), superpose.symbol = list (pch = c(17,19,22), col=c("red", "green", “蓝色的” ）））

# coffeescript - 基于对象属性值的对象数组的交集

> ID：15441670
> 
> 赞同：2
> 
> 时间：2013-03-15T20:37:09.087
> 
> 标签：coffeescript, underscore.js

```
array1 = [ { id: "a", score: 1 }, { id: "b", score: 3 }, { id: "c", score: 8 }]
array2 = [ { id: "a", score: 2 }, { id: "z", score: 5 }, { id: "c", score: 1 }]
array3 = [ { id: "a", score: 3 }, { id: "f", score: 2 }, { id: "c", score: 2 }] 
```

如何获得一个结果数组，其中仅包含具有 id 属性值且在所有数组中都相同的对象？IE：

```
resultyArray = [ 
  { id: "a", score: 1 }, 
  { id: "a", score: 2 }, 
  { id: "a", score: 3 },
  { id: "c", score: 8 },
  { id: "c", score: 1 },
  { id: "c", score: 2 }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:35:56.220

假设其 id 出现在每个数组上的对象是“无处不在的”（命名很难 =P）：

```
filterUbiquitousObjects = (arrays...) ->
  objectsById = {}
  (objectsById[obj.id] or= []).push obj for obj in arr for arr in arrays 
  [].concat (arr for id, arr of objectsById when arr.length is arrays.length)...

array1 = [{ id: "a", score: 1 }, { id: "b", score: 3 }, { id: "c", score: 8 }]
array2 = [{ id: "a", score: 2 }, { id: "z", score: 5 }, { id: "c", score: 1 }]
array3 = [{ id: "a", score: 3 }, { id: "f", score: 2 }, { id: "c", score: 2 }]

console.log filterUbiquitousObjects array1, array2, array3
# Output:
# [{id:"a", score:1}, {id:"a", score:2}, {id:"a", score:3}, {id:"c", score:8}, 
# {id:"c", score:1}, {id:"c", score:2}] 
```

嵌套`for`循环有点难看，但这应该是 O(n) （作为 n 对象的总数），除非我在某个地方搞砸了。

**更新**：你也可以这样做：

```
res = []
for id, arr of objectsById when arr.length is arrays.length
  res = res.concat arr
res 
```

而不是神秘的`[].concat (arr for id, arr of objectsById when arr.length is arrays.length)...`线。可以说它更具可读性并且会生成更理智的 JS :)

# cordova - 使用 Phonegap 从“FileTransfer.download”覆盖图像

> ID：15441671
> 
> 赞同：1
> 
> 时间：2013-03-15T20:37:15.290
> 
> 标签：cordova, filesystems

我有一个 phonegap Android 应用程序，它使用该`FileTransfer`元素从服务器下载图像。我将图像保存在`root.fullPath + "/namefile.jpg"`. 然后，如果应用程序在线，我保存图像，然后将图像的`src`属性设置为文件系统中图像的源，如果应用程序离线，我直接从文件系统中获取图像。

问题就在这种情况下；当服务器中的图像发生变化时，我再次下载它，但它仍然显示旧图像。然后，如果我关闭应用程序并再次打开它，它会加载正确的新更改图像。

这是代码

```
ft.download(
    uri,
    fs.root.fullPath+"/filename",
    function(entry) {
        alert("download complete: " + entry.fullPath);
        urlNuevo=entry.fullPath;
        $("#my_image").attr("src",entry.fullPath);//here is the problem it still shows the previous version of the image
    },
    function(error) {
        alert("download error source " + error.source);
        alert("download error target " + error.target);
        alert("upload error code" + error.code);
        urlNuevo= fs.root.fullPath+"/filename"
        $("#my_image").attr("src",fs.root.fullPath+"/filename");
    }

); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:17:22.017

浏览器正在根据 url 缓存图像。

如果您使用桌面 Safari 对本地 html 文件执行相同操作并手动换出图像文件，也会发生这种情况。除非您点击重新加载，并且只是再次访问该页面，否则浏览器将使用缓存版本。

您可以通过添加随机查询参数来使图像 url 唯一，否则会被忽略/无害。如果您有某种方法可以跟踪修订或修改日期，请改用它。

```
<img id="i" src="test.png" />
<script>
document.getElementById("i").src += "?_r=" + Math.random();
</script> 
```

# winforms - 为什么主窗体的 OnShow 不触发？

> ID：15441676
> 
> 赞同：5
> 
> 时间：2013-03-15T20:37:27.137
> 
> 标签：winforms, delphi, events

`OnShow`如果一个主窗体用一个过程填充几个列表框，我有一些东西`StuffLB`。在我的任何其他表单通过调用显示后，我需要重新填充这些列表框`ShowModal`。

在这样的模态窗体关闭后，主窗体只是在模态窗体所在的位置重新绘制，并且它的`OnShow`事件不会触发。

我可以让事件触发的唯一方法`OnShow`是：

```
frmM.Hide;
frmB.ShowModal;
frmM.Show; 
```

`StuffLB`每次`ShowModal`调用子表单后，我可以填充列表框以使用调用的唯一方法是什么？我有大约 25 种可用的表格。

我希望 OnShow 意味着它再次出现时，无论是部分还是全部。

我将不胜感激任何帮助或建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T20:43:49.143

`OnShow`当表单变得可见时触发事件。你可以使用的是`OnActivate`事件。但是，由于是您的代码调用`ShowModal`了另一种形式，只需将所需的代码放在单独的方法中，然后在此处和 in 中调用`FormShow`。

# sql - 无法为链接服务器初始化 OLE DB 提供程序“Microsoft.ACE.OLEDB.12.0”的数据源对象

> ID：15441682
> 
> 赞同：1
> 
> 时间：2013-03-15T20:37:54.383
> 
> 标签：sql, sql-server, sql-server-2008, linked-server

我正在尝试建立一个链接服务器，`SQL Server 2008 R2`从`Access database`. `Access database`不受密码保护。正如我在其他帖子（[特别是这篇](https://stackoverflow.com/questions/1362108/cannot-initialize-the-data-source-object-of-ole-db-provider-msdasql-for-linked)文章）中看到的那样，这通常是由于当前用户无法访问 NetworkService 文件夹中的 Temp 文件夹。由于我们在 中运行它`Windows Server 2008`，因此目录结构与大多数人所逃避的完全不同。我已允许访问 中的每个临时文件夹，`"root:\Documents and Settings\" directory`但无济于事。

这是我用来添加链接服务器的过程：

```
EXEC sp_addlinkedserver 
@server = N'OS_Access', 
@provider = N'Microsoft.ACE.OLEDB.12.0', 
@srvproduct = N'',
@datasrc = N'C:\RTBData\Data\OS.mdb';
GO 
```

它可以毫无问题地创建链接服务器，但我无法查看数据库的表/视图。同样，我的 ASP.NET 应用程序也无法访问它。

我都尝试过`ACE and JET(64-bit)`（通过安装 Office 的数据连接组件），但它们都不起作用。我还尝试将 ACE 提供程序配置`"Dynamic Parameter"`为`"Allow InProcess"`true。

此外，我尝试通过在 SQL 配置管理器中的字符串前面`MSSQLSERVER services`添加" 来增加内存使用率，以排除内存问题。`"-g512;``"startup parameters"`

如果有人能对此有所了解，那就太好了！谢谢！

**更新：**我使用 sa 帐户登录 SQL，并且能够查看链接服务器。我当前的用户帐户在 SQL Server 中具有完全权限，因此我不确定帐户之间的区别是什么。也许我授予`Temp`了 sa 帐户（内置）可以访问的错误文件夹的权限。如果有人能在这里为我指明正确的方向，那就太好了，我认为这也会帮助很多其他人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:37:05.953

我通过在控制面板中禁用 UAC 解决了这个问题。我不确定这做了什么改变，但它可能对其他人有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-21T17:26:22.743

```
USE [master]
GO
EXEC sp_configure 'show advanced options', 1
RECONFIGURE
GO
EXEC sp_configure 'ad hoc distributed queries', 1
RECONFIGURE
GO
USE [master]
GO
EXEC master . dbo. sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0' , N'AllowInProcess' , 1
GO
EXEC master . dbo. sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.12.0' , N'DynamicParameters' , 1
GO
SELECT *
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0','Name & Location of DB';;, [TableName]) 
```

# asp.net - 如果同样的事情可以通过后面的代码来实现，那么使用 xslt 和 xml 有什么好处？

> ID：15441691
> 
> 赞同：-5
> 
> 时间：2013-03-15T20:38:43.763
> 
> 标签：asp.net, xml, xslt

您好我最近开始在 ASP.NET (VB) 中使用 XML。我的查询如下。

1）如果后面的代码可以实现同样的事情，我为什么要使用xslt？2）你能推荐一个简单的xslt教程链接，像我这样的新手可以理解吗？3）我有一个看起来像这样的 xml 文件

```
 <video>
      <name>name</name>
      <source>source</source>
      <category>category</category>
      <date>date</date>
      <description>description</description>
      <image>image</image>
      <tags>tags</tags>   
 </video> 
```

我想以以下格式显示此文件

```
<ItemTemplate >
                <asp:Label ID="nameLabel" runat="server" Text='<%# Eval("name") %>' />
                <br />
                <asp:Image ID="ImgsLabel" runat="server" ImageUrl='<%# Eval("image") %>' />
                <br />
                Length:
                <asp:Label ID="lengthLabel" runat="server" Text='<%# Eval("length") %>' />
                <br />
                Dateloaded:
                <asp:Label ID="DateloadedLabel" runat="server" Text='<%# Eval("date") %>' />
                <br />
                <asp:Label ID="DescriptionLabel" runat="server" Text='<%# Eval("description") %>' Visible="False" />
                <asp:Label ID="sourceLabel" runat="server" Text='<%# Eval("source") %>' Visible="False" />
                <br />
                <asp:LinkButton id="SelectButton" Text="Select" CommandName="Select" runat="server" 
            />                   
            </ItemTemplate> 
```

正如你所理解的，这可以很容易地使用后面的代码来实现，但是为了学习，有人一步一步地指导我如何在 asp.net 页面中使用 xslt 来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:19:34.520

我开始搜索 xslt 示例并登陆此**[页面。](http://decoding.wordpress.com/2008/12/22/aspnet-how-to-use-an-xmldatasource-with-a-gridview/)** 请记住，这是我尝试 xml 和 xslt 的第一天。我通常在我的应用程序中使用 sql 数据源。

所以我有一个xml文件，基本上看起来像这样

```
 <?xml version="1.0" encoding="utf-8" ?>
   <!DOCTYPE video [
   <!ELEMENT video (name,embedsource,category,date,description,image,tags)>
   <!ELEMENT name (#PCDATA)>
   <!ELEMENT embedsource (#PCDATA)>
   <!ELEMENT category (#PCDATA)>
   <!ELEMENT date (#PCDATA)>
   <!ELEMENT description (#PCDATA)>
   <!ELEMENT image (#PCDATA)>
   <!ELEMENT tags (#PCDATA)>
  ]> <!-- This part is the Document Type Definition -->
  <video>
  <name>somename</name>
  <embedsource>some source</embedsource>
  <category>some category</category>
  <date>16/03/2013</date>
  <description>some description</description>
  <image>some image link</image>
  <tags>sometag1,,sometag2,,sometag3,,sometag4</tags>   
  </video> <!-- This part contains the actual data --> 
```

现在我们有了我们的数据，但我们需要某种方式来显示/将此数据提供给控件*（这可以是 gridview 或 datalist 或您喜欢的任何东西）*应用程序。我当然可以使用字符串函数或其他代码来实现这一点，但我们将使用**转换（您可以在*[w3school](http://www.w3schools.com/XSL/xsl_intro.asp)**链接**获得有关转换的更多信息*。 ）**

```
 <?xml version="1.0" encoding="utf-8"?>
     <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
     >
     <xsl:output method="xml" indent="yes"/>

     <xsl:template match="/">
       <video>
        <xsl:apply-templates select="//video"/>
       </video>
       </xsl:template>
       <xsl:template match ="//video">
       <video>
       <xsl:attribute name="name">
       <xsl:value-of select="name"/>
       </xsl:attribute>
       <xsl:attribute name="description">
       <xsl:value-of select="description"/>
       </xsl:attribute>
       <xsl:attribute name="category">
       <xsl:value-of select="category"/>
       </xsl:attribute>
       <xsl:attribute name="date">
       <xsl:value-of select="date"/>
       </xsl:attribute>
       <xsl:attribute name="embedsource">
       <xsl:value-of select="embedsource"/>
       </xsl:attribute>
       <xsl:attribute name="tags">
       <xsl:value-of select="tags"/>
       </xsl:attribute>
       </video>
       </xsl:template>
       </xsl:stylesheet> <!-- Notice that I am using Attribute in my xslt but in my xml
       file data is in Element form that is because DATASETS can only recognise 
       Attributes. Attributes and Elements are interchangeable in an xml file
       and it is entirely upto you. I can be wrong here please correct me if it is the
       case.  --> 
```

最后一步是配置 xml 数据源。文件路径是 xml 文件的路径，转换路径是 xslt 文件的路径。将数据列表添加到您的应用程序中，您内心的疯狂科学家就会变得 muhahahahahhahaaaa。

使用 xslt 的利弊仍然是开放的，我将很快结束这部分。

# php - PHP 选择值并使用 If 语句重定向

> ID：15441693
> 
> 赞同：0
> 
> 时间：2013-03-15T20:38:44.763
> 
> 标签：php, redirect, if-statement

我正在尝试创建一个 php scipt 来检查成员在登陆页面时是否经过验证。如果不是，他们会被重定向到登录并显示错误消息和说明。所以在页面上我有这个代码：

```
<?php
    if (loggedin()) {
        $check_active = "SELECT active FROM members WHERE username == '$username'";
        $active = mysql_query($check_active);
        if ($active < 1) {
            header("Location: login.php?verify=true");
        } else {
            exit();
        }
    }
?> 
```

它将用户重定向回登录页面，但无论他们是否处于活动状态，它都会这样做。活跃成员的值为 0（未验证）和 1（已验证）。我正在使用的脚本有问题吗？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:44:07.297

您需要处理`$active`结果并将其放入 PHP 变量/数组中。`$active`因为它在你的代码中只是一个*资源*（见[这里](http://www.php.net/manual/en/language.types.resource.php)）试试这个：

```
$active = mysql_query($check_active); // run query and return resource

$row = mysql_fetch_assoc($active);  // put resource data into php array   

if ($row['active'] < 1) {
    header("Location: login.php?verify=true");
} else {
    exit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:44:36.837

请不要使用旧的`mysql`，使用`mysqli_`或阅读[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)上的主题。

相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:45:10.030

查询后您没有正确获取数据。

在你执行 mysql_query 函数之后。试试这个：

```
$output = mysql_fetch_assoc($active);
$active_result = $ouput['active']; 
```

不知道能不能行。

并在那里为 SQL 注入增加一点安全性。并改用 MySQLi，因为您并不热衷于自己防止 SQL 注入。

# python - Matplotlib/Tkinter 错误：比较 collection3d 对象时出现异常

> ID：15441695
> 
> 赞同：2
> 
> 时间：2013-03-15T20:38:49.003
> 
> 标签：python, matplotlib, tkinter

Matplotlib 窗口的 Tkinter 回调引发了一个奇怪的异常。上下文：我在 QTconsole IPython 窗口中以 pylab 模式运行 Python 3.2。我正在编码的问题涉及三角形区域上的 3D 绘图。

（如果代码片段相当长，我深表歉意；我发现该错误难以重现。）

```
from mpl_toolkits.mplot3d import Axes3D
A,B,C,D = array([[0,0],[1,0],[1/2,1],[3/2,1]])
f1 = lambda x,y: NaN if x==y==0 else (y - 2*x)*sin(1/(x**2+y**2))
f2 = lambda x,y: NaN if x==y==0 else (y-2*x+2)*cos(1/(x**2+y**2))
(U,V) = meshgrid(linspace(0,1),linspace(0,1))

fig = figure(1)
ax = fig.add_subplot(111,projection = '3d')

(X1,Y1) = vectorize(lambda u,v: tuple(A + u*(B-A) + u*v*(C-B)), otypes = [float,float])(U,V)
(X2,Y2) = vectorize(lambda u,v: tuple(D + u*(C-D) + u*v*(B-C)), otypes = [float,float])(U,V)
Z11 = vectorize(f1)(X1,Y1)
Z21 = vectorize(f2)(X1,Y1)
Z12 = vectorize(f1)(X2,Y2)
Z22 = vectorize(f2)(X2,Y2)

ax.plot_wireframe(X1,Y1,Z11)
ax.plot_wireframe(X1,Y1,Z21)
ax.plot_wireframe(X2,Y2,Z12)
ax.plot_wireframe(X2,Y2,Z22)
show() 
```

绘制完所有这些补丁后，在图形窗口中单击鼠标会生成以下内容：

```
Exception in Tkinter callback
Traceback (most recent call last):
  File "C:\Python32\lib\tkinter\__init__.py", line 1399, in __call__
    return self.func(*args)
[snip]
  File "C:\Python32\lib\site-packages\mpl_toolkits\mplot3d\axes3d.py", line 191, in draw
    zlist.sort()
TypeError: unorderable types: Line3DCollection() < Line3DCollection()
Exception in Tkinter callback 
```

由于这是 Tkinter 引发的异常，我无法在 PDB 中捕获并分析它。（特别是，有很多未命名的参数传递给堆栈跟踪中的中间方法，因此无法手动跟踪它。）我已经能够弄清楚，Axes3D 实例确实正在尝试排序它的 Line3DCollection 对象列表并针对未实现的比较方法运行。

我的问题是：这是 Matplotlib 需要注意的错误，还是我犯了某种基本的用户错误？（如前所述，这个错误很挑剔；它并不总是出现，特别是如果我以不同的方式对三角形进行参数化。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:29:07.460

通过更新 mpl 1.2.1 修复了问题（如对 OP 的评论中所报告的）。

# rt - 在 bestpractical.com RT 中实施工作流程

> ID：15441696
> 
> 赞同：1
> 
> 时间：2013-03-15T20:38:49.457
> 
> 标签：rt

我想在 Bestpractical RT 中实现简单的工作流系统。我的做法是：

*   参与者（RT 用户）在业务流程（队列）内创建或获得工作项（工单）
*   OnResolve 脚本检查将 Ticket 状态更改为 Open 并将 TicketOwner 更改为 next Participant。
*   OnReject 脚本将 Ticket 状态更改为 Open 并将其返回给之前的 Participant。

我的问题是： - 是否有很好的脚本示例来操纵状态？- 如何调试脚本？- 如何禁用队列的内置脚本？

我读到可以为 RT 创建一个带有操作的模块，然后可以从脚本中调用这些操作，但找不到好的文档/示例。有的话请告知。

最后一个问题，如何在 RT 中开启开发者模式？

非常感谢您，

阿列克谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:27:37.743

我假设您运行的是 RT 版本 4.0.x。

对于您描述的工作流程，您可能希望为每个阶段创建新的工单，而不是将工单设置为已解决，然后重新打开它们。您可以在脚本中创建新票证来执行此操作。您还可以在它们之间创建链接关系，例如 Depends On 或 Parent Child。

[您可以在RT wiki](http://requesttracker.wikia.com/wiki/CustomConditionSnippets)上找到用户提供的各种条件示例。如果您在日志记录配置中打开调试模式，您将看到一堆脚本的调试输出。您还可以将警告语句放入代码中以查看 RT 日志中的其他输出。要禁用脚本，请编辑脚本并将舞台设置为禁用。这些内置脚本是全局的，因此如果您想为每个队列设置它们，您可以在队列配置下创建脚本以使其特定于队列。

动作和条件的最佳示例是 RT 代码本身。[您可以在主文档页面](http://bestpractical.com/rt/docs/latest/)的底部找到文档。从那里，您可以查看 RT 代码中的 lib 目录，以了解操作和条件是如何实现的。通过选择用户定义并使用脚本编辑页面上的文本框，通常更容易开始创建操作和条件。

[您可以在配置文件](http://bestpractical.com/rt/docs/latest/RT_Config.html#Development-options)中设置开发模式。利用你在 RT_SiteConfig.pm 中设置这些，而不是 Config.pm。您还需要将[日志级别设置为 debug](http://bestpractical.com/rt/docs/latest/RT_Config.html#Logging)。

# ajax - Django - 如何缓存 AJAX 结果 HTML 块

> ID：15441697
> 
> 赞同：2
> 
> 时间：2013-03-15T20:38:53.697
> 
> 标签：ajax, django, caching

我有一个搜索页面，默认情况下以随机顺序列出产品。单击产品可以查看它，然后有一个“返回”链接将您带回到产品列表 - 这是使用`{% cache %} <ul of results...</ul> {% endcache %}`memcached 以随机顺序保存的。一切正常（甚至缓存了一个 html 评论 @h:i:s 来检查）！

搜索有一个 ajax 增强界面，它可以完成您期望的所有 ajax 类型的东西；它还会更新 url 以反映与非 js 搜索完全相同的 url（在幕后与这个确切的 url 通信，仅在 url 自身中使用 /ajax/true/ 标志）。

当您使用ajax搜索甚至更改结果时，例如设置一个国家名称，然后单击查看产品，当您单击“返回”链接时，产品订购恢复为随机（因为它没有被缓存）；产品集已保存（从 url 生成）。

是否可以在 ajax 生成结果块时使用 django 缓存来缓存结果块，保持顺序并在您再次点击该 url 时设置完全相同？还是我应该调查其他途径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:41:50.747

缓存结果：

示例 ajax 搜索（带缓存）：

[https://github.com/tomchuk/django-ajax-tasks/blob/master/example/templates/home.html](https://github.com/tomchuk/django-ajax-tasks/blob/master/example/templates/home.html)

[https://github.com/tomchuk/django-ajax-tasks/blob/master/ajax_tasks/templatetags/ajax_task.py](https://github.com/tomchuk/django-ajax-tasks/blob/master/ajax_tasks/templatetags/ajax_task.py)

来自 django-ajax-tasks：[https ://github.com/tomchuk/django-ajax-tasks](https://github.com/tomchuk/django-ajax-tasks)

# javascript - 有没有更好的方法来“伪造”链接的 href 属性？

> ID：15441698
> 
> 赞同：4
> 
> 时间：2013-03-15T20:39:00.560
> 
> 标签：javascript, html

现在我使用：

```
href="javascript:void(0)" 
```

对于我的标签。

但是，我觉得这很混乱，并且它也会在 FireFox 中悬停时显示给用户。

我正在考虑做的是用纯 p 标签替换我的链接并在 JavaScript 中设置事件处理程序。

**澄清：**

这仅适用于支持现代 JavaScript 的浏览器。我目前还不关心可访问性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:40:23.527

**HTML**：

```
<a href="">Foo</a> 
```

**JS**：

```
var a = document.getElementsByTagName('a');
for(i=0 ; i<a.length ; i++){
    a[i].addEventListener('click', function(e) {
        if (this.href === window.location.href) {
            e.preventDefault();
        }
    });
} 
```

**演示**：http: [//jsfiddle.net/pqNfg/](http://jsfiddle.net/pqNfg/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T20:40:51.483

不确定您要做什么，但您也可以使用`href="#"`和使用不显眼的 javascript 来阻止单击事件继续。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T20:48:43.720

利用

`event.preventDefault()`禁用可能由用户点击启动的任何链接

```
anchorElement.onclick=function(e)
{
    e.preventDefault();} 
```

# ms-access - 使用创建表 DDL 时出错

> ID：15441701
> 
> 赞同：1
> 
> 时间：2013-03-15T20:39:18.013
> 
> 标签：ms-access, ddl, create-table

我的目标是将 15 分钟的间隔数据存储在（截至目前）独立的 Access 数据库中。数据库不是我的专业领域，但我正在尝试。我发现了一组元数据数据文件，其中包含 Oracle 格式的 DDL，旨在创建关系表和主/外键。我目前正在尝试使用这些 DDL 文件来创建数据库结构并收到以下语法错误：CREATE TABLE 语句中的语法错误

下面列出了 DDL 的第一部分：

```
create table AGGOUTPUTHEADER
(
  UIDAGGOUTPUTHEADER NUMBER(19) not null,
  SAVERECORDER       VARCHAR2(128) not null,
  SAVECHANNEL        NUMBER(6) not null,
  QSECODE            VARCHAR2(64),
  UIDBILLDETERMINANT NUMBER(19) not null,
  UIDSETLPOINT       NUMBER(19),
  RESOURCEID         VARCHAR2(64),
  GENSITECODE        VARCHAR2(64),
  NOIECODE           VARCHAR2(64),
  PGCCODE            VARCHAR2(64),
  TDSPCODE           VARCHAR2(64),
  UIDRESOURCE        NUMBER(19),
  UFEZONECODE        VARCHAR2(64),
  LSTIME             DATE
); 
```

我完全有可能在这里问了错误的问题——我主要是在寻找一些高水平的指导：如何开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:11:59.837

您必须使用适用于 MS Access 的语法在 MS Access 中创建表，例如，您可以避免：

```
create table AGGOUTPUTHEADER
(
  UIDAGGOUTPUTHEADER NUMBER  not null,
  SAVERECORDER       VARCHAR(128) not null,
  SAVECHANNEL        NUMBER not null,
  QSECODE            VARCHAR(64),
  UIDBILLDETERMINANT NUMBER not null,
  UIDSETLPOINT       NUMBER,
  RESOURCEID         VARCHAR(64),
  GENSITECODE        VARCHAR(64),
  NOIECODE           VARCHAR(64),
  PGCCODE            VARCHAR(64),
  TDSPCODE           VARCHAR(64),
  UIDRESOURCE        NUMBER,
  UFEZONECODE        VARCHAR(64),
  LSTIME             DATE
); 
```

如果您必须使用来自不同数据库的示例，至少要查找 SQL Server，因为它更接近 MS Access。

Number 将为您提供 double 数据类型，而 varchar 将为您提供 text 数据类型。

您可能会发现其中一些有用：

[基础 Microsoft Jet SQL for Access 2000](http://msdn.microsoft.com/en-us/library/aa140011%28office.10%29.aspx)
[中级 Microsoft Jet SQL for Access 2000](http://msdn.microsoft.com/en-us/library/aa140015%28office.10%29.aspx)
[高级 Microsoft Jet SQL for Access 2000](http://msdn.microsoft.com/en-us/library/aa139977%28office.10%29.aspx)

# css - 如果它只包含一个空格，如何将 td 高度设置为零

> ID：15441704
> 
> 赞同：0
> 
> 时间：2013-03-15T20:39:33.650
> 
> 标签：css, html-table

我有一个来自外部站点服务的 iframe 页面，其中包括不必要的空白作为由表格行形成的“顶部填充”。

```
<tr><td> </td></tr> 
```

...注意元素内阻止使用 CSS 伪类的空间

```
td:empty {display: none;} 
```

我可以访问页面的 CSS 覆盖，但没有任何脚本，所以我不能使用 jQuery。
任何想法都非常感激。

# linker - 用户空间进程中的 Freebsd 页面级权限

> ID：15441707
> 
> 赞同：1
> 
> 时间：2013-03-15T20:39:37.737
> 
> 标签：linker, freebsd

在 FreeBSD 中有没有一种方法可以限制几个连续的指令页面只读取和写入几个数据段页面？基本上，我试图限制动态链接库仅读取和写入由于动态链接库而链接的页面，并且在进程地址空间的其余部分中只有几页全局数据。

这可以使用链接器指令或通过修改内核中的页面级别位来完成吗？

问候， 马赫什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:13:58.717

[您可以使用mprotect(2)](http://www.freebsd.org/cgi/man.cgi?query=mprotect)在进程的虚拟地址空间内设置页面的保护级别（例如，将它们设为只读） 。

# html - 放大/缩小会破坏 div 的 100% 宽度。一个复杂的例子

> ID：15441708
> 
> 赞同：0
> 
> 时间：2013-03-15T20:39:40.403
> 
> 标签：html, css, zooming, overflow

[示例 1 - 放大问题](http://jsfiddle.net/DbJSf/1/)

[示例 2 - 缩小问题](http://jsfiddle.net/3GQkq/)

**我们怎样才能使灰线 100% 宽度（放大和缩小）？**

注意：左右 div 位置会导致屏幕右侧出现白色间隙问题。

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<style>
/* Start BG RECT */
.bg-rect {
    position: absolute; 
    top: 50px;
    left:0; right:0;    /* Required to be 100% 100% */
    min-width: 980px;   /* max for iPad */  
    height: 263px;
}

#bg-rect-important {
    overflow: hidden;   /* Disable right bg breaking by words on the right! */
    /* overflow hidden: disallows child be taller then parent?! */
    background-color: #656565;
}

/* Start BASE RECT */
.base-rect {
    position: relative; /* margin: auto works only with position: relative  */ 
    margin: 0 auto;     /* Centralize! */
/*!SPACE>*/top:32px; width:940px;
    /*left: -300px; /* unfortunately scroll doen't work */
}

#base-rect-lime {
    background-color: #3F3;
    height:249px;
}

    /* Start LIME RECT : left, right */
    #left-text {
        position:absolute;
        left:-200px; 
        width:200px; height:218px;
    }
    #right-text {
        position:absolute;
        right:-200px;
        width:200px; height:218px;
    }
    /* End LIME RECT : left, right */

/* End BASE RECT */
/* End BG RECT */
</style>

</head>

<body>

<div class="bg-rect" id="bg-rect-important">
    <div class="base-rect" id="base-rect-lime">
        <div id="left-text"></div>       
        <div id="right-text"></div>
    </div>
</div>

</body>
</html> 
```

# jquery - 使用 CSS 或 jQuery 隐藏特定网页的页眉和页脚

> ID：15441715
> 
> 赞同：0
> 
> 时间：2013-03-15T20:40:19.983
> 
> 标签：jquery, css, hide

提前感谢您对此提供的任何帮助！

我的网站有这样的结构：

```
<html>
<head></head>
<body>
<header></header>
Content
<footer></footer>
</body>
<html> 
```

我怎样才能使网站内的一个页面不显示页眉或页脚？

我试过 jquery .hide，但它隐藏了所有页面的这些元素。我知道我错过了一些简单的东西，但我很难弄清楚。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:00:15.317

没有真正看到问题，只需将其放在要隐藏页眉/页脚的每个页面中：

```
$(function() {
    $("header, footer").hide();
}); 
```

[http://jsfiddle.net/ZbVxw/](http://jsfiddle.net/ZbVxw/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T20:45:52.540

试试这个：

```
<html>
<head></head>
<body>
<header></header>

 //START OF CONTENT PAGE
 //write the hiding code here for header and footer on document.ready

<script type='javascript'>
$(document).ready(function(){
    $("header, footer").hide();
});
</script>

Content

 //END OF CONTENT PAGE
<footer></footer>
</body>
<html> 
```

# c# - 如何在全景应用程序 WP8 中本地禁用滑动

> ID：15441722
> 
> 赞同：0
> 
> 时间：2013-03-15T20:40:34.520
> 
> 标签：c#, windows-phone-8, mousemove, panorama-control, disabled-control

我正在制作一个全景视图应用程序，用户可以从色轮和 SV 图中选择色调、饱和度和值，如下所示： http: [//i.imgur.com/JM1FD1z.jpg](http://i.imgur.com/JM1FD1z.jpg) [http://i.imgur .com/51ymotz.jpg](http://i.imgur.com/51ymotz.jpg)

用户可以在正方形上点击或拖动指针，坐标确定值。但是当他们拖动（鼠标移动）时，应用程序也会滑动到下一个屏幕。

如果在图表中完成滑动，有没有办法可以禁用幻灯片到下一页？它应该在图形区域之外正常运行。可以在图形 mousemove 事件处理程序中实现的禁用全景幻灯片功能之类的东西？

将色相轮和 SV 图放在单独的页面上会大大降低两者的组合动态功能，所以我希望它们放在一个全景页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:47:05.147

这似乎不是一个很好的使用全景。这将导致控件上的触摸动作与全景图本身之间的“手势竞争”。如果您使用 Pivot 控件，也会出现同样的问题。

如果您希望 Hue 和 SV 在同一页面上，为什么不将它们放在同一页面上并允许通过按钮切换模式，例如在应用栏上？

您可以在 XAML 树中同时拥有这两个控件，并显示一个处于活动状态的控件并隐藏另一个。您可以通过更改`Visibility`每个控件的 来做到这一点。

# hibernate - @Transactional 未创建会话 - org.hibernate.HibernateException: No Session found for current thread

> ID：15441728
> 
> 赞同：0
> 
> 时间：2013-03-15T20:40:46.707
> 
> 标签：hibernate, spring-mvc, spring-security

嗨，我已经编写了一个身份验证事件侦听器模块来在最大登录尝试后锁定用户。

```
<beans:bean id="ftfStatsAuthenticationEvent" class="com.ibm.ftfstats.auth.FTFStatsAuthenticationEvent">
<beans:property name="userMgr" ref="userManager"></beans:property>
</beans:bean> 
```

这就是用于捕获 AuthenticationFailure 事件的模块的定义方式

```
public void onApplicationEvent(ApplicationEvent event) {
    // TODO Auto-generated method stub
    if(event instanceof AuthenticationFailureBadCredentialsEvent){
        onAuthenticationFailureBadCredentialsEvent((AuthenticationFailureBadCredentialsEvent)event);
    }else if(event instanceof AuthenticationSuccessEvent){
        onAuthenticationSuccessEvent((AuthenticationSuccessEvent)event);
    }
}

    public void onAuthenticationFailureBadCredentialsEvent(AuthenticationFailureBadCredentialsEvent event){
    Authentication authentication = event.getAuthentication();
    String userId = authentication.getName();
    System.out.println("bad credential for user : " + userId);
    getUserMgr().encounterFailedlogin(userId);
    User user = getUserMgr().getUserById(userId);
} 
```

`getUserMgr()`返回一个用户管理器类，其中方法`encounterFailedlogin(userId)`定义为

```
public User encounterFailedlogin(String userId) {
    // TODO Auto-generated method stub
    User user = getUserDAO().getUserById(userId);
    return encounterFailedlogin(user);

}

@Transactional
public User encounterFailedlogin(User user) {
    // TODO Auto-generated method stub
    int failedAttempts = user.getFailedAttempts() + 1;
    user.setFailedAttempts(failedAttempts);
    System.out.println("updating user");
    updateUser(user);
    return getUserDAO().getUserById(user.getUserID());
    //return true;
}
 @Transactional
public boolean updateUser(User user){
    getUserDAO().updateUser(user);
    return true;
} 
```

用户 DAO 定义为：

```
public void addUser(User user){
    getSessionFactory().getCurrentSession().save(user);
} 
```

我的应用程序上下文文件定义为

```
<!-- UserDB Session Factory Declaration -->
<bean id="UserSessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="UserDataSource" />
    <property name="annotatedClasses">
        <list>
            <value>com.ibm.ftfstats.data.user.model.User</value>                
            <value>com.ibm.ftfstats.data.user.model.Environment</value>
            <value>com.ibm.ftfstats.data.user.model.Role</value>
            <value>com.ibm.ftfstats.data.user.model.Question</value>
            <value>com.ibm.ftfstats.data.user.model.SearchCriteria</value>
            <value>com.ibm.ftfstats.data.user.model.UserRequest</value>
            <value>com.ibm.ftfstats.data.user.model.RequestType</value>
            <value>com.ibm.ftfstats.data.user.model.RequestComment</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>   

        </props>
    </property>
</bean>

<bean id = "transactionManager" class = "org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name = "sessionFactory" ref = "UserSessionFactory" />
</bean>

<tx:annotation-driven/>

<!-- DAOs List goes here -->
<bean id="UserDAO" class="com.ibm.ftfstats.data.dao.UserDAO">
    <property name="sessionFactory" ref="UserSessionFactory"></property>
    <property name="msg" ref="msgBundle"></property>
</bean>
<bean id="userManager" class="com.ibm.ftfstats.service.impl.UserManagerImp">
    <property name="userDAO" ref="UserDAO" />       
</bean> 
```

这是我在登录表单中输入错误凭据时遇到的错误

```
SEVERE: Servlet.service() for servlet default threw exception
org.hibernate.HibernateException: No Session found for current thread
at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:978)
at com.ibm.ftfstats.data.dao.UserDAO.updateUser(UserDAO.java:35)
at com.ibm.ftfstats.data.dao.UserDAO$$FastClassByCGLIB$$37731f27.invoke(<generated>)
at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:627)
at com.ibm.ftfstats.data.dao.UserDAO$$EnhancerByCGLIB$$388b21db.updateUser(<generated>)
at com.ibm.ftfstats.service.impl.UserManagerImp.updateUser(UserManagerImp.java:97)
at com.ibm.ftfstats.service.impl.UserManagerImp.encounterFailedlogin(UserManagerImp.java:84)
at com.ibm.ftfstats.service.impl.UserManagerImp.encounterFailedlogin(UserManagerImp.java:74)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:198)
at $Proxy17.encounterFailedlogin(Unknown Source)
at  com.ibm.ftfstats.auth.FTFStatsAuthenticationEvent.onAuthenticationFailureBadCredentialsEvent(FTFStatsAuthenticationEvent.java:42)
at com.ibm.ftfstats.auth.FTFStatsAuthenticationEvent.onApplicationEvent(FTFStatsAuthenticationEvent.java:29) 
```

谁能建议我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:13:19.870

通常，当一个方法在一个类中调用但仅从另一个类调用时，spring 代理不起作用。您可以使用 aspectj 来解决该问题或重新设计您的课程。

[了解 aop 代理](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/aop.html#aop-understanding-aop-proxies)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:01:51.253

`public User encounterFailedlogin(String userId)`需要用 注释`@Transactional`。据我所知，这是从类外部调用的方法。

`return encounterFailedlogin(user);`是内部调用，因此没有代理。所以在这种情况下`public User encounterFailedlogin(User user)`，不知道是事务性的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T13:55:40.257

您确定在应用程序上下文中定义了 UserDataSource 吗？我没有看到一个。

# django - Geodjango OSMGeoAdmin：如何添加不同的层

> ID：15441729
> 
> 赞同：1
> 
> 时间：2013-03-15T20:40:50.740
> 
> 标签：django, gis, geodjango

我注意到 Geodjango 管理员中的地图在右侧有一个菜单。

我如何添加更多的图层，而不仅仅是一个代表地图在管理员中相关的模型字段？

这是我的模型（model.py）：

```
class Foresta(models.Model):

    nome = models.CharField("Nome", blank = False, max_length = 255)
    descrizione = tinymce_models.HTMLField("Descrizione", blank = True, help_text='Inserire una descrizione del bosco')
    slug = models.SlugField("Slug", blank = True)
    published = models.BooleanField("Pubblicato")
    ...

    coord = models.PointField("Coordinata punto foresta", blank = False)
    # GeoDjango-specific: a geometry field (MultiPolygonField), and
    # overriding the default manager with a GeoManager instance.
    mpoly = models.MultiPolygonField("Mappa foresta (poligono)", blank = False)
    objects = models.GeoManager() 
```

这是我的管理模型（admin.py）：

```
class ForestaAdmin(admin.OSMGeoAdmin):
    default_lon= 1308296
    default_lat= 5714101
    default_zoom= 9
    overlays = ('coord', 'mpoly') 
```

我尝试了“覆盖”选项，但没有成功！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:39:31.490

[您可以在此处](https://github.com/django/django/blob/master/django/contrib/gis/admin/options.py)找到默认的 OSMGeoAdmin 设置。不幸的是，您似乎无法通过指定覆盖元组这样简单的事情来完成此操作。相反，您似乎应该创建一个自定义地图模板，然后使用模板的路径覆盖 ForestaAdmin 类中的 map_template 选项。首先复制默认的[openlayers](https://github.com/django/django/blob/master/django/contrib/gis/templates/gis/admin/openlayers.html)模板并自定义 javascript 以将其他图层添加为额外的[OpenLayers 矢量图](http://dev.openlayers.org/docs/files/OpenLayers/Layer/Vector-js.html)层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T14:01:38.850

您可以使用 olwidget [http://docs.olwidget.org/en/latest/django-olwidget.html](http://docs.olwidget.org/en/latest/django-olwidget.html)。它允许您编辑和显示不同的层（在 Django 管理员内部和外部）。但是，根据您运行的 Django 版本，您可能会发现使用起来很困难。

最后，我设法通过修改此处（我的案例）中找到的 openlayers.js 文件来按照@garnetb 所说的那样做到这一点：

```
/usr/local/lib/python2.7/dist-packages/django/contrib/gis/templates/gis/admin/openlayers.js 
```

如果找不到它，只需在 osm.html 和/或 openlayers.html 中查找。所以，这就是我设法添加第二层的方式。我的目标是添加一个“视觉”唯一的图层，但如果你想编辑它，你可以轻松地修改控件。所以，让我们假设你有一个像这样的模型：

```
class Lines(gis_models.Model):
name = gis_models.CharField(max_length=10)
geom = gis_models.MultiLineStringField(srid=4326)
geom_points = gis_models.MultiPointField(srid=4326, null=True)
objects = gis_models.GeoManager()
def __unicode__(self):
    return self.name 
```

所以你看，有两个元素正在加载，第一个是线，第二个是点。所以我的目标是添加线条作为我处理点时的视觉参考。为此，请转到 openlayers.js 并查找定义 Base Layer 的部分并添加类似的内容。

```
// Base Layer
    {% if field_name != "geom" %}

    geom_layer = new OpenLayers.Layer.Vector("visual");
    {{ module }}.map.addLayer(geom_layer);
    var wkt_vis = document.getElementById('id_geom').value;
    if (wkt_vis){
        var features = {{ module }}.read_wkt(wkt_vis);
        geom_layer.addFeatures(features);
    }
    else {
        alert("no wkt id field");
    }   

{% endif %}

if ({{ module }}.is_point) {
    var style = new OpenLayers.Style({
        pointRadius : 4,
        strokeColor : 'red',
        strokeWidth : 2,
        strokeOpacity : 1,
        fillColor : 'white',
        fillOpacity : 1
    });

    var layer_style = new OpenLayers.StyleMap({
        'default' : style,
    });
    {{ module }}.layers.vector = new OpenLayers.Layer.Vector(" {{ field_name }}", {styleMap : layer_style});
}
else {
    {{ module }}.layers.vector = new OpenLayers.Layer.Vector(" {{ field_name }}");
} 
```

如您所见，整个想法是为每一层加载 openlayers.js，但您仍然可以访问其他对象。这种配置给我留下了一个方便的管理员，我在其中显示了两张地图。在第一个中，我展示了线条并且我可以修改它们。在第二个中，我将线条显示为参考，并且这些点是可编辑的。第二部分向您展示如何设置点样式（以防万一......）这只是一个简化的示例。如果您需要更多详细信息，请告诉我。我还设法添加了一个“删除功能”控件。我只在 Django 1.6 上使用 GeoDjango 进行了尝试，但只要它们以相同的方式使用 openlayers.js，它应该可以与其他版本一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-15T12:45:53.330

我不得不在地图上添加额外的只读多面体。我重新定义了 osm.html （？只是更改了 osm.js 文件路径，因为 django 使用了默认的“gis/admin/osm.js”）

```
{% extends "gis/admin/openlayers.html" %}
{% block openlayers %}{% include "gis/osm.js" %}{% endblock %} 
```

osm.js：

```
{% extends "gis/admin/osm.js" %}
{% block extra_layers %}
    {% if extra_wkt %}
        extraLayer = new OpenLayers.Layer.Vector("extra_layer");
        {{ module }}.map.addLayer(extraLayer);

        var extraLayerStyle = {
            fillColor: "#8a8a8a",
            fillOpacity: 0.5,
            strokeColor: "#000000",
            strokeOpacity: 1,
            strokeWidth: 1,
        };
        var extraGeometry = {{ module }}.read_wkt('{{ extra_wkt }}');
        for (var i = 0; i < extraGeometry.geometry.components.length; i++) {
            var feat = new OpenLayers.Feature.Vector(
                extraGeometry.geometry.components[i].clone(),
                {}, // attrs
                extraLayerStyle,
            )
            extraLayer.addFeatures([feat]);
        }
    {% endif %}
{% endblock %} 
```

有我使用`extra_wkt`作为上下文传递的值。( `mpoly`- geodjango 多面域的名称)

```
from django.contrib.gis.admin import OSMGeoAdmin, OpenLayersWidget

class OSMLayersWidget(OpenLayersWidget):

    def get_context(self, name, value, attrs):
        context = super().get_context(name, value, attrs)

        if name == "mpoly":
            extra_mpoly = MultiPolygon([..., ...])
            if extra_mpoly:
                srid = self.params['srid']
                if extra_mpoly.srid != srid:
                    try:
                        extra_mpoly.transform(srid)
                        extra_wkt = extra_mpoly.wkt
                    except GDALException as err:
                        logger.error(
                            "Error creating geometry from value '%s' (%s)",
                            extra_mpoly,
                            err,
                        )
                        extra_wkt = ''
                else:
                    extra_wkt = extra_mpoly.wkt

                context["extra_wkt"] = extra_wkt

        return context 
```

管理员.py：

```
class ServiceZoneAdmin(OSMGeoAdmin):

    map_template = 'gis/osm.html'
    widget = OSMLayersWidget 
```

结果： [![在此处输入图像描述](../Images/4b6398958cf6f4f48d22db45ea97dfbd.png)](https://i.stack.imgur.com/K2Lfy.jpg)

# c# - 如何显示数组的最大值和最小值

> ID：15441736
> 
> 赞同：0
> 
> 时间：2013-03-15T20:41:04.013
> 
> 标签：c#, arrays, methods, input

首先这是一项家庭作业，我遇到了一些麻烦，希望得到一些建议。到目前为止，我已经创建了这个应用程序来从用户那里获取 10 个输入值并将它们存储到一个数组中。我将数组传递给 SmallAndLarge 方法，它使用 Sort() 显示 10 个值中的最小值和最大值，但现在我必须显示用户输入的 10 个值中的最小值和最大值，但遇到了麻烦。任何帮助都会很棒！

我还注意到另一个问题，如果输入值 1 到 10，则在对数组进行排序和显示时，10 将位于 2 之前和 1 之后。为什么是这样？

```
namespace SmallAndLarge
{
    class Program
    {
        static void Main()
        {
            int found = 0;
            string[] numbers = new string[10];
            for (int i = 0; i < numbers.Length; i++)
            {
                Console.Write("Enter ten numbers --> ");
                numbers[i] = Console.ReadLine();
            }
            SmallestAndLargest(numbers);

        }
        public static int SmallestAndLargest(string[] numbers1)
        {

            int x;
            Array.Sort(numbers1);
            for (x = 0; x < numbers1.Length; ++x)
                Console.Write("{0} ", numbers1[x]);
            return x;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:24:55.737

您可以使用`Linq`来投射和返回最大/最小的`using Min/Max`

```
string[] numbers = new string[] {"1","2","3","15","30","7" };

var converted = numbers.Select(int.Parse);
int largest = converted.Max();
int smallest = converted.Min(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:13:18.163

看起来您正在遍历数组。我会做以下事情：

1.  创建两个 int 变量（分别为小和大）
2.  将它们都设置为数组的第一个元素
3.  循环遍历元素；
4.  对于每个元素[i]，（使用`int.Parse()`或等效将元素转换为 int）。
    如果元素 [i] > 大，大 = 元素 [i]；如果元素 [i] < 小，小 = 元素 [i]

如果只需要最小值和最大值，则不需要排序。我会将整数存储到 int 数组而不是字符串数组中，当用户输入值时进行转换。这样，当输入无效值时，您的程序就会立即失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T21:13:02.137

您将数字作为字符串。这就解释了为什么`"10"`出现在前面，这与按字母顺序出现在前面`"2"`的原因相同。is的第一个字符在之前。`"am"``"i"``"10"``'1'``'2'`

因此，在对数组进行排序或搜索 max og min 值之前，您需要将字符串转换为某种数字类型。例如，它可能是`int`类型。您会将它们保存在 type 的数组中`int[]`，而不是`string[]`.

例如，要`string`将给定的 by`Console.ReadLine`转换为`int`，请使用`int.Parse`or`int.TryParse`方法的重载。

如果应该允许用户键入非整数，例如`3.14`，您可以使用`decimal`代替`int`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T21:32:33.237

这是一个非常简单但冗长的答案。将值添加到列表并使用最小/最大返回。您已经使用 for 循环遍历列表，没有理由重复两次。

```
 static void Main(string[] args)
    {
        string[] StringValues = new string[] { "1", "2", "3", "4", "5", "6", "7", "8", "9", "10","Not Number" };
        List<int> ConvertedStrings = new List<int>();

        foreach (string S in StringValues)
        {
            ConvertedStrings = ParseStringToInt(S, ConvertedStrings);
        }
        Console.WriteLine();
        Console.WriteLine("Max Value: " + ConvertedStrings.Max().ToString());
        Console.WriteLine("Min Value: " + ConvertedStrings.Min().ToString());
        Console.ReadLine();
    }

    static private List<int> ParseStringToInt(string Input, List<int> ConvertedStrings)
    {
        int ConvertedValue = 0;

        if (int.TryParse(Input, out ConvertedValue))
        {
            Console.WriteLine(Input + " sucessfully parsed and added...");
            ConvertedStrings.Add(ConvertedValue);
            return ConvertedStrings;
        }
        else
        {
        Console.WriteLine(Input + " failed to parse...");
        }

        return ConvertedStrings;
    } 
```

虽然 sa_ddam213 得到了杀手锏：P

# android - 在 Google Play 说明中从一个应用链接到另一个应用

> ID：15441737
> 
> 赞同：10
> 
> 时间：2013-03-15T20:41:09.670
> 
> 标签：android, google-play

我在 google play 商店中有两个应用程序。是否可以在第一个描述中创建一个从一个到另一个的 http 链接？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-07-20T17:00:43.593

> Google Play 说明不支持链接。

那不是真的。`<a>`您可以使用标签在 google play 中添加指向其他应用程序的链接。
例如，链接到我的应用程序：

```
<a href="https://play.google.com/store/apps/details?id=org.ros.android.android_all_sensors_driver">ROS Sensors</a> 
```

你可以看看我的描述应用程序我是怎么做的：
[ROS Sensors](https://play.google.com/store/apps/details?id=org.ros.android.android_all_sensors_driver)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-08-21T08:11:12.670

我们可以使用两种方法在 Play 商店描述中提供链接。

```
<a href="https://www.google.com">Visit Link</a> https://www.google.com 
```

**Play商店应用程序中的输出：**
 访问链接[https://www.google.com](https://www.google.com)
**Play 商店网站中的输出：**
 [访问链接](https://www.google.com)https://www.google.com

注意：
 以下代码不会在 Play 商店应用中创建任何链接

```
Visit Link <a href="https://www.google.com">https://www.google.com</a> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-15T20:46:48.997

Google Play 说明不支持链接。您可以告诉读者应用程序的名称，仅此而已。

另外，无论如何，在大多数情况下，您的应用程序将位于“相关应用程序”和“来自开发人员的更多信息”标题下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T08:53:10.293

如果您将完整的 url 地址放在应用程序描述中（使用 https 协议，而不仅仅是 www），它将在浏览器中显示为链接。

例如： [https ://play.google.com/store/apps/details?id=domain.company.appname](https://play.google.com/store/apps/details?id=domain.company.appname)

当然，谷歌播放应用程序的链接不是很好，所以你可以使用一些 url 转换器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-11T16:01:07.773

[Google 已经记录了如何在 google play 中正确链接到其他资源，例如商品列表、开发者页面、搜索结果等](https://developer.android.com/distribute/marketing-tools/linking-to-google-play)。

> 链接到商品详情
> 
> 使用以下格式直接深层链接到应用的商品详情页面，用户可以在其中查看应用说明、屏幕截图、评论等，然后进行安装。
> 
> 要创建链接，您需要知道应用程序的完全限定包名称，该名称在应用程序的清单文件中声明。包名称也可以在 Google Play 控制台中看到。

```
http://play.google.com/store/apps/details?id=<package_name> 
```

> 这是一个例子：

```
http://play.google.com/store/apps/details?id=com.google.android.apps.maps 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-17T19:32:43.770

以下形式的 URL 将被转换为可点击的链接，并将重定向到 YOUR_URL 中指定的地址。

[https://www.google.com/url?q=YOUR_URL](https://www.google.com/url?q=YOUR_URL)

例如：[https ://www.google.com/url?q=https://play.google.com/store/apps/details?id=domain.company.appname](https://www.google.com/url?q=https://play.google.com/store/apps/details?id=domain.company.appname)

# c++ - VC++ 2010 链接器 /VERBOSE 选项不起作用？

> ID：15441740
> 
> 赞同：2
> 
> 时间：2013-03-15T20:41:27.587
> 
> 标签：c++, visual-studio-2010

我已经安装了来自英特尔的软件包，并且我能够让它工作。这是一个 VC++ 2010 项目。我知道它工作正常，并且我能够产生一些我期望的输出。由于有很多文件被链接，我想打开详细标志并查看发生了什么，但我不确定为什么在详细模式下运行时什么都没有显示。

在属性页的`"Linker-->General"`I set `Show Progress --> "Display all progress messages (/VERBOSE)`和 下`"Linker-->Advanced"`，我将 /VERBOSE 添加到“附加选项”中，如下所示： `Additional Options --> "/machine:x64 /debug /VERBOSE"`

我需要做其他事情吗？因为没有显示任何内容，好像我什至没有处于 VERBOSE 模式！！！

# html - 更改最后一个字母的颜色

> ID：15441742
> 
> 赞同：39
> 
> 时间：2013-03-15T20:41:37.967
> 
> 标签：html, css

示例代码：

```
<p class="test">string</p> 
```

我想更改最后一个字母的颜色，在本例中为“g”，但我需要使用 css 的解决方案，我不需要 javascript 解决方案。

我一个字母一个字母地显示字符串，我不能使用静态解决方案。

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2013-03-15T22:32:13.323

大家都说做不到。我来这里是为了证明并非如此。

是的，这是**可以**做到的。

好的，这是一个可怕的黑客攻击，但可以做到。

我们需要使用两个 CSS 特性：

*   首先，CSS 提供了改变文本流向的能力。这通常用于阿拉伯语或希伯来语等脚本，但它实际上适用于任何文本。如果我们将它用于英文文本，则字母的显示顺序与标记中的显示顺序相反。因此，要让文本在反向元素上显示为单词“String”，我们必须有标记为“gnirtS”。

*   其次，CSS 有`::first-letter`伪元素选择器，它选择文本中的第一个字母。（其他答案已经确定这是可用的，但没有等效的`::last-letter`选择器）

现在，如果我们将`::first-letter`与反转文本结合起来，我们可以选择“gnirtS”的第一个字母，但看起来我们正在选择“String”的最后一个字母。

所以我们的 CSS 看起来像这样：

```
div {
    unicode-bidi:bidi-override;
    direction:rtl;
}

div::first-letter {
    color: blue;
} 
```

和 HTML：

```
<div>gnirtS</div> 
```

是的，这确实有效——你可以在这里看到工作小提琴：http: [//jsfiddle.net/gFcA9/](http://jsfiddle.net/gFcA9/)

但正如我所说，这有点hacky。谁愿意把时间花在倒写一切上？这不是一个实际的解决方案，但它确实回答了这个问题。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2015-06-24T22:16:11.847

使用`::after`结合[`attr()`](https://developer.mozilla.org/en-US/docs/Web/CSS/attr)函数的伪元素：

```
p::after {
    content: attr(data-end) ;
    color: red ;
}
<p data-end="g">Strin</p> 
```

```
p::after {
  content: attr(data-end) ;
  color: red ;
}
```

```
<p data-end="g">Strin</p>
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-09-16T09:06:23.267

另一种解决方案是使用`::after`

```
.test::after{
    content: "g";
    color: yellow;
}
<p class="test">strin</p> 
```

此解决方案允许更改所有字符的颜色，而不仅仅是像 Spudley 使用的答案这样的字母`::first-letter`。有关详细信息，请参阅`::first-letter` [规范](http://www.w3.org/TR/CSS21/selector.html#first-letter)。`::first-letter`仅适用于忽略标点符号的字母。

此外，如果您想为最后一个字符着色，您可以：

```
.test::after{
     content: "ing";
     color: yellow;
}
<p class="test">str</p> 
```

有关 ::after 的更多信息，请查看此[链接](http://www.w3schools.com/cssref/sel_after.asp)。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-03-15T20:44:25.923

不使用 javascript，您唯一的选择是：

```
<p class="test">strin<span class="other-color">g</span></p> 
```

*编辑您的小提琴链接*：

我不太确定你为什么说你不需要 javascript 解决方案，因为你已经有了很多。无论如何，在此示例中，您只需要进行一些小的更改。将第 10 行从

```
elem.text(elem.text() + contentArray[current++]); 
```

到

```
if ( current == contentArray.length-1 ) {
    elem.html(elem.html() + "<span style='color:red'>"+contentArray[current++]+"</span>");
} else {
    elem.html(elem.html() + contentArray[current++]);
} 
```

请注意，重要的是使用`.html()`而不是`.text()`现在，因为实际上插入了 HTML 标记。

工作小提琴：http: [//jsfiddle.net/QTUsb/2/](http://jsfiddle.net/QTUsb/2/)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-04-17T12:23:33.773

它可以只使用 CSS 和一个`::after`伪元素来实现，而不需要对 HTML 进行任何更改：

```
.test {
  font-size: 16pt;
  position: relative;
}
.test::after {
  bottom: 0;
  color: red;
  content: 'g';
  position: absolute;
  transform: translate(-100%, 0);
}
```

```
<p class="test">string</p>
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-15T21:06:28.820

你以什么方式“逐字母显示字符串”？如果您正在遍历字符串（变量）中的字符，您当然可以知道您何时在最后一个字母处并将其包装在服务器端或客户端是否这样做。

看着[你的另一个问题](https://stackoverflow.com/questions/14448819/)所附的小提琴......

如果这就是您所说的，您可能必须设置`.innerHTML`元素的而不是`element.text()`

从[http://jsfiddle.net/SLKEn/](http://jsfiddle.net/SLKEn/)的小提琴，你可以把它改成这样

```
if(current < contentArray.length) {
    elem.html(
            elem.html() +
              (current == contentArray.length-1 ?
               '<span class="lastchar">' + contentArray[current++] + '</span>' :
               contentArray[current++])
             );
        } 
```

与 CSS 一起`span.lastchar { color: red; }`

* * *

更新：根据您的其他问题[工作小提琴。](http://jsfiddle.net/SLKEn/5/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-28T06:49:15.330

```
$(document).ready(function() {
  var str=$("span").text();
  strArr=str.split("");
  for(var key=0;key<=strArr.length-1;key++) {
    if(key==strArr.length-1) {
      var newEle="<span id='lastElement'>"+strArr[key]+"</div>";
      strArr[key]=newEle;
    }
  }
  var newtext=strArr.join("");
  $("span").html(newtext);  
});
```

```
 span#lastElement {
  color: red;
}
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-08T16:35:01.820

我没有能力对答案线程发表评论，但我想指出[Marc_Alx 提供的答案](https://stackoverflow.com/a/32604162/1668200)中的错误，否则效果很好。该解决方案仅在属性后面添加分号后才对我有用`content`......所以它看起来像`content:"ing";`

```
.test::after{
  content:"ing";
  color:yellow;
}
<p class="test">str</p> 
```

# linux - 如何在没有临时文件的情况下将一些文本附加到管道

> ID：15441744
> 
> 赞同：0
> 
> 时间：2013-03-15T20:41:55.970
> 
> 标签：linux, bash, shell, unix, pipe

我正在尝试从我有一个程序的多个版本的目录中获取最大版本号

例如，如果 ls 的输出是

```
something01_1.sh
something02_0.1.2.sh
something02_0.1.sh
something02_1.1.sh
something02_1.2.sh
something02_2.0.sh
something02_2.1.sh
something02_2.3.sh
something02_3.1.2.sh
something.sh 
```

我通过以下方式获得最大版本号 -

```
ls somedir | grep some_prefix | cut -d '_' -f2 | sort -t '.' -k1 -r | head -n 1 
```

现在，如果同时我想用系统中已有的版本号来检查它，那么最好的方法是什么......

在 bash 我得到了这个工作（如果 2.5 是当前版本）

```
(ls somedir | grep some_prefix | cut -d '_' -f2; echo 2.5) | sort -t '.' -k1 -r | head -n 1 
```

还有其他正确的方法吗？

编辑：在上面的例子中 some_prefix 是 something02。

编辑：这里的实际问题是

```
(ls smthing; echo more) | sort 
```

将管道的两个命令/程序的输出合并到第三个是最好的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T17:38:53.000

我找到了解决方案。似乎最好的方法是使用进程替换。

```
cat <(ls smthing) <(echo more) | sort 
```

对于我的版本示例

```
cat <(ls somedir | grep some_prefix | cut -d '_' -f2) <(echo 2.5) | sort -t '.' -k1 -r | head -n 1 
```

为了未来读者的利益，我建议 - 请放弃单线的诱惑，并按照[chepner 的](https://stackoverflow.com/users/1126841/chepner)建议使用 glob。

[在superuser](https://superuser.com/questions/317819/passing-two-arguments-to-a-command-using-pipes)上提出了几乎类似的问题。

[有关进程替换](http://tldp.org/LDP/abs/html/process-sub.html)的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T20:52:13.487

以下代码是否更适合您要查找的内容：

```
#/bin/bash

highest_version=$(ls something* | sort -V | tail -1 | sed "s/something02_\|\.sh//g")
current_version=$(echo $0 | sed "s/something02_\|\.sh//g")

if [ $current_version > $highest_version ]; then
    echo "Uh oh! Looks like we need to update!";
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T13:05:45.220

你可以尝试这样的事情：

```
#! /bin/bash

lastversion() { # prefix
  local prefix="$1" a=0 b=0 c=0 r f vmax=0

  for f in "$prefix"* ; do
    test -f "$f" || continue
    read a b c r <<< $(echo "${f#$prefix} 0 0 0" | tr -C '[0-9]' ' ')
    v=$(((a*100+b)*100+c))
    if ((v>vmax)); then vmax=$v; fi
  done
  echo $vmax  
}

lastversion "something02" 
```

它将打印：30102

# c - 代码说明（链表C）

> ID：15441745
> 
> 赞同：11
> 
> 时间：2013-03-15T20:42:00.070
> 
> 标签：c, linked-list, head

这不是我的代码。我从这个网站上取下了这段代码：

[http://www.macs.hw.ac.uk/~rjp/Coursewww/Cwww/linklist.html](http://www.macs.hw.ac.uk/~rjp/Coursewww/Cwww/linklist.html)

我正在使用有关如何构建链接列表的参考资料。我对发生的事情有点困惑。有人可以向我解释发生了什么。我会用 1-5 标记让我感到困惑的地方。

```
#include<stdlib.h>
#include<stdio.h>

struct list_el {
   int val;
   struct list_el * next;
};

typedef struct list_el item;

void main() {
   item * curr, * head;
   int i;

   head = NULL;   //1

   for(i=1;i<=10;i++) {
      curr = (item *)malloc(sizeof(item));
      curr->val = i;
      curr->next  = head; //2
      head = curr; //3
   }

   curr = head; // 4

   while(curr) {  //5
      printf("%d\n", curr->val);
      curr = curr->next ;
   } 
```

1.  head = NULL → 为什么 head 被设置为 NULL？我知道你应该这样做（我这样做是出于习惯），但我真的不知道为什么。

2.  curr->next = head → 我也从来没有真正理解过这一点。也许我对“头”的定义是错误的，但在常规链表中，它是列表中的起始节点还是最后一个节点？我一直认为它是起始节点，但在这一行中，它看起来像是最后一个节点。

3.  head = curr → 为什么我们将它设置为等于 curr？

4.  curr = head → 然后在循环完成后设置 curr = head。

5.  while(curr) → 只是为了确保，这是遍历列表，它相当于 while(curr != NULL) 对吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-15T21:02:34.303

> ### #1：`head = NULL`

**初始化指针**。通常建议在 (1) 声明时或 (2) 在声明后立即将指针初始化为 NULL *。*如果程序员错误地取消引用未初始化的指针，则会返回垃圾值。通常，如果您的静态分析器和编译器不显示未初始化指针的警告或错误消息，这将非常难以调试。

有关更多信息，请参阅[Steve McConnell 的*Code Complete：软件构建实用手册或*](https://rads.stackoverflow.com/amzn/click/com/0735619670)[*防御性编程*](http://en.wikipedia.org/wiki/Defensive_programming)的Wikipedia 页面。

> ### #2：`curr->next = head`

**构建链表**。该`curr`节点正在“链接”到序列中先前创建的节点。

> ### #3：`head = curr`

**更新头指针。**指针正在更新以`head`指向最近`malloc`编辑的节点。

下图可视化了步骤 #2 和 #3：

![第一的](../Images/70ce78318a5f62832b47d81a159f941f.png) ![第二](../Images/9d070e7fa3277c2b95dcb319ebb99200.png) ![第三](../Images/d7bf7db258803c704e03c0245de5233c.png) ![第四和最后](../Images/ef160aea6a6e44c8be2c2439a6b2994c.png)

> ### #4：`curr = head`

**重新初始化指针。**此步骤类似于步骤#2 `curr->next = head`：。通过将`curr`node 设置为`head`，为循环`curr`中的链表遍历“准备好” 。`while`打个比方，这就像在循环开始时将迭代变量初始化为 0（即`i = 0`）。要可视化此步骤，请参考以下显示此语句执行之前/之后的插图：

![前](../Images/00a1041edc4d2a7862447b0db2fdcd81.png)

![后](../Images/35a6ed78d2fda20cd96d479ad340999b.png)

> ### #5：`while(curr)`

**遍历列表。** 鉴于它`curr`指向第一个节点（从步骤 #4 开始），此`while`循环遍历列表直到`curr->next`返回 NULL。以不那么抽象的形式，我们可以将这个语句重写为`while(curr != NULL)`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T20:45:56.627

1.  head 指向列表的头部。由于列表当前为空，因此设置为 null
2.  当您将一个节点添加到列表中时，您将“下一个”指针设置为列表的当前头部。将新节点放在列表的头部。
3.  您将“head”设置为“curr”以使新节点成为列表的头部。
4.  循环结束后，您将重新使用“curr”变量来遍历列表。
5.  您将依次遍历每个节点的列表设置“curr”，直到您离开列表底部（其中 curr->next 为空）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T21:18:07.460

(1)。您需要将其设置为某种东西，并且使用 NULL 是一种表示它没有指向任何东西的方式。通常 NULL 与 0 相同。在某些语言中，您不需要初始化变量，因为它会自动将其设置为 nil。但是C不这样做，所以你必须自己做。

(2)。`head`指向列表的第一个节点。起初，它是 NULL，这意味着列表是空的，因此`head`没有指向任何东西。`cur`是要插入到列表中的新节点。`curr->next`想要指向现有列表的第一个节点，所以`curr->next`设置为`head`.

(3)。此时`head`不再指向第一个节点。第一次通过循环，它看起来像这样：

```
curr-->node1-->NULL
         头--^

```

但总的来说它看起来像这样

```
curr-->node3-->node2-->node1-->NULL
          头--^

```

所以我们需要更新`head`指向第一个节点。由于`curr`指向的是新创建的节点，它位于最前面，我们只需设置`head`为指向与 相同的节点`curr`。

(4)。程序的第一部分已经完成。 `curr`不再需要，因为它用于跟踪我们创建的新节点。这是一个临时变量。这一行`curr = head`意味着我们将初始化`curr`到列表的开头。我们本可以使用另一个变量来使其更具可读性，但您通常会看到临时变量的重用。

(5)。对。您可能会看到`NULL`定义为`(void*)0`，因此它与 0 相同。除了 60 或 70 年代的真正旧机器之外，您可能永远不会看到除 0 之外的其他值。所以从逻辑上讲，它相当于： `while (curr != 0)`与`while (curr)`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T20:54:09.983

**1\. head = NULL → 为什么 head 被设置为 NULL？**
初始化变量是个好习惯。在某些系统上，声明的变量在地址空间被抓取时会发生在内存中。

**2\. curr->next = head → 我也从来没有真正理解过这一点。也许我对“头”的定义是错误的，但是在常规链表中，它是列表中的起始节点还是最后一个节点？我一直认为它是起始节点，但在这一行中，它看起来像是最后一个节点。**
是的，头部是起始节点。

**3\. head = curr → 为什么我们设置它等于 curr？**
这个循环在这里添加新节点作为头部。像栈一样。其他方法在尾部添加新节点。两种方式仍然是“链表”。

**4\. curr = head → 然后在循环完成后设置 curr = head。**
`curr`就像一个索引，一个工作变量，所以你不会破坏数据结构。他完成后正在重置它。如果你愿意的话，“倒带”。

**5\. while(curr) → 只是为了确保，这是遍历列表，它相当于 while(curr != NULL) 对吗？**
是的，这是你在 C 中发现的那些隐含的东西之一。while 循环中的任何东西都是隐含的`while(whatnot != 0)`，并且 null == 0。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-15T20:54:23.543

[首先，您可以在Linked List Head Is Always Null](https://stackoverflow.com/questions/12556595/linked-list-head-is-always-null) 和[Simple C++ Linked List](https://stackoverflow.com/questions/1095954/simple-c-linked-list)中找到为什么 head 始终为 NULL 的问题的答案。初学者教程，您可以在 c 中找到[单链表](http://codingfreak.blogspot.com/2010/04/singly-linked-list-in-c.html)。语句 head=curr 通过分配内存将指针头的值 NULL 与接收非零值的当前指针的值相关联。while(curr) 是一个循环，只要 curr 与 NULL 不同，NULL 就会运行，NULL 作为指向地址的宏关联零值。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-15T20:56:16.787

我们从一无所有开始。就是这样

```
head = NULL; 
```

告诉我们。我们还没有列表，所以我们无法访问它。

现在我们从 1 循环到 10。我们从后到前构建一个列表。HEAD 为 NULL，因此“最后一个”（第一个创建的）指向 NULL：

```
curr->next  = head; // head is NULL in the first loop 
```

HEAD 现在设置为这个新元素：

```
head = curr; 
```

第二次运行此循环，head 存储指向最后创建的项目的指针。然后新创建的将指向它。我们将这个新项目设置在最后一个项目的前面。

环境

```
head = curr; 
```

需要完成，以确保在下一个循环中该 head 包含正确的指针。它被称为 head，因为它总是存储到那时创建的列表的开头。

//4 并不是必须的。

之前的最后一次操作是：

```
head = curr; 
```

所以

```
curr = head; 
```

是没有意义的。

第 5 个遍历列表。“curr”指向第一项（具有非 NULL 地址）并在每个循环中设置为 curr->next。一旦 curr 为 NULL（在最后一项），该语句就不再成立。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-06T07:16:48.757

在第4个问题中，我认为没有`curr=head`必要。因为当循环结束时，curr和head指针指向同一个节点（i = 10的节点）。但这是一个好习惯。

# python - 从 3 个点计算方向旋转角度

> ID：15441749
> 
> 赞同：0
> 
> 时间：2013-03-15T20:42:23.120
> 
> 标签：python, rotation, angle

我要做的是找到由三个连续点形成的线之间的旋转角度。这些是顺序点，因此旋转方向很重要。我的输入是一对坐标序列。

我想要的输出是每个点的旋转角度，该点将作为角度的顶点。这个角度将在 1 到 360 之间，其中负数表示向左旋转，正数表示向右旋转。

我已经为此苦苦挣扎了好几个星期，但我终于比以往任何时候都更接近解决方案了。我编写了以下脚本并将其与程序地理空间建​​模工具（GME）的“路径度量”功能的输出进行了比较。

```
coords=coords=[[283907,971700],[284185,971634],[284287,971507],[284275,971608],[283919,971761],[284311,971648],[284277,971637],[284280,971651],[284174,971649],[283909,971701],[283941,971700],[284294,971518],[284288,971517],[284315,971539],[284250,971505]
print "A"+"\t"+"B"+"\t"+"C"+"\t"+"orientation"+"\t"+"angle"+"\t"+"bearing AB"+"\t"+"bearing BC"
for a in coords:
  A=a
  indexA=coords.index(a)
  B=coords[indexA+1]
  C=coords[indexA+2]
  ##Find the bearings of AB and BC
  AB=[B[0]-A[0],B[1]-A[1]]          #find the extreme of vector AB
  BearAB=math.atan2(AB[0],AB[1])    #use arctan2 to find the angle
  ABBearDeg=math.degrees(BearAB)    #in degrees
  if ABBearDeg<0:                   #if negative, add 360 in order to obtain the angle in a clockwise direction
   ABBearDeg=360+ABBearDeg          #Bearing AB
  BC=[C[0]-B[0],C[1]-B[1]]          #Do the same for points BC
  BearBC=math.atan2(BC[0],BC[1])
  BCBearDeg=math.degrees(BearBC)
  if BCBearDeg<0:
   BCBearDeg=360+BCBearDeg          #Bearing BC
 ##Find the angle between the lines
  alfa=BCBearDeg-ABBearDeg          #Obtain the difference between the bearing angles
  if abs(alfa)>180:                 #If greater than 180
   if alfa<0:                        #and negative
    angle=(360+alfa)                   #Direction of rotation is right and angle is obtained by adding 360
    print format(A)+"\t"+format(B)+"\t"+format(C)+"\t"+"right"+"\t"+format(angle)+"\t"+format(round(ABBearDeg,2))+"\t"+format(round(BCBearDeg,2))
   else:                             #If positive
    angle=alfa-360                      #Direction of rotation is left and angle is obtained by substracting 360
    print format(A)+"\t"+format(B)+"\t"+format(C)+"\t"+"left"+"\t"+format(angle)+"\t"+format(ABBearDeg)+"\t"+format(round(BCBearDeg,2))
  else:                            #If the difference was less than 180, then the rotation angle is equal to it
   angle=alfa
   if angle<0:                     #If negative, left rotation
       print format(A)+"\t"+format(B)+"\t"+format(C)+"\t"+"left"+"\t"+format(angle)+"\t"+format(ABBearDeg)+"\t"+format(round(BCBearDeg,2))
   else:                            #If positive, right rotation
    print format(A)+"\t"+format(B)+"\t"+format(C)+"\t"+"right"+"\t"+format(angle)+"\t"+format(ABBearDeg)+"\t"+format(round(BCBearDeg,2)) 
```

虽然许多结果一致，但其他结果却不一致。

```
 My results                                                                      GME results     
        A                   B                   C       orientation     angle       bearing AB  bearing BC  GMEangle    GMEbearing AB   GMEbearing BC
[283907, 971700]    [284185, 971634]    [284287, 971507]    right       37.8750     103.3553    141.2300    37.8750     103.3553        141.2303
[284185, 971634]    [284287, 971507]    [284275, 971608]    left        -148.0060   141.2303    353.2200    -148.0060   141.2303        353.2243
[284287, 971507]    [284275, 971608]    [283919, 971761]    left        -59.9675    353.2243    293.2600    -68.9673    353.2243        284.2570
[284275, 971608]    [283919, 971761]    [284311, 971648]    right       172.8236    293.2600    106.0800    96.6181     284.2570        106.0804
[283919, 971761]    [284311, 971648]    [284277, 971637]    right       145.9916    106.0804    252.0700    145.9916    106.0804        252.0721
[284311, 971648]    [284277, 971637]    [284280, 971651]    right       120.0227    252.0700    12.0900     120.0227    252.0721        12.0948
[284277, 971637]    [284280, 971651]    [284174, 971649]    left        -103.1757   12.0948     268.9200    -103.1757   12.0948         268.9191
[284280, 971651]    [284174, 971649]    [283909, 971701]    right       12.1828     268.9191    281.1000    -131.4097   268.9191        137.5094
[284174, 971649]    [283909, 971701]    [283941, 971700]    right       170.6880    281.1000    91.7900     85.2053     137.5094        9.4623
[283909, 971701]    [283941, 971700]    [284294, 971518]    right       25.4848     91.7899     117.2700    146.4722    9.4623          85.0429
[283941, 971700]    [284294, 971518]    [284288, 971517]    right       143.2629    117.2748    260.5400    123.0283    85.0429         260.5377
[284294, 971518]    [284288, 971517]    [284315, 971539]    right       150.2887    260.5400    50.8300     150.2887    260.5377        50.8263
[284288, 971517]    [284315, 971539]    [284250, 971505]    left        -168.4394   50.8263     242.3900    -147.5925   50.8263         263.2338 
```

（抱歉，桌子太乱了；我无法上传我想要的图片）

我已经能够指出错误发生的点，但我无法弄清楚它为什么会发生，因为它严格取决于我无法控制的预设公式。因此，不同之处在于（有时）我对矢量方位的计算与 GME 计算的不同。奇怪的是它只是偶尔发生，我不知道是什么触发了它。

对可能发生的事情有任何想法吗？

如果您知道任何其他计算包含运动方向的线之间的角度的方法，请告诉我。任何对我有用的都可以。

谢谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:40:19.570

您有 A、B 和 C 点。我从您的描述中假设 B 是旋转点。也就是说，向量 BA 转换为 BC。

*   创建向量 BA (AB) 和 BC (CB)。
*   计算向量的角度（使它们为正）及其差异
*   向量之间的角度差就是旋转角度。

使用 numpy 使这很容易。像这样：

```
In [1]: import numpy as np

In [2]: A = np.array([283907, 971700])

In [3]: B = np.array([284185, 971634])

In [4]: C = np.array([284287, 971507])

In [5]: BA = A - B

In [6]: BC = C - B

In [7]: BA
Out[7]: array([-278,   66])

In [8]: BC
Out[8]: array([ 102, -127])

In [9]: s = np.arctan2(*BA)

In [10]: if s < 0:
   ....:     s += 2*np.pi
   ....:     

In [11]: s
Out[11]: 4.9454836529138948

In [12]: e = np.arctan2(*BC)

In [13]: if e < 0:
    e += 2*np.pi
   ....:     

In [14]: e
Out[14]: 2.4649341681747883

In [15]: delta = e - s

In [16]: np.degrees(delta)
Out[16]: -142.12501634890182

In [17]: delta
Out[17]: -2.4805494847391065 
```

正角是逆时针方向。

# binary - 使用一个或两个补码时符号位会改变吗？

> ID：15441750
> 
> 赞同：1
> 
> 时间：2013-03-15T20:42:24.487
> 
> 标签：binary, twos-complement, complement, ones-complement

我一直在为看似简单的概念而苦苦挣扎，但我似乎一直在组合和混合二进制转换。

如果给定一个二进制数并应用 1 的补码，则反转所有位。使 0 成为 1 和 1 成为 0。对于 2 的补码，您可以像 1 的补码一样反转位并加 1。

这是否意味着您从字面上反转所有位？出于某种原因，我一直认为所有位都应该反转，除了最左边的位（符号位）。这里有一些例子..有人可以告诉我我这样做是否正确吗？

**1101001**

1 的补偿：0010110

2 的补偿：0010111

* * *

**01110101**

1 的补偿：10001010

2 的补偿：10001011

* * *

**011110110**

1的补偿：100001001

2 的补偿：100001011

* * *

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:17:24.010

你的概念是完全正确的：

*   一个补码 = 反转一切
*   二进制补码 = 反转所有内容，**包括最左边的位**，然后加 1

您的前两个示例是正确的，最后一个示例有点奇怪，因为您通常使用多个字节（8 位），而您的示例有 9 位，但仍然适用相同的规则：

```
 (0000000)011110110
ones -> (1111111)100001001
twos -> (1111111)100001010  <-- I think you had a typo here, you stated the result would be 100001011 
```

这是一篇关于该主题的精彩总结文章：http: [//academic.evergreen.edu/projects/biophysics/technotes/program/2s_comp.htm](http://academic.evergreen.edu/projects/biophysics/technotes/program/2s_comp.htm)

# javascript - Javascript动态事件分配表现得很奇怪

> ID：15441751
> 
> 赞同：1
> 
> 时间：2013-03-15T20:42:30.620
> 
> 标签：javascript, events

我在使用动态创建的 Javascript 事件处理函数时遇到问题。

在我的 HTML 中，我有以下内容：

```
<input id="nvctrlfont1" type=number min=18 max=144 step=1 value=36 maxlength="3" size="8">
<input id="nvctrlfont2" class="color" value="000000" style="background-color:black;width:70px;">
<input id="nvctrlfont4" class="color" value="000000" style="background-color:black;width:70px;"> 
```

......

类颜色只是一个 javascript 颜色选择器。

元素 ID 有 1,2,4 ... 等作为布尔值。也就是说，一个 JS 函数接收一个用于隐藏或显示 HTML 输入元素的布尔值。对于隐藏的元素，不分配事件，对于未隐藏的元素，将分配事件。

事件函数将驻留在 nvFontFuncs 中。

我似乎无法解决的问题：

当函数分配发生到 nvEL.onchange 时，它​​似乎每次都用相同的函数替换它。

例如，假设布尔值 nvFontBool 带有“6”，那么应该启用输入元素 nvcontrolfont2 和 nvcontrolfont4 并相应地将 nvFontFuncs nvctrlfont2 和 4 中的功能分配给 onchange 事件。

然而会发生的是 nvctrlfont4 函数最终被分配给两个元素。

换句话说，无论哪个元素设置了 onchange 事件，当单击它时，它都会调用最后一个分配的元素。在我的示例中，无论我更改 INPUT nvctrlfont2 还是 nvctrlfont4 元素，都会调用 nvctrlfont4()。

例如，如果我将 nvFontBool 参数更改为“7”，从而启用所有三个输入元素。然后无论更改哪一个，它都会调用 nvctrlfont4() （恰好是循环中分配的最后一个）。

我也尝试使用 addEvent 和 setAttributes，结果相同。它作为函数的 onchange 分配在绑定时是静态的。因此，哪个是最近的一个绑定最终会分别替换所有元素的先前绑定。

帮助？

继承人的JS。

```
var nvFontFuncs = {
  nvctrlfont1: function () { alert('Function 1'); },
  nvctrlfont2: function () { alert('Function 2'); },
  nvctrlfont4: function () { alert('Function 4'); }
}; 
```

这是功能

```
function nvSetFontCtrls(nvFontBool)
{
    var nvEL;
    var nvName="nvctrlfont";
    var nvTemp;

    nvFg=1;
    while(nvFontBool != 0) {
        //alert("FontBool:"+nvFontBool);
        nvTemp=nvName+nvFg.toString();
       // nvTemp="func"+nvFg.toString(); 
        nvEL=document.getElementById(nvTemp);
        if(nvFontBool & nvFg) {
             nvEL.style.display="block";
             nvEL.onchange=function() { nvFontFuncs[nvTemp](); }
        }
        else {
            nvEL.style.display="none";        
        }
        nvFontBool=nvFontBool&(~nvFg); //alert("nvfontbool:"+dechex(~nvFg));
        nvFg = nvFg << 1; 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:28:25.543

您分配以下功能：

```
function() { nvFontFuncs[nvTemp](); } 
```

`nvTemp`是 的局部范围内的变量`nvSetFontCtrls`。因此，当调用处理程序时，当然，nvTemp 具有它设置的最后一个值。

你可以这样做：

```
nvEL.onchange=(function(nvTemp) {
  return function() { nvFontFuncs[nvTemp](); }
}(nvTemp)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:46:46.853

问题是，nvTemp 设置为循环的最后一个值，因此一旦调用处理函数，nvTemp 将具有'nvctrlfont4'。

如果使用`nvEL.onchange=nvFontFuncs[nvTemp]`赋值，问题就解决了

# visual-studio-2012 - VS 2012 启动时自动更新 IIS 路径

> ID：15441753
> 
> 赞同：7
> 
> 时间：2013-03-15T20:42:41.373
> 
> 标签：visual-studio-2012, iis-7.5

我的雇主最近将我们从 VS 2010 升级到 VS 2012。这很棒，但有一个小烦恼，我希望这里有人可以帮助解决。在 VS 2010 中，当我切换分支时，它会询问我是否要更新 IIS 路径。类似于“port:blah 的路径指向这里。你想改变它吗？” VS 2012 懒得问。它只是改变它。我似乎找不到阻止这种行为的设置，所以我希望其他人有。在任何站点上搜索 IIS 都会带来太多无法筛选的结果，特别是考虑到前三十个左右中只有一个（实际上是这个论坛的一个主题）与 IIS 和 Visual Studio 更新路径有关（遗憾的是不是与此问题有关）。任何帮助将非常感激。

编辑：我找到了确切的信息。它显示：“Web 项目 '...' 当前配置为使用 URL '...'。Web 服务器将此 URL 映射到不同的文件夹 '...'。您想将此 URL 重新映射到指向此 Web 项目的文件夹？”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T20:08:26.750

我把这个问题带到了 MSDN 论坛。我在那里收到了答案，所以我只是将这个问题链接到 MSDN 问题。

[MSDN 论坛问题](http://social.msdn.microsoft.com/Forums/en-US/visualstudiogeneral/thread/b2ca64c1-afb1-4731-8e9c-fc68b3e4bd40/#9dd4639d-7dba-4eb8-8590-66e682f1c0f0)

[在 visualstudio.uservoice.com 上请求](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3767262-give-us-a-setting-that-allows-us-to-automatically-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T03:55:33.733

只是我解决这个问题的方法：

*   在 IIS 管理器中，我为每个分支创建了站点，然后使用不同的端口对其进行了配置。

*   在 VS2012 中打开每个 web 项目，然后将属性设置为：

    *   `Start Action`= 不要打开页面。等待来自外部应用程序的请求。

    *   `Servers`= 本地 IIS

    *   `Project URL`: http://localhost:[IIS 上此站点的端口]

这样，VS2012 就不会修改 web 端口和路径。我仍然可以使用不同的分支进行调试。

这对你有帮助吗？

# batch-file - 批处理脚本 - 导出带有 infomraiton 的文本文件

> ID：15441755
> 
> 赞同：0
> 
> 时间：2013-03-15T20:42:42.907
> 
> 标签：batch-file

我们正在为视频服务器使用 RMTP，但是我们必须为每个视频创建一个 SMIL（同步多媒体集成语言）文件。如果您有 1 个视频，没问题，但是我们有超过 2000 个视频。

下面你可以看到一个完美的 SMIL 文件。这个保存为 video-test.smil

```
<smil>
<head>
<meta base="rtmp://xxx.cloudfront.net:1935/cfx/st/" />
</head>
<body>
<switch>
<video src="video-streaming/video-test-720.mp4" height="720" system-bitrate="2000000" width="1280" />
<video src="video-streaming/video-test-360.mp4" height="360" system-bitrate="800000" width="640" />
<video src="video-streaming/video-test-180.mp4" height="180" system-bitrate="300000" width="320"/>
</switch>
</body>
</smil> 
```

我的想法是制作一个批处理脚本来执行以下操作：

1.  读取文件夹并仅使用具有 .MP4 扩展名的文件名创建数组
2.  取第一个数组并用第一个数组中的名称替换“video-test”
3.  在文件夹中使用 .smil 从数组的第一部分导出具有相同名称的文件
4.  递增数组并重复

如果文件存在，特殊功能将是跳过。

问题：

这甚至可以用脚本来完成。有人可以帮忙吗。。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:08:34.570

```
@ECHO OFF
SETLOCAL
SET targetdir=.
FOR /f %%i IN ('dir /b/a-d *.mp4') DO (
IF NOT EXIST %targetdir%\%%~ni.smil (
FOR /f "tokens=1*delims=#" %%s IN (smiltemplate.txt) DO (
SET subs=%%t
IF DEFINED subs (ECHO %%s%%~ni%%t) ELSE (ECHO %%s)
)
) >%targetdir%\%%~ni.smil
) 
```

将您完美的 smil 文件另存为`smiltemplate.txt`- 将字符串`video-test`替换为`#`

将目标目录更改为您要生成`.smil`s 的位置，一切都完成了！

# javascript - 循环一个 Javascript 函数

> ID：15441757
> 
> 赞同：0
> 
> 时间：2013-03-15T20:42:53.447
> 
> 标签：javascript, arrays, loops, while-loop

我很难弄清楚这一点。我想循环所有月份一次，而不是像我现在的代码那样循环十二次。任何人都可以帮忙，还有更有效的方法来循环这个功能吗？

谢谢！

```
 window.onload = function() {
    getMonth();
};

 function getMonth()
{
var x="",i=0;
var month=Array();
month[0]="January";
month[1]="February";
month[2]="March";
month[3]="April";
month[4]="May";
month[5]="June";
month[6]="July";
month[7]="August";
month[8]="September";
month[9]="October";
month[10]="November";
month[11]="December";

   while (i<12)
      {
      x=x  + month + "<br/>";
       i++;
       }
    document.getElementById("months").innerHTML=x;
    } 
```

这是我的 jsfiddle 演示的链接[http://jsfiddle.net/priswiz/LqEE6/](http://jsfiddle.net/priswiz/LqEE6/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T20:44:36.143

只需使用 Array .join 方法。

```
var x = month.join("<br />"); 
```

如果您使用，您的代码将起作用`x=x + month[i] + "<br/>";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T20:48:51.420

我假设您正在尝试按索引访问数组

```
while (i<12)
{
  x=x  + month[i] + "<br/>";
  i++;
} 
```

目前，您正在打印月份的值。

# objective-c - prepareForSegue 中未声明的标识符错误：在 iOS6 中使用 Storyboard

> ID：15441758
> 
> 赞同：0
> 
> 时间：2013-03-15T20:42:57.507
> 
> 标签：objective-c, ios6, uistoryboardsegue

我正在尝试在 iOS6 中使用 Storyboards 构建一个 2 场景应用程序。我在第一个场景中通过文本输入获取用户名，并使用 push segue 将其传递到第二个场景；它在标签中显示的位置。

第一个场景的 UIViewController 叫做 ViewController，第二个场景的 UIViewcontroller 是 DrawViewController。

我在 ViewController.m 文件中导入了 DrawViewController.h，我在其中定义了 prepareForSegue，如下所示：

```
 -(void) prepareForSegue:(UIStoryboardSegue *) segue sender:(id) sender{
    if ([segue.identifier isEqualToString:@"ColorPickerControllerSegue"]){

        DrawViewController *dvc =[segue destinationViewController];
        dvc.userName= self.userName;
    }
    } 
```

这里 userName 是 DrawViewController 中定义的 NSString。我得到“使用未声明的标识符：DrawViewController”。我对 iOS 编程很陌生，所以这里有什么我遗漏的吗？

我已将第二个视图控制器的自定义类设置为 DrawViewController。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:07:37.037

我能够通过删除现有的 DrawViewController.h 和 DrawViewController.m 文件，然后创建并将它们添加回项目来解决这个问题。它似乎奏效了。

# php - PHP忽略字符串内的空格以形成数组

> ID：15441759
> 
> 赞同：2
> 
> 时间：2013-03-15T20:42:58.520
> 
> 标签：php, preg-match, preg-match-all

我在 PHP 中有一个这样的字符串-

```
$str = "Foo var1='Abook' var2='A book'"; 
```

我正在尝试将此字符串转换为将`''`引号内的单词视为单个语句的数组（即它们将忽略`''`引号内的空格）。所以我的数组看起来像

```
Array
(
   [0] => "Foo",
   [1] => "var1='Abook'",
   [3] => "var2='A book'"
) 
```

**请注意，数组是由引号外** 的空格分隔字符串形成的`''`，但不是在引号内。

你能不能给我一些好的 preg 函数，这样我就可以完成这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:59:04.040

这解决了我的问题-

```
$str= 'word1 word2 \'this is a phrase\' word3 word4 "this is a second phrase" word5 word1 word2 "this is a phrase" word3 word4 "this is a second phrase" word5';

$regexp = '/\G(?:"[^"]*"|\'[^\']*\'|[^"\'\s]+)*\K\s+/';

$arr = preg_split($regexp, $str);

print_r($arr); 
```

原文链接[在这里](https://stackoverflow.com/questions/1721921/how-could-i-find-all-whitespaces-excluding-the-ones-between-quotes)。显然我只需要正确的正则表达式。问题解决了！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:55:50.700

这适用于您的示例输入和输出，但对您来说可能不够通用。这至少是一个起点：

```
<?php
  $str = "Foo var1='Abook' var2='A book'";
  $res = array();

  $bits = explode(' ', $str, 2);

  $res[] = $bits[0];

  if (preg_match_all("/\w+='[^']+'/", $bits[1], $matches) !== false) {
    $res = array_merge($res, $matches[0]);
  }

  print_r($res);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T21:05:50.117

```
$s = "Foo var1='Abook' var2='A book'";
preg_match_all("~(?:(?<=^| )[^']+(?= |$)|(?<=^| )[^']+'[^']+'(?= |$))~", $s, $m);
print_r($m[0]);

Outputs:
Array
(
  [0] => Foo
  [1] => var1='Abook'
  [2] => var2='A book'
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T20:47:38.873

这里你需要什么：

`$array = explode(' ', $str);`

**更新**

你可以试试这个：

```
preg_match_all('/\'([^\']+)\'/', $string, $matches);
$matches = $matches[1]; 
```

`' '`获取替换空格之间的所有文本 ，`{SPACE}` 以便您的字符串看起来像`$str = "var1='A{SPACE}book'"`然后您可以`explode()`通过空格来完成。

嗯？

# ios - Textfield 确实结束了编辑崩溃应用程序

> ID：15441763
> 
> 赞同：1
> 
> 时间：2013-03-15T20:43:07.377
> 
> 标签：ios, objective-c, core-data, uitextfield

我已经设置了一个异常断点，并收到错误`unrecognized selector sent to instance`实例是 UITableViewCell 本身。该应用程序使用 CoreData，当 UITextfield 结束编辑时，我想将文本保存到 NSManagedObject。

这是`textFieldDidEndEditing`我的 TableViewController 中的方法：

```
- (void)textFieldDidEndEditing:(UITextField *)textField {
    MCSwipeTableViewCell *cell = (MCSwipeTableViewCell *) textField.superview.superview;
    TehdaItem *item = [self.fetchedResultsController objectAtIndexPath:[self.tableView indexPathForCell:cell]];

    item.itemTitle = cell.itemLabel.text; //The exception gets thrown on this line
// itemLabel is a UITextField and itemTitle is a string attribute of TehdaItem the NSManagedObject

    NSError *error;
    [item.managedObjectContext save:&error];

    if (![self.fetchedResultsController performFetch:&error]) {
        // Replace this implementation with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

} 
```

被`<UITextFieldDelegate>`设置为我的 TableViewController 并且我将它设置为 UITextField 的委托。无法真正弄清楚这里的问题是什么。

编辑：删除最后一个`superview`电话`MCSwipeTableViewCell *cell = (MCSwipeTableViewCell *) textField.superview.superview;`已经解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:50:09.617

显然，您的 UITextField 的超级视图的超级视图属于 UITableViewCell 类型，而不是您期望的 MCSwipeTableViewCell 对象。查看单元格的创建位置，这很可能是 cellForRowAtIndexPath 和/或它是您在界面构建器/故事板编辑器中所做的原型单元格的类分配。

# c# - 获取父级的 ContextMenu Datacontext

> ID：15441766
> 
> 赞同：0
> 
> 时间：2013-03-15T20:43:17.597
> 
> 标签：c#, wpf, data-binding, contextmenu

我有一个绑定到 CommandBinding 的 ContextMenu：

```
<MetroTreeView:MetroTreeView x:Name="tvTagList" Grid.Row="1" Margin="15, 0, 15, 0" SelectedItemChanged="tvTagList_SelectedTagChanged" ItemsSource="{Binding}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Background="{x:Null}" BorderBrush="{DynamicResource ExtryzeAccentBrushSecondary}" BorderThickness="2" Foreground="White"
    VirtualizingStackPanel.IsVirtualizing="True" VirtualizingStackPanel.VirtualizationMode="Standard">
<MetroTreeView:MetroTreeView.Resources>
    <HierarchicalDataTemplate DataType="{x:Type  DataBind:TagClass}" ItemsSource="{Binding Children}" >
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
            <TextBlock>
                <Run Text="{Binding TagClassMagic}" />
                <Run Foreground="{StaticResource TextBrushSecondary}" Text=" - " />
                <Run Foreground="{StaticResource TextBrushSecondary}" Text="{Binding Path=Description, Converter={StaticResource IValueTagDescriptionCleanup}}" />
            </TextBlock>
            <StackPanel.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Dump Tag List..." Click="DumpClassTagList" />
                </ContextMenu>
            </StackPanel.ContextMenu>
        </StackPanel>
    </HierarchicalDataTemplate>
    <DataTemplate DataType="{x:Type DataBind:TagEntry}">
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
            <StackPanel.ContextMenu>
                <ContextMenu>
                    <ContextMenu.CommandBindings>
                        <CommandBinding Command="{x:Static DataBind:HaloMap.CommandTagBookmarking }"
                                            CanExecute="CommandTagBookmarking_CanExecute"
                                            Executed="CommandTagBookmarking_Executed"
                                            />
                    </ContextMenu.CommandBindings>
                    <MenuItem Header="Bookmark Tag" Foreground="White" Command="{x:Static DataBind:HaloMap.CommandTagBookmarking}" CommandParameter="{Binding}" />
                </ContextMenu>
            </StackPanel.ContextMenu>
            <TextBlock Text="{Binding TagFileName}" />
        </StackPanel>
    </DataTemplate>
</MetroTreeView:MetroTreeView.Resources>
<MetroTreeView:MetroTreeView.ItemContainerStyle>
    <Style TargetType="{x:Type MetroTreeView:MetroTreeViewItem}" BasedOn="{StaticResource {x:Type MetroTreeView:MetroTreeViewItem}}">
        <EventSetter Event="MouseDoubleClick" Handler="tvTagList_ItemDoubleClick" />
    </Style>
</MetroTreeView:MetroTreeView.ItemContainerStyle> 
```

但是当我运行`CanExecute`命令时，每次访问 DataContext 的尝试总是遇到一个空值：

```
private void CommandTagBookmarking_CanExecute(object sender, CanExecuteRoutedEventArgs e)
{
    var a = e.Source;
    var b = ((MenuItem)a).DataContext;
    var c = ((ContextMenu) ((MenuItem) e.Source).Parent).DataContext;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:45:10.697

尝试这个：

```
<ContextMenu DataContext="{Binding PlacementTarget, RelativeSource={RelativeSource Self}}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:16:25.917

因为`ContextMenu`不要位于`VisualTree`放置它的对象的位置。您必须使用-继承`DataContext`对象`PlacementTarget`

```
<ContextMenu DataContext="{Binding PlacementTarget.DataContext,
                                   RelativeSource={RelativeSource Self}}"> 
```

# facebook - 通过 API 在 Facebook 上分享 YouTube 视频

> ID：15441767
> 
> 赞同：0
> 
> 时间：2013-03-15T20:43:33.070
> 
> 标签：facebook, api, youtube, share

这可能是不可能的，但我把它扔在这里给任何有疯狂好主意的人，或者如果他们碰巧遇到了一些关于它的信息。

我有一个使用 API 的嵌入式 YouTube 播放器 (iFrame)，带有一个自定义 JS 控制栏。所有这些都很好。

但是，我希望有一个共享选项，因为我网站上的视频通常会显示为覆盖，因此共享页面并不理想，而是共享视频本身。有没有办法让用户直接从我的页面共享 YouTube 链接，而不仅仅是指向我网站的链接？

我已经意识到后备是在我的网站上创建一个 URL，该 URL 采用视频 id 参数并重定向到正确的 youtube 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:12:56.940

来自 YouTube 的嵌入视频是否默认包含所有 YouTube 功能？

（点赞、分享、全屏等……）

# html - 在某些情况下用 css 隐藏文本并避免搜索引擎惩罚？

> ID：15441768
> 
> 赞同：2
> 
> 时间：2013-03-15T20:43:39.783
> 
> 标签：html, css

我正在开发一个插图工具，我希望它对用户来说是可视化的，但屏幕阅读器和搜索引擎可以访问它。我有以下html：

```
<span class="card">A new idea is presented to the group. </span>
<span class="spoke userOne active understands">
  <span class="node">
    <span class="label">User one </span>
    <span class="relationship">is engaged in the conversation</span>
    <span class="user"><span class="status"> and understands. </span></span>
  </span>
</span> 
```

这是带有和不带有 css 的插图渲染的链接：

[http://jsfiddle.net/FnBd4/](http://jsfiddle.net/FnBd4/)

[http://jsfiddle.net/FnBd4/1/](http://jsfiddle.net/FnBd4/1/)

编辑：我根据一些早期的反应稍微改变了这个问题。我试图不使文本与视觉表示混乱，但仍然可以为屏幕阅读器和搜索引擎提供可访问的副本。现在，我通过将大多数元素的字体大小设置为 0px 来做到这一点，我想知道这是否会导致 SEO 惩罚？如果是这样，是否有理想的方法来做到这一点（除了使用带有 alt 属性的图像标签）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:51:57.683

搜索引擎只分析可见内容。愿您可以将 img-Elements 与 alt-Attribute 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:08:06.630

根据这篇[WebAIM 辅助功能文章](http://webaim.org/techniques/css/invisiblecontent/)，通常建议将仅屏幕阅读器的文本移至左侧 - 在任何浏览器窗口之外 - 屏幕阅读器仍将使用它。

```
.hidden{ position:absolute; left:-10000px; top:auto; width:1px; height:1px; overflow:hidden; } 
```

我也特别喜欢 Jason Lydon 发布的使用 text-indent 的链接，尽管它似乎只是旧机器和设备上的性能差异。所以选择吧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:51:40.897

我是 Zeldman 隐藏文本的隐藏文本 css 的粉丝：[http ://www.zeldman.com/2012/03/01/replacing-the-9999px-hack-new-image-replacement/](http://www.zeldman.com/2012/03/01/replacing-the-9999px-hack-new-image-replacement/)

```
.hide-text {
    text-indent: 100%;
    white-space: nowrap;
    overflow: hidden;
} 
```

# javascript - jsPlumb 使用单击而不是拖动来连接元素

> ID：15441794
> 
> 赞同：3
> 
> 时间：2013-03-15T20:46:02.840
> 
> 标签：javascript, jquery, jsplumb

我正在尝试使用[jsPlumb](http://jsplumbtoolkit.com/jquery/demo.html)将问题与测验中的答案联系起来。我有大部分工作期望我希望能够单击一个问题，然后单击一个答案，而不是从一个端点拖动到另一个端点。这是因为在触摸设备上拖动很乏味。这可能吗？

[这是我的 jsbin 与拖动工作](http://jsbin.com/ajideh/4/)

这是我正在使用的 jquery。

```
$(document).ready(function () {  
   var targetOption = {
        anchor: "LeftMiddle",
        isSource: false,
        isTarget: true,
        reattach: true,
        endpoint: "Rectangle",
        connector: "Straight",
        connectorStyle: { strokeStyle: "#ccc", lineWidth: 5 },
        paintStyle: { width: 20, height: 20, fillStyle: "#ccc" },
        setDragAllowedWhenFull: true
    }

    var sourceOption = {
        tolerance: "touch",
        anchor: "RightMiddle",
        maxConnections: 1,
        isSource: true,
        isTarget: false,
        reattach: true,
        endpoint: "Rectangle",
        connector: "Straight",
        connectorStyle: { strokeStyle: "#ccc", lineWidth: 5 },
        paintStyle: { width: 20, height: 20, fillStyle: "#ccc" },
        setDragAllowedWhenFull: true
    }

    jsPlumb.importDefaults({
        ConnectionsDetachable: true,
        ReattachConnections: true
    });

    jsPlumb.addEndpoint('match1', sourceOption);
    jsPlumb.addEndpoint('match2', sourceOption);
    jsPlumb.addEndpoint('match3', sourceOption);
    jsPlumb.addEndpoint('match4', sourceOption);
    jsPlumb.addEndpoint('answer1', targetOption);
    jsPlumb.addEndpoint('answer2', targetOption);
    jsPlumb.addEndpoint('answer3', targetOption);
    jsPlumb.addEndpoint('answer4', targetOption);
    jsPlumb.draggable('match1');
    jsPlumb.draggable('answer1');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T20:12:20.107

我认为如果您不需要可拖动，那么您不应该使用它，并使用正常的 click=connect 方法。

这是一个例子：

[http://jsbin.com/ajideh/7/](http://jsbin.com/ajideh/7/)

基本上我做了什么：

```
//current question clicked on
var questionSelected = null;
var questionEndpoint = null;

//remember the question you clicked on
$("ul.linematchitem > li").click( function () {

    //remove endpoint if there is one
    if( questionSelected !== null )
    {
        jsPlumb.removeAllEndpoints(questionSelected);
    }

    //add new endpoint
    questionSelected = $(this)[0];
    questionEndpoint = jsPlumb.addEndpoint(questionSelected, sourceOption);
});

//now click on an answer to link it with previously selected question
$("ul.linematchplace > li").click( function () {

    //we must have previously selected question
    //for this to work
    if( questionSelected !== null )
    {
        //create endpoint
        var answer = jsPlumb.addEndpoint($(this)[0], targetOption);

        //link it
        jsPlumb.connect({ source: questionEndpoint, target: answer }); 
        //cleanup
        questionSelected = null;
        questionEndpoint = null;
    }
}); 
```

当您单击问题列表元素时 - 它会添加端点，当您单击答案元素时 - 它还会添加端点并将其与先前选择的问题连接起来。

我相信这就是你想要做的？

![点击连接](../Images/7017688508a940f4a826518957856844.png)

PS 作为旁注，为了让用户更直观，首先让问题的端点可见，这样用户就会知道该怎么做——点击。选择问题后，可用的答案端点会弹出提示用户应单击下一步的位置。

# python - PyPI 上传停止工作并且 pip 安装失败

> ID：15441796
> 
> 赞同：4
> 
> 时间：2013-03-15T20:46:19.977
> 
> 标签：python, setup.py, pypi

昨晚我提交了我的第一个 PyPI 项目，但事情并没有按预期工作（警告前面的帖子很长）......

我最初通过命令行通过以下方式上传了项目[cvrfparse](https://pypi.python.org/pypi/cvrfparse)：

```
% python setup.py sdist upload 
```

这很好地创建了初始项目。但是尝试通过 pip 安装项目，因此失败了：

```
% sudo pip install cvrfparse
Password:
Downloading/unpacking cvrfparse
  Running setup.py egg_info for package cvrfparse
    Traceback (most recent call last):
      File "<string>", line 16, in <module>
      File "/private/tmp/pip-build-root/cvrfparse/setup.py", line 3, in <module>
        from distribute_setup import use_setuptools
    ImportError: No module named distribute_setup
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "<string>", line 16, in <module>

  File "/private/tmp/pip-build-root/cvrfparse/setup.py", line 3, in <module>

    from distribute_setup import use_setuptools

ImportError: No module named distribute_setup

----------------------------------------
Command python setup.py egg_info failed with error code 1 in /private/tmp/pip-build-root/cvrfparse
Storing complete log in /Users/m/Library/Logs/pip.log 
```

根据[http://pythonhosted.org/distribute/setuptools.html#using-setuptools-without-bundling-it](http://pythonhosted.org/distribute/setuptools.html#using-setuptools-without-bundling-it)如果我有它应该只是“工作”：

```
from distribute_setup import use_setuptools
use_setuptools() 
```

在 setup.py 中的加载卡之后。然后我尝试按照以下方式将distribute_setup.py添加到MANIFEST.in：

```
% cat MANIFEST.in 
include distribute_setup.py 
```

因此，在添加该文件并在 setup.py 中增加版本号后，我尝试将新包上传到 PyPI：

```
% python setup.py sdist upload
running sdist
running egg_info
writing requirements to cvrfparse.egg-info/requires.txt
writing cvrfparse.egg-info/PKG-INFO
writing top-level names to cvrfparse.egg-info/top_level.txt
writing dependency_links to cvrfparse.egg-info/dependency_links.txt
writing entry points to cvrfparse.egg-info/entry_points.txt
reading manifest file 'cvrfparse.egg-info/SOURCES.txt'
reading manifest template 'MANIFEST.in'
writing manifest file 'cvrfparse.egg-info/SOURCES.txt'
running check
creating cvrfparse-0.10
creating cvrfparse-0.10/cvrfparse
creating cvrfparse-0.10/cvrfparse.egg-info
creating cvrfparse-0.10/cvrfparse/sample-xml
creating cvrfparse-0.10/cvrfparse/schemata
creating cvrfparse-0.10/cvrfparse/schemata/common
creating cvrfparse-0.10/cvrfparse/schemata/common/1.1
creating cvrfparse-0.10/cvrfparse/schemata/cvrf
creating cvrfparse-0.10/cvrfparse/schemata/cvrf/1.1
creating cvrfparse-0.10/cvrfparse/schemata/dublincore
creating cvrfparse-0.10/cvrfparse/schemata/prod
creating cvrfparse-0.10/cvrfparse/schemata/prod/1.1
creating cvrfparse-0.10/cvrfparse/schemata/scap
creating cvrfparse-0.10/cvrfparse/schemata/vuln
creating cvrfparse-0.10/cvrfparse/schemata/vuln/1.1
creating cvrfparse-0.10/cvrfparse/schemata/w3.org
making hard links in cvrfparse-0.10...
hard linking MANIFEST.in -> cvrfparse-0.10
hard linking README -> cvrfparse-0.10
hard linking distribute_setup.py -> cvrfparse-0.10
hard linking setup.py -> cvrfparse-0.10
hard linking cvrfparse/__init__.py -> cvrfparse-0.10/cvrfparse
hard linking cvrfparse/cvrfparse.py -> cvrfparse-0.10/cvrfparse
hard linking cvrfparse.egg-info/PKG-INFO -> cvrfparse-0.10/cvrfparse.egg-info
hard linking cvrfparse.egg-info/SOURCES.txt -> cvrfparse-0.10/cvrfparse.egg-info
hard linking cvrfparse.egg-info/dependency_links.txt -> cvrfparse-0.10/cvrfparse.egg-info
hard linking cvrfparse.egg-info/entry_points.txt -> cvrfparse-0.10/cvrfparse.egg-info
hard linking cvrfparse.egg-info/requires.txt -> cvrfparse-0.10/cvrfparse.egg-info
hard linking cvrfparse.egg-info/top_level.txt -> cvrfparse-0.10/cvrfparse.egg-info
hard linking cvrfparse/sample-xml/CVRF-1.1-cisco-sa-20110525-rvs4000.xml -> cvrfparse-0.10/cvrfparse/sample-xml
hard linking cvrfparse/schemata/catalog.xml -> cvrfparse-0.10/cvrfparse/schemata
hard linking cvrfparse/schemata/common/1.1/common.xsd -> cvrfparse-0.10/cvrfparse/schemata/common/1.1
hard linking cvrfparse/schemata/cvrf/1.1/cvrf.xsd -> cvrfparse-0.10/cvrfparse/schemata/cvrf/1.1
hard linking cvrfparse/schemata/dublincore/dc.xsd -> cvrfparse-0.10/cvrfparse/schemata/dublincore
hard linking cvrfparse/schemata/prod/1.1/prod.xsd -> cvrfparse-0.10/cvrfparse/schemata/prod/1.1
hard linking cvrfparse/schemata/scap/cpe-language_2.2a.xsd -> cvrfparse-0.10/cvrfparse/schemata/scap
hard linking cvrfparse/schemata/scap/cvss-v2_0.9.xsd -> cvrfparse-0.10/cvrfparse/schemata/scap
hard linking cvrfparse/schemata/scap/scap-core_0.9.xsd -> cvrfparse-0.10/cvrfparse/schemata/scap
hard linking cvrfparse/schemata/vuln/1.1/vuln.xsd -> cvrfparse-0.10/cvrfparse/schemata/vuln/1.1
hard linking cvrfparse/schemata/w3.org/xml.xsd -> cvrfparse-0.10/cvrfparse/schemata/w3.org
Writing cvrfparse-0.10/setup.cfg
Creating tar archive
removing 'cvrfparse-0.10' (and everything under it)
running upload
Traceback (most recent call last):
  File "setup.py", line 21, in <module>
    ['cvrfparse = cvrfparse.cvrfparse:main',]}
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/core.py", line 152, in setup
    dist.run_commands()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py", line 972, in run_command
    cmd_obj.run()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/command/upload.py", line 60, in run
    self.upload_file(command, pyversion, filename)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/command/upload.py", line 135, in upload_file
    self.password)
TypeError: cannot concatenate 'str' and 'NoneType' objects 
```

似乎某些东西`None`在以前的地方？

然后我尝试通过以下方式创建分发手动上传包：

```
% python setup.py sdist 
```

并通过 Web 界面将该文件上传到 PyPI。pip install 仍然报告这个新的 .10 软件包存在同样的问题。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:16:16.400

PyPI 似乎有你的包并加载它就好了（对我来说，在干净的 virtualenv 中的 Ubuntu 12.04.2 上）。您的工具使用 console_scripts 并且您的 main 需要一个参数 (progname)，而 load_enry_point() (setuptools) 不会发送该参数。只需为该参数分配一个默认值。例如：

```
def main(progname=sys.argv[0]): 
```

你应该是金色的。不要忘记更新您的版本号并重新推送到 PyPI。

# linqpad - Linqpad 你如何使用 Util.WriteCSV 使用 LinqPad 的 Beta 版将数据表写入 excel

> ID：15441802
> 
> 赞同：2
> 
> 时间：2013-03-15T20:46:30.140
> 
> 标签：linqpad

这是我第一次致命一击

```
Util.WriteCsv<DataTable>(myDataTable, filePath); 
```

> 我得到的例外是 'System.Data.DataTable' 到 'System.Collections.Generic.IEnumerable'

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T00:11:10.987

事实证明，最新的 linqpad beta 版本（v4.44.9）支持数据表

```
Util.WriteCSV 
```

见[http://www.linqpad.net/beta.aspx](http://www.linqpad.net/beta.aspx)

同时，如果您需要为旧版本的数据表生成 csv 文件，您可以按照以下说明进行操作：

我最终编写了一个自定义程序来执行此操作，因为似乎 beta 版本 (4.44.06) 期待 IEnumerable，即使在我将 .AsIEnumerable() 放在 myDataTable 上之后，它也不是正确的：

```
public static void ExportToCSV(DataTable table, string filePath)
{
  var sb = new StringBuilder();
  foreach (DataColumn column in table.Columns)
  {
    sb.Append(column.ColumnName + ",");
  }

  sb.Append(Environment.NewLine);

  foreach (DataRow row in table.Rows)
  {
    for (int i = 0; i < table.Columns.Count; i++)
    {
      sb.Append(row[i].ToString().Replace(",", string.Empty) + ",");
    }
    sb.Append(Environment.NewLine);
  }

 System.IO.File.WriteAllText(filePath, sb.ToString() );
 string.Format("wrote output to {0}", filePath).Dump();

} 
```

# c#-4.0 - 将图像发布到 Windows Phone 8 中的 Web 服务器

> ID：15441803
> 
> 赞同：4
> 
> 时间：2013-03-15T20:46:34.040
> 
> 标签：c#-4.0, windows-runtime, windows-phone-8, dotnet-httpclient

我有一个运行良好的 Windows 8 应用程序，现在我想为 Windows Phone 8 编写相同的应用程序，但我只得到一个黑色图像而不是正确的图像。

这是我上传图片文件的代码

```
if ((_fileType == ".jpg" || _fileType == ".png" || _fileType == ".jpeg") && _fileSize < 3500000)
{
    byte[] myPicArray = ConvertToBytes(_bmpFile);
    HttpClient httpClient = new HttpClient();
    httpClient.BaseAddress = new Uri(MYURI);
    MultipartFormDataContent form = new MultipartFormDataContent();
    HttpContent content = new ByteArrayContent(myPicArray);
    form.Add(content, "media", _randomStringFileName + _fileType);

    HttpResponseMessage response = await httpClient.PostAsync("upload.php", form);
} 
```

这是将我的图像转换为字节数组的代码

```
private byte[] ConvertToBytes(BitmapImage bitmapImage)
{
    using (MemoryStream ms = new MemoryStream())
    {
        WriteableBitmap btmMap = new WriteableBitmap
            (bitmapImage.PixelWidth, bitmapImage.PixelHeight);

        // write an image into the stream
        Extensions.SaveJpeg(btmMap, ms,
            bitmapImage.PixelWidth, bitmapImage.PixelHeight, 0, 100);

        return ms.ToArray();
    }
} 
```

有人知道为什么我只得到黑色图像而不是正确的图像吗？图像由 PhotoChooseTask 选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T23:23:37.207

PhotoChooseTask 已经为您提供了 Stream，因此您只需要使用它即可（您还不能使用 BitMap，因为它仍在忙于将其写入设备并生成缩略图等）

```
 PhotoResult photoResult = e as PhotoResult;
        MemoryStream memoryStream = new MemoryStream();
        photoResult.ChosenPhoto.CopyTo(memoryStream);
        byte[] myPicArray = memoryStream.ToArray(); 
```

# knockout.js - 为 Knockout.js 联系人编辑器示例使用映射

> ID：15441807
> 
> 赞同：0
> 
> 时间：2013-03-15T20:46:36.770
> 
> 标签：knockout.js, knockout-mapping-plugin

我在看这个例子： http: [//knockoutjs.com/examples/contactsEditor.html](http://knockoutjs.com/examples/contactsEditor.html)

我需要使用映射插件获得相同的示例

我正在使用类似但更复杂的数组，嵌套 6 层深。我很确定如果我有这个例子，但使用映射插件，我会没事的。

* * *

对于以下内容，我猜它类似于：

```
var initialData = [
    { firstName: "Danny", lastName: "LaRusso", phones: [
        { type: "Mobile", number: "(555) 121-2121" },
        { type: "Home", number: "(555) 123-4567"}]
    },
    { firstName: "Sensei", lastName: "Miyagi", phones: [
        { type: "Mobile", number: "(555) 444-2222" },
        { type: "Home", number: "(555) 999-1212"}]
    }
];

var ContactsModel = function(contacts) {
    var self = this; 
```

// 在这一点上我完全迷失了！？！？//

```
 self.contacts = ko.mapping(contacts, function(contact) {

        return { firstName: contact.firstName, lastName: contact.lastName, phones: ko.observableArray(contact.phones) };
    });

    self.addContact = function() {
        self.contacts.push({
            firstName: "",
            lastName: "",
            phones: ko.observableArray()
        });
    };

    self.removeContact = function(contact) {
        self.contacts.remove(contact);
    };

    self.addPhone = function(contact) {
        contact.phones.push({
            type: "",
            number: ""
        });
    };

    self.removePhone = function(phone) {
        $.each(self.contacts(), function() { this.phones.remove(phone) })
    };

    self.save = function() {
        self.lastSavedJson(JSON.stringify(ko.toJS(self.contacts), null, 2));
    };

    self.lastSavedJson = ko.observable("")
};

ko.applyBindings(new ContactsModel(initialData)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:53:02.720

尝试：

```
self.contacts = ko.mapping.fromJS(contacts); 
```

您需要使用映射插件上的方法，而不仅仅是调用插件本身。

# xml - 基于节点现有分配变量

> ID：15441809
> 
> 赞同：-1
> 
> 时间：2013-03-15T20:46:40.717
> 
> 标签：xml, xslt

目前，我有一个变量来检查 XML 中的节点是否为真/假

```
<xsl:variable name="bVariable" select="nodename[@elementname = 'true']"/> 
```

我将使用一个不同的 XML，它可能有也可能没有那个节点。如果它没有节点，我希望 bVariable 为假。如果是这样，我希望它的运行方式与上面的运行方式相同（并根据 elementname 的值返回 true/false）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:21:10.373

您必须检查节点是否存在。如果它存在，则变量将具有您上面解释的 select 选项 - 否则`select`应该等于`'false'`：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">

<xsl:template match="/">
    <xsl:variable name="bVariable">
        <xsl:choose>
            <xsl:when test="not(nodename)">
                <xsl:value-of select="'false'"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="nodename[@elementname = 'true']"/>            
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>

</xsl:template>

</xsl:stylesheet> 
```

但是请 - 为了真正给您一个答案，请给我们一个带有预期输出的源 XML 示例！

# javascript - 添加切换时平滑的div滚动不起作用

> ID：15441814
> 
> 赞同：0
> 
> 时间：2013-03-15T20:46:55.207
> 
> 标签：javascript, jquery, html, scroll

我有一个包含数据库内容的 div。所有的 div 都使用相同的类，因为它们循环使用不同的内容通过 php 回显到它们中。我想使用 Smooth Div Scroll 并且能够让它工作得很好（参见 Fiddle），但是一旦我添加了下面的脚本，它允许隐藏 div 直到单击另一个 div，它就不起作用。如何使用这两个脚本？

[http://jsfiddle.net/2Hr4U/549/](http://jsfiddle.net/2Hr4U/549/)

```
<script type="text/javascript"> 
    $(document).ready(function(){
        $(".flip").click(function(){
            $(this).siblings(".panel").slideToggle("slow");
        });
    });
</script> 
```

请注意，我没有`display:none;`在小提琴中设置 .panel，所以你们可以看到它最初是如何工作的。最后，很明显，小提琴中的 div 内容并没有与 php 相呼应——我的原版看起来更像这样：`<?php echo $name; ?>`但你明白了大致的想法。

***更新*** 在小提琴中效果很好，而不是在我的测试页面上——这就是冲突所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:12:13.700

我想这就是你的意思：http: [//jsfiddle.net/2Hr4U/561/](http://jsfiddle.net/2Hr4U/561/)

```
$(".flip").click(function(){
    $(this).next(".panel").slideToggle("slow");
}); 
```

您本质上想使用`.next()`而不是`.siblings()`. 另一种方法是为翻转链接和面板使用类名并将它们绑定在一起。这样您就不必担心要单击的链接旁边的面板的位置。

# ios - 在 ios 中缩放和平移 pdf 文件

> ID：15441815
> 
> 赞同：2
> 
> 时间：2013-03-15T20:46:56.387
> 
> 标签：ios, objective-c, cocoa-touch

我想放大一个 pdf 文件，然后用 UIPanGestureRecogniser 移动文件。pdf文件只有一页。

我在网上搜索了最后一个小时，我遇到的所有内容都过于复杂，无法满足我的需求（图书阅读器等）。我是 iOS 编程新手，我不知道如何修改这些项目以适应我的目的。

我的想法是这样的：将 pdf 文件添加到 UIView，然后操作 UIView（并且在视图转换时）pdf 文件重绘。

从哪里开始制作这样的东西？甚至可能吗？

如果不是..我需要使用 WebView 或 UIScrollView 还是其他东西？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:57:22.967

查看 Apple 提供的示例代码[ZoomingPDFViewer](http://developer.apple.com/library/ios/#samplecode/ZoomingPDFViewer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010281-Intro-DontLinkElementID_2)。公平的警告，这是一个复杂的话题，使用 UIWebView 是一种简单的方法，但你会失去对它的外观和渲染方式的很多控制。

# c# - 使用另一个枚举动态构建枚举

> ID：15441821
> 
> 赞同：0
> 
> 时间：2013-03-15T20:47:32.943
> 
> 标签：c#, wcf, constructor, enums

我有一个 wcf 服务，它使用另一个 wcf 服务（在网络上）。这个其他 wcf 服务有一个枚举。

我希望我的客户只依赖于我的 wcf 服务。所以，我希望我的 wcf 服务有一个枚举，其中包含其他 wcf 服务的枚举值。

如何使用其他 wcf 服务的枚举值创建我的枚举？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:53:29.173

枚举是可序列化的，因此只需反序列化 WSDL。

使用`Add Service Reference`并输入 WSDL 的 URL。VS 会为你生成界面。

如果您更改界面，那么您当然会破坏客户端并且它们需要更新。

# python - 代码不断出现错误

> ID：15441824
> 
> 赞同：0
> 
> 时间：2013-03-15T20:47:46.157
> 
> 标签：python

代码不断出现错误。我尝试修复错误，但它们仍然不起作用。我会尝试再次解释这个问题。我有打开文件并阅读它的代码。

数据在一个excel文件中。

```
amount (A1)
5.21 (A2)
4.63 (A3)
5.24 (A4)
3.62 (A5)
1.98 (A6)
16.47 (A7)
1.31 (A8)
1.85 (A9)
4.26 (A10)
0.98 (A11)
1.84 (A12)
0.51 (A13) 
15.58 (A14)
2.64 (A15)
4.32 (A16)
0.59 (A17)
0.21 (A18)
5.41 (A19)
0.08 (A20)
4.34 (A21) 
```

我试着做

```
file=open ('3109336a.csv','r')

count = 0

with open('3109336a.csv', 'r') as f:
  values = f.readlines()

  for value in values:
    if float(value) >= 9.79:
      count += 1

print (count) 
```

我不断收到的错误是：

```
Traceback (most recent call last):
  File "C:\Users\XXXX\Desktop\XXXXX\XXXX\studfiles\XXXXX\testing.py", line 9, in <module>
    if float(value) >= 9.79:
ValueError: could not convert string to float: 'amount, code, quant, val, number, tree\n' 
```

问题是：

计算字段 [amount] 中大于或等于 (9.79) 的值的数量

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T20:51:48.127

如果您有 CSV 文件，请使用正确的工具来阅读它。使用[`csv`模块](http://docs.python.org/3/library/csv.html)：

```
import csv

with open('3109336a.csv', 'r', newline='') as f:
    reader = csv.reader(f)
    next(reader)  # skip the first row, it only contains headers.
    count = 0
    for row in reader:
        # row is now a *list* of columns.
        # I'll assume the *first* column is your value:
        amount = float(row[0])
        if amount >= 9.79:
            count += 1

    print(count) 
```

这可以简化为：

```
with open('3109336a.csv', 'r', newline='') as f:
    reader = csv.reader(f)
    next(reader)  # skip the first row, it only contains headers.
    count = sum(1 for row in reader if float(row[0]) >= 9.79)

print(count) 
```

# c# - Oracle 说 FROM 缺失、拼写错误或放错位置

> ID：15441825
> 
> 赞同：1
> 
> 时间：2013-03-15T20:47:48.563
> 
> 标签：c#, oracle11g, odp.net

我第一次测试我与 Oracle 的连接。连接本身似乎有效。然而...

> 从 my_core.my_table 中选择前 1 个 ID

是我使用的句子

和上

> retVal = cmd1.ExecuteScalar().ToString();

投掷

**ORA-00923: 在预期的地方找不到 FROM 关键字**

```
 in Oracle.DataAccess.Client.OracleException.HandleErrorHelper(Int32 errCode,
OracleConnection conn, IntPtr opsErrCtx, OpoSqlValCtx* pOpoSqlValCtx, Object src
, String procedure, Boolean bCheck)
   in Oracle.DataAccess.Client.OracleException.HandleError(Int32 errCode, Oracle
Connection conn, String procedure, IntPtr opsErrCtx, OpoSqlValCtx* pOpoSqlValCtx
, Object src, Boolean bCheck)
   in Oracle.DataAccess.Client.OracleCommand.ExecuteReader(Boolean requery, Bool
ean fillRequest, CommandBehavior behavior)
   in Oracle.DataAccess.Client.OracleCommand.ExecuteReader()
   in Oracle.DataAccess.Client.OracleCommand.ExecuteScalar()
   in thiscs.Main() en C:\app\testuser\product\11.2.0\my\sample\thiscs.cs:line 44 
```

这是代码：

```
// C#

using System;
using Oracle.DataAccess.Client;
using System.Data;
using System.Data.Common;
using System.Transactions;

class thiscs
{
  static void Main()
  {
    string retVal = string.Empty;
    string providerName = "Oracle.DataAccess.Client";
    #region constr
    string constr =
       @"User Id=mytestuser;Password=mytestpass;Data Source=10.210.10.81:1521/my.svc.net;";

    #endregion

    // Get the provider factory.
    DbProviderFactory factory = DbProviderFactories.GetFactory(providerName);

    try
    {
      // Open a connection to the DB.
      DbConnection conn1 = factory.CreateConnection();
      conn1.ConnectionString = constr;
      conn1.Open();

      // Create a command to execute the sql statement.
      DbCommand cmd1 = factory.CreateCommand();
      cmd1.Connection = conn1;
      cmd1.CommandText = @"SELECT TOP 1 ID FROM my_core.my_table";

      // Execute the SQL statement to Select one rowfield in DB.
      retVal = cmd1.ExecuteScalar().ToString();
      Console.WriteLine("Field to be showed by cmd1: {0}", retVal);

      // close and dispose the connection
      conn1.Close();
      conn1.Dispose();
      cmd1.Dispose();
    }
    catch (Exception ex)
    {
      Console.WriteLine(ex.Message);
      Console.WriteLine(ex.StackTrace);
    }
  }
} 
```

我也试过

> 从 my_core.my_table 中选择前 1 个 [ID]
> 
> 选择'嘿苹果，苹果，嘿'

两者都具有相同的结果：**ORA-00923: FROM 关键字未在预期的地方找到**

有任何想法吗？蒂亚！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T20:50:17.267

**TOP**不是 Oracle 词汇表中的关键字，至少在您想要的上下文中不是。

**TOP**是 Microsoft SQL Server 使用的语法。

要复制此内容，请将您的 SQL 重写为：

```
SELECT ID FROM my_core.my_table WHERE rownum <= 1 
```

换句话说，变换：

```
this: SELECT TOP N .... WHERE ...
                 |
                 +------------------------------+
                                                v
to:   SELECT       .... WHERE ... AND rownum <= N 
```

另见此处：

*   [Oracle/PLSQL：从查询中检索前 N 条记录](http://www.techonthenet.com/oracle/questions/top_records.php)

**另**请注意，如您的示例中所示，查询是相当荒谬的。给定时间，索引使用情况、表组织等将发生变化，这意味着除非您指定排序，否则您将检索的特定 ID 可能/将会发生变化。

# c++ - 在 C++ 中打印一个向量

> ID：15441831
> 
> 赞同：-4
> 
> 时间：2013-03-15T20:48:01.087
> 
> 标签：c++

我是 C++ 新手，我创建了一个读取向量中元素的函数和一个打印元素的函数。问题是打印功能不能正常工作。

```
 #include <iostream>
    using namespace std; 
```

1)

```
int read()
{
    int elements,i;
    cout<<"Give the number of elements:";
    cin>>elements;
    int v[elements];
    for(i=1;i<=elements;i++)
    {
        cout<<"v["<<i<<"]=";
        cin>>v[i];
    }
    return elements;
} 
```

2)

```
void print_vector(int elements)
{
    int i;
    int v[elements];
    for(i=1;i<=elements;i++)
    {
        cout<<v[i];
    }
}

int main()
{
    int n=read();
    print_vector(n);
    return 0;
}

Example:
Give the number of elements:5
v[1]=1
v[2]=2
v[3]=3
v[4]=4
v[5]=5
1348 
```

它打印 1348 而不是 12345。该功能有什么问题，如何修改它以打印正确的元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:51:40.687

```
int v[elements]; 
```

这将创建一个新的整数数组。

传递数组相对困难，因为您必须小心如何处理内存分配，并且它们可以追溯到过去的`C`.

在您学习`C++`的过程中，您可以使用 a`class`来管理内存问题。[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)在语法上类似于数组，但会为您处理分配和调整大小，并记住它的大小。

您可以通过引用将对象传递给函数`&`，并且在函数内部可以修改传入的对象，并在函数完成后具有持久效果。

```
void read(vector<int>& elements) {
    // in here you can resize the vector
}

void print(const vector<int>& elements) {
    // passing in elements by const reference means you can't modify it
} 
```

总而言之：

```
int main() {
    vector<int> elements;
    read(elements);
    print(elements);
} 
```

或者，如果你想成为面向对象的，你应该寻找将数据和函数组合在一起的方法，这样你就可以完全避免传递数据。在这种情况下，您可以对向量以及读取和打印功能进行分组。也许叫它`UserIntegers`：

```
class UserIntegers {
public:
    void process() {
        read();
        print();
    }
private:
    vector<int> numbers;
}; 
```

用法：

```
int main() {
    UserIntegers userIntegers;
    userIntegers.process();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T21:15:30.693

在`read()`中，您将元素读入本地数组`v`。当函数结束时，数组也会消失。同样的情况发生在`print_vector()`.

另一个错误是数组的索引。您访问元素 from`1`到`elements`inclusive，它忽略第一个元素`0`并最终访问超出数组边界的一个元素 ( `elements`)。

您需要在`std::vector`两个函数之外分配一个数组，更好的是 a ，并将其传递`read()`给填充和`print_vector()`打印。

```
#include <iostream>
#include <vector>

void read(std::vector<int> &v)
{
    int elements,i, n;
    std::cout<<"Give the number of elements:";
    std::cin>>elements;
    for(i = 0; i < elements; i++)
    {
        std::cout<<"v["<<i<<"]=";
        std::cin>> n;
        v.push_back(n);
    }
}

void print_vector(const std::vector<int> &v)
{
    for(auto i = v.begin(); i != v.end(); ++i)
    {
        std::cout << *i;
    }
}

int main()
{
    std::vector<int> v;
    read(v);
    print_vector(v);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T20:49:27.563

您的打印功能有错误

```
for(i=1;i<=elements;i++)
{                   //^^^^^
    cout<<v[i];
    ++i;  //You would like to skip some elements?
} 
```

您将索引 i 增加两次，数组索引从 0 开始，而不是 1；它以数字（elements-1）而不是元素结尾，同时，您使用的是数组，而不是向量。

# android - Trigger.io 原生插件和源代码控制

> ID：15441836
> 
> 赞同：3
> 
> 时间：2013-03-15T20:48:13.720
> 
> 标签：android, iphone, trigger.io

所以，我正在使用 Trigger.io 为 iOS 和 Android 创建一些原生插件。

Toolkit 将自动为您创建检查器项目。

我的问题是 - 这些项目是否可能在 trigger.io 的主要（/次要）更新之间发生变化？是否有某些文件我们应该尽量*不要*放入源代码控制中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:23:09.460

我们有时会在次要平台版本版本中更新检查器项目 - 大多数情况下，这些更改不会影响您的开发：错误修复、对不相关模块的改进等等。对于这些情况，只需更改`platform_version`并`manifest.json`更新检查器项目即可获取新代码。

但是，在某些情况下，我们还会更改可运行检查器应用程序使用的 HTML/CSS/JS（例如，支持[处理文件](http://docs.trigger.io/en/v1.4/modules/native/file_objects.html)）。在这些情况下，您需要在更新之前从文件系统中删除现有的检查器项目，以便您从新的检查器应用程序中获得一个全新的开始。

**但是请注意**，这将删除您对检查器应用程序所做的任何手动更改`assets/src`- 您需要在更新后重新进行这些更改。

我们计划的检查器项目的主要更新将修复这个稍微尴尬的工作流程 - 即使是影响检查器应用程序的平台版本也可以通过更改清单来无缝更新：该更改可能需要 1 到 2 个月的时间。

目前，我的建议是将所有插件文件放入版本控制中（例如[https://github.com/trigger-corp/plugin-multi-image-select](https://github.com/trigger-corp/plugin-multi-image-select)）。

# runtime - 如何使用 C++ Builder 在运行时以编程方式构造组件？

> ID：15441837
> 
> 赞同：5
> 
> 时间：2013-03-15T20:48:21.580
> 
> 标签：runtime, components, c++builder

非常基本的 C++ Builder 问题。我想在运行时创建一个 TButton 。我原以为下面的代码可以做到这一点，但我在表单上看不到任何按钮：

```
__fastcall TForm2::TForm2(TComponent* Owner): TForm(Owner)  
{  
    TButton* b = new TButton(this);  
    b->Height = 100;  
    b->Width = 100;  
    b->Left = 0;   
    b->Top = 0;   
    b->Caption = "Testing";  
    b->Visible = true;  
    b->Enabled = true;  
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T23:33:31.383

您需要设置按钮的 `Parent`（它显示的表面）：

```
b->Parent = this; 
```

# windows - 当我们更改文件的扩展名时究竟会发生什么？

> ID：15441839
> 
> 赞同：1
> 
> 时间：2013-03-15T20:48:28.900
> 
> 标签：windows, file

我`.mp3`在记事本中打开了一个文件并将其保存到`.txt`，然后我`.mp3`再次通过在记事本中再次打开它来保存它，但是当我尝试运行它时，播放器无法识别该格式。我不明白更改扩展名时发生了什么，因为我没有更改文件中的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:54:00.177

在 Windows 上更改文件扩展名的操作应该对文件本身没有影响。但是，如果您在文件是 a 时打开了文件`.txt`（所以它在 中打开`Notepad`），然后保存 - 您可能已经损坏了文件。

# ios - 从处于横向模式的视图控制器返回时视图被切断

> ID：15441845
> 
> 赞同：0
> 
> 时间：2013-03-15T20:49:10.600
> 
> 标签：ios, orientation

好的，这是我的场景：

我的应用程序有一个嵌入了导航控制器的选项卡栏控制器，第一个视图控制器将处理两个方向，但其他视图控制器不会。所以我对标签栏和导航栏进行子类化以监听方向变化，所以每当有方向变化时，标签栏控制器都会询问其导航控制器是否应该旋转等，导航控制器会询问当前视图控制器是否正确管理方向变化方向。一切正常，我现在遇到的问题是，每当我的新闻视图控制器（处理图片中显示的两个方向的那个）处于横向时，如果我点击价格选项卡，它会将我带到价格视图控制器视图被切断。请注意，方向很好，

![新闻视图控制器（处理两个方向）](../Images/8062da1a6380229f44b68a771d4dff5d.png)
![价格视图控制器仅在纵向。 当新闻是肖像时，一切看起来都很酷](../Images/452d20b44b5db42a18d67315aabf63e4.png) ![风景中的新闻一切都很好](../Images/5376fbfe3c247f45ea3bcc965619c5d5.png) ![为什么会这样？ 我nslog视图框架，它的高度是387，我不明白](../Images/ac956eb0593932b4bbbf8f25eb61a244.png)

任何帮助我都会非常感激。我已经处理了 3 天了 帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:55:31.590

尝试将视图的 autoresizingmask 设置为 widthSizeable=YES heightSizeable=YES flexibleMaxX=YES 和 flexibleMaxY=YES

# c# - 使用 azure brokeredmessage 在不知道类型的情况下获取正文

> ID：15441853
> 
> 赞同：35
> 
> 时间：2013-03-15T20:49:34.227
> 
> 标签：c#, azure, azureservicebus

在 Azure 服务总线中使用代理消息时，可以通过调用 .GetBody 检索消息正文。代码很简单：

```
var msg = subscription.Receive();
MyPayload payload = msg.GetBody<MyPayload>(); 
```

但是，有没有办法在不明确知道 body 对象的类的情况下检索 Body？

```
var msg = subscription.Receive();
Type bodyType = Type.GetType( msg.ContentType);

var payload = msg.GetBody<bodyType>(); 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-15T21:05:21.517

如果意图是只获取消息正文而不考虑内容，则可以将其作为流获取。

```
Stream stream = message.GetBody<Stream>();
StreamReader reader = new StreamReader(stream);
string s = reader.ReadToEnd(); 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-03-27T16:44:59.780

以下是从 brokeredmessage 反序列化的完整代码：

```
public T GetBody<T>(BrokeredMessage brokeredMessage)
{
  var ct = brokeredMessage.ContentType;
  Type bodyType = Type.GetType(ct, true);

  var stream = brokeredMessage.GetBody<Stream>();
  DataContractSerializer serializer = new DataContractSerializer(bodyType);
  XmlDictionaryReader reader = XmlDictionaryReader.CreateBinaryReader(stream, XmlDictionaryReaderQuotas.Max);
  object deserializedBody = serializer.ReadObject(reader);
  T msgBase = (T)deserializedBody;
  return msgBase;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-11T18:58:53.117

在 ContentType 之前的示例中用于检测正文类型。我相信 ContentType 应该由发件人设置。我做了类似的逻辑，我将消息属性之一设置为发送方的对象类型，并在接收方上调用 GetBody<>()，类型从消息属性中检索。像这样：

```
public void SendData(object payloadData)
    {
        if (payloadData == null) return;

        var queueClient = QueueClient.CreateFromConnectionString(ConnectionString, _queueName);

        var brokeredMessage = new BrokeredMessage(payloadData);
        brokeredMessage.Properties["messageType"] = payloadData.GetType().AssemblyQualifiedName;
        queueClient.Send(brokeredMessage);
    } 
```

消息属性“messageType”具有类型的全名。

在接收方，我这样做：

```
 var messageBodyType = Type.GetType(receivedMessage.Properties["messageType"].ToString());
                if (messageBodyType == null)
                {
                    //Should never get here as a messagebodytype should
                    //always be set BEFORE putting the message on the queue
                    Trace.TraceError("Message does not have a messagebodytype" +
                                     " specified, message {0}", receivedMessage.MessageId);
                    receivedMessage.DeadLetter();
                }

                //read body only if event handler hooked
                    var method = typeof(BrokeredMessage).GetMethod("GetBody", new Type[] { });
                    var generic = method.MakeGenericMethod(messageBodyType);
                    try
                    {
                        var messageBody = generic.Invoke(receivedMessage, null);
                         DoSomethingWithYourData();
                        receivedMessage.Complete();
                    }
                    catch (Exception e)
                    {
                        Debug.Write("Can not handle message. Abandoning.");
                        receivedMessage.Abandon();
                    }
                } 
```

# libuv - 正确启动并运行 libuv，以便可以使用它编译程序

> ID：15441855
> 
> 赞同：1
> 
> 时间：2013-03-15T20:49:48.430
> 
> 标签：libuv

我正在尝试在一个项目中使用我们的 libuv。我的第一步只是在计算机上安装 libuv 并准备好使用。我使用的是 Mac OS X 版本 10.6.8。我下载了 zip 文件并将其解压缩。他们网站上的说明只是说使用 make 命令来构建库。当我这样做时，它会创建 libuv.a 文件。我在代码文件中有#include。事实上，此时我只是试图编译和运行他们介绍文件中提供的示例程序。[http://nikhilm.github.com/uvbook/basics.html](http://nikhilm.github.com/uvbook/basics.html)。在朋友的帮助下，我终于发现如果我运行 make run-test 它将创建 libuv.dylib，然后只要我设置 LD_LIBRARY_PATH=../deps/libuv-master ./testEventLoop，程序就会编译并运行。

我已经制作了 3.81 版。我的项目位于一个名为 echo 的文件夹中，该文件夹有两个目录 deps 和 src。提取的 libuv 文件，包括它们的所有子文件都在 deps 中。test.c 文件和我的 make 文件位于 src 文件夹中。

这是我第一次使用第三方库，似乎我在碰壁。我已经查看了我在网上可以找到的关于使用第三方库和特别是 libuv 的所有内容。包括但不限于通过 GNU make 说明[http://www.gnu.org/software/make/manual/make.html#Overview](http://www.gnu.org/software/make/manual/make.html#Overview)来尝试理解 libuv 的 makefile 以及来自其他几个项目的 make 文件使用 libuv 的网站。

这些项目是如此之大，以至于我很难挖掘出这件小事。必须有其他人需要第三方图书馆的帮助。我觉得我已经很接近了，但只是没有得到什么，就像我错过了一些让它以应有的方式工作的小块。

如果我遗漏了我应该包含的任何信息，请告诉我，我将编辑问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:55:16.530

我能够通过更改 make 文件来安装库。我需要同时安装 libuv.a 和 libuv.dylib 文件（尽管我仍然不确定为什么）并且我必须在同一规则中有两个目标的 makefile 中拆分目标。因为他们会为 libuv.a 或 libuv.dylib 创建先决条件，但不能同时为两者。通过将规则分成两个规则，一个是我需要的每个文件的先决条件，然后添加一个 all 目标，它同时具有 libuv.a 和 libuv.dylib 作为先决条件。

# jquery - 在 Rails 响应中返回 JS 并让它在没有 .js.erb 文件的情况下执行

> ID：15441858
> 
> 赞同：0
> 
> 时间：2013-03-15T20:49:54.523
> 
> 标签：jquery, ruby-on-rails-3.2

我目前在我的控制器中使用它

```
respond_to do |format|
  format.html { render :js => alert('example') }
end 
```

这在我的 application.js 中

```
$(document).ajaxSuccess( function(event, xhr, settings) {
  if ( settings.url == '/example' ) {
    eval(xhr.responseText)
  } else if ( settings.url.match(/[\/example\/\d]+$/)) {
    eval(xhr.responseText)
    loadComplete()
  } else {
    (etc)
  }
}) 
```

在 ajax 响应中返回 JS 并让浏览器执行它。我这样做是为了避免编写一个新的 .js.erb 文件来适应每个可能的响应。

有没有更好的方法来做到这一点？我认为减少文件数量会很好，但是必须在 ajaxSuccess settings.url 上使用正则表达式来分离 JS 响应是非常恶心的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T22:42:57.150

更好的方法是遵循约定，只制作 js.erb 文件。它们会以假定的动作自动执行。例如，在 create.js.erb 中创建部分的响应：

```
$('#placeholder-<%= @subsection[:sortlabel] %>').replaceWith("<%= escape_javascript render :partial => 'section_item', :locals => {:section=>@subsection} %>") 
```

而destroy.js.erb的内容：

```
$('li#menu-item-<%= @section.id %>').remove(); 
```

将这些隐藏在控制器响应中可能有助于避免创建（又一个）文件，但应用程序的可维护性会受到影响。

# javascript - 如何用 JavaScript 字符串中的索引替换字符？

> ID：15441861
> 
> 赞同：0
> 
> 时间：2013-03-15T20:50:00.953
> 
> 标签：javascript, html, string, replace, substring

如果我有字符串“hello”并且我想用 _ 替换第二个和第三个字符，我该怎么做，只给出子字符串的位置，而不是它的实际位置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T20:52:15.627

```
str = str.replace( /^(.)../, '$1__' ); 
```

`.`匹配除换行符以外的任何字符。

`^`代表字符串的开始。

`()`捕获与第一个匹配的字符，因此`.`可以在替换字符串中引用它`$1`。

匹配正则表达式的任何内容都将被替换字符串替换`'$1__'`，因此字符串开头的前三个字符将匹配并替换为第一个`.`加号匹配的内容`__`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T20:55:05.443

```
String.prototype.replaceAt=function(index, character) {
      return this.substr(0, index) + character + this.substr(index+character.length);
   }

str.replaceAt(1,"_");
str.replaceAt(2,"_"); 
```

摘自：[如何替换 JavaScript 中特定索引处的字符？](https://stackoverflow.com/questions/1431094/how-do-i-replace-a-character-at-a-particular-index-in-javascript)

# c# - 创建通用类型项目列表

> ID：15441862
> 
> 赞同：0
> 
> 时间：2013-03-15T20:50:01.360
> 
> 标签：c#

给定以下代码，是否可以拥有一组通用类型的项目：

```
public abstract class AGeneric<T> {
internal virtual List<T>  MyList { get; set; } 
}

public class LibA<T> : AGeneric<T> {
internal override List<T>  MyList { get; set; } 
}

public class LibB<T> : AGeneric<T> {
internal override List<T>  MyList { get; set; } 
}

public class LibC<T> : AGeneric<T> {
internal override List<T>  MyList { get; set; } 
}
//.
//.
//.
Main {
    List<AGeneric>  test  = new List<AGeneric>(); //error - requires type; 
    List<BGeneric>  test2 = new List<BGeneric>();
    test2.first().

}

public abstract class BGeneric {
internal virtual List<T>  MyList { get; set; } //cant use T to provide implementation       
}

public class LibD<T> : BGeneric {
internal override List<T>  MyList { get; set; } 
}

public class LibE<T> : BGeneric {
internal override List<T>  MyList { get; set; } 
}

public class LibF<T> :BGeneric {
internal override List<T>  MyList { get; set; } 
} 
```

目标是从抽象类中实现各种类型的 List，因为这些类的目的是确定并返回强类型对象数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:17:19.880

不，但是您可以列出具有运行时类型的非泛型。这个例子基本上就是你所追求的，但是**它会产生一个运行时错误（仅例子 1）**，因为 AGeneric 需要一个通用参数。如果你可以重组你必须不是通用的东西，那么你可以调整这项工作：

```
Type listType = typeof(List<>).MakeGenericType(typeof(AGeneric<>));
var answer = Activator.CreateInstance(listType); 
```

以同样的方式，如果您必须拥有 AGeneric，您可以使用它的运行时类型创建列表

```
int myRunTimeVariable = 0;
Type MyType = myRunTimeVariable.GetType();

Type listType = typeof(List<>).MakeGenericType(typeof(AGeneric<>).MakeGenericType(MyType));
var answer = Activator.CreateInstance(listType); 
```

`answer``List<AGeneric<int>>`在这种情况下将是类型。但它仍然不是一个`List<AGeneric<>>`

# php - 如何使用 Doctrine 2 在 ORDER BY 字段中不支持 ABS() SQL 的事实构建解决方法？

> ID：15441864
> 
> 赞同：0
> 
> 时间：2013-03-15T20:50:08.550
> 
> 标签：php, sql, symfony, doctrine

我正在尝试执行此查询：

```
public function getLakesNearby($minLat, $maxLat, $minLng, $maxLng, $lat, $lng, $limit)
{

    $query = $this->_em->createQuery('  SELECT a 
                                        FROM MycBundle:Lake a
                                        WHERE a.latitude > :minLat AND a.latitude < :maxLat AND a.longitude > :minLng AND a.longitude < :maxLng
                                        ORDER BY ABS(a.latitude - :lat) + ABS(a.longitude - :lng) ASC
                                        LIMIT :limit ');

    $query->setParameters(array('minLat' => $minLat, 'maxLat' => $maxLat, 'minLng' => $minLng, 'maxLng' => $maxLng, 'Lat' => $lat, 'Lng' => $lng, 'limit' => $limit));
    return $query->getResult();
} 
```

这会产生错误

> [语法错误] 第 0 行，第 234 列：错误：预期的字符串结尾，得到 '('

我看到[Doctrine 在 orderby 中不支持 ABS()](https://stackoverflow.com/questions/7532886/doctrine-2-query-builder-abs-function)。

请帮助我找到一个解决方案来完成这项工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:59:01.057

这应该是您正在寻找的 QueryBuilder 格式。这不在我的脑海中，而不是在我可以测试它的地方，所以你可能想以此作为开始。

```
$qb = $this->getEntityManager()->createQueryBuilder();

$qb->select('a');
$qb->from('MycBundle:Lake', 'a');

$qb->where('a.latitude > :minLat');
$qb->andWhere('a.latitude < :maxLat');
$qb->andWhere('a.longitude > :minLng');
$qb->andWhere('a.longitude < :maxLng');

$qb->add('orderBy', $qb->expr()->sum($qb->expr()->abs('a.latitude - :lat'), $qb->expr()->abs('a.longitude - :lng'));

$qb->setParameters(array(
     'minLat' => $minLat,
     'maxLat' => $maxLat,
     'minLng' => $minLng,
     'maxLng' => $maxLng,
     'lat'    => $lat,
     'lng'    => $lng)
);

$qb->setMaxResults($limit);

return $qb->getQuery()->getResult(); 
```

# algorithm - 概率空间和预期运行时间：它们是什么？

> ID：15441865
> 
> 赞同：3
> 
> 时间：2013-03-15T20:50:09.470
> 
> 标签：algorithm, big-o

我遇到了一个问题，我要计算或说明算法的预期运行时间，并说明这种运行时间的概率空间。我会坦率地说我真的不知道我应该做什么。预期运行时间和平均运行时间有什么区别，什么是概率空间，为什么需要它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T22:51:55.427

他们要求您将算法的运行时间建模为在由该算法的输入集组成的样本空间上定义的**随机**变量，并计算该**随机**变量**相**对于在样本空间上定义的某个**概率的****期望**，作为其值相对于该概率的**平均值。**

 ******这是一个例子。考虑快速排序。快速排序是一种排序算法，因此将其输入集建模为大小为 N 的排列集是有意义的。因此，样本空间是大小为 N 的排列集。赋予该样本空间以均匀概率，并且然后将运行时间 T_N 定义为随机变量，它将样本空间的元素 s 映射到输入 s 上算法的相应运行时间。然后，T_N 的期望值是其值在样本空间元素上的平均值，即在大小为 N 的排列集上。您可能知道，E[T_N] 为 O(N*log(N)) （E[X] 是随机变量 X 的期望值）。

上一段中唯一需要注意的是，您必须在数学上定义“运行时间”的含义。在实践中，您必须采取算法进行的一些基本操作，例如排序算法中的交换次数或比较次数，并将它们作为**精确定义的**随机变量来研究。之后，如果您想要为您的计算环境建立一个预测模型，您需要测量您的系统执行每个此类基本操作所花费的时间，并将预期运行时间计算为平均基本操作次数乘以该操作在系统中的执行时间，对于您包含在模型中的每个操作（下面是一个示例）。

以Quicksort为例，对比较次数C_N进行了详细研究，其期望E[C_N]约为2*N*ln(N)-0.846*N。交换次数 S_N 也是如此，其期望值约为 0.333*N*ln(N)-1.346*N。这些结果在本文末尾引用的书的第 1 章中得到了证明。

如果您将系统中比较的运行时间测量为 T_c，将交换的运行时间测量为 T_s，那么您对运行时间的预测将为 E[T_N] = T_c * E[C_N] + T_s * E[S_N] . 然后，您可以替换 E[C_N] 和 E[S_N] 的先前表达式，以获得精确的预测公式。

也许您可以从复习离散概率论的基础知识和/或查看算法分析教科书（如 Sedgewick 和 Flajolet “算法分析简介”）中受益。******

# c# - 团结+拦截+假货=大火球

> ID：15441867
> 
> 赞同：0
> 
> 时间：2013-03-15T20:50:10.830
> 
> 标签：c#, unity-container, microsoft-fakes, unity-interception, policy-injection

我无法让 Unity 与新的 Fakes 框架（以前的 pex 和 moles）配合得很好

当我尝试创建统一拦截库的伪造品时，它导致我的单元测试在调试时运行良好，但会中断

> InvalidProgramException - 公共语言运行时检测到无效程序。

问题是为什么？为什么调试与发布的行为不同？单元测试在调试时通过，但在我选择运行它时会因上述异常而中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:21:13.187

如果你在伪造 Unity，那你就做错了！您需要伪造 Unity 的事实意味着您正在滥用 Unity 作为[服务定位器（反模式）](http://blog.ploeh.dk/2010/02/03/ServiceLocatorisanAnti-Pattern/)。相反，您不应在应用程序中调用 Unity，而只能在您的[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot/)中使用它。这可以防止您完全伪造 Unity。

永远记住编程的直觉规则：如果感觉很尴尬，那就是你做错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T22:21:03.030

如果我不得不猜测（从不亲自将拦截与假货结合起来），我会说你有两个框架都在 IL 级别摆弄东西，而且这不能很好地结束。

假货的工作原理是（从这里的阴暗记忆中）创建您正在伪造的组件的重复“垫片填充”变体，并且统一拦截在拦截点上进行 IL 编织 - 将这两者混合在一起，我并不感到惊讶它创建了无效的 IL 序列。

修复它？Oof...不要在您正在执行拦截的任何程序集上使用Fakes？在这些情况下依赖更传统的模拟框架。

# string - R中的子集HTML字符串以删除日期

> ID：15441873
> 
> 赞同：0
> 
> 时间：2013-03-15T20:50:36.827
> 
> 标签：string, r, date, subset

我正在尝试从我从网上抓取的 .txt 文件中的字符行中提取日期；日期总是在同一行，后面跟着相同的 HTML，但是日期本身会随着每个文本而变化。下面演示了来自两个 .txt 文件的代码的两个示例。

```
"17"        <div align=\\center\\><br /><font face=\\Times New Roman\\ size=\\3\\><b>Tuesday, 3 February 2009</b></font>
"17"    "<div align=\"center\"><br /><font face=\"Times New Roman\" size=\"3\"><b>Tuesday, 10 February 2009</b></font>" 
```

xpathSApply() 不起作用，因为我将它们作为 .txt 文件作为字符读取到 R 中；关于如何最好地提取它的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:39:21.030

这有点傻，但如果标签`<b>`只`</b>`在您的数据中出现一次，则可以使用。

如果不是这种情况，您可以尝试更改以下下标：

```
x <- "<div align=\\center\\><br /><font face=\\Times New Roman\\ size=\\3\\><b>Tuesday, 3 February 2009</b></font>"

strsplit(strsplit(x, "<b>")[[1]][2], "</b>")[[1]][1] 
```

一个向量化的形式如下：

```
sapply(strsplit(sapply(strsplit(x, "<b>"), function(y) y[2]), "</b>"), function(y) y[1]) 
```

如果 x 是字符类型的向量。

# c - 如何在 C 中链接目标文件？因“架构 x86_64 的未定义符号”而失败

> ID：15441877
> 
> 赞同：61
> 
> 时间：2013-03-15T20:51:19.593
> 
> 标签：c, gcc, compilation

所以我试图在我的文件（file2.c）中使用另一个C（file1.c）文件中定义的函数。为了做到这一点，我包含了 file1 (file1.h) 的标题。

但是，每当我尝试使用 gcc 编译我的文件时，我都会收到以下错误：

```
Undefined symbols for architecture x86_64:
  "_init_filenames", referenced from:
      _run_worker in cc8hoqCM.o
  "_read_list", referenced from:
      _run_worker in cc8hoqCM.o
ld: symbol(s) not found for architecture x86_64 
```

有人告诉我，我需要“将目标文件链接在一起”才能在 file2 中使用 file1 中的函数，但我不知道这意味着什么:(

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-03-15T20:53:30.270

我假设您正在使用`gcc`, 来简单地链接目标文件：

```
$ gcc -o output file1.o file2.o 
```

要获取目标文件，只需使用编译

```
$ gcc -c file1.c 
```

这会产生 file1.o 等等。

如果要将文件链接到可执行文件，请执行

```
$ gcc -o output file1.c file2.c 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-16T04:04:36.680

现有的答案已经涵盖了“如何”，但我只是想为可能想知道的其他人详细说明“什么”和“为什么”。

编译器 (gcc) 的作用：术语“编译”是一个有点重载的术语，因为它在高层次上用于表示“将源代码转换为程序”，但更技术上的意思是“将源代码转换为目标代码”。像 gcc 这样的编译器实际上执行了两个相关但可以说是不同的功能来将您的源代码转换为程序：编译（如后一个将源代码转换为目标代码的定义）和链接（将必要的目标代码文件组合在一起的过程）一个完整的可执行文件）。

您看到的原始错误在技术上是“链接错误”，由链接器“ld”抛出。与（严格的）编译时错误不同，没有对源代码行的引用，因为链接器已经在对象空间中。

默认情况下，当 gcc 被提供源代码作为输入时，它会尝试编译每个源代码，然后将它们链接在一起。正如其他响应中所指出的，可以使用标志来指示 gcc 先编译，然后使用目标文件在单独的步骤中链接。这个两步过程似乎没有必要（并且可能适用于非常小的程序），但在管理非常大的程序时非常重要，因为每次进行小的更改都编译整个项目会浪费大量时间。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-15T20:53:23.720

您可以在一个命令中编译和链接：

```
gcc file1.c file2.c -o myprogram 
```

并运行：

```
./myprogram 
```

但是要回答所问的问题，只需将目标文件传递给`gcc`：

```
gcc file1.o file2.o -o myprogram 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-02-15T16:04:34.417

将 foo1.c 、 foo2.c 、 foo3.c 和 makefile 添加到一个文件夹中，在 bash 中键入 make

如果不想使用makefile，可以运行命令

```
gcc -c foo1.c foo2.c foo3.c 
```

然后

```
gcc -o output foo1.o foo2.o foo3.o 
```

foo1.c

```
#include <stdio.h>
#include <string.h>

void funk1();

void funk1() {
    printf ("\nfunk1\n");
}

int main(void) {

    char *arg2;
    size_t nbytes = 100;

    while ( 1 ) {

        printf ("\nargv2 = %s\n" , arg2);
        printf ("\n:> ");
        getline (&arg2 , &nbytes , stdin);
        if( strcmp (arg2 , "1\n") == 0 ) {
            funk1 ();
        } else if( strcmp (arg2 , "2\n") == 0 ) {
            funk2 ();
        } else if( strcmp (arg2 , "3\n") == 0 ) {
            funk3 ();
        } else if( strcmp (arg2 , "4\n") == 0 ) {
            funk4 ();
        } else {
            funk5 ();
        }
    }
} 
```

foo2.c

```
#include <stdio.h>
void funk2(){
    printf("\nfunk2\n");
}
void funk3(){
    printf("\nfunk3\n");
} 
```

foo3.c

```
#include <stdio.h>

void funk4(){
    printf("\nfunk4\n");
}
void funk5(){
    printf("\nfunk5\n");
} 
```

生成文件

```
outputTest: foo1.o foo2.o foo3.o
    gcc -o output foo1.o foo2.o foo3.o
    make removeO

outputTest.o: foo1.c foo2.c foo3.c
    gcc -c foo1.c foo2.c foo3.c

clean:
    rm -f *.o output

removeO:
    rm -f *.o 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-08-26T09:44:41.643

由于没有提及如何将 .c 文件与一堆 .o 文件一起编译，因此该评论要求这样做：

> 这个答案中的 main.c 在哪里？:/ 如果 file1.c 是主要文件，你如何将它与其他已编译的 .o 文件链接？– 汤姆布里托 2014 年 10 月 12 日 19:45

$ gcc main.c lib_obj1.o lib_obj2.o lib_objN.o -o x0rbin

这里，main.c 是带有 main() 函数的 C 文件，目标文件 (*.o) 是预编译的。GCC 知道如何一起处理这些，并相应地调用链接器并生成最终的可执行文件，在我们的例子中是 x0rbin。

您将能够使用未在 main.c 中定义的函数，而是使用对目标文件 (*.o) 中定义的函数的外部引用。

如果目标文件具有正确的格式（例如 COFF），您还可以使用 .obj 或其他扩展名进行链接。

# android - WebKit 浏览器的 CSS 条件

> ID：15441878
> 
> 赞同：1
> 
> 时间：2013-03-15T20:51:22.627
> 
> 标签：android, css, google-chrome

我想为 div 应用 CSS 样式，但我不知道如何识别 Chrome for Desktop 和 Android Navigator

```
.myDIV{
[if CHROME???] width: 280px; 
[if ANDROID???] width: 100%; 
} 
```

有没有办法从 CSS 中检测 chrome 或 android navigator？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:54:59.490

我可能是错的，但我认为唯一的方法是嗅探浏览器代理，然后向正文添加一个类。

[http://www.quirksmode.org/js/detect.html](http://www.quirksmode.org/js/detect.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:24:44.517

不要检查 Android（你不能在 CSS 中） - 使用[Media Queries](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)检查屏幕大小。这比检查特定命名的浏览器要好得多，并且在用于使设计在各种尺寸下工作时被称为响应式设计。

```
.myDiv { width: 280px; }

@media screen and (max-width: 699px) {
  .myDiv { width: 100%; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-20T07:03:10.263

虽然没有针对旧 Android 的 CSS 特定 hack，但我找到了一种排除 iPad/iPhone（任何 iOS 设备）的方法。这不适用于较旧的非“超高清”设备，但现在几乎适用于任何现代设备。

你如何使用它：

```
/* Modern Androids (For Android 4.0+, Chrome 15+, Safari 5.1+, and Opera 14+) */

_:-webkit-full-screen, :root .selector { color:blue; } 
```

在我的实时 CSS hacks 测试页面上对其进行测试：

[http://browserstrangeness.bitbucket.io/css_hacks.html#webkit](http://browserstrangeness.bitbucket.io/css_hacks.html#webkit)或 [http://browserstrangeness.github.io/css_hacks.html#webkit](http://browserstrangeness.github.io/css_hacks.html#webkit)

这样做的原因是 iOS 不支持 :-webkit-full-screen CSS 伪类，否则它会包含在 webkit 发行版中。

在本文发布时，Safari 的版本为 8，Chrome 的开发/金丝雀版本最高为 41。

享受！

# ruby-on-rails - 索引名称太长无法回滚迁移

> ID：15441880
> 
> 赞同：2
> 
> 时间：2013-03-15T20:51:32.517
> 
> 标签：ruby-on-rails

我在一个 git 分支上并试图在销毁分支之前回滚两个迁移。最近的迁移将一列添加到我想要保留的表中（并且它是 master 的一部分，而不是要删除的分支），因此删除整个表不是解决方案（除非我必须再次重新创建它）。无论如何，我一定做错了什么，因为当我试图从分数表中删除 apple_id 列时，我得到了这个中止错误。

这是我试图回滚的迁移

```
add_column :scores, :apple_id, :integer 
```

但是，错误消息（见下文）指的是我使用创建表的原始迁移（主分支的一部分）创建的索引

```
add_index :scores, [:user_id, :created_at, :funded, :started] 
```

你能建议我做什么吗？

```
==  AddAppleidColumnToScores: reverting =======================================
-- remove_column("scores", :apple_id)
rake aborted!
An error has occurred, this and all later migrations canceled:

Index name 'temp_index_altered_scores_on_user_id_and_created_at_and_funded_and_started' on table 'altered_scores' is too long; the limit is 64 characters 
```

更新：阅读这个 SO 问题[How do I handle too long index names in a Ruby on Rails migration with MySQL？](https://stackoverflow.com/questions/5443740/how-to-handle-too-long-index-names-in-a-rails-migration-with-mysql)，我获得了有关问题根源的更多信息，但不知道如何解决。sql 和 postgres 都有 64 个字符的限制

```
Index name 'index_studies_on_user_id_and_university_id_and_subject_\
           name_id_and_subject_type_id' on table 'studies' is too long; \
           the limit is 64 characters 
```

我提到的问题的公认答案是给索引一个名称，尽管我不确定现在我想回滚如何做到这一点。

```
add_index :studies, ["user_id", "university_id", \
          "subject_name_id", "subject_type_id"], 
          :unique => true, :name => 'my_index' 
```

更新：针对评论，我使用的是 Rails 3.2.12。这是添加列的迁移

```
class AddAppleidColumnToScores < ActiveRecord::Migration
  def change
    add_column :scores, :apple_id, :integer
  end
end 
```

此外，我不想删除表的原因是我不确定在重新创建它时可能会导致什么问题，因为 a) 主要部分是在分支 master 上创建的，而在分支上添加了一列 b)我不确定如何处理已删除表的迁移文件？因为它是我创建的第四个（大约 10 个）表，所以我不知道如何运行它，只能再次运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:51:18.717

您可以复制/粘贴您的迁移吗？

这是我的：

```
class AddAppleIdColumnToScores < ActiveRecord::Migration

  def self.up
    add_column :scores, :apple_id, :integer
    add_index :scores, [:user_id, :created_at, :funded, :started]
  end

  def self.down

    # delete index MySql way
    # execute "DROP INDEX index_scores_on_user_id_and_created_at_and_funded_and_started ON scores"

    # delete index Postgresql way
    # execute "DROP INDEX index_scores_on_user_id_and_created_at_and_funded_and_started"

    # delete index Rails way / not necessary if you remove the column
    # remove_index :scores, [:user_id, :created_at, :funded, :started]

    remove_column :scores, :apple_id
  end
end 
```

# c++ - Pimpl + QSharedPointer - 析构函数 = 灾难

> ID：15441892
> 
> 赞同：8
> 
> 时间：2013-03-15T20:52:09.273
> 
> 标签：c++, qt, destructor, pimpl-idiom, qsharedpointer

昨天我遇到了痛苦，这让我沮丧了 24 小时。问题归结为**随机**发生的意外崩溃。更复杂的是，调试报告也有绝对**随机**的模式。更复杂的是，所有调试跟踪都导致**随机**Qt 源或本地 DLL，即每次都证明问题不在我这边。

这里有一些这样可爱的报告的例子：

```
Program received signal SIGSEGV, Segmentation fault.
0x0000000077864324 in ntdll!RtlAppendStringToString () from C:\Windows\system32\ntdll.dll
(gdb) bt
#0 0x0000000077864324 in ntdll!RtlAppendStringToString () from C:\Windows\system32\ntdll.dll
#1 0x000000002efc0230 in ?? ()
#2 0x0000000002070005 in ?? ()
#3 0x000000002efc0000 in ?? ()
#4 0x000000007787969f in ntdll!RtlIsValidHandle () from C:\Windows\system32\ntdll.dll
#5 0x0000000000000000 in ?? () 
```

* * *

```
warning: HEAP: Free Heap block 307e5950 modified at 307e59c0 after it was freed
Program received signal SIGTRAP, Trace/breakpoint trap.
0x00000000778bf0b2 in ntdll!ExpInterlockedPopEntrySListFault16 () from C:\Windows\system32\ntdll.dll
(gdb) bt
#0 0x00000000778bf0b2 in ntdll!ExpInterlockedPopEntrySListFault16 () from C:\Windows\system32\ntdll.dll
#1 0x000000007786fd34 in ntdll!RtlIsValidHandle () from C:\Windows\system32\ntdll.dll
#2 0x0000000077910d20 in ntdll!RtlGetLastNtStatus () from C:\Windows\system32\ntdll.dll
#3 0x00000000307e5950 in ?? ()
#4 0x00000000307e59c0 in ?? ()
#5 0x00000000ffffffff in ?? ()
#6 0x0000000000220f10 in ?? ()
#7 0x0000000077712d60 in WaitForMultipleObjectsEx () from C:\Windows\system32\kernel32.dll
#8 0x0000000000000000 in ?? () 
```

* * *

```
Program received signal SIGSEGV, Segmentation fault.
0x0000000000a9678a in QBasicAtomicInt::ref (this=0x8) at ../../include/QtCore/../../../qt-src/src/corelib/arch/qatomic_x86_64.h:121
121 : "memory");
(gdb) bt
#0 0x0000000000a9678a in QBasicAtomicInt::ref (this=0x8) at ../../include/QtCore/../../../qt-src/src/corelib/arch/qatomic_x86_64.h:121
#1 0x00000000009df08e in QVariant::QVariant (this=0x21e4d0, p=...) at d:/Distributions/qt-src/src/corelib/kernel/qvariant.cpp:1426
#2 0x0000000000b4dde9 in QList<QVariant>::value (this=0x323bd480, i=1) at ../../include/QtCore/../../../qt-src/src/corelib/tools/qlist.h:666
#3 0x00000000009ccff7 in QObject::property (this=0x3067e900,
name=0xa9d042a <QCDEStyle::drawPrimitive(QStyle::PrimitiveElement, QStyleOption const*, QPainter*, QWidget const*) const::pts5+650> "_q_stylerect")
at d:/Distributions/qt-src/src/corelib/kernel/qobject.cpp:3742
#4 0x0000000000000000 in ?? () 
```

正如您所看到的，这些东西非常讨厌，它没有提供任何有用的信息。但是，有一件事我没有注意。这是编译期间的一个奇怪的警告，也很难用眼睛捕捉到：

```
In file included from d:/Libraries/x64/MinGW-w64/4.7.2/Qt/4.8.4/include/QtCore/qsharedpointer.h:50:0,
                 from d:/Libraries/x64/MinGW-w64/4.7.2/Qt/4.8.4/include/QtCore/QSharedPointer:1,
                 from ../../../../source/libraries/Project/sources/Method.hpp:4,
                 from ../../../../source/libraries/Project/sources/Slot.hpp:4,
                 from ../../../../source/libraries/Project/sources/Slot.cpp:1:
d:/Libraries/x64/MinGW-w64/4.7.2/Qt/4.8.4/include/QtCore/qsharedpointer_impl.h: In instantiation of 'static void QtSharedPointer::ExternalRefCount<T>::deref(QtSharedPointer::ExternalRefCount<T>::Data*, T*) [with T = Project::Method::Private; QtSharedPointer::ExternalRefCount<T>::Data = QtSharedPointer::ExternalRefCountData]':
d:/Libraries/x64/MinGW-w64/4.7.2/Qt/4.8.4/include/QtCore/qsharedpointer_impl.h:336:11:   required from 'void QtSharedPointer::ExternalRefCount<T>::deref() [with T = Project::Method::Private]'
d:/Libraries/x64/MinGW-w64/4.7.2/Qt/4.8.4/include/QtCore/qsharedpointer_impl.h:401:38:   required from 'QtSharedPointer::ExternalRefCount<T>::~ExternalRefCount() [with T = Project::Method::Private]'
d:/Libraries/x64/MinGW-w64/4.7.2/Qt/4.8.4/include/QtCore/qsharedpointer_impl.h:466:7:   required from here
d:/Libraries/x64/MinGW-w64/4.7.2/Qt/4.8.4/include/QtCore/qsharedpointer_impl.h:342:21: warning: possible problem detected in invocation of delete operator: [enabled by default]
d:/Libraries/x64/MinGW-w64/4.7.2/Qt/4.8.4/include/QtCore/qsharedpointer_impl.h:337:28: warning: 'value' has incomplete type [enabled by default] 
```

实际上，我只是将这个警告作为最后的手段，因为在如此绝望地寻找错误的过程中，代码已经感染了字面上的日志死亡。

仔细阅读后，我想起了，例如，如果使用`std::unique_ptr`或`std::scoped_ptr`用于**Pimpl** - 肯定应该提供析构函数，否则代码甚至无法编译。但是，我还记得它`std::shared_ptr`不关心析构函数并且没有它也可以正常工作。这也是我没有注意这个奇怪警告的另一个原因。长话短说，当我添加析构函数时，这种随机崩溃停止了。看起来 Qt`QSharedPointer`与`std::shared_ptr`. 我想如果 Qt 开发人员将此**警告**转化为**错误**会更好，因为这样的调试马拉松根本不值得花时间、精力和**精力**。

我的问题是：

1.  有什么问题`QSharedPointer`？为什么析构函数如此重要？
2.  为什么在没有析构函数的情况下会发生崩溃？这些对象（使用**Pimpl** + `QSharedPointer`）是在堆栈上创建的，并且在它们死后没有其他对象可以访问它们。然而，坠机发生在他们死​​后的某个**随机**时间段内。
3.  有没有人遇到过这样的问题？请分享你的经验。
4.  Qt 中是否还有其他类似的陷阱——我**必须**知道这些陷阱以确保将来保持安全？

希望这些问题和我的一般帖子能帮助其他人避免我过去 24 小时去过的地狱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:31:27.227

该问题已在 Qt 5 中解决，请参阅[https://codereview.qt-project.org/#change,26974](https://codereview.qt-project.org/#change,26974)

编译器调用错误的析构函数或假设不同的内存布局可能会导致某种内存损坏。我想说编译器应该针对这个问题给出错误而不是警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-03T13:54:04.503

您会遇到类似的问题`std::unique_ptr`，如果与不完整的类型一起使用，也会导致破坏的析构函数。当然，修复非常简单 - 我为该类声明了一个构造函数，然后在实现文件中将其定义为

```
MyClass::~MyClass() = default; 
```

这是一个问题`std::unique_ptr`但不是问题的原因`std::shared_ptr`是析构函数是前者类型的一部分，但它是后者的成员。

# c - 陷入 fscanf 循环

> ID：15441894
> 
> 赞同：1
> 
> 时间：2013-03-15T20:52:14.203
> 
> 标签：c

该程序的重​​点是取2个文件，一个字典，另一个是文本，创建一个输出文件，并将文本文件中的所有单词放入其中，但将字典中不存在的单词大写。

当我运行程序时，它一直在询问输入，所以我似乎陷入了 fscanf 循环。而且我只有 3 个 fscanf 循环。它一定是其中之一，但我不知道是哪个以及为什么。

```
 #include <stdio.h>
     #include <string.h>
     #include <stdlib.h>
     #include <errno.h>
     #include <ctype.h>

     #define wosi 20
     int comp (const void *a, const void *b);

     int main(int ac, char *av[])
     {
         int wordcount,i; 
         FILE *infi, *outfi;
         char nothing, *dicptr, fina[100],letter[wosi];
         unsigned char c;
         /*to return error in case number of arguments mismatch*/
         if (ac!=3)
         {
             fprintf (stderr," prog3: Man, I need 3 arguments to work!\n");
             return (1);
         }
           /*first fscanf loop*/
         while ((fscanf(infi,"%s",&nothing)!=0))
             wordcount++;
         /* end of step 2 */
         dicptr = malloc(wordcount * wosi);
         /* end of step 3*/

         rewind(infi);
            /*second fscanf loop */
         for (i=0; fscanf(infi,"%s",&dicptr[i*wosi]) ;i++){}

         /* this is qsort stage (finishing step 4) */

         qsort (dicptr,wordcount,wosi,comp);

         /*step 5 */
         fclose (infi);
         infi = fopen(av[2],"r");

         if (infi == NULL )
         {
             perror( "opening" );
             fprintf(stderr,"Can't open %s, the file is empty\n",av[2]);
             return(1);
         }
         /*step 6 here */

         strcpy(fina, av[2]);
         strcat(fina, ".out");

         outfi = fopen(fina, "w");

         /*step 7*/
          /* third fscanf loop */
         while((fscanf(infi, "%s", letter)!= EOF));
         {
             for(i=0; letter[i]!='\0' ;i++)
             {
                 c=letter[i];
                 letter[i]= toupper(c);
             }

             if(bsearch(letter,dicptr,wordcount,wosi,comp))
             {
                 for(i=0;letter[i]!='\0';i++)
                 {
                     c=letter[i];
                     letter[i]= tolower(c);
                 }
             }

             /* fputs to print in out file*/
             for(i=0; letter[i];i++)
             {
                 fprintf(outfi,"%s",letter);
             }
         }
         free(dicptr);
         return (0);
     }

     int comp (const void *a, const void *b)
     {
         return (strcmp((const char *) a, (const char*) b));
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:59:39.173

这不是[CodeReview.SE](http://codereview.stackexchange.com)，所以我只会给出一些提示。

首先，我敢打赌您没有使用`-Wall`编译器标志进行编译：

```
h2co3-macbook:~ h2co3$ clang -Wall -o baz baz.c
baz.c:24:14: warning: variable 'wordcount' is uninitialized when used here
      [-Wuninitialized]
         wordcount++;
         ^~~~~~~~~
baz.c:12:23: note: initialize the variable 'wordcount' to silence this warning
     int wordcount,i; 
              ^
               = 0
baz.c:23:25: warning: variable 'infi' is uninitialized when used here
      [-Wuninitialized]
     while ((fscanf(infi,"%s",&nothing)!=0))
            ^~~~
baz.c:13:20: note: initialize the variable 'infi' to silence this warning
     FILE *infi, *outfi;
           ^
            = NULL
2 warnings generated. 
```

其次，你的意思是使用`comp()`函数比较字符还是字符串？如果是前者：

```
return *(const char *)a - *(const char *)b; 
```

如果是后者：

```
return strcmp(*(const char **), *(const char **)b); 
```

您似乎还有一些语法错误，例如`while`循环条件后的多余分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:11:34.523

这个：

```
 /*first fscanf loop*/
 while ((fscanf(infi,"%s",&nothing)!=0))
     wordcount++; 
```

此循环仅在`fscanf()`找到不使用转换的输入时结束`%s`。好吧...基本上所有内容都将转换为`%s`，因此这将读取整个文件，由空格分隔。最后，`fscanf()`将返回`EOF`，但是`EOF < 0`，所以它仍然不会破坏你的循环。您可能想比较`EOF`：

```
 /*first fscanf loop*/
 while ((fscanf(infi,"%s",&nothing)!=EOF))
     wordcount++; 
```

这并*没有*`nothing`解决a`char`并且将溢出的事实。如果没有数组和字段宽度的明确限制，此方法是不安全的。但是，由于您无论如何都不关心存储它，因此有一种特殊情况，您可以`fscanf()`通过以下方式告诉丢弃它`%*s`：

```
 /*first fscanf loop*/
 while ((fscanf(infi,"%*s")!=EOF))
     wordcount++; 
```

# custom-controls - 从自定义控件访问 XPage 的数据源

> ID：15441896
> 
> 赞同：0
> 
> 时间：2013-03-15T20:52:28.707
> 
> 标签：custom-controls, xpages

我想我真的在自定义控件的数据源上遗漏了一些东西。当我创建自定义控件时，我不知道 XPage 上数据源的名称是什么。我已经向自定义控件添加了一个自定义属性，以使用类型 com.ibm.xsp.domino.model.DominoDocumentData 和方法绑定编辑器进行传递，如果自定义控件不包含自定义控件，这种方法似乎可以工作。在这一点上，要么我迷路了，要么 XPage/Custom Control 绑定迷路了。

这是我正在尝试做的事情，我使用扩展库创建了一个选项卡表并将其放置在 cc 上。我在上面设置了几个标签。因为每个选项卡上的信息量非常广泛，我想我会为每个选项卡创建一个自定义控件。然后，我在创建 ccYN 自定义控件的几乎每一行以及其他几个控件上都询问是/否问题，因为它们可以重复使用，并且可以简单地绑定到我在 cc 属性中设置的不同字段名称。我看到其他人在哪里说过，如果为 XPage 定义了数据源，它对所有 cc 都可用，那么上面的方法似乎适用于第一级，但比这更深层次让我或 XPage 真的很困惑。我已经搜索了互联网/阅读了 Mastering Xpages，但并没有走得太远。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T20:16:06.000

不确定您是否仍在寻找答案，但您可以在自定义控件中使用“currentDocument”的数据源。这假定自定义控件位于具有一个文档数据源的面板中，或者位于具有一个文档数据源的 XPage 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:30:17.080

这是一个漫长的过程，但我想我现在有了。在自定义控件上创建一个属性定义，其类型为 com.ibm.xsp.model.ModelDataSource，编辑类型为 String，并将其命名为 ccDataSource。然后将 ccDataSource 绑定到包含它的 XPage 的数据源，当它知道使用 SSJS 时，说它是 myDataSource。

如果自定义控件包含在自定义控件中并且数据源需要通过另一个级别传递，则绑定是复合数据.ccDatasource 或 ?? 无论数据源的外部数据源属性定义是什么。

可能有一种更清洁的方法可以做到这一点，但我还没有找到。

# javascript - fancybox 一次打开，下一次又报错

> ID：15441897
> 
> 赞同：0
> 
> 时间：2013-03-15T20:52:44.120
> 
> 标签：javascript, jquery, asp.net-mvc-3, fancybox

`fancybox`只开放一次。下次它会产生错误。我有公司列表和函数调用`onClick`：

```
function Singin(jobid) {
    $.fancybox({
        href: "/Contact/PopBid?jobid=" + jobid,
        'transitionIn': 'elastic',
        'transitionOut': 'elastic',
        'easingIn': 'easeOutBack',
        'easingOut': 'easeInBack',
        'width': 850,
        'height': 394,
        **success: function () {
            parent.$.fancybox.close();
            //Do stuff**                      if i remove this then get error on Height
        }

    });

} 
```

日志：

```
jquery.min.js (line 141)

TypeError: $.fancybox is not a function
[Break On This Error]   

success: function () { 
```

**编辑**（从评论中移出）：

使用的文件：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<link href="../../Scripts/Fancybox/jquery.fancybox-1.3.4.css" rel="stylesheet" />
<script> !window.jQuery && document.write('<script src="jquery-1.4.3.min.js"><\/script>'); </script>
<script src="../../Scripts/Fancybox/jquery.mousewheel-3.0.4.pack.js"></script>
<script src="../../Scripts/Fancybox/jquery.fancybox-1.3.4.pack.js"></script> 
```

# javascript - 如何根据输入文本语言自动设置文本方向？

> ID：15441898
> 
> 赞同：15
> 
> 时间：2013-03-15T20:52:44.843
> 
> 标签：javascript, html, css, bidi

在 Google plus（以及许多其他地方）中，当我想发布一些东西时，当我用波斯语（一种从右到左的语言）输入时，文本方向会自动设置为**rtl**和`text-alignment:right`，而当我开始输入英文它会自动更改为**ltr**和`text-alignment:left`. 我怎样才能拥有这样的功能？这与 HTML5 或 Javascript 有什么关系吗？我应该遵循什么线索？

提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2019-05-16T13:50:44.797

添加`dir=auto`到您的输入元素：

> 在表单和插入的文本上使用 dir="auto" 以自动检测在运行时提供的内容的方向。

[https://www.w3.org/International/questions/qa-html-dir#quickanswer](https://www.w3.org/International/questions/qa-html-dir#quickanswer)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-11-22T14:01:47.757

我写了一个 JQuery 代码来做到这一点。只需将类“checkRTL”添加到要设置其方向的元素。

```
var rtlChar = /[\u0590-\u083F]|[\u08A0-\u08FF]|[\uFB1D-\uFDFF]|[\uFE70-\uFEFF]/mg;
$(document).ready(function(){
    $('.checkRTL').keyup(function(){
        var isRTL = this.value.match(rtlChar);
        if(isRTL !== null) {
            this.style.direction = 'rtl';
         }
         else {
            this.style.direction = 'ltr';
         }
    });
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-16T18:16:23.370

还有 Twitter 的库，这可能会有所帮助：

[https://github.com/twitter/RTLtextarea](https://github.com/twitter/RTLtextarea)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-08-17T01:39:15.693

添加`dir="auto"`到您的元素，然后使用`window.getComputedStyle(element).getPropertyValue('direction')`

例子：

```
<div id="foo" dir="auto">نے والے ہیں۔<div>

// returns rtl
window.getComputedStyle(document.getElementById('foo')).getPropertyValue('direction') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-15T21:02:23.107

1.  从右到左列出语言的典型字符
2.  即时检测它们（通常的 js 事件）
3.  相应地更改 CSS 类

或点击此链接：

[http://www.i18nguy.com/temp/rtl.html](http://www.i18nguy.com/temp/rtl.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-12-18T12:59:54.247

我遇到了`dir=auto`有时不工作的问题在挖掘 CSS 之后我发现

```
#container > * {
    text-align: start;
    unicode-bidi: plaintext;
} 
```

更灵活通用

# iis - 使用主题标签重写 URL

> ID：15441903
> 
> 赞同：3
> 
> 时间：2013-03-15T20:52:54.767
> 
> 标签：iis, url-rewriting

我正在使用 IIS URL 重写模块通过重写映射和**重写**规则（而不是重定向）用友好的 URL 掩盖我的内部 URL。这是我的重写地图：

```
<rewriteMap name="HashTest">
     <add key="/nohash" value="/nohash.aspx" />
     <add key="/hash1" value="/hashtest.aspx#hash1" />
</rewriteMap> 
```

这是我的重写规则：

```
<rule name="Rewrite rule1 for HashTest">
       <match url=".*" />
       <conditions>
           <add input="{HashTest:{REQUEST_URI}}" pattern="(.+)" />
       </conditions>
       <action type="Rewrite" url="{C:1}" />
</rule> 
```

这适用于没有主题标签的 URL，因此每次我查询**www.mysite.com/nohash**时，它都会向我显示来自**www.mysite.com/nohash.aspx**的内容，并在浏览器上更改 URL。

现在，当我尝试重写包含主题标签的 URL 时，我得到一个 404 错误，例如**www.mysite.com/hash1**应该只显示来自**/hashtest.aspx#hash1**的内容，但我只得到一个 404。

现在，如果我将规则操作类型更改为**Redirect**，它确实会成功重定向，所以我不知道为什么它不适用于 rewrite。

我知道主题标签不会在请求时发送到服务器，但如果我的重写映射是向后的，那将是有意义的，比如`<add key="/hashtest.aspx#hash1" value="/hash1" />`.

关于为什么重定向适用于hastags但重写不适用的任何见解？我没有与 IIS 重定向结婚，如果您有其他模块或方法，我可以使用它，非常欢迎

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T22:32:09.497

井号后面的部分（正式称为片段标识符）是 URL 的客户端唯一部分。它永远不会发送到服务器。这就是为什么它不适用于重写，而仅适用于重定向。重写规则将匹配，但 IIS 实际上会尝试打开一个名为的文件`hashtest.aspx#hash1`（即扩展名为 的文件`.asp#hash1`）。由于扩展未链接到 ASP.NET，因此该文件不会作为普通 ASP 页处理。而且很可能它的内容甚至根本不会显示，因为 IIS 默认配置为仅允许对已知扩展的请求。

# php - 如何仅选择第一个数字是 0 到 9 的数字的行？

> ID：15441905
> 
> 赞同：5
> 
> 时间：2013-03-15T20:52:58.023
> 
> 标签：php, mysql

据我所知，我可以做类似的事情：

```
"SELECT * 
 FROM my_table 
 WHERE my_field LIKE '0%' 
 OR my_field LIKE '1%' 
 OR my_field LIKE '2%' "; 
```

有没有办法用正则表达式或类似的东西来实现这一点：

```
"SELECT * 
 FROM my_table 
 WHERE my_field LIKE [only first char is 0-9]"?? 
```

**编辑：该字段不是数字，它可以是“1 People”、“211 Pies”等。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T20:56:28.270

试试这个

```
SELECT * 
FROM BadlyDesignedTable 
WHERE AnswerColumn RLIKE '^[0-9]+' 
```

我想知道是否有可能在哪里进行正则表达式，在 30 秒内在谷歌上找到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T20:59:24.760

```
SELECT * FROM table WHERE field REGEXP '^[0-9]' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T20:59:26.563

```
Select * From my_table Where (REGEXP_LIKE(my_field, '[[:digit:]]%')) 
```

该`(REGEXP_LIKE(Source_String, '[[:character class:]]'))`功能可用于解决许多问题，例如您拥有的问题。只需使用它来告诉它为第一个数字执行此操作。

[http://docs.oracle.com/cd/B14117_01/server.101/b10759/conditions018.htm](http://docs.oracle.com/cd/B14117_01/server.101/b10759/conditions018.htm)

编辑： Select * From my_table Where (SUBSTR(my_field,1,1) = '[[:digit:]]') 在我的类似查询中试过这个，它可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T20:54:49.757

```
SELECT *
FROM my_table
WHERE left(my_field,1) REGEXP '^[0-9]+'; 
```

如果你有 MSSQL，你可以使用

```
SELECT *
FROM my_table
WHERE isNumeric(left(my_field,1)) = 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T21:27:06.327

一个没有正则表达式的简单的：

```
SELECT *, SUBSTR(my_field, 1, 1) AS mf FROM my_table HAVING mf BETWEEN '0' AND '9'; 
```

between 子句中的引号很重要！

# n-queens - 为 N-Queens 生成独特的解决方案

> ID：15441908
> 
> 赞同：0
> 
> 时间：2013-03-15T20:53:08.820
> 
> 标签：n-queens

我正在尝试编写代码来为 N-Queens 生成独特的解决方案。我能够为 N = 4 和 6（但不能为 N 的其他情况）生成正确的解决方案，并且已经消除了由于旋转 180 度和 90 度而产生非不同解决方案的情况。问题在于我对如何消除其他冗余案例的理解。

例如，对于 N = 5，我应该得到 2 个唯一的解决方案，但我正在生成 3 个。要消除的 2 个冗余解决方案是（第 3 个解决方案是正确的）：

问----问----

--Q-- ----Q-

----问 -问---

-Q--- ----Q

---Q- --Q--

# java - 为什么 Toolkit.getDefaultToolkit().beep() 在 Windows 中不起作用？

> ID：15441910
> 
> 赞同：6
> 
> 时间：2013-03-15T20:53:12.800
> 
> 标签：java, javasound

当我尝试使用 发出哔声时`Toolkit.getDefaultToolkit().beep()`，它似乎不适用于我的任何 Windows 计算机。我也知道有人有同样的问题，但他们说它适用于其他操作系统。有谁知道为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-22T19:02:57.090

对我来说，问题是我配置了“无声音”（Win7 Pro）。将其更改回“Windows Default”后，我能够听到哔哔声（实际上是“叮”声） - 也是从 Eclipse 中启动时。

![](../Images/bd79dafd8adf8aec22263ed0e2d1761d.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T21:01:32.600

此代码适用于我在 Windows 7 上，请确保您没有静音。

```
import java.awt.*;

public class Beep {
    public static void main(String... args) {
        Toolkit.getDefaultToolkit().beep();     
    }
} 
```

您也可以只打印`ASCII`铃铛的表示，也适用于 Windows 7

```
public class Beep {
    public static main(String... args) {
       System.out.print("\007"); // \007 is the ASCII bell
       System.out.flush();
    }
} 
```

# iphone - 使用自定义字体时 UINavigationBar 标题被截断

> ID：15441918
> 
> 赞同：7
> 
> 时间：2013-03-15T20:53:46.010
> 
> 标签：iphone, ios, ipad, uinavigationbar

使用此代码自定义 UINavigationBar 标题外观后，带有文本的标签会被截断，如下图所示：

```
[[UINavigationBar appearance] setTitleTextAttributes:@{
                            UITextAttributeTextColor : [UIColor whiteColor],
                            UITextAttributeFont : [UIFont fontWithName:@"Intro" size:20.0f],
                            UITextAttributeTextShadowColor : [UIColor clearColor]
                            }]; 
```

![在此处输入图像描述](../Images/16c644928f95381a748f74a8750e0984.png)

而且，如您所见，有足够的空间。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T15:14:18.533

## iOS 9 更新

我已经在一个干净的项目中进行了相当多的测试，其中包含几十种不同大小的内置字体，我想我可以自信地说，在早期版本的 iOS 中发现的标签大小问题已在 (或之前）iOS 9。

原始问题中描述的用例似乎不可重现，并且标题标签现在似乎可以自行调整大小。因此，我认为不再需要手动更新布局。

如果在导航栏中明显有足够的可视空间时您仍然看到截断问题，您可以尝试以下方法：

1.  删除您可能用于解决此问题的任何额外视图。例如，如果您正在创建自己的`UILabel`并将其设置为导航栏的`titleView`，您可以停止这样做，而只需正常设置标题即可。
2.  尽可能多地删除调整导航栏和`titleView`. 这包括在下面最初接受的答案中找到的代码。
3.  如果您使用的是自定义字体（即 iOS 不包含的字体），请验证它以确保它没有损坏，并包含 iOS 正确测量它所需的所有元数据。如果字体损坏，使用时可能会出现错误。

* * *

**原始答案**

UINavigationBar 布局存在一些已知问题。尝试在视图控制器出现和/或旋转时更新布局。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    ...
    [[[self navigationController] navigationBar] setNeedsLayout];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T21:03:27.287

您可以尝试`UILabel`使用**清晰的背景颜色**和所需的文本设置来制作。然后，您可以将此标签设置为`titleView`您的属性`UINavigationBar`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T22:03:16.217

如果我首先将标题初始化为空字符串，然后尝试更新它，我会遇到同样的问题。调用 setNeedsLayout 没有修复。将空标题初始化为 20 个空格字符为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-22T06:11:13.070

设置标签调用后

```
label.sizeToFit() 
```

# ruby-on-rails - RVM bundler installed ERROR: Gem bundler is not installed, run `gem install bundler` first

> ID：15441920
> 
> 赞同：2
> 
> 时间：2013-03-15T20:53:57.463
> 
> 标签：ruby-on-rails, ruby, rubygems, rvm, bundler

我开始使用一个新项目，它基于 ruby​​ 1.8.7，我正在使用 rvm 来管理我的 ruby​​ 版本，并且我已经安装了 1.8.7 和 1.9.2。

事情是当我这样做时：

```
rvm use 1.8.7 
```

并尝试运行：

```
bundle install 
```

我得到：

```
ERROR: Gem bundler is not installed, run `gem install bundler` first. 
```

我已经安装了 5 次 bundler，即使之后它说它还没有安装。什么会导致这种情况？Bundle 甚至出现在我的宝石列表中。

**从评论更新：**

which ruby​​ && which gem 的输出：

```
/home/username/.rvm/rubies/ruby-1.8.7-p371/bin/ruby
/home/username/.rvm/bin/gem 
```

“env | grep -iE 'ruby|rvm|gem' | sort”的输出：

```
GEM_HOME=/home/username/.rvm/gems/ruby-1.8.7-p371@global
GEM_PATH=/home/username/.rvm/gems/ruby-1.8.7-p371@global
IRBRC=/home/username/.rvm/rubies/ruby-1.8.7-p371/.irbrc
MY_RUBY_HOME=/home/username/.rvm/rubies/ruby-1.8.7-p371
PATH=/home/username/.rvm/gems/ruby-1.8.7-p371@global/bin:/home/username/.rvm/rubies/ruby-1.8.7-p371/bin:/home/username/.rvm/bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games
RUBY_VERSION=ruby-1.8.7-p371
rvm_bin_path=/home/username/.rvm/bin
rvm_delete_flag=0
rvm_path=/home/username/.rvm
rvm_prefix=/home/username
rvm_ruby_string=ruby-1.8.7-p371
rvm_sticky_flag=1
rvm_use_flag=1
rvm_version=1.17.7 (stable) 
```

**通过 RVM 卸载并安装 1.8.7** 运行：

```
rvm install 1.8.7 --verify-downloads 1 
```

它奏效了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T22:21:16.527

看起来您可能运行了错误版本的`gem`. 在我的 RVM 设置中，使用 RVM 推荐的 shell 命令覆盖（`source "$HOME/.rvm/scripts/rvm"`在您`.bashrc`或`.zshrc`其他合适的启动文件中）`gem`通常是一个 shell 函数。它在幕后做了一些 RVM 魔术，然后运行真正的`gem`命令。就我而言，两者都`ruby`用完`gem`了相同的版本目录：

```
/home/jim/.rvm/rubies/ruby-1.9.3-p327/bin/ruby
/home/jim/.rvm/rubies/ruby-1.9.3-p327/bin/gem 
```

确保您正在采购 RVM 启动脚本。

你`PATH`看起来不错。确保你有一个`/home/username/.rvm/rubies/ruby-1.8.7-p371/bin/gem`命令。如果没有，您可能必须重新安装 ruby​​-1.8.7。

运行`rvm current`将显示正在使用的 Ruby 版本和 gemset。确保`gem`路径中有一个与 Ruby 版本匹配的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T13:23:55.883

rvm 安装 ruby​​-1.9.2-p320

使用它并记住关闭所有终端并在编辑-> 配置文件首选项-> 标题和命令-->> 检查（以登录 shell 运行命令）

# css - 如何使用 CSS 在按钮之间水平划分菜单？

> ID：15441924
> 
> 赞同：1
> 
> 时间：2013-03-15T20:54:08.557
> 
> 标签：css, menu, alignment

我有一个使用 CSS 编码的类似[http://www.mrc-productivity.com/forum/cssdropdown.html的下拉菜单。](http://www.mrc-productivity.com/forum/cssdropdown.html)

现在我有一点问题，假设我有 4 个菜单项，我希望父 div 的总宽度始终被 4 个菜单项中的每一个平均划分，即使在不同的分辨率下也是如此......

现在我将每个项目的宽度手动设置为 200px 宽，但这不是一个动态单位，因为它会在不同的分辨率上搞砸。

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:12:46.200

如果您知道您将有确切数量的项目占据相等的宽度，您应该使用百分比。对于四个项目，在任何宽度的父 div 中，您可以将项目的宽度设置为 25%。

为了避免超过 100% 的边框或填充/边距，最好`box-sizing: border-box;`在 div 上进行设置，以便它们的宽度包含那些额外的像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T22:33:30.027

`li`如果你不知道你最终有多少，你可以使用这个技巧：

```
li:nth-child(1):nth-last-child(1)      {width: 100%;}
li:nth-child(1):nth-last-child(2),
li:nth-child(1):nth-last-child(2)~ li  {width: 50%;}
li:nth-child(1):nth-last-child(3),
li:nth-child(1):nth-last-child(3)~ li  {width: 33.3333%;}
li:nth-child(1):nth-last-child(4),
li:nth-child(1):nth-last-child(4)~ li  {width: 25%;}
li:nth-child(1):nth-last-child(5),
li:nth-child(1):nth-last-child(5)~ li  {width: 20%;} 
```

你知道它如何继续更大的数字......

我从一个我不记得的博客上偷了这个。这是迄今为止我见过的最聪明的方法。

它告诉我我对 CSS 知之甚少 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T21:34:14.363

好吧，约翰打败了我，但我也去了百分比，因为你特别提到了 4 个元素。还要确保您的 li 项目设置为 inline-table。

[http://jsfiddle.net/Lw7Ca/1/](http://jsfiddle.net/Lw7Ca/1/)

```
div {
    margin: 50px;
    width: 100%;
    background-color: #f99;
}

ul {
    width: 100%;
}

ul li {
    height: 50px;
    width: 20%;
    display: inline-table;
    border: 1px solid black;
    padding: 10px;
} 
```

# jpa - EclipseLink 自定义表列命名策略

> ID：15441931
> 
> 赞同：4
> 
> 时间：2013-03-15T20:54:27.873
> 
> 标签：jpa, eclipselink

有什么方法可以让 EclipseLink 将驼峰式大小写转换为下划线？

例如，`class MyEntity`=>`select * from MY_ENTITY`

理想情况下，我可以将一些预先打包的东西作为一个属性放在 persistence.xml 中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T19:51:05.543

您可以编写一个会话定制器来做到这一点。首先，创建一个这样的类：

```
public class MySessionCustomizer implements SessionCustomizer {
    @Override
    public void customize(Session session) throws SQLException {
        for (ClassDescriptor descriptor : session.getDescriptors().values()) {
            //Only change the table name for non-embedable entities with no @Table already
            if (!descriptor.getTables().isEmpty() && descriptor.getAlias().equalsIgnoreCase(descriptor.getTableName())) {
                String tableName = convertToUnderscore(descriptor.getTableName());
                descriptor.setTableName(tableName);
                for (IndexDefinition index : descriptor.getTables().get(0).getIndexes()) {
                    index.setTargetTable(tableName);
                }
            }
        }
   }
} 
```

然后，您需要注册此定制器。在您的 persistence.xml`<properties>`部分中添加这一行：

```
<property name="eclipselink.session.customizer" value="foo.bar.MySessionCustomizer" /> 
```

# radiobuttonlist - 如何将标签关联到 RadioButtonList 控件以使其符合 508？

> ID：15441934
> 
> 赞同：0
> 
> 时间：2013-03-15T20:54:44.573
> 
> 标签：radiobuttonlist, section508

我尝试了几种方法来让这个控件通过 508 合规性测试，但它们似乎都失败了。我没有得到测试人员的反馈，只有通过/失败。我怀疑这与在单选按钮周围自动呈现的表格有关。我怀疑标签必须在表格内，这不是 RadioButtonList 的选项。以下是我尝试过但失败的方法。

字段集/图例解决方案

ASP/NET 页面：

```
<fieldset>
<legend>Review By:</legend>
<asp:RadioButtonList runat="server" ID="FilterType" AutoPostBack="true" Width="100%"
       BorderWidth="1"   OnSelectedIndexChanged="FilterType_OnSelectedIndexChanged" />
</fieldset> 
```

呈现的 HTML：

```
<fieldset>
<legend>Review By:</legend>
<table id="ctl00_contentBody_FilterType" border="0" style="border-width:1px;
border-style:solid;width:100%;">
        <tr>
<td><input id="ctl00_contentBody_FilterType_0" type="radio"
name="ctl00$contentBody$FilterType" value="1" 
onclick="javascript:setTimeout('__doPostBack(\'ctl00$contentBody$FilterType$0
\',\'\')',  0)" /><label for="ctl00_contentBody_FilterType_0">Attending MD</label>
</td>
        </tr><tr>
<td><input id="ctl00_contentBody_FilterType_1" type="radio"
name="ctl00$contentBody$FilterType" value="2" 
onclick="javascript:setTimeout('__doPostBack(\'ctl00$contentBody$FilterType$1
\',\'\')', 0)" /><label for="ctl00_contentBody_FilterType_1">CERMe Review 
Types</label></td>
        </tr><tr>
<td><input id="ctl00_contentBody_FilterType_2" type="radio" 
name="ctl00$contentBody$FilterType" value="3" 
onclick="javascript:setTimeout('__doPostBack(\'ctl00$contentBody$FilterType$2
\',\'\')', 0)" /><label for="ctl00_contentBody_FilterType_2">Treating 
Specialty</label></td>
        </tr><tr>
<td><input id="ctl00_contentBody_FilterType_3" type="radio" 
name="ctl00$contentBody$FilterType" value="4" 
onclick="javascript:setTimeout('__doPostBack(\'ctl00$contentBody$FilterType$3
\',\'\')', 0)" /><label for="ctl00_contentBody_FilterType_3">Ward Location</label>
</td>
        </tr>
</table>
</fieldset> 
```

使用 AssociatedControlID 将控件链接到标签

ASP.Net 页面：

```
<asp:Label ID="lblHiddenReviewType"  AssociatedControlID="FilterType" runat="server">
<div>Review Type:</div></asp:Label> 
<asp:RadioButtonList runat="server" ID="FilterType" AutoPostBack="true" Width="100%"
BorderWidth="1" OnSelectedIndexChanged="FilterType_OnSelectedIndexChanged" /> 
```

呈现的 HTML：

```
<td>
            <label for="ctl00_contentBody_FilterType"  
id="ctl00_contentBody_lblHiddenReviewType"><div>Review Type:</div></label> 
                <table id="ctl00_contentBody_FilterType" border="0" style="border-
width:1px;border-style:solid;width:100%;">
        <tr>
            <td><input id="ctl00_contentBody_FilterType_0" 
type="radio" name="ctl00$contentBody$FilterType" value="1" 
onclick="javascript:setTimeout('__doPostBack(\'ctl00$contentBody$FilterType$0
\',\'\')', 0)" /><label for="ctl00_contentBody_FilterType_0">Attending MD</label></td>
        </tr><tr>
            <td><input id="ctl00_contentBody_FilterType_1"   
type="radio" name="ctl00$contentBody$FilterType" value="2" 
onclick="javascript:setTimeout('__doPostBack(\'ctl00$contentBody$FilterType$1 
\',\'\')', 0)" /><label for="ctl00_contentBody_FilterType_1">CERMe Review Type</label>
</td>
        </tr><tr>
            <td><input id="ctl00_contentBody_FilterType_2" 
type="radio" name="ctl00$contentBody$FilterType" value="3" 
onclick="javascript:setTimeout('__doPostBack(\'ctl00$contentBody$FilterType$2
\',\'\')', 0)" /><label for="ctl00_contentBody_FilterType_2">Treating 
Specialty</label></td>
        </tr><tr>
            <td><input id="ctl00_contentBody_FilterType_3" 
type="radio" name="ctl00$contentBody$FilterType" value="4" 
onclick="javascript:setTimeout('__doPostBack(\'ctl00$contentBody$FilterType$3
\',\'\')', 0)" /><label for="ctl00_contentBody_FilterType_3">Ward Location</label>
</td>
        </tr>
    </table>

            </td> 
```

用自己的面板包围控件

ASP.Net 页面：

```
<asp:Panel id="pnlRadial" GroupingText="Review Type: " runat="server">
<asp:RadioButtonList runat="server" ID="FilterType"  AutoPostBack="true" Width="100%"
 BorderWidth="1" OnSelectedIndexChanged="FilterType_OnSelectedIndexChanged" />
</asp:Panel> 
```

呈现的 HTML：

```
<div id="ctl00_contentBody_pnlRadial">
<fieldset>
<legend>Review Type:</legend>
<table id="ctl00_contentBody_FilterType" border="0" style="border-width:1px;border-
style:solid;width:100%;">
                <tr>
<td><input id="ctl00_contentBody_FilterType_0" type="radio" 
name="ctl00$contentBody$FilterType" value="1" 
onclick="javascript:setTimeout('__doPostBack(\'ctl00$contentBody$FilterType$0
\',\'\')', 0)" /><label for="ctl00_contentBody_FilterType_0">Attending MD</label></td>
                </tr><tr>
<td><input id="ctl00_contentBody_FilterType_1" type="radio" 
name="ctl00$contentBody$FilterType" value="2" 
onclick="javascript:setTimeout('__doPostBack(\'ctl00$contentBody$FilterType$1
\',\'\')', 0)" /><label for="ctl00_contentBody_FilterType_1">Reviewer</label></td>
                </tr><tr>
<td><input id="ctl00_contentBody_FilterType_2" type="radio" 
name="ctl00$contentBody$FilterType" value="4" 
onclick="javascript:setTimeout('__doPostBack(\'ctl00$contentBody$FilterType$2
\',\'\')', 0)" /><label for="ctl00_contentBody_FilterType_2">Treating 
Specialty</label></td>
                </tr><tr>
<td><input id="ctl00_contentBody_FilterType_3" type="radio" 
name="ctl00$contentBody$FilterType" value="5" 
onclick="javascript:setTimeout('__doPostBack(\'ctl00$contentBody$FilterType$3
\',\'\')', 0)" /><label for="ctl00_contentBody_FilterType_3">Ward Location</label>
</td>
                </tr><tr>
<td><input id="ctl00_contentBody_FilterType_4" type="radio" 
name="ctl00$contentBody$FilterType" value="3" 
onclick="javascript:setTimeout('__doPostBack(\'ctl00$contentBody$FilterType$4
\',\'\')', 0)" /><label for="ctl00_contentBody_FilterType_4">Service Section</label>
</td>
                </tr>
</table>
</fieldset>
</div> 
```

任何帮助将不胜感激 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:53:19.477

我会要求测试人员提供比通过/失败更多的信息，至少是他们用来测试的信息。也许要求第 508 节协调员参与其中可能会有所帮助。您的第一个或第二个片段应该通过。合规的解决方案如下所示：

```
<fieldset>
 <legend>Review type</legend>
 <table role="presentation"> //bonus for the role, not required
  <tr>
   <td>
    <input id="option1" name="myGroup" type="radio" />
   </td>
   <td>
    <label for="option1">Option 1</label>
   </td>
  </tr>
  <tr>
   <td>
    <input id="option2" name="myGroup" type="radio" />
   </td>
   <td>
    <label for="option2">Option 2</label>
   </td>
  </tr>
  ....
 </table>
</fieldset> 
```

# arduino - 处理 Arduino 不能从 Windows 7 上使用的 Arduino 库开始

> ID：15441938
> 
> 赞同：0
> 
> 时间：2013-03-15T20:54:47.217
> 
> 标签：arduino, processing

当我使用 Arduino 库处理它时，我无法启动我的处理应用程序。我正在考虑在我的硬盘驱动器的一个分区上安装 Linux 以使其工作。我看到库文本加载，但随后冻结。我也在使用一种叫做卡巴斯基的杀毒软件。这是我的处理源代码

```
import processing.serial.*;
import cc.arduino.*;

Arduino arduino= new Arduino(this, Arduino.list()[0], 57600);
int ledPin = 13;
boolean greenFlash = false;
boolean blueFlash = false;
boolean redFlash = false;
void setup()
{
size(600,600);
//println(Arduino.list());
//arduino = new Arduino(this, Arduino.list()[0], 57600);
arduino.pinMode(ledPin, Arduino.OUTPUT);
arduino.digitalWrite(ledPin, Arduino.HIGH);
}

void draw()
{
if(redFlash){
arduino.digitalWrite(12, Arduino.HIGH);
}
delay(mouseY);
arduino.digitalWrite(12, Arduino.LOW);
delay(mouseX);

if(greenFlash){
arduino.digitalWrite(11, Arduino.HIGH);
}
delay(mouseY);
arduino.digitalWrite(11, Arduino.LOW);
delay(mouseX);

if(blueFlash){
arduino.digitalWrite(10, Arduino.HIGH);
}
delay(mouseY);
arduino.digitalWrite(10, Arduino.LOW);
delay(mouseX);

}

void keyPressed(){
//flash = true;
if (key == 'R' || key == 'r'){
redFlash=true;
}
if (key == 'B' || key == 'b'){
blueFlash=true;
}
if (key == 'G' || key == 'g'){
 greenFlash=true;
}

}

void keyReleased(){
//flash = false;  

if (key == 'R' || key == 'r'){
 redFlash=false;
}
if (key == 'B' || key == 'b'){
 blueFlash=false;
}
if (key == 'G' || key == 'g'){
 greenFlash=false;
}
} 
```

arduino 加载了标准的firmata 示例以允许其运行。这在mac上有效，所以我确定这是一个windows错误。我查看了一些论坛，但没有找到任何东西。如果有人可以提供帮助，那就太棒了。

编辑：这是冻结的处理应用程序。它开始但随后窗口不会弹出。有时我必须进入任务管理器才能杀死它。处理编译器也是 1.5.1

```
Display 0 does not exist, using the default display instead.
WARNING:  RXTX Version mismatch
Jar version = RXTX-2.2pre1
native lib Version = RXTX-2.2pre2 
```

在此消息之后，它会冻结并且什么也不做。iv 等待大约 5 分钟，没有任何反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:18:45.847

做一些诊断：**简化**

1.  您是否能够运行其他基本处理草图（非 Arduino/非串行 com）？（Java 问题）
2.  您是否能够使用 Arduino IDE 将草图连接并上传到 Arduino？（COM问题）

如果其中任何一个的答案是否定的，那么您就有了开始寻找的地方。

我在 Arduino 网站上阅读了为 Windows 7 安装驱动程序的内容有点复杂。如果您无法使用 IDE 连接到 Arduinio，请先解决此问题。

# javascript - 为什么这个 javascript 日期是无效日期？

> ID：15441939
> 
> 赞同：2
> 
> 时间：2013-03-15T20:54:47.680
> 
> 标签：javascript, date

我在javascript中创建了一个日期，所以：

```
 var thisDate = new Date(); 
    thisDate.setHours(0); 
    thisDate.setMinutes(0); 
    thisDate.setSeconds(0); 
    thisDate.setMilliseconds(0); 
```

当我将鼠标悬停在变量上时，根据 Chrome 调试器工具提示：

```
 Fri Mar 15 2013 00:00:00 GMT-0400 (Easte...
  > __proto__: Invalid Date 
```

# drupal - 如何在drupal中使用nodeapi？

> ID：15441946
> 
> 赞同：0
> 
> 时间：2013-03-15T20:55:17.490
> 
> 标签：drupal

伙计们，我有这个节点类型-> 电影。这部电影有演员表。所以现在我被指示显示电影中的演员人数。我如何通过使用 nodeapi 来实现这一点？请有人指导莫完成此操作。我对这里的drupal编码非常陌生。这是我到目前为止所做的：

```
function count_cast_nodeapi(&$node, $op) {
   switch ($op) {
      case 'update index':
         if ($node->type == 'movie') {
            $text = ''; 
            $q = db_query('SELECT count(field_movie_cast_nid) FROM content_field_movie_cast ' .
                          'WHERE nid = %d', $node->nid);
        if ($r = db_fetch_object($q)) {
           $text = $r->count;
        }
        drupal_set_message($text);
        }
    }
} 
```

但我不知道把这段代码放在哪里。在哪里保存它。我做这个模块吗？这段代码是否正确？

我也只复制了这段代码。所以我不知道“更新索引”是什么意思。以及谁或什么函数将设置该参数 $op

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:39:16.237

我可以建议您遵循解决方案：

1.  为内容类型“电影”创建新的整数 CCK 字段，该字段将存储演员表的数量。将其命名为movie_cast_number。
2.  该字段将在 hook_nodeapi 中更新（类似于您的示例）。为此，您需要创建自定义模块“count_cast”。将其放置到站点/所有/模块目录。
3.  在 hook_nodeapi 中需要使用 $op "insert" 和 "update"。$op 由模块节点生成，表示使用节点执行的操作。插入表示新节点已创建并更新 - 现有节点已更新。
4.  如果您需要此内容类型的自定义输出，则需要在主题目录中创建 node-movie.tpl.php。

更新演员表数量的代码看起来如下：

```
function count_cast_nodeapi(&$node, $op) {
  switch ($op) {
      case 'update':
      case 'insert':
         if ($node->type == 'movie') {
           $result = db_result(db_query('
             SELECT count(field_movie_cast_nid) cnt
             FROM {content_field_movie_cast}
             WHERE nid = %d
           ', $node->nid));
           $node->field_movie_cast_number[0]['value'] = $result->cnt;
        }
    }
} 
```

# asp.net - ASP.Net MVC FileStreamResult 在 HTML Object.Data 中加载 PDF 在 VS 2010 调试模式下工作，而不是在 IIS 中

> ID：15441951
> 
> 赞同：2
> 
> 时间：2013-03-15T20:55:47.917
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, filestreamresult, html-object

在我们的应用程序中，我们需要从 Application 获取 PDF 并且应该显示在 IE9[8 或 7] 上，Application 在 ASP.Net MVC 3 中，PDF 文件来自 SSRS，基于用户标准 SSRS 将返回 PDF 并且在标签中显示在浏览器上。

当我们在 Visual Studio 2010 中以调试模式运行应用程序并在 IIS7.5 中托管应用程序时，一切正常。但是，一旦我们在没有调试器的情况下访问应用程序，PDF 就不会在 Object Tag 中呈现或加载，甚至 Adob​​e AtiveX PDF Viewer 也不会出现。

因此，要找出问题所在，从 IE9 开发人员工具栏捕获网络日志并得知 URL：`http://myhostname/Home/GetProfile/11` 结果：已中止类型：启动器：ActiveX 控件初始化。

如果我在 Chrome 中访问相同的应用程序，chrome 加载 PDF 没有任何问题，但 IE9 无法加载 PDF。

下面是代码。

## 标准页面

```
 <body>
        <div>
            <form id ="frmReport" method="get" action='@Url.Action("Report","Home")' 
target="iReport">
            <input type="text" />
            <input type="submit" value="Click"/>
            </form>
            <iframe id="iReport" name="iReport"></iframe>
        </div>
    </body> 
```

在上面的 iReport iframe 将获得具有对象标签的结果 HTML

## 报告查看器 html 代码。

```
 <div id="reportContainer">
    @{string urlPDF = "http://myhostname" + @Url.Action("GetProfile", 
              "Home", new { Id = "11" });
      <object id = "pdfView" height="600px" width="100%" 
type='application/pdf' data='@urlPDF'>
      </object>}
    </div> 
```

## MVC 应用程序中的代码。

```
public FileStreamResult GetProfile(string Id)
{
    var contentDisposition = new ContentDisposition
    {
        FileName = "Profile.pdf",
        Inline = true
    };
    Response.AppendHeader("Content-Disposition", contentDisposition.ToString());
    byte[] bytes = ReportStore.GetProfileInByte(Id);
    MemoryStream ms = new MemoryStream(bytes);
    return new FileStreamResult(ms, MediaTypeNames.Application.Pdf);
} 
```

在 pf FileStreamResult 中尝试了 FileContentResult，问题是一样的。

谁知道IE9有什么问题？我跟踪了服务器响应的请求没有任何问题区域的应用程序，但是 IE9-PDF ActiveX 没有处理内容呈现，有人知道可能是什么原因吗？

不仅如此，当我在我们的几台机器上尝试时，结果同样令人失望。机器有 IE9 和 Adob​​ePDFReder 9\10。使用 VS.Net 调试器的任何地方都可以正常工作，但是一旦从调试器中出来，事情就会开始失败。

谢谢

# tycho - 如何更改插件和功能文件名中的限定符

> ID：15441953
> 
> 赞同：5
> 
> 时间：2013-03-15T20:56:08.767
> 
> 标签：tycho, p2

我正在尝试重命名 eclipse-repository 模块的存储库文件夹中的工件。目前它们是自动生成的，如**...1.0.0.v20130315-1927.jar**。

我还没有找到任何有效的配置参数。我曾尝试在配置中使用限定符设置（请参阅[tycho-p2-repository-plugin](http://www.eclipse.org/tycho/sitedocs/tycho-p2/tycho-p2-repository-plugin/assemble-repository-mojo.html)），但它不起作用。

```
<?xml version="1.0" encoding="UTF-8"?>
<project
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
    xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>development.statTool</groupId>
        <artifactId>Application</artifactId>
        <version>0.0.1-SNAPSHOT</version>
    </parent>

    <groupId>development.statTool</groupId>
    <artifactId>development.statTool.p2</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>eclipse-repository</packaging>

    <properties>
        <tycho-version>0.16.0</tycho-version>
    </properties>

    <build>
        <plugins>
            <plugin>
                <groupId>org.eclipse.tycho</groupId>
                <artifactId>tycho-p2-repository-plugin</artifactId>
                <version>${tycho-version}</version>

                <configuration>
                    <qualifier>abcd</qualifier>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T14:01:52.390

我的解决方案是使用 tycho-packaging-plugin。只有更改构建限定符的“缺点”需要重新构建存储库包含的所有模块。

这是我父母 pom.xml 的一部分：

```
<plugin>
    <groupId>org.eclipse.tycho</groupId>
    <artifactId>tycho-packaging-plugin</artifactId>
    <version>${tycho.version}</version>
    <dependencies>
        <dependency>
            <groupId>org.eclipse.tycho.extras</groupId>
            <artifactId>tycho-buildtimestamp-jgit</artifactId>
            <version>${tycho-extras.version}</version>
        </dependency>
    </dependencies>
    <configuration>
        <strictBinIncludes>false</strictBinIncludes>
        <format>'rev${rev}-'yyyyMMdd-HHmm</format>
    </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T00:05:54.363

试试这个：

```
mvn -Dtycho.mode=maven org.eclipse.tycho:tycho-versions-plugin:set-version -DnewVersion=13.3.0.1-SNAPSHOT 
```

或者简单地搜索文本“1.0.0-SNAPSHOT”并使用实际搜索和替换工具将其替换为“13.3.0.1”。

# haskell - 我如何提前做一个块返回？

> ID：15441956
> 
> 赞同：18
> 
> 时间：2013-03-15T20:56:22.033
> 
> 标签：haskell, web-scraping, monads

我正在尝试使用 Haskell 抓取网页并将结果编译成一个对象。

如果出于某种原因，我无法从页面中获取所有项目，我想停止尝试处理页面并提前返回。

例如：

```
scrapePage :: String -> IO ()
scrapePage url = do
  doc <- fromUrl url
  title <- liftM headMay $ runX $ doc >>> css "head.title" >>> getText
  when (isNothing title) (return ())
  date <- liftM headMay $ runX $ doc >>> css "span.dateTime" ! "data-utc"
  when (isNothing date) (return ())
  -- etc
  -- make page object and send it to db
  return () 
```

问题是`when`不会停止 do 块或阻止其他部分被执行。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-15T21:15:25.513

`return`在 haskell 中做的事情与`return`其他语言不同。相反，`return`所做的是将一个值注入一个 monad（在这种情况下`IO`）。你有几个选择

最简单的是使用 if

```
scrapePage :: String -> IO ()
scrapePage url = do
  doc <- fromUrl url
  title <- liftM headMay $ runX $ doc >>> css "head.title" >>> getText
  if (isNothing title) then return () else do
   date <- liftM headMay $ runX $ doc >>> css "span.dateTime" ! "data-utc"
   if (isNothing date) then return () else do
     -- etc
     -- make page object and send it to db
     return () 
```

另一种选择是使用`unless`

```
scrapePage url = do
  doc <- fromUrl url
  title <- liftM headMay $ runX $ doc >>> css "head.title" >>> getText
  unless (isNothing title) do
    date <- liftM headMay $ runX $ doc >>> css "span.dateTime" ! "data-utc"
    unless (isNothing date) do
      -- etc
      -- make page object and send it to db
      return () 
```

这里的一般问题是`IO`monad 没有控制效果（例外情况除外）。另一方面，您可以使用可能的单子变压器

```
scrapePage url = liftM (maybe () id) . runMaybeT $ do
  doc <- liftIO $ fromUrl url
  title <- liftIO $ liftM headMay $ runX $ doc >>> css "head.title" >>> getText
  guard (isJust title)
  date <- liftIO $ liftM headMay $ runX $ doc >>> css "span.dateTime" ! "data-utc"
  guard (isJust date)
  -- etc
  -- make page object and send it to db
  return () 
```

如果你真的想获得完整的控制效果，你需要使用`ContT`

```
scrapePage :: String -> IO ()
scrapePage url = runContT return $ do
  doc <- fromUrl url
  title <- liftM headMay $ runX $ doc >>> css "head.title" >>> getText
  when (isNothing title) $ callCC ($ ())
  date <- liftM headMay $ runX $ doc >>> css "span.dateTime" ! "data-utc"
  when (isNothing date) $ callCC ($ ())
  -- etc
  -- make page object and send it to db
  return () 
```

警告：以上代码都没有经过测试，甚至没有类型检查！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-15T21:14:29.640

使用单子变压器！

```
import Control.Monad.Trans.Class -- from transformers package
import Control.Error.Util        -- from errors package

scrapePage :: String -> IO ()
scrapePage url = maybeT (return ()) return $ do
  doc <- lift $ fromUrl url
  title <- liftM headMay $ lift . runX $ doc >>> css "head.title" >>> getText
  guard . not $ isNothing title
  date <- liftM headMay $ lift . runX $ doc >>> css "span.dateTime" ! "data-utc"
  guard . not $ isNothing date
  -- etc
  -- make page object and send it to db
  return () 
```

当您提前返回时，为了更灵活地返回值，请使用[`throwError`](http://hackage.haskell.org/packages/archive/mtl/2.1.2/doc/html/Control-Monad-Error-Class.html#v%3athrowError)/ [`eitherT`](http://hackage.haskell.org/packages/archive/either/3.4/doc/html/Control-Monad-Trans-Either.html#v%3aeitherT)/[`EitherT`](http://hackage.haskell.org/packages/archive/either/3.4/doc/html/Control-Monad-Trans-Either.html#t%3aEitherT)而不是[`mzero`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Monad.html#v%3amzero)/ [`maybeT`](http://hackage.haskell.org/packages/archive/errors/1.4.1/doc/html/Control-Error-Util.html#v%3amaybeT)/ [`MaybeT`](http://hackage.haskell.org/packages/archive/transformers/0.3.0.0/doc/html/Control-Monad-Trans-Maybe.html#t%3aMaybeT)。（虽然那时你不能使用[`guard`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Monad.html#v%3aguard)。）

（可能也使用[`headZ`](http://hackage.haskell.org/packages/archive/errors/1.4.1/doc/html/Control-Error-Safe.html#v%3aheadZ)而不是`headMay`和抛弃显式`guard`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T20:59:21.220

我从未使用过 Haskell，但这似乎很容易。试试`when (isNothing date) $ exit ()`。如果这也不起作用，请确保您的陈述是正确的。另请参阅此网站了解更多信息：[Breaking From loop](http://www.haskellforall.com/2012/07/breaking-from-loop.html)。

# erlang - Erlang : {ok,{Ip,Port}} = inet:peername(Socket) 检查错误？

> ID：15441959
> 
> 赞同：0
> 
> 时间：2013-03-15T20:56:27.630
> 
> 标签：erlang, switch-statement, tuples, inet

从函数的[erlang](http://www.erlang.org/doc/man/inet.html#peername-1)参考中`peername`可以看出，有两种可能的返回。一个是IP地址和端口，另一个是错误。我的问题是如何创建一个 case 语句来检查两者以防出现错误？

到目前为止，我的这段代码只有在函数实际返回有用的东西时才有效，但是如果出现错误，元组会发生什么？

```
ip_address(Socket) ->   
    {ok,{Ip,Port}} = inet:peername(Socket), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:36:15.707

像那样：

```
ip_address(Socket) ->
    case inet:peername(Socket) of
        {ok, {Ip, Port}} ->
            io:format("ip ~p, port ~p~n", [Ip, Port]);
        {error, Error} ->
            io:format("error ~p~n", [Error])
    end. 
```

或者您可以使用带有两个子句的另一个函数：

```
ip_address(Socket) ->
    ip_address_1(inet:peername(Socket)).

ip_address_1({ok, {Ip, Port}}) ->
    io:format("ip ~p, port ~p~n", [Ip, Port]);
ip_address_1({error, Error}) ->
    io:format("error ~p~n", [Error]). 
```

# emacs - 从特定窗口打开文件

> ID：15441961
> 
> 赞同：1
> 
> 时间：2013-03-15T20:56:29.270
> 
> 标签：emacs, dired

当我们`o`在 dired 中使用时，它会在“其他窗口”中打开一个文件。但是，如果有多个其他窗口可见，那么它似乎是随机选择的。有没有办法选择应该在哪个窗口中打开该文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-12-03T23:04:59.563

我也对 dired 的这种行为感到恼火。我喜欢[ace-window](https://github.com/abo-abo/ace-window)让您只需一个按键即可轻松选择窗口的方式，因此 a 编写了一个函数，让我可以使用它在我选择的窗口中打开文件：

```
(require 'ace-window)
(defun find-file-ace-window ()
  "Use ace window to select a window for opening a file from dired."
  (interactive)
  (let ((file (dired-get-file-for-visit)))
    (if (> (length (aw-window-list)) 1)
        (aw-select "" (lambda (window)
                        (aw-switch-to-window window)
                        (find-file file)))
      (find-file-other-window file)))) 
```

替换dired标准`find-file-other-window`命令添加

```
(define-key dired-mode-map "o" 'find-file-ace-window) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:51:05.943

我怀疑这种行为是随机的，但您可以通过挂钩`display-buffer`和绑定您自己的命令来更改它。

请注意，大部分代码是按区域对窗口列表进行排序。

```
(defvar le::dired-chosen-window nil
  "current chosen window to show buffers for `le::dired-choose-window-action'")

(defun le::window-list-for-completion ()
  "Return alist of (BUFFER-NAME . WINDOW) sorted by size,
  suitable for completion."
  ;; Schwartzian transform
  (mapcar
   (lambda (cell)
     (let ((window (car cell)))
       (cons (concat
              (when (and (boundp 'window-numbering-mode)
                         window-numbering-mode)
                (format "%s: "
                        (window-numbering-get-number-string window)))
              (buffer-name (window-buffer window)))
             window)))
   (sort (loop with boost-alist = (if (eq major-mode 'dired-mode)
                                      (list (cons (selected-window) -1000000))
                                    nil)
               for window in (window-list nil 0 (window-at 0 0))
               for index from 0
               collect (cons window (+
                                     (* (window-total-width window)
                                        (window-total-height window)
                                        100)
                                     index
                                     (let ((boost (assq window boost-alist)))
                                       (if boost
                                           (cdr boost)
                                         0)))))
         (lambda (a b)
           (> (cdr a) (cdr b))))))

(defun le::dired-choose-window (window)
  "Choose window to display buffer in.
Reset selection with universal prefix (C-u)."
  (interactive (let ((completions (le::window-list-for-completion)))
                 (list (unless current-prefix-arg
                         (cdr (assoc (completing-read "window holding buffer: " completions) completions))))))
  (setq le::dired-chosen-window window))

(defun le::dired-choose-window-action (buffer alist)
  "action to display buffer in `le::dired-chosen-window'"
  (window--display-buffer buffer le::dired-chosen-window 'reuse))

(defun le::dired-find-file-specified-window ()
  "Dired command to display buffer in chosen window"
  (interactive)
  (let ((display-buffer-overriding-action '((le::dired-choose-window-action))))
    (dired-find-file-other-window)))

(define-key dired-mode-map [remap dired-find-file-other-window] 'le::dired-find-file-specified-window) 
```

1.  评估缓冲区。
2.  选择窗口`le::dired-choose-window-action`
3.  从 dired按下`o`以在所选窗口中打开文件。

# html - CSS：背景图像问题

> ID：15441964
> 
> 赞同：0
> 
> 时间：2013-03-15T20:56:37.887
> 
> 标签：html, css

当鼠标悬停在三个图像中的任何一个上时，我正在尝试显示背景图像。这是一个jsFiddle： http: [//jsfiddle.net/cvh2013/gefKT/](http://jsfiddle.net/cvh2013/gefKT/)，谁能告诉我我做错了什么？目前，当您悬停三个圆形图像中的任何一个时，背景图像根本不会显示。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="UTF-8" />
<title>SVG Included with <object> tag</title>

<style>
.center {
text-align: center;
}

#images:hover {
background-image: url(http://ubuntuone.com/1SRrDB8i8cBtpm3Smxaz5r);
background-repeat: no-repeat;
}
</style>
</head>

<body>
<table style="width: 100%">
    <tr>
        <div id="images">
            <td class="center"><object type="image/svg+xml"
                    data="http://ubuntuone.com/5b5ZUS86nHAffWiOirDwFr">
                    <img src="http://ubuntuone.com/12qOaTGCZYzQtqFJpaGbPV" alt="" />
                </object></td>
            <td class="center"><object type="image/svg+xml"
                    data="http://ubuntuone.com/7Ur09JXlGVvF2GhXFbLXlx">
                    <img src="http://ubuntuone.com/54AaqhQUU8npACF2vXzKFp" alt="" />
                </object></td>
            <td class="center"><object type="image/svg+xml"
                    data="http://ubuntuone.com/6tkHm9c2r1eH9PMB9Nr3Ux">
                    <img src="http://ubuntuone.com/4CXw05d1dsSf9VhAIPNZf6" alt="" />
                </object></td>
        </div>
    </tr>
</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:04:05.620

如果我是你，我会按如下方式更改 CSS：

```
<style>
.center {text-align:center;}
.boxy:hover {box-shadow:0 0 5px #000; border-radius:50%;}
</style> 
```

并将`.boxy`类添加到您声明的对象中。Border Radius 比使用图像（要加载一个资源）要干净得多。如果您希望它在 IE8 及更低版本上工作，您可以使用您想要的实际图像方法。

小提琴：http: [//jsfiddle.net/gefKT/9/](http://jsfiddle.net/gefKT/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:00:08.307

div 不包含任何内容，`#images`因此没有尺寸，因此永远不能悬停在上面。您需要将您的三个图像**放在**这个 div 中。

# linux - 对文本文件进行重复数据删除并将最后出现的内容保留在一个输出文件中并将其他内容移至另一个输出文件

> ID：15441966
> 
> 赞同：0
> 
> 时间：2013-03-15T20:56:40.967
> 
> 标签：linux, unix, awk, sua

我有一个包含重复记录的文件（重复记录在列中）。我只想保留文件中最后一次出现的 dup 记录，并将所有其他 dup 移动到另一个文件中。

文件：输入

```
foo j
bar bn
bar b
bar bn
bar bn
bar bn
kkk hh
fjk ff
foo jj
xxx tt
kkk hh 
```

我使用了以下 awk 语句来保留最后一次出现 -

```
awk '{line=$0; x[$1]=line;} END{ for (key in x) print x[key];}' input > output 
```

文件：输出

```
foo jj
xxx tt
fjk ff
kkk hh
bar bn 
```

如何将重复记录移动到另一个文件（保留最后一次出现）？

移入`foo j`一个文件让我们说 d_output 并保留`foo jj`在输出文件中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:03:09.493

一个技巧是先`tac`反转文件*（比最后一个更容易抓住第一个匹配）*：

```
$ tac file | awk 'a[$1]++{print $0 > "dup";next}{print $0 > "output"}'

$ cat output
kkk hh
xxx tt
foo jj
fjk ff
bar bn

$ cat dup
kkk hh
bar bn
bar bn
bar b
bar bn
foo j 
```

*编辑：*

以下是当前 3 个超过 100 万行的解决方案的基准数据：

```
sudo_o

real    0m2.156s
user    0m1.004s
sys     0m0.117s

kent

real    0m2.806s
user    0m2.718s
sys     0m0.080s

scrutinizer

real    0m4.033s
user    0m3.939s
sys     0m0.082s 
```

*在此处验证[http://ideone.com/IBrNeh](http://ideone.com/IBrNeh)*

在我的本地机器上使用该文件`seq 1 1000000 > bench`：

```
# sudo_o
$ time tac bench | awk 'a[$1]++{print $0 > "dup";next}{print $0 > "output"}' 

real    0m0.729s
user    0m0.668s
sys     0m0.101s

# scrutinizer
$ time awk 'NR==FNR{A[$1]=NR; next} A[$1]!=FNR{print>f; next}1' f=dups bench bench > output

real    0m1.093s
user    0m1.016s
sys     0m0.070s

# kent 
$ time awk '$1 in a{print a[$1]>"dup.txt"}{a[$1]=$0}END{for(x in a)print a[x]}' bench > output

real    0m1.141s
user    0m1.055s
sys     0m0.080s 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T21:43:09.743

喜欢的工具`tac`很好`rev`！但是，它们并不是所有发行版的默认设置，尤其是我发现您已用`unix`. 还`tac`更改了 output/dup.txt 的顺序，如果要保留该顺序，则需要额外的努力来维护该顺序。

试试这条线：

```
awk '$1 in a{print a[$1]>"dup.txt"}{a[$1]=$0}END{for(x in a)print a[x]}' file 
```

用你的例子：

```
kent$  awk '$1 in a{print a[$1]>"dup.txt"}{a[$1]=$0}END{for(x in a)print a[x]}' file
foo jj
xxx tt
fjk ff
kkk hh
bar bn

kent$  cat dup.txt 
bar bn
bar b
bar bn
bar bn
foo j
kkk hh 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T23:26:59.200

您可以尝试另一种选择，通过两次读取输入文件来保持顺序：

```
awk 'NR==FNR{A[$1]=NR; next} A[$1]!=FNR{print>f; next}1' f=dups file file 
```

输出：

```
bar bn
fjk ff
foo jj
xxx tt
kkk hh 
```

重复：

```
$ cat dups
foo j
bar bn
bar b
bar bn
bar bn
kkk hh 
```

* * *

@Sudo_O @WilliamPursell @user2018441。Sudo_O 感谢您的性能测试。我试图在我的系统上重现它们，但它没有`tac`可用，所以我用 Kent 的版本和我的版本进行了测试，但我无法在我的系统上重现这些差异。

更新：我使用 Sudo_O 的版本`cat`而不是`tac`. 尽管在一个系统上，输出到 /dev/null 之间和输出到 /dev/null`tac`之间有 0.2 秒的差异（参见这篇文章的底部）`tac``cat`

我有：

```
Sudo_O
$ time cat <(seq 1 1000000) | awk 'a[$1]++{print $0 > "/dev/null";next}{print $0 > "/dev/null"}'

real    0m1.491s
user    0m1.307s
sys     0m0.415s

kent
$ time awk '$1 in a{print a[$1]>"/dev/null"}{a[$1]=$0}END{for(x in a)print a[x]}' <(seq 1 1000000) > /dev/null

real    0m1.238s
user    0m1.421s
sys     0m0.038s

scrutinizer
$ time awk 'NR==FNR{A[$1]=NR; next} A[$1]!=FNR{print>f; next}1' f=/dev/null <(seq 1 1000000) <(seq 1 1000000) > /dev/null

real    0m1.422s
user    0m1.778s
sys     0m0.078s 
```

--

使用文件而不是`seq`我得到的文件时：

```
Sudo_O
$ time cat <infile | awk 'a[$1]++{print $0 > "/dev/null";next}{print $0 > "/dev/null"}'

real    0m1.519s
user    0m1.148s
sys     0m0.372s

kent
$ time awk '$1 in a{print a[$1]>"/dev/null"}{a[$1]=$0}END{for(x in a)print a[x]}' <infile > /dev/null

real    0m1.267s
user    0m1.227s
sys     0m0.037s

scrutinizer
$ time awk 'NR==FNR{A[$1]=NR; next} A[$1]!=FNR{print>f; next}1' f=/dev/null <infile <infile > /dev/null

real    0m0.737s
user    0m0.707s
sys     0m0.025s 
```

可能是由于缓存效果，这也将出现在较大的文件中。创建 infile 需要：

```
$ time seq 1 1000000 > infile

real    0m0.224s
user    0m0.213s
sys     0m0.010s 
```

* * *

在不同的系统上测试：

```
$ time cat <(seq 1 1000000) > /dev/null

real    0m0.764s
user    0m0.719s
sys     0m0.031s
$ time tac <(seq 1 1000000) > /dev/null

real    0m1.011s
user    0m0.820s
sys     0m0.082s 
```

# c# - xdocument 添加 xdocument

> ID：15441972
> 
> 赞同：0
> 
> 时间：2013-03-15T20:57:03.227
> 
> 标签：c#, linq-to-xml, xml-namespaces

我做错了不能抓取 shippingreceiptlineitem 添加到第一个文档，我需要添加命名空间吗？

```
 XDocument xdoc = XDocument.Load("FirstPart.xml");
        xdoc.Root.Add(XDocument.Load("RepeatingPart.xml").Element("ShipmentReceiptLineItem").Elements()); 
```

要获取的xml：

```
 <tns:ShipmentReceiptNotification xmlns:dl="urn:rosettanet:specification:domain:Logistics:xsd:schema:02.18"
 xmlns:tns="urn:rosettanet:specification:interchange:ShipmentReceiptNotification:xsd:schema:02.01">
<tns:ShipmentReceiptLineItem>
</tns:ShipmentReceiptLineItem>
</tns:ShipmentReceiptNotification> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:01:53.960

是的，当您尝试查找`ShipmentReceiptLineItem`元素时，您需要使用命名空间。您*还*需要从根元素开始，否则您的检查`Element(...)`只能*找到*根元素：

```
XDocument xdoc = XDocument.Load("FirstPart.xml");
XNamespace tns = "urn:rosettanet:specification:interchange:ShipmentReceiptNotification:xsd:schema:02.01";
xdoc.Root.Add(XDocument.Load("RepeatingPart.xml")
                       .Root
                       .Element(tns + "ShipmentReceiptLineItem")
                       .Elements()); 
```

或者进一步拆分：

```
XDocument repeatingDoc = XDocument.Load("RepeatingPart.xml");
XNamespace tns = "urn:rosettanet:specification:interchange:ShipmentReceiptNotification:xsd:schema:02.01";    
var elementsToAdd = repeatingDoc.Root
                                .Element(tns + "ShipmentReceiptLineItem")
                                .Elements());
var mainDoc = XDocument.Load("FirstPart.xml");
mainDoc.Root.Add(elementsToAdd); 
```

我发现这比一口气做所有事情要简单得多。您可能会摆脱`repeatingDoc`变量并内联执行*该*位，但我绝对不会内联执行*整个*操作。

# wordpress - 上传中的WordPress最小图像尺寸

> ID：15441973
> 
> 赞同：0
> 
> 时间：2013-03-15T20:57:03.633
> 
> 标签：wordpress

在设置 - >媒体是设置最大图像尺寸的设置，但我需要设置最小尺寸可能吗？或者也许是一些功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:59:23.993

WordPress Stack Exchange 网站上有一个问题，其中包含一些有用的信息——您需要添加一个过滤器`wp_handle_upload_prefilter`，然后添加一个函数来检查尺寸：

```
add_filter('wp_handle_upload_prefilter','tc_handle_upload_prefilter'); 
```

这是问题：[https ://wordpress.stackexchange.com/questions/28359/how-to-require-a-minimum-image-dimension-for-uploading](https://wordpress.stackexchange.com/questions/28359/how-to-require-a-minimum-image-dimension-for-uploading)

# javascript - IE8 getElementById 怪癖模式

> ID：15441979
> 
> 赞同：0
> 
> 时间：2013-03-15T20:57:50.787
> 
> 标签：javascript, internet-explorer-8, quirks-mode

我在我的 JSP 中定义了这个函数：

```
function addcolor(){
    alert("found " + document.getElementById("clrCd").value);
} 
```

我的 HTML（来自 struts 1.3 应用程序）

```
<input type="text" name="clrCd" maxlength="2" size="2" value="">
<input type="button" name="add" value="ADD" onclick="addcolor()"> 
```

当我的浏览器处于怪异模式时，我单击添加按钮，我会收到带有文本输入值的警报

如果我将浏览器置于 IE8 标准模式（通过 F12 控制台）并运行相同的代码，我会得到：

> 错误：无法获取属性“值”的值：对象为空或未定义

为什么会发生这种情况……我已经浪费了一整天的时间来处理 IE 和所有这些都是胡说八道。

这是一个遗留应用程序，我不能真正改变太多，但我真的很想让它们脱离怪癖模式，这样我们就可以开始使用一些 HTML5 功能，如 bootstrap 和 angularJS。

有任何想法吗？

杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:59:06.427

这不是“IE 胡说八道”，而是您没有任何 id 的元素`clrCd`。您只设置了 name 属性。

添加一个`id="clrCd"`到你的元素，你会有更多的运气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T09:30:07.350

其实你可以在IE7之前做到这一点见文档

[http://msdn.microsoft.com/en-us/library/ie/ms536437(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms536437(v=vs.85).aspx)

Windows Internet Explorer 8 及更高版本。在 IE8 标准模式下，getElementById 仅对 ID 属性执行区分大小写的匹配。在 IE7 标准模式和以前的模式中，此方法对 ID 和 NAME 属性执行不区分大小写的匹配

# c# - 使用 NAudio 将流数据保存到 WAV 文件

> ID：15441980
> 
> 赞同：2
> 
> 时间：2013-03-15T20:57:51.273
> 
> 标签：c#, naudio

我想将传入的流数据保存到硬盘驱动器上的 WAV 文件中。如何更改下面的代码以便能够将流录制到有效的 WAV 文件中？

从[这里](http://naudio.codeplex.com/SourceControl/changeset/view/a2092ffde43a#NAudioDemo/Mp3StreamingDemo/MP3StreamingPanel.cs)的演示：

```
private void StreamMP3(object state)
{
    this.fullyDownloaded = false;
    string url = (string)state;
    webRequest = (HttpWebRequest)WebRequest.Create(url);
    HttpWebResponse resp = null;
    try
    {
        resp = (HttpWebResponse)webRequest.GetResponse();
    }
    catch(WebException e)
    {
        if (e.Status != WebExceptionStatus.RequestCanceled)
        {
            ShowError(e.Message);
        }
        return;
    }
    byte[] buffer = new byte[16384 * 4]; // Needs to be big enough to hold a decompressed frame

    IMp3FrameDecompressor decompressor = null;
    try
    {
        using (var responseStream = resp.GetResponseStream())
        {
            var readFullyStream = new ReadFullyStream(responseStream);
            do
            {
                if (bufferedWaveProvider != null &&
                    bufferedWaveProvider.BufferLength - bufferedWaveProvider.BufferedBytes <
                      bufferedWaveProvider.WaveFormat.AverageBytesPerSecond / 4)
                {
                    Debug.WriteLine("Buffer getting full, taking a break");
                    Thread.Sleep(500);
                }
                else
                {
                    Mp3Frame frame = null;
                    try
                    {
                        frame = Mp3Frame.LoadFromStream(readFullyStream);
                    }
                    catch (EndOfStreamException)
                    {
                        this.fullyDownloaded = true;

                        // Reached the end of the MP3 file / stream
                        break;
                    }
                    catch (WebException)
                    {
                        // Probably we have aborted download from the GUI thread
                        break;
                    }
                    if (decompressor == null)
                    {
                        // I don't think these details matter too much - just help ACM select the right codec.
                        // However, the buffered provider doesn't know what sample rate it is working at
                        // until we have a frame.
                        WaveFormat waveFormat = new Mp3WaveFormat(
                                                  frame.SampleRate,
                                                  frame.ChannelMode == ChannelMode.Mono ? 1 : 2,
                                                  frame.FrameLength,
                                                  frame.BitRate);
                        decompressor = new AcmMp3FrameDecompressor(waveFormat);
                        this.bufferedWaveProvider = new BufferedWaveProvider(decompressor.OutputFormat);
                        this.bufferedWaveProvider.BufferDuration = TimeSpan.FromSeconds(20); // Allow us to get well ahead of ourselves
                        //this.bufferedWaveProvider.BufferedDuration = 250;
                    }
                    int decompressed = decompressor.DecompressFrame(frame, buffer, 0);
                    //Debug.WriteLine(String.Format("Decompressed a frame {0}", decompressed));
                    bufferedWaveProvider.AddSamples(buffer, 0, decompressed);
                }

            } while (playbackState != StreamingPlaybackState.Stopped);

            Debug.WriteLine("Exiting");
            // I was doing this in a finally block, but for some reason
            // we are hanging on response stream .Dispose, so we never get there.
            decompressor.Dispose();
        }
    }
    finally
    {
        if (decompressor != null)
        {
            decompressor.Dispose();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:12:38.823

我不会采用那种特殊的方法来保存到磁盘。这有点过于亲力亲为，因为它必须处理以正确的速率播放。只需缓冲响应，然后将其包装在`Mp3FileReader`流中并用于`WaveFileWriter`写入 WAV 文件：

```
MemoryStream mp3Buffered = new MemoryStream();
using (var responseStream = resp.GetResponseStream())
{
    byte[] buffer = new byte[65536];
    int bytesRead = responseStream.Read(buffer, 0, buffer.Length);
    while (bytesRead > 0)
    {
        mp3Buffered.Write(buffer, 0, bytesRead);
        bytesRead = responseStream.Read(buffer, 0, buffer.Length);
    }
}

mp3Buffered.Position = 0;
using (var mp3Stream = new Mp3FileReader(mp3Buffered))
{    
    WaveFileWriter.CreateWaveFile("file.wav", mp3Stream);
} 
```

当然，这确实假设您的 MP3 文件的波形格式与 WAV 兼容，尤其是与您的 WAV 播放器兼容。如果不是，您还需要注入和添加`WaveFormatConversion`流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-24T10:48:05.353

您可以使用以下行保存到`MemoryStream` ：

```
mp3Buffered.Write(frame.RawData, 0, frame.RawData.Length); 
```

MattW 的回答中描述了将流保存到文件中。

# java - 从变量初始化操作 URL 时，JSP 表单页面进入无限循环

> ID：15441981
> 
> 赞同：0
> 
> 时间：2013-03-15T20:57:52.430
> 
> 标签：java, jsp, struts, validation

我有一个简单的 JSP，如下所示：

```
<form name="myform" id="myform" 
      action="${pageContext.request.contextPath}/validateLoginID.do" method="POST">
    <input type="text" name = "loginID" id="loginID" value="${loginID}"/>
</form> 

<script> 

window.alert("Submitting form!");
document.myform.submit();
</script> 
```

上面的 JSP 代码有效。但是当我尝试从变量初始化操作时，使用类似的东西：

```
action="${myLink}" method="POST"> 
```

它进入一个无限循环，打印“提交表单！” 每一次。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:17:16.957

我认为 struts 验证框架隐含在上面的代码之下。就它返回输入而言，同一页面涉及 javascript 再次提交有错误的页面并且它正在重复。删除`document.myform.submit();`或制作功能

```
<script type="text/javascript"> 
function doSubmit(){
  window.alert("Submitting form!");
  document.myform.submit();
}
</script> 
```

这将停止在加载时提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:02:23.837

嗯，可能是因为它提交表单的action返回上面的页面，哪个提交表单，哪个显示页面，哪个提交表单等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T21:20:05.210

`"myLink"`实际上是我实际使用的变量“名称”的虚拟名称。我试图模仿`${pageContext.request.contextPath}`并取一个这样的名字，但不幸的是，变量名中的**点**导致了问题。删除点后，它可以工作。

# regex - shell 和正则表达式匹配空间

> ID：15441986
> 
> 赞同：0
> 
> 时间：2013-03-15T20:58:36.070
> 
> 标签：regex, shell, lex

这是我的问题：

例如

```
echo 123\<  abc\\\ efg 
```

输出应该是

```
123< abc\ efg 
```

我在 lex 文件中的正则表达式是

```
[^\n ]*[\\]+[^\n] 
```

如果我使用这个正则表达式，我的输出将是

```
 123< abc\  efg 
```

这是错误的。谁能告诉我如何分别匹配\（空格）和常规（空格）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:32:49.520

我相信您正在寻找的是一个 flex 正则表达式，它将匹配一个不包含引号或其他此类复杂情况的单个 shell 令牌。

请注意，自动终止标记的字符如下：`();<>&|`和空格。（`bash`手册说`space`and `tab`，但我很确定这`newline`也是分开的词。）

这样的正则表达式是可能的，但是（恕我直言）它用处不大，部分原因是它不需要引用（或括号：`a$(echo foo)b`是一个单词），部分原因是需要重新扫描生成的单词以查找转义字符。但是无所谓。这是一个示例 flex 正则表达式：

```
([^();<>&|\\[:space:]]|\\(.|\n))+ 
```

匹配任意数量的连续实例：

*   元字符或转义字符以外的任何内容，或
*   后跟任何单个字符的转义字符，或
*   转义字符后跟换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:42:40.883

你的正则表达式是正确的。当您在提示符下键入

```
echo 123\<  abc\\\ efg 
```

发生以下情况：

1.  `bash`替换`\<`为`<`( 没有反斜杠，`bash`将被`<`视为输入重定向运算符。

2.  `bash`替换`\\`为单个文字`\`

3.  `bash`用单个文字空格替换 '\ `。

4.  `bash`调用`echo`命令，传递给它 2 个参数：`123<`和`abc\ efg`.

5.  `echo`产生输出`123< abc\ efg`，一个字符串，用一个空格分隔它的两个参数。

根据您的正则表达式，我上面第 5 步中的字符串输出看起来像是存储在您的文件中的内容。从这 13 个字节中，它将找到 3 个有效标记：`123<`、`abc\`和`efg`. 如果它将它们作为单个字符串打印到标准输出，每个标记用空格分隔，您会看到`123< abc\ efg`. （反斜杠后面应该有两个空格；我似乎无法显示多个空格。）

# wso2 - WSO2 身份服务器 - SAML SSO - 被动 STS 示例不起作用

> ID：15441987
> 
> 赞同：1
> 
> 时间：2013-03-15T20:58:40.520
> 
> 标签：wso2, wso2is

我指的是以下文章：[http ://wso2.org/library/articles/2010/07/saml2-web-browser-based-sso-wso2-identity-server](http://wso2.org/library/articles/2010/07/saml2-web-browser-based-sso-wso2-identity-server)

此示例适用于身份服务器 4.0.0，但不适用于身份服务器 4.1.0...

使用 4.1.0 - 返回 SAML 响应，但依赖方应用程序在尝试反序列化消息时抛出异常。可以更新此示例以与更高版本的 IS 一起使用吗？

这是依赖方应用程序的堆栈跟踪：

```
SEVERE: Servlet.service() for servlet [SAML2ConsumerServlet] in context with path [/saml2.demo] threw exception
java.lang.NullPointerException
    at org.wso2.identity.saml2.demo.SamlConsumerManager.getResult(SamlConsumerManager.java:278)
    at org.wso2.identity.saml2.demo.SamlConsumerManager.processResponseMessage(SamlConsumerManager.java:252)
    at org.wso2.identity.saml2.demo.SAML2ConsumerServlet.doPost(SAML2ConsumerServlet.java:77)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

来自依赖方应用程序的源代码：[https ://svn.wso2.org/repos/wso2/people/suresh/saml2/saml2-demo/src-dist](https://svn.wso2.org/repos/wso2/people/suresh/saml2/saml2-demo/src-dist)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T14:41:30.457

似乎尚未实现解码器操作，并且从 IS 4.0.0 开始，响应是使用 Base64 编码的，因此您可能需要在 SamlConsumerManager.java 中进行更改

私有字符串 samlDecoder（字符串消息）抛出异常 {

```
// Base64 decode

//byte[] xmlBytes = messsage.getBytes("UTF-8");
byte[] base64DecodedByteArray = Base64.decode(messsage);

// Inflate (uncompress) the AuthnRequest data
// First attempt to unzip the byte array according to DEFLATE (rfc 1951)

Inflater inflater = new Inflater(true);
inflater.setInput(base64DecodedByteArray);
// since we are decompressing, it's impossible to know how much space we
// might need; hopefully this number is suitably big
byte[] xmlMessageBytes = new byte[5000];
int resultLength = inflater.inflate(xmlMessageBytes);

if (!inflater.finished()) {
    throw new RuntimeException("didn't allocate enough space to hold "
            + "decompressed data");
}

inflater.end();

String decodedResponse = new String(xmlMessageBytes, 0, resultLength,
        "UTF-8");

return decodedResponse; 
```

}

```
public Map<String, String> processResponseMessage(String responseMessage) {

XMLObject responseXmlObj = null;

try {
    **responseXmlObj = unmarshall(samlDecoder(responseMessage));** 
```

希望答案对您有所帮助，因为我在应用以下内容后能够使这件事起作用

# video.js - Video.JS Flash 源 FLA 可用？

> ID：15441988
> 
> 赞同：1
> 
> 时间：2013-03-15T20:58:42.653
> 
> 标签：video.js

我正在尝试在需要 ADA 合规性的环境中使用 Video.JS。其中一部分是能够在 Flash 和 HTML5 版本的播放器中切换和激活所有视频控件。Video.JS 的内置选项卡的性能相当糟糕，尤其是在 Flash 中。我希望能够掌握 Video.JS Flash 播放器的 FLA 和源代码，以便我可以调整选项卡行为。有人知道我在哪里可以找到它吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:05:46.777

swf 组件的源代码在 Github：[https ://github.com/zencoder/video-js-swf](https://github.com/zencoder/video-js-swf)

# excel - 一个单元格可以同时具有数据验证和 vlookup 吗？

> ID：15441992
> 
> 赞同：3
> 
> 时间：2013-03-15T20:58:53.027
> 
> 标签：excel, vba

基本上我有2个细胞。一个是产品描述，一个是产品编号。它现在存在的方式是，产品描述是经过数据验证的，产品编号是按描述查找的。

我想要发生的是能够根据产品编号或产品描述进行查找，这样基本上如果我从下拉列表中选择产品编号，产品描述就是查找，如果我从下拉列表中选择产品描述产品编号是查找。

这是可能的还是我想错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T15:56:45.633

**像其他人一样回答一个古老的问题......**希望这对其他人也有帮助。另外，请参阅代码中的注释。

这不能使用 Excel 公式和验证来完成，因为它会创建**循环引用**[不是说您不能更改循环迭代的计数，但仍然......]

它在 VBA 中要简单得多......这是任何想要使用它的人的代码......

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Const sNumRng As String = "$A$1"
    Const sDescRng As String = "$B$1"
    '# both sListRngNum & sListRngDesc must be of the same size
    Const sListRngNum As String = "$K$1:$K$4"
    Const sListRngDesc As String = "$L$1:$L$4"

    '# EnableEvnent should be disabled first
    '# because the code will trigger it again
    '# by changing the next cell value
    Application.EnableEvents = False

    If Target.Address = sNumRng Then
       Range(sDescRng).Value = WorksheetFunction.Index(Range(sListRngDesc), _
       WorksheetFunction.Match(Target.Value, Range(sListRngNum), 0))
    ElseIf Target.Address = sDescRng Then
       Range(sNumRng).Value = WorksheetFunction.Index(Range(sListRngNum), _
       WorksheetFunction.Match(Target.Value, Range(sListRngDesc), 0))
    End If
    Application.EnableEvents = True
End Sub 
```

将此代码粘贴到要实现此功能的工作表的工作*表模块中。*根据您的需要更改范围地址。此外，这可以通过动态数组、集合等来完成。但是这很简单:)

# objective-c - 块并将对象作为参数传递

> ID：15441995
> 
> 赞同：0
> 
> 时间：2013-03-15T20:59:06.260
> 
> 标签：objective-c

我`dispatch_async`在那个调用中有一个调用我调用一个变量中定义的块

```
dispatch_async(kBgQueue, ^{
            proceedDataBlock(callbackObj, buffer, mbo);
            free(buffer);
        }); 
```

在“内部”块中，我使用缓冲区（const char *）做一些事情并创建一个 obj-c 对象并将其传递给我的回调obj，例如

```
Table *dataList = [[Table alloc] init ...];
[callbackObj performSelectorOnMainThread:@selector(recieveDataModelsFinished:) withObject:[dataList autorelease] waitUntilDone:YES]; 
```

我的回调 obj 确实

```
-(void)recieveDataModelsFinished:(TableDataList *)dataList
{
    self.tableDataList = dataList;
} 
```

定义为

```
@property (nonatomic, retain) TableDataList *tableDataList; 
```

为什么在我的回调完成后会为我的 Table 对象调用 dealloc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:18:39.673

我在 Apple 论坛上听到：“如果您仅在调试器中单步执行代码时收到该消息，那么这是调试器的一个已知问题。当您单步执行代码以获取它们的描述时，调试器消息对象。如果对象已解除分配但仍在范围内，调试器仍将向解除分配的对象发送消息，从而导致控制台输出有关向解除分配的实例发送消息的消息。” 所以我希望它是调试器的问题。

# visual-studio-2010 - VS2008 到 VS2010 - 有问题的配置和升级 - 新手

> ID：15441997
> 
> 赞同：0
> 
> 时间：2013-03-15T20:59:09.677
> 
> 标签：visual-studio-2010, debugging, upgrade

我在下面的开头用执行摘要更新了这个问题。然后，如果需要，将提供大量详细信息。感谢您的建议。

**执行摘要：** 我是 VS 的新手。我对一些继承的代码有疑问。代码在 VS2008 (XP64) 上构建和执行良好。相同的代码要么构建但不运行，要么无法在 XP64 或 W7 上构建 VS2008 和/或 VS2010。在更改了一些编译器选项后，我设法让它在 XP64 上的 VS2010 上运行而没有问题；但是，在 W7 上，没有运气。

我最终发现堆正在损坏。

> ae312i3.3.exe 中 0x76e540f2 (ntdll.dll) 处的未处理异常：0xC0000374：堆已损坏。

我不熟悉如何考虑修复堆问题；也许现有代码中指向另一个线程或程序正在使用的内存的指针存在问题，损坏的 ntdll.dll 文件，其他？

重新启动 PC 以检查 ntdll.dll 是否已损坏并没有帮助。更改调试设置，并收到以下反馈：

> HEAP[ae312i3.3.exe]：指定给 RtlSizeHeap(0000000000220000, 000000002BC8BE58) 的地址无效 Windows 已在 ae312i3.3.exe 中触发断点。
> 
> 这可能是由于堆损坏，这表明 ae312i3.3.exe 或其已加载的任何 DLL 中存在错误。这也可能是由于用户在 ae312i3.3.exe 获得焦点时按 F12。

**看来，当它崩溃时，C++ 正在将一个布尔变量返回到表单的表达式**

`While (myQueryFcn(inputvars))`

*   问题：

那么，它不是将 C++ 布尔值返回到 VB 布尔值吗？我确实相信这两者是不同的表示形式（一个使用 True/False，另一个使用整数？）这可能是一个问题吗？如果是这样，为什么它在 VB2008 中不是问题？**

**或者，也许是 C++ 代码已写入分配的内存，在返回 VB 时，它崩溃了？？？**

** 我最近了解到“Insure++”，并将尝试使用它来追踪问题。关于其使用的任何建议，其他可能的见解？**

我将不胜感激任何建议。再次感谢。

. . . . .

**导致上述摘要的详细信息（如下）：**

我是VS2010的新手；熟悉工程应用级别的编程（Python、Fortran，但自从我广泛使用 C++ 以来已经有几十年了），但不是专业程序员。

我有一个由多个项目组成的解决方案，全部在 VS2008 中。项目是：Reader（C++ 项目；利用 3rd 方 DLL）Query（C++ 项目；取决于 Reader） Main（VB；取决于 Reader 和 Query）。

**以下适用于 XP64 操作系统。** 解决方案和项目是由我以外的其他人编写、构建和发布的。我已经获取了现有文件，并制作了一个副本，放在我选择的目录中，然后在 VS2010 中打开（我的 PC 上没有安装 VS2008）。我能够成功构建（尽管有很多警告 - 稍后会详细介绍）；但是当我运行可执行文件时，它会到达一个点并崩溃。经过反复试验，我发现修改编译器设置为我解决了以下问题：

它将在 DEBUG 配置中构建和执行，但不是 Release。我发现在查询项目属性页/配置属性/C++/优化/优化-> 发布（x64）配置使用“最大化速度（/O2）而调试使用“禁用（/Od）”->所以我切换到'禁用（/ Od）。此外，Query 的项目属性页/配置属性/常规/整个程序优化 --> 需要设置为“使用链接时间代码生成”。

**以上构建并在VS2010的XP64上运行成功。**

**接下来，我只是简单地复制了文件，并在装有 VS2010 的 W7 机器上放置了一份副本。** 通过 2010 打开解决方案，它会自动“升级”文件。当我启动 VS2010 时，它会自动显示以下 4 个警告。他们是：

1.  用于运算符 '&' 的 Object 类型的操作数；可能会发生运行时错误。在文件“CobraIFile.vb”中，第 1845 行，第 37 列。
2.  完全一样的错误
3.  通过实例访问共享成员、常量成员、枚举成员或嵌套类型；将不评估限定表达式。在文件“FileWriter.vb”中，第 341 行，第 51 列
4.  用于运算符 '=' 的 Object 类型的操作数；使用“Is”运算符来测试对象身份。在文件'FormMain.vb'中；第 4173 行，第 32 列。

1 & 2 中的警告代码如下 ValueStr = String.Empty For iCols = 0 To DGrid.Columns.Count - 1 ValueStr &= DGrid.Item(iCols, iRows).Value & ";" // 这是警告线！！！下一个

警告 3 的代码：

```
 With FormMain
        WriteComment("")
        WriteComment("Generated by :")
        WriteComment("")
        WriteComment("  Program         : " & .PROGRAM.ToUpper) // THIS IS WARNING LINE!!! 
```

警告 4 的代码：

```
 ' Compare material against the material table
    For iRowMat As Integer = 0 To matCount - 1
        ' Ignore new row
        If Not .Rows(iRowMat).IsNewRow Then
            ' Check material description
            // LINE BELOW IS WARNING LINE!!!
            If .Item("ColMatDesc", iRowMat).Value = matDesc Then
                DataGridMatProp.Item("ColMatIdx", iRow).Value = .Item("ColMatFile", iRowMat).Value
                Exit For
            End If ' Check description
        End If ' Check new row
    Next iRowMat 
```

当我构建解决方案时，它将成功构建而没有错误（但有很多警告），当我运行可执行文件时，它成功加载 GUI，但在执行查询或阅读器项目时有时会崩溃（在使用 gui 执行操作后按钮）以及以下信息：

```
 C:\Users\mcgrete\AppData\Local\Temp\WER5D31.tmp.WERInternalMetadata.xml
    C:\Users\mcgrete\AppData\Local\Temp\WER68E6.tmp.appcompat.txt
    C:\Users\mcgrete\AppData\Local\Temp\WER722A.tmp.mdmp 
```

我无法利用上述三个文件中的信息（不知道如何考虑这样做）。

我在 W7 中收到的警告与 XP64 中的警告非常相似/如果不完全相同；它们大致为以下类型，其中有1,600多种。添加到上面之前列出的原始 4 个警告下方的警告类型。随着我在 XP64 上而不是 W7 上的成功运行，我假设/希望这些不需要单独解决，而只是警告。

1.  警告 C4267：'argument'：从 'size_t' 转换为 'int'，可能会丢失数据。C:\Users\mcgrete\Documents\iCOBRA\pts\p312\exec\win64\6111\include\atr_StringBase.h 351 1 阅读器
2.  警告 C4018: '<' : 有符号/无符号不匹配 C:\Users\mcgrete\Documents\iCOBRA\pts\p312\exec\win64\6111\include\omi_BlkBitVectTrav.h 69 1 Reader
3.  警告 C4244：“正在初始化”：从“双精度”转换为“浮点”，可能会丢失数据。C:\Users\mcgrete\Documents\iCOBRA\pts\p312\exec\win64\6111\include\g3d_Vector.h 76 1 阅读器
4.  警告 C4244：“正在初始化”：从“双精度”转换为“浮点”，可能会丢失数据。C:\Users\mcgrete\Documents\iCOBRA\pts\p312\exec\win64\6111\include\g3d_Vector.h 76 1 阅读器
5.  警告 C4800：“int”：强制值为 bool“true”或“false”（性能警告）。C:\Users\mcgrete\Documents\iCOBRA\pts\p312\exec\win64\6111\include\rgnC_Region.h 219 1 阅读器
6.  警告 LNK4006: "public: class ddr_ShortcutImpl const & __cdecl cow_COW,struct cow_Virtual > >::ConstGet(void)const" (?ConstGet@?$cow_COW@V?$ddr_ShortcutImpl@VkmaC_Material@@@@U?$cow_Virtual@V? $ddr_ShortcutImpl@VkmaC_Material@@@@@@@@QEBAAEBV?$ddr_ShortcutImpl@VkmaC_Material@@@@XZ) 已在 ABQDDB_Odb_import.lib(ABQDDB_Odb.dll) 中定义；第二个定义被忽略 C:\Users\mcgrete\Documents\iCOBRA\pts\p312\source\312i3.3\Reader\ABQSMAOdbCore_import.lib(ABQSMAOdbCore.dll) 阅读器
7.  警告 LNK4221：此目标文件未定义任何以前未定义的公共符号，因此任何使用此库的链接操作都不会使用它。C:\Users\mcgrete\Documents\iCOBRA\pts\p312\source\312i3.3\Reader\ABQSMAOdbCore_import.lib(ABQSMAOdbCore.dll) 阅读器
8.  警告 C4996：“sprintf”：此函数或变量可能不安全。考虑改用 sprintf_s。要禁用弃用，请使用 _CRT_SECURE_NO_WARNINGS。详细信息请参见在线帮助。C:\Users\mcgrete\Documents\iCOBRA\pts\p312\source\312i3.3\Query\Query.cpp 271 1 查询
9.  警告 MSB8004：输出目录不以斜杠结尾。此构建实例将添加斜杠，因为它需要允许正确评估输出目录。C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets 299 6 查询

**现在我的求助请求：**

我必须澄清一下，我愿意详细研究上面的警告；但是，我没有这样做，因为在投入这些精力并且没有编写代码开始之前，我只是想了解可能是真正的根本原因，然后将精力集中在那个方向上。

1.  我对遇到的 XP64 问题感到失望，并且不确定是否需要对配置进行更改，或者我所做的更改是否实际上只是对未识别问题的“解决方法”？
2.  我预计一旦 XP64 VS2010 版本的解决方案可以运行，它会毫无问题地转移到 W7，因为软件构建并在 VS2008 和 XP64 上运行良好。这是一个糟糕的假设吗？我可能会错过什么？
3.  我应该考虑再次尝试修改配置，还是根本原因可能与上述警告有关？如果出现警告，为什么它们在 VS2008 中显然不是问题 - VS2010 中的更改是否有效地导致了实际运行时错误的产生，而在 VS2008 中我幸运地“幸免”了痛苦？

我感谢任何有关如何进行的指导和见解，因为根据我有限的经验，从网络上的搜索来看，VS2010 中存在许多编译器错误或相关错误。不确定是否有任何与我的问题有关，如果大量警告实际上是一个问题并且代码需要大量清理，或者是否只是一些我可能必须处理的配置问题。

仅供参考 - 我安装的 VS2010 的最新更新/SP 是 VS10SP1-KB2736182.exe。我也尝试过使用调试器，但无法让它在我的 Query 或 Reader 项目代码中的断点处停止，即使在以管理员身份运行 VS2010 时也是如此。W7 确实安装了 .NET Framework 4.0 多目标包，并且我的解决方案配置为使用 .NET Framework 4.0 客户端配置文件。

提前致谢！

**更新 2013 年 3 月 18 日 我不知道如何回答我自己的问题，所以这里有一个更新。**

我仍然无法让调试器工作；所以，我用老式的方式来做——添加了各种 MessageBox 来找到它崩溃的地方。A. Main.vb 程序调用 'Query' 项目中的函数

```
OdbQueryGetIncrement(str_out, vec_ptr) 
```

B. 然后，函数 100% 执行，试图返回一个布尔值......这是添加了一些老式调试代码的代码......

```
 //Gets the next item in a list.
    // Returns false if there is the vector is empty.
    // NOTE: Once an element is returned it is removed from the list.
    bool __stdcall OdbQueryGetItem(
                    char* &str_out,  // RETURN Next item in list.
            void * vec_ptr, // Pointer to the vector of pointers.
            int index)  // Index of pointers vector to return next item of.
    {
        // Cast the point into an array of pointers
        std::vector<std::string>* *vec_temp = (std::vector<std::string>* *) vec_ptr;
        bool bool_out = false;

        char vectempsize[1000];
        int TEM1;
        char temp[1000];
        TEM1 = vec_temp[index]->size();
        // Check vector is valid
        if (vec_temp) {
            if(vec_temp[index]->size() >= index)
            {
                sprintf(temp,"value: %d\n",(int)bool_out);
                ::MessageBoxA(0, (LPCSTR) temp, (LPCSTR) "OdbQuery.dll - bool_out", MB_ICONINFORMATION);
                sprintf(temp,"value: %d\n",(int)index);
                ::MessageBoxA(0, (LPCSTR) temp, (LPCSTR) "OdbQuery.dll - index", MB_ICONINFORMATION);
                sprintf(vectempsize,"value: %d\n",(int)TEM1);
                ::MessageBoxA(0, (LPCSTR) temp, (LPCSTR) "OdbQuery.dll - index", MB_ICONINFORMATION);
            }

            if (!vec_temp[index]->empty()) {
                // Get the next item in the list
                std::string item = vec_temp[index]->front();
                // Initialise ouput string
                str_out = (char*)malloc( item.size()*sizeof(char) );
                sprintf(str_out, "%s", item.c_str());

                ::MessageBoxA(0,(LPCSTR) str_out, (LPCSTR) "hello", 0);
                // Remove first item from the vector
                vec_temp[index]->erase(vec_temp[index]->begin());
                bool_out = true;
            }
        }

      sprintf(temp,"value: %d\n",(int)bool_out);
      ::MessageBoxA(0, (LPCSTR) temp, (LPCSTR) "OdbQuery.dll - bool_out", MB_ICONINFORMATION);
      return bool_out;
    } 
```

代码按预期以 bool_out=false 开头（使用 MessageBox 值 = 0 输出验证） 代码读取并输出带有 MessageBox 的 index = 2... 代码读取并输出 TEM1=vec_temp[index]->size() 为带有 MessageBox 的 value=2... 代码将 bool_out 输出为带有 MessageBox 的 true (value=1)... 然后，代码崩溃。在调用上述代码的行之后放置的 MessageBox 永远不会被执行。VS2010 的输出是“程序'[6892] ae312i3.3.exe: Managed (v4.0.30319)' has exited with code -2147483645 (0x80000003).”

我不知道为什么从这个函数返回时执行会死掉。编译器设置或错误是否存在一些可能的问题？

任何帮助表示赞赏！

**更多信息**

您好，我修改了属性页面上的一些设置，试图让调试器给我更多信息。这导致更多信息如下：

> ae312i3.3.exe 中 0x76e540f2 (ntdll.dll) 处的未处理异常：0xC0000374：堆已损坏。

我不熟悉如何考虑修复堆问题；也许现有代码中指向另一个线程或程序正在使用的内存的指针存在问题，损坏的 ntdll.dll 文件，其他？

我将尝试重新启动 PC 以查看是否有帮助，尽管我对此没什么希望……没有帮助。

在调试器中找到“启用非托管代码调试”选项，检查它；清洁；重建; 运行调试...

输出更具描述性——

> HEAP[ae312i3.3.exe]：指定给 RtlSizeHeap(0000000000220000, 000000002BC8BE58) 的地址无效 Windows 已在 ae312i3.3.exe 中触发断点。

这可能是由于堆损坏，这表明 ae312i3.3.exe 或其已加载的任何 DLL 中存在错误。这也可能是由于用户在 ae312i3.3.exe 获得焦点时按 F12。

**看来，当它崩溃时，C++ 正在将一个布尔变量返回到表单的表达式**

`While (myQueryFcn(inputvars))`

**那么，它不是将 C++ 布尔值返回到 VB 布尔值吗？我确实相信这两者是不同的表示形式（一个使用 True/False，另一个使用整数？）这可能是一个问题吗？如果是这样，为什么它在 VB2008 中不是问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:06:39.503

我解决了自己的问题；问题的根本原因如下。

**根本原因：**

1.  VisualBasic (VB) 称为 C++。

2.  VB 创建一个字符串并发送到 C++。以前的开发人员/编码人员在 C++ 中为相同的字符串分配了内存。

3.  当 C++ 代码执行结束时，C++ 似乎已经终止了 VB 和 C++ 建立的内存分配。

**解决方案：** 1\. 删除 C++ 代码中的内存分配（下）。

```
str_out=(char*)malloc( (item.size()+1)*sizeof(char) ); 
```

2.  修改 VB 代码以使用 StringBuilder 类型，而不是字符串。

    将 str_out 调暗为 StringBuilder = 新 StringBuilder(5120)

请参阅：[从 c++ 函数返回字符串到 VB .Net](https://stackoverflow.com/questions/8049478/return-string-from-c-function-to-vb-net)

# r - 把长桌换成宽桌

> ID：15441998
> 
> 赞同：1
> 
> 时间：2013-03-15T20:59:14.190
> 
> 标签：r, data-manipulation

假设我有一张像这样的长桌：

```
A <- rep(c("a","b","c","d"),each=4)
B <- rep(c("e","f","g","h"),4)
C <- rep(c("i","j"),8)
D <- rnorm(16)
df <- data.frame(A,B,C,D)
head(df)

   A  B  C        D
1  a  e  i  -0.18984508
2  a  f  j  -1.82703822
3  a  g  i  -0.17307580
4  a  h  j  -1.38104238
5  b  e  i   0.08699983
6  b  f  j  -0.36442461 
```

我想将长表更改为宽格式，以便 A 列和 B 列中的每个元素都是列的标题。每行应该是 1 或 0，指示元素是否存在。C 列和 D 列保持不变。所需的表是这样的：

```
C           D a b e f g h
i -0.18984508 1 0 1 0 0 0
j -1.82703822 1 0 0 1 0 0
i -0.17307580 1 0 0 0 1 0
j -1.38104238 1 0 0 0 0 1
i  0.08699983 0 1 1 0 0 0
j -0.36442461 0 1 0 1 0 0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T21:30:11.617

这是一种可以通过`reshape2`包装完成的重塑形式。

```
library("reshape2")
dcast(melt(df, id.vars=c("C", "D")), C+D~value, fun.aggregate=length) 
```

这使

```
 C           D a b c d e f g h
1  i -1.44485242 0 1 0 0 0 0 1 0
2  i -0.80834639 0 0 0 1 0 0 1 0
3  i -0.15202085 0 0 0 1 1 0 0 0
4  i -0.05626233 1 0 0 0 1 0 0 0
5  i  0.12031754 1 0 0 0 0 0 1 0
6  i  0.62206658 0 0 1 0 0 0 1 0
7  i  0.77101891 0 1 0 0 1 0 0 0
8  i  1.38752097 0 0 1 0 1 0 0 0
9  j -2.52137154 0 0 0 1 0 0 0 1
10 j -0.53231537 0 1 0 0 0 0 0 1
11 j -0.30178539 1 0 0 0 0 0 0 1
12 j -0.29823112 1 0 0 0 0 1 0 0
13 j -0.12988540 0 1 0 0 0 1 0 0
14 j  0.00517754 0 0 1 0 0 1 0 0
15 j  0.51452289 0 0 1 0 0 0 0 1
16 j  0.53260223 0 0 0 1 0 1 0 0 
```

顺序与原始数据集不同，但如果这很重要，请放入一个顺序列，将其执行，然后在最后对其进行排序。