# StackOverflow 问答 14571000-14571999

# jquery - 使用 Jquery 将 json 返回数据附加到 html 中

> ID：14571001
> 
> 赞同：-1
> 
> 时间：2013-01-28T20:51:15.593
> 
> 标签：jquery, ajax, json

将 JSON 返回数据附加到 img src 标签的正确方法是什么？

**HTML**

* * *

```
<a class="bigImg rght" style="width:258px;">
<img src="" alt="Slide" width="298" height="224" /></a> 
```

## Ajax 函数调用：

```
 var parent_img = $(this).parent().find('img');

    success : function(data) {

    if (data.error === false)
    {
    parent_img.attr("src","http://www.test.com/index/"
    +text(data.client_id)+"/"+text(data.client_name)"").fadeIn(1000);
    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:54:27.997

删除它应该没问题`""`。`text(data.client_name)"")`

# c# - WPF 使用 byte[] 资源作为 XAML 图像

> ID：14571004
> 
> 赞同：0
> 
> 时间：2013-01-28T20:51:29.510
> 
> 标签：c#, wpf, xaml, resources, bytearray

如何将 resources.resx 中的 byte[] 资源添加到 XAML 图像？

我需要知道如何从 XAML 和 C# 中做到这一点，这是我一直无法找到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:25:10.987

[本文](http://support.microsoft.com/kb/324567)介绍如何使用 C# 从资源文件中获取图像。

直接在 XAML 中执行此操作更加困难，但是我创建了一个 MarkupExtension 来处理这种情况：[https](https://github.com/brschwalm/Vienna) ://github.com/brschwalm/Vienna 。

注意：当您说 byte[] 资源时，您是指资源文件中的图像/图标，还是实际的字节数组？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:32:22.600

如果您的图像定义如下：

```
<Image Source="{Binding ImageSource}" ... /> 
```

以下将对其进行更新：

```
this.ImageSource = new BitmapImage();
this.ImageSource.BeginInit();
this.ImageSource.StreamSource = new MemoryStream(byteArray);
this.ImageSource.EndInit(); 
```

# javascript - Photoshop 脚本：更改文本图层的文本

> ID：14571008
> 
> 赞同：10
> 
> 时间：2013-01-28T20:51:38.413
> 
> 标签：javascript, text, scripting, photoshop, layer

因为我没有足够的时间来学习所有关于 PS 脚本的知识，所以我想知道您是否可以帮助我。

这很简单。我想要一个 JS-Script，它改变了**Top Layer**的文本。例如：文本是“#005”，脚本应该加1，所以它说“#006”。之后，它应该使用当前编号 (006) 导出（保存为具有透明度 @ 1280x720 的 Web 和设备）文件。

这是图层的屏幕（*天哪，它是德语！！11*）：[imageshack.us/photo/my-images/706/helpal.png](http://imageshack.us/photo/my-images/706/helpal.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-29T05:26:25.410

> ## 编辑反对票：
> 
> **请**，为了帮助社区并避免误导/错误信息（如果我在这种情况下提供任何信息）从而使 StackOverflow 成为一个更好的地方，请在下面添加评论，说明是什么让您认为代码或方向值得反对。如果有任何**错误**或误导，我会再学习一件事，对此我将不胜感激。

首先，您需要创建一个动作。

1.  `.jsx`使用扩展名保存以下代码。
2.  打开您拥有的其中一张图片
3.  创建一个新动作并按下面板下方的记录按钮（如果它尚未处于活动状态）
4.  转到`File > Scripts > Browse`并选择该脚本
5.  停止动作记录
6.  转到创建文件的文件夹并删除该新文件

然后，您将需要自动化所有这些。**没有打开的**文件，

1.  去`File > Automate > Batch`
2.  从选项中选择必要的“Set”和“Action”名称
3.  对于“源”，保持选中“文件夹”，然后通过单击“选择...”按钮选择包含分层文件的文件夹
4.  这可能不是必需的（取决于您的颜色设置），但您可以选择第 3 和第 4 个选项：`Suppress File Open Options Dialogs`和`Suppress Color Profile Warnings`. 由于在录制时您没有包括*打开文件*的操作，因此未选择第一个选项`Override Action Open Commands`。否则它不会打开任何文件，但它仍然会尝试执行脚本 * 文件数。`Include All Subfolders`必要时选择第二个选项。
5.  单击“确定”按钮。

**对于那些使用 CS6 的人来说，还有一点：** [Adobe Developer Connection](http://www.adobe.com/devnet/photoshop/scripting.html)表明……</p>

> Adobe Photoshop CS6 不安装 Scripting 文件夹。请使用以下链接手动安装示例、文档和脚本侦听器插件。

```
function getTextLayer(target) {
// this basically loops all the layers to find the
// upmost text layer with the content #nn... and returns it
    if (target == null) return false;
    var layers      = target.layers,
        layerLen    = layers.length;
    for (var i = 0; i < layerLen; i++) {
        var layer       = layers[i],
            isLayerSet  = layer.typename == 'LayerSet',
            isValid     = layer.kind == LayerKind.TEXT &&
                          /^\s*#\d+\s*$/.test(layer.textItem.contents);
            // we're allowing spaces around the text just in case
        if (!isLayerSet && !isValid) continue;
        if (isLayerSet) {
            var found = getTextLayer(layer);
            if (found) return found;
        } else return layer;
    }
    return false;
}

var doc;
try {
    doc = app.activeDocument;
    // the front document
} catch(e) {}
var txtLayer = getTextLayer(doc);
// obviously, the text layer if found

if (txtLayer) {
    var num = txtLayer.textItem.contents.match(/\d+/)[0],
    // find the numeric part
        len = num.length,
    // find the length of the numeric part
        num = (parseInt(num,10)+1).toString();
    // add 1 to that number
    while (num.length < len) num = '0' + num;
    // and adjust length if necessary so that e.g.
    // 032 will not become 33 but it will become 033
    txtLayer.textItem.contents = '#' + num;
    // update layer content
    var ext = '.png',
        dir = decodeURI(doc.path) + '/png24',
        // to use the same directory where the layered file exists
        // just keep it as decodeURI(doc.path)
        // I added a folder here, which actually does not exist
        // but it doesn't matter because I'm making it create it
        // below in case there's no such directory.
        fileName = dir + '/' + num + ext,
        i = 0;
    if (!Folder(dir).exists) Folder(dir).create();
    // create the directory if it doesn't exist
    while (File(fileName).exists)
        fileName = dir + '/' + num + '-' + (++i) + ext;
    // if file with that name exists, add -n to the end of the name
    var file = new File(fileName),
        opts = new ExportOptionsSaveForWeb();
    with (opts) {
        format = SaveDocumentType.PNG;
        PNG8 = false;
    }
    doc.exportDocument(file, ExportType.SAVEFORWEB, opts);
    // save for web
}
if (doc) {
    doc.close(SaveOptions.DONOTSAVECHANGES);
    // close the original layered document without saving
}
doc = null;
// remove reference 
```

# javascript - Arshaw fullcalender 在月视图的每个单元格中添加自定义 html

> ID：14571009
> 
> 赞同：1
> 
> 时间：2013-01-28T20:51:43.467
> 
> 标签：javascript, ajax, calendar, asp.net-ajax

我试图在呈现时在月视图的每个单元格中插入一个自定义 html 表。为此，我使用 ajax 调用服务。该服务返回一个我输入到单元格中的 html 表格。

为此，我在 fullcalender.js 中输入了以下代码

```
bodyCells.each(function (i, _cell) {
                cell = $(_cell);
                date = indexDate(i);
                if (date.getMonth() == month) {
                    cell.removeClass('fc-other-month');
                } else {
                    cell.addClass('fc-other-month');
                }
                if (+date == +today) {
                    cell.addClass(tm + '-state-highlight fc-today');
                } else {
                    cell.removeClass(tm + '-state-highlight fc-today');
                }
                cell.find('div.fc-day-number').text(date.getDate());

                //Paras Change
                $(CallService(date)).appendTo(cell.find('div.fc-day-content').empty());

                if (dowDirty) {
                    setDayID(cell, date);
                }

            }); 
```

在函数“bodyCells.each”中。其中 CallService 是我对函数的调用，该函数又调用服务。

我对服务的调用在另一个 javascript 文件 fullcalenderDataHelp.js 中，代码如下。

```
function CallService(date) {
    var table = null;
    var newDate = (date.getMonth() + 1) + '/' + (date.getDate()) + '/'+date.getFullYear();
    $.ajax({
        type: "POST",
        url: "http://localhost:57747/ScheduleServer.svc/GetScheduleByDay",
        data: '{"day":"' + newDate + '"}',
        timeout: 7000,
        contentType: "application/json",
        success: function (response, textStatus, jqXHR) {
            table = $.parseJSON(response.d)
        }
    })

   //alert(table);   
   return table;

} 
```

它在 html 表被硬编码时工作，但是当我进行实际的 ajax 调用并尝试显示 html 表时，它似乎不起作用。我认为ajax调用需要更多时间或其他东西。

我将不胜感激。

谢谢，帕拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-26T15:16:22.157

我知道这是一个旧帖子。自从我提出这个问题并在我的项目中使用它以来，日历插件本身已经走了很长一段路。这与版本 1.5.4 相关。不知道您是否仍然可以在当前版本中使用它。我在下面提到的 plunk 中有原始的 fullcalender.js。

我最初的问题是关于如何在月视图的每个单元格中添加自定义 HTML。

我在发布问题后的几天内找到了答案，但当时我没有常识将其发布在这里。我一直认为我可能会从可能会回答它的专家那里得到更好的方法。

那一天从未到来。我今天尝试访问该网站，看看这是否是更高版本中包含的功能，但我找不到任何相关的东西。

答案被证明是微不足道的。在 bodyCells.each 的函数中，我添加了一行代码，如下所示。

```
$(CallService(date)).appendTo(cell.find('div.fc-day-content').empty()); 
```

`CallService(date)`是返回一些 html 的函数，该 html 被附加到包含作为参数传递的日期的单元格中。

这是一个工作的[plunker](https://plnkr.co/edit/eM6S5w6KEGXi8MFDY7Xh?p=preview)。

不过要记住一件事。在加载月视图上的每个单元格之前调用此函数。这意味着此函数调用将导致延迟。

希望这可以帮助任何需要在基本全日历月视图中自定义 HTML 的人。

# jquery - 在 Django 中使用 Ajax Get/Post 方法

> ID：14571014
> 
> 赞同：0
> 
> 时间：2013-01-28T20:52:13.973
> 
> 标签：jquery, ajax, django, post, get

我对客户端代码很陌生，在服务器端（特别是 Django）方面完全一无所知。我试图做的是单击一个向服务器发送获取请求的按钮，然后将其发布在页面上（使用[jGlideMenu](http://www.jqueryplugins.com/plugin/27/)）。

我知道代码应该如下所示：

```
 $('#clickID').click(function(){
            $.ajax({
                url:"someURLGoesHere",
                type: 'GET',
                success: function(data){
                    $('#someEl_2').html(data)
                },
                dataType: JSON
            });
        }); 
```

我不知道该 URL 使用什么。我需要参考 url.py 文件吗？意见.py？模型.py？也许其中一个文件中有一个特定的变量？我还需要使用相对目录吗？

我发现的所有教程都使用 PHP，所以我不确定它是否相同。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:58:45.780

如果你想从你的 Django 应用中插入内容，你可以使用 jQuery 的[`load()`](http://api.jquery.com/load/)方法：

```
$('#result').load('path/to/script.py'); 
```

您将需要点击一个可公开访问的 Python 脚本。而对于其他 MVC 框架，您会点击控制器，因为[Django 的方法略有不同](http://www.djangobook.com/en/2.0/chapter05.html#the-mtv-or-mvc-development-pattern)，您将需要点击视图，因为这些控制对您的模型的访问并处理大部分业务逻辑：

> 在 Django 对 MVC 的解释中，“视图”描述了呈现给用户的数据；不一定只是数据的外观，而是呈现哪些数据。相比之下，Ruby on Rails 和类似框架建议控制器的工作包括决定将哪些数据呈现给用户，而视图严格来说是数据的外观，而不是呈现哪些数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:59:46.120

您输入您设置的任何 URL，以转到相应的函数来处理 views.py 文件中的数据。如果你的 urls.py 中有这个：

`url(r'^/testing$','proj.app.testing')`你会投入`'/testing'`你的ajax请求。

# xcode - Entity中属性的核心数据数量

> ID：14571017
> 
> 赞同：0
> 
> 时间：2013-01-28T20:52:17.227
> 
> 标签：xcode, core-data

我是核心数据的新手，我希望在下面的代码中提供一些帮助，我需要显示实体中的属性数量；

```
 - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];

    //NSUInteger attributeCount = [[[object entity] attributesByName] count];
    float valueSF = 0;
    for (NSManagedObject *object in [sectionInfo objects]) {
        NSUInteger attributeCount = [[[object entity] attributesByName] count];
        valueSF += [[object valueForKey:@"value"] floatValue];
        valueSF = valueSF / attributeCount;
    }
    return [NSString stringWithFormat:@"[Average = %.03f] [Cases = %i]", valueSF, [[sectionInfo objects] count]];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:09:04.847

Core Data 提供了很好的内省。假设您的意思是为数据模型中的实体实际声明的属性数量，您需要：

```
NSUInteger attributeCount = [[[object entity] attributesByName] count]; 
```

如果要包括关系数，请替换`attributesByName`为`propertiesByName`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-20T14:56:38.310

现在很容易。通过以下函数捕获的特定实体的属性数：

```
NSInteger count=[managedObjectContext countForFetchRequest:fetchRequest error:&error]; 
```

# flash - 是否有允许访问控件和内容的 Flash API？

> ID：14571026
> 
> 赞同：0
> 
> 时间：2013-01-28T20:53:02.047
> 
> 标签：flash, api

我正在寻找一种 API，它允许外部程序访问 Flash 对象的内部，例如控件及其属性。.net 或 Java 应用程序是否可以通过这种方式与 flash 对象交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:53:25.527

看看这个线程：

[在 C# WinForms 应用程序中显示 Flash 内容](https://stackoverflow.com/questions/1037/displaying-flash-content-in-a-c-sharp-winforms-application)

在 .NET 中，您可以使用 Shockwave Flash 对象。我相信您可以从那里访问属性。

# javascript - 逗号运算符作为回报

> ID：14571030
> 
> 赞同：0
> 
> 时间：2013-01-28T20:53:20.527
> 
> 标签：javascript, comma-operator

我正在从一页阅读 JS，这就是我发现的（源代码已被 google chrome 开发工具反混淆）：

```
var db = function(a) {
    return a.replace(/[^\w\s\.\|`]/g, 
    function(b) {
        return "\\" + b
    })
}; 
```

第一个逗号运算符操作数（那个`a.replace()`）有什么技巧吗？

从我的角度来看，这`a.replace(/[^\w\s\.\|``]/g,`部分是完全多余的，可以删除。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T20:56:03.533

它不是[逗号运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)，而是一个简单的调用[参数列表](http://es5.github.com/#x11.2.4)`.replace`- 注意括号。

你的去混淆器最好应该像这样缩进它：

```
return a.replace(/[^\w\s\.\|`]/g, function(b) {
    return "\\" + b;
}); 
```

顺便说一句，该函数可以替换为简单的 string `"\\$&"`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T20:56:19.907

没有逗号运算符。

请参阅[替换文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)

```
newstring = str.replace(regexp, function); 
```

糟糕的格式使其难以阅读。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T20:57:47.430

基本上是在做

```
a.replace(/([^\w\s\.\|`])/g, "\\$1"); 
```

# java - 如何使用paintComponent() 绘制不同的对象？

> ID：14571032
> 
> 赞同：1
> 
> 时间：2013-01-28T20:53:25.150
> 
> 标签：java, swing, jpanel, graphics2d, paintcomponent

我正在尝试在`JPanel`. 我正在绘制形状（作品），并且我还想用图片填充 JPanel。但`paintComponent()`只接受一个论点。当我有一些额外的代码来绘制形状时，这会变得复杂。

我的paintComponent() 方法目前是这样的：

```
public void paintComponent(Graphics g) {

    g2 = (Graphics2D) g;
    for (int i = 0; i < shapes.size(); i++) {
        Shape s = (Shape) shapes.get(i);
        if (s != null)
            g2.draw(s);
    }
} 
```

我已经搜索了很多，但找不到这样做的方法。

有谁知道如何做到这一点，或者可能有一些解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:58:47.230

就像您绘制形状的方法一样，您需要维护对要在类中绘制的图像的引用，并以几乎相同的方式引用它们。

以下是在`paintComponent`各种主题中绘制图像的所有示例

*   [JFrame中的BufferedImage不显示](https://stackoverflow.com/questions/13188417/bufferedimage-in-jframe-doesnt-show-up/13188512#13188512)
*   [自动缩放 ImageIcon 到标签大小](https://stackoverflow.com/questions/14548808/scale-the-imageicon-automatically-to-label-size/14553003#14553003)
*   [Jpanel在重绘时调整大小](https://stackoverflow.com/questions/12797933/jpanel-resize-on-repaint/12798480#12798480)

Nb - 我可能误读了这个，但你永远不应该打电话给`paintComponent`自己。它由 Swing 中的重绘引擎代表您调用

# google-chrome-extension - 使用 chrome.socket 模块时 resultCodes 的定义

> ID：14571034
> 
> 赞同：1
> 
> 时间：2013-01-28T20:53:38.020
> 
> 标签：google-chrome-extension, google-chrome-app

`chrome.socket.read`回调将返回一个包含`ReadInfo`属性的对象`resultCode`。这要么包含读取的字节数，要么包含指示错误的负整数。

我一直在寻找负面结果代码的定义，因为我偶尔会得到一个`-15`似乎在一个端点关闭时发生的情况。

尝试查看[参考文档](http://developer.chrome.com/apps/socket.html)和[源代码](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/common/extensions/api/socket.idl?view=markup)本身，但我无法弄清楚 resultCodes 的定义位置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T05:06:45.330

错误代码似乎是 net::ERROR_XXXX 的错误代码，可以在 [http://src.chromium.org/svn/trunk/src/net/base/net_error_list.h找到](http://src.chromium.org/svn/trunk/src/net/base/net_error_list.h)

但是，依赖这些错误代码可能不是一个好主意，因为它没有记录在案并且可能随时更改。

# php - 加入多行相同的表

> ID：14571039
> 
> 赞同：2
> 
> 时间：2013-01-28T20:53:45.087
> 
> 标签：php, sql

我正在尝试从 1 个表中提取 2 组不同的数据。我不太确定如何解决这个问题。这是当前设置的表（相关）。

```
+----+-----------+----------+------+------------+--------+--------+
| id | recipient | given_by | time | expiration | points | reason |
+----+-----------+----------+------+------------+--------+--------+
|  1 |   72      |     1    | time |    time    |   2    |  test  |
|  3 |   15      |     4    | time |    time    |   5    |  test  |
+----+-----------+----------+------+------------+--------+--------+

+----+----------+
| id | username |
+----+----------+
| 1  |   admin  |
| 4  |   user4  |
...
| 15 |  user15  |
...
| 72 |  user72  |
+----+----------+ 
```

通过使用以下查询，我能够让收件人与姓名相匹配：

```
SELECT 
   usr.username, usr.id,  sl.recipient, sl.given_by, 
   sl.time, sl.experation, sl.points, sl.reason
FROM 
    DD_users AS usr
LEFT JOIN
    DD_schittlist AS sl
ON (sl.recipient = usr.id)       
GROUP BY
        usr.id
ORDER BY 
        sl.points DESC,
        usr.username 
```

这将使收件人 72 与 user72 相匹配，但我也想让 given by 1 显示 admin 和 given_by 4 显示为 user4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:58:30.523

试试这个：（您需要做的就是为 DD_users 表的第二个引用添加别名并添加第二个连接语句，然后在您的选择语句中引用别名用户名列。）

```
 SELECT 
    usr.username, usr.id,  sl.recipient, sl.given_by, usr2.username, sl.time, sl.experation, sl.points, sl.reason
  FROM 
    DD_users AS usr
  LEFT JOIN DD_schittlist AS sl  ON (sl.recipient = usr.id)    
  JOIN DD_users as usr2 ON (usr2.id = sl.given_by)   
  GROUP BY
    usr.id
  ORDER BY 
    sl.points DESC,
    usr.username 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T20:57:08.707

`DD_users`您需要在桌子上加入两次，一次用于`id`您已经拥有的，另一次用于`given_by`. 每个都有自己的别名，必须在`SELECT`列表中使用它来消除它们的歧义（`usr, given`）

```
 SELECT 
    /* The original username you already had */
    usr.username, 
    usr.id,  
    sl.recipient, 
    sl.given_by, 
    /* The given_by username from the given alias table */
    /* Be sure to alias this column here as well to differentiate them in the client */
    given.username AS given_by_username,
    sl.time, 
    sl.experation, 
    sl.points, 
    sl.reason
  FROM 
    DD_users AS usr
    /* First join you already had between id and recipient */
    LEFT JOIN DD_schittlist AS sl ON (sl.recipient = usr.id)       
    /* A second LEFT JOIN between DD_shittlist and DD_users as given */
    /* (LEFT JOIN permits nulls in DD_shittlist.given_by) */
    LEFT JOIN DD_users AS given ON sl.given_by = given.id
  GROUP BY
    usr.id
  ORDER BY 
    sl.points DESC,
    usr.username 
```

# file - 无法在 Drupal 7 多站点上上传任何文件

> ID：14571040
> 
> 赞同：1
> 
> 时间：2013-01-28T20:53:45.003
> 
> 标签：file, permissions, drupal-7

我有一个多站点 Drupal 7 设置。我刚刚注意到，在我正在处理的那个上，我根本无法上传任何文件。我尝试在它的文件浏览器中使用文件上传和 IMCE。我只是不断收到无法上传通用文件的错误。我在共享系统上还有另外两个站点，它们运行良好。我已经检查并重新检查了所有文件权限和所有权，它们完全一样。管理部分中所有三个 Drupal 站点上的所有文件设置、权限等都是相同的。我不知道下一步该往哪里看。服务器错误日志以及 Drupal 中的 dblog 都没有帮助。任何想法都会很棒，因为我已经研究这个太久了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:08:04.470

看来我终于解决了这个问题。该解决方案似乎仍然没有任何意义，但它确实有效。我不得不将组所有权更改为 apache 而不是默认的 Plesk 所有者。其他网站以 Plesk 的身份与群组所有者合作，因此对我来说没有意义。至少它有效。

# asp.net - 如何在公司内部数据库和外部托管应用程序的数据库之间同步数据

> ID：14571045
> 
> 赞同：3
> 
> 时间：2013-01-28T20:54:07.770
> 
> 标签：asp.net, hosting, database-replication

我的组织（一个小型​​非营利组织）目前有一个带有 SQL Server 数据库的内部生产 .NET 系统。客户（我们地区的所有本地人）手动提交请求，然后我们的办公室工作人员将其输入系统。

我们现在正在为在线公共访问做准备，以便客户能够在线查看他们现有请求的状态，并且将来还能够在线创建新请求。将为此开发一个新的 asp.net 应用程序。

我们正在尝试决定是在我们的服务器上现场托管此应用程序（直接访问现有数据库）还是使用外部托管服务提供商。在外部托管意味着在托管服务提供商的服务器上保留一份 Requests 数据库的副本。那么，在托管数据库和我们现有的生产数据库之间保持请求数据实时同步的推荐方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:57:34.457

尝试在两个正在使用的数据库之间来回同步将是一个经常令人头疼的问题。我要问你的问题是，如果你有办法在现场托管应用程序，你为什么不走那条路？

如果您有充分的理由不在现场托管，但您确实有一些可用的 Web 基础设施，您可能需要考虑创建一个 Web 服务，该服务通过一组明确定义的方法提供对您的数据库的访问。或者，另一方面，您可以将与您的网站远程托管的数据库作为您的生产数据库，并使用 Web 服务从您的办公系统访问它。

在任何一种情况下，提供对单个数据库的访问都将比尝试保持两个不同的数据库不断且完美地同步要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:38:35.693

如果 Web 服务不实用（或者您担心可用性），您可能需要考虑使用排队系统进行同步。对数据库（本地或托管）的任何更改也会添加到消息传递队列中。每一方都监视队列中需要进行的更改，然后应用更改。这将解释在任何给定时间都不可用的数据库之一。

话虽如此，我同意@LeviBotelho，同步两个数据库是一场噩梦，如果可以的话，应该避免。如果必须，您还可以查看 SQL Server 复制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:05:28.547

最终数据是一样的，客户提交的数据。目前是他们通过你输入的，最终还是他们直接输入的，我看没必要有两个不同的数据库有相同的数据。仅当它们会弹出（并且它们会）出现复制错误时，您的团队将毫无头绪。

# css - 春天 mvc + css + 瓷砖

> ID：14571060
> 
> 赞同：0
> 
> 时间：2013-01-28T20:54:35.207
> 
> 标签：css, spring, tiles

我正在使用弹簧 mvc + 瓷砖。在我的 web.xml 我有

```
<servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping> 
```

在我的调度员服务器中，我有

```
<mvc:annotation-driven />
<mvc:resources mapping="/resources/**" location="/resources/" /> 
```

在我的jsp中

```
<link href="<c:url value="/resources/template/style.css"/>" rel="stylesheet" type="text/css" /> 
```

但是没有加载css！！！！错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:38:34.607

改成

```
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

# php - 通过按 iPhone 上的主页按钮销毁网站上的 $_session

> ID：14571062
> 
> 赞同：-1
> 
> 时间：2013-01-28T20:54:43.083
> 
> 标签：php, javascript, iphone, session

当导航器关闭时，我需要在 php 中销毁用户会话。当按下主页按钮关闭导航器时，我的脚本工作正常，但不适用于 iPhone 或其他设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:02:42.637

当您离开应用程序时，手机通常会暂停（相对于关闭）浏览器。您可以通过设置较低的 session.gc_maxlifetime 来在超时后销毁会话，并让一些客户端 js 不时地对服务器执行 ping 操作，以在应用程序未挂起时保持会话打开。YMMV。

您还可以调查 window.onbeforeunload 事件以查看它是否被触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:05:36.423

您是否尝试过使用[`window.onbeforeunload`](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)来触发 AJAX 调用？

```
window.onbeforeunload = function() {
    $.ajax({
       type: "POST",
       url: "path/to/script.php",
       async: false
    });
}; 
```

# visual-studio - TFS 自定义签入策略不在添加框中

> ID：14571063
> 
> 赞同：3
> 
> 时间：2013-01-28T20:54:44.853
> 
> 标签：visual-studio, tfs, visual-studio-2012

我已按照此网站上的步骤：http: [//msdn.microsoft.com/en-us/library/bb668980.aspx](http://msdn.microsoft.com/en-us/library/bb668980.aspx)创建 TFS 自定义签入策略。我已经按照它的建议更新了注册表，除了 Visual Studio 11.0 而不是 8.0

在 Visual Studio 2012 -> 团队资源管理器 -> 设置 -> 源代码管理 -> 签入策略选项卡中，我单击添加。我看到 4 项政策，但我的未列出。

我的电脑上安装了 VS 2012。我使用 VS2012 创建了策略 dll 并引用了 11.0 Microsoft.TeamFoundation.VersionControl.Client 程序集。

请注意 TFS 2010 安装在源代码控制服务器上。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T07:29:01.810

如果您的操作系统是 64 位，则必须在**Wow6432Node**下添加签入策略，而不是 MSDN 上所述的路径：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\11.0\TeamFoundation\SourceControl\Checkin Policies 
```

**更新**

至少在通过扩展名 (.vsix) 安装策略时使用的备用注册表路径是

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0_Config\TeamFoundation\SourceControl\Checkin Policies 
```

# tcsh - tcsh，找不到命令

> ID：14571064
> 
> 赞同：2
> 
> 时间：2013-01-28T20:54:51.897
> 
> 标签：tcsh

我试图用命令运行一个可执行的'crcor'

```
ben-Aspire-S3-391:/usr/local/src/runz% /usr/local/src/runz/crcor
/usr/local/src/runz/crcor: Command not found. 
```

我已在另一台机器上成功运行代码，但无法在这台机器上重现结果。

在两台机器上， `which sh`返回`/bin/sh`

但是 在工作机器和不工作机器上`echo $shell`返回。`/bin/tcsh``/usr/bin/tcsh`

任何有关如何诊断两者之间差异以帮助我运行的提示都会很棒。

Edit1:crcor 是链接到 fortran 代码的可执行文件 Edit2: 已编辑拼写，'/usr/bin/tsch' --> '/usr/bin/tcsh'

解决方案：在我的系统（64 位）上安装 32 位库已解决该问题。工作版本上的“ldd”命令显示它被识别为动态可执行文件，但在非工作版本上它未被识别为动态可执行文件。特别是安装了 ia32-libs。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:17:48.760

解决方案：在我的系统（64 位）上安装 32 位库已解决该问题。工作版本上的“ldd”命令显示它被识别为动态可执行文件，但在非工作版本上它未被识别为动态可执行文件。特别是安装了 ia32-libs。

# wpf - 是否可以在 c# 中显示、隐藏和操作 Windows 8 屏幕键盘？

> ID：14571065
> 
> 赞同：2
> 
> 时间：2013-01-28T20:55:07.510
> 
> 标签：wpf, windows-8, on-screen-keyboard

我正在制作一个 WPF 应用程序，该应用程序将在没有硬件键盘的信息亭上使用。目前我们正在使用第三方屏幕键盘，但 Windows 8 版本要好得多，我们正在考虑切换到它。

所以我的问题很简单，是否可以显示/隐藏它以及使用 c# 显示仅数字版本。

谢谢！大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T01:17:04.900

从[这个来源](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/17d2486f-abbb-4352-9aaf-5a457128678a)：

> 没有直接的方法来以编程方式控制触摸键盘。要求用户设置焦点而不是程序是为了防止 UI 流失而经过深思熟虑的设计决定。
> 
> 请参阅[Input Hosting Manager 和 Touch Keyboard](http://msdn.microsoft.com/en-us/library/windows/apps/hh465404.aspx)，了解有关其工作原理和原因的更多信息。该文档的[用户驱动调用](http://msdn.microsoft.com/en-us/library/windows/apps/hh465404.aspx#user-driven_invocation)部分解释了您所询问的特定行为。

但是，一旦用户触摸输入控件，软键盘将自动显示（无需额外编码）。

最后，为了解决您在纯数字键盘上的问题，您可以在 TextBox 上使用[InputScope](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.textbox.inputscope.aspx)提出不同的键盘布局。[这里](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.input.inputscopenamevalue.aspx)列举了不同的输入范围，但其中之一是“数字”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-13T19:38:44.043

我已经发布了一个关于如何在用户单击文本框时触发 WPF 应用程序中的触摸键盘的示例，它在这里：

[http://code.msdn.microsoft.com/Enabling-Windows-8-Touch-7fb4e6de](http://code.msdn.microsoft.com/Enabling-Windows-8-Touch-7fb4e6de)

我已经为这个样本工作了好几个月，很高兴最终将它贡献给我们的社区。如果在示例问答窗格中有任何问题、建议、问题等，请告诉我

另请注意，在演示如何“显示”键盘时，我不确定此时如何以编程方式将其关闭，因此测试任何实际实现以确保其良好体验很重要。例如，某些控件（例如 Button）在从 TextBox 获得焦点时会关闭键盘，但某些控件（例如 Checkbox）不会，我在示例中对此进行了演示。

# python - 修改前序树遍历到 Python 结构

> ID：14571067
> 
> 赞同：2
> 
> 时间：2013-01-28T20:55:14.680
> 
> 标签：python, jstree, mptt

嗨，我正在尝试将 Modified-Preorder-Tree-Traversal 表示为 Python 结构，然后我可以输出到 json，因为我当前的目标是在[jstree中显示树](http://www.jstree.com/)

假设我有一个如图所示的表 [http://imrannazar.com/Modified-Preorder-Tree-Traversal](http://imrannazar.com/Modified-Preorder-Tree-Traversal)（在我的情况下，每一行也有一个 parent_id），就像这样

```
 Node ID   Name       Left MPTT value     Right MPTT value       ParentID
     1       (Root)             1                 16                   -1
     2       Articles           2                 11                    1
     5       Fiction            3                 8                     2
     7       Fantasy            4                 5                     5
     8       Sci-fi             6                 7                     5
     6       Reference          9                 10                    2
     3       Portfolio          12                13                    1
     4       Contact            14                15                    1 
```

jstree 的 Json 格式就像

```
 [
      {
       "data" : "Root",
       "children" : [ 
           {
              "data":"Articles",
               "children : [
                             {"data":"Fiction"},
                             {"data":"Reference"}
                            ]
           },
           {"data":"Portfolio"},
           {"data":"Contact"}]
      },
    ] 
```

如何将上表转换为 Python 格式以输出此 json。

我想过以某种方式使用嵌套字典，如下所示

```
 class NestedDict(dict):
        def __missing__(self, key):
            return self.setdefault(key, NestedDict()) 
```

不确定我需要的算法。

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:54:40.393

你真的应该尝试自己做，展示你做了什么，哪里没用。但是我有几分钟的空闲时间，所以...

要解析表格，您可以使用该[`csv`](http://docs.python.org/2/library/csv.html)模块。我会把它留给你。

可能不是最佳解决方案，但这会做到：

```
datain = (
    (1,'Root',1,16,-1),
    (2,'Articles',2,11,1),
    (5,'Fiction',3,8,2),
    (7,'Fantasy',4,5,5),
    (8,'Sci-fi',6,7,5),
    (6,'Reference',9,10,2),
    (3,'Portfolio',12,13,1),
    (4,'Contact',14,15,1),
    )

def convert_to_json(data):
    node_index = dict()
    parent_index = dict()
    for node in data:
        node_index[node[0]] = node
        parent_index.setdefault(node[4],[]).append(node)

    def process_node(index):
        result = { 'data' : node_index[index][1] }
        for node in parent_index.get(index,[]):
            result.setdefault('children',[]).append(process_node(node[0]))
        return result

    node = process_node(1)
    return [node] 
```

回报：

```
[
    {
        'data': 'Root',
        'children': [
            {
                'data': 'Articles',
                'children': [
                    {
                        'data': 'Fiction',
                        'children': [
                            { 'data': 'Fantasy' },
                            { 'data': 'Sci-fi' }
                            ]
                    },
                    { 'data': 'Reference' }
                ]
            }, 
            { 'data': 'Portfolio' },
            { 'data': 'Contact' }
        ]
    }
] 
```

# php - 限制子页面的数量

> ID：14571073
> 
> 赞同：0
> 
> 时间：2013-01-28T20:55:44.360
> 
> 标签：php, wordpress

我有这个html结构：

```
<home>
 <Web>
   <web 1>
   <web 2>
   <web 3>
   <web 4>
   <web 5>
   <web 6>
   <web 7>
 </web>
 <Print>
   <Print 1>
   <Print 2>
   <Print 3>
   <Print 4>
   <Print 5>
 </print>
 <Art>
   <Art 1>
   <Art 2>
   <Art 3>
   <Art 4>
   <Art 5>
   <Art 6>
 </art>
</home> 
```

我用它来显示孙子内容，同时隐藏其父项

```
<?php $counter = 1 ?>
<div class="row-fluid">

<?php 
if ( have_posts() ) {
while ( have_posts() ) {
the_post();

$args=array(
        'orderby' => 'menu_order',
        'order' => 'ASC',
        'posts_per_page' => -1,
'post__not_in' => array(4,368,358,354),
        'post_type' => 'page',
        'post__in' => $pageIDs
);

$childpages = new WP_Query($args);

if($childpages->post_count > 0) { /* display the children content  */
    while ($childpages->have_posts()) {
         $childpages->the_post(); ?>
<div class="span4">
            <?php 
        echo "<h2>".get_the_title()."</h2>";
                echo the_content(); 
    ?>
</div>
<? if ($counter % 3 == 0): ?>
</div>
<div class="row-fluid">
    <?php endif; ?>
<?php $counter++; ?>

   <?php }
}
wp_reset_query();
}
}

?>
</div> 
```

在显示所有孙子的那一刻，我如何将孙子的数量限制为每种类型 3 个（印刷版 3 个，网络版 3 个，艺术版 3 个）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:41:01.340

首先，我会尽量不使用更多的查询然后需要。假设您知道（或知道如何获取）父帖子的`$id`（*作为整数），请使用*[post_parent 参数](http://codex.wordpress.org/Class_Reference/WP_Query#Post_.26_Page_Parameters)：

```
<?php
$args = array(
    'post_type'         => 'page',
    'posts_per_page'    => 3,
    'post_parent'       => $id,
    'orderby'           => 'menu_order',
    'order'             => 'ASC',
    'post__not_in'      => array(4,368,358,354),
);
$childpages = new WP_Query( $args );
if ( $childpages->have_posts() ) :
?>
    <div class="row-fluid">
    <?php
    while ( $childpages->have_posts() ) :
        $childpages->the_post();
        ?>
        <div class="span4">
            <h2>
                <?php the_title(); ?>
            </h2>
            <?php the_content(); ?>
        </div>
        <?php
    endwhile;
    ?>
    </div>
    <?php
endif;
wp_reset_query();
?> 
```

尝试#2：

```
<div class="row-fluid">  
<?php
$args = array(
    'child_of' => 4,
    'parent' => 0,
    'post_type' => 'page',
    'post_status' => 'publish'
); 
$childrens = query_posts('showposts=100&post_parent=4&post_type=page&orderby=menu_order&order=asc');

foreach ( $childrens as $children ) :
    query_posts('showposts=3&post_parent='.$children->ID.'&post_type=page&orderby=menu_order&order=asc');
    if ( have_posts ) :
        while ( have_posts() ) : the_post();
?>
            <div class="span4">
                <h2>
                    <?php the_title(); ?>
                </h2>
                <?php the_content(); ?>
            </div>
<?php
        endwhile;
    endif;
endforeach;
?>
</div> 
```

请让我知道您使用此代码示例得到了什么。

# jsf - 如何在bean中设置所选项目

> ID：14571078
> 
> 赞同：0
> 
> 时间：2013-01-28T20:56:04.677
> 
> 标签：jsf, mobile, primefaces, facelets

我正在使用`p:dataList`，因为我正在开发一个显示项目列表的 PrimeFaces 移动视图。单击任何项​​目时，`pm:view`应显示另一个相同的视图。但应通知 bean 所选项目。

不幸的是，我找不到成功更新 bean 的方法：`<p:ajax>`在 dataTable 内部抛出此异常：

```
<p:ajax> Unable to attach <p:ajax> to non-ClientBehaviorHolder parent 
```

在迭代元素内部使用`<f:setPropertyActionListener>`也失败了，因为我得到：

```
<f:setPropertyActionListener> Parent is not of type ActionSource 
```

这是我的代码：

```
<pm:view  id="instrumentsView" >
    <pm:content >
        <h:form id="instrumentsList" >                            
            <p:dataList var="instrument" value="#{instrumentBean.subscribedInstruments}" >
                <h:outputLink value="#newView" >#{instrument.longName}</h:outputLink>
                <f:setPropertyActionListener value="#{instrument}" target="#{instrumentBean.selectedInstrument}" />
            </p:dataList>
        </h:form>
    </pm:content>
</pm:view> 
```

显然，我使用的是 dataList 和 outputLink，因为据我了解，它们是针对 PrimeFaces 移动列表中使用而优化的组件。但如有必要，我可以找到其他选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:57:57.683

我在[展示](http://www.primefaces.org/showcase-labs/mobile/index.jsf)（标题为**News**的示例）中找到了处理问题的正确方法：

```
<p:dataList var="instrument" value="#{instrumentBean.subscribedInstruments}" >
    <p:column >
        <p:commandLink value="#{instrument.longName}" action="pm:newView" update=":compId">
            <f:setPropertyActionListener value="#{instrument}" target="#{instrumentBean.selectedInstrument}" />
        </p:commandLink>
    </p:column>
</p:dataList> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T00:28:58.590

primefaces 文档中有一个主题对此进行了解释。

选择数据（第 124 页） indexed_primefaces_users_guide_3_5.pdf [http://www.primefaces.org/documentation.html](http://www.primefaces.org/documentation.html)

这里是内容

```
 <h:form id="carForm">
    <p:dataGrid var="car" value="#{carBean.cars}" columns="3" rows="12">
        <p:panel header="#{car.model}">
            <p:commandLink update=":carForm:display" oncomplete="dlg.show()">
                <f:setPropertyActionListener value="#{car}"
                    target="#{carBean.selectedCar}"
                    <h:outputText value="#{car.model}" />
            </p:commandLink>
        </p:panel>
    </p:dataGrid>
    <p:dialog modal="true" widgetVar="dlg">
        <h:panelGrid id="display" columns="2">
            <f:facet name="header">
                <p:graphicImage value="/images/cars/#{car.manufacturer}.jpg" />
            </f:facet>
            <h:outputText value="Model:" />
            <h:outputText value="#{carBean.selectedCar.year}" />

        </h:panelGrid>
    </p:dialog>
</h:form> 
```

# vb.net - 尝试按字母顺序对数组进行排序，但第一项未排序

> ID：14571082
> 
> 赞同：1
> 
> 时间：2013-01-28T20:56:17.733
> 
> 标签：vb.net

My.Resources.MyList 是一个包含项目列表的文本文件，每个项目位于单独的行中。例如...

```
Green
Red
Black
Orange
etc. 
```

我正在尝试将该列表排序到一个数组中，然后按字母顺序将结果输出到一个列表框中。

这是我的代码...

```
Dim MyListArray() As String = My.Resources.MyList.Split(Environment.NewLine)
Array.Sort(MyListArray)
MyListBox.DataSource = MyListArray 
```

但是当我这样做时，列表中的第一个项目没有得到排序（由于某种原因它在列表的末尾结束）。换句话说，最终结果应该看起来像......

```
Black
Green
Orange
Red 
```

但相反，它看起来像......

```
Black 
Orange
Red
Green 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:09:17.817

确保您的单词不以空字符开头/结尾。

```
MyListArray = MyListArray.Select(Function(a) a.Trim()).ToArray() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T21:09:57.457

列表框的排序属性默认为 false。所以试试这个：

`Listbox.Sorted = True`

`Listbox.TabIndex = 1`

参考： http: [//msdn.microsoft.com/en-us/library/system.windows.forms.listbox.sort.aspx ?cs-save-lang=1&cs-lang=vb#code-snippet-1](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.sort.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)

# android - 上传 APK 文件错误“您需要向 APK 添加图标”

> ID：14571084
> 
> 赞同：3
> 
> 时间：2013-01-28T20:56:20.307
> 
> 标签：android

我正在使用 Eclipse - 我导出我的项目并对其进行签名。但后来我得到了这个错误。

[SO] 不让我上传屏幕截图

错误是“上传失败：您需要向 APK 添加图标”

我的所有可绘制文件夹中都有名为 icon.png 的文件。而且我不确定是什么导致了这个错误。

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.Sherlock.Light" > 
```

ic_launcher 是我所有可绘制文件夹中的图标

编辑澄清：在我的清单中，我有上面的代码。在我所有的可绘制文件夹中，我有一个名为 ic_launcher 的图标 png（当第一次上传失败时，我还添加了 icon.png）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:04:58.617

您的图标需要命名为：“ic_launcher.png”而不是 icon.png。或者，您可以更改清单以指向任何您想要命名的可绘制对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T21:05:14.747

通过使用这条线

```
 android:icon="@drawable/ic_launcher" 
```

Android 期望找到一个名为“ic_launcher.something”的图标，其中某些内容是有效的图像格式，例如 .png 或 .jpg

你提到你的图标被称为“icon.png”

改变一个或另一个，它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T00:21:19.947

我有这个问题。我知道它说您需要添加一个图标，但请尝试检查@string/app_name。如果您的 app_name 中包含“\n”，请将其删除，重新构建并再次上传您的 apk。这就是我的情况。

[将应用程序上传到 google play 时，您需要在 APK 中添加一个图标](https://stackoverflow.com/questions/14644711/you-need-to-add-an-icon-to-your-apk-while-uploading-app-to-google-play)

希望这对其他人也有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-05T18:34:10.180

我也面临同样的问题。现在问题已解决。

*   请确保您有带有 .png 文件扩展名的图标。
*   查看以下文件夹 mdpi xdpi ldpi etcv 文件夹中的文件名或扩展名中的图标是否不匹配。
*   如果您不需要多个文件夹，您可以删除它们。

我希望以上几点能解决您的问题。

# java - Http 客户端由于某种原因挂起

> ID：14571089
> 
> 赞同：0
> 
> 时间：2013-01-28T20:56:38.393
> 
> 标签：java, http, netbeans, httpclient, wampserver

使用 Netbeans 处理 HTTP 客户端程序。

到目前为止，我已经在我的 HttpClient 类中到达这里：

```
public class MyHttpClient {

MyHttpRequest request;
String host;

public MyHttpResponse execute(MyHttpRequest request) throws IOException {

    //Creating the response object
    MyHttpResponse response = new MyHttpResponse();

    //Get web server host and port from request.
    String host = request.getHost();
    int port = request.getPort();

    //Check 1: HOST AND PORT NAME CORRECT!
    System.out.println("host: " + host + " port: " + String.valueOf(port));

    //Get resource path on web server from requests.
    String path = request.getPath();

    //Check 2: ENSURE PATH IS CORRECT!
    System.out.println("path: " + path);

    //Open connection to the web server
    Socket s = new Socket(host, port);

    //Get Socket input stream and wrap it in Buffered Reader so it can be read line by line.
    BufferedReader inFromServer = new BufferedReader(new InputStreamReader(s.getInputStream()));

    //Get Socket output stream and wrap it in a DataOutputStream so it can be written to line by line.
    DataOutputStream outToServer = new DataOutputStream(s.getOutputStream());

    //Get request method
    String method = request.getMethod();

    //Check 3: ENSURE REQUEST IS CORRECT GET/POST!
    System.out.println("Method: " + method);

    //GET REQUEST

    if(method.equalsIgnoreCase("GET")){
        //Send request to server
        outToServer.writeChars("GET " + path + " HTTP/1.0");

        //HTTP RESPONSE
        System.out.println("WAITING FOR RESPONSE!");

        String line = inFromServer.readLine();
        System.out.println("Line: " + line);

    }

    //Returning the response
    return response;

} 
```

}

我已检查以确保我的请求行构造正确，如在整个打印语句中所见。但是，当我到达这一行时，程序挂起：

```
System.out.println("WAITING FOR RESPONSE!");

        String line = inFromServer.readLine(); 
```

我不知道为什么...我的服务器是 localhost WAMP。它已启动并正常运行。我有我请求的文件存储在本地主机上。我可以通过浏览器访问它。

任何想法可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:27:34.313

没有 CR 或 LF 是您的问题之一。您应该编写 ASCII 字符并且可能是 Host 标头。

```
outToServer.write(("GET " + path + " HTTP/1.0\r\n").getBytes("ASCII"));
outToServer.write("Host: myhost.com\r\n\r\n".getBytes("ASCII"));
outToServer.flush(); 
```

# python - IPython：将 Python 脚本的输出重定向到文件（如 bash >）

> ID：14571090
> 
> 赞同：40
> 
> 时间：2013-01-28T20:56:45.953
> 
> 标签：python, io, ipython

我有一个要在 IPython 中运行的 Python 脚本。我想将输出重定向（写入）到一个文件，类似于：

```
python my_script.py > my_output.txt 
```

当我在 IPython 中运行脚本时，我该怎么做，例如`execfile('my_script.py')`

有一个[较旧的页面](http://rcjp.wordpress.com/2009/03/24/redirecting-stdout-within-ipython/)描述了可以编写来执行此操作的函数，但我相信现在有一种内置的方法来执行此操作，我只是找不到。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-28T23:53:11.483

IPython 有自己的上下文管理器来[捕获 stdout/err](https://github.com/ipython/ipython/blob/rel-0.13.1/IPython/utils/io.py#L359)，但它不会重定向到文件，它会重定向到一个对象：

```
from IPython.utils import io
with io.capture_output() as captured:
    %run my_script.py

print captured.stdout # prints stdout from your script 
```

并且此功能在`%%capture`cell-magic 中公开，如[Cell Magics 示例笔记本](http://nbviewer.ipython.org/urls/raw.github.com/ipython/ipython/master/examples/notebooks/Cell%20Magics.ipynb)中所示。

它是一个简单的上下文管理器，因此您可以编写自己的版本来重定向到文件：

```
class redirect_output(object):
    """context manager for reditrecting stdout/err to files"""

    def __init__(self, stdout='', stderr=''):
        self.stdout = stdout
        self.stderr = stderr

    def __enter__(self):
        self.sys_stdout = sys.stdout
        self.sys_stderr = sys.stderr

        if self.stdout:
            sys.stdout = open(self.stdout, 'w')
        if self.stderr:
            if self.stderr == self.stdout:
                sys.stderr = sys.stdout
            else:
                sys.stderr = open(self.stderr, 'w')

    def __exit__(self, exc_type, exc_value, traceback):
        sys.stdout = self.sys_stdout
        sys.stderr = self.sys_stderr 
```

你会调用它：

```
with redirect_output("my_output.txt"):
    %run my_script.py 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-05-17T16:59:42.000

要在使用 IPython 时快速存储变量中包含的文本，请[`%store`](https://ipython.readthedocs.io/en/stable/config/extensions/storemagic.html)使用`>`or `>>`：

`%store VARIABLE >>file.txt` （追加）
`%store VARIABLE >file.txt`（覆盖）

（确保紧跟在`>`or后面没有空格`>>`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-09T06:03:02.777

虽然这是一个老问题，但当我面临类似问题时，我发现了这个问题和答案。

我在筛选[IPython Cell 魔法文档](https://ipython.readthedocs.io/en/stable/interactive/magics.html#magic-sc)后发现的解决方案实际上相当简单。最基本的解决方案是将命令的输出分配给一个变量。

这个简单的两格示例展示了如何做到这一点。在第一个 Notebook 单元中，我们定义了 Python 脚本，其中包含一些输出以`stdout`利用`%%writefile`单元魔法。

```
%%writefile output.py
print("This is the output that is supposed to go to a file") 
```

然后我们运行该脚本，就像它使用`!`操作符从 shell 运行一样。

```
output = !python output.py
print(output)
>>> ['This is the output that is supposed to go to a file'] 
```

然后你可以很容易地利用`%store`魔法来持久化输出。

```
%store output >output.log 
```

但是请注意，命令的输出作为行列表保留。您可能想`"\n".join(output)`在存储输出之前调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-02T19:48:00.443

使用此代码将输出保存到文件

```
import time
from threading import Thread
import sys
#write the stdout to file
def log():
    #for stop the thread
    global run
    while (run):
        try:
            global out
            text = str(sys.stdout.getvalue())
            with open("out.txt", 'w') as f:
                f.write(text)
        finally:
            time.sleep(1) 
```

```
%%capture out
run = True
print("start")
process = Thread(target=log, args=[]).start()

# do some work
for i in range(10, 1000):
    print(i)
    time.sleep(1)
run= False
process.join() 
```

[使用跟踪器更改文件并建议重新加载文件（如记事本++](https://notepad-plus-plus.org/)）的文本编辑器很有用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-17T10:16:27.117

为了只运行一个脚本，我会在 bash 中进行重定向

```
ipython -c "execfile('my_script.py')" > my_output.txt 
```

在**python 3**上， execfile 不再存在，因此请改用它

```
ipython -c "exec(open('my_script.py').read())" > my_output.txt 
```

小心使用双引号和单引号。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-28T21:00:50.347

有一种用文件对象覆盖的 hacky 方法`sys.stdout`，`sys.stderr`但这真的不是一个好方法。真的，如果你想控制 python 内部的输出，你需要实现某种日志记录和/或输出处理系统，你可以通过命令行或函数参数而不是使用`print`语句来配置这些系统。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-10-14T17:19:59.980

似乎有很多代码....我的解决方案。 [将 ipython 脚本的输出重定向到 csv 或文本文件，如 sqlplus spool](https://stackoverflow.com/questions/40029938/redirect-output-of-ipython-script-into-a-csv-or-text-file-like-sqlplus-spool) 想知道有没有像 oracle sqlplus spool 命令这样的简单方法..？

# ajax - 通过 ajax div 加载的 FB 评论

> ID：14571091
> 
> 赞同：0
> 
> 时间：2013-01-28T20:57:05.833
> 
> 标签：ajax, facebook, prototypejs, facebook-comments

这是我的问题，我正在尝试通过 AJAX div 加载 FB 评论模块。现在，如果我直接进入 php 页面，它可以工作，但如果我从 div 中加载它，它不会。我查看了其他帖子（[jquery LOAD (ajax) 之后的 FB javascript SDK](https://stackoverflow.com/questions/5373220/fb-javascript-sdk-after-jquery-load-ajax)），但似乎仍然无法让它工作，寻求澄清。

如果您想了解我在说什么，请查看[http://azconceptphoto.com/lindsey](http://azconceptphoto.com/lindsey)并查看推荐。

理想情况下，在我网站的正常部分，我可以只加载 HTML5 代码并且它工作正常，尽管由于某种原因它不能通过 AJAX div 远程工作。考虑到之前的帖子已经过时（2011 年），我希望能得到更多的反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T00:40:03.663

根据您链接中的代码，您没有使用任何 PrototypeJS`Ajax`方法来获取后端脚本。`Ajax.Updater`是你需要使用的方法，所以......

这是我的建议

改变`loadXMLDoc()`to的定义

```
function loadXMLDoc(div, location)
{
    new Ajax.Updater(div,location,{'evalScripts':true});
} 
```

这将使用 的内容更新 的`div`内容`location`。此外，如果响应中有`<script>`标签，那么 javascript 将被解析和评估（这就是选项`evalScripts`）

# java - Java 重定向 System.out 并附加

> ID：14571093
> 
> 赞同：2
> 
> 时间：2013-01-28T20:57:16.470
> 
> 标签：java, file-io, io-redirection

在 Java 中，我已重定向`System.out`:`System.setOut("someText.txt");`以写入文本文件。我想每小时运行一次这个程序，并想将每组打印语句附加到文件的末尾。例如，假设在第 1 小时，我的程序运行，打印“Hello\n”然后退出。然后在第 2 小时，我的程序运行，打印“hello again\n”，然后退出。

如果发生这种情况，我希望我的文本文件的内容类似于：

```
Hello
Hello again 
```

目前，我只是覆盖文本文件。

1.  如何使用此重定向的 printStream 附加到文本文件的末尾？

**编辑**我怎样才能打印到控制台？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T21:00:05.883

当您构建 FileOutputStream 时，请使用以下内容：

> FileOutputStream（文件文件，布尔附加）
> 
> 创建一个文件输出流以写入由指定 File 对象表示的文件。

来自[JAVADOC](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileOutputStream.html)

代码示例：

```
OutputStream outStream = new FileOutputStream("file1.txt",true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T21:01:38.087

利用

```
OutputStream printStream = new OutputStream(new FileOutputStream("someText.txt", true));
System.setOut(printStream); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T21:03:47.780

@Frank 和 @Petr Mensik 的答案是正确的。但以防万一你想尝试不同的东西：

`System.out.append("Hello World\n")`应该做的伎俩。因此，不是做 a `System.out.print`，而是做 a`System.out.append`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T02:43:15.377

最简单的答案不是使用 Java 代码，而是使用[`tee`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/tee.html); 试图`tee`用 Java 重新实现只是在重新发明一个方轮。只需这样做：

```
java -jar yourapp.jar | tee -a output.log 
```

在 Windows 上？安装 MinGW 和/或 Cygwin。:-)

# ruby-on-rails - Rails：一次迁移应该做多少工作？

> ID：14571097
> 
> 赞同：1
> 
> 时间：2013-01-28T20:57:26.267
> 
> 标签：ruby-on-rails, coding-style, rails-migrations

我必须在我们的 Rails 应用程序中为几个不同的表添加外键。对我来说是在一次迁移中添加所有键更好，还是进行多次单一用途的迁移，每个表一个被更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:00:41.243

一般来说，“几个单一用途的迁移”更好。确保您的迁移向上和向下运行。附带说明一下，您的迁移文件名应该具有足够的描述性，以便第 3 方了解迁移的作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:44:38.473

我认为，是否拆分迁移是一个让你的代码更清晰的问题。如果添加多个外键是一项任务，请在一次迁移中完成。如果您的外键伴随着对相关模型/控制器/视图的重大更改，那么拆分它们可能会更清楚，这样您就可以跟踪哪个迁移属于应用程序其余部分的哪些更改。

当您使用 git（或类似的东西）时，在一次提交中绑定相应的更改可能会有所帮助。

从性能的角度来看，它没有任何区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:03:38.690

当我进行迁移时，我会根据共同目的对更改进行分组。例如，如果有 3 个更改针对我的应用程序的一个功能而 2 个针对另一个功能，我会将这 3 个更改一起迁移，然后将这 2 个更改为另一个迁移。这样，将来如果我需要回滚，我只会回滚与我正在处理的领域相关的更改。

# visual-studio-2012 - 默认为 Visual Studio 2012 数据库项目中的 T-SQL 窗格视图

> ID：14571098
> 
> 赞同：26
> 
> 时间：2013-01-28T20:57:26.780
> 
> 标签：visual-studio-2012, sql-server-data-tools, database-project

在 Visual Studio 2012 中处理数据库项目时，VS 在添加或编辑表时默认使用“设计视图”窗格。虽然您可以在分屏模式下工作，但 T-SQL 窗格默认为底部窗格。

由于我更喜欢​​直接使用 T-SQL 而不是设计器，因此我不断切换以使 T-SQL 窗格成为最顶层的编辑器，以便使用对象。不幸的是，VS 不记得这个偏好，所以每次我使用表时，我都必须更改以使 T-SQL 窗格显示在顶部而不是设计器窗格下方。

我查看了 Tools --> Options 下是否有设置来控制此行为，但到目前为止，我一直无法找到这样做的设置。我也对该主题进行了一些谷歌搜索，但没有发现任何对这种特殊情况有帮助的东西。

这对我来说比其他任何事情都更令人烦恼，但是当我发现自己不断切换窗格时，我想知道是否有人知道在 VS 或注册表或其他一些配置文件中的设置，这些设置会迫使 VS 记住我的偏好还是默认为设计器窗格顶部的 T-SQL 窗格？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-28T21:29:34.000

如果您想完全摆脱设计师，请尝试以下方法：

1.  右键单击该文件，然后选择`Open With...`
2.  选择`Microsoft SQL Server Data Tools, T-SQL Editor`,
3.  点击`Set as Default`
4.  单击`OK`。

下次您将能够简单地双击该文件以在 T-SQL 中打开它。

# python - 检查列表中的所有数字在Python中是否相同？

> ID：14571099
> 
> 赞同：4
> 
> 时间：2013-01-28T20:57:28.287
> 
> 标签：python, list, python-2.7, sign

如何判断数字列表（或可迭代）是否都具有相同的符号？

这是我的第一个（天真的）草稿：

```
def all_same_sign(list):

    negative_count = 0

    for x in list:
        if x < 0:
            negative_count += 1

    return negative_count == 0 or negative_count == len(list) 
```

有没有更pythonic和/或正确的方法来做到这一点？首先想到的是一旦你有相反的迹象就停止迭代。

**更新**

到目前为止，我喜欢这些答案，尽管我想知道性能。我不是性能迷，但我认为在处理列表时考虑性能是合理的。对于我的特定用例，我认为这没什么大不了的，但为了这个问题的完整性，我认为解决它是件好事。我的理解是 min 和 max 函数具有 O(n) 性能。到目前为止，两个建议的答案具有 O(2n) 性能，而我上面的例程添加短路以在检测到相反符号后退出将具有最差的 O(n) 性能。想法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-28T20:58:52.143

您可以使用以下`all`功能：-

```
>>> x = [1, 2, 3, 4, 5]

>>> all(item >= 0 for item in x) or all(item < 0 for item in x)
True 
```

不知道这是否是最pythonic的方式。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-28T20:59:15.637

怎么样：

```
same_sign = not min(l) < 0 < max(l) 
```

基本上，这会检查最小元素`l`和最大元素是否跨越零。

这不会短路，但确实避免了 Python 循环。只有基准测试才能判断这对您的数据是否是一个很好的权衡（以及这部分的性能是否重要）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T21:46:56.003

而不是`all`你可以使用`any`，因为它也会在第一个真正的项目上短路：

```
same = lambda s: any(i >= 0 for i in s) ^ any(i < 0 for i in s) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T21:52:19.463

与 using 类似`all`，您可以使用`any`，这具有更好的性能，因为它会在第一次出现不同符号时打破循环：

```
def all_same_sign(lst):
    if lst[0] >= 0:
        return not any(i < 0 for i in lst)
    else:
        return not any(i >= 0 for i in lst) 
```

如果您想将 0 视为属于两个组，这将有点棘手：

```
def all_same_sign(lst):
    first = 0
    i = 0
    while first == 0:
        first = lst[i]
        i += 1
    if first > 0:
        return not any(i < 0 for i in lst)
    else:
        return not any(i > 0 for i in lst) 
```

在任何情况下，您都将列表迭代一次，而不是像其他答案那样迭代两次。您的代码具有在 Python 中迭代循环的缺点，这比使用内置函数效率低得多。

# iphone - 从另一个 iPhone 应用开始在 Spotify 上播放音乐

> ID：14571101
> 
> 赞同：0
> 
> 时间：2013-01-28T20:57:34.037
> 
> 标签：iphone, xcode, spotify

iv 创建了一个应用程序，但我想添加一个功能，当我按下按钮时，它会打开我的 spotify 应用程序并自动播放音乐......如果这甚至可能的话......按钮，它打开了 spotify 但无法找到如何自动播放，有没有人这样做或知道怎么做？

```
-(IBAction)spotify:(id)sender {

NSString *stringURL = @"spotify:";
NSURL *url = [NSURL URLWithString:stringURL];
[[UIApplication sharedApplication] openURL:url];
} 
```

请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:12:01.313

您可以打开大多数`spotify:`URL（使用`[[UIApplication sharedApplication] openURL:];`），Spotify iOS 客户端将打开并显示它们。

[这里](http://www.spotify.com/us/blog/archives/2008/01/14/linking-to-spotify/)有一些文档- 确保使用`spotify:`URI 而不是 HTTP URL。

但是，据我所知，iOS 客户端目前不支持自动播放——这将取决于用户推送播放。

或者，您可以使用 CocoaLibSpotify 在您的应用程序中嵌入 Spotify 播放。

# node.js - 如何使用 Cloud9 IDE 为 node.js 应用程序提供 html 页面

> ID：14571102
> 
> 赞同：2
> 
> 时间：2013-01-28T20:57:34.957
> 
> 标签：node.js

我已经使用 Cloud9 IDE 创建了 node.js 项目，用于开发将服务于登录页面 (form.html) 的身份验证模块。我使用 mongo db 作为数据库。我还将 express 库用于路由机制。

请找到如下所述的代码详细信息：

app.js:-

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes')
  ,fs = require('fs');

var app = module.exports = express.createServer();

// Configuration

app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
});

app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function(){
  app.use(express.errorHandler());
});

// Routes

app.get('/', routes.index);

app.get('/form',function(req,res){
   fs.readFile('.form.html',function(error,content){
       if (error) {
           res.writeHead(500);
           res.end();
       }
       else{
         res.writeHead(200,{'Content-Type':'text/html'});
         res.end(content,'utf-8');
       }
   }); 
});

app.listen(process.env.PORT);
console.log("Express server listening on port %d in %s mode", app.address().port, app.settings.env); 
```

包.json：-

```
{
    "name": "authentication"
  , "version": "0.0.1"
  , "private": true
  , "dependencies": {
      "express": "2.5.8"
      , "jade": "0.26.1"
      ,"mongoose":"2.6.5"
  }
} 
```

form.html:-

```
<form action="/signup" method="post">
<div>
    <label>Username:</label>
    <input type="text" name="username"/><br/>
</div>
<div>
     <label>Password:</label>
    <input type="password" name="password"/><br/>
</div>
<div><input type="submit" value="Sign Up"/></div>
</form> 
```

上面的 form.html 是在 authentication 文件夹中创建的。

对于快速实现，我使用了以下命令：

npm install -g @express2.5.8

快速认证

然后如上所述更新了 package.json 文件并运行以下命令：

光盘认证

npm 安装

节点应用

编写完上面提到的所有命令后，我无法看到 form.html 作为输出。

谁能帮我提供一些解决方案，以便将 form.html 页面作为应用程序的输出。

谢谢和问候， 桑托什·库马尔·帕特罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:36:02.677

由于您使用的是`express.static`中间件，因此只需将其`form.html`放在`/public`目录中（或 simlink 即可）。节省大量时间。

表格将在`host:port/form.html`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:08:16.317

```
fs.readFile('.form.html' 
```

需要是

```
fs.readFile('form.html' 
```

删除前导点！

您在 app.listen() 中使用的“process.env.PORT”的值是多少？在下面的示例中，我使用了 8080

将浏览器指向 localhost:8080/form

# python - 在python中使用正则表达式捕获表情符号

> ID：14571103
> 
> 赞同：8
> 
> 时间：2013-01-28T20:57:38.263
> 
> 标签：python, regex

我想要一个正则表达式模式来匹配笑脸 ":)" ,":(" 。它还应该捕获重复的笑脸，比如 ":) :)" ， ":) :(" 但过滤掉无效的语法，比如 ":( (" .

我有这个，但它匹配 ":( ("

```
bool( re.match("(:\()",str) ) 
```

我可能在这里遗漏了一些明显的东西，对于这个看似简单的任务，我需要一些帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T18:15:11.993

我认为它最终“点击”了您在此处询问的内容。看看下面的内容：

```
import re

smiley_pattern = '^(:\(|:\))+$' # matches only the smileys ":)" and ":("

def test_match(s):
    print 'Value: %s; Result: %s' % (
        s,
        'Matches!' if re.match(smiley_pattern, s) else 'Doesn\'t match.'
    )

should_match = [
    ':)',   # Single smile
    ':(',   # Single frown
    ':):)', # Two smiles
    ':(:(', # Two frowns
    ':):(', # Mix of a smile and a frown
]
should_not_match = [
    '',         # Empty string
    ':(foo',    # Extraneous characters appended
    'foo:(',    # Extraneous characters prepended
    ':( :(',    # Space between frowns
    ':( (',     # Extraneous characters and space appended
    ':(('       # Extraneous duplicate of final character appended
]

print('The following should all match:')
for x in should_match: test_match(x);

print('')   # Newline for output clarity

print('The following should all not match:')
for x in should_not_match: test_match(x); 
```

您的原始代码的问题是您的正则表达式是错误的：`(:\()`. 让我们分解一下。

外括号是“分组”。如果您要进行字符串替换，它们就是您要参考的内容，并且用于一次将正则表达式运算符应用于字符组。所以，你真的是在说：

*   `(`开始一个小组
    *   `:\(`...做正则表达式的东西...
*   ')' 结束组

`:`不是正则表达式保留字符，所以它只是一个冒号。`\`是，它的意思是“以下字符是文字​​，而不是正则表达式运算符” 。这称为“转义序列”。完全解析成英文，你的正则表达式说

*   `(`开始一个小组
    *   `:`冒号字符
    *   `\(`左括号字符
*   `)`结束组

我使用的正则表达式稍微复杂一些，但还不错。让我们分解一下：`^(:\(|:\))+$`。

`^`分别`$`表示“行首”和“行尾”。现在我们有...

*   `^`行首
    *   `(:\(|:\))+`...做正则表达式的东西...
*   `$`行结束

...所以它只匹配构成整行的东西，而不是简单地出现在字符串的中间。

我们知道这一点`(`并`)`表示一个分组。`+`意思是“其中一个”。现在我们有：

*   `^`行首
*   `(`开始一个小组
    *   `:\(|:\)`...做正则表达式的东西...
*   `)`结束组
*   `+`匹配其中一项或多项
*   `$`行结束

最后是`|`(pipe) 运算符。它的意思是“或”。所以，应用我们从上面知道的转义字符，我们准备完成翻译：

*   `^`行首
*   `(`开始一个小组
    *   `:`冒号字符
    *   `\(`左括号字符
*   `|`或者
    *   `:`冒号字符
    *   `\)`右括号字符
*   `)`结束组
*   `+`匹配其中一项或多项
*   `$`行结束

我希望这有帮助。如果没有，请告诉我，我很乐意通过回复来编辑我的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T21:05:41.350

也许是这样的：

```
re.match('[:;][)(](?![)(])', str) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T21:23:27.810

试试`(?::|;|=)(?:-)?(?:\)|\(|D|P)`。尚未对其进行广泛测试，但似乎确实与正确的匹配，而不是更多...

```
In [15]: import re

In [16]: s = "Just: to :)) =) test :(:-(( ():: :):) :(:( :P ;)!"

In [17]: re.findall(r'(?::|;|=)(?:-)?(?:\)|\(|D|P)',s)
Out[17]: [':)', '=)', ':(', ':-(', ':)', ':)', ':(', ':(', ':P', ';)'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T22:01:28.870

我从这里发布的评论和答案中得到了我正在寻找的答案。

```
re.match("^(:[)(])*$",str) 
```

谢谢大家。

# postgresql - Text[] 数组列的表索引

> ID：14571107
> 
> 赞同：4
> 
> 时间：2013-01-28T20:57:48.713
> 
> 标签：postgresql, database-design, database-indexes

我有一个 PostgreSQL 数据库表，`text[]`上面定义了（数组）列。我正在使用这些列以这种方式搜索数据库中的特定记录：

```
select obj from business
where ((('street' = ANY (address_line_1)
    and 'a_city' = ANY (city)
    and 'a_state' = ANY (state))
or    ('street' = ANY (address_line_1)
    and '1234' = ANY (zip_code)))
and ('a_business_name' = ANY (business_name)
    or 'a_website' = ANY (website_url)
    or array['123'] && phone_numbers)) 
```

我遇到的问题是大约有 100 万条记录，查询变得非常慢。我的问题很简单，数组列有不同类型的索引吗？有人知道在这种情况下要创建的最佳索引类型吗？（假设有不同的类型）。

以防万一，这是`explain analyze`响应：

```
"Seq Scan on business  (cost=0.00..207254.51 rows=1 width=32) (actual time=18850.462..18850.462 rows=0 loops=1)"
"  Filter: (('a'::text = ANY (address_line_1)) AND (('a'::text = ANY (business_name)) OR ('a'::text = ANY (website_url)) OR ('{123}'::text[] && phone_numbers)) AND ((('a'::text = ANY (city)) AND ('a'::text = ANY (state))) OR ('1234'::text = ANY (zip_code))))"
"  Rows Removed by Filter: 900506"
"Total runtime: 18850.523 ms" 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:25:54.823

您可以使用[**GIN 索引**](http://www.postgresql.org/docs/current/static/gin.html)来有效地提高数组的性能。
将它与[**数组运算符**](http://www.postgresql.org/docs/current/static/functions-array.html)结合使用。

例如：

```
CREATE INDEX business_address_line_1_idx ON business USING GIN (address_line_1); 
```

对条件中涉及的所有数组列执行此操作。

改为规范化您的架构可能值得考虑。也许将多个条目分成一个单独的（1：n 或 n：m）表会更好地为您服务。从长远来看，它通常会起作用，即使一开始似乎需要做更多的工作。

# android - 服务和活动结果

> ID：14571108
> 
> 赞同：1
> 
> 时间：2013-01-28T20:57:48.543
> 
> 标签：android, service

我想做在后台运行并接收其内容然后执行操作的语音识别。所有这些都应该在后台完成。

我已经完成了识别的事情，只是希望它在后台运行。

有什么办法？？？请帮忙 ！！！！

[它与服务上的处理 onActivityResult](https://stackoverflow.com/questions/13608236/handle-onactivityresult-on-a-service)相同

但我没看懂答案 你能解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:14:30.573

在我看来，服务不会发送结果。但是我知道一些对您有用的链接，
[服务如何将结果返回给活动](https://stackoverflow.com/questions/3841043/how-does-a-service-return-result-to-an-activity)
[Android：如何在启动活动中从服务中获取结果](https://stackoverflow.com/questions/9547263/android-how-to-get-result-back-from-service-in-the-launching-activity)
[启动远程服务并在 Android 中接收结果](https://stackoverflow.com/questions/10142249/start-a-remote-service-and-receive-a-result-in-android)

希望他们有帮助

# android - 我可以使用 dip 调用 View 的 setWidth() 吗？

> ID：14571112
> 
> 赞同：0
> 
> 时间：2013-01-28T20:58:02.673
> 
> 标签：android, xml, layout

我目前正在将 XML 布局转换为 java 代码。我想完全复制我所拥有的，但我找不到几个函数来设置视图的属性。

```
 <TableRow
            android:layout_width="match_parent"
            android:weightSum="2">
            <TextView
                android:text="@string/parameters_insensitive_trip"
                android:layout_width="0dip"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:gravity="center" />

            <Spinner
                android:id="@+id/insensitiveTripSpinner"
                android:layout_width="0dip"
                android:prompt="@string/spinner_insensitive_trip"
                android:layout_weight="1"
                android:gravity="center" />
        </TableRow> 
```

使用 match_parent 对 setHeight() 或 setWidth() 不起作用，使用 0dip 也不起作用，而且我找不到与视图权重有关的任何内容。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:27:19.380

您正在查看正确的布局类，TableLayout.LayoutParams 是从 LinearLayout.LayoutParams 派生的，因此它具有权重和重力字段，您可以简单地设置它们。

至于 dip，你可以调用 TypedValue.applyDimension 将所需的 dip 值转换为像素。

# java - Spring + JPA 事务已创建并提交，但在 db 中没有结果

> ID：14571113
> 
> 赞同：0
> 
> 时间：2013-01-28T20:58:07.327
> 
> 标签：java, spring, hibernate, jpa, transactions

我读过很多抱怨类似问题的帖子，但在我的情况下，它们都没有帮助我。无论如何，问题是我写了几个类：

**个人实体：**

```
@Entity
@Table(name="person")
public class Person implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    @Column(name="name")
    private String name;

    public Long getId() {
        return id;
    }

    public Person setId(Long id) {
        this.id = id;
        return this;
    }

    public String getName() {
        return name;
    }

    public Person setName(String name) {
        this.name = name;
        return this;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Person)) {
            return false;
        }
        Person other = (Person) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "com.myhome.event_manager.entity.Person[ id=" + id + " ]";
    }

} 
```

**个人道：**

```
@Repository
public class PersonDAO extends AbstractDAO<Person> {

    public PersonDAO() {
        setClazz(Person.class);
    }

    public Person findByName(String name) {
        return em.createQuery("WHERE p.name = :name", Person.class)
            .setParameter("name", name)
            .getSingleResult();
    }
} 
```

**抽象道：**

```
public abstract class AbstractDAO<T extends Serializable> {

@PersistenceContext(unitName="pu-main")
protected EntityManager em;
protected Class< T> clazz;

public void setClazz(final Class< T> clazzToSet) {
    this.clazz = clazzToSet;
}

public void setEm(EntityManager em) {
    this.em = em;
}

public EntityManager getEm() {
    return em;
}

public T findById(final Long id) {
    return this.em.find(this.clazz, id);
}

public List< T> findAll() {
    return this.em.createQuery("from " + this.clazz.getName())
            .getResultList();
}

public void create(final T entity) {
    this.em.persist(entity);
}

public void update(final T entity) {
    this.em.merge(entity);
}

public void delete(final T entity) {
    this.em.remove(entity);
}

public void deleteById(final Long entityId) {
    final T entity = this.findById(entityId);
    this.delete(entity);
} 
```

}

和简单的**PersonService**，在这种情况下，它是带有 @Transactional 方法 createPerson 的 DAO 包装器：

```
@Service
public class PersonService {

@Autowired
private PersonDAO personDao;

@Transactional
public void createPerson(Person person) {
    personDao.create(person);
}

public List<Person> listAllPersons() {
    return personDao.findAll();
}

public Person getPersonWithName(String name) {
    return personDao.findByName(name);
} 
```

}

**pom.xml：**

```
<properties>
    <java-version>1.6</java-version>
    <org.springframework-version>3.2.0.RELEASE</org.springframework-version>
    <org.aspectj-version>1.6.10</org.aspectj-version>
    <org.slf4j-version>1.6.6</org.slf4j-version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <netbeans.hint.deploy.server>Tomcat</netbeans.hint.deploy.server>
</properties>
<dependencies>
    <!-- Spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework-version}</version>
        <exclusions>
            <!-- Exclude Commons Logging in favor of SLF4j -->
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>

    <!--Mysql driver-->
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.21</version>
    </dependency>

    <dependency>
        <groupId>org.hsqldb</groupId>
        <artifactId>hsqldb</artifactId>
        <version>2.2.9</version>
    </dependency>

    <!--Hibernate-->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>4.1.9.Final</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.3.1.Final</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>1.0.1.Final</version>
    </dependency>

    <!-- AspectJ -->
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>${org.aspectj-version}</version>
    </dependency>   

    <!-- Logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${org.slf4j-version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.15</version>
        <exclusions>
            <exclusion>
                <groupId>javax.mail</groupId>
                <artifactId>mail</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.jms</groupId>
                <artifactId>jms</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jdmk</groupId>
                <artifactId>jmxtools</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jmx</groupId>
                <artifactId>jmxri</artifactId>
            </exclusion>
        </exclusions>
        <scope>runtime</scope>
    </dependency>

    <!-- @Inject -->
    <dependency>
        <groupId>javax.inject</groupId>
        <artifactId>javax.inject</artifactId>
        <version>1</version>
    </dependency>

    <!-- Servlet -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>

    <!--JSTL-->
    <dependency>
        <groupId>jstl</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <!-- Test -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>1.9.0</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.easytesting</groupId>
        <artifactId>fest-assert</artifactId>
        <version>1.4</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${org.springframework-version}</version>
        <scope>test</scope>
        <type>jar</type>
    </dependency>
</dependencies> 
```

以上所有内容都与 root-context.xml 中包含的配置一起工作：

**数据源.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

<!--MysQL - main-->
<bean id="dataSource" 
      class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driverClassName}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
</bean>

<bean id="jpaVendorAdapter" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
    <property name="database" value="MYSQL" />
    <property name="showSql" value="true"/>
    <property name="generateDdl" value="true"/>
    <property name="databasePlatform" value="org.hibernate.dialect.MySQLDialect" />
</bean>

<bean id="emFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="jpaVendorAdapter" ref="jpaVendorAdapter" />
    <property name="persistenceUnitName" value="pu-main" />
</bean> 
```

**交易.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:tx="http://www.springframework.org/schema/tx"

   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

<!--enable the configuration of transactional behavior based on annotations--> 
<tx:annotation-driven transaction-manager="txManager" />

<!--Transactions-->
<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

<bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource"/>
</bean>

</beans> 
```

**持久性.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
  <persistence-unit name="pu-main" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <non-jta-data-source/>
    <properties/>
  </persistence-unit>
</persistence> 
```

接下来我做了一个 jUnit 测试来创建新的 Person 实例，并调用 PersonService 的 create 方法，该方法应该将其传递给 DAO 和持久层。

测试：

```
public class PersonServiceTest extends RootContextAwareTest {

@Autowired
private PersonService instance;

@Test
public void shouldAddOnePerson() {
    logger.debug("TEST-shouldAddOnePerson");

    //given
    Person person = (new Person())
            .setName("Test");

    //when
    logger.debug("BEFORE CREATE");
    instance.createPerson(person);
    logger.debug("AFTER CREATE");

    //then
    assertThat(instance.listAllPersons()).hasSize(6);
    assertThat(instance.getPersonWithName("Test"));
} 
```

}

RootContextAwareTest：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:/config/spring/root-context.xml"})
public abstract class RootContextAwareTest {
     protected static final Logger logger = LoggerFactory.getLogger(RootContextAwareTest.class);
} 
```

实际上，person 表中有 5 行，所以我只是在持久化新实体后放置一个断言，检查它是否正确持久化。事实证明并非如此，断言失败了，但令我惊讶的是，日志说一切都很好：

```
 2013-01-28 21:28:07,148 - DEBUG: com.myhome.event_manager.test_base.RootContextAwareTest - TEST-shouldAddOnePerson
2013-01-28 21:28:07,148 - DEBUG: com.myhome.event_manager.test_base.RootContextAwareTest - BEFORE CREATE
2013-01-28 21:28:07,154 - DEBUG: org.springframework.jdbc.datasource.DataSourceTransactionManager - Creating new transaction with name [com.myhome.event_manager.service.PersonService.createPerson]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2013-01-28 21:28:07,155 - DEBUG: org.springframework.jdbc.datasource.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:mysql://localhost:3306/event_manager]
2013-01-28 21:28:07,172 - DEBUG: org.springframework.jdbc.datasource.DataSourceTransactionManager - Acquired Connection [com.mysql.jdbc.JDBC4Connection@164a38ae] for JDBC transaction
2013-01-28 21:28:07,178 - DEBUG: org.springframework.jdbc.datasource.DataSourceTransactionManager - Switching JDBC Connection [com.mysql.jdbc.JDBC4Connection@164a38ae] to manual commit
2013-01-28 21:28:07,208 - DEBUG: org.springframework.orm.jpa.EntityManagerFactoryUtils - Opening JPA EntityManager
2013-01-28 21:28:07,249 - DEBUG: org.springframework.orm.jpa.EntityManagerFactoryUtils - Registering transaction synchronization for JPA EntityManager
2013-01-28 21:28:07,267 - DEBUG: org.springframework.orm.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager
2013-01-28 21:28:07,268 - DEBUG: org.springframework.jdbc.datasource.DataSourceTransactionManager - Initiating transaction commit
2013-01-28 21:28:07,269 - DEBUG: org.springframework.jdbc.datasource.DataSourceTransactionManager - Committing JDBC transaction on Connection [com.mysql.jdbc.JDBC4Connection@164a38ae]
2013-01-28 21:28:07,269 - DEBUG: org.springframework.jdbc.datasource.DataSourceTransactionManager - Releasing JDBC Connection [com.mysql.jdbc.JDBC4Connection@164a38ae] after transaction
2013-01-28 21:28:07,269 - DEBUG: org.springframework.jdbc.datasource.DataSourceUtils - Returning JDBC Connection to DataSource
2013-01-28 21:28:07,270 - DEBUG: com.myhome.event_manager.test_base.RootContextAwareTest - AFTER CREATE 
```

所以我认为（经过一些研究） test env 默认情况下不允许对 db 进行任何更改（这将是非常合乎逻辑的）。所以我的第二次尝试是添加注释：

```
@Transactional
@TransactionConfiguration(transactionManager = "txManager", defaultRollback = false) 
```

在 PersonServiceTest 类上。结果就像在创建、提交和释放事务之前一样，没有任何错误。我再次进行了一些研究并制作了一个简单的控制器，并在那里放置了应该创建和持久化新的人实体的代码。

**主控制器：**

```
@Controller
public class MainController {

    private static final Logger logger = LoggerFactory.getLogger(MainController.class);
    private ApplicationContext context = new ClassPathXmlApplicationContext("/config/spring/root-context.xml");
    @Autowired
    private PersonService ps;

    @RequestMapping(method = RequestMethod.GET, value = "/")
    public String index(Model model) {
        Person person = (new Person())
                .setName("Test-ąęć");

        logger.debug("PERSIST PERSON");
        ps.createPerson(person);
        return "forward:/event/read";
    }
} 
```

结果与上述相同。

我也试过把@Transactional 注释做DAO（类和方法级别）和控制器。

这种行为应该指出持久层配置的问题，但从数据库中选择数据工作正常。

此外，我还发现休眠在将数据写入数据库之前可能会有一些延迟，所以我在测试中添加了 thread.sleep(5000) 但它并没有太大变化。

也许我在配置中错过了一些东西，但我现在已经没有想法了。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:59:01.660

嗯，您的问题看起来很复杂，但是我意识到您在 Transactions.xml 上使用了 DatasourceTransactionManager，而您似乎正在使用 JPA 持久性。

也许尝试使用 JpaTransactionManager 代替。也许 DatasourceTransactionManager 没有为您提供使用 @Transactional 注释的方法的正确事务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:30:30.480

您的数据库中的 Person Id 列是否允许为空？如果是这样，新创建的 Person 可能与现有行“相等”。这将导致更新，而不是插入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:28:35.917

在处理 ORM 映射时，您应该始终确保*刷新*您的`EntityManager`（或 Hibernate 会话，如果您使用它而不是 JPA）以避免在做出断言之前出现[误报，例如](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/testing.html#testcontext-tx-false-positives)

```
@Transactional
public class PersonServiceTest {
    @PersistenceContext
    EntityManager em;

    @Test
    public void someTest() {
        // given (initialization)

        // when (write stuff to be persisted)

        em.flush();

        // then (read and validate)
    }
} 
```

# c++ - c++ 如何销毁命名空间对象

> ID：14571114
> 
> 赞同：1
> 
> 时间：2013-01-28T20:58:09.077
> 
> 标签：c++, namespaces, destructor

我有一个 std::stringstream 指针：

```
std::stringstream *stream; 
```

我创建了一个实例：

```
stream = new std::stringstream(); 
```

如何调用 stringstream 析构函数？以下失败：

```
stream->~stringstream(); 
```

出现错误：*'(' token 之前的预期类名*。如果可能的话，我不想使用*using namespace std*。提前感谢您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:59:29.940

这与命名空间无关。您只需调用`delete`指针：

```
delete stream; 
```

但是为什么你首先需要一个指针？如果您分配一个具有自动存储的对象，它将在退出它声明的范围时被销毁：

```
{
  std::stringstream stream;
} // stream is destroyed on exiting scope. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T20:59:59.303

纯语法：

```
{
  using std::stringstream; // make the using as local as possible
  stream->~stringstream(); // without using, impossible
                           // note: this destroys the stream but 
                           //       doesn't free the memory
} 
```

但是，我想不出任何明智的用途。在这种情况下，我宁愿调用删除，使用，`unique_ptr`或者更好的是，使用自动存储。

显式析构函数调用在分配器中很有用，但它们是模板化的，因此不需要使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T21:00:27.957

调用时将调用析构函数`delete`。像这样：

```
delete stream; 
```

析构函数并不意味着显式调用（尽管您可以这样做）。

# ios - 通过 Storyboard 和新 Xib 实现自定义表格部分标题

> ID：14571125
> 
> 赞同：9
> 
> 时间：2013-01-28T20:59:00.290
> 
> 标签：ios

这是我所做的：

我创建了一个自定义`xib`文件，其中包含一个用于自定义表节标题的小 UIView。我对自定义`xib`文件进行了分类。

我想将此添加到 tableView 作为标题。我查看了一些资源，但它们似乎已经过时或缺少信息。

查看文档，我看到了添加自定义标头的参考，其中包含以下说明：

> 要使表格视图知道您的页眉或页脚视图，您需要注册它。您可以使用 UITableView 的 registerNib:forCellReuseIdentifier: 或 registerClass:forCellReuseIdentifier: 方法来执行此操作。

当我将 tableView 添加到我的故事板视图时，很容易在 XCode 中为其分配一个重用标识符。我什至能够创建一个自定义单元`xib`文件，并且它还在 XCode 中有一个重用标识符的位置。

当我为节标题创建自定义 UIView 时，它没有用于重用标识符的条目。没有这个，我不知道如何使用`registerNib:forCellReuseIdentifier`.

更多信息：我有一个故事板场景，它有一个`tableView`内部。`tableView`是一个被链接的自定义类，并且该对象在父视图的文件`tableView`中有一个出口。`ViewController`

父级`ViewController`既是`UITableViewDataSourceDelegate`又是`UITableViewDelegate`。同样，我能够毫无问题地实现自定义单元格。除了标题之外，我什至无法以任何方式修改标题。

`[[self tableHeaderView] setBackgroundColor:[UIColor clearColor]];`我尝试从自定义`tableView`类调用该方法，但没有任何反应。我尝试`ViewController`通过使用插座名称在父类中使用此方法，如下所示： `[[self.tableOutlet tableHeaderView] setBackgroundColor:[UIColor clearColor]];`

任何帮助将不胜感激。

编辑：（无法将背景更改为透明）

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

    HeaderView *headerView = [self.TableView dequeueReusableHeaderFooterViewWithIdentifier:@"tableHeader"];

    // Set Background color
    [[headerView contentView] setBackgroundColor:[UIColor clearColor]];

    // Set Text
    headerView.headerLabel.text = [self.sectionArray objectAtIndex:section];

    return headerView;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-28T21:43:26.860

您无需在 xib 中设置标识符——您只需要在注册时使用相同的标识符，并在您将标题视图出列时使用。在 viewDidLoad 方法中，我注册了这样的视图：

```
[self.tableView registerNib:[UINib nibWithNibName:@"Header1" bundle:nil] forHeaderFooterViewReuseIdentifier:@"header1"]; 
```

然后，在委托方法中：

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    UIView *headerView = [self.tableView dequeueReusableHeaderFooterViewWithIdentifier:@"header1"];
    return headerView;
}

-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    return 100;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T12:37:09.893

关于背景颜色的问题（除非你想要透明）：

您可以创建一个`UIView`占据整个视图的视图，然后更改其背景颜色。

如果您不想让其他人知道发生了什么，您可以覆盖 backgroundColor 属性：

```
//interface
@property (copy, nonatomic) UIColor *backgroundColor;

//implementation
@dynamic backgroundColor;

- (void)setBackgroundColor:(UIColor *)backgroundColor {
    //self.viewBackground is the created view
    [self.viewBackground setBackgroundColor:backgroundColor];
}

- (UIColor *)backgroundColor {
    return self.viewBackground.backgroundColor;
} 
```

# c# - 从 UI 线程调用工作线程上的方法

> ID：14571126
> 
> 赞同：0
> 
> 时间：2013-01-28T20:59:04.503
> 
> 标签：c#, winforms, multithreading

使用 C# 在 Winforms 中工作，我有一个主窗体，它在单独的线程上创建第二个 UI 窗体。

```
viewThread = new Thread( ( ) => 
{ 
  views = new Views.Views( displayRotators, screenLocationLeft, screenLocationTop, screenHeight, screenWidth );
  Application.Run( views );
} );
viewThread.SetApartmentState( ApartmentState.STA );
viewThread.Start( ); 
```

在第二个 UI 表单上，我现在需要调用一个方法来启动一个显示循环，该循环将一直运行到我终止线程为止。我花了大约三个小时试图找到一种方法来做到这一点，但我能找到的只是从工作线程调用主 UI 线程上的方法的示例，而不是从主 UI 线程调用工作线程上的方法。谁能告诉我我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:03:21.650

很少有运行多个 UI 线程真正有意义的情况。除非您有非常令人信服的理由这样做，否则我会回到单个 UI 线程。

假设您必须有多个 UI 线程，黄金法则是*控件只能从创建它们的 UI 线程更新。*. 如果您想调用*一般方法*，则根本不必编组它们。但是，如果这些方法又与 UI 控件交互，则您只需将*调用与来自任何其他线程（不是属于该控件的 UI 线程）的调用完全相同的方式*编组该调用。

如果你可能有类似的东西

```
btnOnForm1OnUIThread1_Click(...)
{
    UpdateForm2OnUIThread2();
}

UpdateForm2OnUIThread2()
{
    if (control.InvokeRequired)
    {
      // Syntax of this line may be slightly off as I'm writing from memory ... 
      // I normally use an extension method
      control.Invoke(UpdateForm2OnUIThread2); 
    }
    else
    {
      control.Text = "Blah";
    }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:55:06.570

一个。如果您知道自己在做什么，那么使用多个 UI 线程并没有错。

湾。调用 UI 线程工作者是不正确且令人困惑的 - 从开发人员的角度来看，UI 线程 #2 与 #1 相同。一旦你意识到这一点 - 许多问题都会自行解决。

C。如果您想从 view1 [在 UI 线程 #1 中运行] 调用 view2.SomeMethod() [在 UI 线程 #2 中运行] - 在 vi​​ew2 上调用 BeginInvoke。

下面的代码很容易采用。button1 - 启动第二个 UI 线程。button2 - 在 UI 线程 2 中的表单上从 UI 线程 1 调用方法

```
 Form2 form;
    private void button1_Click(object sender, EventArgs e)
    {
        Thread viewThread = new Thread(() =>
        {
            form = new Form2();
            Application.Run(form);
        });
        viewThread.SetApartmentState(ApartmentState.STA);
        viewThread.Start();

        label1.Text = Thread.CurrentThread.ManagedThreadId.ToString();

    }

    private void button2_Click(object sender, EventArgs e)
    {
        if (form != null)
        {
            form.BeginInvoke(new Action(() => 
                {form.Method("Form1 is calling...");}));
        }
    } 
```

形式 2：

```
 public void Method(string s)
    {
        label1.Text = string.Format("{0} '{1}'", 
                        Thread.CurrentThread.ManagedThreadId, s);
    } 
```

您会看到线程编号不同，但字符串已通过它们确定。

# php - 如何检查正则表达式是否正好有两个捕获组？

> ID：14571127
> 
> 赞同：0
> 
> 时间：2013-01-28T20:59:05.653
> 
> 标签：php, regex, preg-match

我正在制作一段可重用的代码。`api_key`可以指定用于捕获和组的正则表达式`signature`，如以下`Authorization`标头：

```
AWS 44CF9590006BF252F707:jZNOcbfWmD/A/f3hSvVzXZjM2HU= 
```

正则表达式将是：

```
^AWS (?<api_key>.+):(?<signature>.+)$ 
```

当然 AWS 和密钥/签名对的顺序可能会改变（这就是我使用正则表达式的原因）。但是**应该总是**有一个`api_key`捕获组和一个`signature`捕获组。

如何使用另一个正则表达式检查这些组是否存在？

**编辑**：根据答案，我似乎根本不擅长解释问题。

（此代码的）用户将提供正则表达式（如上面的那个）。我只需要检查给定的正则表达式是否（至少）两个捕获组（`api_key`和`signature`）。然后，我将使用提供的正则表达式来测试`Authorization`标头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:04:02.700

但是你怎么知道你的新正则表达式正确地测试了你的正则表达式呢？您可能需要 20-30 级正则表达式:)。你试试一些简单的东西怎么样：

```
if (strpos($yourRegEx, "(?<api_key>") !== false && strpos($yourRegEx, "(?<signature>") !== false) { 
```

这是我想更傻的证明：

```
preg_match("\(\?<api_key>.+?\)", $yourRegEx) && preg_match("\(\?<signature>.+?\)", $yourRegEx) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:06:25.867

为什么不检查 PHP，例如：

```
preg_match('^AWS (?<api_key>.+):(?<signature>.+)$', $value, $matches);

assert(count($matches) === 3); // 0, 1 and 2. 
```

# php - mysqli功能收集用户

> ID：14571128
> 
> 赞同：0
> 
> 时间：2013-01-28T20:59:06.150
> 
> 标签：php, mysql, mysqli

正如我在旧帖子中所描述的，我正在将我的“小型”项目`MYSQL`从`MYSQLi`. 我已经成功升级了整个项目，我认为一切正常，直到我创建了新用户。问题是我可以使用我想要的用户名，它会说如果数据不正确，但当数据正确并登录时成功无论我使用什么用户名，它总是以用户名登录我`ID = 1`。

这是我的代码：

登录：

```
function login($username, $password) {
    $id = user_id_from_username($username);
    $username = sanitize($username);
    $password = md5($password);

    global $db_connect;

    $result = $db_connect->query("SELECT COUNT(id) FROM `members` WHERE `username` = '$username' AND `password` = '$password'");
    if (false === $result) {
        return false;
    }
    return ($result->num_rows == 1) ? $id : false;
} 
```

来自 USERNAME 的用户 ID：

```
function user_id_from_username($username) {
    $username = sanitize($username);
    global $db_connect;

    $result = $db_connect->query("SELECT(id) FROM members WHERE username = '$username'");
    if (false === $result) {
        return false;
    }
    return ($result->num_rows == 1) ? true : false;
} 
```

任何帮助都会得到帮助，我尝试了很多东西，并且正在比较我所有`MYSQLi`的`MYSQL`文件，但我仍然找不到任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:03:53.437

```
return ($result->num_rows == 1) ? $id : false; 
```

将始终返回 true，因为您正在计算行数`SELECT COUNT(id)`，因此您将始终得到一个结果

第二件事，在 user_id_from_username 中：

```
 return ($result->num_rows == 1) ? true : false; 
```

您返回 TRUE 而不是 user_id。更改它，以便您返回用户 ID，而不是 true。

true == 1，这就是为什么你总是以 userid 1 结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:06:06.740

您的函数函数 user_id_from_username($username) 将始终返回 true 或 false。您将获得用户 ID 1，因为该函数返回 true = 1。

在您将其重写为 MYSQLi 之前，该函数是什么样的？

# tfs - 为 TeamCity 创建回滚构建

> ID：14571129
> 
> 赞同：5
> 
> 时间：2013-01-28T20:59:06.157
> 
> 标签：tfs, teamcity

我们有一个每晚的 TeamCity 版本，它将最新代码发布到我们的测试网站，恢复数据库以匹配生产，然后应用我们在 TFS 中的任何架构和数据更改。如果此夜间构建失败，则网站将关闭，直到我们手动修复代码和/或数据库脚本并重新启动构建。

我想要的是自动回滚到最后一次成功的构建，以便网站在任何构建中断的情况下都可用。

在花了一些时间调查之后，这是我提出的解决方案：

1.  每夜构建运行，在 TFS 中创建一个新标签（类似于 Nightly-build-{build number}）
2.  创建一个新的 TeamCity 构建，它在每晚构建运行后触发
3.  查找最后一个成功的夜间版本号
4.  在 TFS 中获取与该内部版本号标签相关的版本
5.  回滚构建（夜间构建是否成功完成并不重要）

我不知道如何让回滚构建基于标签获取版本。

对此或其他解决方案的任何帮助将不胜感激。

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T22:12:47.857

明智地使用 TeamCity REST API 可能在这里奏效。我从[这个问题](https://stackoverflow.com/questions/4671888/failed-build-trigger-in-team-city-teamcity)中抄袭了一点，它涵盖了一些相同的领域。你可能可以做这样的事情（我只是在这里吐口水）：

1.  `VerifyBuild`按照步骤 2创建配置。
2.  创建一个`RollbackBuild`可以从给定标签部署的配置，其内部版本号参数化为`%rollback.buildnumber%`

在`VerifyBuild`：

1.  使用 Rest API[列出](http://confluence.jetbrains.net/display/TW/REST+API+Plugin#RESTAPIPlugin-BuildRequests)最近的每晚生产部署
2.  如果最近的部署是成功的，那么你就完成了。
3.  如果最近的部署失败，则获取最后一次成功构建的内部版本号。
4.  使用 Rest API 将的[设置](http://confluence.jetbrains.net/display/TW/REST+API+Plugin#RESTAPIPlugin-BuildConfigurationAndTemplateSettings)为最后成功的内部版本号。`%rollback.buildnumber%``RollbackBuild`
5.  使用 Rest [API](http://confluence.jetbrains.net/display/TCD65/Accessing+Server+by+HTTP)将`RollbackBuild`.

我提出这种方法是因为我不知道您将如何`RollbackBuild`在结帐之前动态获取正确的标签，所以我使用`VerifyBuild`它来预填充它。

# objective-c - 为了避免 [NSNull performSelector:...] 问题而使用 NSNull 类别技巧是否符合规定？

> ID：14571131
> 
> 赞同：3
> 
> 时间：2013-01-28T20:59:14.910
> 
> 标签：objective-c, json, nsnull

在我们的项目中，当网络上有东西返回带有 nil 的 JSON 时，我们偶尔会导致我们的 iPhone 应用程序崩溃。当然，我们确实有一个助手类，它可以处理这样的问题。但是，人们很容易出错，并且确实在 NSDictionary 上调用 objectForKey 而不是我们自己的 stringForKey 或 dateForKey 等。现在，有一个类可以一劳永逸地解决所有此类问题：[https ://github.com/nicklockwood /NullSafe](https://github.com/nicklockwood/NullSafe)

我的问题是：NullSafe 真的安全吗？因为有时你确实希望你的程序在逻辑错误并且得到 NSNull 时崩溃。只是忽略问题会隐藏它。该应用程序可能不会崩溃，但在某些情况下，会做一些奇怪的事情。

现在我倾向于不使用这个类，只是在我们尝试解析获取值之前确保我们的 JSON NSDictionaries 被过滤掉了所有 NSNulls（虽然它可能会影响性能）。

你们有什么感想？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:44:16.083

该类在您向其发送消息时**不会使应用程序崩溃**，这是安全的。它的行为很像`nil`价值。

**这个类不解决bug！**如果你*可能*得到`NSNull`，你应该照原样处理*并*处理这种情况。

一旦我使用了这样的类（也是因为 JSON），但我将`NSLog`（或棘轮断点）放入`-forwardInvocation:`方法中以查看**从何处**以及**为何**调用它。我不会在生产中使用它。

* * *

您还询问了性能。不确定需要更多：`NSNull`从数组中删除 s 或搜索所有类的方法签名；）

# javascript - Javascript sort() 没有正确按字母顺序排列

> ID：14571140
> 
> 赞同：2
> 
> 时间：2013-01-28T20:59:43.113
> 
> 标签：javascript, jquery, sorting

```
var ccArray = [];
ccArray = $("input:checkbox[name='multiselect_ddlCC']").sort(); 
```

我可以说我在数组中得到了我需要的值，但是在 sort() 运行之后，数组顺序发生了变化，但不是按字母顺序排列的。我得到类似 ENG、ATL、NAS、CLT、BIM 的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T21:03:36.770

您必须对 DOM 元素进行排序并重新附加它们。

```
var $els = $("input:checkbox[name='multiselect_ddlCC']");

var $sorted = $($els.toArray().sort(function(a, b) {
  return a.value > b.value;
}));

$els.replaceWith($sorted); 
```

**编辑：**刚刚测试`replaceWith`，它没有工作，我的错。这工作正常：

```
$els.each(function(i) {
  $(this).after($sorted.eq(i));
}); 
```

**演示：http:** [//jsbin.com/agizoy/1/edit](http://jsbin.com/agizoy/1/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T21:06:04.723

您必须实际比较输入值，并且由于它们是您必须使用的字符串，`<`否则`>`减法将无法正常工作：

```
.sort(function (a, b) {
    if ($(a).val() < $(b).val()) {
       return -1;
    }
    else {
       return 1;
    }
}); 
```

[http://jsfiddle.net/cdMBW/](http://jsfiddle.net/cdMBW/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T21:03:03.840

您正在排序 jQuery 包装的 HTML 元素，而不是字符串。谁知道其中哪一个按排序顺序排在另一个之前？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T21:12:55.923

如果您只想要一个选定复选框值的排序列表：

```
var values = [];
$('input:checkbox[name='multiselect_ddlCC']:checked').each(function(i,e){
  values.push(e.value);
});
var sortedValues = values.sort(); 
```

[包括的例子](http://jsfiddle.net/bradchristie/MAzS9/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T21:17:17.780

那应该有效：

```
jQuery.map(ccArray, function(item) { return item.value }).sort() 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-28T21:03:04.497

您需要使用 .val() 而不是元素本身对它们的值进行排序。

```
var ccArray = [];
ccArray = $("input:checkbox[name='multiselect_ddlCC']").val().sort(); 
```

# java - Java 同步和集合

> ID：14571143
> 
> 赞同：1
> 
> 时间：2013-01-28T20:59:52.270
> 
> 标签：java, multithreading, concurrency, synchronization, synchronized-block

如果同步的代码块包含未同步的集合。集合是否被认为是线程安全的？如果没有，您能否提供两个线程可能不安全地访问同步代码中的集合的任何实际场景？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:10:05.980

这是一个非常简单的对象，一个无界队列，我在这里的另一个示例中使用了它：

```
public final class MyQueue<T> {

    private List<T> list = new ArrayList<T>();

    public T take() {
        synchronized(list) {
            while (list.size() == 0) {
                list.wait();
            }
            return list.remove(0);
        }
    }

    public void put(T object) {
        synchronized(list) {
            list.add(object);
            list.notifyAll();
        }
    }
} 
```

这里封装了一个ArrayList，只能通过同步方法访问或修改（所有同步方法都使用同一个锁，就是ArrayList），所以它是线程安全的。ArrayList 的方法本身不同步并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:07:16.137

如果您可以保证*仅*在一个同步块内访问集合，或者对集合的每次访问都被同一对象上的同步块包围，那么您应该是安全的，但这通常是一个很难证明的假设，并且很容易被可能追随您的其他开发人员破坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:21:19.903

仅当访问集合的所有代码都已同步并且它们使用相同的“对象”来同步它时。

例如，下面的代码不会同步，因为它们同步到不同的对象。

```
public class Foo {
    private final Collection<object> collection;

    public void Foo(Collection<object> collection) {
       this.collection = collection;
    }

    public synchronized add(Object o) {
       this.collection.add(o);
    }
}

public class Bar {
    private final Collection<object> collection;

    public void Bar(Collection<object> collection) {
       this.collection = collection;
    }

    public synchronized print() {
       for (Object o : collection) { System.out.println(o); }
    }
} 
```

然后您可能会遇到一种情况，您希望`Object`打印一个 o，因为您认为它是之前添加的，但是正在执行此操作的线程在添加完成之前就停止了。

如果你有一个标志表明你可以访问某个地方，那么更容易想象这一点。如果旗子高了，你就不能进入区块。当您创建一个 Class 实例并绑定到它时，始终会创建此人。因此，在下面的代码中，我们将有三个“旗人”。

```
...
Collection<Object> objs = new ArrayList<Object>();
Foo foo = new Foo(objs);
Bar bar = new Bar(objs);
... 
```

该`synchronized`声明指示旗人在有人通过它后升起它的旗帜，并在它存在该块时将其放下。因为我们将同步设置为类方法，所以它绑定到该实例的“标志人”。因此，不同的“旗人”会向进入处理收集的街区的人举手，但由于他们彼此不同步，所以即使对方升旗，他们也会让任何人进入。

要解决这个问题，您只需要一个人来处理标志。为此，您需要一个共享旗人。在这种情况下，您可以使用集合本身。所以，你会有类似的东西

```
public class Foo {
    private final Collection<object> collection;

    public void Foo(Collection<object> collection) {
       this.collection = collection;
    }

    public synchronized add(Object o) {
       synchronized (collection) {
           this.collection.add(o);
       }
    }
}

public class Bar {
    private final Collection<object> collection;

    public void Bar(Collection<object> collection) {
       this.collection = collection;
    }

    public print() {
       synchronized (collection) {
           for (Object o : collection) { System.out.println(o); }
       }
    }
} 
```

因为只有收藏“flag person”在升旗，所以每个人都会根据“谁先来”而不是“谁先完成”来访问收藏。

我想我的解释比它应该的要困难一些，但我希望它可以有所帮助。如果我可以在这里画，它可能会更好理解：P

# python - In Python, is there a good "magic method" to represent object similarity?

> ID：14571144
> 
> 赞同：2
> 
> 时间：2013-01-28T20:59:56.907
> 
> 标签：python

I want instances of my custom class to be able to compare themselves to one another for similarity. This is different than the `__cmp__` method, which is used for determining the sorting order of objects.

Is there a magic method that makes sense for this? Is there any standard syntax for doing this?

How I imagine this could look:

```
>>> x = CustomClass("abc")
>>> y = CustomClass("abd")
>>> z = CustomClass("xyz")
>>> x.__<???>__(y)
0.75
>>> x <?> y
0.75
>>> x.__<???>__(z)
0.0
>>> x <?> z
0.0 
```

Where `<???>` is the magic method name and `<?>` is the operator.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:07:12.653

Take a look at the [numeric types emulation in the datamodel](http://docs.python.org/2/reference/datamodel.html#emulating-numeric-types) and pick an operator hook that suits you.

I don't think there is currently an operator that is an exact match though, so you'll end up surprising some poor hapless future code maintainer (could even be you) that you overloaded a standard operator.

For a Levenshtein Distance I'd just use a regular method instead. I'd find a `one.similarity(other)` method a lot clearer when reading the code.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T21:28:17.230

well, you *could* override `__eq__` to mean both boolean logical equality and 'fuzzy' simlirity, by returning a sufficiently weird result from `__eq__`:

```
class FuzzyBool(object):
    def __init__(self, quality, tolerance=0):
        self.quality, self._tolerance = quality, tolerance
    def __nonzero__(self):
        return self.quality <= self._tolerance
    def tolerance(self, tolerance):
        return FuzzyBool(self.quality, tolerance) 
    def __repr__(self):
        return "sorta %s" % bool(self)

class ComparesFuzzy(object):
    def __init__(self, value):
        self.value = value
    def __eq__(self, other):
        return FuzzyBool(abs(self.value - other.value))
    def __hash__(self):
        return hash((ComparesFuzzy, self.value)) 
```

```
>>> a = ComparesFuzzy(1)
>>> b = ComparesFuzzy(2)
>>> a == b
sorta False
>>> (a == b).tolerance(3)
sorta True 
```

the default behavior of the comparator should be that it is Truthy only if the compared values are exactly equal, so that normal equality is unaffected

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T21:09:00.937

No, there is not. You can make a class method, but I don't think there is any intuitive operator to overload that would do what you're looking for. And, to avoid confusion, I would avoid overloading unless it is obviously intuitive.

I would simply call is CustomClass.similarity(y)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T21:05:53.980

I don't think there is a magic method (and corresponding operator) that would make sense for this in any context.

However, if, with a bit of fantasy, your instances can be seen as vectors, then checking for similarity could be analogous to calculating the scalar product. It would make sense then to use `__mul__` and multiplication sign for this (unless you have already defined product for `CustomClass` instances).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T21:25:02.613

No magic function/operator for that.

When I think of "similarity" for ints and floats, I think of the difference being lower than a certain threshold. Perhaps that's something you might use?

E.g. being able to calculate the "difference" between your objects might be suitable in the **sub** method.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T21:29:06.633

In the example you've cited, I would use difflib. This conducts spell-check like comparisons between strings. But in general, if you really are comparing objects rather than strings, then I agree with the others; you should probably create something context-specific.

# javascript - 为什么 John Resig 的 JavaScript 需要第二个闭包？

> ID：14571145
> 
> 赞同：4
> 
> 时间：2013-01-28T20:59:58.490
> 
> 标签：javascript, closures, anonymous-function, memoization

我正在阅读**[John Resig](http://ejohn.org/about/)**和**[Bear Bibeault 撰写](http://www.bibeault.org/resume/)*****[的 JavaScript Ninja](http://jsninja.com)***的秘密，目前已读到第 5 章关于闭包的内容。我认为有闭包的一般要点以及 JavaScript 如何使用函数作用域而不是我熟悉的 C++/Java 的块作用域进行操作。我无法完全理解的一件事是有时在代码中似乎有更多的函数声明，而不是我能弄清楚的目的。例如，在第 5.5.1 节中，他介绍了自记忆函数，它基本上是一个记住计算值并将它们存储在缓存中以供后续调用相同输入的函数。他给出了以下代码：

```
Function.prototype.memoized = function (key) {                    // #1
    this._values = this._values || {};
    xyz = this._values;
    return this._values[key] !== undefined ?
        this._values[key] :
        this._values[key] = this.apply(this, arguments);
};

Function.prototype.memoize = function () {                        // #2
    var fn = this;
    return function() {                                           // #2.1
        return fn.memoized.apply(fn, arguments);
    };
};

var isPrime = (function (num) {
    var prime = num !== 1;

    for (var i = 2; i < num; i++) {
        if (num % i === 0) {
            prime = false;
            break;
        }
    }

    return prime;
}).memoize(); 
```

我理解大部分代码。然而，我无法理解的是为什么第二个记忆功能不能简单地是：

```
Function.prototype.memoize = function () {                      
    return this.memoized.apply(fn, arguments);
}; 
```

谁能给我一个很好的解释他上面的代码中发生了什么以及它与我在这里写的有什么不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:03:03.940

有很大的不同：

```
return function() {
    return fn.memoized.apply(fn, arguments);
}; 
```

*返回*一个您可以稍后调用的**函数。**`memoized`仅在调用函数时调用。

```
return this.memoized.apply(fn, arguments); 
```

*调用*函数`memoized`并返回它的**返回值**。

# ios - IOS：从直线到贝塞尔曲线的动画转换

> ID：14571148
> 
> 赞同：13
> 
> 时间：2013-01-28T21:00:09.567
> 
> 标签：ios, core-graphics, bezier, uibezierpath, nsbezierpath

我想为一条弯曲成贝塞尔曲线的直线制作动画（从“_”到“n”），有没有图书馆可以帮助我做到这一点？

我知道如何使用 UIBezierPath 绘制贝塞尔曲线，我可以快速重绘并逐步进行转换，但如果已经完成了它会很酷:-)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-28T21:48:26.697

我可能会用`CADisplayLink`. 例如，您可以在视图控制器中使用 来执行此操作`CAShapeLayer`，例如：

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface ViewController ()

@property (nonatomic) CFTimeInterval firstTimestamp;
@property (nonatomic, strong) CAShapeLayer *shapeLayer;
@property (nonatomic, strong) CADisplayLink *displayLink;
@property (nonatomic) NSUInteger loopCount;

@end

static CGFloat const kSeconds = 5.0;

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self addShapeLayer];
    [self startDisplayLink];
}

- (void)addShapeLayer
{
    self.shapeLayer = [CAShapeLayer layer];
    self.shapeLayer.path = [[self pathAtInterval:0.0] CGPath];
    self.shapeLayer.fillColor = [[UIColor clearColor] CGColor];
    self.shapeLayer.lineWidth = 3.0;
    self.shapeLayer.strokeColor = [[UIColor redColor] CGColor];
    [self.view.layer addSublayer:self.shapeLayer];
}

- (void)startDisplayLink
{
    self.displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(handleDisplayLink:)];
    [self.displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
}

- (void)stopDisplayLink
{
    [self.displayLink invalidate];
    self.displayLink = nil;
}

- (void)handleDisplayLink:(CADisplayLink *)displayLink
{
    if (!self.firstTimestamp)
        self.firstTimestamp = displayLink.timestamp;

    self.loopCount++;

    NSTimeInterval elapsed = (displayLink.timestamp - self.firstTimestamp);

    self.shapeLayer.path = [[self pathAtInterval:elapsed] CGPath];

    if (elapsed >= kSeconds)
    {
        [self stopDisplayLink];
        self.shapeLayer.path = [[self pathAtInterval:0] CGPath];

        self.statusLabel.text = [NSString stringWithFormat:@"loopCount = %.1f frames/sec", self.loopCount / kSeconds];
    }
}

- (UIBezierPath *)pathAtInterval:(NSTimeInterval) interval
{
    UIBezierPath *path = [UIBezierPath bezierPath];

    [path moveToPoint:CGPointMake(0, self.view.bounds.size.height / 2.0)];

    CGFloat fractionOfSecond = interval - floor(interval);

    CGFloat yOffset = self.view.bounds.size.height * sin(fractionOfSecond * M_PI * 2.0);

    [path addCurveToPoint:CGPointMake(self.view.bounds.size.width, self.view.bounds.size.height / 2.0)
            controlPoint1:CGPointMake(self.view.bounds.size.width / 2.0, self.view.bounds.size.height / 2.0 - yOffset)
            controlPoint2:CGPointMake(self.view.bounds.size.width / 2.0, self.view.bounds.size.height / 2.0 + yOffset)];

    return path;
}

@end 
```

![动画图像](../Images/724bfb4b9d77538af9512cf6236d27d6.png)

* * *

或者，如果你想通过子类化来做到这一点`UIView`，你可以这样做：

```
#import "View.h"
#import <QuartzCore/QuartzCore.h>

@interface View ()

@property (nonatomic, strong) CADisplayLink *displayLink;
@property (nonatomic) CFTimeInterval firstTimestamp;
@property (nonatomic) CFTimeInterval displayLinkTimestamp;
@property (nonatomic) NSUInteger loopCount;

@end

static CGFloat const kSeconds = 5.25;

@implementation View

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        [self startDisplayLink];
    }

    return self;
}

- (void)startDisplayLink
{
    _displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(handleDisplayLink:)];
    [_displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
}

- (void)stopDisplayLink
{
    [self.displayLink invalidate];
    self.displayLink = nil;
}

- (void)handleDisplayLink:(CADisplayLink *)displayLink
{
    if (!self.firstTimestamp)
        self.firstTimestamp = displayLink.timestamp;

    self.displayLinkTimestamp = displayLink.timestamp;

    self.loopCount++;

    [self setNeedsDisplayInRect:self.bounds];

    NSTimeInterval elapsed = (displayLink.timestamp - self.firstTimestamp);

    if (elapsed >= kSeconds)
    {
        [self stopDisplayLink];
        self.displayLinkTimestamp = self.firstTimestamp + kSeconds;
        [self setNeedsDisplayInRect:self.bounds];
        self.statusLabel.text = [NSString stringWithFormat:@"loopCount = %.1f frames/sec", self.loopCount / kSeconds];
    }
}

- (UIBezierPath *)pathAtInterval:(NSTimeInterval) interval
{
    UIBezierPath *path = [UIBezierPath bezierPath];

    [path moveToPoint:CGPointMake(0, self.bounds.size.height / 2.0)];

    CGFloat fractionOfSecond = interval - floor(interval);

    CGFloat yOffset = self.bounds.size.height * sin(fractionOfSecond * M_PI * 2.0);

    [path addCurveToPoint:CGPointMake(self.bounds.size.width, self.bounds.size.height / 2.0)
            controlPoint1:CGPointMake(self.bounds.size.width / 2.0, self.bounds.size.height / 2.0 - yOffset)
            controlPoint2:CGPointMake(self.bounds.size.width / 2.0, self.bounds.size.height / 2.0 + yOffset)];

    return path;
}

- (void)drawRect:(CGRect)rect
{
    NSTimeInterval elapsed = (self.displayLinkTimestamp - self.firstTimestamp);

    UIBezierPath *path = [self pathAtInterval:elapsed];

    [[UIColor redColor] setStroke];
    path.lineWidth = 3.0;
    [path stroke];
}

@end 
```

我测试了子类`UIView`和视图控制器，它们都产生了大约每秒 60 帧。

# mysql - 在mysql中搜索多个表

> ID：14571151
> 
> 赞同：1
> 
> 时间：2013-01-28T21:00:27.540
> 
> 标签：mysql, search

我有一个这样结构的表（不是实际的数据或字段，但同样的结构适用）：

```
ID | City        Field2 Field 3
-------------------------------
1    New York    Ohio   data      
2    Cincinnati  data   data
3    Los Angeles data   Ohio
4    Cleveland   data   data 
```

然后有第二个类似这样的表（同样，不是实际数据）

```
City        State
-------------------------------
Los Angeles California
New York    New York
Cincinnati  Ohio
Cleveland   Ohio
Houston     Texas 
```

等等

我有一个允许用户搜索数据库的 php 网页；当他们这样做时，它将自动打印（在我的示例中）城市之后第二个表中的相应状态。

但是，如果用户搜索“Ohio”，它应该返回所有四条记录，即使“Ohio”在第一个表中不存在。看起来我必须运行多个查询 - 在第一个表中找到搜索词，在第二个表中再次找到它，然后在第一个表中搜索第二个表的第 1 列（然后加入结果） . 有没有更简单的方法来做到这一点？（我对 MySQL 还很陌生。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:03:37.003

您是否尝试过使用`UNION`?

```
SELECT City FROM table1 WHERE Field2 = 'Ohio' OR Field3 = 'Ohio'
UNION ALL
SELECT City FROM table2 WHERE State = 'Ohio' 
```

查看您的查询是什么样子会很有帮助。

# css - 无论页面宽度如何，如何定位 DIV？

> ID：14571156
> 
> 赞同：1
> 
> 时间：2013-01-28T21:00:41.580
> 
> 标签：css, html, center

我的网站上有一个大横幅，横幅有旋转图像，都在`<div>`. 它横跨整个页面，而且图像很大，2000px 宽，因此几乎无论屏幕宽度如何，图像都会不断向左和向右扩展。

如何保持`<div>`定位的中心，使其内部的所有内容与页面的内容（大约 1000 像素）对齐，并且即使页面宽度被拉伸也保持在那里？

现在，无论宽度如何，图像的左侧都只是贴在页面的左侧，因此图像会根据窗口的宽度相对于页面内容移动。这是`<div>`现在的代码

```
position: relative;
display: block;
width: 2000px;
height: 648px;
margin: 58px auto 0 auto; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:12:00.370

当宽度超过页面宽度时，我似乎可以这样做的唯一方法是使用 CSS3`calc`函数：

```
left: -webkit-calc((2000px - 100%) / -2) 
```

这基本上会将左值设置为剩余值的负一半。该`-webkit-`前缀使其与 Chrome 兼容。如果您选择实施此解决方案，则必须根据需要添加其他浏览器前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:55:18.817

你有没有尝试过 ：

```
<img style="position:absolute;left:50%;margin-left:-1000px;"/> 
```

# visual-studio-2012 - System.IO.FileNotFoundException：在 Visual Studio 中调试 ASP.NET 项目时发生读取 C:\Windows\TEMP\ 目录错误的错误

> ID：14571157
> 
> 赞同：2
> 
> 时间：2013-01-28T21:00:46.850
> 
> 标签：visual-studio-2012

在调试项目 Visual Studio 时显示一些错误。当我尝试在数据库文件（.mdf 扩展名）中添加表时，VisualStudio 会自动重新启动。错误列表-->

```
 System.IO.FileNotFoundException: Error reading the C:\Windows\TEMP\ directory.
   at System.IO.FileSystemWatcher.StartRaisingEvents()
   at System.IO.FileSystemWatcher.set_EnableRaisingEvents(Boolean value)
   at Microsoft.IisExpress.SysTray.TrayAppHiddenForm.TrayAppHiddenForm_Load(Object sender,    EventArgs e)
   at System.Windows.Forms.Form.OnLoad(EventArgs e)
   at System.Windows.Forms.Form.OnCreateControl()
   at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
   at System.Windows.Forms.Control.CreateControl()
   at System.Windows.Forms.Control.WmShowWindow(Message& m)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
   at System.Windows.Forms.ContainerControl.WndProc(Message& m)
   at System.Windows.Forms.Form.WmShowWindow(Message& m)
   at System.Windows.Forms.Form.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-06-11T08:27:41.697

嘿，这也发生在我身上，当我直接进入目录 C:\Windows\TEMP 时问题解决了，系统要求我访问该文件夹，然后我单击“是”，以便当前用户拥有该文件夹的权限并且错误消失了。这是我的 Windows UPDATE 之后的访问权限问题

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T11:01:20.967

这篇博文绝对解决了我们面临的问题（这将描述我们面临的问题）。- [http://devatheart.azurewebsites.net/2011/04/18/troubleshooting-xmlserializer-failure/](http://devatheart.azurewebsites.net/2011/04/18/troubleshooting-xmlserializer-failure/)

我们有这段代码

System.Diagnostics.Process.Start(RetrievedURL); 它在按钮单击和打开网页的背景中生成 IE 进程（因为 IE 是网络服务器上的默认浏览器）。

这不是一件聪明的事情，但我们删除了该代码，它肯定会在后台停止 IE 进程。

上面的帖子解释了它是如何与 XML 序列化失败相关联的。感谢您的研究和这篇博文 Slobodan Stipic，又名 Slobo。

希望这个解决方案有所帮助。

# matomo - Piwik 删除自定义变量

> ID：14571161
> 
> 赞同：0
> 
> 时间：2013-01-28T21:00:58.950
> 
> 标签：matomo

我在我的 Piwik 开发实例中使用自定义变量乱搞，并输入了一些垃圾值。我想从 Piwik 中删除这些，但我找不到这样做的方法。有谁知道如何从 Piwik 中删除自定义变量？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T01:43:29.193

要删除自定义变量：

```
deleteCustomVariable (index, scope ) 
```

[http://piwik.org/docs/javascript-tracking/#toc-custom-variables](http://piwik.org/docs/javascript-tracking/#toc-custom-variables)

更新：对不起，我看错了。要将其从您的数据库中取出，您将不得不进行一些 MYSQL 手术。寻找：

```
custom_var_k - holds key (name of your variable) 
custom_var_v - holds the actual value 
```

# c# - 将 ObjectCache 与 PerCall 服务一起使用

> ID：14571163
> 
> 赞同：0
> 
> 时间：2013-01-28T21:01:09.407
> 
> 标签：c#, wcf, entity-framework, caching

我目前有一个带有`InstanceContextMode = InstanceContextMode .PerCall`. 我这样做是因为服务方法与实体框架模型交互，并且我读到我应该使用`PerCall`而不是`Single`. 现在，我想添加一个返回大型数据集的新服务方法。我最初的想法是在服务启动时关闭一个线程，并缓存数据集，这样当调用服务方法时，我就不必访问数据库......我只需返回缓存。但问题是我不能这样做，因为我正在使用`PerCall`，所以在实例被销毁后，我的缓存也是如此。

我的问题是，我有哪些缓存选项？我真的需要`PerCall`还是可以将其设为单例，但只需确保每次调用的 EF 上下文都是新的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:29:49.563

您对 EF 上下文和生命周期是正确的；它应该尽可能短暂。在 web(-service) 场景中，它通常意味着“每个请求/调用”（最长）。

当然，您可以自己处理生命周期，但这是一个带有 DI 的 IoC 容器真正闪耀的场景。您只需将服务和 EF 上下文注册为“每个请求”并将缓存注册为单例，容器将为您完成繁重的工作并注入正确的依赖项。如果需要，您还可以进行更细粒度的生命周期范围界定。

一些最常见的：

*   [忍者](http://www.ninject.org/)
*   [自动法](http://code.google.com/p/autofac/)
*   [统一](http://unity.codeplex.com/)
*   [温莎城堡](http://www.castleproject.org/)

有很多很好的教程和指南可用于使用 WCF 设置最流行的 IoC 容器，例如“[如何使用 WCF 服务使用依赖注入 (Ninject)](http://www.aaronstannard.com/post/2011/08/16/dependency-injection-ninject-wcf-service.aspx) ”。

# android - 带有指向按钮的箭头的 Android 应用程序

> ID：14571169
> 
> 赞同：-1
> 
> 时间：2013-01-28T21:01:44.243
> 
> 标签：android

嘿，任何人都可以帮助我，我怎样才能获得这种帮助

[http://www.android-app-patterns.com/category/context-help](http://www.android-app-patterns.com/category/context-help)

它对用户非常有用

谢谢 ;）

PS：对不起这个愚蠢的标题，但我原来的标题是“带有上下文帮助的android应用程序”，而stackoverflow不喜欢我的标题:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:03:26.653

基本上，这可以通过在 Activity 顶部放置一个具有透明背景的 Dialog 以及指向 Activity 组件的箭头来完成。

只需在 Dialog 上使用与 Activity 相同的尺寸，以便箭头与 Activity 布局上的组件匹配。

# c++ - 在 Linux 上用 C++ 显示 2D 图像的简单库

> ID：14571177
> 
> 赞同：1
> 
> 时间：2013-01-28T21:02:18.650
> 
> 标签：c++, linux, user-interface

我想要一个工具来调试 2D 平面网格。我希望能够显示它们并调试以能够调试某些东西。

是否有一个小部件（适用于 Linux 上的任何工具包 - QT、GTK+Cairo、...）可以显示图像、滚动它们并缩放它。是否有任何小部件可以处理它（无需手动实现缩放、滚动等）？

侧面要求：

*   需要在 CentOS 6 上工作
*   我需要它用于 C++。不幸的是，在我的情况下更改构建系统比听起来更难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:22:33.143

[Qt Graphics View](http://qt-project.org/doc/qt-5.0/qtwidgets/graphicsview.html)无疑是一个有用的工具，它可以让您轻松滚动、缩放、旋转。您之前可能想学习 Qt 的基础知识。（并且 Qt 在 C++ 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:02:52.677

这是一个现成的建议。

这在 Web 浏览器中很容易实现。Web 浏览器引擎已经具有调整图像大小和滚动图像的基本功能。当然，您可能需要一点 JavaScript 来将它们绑定在一起。

那么为什么不使用[WebKit](http://www.webkit.org/)呢？许多领先的工具包都有绑定（例如 Qt 的 QWebView），因此您可以选择您最熟悉的工具包。

是的，这太过分了。但它是您不必编写的代码，时间就是金钱。

# kendo-ui - kendoui：将远程数据源绑定到模板中的下拉列表

> ID：14571201
> 
> 赞同：0
> 
> 时间：2013-01-28T21:03:40.593
> 
> 标签：kendo-ui

我有一个使用列表视图的编辑模板，并且想要一个从远程源填充的下拉列表。但下拉列表只显示加载图标。

这是 DropDownList 数据源。

```
var dsTitles = new kendo.data.DataSource({
    transport: {
        read: "../data/options/",
        dataType: "json"
    },
    serverFiltering: true,
    filter: [{
        field: "category_opt",
        operator: "eq",
        value: "title"
    }]
}); 
```

这就是我在编辑模板中的内容

```
<input name="title_clt"
       data-bind="value:title_clt"
       data-value-field="value_opt"
       data-text-field="label_opt"
       data-source="dsTitles"
       data-role="dropdownlist"
       required
       validationMessage="Required" /> 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:57:49.117

您的代码基本上没问题，**但是**您可能错过了几个问题。

由于您将 DataSource 定义`data-source="dsTitles"`为 HTML 的一部分，因此您定义事物的顺序非常重要。

首先要定义的是 HTML。这意味着这`dsTitle`应该是全球性的。然后，在`input`处理完之后，您应该调用`kendo.init`.

所以，它应该是这样的：

```
<html>
<head>
    <meta charset="UTF-8"/>
    <title>OnaBai - KendoUI DrowDownList</title>
    <!-- Kendo UI Web styles-->
    <link href="styles/kendo.common.min.css" rel="stylesheet" type="text/css"/>
    <link href="styles/kendo.default.min.css" rel="stylesheet" type="text/css"/>

    <!-- Kendo UI Web scripts-->
    <script src="js/jquery.min.js" type="text/javascript"></script>
    <script src="js/kendo.web.min.js" type="text/javascript"></script>

    <!-- Web Page styling -->
    <style type="text/css">
    </style>

    <script type="text/javascript">
        var dsTitles = new kendo.data.DataSource({
            transport: {
                read: "../data/options/",
                dataType: "json"
            },
            serverFiltering: true,
            filter: [{
                field: "category_opt",
                operator: "eq",
                value: "title"
            }]
        });

        $(document).ready(function () {
            kendo.init("input");
        });
    </script>
</head>
<body>
<input name="title_clt"
       data-bind="value:title_clt"
       data-value-field="value_opt"
       data-text-field="label_opt"
       data-source="dsTitles"
       data-role="dropdownlist"
       required
       validationMessage="Required" />
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:25:28.327

我认为答案可能就像使用 Kendo DropDownListFor 一样简单，它将填充给定的数据。

# c++ - MPICH 通信失败

> ID：14571203
> 
> 赞同：2
> 
> 时间：2013-01-28T21:03:49.707
> 
> 标签：c++, linux, communication, mpich

我有一个简单的 MPICH 程序，其中进程以环形顺序相互发送和接收消息。
我已经设置了 2 个相同的虚拟机，并确保网络工作正常。我在两台机器上都测试了一个简单的 MPICH 程序，它运行良好。当我尝试像上述程序一样在不同机器上的进程之间进行通信时，就会出现问题。我收到以下错误：

> MPI_Send 中的致命错误：进程失败，错误堆栈：
> MPI_Send(171).............: MPI_Send(buf=0xbfed8c08, count=1, MPI_INT, dest=1,
> tag =1，MPI_COMM_WORLD) 失败
> MPID_nem_tcp_connpoll(1826)：等级 1 的通信错误：连接被拒绝

*   SSH 是无密码的，双方都可以正常工作。
*   `/etc/hosts`配置正确。
*   两台机器上的防火墙都被禁用。
*   配置 NFS 客户端/服务器并在它们之间共享一个目录。（[据此](http://webappl.blogspot.com/2011/05/setting-up-mpich2-cluster-with-ubuntu.html)）
*   使用 Hydra 尝试了 MPICH 和 OpenMPI

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:02:20.973

这就是我所做的，它有效！

使用源代码（tarball）安装了以下包

```
hydra 
openmpi 
```

创建主机文件（两个节点）

```
# cat /home/spatel/mpi/hydra/hosts
node1
node2 
```

在 .bashrc 中设置变量（两个节点）

```
echo HYDRA_HOST_FILE=/home/spatel/mpi/hydra/hosts >> ~/.bashrc 
```

使用 HelloWorld MPI 程序在单节点上运行。

```
node1# /home/spatel/mpi/hydra/bin/mpiexec -np 1 /home/spatel/mpi/mpi_hello_world
Hello world from processor node1.example.com, rank 0 out of 1 processors 
```

`-machinefile`使用选项在多个节点上运行`-np`是处理器数量

```
node1# /home/spatel/mpi/hydra/bin/mpiexec -np 4 -machinefile /home/spatel/mpi/hydra/hosts /home/spatel/mpi/mpi_hello_world
Hello world from processor node1.example.com, rank 0 out of 1 processors
Hello world from processor node2.example.com, rank 0 out of 1 processors
Hello world from processor node1.example.com, rank 0 out of 1 processors
Hello world from processor node2.example.com, rank 0 out of 1 processors 
```

# c - 将 C 字符串保存到 RAM 时描绘内存

> ID：14571206
> 
> 赞同：0
> 
> 时间：2013-01-28T21:03:54.390
> 
> 标签：c, string

对于我的作业，我有以下问题：

> Bob 使用指针来保存 C 字符串“哇！惊人。” 在 RAM 中的地址 100 下标 (16) 处。将内存描述为具有两列的表。第一列将是 RAM 中的地址，第二列将是存储在该地址的数据。
> 
> 以二进制形式显示存储在 100 下标 (16) 处的 C 字符串 Bob 的内存及其内容。换句话说：将给定C字符串的二进制地址和二进制字节写成一个有两列的表，最左边的列是地址。

我只是想确保我走在正确的轨道上。我是否只需使用 ASCII 将字符串转换为二进制并将 100 [16]转换为十进制即 256。然后将字符串分成 8 位组件，在地址 256 处放置前 8 位（第一个字母），在地址 257 处放置第二位8 位（第二个字母），等等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:09:47.363

James 使用指针将 C 字符串“Test”保存在 RAM 中地址 10 subscript(16) 处。

```
 Address    data
0001:0000  0101-0100
0001:0001  0110-0101
0001:0010  0111-0011
0001:0011  0111-0100
0001:0100  0000-0000 
```

（我正在脑海中进行字母到ASCII到二进制的转换，所以我可能有点偏离）

（已编辑：修复了评论中指出的愚蠢错误）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:07:29.220

你的解释是正确的。

但是，这可能不是关于 SO 的一个非常有用的问题。

# wpf - 使用列跨度的困难

> ID：14571207
> 
> 赞同：0
> 
> 时间：2013-01-28T21:04:00.563
> 
> 标签：wpf, windows-phone-7, xaml, windows-phone-7.1, columnspan

我有四个像这样的 texbox 网格：

![是）我有的](../Images/e84af46467fd1892dcd34ee855a20931.png)

我会得到这个：

![我想要的是](../Images/bc0bc87c7c9ed1a3166eb8e5f0ee4dae.png)

我曾尝试使用列跨度但没有成功:(

```
<Grid Margin="20,0,0,20" VerticalAlignment="Top" HorizontalAlignment="Stretch">
<Grid.RowDefinitions>
    <RowDefinition />                                           
    <RowDefinition />
</Grid.RowDefinitions>

<Grid.ColumnDefinitions>
    <ColumnDefinition Width="Auto"/>
    <ColumnDefinition Width="*"/>
</Grid.ColumnDefinitions>
<TextBlock  Grid.ColumnSpan="1" Grid.Row="0" Grid.Column="0" Margin="0,0,10,0" x:Name="TxtBox_CodeTiers" TextWrapping="Wrap" Text="{Binding m_strCode}"  HorizontalAlignment="Stretch" VerticalAlignment="Top" FontSize="23"/>
<TextBlock  Grid.ColumnSpan="1" Grid.Row="0" Grid.Column="1" Margin="0,0,10,0" x:Name="TxtBox_NomTiers" TextWrapping="Wrap" Text="{Binding m_strNom}"   HorizontalAlignment="Stretch" VerticalAlignment="Top" FontSize="23" />
<TextBlock  Grid.Row="1" Grid.Column="0" Margin="0,0,05,0" x:Name="TxtBox_CPostal" TextWrapping="Wrap" Text="{Binding m_strCpostal}"   HorizontalAlignment="Stretch" VerticalAlignment="Top" Foreground="{StaticResource PhoneDisabledBrush}"/>
<TextBlock  Grid.Row="1" Grid.Column="1" Margin="0,0,05,0" x:Name="TxtBox_Ville" TextWrapping="Wrap" Text="{Binding m_strVille}"   HorizontalAlignment="Stretch" VerticalAlignment="Top" Foreground="{StaticResource PhoneDisabledBrush}"/>
</Grid> 
```

这个更好:)

```
<Grid Margin="12,0,0,20" VerticalAlignment="Top" HorizontalAlignment="Stretch">
<Grid.RowDefinitions>
    <RowDefinition />                                           
    <RowDefinition />
</Grid.RowDefinitions>

<Grid.ColumnDefinitions>
    <ColumnDefinition Width="Auto"/>
    <ColumnDefinition/>
    <ColumnDefinition/>
</Grid.ColumnDefinitions>
<TextBlock Grid.Row="0" Grid.ColumnSpan="2"  x:Name="TxtBox_CodeTiers" Margin="0,0,20,0" TextWrapping="Wrap" Text="{Binding m_strCode}"  HorizontalAlignment="Stretch" VerticalAlignment="Top" FontSize="23" Loaded="TxtBlock_Loaded"/>
<TextBlock Grid.Row="0" Grid.Column="2"  x:Name="TxtBox_NomTiers" TextWrapping="Wrap" Text="{Binding m_strNom}"   HorizontalAlignment="Stretch" VerticalAlignment="Top" FontSize="23" Loaded="TxtBlock_Loaded"/>
<TextBlock Grid.Row="1" Grid.Column="0"  x:Name="TxtBox_CPostal" Margin="0,0,20,0" TextWrapping="Wrap" Text="{Binding m_strCpostal}"   HorizontalAlignment="Stretch" VerticalAlignment="Top" Foreground="{StaticResource PhoneDisabledBrush}" Loaded="TxtBlock_Loaded"/>
<TextBlock Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2" x:Name="TxtBox_Ville" TextWrapping="Wrap" Text="{Binding m_strVille}"   HorizontalAlignment="Stretch" VerticalAlignment="Top" Foreground="{StaticResource PhoneDisabledBrush}"  Loaded="TxtBlock_Loaded"/>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:14:28.030

您可能需要为“C”和“D”框添加另一列以对齐，然后只需将`ColumnSpan`“A”框设置为跨越新列

```
 <Grid Margin="20,0,0,20" VerticalAlignment="Top" HorizontalAlignment="Stretch">
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="121*"/>
            <ColumnDefinition Width="52*"/>
            <ColumnDefinition Width="190*"/>
        </Grid.ColumnDefinitions>
        <TextBlock Grid.Row="0" Grid.ColumnSpan="2"  x:Name="TxtBox_CodeTiers" TextWrapping="Wrap" Text="AAAAAAAAA"  HorizontalAlignment="Stretch" VerticalAlignment="Top" FontSize="23"/>
        <TextBlock Grid.Row="0" Grid.Column="2"  x:Name="TxtBox_NomTiers" TextWrapping="Wrap" Text="BBBBBBBB"   HorizontalAlignment="Stretch" VerticalAlignment="Top" FontSize="23" />
        <TextBlock Grid.Row="1" Grid.Column="0"  x:Name="TxtBox_CPostal" TextWrapping="Wrap" Text="CCCCCCCCCCC"   HorizontalAlignment="Stretch" VerticalAlignment="Top" Foreground="{StaticResource PhoneDisabledBrush}"/>
        <TextBlock Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2" x:Name="TxtBox_Ville" TextWrapping="Wrap" Text="DDDDDDDDD"   HorizontalAlignment="Stretch" VerticalAlignment="Top" Foreground="{StaticResource PhoneDisabledBrush}"  />
    </Grid> 
```

![在此处输入图像描述](../Images/e1bb4ebef4c852a99bba1805d2fdb115.png)

![在此处输入图像描述](../Images/f88c9e60043987a3343fcc9f6156ae9b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:19:58.487

您可以在第二个网格行中使用`StackPanel`：

```
<Grid Margin="20,0,0,20" VerticalAlignment="Top" HorizontalAlignment="Stretch">
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>

    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <TextBlock  Grid.ColumnSpan="1" Grid.Row="0" Grid.Column="0" Margin="0,0,10,0" x:Name="TxtBox_CodeTiers" TextWrapping="Wrap" Text="{Binding m_strCode}"  HorizontalAlignment="Stretch" VerticalAlignment="Top" FontSize="23"/>
    <TextBlock  Grid.ColumnSpan="1" Grid.Row="0" Grid.Column="1" Margin="0,0,10,0" x:Name="TxtBox_NomTiers" TextWrapping="Wrap" Text="{Binding m_strNom}"   HorizontalAlignment="Stretch" VerticalAlignment="Top" FontSize="23" />      
    <StackPanel Orientation="Horizontal" Grid.Row="1" Grid.ColumnSpan="2">
        <TextBlock Margin="0,0,05,0" x:Name="TxtBox_CPostal" TextWrapping="Wrap" Text="{Binding m_strCpostal}"   HorizontalAlignment="Stretch" VerticalAlignment="Top" Foreground="{StaticResource PhoneDisabledBrush}"/>
        <TextBlock Margin="0,0,05,0" x:Name="TxtBox_Ville" TextWrapping="Wrap" Text="{Binding m_strVille}"   HorizontalAlignment="Stretch" VerticalAlignment="Top" Foreground="{StaticResource PhoneDisabledBrush}"/>
    </StackPanel>
</Grid> 
```

# java - 二进制搜索程序编译但不起作用

> ID：14571210
> 
> 赞同：-3
> 
> 时间：2013-01-28T21:04:13.153
> 
> 标签：java

```
// program: BinSearch1.java
//
import java.util.*;

class BinSearch1
{
    public static void main(String[] args)
    {
        final int size = 50;
        Scanner console = new Scanner(System.in);

        // declaring arrays
        int[]  item = new int[size];    // The list of numbers
        int    items=0;     // number of values in list
        int location;
        int seekValue;

        // method returns number of items entered by user.
        // user enters –1 to end entry process.
        //
        items = createInOrder( item );

        System.out.println("Element\t\tValue");

        // Display the current list
        //
        for( int i=0; i < items; i++ )
            System.out.println( i + "\t\t" + item[i] );

        System.out.print("Enter a value to seek: ");
        seekValue = console.nextInt();

        location = binSearch( item, items, seekValue);

        if( location >= 0 )
          System.out.println("Element found at location " + location);
        else
          System.out.println("Element not found in list");
    }

    // method: createInOrder
    //   This method will fill in a previously created array with values
    // in increasing order. When complete the method will return the number
    // of values inserted into the list.
    //
    public static int createInOrder( int[] n )
    {
        int    i;
        int    value=0;
        int    items=0;
        Scanner console = new Scanner(System.in);

        while( items < n.length && value >= 0 )
        {
            System.out.print("Enter a positive number to insert (negative to quit): ");
            value = console.nextInt();
            if( value >= 0 )
            {
                // insert into array

                // step 1- locate the proper space for the item.
                i=0;
                while( i < items && n[i] < value)
                    i++;

                // step 2- shift others down
                for( int j=items-1; j >=i; j--)
                    n[j+1] = n[j];

                // step 3- insert new item
                n[i] = value;
                items++;

            }
        }

        console.close();
        // return number of values entered
        return items;   
    }

   // INSERT MISSING CODE HERE! Write method binSearch
   /*
   public static void binSearch(int[] x, int y, int j)
   {
       int v, a;
       int[] p;
       for(int i=0; i < x.length; i++)
       {
           if(v < x[i])
           {
               x[i]=a;
               return a;
           }
           if(v> x[i])
           {
               x[i]/2=p[i];
               p[i]=a;
               return a;
           }

       }
   }
   public static void binSearch(int[] x, int y, int j)
   {
       int i;
       for(i=0; i<y.length; i++)
       {
           if( y.length/2 == x[i])
           {
               if(
            }
       }
    }
    */

    public static int binSearch (int[] arrayName, int items, int seekItem ) 
{

  int bottom = 0;
  int top = arrayName.length - 1;
  int middle;
  boolean found = false;
  int location = -1;

  while (bottom <= top && !found) {

    middle = (bottom + top) / 2;

    if(arrayName[middle] == seekItem) {            
      found = true;
      location = middle;
    } else if (arrayName[middle] < seekItem) {  
      bottom = middle + 1;
    } else {
      top = middle - 1;
    }
  }
  return location;
}

} 
```

我正在编写我老师分配的二进制搜索程序。它可以编译，我可以输入数字，但是当我尝试寻找值并获得正确的索引时，它每次都告诉我元素不在列表中。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:43:06.240

错误在于“top”的初始化：

```
public static int binSearch (int[] arrayName, int items, int seekItem ) 
{

int bottom = 0;
int top = arrayName.length - 1;  // is always 49 
```

试试这个：

```
public static int binSearch (int[] arrayName, int items, int seekItem ) 
{
int bottom = 0;
int top = items - 1; 
```

# android - 用于追踪手部的增强现实 SDK

> ID：14571211
> 
> 赞同：1
> 
> 时间：2013-01-28T21:04:17.083
> 
> 标签：android, opencv, augmented-reality

嗨，我正在寻找一个可以跟踪手部动作的 AR SDK，我查看了 Total Immersion 的 D'Fusion，但我想看看其他可以在 Android 平台上运行的 SDK。

那么...什么 SDK 可以在 Android 平台上运行，最适合跟踪手部动作？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:27:23.223

不确定这是否会完全工作，但 metaio sdk pro（适用于 andorid、iOS 和 windows PC）中有 3d 跟踪（www.metaio.com/products/sdk）。如果您使用的是静态人体模型手，这将是世界。

他们还有一个网络 SDK，通过 JcPenny 服装应用程序的遮挡来“跟踪手势”（[http://www.nickburcher.com/2010/08/jc-penney-augmented-reality-virtual.html](http://www.nickburcher.com/2010/08/jc-penney-augmented-reality-virtual.html)）。根据您想要做什么，也许您可​​以使用该方法在 metaio sdk 中跟踪手牌。

# css - 高度为 100%-body 的粘性页脚-> 可能没有 javascript？

> ID：14571214
> 
> 赞同：0
> 
> 时间：2013-01-28T21:04:23.080
> 
> 标签：css, height, footer, sticky

我有一个关于我必须创建的布局的问题。上面的布局是我目前拥有的。当 Main-div 通过添加内容来扩展时，页脚的垂直位置会增加，这就是我想要的。但是当 main 中只有很少的内容时，页脚和屏幕的下边框之间有空间，这很难看；）我试图将页脚粘在底部。结果：当向 main 添加大量内容时，页脚位于主 div 及其内容之上 :( 这有点难以解释，但我想你知道我的意思。

我想要完成的是较低的布局。主 div 应该是“screen.height - header.height - footer.height”。

这可能吗？提前致谢！

再见_未知

![示例图像](../Images/ad34eaa870786b1c3d94c0d51a2d5db8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:58:07.017

尝试这个：

```
<style type="text/css">
   html,body {
      height:100%
   }

   #wrapper {
     min-height:100%;
     margin-bottom:-150px; /* negative total computed height of footer */
   }

   #footer_padding {
     height:150px; /* total computed height of footer */
   }

   #footer {
     height:100px;
     margin-top:50px;
   }
</style>    

<div id="wrapper">

   <div>some content...</div>

   <div id="footer_padding"></div>

</div>

<div id="footer"></div> 
```

# c - 在 C 中的 Linux 上的 $PATH 中搜索文件

> ID：14571215
> 
> 赞同：2
> 
> 时间：2013-01-28T21:04:36.320
> 
> 标签：c, linux, environment-variables

我想测试运行我的程序的系统上是否安装了 GNUPlot。
为此，我想我将通过 stat() 调用测试用户安装位置中是否存在 gnuplot 可执行文件。

但是，我不知道如何在 C 中读取 $PATH 环境变量，因此我可以测试这些位置中是否存在文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T21:07:12.957

使用该[`getenv()`功能。](http://pubs.opengroup.org/onlinepubs/009696799/functions/getenv.html)

```
char *paths = getenv("PATH"); 
```

要遍历以列分隔的路径列表的各个部分，请使用`strchr()`：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char *dup = strdup(getenv("PATH"));
char *s = dup;
char *p = NULL;
do {
    p = strchr(s, ':');
    if (p != NULL) {
        p[0] = 0;
    }
    printf("Path in $PATH: %s\n", s);
    s = p + 1;
} while (p != NULL);

free(dup); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T21:06:09.043

用于[`getenv()`](http://linux.die.net/man/3/getenv)检查特定环境变量的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T21:07:06.147

要读取`PATH`环境变量，请使用`getenv("PATH")`.

但是，如果您只想在可用时运行，`gnuplot`如果不可用则执行一些回退操作，那么您应该**尝试运行它**（例如使用`fork`and`execvp`或`posix_spawnp`）并处理失败情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T03:18:24.200

让哪个为你工作

```
if (system("which gnuplot"))
    /* not installed or not in path or not executable or some other error */ 
```

如果出于某种原因需要完整路径，请使用 popen 运行 which。
或者使用一些标志运行 gnuplot，使其立即返回 0 */

```
if (system("gnuplot --version"))
    /* not installed ... */ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-09T15:02:45.327

我有类似的需求，并通过复制 libc execvp 代码源解决了它。我在我能想到的最跨平台上做了（我没有保证，只在 linux 上测试过）。如果这对你来说不是这样，并且你关心性能，你应该使用 acess 或 _acess。请注意，没有任何错误检查，它只会返回 NULL 或在路径中创建的可打开文件。

接受的答案有时是不可接受的，当您愿意一遍又一遍地运行相同的小二进制文件时，每次通过调用 execvp 重做路径搜索可能是不可忽略的开销。

所以这里是代码和相关的测试，你会主要对这个`search_in_path_openable_file`功能感兴趣。

.h 文件：

```
bool is_openable_file(char* path);
/*Return true if path is a readable file. You can call perror if return false to check what happened*/

char* search_in_path_openable_file(char* file_name);
/*Search into PATH env variable a file_name and return the full path of the first that is openable, NULL if not in path*/

char* search_executable(char* file_name);
/*Search file, if not openable and not absolute path(contain /), look for opennable file in the path. If nothing is openable, return NULL. If something is openable, return it as it is (not guaratented to have a full path, but garatanted to be openable)*/ 
```

.c 文件：

```
#include "file_info.h"
#include <stdio.h>
#include <string.h> //strcpy

/*I wanted to do a really cross platform way. access or _acess may be better*/
bool is_openable_file(char *path) {
    FILE *fp = fopen(path, "r");
    if (fp) {
        // exists
        fclose(fp);
        return true;
    }

    return false;
}

bool is_openable_file_until(char *path_begin, size_t until) {
    char old = path_begin[until];
    path_begin[until] = 0;
    bool res = is_openable_file(path_begin);
    path_begin[until] = old;
    return res;
}

/*You may thinks that libc would have done this function and use it to implement execp function family, but you would be wrong. They just hardcoded the search in every execp function. Unbelievable.
 *
 * So this function is a modification of their execvp function. 
 *
 * */

char* search_in_path_openable_file(char* file){
    char *path = getenv("PATH");
    if (path == NULL)
        return NULL;
    size_t pathlen = strlen(path);
    size_t len = strlen(file) + 1;
    int total_max_size=pathlen + len;
    char* buf=malloc(sizeof(char)*total_max_size);
    if (*file == '\0') {
        return NULL;
    }
    char *name, *p;
    /* Copy the file name at the top.  */
    name = memcpy(buf + pathlen + 1, file, len);
    /* And add the slash.  */
    *--name = '/';
    p = path;
    do {
        char *startp;
        path = p;
        //Let's avoid this GNU extension.
        //p = strchrnul (path, ':');
        p = strchr(path, ':');
        if (!p)
            p = strchr(path, '\0');
        if (p == path)
            /* Two adjacent colons, or a colon at the beginning or the end
               of `PATH' means to search the current directory.  */
            startp = name + 1;
        else
            startp = memcpy(name - (p - path), path, p - path);
        /* Try to execute this name.  If it works, execv will not return.  */
        if (is_openable_file(startp))
            return startp;
    } while (*p++ != '\0');
    /* We tried every element and none of them worked.  */
    return NULL;
}

char* search_executable(char* file_name){

    if (is_openable_file(file_name)){//See realpath manual bug. Watch out
        return file_name;
    }
    if (strchr (file_name, '/') != NULL) //Don't search when it contains a slash. 
        return NULL;
    return search_in_path_openable_file(file_name);
} 
```

测试（如您所见，我没有对这个功能进行很多测试，可能存在一些问题，使用风险自负）：

```
 #include "file_info.h"
#include "munit.h"
#include <stdbool.h>
#include <unistd.h>
static void generate_search_executable(char* test_str, char* expected){
    char* res= search_executable(test_str);
     if (res==NULL)
        munit_assert_ptr(expected,==,NULL );
     else
    munit_assert_string_equal(expected,res);
}

static void generate_openable(char* test_str, bool expected){
    bool res= is_openable_file(test_str);
    munit_assert_true(expected==res);
}

static void generate_path_search(char* test_str, char* expected_res){
     char* res= search_in_path_openable_file(test_str);
     if (res==NULL)
        munit_assert_ptr(expected_res,==,NULL );
     else
    munit_assert_string_equal(expected_res,res);
}

//TODO do for other platform, better test would also set path to a custom folder that we control
#define EXISTING_FILE_NOT_IN_PATH "/usr/include/stdlib.h" 
#define EXISTING_FILE_IN_PATH "ls" 
#define EXISTING_FILE_IN_PATH_FULL "/bin/ls" 
#define NOT_EXISTING_FILE "/usrarfzsvdvwxv/ixvxwvnxcvcelgude/ssdvtdbool.h" 
int main() {

    generate_openable(EXISTING_FILE_IN_PATH, false);
    generate_openable(EXISTING_FILE_NOT_IN_PATH, true);
    generate_openable(NOT_EXISTING_FILE, false);

    generate_path_search(EXISTING_FILE_IN_PATH, EXISTING_FILE_IN_PATH_FULL);
    generate_path_search(NOT_EXISTING_FILE, NULL);
    generate_path_search(EXISTING_FILE_NOT_IN_PATH, NULL);

    generate_search_executable(EXISTING_FILE_IN_PATH, EXISTING_FILE_IN_PATH_FULL);
    generate_search_executable(NOT_EXISTING_FILE, NULL);
    generate_search_executable(EXISTING_FILE_NOT_IN_PATH, EXISTING_FILE_NOT_IN_PATH);

    generate_search_executable("", NULL );

    //test current folder existence(maybe it just depend on path containing .,I am not sure, in that case we should remove thoses tests
    generate_search_executable("file_info_test", "file_info_test" );

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-10T15:33:57.097

要[在前面的答案之一的](https://stackoverflow.com/a/14571264/547270)基础上构建，您可以使用`getenv`获取内容`PATH`然后迭代其组件。而不是使用`strchr`你可以使用`strsep`：

```
#include <string.h>
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <stdbool.h>

bool exists(const char fname[])
{
    return access(fname, F_OK | X_OK) != -1;
}

bool find_in_path(const char name[], char *fullpath, size_t sz) {
    char *paths = strdup(getenv("PATH"));
    char *tmp = paths; // to use in free
    const char *item;
    bool found = false;
    while ((item = strsep(&paths, ":")) != NULL) {
        snprintf(fullpath, sz, "%s/%s", item, name);
        if (exists(fullpath)) {
            found = true;
            break;
        }
    }
    free(tmp);
    return found;
}

int main() {
    char fullpath[512];
    bool found = find_in_path("uname", fullpath, sizeof(fullpath));
    if (found) {
        printf("found: %s\n", fullpath);
    }
    return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-22T06:31:33.283

使用 C++17 获取路径元素的向量。

```
% a.out ls
/bin/ls

#include <iostream>
#include <vector>
#include <cstdlib>
#include <cstring>
#include <unistd.h>
using namespace std;

vector<string> get_paths (string str)
{
   vector<string> result;
   while(!str.empty())
   {
      if (auto pos { str.find_first_of (':') }; pos == string::npos)
      {
         result.push_back(str);
         break;
      }
      else
      {
         result.emplace_back(str.substr(0, pos));
         str.erase(0, pos + 1);
      }
   }
   return move(result);
}

bool exist(const string& fname, int perm=F_OK) { return access(fname.c_str(), perm) == 0; }

int main (int argc, char *argv[])
{
   auto result { get_paths(getenv("PATH")) };
   for (auto pp : result)
   {
      string npath { pp };
      if (*npath.rbegin() != '/')
         npath += '/';
      npath += argv[1];
      if (exist(npath))
         cout << npath << endl;
   }
   return 0;
} 
```

# c++ - 如何为集合提供带有迭代器的 const 接口？

> ID：14571221
> 
> 赞同：4
> 
> 时间：2013-01-28T21:05:03.280
> 
> 标签：c++, templates, stl, iterator, constants

我想创建一个带有这样签名的函数：

```
// Set found to be an iterator to the location of key in map or end()
// if not found.
bool lookup(const Key &key,
            const std::map<Key, Value> &map,
            std::map<Key, Value>::const_iterator &found); 
```

但是我也想在 map 和 iterator 不是 const 的情况下调用它，以便我可以修改找到的值：

```
const Key key;
std::map<Key, Value> map;
std::map<Key, Value>::iterator found;

if (lookup(key, map, found)) {
  found->second.modifingNonConstFunction()
} 
```

但是我不相信我可以将`std::map<Key, Value>::iterator`对象传递给期望引用 a 的函数，`std::map<Key, Value>::const_iterator`因为它们是不同的类型，而我通常可以，如果它`const`是 C++ 声明的一部分，我可以将非常量类型提升为一个常量类型：

```
void someFunction(const int &arg);

int notConstArg = 0;
someFunction(nonConstArg); 
```

除了使用模板为 提供两个定义`lookup()`，一个带有`const`参数 2 和 3，另一个带有非 const 参数 2 和 3，C++ 中是否有更好的方法来完成这个，更类似于如何`const int &`传递一个非上面示例中的const `int`。换句话说，我可以只有一个功能而不是两个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:25:11.177

如果函数很简单，或者您不介意二进制膨胀，只需将每个参数都设为模板参数。

```
template <typename Key, typename T, typename Iter>
bool lookup(Key const& key,
            T& map,
            Iter &found)
{
  return (found=map.find(key))!=map.end();
}

int main()
{
  std::map<std::string, int> m; m["hello"] = 42;
  std::map<std::string, int> const cm(m.begin(), m.end());

  std::map<std::string, int>::iterator it;
  std::map<std::string, int>::const_iterator cit;

  std::cout << std::boolalpha << lookup("hello", m, it) << '\n'; // Key isn't even std::string
  std::cout << std::boolalpha << lookup("hello", m, cit) << '\n';
  //std::cout << std::boolalpha << lookup("hello", cm, it) << '\n'; // error
  std::cout << std::boolalpha << lookup("hello", cm, cit) << '\n';
} 
```

这是有效的，因为`T`可以两者兼而有之，or`map`也是`const map`如此。`T&``map&``const map&`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T21:16:22.783

不，我认为如果没有重载/模板魔法，你就无法做到这一点。

编译器保护您免受以下情况的影响：

```
typedef vector<int> T;

const T v;  // Can't touch me

void foo(T::const_iterator &it) {
    it = v.begin();  // v.begin() really is a const_iterator
}

int main() {
    T::iterator it;
    foo(it);
    *it = 5;   // Uh-oh, you touched me!
} 
```

# .net - 导出的包含公式的 xlsx 文件在受保护的视图中似乎已损坏

> ID：14571222
> 
> 赞同：1
> 
> 时间：2013-01-28T21:05:05.413
> 
> 标签：.net, excel

我正在使用 Spire.xls for .net 导出一些报告。一个模板包含一个带有公式的列，公式如下所示`=(B6-C6)`。从浏览器打开报告时，报告会在**受保护的视图**中打开，并且该列中的所有公式都解析为`#VALUE!`，但是当我启用编辑时，一切都正确解析。

这是正常的 Excel 行为吗？我能做些什么来防止这种情况发生吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:47:20.870

这是由于标记设计器的使用不正确，我需要在行的第一个单元格上使用“应用样式”标签才能正确处理。

# sql - 如何根据两列和一个 min 函数选择此行

> ID：14571223
> 
> 赞同：2
> 
> 时间：2013-01-28T21:05:10.483
> 
> 标签：sql, db2

我非常感谢为此编写选择查询的所有帮助。

**我的表**

```
 sw_id | url_id |  open_date   | valid
----------------------------------------
  101  |  com   |  2013-01-01  |  1
  202  |  net   |  2013-01-02  |  1
  202  |  net   |  2013-02-02  |  1 
  303  |  com   |  2013-01-03  |  1 
  303  |  com   |  2013-02-03  |  1 
  303  |  com   |  2013-03-03  |  1 
  404  |  org   |  2013-01-04  |  1 
  404  |  org   |  2013-02-04  |  1 
  404  |  gov   |  2013-02-04  |  1
  404  |  gov   |  2013-04-04  |  1 
  ... 
```

> 我们需要找到相同 sw_id、url_id 的 open_date 较少的有效 (valid=1) 行。
> 
> **选择查询应该从上面输出行，如下所示：**

**查询输出**

```
 sw_id | url_id |  open_date   | valid  |  min_open_d 
-----------------------------------------------------
  202  |  net   |  2013-02-02  |  1     |  2013-01-02
  303  |  com   |  2013-02-03  |  1     |  2013-01-03
  303  |  com   |  2013-03-03  |  1     |  2013-01-03
  404  |  org   |  2013-02-04  |  1     |  2013-01-04
  404  |  gov   |  2013-04-04  |  1     |  2013-02-04 
```

如您所见，我们仅选择 open_date 高于最低值 min(open_date) 的行。

我希望你能从上面的描述中理解问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:15:13.197

如果您也在这里展示自己的努力会很好，但基本上子查询是（新手最容易理解的）方法之一。

```
SELECT
    sw_id,
    url_id,
    open_date,
    valid,
    (
        SELECT MIN(open_date)
        FROM MyTable t2
        WHERE t2.sw_id = t1.sw_id GROUP BY t2.sw_id
    ) AS min_open_d
FROM
    MyTable t1
WHERE
    valid = 1
ORDER BY
    open_date DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:15:52.733

您的示例和解释对解释有点开放，但这样的事情应该很接近。

```
SELECT  sw_id ,
        url_id ,
        open_date ,
        valid ,
        ( SELECT    MIN(open_date)
          FROM      mytable mt2
          WHERE     mt2.sw_id = mt1.sw_id
                    AND mt1.url_id = mt2.url_id
          GROUP BY mt2.sw_id, mt2.url_id
        ) AS min_open_d
FROM    mytable mt1
WHERE   valid = 1 AND mt1.open_date >          
        ( SELECT    MIN(open_date)
          FROM      mytable mt3
          WHERE     mt3.sw_id = mt1.sw_id
                    AND mt1.url_id = mt3.url_id
          GROUP BY mt3.sw_id, mt3.url_id
        ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:23:12.300

使用 OLAP 函数可以更优雅地解决这个问题：

```
select * from (
    select sw_id, 
           url_id, 
           open_date, 
           valid, 
           min(open_date) over (partition by sw_id,url_id) as min_open_d
       from MyTable
       where valid = 1
    )
    where open_date <> min_open_d; 
```

这也应该比子查询更有效。

# optimization - SAT求解优化

> ID：14571226
> 
> 赞同：1
> 
> 时间：2013-01-28T21:05:19.243
> 
> 标签：optimization, satisfiability, conjunctive-normal-form

假设您有一个 CNF 公式，其中一些变量标记为特殊。
有没有办法让 SAT Solver（比如 minisat）找到一个解决方案，最大化分配给 true 的特殊变量的数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T22:45:47.190

你（我）想要的叫做 Partial Max Sat。有一个名为 qmaxsat 的求解器，它似乎工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:44:51.663

不确定是否所有这些都可以处理特殊变量的指示，但至少[维基百科](http://en.wikipedia.org/wiki/Maximum_satisfiability_problem)为搜索提供了一些方向：

> 有几个求解器提交到最后的 Max-SAT 评估：
> 
> *   基于分支定界：Clone、MaxSatz（基于 Satz）、IncMaxSatz、IUT_MaxSatz、WBO。
> *   基于可满足性：SAT4J、QMaxSat。
> *   基于不可满足性：msuncore、WPM1、PM2。

检查所有这些的描述应该是可管理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T12:48:03.310

您可以使用 PBC 求解器，例如 minisat+ [http://minisat.se/MiniSat+.html](http://minisat.se/MiniSat+.html) 他们使用称为伪布尔约束的附加约束来求解常规 CNF 文件 Minisat+ 还支持此类约束的优化，据我了解，它可以解决您的问题

让 x1, .... xn 是你想要最大化的变量 o 真值分配然后你可以定义约束最大化 +1 x1 ..... +1 xn minisat+ 解决了这样的优化问题

# java - jsp中获取线程本地类的实例

> ID：14571227
> 
> 赞同：1
> 
> 时间：2013-01-28T21:05:19.893
> 
> 标签：java, jsp

我正在尝试重构一些 jsps 以从中删除脚本。我有一个使用非常广泛的类，它使用`ThreadLocal`. 我的问题是我无法使用它来定义它，`jsp:usedBean`因为它在应该做的时候构造了一个新实例`MyClass.getMyClass()`。这是我的脚本中剩下的内容

```
<%
    ContextDataBean contextData = ContextDataBean.getContextData();
%> 
```

有没有一种方法可以在我`jsp`没有脚本的情况下加载这个类？

# android - Android：更改背景渐变中心。在后台更改视图的 Y 位置

> ID：14571246
> 
> 赞同：-1
> 
> 时间：2013-01-28T21:06:10.070
> 
> 标签：android, android-layout, android-drawable

在这里参考我的第一个问题（[Android：通过代码更改线性 GradientDrawable 的中心](https://stackoverflow.com/questions/14382872/android-change-center-of-linear-gradientdrawable-via-code)），我仍在努力尝试更改背景的渐变中心。

基本上，我想根据系统音量更改背景中线性渐变的中心。所以如果用户改变音量，渐变要么是（#1）重绘，要么是（#2）改变位置：

到 #1：有一个使用着色器工厂的线性渐变的解决方法

```
ShapeDrawable.ShaderFactory sf=new ShapeDrawable.ShaderFactory() {
   @Override
    public Shader resize(int width, int height) {
    return new LinearGradient(0, 0, width, height,
        new int[]{Color.WHITE, Color.GRAY, Color.BLACK},
        new float[]{0,0.5f,1}, Shader.TileMode.MIRROR);
    }
}; 
```

但是这个解决方案的问题是，有几种不同的渐变模式，并且每次音量变化时背景都会改变和重绘......因为它是一个流应用程序，我不确定这种情况下的性能

所以我来到解决方案＃2。如果选择了每个线性渐变，我会绘制一次，例如在大于设备屏幕的视图中绘制它。

![在此处输入图像描述](../Images/e159e53b6cb3fb3e7a3357df8df7cf3d.png)

现在，如果用户改变音量，屏幕只是在 Y 轴上移动。但是，我尝试使用线性渐变和着色器工厂，但每次背景视图渐变都与屏幕设备一样大而不是更大。

```
 Display display = getWindowManager().getDefaultDisplay();
 Point size = new Point();
 display.getSize(size);
 int width = size.x;
 int height = size.y + 500; //change height to higher than parentview

 //get a background and change layout (tried with view,relativelayout as well)
 LinearLayout backgroundGradientView = (LinearLayout)
            findViewById(R.id.player_backgroundGradient);  
 backgroundGradientView.getLayoutParams().width = width;
 backgroundGradientView.getLayoutParams().height = height;

 GradientDrawable gd = new GradientDrawable(
             GradientDrawable.Orientation.TOP_BOTTOM, new int[] { startColor, endColor });
 backgroundGradientView.setBackground(gd);

 //later, i m changing the Y Value, but the background is as big as the parent
 backgroundGradientView.setY(currentY + 100) 
```

任何人有任何想法如何改变这个？我真的不知道如何解决这个案子？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:18:37.950

好的，开始工作了。我终于使用了 Shader Factory 解决方案。不知道每次重绘渐变的性能是否最好，但至少它可以工作..所以这里根据android设备音量改变背景渐变：

```
//global variables, because they can change during runtime
private int startColor;
private int endColor;
private float gradientCenter;

// call this, after every volume change, gradientCenter is a value between 0.0-0.5f, depending on the current volume 
//...
AudioManager audMgr = (AudioManager) context
        .getSystemService(Context.AUDIO_SERVICE);
int currentVolume = audMgr.getStreamVolume(AudioManager.STREAM_MUSIC);
int maxVolume = audMgr.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
gradientCenter = 0.5f - (float) currentVolume / (float) maxVolume
        * 0.5f; 
drawBackground();
//...

private void drawBackground() {
PaintDrawable p = new PaintDrawable();
p.setShape(new RectShape());
p.setShaderFactory(sf);
(YOUR_VIEW_FOR_BACKGROUND).setBackgroundDrawable(p);
}

//ShaderFactory is using the global gradientCenter,startColor and endColor
ShapeDrawable.ShaderFactory sf = new ShapeDrawable.ShaderFactory() {
@Override
public Shader resize(int width, int height) {
    return new LinearGradient(0, 0, 0, height, new int[] { startColor,
            endColor }, new float[] { gradientCenter, 1.0f },
            Shader.TileMode.CLAMP);
}
//... 
```

# oracle - ORA-01799: 列不能外连接到子查询

> ID：14571254
> 
> 赞同：30
> 
> 时间：2013-01-28T21:06:39.253
> 
> 标签：oracle, oracle-sqldeveloper

这是我的查询

```
SELECT 
    COUNT(C.SETID)
FROM 
    MYCUSTOMER C
    LEFT OUTER JOIN MYCUSTOPTION CO 
    ON 
        (C.SETID = CO.SETID 
            AND C.CUST_ID = CO.CUST_ID 
            AND CO.effdt = ( 
                SELECT MAX(COI.EFFDT) 
                FROM MYCUSTOPTION COI 
                WHERE 
                    COI.SETID = CO.SETID 
                                    AND COI.CUST_ID = CO.CUST_ID 
                                    AND COI.EFFDT <=SYSDATE    
                )
    ) 
```

这是我收到的错误消息..

![在此处输入图像描述](../Images/5ba0574df3bf6bb8eac4fae4a80cceac.png)

我究竟做错了什么？？？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-28T22:05:24.223

您可以通过推送子查询来重写它，使其不外连接：

```
select Count(C.setid)
  from mycustomer C
       left outer join (select *
                          from mycustoption co
                         where co.effdt <= (select Max(COI.effdt)
                                              from mycustoption COI
                                             where COI.setid = co.setid
                                               and COI.cust_id = co.cust_id
                                               and COI.effdt <= sysdate)) co
                    on ( C.setid = CO.setid
                         and C.cust_id = CO.cust_id ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T21:49:34.627

好吧，Oracle 显然不支持在外连接的连接条件中使用子查询。所以你需要摆脱子查询。

问题是，为什么它会在那里？您在两个地方有“<=”条件，因此谓词本质上说“所有记录的生效日期不迟于不迟于现在的最新生效日期”。如果这是您真正想要的，您可以将其简化为“所有生效日期不迟于现在的记录”，即：

```
ON 
    (C.SETID = CO.SETID 
        AND C.CUST_ID = CO.CUST_ID 
        AND CO.effdt <= SYSDATE    
) 
```

瞧，没有子查询。

但这真的是你想要的，还是你的意思是第一个“<=”只是“=”——即找到最近生效日期之前的记录？如果那是您真正想要的，那么重写将更加复杂。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-19T22:55:39.887

**选项1**

```
select COUNT(C.SETID)
from MYCUSTOMER C
left outer join (
  select *
  from MYCUSTOPTION CO
    on CO.effdt = (
        select MAX(COI.EFFDT)
        from MYCUSTOPTION COI
        where COI.SETID = CO.SETID
          and COI.CUST_ID = CO.CUST_ID
          and COI.EFFDT <= SYSDATE
        )
  ) CO
  on C.SETID = CO.SETID
    and C.CUST_ID = CO.CUST_ID; 
```

**选项 2**

```
select COUNT(C.SETID)
from MYCUSTOMER C
left outer join MYCUSTOPTION CO
  on C.SETID = CO.SETID
    and C.CUST_ID = CO.CUST_ID
where nvl(CO.effdt, to_date('19000101', 'YYYYMMDD')) = NVL((
      select MAX(COI.EFFDT)
      from MYCUSTOPTION COI
      where COI.SETID = CO.SETID
        and COI.CUST_ID = CO.CUST_ID
        and COI.EFFDT <= C.SINCE_DT
      ), to_date('19000101', 'YYYYMMDD')) 
```

只要您想从“今天”(COI.EFFDT <= SYSDATE) 开始查询 MYCUSTOPTION 表，Option1 就可以正常工作，在这种情况下，这似乎是您的要求。但是，如果您想从“C.SINCE_DT”开始查询 MYCUSTOPTION，它将不起作用

Option2 看起来有点复杂，但效果更好，允许您在 sysdate 或任何其他日期字段之间切换而无需更改任何其他内容（COI.EFFDT <= C.SINCE_DT）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-28T00:03:24.130

您的问题已经得到解答，但有些人的情况可能略有不同，他们需要根据列而不是固定日期获取最新的 EFFDT。对于这些情况，我只找到了一个不完美的选项和一个丑陋的解决方案......

不完美的选择：

```
SELECT ...
FROM MYTABLE N, CUST_OPT C
WHERE  etc...
AND C.SETID           (+) = N.SETID
AND C.CUST_ID         (+) = N.CUST_ID
AND NVL(C.EFFDT,TO_DATE('01011900','DDMMYYYY')) = NVL((SELECT MAX(EFFDT)
                                                       FROM CUST_OPT SC
                                                       WHERE SC.SETID = C.SETID
                                                       AND   SC.CUST_ID = C.CUST_ID
                                                       AND   SC.EFFDT <= N.ISSUE_DT)
                                                       ,TO_DATE('01011900','DDMMYYYY')) 
```

这是一个不完美的选择，因为如果 CUST_OPT 表有未来日期，但没有当前 (<=N.ISSUE_DT) 日期，则外连接将不起作用并且不会返回任何行。一般而言，PeopleSoft 术语（是的，我在那里看到了您的 SETID+EFFDT！;-D）这不会经常发生，因为人们倾向于创建一个 01/01/1900 EFFDT 以使第一个值从“永远”开始有效，但因为并非总是如此；我们还有一个丑陋的解决方案：

我还找到了一个 UGLY 选项（但我实际上是推荐它，它解决了问题，所以我们称之为解决方案），就是这样：

```
SELECT n.field1, n.field2,
       CASE WHEN NVL(c.EFFDT,n.ISSUE_DT-1)<=n.ISSUE_DT THEN c.field1 ELSE NULL END,
       CASE WHEN NVL(c.EFFDT,n.ISSUE_DT-1)<=n.ISSUE_DT THEN c.field2 ELSE NULL END
FROM MYTABLE N, CUST_OPT C
WHERE  etc...
AND C.SETID           (+) = N.SETID
AND C.CUST_ID         (+) = N.CUST_ID
AND NVL(C.EFFDT,TO_DATE('01011900','DDMMYYYY')) = NVL((SELECT MAX(EFFDT)
                                                       FROM CUST_OPT SC
                                                       WHERE SC.SETID = C.SETID
                                                       AND   SC.CUST_ID = C.CUST_ID
                                                       AND   SC.EFFDT <= N.ISSUE_DT)
                                                     ,NVL( (SELECT MIN(EFFDT)
                                                            FROM CUST_OPT SC
                                                            WHERE SC.SETID = C.SETID
                                                            AND   SC.CUST_ID = C.CUST_ID
                                                            AND   SC.EFFDT >= N.ISSUE_DT)
                                                         ,TO_DATE('01011900','DDMMYYYY')
                                                         )
                                                     ) 
```

此选项将返回必须忽略的未来行！因此，我们在 SELECT 语句中添加条件，如果它们不打算被检索，则将 IGNORE 返回值。就像我说的......这是一个丑陋的解决方案，但它是一个解决方案。

对于我丑陋的解决方案，如果稍后将在应用程序引擎或 PL/SQL 或其他任何东西中处理这些行；您可以，而不是为每列添加一个 CASE 语句，只需添加一个新列，它会告诉您您获取了“不正确”的数据，并根据此列忽略代码中稍后的字段，如下所示：

```
CASE WHEN NVL(c.EFFDT,n.ISSUE_DT-1)<=n.ISSUE_DT THEN 'N' ELSE 'Y' END AS IGNORE_CUST_OP_COLS 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-29T16:53:59.377

我今天也遇到了这个问题并想出了

```
SELECT 
COUNT(C.SETID)
FROM 
MYCUSTOMER C
LEFT OUTER JOIN MYCUSTOPTION CO 
ON 
    (C.SETID = CO.SETID 
        AND C.CUST_ID = CO.CUST_ID 
        AND CO.effdt IN ( 
            SELECT MAX(COI.EFFDT) 
            FROM MYCUSTOPTION COI 
            WHERE 
                COI.SETID = CO.SETID 
                                AND COI.CUST_ID = CO.CUST_ID 
                                AND COI.EFFDT <=SYSDATE    
            )
) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-28T17:15:47.950

在尝试`LEFT OUTER JOIN`了其他答案的那些之后，它可以工作，但它真的很慢......

就我而言，最好的解决方案是创建一个与您需要的最新记录相关的视图并对其执行左连接。

```
CREATE VIEW VIEW_SOF_TOF as
SELECT SOF."FIELDA1", TOF."FIELDB1", TOF."FIELDB2", ...
FROM SOF, TOF
WHERE FIELDA1 (+) = FIELDB1
  AND ( FIELDB2 = (SELECT MAX(FIELDB2) FROM TOF WHERE FIELDA1 = FIELDB1)
    OR FIELDB2 IS NULL) 
```

# javascript - 如何将多个页面的不同元信息放在一个 HTML 文件中？

> ID：14571255
> 
> 赞同：0
> 
> 时间：2013-01-28T21:06:39.267
> 
> 标签：javascript, file, html

我正在使用不同的 div 元素构建一个在一个 html 文件中有多个页面的网站。该代码类似于下面的代码。我需要为该 html 文件中的每个不同页面提供不同的元描述和标题。这可以做到吗？

这是代码：

```
<html>
<head>
<script>
function show(shown, hidden) {
  document.getElementById(shown).style.display='block';
  document.getElementById(hidden).style.display='none';
  return false;
}
</script>
</head>
<body>

  <div id="Page1">
    Content of page 1
    <a href="#" onclick="return show('Page2','Page1');">Show page 2</a>
  </div>

  <div id="Page2" style="display:none">
    Content of page 2
    <a href="#" onclick="return show('Page1','Page2');">Show page 1</a>
  </div>

</body>
</html> 
```

我尝试在每个 div 元素中添加不同的元素，但 Facebook 只是从文档中选择其中一个并将其用于所有页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:08:55.820

您不能使用 JavaScript 修改 Facebook（或大多数其他爬虫）将从您的页面索引的元数据。大多数爬虫不执行 JavaScript，因此只会检测到原始 HTML 中存在的元数据。

在将 HTML 发送到客户端之前，您必须在服务器上修改元数据。

# c# - C# 我怎么做这个简单的 else 循环直到为真？

> ID：14571259
> 
> 赞同：-7
> 
> 时间：2013-01-28T21:06:56.773
> 
> 标签：c#, winforms, visual-studio-2012

我正在制作一个刽子手游戏，这部分代码位于按钮新游戏的后面。每次用户选择新游戏时，我希望游戏加载一个新词供用户猜测。我的问题是我需要将我的代码放入一个循环中。例如，如果没有 if/else 语句不为真，则选择另一个随机数，直到语句为真...

我希望这是有道理的 =) 这是我到目前为止的代码。

```
namespace HangMan
{
public partial class Form1 : Form
{
    int RW;
    string previous;

    public Form1()
    {
        InitializeComponent();

    }

    private void Form1_Load(object sender, EventArgs e)
    {
        foreach (TextBox textBox in addTextBox())
        {
            textBox.Visible = false;
            textBox.Text = "";
        }
    }

    private static void LoadImages()
    {
        Image newImageIntro = Image.FromFile("HangmanIntro.jpg");
        Image newImage1 = Image.FromFile("1.jpg");
        Image newImage2 = Image.FromFile("2.jpg");
        Image newImage3 = Image.FromFile("3.jpg");
        Image newImage4 = Image.FromFile("4.jpg");
        Image newImage5 = Image.FromFile("5.jpg");
        Image newImage6 = Image.FromFile("6.jpg");
        Image newImage7 = Image.FromFile("7.jpg");
        Image newImage8 = Image.FromFile("8.jpg");
        Image newImage9 = Image.FromFile("9.jpg");
    }

    private void txtEnText_TextChanged(object sender, EventArgs e)
    {

    }

    private void txtEnText_Enter(object sender, EventArgs e)
    {

    }

public List<TextBox> addTextBox()
    {
        List<TextBox> tBox = new List<TextBox>();

        tBox.Add(textBox1);
        tBox.Add(textBox2);
        tBox.Add(textBox3);
        tBox.Add(textBox4);
        tBox.Add(textBox5);
        tBox.Add(textBox6);
        tBox.Add(textBox7);
        tBox.Add(textBox8);
        tBox.Add(textBox9);
        tBox.Add(textBox10);

        return tBox;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Random rW = new Random();

        foreach (TextBox textBox in addTextBox())
        {
            textBox.Visible = false;
        }

        RW = rW.Next(1, 4);

        if (RW == 1 & previous != "1" ) //Cat
        {
            textBox1.Visible = true;
            textBox2.Visible = true;
            textBox3.Visible = true;
            previous = "1";

        }
        else if (RW == 2 & previous != "2" ) //Elephant
        {
            textBox1.Visible = true;
            textBox2.Visible = true;
            textBox3.Visible = true;
            textBox4.Visible = true;
            textBox5.Visible = true;
            textBox6.Visible = true;
            textBox7.Visible = true;
            textBox8.Visible = true;
            previous = "2";
        }
        else if (RW == 3 & previous != "3") //Giraffe
        {
            textBox1.Visible = true;
            textBox2.Visible = true;
            textBox3.Visible = true;
            textBox4.Visible = true;
            textBox5.Visible = true;
            textBox6.Visible = true;
            textBox7.Visible = true;
            previous = "3";
        }
        else if (RW == 4 & previous != "4") //Monkey
        {
            textBox1.Visible = true;
            textBox2.Visible = true;
            textBox3.Visible = true;
            textBox4.Visible = true;
            textBox5.Visible = true;
            textBox6.Visible = true;
            previous = "4";
        }
        else
        {
        }

    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:17:05.867

不要循环检查，而是尝试循环直到你得到一个你喜欢的随机数。

这是一些关于如何执行此类操作的伪代码。

```
//while the next random number is not the same as the previous
    //Generate a new random number 
```

一旦你有一个你喜欢的随机数，你就不必检查那些 if 中的前一个数字。

您可能还想查找 switch 语句的文档，因为它可能使您的代码在此处更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:10:01.577

把它放在你的代码周围：

```
while(true)
{
// CODE
break;
} 
```

在`else {}`零件内部：

```
continue; 
```

编辑：您也可以使用 LINQ，例如

```
while(Controls.OfType<TextBox>().All(t => !t.Visible)) 
```

如果您只有那些在循环内可见性变化的框。

# android - Android：onClickListener 无法按编程方式工作

> ID：14571262
> 
> 赞同：-1
> 
> 时间：2013-01-28T21:07:06.697
> 
> 标签：android, onclicklistener

android 上的测验：我正在设置一个 onClickListener 来监视按下了哪个答案按钮，并且我正在尝试从表格中访问正确的答案以检查是否给出了分数。问题是问题没有改变（在这种情况下是数字）。

```
//variables ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
private TextView questionBox;
private Button startButton, answerButton1, answerButton2, answerButton3, answerButton4;
private RadioGroup radioGroup1;
private RadioButton difficulty_easy_radio, difficulty_medium_radio, difficulty_hard_radio;
private String difficulty = "easy";
private int score = 0;
int pointer = 0;
public String correct; // QuestionTables.questionTable[pointer].getCorrectAnswer();
//variables ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

startButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(v.getId() == startButton.getId())
            {
                //setting the elements of the layout
                setContentView(R.layout.activity_playing);
                final View controlsView = findViewById(R.id.fullscreen_content_controls2);
                final View contentView = findViewById(R.id.fullscreen_content2);

                //connecting layout elements with variables
                questionBox = (TextView) findViewById(R.id.question_box);
                answerButton1 = (Button) findViewById(R.id.answer_button1);
                answerButton2 = (Button) findViewById(R.id.answer_button2);
                answerButton3 = (Button) findViewById(R.id.answer_button3);
                answerButton4 = (Button) findViewById(R.id.answer_button4);

                //changing questions *****"pointer" and "correct" are declared globally to avoid:
                //Cannot refer to a non-final variable inside an inner class defined in a different method ERROR*****
                // don't forget to i++ as i<QuestionTables.questionTable.length=10

                //set first question
                QuestionTables.shuffleAnswers(pointer);
                questionBox.setText(""+pointer);
                answerButton1.setText(QuestionTables.questionAnswers[0]);
                answerButton2.setText(QuestionTables.questionAnswers[1]);
                answerButton3.setText(QuestionTables.questionAnswers[2]);
                answerButton4.setText(QuestionTables.questionAnswers[3]);
                correct = QuestionTables.questionTable[pointer].getCorrectAnswer();

                //button listener
                controlsView.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        switch(v.getId())
                        {
                            case R.id.answer_button1:
                            {
                                //check if correct
                                correct = QuestionTables.questionTable[pointer].getCorrectAnswer();
                                int clickedId = v.getId();
                                Button clickedButton = (Button) findViewById(clickedId);
                                if(clickedButton.getText().equals(correct))
                                    score+=100;
                                pointer++;

                                //change question
                                QuestionTables.shuffleAnswers(pointer);
                                questionBox.setText(""+pointer);
                                answerButton1.setText(QuestionTables.questionAnswers[0]);
                                answerButton2.setText(QuestionTables.questionAnswers[1]);
                                answerButton3.setText(QuestionTables.questionAnswers[2]);
                                answerButton4.setText(QuestionTables.questionAnswers[3]);

                                break;
                            }

                            case R.id.answer_button2:
                            {
                                //check if correct
                                correct = QuestionTables.questionTable[pointer].getCorrectAnswer();
                                int clickedId = v.getId();
                                Button clickedButton = (Button) findViewById(clickedId);
                                if(clickedButton.getText().equals(correct))
                                    score+=100;
                                pointer++;

                                //change question
                                QuestionTables.shuffleAnswers(pointer);
                                questionBox.setText(""+pointer);
                                answerButton1.setText(QuestionTables.questionAnswers[0]);
                                answerButton2.setText(QuestionTables.questionAnswers[1]);
                                answerButton3.setText(QuestionTables.questionAnswers[2]);
                                answerButton4.setText(QuestionTables.questionAnswers[3]);

                                break;
                            }

                            case R.id.answer_button3:
                            {
                                //check if correct
                                correct = QuestionTables.questionTable[pointer].getCorrectAnswer();
                                int clickedId = v.getId();
                                Button clickedButton = (Button) findViewById(clickedId);
                                if(clickedButton.getText().equals(correct))
                                    score+=100;
                                pointer++;

                                //change question
                                QuestionTables.shuffleAnswers(pointer);
                                questionBox.setText(""+pointer);
                                answerButton1.setText(QuestionTables.questionAnswers[0]);
                                answerButton2.setText(QuestionTables.questionAnswers[1]);
                                answerButton3.setText(QuestionTables.questionAnswers[2]);
                                answerButton4.setText(QuestionTables.questionAnswers[3]);

                                break;
                            }

                            case R.id.answer_button4:
                            {
                                //check if correct
                                correct = QuestionTables.questionTable[pointer].getCorrectAnswer();
                                int clickedId = v.getId();
                                Button clickedButton = (Button) findViewById(clickedId);
                                if(clickedButton.getText().equals(correct))
                                    score+=100;
                                pointer++;

                                //change question
                                QuestionTables.shuffleAnswers(pointer);
                                questionBox.setText(""+pointer);
                                answerButton1.setText(QuestionTables.questionAnswers[0]);
                                answerButton2.setText(QuestionTables.questionAnswers[1]);
                                answerButton3.setText(QuestionTables.questionAnswers[2]);
                                answerButton4.setText(QuestionTables.questionAnswers[3]);

                                break;
                            }
                        }
                    }
                });
            }       
        }
    }); 
```

请注意，startButton 位于 Activity 的第一个布局中，当按下此布局时，接下来会出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:12:22.993

你有很多代码，但我假设这是问题所在：

```
controlsView.setOnClickListener(new View.OnClickListener() { 
```

你给`controlsView`一个私有`OnClickListener`然后期望它处理来自所有按钮的点击事件。这将失败，因为其他按钮没有使用 this `OnClickListener`。

做一个共享的听众。

```
View.OnClickListener listener = new View.OnClickListener() {//.. 
```

然后将其传递给其余的按钮。

```
answerButton1.setOnClickListener (listener);
answerButton2.setOnClickListener (listener);
//etc 
```

您还可以使`Activity`实现`OnClickListener`接口。

```
public class MyActivity extends Activity implements OnClickListener{

@Override
public void onClick (View v)
{
 //implementation
} 
```

然后设置`OnClickListener`，您改为传递`Activity`实例。

```
answerButton1.setOnClickListener (MyActivity.this); 
```

# asp.net-mvc-3 - 外键关系的数据注解

> ID：14571267
> 
> 赞同：2
> 
> 时间：2013-01-28T21:07:18.410
> 
> 标签：asp.net-mvc-3, entity-framework, data-annotations, code-first

我有两节课

```
public class Project
{
   [Key]
   public int ID { get; set; }
   public string Name { get; set; }
   public int ManagerID { get; set; }
   public int CoordID { get; set; }
   [ForeignKey("ManagerID")]
   public virtual Employee Manager { get; set; }
   [ForeignKey("CoordID")]
   public virtual Employee Coord { get; set; }

}

public class Employee
{
   [Key]
   public int EmpID { get; set; }
   public string Name { get; set; }
   [InverseProperty("ManagerID")]
   public virtual ICollection<Project> ManagerProjects { get; set; }

  [InverseProperty("CoordID")]
   public virtual ICollection<Project> CoordProjects { get; set; }
} 
```

ManagerID 和 CoordID 映射到 Employee 表的 EmpID 列。我不断收到无效列的错误，因为 EF 无法正确映射。我认为它正在寻找错误的列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:36:48.223

我认为`InverseProperty`用于引用相关的导航属性，而不是外键，例如

```
public class Employee
{
   [Key]
   public int EmpID { get; set; }
   public int Name { get; set; }
   [InverseProperty("Manager")]
   public virtual ICollection<Project> ManagerProjects { get; set; }

   [InverseProperty("Coord")]
   public virtual ICollection<Project> CoordProjects { get; set; }
} 
```

另外，你的名字是整数而不是字符串有什么原因吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:32:33.527

最好的猜测[是](http://msdn.microsoft.com/en-us/data/jj591620.aspx#ForeignKey)通过`OnModelCreating`. 通过重命名该列，EF 无法确定要映射的原始对象，因此感到困惑。但是，Fluent API 允许您使用以下内容手动指定地图：

```
public class MyContext : DbContext
{
  public DbSet<Employee> Employees { get; set; }
  public DbSet<Project> Projects { get; set; }

  protected override OnModelCreating(DbModelBuilder modelBuilder)
  {
    modelBuilder.Entity<Project>()
      .HasRequired(x => x.Manager)
      .WithMany(x => x.ManagerProjects)
      .HasForeignKey(x => x.ManagerID);
    modelBuilder.Entity<Project>()
      .HasRequired(x => x.Coord)
      .WithMany(x => x.CoordProjects)
      .HasForeignKey(x => x.CoordID);
  }
} 
```

# android - android代码崩溃没有错误

> ID：14571270
> 
> 赞同：-4
> 
> 时间：2013-01-28T21:07:31.597
> 
> 标签：android, crash, logcat

大家好，谁能告诉我这个logcat有什么问题

一旦应用程序打开图片库以选择图像，应用程序就会崩溃

（代码的作用：它打开图像库并将图像加载为墙纸，然后用户可以在图像中添加头发或星星......等......）

谢谢大家 ：）

```
E/dalvikvm(14530): Could not find class 'com.google.ads.AdView', referenced from method com.owleyes.moustache.Viewer.basicInit
W/dalvikvm(14530): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
E/AndroidRuntime(14530): FATAL EXCEPTION: main
E/AndroidRuntime(14530): java.lang.VerifyError: com.owleyes.moustache.Viewer
E/AndroidRuntime(14530):    at java.lang.Class.newInstanceImpl(Native Method)
E/AndroidRuntime(14530):    at java.lang.Class.newInstance(Class.java:1409)
E/AndroidRuntime(14530):    at android.app.Instrumentation.newActivity(Instrumentation.java:1024)
E/AndroidRuntime(14530):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
E/AndroidRuntime(14530):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
E/AndroidRuntime(14530):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
E/AndroidRuntime(14530):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
E/AndroidRuntime(14530):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(14530):    at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime(14530):    at android.app.ActivityThread.main(ActivityThread.java:3691)
E/AndroidRuntime(14530):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(14530):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(14530):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
E/AndroidRuntime(14530):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
E/AndroidRuntime(14530):    at dalvik.system.NativeStart.main(Native Method)
I/dalvikvm(14530): threadid=4: reacting to signal 3
I/dalvikvm(14530): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:11:32.097

在您的方法 com.owleyes.moustache.Viewer.basicInit 中，您引用的是 com.google.ads.AdView。您可能在 libs 文件夹中缺少一个库。

如果不发布更多代码，没有人能真正帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:13:35.950

GoogleAdMobsAdsSDK 未附加到您的项目或附加方式错误。解决此问题的最简单方法是将库复制到 libs 文件夹。

已经有关于 SO 的话题涉及类似的问题。查看更多信息： [java.lang.NoClassDefFoundError: com.google.ads.AdView](https://stackoverflow.com/questions/10353479/java-lang-noclassdeffounderror-com-google-ads-adview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:16:25.340

在 Java Build Path 中，单击 Export & Order 选项卡以查看是否检查了该 jar 文件。确保选中它，以便将 Admob jar 文件打包到 APK 文件中。

# mysql - 删除时 MySQL 外键中 RESTRICT 的对面？

> ID：14571271
> 
> 赞同：1
> 
> 时间：2013-01-28T21:07:41.820
> 
> 标签：mysql, database-design, foreign-keys

我正在重新设计一些应用程序安全日志表（例如用户登录时、访问不同文件等），以解决一些不断变化的需求。它们最初是用 制作的`MyISAM`，但并没有真正经常被访问，并且切换到`InnoDB`并添加一堆外键以实现数据完整性确实会更有益。由于无论如何我都必须重新制作桌子，我认为现在是进行转换的好时机。

在大多数情况下，一切都是简单的外键并且按预期工作。我尝试一些奇怪的东西并遇到问题的唯一部分是 user_ids。这些日志表中的每条记录都与一个 user_id 相关联，我想确保在插入记录时存在给定的 user_id。添加引用用户表的外键解决了这个问题 - 简单的东西。以下是一些简洁、有代表性的表格：

**用户表**

```
CREATE TABLE tbl_user (
  id INT(10) NOT NULL AUTO_INCREMENT,
  first_name VARCHAR(50),
  PRIMARY KEY(id)
) ENGINE=InnoDB; 
```

**示例日志表**

```
CREATE TABLE tbl_login_time (
  id INT(10) NOT NULL AUTO_INCREMENT,
  user_id INT(10) NOT NULL,
  login_at TIMESTAMP NOT NULL,
  PRIMARY KEY(id),
  CONSTRAINT 'tbl_login_time_fk_1` FOREIGN KEY (user_id) REFERENCES tbl_user
      ON UPDATE CASCADE ON DELETE ???
) ENGINE=InnoDB; 
```

我的问题是我希望为插入强制执行外键，级联更新，但删除 tbl_user 中的记录根本不影响 tbl_login_time。通常用户会被标记为不活动，但每隔一段时间就会有一个用户被完全删除，但需要维护日志。

[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)列出了 6 个选项，但`ON DELETE`听起来都不合适：

1.  **RESTRICT**：将阻止 tbl_user 中的删除。
2.  **NO ACTION** : 像 RESTRICT 一样被评估。
3.  **CASCADE**：会像我想要的那样在 tbl_user 中删除，但也会在 tbl_login_time 中删除。
4.  **SET NULL**：将在 tbl_user 中删除，并在 tbl_login_time 中保留该行，但将数据清空。关闭但没有雪茄。
5.  **SET DEFAULT** : MySQL 识别它，但拒绝它。
6.  **省略 ON DELETE**：相当于 RESTRICT。

我以前从未使用过这样的外键（强制但不是），`INSERT`并且在阅读了很多其他问题之后，似乎其他人也没有这样做。那可能应该告诉我这是错误的方法，但是它可以以某种方式起作用吗？`UPDATE``DELETE`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:08:54.657

> 我的问题是我希望为插入强制执行外键，级联更新，但删除 tbl_user 中的记录根本不影响 tbl_login_time。

您无法使用外键约束来实现这一点。

在某些应用程序中，ON DELETE SET NULL 是有意义的。但是您的应用程序本质上是一个存储在 SQL 数据库中的日志文件。您有一个重大问题，您想删除识别信息（用户），但在某些情况下保留他们的 ID 号。坦率地说，我不明白你为什么愿意保留用户 23332 今天 18:40 登录的事实，而不关心你是否能识别用户 23332*是*谁。

你有几个选择。

*   删除日志文件表，并将日志文件数据存储在文件系统中的文件中，而不是数据库中。如果我站在你的立场上，我会先考虑这个。如果我们谈论的是可以通过 Web 以某种方式访问​​的数据库，请确保日志文件存储在 Web 根目录之外。（我会将它与所有其他日志文件一起存储在 /var/log 下。）
*   使用外键约束，永远不要删除用户。
*   使用外键约束，并使用 ON DELETE SET NULL 或 ON DELETE SET DEFAULT 的效果。在这个特定的应用程序中，ON DELETE SET NULL 和 ON DELETE SET DEFAULT 在语义上是等价的。两者都用无法识别用户的数据替换好的数据。如果您无论如何都无法识别用户 23332，谁在乎您是否知道她在今天 18:40 登录？
*   删除外键约束，并使用触发器来做任何你喜欢的事情。

我很确定我们同意最明显的选择——使用带有 ON DELETE CASCADE 的外键——对您的应用程序来说是完全错误的。

# soap - Spring-WS 客户端未设置 SOAPAction 标头

> ID：14571273
> 
> 赞同：18
> 
> 时间：2013-01-28T21:07:46.853
> 
> 标签：soap, soap-client, spring-ws

我正在发送一个 SOAP 请求，而服务器抱怨 SOAPAction 标头为空。我认为我设置它是正确的，但显然我不是。Wireshark 显示它没有设置。

```
@Test
public void testLogin() throws Exception {
    StringBuffer loginXml = new StringBuffer();
    loginXml.append("<soapenv:Envelope xmlns:soapenv=\"http://www.w3.org/2003/05/soap-envelope\" xmlns:ns=\"http://example.com/xyz/2010/08\">");
    loginXml.append("  <soapenv:Header>");
    loginXml.append("    <ns:loginOperationDetails>");
    loginXml.append("    </ns:loginOperationDetails>");
    loginXml.append("  </soapenv:Header>");
    loginXml.append("  <soapenv:Body>");
    loginXml.append("    <ns:LogIn>");
    loginXml.append("      <ns:logInInfo>");
    loginXml.append("        <ns:CustomerAccountId>customer1</ns:CustomerAccountId>");
    loginXml.append("        <ns:Username>JDoe</ns:Username>");
    loginXml.append("        <ns:Password>abc123</ns:Password>");
    loginXml.append("      </ns:logInInfo>");
    loginXml.append("    </ns:LogIn>");
    loginXml.append("  </soapenv:Body>");
    loginXml.append("</soapenv:Envelope>");

    WebServiceTemplate webServiceTemplate = new WebServiceTemplate();
    MessageFactory msgFactory = MessageFactory.newInstance(SOAPConstants.SOAP_1_2_PROTOCOL);
    SaajSoapMessageFactory newSoapMessageFactory = new SaajSoapMessageFactory(msgFactory);
    webServiceTemplate.setMessageFactory(newSoapMessageFactory);

    String uri = "http://xyz.example.com/xyz_1.0/membership.svc/ws";
    webServiceTemplate.setDefaultUri(uri);

    StreamSource source = new StreamSource(new StringReader(loginXml.toString()));
    StreamResult result = new StreamResult(System.out);

    boolean resultReturned = false;
    try {
        resultReturned = webServiceTemplate.sendSourceAndReceiveToResult(source, 
            new SoapActionCallback("http://example.com/xyz/2010/08/MembershipService/LogIn"), 
            result);
    } 
    catch (SoapFaultClientException sfe) {
        logger.error("SoapFaultClientException resultReturned: " + resultReturned, sfe);
        fail();
    }
} 
```

我从服务器返回的错误说：

```
500 Internal Server Error
The SOAP action specified on the message, '', does not match the HTTP SOAP Action, 'http://example.com/xyz/2010/08/MembershipService/LogIn'. 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-11-12T17:34:44.513

# 完整的答案如下。

当您`WebServiceTemplate` 作为一个类使用与 Web 服务进行通信时，我不明白为什么，但它没有正确填充 HTTP 标头。

一些 WSDL 有一部分说：

```
<soap:operation
            soapAction="SOMELINK"
            style="document" /> 
```

而`WebServiceTemplate` 忽略这部分。上面的错误意味着你`soapAction`在header中的参数是空的。它不应该。与 Wireshark 核对。我做到了 - 使用了一些 Chrome Soap 客户端和 Spring。第二个有一个无效的标题。

* * *

要解决此问题，您需要在此处遵循第 6.2.4 节：http: [//docs.spring.io/spring-ws/sites/2.0/reference/html/client.html](http://docs.spring.io/spring-ws/sites/2.0/reference/html/client.html)

它所说的基本上是您自己添加标题部分，带有`WebServiceMessageCallback`接口。您可以在参考资料中阅读更多内容。

基本上它最终是这样的：

```
 webServiceTemplate.marshalSendAndReceive(o, new WebServiceMessageCallback() {

    public void doWithMessage(WebServiceMessage message) {
        ((SoapMessage)message).setSoapAction("http://tempuri.org/Action");
    }
}); 
```

您可以在哪里正确设置标题值。也为我工作。一整天的阅读。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-03T22:08:46.897

我解决了这个问题，但从未发布答案。这是我最终得到的效果很好：

```
public WebServiceTemplate getWebServiceTemplate() throws SOAPException {
  if (webServiceTemplate == null) {
    final MessageFactory msgFactory = MessageFactory.newInstance(SOAPConstants.SOAP_1_2_PROTOCOL);
    final SaajSoapMessageFactory newSoapMessageFactory = new SaajSoapMessageFactory(msgFactory);
    webServiceTemplate = new WebServiceTemplate(newSoapMessageFactory);
  }   

  return webServiceTemplate;
}

public Object sendReceive(Object requestObject, ArrayList<String> classesToMarshall, final String action)
        throws ClassNotFoundException, SoapFaultException, SoapFaultClientException, WebServiceTransportException,
        IllegalStateException, SOAPException {

  final WebServiceTemplate wst = getWebServiceTemplate();

    final SoapMarshallUtil smu = getSoapMarshallUtil();
    smu.configureMarshaller(wst, classesToMarshall);

    // soap 1.2
    SoapActionCallback requestCallback = new SoapActionCallback(action) {
        public void doWithMessage(WebServiceMessage message) {
            SaajSoapMessage soapMessage = (SaajSoapMessage) message;
            SoapHeader soapHeader = soapMessage.getSoapHeader();

            QName wsaToQName = new QName("http://www.w3.org/2005/08/addressing", "To", "wsa");
            SoapHeaderElement wsaTo =  soapHeader.addHeaderElement(wsaToQName);
            wsaTo.setText(uri);

            QName wsaActionQName = new QName("http://www.w3.org/2005/08/addressing", "Action", "wsa");
            SoapHeaderElement wsaAction =  soapHeader.addHeaderElement(wsaActionQName);
            wsaAction.setText(action);
        }
    };

    Object responseObject = wst.marshalSendAndReceive(this.uri, requestObject, requestCallback);
    return responseObject;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-04T17:34:58.757

另一个解决方法是添加一个*拦截器*`handleRequest()`并在入站接收可以派生`MessageContext`的方法中设置soapAction ；`SoapMessage`

之后，您可以轻松设置调用该`setSoapAction()`方法的soapAction。

这是拦截器类的代码：

```
public class SecurityInterceptor implements ClientInterceptor {

    @Override
    public boolean handleRequest(MessageContext messageContext) throws WebServiceClientException {

        SoapMessage soapMessage = (SoapMessage) messageContext.getRequest();
        soapMessage.setSoapAction("mySoapAction");    

        return true;
    }

    //TODO:: other methods and constructor..
} 
```

当然，将拦截器添加到`WebTemplate`：

```
WebServiceTemplate webServiceTemplate = new WebServiceTemplate(marshaller);
ClientInterceptor[] interceptors = new ClientInterceptor[]{new SecurityInterceptor(parameters)};
webServiceTemplate.setInterceptors();
webServiceTemplate.marshalSendAndReceive(uriWebService, request) 
```

# vba - ActiveX 选项按钮的 VBA Excel 限制

> ID：14571275
> 
> 赞同：2
> 
> 时间：2013-01-28T21:07:52.060
> 
> 标签：vba, excel, excel-2010

我尝试在 excel 中做一些问卷调查（是的，我知道有更好的方法可以做到这一点;-)

我有几张纸，每一张都包含一些要选择的 ActiveX 选项按钮（是/否）。

问题是，当我在第一张、第二张纸中选择一些问题并进一步转到下一张时，前一张纸中的一些选项按钮再次被取消选中。我在这里看不到确切的模式，因为有些工作表保留了选项按钮的所有状态，有些则全部丢失，有些则以不同方式检查它们。

所以我的问题是：这件事有什么特殊限制吗？如果这很重要，我的工作簿中有很多 ActiveX 对象。

我使用 Office 2010。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T22:03:05.770

您很可能已经设法在一个或多个单选按钮上将“GroupName”属性设置为错误的值。

检查此子的输出：

```
Sub buttons()
    Dim s As Worksheet, o As Object
    For Each s In ActiveWorkbook.Worksheets
        For Each o In s.OLEObjects
            If TypeName(o.Object) = "OptionButton" Then
                Debug.Print "Sheet: " & s.Name, _
                            "        Button: " & o.Name, _
                            "        Group: " & o.Object.GroupName
            End If
        Next o
        Debug.Print "------------------"
    Next s
End Sub 
```

# css - 如何使重力形式响应（左/右）？

> ID：14571276
> 
> 赞同：6
> 
> 时间：2013-01-28T21:07:51.770
> 
> 标签：css, forms, responsive-design

我正在使用 Gravity Forms WordPress 表单插件。

他们提供 CSS 类，我使用 gf_left_half 和 gf_right_half 使字段在同一行上左右对齐。

当您在窗口中拖动时（响应式/移动视图），如何使它们堆叠在顶部/底部？

我的表格：http: [//goo.gl/sDWLO](http://goo.gl/sDWLO)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-01T19:48:28.927

如果您的主题是响应式的，那么您很可能有一个自定义 css 文件，否则您可以使用此代码，只需在 @media 部分中声明所有响应式类定义即可。

```
@media only screen and (min-width: 200px) and (max-width: 768px) {

  .gform_wrapper .gform_body .top_label li.gfield.gf_right_half { 
    float: left; 
    clear: left !important;
    width: 99%;
  } 

  .gform_wrapper .gform_body .top_label li.gfield.gf_left_half { 
    float: left; 
    clear: left !important;
    width: 99%;
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:48:23.530

尝试使用 @media 查询并更改这些类的浮点数。像这样的东西：

`@media only screen and (min-device-width : 320px) and (max-device-width : 480px) { .gf_right_half { float: left; } }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-14T00:56:44.847

也要记住错误类别

```
 .gform_wrapper .top_label li.gfield.gfield_error.gf_left_half,
      .gform_wrapper .top_label li.gfield.gfield_error.gf_right_half {
        float: left;
        clear: left !important;
        width: 99% !important;;
      }
```

# emacs - 如何关闭间接缓冲区并在 org 模式下返回主缓冲区？

> ID：14571280
> 
> 赞同：3
> 
> 时间：2013-01-28T21:08:04.137
> 
> 标签：emacs, org-mode

在 org-mode 中，我可以运行 org-tree-to-indirect-buffer 在间接缓冲区中打开子树并单独编辑它。

当我在间接缓冲区中编辑完子树时，我运行什么命令来关闭包含子树的缓冲区并返回到包含所有树的主缓冲区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-17T05:14:19.127

当我完成一个间接缓冲区时，我会杀死它（例如 Cx k）。间接缓冲区用于其他目的以及组织模式。

[https://www.gnu.org/software/emacs/manual/html_node/emacs/Indirect-Buffers.html](https://www.gnu.org/software/emacs/manual/html_node/emacs/Indirect-Buffers.html)说：

*如果您尝试保存间接缓冲区，则实际上可以通过保存基本缓冲区来实现。终止基本缓冲区有效地终止了间接缓冲区，但终止间接缓冲区对其基本缓冲区没有影响。*

# r - 用相同的设计矩阵在 R 中拟合许多线性模型

> ID：14571282
> 
> 赞同：2
> 
> 时间：2013-01-28T19:58:29.887
> 
> 标签：r, parallel-processing, regression, mlm

对于神经影像学应用程序，我试图通过 R 中的最小二乘法拟合许多线性模型（标准调用`lm`）。想象一下，我有一个设计矩阵 X。这个设计矩阵在所有模型中都是相同的。正在拟合的数据 (Y) 将发生变化，因此所有拟合参数（例如 beta、p 值、残差等）也会发生变化。

目前，我只是把它放在一个 for 循环中，所以它对`lm`. 似乎必须有更好的方法。

我相信计算成本最高的部分是矩阵求逆。看起来这可以通过 lm.fit 中的 Fortran 调用来处理。

如果我手动进行此回归，我会进行矩阵求逆，然后将其乘以各种数据集。事实上，当我有良好的设计矩阵（例如，所有连续赋值的协变量）时，我已经编写了一个函数来做到这一点。但是，我真的很喜欢所做的所有工作`lm`，比如适当地重新编码我的因素等，并且输出`lm`也非常好。

无论如何，我的蛋糕也可以吃吗？即，为了获得 lm 的友好性，但使用这种能力在计算上有效地拟合许多具有相同设计矩阵的模型？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T21:22:31.903

是的，有更好的方法。我们一直`fastLm()`在使用包 RcppArmadillo、RcppGSL 和 RcppEigen 中的 Armadillo、GSL 和 Eigen 的外部 C/C++ 代码编写示例替换函数。

到目前为止，花费最多的时间是建立模型矩阵和解析公式。您可以阅读 的源代码`lm()`，或者可能是我们的源代码`fastLm()`，并了解如何只进行一次解析。保留右侧，然后循环遍历不同的`y`向量。您使用哪种拟合功能不太重要。我喜欢`fastLm()`来自 RcppArmadillo，但是，嘿，我也写了 :)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-28T22:13:16.717

从帮助页面`lm`：

> 如果“响应”是矩阵，则线性模型通过最小二乘法分别拟合到矩阵的每一列。

因此，一种简单的方法似乎是将所有不同的 y 向量组合成一个矩阵，并将其作为响应传递给`lm`. 例如：

```
(fit <- lm( cbind(Sepal.Width,Sepal.Length) ~ Petal.Width+Petal.Length+Species, data=iris))
summary(fit)
summary(fit)[2]
coef(summary(fit)[2])
coef(summary(fit))[2]
sapply( summary(fit), function(x) x$r.squared ) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-28T21:07:03.517

我不知道更好的使用方法`lm`；但您可能需要考虑使用 function `lsfit`。虽然更简单且花里胡哨的东西更少，但语法`lsfit(X,y)`允许`y`不仅是具有响应变量值的向量，而且是矩阵。然后 通过在同一设计矩阵上对它们进行回归来`lsfit`拟合所有列。相当快速和方便。`y``X`

# applescript - Applescript for Mail 检查发件人电子邮件地址是否=回复电子邮件地址

> ID：14571287
> 
> 赞同：0
> 
> 时间：2013-01-28T21:08:34.473
> 
> 标签：applescript

我正在尝试为收到的电子邮件创建规则，以检查**发件人**电子邮件地址是否与**回复**电子邮件地址相同。我发现我收到的很多垃圾邮件都可以通过此检查进行过滤，但我没有看到使用 Apple Mails 规则中的选项的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:32:56.513

尝试：

```
using terms from application "Mail"
    on perform mail action with messages theMessages for rule theRule
        tell application "Mail"
            repeat with aMessage in theMessages
                if aMessage's sender = aMessage's reply to then
                    beep
                    --insert your code here
                end if
            end repeat
        end tell
    end perform mail action with messages
end using terms from 
```

# android - 哪些 PhoneGap 项目文件要存储在版本控制中，哪些要忽略？

> ID：14571290
> 
> 赞同：1
> 
> 时间：2013-01-28T21:08:57.230
> 
> 标签：android, ios, cordova

我正在使用 PhoneGap 附带的 ./create 命令创建 2 个 PhoneGap 2.3.0 应用程序（1 个 iOS 和 1 个 Android）。

./create 命令创建包含大量文件和子目录的整个目录结构。

我想知道哪些文件应该进入版本控制（git），哪些不应该进入版本控制（.gitignore）。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:35:44.473

这是我的 .gitignore 的 Android 应用程序的内容：

```
bin/
gen/ 
.DS_Store
.tmp* 
```

# ios - 为什么 UIFont.LineHeight 是只读的？

> ID：14571294
> 
> 赞同：2
> 
> 时间：2013-01-28T21:09:07.433
> 
> 标签：ios, xamarin.ios, uifont

知道如何在 MonoTouch 中设置行高吗？

`UIFont.LineHeight`是只读的并且没有设置器。

单触：6.0.8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:50:58.717

这是一个 Objective-C`readonly`属性，请参阅 Apple[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIFont_Class/Reference/Reference.html#//apple_ref/occ/instp/UIFont/lineHeight)。

您需要做的是创建一个新`UIFont`实例，其大小将与您想要的行高匹配，并在您的代码中分配（或使用）该字体实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:56:47.267

前段时间我需要更改行距，但保持字体大小。也许[这个解决方案](http://www.mobileread.com/forums/showthread.php?t=22374)是一个肮脏的 hack，但它比编写自己的 UI 组件或使用第三方库更简单。

# windows-phone-8 - 禁用 WP8 中的交换

> ID：14571298
> 
> 赞同：1
> 
> 时间：2013-01-28T21:09:18.117
> 
> 标签：windows-phone-8

我正在开发 Windows Phone 8 应用程序。如何禁用数据透视页面中项目之间的交换？因为我禁用了该`IsHitTestVisible`属性来做到这一点。但是当我使用它时；项目页面中的控件不接受用户输入？如何禁用交换？并允许用户同时输入？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T22:16:59.557

为了停止 WP8 上的 Pivot 以切换 PivotItems，请使用新的 Pivot.IsLocked=true 属性。在此处阅读更多信息@ [http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.controls.pivot.islocked(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.controls.pivot.islocked(v=vs.105).aspx)

例如，这个代码片段展示了如何在 WP8 上使用 Pivot.IsLocked：

```
<phone:Pivot IsLocked="True">
    <phone:PivotItem Header="Foo">
        <TextBox />
    </phone:PivotItem>
    <phone:PivotItem Content="Bar" Header="Bar" />
    <phone:PivotItem Content="Baz" Header="Baz" />
</phone:Pivot> 
```

当您运行此代码片段时，您可以看到 Pivot 仅显示第一个 PivotItem，但您仍然可以与其交互（如果您简单地设置 IsEnabled=False，这是不可能的）。

![仅使用第一项进行透视](../Images/92f4565534246e6c8221f2820f74c0c4.png)

对于 WP7，使用 Windows Phone 工具包中支持相同属性的 LockablePivot。在此处阅读更多相关信息@http [://www.windowsphonegeek.com/articles/Windows-Phone-Toolkit-LockablePivot-in-depth](http://www.windowsphonegeek.com/articles/Windows-Phone-Toolkit-LockablePivot-in-depth)

# c# - 当一个进程完成时启动外部进程

> ID：14571305
> 
> 赞同：0
> 
> 时间：2013-01-28T21:09:43.337
> 
> 标签：c#, vb.net, process.start

愚蠢的问题，但我正在启动几个外部应用程序`(all .exe)`。进程启动后，如何让我的程序等到该进程结束再启动另一个进程？

例子'

```
'Start application
 Process.Start(My.Computer.FileSystem.CurrentDirectory & "SomeEXE1.exe")

**' A if statement or something to state that SomeEXE2.exe will NOT start until SomeEXE1.exe finish.**

 Process.Start(My.Computer.FileSystem.CurrentDirectory & "SomeEXE2.exe") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:11:03.783

只需致电：

```
Process.WaitForExit 
```

在那个实例上`Process`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:24:05.687

使用壳牌怎么样？

Dim pID As Integer = Shell(thePathOfEXE, AppWinStyle.NormalFocus, True, 30000)

将启动将 processID 传递回 pID 的 exe，正常聚焦并等待完成执行或直到 30 秒过去。如果您对超时不感兴趣，则 30000 可能是 -1。

[http://msdn.microsoft.com/en-us/library/xe736fyk(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/xe736fyk(v=vs.71).aspx)

# php - 使用 mysqli_query 进行 json 表单验证

> ID：14571308
> 
> 赞同：0
> 
> 时间：2013-01-28T21:09:50.583
> 
> 标签：php, javascript, jquery, mysql, json

我第一次尝试使用 json 验证表单。除了我今天阅读的内容外，我不确定所有细节。不幸的是，我正在尝试做什么的例子并不多。就是这样，我需要检查多个输入字段以检查它们是否在 mysql 数据库中。所以我需要将它们发送到 php 页面，该页面会检查它们，如果它找到一个不在数据库中的 foreach 循环中断，并且该变量值可以用于类似`$value." is not a registered email";`. 我不完全知道如何将值返回到我的 html 表单页面。所以我会告诉你我有什么。可能有一百万个错误。您提供的任何帮助将不胜感激。

在表单页面上：

```
<script>
$(function(){
    $("#send").click(function(e){
       e.preventDefault();  

        $.post("ajax2.php", $("#myForm").serialize(),
        function(data){
            if(data.check == '2'){
            alert(data.message);
            }
        }, "json");    
    });
});
</script>

<html>
  <form name="myForm" action="ajax.html" method="post" enctype="multipart/form-data">
    <input id="file" name="uploaded[]" type="file" multiple /><br>
    title: <input name="title" id ="title"><br>
    box1:  <input type="text" id = "a" name="a"><br>
    box2:  <input type="text" id = "b" name="b"><br>
    box3:  <input type="text" id = "c" name="c">
    <input type="submit" name="send" id="send" value="send" ">
  </form>
</html> 
```

在 ajax2.php 上：

```
<?php
$db = new mysqli('localhost', 'root', 'oreo', 'test');
foreach($_POST as $key=> $for) {

 if(!empty($for) && $key != 'send' && $key != 'title')  {

    $usercheck =  "SELECT email FROM users WHERE email = '$for'";
    $usercheck = $db->query($usercheck);

 if($usercheck->num_rows > 0) {$check="1"; continue;}
 if($usercheck->num_rows == 0){$check="2"; break;}
  }
}

 if($check == "2") {

   $message = $for." is not a regestered email";
   echo json_encode($message);
  }
   $return_arr["check"] = $check;
   $return_arr["message"] = $message;

   echo $return_json; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:26:38.223

您需要将它们作为 json 字符串回显：

[http://us3.php.net/manual/en/function.json-encode.php](http://us3.php.net/manual/en/function.json-encode.php)

然后ajax成功处理程序/回调需要将该字符串解码为js对象......

[如何解码 JSON 字符串？](https://stackoverflow.com/questions/6030388/how-to-decode-a-json-string)

讨论如何解码 JSON。奇怪且有些遗憾的是，Javascript Object Notation 似乎在它所命名的语言中没有一个好的本地解码器。（如果有请指正！）

# java - 异步加载内容时闪烁

> ID：14571313
> 
> 赞同：0
> 
> 时间：2013-01-28T21:10:04.243
> 
> 标签：java, android, asynchronous, android-listview, android-asynctask

我`SQLiteDatabase`以`ListView`异步方式加载从 中查询的内容。我使用一个`AsyncTask`，它基本上看起来像这样：

```
private final class QueryTask extends AsyncTask<Boolean, Void, Boolean> {

    @Override
    protected Boolean doInBackground(Boolean... params) {
        doQuery();

        if (querySuccessfull) {
            return true;
        } else {
            return false;
        }
    }

    @Override
    protected void onPostExecute(Boolean boo) {
        if (boo) {
            setAdapterToListView();
        } else {
            loadEmptyView();
        }
    }
} 
```

不过，这没什么大不了的。**但是，有一个小问题**，内容没有立即加载，这会导致我认为非常难看的闪烁。我不知道如何“修复”，希望你能帮助我。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:16:23.127

我希望目前您在适配器中添加所有项目，然后在最后执行 notifydatasetchanged()。因此，在填充整个适配器后 UI 会更新。

仅在您的 doQuery() 函数中，您应该在适配器中添加项目，然后为前 10 个项目（可见项目）每个项目调用 notifydatasetchanged()（在可见项目之后，请在添加整个列表后调用 notifydatasetchanged()）。

这将为 UI 提供您想要的流畅感觉。希望能帮助到你。

# c# - C# XNA 3D 模型不渲染

> ID：14571316
> 
> 赞同：1
> 
> 时间：2013-01-28T21:10:21.513
> 
> 标签：c#, 3d, xna, rendering

该模型是 .fbx 我也尝试了许多模型，似乎没有任何效果我想知道是否有人可以帮助我，以下代码是我所拥有的一切，谢谢！

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace _3D
{

    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;
        Model model;
        Matrix[] transforms;

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
            graphics.PreferredBackBufferHeight = 800;
            graphics.PreferredBackBufferWidth = 1280;
        }

        protected override void Initialize()
        {

            base.Initialize();
        }

        protected override void LoadContent()
        {
            spriteBatch = new SpriteBatch(GraphicsDevice);
            model = Content.Load<Model>("3d/screwdriver");
            transforms = new Matrix[model.Bones.Count];
            model.CopyAbsoluteBoneTransformsTo(transforms);
        }
        protected override void UnloadContent()
        {
        }

        protected override void Update(GameTime gameTime)
        {

            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            base.Update(gameTime);
        }    

        // The draw method is one of the reasons I think nothing is working,

        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);
            Matrix view = Matrix.CreateLookAt(
                new Vector3(200, 300, 900),
                new Vector3(0, 50, 0),
                Vector3.Up);
            Matrix projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.ToRadians(45), GraphicsDevice.Viewport.AspectRatio, 0.1f, 10000.0f);
            Matrix baseWorld = Matrix.CreateScale(0.4f) * Matrix.CreateRotationY(MathHelper.ToRadians(180));
            foreach (ModelMesh mesh in model.Meshes)
            {
                Matrix localWorld = transforms[mesh.ParentBone.Index] * baseWorld;
                foreach (ModelMeshPart part in mesh.MeshParts)
                { 
                BasicEffect e = (BasicEffect)part.Effect;
                e.World = localWorld;
                e.View = view;
                e.Projection = projection;
                e.EnableDefaultLighting();

                }
                mesh.Draw();
            }
            base.Draw(gameTime);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:03:32.713

我看不出你的代码有什么问题，所以问题可能出在模型上。

这可能是由有问题的模型文件引起的。Blender 上的库存 FBX Exporter 存在一个已知问题（我不知道您用于制作模型的建模软件，但问题仍然相关），这使得模型导出的尺寸比原来大 100 倍搅拌机。结果是模型如此之大，以至于它不仅将相机封闭在其内部，而且如此之大，以至于它的多边形超出了视锥体。结果：模型确实被渲染了，但它永远不会出现在屏幕上，除非你移动相机直到你意识到缩放问题。

我这么说是因为我自己处理过这个问题。如果您确实在使用 Blender，则应使用此页面中的导出器： [http ://blog.diabolicalgame.co.uk/2011/07/exporting-animated-models-from-blender.html](http://blog.diabolicalgame.co.uk/2011/07/exporting-animated-models-from-blender.html)

# c - 为什么这个数组中的第一个元素不存储任何值？

> ID：14571317
> 
> 赞同：0
> 
> 时间：2013-01-28T21:10:24.180
> 
> 标签：c, arrays, pointers

我调试了一晚上，控制台老是跳着问我第二跑者的名字，却不给我输入第一跑者名字的零钱，这很迷惑。

**这是我的 main.c 中的部分**

```
Trunner runners[10];
Trunner best;
int n,i;
const char* name = "give the name for runner ";
const char* time = "give the time for runner ";

printf("How many names you have?");
scanf("%d",&n);

for(i=0;i<n;i++){
    readTime(&runners[i],time);
}

for(i=0;i<n;i++){
    readName(&runners[i],name);     
} 
```

**这是我的runner.c**

```
void readName(Trunner *runner, const char *prompt){

    printf(prompt);
    fgets (runner->name,30,stdin);  

    //getchar();

} 
```

我得到的是，跑步者的名字应该和逗号在同一行，正如你所看到的，第一个跑步者的名字是空的。

```
How many names you have?3
give the time for runner 11:13
give the time for runner 14:14
give the time for runner 12:13
give the name for runner give the name for runner lily
give the name for runner lucy
the winner is:
, 11:13

, 11:13 0:0
lily
, 14:14 3:1
lucy
, 12:13 1:0
Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:13:05.570

在`scanf`' 执行后，会留下一个换行符。首先 fgets 读取它，因此字符串保持为空。有几种方法可以避免这种情况，但最简单的一种是在 scanf 之后执行一次 fget，将换行符读取到缓冲区中。

另一个（可能更好）的选择是`fflush(stdin);`在`scanf`. 如果从控制台读取（似乎是这种情况），这将在刷新输入缓冲区时起到作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T00:00:29.593

您同时使用了 scanf 和 fgets。这两个功能的工作方式略有不同。就我个人而言，我不碰 scanf 是因为它在缓冲区中留下了垃圾，正如您亲眼所见。\n （或换行符）几乎在每次输入后都会保留，但不同的是，如果它被留下并且你这样做`scanf("%d",&someVar)`，它通常不会跳过，因为 /n 不能转换为 %d 但是如果缓冲区中有 \n 并且你这样做`scanf("&c",&someVar)`或`scanf("%s",someArray)`然后因为 \n 是一个字符，它会从缓冲区中拉出它，就像你刚刚按下它一样。

请注意，例如，您可以通过 getchar() 摆脱缓冲的 \n 字符，但前提是您知道它在那里，或者您的程序将等待按键。如果您希望程序保持稳定，请永远不要使用 fflush。说明[http://www.gidnetwork.com/b-57.html](http://www.gidnetwork.com/b-57.html)。

你没有发布你的 readTime 函数，所以我不能给你确切的解决方案，但我可以建议每个输入都使用 fgets，然后转换为你可以使用的整数`i=strtol(buffer,NULL,10)`（位于`<stdlib.h>`）。我建议阅读有关 strtol、strtod、strtok 函数的信息，因为它们是使用 fgets 进行任何类型输入所需的全部内容。

# c# - 使用自定义类型通过 WSDL 反射 ASMX

> ID：14571320
> 
> 赞同：2
> 
> 时间：2013-01-28T21:10:34.523
> 
> 标签：c#, asp.net, web-services, reflection, wsdl

我需要通过 WSDL 反映 ASMX Web 服务。[使用this](https://stackoverflow.com/questions/3208636/how-to-use-reflection-in-c-sharp-to-list-the-methods-of-an-asmx)的公认答案，简单的情况一切正常。但是我在那里定义了一些复杂类型（强类型数据集）。服务的原始来源看起来像

```
[WebMethod]
public int GetCustomer(string civicRegistrationNo, out MyCompany.E_WebServices.DataSets.CustomerDataSet customerDS) 
```

这`CustomerDataSet`给我带来了麻烦，因为在反射中方法是

```
GetCustomer [Int32]: civicRegistrationNo [String], customerDS [out XmlElement] 
```

而我想看到的（如果我直接反映 DLL 会出现什么）是

```
GetCustomer [Int32]: civicRegistrationNo [String], customerDS [out CustomerDataSet] 
```

我应该如何改进我的代码（如下）以使类型`CustomerDataSet`正确（而不是 as `XmlElement`）？当然它与 WSDL 中的这个块有关

```
<s:import namespace="http://tempuri.org/CustomerDataSet.xsd"/>
<s:import schemaLocation="http://localhost/E-WebServices/WSCustomer.asmx?schema=CustomerDataSet" namespace="http://tempuri.org/CustomerDataSet.xsd"/> 
```

是的，如果我打开，我可以在浏览器中看到该定义

```
http://localhost/E-WebServices/WSCustomer.asmx?schema=CustomerDataSet 
```

但是如何从下面的代码中获取它？

```
var client = new System.Net.WebClient();
var stream = client.OpenRead("http://localhost/E-WebServices/WSCustomer.asmx?wsdl");
var description = ServiceDescription.Read(stream);
var importer = new ServiceDescriptionImporter();
importer.ProtocolName = "Soap12";
importer.AddServiceDescription(description, null, null);
importer.Style = ServiceDescriptionImportStyle.Client;
importer.CodeGenerationOptions = CodeGenerationOptions.GenerateProperties;
var nmspace = new CodeNamespace();
var unit1 = new CodeCompileUnit();
unit1.Namespaces.Add(nmspace);
var warning = importer.Import(nmspace, unit1);
if (warning == 0)
{
    CodeDomProvider provider1 = CodeDomProvider.CreateProvider("CSharp");
    string[] assemblyReferences = new string[5] { "System.dll", "System.Web.Services.dll", "System.Web.dll", "System.Xml.dll", "System.Data.dll" };
    CompilerParameters parms = new CompilerParameters(assemblyReferences);
    CompilerResults results = provider1.CompileAssemblyFromDom(parms, unit1);
    if (results.Errors.Count > 0)
    {
        foreach (CompilerError oops in results.Errors)
            Debug.WriteLine(oops.ErrorText);
        throw new Exception("Compile Error Occured calling webservice");
    }
    object service = results.CompiledAssembly.CreateInstance("WSCustomer");
    List<MethodInfo> methods = service.GetType().GetMethods().ToList();
    // use them somehow
} 
```

我受到 Visual Studio 本身所做的事情的启发——如果添加了 web ref，它只有 WSDL（我认为，即使它在同一台机器上，它也不会直接转到那个 DLL），但它可以派生包含的类型很好。所以我认为这一定是可能的！？ ![在此处输入图像描述](../Images/0a1b1f758f050d54606bcd931fde6dfa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:29:25.380

好的，看来我让它工作了（也许不是最干净的方式）

```
string serviceUrl = "http://localhost/E-WebServices/WSCustomer.asmx";
var client = new WebClient();
ServiceDescription descr;
using (var stream = client.OpenRead(serviceUrl + "?wsdl"))
{
    descr = ServiceDescription.Read(stream);
}
var importer = new ServiceDescriptionImporter()
{
    ProtocolName = "Soap12",
    Style = ServiceDescriptionImportStyle.Client,
    CodeGenerationOptions = CodeGenerationOptions.GenerateProperties,
};
importer.AddServiceDescription(descr, null, null);
// Add any imported schemas
var importedSchemas = new List<string>();
foreach (XmlSchema wsdlSchema in descr.Types.Schemas)
{
    foreach (XmlSchemaObject externalSchema in wsdlSchema.Includes)
    {
        if (externalSchema is XmlSchemaImport)
        {
            XmlSchemaImport schemaImport = externalSchema as XmlSchemaImport;
            var split = schemaImport.Namespace.Split(new char[] { '/', '.' });
            string schemaId = split[split.Count() - 2];
            if (importedSchemas.Contains(schemaId))
                continue;
            importedSchemas.Add(schemaId);
            Uri schemaUri = new Uri(serviceUrl + "?schema=" + schemaId);
            XmlSchema schema;
            using (var wsdlStream = client.OpenRead(schemaUri))
            {
                schema = XmlSchema.Read(wsdlStream, null);
            }
            importer.Schemas.Add(schema);
        }
    }
}
var nmspace = new CodeNamespace();
var unit1 = new CodeCompileUnit();
unit1.Namespaces.Add(nmspace);
var warning = importer.Import(nmspace, unit1);
if (warning == 0)
{
    CodeDomProvider provider1 = CodeDomProvider.CreateProvider("CSharp");
    string[] assemblyReferences = new string[5] { "System.dll", "System.Web.Services.dll", "System.Web.dll", "System.Xml.dll", "System.Data.dll" };
    CompilerParameters parms = new CompilerParameters(assemblyReferences);
    CompilerResults results = provider1.CompileAssemblyFromDom(parms, unit1);
    if (results.Errors.Count > 0)
    {
        foreach (CompilerError oops in results.Errors)
            Debug.WriteLine(oops.ErrorText);
        throw new Exception("Compile Error Occured calling webservice");
    }
    object service = results.CompiledAssembly.CreateInstance("WSCustomer");
    Type t = service.GetType();
    List<MethodInfo> methods = t.GetMethods().ToList();
    // use them somehow
} 
```

# java - 谷歌应用引擎：没有用户数据的新实例

> ID：14571325
> 
> 赞同：1
> 
> 时间：2013-01-28T21:11:03.233
> 
> 标签：java, google-app-engine, session, google-api

当用户请求被重定向到新实例时，我的谷歌引擎 java 应用程序丢失了所有用户数据：

"*此请求导致为您的应用程序启动一个新进程，从而导致您的应用程序代码首次加载。因此，此请求可能比您的应用程序的典型请求花费更长的时间并使用更多的 CPU。* "

因为这是非常不方便的行为，我尝试设置**一个常驻实例**，所以我将“空闲实例”设置为 1-1，但这并不能解决我的问题我得到一个常驻实例并且总是创建新的（动态）实例它服务于一些请求......（这个人有同样的问题：[为什么 GAE 启动了第二个实例，Max Idle Instances 设置为 1](https://stackoverflow.com/questions/10893193/why-gae-launched-a-second-instance-with-max-idle-instances-set-to-1)）

我根本不想使用动态实例（*我的应用程序总是负载低，用户不多*）。我只需要为用户提供一个常驻实例。可以在 GAE 中设置吗？如果没有，是否有任何方便和**可靠的**方式来保存页面之间的数据（例如将它们存储在数据存储中？）。我在页面之间传递了很多 POST 参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:34:46.397

Google App Engine 是一个云平台。如果没有动态实例，您的应用程序设计将无法获得云平台的所有优势。

要解决您的数据传输问题，您可以使用以下方法之一：

1.  使用标准 Java EE 会话对象。会话存储在数据存储中，因此您不会丢失它。但是您不应该忘记，由于 DataStore 实体大小限制，您的会话对象应该是 SERIALIZABLE 且小于 1MB。

2.  手动将数据存储在 DataStore 中，并在页面之间传输实体 ID。相同的 1MB 实体大小限制适用。

3.  使用 BlobStore 或 Cloud Storage 将数据存储为文件并在页面之间传输文件标识符。这将有助于消除 1Mb 的限制。

这些方法中的任何一种都允许在请求之间保留数据，但有其自身的局限性。您需要提供您的要求的详细信息以获得明确的答案。

# java - 后递增运算符在 for 循环中不递增

> ID：14571327
> 
> 赞同：21
> 
> 时间：2013-01-28T21:11:12.917
> 
> 标签：java, loops, for-loop, infinite-loop, post-increment

我正在做一些关于 Java 的研究，发现这很令人困惑：

```
for (int i = 0; i < 10; i = i++) {
  System.err.print("hoo... ");
} 
```

这是永无止境的循环！

任何人都有很好的解释为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-28T21:12:15.743

```
for (int i = 0; i < 10; i = i++) { 
```

上面的循环本质上是相同的： -

```
for (int i = 0; i < 10; i = i) { 
```

您陈述的^(第三)部分- ，被评估为： -`for``i = i++`

```
int oldValue = i; 
i = i + 1;
i = oldValue;  // 3rd Step 
```

* * *

您需要从那里删除分配，使其工作： -

```
for (int i = 0; i < 10; i++) { 
```

* * *

（根据评论的 OP 要求）

## 的行为`x = 1; x = x++ + x++;`： -

就评论中指定的问题而言，以下表达式的结果：-

```
x = 1; 
x = x++ + x++; 
```

获得如下： -

让我们标记第二个语句的不同部分：-

```
x = x++ + x++;
R    A     B 
```

现在，首先将评估 RHS 部分`(A + B)`，然后将最终结果分配给`x`. 所以，让我们继续前进。

首先`A`评估：-

```
old1 = x;  // `old1 becomes 1`
x = x + 1; // Increment `x`. `x becomes 2`
//x = old1; // This will not be done. As the value has not been assigned back yet. 
```

现在，由于这里没有完成 to 的分配，`A`所以`R`不执行第 3 步。

现在，进行`B`评估：-

```
old2 = x;  // old2 becomes 2\. (Since `x` is 2, from the evaluation of `A`)
x = x + 1; // increment `x`. `x becomes 3`.
// x = old2; // This will again not be done here. 
```

现在，要获得 的值`x++ + x++`，我们需要执行我们在评估`A`and时留下的最后一个赋值`B`，因为现在是在 中赋值的值`x`。为此，我们需要替换： -

```
A --> old1
B --> old2   // The last assignment of both the evaluation. (A and B)

/** See Break up `x = old1;` towards the end, to understand how it's equivalent to `A = old1; in case of `x = x++`, considering `x++ <==> A` in this case. **/ 
```

所以，`x = x++ + x++`，变成： -

```
x = old1 + old2;
  = 1 + 2;
  = 3;  // Hence the answer 
```

* * *

## 分解第 3 部分`x = x++`，看看它是如何工作的`x = x++ + x++`： -

想知道为什么替换是 as`A --> old1`而不是`x --> old1`，如`x = x++`.

深入了解`x = x++`部分，特别是最后一个作业：-

```
x = oldValue; 
```

如果您考虑`x++`到`A`这里，那么上述作业可以分为以下步骤：-

```
A = oldValue;
x = A; 
```

现在，对于当前的问题，它与以下内容相同：-

```
A = old1;
B = old2;
x = A + B; 
```

我希望这能说清楚。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-28T21:12:06.317

您正在使用 post-increment: `i = i++;`，它的意思是这样的：

```
temp = i;
i = i + 1;
i = temp; 
```

因为[15.14.2 后缀增量运算符 ++](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.14.2)：

> 后缀增量表达式的值是存储新值**之前变量的值。**

这就是为什么你有旧的价值。

正确的 for 循环：

```
for (int i = 0; i < 10; i++) {
  System.err.print("hoo... ");
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-28T21:12:19.367

因为 i=i++

```
for (int i = 0; i < 10;  i++) {
  System.err.print("hoo... ");
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-28T21:12:48.530

i++ 将报告 i 的值，然后递增。这也意味着您不需要将 i 设置为等于 i++，只需更改为

```
for (int i = 0; i < 10; i++) { 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-21T18:57:25.410

问题出在语句中`i=i++`，这个语句依次做了三个操作来完成。这是两个操作`i++`和一个 assignment( `=`) 操作。这些都是;

`i++`在任何操作之前进行两次操作

1.  退货`i`

2.  增量`i`

最后赋值操作

3.  分配返回值

所以`i`在赋值之前递增，使其具有旧值。

让我们看看`i=i++`第一个循环（ where `i = 0`）的三个操作

1.  返回,直到下一个操作完成才`0`分配给`i`
2.  递增`i`( `i= 0 + 1 = 1`)
3.  将返回值赋给`0`, `i`( `i = 0`)，最终`i`获得其旧值。

`i++`首先返回，但在`i`任何操作完成之前它会立即递增（`i`变为`i+1`），但是我们还需要完成赋值操作，以便将返回的值赋值为`i`使其具有旧值，从而进入无限循环。

所以替换`i=i++`为`i++`或`i=i+1`

# django - ubuntu django 和 apache，找不到该站点

> ID：14571328
> 
> 赞同：1
> 
> 时间：2013-01-28T21:11:26.710
> 
> 标签：django, apache, ubuntu

我是 web 应用程序开发的新手，我想我会尝试 django，因为我熟悉 python。我按照以下指南： http: [//www.lennu.net/2012/05/14/django-deployement-installation-to-ubuntu-12-dot-04-server/](http://www.lennu.net/2012/05/14/django-deployement-installation-to-ubuntu-12-dot-04-server/)部署了一个 django 页面。但是，我现在意识到本指南适用于 OD 的服务器版本，而我正在运行桌面版本。当我尝试在 chrome (amitash.r) 中打开我的网站时，它会因为找不到页面而失败。现在，当我打开 localhost 时，出现内部服务器 500 错误。我所有的配置文件都完全按照指南中的说明。有什么修复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:20:04.150

你能发布你的 mod_wsgi 脚本和 Apache VirtualHost 文件吗？

按照您提供的链接中的说明，mod_wsgi 脚本应位于：

```
/srv/my_project/app/conf/apache/django.wsgi 
```

链接中的 VirtualHost 文件位置应为：

```
/etc/apache2/sites-available/DOMAIN 
```

确保您启用了您的网站。如果您按照说明将文件命名为 DOMAIN，则应使用以下命令启用该站点：

```
a2ensite DOMAIN 
```

# javascript - 如何使文本可根据浏览器调整大小？

> ID：14571334
> 
> 赞同：2
> 
> 时间：2013-01-28T21:11:49.527
> 
> 标签：javascript, css

所以我想让“WIDTH”这个词根据浏览器的宽度调整大小。现在，只有单词周围的框会调整大小，但我希望单词也能调整大小。我觉得我的计算有问题。

```
<!DOCTYPE html>
<html>
<head>

<style>

    #header{

        margin: 0px;
        font-size: 200px;
        display:inline;
        padding:0px;
        position:absolute;
        white-space:nowrap;
        overflow:hidden;
        border:thin solid black;
        height:800px;

    }

</style>
</head>

<body style="padding:0px;">
<div id="header"> WIDTH </div>

    <script>

        var text_div = document.getElementById("header");

        var size = function (){

            var winW = window.innerWidth;
            var winH = window.innerHeight;
            var win_ratio = winW/winH;
            var offset_width = text_div.offsetParent.clientWidth;
            var offset_height = text_div.clientHeight;
            var offset_ratio = offset_width / offset_height;
            text_div.style.width = offset_width + "px";
            document.title = winW + ":" + offset_height;
            text_div.style.fontSize=String(parseInt(winW/offset_ratio)) + "px";

        }

        window.onresize=function() {size();}

       //size();

   </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:31:06.123

我不确定你为什么使用所有比率的东西。这是一个仅基于宽度的简单示例。

[http://jsfiddle.net/tHBpJ/3](http://jsfiddle.net/tHBpJ/3)

```
var text_div = document.getElementById("header");
var initWinW = window.innerWidth;
var initFontSize = 40;

var size = function () {
    var winW = window.innerWidth;
    var textFactor = winW / initWinW
    text_div.style.fontSize = initFontSize * textFactor + "px";
}

window.onresize = function () {
    size();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:39:20.943

我过去曾使用过 jquery 插件[fittext.js](http://fittextjs.com/)来处理这种事情，并且效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T23:17:33.687

如果将文本包装在 a`span`中，则可以获得文本`offsetWidth`

```
<div id="header"><span>WIDTH</span></div> 
```

的`div`宽度用`left: 0px`and固定`right: 0px`

```
#header {
    position: absolute;
    left: 0px;
    right: 0px;
    border: 1px solid black;
} 
```

然后`font-size`动态调整。for 是为了防止死循环

```
var epsilon = 5;
var div = document.getElementById('header');
var span = div.childNodes[0];

function size() {
    var dw = div.offsetWidth;
    var fs = 200;
    span.style.fontSize = fs + 'px';
    var cw = span.offsetWidth;
    for (var i = 0; i < 10 && Math.abs(cw - dw) > epsilon; ++i) {
        fs *= dw / cw;
        span.style.fontSize = fs + 'px';
        cw = span.offsetWidth;
    }
}

window.onresize = size;
size(); 
```

[JSFiddle](http://jsfiddle.net/hXybM/1/)

# android - 在纵向和横向之间更改操作栏溢出菜单图标

> ID：14571335
> 
> 赞同：0
> 
> 时间：2013-01-28T21:11:51.770
> 
> 标签：android, android-actionbar, actionbarsherlock

我的应用程序有一个自定义拆分操作栏主题（是的，我使用的是 AcionBar Sherlock），其中顶部是深色，底部是浅色。该应用程序设置为在横向模式下检测设备方向并删除拆分操作栏（仅显示顶部操作栏）。在某些活动中，我有一个由三个垂直点表示的溢出菜单。我想在纵向模式下将溢出菜单图标设置为深色可绘制，然后在横向模式下将其设置为浅色可绘制。有没有办法从活动类中更改溢出菜单图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:30:50.567

您可以定义自定义样式。在这种风格中，您需要定义：

```
<item name="android:actionOverflowButtonStyle">@style/customoverflow</item> 
```

像这样的东西：

```
 <style name="MyTheme" parent="Theme.Sherlock.Light">
     <item name="android:actionOverflowButtonStyle">@style/MyActionButtonOverflow</item>
   </style>
   <style name="MyActionButtonOverflow" parent="android:style/Widget.Holo.ActionButton.Overflow">
    <item name="android:src">@drawable/my_action_bTutton_overflow</item>
   </style> 
```

您可以在 values-land 中定义一个 styles.xml，在 values-port 中定义一个不同的 styles.xml。

# servicestack - 如何在服务堆栈中使用限制属性

> ID：14571336
> 
> 赞同：2
> 
> 时间：2013-01-28T21:11:56.557
> 
> 标签：servicestack

是否有任何关于使用`[Restrict]`服务堆栈的属性的文档？

没有找到任何文档，我开始尝试解决这个问题。我发现你必须在 AppHost.cs Configure 事件中启用限制

```
var endpointHostConfig = new EndpointHostConfig
        {
            EnableAccessRestrictions = true,
        }; 
```

然后我在请求 DTO 中添加了属性：

```
[Route("Hello/World", "GET")]
[Restrict(EndpointAttributes.InternalNetworkAccess)] 
```

这不起作用...看起来删除了所有“默认”限制并仅用一个限制替换它？改用这个似乎可行：

```
[Restrict(InternalOnly = true)] 
```

当我从本地局域网执行 GET 时，它可以工作，但从远程却不行。有趣的是，它从远程给出的“详细堆栈错误”是：

> 不满足以下限制：'\n -[InternalNetworkAccess, Secure, HttpHead, HttpPost, HttpPut, HttpDelete, HttpOther, OneWay, Soap11, Soap12, Xml, Jsv, ProtoBuf, Csv, Html, Yaml, MsgPack, FormatOther, AnyEndpoint] '

请注意，它甚至没有将 HttpGet 列为其中一种可能性——这确实有效。还提到了 Secure 而不是 InSecure ......我都没有特别要求。

我们能否澄清一下这到底应该如何工作？如果我想要求 SSL 怎么办 - 我将如何指定它？

如果我想在生产中要求 SSL，但不想在此端点的所有服务上登台怎么办？（意识到这可能是一种完全不同的配置方式）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:24:42.170

`[Restrict]`属性特性在最新版本的 ServiceStack 中。目前唯一的文档存在于[安全 wiki 页面](https://docs.servicestack.net/auth-restricting-services)中。

以下是一些[EndpointAttributes 限制测试](https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.Endpoints.Tests/EndpointRestrictionTests.cs)，用于测试限制属性的验证，以及您可以使用的一些[不同服务配置。](https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.IntegrationTests/Services/EndpointAccessService.cs)

它的工作方式是它仅限于指定的任何内容，因此如果您想启用 SSL 并将其他所有内容保持为不受限制，您只需添加：

```
[Restrict(EndpointAttributes.Secure)]
public class SslOnly { } 
```

它还支持指定允许的多种环境组合，例如，您可以在内部强制执行 HTTP，但在外部强制执行 HTTPS：

```
[Restrict(EndpointAttributes.Secure   | EndpointAttributes.External,
          EndpointAttributes.InSecure | EndpointAttributes.InternalNetworkAccess)]
public class SslExternalAndInsecureInternal { } 
```

注意：每个环境都与枚举标志组合并用`,`.

但它不允许您区分调试版本和发布版本，要启用此功能，您需要使用 C# 条件编译符号。

例如，仅允许 HTTP 用于 Debug 构建和 HTTPS 用于生产 Release 构建：

```
#if DEBUG
    [Restrict(EndpointAttributes.InSecure)]
#else
    [Restrict(EndpointAttributes.Secure)]
#endif
public class MyRequestDto { ... } 
```

# java - 使用命令行参数将值注入spring

> ID：14571342
> 
> 赞同：9
> 
> 时间：2013-01-28T21:12:09.280
> 
> 标签：java, spring

我有一个应用程序需要使用不同的端口号运行两次，有没有办法可以将端口号作为命令行参数传递并在 spring 上下文文件中检索它们。

```
 <bean id="jmsConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL">
       <value>vm://localhost:${<i>port number goes here</i>}</value>
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-28T21:16:25.160

如果它是作为系统属性传递的，则可以这样做。将 -Dport.number=8080 （或您想要的任何端口）添加到 JVM 命令，然后将属性值更改为：

```
 <bean id="jmsConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
        <property name="brokerURL">
           <value>vm://localhost:${port.number}/value>
        </property>
 </bean> 
```

IE。

```
java -Dport.number=8080 com.package.MyMain 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:53:47.030

如果您对使用静态变量没有任何问题，这就是您可以使用的..

```
 public class MyClass{
  public static String[] ARGS;
  public static void main(String[] args) {
        ARGS = args;
   }
}

<bean id="jmsConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
<property name="brokerURL">
<value>#{'vm://localhost:'+argsportnumber}</value>
</property>
</bean> 
```

# html - 拉普拉斯图像过滤器

> ID：14571350
> 
> 赞同：1
> 
> 时间：2013-01-28T21:12:27.067
> 
> 标签：html, canvas

[我从“ Making image filters with Canvas](http://www.html5rocks.com/en/tutorials/canvas/imagefilters/#toc-simplefilters) ”中拿了拉普拉斯的例子，但我无法理解下面几行中 Math.min() 函数的使用。谁能给我解释一下拉普拉斯是怎么回事？

```
var weights = [-1,-1,-1,
   -1, 8,-1,
   -1,-1,-1];
        var opaque = true;
        var side = Math.round(Math.sqrt(weights.length));
        var halfSide = Math.floor(side/2);
    var imgd = context.getImageData(0, 0, canvas.width, canvas.height);

    var src = imgd.data;
    var sw = canvas.width;
    var sh = canvas.height;

    var w = sw;
    var h = sh;
    var output = contextNew.createImageData(w, h);
    var dst = output.data;

    var alphaFac = opaque ? 1 : 0;

    for (var y=0; y<h; y++) {
        for (var x=0; x<w; x++) {
            var sy = y;
            var sx = x;
            var dstOff = (y*w+x)*4;
            var r=0, g=0, b=0, a=0;
            for (var cy=0; cy<side; cy++) {
                for (var cx=0; cx<side; cx++) {
                    var scy = Math.min(sh-1, Math.max(0, sy + cy - halfSide));
                    var scx = Math.min(sw-1, Math.max(0, sx + cx - halfSide));
                    var srcOff = (scy*sw+scx)*4;
                    var wt = weights[cy*side+cx];
                    r += src[srcOff] * wt;
                    g += src[srcOff+1] * wt;
                    b += src[srcOff+2] * wt;
                    a += src[srcOff+3] * wt;
                }
            }
            dst[dstOff] = r;
            dst[dstOff+1] = g;
            dst[dstOff+2] = b;
            dst[dstOff+3] = a + alphaFac*(255-a);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-02T20:59:18.750

它的算法类似于

```
for y = 0 to imageHeight 
for x = 0 to imageWidth
sum = 0
for i = -h to h
for j = -w to w 
sum = sum + k(j, i) * f(x – j, y – i) 
end for j 
end for i 
g(x, y) = sum end for x end for y 
```

# php - PHP/HTML表格数据按变量排序？

> ID：14571353
> 
> 赞同：-1
> 
> 时间：2013-01-28T21:12:39.553
> 
> 标签：php

我从我的数据库中取出两个数据并将它们分开，然后让 $Kdr 打印计算值。

```
<?php
    $query = mysql_query("SELECT * FROM `high` ORDER BY `$Kdr` DESC LIMIT 20");
    while($row = mysql_fetch_array($query)){
    if ($row["kills"] != 0) {
    $Kdr = $row["kills"] / $row["deaths"];
    }       
    echo "<tr><td><a href='personalhs.php?query={$row["playerName"]}'>".$row['Runecraftlvl']."</a></td><td>".$row['kills']."</td><td>".$row['Runecraftxp']."</td><td>".$Kdr."</td></tr>";
    }
?> 
```

忽略 $row['Runecraftinglvl'] 等。

基本上我希望我的表通过我在上面声明的变量“$Kdr”来排序数据，该变量打印分割的数据。

我试过这样做：

```
 $query = mysql_query("SELECT * FROM `high` ORDER BY `" . $kdr . "` DESC LIMIT 20"); 
```

还有这个

```
 $query = mysql_query("SELECT * FROM `high` ORDER BY `$Kdr` DESC LIMIT 20"); 
```

两者都给了我这个错误：警告：mysql_fetch_array() 期望参数 1 是资源，在第 90 行的 /home/justxpp1/public_html/gxx/highscores.php 中给出的布尔值

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T21:16:56.523

您正在尝试对 SQL 查询中的值进行排序，该值仅在从所述查询中获得结果**后才在 php 中计算。**此外，您定义的变量`$Kdr`是一个数字，您不能`ORDER`对数字进行排序，而是必须对列名进行排序。你可以用这样的东西在sql中进行排序

```
SELECT kills/deaths AS kdr
FROM high
ORDER BY kdr DESC LIMIT 20 
```

编辑：

完整的代码看起来像这样。**注意：请仔细阅读原始问题中的第一条评论。**`mysql_`使用函数是非常不明智的。

```
$query = mysql_query("SELECT playerName, kills, deaths, kills/deaths AS kdr FROM high ORDER BY kdr DESC LIMIT 20)";
while($row = mysql_fetch_array($query)){
    $Kdr = $row["kdr"];    
    echo "<tr>
              <td>Name: ".$row["playerName"] ."</td>
              <td>Kills ".$row["kills"] ."</td>
              <td>Deaths: ".$row["deaths"] ."</td>
              <td>Kill death ratio: ".$Kdr ."</td>
          </tr>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:30:54.013

您可以直接在查询中计算和排序，例如：

```
SELECT kills/deaths as kdr, playerName, Runecraftlvl  FROM high GROUP BY playerName ORDER BY kdr DESC LIMIT 20; 
```

# sql - 混合内存数据库 SQLite

> ID：14571358
> 
> 赞同：0
> 
> 时间：2013-01-28T21:12:57.360
> 
> 标签：sql, sqlite

我有一个使用对象集合的应用程序，速度非常快。现在，我正在为持久性添加一个数据库，所以我开始将东西保存在 SQLite 数据库中。

但现在我发现要慢得多。我认为这是因为磁盘比内存慢。可以将数据库放在内存中吗？我在 SQLite 的文档中找到了一个[Inmemory DB](http://www.sqlite.org/inmemorydb.html)，但它在内存中，我需要持久性。

那么，是否有可能将数据库放在内存中以进行性能并在一段时间后保存到磁盘？

谢谢你和问候。

**更新：**

他们在回答中说这是因为我做了很多插入，这是真的。他们说我应该做一个批量插入。

我的代码在名为 Computers 的内存集合中如下所示：

```
foreach (line in lines)
{
Computers.Add(new Computer { ComputerName = line});
} 
```

现在在数据库中：

```
 foreach (line in lines)
    {
string sql = "INSERT into computers VALUES ('"+computerName+"')";
SQLiteCommand command = new SQLiteCommand(sql, dbConnection);                            command.ExecuteNonQuery();
    } 
```

如何在单个批量插入中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:16:09.357

您可以使用 Backup API 来完成此操作。请参阅[http://www.sqlite.org/backup.html](http://www.sqlite.org/backup.html) 提供了完整的 C 代码示例。

如果您一次执行大量插入，请确保将它们组合在一个事务中。否则 SQLite 会为每个插入等待一个磁盘旋转，这会大大减慢插入过程。这样做可以让您使用基于磁盘的 SQLite 数据库，而不会降低速度。

**另见**
[SQLite 插入速度很慢？](https://stackoverflow.com/questions/3852068/sqlite-insert-very-slow)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:17:18.987

如果您在内存中有一个数据库并且只是偶尔将其刷新到磁盘，那么您将失去数据库最重要的特性之一，即[ACID](http://en.wikipedia.org/wiki/ACID)。换句话说，您的应用程序可以编写数据认为它是持久的，那么随后的问题可能会导致您最终丢失数据。

如果您有足够的 RAM 可供数据库缓存经常访问的项目，那么许多数据库的性能都会非常好（尽管仍然比内存解决方案慢得多）。

首先检查您与数据库的交互*到底是什么慢了。*您是否正在获取不会一遍又一遍地更改的数据？也许将其缓存在数据库中？您是否对可以合并为单个更新的数据库进行了许多单独的更新？

# ember.js - Ember.js 及其自动属性/常规行为

> ID：14571361
> 
> 赞同：2
> 
> 时间：2013-01-28T21:13:17.300
> 
> 标签：ember.js

我最近发现了 ember.js，它的复杂性和可能性引起了我的兴趣。到目前为止，我浏览了一些学习材料：

*   [Ember.js 自己的指南](http://emberjs.com/guides/)
*   几个源代码（例如[示例 ToDo 应用程序](https://github.com/emberjs/todos)）
*   [汤姆和耶胡达的演讲](https://www.youtube.com/watch?v=4Ed_o3_59ME)

从这些，我了解到对于框架应该如何使用，我们应该如何命名视图、控制器和模型，以及**如果我们遵循这些约定**，我们可以节省大量的代码输入，因为**Ember.js 有很多“假设”。默认情况下，Node.js 可以“开箱即用”地做到这一点。**

当然，这非常方便，但只有在您真正知道幕后发生的事情时，您才不必编写。我的问题由此而来：

**例如，当我们定义一个应用程序模板和一个视图时会发生**什么？**自动为我们做了什么？是否为我们实例化了 applicationController？或者，我们必须手动创建一个吗？其他不是 applicationViews/Controllers 的视图/控制器对呢，比如子视图（因为 applicationView 和 applicationController 在某种程度上是独一无二的，它们必须存在于任何 ember.js 应用程序中）？**

 ****如果我们只定义一堆路由但不覆盖任何路由器的默认常规行为，那么路由器（来自 1.0pre4 的 API）会自动为我们做什么**？****

 **就个人而言，真正能帮助我理解这里的关键概念的是一个**示例应用程序**，它可以转换到另一个状态**，它可以实现应用程序正常工作所需要做的一切**（意思是，它不依赖于 ember 会做的任何代码否则对我们来说）。这样，我将能够看到各个部分在起作用，并在我的脑海中“重新设计”该过程，并希望能够完整地理解该过程。

如果这个问题过于复杂或模糊，请建议我如何缩小我的兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:15:23.533

开始使用 EmberJS 真的不需要太多东西。我在这里创建了一个 JSFiddle：http: [//jsfiddle.net/nzXW9/](http://jsfiddle.net/nzXW9/)，它强调了一个*简单*的应用程序是多么简单。我还创建了一个多余的内容`App.PetsCatsController`，只是为了演示当您进入`pets.cats`路线时它如何自动成为控制器。

您不需要`applicationController`or`applicationView`即可开始使用。从`pets.index`路由来看，Ember 默认假设如下：`PetsIndexController`, `PetsIndexView`, `PetsIndexRoute`.

根据我对 EmberJS 的理解，让我们举一个简单的示例场景（我们现阶段没有 DS 模型）当我们进入 #/pets/cats 路由时：

1.  如果可用，请查阅`PetsCatsRoute`有关进入此路线的说明；
2.  由于 Ember 的控制器是单例的，所以检查我们是否已经有 a 的实例`PetsCatsController`，如果有，转到#5，否则转到#3；
3.  检查是否有用户定义的`PetsCatsController`，是否有创建它的实例；
4.  如果没有用户定义`PetsCatsController`，则实例化一个 EmberJS 生成的`PetsCatsController`控制器；
5.  找到对应的`PetsCatsView`，如果存在，否则自动生成。

您还会从 JSFiddle 中注意到，您不一定需要关注索引路由，除非随着项目的扩展您需要这样做。****

# spring - Spring + Atomikos 批量插入/更新

> ID：14571363
> 
> 赞同：0
> 
> 时间：2013-01-28T21:13:42.507
> 
> 标签：spring, batch-processing, jta, atomikos

我设法将 spring + atomikos 配置为跨多个数据库进行全局事务，例如，以事务方式更新或插入记录。我一直在使用 @Transactional 注释和 SqlUpdate 或 BatchSqlUpdate 类来执行数据库事务。这是一个代码示例：

```
@Transactional
public void insertBatchIntoT1(List<Integer> ids, List<String> names) {
    Map<String, Object> params = new HashMap<>();
    for (int i = 0; i < ids.size(); i++) {
        int id = ids.get(i);
        String name = names.get(i);
        params.put("id", id);
        params.put("name", name);
        for (BatchSqlUpdate u : insertIntoT1)
            u.updateByNamedParam(params);
    }
    for (BatchSqlUpdate u : insertIntoT1)
        u.flush();
} 
```

该方法采用 id 和名称列表（也可以是自定义 POJO 列表），并且对于列表中的每个项目，它设置为每个 DataSource 对象定义的每个批处理更新中的参数（使用在初始化时定义的准备好的语句）并对每个执行更新。然后为每个 DataSource 刷新 BatchSqlUpdate。我想知道这是否可以以不同的方式完成：是否可以在不触发提交的情况下将记录增量添加到 BatchSqlUpdate？例如，我希望能够定义三个方法：startBatchUpdate()、addToBatch(int id,String name) 和 flushBatch()，并且在第一个和第三个方法调用之间有一个事务。我尝试使用 Propagation.REQUIRED 属性，但它似乎没有解决问题。有任何想法吗？我希望我的问题很清楚！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T12:56:31.230

What prevents you from extracting those 3 methods and call them from within insertBatchIntoT1?

# mongodb - 有条件地查找和更新 MongoDB 子元素

> ID：14571375
> 
> 赞同：0
> 
> 时间：2013-01-28T21:14:32.463
> 
> 标签：mongodb, mongoose

假设我有一个收藏夹，我想添加到他们的收藏夹列表中而没有重复。我用猫鼬尝试了以下方法：

```
exports.favorite = function (req, res, next) {
    var favoriteItem = {
        uid: req.params.uid,
        name: req.params.name,
        phone: req.params.phone
    };

    Favorite.findOneAndUpdate(
        { cn: req.params.uid },
        { $push: { favorites: favoriteItem }},
        { safe: true, upsert: true}, function (error) {
            if (error) {
                process.stderr.write(error);
            }

            res.send('Saved successfully.');
            return next();
        });
}; 
```

如何根据 uid 有条件地推送收藏夹？请注意，我想创建记录，如果它不存在于 upsert 中。

# file - 将现代 Java 系统与文件系统集成的良好模式

> ID：14571376
> 
> 赞同：2
> 
> 时间：2013-01-28T21:14:41.057
> 
> 标签：file, filesystems, jms, integration, apache-camel

我们有一个系统会向我们的系统发送大量文件。

我们宁愿不在文件系统之上构建一个层来轮询和触发该文件的相应进程，因为文件系统没有提供诸如事务、隔离等之类的好处。

我们正在考虑使用 Apache Camel 来监视文件，然后将消息发送到队列以指示其到达。由于我们正在处理消息队列，因此我们将获得随之而来的所有好处，例如消息队列的透明性，成功时发送确认等。

这听起来像是一件好事，还是有更好的文件系统处理模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:03:31.363

如果您需要将文件路由和传递到不同的服务器，路由它们等，那么您的方法可能很好。你需要三思而后行。

消息事务可以回滚，但文件不能。此外，您确实需要考虑您想要解决的所有情况 - 在序列图中绘制所有可能性，以确保您的解决方案不会太复杂并且所有错误情况都得到处理。

也许，Camel 获取文件并将它们路由到的解决方案就足够了？然后你可以实现日志记录等。但它不会是跨国家的。

ActiveMQ 有这样的情况，称为[BLOB 消息](http://activemq.apache.org/blob-messages.html)，旨在启用带外通道中的大文件传输，但使用 JMS 消息来控制“信号”。它可能适合也可能不适合您的情况，具体取决于您的具体要求。

# c# - 指定的演员表无效 #2

> ID：14571377
> 
> 赞同：0
> 
> 时间：2013-01-28T21:14:41.370
> 
> 标签：c#, asp.net, linq, casting

我有一个返回 id 和 name 列表的存储过程。

```
TeamID（字节） TeamName（字符串）
----------------------------------
1个棒球
2 篮球
```

我有一个显示团队名称的下拉列表，但如果团队容量已满，则团队名称不应该在列表中。我使用这种方法获取团队列表，如果团队容量未满，则将其添加到字典中，然后返回字典。该方法如下所示：

```
public Dictionary<byte, string> getTeamList()
{
    Dictionary<byte, int> capacityList = new Dictionary<byte, int>();
    var capacityQuery = _dataContext.usp_getTeamCapacityList();
    foreach(var item in capacityQuery)
    {
        capacityList.Add(item.TeamID, item.Capacity);
    }

    Dictionary<byte, string> result = new Dictionary<byte, string>();
    var sports = _dataContext.usp_getSports();
    foreach(var item2 in sports)
    {
        if(capacityList.ContainsKey(item2.TeamID)
        {
            int memberCount = _dataContext.usp_getNumberOfMemberPerTeam(item2.TeamID)
                .FirstOrDefault().MemberCount;
            if(capacityList[item2.TeamID] > memberCount)
            {
                result.Add(item2.TeamID, item2.TeamName);
            }
        }
        else
        {
            result.Add(item2.TeamID, item2.TeamName);
        }
    }
} 
```

在第二个 foreach 循环中，第一项有时有效，但我得到`invalidCastException: Specified cast is not valid`. 当我注释掉第一个循环时，它工作正常，但是当我有两个循环`foreach`时，我似乎得到了 invalidCastException 错误。`foreach`

似乎它在抱怨这部分：

```
int memberCount = _dataContext.usp_getNumberOfMemberPerTeam(item2.TeamID)
    .FirstOrDefault().MemberCount; 
```

MemberCount 的类型是`int`。当我注释掉这行代码时它起作用了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:41:31.863

这可能不是最好的解决方案，但我改变了我的存储过程来计算：

```
@SessionID INT
SELECT ID, COUNT(Member) AS Count
FROM   Table
WHERE  SessionID = @SessionID 
GROUP BY ID 
```

它返回一个包含 ID 和每个 ID 的成员总数的表

因此，我没有在 foreach 循环中获取每个 ID 的计数值，而是在进入 foreach 循环之前检索 ID 和 Count 的列表，这很有效。

我仍然不明白为什么我会收到投射错误，所以如果有人能解释我错过了什么，我会将其标记为答案。

# javascript - HTML5 - 启动共享相同变量的游戏对象

> ID：14571378
> 
> 赞同：1
> 
> 时间：2013-01-28T21:14:43.600
> 
> 标签：javascript, html, function, variables

我只是想知道启动所有共享相同变量的相同对象的最佳方法是什么，除了它们的位置。

我基本上是在处理我的 HTML5 游戏的场景，并且我已经构建了一个可以打开和关闭的路灯柱。所有的灯都将具有相同的变量，例如图像、尺寸、开/关功能。唯一不同的是位置 x 和 y。

我在一个变量函数中构建了我的灯（我认为它们被称为'var = {'），在我的实际游戏 DrawFunction 中，我调用的是'LampPost.draw();'。

有可能做这样的事情吗？

```
LampPost(0,0);
LampPost(100, 0);
LampPost(200, 0); 
```

等等......然后可能将每个启动的灯放在一个数组中？

这是灯的片段代码：

```
var LampPost = {

    lamp_xsprite : 0,
    lamp_ysprite : 0,

    light_xsprite : 0,
    lightysprite : 0,

    x : 440,
    y : 320,

    //Flicker effects
    lightFlicker : 0,
    seconds_Off : 0,
    seconds_On : 0,

    randomLength_Off : 500,
    randomLength_On : 150,

    draw: function(x, y) {

        this.x = x;
        this.y = y;

        ctxPropsOver.setTransform(1, 0, 0, 1, -Map.x + gameWidth/2, -Map.y + gameHeight/2);
        ctxPropsOver.rotate(Math.PI / -25);
        ctxPropsOver.clearRect(0, 0, 1000, 1000);

        ctxPropsOver.globalAlpha = this.lightFlicker;
        ctxPropsOver.drawImage(imgLights, 0, 36, 500, 463, -60 + this.x, -190 + this.y, 500, 463);
        ctxPropsOver.globalAlpha = 1;
        ctxPropsOver.drawImage(imgLights, 0, 0, 210, 36, 0 + this.x, 0 + this.y, 210, 36);

        this.flicker();

    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:25:46.767

有两种实现目标的常用方法：工厂函数或带有原型的构造函数。工厂函数很容易理解，你基本上把你现在拥有的代码，作为返回语句扔到一个函数中。

```
function LampPost(x, y) {
   var lampPost = {
        lamp_xsprite: 0,
        lamp_ysprite: 0,

        light_xsprite: 0,
        lightysprite: 0,

        x: x, //Reference x argument here
        y: y, //Reference y argument here

        //Flicker effects
        lightFlicker: 0,
        seconds_Off: 0,
        seconds_On: 0,

        randomLength_Off: 500,
        randomLength_On: 150,

        draw: function(x, y) { /* Cut for readability */ }
    };

    globalLampPostArray.push(lampPost);

    return lampPost;
} 
```

然而，这样做的缺点是为每个制作的 LampPost 副本创建一个新的绘图功能（可能还有闪烁功能）。允许您只拥有每个函数的一个副本的另一种方法是使用带有原型的构造函数。

```
function LampPost(x, y) {

    //Make sure LampPost is called as a constructor
    if(!this instanceof LampPost) {
        return new LampPost(x, y);
    }

    this.lamp_xsprite = 0;
    this.lamp_ysprite = 0;

    this.light_xsprite = 0;
    this.lightysprite = 0;

    this.x = x; //Reference x argument here
    this.y = y; //Reference y argument here

    //Flicker effects
    this.lightFlicker = 0;
    this.seconds_Off = 0;
    this.seconds_On = 0;

    this.randomLength_Off = 500;
    this.randomLength_On = 150;

    globalLampPostArray.push(this);
}

LampPost.prototype.draw = function(x, y) {
    /* Draw function code */
}

LampPost.prototype.flicker = function() {
    /* Flicker code */
} 
```

现在，灯柱的每个副本都将引用相同的绘制和闪烁函数，这还具有能够重新定义所有这些或仅用于一个实例的行为的好处。这个版本的开头有一个检查，以确保它被称为构造函数。为了使用原型属性，必须使用**new**关键字调用函数。这只是确保对 LampPost 的所有调用都将返回 LampPost 的新实例。

另请注意，在每个函数的末尾，我[将](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)每个实例推送到一个数组中以供将来参考，因为这也是您问题的一部分。这使您可以这样做：

```
function drawLampPosts() {
    for (var i = 0, len = globalLampPostArray.length; i < n; i++) {
        globalLampPostArray[i].draw();
    };
} 
```

虽然，您还不如拥有一个包含所有可绘制游戏对象（而不仅仅是一个用于灯柱）的数组，并且只需在一个循环中完成。

# java - 来自 java 的 POST/Form 数据

> ID：14571380
> 
> 赞同：-1
> 
> 时间：2013-01-28T21:15:02.873
> 
> 标签：java, forms, post, unity3d

我正在寻找对我已经提交数据到数据库的某些页面提出一些请求。

使用游戏引擎 Unity，这是写入数据库的最佳方式。WWWForm 类使它非常活泼。

[http://docs.unity3d.com/Documentation/ScriptReference/WWWForm.html](http://docs.unity3d.com/Documentation/ScriptReference/WWWForm.html)

我对Java不是很熟悉，是否有类似的库或内置过程？我想通过我已经创建的 Web 服务写入这个 MySQL 数据库（只需在 WWWForm 库中使用我的 POST 请求提交一些表单数据）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:46:47.887

有一种叫做`JDBC`Java 数据库连接 API 的东西。这用于执行所有数据库操作。但根据你的环境，有味道。

查看[JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/index.html)

# javascript - 如何使 div 跨浏览器一致地翻转？

> ID：14571387
> 
> 赞同：0
> 
> 时间：2013-01-28T21:15:38.313
> 
> 标签：javascript, css, flip

我正在尝试使用 css 和 JQuery 在水平面上进行 div 翻转。我在 JSFiddle 上发现了一些代码可以非常巧妙地做到这一点，但我不明白为什么它不能在 Firefox 上运行，但可以在 Chrome 和 Safari 上运行（我目前只在 OSX 上测试过）。

[http://jsfiddle.net/TLCqu/2/](http://jsfiddle.net/TLCqu/2/)

CSS如下：

```
body {
    background: #ccc;
}
.flip {
    -webkit-perspective: 800;
    width: 400px;
    height: 200px;
    position: relative;
    margin: 50px auto;
}
.flip .card.flipped {
    -webkit-transform: rotatey(-180deg);
}
.flip .card {
    width: 100%;
    height: 100%;
    -webkit-transform-style: preserve-3d;
    -webkit-transition: 0.5s;
}
.flip .card .face {
    width: 100%;
    height: 100%;
    position: absolute;
    -webkit-backface-visibility: hidden;
    z-index: 2;
    font-family: Georgia;
    font-size: 3em;
    text-align: center;
    line-height: 200px;
}
.flip .card .front {
    position: absolute;
    z-index: 1;
    background: black;
    color: white;
    cursor: pointer;
}
.flip .card .back {
    -webkit-transform: rotatey(-180deg);
    background: blue;
    background: white;
    color: black;
    cursor: pointer;
} 
```

我在使用它的任何地方`-moz-transform: rotateY(-180deg);`之后添加`-webkit-transform:`。这具有使文本反转的奇怪效果，但不是 div。我不确定 webkit 中什么有效或我应该改变什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:23:20.960

对于 Mozilla，您需要使用`-moz-`. 这是您的 CSS 的更新版本：

```
body {
    background: #ccc;
}
.flip {
    -webkit-perspective: 800;
    -moz-perspective: 800;
    width: 400px;
    height: 200px;
    position: relative;
    margin: 50px auto;
}
.flip .card.flipped {
    -webkit-transform: rotatey(-180deg);
    -moz-transform: rotatey(-180deg);
}
.flip .card {
    width: 100%;
    height: 100%;
    -webkit-transform-style: preserve-3d;
    -webkit-transition: 0.5s;
    -moz-transform-style: preserve-3d;
    -moz-transition: 0.5s;
}
.flip .card .face {
    width: 100%;
    height: 100%;
    position: absolute;
    -webkit-backface-visibility: hidden;
    -moz-backface-visibility: hidden;
    z-index: 2;
    font-family: Georgia;
    font-size: 3em;
    text-align: center;
    line-height: 200px;
}
.flip .card .front {
    position: absolute;
    z-index: 1;
    background: black;
    color: white;
    cursor: pointer;
}
.flip .card .back {
    -webkit-transform: rotatey(-180deg);
    -moz-transform: rotatey(-180deg);
    background: blue;
    background: white;
    color: black;
    cursor: pointer;
} 
```

演示：http: [//jsfiddle.net/TLCqu/3/](http://jsfiddle.net/TLCqu/3/)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:23:38.650

它不适用于 Firefox，因为`-webkit`它仅适用于 webkit 浏览器。Firefox 使用 gecko，您需要添加 -mozilla 前缀以支持 mozilla。

查看[caniuse.com](http://caniuse.com/)以获取您正在使用的功能的浏览器支持列表。许多 CSS 3d 转换仍然是相当实验性的。

# android - 在 TextView 中使用制表符/制表符

> ID：14571393
> 
> 赞同：22
> 
> 时间：2013-01-28T21:15:55.930
> 
> 标签：android

我希望在我调用 setText 的行中使用一些制表符

```
if(id==R.id.radioButton1){
            title.setText(numbertext.getText()+" Grams"); 
```

在这种情况下，我想在 numbertekst.getText() 和克之间切换。输出是带有值的简单行的一部分。但是由于我找不到选项卡，所以该行有点难看。

我知道我可以使用多个文本字段甚至一个表格。但由于我已经有很多代码，我还不想那样做。

我尝试使用 Java 方式放置 \t，但这似乎不起作用。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-28T22:11:53.410

您应该在文本中添加制表符，但 \t 在 settext 中不起作用。解决方案是在字符串资源中添加`\u0009`以 unicode char 表示的字符。

```
<string name="tab">\u0009</string>

TextView hello = (TextView) findViewById(R.string.helloTextView);

hello.setText("e"+getString(R.string.tab)+"e"); 
```

只需结合更多选项卡以获得更多空间

```
getString(R.string.tab)+getString(R.string.tab)+getString(R.string.tab) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-10-23T03:01:07.887

"\t" 也可以，"\n" 用于开始新行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-03T14:04:04.383

如果 "\t" 不起作用并且 \u0009 （制表符的 Unicode）仅显示 1 个空格：

在 values/strings.xml 添加

```
<string name="tab">\u0009\u0009\u0009\u0009</string> 
```

然后在你的Java文件中添加

```
textView.setText("text" + getString(R.string.tab) + "moretext"); 
```

# ruby-on-rails - 快速测试：如何在测试中仅加载部分 active_model

> ID：14571394
> 
> 赞同：1
> 
> 时间：2013-01-28T21:15:56.637
> 
> 标签：ruby-on-rails, rspec

我正在尝试在不加载整个 Rails 应用程序的情况下测试模型。我只想包含与我正在测试的课程相关的导轨部分。如何正确要求 active_model/validations？我以为我做对了，但是下面的设置抛出了这个错误：

```
undefined method `validate' for Project::Media:Class (NoMethodError) 
```

正在测试的模型：

```
#app/models/project/media.rb

class Project::Media < Project  #Project inherits from ActiveRecord::Base

  validate :allowable_media_source

  before_save : classify_link

  #next, all the methods

end 
```

规格：

```
#spec/models/project/media_spec.rb

class ActiveRecord
  class Base; end
end

class Project; end

require_relative '../../../app/models/project/media.rb'
require 'active_model/validations'

describe Project::Media do
  #then tests 
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:07:04.590

您的测试不起作用，因为`Project`（在您的测试中）没有继承自`ActiveRecord::Base`，所以它没有`validate`方法。要求 ActiveModel 验证只是使`ActiveModel`模块可用，您需要将其实际包含在您的类中以使其方法可用，如下所示：

```
class Project
  include ActiveModel::Validations
end 
```

[本文](http://yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/)中有关单独使用 ActiveModel 的更多信息。

更多参考：

*   [加快 Rails 测试的 4 个步骤](http://tom-clements.com/blog/2011/10/23/4-steps-to-faster-rails-tests/)
*   [快速 RSpec/Rails：分层 spec_helper.rb](http://paul.annesley.cc/2012/03/fast-rspec-slash-rails-tiered-spec-helper-dot-rb/)
*   [使用和不使用 Rails 的快速测试](https://www.destroyallsoftware.com/screencasts/catalog/fast-tests-with-and-without-rails)（付费）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:14:07.703

根据 Shioyama 的帖子，我最终不得不要求我需要的东西。这就是它的样子。

```
require 'active_model'
require 'active_model/validations'
require 'active_record/callbacks'
class Project
  include ActiveModel::Validations    
  include ActiveRecord::Callbacks
end

require_relative '../../../app/models/project/media.rb'

#then tests 
```

# c++ - 如何一次创建、处理和销毁多个窗口？

> ID：14571396
> 
> 赞同：1
> 
> 时间：2013-01-28T21:16:01.043
> 
> 标签：c++, windows, winapi, window

我听说要在我的 C++ 应用程序中创建多个窗口，我需要做的就是创建尽可能多`HWND`的 s，并且对于每个窗口，使用`CreateWindowEx()`，以及适当的窗口类等。
我已经做到了，所以这不是问题。

现在，通常情况下，我会为我的应用程序制作这种消息循环：

```
MSG msg;
while(1)
{
    while(PeekMessage(&msg, hWnd, 0, 0, PM_REMOVE))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    if(msg.message == WM_QUIT)
        break;
} 
```

（这应该是正确的，是吗？）

但是现在我有 3 个窗口，我的消息循环看起来像这样：

```
MSG msg;
while(1)
{
    while(PeekMessage(&msg, hWnd, 0, 0, PM_REMOVE) || PeekMessage(&msg, hConWnd, 0, 0, PM_REMOVE) || PeekMessage(&msg, hStatWnd, 0, 0, PM_REMOVE))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    if(msg.message == WM_QUIT)
        break;
} 
```

所以它会检查所有窗口的消息，对吧？

现在我的问题是，这是为多个窗口获取消息的正确方法吗？
另外，我听说`WndProc`对不同的窗口使用不同的 s 不好，这是真的吗？如果是，为什么？（以及如何只使用一个，如果我想要每个窗口的行为有点不同？）

最后，我如何退出我的应用程序，以便如果其中一个窗口关闭（任何窗口），所有窗口都将适当地关闭？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:25:10.250

`PeekMessage(&msg, NULL, ...`会做你需要的。`msg`将接收需要发送消息的窗口句柄，因此单个 API 调用适用于所有现有窗口。

> hWnd [输入，可选]
> 
> 要检索其消息的窗口的句柄。窗口必须属于当前线程。
> 
> 如果 hWnd 为 NULL，则 PeekMessage 检索属于当前线程的任何窗口的消息，以及当前线程的消息队列中 hwnd 值为 NULL 的任何消息（参见 MSG 结构）。因此，如果 hWnd 为 NULL，则窗口消息和线程消息都会被处理。

也就是说，您可以保留原来的消息泵循环，只是不要将其限制在特定窗口。

问：

> 现在我的问题是，这是为多个窗口获取消息的正确方法吗？

一个消息循环，你的或某人的发送消息。您可以在窗口上处理它们，`WndProc`而无需过多考虑究竟是谁传递消息并调用您的`WndProc`. 它同样适用于单个窗口和多个窗口。

> 另外，我听说对不同的窗口使用不同的 WndProcs 不好，这是真的吗？如果是这样，为什么？（以及如何只使用一个，如果我想要每个窗口的行为有点不同？）

不真实。

> 最后，我如何退出我的应用程序，以便如果其中一个窗口关闭（任何窗口），所有窗口都将适当地关闭？

在`WM_QUIT`您的示例中发布时，消息循环会中断。然后你应该摧毁窗户并退出。

# android - Android ndk找不到atof函数

> ID：14571399
> 
> 赞同：9
> 
> 时间：2013-01-28T21:16:21.960
> 
> 标签：android, android-ndk

我正在尝试在我的 Android 项目中使用开源 C 库。该库使用该`atof()`功能。我知道这`atof()`是标准 C 库 (stdlib.h) 中定义的函数。因此，它应该在Android NDK（仿生库）上的标准C库中实现。

但是，当我尝试加载包含对此函数的调用的库时，我收到运行时错误：

```
java.lang.UnsatisfiedLinkError: Cannot load library: reloc_library[1285]:    86 cannot locate 'atof'.... 
```

我是使用 NDK 进行 Android 开发的初学者，所以我可能只是错过了标志、编译器指令等内容。

我的`android.mk`文件是：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_ALLOW_UNDEFINED_SYMBOLS := true

LS_CPP=$(subst $(1)/,,$(wildcard $(1)/$(2)/*.c))

LOCAL_MODULE := libA

LOCAL_SHARED_LIBRARIES :=       \
                            libgmodule-2.0          \
                            libgobject-2.0          \
                            libgthread-2.0          \
                            libglib-2.0

LOCAL_SRC_FILES:= sourceFile.c

include $(BUILD_SHARED_LIBRARY 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-07-14T16:22:55.813

Google 已将一些 C 标准库函数（如 atof()）从头文件中的内联函数移至普通函数。最新的 NDK 将默认构建一个 .so，它仅与最新的 Android 设备兼容，这些设备在设备的标准 C 库 (libc.so) 中具有 atof() 函数。这意味着，如果您在具有旧版本 C 库的旧设备上运行库，则加载 dll 时会出错，因为预期的 atof() 函数将不存在。

您是否尝试在 Application.mk 中进行设置：

```
APP_PLATFORM := android-9 
```

这将导致 ndk 编译器构建与旧 Android 版本兼容的代码。

您也可以尝试将您的 NDK 安装降级到版本 10b（此版本早于 atof 从内联移动到 libc 的一部分的更改，因此完全避免了该问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:29:45.877

来自[Android 源代码中的 stdlib.h](https://android.googlesource.com/platform/bionic/+/android-4.2.1_r1/libc/include/stdlib.h)；

```
static __inline__ double atof(const char *nptr)
{
    return (strtod(nptr, NULL));
} 
```

`atof`换句话说，它不是库函数，而是调用`strtod`.

如果您需要通过加载库来调用，请`strtod`改用。

# ios - MVC：将模型从 ViewController 传递到另一个是“好习惯”吗？

> ID：14571401
> 
> 赞同：1
> 
> 时间：2013-01-28T21:16:25.043
> 
> 标签：ios, model-view-controller

在我采用**MVC**架构的应用程序中，我有两个不同的控制器，它们使用基本相同的模型类。

由于这个模型类在传递给新控制器时`init`使用初始化类的新实例来取消归档整个对象图`NSKeyedUnarchiver`，因此在资源方面可能会有点昂贵。

所以我想知道将指向第一个控制器的已初始化模型类的指针传递给第二个控制器是否是“好习惯”，而不是从头开始创建一个新实例。

你们有什么感想？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:32:57.307

> 所以我想知道将指向第一个控制器的已初始化模型类的指针传递给第二个控制器是否是“好习惯”，而不是从头开始创建一个新实例。

当然，如果两个控制器应该对相同的数据进行操作，那很好。视图控制器真的不应该依赖于模型的来源——它应该只使用你给它的那个。这使您的视图控制器保持灵活——这意味着您始终可以将同一个控制器与模型的不同实例一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T21:48:57.740

这就是模型、视图和控制器分离的原因，这样您就可以轻松地像这样混合和匹配，而不必担心疯狂的重构。所以，是的，你可以，并且鼓励这样做。例如，控制器如何共享数据，尤其是当您在 iPhone 上使用向下钻取导航 UI 时。

# mysql - Magento-如何在排除给定列上的重复条目的同时加入两个表？

> ID：14571408
> 
> 赞同：2
> 
> 时间：2013-01-28T21:16:50.127
> 
> 标签：mysql, magento

我是实习生，对 Magento 很陌生。我觉得我开始掌握窍门了，但是数据库访问功能对我来说仍然不是非常直观，而且 MySQL 并不是我最擅长的技能。

现在，我正在创建一个模块，该模块将在后端显示一个自定义表，其中包含来自表'eav_attribute'的'frontend_label'和来自'eav_attribute_option_value'的'value'。我的表本身具有对attribute_id 和option_id 的外键引用，并且是我将列连接到我的表的方法。

如果为单个商店存储属性，我的查询工作正常。问题是“eav_attribute_option_value”对于每个 store_id 都有重复的属性/选项对。也就是说，多个商店条目导致我的表显示每个属性选项对的重复条目（我只希望每个属性选项对显示一次）。我想在我的查询中添加一个约束，这样下面的查询只返回属性选项对的唯一条目（实际上，忽略属性/选项对在'eav_attribute_option_value'中重复的事实，因为它们被存储为每个商店 ID）。我的查询如下，但我希望有人能指出我正确的方向，因为我目前陷入困境。

谢谢大家！

```
 protected function _prepareCollection()
{
    $collection = Mage::getModel('landing/management')->getCollection();
    $collection->getSelect()
        ->join(array('eavattr' => 'eav_attribute'),'eavattr.attribute_id = main_table.attribute_id')
        ->join(array('opt'=>'eav_attribute_option_value'),'opt.option_id = main_table.option_id')
        ->reset(Zend_Db_Select::COLUMNS)
        ->columns(array('*'))
        ->columns(array('frontend_label'),'eavattr')
        ->columns(array('value'),'opt');
    $this->setCollection($collection);

    return parent::_prepareCollection();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:37:32.150

我找到了答案，我可以按“frontend_label”和“value”进行分组，以避免在这种情况下出现重复条目​​。就我而言，代码现在变为：

```
 $collection->getSelect()
        ->join(array('eavattr' => 'eav_attribute'),'eavattr.attribute_id = main_table.attribute_id')
        ->join(array('opt'=>'eav_attribute_option_value'),'opt.option_id = main_table.option_id')
        ->reset(Zend_Db_Select::COLUMNS)
        ->columns(array('*'))
        ->columns(array('frontend_label'),'eavattr')
        ->columns(array('value'),'opt')
        ->group('frontend_label','value'); 
```

# java - -XX:OnOutOfMemoryError=" " 不能在 Windows 中工作？

> ID：14571414
> 
> 赞同：4
> 
> 时间：2013-01-28T21:17:12.530
> 
> 标签：java

我的目标是在抛出 java.lang.OutOfMemoryError 时执行脚本（Windows 批处理文件），按照[Hotspot VM Options中描述的选项](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)

```
-XX:OnOutOfMemoryError="<cmd args>; <cmd args>" 
```

当抛出 OutOfMemoryError 时，我无法执行脚本或任何其他进程。首先我尝试启动 cmd.exe 并指定脚本的路径，我修改了双引号的位置，使用前斜杠而不是反斜杠，使用双反斜杠。我完全放弃了斜杠和引号，并在工作目录或 PATH 上尝试了简单的 .exe。没有任何效果。

我什至无法*尝试*运行任何可执行文件。通过使用[ProcMon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)，我确定 JVM 甚至没有在寻找具有我指定名称的可执行文件，更不用说尝试启动它了。

我知道我在 JVM 参数中正确指定了该选项，因为如果我故意插入错字，它会抱怨。我正在尝试以下操作：

```
java -XX:OnOutOfMemoryError=myprocess.exe com.mycompany.SimulateOome
java -XX:OnOutOfMemoryError="myprocess.exe" com.mycompany.SimulateOome
java "-XX:OnOutOfMemoryError=myprocess.exe" com.mycompany.SimulateOome 
```

这会产生到 stdout/err 的预期堆栈跟踪。

这可能是我的测试课。我当前的版本只是抛出 java.lang.OutOfMemoryError。我还通过分配一个大数组来模拟一个更有机的 OOME。两者都不起作用。

我在 Windows 2003/2008 上使用 JDK 1.6.0_38，但也尝试了 JDK 1.7。

**编辑：**

测试班有问题。简单地抛出异常或简单的大数组分配都不会导致 OOME 处理程序触发，尽管否则会成功抛出 OOME。有关触发 OOME 处理程序的 Perception 的 OutOfMem 类，请参见下文。整理好之后，语法就很简单了，引号可以包围整个选项，也可以只是等号后面的部分。对于 Windows shell 脚本，可以使用：

```
java "-XX:OnOutOfMemoryError=c:\windows\system32\cmd.exe /c c:\scripts\my_oome_handler.bat" com.mycompany.MyClass 
```

或者

```
java -XX:OnOutOfMemoryError="c:\windows\system32\cmd.exe /c c:\scripts\my_oome_handler.bat" com.mycompany.MyClass 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T21:57:56.047

> 这可能是我的测试课。我当前的版本只是抛出 java.lang.OutOfMemoryError。我还模拟了一个更有机的 OOME，但分配了一个大数组。两者都不起作用。

我对此进行了测试，似乎确实如此。仍在寻找可靠的解释，但使用 Java 7：

```
public class OutOfMem {
    public static void main(final String[] args) {
        final List<byte[]> segments = new ArrayList<byte[]>(64000);

        final int size = 6400000;

        for (int i = 0; i < 1000000000; i++) {
            segments.add(new byte[size * i]);
        }

        for (final byte[] data : segments) {
            final int dataSize = data.length;
            System.out.printf("Segment [size=%s]\n", dataSize);
        }
    }
} 
```

在上面运行`java "-XX:OnOutOfMemoryError=ls" OutOfMem`正常（执行 ls 命令）。但是，对于这个类：

```
public class OutOfMem2 {
        public static void main(final String[] args) throws Throwable {
                throw new OutOfMemoryError("Fake OOME");
        }
} 
```

运行`java "-XX:OnOutOfMemoryError=ls" OutOfMem2`会吐出异常堆栈跟踪，但实际上并未触发 OOME 处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:21:12.957

您是否尝试将参数用引号括起来？

```
java -XX:OnOutOfMemoryError="myprocess.exe SimulateOome" 
```

还要确保您的 myprocess.exe 可以通过 PATH 访问，或者提供该进程的完整路径。

# javascript - HTML5拖放在目标中创建原始副本？

> ID：14571420
> 
> 赞同：0
> 
> 时间：2013-01-28T21:17:52.450
> 
> 标签：javascript, html, drag-and-drop

嘿，我已经搜索过，但找不到我可以开始工作的问题的答案...

基本上，我要创建的是网站上的“篮子”类型的东西，可以将“产品”放入其中，这很简单，但是当使用默认拖放时，它会将原始产品（将是图像）简单地移动到下拉菜单中区域，我希望产品被复制，这样无论您将它放入篮子多少次，它在原始位置仍然是可见和可拖动的。我一直在玩这个例子...... [http://jsfiddle.net/WpWBG/1/](http://jsfiddle.net/WpWBG/1/)我想我可以添加`e.dataTransfer.dropEffect='copy';`和`e.dataTransfer.effectAllowed='copy';`到drag_start函数但没有运气。

任何帮助将非常感激！谢谢威尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:53:54.537

对于这种类型的场景，我建议使用[jQueryUI](http://jqueryui.com/)。

例如，看一下[购物车演示](http://jqueryui.com/droppable/#shopping-cart)，它完全符合您的要求。

# ruby-on-rails - 如何：Spree::Product 与您的其他模型之间的关系

> ID：14571432
> 
> 赞同：1
> 
> 时间：2013-01-28T21:19:09.273
> 
> 标签：ruby-on-rails, ruby, e-commerce, spree

在我的带有 Spree 的 Rails 3.2 应用程序中，我想要一个与 Spree 提供的`WishList`模型有`has_many`关系的`Spree::Product`模型。我已经创建了一个装饰器类来声明一个`belongs_to`关系，`Spree::Product`但是我如何`Spree::Product`在我自己创建的另一个模型中引用。

我都试过了

```
class WishList < ActiveRecord::Base
  has_many :products
end 
```

和

```
class WishList < ActiveRecord::Base
  has_many :spree_products
end 
```

他们都没有工作。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T22:10:58.847

使用`:class_name`选项：

```
class WishList < ActiveRecord::Base
  has_many :spree_products, :class_name => 'Spree::Product'
end 
```

# sql - 创建表语句中的 SQL 语法错误

> ID：14571438
> 
> 赞同：0
> 
> 时间：2013-01-28T21:19:52.070
> 
> 标签：sql, ms-access, syntax

我刚开始在 MS Access 上试验 SQL。我正在尝试将数据插入表中，但我无法弄清楚我在这里做错了什么。我知道这可能很简单，所以我提前道歉。感谢你给与我的帮助！

这是我所拥有的：

```
CREATE TABLE DeathDay
  (
     ID        INT PRIMARY KEY NOT NULL,
     LastName  CHAR(25),
     FirstName CHAR(10),
     DoB       DATE,
     DoD       DATE
  );

INSERT INTO DeathDay
VALUES      (1,
             'Breitenbach',
             'Max',
             '1991-05-17',
             '2022-12-31'); 
```

我可以很好地创建表，但是当我尝试插入数据时它给了我以下错误消息。

> “CREATE TABLE 语句中的语法错误”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:28:08.867

我刚刚在 MS Access 2010 的单独查询窗口中运行了您的脚本，并且没有错误。但是，如果您尝试同时运行它们，则会出现错误：

> *CREATE TABLE 语句中的语法错误*

根据我的经验**，您不能在同一个查询窗口中运行多个查询。**

如果要运行多个查询，则需要使用脚本来处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T08:49:54.920

万一其他人遇到与我相同的问题，我发现问题是我的 SQL 语句中的关键字。就我而言，“货币”。此处提供了保留关键字列表：[http](http://allenbrowne.com/AppIssueBadWord.html) ://allenbrowne.com/AppIssueBadWord.html与 SQL 相关的是 Jet 关键字。

# javascript - 数组顺序改变

> ID：14571439
> 
> 赞同：1
> 
> 时间：2013-01-28T21:19:55.567
> 
> 标签：javascript, arrays, json

我有一个 mongo 查询，它返回以下格式的数组，我该如何更改它

```
[[12, 1359410400000], [18, 1359410400000]] 
```

看起来像这样

```
[[ 1359410400000, 12], [ 1359410400000,18]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:23:58.570

```
mongoArray.forEach(function(arr) {
    arr.reverse();
}); 
```

或者更简洁如下：

```
mongoArray.forEach(Function.call.bind([].reverse)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:24:07.127

```
newArr = [];
oldArr.forEach(function(v, i){ newArr[i] = [v[1], v[0]]; }); 
```

# jquery - 更改 Jquery 上的类名 .toggle(); 引导手风琴

> ID：14571440
> 
> 赞同：0
> 
> 时间：2013-01-28T21:19:57.510
> 
> 标签：jquery, twitter-bootstrap, jquery-ui-accordion

我正在使用 bootstraps 手风琴来显示问题列表，然后当您单击加号图标时，它会向下滑动以显示答案。我想要实现的是，当手风琴展开以显示答案时，将加号图标更改为减号（我制作了一个精灵）到目前为止，图像没有改变

看法

```
<div id="accordion" class="accordion in collapse">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a href="#collapseOne" data-parent="#accordion" data-toggle="collapse" class="accordion-toggle collapsed">Question1</a>
    </div>
    <!--End of Accordion heading-->
    <div id="collapseOne" class="accordion-body collapse" style="height: 0px;">
      <div class="accordion-inner">Answer to Question 1.</div>
      <!--End of accordion Inner-->
    </div>
    <!--End of collapseOne-->
  </div>
  <!--End of accordion-group-->
</div> 
```

CSS

```
.accordion .accordion-toggle, .toggle-box a {
background: url("/assets/collapse_btn.png") no-repeat scroll left 10px transparent;
color: #666666;
display: block;
font-size: 18px;
height: 25px;
line-height: 23px;
padding: 10px 20px 10px 40px;
}

.accordion a.collapsed, .toggle-box .collapsed {
background: url("/assets/collapse_btn.png") no-repeat scroll left -58px transparent;
} 
```

我有这个 jquery 在切换状态时更改类

```
$('.accordion').collapse();
$('.accordion').on('shown', function () {
    var $aGroup = $('.accordion-group');
    $aGroup.find('.accordion-body').not(".in").prev('.accordion-heading').children("a").addClass('collapsed');

  }) 
```

但这不起作用。我的 Jquery 仅限于我可能在这里犯了一些错误。谁能指出我做错了。我试图把小提琴放在一起使诊断更容易，但不会把手风琴 js 拉进去？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:32:16.303

而不是切换一个 .collapsed 类（我假设它会有加号图标，因为可以打开折叠的 div），您应该使用加号图标作为默认精灵，然后添加/删除一个名为 .opened 的类。该 .opened 类将带有减号。另外，我认为定位.accordion-body 会更容易。这是一个如何做到这一点的示例：

脚本：

```
$('.accordion-body').on('show',function(){
     $(this).siblings('.accordion-heading').find('.accordion-toggle')
       .addClass('opened');
    });
$('.accordion-body').on('hide',function(){
     $(this).siblings('.accordion-heading').find('.accordion-toggle')
       .removeClass('opened');
 }); 
```

风格：

```
/* Class below should have plus sign */
.accordion-toggle {
    background: url("/assets/collapse_btn.png") no-repeat scroll left 10px transparent;
    color: #666666;
    display: block;
    font-size: 18px;
    height: 25px;
    line-height: 23px;
    padding: 10px 20px 10px 40px;
}
/* Class below should have minus sign */
.accordion-toggle.opened {
    background: url("/assets/collapse_btn.png") no-repeat scroll left -58px transparent; 
} 
```

我已经用我自己的加号/减号图标在本地测试了这段代码，它对我有用。

*如果您的班级只是错误命名并且 .collapsed 确实有减号，您可以使用折叠而不是上面打开。

# php - 从目标字符串中选择所有文本，不包括空格

> ID：14571444
> 
> 赞同：1
> 
> 时间：2013-01-28T21:20:04.257
> 
> 标签：php, regex

我有一个看起来像下面的字符串

```
&pound;&nbsp;                               0.00<br> 
```

我只对提取`£`和`<br>`标记之间的字符串中的十进制值感兴趣。我目前有一个正则表达式，它是：

```
(?<=&pound;&nbsp;)(.*?)(?=\<br>) 
```

这给出了以下结果

```
 0.00 
```

我需要确保最终结果中不包含空格，我尝试了类似以下的内容...

```
(?<=&pound;&nbsp;\s*)(.*?)(?=\<br>) 
```

这显然是错误的，意味着我不知道自己在做什么。

如何确保提取正确的十进制值减去任何空格？

```
e.g. 
0.00
instead of 
           0.00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:22:20.537

[`trim()`](http://php.net/manual/en/function.trim.php)你得到的字符串？

```
$result = trim($result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T21:25:46.590

如果您只对十进制值感兴趣，则正则表达式模式应如下例所示。该示例打印在搜索字符串中找到的所有小数。

```
<?php

$string = '&pound;&nbsp;

                          5.00<br><br><br>

                          Shipping&nbsp;&pound;&nbsp;3.35<br><br><b>Total&nbsp;&pound;&nbsp;

                             8.35<br></b>';

$pattern = '/&pound;&nbsp;\s*(-?[0-9]+\.[0-9]+)<br>/u';

$result = preg_match_all($pattern, $string, $matches);
if($result === FALSE) {
    die('error in regex');
}

// output the decimals
if($result > 0) {
    foreach($matches[1] as $decimal) {
        echo $decimal, PHP_EOL;
    }
}

// Output:
//
// 5.00
// 3.35
// 8.35 
```

请注意，该模式将匹配正负小数

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T21:27:06.760

为什么不简化正则表达式？

```
/&pound;&nbsp;\s*([0-9\.]+)<br>/u 
```

**更新：**更一般的情况：

```
/&pound;.*([0-9\.]+)<br>/u 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T21:29:21.950

这行得通；

```
$s = '&pound;&nbsp;                               0.00<br>';
preg_match('~&(.*?);\s+([\d\.]+)~i', $s, $m);
// or
// preg_match('~&(\w+);\s+([\d\.]+)~i', $s, $m);
print_r($m); 
```

出去;

```
大批
(
    [0] => &磅;  0.00
    [1] => 英镑； 
    [2] => 0.00
)

```

# java - Spring TransactionProxyFactoryBean 仅在从外部类调用方法时才尊重事务

> ID：14571447
> 
> 赞同：0
> 
> 时间：2013-01-28T21:20:21.590
> 
> 标签：java, spring, transactions

这是我正在使用的示例配置。

当我从外部类调用 doSomething() 方法时，事务性是所希望的。

但是，当我从“目标”bean 中调用相同的方法时，事务似乎永远不会启动，因此在失败的情况下不会发生回滚。

这是预期的行为还是我错过了什么？

```
<bean id="my.bean" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
    <property name="transactionManager" ref="txManager"/>
    <property name="target" ref="my.bean.impl"/>
    <property name="transactionAttributes">
        <props>
            <prop key="doSomething">PROPAGATION_REQUIRED, -Exception</prop>
        </props>
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:31:27.977

是的，这是一种预期的行为。拦截器或代理包装目标 bean，拦截从外部对 bean 的调用，然后委托给目标 bean。它不知道内部调用。需要字节码检测来拦截内部调用。

# ruby-on-rails - resque-scheduler 是否需要 resque 任务才能运行排队的作业？

> ID：14571449
> 
> 赞同：1
> 
> 时间：2013-01-28T21:20:22.750
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, resque

我想知道 resque-scheduler 是否需要 resque 实例来运行特定队列中的作业，或者 resque-scheduler 必须使用该`resque:work`任务。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T23:59:06.537

是的，您肯定需要运行一个 resque worker 来处理作业，使用如下命令：

```
QUEUE=* rake resque:work 
```

Resque-scheduler 在需要执行时将作业放入队列中，但不会自行执行。这就是为什么你只运行一个 resque-scheduler 实例，以及你需要跟上工作的尽可能多的 resque 工作人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:33:00.823

Resque Scheduler 基本上是一个调度程序。它一直在寻找调度时间，然后，当需要执行它们时，它会获取 resque scheduler.yml 中指定的参数，并将作业推送到 scheduler.yml 中指定的队列中。

现在它由以下启动resque任务：

```
QUEUE=* rake resque:work 
```

从队列中挑选作业并对其进行操作。

将 resque 调度程序视为`cron job`其唯一任务是将消息推送到指定队列中。现在由 resque-worker 开始处理它。

# c# - 在 WinForms 中更新 BindingSource 不会更新数据源集合

> ID：14571451
> 
> 赞同：15
> 
> 时间：2013-01-28T21:20:24.897
> 
> 标签：c#, winforms, data-binding, collections, bindingsource

我想`DataGridView`在 Windows 窗体应用程序中显示自定义集合。此自定义集合实现`ICollection`, 和`IEnumerable`. 我设置了一个`BindingSource`, 使用集合作为 .DataSource 属性。`DataGridView`设置为使用我的`BindingSource`数据源。`BindingSource.Add()`当我使用该方法将新项目添加到集合中`DataGridView`时，新项目会正确更新。`BindingSource`另一方面，DataSource 不会：

```
MyCustomCollection myCollection = new MyCustomCollection();

myCollection.Add(myCustomObject1);
myCollection.Add(myCustomObject2);

myBindingSource.DataSource(myCollection);
myBindingSource.Add(myCustomObject3); 
```

在上面的代码中，myBindingSource 的内部 List 包含正确数量的记录 (3)，并且`DataGridView`也包含三个记录，但 myCollection 只包含两个记录。我知道更改基础 myCollection 不会更新 the`BindingSource`或 the `DataGridView`，因为它不是 a `BindingList<T>`，但我的印象是`BindingSource`直接更新 a 将确保 myCollection 同时更新。

有没有办法使用不是 a 的集合`BindingList<T>`并在与直接交互时更新它`BindingSource`？

**更新**：我在所有部分（Collection、BindingSource、DataGridView）中更新数据的一种方法如下：

```
myCollection.Add(myCustomObject3);
myBindingSource.DataSource = null;
myBindingSource.DataSource = myCollection; 
```

我很确定有更好的方法来解决这个问题，但这是产生我期望的结果的唯一方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-05-04T21:03:18.370

问题是填充**适配器**。当您加载表单时，**填写**已为您完成。只需确保进行重新填充，然后在任何数据更改后使用重置绑定进行跟进，网格将被刷新。

例子 ：

```
WorkTableAdapter.Insert(objData.XAttribute, "",
  objData.YAttribute,objLoanData.Amount_IsValid, DateTime.Now, DateTime.Now);
this.WorkTableAdapter.Fill(this.POCDataSet.Work);
this.WorkBindingSource.ResetBindings(false); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T21:24:27.333

如果您使用无法代表您执行此操作的容器，则必须在数据源更改后手动调用 ResetBindings()。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.resetbindings.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.resetbindings.aspx)

> 使绑定到 BindingSource 的控件重新读取列表中的所有项目并刷新它们的显示值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-29T22:07:04.960

**重置单个项目有效！**

如果只有一项频繁更改，我对 .ResetBindings(false) 没有运气，并且重新分配数据源会导致潜在的开销闪烁。

我尝试了使用 PropertyChanged 的​​内置机制，但没有更新。

使用 ResetItem() 重置单个项目有效！

```
 for (int i = 0; i < bindingSource1.Count; i++)
        {
            bindingSource1.ResetItem(i);   
        } 
```

甚至更好 - 如果您有一个更新事件附加到绑定源中的每个数据项，您可以在绑定源中找到对象并使用对象的索引来调用 ResetItem(idx)

在这种情况下，我的自定义事件 args 包含一个字典键，指向包含在单独集合中的数据对象。在使用 bindningsource.IndexOf() 定位对象后，它会单独刷新。

```
 void Value_PropertyChanged(object sender, RegisterEventArgs e)
    {

        var idx = bindingSource1.IndexOf(registers_ref[e.registerID]);
        if (idx>=0)
        {
            bindingSource1.ResetItem(idx);                
        }

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T22:37:39.393

我相信我不久前遇到了这个问题 - 我在我的代码的文件中找到了，我认为这是对我有用的解决方案。

```
 // Applies pending changes to the underlying data source.
        this.bindingSource1.EndEdit(); 
```

这是在保存按钮的单击处理程序的上下文中。

# project - OpenERP 7 用户项目分配

> ID：14571452
> 
> 赞同：-2
> 
> 时间：2013-01-28T21:20:25.377
> 
> 标签：project, variable-assignment, openerp, settings

全新安装 OpenERP 7.0

我做了一个非常简单的设置

admin user1（在设置中尽可能提升权限） user2（在设置中尽可能提升权限）

当我以管理员身份登录时，我可以创建一个新项目并将任何任务（甚至可能是项目）分配给任一用户

当我以 user1 或 user2 身份登录时：用户可以创建一个新项目，但不能将其分配给他们的兄弟姐妹。

* * *

## 标记为已解决

我随后发现将门户分配给 user1 或 user2 会破坏在 Project 中分配任务的能力。门户需要锁定权利，这是可以理解的，但为什么会这样并不明显。SHARE 和 Multi-User 的结果类似。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:35:03.723

有类似的问题。也许这是由于：[https ://bugs.launchpad.net/openobject-server/+bug/1123940](https://bugs.launchpad.net/openobject-server/+bug/1123940)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T08:26:54.590

我没有检查“门户”，但仍然不能。

但是经过一些测试，我找到了解决方案：

1）首先您创建一个项目，然后在隐私中选择“公共”。
2）然后保存它。
3）然后去编辑，并在隐私中选择“仅限关注者”。
4）并再次保存，它工作，

然后您可以用作您的私人项目，或添加一些关注者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T02:19:18.047

与其说是解决不如说是答案。当 USER 1 登记为有权访问“门户”时，会发生上述情况。

以前，在选择“共享”时也发现了相同的特性。

似乎现在可以工作，但 OpenERP ACL 和规则的主题很复杂。记录您可能进行的任何更改（我没有更改任何内容，但仍然如此） 不要登录您不会使用的服务。

最后，如果您能够在设置过程中使用“快照”快速恢复到工作位置，那么值得扔一些您可以在需要时使用的东西。

# python - virtualenv：指定在系统范围和本地使用哪些包

> ID：14571454
> 
> 赞同：57
> 
> 时间：2013-01-28T21:20:42.593
> 
> 标签：python, virtualenv, pip

> **可能重复：**
> [使 virtualenv 从您的全局站点包继承特定包](https://stackoverflow.com/questions/12079607/make-virtualenv-inherit-specific-packages-from-your-global-site-packages)

有没有办法`virtualenv`为 Python 创建一个并**指定**应该从系统范围的安装中使用（继承）哪些包，以及应该从系统范围的安装中忽略哪些包？

更具体地说，例如，有一个**系统**范围的安装：

```
numpy
scipy
matplotlib 
```

我想创建一个虚拟环境，这样：

*   使用系统范围的安装`numpy`和`scipy`
*   **忽略**系统范围的`matplotlib`，并让我**安装/升级我自己的版本**（使用`pip -U matplotlib`）。

这可能吗？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-01-28T21:34:31.653

最简单的方法是创建一个包含系统站点包的 virtualenv，然后安装您需要的版本：

```
$ virtualenv --system-site-packages foo
$ source foo/bin/activate
$ pip install Django==1.4.3 
```

~~`pip freeze`之后，您还可以通过检查输出并删除不需要的包来清理 virtualenv 。~~（删除 system-site-packages`pip uninstall`不再适用于较新版本的 virtualenv）

另一种方法是创建一个干净的 virtualenv 并链接您需要的部分：

```
$ virtualenv --no-site-packages foo
$ source foo/bin/activate
$ ln -s /usr/lib/python2.7/dist-packages/PIL* $VIRTUAL_ENV/lib/python*/site-packages 
```

这些命令在非 unixish 环境中可能略有不同。路径还取决于您使用的系统。为了找出库的路径，启动 python shell（没有激活的 virtualenv），导入模块并检查`module_name.__path__`. 例如

```
Python 2.7.3 (default, Sep 26 2012, 21:51:14) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import PIL
>>> PIL.__path__
['/usr/lib/python2.7/dist-packages/PIL'] 
```

此外，如果您`--system-site-packages`使用`pip install --upgrade --ignore-installed numpy`.

# javascript - javascript选项卡导航更改内容

> ID：14571455
> 
> 赞同：0
> 
> 时间：2013-01-28T21:20:50.750
> 
> 标签：javascript

我正在制作 javascript 标签导航。并且不知道更改内容的最佳方法是什么。有一些变体：显示/隐藏元素，更改内容的innerHTML，XMLhttpRequest（但据我所知，这只是服务器技术，无法获取本地文件的数据，这是真的吗？）。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:23:18.757

最好预先加载和隐藏内容（除非它很大），以便搜索引擎对其进行索引并减少用户必须等待的时间。更改现有内容的可见性是迄今为止最简单的方法。

# javascript - 创建带有 2 行选项卡、1 个内容框、javascript/jQuery 的选项卡

> ID：14571466
> 
> 赞同：1
> 
> 时间：2013-01-28T21:21:38.103
> 
> 标签：javascript, jquery, css

我想知道是否有人对看似简单的问题有解决方案。

我正在尝试创建一个选项卡框，其中有一排选项卡在内容框的顶部运行，另一行在内容框的底部运行。

像这样的东西：

```
 <div id="tabContainer">
    <div id="tabs">
      <ul>
        <li id="tabHeader_1">Tab 1</li>
        <li id="tabHeader_2">Tab 2</li>
        <li id="tabHeader_3">Tab 3</li>
      </ul>
    </div>
    <div id="tabscontent">
      <div class="tabpage" id="tabpage_1">
        <h2>Page 1</h2>
        <p>Content 1</p>
      </div>
      <div class="tabpage" id="tabpage_2">
        <h2>Page 2</h2>
        <p>Content 2</p>
      </div>
      <div class="tabpage" id="tabpage_3">
        <h2>Page 3</h2>
        <p>Content 3</p>
      </div>
              <div class="tabpage" id="tabpage_4">
        <h2>Page 4</h2>
        <p>Content 4</p>
      </div>
              <div class="tabpage" id="tabpage_5">
        <h2>Page 5</h2>
        <p>Content 5</p>
      </div>
              <div class="tabpage" id="tabpage_6">
        <h2>Page 6</h2>
        <p>Content 6</p>
      </div>
    </div>
          <div id="tabs">
      <ul>
        <li id="tabHeader_4">Tab 4</li>
        <li id="tabHeader_5">Tab 5</li>
        <li id="tabHeader_6">Tab 6</li>
      </ul>
    </div>
  </div> 
```

Muchos感谢任何可以提供帮助的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:35:54.363

首先你不能`id`在多个元素上使用，`id`'s are uniqiue。将您的更改`tabs` `id`为`class`. 第二件事：像这样更改您的 li 选择器的 id 以便于操作。

[**这是工作的jsFiddle。**](http://jsfiddle.net/QqJ5X/6/)

**html:**

```
 <ul>
        <li id="header_tabpage_1">Tab 1</li>
        <li id="header_tabpage_2">Tab 2</li>
        <li id="header_tabpage_3">Tab 3</li>
   </ul> 
```

**jQuery：**

```
$(document).ready(function() {
    $('.tabpage').hide().first().show();

    $('.tabs ul li').click(function() {
       var target = $(this).attr('id').replace('header_','');
       //this will return like 'tabpage_1'

       $('.tabpage').hide();
       $('#'+ target).fadeIn(500);

       $('.tabs ul li').removeClass('selected');
       $(this).addClass('selected');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:18:04.930

@barlas 已经说过`#tabs`在同一页面上存在两次：这是不允许的，请使用类。

这是一个专注于样式（CSS）部分的小提琴：http: **[//jsfiddle.net/XXhSQ/](http://jsfiddle.net/XXhSQ/)**

选项卡行（顶部和底部）和内容显示为`table-row`（其容器显示为`table`）。
它们仍然是无语义的 div；这些`table-things`只是应用于它们的视觉显示算法，而不是突然用作布局的表格（后者意味着使用 HTML 元素，如`table`,`tr`和`td`）。

然后将`a`元素添加到`.tabs>li`其中，因为选项卡必须可以用鼠标单击并且可以用键盘聚焦（也可以触摸）。当它们的容器 ( ) 显示为等宽的单元格时，
它们会显示为`block`占据其容器的整个宽度。 最后是一些背景、边框和不同的圆形边框，用于演示目的。`li`
`tabs-up``tabs-down`

兼容IE8+。IE7- 的后备将使用`.tabs li { display: inline;zoom:1;}`（这相当于`display: inline-block`IE7- 因为他们既不了解表格内容也不了解内联块......）

# image - QImage 构造函数内存泄漏（valgrind）

> ID：14571472
> 
> 赞同：0
> 
> 时间：2013-01-28T21:22:07.980
> 
> 标签：image, qt, valgrind, memory-leaks

我有一个使用一些 Qt 类的控制台程序。以下代码是它的片段

```
std::cout << "before the problem (PVM constructor)" << std::endl;
image = new QImage(filename);
std::cout << "after the problem (PVM constructor)" << std::endl; 
```

针对 valgrind 运行它会引发一些错误：

```
before the problem (PVM constructor)
==8344== Conditional jump or move depends on uninitialised value(s)
==8344==    at 0x51D6D19: inflateReset2 (in /lib/i386-linux-gnu/libz.so.1.2.3.4)
==8344==    by 0x51D6E0C: inflateInit2_ (in /lib/i386-linux-gnu/libz.so.1.2.3.4)
==8344==    by 0x51D6E92: inflateInit_ (in /lib/i386-linux-gnu/libz.so.1.2.3.4)
==8344==    by 0x51B3F60: png_create_read_struct_2 (in /lib/i386-linux-gnu/libpng12.so.0.46.0)
==8344==    by 0x42807AC: QImageReader::read(QImage*) (in /usr/lib/i386-linux-gnu/libQtGui.so.4.7.4)
==8344==    by 0x4021BAF: ???
==8344==  Uninitialised value was created by a heap allocation
==8344==    at 0x4028876: malloc (vg_replace_malloc.c:236)
==8344==    by 0x51C0796: png_malloc_default (in /lib/i386-linux-gnu/libpng12.so.0.46.0)
==8344==    by 0x51C082C: png_malloc (in /lib/i386-linux-gnu/libpng12.so.0.46.0)
==8344==    by 0x51A6A48: ??? (in /lib/i386-linux-gnu/libpng12.so.0.46.0)
==8344==    by 0x51D6DE8: inflateInit2_ (in /lib/i386-linux-gnu/libz.so.1.2.3.4)
==8344==    by 0x51D6E92: inflateInit_ (in /lib/i386-linux-gnu/libz.so.1.2.3.4)
==8344==    by 0x51B3F60: png_create_read_struct_2 (in /lib/i386-linux-gnu/libpng12.so.0.46.0)
==8344==    by 0x42807AC: QImageReader::read(QImage*) (in /usr/lib/i386-linux-gnu/libQtGui.so.4.7.4)
==8344==    by 0x4021BAF: ???
==8344== 
after the problem (PVM constructor) 
```

你能帮我找出问题的原因吗？可能是内部 Qt 库有一些危险的结构 - 还是在控制台程序中使用 Qt GUI 库的问题（不这么认为，但谁知道）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:30:25.517

Valgrind 会告诉你它是否发现内存泄漏，例如当你在堆上分配内存但你从未释放它时。我猜你只是`delete image`在你的程序完成后不打电话。这是 valgrind 将作为内存泄漏处理的东西。它与Qt无关。C++ 中的规则是：对于每个新的有 1 个删除。

# php - 智能建议扩展搜索匹配

> ID：14571474
> 
> 赞同：0
> 
> 时间：2013-01-28T21:22:07.967
> 
> 标签：php, javascript, mysql, autosuggest

我购买并实施了“智能建议”，但我的访问者通常无法获得部分匹配的结果。有关我的问题的详细信息，请参阅下面的示例。

有没有人知道如何使建议更广泛地匹配？

1.  访问：www.jwsuretybonds.com
2.  输入“加利福尼亚承包商”</li>
3.  通知 3 个结果，第一个是：“加利福尼亚承包商执照履约和付款保证金”</li>
4.  现在输入“加利福尼亚承包商付款”并记下 0 结果。我希望第一个结果仍然显示。
5.  现在输入“加利福尼亚付款承包商”并记下 0 结果。我希望第一个结果仍然显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:46:33.710

当您说您“购买并实施了 Smart Suggest”时，我不知道您的实际意思是什么，但是您所描述的功能通常是通过使用[全文索引](http://en.wikipedia.org/wiki/Full_text_search)来实现的，也就是说，如果您使用的是 RDBMS存储建议的值。对于 MySQL，请参见[此处](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)。

另一种选择是使用一些单独的软件解决方案，例如[ElasticSearch](http://www.elasticsearch.org/)，在我看来，只有当您拥有大量此类文本并且您将它们用于不仅仅是一个简单的建议框时，它才是合理的。

另一种选择是实际调整您现有的算法以使用正则表达式或其他东西来实际执行您希望它执行的操作。

# android - 在 Android 中使用 Google Books API

> ID：14571478
> 
> 赞同：6
> 
> 时间：2013-01-28T21:22:30.680
> 
> 标签：android, google-api, google-books

嗨，我是 Android 新手，正在使用 Web API。我目前正在编写一个应用程序，它可以扫描一本书的条形码，然后在 Google 图书中搜索它。

到目前为止，我在我的应用程序中实现了 Scandit，并从 Google API 控制台为 Books API 注册并获取了 API 密钥。从那里我不知道如何继续并开始编码。到目前为止，据我所知，它需要我通过 uri 发出请求数据，但我一直坚持如何实际编码。我想知道是否有人可以指出我正确的方向或提供一个示例代码来展示如何使用 URI 获取数据。

我还下载了[压缩的 Book API Jar 库](http://code.google.com/p/google-api-java-client/wiki/APIs#Books_API "链接到 Books API Jar 库")，我需要使用它吗？我问这个是因为从这个网站上关于 Google Places API 的一个问题中，答案之一说你所需要的就是使用 Google API 作为构建目标，它不需要任何 Jar 文件，但这是否适用于 Books API出色地？

另外我正在使用 Eclipse，我应该将构建目标设置为 Google APIs 16 吗？我猜这是对的，因为我计划将来在这个应用程序中使用谷歌地图。

谢谢，这是我第一次在这里问问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-09T22:19:28.257

我自己刚刚完成了这个。这就是我使用 an`HttpURLConnection`和 an实现它的方式`AsyncTask`（我只是调用“ [https://www.googleapis.com/books/v1/volumes?q=isbn](https://www.googleapis.com/books/v1/volumes?q=isbn) :"+yourISBN 并解析 JSON）：

```
// Received ISBN from Barcode Scanner. Send to GoogleBooks to obtain book information.
class GoogleApiRequest extends AsyncTask<String, Object, JSONObject>{

    @Override
    protected void onPreExecute() {
        // Check network connection.
        if(isNetworkConnected() == false){
            // Cancel request.
            Log.i(getClass().getName(), "Not connected to the internet");
            cancel(true);
            return;
        }
    }
    @Override
    protected JSONObject doInBackground(String... isbns) {
        // Stop if cancelled
        if(isCancelled()){
            return null;
        }

        String apiUrlString = "https://www.googleapis.com/books/v1/volumes?q=isbn:" + isbns[0];
        try{
            HttpURLConnection connection = null;
            // Build Connection.
            try{
                URL url = new URL(apiUrlString);
                connection = (HttpURLConnection) url.openConnection();
                connection.setRequestMethod("GET");
                connection.setReadTimeout(5000); // 5 seconds
                connection.setConnectTimeout(5000); // 5 seconds
            } catch (MalformedURLException e) {
                // Impossible: The only two URLs used in the app are taken from string resources.
                e.printStackTrace();
            } catch (ProtocolException e) {
                // Impossible: "GET" is a perfectly valid request method.
                e.printStackTrace();
            }
            int responseCode = connection.getResponseCode();
            if(responseCode != 200){
                Log.w(getClass().getName(), "GoogleBooksAPI request failed. Response Code: " + responseCode);
                connection.disconnect();
                return null;
            }

            // Read data from response.
            StringBuilder builder = new StringBuilder();
            BufferedReader responseReader = new BufferedReader(new InputStreamReader(connection.getInputStream()));
            String line = responseReader.readLine();
            while (line != null){
                builder.append(line);
                line = responseReader.readLine();
            }
            String responseString = builder.toString();
            Log.d(getClass().getName(), "Response String: " + responseString);
            JSONObject responseJson = new JSONObject(responseString);
            // Close connection and return response code.
            connection.disconnect();
            return responseJson;
        } catch (SocketTimeoutException e) {
            Log.w(getClass().getName(), "Connection timed out. Returning null");
            return null;
        } catch(IOException e){
            Log.d(getClass().getName(), "IOException when connecting to Google Books API.");
            e.printStackTrace();
            return null;
        } catch (JSONException e) {
            Log.d(getClass().getName(), "JSONException when connecting to Google Books API.");
            e.printStackTrace();
            return null;
        }
    }
    @Override
    protected void onPostExecute(JSONObject responseJson) {
        if(isCancelled()){
            // Request was cancelled due to no network connection.
            showNetworkDialog();
        } else if(responseJson == null){
            showSimpleDialog(getResources().getString(R.string.dialog_null_response));
        }
        else{
            // All went well. Do something with your new JSONObject.
        }
    }
}

protected boolean isNetworkConnected(){

    // Instantiate mConnectivityManager if necessary
    if(mConnectivityManager == null){
        mConnectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    }
    // Is device connected to the Internet?
    NetworkInfo networkInfo = mConnectivityManager.getActiveNetworkInfo();
    if(networkInfo != null && networkInfo.isConnected()){
        return true;
    } else {
        return false;
    }
} 
```

我省略了对话方法的代码，因为它们不相关。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-09T19:40:04.033

要直接在 HTTP 级别访问 Google Books API 或任何其他 REST API，如果您愿意编写异步代码，可以使用[Volley ，或者](https://developer.android.com/training/volley/index.html)[使用 OkHttp](http://square.github.io/okhttp/)来实现更简单的同步请求。还有[Android Asynchronous Http Client](http://loopj.com/android-async-http/)。

但更好的是，您可以使用[Feign](https://github.com/OpenFeign/feign)或[Retrofit](http://square.github.io/retrofit/)来抽象出 HTTP 级别的实现细节，并在自动生成的实现之上提供流畅的类型安全 API。Retrofit 是[Android 中使用最多的网络库](https://www.appbrain.com/stats/libraries/tag/network/android-network-libraries)，但 Feign 在更广泛的 Java 生态系统中使用得更多。

这是一个使用 Feign for Google Books API 的示例，Retrofit 非常相似。

**API 接口**，实现由 Feign 自动生成：

```
public interface GoogleBooksApi {

    @RequestLine("GET /books/v1/volumes")
    Results findBookByISBN(@QueryMap Map<String, Object> queryParameters);

} 
```

**API客户端代码**：

```
public class BookLookupService {

    public Book fetchBookByISBN(String isbn) throws BookLookupException {
        final GoogleBooksApi googleBooksApi = connect();
        final Map<String, Object> queryParameters = new HashMap<>();
        queryParameters.put("q", "isbn:" + isbn);
        final Results apiResponse = googleBooksApi.findBookByISBN(queryParameters);
        if (apiResponse == null || apiResponse.getTotalItems() < 1) {
            throw new BookLookupException("No books found for ISBN " + isbn);
        }
        final List<Result> results = apiResponse.getItems();
        if (results == null || results.size() < 1) {
            throw new BookLookupException("Invalid items list for ISBN " + isbn);
        }
        final Book book = results.get(0).getBook();
        return book;
    }

    private static GoogleBooksApi connect() {
        return Feign.builder()
            .decoder(new GsonDecoder())
            .logger(new Logger.ErrorLogger())
            .logLevel(Logger.Level.BASIC)
            .target(GoogleBooksApi.class, "https://www.googleapis.com");
    }
} 
```

**为 API 响应结构建模的实体**：

```
public class Results {
    int totalItems;
    List<Result> items;

    public int getTotalItems() {
        return totalItems;
    }

    public List<Result> getItems() {
        return items;
    }
}

public class Result {
    // the JSON field is named volumeInfo
    Book volumeInfo;

    public Book getBook() {
        return volumeInfo;
    }
}

public class Book {
    private String title;
    private List<String> authors;

    public String getTitle() {
        return title;
    }

    public List<String> getAuthors() {
        return authors;
    }
} 
```

最后同样重要的是，**测试**：

```
@RunWith(AndroidJUnit4.class)
public class BookLookupServiceAndroidTest {
    private BookLookupService bookLookupService = new BookLookupService();

    @Test
    public void whenMultipleLookupResultsThenReturnsFirst() throws Exception {
        assertThat(bookLookupService.fetchBookByISBN("9780321356680").getTitle(),
                   is(equalTo("Effective Java, 2nd Edition")));
    }
} 
```

请注意，您需要将代码包装起来`AsyncTask`以使其异步，因为主线程上不允许网络请求。`AsyncTask`应该在`onPostExecute()`.

这是一个例子：

```
public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        final Button fetchBookButton = (Button) findViewById(R.id.FetchBookButton);
        fetchBookButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) { new FetchBookTask().execute(getISBN()); }
        });
    }

    private String getISBN() {
        final EditText isbnField = (EditText) findViewById(R.id.BookIsbnField);
        return isbnField.getText().toString();
    }

    private void showMessage(String message) {
        Toast.makeText(getApplicationContext(), message, Toast.LENGTH_LONG).show();
    }

    class FetchBookTask extends AsyncTask<String, Void, Book> {

        @Override
        protected Book doInBackground(String... params) {
            final String isbn = params[0];
            try {
                return new BookLookupService().fetchBookByISBN(isbn);
            } catch (Exception e) {
                Log.e("fetchBookByISBN", e.toString());
                return null;
            }
        }

        @Override
        protected void onPostExecute(Book book) {
            if (book != null) {
                showMessage("Got book: " + book.getTitle());
            } else {
                showMessage("Failed to fetch book");
            }
        }
    }
} 
```

# php - 使用 0 或 NULL 作为存储日期的 MySQL INT 字段的默认值会更好吗？

> ID：14571482
> 
> 赞同：3
> 
> 时间：2013-01-28T21:22:57.557
> 
> 标签：php, mysql, null, int, default

我必须在 MySQL 的日期/时间记录中使用 INT，所以我试图弄清楚使用 0 还是 NULL 作为这些字段的默认值是否更好。我们正在迁移，数据以 0000-00-00 00:00:00、Unix 时间戳、0、NULL、false 等形式传入，所以我正在通过 PHP strtotime() 和 date() 转换所有内容功能，但在插入时得到奇怪的结果。

最终我可以得到一些在 PHP 中可用的东西，但我不确定在 MySQL 中作为默认值是否更好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T21:26:04.390

`0`是一个值。`NULL`是缺乏价值。

使用`NULL`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T18:02:01.450

我发现使用 NULL 可以防止将日期或整数选择为“小于这个”，因为 MySQL 在这种情况下不会比较整数和空值。当我将它们设置为默认值 0 时，它们出现在选择中，这正是我们想要的。我不确定这会在未来引起什么并发症（我们可能需要找到替代解决方案），但现在它为我们提供了我们想要的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T21:28:20.567

如果你想表达一个值的缺失，你应该使用`Null`. 纪元时间中的 0 等于 1970 年 1 月 1 日午夜。因此，根据您对情况的描述，我建议使用`Null`.

[http://www.epochconverter.com/](http://www.epochconverter.com/)

# c# - 从 Active Directory 访问 Bitlocker 恢复信息

> ID：14571483
> 
> 赞同：1
> 
> 时间：2013-01-28T21:22:58.190
> 
> 标签：c#, active-directory

所以我正在尝试使用 C# 从 AD 访问 bitlocker 恢复信息。我检查了这些链接：

*   [如何以编程方式访问 bitlocker 恢复选项卡以备份恢复密码](https://stackoverflow.com/questions/10075310/how-to-access-bitlocker-recovery-tab-programmatically-to-backup-recovery-passwor)

*   [http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/70803ee5-bb6b-4b27-a23a-51b4a77805fb/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/70803ee5-bb6b-4b27-a23a-51b4a77805fb/)

他们都建议（最终）这样的实现：

```
 public String GetBitlockerKey(string compName)
    {
        string bitlockerPassword = string.Empty;
        DirectoryEntry deEntry = new DirectoryEntry(_path);
        DirectorySearcher searcher = new DirectorySearcher(_path);
        searcher.SearchScope = SearchScope.Subtree;
        searcher.ReferralChasing = ReferralChasingOption.All;

        try
        {
            searcher.Filter = String.Format("(&(objectCategory=Computer)(cn={0}))", compName);
            SearchResult result = searcher.FindOne();
            object recoveryInformation = result.GetDirectoryEntry().Properties["msFVE-RecoveryInformation"].Value;

            if (recoveryInformation != null)
            {
              // Do stuff with recovery information...
            }
            else
            {
                bitlockerPassword = "Failed to find the computer object.";
            }
        }
        catch (Exception e)
        {
            // handle execptions
            return e.Message;
        }
        return bitlockerPassword;
    } 
```

...但是该属性不存在-“msFVE-RecoveryInformation”属性。我想错了吗？我认为这不是权限问题，因为我可以通过 AD 访问 bitlocker 密钥。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-02-22T18:25:04.840

我刚刚完成了自己的 C# 脚本，用于检索 Bitlocker 恢复 ID 和密钥。我想我明白你缺少什么了。

我的步骤：

1）连接并在 Active Directory 中找到主机名（在您的情况下为 compName）

2) 获取 FindOne() 结果并使用 SearchRoot 集作为 result.path 进行另一个 Active Directory 搜索。

```
var Result = directorySearcher.FindOne();

    var Rpath = Result.Path;
    var BTsearch = new DirectorySearcher(Rpath)
    {
        SearchRoot = Result.GetDirectoryEntry(), //without this line we get every entry in AD.
        Filter = "(&(objectClass=msFVE-RecoveryInformation))"
    }; 
```

3）从那里您可以指定您正在寻找的恢复信息并拉出其他属性。

我的完整脚本供参考：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.DirectoryServices;
using System.DirectoryServices.AccountManagement;

public class AD
{
    public AD()
    {
        ActiveDirectory = new DirectoryEntry("LDAP://" + 
    Environment.UserDomainName);
    }

public DirectoryEntry ActiveDirectory { get; private set; }

public ADbitLock GetBitLocker(string hostname)
    {
        var output = new StringBuilder();

        DirectorySearcher directorySearcher = new DirectorySearcher(ActiveDirectory);
        directorySearcher.Filter = "(&(ObjectCategory=computer)(cn=" + hostname + "))";

        var Result = directorySearcher.FindOne();

        var Rpath = Result.Path;
        var BTsearch = new DirectorySearcher(Rpath)
        {
            SearchRoot = Result.GetDirectoryEntry(), //without this line we get every entry in AD.
            Filter = "(&(objectClass=msFVE-RecoveryInformation))"
        };

        BTsearch.PropertiesToLoad.Add("msfve-recoveryguid");
        BTsearch.PropertiesToLoad.Add("msfve-recoverypassword");

        var GetAll = BTsearch.FindAll();

        var BT = new ADbitLock(hostname);

        foreach (SearchResult item in GetAll)
        {
            if (item.Properties.Contains("msfve-recoveryguid") && item.Properties.Contains("msfve-recoverypassword"))
            {
                var pid = (byte[])item.Properties["msfve-recoveryguid"][0];
                var rky = item.Properties["msfve-recoverypassword"][0].ToString();

                    BT.AddKey(pid, rky);
                var lnth = BT.RecoveryKey.Count - 1;

                System.Diagnostics.Debug.WriteLine("Added... " + BT.PasswordID[lnth] + " for: " + BT.RecoveryKey[lnth]);
            }
        }

        return BT;

    }
}

public class ADbitLock
{
    public ADbitLock(string HostName)
    {
        SystemName = HostName;
        PasswordID = new List<string>();
        RecoveryKey = new List<string>();
    }

    public void AddKey(byte[] ID, string Key)
    {
        PasswordID.Add(ConvertID(ID));
        RecoveryKey.Add(Key);
    }

    private string ConvertID(byte[] id)
    {
        return
          id[3].ToString("X02") + id[2].ToString("X02")
        + id[1].ToString("X02") + id[0].ToString("X02") + "-"
        + id[5].ToString("X02") + id[4].ToString("X02") + "-"
        + id[7].ToString("X02") + id[6].ToString("X02") + "-"
        + id[8].ToString("X02") + id[9].ToString("X02") + "-"
        + id[10].ToString("X02") + id[11].ToString("X02")
        + id[12].ToString("X02") + id[13].ToString("X02")
        + id[14].ToString("X02") + id[15].ToString("X02")
            ;
    }

    public string SystemName { get; private set; }
    public List<string> PasswordID { get; private set; }
    public List<string> RecoveryKey { get; private set; }
} 
```

编辑：正如 Barry 在下面评论的那样，如果您无权访问 bit-locker 恢复密钥，则 findAll 搜索返回 0 计数。

# jquery - 如何使用 jquery 仅显示电子邮件地址的一部分？

> ID：14571488
> 
> 赞同：0
> 
> 时间：2013-01-28T21:23:21.707
> 
> 标签：jquery, email

我要求只显示电子邮件地址的第一部分。例如，我有 myemail@mydomain.com，我只想在我的网页上显示“myemail”。我没有使用正则表达式的经验。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:25:46.013

您可以在 @ 上拆分字符串

```
email.split("@")[0] 
```

嗯，也许您也需要知道如何获取电子邮件：

```
mails = $('a[href^="mailto"]');
mails.each(function() {
    $(this).text(this.text.split('@')[0] + "@...")
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:42:22.260

您可以使用 Javascript 执行此操作：

```
var email = "myemail@mydomain.com";
alert(email.substr(0, email.indexOf("@"))); 
```

# c# - WP8 中的 Dockpanel 行为

> ID：14571489
> 
> 赞同：2
> 
> 时间：2013-01-28T21:23:25.110
> 
> 标签：c#, wpf, windows-phone-8

我正在编写一个 Windows Phone 8 应用程序，但我遇到了一些 UI 问题。我想要一个可以拉伸到整个屏幕宽度的控件，并将其子控件水平流动（以填充空间）。

目前，我有一个方向 = 水平的 StackPanel，但它不允许子控件（滑块）有一个 Horizo​​ntalAlignment=Stretch（实际上是拉伸）。我可以手动拉伸滑块，但我不想硬编码大小..

这是代码：

```
<StackPanel Orientation="Horizontal">
    <TextBlock Text="Hue Bins"  />
    <Slider x:Name="HueBins" VerticalAlignment="Bottom" HorizontalAlignment="Stretch"  Value="24" Maximum="36" Minimum="1"/>
</StackPanel> 
```

和结果图像：

![在此处输入图像描述](../Images/7628a8783acadcf9e97ec8cdf93303b1.png)

在普通的 WPF 中，有 Dockpanel 控件，但对于 WP8 似乎不存在。反正有模仿这种行为吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T21:34:30.517

您可以使用`Grid`两列：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <TextBlock Text="Hue Bins"  />
    <Slider x:Name="HueBins" Grid.Column="1" VerticalAlignment="Bottom" HorizontalAlignment="Stretch" Value="24" Maximum="36" Minimum="1"/>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-17T15:44:10.853

您可以在此处尝试从 Silverlight Toolkit 中提取的版本，以及他们为 WP7 [http://www.geekchamp.com/articles/using-dockpanel-in-wp7所做的一些调整](http://www.geekchamp.com/articles/using-dockpanel-in-wp7)

或使用整个 Silverlight 工具包，如果你需要更多的东西 [http://silverlight.codeplex.com/](http://silverlight.codeplex.com/) （因为从它派生的 Windows Phone 工具包似乎不包含 DockPanel）

有关编译 DockPanel 所需内容的一些信息（但下载链接已损坏）位于[http://matthiasshapiro.com/2010/06/28/using-wrappanel-and-dockpanel-in-windows-phone-7-with-blend /](http://matthiasshapiro.com/2010/06/28/using-wrappanel-and-dockpanel-in-windows-phone-7-with-blend/)

更新：我使用上面提到的信息来设置[http://DockPanel.codeplex.com](http://DockPanel.codeplex.com)。它工作正常，除了所有顶部/左侧/右侧/底部/中间项目都在布局中添加在一起的情况，至少在 Windows Phone 上它在这种情况下做了一些错误的布局

# php - Javascript 只产生 json 编码数组的最后一个值

> ID：14571491
> 
> 赞同：0
> 
> 时间：2013-01-28T21:23:30.757
> 
> 标签：php, javascript, json, pdo

这是 PHP/PDO。

```
 try {

    $query = 'SELECT Date,Close FROM DY_AAPL LIMIT 5';

    $sth = $db->prepare($query);
    $sth->execute();

    while ($row = $sth->fetch(PDO::FETCH_ASSOC)){

        $result_array=array();
        $result_array[]=$row['Close'];

    /*    $num = $row['Close'];    */

        echo json_encode($result_array);

    }

    }catch (PDOException $e){

        echo 'ERROR ' . $e->getMessage();
    } 
```

当我尝试使用 javascript 访问数组时，它只输出数组中的最后一个值。任何指针？

```
 <script type="text/javascript">

       var myjson = JSON.parse('<?php echo json_encode($result_array); ?>');

        document.write(myjson); 

    </script> 
```

我认为这可能与“JSON.parse”有关，但我不确定。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:29:46.897

尝试

```
$result_array = array();

while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {

    $result_array[]=$row['Close'];

   /*    $num = $row['Close'];    */

}

echo json_encode($result_array); 
```

…而不是在每个循环轮次中初始化和输出数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:27:21.380

这是因为您在 while 循环中进行 json 编码。将它放在循环之外，以便对整个数组进行编码。

此外，您正在 while 循环中初始化数组。这意味着它每次循环都会覆盖自己。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:28:14.513

您应该回显您的最终结果，而不是每次迭代：

```
 while ($row = $sth->fetch(PDO::FETCH_ASSOC)){

        $result_array=array();
        $result_array[]=$row['Close'];

    }
 echo json_encode($result_array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T21:30:54.577

为你的 PHP 试试这个：

```
 try {
        $query = 'SELECT Date,Close FROM DY_AAPL LIMIT 5';
        $sth = $db->prepare($query);
        $sth->execute();

        $result_array=array();
        while ($row = $sth->fetch(PDO::FETCH_ASSOC)){
            $result_array[]=$row['Close'];
        }
        echo json_encode($result_array);

    }catch (PDOException $e){

        echo 'ERROR ' . $e->getMessage();
    } 
```

# python - Eclipse+Pydev 缓慢的“变量”窗口

> ID：14571495
> 
> 赞同：4
> 
> 时间：2013-01-28T21:23:53.733
> 
> 标签：python, eclipse, debugging, pydev

我将 eclipse+pydev 用于我的 python 开发，我喜欢它，因为它很容易与 Git 等集成。
然而，最近，当我调试我以前没有的 python 代码时，我开始遇到这个非常奇怪的问题：

应该显示当前堆栈的“变量”窗口是空的（如屏幕截图所示）。如果我将鼠标悬停在代码窗口中的变量上，“变量”窗口将正确填充堆栈。
或者，如果我切换窗口然后将“变量”窗口重新聚焦，它会正确填充堆栈。

此外，令人沮丧的是，在每次步进或步进（或实际上任何步进操作）之后，此窗口再次变为空白，我必须使用上述方法之一将其恢复。

我怎么解决这个问题？我可以做些什么来确保“变量”窗口的行为？

技术规格：

*   蚀`Version: Juno Service Release 1`
*   PyDev`2.7.1.2012100913`
*   Python`2.7.3`
*   操作系统`Mac OS X 10.7.5`

![在此处输入图像描述](../Images/58737fe8104a63c839637b94e46700c2.png)

# php - 在 PHP 中过滤下拉框

> ID：14571501
> 
> 赞同：0
> 
> 时间：2013-01-28T21:24:03.960
> 
> 标签：php

我正在尝试从第一个投递箱中过滤出第二个投递箱。第一个`$box1`工作正常。但是我无法`$box2`建立第一个。如果我改变

```
SELECT Site FROM companiesandsitessql WHERE Company ='$box1'"); 
```

到

```
SELECT Site FROM companiesandsitessql WHERE Company =”CompanyA); 
```

然后它将 CompanyA 的所有站点拉到第二个框中。我已经尝试了很多变体，`$box1`但我一定错过了一些东西。任何想法表示赞赏。

```
<?php
$dbhost  = 'localhost';
$dbname  = 'escalations';
$dbuser  = 'root';

$con = mysql_connect($dbhost, $dbuser);
 {
    $box1 = array();
    mysql_select_db('escalations');
    $result = mysql_query("SELECT distinct Company FROM companiesandsitessql");
    while($row = mysql_fetch_array($result)) { $box1[] = $row; }

}
/* Generate select box contents */
$out1 = '<select name="box1">';
$out1 .= '<option>Select Company</option>';
if (!empty($box1)) {
foreach ($box1 as $k => $v) {
    $out1 .= '<option value="'.$v['Company'].'">'.$v['Company'].'</option>';
    }
}
$out1 .= '</select>';
/* Output */
echo $out1;

 {
$box2 = array();
    mysql_select_db('escalations');
    $result2 = mysql_query("SELECT Site FROM companiesandsitessql WHERE Company        ='$box1'");
    while($row2 = mysql_fetch_assoc($result2)) { $box2[] = $row2; }

}
/* Generate select box contents */
$out2 = '<select name="box2">';
$out2 .= '<option>Site list</option>';
if (!empty($box2)) {
    foreach ($box2 as $k1 => $v) {
        $out2 .= '<option value="'.$v['Site'].'">'.$v['Site'].'</option>';
    }
}
$out2 .= '</select>';
/* Output */
echo $out2;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:33:26.330

```
Figured it out, here’s the code.

***File new.php***

<?php
$dbhost  = 'localhost';
$dbname  = 'escalations';
$dbuser  = 'root';

$con = mysql_connect($dbhost, $dbuser);
?>
<html>

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">

function autoSubmit() {
$.post('dropoutput.php', { name: box1form.CompanyName.value},
 function (output) {
    $('#info').html(output).show();
    });
    }
</script>

<body>
<form name="box1form" action="insert.php" method="post">
<?php

{
 $box1 = array();
 mysql_select_db('escalations');
 $result = mysql_query("SELECT distinct Company FROM companiesandsitessql ORDER BY Company ASC");
 while($row = mysql_fetch_array($result)) { $box1[] = $row; }

 }
/* Generate select box contents */
$CompanyName = '<select name="CompanyName" onchange="autoSubmit()">';
$CompanyName .= '<option selected="selected">Select Company</option>';
if (!empty($box1)) {
 foreach ($box1 as $k => $v) {
    $CompanyName .= '<option value="'.$v['Company'].'">'.$v['Company'].'</option>';
  }
 }
$CompanyName .= '</select>';
/* Output */
echo $CompanyName;

?>

<div id="info"></div><input name="send" type="submit" value="submit"><br>
</form>
</body>
</html>

***file dropoutput.php***

<?php
mysql_connect("localhost", "root", "") or die (mysql_error ());

$name = mysql_real_escape_string($_POST['name']);

{
$box2 = array();
 mysql_select_db('escalations');
$result2 = mysql_query("SELECT Site FROM companiesandsitessql WHERE Company ='$name' ORDER BY Site ASC");
while($row2 = mysql_fetch_assoc($result2)) { $box2[] = $row2; }

}
 /* Generate select box contents */
 $S = '<select name="SiteOptions[]" multiple="multiple">';
 $S .= '<option>Site list</option>';
 if (!empty($box2)) {
  foreach ($box2 as $k1 => $v) {
    $S .= '<option value="'.$v['Site'].'">'.$v['Site'].'</option>';
  }
 }
$S .= '</select>';
/* Output */
echo $S;

?>

 ***file  insert.php...

<?php
$dbhost  = 'localhost';
$dbname  = 'escalations';
$dbuser  = 'root';
$dbpass  = '';

$con = mysql_connect($dbhost, $dbuser);

if($con == FALSE)
{
echo 'Cannot connect to database' . mysql_error();
}
else
{
 echo " Connected to database: ";
}

$Site = implode(', ', $_POST['SiteOptions']);

mysql_select_db("escalations", $con);
$sql="INSERT INTO escalationtrackersql (CompanyName, Site)
VALUES
('$_POST[CompanyName]', '$Site')";

echo "Added $_POST[CompanyName] ";
print $Site;

if (!mysql_query($sql, $con))
{
die('Error: ' . mysql_error());
}

echo "  : Escalation request successfully entered.";

mysql_close($con)

?>

<html>
<head>
<meta content="en-us" http-equiv="Content-Language">
</head>
<body bgcolor="#C0C0C0">
<p>&nbsp;</p>
<p><a href="new.php">Return to the 
  escalation request form</a>.</p>

  </html> 
```

# ruby - 了解参数在 Ruby 中的工作原理

> ID：14571504
> 
> 赞同：0
> 
> 时间：2013-01-28T21:24:07.663
> 
> 标签：ruby

这是来自 RSpec 代码的示例代码：

```
describe Thing do
  def create_thing(options)
    thing = Thing.new
    thing.set_status(options[:status])
    thing
  end

  it "should do something when ok" do
    thing = create_thing(:status => 'ok')
    thing.do_fancy_stuff(1, true, :move => 'left', :obstacles => nil)
    ...
  end
end 
```

所以我的困惑主要在这一行：

```
thing.set_status(options[:status]) 
```

所以 create_thing 方法有一个“选项”参数，然后我们传递该参数的状态部分？有人可以用一些更简单的词来解释这种语法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:27:55.970

`options`只是一个变量。你需要了解的就是这部分

```
thing = create_thing(:status => 'ok') 
```

您基本上是将 a 传递`Hash`给 create_thing ，因此`options`是一个哈希。然后您可以`status`通过执行访问键的值`options[:status]`。

如果上面提到的行看起来像这样

```
thing = create_thing("Foo") 
```

`options`将是“Foo”，您可能会在尝试执行类似的操作时遇到错误`options[:status]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T21:27:27.887

`create_thing`接受一个名为`options`.

选项应该是一个散列（很可能）。

您将带有键（符号）的哈希值传递`:option`给该`set_status`方法。

您已将隐式哈希*传递*给`create_thing`：

`create_thing({ status: 'ok' })`是一样的
`create_thing(status: 'ok')`是一样的
`create_thing(:status => 'ok')`

无论你怎么称呼它，你都*可以*通过`options[:status]`.

# java - 用非可移植语言（即 C/C++）编写的程序的可移植性

> ID：14571505
> 
> 赞同：0
> 
> 时间：2013-01-28T21:24:10.993
> 
> 标签：java, c, installation, portability

许多流行的程序，例如 Microsoft Office，怎么可能是用 C、C++ 和汇编等语言编写的，而同一个安装程序却可以在任何具有适当操作系统的计算机上运行？是因为安装程序实际上是在计算机上编译源代码吗？是因为 AMD 和 Intel 共享基本相同的指令集吗？

我听说 C 是可移植的，但在什么意义上 Java 比 C 更便携？那么虚拟机的意义何在？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T21:27:08.697

1.  C 或 C++ 没有什么天生不可移植的。只有在调用操作系统或编译器特定的函数时才会出现可移植性问题。在汇编语言编程的情况下，缺乏可移植性通常是由于指令集问题。如果适当地限制目标机器集，那么这些可移植性问题可能会或无关紧要。
2.  “适当的操作系统”暗示可移植性（在最严格的意义上）不是问题，因为存在定义明确的执行环境。也就是说，提供的二进制文件只能在运行 Windows 的 Intel ISA 机器上运行。
3.  安装程序几乎可以肯定*不会*为计算机编译源代码。
4.  是的，由于共享指令集（在这种情况下是操作系统），程序应该在两者上运行得一样好。如果您尝试在具有不同架构（例如 ARM）或不同操作系统（可能是 Linux）的计算机上运行该二进制文件，那么您将不走运。
5.  Java 提供了一堆 API 和一个虚拟机，可以（有时）允许代码编译一次，然后部署在多个架构和操作系统上。因为它们通过 Java API 抽象了系统接口，所以当您想在不同的系统上部署时，您不必担心移植所有代码。C 仅提供一些标准库，但没有指定特定的机器架构。
6.  虚拟机的重点正是这种抽象——而不是编写一个程序来编译为在主机处理器的指令集中本地运行的代码，而是编写一个编译为在虚拟机中运行的代码的程序。VM 的实现者负责从 VM 指令到本地主机指令的必要转换以及结果的*转换*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:55:18.143

原则上，C 是一种非常便携的语言。实际上只有两个可移植性问题的来源：

1.  无效程序，其行为未定义或深入到“实现定义”领域，其方式在实现之间实际上有所不同，但*恰好适用于*它们所编写的任何操作系统/编译器/月相组合。

2.  事实上，C 有一个*非常轻量级*的标准库，因此几乎任何有用的程序都依赖于进一步的接口（未在语言标准中定义）来与用户、操作系统和外部世界进行通信。

顺便说一句：就第二点而言，我们正处于超越这一点的边缘，除了 Windows 采用 POSIX 之外的**每个**相关的现实世界系统（该标准基本上扩展了 C 并为您提供了大部分缺少的东西在上面的第 2 点）。但随后出现了 Android 和 iOS，再次将事物碎片化......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:26:29.270

如果您阅读任何有关 C 的历史以及其设计方式和原因的书籍，您会发现 C 旨在允许同一程序在不同的操作系统和硬件上运行

# java - 不显示对话框

> ID：14571511
> 
> 赞同：1
> 
> 时间：2013-01-28T21:24:54.920
> 
> 标签：java, awt, frame

```
import    java.awt.*;
import    java.awt.event.*;
import    java.lang.*;

public  class Party {
    public static void main(String[] args){
        System.out.printf("Start\n");
        Frame  f = new Frame();
        Label  l = new Label("Party over here!");
        Button b = new Button("You bet") ;
        Button C = new Button("Shoot me");
        Panel  p = new Panel();
        p.add(l);
        System.out.printf("End\n");
    }  
} 
```

为什么我没有得到对话框？示例中缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:31:45.823

```
public static void main(String[] args){
    System.out.printf("Start\n");
    Frame  f = new Frame();
    Label  l = new Label("Party over here!");
    Button b = new Button("You bet") ;
    Button C = new Button("Shoot me");
    Panel  p = new Panel();
    p.add(l);
    f.add(p);
    f.add(b);
    f.add(c);
    f.setVisible(true);//<-- make it visible...
    System.out.println("End");
} 
```

我认为您需要阅读有关 java GUI 的更多基础知识，祝您好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:33:10.520

在那个例子中，这本书在后面的`new Panel()`一行评论：

`//more code here...`

这意味着代码不一定是功能性的。

通过添加一行`f.setVisible(true);`，您应该会看到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:28:38.553

添加到您的代码中：

```
f.setVisible(true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T21:29:50.363

好吧，您似乎已经制作了一个框架，一个标签和一个按钮，并在面板上放了一些东西。但是你展示了框架吗？

利用`f.setVisible(true);`

如果你想使用框架，我建议你使用 JFrame。

但是您指定要显示一个对话框，这就是您这样做的方式：

`JOptionPane.showMessageDialog(frame, "Eggs are not supposed to be green.");`

在此处查看有关对话框的更多信息：

[http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#overview](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#overview)

# windows-phone-7 - 如何使 WP7 Pivot TitleTemplate 中的图像不可见？

> ID：14571516
> 
> 赞同：0
> 
> 时间：2013-01-28T21:25:17.067
> 
> 标签：windows-phone-7, pivot, visibility, itemtemplate

我正在开发一个 WP7 应用程序，当用户旋转到横向时，我想在应用程序的标题中隐藏一个图像，以便用户可以看到更多信息。

目前，我在 Pivot 控件的 TitleTemplate 中有图像。使用 Blend，我在横向模式下添加了一个名为“Land”的 VisualState，并且我隐藏了图像。这在 Blend 中看起来不错。当我通过 Visual Studio 运行它时，图像永远不会消失！

我的 XAML 和相关的 c# 如下。使用我找到的示例，我根据 Orientation 值的前 4 个字符派生要使用的 VisualState 的名称。

```
 <controls:Pivot.TitleTemplate>
            <DataTemplate>
                <Image x:Name="headerImage" Visibility="Visible"  Source="{StaticResource headerLogo}"  Height="55" HorizontalAlignment="Left" >
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="VisualStateGroup">
                            <VisualState x:Name="Land">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="headerImage">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Visibility>Collapsed</Visibility>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Port"/>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                </Image>   
            </DataTemplate>
        </controls:Pivot.TitleTemplate> 
```

以及相关的 C# - 我已经在调试器中介入（所以它受到了打击）

```
 private void PhoneApplicationPage_OrientationChanged(object sender, OrientationChangedEventArgs e)
    {
        VisualStateManager.GoToState(this, e.Orientation.ToString().Substring(0,4), false);            
    } 
```

任何人都可以看到任何咆哮者吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:38:17.450

```
private void PhoneApplicationPage_OrientationChanged( object sender,  
  OrientationChangedEventArgs e) 
{ 
  PageOrientation orientation = e.Orientation; 

    if ((orientation & PageOrientation.Landscape) == PageOrientation.Landscape) 
    { 
        headerImage.Visibility = Visibility.Collapsed;

        //Set height of grid to auto
     } 
     else if ((orientation & PageOrientation.Portrait)== PageOrientation.Portrait) 
     { 
        headerImage.Visibility = Visibility.Visible;
     } 
} 
```

[本](http://www.developerfusion.com/article/140836/handling-page-orientation-in-windows-phone-7/)教程也可能有助于您理解。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:46:33.850

我一直按照[本教程](http://dotneteers.net/blogs/vbandi/archive/2011/03/08/handling-wp7-orientation-changes-via-visual-states.aspx)来处理它，因此您可以在 Blend 中进行所有布局，而无需在 OrientationChanged 本身中编写任何代码。

# task - 计划任务：需要在命令之间插入 10 秒的停顿

> ID：14571520
> 
> 赞同：2
> 
> 时间：2013-01-28T21:25:45.747
> 
> 标签：task

我正在创建一个计划任务以在不同的服务器上重新启动相同的三个服务。我需要命令在每次停止/开始之间添加 10 秒的暂停。

前任：

sc \Server1 停止“服务 1”

-- 10 秒暂停

sc \Server1 启动“Service1”

-- 10 秒暂停

sc \Server1 停止“服务 2”

-- 10 秒暂停

sc \Server1 启动“服务 2”

-- 10 秒暂停

sc \Server2 停止“服务 1”

-- 10 秒暂停

sc \Server2 启动“Service1”

-- 10 秒暂停

sc \Server2 停止“服务 2”

-- 10 秒暂停

sc \Server2 启动“Service2”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:27:56.793

您正在寻找`sleep 10`.

# php - PHP ssh2_exec 流挂起

> ID：14571523
> 
> 赞同：0
> 
> 时间：2013-01-28T21:25:50.793
> 
> 标签：php, ssh, libssh2

我一直在尝试`ssh2_exec`运行并从远程主机返回响应，但无法找出正确的方法来执行此操作。我根据其他人的推荐一起使用了这个函数，但是这个函数一旦到达`stream_get_contents($errorStream);`.

我正在运行的命令`ls -l`应该很快执行。

```
public function exec($command) 
{
    $stream = ssh2_exec($this->ssh, $command);

    if (! $stream) {
        throw new exception('Could not open shell exec stream');
    }
    $errorStream = ssh2_fetch_stream($stream, SSH2_STREAM_STDERR);

    stream_set_blocking($errorStream, true);
    stream_set_blocking($stream, true);

    $err      = stream_get_contents($errorStream);
    $response = stream_get_contents($stream);

    @fclose($errorStream);
    @fclose($stream);

    if ($err) {
        throw new exception($err);
    }

    return $response;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-26T06:58:36.177

我发现如果命令的输出大小达到 64KB（正是我的 Linux 开发盒上的那个数字），函数 ssh2_exec() 将挂起。

一种避免的方法是使用：stream_set_timeout()

```
$stream = ssh2_exec($this->ssh, $command);

if (! $stream) {
    throw new exception('Could not open shell exec stream');
}

stream_set_timeout($stream, 10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:38:05.820

老实说，我会使用[phpseclib，一个纯 PHP SSH 实现](http://phpseclib.sourceforge.net/)。例如。

```
<?php
include('Net/SSH2.php');

$ssh = new Net_SSH2('www.domain.tld');
if (!$ssh->login('username', 'password')) {
    exit('Login Failed');
}

echo $ssh->exec('ls -l'); 
```

# jquery - 使用同位素定义的排序顺序

> ID：14571525
> 
> 赞同：1
> 
> 时间：2013-01-28T21:25:56.990
> 
> 标签：jquery, jquery-isotope

我正在使用同位素对与不同产品的功能相关的多个图块进行排序和过滤。某些图块对于每个产品都是独一无二的，而其他图块是共享的。当您在产品之间切换时，它会过滤磁贴以仅显示标记有适当类名的磁贴，但是，我想控制这些磁贴的顺序，因为每个产品的功能具有不同的优先级。如果我不实施任何控制顺序的方式，它们会按照它们在标记中的顺序出现，这意味着第一个产品的功能将成为标记中后续产品的第一个图块。

我试图找出最有效的方法来做到这一点。现在我已经添加了这样的属性：

**瓷砖**

```
<div id="feature1" class="isotope-item productA productB" productAOrder="1" productBOrder="2">
Feature 1
</div>

<div id="feature2" class="isotope-item productA productB" productAOrder="2" productBOrder="1">
Feature 2
</div> 
```

**jQuery/同位素代码**

```
$container.isotope({
    getSortData: {
        productA: function ($elem) {
            return parseInt($elem.hasClass('productA').attr('productAOrder').text(), 10);
        },
        productB: function ($elem) {
            return parseInt($elem.hasClass('productB').attr('ProductBOrder').text(), 10);
        }
    }
});

$container.isotope({ filter: '.productA'});
$container.isotope({ sortBy: 'productA', sortAscending : true}); 
```

无论出于何种原因，我都无法让瓷砖遵循我定义的顺序。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T09:50:45.320

jQuery 的 hasClass() 返回一个布尔值所以

```
$elem.hasClass('productB').attr('ProductBOrder').text() 
```

引发错误。

替换应该`hasClass('productB')`具有`filter('.productB')`您正在寻找的效果，假设调用在那里，如果它不存在，它将返回 0。

# sas - SAS 上的矩阵运算

> ID：14571530
> 
> 赞同：0
> 
> 时间：2013-01-28T21:26:25.187
> 
> 标签：sas

我有一个单行/多列矩阵，乘以一个方阵。SAS 给了我一个单行结果。到目前为止，从我记得的大学数学和问别人的情况来看，好吧。

但是 SAS 的这一行是这样的：

fieldA = matrix1`*matrix2[,1:fieldB]

虽然我理解“fieldA = matrix1`*matrix2”，但我不知道 [,1:fieldB] 是做什么的，而且我似乎找不到任何解释它的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:48:34.600

`matrix2[,1:fieldB]`是矩阵2的子集。它包括 matrix2 的所有行，以及列表 1:fieldB 中包含的那些列。据推测，fieldB 标识了 matrix1 中的列数（转置时变为行），因此 * 有效 [ `matrix1'`rows 必须等于 matrix2 列才能使操作合法]。

例如，假设 matrix1 是以下矩阵：

```
[1,3,5] 
```

matrix2 是以下矩阵：

```
[1,2,3,4,
 4,5,6,7,
 8,9,10,11,
 13,14,15,16] 
```

现在，

```
matrix1`*matrix2 
```

是非法的 - matrix1` 有 3 行（转置），而 matrix2 有 4 列。所以：

```
matrix1`*matrix2[,1:3] 
```

现在将是合法的，通过 matrix2 的前 3 列产生 matrix1` 的矩阵乘积。

# sql - SQL 查询连接性能提升

> ID：14571531
> 
> 赞同：0
> 
> 时间：2013-01-28T21:26:28.073
> 
> 标签：sql, performance, where

我有一个类（反映一个 db 行），它在代码引导程序中创建了 200 多个实例。每个人都有一个`SELECT`查询，唯一的条件是`WHERE 'tblA'.'AID' = #`，但我正在考虑创建一个查询，它将解析由`OR`逻辑连接的 200 个 WHERE 子句，然后从结果中，使用已经找到的数据创建了 200 个对象，所以有只有 1 个查询。

我目前正在测试服务器上实现这个，但我想知道这是否是提高效率的一个坏步骤，什么时候做两组查询会更好，每组处理一半的子句（或者如何还需要制作更多）？

**另外**，我还在其中编写了一个性能增强器来替换类似的东西

```
WHERE `tblA`.`AID` = 2 OR `tblA`.`AID` = 3 OR `tblA`.`AID` = 5 OR `tblA`.`AID` = 6 OR `tblA`.`AID` = 7 
```

和

```
WHERE (`tblA`.`AID` >= 2 AND `tblA`.`AID` <= 3) OR (`tblA`.`AID` >= 5 AND `tblA`.`AID` <= 7) 
```

甚至

```
WHERE `tblA`.`AID` >= 2 AND `tblA`.`AID` <= 7 AND `tblA`.`AID` <> 4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:30:56.010

如果您有离散列表，则只需使用`in`. . .

```
where AID in (2, 3, 5, 6, 7, . . .) 
```

并让 SQL 引擎操心优化。

最大的打击可能是解析查询并将大型查询发送到引擎的时间。如果您的列表真的很长，请考虑将列表放入临时表中，在表上建立索引，然后进行连接。

您没有指定您使用的是什么数据库，但这个建议与数据库无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:37:17.850

您还没有指定 DBMS。

对于 SQL Server，这可能是值得的（尽管您可能很想考虑加入表值参数或类似参数，而不是拥有一个冗长的`IN`列表）。

SQL Server 将进行单独的单独搜索，而不是将它们折叠成连续的范围。这在文章[什么时候是寻找不是寻找？](http://sqlblog.com/blogs/paul_white/archive/2011/02/16/when-is-a-seek-not-a-seek.aspx)但下面有一些例子。

```
CREATE TABLE T (X int PRIMARY KEY)

INSERT INTO T 
SELECT TOP 1000000 ROW_NUMBER() OVER (ORDER BY @@SPID)
FROM master..spt_values v1, master..spt_values v2

SET STATISTICS IO ON;

SELECT *
FROM   T
WHERE   X IN ( 1, 2, 3, 4, 5, 6, 7, 8, 9,10,
              11,12,13,14,15,16,17,18,19,20,
              21,22,23,24,25,26,27,28,29,30,
              31,32,33,34,35,36,37,38,39,40,
              41,42,43,44,45,46,47,48,49,50,
              51,52,53,54,55,56,57,58,59,60,
              61,62,63,64) 
```

> 药片'。扫描计数 64，逻辑读取 192

```
SELECT *
FROM   T
WHERE   X BETWEEN 1 AND 64 
```

> 药片'。扫描计数 1，逻辑读取 3

正如文章评论中提到的，对于大于 64 的值，您将获得一个稍微不同的计划，该计划添加了一个常量表和一个嵌套循环连接。

# c# - Blend for Visual Studio 2012 设计视图不起作用

> ID：14571533
> 
> 赞同：2
> 
> 时间：2013-01-28T21:26:30.827
> 
> 标签：c#, visual-studio-2012, windows-store-apps, design-view, blend-2012

我正在开发 Visual Studio 2012 中的 Windows 应用商店应用程序，并决定开始使用 blend 作为界面和布局可能会更容易。但是在我试图让这个布局设计对自己更容易的过程中，我遇到了设计视图的问题。错误消息是设计视图不适用于 x64 和 ARM 平台。我对 Visual Studio 中的这个错误很熟悉，但我只是想知道是否有一种简单的方法可以更改目标平台，以便我可以在 Blend 中看到设计视图？

到目前为止，我知道 VS 2012 的混合存在问题，但我认为这可能是一个很容易解决的问题，但我在某个地方丢失了。

如果有人知道解决此问题的方法，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T03:10:33.920

1.  Close Blend
2.  Open the project in Visual Studio 2012
3.  Change `Release/Debug Configuration` to `Any CPU` or `x86`
4.  **Save All in Visual Studio** to make sure it saves the project (The Project does not save when you run!)
5.  Reopen the document in Blend

That's it!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T11:29:24.047

将 .NetFramework 从 4.5 更改为 4.0

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T21:42:48.573

只需转到 Build->Configuration Manager 并将 Platform 更改为“Any CPU”。

此外，您可以通过单击调试工具栏项目右侧的小向下箭头来启用工具栏中的“解决方案平台”下拉菜单，然后单击“添加删除按钮”并选择“解决方案平台”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-24T10:31:58.097

您需要安装 windows phone sdk 才能使 blend 在您的应用程序中正常工作。 [http://www.microsoft.com/en-us/download/details.aspx?id=35471](http://www.microsoft.com/en-us/download/details.aspx?id=35471)

# maven - Nexus 索引在部署后丢失工件

> ID：14571536
> 
> 赞同：0
> 
> 时间：2013-01-28T21:26:42.237
> 
> 标签：maven, nexus, maven-indexer

我有一个 nexus repo (v2.1.2)，我在其中部署使用 maven-bundle-plugin 创建的 osgi 包。默认情况下，nexus 索引不包含 bundle 类型的包，所以如果我搜索一个包，我只会得到对 pom 的引用，而不是包（jar）。但是，在[此条目](https://support.sonatype.com/entries/21566122-why-don-t-artifacts-with-custom-packaging-types-show-up-in-search-results)之后，我设法使其正常工作。这是我添加的内容`/usr/local/sonatype-work/nexus/conf/packaging2extension-mapping.properties`

```
bundle=jar 
```

如果更改后我按照文章中的建议进行重建索引，那么现在索引包含捆绑包。但是，我的问题是，当我重新部署其中一个捆绑包的新快照时，它会从索引中消失。恢复它的唯一方法是再次重新创建索引。显然此时整个工作流程无法使用：我无法在每次部署后手动重新创建索引。

这是一个已知的问题？一个错误？配置错误？
任何想法如何解决它？
我正在使用 REST api 进行查询，因此从索引中丢失工件非常糟糕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:48:46.493

这是一个错误
为它打开了一张票 [https://issues.sonatype.org/browse/NEXUS-5525](https://issues.sonatype.org/browse/NEXUS-5525)

# d3.js - 在这张图片上看到的 d3j.s force 有向图集群示例发生了什么？

> ID：14571538
> 
> 赞同：3
> 
> 时间：2013-01-28T21:26:58.210
> 
> 标签：d3.js, force-layout

此图像上的 d3.js 示例曾经发生过什么。

力有向图集群。第二行第三列？

[http://vis.stanford.edu/papers/d3](http://vis.stanford.edu/papers/d3)

![在此处输入图像描述](../Images/0c4b2597b0e9dfb9ba4b15a213c863d3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-31T14:17:39.560

我猜你感兴趣的是围绕节点组的形状。

以下示例实现它：

*   [具有凸包的力多焦点](http://bl.ocks.org/donaldh/2920551)
*   [d3 中的 alpha 形状又名凹壳](http://bl.ocks.org/gka/1552725)

希望这可以帮助，

# algorithm - 使用 SPARQL 查询查找 k 个最近邻

> ID：14571546
> 
> 赞同：2
> 
> 时间：2013-01-28T21:27:09.383
> 
> 标签：algorithm, machine-learning, sparql, nearest-neighbor

我想编写一个 SPARQL 查询来查找一组向量的 k 个最近邻居。要查找单个向量的 100 个最近邻居的平均标签，我可以使用以下查询：

```
PREFIX : <ml://>
PREFIX vector: <ml://vector/>
PREFIX feature: <ml://feature/>

SELECT (AVG(?label) as ?prediction)
WHERE {
  {
    SELECT ?other_vector (COUNT(?common_feature) as ?similarity)
    WHERE { vector:0 :has ?common_feature . 
      ?other_vector :has ?common_feature .
    } GROUP BY ?other_vector ORDER BY DESC(?similarity) LIMIT 100
  }
  ?other_vector :hasLabel ?label .
} 
```

有没有办法在单个查询中对多个向量执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:46:39.057

除非我忽略了某些东西，否则您可以通过用`vector:0`变量替换 URI 来做到这一点，如下所示：

```
SELECT ?vector (AVG(?label) as ?prediction)
WHERE {
  {
    SELECT ?vector ?other_vector (COUNT(?common_feature) as ?similarity)
    WHERE { ?vector :has ?common_feature . 
      ?other_vector :has ?common_feature .
      FILTER(?vector != ?other_vector)
    } GROUP BY ?other_vector ORDER BY DESC(?similarity) LIMIT 100
  }
  ?other_vector :hasLabel ?label .
} 
```

我添加了一个过滤条件来检查`?vector`和`?other_vector`不相等，是否有必要当然取决于你:)

如果您需要限制要查找匹配项的向量列表，可以使用`VALUES`子句来限制可能的绑定`?vector`：

```
VALUES ?vector { vector:0 vector:1 ... } 
```

# ruby - 为二维散列选择依据

> ID：14571549
> 
> 赞同：0
> 
> 时间：2013-01-28T21:27:15.793
> 
> 标签：ruby

我有这个哈希

```
- "title" : "The Today Show",
- "category; "Show",
- "channel-name": "CNBC",
- "scheduling" => 
       { "start" : "7am", "stop" : "9am"},
       { "start" : "10am", "stop" : "11am"},
       { "start" : "11am", "stop": "12am"}
- "title" : "How I met your mother",
- "category; "Show",
- "channel-name": "CBS",
- "scheduling" => 
       { "start" : "7pm", "stop" : "9pm"},
       { "start" : "10pm", "stop" : "12pm"},
       { "start" : "11am", "stop": "12am"} 
```

我只需要“选择”在“7pm”-“9pm”之间至少有一个时间表的节目

我试过这个，但它不工作

```
programs.select_by{|p| 
      p.scheduling.each{|ps|
         ps.start <= "7pm" && ps.stop <= "9pm"
   }
} 
```

PS：我使用**伪代码**进行日期比较只是为了使这段代码更具可读性:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:36:26.353

尝试这个

```
programs.select do |p| 
  p.scheduling.any? do |ps|
    ps.start >= "7pm" && ps.stop <= "9pm"
  end
end 
```

# node.js - 如果 Node.js 是服务器端，那么它对客户端不可见吗？

> ID：14571552
> 
> 赞同：2
> 
> 时间：2013-01-28T21:27:25.443
> 
> 标签：node.js

我不知道 Node.js 是 JavaScript 的服务器端（实现？）。服务器端意味着在服务器上执行（比如 PHP 或 Python）。这是否意味着您在 Node 中用 JavaScript 编写的代码是“不可见的”（对客户端而言）？我并不热衷于服务器端的东西，这个主题让我很感兴趣。比如说，你写了一些非常简单的东西，比如`console.log("Hello World");`then 在服务器上执行而不显示给客户端（比如查看源代码等）？我对吗？

*我在这里问这个是为了寻求对这个想法的更简单（小）的解释。另外，[这可能](https://stackoverflow.com/questions/5951302/node-js-code-protection)是我正在寻找的东西吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:35:03.233

是的，Node.js 代码完全在服务器上运行（就像 python）。在您的链接中，目标是加密源代码，因为客户端可以访问服务器文件系统。要与客户端通信，您将需要另一个组件，例如[http 模块](http://nodejs.org/api/http.html)。

# c# - 从外部事件/侦听器更改数据库的解决方法

> ID：14571554
> 
> 赞同：0
> 
> 时间：2013-01-28T21:27:30.193
> 
> 标签：c#, database, sqlite, filesystemwatcher, system.data.sqlite

正如我从[这个问题](https://stackoverflow.com/questions/14407195/does-entity-framework-system-data-sqlite-provide-a-database-changed-from-outsi)中了解到的那样，SQLite 中没有内置技术来跟踪来自其他地方的数据库更改。这个问题要在 C# 中解决。

我需要这个功能，所以我正在考虑解决方法。

我想我可以[为文件系统添加一个监听器](https://stackoverflow.com/questions/721714/notification-when-a-file-changes)，当`.sqlite`文件被更改时，它会得到通知。有没有人以相同或另一种方式解决了这个问题，或者有更好的解决方案吗？

# java - 创建一个长数组

> ID：14571557
> 
> 赞同：21
> 
> 时间：2013-01-28T21:27:35.887
> 
> 标签：java, arrays

我正在尝试在 java 中创建一个 long 数组，但是 eclipse 向我显示了一个错误，如下所示：

下面是我的代码：

![在此处输入图像描述](../Images/e1ae9ba5cada5684aa97f5da25fb12a2.png)

我该如何解决这个问题？

我不能在java中创建一个长数组吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-28T21:29:00.453

长数组很好：`long[]`. 但是*所有* **数组都是`int`索引的。**所以只需在方法参数声明中更改`long n`为，就可以了。`int n`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:29:56.277

对于索引，您必须使用`int`但不是`long`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T22:08:23.310

> 我需要一个 10^9 元素的数组

`int`您可以使用一个值创建一个十亿的数组。`n`创建一个 int，然后您可以使用注意创建一个数组：这将`new long[n]` 使用 8 GB 的堆。

由于您正在使用公式构建所有元素，因此您应该能够动态地给出所有值。即创建一个组件，它是一个“虚拟”数组，这样您就不必生成所有数组。

我指出这一点的原因是，如果第二个循环`k`非常小，则最多可能需要几分钟，或者很容易需要几天。

顺便说一句：我看不到所有代码，但看起来你永远不需要超过`k+1`可以分配一次而不是`n-k`多次的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T21:31:32.203

`n`（数组容量）必须`integer`是非`long`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T21:43:57.067

你有我的同情。每次内存大小增加时，我们都会经历这个。有一个奇怪的期望，**这次**数组大小不需要与内存大小并行增加。

`long get(long index)`您最好的解决方案可能是使用和`void set(long value, long index)`方法编写自己的类。它可以将数据表示为 long[10][1000000000]，并封装自然 long 索引和实际 int 索引对之间的映射。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-31T15:05:08.627

请注意，数组大小始终等于 int 大小。如果您指定的数组大小超过 2147483647，您将收到错误消息。长 n; 长 []=新长 [n]; 这将产生错误，因为 long n 超过 2147483647。如果 int n 则不会发生错误。

# javascript - jquery 或 javascript 图像 onclick div 淡入/链接 onlcick div 淡出

> ID：14571560
> 
> 赞同：1
> 
> 时间：2013-01-28T21:27:40.740
> 
> 标签：javascript, jquery, onclick, fadein, fadeout

我正在尝试使用淡入淡出隐藏 div 制作图像 onclick 功能，问题是我不太了解 jquery 或 javascript。我已经搜索过尝试在 css 中执行此操作，但我听说它有问题，而且我对它 js/jq 的理解还不够，无法拼凑出我需要的代码以及它应该去哪里。

基本上我想要的是：你点击一个图像，图像在隐藏的 div 中淡出，最好使背景变暗（有点像 shadowbox 会）然后点击隐藏 div 中的关闭链接，div 淡出背景恢复正常。

现在我有正常的 div 与要单击的图像、隐藏的 div 和设置的链接。

我知道这是可以做到的，我只是费了好大劲才弄清楚。请帮忙？

::更新代码以反映 JS 更改::

HTML-

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
   <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Title Goes Here</title>
    <meta name="keywords" content=" Enter Metatags" />
    <link rel="shortcut icon" href="images/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="shadowbox.css">
    <script type="text/javascript" src="shadowbox.js"></script>
    <script type="text/javascript">Shadowbox.init();
    </script></head>

    <body bgcolor="#547FA1">
    <div id="content">
<div id="wrapper">
    <div id="holder"><a href="#"><img src="images/openimage2.jpg" alt="open" width="1200" height="645" border="0" usemap="#Map" /></a>
      </img></div> 
      <div class="shadowdisc">
        <p>&nbsp;</p>
        <font size=4 color=#999><p align=center>Content for Hidden Div.</p>
     <p align=center>Here is more content</p>
     <br /><br />
     <p align=center>Finishing the content here</p>
      <p>
      <p>
      <p align=center><a href="welcome.html">ENTER</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.google.com">EXIT</a></p>
    <p>
   <p>
     <p align=right><a href="#">Close</a>
     </font>   
      </div>
       </div>
      </div>
     </div>
    </body
    </html> 
```

CSS-

```
 #content{
width: auto;
height: auto;
overflow: hidden;
background-image: url(bg.jpg);
background-repeat: repeat-x;
background: -moz-radial-gradient(center, ellipse cover,  rgba(0,0,0,0) 1%, rgba(0,0,0,0.65) 100%); /* FF3.6+ */
background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(1%,rgba(0,0,0,0)), color-stop(100%,rgba(0,0,0,0.65))); /* Chrome,Safari4+ */
background: -webkit-radial-gradient(center, ellipse cover,  rgba(0,0,0,0) 1%,rgba(0,0,0,0.65) 100%); /* Chrome10+,Safari5.1+ */
background: -o-radial-gradient(center, ellipse cover,  rgba(0,0,0,0) 1%,rgba(0,0,0,0.65) 100%); /* Opera 12+ */
background: -ms-radial-gradient(center, ellipse cover,  rgba(0,0,0,0) 1%,rgba(0,0,0,0.65) 100%); /* IE10+ */
background: radial-gradient(ellipse at center,  rgba(0,0,0,0) 1%,rgba(0,0,0,0.65) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00000000', endColorstr='#a6000000',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
background-attachment: fixed
color: #5B5B5B;
           }

     #wrapper{
width: 1200px;
margin-right: auto;
margin-left: auto;
height: 1100px;
           }

      #holder{
position: relative;
width: 1200px;
top: 150px;
background-color: #E3E3E3;
height: 594px;
           }

    .shadowdisc{
width: 900px;
background-image: url(images/disbg.png);
position: relative;
bottom: 400px;
border: 1px solid #999;
left: 148px;
padding: 10px;
display: none;
           }
</style> 
```

Javascript

```
 <link rel="stylesheet" type="text/css" href="shadowbox.css">
    <script type="text/javascript" src="shadowbox.js"></script>
    <script type="text/javascript">
    Shadowbox.init();
    </script>
    <script>
      $(function () { // Onload

        $("#showImage").click(function () {
          $("#shadowdisc").fadeIn(1000);
       });

        $("#closeLink").click(function () {
          $("#shadowdisc").fadeOut(1000);
        });

      });
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:02:28.993

这是一个如何使用 JQuery 和一点 CSS 来完成的[示例。](http://jsfiddle.net/SGktV/1/)

**HTML**

```
<button id="showButton">Show Panel</button>
<div id="hiddenPanel" class="hidden">
  <p>I'm a hidden div</p>
  <button id="closeButton">close me</button>
</div> 
```

**CSS**

```
.hidden {
    display: none;
    opactiy: 0;
} 
```

**JavaScript**

```
<script>
  $(function () { // Onload

    $("#showButton").click(function () {
      $("#hiddenPanel").fadeIn(1000);
    });

    $("#closeButton").click(function () {
       $("#hiddenPanel").fadeOut(1000);
    });

  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:29:49.553

`     **[jsBin demo](http://jsbin.com/omefob/1/)**   `

```
<div id="lightbox"></div>
<img class="thumb" src="img1.jpg" alt="" />   
<img class="thumb" src="img2.jpg" alt="" /> 
```

CSS：

```
*{margin:0;padding:0;}
h2, p{padding:30px;}

#lightbox{
  position:fixed;
  top:0px;
  left;0px;
  background:rgba(0,0,0,0.6);
  width:100%;
  height:100%;
  text-align:center;
  cursor:pointer;
  display:none;
}
#lightbox > img{
  position:relative;
  height:400px;  
  top:50%;
  margin:-200px auto;
  display:inline;
  box-shadow:0 3px 25px #000, 0 0 0 5px rgba(255,255,255,0.4);
  width:auto;
}

.thumb{
  float:left;
  padding:10px;
  width:180px;
  cursor:pointer;
} 
```

问：

```
$('.thumb').click(function(){
  var src = $(this).attr('src');
  $('#lightbox').append( '<img src="'+src+'"/>' ).fadeTo(800,1);

});

$('#lightbox').click(function(){
  $(this).fadeTo(800,0, function(){
    $(this).empty().hide();
  });
}); 
```

# android - Android PendingIntent 额外内容，BroadcastReceiver 未收到

> ID：14571564
> 
> 赞同：6
> 
> 时间：2013-01-28T21:28:10.613
> 
> 标签：android, sms, broadcastreceiver, android-pendingintent

当我将 extra 传递给 PendingIntent 时，sendBroadcastReceiver 永远不会收到消息，因为永远不会调用`onReceive()`this 的方法。`BroadcastReceiver`为什么会这样？

```
public class MainActivity extends Activity {
    private static String SENT = "SMS_SENT";
    private static String DELIVERED = "SMS_DELIVERED";
    private static int MAX_SMS_MESSAGE_LENGTH = 160;

    private static Context mContext;
    private BroadcastReceiver sendBroadcastReceiver, deliveryBroadcastReceiver;
    private final String DEBUG_TAG = getClass().getSimpleName().toString();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // ---when the SMS has been sent---
        sendBroadcastReceiver = new BroadcastReceiver() {

            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode()) {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS Sent", Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                        Toast.makeText(getBaseContext(), "Generic failure", Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                        Toast.makeText(getBaseContext(), "No service", Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        Toast.makeText(getBaseContext(), "Null PDU", Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        Toast.makeText(getBaseContext(), "Radio off", Toast.LENGTH_SHORT).show();
                        break;
                    }
            }
        };
        // ---when the SMS has been delivered---
        deliveryBroadcastReceiver = new BroadcastReceiver() {
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode()) {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS Delivered", Toast.LENGTH_SHORT).show();
                        break;
                    case Activity.RESULT_CANCELED:
                        Toast.makeText(getBaseContext(), "SMS not delivered",Toast.LENGTH_SHORT).show();
                        break;
                }
            }
        };

        Log.d(DEBUG_TAG, "onCreate() : Register receivers");
        registerReceiver(deliveryBroadcastReceiver, new IntentFilter(DELIVERED));
        registerReceiver(sendBroadcastReceiver, new IntentFilter(SENT));

        mContext = getApplicationContext();

        setContentView(R.layout.main);
        // ... Bind views and set up onClick listeners ( for example, one to call sendSMS() )

    }

    @Override
    protected void onDestroy() {
        // Unregister receivers
        Log.d(DEBUG_TAG, "onDestroy() : Unregister receivers");
        if (sendBroadcastReceiver != null) {
            unregisterReceiver(sendBroadcastReceiver);
            sendBroadcastReceiver = null;
        }
        if (deliveryBroadcastReceiver != null) {
            unregisterReceiver(deliveryBroadcastReceiver);
            deliveryBroadcastReceiver = null;
        }
        super.onDestroy();
    }

    // ---sends an SMS message to another device---
    public static void sendSMS(String phoneNumber, String message) {
        Intent sendIntent = new Intent(SENT);
        sendIntent.putExtra("extra_key", "extra_value"));

        PendingIntent piSent = PendingIntent.getBroadcast(mContext, 0, sendIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        PendingIntent piDelivered = PendingIntent.getBroadcast(mContext, 0, new Intent(DELIVERED), 0);
        SmsManager smsManager = SmsManager.getDefault();

        int length = message.length();
        if (length > MAX_SMS_MESSAGE_LENGTH) {
            ArrayList < String > messagelist = smsManager.divideMessage(message);
            smsManager.sendMultipartTextMessage(phoneNumber, null, messagelist, null, null);
        } else 
            smsManager.sendTextMessage(phoneNumber, null, message, piSent, piDelivered);
        }
   }

   //More methods of MainActivity ... 

} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-30T19:36:57.413

我想在代码中注册和注销存在一些问题。相反，我`BroadcastReceivers`在`AndroidManifest.xml`文件中注册了这两个，并且能够成功传递附加信息。

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8" ?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="com.myexample" android:versionCode="1" android:versionName="1.0">
    <uses-sdk android:minSdkVersion="16" android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.SEND_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.READ_SMS" />
    <uses-permission android:name="android.permission.WRITE_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_MMS" />
    <uses-permission android:name="android.permission.WRITE" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <application android:debuggable="true" android:icon="@drawable/ic_launcher_icon"
android:label="@string/app_name">
        <activity //Main activity... 
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity //Activity 2 ... </activity>//More acitivies ... 

        // Send Receiver
        <receiver android:name="com.sendit.receivers.SendBroadcastReceiver">
            <intent-filter>
                <action android:name="SMS_SENT" />
            </intent-filter>
        </receiver>
        //Delivery Receiver
        <receiver android:name="com.sendit.receivers.DeliveryBroadcastReceiver">
            <intent-filter>
                <action android:name="SMS_DELIVERED" />
            </intent-filter>
        </receiver>
    </application>
</manifest> 
```

**SendBroadcastReceiver.java**

```
public class SendBroadcastReceiver extends BroadcastReceiver {
    private final String DEBUG_TAG = getClass().getSimpleName().toString();
    private static final String ACTION_SMS_SENT = "SMS_SENT";

    // When the SMS has been sent
    public void onReceive(Context context, Intent intent) {

        String action = intent.getAction();

        if (action.equals(ACTION_SMS_SENT)) {

            switch (getResultCode()) {
                case Activity.RESULT_OK:
                    Toast.makeText(context, "SMS Sent", Toast.LENGTH_SHORT).show();
                    Bundle b = intent.getExtras();
                    Log.d(DEBUG_TAG, "sendBroadcastReceiver : b is " + b);
                    if (b != null) {
                        String value = b.getString("extra_key");
                        Log.d(DEBUG_TAG, "sendBroadcastReceiver : value is " + value);
                    }
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(context, "Generic failure", Toast.LENGTH_SHORT)
                        .show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(context, "No service", Toast.LENGTH_SHORT)
                        .show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(context, "Null PDU", Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(context, "Radio off", Toast.LENGTH_SHORT).show();
                    break;
            }

        }
    }

} 
```

**DeliveryBroadcastReceiver.java**

```
public class DeliveryBroadcastReceiver extends BroadcastReceiver {
    private final String DEBUG_TAG = getClass().getSimpleName().toString();
    private static final String ACTION_SMS_DELIVERED = "SMS_DELIVERED";

    // When the SMS has been delivered
    public void onReceive(Context context, Intent intent) {

        String action = intent.getAction();

        if (action.equals(ACTION_SMS_DELIVERED)) {

            switch (getResultCode()) {
                case Activity.RESULT_OK:
                    Toast.makeText(context, "SMS Delivered",
                    Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(context, "SMS not delivered",
                    Toast.LENGTH_SHORT).show();
                    break;
            }
        }
    }

} 
```

**MainActivity.java**

```
public class MainActivity extends Activity {
    private static String ACTION_SMS_SENT = "SMS_SENT";
    private static String ACTION_SMS_DELIVERED = "SMS_DELIVERED";
    private static int MAX_SMS_MESSAGE_LENGTH = 160;

    private static Context mContext;
    private final String DEBUG_TAG = getClass().getSimpleName().toString();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mContext = getApplicationContext();

        setContentView(R.layout.main);
        // ... Bind views and set up onClick listeners ( for example, one to call sendSMS() )

    }

    // ---sends an SMS message to another device---
    public static void sendSMS(String phoneNumber, String message) {
        Intent sendIntent = new Intent(ACTION_SMS_SENT);
        sendIntent.putExtra("extra_key", "extra_value"));

        PendingIntent piSent = PendingIntent.getBroadcast(mContext, 0, sendIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        PendingIntent piDelivered = PendingIntent.getBroadcast(mContext, 0, new Intent(ACTION_SMS_DELIVERED), 0);
        SmsManager smsManager = SmsManager.getDefault();

        int length = message.length();
        if (length > MAX_SMS_MESSAGE_LENGTH) {
            ArrayList < String > messagelist = smsManager.divideMessage(message);
            smsManager.sendMultipartTextMessage(phoneNumber, null, messagelist, null, null);
        } else 
            smsManager.sendTextMessage(phoneNumber, null, message, piSent, piDelivered);
        }
    }

    //More methods of MainActivity ... 

} 
```

# php - 如果不调用 __set，则不调用 __get，但是代码有效吗？

> ID：14571565
> 
> 赞同：6
> 
> 时间：2013-01-28T21:28:13.633
> 
> 标签：php, get, set, magic-methods

这是我的代码：

```
<?php

class SampleClass {

    public function __get($name){
        echo "get called";
        echo $name;
    }

    public function __set($name, $value) {
        echo "set called";
    }

}

?> 
```

还有我的索引文件：

```
$object = new SampleClass();
$object->color = "black";
echo $object->color; 
```

如果我按原样运行此代码，则输出如下：

```
设置调用调用颜色
```

但是，如果我注释掉

```
public function __set($name, $value) {
    echo "set called";
} 
```

上面的部分（只有这部分），那么输出将是：

```
黑色的
```

那么这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:36:50.820

`__get`只会在不存在属性的情况下被调用。通过删除`__set`，您在设置时创建了一个属性，因此`__get`php 不调用 ，而是返回该属性。

一种简单的思考方式`__get`是`__set`错误处理程序 - 当 php 无法以其他方式满足您的请求时，它们会启动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T21:42:09.693

这是对正在发生的事情的解释。在你的第一个例子中。您从未将值存储在对象中，也不存在已声明的属性。这`echo $object->color;`实际上从不做任何事情，因为没有返回任何内容`__get`。

在第二个示例中，您为对象中的属性分配了一个值。由于您没有在对象中声明该属性，因此默认情况下它被创建为公共的。由于它是公开的，`__get`因此在访问它时永远不会被调用。

# python - 无法执行扭曲 - 显示没有输出

> ID：14571569
> 
> 赞同：2
> 
> 时间：2013-01-28T21:28:17.657
> 
> 标签：python, windows, twisted, punjab

我已经安装了 python 2.7，twisted 12.3。另外，我确实安装了 zope.interface 4.0.3。我已将以下内容添加到 sys.path - C:\Python27\Lib\site-packages\twisted\scripts。

但是当我在命令 promot 中运行 twistd 命令时，我没有得到任何结果。这是我看到的 -

C:\Users\Nitish>twistd

C:\用户\Nitish>

这里出了什么问题？我需要这个才能运行旁遮普 BOSH 连接管理器。

# c++ - c ++在另一个进程中动态更改地址？

> ID：14571570
> 
> 赞同：-4
> 
> 时间：2013-01-28T21:28:20.083
> 
> 标签：c++, security

是否可以更改应用程序中的地址以使该应用程序仍然可以正常工作，但对该应用程序的黑客攻击（基于内存读/写）不能？也许移动堆栈或其他什么？

@update 我不寻找随机化基地址。我正在寻找在运行的应用程序中更改地址的方法，以便应用程序仍然可以工作，但“黑客和机器人”无法读取这部分内存。ASLR 不是我要找的东西（很容易绕过）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:43:48.360

移动堆栈将非常困难，除非您可以在执行此操作之前一直返回到 main。任何作为引用或指向堆栈上变量的指针传递的变量都不允许移动。在您说“好吧，那么我将动态分配所有内容”之前，现在您遇到了完全相同的问题 - 您的 HEAP 位于一个可预测的位置（至少在某种程度上是可预测的），因此可以进行修改。当然，即使堆的放置不可预测，您也不能在执行过程中随意移动它，因为您的代码将依赖于指针和对堆中其他数据的引用 - 如果您移动它，您最终不得不重新排列所有这些参考。最后，您仍然会有一些已知的或可以从其他值计算的寄存器或内存位置（例如

我最好的建议是在堆中生成代码，并使用它来并行计算游戏中使用的结果。

此外，避免持久位置的一种方法是在动态创建和销毁的线程中运行代码 - 这样，堆栈仅在一个地方短时间。但是，当然，这并不能真正阻止那些技术娴熟并决心找到保护您的方法的人。世界上有数以百万计的人可以使用计算机并能够“闯入事物”，你不能真正依赖“通过默默无闻的安全”[让事情变得复杂不是安全]。

正确的安全方法是在保存代码的服务器上执行所有必要的计算，并且代码不向公众提供！但是，对于 FPS 游戏来说，这可能不太现实。对于扑克游戏来说，这是非常现实的，尤其是如果你打得好就能赢钱！

# c++ - 使用另一个类的 C++ 方法声明

> ID：14571573
> 
> 赞同：3
> 
> 时间：2013-01-28T21:28:30.773
> 
> 标签：c++, class, header

我开始学习 C++（来自 Java），所以请耐心等待。

我似乎无法让我的方法声明接受我所做的课程。

> “上下文”尚未声明

我想我不理解一个基本概念，但我不知道是什么。

表达式.h

```
#include "Context.h"  
class Expression {  
public:  
    void interpret(Context *);  // This line has the error
    Expression();  
    virtual ~Expression();  
}; 
```

上下文.h

```
#include <stack>  
#include <vector>  
#include "Expression.h"  

class Context {  
private:  
    std::stack<Expression*,std::vector<Expression*> > theStack;  
public:  
    Context();  
    virtual ~Context();  
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T21:29:50.740

您必须转发声明或反之亦然（或两者），否则您有循环依赖`Expression`。`Context`例如，

表达式.h：

```
class Context; // no include, we only have Context*.

class Expression {  
public:  
    void interpret(Context *);  // This line has the error
    Expression();  
    virtual ~Expression();  
}; 
```

上下文.h：

```
#include <stack>  
#include <vector>  

class Expression; // No include, we only have Expression*

class Context {  
private:  
    std::stack<Expression*,std::vector<Expression*> > theStack;  
public:  
    Context();  
    virtual ~Context();  
}; 
```

您可以执行前向声明，因为不需要类的完整定义，因为在每种情况下您只引用指向另一个类的指针。您很可能需要实现文件中的包含（即`#include "Context.h"`in`Expression.cpp`和`#include Expression.h`in `Context.cpp`）。

最后，记得在你的头文件中[加入包含保护。](http://en.wikipedia.org/wiki/Include_guard)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:38:49.223

在 C++ 中，类定义总是必须以分号结尾，`;` 例如：

```
class foo {}; 
```

Java 和 C# 不需要，所以我可以看到你的困惑。

而且看起来你的两个头文件都包含彼此。因此，它有点像一条蛇在吃它的尾巴：它从哪里开始？因此，在您的 Expression.h 中，您可以用前向声明替换“包含”：

```
class Context;
class Expression {  
public:  
    void interpret(Context *);  // This line has the error
    Expression();  
    virtual ~Expression();  
} 
```

最后但并非最不重要的一点是，您应该设置编译器保护以防止标头多次包含在 .cpp 文件中。您可以`#pragma once`在头文件的顶部放置一个。如果您使用的是 Visual Studio 和 microsoft 编译器，这将非常有用。我不知道 GCC 是否支持它。或者你可以像这样包装你的头文件：

```
#ifndef EXPRESSION_H_
#define EXPRESSION_H_
    class Context;
    class Expression {  
    public:  
        void interpret(Context *);  // This line has the error
        Expression();  
        virtual ~Expression();  
    }
#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:31:31.203

您可能需要在 #include 之前的头文件中转发声明类 Context 和 Expression

例如

```
 #include <stack>  
    #include <vector>  

// forward declaration   
class Context;
    class Expression;

    #include "Expression.h"  

    class Context {  
    private:  
        std::stack<Expression*,std::vector<Expression*> > theStack;  
    public:  
        Context();  
        virtual ~Context();  
    } 
```

# ruby-on-rails - 将种子数据准备为 JSON 或 Rails 助手

> ID：14571579
> 
> 赞同：0
> 
> 时间：2013-01-28T21:28:59.927
> 
> 标签：ruby-on-rails

我必须为 Rails 应用程序准备大量的种子数据。根据我有限的经验，我知道两种方法可以做到这一点，但想知道哪种方法最灵活。

一，我可以用 Rails 来做，只需按照在 seed.rb 文件中使用的方式准备种子数据

```
User.create!( name: "John" ) 
```

或者，我可以创建数据的 json 文档。例如，我知道 Mongodb 可以让您将 json 文档直接导入数据库。我不确定其他数据库...

我突然想到 json 文档可能是最灵活的，因为我想你也可以使用正则表达式脚本将 json 转换成这样的东西 `User.create!( name: "John" )`

但是，我想知道是否还有其他我应该考虑的问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:24:27.673

我是 StackOverflow 新手，所以无法回复上面的评论。

我一直在尝试做类似的事情，我遇到了批量分配保护问题。我在研究中遇到的一个想法是使用：

```
without_protection: true 
```

我发现这可以使用 rails 3.2.3 例如：

```
json = ActiveSupport::JSON.decode(File.read('db/seeds/data.json'))
json.each do |a|
     Country.create!(a['data'], without_protection: true)
end 
```

请参阅[http://snippets.aktagon.com/snippets/401-How-to-seed-your-database-with-JSON-YAML-data-in-Rails](http://snippets.aktagon.com/snippets/401-How-to-seed-your-database-with-JSON-YAML-data-in-Rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:41:27.107

要考虑的一个问题是您不能总是通过构造函数传递所有参数。考虑一下：

```
class User
  include Mongoid::Document

  field :name
  field :role

  validates :name, presence: true
  validates :role, presence: true

  attr_accessible :name
end 
```

如果您有类似的东西`User.create({name: 'John', role: 'admin'})`，那么您的种子将失败，因为无法分配角色。

# java - 无法从 JavaScript 调用 JNLP 部署的小程序代码

> ID：14571582
> 
> 赞同：6
> 
> 时间：2013-01-28T21:29:06.370
> 
> 标签：java, javascript, applet, jnlp

这实际上是我关于 Java 的第一个问题，所以请耐心等待。

我从这段代码构建了一个名为 HelloWorldApp.class 的愚蠢的简单小程序类：

```
import java.applet.Applet;

class HelloWorldApp extends Applet
{
    static final long serialVersionUID = 6636669702238171717L;
    public String test()
    {
        return "Hello World!"; // Display the string.
    }
} 
```

然后我从所述类文件构建了一个 jar 文件。之后，我做了一个愚蠢的简单 JNLP 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase="/Content/applets" href="/Content/applets/datadelivery.jnlp">
    <information>
        <title>Hello World</title>
        <vendor>Me</vendor>
    </information>
    <resources>
        <!-- Application Resources -->
        <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se"/>
        <jar href="HelloWorldApp.jar" main="true" />

    </resources>
    <applet-desc 
         name="Test Applet"
         main-class="HelloWorldApp"
         width="300"
         height="50">
     </applet-desc>
     <update check="background"/>
</jnlp> 
```

我把所有三个项目都扔到了/Content/applet 目录中。最后，为了将它们联系在一起，我将其放在 HTML 文档的正文中：

```
<script type="text/javascript">
    var attributes = {
        id:'deliveryApplet',
        code: 'HelloWorldApp',
        // note: I tried including "codebase: '/Content/applets'", but nothing new happened
        width: 300,
        height: 50
    };
    var parameters = {
        jnlp_href: '/Content/applets/datadelivery.jnlp'
    };
    deployJava.runApplet(attributes, parameters, '1.6');
</script> 
```

...并创建了一个带有 onclick 调用操作的按钮：

```
alert(deliveryApplet.test()) 
```

问题？没有函数调用；JS 控制台响应说“未捕获的类型错误：对象 # 没有方法 'test'”。所以在某个地方，部署没有成功。但是哪里？根据示例，JNLP 的东西看起来是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:12:47.587

为了使事情更容易处理，我建议您使用“已弃用”小程序标签测试您的小程序。我记得我在使用 javascript 小程序加载器时遇到了奇怪的问题，并且无法弄清楚为什么它没有按照应有的方式工作。

# c - （如何）我可以内联特定的函数调用吗？

> ID：14571593
> 
> 赞同：32
> 
> 时间：2013-01-28T21:29:48.090
> 
> 标签：c, function, inline

假设我有一个在程序的多个部分中被调用的函数。还假设我对该函数有一个特定的调用，该函数位于对性能极为敏感的代码部分（例如，一个迭代数千万次且每一微秒都很重要的循环）。有没有一种方法可以强制编译器（`gcc`在我的情况下）内联该单个特定函数调用，而不内联其他函数调用？

编辑：让我完全清楚：这个问题不是关于*强制*gcc（或任何其他编译器）内联对函数的所有调用；相反，它是关于请求编译器内联对函数的*特定调用。*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T21:34:10.300

在 C（相对于 C++）中，没有标准的方法来建议函数应该被内联。它只是供应商特定的扩展。

不管你如何指定它，据我所知编译器总是会尝试内联每个实例，所以只使用一次该函数：

原来的：

```
 int MyFunc()  { /* do stuff */  } 
```

改成：

```
 inline int MyFunc_inlined()  { /* do stuff */  }

   int MyFunc()  { return MyFunc_inlined(); } 
```

现在，在你想要内联它的地方，使用`MyFunc_inlined()`

注意：上面的“inline”关键字只是 gcc 用来强制内联的任何语法的占位符。如果要信任 H2CO3 删除的答案，那将是：

```
static inline __attribute__((always_inline)) int MyFunc_inlined()  { /* do stuff */  } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-09-17T17:04:53.723

可以启用*每个翻译单元*的内联（但不是每个调用）。虽然这不是问题的答案并且是一个丑陋的技巧，但它[符合 C 标准](https://stackoverflow.com/questions/216510/extern-inline/216546#216546)并且作为相关的东西可能很有趣。

诀窍是`extern`在您不想内联和[`extern inline`](http://m68hc11.serveftp.org/inline-1.php)需要内联的地方使用定义。

例子：

```
$ cat func.h 
int func();

$ cat func.c 
int func() { return 10; }

$ cat func_inline.h 
extern inline int func() { return 5; }

$ cat main.c       
#include <stdio.h>

#ifdef USE_INLINE
# include "func_inline.h"
#else
# include "func.h"
#endif

int main() { printf("%d\n", func()); return 0; }

$ gcc main.c func.c && ./a.out
10                                                // non-inlined version

$ gcc main.c func.c -DUSE_INLINE && ./a.out
10                                                // non-inlined version

$ gcc main.c func.c -DUSE_INLINE -O2 && ./a.out
5                                                 // inlined! 
```

您还可以使用非标准属性（例如`__attribute__(always_inline))`在 GCC 中）进行`extern inline`定义，而不是依赖`-O2`.

顺便说一句，这个技巧[在 glibc 中使用](https://gcc.gnu.org/ml/gcc/2006-11/msg00006.html)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-28T23:04:15.343

在 C 中强制内联函数的传统方法是根本不使用函数，而是使用宏之类的函数。这种方法总是会内联函数，但是像宏这样的函数存在一些问题。例如：

```
#define ADD(x, y) ((x) + (y))
printf("%d\n", ADD(2, 2)); 
```

还有*inline*关键字，它是在 C99 标准中添加到 C 中的。值得注意的是，Microsoft 的 Visual C 编译器不支持 C99，因此您不能在该（悲惨的）编译器中使用*内联。**内联*仅向编译器提示您希望内联函数 - 它不保证这一点。

GCC 有一个扩展，它要求编译器内联函数。

```
inline __attribute__((always_inline)) int add(int x, int y) {
    return x + y;
} 
```

为了使这个更干净，您可能需要使用宏：

```
#define ALWAYS_INLINE inline __attribute__((always_inline))
ALWAYS_INLINE int add(int x, int y) {
    return x + y;
} 
```

我不知道有一个可以在某些调用上强制内联的函数的直接方法。但是你可以结合这样的技术：

```
#define ALWAYS_INLINE inline __attribute__((always_inline))
#define ADD(x, y) ((x) + (y))
ALWAYS_INLINE int always_inline_add(int x, int y) {
    return ADD(x, y);
}

int normal_add(int x, int y) {
    return ADD(x, y);
} 
```

或者，你可以有这个：

```
#define ADD(x, y) ((x) + (y))
int add(int x, int y) {
    return ADD(x, y);
}

int main() {
    printf("%d\n", ADD(2,2));    // always inline
    printf("%d\n", add(2,2));    // normal function call
    return 0;
} 
```

另外，请注意，强制内联函数可能不会使您的代码更快。内联函数会导致生成更大的代码，这可能会导致更多的缓存未命中。我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-09-17T10:59:20.857

答案是它取决于您的功能、您的要求以及您的功能的性质。你最好的选择是：

*   告诉编译器你想要它内联
*   使函数静态（注意 extern，因为它的语义在某些模式下在 gcc 中会发生一些变化）
*   设置编译器选项以通知优化器您想要内联，并适当地设置内联限制
*   在编译器上打开任何无法内联的警告
*   验证函数是内联的输出（您可以检查生成的汇编程序）。

**编译器提示**

这里的答案仅涵盖内联的一方面，即编译器的语言提示。当标准说：

> 使函数成为内联函数意味着对函数的调用尽可能快。此类建议的有效程度由实施定义

其他更强的提示可能就是这种情况，例如：

*   GNU 的`__attribute__((always_inline))`：通常，除非指定优化，否则函数不会内联。对于声明为内联的函数，即使未指定优化级别，此属性也会内联函数。
*   微软的`__forceinline`: __forceinline 关键字覆盖了成本/收益分析，而是依赖于程序员的判断。使用 __forceinline 时要小心。不加选择地使用 __forceinline 可能会导致更大的代码，而只能获得边际性能增益，或者在某些情况下甚至会导致性能损失（例如，由于更大的可执行文件的分页增加）。

甚至这两者都依赖于可能的内联，并且关键是依赖于编译器标志。要使用内联函数，您还需要了解编译器的优化设置。

值得一提的是，内联也可用于为您所在的编译单元提供现有函数的替换。当近似答案对您的算法足够好时，可以使用此方法，或者可以以更快的方式获得结果与本地数据结构。

> 内联定义提供了外部定义的替代方案，翻译器可以使用它来实现对同一翻译单元中函数的任何调用。未指定对函数的调用是使用内联定义还是外部定义。

**有些函数不能内联**

例如，对于不能内联的 GNU 编译器函数有：

> 请注意，函数定义中的某些用法可能使其不适合内联替换。这些用法包​​括：可变参数函数、alloca 的使用、可变长度数据类型的使用（请参阅可变长度）、计算 goto 的使用（请参阅作为值的标签）、非局部 goto 的使用和嵌套函数（请参阅嵌套函数）。当标记为 inline 的函数无法替换时，使用 -Winline 会发出警告，并给出失败的原因。

因此，甚至`always_inline`可能无法达到您的预期。

**编译器选项**

使用 C99 的内联提示将依赖于您向编译器指示您正在寻找的内联行为。

例如 GCC 有：

`-fno-inline`, `-finline-small-functions`, `-findirect-inlining`, `-finline-functions`, `-finline-functions-called-once`, `-fearly-inlining`,`-finline-limit=n`

Microsoft 编译器还具有指示内联有效性的选项。一些编译器还允许优化考虑运行配置文件。

我确实认为在更广泛的程序优化背景下内联是值得的。

**防止内联**

您提到您不希望内联某些功能。这可以通过设置类似`__attribute__((always_inline))`而不打开优化器来完成。但是，您可能会想要优化器。这里的一种选择是暗示你不想要它： `__attribute__ ((noinline))`. 但为什么会这样呢？

**其他形式的优化**

您还可以考虑如何重组循环并避免分支。分支预测可以产生巨大的影响。有关这方面的有趣讨论，请参见：[为什么处理排序数组比处理未排序数组更快？](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array/11227902#11227902)

然后，您还可以展开更小的内部循环并查看不变量。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-21T19:31:01.897

如果你不介意同一个函数有两个名字，你可以在你的函数周围创建一个小包装来“阻止”always_inline 属性影响每个调用。在我的示例中，`loop_inlined`将是您将在性能关键部分使用的名称，而 plain`loop`将在其他任何地方使用。

## 内联.h

```
#include <stdlib.h>

static inline int loop_inlined() __attribute__((always_inline));
int loop();

static inline int loop_inlined() {
    int n = 0, i;
    for(i = 0; i < 10000; i++) 
        n += rand();
    return n;
} 
```

## 内联.c

```
#include "inline.h"

int loop() {
    return loop_inlined();
} 
```

## 主程序

```
#include "inline.h"
#include <stdio.h>

int main(int argc, char *argv[]) {
    printf("%d\n", loop_inlined());
    printf("%d\n", loop());
    return 0;
} 
```

无论优化级别如何，这都有效。`gcc inline.c main.c`在 Intel 上编译给出：

```
4011e6:       c7 44 24 18 00 00 00    movl   $0x0,0x18(%esp)
4011ed:       00
4011ee:       eb 0e                   jmp    4011fe <_main+0x2e>
4011f0:       e8 5b 00 00 00          call   401250 <_rand>
4011f5:       01 44 24 1c             add    %eax,0x1c(%esp)
4011f9:       83 44 24 18 01          addl   $0x1,0x18(%esp)
4011fe:       81 7c 24 18 0f 27 00    cmpl   $0x270f,0x18(%esp)
401205:       00
401206:       7e e8                   jle    4011f0 <_main+0x20>
401208:       8b 44 24 1c             mov    0x1c(%esp),%eax
40120c:       89 44 24 04             mov    %eax,0x4(%esp)
401210:       c7 04 24 60 30 40 00    movl   $0x403060,(%esp)
401217:       e8 2c 00 00 00          call   401248 <_printf>
40121c:       e8 7f ff ff ff          call   4011a0 <_loop>
401221:       89 44 24 04             mov    %eax,0x4(%esp)
401225:       c7 04 24 60 30 40 00    movl   $0x403060,(%esp)
40122c:       e8 17 00 00 00          call   401248 <_printf> 
```

前 7 条指令是内联调用，常规调用在 5 条指令之后发生。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-18T17:46:11.303

有一个内核源代码`#define`以一种非常有趣的方式使用 s 来定义几个具有*相同 body 的*不同命名函数。**这解决了*需要维护***两个不同功能的问题。（我忘记是哪一个了……）。我的想法是基于同样的原则。

使用定义的方法是您将在您需要的编译单元上定义内联函数。为了演示该方法，我将使用一个简单的函数：

```
int add(int a, int b); 
```

它的工作原理是这样的：您`#define`在头文件中创建一个函数生成器，并声明该函数的正常版本（*未内联*的那个）的函数原型。

然后声明**两个独立的函数生成器**，一个用于普通函数，一个用于内联函数。您声明为的内联函数`static __inline__`. 当您需要在其中一个文件中调用内联函数时，您可以使用生成器定义来获取它的源代码。在所有其他需要使用普通函数的文件中，只需在原型中包含标题即可。

代码在以下位置进行了测试：

```
Intel(R) Core(TM) i5-3330 CPU @ 3.00GHz
Kernel Version: 3.16.0-49-generic
GCC 4.8.4 
```

代码价值超过一千字，所以：

### 文件层次结构

```
+
| Makefile
| add.h
| add.c
| loop.c
| loop2.c
| loop3.c
| loops.h
| main.c 
```

### 添加.h

```
#define GENERATE_ADD(type, prefix)  \
    type int prefix##add(int a, int b) { return a + b; }

#define DEFINE_ADD()            GENERATE_ADD(,)
#define DEFINE_INLINE_ADD()     GENERATE_ADD(static __inline__, inline_)

int add(int, int); 
```

这看起来不太好，但减少了维护两个不同功能的工作。该函数在宏中完全定义`GENERATE_ADD(type,prefix)`，因此如果您需要更改函数，则更改此宏，其他所有内容都会更改。

接下来，`DEFINE_ADD()`将调用 from`add.c`以生成正常版本的`add`. `DEFINE_INLINE_ADD()`将允许您访问一个名为 的函数`inline_add`，该函数与您的普通函数具有**相同的签名**`add`，但它具有不同的名称（**inline_**前缀）。

**注意：**使用标志`__attribute((always_inline))__`时我没有使用-完成了这项工作。但是，如果您不想使用，请使用：`-O3``__inline__``-O3`

```
#define DEFINE_INLINE_ADD()     GENERATE_ADD(static __inline__ __attribute__((always_inline)), inline_) 
```

### 添加.c

```
#include "add.h"

DEFINE_ADD() 
```

`DEFINE_ADD()`对宏生成器的简单调用。这将声明函数的*正常*版本（不会被内联的那个）。

### 循环.c

```
#include <stdio.h>
#include "add.h"

DEFINE_INLINE_ADD()

int loop(void)
{

    register int i;

    for (i = 0; i < 100000; i++)
        printf("%d\n", inline_add(i + 1, i + 2));

    return 0;
} 
```

在这里，`loop.c`您可以看到对 的调用`DEFINE_INLINE_ADD()`。这使该函数可以访问该`inline_add`函数。编译时，所有`inline_add`函数都将被内联。

### 循环2.c

```
#include <stdio.h>
#include "add.h"

int loop2(void)
{
    register int i;

    for (i = 0; i < 100000; i++)
        printf("%d\n", add(i + 1, i + 2));

    return 0;
} 
```

这是为了表明您可以使用`add`其他文件的正常版本。

### 循环3.c

```
#include <stdio.h>
#include "add.h"

DEFINE_INLINE_ADD()

int loop3(void)
{

    register int i;

    printf ("add: %d\n", add(2,3));
    printf ("add: %d\n", add(4,5));
    for (i = 0; i < 100000; i++)
        printf("%d\n", inline_add(i + 1, i + 2));

    return 0;
} 
```

这是为了表明您可以在**同一个编译单元中使用****这两个**函数，但是其中一个函数将被内联，而另一个则不会（有关详细信息，请参阅下面的**GDB disass**）。

 ****### 循环.h

```
/* prototypes for main */
int loop (void);
int loop2 (void);
int loop3 (void); 
```

### 主程序

```
#include <stdio.h>
#include <stdlib.h>
#include "add.h"
#include "loops.h"

int main(void)
{
    printf("%d\n", add(1,2));
    printf("%d\n", add(2,3));

    loop();
    loop2();
    loop3();
    return 0;
} 
```

### 生成文件

```
CC=gcc
CFLAGS=-Wall -pedantic --std=c11

main: add.o loop.o loop2.o loop3.o main.o
    ${CC} -o $@ $^ ${CFLAGS}

add.o: add.c 
    ${CC} -c $^ ${CFLAGS}

loop.o: loop.c
    ${CC} -c $^ -O3 ${CFLAGS}

loop2.o: loop2.c 
    ${CC} -c $^ ${CFLAGS}

loop3.o: loop3.c
    ${CC} -c $^ -O3 ${CFLAGS} 
```

如果您使用 ，`__attribute__((always_inline))`您可以将其更改`Makefile`为：

```
CC=gcc
CFLAGS=-Wall -pedantic --std=c11

main: add.o loop.o loop2.o loop3.o main.o
    ${CC} -o $@ $^ ${CFLAGS}

%.o: %.c
    ${CC} -c $^ ${CFLAGS} 
```

* * *

## 汇编

```
$ make
gcc -c add.c -Wall -pedantic --std=c11
gcc -c loop.c -O3 -Wall -pedantic --std=c11
gcc -c loop2.c -Wall -pedantic --std=c11
gcc -c loop3.c -O3 -Wall -pedantic --std=c11
gcc -Wall -pedantic --std=c11   -c -o main.o main.c
gcc -o main add.o loop.o loop2.o loop3.o main.o -Wall -pedantic --std=c11 
```

* * *

# 拆卸

```
$ gdb main
(gdb) disass add

   0x000000000040059d <+0>: push   %rbp
   0x000000000040059e <+1>: mov    %rsp,%rbp
   0x00000000004005a1 <+4>: mov    %edi,-0x4(%rbp)
   0x00000000004005a4 <+7>: mov    %esi,-0x8(%rbp)
   0x00000000004005a7 <+10>:mov    -0x8(%rbp),%eax
   0x00000000004005aa <+13>:mov    -0x4(%rbp),%edx
   0x00000000004005ad <+16>:add    %edx,%eax
   0x00000000004005af <+18>:pop    %rbp
   0x00000000004005b0 <+19>:retq   

(gdb) disass loop

   0x00000000004005c0 <+0>: push   %rbx
   0x00000000004005c1 <+1>: mov    $0x3,%ebx
   0x00000000004005c6 <+6>: nopw   %cs:0x0(%rax,%rax,1)
   0x00000000004005d0 <+16>:mov    %ebx,%edx
   0x00000000004005d2 <+18>:xor    %eax,%eax
   0x00000000004005d4 <+20>:mov    $0x40079d,%esi
   0x00000000004005d9 <+25>:mov    $0x1,%edi
   0x00000000004005de <+30>:add    $0x2,%ebx
   0x00000000004005e1 <+33>:callq  0x4004a0 <__printf_chk@plt>
   0x00000000004005e6 <+38>:cmp    $0x30d43,%ebx
   0x00000000004005ec <+44>:jne    0x4005d0 <loop+16>
   0x00000000004005ee <+46>:xor    %eax,%eax
   0x00000000004005f0 <+48>:pop    %rbx
   0x00000000004005f1 <+49>:retq   

(gdb) disass loop2

   0x00000000004005f2 <+0>: push   %rbp
   0x00000000004005f3 <+1>: mov    %rsp,%rbp
   0x00000000004005f6 <+4>: push   %rbx
   0x00000000004005f7 <+5>: sub    $0x8,%rsp
   0x00000000004005fb <+9>: mov    $0x0,%ebx
   0x0000000000400600 <+14>:jmp    0x400625 <loop2+51>
   0x0000000000400602 <+16>:lea    0x2(%rbx),%edx
   0x0000000000400605 <+19>:lea    0x1(%rbx),%eax
   0x0000000000400608 <+22>:mov    %edx,%esi
   0x000000000040060a <+24>:mov    %eax,%edi
   0x000000000040060c <+26>:callq  0x40059d <add>
   0x0000000000400611 <+31>:mov    %eax,%esi
   0x0000000000400613 <+33>:mov    $0x400794,%edi
   0x0000000000400618 <+38>:mov    $0x0,%eax
   0x000000000040061d <+43>:callq  0x400470 <printf@plt>
   0x0000000000400622 <+48>:add    $0x1,%ebx
   0x0000000000400625 <+51>:cmp    $0x1869f,%ebx
   0x000000000040062b <+57>:jle    0x400602 <loop2+16>
   0x000000000040062d <+59>:mov    $0x0,%eax
   0x0000000000400632 <+64>:add    $0x8,%rsp
   0x0000000000400636 <+68>:pop    %rbx
   0x0000000000400637 <+69>:pop    %rbp
   0x0000000000400638 <+70>:retq   

(gdb) disass loop3

   0x0000000000400640 <+0>: push   %rbx
   0x0000000000400641 <+1>: mov    $0x3,%esi
   0x0000000000400646 <+6>: mov    $0x2,%edi
   0x000000000040064b <+11>:mov    $0x3,%ebx
   0x0000000000400650 <+16>:callq  0x40059d <add>
   0x0000000000400655 <+21>:mov    $0x400798,%esi
   0x000000000040065a <+26>:mov    %eax,%edx
   0x000000000040065c <+28>:mov    $0x1,%edi
   0x0000000000400661 <+33>:xor    %eax,%eax
   0x0000000000400663 <+35>:callq  0x4004a0 <__printf_chk@plt>
   0x0000000000400668 <+40>:mov    $0x5,%esi
   0x000000000040066d <+45>:mov    $0x4,%edi
   0x0000000000400672 <+50>:callq  0x40059d <add>
   0x0000000000400677 <+55>:mov    $0x400798,%esi
   0x000000000040067c <+60>:mov    %eax,%edx
   0x000000000040067e <+62>:mov    $0x1,%edi
   0x0000000000400683 <+67>:xor    %eax,%eax
   0x0000000000400685 <+69>:callq  0x4004a0 <__printf_chk@plt>
   0x000000000040068a <+74>:nopw   0x0(%rax,%rax,1)
   0x0000000000400690 <+80>:mov    %ebx,%edx
   0x0000000000400692 <+82>:xor    %eax,%eax
   0x0000000000400694 <+84>:mov    $0x40079d,%esi
   0x0000000000400699 <+89>:mov    $0x1,%edi
   0x000000000040069e <+94>:add    $0x2,%ebx
   0x00000000004006a1 <+97>:callq  0x4004a0 <__printf_chk@plt>
   0x00000000004006a6 <+102>:cmp    $0x30d43,%ebx
   0x00000000004006ac <+108>:jne    0x400690 <loop3+80>
   0x00000000004006ae <+110>:xor    %eax,%eax
   0x00000000004006b0 <+112>:pop    %rbx
   0x00000000004006b1 <+113>:retq 
```

## 符号表

```
$ objdump -t main | grep add
0000000000000000 l    df *ABS*  0000000000000000              add.c
000000000040059d g     F .text  0000000000000014              add

$ objdump -t main | grep loop
0000000000000000 l    df *ABS*  0000000000000000              loop.c
0000000000000000 l    df *ABS*  0000000000000000              loop2.c
0000000000000000 l    df *ABS*  0000000000000000              loop3.c
00000000004005c0 g     F .text  0000000000000032              loop
00000000004005f2 g     F .text  0000000000000047              loop2
0000000000400640 g     F .text  0000000000000072              loop3

$ objdump -t main | grep main
main:     file format elf64-x86-64
0000000000000000 l    df *ABS*  0000000000000000              main.c
0000000000000000       F *UND*  0000000000000000              __libc_start_main@@GLIBC_2.2.5
00000000004006b2 g     F .text  000000000000005a              main

$ objdump -t main | grep inline
$ 
```

* * *

嗯，就是这样。经过 3 个小时的敲击键盘试图弄明白，这是我能想到的最好的。请随时指出任何错误，我将非常感激。我对这个特殊的**inline *one* function call**非常感兴趣。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-18T15:48:40.283

这里有个建议，把代码主体写在单独的头文件中。将头文件包含在它必须内联的位置，并包含在 C 文件的正文中以供其他调用。

```
void demo(void)
{
#include myBody.h
}

importantloop
{
    // code
#include myBody.h
    // code
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-09-17T16:27:38.647

我假设你的函数是一个小函数，因为你想内联它，如果是这样，你为什么不把它写在 asm 中呢？

至于仅内联对函数的特定调用，我认为没有什么可以为您完成这项任务。一旦一个函数被声明为内联，并且如果编译器会为你内联它，它会在它看到对该函数的调用的任何地方执行它。****

# android - 如何在资源文件中引用 android:gravity 值？

> ID：14571597
> 
> 赞同：12
> 
> 时间：2013-01-28T21:29:51.840
> 
> 标签：android, android-layout

我有一个带有 a 的布局，`TextView`我希望`android:gravity`从另一个资源文件中提取属性值`android:gravity="@???/item_align"`，其中`item_align`是另一个 xml 文件中资源的名称。布局中使用的典型值，或者`center`不起作用。如果我将字符串替换为实际的整数值（“中心”替换为 0x011），则 , integer中的类型有效。但是，这不是一个好的解决方案。`bottom``bottom|center_horizontal``@???`

那么，问题是：如何引用布局文件中的值，以及资源文件中的项目是什么样的？

```
<TextView
   android:id="@+id/item_text"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_alignParentTop="true"
   android:layout_alignParentBottom="true"
   android:layout_alignParentLeft="true"
   android:layout_alignParentRight="true"
   android:layout_margin="1dp"
   android:layout_centerHorizontal="true"
   android:gravity="@???/item_align"
   android:text="65"
   android:textSize="20sp"
   android:typeface="sans"
   android:textStyle="bold"
   android:textColor="#000000" /> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-28T21:39:09.857

**概念：**

```
 android:gravity="@integer/integer_name" 
```

整数.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <integer
        name="integer_name"
        >1</integer>
</resources> 
```

重力值都是整数常量，您必须在 integers.xml 中查找并定义它。

**示例实现：**

> > public static final int CENTER ...常量值：17（0x00000011）

在[文档](http://developer.android.com/reference/android/view/Gravity.html#CENTER)中...然后在 res/values/ 中添加到 integers.xml：

```
 <integer
        name="center"
        >17</integer> 
```

在您的 xml 中，执行以下操作：

```
android:gravity="@integer/center" 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-12-28T13:09:56.187

干得好。

```
<integer name="gravity_bottom">80</integer>
<integer name="gravity_center">17</integer>
<integer name="gravity_center_horizontal">1</integer>
<integer name="gravity_center_vertical">16</integer>
<integer name="gravity_end">8388613</integer>
<integer name="gravity_left">3</integer>
<integer name="gravity_no_gravity">0</integer>
<integer name="gravity_right">5</integer>
<integer name="gravity_start">8388611</integer>
<integer name="gravity_top">48</integer> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-13T13:36:54.530

为了不破坏标准常量并避免在 Android Studio 中以红色突出显示，您可以在 /values 和 /values-sw600dp 文件夹中创建两个样式（在 styles.xml 中）

/values/styles.xml

```
 <style name = "AppContainerLayout">
     <item name = "android:gravity">top|start</item>
 </style> 
```

/values-sw600dp/styles.xml  

```
<style name = "AppContainerLayout">
    <item name = "android:gravity">center</item>
</style> 
```

并且只在布局中使用

```
<LinearLayout
             style = "@ style/AppContainerLayout"
             android:layout_width = "match_parent"
             android:layout_height = "wrap_content"
             android:orientation = "vertical">

             // childs
</LinearLayout> 
```

# import - StringTemplate：如何从 jar 中导入？

> ID：14571600
> 
> 赞同：2
> 
> 时间：2013-01-28T21:29:57.213
> 
> 标签：import, stringtemplate-4

我有一个案例，我从 jar 中包含的文件加载字符串模板组。使用以下机制可以正常工作：

```
final String urlName = new StringBuilder()
            .append("jar:file:").append(templateJar.getAbsolutePath()).append("!")
            .append(templateFileName).toString();
final URL url;
try {
        url = new URL(urlName);
} catch (MalformedURLException ex) {
        throw new GeneratorException("bad manifest url", ex);
}
final STGroup stg = new STGroupFile(url, "US-ASCII", '<', '>'); 
```

当模板文件包含一个

```
...
import "../../dataTypeMaps.stg"
... 
```

字符串模板失败并显示以下内容：

```
can't load group file jar:file:/home/phreed/.m2/repository/edu/vanderbilt/isis/druid/druid-template/2.0.0/druid-template-2.0.0.jar!/template/src/main/java/sponsor/orm/ContractCreator.stg
Caused by: java.lang.IllegalArgumentException: No such group file: ../../dataTypeMaps.stg
    at org.stringtemplate.v4.STGroupFile.<init>(STGroupFile.java:69)
    at org.stringtemplate.v4.STGroup.importTemplates(STGroup.java:570)
    at org.stringtemplate.v4.compiler.GroupParser.group(GroupParser.java:199)
    at org.stringtemplate.v4.STGroup.loadGroupFile(STGroup.java:619)
    at org.stringtemplate.v4.STGroupFile.load(STGroupFile.java:139)
    at org.stringtemplate.v4.STGroupFile.load(STGroupFile.java:128)
    at org.stringtemplate.v4.STGroup.lookupTemplate(STGroup.java:237)
    at org.stringtemplate.v4.STGroup.getInstanceOf(STGroup.java:172)
    at edu.vanderbilt.isis.druid.generator.Generator.build(Generator.java:215)
    at edu.vanderbilt.isis.druid.generator.DruidMojo.execute(DruidMojo.java:193)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 
```

是否可以使用 jar 进行设置以便导入工作？当不涉及 jar 时，上述方法可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:08:31.993

简单的回答是导入文件的路径错误

```
...
import "dataTypeMaps.stg"
... 
```

导入将导致从 jar 的根目录开始查找文件。上述导入相当于将文件放置在...

```
final String urlName = new StringBuilder()
        .append("jar:file:").append(templateJar.getAbsolutePath()).append("!")
        .append("dataTypeMaps.stg").toString(); 
```

为什么行为与模板组文件在本机文件系统上时不同，我不知道。为了让它工作，我更改了类路径以包含 jar 文件。由于这是在 Maven 插件的上下文中完成的，因此插件需要动态更改类路径。这是通过以下代码完成的...

```
 public void setTemplateJarName(String templateJarName) throws GeneratorException {
    this.templateJarName = templateJarName;
    final Thread ct = Thread.currentThread();
    final ClassLoader pcl = ct.getContextClassLoader();
    URL[] nurl;
    try {
        nurl = new URL[]{ new URL("file://"+templateJarName) };
    } catch (MalformedURLException ex) {
        throw new GeneratorException("could not load template jar", ex);
    }
    final URLClassLoader ucl = new URLClassLoader(nurl, pcl);
    ct.setContextClassLoader(ucl);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-08T19:50:04.380

1.  仔细检查您的模板是否真的在您的 jar 中。
2.  使用以下代码：

如果模板在这样的树中分派：

```
/-->resources
   +--> c/     (many .st and .stg files)
   +--> cpp/   (many .st and .stg files)
   +--> java/  (many .st and .stg files)
   +--> c.stg
   +--> cpp.stg
   +--> java.stg 
```

的内容`java.stg`是：

```
group Java;

import "java"

doNothing() ::= <<>> 
```

一次调用加载所有文件：

```
URL     url   = getClass().getResource( "/resources/" + templateName );
STGroup group = new STGroupFile( url, "utf-8", '<', '>' ); 
```

在我的情况下`templateName`等于`c.stg`，`cpp.stg`或`java.stg`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-04T14:51:51.647

相对路径仅适用于文件系统。如果要从类路径导入模板，请使用完全限定名称。这与您自己使用 Class::getResource() 从类路径加载文件时相同。使用完全限定名称，也适用于文件系统。

因此，假设有两个模板文件：

*   src/main/resources/util/date.stg
*   src/main/resources/generator/class.stg

然后在 class.stg 中使用完全限定名称：

```
import "util/date.stg" 
```

# input - 从文本文件导入变量，变量不递增

> ID：14571606
> 
> 赞同：0
> 
> 时间：2013-01-28T21:30:26.947
> 
> 标签：input, batch-file, cmd

我的目标是能够进入一个特定的文件夹，运行一个任务，然后当该任务完成后，移动到另一个文件夹并重复。

```
@echo off
setlocal ENABLEDELAYEDEXPANSION
set vidx=0
for /F "tokens=*" %%A in (z:\desktop\cookieclean\test.txt) do (
    SET /A vidx=!vidx! + 1
    set var!vidx!=%%A
)
set var

echo %var!vidx!%

set /a vidx+=1

echo %var!vidx!%

endlocal 
```

这就是我正在处理的代码。我从网络上的其他地方复制了代码，并试图让它做我想做的事。上面的代码只是我试图获取测试文件，将 3 行文本作为变量，然后让它递增。

我敢肯定这是非常简单的事情，但我一直在努力让它工作好几个小时，而且我的新秀气质正在显现。

我正在尝试做的伪代码是

```
Input variables from text

Open folder containing files

Delete files that are older than X days

Move active folder to next folder in directory

Delete files that are older than X days

Loop

End 
```

我只是想使用 cmd 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:02:03.203

你的延迟扩张和正常扩张被逆转了。您希望在外部变量之前扩展内部变量：`!var%vidx%!`

您的循环中的 SET /A 语句有效，但您不需要扩展变量。这同样有效：`SET /A vidx=vidx + 1`，或者更好：`SET /A vidx+=1`

我也相信你显示结果的逻辑是不正确的。下面的代码应该可以工作。

```
@echo off
setlocal enableDelayedExpansion
set "vidx=0"
for /f "tokens=*" %%A in (z:\desktop\cookieclean\test.txt) do (
  set /a vidx+=1
  set "var!vidx!=%%A"
)
set var

set "cnt=vidx"
set "vidx=1"
:loop
if %vidx% leq %cnt% (
  echo !var%vidx%!
  set /a vidx+=1
  goto :loop
)

endlocal 
```

这是使用 FOR /L 而不是 GOTO 循环的更简单和更有效的方法。

```
@echo off
setlocal enableDelayedExpansion
set "vidx=0"
for /f "tokens=*" %%A in (z:\desktop\cookieclean\test.txt) do (
  set /a vidx+=1
  set "var!vidx!=%%A"
)
set var

for /l %%N in (1 1 %vidx%) do echo !var%%N!

endlocal 
```

# java - 使用 Java 流布局

> ID：14571613
> 
> 赞同：1
> 
> 时间：2013-01-28T21:31:06.307
> 
> 标签：java, swing, layout-manager, flowlayout

这是我第一次来这里，我还不熟悉这个网站，但我听说它很棒。我目前正在尝试学习Java。我在布局方面遇到问题。我现在特别关注的是 FlowLayout。谁能告诉我如何仍然可以更改 JButton 的大小，例如在使用 FlowLayout 时？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:34:21.983

由于`FlowLayout`使用首选尺寸，您可以`getPreferredSize`在该组件中覆盖：

```
JButton myButton = new JButton(" Click Me !") {
    @Override
    public Dimension getPreferredSize() {
        return new Dimension(60, 25);
    };
}; 
```

如果您想知道我为什么不打电话`setPreferredSize`，请查看

[我应该避免在 Java Swing 中使用 set[Preferred|Maximum|Minimum]Size 方法吗？](https://stackoverflow.com/questions/7229226/should-i-avoid-the-use-of-setpreferredmaximumminimumsize-methods-in-java-swi)

# c# - 为什么访问另一个对象实例的私有函数有效？

> ID：14571623
> 
> 赞同：0
> 
> 时间：2013-01-28T21:31:47.460
> 
> 标签：c#, .net

> **可能重复：**
> [为什么私有字段是类型私有的，而不是实例私有的？](https://stackoverflow.com/questions/6983553/why-are-private-fields-private-to-the-type-not-the-instance)

考虑以下代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Test
{
    class Program
    {
        static void Main(string[] args)
        {
            Foo foo = new Foo();
            Foo foo2 = new Foo();
            foo.Test(foo);

            Console.ReadLine();

        }
    }

    public class Foo
    {
        public void Test(Foo foo)
        {
            Console.WriteLine("I was called");
            foo.test_fuction();
        }

        private void test_fuction()
        {
            Console.WriteLine("!");
        }

    }

} 
```

在这种情况下，我希望 private 关键字会阻止访问实例的成员变量和函数。这不会允许某人编写一些写得不好的对某些对象的迂回访问吗？有没有办法防止这种行为？还是出于充分的理由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:35:01.860

私有意味着该成员可以在声明它的类型的主体内访问，而不仅仅是给定实例可以访问。

没有办法阻止这种行为。如果只有特定实例可以访问私有成员，则静态方法的用处会小得多。

从规范的第 3.5.2 节：

> 在程序 P 中以类型 T 声明的嵌套成员 M 的可访问域定义如下（注意 M 本身可能是一个类型）：
> 
> *   如果 M 声明的可访问性是私有的，则 M 的可访问域是 T 的程序文本。

# jquery - 用于 jQuery 导入的制造商/产品数组的 JSON 基本格式

> ID：14571627
> 
> 赞同：0
> 
> 时间：2013-01-28T21:31:59.593
> 
> 标签：jquery, arrays, json, text

我有几个制造商的列表，每个制造商都提供一小部分产品类型。找不到将其格式化为 JSON 文件的确切示例。

制造商清单
...制造商#1
.....泵
.....阀门
.....量规
...制造商#2
.....阀门
.....管道
...制造商#2
. ....绝缘
.....管道

所以每个制造商都有一小部分产品类型。我将使用 jQuery 在此列表中搜索特定制造商#并显示制造商销售的产品类型。我被告知使用 JSON 作为可以轻松编辑的最简单的路由。JSON 文件将位于服务器根目录的 /json 目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:35:16.863

```
{"manufacturelist":[
    {"manufacturer#1": ['pumps', 'valves', 'gauges']},
    {"manufacturer#2": ['valves', 'tubing']},
    {"manufacturer#3": ['insulation', 'tubing']}
]} 
```

我相信这会达到你想要的。如果可以的话，我会从这些键中取出 # ，因为否则你无法通过点符号访问（即`obj.manufacturelist.manufacturer#1`无效）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T00:09:22.637

JSON 真的很简单，你应该按照最简单的方式来构建它（至少我是这么认为的）

对于您的具体问题，我会这样做：

```
{
    "manufacturerList":[
        {"id":1, "productTypes":["pumps","valves","gauges"]}, //I added here a prop id but you could add any other you need
        {"id":2, "productTypes":["valves","tubing"]},
        {"id":3, "productTypes":["insulation","tubing"]}
    ]
} 
```

希望有帮助

# hibernate - Hibernate 4 显式多态性（注释）不起作用？

> ID：14571629
> 
> 赞同：8
> 
> 时间：2013-01-28T21:32:19.993
> 
> 标签：hibernate, annotations, polymorphism, hibernate-4.x

我面临着休眠的显式多态性问题。我使用了多态注释并将其设置为显式，但是使用映射类中的 get() 和集合，我总是得到所有子类。我在休眠“show_sql”输出中看到了所有带有左连接的子类。有什么问题？我对文档的理解有误吗？或者它是hibernate 4中的一个错误？我还没有看到任何带有休眠 4 和多态注释的示例。

```
sessionFactory.getCurrentSession().get(Node.class, 111); // return subclasses!

@Entity
@Table(name="Nodes")
@Inheritance(strategy = InheritanceType.JOINED)
@Polymorphism(type= PolymorphismType.EXPLICIT)
public class Node implements Serializable {
    ...
}

@Entity
@Table(name="Persons")
public class Person extends Node {
}

@Entity
@Table(name="Networks")
public class Network extends Node {
}

...and other subclasses... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-21T13:32:42.573

这是一个常见的错误理解，我曾经也有同样的疑问..

**这就是显式多态性中真正发生的事情。**

> > **显式多态性仅适用于根实体，并防止命名（未映射的）超类的查询返回映射的子实体**
> 
> 在您的情况下，如果 Entity Class **Nodes**未映射并且**Persons**具有显式多态性，则**Nodes 不会返回 Persons elements**。

看看这段代码。。

```
@Entity
@Table(name="Nodes")
@Inheritance(strategy = InheritanceType.JOINED)
public class Node implements Serializable {
    ...
}

@Entity
@Polymorphism(type= PolymorphismType.EXPLICIT)
@Table(name="Persons")
public class Person extends Node {
}

@Entity
@Polymorphism(type= PolymorphismType.EXPLICIT)
@Table(name="Networks")
public class Network extends Node {
} 
```

它基本上与每个人的想法相反。！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T16:32:20.167

如果您查看[PolymorphismType.EXPLICIT](https://docs.jboss.org/hibernate/orm/4.3/javadocs/org/hibernate/annotations/PolymorphismType.html)的定义，它会说：

> EXPLICIT：仅在明确询问时才检索此实体。

要隐藏子类，您必须使用 EXPLICIT 而不是基类来注释子类。

# jquery - 使用选项卡选择一个 div

> ID：14571632
> 
> 赞同：1
> 
> 时间：2013-01-28T21:32:35.323
> 
> 标签：jquery, button, hover, href

我在使用 . 这很烦人，因为当用户将鼠标悬停在它上面时，浏览器会在页面底部显示一个无用的链接（我真的不能在那里，因为我在底部使用了一个状态栏）。

当我删除属性 href 时，问题就解决了，但是现在当我在对话框的元素上进行选项卡时，将跳过没有 href 的按钮。

任何建议，将不胜感激。

编辑：HTML：

```
<html><head>...(script includes)</head><body>
<div id="someDialog">
</body></html> 
```

JS：

```
 $(document).ready(function() {
     $("#someDialog").dialog();
 )}; 
```

jsfiddle： http: [//jsfiddle.net/mmarcon/jTGCF/1/](http://jsfiddle.net/mmarcon/jTGCF/1/) 打开对话框并将鼠标悬停在关闭的“x”上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:46:04.563

如果您真的不能让状态栏显示任何内容，您需要完全删除锚标记并使用 javascript 导航而不是选定元素（就像您已经做的那样！）。

然后用于`tabindex`控制标签按的顺序和元素。

在此处更新了您的 jsfiddle：http: [//jsfiddle.net/jTGCF/201/](http://jsfiddle.net/jTGCF/201/) （尝试在两个按钮之间切换）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:51:42.907

您还可以更改状态栏。这里只是一个例子：[http ://www.west-wind.com/weblog/posts/2008/Jun/13/A-jQuery-Client-Status-Bar](http://www.west-wind.com/weblog/posts/2008/Jun/13/A-jQuery-Client-Status-Bar "jQuery 状态栏")

看起来比大多数浏览器显示的更好，并且对用户更可见。不确定其他用户，但我唯一一次查看内置状态栏是在调试自己的应用程序时。

# jquery - 一行表格列切换善良。几乎

> ID：14571648
> 
> 赞同：-1
> 
> 时间：2013-01-28T21:33:24.180
> 
> 标签：jquery

这是我方便的花花公子代码行：

```
$('#options th.subhead').each(function(){$(this).parents('table').find('td:nth-child('+$(this).prevAll().length+')').andSelf().toggle();}); 
```

现在......理论上，我认为这应该做的是将表中带有“子标题”类的任何选项作为选项，然后找到同一列的任何 td 并切换它。哦，还有原来的th。

你猜怎么了。它清除并返回表的全部内容。

我在这里遗漏了一些东西。我正在做 preVall 和长度的“这个”不再是我想的这个吗？

更新！威利的评论让我更接近了。

我现在在这里：

```
$('#options th.subhead').each(function(){$(this).parents('table').find('td:nth-child('+$(this).prevAll().length+')').toggle();}).toggle(); 
```

这很好用，除非它隐藏了错误的 td。它似乎是第一列上的一列，接下来的两列是正确的，最后一列的左侧是一列。哈哈

更新 2.5（由于 url 错误）：

我做了一个小提琴 [http://jsfiddle.net/MatthewDavis/8nTXB/1/](http://jsfiddle.net/MatthewDavis/8nTXB/1/)

更新 3 感谢wirey。这是最后的小提琴！ [http://jsfiddle.net/MatthewDavis/8nTXB/2/](http://jsfiddle.net/MatthewDavis/8nTXB/2/)

以及完整的代码行。

```
$('#options th.subhead').each(function () {
    $(this).parents('table').find('td:nth-child(' + ($(this).prevAll().length+1) + ')').toggle();
}).toggle(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:40:58.233

这是你的错误

```
$('#options th.subhead').each(function(){
    $(this) // <-- you're at the th level
    .parents('table') // <-- now your at the table level
    .find('td:nth-child('+$(this).prevAll().length+')') // you traversed down
    .andSelf() // <-- this says add the previous element in the stack which is the table
    .toggle(); // here you are toggling the tds and the table
}); 
```

你这样尝试 - 未经测试

```
$('#options th.subhead').each(function(){
    $(this) // <-- you're at the th level
    .parents('table') // <-- now your at the table level
    .find('td:nth-child('+$(this).prevAll().length+')') // you traversed down
    .end()  // <-- now back at the table level in the stack
    .andSelf() // <-- this says previous elements in the stack which is the TH
    .toggle(); // here you are toggling the th and tds
}); 
```

仅供参考，如果您使用的是 jQuery 1.8+，那么您应该使用[.addBack()](http://api.jquery.com/addBack/)代替，因为 .andSelf() 已被弃用

**编辑**

[:nth-child](http://api.jquery.com/nth-child-selector/)是 1-indexed 而不是 0-inexed 所以你需要加 1 到 prevAll().length

```
$('#options th.subhead').each(function () {
  $(this).parents('table').find('td:nth-child(' + ($(this).prevAll().length+1) + ')').toggle();
}).toggle(); 
```

# ruby-on-rails-3 - rake 依赖与需求

> ID：14571650
> 
> 赞同：1
> 
> 时间：2013-01-28T21:33:28.210
> 
> 标签：ruby-on-rails-3, rake

我有一个 rake 任务 db:test:prepare 旨在在运行测试之前清除测试数据库。似乎它神奇地依赖于 test、test:units 和 test:functionals 任务，这些任务被定义为某些核心库的一部分。

当我自己运行 test:units 或 test:functionals 之一时， db:test:prepare 首先运行并且测试成功。但是，如果我运行默认测试任务，第二组测试将失败，因为中间没有重置数据库。

研究一下，我发现如果 rake 依赖项已经运行过一次，它们将被跳过，所以如果我有`task :a => :pre`并且`task :b => :pre`，如果我定义了第三个任务来运行这两个`task :c => [:a, :b]`，当我调用时`rake c`，rake 将调用`:pre, :a, :b`，而不是`:pre, :a, :pre, :c`

我最终通过编写一个新任务得到了我想要的行为：

```
namespace :test do
  task :all do
     Rake::Task['test:units'].invoke
     Rake::Task['db:test:prepare'].execute
     Rake::Task['test:functionals'].invoke
  end
end 
```

有一个更好的方法吗？或者一种声明依赖项是*必需*的或类似的方法？Rake::Task 有一个#reenable 方法，我曾希望它允许一种变通方法，比如让“准备”任务在执行结束时重新启用，这样当第二个依赖它的任务出现时它会再次被调用，但它似乎并没有那样工作。

# php - 自动化 cPanel 中的一些任务

> ID：14571654
> 
> 赞同：0
> 
> 时间：2013-01-28T21:34:00.730
> 
> 标签：php, shell, cpanel

我想在 cPanel 中自动创建子域和数据库。我可以从哪里开始做这样的事情？我想要一个简单的 PHP 前端界面，我可以在其中输入几个变量并自动设置子域和数据库，可能通过运行一些 shell 命令。有什么建议我应该从哪里开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T20:08:18.073

好的，所以对于其他对编写 cPanel 函数的脚本感兴趣的人来说，为了自动化在 cPanel 中完成的任务，同时仍然可以从 cPanel 的界面轻松维护所有内容，这里是要走的路：

[http://docs.cpanel.net/twiki/bin/vief/SoftwareDevelopmentKit/WebHome](http://docs.cpanel.net/twiki/bin/vief/SoftwareDevelopmentKit/WebHome)

cPanel 和 WHM 有一个 API 可以让你做这些事情。我希望它对将来的某人有用。

# c# - 控制台中结果的显示格式

> ID：14571656
> 
> 赞同：2
> 
> 时间：2013-01-28T21:34:20.393
> 
> 标签：c#

我正在尝试按如下方式显示我的结果：

```
-.-|-    [tab]  kt   
-.|--    [tab]  nm  
-.|-|-   [tab]  ntt 
```

但这是我目前的输出

```
-.-|-|  kt  
-.|--|  nm  
-.|-|-|  [tab]ntt 
```

每个莫尔斯电码的末尾都有一个`|`我想删除的，因为它在末尾。

还因为用户可以在点和破折号之间输入带有空格的摩尔斯电码 - 我注意到它会影响字符的对齐方式，并且并非所有字符都被正确标记。选项卡这个词不应该显示我只是写了它，因为我不知道如何放置一个真正的选项卡。

```
private static readonly IDictionary<char, string> morseCode_alpha = new Dictionary<char, string>
{
    {'a', ".-"},{'b',"-..."}, {'c',"-.-."}, {'d',"-.."}, {'e',"."},
    {'f',"..-."}, {'g',"--."}, {'h',"...."},{'i',".."}, {'j',".---"}, 
    {'k',"-.-"}, {'l',".-.."}, {'m',"--"}, {'n',"-."}, {'o',"---"}, 
    {'p',".--."}, {'q',"--.-"}, {'r',".-."}, {'s',"..."}, {'t',"-"}, 
    {'u',"..-"}, {'v',"...-"}, {'w',".--"}, {'x',"-..-"}, {'y',"-.--"}, {'z',"--.."}
};

private static string ConvertMorseToText(string symbolCode)
{
    var builder = new StringBuilder(4 * symbolCode.Length);

    foreach (char c in symbolCode)
        builder.Append(morseCode_alpha[c]);
    return builder.ToString();
}

private static string ConvertTextToMorse(char ch)
{
    if (morseCode_alpha.Keys.Contains(ch))
        return morseCode_alpha[ch];
    else
        return string.Empty;
}

private static string ConvertStringToMorse(string letters)
{
    StringBuilder sb = new StringBuilder();
    foreach (char ch in letters)
    {
        if (sb.Length != 0 && sb[sb.Length - 1] != ' ')
            sb.Append("|");
        sb.Append(ConvertTextToMorse(ch));
    }
    return sb.ToString();
}

private static IEnumerable<string> Permutations( string symbolCode)
{
    int n = symbolCode.Length;
    if (n == 0 || symbolCode.Length == 0)
        yield return " ";
    else
        foreach (var entry in morseCode_alpha)
            if (symbolCode.StartsWith(entry.Value))
                foreach (string next in Permutations(symbolCode.Substring(entry.Value.Length)))
                    yield return entry.Key + next;
}

private static void Write( string rest)
{
    string result = ConvertStringToMorse(rest);
    Console.Write(result+"\t");
    Console.WriteLine(rest);
}

static void Main(string[] args)
{
    string morseInput;
    string entered = "";
    do
    {
        Console.WriteLine("Enter Morse Code: \n");
        morseInput = Console.ReadLine().Replace(" ","");
        bool isValid = Regex.IsMatch(morseInput, @"^[-.]+$");
        if (isValid)
        {
            Console.WriteLine("\nAll permutations:\n");
            string morse = ConvertMorseToText(entered);
            string permutations = morseInput.Substring(morse.Length);
            Write(permutations);
            var nexts = new List<string>(Permutations(permutations));
            foreach (string next in nexts)
                Write(next);
        }
        else
        {
            Console.WriteLine("\nFormat of morse must be only dots and dashes.");
            Console.WriteLine("Parameter name: "+morseInput+"\n");
        }
    }
    while (morseInput.Length != 0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:53:55.310

而且，要回答问题的另一部分...

Tabstops 是为控制台编写而固定的，所以最好使用类似 String.PadRight 的东西

所以，你的代码可能是：

```
private static void Write(string rest)
{
    string result = ConvertStringToMorse(rest);
    Console.Write(result.PadRight(20));
    Console.WriteLine(rest);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T21:55:06.017

该方法的草稿版本：

```
private static string ConvertStringToMorse(string letters)
{
    var result = string.Join("|",
        letters
            .Select(ConvertTextToMorse)
            .Where(morse => !string.IsNullOrEmpty(morse)));
    return result;
} 
```

更新：

请注意，该`entered`变量只使用**一次**：当定义时 -**分配空字符串**。然后`ConvertMorseToText(entered)`调用该方法：**它总是为空字符串参数返回空字符串**。在此分配之后`string permutations = morseInput.Substring(morse.Length);`，`permutations`变量将存储与变量完全相同的值`morse`（因为`morse.Length`始终为 0）。

所以，`entered`变量和`ConvertMorseToText()`方法似乎没用（**两者都可以安全地删除**）：

```
static void Main(string[] args)
{
    do
    {
        Console.WriteLine("Enter Morse Code: ");

        string morseInput = Console.ReadLine();
        if (string.IsNullOrWhiteSpace(morseInput))
        {
            // Empty or consists only of white-space characters
            break;
        }

        morseInput = morseInput.Replace(" ", "");

        bool isValid = Regex.IsMatch(morseInput, @"^[-.]+$");
        if (isValid)
        {
            Console.WriteLine("All permutations:");
            Console.WriteLine();
            var nexts = Permutations(morseInput).ToList();
            foreach (string next in nexts)
                Write(next);
        }
        else
        {
            Console.WriteLine();
            Console.WriteLine("Format of morse must be only dots and dashes.");
            Console.WriteLine("Parameter name: {0}", morseInput);
        }
    }
    while (true);
} 
```

更新 2：考虑使用`TryGetValue()`方法`Dictionary<TKey, TValue>`而不是`Keys.Contains`和`[]`（索引器），即不要执行两次查找：

```
private static string ConvertTextToMorse(char ch)
{
    string result;
    return morseCode_alpha.TryGetValue(ch, out result) ? result : string.Empty;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T21:53:20.807

相反，这段代码：

```
Console.Write(result+"\t");
Console.WriteLine(rest); 
```

采用

```
Console.WriteLine("{0,-10}{1,-10}", result, rest); 
```

然后您将看到左对齐的两列（每列最多 10 个字符）。或者如果您想要右对齐，请删除“-”符号。

# actionscript-3 - Google Analytics Actionscript 3.0 自定义维度

> ID：14571658
> 
> 赞同：0
> 
> 时间：2013-01-28T21:34:22.297
> 
> 标签：actionscript-3, google-analytics

如何使用 actionscript 3.0 跟踪自定义维度？我在 SDK 中看不到任何内容。

Google 关于自定义维度的文档： [https ://developers.google.com/analytics/devguides/platform/features/customdimsmets](https://developers.google.com/analytics/devguides/platform/features/customdimsmets)

Google 关于 Actionscript SDK 的文档：http: [//gaforflash.googlecode.com/svn/documentation/com/google/analytics/GATracker.html](http://gaforflash.googlecode.com/svn/documentation/com/google/analytics/GATracker.html)

请注意，这将在 AIR 应用程序中运行，我不想使用 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:18:15.920

您可以使用自定义跟踪器事件。前两个参数定义自定义事件的类别和子类别（使用您喜欢的任何字符串）。第三个和第四个可用于记录有关特定事件的详细信息。例如：

```
GAtracker.trackEvent("myCategory", "myAction", "width", stage.stageWidth);
GAtracker.trackEvent("myCategory", "myAction", "height", stage.stageheight); 
```

或者：

```
GAtracker.trackEvent("myCategory", "myAction", "size", stage.stageWidth+","+stage.stageheight); 
```

# matlab - 如何在matlab中符号存储导数

> ID：14571662
> 
> 赞同：0
> 
> 时间：2013-01-28T21:34:33.843
> 
> 标签：matlab, symbolic-math

我的问题与 Matlab 的符号数学工具箱有关。我有以下代码：

```
syms x x_0 u delta sigma_1
mu = sym ('mu(x)');
sigma_u = sym ('sigma(u)');
sigma = sym ('sigma(x)');
f = int (1/sigma_u, u, x_0, x);
df = subs(diff(f,x))
df_2 = subs(diff (f,x,2))
L = subs(mu*df+1/2*sigma^2*df_2) 
```

L 的结果是正确的

```
L =

mu(x)/sigma(x) - diff(sigma(x), x)/2 
```

但是，为了进一步推导和简单起见，我想定义

```
sigma_1 = sym('diff(sigma,x)'); 
```

或以类似的方式获得结果

```
L =

mu(x)/sigma(x) - sigma_1(x)/2 
```

基本上，我想将符号表达式 diff(sigma(x),x) 存储在一个名称下，以便 Matlab 知道当它在表达式中得到这个结果时，发布名称 sigma_1 (x) 而不是 diff(sigma( x),x)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T21:17:53.783

是的，有可能，您可以使用`subs(L, 'diff(sigma(x),x)', 'sigma_1(x)')`. 注意要使替换工作，第二个输入`subs`必须与您要替换的完全一样；因此它不能是 'diff(sigma, x)'`(x)`缺少`sigma`.

另请注意，[这](https://stackoverflow.com/questions/17822125/defining-relationship-for-symbolic-variable-in-matlab/20320825#20320825)是一个类似的问题，我为此提供了更完整的解决方案（他们在您提出问题之后提出了问题，但我先阅读了他们的问题）。

# autoit - AutoIt 等待控制元素出现

> ID：14571668
> 
> 赞同：6
> 
> 时间：2013-01-28T21:34:55.213
> 
> 标签：autoit

我正在尝试使用 AutoIt 自动化应用程序，并且我需要等待控件出现在应用程序中，然后才能开始自动化。此控件在应用程序启动后不久加载，但不会更改窗口标题。如何等待控件出现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T13:22:13.840

要获取另一个 GUI 上的控件的句柄，您需要使用[AutoIt Window Info Tool](http://www.autoitscript.com/autoit3/docs/intro/au3spy.htm)来识别该控件。要获取控件的类名，请转到“控件”选项卡并查找“类名NN”的值。现在你可以像我在下面的例子中那样使用这个值。

当然，您需要替换`"Button1"`为从 AutoIt Info Tool 获得的信息并相应地修改窗口标题。

```
Global $hCtrl = 0, $Waiting = True

; your GUI loop
While (1)
    If $Waiting And WinExists("Title of OtherApp.exe") Then
        $hCtrl = ControlGetHandle("Title of OtherApp.exe", "", "Button1")
        If $hCtrl Then
            ; we got the handle, so the button is there
            ; now do whatever you need to do
            GUICtrlCreateLabel("Button is there!", 10, 10)
            $Waiting = False
        EndIf
    EndIf

    $iMsg = GUIGetMsg()
    Switch $iMsg
        Case $GUI_EVENT_CLOSE
            ExitLoop
    EndSwitch
WEnd 
```

# extjs4 - Ext js 4 从控制器控制监听器

> ID：14571672
> 
> 赞同：-1
> 
> 时间：2013-01-28T21:35:12.777
> 
> 标签：extjs4

我是 Ext Js 4 的新手。我的问题很简单，但我找不到任何文档或任何论坛。我有一个 xtype: 'panel' 有一个图像映射，上面有几个链接。我正在尝试在该面板上添加一个侦听器，以便我可以在我的“控制器”中控制它。我怎样才能做到这一点，以便我遵循 MVC 模型？

```
 {
    xtype:'panel',
    id:'tab2',
    html:
    '<div><img src="app/image/tableRoomPoster.jpg"  usemap=#conferenceRoom >'+
    '<map id="conferenceRoom" name="conferenceRoom">' + 
         '<div id ="remote"> <area shape="rect" alt="Remote" title="" coords="727,568,834,613" href="#" ></div>'+   
         '<div id ="virOfficeMain"><area shape="circle" alt="virOfficeMain" title="" coords="28,624,18" href="#" ></div>'+
     '</map></div>' +    

    '<div  id="toggleRemote" style="display:none"><img src="app/image/remoteShrink.png"  usemap=#controlRemote >'+
    '<map id="controlRemote" name="controlRemote">'+
            '<area id ="remoteOff" shape="circle" alt="Off" title="" coords="118,51,11" href="#" />'+   
                '<div class="playVideoMonitor" id="button1"style="display:none">'+
            '<area  shape="rect" alt="button1" title="" coords="20,74,42,87" href="#"/>'+
                '<iframe border:"block" width="302" height="174"src="http://www.youtube.com/embed/VHySPMCNS34" '+
                'frameborder="0" ></iframe></div>'+
            '<div class="playVideoMonitor" id="button2" style="display:none">'+
                '<area  shape="rect" alt="button2" title="" coords="61,75,85,89" href="#"/>'+
                '<iframe id="video2"width="302" height="174" src="http://www.youtube.com/embed/ts8Q6LwDMcs" '+
                'frameborder="0" allowfullscreen></iframe></map></div>' 

     }],
     listeners : {
         afterrender : function(c) {
             c.getEl().on('click', function(e){ 
                 this.fireEvent('click', c); 
             }, c);
         }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:16:24.887

您可以在侦听器上使用委托选项来侦听从嵌入在面板中的元素发出的事件。

像这样的东西：

```
listeners: {
    el:{  
      'click':{
          delegate:'img', 
          fn:function (event, target) {
               //do something
           }
       }
    }
 } 
```

顺便说一下，这个监听器直接在面板上，而不是在控制器中——所以它与你使用 MVC 的愿望无关。如果你想让控制器接管`//do something`块，那么你可以调用`this.fireEvent('myEventName', somedata)`，然后控制器会监听从你的面板发出的这个事件，然后它会对数据做一些事情。- 现在你有了 MVC :)

# ios - 连接选择轮委托

> ID：14571675
> 
> 赞同：2
> 
> 时间：2013-01-28T21:35:19.230
> 
> 标签：ios, interface-builder, uipickerview

如何将 Picker Wheel 的“代表”连接到界面？这在教程中看起来很简单，但是在 Xcode 中没有我可以用来拖动到界面的“pickerview 委托”按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:40:41.607

欢迎来到堆栈溢出！

您需要将代理连接到`pickerView`，即使它没有特定的按钮。只需右键单击界面生成器旁边的橙色方框，然后`CTRL`在将“新引用出口”拖到选择器时按下。当您将线放在选择器上时，将有一个添加pickerView委托和数据源的选项！:)

您还需要在头文件中实现委托，如下所示：

```
@interface MainViewController : UIViewController     <UIPickerViewDelegate,UIPickerViewDataSource> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:40:10.310

将您的 ViewController 添加为 UIPickerViewDelegate 和 UIPickerViewDataSource ，如下所示：

```
@interface ViewController : UIViewController <UIPickerViewDelegate, UIPickerViewDataSource> 
```

这些选项现在应该在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:40:49.143

1.  打开你的故事板/xib 文件。
2.  打开 Inspector 窗口（此处查看部分中的最右侧按钮 ![在此处输入图像描述](../Images/0bfed48682f32938866f07fbbb40ac16.png)

3.  打开连接检查器（检查器窗口顶部此区域中最右侧的按钮） ![在此处输入图像描述](../Images/4dde80e49b9554e862d5b3b91f4a068d.png)

4.  从“代表”条目旁边的圆圈拖动到您想成为代表的对象 ![在此处输入图像描述](../Images/5e1d0e0796fd82eebfc243385a0dabc7.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T21:40:53.207

选择选择器，右键单击它。然后你会看到一个菜单——左侧有圆圈的列表。单击并从代表对面的圆圈拖动到控制器黄色图标。

# mysql - sql error#1064 不知道这里出了什么问题

> ID：14571678
> 
> 赞同：0
> 
> 时间：2013-01-28T21:35:42.320
> 
> 标签：mysql

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 'CREATE TABLE Products( Category VARCHAR(30), Item VARCHAR(30),PRIMARY KEY, Pr' 附近使用正确的语法

```
 CREATE TABLE Products(
   Category VARCHAR(30),
   Item VARCHAR(30) PRIMARY KEY,
   Price DECIMAL(5,2),
   Quantity INT
   ) ENGINE=InnoDB; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:36:36.307

```
CREATE TABLE Products(
Category VARCHAR(30),
Item VARCHAR(30),PRIMARY KEY, <-- The comma is your problem
Price DECIMAL(5,2),
Quantity INT
) ENGINE=InnoDB; 
```

要将 PK 分配给列，它应该是：

```
CREATE TABLE Products(
Category VARCHAR(30),
Item VARCHAR(30) PRIMARY KEY,
Price DECIMAL(5,2),
Quantity INT
) ENGINE=InnoDB; 
```

# algorithm - 仅使用归纳法求解复发 T(n)=t(n/2)+sqrt(n)

> ID：14571680
> 
> 赞同：1
> 
> 时间：2013-01-28T21:35:44.403
> 
> 标签：algorithm, data-structures, recursion, recurrence

我想证明 T(n)=T(n/2)+sqrt(n) 是 O(sqrt(n)) 给定 T(1)=1 仅使用归纳法。使用 Master 定理很容易解决，但事实并非如此。我试图假设

> T(n/2) < c*sqrt(n/2)

但在其余的证明中并没有走得太远。预先感谢大家的回答。

编辑：我的解决方案（在上述假设之后）是：

> T(n) <= c*sqrt(n/2)+sqrt(n) = sqrt(n) *(c/sqrt(2)+1) <= sqrt(n)* (c+1)

我不知道如何从这个转移到所需的

> T(n)<=c*sqrt(n)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T22:56:30.767

好的，你很接近了。所以基本上，正如我在评论中提到的，基本情况很简单。对于归纳案例，你想证明 T(n) 是 O(sqrt(n))，因为 T(n/2) 是 O(sqrt(n/2))。

所以，它是这样的：

```
T(n) = T(n/2) + sqrt(n)               ; this is just your recurrence
     < c sqrt(n/2) + sqrt(n)          ; since T(n/2) is O(sqrt(n))
                                      ; wlog here, assume c > 4
     = c sqrt(n) / sqrt(2) + sqrt(n)
     = (c/sqrt(2) + 1) sqrt(n) 
```

观察对于 c > 4，c / sqrt(2) + 1 < c，所以

```
(c/sqrt(2) + 1) sqrt(n) < c sqrt(n) 
```

所以

```
T(n) < c sqrt(n) 
```

因此，T(n) 为 O(sqrt(n))

所以这里有几个关键点你错过了。

首先是您可以随时将 c 增加到您想要的任何值。这是因为大 O 只需要 <. 如果它是 < cf(n) 那么它是 < df(n) 其中 d > c。

第二个是注意线 f(c) = c/sqrt(2) + 1 与线 f(c) = c 相交大约在 c = sqrt(2) / (sqrt(2)-1) = 3.4143 （或如此），所以你所要做的就是强制 c > 这个值以获得 (c/sqrt(2) + 1) < c。4 确实有效，所以这就是 4 的来源。

回想起来，我应该给出关键点作为提示。我的错。对不起！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T23:20:20.630

一种可能有帮助的思路是递归地扩展递归。你得到

```
T(n) = sqrt(n) + sqrt(n/2) + sqrt(n/4) + ... + sqrt(n/(2^k)) + ... + sqrt(1)
     = sqrt(n) + sqrt(n)/sqrt(2) + sqrt(n)/sqrt(4) + ... + sqrt(n)/sqrt(2^k) + ... + sqrt(1)
     = sqrt(n) * (1 + sqrt(1/2) + sqrt(1/2)^2 + ... + sqrt(1/2)^k + ...)
     <= sqrt(n) * ∑(k=0 to ∞) sqrt(1/2)^k
     = sqrt(n) * 1/(1 - sqrt(1/2)) 
```

由于`1/(1-sqrt(1/2))`是一个有限常数（大约为 3.4），`T(n)`因此必须是`O(sqrt(n))`. 您可以使用此信息使用标准归纳来证明它。

# ios - 单击按钮时如何制作由另一个视图推送的视图（同时保留）

> ID：14571682
> 
> 赞同：-1
> 
> 时间：2013-01-28T21:35:49.650
> 
> 标签：ios, ipad, uiviewcontroller, master-detail

最初在屏幕顶部有一个包含一个按钮的选项卡，在它下面有一个初始/欢迎视图。

按下按钮时，顶部选项卡不应更改。但是会出现另一个视图并推动欢迎视图隐藏其中的一部分。最后，选项卡位于顶部（占用 1024）.. 在其下方，欢迎视图（占用 1024 / 2 ）和新视图（占用 1024 / 2 ）之间共享屏幕宽度。

考虑到欢迎屏幕的一部分仍然需要可见，如何实现此动画。（所需的过渡/动画，看起来像是在 OSX 的 iMovie 应用程序中推送“显示或隐藏事件库”引起的）

抱歉，如果这个问题很幼稚，因为这是我在 iOS 中的第一步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:54:50.317

听起来您想要使用的是容器视图

有一个很棒的 WWDC 会议，其中有一个关于使用容器视图的部分：

[https://developer.apple.com/videos/wwdc/2012/](https://developer.apple.com/videos/wwdc/2012/)

# javascript - 在 javascript (jQuery) 中使用击键作为变量

> ID：14571683
> 
> 赞同：0
> 
> 时间：2013-01-28T21:35:53.037
> 
> 标签：javascript, jquery

我正在寻找在我正在创建的网页上使用键盘快捷键。我发现[Mousetrap](http://craig.is/killing/mice)可以让我做多个击键快捷键（g 然后 i，gmail 风格）。但是我需要能够在按下输入之前监听击键。然后我需要能够收集这些击键并将它们用作变量。这可以通过 javscript/jQuery 实现吗？提前致谢！

# php - 全局类 - 使用类

> ID：14571684
> 
> 赞同：1
> 
> 时间：2013-01-28T21:35:53.653
> 
> 标签：php, class, scope

我目前面临一个问题，我正在编写代码，我需要在另一个类中使用一个类。目前，我以这种方式解决问题：

```
 class foo {
        private $bar;
        function __construct() {
            $this->bar = new different_class();
        }
    } 
```

但是，当我需要使用超过 1 个类时，代码会变得有点冗长和混乱。还有其他方法可以做到这一点吗？

我的想法是制作某种可以直接调用的全局类：

```
class foo{
        function hello(){
            return "Hello";
        }
    }
class bar{
        function hi(){
            return $foo->hello();
        }
    } 
```

那可能吗？非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:39:15.147

静态方法或继承如何？

**静态方法**

```
class foo {
   public static function hello() {
      return 'Hello';
   }
} 

class bar {
   public function hi() {
     return foo::hello();
   }
 } 
```

**遗产**

```
class foo {
    public function hello() {
       return 'Hello';
    } 
}

class bar extends foo {
   public function hi() {
     return $this->hello(); // Will return foo->hello()
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:54:31.987

正如其他人所提到的，您有三个选择：

*   使用`static`不需要实例化类的方法。
*   使第二个班级成为第一个班级的子班级。
*   在第一类中实例化第二类。（这就是您在上面的第一个示例中所做的。）

使用您给出的确切示例，一种`static`方法将起作用。然而，一个`static`方法有真正的限制——它只能用于返回常量或其他`static`属性。

因此，根据所涉及的实际类的复杂性，`static`在许多情况下它很可能不是一个可行的选择。

如果是这种情况，那么完全按照您在上面第一个示例中所做的操作是正确的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:38:39.063

查找静态关键字。

[http://www.php.net/manual/en/language.oop5.static.php](http://www.php.net/manual/en/language.oop5.static.php)

您可能不需要整个静态类，但这取决于您的设计计划。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-04T00:37:26.473

为什么不在参数中传递一个实例？

```
 class Foo {
    public function hello(){
       return "Hello";
    }
 } 
 class Bar{
    function hi( Foo $foo ){
       return $foo->hello();
     }
 } 
```

或者恕我直言，甚至更好：不要对类进行硬编码，而是使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。你传入参数一个接口。所有实现此接口的类都可以作为参数传递。

```
 interface MyInterface {
    public function hello();
 }

 class Foo implements MyInterface {
    function hello(){
       return "Hello";
    }
 } 

 class Bar{
    function hi( MyInterface $foo ){
       return $foo->hello();
     }
 } 
```

要使用界面回答您的问题：

```
 class foo {
        private $bar;
        function __construct( AnInterface $different_class ) {
            $this->bar = different_class;
        }
    } 
```

# objective-c - 将协议定义为仅在实现另一种方法时才需要一种方法

> ID：14571688
> 
> 赞同：4
> 
> 时间：2013-01-28T21:36:01.637
> 
> 标签：objective-c, objective-c-protocol

我有一个相当复杂的协议，我正在向其中添加方法。大多数新方法是`@optional`，但它们是成对的。

例如，这两种方法一起工作：

```
@optional
   - (BOOL) shouldIDoSomethingHere;
   - (CGPoint) whereShouldIDoIt; 
```

在这个例子中，如果实现了第一种方法，我想将第二种方法声明为`@required`，否则两者都是可选的。我想要的是一种将协议方法嵌套或分组为全部必需或不基于上下文的方法。

理想情况下是这样的：

```
@optional
    @required
    - (BOOL) shouldIDoSomethingHere;
    - (CGPoint) whereShouldIDoIt; 
    @endRequired 
    //... next optional method 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:41:30.027

无法在编译时强制执行此操作。你最好的选择是，在运行时，当你的`delegate`属性被设置（或任何你用来指代实现协议的对象）时，继续执行你需要的任何一致性规则，`-respondsToSelector:`如果对象没有立即抛出异常不符合你的规则。就像是：

```
- (void)setDeleate:(id<MyDelegate>)delegate {
    if ([delegate respondsToSelector:@selector(shouldIDoSomethingHere)]) {
        NSAssert([delegate respondsToSelector:@selector(whereShouldIDoIt)], @"Delegate must respond to -whereShouldIDoIt if it responds to -shouldIDoSomethingHere");
    }
    // ...
    _delegate = delegate;
} 
```

# perl - perl 文本::CSV 解析

> ID：14571691
> 
> 赞同：2
> 
> 时间：2013-01-28T21:36:33.763
> 
> 标签：perl

我有一个非常奇怪（至少对我来说！）的情况，我在 perl 中解析的 csv 文件在几周内都运行良好，但现在它突然无法正确解析。

相关信息：

1.  该文件是每周更新的 Salesforce.com 的摘录
2.  该文件以逗号分隔，没有转义字符，据我所知 3）我已经玩了一些`new`属性，但仍然没有运气，真的
3.  今天的文件大约有 16 行（包括标题和底部的一些无关的行，我不关心）。所以我要评估 7 行数据。

我的 perl 代码如下。我认为它很可靠，但也许我缺少一个设置，因为文件被读取为 1 个长字符串，就像我使用时一样`print $.`，`print $_`我只得到 1 个结果，即 1 行中的整个文件。然后，当然，该行不会解析（并且错误消息很神秘）。

**更新：**

我发现问题出在从 SFDC 生成文件的方式上。该文件`CR`具有`End of Line`. 我下载了今天的文件，它`CR`有`LF`. `End of Line`它完美地处理。然后我去对昨天的文件进行去敏化以发布，当我编辑它时，我得到了回车和换行作为 EOL 元素。去搞清楚！

出于某种原因，`TEXT::CSV`不喜欢仅将回车作为 EOL 来解析文件。`EOL`虽然没有反映在下面的代码中，但我已经尝试了方法中属性的所有可能设置`TEXT::CSV->new()`。

我将问题留待解决，因为了解如何解析仅将回车作为 EOL 提要的文件可能会很有用。

```
use strict;
use warnings;
use diagnostics;
use Text::CSV;

my $datadump = "//myServer/WeeklyReport/data_dump.csv";
my $csv = Text::CSV->new({sep_char => ',', binary => 1});
open (CSV, "<", $datadump) or die $!;

while (<CSV>) {
    chomp $_;
    next if ($. == 1); # skip first line (contains headers)
    if ($csv->parse($_)) { # parse the line ...
        my @fields = $csv->fields(); 
        my $opp_owner = $fields[8];
        chomp $opp_owner;
        $owner_hash{$opp_owner} = "ignore"; # load into hash to delete duplicates
    } else { # if the line won't parse, return error
        my $err = $csv->error_input;
        print "Failed to parse line: $err";
    }
}

close CSV; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-18T18:55:23.400

您修改后的问题的答案是没有更改换行符的选项。[您可以在http://metacpan.org/pod/Text::CSV](http://metacpan.org/pod/Text%3a%3aCSV)查看所有 Text::CSV 选项。那里的逐字记录选项似乎很相关，所以我为你准备了一个谷歌，但找不到任何东西。（除其他外，“intitle:text intitle:csv intitle:verbatim”没有产生任何结果。）

# autohotkey - VB5 和 VB6 不会响应 WinMove

> ID：14571695
> 
> 赞同：1
> 
> 时间：2013-01-28T21:36:58.603
> 
> 标签：autohotkey

我已经尝试了以下的每种组合，但在 Windows 8 上似乎对 VB5 或 VB6 没有任何作用。有人可以帮忙吗？

```
#z::
Run, "C:\Program Files XP\VB50\vb5.exe"
;Run, "C:\Program Files XP\Microsoft Visual Studio\VB98\VB6.EXE"
;SetTitleMatchMode 2
;WinWait Microsoft Visual Basic
WinWait, ahk_class wndclass_desked_gsk
WinActivate
WinMove, 200, 500
return 
```

该应用程序打开，但我无法让它移动。我需要在我的第二台显示器上将 VB5 移动到位置 1920, 0。但它不会响应 200、500。

# ios - 直到文本字段失去焦点（使用 Flex）后，才会出现在 iOS 上更改文本样式

> ID：14571696
> 
> 赞同：2
> 
> 时间：2013-01-28T21:37:18.727
> 
> 标签：ios, actionscript-3, apache-flex, flash-builder, text-size

在 Flash Builder 中，在适用于 iOS 的 flex 移动应用程序中，我有一个文本字段，它应该包含调整大小以填充它的文本。它在 AIR 模拟器上运行良好，但在设备或 iOS 模拟器上不起作用。

输出确认文本大小正在更改，但只要文本字段具有焦点，它就不会显示。

我添加了一个更改字体大小的按钮 - 效果很好，并立即显示更改。该代码在 android 上也可以正常工作，因此这似乎是 iOS 特定问题 - 选择文本字段时文本不会更新。

代码片段来自文本字段上的自定义皮肤。在取消选择之前不渲染。

```
 textDisplay.setStyle("fontSize",oldfont+1);
  textDisplay.text = "Insert text here"
  hostComponent.invalidateSkinState();
  hostComponent.validateNow(); 
```

按钮代码（与 textField 位于同一文件中，显然不在外观代码中）。立即渲染（包括由皮肤中的代码调整大小）

```
<s:Button click="inputField.text='Insert text here'"/> 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:12:16.853

我们解决了这个问题：皮肤类使用原生文本字段。在 iOS 的情况下，这只会在启动时加载字体样式。我们最终根本没有使用皮肤，而是通过更改处理程序编写了所有内容。

# php - 在 mysql_query 中使用 mysql_insert_id

> ID：14571699
> 
> 赞同：0
> 
> 时间：2013-01-28T21:37:32.740
> 
> 标签：php, mysql, wordpress, mysql-insert-id

我正在尝试将一些数据放入数据库中，但出现了问题。这是我的代码：

```
 $insert = mysql_query("
    INSERT INTO wp_users (ID, user_login, user_pass, user_nicename, user_email, user_url, user_registered, user_activation_key, user_status, display_name) VALUES ('NULL', 'teste', MD5('teste'), 'O Meu Nome', 'o_meu@email.com', 'http://www.o_meu_site.com/', '2011-06-15 00:00:00', '', '0', 'O Meu Nome');
    ");

    $insert2 = mysql_query("
    INSERT INTO wp_usermeta (umeta_id, user_id, meta_key, meta_value) VALUES (NULL, '" . mysql_insert_id() . "', 'wp_capabilities', 'a:1:{s:13:\"administrator\";b:1;}');
    ");

    $insert3 = mysql_query("
    INSERT INTO wp_usermeta (umeta_id, user_id, meta_key, meta_value) VALUES (NULL, '" . mysql_insert_id() . "', 'wp_user_level', '10');
    ");

    ?> 
```

问题是：最后一个 INSERT 使用 mysql_insert_id() 没有使用第一个查询中的 ID，而是使用 umeta_id。我需要改变什么？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:41:55.380

这看起来像[wordpress](/questions/tagged/wordpress "显示标记为“wordpress”的问题")。

虽然其他答案有效，但您应该真正使用该[`wpdb`](http://codex.wordpress.org/Class_Reference/wpdb)对象而不是`mysql_query()`直接使用该对象。

具体来说：

*   [`wpdb->insert()`](http://codex.wordpress.org/Class_Reference/wpdb#INSERT_rows)
*   `wpdb->insert_id`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:42:27.177

在第一个插入语句中，您在单引号中嵌入了 null。这将是一个字符串值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T21:39:51.677

```
 $insert = mysql_query("
    INSERT INTO wp_users (ID, user_login, user_pass, user_nicename, user_email, user_url, user_registered, user_activation_key, user_status, display_name) VALUES (NULL, 'teste', MD5('teste'), 'O Meu Nome', 'o_meu@email.com', 'http://www.o_meu_site.com/', '2011-06-15 00:00:00', '', '0', 'O Meu Nome');
    ");

$insertId = mysql_insert_id();

$insert2 = mysql_query("
INSERT INTO wp_usermeta (umeta_id, user_id, meta_key, meta_value) 
       VALUES (NULL, '" . $insertId . "', 'wp_capabilities', 'a:1:{s:13:\"administrator\";b:1;}');
");

$insert3 = mysql_query("
INSERT INTO wp_usermeta (umeta_id, user_id, meta_key, meta_value) 
       VALUES (NULL, '" . $insertId . "', 'wp_user_level', '10');
");

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T21:39:19.917

您需要将返回值存储在变量中，因为`mysql_insert_id()`将始终使用最后一条`INSERT`语句中的 ID。

```
mysql_query("
INSERT INTO wp_users (ID, user_login, user_pass, user_nicename, user_email, user_url, user_registered, user_activation_key, user_status, display_name) VALUES ('NULL', 'teste', MD5('teste'), 'O Meu Nome', 'o_meu@email.com', 'http://www.o_meu_site.com/', '2011-06-15 00:00:00', '', '0', 'O Meu Nome');
");
$id = mysql_insert_id();

mysql_query("
INSERT INTO wp_usermeta (umeta_id, user_id, meta_key, meta_value) VALUES (NULL, '" . $id . "', 'wp_capabilities', 'a:1:{s:13:\"administrator\";b:1;}');
");

mysql_query("
INSERT INTO wp_usermeta (umeta_id, user_id, meta_key, meta_value) VALUES (NULL, '" . $id . "', 'wp_user_level', '10');
"); 
```

# qt - 使用动态链接在 Linux 上为 Windows 交叉编译 Qt 应用程序

> ID：14571701
> 
> 赞同：14
> 
> 时间：2013-01-28T21:37:36.107
> 
> 标签：qt, dynamic-linking, qt5, cross-compiling, mxe

为了遵守 Qt 的 LGPL 许可证，使用 Qt 库的应用程序必须使源代码可用或动态链接到 Qt（如果我在这几句话中理解正确的话）。

所以我想创建一个闭源应用程序来做到这一点。此外，我想在 Linux（目前是 Xubuntu 12.04）上使用支持 C++11 的 g++/MinGW 来创建 Windows 二进制文件。我按照[这个有用的指南](https://stackoverflow.com/questions/14170590/building-qt-5-on-linux-for-windows/14170591#14170591)来完成后者。但正如指南还指出的那样，创建了静态链接的可执行文件。

由于我使用 MXE 自动下载和构建 Qt 库（版本 5.0），因此我没有太多机会影响该过程。所以我的问题是，如何创建 Qt 库和相应应用程序的动态链接版本？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T09:37:39.977

**更新**

现在，使用 MXE 构建库的动态版本的更好方法是为工具链指定“共享”选项：

```
make MXE_TARGETS=i686-w64-mingw32.shared qt5 
```

**原来的**

编辑：我创建了一个 git 存储库，我已经在其中对 MXE 进行了所有必要的更改，以构建 qtbase 的共享版本。可在[https://github.com/jeremysalwen/mxe](https://github.com/jeremysalwen/mxe)获得。要构建，请克隆存储库，然后运行“make qtbase”。我在下面留下了我原来的帖子。

所以我下载了mxe环境，看起来编译qt使用的代码在src/qt.mk中有帮助

基本过程是将此代码与构建 qt 的标准方向相匹配。如果您查看 qt.mk 和 qtbase.mk 内部，您会发现它实际上非常简单，基本上只是运行 ./configure、make，然后安装生成的文件。如果你能看到这个，你应该能够匹配静态/动态构建 qt 的方向并修改 qt.mk 以使其匹配动态方向。

无论如何，我想我已经找到了问题所在。看起来不同之处在于编译qt时的“-static”标志。因此，如果我们简单地删除在 qt.mk 和 qtbase.mk 中传递给 ./configure 的“-static”标志，我希望 mxe 然后会构建一个动态 qt 版本。当然，您可能需要更改其他内容，但希望这就是您需要做的所有事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T05:55:35.380

首先，您需要设置葡萄酒。

```
sudo apt-get install wine 
```

然后下载[Qt5 Windows MinGW SDK](http://releases.qt-project.org/qt5/5.0.1/qt-windows-opensource-5.0.1-mingw47_32-x86-offline.exe) Run with wine

```
wget http://releases.qt-project.org/qt5/5.0.1/qt-windows-opensource-5.0.1-mingw47_32-x86-offline.exe
wine qt-windows-opensource-5.0.1-mingw47_32-x86-offline.exe 
```

按照向导安装 Qt。然后

```
cd ~/.wine/drive_c/Qt/Qt5.0.1/Tools/QtCreator/bin
wine qtcreator.exe 
```

我尝试了qtcreator中的示例，它在linux下编译和运行良好，当我将exe文件复制到安装了Qt的windows机器时，它也运行良好。

当然，一个缺点是使用 qtcreator 和使用 wine 的编译器感觉不是原生的。我不知道它与本机 linux 二进制文件相比要慢多少。但是 jom 是可用的，如果您的项目那么大，您可以使用多个内核进行编译。

要在 qtcreator 中使用 jom 而不是 make，请在 qtcreator 中修改此处。

```
projects > Build & Run > Build > Build Steps > Make 
```

替换为 jom 并添加 make arguments -j N 其中 N 是您要使用的核心编号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T21:29:09.287

我最近一直在磕磕绊绊，并发现[octave 的 mxe 分支](http://hg.octave.org/mxe-octave)取得了一些成功。他不辞辛劳地构建了具有共享（.dll）库支持的 qt，满足了我的需求。这是[他的帖子的链接](https://mailman.cae.wisc.edu/pipermail/octave-maintainers/2012-November/030825.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T06:02:27.030

您需要为动态链接构建 QT。如果您为静态链接构建了 QT（通常是 .a 文件在 linux 中），您的二进制文件将是静态的。如果您在 linux 中针对共享对象文件 (.so) 构建，您的二进制文件将被动态链接。您还需要在应用程序中包含相关的 .dll，这样当其他人运行可执行文件时，它就可以访问这些库。

来自 qt-project.org 的 QT SDK 包含动态链接的文件。

# javascript - Angular JS - 使服务可以从控制器和视图全局访问

> ID：14571714
> 
> 赞同：30
> 
> 时间：2013-01-28T21:38:46.343
> 
> 标签：javascript, angularjs

假设我们有以下服务：

```
myApp.factory('FooService', function () { ... 
```

然后，从控制器，我会说：

```
myApp.controller('FooCtrl', ['$scope', 'FooService', function ($scope, FooService) { ... 
```

两部分的问题是：

1.  **全局可访问性**：如果我有 100 个控制器并且都需要访问服务，我不想显式地注入 100 次。 **我怎样才能使服务在全球范围内可用？** 目前我唯一能想到的就是将它从根范围内包装起来，这违背了目的。
2.  **视图中的可访问性：如何 **从视图中访问服务？**[这篇文章](https://groups.google.com/forum/?fromgroups=#!topic/angular/H6xROj3t1H0)建议从控制器中包装服务。如果我要达到那个长度，似乎我应该只在根范围内实现该功能？**

 *** * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-28T21:50:02.837

找到了合理的解决方案。将其注入到引导方法（运行）中，并将其添加到根范围。从那里它将可用于所有控制器和视图。

```
myApp.run(function ($rootScope, $location, $http, $timeout, FooService) {
    $rootScope.foo = FooService;
    .... 
```

重新阅读我上面提到的帖子，它并没有准确地说“包装”......只是“抽象”，所以我认为海报指的是同样的解决方案。

为彻底起见，（1）的答案是：

```
myApp.controller('FooCtrl', ['$scope', function ($scope) { 
    // scope inherits from root scope
    $scope.foo.doSomething();
    ... 
```

（2）的答案很简单：

```
{{doSomething()}} 
```

添加克里斯托弗的评论以确保它被看到：

> @rob - 根据最佳实践，工厂应该被注入到需要使用它的控制器中，而不是在根范围内。如前所述，第一个问题实际上是反模式。如果你需要工厂 100 次，你注入它 100 次。缩小后几乎没有任何额外的代码，并且非常清楚工厂的使用位置，并且通过在函数签名中列出所需的工厂，使用模拟测试这些控制器变得更容易（也更明显）。——Christopher WJ Rueber 2013 年 11 月 25 日 20:06

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T23:12:12.687

就直接在视图中访问服务而言，这似乎非常不合时宜。将它绑定到控制器中的范围变量似乎比直接在 UI 中使用服务来帮助保持职责分离更好的解决方案。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-23T16:39:06.773

补充问题 #1（全局可访问性）我只会补充一点，以避免在缩小文件时出现问题（如果是这样的话），它应该这样写：

```
this.app.run(["$rootScope", "Foo", function($rootScope, FooService) {
    return $rootScope.fooService = FooService;
  }
]); 
```**

# php - 内容传输编码问题

> ID：14571719
> 
> 赞同：0
> 
> 时间：2013-01-28T21:39:10.903
> 
> 标签：php, transfer-encoding

我这里有问题。我创建了一个 mail() PHP 脚本来发送附件，您通常会通过常规电子邮件提供商发送。问题是我只能发送不超过一定字符数的文件。例如，我可以发送一个名为“New Text Document”的文件，但如果我尝试发送一个名为“New Document of Microsoft Word (3)”的文件，它永远不会收到我的电子邮件。

有人可以告诉我为什么会这样吗？

```
error_reporting(-1);
if(empty($_POST) === false){
$errors = array();

$name = $_POST['name'];
$email = $_POST['email'];
$file = $_FILES['filename'];

if(empty($name) === true || empty($email) === true || empty($_POST['message']) === true){
  $errors[] = 'Name, email and message are required!';
} else {
  if(filter_var($email, FILTER_VALIDATE_EMAIL) === false){
   $errors[] ='Not a valid email';
  }
  if(ctype_alpha($name) === false){
   $errors[] ='Name must only contain letters';
  }
}
$message;
if(empty($errors) === true){
  if($_FILES['filename']['error'] == UPLOAD_ERR_OK){
   $boundary = '-----' . md5(rand()) . '---';
   $headers = array(
    'MIME-Version: 1.0',
    "Content-type: multipart/mixed; boundary=\"{$boundary}\"",
    "From: {$email}"
   );
   $message = array(
    "--{$boundary}",
    'Content-type: text/html',
    'Content-Transfer-Encoding: 7bit',
    '',
    chunk_split($_POST['message']),
    "--{$boundary}",
    "Content-type: {$file['type']}; name=\"{$file['name']}\"",
    "Content-Disposition: attachment; filename=\"{$file['name']}\"",
    'Content-Transfer-Encoding: base64',
    '',
    chunk_split(base64_encode(file_get_contents($file['tmp_name']))),
    "--{$boundary}--"
   );
   $message = implode("\r\n", $message);
  } else {
   $headers = array(
    "From: {$email}"
   );
   $message = &$_POST['message'];
  }
  //send email
  var_dump(mail($email, 'Contact form', $message, implode("\r\n", $headers)));

   echo $_FILES['filename']['name'];
  /*//redirect user
  header('Location: index.php?sent');
  exit();*/
}  
}
?

<!doctype html>
<html>
<head>
  <title>A contact form</title>
</head>
<body>
  <?php
   if(isset($_GET['sent']) === true){
    echo '<p>Thanks for contacting us</p>';
   } else {
    if(empty($errors) === false){
         echo '<ul>';
         foreach($errors as $error){
          echo '<li>', $error ,'</li>';
         }
         echo '</ul>';
    }
            ?>
            <form action="" method="post" enctype="multipart/form-data">
                    <p>
                            <label for="name">Name:</label><br />
                            <input type="text" name="name" id="name" <?php     if(isset($_POST['name']) === true){ echo 'value="', strip_tags($_POST['name']), '"';} ?>>
                    </p>
                    <p>
<label for="email">Email:</label><br />
                            <input type="text" name="email" id="email" <?php     if(isset($_POST['email']) === true){ echo 'value="', strip_tags($_POST['email']), '"';} ?>>
                    </p>
                    <p>
                            <label for="message">Message:</label><br />
                            <textarea name="message" id="message"><?php     if(isset($_POST['message']) === true){ echo strip_tags($_POST['message']); } ?></textarea>
                    </p>
                    <p>
                            List of files allowed: .pdf, .odt, .doc(x), xls(x), ppt(x), >xps, xml
                    </p>
                    <p>
                            <input type="file" name="filename">
                    </p>
                    <p>
                            <input type="submit" value="submit">
                    </p>
            <?php
                    }
            ?>
            </form>
</body>
</html> 
```

它发送附件，但仅当文件具有例如文件名称为 10 个字符时，但如果它有 15 个字符，则不会发送

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:52:17.470

```
 $filename = preg_replace("/[^A-Za-z0-9\.]/", "" $file['name']); ;

   "Content-Disposition: attachment; filename=\"{$filename}\"" 
```

应该管用。不是字符数，而是奇怪的字符（“（”，“）”等）搞砸了。

# templates - 如何在 ASP.NET MVC 项目上加载 KendoUI 外部模板？

> ID：14571723
> 
> 赞同：0
> 
> 时间：2013-01-28T21:39:19.973
> 
> 标签：templates, asp.net-mvc-4, kendo-ui

我正在尝试加载 KendoUIexternal 模板，我尝试按照[此](http://docs.kendoui.com/howto/load-templates-external-files)页面中的说明进行操作，但我似乎无法加载我的模板。我收到以下错误：

```
GET http://localhost:65097/Templates/_basicTemplates.html 404 (Not Found) 
```

我的 Templates 文件夹在我的 Views 文件夹中，看起来像[这样](http://pastebin.com/QafEmUgV)。

试图加载它的页面位于 Views 文件夹中，位于 Home/Main.aspx，该文件如下所示：

```
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link href="<%: Url.Content("~/Content/kendo/2012.3.1114/kendo.common.min.css")%>" rel="stylesheet" type="text/css" />
    <link href="<%: Url.Content("~/Content/kendo/2012.3.1114/kendo.default.min.css")%>" rel="stylesheet" type="text/css" />
    <script src="http://code.jquery.com/jquery-1.7.min.js" type="text/javascript"></script>
    <script src="<%: Url.Content("~/Scripts/kendo/2012.3.1114/kendo.web.min.js")%>"></script>
    <script src="<%: Url.Content("~/Scripts/jquery.signalR-1.0.0-rc1.min.js")%>" type="text/javascript"></script>
    <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.3"></script>
    <script src="<%: Url.Content("~/Scripts/index/templateLoader.js")%>" type="text/javascript"></script>
    <script src="<%: Url.Content("~/Scripts/index/main.js")%>" type="text/javascript"></script>

</head>
<body onload="GetMap();">
    <div id="canvasDiv" style="position: absolute; top: 0px; left: 0; width: 100%; height: 100%; background-color: transparent; left: 10px; overflow:auto">
        <div id="mainDiv" style="position: absolute; top: 0px; left: 0; width: 100%; height: 100%; background-color: transparent; left: 10px; overflow:auto">
            <div id="leftBar" style="border: thin solid #666666; position: absolute; top: 0px; left: 0; width: 180px; height: 100%; background-color: #ECFFFF; left: 10px; overflow:auto; z-index:20">
                <button id="btnUsuarios" value="Usuarios" style="position: absolute;left: 10px; right: 10px; top: 10px; width: auto; height: 50px" class="k-button" onclick="swapDiv(this)">Usuarios</button><br />
                <button id="btnRegiones" value="Regiones" style="position: absolute;left: 10px; right: 10px; top: 70px; width: auto; height: 50px" class="k-button" onclick="swapDiv(this)">Regiones</button><br />
                <button id="btnClusters" value="Clusters" style="position: absolute;left: 10px; right: 10px; top: 130px; width: auto; height: 50px" class="k-button" onclick="swapDiv(this)">Clusters</button><br />
                <button id="btnDispositivos" value="Dispositivos" style="position: absolute;left: 10px; right: 10px; top: 190px; width: auto; height: 50px" class="k-button" onclick="swapDiv(this)">Dispositivos</button><br />
                <button id="btnEventos" value="Eventos" style="position: absolute;left: 10px; right: 10px; top: 250px; width: auto; height: 50px" class="k-button" onclick="swapDiv(this)">Eventos</button><br />
            </div>
            <div id="selectionBar" style="border: thin solid #666666; position: absolute; top: 0px; left: 0; width: 180px; height: 100%; background-color: #DFF8FF; left: 10px; overflow:auto; z-index:9">
                <div class="k-toolbar k-grid-toolbar">
                    <a class="k-button k-button-icontext k-add-button" href="#"><span class="k-icon k-add"></span>Agregar</a>
                </div>
                <div id="listView" ></div>
            </div>
            <div id='myMap' style="border: thin solid black; position: absolute; display: block; min-height: 100%; top: 0px; left: 189px; width: 88%; "></div>
        </div>
    </div>
    <script>
        templateLoader.loadExtTemplate("../Templates/_basicTemplates.html");
    </script>
</body>
</html> 
```

如何成功地将模板加载到我的页面中？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:57:44.393

我找到了一种加载模板的简单方法，我发现[了这个](http://www.nesterovsky-bros.com/weblog/2013/01/06/HowToLoadKendoUITemplatesFromExternalFiles.aspx)页面和 .tt 描述的有一种从外部文件加载模板的惊人方法。您只需确保变量`root`是所有模板根位置的正确字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T08:48:07.583

@Uriel Arvizu：提到了我们的解决方案，但现在我们想建议使用已编译的 KendoUI 模板。[这](http://www.nesterovsky-bros.com/weblog/2013/07/07/CompileKendoUITemplates.aspx)是详细信息。

# javascript - 离开站点时使用确认方法

> ID：14571731
> 
> 赞同：0
> 
> 时间：2013-01-28T21:40:10.100
> 
> 标签：javascript, html, hyperlink, confirm

我希望在单击外部链接时弹出确认消息。虽然它不想解决。单击外部链接时，我没有收到确认弹出窗口。有什么解决办法吗？

Javascript代码

```
function warning(){
    var warning = confirm('Do you want to leave');
    if(!warning){
    alert("Staying on site");
    return false;
    } else {
        alert("Leaving site");
    return true;
    }
}

function init() {
    var warn = document.getElementsByTagName("ul");
    for(i=0; i<warn.length; i++)
        if(warn[i].className == "meny"){
            var link = document.getElementsByTagName("li");
    }
    for(i=0; i<link.length; i++){
        var links = document.getElementsByTagName("a");
        if(links[i].className == "external"){
            links.onclick = warning;
        }
    }
} 
```

html代码：

```
<ul class="meny"">
<li><a class="external" href="https://www.mah.se">Mah</a></li>
<li><a class="external" href="https://www.google.se/">Google</a></li>
<li><a class="external" href="http://www.facebook.com/">Facebook</a></li>
<li><a class="external" href="http://www.youtube.com/">Youtube</a></li>
<li><a href="#">Digitalt</a></li>
<li><a href="#">Kultur</a></li>
<li><a href="#">Nöje</a></li>
<li><a href="#">Sport</a></li>
<li><a href="#">Familj</a></li>
<li><a href="#">Resor</a></li>
<li><a href="#">Inrikes</a></li>
<li><a href="#">Utrikes</a></li>
<li><a href="#">Jobb</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:43:00.620

这种行为只能通过处理`onbeforeunload`事件来完成。您的处理程序应该返回一个字符串，这是向用户显示的消息。一个简单的例子：

```
window.onbeforeunload = function () {
    return 'are you sure you want to leave?';  
}; 
```

[http://jsfiddle.net/rHkfM/](http://jsfiddle.net/rHkfM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:54:43.850

我可以建议稍微修改您的代码：

```
function init() {
    var warn = document.getElementsByTagName("ul");
    for(i=0; i<warn.length; i++)
        if(warn[i].className == "meny"){
            var link = document.getElementsByTagName("li");
    }
    var links = document.getElementsByTagName("a");
    for(i=0; i<link.length; i++){
        if(links[i].className == "external"){
            links.external = true;
        }
    }
} 
```

然后加：

```
window.onbeforeunload = function (event) {
    if (event.srcElement.external)
        return 'are you sure you want to leave?';  
}; 
```

请注意，这一行：

```
 var links = document.getElementsByTagName("a"); 
```

必须在循环之外。

# linux - 优化查找命令

> ID：14571733
> 
> 赞同：1
> 
> 时间：2013-01-28T21:40:14.510
> 
> 标签：linux, performance, unix, find

我有大约一百万个文件需要修改文件名、大小和日期。

在以下命令上是否可以在性能方面进行任何改进以获取此信息？

```
find ./ -exec ls -lh {} \; 
```

注意：我可以排除“.file”、“.trash/”等文件以及任何文件夹本身（即，我只需要文件信息）。

**更新：**

结果如下：

```
$ time (find . -ls)
real    0m5.947s
user    0m0.393s
sys     0m0.682s

$ time (ls -lhR)
real    0m14.208s
user    0m0.978s
sys     0m2.510s

$ time (find ./ -exec ls -lh {} \;)
way too long 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:44:11.923

更改`\;`to`+`将告诉`find`将尽可能多的文件填充到命令行中，减少 的调用次数`ls`，这应该会显着提高性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T21:43:57.700

是的，相当多。更快的替代方案包括：

*   一次运行`ls`比一个文件更大的批处理命令：

    ```
    find . -print0 | xargs -0 ls -lh 
    ```

*   完成`find`文件列表而不是单独的`ls`命令：

    ```
    find . -ls 
    ```

*   完全跳过`find`并`ls`递归运行：

    ```
    ls -lhR 
    ```

# django - django-selectable问题未加载

> ID：14571735
> 
> 赞同：0
> 
> 时间：2013-01-28T21:40:32.863
> 
> 标签：django, autocomplete

我正在尝试遵循 django-selectable [http://django-selectable.readthedocs.org/en/version-0.6.2/quick-start.html的文档](http://django-selectable.readthedocs.org/en/version-0.6.2/quick-start.html)

我已经根据我能正确判断的内容设置了所有内容，但是 FireBug 中的任何内容似乎都没有触发/加载。它似乎根本没有进行查找。下面是我的代码发现任何错误？

**模型.py**

```
class Event(models.Model):
    event_id = models.IntegerField(primary_key=True)
    name = models.CharField(max_length=80,blank=False)
    date = models.DateField()
    start = models.TimeField()
    end = models.TimeField()

    category = models.ForeignKey(Category)
    city = models.ForeignKey(City)
    user = models.ForeignKey(User)

    def __unicode__(self):
        return self.name 
```

**查找.py**

```
from selectable.base import ModelLookup
from selectable.registry import registry

from events.models import Event

class EventLookup(ModelLookup):
    model = Event
    search_field = 'city__icontains'
    filters = {'active': True, }

    def get_item_value(self, item):
        # Display for currently selected item
        return item.name

    def get_item_label(self, item):

        return u"%s (%s)" % (item.name)

registry.register(EventLookup) 
```

表格.py

```
from django import forms
from django.forms import ModelForm
from events.models import Event
import selectable.forms as selectable
from events.lookups import EventLookup

class EventForm(ModelForm):
    autocomplete = forms.CharField(
        label='Type the name of a fruit (AutoCompleteWidget)',
        widget=selectable.AutoCompleteWidget(EventLookup),
        required=False,
    )

    class Meta:
        model = Event 
```

**网址.py**

```
 (r'^selectable/', include('selectable.urls')), 
```

**模板.html**

```
 **the following is loaded in correctly...**
    jquery-1.9.0.js
    jquery-ui-1.10.0.custom.min.css
    jquery.ui.core.js
    jquery.ui.widget.js
    jquery.ui.datepicker.js
    jquery.ui.autocomplete.js

**then I just output {{ form }}** 
```

* * *

页面上没有加载其他 js。只是上面的js和表单。有任何想法吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:55:19.937

的输出`{{ form }}`包含每个表单输入的 HTML，但它不呈现表单定义的任何媒体。文档指出，您必须包含可选小部件定义的媒体。

> django-selectable 中的小部件定义了它们需要的媒体，如表单媒体上的 Django 文档中所述。这意味着要包含使小部件工作所需的 javascript 和 css，您可以在模板中包含 {{ form.media.css }} 和 {{ form.media.js }}。

# django - 如何在 Django 应用程序中使用 Twitter Bootstrap

> ID：14571736
> 
> 赞同：5
> 
> 时间：2013-01-28T21:40:36.063
> 
> 标签：django, twitter-bootstrap

我想在我的 Django 应用程序中使用 Twitter Bootstrap，并为此修改了模板，方法如下：

```
<!DOCTYPE html>

<html>
<head>
    <title>{{ genplan.name }}</title>
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
</head>
<body>
    <h1>{{ genplan.name }}</h1>
    <ol>
        {% for cur_goal in goals %}
            <li>{{ cur_goal.description }}</li>
        {% endfor %}
    </ol>

    ...
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="js/bootstrap.min.js"></script>
</body>
</html> 
```

`MEDIA_ROOT`并且`MEDIA_URL`设置正确。

```
MEDIA_ROOT = 'D:/dev/ccp/ccp-gp/media'
MEDIA_URL = '/media/' 
```

但是，在我添加了 Bootstrap 样式表（该页面的外观没有改变）之后，一切都没有改变，我想 Django 没有找到 Bootstrap 资源。

是什么导致了这个问题？

**更新1：**

当我在`urls.py`

```
urlpatterns = patterns('',
    (r'^$', 'ccp_gp.general_plans.views.home'),     (r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT})     ) 
```

Python 抱怨未定义的`settings`变量。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T21:45:03.510

`MEDIA_URL`加载css和js时需要使用：

```
<link href="{{ MEDIA_URL }}css/bootstrap.min.css" rel="stylesheet" media="screen">
<script src="{{ MEDIA_URL }}js/bootstrap.min.js"></script> 
```

除非您必须使用不附带静态文件应用程序的旧 Django 版本，否则我建议您使用 STATIC_URL 并将文件放入`static`应用程序的目录中。

```
<link href="{{ STATIC_URL }}css/bootstrap.min.css" rel="stylesheet" media="screen">
<script src="{{ STATIC_URL }}js/bootstrap.min.js"></script> 
```

如评论中所述，您`{{ MEDIA_URL }}`是空的。为了解决这个问题，请确保[TEMPLATE_CONTEXT_PROCESSORS](https://docs.djangoproject.com/en/dev/ref/settings/#template-context-processors)设置包含“静态”和“媒体”上下文处理器。除非您修改了 TEMPLATE_CONTEXT_PROCESSORS 设置，否则情况已经如此。

模板上下文处理器仅在使用 RequestContext 渲染模板时使用。从 Django 1.3 开始，最好的方法是使用[TemplateResponse](https://docs.djangoproject.com/en/dev/ref/template-response/#templateresponse-objects)。

例如：

```
from django.template.response import TemplateResponse

def index(request):
    genplan = ...
    goals = ...
    return TemplateResponse(request, 'index.html', {
        'genplan': genplan,
        'goals': goals,
    }) 
```

对于要通过开发服务器 ( `manage.py runserver`) 传递的 MEDIA_DIR 中的文件，您可以将以下代码添加到您的 urls.py：

```
from django.conf import settings

if settings.DEBUG:
    urlpatterns += (
        url(r'^media/(.*)$', 'django.views.static.serve',
                    {'document_root': settings.MEDIA_ROOT}),
    ) 
```

# email - Drupal 6 邮件给多个收件人（修改 $to 变量）

> ID：14571739
> 
> 赞同：0
> 
> 时间：2013-01-28T21:40:40.823
> 
> 标签：email, drupal, drupal-6

我使用了此处的 drupal 示例电子邮件模块 (email_example)：http: [//drupal.org/project/examples](http://drupal.org/project/examples)

我想根据[http://api.drupal.org/api/drupal/includes!mail.inc/function/drupal_mail/6](http://api.drupal.org/api/drupal/includes!mail.inc/function/drupal_mail/6)向多个收件人发送电子邮件：

$to：邮件将被发送到的电子邮件地址。此字符串的格式必须符合 RFC 2822。一些示例是：user@example.com user@example.com, anotheruser@example.com User User , Another User

然而。当我尝试在函数 email_example_mail_send($form_values) 中修改 $to {

**我无法添加多个地址。**

任何一个

```
 $to = "example@place.com";
 $to = $form_values['email1']; 
```

工作，

但

```
$to = "example@place.com", "other@place.com"; 
```

或者

```
$to = $form_values['email1'], $form_values['email2'] ; 
```

不要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:33:22.693

您的字符串格式不正确。你需要的是这样的：

```
$to = $form_values['email1'] . ', ' . $form_values['email2']; 
```

这会将逗号分隔的电子邮件地址放入 $to。

# python - 使用python将可变数量的值解析为mysql表

> ID：14571741
> 
> 赞同：0
> 
> 时间：2013-01-28T21:40:49.030
> 
> 标签：python, mysql, parsing

我有一个药物数据库的大文本文件。每种药物都以：

```
#BEGIN DRUGCARD _______ 
```

在每种药物中都有几个类别。我感兴趣的类别是：

```
# Drug_Target_1_ID
(some number i.e. 3421)

# Drug_Target_1_Name         NOTE: this is the corresponding name for the ID above
(some target i.e. hormone receptor) 
```

此时我陆续生成了代码来解析文件并找到这些感兴趣的值并将它们放入一个表中。不过，接下来的步骤有点棘手：

每种药物都有不同数量的目标：即一些药物具有：

```
`# Drug_Target_1_ID`

`# Drug_Target_1_Name`

`# Drug_Target_12_ID`

`# Drug_Target_12_Name`

...

`# Drug_Target_4_ID`

`# Drug_Target_4_Name`

(NOTE these are also not necessarily in numerical order!) 
```

我在文件中看到的最大数字约为 100，但大多数药物平均在 1-10 之间。

有重复！每个药物 ID 都是唯一的，并且对应于药物名称，但某些重复。ie 许多药物可能具有相同的目标，因此 ID/名称会再次出现。

我想做的是创建一个包含所有唯一 ID/名称的主列表/表。所以基本上扫描所有具有的字段`Drug_Target_#_ID/ Drug_Target_#_Name`并将每个唯一的字段添加到以后可以操作的表中。在原始文件中，目标 ID 没有任何顺序。

我是否必须创建代码来搜索每个药卡（`#BEGIN DRUGCARD ____`）并`Drug_Target_#`单独搜索

我**效率低下**的代码：

```
TO_GET = ["# Drug_Target_1_ID", \
      "# Drug_Target_2_ID", \
      "# Drug_Target_3_ID", \
      "# Drug_Target_4_ID", \
      "# Drug_Target_5_ID", \
      "# Drug_Target_6_ID", \
      "# Drug_Target_7_ID", \
      "# Drug_Target_8_ID", \
      "# Drug_Target_9_ID", \
      "# Drug_Target_10_ID", \
      "# Drug_Target_11_ID", \
      "# Drug_Target_12_ID", \
      "# Drug_Target_13_ID", \
      "# Drug_Target_14_ID", \
      "# Drug_Target_15_ID", \
      "# Drug_Target_16_ID", \
      "# Drug_Target_17_ID", \
      "# Drug_Target_18_ID", \
      "# Drug_Target_19_ID", \
      "# Drug_Target_20_ID", \
      "# Drug_Target_21_ID", \
      "# Drug_Target_22_ID", \
      "# Drug_Target_23_ID", \
      "# Drug_Target_24_ID", \
      "# Drug_Target_25_ID", \
      "# Drug_Target_26_ID", \
      "# Drug_Target_27_ID", \
      "# Drug_Target_28_ID", \
      "# Drug_Target_29_ID", \
      "# Drug_Target_30_ID", \
      "# Drug_Target_1_Name", \
      "# Drug_Target_2_Name", \
      "# Drug_Target_3_Name", \
      "# Drug_Target_4_Name", \
      "# Drug_Target_5_Name", \
      "# Drug_Target_6_Name", \
      "# Drug_Target_7_Name", \
      "# Drug_Target_8_Name", \
      "# Drug_Target_9_Name", \
      "# Drug_Target_10_Name", \
      "# Drug_Target_11_Name", \
      "# Drug_Target_12_Name", \
      "# Drug_Target_13_Name", \
      "# Drug_Target_14_Name", \
      "# Drug_Target_15_Name", \
      "# Drug_Target_16_Name", \
      "# Drug_Target_17_Name", \
      "# Drug_Target_18_Name", \
      "# Drug_Target_19_Name", \
      "# Drug_Target_20_Name", \
      "# Drug_Target_21_Name", \
      "# Drug_Target_22_Name", \
      "# Drug_Target_23_Name", \
      "# Drug_Target_24_Name", \
      "# Drug_Target_25_Name", \
      "# Drug_Target_26_Name", \
      "# Drug_Target_27_Name", \
      "# Drug_Target_28_Name", \
      "# Drug_Target_29_Name", \
      "# Drug_Target_30_Name", \ 
```

然后后来：

```
 try:
    target_name = drugbank_all[drug]["# Drug_Target_1_Name"]
    target_id= "INSERT INTO TargetID_TargetName (Drug_Target_1_ID, Drug_Target_1_Name) VALUES(\"%s\", \"%s\");" % (accession[0], target_name[0])
    cur.execute (target_id)
    print "target_id done"
except KeyError:
    print "Drug target 1 not found, skipping..."
    pass 
```

...每一个人？

这种方法的问题：

*   邋遢
*   不忽略重复项
*   不知道有多少 Drug_Target 它只是尝试了我指定的次数（这不是很简洁）

问题：

1.  有没有办法做一个 for 循环，在解析之前搜索每个 DRUGCARD 有多少 Drug_targets，然后进行相应的解析？
2.  有没有办法快速扫描列表以查看一个数字是否已经归属，然后忽略该条目？

更新：实际数据

```
#BEGIN_DRUGCARD DB00097

# AHFS_Codes:
Not Available

# ATC_Codes:
G03GA08

# Absorption:
The mean absolute bioavailability following a single subcutaneous injection to healthy     female volunteers is about 40%.     

...

# Drug_Target_1_HPRD_ID:
01073

# Drug_Target_1_ID:
148

# Drug_Target_1_Locus:
2p21

# Drug_Target_1_Molecular_Weight:
78617

# Drug_Target_1_Name:
Lutropin-choriogonadotropic hormone receptor

...

# Drug_Target_2_HGNC_ID:
HGNC:3969

# Drug_Target_2_HPRD_ID:
00639

# Drug_Target_2_ID:
430

# Drug_Target_2_Locus:
2p21-p16

# Drug_Target_2_Molecular_Weight:
78296

# Drug_Target_2_Name:
Follicle-stimulating hormone receptor 
```

# c++ - c ++ OOP设计-将数据成员传递给其他类-合理吗？

> ID：14571747
> 
> 赞同：6
> 
> 时间：2013-01-28T21:41:10.150
> 
> 标签：c++

我还有一个问题希望总结一下我的想法。

假设我有以下 3 个类：

**班级球员：**

```
class Player {
private:
    int positionX, positionY;
public:
    void move(Board& b) {
      // player changes its position on the board(move)
      b.removeCharFromBoard(positionX, positionY);
      positionX++;
      positionY++;
      // 'P' indicates a Player in the Board....
      b.insertCharToBoard(positionX, positionY, 'P');
    }
}; 
```

**类板：**

```
class Board {
private:
    // BOARD_C and BOARD_R are both "#define ..." for some integer number.
    char board[BOARD_C][BOARD_R];
}; 
```

**类游戏引擎：**

```
class GameEngine {
private:
     Board* board;
public:
     void playTurn(const Player& p) {
        p.move(board);
     }
}; 
```

GameBoard 的 playTurn 函数会使用参数“board”调用玩家的 move 函数对您来说是否合理？我需要这样做以便在棋盘数据成员中标记玩家已经改变了他的位置。是否遵守 OOP 的基本规则？

谢谢大家，辛迪加！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:50:37.140

是的，**在这种情况下**，这似乎是合理的（“在这种情况下”我的意思是“考虑到我能猜到你`GameEngine`和`Board`类的语义以及它们的关联/聚合关系的性质”）：

1.  与其使用原始指针，不如使用智能指针将`Board`对象保存在`GameEngine`. `unique_ptr`在这种情况下可能是您想要的，因为所有其他别名似乎只是观察者，并且 board 对象的生命周期绑定到`GameEngine`对象之一。但是，如果需要共享所有权，请选择`shared_ptr`. 尽量不要使用原始指针 ,`new`和`delete`，因为它们会导致代码错误；
2.  您仍然需要在`Board`类的接口上提供公共函数来修改板，因为`Player`将无法访问其私有成员变量（并且`board`恰好是一个）。
3.  而不是`#define`s，使用`constexpr`值作为板的大小（如果您使用的是 C++11）。您可能还想考虑使用[Boost.MultiArray](http://www.boost.org/doc/libs/1_52_0/libs/multi_array/doc/index.html)创建*安全*的二维 C 样式数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T21:50:27.370

你的方法很好。GameEngine 将用作您游戏的某种控制器。多亏了它，您可以过滤玩家动作，检查这种动作是否可能，或者在特定玩家操作的情况下做其他事情。

其次，有了这个解决方案，您不必将玩家连接到特定的棋盘，这扩展了您的其他选项的可能性，例如在棋盘之间轻松转移玩家。我认为你的方式很好:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T21:50:36.790

您必须考虑您的应用程序将如何更改，以及您想引入哪些功能。从这段代码看起来还不错，但是当您引入新功能时会是这样吗？

其他解决方案是放入玩家仅移动逻辑，它将更新其位置，然后您的 GameEngine 将根据所有玩家当前位置更新棋盘条目。想象一段时间后您将希望实施碰撞检测，然后在每个玩家更新其位置或运动后，碰撞检测将发生并纠正这些运动，并且只有稍后您的棋盘上才会正确更新。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T08:08:44.090

很多事情已经说了，但如果我可以补充一些东西。

将`Board`（不管`private`是否）传递给*本身*`Player`并不坏，并且这种设计用于多种架构（代码取自 SFML 2.0）：

 *```
void Sprite::draw(RenderTarget& target, RenderStates states) const
{
    if (m_texture)
    {
        states.transform *= getTransform();
        states.texture = m_texture;
        target.draw(m_vertices, 4, Quads, states);
    }
} 
```

`RenderTarget`是你的`Board`。在这里要理解的是，您将`Board` **仅使用其公共接口**（您可以访问该接口）进行操作。在上面的代码中，`draw()`是用来`target`强制它绘制一些东西的方法。

将内部对象传递给更高级别的类（例如`Player`）的整个想法可以解释为[桥接 OO 模式](http://en.wikipedia.org/wiki/Bridge_pattern)，其中可以有多个接口实现，`Board`并且可以实现多个类`IBoardManipulator`（或类似的东西）。

也就是说，我会说遵循游戏引擎的总体思路要好得多：

1.  注册游戏实体（在本例中为玩家）
2.  捕捉玩家输入
3.  消化并响应玩家输入（请求移动玩家）
4.  处理游戏逻辑（检查玩家是否可以移动到给定位置，如果可以 - 移动他）
5.  对于每个注册实体`GameEngine`都会调用`draw()`传递`Board`作为实体可以使用的目标。
6.  从第 2 步开始重复

我并不是说对于一个简单的架构来说这是必需的，但从*长远*来看，它比处理每个`Player`类似类可以对`Board`.*

# php - 无法重新声明 user_data() 错误

> ID：14571749
> 
> 赞同：-1
> 
> 时间：2013-01-28T21:41:10.430
> 
> 标签：php, mysql

我正在为我的网站创建一个用户帐户系统，但是当我使用该 `include 'core/init.php';`功能时出现错误。这可能是一件非常简单的事情，因为我是一个初学者并且正在学习。

```
Fatal error: Cannot redeclare user_data() (previously declared in C:\xampp\htdocs\PatchMyPC\core\functions\users.php:3) in C:\xampp\htdocs\PatchMyPC\core\functions\users.php on line 17 
```

这是我的 users.php 和 init.php 文件的代码

初始化文件

```
<?php
session_start();
//error_reporting(0);

require 'database/connect.php';
require 'functions/users.php';
require 'functions/general.php';

if (logged_in() === true) {
    $session_user_id = $_SESSION['user_id'];
    $user_data = user_data($session_user_id, 'user_id', 'username', 'password', 'first_name', 'last_name', 'email');
    if (user_active($user_data['username']) === false) {
        session_destroy();
        header('Location: index.php');
        exit();
    }
}

$errors = array();

?> 
```

用户.php

```
<?php

function user_data($user_id) {
$data = array();
$user_id = (int)$user_id;

$func_num_args = func_num_args();
$func_get_args = func_get_args();

if ($func_num_args > 1) {
    unset($func_get_args[0]);

    $fields = '`' . implode('`, `', $func_get_args) . '`';
    $data = mysql_fetch_assoc(mysql_query("SELECT $fields FROM `users` WHERE `user_id` = $user_id"));
    return $data;
}
}

function logged_in() {
    return (isset($_SESSION['user_id'])) ? true : false;
}

function user_exists($username) {
    $username = sanitize($username);
    return (mysql_result($query = mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `username` = '$username'"), 0) == 1) ? true : false;
}

function user_active($username) {
    $username = sanitize($username);
    return (mysql_result($query = mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `username` = '$username' AND `active` = 1"), 0) == 1) ? true : false;
}

function user_id_from_username($username) {
    $username = sanitize($username);
    return mysql_result(mysql_query("SELECT `user_id` FROM `users` WHERE `username` = '$username'"), 0, 'user_id');
}

function login($username, $password) {
    $user_id = user_id_from_username($username);

    $username = sanitize($username);
    $password = md5($password);

    return (mysql_result(mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `username` = '$username' AND `password` = '$password'"), 0) ==1) ? $user_id : false;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:43:29.683

可能您需要 users.php 两次。

采用：

```
require_once('users.php'); 
```

在您的所有文件中以克服此问题。

# actionscript-3 - AS3 中的 addChild(Button)

> ID：14571757
> 
> 赞同：0
> 
> 时间：2013-01-28T21:41:47.360
> 
> 标签：actionscript-3

我正在编写一个扩展 mx.core.UIComponent 的类。在这个类的构造函数中，我想添加一个Button（spark.components.Button）。但是，创建一个新的 Button 对象（例如 var b:Button = new Button();）然后执行 this.addChild(b) 不起作用——没有按钮出现。为什么不能将 Button 对象添加为子对象？

编辑：只是补充一点，当我打印出孩子时，它说 Button 对象是一个孩子，但 Button 没有出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:33:49.363

您需要在 createChildren 方法中而不是在构造函数中添加按钮。

```
protected var button:Button;

override protected function createChildren():void {
    super.createChildren();

    button = new Button();

    addChild(button);
} 
```

根据您要执行的操作，您可能还需要实现 measure 和 updateDisplayList 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:18:36.433

直接使用`UIComponent`，您不会为您处理孩子的布局；您需要手动设置子组件的位置和大小（[请参阅文档](http://help.adobe.com/en_US/flex/using/WS460ee381960520ad-2811830c121e9107ecb-7ff9.html#WS460ee381960520ad-2811830c121e9107ecb-7ff1)）。

考虑使用 a `Group`（或者`Canvas`，如果您仍在使用 MX 组件）来处理子布局。你仍然可以在 中添加渲染`updateDisplayList`，只要确保你也调用`super.updateDisplayList()`了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:17:46.143

您需要阅读 ActionScript 组件和 Flex 组件之间的区别。使用 Flex 组件时，**必须**使用`container.addElement( element )`，而不是`container.addChild( child )`。据我所知，具有此功能的唯一类源自`Group`（至少在我最熟悉的 Spark 框架中）。因此，扩展 UIComponent 将不允许您添加`Button`，尽管可以将 UIComponent 添加到 Flex 容器中（我不相信普通的 Sprite 可以这样做）

# ms-access - 将一条记录写入多个 Access 数据库

> ID：14571758
> 
> 赞同：1
> 
> 时间：2013-01-28T21:41:46.873
> 
> 标签：ms-access

我在 Access 中创建了一个模板表单，供多个用户记录数据。他们输入的数据将写入他们自己的个人数据库，但我还需要将数据写入一个编译所有用户记录的主数据库。所有数据库（用户个人数据库和主数据库）都具有相同的字段（并且每个个人数据库和主数据库具有用主键标识的相同字段）。起初，我认为链接数据库可能有效，但最终我会在主数据库中获得 100 多个链接表，但仍然无法将所有记录编译到一个主表中。我接近这一切都错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:49:03.467

在用户访问数据库的表单上，必须有一个控件才能输入新数据。在此控件中，将 INSERT INTO 语句添加到 master 数据库中的表中。例如：

'进入用户表
strSQL = "INSERT INTO userTable (field1, field2) VALUES (data1, data2)"
dbUser.Execute strSQL
'
'在这里您将打开与主数据库的连接
'
strSQL = "INSERT INTO userTable (field1, field2 ) VALUES (data1, data2)"
dbMaster.Execute strSQL

# jquery - 选项卡 - 禁用 mouseenter onclick 直到 mouseleave

> ID：14571759
> 
> 赞同：0
> 
> 时间：2013-01-28T21:41:53.377
> 
> 标签：jquery, tabs, hover, mouseenter, mouseleave

如何更改js，以便在标签点击（页面加载）后隐藏标签内容，直到鼠标离开标签？

这是所有示例：

```
//<![CDATA[ 
$(window).load(function(){
$(document).ready(function() {

    $(".tab").click(function() {
        var tabId = $(this).attr('id');
        $("#" + tabId + "content").hide();
    });

    $(".tabcontent").click(function() {
        $(this).hide();
    });

    $(".tab").mouseenter(function() {
        var tabId = $(this).attr('id');
        $("#" + tabId + "content").show();
    });

    $(".tabcontent").mouseenter(function() {
        $(this).show();
    });

    $(".tab").mouseleave(function() {
        var tabId = $(this).attr('id');
        $("#" + tabId + "content").hide();
    });

    $(".tabcontent").mouseleave(function() {
        $(this).hide();
    });
});
});//]]> 
```

index.php 和 page1.php 是一样的

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <title> - jsFiddle demo</title>

  <script type='text/javascript' src='http://code.jquery.com/jquery-1.4.2.js'></script>
  <script type='text/javascript' src='/Test/script.js'></script>

  <link rel="stylesheet" type="text/css" href="/Test/styles.css"/>

</head>
<body>

<div id="tabs">
    <ul>
        <li id="tab1" class="tab"><a href="/Test/page1.php">Tab 1</a></li>
    </ul>
</div>

<div id="tabcontents">
    <div id="tab1content" class="tabcontent">
        <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
        <button>Button 1</button> <button>Button 2</button>
    </div>

</div>

<h1>Normal page content.</h1>

<p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>

<p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>

</body>

</html> 
```

CSS：

```
#tabs {
    width: 400px;
}
#tabs ul {
    padding: 0;
    margin: 0;
    list-style: none;
}
#tabs ul li {
    float: left;
    padding: 10px;
    background: #ccc;
}
#tabcontents {
    clear: both;
}
.tabcontent {
    display: none;
    width: 400px;
    background: #aaa;
    position: absolute;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:05:43.217

尝试这个：

```
var currentUrl = window.location.href;

if( currentUrl === 'http://mydomain.com/Test/page1.php' ) {
    $('#tab1content').hide();
}else if ( currentUrl === 'http://mydomain.com/Test/page2.php' ) {
    $('#tab2content').hide();
} 
```

# html - 获取两个内联（或内联块）元素以匹配高度

> ID：14571764
> 
> 赞同：0
> 
> 时间：2013-01-28T21:42:14.330
> 
> 标签：html, inline, css

下面是一个包含以下 html 的 jfiddle。

```
<span class="label label-warning">helloworld</span>
<a href="#" class="btn btn-medium"><i class="icon-copy"></i></a> 
```

我经常遇到这个问题，其中两个`inline-block`/`inline`元素并排并且在同一个顶部不匹配。我相信这与`line-height`两个元素的不同有关。有什么办法可以对抗这种影响吗？

[http://jsfiddle.net/YfZVS/](http://jsfiddle.net/YfZVS/)

当前配置：

![当前配置](../Images/6d392bcb82d47f59790f5694aa8bf987.png)

期望的效果：

![所需效果](../Images/8243b34e74630cd02f41cb9443f6a838.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:54:57.807

```
.btn { vertical-align: top; } 
```

在这个浏览器上工作......我无法检查任何其他自动取款机。[这是小提琴](http://jsfiddle.net/JCG4y/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:46:09.900

如果您将两个元素都向左**浮动**，它们将对齐，然后您可以添加一个**边距以将它们隔开，请在****评论**中的小提琴中检查它，Stackoverflow 阻止我在正文中添加链接！

# google-maps - 更改每个 KML 图层的标记颜色？

> ID：14571769
> 
> 赞同：0
> 
> 时间：2013-01-28T21:42:25.167
> 
> 标签：google-maps, google-maps-api-3

我在 Google Map (v3) 上有许多不同的 KML 图层。标记的随机颜色被分配给每组标记。但是，我希望能够控制这一点。

到目前为止，这就是我所拥有的：

```
map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);    
var kmlLayerOptions = { preserveViewport: true, suppressInfoWindows: true };    
var Layer1 = new google.maps.KmlLayer('http://myurl.com/1.xml', kmlLayerOptions);
Layer1.setMap(map);
var Layer2 = new google.maps.KmlLayer('http://myurl.com/2.xml', kmlLayerOptions);
Layer2.setMap(map); 
```

我需要能够说我希望第 1 层使用蓝色标记，第 2 层使用红色标记，但我似乎无法弄清楚这一点。

据我所知，没有办法用 kmlLayerOptions 来做到这一点，这似乎是它会发生的地方，所以除了直接在图层对象上之外，我看不出还有什么地方可以在逻辑上进行这种更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:13:00.007

您无法使用 KmlLayer 更改它（至少目前，您可以创建[增强请求来添加功能](http://code.google.com/p/gmaps-api-issues/)）。

您可以使用 FusionTablesLayers（将您的 KML 导入 FusionTables，然后使用用户界面在 Google Maps API v3 中设置图标或动态样式（假设您需要少于 5 个不同的图标，并且您想要的图标在融合表）。

最后一个选项是编辑现有的 KML 以使用您想要的图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:15:50.270

KmlLayer 根据 KML 文档本身的样式进行渲染，您不能在任何图层选项中覆盖它。

如果您不想修改 KML 本身，您可以使用第三方库（例如[http://code.google.com/p/geoxml3/](http://code.google.com/p/geoxml3/)）在客户端呈现 KML，而不是让 Google 的服务器呈现它，这将使您能够覆盖渲染默认值。

# windows-phone-8 - 应用程序在后台时如何检测呼叫？

> ID：14571771
> 
> 赞同：0
> 
> 时间：2013-01-28T21:42:26.617
> 
> 标签：windows-phone-8

所以我知道前台应用程序可以通过注册模糊事件来检测电话呼叫，但是当我的应用程序在后台运行、播放声音、发送通知等时，它不会遇到相同的事件。

在这种情况下是否有特定的方法来处理电话？模糊事件是我能找到的唯一用于检测电话的事件，但在这种情况下它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:39:06.197

不幸的是，使用当前的 API 没有...

事实上，我想说，这个被隐藏的事件甚至不能被认为是检测来电的可靠方法：你现在可以使用它来达到这个目的，但明天微软可以继续添加新的东西引发同样的事件！

# language-agnostic - 完全限定类名的反义词是什么？

> ID：14571783
> 
> 赞同：5
> 
> 时间：2013-01-28T21:43:34.247
> 
> 标签：language-agnostic

有没有一个非完全限定的类名的词？

像本地类名，上下文类名，..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:47:51.943

我只是使用“类名”。非完全限定名称只是`class`关键字后面的单词。

# android - 服务无法存活

> ID：14571788
> 
> 赞同：2
> 
> 时间：2013-01-28T21:44:10.907
> 
> 标签：android, service

我正在编写一个监听传入短信的应用程序。因此，我为此编写了一个服务来启动 BroadcastReceiver。该服务由我的应用程序启动，但是当后者被销毁时，我的服务似乎没有听任何东西。由于此服务的目的是收听传入的 SMS，因此它必须“永远”运行（或由于内存管理而重新启动）。

这是一些代码：

```
public class SmsService extends Service {

    private final static String TAG = SmsService.class.getSimpleName();
    public static boolean SMS_SERVICE_STARTED = false;
    private boolean mRegistered = false;
    public final static String SMS_PORT = "port";

    private SMSReceiver mSmsReceiver = null; // this is the BroadcastReceiver listening to SMS

    public SmsService() {
        super();
        Log.d(TAG, "SmsService");
    }

    @Override
    public void onCreate() {
        Log.d(TAG, "onCreate");
        SMS_SERVICE_STARTED = true;
    }

    @Override
    public void onDestroy() {
        Log.d(TAG, "onDestroy");
        stopListenSms();
        SMS_SERVICE_STARTED = false;
    }

    @Override
    public IBinder onBind(Intent intent) {
        Log.d(TAG, "onBind");
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.d(TAG, "onStartCommand");

        if (intent != null && intent.hasExtra(SMS_PORT)) {
            Log.d(TAG, "we got extra!");
            short port = intent.getShortExtra(SMS_PORT, (short) 0);
            startListenSms(port);
        } else {
            Log.d(TAG, "no extra :(");
        }

        return START_STICKY;
    }

    private void startListenSms(short port) {
        Log.d(TAG, "startListenSms on port " + port);

        mSmsReceiver = new SMSReceiver();
        IntentFilter filter = new IntentFilter(
                "android.intent.action.DATA_SMS_RECEIVED");
        filter.addDataScheme("sms");
        String strPort = String.valueOf(port);
        filter.addDataAuthority("localhost", strPort);
        registerReceiver(mSmsReceiver, filter);
        mRegistered = true;
    }

    private void stopListenSms() {
        Log.d(TAG, "stopListenSms");
        if (mSmsReceiver != null) {
            if (mRegistered)
                unregisterReceiver(mSmsReceiver);
            mSmsReceiver = null;
        }
    }
} 
```

我观察到，当它的活动被破坏时，onStartCommand 会以空 Intent 调用。你知道为什么我的服务在活动被破坏时停止运行吗？我该怎么做才能让它“永远”运行？

在此先感谢，干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T21:54:14.860

Why do you need to run a service to listen to incoming SMS. Broadcast receiver itself serves the purpose, it will keep listening to the incoming message once you configured in the intent filter while registering the receivers. There are tons of examples Broadcast Receiver and SMS listening. Please go through those example and build your code efficiently

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:50:34.397

服务也有生命周期，可以被系统终止。您无法阻止这种情况，尽管您可以将服务置于前台，这使得系统更难终止它。尽管如此，它仍然是可能的；服务**不能**永远运行。查看服务的生命周期：http: [//developer.android.com/reference/android/app/Service.html#ServiceLifecycle](http://developer.android.com/reference/android/app/Service.html#ServiceLifecycle)

您需要的是一个侦听 SMS 意图的 BroadcastReceiver（我不知道它到底是哪一个）。BroadcastReceiver 可以注册某些意图（例如，传入的 SMS），并在系统发送此类意图时启动。请参阅[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

# c++ - 将图像颜色从灰度转换为 RGB OpenCV C++

> ID：14571790
> 
> 赞同：17
> 
> 时间：2013-01-28T21:44:12.513
> 
> 标签：c++, image, opencv, rgb

基本上我正在尝试将下面的输出图像转换为颜色（RGB）。此代码当前输出的图像是灰度图像，但是，对于我的应用程序，我希望它以彩色输出。请让我知道我应该在哪里转换图像。

下面的代码也是 C++，它使用了 openCV 中的函数。请记住，我正在使用包装器在我的 iphone 应用程序中使用此代码。

```
cv::Mat CVCircles::detectedCirclesInImage(cv::Mat img, double dp, double minDist, double    param1, double param2, int min_radius, int max_radius) {
//(cv::Mat img, double minDist, int min_radius, int max_radius)

if(img.empty())
    {
    cout << "can not open image " << endl;
    return img;
    }
Mat cimg;
medianBlur(img, img, 5);

cvtColor(img, cimg, CV_GRAY2RGB);

vector<Vec3f> circles;
HoughCircles(  img      //InputArray 
             , circles  //OutputArray
             , CV_HOUGH_GRADIENT  //int method
             , 1//dp              //double       dp=1   1 ... 20
             , minDist         //double minDist=10 log 1...1000
             , 100//param1          //double  param1=100
             , 30//param2          //double  param2=30  10 ... 50
             , min_radius      //int  minRadius=1   1 ... 500
             , max_radius      //int  maxRadius=30  1 ... 500
             );

for( size_t i = 0; i < circles.size(); i++ )
    {
    Vec3i c = circles[i];
    circle( cimg, Point(c[0], c[1]), c[2], Scalar(255,0,0), 3, CV_AA);
    circle( cimg, Point(c[0], c[1]), 2, Scalar(0,255,0), 3, CV_AA);
    }

return cimg;
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-28T21:59:22.420

当前设置为期望灰度图像作为输入。我认为您在问如何调整它以接受彩色输入图像并返回彩色输出图像。你不需要改变太多：

```
cv::Mat CVCircles::detectedCirclesInImage(cv::Mat img, double dp, double minDist, double  param1, double param2, int min_radius, int max_radius) {

  if(img.empty())
        {
        cout << "can not open image " << endl;
        return img;
        }
  Mat img;

  if (img.type()==CV_8UC1) {
              //input image is grayscale
    cvtColor(img, cimg, CV_GRAY2RGB);

  } else {
              //input image is colour
    cimg = img;
    cvtColor(img, img, CV_RGB2GRAY);
  } 
```

其余的保持原样。

如果您的输入图像是彩色的，您将其转换为灰色以供 HoughCircles 处理，并将找到的圆圈应用于原始彩色图像以供输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:50:48.173

**您粘贴的代码正在返回彩色图像。**

您已经在执行 cvtColor(img, cimg, CV_GRAY2RGB)，然后我看不到 cimg 在任何地方都被转换为灰度！要验证它，请尝试在从该函数返回之前显示它：

```
imshow("c",cimg);
waitKey(0);
return cimg; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:22:08.410

cvtImage 例程将简单地将您的灰色元素复制到每个像素的三个元素 R、G 和 B 中的每一个。换句话说，如果像素灰度值为 26，那么新图像的 R = 26，G = 26，B = 26。

呈现的图像仍然看起来是灰度的，即使它包含所有 3 个颜色分量，您所做的基本上就是将存储相同图像所需的空间增加三倍。

如果您确实希望颜色出现在图像中（当您查看它时），那么从灰度返回原始颜色确实是不可能的。然而，存在对图像进行伪着色或假着色的方法。

[http://en.wikipedia.org/wiki/False_color](http://en.wikipedia.org/wiki/False_color)

[http://blog.martinperis.com/2011/09/opencv-pseudocolor-and-chroma-depth.html](http://blog.martinperis.com/2011/09/opencv-pseudocolor-and-chroma-depth.html)

[http://podeplace.blogspot.com/2012/11/opencv-pseudocolors.html](http://podeplace.blogspot.com/2012/11/opencv-pseudocolors.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-29T06:06:45.923

您可以在输入彩色图像上绘制圆圈。检查openCV中给出的文档

[http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_circle/hough_circle.html](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_circle/hough_circle.html)

# ruby-on-rails - 让外部域中的子目录指向 Rails 应用程序而不更改 URL

> ID：14571791
> 
> 赞同：0
> 
> 时间：2013-01-28T21:44:12.653
> 
> 标签：ruby-on-rails, url-rewriting, http-redirect, url-mapping

我在 Heroku 上托管了一个 Rails 应用程序，例如 app.herokuapp.com

我想知道是否有办法让网址（例如 www.external.com/app）指向我的 rails 应用程序但不重定向。只需掩盖 URL，没有人知道该应用程序确实托管在与 external.com 不同的另一个域中。

虽然关于 iframe，但它不是一个很好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:04:38.207

我认为这取决于您使用的服务器。如果您使用的是 Apache，那么您可能想看看[Apache 中的域转发](http://shapeshed.com/domain_forwarding_in_apache/)。

# javascript - chrome和opera中的jquery位置动画问题

> ID：14571793
> 
> 赞同：0
> 
> 时间：2013-01-28T21:44:15.233
> 
> 标签：javascript, jquery, css, animation, html

所以我有一个带有以下css的div：

```
#MyDiv {
    position: absolute;
    overflow: visible;
    top: 0px;
    right: 50%;
    width: 49%;
    height: 99%;
    min-width: 250px;
    min-height: 400px;
    max-width: 400px;
    max-height: 500px;
    background-color: #FFFFFF;
    border: 1px solid #000000;
    margin: 0 auto;
    padding: 0px;
} 
```

我用jquery将它向右动画化了800像素。在 Firefox 中，最终位置是所需的位置，但是在 chrome 和 opera 中是错误的。

```
 alert($("#MyDiv").position().left);
    $("#MyDiv").animate({left: "+=" + 800 + "px"}, 1000, "linear", function() {
        alert($("#MyDiv").position().left);
    }); 
```

在 Firefox 中，初始左侧位置是 23（第一个警报），最后一个 823（第二个警报）在 chrome 和 Opera 中最终位置是 800

难道我做错了什么？需要保持 CSS 不变。

ps ie8 也有一些问题，但程度比 chrome 和 opera 要小

提前致谢。

**编辑**jsfiddle：http: [//jsfiddle.net/Q8K2R/](http://jsfiddle.net/Q8K2R/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:50:20.503

另一种方法是设置 css`left`属性，因为动画与 css 一起工作，这里不保证，左边的属性包含正确的计算数据，所以修复可以像

```
var mydiv=$("#MyDiv");
mydiv.css({left: mydiv.position().left}); 
```

动画 [演示之前](http://jsfiddle.net/oceog/5A2Nm/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:51:00.853

为什么不在动画样式之前计算位置：

```
`var _left = $("#MyDiv").position().left + 800 + 'px';
$("#MyDiv").animate({left: _left}, 1000, "linear", function() {
    alert($("#MyDiv").position().left);
}); ` 
```

# data-transfer - 如何使用带有 libusb 的 libusb_bulk_transfer 跟踪发送进度？

> ID：14571796
> 
> 赞同：1
> 
> 时间：2013-01-28T21:44:35.237
> 
> 标签：data-transfer, libusb-1.0

给定一个使用 libusb 调用“libusb_bulk_transfer”的应用程序，我如何跟踪通过数据缓冲区发送到终端设备的进度？

# javascript - 内爆阵列未按预期工作

> ID：14571800
> 
> 赞同：1
> 
> 时间：2013-01-28T21:44:50.897
> 
> 标签：javascript, jquery, arrays, join

看看我的代码：

```
// is_array function
function is_array(input){ return typeof(input)=='object'&&(input instanceof Array); }

// Check if cos_in is an array. If is not, create him
if(!is_array(cos_in))
{
    var cos_in = new Array();
}

// Onclick function
function cos(pret,box,configuratie)
{
    // Create a value (is different on every click; using different box)
    cos_in[box] = box + '|||' + pret + '|||' + configuratie + '||||';

    // Insert values from array in some div with #cos id
    $("#cos").html(cos_in.join('||||'));
} 
```

我的问题是 id 为 #cos 的 div 的起始值为“test-empty”，并且每次执行 onclick 函数时，div 都应该具有来自函数的值。但是返回一个空的 div。

请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:20:56.500

尽管此代码可以改进很多，但我尝试在此处解决您的第一个直接[问题](http://jsfiddle.net/EgVHL/4/)。

你想每次点击都附加结果吗？加盟在哪里？ **您是要加入键还是值？**我假设现在你想要的是价值而不是钥匙。

```
window.cos_in = window.cos_in && window.cos_in instanceof Array ? window.cos_in : []

// Onclick function
function cos(pret,box,configuratie)
{
    // Create a value (is different on every click; using different box)
    cos_in.push(box + '|||' + pret + '|||' + configuratie + '||||');

    // Insert values from array in some div with #cos id
    $("#cos").html(cos_in.join('||||'));
} 
```

让我迭代一下以获得可读/可理解的东西。

* * *

这是您正在做的一个更清晰的[示例。](http://jsfiddle.net/EgVHL/6/)为了进一步改进它，我需要知道你的链接和参数要去哪里。

```
var cos = (function (cos_in) {

    return function cos(pret, box, configuratie) {
        // Create a value (is different on every click; using different box)
        cos_in.push(box + '|||' + pret + '|||' + configuratie + '||||');

        // Insert values from array in some div with #cos id
        $("#cos").text(cos_in.join('||||'));
    };

}([])); 
```

* * *

这是对象版本而不是数组的[示例...](http://jsfiddle.net/EgVHL/7/)

```
var cos = (function (cos_in) {

    return function cos(pret, box, configuratie) {
        // Create a value (is different on every click; using different box)
        cos_in[box] = (box + '|||' + pret + '|||' + configuratie + '||||');

        // Insert values from array in some div with #cos id
        $("#cos").text(Object.keys(cos_in).join('||||'));
    };

}({})); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:25:36.557

这是一个您可以使用的简单包装器：

```
function join(input, str) {
    if(typeof(input) === 'object') {
        if(input instanceof Array) {
            return input.join(str);
        } else {
            var tmp = [];
            for(var x in input) {
                if(input.hasOwnProperty(x)) {
                    tmp.push(input[x]);
                }
            }
            return tmp.join(str);
        }
    }
    return input;
}

/* ... */

$("#cos").html( join(cos_in, '||||') ); 
```

但是，您确实需要在语言之间有所不同。JavaScript 可能无法按您的预期工作，至少与 PHP 相比是这样。

# java - jaxb 可以生成这样的 xml 模式吗？

> ID：14571803
> 
> 赞同：1
> 
> 时间：2013-01-28T21:45:09.387
> 
> 标签：java, xml, jaxb, xsd

我期待由 JAXB 生成的 XML 具有以下模式：

```
<payload>
   <parameters>
      <paramName>clientAssocIds</paramName>
      <paramVal>0207</paramVal>
      <paramName>quoteType</paramName>
      <paramVal>NTB</paramVal>
      <paramName>quoteDateLimitDays</paramName>
      <paramVal>365</paramVal>
      <paramName>externalIndicator</paramName> 
      <paramVal>1</paramVal>
   </parameters>
</payload> 
```

`<paramName>`and是名称和值对，这`<paramVal>`意味着`<paramVal>`必须遵循`<paramName>`。

我编写了一个 XML Schema 并使用 JAXB 基于此模式生成 java 类，然后设置所有值并编组该类，它没有生成我上面预期的 xml 模式。

这是我的架构：

```
<xsd:complexType name="sgrpCommonMessage">
  <xsd:sequence>
    <xsd:element name="payload" type="payload" />
  </xsd:sequence>
</xsd:complexType>

<xsd:complexType name="payload">
  <xsd:sequence>
    <xsd:choice minOccurs="0" maxOccurs="1">
        <xsd:element name="parameters" type="parameter" />
    </xsd:choice>
  </xsd:sequence>
</xsd:complexType>

<xsd:complexType name="parameter">
  <xsd:sequence>
    <xsd:element minOccurs="0" name="paramName" type="xsd:string" />
    <xsd:element minOccurs="0" name="paramVal" type="xsd:string" />
  </xsd:sequence>
</xsd:complexType> 
```

并且生成的 xml 有一些`<parameters>`，这不是我所期望的。我想将所有`<paramName>`和`<paramVal>`对包装在一起`<parameters>`：

```
<payload>
  <parameters>
    <paramName>quoteDateLimitDays</paramName>
    <paramVal>NTB</paramVal>
  </parameters>
  <parameters>
    <paramName>clientAssocIds</paramName>
    <paramVal>0207</paramVal>
  </parameters>
  <parameters>
    <paramName>quoteType</paramName>
    <paramVal>NTB</paramVal>
  </parameters>
  <parameters>
    <paramName>externalIndicator</paramName>
    <paramVal>NTB</paramVal>
  </parameters>
</payload> 
```

我想知道 JAXB 是否能够实现这样的 XML 结构，如果没有，我应该使用什么 API，如果可以，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:52:29.560

你可以有一个像下面这样的 XML 模式：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">

    <xsd:element name="parameters" type="parameters" />

    <xsd:complexType name="parameters">
        <xsd:sequence minOccurs="0" maxOccurs="unbounded">
            <xsd:element name="paramName" type="xsd:string" />
            <xsd:element name="paramValue" type="xsd:string" />
        </xsd:sequence>
    </xsd:complexType>

</xsd:schema> 
```

然后使用生成的模型，您可以执行以下操作：

```
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance("forum14571803");

        ObjectFactory objectFactory = new ObjectFactory();

        Parameters parameters = objectFactory.createParameters();
        parameters.getParamNameAndParamValue().add(objectFactory.createParametersParamName("A"));
        parameters.getParamNameAndParamValue().add(objectFactory.createParametersParamValue("a"));
        parameters.getParamNameAndParamValue().add(objectFactory.createParametersParamName("B"));
        parameters.getParamNameAndParamValue().add(objectFactory.createParametersParamValue("b"));

        JAXBElement<Parameters> root = objectFactory.createParameters(parameters);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

这将为您提供以下输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<parameters>
    <paramName>A</paramName>
    <paramValue>a</paramValue>
    <paramName>B</paramName>
    <paramValue>b</paramValue>
</parameters> 
```

# jquery - Jquery动态加载图像

> ID：14571809
> 
> 赞同：0
> 
> 时间：2013-01-28T21:45:30.140
> 
> 标签：jquery, html, ajax

当我的页面加载时，我有一个空图像，在用户输入正确的查询字符串后，我解析它并使用 AJAX 返回图像的 ID/位置。

```
<a class="bigImg rght" style="width:258px;">
<img src="" alt="Slide" width="298" height="224" /></a> 
```

然后我将新的 id 附加到 img src 字段中，但它没有做的是加载新图像。

```
parent_img.attr("src","http://www.mysite.com/files/"
+(data.offset_num)+"/"+(data.offset_id)).fadeIn(1000); 
```

所以现在我的 html 看起来像这样：

```
<a class="bigImg rght" style="width:258px;">
<img src="http://www.mysite.com/files/4823413/008234" alt="Slide" width="298" height="224" /></a> 
```

这是正确的位置，但它没有刷新图像， **我该如何强制它这样做？因此新图像已加载。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:51:55.920

我通过在图像末尾添加一个随机 ID 来解决这个问题。

```
var img_src = '/images/path_to_image.jpg?' + new Date().getTime();
$('#img_id').attr('src', img_src); 
```

# c# - 在应用程序设置中保护 Twitter 消费者令牌

> ID：14571813
> 
> 赞同：0
> 
> 时间：2013-01-28T21:45:53.633
> 
> 标签：c#, wpf, oauth, application-settings

我有一个 WPF 应用程序，它允许通过我创建的 Twitter 应用程序发布消息。

据我了解，消费者密钥和消费者秘密与生成的 PIN 一起使用以创建访问密钥和访问秘密。

现在我希望将 Consumer Key 和 Consumer Secret 存储在我的应用程序中，因为在分发时，用户只需要授权 Twitter 应用程序，然后就可以发布消息。

我目前正在针对我的 WPF 应用程序将使用者密钥/秘密和访问密钥/秘密存储在 Settings.settings 文件中，以便以编程方式轻松访问，但是我认识到这可能不是一种安全的方式，因为设置很容易被读取为XML。

这引出了我的问题：

1) 我存储消费者密钥/秘密以确保用户授权我的 Twitter 应用程序是否正确？

2) 如果我将访问密钥/秘密存储在 Settings.settings 文件中，是否足以验证用户有权访问我的 Twitter 应用程序？

3) Twitter 指出消费者密钥/秘密不应该被其他用户读取，这样做的最佳方法是什么？

4）当用户在授权方面关闭/打开我的WPF应用程序时，我应该如何处理，我可以重复使用存储的访问密钥/秘密详细信息吗？

如果我的问题有冲突/没有意义，我深表歉意——我对 OAuth 很陌生。

# ruby-on-rails - ruby 1.9 中带有 Test::Unit (minitest?) 的详细断言

> ID：14571814
> 
> 赞同：0
> 
> 时间：2013-01-28T21:45:54.800
> 
> 标签：ruby-on-rails, ruby, testunit, minitest

我正在升级我的应用程序。我想从 ruby​​ 1.8 迁移到 1.9，从 rails 3.0 迁移到 3.2（现在我运行 ruby​​ 1.9 和 RoR 3.2）。我的测试有问题：输出含糊不清，不是很有帮助。例如，`assert_difference`我得到：

```
Failure:
test_should_create_new_version_if_versioning_needed_and_diaconies_changed(AnimatorProfilesControllerTest)
test/functional/animator_profiles_controller_test.rb:108:in `block in <class:SomeTest>'
  => 108:     assert_difference('SomeModel.count', 1) do
     109:       put :update, :id => @model.to_param, :model => attrs 
     110:     end
     111: 
<> expected but was
<>

diff:
  nil 
```

问题是没有差异（如您所见）。另一个问题是，当我在断言中有一条消息时，它失败时不会显示。我该如何解决？

# rest - 如何维护我自己的应用程序的 RESTful 设计

> ID：14571815
> 
> 赞同：0
> 
> 时间：2013-01-28T21:45:56.470
> 
> 标签：rest, cakephp-2.0

据我所知，REST Web 服务的独特之处在于*资源*概念。一切都应该围绕资源及其 CRUD 操作进行。假设一个资源是*播放器资源，我可以通过链接*[http://mydomain.com/players.xml](http://mydomain.com/players.xml)检索播放器列表，第 5 个播放器可以通过[http://mydomain.com/players/5.xml](http://mydomain.com/players/5.xml)访问，并且依此类推，使用适当的 HTTP 方法，我可以执行不同的 CRUD 操作。

现在在客户端的问题是：如果我需要显示一个包含玩家得分的表格（您可以假设该表格是动态构建的，查询玩家的数据库表）怎么办？在我看来，这个表不是真正的资源（我不能删除表，也不能编辑或添加新表）。

那么真正的问题是（考虑到我使用的是 CakePHP 框架）：我能做些什么来让我的玩家的桌子不破坏玩家控制器的 RESTish 风格？

我的第一个想法是：将方法添加`getTable()`到播放器控制器的现有四个 CRUD 方法（`index()`、、和）中`view()`，修改配置文件以使所有 REST API 都可以在路径下访问（即[http://mydomain.com/rest/players /5.xml](http://mydomain.com/rest/players/5.xml)），而所有其他非 RESTFUL 服务将在路径下可访问（即[http://mydomain.com/nonrest/players/getTable](http://mydomain.com/nonrest/players/getTable)或[http://mydomain.com/nonrest/players/getTable.xml](http://mydomain.com/nonrest/players/getTable.xml)） . 通过这种方式，API 的客户端肯定会知道在路径下尊重 REST 范式。是一个好的解决方案吗？你还有别的想法吗？`edit()``delete()``routes.php``rest``nonrest``rest`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T00:45:14.007

您不需要单独的`nonrest`层次结构；绝对没有错`http://mydomain.com/players/5/score.xml`。仅仅因为资源是只读的，并不会因此使它成为资源以外的东西。

# c# - HTMLAgilityPack 节点名称过滤器不起作用

> ID：14571818
> 
> 赞同：1
> 
> 时间：2013-01-28T21:46:05.733
> 
> 标签：c#, linq, c#-4.0, html-agility-pack

我想使用`HTMLAgilityPack`. 我有一些代码：

```
HtmlAgilityPack.HtmlWeb TheWebLoader = new HtmlWeb();
HtmlAgilityPack.HtmlDocument TheDocument = TheWebLoader.Load(textBox1.Text);

List<string> TagsToRemove = new List<string>() { "script", "style", "link", "br", "hr" };

var Strings = (from n in TheDocument.DocumentNode.DescendantsAndSelf()
               where !TagsToRemove.Contains(n.Name.ToLower())
               select n.InnerText).ToList();

textBox2.Lines = Strings.ToArray(); 
```

问题是，它也返回了`script`标签的内容。我不知道为什么会这样。有谁能够帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:54:29.537

您的问题来自 InnerText 没有返回您所期望的事实。

在：

```
<A>
    Text1
    <B>Text2</B>
</A> 
```

它返回：

```
Text1
Text2 
```

然后，例如，对于根节点，doing`document.DocumentNode.InnerText`将为您提供 等中的所有文本`script`...

我建议您删除所有不需要的标签：

```
foreach (HtmlNode nodeToRemove in (from descendant in TheDocument.DocumentNode.Descendants()
                                   where TagsToRemove.Contains(descendant.Name)
                                   select descendant).ToList())
    nodeToRemove.Remove(); 
```

然后获取文本元素的列表：

```
List<string> Strings = (from descendant in TheDocument.DocumentNode.DescendantsAndSelf().OfType<HtmlTextNode>()
                        select descendant.InnerText).ToList(); 
```

# javascript - 循环通过两个不同大小的数组，同时重复数组 1 值

> ID：14571819
> 
> 赞同：2
> 
> 时间：2013-01-28T21:46:06.127
> 
> 标签：javascript

嗨，我是编程新手，遇到循环问题。我有两个数组：

```
colour = ['red','blue','green','orange'];
rows = [1,2,3,4,5,6,7,8,9,10,11...]; 
```

我想让每个行元素对都带有颜色数组中的颜色，例如开始

```
rows[0]=>colours[0],
rows[1]=>colours[1],
rows[2]=>colours[2],
rows[3]=>colours[3],
rows[4]=>colours[0],
rows[5]=>colours[1],..... 
```

我基本上想在颜色用完后开始迭代

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:50:39.667

大概是这样的：

```
var i,
    rowCount,
    colour,
    rows;
colour = ['red', 'blue', 'green', 'orange'];
rows = [];
rowCount = 20;
for (i = 0; i < rowCount; i++) {
    rows[i] = colour[i % colour.length];
} 
```

这个工作的关键是模运算符（除法后的余数）。`i % color.length`是`i`除以的余数`color.length`，这与 的索引有关`colour`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:49:46.373

您可以遍历所有行并按顺序分配颜色。当颜色数组完成后，只需重置其索引。

```
 var colorIndex = 0;
    for (var i=0; i<rows.length; ++i)
     {
         row[i] = colours[j]; //use the color for the current row
         j++;
         if (j == colours.length) //when you reached the last colour 
          {
              j = 0; //reset colour index.
          }
    } 
```

# javascript - 检查选择框中的重复条目

> ID：14571820
> 
> 赞同：1
> 
> 时间：2013-01-28T21:46:08.570
> 
> 标签：javascript

下面的函数，将动态添加一个新的选项值到一个选择框中。很棒的功能，但在将新选项添加​​到选择框中之前，它不会考虑和检查重复条目。如何修改代码以提醒用户发现重复条目​​并中止添加相同的选项值：

```
function addref() {

var value = document.getElementById('refdocs').value

    if (value != "") {

        var select = document.getElementById('refdocs_list');

        var option = document.createElement('option');

        option.text = value

        select.add(option,select.option)

        select.selectedIndex = select.options.length - 1;
    }//end of if

}//end of function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:08:34.567

**演示：http:** [//jsfiddle.net/abc123/rcwgk/2/](http://jsfiddle.net/abc123/rcwgk/2/)

这将起作用，这会增加您可能想要以不同方式做某事的值和选项。

```
 <html>
    <head>
        <script type="text/javascript">
            var values = new Array();
            var options = new Array();

            if(!Array.prototype.indexOf) {
                Array.prototype.indexOf = function(needle) {
                    for(var i = 0; i < this.length; i++) {
                        if(this[i] === needle) {
                            return i;
                        }
                    }
                    return -1;
                };
            }

            function getOptions() {
                var selectobject=document.getElementById("refdocs_list");
                for (var i=0; i<selectobject.length; i++){
                    values.push(selectobject.options[i].value);
                    options.push(selectobject.options[i].text);
                }
            }

            function addref() {

                var value = document.getElementById('refdocs').value

                if (value != "" && values.indexOf(value) == -1 && options.indexOf(value) == -1 ) {
                    values.push(value);
                    options.push(value);
                    var select = document.getElementById('refdocs_list');

                    var option = document.createElement('option');

                    option.text = value

                    select.add(option,select.option)

                    select.selectedIndex = select.options.length - 1;
                }//end of if

            }//end of function
        </script>
    </head>
            <body onload="getOptions()">
<select id="refdocs_list">
     <option value="1">test</option>
</select>

<input type="text" id="refdocs"/>
<input type="button" value="add" onclick="javascript:addref()" />
            </body>
        </html> 
```

# jquery - 选择单选按钮时jQuery显示/关闭内容

> ID：14571823
> 
> 赞同：0
> 
> 时间：2013-01-28T21:46:10.950
> 
> 标签：jquery, radio

嘿，我正在寻找一个非常简单的 jQuery 代码，它在选择某个单选按钮时显示隐藏的 div，如果该单选按钮被“取消选择”，则隐藏该 div。

我想出了如何使它与复选框一起使用，但我不知道为什么它也不能与单选按钮一起使用。

这是适用于复选框的代码：

```
$("#radio-id").click(function(){
   // If checked
    if ($("#radio-id").is(":checked")) {
        //show the hidden div
        $("#div-id").show("slide");
    } else {
        //otherwise, hide it
        $("#div-id").hide("slide");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:50:39.060

尝试这个 ：

```
$("#radio-id").click(function(){
   // If checked
    if ($("#radio-id").is(":checked")) {
        //show the hidden div
        $("#div-id").show("slide");
    } else {
        //otherwise, hide it
        $("#div-id").hide("slide");
    }
}); 
```

**根据您的 jsfiddle 进行更新：**

```
<style>
  #div-id{display:none} 
</style>

<div id="testing" >
  <input type ="radio" id="radio-id" name="link" >Option 1</input>
  <input type ="radio" name="link" >Option 2</input>
</div>
<div id="div-id"> IT WORKS!<div>

<script type="text/javascript" >
$("#testing").click(function(){
if ($("#radio-id").is(":checked")) {

        //show the hidden div
         $("#div-id").show("slide");

    } else {

        $("#div-id").hide("slide");
    }
});
</script> 
```

你的jsfiddle：

[http://jsfiddle.net/YZCN3](http://jsfiddle.net/YZCN3)

新的jsfiddle：

[http://jsfiddle.net/YZCN3/2/](http://jsfiddle.net/YZCN3/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:54:00.133

```
if ($("#radio-id").is(":checked")) {

     //Put code here

} else{

     //Put code here

} 
```

看来您犯了语法错误。我不认为可以检查div。

# javascript - 在单个追加中重用多个形状

> ID：14571826
> 
> 赞同：0
> 
> 时间：2013-01-28T21:46:41.070
> 
> 标签：javascript, svg, d3.js

如果我有一堆流程图节点：

```
var nodes = [
  {NodeType: "prep", x:50, y:50,  height:40, width: 160},
  {NodeType: "io",   x:50, y:125, height:40, width: 160}, 
  {NodeType: "io",   x:50, y:200, height:40, width: 160}
] 
```

我想将它们全部表示为矩形，在一个附加中很容易做到这一点：

```
svg.selectAll("rect")
    .data(nodes)
  .enter().append("rect")
    .attr("x", function(d) { return d.x; })
    .attr("width", function(d) { return d.width; })
    .attr("y", function(d) { return d.y; })
    .attr("height", function(d) { return d.height; })
    .attr("stroke", "black")
    .attr("fill", "none"); 
```

但是，如果我希望它们根据它们的类型（上面的示例中的 IO 和准备）成为不同的形状怎么办？

我用路径函数字典而不是矩形（完整代码在[http://bl.ocks.org/4659227](http://bl.ocks.org/4659227)）破解了一种方法。每个路径函数都接受高度和宽度。

```
svg.selectAll("path")
  .data(nodes).enter().append("svg:path")
  .attr("d", function(d) { return flow_shapes[d.NodeType](d.height, d.width);})
  .attr("stroke", "black")
  .attr("fill", "none")
  .attr("transform", function(d) {
    return "translate(" + d.x + "," + d.y + ")"
  }); 
```

但似乎必须有更好的标准方法来做到这一点。有任何想法吗？

我还担心上述代码在大型节点列表上的性能，尽管我还没有对其进行任何压力测试。

# python - 使用 lxml 迭代元素和子元素

> ID：14571827
> 
> 赞同：1
> 
> 时间：2013-01-28T21:46:53.160
> 
> 标签：python, lxml

这是给合法的`lxml`大师的。我有一个网络抓取应用程序，我想在其中迭代`div.content`网站上的许多（内容是类）标签。一旦进入 div.content 标签，我想看看是否有任何`<a>`标签是元素的子`<h3>`元素。这似乎相对简单，只需尝试使用`XPath`div.cont 标签创建一个列表，即

```
linkList = tree.xpath('div[contains(@class,"cont")]//h3//a') 
```

问题是，然后我想创建一个`tuple`包含来自 div.content 框的链接以及来自同一 div.content 框的段落元素的文本。我显然可以遍历整个文档并存储所有段落文本以及所有链接，但是我没有任何真正的方法可以将适当的段落与`<a>`标签匹配。

lxml 的`Element.iter()`函数几乎可以通过迭代所有`div.cont`元素来实现这一点，忽略那些没有`<a>`标签的元素，并配对`paragraph/a`组合，但不幸的是，似乎没有任何选项可以使用该方法迭代类名，只有标签名。

编辑：这是我要解析的 HTML 的一个非常精简的版本：

```
<body>
<div class="cont">
    <h1>Random Text</h1>
    <p>The text I want to obtain</p>
    <h3><a href="somelink">The link I want to obtain</a></h3>
</div>
</body> 
```

我想使用许多像这样的 div.conts —— 它们中的大多数都有比这更多的元素，但这只是一个草图，让您了解我正在使用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:26:49.660

您可以只使用不太具体的 XPath 表达式：

```
for matchingdiv in tree.xpath('div[contains(@class,"cont")]'):
    # skip those without a h3 > a setup.
    link = matchingdiv.xpath('.//h3//a')
    if not link:
        continue

    # grab the `p` text and of course the link. 
```

您可以扩展它（雄心勃勃）并选择`h3`>`a`标记，然后转到`div.cont`祖先（基于[XPath 查询，带有后代和后代 text() 谓词](https://stackoverflow.com/questions/3920957/xpath-query-with-descendant-and-descendant-text-predicates)）：

```
for matchingdiv in tree.xpath('.//h3//a/ancestor::*[self::div[contains(@class,"cont")]]'):
    # no need to skip anymore, this is a div.cont with h3 and a contained
    link = matchingdiv.xpath('.//h3//a')

    # grab the `p` text and of course the link 
```

但既然你需要然后扫描链接，实际上并没有给你买任何东西。

# uitableview - 如何在我的程序中同时使用 xib 和故事板？

> ID：14571828
> 
> 赞同：0
> 
> 时间：2013-01-28T21:46:53.470
> 
> 标签：uitableview, ios5, storyboard, nib

我做了一个完全基于xibs的项目。现在我需要添加一个表格视图，其单元格将引导到我项目中的 xibs。我为表格视图找到的所有教程都使用情节提要，所以我想知道，我将如何在当前项目的情节提要中构建表格视图，然后让详细视图成为我的 xib？如果那不可能，我是否必须开始一个使用情节提要的新项目，然后将我所有的 xib 添加到项目中？最后，我认为最简单的解决方案是使用 xibs 制作表格视图，而不是情节提要。这可能吗？如果可以，我该怎么做？

如果我的问题不清楚或者您需要我的信息，请告诉我。我发布的最后一个问题没有得到解答，因为我没有正确提问，我仍然不知道为什么......所以我不希望这种情况再次发生。

非常感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T00:45:40.267

您可以将情节提要添加到主要基于 xib 的项目中，但正如您所说，使用带有 xibs 的 UITableView 是您更喜欢的，是的，您可以这样做。

如果你去 File > New File > Objective-C Class > subclass UITableViewController。告诉它让你成为一个xib。这将为您实现 UITableViewDelegate 和 UITableViewDataSource。然后你只需要为它提供必要的方法，它应该从那里开始工作。

这是一个很好的教程，可以帮助你： http: [//www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/](http://www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/)（如果你继承 UITableViewController ，其中一些是不相关的，因为它会自动建立 Delegate 和 DataSource 属性）。

此外，如果有什么不合理的地方，请随时提出任何问题。我有点不确定你到底在追求什么，所以我的回答可能并不完美。

# jquery - Jquery 下拉菜单问题

> ID：14571832
> 
> 赞同：-2
> 
> 时间：2013-01-28T21:47:05.530
> 
> 标签：jquery

我正在尝试使用 Jquery 为我的 wordpress 子菜单设置动画。

这是我试图模仿的：http: [//money.co.uk](http://money.co.uk)

这是我到目前为止所拥有的：

```
 $("#main-nav li").hover(function () {
    $(this).children('.sub-menu').slideToggle("fast");
  }); 
```

[http://jsfiddle.net/bNeDh/](http://jsfiddle.net/bNeDh/)

这似乎与我想要的相反，当用户将鼠标悬停在父级上时，我希望孩子们向下滑动。我的jquery一点都不好，谁能提供答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:03:24.890

对于初学者，如果您只想切换孩子，您应该使用选择器指定它。您希望将第一个 ul 的 li 绑定到事件处理程序。否则，当您将鼠标悬停在#main-nav div 中的每个 li 上时，就会发生切换。

```
$("#menu-top-navigation ul > li").hover(function () {
    $'.sub-menu').slideToggle("fast");
}); 
```

然后，如果您想在前两个主要项目下放置子导航，请在下面放一个 ul，然后充满选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:04:07.600

我已经稍微修改了您的 CSS...
如果您发现这个（或任何）答案有用，请单击复选标记接受它。
你可能想要这样的东西：
**[Fiddle Here](http://jsfiddle.net/EbDYR/)**

```
$("#main-nav li").hover(function () {
$(this).children('.sub-menu').slideDown("fast");
},function(){
$(this).children('.sub-menu').slideUp('fast');
}); 
```

# list - 如何将列表拆分为元组？

> ID：14571833
> 
> 赞同：1
> 
> 时间：2013-01-28T21:47:06.720
> 
> 标签：list, scala

我正在尝试定义一个函数，该函数将获取一个列表并将其拆分`n`而不使用`take`,`drop`或`grouped`

```
 def mySplit[X](n: Int, xs: List[X]): (List[X], List[X]) = {
    if (n <= 0) (Nil, xs)
    else
    if (n >= xs.size) (xs, Nil)
    else
    if (n < xs.tail.size) (xs.head :: mySplit(n, xs.tail), Nil) 
                     else (Nil, xs.head :: mySplit(n, xs.tail))
  } 
```

这就是我的想法。如果`n < xs.tail.size`我们可以建立元组 1（代表第 1 部分），否则我们可以处理元组 2（列表的第二部分）。

以上不起作用。似乎它不喜欢`::`我在构建元组的一部分时。

我以正确的方式接近这个吗？

示例：`mySplit(3, (1 to 5).toList)`应该返回`(List(1,2,3), List(4,5))`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T22:10:41.913

这是我的看法，从头开始重写：

```
def mySplit[X](n: Int, xs: List[X]): (List[X], List[X]) = {
  xs match {
    case Nil => (Nil, Nil)
    case head :: tail =>
      if(n == 0)
        (Nil, xs)
      else
        mySplit(n - 1, tail) match {
          case (before, after) =>
            (head :: before, after)
        }
  }
} 
```

或者更短的：

```
def mySplit[X](n: Int, xs: List[X]): (List[X], List[X]) = {
  n match {
    case 0 => (Nil, xs)
    case s =>
      mySplit(s - 1, xs.tail) match {
        case (before, after) =>
          (xs.head :: before, after)
      }  
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T01:04:17.763

如果您仍想拆分大型列表，这里有一个尾递归变体。它也更快：

```
import scala.annotation.tailrec
def mySplit[X](n: Int, xs: List[X]): (List[X], List[X]) = {
  require(n >= 0)
  if (n > 0) {
    var result: (List[X], List[X]) = null
    @tailrec
    def mySplit0(n: Int, l: List[X], r: List[X]): Unit = r match {
      case h :: t if (n > 0) => mySplit0(n - 1, h :: l, t)
      case _ => result = (l.reverse, r)
    }
    mySplit0(n, Nil, xs)
    result
  } else (Nil, xs)
} 
```

# php - jQuery / AJAX 不稳定，我可以改进吗？

> ID：14571835
> 
> 赞同：0
> 
> 时间：2013-01-28T21:47:09.943
> 
> 标签：php, jquery, ajax

我在这里使用此代码在一组选项卡中切换特定类别的内容。这是一个屏幕截图：

![在此处输入图像描述](../Images/88c94ab865921f3e17ccc886df6afd40.png)

淡入淡出效果很好，尽管在新页面的淡入效果已经开始之后我可以看到新页面“正在加载”。这是在缓慢过渡的基础上设置的！似乎褪色效果与页面加载完全无关，我认为这会让事情变得很糟糕。有没有办法让过渡更顺畅？

这是代码：

```
jQuery(document).on("click",".nav-tab", function(e){ 
    e.preventDefault();
jQuery('.page-form').fadeOut('slow').load(jQuery(this).attr('href') + ' .page-form');
jQuery('.page-form').fadeIn('slow').load(jQuery(this).attr('href') + ' .page-form');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:54:34.203

你的第二个电话：

```
jQuery('.page-form').fadeIn('slow').load(jQuery(this).attr('href') + ' .page-form'); 
```

必须在第一次调用的完成回调中发生，如下所示：

```
jQuery('.page-form').fadeOut('slow')
    .load(jQuery(this).attr('href') + ' .page-form', function() {
        jQuery('.page-form').fadeIn('slow')
            .load(jQuery(this).attr('href') + ' .page-form');
        }); 
```

原因是大多数 jQuery 函数都是异步工作的：您可能认为调用会阻塞，直到加载内容，但事实并非如此——调用立即返回，内容在后台加载。这会导致您看到的奇怪效果 - div 淡入淡出并同时加载两次。

**编辑：**顺便说一句，你为什么`load()`在第一个之后做第二个？这对我来说有点奇怪——我假设你想让元素淡出，然后加载新内容，然后再次淡入？

另请注意，`fadeOut()`接受类似于的回调`load()`- 因此，如果您希望在加载开始之前完成淡入淡出，请将第一个`load()`放在回调中并将其传递给`fadeOut()`-call。

# sql - SQL 合并行

> ID：14571836
> 
> 赞同：2
> 
> 时间：2013-01-28T21:47:10.847
> 
> 标签：sql, sql-server-2008, merge, pivot, aggregate-functions

我试图打破和合并这样的表格的结果。（对于宾果游戏！）我可以很容易地编写 CASE 以按第一个字母将列分开。但是，我最终会显示空值，因为行被它们的 ID 视为不同。我在这里尝试了一些合并示例，但似乎被难住了。ID 无关紧要，我可以控制如何收集初始数据。

```
ID  |  Number     |
====================
1   |      N6     | 
2   |      B22    |
3   |      B5     |
4   |      I9     |
5   |      N4     |

B  |  I  |  N  |  G  |  O  |
============================
B5 |  I9 | N4  |  -- | --  |
B22| --  | N6  |  -- | --  | 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:55:33.143

```
;WITH CTE AS
(
SELECT *,
       LEFT([Number],1) AS Letter,
       ROW_NUMBER() OVER (PARTITION BY LEFT([Number],1) 
                              ORDER BY CAST(SUBSTRING([Number],2,2) AS INT) ) AS RN
FROM Table1
)
SELECT 
    MAX(CASE WHEN Letter = 'B' THEN [Number] END) AS B,
    MAX(CASE WHEN Letter = 'I' THEN [Number] END) AS I,
    MAX(CASE WHEN Letter = 'N' THEN [Number] END) AS N,
    MAX(CASE WHEN Letter = 'G' THEN [Number] END) AS G,
    MAX(CASE WHEN Letter = 'O' THEN [Number] END) AS O
FROM CTE
GROUP BY RN 
```

[SQL小提琴](http://www.sqlfiddle.com/#!3/2920a/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:55:48.123

这种类型的数据转换是一个*枢纽*。有几种方法可以旋转数据。

**聚合案例：**这使用`case`表达式和聚合函数来创建列

```
select 
  max(case when letter = 'b' then number end) B,
  max(case when letter = 'i' then number end) I,
  max(case when letter = 'n' then number end) N,
  max(case when letter = 'g' then number end) G,
  max(case when letter = 'o' then number end) O
from
(
  select left(number, 1) letter,
    number,
    row_number() over(partition by left(number, 1) 
                     order by cast(substring(number, 2, 2) as int)) rn
  from yourtable
) src
group by rn
order by rn 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/4c716/13)

**枢：**

或者由于您使用的是 SQL Server 2005+，您可以使用以下[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能：

```
select b, i, n, g, o
from
(  
  select left(number, 1) letter,
    number,
    row_number() over(partition by left(number, 1) 
                      order by cast(substring(number, 2, 2) as int)) rn
  from yourtable
) src
pivot
(
  max(number)
  for letter in (b, i, n, g, o)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/4c716/14)

# twitter-bootstrap - Laravel Bootstrapper 表链接方法

> ID：14571837
> 
> 赞同：0
> 
> 时间：2013-01-28T21:47:21.070
> 
> 标签：twitter-bootstrap, laravel

我正在尝试使用 Laravel 和引导程序包 - 坦率地说，我不确定这是 laravel 问题还是引导程序问题。但是，我试图弄清楚如何使用关系数据生成表。

我想要做的是创建一个带有添加列的表，该列显示用户拥有的角色。我的表基于权威的模型，所以它们都是标准的用户、角色和角色用户表。

显然，链中让我绊倒的方法是“角色”方法，我不知道如何获取给定用户的角色。表的其余部分按预期工作。

```
 echo Table::striped_open(); 
 echo Table::headers('ID','Name', 'Email', 'Roles'); 
 echo Table::body($users) 
    ->ignore('password', 'created_at', 'updated_at')
    ->order('id','name','email')
    ->roles(function($users) {
        return $users['id']->roles();
        });
 echo Table::open(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T19:57:28.463

鉴于这个问题已有数月之久，我敢肯定这是学术性的，但我想我会回答它以帮助整个社区。

你这样做：

```
echo Table::striped_open(); 
echo Table::headers('ID','Name', 'Email', 'Roles'); 
echo Table::body($users) 
   ->ignore('password', 'created_at', 'updated_at')
   ->order('id','name','email')
   ->roles(function($user) {
       return User::find($user['id'])->roles();
       });
echo Table::open(); 
```

你有两个问题。

首先是您试图将 $users 对象传递到闭包中。您不想这样做，部分原因是您可能会遇到变量冲突问题，部分原因是该闭包是在呈现的每一行上执行的，因此使用单数不会导致任何混淆。

第二个是你假设`$user`传递给闭包的参数是你的模型的一个实例。它不是。它是模型属性的数组。因此，如果`roles()`是您的模型的关系，那么您必须实际检索正在转换为数组并传递给闭包的模型。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:46:04.700

你不能这样做`$users['id']->roles()`，因为那没有意义：你获取一个整数，然后尝试在它上面调用一些东西。如果你这样做会发生什么`$users->roles()`？

# asp.net-mvc - 无法在控制器中使用 DropDownListFor 编写正确的回发方法

> ID：14571844
> 
> 赞同：1
> 
> 时间：2013-01-28T21:47:51.363
> 
> 标签：asp.net-mvc, http-post, dropdownlistfor

我已经创建了这样的模型包含字段

```
public Dictionary<int, string> Egg { get; set; } 
```

并查看以显示这样的组合框

```
@Html.DropDownListFor(m => m.Egg.Keys,
                     new SelectList(
                         Model.Egg, 
                         "Key", 
                         "Value")) 
```

但我不能在控制器类中编写 httppost 方法，因为每次我遇到这个错误

> [InvalidCastException：指定的转换无效。] System.Web.Mvc.CollectionHelpers.ReplaceDictionaryImpl(IDictionary `2 dictionary, IEnumerable`1 newContents) +131

我正在引用这篇文章： [How to write a simple Html.DropDownListFor()?](https://stackoverflow.com/questions/3057873/how-to-write-a-simple-html-dropdownlistfor/10393006#10393006)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T19:46:48.167

在视图方面：

```
@model Models.MyEggs

...

@Html.DropDownListFor(m => m.Egg.Keys,
                         new SelectList(
                             Model.Egg, 
                             "Key", 
                             "Value")) 
```

在控制器动作中：

```
public ActionResult Index()
        {                
            var model = new MyEggs();

            return View(model);
        } 
```

# android - 用于 Android 应用程序设计的 PSD 文件尺寸和分辨率

> ID：14571846
> 
> 赞同：3
> 
> 时间：2013-01-28T21:48:01.973
> 
> 标签：android, photoshop, resolution, hdpi

我听到并阅读了关于设计 Android 应用程序的 PSD 文件的尺寸和分辨率的不同内容。不幸的是，我遇到了配置 PSD 文件的不同方法，这让我感到困惑。

Android 开发者网站中的这个页面说了很多关于支持屏幕尺寸的内容，但没有显示如何配置 PSD 文件：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

因此，为了澄清这个问题，我将介绍我采取的方法，我很想听听对此的评论。

**我如何设置PSD：**

我将 PSD 的尺寸设置为 480x800 像素（纵向），并根据我想要支持的当前屏幕密度设置分辨率，这意味着：

*   xhdpi 320 像素/英寸
*   hdpi 240 像素/英寸
*   mdpi 160 像素/英寸
*   120 像素/英寸，用于 ldpi
*   tvdpi 213 像素/英寸

（请参阅上面有关屏幕支持的链接以了解为什么使用这些数字）

所以我所做的是为我的应用程序设计我想要的最高密度（例如 hdpi）并导出，然后我将分辨率更改为下一个较低的密度（mdpi）并导出等等......

至于**启动器图标**，指定如何构建图标：http: [//developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html#size](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html#size)

我为图标找到的所有模板在 PSD 中都使用了 72 像素/英寸的分辨率。

编辑：

所以要明确我的问题 - 这种方法是否正确？推荐吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T22:01:27.070

永远不要假设你的屏幕有一个像素大小（例如 480x800 是不行的），你永远不知道你的大小或纵横比会是多少，并且假设这些事情会让你的生活变得非常困难。

您应该从尽可能高的分辨率开始（不久之后 XXHDPI 将变得更加普遍），然后从那里开始工作。确定图形需要的大小。如果您希望它大约一英寸宽，请将其乘以密度（例如，XHDPI 为 1 * 320，MDPI 为 1 * 160，HDPI 为 1 * 240）以获得像素大小。

Photoshop 中的 DPI 设置**无关紧要**。人们会感到困惑并认为确实如此，但是对于为屏幕设计图形，除非您想检查物理尺寸（例如，如果您将文档密度设置为 320 dpi，然后检查图像尺寸，它应该向您显示什么是物理尺寸（例如英寸）适用于该密度的屏幕）。创建新文档时，您*可以*创建一个 1 英寸 x 0.5 英寸、320 dpi 的新文档，它会以正确的像素大小创建它。我建议不要这样做。在调整大小时，坚持使用 4 的倍数以获得最佳质量的像素大小。

基本上，采用更通用的方法——以您计划支持的最高分辨率设计您需要的图形，找到尺寸灵活的区域，并在必要时为这些区域制作可拉伸的 9-patch 图像。完成后为低密度创建版本。

# c# - HttpClient - 如何使用附加值更新 http 消息头 cookie

> ID：14571848
> 
> 赞同：1
> 
> 时间：2013-01-28T21:48:06.810
> 
> 标签：c#, http-get, dotnet-httpclient

我必须使用 WebAPI`HttpClient`类来发送和接收`HttpRequestMessage`和`HttpResponseMessage`.

我正在通过同一个`HttpClient`类实例跟踪多个请求（即对特定 sessionID 的多个请求）。第一个 Get 请求创建 SessionID；它`HttpResponseMessage`有 sessionID、cookie header 等元素。

对于第二个请求，我必须在第一个请求消息的标头中向返回的 cookie 添加附加数据。`HttpClient`类仅提供两种方法用于 Get -`GetAsync(URL)`和`SendAsync(HttpRequestMessage)`.

`HttpClient`类只为 GET 消息提供了两种方法——`GetAsync`它只接受 URI，因此似乎没有用。`SendAsync`需要`HttpRequestMessage`，在这里你不能在`HttpClientHandler`不重新初始化`HttpClient`类对象的情况下使用。

*如何更新 cookie 标头并向 Get 请求消息添加其他信息？*

检查以下示例获取在 Fiddler 中捕获的消息

# 索取 1 个样品

```
> GET //xxxx/xx/xxx/BrowseMaterials.aspx HTTP/1.1 
> Accept: text/html,
> application/xhtml+xml, */* Referer: //xxx/xx/xx/Home.aspx
> Accept-Language: en-US User-Agent: Mozilla/5.0 (compatible; MSIE 9.0;
> Windows NT 6.1; WOW64; Trident/5.0) Accept-Encoding: gzip, deflate
> Connection: Keep-Alive Cookie: Client=MN;
> xxxx=SessionId=95ab57ca-59b0-4a13-9249-04a7f1251058&TeacherId=6584&StudentId=0&Name=DAC
> DemoTwo;
> querystring=querystring=http%3a%2f%xxxxx%2fLPN%2fTeacher%2fHome.aspx; 
> ASP.NET_SessionId=t1xadfmys5tmoz3bwnwginnw; search=; Mode=Teacher;
> TimeZoneOffset=5 
```

# 索取 2 个样品

```
> Cookie: Client=MN;
> xxx=SessionId=95ab57ca-59b0-4a13-9249-04a7f1251058&TeacherId=6584&StudentId=0&Name=DAC
> DemoTwo;
> querystring=querystring=xxxx%3a%2f%2fdxxxxxxx%2fLPN%2fTeacher%2fBrowseMaterials.aspx;
> ASP.NET_SessionId=t1xadfmys5tmoz3bwnwginnw;
> search=viewall=1&grades=&materialType=6,1,2,3,4,5&itemSearchControl0=itm_att_Item
> FORMAT&itemSearchControl1=itm_att_Learning
> Modalities&itemSearchControl2=itm_att_Flesch-Kincaid Grade Level
> Readability&text=; Mode=Teacher; TimeZoneOffset=5 
```

* * *

请不要，我正在使用 HttpClient 对象“客户端”的现有副本。我无法使用 HttpMessageHandler 重新初始化它。这样做会创建新的 SessionID，这是不需要的。我正在使用 SessionID 在后续的 Get/Post 请求之间进行跟踪。此外，它是 C# 控制台应用程序，可以像浏览器一样模拟 Web 请求。如果您有任何其他问题，请告诉我。感谢大家的相关评论。

```
C# code 
```

方法#1 HttpRequestMessage GETRequest = new HttpRequestMessage(HttpMethod.Get, completeUrl); string additionalCookVal = "viewall=1&grades=&materialType=&itemSearchControl0=itm_att_Item FORMAT,SIM&itemSearchControl1=itm_att_Learning Modalities&itemSearchControl2=itm_att_Flesch-Kincaid Grade Level Readability&text="; GETRequest.Headers.Add("Cookie1", additionalCookVal); //这被静默忽略 HttpResponseMessage GETResponse = client.SendAsync(GETRequest).Result;

方法#2 var content = new FormUrlEncodedContent(additionalCookVals); //additionalCookVals 是一个 Dictionary 对象 HttpRequestMessage GETRequest = new HttpRequestMessage(HttpMethod.Get, completeUrl); GETRequest.Content = 内容；HttpResponseMessage GETResponse = client.SendAsync(GETRequest).Result; // 无法将内容添加到获取消息中。

# c - getline 重新开始

> ID：14571850
> 
> 赞同：5
> 
> 时间：2013-01-28T21:48:12.490
> 
> 标签：c, for-loop, getline

我正在使用 C 中的 get line 函数来读取文件的行。我想循环遍历该函数，以便可以多次读取文件。但由于某种原因，它只在后续循环开始时读取一次（我认为某处仍有指针指向最后一行）。我如何让它重置？

为了让事情更清楚，如果文件中有 100 行，下面，最大的 val 将是 100，即使它应该达到 300。

谢谢！

```
FILE* fp = myfopen (inf, "r");
char* line = NULL;
size_t len = 0;

int num=3
int val=0

for (i=0;i<num;i++)
{
    while (getline (&line, &len, fp) != -1)
    {  
        val++;   
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T21:50:57.223

读完文件末尾后，您必须调用

```
rewind(fp); 
```

再次从流的开头开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:23:29.070

如前所述，您可以使用该[`rewind()`](http://linux.die.net/man/3/rewind)函数重新开始，另一个选项当然是将文件的打开/关闭移动到循环中：

```
FILE* fp; = myfopen (inf, "r");

for (i=0;i<num;i++)
{
    fp = myfopen(inf, "r");
    while (getline (&line, &len, fp) != -1)
    {  
        val++;   
    }
    fclose(fp);
} 
```

# jquery - jQuery进度条：基于保存值的用户输入的进度

> ID：14571852
> 
> 赞同：0
> 
> 时间：2013-01-28T21:48:23.963
> 
> 标签：jquery, forms, progress-bar

我正在尝试实现一个 jQuery 进度条，用户可以在其中确定进度（通过键入文本表单），但是如果用户要离开页面然后回到它，进度条就不会再回到 0 了；这将是他们之前离开的地方。试图弄清楚如何保存他们的进步......

```
<form method="post" action="">
  <input id="first-value" type="text" name="first" value="" /><br />
  <input type="text" name="second" value="" />         
</form> 
```

* * *

```
<script>
 $(function() {
  $( "#progressbar" ).progressbar({
    value: 0  //set to zero for now, but want it to change permanently when user    
             // inputs data
      });
});
</script> 
```

* * *

```
<script>
   $('input').change(function(){
    var new_amount = 0
    $('input').each(function() {

      if($(this).val() == "50") {
             new_amount += 5;   //5 Percent
      }
      if($(this).val() == "100") {
             new_amount += 10;  //10 Percent
       }
     }
   );

$("#progressbar").progressbar('value',new_amount);

});
</script> 
```

我想获取用户输入的值（例如，100、30、80 等），将它们相加，使该数量成为进度条值，但即使他们要关闭浏览器并来，也将其保持在该值再次返回该页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:01:06.470

通常，cookie 可以是在同一站点内跨页面/刷新/返回/转发/等存储该信息的有效方式。但是，需要谨慎使用它，并且您应该小心由于您的 javascript 代码中的问题，网站似乎“缓存”了 cookie 的情况。

有关它们是什么以及如何使用它们的完整概要，请参阅 W3c：

[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

如果这更有吸引力，您还可以存储会话服务器端。如果是这种情况，请告诉我们您使用的是什么服务器端技术。（.NET、PHP、Java、Node.js 等）

# javascript - 将base64存储在本地存储中

> ID：14571858
> 
> 赞同：4
> 
> 时间：2013-01-28T21:48:34.517
> 
> 标签：javascript

好吧，我在 javascript 中有一个函数：

```
function store_data(){
var img=document.createElement("img"); 
/*var img=new Image();
img.onload = function() {
    context.drawImage(img, 0, 0);
};*/
img.src= URL; //js global var
var height=parseInt(img.naturalHeight,10);
var width=parseInt(img.naturalWidth,10);
var canvas = document.getElementById('myCanvas'); 
canvas.setAttribute("width", width);
canvas.setAttribute("height", height);

var context = canvas.getContext('2d');
context.drawImage(img,0,0);
canvas.style.width="100%"; 
var data=(canvas.toDataURL("image/png"));
localStorage.setItem("data", data);

} 
```

第一次调用时存储一个字符串，如“data;” 在 localStorage 中不完整，图像就像“data64;aotehtahotetav ...”。但是当我第二次打电话时，数据存储得很好。为什么会这样？

也许我应该将图像加载到加载的 dom 的 img 中？图像被存储以供后期绘制使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T22:12:13.523

就像迈克尔已经提到您的代码在图像完全下载之前将图像的数据保存到 localStorage 一样。第二次图像已经存在于缓存中。

当 onload 事件像这样触发时，也许尝试将图像加载到画布上

```
function store_data() {

    var img = new Image();
    img.src =  URL; //js global var

    img.onload = function( ) {

        var canvas  =  document.getElementById( 'myCanvas' ); 
        canvas.setAttribute( "width", img.width );
        canvas.setAttribute( "height", img.height );

        var context  =  canvas.getContext( '2d' );
        context.drawImage( img, 0, 0 );
        canvas.style.width = "100%"; 
        var data = canvas.toDataURL("image/png");
        localStorage.setItem( "data", data );
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:03:14.987

如果你不做你的数据存储`img.onload`在本地存储，那么当你将它存储在本地存储时，你不能确定图像的数据已经完全下载，并且你会得到不一致的数据长度。

# python - 如何在 python curses 模块中删除子窗口

> ID：14571860
> 
> 赞同：5
> 
> 时间：2013-01-28T21:48:41.690
> 
> 标签：python, curses

我有一个使用子窗口的 curses 应用程序，但我似乎无法删除它们。

例如，此代码不起作用：

```
import curses
def fill(window, ch):
    y, x = window.getmaxyx()
    s = ch * (x - 1)
    for line in range(y):
        window.addstr(line, 0, s)

def main(stdscr):
    fill(stdscr, 'M')
    stdscr.refresh()
    stdscr.getch()

    subwin = stdscr.subwin(1, 28, 20, 13)
    fill(subwin, 'J')
    subwin.refresh()
    subwin.getch()

    del subwin
    stdscr.touchwin()
    stdscr.refresh()
    stdscr.getch()

curses.wrapper(main) 
```

当您运行此代码时，屏幕会填充“M”，然后当您按下某个键时，会创建一个子窗口并填充“J”。最后，当您再次按下某个键时，代码会删除子窗口并完全重绘屏幕。但是，那些Js还在。

经过一些实验，我发现调用 stdscr 的 clear() 方法会使子窗口消失，但我想将背景恢复原样，而不是将其清空和重写。有谁知道可以做到这一点的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T15:56:43.053

您使用子窗口有充分的理由吗？如果您创建一个新的顶级窗口，则代码可以正常工作 - 只需更改`stdscr.subwin`为`curses.newwin`，它就可以按您的预期工作。

我不是诅咒专家，但我相信子窗口与其父窗口共享字符缓冲区，因此对其中任何一个的更改也会影响另一个。因此，如果您希望将窗口细分为逻辑区域（可能是菜单栏、主区域和状态栏），那么子窗口很有用。但是，如果您正在寻找更像对话框或弹出菜单的东西，那么您需要的是一个全新的窗口（带有自己的单独缓冲区）。

我找不到任何同意或不同意我的 ncurses 的明确参考，但[AIX 的手册页](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http%3A%2F%2Fpublib.boulder.ibm.com%2Finfocenter%2Fpseries%2Fv5r3%2Ftopic%2Fcom.ibm.aix.basetechref%2Fdoc%2Fbasetrf2%2Fsubwin.htm&ei=gXoSUbadNoWW0QWsx4DABg&usg=AFQjCNHYrPajT-JtFaedSmpAv_OTuGhgLw&bvm=bv.41934586,d.d2k)似乎证实了这一点：

> 回想一下，子窗口共享其父窗口缓冲区。通过父窗口或其任何子窗口对子窗口覆盖区域中的共享窗口缓冲区所做的更改会影响共享窗口缓冲区的所有窗口。

当然，这对于 ncurses 来说不是确定的，但我找不到任何相反的东西，它似乎确实可以解释观察到的行为。我还做了一个粗略的实验，`subwin.getch()`在您示例中的行之后，我立即添加了以下行：

```
raise Exception(stdscr.instr(20, 15, 3)) 
```

在您的示例中，我得到`JJJ`了实际主窗口的内容。如果我改为使用`curses.newwin()`来创建窗口而不是`stdscr.subwin()`我得到预期的`MMM`.

我不知道有多少特定的 Python curses 资源，但是大多数关于 ncurses 的标准教程和文档对于这种级别非常有用。当我不得不在其中做一些工作时，[这个文档](http://www.linuxfocus.org/English/March2002/article233.shtml)非常有用。如果您向下滚动到“示例”部分，您会看到菜单弹出窗口*不是*子窗口 - 他通过以下稍微模糊的解释暗示了这一点：

> 我们不希望这个新窗口覆盖背景上先前写入的字符。菜单关闭后，他们应该留在那里。这就是为什么不能将菜单窗口创建为 stdscr 的子窗口的原因。

另外，我记得同时使用`stdscr`和您自己的窗口可能会导致问题 - [“官方” ncurses 介绍](http://invisible-island.net/ncurses/ncurses-intro.html)对这类事情有[一些警告。](http://invisible-island.net/ncurses/ncurses-intro.html#caution)它还建议完全避免重叠窗口，因为它们显然容易出错，但我不记得它们对短期瞬态模态对话框有任何问题（这是我放置它们的唯一用途）。当然，仅仅因为我的简单用例没有暴露任何问题并不意味着没有任何问题。然而，在像 ncurses 这样复杂的事情中，我可以看到让事情尽可能简单的智慧。

我希望这会有所帮助。正如我所说，我绝不是诅咒专家，但希望这能让你更进一步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T05:07:48.833

这段代码有两个问题。

首先，正如之前的海报所指出的，子窗口与父窗口共享一个缓冲区，所以`curses.newwin()`如果你想要一个完全独立的窗口，你应该使用它。

其次，使用`del`删除窗口是有问题的，因为它依赖于引用计数/垃圾收集才能正常工作。（一方面，您必须删除对窗口的*所有*引用才能使其工作。）我建议使用该`curses.panel`模块来显式显示/隐藏窗口。

# jquery - 有两个 在一个页面上，如何让 jQuery 只在一个页面上运行函数（不使用 ID）？

> ID：14571861
> 
> 赞同：1
> 
> 时间：2013-01-28T21:48:45.793
> 
> 标签：jquery

现在我知道这听起来很简单，但老实说我无法拨入。我在一个页面上有两个表格。我写了一些这样触发的表单验证函数：

```
$("form").submit(function(event) {
    event.preventDefault();
    checkRequired();
    checkLengths();
    checkFormats();
    checkErrors();
}); 
```

这太棒了，但是在函数内部，我无法`$(this)`识别`<form>`单击提交按钮的位置。

假设我`alert($(this).attr('id'));`在**checkRequired()**函数中编写。它警告“**对象，对象**”。

如果我在函数中放置相同的代码`$("form").submit()`，它会返回我的表单 ID。

函数中的选择器是类似的东西`$("input[type='text']")`，但函数在所有输入上运行，而不仅仅是提交的表单中的那些。

**使用的示例函数（）：**

```
function checkFormats() {

    alert("Checking Formats...");

    $(".email").each(function(){

        alert("Checking Formats: Email...");

        var emailField = $(this).children("input[type='text']");
        var strEmail = emailField.val();

        if( strEmail.indexOf( "@" ) == -1 ) {
            alert("What the hell?");
        }

    });

} 
```

我敢肯定，当我听到解决方案时，我会感到很愚蠢，但是，嘿，我太累了，哈哈……提前谢谢！

**想也许`$("form",this)`可以把我带到某个地方？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:53:04.710

您不能将表单传递给方法吗？

```
$("form").submit(function(event) {
    event.preventDefault();
    checkRequired(this);
    checkLengths(this);
    checkFormats(this);
    checkErrors(this);
}); 
```

然后你就有了正确的上下文。您现在可以在指定表单的上下文中选择任何其他元素，类似于：

```
function checkFormats(theForm) {
    $form = $(theForm);

    alert("Checking Formats...");

    // Get emails from within the context of the current form.
    $(".email", $form).each(function(){

        alert("Checking Formats: Email...");

        var emailField = $(this).children("input[type='text']");
        var strEmail = emailField.val();

        if( strEmail.indexOf( "@" ) == -1 ) {
            alert("What the hell?");
        }

    });
} 
```

* * *

### 替代方案 - 使用 JavaScript [**.apply**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)

（正如[**Mike Robinson**](https://stackoverflow.com/users/43687/mike-robinson)在评论中提到的那样）

* * *

```
$("form").submit(function(event) {
    event.preventDefault();
    checkRequired.apply(this);
    checkLengths.apply(this);
    checkFormats.apply(this);
    checkErrors.apply(this);
}); 
```

然后`this`在函数内部就变成了形式。您现在可以像这样使用它：

```
function checkFormats(theForm) {
    $form = $(this);

    alert("Checking Formats...");

    // Get emails from within the context of the current form.
    $(".email", $form).each(function(){

        alert("Checking Formats: Email...");

        var emailField = $(this).children("input[type='text']");
        var strEmail = emailField.val();

        if( strEmail.indexOf( "@" ) == -1 ) {
            alert("What the hell?");
        }

    });
} 
```

* * *

[**演示**](http://jsfiddle.net/czuHW/)- 使用`.apply`

* * *

Demo 使用了一个简单的 HTML 来自：

```
<form>
    <button type="submit">submit</button>
</form> 
```

使用此脚本：

```
$("form").submit(function (event) {
    event.preventDefault();
    checkRequired.apply(this);
});

function checkRequired() {
    alert("This is of type: " + this.nodeName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:54:10.480

您需要的是每个表单元素的唯一名称。阅读 jquery 选择器，您可以在其中选择需要选择的表单

使用 ID

$('#form_id')

班级

$('.form1')

甚至是数组中的索引。

$('form:first')[0] $('form:last')

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:50:35.750

给表单一个 ID 并在 jquery 调用中引用它：

```
$("#form1").submit(function(event) {
event.preventDefault();
checkRequired();
checkLengths();
checkFormats();
checkErrors();
}); 
```

# python - 无法使用实例自己的 id 获取 django 模型实例

> ID：14571863
> 
> 赞同：0
> 
> 时间：2013-01-28T21:48:49.570
> 
> 标签：python, django, django-models

我有一个 Django 模型：

```
class ActivationCode(models.Model):
    id = models.FloatField(primary_key=True)
    user = models.ForeignKey('User', to_field='id', on_delete=models.CASCADE) 
```

我很难选择一个 ActivationCode 实例，所以我尝试使用它自己的 id 获取实例：

```
activation_codes = ActivationCode.objects.all()
print len(tuple(activation_codes))
>>> 1
for code in activation_codes:
    cid = code.id
ActivationCode.objects.get(id=cid)
>>> DoesNotExist: ActivationCode matching query does not exist. 
```

这是怎么回事？为什么当我使用它自己的 id 时它说该对象不存在？为什么我可以使用 .all() 而不是 .get() 来获取实例？

可能值得注意的是，上面的代码是在测试环境（TestCase）中的基于类的视图中运行的。当我在终端中尝试同样的事情时，它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T05:23:05.603

浮动作为主键是一个坏主意。

您不能保证浮点表示在所有级别上都完全相同。Python float 实现是特定于解释器的，并且可能在精度上与您的 DB 双精度不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:25:52.160

Django 将[自动填充](https://docs.djangoproject.com/en/dev/topics/db/models/#automatic-primary-key-fields)主键（id）

```
class ActivationCode(models.Model):
    #OMIT THIS id = models.FloatField(primary_key=True)
    user = models.ForeignKey('User', to_field='id', on_delete=models.CASCADE) 
```

然后你可以打电话

```
code = ActivationCode.objects.get(pk=cid) 
```

如果您想要数据库中的项目数（比 len 更有效）

```
count = ActivationCode.objects.count() 
```

`exists()`作为旁注，调用查询集

```
if qs.exists():
    .... 
```

效率高于

```
if qs:
    ... 
```

# javascript - 在传递给 setInterval/setTimeout 的函数中访问“this”变量

> ID：14571868
> 
> 赞同：4
> 
> 时间：2013-01-28T21:49:11.410
> 
> 标签：javascript, jquery, setinterval

我正在创建一个可以跳跃、向右和向左移动的角色的简单游戏。

我在使用跳转功能时遇到问题，它使用`setInterval`.

这是功能：

```
 jumpUp: function (speed) {
        setInterval(function () {
            this.yPos += 10;
            this.playerElement.css("top", '-=' + 10);
            alert("dude, im not moving....so stop trying"); //for some reson, this line works and other dont.
        }, 100);
} 
```

我应该补充一点，代码在没有`setInterval`. 我真的不知道为什么当我添加`setInterval`.

我的问题：

1.  是什么阻止此代码运行？
2.  `setInterval`让角色看起来像跳跃和着陆的好方法吗？还是我应该使用不同的方法？

编辑1：

**[小提琴](http://jsfiddle.net/7XyUL/)**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T21:53:25.560

问题是您使用`this`. 当您传递给的函数`setInterval`被调用时，`this`将是全局对象（`window`在浏览器中）。您需要保留`this`调用时的值`setInterval`。这样做的一种方法是将 的值存储`this`到一个变量中，然后由匿名函数（这是一个闭包）将其关闭：

```
 jumpUp: function (speed) {
        var self = this;
        setInterval(function () {
            self.yPos += 10;
            self.playerElement.css("top", '-=' + 10);
        }, 100);
} 
```

编辑：

要回答您的第二个问题，动画精灵（如您的角色）的更好方法是存储角色的速度，然后有一个游戏循环，该循环将根据该信息计算精灵的下一个位置。一个非常简单的示例如下所示：

```
// Somewhere else in the code:
function tick() {
    // move player by player.velocity.x and player.velocity.y

    // code to decelerate player gradually, stop player when they hit a wall/floor, etc...
    // A very simple example:
    if (player.velocity.y > 0) {
        player.velocity.y -= 1
    }

    // call next tick() (setTimeout, or preferably requestAnimationFrame)
}

// In the player code:
velocity: {x: 0, y: 0},
jumpUp: function () {
    this.velocity.y -= 10;
},
moveRight: function () {
    this.velocity.x += 10;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:55:09.373

正如 darma 和 danronmoon 指出的那样，您对此有一个范围界定问题。

试试下面的代码：

```
jumpUp: function (speed) {
    var that = this;

    setInterval(function () {
        that.yPos += 10;
        that.playerElement.css("top", '-=' + 10);
    }, 100);
} 
```

我添加了一个变量，以保持对应该是的任何内容的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T22:02:57.153

除了你的关闭问题，这可能会导致不连贯的跳跃。

这是另一种模式，它监视时钟以查看每次调用函数之间经过了多少时间（`setInterval`不一致）：

```
jumpUp: function (speed) // speed in pixels per second
{
    var last = +new Date();
    var c = this;
    var jumptick = function ()
    {
        var interval = +new Date() - last;
        c.yPos += speed * interval;
        c.playerElement.css("top", c.yPos);
        if (/* condition for reaching maximum height */) speed = -speed;
        if (! /* condition for reaching ground */) setTimeout(jumptick);
            // could add an interval but this will lead to fastest frame rate
    };
    jumptick();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T22:03:28.970

Setinterval 不是实现此目的的好方法，因为它将使用大量资源。移动角色时还需要考虑帧速率，否则他会在快速机器/浏览器上快速移动，而在慢速机器上移动缓慢。

一个好的方法是使用 requestAnimationFrame 方法。您可以在 google 上找到一个 javascript 文件，使其与跨浏览器兼容。

然后，每次调用您的函数时，您都需要检查帧之间经过的时间并相应地移动您的精灵。这需要更多的工作，但这样一来，您的游戏将在任何机器上以相同的速度运行。

# couchdb - 如何检查该字段在 CouchDB 中是否唯一？

> ID：14571869
> 
> 赞同：0
> 
> 时间：2013-01-28T21:49:25.283
> 
> 标签：couchdb, couchapp

我有一个这样的文档数据库：

```
{
    "_id" : "37686aeb8d65e77665af55e69801a62c",
    "ip"  : "192.168.1.1",
    "mac" : "01:23:45:67:89:ab"
} 
```

我有一个带有更新处理程序的设计文档。如何检查新文档是否具有唯一的 mac 地址？在 CouchDB 中可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:58:34.177

唯一保证跨数据库的唯一值是`_id`，因此如果您想将此控件委托给 CouchDB，则必须将其设置为 mac 地址。

否则，您必须通过 map 和 reduce 的视图函数自己处理它：map 函数发出 mac 地址，减少一组它们并计数。但是这样做的代价是在添加数据之前进行额外的视图查找以及从您这边清除重复项的一些逻辑，但是您总是会遇到重复值同时在数据库中的情况。

# android - 取消时未调用 Facebook Android SDK 3.0 回调

> ID：14571870
> 
> 赞同：3
> 
> 时间：2013-01-28T21:49:28.920
> 
> 标签：android, facebook

我正在尝试使用 Facebook Android SDK v3.0 升级现有的应用程序/框架，但我坚持如何使用额外权限进行身份验证。

问题是如果用户取消，StatusCallback 似乎不会触发。`Session.openActiveSession`如果我在取消时使用对回调的常规调用，但`Session.OpenRequest`在新对象上使用新`Session`对象则不会。

这是我的代码：

```
Session.OpenRequest auth = new Session.OpenRequest(this);

String[] permissions = {"publish_stream", "user_status"};

auth.setPermissions(Arrays.asList(permissions));

auth.setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);

auth.setCallback(new Session.StatusCallback() {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
        switch(state) {

            case OPENING:
                System.out.println("OPENING");
                break;              

            case OPENED: // <-- NOT CALLED
                System.out.println("OPENED");
                break;

            case CREATED: // <-- NOT CALLED
                System.out.println("CREATED");
                break;

            case CREATED_TOKEN_LOADED: // <-- NOT CALLED
                System.out.println("CREATED_TOKEN_LOADED");
                break;

            case OPENED_TOKEN_UPDATED: // <-- NOT CALLED
                System.out.println("OPENED_TOKEN_UPDATED");
                break;

            case CLOSED: // <-- NOT CALLED
                System.out.println("CLOSED");
                break;      

            case CLOSED_LOGIN_FAILED: // <-- NOT CALLED
                System.out.println("CLOSED_LOGIN_FAILED");
                break;                          
        }
    }
});

Session session = new Session.Builder(this).setApplicationId("<My APP ID>").build();
session.openForPublish(auth); 
```

这会在设备上生成如下视图：

[http://cl.ly/image/0E2C0t2m2b0g](http://cl.ly/image/0E2C0t2m2b0g)

（未安装 FB 应用程序）。如果用户单击关闭按钮（左上角），则不会触发回调。

如果我`Session.openActiveSession`在相同的场景中使用回调，则会触发。

这是一个错误，还是我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T22:18:15.507

发现了问题。手动创建会话时，必须将此会话设置为静态会话实例上的“活动会话”：

```
Session session = new Session.Builder(this).setApplicationId("<My APP ID>").build();
Session.setActiveSession(session); // <-- MUST DO THIS
session.openForPublish(auth); 
```

# javascript - # 对于 window.location.pathname

> ID：14571873
> 
> 赞同：0
> 
> 时间：2013-01-28T21:49:39.010
> 
> 标签：javascript, window.location

我正在尝试重定向到相对网址，就像这样

```
setTimeout(window.location.pathname = '/help/fusion/index.php#3', 500); 
```

但是# 似乎在传递给window.location.pathname 时会引起问题。错误是

> “在此服务器上找不到请求的 URL /help/fusion/index.php#3。”

但是浏览器实际显示的url是localhost/help/fusion/index.php%233#1。有人知道如何避免这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:52:38.717

您可以使用`window.location`javascript 中的重定向并将函数传递给他的`setTimeOut`函数。尝试这个：

```
setTimeout(function() { window.location = '/help/fusion/index.php#3'; }, 500); 
```

# ios - 在 iOS 中创建属性

> ID：14571880
> 
> 赞同：-6
> 
> 时间：2013-01-28T21:50:07.843
> 
> 标签：ios, objective-c, iboutlet, outlet

我有一个关于 iPhone 应用程序开发的问题。我什么时候需要手动编码属性，什么时候最好使用指针箭头创建 IBOutlets？

例如

```
property(weak, nonatomic) viewController * cont;

property(weak, nonatomic) IBOutlet UIButton * btnEnter; 
```

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:54:33.473

所有属性都是使用@property 声明手动创建的。在最新的 Objective-C 中，您不再需要添加 @synthesize 声明。至于 IBOutlets，他们什么都不做。事实上，IBOutlets 被扩展为一无所有。它们只是被动标签，因此 Interface Builder 可以找到它可以将对象关联到的属性。

因此，在上面的示例中，您可以将在 Interface Builder 中创建的 UIButton 关联到 btnEnter，因为 Interface Builder 知道它，而它知道它的原因是因为 IBOutlet，这在实际代码中没有任何意义。

因此，如果您要创建互连对象的层次结构，就像在 Interface Builder 中为接口所做的那样，则所有属性都需要具有 IBOutlet 标记。

# jira - 插件自定义后 DeleteAttachment 失败

> ID：14571885
> 
> 赞同：0
> 
> 时间：2013-01-28T21:50:35.277
> 
> 标签：jira, jira-plugin

我开发了一个简单的插件来阻止以 .exe 结尾的文件上传到我的 jira 应用程序中。我覆盖了`AttachFile.doValidation()`在文件名中检查 .exe 的方法。如果它在那里，我会返回一个错误。

现在，当我尝试删除附件时，10 次中有 9 次无法正常工作。我只是收到错误“无法删除 ID 为 {id} 的附件”。堆栈跟踪或日志中没有任何内容表明出现问题。然后它会突然删除成功。我没有找到任何押韵或理由。

同样，我覆盖了 AttachFile，而不是 DeleteAttachment，所以我不知道我的修复如何与这个问题相关。可以吗？？

* * *

如果我完全删除我的插件，删除时我仍然会收到错误消息。错误提示“无法完成操作，因为文件已在 Java(TM) Platform SE 二进制文件中打开”。不知何故 AttachFile() 留下了对该文件的引用，但我不知道在哪里或如何清理。

权限不是问题，因为有时删除命令会起作用。它总是在服务器第一次启动时工作，之后只是周期性地工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:05:20.287

我们得出的结论是，这是一个仅限 Windows 的问题，Linux 不会锁定文件。我们的生产服务器是 Linux，所以我不会再花时间在这上面了。

# png - Adobe Fireworks 如何以 PNG 格式存储矢量信息、页面和图层？

> ID：14571893
> 
> 赞同：0
> 
> 时间：2013-01-28T21:50:54.193
> 
> 标签：png, vector-graphics, fireworks

烟花如何能够以平面光栅格式存储这些额外信息。是否有任何开源方法可以以 PNG 格式编写类似的矢量、分层、分页文件，烟花可以读取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:32:07.763

PNG 格式允许[辅助](http://en.wikipedia.org/wiki/Portable_Network_Graphics#Ancillary_chunks)数据块存储图像本身之外的元数据。我不相信任何人实际上已经制定了 Adob​​e 存储该数据的格式。

# java - Camel-Twitter 直接和基于事件的区别

> ID：14571898
> 
> 赞同：2
> 
> 时间：2013-01-28T21:50:58.033
> 
> 标签：java, twitter, apache-camel, esb

我正在考虑使用 camel-twitter（Apache Camel 的 Twitter 组件：http: [//camel.apache.org/twitter.html](http://camel.apache.org/twitter.html)）。我想使用 Twitters Streaming API。

**event**和**direct**类型有什么**区别**？

 ****有人有**使用事件驱动消费者**的**示例代码**吗？（到目前为止我只找到了这个[https://fisheye6.atlassian.com/browse/camel/trunk/components/camel-twitter/src/test/java/org/apache/camel/component/twitter/SearchEventTest.java](https://fisheye6.atlassian.com/browse/camel/trunk/components/camel-twitter/src/test/java/org/apache/camel/component/twitter/SearchEventTest.java)）

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:04:07.187

直接意味着你做一个明确的直接调用来触发推特。例如使用 Camel 中的直接组件通过 twitter 调用路由。

事件是指事件驱动的消费者，您可以在其中让 Twitter 对事件做出反应，例如在搜索中发现的新推文等。

例如，我们还有这个 websocket twitter 示例：[http ://camel.apache.org/twitter-websocket-example.html](http://camel.apache.org/twitter-websocket-example.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:53:53.443

请记住，Streaming API 不能与直接端点一起使用——仅支持事件和轮询。

从 API 使用的角度来看，事件和轮询的工作方式**相同**。打开并维护单个流侦听器。速率限制注意事项没有区别。

唯一的区别是事件端点在收到消息后立即为每条消息发送 1 个事件。轮询将收到的消息排队并在每次轮询时释放它们。

因此，差异纯粹是它们在 Camel 内部的传递方式。就 API 而言，两个流式处理端点是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:37:50.257

Direct 类型告诉消费者/生产者，每次端点以某种方式被激活时，它将连接到 Twitter。假设您想使用保存在数据库中的时间表在 Twitter 上进行搜索：

1.  使用消耗调度数据的 JDBC/JPA 端点
2.  根据数据库中的调度数据动态创建和注册 Quartz 端点
3.  配置您的 Quartz 端点以向您的 Direct Twitter 端点发送消息以在该时刻进行搜索

你会被评价，永远。无论您使用流式传输、直接传输还是轮询。如果您使用的是流媒体，请阅读Twitter 开发人员中心的此[常见问题解答](https://dev.twitter.com/docs/faq#6861)******

# android - Android 如果我的启动器尚未启动并按下主页按钮

> ID：14571902
> 
> 赞同：0
> 
> 时间：2013-01-28T21:51:02.947
> 
> 标签：android, startup, launcher

我开发了一个启动器。在我的设备中，我的应用程序有 3 个启动器和 Android 的默认启动器。如果我之前没有启动过我的应用程序，当我按下主页时，我的应用程序会出现在启动器列表中。所以，当我触摸我的启动器时，由于我之前没有启动它而发生错误。我能做些什么来解决这个问题？

我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.comeks.deneme"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.comeks.deneme.Main"
        android:label="@string/app_name"
        android:screenOrientation="landscape"
        android:excludeFromRecents="true" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:label="@string/app_name"
        android:name=".main.java"
        android:excludeFromRecents="true" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.HOME" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:22:20.100

您的第二个活动的文件名称是什么？主.java.java？

你甚至有两种不同的活动吗？

# java - 当我事先检查是否有元素时，为什么会抛出 NoSuchElement 异常？

> ID：14571903
> 
> 赞同：0
> 
> 时间：2013-01-28T21:51:20.793
> 
> 标签：java, exception, iterator

我有一个 JSP 页面，用户可以在其中选择多个复选框（最多 10 个）。有时，如果选中多个复选框，则会引发 NoSuchElement 异常。

小服务程序代码：

```
 Iterator<ClassInfo> iterateCurrentResultSet = resultSet.iterator();

        //If the current class's location isn't contained in "locations", the user didn't select it so remove
        //It from the results.
        while(iterateCurrentResultSet.hasNext())
        {
            //Evaluate every location they checked for, remove any class that isn't one of these locations.
            for(String selectedLocation : locations)
            {
                //IF THE EXCEPTION OCCURS, IT DOES HERE. Current class location, it this doesn't match the user's selected criteria, it's removed.
                String currentClassLocation = iterateCurrentResultSet.next().getSectionLocation();

                //Check if the user wants to see other classes, if not, continue on.
                if(selectedLocation.equals("OTH"))
                {
                    //If this is false, keep it because it is an "Other" class, such as SFD, CWD, etc.
                    if(mainCampusCode.contains(currentClassLocation))
                    {
                        iterateCurrentResultSet.remove();
                    }//doNothing();
                }
                else
                {
                    //If it does not have one of the selected locations, remove it.
                    if(!currentClassLocation.contains(selectedLocation))
                    {
                        iterateCurrentResultSet.remove();
                    }//doNothing();
                }

            }
        } 
```

我不确定它为什么会抛出，正如我从 JavaDoc 中了解到的那样，如果没有元素，它似乎会发生，但我认为 iterateCurrentResultSet.hasNext() 确保我正在处理一个元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:54:15.703

您在外部循环中检查 for `iterateCurrentResultSet.hasNext()`，但如果有多个，则在 for 循环中多次`locations`调用`next()`。

我会替换

```
String currentClassLocation = iterateCurrentResultSet.next().getSectionLocation(); 
```

经过

```
if(!iterateCurrentResultSet.hasNext())
  break; // exit for-loop if there is no next
String currentClassLocation = iterateCurrentResultSet.next().getSectionLocation(); 
```

# php - php DOM 获取属性

> ID：14571904
> 
> 赞同：7
> 
> 时间：2013-01-28T21:51:22.783
> 
> 标签：php, dom, html-parsing, domdocument, getattribute

好吧，所以我在这里有一个奇怪的案例，我只是想不通。

我想解析网站上的列表。HTML 看起来有点像这样：

```
<!-- ... -->
<ul id="foo">
    <li data-text="item 1">Blabla</li>
    <li data-text="item 2">Blabla</li>
    <li data-text="item 3">Blabla</li>
    <li data-text="item 4">Blabla</li>
</ul>
<!-- ... --> 
```

现在我想获取所有列表项。我为此使用 DOMDocument 类。到目前为止，效果很好：

```
$dom = new DOMDocument();

if (!$dom->loadHTML($html)) {
    die ('Could not parse...');
}

$list = $dom->getElementById('foo');
$items = $list->childNodes;
foreach ($items as $item) {
     print_r($item);
} 
```

但现在，我正在寻找一种简单的方法来读出`data-text`属性。我所做的是：

```
foreach ($items as $item) {
     echo $item->getAttribute('data-text');
} 
```

这对于第一个项目来说效果很好，但是它会使 foreach 循环崩溃。输出是：

> 项目 1
> 致命错误：在第 44 行的 example.php 中调用未定义的方法 DOMText::getAttribute()

我在这里没有得到的是调用该`getAttribute`方法如何更改 foreach 循环的上下文。所以这里有两个问题：

1.  调用该方法如何搞砸我的 foreach 循环？其次，最优雅的解决方法是什么？
2.  我意识到我可以循环`$item->attributes with`另一个 foreach 方法，然后比较属性名称`data-text`并在匹配的情况下读取值，但肯定有更好的方法来做到这一点？！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T22:02:20.990

问题是`ul`有文本节点作为子节点以及`li`s 文本节点没有属性，因此您会收到错误消息。在尝试访问其属性之前，只需测试子节点是否是元素节点

```
foreach ($items as $item) {
         if ($item->nodeType == XML_ELEMENT_NODE)
         echo $item->getAttribute('data-text');
} 
```

您也可以使用[`getElementsByTagName()`](http://php.net/manual/en/domelement.getelementsbytagname.php)，尽管如果您有嵌套列表，`li`其中的 s 也会被选中。

```
$items = $list->getElementsByTagName('li');
foreach ($items as $item) {
    echo $item->getAttribute('data-text');
} 
```

# c++ - 如何在 C++ 中创建仅存储 2 位的 int？

> ID：14571906
> 
> 赞同：3
> 
> 时间：2013-01-28T21:51:40.717
> 
> 标签：c++, variables

有没有办法创建只能具有 3 个值之一的变量？

我想创建一个返回三种可能状态之一的函数，我认为在这种情况下使用整数会不必要地占用大量内存空间。

那么，有什么方法可以创建仅在内存中存储 3 位并且可以用作函数返回的变量？如果是这样，请给我建议如何将其重写为更好的东西：

```
int ReturnOneOfThreeStates(){
     return 0 //Let's say 0=green, 1=red, 2=blue
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T21:53:49.107

> 有没有办法创建只能具有 3 个值之一的变量？

您可以使用枚举：

```
enum TriState { One, Two, Three }; 
```

在 C++11 中，您可以指定表示枚举的基础整数类型：

```
enum TriState : char { One, Two, Three}; 
```

C++11 的另一个优点是您可以将其*设为强类型*：

```
enum class TriState : char { One, Two, Three}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:01:08.443

唯一真正的解决方案是创建一个子范围类，它将值存储在一个`int`（或其他整数类型）上，并在每个可能修改值的函数中强制执行范围不变量。

请注意，空间参数仅适用于该类型的大型数组。在这种情况下，可以编写一个`MyValueTypeVector`类，每个值只使用 2 位（如果最多有三个值）。在大数组之外，提取和插入值所需的额外代码将占用比值本身更多的空间；在许多情况下，编译器会将`int`a 放入寄存器中，它根本不会占用任何空间。并且不要忘记，即使在大型数组中，您也可能会将访问时间（从索引）增加一个数量级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T22:07:44.323

答案分为两部分：您需要一种*返回*三个值之一的方法，以及一种将多个此类值打包到内存中的方法。

[*枚举类型*](http://msdn.microsoft.com/en-us/library/2dzy4k6e%28v=vs.71%29.aspx)[的值](http://msdn.microsoft.com/en-us/library/2dzy4k6e%28v=vs.71%29.aspx)可以解决第一个问题：通过定义一个，`enum`您可以将函数返回的值的声明范围限制为三个值。但是，这不会让您节省任何内存：`enum`s 不能小于 8 位。

您需要将较小的值*打包*成较大的值以节省内存。这仅在您声明足够大小的值数组以使打包有意义时才有效。基本方法是切出您需要的位，将它们移动到适当的位置，然后`OR`移到所需的位置。

这是使用 2 位数字的方法：一个 8 位值可以存储四个这样的数字。`N`2 位值的数组需要`(N+3)/4`8 位值。位置处的元素在`x`字节`x/4`中，在位置中`x%4`（即`0`、`1`、`2`或`3`）。您将获得所需的 2 位元素，如下所示：

```
int twoBit = (array[x/4] >> (2*(x%4))) & 3;
//            ^^^^^^^^^^     ^  ^^^      ^
//                 |         |   |       +-- Get the last two bits
//                 |         |   +---------- Get sub-element 0..3
//                 |         +-------------- Multiply by 2, because there are 2 bits per subelement
//                 +------------------------ Get the desired 8-bit element 
```

设置值则相反：

```
uint8_t mask = 3 << (2*(x%4));           // Prepare the mask
array[x/4] &= ~mask;                     // Clear out the desired two bits
array[x/4] |= (twoBit & 3) << (2*(x%4)); // OR in the desired bits 
```

如果您不需要数组，但想在一个较大的`struct`或 a中打包几个两位值`class`，您可以使用[*Bit Fields*](http://msdn.microsoft.com/en-us/library/ewwyfdbe%28v=vs.71%29.aspx)。在这种情况下，如果可以打包数据，编译器将为您完成所有打包工作。请注意，您放置数据成员的顺序很重要，并且可以更改您节省的内存量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T01:40:13.373

是和不是。如果它是另一个类或结构的一部分，那么是的，您可以使用位域获得有效的好处。

```
// bit_fields1.cpp
struct Date
{
   unsigned nWeekDay  : 3;    // 0..7   (3 bits)
   unsigned nMonthDay : 6;    // 0..31  (6 bits)
   unsigned nMonth    : 5;    // 0..12  (5 bits)
   unsigned nYear     : 8;    // 0..100 (8 bits)
}; 
```

你可以返回一个只有一个成员位域的结构（例如，只是上面的一个字段）---但不确定它是否能解决你的情况。函数的返回值至少消耗一个 8 位寄存器想象一下你关心的任何目标机器......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T22:07:17.603

这里有两个问题。

一个是关于函数参数和返回值等，它们只包含你正在谈论的值。这些不可能少于一个字符。实际上，让它们占用比整数更少的空间在大多数情况下并不是非常有用。

另一个是关于存储。要么存储为类的成员，要么存储这些值的某种集合。在那里，您可以使用各种技术和技巧让它们占用不到一个字节。

事实上，如果你有大量的它们，或者需要将它们与许多其他类型的值范围非常有限的数据结构结合起来存储，你甚至可以让它们占据一小部分。这将涉及 CPU 权衡，以从它们共享空间的较大数据类型中提取值。但这是可能的。

就目前而言，如果您总是将这个小范围值与相同组合中的其他值传递，您可以将函数参数问题变成存储问题。但如果它们需要直接作为参数传递，则不能这样做。

我将很快发布几个示例，说明如何为每种用途定义这种类型。

对于价值传递，[这个答案](https://stackoverflow.com/a/14571938/167958)有它。使用`enum`. 在 C++11 中，您可以选择`enum`将 表示为使用`enum Foo : char { Val1, Val2, Val3 };`.

要存储它们的整个数组，您可以使用以下技术：

```
#include <limits>

enum Foo : char { Val1, Val2, Val3 };

template <unsigned int NumFoos>
class FooArray {
   static constexpr unsigned int foos_in_x(unsigned long long x) noexcept(true) {
       return (x > 3) ? (1 + foos_in_x(x / 3)) : 0;
   }
   static constexpr unsigned int foos_per_ll = foos_in_x(::std::numeric_limits<unsigned long long>::max());
   static constexpr unsigned long long array_size() noexcept(true) {
       return (NumFoos + (foos_per_ll - 1)) / foos_per_ll;
   }
   static constexpr unsigned int div_value(unsigned int n) {
       return (n == 0) ? 1 : (3 * div_value(n - 1));
   }

 public:
   explicit FooArray(Foo defaultval = Val1);
   ~FooArray();

   Foo operator[](unsigned long long pos) const {
       const unsigned long long arypos = pos / foos_per_ll;
       const unsigned int fooval = (foovals_[arypos] / div_value(pos % foos_per_ll)) % 3;
       return (fooval == 0) ? Val1 : ((fooval == 1) ? Val2 : Val3);
   }

 private:
   unsigned long long foovals_[array_size()];
}; 
```

当然，非常`operator []`量将不得不返回一个特殊的引用类型，如果它被分配到，它将在数组中调整适当的值。如果您发现如何做到这一点令人困惑，我可以写一个分配函数如何工作的示例。这类似于如何从其 non-const`::std::bitset`返回类型。`reference``operator []`

# .net - 将解决方案从 vs 2010 移动到 vs 2012 会出现以下错误

> ID：14571918
> 
> 赞同：-1
> 
> 时间：2013-01-28T21:52:30.120
> 
> 标签：.net, visual-studio, ms-office

> 错误 15“自定义功能区类”未实现接口成员“Microsoft.Office.Tools.Ribbon.RibbonComponent.RibbonUI”、“Microsoft.Office.Tools.Ribbon.RibbonComponent.ResumeLayout(bool)”

以及更多类似的错误。

谁能帮我这个？这是给出所有错误的文件的一部分。

来自文件 Stjonbord.designer.cs

```
namespace VefKennsla
{
    partial class Stjonbord : Microsoft.Office.Tools.Ribbon.OfficeRibbon
    {
        private System.ComponentModel.IContainer components = null;

        public Stjonbord()
        {
            InitializeComponent();
        }

        #region Component Designer generated code

        private void InitializeComponent()
        {
            this.Stjornbord = new Microsoft.Office.Tools.Ribbon.RibbonTab();
            this.grBil = new Microsoft.Office.Tools.Ribbon.RibbonGroup(); 
```

这是设计器生成的代码，但它给出了很多像这条线这样的错误

this.Stjornbord = new Microsoft.Office.Tools.Ribbon.RibbonTab();

给出此错误：错误 36 无法创建抽象类或接口 'Microsoft.Office.Tools.Ribbon.RibbonTab' 的实例 ...\Stjonbord.designer.cs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:30:57.783

我敢打赌，参考文献存在一些问题。展开项目的引用节点，查看是否缺少一些或是否有任何黄色警告标志。

# jquery-ui - 将函数添加到 jQuery 可拖动还原“事件”

> ID：14571919
> 
> 赞同：24
> 
> 时间：2013-01-28T21:52:32.897
> 
> 标签：jquery-ui, revert, jquery-draggable

# 是）我有的：

我有一个可拖动的 div，其还原参数设置为“无效”。

# 我需要的：

当还原发生时，我想触发对另一个元素的 CSS 更改。

# 问题：

“revert”是参数而不是事件，所以当恢复发生时我在触发所需的 CSS 更改时遇到了很大的困难。

# 我的代码：

```
$('#peg_icon').draggable({
    revert: 'invalid',
    scroll: false,
    stack: "#peg_icon",
    drag: function(event, ui) {
        $('#peg_icon').css('background-image','url(images/peg-icon-when-dragged.png)');
    }
}); 
```

# 我试过的：

我没有成功尝试使用“revert”作为事件：

```
revert: function(event, ui) {
    $('#peg_icon').css('background-image','url(images/peg-icon-default.png)');
}, 
```

我也没有成功地尝试让 revert 参数来获取这个功能：

```
function(socketObj)
  {
     //if false then no socket object drop occurred.
     if(socketObj === false)
     {
        //revert the peg by returning true
        $('#peg_icon').css('background-image','url(images/peg-icon-default.png)');
        return true;
     }
     else
     {
        //return false so that the peg does not revert
        return false;
     }
  } 
```

# 语境：

我正在拖动一个 div，当拖动时，背景图像会发生变化，当拖动恢复时，背景图像会恢复到原始状态。

# 我的问题：

当拖动发生还原时，如何触发对另一个元素的 CSS 更改？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-28T22:36:57.330

事实证明，revert 可以接受一个方法。有关完整示例，请参见此内容：http: [//jsfiddle.net/mori57/Xpscw/](http://jsfiddle.net/mori57/Xpscw/)

具体来说：

```
$(function() {
    $("#ducky").draggable({
        revert: function(is_valid_drop){
            console.log("is_valid_drop = " + is_valid_drop);
            // when you're done, you need to remove the "dragging" class
            // and yes, I'm sure this can be refactored better, but I'm 
            // out of time for today! :)
            if(!is_valid_drop){
               console.log("revert triggered");
                $(".pond").addClass("green");
                $(this).removeClass("inmotion");
               return true;
            } else {
                $(".pond").removeClass("green");
                $(this).removeClass("inmotion");
            }
        },
        drag: function(){
            // as you drag, add your "dragging" class, like so:
            $(this).addClass("inmotion");
        }
    });
    $("#boat").droppable({
      drop: function( event, ui ) {
        $(this)
          .addClass("ui-state-highlight");
      }
    });
  }); 
```

希望这会有所帮助......我猜你试图修改的是问题，而不是尝试使用 revert 和函数调用。再次查看您尝试设置的 CSS，看看您的问题是否存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:39:52.107

你想做这样的事情：

```
 $('#peg_icon').draggable({
        revert: function (socketObj) {
        if (socketObj === true) {
            // success
            return false;
        }
        else {
            // reverting
            return true;
        }
    },
        scroll: false,
        stack: "#peg_icon",
        drag: function(event, ui) {
            $('#peg_icon').css('background-image','url(images/peg-icon-when-dragged.png)');
        }
    }); 
```

演示：http: [//jsfiddle.net/yTMwu/35/](http://jsfiddle.net/yTMwu/35/)

希望这可以帮助！

# ssh - WinSCP：服务器拒绝了我们的密钥

> ID：14571920
> 
> 赞同：3
> 
> 时间：2013-01-28T21:52:35.793
> 
> 标签：ssh, putty, private-key, winscp

好的，我已经与我们生产机器上的服务器建立了有效连接。我需要在我的开发机器上复制它，以便我可以传输我自己的文件。一切都是一样的，直到操作系统。

当我尝试连接时，我得到的只是：

> 服务器拒绝了我们的密钥。

这是我的日志文件...

```
. 2013-01-28 15:26:25.738 Session name: hex166t@65.XXX.XX.XXX (Modified stored session)
. 2013-01-28 15:26:25.738 Host name: 65.XXX.XX.XXX (Port: 1XXXX)
. 2013-01-28 15:26:25.738 User name: hex166t (Password: Yes, Key file: Yes)
. 2013-01-28 15:26:25.738 Tunnel: No
. 2013-01-28 15:26:25.738 Transfer Protocol: SFTP
. 2013-01-28 15:26:25.738 Ping type: -, Ping interval: 30 sec; Timeout: 15 sec
. 2013-01-28 15:26:25.738 Proxy: none
. 2013-01-28 15:26:25.738 SSH protocol version: 2; Compression: No
. 2013-01-28 15:26:25.738 Bypass authentication: No
. 2013-01-28 15:26:25.738 Try agent: Yes; Agent forwarding: No; TIS/CryptoCard: No; KI: Yes; GSSAPI: No
. 2013-01-28 15:26:25.738 Ciphers: aes,blowfish,3des,WARN,arcfour,des; Ssh2DES: No
. 2013-01-28 15:26:25.738 SSH Bugs: A,A,A,A,A,A,A,A,A,A
. 2013-01-28 15:26:25.738 SFTP Bugs: A,A
. 2013-01-28 15:26:25.738 Return code variable: Autodetect; Lookup user groups: A
. 2013-01-28 15:26:25.738 Shell: default
. 2013-01-28 15:26:25.738 EOL: 0, UTF: 2
. 2013-01-28 15:26:25.738 Clear aliases: Yes, Unset nat.vars: Yes, Resolve symlinks: Yes
. 2013-01-28 15:26:25.738 LS: ls -la, Ign LS warn: Yes, Scp1 Comp: No
. 2013-01-28 15:26:25.738 Local directory: default, Remote directory: home, Update: Yes, Cache: Yes
. 2013-01-28 15:26:25.738 Cache directory changes: Yes, Permanent: Yes
. 2013-01-28 15:26:25.738 DST mode: 1
. 2013-01-28 15:26:25.738 --------------------------------------------------------------------------
. 2013-01-28 15:26:25.808 Looking up host "65.XXX.XX.XXX"
. 2013-01-28 15:26:25.808 Connecting to 65.XXX.XX.XXX port 1XXXX
. 2013-01-28 15:26:25.858 Waiting for the server to continue with the initialisation
. 2013-01-28 15:26:25.858 Detected network event
. 2013-01-28 15:26:25.938 Detected network event
. 2013-01-28 15:26:25.938 Server version: SSH-2.0-Connect:Enterprise_UNIX_2.4.02
. 2013-01-28 15:26:25.938 Using SSH protocol version 2
. 2013-01-28 15:26:25.938 We claim version: SSH-2.0-WinSCP_release_5.1.3
. 2013-01-28 15:26:25.938 Waiting for the server to continue with the initialisation
. 2013-01-28 15:26:25.998 Detected network event
. 2013-01-28 15:26:25.998 Doing Diffie-Hellman group exchange
. 2013-01-28 15:26:25.998 Waiting for the server to continue with the initialisation
. 2013-01-28 15:26:26.258 Detected network event
. 2013-01-28 15:26:26.258 Doing Diffie-Hellman key exchange with hash SHA-1
. 2013-01-28 15:26:26.438 Waiting for the server to continue with the initialisation
. 2013-01-28 15:26:26.678 Detected network event
. 2013-01-28 15:26:26.898 Verifying host key rsa2 0x23,0xdf2a07bac36 with fingerprint ssh-rsa 2048 fe:03:bc:ad:66 
. 2013-01-28 15:26:26.908 Host key matches cached key
. 2013-01-28 15:26:26.908 Host key fingerprint is:
. 2013-01-28 15:26:26.908 ssh-rsa 2048 fe:03:bc:ad:66 
. 2013-01-28 15:26:26.908 Initialised AES-256 CBC client-    >server encryption
. 2013-01-28 15:26:26.908 Initialised HMAC-SHA1 client-    >server MAC algorithm
. 2013-01-28 15:26:26.908 Initialised AES-256 CBC server-    >client encryption
. 2013-01-28 15:26:26.908 Initialised HMAC-SHA1 server-    >client MAC algorithm
. 2013-01-28 15:26:26.908 Waiting for the server to continue with the initialisation
. 2013-01-28 15:26:27.048 Detected network event
. 2013-01-28 15:26:27.048 Reading private key file "Z:\prd\PS_DATA\HSBCfingateway\hsbccerts\hsbc-ensco.ppk"
. 2013-01-28 15:26:27.058 Using username "hex166t".
. 2013-01-28 15:26:27.108 Waiting for the server to continue with the initialisation
. 2013-01-28 15:26:27.158 Detected network event
. 2013-01-28 15:26:27.168 Offered public key
. 2013-01-28 15:26:27.168 Waiting for the server to continue with the initialisation
. 2013-01-28 15:26:27.228 Detected network event
. 2013-01-28 15:26:27.228 Server refused our key
. 2013-01-28 15:26:27.258 Server refused our key
. 2013-01-28 15:26:27.258 Attempting keyboard-interactive authentication
. 2013-01-28 15:26:27.258 Waiting for the server to continue with the initialisation
. 2013-01-28 15:26:27.298 Detected network event
. 2013-01-28 15:26:27.298 Server refused keyboard-interactive authentication
. 2013-01-28 15:26:27.298 Prompt (7, SSH password, , &Password: )
. 2013-01-28 15:26:27.298 Using stored password.
. 2013-01-28 15:26:27.308 Sent password
. 2013-01-28 15:26:27.308 Waiting for the server to continue with the initialisation
. 2013-01-28 15:26:27.418 Detected network event
. 2013-01-28 15:26:27.418 Password authentication failed
. 2013-01-28 15:26:27.418 Access denied
. 2013-01-28 15:26:27.458 Prompt (7, SSH password, , &Password: )
. 2013-01-28 15:26:45.497 Attempt to close connection due to fatal exception:
. 2013-01-28 15:26:45.497 Closing connection.
. 2013-01-28 15:26:45.497 Sending special code: 12
. 2013-01-28 15:26:45.559 (ESshFatal) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:21:41.733

您没有正确设置私钥身份验证。

确保将公钥添加到`~/.ssh/authorized_keys`服务器上。

当您加载您的私钥时，您将在 Public key 中的 PuTTYgen 中以正确的格式获取公钥指纹，*以便粘贴到 OpenSSH authorized_keys 文件框中。*

有关详细信息，请参阅文章[设置 SSH 公钥身份验证](https://winscp.net/eng/docs/guide_public_key)。

* * *

虽然 OP 不是这种情况，但在将旧版本的 WinSCP 连接到需要 rsa-sha2 的服务器时，您可能会收到相同的错误消息*（服务器拒绝我们的密钥） 。*WinSCP[仅从 5.20 起支持 rsa-sha2](https://winscp.net/tracker/1952)。从 8.8 开始，OpenSSH 服务器默认需要 rsa-sha2。旧版本也可以配置为需要它。另一方面，即使是 8.8 和更高版本也可以配置为不需要 rsa-sha2 ( `PubkeyAcceptedAlgorithms +ssh-rsa`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T07:43:40.670

对于我的情况，我尝试了

```
$chmod 0600 authorized_keys 
```

然后它工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-28T06:26:59.743

我遇到了同样的问题，四处寻找并通过在目标服务器上运行这些命令来解决：

```
chmod 700 .ssh
chmod 600 .ssh/authorized_keys
chown $USER:$USER .ssh -R 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-15T01:00:42.953

另请参阅[https://winscp.net/forum/viewtopic.php?t=31767：5.20](https://winscp.net/forum/viewtopic.php?t=31767)之前版本的 Winscp 无法再使用 openssh-8.8 进行身份验证。

# android - ExpandableListView：不同的视图组

> ID：14571921
> 
> 赞同：1
> 
> 时间：2013-01-28T21:52:37.610
> 
> 标签：android

我正在尝试对 ExpandableListView 进行子类化，以便可以添加不同的组。

通过不同的组，我的意思是每个组包含不同的子视图类型（其中所有子视图在整个组中都是相同的）。

那是：

```
Group 1
   TextView 1
   TextView 2
   TextView 3
Group 2
   EditText 1
   EditText 2
   EditText 3
... 
```

我尝试在 LinearLayout 中将两个 ELV 堆叠在一起，但是我试图获得的主要行为（这是我首先使用 ELV 的唯一原因）丢失了：每个列表都可以独立滚动，其中如果使用包含多个组的单个 ELV，它们将一起滚动）。

我已经看过帖子了

[如何在android的父级可扩展列表中添加图像？](https://stackoverflow.com/questions/1353101/how-to-add-image-in-expandable-list-in-parent-in-android)

然而，这并不是我想要的。这解决了组内多个不同子项的问题：

```
Group 1
    TextView 1
    Image 1
    ----------
    TextView 2
    Image 2
    ... 
```

我敢肯定，如果有足够的时间，我也许可以从中弄清楚，但我想看看是否有人以前做过。

我已经实现了我的 ELV 适配器，并且一切都可以编译和运行，现在我准备修改代码来解决这个特殊问题。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:00:19.443

android不支持该功能。一种常见的方法是为列表元素创建一个包装器对象。例如，假设您想在列表中显示`Car`s 和`Person`s，那么您将执行类似的操作

```
class ListElement {
  Car car = null;
  Person person = null;
} 
```

在运行时，要么为空，`car`要么`person`为空。在您的实施中`getView()`，您会执行类似的操作，

```
ListElement e = getItem(position);
if (e.car != null) {
  // create view for Car
} else if (e.person != null) {
  // create view for Person
} else {
  // error!
} 
```

如果你使用你的转换视图（你应该这样做），你必须小心。例如，如果转换视图被夸大为 a `Car`，并且您应该获得 a 的视图`Person`。解决这个问题的一种方法是创建一个包含`Car`和`Person`视图的超级视图，然后您只需隐藏或显示`getView()`.

```
<FrameLayout ...>
  <LinearLayout android:id="@+id/car_layout" ... />
  <LinearLayout android:id="@+id/person_layout" ... />
</FrameLayout> 
```

另一种方法是有两个单独的可扩展`ListView`s。

# iphone - AVAssetWriter 输出文件被旋转

> ID：14571923
> 
> 赞同：1
> 
> 时间：2013-01-28T21:52:44.187
> 
> 标签：iphone, ios, mov

为什么当您加载肖像 JPGS 并尝试使用 AVAssetWriter 时，生成的 mov 文件会旋转 90？

别人看到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:57:59.540

如果肖像 jpg 是在 iPhone 上制作的，那么它们的原生像素格式实际上是风景。有一个元数据标志，它告诉 iOS 在显示 jpg 时旋转视图以以正确的方向显示它。

我猜想当您使用 AVAssetWriter 创建一个 mov 时，该 mov 不使用方向元数据。所以它将以原生像素方向显示 mov，即横向。图像似乎已顺时针旋转了 90 度。有一种*可能性*（我没有测试过）您可以将方向元数据转移到 mov 文件中，但这不会是一个非常强大的解决方案，因为它将依赖于元数据感知环境中的播放/演示。

解决此问题的最佳方法是检查方向标志，如果是纵向，则将 jpg 物理旋转为纵向并将其写入新位图。使用这个新的位图作为 AVAssetWriter 的输入。

以下是一些相关信息：
[在 IOS 6.0 或 iPhone 中上传期间捕获的照片自动旋转](https://stackoverflow.com/questions/13971491/captured-photo-automatically-rotated-during-upload-in-ios-6-0-or-iphone/13974815#13974815)
[强制 UIImagePickerController 以纵向/尺寸拍摄照片 iOS](https://stackoverflow.com/questions/14484816/force-uiimagepickercontroller-to-take-photo-in-portrait-orientation-dimensions-i/14491293#14491293)

# datatable - .NET WebApi + 数据表

> ID：14571927
> 
> 赞同：6
> 
> 时间：2013-01-28T21:52:55.123
> 
> 标签：datatable, json.net

我正在构建一个 .NET WebApi 项目。我的一个 ApiControllers 返回一个数据表。在 JSON 格式中，一切看起来都不错，但 XML 格式包含太多我不需要的垃圾。

所以，我在想，让我们编写自己的 XML 序列化。为此，我创建了一个实现 IXmlSerializable 的新类。它看起来像这样：

```
public class MyDataTable : IXmlSerializable
{
    public MyDataTable(DataTable datatable)
    {
        this.Data = datatable;
    }

    public void WriteXml(XmlWriter writer)
    {

        writer.WriteStartElement("Test");
        writer.WriteElementString("T", "hello world");
        writer.WriteEndElement();
    }

    public XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(XmlReader reader)
    {
        throw new NotImplementedException();
    }

    public DataTable Data { get; set; }
} 
```

现在我的 XML 看起来很棒，但我的 JSON 不是。JSON 看起来像：

```
{"Data":[{"id":1,"name":"John"},{"id":2,"name":"Julia"}]} 
```

我真正想要的是：

```
[{"id":1,"name":"John"},{"id":2,"name":"Julia"}] 
```

有没有一种简单的方法可以从 JSON 结果中删除“数据”字符串，而无需重写整个内容？还是有比这个更好的解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T20:01:00.853

我已经编写了自己的数据表序列化来实现我的目标。

对于感兴趣的人：

```
[JsonConverter(typeof(DataTableConverter))]
[XmlRoot("Result")]
public class MyDataTable : IXmlSerializable
{
    public MyDataTable(DataTable datatable)
    {
        this.Data = datatable;
    }

    public void WriteXml(XmlWriter writer)
    {
        foreach (DataRow row in Data.Rows)
        {
            writer.WriteStartElement(Data.TableName);
            foreach (DataColumn column in row.Table.Columns)
            {
                writer.WriteElementString(column.ColumnName, row[column].ToString());
            }
            writer.WriteEndElement();
        }
    }

    public XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(XmlReader reader)
    {
        throw new NotImplementedException();
    }
    public DataTable Data { get; set; }
} 
```

还有一个自定义 JSON 转换器：

```
public class DataTableConverter : JsonConverter
{

    public override bool CanConvert(Type objectType)
    {
        return typeof(MyDataTable).IsAssignableFrom(objectType);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        MyDataTable myDataTable = value as MyDataTable;
        DataTable dt = myDataTable.Data;

        writer.WriteStartArray();

        foreach (DataRow row in dt.Rows)
        {
            writer.WriteStartObject();
            foreach (DataColumn column in row.Table.Columns)
            {
                writer.WritePropertyName(column.ColumnName);
                serializer.Serialize(writer, row[column]);
            }
            writer.WriteEndObject();
        }

        writer.WriteEndArray();
    }
} 
```

像这样实现新的 DataTable 类：

```
public class ValuesController : ApiController
{
    // GET api/values
    public MyDataTable Get()
    {
        DataTable dt = new DataTable();
        dt.TableName = "info";
        using (SqlConnection cn = new SqlConnection("Data Source=(local);Initial Catalog=ApiPoc;Integrated Security=true;"))
        {
            cn.Open();
            using (SqlCommand cm = new SqlCommand("select * from employee",cn))
            {
                SqlDataReader dr = cm.ExecuteReader();
                dt.Load(dr);
            }
        }
        MyDataTable md = new MyDataTable(dt);
        return md;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:08:19.360

尝试将 [XmlElement] 放在上面`Data`。

# python - Python TypeError：“NoneType”对象没有属性“__getitem__”

> ID：14571932
> 
> 赞同：1
> 
> 时间：2013-01-28T21:53:25.717
> 
> 标签：python, runtime-error

使用柯林斯头部规则从一个句子中获取词条的项目。

这是我得到的错误：

```
File "C:\Users\PC\Desktop\Python27\PyProject\src\Feature\FeatureExtractor.py", line 225, in collinsHeadExtractor
    if raw['whWord']=='whWord-what':
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

这是生成错误的代码部分：

```
def whoPattern(question):
            p1 = re.compile("^[w|W]ho (is|are|was|were)( the)*( \`\`)*( [A-Z][a-z]+)+( \'\')* \?$")
            if p1.match(question):
                return "HUM:desc"
            p2 = re.compile("^[w|W]ho (is|was) .*")
            if p2.match(question):
                return "Hum:ind"
        if training:
            file = DBStore.trainingRoot+"\\headword_question"+colName+".txt"
        else:
            file = DBStore.testingRoot+"\\headword_question"+colName+".txt"
        f = open(file,'r')
        p = re.compile(r"(?P<head>.+)::(?P<question>.+)")
        i = 0
        rawQuestions = DBStore.getDB()['raw'+colName]
        p2 = re.compile('\.')
        headWord = []
        for line in f:
            print iWor
            i = i + 1
            match = p.match(line)
            print match.group('question')
            head = p2.sub('',match.group('head'))
            question = match.group('question')
            raw = rawQuestions.find_one({'question':question})
            if raw['whWord']=='whWord-what':
                pattern = whatPattern(question)
            elif raw['whWord']=='whWord-who':
                pattern = whoPattern(question)
            else:
                pattern = None
            if head.isupper() and (pattern == "DESC:def_1" or pattern == 'DESC:def_2'):
                pattern = "ABBR:exp"
            if head == 'null':
                headWord = [None,pattern]
            elif pattern is None:
                headWord = [head,pattern]
            else:
                headWord = [None,pattern]
            rawQuestions.update({'question':question},{"$set":{"head":headWord}},safe=True,multi=True) 
```

任何帮助解决这个问题都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T21:55:01.497

这意味着`rawQuestions.find_one({'question':question})`已经返回`None`。

# c# - 为什么使用 Rhino Mock Stub 方法？

> ID：14571943
> 
> 赞同：3
> 
> 时间：2013-01-28T21:54:06.543
> 
> 标签：c#, rhino-mocks

我刚开始使用 Rhino mock 为我的项目设置测试用例。**.Return(objToReturn:list)**究竟是做什么的？

如果我初始化并填充列表然后将其传递给模拟存根方法，它似乎才起作用。我假设我可以使用 Mock Stub 方法填充一个列表，然后返回该填充的列表。

```
....
    private ProductRepository _productRepository;
    private IProductRepository _productRepositoryStub;

    [SetUp]
    public void SetUp()
    {
        _productRepository = new ProductRepository();

        //Testing using Rhino Mocks
        //Generate stub
         _productRepositoryStub = MockRepository.GenerateMock<IProductRepository>();
    }

    [Test]
    public void Canquerydb()
    {
        IList list = _productRepository.GetAllProducts();
        _productRepository.Stub(x=> x.GetAllProducts()).Return(list);
        _productRepositoryStub.AssertWasCalled(x => x.GetAllProducts());
    }

    /// <summary>
    /// Refaactor and use MockRhino here
    /// </summary>
    [Test]
    public void can_insert_product()
    {
        IProduct product = new Grains("Cheese Bread", "Dairy grain", 0);
        _productRepository.SaveProduct(product);
        _productRepositoryStub.Stub(x=>x.SaveProduct(product));
        _productRepositoryStub.AssertWasCalled(x => x.SaveProduct(product));

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T23:01:20.363

要回答您的问题的标题：Rhino mocks 区分了 Mocks 和 Stubs。Mock 是唯一可以使测试失败的东西，因为它是您正在测试的东西的包装实例 - 您的被测系统 (SUT)。你在 Rhino 模拟中“存根”一些东西，这样你就可以满足你模拟对象的依赖关系。存根使您可以查看传递给它的参数，并让您控制返回结果，以便您可以完全隔离地对 Mock 的行为进行断言。

该站点[对 Mocks 和 Stubs 有进一步的解释](http://artofunittesting.com/)。

另外，像[Moq](http://code.google.com/p/moq/)这样的库不区分 Mocks 和 Stubs。通过使用泛型，您不必模拟您的 SUT。我个人更喜欢这种简单的起订量。

# linux - 无法通过 nautilus 查看分区

> ID：14571945
> 
> 赞同：0
> 
> 时间：2013-01-28T21:54:10.947
> 
> 标签：linux, permissions, partitioning, mount, nautilus

我正在尝试从我的 fedora 17 机器上的另一个分区查看访问文件，但它显示“无法显示文件夹内容。您没有查看“alex”内容所需的权限”。

我在 Fedora 17 上以具有相同用户名和密码的帐户运行 nautilus，该帐户拥有来自另一个分区的文件，这可能没有任何意义。我将如何授予自己在另一个分区上查看自己的文件的权限？

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:47:54.110

亚历克斯，

文件存储在您的文件系统中，并由 inode 指向。Inode 包含文件元数据，例如访问控制、创建/修改/访问时间及其用户 ID。

当您使用`ls`or之类的命令列出文件时`stat`，它们会将 UID 映射到使用 /etc/passwd 作为键的用户名。您可以告诉他们不要通过`ls -n $file`或解析 UID->username `stat -c %u $file`。

如果您键入`id`，您将看到您正在操作的当前 UID。如果另一个分区上文件的 UID 与您当前的 UID 不同，您将看到此问题。如果您有 root 访问权限，您可以将文件的所有权更改为您的普通用户的 UID ( `man chown`)，该 UID 位于您当前操作系统的 /etc/passwd 文件中。然后您应该能够以普通用户的身份访问这些文件。

也就是说，如果您的问题是 UID 不匹配:)

# c# - 在 WPF 窗口中嵌入 win32 窗口，无需 HwndHost

> ID：14571951
> 
> 赞同：2
> 
> 时间：2013-01-28T21:54:28.000
> 
> 标签：c#, wpf, winapi, interop

我需要在我的 WPF 窗口中托管 win32 窗口，但我需要它们像用户控件一样工作。其他控件需要能够出现在它们之上，并且它们应该能够被放入选项卡控件等中。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:59:14.407

Not directly. [Airspace issues](http://msdn.microsoft.com/en-us/library/aa970688%28v=vs.110%29.aspx) apply here, which prevents you from using the HWND (Win32) window directly like you would other content.

There are various workarounds, such as this [AirspaceOverlay control](http://blogs.msdn.com/b/pantal/archive/2007/07/31/managed-directx-interop-with-wpf-part-2.aspx). These function by creating a separate WPF `Window` without chrome, and "overlaying" it on top of your HWND, moving it as needed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:58:22.597

在我看来是做不到的。

您可以尝试使用 winform 用户控件并将其放在 windowsformhost 控件中，但即使在这种情况下，windowsformhost 它始终位于顶部，并且您不能将其他控件放在它上面。其原因被称为[空域](http://msdn.microsoft.com/en-us/library/aa970688.aspx)问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:58:43.720

不，您最多可以隐藏本机窗口并转发图形以及它与 WPF 控件（ala 远程桌面）之间的用户交互。但这实际上不会在您的 WPF 窗口上托管本机窗口（如果本机窗口与其父窗口交互，它将被破坏）。

这是因为所有 WPF 内容都在单个 Win32 窗口中，在 Win32 z 顺序中的单个插槽中，因此其他 WPF 内容不能同时位于此其他子控件的下方和上方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T21:58:57.573

当然，可以在 WPF API 中嵌入 Win32 窗口。例如：

[如何将另一个应用程序的窗口嵌入到我们的 WPF 窗口中作为用户控件？](https://stackoverflow.com/questions/4608130/how-to-embed-window-from-another-application-in-our-wpf-window-as-user-control)

```
Process p = Process.Start(@"application.exe");

p.WaitForInputIdle();
IntPtr appWin = p.MainWindowHandle;

SetParent(appWin, parent);
SetWindowLong(appWin, GWL_STYLE, WS_VISIBLE);
System.Threading.Thread.Sleep(100);
MoveWindow(appWin, 0, 0, ClientRectangle.Width, ClientRectangle.Height, true); 
```

问：您的 WPF UI 会“意识到”这个（低级）窗口吗？
答：不-当然不是:)

Q: What do you mean by "without hWndHost"?
If you mean you don't want to use code like the above ... you're probably [SOL](http://www.urbandictionary.com/define.php?term=sol). At least using WPF...

'Hope that's helps ... at least a little bit...

# php - php if elseif 自定义样式

> ID：14571953
> 
> 赞同：0
> 
> 时间：2013-01-28T21:54:30.200
> 
> 标签：php, list, styles, opencart

我试图在 opencart cms 中使用自定义 css 样式制作运输方法。

本节中的默认代码为：

```
<tr class="highlight">
<td><?php if ($quote['code'] == $code || !$code) { ?>
  <?php $code = $quote['code']; ?>
  <input type="radio" name="shipping_method" value="<?php echo $quote['code']; ?>" id="<?php echo $quote['code']; ?>" checked="checked" />
  <?php } else { ?>
  <input type="radio" name="shipping_method" value="<?php echo $quote['code']; ?>" id="<?php echo $quote['code']; ?>" />
  <?php } ?></td>
<td><label for="<?php echo $quote['code']; ?>"><?php echo $quote['title']; ?></label></td>
<td style="text-align: right;"><label for="<?php echo $quote['code']; ?>"><?php echo $quote['text']; ?></label></td> 
```

在这段代码中一切正常，我得到三个链接：发货、在店里自取、快递。

好的，我想在每个链接自定义样式中制作自定义样式。我正在努力：

```
 <tr class="highlight">
<td><?php if ($quote['code'] == $code || !$code) { ?>
  <?php $code = $quote['code']; ?>
  <input type="radio" name="shipping_method" value="<?php echo $quote['code']; ?>" id="<?php echo $quote['code']; ?>" checked="checked" />
  <?php } else { ?>
  <input type="radio" name="shipping_method" value="<?php echo $quote['code']; ?>" id="<?php echo $quote['code']; ?>" />
  <?php } ?></td>
<td><label for="<?php echo $quote['code']; ?>">
<?php $pastas = 'Shipping post'; ?>
<?php $atsiemimas = 'Courier'; ?>
<?php $vienetas = 'take own in the shop'; ?>
<?php if ($quote['title'] = $pastas) { ?>
    <font style="color:red;">1 link</font>
<?php } elseif ($quote['title'] = $atsiemimas) {?>
<font style="color:red;">2 link</font>
<?php } elseif ($quote['title'] = $vienetas) {?>
<font style="color:red;">3 link</font>
<?php }?>

</label></td>
<td style="text-align: right;"><label for="<?php echo $quote['code']; ?>"><?php echo $quote['text']; ?></label></td> 
```

但我从三个不同的链接，三个相同的链接得到：1 个链接，1 个链接，1 个链接。然后我想拥有：1个链接，3个链接，3个链接

也许我使用了错误的代码？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:55:17.033

```
<?php } elseif ($quote['title'] = $atsiemimas) {?>
<font style="color:red;">2 link</font>
<?php } elseif ($quote['title'] = $vienetas) {?> 
```

应该：

```
<?php } elseif ($quote['title'] == $atsiemimas) {?>
<font style="color:red;">2 link</font>
<?php } elseif ($quote['title'] == $vienetas) {?> 
```

您使用单个“=”，因此您设置 te 变量而不是比较。

# php - 从外部 html 源自定义对象中读取

> ID：14571961
> 
> 赞同：2
> 
> 时间：2013-01-28T21:54:55.137
> 
> 标签：php, html

我在从外部 html 源读取时遇到问题我想要的只是在我的案例“HSDPA 2100”中读取自定义对象，但我的实际代码是从外部源读取所有 nfo 类。

一段外部html：

```
<table cellspacing="0">
<tbody><tr>
<th rowspan="8" scope="row">General</th>
<td class="ttl"><a href="network-bands.php3">2G Network</a></td>
<td class="nfo">CDMA 800 / 1900 </td>
</tr><tr>
<td class="ttl">&nbsp;</td>
<td class="nfo">GSM 850 / 900 / 1800 / 1900 </td>
</tr>
<tr>
<td class="ttl"><a href="network-bands.php3">3G Network</a></td>
<td class="nfo">HSDPA 2100 </td>
</tr>
<tr>
<td class="ttl">&nbsp;</td>
<td class="nfo">CDMA2000 1xEV-DO </td>
</tr>
<tr>
<td class="ttl"><a href="network-bands.php3">4G Network</a></td>
<td class="nfo">LTE 800 </td>
</tr>
<tr>
<td class="ttl"><a href="glossary.php3?term=sim">SIM</a></td>
<td class="nfo">Mini-SIM</td>
</tr><tr>
<td class="ttl"><a href="#" onclick="helpW('h_year.htm');">Announced</a></td>
<td class="nfo">2013, January</td>
</tr>
<tr>
<td class="ttl"><a href="#" onclick="helpW('h_status.htm');">Status</a></td>
<td class="nfo">Coming soon. Exp. release 2013, February</td>
</tr>
</tbody></table><table cellspacing="0">
<tbody><tr>
<th rowspan="2" scope="row">Body</th>
<td class="ttl"><a href="#" onclick="helpW('h_dimens.htm');">Dimensions</a></td>
<td class="nfo">-</td>
</tr><tr>
<td class="ttl"><a href="#" onclick="helpW('h_weight.htm');">Weight</a></td>
<td class="nfo">&nbsp;</td>
</tr>

</tbody></table><table cellspacing="0">
<tbody><tr>
<th rowspan="4" scope="row">Display</th>
<td class="ttl"><a href="glossary.php3?term=display-type">Type</a></td>
<td class="nfo">TFT capacitive touchscreen, 16M colors</td>
</tr><tr>
<td class="ttl"><a href="#" onclick="helpW('h_dsize.htm');">Size</a></td>
<td class="nfo">1080 x 1920 pixels, 5.9 inches (~373 ppi pixel density)</td>
</tr>
<tr>
<td class="ttl"><a href="glossary.php3?term=multitouch">Multitouch</a></td>
<td class="nfo">Yes</td>
</tr>
<tr><td class="ttl">&nbsp;</td><td class="nfo">- Flux UX UI</td> 
```

我正在尝试使用此代码：

```
 <?php
  include_once('/simple_html_dom.php');
  $dom = file_get_html("http://www.site.com/pantech_vega_no_6-5268.php");
  // alternatively use str_get_html($html) if you have the html string already...
  foreach ($dom->find('td[class=nfo]') as $node)
{
$result = $node->innertext;
$price = explode(",", $result);
echo $price[0];
} 
?> 
```

我收到了这个：`CDMA 800 / 1900 GSM 850 / 900 / 1800 / 1900 HSDPA 2100 CDMA2000 1xEV-DO LTE 800 Mini-SIM2013Coming soon. Exp. r... etc`

我想要的是`HSDPA 2100`，但对于其他型号的手机来说，价值可能是`HSDPA 1900`或其他的，并且`HSPDA`永远是稳定的，并且是第一的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:07:20.610

所有 td 都具有相同的类名“nfo”，并且您循环遍历所有元素，因此您得到的结果符合预期。

如果您想要的数据始终位于第三行，您可以填充数组而不是获取变量，然后获取第三个值。喜欢这个 $result[2]

更新：如果 HSDPA 总是在那里，请检查它。

```
 <?php
      include_once('/simple_html_dom.php');
      $dom = file_get_html("http://www.site.com/pantech_vega_no_6-5268.php");
      // alternatively use str_get_html($html) if you have the html string already...
      foreach ($dom->find('td[class=nfo]') as $node)
    {
    $result = $node->innertext;
if (strpos($result, 'HSDPA') === false)
{
continue;
}
    $price = explode(",", $result);
    echo $price[0];
break;
    } 
    ?> 
```

# ide - 如何进入 Visual Studio 2012 中的配置属性菜单？

> ID：14571966
> 
> 赞同：0
> 
> 时间：2013-01-28T21:55:06.170
> 
> 标签：ide, visual-studio-2012, configurationproperty

我已经搜索和搜索，但我一生都找不到这个菜单。如果有人知道去哪里去，请告诉我...

这是一篇关于我正在尝试做的事情 [http://blogs.msdn.com/b/vsnetsetup/archive/2012/10/16/setup-exe-is-not-a-valid-win32-application.aspx](http://blogs.msdn.com/b/vsnetsetup/archive/2012/10/16/setup-exe-is-not-a-valid-win32-application.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:01:24.187

文章中显示的对话框是 C++ 项目的标准项目属性页的一部分。当您右键单击 C++ 项目并选择属性时，它应该会出现。

# ios - 将案例编码到 appDelegate 文件中

> ID：14571972
> 
> 赞同：-8
> 
> 时间：2013-01-28T21:55:23.807
> 
> 标签：ios, objective-c, header, iboutlet, appdelegate

我有一个关于 iOS 开发的问题；iPhone/iPad。我需要在 AppDelegate.m/h 文件中编码的情况是什么？我可以将属性拖放到 AppDelegate.h 文件（从视图到头文件的指针箭头）吗？例如，当您将 TableViewController 存储在 NavigatioController 中时，通过 xibs 创建非故事板应用程序后，您将在 AppDelegate.m 文件中初始化这两个应用程序。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    self.viewCon = [[UITableViewController alloc]init];
    self.navCon = [[UINavigationController alloc]initWithRootViewController:self.viewCon];

    return YES;
} 
```

我只是想知道你为什么这样做。为什么不在 ViewController.m 文件中这样做呢？无论如何，这种方式工作正常。当您在 AppDelegate 文件中编码时，我想知道其他类似的情况（其中一些可能）。此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:58:52.393

不，您不能也不应该将属性拖放到 appDelegate 中。AppDelegate 的主要用途是在应用程序被终止之前保存任务，或者在应用程序从空闲或非活动状态返回时恢复一些简单的用户组件。

一些外部组件，如旧的 facebook sdk 和 google analytics，通常也在 didFinishLaunching 方法中设置。但我必须重申：应用程序委托不是您设置 UI 属性的地方，就像您在标准视图控制器中一样。

# python - 如何从头顶网络摄像头图像中检测到我的机器人？

> ID：14571975
> 
> 赞同：0
> 
> 时间：2013-01-28T21:55:44.930
> 
> 标签：python, opencv, computer-vision, robot

这是我的问题：

假设有一个机器人要经过的课程，并且有一个可以看到整个过程的头顶网络摄像头，并且机器人可以使用它来导航。现在的问题是，在这个网络摄像头的图像上检测机器人（位置和航向）的最佳方法是什么？我正在考虑一些解决方案，例如在其上放置 LED 或两个单独的彩色圆圈，但这些似乎不是最好的方法。

有没有更好的解决方案，如果是的话，我真的很感激它的一些 opencv2 python 代码示例，因为我是计算机视觉的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:42:59.683

我会做以下事情，我很确定它会起作用：

我假设视频流的背景（机器人附近）是相当静态的，所以第一步是： 1\. 背景减法 2\. 检测前景中的运动，这是你的机器人和从背景模型改变的所有其他东西，您需要在这里进行一些阈值处理 3\. 连接组件检测以获取 blob 4\. 识别与机器人相对应的 blob（最大？） 5\. 现在您可以获得 blob 的坐标 6\. 如果您可以计算航向通过多个帧跟踪您的 blob

你可以通过谷歌搜索关键字找到很好的例子

独特的颜色适用于颜色过滤和模板匹配等，但上述方法更通用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T04:42:20.810

我创建了一个完整的演练。

[http://www.instructables.com/id/How-to-Track-your-Robot-with-OpenCV/](http://www.instructables.com/id/How-to-Track-your-Robot-with-OpenCV/)

# ios - 如何使用 MonoTouch 有效地呈现伪 HTML？

> ID：14571977
> 
> 赞同：3
> 
> 时间：2013-01-28T21:56:08.157
> 
> 标签：ios, xamarin.ios, nsattributedstring, xamarin, richtext

我需要绘制一个标签，其中包含一些粗体字，由几个具有不同填充的段落组成，并且可能包含来自资源的小内联图像（例如图标和项目符号）。

我知道我可以使用[`NSAttributedString`](https://stackoverflow.com/a/3586943/458193)粗体和斜体，但它不支持段落边距或行限制，我宁愿使用类似 HTML/CSS 的解决方案，因为我从服务器获取样式。它也不允许我在文本中插入自定义图像，而无需将它们包装在自定义字体中。

最后，出于性能原因，我**不想**使用。 我可以使用哪些 MonoTouch 库或绑定来实现此目的？`UIWebView`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:56:08.157

我很高兴发现 Hulu 的工程师编写了一个 iOS 库来做到这一点。它被称为[**GSFancyText**](https://github.com/hulu/GrannySmith/wiki/GSFancyText)。

[用他们自己的话来说](http://tech.hulu.com/blog/2012/06/11/grannysmith-for-ios-open-source-text-formatting-voiceover-and-more/)：

> 当然，我们考虑了其他选项，例如直接在 a 中使用 HTML`UIWebView`或使用`NSAttributedString`. 但我们决定制作自己的样式/标记解析和富文本绘图系统，因为有以下优点：
> 
> *   它比 s 更快并且消耗更少的内存`UIWebView`。
> *   我们可以在很多地方重用样式和解析结果。
> *   我们可以轻松地修改一小部分段落的样式或文本。
> *   我们可以潜在地使用更多花哨的功能扩展系统，例如 Quartz 2D 功能、动画、手势等。
> *   它使本地化变得简单。例如，标记为粗体的短语可能位于日语句子中的不同位置。在这种情况下，我们可以使用单个`NSLocalizableString`来表示具有各种样式的句子。
> *   提取纯文本很容易，我们可以在其上启用 VoiceOver 支持。

这个库很棒，所以我们[为它创建了 MonoTouch 绑定](https://github.com/stampsy/MonoTouch.GSFancyText)。

# 例子

首先使用类似 CSS 的字符串定义样式：

```
var stylesheet = @"
    .green { color: #00ff00; font-weight:bold }
    .gray { color: gray; font-weight:bold }
";

GSFancyText.ParseStyleAndSetGlobal (stylesheet); 
```

然后创建一个`GSFancyText`带有标记字符串的对象：

```
var fancyText = new GSFancyText ("<span class=green>Hulu</span> <span class=gray>Plus</span>"); 
```

然后你可以直接在自定义视图中绘制这个：

```
fancyText.drawInRect (rect); 
```

或者创建一个 GSFancyTextView 对象来显示它

```
var fancyView = new GSFancyTextView (frame, fancyText); 
```

[您可以在GSFancyTextView 文档](https://github.com/hulu/GrannySmith/wiki/GSFancyText)中找到更多示例。

我最喜欢的功能是 lambda 块，它允许您指定要调用的委托来呈现`<lambda id=yourhandler width=50 height=50>`伪元素。

这允许您插入自定义图像或自己进行高级内联绘图。

# php - 如何在 PHP 调用插件中使用 wordpress 帖子标题标签

> ID：14571980
> 
> 赞同：0
> 
> 时间：2013-01-28T21:56:29.973
> 
> 标签：php, wordpress, title

我正在使用 flickrRSS 插件，并且想使用搜索词作为帖子的标题，而不是指定的关键字。

这是我正在使用的代码片段：

```
get_flickrRSS(
  array('num_items' => 10,
        'type' => 'public',
        'tags' => 'keyword'
)); 
```

我想将“关键字”更改为 wordpress 帖子标题。

任何想法我怎么能做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:58:39.773

尝试`get_the_title()`

```
get_flickrRSS(
  array('num_items' => 10, 
        'type'      => 'public',
        'tags'      => get_the_title() 
  )); 
```

参考：[https ://codex.wordpress.org/Template_Tags/get_the_title](https://codex.wordpress.org/Template_Tags/get_the_title)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:04:53.387

不完全确定，但我相信这会奏效：

```
<?php
     global $post;
     $ID = $post->ID
     get_flickrRSS(
         array('num_items' => 10,
             'type' => 'public',
             'tags' => get_the_title($ID)
     ));
?> 
```

# html - 调整每个浏览器的网站宽度

> ID：14571981
> 
> 赞同：0
> 
> 时间：2013-01-28T21:56:30.647
> 
> 标签：html, browser

我在一个网站上工作，并且在浏览器之间遇到了一些问题。一些浏览器显示网站完全居中，左右两侧有黑色边框。其他浏览器显示它左对齐，左侧没有黑色边框，右侧有较大的边框。关于如何设置 HTML 或 CSS 以在所有浏览器中正确对齐的建议？

更多信息：

看起来它以 PC 为中心，但不在 Mac 上。一个朋友有一台 PC，它确实居中，而在我的 Mac 上却不是。地址是 bellfortchurchofchrist.com

更新：添加了以下答案建议的一些代码，这里是在 PC 上：

![在此处输入图像描述](../Images/de50673f351331388b4c5810df180acf.png)

这是在我的 Mac 上的 Safari 上：

![在此处输入图像描述](../Images/9cb974a5d58f4bb2eaa011fed11118e0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:47:20.553

这是对齐问题的答案，我不知道您对边框的含义是什么，对我来说，在 OS X 上的 Chrome 中，该站点的背景为黑色，没有边框。

要修复对齐，您需要将整个网站放入一个包装器`<div>`标签中，并为该包装器提供以下样式：

`width:1000px; margin:auto; position:relative;`

标签应该在 之后立即开始`<body>`并在之前关闭`</body>`。

这将给网站一个固定的宽度，使用它居中，这`margin`意味着`position:relative`您的绝对定位`<div>`标签将锚定包装。

该网站的构建方式相当不灵活，自然堆叠和浮动元素比网站中的绝对位置元素要好。这意味着您可能会在各种浏览器和移动设备中遇到问题。

如果你能澄清边界问题，我可能也可以提供解决方案。

# c# - HttpContext.Current.User 对无状态会话安全吗？

> ID：14571987
> 
> 赞同：0
> 
> 时间：2013-01-28T21:56:48.583
> 
> 标签：c#, session, azure, azure-web-roles

我已经使用 Azure 网站几个月了，出于 SSL 的原因，我决定迁移到云服务。因为，我的项目中可能需要几个 Web 角色，所以我的会话管理需要是无状态的。

这就是我在项目中处理用户数据的方式。如果我需要用户相关数据，我会通过`HttpContext.Current.User.Identity.Name`. 使用此信息查询我的数据库以获取有关我的用户的信息。

这是正确的方法吗？我做了一些研究，但找不到关于`HttpContext.Current.User`来自哪里的真正明确的信息。

到目前为止，这是我所理解的。用户使用表单身份验证进行身份验证，该身份验证在用户 PC 中创建一个 cookie。当用户再次请求服务器时，服务器会检查 cookie 信息并使用它来填充 HttpContext 对象。如果其他 Web 角色之一下次接受请求，它是否可以使用该 cookie 来填充 HttpContext ？（这可能都是错误的，正如我所说，这是我从文档和网络上的其他答案中了解到的）

这就是我试图理解的基本内容。我希望我足够清楚地解释了我的问题。如果不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:39:59.800

我在多个 Web 角色上运行的 Azure 应用程序中使用 HttpContext.Current.User.Identity，并且禁用了 SessionState，没有任何问题。我已将其设置为使用 Cookie。

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogIn" cookieless="UseCookies" timeout="2880" />
</authentication> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T01:59:29.833

我认为你的理解是正确的。当我们使用 FormAuthentication 时，登录后会生成一个 cookie，其中包含用户信息和令牌之类的加密。然后我们请求另一个页面，浏览器会将这个 cookie 发送到服务器，ASP.NET 将解密 cookie，验证并将用户信息填充到 HttpContext.Current.User 中，无论服务器端有多少实例。所以我认为在多实例的网络角色中使用 HttpContext.Current.User 是安全的。

# asp.net-mvc - 在 mvc 路由中获取值

> ID：14571988
> 
> 赞同：2
> 
> 时间：2013-01-28T21:56:48.747
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我正在使用 mvc4 并有一个字段，用户可以在其中输入一些文本到输入字段中，该字段被传递给 url 并重定向到另一个页面，例如。/搜索/<>

我的表单如下，但重定向为查询字符串。

```
<form class="search" action="@Url.Action("Index", "Search")">
<div>
    <input name="q" value="" type="search" />
    <input type="image" name="btn" value="search" src="@Url.Content("/image1.jpg")" />
</div>

</form> 
```

知道如何更改表单以将输入的值传递给 url 输入“q”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:58:14.153

您可以使用一种`GET`方法：

```
<form class="search" action="@Url.Action("Index", "Search")" method="get">
    <div>
        <input name="q" value="" type="search" />
        <input type="image" name="btn" value="search" src="@Url.Content("~/image1.jpg")" />
    </div>
</form> 
```

`Html.BeginForm`您还可以使用为此目的设计的帮助程序生成完全相同的标记：

```
@using (Html.BeginForm("Index", "Search", FormMethod.Get, new { @class = "search" }))
{
    <div>
        <input name="q" value="" type="search" />
        <input type="image" name="btn" value="search" src="@Url.Content("~/image1.jpg")" />
    </div>
} 
```

当您使用 GET 方法时，所有输入元素值都将在提交表单时在查询字符串中发送。

如果您想在 url 的路径部分附加搜索字符串，而不是使用查询字符串参数，我邀请您阅读[`following blog post`](http://www.hanselman.com/blog/ExperimentsInWackinessAllowingPercentsAnglebracketsAndOtherNaughtyThingsInTheASPNETIISRequestURL.aspx)Scott Hanselman 的文章。我只引用他的结论：

> 在为在请求路径中获得疯狂的东西所做的所有努力之后，值得一提的是，简单地将值保留为查询字符串的一部分（还记得本文开头的 WAY 吗？）更容易、更清洁、更灵活，而且更多安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:27:13.000

您的索引视图应该看起来像

```
 @{
       ViewBag.Title = "Index";
    }

    <h2>Index</h2>
    @using (Html.BeginForm("Search", "Home"))
    {
        @Html.TextBox("query")
    } 
```

和你的 HomeController 一样

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }
    public ActionResult Search(string query)
    {
        if (string.IsNullOrEmpty(query) == false)
            return RedirectToAction(query);
        else 
            return RedirectToAction("Index");
    }
} 
```

1.  在文本框中输入要重定向到的操作的名称，然后按 Enter 希望这会有所帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T10:41:32.400

```
public ActionResult Search(string query)
{
    if (string.IsNullOrEmpty(query) == false)
        return RedirectToAction("ACTION NAME",query);//prepend your action name
    else 
        return RedirectToAction("Index");
} 
```

# freebase - Freebase API：超出用户速率限制

> ID：14571991
> 
> 赞同：3
> 
> 时间：2013-01-28T21:56:58.510
> 
> 标签：freebase

我的应用程序有问题，我超过了每秒用户速率。这是我得到的错误。

```
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "userRateLimitExceededUnreg",
    "message": "User Rate Limit Exceeded. Please sign up",
    "extendedHelp": "https://code.google.com/apis/console"
   }
  ],
  "code": 403,
  "message": "User Rate Limit Exceeded. Please sign up"
 }
} 
```

我已经修复了我的代码，所以我不再会超过限制，但即使在 4 天后仍然会出现错误。我真的不需要比正常配额更多的东西，那么我该如何克服呢？

另外，请注册是什么意思？他们是在谈论要求额外的配额限制吗？

有没有办法查询 Freebase 以每秒和 24 小时为周期跟踪您的查询计数？我正在传递我的 API 密钥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:54:43.960

谢谢肖恩，问题是键和 = 符号之间的空格。MQL 查询本身中的空格是可以的，但 URL 的其余部分则不行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:25:57.773

对于你问题的第二部分。如果您转到[API 控制台](https://code.google.com/apis/console/)并单击报告，您将看到每天向每个 API 发出多少请求的图表。

# jquery - 将 NAN 替换为 0

> ID：14571994
> 
> 赞同：0
> 
> 时间：2013-01-28T21:57:13.323
> 
> 标签：jquery, math

我的脚本正在返回 NAN，我希望它改为显示 0。

使用 || 0 已经实现了这一点，但是它现在返回 100 而不是 var percentQ 的 0。是什么导致它返回 100？

```
$('#observationTotalRefresh').on('click', function () {

    var 
    sumP = 0,
    sumQ = 0,
    countP = 0,
    countQ = 0;

    $('.observationPositive:not(:disabled)').each(function(){
        countP++;
        sumP += Number($(this).val());
    });
    $('.observationQuestionable:not(:disabled)').each(function(){
        countQ++;
        sumQ += Number($(this).val());
    });

    var percentP = 100/(1 + (sumQ/sumP)) || 0;
    var percentQ = (100 - percentP) || 0;

    $("#observationPositivePercentage").text(percentP.toFixed(0));
    $("#observationQuestionablePercentage").text(percentQ.toFixed(0));
    $("#observationTotal").text(sumP + sumQ);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:00:08.073

如果你这样做`|| 0`，`percentP`你确保它`percentP`始终是一个数字。所以，`percentQ`永远是`100 - percentP`；如果`percentP`为 0，则为`percentQ`100。

不过，你的百分比数学似乎有点可疑。也许你想要

```
var percentP = 100 * sumP / (sumP + sumQ); 
```

反而？那么，简直了

```
var percentP, percentQ;
if(sumP == 0 && sumQ == 0) {
    percentP = percentQ = 0;
} else {
    percentP = 100 * sumP / (sumP + sumQ);
    percentQ = 100 * sumQ / (sumP + sumQ);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:02:22.893

在这一行

```
var percentP = 100/(1 + (sumQ/sumP)) || 0; 
```

`sumQ/sumP`will be`0/0`并且 will return `NaN`，导致等式的其余部分计算为`NaN`然后返回`0`。

然后在这一行

```
var percentQ = (100 - percentP) || 0; 
```

它将`100 - 0`是`100`

# javascript - HTML 滚动框的 ASP.NET 基本计数器

> ID：14571996
> 
> 赞同：0
> 
> 时间：2013-01-28T21:57:21.300
> 
> 标签：javascript, asp.net, html

我正在为客户的现有网站上的特色文章开发滚动条。（我没有开发该网站）。

我需要在下面的 HTML 中添加一个计数器，以便每次调用中继器元素时，每个项目都有一个唯一的“数据标题”值。

以下是我的代码，非常感谢您的帮助！

```
 <asp:repeater id="rptNews" runat="server">
    <itemtemplate>

      <img src="getImage.asp?img=<%# Container.DataItem("image").Trim()%>&w=600&h=600" data-caption="#htmlCaption5" />

    <span class="orbit-caption" id="htmlCaption5"><strong><a href="/<%# Container.DataItem("url").Trim()%>/"><%# Container.DataItem("title").Trim()%>:</a> </strong><a href="/<%# Container.DataItem("url").Trim()%>/">Read More</a></span>

    </itemtemplate>
    </asp:repeater> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:15:35.457

这是来自记忆，尚未经过测试，但它应该给你一个想法：

```
 <asp:repeater id="rptNews" runat="server">
     <itemtemplate>
         <img src="getImage.asp?img=<%# Container.DataItem("image").Trim()%>&w=600&h=600" data-caption='<%# String.Format("#htmlCaption{0}", Container.ItemIndex) %>' />
         <span class="orbit-caption" id='<%# String.Format("#htmlCaption{0}", Container.ItemIndex) %>'><strong><a href="/<%# Container.DataItem("url").Trim()%>/"><%# Container.DataItem("title").Trim()%>:</a> </strong><a href="/<%# Container.DataItem("url").Trim()%>/">Read More</a></span>
    </itemtemplate>
</asp:repeater> 
```

基本上：将您的字符串“#htmlCaption5”替换为`<%# String.Format("#htmlCaption{0}", Container.ItemIndex) %>'`

# drop-down-menu - Twitter Bootstrap 下拉链接不起作用

> ID：14571997
> 
> 赞同：0
> 
> 时间：2013-01-28T21:57:25.803
> 
> 标签：drop-down-menu, twitter-bootstrap

我已经尝试了许多解决方案来让它工作，但还没有任何运气。

我在下拉部分中更改了 bootstrap.js：

```
$('html') 
```

$('html') .on('click.dropdown.data-api', clearMenus)

在关闭 html 标记之前我也尝试过： $('body').on('touchstart.dropdown', '.dropdown-menu', function (e) { e.stopPropagation(); });

这两个都是暂时的。我可以得到下拉菜单，选择链接，然后转到链接页面，但菜单停止工作。让它再次工作的唯一方法是清除我的缓存并刷新页面。然后它再次正常工作，直到我第二次尝试。冲洗，重复。

我在整个站点中使用包含页眉、导航和页脚。

请查看[http://thebibleminiseries.com](http://thebibleminiseries.com)，然后缩小浏览器的大小，直到看到下拉菜单。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:01:33.253

在您的非主页上，您的两个脚本文件 - bootstrap.js 和 main.js - 找不到。损坏的 URL 是： http: [//thebibleminiseries.com/the-bible-miniseries-books-studies/js/vendor/bootstrap.js](http://thebibleminiseries.com/the-bible-miniseries-books-studies/js/vendor/bootstrap.js) [http://thebibleminiseries.com/the-bible-miniseries-books-studies/js/ main.js](http://thebibleminiseries.com/the-bible-miniseries-books-studies/js/main.js)

您需要更改这些行：

```
<script src="js/vendor/bootstrap.js"></script>
<script src="js/main.js"></script> 
```

对此：

```
<script src="/js/vendor/bootstrap.js"></script>
<script src="/js/main.js"></script> 
```

我通过使用浏览器的控制台功能找到了这个问题的原因。如果您自己尝试，您还会看到 404 错误。