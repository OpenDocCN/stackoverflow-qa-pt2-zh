# StackOverflow 问答 14255000-14255999

# javascript - JavaScript 内容何时可以抓取（如果有的话）？

> ID：14255002
> 
> 赞同：1
> 
> 时间：2013-01-10T09:53:45.560
> 
> 标签：javascript, jquery, web-crawler

我希望在我正在为 Twitter 时间线开发的网站上实现时间线功能。我拥有的一个选项是可抓取的，并且可以直接在 Twitter 设置下的“小部件：

```
<a class="twitter-timeline"  href="https://twitter.com/hyttetomter" data-widget-id="289297710840954880">Tweets by @hyttetomter</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

该代码首先不是 XHTML 的有效脚本，因此我寻找了一个插件或脚本，并找到[了这个插件，并找到了一个名为 Tweet for jQuery 的插件，](https://www.google.no/search?q=tweet%20plugin%20&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)因为它可以为 CSS 定制，但是这个爬虫友好吗？将可抓取的脚本与不可抓取的脚本分开的技术是什么？我应该打开 JavaScript 自己看看吗？jQuery 内容是否可以抓取？我必须采取哪些措施（假设有）才能使我自己的任何 jQuery 生成的内容可抓取？我在网上找到了关于这个的混合参考，所以如果你觉得它可以帮助我，请引导我到一个值得信赖的资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:15:08.377

爬虫获取 HTML 页面。这是它们唯一的功能。它们获得了样式表和 javascript 的名称，因为它们是 HTML 文档头部的一部分（作为链接和脚本标签），但它们的目的既不是设置页面样式也不是增强行为。他们获取 HTML 静态信息并进行解析，以便对其内容做出假设。如果您的内容是在 javascript 触发后生成的，那么爬虫将无法获取它。

使其对爬虫友好的一种解决方案是为它们进行后备。但这必须涉及在服务器端呈现您的 twitter 信息。Facebook 这样做：

```
<noscript>
  <meta http-equiv="refresh" content="0; URL=/home.php?_fb_noscript=1" />
</noscript> 
```

Facebook 在其文档标题中插入此元标记。它仅在没有脚本的情况下触发（因此，爬虫），并使用给定的 url 刷新页面，在 facebook 的情况下，这意味着“在服务器端渲染墙，伙计没有 javascript”。当然，爬虫必须知道如何处理这个标签。

# javascript - 在文本段落内对齐内联 div

> ID：14255005
> 
> 赞同：0
> 
> 时间：2013-01-10T09:54:02.037
> 
> 标签：javascript, jquery, css

我有一个包含可变长度文本的 div

```
<div id="paragraph">
   blah blah blah <em>Something Important</em> more blah
</div> 
```

我想在`<div id="buttons">`上面动态附加另一个包含两个按钮的按钮，这`<div id="buttons">`应该始终右对齐并内联显示在包含的`<div id="paragraph">`. 例如，它可能看起来像

```
This is a paragraph, and part of it are two buttons that should always align right at the end.                  [button1][button2] 
```

如何`<div id="buttons">`在 JavaScript 或 JQuery 中执行附加部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:12:20.077

你可以这样做，HTML：

```
<p>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Odit atque quae officiis deserunt ea quis dolorum laudantium repudiandae suscipit eligendi consequatur amet optio fugit doloribus qui beatae officia laborum cumque!
    <a href="" class="btn">Button 1</a>
    <a href="" class="btn">Button 2</a>
</p> 
```

和 CSS：

```
p {
    text-align: left;
}
.btn {
    display: inline-block;
    text-align: right;
    padding: 0 5px;
    background: #b30;
    color: #fff;
    float: right;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:59:12.740

在 html 中为您的第一个 div 和附加的 div 添加一个容器（我还添加了一个链接来附加按钮）：

```
<a href="#" id='appender' onclick="appendBtn()">append</a>
<div id='container'>
    <div id='paragraph'>
        Lorem ipsum dolor sit amet,tofficia laborum cumqu
    </div>
</div> 
```

CSS应该与之前的答案非常相似：

```
#paragraph {
  text-align: left;
  float:left;
}
.newDiv{
  display: inline-block;
  text-align: right;
  padding: 0 5px;
  float: right;
}
.btn {
  background: #b30;
  color: #fff;} 
```

和需要附加的jQuery：

```
function appendBtn(){
  var myDivs =  '<div class="newDiv"><a href="#" class="btn">Button1</a></div>';
  $('#container').append(myDivs);
} 
```

编辑：我忘了，这是一个小提琴：http: [//jsfiddle.net/Bpdkx/27/](http://jsfiddle.net/Bpdkx/27/)

# javascript - 是否有充分的理由使用 window.setTimeout 而不是 setTimeout？

> ID：14255006
> 
> 赞同：1
> 
> 时间：2013-01-10T09:54:02.877
> 
> 标签：javascript

我只看到了一种我应该使用`window.setTimeout`而不是 的情况`setTimeout`，那就是我在闭包中重用了该名称`setTimeout`，这显然不是一个很好的做法（除非非常具体的使用）。

我注意到 Google Closure 编译器不会删除`window.`. 由于它在减少变量名方面如此激进，我想知道他们是否有任何理由这样做？

我失踪还有其他原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T09:54:58.913

如果你使用`window.setTimeout`，你一定会使用`window.setTimeout`。`setTimeout`如果变量在您的范围内被隐藏，则可能不是这种情况。

如果你确定你没有隐藏这个变量，你可能不会打扰，但 Closure 编译器无法确定，原因之一是函数的上下文可以动态提供。

# ios - 很难在 restkit 中映射 JSON

> ID：14255008
> 
> 赞同：0
> 
> 时间：2013-01-10T09:54:06.047
> 
> 标签：ios, objective-c, json, mapping, restkit

我很难将 JSON 映射到我的 RestKit 应用程序中。我也想将它保存在核心数据中。因此，这里有两个图像链接。第一张图片，我的 JSON 的样子。

[图像1](http://www.flickr.com/photos/74322780@N08/8365852994/)

第二张图片是我的核心数据库的样子。

[图像2](http://www.flickr.com/photos/74322780@N08/8366272385/in/photostream)

现在首先我制作了没有核心数据层的应用程序。因此，只需读取数据并使用它。那时一切正常。但是对于核心数据，我遇到了一些这样的映射错误。

**日志**

```
 2013-01-10 10:46:02.663 Offitel2[27978:6813] D restkit.object_mapping:RKMappingOperation.m:635 Did not find mappable relationship value keyPath 'Person'
2013-01-10 10:46:02.664 Offitel2[27978:6813] D restkit.object_mapping:RKMappingOperation.m:635 Did not find mappable relationship value keyPath 'Function'
2013-01-10 10:46:02.664 Offitel2[27978:6813] D restkit.object_mapping:RKMappingOperation.m:635 Did not find mappable relationship value keyPath 'Department'
2013-01-10 10:46:02.665 Offitel2[27978:6813] D restkit.object_mapping:RKMappingOperation.m:635 Did not find mappable relationship value keyPath 'Company'

2013-01-10 10:46:02.672 Offitel2[27978:164f] W restkit.core_data:RKManagedObjectRequestOperation.m:555 Caught undefined key exception for keyPath 'user' in mapping result: This likely indicates an ambiguous keyPath is used across response descriptor or dynamic mappings.
2013-01-10 10:46:02.673 Offitel2[27978:164f] W restkit.core_data:RKManagedObjectRequestOperation.m:555 Caught undefined key exception for keyPath 'function' in mapping result: This likely indicates an ambiguous keyPath is used across response descriptor or dynamic mappings.
2013-01-10 10:46:02.674 Offitel2[27978:164f] W restkit.core_data:RKManagedObjectRequestOperation.m:555 Caught undefined key exception for keyPath 'department' in mapping result: This likely indicates an ambiguous keyPath is used across response descriptor or dynamic mappings.
2013-01-10 10:46:02.676 Offitel2[27978:164f] W restkit.core_data:RKManagedObjectRequestOperation.m:555 Caught undefined key exception for keyPath 'company' in mapping result: This likely indicates an ambiguous keyPath is used across response descriptor or dynamic mappings. 
```

这就是我在代码中进行关系映射的方式。

```
 RKRelationshipMapping* relationUserMapping = [RKRelationshipMapping relationshipMappingFromKeyPath:@"Person"toKeyPath:@"user"withMapping:personMapping];
    RKRelationshipMapping* relationFunctionMapping = [RKRelationshipMapping relationshipMappingFromKeyPath:@"Function"toKeyPath:@"function"withMapping:functionMapping];
    RKRelationshipMapping* relationDepartmentMapping = [RKRelationshipMapping relationshipMappingFromKeyPath:@"Department"toKeyPath:@"department"withMapping:departmentMapping];
    RKRelationshipMapping* relationCompanyMapping = [RKRelationshipMapping relationshipMappingFromKeyPath:@"Company"toKeyPath:@"company"withMapping:companyMapping];
      NSLog(@"till here7");
    [dataMapping addPropertyMapping:relationUserMapping];
    [dataMapping addPropertyMapping:relationFunctionMapping];
    [dataMapping addPropertyMapping:relationDepartmentMapping];
    [dataMapping addPropertyMapping:relationCompanyMapping]; 
```

任何人都可以帮我解决这个问题。我在核心数据的映射上苦苦挣扎了好几天。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:11:24.087

尝试为此使用 RKManagedObjectMapping。如下配置 RKManagedObjectMapping 对象。

RKURL *baseURL = [RKURL URLWithBaseURLString:serverUrl];

```
 RKObjectManager* objectManager = [RKObjectManager objectManagerWithBaseURL:baseURL];

    objectManager.client.baseURL = baseURL;

    objectManager.client.requestQueue.showsNetworkActivityIndicatorWhenBusy = YES;

    objectManager = [RKObjectManager objectManagerWithBaseURL:baseURL];

    RKManagedObjectStore *objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:DB_NAME];

    objectManager.objectStore = objectStore; 
```

然后你必须为你的每个数据类和它拥有的关系设置映射。我将尝试在这里举一个我用过的例子。

```
 /** specify the base mapping of reservation class */
    RKManagedObjectMapping *getReservationMapping = [RKManagedObjectMapping mappingForClass:[Reservation class] inManagedObjectStore:objectManager.objectStore];
    /** generate mapping for Reservation class */
    [self setReservationMapping:getReservationMapping];
    getReservationMapping.primaryKeyAttribute=@"reservationId";
    [objectManager.mappingProvider setMapping:getReservationMapping forKeyPath:@""];

    /** specify the base mapping of ReservationsType class */
    RKManagedObjectMapping *resTypeMapping = [RKManagedObjectMapping mappingForClass:[ReservationsType class] inManagedObjectStore:objectManager.objectStore];
    /** generate mapping for ReservationsType class */
    [self setReservationsTypeMapping:resTypeMapping];
    resTypeMapping.primaryKeyAttribute=@"reservationTypeId";
    [getReservationMapping mapRelationship:@"reservationsType" withMapping:resTypeMapping];
    [objectManager.mappingProvider setMapping:resTypeMapping forKeyPath:@".reservationsType"]; 
```

我的 setReservationMapping 如下

```
 - (void)setReservationMapping:(RKManagedObjectMapping *)object
    {
     [object mapKeyPathsToAttributes:
       @"id", @"reservationId",
       @"comment", @"comment",
       @"date", @"date",
       @"email", @"email",nil];
    } 
```

这是我的 JSON 示例。请注意，我的预留节点没有标识符，它是空白的，因此我给出了 keyPath:@""。

```
 [{
    id: 5644,
    comment: "",
    email: "danish@abc.com",
    firstName: "Danny",
    reservationsType:  {
    id: 1,
    name: "Reservation",
    }
    }] 
```

希望这对您有所帮助。

# android - 查询同一文件夹中的所有文件时，不显示Bitmap的存储文件

> ID：14255010
> 
> 赞同：0
> 
> 时间：2013-01-10T09:54:08.837
> 
> 标签：android, image, file, bitmap, cursor

我将位图存储在移动设备的 SD 卡中，然后我有另一种方法列出了保存位图的文件夹中存在的所有文件。问题是，当图像被存储时，即使我检查了它们是否真的存在于文件夹中，我列出该文件夹中图像的代码不会返回这些图像，它通常会在我使用几次后显示它们应用程序虽然。谁能帮我这个？你可以在下面找到我的代码。

这是用于存储位图

```
imagesFolder = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), "ILoveKitties");

if(!imagesFolder.exists())
    imagesFolder.mkdirs();
int imageNum;
if(imagesFolder.list()==null)
    imageNum = 1;
else
    imageNum = imagesFolder.list().length + 1;

String fileName = "appname_" + String.valueOf(imageNum) + ".jpg";
output = new File(imagesFolder, fileName);
while(output.exists()){
    imageNum++;
    fileName = "appname_" + String.valueOf(imageNum) + ".jpg";
    output = new File(imagesFolder, fileName);
}

OutputStream fOut = new FileOutputStream(output);
merged.compress(Bitmap.CompressFormat.JPEG, 100, fOut);
fOut.flush();
fOut.close();
fOut = null;
saved = true;
savedFilePath = "file://" + output.getCanonicalPath(); 
```

这是用于检索文件夹中的文件列表

```
boolean isSDPresent = android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED);
if(isSDPresent) {
    String[] projection = {MediaStore.Images.Media.DATA};
    cursor = getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
            projection, 
            MediaStore.Images.Media.DATA + " like ? ", 
            new String[] {"%APPNAME%"}, 
            null);
    columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);

    File testFileAvailability;
    for(int i=cursor.getCount()-1; i>=0; i--){
        cursor.moveToPosition(i);
        // get image filename
        testFileAvailability = new File("file://" + cursor.getString(columnIndex));
        if(testFileAvailability.exists()){
            listImagePath.add("file://" + cursor.getString(columnIndex));
        }

    }
} 
```

然后我使用路径来显示图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:00:54.993

好的，一旦您将文件存储在设备存储中，然后只需**触发媒体扫描器在 MediaStore 中插入文件条目，**那么您的应用程序应该能够获取文件路径。

要触发媒体扫描器，请使用以下代码：

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory()))); 
```

实际上，您必须触发 Media Scanner 才能获取您当前存储的文件条目。Android设备在重启时会这样做。或者您启动任何本机相机或画廊应用程序（如果他们实现了它）。

# javascript - 比较两个javascript数组？

> ID：14255013
> 
> 赞同：-1
> 
> 时间：2013-01-10T09:54:22.120
> 
> 标签：javascript

我想比较两个数组，看看是否匹配，是否有做某事。

```
var answers = new Array("a","b","c","d", "e");
var correct = new Array("a","d");
// do a for loop
// if there's a match console.log(letter + "is the correct answer") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:00:55.133

尝试使用这个：

```
for(var i = 0; i < answers.length; i++) {
    for(var j = 0; j < correct.length; j++){
        if (answers[i] === correct[j]){ 
            console.log(answers[i]+ " is the correct answer")
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:01:24.817

看这个帖子，有比较无序数组的代码：http: [//blog.maxcnunes.net/2012/08/10/comparacao-de-arrays-desordenados-javascript/](http://blog.maxcnunes.net/2012/08/10/comparacao-de-arrays-desordenados-javascript/)

ps：帖子是葡萄牙语的，但你可以使用任何翻译器来理解

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:10:20.337

试试这个代码：

```
var a = [1,2,3,4]
  , b = [1,3,5,7,9]
  , c = ['a','b','c'];

function findDups( arr1, arr2 ) {
  var arrs = [ arr1, arr2 ].sort(function( a,b ) {
    return a.length > b.length;
  });
  return arrs[0].filter(function( v ) {
    return ~arrs[1].indexOf( v ); 
  });
}

function hasDups( arr1, arr2 ) {
  return !!findDups( arr1, arr2 ).length;
}

console.log( findDups( a,b ) ); //=> [1, 3]
console.log( hasDups( a,c ) ); //=> false 
```

# javascript - IE8 中 Dojo 1.7.2 导致的内存泄漏

> ID：14255014
> 
> 赞同：2
> 
> 时间：2013-01-10T09:54:22.940
> 
> 标签：javascript, memory-leaks, internet-explorer-8, dojo

我们使用 Dojo 开发了一个丰富的 Web 应用程序（使用许多不同的视图、许多按钮、视图之间的事件等）。任何数据都是通过 Rest 接口异步加载的。

现在我们意识到，在 Internet Explorer 8 中，如果应用程序的 URL 在同一选项卡/浏览器窗口中打开两次或更多次，应用程序的占用空间会很大，并且占用空间会增加两倍或更多倍，并且很快就会导致内存不足。

Dojo 似乎没有断开任何事件处理程序/DOM 节点。

我将其追踪到只有一个 Dojo 按钮小部件的简单 html 页面，并使用 sIEve（IE8 的内存泄漏分析器）分析了该 html 页面。如果再次调用 html 页面，一些 DOM 节点没有释放（成为孤儿）。

是否有任何设置/技巧/模式来防止孤儿？

我认为这种行为会导致我们的 Dojo 应用程序在离开应用程序 URL 时未释放的巨大足迹。

这是示例 html 页面：

```
<html>
<head>
    <title>MemLeak Test</title>
    <style>
        @import "../themes/claro/claro.css";
    </style>
    <script
        type="text/javascript"
        data-dojo-config="'parseOnLoad':true"
        src="../js/dojo-release/dojo/dojo.js"></script>
    <script type="text/javascript">
        require([ "dojo/parser" ]);
        require([ "dijit/form/Button" ]);
    </script>
</head>
<body class="claro">
    <h1>Memory Leak?</h1>
    <input
        type="button"
        dojoType="dijit.form.Button"
        label="Button"></input>
</body> 
```

在 sIEve 中打开示例 html 文件两次后，它已经报告了 18 个孤立项：HEAD、SCRIPT、DIV、SPAN（以不同的顺序重复）；全部只有 1 个 Ref 并标记为泄漏！；（对不起，我不能发布任何截图）

感谢有关该主题的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:44:59.853

问题是您永远不会销毁这些小部件，因此浏览器会将所有对事件、dom 节点等的引用保存在内存中。您可以使用 unload 事件侦听器部分解决问题，并调用您创建的小部件的 destroy 方法。

这是一个例子：

```
require(['dojo/_base/unload', 'dojo/_base/array'], function(unload, array){
    unload.addOnUnload(function(){
        array.forEach(myWidgets, function(wgt){
            wgt.destroy();
        });
    });
}); 
```

或者，如果您没有对小部件的引用，您可以遍历 dijit 注册表：

```
require(['dojo/_base/unload', 'dojo/_base/array', 'dijit/registry'], function(unload, array, dijitRegistry){
    unload.addOnUnload(function(){
        array.forEach(dijitRegistry.toArray(), function(wgt){
            wgt.destroy();
        });
    });
}); 
```

# java - 可以递增的锁存器

> ID：14255019
> 
> 赞同：29
> 
> 时间：2013-01-10T09:54:40.550
> 
> 标签：java, concurrency

有谁知道是否有任何闩锁实现可以执行以下操作：

*   有一种方法来减少锁存器的值，或者如果值为零则等待
*   有等待锁存值为零的方法
*   有一种将数字添加到锁存器值的方法

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2015-09-07T16:20:20.323

您还可以使用[Phaser (java.util.concurrent.Phaser)](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Phaser.html)

```
final Phaser phaser = new Phaser(1); // register self
while (/* some condition */) {
    phaser.register(); // Equivalent to countUp
    // do some work asynchronously, invoking
    // phaser.arriveAndDeregister() (equiv to countDown) in a finally block
}
phaser.arriveAndAwaitAdvance(); // await any async tasks to complete 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-10T09:57:02.993

[java.util.concurrent.Semaphore](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html)似乎符合要求。

*   获取（）或获取（n）
*   ~~也获取（）（不确定我理解这里有什么区别）~~（*）
*   释放（）或释放（n）

(*) 好的，没有内置方法可以等到信号量变*得不可用*。我想您首先会编写自己的包装器`acquire`，`tryAcquire`如果失败会触发您的“忙碌事件”（并继续使用 normal `acquire`）。每个人都需要调用你的包装器。也许是信号量的子类？

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-10T14:57:05.103

您可以使用如下所示的简单实现，而不是从 AQS 开始。它有点幼稚（它是同步的与 AQS 无锁算法），但除非您希望在满足的场景中使用它，否则它可能已经足够好了。

```
public class CountUpAndDownLatch {
    private CountDownLatch latch;
    private final Object lock = new Object();

    public CountUpAndDownLatch(int count) {
        this.latch = new CountDownLatch(count);
    }

    public void countDownOrWaitIfZero() throws InterruptedException {
        synchronized(lock) {
            while(latch.getCount() == 0) {
                lock.wait();
            }
            latch.countDown();
            lock.notifyAll();
        }
    }

    public void waitUntilZero() throws InterruptedException {
        synchronized(lock) {
            while(latch.getCount() != 0) {
                lock.wait();
            }
        }
    }

    public void countUp() { //should probably check for Integer.MAX_VALUE
        synchronized(lock) {
            latch = new CountDownLatch((int) latch.getCount() + 1);
            lock.notifyAll();
        }
    }

    public int getCount() {
        synchronized(lock) {
            return (int) latch.getCount();
        }
    }
} 
```

注意：我尚未对其进行深入测试，但它似乎表现得如预期：

```
public static void main(String[] args) throws InterruptedException {
    final CountUpAndDownLatch latch = new CountUpAndDownLatch(1);
    Runnable up = new Runnable() {
        @Override
        public void run() {
            try {
                System.out.println("IN UP " + latch.getCount());
                latch.countUp();
                System.out.println("UP " + latch.getCount());
            } catch (InterruptedException ex) {
            }
        }
    };

    Runnable downOrWait = new Runnable() {
        @Override
        public void run() {
            try {
                System.out.println("IN DOWN " + latch.getCount());
                latch.countDownOrWaitIfZero();
                System.out.println("DOWN " + latch.getCount());
            } catch (InterruptedException ex) {
            }
        }
    };

    Runnable waitFor0 = new Runnable() {
        @Override
        public void run() {
            try {
                System.out.println("WAIT FOR ZERO " + latch.getCount());
                latch.waitUntilZero();
                System.out.println("ZERO " + latch.getCount());
            } catch (InterruptedException ex) {
            }
        }
    };
    new Thread(waitFor0).start();
    up.run();
    downOrWait.run();
    Thread.sleep(100);
    downOrWait.run();
    new Thread(up).start();
    downOrWait.run();
} 
```

输出：

```
IN UP 1
UP 2
WAIT FOR ZERO 1
IN DOWN 2
DOWN 1
IN DOWN 1
ZERO 0
DOWN 0
IN DOWN 0
IN UP 0
DOWN 0
UP 0 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-05T07:51:41.003

对于那些需要基于 AQS 的解决方案的人来说，这对我有用：

```
public class CountLatch {

    private class Sync extends AbstractQueuedSynchronizer {
        private static final long serialVersionUID = 1L;

        public Sync() {
        }

        @Override
        protected int tryAcquireShared(int arg) {
            return count.get() == releaseValue ? 1 : -1;
        }

        @Override
        protected boolean tryReleaseShared(int arg) {
            return true;
        }
    }

    private final Sync sync;
    private final AtomicLong count;
    private volatile long releaseValue;

    public CountLatch(final long initial, final long releaseValue) {
        this.releaseValue = releaseValue;
        this.count = new AtomicLong(initial);
        this.sync = new Sync();
    }

    public void await() throws InterruptedException {
        sync.acquireSharedInterruptibly(1);
    }

    public long countUp() {
        final long current = count.incrementAndGet();
        if (current == releaseValue) {
            sync.releaseShared(0);
        }
        return current;
    }

    public long countDown() {
        final long current = count.decrementAndGet();
        if (current == releaseValue) {
            sync.releaseShared(0);
        }
        return current;
    }

    public long getCount() {
        return count.get();
    }
} 
```

您使用初始值和目标值初始化同步器。一旦达到目标值（通过向上和/或向下计数），等待的线程将被释放。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-02T16:07:05.430

我需要一个并使用与使用 AQS（非阻塞）的 CountDownLatch 相同的策略来构建它，这个类也与为 Apache Camel 创建的一个非常相似（如果不准确的话），我认为它也比 JDK Phaser 更轻，这个就像 JDK 中的 CountDownLact 一样，它不会让您在零以下倒数，并允许您倒数和倒数：

导入 java.util.concurrent.TimeUnit；导入 java.util.concurrent.locks.AbstractQueuedSynchronizer；

```
public class CountingLatch
{
  /**
   * Synchronization control for CountingLatch.
   * Uses AQS state to represent count.
   */
  private static final class Sync extends AbstractQueuedSynchronizer
  {
    private Sync()
    {
    }

    private Sync(final int initialState)
    {
      setState(initialState);
    }

    int getCount()
    {
      return getState();
    }

    protected int tryAcquireShared(final int acquires)
    {
      return getState()==0 ? 1 : -1;
    }

    protected boolean tryReleaseShared(final int delta)
    {
      // Decrement count; signal when transition to zero
      for(; ; ){
        final int c=getState();
        final int nextc=c+delta;
        if(nextc<0){
          return false;
        }
        if(compareAndSetState(c,nextc)){
          return nextc==0;
        }
      }
    }
  }

  private final Sync sync;

  public CountingLatch()
  {
    sync=new Sync();
  }

  public CountingLatch(final int initialCount)
  {
    sync=new Sync(initialCount);
  }

  public void increment()
  {
    sync.releaseShared(1);
  }

  public int getCount()
  {
    return sync.getCount();
  }

  public void decrement()
  {
    sync.releaseShared(-1);
  }

  public void await() throws InterruptedException
  {
    sync.acquireSharedInterruptibly(1);
  }

  public boolean await(final long timeout) throws InterruptedException
  {
    return sync.tryAcquireSharedNanos(1,TimeUnit.MILLISECONDS.toNanos(timeout));
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-01T22:05:41.653

这是`CounterLatch`Apache 站点上的一个变体。

他们的版本，出于他们自己最熟悉的原因，在变量 ( ) 处于给定值 **时阻塞调用者线程。**`AtomicInteger`

但是调整此代码非常容易，这样您就可以选择 Apache 版本的功能，或者......说“在这里**等到**计数器达到某个值”。可以说，后者将具有更多的适用性。在我的特殊情况下，我把它弄得沙沙作响，因为我想检查所有“块”是否已经在`SwingWorker.process()`……上发表过，但我后来找到了它的其他用途。

在这里，它是用 Jython 编写的，这是世界上最好的语言 (TM)。我将在适当的时候推出一个 Java 版本。

```
class CounterLatch():
    def __init__( self, initial = 0, wait_value = 0, lift_on_reached = True ):
        self.count = java.util.concurrent.atomic.AtomicLong( initial )
        self.signal = java.util.concurrent.atomic.AtomicLong( wait_value )

        class Sync( java.util.concurrent.locks.AbstractQueuedSynchronizer ):
            def tryAcquireShared( sync_self, arg ):
                if lift_on_reached:
                    return -1 if (( not self.released.get() ) and self.count.get() != self.signal.get() ) else 1
                else:
                    return -1 if (( not self.released.get() ) and self.count.get() == self.signal.get() ) else 1
            def tryReleaseShared( self, args ):
                return True

        self.sync = Sync()
        self.released = java.util.concurrent.atomic.AtomicBoolean() # initialised at False

    def await( self, *args ):
        if args:
            assert len( args ) == 2
            assert type( args[ 0 ] ) is int
            timeout = args[ 0 ]
            assert type( args[ 1 ] ) is java.util.concurrent.TimeUnit
            unit = args[ 1 ]
            return self.sync.tryAcquireSharedNanos(1, unit.toNanos(timeout))
        else:
            self.sync.acquireSharedInterruptibly( 1 )

    def count_relative( self, n ):
        previous = self.count.addAndGet( n )
        if previous == self.signal.get():
            self.sync.releaseShared( 0 )
        return previous 
```

注意 Apache 版本使用关键字`volatile`for`signal`和`released`。在 Jython 中，我认为这并不存在，但使用`AtomicInteger`and`AtomicBoolean`应该确保在任何线程中没有值“过时”。

示例用法：

在 SwingWorker 构造函数中：

```
self.publication_counter_latch = CounterLatch() 
```

在 SW.publish 中：

```
# increase counter value BEFORE publishing chunks
self.publication_counter_latch.count_relative( len( chunks ) )
self.super__publish( chunks ) 
```

在 SW.process 中：

```
# ... do sthg [HERE] with the chunks!
# AFTER having done what you want to do with your chunks:
self.publication_counter_latch.count_relative( - len( chunks ) ) 
```

在等待块处理停止的线程中：

```
worker.publication_counter_latch.await() 
```

# c - 如何调试我的 C gstreamer 代码？

> ID：14255020
> 
> 赞同：4
> 
> 时间：2013-01-10T09:54:40.273
> 
> 标签：c, debugging, gstreamer

我成功地编写并执行了`helloworld.c`应用[程序开发手册](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/manual/manual.pdf)第 43 页中的程序。它工作得很好。

编译是使用这个命令行完成的

```
gcc -Wall helloworld.c -o helloworld $(pkg-conﬁg --cﬂags --libs gstreamer-1.0) 
```

我正在使用安装在我的`ubuntu 12.0.4`.

我担心调试我的程序，我知道这可以使用命令行选项来实现`GST_DEBUG`。这是一个`qtdemux`在 csv 文件中生成调试报告的示例。

```
GST_DEBUG=qtdemux:5 gst-launch filesrc location=/home/pub_Irma.mp4 ! qtdemux name=demuxer demuxer. ! queue ! faad ! audioconvert ! audioresample ! autoaudiosink demuxer. ! queue ! ffdec_h264 ! ffmpegcolorspace ! autovideosink 2> > (tee /media/thesis/log_pub.csv) 
```

但由于我没有使用`gst-launch`，我想知道如何以编程方式做同样的事情？生成调试报告的手动代码中缺少什么？或者在编译或/和执行程序时是否需要设置特殊参数？

我试过这样编译

```
gcc $2 -o $3 -Wall `pkg-config --cflags --libs gstreamer-0.10 --enable-gst-debug` 
```

但没有成功

感谢您的回复！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T09:56:16.890

我终于发现这可以通过以这种方式运行程序在执行时完成

```
GST_DEBUG=oggdemux:5 ./helloworld file.ogg 
```

上面的例子调试了 ogg demuxer

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:07:58.580

GST_DEBUG 是一个环境变量，可以与任何 gstreamer 应用程序一起使用，只要日志子系统未禁用。请注意，输出不是 cvs 格式。我建议使用 gst-debug-viewer 来挖掘输出（从 freedesktop git 获取）。

# llvm - LLVM 指令*->getOperand() 不适用于 ICMP

> ID：14255023
> 
> 赞同：0
> 
> 时间：2013-01-10T09:54:50.957
> 
> 标签：llvm

在我的通行证中，我检查了 runOnFunction() 中每个基本块的倒数第二条指令。我只对 ICMP 指令感兴趣。

```
if(BB->size()>1)
    if(last->getPrevNode())
    {
        previous = last->getPrevNode();
        ok=1;
    } 
```

我想获取先前的操作数，它是指令*类型。由于基于 getNumOperands 的测试，ICMP 有 2 个（正常）。

```
if ( ok && ((previous->getNumOperands())>=2) )

    errs()<<"\nTTTTT "<<previous->getOperand(0)->getName()<<" | " 
          <<previous->getOperand(0)->getValueName()<<" | "
          <<previous->getOperand(0)->getValueID()<<" | "
          <<previous->getOperand(0)->getNumUses()<<" TTTTT\n"; 
```

getOperand(1) 的结果是相似的。输出是：

```
*PREVIOUS:   store i32 %conv15, i32* %i, align 4
TTTTT conv15 | 0x9b69090 | 59 | 1 TTTTT
...
*PREVIOUS:   store i32 %inc13, i32* %i, align 4
TTTTT inc13 | 0x9b76478 | 30 | 1 TTTTT
...
*PREVIOUS:   %cmp11 = icmp sgt i32 %8, 3
TTTTT  | 0x0 | 49 | 1 TTTTT
...
*PREVIOUS:   store i32 %dec, i32* %i, align 4
TTTTT dec | 0x9b69130 | 30 | 1 TTTTT
...
*PREVIOUS:   %cmp8 = icmp sle i32 %6, 2
TTTTT  | 0x0 | 49 | 1 TTTTT
...
*PREVIOUS:   store i32 %inc, i32* %i, align 4
TTTTT inc | 0x9b761c8 | 30 | 1 TTTTT 
```

你知道我如何从 ICMP 指令中获取操作数吗？我需要在某些情况下使用它们吗？（也是他们的属性）。十分感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T12:37:47.847

你问：

> 你知道我如何从 ICMP 指令中获取操作数吗

但是你*确实*得到了操作数，你可以很好地使用这些值。在您的具体示例中，它们没有名称（编号值，例如`%8`被认为是无名的，而常量显然是无名的），但它们仍然是有效值。

# r - 刻度线和光栅边距之间的空间，ggplot2，R

> ID：14255032
> 
> 赞同：2
> 
> 时间：2013-01-10T09:55:23.050
> 
> 标签：r, ggplot2

> **可能重复：**
> [使用 ggplot 的 geom_tile() 时的边距调整](https://stackoverflow.com/questions/2805885/margin-adjustments-when-using-ggplots-geom-tile)

如图所示，如何调整刻度线和光栅边距之间的宽度

![在此处输入图像描述](../Images/0b358f4b515f5f4a55d562837c9c64e4.png)

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T10:18:57.030

您需要设置`expand=c(0, 0)`轴刻度。

您可以在 中阅读所有相关信息`?continuous_scale`。报价：

> 展开
> 长度为 2 的数值向量，给出一个乘法和加法常数，用于扩大刻度范围，以便数据和轴之间有一个小的间隙。

```
library(ggplot2)

pp <- function (n,r=4) {
  x <- seq(-r*pi, r*pi, len=n)
  df <- expand.grid(x=x, y=x)
  df$r <- sqrt(df$x^2 + df$y^2)
  df$z <- cos(df$r^2)*exp(-df$r/6)
  df
}
ggplot(pp(20), aes(x=x,y=y)) + 
  geom_tile(aes(fill=z)) + 
  scale_fill_gradient(low="green", high="red") +
  scale_x_continuous(expand=c(0, 0)) + 
  scale_y_continuous(expand=c(0, 0)) 
```

![在此处输入图像描述](../Images/647eec03cd9f21f4c443e7809e4450b3.png)

# php - 电子邮件标头分析器

> ID：14255035
> 
> 赞同：-5
> 
> 时间：2013-01-10T09:55:32.537
> 
> 标签：php, email

不要对我的问题投反对票。

我正在创建类似于此页面[http://www.iptrackeronline.com/email-header-analysis.php](http://www.iptrackeronline.com/email-header-analysis.php)的工具来分析电子邮件标题。

我正在使用正则表达式获取用户的 IP 地址。但是“已接收”标题部分中有很多 IP 地址，我想忽略所有其他 IP 地址并获取用户原始 IP 地址。

示例电子邮件标头：IP - 70.183.59.6

```
Return-path: <user@example.com>
Received: from mac.com ([10.13.11.252])
  by ms031.mac.com (Sun Java System Messaging Server 6.2-8.04 (built Feb 28
  2007)) with ESMTP id <0JMI007ZN7PETGC0@ms031.mac.com> for user@example.com; Thu,
  09 Aug 2007 04:24:50 -0700 (PDT)
Received: from mail.dsis.net (mail.dsis.net [70.183.59.5])
  by mac.com (Xserve/smtpin22/MantshX 4.0) with ESMTP id l79BOnNS000101
  for <user@example.com>; Thu, 09 Aug 2007 04:24:49 -0700 (PDT)
Received: from [192.168.2.77] (70.183.59.6) by mail.dsis.net with ESMTP
  (EIMS X 3.3.2) for <user@example.com>; Thu, 09 Aug 2007 04:24:49 -0700
Date: Thu, 09 Aug 2007 04:24:57 -0700
From: Frank Sender <sender@example.com>
Subject: Test
To: Joe User <user@example.com>
Message-id: <61086DBD-252B-46D2-A54C-263FE5E02B41@example.com>
MIME-version: 1.0 (Apple Message framework v752.2)
X-Mailer: Apple Mail (2.752.2)
Content-type: text/plain; charset=US-ASCII; format=flowed
Content-transfer-encoding: 7bit 
```

如果您知道任何可以获取 IP 地址的电子邮件解析器，请给我链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T12:37:20.160

我实际上认为没有正则表达式会更容易：这些标题被组织为行，因此从上到下遍历行并根据行的第一个单词存储行。

`Received:`标头总是以相反的顺序排列，即当从上到下阅读时，您将遇到的最后一个是离发送者最近的服务器。这意味着，如果您只需要该`Received:`记录，您可以将其存储为单个条目，覆盖之前遇到的那些。

最后一点：如果标头包含[X-Originating-IP](http://en.wikipedia.org/wiki/X-Originating-IP)标头，则该标头将包含实际发件人的 IP 地址。

# jquery - jquery依赖表单元素验证

> ID：14255037
> 
> 赞同：0
> 
> 时间：2013-01-10T09:55:41.187
> 
> 标签：jquery, forms, validation, jquery-validate

我正在使用一个很长的可扩展表单。例如如果`question 1`回答“是”，`question 1.1`将显示等等。

这适用于以下（简单）jquery 脚本：

**选择菜单**

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".question").change(function() {
            var itemValue = $(this).children(':selected').val();

            if(itemValue != "" &&  itemValue != "N")
            {
                $(".questiont").show();
            }
            else
            {
                $(".questiont").hide();
            }
        }); 
    }); 
</script> 
```

**HTML**

```
<select name="question1[]" class='required txtBox'>
              <option selected="selected"></option>
              <option value="J">Yes</option>
              <option value="N">No</option>
            </select>
<table>
    <tr class="questiont" style="display:none; border-collapse:collapse;">
              <td>4.2</td>
              <td>Textarea</td>
              <td><textarea name="questiont[]" class="txtBox"></textarea></td>
            </tr>
</table> 
```

问题是，如果 1 是“是”并因此显示 1.1，则应填写 1.1。我正在为此使用 jQuery 验证。

问题是我不知道如何将验证与隐藏或显示状态结合起来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:31:26.747

试试这个代码：

```
if(itemValue != "" &&  itemValue != "N")
            {
                $(".questiont").show();
                $('.questiont').toggleClass('required');
            }
            else
            {
                $(".questiont").hide();
                $('.questiont').toggleClass('required');
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:23:21.813

It's easier to select and validate when the two related elements are nested in a separate container element. You can then select the parent container with the `closest()` method and validate according to your logic.

For example:

**HTML**

```
<div class="question_container">    
    <select name="question1[]" class='required txtBox'>
        <option selected="selected"></option>
        <option value="J">Yes</option>
        <option value="N">No</option>
    </select>
    <table>
        <tr class="questiont" style="display:none; border-collapse:collapse;">
            <td>4.2</td>
            <td>Textarea</td>
            <td><textarea name="questiont[]" class="txtBox"></textarea></td>
        </tr>
    </table>
</div> 
```

**Javascript**

```
$('.question_container select.required').change(
    function() {
        var question_container = $(this).closest('.question_container');
        var questiont          = question_container.find('.questiont textarea');

        if ($(this).val() == 'yes' && !$.trim(questiont.val())) {
            // ... error logic goes here
            // For example:
            question_container.addClass('with_error');
        }
    }
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T10:30:55.383

我建议使用[jQuery validate 插件](https://stackoverflow.com/tags/jquery-validate/info)，默认情况下会忽略隐藏字段。

任何满足 jQuery 选择器 ":hidden" 的输入元素都将被忽略，一旦元素显示，它将根据您为其指定的规则进行验证。

# javascript - 图像不动

> ID：14255039
> 
> 赞同：1
> 
> 时间：2013-01-10T09:55:43.157
> 
> 标签：javascript, jquery, html, css, browser

我做了一个网页，它的背景是动态图像。

1\. IE和Opera只显示图片**不**移动。（字体**也不起作用**）
2\. Chrome 和 Safari**也不**移动图像。（但字体**显示正确**）
3\. Firefox根据需要**移动图像**。（但不**显示****字体**）

 **您可以在这里查看网站：http: [//ankitsuryawanshi.in/projects/404-html/](http://ankitsuryawanshi.in/projects/404-html/)

（编辑的）CSS代码在这里：

```
/*-----------------------------------------------------------------------
@FONT-FACE
------------------------------------------------------------------------*/
@font-face {
    font-family: 'ChunkFive-Roman';
    src: url('../fonts/Chunkfive-roman-webfont.eot');
    src: url('../fonts/Chunkfive-roman-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Chunkfive-roman-webfont.woff') format('woff'),
         url('../fonts/chunkfive-roman-webfont.ttf') format('truetype'),
         url('../fonts/chunkfive-roman-webfont.svg#ChunkFiveRegular') format('svg');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'BloklettersBalpen';
    src: url('../fonts/blokletters-balpen-webfont.eot');
    src: url('../fonts/blokletters-balpen-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/blokletters-balpen-webfont.woff') format('woff'),
         url('../fonts/blokletters-balpen-webfont.ttf') format('truetype'),
         url('../fonts/blokletters-balpen-webfont.svg#BloklettersBalpen') format('svg');
    font-weight: normal;
    font-style: normal;

}

/*-----------------------------------------------------------------------
LETTERING SPECIFIC STYLES
------------------------------------------------------------------------*/
/* Logo H1 Text */
#logo .word1 {
    margin-left: 3px;
}

#logo .word1 span {
    display: inline-block;
    position: relative;
    letter-spacing: 0;
    transition: width 0.2s;
}

#logo span:hover {
    top: 4px;
}

/*-----------------------------------------------------------------------
DEFAULTS
------------------------------------------------------------------------*/
body {
    color: #000;
    background: #c1b69a url(../images/texture.jpg);
}

a {
    color: #000;
    text-decoration: none;
    outline: none;
}

h1 {
    font-family: 'ChunkFive-Roman', sans-serif;
    color: #1e1e1e;
    font-size: 60px;
    font-weight: 500;
    line-height: 1;
    text-transform: none;
}

h2 {
    font-family: 'ChunkFive-Roman', sans-serif;
    color: #1e1e1e;
    font-size: 114px;
    font-weight: 800;
    line-height: 1;
    text-transform: uppercase;
    text-shadow: #62b445 1px 1px 0, #62b445 2px 2px 0, #62b445 3px 3px 0, #45a5f6 4px 4px 0, #45a5f6 5px 5px 0, 5px 8px 10px rgba(0,0,0,.35);
}

h3 {
    font-size: 46px;
    font-weight: bold;
    line-height: 1.5;
    color: #262626;
}

h4 {
    font-family: 'ChunkFive-Roman', sans-serif;
    font-size: 26px;
    color: #262626;
    margin-bottom: 20px;
    font-style: normal;
    text-transform: uppercase;
}

.written {
    font-family: 'BloklettersBalpen',sans-serif;
    font-size: 18px;
    color: #000;
}

.written-small {
    font-family: 'BloklettersBalpen', sans-serif;
    font-size: 14px;
    color: #000;
}

p {
    font-size: 20px;
    color: #000;
}

/* About Page Definitions Area */
.col-def-plus p,.col-def-equals p {
    font-size: 80px;
    font-weight: 800;
}

.col-def p {
    font-size: 18px;
}

div.col-def p.word-break {
    font-size: 28px;
    font-weight: 900;
    color: #000;
}

div.col-def p.word-def {
    font-size: 14px;
    line-height: 1.7;
    margin-top: 12px;
    font-style: italic;
    color: #333;
}

#shareTab {
    font-family: 'ChunkFive-Roman', sans-serif;
}

/*-----------------------------------------------------------------------
COMMON CLASSES
------------------------------------------------------------------------*/
.clear {
    clear: both;
}

.wrap {
    max-width: 960px;
    width: 100%;
    margin: 0 auto;
}

.fr {
    float: right;
}

.fl {
    float: left;
}

.ac {
    text-align: center;
}

.line-through {
    text-decoration: line-through;
}

.underline {
    text-decoration: underline;
}

/*-----------------------------------------------------------------------
FLOATING BACKGROUND IMAGES
------------------------------------------------------------------------*/
#clouds {
    z-index: -1;
    background: url(../images/clouds.png);
    position: absolute;
    width: 100%;
    height: 736px;
    display: block;
}

@keyframes "float-clouds" {
 0% {
    background-position: 2400px 0;
 }
 100% {
    background-position: 0 0;
 }

}

@-moz-keyframes float-clouds {
 0% {
   background-position: 2400px 0;
 }
 100% {
   background-position: 0 0;
 }

}

@-webkit-keyframes "float-clouds" {
 0% {
   background-position: 2400px 0;
 }
 100% {
   background-position: 0 0;
 }

}

@-ms-keyframes "float-clouds" {
 0% {
   background-position: 2400px 0;
 }
 100% {
   background-position: 0 0;
 }

}

@-o-keyframes "float-clouds" {
 0% {
   background-position: 2400px 0;
 }
 100% {
   background-position: 0 0;
 }

}

#clouds {
    animation-name: float-clouds;
    -webkit-animation-duration: 95s;
    animation-iteration-count: infinite;
    animation-timing-function: linear;
    -moz-animation-duration: 95s;
    -o-animation-duration: 95s;
    -ms--animation-duration: 95s;
} 
```

如何在此处更正所有内容，以便它在所有浏览器中正常工作。

这是图像移动的JS代码：

```
 $(document).ready(function() {
  $("#logo h1, .nav-here-home, .nav-here-about, .home-page-tag h3, .about-page-tag h3, .written").lettering('words').children('span').lettering(); 
  $(".home-intro h2").fitText(.86); 
  $(".about-intro h2").fitText(.86);  

});        

// --------------------------------------------------- //
//             Background Image Floating               //
// --------------------------------------------------- //
$(document).ready(function() {
    if (!$.browser.webkit){
        var clouds = $('#clouds');
        var background = 0;
        setInterval(function(){
            background -= 2;
            if (background == 1200) background = 0;
            clouds.css('background-position', background)
        }, 95)
    }
}) 
```

我现在应该在哪里编辑它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:21:51.357

看看 jQuery .animate() - 它会做动画，但使用 javascript 而不是 css3，css3 的动画不完全支持，因为它仍然相当新。 [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

```
<script type="text/javascript" src="/js/jquery.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
      $('#clouds').animate({
          'background-position-x': '2400px',
          'background-position-y': '0'
      }, 95*1000, 'linear');
    });
    setInterval(function(){
      $('#clouds').animate({
        'background-position-x': '2400px',
        'background-position-y': '0'
      }, 95*1000, 'linear');
    }, 95*1000);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:06:12.960

我创建了一个**[DEMO](http://output.jsbin.com/yaqofi)**。

我希望这就是你要找的。尽管您需要根据需要进行一些调整。**

# jquery - 来自不同域的父级中的Jquery绑定功能

> ID：14255040
> 
> 赞同：0
> 
> 时间：2013-01-10T09:55:44.797
> 
> 标签：jquery, cross-domain

我的问题与这个问题非常相似：[当父级来自不同域时，在另一个 iframe 中执行 javascript 函数](https://stackoverflow.com/questions/3032770/execute-javascript-function-in-a-another-iframe-when-parent-is-from-different-do)

我有一个**A.com**域页面，其中包含 2 个 iframe，其中包含 B.com/page1 和 B.com/page2

我需要通过单击 B.com/page1 中的按钮（与已链接页面相同）来执行 B.com/page2 iframe 中的**功能**，**但**使用**jQuery**。

 ****现在我在 B.com/page1 中使用此代码

```
parent.$(parent.document).trigger("myFunction", [myParams]); 
```

并在 B.com/page2 中使用

```
parent.$(parent.frames).bind("myFunction", function (e, value) { localFunction(value); }); 
```

如果我从 B.com/index 加载 page1 和 page2 这很有效，但是从 A.com 加载时它会失败并出现错误

> 不安全的 JavaScript 尝试从具有 URL B.com/page2 的框架访问具有 URL A.com 的框架。域、协议和端口必须匹配。

错误由绑定函数触发。如链接主题中所述，我可以使用代码从 iframe 引用到同一页面中的其他 iframe：

```
parent.frames['page2'].myFunction(args); 
```

但我仍然从 javascript 控制台得到同样的错误**和**另一个错误：

> 未捕获的类型错误：无法调用未定义的方法“myFunction”

我怎么能摆脱这个？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:54:04.887

按照 Henrik 的建议，使用 window.postMessage 函数解决！我首先必须将 B.com/page2 postMessage 发送到 A.com，然后将 A.com postMessage 发送到 B.com/page1：D 它可以在最新的 chrome、opera、firefox 中工作，即 10、ie9、ie8、ie7 没有任何问题： )

B.com/page2 向它发送消息：

```
parent.postMessage("go!!!!!", $('#parentPage').val()); 
```

（我让父页面将其 ip 写入一个名为“parentPage”的隐藏 div 中）然后父页面获取事件

```
var eventMethod = window.addEventListener ? "addEventListener" : "attachEvent";
var eventer = window[eventMethod];
var messageEvent = eventMethod == "attachEvent" ? "onmessage" : "message";
eventer(messageEvent, function (e) {
        //triggered code here
}, false); 
```

并用这个重新发送消息

```
win.postMessage(
                "go",
                targetPage); 
```

B.com/page1 接收消息：

```
window.onmessage = function (e) { /* code here */ } 
```

希望它有用:)****

# visual-studio - Visual Studio：基于正则表达式的自定义代码高亮

> ID：14255042
> 
> 赞同：11
> 
> 时间：2013-01-10T09:55:47.847
> 
> 标签：visual-studio, syntax-highlighting

由于我的应用程序支持一些偏执的调试级别（每个数据分配，代码中的每个步骤都写入日志目标），因此我的代码在某些方法中充斥着日志调用，例如

```
logger.Log(LogLevel.Debug, 0, "Initializing i18n...");
Lang.Language = SystemInfo.Language;
Logger.Log(LogLevel.Debug, 0, "Default system language: " + Lang.Language);
string[] languageFiles = Directory.GetFiles(ClientEnvironment.LanguagePath);
Logger.Log(LogLevel.Debug, 0, "Initializing local language files..."); 
```

如您所见，只有两个“真实”代码行。这使得代码有点难以阅读。我想知道是否可以在 Visual Studio 中指定一些自定义代码格式化规则，让日志记录行以柔和的灰色文本颜色显示，而不是默认文本颜色。这将导致“真实”代码行的隐式突出显示，从而产生更具可读性的代码。

我需要类似的东西：

```
If statement starts with "logger.Log", set foreground color to gray. 
```

你知道任何可以实现这种行为的插件吗？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-04-29T08:18:51.083

**altrue.CustomColoring**扩展允许基于简单的正则表达式设置自定义前景色。安装后重启Vs Code，不重启就无法正常工作。

[![在此处输入图像描述](../Images/cc10344d0578b7121a6d6e7c5b7f416e.png)](https://i.stack.imgur.com/Fb5Nq.gif)

[https://marketplace.visualstudio.com/items?itemName=altrue.CustomColoring](https://marketplace.visualstudio.com/items?itemName=altrue.CustomColoring)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T05:18:09.270

编辑：这不是发布者问题的适当答案，但我无法删除它，因为 StackOverflow 不允许删除已接受的答案。

这个 Visual Studio 扩展将做你想做的事：

*   [VSColorOutput - 用于着色构建和调试输出的 Visual Studio 扩展](http://mike-ward.net/vscoloroutput)

您可以为自定义输出窗口着色指定正则表达式。

# c++ - 如何使用精神解析器获取错误位置

> ID：14255045
> 
> 赞同：2
> 
> 时间：2013-01-10T09:55:54.947
> 
> 标签：c++, boost-spirit

我用精神写了一个简单的解析器，类似于 json（但更简单，更专业）。按照[这里](http://boost-spirit.com/home/articles/qi-example/tracking-the-input-position-while-parsing/)的建议，我尝试通过跟踪错误位置来实现错误处理。特别是我的解析函数如下

```
bool parse_properties(std::istream& is, const std::string &filename, PropertyList &pset)
{
    namespace qi = boost::spirit::qi;
    namespace ascii = boost::spirit::ascii;
    namespace classic = boost::spirit::classic;

    typedef std::istreambuf_iterator<char> base_iterator_type;
    base_iterator_type in_begin(is);

    // convert input iterator to forward iterator, usable by spirit parser
    typedef boost::spirit::multi_pass<base_iterator_type> forward_iterator_type;
    forward_iterator_type fwd_begin = boost::spirit::make_default_multi_pass(in_begin);
    forward_iterator_type fwd_end;

    // wrap forward iterator with position iterator, to record the position
    typedef classic::position_iterator2<forward_iterator_type> pos_iterator_type;
    pos_iterator_type position_begin(fwd_begin, fwd_end, filename);
    pos_iterator_type position_end;

    qi::rule<pos_iterator_type> skipper = ascii::space | 
    '#' >> *(ascii::char_ - qi::eol) >> qi::eol; 

    property_set_grammar<pos_iterator_type, qi::rule<pos_iterator_type> > g;
    bool r = false;
    try {
        r = phrase_parse(position_begin, 
                         position_end, 
             g, skipper, pset);
    }
    catch(const qi::expectation_failure<pos_iterator_type>& e) {
        const classic::file_position_base<std::string>& pos = e.first.get_position();
        std::stringstream msg;
        msg <<
            "parse error at file " << pos.file <<
            " line " << pos.line << " column " << pos.column << std::endl <<
            "'" << e.first.get_currentline() << "'" << std::endl <<
            std::setw(pos.column) << " " << "^- here";
        throw std::runtime_error(msg.str());
    }

    return r;
} 
```

不幸的是，它不起作用。`phrase_parse`对于正确和不正确的文件，函数总是立即返回 false，并且从不引发任何异常。

但是，当我修改上面的代码以使用简单`forward_iterator`的而不是它时，`classic::position_iterator2`它工作正常，但它当然不会跟踪错误位置。非常奇怪的是，[这里](http://boost-spirit.com/home/articles/qi-example/tracking-the-input-position-while-parsing/)的原始示例运行良好。所以也许这个问题与我的语法有关。如下：

```
template <typename Iterator, typename Skipper>
struct property_set_grammar : qi::grammar<Iterator, PropertyList(),
                                          Skipper>
{
    qi::rule<Iterator, Property(), Skipper> prop;
    qi::rule<Iterator, std::string(), Skipper> name;
    qi::rule<Iterator, std::string(), Skipper> type;
    qi::rule<Iterator, std::string(), Skipper> value;
    qi::rule<Iterator, std::string(), Skipper> value_simple;
    qi::rule<Iterator, std::string(), Skipper> value_quoted;
    qi::rule<Iterator, PropertyList(), Skipper> plist;

    property_set_grammar() : 
        property_set_grammar::base_type(plist, "Set of Properties") {
        using qi::lit;
        using qi::alpha;
        using qi::alnum;
        using qi::lexeme;
        using qi::char_;

        name = lexeme[alpha >> *alnum];
        type = lexeme[alpha >> *alnum];
        value_simple = lexeme[*(alnum - lit('"'))];
        value_quoted = lit('"') > lexeme[*(char_ - lit('"'))] > lit('"');
        value = (value_quoted | value_simple);

        prop = name >> '=' > value > ';';
        plist = type >> '(' > name > ')' > '{' >> *(prop | plist) > '}' > ';';
    }
}; 
```

我正在使用 g++ (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2 和 1.50 版的 boost 库。

有什么我忽略的愚蠢吗？如果需要，我可以提供完整的代码（只是几个文件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:52:45.383

似乎 boost::spirit::position_iterator 被窃听了。

[您可以按照此处](https://stackoverflow.com/questions/14005273/strange-error-with-boostspiritposition-iterator2)`position_iterator`答案中的建议编辑标题。

或者你可以实现你自己的 position_iterator，我基本上是通过复制和粘贴的原始代码来实现的`boost::spirit::position_iterator`，然后删除一些不需要的东西。

~~此外，从 解析时`istream`，请确保设置`noskipws`manip：~~

```
//is >> std::noskipws; 
```

**编辑：**不需要 istreambuf_iterator

# php - 在 PHP 中发布数据的问题

> ID：14255049
> 
> 赞同：0
> 
> 时间：2013-01-10T09:56:11.147
> 
> 标签：php, jquery, post

**问题**

我有一个一直运行良好的脚本。它从来没有给出任何问题。它最后一次使用是在 12 月，没有任何问题。没有人改变任何东西。但现在，它不起作用。它应该做的是提交评论，然后通知用户该评论。但它不会进入该部分，它会保存并通知。

**我做了什么和结果**

我已经取出了保存和通知用户的特定脚本，并对其进行了测试。它不返回任何东西，这意味着它没有进入它。我检查了帖子数据，显示正确。我还强制发布正确的数据（通过更改`params = $('#reviewForm').serialize();`为`params = 'counter=1'`.

**我的代码**

这是用户填写的表格：

```
<form id="reviewForm">
    Employee that will be reviewed: <input type="text" id="reviewed" name="reviewed" class="items"/><br>
    <div id="openReviews" class="ui-corner-all ui-state-error" style="padding: 5 5 5 5"></div>
    Employees that will do the review:<br>
    <div id="reviewee_1">
        <ul><b>Employee 1:</b>
            <li>Name: <input type="text" id="reviewer_1" name="reviewer_1" class="items"/></li>
            <li>Position: <select id="position_1" name="position_1" class="items">
                <option value="sup">Supervisor</option>
                <option value="supp">Peers: Support</option>
                <option value="tech">Peers: Technical</option>
                <option value="sub">Sub-Ordinate</option>
            </select></li>
        </ul>
    </div>
    <input type="hidden" id="counter" name="counter" value="1" class="items"/>
    Add Another Reviewer <input type="button" id="add" value="Go >>"/><br>
    <input type="button" onClick="sendInfo()" value="Create Review"/>
</form> 
```

单击 Create Review 时，它会调用这段 jQuery 代码：

```
function sendInfo() 
{
    if($('#reviewed').val() != "")
    {
        var params = $("#reviewForm").serialize();
        $.post('reviews.php',
        params, // as stated, even if I change this to counter = 1, it doesn't work
        function(data) {
            $('#reviewForm').hide();
            $('<p>' + data + '</p>').insertBefore('#reviewForm');
        });
    }
    else
    {
        alert("Please complete all fields in this form!");
    }
} 
```

最后，处理请求的代码：

```
if($_POST['counter'] > 0) // check if review was submitted
{
    // do stuff...
    // it doesn't even enter this...
} 
```

**问题**

PHP 或 jQuery 规范中是否发生了可能导致其停止工作的更改？有什么我想念的吗？这是怎么回事！？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:54:09.850

一切都取决于您使用的 JQuery 版本。

我会替换：

```
var params = $("#reviewForm").serialize(); 
```

至

```
var params = {};
$.each($("#reviewForm").serializeArray(),function(key, elem){ params[elem.name] = elem.value }); 
```

对于帖子，我会使用

```
$.ajax({
    type: "POST",
    'url': 'reviews.php',
    'cache': false,
    'async': true,
    'data': params
}).done(function( data ) {
    $('#reviewForm').hide();
    $('<p>' + data + '</p>').insertBefore('#reviewForm');
}); //before ; you can use 'fail' methot to catch errors 
```

# java - 如何处理 Nimbus Look and Feel 中的派生颜色？

> ID：14255050
> 
> 赞同：5
> 
> 时间：2013-01-10T09:56:11.577
> 
> 标签：java, swing, user-interface, look-and-feel, nimbus

我想要的是使不可编辑的文本区域的背景与其禁用的背景相同。

我知道颜色可以通过`UIManager`key获得`TextArea.disabled`：

```
DerivedColor(color=214,217,223 parent=control offsets=0.0,0.0,0.0,0 pColor=214,217,223 
```

我首先尝试：

```
textArea.setBackground(UIManager.getColor("TextArea.disabled")); 
```

它根本没有改变，背景仍然是白色的。

然后我尝试了：

```
textArea.setBackground(new Color(UIManager.getColor("TextArea.disabled").getRGB())); 
```

背景确实发生了变化，但与看起来更亮的禁用背景并不完全相同。

处理这种派生颜色的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:49:40.400

> @Zhao Yi 写道 不可编辑的背景没有键

*   再次查看[有关外观和感觉的 Oracle 教程](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/color.html)，覆盖[JTextArea 的正确键](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html#primary)

*   `Keys value`是为了`Painter`

*   `TextArea[Disabled+NotInScrollPane].backgroundPainter`

*   `TextArea[Disabled].backgroundPainter`

![在此处输入图像描述](../Images/a4c4211a691f768c44ff1ca4ca369392.png)

的代码`Java6`，必须更改`imports for Java7`

```
import com.sun.java.swing.Painter;
import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;

public class TestNimbusUIManagerTextArea {

    private static JFrame frame = new JFrame("Nimbus UIDeafaults");
    private JTextArea testEnableTextArea = new JTextArea("enabled JTextArea");
    private JTextArea testDisableTextArea = new JTextArea("disabled JTextArea");

    public TestNimbusUIManagerTextArea() {
        testDisableTextArea.setEnabled(false);
        frame.setLayout(new GridLayout(2, 0, 20, 20));
        frame.add(testEnableTextArea);
        frame.add(testDisableTextArea);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocation(200, 105);
        frame.pack();
        frame.setVisible(true);
    }

    private static void customizeNimbusLaF() {
        UIManager.getLookAndFeelDefaults().put(
                "TextArea[Enabled+NotInScrollPane].backgroundPainter",
                new FillPainter(new Color(127, 255, 191)));
        UIManager.getLookAndFeelDefaults().put(
                "TextArea[Disabled+NotInScrollPane].backgroundPainter",
                new FillPainter(new Color(127, 255, 191)));
        SwingUtilities.updateComponentTreeUI(frame);
    }

    public static void main(String arg[]) {
        try {
            for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    customizeNimbusLaF();                   
                    break;
                }
            }
        } catch (Exception e) {
        }
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                TestNimbusUIManagerTextArea tNUIM = new TestNimbusUIManagerTextArea();
            }
        });
    }
}

class FillPainter implements Painter<JComponent> {

    private final Color color;

    FillPainter(Color c) {
        color = c;
    }

    @Override
    public void paint(Graphics2D g, JComponent object, int width, int height) {
        g.setColor(color);
        g.fillRect(0, 0, width - 1, height - 1);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T02:36:34.283

我找到了答案。用于禁用背景的颜色不是`UIManager.getColor("TextArea.disabled")`，而是在类中硬编码`TextAreaPainter`：

```
private Color color1 = decodeColor("nimbusBlueGrey", -0.015872955f, -0.07995863f, 0.15294117f, 0); 
```

使用这种颜色解决了我的问题。

# c# - EF5 Model-First、DBContext 代码生成和派生类

> ID：14255052
> 
> 赞同：1
> 
> 时间：2013-01-10T09:56:15.950
> 
> 标签：c#, entity-framework

我正在使用设计器（VS2012）创建一个 EF5 实体模型，并将 EF5 DbContext 生成器用作代码生成项。

我的模型包含一个派生自另一个（非抽象）的实体。

因此，假设基础实体称为 BaseEntity，派生实体称为 DerivedEntity。

现在我在生成的上下文类中看到，没有

```
Public DbSet<DerivedEntity> DerivedEntities { get; set; } 
```

定义。

仅有的

```
Public DbSet<BaseEntity> BaseEntities { get; set; } 
```

被定义为。

这是正常的吗？如果是，我如何查询 linq 中的派生实体？

我习惯这样查询：

```
using(var ctx = new EntityContainer)
{
var q = from e in ctx.DerivedEntities <-- but this is now not possible since it doesn't exist
select e;

return q.ToList();
} 
```

感谢回复。

**编辑：**

根据要求，生成的类发布：

![实体模型设计器图（子集）](../Images/8dd253b008c9bb6006c844c7a27677d6.png)

```
public partial class Scheduling
    {
        public int Id { get; set; }
        public string Subject { get; set; }
        public System.DateTime BeginDate { get; set; }
        public System.DateTime EndDate { get; set; }
    }

public partial class TeamScheduling : Scheduling
    {
        public int TeamId { get; set; }
        public Nullable<int> AssignmentId { get; set; }

        public virtual Team Team { get; set; }
        public virtual Assignment Assignment { get; set; }
    }

public partial class EntityContainer : DbContext
    {
        public EntityContainer()
            : base("name=EntityContainer")
        {
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            throw new UnintentionalCodeFirstException();
        }

        public DbSet<Team> Teams { get; set; }
        public DbSet<Location> Locations { get; set; }
        public DbSet<Country> Countries { get; set; }
        public DbSet<Assignment> Assignments { get; set; }
        public DbSet<ProductType> ProductTypes { get; set; }
        public DbSet<AssignmentPreference> AssignmentPreferences { get; set; }
        public DbSet<Scheduling> Schedulings { get; set; }
    } 
```

如您所见，EntityContainer 类不包含

```
public DbSet<TeamScheduling> TeamSchedulings { get; set; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:30:34.370

当您按照自己的方式使用继承时，这是预期的。`context.Schedulings`包含`Scheduling`对象和`TeamScheduling`对象。您`TeamScheduling`只能通过请求获得对象`context.Schedulings.OfType<TeamScheduling>()`。请注意，您不能有意义地使用`context.Schedulings.OfType<Scheduling>()`来获取其他对象：这也将包括`TeamScheduling`对象。

您也可以尝试`context.Set<TeamScheduling>()`，但我不完全确定这会奏效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T11:54:07.397

如果您的意图是创建两个表，例如父调度实体和子 TeamScheduling 实体，它们具有返回调度实体的外键，请考虑使用[此处](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx)讨论的 Table-per-Type (TPT) 映射。

本质上，您应该修改“OnModelCreating”方法以具有以下代码：

```
modelBuilder.Entity<TeamScheduling>().ToTable("TeamScheduling"); 
```

这明确告诉 EF 您希望将 TeamScheduling 子类表示为它自己的表。通过 LINQ 查询它会很简单，因为您可以执行以下操作：

```
var teamScheds = context.Set<TeamScheduling>().Where(s => s.Id == 1).FirstOrDefault(); 
```

# parsing - BNFC 解析器和括号 Mathematica 类语法

> ID：14255057
> 
> 赞同：4
> 
> 时间：2013-01-10T09:56:22.083
> 
> 标签：parsing, wolfram-mathematica, bnf, bnfc

[我在BNF 转换器](http://bnfc.digitalgrammars.com/)上玩了一会儿，并尝试重新设计*Mathematica*语言的某些部分。我的 BNF 已经有大约 150 行并且运行良好，直到我注意到一个非常基本的错误。*Mathematica*中的括号`[]`用于两种不同的事物

 *1.  `expr[arg]`调用函数
2.  `list[[spec]]`访问表达式的元素，例如 a`List`

假设我想为一种只包含标识符、函数调用、元素访问和表达式序列作为参数的语言创建解析器。这些表格将是有效的

```
f[]
f[a]
f[a,b,c]
f[[a]]
f[[a,b]]

f[a,f[b]]
f[[a,f[x]]] 
```

BNFC 的直接但明显错误的输入文件可能看起来像

```
entrypoints Expr ;

TSymbol.        Expr1 ::= Ident ;
FunctionCall.   Expr ::= Expr "[" [Sequence] "]" ;
Part.           Expr ::= Expr "[[" [Sequence] "]]" ;    
coercions Expr 1 ;

separator Sequence "," ;
SequenceExpr. Sequence ::= Expr ; 
```

此 BNF 不适用于第一个代码块的最后两个示例。

问题似乎位于创建的`Yylex`词法分析器文件中，该文件匹配`]`并且`]]`分开。这是错误的，因为从最后一个例子可以看出，它是关闭`]`还是`]]`取决于上下文。因此，要么您必须创建一堆大括号以确保正确匹配，要么将其留给解析器。

有人可以告诉我是否可以通过 BNFC 实现这一点？

（顺便说一句，其他提示也将不胜感激）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T05:58:46.777

您的问题是令牌“]]”。如果词法分析器在没有任何过去记忆的情况下收集它，则可能是错误的。所以不要那样做！

根据定义，*解析器*会记住其左侧上下文，因此您可以让它正确地进行括号匹配。

我会这样定义你的语法：

```
FunctionCall.   Expr ::= Expr "[" [Sequence] "]" ;
Part.           Expr ::= Expr "[" "[" [Sequence] "]" "]" ; 
```

词法分析器仅检测单个“[”“]”作为标记。

一个奇怪的变体：

```
FunctionCall.   Expr ::= Expr "[" [Sequence] "]" ;
Part.           Expr ::= Expr "[[" [Sequence] "]" "]" ; 
```

词法分析器也检测“[[”作为标记，因为它不会被弄错。*

# java - removeChild() : 如何删除缩进？

> ID：14255064
> 
> 赞同：9
> 
> 时间：2013-01-10T09:56:31.457
> 
> 标签：java, xml, dom, removechild

让我们考虑以下 XML 文档：

```
<items>
   <item>item1</item>
   <item>item2</item>
</items> 
```

现在，让我们删除所有项目并添加一些新项目。代码：

```
 //-- assume we have Element instance of <items> element: items_parent
  //   and the Document instance: doc

  //-- remove all the items
  NodeList items = items_parent.getElementsByTagName("item");

  for (int i = 0; i < items.getLength(); i++){
     Element curElement = (Element)items.item(i);
     items_parent.removeChild(curElement);
  }

  //-- add a new one
  Element new_item = doc.createElement("item");
  new_item.setTextContent("item3");
  items_parent.appendChild(new_item); 
```

文件的新内容：

```
<items>

   <item>item3</item>
</items> 
```

这些烦人的空行出现是因为`removeChild()`删除了子项，但**它留下了已删除子项的缩进**和换行符。而这个 indent_and_like_break 被当作文本内容，留在文档中。

在[相关问题](http://goo.gl/husGK)中，我发布了解决方法：

```
items_parent.setTextContent(""); 
```

它会删除这些空行。但这是一种技巧，它消除了结果，而不是原因。

所以，问题是关于消除原因：如何用换行符的意图移除孩子？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-10T10:01:55.060

元素之前的“缩进”和它之后的“回车”（以及之后的缩进）是文本节点。如果您删除一个元素并且在它之前或之后有一个文本节点，那么这些节点自然不会被删除。

听起来好像您要删除该元素，然后还要删除它前面的文本节点（前提是它完全由空格组成）。

例如，也许沿着这些路线（在您的循环中删除项目）：

```
 Element curElement = (Element)items.item(i);
 // Start new code
 Node prev = curElement.getPreviousSibling();
 if (prev != null && 
     prev.getNodeType() == Node.TEXT_NODE &&
     prev.getNodeValue().trim().length() == 0) {
     items_parent.removeChild(prev);
 }
 // End new code
 items_parent.removeChild(curElement); 
```

**然而**，真正的问题可能应该是为什么您的 XML 文档中有多余的空白文本节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T09:59:58.440

实际上，`XML`文档不必遵循任何样式准则。因此，您不能只使用文档操作方法来为您的文档保留某种样式。

我建议通常首先操作您的文件而不考虑格式（然后获取一个有效的 xml 文件），然后您可以随时在整个文档上运行格式化程序以获得所需的格式。

# c# - 初始化 IEnumerable 作为可选参数

> ID：14255065
> 
> 赞同：9
> 
> 时间：2013-01-10T09:56:39.263
> 
> 标签：c#, ienumerable

`IEnumerable<int>`我的C# 方法中有一个类型的可选参数。我可以用除 之外的任何东西来初始化它`null`，例如一个固定的值列表吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-10T09:59:11.007

不，你只能有编译时常量。您可以分配到 null 然后

```
void SomeMethod(IEnumerable<int> list = null)
{
    if(list == null)
        list = new List<int>{1,2,3};
} 
```

下一个代码片段取自`C# in Depth`. `Jon Skeet`第 371 页。他建议使用 null 作为`not set`参数的一种指示符，它可能具有有意义的默认值。

```
static void AppendTimestamp(string filename,
                            string message,
                            Encoding encoding = null,
                            DateTime? timestamp = null)
{
     Encoding realEncoding = encoding ?? Encoding.UTF8;
     DateTime realTimestamp = timestamp ?? DateTime.Now;
     using (TextWriter writer = new StreamWriter(filename, true, realEncoding))
     {
         writer.WriteLine("{0:s}: {1}", realTimestamp, message);
     }
} 
```

用法

```
AppendTimestamp("utf8.txt", "First message");
AppendTimestamp("ascii.txt", "ASCII", Encoding.ASCII);
AppendTimestamp("utf8.txt", "Message in the future", null, new DateTime(2030, 1, 1)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T09:58:38.310

否 - 默认参数必须是编译时常量。

您最好的选择是重载该方法。或者，将默认值设置为 null 并在您的方法内部检测 null 并将其转换为您想要的列表。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-10T09:59:34.073

如何将其默认值设为 null，并在方法内

```
numbers = numbers ?? Enumerable.Empty<int>(); 
```

或者

```
numbers = numbers ?? new []{ 1, 2, 3}.AsEnumerable(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-10T10:02:55.193

好吧，因为您需要编译时常量，所以您必须将其设置为`null`

但是您可以在您的方法中执行以下操作

```
 list = list ?? new List<int>(){1,2,3,4}; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-10T10:01:32.590

不，您需要一个编译时间常数。

但是您可以使用重载作为解决方法：

```
public void Foo(int arg1)
{
      Foo(arg1, new[] { 1, 2, 3 });
}

public void Foo(int arg1, IEnumerable<int> arg2)
{
      // do something
} 
```

# memory-management - 启用 ARC 的 iOS 中的内存管理

> ID：14255066
> 
> 赞同：0
> 
> 时间：2013-01-10T09:56:46.190
> 
> 标签：memory-management

我在 xxxviewcontroller.m 中有以下代码，temp 是 .h 文件中的 UIImageView 实例变量。

```
- (IBAction)buttonclicked:(id)sender {

  for (int i=0; i<=100; i++)
   {
     temp = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sample.png"]];
  } 
```

}

因此，对于 for 循环中的每次迭代，我们应该有一个悬空指针，因为 temp 被重新分配并且之前的 ins。在仪器中，当单击按钮时，我看到内存增加，但它很快又回到方法结束后的状态。这个视图控制器是导航控制器堆栈上的第一个视图控制器。我想检查仪器是否会在泄漏中显示这一点。但事实并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:47:27.670

在 ARC 中，如果您为现有变量分配一个新值，它会指向新值，并且以前的值（现在没有所有者）被收集和释放。
例如：
如果我们有一个`self.textField.text = @"Rayman"`

![在此处输入图像描述](../Images/62ec5b7a6be21ca3d829a2a949dbafa8.png)

如果我们为它分配一个新值作为`self.textField.text = @"Mister Dark"`. 上一个值 ie`@"Rayman"`在那一刻被释放。这就是为什么您看到在方法结束时，您会看到分配的内存被释放，因为这些内存没有所有者。

![在此处输入图像描述](../Images/e35c3909b9fc042acec78985cb719c98.png)

[从[这里拍摄的图像]](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)

# mysql - Rails 在数据库中创建和更新数组

> ID：14255070
> 
> 赞同：0
> 
> 时间：2013-01-10T09:56:54.630
> 
> 标签：mysql, ruby-on-rails, ruby, serialization

所以我有一个服务对象，它将投票和投票的用户提交到数据库中：

这是帖子模型：

```
class Post < ActiveRecord::Base
  attr_accessible :comment_count, :downvote, :id, :text, :title, :upvote, :url, :user_id, :users_voted_up_by, :users_voted_down_by

  serialize :users_voted_up_by, Array
  serialize :users_voted_down_by, Array

  belongs_to :user
end 
```

这是用户模型：

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation, :username, :good_karma, :bad_karma, :posts_voted_up_on, :posts_voted_down_on

  serialize :posts_voted_up_on, Array
  serialize :posts_voted_down_on, Array

  has_many :posts

  attr_accessor :password
  before_save :encrypt_password

  validates_confirmation_of :password
  validates_presence_of :password, :on => :create
  validates_presence_of :email
  validates_uniqueness_of :email
  validates_presence_of :username
  validates_uniqueness_of :username

  def self.authenticate(email, password)
    user = find_by_email(email)
    if user && user.password_hash == BCrypt::Engine.hash_secret(password, user.password_salt)
      user
    else
      nil
    end
  end

  def encrypt_password
    if password.present?
      self.password_salt = BCrypt::Engine.generate_salt
      self.password_hash = BCrypt::Engine.hash_secret(password, password_salt)
    end
  end
end 
```

现在这是我的 Voter 类，它控制赞成票和反对票。

```
class Voter
  def initialize(post, user)
    @post = post
    @user = user
  end

  def upvote
    return false unless @post.users_voted_up_by
    @post.upvote += 1
    @post.users_voted_up_by << @user.username
    @user.good_karma += 1
    @post.save && @user.save
  end

  def downvote
    return false unless @post.users_voted_down_by
    @post.upvote += 1
    @post.users_voted_down_by << @user.username
    @user.bad_karma += 1
    @post.save && @user.save
  end
end 
```

它添加并恢复第一个罚款：

用户 1

但是，当我对另一个用户执行另一个“upvote”时，不是将它添加到数组中，而是将它添加到字符串中，如下所示：

用户1用户2

我没有正确使用线路吗？

`@post.users_voted_up_by << @user.username`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:37:11.533

您正在尝试通过序列化数组对多对多关系进行建模。在我看来，这是对 Rails 序列化功能的滥用。

设计问题的更合适的方法是创建一个属于 User 并且有一个 Post 的 Vote 模型。从设计角度和数据库性能角度来看，它都更好。

完成此操作后，您不会将用户添加到 post votes 数组中，您只需创建一个带有投票者（用户）id 和 post id 的新 Vote 实例。

# networking - 下载管理器如何将文件分成多个部分？

> ID：14255071
> 
> 赞同：9
> 
> 时间：2013-01-10T09:56:55.867
> 
> 标签：networking, io, download

我*不清楚*将文件分成多个部分然后分别下载每个部分的概念。据我说，我们只有该文件在互联网上存在的路径，那么如何仅通过知道 URL 或路径来破坏该文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T10:04:18.987

HTTP 1.1 对此有一个特殊规定：[Range 标头](http://www.west-wind.com/weblog/posts/2004/Feb/07/Using-HTTP-Ranges-to-resume-resume-aborted-downloads)，它允许您获取资源的选定部分。这正是这些下载管理器使用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T10:14:08.667

您可以查看部分文件下载的 Java 代码示例：[Resume download in urlconnection](https://stackoverflow.com/questions/3414438/java-resume-download-in-urlconnection)。在[rfc2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)中指定的标头“范围”允许请求文件的指定部分。

因此，下载管理器只需在多个连接中并行启动部分文件下载。

# html - div 显示在错误的位置，div 高度

> ID：14255074
> 
> 赞同：-1
> 
> 时间：2013-01-10T09:57:01.343
> 
> 标签：html, css

我的 html (css inside) 代码如下所示：

```
<body style="color: #25670c; margin: 0 0 0 0; padding: 0 0 0 0; font-family : Times New Roman; font-size : 14px; text-align: center;">

<div style="height: 96px; width: 985px;"><a href="www.one.lt">
    <img border="0" src="images/graphic/header.png" width="985" height="96" alt="header" title="DigiSpot eBay store" /></a></div>
<div style="height: 41px; width: 985px;">
    <img border="0" src="/images/graphic/meniu.png" alt="DigiSpot meniu" width="985" height="41" usemap="#mapas" />

<map name="mapas">
  <area shape="rect" coords="56,0,0,41" href="www.one.lt" alt="DigiSpot eBay store home" title="DigiSpot eBay store home">
  <area shape="rect" coords="539,0,400,41" href="www.one.lt" alt="About Digispot" title="About DigiSpot">
  <area shape="rect" coords="699,0,539,41" href="www.one.lt" alt="Delivery information" title="Delivery information">
  <area shape="rect" coords="845,0,699,41" href="www.one.lt" alt="Returns information" title="Returns information">
    <area shape="rect" coords="985,0,845,41" href="www.one.lt" alt="Contacts information" title="Contacts information">
</map> </div>

<div style="position:relative">
    <div style="float:left; width: 663px; height:100px; text-align: center; background-color:#d6d6a4;"><img border="0" src="/images/graphic/description.png" width="232" height="81"><br /><div style="text-align: left; margin-left: 10;">[[Description]]</div></div>
    <div style="float:left; width: 324px; height:100px; text-align: center; ">
        <div style="width: 324px; color: #ffffff; background-color:#6b8861; font-size : 34px;">[[Title]]</div>
        <div style="width: 324px; color: #ffffff; background-color:#6b8861;"><div style="width: 320px; margin: 2 2 2 2; background-color:#ffffff;">[[Picture1]]</div><div style="width: 300px; height: 2px; background-color:#6b8861; color: #6b8861;"></div></div>
        <div style="width: 324px; color: #801010; font-size : 40px; background-color:#d6d6a4;">Price: [[BuyItNowPrice]]</div>
    </div>
</div>
<div style="clear: both; text-align: center; width:985px; margin: 0 auto;"><img border="0" src="graphic/buttom.png" width="524" height="42"></div>

</body> 
```

结果不是我希望的那样，看起来像这样： ![在此处输入图像描述](../Images/11c8d654cdaecfc48691a27ebb223ada.png) [在此处推送更大的图像](https://i.stack.imgur.com/6E7d2.png)

这里是有问题的地方： ![在此处输入图像描述](../Images/cba5ab7cfa166481b7ad8f74207542ba.png) [推这里更大的图像](https://i.stack.imgur.com/4OuXc.png)

1.  我希望所有这个页面都对齐到中心，我在正文中使用了对齐，但它没有帮助。
2.  右边的 div 应该在页面底部的中心，我不知道他为什么选择这样的位置，并且图像的某些部分在“Price”div 下。
3.  是否可以在左侧和右侧价格中进行描述 div 和其他信息 div 将始终具有相同的高度，这是不固定的，因为我希望这些 div 的背景不会在底部分开。

编辑：推送图像以使它们更大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:03:39.983

删除`float:left`要居中的每个元素。然后添加`margin: 0 auto`到您想要居中的每个元素。

编辑：并尝试学习如何设置非内联元素的样式。它会让你的生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:29:59.867

看这个演示：http: [//jsbin.com/uhakak/7/edit](http://jsbin.com/uhakak/7/edit)

首先，您应该将所有内容包装到某个 div 中，使其居中：

和它的CSS：

```
#mainContent {
  width:945px;
  margin:0 auto;
} 
```

这样，您将把所有内容放在页面的中心。text-align:center 仅适用于文本（内联元素，实际上文本只是内联元素的一个单独案例）。div 是块元素， text-align:center 不会影响它们。

第二。不知道为什么你在右侧有那个 div，但尝试将溢出隐藏添加到你的 div 中，`postion:relative`其中包含描述、标题和价格。我看没有问题。

第三，使两个 div 具有相同的高度有点棘手，但是由于您的观点是简单的背景颜色，您可以为父 div 设置背景。带有溢出：隐藏（实际上，正如我所见，位置：相对根本不需要）。上面的演示应该显示它是如何工作的。我已经删除了 height:100px; 那里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:45:38.560

```
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <style>
            #mypage{margin: 0 auto;
                width: 950px;}
            .main{margin: 0 auto;
                text-align: center;}
            .desc{width: 700px;    
                background-color:#d6d6a4;
                float: left;}
            .text{float: right;}
        </style>
    </head>    
    <body id="mypage">
        <div class="main">
            <div class="header">
                <a href="www.one.lt"><img src="http://www.gvcdigital.co.uk/images/graphic/header.png" alt="header" title="DigiSpot eBay store"></a>
            </div>
            <div class="menu">
                <img src="http://www.gvcdigital.co.uk/images/graphic/meniu.png" alt="DigiSpot meniu" usemap="#mapas"/>
            </div>
            <div class="desc">
                <img src="http://www.gvcdigital.co.uk/images/graphic/description.png">
            </div>
            <div class="text">[[Description]]</div><br> 
            <div class="text">[[Title]]</div><br>
            <div class="text">[[Picture1]]</div><br>
            <div class="text">Price: [[BuyItNowPrice]]</div>            
            <img src="graphic/buttom.png">
        </div>
    </body>
</html> 
```

# android - 我想密码保护我在android中的本地电话目录文件夹

> ID：14255076
> 
> 赞同：0
> 
> 时间：2013-01-10T09:57:03.357
> 
> 标签：android

我想用密码保护我的本地电话目录文件夹 这个文件夹（目录）是由我的应用程序在运行时创建的，带有密码保护。我的应用程序可以打开此文件夹并用于自己。任何人都无法手动打开此文件夹。在安卓中是可以的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:04:32.727

这在 Android 上是不可能的。

您可以在内部存储器上创建文件夹，这样只有您的应用程序才能在普通设备上访问它。但是，任何拥有根设备的人都可以使用文件管理器浏览您的文件夹，如果获得根访问权限，其他应用程序也将能够读取其内容。

具有 READ_EXTERNAL_STORAGE 权限的所有应用程序都可以访问外部存储上的文件夹，因此您需要避免使用它。

无论如何，没有 100% 有效的方法来保护您的文件夹，以便只有您的应用程序可以访问它。

但是，您可以尝试加密您的数据。这就是像whatsapp这样的许多应用程序所做的。即使 Whatsapp 将聊天记录备份到外部存储，它也是 AES 加密的，因此当其他人可以访问数据时，如果不先解密，他们就无法读取它。我建议您尝试加密

# tortoisesvn - 使用 Tortoise 在 SVN 提交上设置特定警报

> ID：14255078
> 
> 赞同：0
> 
> 时间：2013-01-10T09:57:21.073
> 
> 标签：tortoisesvn

我注意到在我的开发团队中，有时有人忘记提交一个必须与另一个文件一起才能保持站点正常运行的文件。这会导致问题和浪费时间...问题是：是否可以告诉 SVN 乌龟：如果有人尝试提交没有文件（A1、A2、...An）的文件 A，请询问他们是否确定他们不这样做也不需要提交它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:14:29.200

你需要看看[hooks](http://svnbook.red-bean.com/nightly/en/svn.reposadmin.create.html#svn.reposadmin.create.hooks)。`hook`只不过是由某个存储库事件触发的程序。您可以在 hooks.use 中编写任何一组活动（在您的情况下为警报），`pre hooks`用于在任何任务发生之前运行挂钩。

**编辑**：

请参阅[提交监视器](http://tools.tortoisesvn.net/).CommitMonitor 是一个小工具，用于监视 Apache™ Subversion® 存储库中的新提交。

# javascript - 文件类型验证！！对于生成的输入文件标签元素

> ID：14255079
> 
> 赞同：0
> 
> 时间：2013-01-10T09:57:22.337
> 
> 标签：javascript, jquery, ajax, file, validation

```
JSP:
----

<div ID="items">  
input id="file5" type="file" path="files" name="files" size="40" /> Other documents  
</div> 

Javascript:
-----------
<script type="text/javascript">  
             var items=1;  
            function AddItem() {  
                var div=document.getElementById("items");  
                var button=document.getElementById("add");  
                items++;  
                newitem="";  
                newitem+="<input type=\"file\" path=\"files\" name=\"files\"";// + items;  
                newitem+="\"id=file"+items;  
                newitem+="\" size=\"40\"> Other documents";  
                newitem+=" <input type=\"button\" class=\"button\" id=\"delButton"+items;  
                newitem+="\" value=\"\" name=\"button"+items;  
                newitem+="\" onclick=deletethisRow("+items+")>";  
                newnode=document.createElement("div");  
                newnode.setAttribute("id","child"+items);  
                newnode.innerHTML=newitem;  
                div.insertBefore(newnode,button);  
            }  
            function deletethisRow(obj){  
                var fileElement=document.getElementById("file"+obj);  
                var buttonElement=document.getElementById("delButton"+obj);  
                var childDivName="child"+obj;  
                if (buttonElement) {      
                    var child = document.getElementById(childDivName);  
                    var parent = document.getElementById("items");  
                    parent.removeChild(child);   
                }  
             }   
</script>  

--- 
```

以上是 JSP 代码以及 JavaScript 片段.. 我正在尝试验证输入文件....

我只想允许上传 jpg、png、pdf、doc、docx 文件类型？？关于如何实现这一目标的任何想法？

谢谢和问候，
Satish Krishnamurthy

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:07:04.953

```
function Checkfilesextension()
{
    var fileToupload = document.getElementById('elementId');
    var fileName = fileToupload .value;
    var ext = fileName.substring(fileName.lastIndexOf('.') + 1);
    ext.toLowerCase

if(ext =="GIF" || other extension) // add other extensions
{
    return true;
}
else
{
    alert("Upload only the allowed files");
    return false;
}
} 
```

这将检查文件的扩展名......虽然没有测试过代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:01:56.070

您可以更改输入标签：

```
<input type="file" name="pic" id="pic" accept=".someext, image/gif, image/jpeg" /> 
```

但请不要依赖客户端验证。在服务器端检查它，或者人们可以禁用客户端检查并上传甚至可执行脚本。

# ruby-on-rails - 如何在 Rails 应用程序中创建类似于 Facebook 的用户和朋友之间的挑战？

> ID：14255080
> 
> 赞同：1
> 
> 时间：2013-01-10T09:57:26.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个 Rails 应用程序，其中用户有朋友列表。现在我必须创建一个类似于 facebook 挑战的挑战，用户可以在其中完成过程（玩游戏），他可以挑战他的朋友，他的朋友可以接受或拒绝请求，如果接受，在过程（玩游戏）完成后必须发送给两个用户的消息，其中包含谁赢了。

我怎样才能做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:45:05.137

听起来您想要一个名为`Challenge`. 这可能有几个关联：

```
class Challenge < ActiveRecord::Base
  belongs_to :sender, class_name: "User", inverse_of: :sent_challenges
  belongs_to :receiver, class_name: "User", inverse_of: :received_challenges
end 
```

上的相应关联`User`可以是

```
class User < ActiveRecord::Base
  # ...
  has_many :sent_challenges,
    class_name: "Challenge", foreign_key: "sender_id", inverse_of: :sender

  has_many :received_challenges,
    class_name: "Challenge", foreign_key: "receiver_id", inverse_of: :receiver
end 
```

那么你也许可以有一个方法`User`来发送挑战

```
def send_challenge(friend)
  sent_challenges.create(receiver: friend)
end 
```

你可能有一些你的行动`ChallengesController`：

```
def index
  @challenges = current_user.received_challenges
end

def create
  @challenge = current_user.send_challenge(params[:friend_id])
  # now the sender plays the game
  render :game
end

def accept
  @challenge = current_user.received_challenges.find(params[:id])
  # now the receiver plays the game
  render :game
end

def deny
  current_user.received_challenges.destroy(params[:id])
  redirect_to challenges_url
end

def complete
  # happens at the end of the game
  # work out the winner
  # send the emails
end 
```

当然，您需要添加相应的路由以将其全部连接起来，并为 and 编写`index`视图`game`。也许您会在您的朋友列表中放置指向该`create`操作的链接，以便人们可以提出挑战。

请注意我是如何完成所有事情的，`current_user.received_challenges`而不是仅仅做一个基本的`Challenge.find(params[:id])`——如果你这样做了，*任何人*都可以通过猜测 id 来接受挑战！哎呀！

我说了很多“也许”和“也许”，因为有不同的方法可以解决这个问题。但我希望这足以让你开始。如果没有，我建议尝试 Rails 教程[——Michael Hartl 的](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)教程是经典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:06:12.197

你`has_many :through`已经有了关系？

您需要将 a 传递`:source`给 users 表，因为用户也可以是朋友。这看起来像这样：

```
class User < ActiveRecord::Base
 has_many :friends
 has_many :users, :source => :friend, :through => :friends
end 
```

PS：您需要为friends表创建迁移并运行它。

可以向连接表（朋友）添加更多列。在那里你可以添加`relationship_status`. 所以你到底有：

**朋友桌**

```
ID | User_id | Friend_id | relationship_status 
```

基于`relationship_status`你可以解决你的问题！

# c# - 带有控制台应用程序的 Windows 窗体应用程序

> ID：14255084
> 
> 赞同：0
> 
> 时间：2013-01-10T09:57:49.600
> 
> 标签：c#, winforms, c#-3.0, console-application

我有一个控制台应用程序，它在启动时要求**SourcePath** ..当我输入 Source Path 时，它会要求**DestinationPath** ...当我输入 DestinationPath 时，它会开始一些执行

我的问题是通过 Windows 应用程序提供这些路径，这意味着我需要创建一个窗口窗体应用程序，该应用程序将在一定时间间隔后自动将这些参数提供给控制台应用程序

能否实现...如果是，请帮助...非常紧急...

哦..我已经尝试了很多我无法粘贴的代码，但我用来启动应用程序的一些代码是......

```
 ProcessStartInfo psi = new ProcessStartInfo();
        psi.FileName = @"C:\Program Files\Wondershare\PPT2Flash SDK\ppt2flash.exe";
        psi.UseShellExecute = false;
        psi.RedirectStandardError = true;
        psi.RedirectStandardInput = true;
        psi.CreateNoWindow = false;
            psi.Arguments = input + ";" + output;
        Process p = Process.Start(psi); 
```

和

```
 Process process = new Process
        {
            StartInfo = new ProcessStartInfo
            {
                CreateNoWindow = true,
                FileName = @"C:\Program Files\Wondershare\PPT2Flash SDK\ppt2flash.exe",
                RedirectStandardError = true,
                RedirectStandardOutput = true,
                UseShellExecute = false,
            }
        };
        if (process.Start())
        {
            Redirect(process.StandardError, text);
            Redirect(process.StandardOutput, text);
            MessageBox.Show(text);
        }
    private void Redirect(StreamReader input, string output)
    {
        new Thread(a =>{var buffer = new char[1];
            while (input.Read(buffer, 0, 1) > 0)
            {
                output += new string(buffer);
            };
        }).Start();
    } 
```

但似乎没有任何效果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:36:19.043

您可以像这样向 ProcessStartInfo 添加参数：

```
 ProcessStartInfo psi = new ProcessStartInfo(@"C:\MyConsoleApp.exe",
     @"C:\MyLocationAsFirstParamter C:\MyOtherLocationAsSecondParameter");
 Process p = Process.Start(psi); 
```

这将使用 2 个参数启动控制台应用程序。现在在您的控制台应用程序中，您拥有

```
 static void Main(string[] args) 
```

字符串数组 args 包含参数，现在您所要做的就是在您的应用程序启动时获取它们。

```
if (args == null || args.Length < 2)
{
    //the arguments are not passed correctly, or not at all
}
else
{
    try
    {
        yourFirstVariable = args[0];
        yourSecondVariable = args[1];
    }
    catch(Exception e)
    {
        Console.WriteLine("Something went wrong with setting the variables.")
        Console.WriteLine(e.Message);
    }
} 
```

这可能是也可能不是您需要的确切代码，但至少会让您了解如何完成您想要的。

# html - 如何在经典asp中获取数据库的多个值作为超链接

> ID：14255087
> 
> 赞同：0
> 
> 时间：2013-01-10T09:57:54.430
> 
> 标签：html, asp-classic, oracle11g

我有一个查询，它将选择数据库的值。查询如下。STRSQL= "SELECT ROLL_NO,STUDENT_NAME 从 STUDENT_MASTER ORDER BY ROLL_NO"

并且html文件如下

```
 <td><b>Roll No</td>
             <td><b>Name</td>

    </tr>
    <%While Not rs.eof %>
    <tr align="center" class="tb2">
        <td><%response.write rs("ROLL_NO")%></td>
        <td><%response.write rs("STUDENT_NAME")%></td>

    </tr>
    <%
    rs.movenext
    Wend %> 
```

现在在这个我如何从数据库中获取数据作为超链接。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:19:02.747

将学生姓名显示为链接，

```
 <%While Not rs.eof %>
    <tr align="center" class="tb2">
         <td><%=rs("ROLL_NO")%></td>
        <td><a href="your_filename_to_link_to"><%=rs("STUDENT_NAME")%></a></td>

    </tr>
    <%
    rs.movenext
    Wend %> 
```

`<% =something %>`和`<% Response.write something %>`

如果您想将 roll_id 传递到下一页：

```
<td><a href="your_filename_to_link_to.asp?roll_no=<%=rs("ROLL_NO")%>"><%=rs("STUDENT_NAME")%></a></td> 
```

# c# - 从视图模型保存到 ASP.NET MVC 中的模型

> ID：14255088
> 
> 赞同：3
> 
> 时间：2013-01-10T09:57:55.430
> 
> 标签：c#, asp.net-mvc, entity-framework, ef-code-first

我有两个模型，一个代码模型和一个标签模型，它们通过多对多关系链接。我正在尝试添加一个代码条目，其中包括使用视图模型可能选择的许多标签（在我的视图中使用标签的复选框）。我收到错误消息：

**传入字典的模型项的类型为“System.Collections.Generic.List'1[StoRed.Models.Code]”，但此字典需要类型为“System.Collections.Generic.IEnumerable`1[StoRed”的模型项.Models.CodeTagViewModel]'。**

感觉就像我需要以某种方式将我的数据转换为可接受的格式，然后再尝试将其保存到表中，但我是 MVC 新手，我无法在互联网上找到任何关于我的特定问题的有用信息。任何帮助将不胜感激。

代码模型

```
public class Code
{
    [Key]
    public int CodeID { get; set; }

    [Required]
    [StringLength(30)]
    public string Title { get; set; }

    [Required]
    [StringLength(150)]
    public string Description { get; set; }

    public DateTime DateAdded { get; set; }

    public DateTime LastUpdated { get; set; }

    [Required]
    [StringLength(30)]
    public string Project { get; set; }

    [Required]
    [StringLength(30)]
    public string CMS { get; set; }

    public int DotNetVersion { get; set; }

    [Required]
    [StringLength(150)]
    public string Dependencies { get; set; }

    [StringLength(30)]
    public string Author { get; set; }

    public string CodeFile { get; set; }

    [Required]
    [StringLength(100)]
    public string TFSLocation { get; set; }

    ////Creates a relationship in the DB with Tag
    //[ForeignKey("TagID")]
    public virtual ICollection<Tag> Tags { get; set; }

    ////Purely for API
    //[Required]
    public int TagID { get; set; }
} 
```

标签模型

```
public class Tag
{
    [Key]
    public int TagID { get; set; }

    [Required]
    [StringLength(30)]
    public string TagName { get; set; }

    public virtual ICollection<Code> Code { get; set; }
} 
```

上下文

```
public class Context : DbContext
{
    public DbSet<Code> Code { get; set; }

    public DbSet<Tag> Tags { get; set; }
} 
```

视图模型

```
public class CodeTagViewModel
{
    public Tag Tag { get; set; }
    public Tag TagID { get; set; }
    public List<Tag> Tags { get; set; }

    public int CodeID { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public DateTime DateAdded { get; set; }
    public DateTime LastUpdated { get; set; }
    public string Project { get; set; }
    public string CMS { get; set; }
    public int DotNetVersion { get; set; }
    public string Dependencies { get; set; }
    public string Author { get; set; }
    public string CodeFile { get; set; }
    public string TFSLocation { get; set; }
} 
```

代码控制器的相关部分

```
 [HttpPost]
    public ActionResult Create(CodeTagViewModel codeTagViewModel)
    {
        if (ModelState.IsValid)
        {
            Code code = new Code();
            Tag tag = new Tag();

            var codeTag = new CodeTagViewModel();

            code.Title = codeTagViewModel.Title;
            code.Description = codeTagViewModel.Description;
            code.DateAdded = codeTagViewModel.DateAdded;
            code.LastUpdated = codeTagViewModel.LastUpdated;
            code.Project = codeTagViewModel.Project;
            code.CMS = codeTagViewModel.CMS;
            code.DotNetVersion = codeTagViewModel.DotNetVersion;
            code.Dependencies = codeTagViewModel.Dependencies;
            code.Author = codeTagViewModel.Author;
            code.CodeFile = codeTagViewModel.CodeFile;
            code.TFSLocation = codeTagViewModel.TFSLocation;
            code.Tags = codeTagViewModel.Tags;

            db.Code.Add(code);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }

        return View(codeTagViewModel);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:32:06.837

你最好的选择是创建某种提供者/经理/服务/工厂/处理程序 - 选择一个最有意义的名称，它在通过系统的数据流中所做的工作 - 负责获取 ViewModel并将 ViewModel 的属性映射到域模型的实例中，然后将域模型本身或通过将水合域模型传递到存储库层来将域模型持久化到数据存储中。您可以手动执行此操作，也可以使用 AutoMapper 之类的工具执行此操作。这是一个快速的手动示例：

`CommandHandlers`使用接口和依赖处理程序在您的 Web 项目中创建一个文件夹：

```
public interface ICodeCommandHandler
{
    int Save(CodeTagViewModel input);
}

public class CodeCommandHandler : ICodeCommandHandler
{
    private IRepository<Code> repository;

    public CodeCommandHandler(IRepository<Code> repository)
    {
        this.repository = repository;
    }

    public int Save(CodeTagViewModel input)
    {
        Code code = new Code();
        Tag tag = new Tag();
        code.Title = input.Title;
        code.Description = input.Description;
        code.DateAdded = input.DateAdded;
        code.LastUpdated = input.LastUpdated;
        code.Project = input.Project;
        code.CMS = input.CMS;
        code.DotNetVersion = input.DotNetVersion;
        code.Dependencies = input.Dependencies;
        code.Author = input.Author;
        code.CodeFile = input.CodeFile;
        code.TFSLocation = input.TFSLocation;
        code.Tags.Add(tag);

        return repository.Save(code);

    }
} 
```

然后在您的控制器中，通过构造函数注入将 ICodeCommandHandler 注入，就像您对以下存储库所做的那样`CodeCommandHandler`：

```
private readonly ICodeCommandHandler commandHandler;

public CodeController(ICodeCommandHandler commandHandler)
{
    this.commandHandler = commandHandler;
}

[HttpPost]
public ActionResult Create(CodeTagViewModel codeTagViewModel)
{
    if (!ModelState.IsValid)
    {
        return View(codeTagViewModel);
    }

    var id = codeCommandHandler.Save(codeTagViewModel);
    // maybe do something useful with the document id after save
    return RedirectToAction("Index");  
} 
```

为了保持`Repository`美观和简单，下面是它的外观：

```
public interface IRepository<T>
{
    int Save(T entity);
}

public class CodeRepository : IRepository<Code>
{
    public int Save(Code entity)
    {
        using (var context = new Context())
        {
            context.Code.Add(entity);
            context.SaveChanges();
        }
    }
} 
```

我没有详细介绍依赖注入方面的事情，因为这不是问题的一部分，但这应该让你知道从哪里开始

# javascript - Ajax 请求上的动态 JavaScript 文件创建冲突

> ID：14255089
> 
> 赞同：0
> 
> 时间：2013-01-10T09:57:58.343
> 
> 标签：javascript, ajax, asp.net-mvc-3

我正在使用大量使用 ajax 的 MVC3 来获取部分视图。如果部分视图包含 JavaScript，则将其添加为新的 js 文件，如快照所示：

![ajax 调用上的动态 JS 文件](../Images/65c1f6ad3ce6e9f4187f9b16659c7a96.png)

所以如果我有一个js函数：

```
function checkValue(){
   //do work
} 
```

在 ajax 调用时，将添加一个包含此函数的新动态 JS 文件，它与旧的一次冲突。

myfile.js 包含：

```
function checkValue(){
   //do work
} 
```

和 1.js （动态文件）也将包含它

```
function checkValue(){
   //do work
} 
```

因此，当我由于旧文件中的存在而调用它时，它调用已经`function`过时的已经存在。如何解决这种情况，例如新 JavaScript 替换旧 JavaScript。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:00:09.453

您可以检查是否已定义某些内容并仅在未定义时重新定义它：

```
var checkValue = checkValue || function () {
     //do work
}; 
```

如果您希望您的定义相互覆盖而不是使用名称定义函数，请每次在全局对象上定义它们：

```
window.checkValue = function () {
     //do work
}; 
```

# android - Calabash Android 失败，未找到 Webviews

> ID：14255097
> 
> 赞同：2
> 
> 时间：2013-01-10T09:58:18.343
> 
> 标签：android, automation, robotium, calabash

我们在每个 Activity 中都有一个带有嵌入式 Webview 的夹具。在某个页面上，我们显示一个进度条，然后显示Webview，再次显示进度条，最后加载内容。

最后，我们使用 query 方法触发 Javascript 查询。我们的夹具最终看起来像这样 -

```
performAction('wait_for_no_progress_bars')
performAction("wait_for_view_by_id", 'webView')
performAction('wait_for_no_progress_bars')
performAction("wait_for_view_by_id", 'webView')
result =query("webView, css:"+locator) 
```

它在查询步骤中失败，说“没有找到 Webviews”。这之前的步骤通过（它获取 WebView），但查询步骤失败。关于可能出现什么问题的任何想法？

在对robotium源码的研究中，我们发现query方法内部使用了' `getCurrentViews()`'，不仅看可见性，还对高度做了一些处理。我们这里的观点高度相当长。这会导致任何问题吗？

控制台输出如下 -

```
2013-01-10 14:33:42 - Action: wait_for_no_progress_bars - Params: 
2013-01-10 14:33:42 - Result:'{"bonusInformation":[],"message":"","success":true}'
2013-01-10 14:33:42 - Action: wait_for_view_by_id - Params: webView
2013-01-10 14:33:42 - Result:'{"bonusInformation":[],"message":"","success":true}'
2013-01-10 14:33:42 - Action: wait_for_no_progress_bars - Params:
2013-01-10 14:33:42 - Result:'{"bonusInformation":[],"message":"","success":true}'
2013-01-10 14:33:42 - Action: wait_for_view_by_id - Params: webView
2013-01-10 14:33:42 - Result:'{"bonusInformation":[],"message":"","success":true}'
2013-01-10 14:33:47 - Action: query - Params: css, #payment_info
2013-01-10 14:33:48 - Result:'{"bonusInformation":["Exception stack trace:\njava.lang.RuntimeException: No webviews found\n\tat sh.calaba.instrumentationbackend.actions.webview.QueryHelper.executeJavascriptInWebview(QueryHelper.java:35)\n\tat sh.calaba.instrumentationbackend.actions.webview.Query.execute(Query.java:13)\n\tat sh.calaba.instrumentationbackend.Command.execute(Command.java:49)\n\tat sh.calaba.instrumentationbackend.actions.HttpServer.runCommand(HttpServer.java:158)\n\tat sh.calaba.instrumentationbackend.actions.HttpServer.serve(HttpServer.java:114)\n\tat sh.calaba.instrumentationbackend.actions.NanoHTTPD$HTTPSession.run(NanoHTTPD.java:412)\n\tat java.lang.Thread.run(Thread.java:856)\n"],"message":"No webviews found","success":false}' 
```

亚行日志如下——

```
Activity to be started :class com.abcd.mobile.android.booking.PaymentInfoActivity
I/ActivityManager(   79): START {cmp=com.abcd.mobile.android/.booking.PaymentInfoActivity} from pid 2041
W/WindowManager(   79): Failure taking screenshot for (180x300) to layer 21045
W/InputManagerService(   79): Focus gain on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@4169adf0 (uid=10045 pid=2041)
D/RhinoConnector( 2041): Instantiating connection for activity com.abcd.mobile.android.booking.PaymentInfoActivity
D/dalvikvm( 2041): GC_CONCURRENT freed 1892K, 13% free 27424K/31175K, paused 7ms+24ms
I/Process (   79): Sending signal. PID: 2041 SIG: 3
I/dalvikvm( 2041): threadid=3: reacting to signal 3abcd
D/RhinoConnector( 2041): Rhino bounded. Executing post connection hook for com.abcd.mobile.android.booking.PaymentInfoActivity
I/dalvikvm( 2041): Wrote stack traces to '/data/anr/traces.txt'
V/PhoneStatusBar(  152): setLightsOn(true)
I/Process (   79): Sending signal. PID: 2041 SIG: 3
I/dalvikvm( 2041): threadid=3: reacting to signal 3
I/System.out( 2041): URI: /
I/System.out( 2041): header: {content-type=application/json;charset=utf-8, connection=close, user-agent=Ruby, host=127.0.0.1:34777, content-length=55, accept=*/*}
I/System.out( 2041): params: {json={"command":"query","arguments":["css","#payment_info"]}
I/System.out( 2041): }
I/System.out( 2041): files: {}
I/System.out( 2041): command: {"command":"query","arguments":["css","#payment_info"]}
I/InstrumentationBackend( 2041): Got command:'Command:'Line:null,query', arguments:'[css, #payment_info]'
I/dalvikvm( 2041): Wrote stack traces to '/data/anr/traces.txt'
W/System.err( 2041): java.lang.RuntimeException: No webviews found
W/System.err( 2041):    at sh.calaba.instrumentationbackend.actions.webview.QueryHelper.executeJavascriptInWebview(QueryHelper.java:35)
W/System.err( 2041):    at sh.calaba.instrumentationbackend.actions.webview.Query.execute(Query.java:13)
W/System.err( 2041):    at sh.calaba.instrumentationbackend.Command.execute(Command.java:49)
W/System.err( 2041):    at sh.calaba.instrumentationbackend.actions.HttpServer.runCommand(HttpServer.java:158)
W/System.err( 2041):    at sh.calaba.instrumentationbackend.actions.HttpServer.serve(HttpServer.java:114)
W/System.err( 2041):    at sh.calaba.instrumentationbackend.actions.NanoHTTPD$HTTPSession.run(NanoHTTPD.java:412)
W/System.err( 2041):    at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-15T18:25:44.717

尝试

```
wait_for(:timeout => 10) {query("WebView").size > 0} 
```

代替

```
performAction("wait_for_view_by_id", 'webView') 
```

# c++ - opencv中基于MouseEvent的绘图

> ID：14255105
> 
> 赞同：0
> 
> 时间：2013-01-10T09:58:35.847
> 
> 标签：c++, opencv

我正在尝试根据鼠标事件在帧上绘制一个矩形，问题是当我有视频流时我不能这样做，程序崩溃是我的代码：

```
 cv::Rect theBox;
   bool drawing_box = false;

  void draw_box(Mat* frame, cv::Rect rectangle){
cvRectangle( frame, cvPoint(theBox.x, theBox.y), cvPoint   heBox.x+theBox.width,theBox.y+theBox.height),
            cvScalar(0xff,0x00,0x00) ); 
```

} void mouse(int event, int x, int y ,int flags, void* parameter){

```
Mat* image = (Mat*) parameter;

switch( event ){
    case CV_EVENT_MOUSEMOVE: 
        if( drawing_box ){
            theBox.width = x-theBox.x;
            theBox.height = y-theBox.y;
        }
        break;

    case CV_EVENT_LBUTTONDOWN:
        drawing_box = true;
        theBox = cvRect( x, y, 0, 0 );
        break;

    case CV_EVENT_LBUTTONUP:
        drawing_box = false;
        if( theBox.width < 0 ){
            theBox.x += theBox.width;
            theBox.width *= -1;
        }
        if( theBox.height < 0 ){
            theBox.y += theBox.height;
            theBox.height *= -1;
        }
        draw_box( image, theBox );
        //cv::rectangle(parameter, theBox, CV_RGB(255,0,0));
        break;
} 
```

}

```
int  main(){

    cv::Mat frame;
    int key = 0 ;
    const char* name = "box";
    theBox = Rect(-1,-1,0,0);
    cv::VideoCapture cap(1);

    if (!cap.isOpened()){
        cout<< " capture isn't open " << endl;
        return -1;
    }

    cv::namedWindow(name);

    while (key != 27){

        cap >> frame;
        cv::imshow(name,frame);
        cv::setMouseCallback(name,mouse,&frame);

        key = cv::waitKey(1);
    }

    cv::destroyAllWindows();

return 0; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:29:00.680

当视频流发生时，显示正在更新......同时尝试绘制矩形很困难......因为矩形是根据鼠标移动的输入绘制的，并且鼠标移动是独立的流视频帧...因此矩形可能会被覆盖（但不应该崩溃）。您可以尝试在视频帧显示的每次迭代中在视频帧上绘制一个透明（大小基于鼠标移动事件......）屏幕......

# asp.net-mvc - 图像和脚本在部署环境中不起作用

> ID：14255109
> 
> 赞同：0
> 
> 时间：2013-01-10T09:58:47.113
> 
> 标签：asp.net-mvc, image, thinktecture-ident-server

在我的开发环境中一切正常，但是从生产环境中它不加载图像，并且在 $.document jquery 函数上未定义“$”错误。

该站点是使用 ASP.NET MVC 构建的。根目录下有“Images”文件夹，根目录下还有“Scripts”文件夹。

我已经检查了这些文件夹的权限，并且 IIS 用户在那里获得了读取权限。

不确定，但值得一提的是，我使用 thinktecture 作为身份服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:27:30.147

请使用查看源代码 (Ctrl + U) 仔细检查您在该页面上的 jQuery 引用，如果它在那里？

或者

可能是您在该页面上为 jQuery 引用了错误的路径。

或者

可能是您在页面上使用了多个 jQuery 文件，并且您的文件与其他文件冲突。

您可以在 Firefox 中使用 Firebug 调试您的问题。

希望对你有帮助.... ：）

# javascript - 骨干收集提取未触发

> ID：14255111
> 
> 赞同：1
> 
> 时间：2013-01-10T09:58:49.230
> 
> 标签：javascript, php, backbone.js, aura.js

我是主干新手，我正在尝试以 Json 格式从服务器发送和接收数据。它只是行不通。这是我的代码（顺便说一句，我正在使用骨干光环）：

收藏

```
define(['sandbox', '../models/message'], function(sandbox, Message) {
'use strict';

var Messages = sandbox.mvc.Collection({
    model: Message,
    url: '/messagelist.php',
    localStorage: new sandbox.data.Store('messages-backbone-require'),
    parse: function(response){
        return response.rows;
    }
});

return Messages;

}); 
```

模型

```
define(['sandbox'], function(sandbox) {
'use strict';

var Message = sandbox.mvc.Model({

    defaults: {
        opened: '',
        messageid: '',
        phonenumber: '',
        numbername: '',
        text: ''
    },
    parse: function(data){
        return data;
    }

});

return Message;
}); 
```

看法

```
define(['sandbox', '../models/message', 'text!../templates/incoming_messages.html'], function(sandbox, Message, incomingMessagesTemplate) {
'use strict';

var AppView = sandbox.mvc.View({
    widgetTemplate: sandbox.template.parse(incomingMessagesTemplate),

    events: {
        'click .refresh': 'refresh'
    },

    initialize: function() {
        this.$el.html(this.widgetTemplate);
        sandbox.events.bindAll(this);
        this.collection.bind('createMessageList', this.createMessageList);
    },

    createMessageList: function() {
        // Will work with the received data here
    },

    render: function() {
        var handle = 'h4';
        this.$el.draggable({handle: handle});
        this.createMessageList();
    },

    refresh: function() {
        this.createMessageList();
    }

});

return AppView;

}); 
```

主要的

```
define(['sandbox', './views/app', './collections/messages'], function(sandbox, AppView, Messages) {
'use strict';

return function(options) {
    var messages = new Messages();

    new AppView({
        el: sandbox.dom.find(options.element),
        collection: messages
    }).render();

    messages.fetch({
        data: {
            type: 'incoming',
            offset: 0,
            offsetcount: 25
        },
        type: 'GET',
        success: function() {
            console.log(messages.models); // Shows an empty array.
        }
    });
};
}); 
```

我检查了日志，似乎 ajax 请求 (collection.fetch()) 没有触发或无法与服务器通信。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:09:36.517

问题出在 Backbone.LocalStorage 插件上。当您分配`Collection.localStorage`时，插件会接管`fetch`命令并从本地存储而不是服务器读取数据。

有关如何解决此问题的一些选项，请参阅我[在此 SO 问题中的回答。](https://stackoverflow.com/questions/14071203/backbone-collection-from-json-file-and-cache-on-localstorage/14071484#14071484)

# android - 如何知道图像是否被矩阵翻译？

> ID：14255113
> 
> 赞同：0
> 
> 时间：2013-01-10T09:58:51.833
> 
> 标签：android, matrix

我正在使用来自 github 的 TouchImageView 并使用 matrix.posttranslate 来处理拖动缩放图像的用户控制。问题是我需要知道用户何时拖动到图像的边框，因此图像不能再水平移动。有没有人对此有理想？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:11:53.480

如果你不旋转你的`Matrix`第二个和第五个元素是`translateX`and `translateY`：

```
 final Matrix matrix = ...;
    final float[] values = new float[9];

    matrix.getValues(values);

    final float translateX = values[2];
    final float translateY = values[5]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:41:10.387

谢谢。在深入阅读了 github 上画廊的源代码后，我得到了解决方案。要检查是否滑动到右边框：

```
float scaledWidth = Math.round(mOrigWidth * mSaveScale);
                    if (Math.abs(mViewWidth - translateX - scaledWidth) <= 1.0) {
                        // drag to right border
                        ALog.d("touchimageview", "right x: "
                                + (mViewWidth - translateX - scaledWidth));
                        touchEventListener.onZoomToOriginal();
                        break;
                    } 
```

# android - 主机未解析：api。脸书网：443

> ID：14255116
> 
> 赞同：0
> 
> 时间：2013-01-10T09:58:55.160
> 
> 标签：android

当我尝试从我的 Android 应用程序授权 Facebook 时，我在 logcat 中收到“主机未解析：api.facebook.com:443”错误。知道为什么会发生吗？

日志猫：

```
01-10 15:28:55.891: E/Facebook(1084): Host is unresolved: api.facebook.com:443
01-10 15:28:55.918: W/System.err(1084): java.net.UnknownHostException: Host is unresolved: api.facebook.com:443
01-10 15:28:55.938: W/System.err(1084):     at java.net.Socket.connect(Socket.java:1038)
01-10 15:28:55.938: W/System.err(1084):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:62)
01-10 15:28:55.938: W/System.err(1084):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:88)
01-10 15:28:56.047: W/System.err(1084):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHTTPConnection(HttpURLConnectionImpl.java:927)
01-10 15:28:56.047: W/System.err(1084):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:909)
01-10 15:28:56.047: W/System.err(1084):     at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:396)
01-10 15:28:56.047: W/System.err(1084):     at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:147)
01-10 15:28:56.088: W/System.err(1084):     at com.facebook.android.Util.openUrl(Util.java:178)
01-10 15:28:56.088: W/System.err(1084):     at com.facebook.android.Facebook.request(Facebook.java:559)
01-10 15:28:56.088: W/System.err(1084):     at com.facebook.android.AsyncFacebookRunner$2.run(AsyncFacebookRunner.java:253) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:27:25.457

你需要[`<uses-permission>`](https://developer.android.com/guide/topics/manifest/uses-permission-element.html)在你的`AndroidManifest.xml`with中使用[`android.permission.INTERNET`](http://developer.android.com/reference/android/Manifest.permission.html#INTERNET)。

# .htaccess - 为什么这个 .htacess 文件不起作用？

> ID：14255118
> 
> 赞同：0
> 
> 时间：2013-01-10T09:59:08.033
> 
> 标签：.htaccess, url

> **可能重复：**
> [如何使用 htaccess 将非 www 重定向到 www URL？](https://stackoverflow.com/questions/1157255/how-to-redirect-non-www-to-www-urls-using-htaccess)

尽管我在其中添加了以下代码，但我的 htaccess 文件什么也没做。（我认为它未启用）

我现在的网址是这样的**www.abc.com/mvc/view/index.php**

新地址是**www.abc.com/index.php**

我的托管服务提供商是 godaddy.com。并且在同一目录中还有 PHP.ini 文件我已将 htaccess 文件放在根目录中看起来像 html/.httaccess。完整的 htaccess 文件就像

```
Redirect /mvc/view/index.php http://abc.com 
```

但它不起作用。我对 .htacces 文件位置以及重写代码行感到困惑。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:34:57.383

[重定向](http://httpd.apache.org/docs/2.2/en/mod/mod_alias.html#redirect)的语法看起来是正确的。请注意，您需要获得`FileInfo`许可：

> **描述：** 发送外部重定向，要求客户端获取不同的 URL
> **语法：** 重定向 [status] URL-path URL
> **上下文：** 服务器配置、虚拟主机、目录、.htaccess
> **[覆盖：](http://httpd.apache.org/docs/2.2/en/mod/directive-dict.html#Override)** FileInfo

您应该询问您的托管服务提供商是否允许您使用此指令。

# php - 为什么我的文件上传表单不起作用？

> ID：14255120
> 
> 赞同：0
> 
> 时间：2013-01-10T09:59:16.800
> 
> 标签：php, html, forms, file-upload

我已经从下面的脚本中删除了所有不相关的代码，以试图缩小问题的范围，但即使我现在只是“简单”，它仍然无法工作。

Web 服务器错误日志中没有与此相关的错误，并且 print_r($_Files) 为空。请问有什么可能阻止它工作？

我尝试上传的文件是 20Kb。php 服务器变量**upload_max_filesize** = 100M 和**post_max_size** = 101M。

```
<?
echo 'Here is some debugging info:';
print_r($_FILES);

if ($_FILES['image']['name']) {

    echo "\n\nFiles Detected";

} else {
?>
<!DOCTYPE HTML>
<html>
    <head>
        <title>File Upload</title>
    </head>
    <body>
        <form
            action  = "<?=$_SERVER['PHP_SELF']?>"
            enctype = "multipart/form-data"
            name    = "uploadImage">

            Upload:
            <input type='file' name='image'><br><br>
            <input type="submit" value="Upload">
        </form>
    </body>
</html>
<? } ?> 
```

未检测到文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T10:04:50.750

要上传文件，您需要使用“post”。由于您没有为表单标签指定“方法”属性，默认方法是“获取”尝试`method="post"`为您的表单设置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T10:04:13.630

您在表单属性中缺少 method="post" 。

# python - ubuntu上python中的导入错误

> ID：14255121
> 
> 赞同：-1
> 
> 时间：2013-01-10T09:59:23.783
> 
> 标签：python, python-3.x

我在 ubuntu 上创建了我的第一个 python 模块。当我尝试使用以下命令在 python 中导入模块时：

```
import brian 
```

它给出了错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named brian 
```

我有`brian`in`/home/noamaan`并且 python 在`/usr/bin`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:10:26.047

如果你从包含*brian模块的目录启动***python**，一切都会像现在一样工作。

 ***要从您想要的任何地方**导入自定义模块，您应该仔细阅读 python 中导入机制的内容，以了解在哪里搜索导入的模块等。

但是为了让您的代码立即运行，我可以向您推荐以下内容：

*   在运行 python 之前扩展您的**PYTHONPATH**变量，以包含模块的目录
*   或者以这种方式使用**sys**模块将其直接附加到代码中。

    > ```
    > import sys
    > 
    > sys.path.append("path/to/module/dir")
    > 
    > import brian 
    > ```

另外，请参阅[站点](http://docs.python.org/2.7/library/site.html#module-site)模块上的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:32:54.193

默认情况下，Python 从 Python 路径 var 导入模块。您可以查看这些路径：

> 导入系统
> 
> 打印系统路径*

# python - 在 Django 的自定义管理器中捕获 DoesNotExist 异常

> ID：14255125
> 
> 赞同：80
> 
> 时间：2013-01-10T09:59:33.900
> 
> 标签：python, django, exception, django-custom-manager

我有一个 Django 模型的自定义管理器。我似乎无法在这里捕捉到 DoesNotExist 异常。我知道如何在模型中做到这一点，但它在这里不起作用：

```
class TaskManager(models.Manager):
    def task_depend_tree(self, *args, **kwargs):
        if "id" in kwargs:
            try:
                task = self.get(id=kwargs["id"])
            except DoesNotExist:
                raise Http404 
```

Get_object_or_404 也不起作用。这里有什么问题？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2013-01-10T15:18:48.163

尝试使用`ObjectDoesNotExist`而不是`DoesNotExist`或可能`self.DoesNotExist`。如果一切都失败了，试着抓住一个香草`Exception`并评估它以查看它的类型（）。

`from django.core.exceptions import ObjectDoesNotExist`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-05-04T19:46:48.893

正如 panchicore 建议的那样，`self.model`这是要走的路。

```
class TaskManager(models.Manager):
    def task_depend_tree(self, *args, **kwargs):
        if "id" in kwargs:
            try:
                task = self.get(id=kwargs["id"])
            except self.model.DoesNotExist:
                raise Http404 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-10T13:38:08.337

如果您需要使用 GenericViewSet 在列表方法 (DRF) 上实现此功能，并且需要返回一个空列表，请使用以下命令：

```
 def list(self, request, *args, **kwargs):
    self.get_object() # I use this to trigger the object_permission
    try:
        queryset = self.queryset.filter(user=(YourModel.objects.get(user=request.user).user))
    except YourModel.DoesNotExist:
        return Response(YourModel.objects.none())

    serializer = YSourModelSerializer(queryset, many=True)
    return Response(serializer.data) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-07T14:16:19.203

`objects = MyManager()`当您说要在 MyManager 类中分配 self.model时，您可以使用 Manager.model (self.model) 实例中的 DoesNotExist。

```
 try:
            task = self.get(id=kwargs["id"])
            return task
        except self.DoesNotExist:
            return None 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-27T03:13:23.417

在 Django 中，模型中的每个对象都有一个异常属性`DoesNotExists`。因此，您可以从对象本身或异常模块中调用它。

从对象（`self`）：

```
from django.db import models

class TaskManager(models.Manager):
    def task_depend_tree(self, *args, **kwargs):
        if "id" in kwargs:
            try:
                task = self.get(id=kwargs["id"])
            except self.model.DoesNotExist:
                raise Http404 
```

从异常模块：

```
from django.core.exceptions import ObjectDoesNotExist

try:
    return "Calling object"
except ObjectDoesNotExist:
    raise Http404 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-30T23:22:28.517

我以这种方式处理异常并且它起作用了。

```
from django.core.exceptions import ObjectDoesNotExist

try:
    task = self.get(id=kwargs["id"])
except ObjectDoesNotExist as DoesNotExist:
    raise Http404 
```

# android - 在取景器中滚动

> ID：14255129
> 
> 赞同：1
> 
> 时间：2013-01-10T09:59:42.370
> 
> 标签：android, android-listview, scroll, viewflipper

这是应用程序中的中间屏幕之一。
我正在使用一个`viewflipper`.

![截屏](../Images/7fc30c7e5f2d955470b2ea41c11a2600.png)

我正在使用`vf.setDisplayedChild(9);`where `vf`is `ViewFlipper`object 设置此视图。

参考上面的屏幕截图，如果我到达国家字段（我正在检查`isFocused()`），**整个视图应该滚动一些像素（等于键盘高度）**。

如果我没有使用过`viewflipper`，那么我会尝试类似的东西`scrollTo(x, y)`。
但是我如何滚动`viewflipper`。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:09:47.010

您可以将 ScrollView 作为 ViewFlipper 内的视图。

我认为您可能仍然遇到的唯一问题是键盘应该自动向上移动（根据我的经验，它在全屏时无法正常工作）。我会尝试在不启用全屏的情况下显示该屏幕，您可能会发现您的行为是自动处理的。

# jquery - jQuery调用函数不起作用

> ID：14255132
> 
> 赞同：0
> 
> 时间：2013-01-10T09:59:49.920
> 
> 标签：jquery, function

我正在尝试清理一下我的 jQuery 代码，我正在通过代码中的定义函数来做到这一点，但我对它很陌生，所以我遇到了一个小问题

```
 function appendToContent_vragen() {
    $(this).closest('.container_vragen').fadeOut(400, function() {
        $(this).closest('.container_vragen').appendTo('#content_vragen');
        $(this).closest('.container_vragen').css({overflow : 'hidden', color : 'black'});
        $(this).closest('.container_vragen').fadeIn(400);
    });
}

$('#geregeld , #niet_geregeld').on('click','.container_vragen').click(appendToContent_vragen); 
```

这段代码的问题是点击功能不起作用。如果我这样做

```
$('.container_vragen').click(appendToContent_vragen); 
```

它确实有效，但它选择了错误的 .container_vragen （因为它不在 #geregeld 、 #niet_geregeld div 中。

这是整个项目的 jsFiddle。最上面是功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:15:22.930

您可以使用 jQuery [.children()](http://api.jquery.com/children/)在 jquery 元素选择器之后选择子项

```
$('#geregeld , #niet_geregeld').children('.container_vragen').click(appendToContent_vragen) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:13:05.130

这条线应该是线：

```
$('#geregeld , #niet_geregeld').on('click','.container_vragen').click(appendToContent_vragen); 
```

应该是这样的：

```
$('#geregeld , #niet_geregeld').on('click',function(){
    $('.container_vragen', this).click(appendToContent_vragen);
}); 
```

更正答案：

```
 $('#geregeld , #niet_geregeld .container_vragen').on('click',appendToContent_vragen); 
```

# javascript - 设置 var 并立即返回新值

> ID：14255134
> 
> 赞同：0
> 
> 时间：2013-01-10T09:59:55.353
> 
> 标签：javascript, jquery

我在做这样的事情时遇到了问题

```
var abc = false;
function doSomthing(){
abc = true;
return abc;
} 
```

它返回false，但如果我运行该函数两次（在控制台中），第二次返回true。

谢谢

原函数

```
var session_id_resualt = false;

function islogdin() {
    if (localStorage.email == undefined) {
        localStorage.email = "";
    }

    if (localStorage.session_id == undefined) {
        localStorage.session_id = "";
    }

    $.post(server + "loginCheck.php", {
        loginCheck: "",
        cookie: readCookie("h"),
        session_id: localStorage.session_id,
        email: localStorage.email
    },

    function (json) {
        json = $.parseJSON(json);
        if (json.logdin) {
            if (json.logdin == "1") {
                //var s_id = json.session_id;
                session_id_resualt = json.session_id;
                //return s_id;          
            } else {
                session_id_resualt = false;
                //  return false;
            }

        } else {
            session_id_resualt = false;
            //  return false;
        }
    });
    return session_id_resualt;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:09:59.093

`$.post`是异步的。你需要等待结果。但是，由于`$.post`没有提供一种简单的方法来更改`$.ajax`您必须使用`$.ajax`的设置`async: false`：

```
var data = {
    loginCheck: "",
    cookie: readCookie("h"),
    session_id: localStorage.session_id,
    email: localStorage.email
};

var url = server + "loginCheck.php";

var callback = function (json) {
    /* ... */
}

$.ajax({
    type: "POST",
    url: url,
    async: false, /* importan! */
    data: data,
    success: callback,
}); 
```

### 参考：

*   [jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)
*   [jQuery.post()](http://api.jquery.com/jQuery.post/)

# eclipse - 在 Eclipse OSGi 容器中使用 Spring 加载类似乎不起作用。使固定？

> ID：14255135
> 
> 赞同：1
> 
> 时间：2013-01-10T09:59:56.413
> 
> 标签：eclipse, spring, osgi, contextclassloader

我对 Spring 在 Eclipse OSGi 容器中的类加载行为感到有些困惑（这是我试图在其上运行的 TIBCO ActiveMatrix 运行时的基础），并将其归结为以下简单示例。

在其中（TestComponent 对象是在 OSGi 包的 Activator 类中创建和调用的，但我认为这在这里并不重要）我首先直接创建一个对象，只是为了仔细检查它的类是否存在并且可以实例化. 这当然可以按预期工作......其次，我想使用 Spring（正如我最初的意图）创建同一个类的第二个对象，但这会因 ClassNotFoundException 而失败。

Spring 声称，它找不到那个类（即使包和类名肯定匹配），所以我什至添加了一个 .setClassLoader(...) 调用来传递刚刚成功加载相同类的相同类加载器，但 Spring 仍然无法找到该类。任何线索为什么会这样？我已经没有想法了。我错过了什么？

稍后编辑：我只需要意识到，崩溃的不是 ...getBean(...) 方法调用，而是 ClassPathXmlApplicationContext() 构造函数。即，对象已经在该构造函数中创建，并且不仅在随后的 getBean(...) 方法调用中创建。因此，我尝试传入类加载器是徒劳的，因为它已经来晚了。所以问题是：如何将上下文的类加载器传递给该构造函数（或工厂或 Spring 在内部使用的任何东西来创建 ClassPathXmlApplicationContext 对象）？

我的例子：

我首先为要通过 Spring 创建的类定义了一个接口：

```
package com.example.some_package_0;    
public interface SomeInterface 
{
    public String getSomeString();
} 
```

...和一个类，实现这个接口：

```
package com.example.some_package_1;

import com.example.some_package_0.SomeInterface;

public class SomeClassA implements SomeInterface
{
    private String someProperty;

    public void setSomeProperty(String someProperty) {
        this.someProperty = someProperty;
    }
    public String getSomeString() {
        return this.someProperty;
    }
} 
```

我的测试程序读取

```
public class TestComponent 
{
    import com.example.some_package_0.SomeInterface;
    import com.example.some_package_1.SomeClassA;

    public void test() {
        SomeClassA obj1 = new SomeClassA();
        obj1.setSomeProperty("SomeClassA-object (directly created)");
        System.out.println("@@ message=\"" + obj1.getSomeString() + "\"");          

        ClassPathXmlApplicationContext applicationContext;          
        applicationContext = new ClassPathXmlApplicationContext("/META-INF/package1_beans.xml");
        applicationContext.setClassLoader(Thread.currentThread().getContextClassLoader());
        SomeInterface obj2 = (SomeInterface) applicationContext.getBean("bean1");
        System.out.println("@@ message=\"" + obj2.getSomeString() + "\"");
    }
} 
```

正在使用的 /META-INF/package1_beans.xml 内容如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans classpath:/org/springframework/beans/factory/xml/spring-beans-2.5.xsd">

    <bean id="bean1" class="com.example.some_package_1.SomeClassA">
        <property name="someProperty"><value>SomeClassA-object (created via Spring)</value></property>
    </bean>
</beans> 
```

异常内容如下：

```
org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [com.example.some_package_1.SomeClassA] for bean with name 'bean1' defined in class path resource [META-INF/package1_beans.xml]; nested exception is java.lang.ClassNotFoundException: com.example.some_package_1.SomeClassA
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1141)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:524)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1177)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:758)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:422)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:380)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at com.example.test_spring_example.TestComponent.testOperation(TestComponent.java:71)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.tibco.amf.platform.runtime.componentframework.internal.proxies.operation.OperationHandler.invokeMethodWithThreadContext(OperationHandler.java:667)
    at com.tibco.amf.platform.runtime.componentframework.internal.proxies.operation.AsyncToSyncOperationHandler.invoke(AsyncToSyncOperationHandler.java:98)
    at com.tibco.amf.platform.runtime.componentframework.internal.proxies.ProxyInvocationHandlerRegistry$ProxyInvocationContext.invoke(ProxyInvocationHandlerRegistry.java:411)
    at $Proxy67.invoke(Unknown Source)
    at com.tibco.amf.binding.soap.runtime.transport.http.SoapHttpInboundEndpoint.processHttpPost(SoapHttpInboundEndpoint.java:565)
    at com.tibco.amf.binding.soap.runtime.transport.http.SoapHttpServer.doPost(SoapHttpServer.java:195)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:502)
    at org.mortbay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1213)
    at com.tibco.governance.pa.amxcomponent.pep.http.HttpPepFilter.doFilter(HttpPepFilter.java:126)
    at org.mortbay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1205)
    at com.tibco.amf.implementation.common.httpfilter.GenericComponentFilter.doFilter(GenericComponentFilter.java:65)
    at org.mortbay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1205)
    at com.tibco.amf.hpa.tibcohost.jetty.internal.ConnectorFilter.doFilter(ConnectorFilter.java:49)
    at org.mortbay.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1205)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:536)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:928)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:747)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:405)
    at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.ClassNotFoundException: com.example.some_package_1.SomeClassA
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:211)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:385)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1138)
    ... 46 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:08:59.847

实际上，解决方案几乎是微不足道的！正如我在对@Robin 的评论中已经说过的，显然在 OSGi 中，当前线程的类加载器和当前上下文或类的类加载器是不一样的！

所以，我最后要做的就是将当前线程的上下文类加载器设置为调用对象的类加载器，就是这样！也就是说，甚至不需要深入研究 OSGi 来获取包的类加载器或摆弄清单或 POM 或类似的东西 - 只需告诉 Spring 使用“我的”自己的类的类加载器，然后就可以了！

```
 ...
        // need to set the context class loader to "my" class loader to make Spring work:
        Thread.currentThread().setContextClassLoader(this.getClass().getClassLoader());         
        ClassPathXmlApplicationContext applicationContext;          
        applicationContext =
            new ClassPathXmlApplicationContext("/META-INF/package1_beans.xml");
        SomeInterface obj2 = (SomeInterface) applicationContext.getBean("bean1");
        System.out.println("@@ message=\"" + obj2.getSomeString() + "\"");
     ... 
```

而且 - 是的 - 之后可能应该将线程的类加载器设置回原始值，以防万一 - 所以另一个好用于 try { ... } finally { ... } 子句。:-)

感谢大家的回复！M。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:04:46.993

我还有一个想法。

而不是手动初始化您的 Spring 上下文。尝试将此添加到您的 pom.xml 中（如果您使用的是 Maven）：

```
<configuration>
    <instructions>
        <Spring-Context>spring/*.xml</Spring-Context> 
```

使其指向您的 applContext 的位置。这似乎也是一种更简洁的连接方式。如果您不使用 Maven，则需要手动添加到清单中，我不确定正确的语法

# c++ - 如何知道您的计算机处于屏幕保护程序或显示器/屏幕关闭状态多少次？

> ID：14255140
> 
> 赞同：1
> 
> 时间：2013-01-10T10:00:06.117
> 
> 标签：c++, windows, events, monitoring, screensaver

我正在使用 Windows 7 和 VC++。业务是要知道我的系统已设置为屏幕保护模式或显示器屏幕关闭的秒数。为了实现这一点，我试图捕捉事件 WM_SYSCOMMAND 和 SC_SCREENSAVE、SC_MONITORPOWER。所以我在 Visual Studio 2008 中创建了一个 Win32 项目，并且我在 WndProc 函数中接收事件：

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    int wmId, wmEvent;
    PAINTSTRUCT ps;
    HDC hdc;

    switch (message)
    {
        case WM_SYSCOMMAND:
        {
            switch (LOWORD(wParam))
            {
                case SC_SCREENSAVE:
                {
                    FILE *fl = fopen("this_is_a_event_test.txt","a");
                    fputs("SC_SCREENSAVE\n",fl);
                    fclose(fl);
                }
                break;
                case SC_MONITORPOWER:
                {
                    FILE *fl = fopen("this_is_a_event_test.txt","a");
                    fputs("SC_MONITORPOWER\n",fl);
                    fclose(fl);
                }
                break;
                default:
                {
                }
            }
        }
            break;
    }
} 
```

当对话框在前台时它工作正常，但在后台（或者如果我评论 ShowWindow 函数）它只有在我手动发送事件时才有效：

```
SendMessage(HWND_BROADCAST, WM_SYSCOMMAND, SC_SCREENSAVE, (LPARAM)2);
or
SendMessage(HWND_BROADCAST, WM_SYSCOMMAND, SC_MONITORPOWER, (LPARAM)2); 
```

因此，当系统电源配置在 2 分钟不活动后设置屏幕保护程序时，它不起作用，自动监视器屏幕关闭也是如此。这就是我想要的，知道系统何时关闭屏幕或设置屏幕保护程序，带有后台监控程序。

我也尝试过将钩子事件与 extern dll 一起使用。我已经按照这个示例[http://www.codeproject.com/Articles/1037/Hooks-and-DLLs](http://www.codeproject.com/Articles/1037/Hooks-and-DLLs)在 CALLBACK msghook() 函数中添加了上面 WndProc 中相同的开关代码。即使使用 SendMessage，它也不起作用。

在这个问题困扰了几天之后，在互联网上搜索，论坛......我不知道我还能做什么。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:32:44.737

我没有正确使用钩子，但这种情况很少见。首先，关于 setWindowsHookEx 函数，我看过 WH_CALLWNDPROC 或 WH_SYSMSGFILTER 必须用于获取 WM_SYSCOMMAND 发送的消息，然后获取 SC_SCREENSAVE wParam。在这种情况下，我不知道为什么，也许我错了，但这似乎不是真的。

在使用所有可能的消息到 SetWindowsHookEx 之后，我意识到 WH_GETMESSAGE 是唯一发送 SC_SCREENSAVE wParam 的人，至少在 Windows 7 中的这个钩子示例中是这样。

```
HHOOK hook;
HHOOK hook = SetWindowsHookEx(WH_GETMESSAGE,
                (HOOKPROC)msghook,
                hInst,
                0); 
```

其次，监听钩子函数中捕获的每条消息，WM_SYSCOMMAND 与 LPMSG 一起出现。我还读过 wParam 必须组合到 0xFFF0 才能进行比较。但是 wParam & 0xFFF0 == SC_SCREENSAVE 没有工作， wParam == SC_SCREENSAVE 也没有。在这种情况下，唯一的方法是对 WM_SYSCOMMAND 和 SC_SCREENSAVE 都使用 LPMSG。

```
static LRESULT CALLBACK msghook(UINT code, WPARAM wParam, LPARAM lParam)
{
     if(code > 0)
     {
         CallNextHookEx(hook, code, wParam, lParam);
         return 0;
     }

     LPMSG msg = (LPMSG)lParam;

     if(msg->message == WM_SYSCOMMAND)
     {
        if (msg->wParam == SC_SCREENSAVE)
        {
           MessageBoxA(NULL,L"SC_SCREENSAVE",L"SC_SCREENSAVE",MB_OK);
        }

        if (msg->wParam  == SC_MONITORPOWER)
        {
           MessageBoxA(NULL,L"SC_MONITORPOWER",L"SC_MONITORPOWER",MB_OK);
        }
     }

     return CallNextHookEx(hook, nCode, wParam, lParam);
} 
```

并且使用 FILE 测试事件是一个非常糟糕的主意，我认为使用 MessageBox 并没有好多少，但我不知道如何正确测试 ir。

# version-control - cvs update 在版本控制流程中实际上做了什么？

> ID：14255145
> 
> 赞同：0
> 
> 时间：2013-01-10T10:00:17.220
> 
> 标签：version-control, cvs

假设有两台 PC PC_A 和 PC_B 以及一个 cvs 存储库。PC_A 和 PC_B 具有与 repo 中相同的代码。现在我在 PC_A 上写了一些代码并签入，然后我在 PC_B 上 cvs diff，它说没有区别并且代码是旧的。但是当我执行 cvs udpate 时它会改变吗？我的问题是为什么`cvs update`存在以及 cvs update 的真正作用是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:06:24.330

是的，它将尝试更新您的工作目录。如果你不想这样，创建一个分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:08:33.970

Cvs diff 会将您的代码与您当前签出的版本进行比较。（即，cvs diff 不会显示与刚刚签入的 PC_A 有什么区别，它只会显示您在本地更改了哪些文件但尚未签入。

cvs update 将更新您的本地副本和“版本”，以便为您提供任何新的签入更改。即，PC_A 刚刚做了什么。如果文件没有在本地修改，它将更新它。如果它已被修改，它会尝试将两个文件“合并”在一起，但如果它不能，那么它会说文件冲突，你必须手动进行。

# cordova - 使用 PhoneGap 打开外部导航应用

> ID：14255147
> 
> 赞同：3
> 
> 时间：2013-01-10T10:00:21.860
> 
> 标签：cordova, navigation, external

我有一个 phonegap jquery 应用程序，我想创建导航事件。我有坐标\位置地址，我想使用 Google Nav\Waze\Glympse 等应用程序和其他导航应用程序来打开到目的地的新导航。

示例：我有洛杉矶“Test 5”街道的坐标，单击地址将启动导航应用程序并带我到那里（在我的应用程序之外）。

```
<a href="#">Test 5, LA</a> 
```

或者

```
<a href="#">43.2342,-70.4234</a> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T14:58:43.973

[我解决了它，但为Geo Link](http://geouri.org/)创建了“href”

只需使用“saddr”和“daddr”值就可以了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T10:13:41.690

**geo:** href 在 phonegap 3x 中不起作用，它仅在 phonegap 2x 中起作用，仅用于显示位置而不是搜索方向。从 phonegap 2x 和 3x 打开谷歌地图的解决方案：

对于导航 - window.open("google.navigation:q=23.3728831,85.3372199&mode=d" , '_system');

对于搜索 - window.open("geo:0,0?q=pizza" , '_system');

在这里阅读 - [https://developers.google.com/maps/documentation/android/intents](https://developers.google.com/maps/documentation/android/intents)

# jquery - 完整的日历未在我的日历中显示事件

> ID：14255150
> 
> 赞同：0
> 
> 时间：2013-01-10T10:00:29.930
> 
> 标签：jquery, asp.net

事件未在 fullcalender 中加载。这是我的代码

```
 public static List<CalendarEvent> getEvents(int clubkey)
    {

        List<CalendarEvent> events = new List<CalendarEvent>();
        //SqlConnection con = new SqlConnection(connectionString);
        //SqlCommand cmd = new SqlCommand("SELECT event_id, description, title, event_start, event_end FROM event where event_start>=@start AND event_end<=@end", con);
        ////cmd.Parameters.AddWithValue("@start", start);
        ////cmd.Parameters.AddWithValue("@end", end);
        BEvents obj = new BEvents();
        obj.ClubKey = clubkey;
        DataTable DT = obj.View();            
           foreach(DataRow dr in DT.Rows)
           {
                CalendarEvent cevent = new CalendarEvent();
                cevent.id = int.Parse(dr["Event_Key"].ToString());
                cevent.title = (string)dr["Event_Title"].ToString();
                cevent.description = (string)dr["Event_Description"].ToString();
                cevent.start =Convert.ToDateTime(dr["Event_StartDate"].ToString());
                cevent.end = Convert.ToDateTime(dr["Event_EndDate"].ToString());

                events.Add(cevent);
            }
        return events;} 
```

这是我调用此方法的 json 类方法。

公共类 JsonResponse : IHttpHandler, IRequiresSessionState { public void ProcessRequest(HttpContext context) { context.Response.ContentType = "application/json";

```
 DateTime start = new DateTime(1970, 1, 1);
        DateTime end = new DateTime(1970, 1, 1);

        start = start.AddSeconds(double.Parse(context.Request.QueryString["start"]));
        end = end.AddSeconds(double.Parse(context.Request.QueryString["end"]));
        int key = 3;

        String result = String.Empty;

        result += "[";

        List<int> idList = new List<int>();
        foreach (CalendarEvent cevent in EventDAO.getEvents(key))
        {
            result += convertCalendarEventIntoString(cevent);
            idList.Add(cevent.id);
        }

        if (result.EndsWith(","))
        {
            result = result.Substring(0, result.Length - 1);
        }

        result += "]";
        //store list of event ids in Session, so that it can be accessed in web methods
        context.Session["idList"] = idList;

        context.Response.Write(result);
    }

    private String convertCalendarEventIntoString(CalendarEvent cevent)
    {
        String allDay = "true";
        if (ConvertToTimestamp(cevent.start).ToString().Equals(ConvertToTimestamp(cevent.end).ToString()))
        {

            if (cevent.start.Hour == 0 && cevent.start.Minute == 0 && cevent.start.Second == 0)
            {
                allDay = "true";
            }
            else
            {
                allDay = "false";
            }
        }
        else
        {
            if (cevent.start.Hour == 0 && cevent.start.Minute == 0 && cevent.start.Second == 0
                && cevent.end.Hour == 0 && cevent.end.Minute == 0 && cevent.end.Second == 0)
            {
                allDay = "true";
            }
            else
            {
                allDay = "false";
            }
        }
        return "{" +
                  "id: '" + cevent.id + "'," +
                  "title: '" + HttpContext.Current.Server.HtmlEncode(cevent.title) + "'," +
                  "start:  " + ConvertToTimestamp(cevent.start).ToString() + "," +
                  "end: " + ConvertToTimestamp(cevent.end).ToString() + "," +
                  "allDay:" + allDay + "," +
                  "description: '" + HttpContext.Current.Server.HtmlEncode(cevent.description) + "'" +
                  "},";
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }

    private long ConvertToTimestamp(DateTime value)
    {

        long epoch = (value.ToUniversalTime().Ticks - 621355968000000000) / 10000000;
        return epoch;

    }

} 
```

这是我的设计页面代码

```
<link href="css/cupertino/jquery-ui-1.7.3.custom.css" rel="stylesheet" type="text/css" />
<link href="fullcalendar/fullcalendar.css" rel="stylesheet" type="text/css" />

<script src="jquery/jquery-1.3.2.min.js" type="text/javascript"></script>

<script src="jquery/jquery-ui-1.7.3.custom.min.js" type="text/javascript"></script>

<script src="jquery/jquery.qtip-1.0.0-rc3.min.js" type="text/javascript"></script>

<script src="fullcalendar/fullcalendar.min.js" type="text/javascript"></script>

<script src="scripts/calendarscript.js" type="text/javascript"></script>

<script src="jquery/jquery-ui-timepicker-addon-0.6.2.min.js" type="text/javascript"></script>

<form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="true">
    </asp:ScriptManager>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="true">
    </asp:ScriptManager>    
    <div id="calendar">
    </div> 
```

# c++ - 使用 CCCallFuncN 或其他方法调用方法

> ID：14255152
> 
> 赞同：1
> 
> 时间：2013-01-10T10:00:37.383
> 
> 标签：c++, objective-c, methods, cocos2d-x

代码：

*程序.h*

```
public:

virtual bool init();  
static cocos2d::CCScene* scene();
CREATE_FUNC(ProgScene);
void spriteMoveFinished(CCNode* sender);

void endCallback(CCObject* pSender);
void endCallbackWork(CCNode* pSender); 
```

*程序.cpp*

```
void ProgScene::spriteMoveFinished(CCNode* sender)
{
    CCMessageBox("Sprite Move Finished","Sprite Move Finished");
    this->runAction(CCCallFuncN::actionWithTarget( this, callfuncN_selector(ProgScene::endCallbackWork)));  // WORK
 // this->runAction(CCCallFuncN::actionWithTarget( this, callfuncN_selector(ProgScene::endCallback)));  // NOT WORK
}

void ProgScene::endCallback(CCObject* pSender)
{
    ...
    CCMessageBox("From endCallback","From endCallback");
}

void ProgScene::endCallbackWork(CCNode* sender)
{
    ...
    CCMessageBox("from endCallbackWork","from endCallbackWork");
} 
```

我是cpp的初学者，请帮助我。

如何从方法调用方法 endCallback `actionWithTarget`？当我使用

```
this->runAction(CCCallFuncN::actionWithTarget( this, callfuncN_selector(ProgScene::endCallback))); 
```

它返回：

```
error C2440: 'type cast' : cannot convert from 'void (__thiscall ProgScene::* )(cocos2d::CCObject *)' to 'cocos2d::SEL_CallFuncN'
1>        Pointers to members have different representations; cannot cast between them 
```

`endCallbackWork`很好的合作

```
this->runAction(CCCallFuncN::actionWithTarget( this, callfuncN_selector(ProgScene::endCallbackWork))); 
```

也许我可以使用以下方式以外的其他方式？

```
this->runAction(CCCallFuncN::actionWithTarget( this, callfuncN_selector(ProgScene::endCallback))); 
```

# excel - Windows 7（64 位）上的 Excel VBA 2007 性能问题

> ID：14255162
> 
> 赞同：0
> 
> 时间：2013-01-10T10:01:06.630
> 
> 标签：excel, vba

我是 VBA 新手。我在 Microsoft Excel 2007 中编写了一个 VBA 代码来发送 SOAP 消息并处理soap 响应。我正在读取 Soap 响应并将值循环写入 Excel 单元格。示例肥皂响应是：-

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:getMyResponse xmlns:ns2="http://my.samplenamesapce/">
        <return>
            <col1>col1Value</col1>
            <col2>col2Value</col2>
            <col3>3.283E7</col3>
        </return>
        <return>
            <col1>col1Value</col1>
            <col2>col2Value</col2>            
        </return>       
      </ns2:getMyResponse>
   </soap:Body>
</soap:Envelope> 
```

在单元格中写入响应的 VBA 代码是：

```
Private Sub getReportBtn_Click()
Dim WS As Worksheet: Set WS = Worksheets("my_report")
Dim request As New MSXML2.XMLHTTP60
Dim url As String
Dim response As New MSXML2.DOMDocument60
Dim requestData As String
    'Clear the Report Sheet
    WS.Range("A2:C65536").ClearContents
    url = Range("url").Value
    'Construct SOAP REQUEST
    request.Open "POST", url, False
    request.setRequestHeader "Content-Type", "text/xml; charset=""UTF-8"""
    request.setRequestHeader "SOAPAction", ""
    'Create SOAP REQUEST BODY
    requestData = xmlBody
    request.setRequestHeader "Content-Length", Len(requestData)
    On Error GoTo err_handler:

    'Send SOAP REQUEST  
    request.send requestData
    'Read SOAP RESPONSE
    response.LoadXML request.responseText

    Dim MyReport As MSXML2.IXMLDOMNode
    Dim MyReportList As MSXML2.IXMLDOMNodeList
    Set MyReportList = response.getElementsByTagName("return")
    Dim i As Integer
    i = 1
    For Each MyReport In MyReportList
        i = i + 1
        WS.Range("col1Range").Cells(i).Value =  MyReport.selectSingleNode("col1").Text
        WS.Range("col2Range").Cells(i).Value =  MyReport.selectSingleNode("col2").Text
        If MyReport.SelectNodes("col3").Length > 0 Then
        WS.Range("col3Range").Cells(i).Value =  MyReport.selectSingleNode("col3").Text
        End If
    Next MyReport
    If i = 1 Then
        MsgBox "No data found for requested query!"
        Sheets("query").Select
        Exit Sub
    End If   
Sheets("my_report").Select
Exit Sub

err_handler:
    MsgBox "Error occurred during submission, please check your settings."
Exit Sub
End Sub 
```

当我在 Windows 7（64 位）上运行我的 excel 表时，与在 Windows XP（32 位）上运行它相比，处理相同的数据需要双倍的时间。除了操作系统之外，两台机器的配置和物理位置都是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T19:50:59.810

您可能需要将变量声明为 32 位变量。要查看变量声明是否是延迟区域，请在代码的开头和结尾设置计时器，并在 WS.range clearContents 之前设置第三个计时器。我的预感是在 64 位机器上分配内存空间需要两倍的时间。

# java - 使用 Java 更新 sql 数据库时避免重复的 `pst.setString(...)`

> ID：14255168
> 
> 赞同：0
> 
> 时间：2013-01-10T10:01:32.467
> 
> 标签：java, mysql, sql, database, swing

> **可能的重复：**
> [避免 JTextField setText 在程序周围重复](https://stackoverflow.com/questions/14225791/avoiding-jtextfield-settext-repetition-around-the-program)

当给用户一个表单，即`JTextFields`他们通过它更新用户信息的一堆表单时，有没有一种方法可以快速更新数据库而不是使用重复的`pst.setString()`方法，即

```
 try {
                String sqlStm = "SOME UPDATE STATEMENT";
                pst = conn.prepareStatement(sqlStm);
                pst.setString(1, fieldTitle.getText());
                pst.setString(2, fieldArea.getText());
                pst.setString(3, fieldType.getSelectedItem().toString());
                pst.setString(4, fieldSalary.getText());
                pst.setString(5, fieldBenefit.getText());
            //and More here
                pst.executeUpdate();                                   
               pst.close();
               JOptionPane.showMessageDialog(null, "Changes Saved");
            } 
```

# c++ - 错误表达式

> ID：14255169
> 
> 赞同：0
> 
> 时间：2013-01-10T10:01:37.367
> 
> 标签：c++, visual-c++, visual-studio-2005

我正在研究 Visual C++。你能帮忙看看这个语法吗？

```
 class CVisionSystem
  {
    public:
CVisionSystem();
 ~CVisionSystem(void);

int Init();

    private:

 PvDevice device;
// PvStream object
      PvStream stream;
// Buffer

  CustomPipeline *pipeline;

// GEV Parameters
PvGenParameterArray *deviceParams;
    PvGenInteger *parTLLocked;

 };

int CVisionSystem::Init()
 {
 deviceParams = device.GetGenParameters();    
 parTLLocked = dynamic_cast<PvGenInteger *>( deviceParams->Get( "TLParamsLocked" ) );

 } 
```

deviceParms 获得有效值，但 parTLlocked 获得导致错误的 NULL 值：“无法评估错误表达式，_vfptr CX0030 和 mthis CX0076。

ParTLLocked 可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:04:46.610

我猜这会`deviceParams->Get( "TLParamsLocked" )`返回一个无法动态转换为的类型`PvGenInteger *`。返回类型应该是指向`PvGenInteger`该 dynamic_cast 的子类或父类（或可能是同一类）的指针，以返回非空值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:04:53.423

如果`dynamic_cast`无法转换为目标类型，则返回空值。你应该检查一下。

要使动态转换成功，被转换的对象必须在其继承树的某处具有目标类类型。也就是说，目标类型必须是运行时对象的实际类型或其父类之一。这意味着您只能向下转换实际上属于目标类型的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:10:49.870

```
PvGenParameterArray *lDeviceParams = d->lDevice.GetGenParameters();    
lTLLocked = dynamic_cast<PvGenInteger *>( lDeviceParams->Get( "TLParamsLocked" ) ); 
```

# rtc - 我的团队区域视图中是否缺少某些选项？

> ID：14255170
> 
> 赞同：1
> 
> 时间：2013-01-10T10:01:42.460
> 
> 标签：rtc

当我在 rtc 中打开我的“团队区域”时，我只有“概述”和“链接”选项卡：

![在此处输入图像描述](../Images/2a5024b435671cd1af4d6a8af90bfb10.png)

但是阅读这个问题的公认答案： [Restrict user access at component level within a stream](https://stackoverflow.com/questions/10518954/restrict-user-access-at-component-level-within-a-stream)

是否有更多选项可用于更新团队区域？

是否需要配置我的 rtc 设置以便可以查看这些选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:22:56.397

No need to modify your RTC setup:
A Team area will by default **inherit** its process configuration from the parent area (team or project).

You need to click on the section "`Process: inherited`" (once unfolded, it reads "`Process Customization`").
You will see a link "Customize the process".

![Customize](../Images/6f00fd8ea8ac45622f2e0719592d49aa.png)

Clicking on it will git you access to the other tabs:

*   Process Customization
*   Process Customization Source

The Process Customization section on a Team Area with those tabs will look like:

![Customized](../Images/43cf56f1d5e6f004627c612185f61cae.png)

# c# - 将项目添加到列表

> ID：14255177
> 
> 赞同：3
> 
> 时间：2013-01-10T10:02:03.790
> 
> 标签：c#, asp.net-mvc, simplemembership

我可能在做一些愚蠢的事情，但不知道是什么。我正在尝试修改 ASP.NET MVC 4 中的简单成员资格功能。我稍微修改了模板附带的 RegisterModel，并添加了一个类别列表，如下所示：

```
public class RegisterModel
{
    ...

    public List<SelectListItem> Categories { get; set; }
} 
```

然后在帐户控制器中，我尝试将一个项目添加到此列表中，但出现“ `Object reference not set to an instance of an object.`”错误：

```
[AllowAnonymous]
public ActionResult Register()
{
    RegisterModel rm = new RegisterModel();

    //SelectListItem guestCategory = new SelectListItem();
    //guestCategory.Value = null;
    //guestCategory.Text = "Guest";

    rm.Categories.Add(new SelectListItem { Value = null, Text = "Guest" });
... 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T10:03:26.993

您只需要在将项目添加到列表之前执行此操作，因为当您添加项目时，它不会被实例化，这就是它给出错误的原因

```
rm.Categories = new List<SelectListItem>(); 
```

这意味着在这种方法中这样做

```
[AllowAnonymous]
public ActionResult Register()
{
    RegisterModel rm = new RegisterModel();

    rm.Categories = new List<SelectListItem>();//added line 

    rm.Categories.Add(new SelectListItem { Value = null, Text = "Guest" });
... 
```

或者

你可以在构造函数中做同样的事情`RegisterModel`。

```
public class RegisterModel
{
  public RegisterModel
  {
    Categories = new List<SelectListItem>();//added line 
  } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T10:03:29.797

在您的类构造函数中初始化列表

```
public class RegisterModel
{
    RegisterModel()
    {
     Categories  = new List<SelectListItem>();
    }
...... 
```

由于您使用的是**[自动实现的属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)** `{get;set;}`，因此您必须在构造函数中对其进行初始化。如果你不想在构造函数中做，那么你可以这样做：

```
public class RegisterModel
{
    ...
    private List<SelectListItem> _Categories = new List<SelectListItem>();

    private List<SelectListItem> Categories
    {
        get { return _Categories; }
        set { _Categories = value; }
    }
} 
```

您还可以在使用对象之前使用对象初始化列表。

```
RegisterModel rm = new RegisterModel();
r.Categories = new List<SelectListItem>(); // like that
rm.Categories.Add(new SelectListItem { Value = null, Text = "Guest" }); 
```

但是**，如果您在构造函数中或通过私有字段** *（如果不使用自动实现的属性）*初始化列表会更好，因为这样您就不必在`RegisterModel`创建每个对象时初始化 Class 对象的属性。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-10T10:03:32.947

你从来没有初始化`Categories`任何东西。它是`null`。

将其初始化为空列表以避免错误，最好在构造函数中：

```
Categories = new List<SelectListItem>(); 
```

# jquery - 在jquery中动态添加div id

> ID：14255178
> 
> 赞同：-5
> 
> 时间：2013-01-10T10:02:04.853
> 
> 标签：jquery

如何在 jquery 中使用`wrap`ie动态添加 div id`$(this).wrap('<div class="selectbox"/>');`为每个下拉菜单`($select)`生成的 id 对于每个下拉菜单应该是不同的。

**更新**

```
$(document).ready(function() {
    $("select").each(function() {
        var id = $(div).att("id");
        $(this).wrap('<div class="selectbox"/>');
        $(this).after("<span class='selecttext'></span><span class='select-arrow'></span>");
        var val = $(this).children("option:selected").text();
        $(this).next(".selecttext").text(val);
    });
}); 
```

这就是我想要做的.. 在这个我需要添加应该动态创建的 div id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:03:59.127

尝试这个：

```
$("li").each(function(i, e) {
  $(e).attr("id", "_id" + i);
}); 
```

例如，您可以使用随机的字符流来模拟 ID。也许这就是你打算做的。很难从如此简短的描述中弄清楚你想要什么。不过，我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:13:04.150

`each`在函数之前创建一个变量并在`each`循环内增加变量。

尝试这个

```
$(document).ready(function(){ 
    var slctid = 1;  //creating a variable
     $("select").each(function(){ 
         var selectId= "selectID_" + slcid;  //naming the variable
       $(this).wrap('<div id="'+selectId+'" class="selectbox"/>');  //append it
       $(this).after("<span class='selecttext'></span><span class='select-arrow'></span>"); 
       var val = $(this).children("option:selected").text();
       $(this).next(".selecttext").text(val); 

        slctid ++;  //increase it here
     }); 
 }); 
```

您在此处选择的 ID 将增加 1...**例如。firstid = selectID_1, secondId= selectID_2...**以此类推...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-10T10:10:46.910

改用这个：

```
$(document).ready(function() {
    var id = 0;
    $("select").each(function() {
        $(this).wrap('<div class="selectbox" id="' + id + '"/>');
        id++;
        $(this).after("<span class='selecttext'></span><span class='select-arrow'></span>");
        var val = $(this).children("option:selected").text();
        $(this).next(".selecttext").text(val);
    });
}); 
```

# javascript - 从页面底部刷新时无限滚动触发两次

> ID：14255182
> 
> 赞同：1
> 
> 时间：2013-01-10T10:02:28.473
> 
> 标签：javascript, jquery, ajax

我使用以下代码设置了无限滚动。

```
$(window).scroll(function () {
    if ($(window).scrollTop() >= $("#home_content").height() - $(window).height()) {
        if (isLastPage) {
            foo();
        } else {
            bar(); // JQuery AJAX call
        }
    }
}); 
```

这是在 document.ready(); 当服务器为最后一页发送标志时，不会发生 ajax 调用。这在正常情况下工作正常。但是当我从页面底部按 F5（刷新）时，会同时触发两个滚动事件，它会绕过标志（因为第二次调用甚至在标志设置之前发生）并加载重复数据。

我唯一知道的是它发生在 document.ready() 函数的末尾。任何人，任何想法？

提前致谢。

**编辑**

除此之外没有太多相关的代码。

这只发生在 FF 17 中。在 IE 9 中，当我快速向下滚动时，相同的滚动被触发两次

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:26:23.987

您可以将此去抖动例程用于所有类型的事件调用。清洁且可重复使用。

```
// action takes place here. 
function infinite_scrolling(){
    if ($(window).scrollTop() >= $("#home_content").height() - $(window).height()) {
        if (isLastPage) {
            foo();
        } else {
            bar(); // JQuery AJAX call
        }
    }
}

// debounce multiple requests
var _scheduledRequest = null;
function infinite_scroll_debouncer(callback_to_run, debounce_time) {
    debounce_time = typeof debounce_time !== 'undefined' ? debounce_time : 800;
    if (_scheduledRequest) {
        clearTimeout(_scheduledRequest);
    }
    _scheduledRequest = setTimeout(callback_to_run, debounce_time);
}

// usage
$(document).ready(function() {
    $(window).scroll(function() {
        infinite_scroll_debouncer(infinite_scrolling, 1000);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:20:17.787

这只是一种解决方法，因为我们看不到您的完整代码，但也许这会有所帮助：

```
var timeout;

$(window).scroll(function(){
      clearTimeout(timeout);
  timeout = setTimeout(function(){
      if  ($(window).scrollTop() >= $("#home_content").height() - $(window).height()){
                if (isLastPage){
                    foo();
                }else{
                    bar();//AJAX call
                }
            }
  },0);
}); 
```

# iphone - 在 iOS 应用程序中使用预付积分

> ID：14255185
> 
> 赞同：0
> 
> 时间：2013-01-10T10:02:40.570
> 
> 标签：iphone, ios, in-app-purchase

我们正在开发一个 iPhone 应用程序作为分类系统（网站）的扩展。在该网站上，用户可以购买（预付）积分并使用它们来提升和推广他们的广告。如果我们实施积分消费，Apple 会拒绝我们的应用程序吗？我们不会允许购买积分，只是使用它们（用户仍然需要在网站上购买积分）。

我发现的唯一令人担忧的事情是 App Store 审查指南中的第 11.2 项：

> 11.2 应用程序使用除应用内购买 API (IAP) 以外的系统购买应用程序中的内容、功能或服务的应用程序将被拒绝。

有没有办法就这个问题直接联系苹果？

还有一个附加问题。我想我们可以实施像亚马逊和 Ebay 这样的支付网关系统并获得购买积分的方法吗？我没有看到关于非应用内购买系统的指南有任何限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:14:27.310

“应用内购买”仅用于购买内容或额外功能或额外特性，或消除应用程序内的任何类型的限制。要实现这些目标，您不应使用任何其他外部购买机制（根据 App Store 审查指南 §11.2）。

在您的应用程序中，用户将仅使用已在您的网站上购买的可用积分，因此没有问题，尽管您不应在应用程序中提供任何类型的网站链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:24:33.670

通常*“如果......苹果会拒绝这个”* - 问题只能这样回答：

苹果为所欲为。如果他们觉得这在某种程度上违反了审查指南，他们会拒绝并告诉你，但在你提交实际应用程序之前，你无法确定。就您而言，我不明白他们为什么会禁止它，因为您无法在实际应用程序中使用真钱，但正如我所说，您不知道。

如果您想尝试从 Apple 获得答案，您可以尝试通过[此页面](https://developer.apple.com/contact/)与他们联系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:59:31.800

我终于得到了苹果的答复。这花了一段时间，不值得等待。我认为 Siba 是对的，但我会在我们提交我们的应用程序后回复您，以验证一切。

苹果回复：

> Thank you for taking the time to contact us about your app design and concept questions. I understand that you would like to know if you implement consumption credits into your app would be acceptable for your app.
> 
> While we cannot pre-approve apps, we can address compliance questions about specific App Store Review Guidelines or sections of the iOS Developer Program License Agreement (PLA). I understand that this may be a little frustrating and I apologize for any inconvenience this may cause, however, we may only answer specific questions concerning the following resources, unless the app is submitted for review so that we may test the functionality.

# iphone - 在 Objective-C 中解码 REST Url

> ID：14255189
> 
> 赞同：0
> 
> 时间：2013-01-10T10:02:46.740
> 
> 标签：iphone, objective-c, regex, rest, restkit

我正在创建一个接收并且`REST URL`需要匹配模式并提取参数的模块

例如：URL "http://Product/1" 应该匹配模式 "http://Product/{productId:long}" 并返回`Dictionary`with`productId`作为 key 和 "1" 作为 value in as long

有谁知道可以做到这一点的 iPhone 框架，或者至少知道其中的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:03:57.770

`NSURL`有一个方法`pathComponents`，它返回一个包含所有不同路径组件的数组。这应该可以帮助您获得整数部分。要获得名称，我会使用`NSURL`. 文档说，如果 URL 格式正确，它应该可以工作，那么不妨试一试。

总而言之，不需要转换成字符串，似乎有很多方法可以从`NSURL`对象本身计算出 URL 的组成部分。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-10T10:17:45.710

```
NSString *path = [[@"path+with+spaces"
stringByReplacingOccurrencesOfString:@"+" withString:@" "]
stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

# c# - 在excel中显示时间跨度

> ID：14255193
> 
> 赞同：1
> 
> 时间：2013-01-10T10:02:55.667
> 
> 标签：c#, sql, excel, timespan

我有一个时间跨度存储为 sql 中的 varchar，格式为 totalhours-totalminutes-totalseconds。现在我必须将该信息导出到 Excel 中。

我遇到的问题是，我一生都无法在 excel 中找到可以正确显示此信息的格式。有没有办法可以正确显示这些信息？我在 C# 中使用 XLS 来输出此信息。

> **样本输入：** 48 :00:11
> 
> **样本输出：** 1900/02/17 12:11:00 AM 或 48.0076388888889

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:05:43.840

对于格式化，您需要设置自定义时间格式：

`[h]:mm:ss`

...这将显示持续时间超过 24 小时的小时数。如果您在 Excel 单元格中键入“48:00:11”，它将为您创建该自定义格式（至少，它刚刚在我机器上的 Excel 2007 中创建）。删除格式显示该值是预期的双精度值（所有非字符串都是）：2.000127，这是持续时间的天数（以时间为分数）。

将该字符串值从 C# 放入工作表中可能会产生不同的结果：我怀疑是从您获得的 48.007638... 值。由于您可以使用 C#，因此我倾向于将时间跨度计算为在将值推送到 Excel 之前的天数，然后按上述方式进行格式化。

# php - 如何使用 phing 评估 junit.xml

> ID：14255195
> 
> 赞同：0
> 
> 时间：2013-01-10T10:03:05.100
> 
> 标签：php, cakephp, junit, phpunit, phing

我正在使用 phing 来构建我的 CakePHP Web 应用程序。

我希望有一个符合以下要求的 phing 目标：

1.  运行测试套件
2.  如果甚至有 1 次失败，则结束 phing 目标
3.  如果一切正常，运行命令“git commit -a”

对于我的测试套件，我遵循使用 PHPUnit 的 CakePHP 约定

```
${cake} testsuite ${runinworkspaceapp} app AllTests --log-junit ${builddir}/logs/junit.xml 
```

在哪里

*   `${cake}`只是意味着`${appdir}/Console/cake`
*   `${runinworkspaceapp}`方法`-app ${appdir}`

我将生成一个 junit.xml 文件。下面是 junit.xml 的片段

```
<testsuites>
  <testsuite name="All Tests" tests="44" assertions="373" failures="0" errors="0" time="4.634020">
    <testsuite name="All Model related class tests" tests="42" assertions="370" failures="0" errors="0" time="4.478717"> 
```

我怀疑我需要评估 junit.xml 文件以判断是否有任何错误。我可能是错的，有更好的方法。

**如何编写 phing 目标？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:06:47.980

`exit code != 0`当至少一个测试失败时，蛋糕应该退出，所以使用`<exec>`with`checkreturn="true"`就足够了。

* * *

`junit.xml`可以通过 phing 任务转换为 HTML（另见[http://cweiske.de/tagebuch/visualizing-phpunit-runs.htm](http://cweiske.de/tagebuch/visualizing-phpunit-runs.htm)）：

```
<?xml version="1.0" encoding="utf-8"?>
<project name="testreport" default="gen-report" basedir=".">
 <target name="gen-report">
  <phpunitreport infile="log.junit.xml"
                 format="frames"
                 todir="html"
                 styledir="/usr/share/php/data/phing/etc/"
                 />
 </target>
</project> 
```

# spring - Spring 属性参考不起作用

> ID：14255199
> 
> 赞同：1
> 
> 时间：2013-01-10T10:03:23.707
> 
> 标签：spring

```
<bean name="readerService" class="com.mayank.example1.ReaderService"/>
   <property name="reader" ref="fileReader" />
</bean>
<bean name="fileReader" class="com.mayank.example1.FileReader">
   <constructor-arg value="resources/myfile.txt" />
</bean> 
```

Reder 服务将 reader 作为其构造函数中的参数 Reader 是接口。FileReader 是实现 Reader 的类

在春天它不带属性阅读器并抛出异常：

线程“main” org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException 中的异常：来自类路径资源 [reader-beans.xml] 的 XML 文档中的第 15 行无效；嵌套异常是 org.xml.sax.SAXParseException：cvc-complex-type.2.4.a：发现以元素“属性”开头的无效内容。'{"http://www.springframework.org/schema/beans":import, "http://www.springframework.org/schema/beans":alias, "http://www.springframework.org /schema/beans":bean, WC[##other:"http://www.springframework.org/schema/beans"]}' 是预期的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:10:03.480

看起来您太早地关闭了 bean 标记（注意`/>`最后的，这不应该只是`>`吗？）：

```
<bean name="readerService" class="com.mayank.example1.ReaderService"/>
   <property name="reader" ref="fileReader" />
</bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T10:08:27.223

确保您具有所需的 xml 命名空间`bean`，并`context`在配置文件的顶部提供。我的示例使用 Spring 3.1 版本，您可能需要针对您使用的 Spring 版本进行调整。

还要注意对 readerService bean 标记的调整，该标记被过早关闭。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

<bean name="readerService" class="com.mayank.example1.ReaderService">
   <property name="reader" ref="fileReader" />
</bean>
<bean name="fileReader" class="com.mayank.example1.FileReader">
   <constructor-arg value="resources/myfile.txt" />
</bean>

</beans> 
```

# asp.net - ASP.NET 网页 - 更改 Websecurity.currentUserName 值

> ID：14255210
> 
> 赞同：0
> 
> 时间：2013-01-10T10:03:42.743
> 
> 标签：asp.net, database, razor

我正在 ASP.NET Web Pages 2 (Razor) 中构建一个简单的网页。我使用了 StarterSite 模板，默认情况下有一个注册/登录系统。默认情况下，您不能有用户名，只有电子邮件地址和密码。我更改了数据库中的“UserProfile”表，以便能够为想要添加的用户添加用户名。登录后，它会向我打招呼：`"Hello, email-address"`其中电子邮件地址是您登录时使用的地址。

在代码中它看起来像这样：`"Hello, @Websecurity.currentUserName!"`

基本上，我想做的是`CurrentUserName`属性而不是`CurrentUsername`从数据库中获取电子邮件地址，而是获取`UserName`列的值。这是我的 UserProfile 表结构：

*   电子邮件 - nVarchar(4000)
*   ID - 整数
*   用户名 - nVarchar(4000)

我该如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:56:46.090

我设法解决了它。您需要更改 AppStart 文件中的 WebSecurity.InitializeDatabaseConnection 方法，如下所示：

```
WebSecurity.InitializeDatabaseConnection("Your DB Name", "Your Table Name", "What Column you want for the CurrentUserId as value", "What column you want for the CurrentUserName as value", true); 
```

希望这可以帮助某人

# php - Mysql select 查询问题 where id in ()

> ID：14255213
> 
> 赞同：0
> 
> 时间：2013-01-10T10:03:51.700
> 
> 标签：php, mysql

我的网站上有过滤器。我有多个复选框来显示来自不同站点的产品。如果用户选择 2 个复选框，我的查询变为

```
Select * from new_deals where provider_id IN (2,8); 
```

它运行良好。

但是当用户不选择任何复选框时，它变成

```
Select * from new_deals where provider_id IN (); 
```

并给出错误。我在想它应该返回空结果。

任何人都可以帮助我吗？我不想在 provider_id IN (); 中删除此代码

因此，如果未选中任何复选框，则必须有解决方案我们处理此 IN();

所以需要知道如果没有选中任何复选框，我需要放在括号中。即 IN ();

你们是天才。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T10:09:02.340

您正在使用 php，所以这是一个解决方案：

```
if (isset($_POST['checkboxfieldname']) and count($_POST['checkboxfieldname']) > 0) {
     // run query
} else {
  // dont run query
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:11:06.410

据我了解，您的问题是如果未选中任何复选框，SQL 将生成错误。

你为什么不使用

```
NULL 
```

所以如果没有选中复选框，代码应该是

```
Select * from new_deals where provider_id IN (NULL); 
```

我已经尝试过了，它没有给出任何错误。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:09:25.120

如果 0 是您的数据库中没有的 id，您可以使用 WHERE provider_id IN(0)。这很难看，您应该根本不运行查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T10:46:33.283

当您使用搜索时，请使用此方法。

创建一个变量来包含 SQL Query 的附加条件。在您的情况下，假设您的请求变量是 provider_id。

```
$QueryAddons = "";

if(isset($_REQUEST['provider_id']) && !empty($_REQUEST['provider_id'])){
     $QueryAddons .= "AND provider_id IN ".implode(",",$_REQUEST['provider_id'])."";
} 
```

现在您的查询语句应该是：

```
 $selectStmt = "Select * from new_deals where 1=1 ".$QueryAddons; 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-18T11:56:38.407

如果没有选择任何 ID，最好甚至不运行查询，但有时这是不可能的，或者会导致代码更加混乱。因此，只需将值添加`NULL`到列表中 -`NULL`不匹配任何内容（甚至是其他`NULL`s），因此它比 using`0`或任何其他可能存在的任意值更合适。

```
// IDs got from checkboxes
$ids = array("10", "12");

// Add in NULL
$ids[] = "NULL";

$values = implode(",", $ids);
$sql = "Select * from new_deals where provider_id IN ($values)"; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-10T10:10:06.403

这样做

```
$delim  =   "";
$whereCondition =   (count($_POST['multiple_check']) > 0) ? " where provider_id IN (" : "";

foreach ($_POST['multiple_check'] as $multipleCheckbox) {
     $whereCondition    .=  $delim.$multipleCheckbox;
     $delim =   ",";
}
$whereCondition .=  (count($_POST['multiple_check']) > 0) ? ")" : "where provider_id IN (NULL)";

if ($whereCondition != "") {
    $query  =   "Select * from new_deals {$whereCondition}";
} 
```

# c# - 通过 XMPP 从 myapplication 推送消息

> ID：14255217
> 
> 赞同：0
> 
> 时间：2013-01-10T10:04:05.213
> 
> 标签：c#, asp.net, windows, xmpp

我即将开发一个应用程序，当服务器数据库中有新条目时，Windows 应用程序将接收来自服务器的消息。我打算在 asp.net 中使用 xmpp 和 c# 来做同样的事情。那是更好的方法吗？

场景是这样的：每当一个新条目插入到我的 sqlserver 数据库中时，我的 windows 应用程序都应该收到那个新条目的通知。即我想将消息从服​​务器推送到 Windows 应用程序。如何使用 xmpp 推送消息？我可以将服务器设置为我的公司服务器吗？还是我必须使用 jabber 服务器本身？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:16:59.230

假设有多个客户端实例正在运行，那么使用某种形式的 pubsub，比如 XMPP pubsub 将是一个合适的解决方案。有许多 pubsub 解决方案可用，您必须根据您的所有要求和/或限制选择合适的解决方案。

如果此功能被认为是业务关键，那么您绝对应该使用自己的服务器。

我不知道是否有任何公共 XMPP 服务器启用了 pubsub 并可供公众配置。

# c++ - 提升 regex_match 与 regex_search

> ID：14255218
> 
> 赞同：1
> 
> 时间：2013-01-10T10:04:10.463
> 
> 标签：c++, regex, boost

如果我的正则表达式模式具有以下形式，则 regex_search 在匹配字符串中的某些内容时是否等同于 regex_match：，`^.......$`即如果我告诉匹配的内容应该在字符串的开头并且应该以字符串的结尾结尾？还是有其他区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:56:16.513

不，它们不等价，因为 regex_search 中的 $ 将匹配 line-end 而 ^ 将匹配 line-start。因此，在多行字符串中，regex_search 仍会找到子匹配项。我猜想添加标志 boost::match_not_eol 和 boost::match_not_bol 会创建 regex_match 行为。

# c++ - 更改 QTreeView 的行背景颜色不起作用

> ID：14255224
> 
> 赞同：10
> 
> 时间：2013-01-10T10:04:19.047
> 
> 标签：c++, qt, user-interface, qtreeview

我有一个`QTreeView`并且想要不同的行背景颜色，具体取决于它们的内容。为了实现这一点，我派生了一个`class MyTreeView`并`QTreeView`实现了paint方法，如下所示：

```
 void MyTreeView::drawRow (QPainter* painter,
                              const QStyleOptionViewItem& option,
                              const QModelIndex& index) const
    {
      QStyleOptionViewItem newOption(option);

      if (someCondition)
      {
        newOption.palette.setColor( QPalette::Base, QColor(255, 0, 0) );
        newOption.palette.setColor( QPalette::AlternateBase, QColor(200, 0, 0) );
      }
      else
      {
        newOption.palette.setColor( QPalette::Base, QColor(0, 0, 255) );
        newOption.palette.setColor( QPalette::AlternateBase, QColor(0, 0, 200) );
      }

      QTreeView::drawRow(painter, newOption, index);
    } 
```

最初，我设置`setAlternatingRowColors(true);`为 QTreeView。

**我的问题：**为 QPalette::Base 设置颜色**没有效果**。每隔一行保持白色。

但是，设置**QPalette::AlternateBase 按预期工作**。我试过了`setAutoFillBackground(true)`，`setAutoFillBackground(false)`没有任何效果。

是否有任何提示如何解决这个问题？谢谢你。

* * *

*备注：*通过适应`MyModel::data(const QModelIndex&, int role)`来设置颜色`Qt::BackgroundRole`并不能提供所需的结果。在这种情况下，背景颜色仅用于行的一部分。但我想为整行着色，包括左侧带有树导航的东西。

*Qt版本：* 4.7.3

* * *

**更新：** 由于未知原因`QPalette::Base`似乎是不透明的。setBrush 不会改变这一点。我找到了以下解决方法：

```
 if (someCondition)
    {
        painter->fillRect(option.rect, Qt::red);
        newOption.palette.setBrush( QPalette::AlternateBase, Qt::green);
    }
    else
    {
        painter->fillRect(option.rect, Qt::orange);
        newOption.palette.setBrush( QPalette::AlternateBase, Qt:blue);
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T02:05:58.623

如果唯一的问题是展开/折叠控件没有像行的其余部分那样的背景，那么使用您`Qt::BackgroundRole`的`::data()`模型（如[pnezis](https://stackoverflow.com/users/1007407/pnezis)在[他们的回答](https://stackoverflow.com/a/14256644/2642204)中所述）并将其添加到您的树视图类中：

```
void MyTreeView::drawBranches(QPainter* painter,
                              const QRect& rect,
                              const QModelIndex& index) const
{
  if (some condition depending on index)
    painter->fillRect(rect, Qt::red);
  else
    painter->fillRect(rect, Qt::green);

  QTreeView::drawBranches(painter, rect, index);
} 
```

我已经使用 Qt 4.8.0 在 Windows（Vista 和 7）上对此进行了测试，并且展开/折叠箭头具有适当的背景。问题是这些箭头是视图的一部分，因此无法在模型中处理。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T11:15:33.580

`QTreeView`您应该通过模型处理背景颜色，而不是子类化。使用[`data()`](http://doc.qt.digia.com/qt/qabstractitemmodel.html#data)函数和[`Qt::BackgroundRole`](http://doc.qt.digia.com/qt/qt.html#ItemDataRole-enum)更改行的背景颜色。

```
QVariant MyModel::data(const QModelIndex &index, int role) const
{
   if (!index.isValid())
      return QVariant();

   if (role == Qt::BackgroundRole)
   {
       if (condition1)
          return QColor(Qt::red);
       else
          return QColor(Qt::green); 
   }

   // Handle other roles

   return QVariant();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-17T04:46:10.533

[https://www.linux.org.ru/forum/development/4702439](https://www.linux.org.ru/forum/development/4702439)

```
if ( const QStyleOptionViewItemV4* opt = qstyleoption_cast<const QStyleOptionViewItemV4*>(&option) )
{
        if (opt.features & QStyleOptionViewItemV4::Alternate)
            painter->fillRect(option.rect,option.palette.alternateBase());
        else
            painter->fillRect(option.rect,painter->background());
} 
```

# php - 什么是 xml-rpc 处理程序？

> ID：14255225
> 
> 赞同：1
> 
> 时间：2013-01-10T10:04:20.170
> 
> 标签：php, xml-rpc, openerp

嗨，我是 Open ERP 的新手，我想使用写入方法更新 Open ERP 中的记录。以下更新代码来自[doc.openerp.com](http://doc.openerp.com)上的[示例](http://doc.openerp.com/v6.1/developer/12_api.html)：

```
/**
* $client = xml-rpc handler
* $relation = name of the relation ex: res.partner
* $attribute = name of the attribute ex:code
* $operator = search term operator ex: ilike, =, !=
* $id = id of the record to be updated
* $data = data to be updated
*/
include("xmlrpc.inc");
function write($client,$relation,$attribute,$operator,$data,$id) {
  var $user = 'admin';
  var $password = 'admin';
  var $userId = -1;
  var $dbname = 'db_name';
  var $server_url = 'http://localhost:8069/xmlrpc/';

  $id_val = array();
  $id_val[0] = new xmlrpcval($id, "int");

  if($userId<=0) {
     connect();
  }

  $msg = new xmlrpcmsg('execute');
  $msg->addParam(new xmlrpcval($dbname, "string"));
  $msg->addParam(new xmlrpcval($userId, "int"));
  $msg->addParam(new xmlrpcval($password, "string"));
  $msg->addParam(new xmlrpcval($relation, "string"));
  $msg->addParam(new xmlrpcval("write", "string"));
  $msg->addParam(new xmlrpcval($id, "array"));
  $msg->addParam(new xmlrpcval($data, "struct"));

  $resp = $client->send($msg);
  $val = $resp->value();
  $record = $val->scalarval();

  return $record;
} 
```

在上面的代码中，当我调用 write 函数时，我必须传递 $client 的第一个参数是 xml-rpc 处理程序。但我不清楚什么是 xml-rpc 处理程序。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:20:38.623

嗨，最后我得到了解决方案，代码如下：

```
<?php
include("lib/xmlrpc.inc");

$arrayVal = array(
'name'=>new xmlrpcval('abc', "string") ,
'city'=>new xmlrpcval('xyz' , "string"),
'phone'=>new xmlrpcval('7894500000' , "string")
);

$client = new xmlrpc_client("http://17.23.28.60:8069/xmlrpc/object");
$msg = new xmlrpcmsg('execute');
$msg->addParam(new xmlrpcval("test", "string"));//database name
$msg->addParam(new xmlrpcval("1", "int"));//user id
$msg->addParam(new xmlrpcval("pwd", "string"));//password
$msg->addParam(new xmlrpcval("res.company", "string"));//module name
$msg->addParam(new xmlrpcval("write", "string"));//method name
$msg->addParam(new xmlrpcval("1", "int"));//record id that u want to update
$msg->addParam(new xmlrpcval($arrayVal, "struct"));//fileds to update
$resp = $client->send($msg);
if ($resp->faultCode())

echo 'Error: '.$resp->faultString();

else

echo 'Updated Successfully';

?> 
```

# java - OpenJDK 是否在现实世界中的任何地方使用

> ID：14255234
> 
> 赞同：4
> 
> 时间：2013-01-10T10:04:47.357
> 
> 标签：java, openjdk

## 编辑：

英语不是我的母语。也许我表达得不够清楚。这个怎么样：

Oracle 的 JRE 的 BCL 明确指出，该许可证不适用于在单一用途系统上运行的 java 程序，例如电视机盒或信息亭。我的猜测是，有一些商业信息亭和其他类型的单一用途系统正在运行 java 程序，我想知道这些程序运行在什么 JRE 上。我的意思是，像“亚马逊正在他们的超大型服务器上使用 blablabla 操作系统，拥有数百万用户”之类的声明让我非常相信 blablabla 操作系统是一个良好且可靠的操作系统。同样，听到“Acme 运输公司正在使用 IcedTea VM 是否有售票机，并且遍布世界各地的售票机有数百台”，我也会感到欣慰。

经过大量搜索和阅读后，我仍然很难理解 OpenJDK 或其他一些完全免费的 Java 开发工具包和运行时化身的使用情况到底有多好。

如果在使用 OpenJDK 编译软件时遇到问题，许多开发人员似乎并不认为这是一个大问题，因为他们觉得如果需要，他们总是可以切换到 Oracle JDK/JRE。但是，如果你真的，真的想建立一个完全基于自由代码的商业系统呢？

是否有任何关键系统只使用 IcedTea 或其他名称，以及来自 Apache 和其他人的常见第三方库，这可能有助于说服我使用 OpenJDK*不会*（编辑）导致死亡结尾？

# sql - 计算 nvarchar 列中的字符数

> ID：14255236
> 
> 赞同：42
> 
> 时间：2013-01-10T10:04:50.093
> 
> 标签：sql, sql-server-2008, datalength

有谁知道在 Sql Server 的文本（nvarchar）列中计算字符的好方法？那里的值可以是文本、符号和/或数字。

到目前为止，我使用过`sum(datalength(column))/2`，但这仅适用于文本。（这是一种基于数据长度的方法，这可能因类型而异）。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-01-10T10:06:41.110

您可以使用系统函数查找字符数`LEN`。IE

```
SELECT LEN(Column) FROM TABLE 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-09-01T10:04:07.400

利用

```
SELECT length(yourfield) FROM table; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-10T10:07:11.910

使用[`LEN`](http://msdn.microsoft.com/en-us/library/ms190329.aspx)功能：

> 返回指定字符串表达式的字符数，不包括尾随空格。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-10T10:06:51.420

不`SELECT LEN(column_name)`工作？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T10:11:11.247

text 不适用于 len 函数。

> 在 Microsoft SQL Server 的未来版本中，将删除 ntext、text 和 image 数据类型。避免在新的开发工作中使用这些数据类型，并计划修改当前使用它们的应用程序。请改用 nvarchar(max)、varchar(max) 和 varbinary(max)。有关详细信息，请参阅使用大值数据类型。

[资源](http://msdn.microsoft.com/en-us/library/ms187993.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-24T20:13:46.247

我最近遇到了类似的问题，这就是我所做的：

```
 SELECT
         columnname as 'Original_Value',
         LEN(LTRIM(columnname)) as 'Orig_Val_Char_Count',
         N'['+columnname+']' as 'UnicodeStr_Value',
         LEN(N'['+columnname+']')-2 as 'True_Char_Count'
    FROM mytable 
```

前两列查看原始值并计算字符数（减去前导/尾随空格）。

我需要将其与真实的字符数进行比较，这就是我使用第二个 LEN 函数的原因。它将列值设置为字符串，将该字符串强制为 Unicode，然后对字符进行计数。

通过使用方括号，您可以确保任何前导或尾随空格也算作字符；当然，您不想自己计算括号，所以最后减去 2。

# scala - Scala 编译器不会终止（以编程方式调用）

> ID：14255239
> 
> 赞同：2
> 
> 时间：2013-01-10T10:04:51.073
> 
> 标签：scala, scala-2.10, scala-compiler

我正在使用这段代码以编程方式编译 Scala 代码：

```
val compiler = new Global(settings, reporter)
val run = new compiler.Run
run compile sourceFiles.map(_.fullPath).toList 
```

2.10 RC1 编译器工作了大约三分钟然后崩溃，而 2.10 无限地做某事（完全 CPU 使用）。当我通过 SBT（而不是以编程方式）调用编译器时，它可以正常工作并在不到一分钟的时间内完成编译。

缩短的输出如下所示（冗长 - 在第一行和错误之间运行三分钟）：

```
[loaded class file C:\Program Files\scala\lib\scala-library.jar(scala/collection/mutable/StringBuilder.class) in 3ms] 
```

**Scala 2.10 稳定版**

没有进一步的输出。1 个核心的 100% CPU 使用率。

**斯卡拉 2.10 RC1**

使用 RC1 大约 3 分钟后出现此错误：

```
error: 
     while compiling: Foo.scala
        during phase: typer
     library version: version 2.10.0-RC1
    compiler version: version 2.10.0-RC1
  reconstructed args: 
```

下一段输出（也是我的应用程序崩溃之前的最终输出）是`OutOfMemoryError`. 我不确定它的原因是*代码*本身还是*编译错误*。这两个选项对我来说都很奇怪，因为它在 SBT 控制台上编译并且编译器错误不应该消耗那么多内存，不是吗？

```
uncaught exception during compilation: java.lang.OutOfMemoryError
[error] (run-main) java.lang.OutOfMemoryError: Java heap space
java.lang.OutOfMemoryError: Java heap space
    at scala.reflect.internal.Symbols$Symbol.createRefinementClassSymbol(Symbols.scala:1068)
    at scala.reflect.internal.Symbols$Symbol.newRefinementClass(Symbols.scala:406)
    at scala.reflect.internal.Types$class.refinedType(Types.scala:3504)
    at scala.reflect.internal.SymbolTable.refinedType(SymbolTable.scala:12)
    at scala.reflect.internal.Types$Type.narrow(Types.scala:459)
    at scala.reflect.internal.Types$class.specializedBy$1(Types.scala:6125)
    at scala.reflect.internal.Types$class.specializesSym(Types.scala:6129)
    at scala.reflect.internal.SymbolTable.specializesSym(SymbolTable.scala:12)
    at scala.reflect.internal.Types$$anonfun$thirdTry$1$2.apply(Types.scala:6021)
    at scala.reflect.internal.Types$$anonfun$thirdTry$1$2.apply(Types.scala:6021)
    at scala.collection.Iterator$class.forall(Iterator.scala:739)
    at scala.collection.AbstractIterator.forall(Iterator.scala:1156)
    at scala.collection.IterableLike$class.forall(IterableLike.scala:75)
    at scala.reflect.internal.Scopes$Scope.forall(Scopes.scala:44)
    at scala.reflect.internal.Types$class.thirdTry$1(Types.scala:6021)
    at scala.reflect.internal.Types$class.secondTry$1(Types.scala:5982)
    at scala.reflect.internal.Types$class.firstTry$1(Types.scala:5958)
    at scala.reflect.internal.Types$class.isSubType2(Types.scala:6101)
    at scala.reflect.internal.Types$class.isSubType(Types.scala:5710)
    at scala.reflect.internal.SymbolTable.isSubType(SymbolTable.scala:12)
    at scala.reflect.internal.Types$class.thirdTry$1(Types.scala:6043)
    at scala.reflect.internal.Types$class.secondTry$1(Types.scala:5982)
    at scala.reflect.internal.Types$class.firstTry$1(Types.scala:5958)
    at scala.reflect.internal.Types$class.isSubType2(Types.scala:6101)
    at scala.reflect.internal.Types$class.isSubType(Types.scala:5710)
    at scala.reflect.internal.SymbolTable.isSubType(SymbolTable.scala:12)
    at scala.reflect.internal.Types$class.scala$reflect$internal$Types$$specializesSym(Types.scala:6142)
    at scala.reflect.internal.Types$class.specializedBy$1(Types.scala:6125)
    at scala.reflect.internal.Types$class.specializesSym(Types.scala:6129)
    at scala.reflect.internal.SymbolTable.specializesSym(SymbolTable.scala:12)
    at scala.reflect.internal.Types$$anonfun$thirdTry$1$2.apply(Types.scala:6021)
    at scala.reflect.internal.Types$$anonfun$thirdTry$1$2.apply(Types.scala:6021)
[trace] Stack trace suppressed: run 'last compile:run' for the full output.
java.lang.RuntimeException: Nonzero exit code: 1
    at scala.sys.package$.error(package.scala:27) 
```

我偶然发现[为什么在 Scala 中出现 OutOfMemoryError 编译错误？](https://stackoverflow.com/q/5191359/17713). 但是，我不确定我是否实际上只是缺少用于编译的堆空间。不涉及 Maven，它只有 Scala 代码和本地构建路径上的一些 JAR。

我正在寻找错误的原因`OutOfMemory`或修复错误的调整。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:59:28.840

使用`jvisualvm.exe`（在 JDK 中）我们发现编译器**确实内存不足**。GC 正在努力释放内存，所以它看起来像一个无限循环（准确地说：在符号表`HashSet`扩大时发生）。

将**堆大小增加到 2GB**解决了这里的问题。

# php - drupal 7 联系我们表格 发送电子邮件

> ID：14255241
> 
> 赞同：1
> 
> 时间：2013-01-10T10:04:55.783
> 
> 标签：php, drupal, drupal-7, drupal-modules, drupal-hooks

我使用联系人模块向我的邮箱发送电子邮件，如何自定义电子邮件正文？默认为：

```
the user name (http://example.com/user/3) use
http://example.com/contact ...

the message body 
```

我已经`hook_form_alter`在联系我们表单中添加了一些字段。例如：电话、地址、公司名称。电子邮件地址，如何使它们显示在电子邮件正文中。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:19:00.453

考虑使用[webform 模块](http://drupal.org/project/webform)。您无需实现任何挂钩来添加字段或配置要通过电子邮件发送的字段。

Drupal 的联系模块要容易得多

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T11:02:12.367

Muhammad 提出了一个很好的解决方案，我们应该使用[Webform 模块](http://drupal.org/project/webform)来添加字段。这样你就不需要写任何代码了。

对于您的特定需要，您可以使用[hook_mail_alter](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_mail_alter/7)来帮助您更改电子邮件消息，并且您可以在电子邮件正文中添加额外的字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-02T16:00:46.603

[Entityforms](https://drupal.org/project/entityform)模块使用标准的 Drupal 字段，这意味着您可以使用任何标准的 Drupal 字段。对于那些使用过 Webforms 的人，这个模块将 Webform 的功能带入了“标准”Drupal 字段/实体世界。

虽然 Webform 是一个拥有大量追随者的优秀模块，但它并没有与标准的 Drupal 字段或实体感知模块集成。所以对于 Drupal 7 站点，推荐使用 Entityforms 模块！

与 Webform 一样，它与表单提交通知的规则模块很好地集成，并允许复杂的通知逻辑。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-10T12:40:30.867

正如您在[contact.module](https://github.com/drupal/drupal/blob/7.x/modules/contact/contact.module#L170)中看到的，有一些预定义的硬编码变量。如果您将自己的字段添加到表单中，则它们不适用于邮件。

为了使它们在那里可用，您需要编写、注册和编写自己的邮件处理程序；

实施[hook_mail](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_mail/7)

```
function email_example_mail($key, &$message, $params) {
  global $user;

  $options = array(
    'langcode' => $message['language']->language,
  );

  switch ($key) {
    case 'contact_message':
      $message['subject'] = t('E-mail sent from @site-name', array('@site-name' => variable_get('site_name', 'Drupal')), $options);
      $message['body'][] = t('@name sent you the following message:', array('@name' => $user->name), $options);
      $message['body'][] = check_plain($params['message']);
      break;
  }
} 
```

然后是发送邮件的方法：

```
function email_example_mail_send($form_values) {
  $module = 'email_example';
  $key = 'contact_message';

  $to = $form_values['email'];
  $from = variable_get('site_mail', 'admin@example.com');

  $params = $form_values;
  $language = language_default();
  $send = TRUE;
  $result = drupal_mail($module, $key, $to, $language, $params, $from, $send);
  if ($result['result'] == TRUE) {
    drupal_set_message(t('Your message has been sent.'));
  }
  else {
    drupal_set_message(t('There was a problem sending your message and it was not sent.'), 'error');
  }
} 
```

然后将从自定义*提交处理程序*中调用此方法：

```
function email_example_contact_form_submit($form, &$form_state) {
  email_example_mail_send($form_state);
} 
```

您在其中注册`hook_form_alter`（我不知道核心联系表格的确切 form_id，请将其放在我放置的位置`contact`）：

```
function email_example_contact_form_alter($form, &$form_state) {
  $form['#submit']['my_very_own_submit'] = array();
} 
```

[来自开发人员的示例](http://drupal.org/project/examples)

# ruby-on-rails - 图片上传后显示图片预览

> ID：14255244
> 
> 赞同：2
> 
> 时间：2013-01-10T10:05:14.133
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, ruby-on-rails-3.2

我的视图包含各种员工的详细信息，我必须为每个员工上传图像并最后保存。我想在保存之前查看每个图像的图像预览，但它需要 localhost 路径并且不显示图像预览。它显示错误：“NetworkError：404 Not Found -localhost:3000/rails.png”

在视图中

```
<% @person.each do |person| %> 
```

```
<td><%= person.name %></td>
<td><%= person.date %></td>
<td><input id="<%= person.id %>"  type='file' class="imageUploader" multiple="true" ></td>

 <td class="image_container"> <img id="image_<%= person.id %>" src="#" alt="Image" width="100" height="100"></td>` here
</tr>
  <% end %> 
```

在 application.js::

```
 $('.imageUploader').change(function() {
 var target_image = $(this).val();
 $(this).parent('td').parent("tr").children('td.image_container').html("<img src="+target_image+">");
 console.log(target_image);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:14:04.850

Guyz，还有一个......`

```
 FILEFIELD = {}
     $(document).ready(function() {    

     $('.files').change(function() {

        FILEFIELD = $(this)
        var fr = new FileReader;

        fr.onload = function() {
            var img = new Image;
            img.onload = function() {
           var c=$(FILEFIELD).parent("td").parent("tr").children("td").children(".images")[0];
                var ctx=c.getContext("2d");
                ctx.drawImage(img,0,0,50,50);      

         }
            img.src = fr.result;

        };

        fr.readAsDataURL(this.files[0]);

    });
}); 
```

最后工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:57:00.077

好吧，我按照您所说的进行了尝试，并在我的应用程序中获得了图像预览：

**我的看法**：

```
<% if current_user %>
   <p>Welcome <%= current_user.email %></p>
   <tr><input type="file" id="files" name="files[]" multiple />
   <img id="list" src="#" alt="Image" width="100" height="100"></img></tr>
<% end %>

<style>
  .thumb {
    height: 75px;
    border: 1px solid #000;
    margin: 10px 5px 0 0;
  }
</style>

<script type="text/javascript">
  function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++) {

      // Only process image files.
      if (!f.type.match('image.*')) {
        continue;
      }

      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          // Render thumbnail.
          var span = document.createElement('span');
          span.innerHTML = ['<img class="thumb" src="', e.target.result,
                            '" title="', escape(theFile.name), '"/>'].join('');
          document.getElementById('list').insertBefore(span, null);
        };
      })(f);

      // Read in the image file as a data URL.
      reader.readAsDataURL(f);
    }
  }

  document.getElementById('files').addEventListener('change', handleFileSelect, false);
</script> 
```

如您所见，上面的代码是由我在上传前考虑单个用户图像预览完成的。但是你可以通过为多个用户更改查询和一些代码来为多个用户做同样的事情。

干杯!

# solr - 通过 GET (URL) 解析“内容”来创建 SOLR 索引

> ID：14255245
> 
> 赞同：0
> 
> 时间：2013-01-10T10:05:14.770
> 
> 标签：solr

是否可以通过 GET (URL) 将“内容”解析为索引来创建 SOLR 索引？我发现的示例仅通过直接从文件中读取内容才允许这样做。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T12:48:03.977

查看[Solr 数据导入处理程序](http://wiki.apache.org/solr/DataImportHandler)- 专注于[XML/HTTP 数据源](http://wiki.apache.org/solr/DataImportHandler#Usage_with_XML.2BAC8-HTTP_Datasource)。如果我正确理解您的要求，这应该能够满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:01:36.437

你也许可以使用 curl 来做到这一点。该请求很可能应该类似于（未经测试）：-

```
curl 'http://localhost:8983/solr/update?key1=val1&key2=val2' 
```

依此类推，其中 key1 和 key2 是字段，val1 和 val2 是它们的对应值。请注意，在发送上述请求后，您还需要向上述 url 发送一个提交命令。

您还可以查看以下网址：-

[http://wiki.apache.org/solr/UpdateXmlMessages](http://wiki.apache.org/solr/UpdateXmlMessages)

搜索短语“通过 GET 更新”和“通过 curl 更新数据记录”

# iphone - 有什么方法可以将我的 nib 文件放入框架中

> ID：14255246
> 
> 赞同：1
> 
> 时间：2013-01-10T10:05:23.260
> 
> 标签：iphone, ios, frameworks

我正在为 ios 做一个框架，我成功地添加了 .h 和 .m 文件并从构建的框架中访问它们。但是，如果我将任何 xib 文件添加到框架中，则无法在导入我的框架的项目中访问它。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:14:33.557

我找到了一个解决方案，我试图从主包访问笔尖。我应该从框架包中访问。

# javascript - 在您键入时实时比较字母

> ID：14255256
> 
> 赞同：0
> 
> 时间：2013-01-10T10:05:51.560
> 
> 标签：javascript

我想编写一个代码，以“实时”比较用户在输入框中与给定单词（即“house”）引入的世界。当写的字母正确时，整个单词为蓝色，当用户输入错误的字母时，单词变为红色。

这是html：

```
<input id='inputtype' onkeyup='return validateAsYouType(this);' /> 
```

**编辑：解决了！**这是解决方案：

```
<script type="text/javascript" >
function validateAsYouType(inputElementId)
{
var val = inputElementId.value;
var randomWord = "house";

if (val.length <= randomWord.length && val == randomWord.substr(0, val.length)) {
document.getElementById("inputtype").style.color="blue"; // If right, put it in blue
}

else { document.getElementById("inputtype").style.color="red"; // If wrong, put it in red
}

if( val == randomWord)
{
    document.getElementById("inputtype").style.color="#339933"; // If right, put it in green
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:11:46.350

检查输入的单词不长于给定的单词，并且到目前为止输入的单词与给定单词中的相应字母相同：

```
if (val.length <= randomWord.length && val == randomWord.substr(0, val.length)) 
```

当单词错误时，您还需要一个`else`for`if`语句来更改颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:11:22.427

试试这个，

```
function validateAsYouType(inputElementId)
{
    var val = inputElementId.value;
    var randomWord = "house";

    var elem = document.getElementById("inputtype");

    if( val == randomWord)
    {
        elem.style.color="#339933"; // If right, put it in green
    }

    else
    {
        elem.style.color="blue"; //if wrong, put it in blue
    }

} 
```

您的代码没有太多变化，只是`else`显示“实时”检查

[测试链接](http://jsbin.com/asoyey/1/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:12:09.547

在检查整个单词是否正确的位下，从您的单词 (`val`和`randomword`) 中创建字符数组，然后循环遍历一个数组，将当前字符与另一个数组中的相同编号字符进行比较。

就像是：

```
for(int i = 0; i <= val.length; i++)
{
  if (valArr[i] != randomwordArr[i])
  document.getElementById("inputtype").style.color="#990000"; 
  return;
  next i;
} 
```

如果有任何错误，则将字符串更改为红色，否则将其保留为原来的颜色。

# visual-c++ - DLL 加载失败：在 Windows7 32 位机器上找不到指定的模块？

> ID：14255264
> 
> 赞同：0
> 
> 时间：2013-01-10T10:06:24.670
> 
> 标签：visual-c++, dll, windows-7, visual-studio-2012

我在 windows7 专业 32 位机器上创建 dll，相同的 dll 注册另一个 32 位 windows7 专业服务包 1 机器这个 dll 未注册显示以下错误。

无法加载 DLL 'coredll.dll'：找不到指定的模块。

![在此处输入图像描述](../Images/36450ce532d3f5ac600ec5f89142e5a7.png)

如何解决兼容性问题？问候纳拉辛哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T12:08:51.510

加载 DLL 需要解析 DLL 的所有依赖项。您应该使用 Dependency Walker 来获取所需的 DLL 列表。当您将 Dependency Walker 复制到目标计算机时，它应该立即显示丢失的 DLL。

当您从 VC++ 创建 DLL 时，它通常需要 VCxxRT（Visual C++ 运行时）DLL。这些 DLL 有不同的版本。当您的目标机器没有安装正确的版本时，您会收到此错误。

通过查看 C:\Windows\winsxs 来检查已安装的版本`x86_microsoft.vcXX.crt_*`。

**编辑**：汉斯的评论是正确的。coredll.dll 是一个 Windows CE DLL。在您的 PC 上使用需要 coredll.dll 的 DLL 运行 regsvr32 是没有意义的。您可以通过以下方式检查：

```
dumpbin /headers IPTCExt.dll | find "subsystem" 
```

# javascript - knockoutjs 从一个函数中保存多个视图模型？

> ID：14255274
> 
> 赞同：2
> 
> 时间：2013-01-10T10:07:13.620
> 
> 标签：javascript, model-view-controller, knockout.js, knockout-2.0

最近几天我一直在研究以下 KnockoutJS 问题。

我有一个带有 3 个视图模型的页面。我正在使用带有 id 的 div 来指定绑定，即：

```
ko.applyBindings(new viewModel(datasource), $("#sectionQualifications")[0]); 
```

我还在使用 RequireJS，它确实有助于使我的应用程序模块化，并且当然可以与 KnockoutJS 很好地配合使用。

我的问题与我的页面上有（如前所述）3 个视图模型有关。没有重叠，但每个视图模型都有一个 SAVE 功能。快速浏览一下其中一个视图模型片段：

```
function viewModel(data) {
        self = this;

        self.quals = ko.observableArray(data),

        self.addQual = function () {
            self.quals.push(new qualification());
        },

        self.remove = function (item) {

            //  Remove from the database IF we have an actual record in our viewmodel
            if (item.Id !== 0) {
                dataservice_qualifications.deleteEntity(item.Id, ko.toJSON(item),
                    {
                        success: function (ret) {
                            common.notifyOK('Qualification removed');
                        },
                        error: function (err) {
                            common.notifyError('Cannot remove that qualification');
                            console.log('Qualification Remove Error', err);
                            console.log('Remove error object', this.Id);
                        }
                    }
                );
            }

            //  Remove from the actual view model
            self.quals.remove(item);
        }

        //  Save and move on.. we need to iterate through the qualifications, update any existing rows (ID NOT 0) or
        //  add new entries (ID IS 0)
        self.save = function () {

            var saveData = ko.toJS(this.quals);
            for (var i in saveData) {

                //  New qualification entry
                if (saveData[i].Id === 0) { // New qualification entry
                    dataservice_qualifications.postEntity(ko.toJSON(saveData[i]),
                        {
                            success: function (ret) {
                            },
                            error: function (error) {
                                common.notifyError('Cannot add qualification ' + saveData[i].qualificationName);
                                console.log('Qualification add error', error);
                            }
                        }
                    );
                } // eof NEW qualification

                if (saveData[i].Id > 0) {
                    dataservice_qualifications.putEntity(saveData[i].Id, ko.toJSON(saveData[i]),
                        {
                            success: function (ret) {
                            },
                            error: function (error) {
                                common.notifyError('Cannot update qualification ' + saveData[i].qualificationName);
                                console.log('UPDATED: ERROR:', error);
                            }
                        }
                    );
                } // eof UPDATED qualification

            } // eof saveData loop

            common.notifyOK('Qualifications updated');

        } // eof savenext function

        return;
    }; 
```

因此，从上面的示例中，我将有 2 个其他类似的视图模型，它们具有上述 SAVE 功能。所以当然我想使用说jQuery来单击一个按钮并保存所有3个视图模型（即通过每个视图模型的那个SAVE函数）。

因为我使用的是 RequireJS，所以我尝试公开一个“公共”函数，该函数又尝试在内部调用 viewModel.save() 函数，如下所示：

```
function saveModel() {
    viewModel.save();

}

//  PUBLIC INTERFACE
return {
    saveModel: saveModel,
    loadViewModel: koMapData
} 
```

所以理论是我可以从应该触发保存视图模型的任何地方调用“saveModel”函数？

任何帮助都非常感谢。顺便说一句，我已经走上了尝试创建视图模型的道路，例如：

```
var viewModel = {

    save: function() {
        blah blah...
    }
} 
```

但是也没有真正的运气？我确定我错过了一些简单的东西，因为我认为您可以/应该能够以某种方式从外部触发视图模型的功能？

**编辑** 仅供参考，模型不重叠..

在此先感谢大卫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:56:29.853

您可以像这样在对象中合并视图模型：

```
var mainVModel = {
    vModel1: { // has save method},
    vModel2: { // has save method},
    saveAll : function(){
        mainVModel.vModel1.save();
        mainVModel.vModel2.save();
    }
}

ko.applyBindings(new mainVModel()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:54:00.753

实际上感谢@XGreen 的建议，我可以看到效果很好，但是我使用的是requirejs，所以我的应用程序结构不太匹配。

但是，我在以下解决方案中取得了成功：

首先，我以稍微不同的方式创建了视图模型..

```
var viewModel = {
  quals: ko.observableArray([]),

  addQual: function () {
    viewModel.quals.push(new qualification());
  },

  remove: function (item) {
    // Do the remove bit..
  },

  save: function () {
    var saveData = ko.toJS(viewModel.quals);
    // Do the save stuff..
  } // eof savenext function

}; // eof viewModel def 
```

所以定义了视图模型，然后我有一个辅助函数来访问视图模型的 SAVE 函数：

```
//  Private:    Allows external access to save the viewmodel
var viewModelFunctions = {
    saveModel: function () {
        viewModel.save();
    }
} 
```

.. 最后，因为我在 requirejs 结构中使用了显示模块模式，所以我创建了一个公共接口函数，如下所示：

```
function koMapData(incomingData) {
    datasource = (incomingData === null) ? [new qualification()] : incomingData;
    viewModel.quals = ko.observableArray(ko.toJS(datasource));
    ko.applyBindings(viewModel, $("#sectionQualifications")[0]);
}

//  PUBLIC INTERFACE
return {
    viewModelFunctions: viewModelFunctions,
    loadViewModel: koMapData
} 
```

**因此**，您可以使用 viewModelFunctions 看到最后一部分，这意味着在另一个模块（或任何地方）中，我可以通过以下方式远程引用/触发 SAVE 函数：

```
mymodule.viewModelFunctions.saveModel() 
```

这也意味着（在我的情况下，因为我有 3 个视图模型，我需要从一个事件中触发保存）我可以灵活地保存何时/如何保存。显然，最好将任何错误等返回给调用模块，但原则上这对我来说是这样的。

# c - C - 读取文件错误.. !f_in 为空，不知道为什么？

> ID：14255280
> 
> 赞同：0
> 
> 时间：2013-01-10T10:07:42.747
> 
> 标签：c, file, segmentation-fault

```
// Trying to read file

void readFilee(char *namefile){

    FILE *f_in = fopen(namefile,"r");
    char x;
    int i = 0;

    if(!f_in){ printf("Error"); exit(0); }

    /* read to EOF */
    while(1){
        x = getc(f_in);
        if(x == '\n') continue;
            archivo[i] = x;
        if(x == EOF) break;
            i++;
    }
    tamArchivo = i;
    fclose(f_in);
} 
```

事实上错误是 f_in 为空，但我不明白为什么？我正在尝试将服务器与多个客户端连接，客户端已初始化等待连接。

命令验证“如果”我得到“错误”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:10:07.490

在使用它之前验证`f_in`它不为 NULL。我打赌 fopen 失败了，这会导致 f_in 为 NULL。稍后当您调用时`getc`，它会崩溃。

如果不是这种情况，请尝试使用 cgdb 调试您的应用程序，看看哪一行导致崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:10:41.057

尝试替换`while (1)`为`while (!feof(f_in))`. 当文件结束时，这将退出循环。您不应该像在循环中那样检查文件结尾。这将要求文件结尾字符位于文件中的某个位置。的值`EOF`实际上是专门设计的，因此它不会出现在您的文件中。

其他要查看的内容是取消注释您对文件是否已成功打开的检查。如果此检查失败，则不应尝试使用`fxxx`文件指针上的任何函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:17:20.143

添加

```
archivo[i] = '\0'; 
```

在while循环终止之后。这将在字符串末尾添加空字符`archivo`

也可能是您的`archivo`数组的内存空间不足以获取文件的全部内容，因此可能导致缓冲区溢出，从而导致崩溃

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T10:20:37.323

您没有检查“档案”的数组边界，这对我来说是首先要检查的

# python - Twisted: ReconnectingClientFactory 连接到不同的服务器

> ID：14255289
> 
> 赞同：4
> 
> 时间：2013-01-10T10:08:08.487
> 
> 标签：python, python-2.7, twisted, failover

我有一个扭曲的 ReconnectingClientFactory，我可以通过这个工厂成功连接到给定的 ip 和端口对。而且效果很好。

> reactor.connectTCP（IP、端口、myHandsomeReconnectingClientFactory）

在这种情况下，当服务器消失时，myHandsomeReconnectingClientFactory 会尝试连接相同的 ip 和端口（如预期的那样）。

我的目标是，当服务于给定 ip 和端口对的服务器消失时，连接到备份服务器（具有不同的 ip 和端口）。

任何关于如何实现这一目标的想法/评论将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T13:39:06.743

我尝试类似：

```
class myHandsomeReconnectingClientFactory(protocol.ReconnectingClientFactory):

    def __init_(self, hosts):
        # hosts should be a list of tuples (host, port)
        self._hosts = hosts

    def clientConnectionFailed(self, connector, reason):
        if self.continueTrying:
            self._try_next_host(connector)

    def clientConnectionLost(self, connector, unused_reason):
        if self.continueTrying:
            self._try_next_host(connector)

    def _try_next_host(self, connector):
        # round robing of servers
        to_try = self._hosts.pop(0)
        self._hosts.append(to_try)
        connector.host, connector.port = to_try
        self.connector = connector
        self.retry() 
```

我还没有实际测试过它，但至少它应该给你一个很好的起点。好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T19:55:41.597

`ReconnectingClientFactory`没有这个能力。您可以构建自己的工厂来实现这种重新连接逻辑，主要是通过挂钩到`clientConnectionFailed`工厂方法。当它被调用并且你认为有理由切换服务器的原因（例如，`twisted.internet.error.ConnectionRefused`）时，选择列表中的下一个地址并使用适当的`reactor.connectXYZ`方法尝试连接到它。

您也可以尝试将其构建为端点（这是某些人首选的较新的高级连接设置 API），但处理与端点的重新连接还不是一个有据可查的主题。

# celery - 将 Celeryd 部署到 AWS Beanstalks

> ID：14255290
> 
> 赞同：1
> 
> 时间：2013-01-10T10:08:09.257
> 
> 标签：celery, amazon-elastic-beanstalk, celeryd

我正在使用 Celery 运行长时间运行的后台进程的 python 网站。我计划将我的网站与 celery worker 一起部署到 Beanstalk 容器中。

请分享您的过期或想法如何在 Beanstalk 容器中部署和运行 celeary 工作者作为恶魔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:17:14.513

我使用[AWS linux ami](http://aws.amazon.com/amazon-linux-ami/)作为基础构建了一个自定义 AMI，将 celery 设置为在启动时以守护程序模式运行。我自定义了 AMI，所以一切都在 Python 2.7 而不是默认的 2.6 下运行。这意味着重建 mod_wsgi 并使用虚拟环境。

# java - 使用 java 和 SQL 查询 INSERT INTO 将新记录插入 MS 访问

> ID：14255293
> 
> 赞同：-4
> 
> 时间：2013-01-10T10:08:10.867
> 
> 标签：java, sql, ms-access

我想添加一条新记录来访问数据库，但是 SQL 查询没有应用它，这是我添加数据的代码！！

```
 public void actionPerformed(ActionEvent e) {
    JButton b=(JButton)e.getSource();
    if(b==c.t.addR){
        String aa=Integer.toString(55);
        String t=c.t.titlefield.getText();
        String d=c.t.datefield.getText();
        String p=c.t.progressfield.getText();
        String pr=c.t.priorityfield.getText();
        String s="Open";
        System.out.println(t+"\t"+d+"\t"+p+"\t"+pr+"\t"+s); //error is here
        try {
            c.b.st.executeQuery("INSERT into Records (TaskID,Title,Deadline,Progress,Priority,Status) VALUES("+aa+"','"+t+"','"+d+"','"+p+"','"+pr+"','"+s+")");
        } catch (SQLException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
    } 
```

这是我得到的错误

> java.sql.SQLException：[Microsoft][ODBC Microsoft Access Driver] 查询表达式 '55'、'a'、'1'、'1'、'high'、'Open' 中的语法错误（缺少运算符）。在 sun.jdbc.odbc.JdbcOdbc.createSQLException(Unknown Source) 在 sun.jdbc.odbc.JdbcOdbc.standardError(Unknown Source) 在 sun.jdbc.odbc.JdbcOdbc.SQLExecDirect(Unknown Source) 在 sun.jdbc.odbc.JdbcOdbcStatement .execute(Unknown Source) at sun.jdbc.odbc.JdbcOdbcStatement.executeQuery(Unknown Source) at Listener.actionPerformed(Listener.java:27) at javax.swing.AbstractButton.fireActionPerformed(Unknown Source) at javax.swing.AbstractButton$ Handler.actionPerformed(Unknown Source) at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source) at javax.swing.DefaultButtonModel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:17:07.353

错误必须发生在这一行：

```
c.b.st.executeQuery("INSERT into Records (TaskID,Title,Deadline,Progress,Priority,Status) VALUES("+aa+"','"+t+"','"+d+"','"+p+"','"+pr+"','"+s+")"); 
```

看看它，是因为你的参数没有开始和结束的报价吗？尝试：

```
c.b.st.executeQuery("INSERT into Records (TaskID,Title,Deadline,Progress,Priority,Status) VALUES('"+aa+"','"+t+"','"+d+"','"+p+"','"+pr+"','"+s+"')"); 
```

# sql-server - 删除 Azure 架构或删除行需要很长时间

> ID：14255294
> 
> 赞同：4
> 
> 时间：2013-01-10T10:08:17.710
> 
> 标签：sql-server, azure, azure-sql-database

模糊的标题我知道。

目前，我的数据库中有 16,000 行。这是在开发过程中创建的，我现在想删除所有这些行，以便我可以重新开始（所以我没有重复的数据）。

该数据库位于 SQL Azure 上。

如果我运行选择查询

```
SELECT [Guid]
  ,[IssueNumber]
  ,[Severity]
  ,[PainIndex]
  ,[Status]
  ,[Month]
  ,[Year]
  ,[DateCreated]
  ,[Region]
  ,[IncidentStart]
  ,[IncidentEnd]
  ,[SRCount]
  ,[AggravatingFactors]
  ,[AggravatingFactorDescription]
  FROM [dbo].[WeeklyGSFEntity]
GO 
```

这将返回所有行，SSMS 说这需要 49 秒。

如果我试图放下桌子，这会持续 5 分钟以上。

```
DROP TABLE [dbo].[WeeklyGSFEntity]
GO

/****** Object:  Table [dbo].[WeeklyGSFEntity]    Script Date: 10/01/2013 09:46:18 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[WeeklyGSFEntity](
    [Guid] [uniqueidentifier] NOT NULL,
    [IssueNumber] [int] NULL,
    [Severity] [int] NULL,
    [PainIndex] [nchar](1) NULL,
    [Status] [nvarchar](255) NULL,
    [Month] [int] NULL,
    [Year] [int] NULL,
    [DateCreated] [datetime] NULL,
    [Region] [nvarchar](255) NULL,
    [IncidentStart] [datetime] NULL,
    [IncidentEnd] [datetime] NULL,
    [SRCount] [int] NULL,
    [AggravatingFactors] [nvarchar](255) NULL,
    [AggravatingFactorDescription] [nvarchar](max) NULL,
PRIMARY KEY CLUSTERED 
(
    [Guid] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
)

GO 
```

如果我尝试删除每一行，这也需要 5 分钟以上。

```
DELETE
  FROM [dbo].[WeeklyGSFEntity]
GO 
```

我做错了什么还是只是因为这是*大*数据而我不耐烦了？

**更新：**

删除整个数据库大约需要 25 秒。

导入 22,000 行（大致相同的 16,000 多行）`localdb\v11.0`需要 6 秒。我知道这是本地的，但本地开发服务器肯定比 Azure 慢吗？一定...

**更新第二个：**

重新创建数据库并重新创建模式（使用（Fluent）NHibernate），然后插入大约 20,000 行需要 2 分 6 秒。所有单元测试均通过。有什么我可以回头看的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:56:38.837

删除和重新创建数据库大大加快了速度。

其原因尚不清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-14T05:31:46.800

可能有一个打开的事务导致表上的锁定。这可能是由于像我们在开发期间所做的那样中途取消操作造成的。

执行 a`sp_who2`并查看 blkby 列中的哪个 Id。如果有的话就是这样。

要杀死该进程`kill id`

# sharepoint - 在 Sharepoint 2013 中将用户控件添加到 Web 部件

> ID：14255295
> 
> 赞同：13
> 
> 时间：2013-01-10T10:08:25.270
> 
> 标签：sharepoint, user-controls, web-parts, sharepoint-2013

我有一个只有一个`<div id="newsListDiv" runat="server"></div>`元素的可视 Web 部件（使用“添加新项目”表单中的标准 Visual Stuido 2012 模板创建）。我想使用以下代码以编程方式向其中添加我自己的用户控件：

```
protected void Page_Load(object sender, EventArgs e)
{    
    NewsLine newsLine = Page.LoadControl(@"~/_ControlTemplates/MainTheme/NewsLine.ascx") as NewsLine;
    newsListDiv.Controls.Add(newsLine);
} 
```

但是，当我部署解决方案并将 Web 部件添加到页面时，它会显示一个错误页面，告诉我文件“/_ControlTemplates/MainTheme/NewsLine.ascx”不存在。但是，如果我查看文件夹“C:\Program Files\Common Files\microsoft shared\Web Server Extensions\15\TEMPLATE\CONTROLTEMPLATES\MainTheme”，我可以看到该文件存在于那里。我尝试将信任级别设置为“完全”，但遇到了同样的错误。我还尝试在 .ascx 文件中添加用户控件，如下所示：

```
<%@ Register Src="~/_controltemplates/MainTheme/NewsLine.ascx" TagPrefix="uc1" TagName="NewsLine" %>

<div id="newsListDiv" runat="server">
    <uc1:NewsLine runat="server" id="NewsLine" />
</div> 
```

这样会出现编译错误：“当前上下文中不存在名称'InitializeControl'”。我还注意到，只要将 Register 或 Reference 行（带有用户控件的路径）添加到我的 .ascx 文件中，.g.cs 文件就会变为空白！当我删除那条线时，它会再次填满。我尝试了许多不同的路径写作，如“../_controltemplates/”、“/controltemplates/15/”等。但它们都没有任何区别。我在这里绝望了，请帮助！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-29T10:46:43.457

您忘记尝试另一种选择。访问 _layouts 文件夹时也是如此。您应该指定 15 个配置单元。

正确的路径是“~/_ControlTemplates/ **15**

```
 NewsLine newsLine = Page.LoadControl(@"~/_ControlTemplates/15/MainTheme/NewsLine.ascx") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-14T11:08:26.873

我有同样的问题，只有当我在后面的代码中执行它时它才有效，但我没有运气将它添加到 ascx 就像我使用的任何其他控件一样！- 上帝为什么Sharepoint的一切都如此不同？！！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T01:20:18.827

遇到了同样的问题。我没有看到将 15 添加到路径的建议，这对我有用。我的参考文献和你的参考文献之间唯一的其他区别是我一开始没有 ~ 。/ 是第一个字符。

# javascript - 使用 javascript 检测网络运营商

> ID：14255303
> 
> 赞同：4
> 
> 时间：2013-01-10T10:08:34.147
> 
> 标签：javascript

当用户通过 3G 连接连接到 WAP（无线接入点）时，如何使用 JavaScript 检测网络运营商客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-01T21:09:18.820

仅**使用**JavaScript**无法**检测 ISP 提供商。但是您可以使用[网络信息 API](https://developer.mozilla.org/en-US/docs/Web/API/Network_Information_API)来获取有关系统连接的一般连接类型（例如，“wifi”、“蜂窝”等）的信息。

 ****一个可能的解决方案可能是：**

> 编写 JavaScript 逻辑，使用第三方服务和 API 来获取给定 IP 地址的 ISP 信息。

例如，您可以使用[IP Info](http://ipinfo.io)的 API。这是它提供的详细信息的示例：

```
$ curl ipinfo.io
{
  "ip": "67.188.232.131",
  "hostname": "c-67-188-232-131.hsd1.ca.comcast.net", // This is the data you're looking for
  "city": "Milpitas",
  "region": "California",
  "country": "US",
  "loc": "37.44040000000001,-121.87049999999999",
  "org": "AS7922 Comcast Cable Communications, Inc.",
  "postal": "95035",
  "phone": 408
} 
```

您可以参考[http://ipinfo.io/developers](http://ipinfo.io/developers)了解有关其 API 的更多信息。或者，您可以在大量其他 API/服务中进行选择。**

# sql - 选择最大日期，然后选择最大时间

> ID：14255305
> 
> 赞同：1
> 
> 时间：2013-01-10T10:08:41.940
> 
> 标签：sql, oracle, date, time, oracle10g

我有汇率表：

```
T_RATE_ID  T_INPUTDATE  T_INPUTTIME  T_SINCEDATE
1          27.12.2012   22:41:01     28.12.2012
1          27.12.2012   23:45:21     28.12.2012
1          28.12.2012   21:23:11     29.12.2012
1          28.12.2012   21:40:01     29.12.2012
1          29.12.2012   22:33:49     30.12.2012
1          29.12.2012   23:47:19     30.12.2012 
```

如何选择最大日期，然后选择该日期的最大时间？

简单`SELECT MAX(t_sincedate), MAX(t_inputdate), MAX(t_inputtime)`返回所有记录中的最长时间 (23:47:19)

我想得到以下结果：

```
1  27.12.2012  23:45:21  28.12.2012
1  28.12.2012  21:40:01  29.12.2012
1  29.12.2012  23:47:19  30.12.2012 
```

**UPD**：我有一个搜索率的日期。如果这个日期没有价格，我会选择最近的日期。

所以在 where 子句中我已经`where t_sincedate <= sysdate`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:13:02.900

根据您提供的结果，您实际上并不需要最大日期，而是需要最大时间的不同日期。

```
SELECT 
  T_RATE_ID,
  t_sincedate, 
  MAX(t_inputdate), 
  MAX(t_inputtime) 
FROM 
  <TABLE NAME> 
where t_sincedate <= sysdate
GROUP BY
  T_RATE_ID, t_sincedate
ORDER BY
  T_RATE_ID, t_sincedate; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:16:31.140

试试这个：

```
SELECT T_RATE_ID, T_INPUTDATE, T_INPUTTIME, T_SINCEDATE
FROM
   (SELECT 
       *, ROW_NUMBER() OVER (PARTITION BY T_SINCEDATE ORDER BY T_INPUTDATE DESC, T_INPUTTIME DESC) rn
     FROM YourTable
     WHERE T_SINCEDATE<= sysdate) T
WHERE rn = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:19:43.043

[SQLFiddle 演示](http://sqlfiddle.com/#!4/2599e/4)

```
select * from
(
select t.*,
       ROW_NUMBER() 
       OVER (partition by T_SINCEDATE 
             ORDER BY T_INPUTDATE DESC,T_INPUTTIME DESC) rn
from t
) t1 where rn=1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T13:43:36.350

可能我没有理解问题的含义，但我尝试了。

```
select * 
from t 
where (t_inputdate, t_inputtime) in 
  (select t_inputdate, MAX(t_inputtime) from t group by t_inputdate) 
```

# java - 修改布局边距，然后从此布局生成图像

> ID：14255310
> 
> 赞同：0
> 
> 时间：2013-01-10T10:08:48.470
> 
> 标签：java, android, android-relativelayout

我有一个奇怪的问题，

我有一个活动，在这个活动中我有一个布局，我想制作它的图像以便在社交网络上分享它。此布局包含不同的动态图像和文本。这就是为什么我不能将其存储为静态图像并按需共享。当用户触摸共享按钮时，我需要立即生成图像。

问题是我需要在分享之前调整布局，我该怎么办？

```
 ImageView profilPic = (ImageView)dashboardView.findViewById(R.id.profilePic); 
    RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams)profilPic.getLayoutParams();
    params.setMargins(10, 62, 0, 0);
    profilPic.invalidate();
    profilPic.requestLayout(); 
```

首先我修改布局的边距，然后制作它的图像

```
Bitmap bitmap = null;   
        try {
            bitmap = Bitmap.createBitmap(dashboardView.getWidth(),
                    dashboardView.getHeight(), Bitmap.Config.ARGB_4444);
            dashboardView.draw(new Canvas(bitmap));
        } catch (Exception e) {
            // Logger.e(e.toString());
        }

        FileOutputStream fileOutputStream = null;
        File path = Environment
                .getExternalStorageDirectory();
        File file = new File(path, "wayzupDashboard" + ".png");
        try {
            fileOutputStream = new FileOutputStream(file);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        BufferedOutputStream bos = new BufferedOutputStream(fileOutputStream);
        bitmap.compress(CompressFormat.PNG, 100, bos);
        try {
            bos.flush();
            bos.close();
            fileOutputStream.flush();
            fileOutputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

最后我分享一下。

基本上它可以工作，除了它在使用修改后的 layoutParams 重绘布局之前捕获布局。我只需要在重新绘制布局后考虑到新的布局参数时才捕获此布局。

如果我删除了捕获代码，它就可以正常工作，当我触摸共享按钮时，我看到布局正在移动。但是当我有捕获代码时，它只是在修改边距之前捕获布局。

如何确保在捕获之前重绘布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:41:00.320

为了记录，只有在设置视图后才能正确捕获布局，我需要先设置视图，然后在延迟线程中捕获布局。这是我发现使它起作用的唯一方法。

```
public void onShareButton() {
        dashboardController.setupViewBeforeSharing();

        new Timer().schedule(new TimerTask() {          
            @Override
            public void run() {
                Bitmap bitmap = null;   
                try {
                    bitmap = Bitmap.createBitmap(dashboardView.getWidth(),
                            dashboardView.getHeight(), Bitmap.Config.ARGB_4444);
                    dashboardView.draw(new Canvas(bitmap));
                } catch (Exception e) {
                    // Logger.e(e.toString());
                }

                FileOutputStream fileOutputStream = null;
                File path = Environment
                        .getExternalStorageDirectory();
                File file = new File(path, "wayzupDashboard" + ".png");
                try {
                    fileOutputStream = new FileOutputStream(file);
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                }
                BufferedOutputStream bos = new BufferedOutputStream(fileOutputStream);
                bitmap.compress(CompressFormat.PNG, 100, bos);
                try {
                    bos.flush();
                    bos.close();
                    fileOutputStream.flush();
                    fileOutputStream.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }

                Intent share = new Intent(Intent.ACTION_SEND);
                share.setType("image/png");
                share.putExtra(Intent.EXTRA_TEXT, R.string.addPassengerButton);
                share.putExtra(Intent.EXTRA_STREAM,
                        Uri.parse("file://" + file.getAbsolutePath()));
                startActivity(Intent.createChooser(share, "Share image"));

                MainActivity.this.runOnUiThread(new Runnable() {
                    public void run() {
                        dashboardController.setupViewAfterSharing();   
                    }
                });

            }
        }, 300);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:49:53.340

`dashboardView`一种更简单的方法是为视图上的布局传递设置侦听器。使用- [addOnLayoutChangeListener](http://developer.android.com/reference/android/view/View.html#addOnLayoutChangeListener%28android.view.View.OnLayoutChangeListener%29)
设置监听器。 **在更改布局参数之前** 设置侦听器，并在图像保存到持久性**后将**其删除。 希望它会增加任何改进。`View.addOnLayoutChangeListener()`

# qt - 获取当前项目的路径

> ID：14255311
> 
> 赞同：4
> 
> 时间：2013-01-10T10:08:51.933
> 
> 标签：qt, qt-creator

如何获取在 qtCreator 中打开的当前活动项目的绝对路径？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-04T13:41:01.467

对于最新的 QtCreator 3.4.0 API，您可以使用：

```
#include <projectexplorer/projecttree.h>
#include <projectexplorer/project.h>
#include <utils/fileutils.h>

ProjectExplorer::ProjectTree::currentProject()->projectDirectory().toString();
ProjectExplorer::ProjectTree::currentProject()->projectFilePath().toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:27:18.690

Qt 仅支持`QDir::currentPath`which 将指向可执行文件的位置，据我所知，它没有能够从 Qt Creator 获取信息的钩子。如果您的可执行文件是在项目所在的同一目录中构建的，`currentPath()`则会返回它。

编辑：我会留下我是白痴的部分。Qt Creator 有一组指向`Core::FileManager::`. `Utils`那里有许多函数用于返回项目目录、当前打开的文件是什么、它在哪里等等。就快速扫描而言，没有明确的“当前绝对路径是什么”，但可能有一种方法可以查询当前打开的内容。API 文档在这里：[http ://doc.qt.digia.com/qtcreator-extending/qtcreator-api.html](http://doc.qt.digia.com/qtcreator-extending/qtcreator-api.html)

# linux - linux中串行端口描述符块上的“关闭”功能

> ID：14255314
> 
> 赞同：4
> 
> 时间：2013-01-10T10:08:57.953
> 
> 标签：linux, serial-port, embedded-linux

最近我发现了一个对我来说很新的问题，我会很感激建议。我正在使用 termios 函数在 Linux 上进行串行通信。我实际上不使用真正的串口，而是使用虚拟小工具串行驱动程序`/dev/ttyGS0`。文件描述符以非阻塞方式打开。

我的程序会定期生成数据并将其发送到 /dev/ttyGS0。如果另一端读取它，则没有信息。如果没有，则某些内部 fifo 会填满并写入返回“将阻塞”错误。到目前为止一切顺利，我对此没有任何问题。

问题是，当我想用​​填充的 fifo 关闭此类文件描述符时，关闭功能块！不是无限期的，而是大约 10 秒。

我试着`tcflush(uart->fd, TCOFLUSH)`在关闭之前做，没有任何效果。

这对我来说是如此奇怪的行为，我没有找到任何描述，关闭可能会阻塞。有什么办法可以避免这种情况吗？或者至少减少这个超时？我应该在哪里寻找这个超时？VTIME 属性对此也没有影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T18:41:36.990

正如 Amardeep 提到的，close() 调用由驱动程序处理。Close 本身始终是一个阻塞调用，但通常它是一个快速调用。

因此，答案是延迟特定于虚拟小工具驱动程序。我没有帮助的经验。

关闭文件有多重要？如果延迟是一个主要问题并且需要关闭文件（例如在长时间运行的进程中避免文件描述符泄漏），那么关闭可能需要在单独的线程中调用。显然，最好的答案是特定于该驱动程序的答案。也许那里的研究可能会产生答案，例如清除虚拟设备状态的 ioctl() 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-13T18:33:24.173

您可能需要配置端口的 closing_wait 参数。从setserial手册：

> ***关闭等待****延迟* 指定内核在关闭端口时应等待从串行端口传输数据的时间量（以百分之一秒为单位）。如果指定“none”，则不会发生延迟。如果指定了“infinite”，内核将无限期地等待缓冲数据的传输。默认设置为 3000 或 30 秒延迟。此默认值通常适用于大多数设备。如果选择了太长的延迟，那么当一个未连接且有数据未决的串口关闭时，串口可能会挂起很长时间。如果选择的延迟太短，则存在一些传输数据被完全输出的风险。如果设备速度极慢，

使用 setserial 检查您的端口的参数：

```
$ setserial -g -a /dev/ttyS0
/dev/ttyS0, Line 0, UART: 16550A, Port: 0x03f8, IRQ: 4
        Baud_base: 115200, close_delay: 50, divisor: 0
        closing_wait: 3000
        Flags: spd_normal skip_test 
```

就我而言，故障设备没有收到我发送的最后一个字节，因此关闭端口总是需要 30 秒。您可以使用 setserial 更改此超时，例如，更改为 1 秒：

```
$ sudo setserial /dev/ttyS0 closing_wait 100 
```

当然，您可能希望在启动时在 /etc/rc.local 或您的发行版用于配置端口的任何脚本中发出此命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-04T13:00:22.630

我遇到了同样的问题，在我的情况下，在关闭设备之前禁用流量控制有帮助。您可以使用以下函数执行此操作：

```
int set_flowcontrol(int fd, int control) 
{
    struct termios tty;
    memset(&tty, 0, sizeof tty);
    if (tcgetattr(fd, &tty) != 0) 
    {
        perror("error from tggetattr");
        return -1;
    }

    if(control) tty.c_cflag |= CRTSCTS;
    else tty.c_cflag &= ~CRTSCTS;

    if (tcsetattr(fd, TCSANOW, &tty) != 0)
    {
        perror("error setting term attributes");
        return -1;
    }
    return 0;
} 
```

只需在关闭之前调用它：

```
...
rc = set_flowcontrol(fd, 0);
if (rc != 0)
{
    perror("error setting flowcontrol: ");
    exit(-1);
}

rc = close(fd);
if (rc != 0)
{
    perror("error closing fd: ");
    exit(-1);
}
... 
```

# java - 在 GWT 中设置元素 ID

> ID：14255315
> 
> 赞同：2
> 
> 时间：2013-01-10T10:08:57.817
> 
> 标签：java, gwt, qtp

我正在尝试将 ID 添加到 GWT 元素。我试过以下代码。

在 SubscribeView.java 文件中，定义了 existingFundRadioButton 字段，我为其设置了一个 ID，如下所示：

```
DOM.setElementAttribute( existingFundRadioButton.getElement(), 
                         "ID",
                         "existingFundRadioButton" ) 
```

我尝试使用`existingFundRadioButton.getElement().setId("existingFundRadioButton")`，但它不工作。

这是我的代码。

```
<g:FlowPanel width="100%">
    <g:FlowPanel>

        <g:HTMLPanel ui:field='searchPanel' styleName="{res.fdcWidgets.box}">
            <table class="{res.fdcWidgets.inputTable}">
                <colgroup>
                    <col width="25%" />
                    <col width="75%" />
                </colgroup>
                <tbody>
                    <tr>
                        <td>
                            <fdc:I18NRadioButton name="fund"
                                ui:field="existingFundRadioButton" checked="true"
                                messageKey="buy.existingFundLabel" />
                        </td>
                        <td>
                            <hli:HoldingsListBoxWidget ui:field="holdingsListBox" />
                        </td>
                    </tr>

                </tbody>
            </table>

        </g:HTMLPanel>
    </g:FlowPanel>
    <g:FlowPanel styleName="{res.fdcWidgets.contentRightColumn}">
        <fund:FundInformationWidget ui:field="fundInformationWidget" />
    </g:FlowPanel>
</g:FlowPanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:19:50.160

## 旧解决方案

如果您卡在旧版本的 GWT - 对于 RadioButton，我们使用特定于浏览器的方法。我们通过扩展 RadioButton 来实现这一点。

```
MyRadioButton extends RadioButton{
        public void setId( String id )
        {
            getElement().setId( id );
            Element child = DOM.getChild( getElement(), 0 );
            DOM.setElementAttribute( child, "id", id + CONST_INPUT_ELEMENT );
            final Element e_label = DOM.getChild( getElement(), 1 );
            // Handling IE
            DOM.setElementAttribute( e_label, "htmlFor", id + CONST_LABEL_ELEMENT );
            // Handling Other Browsers
            DOM.setElementAttribute( e_label, "for", id + CONST_LABEL_ELEMENT );
        }
} 
```

## 新解决方案

对于那些幸运地拥有支持所有小部件的 ensureDebugId 的最新 GWT 的人，您可以`ensureDebugId("someid")`在从 UIObject 继承的所有 ui 元素中使用可用的！！！！

# java - ScheduledExecutorService 在正常 OS / JVM 上的准确性

> ID：14255324
> 
> 赞同：5
> 
> 时间：2013-01-10T10:09:24.437
> 
> 标签：java, scheduled-tasks

我`ScheduledExecutorService.scheduleAtFixedRate`用来运行日常任务，如下所示：

```
executor.scheduleAtFixedRate(task, d, 24L * 3600 * 1000, TimeUnit.MILLISECONDS); 
```

（`d`是以毫秒为单位的初始延迟）。

执行器由`Executors.newSingleThreadScheduledExecutor()`多个任务创建并运行，但它们都安排在几个小时之内，最多需要几分钟。

我知道 ScheduledExecutorService 不保证准确性，我需要一个实时操作系统和 JVM 来获得它。不过，这不是我的任务的要求。

我注意到，在使用 JDK 1.7.0_03 的 Windows 2003 Server 上，任务每天会延迟近 10 秒。每月大约需要 5 分钟，这对于我的申请来说是可以接受的。无论如何，我可能不得不实施重新调度，因为我希望任务在特定的本地时间运行，所以我必须自己处理 DST。该服务运行时间很长——半年不重启并不稀奇。

尽管如此，我认为对于一个大部分空闲的系统来说，每天 10 秒的不准确性是相当高的，我想知道我是否应该为更糟糕的行为做好准备。

所以我的问题是关于你的经历`scheduleAtFixedRate`。10秒/天正常吗？我在其他环境（我们的客户也使用 Linux 和 Solaris 服务器）中会获得更好或更差的准确性吗？或者这 10 秒是否表明我们的环境有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:30:01.197

对于一个运行时间很长的任务，这并不奇怪。您遇到的另一个问题是它使用了与 NTP 等不同步的 nanoTime()。这可能会导致挂钟漂移。

避免这种情况的一种方法是按照您的建议重复安排。重复任务实际上会重新安排自己（这就是他们不能抛出异常的原因，见下文）您可以有一个一次性任务，在最后重新安排自己，使用挂钟时间并考虑到日列表节省。

顺便说一句：我会确保你捕捉到异常甚至 Throwable 抛出。如果您不这样做，您的任务将停止，可能会默默地停止（除非您正在查看返回的 Future 对象）

我所做的就是欺骗一点。我有一个任务每 1-10 秒唤醒一次，并检查它是否需要运行，如果不返回。如果您没有数千个任务，那么开销通常是微不足道的，而且实现起来要简单得多。

# jquery - 自动调整高度

> ID：14255326
> 
> 赞同：0
> 
> 时间：2013-01-10T10:09:27.580
> 
> 标签：jquery, css, wordpress

只是想知道有人可以帮忙， [http](http://limerickchambers.hailstormcommerce.com/services/international-trade-services/) ://limerickchambers.hailstormcommerce.com/services/international-trade-services/ 在这里我希望右侧的蓝色边框始终与左侧边栏的高度相匹配，`min-height`因为边栏不起作用左边一直在变化。我试过`height:100%`了，但这并没有延长它。它们都被包裹在一个名为的 div 中，并且 Ive 给出了我希望它可以工作但没有运气`content`的高度。`auto`而且我不想走这条路`position:absolute`来让它发挥作用。

所以我有：

```
.entry-content {
    border:1px solid #d4d9ed;
    border-radius:8px;
    padding:0px 20px 10px 20px;
    overflow:hidden;
    min-height:1056px;
} 
```

代替：

```
.page-content-right {
    color: #CACACA;
    float: left;
    height: 100%;
    margin-left: 10px;
    padding-right: 0;
    padding-top: 18px;
    width: 710px;
} 
```

里面是：

```
.singular #content, .left-sidebar.singular #content {
    margin: 0;
    position: relative;
    width: auto;
} 
```

任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:59:15.060

最后我使用了 jQuery。

```
jQuery(document).ready(function() {
var leftHeight = jQuery('.content-sidebar-new').height();

jQuery('.entry-content').css({'min-height':leftHeight - 31});
}); 
```

# r - R - 根据相邻行的内容更改行值

> ID：14255328
> 
> 赞同：1
> 
> 时间：2013-01-10T10:09:32.563
> 
> 标签：r, neighbours

我在两列中有一系列数字，标题`"a"`和`"b"`.

如果“列”中的值与其相邻单元格之间的差异大于 10，我想`R`更改列中的值。`"b"``a"`

例如：

```
a   |   b
-----------    
1   |   1
2   |   1
3   |   1
4   |   1
21  |   1
22  |   1
23  |   1
24  |   1
... |   ... 
```

然后我希望 R 将“b”列中的值更改为

```
a   |   b
-----------    
1   |   1
2   |   1
3   |   1
4   |   0
21  |   0
22  |   1
23  |   1
24  |   1
... |   ... 
```

因为 a 列中的值 4 和 21 彼此大于 10。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:00:52.600

```
df <- data.frame(a = c(1:4, 21:24), b = 1)

# check whether differences are greater than 10 
diffs <- diff(df$a) > 10

# create `b`
df$b <- as.integer(!(c(FALSE, diffs) | c(diffs, FALSE))) 
```

结果：

```
 a b
1  1 1
2  2 1
3  3 1
4  4 0
5 21 0
6 22 1
7 23 1
8 24 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:20:15.247

一些替代品。

```
df <- data.frame(a = c(1:4, 21:24), b = 1L)
local({
 w10 <- with(df, which(diff(a) > 10)))
 df$b[c(w10, w10+1)] <<- 0L
}) 
```

# asp.net - .NET MVC 文件不存在带有额外 / 文本的 URL 的错误

> ID：14255329
> 
> 赞同：0
> 
> 时间：2013-01-10T10:09:34.333
> 
> 标签：asp.net, asp.net-mvc

我已经为 stackoverflow 的问题建立了一个类似的友好 URL 系统。

旧的 URL 语法是：localhost:12345:/cars/details/1234

我已经设置了返回 301 和 URL 生成，但是当 url 重定向到时获取文件不存在错误：

localhost:12345/cars/details/1234/blue-subaru（因为最后一个“blue-subaru”）

我当然想要：localhost:12345/cars/1234/blue-subaru :)

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:04:20.937

这是一个路由问题，因此您应该像这样对路由进行一些更改

```
routes.MapRoute(
               "Default", // Route nameRegister
               "{controller}/{action}/{id}/{name}", // URL with parameters
               new { controller = "test", action = "Index", id = UrlParameter.Optional,name = UrlParameter.Optional } // Parameter defaults
           ); 
```

我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T11:06:23.547

您可以配置您的路线以在 global.asax 上的 RouteTable 中接受汽车的名称。

```
routes.MapRoute( 
    "Cars", 
    "Car/{id}/{carName}", 
    new { controller = "Car", action = "Details", id =  UrlParameter.Optional, carName =  UrlParameter.Optional } 
); 
```

在你的`CarController`你可以有你的 Detail 操作方法并获取两个参数（id 和 carName）：

```
public ActionResult Details(int? id, string carName) 
{ 
   var model = /* create you model */

   return View(model);
} 
```

您的操作链接应如下所示：

```
@Html.ActionLink("Text", "Details", "Car", new { id = 1, carName="Honda-Civic-2013" }) 
```

# android - bindService() 返回 false 但需要调用 unbindService()？

> ID：14255338
> 
> 赞同：6
> 
> 时间：2013-01-10T10:09:58.873
> 
> 标签：android, service, ipc

我的应用程序使用另一个（我的）应用程序提供的服务。我正在使用一个[绑定服务](http://developer.android.com/guide/components/bound-services.html)来`Messenger`访问它并与之通信（因为它是一个不同的应用程序，它也是一个远程服务）。

当我`bindService`以适当的意图调用并且调用返回时（正如预期的那样，当提供服务的 APK 不存在时），我从文档和示例代码中`false`假设我不需要. 但是，在我的 Galaxy Nexus (Jelly Bean) 设备上执行此操作时，我在完成.`unbind``ServiceConnection``ServiceConnectionLeaked``Activity`

我通过这样做挽救了这一点

```
if (!ctxt.bindService(intent, serviceConnection, Context.BIND_AUTO_CREATE)) {
    try { 
        ctxt.unbindService(serviceConnection);
    } catch (Throwable t) {}
    // Clean up 
    return;
}
// Store serviceConnection for future use 
```

我很好奇：我是否错过了文档中的某些内容，它应该以这种方式工作吗？我添加了`try ... catch`以确保即使这种行为在其他设备或 Android 版本上确实不同，我的应用程序也不会（负面）受到它的影响。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T21:46:41.783

一般来说，一个ServiceConnection总是由框架分配和注册，不管`bindService()`调用返回true还是false。[请参阅android.app.ContextImpl](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/ContextImpl.java#L1410)中的 bindService() 实现：

```
public boolean bindService(Intent service, ServiceConnection conn, int flags, int userHandle) {
    IServiceConnection sd;
    if (conn == null) {
        throw new IllegalArgumentException("connection is null");
    }
    if (mPackageInfo != null) {
        // A new ServiceDispatcher will be created and registered along with 
        // ServiceConnection in LoadedApk.mService for your application context.
        sd = mPackageInfo.getServiceDispatcher(conn, getOuterContext(),
                mMainThread.getHandler(), flags);
    } else {
        throw new RuntimeException("Not supported in system context");
    }
    try {
        ... ...
        return res != 0;
    } catch (RemoteException e) {
        return false;
    }
} 
```

[按照官方开发指南的](http://developer.android.com/guide/components/bound-services.html#Binding)建议，在完成服务后，您应该始终取消绑定服务，这是一种良好的编程方式：

> *   要断开与服务的连接，请调用 unbindService()。
>     
>     
>     
>     当您的客户端被销毁时，它将与服务解除绑定，但是当您完成与服务的交互或活动暂停时，您应该始终解除绑定，以便服务可以在不使用时关闭。（下面将详细讨论绑定和解除绑定的适当时间。）

当框架开始执行最终清理（例如，当您的应用程序退出时）并发现有未注册的 ServiceConnection 时，会引发 ServiceConnectionLeaked，然后框架将尝试为您解除绑定。[请参阅android.app.LoadedApk](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/LoadedApk.java#L526)中的 removeContextRegistrations() 实现：

```
public void removeContextRegistrations(Context context,
        String who, String what) {
    final boolean reportRegistrationLeaks = StrictMode.vmRegistrationLeaksEnabled();
    ... ...
    //Slog.i(TAG, "Receiver registrations: " + mReceivers);
    HashMap<ServiceConnection, LoadedApk.ServiceDispatcher> smap =
        mServices.remove(context);
    if (smap != null) {
        Iterator<LoadedApk.ServiceDispatcher> it = smap.values().iterator();
        while (it.hasNext()) {
            LoadedApk.ServiceDispatcher sd = it.next();
            ServiceConnectionLeaked leak = new ServiceConnectionLeaked(
                    what + " " + who + " has leaked ServiceConnection "
                    + sd.getServiceConnection() + " that was originally bound here");
            leak.setStackTrace(sd.getLocation().getStackTrace());
            Slog.e(ActivityThread.TAG, leak.getMessage(), leak);
            if (reportRegistrationLeaks) {
                StrictMode.onServiceConnectionLeaked(leak);
            }
            try {
                ActivityManagerNative.getDefault().unbindService(
                        sd.getIServiceConnection());
            } catch (RemoteException e) {
                // system crashed, nothing we can do
            }
            sd.doForget();
        }
    }
    mUnboundServices.remove(context);
    //Slog.i(TAG, "Service registrations: " + mServices);
} 
```

# javascript - 如何在 knockoutjs 中添加动态类？

> ID：14255339
> 
> 赞同：30
> 
> 时间：2013-01-10T10:09:57.647
> 
> 标签：javascript, knockout.js

假设我有，

```
<span class="cls1 cls2" data-bind="title: title" ></span> 
```

我想通过 JSON 对象添加另一个类，

```
{ title: 'a', clas: 'cls3' } 
```

这部作品，

```
 <span class="cls1 cls2" data-bind="attr:{title: title,'class': 'cls1 cls2'+clas}" ></span> 
```

但问题是它会添加两个类属性。我一开始就需要 cls1 和 cls2 类。但是在某些事件之后需要 cls3 类。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-10T10:20:36.020

您应该使用`css`绑定而不是`attr`为此。在文档中阅读有关它的更多信息：http: [//knockoutjs.com/documentation/css-binding.html](http://knockoutjs.com/documentation/css-binding.html)。

您的代码将如下所示：

```
<span class="cls1 cls2" data-bind="text: title, css: myClass" ></span> 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/gKaRF/](http://jsfiddle.net/vyshniakov/gKaRF/)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-06-18T18:45:35.350

**使用多个类：**

```
<span
    class="yourClass"
    data-bind="css: { myClass: (true == true), theirClass: (!true == false), ourClass: true }"
>Thine Classes</span> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-10T10:19:09.910

您可以使用`css`绑定来执行此操作：

```
<span class="cls1 cls3" data-bind="css: clas"/> 
```

这会将“class”属性的值添加到元素的当前类集合中

# jsf-2 - Primefaces 3.4.2 javascript错误

> ID：14255347
> 
> 赞同：0
> 
> 时间：2013-01-10T10:10:11.527
> 
> 标签：jsf-2, primefaces

我正在使用**3.4.2**版本的 Primefaces 开发 Web 应用程序。我有一个`p:pickList`。应用程序正在使用通用模板工作，并且每个页面都替换了`general_content`模板，该模板正在为每个请求重新加载。我的问题是选择列表不起作用（无法与之交互），因为我加载页面时发生了一些 JavaScript 错误。这是我的 xhtml：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:p="http://primefaces.org/ui"
template="/templates/general_template.xhtml">

<ui:define name="metadata">
    <f:metadata>
        <f:viewParam id="user" name="user"
            value="#{navegableUserData._ParamUser}" />

        <f:viewParam id="NavIndex" name="NavIndex"
            value="#{navegableUserData._QueueIndex}" />
        <f:event type="preRenderView"
            listener="#{navegableUserData.initialize}" />
    </f:metadata>
    <h:message for="user" />
</ui:define>

<ui:define name="general_content">
    <h:form id="SystemUserForm">
        <p:pickList id="rolePickList" value="#{navegableUserData._ListRoles}"
            var="role" itemValue="#{role}" converter="rolConverter">
            <f:facet name="sourceCaption">
                <h:outputText value="#{msg.AVAILABLE}" />
            </f:facet>
            <f:facet name="targetCaption">
                <h:outputText value="#{msg.ASSIGNED}" />
            </f:facet>

            <p:column>
                <h:outputText value="#{role._Nombre}" />
            </p:column>
        </p:pickList>
    </h:form>
</ui:define> 
```

这是我遇到的 JavaScript 错误：

**火狐中的萤火虫**

*Firebug 告诉我在primefaces.js*的第一行中找不到元素“a”

 *```
"a is undefined"
PrimeFaces={escapeClientId:function(a){return"#"+a.replace(/:/g,"\\:")},
... 
```

**Chrome 中的检查器**

```
Uncaught TypeError: Cannot call method 'replace' of undefined primefaces.js.xhtml:1
PrimeFaces.escapeHTML primefaces.js.xhtml:1
(anonymous function) primefaces.js.xhtml:27
bG.extend.each jquery.js.xhtml:14
bG.fn.bG.each jquery.js.xhtml:14
PrimeFaces.widget.PickList.PrimeFaces.widget.BaseWidget.extend.generateItems primefaces.js.xhtml:27
PrimeFaces.widget.PickList.PrimeFaces.widget.BaseWidget.extend.init  primefaces.js.xhtml:27
e.(anonymous function) jquery.js.xhtml:373
c jquery.js.xhtml:373
PrimeFaces.createWidget primefaces.js.xhtml:1
PrimeFaces.cw primefaces.js.xhtml:1
(anonymous function) 
```

看起来有些 jquery 失败了。使用之前的 Prime 版本**3.4.1**，一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T07:16:14.613

p:pickList (primefaces v3.4.2) 需要指定 itemLabel。

只需添加

```
itemLabel="#{role}" 
```

到您的 p:pickList*

# android - 应用程序在按钮单击频繁时崩溃

> ID：14255351
> 
> 赞同：0
> 
> 时间：2013-01-10T10:10:24.087
> 
> 标签：android, button, crash, touch

我有用于输入数字的自定义键盘，当我改变焦点并返回按钮点击事件会减慢应用程序并导致应用程序崩溃。可能是什么问题。在 logcat 中我得到 Gc 收集器释放消息。我尝试锁定按钮的多次点击同时，但有帮助。

# core-data - 在 Core Data 中应该使用什么类型来存储年份属性？

> ID：14255352
> 
> 赞同：0
> 
> 时间：2013-01-10T10:10:25.177
> 
> 标签：core-data, xcdatamodel

我想到了`Integer 16`，因为很容易计算年数，这取决于它。

`String`适合搜索，例如。很容易从 1978 中找到 78 年作为子字符串。也可以将年份保留为`Date`.

最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:32:40.797

我认为存储涉及某种日期的东西最好存储为`NSDate`简单的因为很可能当您将该值拉回时，它将用于显示某种日期。我无法想象 XCode 会不遗余力地让`NSDate`Core Data 变得如此可访问，除非他们有充分的理由。

也可以是优化...

最后，一切都与环境有关。正如您所说：是的，有时出于各种原因（包括搜索）将对象保存为字符串是明智的。但要直接回答你的问题，我会`NSDate`主要选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:55:51.713

我会留下来`Integer 16`，因为这是《CoreData for iOS》一书中的做法。

# java - 无法解析休眠中的映射文档错误

> ID：14255353
> 
> 赞同：0
> 
> 时间：2013-01-10T10:10:28.970
> 
> 标签：java, hibernate, hibernate-mapping

这是我在 stackoverflow 中的第一篇文章：我是 hibernate 的新手，事实上下面是我在 hibernate 中的第一个代码：当我运行我的主类时，我反复收到“无法解析映射文档”错误。以下是供您参考的代码，请帮我解决这个问题。

配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.DerbyDialect</property>
    <property name="hibernate.connection.driver_class">org.apache.derby.jdbc.ClientDriver</property>
    <property name="hibernate.connection.url">jdbc:derby://localhost:1527/sample</property>
    <property name="hibernate.connection.username">one</property>
    <property name="hibernate.connection.password">two</property>
    <property name="hibernate.transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
    <property name="hibernate.current_session_context_class">thread</property>

    <mapping resource="EmployeeMapping.hbm.xml"/>

  </session-factory>
</hibernate-configuration> 
```

映射文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
  <class name="Employee" table="EMPLOYEE"/>
  <id name="emp_id" type="int" column="emp_id"/>

  <property name="emp_name">
      <column name="emp_name"/>
  </property>

  <property name="emp_branch">
      <column name="emp_branch"/>
  </property>
  <property name="emp_Salary">
      <column name="emp_salary"/>
  </property>
  <property name="emp_fav_dgt">
      <column name="emp_fav_dgt"/>
  </property>

</hibernate-mapping> 
```

Pojo类：

```
public class Employee {

    private int emp_id;
    private String emp_name;
    private String emp_branch;
    private int emp_Salary;
    private int emp_fav_dgt;

    public int getEmp_Salary() {
        return emp_Salary;
    }

    public void setEmp_Salary(int emp_Salary) {
        this.emp_Salary = emp_Salary;
    }

    public String getEmp_branch() {
        return emp_branch;
    }

    public void setEmp_branch(String emp_branch) {
        this.emp_branch = emp_branch;
    }

    public int getEmp_fav_dgt() {
        return emp_fav_dgt;
    }

    public void setEmp_fav_dgt(int emp_fav_dgt) {
        this.emp_fav_dgt = emp_fav_dgt;
    }

    public int getEmp_id() {
        return emp_id;
    }

    public void setEmp_id(int emp_id) {
        this.emp_id = emp_id;
    }

    public String getEmp_name() {
        return emp_name;
    }

    public void setEmp_name(String emp_name) {
        this.emp_name = emp_name;
    }
} 
```

主类：

```
public class Main {
    public static void main(String[] args) {
        System.out.println("asdf");
         SessionFactory sessionFactory = null;
         Transaction ts = null;
         Session session = null;
         Configuration conf = null;
        try{
            conf =  new org.hibernate.cfg.Configuration().configure();
            sessionFactory =  conf.buildSessionFactory();
            session =sessionFactory.openSession();
            Employee customer = new Employee();
            customer.setEmp_id(1);
            customer.setEmp_name("one");
            customer.setEmp_branch("old");
            customer.setEmp_Salary(1000);
            customer.setEmp_fav_dgt(2);
            session.save(customer);
            ts.commit();
        }
        catch(Exception e){
            e.printStackTrace();;
        }
        finally{
           session.close();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:14:01.547

与字段对应的属性标签应该嵌套在类标签中。

```
<class name="Employee" table="EMPLOYEE">
  <id name="emp_id" type="int" column="emp_id"/>

  <property name="emp_name">
      <column name="emp_name"/>
  </property>

  <property name="emp_branch">
      <column name="emp_branch"/>
  </property>
  <property name="emp_Salary">
      <column name="emp_salary"/>
  </property>
  <property name="emp_fav_dgt">
      <column name="emp_fav_dgt"/>
  </property>
</class> 
```

# c# - 动态控件，禁用 ViewState 和回发

> ID：14255354
> 
> 赞同：0
> 
> 时间：2013-01-10T10:10:31.140
> 
> 标签：c#, asp.net, webforms, viewstate

在浪费了数小时试图解决动态用户控制`ViewState`丢失的问题后，我决定永久禁用`ViewState`。

问题是我现在该怎么办？我应该如何保持动态控件的状态，以免它们在回发后丢失。我正在考虑改用 Session ，但这意味着我必须为用户打开的每个页面/选项卡生成唯一的键，以便不会覆盖值（对吗？）。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:55:58.570

为了确保动态用户控件的视图状态，您需要确保

*   在每个回发场景中创建动态控件
*   它们在页面生命周期中尽可能早地创建 - 初始化和加载状态是最好的选择（在控制事件中加载它们不太可能起作用）
*   动态控件层次结构应完全相同，层次结构中的所有控件都应具有与先前请求中相同的 id
*   始终分配 id（否则它们可能会自动生成并且可以具有不同的值）并且应该在将控件添加到控件树中之前进行分配。

将视图状态存储更改为会话而不是隐藏字段不会解决 ASP.NET 运行时已经加载视图状态或无法将控件与其视图状态数据相关联的问题（从 id 和层次结构推断） )

# asp.net - 在 IIS 7.5 中与 ASP.NET 一起运行 ASP Classic 时出现错误

> ID：14255355
> 
> 赞同：-1
> 
> 时间：2013-01-10T10:10:31.277
> 
> 标签：asp.net, asp-classic, iis-7.5, windows-server-2008, microsoft-distributed-file-system

我目前正在尝试将一些网站从 IIS6 迁移到 IIS7，但遇到了问题。

大多数情况下，我的网站都是用 Classic ASP 编写的。但是，在一个网站中，我有两个运行 asp.net 的 Web 应用程序。像这样的东西

```
www.mywebsite1.com - Classic ASP
www.mywebsite2.com - Classic ASP
www.mywebsite2.com/MyAspDotNetApplication1 - ASP.NET 4.0
www.mywebsite2.com/SubDirectory/MyAspDotNetApplication2 - ASP.NET 4.0
www.mywebsite3.com - Classic ASP
... 
```

当我浏览托管经典 ASP 页面的站点时，我没有任何问题。如果我访问其中一个 ASP.NET Web 应用程序，一切正常。如果我然后访问第二个 ASP.NET Web 应用程序，事情开始出错，我会在 ASP.NET 应用程序页面上遇到错误，如下所示

> 由于已达到网络 BIOS 命令限制，无法开始监视对“\FileServer1\web\mywebsite2\MyAspDotNetApplication1\App_Browsers”的更改。有关此错误的更多信息，请参阅 Microsoft 知识库文章 810886。Windows XP 平台不支持在 UNC 共享上托管。`

当我尝试访问经典 ASP 网页时，出现以下错误

```
HTTP Error 500.19 - Internal Server Error
The requested page cannot be accessed because the related configuration data for the page is invalid
Module  IIS Web Core
Notification    BeginRequest
Handler Not yet determined
Config Error    
Config File
Requested URL   http://www.mywebsite2.com:80/myvirtualdirectory1/
Physical Path   \\FileServer1\web\mywebsite2\myvirtualdirectory1\
Logon Method    Not yet determined
Logon User  Not yet determined 
```

当我打开 IIS 管理器并查看发生错误的站点或虚拟目录之一时，我收到以下错误

```
Filename: \\?\FileServer1\mywebsite2\web.config
Error: Cannot read configuration file 
```

我遇到的问题与[其他问题](https://stackoverflow.com/questions/6596392/the-requested-page-cannot-be-accessed-because-the-related-configuration-data-for)类似，但我已从所有站点（不包括 ASP.NET 应用程序）中删除了所有 Web.config 文件，但仍然出现错误。

这在 IIS6 上运行良好。

有任何想法吗？

# 设置

## 硬件

*   运行 Windows Server 2008 的两台 Web 服务器（Web1 和 Web2）
*   一台运行 Windows 2003 的文件服务器 (FileServer1)（不知道这是否有所不同）

## IIS

*   10 个在自己的应用程序池中运行的经典 ASP 网站。这些网站都有很多虚拟目录指向文件服务器上的位置
*   20 个网站仅重定向到上述 10 个网站之一
*   2 个位于经典 ASP 站点之一内的 ASP.NET 应用程序
*   每个经典 ASP 站点都有自己的应用程序池，在自定义用户帐户下运行`MYDOMAIN\MyIISUser`
*   ASP.NET 应用程序也有自己的应用程序池，并配置为在自定义用户帐户 MYDOMAIN\MyIISUser 下运行
*   20 个重定向网站在单个应用程序池下运行。
*   这些网站设置为使用共享配置。配置文件本地存储在每个 Web 服务器上，并使用 DFS 进行同步（我尝试将其放在 FileServer1 上，但遇到了与上述相同的问题，将其移动到 Web 服务器本地文件系统解决了问题 -**这可能很重要？**）。

## 文件服务器

*   所有网页内容都存储在文件服务器上`C:\Web`。这被设置为 UNC 驱动器，可通过地址从网络访问`\\FileServer1\Web`
*   我已将权限设置为允许`C:\Web`对`MYDOMAIN\MyIISUser`
*   有人告诉我，Web 内容*必须*存储在网络驱动器上，而不是拥有本地副本并使用 DFS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:35:18.467

听起来您的 ISAPI 模块在您的经典 ASP 站点上没有正确配置。

应禁用/禁止所有 .NET ISAPI 过滤器，并应启用经典 ASP 过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:00:09.060

事实证明文件服务器有问题。什么问题我不知道。创建新的群集 Windows Server 2008 文件服务器后，我无法重现该问题。

# java - 可以创建一个包含大量静态字段的常量类吗？

> ID：14255360
> 
> 赞同：4
> 
> 时间：2013-01-10T10:10:56.160
> 
> 标签：java, oop, class, constants

假设我有一个包含 200 多个静态字段的常量类：

```
class AnimalConstants {
  static final int AARDVARK = 1;
  static final int ANTELOPE = 2;
  static final int BEAR = 3;
  ...
  ...
  static final int ZEBRA = 200;
} 
```

*   任何人都可以解释使用这些类是否对性能和内存有任何**负面影响。**
*   如果将类更改为接口（例如 SwingConstants）并由某些类实现，是更好还是更糟？
*   如果我将常量实现为 Enum 类会更好还是更糟？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T10:15:07.877

我不认为影响是性能或内存。

我认为这与代码的可读性、保持常量接近使用它们的位置以及对问题的基本理解等有关。

我更喜欢在更接近使用它们的位置声明常量。我相信他们更容易理解这种方式。

**如果您声称 200+ 的实常数确实相关，我会感到惊讶。** 如果是，它们就属于一个地方。如果不是，我会说它们应该被分成更小的部分，并声明更接近它们的使用位置。

我敢打赌，如果知道的话，会有比您人为的示例更多的上下文来改变响应。

当然，枚举很棒。但先看看我的其他评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T10:18:33.760

> 如果将类更改为接口（例如 SwingConstants）并由某些类实现，是更好还是更糟？

--> 那将是一个[常量接口模式](http://en.wikipedia.org/wiki/Constant_interface)。如果我们将接口用于常量并且它由所有类实现，但如果您正在开发 API，则就像您在公开您的实现细节一样。上面的 wiki 链接很好地解释了这一点。

在这两种方法（接口或类）中，我建议使用最终类，创建常量并`static import`在必要时为常量做。

> 如果我将常量实现为 Enum 类会更好还是更糟？

--> 使用枚举，这将是最好的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T10:18:43.203

更改已编译到另一个类中的任何值可能需要完整构建。

附录：请参阅[*是否可以禁用 javac 的`static final`变量内联？*](https://stackoverflow.com/q/3524150/230513)进行更彻底的检查。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-10T10:13:49.103

当然`enum`实现比一堆`int`常量更笨重，但使用`enum`：

1.  您不需要硬编码以后可以更改的 Animals 的实际值（在您的情况下）
2.  你不需要硬编码动物的总数，你可以简单地遍历所有动物
3.  具有此枚举参数的方法将被正确理解（`foo(Animal animal)`优于`foo(int animal)`）
4.  您可以稍后为您的值添加其他功能`enum`，例如内部值`isMammal`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T10:19:18.537

是的，可以创建大量常量。很难讨论负面影响，因为我们不知道任何替代方案，因为我们没有您的功能要求。

但请放心，编译器是为与人类编写的代码一起工作而编写的。拥有一堆字段可能会没问题。

我觉得常量可以很好，因为从JDK7开始就可以在switch case中使用，您可以与==进行比较，并且变量名可以提供信息。

枚举可以更好吗？是的，它可以。探索枚举的特性，看看是否有什么对你有吸引力

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T10:18:09.940

对于您的 vars（动物类型），我建议您使用 Enumerator 而不是类。随着使用它的 var 数量，它不应该成为性能问题，因为您只使用 int 原语。如果任何 var 是一个类，那么就会出现问题，因为它们需要更多的内存来维护它们的结构。我希望能澄清你的疑问（抱歉英语不好，我有点生锈了）

# php - 将具有相同值的数组组合为一个键 - PHP

> ID：14255369
> 
> 赞同：1
> 
> 时间：2013-01-10T10:11:28.143
> 
> 标签：php, arrays, multidimensional-array

我有一个多维数组

```
Array(
[0] => Array
    (
        [category_id] => 1
        [question_id] => 1
        [option_id] => 2
        [title] => Do you wear glasses?
        [answer] => no
    )

[1] => Array
    (
        [category_id] => 1
        [question_id] => 2
        [option_id] => 3
        [title] => Your hobbies ?
        [answer] => movies
    )

[2] => Array
    (
        [category_id] => 1
        [question_id] => 4
        [option_id] => 8
        [title] => what is your status?
        [answer] => single
    )

[3] => Array
    (
        [category_id] => 1
        [question_id] => 2
        [option_id] => 1
        [title] => Your hobbies ?
        [answer] => travel
    )
) 
```

其中第二个和第四个数组包含相同的问题（相同的类别 id 和相同的问题 id）我想组合具有相同类别 id 和问题 id 的数组。

我期待的是这个

```
Array(
[0] => Array
    (
        [category_id] => 1
        [question_id] => 1
        [option_id] => 2
        [title] => Do you wear glasses?
        [answer] => no
    )

[1] => Array
    (
        [category_id] => 1
        [question_id] => 2
        [option_id] => 3
        [title] => Your hobbies ?
        [answer] => movies,travel
    )

[2] => Array
    (
        [category_id] => 1
        [question_id] => 4
        [option_id] => 8
        [title] => what is your status?
        [answer] => single
    )
) 
```

意味着只结合它的答案。请帮忙 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:43:19.683

我问订单是否重要的​​原因是，如果不重要，您可以先对数组进行排序，然后仅将每个数组与其前一个兄弟元素进行比较：

```
$source=array(array("cat_id"=>1,"ques_id"=>1,"opt_id"=>2,"title"=>"cid:1, qid:1, oid:2","answer"=>"whatever"),array("cat_id"=>1,"ques_id"=>2,"opt_id"=>3,"title"=>"cid:1, qid:2, oid:3","answer"=>"whatever"),array("cat_id"=>1,"ques_id"=>4,"opt_id"=>8,"title"=>"cid:1, qid:4, oid:8","answer"=>"whatever"),array("cat_id"=>1,"ques_id"=>2,"opt_id"=>1,"title"=>"cid:1, qid:2, oid:1","answer"=>"whtvr"));
print_r($source); // just to debug

usort($source,function($a,$b){
    if($a["cat_id"]<$b["cat_id"])
        return -1;
    elseif($a["cat_id"]>$b["cat_id"])
        return 1;
    elseif($a["ques_id"]<$b["ques_id"])
        return -1;
    elseif($a["ques_id"]>$b["ques_id"])
        return 1;
    elseif($a["opt_id"]<$b["opt_id"])
        return -1;
    elseif($a["opt_id"]>$b["opt_id"])
        return 1;
    else
        return 0;
});

$source=array_reduce($source,function(&$a,$b){
    if(empty($a))
    {
        $a=array($b);
    }
    else
    {
        $cache=array_pop($a);
        if($cache["cat_id"]==$b["cat_id"] && $cache["ques_id"]==$b["ques_id"])
        {
            $cache["answer"].=", ".$b["answer"];
            $a[]=$cache;
        }
        else
        {
            $a[]=$cache;
            $a[]=$b;
        }
    }
    return $a;
},array());
print_r($source); 
```

输出：

```
// first print_r
Array
(
    [0] => Array
        (
            [cat_id] => 1
            [ques_id] => 1
            [opt_id] => 2
            [title] => cid:1, qid:1, oid:2
            [answer] => whatever
        )

    [1] => Array
        (
            [cat_id] => 1
            [ques_id] => 2
            [opt_id] => 3
            [title] => cid:1, qid:2, oid:3
            [answer] => whatever
        )

    [2] => Array
        (
            [cat_id] => 1
            [ques_id] => 4
            [opt_id] => 8
            [title] => cid:1, qid:4, oid:8
            [answer] => whatever
        )

    [3] => Array
        (
            [cat_id] => 1
            [ques_id] => 2
            [opt_id] => 1
            [title] => cid:1, qid:2, oid:1
            [answer] => whtvr
        )

)
// second print_r
Array
(
    [0] => Array
        (
            [cat_id] => 1
            [ques_id] => 1
            [opt_id] => 2
            [title] => cid:1, qid:1, oid:2
            [answer] => whatever
        )

    [1] => Array
        (
            [cat_id] => 1
            [ques_id] => 2
            [opt_id] => 1
            [title] => cid:1, qid:2, oid:1
            [answer] => whtvr, whatever
        )

    [2] => Array
        (
            [cat_id] => 1
            [ques_id] => 4
            [opt_id] => 8
            [title] => cid:1, qid:4, oid:8
            [answer] => whatever
        )

) 
```

请注意，您在评论中说的`option_id`是无关紧要的，所以我没有替换它；`array_reduce`如果需要，您也可以在内部的匿名函数中替换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:06:08.907

```
$data = array();

//$new is the array in which you have data originally
foreach($new as $arrayK => $arrayV){
    if(!isset($data[$arrayV['category_id']][$arrayV['question_id']]))
        $data[$arrayV['category_id']][$arrayV['question_id']] = $arrayV;
    else{
        $option = $data[$arrayV['category_id']][$arrayV['question_id']]['option_id'] . ',' . $arrayV['option_id'];
        $data[$arrayV['category_id']][$arrayV['question_id']]['option_id'] = $option;

        $answer = $data[$arrayV['category_id']][$arrayV['question_id']]['answer'] . ',' . $arrayV['answer'];
        $data[$arrayV['category_id']][$arrayV['question_id']]['answer'] = $answer;
    }
} 
```

$data 将具有上述格式的所需数据
答案和选项都将用逗号分隔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:34:06.583

也许这样的事情可以工作，但不确定是否有更好的方法来做到这一点：

```
new_array=array();
foreach($source_array as $e){
     $insert=1;
     foreach($new_array as $n)
         if(array_search($e['title'], $n)==false){
              $n['answer'].=", ".$e['answer'];
              $insert=0;   
         }
     }
     if($insert){
         $new_array[]=$e;
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T10:40:26.397

对于示例数组

```
Array
(
[0] => Array
    (
        [category_id] => 1
        [question_id] => 1
    )

[1] => Array
    (
        [category_id] => 2
        [question_id] => 2
    )

[2] => Array
    (
        [category_id] => 1
        [question_id] => 1
    )

) 
```

你可以做这样的事情作为插图

```
// Define the array to work on
$array = array( array( 'category_id' => 1, 'question_id'=> 1), array( 'category_id' => 2, 'question_id' => 2),  array( 'category_id' => 1, 'question_id' => 1));

// Initialize the result array containing only unique question_id/category_id combinations
$unique_array = array();

foreach ($array as $key) {
    if (!count($unique_array)) {
        $unique_array[] = $key;
    } else {
        $unique = 1;
        foreach ($unique_array as $check) {
            if ( $check['category_id'] ==  $key['category_id'] && $check['question_id'] == $key['question_id'] ) {
                $unique = 0;
            }
        }
        if ( $unique ) {
            $unique_array[] = $key;
        }
    }
}

print_r($unique_array); 
```

最后一个 print_r 的输出将是

```
Array
(
[0] => Array
    (
        [category_id] => 1
        [question_id] => 1
    )

[1] => Array
    (
        [category_id] => 2
        [question_id] => 2
    )

) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T12:21:47.257

```
foreach($arr as $k=>$a)
{
    $common[$k] = search($arr,'category_id',$a['category_id'],'question_id',$a['question_id']);
    $answers = array_map(function($item) { return $item['answer']; }, $common[$k]);
    $options = array_map(function($item) { return $item['option_id']; }, $common[$k]);
    foreach($common[$k] as $temp)
    {
        $finalAns = $temp;
        $finalAns['answer'] = implode(",",$answers);
        $finalAns['option_id'] = implode(",",$options);
    }
    $final[] = $finalAns;
}

$final = array_map("unserialize", array_unique(array_map("serialize", $final)));
echo "<pre>";
print_r($final); 
```

把下面的函数放在你的通用函数文件或同一个文件中。

```
function search($array, $key, $value, $key1, $value1)
{
    $results = array();

    if (is_array($array))
    {
        if (isset($array[$key]) && $array[$key] == $value && isset($array[$key1]) && $array[$key1] == $value1)
        {
            $results[] = $array;
        }

        foreach ($array as $subarray)
            $results = array_merge($results, search($subarray, $key, $value,$key1,$value1));
    }

    return $results;
} 
```

你的输出将是

Array ( [0] => Array ( [category_id] => 1 [question_id] => 1 [option_id] => 2 [title] => 你戴眼镜吗？[answer] => 否 )

```
[1] => Array
    (
        [category_id] => 1
        [question_id] => 2
        [option_id] => 3,1
        [title] => Your hobbies ?
        [answer] => movies,travel
    )

[2] => Array
    (
        [category_id] => 1
        [question_id] => 4
        [option_id] => 8
        [title] => what is your status?
        [answer] => single
    ) 
```

)

# javascript - Facebook 应用程序未显示更新的权限

> ID：14255370
> 
> 赞同：1
> 
> 时间：2013-01-10T10:11:30.243
> 
> 标签：javascript, facebook, facebook-graph-api, permissions, facebook-javascript-sdk

我创建了一个具有以下权限的 facebook 应用程序： emailuser_birthday user_education_history user_hometownuser_likes friends_birthday friends_education_history friends_hometown friends_likes

当我单击预览登录对话框时，我看到：所有权限

但是当我通过我的 Javascript 代码访问应用程序时，

```
<html>
<body>
<div id="fb-root"></div>
<script>
 // Additional JS functions here

window.fbAsyncInit = function() {
FB.init({
  appId      : '483353595041064', // App ID
  channelUrl : 'channel.html', // Channel File
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true  // parse XFBML
 });

// Additional init code here
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    alert("Welcome");
  } else if (response.status === 'not_authorized') {
    login();
  } else {
    // not_logged_in
  }
 });

 };

 function login() {
FB.login(function(response) {
    if (response.authResponse) {
        // connected
        testAPI();
    } else {
        // cancelled
    }
});
}

 function testAPI() {
  console.log('Welcome!  Fetching your information.... ');
  FB.api('/me', function(response) {
    console.log('Good to see you, ' + response.name + '.');
  });
 }
// Load the SDK Asynchronously
 (function(d){
 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
 if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 js.src = "//connect.facebook.net/en_US/all.js";
 ref.parentNode.insertBefore(js, ref);
 }(document));
</script>
</body>
</html> 
```

我只能在获得许可的情况下看到基本信息：

为什么预览框中的权限不反映在实际登录框中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:22:28.393

这是因为您在登录时没有设置权限（在您的代码中）。试试这个-

```
FB.login(function(response) {
  if (response.authResponse) {
      // connected
      testAPI();
  } else {
      // cancelled
  }
},{scope:'email, etc...'}); 
```

# php - Mysql获取特定表的最后一个ID

> ID：14255373
> 
> 赞同：15
> 
> 时间：2013-01-10T10:11:36.850
> 
> 标签：php, mysql, sql, insert, last-insert-id

我必须从特定的插入表中获取最后一个插入 ID？。可以说我有这个代码：

```
INSERT INTO blahblah (test1, test 2) VALUES ('test1', 'test2');
INSERT INTO blahblah2 (test1, test 2) VALUES ('test1', 'test2');
INSERT INTO blahblah3 (test1, test 2, lastid) VALUES ('test1', 'test2', last id of blahblah); 
```

如何在表 blahblah3 中获取表 blahblah 的插入 ID？LAST_INSERT_ID() 只给你最后的插入 id

问候，西蒙 :)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-10T10:14:32.870

您可以使用[**LAST_INSERT_ID()**](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)函数。尝试这个：

```
INSERT INTO blahblah (test1, test2) VALUES ('test1', 'test2');

SELECT LAST_INSERT_ID() INTO @blahblah;

INSERT INTO blahblah2 (test1, test2) VALUES ('test1', 'test2');

INSERT INTO blahblah3 (test1, test2, lastid) VALUES ('test1', 'test2', @blahblah); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-10T10:13:35.873

这是你想要的？

```
SELECT id FROM blahblah ORDER BY id DESC LIMIT 1 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-10T10:23:09.743

If you want to do it in a single statement use:

```
INSERT INTO blahblah3 (test1, test2, lastid)
VALUES ('test1', 'test2', (select MAX(id) FROM blahblah)); 
```

This way you don't need to save any variables beforehand which assures you'll get the latest ID at that exact moment.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-10T10:15:55.573

您可以使用`mysql_insert_id();`函数来快速获得答案。

但是，如果您使用的是流量较大的网站，则存在准确结果的机会。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T10:14:15.703

您可以使用[**LAST_INSERT_ID()**](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)函数。

```
INSERT INTO blahblah (test1, test 2) VALUES ('test1', 'test2');
    //this query will return id. Save it in one variable

 select LAST_INSERT_ID() 
```

简而言之，将最后一个插入id保存在一个变量中，然后在blahblah3中使用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-07T16:34:18.970

您还可以在 codeigniter As 中通过查询找到最后一个 id

```
$this->db->order_by('column name',"desc");
   $this->db->limit(1);
 $id=  $this->db->get('table name'); 
```

# android - 使 onFling 和 onScroll 分别触发

> ID：14255374
> 
> 赞同：5
> 
> 时间：2013-01-10T10:11:39.437
> 
> 标签：android

我正在尝试编写一个检测和处理手势的程序。我设法使 onFling 和 onScroll 事件工作（这些事件在内部的侦听器类和 Activity 中实现）。但是，每次我滑动（onFling）时，onScroll() 函数中的代码也会被执行。例如：

```
@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY)
{
    //do something here, for example change background color to red
    return true;
}

@Override
public boolean onScroll (MotionEvent e1, MotionEvent e2, float distanceX, float distanceY)
{
    //do something, for example vibrate
    return true;                 
} 
```

在这种情况下，当我滚动设备时会振动，这没关系。但是当我滑动并执行 onFling 时，颜色会变为红色，但它也会振动，我不希望这样。

有什么办法可以防止这种情况发生，所以当滑动发生时，只有 onFling() 事件中的代码被执行，并且 onScroll() 仅在真正发生滚动时触发，或者如果不是使用 onScroll() 而是处理简单的手指移动和分别滑动手势？

编辑：我正在使用 GestureDetector 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:16:32.827

我猜你正在使用`GestureDetector`.

在它之前发生滚动时不会发生投掷，这就是为什么您`onScroll(...)`在`onFling(...)`. 当`onFling(...)`用户将手指从屏幕上抬起 ( `ACTION_UP`) 并产生足够的速度时调用。

# mysql - 年终数据翻转

> ID：14255376
> 
> 赞同：0
> 
> 时间：2013-01-10T10:11:42.387
> 
> 标签：mysql, database-design

我存档去年的表格并在每年年初创建一个新表格。我想找到一种方法来拥有一张多年表，这样我就不必每年手动更改任何内容。列是：行（唯一）、日期（主）、col1、col2、col3.. 用户将数据（每一列）输入到表单中。我想要一个“年”列，该列将从年（日期）中填充复合主键（行，年）。我还需要主键（行，年（日期））。所以每年我们都可以从第一行和新的一年开始。我什至查看并尝试了插入更新触发器，但我认为这不是答案。你怎么看？这是不是太模糊了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:49:43.660

我在我的一个 Firebird 数据库中做了类似的事情（你没有说你正在使用哪个数据库）。首先，你应该有一个自动生成的主键——这将使生活更简单。其次，您每年需要一台发电机 - 或一张每年有一个字段的表格。

在此模型中，您有一个包含两个字段的表：年份（主键）和“curvalue”。每年您都会插入一个新元组，例如 (2012,0) 或 (2013, 0)。您查询此表以查找给定年份的“curvalue”字段的当前值，然后增加 curvalue 字段并在您插入的元组中使用增加的值。

使用生成器可确保您始终收到唯一编号；如果一行开始该过程然后另一行到达，则使用我上面写的表可能会导致问题。

# java - 如何解决在 Java 中找不到符号？

> ID：14255381
> 
> 赞同：1
> 
> 时间：2013-01-10T10:11:56.187
> 
> 标签：java, linux

我正在使用 Java，以下是我的代码片段，

```
ProcessBuilder pb = new ProcessBuilder();
Map<String, String> envMap = pb.environment();
envMap.put("Dumyy", "myValue");
Process p = envMap.start(); 
```

上面我得到以下错误：

```
error: cannot find symbol Process p = envMap.start(); 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:16:13.777

`envMap`是一张地图，它没有方法`start`。您的代码应该是：

```
ProcessBuilder pb = new ProcessBuilder();
Map<String, String> envMap = pb.environment();
envMap.put("Dumyy", "myValue");
Process p = pb.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:14:50.483

您的类路径中可能没有该类。

另一个原因可能是您没有构建您的项目，并且您正在使用一个较旧的 .class 文件，该文件没有您需要的内容。

请注意：该类`Map`没有`start()`方法，因此即使您修复了符号问题，它也不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:16:07.067

您需要导入该类。但是……什么

> envMap.start()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T10:16:38.753

请按照 ProcessBuilder 文档中给出的示例- [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html) 在示例中，您没有将流程构建器的任何命令传递给开始。

# android - 无法解决此 logcat 错误以获取列表视图

> ID：14255383
> 
> 赞同：0
> 
> 时间：2013-01-10T10:11:59.283
> 
> 标签：android, android-asynctask, android-logcat

我正在尝试通过向服务器发出请求来获取列表。为此，我使用 asynctask 来处理它。代码是这样的。即使在进行了这么多[在线](https://stackoverflow.com/questions/10335718/using-asynctask-to-display-data-in-listview)实验之后，我仍然收到如下 logcat 错误。

```
import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.AlarmManager;
import android.app.ListActivity;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;

public class AndroidJSONParsingActivity extends ListActivity {

public static String url = "http://ensignweb.com/sandbox/app/comment11.php";

    // JSON Node names
    protected static final String TAG_PRODUCTS = "products";
    protected static final String TAG_CID = "cid";
    public static final String TAG_NAME = "name";

    // contacts JSONArray
    JSONArray products = null;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        new Message().execute(url);
        startService(new Intent(this, UpdateService.class));
        Intent intent = new Intent(this,UpdateService.class);
        PendingIntent pIntent = PendingIntent.getService(this, 0, intent, 0);
        AlarmManager alarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        alarm.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 30000, pIntent);

    }

@Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();

    }
    //Belongs to update service
    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
//      stopService(new Intent(this, UpdateService.class));
    }

    class Message extends AsyncTask<String, Integer, ArrayList<HashMap<String, String>> > {
        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

                @Override
            protected ArrayList<HashMap<String, String>> doInBackground(String... params) {

                    // Creating JSON Parser instance
                    JSONParser jParser = new JSONParser();

                    // getting JSON string from URL
                    JSONObject json = jParser.getJSONFromUrl(params[0]);

                    try {
                        // Getting Array of Contacts
                        products = json.getJSONArray(TAG_PRODUCTS);

                        // looping through All Contacts
                        for(int i = products.length()-1; i >=0; i--){
                            JSONObject c = products.getJSONObject(i);

                            // Storing each json item in variable
                            String cid = c.getString(TAG_CID);
                            String name = c.getString(TAG_NAME);
                            // creating new HashMap
                            HashMap<String, String> map = new HashMap<String, String>();

                            // adding each child node to HashMap key => value
                            map.put(TAG_CID, cid);
                            map.put(TAG_NAME, name);

                            // adding HashList to ArrayList
                            mylist.add(map);
                            Log.d("value", mylist.toString());
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                    return mylist;
                }

            @Override
            protected void onPostExecute(ArrayList<HashMap<String, String>> result) {
                ListAdapter adapter = new SimpleAdapter(AndroidJSONParsingActivity.this, result , R.layout.list_item,new String[] { TAG_NAME,}, new int[] {
                        R.id.name});
                AndroidJSONParsingActivity.this.setListAdapter(adapter);// If Activity extends ListActivity
                final ListView lv = getListView();
                lv.setTextFilterEnabled(true);

            }

    }
} 
```

JSONParser.java

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

logcat 显示此消息

```
 01-11 11:46:34.331: E/Buffer Error(483): Error converting result java.io.IOException: Attempted read on closed stream.
01-11 11:46:34.331: E/JSON Parser(483): Error parsing data org.json.JSONException: End of input at character 0 of 
01-11 11:46:34.331: W/dalvikvm(483): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
01-11 11:46:34.342: E/AndroidRuntime(483): FATAL EXCEPTION: AsyncTask #1
01-11 11:46:34.342: E/AndroidRuntime(483): java.lang.RuntimeException: An error occured while executing doInBackground()
01-11 11:46:34.342: E/AndroidRuntime(483):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
01-11 11:46:34.342: E/AndroidRuntime(483):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
01-11 11:46:34.342: E/AndroidRuntime(483):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
01-11 11:46:34.342: E/AndroidRuntime(483):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
01-11 11:46:34.342: E/AndroidRuntime(483):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-11 11:46:34.342: E/AndroidRuntime(483):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
01-11 11:46:34.342: E/AndroidRuntime(483):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
01-11 11:46:34.342: E/AndroidRuntime(483):  at java.lang.Thread.run(Thread.java:1096)
01-11 11:46:34.342: E/AndroidRuntime(483): Caused by: java.lang.NullPointerException
01-11 11:46:34.342: E/AndroidRuntime(483):  at com.androidhive.jsonparsing.AndroidJSONParsingActivity$Message.doInBackground(AndroidJSONParsingActivity.java:95)
01-11 11:46:34.342: E/AndroidRuntime(483):  at com.androidhive.jsonparsing.AndroidJSONParsingActivity$Message.doInBackground(AndroidJSONParsingActivity.java:1)
01-11 11:46:34.342: E/AndroidRuntime(483):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
01-11 11:46:34.342: E/AndroidRuntime(483):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-11 11:46:34.342: E/AndroidRuntime(483):  ... 4 more 
```

log.d "json string" 显示如下

```
01-11 12:43:29.891: D/json string(629): {"success":1,"products":[{"cid":"1","name":"bernard"},{"cid":"2","name":"Vijay"},{"cid":"3","name":"vikas_admin"},{"cid":"4","name":"vikas_admin"},{"cid":"5","name":"vikas_admin"},{"cid":"6","name":"vikas_admin"},{"cid":"7","name":"Vikas B L"},{"cid":"8","name":"chanakyavikas"},{"cid":"9","name":"vikram"},{"cid":"10","name":"Vidya"},{"cid":"11","name":"bernard"},{"cid":"12","name":"Thenewone"},{"cid":"13","name":"another"},{"cid":"14","name":"1245"},{"cid":"15","name":"kljdf.d,samfas"},{"cid":"16","name":"this"},{"cid":"17","name":"l;asdkfjalskjf"},{"cid":"18","name":"just got refreshed "},{"cid":"19","name":"not working"},{"cid":"20","name":"Checking"},{"cid":"21","name":"trying again"},{"cid":"22","name":"checking after few minutes"},{"cid":"23","name":"checking after many minutes"},{"cid":"24","name":"this one after 40 mintues"},{"cid":"25","name":"Let me try it once again. Even after this, it must run"},{"cid":"26","name":"Coming to track"},{"cid":"27","name":"let me check after 40 minutes"},{"cid":"28","name":"Ok. Let me give some time"},{"cid":"29","name":"let me check after lunch"},{"cid":"30","name":"checking after more than 2 hours"},{"cid":"31","name":"Now trying without icon. Lets see how it will gonna work"},{"cid":"32","name":"mic checking"},{"cid":"33","name":"check check check"},{"cid":"34","name":"check check again"},{"cid":"35","name":"Back to work"},{"cid":"36","name":"trying long long long time after"},{"cid":"37","name":"bye byeeeeeeeeeee"},{"cid":"38","name":"how is it going"},{"cid":"39","name":"Good morning Ensign"},{"cid":"40","name":"Trying AlarmManager"},{"cid":"41","name":"alarm! alarm! alarm!"},{"cid":"42","name":"Its been more than 30minutes"},{"cid":"43","name":"Let me see in the mobile about its working"},{"cid":"44","name":"How is it going"},{"cid":"45","name":"How is it going after many hours"},{"cid":"46","name":"huga huga huga"},{"cid":"47","name":"bye bye"},{"cid":"48","name":"It is now 7.47"},{"cid":"49","name":"Good morning Ensign"},{"cid":"50","name":"Once again good morning"},{"cid":"51","name":"Inside the office"},{"cid":"52","name":"Not working again"},{"cid":"53","name":"asdlkfjalsjfdl"},{"cid":"54","name":"Trying again and again"},{"cid":"55","name":"akl;sdjf;las"},{"cid":"56","name":"alarm! alarm! alarm!"},{"cid":"57","name":"adding boot complete"},{"cid":"58","name":"We are three now"},{"cid":"59","name":"check check again again"},{"cid":"60","name":"How is working now"},{"cid":"61","name":"Date is 10\/01\/2013"},{"cid":"62","name":"Now working fine"},{"cid":"63","name":"Had a good lunch"},{"cid":"64","name":"I'm with Mr. Johan "},{"cid":"65","name":"Let me check if booting works or not."},{"cid":"66","name":"checking after rebooting"},{"cid":"67","name":"Nop! rebooting not working"}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:31:12.813

利用

```
 dialog=ProgressDialog.show(AndroidJSONParsingActivity.this, 
                                      "Processing", "Please be patient"); 
```

代替

```
dialog.show(getApplicationContext(), "Processing", "Please be patient"); 
```

显示`ProgressDialog`从`AsyncTask`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:43:48.943

堆栈跟踪表明您正在尝试从已关闭的流中读取数据。这听起来就像您在关闭流后尝试从网络读取响应。从网络上读取 Json 时，请仔细检查这一点。

你也得到一个空指针。要找到这些，您应该能够在调试器中逐行浏览代码（如果在 for 循环中使用条件断点，否则调试起来会很糟糕）。乍一看，我会冒险猜测是以下行杀死了您

```
products = json.getJSONArray(TAG_PRODUCTS); 
```

我猜这是因为如果数据无法从网络返回，那么 json 对象将为空。

希望这有助于任何更多的问题让我知道

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:33:59.937

在显示警报的方法中使用**`this`**insteadOf`getApplicationContext``onPreExecute`

# c# - 从组合框中获取所选值的 ID

> ID：14255384
> 
> 赞同：1
> 
> 时间：2013-01-10T10:12:04.990
> 
> 标签：c#, combobox, sqlconnection

```
 private void frmNSS5_Load(object sender, System.EventArgs e)
    {
        SqlConnection con;
        SqlCommand cmd;
        SqlDataReader dr;
        con = new SqlConnection(@"workstation id = PC-PC; user id=sa;Password=sapassword; data source=pc-pc; persist security info=True; initial catalog=CleanPayrollTest2");
        cmd = new SqlCommand("SELECT IsNull(ArEmpName,'') + ' ' + IsNull(ArFatherName,'') + ' ' + IsNull(ArLastName,'') as EmpName, ID as ID FROM [Emp] ", con);
        try
        {
            con.Open();
            dr = cmd.ExecuteReader();
            DataSet ds = new DataSet();
            DataTable dt = new DataTable();
            this.cbEmpName.ValueMember = "ID".ToString();
            this.cbEmpName.DisplayMember = "EmpName";
            this.cbEmpName.DataSource = ds.Tables["EmpName"];
            while (dr.Read())
            {
                if(dr[0].ToString().Length > 0)
                {
                    this.cbEmpName.Items.Add(dr[0].ToString());
                }
            }
        con.Close();
        }
        catch
        {
            MessageBox.Show("Connection Failed");
        }

}
    private void comboEmpName_SelectedIndexChanged(object sender, System.EventArgs e)
    {

        MessageBox.Show("Emp ID:" + ' ' + this.cbEmpName.SelectedValue + ", " + "EmpName:" + ' ' + this.cbEmpName.SelectedItem   );
    } 
```

我在选择员工时没有得到 ID，消息框只显示我的名字......谁能告诉我我的错在哪里？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:16:08.837

在对组合框进行数据绑定后，您可以通过使用数据读取器插入值来删除绑定。只需删除这部分：

```
while (dr.Read())
{
    if(dr[0].ToString().Length > 0)
    {
        this.cbEmpName.Items.Add(dr[0].ToString());
    }
} 
```

如果要保留代码，则应更改添加项目的行，使其同时包含值和显示数据：

```
this.cbEmpName.Items.Add(
    new { EmpName = dr[0].ToString(), ID = dr[1].ToString()}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:20:20.530

试试这个

```
this.cbEmpName.Items.Add(new ListItem(dr[0].ToString(),dr[4].ToString())); 
```

# android - 声明 ImageButton 以在函数中使用

> ID：14255386
> 
> 赞同：0
> 
> 时间：2013-01-10T10:12:10.090
> 
> 标签：android, function, button

我正在编写一个谷歌地图应用程序，我正在尝试实现一个图像按钮，将地图类型从普通更改为混合。

我在 onCreate 实例中声明了我的按钮：

```
 ImageButton changeBtn =(ImageButton) findViewById(R.id.changeBtn);
    changeBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            changeMapType();
        }
    }); 
```

这是我的函数 changeMapType(); ：

```
 private void changeMapType(){
    if(MapTypeInt == 0){
        mMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);
        changeBtn.setBackgroundResource(R.drawable.satellite);
        MapTypeInt = 1;
    } else if (MapTypeInt == 1) {
        mMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
        changeBtn.setBackgroundResource(R.drawable.normal_map);
        MapTypeInt = 0;
    }
} 
```

现在问题是，我不能在 onCreate 实例之外使用 imageButton“changeBtn”，当我在程序代码的顶部声明按钮时，它会导致程序崩溃。有人对此有解决方案吗？

Logcat 在类级别声明时：

```
01-10 10:22:00.555: E/AndroidRuntime(2872): FATAL EXCEPTION: main
01-10 10:22:00.555: E/AndroidRuntime(2872): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.androidbasic12/com.example.androidbasic12.map}: java.lang.NullPointerException
01-10 10:22:00.555: E/AndroidRuntime(2872):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
01-10 10:22:00.555: E/AndroidRuntime(2872):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-10 10:22:00.555: E/AndroidRuntime(2872):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-10 10:22:00.555: E/AndroidRuntime(2872):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-10 10:22:00.555: E/AndroidRuntime(2872):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-10 10:22:00.555: E/AndroidRuntime(2872):     at android.os.Looper.loop(Looper.java:137)
01-10 10:22:00.555: E/AndroidRuntime(2872):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-10 10:22:00.555: E/AndroidRuntime(2872):     at java.lang.reflect.Method.invokeNative(Native Method)
01-10 10:22:00.555: E/AndroidRuntime(2872):     at java.lang.reflect.Method.invoke(Method.java:511)
01-10 10:22:00.555: E/AndroidRuntime(2872):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-10 10:22:00.555: E/AndroidRuntime(2872):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-10 10:22:00.555: E/AndroidRuntime(2872):     at dalvik.system.NativeStart.main(Native Method)
01-10 10:22:00.555: E/AndroidRuntime(2872): Caused by: java.lang.NullPointerException
01-10 10:22:00.555: E/AndroidRuntime(2872):     at android.app.Activity.findViewById(Activity.java:1839)
01-10 10:22:00.555: E/AndroidRuntime(2872):     at com.example.androidbasic12.map.<init>(map.java:24)
01-10 10:22:00.555: E/AndroidRuntime(2872):     at java.lang.Class.newInstanceImpl(Native Method)
01-10 10:22:00.555: E/AndroidRuntime(2872):     at java.lang.Class.newInstance(Class.java:1319)
01-10 10:22:00.555: E/AndroidRuntime(2872):     at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
01-10 10:22:00.555: E/AndroidRuntime(2872):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
01-10 10:22:00.555: E/AndroidRuntime(2872):     ... 11 more 
```

当我尝试在类级别声明它时的代码：

```
public class map extends FragmentActivity{
private static final LatLng SYDNEY = new LatLng(-33.88,151.21);
public static final LatLng sala = new LatLng(59.91602, 16.594108);
int travel = 0;
int MapTypeInt = 0;
private GoogleMap mMap;
GoogleMapOptions options = new GoogleMapOptions();
ImageButton changeBtn =(ImageButton) findViewById(R.id.changeBtn); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:16:18.797

如果在 onCreate 之外声明按钮，则无法分配它。您应该在 onCreate 中将其分配为：

```
changeBtn =(ImageButton) findViewById(R.id.changeBtn); 
```

然后你可以在函数中使用changeBtn。由于 findViewById 不能在 setContentView 之前使用。

# android - SQLite 是否支持 Alter with Modify 命令

> ID：14255400
> 
> 赞同：0
> 
> 时间：2013-01-10T10:12:46.630
> 
> 标签：android, sqlite, alter

我在我的项目中使用 Sqlite 作为数据库。我正在尝试将 Alter 与 modify 命令一起使用，但每次都失败。

```
switch (oldVersion) {
    case 1:
        db.execSQL("ALTER TABLE " + TABLE_NAME + " MODIFY "
                + MessageCountConstant.DATE + " INTEGER");
    default:
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);
    } 
```

我得到的错误日志：

```
01-10 14:51:56.242: E/Database(1279): Failure 1 (near "MODIFY": syntax error) on 0x3702c0 when preparing 'ALTER TABLE messageCount MODIFY date INTEGER'. 
```

谁能告诉我这个的原因以及正确的答案。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:38:55.440

要重命名您的表名，请使用，

```
alter table current_name rename to new_name; 
```

无法直接更改列数据类型，但您可以使用以下技巧，

```
create table if not exists new_table (id integer, name text )

insert into new_table select * from old_table

drop table old_table

alter table new_table rename to old_table 
```

上面的代码使用您想要的任何数据类型创建新表，然后从旧表中复制记录，然后删除旧表，最后，将新表重命名为旧表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T10:20:49.037

可以在这里看到[http://www.sqlite.org/lang_altertable.html](http://www.sqlite.org/lang_altertable.html) SQLite 不支持修改列类型。您可以删除表并重新创建它，或者转储数据库并手动更改列类型。（[这里](https://stackoverflow.com/questions/2685885/sqlite-modify-column)）

# java - 将布局转换为图像，如何具有良好的质量？

> ID：14255402
> 
> 赞同：0
> 
> 时间：2013-01-10T10:12:49.237
> 
> 标签：java, android, image-capture, image-compression

我在 Android 活动中有一个布局，我将其转换为图像，然后在不同的社交网络上分享。问题是质量根本不好，图像上有伪影，质量取决于屏幕的大小。

有什么办法可以提高质量吗？我无法将完整的布局图像作为静态图像存储在应用程序目录中，我需要在旅途中生成它。

这是我用来将布局转换为 PNG 的代码。

```
Bitmap bitmap = null;   
        try {
            bitmap = Bitmap.createBitmap(dashboardView.getWidth(),
                    dashboardView.getHeight(), Bitmap.Config.ARGB_4444);
            dashboardView.draw(new Canvas(bitmap));
        } catch (Exception e) {
            // Logger.e(e.toString());
        }

        FileOutputStream fileOutputStream = null;
        File path = Environment
                .getExternalStorageDirectory();
        File file = new File(path, "wayzupDashboard" + ".png");
        try {
            fileOutputStream = new FileOutputStream(file);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        BufferedOutputStream bos = new BufferedOutputStream(fileOutputStream);
        bitmap.compress(CompressFormat.PNG, 100, bos);
        try {
            bos.flush();
            bos.close();
            fileOutputStream.flush();
            fileOutputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

编辑：我的错，我离开了 ARGB_4444，事实上我在 SO 上发布问题之前做了很多测试，我只是忘了把 ARGB_8888 放进去。在小屏幕的 Android 手机上图像质量仍然很差。如果我能告诉在捕获布局时始终使用 HDPI drawable 就好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:22:06.647

ARGB_4444 means that you have only 4 bits per channel (a really poor quality).

Use ARGB_8888.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:21:17.960

you are using `Bitmap.Config.ARGB_4444`. I suggest you to use ARGB_8888, like Google [tells us](http://developer.android.com/reference/android/graphics/Bitmap.Config.html)

> `ARGB_4444` This field was deprecated in API level . Because of the poor quality of this configuration, it is advised to use `ARGB_8888` instead.

# batch-file - 从 WiX 打包的 .EXE 中获取参数

> ID：14255404
> 
> 赞同：0
> 
> 时间：2013-01-10T10:12:57.193
> 
> 标签：batch-file, wix, windows-installer, silent

[几天前，我问了一个类似的问题。](https://stackoverflow.com/questions/14237073/parameters-for-extracted-exe-setup)

我有一个应用程序`WiX (Windows Installer XML)`用作包管理器来创建一个`.exe`包含一些支持文件（文件夹和`.dlls`）的文件。双击`.exe`它将提取到一个新文件夹中，`Setup.exe`并将从该位置运行。我只是想知道我是否可以获取此参数`.exe`以及参数，`Setup.exe`以便我可以创建一个批处理文件以静默安装完整的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:30:34.050

不幸的是，如果不知道 Setup.exe 是用什么制作的，将会非常困难。对我来说，如果将 dll 放在它旁边，它听起来就像是一个普通程序。

但是，如果它是 Burn 创建的引导程序，您可以通过运行以下命令行来打开日志记录：

```
Setup.exe -log "%CD%\installLog.txt" 
```

您将能够通过查找类似于以下内容的行来查看正在设置的任何变量：

```
[2013-01-10T11:20:09]: Initializing string variable 'SqlServer' to value '(local)'
[2013-01-10T11:20:09]: Initializing string variable 'SqlInstance' to value 'SQLEXPRESS'
[2013-01-10T11:20:09]: Initializing string variable 'SqlAdminUser' to value 'sa'
[2013-01-10T11:20:09]: Initializing hidden variable 'SqlAdminUserPassword' 
```

# c# - 更新的属性未反映在屏幕上

> ID：14255405
> 
> 赞同：0
> 
> 时间：2013-01-10T10:12:58.110
> 
> 标签：c#, wpf, datagrid

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:50:48.413

Im not sure if this is any help but it seems using DataTables + DataRows may have caused issues with other people in the past.

[Have a look here](http://szymonrozga.net/blog/?p=228)

[and here](http://social.msdn.microsoft.com/Forums/en/wpf/thread/de2d7f68-3ca1-4712-80a3-aa94a14dad77)

# java - MapReduce 作业的 Reducer 中的奇怪行为

> ID：14255410
> 
> 赞同：2
> 
> 时间：2013-01-10T10:13:06.537
> 
> 标签：java, hadoop, mapreduce

以下是我在 MapReduce 作业中使用的 Reducer 函数的代码。它应该从附加到每个值的迭代器 + 自定义字符串（“ ** ---”）中返回值。*但相反，它两次附加自定义字符串。

例如，如果值是 abc 则代替打印

```
abc***--- 
```

正在打印

```
abc***---***--- 
```

为什么会这样？

编码：

```
public static class Reduce extends MapReduceBase implements Reducer<Text, Text, Text, Text> {

    public void reduce(Text key, Iterator<Text> values, OutputCollector<Text, Text> output, Reporter reporter) throws IOException {

        while (values.hasNext()) {

            Text t=values.next();
            String s = "***---";

            t.append(s.getBytes(), 0, s.length());

            output.collect(key, t); 

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:26:31.620

你是否也在使用你的 Reducer 类`Combiner`？如果是这样，Reducer 中的操作将应用两次：一次是在 Combine 阶段（在 Map 之后，在 shuffle/sort 之前），另一次是在 Reduce 阶段。

# android - Android OS 创建自定义 ROM 启动层

> ID：14255411
> 
> 赞同：0
> 
> 时间：2013-01-10T10:13:07.680
> 
> 标签：android

我是一名安卓爱好者。目前我正在开发一些与android OS相关的应用程序。我需要自定义我的设备，就像我需要在 ROM 引导层安装一些应用程序，如媒体播放器和日历本身，这样就没有人可以安装任何其他应用程序。我只是不知道如何进入它。建议？注释？请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:28:01.097

考虑访问xda 上[的 Android hacking & development 论坛](http://forum.xda-developers.com/forumdisplay.php?f=564)来询问此类问题。我不认为你会在这里得到合适的答案

# enums - C中枚举声明之间的区别？

> ID：14255415
> 
> 赞同：2
> 
> 时间：2013-01-10T10:13:11.997
> 
> 标签：enums, typedef

C 中的以下 2 个枚举声明有什么区别？

1.  `typedef enum colour { Red, Blue };`

2.  `typedef enum colour { Red,Blue }colour;`//在您的回复中，请将此颜色称为 colour2 以避免混淆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:30:56.917

在最简单的情况下，可以将枚举声明为

```
enum color {Red,Blue}; 
```

对此的任何引用都必须以 enum 关键字开头。例如：

```
enum color color_variable1;  // declare color_variable of type 'enum color'
enum color color_variable2; 
```

为了避免在任何地方都必须使用 enum 关键字，可以创建一个 typedef：

```
enum color {Red,Blue};
typedef enum color color2;  // declare 'color2' as a typedef for 'enum color' 
```

使用 typedef，现在可以将相同的变量 a 声明为

```
color2 color_variable3;
color2 color_variable4; 
```

仅供参考，C 中的结构也遵循类似的规则。typedef 还使您的代码在没有 C struct(enum) 关键字的情况下看起来更整洁。它还可以给出逻辑含义。

```
typedef int RADIUS;  // for a circle 
typedef int LENGTH;  // for a square maybe though both are int 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:23:36.730

我认为第一个根本不正确，您不需要`typedef`. 一个名字`enum`就够了；例子：

```
enum colour {
    Red, Blue
};

void myfunc(enum colour argument) {
    if (argument == Red) {
        // ...
    } else {
        // ...
    }
} 
```

这与您在定义命名时所做的相同`struct`。

第二个将定义一个 named`enum`并将自定义类型名称映射`colour`到该 named `enum`。您也可以`enum`匿名并只定义自定义类型名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T22:42:15.337

其实最简单的例子甚至不需要命名

```
enum{
    Red, //Implicitly 0
    Blue //Implicitly 1
}; 
```

完全可以接受。

这样做只是为了替换一堆#define 语句。您不想在需要枚举颜色的地方传递枚举形状值。

但是你可以在技术上使用它来代替整数，所以

```
int foo(int x){
    return x;}

int y = foo(Red); 
```

将返回 0

# android - NDEF 兼容 NFC 芯片

> ID：14255418
> 
> 赞同：1
> 
> 时间：2013-01-10T10:13:18.300
> 
> 标签：android, nfc

我正在寻找与 NDEF 兼容并受大多数运行 Android 4.x 的设备支持的 NFC 芯片，不知何故我只能找到很少的信息。有人可以命名制造商/芯片型号或提供一些有用的链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:00:29.753

有关概述，请参阅[https://stackoverflow.com/a/12129387/1202968 。](https://stackoverflow.com/a/12129387/1202968)Nexus 4 和 Nexus 10 不支持读取和写入 MIFARE Classic 芯片。

# xcode - 如何在不弄脏源代码树的情况下动态设置应用程序的内部版本号？

> ID：14255425
> 
> 赞同：5
> 
> 时间：2013-01-10T10:13:51.507
> 
> 标签：xcode, version-control

我正在使用 git-svn，我正在尝试将我的修订号嵌入到我的 iOS 应用程序中。目前，我有一个运行以下脚本的构建阶段：

```
SVN_REVISION=$(git svn find-rev HEAD)
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $SVN_REVISION" "$INFOPLIST_FILE" 
```

问题在于，由于 repo 总是包含*以前*的版本，脚本总是让我的 Info.plist 变脏。

我是否可以在不弄脏源代码树的情况下动态设置应用程序的内部版本号？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T13:53:38.903

1) 为您的“聚合”类型的项目添加一个新目标，例如，您可以将其命名为“更新 Info.plist Prefix Header”；只需在对话框中将其用作“产品名称”。

2) 使用以下源代码向这个新目标添加一个运行脚本构建阶段：

```
#!/bin/sh
SVN_REVISION=$(git svn find-rev HEAD)
echo "#define SVN_REVISION $SVN_REVISION" > "$SCRIPT_OUTPUT_FILE_0" 
```

3) 将输出文件添加到您的脚本中，为其命名

```
$(CONFIGURATION_TEMP_DIR)/InfoPlist.pch 
```

4) 打开 iOS 应用程序的构建阶段。

5）将您之前创建的聚合目标添加为依赖目标（将其添加到“目标依赖项”）。这意味着 Xcode 将始终先构建此目标，然后再构建您的 iOS 目标。

6) 打开 iOS 应用程序的构建设置。

7）搜索设置“Info.plist Preprocessor Prefix File”并将其更改为与步骤（3）中用于输出文件的值完全相同的值。

8) 搜索设置“Preprocess Info.plist File”并确保它已启用。

9) 打开您当前的 Info.plist 文件并将 CFBundleVersion 的值更改为`SVN_REVISION`. **不要使用**$(SVN_REVISION) 或 ${SVN_REVISION}；这不是构建设置或环境变量替换，这是预处理器替换，所以只需使用 SVN_REVISION。

就是这样。每次构建 iOS 应用时，Xcode 首先构建聚合目标，它会更新 PCH 文件，当它构建 iOS 应用时，它会通过 C 预处理器运行 Info.plist 文件（使用 PCH 文件作为前缀header) 在将其复制到您的应用程序之前。预处理器将替换 SVN_REVISION，因为它在您的 PCH 文件中定义为宏。

**重要笔记**

有些人可能认为使用`$(DERIVED_FILE_DIR)`而不是`$(CONFIGURATION_TEMP_DIR)`. 好吧，理论上他们是对的，但实际上只有一个问题：每个目标的派生文件目录不同，而配置临时目录是相同的（只是每个构建配置不同）。使用派生文件目录时，PCH 文件被写入聚合目标的派生文件目录，但在构建 iOS 应用程序时，Xcode 会在 iOS 应用程序的派生文件目录中搜索此文件，因此找不到文件。

有些人可能还认为将更新前缀标头的运行脚本阶段添加为 iOS 应用程序的第一个构建阶段而不是为其创建单独的目标是一个更好的主意（这也将解决提到的派生文件目录问题多于）。再一次，理论上的好主意，但在实践中不能工作：如果请求预处理，Info.plist 在第一个脚本阶段甚至执行之前被预处理，所以如果 PCH 文件不存在或尚未更新，要么构建因错误而终止，或者将过时的 SVN 修订版写入 plist 文件。这就是为什么您需要一个单独的目标来保证在您的实际目标之前构建此任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-30T11:08:28.340

Mecki感谢您的出色回答！我应用相同的概念来设置版本时间戳和构建的当前 git SHA。仅供参考，我只是遇到了一个小问题。似乎，至少在 Xcode 5 中，如果您指定一个输出文件，脚本步骤会将其用作缓存，因此无论我对实际应用程序代码所做的更改，脚本报告它已经运行但值不是当前的...我不得不将输出文件声明移动到脚本本身来解决问题，即添加

```
SCRIPT_OUTPUT_FILE_0="$CONFIGURATION_TEMP_DIR/InfoPlist.pch" 
```

到我脚本的顶部。此外，还应该触摸原始 plist，以便构建步骤复制新值，所以我还添加了

```
`touch $SCRIPT_INPUT_FILE_0` 
```

在上一个输出文件声明之后。此触摸操作不会使 git 将更改检测为可提交。

干杯

# android - 在带有 jquery 移动网络的滚动视图中使用 android webview 的空白

> ID：14255427
> 
> 赞同：4
> 
> 时间：2013-01-10T10:14:00.790
> 
> 标签：android, webview, scrollview, space

我正在尝试在我的 Android 应用程序布局的滚动视图中使用 webview。（也有一个tabhost，但这并不重要）

是这样的：

```
<ScrollView 
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"      
    >

   <LinearLayout 
            android:id="@+id/ll1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical">                     

       <WebView 
        android:id="@+id/webview1"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:scrollbars="none"   
    />

   </LinearLayout>
</ScrollView> 
```

问题是，当我尝试在我的 webview 上加载使用 jquery mobile 制作的 url 时，它开始增长到无限，在 web 内容下方有一个非常巨大的空白，并且线性布局和滚动视图也开始增长。有人有什么解决办法吗？

解决方案不是：

*   在 xml 布局上更改任何布局参数，例如 layout_with 或 layout_height。
*   我必须在滚动视图中使用 webview，因为我必须滚动很多其他的东西，所以这是不可能的。
*   我真的知道这个问题只出现在 jquery mobile 上。我试图从 de web 中删除 de jquery mobile js 文件，它很完美。
*   另外，我知道如果我在不在滚动视图内的 webview 上加载这个 url，没有任何问题，所以问题是滚动视图、webview 和 jquery mobile 的组合。

非常感谢！！！

# installation - Netbeans 平台安装程序可以在没有管理员权限的情况下运行吗？

> ID：14255430
> 
> 赞同：1
> 
> 时间：2013-01-10T10:14:11.357
> 
> 标签：installation, netbeans-platform, admin-rights

我已经将一个基于 netbeans 平台的应用程序（包括一个 jre，感谢 geertjan！）与神话般的 netbeans 安装程序捆绑在一起。

当我在 Windows 上运行安装程序时（在 7 上测试过），系统要求我提供管理员权限。我的一些用户没有这样的权利，我被卡住了吗？:(

这是否可以在没有管理员权限的情况下运行安装程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T21:32:15.577

您可以将您的 netbeans 平台项目移至 maven，您会发现 maven 会将您的构建打包成一个有用的自包含 zip 文件。您的用户将能够在任何地方解压缩 zip 文件，解压缩后的 bin 文件夹中将有一个适用于您的应用程序的 exe 文件。

# nservicebus - 当队列不存在时，NServiceBus 3.3.3 不会抛出异常

> ID：14255433
> 
> 赞同：0
> 
> 时间：2013-01-10T10:14:13.263
> 
> 标签：nservicebus

我在将大型项目从 NServiceBus 3.0.3 迁移到 3.3.3 时遇到问题。问题是：我们有很多测试，如果目标队列不存在，则期望抛出异常。这对于 3.0.3 来说是正确的，但是，在 3.3.3 中，消息只需进入“事务性死信消息”队列，而不会引发异常。我试图在 NServiceBus github 中搜索并调试它的代码，但仍然无法获得导致此行为的更改。

有没有办法配置新的 NServiceBus 客户端，以便在目标队列不存在时仍然抛出 QueueNotFoundException ？

**UPD：**在调试 NServiceBus 代码时，我发现它以某种方式捕获了 System.Messaging.dll 中引发的异常。我真的不知道这是在哪里发生的，因为 dll 似乎已经过优化，而且我无法在很多地方设置断点，但如果我启用“Break on CLR Exceptions”，我可以看到它确实发生了。

# java - 试图在jena api中找到RDFNode对象的父类

> ID：14255439
> 
> 赞同：1
> 
> 时间：2013-01-10T10:14:22.607
> 
> 标签：java, class, jena, ontology

我正在使用 Jena java api 在本体中进行搜索，并且使用命令

`Property predicate=model.getProperty("propertyURL"); NodeIterator objects = model.listObjectsOfProperty(predicate);`

查找特定属性的所有实例，`model`加载本体文件的 OntModel 在哪里。

现在，我需要找到这些实例所属的父节点/类。由于对象是 RDFNodes，我尝试了方法`RDFNode.getClass()`，但它只是返回 `class com.hp.hpl.jena.rdf.model.impl.ResourceImpl`，这不是我需要的。

我需要类似的东西`Individual.getOntClass()`。我还尝试将 RDFNode 对象转换为 Individuals，然后使用此函数，但在这种情况下，似乎在此转换过程中没有保存该类，因为它返回了 #Thing 类（这是最重要的一个）。

关于如何获得对象类别的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:01:46.303

在没有看到数据的情况下很难知道这是否回答了您的问题，但可能有一个简单的解释。

在 OWL 和 RDF 中，一个类只是一组资源（例如`:Cat`，是所有猫`:Tabby`的集合，是所有具有虎斑颜色的事物的集合），一个资源可以是许多集合的成员（虎斑猫是这两个示例集的成员）。这在实践中意味着一个资源*可能*具有并且在实践中通常*确实*具有多个`rdf:type`. 该方法`OntResource.getRDFType()`仅返回一个表示类的资源，因此对于具有多种类型的资源，`getRDFType`只会选择它找到的第一个。作为程序员，您无法控制选择哪一个，并且无法保证每次都会得到相同的（简要技术解释：这取决于您使用的任何三重存储中的索引行为）时间）。但是，如果您想知道资源所属的*所有*类，而不仅仅是其中的某个类，请使用`OntResource.listRDFTypes()`，这将为您提供所有这些类的迭代器。

# r - 向 ecdf 生成的绘图添加网格，使其位于图形曲线的后面

> ID：14255444
> 
> 赞同：0
> 
> 时间：2013-01-10T10:14:30.863
> 
> 标签：r

我正在使用以下代码生成 ecdf 图：

```
plot(xlim=c(0,100), ylim=c(0,1), main=NULL, xaxs="i", yaxs="i", ecdf(PrecentageVector), col="red", do.p = FALSE, pch=19, lwd=3)
grid() 
```

结果是在曲线上绘制了网格线。如果我切换顺序，则根本看不到网格线。我希望在曲线后面绘制网格线。这怎么可能实现？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T11:17:43.673

您还可以`panel.first`在函数中使用参数`plot`：

```
plot(xlim=c(0,100), ylim=c(0,1), main=NULL, xaxs="i", yaxs="i",
  ecdf(PrecentageVector), col="red", do.p = FALSE, pch=19, lwd=3,
  panel.first = grid()) 
```

# android - 在 actionbar-sherlock 中自定义主题不起作用

> ID：14255446
> 
> 赞同：4
> 
> 时间：2013-01-10T10:14:33.807
> 
> 标签：android, actionbarsherlock

我知道关于 actionbar-sherlock 的自定义主题有各种各样的问题。我也尝试接受的答案，但没有任何改变。这是我的主题：

```
<resources>

    <style name="Theme.Styled" parent="Theme.Sherlock.Light.DarkActionBar">
        <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
        <item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item>
    </style>

    <style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
        <item name="background">@drawable/actionbar_background</item>
        <item name="android:background">@drawable/actionbar_background</item>
        <item name="backgroundSplit">@drawable/actionbar_background</item>
        <item name="android:backgroundSplit">@drawable/actionbar_background</item>
    </style>

</resources> 
```

这是我的活动声明：

```
 <activity
            android:name="com.ihnel.tinyapp.xskt.Home"
            android:theme="@style/Theme.Styled"
            android:configChanges="orientation|keyboard" /> 
```

我的应用程序将在 android 2.1+ 上运行，因此我将 android 版本声明为：

```
 <uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="17" /> 
```

我想为 actionbar sherlock 设置新背景以及标题的新文本字体，但我不能。请告诉我我的错误在哪里使这项工作有效。

更新：Java 源我用户覆盖操作栏样式：

```
 requestWindowFeature(Window.FEATURE_ACTION_BAR_OVERLAY); 
```

这是添加菜单项的代码：

```
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
    menu.add("Search")
            .setIcon(R.drawable.ic_action_search)
            .setActionView(R.layout.search_edittext)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);
    SubMenu sub = menu.addSubMenu("Theme");
    sub.add(0, R.style.Theme_Sherlock, 0, "Default");
    sub.add(0, R.style.Theme_Sherlock_Light, 0, "Light");
    sub.add(0, R.style.Theme_Sherlock_Light_DarkActionBar, 0, "Light (Dark Action Bar)");
    sub.getItem().setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

    return true;
}; 
```

谢谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:56:19.720

`oncreate()`在您的活动中的方法中添加此代码

```
getSupportActionBar().setBackgroundDrawable(getResources().getDrawable(R.drawable.actionbar_background)); 
```

它会解决这个问题。

# java - 从 java 代码设置 SecurityManager 权限

> ID：14255447
> 
> 赞同：0
> 
> 时间：2013-01-10T10:14:35.750
> 
> 标签：java, security, applet, socketexception, policyfiles

我正在运行一个执行 Socket 连接的 Applet 我得到了异常 `java.security.AccessControlException: access denied (java.net.SocketPermission xxx.xxx.xxx.xxx:80 connect,resolve)` 我用谷歌搜索发现这是因为 Java 的安全管理器所以我添加了

```
grant{    
    java.net.SocketPermission xxx.xxx.xxx.xxx:80 "connect";
    java.net.SocketPermission xxx.xxx.xxx.xxx:80 "resolve";
} 
```

在 C:\Program Files\Java\jre6\lib\security 的 java.policy 中使用 policytool.exe 成功工作

但我希望以编程方式完成，所以我做了以下

```
AccessController.doPrivileged(new PrivilegedExceptionAction() { public Object run() throws Exception {                                                                         
       socketchannel1 = SocketChannel.open();
       socketchannel1.connect( new InetSocketAddress( xxx.xxx.xxx.xxx, 80 ) );
return null;} });} 
```

在这里我告诉securityManager不要触摸运行中的代码这也成功但是现在我想知道是否有任何其他方法可以专门添加SocketPermission进行连接，使用Policy.setpolicy或类似setpermission或修改高于自身。提前致谢

# javascript - 带有两个输入字段的 HTML 表单

> ID：14255448
> 
> 赞同：0
> 
> 时间：2013-01-10T10:14:41.337
> 
> 标签：javascript, variables

我需要你的帮助。我有一个`HTML`包含 2 个`input`字段的表单，它使用变量中的 java 脚本函数`var1`并`var2`生成变量`var3`。返回此变量`var3`。在 IE 中它可以工作，但仅在兼容性视图中。有人有想法吗？这是使用的代码：

```
<script type="text/javascript">
function sucheingabe() {    
var val1 = document.getElementById("searchword-1").value;
var val2 = document.getElementById("searchword-2").value;
var val3 = (val1) + ('+') + (val2)
// alert (val3);
document.getElementById('searchword').value = val3;
}
</script>

<form class="search" action="index.php" enctype="application/x-www-form-urlencoded"     method="post">
<table style="width: 80%;" border="0" cellspacing="0" cellpadding="0" bordercolor="#111111">
<tbody>
<tr>
<td width="5%"> </td>
<td width="15%">
<div id="searchWhat">
<p class="topHeaders"><strong>Was</strong> <span style="font-size: xx-small;">(Jobtitel oder Firmenname)</span></p>
<input id="searchword-1" class="inputbox" alt="&gt;" maxlength="45" name="searchword-1" size="40" type="text" /></div>
</td>
<td width="5%"> </td>
<td width="15%">
<div id="searchWhere">
<p class="topHeaders"><strong>Wo</strong> <span style="font-size: xx-small;">(Ort oder Postleitzahl)</span></p>
<input id="searchword-2" class="inputbox" alt="&gt;" maxlength="45" name="searchword-2" size="40" type="text" /></div>
</td>
<td width="4%"><input onclick="sucheingabe();" name="Search" src="images/suchbutton.png" type="image" /> <input name="searchword" type="hidden" /> <input name="searchphrase" type="hidden" value="any" /> <input name="option" type="hidden" value="com_search" /> <input name="areas[0]" type="hidden" value="seminar" /></td>
</tr>
</tbody>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:19:17.690

试试你的javascript，如下所示，我希望这对你有用

```
<script type="text/javascript">
function sucheingabe() {    
var val1 = document.getElementById('<%= searchword-1.ClientID %>').value;
var val2 = document.getElementById('<%= searchword-2.ClientID %>').value;
var val3 = (val1) + ('+') + (val2)
// alert (val3);
document.getElementById('<%= searchword.ClientID %>').value = val3;
}
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-10T10:21:25.587

您没有 id 为 searchword 的元素。接下来你应该做：

```
<input name="searchword" id = "searchword" type="hidden" /> 
```

# java - Java 类：如何检查兼容性以避免运行时的类加载/兼容性问题

> ID：14255452
> 
> 赞同：1
> 
> 时间：2013-01-10T10:14:47.120
> 
> 标签：java

我有一个基于 Ant 的构建系统，我想我可能会编写一个 python 脚本来测试目录层次结构中的所有编译/jarred 类，以避免在编译时与运行时使用不同版本可能出现的问题。

天真地，该脚本最初检查了在各种**jar**、**war**和**ear文件中找到的所有类的****sha256**哈希，如果发现相同的类具有不同的哈希，则会抱怨。然而，这会产生太多的误报。

 ******例如，类**org.apache.commons.collections.FastHashMap**在**commons-beanutils-1.8.0.jar**和**commons-collections-2.1.1.jar**中都有不同的哈希值。显然这个标准太严格了。然而，最后，我可以产生相同哈希的唯一方法是执行以下操作：

```
javap commons-beanutils-1.8.0.jar.exploded/org/apache/commons/collections/FastHashMap.class | sort | grep -v Compiled\ from\ |  sha256sum -
javap commons-collections-2.1.1.jar.exploded/org/apache/commons/collections/FastHashMap.class | sort | grep -v Compiled\ from\ |  sha256sum - 
```

这些确实是一样的，但是这个（尤其是*grep -v*和*sort*）非常不令人满意。是否有更好的方法来测试目录层次结构中的所有类是否兼容以避免意外的运行时问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:19:04.060

我建议您在将应用程序部署到生产环境之前对其进行测试。如果有任何你认为不需要的库，你应该删除它们或者你应该测试它们。

您不应该在生产中运行一个您以前从未使用过的库，即使在开发中也是如此。

这将最大限度地减少生产中可能发生的各种问题。******

# qt - 为什么样式化 QT 小部件会使它们超出大小值？

> ID：14255458
> 
> 赞同：0
> 
> 时间：2013-01-10T10:15:10.483
> 
> 标签：qt, resize, size, qtstylesheets

自从我开始在 QT 上使用样式表以来，这是我一直在努力解决的问题。

我有这种风格：

```
QPushButton#btnNewCamera
{
    border-radius: 5px;
    min-width: 20px;
    min-height: 20px;
    background-position: center;
    background-repeat: no-repeat;
} 
```

这是我必须设置才能使其工作的代码。

```
createNewCameraBtn = new QPushButton();
createNewCameraBtn->setObjectName( tr("btnNewCamera") );      
createNewCameraBtn->setSizePolicy(QSizePolicy::Fixed,QSizePolicy::Fixed);
createNewCameraBtn->setFixedWidth(20); 
```

是否有意义？。告诉大小两次？此按钮的大小始终相同。如果我将固定大小设置为小于 20，它无论如何都可以工作（因为它保持样式表的最小大小......所以这让我猜想样式表大小是优先的......）

但是为什么不直接告诉样式表中的大小。为什么要添加其他行？

有人可以解释一下这会发生什么吗？为什么要在 styletheet 上使用 min-width 以使其工作？为什么不给它有关背景的信息，让它像旧式按钮一样工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:20:38.643

样式表将更改您的小部件属性，因此无需在代码和样式表中更改相同的内容。如果要使用 CSS 使小部件固定大小，则需要设置最小和最大尺寸。否则小部件可能会调整大小。尝试将所有样式的东西放在一个地方以保持一切清晰，因为有时属性会与代码和 CSS 中的属性混淆。

请记住，属性将按照应用的顺序进行更改。因此，如果您首先在应用程序上应用 CSS，然后更改代码中的属性，则属性将保留代码中的值。如果您在代码中更改属性然后应用 CSS，CSS 值将被保留

# java - 在java中附加到xml文件中

> ID：14255462
> 
> 赞同：1
> 
> 时间：2013-01-10T10:15:29.193
> 
> 标签：java, xml, jaxb

```
File file = new File("E:\\file.xml");

JAXBContext jaxbContext = JAXBContext.newInstance(Customer.class);

Marshaller jaxbMarshaller = jaxbContext.createMarshaller(); 

jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

jaxbMarshaller.marshal(customer, file);     

jaxbMarshaller.marshal(customer, System.out); 
```

我可以创建文件，但下次想要追加到 xml 中而不是创建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:28:07.373

它不会以这种方式工作。您必须创建客户类

```
@XmlRootElement
class Customers {
   @XmlElement(name="customer")
   List<Customer> customers;
} 
```

每次您想要添加客户时，您需要解组customers.xml，将新客户添加到客户列表并再次将客户编组到customers.xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:19:43.463

此 java 代码用于将新节点附加到 xml 文件......它基于 DOM

```
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import java.io.FileOutputStream;
public class writexml1 {

public static void main (String args[]) 
{

File docFile = new File("..\\jquery\\WebContent\\demo\\testing.xml");

Document doc = null;
try 
{
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
doc = db.parse(docFile);
} 
catch (java.io.IOException e) 
{
System.out.println("Can't find the file");
} 
catch (Exception e) 
{
System.out.print("Problem parsing the file.");
}

Element root = doc.getDocumentElement();

System.out.println("The root element is " + root.getNodeName() + ".\n");

NodeList children = root.getChildNodes();
System.out.print("There are "+children.getLength()+" child elements.\n");
System.out.print("They are: \n");

//Print the file 
for (Node child = root.getFirstChild();child != null;child = child.getNextSibling())
{
if (child.getNodeType() == child.TEXT_NODE)
{
System.out.println("Text: "+child.getNodeValue());
} 
else if (child.getNodeType() == child.ELEMENT_NODE) 
{
System.out.println(child.getNodeName()+" = "+child.getFirstChild().getNodeValue());
}
}

//NodeList deleteElement = root.getElementsByTagName("staff");

//Node deleteNode= deleteElement.item(0);

//root.removeChild(deleteNode); 
Element staffElement = doc.createElement("staff");

Node updateText = doc.createTextNode("");
staffElement.appendChild(updateText);
//
Element firstName = doc.createElement("firstname");
String str_firstName="added firstname";
Node firstNameNode = doc.createTextNode(str_firstName);
firstName.appendChild(firstNameNode);

staffElement.appendChild(firstName);

//

Element lastName = doc.createElement("lastname");
String str_lastName="added lastname";
Node lastNameNode = doc.createTextNode(str_lastName);
lastName.appendChild(lastNameNode);

staffElement.appendChild(lastName);

//
Element nickName = doc.createElement("nickname");
String str_nickName="added nickname";
Node nickNameNode = doc.createTextNode(str_nickName);
nickName.appendChild(nickNameNode);

staffElement.appendChild(nickName);

//
Element salary = doc.createElement("salary");
String str_salary="$10,000";
Node salaryNode = doc.createTextNode(str_salary);
salary.appendChild(salaryNode);

staffElement.appendChild(salary);

//
root.appendChild(staffElement);

//Node StaffNode=(Node)updateElement;

try{
String outputURL = "..\\jquery\\WebContent\\demo\\testing.xml";

DOMSource source = new DOMSource(doc);
StreamResult result = new StreamResult(new FileOutputStream(outputURL));

TransformerFactory transFactory = TransformerFactory.newInstance();
Transformer transformer = transFactory.newTransformer();

transformer.transform(source, result);

} catch (Exception e) {
e.printStackTrace();
}

}   
   } 
```

**或者**

您应该查看 JAXB API。如果我理解正确，你的 xml 看起来像这样：

```
<B>
    <C>11</C>
    <D>21</D>
    <E>31</E>
</B> 
```

所以代码是：

```
import javax.xml.bind.JAXBContext;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAccessType;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class B {
    @XmlElement public String C; // sloppy, probably should be type Integer or something
    @XmlElement public String D;
    @XmlElement public String E;
}

// then, somewhere else in your code you want to serialize...
B b = new B();
b.C = "11";
b.D = "21";
b.E = "31";

JAXBContext c = JAXBContext.newInstance(B.class);

// where w is a Writer instance
c.createMarshaller().marshal(b, w); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:22:37.213

有一个[版本](http://docs.oracle.com/javaee/5/api/javax/xml/bind/Marshaller.html#marshal%28java.lang.Object,%20java.io.Writer%29)需要. 看看[这个](https://stackoverflow.com/questions/1625234/how-to-append-text-to-an-existing-file-in-java)线程，创建一个 FileWriter 并使用它。`marshall``Writer`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-10T10:21:12.667

我认为代码`new FileWriter(file, true)`将帮助您将数据附加到现有文件中。

# asp.net-mvc - 如何为我的表头使用 Display 属性的 ShortName 属性>

> ID：14255463
> 
> 赞同：4
> 
> 时间：2013-01-10T10:15:42.783
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我看到`DisplayAttribute`有一个`ShortName`属性，但我没有看到`Html.ShortName`帮助。我怎样才能为我的表格列标题使用这个短名称？我必须编写自己的助手吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T10:39:26.197

您可以编写自己的助手：

就像是

```
public static IHtmlString ShortLabelFor<TModel, TValue>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TValue>> expression) {
   var metadata = ModelMetadata.FromLambdaExpression(expression, helper.ViewData);
   var content = metadata.ShortDisplayName?? metadata.DisplayName ?? /*something else*/ ?? string.Empty;
   return new HtmlString(content);
} 
```

但是，来自[msdn](http://msdn.microsoft.com/en-us/library/system.web.mvc.modelmetadata.shortdisplayname%28v=vs.100%29.aspx)：

> 短显示名称可用于工具提示或其他显示上下文中，例如完整显示名称可能不适合的表格列表视图的标题。例如，在 MVC 中，此名称用于列不够宽以显示完整字段名称的表中。如果此字段为空，则应使用 DisplayName。

所以看起来它应该是自动的（当没有足够的空间时），但是......这里未经测试。听起来它应该以这种方式与@Html.LabelFor 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-16T00:08:19.713

对我来说，接受的答案没有多大帮助，因为我的视图模型被定义为 IEnumerable：

```
@model IEnumerable<Document> 
```

所以我需要现有扩展方法的 DisplayShortNameFor 版本：

```
public static MvcHtmlString DisplayNameFor<TModel, TValue>(this HtmlHelper<IEnumerable<TModel>> html, Expression<Func<TModel, TValue>> expression); 
```

我在[这里](https://gist.github.com/odrix/4960693)找到了一个：

```
public static string DisplayShortNameFor<TModel, TValue>(this global::System.Web.Mvc.HtmlHelper<global::System.Collections.Generic.IEnumerable<TModel>> t, global::System.Linq.Expressions.Expression<global::System.Func<TModel,TValue>> exp)
{
    CustomAttributeNamedArgument? DisplayName = null;
    var prop = exp.Body as MemberExpression;
    if (prop != null)
    {
        var DisplayAttrib = (from c in prop.Member.GetCustomAttributesData()
                             where c.AttributeType == typeof(DisplayAttribute)
                             select c).FirstOrDefault();
        if(DisplayAttrib != null)
            DisplayName = DisplayAttrib.NamedArguments.Where(d => d.MemberName == "ShortName").FirstOrDefault();
    }
    return DisplayName.HasValue ? DisplayName.Value.TypedValue.Value.ToString() : "";
} 
```

不确定这是否是最好的方法，但对我来说效果很好。

# c# - Ninject 加载方法

> ID：14255465
> 
> 赞同：0
> 
> 时间：2013-01-10T10:15:45.747
> 
> 标签：c#, ninject

我从下面的链接中引用了这个例子。

[http://blog.prabir.me/post/Dependency-Injection-%28DI%29-e28093-Hello-World-with-Ninject.aspx](http://blog.prabir.me/post/Dependency-Injection-%28DI%29-e28093-Hello-World-with-Ninject.aspx)

```
using Ninject.Modules; 
using Prabir.NinjectSample.Provider;
using Prabir.NinjectSamples.Providers.ConsoleWriter;
using Prabir.NinjectSample.Providers.MessageBoxWriter;

namespace Prabir.NinjectSample.ConsoleApplication
{
 public class XDocModule : NinjectModule
{

    public override void Load()
    {
        Bind<IWriter>().To<ConsoleWriter>();
        Bind<XDoc>().ToSelf().InSingletonScope();
    }

}
} 
```

`Load()`方法中，正在`ConsoleWriter`与`IWriter`. 它看起来是静态的和硬编码的。即每次我打电话时`IWriter`，它都会初始化`ConsoleWriter`。如果我也想使用怎么办`MessageBoxWriter`。我将不得不更改`Load()`方法中的代码来实现这一点。我是否遗漏了任何东西，或者这就是 Ninject 的行为方式？

此外，`Load()`方法将被所有类型的接线调用。在其他课程中，我可能需要`ConsoleReader`与`IReader`. 在这种情况下，同样

```
Bind<IWriter>().To<ConsoleWriter>()
Bind<XDoc>().ToSelf().InSingletonScope() 
```

也会受到打击。这是Ninject的预期方式吗？

让我更详细地解释我的问题。可以说我有一个下面给出的界面。

```
public interface IVehicle
{
 PrintSpecification();
} 
```

我有三个实现上述接口的类。它们可以如图所示。

```
public class Car implements IVehicle
{      
 public void PrintSpecification()
 { Console.WriteLine("Specification for Car");}
}

public class Bus implements IVehicle
{
  public void PrintSpecification()
  { Console.WriteLine("Specification for Bus");}
}

public class Truck implements IVehicle
{
  public void PrintSpecification()
  { Console.WriteLine("Specification for Truck");}
} 
```

现在在我的主程序中，我会有这样的东西。在这里，我使用 new 运算符创建了 Car、Bus 和 Truck 的三个具体实现。我必须显示所有三辆车的规格。现在我想知道如何编写我的 Ninject 代码，以便不依赖具体类。

```
Public static void main()
{
  IVehicle v1=new Car();
  IVehicle v2=new Bus();
  IVehicle v3=new Truck();
  v1.PrintSpecification();
  v2.PrintSpecification();
  v3.PrintSpecification();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:57:51.710

模块加载应该在应用程序启动时完成一次（或者您可以根据请求动态加载模块 - 在需要时，但可能不是您的情况）。

如果你想在不同的地方使用你的接口的各种实现，你可以使用条件绑定。

**条件绑定：**

```
Bind<IWriter>().To<ConsoleWriter>().When(x=> ReturnTrueWhenConditionMet()); 
```

或者您可以使用*命名*和`NamedAttribute`：

**命名属性：**

*捆绑*

```
Bind<IWriter>().To<ConsoleWriter>().Named("ConsoleWritter"); 
```

*`ConsoleWritter`将被注入的类的构造函数。*

```
public MyClassWithConcoleWritter([Named("ConsoleWritter")] IWriter writer)
{
} 
```

问题`NamedAttribute`是它会将您绑定到您的商务课程中的 Ninject，因此如果您需要轻松切换 IOC 容器将会有问题。

然而，如何进行条件绑定还有更多选择。有关更多信息，请参阅此文档 -[上下文绑定](https://github.com/ninject/ninject/wiki/Contextual-Binding)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:31:10.410

你的第二个问题可以这样解决

在您的 ninject 模块中

```
Bind<IVehicle>().To<Car>();
Bind<IVehicle>().To<Bus>();
Bind<IVehicle>().To<Truck>();
Bind<IVehicleCarPark>().To<CarPark>(); 
```

在使用 ninject 检索的类中

```
public class CarPark : IVehicleCarPark
{
   Ctor(IEnumerable<IVehicle> vehicles) {
       // vehicles will be autoresolved
   }
} 
```

# c# - 如何将 XDocument 保存为 sql 列类型 XML？

> ID：14255466
> 
> 赞同：0
> 
> 时间：2013-01-10T10:15:45.903
> 
> 标签：c#, xml, linq-to-xml

我的专栏是 type `XML`。

在 dbml 我得到类型这个列是`System.Xml.Linq.XElement`

我有 XDocument，我需要保存在列 xml 中。

这是怎么做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:28:26.713

[XDocument.Root](http://msdn.microsoft.com/en-gb/library/system.xml.linq.xdocument.root.aspx)属性将为根元素返回一个`XElement`。

# c# - 如何通过 c# 使用 asp.net 2010 使用 iTextSharp 管理 pdf 表格高度

> ID：14255473
> 
> 赞同：-1
> 
> 时间：2013-01-10T10:15:56.533
> 
> 标签：c#, asp.net, itext

我无法使用`iTextSharp`c# 通过 asp.net 2010 设置 pdf 表格高度。如果我将任何单元格的固定高度设置为 15，则单元格的数据不会显示。在这种情况下，单元格显示没有数据。我想将单元格的高度更改为小于*15px*并在单元格中显示数据。

```
private void CreatePDF()
{
    string timestamp = DateTime.Now.ToString("MMddyyyy.HHmmss");
    string pdfFileName = Request.PhysicalApplicationPath + "\\Files\\" + "PDFCreation_Reporting_" + timestamp + ".pdf";
    Document myDocument = new Document(PageSize.A4, 5, 20, 50, 25);
    PdfWriter.GetInstance(myDocument, new FileStream(pdfFileName, FileMode.Create));
    myDocument.Open();
    PdfPTable UpperTable1 = new PdfPTable(3);
    PdfPTable UpperTable2 = new PdfPTable(3);
    PdfPCell utcell1 = new PdfPCell();
    PdfPCell utcell2 = new PdfPCell();
    PdfPCell utcell3 = new PdfPCell();
    PdfPCell utcell4 = new PdfPCell();
    PdfPCell utcell5 = new PdfPCell();
    PdfPCell utcell6 = new PdfPCell();
    utcell1.FixedHeight = 15f;
    utcell2.FixedHeight = 15f;
    utcell3.FixedHeight = 15f;
    utcell1.Padding = 0;
    utcell2.Padding = 0;
    utcell3.Padding = 0;

    utcell4.FixedHeight = 15f;
    utcell5.FixedHeight = 15f;
    utcell6.FixedHeight = 15f;
    utcell4.Padding = 0;
    utcell5.Padding = 0;
    utcell6.Padding = 0;

    float[] colWidthsut1 = { 800, 685, 800 };//35%,30%,35% [2285]
    UpperTable1.SetWidths(colWidthsut1);
    UpperTable1.WidthPercentage = 100;

    float[] colWidthsut2 = { 457, 1028, 800 };//20%,45%,35% [2285]
    UpperTable2.SetWidths(colWidthsut2);
    UpperTable2.WidthPercentage = 100;

    string strTest1 = "Test data";
    string strTest2 = "Test data";
    string strTest3 = "Test Data";
    string strTest4 = "Test data";
    string strTest5 = "";
    string strTest6 = "";

    Phrase phrTest1 = new Phrase();
    Phrase phrTest2 = new Phrase();
    Phrase phrTest3 = new Phrase();
    Phrase phrTest4 = new Phrase();
    Phrase phrTest5 = new Phrase();
    Phrase phrTest6 = new Phrase();

    phrTest1.Font = new Font(Font.FontFamily.TIMES_ROMAN, 6, Font.NORMAL, BaseColor.BLACK);
    phrTest2.Font = new Font(Font.FontFamily.TIMES_ROMAN, 6, Font.NORMAL, BaseColor.BLACK);
    phrTest3.Font = new Font(Font.FontFamily.TIMES_ROMAN, 6, Font.NORMAL, BaseColor.BLACK);
    phrTest4.Font = new Font(Font.FontFamily.TIMES_ROMAN, 6, Font.NORMAL, BaseColor.BLACK);

    phrTest1.Add(strTest1);
    phrTest2.Add(strTest2);
    phrTest3.Add(strTest3);
    phrTest4.Add(strTest4);
    phrTest5.Add(strTest5);
    phrTest6.Add(strTest6);
    utcell1.AddElement(phrTest1);
    utcell2.AddElement(phrTest2);
    utcell3.AddElement(phrTest3);
    utcell4.AddElement(phrTest4);
    utcell5.AddElement(phrTest5);
    utcell6.AddElement(phrTest6);

    PdfPCell[] firstrowCells = { utcell1, utcell2, utcell3 };
    PdfPRow row1 = new PdfPRow(firstrowCells);
    UpperTable1.Rows.Add(row1);
    PdfPCell[] secondrowCells = { utcell4, utcell5, utcell6 };
    PdfPRow row2 = new PdfPRow(secondrowCells);
    UpperTable2.Rows.Add(row2);

    myDocument.Add(UpperTable1);
    myDocument.Add(UpperTable2);
    myDocument.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:17:57.940

也许您可以修改对我有用的边距。另外，什么时候修改单元格？也许您在将其添加到表格后才这样做？那么它可能不会工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T10:05:24.920

FileStream 文件 = new FileStream(newFullPath, FileMode.Create, System.IO.FileAccess.Write); // 创建文件流长度的字节数组
//byte[] ImageData = new byte[file.Length]; //从流中读取字节块到字节数组
中 //file.Read(ImageData, 0, System.Convert.ToInt32(file.Length)); //关闭文件流

```
 //  string appPath = HttpContext.Current.Request.ApplicationPath;
    CheckBox1.Visible = false;
    Response.ContentType = "application/pdf";
    string appPath = HttpContext.Current.Request.ApplicationPath;
   // FileStream file = new FileStream(Server.MapPath("~/save/") + (Convert.ToInt32(ViewState["cust"])) + "_" + (n++) + ".PDF", FileMode.Create, System.IO.FileAccess.Write);
    StringWriter sw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(sw);
    pnlPerson.RenderControl(hw);

    StringReader sr = new StringReader(sw.ToString());
    Document pdfDoc = new Document(PageSize.A4, 5, 20, 50, 25);
    HTMLWorker htmlparser = new HTMLWorker(pdfDoc);
    //   MemoryStream ms = new MemoryStream();
    PdfWriter.GetInstance(pdfDoc, file);
    PdfWriter.GetInstance(pdfDoc, Response.OutputStream);
    pdfDoc.Open();
    htmlparser.Parse(sr);
    hw.Close();
    sw.Close();
    pdfDoc.Close();
    sr.Close();
    file.Close();
    htmlparser.Close(); 
```

# php - 为 PHP 扩展类型提示

> ID：14255474
> 
> 赞同：12
> 
> 时间：2013-01-10T10:16:01.613
> 
> 标签：php, netbeans, type-hinting

是否可以使用 Netbeans 中的另一个文档标记扩展类型提示？

我正在寻找一种使用标签扩展类型提示的方法，该`@scope`标签允许包含的文件访问对象范围。

例子：

```
file: template.php
<?php /* @var $this MyObject */ 
```

这将只允许对公共变量和方法进行类型提示。我希望做的是使用`@scope`标签扩展类型提示，使其能够访问 MyObject 范围：

```
file: template.php
<?php /* @scope MyObject */ 
```

这将使文件内容的行为就像在 MyObject 范围内一样，并`$this`暗示私有方法。

现在，我没有为 Netbeans 平台开发的经验，但我有 Java 经验。如果我想做到这一点，我会从哪里开始？

希望这不是一个太弱的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-24T11:07:43.350

在过去（NetBeans 的旧版本）中，类型提示显示了一个类（正在使用的对象）的所有方法，即所有公共、受保护、私有甚至静态方法。现在，在 NetBeans 的新版本中，此*错误*已得到修复，并且当对对象进行类型提示时，仅对可访问的方法/属性进行类型提示。

这仅仅是因为您的模板无法访问/调用类的私有属性/方法以及如果您有一个对象（类的实例）您不应该能够访问/调用它的类的静态属性/方法。

如果您愿意在类内部进行类型提示，这同样适用 - 现在类型提示列出了`$this->|`(`|`是光标) 的所有公共、受保护和私有方法，而静态属性和方法仍未列出。另一方面，如果您现在是类型提示，则`MyClass::|`仅列出静态属性/方法，并且再次在*MyClass*类中列出所有公共、受保护和公共的，而从私有外部访问时（*非常正确*）在列表中丢失。

因此，您请求的功能是错误的，并且否定了正确的封装原则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-28T11:35:42.793

我知道我们不应该建议任何工具，但有时我无法抗拒人们试图用错误的工具解决问题的感觉。在我看来，NetBeans 正在慢慢追随 Eclipse 的步伐，随着时间的推移，它几乎完全放弃了对 PHP 的支持。然而，还有其他 IDE 是专门为 PHP 语言设计的，可以解决一些开箱即用的问题。

就我个人而言，我想要一个从一开始就为我提供大部分功能的工具。我对编写插件不感兴趣，这需要我的时间，并且随着时间的推移可能会被弃用。所以我选择了一个商业 IDE，它给了我比我需要的更多的东西，顺便说一句 - 它完美地满足了您在问题中包含的需求。如果您要编写 PHP 代码，那么我强烈建议您考虑购买专业工具。

关于问题本身，我将提供一个指向功能请求的示例链接，它显示了问题是如何解决的：[Allow protected member access on @var $this (ie in views)](http://youtrack.jetbrains.com/issue/WI-5076)。还有更多[相关的功能](http://youtrack.jetbrains.com/issue/WI-1730)，您可能会觉得有趣。

所以总结一下我的观点是：如果你要拧紧螺丝，那就用螺丝刀，而不是锤子。

# java - 使用 javax 邮件在没有 Gmail 的情况下发送邮件

> ID：14255476
> 
> 赞同：0
> 
> 时间：2013-01-10T10:16:07.040
> 
> 标签：java, android, logcat, jakarta-mail

我正在尝试在没有 Gmail 的情况下发送电子邮件并使用`javax.mail`. 特别是，我使用两个文件： `mailSender.java`和`MainActivity`.

**`mailSender.java`**：

```
package com.polito.gmail;

import java.util.Date;
import java.util.Properties;

import javax.activation.CommandMap;
import javax.activation.MailcapCommandMap;
import javax.mail.BodyPart;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

public class mailSender extends javax.mail.Authenticator {
    private String _user;
    private String _pass;

    private String[] destAddr = {"user1@hotmail.it", "user2@gmail.com"};
    private String fromAddr = "from@gmail.com";

    private String _port;
    private String _sport;

    private String _host;

    private String _subject = "New Mail";
    private String _body;

    private boolean _auth;

    private boolean _debuggable;

    private Multipart _multipart;

    public mailSender() {
        _host = "smtp.gmail.com"; // default smtp server
        _port = "465"; // default smtp port
        _sport = "465"; // default socketfactory port

        _user = ""; // username
        _pass = ""; // password
        _body = ""; // email body

        _debuggable = false; // debug mode on or off - default off
        _auth = true; // smtp authentication - default on

        _multipart = new MimeMultipart();

        // There is something wrong with MailCap, javamail can not find a
        // handler for the multipart/mixed part, so this bit needs to be added.
        MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap();
        mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");
        mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml");
        mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");
        mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
        mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");
        CommandMap.setDefaultCommandMap(mc);
    }

    public mailSender(String user, String pass) {
        this();
        _user = user;
        _pass = pass;
    }

    public boolean send() throws Exception {
        Properties props = _setProperties();

        if (!_user.equals("") && !_pass.equals("") && destAddr.length > 0
                && !fromAddr.equals("") && !_subject.equals("")
                && !_body.equals("")) {
            Session session = Session.getInstance(props, this);

            MimeMessage msg = new MimeMessage(session);

            msg.setFrom(new InternetAddress(fromAddr));

            InternetAddress[] addressTo = new InternetAddress[destAddr.length];
            for (int i = 0; i < destAddr.length; i++) {
                addressTo[i] = new InternetAddress(destAddr[i]);
            }
            msg.setRecipients(MimeMessage.RecipientType.TO, addressTo);

            msg.setSubject(_subject);
            msg.setSentDate(new Date());

            // setup message body
            BodyPart messageBodyPart = new MimeBodyPart();
            messageBodyPart.setText(_body);
            _multipart.addBodyPart(messageBodyPart);

            // Put parts in message
            msg.setContent(_multipart);

            // send email
            Transport.send(msg);

            return true;
        } else {
            return false;
        }
    }

    @Override
    public PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication(_user, _pass);
    }

    private Properties _setProperties() {
        Properties props = new Properties();

        props.put("mail.smtp.host", _host);

        if (_debuggable) {
            props.put("mail.debug", "false");
        }

        if (_auth) {
            props.put("mail.smtp.auth", "true");
        }

        props.put("mail.smtp.port", _port);
        props.put("mail.smtp.socketFactory.port", _sport);
        props.put("mail.smtp.socketFactory.class",
                "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.socketFactory.fallback", "false");

        return props;
    }

    // the getters and setters
    public String getBody() {
        return _body;
    }

    public void setBody(String _body) {
        this._body = _body;
    } 
```

在**`MainActivity.java`**：

```
mailSender sender = new mailSender("from@gmail.com","password");
        sender.setBody(prepareBody());
        try {

            if(sender.send()) { 
                    Toast.makeText(MainActivity.this, "Mail send", Toast.LENGTH_LONG).show();
                } else { 
                    Toast.makeText(MainActivity.this, "Mail not send", Toast.LENGTH_LONG).show();
                } 
} catch (Exception e) {
            Log.e("error", String.valueOf(e.getMessage()));
        } 
```

`INTERNET`我在清单文件中插入权限并正确 ping `smtp.gmail.com`，但应用程序生成此异常：

```
01-10 11:06:52.238: E/AndroidRuntime(2001): FATAL EXCEPTION: main
01-10 11:06:52.238: E/AndroidRuntime(2001): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.polito.gmail/com.polito.gmail.MainActivity}: java.lang.NullPointerException
01-10 11:06:52.238: E/AndroidRuntime(2001):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2185)
01-10 11:06:52.238: E/AndroidRuntime(2001):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2210)
01-10 11:06:52.238: E/AndroidRuntime(2001):     at android.app.ActivityThread.access$600(ActivityThread.java:142)
01-10 11:06:52.238: E/AndroidRuntime(2001):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1208)
01-10 11:06:52.238: E/AndroidRuntime(2001):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-10 11:06:52.238: E/AndroidRuntime(2001):     at android.os.Looper.loop(Looper.java:137)
01-10 11:06:52.238: E/AndroidRuntime(2001):     at android.app.ActivityThread.main(ActivityThread.java:4931)
01-10 11:06:52.238: E/AndroidRuntime(2001):     at java.lang.reflect.Method.invokeNative(Native Method)
01-10 11:06:52.238: E/AndroidRuntime(2001):     at java.lang.reflect.Method.invoke(Method.java:511)
01-10 11:06:52.238: E/AndroidRuntime(2001):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
01-10 11:06:52.238: E/AndroidRuntime(2001):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
01-10 11:06:52.238: E/AndroidRuntime(2001):     at dalvik.system.NativeStart.main(Native Method)
01-10 11:06:52.238: E/AndroidRuntime(2001): Caused by: java.lang.NullPointerException
01-10 11:06:52.238: E/AndroidRuntime(2001):     at com.polito.gmail.MainActivity.onCreate(MainActivity.java:48)
01-10 11:06:52.238: E/AndroidRuntime(2001):     at android.app.Activity.performCreate(Activity.java:5008)
01-10 11:06:52.238: E/AndroidRuntime(2001):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
01-10 11:06:52.238: E/AndroidRuntime(2001):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2139)
01-10 11:06:52.238: E/AndroidRuntime(2001):     ... 11 more 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:27:34.460

试试这个可能对你有帮助。

```
mailSender sender = new mailSender("from@gmail.com","password");
    sender.setBody(prepareBody());
    try {

        if(sender.send()) { 
                Toast.makeText(MainActivity.this, "Mail send", Toast.LENGTH_LONG).show();
            } else { 
                Toast.makeText(MainActivity.this, "Mail not send", Toast.LENGTH_LONG).show();
            } 
} catch (Exception e) {
        if(e.getMessage() != null)
            Log.e("error", String.valueOf(e.getMessage()));
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:31:48.323

您的代码似乎正确，请检查您是否收到邮件。发生异常是因为没有与异常相关的消息。试试这个来避免`NullPointerException`：

```
Log.e("error", String.valueOf(e)); 
```

更新：为了更好地了解使用 javamail 处理异常的逻辑，请遵循以下步骤：

```
 try {
                sender.send();
               Toast.makeText(MainActivity.this, "Mail send", Toast.LENGTH_LONG).show();
            }
            catch (Exception e) {                   

                if (e.toString().equals("java.lang.NullPointerException"))                      
                    Toast.makeText(MainActivity.this, "Mail not send: Mail settings not configured", Toast.LENGTH_LONG).show();

                else if (e.toString().equals("javax.mail.AuthenticationFailedException"))                       
                    Toast.makeText(MainActivity.this, "Mail not send: Wrong Username or Password", Toast.LENGTH_LONG).show();

                else if (e.toString().equals("Invalid Addresses"))                      
                    Toast.makeText(MainActivity.this, "Mail not send: Invalid Address(es)", Toast.LENGTH_LONG).show();

                else
                    Toast.makeText(MainActivity.this, "Mail not send", Toast.LENGTH_LONG).show();                   

                } 
```

# scala - Scala MutableLists 映射函数返回值

> ID：14255479
> 
> 赞同：0
> 
> 时间：2013-01-10T10:16:15.543
> 
> 标签：scala

目前我尝试在 MutableList 上使用 map 函数，因为它会比使用 for 循环迭代更优雅，恕我直言。

当我执行以下操作时：

```
scala> ml
res2: scala.collection.mutable.MutableList[Double] = MutableList(1.0, 2.0) 
```

所以我有一个像这样的 MutableList，现在我做了：

```
scala> ml.map{ t:(Double) => t+0.2}
res3: scala.collection.mutable.LinearSeq[Double] = MutableList(1.2, 2.2) 
```

我得到了一个 LinearSeq。我想要一个 MutableList 回来。我认为 MutableLists 上的映射函数不是正确的方法吗？或者有没有一种简单的方法可以从 LinearSeq 到 MutableList？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:43:22.967

从[标准文档](http://docs.scala-lang.org/overviews/collections/concrete-mutable-collection-classes.html#mutable_lists)：

> 可变列表
> 
> MutableList由一个[链表](http://www.scala-lang.org/api/2.9.1/scala/collection/mutable/MutableList.html)和一个指向该链表终端空节点的指针组成。这使得 list append 是一个常数时间的操作，因为它避免了遍历列表来搜索它的终端节点。[MutableList](http://www.scala-lang.org/api/2.9.1/scala/collection/mutable/MutableList.html)目前是Scala中[mutable.LinearSeq的标准实现。](http://www.scala-lang.org/api/2.9.1/scala/collection/LinearSeq.html)

这意味着返回`LinearSeq`的实际上是作为一个`MutableList`=> 相同的访问时间实现的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:18:24.070

正如 pagoda_5b 提到的，`mutable.LinearSeq`将允许与`MutableList`. 通常，您应该直接实例化特征。例如，如果你想要一个：

*   映射到存储（键 -> 值）对，调用 Map()
*   Seq 存储事物列表，调用 Seq()
*   设置存储一组东西，调用Set()
*   具有线性随机访问时间的 Seq，调用 IndexedSeq()
*   ETC..

还需要注意的是，虽然`MutableList`和`LinearSeq`都具有恒定`head`的访问时间，但两者都没有恒定的*随机*访问时间，即调用`linearSeq(n)`将需要 n 次调用`head`才能返回。

例如，如果您想要可变版本，只需添加`import scala.collection.mutable`并使用`mutable.Seq()`。（从技术上讲你可以`import scala.collection.mutable.Seq`，但是用包名作为所有可变集合的前缀被认为是一种很好的编码风格）

# git - 如何将磁盘大小配额放在 git 存储库中？

> ID：14255482
> 
> 赞同：1
> 
> 时间：2013-01-10T10:16:21.380
> 
> 标签：git, limit, quota

我使用 Git 作为数据存储系统，系统中有多个用户，每个用户都有自己的 git 存储库。

是否可以为 Git 存储库配额磁盘使用量（配额应该适用于拉取请求，而不是推送请求，服务器启动拉取请求以从某个远程用户存储库中提取数据）？像“`/my-app/storage/user-x-repository`应该小于 100Mb”这样的规则？我需要它来防止一个用户占用额外的磁盘空间。

可以为每个 unix 用户使用 unix 磁盘配额，但似乎无法为每个文件夹设置磁盘配额。

如果用户达到其配额 - 他的存储库应该以任何方式失败，这并不重要，重要的部分 - 不应该允许“坏用户”通过占用额外空间来伤害其他用户。

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:41:33.443

真的取决于您使用的操作系统...

如果是 linux 那么你可以 1) 使用 dd 创建一个设定大小的图像文件 2) 在图像中创建一个文件系统 3) 将图像挂载到 /my-app/storage/user-x-repository 4) 挂载/etc/mtab 中的命令以确保它在重新启动时安装

Windows 你需要找到一个图像安装工具..

# java - 如何从通知中转到 Viewpager 中添加的最后一个片段？

> ID：14255488
> 
> 赞同：1
> 
> 时间：2013-01-10T10:16:42.433
> 
> 标签：java, android, android-fragments

我有一个线程，一旦将新元素添加到我的数据库中，我就会收到通知，显示通知并且一切正常，但我的问题是如何从该通知转到 Viewpager 中添加的最后一个片段？

公共类 AllProductsActivity 扩展 BaseActivity 实现 OnTaskFinishedListener{

```
public AllProductsActivity() {
    super(1);
}

private ProgressDialog pDialog;
private JSONParser jParser = new JSONParser();

private static final String TAG_SUCCESS = "success";
private static final String TAG_PRODUCTS = "ordinateur";
private static final String TAG_PRICE = "prix_ordi";
private static final String TAG_NAME = "nom_ordi";
private static final String TAG_MARK = "marque_ordi";
private static final String TAG_PROC = "proc_ordi";
private static final String TAG_DISK = "dd_ordi";
private static final String TAG_RAM = "ram_ordi";
private static final String TAG_GRAPHICS = "gra_ordi";
private static final String TAG_DESC = "des_ordi";
private static final String TAG_PATH = "path_ordi";

private MyPagerAdapter mPagerAdapter;

private JSONArray products = null;
private ArrayList <Ordinateur> ordinateurList = new ArrayList<Ordinateur>();
private List<Fragment> fragments = new Vector<Fragment>();

private int new_row, initial_row;
private static final int ID_NOTIFICATION = 1990;
private boolean condition = false;
private ViewPager vp;
private ArrayList<Fragment> mFragments;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    vp = new ViewPager(this);
    vp.setId(R.id.pager);
    new LoadAllProducts(this).execute(url_all_products);
    setContentView(vp);

    ScheduledExecutorService scheduleTaskExecutor = Executors.newScheduledThreadPool(5);
    scheduleTaskExecutor.scheduleAtFixedRate(new Runnable() {
        public void run() {
            new LongRunningGetIO().execute();
        }
    }, 0, 5, TimeUnit.SECONDS);

    vp.setOnPageChangeListener(new OnPageChangeListener() {
        @Override
        public void onPageScrollStateChanged(int arg0) { }

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) { }

        @Override
        public void onPageSelected(int position) { 
            switch (position) {
            case 0:
                getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
                break;
            default:
                getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);
                break;
            }
        }

    });

    vp.setCurrentItem(0);
    getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
}

@Override
public void onTaskFinishedOrdinateur() {
    vp.setAdapter(new OrdinateurPagerAdapter(getSupportFragmentManager()));
}

@Override
public void onTaskFinishedLastOrdinateur(Ordinateur ordinateur) {
    vp.setAdapter(new OrdinateurPagerAdapter(getSupportFragmentManager()));
    createNotify(ordinateur.getName());
}

class LoadAllProducts extends AsyncTask<String, String, String> {

    OnTaskFinishedListener onTaskFinishedListener;

    public LoadAllProducts(OnTaskFinishedListener _onTaskFinishedListener)
    {
        onTaskFinishedListener = _onTaskFinishedListener;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(AllProductsActivity.this);
        pDialog.setMessage("Chargement des produits, , veuillez patienter...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    protected String doInBackground(String... args) {
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        JSONObject json = jParser.makeHttpRequest(args[0], "GET", params);

        Log.d("json", json.toString());

        try {
            int success = json.getInt(TAG_SUCCESS);
            if (success == 1) {
                products = json.getJSONArray(TAG_PRODUCTS);
                for (int i = 0; i < products.length(); i++) {
                    JSONObject c = products.getJSONObject(i);

                    String price = c.getString(TAG_PRICE);
                    String name = c.getString(TAG_NAME);
                    String ram = c.getString(TAG_RAM);
                    String dd = c.getString(TAG_DISK);
                    String gra = c.getString(TAG_GRAPHICS);
                    String proc = c.getString(TAG_PROC);
                    String mark = c.getString(TAG_MARK);
                    String desc = c.getString(TAG_DESC);
                    String path = c.getString(TAG_PATH);

                    Ordinateur ordinateur = new Ordinateur();
                    ordinateur.setPrice(price);
                    ordinateur.setName(name);
                    ordinateur.setRam(ram);
                    ordinateur.setDd(dd);
                    ordinateur.setGra(gra);
                    ordinateur.setProc(proc);
                    ordinateur.setMark(mark);
                    ordinateur.setDesc(desc);
                    ordinateur.setPath(path);
                    ordinateurList.add(ordinateur);
                }
            } 
            else {
                // no products found
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    protected void onPostExecute(String file_url) {
        pDialog.dismiss();
        onTaskFinishedListener.onTaskFinishedOrdinateur();
    }

}

class LoadLastProducts extends AsyncTask<String, String, String> {

    OnTaskFinishedListener onTaskFinishedListener;
    Ordinateur ordinateur = new Ordinateur();

    public LoadLastProducts(OnTaskFinishedListener _onTaskFinishedListener)
    {
        onTaskFinishedListener = _onTaskFinishedListener;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    protected String doInBackground(String... args) {
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        JSONObject json = jParser.makeHttpRequest(args[0], "GET", params);

        Log.d("json", json.toString());

        try {
            int success = json.getInt(TAG_SUCCESS);
            if (success == 1) {
                products = json.getJSONArray(TAG_PRODUCTS);
                for (int i = 0; i < products.length(); i++) {
                    JSONObject c = products.getJSONObject(i);

                    String price = c.getString(TAG_PRICE);
                    String name = c.getString(TAG_NAME);
                    String ram = c.getString(TAG_RAM);
                    String dd = c.getString(TAG_DISK);
                    String gra = c.getString(TAG_GRAPHICS);
                    String proc = c.getString(TAG_PROC);
                    String mark = c.getString(TAG_MARK);
                    String desc = c.getString(TAG_DESC);
                    String path = c.getString(TAG_PATH);

                    ordinateur.setPrice(price);
                    ordinateur.setName(name);
                    ordinateur.setRam(ram);
                    ordinateur.setDd(dd);
                    ordinateur.setGra(gra);
                    ordinateur.setProc(proc);
                    ordinateur.setMark(mark);
                    ordinateur.setDesc(desc);
                    ordinateur.setPath(path);
                    ordinateurList.add(ordinateur);
                }
            } 
            else {
                // no products found
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    protected void onPostExecute(String file_url) {
        onTaskFinishedListener.onTaskFinishedLastOrdinateur(ordinateur);
    }

}

class LongRunningGetIO extends AsyncTask <Void, Void, String> {

    protected String getASCIIContentFromEntity(HttpEntity entity) throws IllegalStateException, IOException {
        InputStream in = entity.getContent();
        StringBuffer out = new StringBuffer();
        int n = 1;
        while (n>0) {
            byte[] b = new byte[4096];
            n =  in.read(b);
            if (n>0) out.append(new String(b, 0, n));
        }
        return out.toString();
    }

    @Override
    protected void onPreExecute() {
        new_row = initial_row;
    }

    @Override
    protected String doInBackground(Void... params) {
        HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        HttpGet httpGet = new HttpGet(url_row);
        String text = null;
        try {
            HttpResponse response = httpClient.execute(httpGet, localContext);
            HttpEntity entity = response.getEntity();
            text = getASCIIContentFromEntity(entity);
        } catch (Exception e) {
            return e.getLocalizedMessage();
        }
        return text;
    }   

    protected void onPostExecute(String results) {
        initial_row = Integer.parseInt(results);
        if (initial_row > new_row) {
            if (new_row > 0){
                Log.d("added", "added");
                new LoadLastProducts(AllProductsActivity.this).execute(url_last_product);
            }
        }
    }
}

public class OrdinateurPagerAdapter extends FragmentPagerAdapter {

    public OrdinateurPagerAdapter(FragmentManager fm) {
        super(fm);
        mFragments = new ArrayList<Fragment>();
        for (Ordinateur ordinateur : ordinateurList)
            mFragments.add(new OrdinateurFragment(ordinateur));
    }

    @Override
    public int getCount() {
        return mFragments.size();
    }

    @Override
    public Fragment getItem(int position) {
        return mFragments.get(position);
    }

}

public void createNotify(String texteNotification){
    NotificationManager notificationManager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);        
    Notification notification = new Notification(R.drawable.ic_launcher, "Promo", System.currentTimeMillis()); 
    notification.flags = Notification.FLAG_ONGOING_EVENT;
    Intent intent = new Intent(this, Main.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent.setFlags(intent.getFlags() | Intent.FLAG_ACTIVITY_REORDER_TO_FRONT), 0);
    String titreNotification = "Promo Agora";
    notification.setLatestEventInfo(this, titreNotification, texteNotification, pendingIntent);
    notification.vibrate = new long[] {0,200,100,200,100,200};
    notificationManager.notify(ID_NOTIFICATION, notification);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T12:29:51.733

您可以通过调用更改 ViewPager 中显示的项目`setCurrentItem(int)`。如果这是您可以调用的最后一项：

`mViewPager.setCurrentItem(mViewPager.getCount() - 1);`

# python - 在 python 上使用 Selenium Webdriver 发送 unicode

> ID：14255489
> 
> 赞同：4
> 
> 时间：2013-01-10T10:16:51.093
> 
> 标签：python, unicode, selenium, webdriver

我正在使用 Selenium Webdriver 和 python 在网站上运行测试。

带有最新 Selenium 的 python 2.7.2

我不知道如何将诸如德语“元音变音”(öäüß) 之类的 unicode 发送到输入表单。据我所知，webdriver 可以处理 unicode，所以这可能是一个 python 问题。

```
# -*- coding: iso-8859-1 -*-

from selenium import webdriver

driver = webdriver.Firefox()
driver.get("http://www.google.de")
i = u"hälp me"
driver.find_element_by_css_selector("INPUT[name=\"q\"]").send_keys(i) 
```

这可以正常工作，但不会发送“ä”。是否需要进一步的编码/解码...？

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T15:48:03.720

经过几个小时的尝试，我终于明白了 =) 看起来我的 IDE (Komodo) 导致了问题 - 在将首选项中的编码设置为 latin-4 后，它以两种不同的方式很好地工作：

将字符串声明为 unicode：

```
# -*- coding: iso-8859-4 -*-

from selenium import webdriver
from sys import version_info

driver = webdriver.Firefox()

driver.get("http://www.google.de")

i = u"hälp me"
driver.find_element_by_css_selector("INPUT[name=\"q\"]").send_keys(i) 
```

解码 latin-4 并转换为 unicode：

```
# -*- coding: iso-8859-4 -*-

from selenium import webdriver
from sys import version_info

driver = webdriver.Firefox()

driver.get("http://www.google.de")

i = "hälp me"
i = unicode(i.decode("iso-8859-4"))
driver.find_element_by_css_selector("INPUT[name=\"q\"]").send_keys(i) 
```

感谢所有帮助过我的人！

干杯

# java - 我们无法在 LinkedIn 中找到授权令牌

> ID：14255491
> 
> 赞同：0
> 
> 时间：2013-01-10T10:16:54.150
> 
> 标签：java, android, api, oauth, linkedin

我一直在寻找这个问题的答案很多天，但仍然没有得到解决方案。

对于使用 LinkedIn 共享数据，在 LinkedIn 中的登录选项后，我收到“我们无法找到授权令牌”这条消息，而不是转到“用户权限请求页面”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:20:21.707

您尚未分享您的实施细节，但很可能您在身份验证过程中遗漏了一个步骤。我会查看身份验证文档以确保您正确处理身份验证：http: [//developer.linkedin.com/documents/authentication](http://developer.linkedin.com/documents/authentication)

# java - 使用休眠在一对多映射中获取更新的行

> ID：14255493
> 
> 赞同：1
> 
> 时间：2013-01-10T10:17:00.890
> 
> 标签：java, hibernate, struts2, hibernate-mapping, hibernate-criteria

我有两个实体问题和`Issue_Tracker`。我在一对多映射中加入了这两个表。在`Issue_Tracker`中，我们可以有多个条目，例如

```
 issue_id  tracker_status      tracked_time
    123     Assigned           1/8/2013 11:44
    123     Assigned           1/8/2013 11:45
    123     Completed          1/8/2013 11:52
    32      Assigned           1/9/2013 16:46
    33      Assigned           1/9/2013 16:47
    33      Cancel             1/9/2013 16:49 
```

我想通过 tracked_time 订购 Issue_tracker 实体，因此我只能获得最后一次更新`tracker_status`。我正在使用标准来获取数据，但是我得到了第一个条目，例如：对于 issue_id 123，我将 tracker_status 设置为 Assigned ，但我想`tracker_status : Completed`获取id 123\. 如何做到这一点。我的DAO如下

```
 Criteria criteria = session.createCriteria(Issue.class);
     criteria.setFirstResult(from);
     criteria.setMaxResults(size);
     criteria.setFetchMode("Issue.issueTracker",FetchMode.JOIN);
     criteria.add(Restrictions.eq("status", "Escalate To"));
      return criteria.list(); 
```

**问题.java**

```
public class Issue implements Serializable
        {
        private Integer issue_id;
        private String  issue_description;
        private Date issue_raised_date;
        private Set<Issue_Tracker> issueTracker = new HashSet<Issue_Tracker>(0);

        @OneToMany(fetch=FetchType.LAZY, mappedBy="issue_id")
        public Set<Issue_Tracker> getIssueTracker() {
        return issueTracker;
    }

        public void setIssueTracker(Set<Issue_Tracker> issueTracker) {
        this.issueTracker = issueTracker; 
```

**Issue_Tracker.java**

```
public class Issue_Tracker implements Serializable
{  
     private Integer   issue_id;
     private String    tracker_status;
     private Timestamp tracked_time; 
```

我希望你们能得到我想问的问题，有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:25:35.883

向映射的集合添加 @OrderBy 注释。这应该返回按跟踪时间排序的集合中的实体。集合中的第一个实体应该是最新的。

```
//Issue.java
    @OneToMany(fetch=FetchType.LAZY, mappedBy="issue_id")
    @OrderBy("tracked_time DESC")
    public Set<Issue_Tracker> getIssueTracker() {
    return issueTracker; 
```

您可能还想尝试：

```
 Criteria criteria = session.createCriteria(Issue.class);
 criteria.setFirstResult(from);
 criteria.setMaxResults(size);
 criteria.setFetchMode("Issue.issueTracker",FetchMode.JOIN);
 criteria.add(Restrictions.eq("status", "Escalate To"));
 Criteria subCriteria = criteria.createCriteria("issueTracker");
 subCriteria.addOrder(Order.desc("tracked_time"));
 return criteria.list(); 
```

# c# - 如何通过 C# 更改 web.config 中的 applicationSettings

> ID：14255494
> 
> 赞同：3
> 
> 时间：2013-01-10T10:17:02.187
> 
> 标签：c#, asp.net, configuration, web-config, application-settings

我想通过 C# 更改 web.config。

我的 Web.config

```
 <?xml version="1.0" encoding="utf-8"?>

    <!--
      Weitere Informationen zum Konfigurieren der ASP.NET-Anwendung finden Sie unter
      "http://go.microsoft.com/fwlink/?LinkId=169433"
      -->

    <configuration>
        <configSections>
            ...
        </configSections>
        <system.web>
            ...
        </system.web>

        <applicationSettings>
            <AdminTest.Properties.Settings>
                <setting name="AD_Admin" serializeAs="String">
                    <value>GastzugangAdmin</value>
                </setting>
                <setting name="AD_User" serializeAs="String">
                    <value>GastzugangUser</value>
                </setting>
            </AdminTest.Properties.Settings>
        </applicationSettings>
    </configuration> 
```

使用字符串`ADAdmin = Properties.Settings.Default.AD_Admin;`我可以从 th 中获取值，`web.config`但我不知道如何覆盖它。我试试这个。

```
protected void btnCon_Click(object sender, EventArgs e)
        {
            string con = txtCon.Text;

            try
            {
                ConfigurationManager.AppSettings.Set("AD_Admin", con);
                Settings.Default.Save();

            }
            catch (Exception)
            {

            }

        } 
```

但我不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:50:59.403

.NET Fx 中有用于修改配置的配置 API，您可以使用相同的 API。例如，检查[WebConfigurationManager](http://msdn.microsoft.com/en-us/library/system.web.configuration.webconfigurationmanager.aspx)

```
var config = WebConfigurationManager.OpenWebConfiguration("~/web.config");
config.AppSettings["xyz"] = value;
config.Save(); 
```

请注意，只要您保存配置，您的 Web 应用程序就会重新启动。

# r - 在矩阵中选择仅满足指定条件但在 R 中不满足其他条件的元素

> ID：14255497
> 
> 赞同：0
> 
> 时间：2013-01-10T10:17:04.420
> 
> 标签：r, plyr

我有一个矩阵“垫子”，有两行以下形式：

```
mat:

1  0
1  2
1  3
1  5
1  9 
1  4
1  7
1  11
1  8
2  3
2  4
2  2
3  9
3  0
4  0
5  0
5  13
6  22
6  0 
```

我定义了一个名为“neg”的变量，它只包含数字 0。

```
neg <- 0 
```

我想在矩阵的第一列中选​​择第二列中只有“否定”的那些元素。

因此，我不想说 mat[mat[,1]%in%0,1] 会选择第一行中第二个至少有一个 0 的每个数字，我只想得到那些只有 0 的数字，在此示例仅选择 4 个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:32:14.310

我会用`plyr`这个。但首先阅读您的数据：

```
dat = read.csv(textConnection("1  0
1  2
1  3
1  5
1  9 
1  4
1  7
1  11
1  8
2  3
2  4
2  2
3  9
3  0
4  0
5  0
5  13
6  22
6  0"), header = FALSE, sep = "") 
```

在加载 plyr 之后，我想找到唯一的类别，`V1`其中只有值等于`neg`in column `V2`，从而产生一个列表：`true_values`。

```
require(plyr)
neg = 0
test = ddply(dat, .(V1), summarise, bool = all(V2 == neg))
>     test
  V1  bool
1  1 FALSE                                                                  
2  2 FALSE                                                                  
3  3 FALSE                                                                  
4  4  TRUE                                                                  
5  5 FALSE                                                                  
6  6 FALSE 
true_values = test[["V1"]][test[["bool"]]]
> true_values
[1] 4 
```

一旦我们有了这个列表，我们就可以对原始数据集进行子集化：

```
> dat[dat[["V1"]] %in% true_values,]
   V1 V2
15  4  0 
```

* * *

或者，我们可以生成一个布尔向量，直接指定要从中选择哪些元素`dat`：

```
test = ddply(dat, .(V1), mutate, bool = all(V2 == neg)) 
```

...并执行子集：

```
> dat[test[["bool"]],]
   V1 V2
15  4  0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:54:11.393

这仅适用于您的特定情况，但您可以使用tapply：

```
as.numeric(names(which(tapply(a[,2],a[,1],sum)==0))) 
```

如果您将第一列视为因子，则 tapply 为第一列中的每个因子水平计算第二列中的总和。

对于多值情况，这样的事情 - 诚然丑陋 - 应该工作：

```
as.numeric(names(which(tapply(dat[,2],dat[,1],FUN=function(x){all(unique(x)%in%neg & length(x)==length(neg))})))) 
```

# php - Zend Framework 2 - 在布局中获取控制器和动作名称

> ID：14255498
> 
> 赞同：0
> 
> 时间：2013-01-10T10:17:05.527
> 
> 标签：php, zend-framework2

我试图在布局文件中获取控制器名称和动作名称。但不能。在 ZF1 中，我们使用 Front Controller 实例来获取控制器和动作名称。我浏览了很多网站。但是没有解决办法。怎么进ZF2？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T11:05:44.943

控制器和它们的视图脚本是解耦的。事实上，一个请求可能涉及多个控制器。

如果您想要将请求分派到的控制器和操作，您可以通过挂钩到分派事件来注入它们，并在附加的 ViewModel 中注入控制器和操作名称。

一种方法是在 Bootstrap 事件中，它应该在 Module 类中。

```
public function onBootstrap(\Zend\EventManager\EventInterface $e)
{
    $app = $e->getApplication();
    $app->getEventManager()->attach(
        'dispatch',
        function($e) {
            $routeMatch = $e->getRouteMatch();
            $viewModel = $e->getViewModel();
            $viewModel->setVariable('controller', $routeMatch->getParam('controller'));
            $viewModel->setVariable('action', $routeMatch->getParam('action'));
        },
        -100
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:15:36.127

我得到了上面的答案，但我不得不使用 sharedManager 将视图传递给控制器

```
 $app = $e->getApplication();
    $app->getEventManager()->getSharedManager()->attach(
        __NAMESPACE__,
        'dispatch',
        function($e) {
            $routeMatch = $e->getRouteMatch();
            $viewModel = $e->getViewModel();
            $viewModel->setVariable('controller', $routeMatch->getParam('controller'));
            $viewModel->setVariable('action', $routeMatch->getParam('action'));
            $controller = $e->getTarget();
            $controller->view = $viewModel;
        },
        100
    ); 
```

如果我想按照我必须做的那样使用上面的答案

```
 $this->getEvent('dispatch')->getViewModel() 
```

在控制器中

# javascript - 错误: : jQuery 未被调用

> ID：14255502
> 
> 赞同：15
> 
> 时间：2013-01-10T10:17:14.433
> 
> 标签：javascript, ajax, jquery, cross-domain

这是我的ajax调用。

```
 $.ajax({
    type: "GET",
    url: "http://example.com/v1/search?keyword=r",
    dataType: "jsonp",
    crossDomain: true,
    success: function (responseString) {
        alert(responseString);
    },
    error: function (xhr, errorType, exception) {
        var errorMessage = exception || xhr.statusText;
        alert(errorMessage);
    }
}); 
```

来自我的示例网址的响应

```
 {
    "response": [{
        "attributes": {
            "type": "enge",
            "url": "/services/data/v24.0/sobjects/Challenge__c/a0GZ0000005Vvh4MAC"
        },
        "name": "Really",
        "end_date": "2013-02-07T15:26:00.000+0000",
        "total": 350.0,
        "registered_members": 0.0,
        "id": "30",
        "type": "Design",
        "id": "a0GZ0000005Vvh4MAC",
        "start_date": "2012-11-19T16:52:00.000+0000",
        "description": "This is my really cool challenge",
        "remaining_days": 28.0,
        "categories__r": [{
            "attributes": {
                "type": "Category__c",
                "url": "/services/data/Category__c/a08Z0000000RNI2IAO"
            },
            "id": "0RNI2IAO",
            "display_name": "Andy"
        }, {
            "attributes": {
                "type": "Category__c",
                "url": "/services/Category__c/a08Z0000000RNI3IAO"
            },
            "id": "a0O",
            "display_name": "ADR"
        }]
    }

    }],
    "count": 1
} 
```

我正在尝试进行跨域调用并出现错误

```
jQuery180014405992737595236_1357861668479 was not called 
```

***更新***

好吧，我尝试使用 dataType:"json" 但此时出现错误

```
No Transport 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T10:19:18.903

这表明网络错误或不返回 JSONP 响应的端点。

（我猜我在测试时遇到的 DNS 查找失败是因为那不是您的真实 URL（请使用`example.com`例如 URL，这就是它的用途）如果不是，那是您的问题）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T10:27:55.550

这是一个不正确的 JSONP 响应。服务器需要处理请求的`callback=nameOfCallbackFunction`参数`GET`并将其作为函数包装器。

正确的响应应该如下所示：

```
nameOfCallbackFunction({"yourjson": "here"}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-04T21:59:19.383

我知道这是一个旧线程，但一直在努力让跨域 ajax 示例正常工作。我读了很多关于使用 dataType: jsonp 和 support.cors = true 但得到 200 - 成功但 parseerror 的内容。

然后，我在此线程中阅读了有关使用其中一个的内容。然后我将 dataType: 更改为 json 并留下 support.cors = true 并且它起作用了。最后 。. .

这可能会帮助遇到相同问题的其他人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-22T14:32:05.130

出现JQueryXXXX错误是因为你调用的url有错误，需要引入“?callback=?”，所以看起来像：

```
"http://example.com/v1/search?callback=?keyword=r" 
```

另外，如果您调用 .php，请记住：

```
header('Content-Type: application/json; charset=utf8'); 
```

# android - 未能将数据发送回先前的意图

> ID：14255505
> 
> 赞同：0
> 
> 时间：2013-01-10T10:17:21.637
> 
> 标签：android, android-intent, android-activity

我正在使用 onActivityResult 从先前的意图中获取数据，它工作正常。

```
@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        switch (requestCode) {
        case (11): {
            newPosition = data.getIntExtra("position", 0);
            break;
        }
        }
    } 
```

但是当我使用操作栏后退按钮返回上一个意图时，就会出现问题。它给出了以下错误：

```
01-10 15:33:34.128: E/AndroidRuntime(642): FATAL EXCEPTION: main
01-10 15:33:34.128: E/AndroidRuntime(642): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=11, result=0, data=null} to activity {com.cogneti/com.cogneti.ui.recall.TestActivity}: java.lang.NullPointerException
01-10 15:33:34.128: E/AndroidRuntime(642):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2726)
01-10 15:33:34.128: E/AndroidRuntime(642):  at android.app.ActivityThread.handleSendResult(ActivityThread.java:2769)
01-10 15:33:34.128: E/AndroidRuntime(642):  at android.app.ActivityThread.access$2000(ActivityThread.java:123)
01-10 15:33:34.128: E/AndroidRuntime(642):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1023)
01-10 15:33:34.128: E/AndroidRuntime(642):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-10 15:33:34.128: E/AndroidRuntime(642):  at android.os.Looper.loop(Looper.java:126)
01-10 15:33:34.128: E/AndroidRuntime(642):  at android.app.ActivityThread.main(ActivityThread.java:3997)
01-10 15:33:34.128: E/AndroidRuntime(642):  at java.lang.reflect.Method.invokeNative(Native Method)
01-10 15:33:34.128: E/AndroidRuntime(642):  at java.lang.reflect.Method.invoke(Method.java:491)
01-10 15:33:34.128: E/AndroidRuntime(642):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
01-10 15:33:34.128: E/AndroidRuntime(642):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
01-10 15:33:34.128: E/AndroidRuntime(642):  at dalvik.system.NativeStart.main(Native Method)
01-10 15:33:34.128: E/AndroidRuntime(642): Caused by: java.lang.NullPointerException
01-10 15:33:34.128: E/AndroidRuntime(642):  at com.cogneti.ui.recall.TestActivity.onActivityResult(TestActivity.java:221)
01-10 15:33:34.128: E/AndroidRuntime(642):  at android.app.Activity.dispatchActivityResult(Activity.java:4483)
01-10 15:33:34.128: E/AndroidRuntime(642):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2722)
01-10 15:33:34.128: E/AndroidRuntime(642):  ... 11 more 
```

当我使用默认的后退按钮时它工作正常。

我在 onBackPressed() 方法中设置了结果。

```
@Override
    public void onBackPressed() {
        Intent resultIntent = new Intent();
        resultIntent.putExtra("position", selectedPosition);
        setResult(Activity.RESULT_OK, resultIntent);
        super.onBackPressed();
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:28:27.260

行，

用代码制作结果数据的函数。

```
Intent resultIntent = new Intent();
resultIntent.putExtra("position", selectedPosition);
setResult(Activity.RESULT_OK, resultIntent); 
```

`onStop()`并从以前的活动或`onDestroy()`以前的活动中调用此函数。

实际上我认为当你从操作栏按下返回时 `public void onBackPressed()`不会被调用，所以你必须在活动中调用这个`onStop()`代码`onDestroy()`。

**更新：**

我认为当您按回操作栏时会调用它

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    if (item.getItemId() == android.R.id.home) {
    // Here write your set Result on Intent code..          
    finish();
    return true;
}
 return super.onOptionsItemSelected(item);
} 
```

# c# - 从数据库c#中删除行

> ID：14255507
> 
> 赞同：0
> 
> 时间：2013-01-10T10:17:39.220
> 
> 标签：c#, database

为什么这段代码不起作用？

```
 (this.namesBindingSource.Current as DataRowView).Delete();         
        this.namesTableAdapter.Update(database1DataSet1); 
```

错误：当传递带有已删除行的 DataRow 集合时，更新需要有效的 DeleteCommand。

数据库是添加到项目中的基于服务的数据库，只有一个表显示在 dataGridView 中，并且此代码链接到按钮。您将单击行进行删除，然后按下按钮并得到错误....

怎么了？我快疯了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:19:53.460

错误消息是不言自明的。你需要一个有效`DeleteCommand`的 for `namesTableAdapter`。否则，它不知道您要删除“已删除”的行。对于`Update`or也是如此`Insert-Commands`。

`Delete()`只是改变[`RowState`](http://msdn.microsoft.com/en-us/library/system.data.datarow.rowstate.aspx). 如果您使用 a `DataAdapter`(or `TableAdapter`) 它需要知道如果状态是`Deleted`or时该怎么做`Modified`。

[**如何：创建 TableAdapter 查询**](http://msdn.microsoft.com/en-us/library/kda44dwy%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:35:49.703

使用`CommandBuilder`但请记住，您需要使用其中包含关键列的表。

# javascript - 在 exts 中为 htmleditor 字段添加所需的验证器？

> ID：14255511
> 
> 赞同：1
> 
> 时间：2013-01-10T10:17:49.470
> 
> 标签：javascript, extjs, extjs4, extjs4.1

请让我知道如何将所需的验证检查添加到 extjs 中的“htmleditor”字段，allowBlank:false 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:02:40.483

在 Ext 4.1.3 文档中，没有像 'allowBlank' 这样的配置`Ext.form.field.HtmlEditor`。

因此，检查 htmleditor 是否有价值的一种方法是使用`getValue()`方法。

# javascript - 是否有可能从 getImageData 中获得超过 8 位的颜色值？

> ID：14255513
> 
> 赞同：1
> 
> 时间：2013-01-10T10:17:49.993
> 
> 标签：javascript, canvas, getimagedata

我正在尝试在 html5 画布上操作像素。使用 getImageData 方法，我只能得到一个带有画布 RGBA 值的 Uint8Array。是否有可能获得更精确的数组？我想操作图片的所有 16 位颜色值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:20:52.747

不，因为画布上下文的颜色空间*必须*与 CSS 颜色值的颜色空间匹配：

> 在支持 CSS 的用户代理中，画布元素使用的颜色空间必须与用于处理 CSS 中该元素的任何颜色的颜色空间相匹配。

此外，当前规范`ImageData`仅提供了一个 8 位数组：

```
interface ImageData {
  readonly attribute unsigned long width;
  readonly attribute unsigned long height;
  readonly attribute Uint8ClampedArray data;
}; 
```

### 参考

*   [http://www.w3.org/TR/html5/embedded-content-0.html#color-spaces-and-color-correction](http://www.w3.org/TR/html5/embedded-content-0.html#color-spaces-and-color-correction)
*   [http://www.w3.org/html/wg/drafts/2dcontext/html5_canvas/#imagedata](http://www.w3.org/html/wg/drafts/2dcontext/html5_canvas/#imagedata)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:26:39.967

如今，大多数显示系统通常的颜色分辨率是每个颜色通道和像素 8 位（每个 RGBA 像素 32 位），并且在不久的将来不太可能增加，因为人眼无法区分更小的颜色细微差别。因此，getImageData 和 setImageData 使用每个颜色通道 8 位。

通常只有图像处理需要更高的颜色分辨率。当您想在内部以每通道 16 位或更多位执行图像处理操作时，您始终可以自己转换 getImageData 返回的值，并在使用 setImageData 返回之前将它们转换回 8 位。

# php - PHP 为什么在源代码中使用换行符

> ID：14255514
> 
> 赞同：-2
> 
> 时间：2013-01-10T10:17:57.507
> 
> 标签：php

我在 php.net 网站上阅读并看到很多代码尝试回显“\n”。这样做有什么意义，因为我们需要查看源代码才能看到新的突破。为什么不简单地使用`<br />`标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:21:05.727

可能该程序旨在从命令行而不是浏览器运行？

可能它在浏览器中运行，但输出为`text/plain`？

可能它是在 HTML 中，但打印在`<pre>`标签内？

可能只是因为作者想让它在从浏览器中“查看源代码”时看起来整洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:21:29.067

PHP 输出不需要是 HTML，它可以是任何东西。如果 PHP 从控制台运行，`<br />`将显示为`<br />`, 而`"\n"`为换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:21:16.667

当您使用从控制台运行脚本时

```
<br /> 
```

你看不到断线只是这些符号

# webdriver - 发生 java 脚本错误或某些内容正在加载一段时间时，Webdriver 脚本挂起

> ID：14255520
> 
> 赞同：0
> 
> 时间：2013-01-10T10:18:03.167
> 
> 标签：webdriver

我创建了 selenium-webdriver 脚本，它在 FF 和 chrome 上运行良好，但在 IE-8 中无法正常工作。似乎应用程序挂在某个页面上并且等待了很长时间而没有给出任何错误。

我尝试了不同版本的 IE 驱动程序`2.25.x.x to 2.28.x.x`-`OS: Windows XP` 如果有任何解决方法，请告诉我。

提前致谢。

**分析：**

*   我观察到如果应用程序出现 JavaScript 错误或某些内容/图像正在某个页面加载，那么只有我遇到了这个问题。
*   此外，当我清除浏览器缓存并从任务管理器中删除正在运行的 IEDriverServer.exe 时，有时脚本会成功执行，但并非总是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:39:12.457

希望您已将 IE 设置中的所有安全区域的[保护模式](http://jimevansmusic.blogspot.in/2012/08/youre-doing-it-wrong-protected-mode-and.html)设置为启用或相同。

# javascript - 带图像的样式 knockout.js 单选按钮

> ID：14255521
> 
> 赞同：1
> 
> 时间：2013-01-10T10:18:08.363
> 
> 标签：javascript, css, knockout.js

当用户选择单选按钮时，我正在使用 knockout.js 显示价格和 ID，这是脚本：

```
<div data-bind="with: bin2ViewModel">
    <div class="divRadiobtns" data-bind="foreach: availableGroups">
    <input type="radio" class="radioOptions" name="retailerGroup" data-bind="checked: $parent.selectedGroupOption, value: price" />
    </div>
    <div data-bind="with: selectedRetailerGroup">
    <span class="actualPrice" data-bind="text: price" />
    </div>
    <div data-bind="with: selectedRetailerGroup">
    <input type="hidden"  class="hiddenValue" data-bind="value: retailerproductId" />
    </div>
    </div> 
```

淘汰赛.js：

```
<script type="text/javascript">
//<![CDATA[
     var Bin2ViewModel = function () {
     var self = this;
     this.selectedRetailerGroup = ko.observable();
     this.selectedGroupOption = ko.observable();
     this.selectedGroupOption.subscribe(function (newVal) {
     var items = $.grep(self.availableGroups(), function (item) { return item.price() == newVal; });
     self.selectedRetailerGroup(items[0]);
     });
     this.selectedGroup = ko.observable();
     this.availableGroups = ko.observableArray(
    [  new RetailerViewModel("302852", "£2.55"),
  new RetailerViewModel("21290", "£1.80")
     ]);
     }
     var RetailerViewModel = function (retailerproductId, price) {
     this.retailerproductId = ko.observable(retailerproductId);
     this.price = ko.observable(price);
     }
     ko.applyBindings({ bin2ViewModel: ko.observable(new Bin2ViewModel()) });
//]]>
 </script> 
```

我想用图像设置单选按钮的样式，所以我尝试过：

CSS：

```
 .radioOptions
        {
            background: url("http://static.e-talemedia.net/content/images/odditiesyellowselector.png") no-repeat scroll 0 0 transparent;
           margin-bottom: 25px;
    margin-top: 17px;
}

.radioOptions-checked
    {
        background: url("http://static.e-talemedia.net/content/images/odditiesyellowblackselector.png") no-repeat scroll 0 0 transparent;
    } 
```

但我无法理解它 - 有没有人知道我如何在 knockout.js 中设置样式？

我以前使用 jquery 如下：

```
<%--<script type="text/javascript">
      //<![CDATA[
        $(function () {
            $('input:radio').hide().each(function () {
                var label = $("label[for=" + '"' + this.id + '"' + "]").text();
                $('<a title=" ' + label + ' " class="radio-fx ' + this.name + '" href="#"><span class="radio"></span></a>').insertAfter(this);

            });

            $('.radio-fx').click(function () {
                $check = $(this).prev('input:radio');
                var unique = '.' + this.className.split(' ')[1] + ' span';
                $(unique).attr('class', 'radio');
                $(this).find('span').attr('class', 'radio-checked');
                $check.attr('checked', true);
                var rpPrice = $('input[name=selectRetailer]:radio:checked');
                // Here I have an ID
                $(".actualPrice").html(rpPrice.val());

                //                var rpId = $('input[name=selectRetailer]:radio:checked');
                //                $(".actualPrice").html(rpId.val());

            }).on('keydown', function (e) {
                if (e.which == 32) {
                    $(this).trigger('click');
                }

            });

        });      
    //]]>
    </script>--%> 
```

但这抛出了 knockout.js

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:19:57.767

您不能直接设置输入元素的背景样式，但这会给您一个起点：http: [//jsfiddle.net/7aPwp/2](http://jsfiddle.net/7aPwp/2)

您应该将`style`绑定用于样式和`css`类。

例子：

```
<span class="radioOptions" data-bind="css: { 'radioOptions-checked': $parent.selectedGroupOption() == price() }">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> 
```

# android - 阻止 ShareActionProvider 写入共享历史文件

> ID：14255522
> 
> 赞同：1
> 
> 时间：2013-01-10T10:18:08.037
> 
> 标签：android, android-4.2-jelly-bean, shareactionprovider

我想阻止 ShareActionProvider 写入任何历史文件。我试图找到从共享菜单中选择共享应用程序时调用了哪个回调函数，但没有找到回调方法。我想找出更新共享历史文件的回调方法。这将帮助我覆盖该方法并改变行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:18:55.487

我觉得在我们的评论之后你可以回答你自己的问题，但你没有这样：

您有两个选项，这些选项基于以下结论：您将无法直接覆盖某些内容以避免历史记录，因此：

1）这里是所有原始类的链接，您将它们复制到您的项目并构建了一个 NoHistoryShareActionProvider。[ShareActionProvider](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/ShareActionProvider.java?av=f)、[ActivityChooserView](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/ActivityChooserView.java?av=f)、[ActivityChooserModel](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/ActivityChooserModel.java?av=f)以及在 GrepCode 上的更多内容，您可以找到任何其他必要的类。

2) 退一步，从[ActionProvider](http://developer.android.com/reference/android/view/ActionProvider.html)创建一个子类，模仿 ShareActionProvider 的外观而没有历史记录。

我同意两者都是很长的解决方案，并且有一个简单的配置来决定是否拥有它会很棒，但事实就是如此。

快乐编码！

# php - 以自定义帖子类型显示来自 2 个类别/分类的帖子

> ID：14255529
> 
> 赞同：0
> 
> 时间：2013-01-10T10:18:25.540
> 
> 标签：php, wordpress, loops, categories, taxonomy

我正在 wordpress 中制作节日网站的阵容页面。我在我的 wordpress 主题“艺术家”中添加了一个自定义帖子类型。我有 3 个类别代表不同的日子，2 个类别代表每个节日的不同阶段。我现在想展示按日期和舞台分类的所有艺术家。例如：

**星期五**
ROOM1：ARTIST1、ARTIST2、ARTIST3、...
ROOM2：ARTIST4、ARTIST5、ARTIST6、...
**星期六**
ROOM1：ARTIST1、ARTIST2、ARTIST3、...
ROOM2：ARTIST4、ARTIST5、ARTIST6、...
**星期日**
ROOM1：ARTIST1 , ARTIST2, ARTIST3, ...
ROOM2: ARTIST4, ARTIST5, ARTIST6, ...

我尝试了几个小时为此找到正确的代码，但没有雪茄，这里使用“类别”是否错误，因为它是自定义帖子类型？

谢谢你的帮助

```
<h2>FRIDAY</h2>
                        <?php // the loop ?>
                            <?php $query = new WP_Query( array( 'category__and' => array( 6, 7 ) ) ); ?>

                            <?php if ($query->have_posts()) : ?>

                                <?php while ($query->have_posts()) :$query->the_post(); ?>

                                    <?php $query->get_template_part( 'includes/loop' , 'index'); ?>

                                <?php endwhile; ?>                  

                            <?php else : ?>

                                <p><?php _e( 'Sorry, no artists found.', 'themify' ); ?></p>

                            <?php endif; ?> 

                        <h2>SATURDAY</h2>

                        <h2>SUNDAY</h2> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:58:38.383

作为您正在处理的自定义帖子类型，您必须在查询中通过添加`'post_type' => 'artist'`

关于类别，如果您也使用自定义类别，请查看[此处](http://codex.wordpress.org/Class_Reference/WP_Query#Taxonomy_Parameters)，您需要添加以下内容：

```
'tax_query' => array(
    array(
        'taxonomy' => 'category',
        'field' => 'id',
        'terms' => array(6,7)
    )
) 
```

如果您使用的是默认的 WP 类别，您应该可以只使用：`'category__in' => array(6,7)`而不是 category__and

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:42:27.927

你应该尝试这样的事情：

```
<?php $query = new WP_Query( 
                   array(
                       'tax_query' => array(
                            array(      
                                'taxonomy' => '[taxonomy-name]',
                                'field' => 'id',
                                'terms' => array(6, 7),
                                'operator' => 'AND'
                            )
                        ),
                        'posts_per_page' => -1
                    )
                ); ?>

<?php if ($query->have_posts()) : ?>
    <?php while ($query->have_posts()) :$query->the_post(); ?>
        <?php $query->get_template_part( 'includes/loop' , 'index'); ?>
    <?php endwhile; ?>                  
<?php else : ?>
   <p><?php _e( 'Sorry, no artists found.', 'themify' ); ?></p>
<?php endif; ?> 
```

不要忘记填写正确的分类名称，您可以将术语添加到数组中希望这会有所帮助。

# c# - 如何使用 Windows 剪贴板和 C# 复制/粘贴特殊字符

> ID：14255530
> 
> 赞同：0
> 
> 时间：2013-01-10T10:18:27.163
> 
> 标签：c#, windows, special-characters, clipboard

[我在这篇文章](https://stackoverflow.com/questions/10440206/how-can-i-get-special-unicode-characters-to-appear-when-pasting-the-clipboard-in)中发现了一个类似的问题，但我的问题不同，所以值得一个新的帖子。

基本上，我有一个生成文本输出的 WPF/C# 应用程序。文本输出包括几个特殊“℗”字符的实例。用户可以单击一个按钮以通过电子邮件发送信息，这部分工作正常。用户可以单击应用程序中的另一个按钮将相同的文本输出复制到剪贴板，这就是我遇到问题的地方。我正在使用以下代码复制/粘贴文本。

```
public void SetClipboardText(string text)
{
    try { Clipboard.SetData(DataFormats.Text, text); }
    catch (COMException)
    {
        MessageBox.Show("The clipboard was inaccessible, please try again later");
    }
}

public string GetClipboardText()
{
    if (Clipboard.ContainsData("Text"))
    {
        try { return Clipboard.GetData(DataFormats.Text) as string; }
        catch (COMException)
        {
            MessageBox.Show("The clipboard was inaccessible, please try again later");
        }
    }
    return string.Empty;
} 
```

将复制的文本粘贴到任何外部文本编辑应用程序时，“℗”字符将替换为“？” 特点。在互联网上搜索后，我发现了另一篇关于在复制到剪贴板之前编码 HTML 的类似问题的文章。但是，在`SetClipboardText`方法中添加以下代码行作为第一行之后，粘贴的“℗”字符现在在输出中被替换为“â„—”。

```
text = Encoding.GetEncoding(0).GetString(Encoding.UTF8.GetBytes(text)); 
```

这告诉我这是一个编码问题。所以我的问题真的是，'我可以使用哪种字符编码来成功复制和粘贴'℗'字符？'。正如您从这篇文章中的所有“℗”字符中看到的那样，确实可以使用剪贴板复制和粘贴它们......但是如何？

附加信息：

“℗”字符来自所有 Windows PC 中包含的 Arial 字体，也可以在 Word 中的“普通文本”字体中找到。在`(int)'℗'`Visual Studio QuickWatch 窗口中输入后，我得到了字符的相关整数值 8471。

**解决方案更新：**

感谢@Ilya Ivanov，我已将复制/粘贴代码更改为以下代码，现在可以成功复制和粘贴特殊字符。

```
public void SetClipboardText(string text)
{
    try { Clipboard.SetText(text); }
    catch (COMException)
    {
        MessageBox.Show("The clipboard was inaccessible, please try again later");
    }
}

public string GetClipboardText()
{
    if (Clipboard.ContainsText())
    {
        try { return Clipboard.GetText(); }
        catch (COMException)
        {
            MessageBox.Show("The clipboard was inaccessible, please try again later");
        }
    }
    return string.Empty;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T10:22:29.213

# r - 使用 ggplot2 对日志正常比例的漂亮刻度（动态而非手动）

> ID：14255533
> 
> 赞同：45
> 
> 时间：2013-01-10T10:18:49.497
> 
> 标签：r, plot, ggplot2

我正在尝试使用 ggplot2 创建具有对数正态 y 刻度的性能图表。不幸的是，对于基本绘图功能，我无法生成漂亮的刻度。

这是我的例子：

```
library(ggplot2)
library(scales)

# fix RNG
set.seed(seed = 1)

# simulate returns
y=rnorm(999, 0.02, 0.2)

# M$Y are the cummulative returns (like an index)
M = data.frame(X = 1:1000, Y=100)

for (i in 2:1000)
  M[i, "Y"] = M[i-1, "Y"] * (1 + y[i-1])

ggplot(M, aes(x = X, y = Y)) + geom_line() + scale_y_continuous(trans = log_trans()) 
```

产生丑陋的滴答声：

![在此处输入图像描述](../Images/bae35aec26b2db997dcceef92df17f01.png)

我也试过：

![在此处输入图像描述](../Images/be9a792ddfc660a92a3b9057e2dc76e7.png)

```
ggplot(M, aes(x = X, y = Y)) + geom_line() + 
  scale_y_continuous(trans = log_trans(), breaks = pretty_breaks()) 
```

如何获得与默认绘图功能相同的中断/刻度：

```
plot(M, type = "l", log = "y") 
```

![在此处输入图像描述](../Images/b5838039a64c4acd715932121c3a78e2.png)

结果应该看起来像这样，但不是硬输入中断而是动态的。我尝试了类似`axisTicks()`但没有成功的功能：

```
ggplot(M, aes(x = X,y = Y)) + geom_line() + 
  scale_y_continuous(trans = log_trans(), breaks = c(1, 10, 100, 10000)) 
```

![在此处输入图像描述](../Images/cbf86083bd23110c976c5d21ff504a57.png)

谢谢！

编辑：插入图片

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-03-06T14:47:22.003

可以使用自定义中断函数重现基本图形行为：

```
base_breaks <- function(n = 10){
    function(x) {
        axisTicks(log10(range(x, na.rm = TRUE)), log = TRUE, n = n)
    }
} 
```

将此应用于示例数据会得到与使用相同的结果`trans_breaks('log10', function(x) 10^x)`：

```
ggplot(M, aes(x = X, y = Y)) + geom_line() +
    scale_y_continuous(trans = log_trans(), breaks = base_breaks()) + 
    theme(panel.grid.minor = element_blank()) 
```

![十次方破](../Images/4af4546d12fadd280cf9c17449fb8a6a.png)

但是，我们可以在数据子集上使用相同的函数，y 值在 50 到 600 之间：

```
M2 <- subset(M, Y > 50 & Y < 600)
ggplot(M2, aes(x = X, y = Y)) + geom_line() +
    scale_y_continuous(trans = log_trans(), breaks = base_breaks()) + 
    theme(panel.grid.minor = element_blank()) 
```

由于 10 的幂在这里不再适合，`base_breaks`产生替代的漂亮休息：

![漂亮的休息](../Images/b68d4f9aefe53066f3728cf27319d75f.png)

请注意，我已关闭次要网格线：在某些情况下，在 y 轴上的主要网格线之间设置网格线是有意义的，但并非总是如此。

**编辑**

假设我们修改 M 使最小值为 0.1：

```
M <- M - min(M) + 0.1 
```

base_breaks() 函数仍然选择漂亮的中断，但标签是科学计数法，可能不会被视为“漂亮”：

```
ggplot(M, aes(x = X, y = Y)) + geom_line() +
    scale_y_continuous(trans = log_trans(), breaks = base_breaks()) + 
    theme(panel.grid.minor = element_blank()) 
```

![在此处输入图像描述](../Images/1c66dd777c56da7ba5dcf5cc1d76711c.png)

我们可以通过将文本格式化函数传递给 的`labels`参数来控制文本格式`scale_y_continuous`。在这种情况下`prettyNum`，来自基本包的工作很好：

```
ggplot(M, aes(x = X, y = Y)) + geom_line() +
scale_y_continuous(trans = log_trans(), breaks = base_breaks(),
                   labels = prettyNum) + 
theme(panel.grid.minor = element_blank()) 
```

![在此处输入图像描述](../Images/66437054b911604d0d02e18ce8efa4a5.png)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-10T13:17:13.947

当我在对数刻度上构建图表时，我发现以下工作非常好：

```
library(ggplot2)
library(scales)

g = ggplot(M,aes(x=X,y=Y)) + geom_line()
g +  scale_y_continuous(trans = 'log10',
                        breaks = trans_breaks('log10', function(x) 10^x),
                        labels = trans_format('log10', math_format(10^.x))) 
```

几个区别：

1.  轴标签显示为十的幂 - 我喜欢
2.  次要网格线位于主要网格线的中间（将此图与安德烈答案中的网格线进行比较）。
3.  x轴更好。出于某种原因，在 Andrie 的图中，x 轴范围不同。

给予

![在此处输入图像描述](../Images/04689789b798aba8bf096930b9377ab8.png)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-01-10T10:29:58.217

基本图形函数`axTicks()`返回当前绘图的轴中断。因此，您可以使用它来返回与基本图形相同的中断。唯一的缺点是您必须先绘制基本图形图。

```
library(ggplot2)
library(scales)

plot(M, type="l",log="y")
breaks <- axTicks(side=2)
ggplot(M,aes(x=X,y=Y)) + geom_line() +
  scale_y_continuous(breaks=breaks) +
  coord_trans(y="log") 
```

![在此处输入图像描述](../Images/4b7a5d153a33076079379e22121a3f96.png)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-11-02T08:42:44.843

这个问题终于随着`scales 1.0.0`新函数的发布而得到解决[`log_breaks()`](https://scales.r-lib.org/reference/log_breaks.html)，它返回基数整数幂的整数倍。

```
library(ggplot2)
ggplot(M, aes(x = X,y = Y)) + 
  geom_line() + 
  scale_y_log10(breaks = log_breaks()) 
```

[![](../Images/bf29f4ab75815138b57b6449b500f8a2.png)](https://i.stack.imgur.com/UBCoM.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-23T10:37:40.033

此函数允许指定所需的主要和次要刻度数。必须为该效果指定两次：

```
#' log scale
#'
#' Creates a function which returns ticks for a given data range. It uses some
#' code from scales::log_breaks, but in contrast to that function it not only
#' the exponentials of the base b, but log minor ticks (f*b^i, where f and i are 
#' integers), too.
#'
#' @param n Approximate number of ticks to produce
#' @param base Logarithm base
#'
#' @return
#'
#' A function which expects one parameter:
#'
#' * **x**: (numeric vector) The data for which to create a set of ticks.
#'
#' @export
logTicks <- function(n = 5, base = 10){
  # Divisors of the logarithm base. E.g. for base 10: 1, 2, 5, 10.
  divisors <- which((base / seq_len(base)) %% 1 == 0)
  mkTcks <- function(min, max, base, divisor){
    f <- seq(divisor, base, by = divisor)
    return(unique(c(base^min, as.vector(outer(f, base^(min:max), `*`)))))
  }

  function(x) {
    rng <- range(x, na.rm = TRUE)
    lrng <- log(rng, base = base)
    min <- floor(lrng[1])
    max <- ceiling(lrng[2])

    tck <- function(divisor){
      t <- mkTcks(min, max, base, divisor)
      t[t >= rng[1] & t <= rng[2]]
    }
    # For all possible divisors, produce a set of ticks and count how many ticks
    # result
    tcks <- lapply(divisors, function(d) tck(d))
    l <- vapply(tcks, length, numeric(1))

    # Take the set of ticks which is nearest to the desired number of ticks
    i <- which.min(abs(n - l))
    if(l[i] < 2){
      # The data range is too small to show more than 1 logarithm tick, fall
      # back to linear interpolation
      ticks <- pretty(x, n = n, min.n = 2)
    }else{
      ticks <- tcks[[i]]
    }
    return(ticks)
  }
} 
```

你的例子：

```
library(ggplot2)
library(scales)

# fix RNG
set.seed(seed=1)

# simulate returns
y=rnorm(999,0.02,0.2)

# M$Y are the cummulative returns (like an index)
M=data.frame(X=1:1000,Y=100)

for (i in 2:1000)
  M[i,"Y"]=M[i-1,"Y"]*(1+y[i-1])

ggplot(M,aes(x=X,y=Y))+geom_line()+
  scale_y_log10(breaks = logTicks(n = 4), minor_breaks = logTicks(n = 40)) 
```

[![具有对数刻度的绘图](../Images/20b975ae65352517506f06e6220b265c.png)](https://i.stack.imgur.com/CLAu3.png)

# php - Joomla json 输出组件 2.5 从控制器到视图

> ID：14255540
> 
> 赞同：0
> 
> 时间：2013-01-10T10:19:04.770
> 
> 标签：php, json, variables, joomla, components

我有一个问题要问你，我有一个 JSON Api，它给了我一些信息，其中一些没有用。

使用以下代码行，我可以调用所有信息并写入我的视图：

```
 $url = 'http://apisurl.com/prequalify/json/'.$postcode.'/'.$huisnummer.'';
    $content = file_get_contents($url);
    $json = json_decode($content); 
```

发送以查看：

```
$view->assignRef('info', $content); 
```

这是我的普通 PHP 代码：

```
foreach ($json['enduserinfo'] as $item) {
        echo " Postcode: {$item['zipcode']}
        <br /> Huisnummer: {$item['housenr']}
        <br /> Straatnaam: {$item['street']}
        <br /> Woonplaats: {$item['city']}
        <br /> Centrale: {$item['centrale']}
        <br /> Toegangspunt: {$item['access-area']}
        <br /> Isra: {$item['isra']}";
    } 
```

我如何在 Joomla 中获得相同的结果？

对我来说真正的问题是我不需要其他信息，我想设置一些变量来存储正确的数据。并且只将它们发送到我的视图。现在结果只是我页面中的一个完整的 JSON 文件。

在我正常的 php 脚本中，来自 Joomla 的 extern 工作正常。Joomla 有特殊的方法来做到这一点吗？

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:34:55.217

在您的控制器中，您应该执行以下操作：

```
$myJson = json_decode($content, true); // will make it as associative array
$theIndexIwantToSendToTheView = $myJson['enduserinfo'];
//send to view the variable $theIndexIwantToSendToTheView 
```

现在您可以使用变量处理**json**`$myJson`

这将解决您的问题。

# c++ - 空析构函数与文字析构函数

> ID：14255541
> 
> 赞同：16
> 
> 时间：2013-01-10T10:19:09.063
> 
> 标签：c++, c++11, destructor, constexpr, user-defined-literals

考虑以下代码：

```
#include <iostream>

class Test
{
    public:
        constexpr Test(const int x) : _x(x) {}
        constexpr int get() const {return _x;}
        ~Test() {} // HERE
    protected:
        const int _x;
};

int main()
{
    static constexpr Test test(5);
    return 0;
} 
```

如果我删除`HERE`代码编译良好的行，但如果我定义一个空的析构函数，它会导致编译错误，说它`Test`是非文字的。

为什么空析构函数和根本没有析构函数之间有什么区别？

编辑：另一个相关问题：如果空和文字析构函数不同，如何定义受保护的文字析构函数？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-10T10:39:36.067

来自 n3376 的报价

7.1.5/9

> 对象声明中使用的 constexpr 说明符将对象声明为 const。这样的对象应具有文字类型并应被初始化。如果它由构造函数调用初始化，则该调用应为常量表达式

3.9/10

> 如果满足以下条件，则类型是文字类型：
> 
> 它有一个微不足道的析构函数......

12.4/5

> 如果析构函数不是用户提供的并且如果：
> 
> — 析构函数不是虚拟的，
> 
> — 其类的所有直接基类都有微不足道的析构函数，并且
> 
> — 对于其类的所有属于类类型（或其数组）的非静态数据成员，每个这样的类都有一个微不足道的析构函数。
> 
> 否则，析构函数是不平凡的。

clang 诊断确实提供了更多信息：

```
error: constexpr variable cannot have non-literal type 'const C'

'C' is not literal because it has a user-provided destructor 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T22:28:42.123

没有析构函数会导致编译器添加一个微不足道的析构函数，这在规范中定义不正确，但基本上什么都不做。

如果你指定一个析构函数，它不会添加平凡的析构函数。你的析构函数很重要。

在您的情况下，`Test::~Test() { }`看起来非常琐碎，但这是对您所见内容的人类解释。更进一步，关于：

```
Test::~Test()
{
    int a = 5;
} 
```

我们可以看到优化器可以优化出 a，所以它显然什么都不做。怎么样：

```
Test::~Test()
{
    for (int i = 0; i < 1000; i += 2) {
        if ((i % 2) == 1)
            doSomeSideEffect(); // like throwing or setting a global
    }
} 
```

我们可以看到它`i`永远不会是奇怪的，所以析构函数什么都不做。

规范必须定义什么可以是 constexpr，什么不能。他们没有深入定义“什么都不做”的兔子洞，而是简单地声明，唯一对 constexpr 足够好的无所事事析构函数是编译器提供的琐碎析构函数。

# language-agnostic - 我可以在片段/评论中使用编程世界中的符号日期吗？

> ID：14255551
> 
> 赞同：1
> 
> 时间：2013-01-10T10:19:37.910
> 
> 标签：language-agnostic, coding-style

程序员经常在片段或注释中使用循环值。例如，在 Java 中

```
String s = "foo";    // recurrent value: "foo"
int i = 42;          // recurrent value: 42
double d = 1337;     // recurrent value: 1337 
```

**日期**是否有“元句法价值” ？或者也许是编程世界中通常用于片段/评论的**象征性日期（** [Unix epoch](http://en.wikipedia.org/wiki/Epoch_%28reference_date%29)、[Alan Turing](http://en.wikipedia.org/wiki/Alan_Turing)的出生日期等）？

您会在以下 Java 代码段的评论中选择什么日期？`10/01/2013 13:37:42`?

```
// clear the "time part" of a Calendar (10/01/2013 13:37:42 --> 10/01/2013 00:00:00)
Calendar cal = Calendar.getInstance();
cal.clear(Calendar.HOUR);
cal.clear(Calendar.MINUTE);
cal.clear(Calendar.SECOND);
cal.clear(Calendar.MILLISECOND); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T06:18:55.930

您可以将问题重命名为：**您最喜欢的“foo”日期/时间版本是什么？**

即大多数可以查看您的代码的程序员最容易识别的日期/时间值。

这可能也应该是一个有趣的值。也许星球大战首映 1977.05.25（但没有时间），或者回到未来雷击（1955 年 11 月 12 日 22:04:01？）

可能有数十个或数百个提案，但现在我认为我们的头脑中没有如此共同的日期/时间值。

# java - JRockit : -XX:+UnlockCommercialFeatures

> ID：14255557
> 
> 赞同：1
> 
> 时间：2013-01-10T10:19:55.380
> 
> 标签：java, jakarta-ee, jrockit

我想知道所有 JRockit 内存参数列表。

JRocket 是否有类似“-XX:+UnlockCommercialFeatures”的东西。任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:37:17.717

JRockit 命令行参考页面列出了所有可能的选项，

[http://docs.oracle.com/cd/E15289_01/doc.40/e15062/toc.htm](http://docs.oracle.com/cd/E15289_01/doc.40/e15062/toc.htm)

`-XX:+UnlockCommercialFeatures`似乎缺席。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T17:20:24.603

-XX:+UnlockCommercialFeatures 位于 Hotspot 和 JRockit 的合并版本上，现在称为 Java Mission Control，它随 Java7u40 及更高版本一起提供，允许在 JMC 5.2 中使用 Java Flight Recorder - 希望对您有所帮助

# c# - WCF XML 反序列化失败

> ID：14255562
> 
> 赞同：0
> 
> 时间：2013-01-10T10:20:02.667
> 
> 标签：c#, wcf

我有这个 WSDL（服务不是我的）：[http ://soaptest.webapi-beta.gratka.pl/dom.html?wsdl](http://soaptest.webapi-beta.gratka.pl/dom.html?wsdl)

当我从方法“pobierz_kategorie”得到响应时，我得到了这样的异常

CommunicationException 反序列化操作“pobierz_kategorie”的回复消息正文时出错。{"XML 文档有错误 (2, 501)。"} {"指定的类型无法识别：name='kategoria_drzewo', namespace='http://soap.webapi-beta.gratka.pl/dom .html'，在 ."}

我想问一下如何修改 WSDL 或 WCF 配置或生成的代理以使其工作。当我使用 PHP 调用该方法时，它可以工作，所以我想这一定是一些 XMLSerializer 问题。

这是我得到的响应消息：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://soap.webapi-beta.gratka.pl/dom.html" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
    <SOAP-ENV:Body>
        <ns1:pobierz_kategorieResponse>
            <drzewo_kategorii SOAP-ENC:arrayType="ns1:kategoria_drzewo[48]" xsi:type="ns1:drzewo_kategorii">
                <item xsi:type="ns1:kategoria_drzewo">
                    <id xsi:type="xsd:int">382</id>
                    <nazwa xsi:type="xsd:string">Dom</nazwa>
                    <dane xsi:type="xsd:string">0</dane>
                    <id_rodzic xsi:type="xsd:int">1</id_rodzic>
                    <poziom xsi:type="xsd:int">0</poziom>
                    <id_prasa xsi:type="xsd:int">2</id_prasa>
                </item>
                <item xsi:type="ns1:kategoria_drzewo">
                    <id xsi:type="xsd:int">8251</id>
                    <nazwa xsi:type="xsd:string">Pokoje</nazwa>
                    <dane xsi:type="xsd:string"/>
                    <id_rodzic xsi:type="xsd:int">382</id_rodzic>
                    <poziom xsi:type="xsd:int">1</poziom>
                    <id_prasa xsi:type="xsd:int">0</id_prasa>
                </item>
            </drzewo_kategorii>
        </ns1:pobierz_kategorieResponse>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

那就是请求：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:q1="http://soaptest.webapi-beta.gratka.pl/dom.html">
    <s:Body s:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
        <q1:pobierz_kategorie>
            <sesja xsi:type="xsd:string">ad9e730460e334b916c95533c8da320003ac7e14</sesja>
            <id_kategoria xsi:type="xsd:int">382</id_kategoria>
        </q1:pobierz_kategorie>
    </s:Body>
</s:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:28:07.460

我已检索到该 WSDL，并且响应消息名称与您上面的名称不匹配。您`pobierz_kategorieResponse`在 wsdl 中的位置，它`pobierz_kategorie_wyjscie`在 WSDL 定义中。

*留言*...

```
 <message name="pobierz_kategorie_wyjscie">
    <part name="drzewo_kategorii" type="tns:drzewo_kategorii"/>
  </message> 
```

*操作*...

```
<operation name="pobierz_kategorie">
  <input message="tns:pobierz_kategorie_wejscie"/>
  <output message="tns:pobierz_kategorie_wyjscie"/>
</operation> 
```

也许您需要重新生成服务引用或将其指向不同的端点。

**编辑**

您可能必须自定义您的reference.cs 文件（您生成的WCF 客户端代码）来处理soap 数组。我自己没有这样做，但是有一篇关于它的 SO 文章：-
[为什么 .NET 不会从 Web 服务反序列化我的原始数组？](https://stackoverflow.com/questions/30171/why-wont-net-deserialize-my-primitive-array-from-a-web-service)
我不是 100% 确定这是否与您遇到的问题相同。看起来您需要明确告诉 WCF - 对于此元素，这就是您反序列化数组的方式。抱歉，我无法提供更多帮助。

**编辑#2**
发布给您“soaptest”的 wsdl 与实际实现之间存在不匹配。注意命名空间。或者，您已经生成了测试 wsdl 端点的代码并将其指向 prod 端点。请参阅下面的命名空间。
您的请求的命名空间如下所示：-

*   [http://soaptest.webapi-beta.gratka.pl/dom.html](http://soaptest.webapi-beta.gratka.pl/dom.html)

但是响应的命名空间看起来像这样：-

*   [http://soap.webapi-beta.gratka.pl/dom.html](http://soap.webapi-beta.gratka.pl/dom.html)

那是行不通的！

尝试生成您的 WCF 客户端关闭

*   [http://soap.webapi-beta.gratka.pl/dom.html?wsdl](http://soap.webapi-beta.gratka.pl/dom.html?wsdl)

而不是关闭

*   [http://soaptest.webapi-beta.gratka.pl/dom.html?wsdl](http://soaptest.webapi-beta.gratka.pl/dom.html?wsdl)

# java - JDBC 和并发问题

> ID：14255565
> 
> 赞同：1
> 
> 时间：2013-01-10T10:20:06.643
> 
> 标签：java, mysql, database, jdbc, concurrency

我想要一些关于 jdbc 的并发问题的建议，我基本上需要更新一个值，然后使用更新然后选择检索该值，我假设通过关闭自动提交没有其他事务可以访问这个表，因此其他事务在提交之前，将无法执行更新和选择查询。

下面是一些示例代码。你认为这会奏效吗？还有其他人有更好的解决方案来实现吗？

```
int newVal=-1;
con.setAutoCommit(false);
PreparedStatement statement = con.prepareStatement("UPDATE atable SET val=val+1 WHERE id=?");
statement.setInt(1, id);
int result = statement.executeUpdate();
if (result != 1) {
    throw new SQLException("Nothing updated");
} else {
    statement = con.prepareStatement("SELECT val FROM atable WHERE id=?");
    statement.setInt(1, id);
    ResultSet resultSet = statement.executeQuery();
    if (resultSet.next()) {
        newVal =  resultSet.getInt("val");
    }
}
statement.close();
con.commit();
con.setAutoCommit(true); 
```

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T10:50:25.440

假设您使用某种形式的数据源，如果您想要事务性和隔离级别，您可以在那里进行配置。但要明确：

```
try(Connection con = ds.getConnection()){
   con.setTransactionIsolation(Connection.TRANSACTION_SERIALIZABLE);
   con.setAutoCommit(false);
   //...
} catch(SQLException sqle) {
   throw new MyModelException(e)
} 
```

现在，您可以通过更新表中的版本（或时间戳）字段来触发悲观锁定。这将触发数据库中的锁定（很可能在记录级别）：

```
try(PreparedStatement pStm = con.prepareStatement("update atable set version=version+1")){
   pStm.executeUpdate();
} 
```

此时，如果另一个用户尝试同时更新同一条记录，则此连接将等待或超时，因此您必须为这两件事做好准备。在您的事务结束（提交或回滚）之前，该记录不会被解锁。

然后，您可以安全地选择和更新您想要的任何内容，并确保在您处理数据时没有其他人接触您的记录。如果其他人尝试，他们将等待直到您完成（或者他们将根据连接配置超时）。

或者，您可以使用乐观锁定。在这种情况下，您阅读您的记录，对其进行修改，但在更新中，您通过检查版本/时间戳字段与您最初阅读的字段是否相同，确保自从您阅读它以来没有其他人更改它。在这种情况下，如果您意识到您有过时/过时的数据，您必须准备好重试事务（或全部中止）。

IE`update atable set afield=? where id=? and version=1`

如果受影响的行数为 0，那么您知道该记录很可能在您读取和更新之间进行了更新，并且该记录不再是版本 1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T10:27:16.020

设置`autocommit=false`您的连接*不会*阻止其他连接/线程更改数据库中的行！它只会在对该特定连接进行每次 JDBC 操作后禁用自动提交。

您将需要锁定该行，例如。with`select ... for update`以防止针对该行的其他事务，并且您还需要在单个事务中进行选择和更新。

干杯，

# c# - WPF C# ComboBox 和 DataGrid 显示全部而不是一个结果

> ID：14255566
> 
> 赞同：0
> 
> 时间：2013-01-10T10:20:07.140
> 
> 标签：c#, wpf, datagrid

我已经在该表上创建了一个表和 2 个字段的数据库。ID 和名称 SQL Server。
我的 WPF 应用程序有一个组合框，我将 Table.Name 绑定到组合框。
然后我将 DataGrid 绑定到表本身。

所以我所拥有的是当我在数据网格上的组合框中选择一个项目时，我得到的是“已选择”，我希望它显示在我选择的项目上。

谢谢

例如下面的图片，我选择第一个，但我只想显示第一个的数据而不选择。![在此处输入图像描述](../Images/3cf5b50cd1faa21bf430496548190c07.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:19:51.610

尝试将表格绑定到您的组合框，然后将数据网格绑定到组合框。SelectedItem 我没有 xaml 编辑器，但您将拥有如下内容：

```
<ComboBox x:Name="cbo_MyCbo" ItemsSource="{Binding Table}" DisplaMemberPath="Name">
    <!--DataTemplate If Needed-->
</ComboBox>
<Datagrid x:Name="dtg_MyDtg" ItemsSource="{Binding ElementName=cbo_MyCbo, Path=SelectedItem}">
    <!-- column def-->
</Datagrid> 
```

# python - Python失败注入

> ID：14255569
> 
> 赞同：5
> 
> 时间：2013-01-10T10:20:18.387
> 
> 标签：python, testing

有没有一种巧妙的方法可以在 Python 脚本中注入故障？我想避免在源代码中添加以下内容：

```
failure_ABC = True
failure_XYZ = True
def inject_failure_ABC():
    raise Exception('ha! a fake error')
def inject_failure_XYZ():
    # delete some critical file
    pass

# some real code
if failure_ABC:
    inject_failure_ABC()
# some more real code
if failure_XYZ:
    inject_failure_XYZ()
# even more real code 
```

**编辑：** 我有以下想法：插入“故障点”作为特制评论。编写一个简单的解析器，该解析器将在 Python 解释器之前调用，并将生成带有实际故障代码的实际检测 Python 脚本。例如：

```
#!/usr/bin/parser_script_producing_actual_code_and_calls python
# some real code
# FAIL_123
if foo():
    # FAIL_ABC
    execute_some_real_code()
else:
    # FAIL_XYZ
    execute_some_other_real_code() 
```

脚本将任何以 开头的`FAIL_`内容视为故障点，并根据配置文件启用/禁用故障。你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:27:27.983

在测试错误处理时，最好的方法是将可能引发错误的代码隔离在一个可以在测试中覆盖的新方法中：

```
class ToTest:
    def foo(...):
        try:
            self.bar() # We want to test the error handling in foo()
        except:
            ....

    def bar(self):
        ... production code ... 
```

在您的测试用例中，您可以使用引发您要测试的异常的代码进行扩展`ToTest`和覆盖。`bar()`

**编辑**您真的应该考虑将大型方法拆分为较小的方法。它将使代码更易于测试、理解和维护。查看[测试驱动开发](http://en.wikipedia.org/wiki/Test-driven_development)，了解如何改变开发过程的一些想法。

关于您使用“失败评论”的想法。这看起来是一个很好的解决方案。有一个小问题：您必须编写自己的 Python 解析器，因为 Python 在生成字节码时不会保留注释。

所以你可以花几个星期来写这个，也可以花几个星期来让你的代码更容易测试。

但是，有一个区别：如果您不一直走下去，解析器将毫无用处。此外，所花费的时间不会改进您的代码。大部分工作将用于解析器和工具。因此，经过这么长时间，您仍然需要改进代码、添加失败注释并编写测试。

通过重构代码，您可以随时停止，但到目前为止所花费的时间将是有意义的，不会浪费。您的代码将随着您所做的第一次更改而开始变得更好，并且会不断改进。

编写一个复杂的工具需要时间，它会有自己的错误需要修复或解决。这些都不会在短期内改善您的情况，您也不能保证它会在长期内改善。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T10:33:37.717

您可以使用模拟库，例如[unittest.mock](http://docs.python.org/dev/library/unittest.mock)，也存在许多第三方库。然后，您可以模拟您的代码使用的某些对象，以便它抛出您的异常或以您希望的任何方式运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T10:24:16.417

If you only want to stop your code at some point, and fall back to interactive interpreter, one can use:

```
assert 1==0 
```

But this only works if you do not run python with -O

**Edit** Actually, my first answer was to quick, without really understanding what you want to do, sorry.

Maybe your code becomes already more readable if you do parameterization through parameters, not through variable/function suffices. Something like

```
failure = {"ABC": False, "XYZ":False}

#Do something, maybe set failure

def inject_failure(failure):
    if not any(failure.values()):
        return
    if failure["ABC"]:
        raise Exception('ha! a fake error')
    elif failure["XYZ"]:
        # delete some critical file
        pass

inject_failure(failure) 
```

# silverlight - 自定义控件中的 Silverlight HyperlinkBut ton 样式

> ID：14255571
> 
> 赞同：0
> 
> 时间：2013-01-10T10:20:34.447
> 
> 标签：silverlight, xaml

我有一个奇怪的造型问题，我无法弄清楚。我想要实现的是，当鼠标悬停链接时，datagrid 单元格中的 HyperlinkBut​​tons 的样式带有下划线。

我有一列在 XAML 中声明 HyperlinkBut​​ton 元素，如下所示：

```
<HyperlinkButton Style="{StaticResource HyperlinkButtonStyle}" DataContext="{Binding}" FontSize="11" Content="{Binding DguNr}" Click="DgunrHyperlinkButtonClick" /> 
```

这很好用 - 链接的样式是我想要的。在另一列中，我需要根据绑定元素中的一些信息显示 n 个 HyperlinkBut​​tons。因此，我创建了一个将呈现 0..n 超链接按钮的用户控件。该控件在 XAML 中声明如下：

```
<sdk:DataGridTemplateColumn IsReadOnly="True" CanUserSort="True">
                        <sdk:DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <bc:BoreholePlantGridColumn Plants="{Binding Plants, Mode=OneWay}" />
                            </DataTemplate>
                        </sdk:DataGridTemplateColumn.CellTemplate>
                    </sdk:DataGridTemplateColumn> 
```

控件背后的代码如下所示：

```
public partial class BoreholePlantGridColumn : UserControl, INotifyPropertyChanged
{
    public BoreholePlantGridColumn()
    {
        InitializeComponent();
        Loaded += new RoutedEventHandler(BoreholePlantGridColumn_Loaded);
    }

    void BoreholePlantGridColumn_Loaded(object sender, RoutedEventArgs e)
    {
        var borehole = (SelectableBoring)this.DataContext;
        foreach(var p in borehole.Plants)
        {
            // <HyperlinkButton HorizontalAlignment="Stretch" VerticalAlignment="Stretch" VerticalContentAlignment="Center" HorizontalContentAlignment="Center" DataContext="{Binding}" Foreground="Black" FontSize="11" Content="{Binding DguNr}" Click="DgunrHyperlinkButtonClick" />
            var button = new HyperlinkButton();
            button.Content = p.PlantId;
            button.Style = (Style)App.Current.Resources["HyperlinkButtonStyle"];
            button.VerticalContentAlignment = VerticalAlignment.Center;
            var url = String.Format(Common.Constants.Url.GeusPlantLinkTemplate, p.PlantId);
            button.NavigateUri = new Uri(url, UriKind.RelativeOrAbsolute);
            button.TargetName = "_blank";
            LayoutRoot.Children.Add(button);
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public static readonly DependencyProperty PlantsProperty = DependencyProperty.Register("Value", typeof(Anlaeg), typeof(BoreholePlantGridColumn), new PropertyMetadata(new PropertyChangedCallback(ValueChanged)));

    public IList<Anlaeg> Plants
    {
        get { return (IList<Anlaeg>)this.GetValue(PlantsProperty); }
        set { this.SetValue(PlantsProperty, value); }
    }

    private static void ValueChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        var myUC = (BoreholePlantGridColumn)obj;
        var newValue = (IList<Anlaeg>)e.NewValue;

    }
} 
```

这几乎可以按预期工作；链接按钮以正确的颜色呈现 - 但是当鼠标悬停在链接上时没有显示下划线文本。我不明白为什么下划线显示在直接在 XAML 中声明的超链接按钮中，而不是在代码隐藏中呈现的超链接中。有人可以帮我吗？

我使用了这个线程中的超链接按钮样式：[1](https://stackoverflow.com/questions/3141392/how-can-i-add-an-underline-to-a-hyperlinkbutton-in-silverlight)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:06:57.400

我只是使用以下代码

```
<ListBox Grid.Column="1" ItemsSource="{Binding EncyclopediaList}" HorizontalContentAlignment ="Stretch" Margin="5,0" >
    <ListBox.ItemTemplate>
      <DataTemplate>
         <HyperlinkButton Content="{Binding Name}" Foreground="Black" Command="{Binding ViewArticlePageCommand, Source={StaticResource EncyclopediaViewModel}}" CommandParameter="{Binding ServerEncyclopediaID}" FontFamily="Arial" FontSize="18" />
      </DataTemplate>
   </ListBox.ItemTemplate>
</ListBox> 
```

无需在我的案例中完美地设置 HyperlinkBut​​ton 的样式添加下划线并在鼠标移过它时使其变为粗体。

# nhibernate - 使用 (Fluent)NHibernate 保存过滤后的关联

> ID：14255576
> 
> 赞同：1
> 
> 时间：2013-01-10T10:20:41.730
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我有以下实体

```
User
Job 
```

一个用户有最喜欢的工作。这是与 Job 的多对多关联。此外，此关联会被过滤，以便仅获取活动（未归档）作业。

FavoriteJobs 关联的映射如下所示。

```
HasManyToMany(x => x.FavoriteJobs)
.Table("UserJob")
.ParentKeyColumn("UserId")
.ChildKeyColumn("JobId")
.ApplyChildFilter<ExcludeArchivedJobsFilter>("IsArchived = :condition")
.Cascade.None(); 
```

可以随时从应用程序归档和取消归档作业。

获取用户时，FavoriteJobs 集合中填充了正确的作业，只有活动的作业。

问题是当我想保存用户时，所有被过滤的作业都被视为它们的关联已被破坏并从交叉引用表中删除（就像用户将过滤后的作业标记为不再收藏一样） .

我想知道是否有任何模式可以将过滤的条目标记为刚刚过滤而不是删除。

当有更新事件时，例如从映射中禁用过滤器。

我会很感激任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:52:52.063

保存时集合集合将完全重写集合，这就是过滤元素消失的原因。

我可能是由于 NHibernate 给出的原因，列表集合会丢失它们[- 过滤的多对多关系返回空记录](https://stackoverflow.com/questions/14237285/nhibernate-filtered-manytomany-relationship-returns-null-records/14242346#14242346)

您可以尝试使用 bag 或 idbag 来代替吗？或者在更新场景期间禁用过滤器。

# r - googlemaps 上的两组位置

> ID：14255579
> 
> 赞同：1
> 
> 时间：2013-01-10T10:20:43.997
> 
> 标签：r, google-maps-api-3, google-api, google-visualization

我有两个位置列表......（通过邮政编码或经纬度），并且想将两个列表放在同一个谷歌地图上......但表示不同的颜色......

这是对原始问题的跟进

[使用谷歌的邮政编码距离](https://stackoverflow.com/questions/14241184/postcode-distances-using-google)

即有没有办法将所有学生位置和学校位置放在一个用不同颜色表示的谷歌地图上？

也许使用`googleVis`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:51:00.640

听起来像一个“类别”地图。 以下是[Mike Williams 的 Google Maps API v2 教程](http://econym.org.uk/gmap/categories.htm)[中的类别地图示例，该](http://www.geocodezip.com/v3_MW_example_categories.html)教程已移植到 Google Maps API v3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:35:00.930

如果您有大量数据，一次显示所有数据是不切实际的。最好只显示一种数据类型，例如学校，如果您单击单个标记，则会显示该学校特定半径内最近的学生。

您最后一个问题的答案向您展示了如何找到在地图上显示所需的坐标

# perl - Perl 检测 DESTROY 作为 die() 的结果

> ID：14255585
> 
> 赞同：2
> 
> 时间：2013-01-10T10:21:14.083
> 
> 标签：perl

我有一个对象，我做了很多事情，然后通过调用 TidyUp() 方法来完成，该方法显示一些关于发生了什么的统计信息。

作为内部测试的一部分，我想检测这些对象何时被创建，但在程序退出之前没有整理，在这种情况下会死掉。

因此，我为在 TidyUP() 中设置的对象添加了一个标志，并为如果未设置此标志而死的类添加了一个 DESTROY 子例程。

这一切都很好，但它有一个不幸的副作用。如果程序中出现其他问题，导致 die 被调用，那么全局销毁会触发我的 DESTROY，它会注意到对象没有被整理并死亡。问题是我此时丢失了原始的 die 消息。

所以我想检测破坏是由于骰子还是正常程序退出而发生的，只有在后一种情况下才添加我的新骰子。

我看过[Detecting global destroy in Perl](https://stackoverflow.com/questions/4902718/detecting-global-destruction-in-perl)但我认为这没有帮助，因为我想检测是什么触发了全局破坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:39:58.367

您可以挂钩到`$SIG{__DIE__}`全局异常处理程序：

```
#!/usr/bin/perl
use Modern::Perl;

package Foo;
my $DIED = 0;
BEGIN { $SIG{__DIE__} = sub { $DIED = 1 }; }

sub new { bless [0] }
sub DESTROY { die 'untidy' unless shift->[0] or $DIED }
sub tidy_up { shift->[0] = 1 }

package main;
my $foo = new Foo;
die if @ARGV; # line 13
$foo->tidy_up();
say 'success';

$ perl test.pl
success

$ perl test.pl die
Died at test.pl line 13. 
```

由于该异常处理程序是全局安装的，因此请确保您没有覆盖现有的错误处理程序。[Signals::XSIG 对此有所](https://metacpan.org/module/Signals%3a%3aXSIG)帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:01:28.657

通过解决这个问题，我看到方法中的调用堆栈`DESTROY`根据程序的退出方式略有不同。也许这会有所帮助：

```
package Foo;
sub new { bless [], __PACKAGE__ }
sub DESTROY {
    my ($n,$pkg,$file,$line);
    while (my @c=caller($n++)) {
        ($pkg,$file,$line) = @c;
    }
    print STDERR "DESTROY called via $file line $line\n";
}
my $foo = Foo->new;
if ($ARGV[0] eq 'die') { die }       # line 11
if ($ARGV[0] eq 'exit') { exit }     # line 12
# else passive exit

$ perl 14255585.pl die
Died at 14255585.pl line 11.
DESTROY called via 14255585.pl line 11

$ perl 14255585.pl exit
DESTROY called via 14255585.pl line 12

$ perl 14255585.pl foo
DESTROY called via 14255585.pl line 0 
```

如果程序中的退出点列表很小且定义明确，则可以枚举它们并在程序结束时处理它们。否则，您可以进行一些即时静态代码分析，以查看可能的死亡原因是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:17:15.750

您可以在检查对象是否已整理之前设置一个全局标志。然后你知道你的程序在哪个阶段运行。您还可以尝试在程序终止时使用`$SIG{__DIE__}`. 检查`$?`是不安全的，因为它可以通过其他方式设置。检查您是否处于全球破坏中也应该有效。但最干净的解决方案是将所有需要整理的对象存储在一个额外的数组中。然后，您可以随时循环遍历这些对象，而无需使用`DESTROY`.

# android - 这种结构的正确布局是什么？

> ID：14255589
> 
> 赞同：0
> 
> 时间：2013-01-10T10:21:21.743
> 
> 标签：android

这种布局的结构是什么？左列文本右对齐，右列文本左对齐。行也用一条线分隔。感谢您的提示！

![在此处输入图像描述](../Images/0e2a9c58f069517a537cb6f2f1dcc7aa.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:25:23.567

你可以做一个`ListView`你自己的项目。这将为您提供所有行之间的分隔符。

要为 的项目设置自己的布局`ListView`，您必须准备布局的 xml 文件并将其设置为：

```
yourListView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.layout_file_for_your_item, items)); 
```

`Item`的布局 ( `LinearLayout`) 可以包含 2`LinearLayout`秒。在第一个（左）中，您`TextView`将在父级中右对齐。第二个（右）将`TextView`在父级中左对齐，并将 margin-left 设置为某个特定值，以在两个布局之间产生间隙。

![在此处输入图像描述](../Images/db23b838df7dfe85621c831fd7f62070.png)

1.  蓝色：列表视图
2.  红色：ListView 的项目（LinearLayout）
3.  绿色：第一个线性布局
4.  黄色：第二个线性布局

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:53:57.993

您可以尝试在布局中创建列表视图字段（内部为空，而不是文本视图或图像），然后创建另一个类似的布局：

主要布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="bla bla" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="bla bla 2" />

    <!-- listview with populated items -->

    <ListView
        android:id="@+id/mylist"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

填充项目：

```
 <TextView
        android:id="@+id/itemleft"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginRight="5dp"
        android:layout_weight="1"
        android:textStyle="bold"
        android:gravity="right|center_vertical"
        android:text="Location" />

    <TextView
        android:id="@+id/itemright"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:layout_weight="1"
        android:gravity="left|center_vertical"
        android:text="Los Angeles, US" />

</LinearLayout> 
```

这是此设置的预览： ![在此处输入图像描述](../Images/1cf4acbceb99713d93fc18d8855c87cd.png) 当然只有一项，但随后会被填充。这只是一个预览。

（填充的项目稍后将在 listView 中使用）然后尝试在您的代码中使用例如基本适配器实现，请查看此处示例：[链接](http://android-helper.blogspot.com/2011/07/android-custom-listview-example.html)。我希望你能理解它，但是在这个标题中使用自定义列表视图不是问题:)

# asp.net-mvc-4 - 在同一视图上提交多个按钮

> ID：14255595
> 
> 赞同：0
> 
> 时间：2013-01-10T10:21:41.020
> 
> 标签：asp.net-mvc-4, visual-studio-2012

我需要在同一个视图上有多个按钮，但由于某种原因它不起作用。我确实已经看过相同的问题，但我没有找到解决方案。

我如何知道视图中执行了哪个按钮？

看法：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<LIASWeb.Models.Publication>" %>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <h2>NewPublication</h2>

    <% using (Html.BeginForm())
       { %>
    <div>
        <fieldset>
            <p>
                <label for="Name">Naam:</label>
                <%: Html.TextBoxFor(m => Model.nmPublication) %>
            </p>
            <p>
                 <%: Html.TextBox("Search", "type naam")%>
                <input type="submit" name="btnSearch" value="Zoeken" />
            </p>
            <p>
                <input type="submit" name="btnSave" value="Opslaan" />
            </p>
        </fieldset>
    </div>
    <% } %>
</asp:Content> 
```

控制器：

```
public class PublicationController : Controller
{
    private Repository repository = null;

    public PublicationController()
    {
        repository = new Repository();
    }

    public ActionResult NewPublication(String button)
    {
        if (button == "btnSave")
            // perform save action

            if (button == "btnSearch")
            // perform save action

        return View();
    }

    public ActionResult Index()
    {
        IEnumerable<Publication> model = repository.Publications;
        return View(model); 
```

}

路线：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Publication", action = "Index", id = UrlParameter.Optional }
        );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:47:27.947

您应该在一种表单中使用一个提交按钮。

不同控制器方法的不同形式这是最好的方式恕我直言

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:15:11.700

这是我之前为类似向导的视图所做的事情，这是可能的，但我认为你的方法不会奏效。

相反，我建议尝试我使用的基于[这篇文章的解决方案](http://blog.ashmind.com/2010/03/15/multiple-submit-buttons-with-asp-net-mvc-final-solution/)

您也可以不使用表单元素进行提交，也可以使用 jQuery / Javascript 提交表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:26:30.813

这个问题确实有很多解决方案：

**选项1-**

有类似的东西（我没有检查代码是否正确，所以请耐心等待）：

```
@using (Html.BeginForm("Controller", "Action1", FormMethod.Post, new { id="MyForm1"}))
{
   <button type="submit" id="btn1">Bt1</button>
}

@using (Html.BeginForm("Controller", "Action2", FormMethod.Post, new { id="MyForm2"}))
{
   <button type="submit" id="btn2">Bt2</button>
} 
```

现在您指向 2 个不同的操作，您可以在其中清楚地对它们进行编程，并且您仍然可以使用`View("SameViewForBothForms")`或重定向到“MainView”来返回它们

**选项 2-**只有一个带有 2 个按钮的表单 > 不是提交类型，而是简单的按钮，您将有一个 Javascript 函数来更改隐藏字段“buttonName”的值（在 JS 函数中更改此值）。

**选项 3-** 多种或单一形式的任何混合都是可能的....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T12:25:43.943

试试这个解决方案：

```
public ActionResult NewPublication(string btnSearch)
{
    if (!string.IsNullOrEmpty(btnSearch))
    {
        //btnSearch was clicked
    }
    else
    {
        //btnSave was clicked
    }
} 
```

也检查这个[线程](https://stackoverflow.com/questions/1714028/mvc-which-submit-button-has-been-pressed)

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-04T11:25:43.143

您可以从那里的名称标签中识别您的按钮，如下所示，您需要在控制器中进行这样的检查

```
if (Request.Form["btnSearch"] != null)
{
//Write your code here
}
else if (Request.Form["btnSave"] != null)
{
//Write your code here
} 
```

# iphone - 我得到 2 个不同的图像来代替启动画面

> ID：14255598
> 
> 赞同：4
> 
> 时间：2013-01-10T10:21:46.670
> 
> 标签：iphone, ios, objective-c

我在应用程序开始时得到一个不同的图像，比如启动屏幕，然后我得到我在编码中放置的实际图像。我在我的`didFinishLaunchingWithOptions:`

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
{    

    self.window.rootViewController = self.tabBarController;
    self.tabBarController.delegate=self;
    [window addSubview:tabBarController.view];
    [self.window makeKeyAndVisible];

    LoginViewController *vc = [[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil];
    self.loginNav = [[UINavigationController alloc] initWithRootViewController:vc];

    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    if([userDefaults valueForKey:@"UserName"] &&[userDefaults valueForKey:@"Password"])
    {
        vc.username=[userDefaults valueForKey:@"UserName"];
        vc.password=[userDefaults valueForKey:@"Password"];
        vc.autoLogin=YES;
        [vc loginSelectorMethod];
    }

    else
    {
        [self.window addSubview:self.loginNav.view];
        [self.window makeKeyAndVisible];
    }

    splashView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
    splashView.image = [UIImage imageNamed:@"splashscreen.png"];
    [window addSubview:splashView];
    [window bringSubviewToFront:splashView];
    [self performSelector:@selector(removeSplash) withObject:nil afterDelay:3.0]; 
    [[UIApplication sharedApplication] setApplicationIconBadgeNumber:0];
    NSLog(@"Registering for remote notifications"); 
    [[UIApplication sharedApplication] setApplicationIconBadgeNumber:0];
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)];

    return YES;
} 
```

在启动画面出现之前，“Arrow.png”图像出现然后我的启动画面出现。如果我删除“Arrow.png”，那么代替该图像会出现另一个图像，即“aboutus.png”，它会继续。

我在我的项目中搜索了“Arrow.png”，它在我的整个项目的编码中只出现一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:29:46.250

在这里，您将 subiview 添加为标签栏，如下所示..

```
[window addSubview:tabBarController.view]; 
```

添加如下登录视图后..

```
[self.window addSubview:self.loginNav.view]; 
```

然后你添加像下面这样的启动画面..

```
 splashView.image = [UIImage imageNamed:@"splashscreen.png"];
    [window addSubview:splashView]; 
```

所以这是您看到的问题，而不是屏幕而不是闪屏。

使用下面的代码...

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
{   
   splashView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
    splashView.image = [UIImage imageNamed:@"splashscreen.png"];
    [window addSubview:splashView];
    [window bringSubviewToFront:splashView];
    [self performSelector:@selector(removeSplash) withObject:nil afterDelay:3.0]; 
    [[UIApplication sharedApplication] setApplicationIconBadgeNumber:0];
    NSLog(@"Registering for remote notifications"); 
    [[UIApplication sharedApplication] setApplicationIconBadgeNumber:0];
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)];

    return YES;
} 
```

并在`removeSplash`方法中将此视图添加为窗口的子视图，如下所示。

```
-(void)removeSplash{
[splashView removeFromSuperView];
LoginViewController *vc = [[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil];
    self.loginNav = [[UINavigationController alloc] initWithRootViewController:vc];

    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    if([userDefaults valueForKey:@"UserName"] &&[userDefaults valueForKey:@"Password"])
    {
        vc.username=[userDefaults valueForKey:@"UserName"];
        vc.password=[userDefaults valueForKey:@"Password"];
        vc.autoLogin=YES;
        [vc loginSelectorMethod];
    }

    else
    {
        [self.window addSubview:self.loginNav.view];
        [self.window makeKeyAndVisible];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T10:30:15.807

您是否在您的项目设置中设置了任何启动图像，或者您是否在您的项目包中放置了任何名为“Default.png”的图像，这种图像会在启动我们的应用程序时被操作系统自动检测，请检查这 2 点。

编辑：-

比问题是`TabBar`& LoginView & splaceImage 中的冲突。

为此，请执行以下操作，这可以解决您的双重图像问题。

首先，将以下代码放入您的`DidFinishLaunching()`方法中

> //延迟秒你显示你的splace图像的时间
> int64_t delayInSeconds = 5.0;

```
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    //Do need Full like Add Login View or Add TabbBar 

    //Remove SplaceImageView From Window 
});

splashView = [[UIImageView alloc] initWithFrame:self.window.frame];
splashView.image = [UIImage imageNamed:@"Default-Portrait~ipad.png"];
[self.window addSubview:splashView];
[self.window bringSubviewToFront:splashView];
return YES; 
```

还有一件事添加默认的splace图像，如

iPhone 肖像 Def​​ault.png。
对于 iPad，Portrait Default-Portrait~ipad.png
作为默认图像的苹果文档，然后检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T10:36:45.817

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary 

    *)launchOptions
    {
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        // Override point for customization after application launch.
        self.window.backgroundColor = [UIColor whiteColor];

        self.sql_ = [SQLDb initEngine];

        [self setupControllers]; /// Set up Yor ToolBar Controller

        self.hvController = [[HomeViewController alloc] init];
        self.window.rootViewController = self.hvController;

        [self.window makeKeyAndVisible];

        [self setupSplash];

       return YES;
    }

    -(void) setupSplash
    {
        self.imvSplash = [[UIImageView alloc] initWithFrame:self.window.bounds];

        if( IS_IPHONE_5 )
            [self.imvSplash setImage: [UIImage imageNamed:@"Default-568h@2x.png"]];
        else
            [self.imvSplash setImage: [UIImage imageNamed:@"splash.png"]];

        [self.window addSubview: self.imvSplash];

        [NSTimer scheduledTimerWithTimeInterval:2.0f     target:self selector:@selector(hideSplash:) userInfo:nil   repeats:NO];
    }

    - (void)hideSplash:(NSTimer *)theTimer
    {
        [UIView animateWithDuration:1.0
                                              delay:0.1
                                           options: UIViewAnimationCurveEaseOut
                                     animations:^{
                                                            self.imvSplash.alpha = 0.0;
                                                            self.ngNavigationController.view.alpha = 1.0;
                                                        }
                                                        completion:^(BOOL finished)
                                                        {
                                                             //[self.ngController setupImageAction];
                                                             [self.imvSplash removeFromSuperview];
                                                         }];
    } 
```

# android - 需要从纬度和经度的高度

> ID：14255599
> 
> 赞同：-2
> 
> 时间：2013-01-10T10:21:49.390
> 
> 标签：android

> **可能重复：**
> [Android - 通过经度和纬度获取高度？](https://stackoverflow.com/questions/1995998/android-get-altitude-by-longitude-and-latitude)

我需要特定位置的纬度和经度高度。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:29:06.510

我在我的应用程序中尝试了以下方式从纬度/经度获取高度。如果对您有帮助，您可以尝试一下。

```
private double getAltitudeFromLatLong(Double lat, Double long) {
    double result = 0.0;
    HttpClient httpClient = new DefaultHttpClient();
    HttpContext Context = new BasicHttpContext();
    String URL = "http://gisdata.usgs.gov/"
            + "xmlwebservices2/elevation_service.asmx/"
            + "getElevation?X_Value=" + String.valueOf(long)
            + "&Y_Value=" + String.valueOf(lat)
            + "&Elevation_Units=METERS&Source_Layer=-1&Elevation_Only=true";
    HttpGet httpGet = new HttpGet(URL);
    try {
        HttpResponse response = httpClient.execute(httpGet, Context);
        HttpEntity entity = response.getEntity();
        if (entity != null) {
            InputStream instream = entity.getContent();
            int r = -1;
            StringBuffer respStr = new StringBuffer();
            while ((r = instream.read()) != -1)
                respStr.append((char) r);
            String tag1 = "<double>";
            String tag2 = "</double>";
            if (respStr.indexOf(tag1) != -1) {
                int start = respStr.indexOf(tag1) + tag1.length();
                int end = respStr.indexOf(tag2);
                String value = respStr.substring(start, end);
                result = Double.parseDouble(value);
            }
            instream.close();
        }
    } 
    catch (Exception e) {}
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:27:52.437

如果您使用的是具有 GPS 接收器的 android 设备，那么有一个方法 getAltitude() 通过使用您可以通过海拔获取高度。您可以看到这个[答案](https://stackoverflow.com/questions/1995998/android-get-altitude-by-longitude-and-latitude)

谢谢

# node.js - Mongoose 中的 Model.findOne() 和 Model.findById() 有什么区别？

> ID：14255603
> 
> 赞同：35
> 
> 时间：2013-01-10T10:22:01.773
> 
> 标签：node.js, mongodb, mongoose, objectid

考虑我们正在根据 _id 值从 MongoDB 中搜索文档。以下哪一个代码是有效的？

1.  `ModelObj.findById(IdValue).exec(callback);`

2.  `ModelObj.findOne({ '_id': IdValue}).exec(callback);`

我觉得 ModelObj.findById() 是高效的，但是支持的原因是什么或者它的效率如何？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-10T14:21:41.250

`findById``findOne`只是一个便利功能，与您显示的调用完全相同。

这是[来源](https://github.com/Automattic/mongoose/blob/8cb0e355f75140bd4506a80b21dd94244f828cb0/lib/model.js#L1067-L1069)：

```
Model.findById = function findById (id, fields, options, callback) {
  return this.findOne({ _id: id }, fields, options, callback);
}; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-09-29T00:51:41.450

`findById(id)`几乎等同于`findOne({ _id: id })`。
如果要按文档的 _id 查询，请使用`findById()`而不是`findOne()`.

这两种功能都触发`findOne()`，唯一的区别是它们的处理方式`undefined`。
如果您使用`findOne()`，您将看到它`findOne(undefined)`并且`findOne({ _id: undefined })`等效于`findOne({})`并返回任意文档。
但是，猫鼬翻译`findById(undefined)`成`findOne({ _id: null })`.

请参阅[https://mongoosejs.com/docs/api.html#model_Model.findById](https://mongoosejs.com/docs/api.html#model_Model.findById)

这是[来源](https://github.com/Automattic/mongoose/blob/master/lib/model.js#L1757-L1767)：

```
Model.findById = function findById(id, projection, options, callback) {
  if (typeof id === 'undefined') {
    id = null;
  }

  if (callback) {
    callback = this.$wrapCallback(callback);
  }

  return this.findOne({_id: id}, projection, options, callback);
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-26T19:29:25.543

findById(id) 只是 find({_id : id}) 或 findOne({_id: id}) 的语法糖

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-10T10:30:30.547

使用 .findOne 使数据库查看其记录，检查每个 bson 文档以查找相关变量，然后检查值，如果 mongo 知道它正在查找内部索引的 _id 字段，则不必查看每个文档

# map - 建立自己的离线地图服务器？

> ID：14255605
> 
> 赞同：0
> 
> 时间：2013-01-10T10:22:07.190
> 
> 标签：map, geolocation, gis, openstreetmap, geoserver

我是 GIS 新手，我正在尝试部署自己的离线地图服务器。我发现了非常有趣的开源工具，例如：geoserver。我从 geofabrik.de 下载了 OpenStreetMap 数据

在我从 geofabrik 下载的包中，我们发现具有不同信息的不同图层：土地利用、自然、地点、铁路……但不是底图，即：带有国家边界的地理地图，没有其他信息。

我的问题是：如何获取（下载）此基础地图图层以便离线使用？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:06:02.030

我最近有完全相同的项目。我尝试了几张世界地图（CloudMate、NaturalEarth）来进行 geofabrik 提取。他们中的大多数没有足够的分辨率在更高的缩放级别上正确显示。

最后，我找到[了 ThinkGeo 提取](http://osmdata.thinkgeo.com/openstreetmap-data/)。它包含一个“完整的世界陆地多边形”层，对于任何缩放级别的背景层来说都足够了。事实证明，不同国家/地区的 ThinkGeo 提取包含国家边界，并且质量高于 geofabrik。（我经历了 geofabrik 丢失的对象。）

所以我想出了一个显示陆地层的解决方案，以及一些取决于项目重点的国家。

我建议您尝试 ThinkGeo。他们每周更新数据。

# visual-studio-2010 - 升级了 Visual Studio，现在我得到了数百个错误

> ID：14255611
> 
> 赞同：1
> 
> 时间：2013-01-10T10:22:40.010
> 
> 标签：visual-studio-2010, upgrade, webmatrix

刚刚安装了 WebMatrix 并将 Visual Studio 2012 升级到版本 4.5.50709 SP1Rel。现在，当我打开我的 web 应用程序时，我得到了一堆这种类型的错误：

```
'IIf' is not declared. It may be inaccessible due to its protection level.
'IsNothing' is not declared. It may be inaccessible due to its protection level.
'IsNumeric' is not declared. It may be inaccessible due to its protection level. 
```

我得到了很多错误，以至于我什至得到了这个：

```
Error   104 Maximum number of errors has been exceeded. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T12:22:24.963

原来，在 WebMatrix 安装或 Visual Studio 升级期间，MySql Connector 版本 6.5.4.0 也被安装了。

不知何故，我的项目所指的 MySql Connector v. 5.1.5 在此过程中被卸载。

重新安装 MySql 连接器 5.1.5 解决了这个问题。更改对新 MySql 连接器的引用也可能会解决该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T08:37:14.430

当我试图复制从另一位同事那里收到的旧版本的程序时，我在 VS 2012 中遇到了同样的问题。

正如 muleskinner 所说，这不是一个参考问题`Microsoft.VisualBasic`......

当您尝试将其添加为引用时，它会告诉您它已被构建系统自动引用。

事实证明，即使`Microsoft.VisualBasic`被自动引用，该项目实际上并没有导入命名空间。

您可以通过转到项目的属性 -> `References`-> 来添加它，然后确保`Microsoft.VisualBasic`在底部的命名空间列表中选中它。

至少这对我有用并清除了我所有的错误。不喜欢尝试将我所有的 IIf 语句更改为更传统的格式...

# silverlight-4.0 - How to get the value of a checkbox in data template of a combobox in datagrid in silverlight4

> ID：14255615
> 
> 赞同：0
> 
> 时间：2013-01-10T10:22:50.860
> 
> 标签：silverlight-4.0

I have a combobox inside a datagrid in silverlight4\. I have placed a check box inside data template of combobox to make combobox multi-selectable. Now i want to get the values for selected items in combobox.So how i can do that ?

Here is my code :

```
 <ComboBox  Name="cbxitmes" Height="23" Width="255" IsSynchronizedWithCurrentItem="False"
                 ItemsSource="{Binding Path=GetItems,Mode=TwoWay}" 
                 SelectedValue="{Binding Mode=TwoWay, Path=myname}"  SelectedValuePath="myvalue">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <CheckBox Content="{Binding myname}"  ></CheckBox>                            
                        </DataTemplate>                        
                    </ComboBox.ItemTemplate>
  </ComboBox> 
```

Please Help me guys.

Thanks,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:24:44.697

看看这个例子，它可能会有所帮助[http://www.codeproject.com/Tips/452756/Add-checkbox-inside-Combobox-in-Silverlight](http://www.codeproject.com/Tips/452756/Add-checkbox-inside-Combobox-in-Silverlight)

# c# - 将运算符存储在变量中

> ID：14255618
> 
> 赞同：15
> 
> 时间：2013-01-10T10:23:05.173
> 
> 标签：c#, variables, operators

有没有办法将运算符存储在变量中？我想做这样的事情（伪代码）：

```
void MyLoop(int start, int finish, operator op)
{
    for(var i = start; i < finish; op)
    {
        //do stuff with i
    }
} 
```

然后我可以像这样调用这个方法：

```
MyLoop(15, 45, ++);
MyLoop(60, 10, --); 
```

C#中是否存在类似的东西？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-10T10:25:07.710

我想是这样的。您没有定义运算符，而是定义一个为您进行更改的函数 (lambda)。

```
void MyLoop(int start, int finish, Func<int, int> op)
{
    for(var i = start; i < finish; i = op(i))
    {
        //do stuff with i
    }
} 
```

然后我可以像这样调用这个方法：

```
MyLoop(15, 45, x => x+1);
MyLoop(60, 10, x => x-1); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-10T10:27:35.253

使用[`Function delegate`](http://msdn.microsoft.com/en-us/library/bb549151.aspx);

> 封装具有一个参数并返回由 TResult 参数指定的类型的值的方法。

```
void MyLoop(int start, int finish, Func<int, int> op)
{
    for(var i = start; i < finish; i = op(i))
    {
        //do stuff with i
    }
} 
```

然后;

```
MyLoop(15, 45, x => ++x);
MyLoop(60, 10, x => --x); 
```

这是一个[`DEMO`](http://ideone.com/XGXlxp).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-20T07:51:57.257

我尝试了一种不同的方法，使用定义运算符并通过反射访问的类 - 即您可以将运算符存储为字符串。这也允许关系运算符。

```
class Program
{
    static void Main(string[] args)
    {
        Operators ops = new Operators();
        object result = ops.Use("LessOrEqual", new object[] {3,2}); // output: False
        Console.WriteLine(result.ToString());

        result =  ops.Use("Increment", new object[] {3}); // output: 4
        Console.WriteLine(result.ToString());
        Console.ReadKey();
    }
}

public class Operators
{
    public object Use(String methodName, Object[] parameters)
    {
        object result;
        MethodInfo mInfo = this.GetType().GetMethod(methodName);
        result = mInfo.Invoke(this, parameters); // params for operator, komma-divided
        return result;
    }

    public bool LessOrEqual(int a, int b)
    {
        if (a <= b)
        {
            return true;
        }
        else
        {
            return false; 
        }  
    }

    public int Increment(int a)
    {
        return ++a;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T10:26:36.043

使用类似的东西`Func<int, int> op`

或将 op 的类型更改为字符串，然后检查该值并根据它构建您的 for 循环，如：

```
void MyLoop(int start, int finish, string op)
{
    if ((op.Equals("++") && (start < finish))
    {
      for(var i = start; i < finish; i++)
      {
          //processMethod(i)
      }
    }
    else if ((op.Equals("--") && (start > finish))
    {
      for(var i = start; i < finish; i--)
      {
          //processMethod(i)
      }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T10:35:00.393

```
public class Program {
    public static void Main(String[] args) {
        Looper(x => x + 1);
        Looper(x => ++x);
        //Looper(x => x++); will not works
        Looper(x => x * 2);
    }

    public static void Looper(Func<int, int> op) {
        for (int i = 1; i < 10; i = op(i)) {
            Console.WriteLine(i);
        }
        Console.WriteLine("----------");
    }

} 
```

# html - 在 HTML 和 CSS 中使用 Div 的表格网格

> ID：14255619
> 
> 赞同：4
> 
> 时间：2013-01-10T10:23:05.097
> 
> 标签：html, css, css-tables

我想使用 DIV（仅限 HTML 和 CSS）创建表格网格。我几乎进入并仍然遇到一些问题。我附上了示例图片。我希望网格应该与此示例图像相同。我附上了我迄今为止创造的[小提琴。](http://jsfiddle.net/Sriganesh/Hv3V4/)你能帮助别人知道我在做什么以及如何改进以完成与图像相同的桌子吗？

## HTML：

```
<div class="containerDiv">

  <div class="rowDivHeader">
    <div class="cellDivHeader">Recommendation</div>
    <div class="cellDivHeader">Typical savings</div>
    <div class="cellDivHeader">Improved SAP</div>
    <div class="cellDivHeader">Improved EI</div>
    <div class="cellDivHeader">Indicative cost</div>
    <div class="cellDivHeader">Include</div>
    <div class="cellDivHeader lastCell">Removal Reason</div>
  </div>

  <div class="rowDiv">
    <div class="cellDiv">Room-in-roof-insulation</div>
    <div class="cellDiv">93.0</div>
    <div class="cellDiv">F : 29</div>
    <div class="cellDiv">B : 89</div>
    <div class="cellDiv">£1,500 - £2,700</div>
    <div class="cellDiv">Checkbox</div>
    <div class="cellDiv lastCell">Textbox</div>
  </div>
</div> 
```

## CSS：

```
.containerDiv {
  border: 1px solid #3697f6;
  width: 100%;
}

.rowDivHeader {
  border: 1px solid #668db6;
  background-color: #336799;
  color: white;
  font-weight: bold;
}

.rowDiv {
  border: 1px solid #668db6;
  background-color: #cee6fe;
}

.cellDivHeader {
  border-right: 1px solid white;
  display: table-cell;
  width:12%;
  padding: 1px;
  text-align: center;
}

.cellDiv {
  border-right: 2px solid white;
  display: table-cell;
  width:10%;
  padding-right: 4px;
  text-align: center;
  border-bottom: none;
}

.lastCell {
  border-right: none;
} 
```

## 示例图像

![示例表格网格图像](../Images/2aefd2507bd10ef56659c53371d64ac5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:29:19.587

添加`display:table-row`到行 div 即`.rowDivHeader & .rowDiv`

&`display:table`到主 div`.containerDiv`

```
.containerDiv {
  border: 1px solid #3697f6;
  width: 100%; display:table
}    
.rowDivHeader {
      border: 1px solid #668db6;
      background-color: #336799;
      color: white;
      font-weight: bold; display:table-row
    }
    .rowDiv {
      border: 1px solid #668db6;
      background-color: #cee6fe;
      display:table-row
    } 
```

**[演示](http://jsfiddle.net/Hv3V4/4/)**

# c++ - 指向一个数组以获取其所有内容

> ID：14255621
> 
> 赞同：3
> 
> 时间：2013-01-10T10:23:06.367
> 
> 标签：c++, c

因此，数组是指向其第一个元素的指针。

`float color[4]={rColor, gColor, bColor, alpha};`

因此，只是简单`color`地指向`&color[0]`;

现在假设我有一个结构：

```
struct Colors{
float color[4];
}; 
```

现在我发现我可以很好地做到这一点：

```
Colors myColor={{*color}}; 
```

我也可以这样做：

```
Colors myColor={{color[0]}}; 
```

我只指向一个元素，但结构需要 4，所以它一直在寻找这个元素。

首先，我想检查一下这样做是否可行，合法且可以。显然，如果您要传递一个大数组，这在语法和键入方面非常方便。

其次，我想验证为什么这样做有效的原因。因为`color`only 是一个指针，所以 the`*`是一个间接操作符，它检索指向的内存，也就是数组。所以基本上我们通过间接调用它的指针来获得整个数组。正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:31:08.240

结构体、联合体和数组的初始化器具有特定的属性，即从其中省略的元素用 初始化`0`。

要初始化整个结构，您`Colors`还可以使用相同类型的任何其他对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:34:21.820

如果你像这样初始化颜色

```
Colors myColor={{*color}}; 
```

您复制颜色数组的第一个数组元素，其余的将被初始化为零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T10:35:41.123

使用此测试代码：

```
#include "stdio.h"

int main(){
    int i;
    int color[4]={1,2,3,4};
    int ted[4]={*color};

    for(i=0;i<4;i++)
        printf("%d ",ted[i]);
    printf("\n");
} 
```

可以轻松验证`ted`您的代码仅初始化 的第一个元素。这是因为`*color`仅指向 的第一个元素`color`。所以初始化列表只有一项。

由于 C 和 C++ 都不知道数组的长度，因此编译器不可能以您希望的方式自动复制数组的任何元素。

# css - 使用 CSS 样式化 SVG 圆圈

> ID：14255631
> 
> 赞同：35
> 
> 时间：2013-01-10T10:24:02.847
> 
> 标签：css, svg, hover, geometry

所以我有我的 SVG 圆。

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
   <circle cx="168" cy="179" r="59" fill="white" />
</svg> 
```

当一个人悬停在圆圈上时，我希望它是 120%。我尝试了宽度，高度和笔划。悬停时没有找到使圆圈变大的任何解决方案。有什么建议么？

```
circle:hover
  {
    stroke-width:10px;
  }

circle:hover
  {
    height: 120%;
    width: 120%;
  } 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-10T12:36:02.763

根据 SVG 1.1 规范，您不能`r`使用 CSS [https://www.w3.org/TR/SVG/styling.html#SVGStylingProperties](https://www.w3.org/TR/SVG/styling.html#SVGStylingProperties)设置 SVG 圆圈的属性样式。但你可以这样做：

```
<circle cx="168" cy="179" r="59"
        fill="white" stroke="black"
        onmouseover="evt.target.setAttribute('r', '72');"
        onmouseout="evt.target.setAttribute('r', '59');"/> 
```

在某些现代浏览器部分支持的 SVG 2 中，您可以`r`使用 CSS 设置圆的属性样式。[https://www.w3.org/TR/SVG2/styling.html#PresentationAttributes](https://www.w3.org/TR/SVG2/styling.html#PresentationAttributes)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-07-03T23:46:30.850

只想使用 CSS？使用`line`而不是`circle`.

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <style>
    .circle {
        stroke-width: 59;
        stroke-linecap: round;
    }
    .circle:hover {
        stroke-width: 71;
    }
    </style>
    <line x1="168" y1="179" x2="168" y2="179" stroke="white" class="circle" />
</svg> 
```

[http://jsfiddle.net/rLk7rd8b/](http://jsfiddle.net/rLk7rd8b/)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-10-31T14:51:20.087

它可以在 CSS(3) 中完成，通过将`transform-`圆的原点设置为其中心，然后使用`scale`转换：

```
circle {
  transform-origin: center center;
}

circle:hover {
  stroke-width: 10px;
  transform:scale(1.2, 1.2);
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-09T11:38:43.467

正如 Phillip 在上面的评论中建议的那样，您可以使用 CSS 3 转换来做到这一点。

```
 circle:hover {
    -webkit-transform: scale(x, y);
  } 
```

（“-webkit”前缀仅适用于 Chrome）

请参阅[https://developer.mozilla.org/en-US/docs/Web/CSS/transform](https://developer.mozilla.org/en-US/docs/Web/CSS/transform)

这里也是一个 CSS 转换的工作示例：http: [//jsbin.com/sozewiso/2](http://jsbin.com/sozewiso/2)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T10:40:13.643

这应该适合你。

[jsfiddle](http://jsfiddle.net/Rx4fr/)

您需要操纵半径，这只能通过 javascript 完成：

```
$(function () {
    $("svg circle").on("mouseenter", function () {

        var oldR = $(this).attr("r");

        var newR = (((oldR*2)/100)*120)/2; // 120% width

        $(this).attr("r", newR);

    });
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-16T15:09:29.757

单击“运行代码片段”进行测试：

```
.myCircle:hover {
  r: 20
}

.myCircle {
  transition: ease 1s
}
```

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
       <circle class="myCircle" cx="10" cy="10" r="5" fill="black" />
    </svg>
```

我偶然发现了这个页面，但想添加我自己认为最简单的答案。显然它在 Firefox 中不起作用，这就是为什么有人反对。

**第 1 步：**将课程（例如“myCircle”）添加到您的圈子

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
   <circle class="myCircle" cx="168" cy="179" r="59" fill="white" />
</svg> 
```

**第 2 步：**在您的 CSS 文件中，您可以使用“r”作为 CSS 属性！

```
.myCircle:hover {
  r: 100;
} 
```

**第 3 步（可选）：**随意添加过渡以使半径平滑增长：

```
.myCircle {
    transition: all 1s;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-10T10:29:59.233

我不确定，但是您不能仅使用 css 完全自定义 svg。但是，如果您这样做，它将不会是跨浏览器。过去我使用 svg 创建复杂的地图，对我来说解决方案是[rapheljs](http://raphaeljs.com/)。

**编辑：**

使用@phonicx calculus for radius 我修改了代码，有[一些东西](http://jsfiddle.net/stefanz/D7yvL/1/)可以自定义每个圆（如果你有更多的话）：

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
   <circle data-precentage='100' cx="168" cy="179" r="59" fill="red" />
   <circle data-precentage='120' cx="74" cy="100" r="59" fill="black" /> 
</svg> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-10T10:42:26.350

使用 JQUERY：

```
$(function () {
  $('circle').hover(function() {
    $(this).attr('r', 100);
  }, function() {
    $(this).attr('r', 59);
  });
}); 
```

[在这里演示](http://jsfiddle.net/BCeSG/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-04T14:45:00.587

您忘记了笔触颜色：

```
circle:hover {
    stroke:white;
    stroke-width:10px;
 } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-06-27T22:22:36.277

我正在做其他事情，遇到了这个问题。我正在做类似的事情并使用greensock。我使用 Greensock、GSAP 在几个圆圈上设置了动画比例。我需要为 transformOrigin 和 scale 属性设置动画：

```
TweenMax.staggerFrom(".circle",1,{scale:0,transformOrigin:"50% 50%",ease:Bounce.easeOut}, .08); 
```

示例 [https://codepen.io/grmdgs/pen/RgjdPv](https://codepen.io/grmdgs/pen/RgjdPv)

绿袜 [https://greensock.com/](https://greensock.com/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-19T21:54:17.463

如果您想对其进行缩放，请尝试使用`transform: scale(1,5)`，因此您无需更改 cx,cy,r 属性。

# javascript - 如何测试三星智能电视应用程序？

> ID：14255633
> 
> 赞同：5
> 
> 时间：2013-01-10T10:24:06.033
> 
> 标签：javascript, testing, samsung-smart-tv, television, smart-tv

我开发了一个三星智能电视应用程序，在三星模拟器中进行了测试，它运行良好。

现在我将如何在电视上测试它，而不将它上传到三星应用商店。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T10:29:59.183

简短的版本是：

1.  使用 SDK 构建包并将其发布到 Web 服务器。
2.  在电视上创建一个名为“develop”的帐户。
3.  将电视配置为与您发布应用程序的服务器的 IP 地址同步。
4.  同步应用程序。

三星网站上的文档“[在电视上测试您的应用程序](http://www.samsungdforum.com/Guide/art00013/index.html)”中提供了完整的详细信息。找到其中一些选项需要深入研究大量菜单。

请注意，三星最近发布了 4.0 SDK，因此您可能会发现您的软件与文档描述的不太一样。您可能需要做一些猜测工作才能弄清楚这些更改，或者只是将您的开发环境升级到 4.0 SDK。

针对不同电视版本的“在电视上测试您的应用程序”的更新：

*   2011 [http://www.samsungdforum.com/Guide/art00013/index.html](http://www.samsungdforum.com/Guide/art00013/index.html)

*   2013 [http://www.samsungdforum.com/Guide/d20/index.html](http://www.samsungdforum.com/Guide/d20/index.html)

*   2014 [http://www.samsungdforum.com/Guide/art00121/index.html](http://www.samsungdforum.com/Guide/art00121/index.html)

# nodes - Force GraphViz 强制子图之间对齐

> ID：14255634
> 
> 赞同：1
> 
> 时间：2013-01-10T10:24:13.697
> 
> 标签：nodes, graphviz, subgraph

我将 GraphViz 与以下点文件一起使用：

```
digraph "Fast-forward"
{
    rankdir=LR;
    subgraph master
    {
        "5c071a6b2c" -> "968bda3251";
    }
    subgraph branch
    {
        "35ee8ce6b6" [color="blue"] [style="filled"];
        "968bda3251" -> "9754d40473" [weight=0];
        "9754d40473" -> "9e59700d33" -> "35ee8ce6b6";
    }
    subgraph c1
    {
        rankdir=LR;
        rank="same";
        "remote/master/HEAD" [shape=box];
        "remote/master/HEAD" -> "35ee8ce6b6" [weight=0];
        oldmh [label="master/HEAD"] [shape=box] [color="red"] [style="filled"];
        newmh [label="master/HEAD"] [shape=box] [color="blue"] [style="filled"];
        oldmh -> "968bda3251" [weight=0];
        newmh -> "35ee8ce6b6" [weight=0];
    }
} 
```

它给了我类似的东西： ![包东西](../Images/29fb40054bfb04a9a74647e74a44052f.png)

但我想要这样的东西：

> ```
>  white
>                                                         |
>                                                        \/
>                      "9754d40473" -> "9e59700d33" -> "35ee8ce6b6";
>                      /                                  /\ 
> ```
> 
> 5c071a6b2c -> 968bda3251
> 
> ```
>  /\                                         |
>               |
>             red                                       blue 
> ```

我怎样才能做到这一点？

为了您的帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T22:39:10.027

我倾向于先定义所有具有特殊需求的节点（例如处于同一等级或具有特殊形状/颜色），然后定义链接。这样，您就可以确保`rank=same`节点被正确分组，并以正确的顺序定义。

没有`weight=0`，所有的侧链接最终都在顶部。添加`weight=0`到您想要的底部。

```
digraph "Fast-forward"
{
    rankdir=LR;
    subgraph c1 {
        rank="same";
        "968bda3251";
        oldmh [label="master/HEAD"] [shape=box] [color="red"] [style="filled"];
    }
    subgraph c2
    {
        rank="same";
        "remote/master/HEAD" [shape=box];
        "35ee8ce6b6" [color="blue"] [style="filled"];
        newmh [label="master/HEAD"] [shape=box] [color="blue"] [style="filled"];
    }
    "5c071a6b2c" -> "968bda3251" -> "9754d40473" -> "9e59700d33" -> "35ee8ce6b6";
    oldmh -> "968bda3251" [weight=0];
    "remote/master/HEAD" -> "35ee8ce6b6";
    newmh -> "35ee8ce6b6" [weight=0];
} 
```

![点的结果](../Images/5e91b99e2af51e3162b77d62db67d993.png)

如果你真的想要在 96 和 97 之间慢跑，你可以这样做：

```
digraph "Fast-forward"
{
    rankdir=LR;
    subgraph c1 {
        rank=same;
        "968bda3251";
        oldmh [label="master/HEAD"] [shape=box] [color="red"] [style="filled"];
    }
    subgraph c1p5 {
        rank=same;
        "9754d40473";
        inviso [style="invis"];
    }
    subgraph c2
    {
        rank="same";
        "remote/master/HEAD" [shape=box];
        "35ee8ce6b6" [color="blue"] [style="filled"];
        newmh [label="master/HEAD"] [shape=box] [color="blue"] [style="filled"];
    }
    "5c071a6b2c" -> "968bda3251";
    "968bda3251" -> "9754d40473" [weight=0];
    "9754d40473" -> "9e59700d33" -> "35ee8ce6b6";
    oldmh -> "968bda3251" [weight=0];
    "remote/master/HEAD" -> "35ee8ce6b6";
    newmh -> "35ee8ce6b6" [weight=0];
    "968bda3251" -> inviso [style="invis"];
    "9754d40473" -> inviso [style="invis"];
} 
```

![在此处输入图像描述](../Images/e1401ed52d5450a7bbe867867f63722d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:55:10.763

`rank="same"`影响子图的所有节点，因此您必须将标签子图分成两部分：

```
digraph "Fast-forward"
{
    rankdir=LR;
    subgraph master
    {
        "5c071a6b2c" -> "968bda3251";
    }
    subgraph branch
    {
        "968bda3251" -> "9754d40473" [weight=0];
        "9754d40473" -> "9e59700d33" -> "35ee8ce6b6";
        "35ee8ce6b6" [color="blue"] [style="filled"];
    }
    subgraph c1
    {
        rank="same";
        "remote/master/HEAD" [shape=box];
        "remote/master/HEAD" -> "35ee8ce6b6" [weight=0];
        newmh [label="master/HEAD"] [shape=box] [color="blue"] [style="filled"];
        newmh -> "35ee8ce6b6" [weight=0];
    }
    subgraph c2
    {
        rank="same";
        oldmh [label="master/HEAD"] [shape=box] [color="red"] [style="filled"];
        oldmh -> "968bda3251" [weight=0];
    }
} 
```

这会给你： ![在此处输入图像描述](../Images/9301e254495caba0c9aa058cff31e443.png)

# c++ - CString to void*

> ID：14255639
> 
> 赞同：0
> 
> 时间：2013-01-10T10:24:21.557
> 
> 标签：c++, windows, type-conversion, void-pointers, cstring

Is it possible to convert `CString` to `void*`. I made a void pointer and pointed it to some object. Now I saved this in a `CString`. Now I want to convert back to `void*` from `CString`.

```
void* pPointer = &SomeObject;
CString myString;
myString.Format(_T("%x"), pPointer);

//void* anotherPointer = (void*)myString; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:47:08.490

这是不可能的。

您可以做的是转换`CString*`为`void*`：

```
void* anotherPointer = (void*) & myString; 
```

然后回来 ：

```
CString* pToMyString = (CString*) anotherPointer; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T11:00:54.817

您不能将a *“转换”*`CString`为 a `void*`，但您可以将a （即指向 a 的指针**）***“转换”*为 a ：`CString*`**`CString``void*`**

 **```
// Create a CString object
CString str(_T("Foo"));

// Store CString address in a void* pointer
void* ptr = &str;

// Cast from void* back to CString*
CString* pstr = static_cast<CString*>(ptr);

// Print CString content
_tprintf(_T("%s\n"), pstr->GetString()); 
```

但是，您似乎在做一些不同的事情：即将某个对象的地址（指针）作为*整数格式的字符串*存储到`CString`. 然后你需要从字符串中取回整数值，使用一些解析函数，比如`_tcstoul()`. 这似乎有效，但需要更多测试：

```
#include <stdlib.h>

#include <iostream>
#include <ostream>
#include <string>

#include <atlbase.h>
#include <atldef.h>
#include <atlstr.h>

using namespace std;
using namespace ATL;

// Some test class
struct MyClass
{
    string Foo;
    int Bar; 

    MyClass(const string& foo, int bar)
       : Foo(foo), Bar(bar)
    {}
};

// Test
int main()
{
    // Create some object
    MyClass c("A foo", 10);

    // Get the address of the object
    void* ptr = &c;

    // Format the address into a string
    CString str;
    str.Format(_T("%p"), ptr);

    // Parse the address from string
    void* ptr2 = reinterpret_cast<void*>( _tcstoul( str.GetString(), nullptr, 16 ) );

    // Get back the original MyClass pointer
    MyClass* pMyClass = static_cast<MyClass*>(ptr2);

    // Check result
    cout << pMyClass->Foo << endl;
    cout << pMyClass->Bar << endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:48:40.437

您格式化字符串的方式似乎是错误的。**%d**用于整数，因此它将导致**void***地址被格式化为数字。如果这确实是您想要的，您可以解析字符串以获取它包含的数字，然后将其转换为**void***。但我很确定这不是你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-28T23:41:45.620

如果打算使用 CString 的内容（即写入文件），则需要使用 GetBuffer 函数来访问实际内容。

```
void* p = (void*)myString.GetBuffer(1);
...
myString.ReleaseBuffer(); 
```**

# actionscript-3 - Actionscript 3.0 和 MVC

> ID：14255641
> 
> 赞同：0
> 
> 时间：2013-01-10T10:24:25.460
> 
> 标签：actionscript-3, model-view-controller, frameworks, design-patterns

如何在 actionscript 3.0 中实现 MVC？您是构建自己的经典（基于 GoF 书籍）简单架构还是使用一些现代框架？我学习了“经典解决方案”，但不明白使用一些 mvc 框架会更好吗？哪一个适合这个目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:13:32.100

有几种 AS3 MVC 实现，其中最受欢迎的是 Robotlegs、PureVMC、Swiz 和 Parsly（还有 Cairngorm 和 Flex only MATE，但我不知道它们是否仍然受支持）。它们都成功地成为了您的应用程序的基础，使用哪一个是个人喜好问题。如果我应该在它们上选择一个，那将是 Robotlegs，但在实际工作中，我们有自己的轻量级 MVC 实现，对于纯 AS3 项目来说，介于 Robotlegs 和 Cairngorm 之间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T19:35:19.657

我使用自己的设置来实现 MVC 实践/架构，但不是框架。在我看来，MVC 是一种组织代码（和功能）的方式。可用的 MVC 框架功能可简化和自动化交互。
对于我的许多项目，不需要 MVC 框架的附加功能，最终会施加一些限制。如果这些特性很重要，或者您正在与团队一起工作，那么 mvc 框架有很多好处。但是对于个人项目，我发现我自己的设置很简单就可以了。

# c# - Control.ModifierKeys returns NONE

> ID：14255647
> 
> 赞同：0
> 
> 时间：2013-01-10T10:24:54.367
> 
> 标签：c#, winforms

I am using a class i got from this blog: [http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx](http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx)

```
private static IntPtr HookCallback(
    int nCode, IntPtr wParam, IntPtr lParam)
{
    if (nCode >= 0 && wParam == (IntPtr)WM_KEYDOWN)
    {
        int vkCode = Marshal.ReadInt32(lParam);
        Console.WriteLine((Keys)vkCode);
    }
    return CallNextHookEx(_hookID, nCode, wParam, lParam);
} 
```

This function get the key code for a single key, i wanted to alter it so i can catch ctrl+C so i altered the above function as follows:

```
 private static IntPtr HookCallback(
    int nCode, IntPtr wParam, IntPtr lParam)
{
    if ((Keys)(vkCode) == Keys.C && (Control.ModifierKeys == Keys.Control))
    {
        int vkCode = Marshal.ReadInt32(lParam);
        Console.WriteLine((Keys)vkCode);
    }
    return CallNextHookEx(_hookID, nCode, wParam, lParam);
} 
```

The problem is Control.ModifierKeys always returns NONE, i googled too much with any results, i want to note that i am using this code in class in a separate module in the solution. What am i doing here, please provide a solution.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:56:41.540

是的，这通常会出错，但尤其是当您的程序本身没有 GUI 或使用隐藏窗口时。Windows 为每个单独的进程维护键盘状态，当程序接收到键盘消息时它会更新。这是必要的，因为击键存储在消息队列中，并在稍后被程序检索，有时甚至更晚。键盘钩子的问题在于它是*另一个*进程收到消息，而不是你的。你仍然有过时的键盘状态。

为了使其真正可靠，您需要知道其他进程的键盘状态。但这不是你能得到的，GetKeyboardState() 函数只允许允许检索你自己的状态。这通常使得将击键转换为键入键非常困难。WH_KEYBOARD 挂钩是一个更好的解决方案，但您不能在 C# 中编写这样的挂钩。

一种解决方法是自己跟踪 Control 键的状态。或者通过[调用 GetAsyncKeyState()](http://pinvoke.net/default.aspx/user32/GetAsyncKeyState.html)来检查 Control 键的实际未缓冲状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:36:27.490

那对你不起作用！

Control.ModifierKeys的实现只是调用了Windows API函数GetKeyState() 3次，参数依次为0x10、0x11、0x12，并对结果进行适当的ors。

但是状态与正在处理消息队列中的哪个消息有关。

我认为您需要使用 PInvoke 来调用 Windows API 函数[GetAsyncKeyState()](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms646293%28v=vs.85%29.aspx)。

# android - 安卓。用数字字符引用中的字符替换字符

> ID：14255648
> 
> 赞同：1
> 
> 时间：2013-01-10T10:25:06.620
> 
> 标签：android, xml

我经常看到这样的消息。但是更换的原因是什么？我只知道空格键不能位于字符串的末尾，因为它将被忽略，并且您将获得没有空格键的字符串。

```
<string name="lorem">Lorem and a space bar&#160;</string> 
```

但是其他一切呢？我没有看到任何视觉差异

```
<string name="loading">Loading&#8230;</string> 
```

和

```
<string name="loading">Loading...</string> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:29:51.430

看看这个答案。这只是尽可能使用更少的字符，如果有合适的字符可用，则没有必要使用三个点。在这种情况下，最好使用 Unicode 值。如果你愿意，你也可以告诉[Lint](http://tools.android.com/tips/lint)忽略这个。

[Android 将“...”替换为省略号](https://stackoverflow.com/questions/8536375/android-replace-with-ellipsis-character)

# javascript - Conditional sum() method in JavaScript

> ID：14255650
> 
> 赞同：0
> 
> 时间：2013-01-10T10:25:13.387
> 
> 标签：javascript, arrays, if-statement, sum, subtotal

I'm having some trouble calculating subtotals in a table. Basically I have 3 columns of variables; FRUIT, ORIGIN, and PRICE. FRUIT contains things like "Apple", "Banana", "Orange", etc. I want to populate a table that shows the total price of the FRUIT column clustered by the values in the ORIGIN column. I may be overlooking an easier way of doing this, but here's what I've tried.

```
 for(i=0;i<FRUIT.length;i++)
  {
  if(ORIGIN[i] == "Africa")
  {
  SUBTOTAL.push(PRICE[i])
  }
  } 
```

I then use the following method to allow me place SUBTOTAL.sum() in my table to show the total price of fruit from Africa:

```
 Array.prototype.sum = function() {
  for (var j = 0, L = this.length, sum = 0; j < L; sum += this[j++]);
  return sum; 
```

The sum method works properly on the full column (for example `PRICE.sum()`) but I get incorrect subtotals using my current if statement. It also throws off the figures in my table which were previously correct before I added it, such as `PRICE.sum()`.

Any recommendations would be greatly appreciated!

Many Thanks, Karl

# javascript - JQuery同位素数过滤器

> ID：14255651
> 
> 赞同：1
> 
> 时间：2013-01-10T10:25:18.850
> 
> 标签：javascript, jquery, jquery-isotope

我一直在玩同位素插件，我认为它很棒！但是，它仅基于关键字。如果我想做一些数学过滤，比如添加一个类：.age-35。然后，在我的过滤器中，我想选择例如年龄> 30。这样的事情是否可能，或者这不是同位素的设计目的吗？我一直试图找到一些关于使用“数字过滤”的技巧，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T12:46:33.307

排序方法只需要为每个提供的元素返回一个数字。它为每个需要排序的元素（即可见元素）调用一次。它返回的数字取决于您的想象。

例如，您可以从元素的任何部分（类、数据-???等）提取属性值并将它们解析为一个数字，然后返回该数字。

# .net - TPL 数据流生产者消费者模式

> ID：14255655
> 
> 赞同：3
> 
> 时间：2013-01-10T10:25:30.527
> 
> 标签：.net, task-parallel-library, tpl-dataflow

刚刚使用 TPL DataFlow 编写了一个示例生产者消费者模式。我在这里有一些基本问题。

1.  只有在生产者发布了所有项目后，消费者才处于活动状态。异步是否意味着生产和消费任务都可以并行运行。

2.  给定消费者的睡眠时间，以验证其是否阻塞了其他数据项。它似乎是按顺序执行的，没有得到任何并行性。

我在这里做错了吗？

```
class AscDataBlocks
{
    public Int64 start;
    public Int64 End;
    //public string ThreadName;
    public void AscBufferProducer(ITargetBlock<Int64> targetAscTransform) 
    // This is using TPL DataBlock producer consumer pattern.
    {
        for (var i = start; i < End; i++)
        {
            Console.WriteLine("Postingasc : {0}", i);
            targetAscTransform.Post(i);
        }
    }

    public void ProcessDataBuffer(Int64 ascDataSet)
    {
        if (ascDataSet == 5) 
        // Testing if this will delay all the other data processing
            Thread.Sleep(5000);
        else
            Thread.Sleep(500);                
        Console.WriteLine(ascDataSet);
    }

    // Demonstrates the consumption end of the producer and consumer pattern. 
    public async Task<Int64> AscTransConsumerAsync(IReceivableSourceBlock<Int64> source)
    {
        // Initialize a counter to track the number of bytes that are processed. 
        int status = 0;

        // Read from the source buffer until the source buffer has no  
        // available output data. 
        while (await source.OutputAvailableAsync())
        {
            Int64 data;
            source.TryReceive(out data);
            ProcessDataBuffer(data);//This function processed the data buffer for ascollection and writes the data to the database.
            // Increment the count of bytes received.
            status = 1;
        }
        return status;
    }
}

static void Main(string[] args)
{
    AscDataBlocks ascb;
    BufferBlock<Int64> ascbuffer;
    System.Threading.Tasks.Task<Int64> ascProcessingconsumer;
    CancellationToken ct = new CancellationToken();
    CancellationTokenSource cts = new CancellationTokenSource();
    ascb = new AscDataBlocks();
    ascb.start = 1;
    ascb.End = 100;           
    try
    {
        ascbuffer = new BufferBlock<Int64>(new ExecutionDataflowBlockOptions
        {
            MaxDegreeOfParallelism = 5,
            CancellationToken = ct
        });// Initiallize the buffer bloack
        ascProcessingconsumer = ascb.AscTransConsumerAsync(ascbuffer); //Initialize the consumer.
        //Post source data to the dataflow block.
        ascb.AscBufferProducer(ascbuffer);
        ascProcessingconsumer.Wait();
    }
    catch (Exception ex)
    {
        //foreach (var v in ex.InnerExceptions)
        //    Console.WriteLine("msg: " + v.Message);                
    }            
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T13:19:40.423

> 只有在生产者发布了所有项目后，消费者才处于活动状态。异步是否意味着生产和消费任务都可以并行运行。

发生这种情况是因为您在消费者有机会开始之前非常快速地发布了所有商品。如果添加`Thread.Sleep(100)`，您会看到它们实际上是并行工作的。

> 给定消费者的睡眠时间，以验证其是否阻塞了其他数据项。它似乎是按顺序执行的，没有得到任何并行性。

TPL 数据流并不神奇：它不会修改您的代码以并行执行。是你调用`AscTransConsumerAsync()`一次，所以不要惊讶它实际上只执行一次。

TDF 确实支持并行处理，但您实际上需要让它执行处理代码。为此，请使用其中一个执行块。在你的情况下[`ActionBlock`](http://msdn.microsoft.com/en-us/library/hh194684)似乎合适。

如果使用它，则可以通过设置将块配置为并行执行[`MaxDegreeOfParallelism`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.dataflow.executiondataflowblockoptions.maxdegreeofparallelism)。当然，这样做意味着您需要确保处理委托是线程安全的。

有了这个，`AscTransConsumerAsync()`现在可能看起来像：

```
public async Task<Int64> AscTransConsumerAsync(ISourceBlock<Int64> source)
{
    // counter to track the number of items that are processed
    Int64 count = 0;

    var actionBlock = new ActionBlock<Int64>(
        data =>
        {
            ProcessDataBuffer(data);
            // count has to be accessed in a thread-safe manner
            // be careful about using Interlocked,
            // for more complicated computations, locking might be more appropriate
            Interlocked.Increment(ref count);
        },
        // some small constant might be better than Unbounded, depedning on circumstances
        new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded });

    source.LinkTo(actionBlock, new DataflowLinkOptions { PropagateCompletion = true });

    // this assumes source will be completed when done,
    // you need to call ascbuffer.Complete() after AscBufferProducer() for this
    await actionBlock.Completion;

    return count;
} 
```

# ios - NSDictionary objectForKey：字符串问题

> ID：14255663
> 
> 赞同：0
> 
> 时间：2013-01-10T10:25:47.197
> 
> 标签：ios, encoding, nsstring, nsdictionary

我`NSDictionary`用来自 web api 的数据创建了一个。

这是记录的字典：

```
{
chapter =     {
    text = "\n  \tAmo\U00cc\U0081s";
}; 
```

}

登录时`[dict objectForKey:@"chapter"]`如下所示：

```
{
text = "\n  \tAmo\U00cc\U0081s"; 
```

}

登录时`[dict objectForKey:@"text"]`我得到

```
AmoÌs 
```

这是不正确的，应该是`Amo\U00cc\U0081s`/`Amós`

这似乎是一个编码问题，但我无法弄清楚。知道为什么会这样吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:26:52.197

NSLog 打印正确！！！

您不能打印 Unicode 文本来记录。你有一个新行，一个选项卡和 \U00cc 和 \U0081 正在转换为一些 unreadalbe 文本。

这不是错误。CF 和 Cocoa 对 %S 和 %C 的解释与 printf 及其表兄弟对它们的解释不同。CF 和 Cocoa 将字符视为 UTF-16，而 printf（大概）将它们视为 UTF-32。

CF/Cocoa 解释在使用核心服务时更有用，因为某些 API（例如文件管理器）会将文本作为 UniChars 数组而不是 CFString 提供给您；只要您以空值终止该数组，就可以将其与 %S 一起使用来打印字符串。

[从这里](https://stackoverflow.com/questions/667994/why-do-nsstring-and-nslog-appear-to-handle-c-and-lc-and-s-and-ls-different)复制。

# javascript - +new Date() - 这是一个好习惯吗？

> ID：14255664
> 
> 赞同：41
> 
> 时间：2013-01-10T10:25:50.203
> 
> 标签：javascript

所以我们今天在公司讨论了关于`+new Date()`是否是良好做法的讨论。有些人更喜欢这种方式`new Date().getTime()`。

在我看来，这很方便，但另一方面，人们会说它更难阅读。

除了明显的“对于不熟悉一元运算符的人来说更难理解”之外，还有其他优点或缺点吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-10T10:29:20.213

该`getTime`方法似乎要[快得多](http://jsperf.com/get-time-vs-unary-plus)：

![在此处输入图像描述](../Images/35189b9ad26e1dfb957616e6faf1a03e.png)

**为什么会这样？**

以下是在实例上调用该`getTime`方法时发生的`Date`情况：

1.  返回[`[[PrimitiveValue]]`](http://es5.github.com/#x15.9.3.2)此 Date 对象的内部属性的值。

以下是将一元加号运算符应用于`Date`实例时发生的情况：

1.  [获取相关](http://es5.github.com/#x8.7.1)实例`Date`的值
2.  [将其转换为数字](http://es5.github.com/#x9.3)
    1.  [将其转换为原语](http://es5.github.com/#x9.1)
        1.  调用内部[`[[DefaultValue]]`](http://es5.github.com/#x8.12.8)方法

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-21T09:05:36.413

在过去几年对此进行了很多思考之后，我得出的结论是性能不是这里的一个因素。

所以这是我在可读性方面更喜欢的解决方案：

`Date.now();`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-01-21T10:49:31.600

我发现这种类型的代码往往很少被调用，所以我认为最好为你通常看到的内联用法添加测试：

例如

```
var t = (new Date()).getTime(); 
```

和

```
var t = +new Date(); 
```

JSPerf 结果显示这两者在速度上差别不大：http: [//jsperf.com/get-time-vs-unary-plus/7](http://jsperf.com/get-time-vs-unary-plus/7)

![在此处输入图像描述](../Images/c0cbc3c7b6584b550a7e007c4d1fecef.png)

之前的 perf 结果的问题是该示例不实用。在实践中你不会一直保持不变`now`。`getTime()`如果现在没有改变，您只需存储一次结果。正如这些新结果所示，在典型使用情况下，速度差异并不显着。

所以我想一般的建议是，一次性使用`+new Date()`更短，但`(new Date()).getTime()`更具可读性（并且更快一点）。

## 日期。现在（）：

如果您打算使用较新`Date.now()`的浏览器，您需要从[这里实现推荐的 shim 以支持较旧的浏览器。](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Date/now)

```
if (!Date.now) {
  Date.now = function now() {
    return new Date().getTime();
  };
} 
```

*（虽然我很困惑为什么他们不只是在那个例子中使用匿名函数）*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-15T20:13:47.323

恕我直言，当性能没有太大差异时，易读性应该总是胜出。我们都应该练习 WCTR“编写可供阅读的代码”。因此，对我来说，这是最佳实践：

```
(new Date()).getTime();
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T18:34:54.040

这完全取决于您要比较的内容。

事实上，在同一个日期对象上连续运行一百万次 .getTime 与读取一百万次固定变量的速度差不多，这似乎与任何实际代码无关。

一个更有趣的测试可能会比较每次迭代中从新日期返回时间字符串所需的时间。

```
<!doctype html>
<html lang="en">
<head>
<meta charset= "utf-8">
<title>get time</title>

<script>
/*does n= +new Date() take longer than n= new Date().getTime()?*/
var score=[],runs;

function tests(arg){
    runs= parseInt(document.getElementsByTagName('input')[0].value)|| 100000;
    var A= [], i= runs, start= new Date(),n=1357834972984;
    while(i--){
        A.push(n);
    }
    if(arg!==true){
        score[0]= (new Date()- start);  
        setTimeout(tests0, 0);
    }
}
function tests0(){
    runs= parseInt(document.getElementsByTagName('input')[0].value)|| 100000;
    var A= [], i= runs, start= new Date();
    while(i--){
        A.push(+(start));
    }
    score[1]= (new Date()- start);
    setTimeout(tests1, 0);
}

function tests1(){
    var A= [], i= runs, start= new Date();
    while(i--){
        A.push(start.getTime());
    }
    score[2]= (new Date()- start);
    setTimeout(tests2, 0);
}
function tests2(){
    var A= [], i= runs, start= new Date();
    while(i--){
        A.push(+(new Date));
    }
    score[3]= (new Date()- start);
    setTimeout(tests3, 0);
}
function tests3(){
    var A= [], i= runs, start= new Date();
    while(i--){
        A.push(new Date().getTime())
    }
    score[4]= (new Date()- start);
    setTimeout(report, 0);
}
function report(){ 
    var inp=document.getElementsByTagName('input'),t,
    lab=document.getElementsByTagName('label')
    for(var i=0;i<5;i++){
        inp[i+1].value=score[i]+' msec';
    }
}
onload= function(){
    tests(true);
    document.getElementsByTagName('button')[0].onclick=tests;
}
</script>
</head>
<body>
<h1>Comparing +prefix and getTime()</h1>
<p>
This comparison builds an array of the values for each test case, eg, 100000 array items for each case.
</p>
<ol>
<li>Building an array of a fixed integer, no date calculations at all.</li>
<li>Reading +prefix of existing Date and adding each value to array.</li>
<li>Reading getTime from existing Date and adding each value to array.</li>
<li>Creating a new date with +(new Date) and adding each value to array.</li>
<li>Creating a new date with new Date().getTime()and adding each value to array.</li>
</ol>
<p><label>Iterations of each test:<input type="text" size="8" value="100000"></label>
<button type="button">Run Tests</button></p>
<p><label>1\. Building the array with no calculation: <input type="text" size="12"></label></p>
<h2>Repeatedly reading the same created date</h2>
<p><label>2\. +prefix to existing Date: <input type="text" size="12"></label></p>
<p><label>3\. getTime from existing Date: <input type="text" size="12"></label></p>
<h2>Creating a new date and reading new value each time:</h2> 
<p><label>4\. +(new Date): <input type="text" size="12"></label></p>
<p><label>5\. new Date().getTime(): <input type="text" size="12"></label></p>
</body>
</html> 
```

# css - Responsive div, css and flexible in the same time?

> ID：14255665
> 
> 赞同：0
> 
> 时间：2013-01-10T10:25:58.043
> 
> 标签：css, responsive-design

I am using Twitter Bootstrap.

After you login to page: www.birkadehyasam.com with username: korayyy pass: abc

You will see 2 columns in the right side of the page. If you resize your browser and make it smaller from the righthandside, one column will go below the other one. At this point, I want the columns to extend in the browser and touch the righthandside of the browser.

How can I do this?

Thank you...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:29:20.480

不要在 px 中使用宽度，而是尝试使用 % width.. 尝试为 .span5 类提供 width:47% 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:46:24.313

因为您使用的是引导程序，所以在`.span5`您进行最小媒体查询之前，不会有 100% 的宽度。当您到达该断点时，您将不得不修改 css`span5`或添加一个覆盖宽度的类`.span5`

# c++ - C++: Division by vector.size() gives strange results

> ID：14255671
> 
> 赞同：2
> 
> 时间：2013-01-10T10:26:20.580
> 
> 标签：c++, vector, std, division, integer-division

> **Possible Duplicate:**
> [int divided by unsigned int causing rollover](https://stackoverflow.com/questions/5328269/int-divided-by-unsigned-int-causing-rollover)

Hi I am doing the following:

```
struct coord{
    int col;

};

int main(int argc, char* argv[]) {

    coord c;
    c.col = 0; 

    std::vector<coord> v;

    for(int i = 0; i < 5; i++){
        v.push_back(coord());
    }

    c.col += -13;

    cout << " c.col is " << c.col << endl;
    cout << " v size is " << v.size() << endl;

    c.col /= v.size();

    cout << c.col << endl;

} 
```

and I get the following output:

```
 c.col is -13
 v size is 5
858993456 
```

However, if I change the division line to `c.col /= ((int)v.size());` I get the expected output:

```
 c.col is -13
 v size is 5
-2 
```

Why is this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T10:29:44.487

这是存在的`v.size()`结果`unsigned`。

请参阅[int 除以 unsigned int 导致翻转](https://stackoverflow.com/questions/5328269/int-divided-by-unsigned-int-causing-rollover)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T10:28:50.863

问题是`vector< ... >::size()`返回`size_t`，这是`typedef`一个`unigned`整数类型。显然，当您将有符号整数与无符号整数相除时，就会出现问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T10:37:49.353

std::vector::size 返回一个 size_t ，它是一个无符号整数类型，通常是**unsigned int**。**当您使用int**和**unsigned int**执行算术运算时，**int**操作数将转换为**unsigned int**以执行运算。在这种情况下，-13 被转换为**unsigned int**，这是一个接近 4294967295 的数字（十六进制的 FFFFFFFF）。然后除以 5。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T11:34:11.620

如前所述，原因是通过首先将有符号值转换为无符号来执行有符号/无符号除法。

因此，您需要通过手动将无符号值转换为有符号类型来防止这种情况。

对于. `v.size()`_ `int`但是由于除数*确实*适合`int`，因此当除数大于除数时，除法的结果相当无聊。所以假设 2 的补码并且没有填充位：

```
if (v.size() <= INT_MAX) {
    c.col /= int(v.size());
} else if (c.col == INT_MIN && v.size() - 1 == INT_MAX) {
    c.col = -1;
} else {
    c.col = (-1 / 2);
} 
```

在 C++03 中，负值除以较大的正值是 0 还是 -1 是实现定义的，因此很有趣`(-1 / 2)`。在 C++11 中，你可以只使用 0。

要涵盖除 2 的补码以外的其他表示，您需要以不同的方式处理特殊情况。

# jquery - show edit form instead inline edition

> ID：14255674
> 
> 赞同：0
> 
> 时间：2013-01-10T10:26:25.523
> 
> 标签：jquery, jqgrid

I have a formatter edit button to edit a row, I defined it in conModel

```
colModel:[ 
        {name:'HOSTID', index:'HOSTID', width:120, editable: true, editoptions:{size:"15", maxlength:"10"}}, 
        {name:'NAME', index:'NAME', width:250}, 
        {name:'DOCUMENT', index:'DOCUMENT', width:75, editable: true, editoptions:{size:"15", maxlength:"15"}},
        {name:'IDMUREX', index:'IDMUREX', width:80, editable: true, editoptions:{size:"15", maxlength:"4"}},
        {name:'TYPE', index:'TYPE', width:60, formatter: 'select',
            edittype: 'select', align: 'center', editable: true, 
            editoptions: {value: 'T:<bean:message bundle="mantenimiento" key="titularidad.titularalto"/>;C:<bean:message bundle="mantenimiento" key="titularidad.cotitularalto"/>', defaultValue: ''}},
        {name: 'ACTIONS', width:50, fixed:true, sortable:false, search:false, resize:false, formatter:'actions', 
            formatoptions:{
                keys:true,
                editOptions: {
                    modal: true,
                    width: 'auto',
                    closeAfterEdit: true,
                    closeOnEscape: true,
                    recreateForm: true
                }, 
```

When I click on edit button, I have inline edition on the row, but I need to show the edit form.

How I can do it?

Regards

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:55:13.767

`formatter: "actions"`支持`editformbutton: true`您可以使用的选项。您只需将其作为`formatoptions`. `keys:true`您可以在 case from中删除，`formatoptions`因为该选项仅在内联编辑的情况下使用。

# python - Problems using gradient boosting classifier in Scikit-learn

> ID：14255675
> 
> 赞同：1
> 
> 时间：2013-01-10T10:26:33.357
> 
> 标签：python, numpy, machine-learning, scikit-learn

I'm trying to use the gradient boosting classifier `ensemble.gradientBoostingClassifier` in Scikit-learn for python, but I keep getting these error messages:

```
Floating point exception: 8 
```

and

```
Python quit unexpectedly while using the _tree.so plug-in. 
```

Reading [this](https://github.com/scikit-learn/scikit-learn/issues/1406), I get the impression that it is due to a change in NumPy, but I can't see if anyone have solved it yet?

I am running the following versions:

*   Scikit-learn: `0.13-git`
*   NumPy: `1.8.0.dev-20224ea`

# c# - devexpress 元素的样式

> ID：14255679
> 
> 赞同：3
> 
> 时间：2013-01-10T10:26:39.253
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor, devexpress

我有一个关于 devexpress 元素（尤其是组合框）外观样式的问题。我浏览了演示并寻找了教程，但到目前为止没有找到任何似乎有效的东西（我知道它必须以某种方式工作）。

下面是我如何创建组合框的示例。我遇到的问题是它看起来像在这篇文章末尾的图像上显示的那样。使用 settings.Properties.Native=true 它看起来像一个普通的组合框，但如果设置为 false 它看起来完全不同（遗憾的是太大了）。所以我的问题是：我怎样才能格式化它看起来至少有点类似于普通的组合框（大小）？（换句话说，在这种情况下，常见的方法是什么？如果通过 CSS 完成，我必须在那里使用什么关键字，...？）

肿瘤坏死因子

```
Kategorie  @Html.DevExpress().ComboBox(
                    settings => {
                        settings.Name = "ProductCategory";
                        settings.Width = 300;
                        settings.SelectedIndex = 0;
                        settings.Properties.DropDownStyle = DevExpress.Web.ASPxEditors.DropDownStyle.DropDown;
                        settings.Properties.IncrementalFilteringMode = DevExpress.Web.ASPxEditors.IncrementalFilteringMode.Contains;
                        settings.Properties.TextField = "Name";

                        settings.Properties.DisplayFormatInEditMode = false;
                        settings.Properties.Native = false;
                        settings.Properties.TextFormatString = "{0}";
                        settings.Properties.DisplayFormatString = "{0}";
                        settings.Properties.ValueField = "Id";
                        settings.Properties.ValueType = typeof(int);
                    }
  ).BindList(Categories).GetHtml() 
```

* * *

![组合框外观的图像](../Images/d253bb67c40b3c7ecbdc5e09d8e13865.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:00:43.347

从开始 -> 所有程序 -> Developer Express xxx -> 组件 -> 工具 -> ASPxThemeBuilder 中选择**ASPxThemeBuilder工具。**

相关文档：

*   [ASPxThemeBuilder](http://documentation.devexpress.com/#ASPxThemeBuilder/CustomDocument10781)
*   [ASPxThemeDeployer](http://documentation.devexpress.com/#ASPxThemeDeployer/CustomDocument5500)

# android - 从android中的json数组中按名称获取json对象

> ID：14255683
> 
> 赞同：0
> 
> 时间：2013-01-10T10:27:03.650
> 
> 标签：android, json

我有这样的json解析

姓名

*   牌

*   价值推荐

    *   值
    *   值 b
*   MPN

*   价值推荐
    *   值
    *   值 b

我可以在列表视图中显示这个值（品牌和 mpn）。我想如果我点击品牌，它将在列表中显示价值推荐（价值 a 和 b）。如果我单击 mpn，它也会显示列表中名称 2 的值 recom（值 a 和 b）。任何人都可以给我建议？？谢谢

这是我的 json 解析

```
array (
    'features' => 
    array (
     'Recommendations' => 
      array (
        'id' => 
        'NameRecommendation' => 
        array (
          0 => 
          array (
            'Name' => 'Brand',
            ),      
            'ValueRecommendation' => 
            array (
              0 => 
              array (
                'Value' => 'Unbranded/Generic',
                ),

              1 => 
              array (
                'Value' => 'Canon',
                ),

              2 => 
              array (
                'Value' => 'Nikon',
                ),

              ),
  1 => 
          array (
            'Name' => 'MPN',
            ),
              'ValueRecommendation' => 
            array (
              0 => 
              array (
                'Value' => 'mpn1',
                ),

              1 => 
              array (
                'Value' => 'aas',
                ),

              2 => 
              array (
                'Value' => 'aab',
                ), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:35:06.813

您可以在 JSONArray 对象中阅读此内容

这是示例

```
JSONArray jsonArr = new JSONArray(jsonStr); // this is you string as formatted in json array if not parse by this construct it will throw the jsonparseexception 
```

现在通过迭代器遍历这个 json 的每个对象

```
for(int i=0;i<jsonArr.length();i++){
    JSONObject jsonObj = jsonArr.get(i).getJsonObject("value recom");
    String a = jsonObj.getString("a"); // here is your data for a object
    String b = jsonObj.getString("b"); // here is your data for b object
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T09:40:00.840

使用谷歌 gson 时。

```
var getRowData =
[{
    "dayOfWeek": "Sun",
    "date": "11-Mar-2012",
    "los": "1",
    "specialEvent": "",
    "lrv": "0"
},
{
    "dayOfWeek": "Mon",
    "date": "",
    "los": "2",
    "specialEvent": "",
    "lrv": "0.16"
}];

    JsonElement root = new JsonParser().parse(request.getParameter("getRowData"));
     JsonArray  jsonArray = root.getAsJsonArray();
     JsonObject  jsonObject1 = jsonArray.get(0).getAsJsonObject();
     String dayOfWeek = jsonObject1.get("dayOfWeek").toString(); 
```

// 当使用杰克逊时

```
 JsonFactory f = new JsonFactory();
              ObjectMapper mapper = new ObjectMapper();
          JsonParser jp = f.createJsonParser(getRowData);
          // advance stream to START_ARRAY first:
          jp.nextToken();
          // and then each time, advance to opening START_OBJECT
         while (jp.nextToken() == JsonToken.START_OBJECT) {
            Map<String,Object> userData = mapper.readValue(jp, Map.class);
            userData.get("dayOfWeek");
            // process
           // after binding, stream points to closing END_OBJECT
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:34:33.823

检查此[url](http://www.androidcompetencycenter.com/2009/10/json-parsing-in-android/)`jsonobject`并使用of -name 读取总数据

# javascript - 使用 JQuery 从外部页面计算类

> ID：14255684
> 
> 赞同：2
> 
> 时间：2013-01-10T10:27:06.440
> 
> 标签：javascript, jquery

我有一个 javascript 文件，需要计算外部 html 页面中有多少个类（.wrapper）。

到目前为止，我一直在使用它进行计数（以前都在同一页面上）。

```
var adCount = $('.wrapper').size();
alert(adCount); 
```

但我似乎找不到任何可以让我在与代码运行不同的页面上运行此语句的东西。我希望添加这样的东西。

```
var adCount = $('js/sliderExternal.html .wrapper').size();
alert(adCount); 
```

它们在同一个目录中，但我将页面分开，因为外部页面需要不断更新，我不希望它位于代码页面的中间。（此页面可能由根本不编码的人更新）。无论如何，对此的任何帮助将不胜感激。

如果您需要更多信息，请随时询问！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:35:00.667

这应该有效：

```
$.get('js/sliderExternal.html', function(data){
  $(data).find('.wrapper').size();
}) 
```

另请参阅[$.get() 的 API 文档](http://api.jquery.com/jQuery.get/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:29:24.507

您必须先将页面加载到您的 html 中`document.load()`，然后再将其加载`append()`到您的 DOM 结构中。完成此操作后，您可以使用 JQuery 查找其中的类数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:33:41.250

将外部 html 加载到一些`div`可见性为 false 的内部。类似这样的东西：

```
 $('#id_of_div').load(external_url) 
```

然后使用以下方法找到长度：

```
 var numItems = $('.wrapper').length 
```

# java - 自动报告 jira 中的 java 异常

> ID：14255687
> 
> 赞同：4
> 
> 时间：2013-01-10T10:27:17.597
> 
> 标签：java, exception, reporting, jira

我正在使用 Spring roo (mvc) 开发 Web 应用程序，这个应用程序是 ERP 系统。我计划使用 Jira 作为我的问题报告系统。

我的问题是：是否有任何解决方案可以帮助我自动报告我在 jira 中的 Web 应用程序中抛出的异常？

我想创建一些脚本来扫描日志并在 jira 中创建问题。你怎么看待这件事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:33:01.727

要解决您的问题，您可以使用 LogDigger 库。

这里有一篇最近出现的文章，其中描述了如何将 LoggDigger 与 Zendesk 集成。还介绍了如何忽略一些异常以及如何防止帮助台系统上的重复。类似地，您可以使用其 REST API 将 LogDigger 与 Jira 集成。

[http://mobeelizer.com/blog/2013/01/how-to-integrate-logdigger-with-zendesk-quick-tutorial/](http://mobeelizer.com/blog/2013/01/how-to-integrate-logdigger-with-zendesk-quick-tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:34:28.797

在 jira 中创建票证的一种简单方法是[发送一封简单的电子邮件](https://confluence.atlassian.com/display/JIRA/Creating+Issues+and+Comments+from+Email)。您还可以使用[Rest API](http://docs.atlassian.com/jira/REST/latest/)（感谢 aphex）。

在 Spring Web MVC 中，您可以使用[ExceptionHandler](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html)在发生异常时“做某事”。您还可以使用 a`HandlerExceptionResolver`以相同的方式全局处理所有异常。

也许[这篇](http://steveliles.github.com/configuring_global_exception_handling_in_spring_mvc.html)文章可以帮助你处理异常

但是，正如 Andreas 在评论中指出的那样，您应该确保不会多次报告相同的错误。这很容易导致大量的 jira 票证。

# php - Ajax 无法将数据发送到其他文件夹中的文件

> ID：14255689
> 
> 赞同：1
> 
> 时间：2013-01-10T10:27:18.813
> 
> 标签：php, ajax

在我的页面中，我有以下代码

**插入.php**

```
<?php 
include ("../config/config.php");   
$state = $_POST['state'];
$squery = mysql_query("INSERT INTO ctm_state(state) VALUES('$state')");
if($squery){
echo "Data for $state inserted successfully!";
}
else{ echo "An error occurred!"; }
?> 
```

**状态.php**

```
<script type="text/javascript">
$(document).ready(function(){
$("#insert").click(function(){
var state=$("#state").val();
$.post('ctmadmin/ajax_state.php', {state: state},
function(data){
$("#message").html(data);
$("#message").hide();
$("#message").fadeIn(1500); //Fade in the data given by the insert.php file
});
return false;
});
});
</script> 
```

使用上述 URL 时，ajax 工作正常并显示插入数据的正确结果。但是如果 URL 更改为

$.post('ctmadmin/phpqrcode/ajax_state.php', {state: state},

ajax_state 位于另一个名为 phpqrcode 的文件夹中，当我使用上面的 URL 时，它不会将数据插入表中，也不会在首页显示任何内容。任何人都可以帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:32:46.663

如果您已移至`insert.php`子目录，则其包含将失败，因为它具有相对路径，您可以在其前面加上`../`：

```
include ("../config/config.php"); 
```

# java - 资源泄漏：“in”从未关闭，尽管它已关闭

> ID：14255691
> 
> 赞同：10
> 
> 时间：2013-01-10T10:27:20.747
> 
> 标签：java, java-io

我知道有几个类似标题的问题，但他们中的大多数人只是忘记`close()`在他们的信息流中放置指令。这里不同。

假设我有以下最小示例：

```
public void test() throws IOException
{
    InputStream in;
    if( file.exists() )
    {
        in = new FileInputStream( file );
    }
    else
    {
        in = new URL( "some url" ).openStream();
    }
    in.close();
} 
```

这在 Eclipse (Juno SR1) 中给了我一个`Resource leak: 'in' is never closed`警告。但是当我将`in.close()`移入条件块时，警告消失了：

```
public void test() throws IOException
{
    InputStream in;
    if( file.exists() )
    {
        in = new GZIPInputStream( new FileInputStream( file ) );
        in.close();
    }
    else
    {
        in = new URL( "some URL" ).openStream();
    }
} 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T10:33:20.307

由于 IO 异常，您可能会遇到资源泄漏（可能）

尝试执行以下操作：

```
public void test() throws IOException
{
    InputStream in= null;
    try {
        if( file.exists() )
        {
            // In this case, if the FileInputStream call does not
            // throw a FileNotFoundException (descendant of IOException)
            // it will create the input stream which you are wrapping
            // in a GZIPInputStream (no IO exception on construction)
            in = new GZIPInputStream( new FileInputStream( file ) );
        }
        else
        {
            // Here however, if you are able to create the URL
            // object, "some url" is a valid URL, when you call
            // openStream() you have the potential of creating
            // the input stream. new URL(String spec) will throw
            // a MalformedURLException which is also a descendant of
            // IOException.
            in = new URL( "some url" ).openStream();
        }

        // Do work on the 'in' here 
    } finally {
        if( null != in ) {
            try 
            {
                in.close();
            } catch(IOException ex) {
                // log or fail if you like
            }
        }
    }
} 
```

执行上述操作将确保您已关闭流或至少已尽最大努力这样做。

在您的原始代码中，您声明了 InputStream 但从未初始化。这是一种糟糕的形式。如上所示，将其初始化为 null。我的感觉，我目前没有运行 Juno，是它看到 InputStream 'in'，可能会通过所有的障碍和障碍到达你将要使用它的地步。不幸的是，正如有人指出的那样，您的代码例如有点狡​​猾。按照我和@duffymo 的详细说明执行此操作，您将摆脱警告。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T10:35:00.917

我是这样写的：

```
public void test() throws IOException
{
    InputStream in = null;
    try {
        if(file.exists()) {
            in = new FileInputStream( file );
        } else {
            in = new URL( "some url" ).openStream();
        }
        // Do something useful with the stream.
    } finally {
        close(in);
    }
}

public static void close(InputStream is) {
    try {
        if (is != null) {
            is.close();
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-10T10:31:45.290

我怀疑警告不正确。它可能正在检查您是否正在关闭同一范围内的流。在第二种情况下，您没有关闭第二个流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-09T14:26:22.683

This same Eclipse reporting can happen when you explicitly throw an exception after you have opened your resource like:

```
public void method() throws IOException {
   BufferedReader br = new BufferedReader(new FileReader("myfile.txt"));
   while (br.ready()) {
      String line = br.readLine():
      if (line.length() > 255) {
         throw new IOException("I am some random IOException");
      }
   }
   br.close();
} 
```

This is some contrived code for demonstration purposes so don't look too hard.

If one were to comment out the line, the warning goes away. Of course, you instead want to make sure that that resource is being closed properly. You could do:

```
if (line.length() > 255) {
   br.close();
   throw new IOException("I am some random IOException");
} 
```

Do not rely on the Eclipse warnings in this case though. Get in the habit of using the try/finally approach to make sure that resources are correctly and consistently being closed.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T10:33:37.600

如果文件不存在并且您尝试关闭不存在的文件，则可能不会初始化您的输入流。

您的第二个示例还需要一个 close 语句以避免泄漏。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-23T07:38:36.860

我有类似的东西：

```
InputStream content = httpResponse.getEntity()==null?null:httpResponse.getEntity().getContent(); 
```

这给出了同样的警告。但是，如果我像这样离开它：

```
InputStream content =httpResponse.getEntity().getContent(); 
```

我没有收到任何警告。是不是很奇怪还是什么？

- 我希望我的信息能够为原始问题增加知识。谢谢！

# ios - 动态调整 UICollectionViewCell 的大小

> ID：14255692
> 
> 赞同：1
> 
> 时间：2013-01-10T10:27:24.697
> 
> 标签：ios, uicollectionview, uicollectionviewcell

我有一个`UICollectionView`2`UILabel`和`UIImage`一个类似的布局：

```
 --------------------
 |                   |
 |    LABEL1         |
 |    IMAGE          |
 |    LABEL2         |
 |    ......         |
 |    ......         |
 -------------------- 
```

Label2 具有可变数量的行，在单元格之间有所不同，我希望能够根据 自动调整大小`UICollectionView height`，`label2 height`让它“自动填充”单元格。在iOS中可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:10:30.833

您可以重写以下方法`UICollectionViewDelegateFlowLayout`来动态计算 UICollectionViewCell 的高度，根据您的要求设置常量值。

```
-(CGSize) collectionView:(UICollectionView *)collectionView 
                  layout:(UICollectionViewLayout *)collectionViewLayout 
  sizeForItemAtIndexPath:(NSIndexPath *)indexPath{

    UIFont *fontLabel1 = [UIFont systemFontOfSize:17];
    UIFont *fontLabel2 = [UIFont systemFontOfSize:14];
    int padding = 5;
    int maxWidthOfLabel = 300;
    CGSize maximumLabelSize = CGSizeMake(maxWidthOfLabel, CGFLOAT_MAX);

    NSString *strLabel1 = @"Label one text";// Get text for label 1 at indexPath
    NSString *strLabel2 = @"Label two text";// Get text for label 2 at indexPath

    NSStringDrawingOptions options = NSStringDrawingTruncatesLastVisibleLine |
    NSStringDrawingUsesLineFragmentOrigin;

    NSDictionary *attr1 = @{NSFontAttributeName: fontLabel1};
    NSDictionary *attr2 = @{NSFontAttributeName: fontLabel2};

    // Calculate individual label heights
    CGFloat heightLabel1 = [strLabel1 boundingRectWithSize:maximumLabelSize
                                                options:options
                                             attributes:attr1
                                                context:nil].size.height;
    CGFloat heightLabel2 = [strLabel2 boundingRectWithSize:maximumLabelSize
                                                options:options
                                             attributes:attr2
                                                context:nil].size.height;
    CGSize sizeOfImage = CGSizeMake(50, 50);

    // Calculate height based on all Views (2 Labels + 1 ImageView)
    CGFloat height = heightLabel1+heightLabel2+sizeOfImage.height+2*padding;
    CGFloat width = collectionView.frame.size.width;// Set width
    CGSize size = CGSizeMake(width, height);
    return size;
} 
```

# javascript - 使用 jQuery 或 javascript 查找最接近的匹配值

> ID：14255698
> 
> 赞同：8
> 
> 时间：2013-01-10T10:27:43.520
> 
> 标签：javascript, jquery, option

考虑一个标记，例如

```
<select id="blah">
  <option value="3">Some text</option>
  <option value="4">Some text</option>
  <option value="8">Some text</option> // <---- target this tag based on value 7
  <option value="19">Some text</option>
</select> 
```

假设我有一个值，比如 7。是否可以定位`value`属性最接近 7 的选项标签，在这种情况下，它是 7`<option value="8">`吗？

我知道`^`哪个意味着开始，`$`哪个意味着结束，并且希望是否有类似的东西可以找到与给定值最接近的匹配项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:48:25.507

我会这样：

[http://jsfiddle.net/GNNHy/](http://jsfiddle.net/GNNHy/)

```
var $tmpOption = $('<option value="7">Some text 7</option>');
$("#blah").append($tmpOption);
var my_options = $("#blah option");
my_options.sort(function(a,b) {
    if (parseInt(a.value,10) > parseInt(b.value,10)) return 1;
    else if (parseInt(a.value,10) < parseInt(b.value,10)) return -1;
    else return 0
})

$("#blah").empty().append( my_options ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T10:37:49.437

递归怎么样？它将找到最接近的值：

**[JS-BIN 演示](http://jsbin.com/erekus/2/edit)**

```
function getClosest(val, ddl, increment){
  if(ddl.find('option[value="'+val+'"]').length){
      return val;
  }
  else
    try{
      if(increment)
    return getClosest(++val, ddl, increment);
      else
        return getClosest(--val, ddl, increment);
    }
  catch(err){
    return -1;
  }
}

function findClosest(val, ddl){
   var larger = getClosest(val, ddl, true);
   var smaller = getClosest(val, ddl, false);
  if(larger == smaller == -1)
    return -1;
  else if (larger == -1)
    return smaller;
  else if (smaller == -1 )
    return larger;

  if(larger - val > val - smaller)
    return smaller;
  else
    return larger
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T10:34:57.467

是的，只需用选项值（使用每个函数）减去您的值（7）......具有最小积极结果的值将是您的目标选项。我希望你会得到想要的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T10:39:03.390

最简单的方法可能是好的旧线性搜索（你可以做二进制，但它比平时更棘手）：

```
var target;
var $options;

var best=Infinity;
var bestAt;

$options.each(function(){
  var error = this.value - target;
  error = error>0 ? error : -error;
  if(error<=best){
    best=error;
    bestAt=this;
  }
})

//return $(bestAt); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T10:39:07.920

如果你可以使用 jquery，我会做类似的事情

```
$(function () {
        // comes from somewhere
        var val = 7;

        var sortByDifference = $("#blah option").sort(function (opt1, opt2) {
            return Math.abs(parseInt($(opt1).val()) - val) - Math.abs(parseInt($(opt2).val()) - val);
        });

        alert($(sortByDifference[0]).val());
    }); 
```

在 sortByDifference 中，所有值都按照它们与您的值的接近程度进行排序。该例程返回最接近的更大或更小，并且不需要对选项进行排序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-10T10:39:44.293

```
function findClosest(num){
    var select = document.getElementById('blah');
    var options = select.options;
    var dif = Infinity;
    var index;
    for(var i = 0; i < options.length; i++){
        var newdif = Math.abs(parseInt(options[i].value) - num);
        if(newdif < dif){
             dif = newdif;
             index = i;
        }
    }
    select.selectedIndex = index;
} 
```

# algorithm - 动态规划中的背包变体

> ID：14255704
> 
> 赞同：2
> 
> 时间：2013-01-10T10:27:56.143
> 
> 标签：algorithm, optimization, dynamic-programming

我正在尝试解决这个练习：我们有 n 个项目，其中每个项目都有一个给定的非负重量 w1,w2,...,wn 和值 v1,v2,...,vn，以及一个最大重量容量的背包W.我必须找到一个最大值的子集S，受两个限制：1）集合的总重量不应超过W；2) 我不能获取具有连续索引的对象。

例如，当 n = 10 时，可能的解是 {1, 4, 6, 9}, {2, 4, 10} o {1, 10}。

我怎样才能建立一个正确的重复？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T10:50:39.230

回想一下，用于 DP 解决方案的背包递归公式是：

```
D(i,w) = max { D(i-1,w) , D(i-1,w-weight[i]) + value[i] } 
```

在你修改的问题中，如果你选择了`i`- 你不能采取`i-1`，导致修改：

```
D(i,w) = max { D(i-1,w) , D(i-2,w-weight[i]) + value[i] }
                              ^
                          note here 
                       i-2 instead of i-1 
```

与经典背包类似，它也是一种详尽的搜索——因此出于同样的原因提供了最佳解决方案。
给出的想法是你已经决定选择`i`——你不能选择`i-1`，所以找到最多使用该项目的最佳解决方案`i-2`。（如果您决定排除，则与原始内容没有任何变化`i`）

# javascript - 在我的网站上显示 ebay 反馈（评论）

> ID：14255705
> 
> 赞同：0
> 
> 时间：2013-01-10T10:27:58.120
> 
> 标签：javascript

我已经看到各种网站提供通过广告链接返回到自己等来做到这一点，但我认为它应该在 Javascript 中是可行的。

有没有人有这样的脚本或示例网站，我可以从中学习来创建它？

理想情况下，我想获取反馈意见和卖家星级评分，然后显示在我的网站上。还想展示 10 条最新评论，这些评论随着更多用户在 ebay 上留下反馈而动态更新。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:31:47.993

这是一个可用于拉取 eBay 反馈的示例。

```
 <link rel="stylesheet" type="text/css" href="http://www.x-shops.co.uk/ebay/css/feedback.css" />
<script type="text/javascript" src="http://www.x-shops.co.uk/ebay/feedback.php?id=[USERID]&site=[SITEID]&seller=[SELLER]"></script> 
```

[USERID] 这是您的 eBay 用户 ID，并且是必需的。

[SITEID] 如果您的网站不是 eBay.co.uk，您只需要更改此设置，请在此处查看 eBay 网站代码列表

[卖家] 可选，您可以添加您的电力卖家级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-20T21:31:44.887

在这里，我还发现了另一个 eBay 工具，它是一个小徽章，只需添加一行 html 代码，即可在您的网站或博客上显示/显示 eBay 反馈分数配置文件。但是，它有很多变量可以自定义您的徽章样式。

这里的代码：

```
<iframe width="180" HEIGHT="160" style="border: none;" src="http://myfeedbackscore.com/fbscore.php?id=Your-eBay-User-ID"></iframe> 
```

这是方法，如何使用它： [如何使用上面的 eBay 小部件](http://myfeedbackscore.com/How.html)

# python - 在 Python 中使用 C/C++ 扩展编写优化项目的技巧？

> ID：14255706
> 
> 赞同：0
> 
> 时间：2013-01-10T10:28:00.060
> 
> 标签：python, optimization, project, mpi

我有一个用 IDL（交互式数据语言）编写的项目，用于通过同化一堆不同的数据输入来生成电离层的近实时模型。IDL 不是一种很好的语言来编写它，但这主要是因为遗留代码。尽管 IDL 中的对象环境相对有限，但该项目是用 OO 风格编写的。

该项目的下一代范围要大得多，并且需要更多的计算任务。IDL 对多线程的支持有限，不支持在分布式内存系统上并行运行。最初的计划是用 C++ 编写下一代代码，使用 MPI 进行并行化，但是我最近开始学习 Python，并且对易用性以及快速开发和维护代码的能力印象深刻。我现在正在考虑用 Python 编写这个项目的高级部分，并在需要时/如果需要改进核心数字处理部分的优化，则使用 C 扩展。

由于我是 Python 新手，因此我不会立即明白 Python 与 C 版本相比可能会慢的地方（而且在我了解它的特性之前，我也可能在 Python 中做一些次优的事情）。这意味着我会考虑基本上计划整个项目，就好像它是用 Python 完成一样，编写代码，配置文件和反复优化，直到我无法再做任何改进，然后寻找用最慢的部分替换最慢的部分C 扩展。

这是一个好方法吗？有人对开发此类项目有任何提示吗？我将寻求尽可能多地利用现有的优化良好的库（例如 scaLAPACK），这也可以减少为数字运算滚动我自己的基于 C 的扩展的需要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:04:20.533

当您执行大量循环时，Python 尤其慢，尤其是嵌套循环

```
for i in x:
    for j in y:
        .... 
```

当涉及计算密集型问题时，99% 的问题都可以通过使用 numpy 而不是循环进行矢量化计算来解决，例如：

```
x = np.arange(1000) #numbers from 0 to 999
y = np.arange(1000, 2000) #numbers from 1000 to 1999

# slow:
for i in range(len(x)):
    y[i] += x[i]

# fast:
y += x 
```

对于许多科学问题，有二进制库，用 FORTRAN 或 C(++) 编写，在 Python 中可用。这让生活变得非常轻松。

如果您到了无法做到的地步，我会坚持使用 Cython 轻松实现 C 中的核心部分，而无需编写 C。

# c# - 添加到导航属性时验证实体

> ID：14255709
> 
> 赞同：0
> 
> 时间：2013-01-10T10:28:12.617
> 
> 标签：c#, entity-framework, validation, collections

我有一个具有集合属性的实体，看起来像这样：

```
public class MyEntity
{
    public virtual ICollection<OtherEntity> Others { get; set; }
} 
```

当我通过数据上下文或存储库检索此实体时，我想防止其他人通过使用`MyEntity.Others.Add(entity)`. 这是因为我可能希望在将我的实体添加到集合之前执行一些验证代码。我会通过提供这样的方法来做到这`MyEntity`一点：

```
public void AddOther(OtherEntity other)
{
    // perform validation code here

    this.Others.Add(other);
} 
```

到目前为止，我已经测试了一些东西，我最终得出的结果是这样的。我在我的实体上创建了一个`private`集合并公开了一个`public ReadOnlyCollection<T>`如下`MyEntity`所示的：

```
public class MyEntity
{
    private readonly ICollection<OtherEntity> _others = new Collection<OtherEntity>();

    public virtual IEnumerable<OtherEntity>
    {
        get
        {
            return _others.AsEnumerable();
        }
    }
} 
```

这**似乎**是我正在寻找的，我的单元测试通过了，但我还没有开始做任何集成测试，所以我想知道：

1.  有没有更好的方法来实现我正在寻找的东西？
2.  如果我决定走这条路（如果可行），我将面临什么影响？

始终感谢您的任何帮助。

**编辑 1**我已从使用 a 更改为`ReadOnlyCollection`正在`IEnumerable`使用`return _others.AsEnumerable();`作为我的吸气剂。单元测试再次顺利通过，但我不确定在集成过程中将面临的问题，EF 开始使用相关实体构建这些集合。

**编辑 2**因此，我决定尝试创建派生集合（调用它`ValidatableCollection`）的建议，实现`ICollection`我的`.Add()`方法在将提供的实体添加到内部集合之前对其执行验证的位置。不幸的是，Entity Framework 在构建导航属性时调用了这个方法——所以它并不适合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:00:01.963

我会为此目的创建集合类：

```
OtherEntityCollection : Collection<OtherEntity>
{
    protected override void InsertItem(int index, OtherEntity item)
    {
        // do your validation here
        base.InsertItem(index, item);
    }

    // other overrides
} 
```

这将变得更加严格，因为将无法绕过此验证。[您可以在文档](http://msdn.microsoft.com/en-us/library/ms132412.aspx)中查看更复杂的示例。

我不确定的一件事是如何让 EF 在实现数据库中的数据时创建这种具体类型。但这可能是可行的，如此[处所示](https://stackoverflow.com/questions/6445522/ef-code-first-custom-collections)。

**编辑：** 如果您想将验证保留在实体内，您可以通过自定义接口使其通用，实体将实现和您的通用集合，将调用此接口。

至于 EF 的问题，我认为最大的问题是当 EF 重新实现集合时，它会调用`Add`每个项目。这然后调用验证，即使该项目不是作为业务规则“添加”，而是作为基础设施行为。这可能会导致奇怪的行为和错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:00:11.933

我建议返回`ReadOnlyCollection<T>`. 我过去在[类似的场景](https://stackoverflow.com/questions/443144/resticting-access-to-method-calls-on-read-only-properties)中使用过它，我没有遇到任何问题。

此外，该`AsEnumerable()`方法不起作用，因为它只会更改引用的类型，不会生成新的独立对象，这意味着

```
MyEntity m = new MyEntity();
Console.WriteLine(m.Others.Count()); //0
(m.Others as Collection<OtherEntity>).Add(new OtherEntity{ID = 1});
Console.WriteLine(m.Others.Count()); //1 
```

将成功插入您的私人收藏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T11:00:15.000

您不应该使用`AsEnumerable()`on `HashSet`，因为可以通过将集合转换为`ICollection<OtherEntity>`

```
var values = new MyEntity().Entities;
((ICollection<OtherEntity>)values).Add(new OtherEntity()); 
```

尝试返回列表的副本，例如

```
return new ReadOnlyCollection<OtherEntity>(_others.ToList()).AsEnumerable(); 
```

这样可以确保用户在尝试修改异常时会收到异常。您可以公开`ReadOnlyCollection`为返回类型，而不是`IEnumerable`为了用户的清晰和方便。在 .NET 4.5 中添加了一个新接口`IReadOnlyCollection`。

除了某些组件依赖于 List 突变外，您不会遇到大的集成问题。如果用户调用 ToList 或 ToArray，他们将返回一个副本

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T11:01:08.240

您在这里有两个选择：

1）您当前使用的方式：将集合公开为 a`ReadOnlyCollection<OtherEntity>`并在类中添加方法`MyEntity`来修改该集合。这很好，但考虑到您正在为仅*使用*`OtherEntity`该集合的类中的集合添加验证逻辑，因此如果您在项目中的其他地方使用集合，您可能需要*复制*验证代码，这是代码气味（DRY）：P*`OtherEntity`*

 **2）为了解决这个问题，最好的方法是创建一个自定义`OtherEntityCollection`类实现`ICollection<OtherEntity>`，这样你就可以在那里添加验证逻辑。这真的很简单，因为您可以创建一个简单的 OtherEntityCollection 对象，其中包含一个`List<OtherEntity>`真正实现集合操作的实例，因此您只需要验证插入：。

编辑：如果您需要对多个实体进行自定义验证，您应该创建一个自定义集合，该集合接收执行该验证的其他对象。我已经修改了下面的示例，但是创建一个泛型类应该不难：

```
class OtherEntityCollection : ICollection<OtherEntity>  
{
  OtherEntityCollection(Predicate<OtherEntity> validation)
  {
    _validator = validator;
  } 

  private List<OtherEntity> _list = new List<OtherEntity>();
  private Predicate<OtherEntity> _validator;
  public override void Add(OtherEntity entity)   
  {
     // Validation logic
     if(_validator(entity))
       _list.Add(entity);   
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T11:21:02.150

EF 无法在没有 setter 的情况下映射属性。甚至`private set { }`需要一些配置。将模型保留为 POCO，Plain-Old 像 DTO

常见的方法是创建单独的服务层，其中包含在保存之前针对您的模型的验证逻辑。

样品..

```
public void AddOtherToMyEntity(MyEntity myEntity, OtherEntity otherEntity)
{
    if(myService.Validate(otherEntity)
    {
      myEntity.Others.Add(otherEntity);
    }
    //else ...
} 
```

附言。您可以阻止编译器执行某些操作，但不能阻止其他编码器。只是让你的代码明确地说“不要直接修改实体集合，直到它通过验证”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T16:23:15.057

终于有了一个合适的工作解决方案，这就是我所做的。我将更改为更具可读性的内容，例如`MyEntity`我想阻止老师教的学生数量超过他们可以处理的地方。`OtherEntity``Teacher``Student`

首先，我为我打算以这种方式验证的所有实体创建了一个接口，`IValidatableEntity`如下所示：

```
public interface IValidatableEntity
{
    void Validate();
} 
```

然后我在 my 上实现这个接口，`Student`因为我在添加到`Teacher`.

```
public class Student : IValidatableEntity
{
    public virtual Teacher Teacher { get; set; }

    public void Validate()
    {
        if (this.Teacher.Students.Count() > this.Teacher.MaxStudents)
        {
            throw new CustomException("Too many students!");
        }
    }
} 
```

现在谈谈我如何调用验证。我覆盖`.SaveChanges()`我的实体上下文以获取添加的所有实体的列表，并为每个调用验证 - 如果它失败，我只需将其状态设置为分离以防止它被添加到集合中。因为我使用异常（此时我仍然不确定）作为我的错误消息，所以我`throw`将它们排除在外以保留堆栈跟踪。

```
public override int SaveChanges()
{
    foreach (var entry in ChangeTracker.Entries())
    {
        if (entry.State == System.Data.EntityState.Added)
        {
            if (entry.Entity is IValidatableEntity)
            {
                try
                {
                    (entry.Entity as IValidatableEntity).Validate();
                }
                catch
                {
                    entry.State = System.Data.EntityState.Detached;

                    throw; // preserve the stack trace
                }
            }
        }
    }

    return base.SaveChanges();
} 
```

这意味着我将我的验证代码很好地隐藏在我的实体中，这将使我在单元测试期间模拟我的 POCO 时的生活变得更加轻松。**

# ruby-on-rails - 无法从 Rails 中的 url 访问查询字符串值

> ID：14255717
> 
> 赞同：1
> 
> 时间：2013-01-10T10:28:39.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, url

当我使用这个 URL 时：

```
http://localhost:3000/case/index?id=14 
```

我可以使用`params[:id]`

但是当 URL 是：

```
http://localhost:3000/case/index#tabs-1?id=14 
```

ID 值无法使用`params[:id]`

其原因在于`#tabs-1`。有没有其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:36:10.777

改用这个：

```
http://localhost:3000/case/index?id=14#tabs-1 
```

查询字符串应该紧跟在路径之后。

# python - django 覆盖模型表单或字段中的默认错误消息

> ID：14255723
> 
> 赞同：1
> 
> 时间：2013-01-10T10:29:04.487
> 
> 标签：python, django, django-models, django-forms

更改每个字段消息都是冗余的，所以我制作了新的包装器

```
class CharFieldWrapper(forms.CharField):     

    def __init__(self, *args, **kwargs):
        super(CharFieldWrapper, self).__init__(*args, **kwargs)  
        self.error_messages = {'required' : 'XXXX: YOU SHOULD PUT SOMETHING!' } 
```

是的，这不起作用。

有人知道如何制作字段或表单的包装类来更改error_messages吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:37:16.673

尝试将它们作为参数传递：

```
class CharFieldWrapper(forms.CharField):

   def init(self, *args, **kwargs):
       kwargs['error_messages'] = {'required' : 'XXXX: YOU SHOULD PUT SOMETHING!' }
       super(CharFieldWrapper, self).init(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T12:02:05.533

你的方法有问题`init`：

```
class CharFieldWrapper(forms.CharField):

    def __init__(self, *args, **kwargs):
        super(CharFieldWrapper, self).__init__(*args, **kwargs)
        self.error_messages['required'] = 'XXXX: YOU SHOULD PUT SOMETHING!' 
```

同样，在执行操作时，`self.error_messages = {'required': 'my error msg'}`您完全覆盖`error_messages`了这不好，因为还可能存在其他一些验证错误。你应该更新`self.error_messages`字典而不是像我一样覆盖它。

# c# - 从加入转换为对象

> ID：14255726
> 
> 赞同：2
> 
> 时间：2013-01-10T10:29:09.700
> 
> 标签：c#, .net, linq

我有加入，它返回一个三重对象的列表。我可以以某种方式转换到这些对象的列表吗？

```
var result = entities.Join(...).Join(...).Join(.. new {a=a, b=b, c=c}).ToList();
//how to cast like:
var multipleList = (List<{ObjectA, ObjectB, ObjectC}>)result; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:31:09.360

```
var multipleList = 
    result.SelectMany(x => new object[] { x.a, x.b, x.c })
          .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:35:17.720

你可以这样做，创建元组列表

```
 var data = (from e in entities
             ///code to join entities...
            select new Tuple<ClassA, ClassB, ClassC>
                (
                     e1,//enitry of ClassA
                     e2,//enitry of ClassB
                     e3//enitry of ClassC
                 )).ToList(); 
```

在此处阅读元组：[C#4.0 中的元组类型](http://pranayamr.blogspot.ca/2012/12/tuple-type-in-c40.html)

# php - 如何在自定义管理模块中添加自定义管理主题

> ID：14255729
> 
> 赞同：0
> 
> 时间：2013-01-10T10:29:16.953
> 
> 标签：php, magento, magento-1.7

我创建了新的管理模块。现在需要为这个新创建的自定义模块创建新的管理模板。这个模板应该与现有的布局、css和图像完全不同。我已经创建以覆盖现有的管理模块，但无法为新创建的自定义模块创建新的布局和设计。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:31:21.093

您必须将其添加到模块的 config.xml 作为 < config > 标记子项：

```
<stores>
  <admin>
    <design>
      <theme>
        <default>yourthemename</default>
      </theme>
    </design>
  </admin>
</stores> 
```

然后您可以使用 design/adminhtml/default/yourthemename/{layout, template} 文件夹作为您的管理主题。

我不确定 skin 文件夹，但上述配置可能还使您能够将 skin/adminhtml/default/yourthemename 文件夹用于您的 css 和图像文件。

# sql - 当源表中不存在相关行时更新

> ID：14255735
> 
> 赞同：0
> 
> 时间：2013-01-10T10:29:25.877
> 
> 标签：sql, sql-server, sql-server-2008-r2, merge-statement

我有这样的合并语句：

```
MERGE DESTINATION
USING SOURCE WHERE <Some_Conditions>
WHEN MATCHED AND <Some_Conditions> THEN DELETE
WHEN MATCHED UPDATE
WHEN NOT MATCHED INSERT 
```

这工作正常，但我还有一个条件，即当源中不存在它们的条目时，我必须更新目标中的行。

前任。

**来源**

```
Column1 Column2 Column3
-----------------------
A        A       A
B        B       B 
```

**目的地**

```
Column1 Column2 Column3
-----------------------------------
B        B       <Some_Calculation>
D        D       <Some_Calculation> 
```

现在，由于源中没有行`D`，我必须`Column 3`通过一些计算在目标中进行修改。但是由于合并只给出了三个选项`delete`，`update`以及`insert`行匹配与否。

如何在上述语句中实现此功能？

**编辑**

用我的评论编辑问题：

*在上面我给出的示例中，它正在运行，然后它正在更新`B`并插入`A`到目标表中。`D`但是即使源表中不存在我也想更新*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:16:27.717

也许阅读以下文档[`MERGE`](http://technet.microsoft.com/en-us/library/bb510625.aspx)：

```
MERGE 
[ TOP ( expression ) [ PERCENT ] ] 
[ INTO ] <target_table> [ WITH ( <merge_hint> ) ] [ [ AS ] table_alias ]
USING <table_source> 
ON <merge_search_condition>
[ WHEN MATCHED [ AND <clause_search_condition> ]
    THEN <merge_matched> ] [ ...n ]
[ WHEN NOT MATCHED [ BY TARGET ] [ AND <clause_search_condition> ]
    THEN <merge_not_matched> ]
[ WHEN NOT MATCHED BY SOURCE [ AND <clause_search_condition> ]
    THEN <merge_matched> ] [ ...n ]
... 
```

`WHEN NOT MATCHED BY SOURCE`是你需要的

# c++ - 获取 FILE * 句柄而不实际在磁盘上创建文件

> ID：14255737
> 
> 赞同：3
> 
> 时间：2013-01-10T10:29:34.407
> 
> 标签：c++, windows, file, winapi

我需要使用无法修改的旧库处理一些数据。我的问题是它需要一个普通的旧 FILE 句柄才能保存其结果，而且我根本不需要在磁盘上写任何东西。

我知道没有标准的方法可以做到这一点，但是是否有可能使用 Windows API、boost 或其他任何东西来获得一个指向内存的文件句柄？

我没有找到明确保证不（系统地）执行磁盘访问的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:56:24.077

我相信您可以`fopen`使用管道语法进行管道：

```
fopen("\\\\.\\pipe\\WritePipe", "w+"); 
```

您需要`CreateNamedPipe`事先使用 , 创建管道，但是一旦完成，您应该能够使用管道来处理数据。

您可能必须创建一个线程来从管道中读取，以确保您的应用程序不会挂起，但它应该可以满足您的需要（无法访问文件系统）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:03:58.090

尝试

```
fmemopen 
```

从[如何使用 FILE* 写入内存缓冲区？](https://stackoverflow.com/questions/539537/memory-buffer-as-file)

特伯特的回答：

> 对于偶然发现此线程并寻找正确答案的任何其他人：是的，有一种符合标准的方法可以将内存用作文件描述符：fmemopen 或 open_memstream，具体取决于您想要的语义。
> 
> [http://pubs.opengroup.org/onlinepubs/9699919799/functions/fmemopen.html](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fmemopen.html)
> 
> [http://pubs.opengroup.org/onlinepubs/9699919799/functions/open_memstream.html](http://pubs.opengroup.org/onlinepubs/9699919799/functions/open_memstream.html)

# android - android "achartengine" y轴数据差异

> ID：14255740
> 
> 赞同：2
> 
> 时间：2013-01-10T10:29:44.843
> 
> 标签：android, achartengine

我正在使用“achartengine”作为时间表，我想将 y 轴上的数据从 1、2、3 更改为 0.5、1.0、1.5 等谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:18:30.273

您可以设置自己的自定义标签。

```
renderer.addYTextLabel(1, "0.5"); 
```

要禁用默认标签，请执行以下操作：

```
renderer.setYLabels(0); 
```

# java - GAE + Spring + JDO - PersistenceManagerFactory 初始化错误

> ID：14255746
> 
> 赞同：0
> 
> 时间：2013-01-10T10:29:50.527
> 
> 标签：java, google-app-engine, log4j, jdo

我有一个标准的 PMF 类：

```
public class PMF {

    private static final PersistenceManagerFactory persistenceManagerFactory = JDOHelper
        .getPersistenceManagerFactory("transactions-optional");

    private PMF() {
    }

    public static PersistenceManagerFactory get() {
        return persistenceManagerFactory;
    }

} 
```

在本地 appengine 服务器上运行，当我第一次调用 PMF.get() 时，我得到以下异常：

```
javax.jdo.JDOFatalInternalException: Unexpected exception caught.
    at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1193)
    at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:808)
    at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:1093)
    at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:919)
    at com.myapp.framework.PMF.<clinit>(PMF.java:17)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at com.google.appengine.tools.development.agent.runtime.RuntimeHelper.checkRestricted(RuntimeHelper.java:70)
    at com.google.appengine.tools.development.agent.runtime.Runtime.checkRestricted(Runtime.java:64)
    ...
NestedThrowablesStackTrace:
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
    at javax.jdo.JDOHelper$16.run(JDOHelper.java:1965)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.jdo.JDOHelper.invoke(JDOHelper.java:1960)
    at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1166)
    ...
Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.apache.log4j.LogManager
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at com.google.appengine.tools.development.agent.runtime.RuntimeHelper.checkRestricted(RuntimeHelper.java:70)
    at com.google.appengine.tools.development.agent.runtime.Runtime.checkRestricted(Runtime.java:64)
    at org.apache.log4j.Logger.getLogger(Logger.java:104)
    at org.datanucleus.util.Log4JLogger.<init>(Log4JLogger.java:49)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.google.appengine.tools.development.agent.runtime.Runtime.newInstance_(Runtime.java:127)
    at com.google.appengine.tools.development.agent.runtime.Runtime.newInstance(Runtime.java:135)
    at org.datanucleus.util.NucleusLogger.getLoggerInstance(NucleusLogger.java:140)
    at org.datanucleus.util.NucleusLogger.<clinit>(NucleusLogger.java:106)
    at org.datanucleus.plugin.PluginRegistryFactory.newInstance(PluginRegistryFactory.java:104)
    at org.datanucleus.plugin.PluginRegistryFactory.newPluginRegistry(PluginRegistryFactory.java:63)
    at org.datanucleus.plugin.PluginManager.<init>(PluginManager.java:61)
    at org.datanucleus.plugin.PluginManager.createPluginManager(PluginManager.java:427)
    at org.datanucleus.NucleusContext.<init>(NucleusContext.java:224)
    at org.datanucleus.NucleusContext.<init>(NucleusContext.java:204)
    at org.datanucleus.NucleusContext.<init>(NucleusContext.java:182)
    at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.<init>(JDOPersistenceManagerFactory.java:409)
    at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.createPersistenceManagerFactory(JDOPersistenceManagerFactory.java:294)
    at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.getPersistenceManagerFactory(JDOPersistenceManagerFactory.java:195)
    ... 82 more 
```

我的日志记录设置非常标准： - WEB-INF 文件夹中的 logging.properties 并在 appengine-web.xml 中引用 - 我的 src 文件夹根目录下的 log4j.properties：

```
log4j.rootLogger=INFO, console

# Configure the console as our one appender
log4j.appender.console=org.apache.log4j.ConsoleAppender
log4j.appender.console.layout=org.apache.log4j.PatternLayout
log4j.appender.console.layout.ConversionPattern=%d{HH:mm:ss,SSS} %-5p [%c] - %m%n

# tighten logging on the DataNucleus Categories
log4j.category.DataNucleus.JDO=WARN, A1
log4j.category.DataNucleus.Persistence=WARN, A1
log4j.category.DataNucleus.Cache=WARN, A1
log4j.category.DataNucleus.MetaData=WARN, A1
log4j.category.DataNucleus.General=WARN, A1
log4j.category.DataNucleus.Utility=WARN, A1
log4j.category.DataNucleus.Transaction=WARN, A1
log4j.category.DataNucleus.Datastore=WARN, A1
log4j.category.DataNucleus.ClassLoading=WARN, A1
log4j.category.DataNucleus.Plugin=WARN, A1
log4j.category.DataNucleus.ValueGeneration=WARN, A1
log4j.category.DataNucleus.Enhancer=WARN, A1
log4j.category.DataNucleus.SchemaTool=WARN, A1 
```

我的 lib 文件夹中包含的库是： - 使用 eclipse google 插件包含的 sdk 中的所有 GAE lib - 使用 ivy 和 ivy eclipse 插件包含的 Spring MVC、Jackson 和 Aspectj：

```
<dependencies>
    <dependency org="org.springframework" name="spring-webmvc" rev="3.2.0.RELEASE" />
    <dependency org="org.codehaus.jackson" name="jackson-mapper-asl" rev="1.9.11" />
    <dependency org="org.aspectj" name="aspectjrt" rev="1.7.1" />
    <dependency org="org.aspectj" name="aspectjweaver" rev="1.7.1" />
</dependencies> 
```

我真的不明白为什么它会失败，因为 GAE 通常支持 log4j。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:06:06.180

我从 spring 依赖项中排除了 log4j，我不再收到错误。在我的常春藤文件中：

```
<dependency org="org.springframework" name="spring-webmvc" rev="3.2.0.RELEASE">
    <exclude org="log4j" module="log4j" />
</dependency> 
```

# c# - 在 C# 中运行批处理文件时如何避免警告

> ID：14255747
> 
> 赞同：0
> 
> 时间：2013-01-10T10:29:50.993
> 
> 标签：c#, process, batch-file, scheduler

在这段代码中，我正在创建批处理文件并通过 c# 运行该文件。运行批处理文件时，如果有任务名xxx，点击yes会显示“你确定要删除任务吗”，执行批处理文件中的剩余行。

是否可以自动给出“是”？如果可以，请给出您的想法。

```
 string schCmd = string.Format("SchTasks /Delete /TN xxx \n schtasks /create /tn xxx " +
                                                "/tr {0} /sd  {1} /st {2} /sc DAILY /mo {3} \n PAUSE"
                                                ,           Server.MapPath("SqlScripts/sqlbackup.bat"), startDate, objAutoBackup.StartTime, objAutoBackup.Occurences);                   

    sw.WriteLine(schCmd);
    sw.Close();

    System.Diagnostics.Process proc = new System.Diagnostics.Process();
    proc.StartInfo.WorkingDirectory = Server.MapPath("SqlScripts");

    proc.StartInfo.CreateNoWindow = true;                  

    proc.StartInfo.FileName = "scheduler.bat";
    proc.Start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:31:37.553

您可以使用`/f`开关`schtasks`来删除带有提示的任务。

> 如果指定的任务正在运行，则强制删除任务并抑制警告的值。

[http://msdn.microsoft.com/en-gb/library/windows/desktop/bb736357%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb736357%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:37:03.037

来自 [microsoft.com 上的 Schtasks](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/schtasks.mspx?mfr=true)

使用*Force*标志：

/f ：禁止确认消息。任务被删除，没有警告。

例子：

schtasks /删除 /tn * /f

# api - 如何阻止 Umbraco 显示语音气泡？

> ID：14255753
> 
> 赞同：0
> 
> 时间：2013-01-10T10:30:03.350
> 
> 标签：api, umbraco

作为参考，我在[Our Umbraco](http://our.umbraco.org/forum/developers/api-questions/37284-Displaying-our-speech-bubble-is-overidden-by-another-speech-bubble-in-AfterSave-event)论坛上问过同样的问题，但到目前为止没有收到任何回复。

我们在 Document->AfterSave 事件中运行了代码，该事件显示了一个气泡：

`((BasePage)HttpContext.Current.Handler).speechBubble(BasePage.speechBubbleIcon.error, "Error", "Problem");`

我们也尝试

`BasePage.Current.ClientTools.ShowSpeechBubble(BasePage.speechBubbleIcon.error, "Error", "Problem");`

以防我们调用错误的 API 函数来显示语音气泡。

我们在验证文档的属性并且该属性无效后执行此操作，以便通知用户出现问题。

问题是，即使执行了上述代码，在我们的 AfterSave 代码之后运行的 Umbraco 代码也会显示它自己的对话气泡，即显示“已完成”以指示文档已保存的对话气泡。这导致我们的对话气泡根本不会显示。

有人可以建议我们如何显示一个不会被 Umbraco 自己的语音气泡调用覆盖的语音气泡吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-28T03:00:10.157

您可以通过在页面生命周期的后期注入您的气泡来解决此问题，如下所示

```
var page = HttpContext.Current.Handler as Page;
if (page != null)
{
    page.PreRenderComplete += AddAlertBubble;
} 
```

而 AddAlertBubble 函数就是你已经拥有的：

```
void AddAlertBox(object sender, EventArgs e)
{
    umbraco.BasePages.BasePage.Current.ClientTools.ShowSpeechBubble(umbraco.BasePages.BasePage.speechBubbleIcon.error, "Error", "Problem");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T12:47:39.030

当您的检查失败时，您可以通过取消文档发布来停止对话气泡。

```
 void Document_BeforePublish(Document sender, umbraco.cms.businesslogic.PublishEventArgs e)
     {    
         if(!passed){
             e.Cancel = true;
             ((BasePage)HttpContext.Current.Handler).speechBubble(BasePage.speechBubbleIcon.error, "Error", "Problem");
         }
     } 
```

# css - 现代建筑布局方式

> ID：14255761
> 
> 赞同：0
> 
> 时间：2013-01-10T10:30:33.770
> 
> 标签：css, media-queries, flexbox

我将开始新的布局，并希望使用现代技术构建我的网站。建立新网站的最佳方式是什么？

这些是我一直在考虑使用的：

*   媒体查询+adobe 区域+Flexbox
*   媒体查询+CSS Grid（来自 Microsoft）+Flexbox
*   媒体查询+Flexbox

在开始我的项目之前，我想听听好的建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:56:05.753

鉴于您想使用 Flexbox，看起来[Flexie将是您的案例的不错选择。](http://flexiejs.com/)Flexie 提供传统支持。搏一搏。

# php - PHP PDO - PHP Parse 错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE

> ID：14255764
> 
> 赞同：0
> 
> 时间：2013-01-10T10:30:39.923
> 
> 标签：php, html, mysql, pdo

我用 PHP、HTML 和 SQL 编写脚本已经有一段时间了，我认为我的技能一般。我想通过 PDO 技能来加强我的 PHP，尤其是防止 SQL 注入。

我已经阅读并遵循了许多示例，但似乎总是被抛出

> PHP Parse 错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE" 错误

我对问题所在感到困惑。错误发生在应该执行的第 23 行。

我知道表单字段很好，因为这在没有 PDO 的情况下工作。自转换以来，我不断收到上述错误。[`$var1-$var6`为示例更改]。

```
 <?php if(isset($_POST['submit'])) {

 // connect to db include '/xxx/xxx/pdo-db-conn.php';

 // check db connection

 $subject = $_POST['subject'];
 $email = $_POST['email'];
 $name = $_POST['name'];
 $date = $_POST['date'];
 $var1 = $_POST['var1'];
 $var2 = $_POST['var2'];
 $var3 = $_POST['var3'];
 $var4 = $_POST['var4'];
 $var5 = $_POST['var5'];
 $var6 = $_POST['var6'];
 $sqli = "INSERT INTO mytable (subject,email,name,date,var1,var2,var3,var4,var5,var6) VALUES (:subject,:email,:name,:date,:var1,:var2,:var3,:var4,:var5,:var6)";
 $sql = $dbConn->prepare("$sqli");
 $sql->execute(array(':subject' => $subject, ':email' => $email, ':name' => $name, ':date' => $date, ':var1' => $var1, ':var2' => $var2, ':var3' => $var3, ':var4' => $var4, ':var5' => $var5, ':var6' => $var6)'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:37:57.793

你有一个`'`在数组的末尾。格式化您的代码将帮助您看到这种错误:)

```
 $sqli = "INSERT INTO mytable (subject,email,name,date,var1, var2, var3, var4, var5, var6) VALUES (:subject,:email,:name,:date,:var1,:var2,:var3,:var4,:var5,:var6)";

 $sql = $dbConn->prepare("$sqli");  
 $sql->execute(array(
    ':subject' => $subject, 
    ':email' => $email, 
    ':name' => $name, 
    ':date' => $date,
    ':var1' => $var1, 
    ':var2' => $var2, 
    ':var3' => $var3, 
    ':var4' => $var4, 
    ':var5' => $var5, 
    ':var6' => $var6
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:34:40.330

这是问题所在

```
INSERT INTO mytable >(subject,email,name,date,var1,
                    ^ 
```

删除这个`>`

并`'`在最后删除

```
$var6)');
      ^ 
```

# r - R中的管道awk

> ID：14255766
> 
> 赞同：0
> 
> 时间：2013-01-10T10:30:49.713
> 
> 标签：r, unix, awk

我正在尝试在 R 中读取[此固定宽度文件](http://dl.dropbox.com/u/1791181/rawk.txt)。我只想读取长度为 2、2 和 6 的前 3 列，以便第二个变量的值为“A”。请注意，第二个变量有两个空格，但实际上只有一个字符。我正在使用这个命令：

```
b = trim(read.csv(pipe("awk -v FIELDWIDTHS='2 2 6' -v OFS=',' '($2=='A '){ $1=$1 ''; print }'</path/rawk.txt"),header=F)) 
```

我收到此错误：

```
awk: cmd. line:1: ($2==A
awk: cmd. line:1:       ^ unexpected newline or end of string
Error in read.table(file = file, header = header, sep = sep, quote = quote,  : 
  no lines available in input 
```

如果我删除“A”中的空白：

```
b = trim(read.csv(pipe("awk -v FIELDWIDTHS='2 2 6' -v OFS=',' '($2=='A'){ $1=$1 ''; print }'</path/rawk.txt"),header=F)) 
```

我仍然收到此错误：

```
Error in read.table(file = file, header = header, sep = sep, quote = quote,  : 
  no lines available in input 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:14:48.543

这似乎有效：

```
read.csv(pipe("awk -v FIELDWIDTHS='2 2 6' -v OFS=',' '($2==\"A \"){ $1=$1 \'\'; print }'<rawk.txt"),header=FALSE)

  V1 V2    V3
1 10 A  10001
2 10 A  10002
3 10 A  10003 
```

但我不确定 $1=$1 是什么意思......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T14:26:22.773

对于这么简单的事情，您能不能更轻松地查看行的子字符串，而不是考虑其中的“真实”固定宽度字段？

```
b = trim(read.csv(pipe("awk 'substr($0,3,2)==\"A \"' /path/rawk.txt"),header=F)) 
```

# jquery - $.ajax 不会在 IE 上触发事件，只有在页面重新加载后才会成功

> ID：14255771
> 
> 赞同：0
> 
> 时间：2013-01-10T10:31:01.100
> 
> 标签：jquery, ajax, internet-explorer-9

这是我的代码：

```
...
$('#collection_menu ul li').click(function(e) {
  e.preventDefault();
  e.stopPropagation();

  shoesApparaissent();
});

...

function shoesApparaissent() {

  $.ajax({
    async:true,
    url : hrefCollection,
    type : 'GET',
    dataType : 'json'
  }).success(function(data) {

console.log("data: " + data);

  }).fail(function(e, str) {

console.log(e+'\n'+str);

});
... 
```

在我重新加载包含代码的页面之前，此代码似乎适用于 FF、Safari、Opera 和所有其他导航器（Windows 7 上的 IE 除外）。

当我触发点击事件时，会调用函数“shoesApparaissent()”，并且 $.ajax 不会触发成功或失败事件（控制台中不会出现任何内容）。

我不确定这里的问题是什么，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:01:52.267

您使用的是什么版本的 jQuery？对于这个答案，我假设您将使用更新的版本，如 1.8。在 jQuery 1.5+ 中，[$.ajax()](http://api.jquery.com/jQuery.ajax/)方法返回一个实现`Promise`接口的对象。

而不是使用`.success()`回调（在 jQuery 1.8 中已弃用），`.done()`而是使用。

```
$.ajax({
    url: hrefCollection,
    type: 'GET',
    dataType : 'json'
}).done(function(data) {
    console.log("data: " + data);
}).fail(function(e, str) {
    console.log(e+'\n'+str);
}); 
```

# iphone - iphone sdk中的Facebook签入功能？

> ID：14255774
> 
> 赞同：0
> 
> 时间：2013-01-10T10:31:11.117
> 
> 标签：iphone, ios, objective-c, xcode, facebook

我正在我的应用程序中实现签入功能。

我得到了参考网址

[http://tylerwhitedesign.com/how-to-check-in-using-the-facebook-ios-sdk-and-graph-api](http://tylerwhitedesign.com/how-to-check-in-using-the-facebook-ios-sdk-and-graph-api)

按照登录方法：

```
- (void) login {

permissions = [[NSArray arrayWithObjects: @"user_checkins", @"friends_checkins", @"publish_checkins", nil] retain];

[ facebook authorize:appID permissions:permissions delegate:self];
} 
```

**但在我的 facebook sdk 中：没有支持“[facebook authorize:appID permissions:permissions delegate:self];”的方法**

帮我下载最新的 Facebook SDK 或为 iphone 中的签入功能提供示例代码？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:39:01.330

使用 登录用户`FacebookSDK`需要的不仅仅是代码块。我对您正在使用的特定构建不是很熟悉。但是离开[Facebook 开发者文档](https://developers.facebook.com/ios/)，登录用户大致如下所示：

```
- (void)createAndPresentLoginView
{
    if (self.loginViewController == nil) {
        self.loginViewController = [[LoginViewController alloc] initWithNibName:@"LoginViewController"
                                                                           bundle:nil];
        self.navController = [[UINavigationController alloc] initWithRootViewController:self.loginViewController];
        self.window.rootViewController = self.navController;
    }
}

- (void)showLoginView
{
    if (self.loginViewController == nil) {
        [self createAndPresentLoginView];
    } else {
        [self.loginViewController loginFailed];
    }
}

- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState)state
                      error:(NSError *)error
{
    // FBSample logic
    // Any time the session is closed, we want to display the login controller (the user
    // cannot use the application unless they are logged in to Facebook). When the session
    // is opened successfully, hide the login controller and show the main UI.
    switch (state) {
        case FBSessionStateOpen: {
            // For gaining current location
            // [self.mainViewController startLocationManager];
            if (self.loginViewController != nil) {
                [self initializeTabBarController];
                [self.navController pushViewController:self.tabBarController animated:NO];
                self.loginViewController = nil;
            }

            // FBSample logic
            // Pre-fetch and cache the friends for the friend picker as soon as possible to improve
            // responsiveness when the user tags their friends.
            FBCacheDescriptor *cacheDescriptor = [FBFriendPickerViewController cacheDescriptor];
            [cacheDescriptor prefetchAndCacheForSession:session];
        }
            break;
        case FBSessionStateClosed: {
            // FBSample logic
            // Once the user has logged out, we want them to be looking at the root view.
            UIViewController *topViewController = [self.navController topViewController];
            UIViewController *modalViewController = [topViewController presentedViewController];
            if (modalViewController != nil) {
                [topViewController dismissViewControllerAnimated:NO completion:nil];
            }
            [self.navController popToRootViewControllerAnimated:NO];

            [FBSession.activeSession closeAndClearTokenInformation];

            [self performSelector:@selector(showLoginView)
                       withObject:nil
                       afterDelay:0.5f];
        }
            break;
        case FBSessionStateClosedLoginFailed: {
            // if the token goes invalid we want to switch right back to
            // the login view, however we do it with a slight delay in order to
            // account for a race between this and the login view dissappearing
            // a moment before
            [self performSelector:@selector(showLoginView)
                       withObject:nil
                       afterDelay:0.5f];
        }
            break;
        default:
            break;
    }

    [[NSNotificationCenter defaultCenter] postNotificationName:SCSessionStateChangedNotification
                                                        object:session];

    if (error) {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:[NSString stringWithFormat:@"Error: %@",
                                                                     [ShindyAppDelegate FBErrorCodeDescription:error.code]]
                                                            message:error.localizedDescription
                                                           delegate:nil
                                                  cancelButtonTitle:@"OK"
                                                  otherButtonTitles:nil];
        [alertView show];
    }
}

- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI
{
    return [FBSession openActiveSessionWithReadPermissions:nil
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                             [self sessionStateChanged:session state:state error:error];
                                         }];
} 
```

但是，您仍然需要从 Facebook 开发者的网站获取[FacebookSDK](https://github.com/downloads/facebook/facebook-ios-sdk/FacebookSDK-3.1.1.pkg)。此外，您需要获得一个`SCSessionStateChangedNotification`特定于您的应用程序的密钥。

祝你好运！！

# haskell - Monadic 杂质和 Haskell 的纯度。它们是如何结合的？

> ID：14255775
> 
> 赞同：7
> 
> 时间：2013-01-10T10:31:11.770
> 
> 标签：haskell, functional-programming, monads

monad 构造如何帮助保持纯度（在 Haskell 中）同时做不纯净的事情？例如，当`print "Hello"`您执行纯代码或不纯代码时？这是一个非常微妙的细节，但有助于更好地理解函数式语言中纯度和杂质的概念。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-10T10:41:15.837

表达方式

```
print "Hello" 
```

确实是纯洁的。因为它不打印任何东西，而是构造一些在执行时打印“Hello”的东西。

这是一个类比：

一位僧人在一张纸上写道：

```
Go to a bordell and do filthy things with the prostitutes there. 
```

我们可以因为僧侣通奸而指责他，仅仅因为他写了一个从事通奸的指示吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T10:47:30.493

stackoverflow 中的问题可能会回答您的问题：[IO Monad 在什么意义上是纯的？](https://stackoverflow.com/questions/4063778/in-what-sense-is-the-io-monad-pure)

简而言之，monad 本身是**纯**的，但它可以发出**不纯**的指令。更具体地说，monad 可以被视为一系列可组合的计算描述。其中一些计算可能是脏的（即有副作用），但描述本身是完全纯净的。

# symfony - 在 Symfony2 项目中渲染静态内容

> ID：14255777
> 
> 赞同：1
> 
> 时间：2013-01-10T10:31:17.823
> 
> 标签：symfony

我想在 Symfony2 项目中包含静态内容。我已经自动生成了一些我想要呈现的文档 HTML 文件。它们是完整的 HTML 文件，它们之间有链接。

因此，我会有类似的东西：

*   `mysite.com`：由 Symfony2 管理的路由，使用它的 MVC 引擎。
*   `mysite.com/docs/`, `mysite.com/docs/.../.../`, etc : 只返回那些 HTML 静态文件的内容。

我想我需要创建一个处理这些静态文件的包，存储在其中`Resources/public`，但我不知道实现这一点的最佳方法是什么。此外，路由应该能够识别`mysite.com/docs/`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:44:31.297

您可以在目录`docs`中创建`web`目录。

如果您查看`.htaccess`位于`web`目录中的重写规则，您将看到：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule> 
```

这意味着“如果文件不存在，请使用带有重写规则的 app.php（因此是 Symfony2）文件”。

因此，如果您`docs/test.html`在 web 目录中创建文件（例如 ），您将能够直接访问它`from mysite.com/docs/test.html`

**编辑**：想想`css`和`js`文件的例子。当您包含它们时，它们不会由路由器处理

# image - 在 swf as3 中加载图像

> ID：14255779
> 
> 赞同：0
> 
> 时间：2013-01-10T10:31:21.007
> 
> 标签：image, actionscript-3, flash

因为我有 24 个电影剪辑，我需要在每一个中加载不同的图片。所以我的问题是，有没有一种非常简单的方法可以用 as3 做到这一点？我需要调用不同来源的图片吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:40:07.353

这就是我会使用的：

```
var imagesCollection:Array = new Array("image1.jpg","image2.jpg","image3.jpg");
for(var i:int=0; i<imagesCollection.length; i++){
    var request:URLRequest = new URLRequest(imagesCollection[i]);
    var loader:Loader = new Loader();
    loader.load(request);
    addChild(loader);
}; 
```

确保在代码顶部导入 URLRequest 和 Loader。

# html - 使图像不可复制

> ID：14255781
> 
> 赞同：3
> 
> 时间：2013-01-10T10:31:28.457
> 
> 标签：html, css, image, browser

我正在 ASP.Net 上开发一个电子商务网站，其中有很多产品图片。现在我想要的是我不希望人们右键单击我的图片并将其复制或保存在他们的系统上。我知道用户是否确定他可以复制我的图像，例如截屏或其他类似的东西，但我不在乎。对我来说，我只是不希望人们来拍摄我的照片，因为它很容易现在。有什么好的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T10:37:33.583

您可以阻止用户右键单击您的图像。但如果他们真的想要，用户仍然可以制作副本。我认为最好的解决方案是水印。

`onContextMenu="return false;"`您可以通过添加到您的图像代码来防止用户右键单击图像。

有关详细信息，请参阅[http://www.pagetutor.com/no_right_click/index.html 。](http://www.pagetutor.com/no_right_click/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T11:01:44.237

如果您真的确定要获得此结果并且不想使用水印，您可以

使用 div 并将其背景图像设置为预期图像。

这不会在右键单击时为查看者提供“将图像另存为”选项。但是，他们仍然可以解决问题。

我个人不推荐使用这种方法，因为它真的很浪费时间，并且在将来进行更改时可能会出现问题。但是，如果您真的需要这样做并且不能采用带水印的图像（我宁愿推荐），您可以采用这种解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:36:42.370

用户屏幕上显示的图像 - 至少 - 被下载并存储在客户端的临时文件夹中，因此无法避免人们保存它。您至少可以为您的图像添加水印（但是有很多解决方案可以取消水印，除了大多数时间在您的页面上令人不快之外），您可以做的最好的事情就是让您的图像在外面无用或无关紧要你的网站...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-19T10:38:40.660

制作透明 div 并将其覆盖在图像元素的顶部以防止它

# jquery - jQuery tableDnD 绑定拖放到 ajax 返回的行

> ID：14255783
> 
> 赞同：0
> 
> 时间：2013-01-10T10:31:32.410
> 
> 标签：jquery, sorting, jquery-plugins

我有一个表，在添加新记录后替换所有行 - 所有这些都使用 ajax 调用发生，因此无需重新加载。

一旦在容器中替换了记录，tableDnD 似乎不再适用于新记录 - 我必须重新加载页面才能再次触发。

我尝试通过以下方式使用 livequery() 插件，但似乎无法解决问题（obj 是包含所有行的 tbody 对象）：

```
sortRows : function(obj) {
    "use strict";
    obj.livequery(function() {
        $.each($(this), function() {
            var thisTbody = $(this);
            var thisUrl = thisTbody.attr('data-url');
            thisTbody.tableDnD({
                onDragClass: "trActive",
                onDrop: function(thisTable, thisRow) {
                    var thisArray = [];
                    var thisRows = thisTbody.find('tr');
                    $(thisRows).each(function() {
                        thisArray.push($(this).attr('id').split('-')[1]);
                    });
                    $(thisRows).promise().done(function() {
                        $.post(thisUrl, { items : thisArray }, 'json');
                    });
                }
            });
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:44:57.030

好的 - 发现了问题。我将 livequery 应用于“tbody”元素，它实际上并没有改变——它是改变的内容，所以一旦我将调用对象更改为那个“tbody”的“tr”——现在一切正常。这是我的代码现在的样子：

```
sortRows : function(obj) {
    "use strict";
    obj.find('tr').livequery(function() {
        var thisObj = $(this).parent('tbody');
        $.each(thisObj, function() {
            var thisTbody = $(this);
            var thisUrl = thisTbody.attr('data-url');           
            thisTbody.tableDnD({
                onDragClass: "trActive",
                onDrop: function() {
                    var thisArray = [];
                    var thisRows = thisTbody.find('tr');
                    $(thisRows).each(function() {
                        thisArray.push($(this).attr('id').split('-')[1]);
                    });
                    $(thisRows).promise().done(function() {
                        $.post(thisUrl, { items : thisArray }, 'json');
                    });
                }
            });
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-30T18:32:51.763

每次在表上放置新寄存器时，您都可以更新表，如下所示：

```
$("#your_table_id").tableDnDUpdate(); 
```

# wif - 基于声明的身份验证 - SharePoint 和一般

> ID：14255787
> 
> 赞同：10
> 
> 时间：2013-01-10T10:31:42.263
> 
> 标签：wif, claims-based-identity, acs, adfs2.0, claims

全部，

我一直在围绕基于声明的身份验证进行大量阅读，但仍然有些困惑。我试图巩固我的理解，特别是与 SharePoint 2010/2013 相关，但也普遍（即 ASP.NET）。

我对各种技术术语的理解如下：

*   WIF (Windows Identity Foundation) - 一个 .NET 库（API 集），用于使用身份声明和构建自定义 STS 等。

*   信赖方 - 声明的“消费者”（即 SharePoint、ASP.NET 网站等）。声明通过 STS（仅 IP-STS？）提供。

*   STS（安全令牌服务）- 一种发布安全令牌的专用 Web 服务。有两种口味，有些 STS 可能同时是两种口味？

    *   RP-STS（依赖方安全令牌服务）
    *   IP-STS（身份提供商安全令牌服务）
*   受信任的身份提供者（SharePoint 术语）-AKA。IP-STS。

*   SharePoint 2010/2013 STS - 使用 WIF 开发的 SharePoint 服务应用程序，仅充当 RP-STS。充当许多用户可配置的可信身份提供者 (IP-STS) 的可插入聚合点。如果需要，这些可以使用 WIF 手工构建。

*   ADFS 2.0 - 一个 Windows 角色，专门设计用于仅针对 Active Directory 实例联合组织。公开使用 WIF 构建的 IP-STS 端点。我对 ADFS 2.0 的理解是它不允许您“聚合”其他身份提供程序 - 它只允许您针对可能不是本地的特定 AD 实例进行身份验证，因此需要联合以支持 SSO .

*   Windows Azure ACS 2.0 - 一种专门用于联合任何已配置的第三方身份提供程序（即 Microsoft 帐户、Google、Facebook、ADFS 2.0）的服务。作为其他身份提供者的可插入聚合点，它的行为有点像依赖方。公开使用 WIF 构建的 IP-STS 端点。它聚合的身份提供者不一定是 IP-STS，但 ACS 2.0 使用其内置的 IP-STS 通过声明公开所有内容。

SharePoint 2010/2013 问题：

我的主要问题是，我看到了一些关于 ADFS 2.0 和 SharePoint 的文章，这些文章几乎读起来就好像您正在用 ADFS 2.0*替换*内置的 SharePoint 2010/2013 STS！希望这只是我的阅读，但它混淆了我的理解。

1.  你真的可以这样做吗？如果你真的想要，我看不出你为什么不能这样做，但我认为你需要禁用 SharePoint STS 并进行大量手动配置？
2.  你为什么想做这个？

2.1。SharePoint STS 已经支持 AD 身份验证作为 OOTB 受信任的身份提供程序选项，如果您想改用 ADFS 2.0，您可以将其添加为受信任的身份提供程序 (IP-STS)，我已经看过博客文章。

2.2\. 根据我对 ADFS 2.0 的描述，将其更改为 SharePoint STS 实际上会给您一个不太灵活的解决方案吗？

声明：

*   您可以将 SharePoint STS 配置为使用 ADFS 2.0 a 可信身份提供程序 (IP-STS) 以及本地 AD，或者代替本地 AD。
*   您可以将 SharePoint STS 配置为使用 Windows Azure ACS 2.0 a 可信身份提供程序 (IP-STS)。这将使支持第三方身份验证提供程序变得非常容易，而无需使用 WIF 开发您自己的 IP-STS。

ASP.NET WIF 问题：

1.  我的理解是，为了执行信任协商和声明交换，RP-STS 必须与 IP-STS 对话。它是否正确？
2.  因此，在使用 WIF 构建基于声明的 ASP.NET Web 应用程序（依赖方）的上下文中，您是否会因此开发/重用并将 RP-STS 包含到应用程序中，并将其配置为与 IP 建立信任关系- STS？如果不能，您可以使用 WIF 直接从 IP-STS 获取身份吗？

只是写这篇文章就帮助我摆脱了这个想法，但是任何关于不准确/过于简单化/完全不真实的帮助将不胜感激！

问候，

迈克尔·泰勒

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T18:27:14.507

SP STS 是一个 RP-STS，即它没有用于认证的凭证存储。这就是为什么您必须将它与作为 IP-STS 的 ADFS 联合起来，即它针对其域中的 AD 进行身份验证。

ADFS 可以是 RP-STS 或 IP-STS，例如您可以拥有路径 - SP 应用程序。-> SP STS -> ADFS (RP) -> ADFS (IP) -> AD。

您与 SP 联合的 IP-STS 不必是 ADFS - 它可以是任何支持 WS-Federation 协议的东西，例如 OpenAM、PingIdentity、Azure ACS。要点是在链的末端必须有一个凭证存储来进行身份验证。

此凭证存储不必是 AD，例如 ADFS -> IdentityServer -> SQL Server。

ADFS 可以与许多不同的 IP-STS 联合。用户可以选择使用哪一个进行身份验证。

ADFS 支持将 SAML2 和 WS-Fed 作为联合协议。SP RP-STS 仅支持 WS-Fed。

ADFS 的先前版本（即 1.0）是安装在 Windows Server 2008 上的版本。您必须下载 ADFS 2.0。不幸的是，有许多博客文章使用 ADFS 一词，但指的是 ADFS 1.0。当心 - ADFS 1.0 是完全不同的野兽。

WIF 只是一组 .NET 类。它不是 STS。您可以转到 WIF -> IP-STS 或 WIF -> RP-STS -> IP-STS 等。

希望这回答了你的一些问题，但如果还有什么不清楚的话，那就开枪吧。

**更新：**

我所知道的唯一包含 WIF 的 STS 是 ADFS 和 IdentityServer。上面提到的大多数都是基于Java的。

选择 ADFS 而不是 IWA 的原因是两者都针对 AD 进行身份验证，但只有 ADFS 添加了 SSO 和联合功能。ADFS 还提供所有基于声明的管道 - SAML 令牌等。

联合 ADFS 时，您可以针对多个凭据存储进行身份验证。但是，如果您选择针对 ADFS 实例进行身份验证，它会使用 AD 存储库。当您安装 ADFS 时，它会在其域中找到 AD 实例。那就是它使用的那个。

# solr - 使用 wordpress 作为搜索 Web 应用程序的管理界面

> ID：14255793
> 
> 赞同：0
> 
> 时间：2013-01-10T10:31:58.887
> 
> 标签：solr, wordpress, backend

我正在研究有关搜索 Web 应用程序的开发。

主要目的是允许用户在大量实体（假设它们是产品）中进行搜索，这些实体指的是外部网站。

此外，还会有文章按类别分组，大部分与搜索功能和搜索结果分开。

我可能会使用 Apache Solr 作为搜索后端。

我现在的问题是，我应该完全自己编写管理界面/后端，还是应该使用一些 CMS 来重用已经存在的管理界面和底层基础设施？

编辑/管理员的主要任务是

*   创建/编辑/存档文章
*   创建/编辑可搜索的产品条目（需要被 Solr 索引）

从 WP Admin 界面中创建和管理与 Wordpress 无关的数据库实体是否（相对）容易？这是否意味着我需要创建自己的插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:14:33.363

您可以使用最近的 WordPress 创建自定义分类法，所以是的，您可以创建非文章内容并决定它是如何公开的。

您确实需要弄清楚如何让 Solr 搜索您的 WordPress 内容，可能是诸如[Solr for WordPress](http://wordpress.org/extend/plugins/solr-for-wordpress/)或[Advanced search](http://wordpress.org/extend/plugins/advanced-search-by-my-solr-server/)之类的插件（我自己也没有测试过）。但是您需要确保该插件可以与自定义分类一起使用（不确定第一个是否可以）。

或者，如果您不使用 WordPress，您可以查看将 Solr 作为其功能之一的系统，例如[Drupal](http://drupal.org/project/apachesolr)或[OpenCMS](http://www.opencms.org/en/news/120924-opencms-v85.html)。

# objective-c - 如何在 cocos2d 单击鼠标光标的位置设置精灵的锚点

> ID：14255794
> 
> 赞同：0
> 
> 时间：2013-01-10T10:31:59.383
> 
> 标签：objective-c, xcode, cocos2d-iphone, sprite

我正在尝试用鼠标拖动我的精灵（使用 Cocos2d-iphone，但在 OSX 系统上，而不是在 iOS 上），一切正常，但是当我点击精灵并拖动它时，精灵会转到我的鼠标光标的中心，我需要要将锚点更改为鼠标位置，我该怎么做？有没有简单的方法可以用坐标来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:41:55.280

您确定要更改锚点吗？我不认为在这种情况下这是一个好的解决方案。您可以简单地以`ccTouchMoved:withEvent:`方法更改触摸位置并将此位置更改应用于您的精灵。

我的意思是，如果您的触摸移动了 (5.f, 3.f) 点，只需将此值添加到精灵的先前位置即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:35:23.937

不要更改锚点，它只会带来麻烦。更改 anchorPoint 主要用于对齐和其他一些边缘情况。在所有其他情况下使用位置。

在您的情况下，如果要定位精灵，使其左下角与光标的位置匹配，只需从该位置减去一半的精灵 contentSize 宽度和高度。

# python - 从 CSV 为 Google 地图创建 KML 文件

> ID：14255796
> 
> 赞同：3
> 
> 时间：2013-01-10T10:32:06.387
> 
> 标签：python, google-maps, csv, kml

我一直在研究一个问题……我是 KML 新手，我想创建一个包含以下信息的文件：

```
Email
address
postcode
country
telephone
fax
internet
name
image
license
Call number
lat
lng 
```

保存 csv 文件。如果有工具我会很高兴。否则，如果我知道语法，我会手动编写它。

我使用的是 Mac，因此 Windows KML 创建者不会受到质疑......我尝试了很多工具，但没有一个是我想要的。

我找到的最好的工具是，`http://batchgeo.com/de/`但没有 KML 文件了。

[编辑]

有没有在 python 脚本中解决这个问题的好方法？我已经有一个.csv！

最好的问候柯蒂斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T19:56:56.927

要读取 .csv 文件，您可以像这样使用[csv](http://docs.python.org/2/library/csv.html)模块：

```
reader = csv.reader(open("file.csv"))
for row in reader:
  for value in row:
    ... 
```

当您的文件是 UTF-8 编码时，您可能会遇到麻烦，因为`csv`不支持。但是有一个[包装器](https://github.com/jdunck/python-unicodecsv)可以解决这个问题。

当然，您也可以简单地逐行读取文件并用逗号分隔：`values=line.split(',')`.

由于[kml](https://developers.google.com/kml/documentation/kml_tut)格式不是很复杂，因此创建数据表示最困难的部分是决定它应该是什么样子。插入从 csv 文件读取的值的一段非常简单的代码如下所示：

```
# read field labels from first line in file
header = reader.next()
# prepare static output
templates = [('  <Placemark>\n   <name>{}</name>\n', 'name'),
         ('   <description>\n    <![CDATA[\n     <img src="{}"/>\n', 'image'),
         ('     {}\n', 'address'),
         ('     {}\n', 'postcode'),
         ('     {}\n', 'country'),
         ('     Tel: <span class="tel">{}</span>\n', 'telephone'),
         ('     Mail: <span class="mail">{}</span>\n', 'Email'),
         ('   </description>\n   <Point>\n    <coordinates>{},', 'lat'),
         ('{}</coordinates>\n   </Point>\n  </Placemark>\n', 'lng')]
# lookup function for field values. leading and trailing whitespace will be removed
value = lambda field, array: array[header.index(field)].lstrip().rstrip()

# start output
print '''<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
 <Document>'''
# insert values into xml
for row in reader:
    for t, f in templates:
        print t.format(value(f, row)),

print ' </Document>\n</kml>' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-18T02:36:41.877

如果您已经导入了 csv 数据，请使用[simplekml 。](http://code.google.com/p/simplekml/)

从它的介绍页面：

```
import simplekml
kml = simplekml.Kml()
kml.newpoint(name="Kirstenbosch", coords=[(18.432314,-33.988862)])
kml.save("botanicalgarden.kml") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T22:52:48.137

我相信 BatchGEO 支持谷歌地球标签上的 KML：http: [//batchgeo.com/features/google-earth-kml/](http://batchgeo.com/features/google-earth-kml/)

如果您希望在对 CSV 进行更新时即时运行或重新创建，我建议您执行以下操作：

1.  选择任何已建立 KML 解析/生成库的语言（ruby、java、C# [我真的很喜欢 SharpKML for .Net]、PHP 等）。
2.  使用该库创建您的 KML 对象，然后迭代您的 CSV 文件，使用地标（或其他）填充您的 KML 文档对象
3.  根据需要导出您的 KML

评论中发布的脚本当然也可以，但我会使用现有的 KML 库。

# perl - Livejournal XML-RPC 协议不匹配

> ID：14255800
> 
> 赞同：2
> 
> 时间：2013-01-10T10:32:12.517
> 
> 标签：perl, xml-rpc

我有以下 Perl 脚本：

```
use strict;
use XML::RPC;
use Digest::MD5 qw(md5_hex);
use 5.010;

my ($username, $password)  = qw(foo bar);
my $xmlrpc = XML::RPC->new('http://www.livejournal.com/interface/xmlrpc', (output_encoding => 'UTF-8' ));
my $result = $xmlrpc->call( 'LJ.XMLRPC.getevents', { username => $username, hpassword => md5_hex($password), selecttype => "syncitems"} ); 
```

但是，服务器响应 207 错误：*客户端错误：协议版本不匹配：无法使用非 Unicode 客户端显示/编辑 Unicode 帖子。请参阅[http://www.livejournal.com/support/encodings.bml](http://www.livejournal.com/support/encodings.bml)了解更多信息。*

根据 API 规范，LJ 应该使用 UTF-8。所以我不明白我在做什么错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T13:46:01.270

好的，我解决了。问题是我没有指定默认为*0的**可选*参数（这就是为什么我没有首先注意到它），并且在数据包含非 ASCII 符号的情况下应该分配为*1 。*

# sockets - 在本地网络中传输二进制数据的协议

> ID：14255802
> 
> 赞同：0
> 
> 时间：2013-01-10T10:32:14.713
> 
> 标签：sockets, windows-7, directshow, rpc, data-transfer

我在本地网络中有两台计算机通过以太网连接。计算机运行 Windows 7。

视频输入设备（监控物理实验）连接到计算机 A。我使用 DirectShow 处理此输入。处理后的图像（添加注释、调整调色板、去隔行扫描等）应传输到第二台计算机 B，该计算机 B 运行硬盘记录器（由[Geutebrück 提供](http://www.geutebrueck.com/)）。在计算机 BI 上，可以访问硬盘记录器 API 以移交来自计算机 A 的数据。

到目前为止，我已经阅读了 RPC 作为一种可能的数据传输方式。我可能不得不编写一个 DirectShow 接收器过滤器，它为计算机 A 实现一个 RPC 客户端，为计算机 B 实现一些代码，实现一个 RPC 服务器。然而，在阅读这个主题时，我遇到了 MOTM、Corba 和更多的首字母缩略词，这表明问题并非微不足道。

我想知道上述方法是否合理或是否存在任何重大缺陷。也许有一个重要的约束，我忽略了？如果有更合理的方法，它会是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:00:47.973

出于存储目的，您似乎不需要计算机 B 上的 DirectShow。将数据从 DirectShow 管道中取出（通过接收器过滤器、自定义渲染器、Sample Grabber）并通过常规网络（套接字、管道等）传输到计算机 B。

由于它不必兼容任何东西，因此您可以设计一个简单的协议并通过主机之间的 TCP 连接发送数据。通过连接的媒体示例属性和有效负载。

# python - 如何在sql执行期间处理行不可用

> ID：14255803
> 
> 赞同：0
> 
> 时间：2013-01-10T10:32:19.623
> 
> 标签：python, mysql-python

当此 id 没有行时，您应该如何处理异常。调用代码应该如何处理这个

```
 def function(id)
    mysql_conn = MySQLdb.connect(..)    
    cursor = mysql_conn.cursor()
    cursor.execute("""select val from fooo where id = %s""", (id))
    row = cursor.fetchone()
    return row[0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:43:03.307

每当我发现自己只获取一行时，我总是喜欢使用以下（虽然不是最好的性能）构造。

```
cursor.execute("SELECT * FROM foo;")
for row in cursor:
    return row
# No row handling behind the loop.
return "No rows found" 
```

当循环的第一次迭代运行时，这有效地返回。只有在结果集中至少有`1`行时才会发生这种情况。否则将运行循环**后面**的代码。`for`

您可以引发自定义异常，或返回一个特殊值，例如`None`让调用函数清楚地知道没有行。

# android - 如何保护android apk文件不被提取

> ID：14255806
> 
> 赞同：0
> 
> 时间：2013-01-10T10:32:37.717
> 
> 标签：android, security, cordova, key

我有一个使用 phonegap 创建的应用程序的 .apk 文件。我想知道如何防止任何获得我的 apk 的人看到我的代码，以便人们可以使用它但看不到代码。由于客户的特定要求，它不通过网站或 Playstore 等分发。但由于该应用程序位于 phonegap 中，99% 的代码是 html 和 js，我只需打开 apk 文件就可以看到。

**有没有什么方法可以让我阻止代码查看，即使我分发我的 apk，例如通过 pendrive ？**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:43:25.763

> 如何保护android apk文件不被提取

AFAIK 完全不可能阻止它被查看。

> 您基本上无法保护您的应用程序不被修改。您在那里放置的任何保护都可以被禁用/删除。

基本上没有任何技巧可以完全避免您的问题。但是您仍然可以使用 Proguard 并使您的代码更加混乱。

如果您可以选择包含**共享库**，那么您也可以使用和集成它以使其更难进行逆向工程。

您可以在[此处](https://stackoverflow.com/questions/13854425/how-to-avoid-reverse-engineering-of-apk-file/13854693#13854693)查看更多防止 APK 文件的方法

希望它会有所帮助。

# sql - 更改表列语法错误

> ID：14255809
> 
> 赞同：0
> 
> 时间：2013-01-10T10:32:51.420
> 
> 标签：sql, sql-server, database, alter-table

我需要创建一个包含动态列的表，所以我创建了一个游标，它遍历表的记录并将创建必要的列，但是，这给了我这个错误：

'INT' 附近的语法不正确。

示例代码：

```
SELECT @sql = 'ALTER TABLE #temp3 ADD ' + @nome + ' INT'
EXEC (@sql); 
```

我也试过这个：

```
EXEC ('ALTER TABLE #temp3 ADD ' + @nome + ' INT') 
```

但仍然是同样的错误

有什么建议么？

**编辑：** 可以接收@nome的值示例

*   很坏
*   坏的
*   好的
*   很好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:52:39.403

您已指出`@nome`可能包含，例如，非常糟糕。如果是这样，它包含一个空格 - 您需要分隔名称，以便 SQL Server 知道空格是名称的一部分：

```
SELECT @sql = 'ALTER TABLE #temp3 ADD [' + @nome + '] INT'
EXEC (@sql); 
```

或更准确地说，使用[`QUOTENAME`](http://msdn.microsoft.com/en-us/library/ms176114.aspx)

```
SELECT @sql = 'ALTER TABLE #temp3 ADD ' + QUOTENAME(@nome) + ' INT'
EXEC (@sql); 
```

否则，SQL Server 会尝试添加`Very`数据类型为的列`Bad`，并且它甚至不知道之后如何解释`int`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:52:56.453

感谢@Damien 鼓励我进行调查：

```
if object_id(N'#tempg') is not null
    drop table #tempg

select 1 as i into #tempg

select * from #tempg

alter table #tempg add j int

exec sp_executesql N'alter table #tempg add k int'

select * from #tempg 
```

注意

```
exec 'alter table #tempg add l int' 
```

失败了

```
Msg 102, Niveau 15, État 1, Ligne 1
Syntaxe incorrecte vers 'alter table #tempg add l int'. 
```

===============================================版

```
exec ('alter table #tempg add l int') 
```

运行

# java - java休眠标准

> ID：14255813
> 
> 赞同：0
> 
> 时间：2013-01-10T10:32:59.977
> 
> 标签：java, hibernate, criteria

我的数据库中有以下表结构：

```
 Table A:                     Table B:                       Table C:
 _______________________      ______________________________  ______________________
 | Field | Type | Key  |     | Field | Type | Key          |  | Field | Type | Key  |   
 ______________________|     |_____________________________|  |_____________________|
 | a_id  | Int  | PRI  |     | a_id  | Int  | FK of A(a_id)|  | c_id  | Int  | PRI  |
 |     ...       ...   |     | c_id  | Int  | FK of C(c_id)|  |       ...           |
 |_____________________|      ______________________________  |_____________________| 
```

和对象：

```
 class A {
        List<C> list;
        ...
   } 
```

现在我想从数据库中接收一个对象 A，其中包含由表 B 组合的所有 C 对象。我有接收正确对象 A 的标准，但我不知道如何接收相应 C 对象的列表：

```
 Criteria crit = ...;
    A a = crit.uniqueResult(); 
```

这是给我正确结果的 SQL 查询，现在应该在标准中“翻译”：

```
 select c.* 
 from A as a, 
      B as b, 
      C as c 
 where a.a_id = b.a_id and b.c_id = c.c_id; 
```

有谁知道如何制定标准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:03:29.440

如果你有

```
class A {
    List<C> list;
    ...
} 
```

并且两者`A`都是`C`s `@Entity`，您的标准必须如下所示：

```
// Create criteria on class A
Criteria criteria = session.createCriteria(A.class); 
```

在这一刻，如果您执行 a `criteria.list()`，您将获得所有`A`对象，每个对象都有一个`C`您只有 id 的值列表。为了带来完整的 C 对象，您需要一个额外的：

```
criteria.createAlias("list", "listC"); 
```

这将为（即内部连接）创建一个`A`别名`C`。现在，假设你有**一个**(of class `A`) 你可以做`a.getList().get(i).getWhateverFieldFromC()`；所以现在你已经为`A`它的 s 列表的每个实例`C`填充了。

不要忘记最后做一个`criteria.list()`来检索列表。这就是全部。

**PS这是假设（当然）实体`A`和`C`正确映射。**

# mongodb - Mongo 聚合可以做什么/Mongo 聚合的性能

> ID：14255816
> 
> 赞同：8
> 
> 时间：2013-01-10T10:33:07.740
> 
> 标签：mongodb, mongodb-php

我构建了一个 MongoDB。我想通过某些分组进行聚合。我找到了这个[文件](http://docs.mongodb.org/manual/reference/sql-aggregation-comparison/)，它将为我做这件事。一切正常，但指出了某些[限制：](http://docs.mongodb.org/manual/applications/aggregation/)

1.  管道的输出只能包含 16 兆字节。如果您的结果集超过此限制，则聚合命令会产生错误。

2.  如果任何单个聚合操作消耗超过 10% 的系统 RAM，则该操作将产生错误。

3.  聚合系统当前将`$group`操作存储在内存中，这在处理大量组时可能会导致问题。

我可以使用 MongoDB 聚合处理多少行/文档？我害怕使用这个。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-29T10:29:18.253

**我从谷歌群组中得到了有效且有用的答案。想和大家分享。**

限制不在于文档的数量：限制在于最终结果（或中间结果）使用的内存量。

所以：如果您聚合 200 000 个文档，但结果适合 16MB 的结果，那么您就可以了。如果您聚合 100 个文档并且结果不适合 16 MB，那么您将收到错误消息。

同样，如果您对中间结果执行 sort() 或 group()，并且该操作需要超过 10% 的可用 RAM，那么您将收到错误消息。这仅与您拥有多少文档松散相关：它是管道特定阶段有多大的函数。

> 我可以通过任何设置增加 16MB 吗？
> 
> 16MB 限制仅适用于最终结果还是特定聚合（即中间结果 + 任何临时持有量 + 最终结果）？

16MB 限制不可调整。这是 MongoDB 中文档的最大大小。由于聚合框架当前是作为命令实现的，因此聚合的结果必须在单个文档中返回：因此有 16 MB 的限制。

看到这个[帖子](https://groups.google.com/forum/?fromgroups=#!searchin/mongodb-user/sathyamoorthi/mongodb-user/I95HiEX0ODQ/Q-4fxQ84j98J)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:47:26.767

聚合框架可能发生的处理量取决于您的架构。

聚合框架目前只能输出一个文档的相对文件（对于更大的输出，您将要观看：[https](https://jira.mongodb.org/browse/SERVER-3253) ://jira.mongodb.org/browse/SERVER-3253 ），它将以以下形式输出：

```
{
    result: { //the result },
    ok: 1/0
} 
```

所以你必须确保你从`$group`/`$project`中得到的东西不会太大，以至于你不能得到你需要的结果。大多数情况下情况并非如此，`$group`即使是数百万行的简单操作也可能导致小于 16Meg 的响应。

我们不知道您的文档大小或您希望运行的聚合查询，因此我们无法提供建议。

> 如果任何单个聚合操作消耗超过 10% 的系统 RAM，则该操作将产生错误。

这真的很不言自明。如果一个操作的工作集太大以至于占用超过 10% 的 RAM（`$group`/Computed fields/`$sort`在计算或分组的字段上），那么它将无法工作。

除非您尝试滥用聚合框架来为您执行应用程序逻辑，否则您永远不应该真正遇到这个问题。

> 聚合系统当前将 $group 操作存储在内存中，这在处理大量组时可能会导致问题。

由于`$group`真的很难不在内存中进行（它“分组”该字段），这意味着对该组的操作也在内存中，即`$sort`如果您不小心，您可以开始使用这 10%。

# php - PHP回显中的奇怪字符导致无效的JSON

> ID：14255818
> 
> 赞同：0
> 
> 时间：2013-01-10T10:33:24.353
> 
> 标签：php, json, character

我在 php 中使用 echo 来返回数据库请求。尝试在 Flash 中解码结果时，我收到错误消息，告诉我意外字符。当我在浏览器中查看输出时，它看起来很好。但是当我复制内容（全选 -> 复制）然后通过 php 中的脚本运行文本时，我看到了很多奇怪的字符。这就解释了为什么 JSON 解码失败，但是我该如何摆脱奇怪的字符呢？

**测试脚本以检查字符串**

```
 $string = str_split($string);
    echo '<pre>';
    print_r($string);
    echo '<pre>'; 
```

结果：

```
 [0] => ï
        [1] => »
        [2] => ¿
        [3] => ï
        [4] => »
        [5] => ¿
        [6] => ï
        [7] => »
        [8] => ¿
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:56:12.670

确保服务器使用正确的内容类型标头进行回复：

```
Content-type: application/json; charset=utf-8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:10:53.893

阅读[此答案](https://stackoverflow.com/a/11261669/473841)后，我找到了解决方案。问题是我的 PHP 文件是用带有 BOM 的 UTF-8 编码保存的。使用 UTF-8 编码保存文件解决了我的问题。

# c# - 向程序类发送参数

> ID：14255825
> 
> 赞同：0
> 
> 时间：2013-01-10T10:33:53.153
> 
> 标签：c#

我有一个包含所有功能的函数类。我想在函数之间传递参数，但不是递归。

假设我的第一个函数返回一个数组，我想将该数组发送到另一个检查它的函数。

我怎样才能在程序课上做到这一点？

我尝试：

```
 public List InsertFibo()
    {                  
        List<int> Fibo = new List<int>();              
        Console.WriteLine("enter you number");
        string n = Console.ReadLine();
        int numbers = Convert.ToInt32(n);

        for (int i = 0; i < numbers; i++)
        {

            Console.WriteLine("insert numbers");
            string z = Console.ReadLine();
            int number = Convert.ToInt32(z);
            Fibo.Add(number);
        }
        return Fibo; ;

    }

    public bool check(List<int> f)
    {
        int temp1=0;
        int temp2=1;
        int temp3=2;

        if (f[temp1]+f[temp2]==f[temp3])
        {
            temp1++;
            temp2++;
            temp3++;
            return true ;
        }
        else
        {
            return false;   
        }
    } 
```

节目类

```
Fibonachi f = new Fibonachi();
       Console.WriteLine(f.InsertFibo());
       Console.WriteLine(f.check()); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:40:01.737

你可以用这个

```
Fibonachi f = new Fibonachi();
List list = new List();
list = f.InsertFibo();
Console.WriteLine(list);
Console.WriteLine(f.check(list)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:15:21.113

我对您的程序的理解是，函数 InsertFibo() 要求用户输入一个数字 n（比如 5），然后输入 n 个数字（5 个数字）。然后调用第二个函数 check() 以确认输入的数字形成斐波那契数列。

所以对第一个函数的调用应该是这样的

```
Fibonacci Fibonacci = new Fibonacci();
List<int> lstFibNumbers = Fibonacci.InsertFibo();
for(int index = 0; index < lstFibNumbers.Count; index++)
  Console.WriteLine(lstFibNumbers[index]); 
```

现在调用 check 方法为

```
Console.WriteLine(Fibonacci.check(lstFibNumbers)); 
```

检查方法将如下所示

```
public bool check(List<int> f)
{
  int temp1=0;
  int temp2=1;
  int temp3=2;

  bool IsAFibonacciSeries = false;

  while(temp1 < f.Count)
  {
    if (f[temp1]+f[temp2]==f[temp3])
    {
      temp1++;
      temp2++;
      temp3++;
      IsAFibonacciSeries = true;
    }
    else
    {
      return false; //If anytime the series is not followed, just return false
    }
  }
  return IsAFibonacciSeries;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:40:04.450

尝试

```
Array a = new Array ();
var b = a.InsertArray()
Console.WriteLine(b);
Console.WriteLine(a.check(b)); 
```

# android - android“achartengine”在时间图中仅显示有限的日期

> ID：14255826
> 
> 赞同：3
> 
> 时间：2013-01-10T10:33:56.670
> 
> 标签：android, achartengine

我正在为时间表使用“achartengine”，但我希望只有具有数据的日期或时间应该显示在 x 轴的图表中。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:20:09.697

你可以通过调用来做到这一点：

```
renderer.setXRoundedLabels(false); 
```

这样，您可以禁用默认标签并为您的数据显示标签。

此方法从 1.1.0 版本开始可用。[您可以在此处](http://www.achartengine.org/download/)下载 1.1.0-rc2 版本。

# android - 从android中的Sqlite数据库中获取日期

> ID：14255830
> 
> 赞同：13
> 
> 时间：2013-01-10T10:34:03.613
> 
> 标签：android, sqlite

在我的 Sqlite 数据库中，我将日期保存在数据类型 DATE 中。如何从光标中获取此日期？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-10T10:43:58.877

SQLite 使用 ISO8601 日期/时间格式以 UTC (GMT) 存储表示当前时间的字符串。顺便说一下，这种格式 (YYYY-MM-DD HH:MM:SS) 适用于日期/时间比较。

使用以下代码检索日期。

```
Cursor row = databaseHelper.query(true, TABLE_NAME, new String[] {
COLUMN_INDEX}, ID_COLUMN_INDEX + "=" + rowId,
null, null, null, null, null);
String dateTime = row.getString(row.getColumnIndexOrThrow(COLUMN_INDEX)); 
```

这将返回一个字符串，对其进行解析并重新格式化为您的本地格式和时区：

```
DateFormat iso8601Format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
try {
date = iso8601Format.parse(dateTime);
} catch (ParseException e) {
Log.e(TAG, "Parsing ISO8601 datetime failed", e);
}

long when = date.getTime();
int flags = 0;
flags |= android.text.format.DateUtils.FORMAT_SHOW_TIME;
flags |= android.text.format.DateUtils.FORMAT_SHOW_DATE;
flags |= android.text.format.DateUtils.FORMAT_ABBREV_MONTH;
flags |= android.text.format.DateUtils.FORMAT_SHOW_YEAR;

String finalDateTime = android.text.format.DateUtils.formatDateTime(context,
when + TimeZone.getDefault().getOffset(when), flags); 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-07-28T06:44:37.623

SQLite 并没有真正的`DATE`类型（`DATE`关键字只是表示该列具有`NUMERIC`亲和性，根据[SQLite 版本 3 中的数据类型](http://www.sqlite.org/datatype3.html)），因此您可以选择存储日期的约定。常见约定是 (a) 使用实数来存储儒略日期或 (b) 使用整数来存储 Unix 纪元（自 1970 年以来的秒数，SQLite 日期和时间函数支持每个[日期和时间的 'unixepoch' 参数）功能](http://www.sqlite.org/lang_datefunc.html)）。

如果您正在将日期存储为 Unix 纪元（对于 Android 来说很方便，因为调用`.getTime()`一个`Date`对象会返回自 1970 年以来的毫秒数），然后将 SQLite`DATE`字段读取为 a`long`并将其等效的毫秒传递给`java.util.Date`构造函数`Date(long milliseconds)`。所以，它看起来像这样：

```
SQLiteManager dbManager = new SQLiteManager(context, DB_NAME, null, VERSION);
SQLiteDatabase db = dbManager.getReadableDatabase();
Cursor cursor = db.query(TABLE_NAME,
    new String[] { COLUMN_NAME_ID, COLUMN_NAME_DATE },
    null, null, // selection, selectionArgs
    null, null, null, null); // groupBy, having, orderBy, limit
try {
    while(cursor.moveNext()) {
        int id = cursor.getInt(0);
        // Read the SQLite DATE as a long and construct a Java Date with it.
        Date date = new Date(cursor.getLong(1)*1000);
        // ...
    }
} finally {
    cursor.close();
    db.close();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-10T11:00:34.973

此代码有效

```
String s= cursor.getString(position);
    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
    Date d=new Date();
    try {
         d=  dateFormat.parse(s);
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    YourObject.setDate(d); 
```

# java - 如何将我的 log4j.properties 设置为我的类路径

> ID：14255833
> 
> 赞同：2
> 
> 时间：2013-01-10T10:34:12.297
> 
> 标签：java, eclipse, sts-springsourcetoolsuite

这可能是重复的，所以请多多包涵。
我`log4j.properties`在文件夹中有一个文件`\WebContent\conf`。
我不知道它是否设置在类路径中。

我正在`Spring Source Tool Suite`用于开发。
谁能帮我将它设置为类路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:53:05.063

是什么`\WebContent\conf`？`WebContent`是 Eclipse 中动态 web 项目的“web”文件夹吗？然后直接将配置文件放在那里。

如果您不将 log4j 配置放在作为类路径一部分的根文件夹中，您可以使用

> -Dlog4j.configuration=name-and-path-of-config-file

当你启动 JVM 时。

# c# - 更新后css iframe未在客户端更新

> ID：14255835
> 
> 赞同：0
> 
> 时间：2013-01-10T10:34:23.233
> 
> 标签：c#, asp.net, html, css

我有一个网络应用程序（asp.net/html、css 等）。我已经更新了我的样式表并将其部署在我的网络服务器上。现在我的一些用户/客户仍在使用旧的 css 文件。

我已经这样做了

我的电话响了，我必须告诉我的客户使用 F5 重新加载页面。之后样式表被更新。

我的网络应用程序正在使用 iframe。问题可能在 iframe 内？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:45:39.397

在 Firefox（和其他浏览器）中，[**F5**是简单刷新，而**CTRL + F5**也强制缓存刷新](https://stackoverflow.com/questions/385367/what-requests-do-browsers-f5-and-ctrl-f5-refreshes-generate)并强制重新加载静态资源，您应该告诉他们`CTRL + F5`在电话中执行...

您的问题与缓存有关，如果您不希望浏览器缓存您`CSS`的 s ，您可以使用元标记指示它们并写入设置`Cache-Control`属性的响应（[看看这个](https://stackoverflow.com/questions/511144/how-to-instruct-web-browsers-not-to-cache-pages)）

或者您可以直接在您的 Web 服务器中配置它（在 Apache 中它类似于

```
ExpiresActive On
ExpiresDefault “access plus 10 days”
ExpiresByType text/css “access plus 1 second” 
```

或者使用一些丑陋的技巧，比如在 CSS 的链接中添加时间戳：http: [//css-tricks.com/can-we-prevent-css-caching/](http://css-tricks.com/can-we-prevent-css-caching/)

顺便说一句，缓存将在未来某个地方自行过期......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:40:31.923

您可以在 yoh html 代码中添加“版本”如

```
<link rel="stylesheet" type="text/css" href="style.css?version123" /> 
```

所有用户都将使用最新的 css 文件

# opencv - 计算机视觉：标记形状和检测方法

> ID：14255836
> 
> 赞同：1
> 
> 时间：2013-01-10T10:34:23.540
> 
> 标签：opencv, xamarin.ios, xamarin.android, emgucv

我想开发一个基于标记的增强现实应用程序，我选择 emgu 作为 OpenCV 包装器，因为它是我发现的唯一支持 Mono for Android 和 Monotouch 的框架（如果你知道其他框架，我很乐意考虑它们，如果支持单声道）。我现在正在使用网络摄像头在 Windows 上进行开发，到目前为止，我已经使用 FindChessboardCorners 检测到标记，使用棋盘作为标记。我得到了分数并在棋盘上绘制了一个透视位图，3D 稍后出现。

对于我的应用程序，我想使用 QR 码作为标记，或者特别是 QR 码用作标记的 3 个正方形（内部有一个正方形）（每个 QR 码都相同）。

传递图像和标记图像（BW中的QR码标记）并获得像FindChessboardCorners这样的标记位置的最佳（最快，它应该与凸轮一起使用）方法是什么？还是我应该坚持棋盘？

你能给我举个例子，或者给我一个关于如何进行的提示吗？

谢谢！马蒂亚

# netbeans - 文件在netbeans ide中的位置

> ID：14255837
> 
> 赞同：0
> 
> 时间：2013-01-10T10:34:26.160
> 
> 标签：netbeans, netbeans-7

我将 Netbeans IDE 用于 PHP 开发。目前我正在寻找一个开源项目，我想了解它。问题是我不知道某个文件的位置。eclipse 中有一个功能可以让您实时查看文件在项目根目录中的确切位置，即使在您切换选项卡时也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:40:19.333

将鼠标悬停在选项卡名称上，文件的位置将显示为弹出消息

# mysql - 如何避免 mysql 从 SELECT ... INNER JOIN ... FOR UPDATE 锁定所有表

> ID：14255839
> 
> 赞同：0
> 
> 时间：2013-01-10T10:34:29.160
> 
> 标签：mysql, stored-procedures

我有两个mysql表：

```
tbl_jobs (
    id INTEGER PRIMARY KEY,
    status ENUM("runnable", "running", "finished"),
    server_id INTEGER
)

tbl_servers (
    is INTEGER PRIMARY KEY,
    name VARCHAR(50)
) 
```

我有很多客户端连接，为特定服务器执行一项工作`runnable`并将其设置为`running`.

这是我目前的做法（在存储过程中）：

```
DELIMITER $$
CREATE PROCEDURE GET_JOB(serverName VARCHAR(50))
BEGIN
    DECLARE jobId INTEGER DEFAULT NULL;
    SELECT id FROM tbl_jobs j INNER JOIN tbl_servers s on j.server_id=s.id
              WHERE j.state='runnable' AND s.server_name=serverName
              ORDER BY job_id ASC LIMIT 1
              INTO jobId FOR UPDATE;
    IF IFNULL(jobId, 0) = 0 THEN
        SELECT 0;
    END IF;
    UPDATE tbl_jobs SET state='running' WHERE job_id=jobId;
    SELECT jobId;
END $$ 
```

这工作得很好，**但是**当并发客户端的数量变得很大（数百个）时，我看到`tbl_servers`桌面上出现了很大的锁拥塞。我知道该`FOR UPDATE`语句会锁定所有表，但实际上我将`tbl_servers`其用作只读表。

**问题**：如何避免锁定拥塞（即完全锁定）`tbl_servers`？

我能想到的一件事是将我的查询分成两部分 - 首先将服务器名称转换为 id 然后只查询`tbl_jobs`，但在我的真实应用程序中，一个服务器名称可以有很多 id（我知道这听起来很奇怪，但我只是在这里简化了我的应用程序以进行说明）。所以第二个查询`tbl_jobs`需要准备好的语句。

我确信有一个更优雅的解决方案。

系统：

*   Amazon RDS 上的 MySQL 5.1.67
*   所有表都是 InnoDb
*   我确实有一个索引`tbl_jobs.server_id`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:51:07.987

这应该避免锁定表`tbl_servers`

```
DELIMITER $$
CREATE PROCEDURE GET_JOB(serverName VARCHAR(50))
BEGIN
    DECLARE jobId INTEGER DEFAULT NULL;

    -- get the server id's
    CREATE TEMPORARY TABLE tmp_srvID 
    SELECT id
    INTO srvID 
    FROM tbl_servers
    WHERE name = serverName;

    SELECT id 
    INTO jobId 
    FROM tbl_jobs 
    WHERE state='runnable'

      AND server_id IN ( SELECT id FROM tmp_srvID ) 

    ORDER BY job_id ASC 
    LIMIT 1
    FOR UPDATE;

    DROP TABLE tmp_srvID;

    IF IFNULL(jobId, 0) = 0 THEN
        SELECT 0;
    ELSE
        UPDATE tbl_jobs SET state='running' WHERE job_id=jobId;
        SELECT jobId;
    END IF;
END $$ 
```

# android - 从服务更新 IllegalStateException listView

> ID：14255844
> 
> 赞同：0
> 
> 时间：2013-01-10T10:34:54.357
> 
> 标签：android, listview, broadcastreceiver, parcelable, intentservice

我使用 IntentService 从 Web 服务器接收一些数据，并用这些数据更新我在 Activity 中的列表视图。我在 Activity 中使用了静态 ArrayList，当我从服务器获得更新时，我将项目添加到静态 ArrayList 并向 Activity 发送广播通知。却造成了`IllegalStateException`。我决定使用 Parcelable 类来更新我的列表。所以我的对象的类看起来像这样：

```
 public class Order implements Parcelable{

// ....fields initialazion
public Order()
{}
public Order(List<File> files, boolean customer_deadline_sent,
        boolean payed, boolean payment_failed, boolean not_payed_sent,
        String info, int id, Category category, String timezone,
        String title, Level level, DateTime updated_at, float price,
        DateTime checkpoint_deadline, boolean h_notified, float refund,
        String special_info, boolean checkpoint_deadline_sent,
        ProcessStatus process_status, DateTime created_at,
        CustomerThread cus_thread, boolean den, DateTime deadline , boolean is_active,
        Product product, Subject subject) {
    this.files = files;
    this.customer_deadline_sent = customer_deadline_sent;
    this.payed = payed;
    this.payment_failed = payment_failed;
    this.not_payed_sent = not_payed_sent;
    this.info = info;
    this.id = id;
    this.category = category;
    this.timezone = timezone;
    this.title = title;
    this.level = level;
    this.updated_at = updated_at;
    this.price = price;
    this.checkpoint_deadline = checkpoint_deadline;
    this.h_notified = h_notified;
    this.refund = refund;
    this.special_info = special_info;
    this.checkpoint_deadline_sent = checkpoint_deadline_sent;
    this.process_status = process_status;
    this.created_at = created_at;
    this.cus_thread = cus_thread;
    this.den = den;
    this.deadline = deadline;
    this.is_active = is_active;
    this.product = product;
    this.subject = subject;
}
//...getters and setters
    private void readFromParcel(Parcel in) {
    boolean[] myBooleanArr = new boolean[6];

    files = in.readArrayList(File.class.getClassLoader());

    checkpoint_deadline_sent = myBooleanArr[0];
    customer_deadline_sent =  myBooleanArr[1];
    payed = myBooleanArr[2];
    payment_failed = myBooleanArr[3];
    not_payed_sent = myBooleanArr[4];
    den = myBooleanArr[5];
    h_notified = myBooleanArr[6];
    in.readBooleanArray(myBooleanArr);
    special_info = in.readString();
    title = in.readString();
    timezone = in.readString();
    info = in.readString();
    id = in.readInt();
    category = in.readParcelable(Category.class.getClassLoader());
    level = in.readParcelable(Level.class.getClassLoader());
    updated_at =  in.readParcelable(DateTime.class.getClassLoader());
    deadline =  in.readParcelable(DateTime.class.getClassLoader());
    checkpoint_deadline =  in.readParcelable(DateTime.class.getClassLoader());
    created_at =  in.readParcelable(DateTime.class.getClassLoader());
    process_status =  in.readParcelable(ProcessStatus.class.getClassLoader());
    cus_thread =  in.readParcelable(CustomerThread.class.getClassLoader());
    price = in.readFloat();
    refund = in.readFloat();

}
public void writeToParcel(Parcel par, int arg1) {
    par.writeList(files);
    par.writeBooleanArray(new boolean[] {checkpoint_deadline_sent});
    par.writeBooleanArray(new boolean[] {customer_deadline_sent});
    par.writeBooleanArray(new boolean[] {payed});
    par.writeBooleanArray(new boolean[] {payment_failed});
    par.writeBooleanArray(new boolean[] {not_payed_sent});
    par.writeBooleanArray(new boolean[] {den});
    par.writeBooleanArray(new boolean[] {h_notified});
    par.writeString(special_info);
    par.writeString(info);
    par.writeString(timezone);
    par.writeString(title);
    par.writeInt(id);
    par.writeParcelable(category, arg1);
    par.writeParcelable(level, arg1);
    par.writeParcelable(checkpoint_deadline, arg1);
    par.writeParcelable(created_at, arg1);
    par.writeParcelable(deadline, arg1);
    par.writeParcelable(updated_at, arg1);
    par.writeParcelable(cus_thread, arg1);
    par.writeParcelable(process_status, arg1);
    par.writeFloat(price);
    par.writeFloat(refund);
}

public static final Parcelable.Creator<Order> CREATOR =
        new Parcelable.Creator<Order>() {
            public Order createFromParcel(Parcel in) {
                return new Order(in);
            }

            public Order[] newArray(int size) {
                //throw new UnsupportedOperationException();
                return new Order[size];
            }
        };
  } 
```

这就是我在 IntentService 中添加项目的方式：

```
 @Override
    protected void onHandleIntent(Intent intent) {
    // getting existing static ArrayList from the Activity
   public ArrayList<Order> serviceOrders =  DashboardActivityAlt.forPrint;
   // getting Order object from the web server and...
   serviceOrders.add(0,orderObj);
   // and finally sending it to the Activity:
   intent = new Intent(ORDERS_IMPORT);
   intent.putParcelableArrayListExtra("orders",  serviceOrders);
   sendBroadcast(intent);
} 
```

这就是我参加活动的方式：

```
 @Override
        public void onReceive(Context context, Intent intent) {
            Log.i("Dashboard onreceive", "I've got receiving");
            updateUI(intent);       
        }
    };

    private void updateUI(Intent intent) {

        try 
        {   

            DashboardActivityAlt.this.runOnUiThread(new Runnable (){
            public void run() {

                         adapter.notifyDataSetChanged();
                    }
            });
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    } 
```

但尽管如此，我也有同样的情况`IllegalStateException`。

```
 java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(2131296256, class android.widget.ListView) with Adapter(class android.widget.HeaderViewListAdapter)]
    at android.widget.ListView.layoutChildren(ListView.java:1558)
at android.widget.AbsListView.onLayout(AbsListView.java:1366)
at android.view.View.layout(View.java:7175)
at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
at android.view.View.layout(View.java:7175)
at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
at android.view.View.layout(View.java:7175)
at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
at android.view.View.layout(View.java:7175)
at android.view.ViewRoot.performTraversals(ViewRoot.java:1146)
at android.view.ViewRoot.handleMessage(ViewRoot.java:1866)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method) 
```

请告诉我，我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:17:29.383

我解决了这个问题，使用 Handler 将项目添加到我的 listView，所以这个添加将在 UI 线程中执行。我使用相同的公共静态 ArrayList 并使用 Handler 向其中添加项目。为我工作...

```
 private void addMethod(Order r)
    {
        mHandler.post(new sendUpdatings(r));
    }

 private class sendUpdatings implements Runnable {
        Order r;

        public sendUpdatings(Order r) {
            this.r = r;
        }

        public void run(){
             DashboardActivityAlt.forPrint.add(0,r);
        }
    } 
```

# ruby-on-rails - 范围内的多个参数

> ID：14255846
> 
> 赞同：2
> 
> 时间：2013-01-10T10:34:58.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3, scopes

对于大多数人来说，这可能很简单，但是我还没有真正写过许多具有多个参数的范围，单个参数很好，只是在这里不确定。我正在尝试创建一个范围，上面写着“给我当前用户已签出的所有书籍”

所以我在我的书本模型中提出了这个

```
scope :checked_out_book, lambda{|user| { :conditions => { :user_id => current_user.id, :checked_out => true } } 
```

之前没有使用过 lambda，所以不确定我是否正确使用它，无论哪种方式我都会收到错误

```
syntax error, unexpected keyword_end, expecting '}' 
```

谁能指出我正确的方向

编辑

已将范围更改为

```
scope :checked_out_book, lambda {|user| where(:user_id => user.id, :checked_out => true) } 
```

但现在我明白了

参数数量错误（0 表示 1）谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:46:53.443

我会这样做：

```
scope :checked_out_book, lambda {|user| where(:user_id => user.id, :checked_out => true) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:06:58.790

```
scope :checked_out_book, lambda {|user| where(:user_id => user.id, :checked_out => true) } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T11:18:54.153

在`Book`模型上，范围应该是这样的：

```
scope :checked_out_book, lambda {|user| where(:user_id => user.id, :checked_out => true) } 
```

或者对于 Ruby 1.9

```
scope :checked_out_book, ->(user) { where(user_id: user.id, checked_out: true) } 
```

你会这样称呼它：

```
Book.checked_out_book(current_user) 
```

现在自从`User`has_many以来`Books`，我可能会选择这样的东西，而不会打扰范围。如果你想要一个类似方法的方法，你总是可以创建一个返回`Relation`对象的方法。

```
current_user.books.where(checked_out: true) 
```

或者

```
def checked_out_books
  books.where(checked_out: true)
end
# current_user.checked_out_books 
```

# jquery - jQuery UI 可排序事件多次触发

> ID：14255850
> 
> 赞同：1
> 
> 时间：2013-01-10T10:35:03.637
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我正在处理一个项目，它基于 jQuery UI Sortable and Draggable。问题是可排序事件被多次触发。（我使用搜索）。

有JS：

```
$('.column_inner').sortable({
    item: '.element',
    revert: 'invalid',
    helper: 'original',
    handle: '.drag_handle',
    dropOnEmpty: true,
    forcePlaceholderSize: true,
    forceHelperSize: false,
    appendTo: "body",
    connectWith: '.column_inner',
    receive: function(event, ui) {
        //Got the item and if it new inserting it from database.
    },
    update: function(event, ui) {
        //Saving sorting in to database
    },
    change: function(event, ui)
    {
        //This one fires multiple times, over does the same.
    },
    stop: function()
    {
        //This one fires only at stop
    }
}); 
```

有HTML：

```
<div class="row" id="row_115">
    <div class="column size_3" rel="1">
        <div class="column_inner">
            <div id="element_23" class="element editable">
                This is element
                <span class="drag_handle control_icon">Handle</span>
            </div>
            </div>
        </div>
    </div>
    <div class="clear"></div>
    <span class="up">UP</span> <span class="down">DOWN</span>
</div>

<div class="row" id="row_117">
    <div class="column size_half" rel="1">
        <div class="column_inner">
            <div id="element_20" class="element editable">
                Another element<br />
                <span class="drag_handle control_icon">Handle</span>
            </div>
        </div>
    </div>
    <div class="column size_half" rel="2">
        <div class="column_inner">
            <div id="element_20" class="element editable">
                Third element<br />
                <span class="drag_handle control_icon">Handle</span>
            </div>
        </div>
    </div>
    <div class="clear"></div>
    <span class="up">UP</span> <span class="down">DOWN</span>
</div> 
```

我做错了什么？为什么事件会触发多次？

# c# - 使用 Microsoft POS .NET，是否可以在服务器上“渲染”输出并将字节发送到客户端进行打印？

> ID：14255855
> 
> 赞同：0
> 
> 时间：2013-01-10T10:35:11.577
> 
> 标签：c#, .net, opos, pos-for-.net

使用带有 Epson 收据打印的 Microsoft POS.NET，是否可以通过写入本应发送到打印机的字节来创建用于在服务器上打印的收据（服务器安装了 POS.NET 和 Epson 驱动程序，但没有连接打印机）到一个文件？

之后，我们希望能够将这些传输到安装了打印机的客户端计算机，它所做的只是将字节流式传输到打印机。

到目前为止，我们所得到的只是在开发机器上运行的 Epson 示例代码，我看不到任何明显的方法来执行“打印到文件”或截取字节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:43:48.880

不幸的是，OPOS 本身并不提供此功能。最接近的是“页面模式”，您可以将 OPOS 收据或单据打印机设置为页面模式状态，然后您的所有打印命令都由服务对象在内部进行缓冲。然后，您发出 OPOS pageModePrint() 命令以稍后将整个收据发送到打印机。但是 OPOS 不提供对缓冲区的访问，供应商可以自由地以他们想要的任何方式实现它（包括根本不实现该功能。）

为了解决您的问题，我能想到的最简单的解决方案是检查您的服务对象，看看它是否支持网络打印。也许服务对象已经能够打印到网络连接的打印机，或另一台托管打印机的计算机。供应商可以通过 DirectIO 命令提供对页面模式缓冲区的访问。您的打印机供应商可能会将这些作为附加（付费）功能提供，或者他们可能会提供为您定制的功能。如果供应商已经为您的打印机提供了以太网通信板选项，那么他们很可能已经拥有您需要的一切。问一下也无妨。

如果没有，您当然可以自由地编写自己的服务对象来完成缓冲数据并使其可用于您的应用程序的任务。将自定义服务对象作为通用控件和供应商提供的服务对象之间的“楔子”滑动，并允许通过 DirectIO() 方法进行自定义控制，这当然不是不可能的。我曾经这样做是为了添加扫描仪缓冲区功能，但我从来没有为像打印机这样复杂的东西做过。

# git - 我的部署脚本有什么问题？

> ID：14255856
> 
> 赞同：0
> 
> 时间：2013-01-10T10:35:14.137
> 
> 标签：git, shell, ssh

我正在尝试使用可以从本地计算机运行的 shell 脚本来自动化我的部署过程。过程很简单：

1.  SSH 到远程服务器
2.  `git pull`根据提供的参数运行命令

目前我有这个：

```
#!/bin/sh

SSH_HOST="REMOVED"
SSH_PORT="REMOVED"
SSH_USER="REMOVE"

if [ "$1" = "live" ]
    then
    DIR="REMOVED"
    GIT_BRANCH="REMOVED"
    echo "Deploying to live site..."
elif [ "$1" = "test" ]
    then
    DIR="REMOVED"
    GIT_BRANCH="REMOVED"
    echo "Deploying to test site..."
else
    echo "ERROR: Please specify a target (either live or test)"
    exit 1;
fi

# create SSH connection
echo "ssh $SSH_USER@$SSH_HOST -p $SSH_PORT"
ssh $SSH_USER@$SSH_HOST -p $SSH_PORT << END_SSH
sudo -s
cd $DIR
git pull origin $GIT_BRANCH
END_SSH

echo "Site successfully deployed."
exit 0; 
```

但是当我运行脚本时收到以下消息：

> 不会分配伪终端，因为 stdin 不是终端。
> sudo：抱歉，您必须有一个 tty 才能运行 sudo
> 错误：无法打开 .git/FETCH_HEAD：权限被拒绝

我哪里出错了？最后一行只是因为我没有在远程服务器上成功验证为 sudo，所以由于权限错误而无法运行 Git 命令，但是是什么导致了前两行？我是否配置错误，或者我在某处或某处有语法错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:38:49.287

`ssh`在这里要求输入密码：

```
ssh $SSH_USER@$SSH_HOST -p $SSH_PORT << END_SSH 
```

但标准输入不是来自终端（tty），而是来自heredoc。所以它不能使用其标准的兼容 tty 的密码请求机制。

如果您的远程计算机配置了您的公钥，那么您可能会避免这种情况。另一种选择是调查该`-t`选项（强制进行伪 tty 分配）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:39:58.717

> 不会分配伪终端，因为 stdin 不是终端。

这是正常行为，因为您已使用`<<`.

> sudo：对不起，你必须有一个 tty 才能运行 sudo

这是先前行为的直接结果，因为`sudo`希望真正的用户坐在交互式终端上。

我不认为你真的需要一个交互式会话，只需 ssh 作为你真正想要运行命令的用户，并使用 shell 命令作为参数调用 ssh，或者更好的是，在服务器上创建一个脚本，然后从非交互式 ssh 调用。

# search - 使用 Open Search Server 抓取受 STS 保护的站点

> ID：14255859
> 
> 赞同：0
> 
> 时间：2013-01-10T10:35:21.557
> 
> 标签：search, open-source, search-engine

我已经配置了[Open Search Server](http://www.open-search-server.com/)，它适用于所有打开的站点。但我无法抓取使用[安全令牌服务 (STS)](http://en.wikipedia.org/wiki/Security_Token_Service)进行身份验证的受保护站点。我已经为网络爬虫指定了所有身份验证参数（模式、用户名和密码），但它没有爬取。

如何使用 Open Search Server 网络爬虫来爬取受 STS 保护的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:13:03.033

OpenSearchServer 的认证模块支持以下协议：

*   基本 HTTP 身份验证
*   摘要 HTTP 身份验证
*   Kerberos

可以开发其他实现。作为开源软件，您可以通过做贡献或在[OpenSearchServer SourceForge 项目](http://sourceforge.net/p/opensearchserve/)上向社区寻求帮助。

# android - Android AlertDialog 问题

> ID：14255860
> 
> 赞同：-1
> 
> 时间：2013-01-10T10:35:22.030
> 
> 标签：android, background, android-alertdialog

我用自定义布局创建了 AlertDialog。为此，我已将“创建自定义布局”的[教程闲置。](http://developer.android.com/guide/topics/ui/dialogs.html)AlertDialog 工作正常。但我的要求是当对话框处于活动状态时，按钮背景将不起作用。但在少数设备中，按钮保持活动状态。可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:21:21.043

我已经使用以下代码解决了它： dialog.setCanceledOnTouchOutside(false);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:40:50.793

如果这只发生在少数设备上，则可能存在一些特定于设备的问题。您可以检查对话框当前是否处于活动状态并快速解决问题。伪代码：

```
 public void disableButtons(boolean dialogShown)
  if(dialogShown)
    yourButton1.setEnabled(false);
    yourButton2.setEnabled(false); 
```

# jquery - 如何从 jquery navbar 中删除第一个像素行？

> ID：14255863
> 
> 赞同：0
> 
> 时间：2013-01-10T10:35:35.677
> 
> 标签：jquery, css, jquery-mobile

jquery 移动导航栏顶端的所有项目都有一个明亮的像素行（某种反射左右）。

[样本](http://forum.jquery.com/viewImage.do?fileId=14737000002113623&forumGroupId=14737000000003003)

`CSS`需要覆盖哪些属性才能删除导航栏顶部的这一行突出显示的像素（我认为是 ui-btn-inner）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:44:38.380

在 jquery.mobile-1.2.0.css:732 上覆盖此规则。

```
.ui-btn-inner {
    border-top: 1px solid white;
    border-color: rgba(255, 255, 255, .3);
} 
```

所以像：

```
.ui-btn-inner {
    border-top: none;
} 
```

# android - 弹出窗口中的 Android 微调器项目

> ID：14255868
> 
> 赞同：0
> 
> 时间：2013-01-10T10:35:56.157
> 
> 标签：android, android-widget, android-spinner

我创建了一个微调器，它显示它的列表项，如下所示：http: [//developer.android.com/images/ui/spinner.png](http://developer.android.com/images/ui/spinner.png)

但是我该如何更改它，以便当您点击微调器时，它会在新弹出窗口中显示所有选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:16:19.337

从 Holo 主题微调器默认显示为下拉菜单。如果您想自定义它，您可以使用按钮并设置微调器背景，当按下按钮时，显示上下文菜单。

更新 ：

只需使用 android:spinnerMode="dialog"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:26:02.297

将您的微调器项目显示为弹出窗口。使用以下几行。

在 setContentView(R.layout.main) 上方添加以下行。

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

并在特定活动中添加以下行。

```
android:theme="@android:style/Theme.Dialog" 
```

main.xml 将是您自己的设计，功能可能是那些项目是文本视图或按钮或单选项目..单击每个项目后，您需要在那里完成所需的工作..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:04:59.073

```
ArrayAdapter adapter=new ArrayAdapter(this,android.R.layout.simple_list_item_1,ur-arraylist);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spin.setAdapter(adapter); 
```

# java - 轮询后如何将新传入的数据传递给另一个类

> ID：14255872
> 
> 赞同：1
> 
> 时间：2013-01-10T10:36:10.683
> 
> 标签：java, multithreading, oop, object, methods

此类进行轮询并检查新的传入消息。现在我怎样才能同时实现轮询和检查新数据？最后所有的数据都必须反馈给 Polling

```
public void run() {
int seqId = 0;
    while(true) {
        List<KamMessage> list = null;
        try {
            list = fullPoll(seqId);
        } catch (Exception e1) {
            e1.printStackTrace();
        }
        if (!list.isEmpty()) {
            seqId = list.get(0).getSequence();
            incomingMessages.addAll(list);
            System.out.println("waiting 3 seconds");
            System.out.println("new incoming message");
        }
        try {
            Thread.sleep(3000);
            System.out.println("new incoming message");
        } catch (InterruptedException e) {
            e.printStackTrace();
        } 
    }
}
public List<KamMessage> fullPoll(int lastSeq) throws Exception {
Statement st = dbConnection.createStatement();
ResultSet rs = st.executeQuery("select * from msg_new_to_bde where ACTION =  804 and SEQ >" +
lastSeq + "order by SEQ DESC");      
    List<KamMessage> pojoCol = new ArrayList<KamMessage>();
    while (rs.next()) {
        KamMessage filedClass = convertRecordsetToPojo(rs);
        pojoCol.add(filedClass);
    }
    for (KamMessage pojoClass : pojoCol) {
        System.out.print(" " + pojoClass.getSequence());
        System.out.print(" " + pojoClass.getTableName());
        System.out.print(" " + pojoClass.getAction());
        System.out.print(" " + pojoClass.getKeyInfo1());
        System.out.print(" " + pojoClass.getKeyInfo2());
        System.out.println(" " + pojoClass.getEntryTime());
    }           
    return pojoCol;
} 
```

我的任务是从数据库中轮询表并检查新的传入消息。首先轮询后我得到新的传入数据，现在我的问题是

1.如何将此新数据传递给另一个类，以处理消息。

2.以及如何将其反馈回数据库并再次调用轮询。

3.如何并行实现

# twitter-bootstrap - LessPHP 0.3.8 + Bootstrap 2.2.2：生成的 CSS 损坏

> ID：14255876
> 
> 赞同：0
> 
> 时间：2013-01-10T10:36:38.593
> 
> 标签：twitter-bootstrap, lessphp

我正在使用 LessPHP 0.3.8 + Bootstrap 2.2.2

LessPHP 似乎生成了损坏的样式；[在http://alexeynekrasov.ru/test/lessphp.php](http://alexeynekrasov.ru/test/lessphp.php)看到我的例子

左栏由 LessPHP 生成，右栏由 Bootstrap 原站生成。班级`.btn`（以及更多）被打破了。

下载并运行我的完整示例：[http ://alexeynekrasov.ru/test/test.rar](http://alexeynekrasov.ru/test/test.rar)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T18:07:35.260

将lessphp 更新到最新（0.3.9），它工作正常。

# php - core/Model.php codeigniter 中显示的错误

> ID：14255879
> 
> 赞同：0
> 
> 时间：2013-01-10T10:36:53.700
> 
> 标签：php, codeigniter, model

我是 Codeigniter 的新手，并试图编辑在数据库中输入的字段。我也在关注[CI 教程中的本教程](http://www.phpeveryday.com/articles/CodeIgniter-Form-Creating-Beautiful-Form-Code-P263.html)。当我尝试运行该站点时，出现如下错误

```
Message: Undefined property: Books::$query

Filename: core/Model.php

Line Number: 51 
```

但我没有修改核心文件中的任何代码。我的模型`book_model.php`是

```
function get($id)
    {
        //echo $id;
        $this->load->database();

       // echo 'sda';
        $query = $this->db->get_where('books',array('id'=>$id));

        echo 'test';
        $a = $this->query->row_array();
        var_dump($a);
        return $a;
    } 
```

我可以看到回声，但`var_dump()`什么也没显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T10:41:50.547

您引用查询结果字符串错误。

尝试：

```
$a = $query->row_array(); 
```

并且您的 var_dump 将起作用。

通常在 CI 中，您不应该从模型中回显内容。使用控制器从模型中获取数据并在视图中回显内容。

# java - 为什么 Integer.parseInt 在没有 try catch 的情况下进行编译？

> ID：14255880
> 
> 赞同：3
> 
> 时间：2013-01-10T10:36:57.070
> 
> 标签：java, string, exception, int, parseint

据我所知，在java中抛出异常的函数不应该在没有try and catch或在它上面的函数中减速的情况下编译。那么为什么这段代码是合法的并且不粉碎呢？

```
public static void main(String[] args) {
    Integer.parseInt("33");
} 
```

即使 Integer.parseInt() 抛出：NumberFormatException - 如果字符串不包含可解析的整数。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T10:38:09.663

`NumberFormatException`extends`RuntimeException`这是一个未经检查的异常，不需要被捕获。

![在此处输入图像描述](../Images/6581e54e5a78b0b71a8ea118c175516f.png)

**摘自 Java 教程**

> 因为 Java 编程语言不需要方法来捕获或指定未经检查的异常（RuntimeException、Error 及其子类），所以程序员可能会倾向于编写仅引发未经检查的异常的代码，或者使其所有异常子类都继承自 RuntimeException。这两种快捷方式都允许程序员编写代码，而无需担心编译器错误，也无需指定或捕获任何异常。 **[全文](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)**

[NumberFormatException API 文档](http://docs.oracle.com/javase/7/docs/api/java/lang/NumberFormatException.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T10:48:02.813

来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.1.1)：

> 未经检查的*异常类*是运行时异常类和错误类。

换句话说，每个 Throwable，即一个`RuntimeException`或一个子类，每个 Throwable，即一个`Error`或一个子类。它们可以被捕获，但捕获或`throws`不是强制性的。

> 已*检查异常类*是除未检查异常类之外的所有异常类。也就是说，检查的异常类都是 Throwable 的子类，除了 RuntimeException 及其子类和 Error 及其子类。

换句话说，每隔一个`Throwable`。他们必须被扔（`throws`）或被抓住。

`NumberFormatException` 扩展`RuntimeException`，因此它是*未经检查的异常类*之一，不必被捕获或抛出为方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T10:38:50.777

[`NumberFormatException`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/NumberFormatException.html)是所谓的未经检查的异常，因为它是`RuntimeException`.

在java中，未经检查的异常也可以在没有try-catch的情况下编译

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T10:39:14.397

[NumberFormatException](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/NumberFormatException.html)是`RuntimeException`未选中的，因此不需要被捕获。

如果您不知道选中/未选中`Exception`是什么，请查看 [文档] [2](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T10:39:47.900

> 据我所知，在java中抛出异常的函数不应该在没有try和catch的情况下编译

`exception`对了，改成`Checked exception`.

通过以下内容对这些有一个清晰的认识：

[有效的 Java 异常](http://www.oracle.com/technetwork/articles/entarch/effective-exceptions-092345.html)

[例外](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T10:39:51.007

NumberFormatException 是一个 RuntimeException。RuntimeExceptions 是未经检查的异常。您所说的对于已检查的异常是强制性的，但对于未检查的异常则不是必需的。

几个链接：
[http ://www.javapractices.com/topic/TopicAction.do?Id=](http://www.javapractices.com/topic/TopicAction.do?Id=129)
[129 http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-10T10:39:53.563

Java中的异常有两种：已检查异常和未检查异常。

检查异常是需要`try-catch`阻止或声明的异常。

未经检查的异常不需要那个。`NumberFormatException`是未经检查的异常。

基本上，未经检查的 Exception 派生自`RuntimeException`，因此不需要声明或`try-catch`阻止。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-10T10:40:21.247

这是一个未经检查的异常。RuntimeException 类及其子类是未经检查的异常类。这些异常可以发生在代码中的任何位置。因此，您可以自行捕获该异常并继续执行

# sql - 访问结果中的第二行

> ID：14255881
> 
> 赞同：1
> 
> 时间：2013-01-10T10:36:57.653
> 
> 标签：sql, oracle, rownum

我在下面写了查询

```
SELECT DEPT_ID, COUNT(*) AS stud_count FROM TBL_STUDENT_DEPARTMENT_593932       
        GROUP BY DEPT_ID ORDER BY stud_count DESC 
```

它输出：

```
DEPT_ID     STUD_COUNT
-------     ----------
Dep02                5
Dep03                4
Dep01                3 
```

我想选择第二大的stud_count，即4。所以我使用**rownum**如下

```
SELECT stud_count FROM
(
    SELECT DEPT_ID, COUNT(*) AS stud_count FROM TBL_STUDENT_DEPARTMENT_593932       
        GROUP BY DEPT_ID ORDER BY stud_count DESC
)
WHERE ROWNUM = 2; 
```

但是它不返回任何行，只是空表。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:45:27.057

ROWNUM 以一种特殊的方式运行，这就是您需要使用嵌套查询的原因。首先，您对所有数据进行分组并求和。在外部查询中，您分配行号。然后在最外层的查询中只选择第二行。

```
SELECT *
FROM
   (
   SELECT dept_id
   ,      stud_count
   ,      rownum as stud_num
   FROM
      (
      SELECT DEPT_ID
      ,      COUNT(*) AS stud_count 
      FROM   TBL_STUDENT_DEPARTMENT_593932       
      GROUP BY DEPT_ID 
      ORDER BY stud_count DESC
      )
   )
WHERE stud_num = 2; 
```

如果您熟悉分析功能，则可以改用此语句：

```
SELECT *
FROM
   (
   SELECT DEPT_ID
   ,      COUNT(*) AS stud_count
   ,      ROW_NUMBER() over (order by COUNT(*) desc) stud_num
   FROM   TBL_STUDENT_DEPARTMENT_593932       
   GROUP BY DEPT_ID
)
WHERE stud_num = 2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T10:46:05.077

请检查：

```
SELECT * FROM
(
    SELECT DEPT_ID, COUNT(*) AS stud_count, ROW_NUMBER() over (order by COUNT(*) desc) ROW_NUM
    FROM TBL_STUDENT_DEPARTMENT_593932       
        GROUP BY DEPT_ID
)
WHERE ROW_NUM = 2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T10:49:39.533

你必须嵌套另一个级别

```
select dept_id, stud_count
  from (select rownum r, dept_id, stud_count
          from (select dept_id, count(*) as stud_count 
                  from TBL_STUDENT_DEPARTMENT_593932
                 GROUP BY DEPT_ID 
                 order by stud_count desc)
         where rownum <= 2
       )
 where r = 2; 
```

但是使用 rownum 意味着如果两个或多个记录具有第二个计数，您只会得到一行。所以使用你想要第二高计数的所有行的 dense_rank() 。

```
 select dept_id, stud_count
     from (select dept_id, count(*) as stud_count,
                  dense_rank() over (order by count(*) desc) rnk
             from TBL_STUDENT_DEPARTMENT_593932
             GROUP BY DEPT_ID 
             order by stud_count desc)
     where rnk = 2; 
```

例如：

```
SQL> select dept_id, count(*) stud_count from tbl_student_department_593932 group by dept_id;

DEPT_ STUD_COUNT
----- ----------
Dep03          4 <-- 
Dep01          3
Dep05          4 <-- 
Dep02          6

SQL> select dept_id, stud_count
  2    from (select rownum r, dept_id, stud_count
  3             from (select dept_id, count(*) as stud_count
  4                      from tbl_student_department_593932
  5                     group by dept_id
  6                     order by stud_count desc)
  7            where rownum <= 2)
  8   where r = 2;

DEPT_ STUD_COUNT
----- ----------
Dep03          4 
```

对比；

```
SQL> select dept_id, stud_count
  2    from (select dept_id, count(*) as stud_count,
  3                  dense_rank() over(order by count(*) desc) rnk
  4             from tbl_student_department_593932
  5            group by dept_id
  6            order by stud_count desc)
  7   where rnk = 2;

DEPT_ STUD_COUNT
----- ----------
Dep03          4
Dep05          4 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-10T10:50:15.470

```
SELECT TOP DEPT_ID, COUNT(*) AS stud_count 
FROM TBL_STUDENT_DEPARTMENT_593932 tb1
INNER JOIN tbl_student_department_593932 tb2
ON tb1.dept_id = tb2.dept_id
where tb1.count < tb2.count 
```

# android - Android Webview：xhr-polling 保持页面“加载”

> ID：14255893
> 
> 赞同：1
> 
> 时间：2013-01-10T10:37:56.870
> 
> 标签：android, xmlhttprequest, socket.io, android-webview, long-polling

我有一个 WebView 运行一个页面，该页面包含一个连接到远程 node.js 服务器的 socket.io 客户端。问题在于，因为 Android webview 不支持 websockets（它们在 Android Chrome 浏览器中），所以它回退到 xhr-polling。

我有一个`onProgressChanged`监听器`WebChromeClient`，但是 xhr-polling 使页面不断加载。当我记录进度时，它达到了 ~90-95% 并且没有进一步的进展。这意味着我不能关闭任何加载指示器或执行任何其他需要页面完全加载的操作。

无论如何我可以让Android认为这`xhr-polling`不是页面加载的一部分吗？或者有解决方法吗？我还没有测试它`jsonp-polling`。我更喜欢这个问题的解决方案，而不是破解/解决方法，但最终我只想让我的应用程序正常工作。

*PS，我知道 android 上的 socket.io 和 WebSockets 的本机库。但是，这一切都需要在 WebView 中完成。*

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:42:22.767

我发现了问题！

在 socket.io-client 上，如果这里是 XHR + webkit 浏览器，显然有一个特殊的延迟：

[https://github.com/LearnBoost/socket.io-client/blob/0.9/lib/util.js#L203](https://github.com/LearnBoost/socket.io-client/blob/0.9/lib/util.js#L203)

可以看到，100ms对手机来说是不够的，我得换至少500ms！我想作者不记得这个用例了！用这个修补socket.io-client并获利:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:13:43.987

在我找到更好的解决方案之前，我正在使用一种解决方法。我注意到每次，进度都会达到至少 90%。所以，我不是等待 100%，而是等待 90%。即使在 90% 时，我也可以看到我的几乎所有页面都已加载，在 90% 之后页面没有任何视觉变化。

# facebook - 为什么 Facebook 身份验证重定向会导致服务器错误？

> ID：14255895
> 
> 赞同：0
> 
> 时间：2013-01-10T10:37:57.653
> 
> 标签：facebook, .htaccess, codeigniter, routes

我在 codeigniter 中构建了一个简单的 url 缩短应用程序，它还允许用户通过 facebook 登录。

首次授权时，它在允许 facebook 权限后返回服务器错误。

我已将问题缩小到我的路由文件或我的 htaccess。但无论我尝试什么，我都无法让它工作。

由于该应用程序是一个 url 缩短器，因此任何未指定的路由都使用默认路由。像这样...

```
$route['login'] = "auth/login";
$route['about'] = "pages/about";
$route['(:any)'] = "redirect/index/$1"; 
```

我认为这就是它无法验证的原因。我试着做：

```
$route['auth_social/(:any)'] = "auth_social/$1"; 
```

这也不起作用。我唯一可以让它工作的时间是如果我将我的 .htaccess 更改为

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|table-images|js|robots\.txt|css|captcha)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

但后来我的网址缩短中断并且不起作用。这让我疯狂。

任何人都可以在这里看到我哪里出错了吗？

这是我的完整 .htaccess 文件

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

```
<IfModule !mod_rewrite.c>
ErrorDocument 404 /index.php
</IfModule> 
```

编辑：

这是来自服务器日志的错误：

```
 [10-Jan-2013 11:02:25 UTC] PHP Fatal error:  Uncaught OAuthException: An active access token must be used to query information about the current user.
  thrown in /Users/mycomputer/Documents/grpe/app/application/libraries/facebook/base_facebook.php on line 1058 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:55:04.953

您使用的是什么 oAuth 库？

我强烈建议使用这个 oAuth2 sparks 库：
[http ://getsparks.org/packages/oauth2/versions/HEAD/show](http://getsparks.org/packages/oauth2/versions/HEAD/show)

我已经使用它一段时间了，登录/注册完全没有任何问题。

高温高压

# c - 将 Java NIO Files.walkFileTree 访问者移植到 C，维护线程安全

> ID：14255900
> 
> 赞同：1
> 
> 时间：2013-01-10T10:38:13.243
> 
> 标签：c, filetree, directory-walk

`java.nio.file.Files.walkFileTree`我有一些与该接口一起使用的现有 Java 代码`FileVisitor`，但现在我需要将其移植到纯 C。是否有与该接口等效的 C 语言？如果没有，我可以使用哪些原语来构建一个？

我查看了 Unix`ftw`和`nftw`函数，但似乎它们不会起作用，因为回调函数没有用于提供用户变量的参数（单个 void* 参数会很好）。我的代码需要是线程安全的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:54:46.420

我已经需要为我的一个项目进行文件遍历。我还需要它在 Linux 和 Windows 上是可移植的。

我没有找到它的开源实现，最后我自己实现了它。这终于不是太多的工作。

在 Linux 端，我使用`opendir()`and`readdir()`来迭代目录条目。
在 Windows 方面，我使用`FindFirstFileA()`并`FindNextFileA()`完成了这项工作。
接下来对于每个条目，我只需调用一个已使用的已定义回调。

两种实现都不需要超过 100 行代码......所以我建议你 DIY。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:16:50.557

BSD 操作系统和 Linux 都提供了一个名为 的函数系列`fts(3)`，它们的作用与 POSIX 相同，`ftw`但没有通过回调实现控制反转。相反，范例是您“打开”一个 FS 层次结构以获取句柄，然后从中“读取”条目：

```
char *const roots[] = {root, NULL};  // fts allows for multiple roots
FTS *hier = fts_open(roots, FTS_PHYSICAL | FTS_NOSTAT, NULL);
FTSENT *entry;

while ((entry = fts_read(hier)) != NULL) {
    puts(entry->fts_path);
}
fts_close(hier); 
```

恕我直言，这比访问者模式要干净得多，但是对于您的 Java 代码的直接端口，您当然可以在`fts(3)`.

如果您的操作系统没有`fts(3)`，请查看[OpenBSD 版本`fts.c`](http://www.openbsd.org/cgi-bin/cvsweb/src/lib/libc/gen/fts.c?rev=1.44;content-type=text%2Fplain)，您应该能够将其粘贴到您的程序中，最多只需稍作修改。您还需要 header [`fts.h`](http://www.openbsd.org/cgi-bin/cvsweb/src/include/fts.h?rev=1.14;content-type=text%2Fplain)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-10T11:10:10.507

如果在 c++ 中混合是可以接受的，那么这样做有一些提升，但从未使用过它。

# javascript - 无法使用 jquery 运行服务器端脚本

> ID：14255902
> 
> 赞同：0
> 
> 时间：2013-01-10T10:38:15.263
> 
> 标签：javascript, ajax, jquery

首先，非常感谢您在这方面能给我的任何帮助！

对，我想做的是调用一个php脚本来运行服务器端，它接受一个值（这将是一封电子邮件）并将其写入一个文本文件。

这是我要运行的 .php 文件。我没有添加任何电子邮件功能，但经过数小时的尝试，我什至无法让它创建一个文本文件和目录。如果我在 IDE 中运行它，它会完美运行，它会创建脚本并在底部显示“测试我”文本。但是，当它从 jquery 调用运行时，它所做的一切都是读取文件底部的文本。这是我在 jquery 中调用它的地方：

```
$(document).ready(function()
    {
        $("#emailForm").submit(function()
        {
            alert("Beginning jquery");
            $("#div1").load("handleEmailAddresses.php");
            alert("Load called");
            //$.post("handleEmailAddresses.php");
        }); 
```

我还尝试了您可以看到已注释掉的 post 功能。没有任何效果。这是调用的php文件：

```
<html> 

<?php

 $dir = 'myDir';
 if ( !file_exists($dir) ) 
 {
    mkdir ($dir, 0777);//This just gives me r/w access to the folder
 }

 file_put_contents ($dir.'/test.txt', 'Hello File');

 ?>
Test Text
</html> 
```

请帮忙，它杀了我！非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:43:03.857

试试阿贾克斯

```
$.ajax({
      url : '/handleEmailAddresses.php',
  }); 
```

如果您还想检查：

```
 $.ajax({
        url : '/handleEmailAddresses.php',
     }).done(function() {
        console.log('completed');
     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:51:34.223

使用此脚本并尝试

**查询：**

```
$(document).ready(function()
    {
        $("#emailForm").submit(function(e)
        {
            e.preventDefault();
            alert("Beginning jquery");
           $("#div1").load("handleEmailAddresses.php", function(response, status, xhr)                    {
                 if (status == "error") 
                 {
                  var msg = "Sorry but there was an error: ";
                  alert(msg + xhr.status + " " + xhr.statusText);
                 }
                 else
                 {
                    alert("Load Compleated");
                 }
           });
        }); 
```

**PHP：**

```
 <?php

     $dir = 'myDir';
     if ( !file_exists($dir) ) 
     {
       if (!mkdir($dir, 0)) {
            echo('Failed to create folders...');
            exit;
       }
     }
 $r = file_put_contents ($dir.'/test.txt', 'Hello File');

 if ($r)
     echo "Success";
 else
    echo "Error";
  ?> 
```

# django - 我的 django python 函数运行不正确

> ID：14255903
> 
> 赞同：0
> 
> 时间：2013-01-10T10:38:21.503
> 
> 标签：django, django-templates

我目前正在开发一个电子商务网络应用程序，并决定使用**Beginning Django Ecommerce book**。我正在关注内容并以自己的方式实现它，但是我遇到了一些未运行的功能的一些问题。这是我认为问题出在*文件中的**应用程序；*1 .：*`cart app` `models.py`*

 *```
from django.db import models
from menu_items.models import Item
from smartmin.models import SmartModel
import django.db.models.options as options
options.DEFAULT_NAMES = options.DEFAULT_NAMES + ('augment_quatity','name','price','get_absolute_url','total',)

class OrderItem(SmartModel):
    order_id = models.CharField(max_length=50)
    date_added = models.DateTimeField(auto_now_add=True)
    quantity = models.IntegerField(default=0)
    item = models.ManyToManyField(Item)

    class Meta:
        db_table='order_items'

        def __unicode__(self):
            return "%s" % (self.order_id)

        def total(self):
            return self.quatity *self.item.price
        def name(self):
            return self.item.name
        def price(self):
            return self.item.price
        def get_absolute_url(self):
            return self.item.get_absolute_url()
        # incase user orders same item twice we jus add on the quantity
        def augment_quatity(self, quantity):
            self.quatity = self.quantity + int(quantity)
            self.save 
```

`orders.py`同样`app`：

```
from cart.models import OrderItem
#from cart.models import order_id
from menu_items.models import Item
from django.shortcuts import get_object_or_404
from django.http import HttpResponseRedirect
import decimal
import random

ORDER_ID_SESSION_KEY = 'order_id'

# get the current user's cart id, sets new one if blank
def _order_id(request):
    if request.session.get(ORDER_ID_SESSION_KEY,'') == '':
        request.session[ORDER_ID_SESSION_KEY] = _generate_cart_id
    return request.session[ORDER_ID_SESSION_KEY]
def _generate_cart_id():
    order_id =''
    characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890!@#$%^&*()'
    order_id_length = 100
    for y in range(order_id_length):
        order_id += characters[random.randint(0,len(characters)-1
        )]
    return order_id
# return all items from the current user's order
def get_order_items(request):
    return OrderItem.objects.filter(order_id=_order_id(request))
# add an item to order
def add_to_order(request):  
    postdata = request.POST.copy()
    #get item slug from post data, return blank if empty
#   item_slug = postdata.get('item_slug','')
    #get quantity added, return 1 if empty
    quantity = postdata.get('quantity',1)
    # fetch the item or return  missing page error_message
    i = get_object_or_404(Item,)
    # get items in order
    order_items = get_order_items(request)
    item_in_orders = False
    # check to see if item is already in cart
    for order_item in order_items:
        if order_item.item.id == i.id:
            #update the quantity if found
            order_item.augment_quantity(quantity)
    item_in_order = True
    if not item_in_order:
        # creat and save a new order item
        oi = OrderItem()
        oi.item = i
        oi.quantity = quantity
        oi.order_id = _order_id(request)
        oi.save() 
```

2.`live app` `views.py`

```
def show_order(request):
    if request.method == 'POST':
        postdata = request.POST.copy()
        if postdata['submit'] == 'Remove':
            order.remove_from_order(request)
        if postdata['submit'] == 'Update':
            order.update_order(request)
    order_items = order.get_order_items(request)
    page_title  = 'F4L order' 
    order_subtotal = order.order_subtotal(request)
    return render_to_response('public/order.html',context_instance=RequestContext(request)) 
```

功能不起作用的模板，

```
{% extends "base.html" %}
{% block content %}
{% load menu_tags %}
<div style="height:30px">
 {% order_box request %}
</div>
<table summary="Your menu order" id="menu_order">
   <caption>Your F4L Orders</caption>
   <thead>
    <tr>
     <th scope="col">Item</th>
     <th scope="col">Price</th>
     <th scope="col" class="right">Total</th>
    </tr>
   </thead>
   <tfoot>
   <tr>
    <th class="right" colspan="2">
     Order Subtotal:
    </th>
    <th class="right">
    {{order_subtotal}}<span> frw</span>
    </th>
   </tr>
   {% if order_items %}
   <tr>
    <th class="right" colspan="2">
     <a href="/url/to/checkout/">Checkout Now</a>
    </th>
   </tr>
   {% endif %}
   </tfoot>
   <tbody>
    {% if order_items %}
     {% for item in order_items %}
    <tr>
     <td>

       {{ item.name }}

     </td>
     <td>{{ item.price }}<span> frw</span></td>
     <td class="right">
     <form method="post" action="." class="order">
     <label for="quantity">Quantity:</label>
     <input type="text" name="quantity" value="{{ item.quantity }}" id="quantity" size="2" class="quantity" max_length="5" />
     <input type="hidden" name="item_id" value="{{ item.id }}" />
     </td>
     <td>
     <input type="submit" name="submit" value="update"/>
     </form>
     </td>
     <td>
     <form method="post" action="." class="order">
     <input type="hidden" name="item_id" value="{{ item.id }}" />
     </form>
     </td>
     <td>
     <form method="post" action="." class="order">
     <input type="hidden" name="item_id" value="{{ item.id}}" />
     <input type="submit" name="submit" value="Remove" />
     </form>
     </td>
     <td class="right">{{ item.total }}<span> frw</span></td>
    </tr>
     {% endfor %}
     {% else %}
    <tr>
    <td colspan="2" style="height:30px;">
     Your F4L order is empty.
    </td>
    </tr>
    {% endif %}
   </tbody>
</table>
{% endblock %} 
```

现在的问题是，上面的模板代码是用户在提交包含他/她购买的商品数量的表单后重定向到的页面，但这并没有发生。提交包含例如 10 个项目的表单后，我重定向到此页面（*在 _template_ 上方**）*，它正确加载但不返回我提交的信息。

 *我明白这很多，但我真的需要你的帮助，并且会感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:49:25.523

在 show_order 视图中，您应该将变量作为字典传递给模板：

```
...
context_dict = {'order_items': order_items, 'order_subtotal': order_subtotal}
return render_to_response('public/order.html', context_dict, context_instance=RequestContext(request)) 
```**

# jquery - Ipad Mini 中的 IOS 6 ScrollTo 错误[已测试]

> ID：14255906
> 
> 赞同：1
> 
> 时间：2013-01-10T10:38:43.487
> 
> 标签：jquery, html, ipad, ios6

我正在使用[ScrollTo](https://github.com/flesler/jquery.scrollTo)进行滚动`href`动画，但是当我在其中进行测试时，`Ipad Mini [IOS 6.0.1]`它的工作是错误的，这意味着当我有一个导航栏时，`fixed`当我单击任何链接时，它首先会转到页面顶部，然后返回到指定的特定链接。它工作正常`Ipad IOS 5.0.1`

# sql - wordpress 中的简单 SQL 查询问题

> ID：14255911
> 
> 赞同：0
> 
> 时间：2013-01-10T10:38:52.603
> 
> 标签：sql, wordpress

我有一个非常奇怪的问题。

我只想选择两个给定类别中的所有帖子。

这是我的 SQL：

```
SELECT  wp_posts.ID 
FROM wp_posts 
INNER JOIN wp_term_relationships ON wp_posts.ID = wp_term_relationships.object_id
WHERE  wp_term_relationships.term_taxonomy_id  = 83  
   AND   wp_term_relationships.term_taxonomy_id  = 84 
```

这应该返回一个结果，但它不返回任何内容。

如果我注释掉：

```
*wp_term_relationships.term_taxonomy_id  = 83* 
```

我正在寻找的帖子被退回。

如果我注释掉：

```
*wp_term_relationships.term_taxonomy_id  = 84* 
```

再次，帖子被退回。

那么，为什么当这两个条件都包含时，什么都不返回呢？

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:45:54.780

`wp_term_relationships.term_taxonomy_id`不可能`=83`和在`=84`同一时间。

试试这个：

```
SELECT  
  wp_posts.ID 
FROM wp_posts 
INNER JOIN wp_term_relationships ON wp_posts.ID = wp_term_relationships.object_id
WHERE  wp_term_relationships.term_taxonomy_id IN (83 , 48); 
```

或者

```
...
WHERE wp_term_relationships.term_taxonomy_id  = 83  
   OR wp_term_relationships.term_taxonomy_id  = 84; 
```

但是，我认为您正在寻找那些同时具有`term_taxonomy_id`'id 83、84 的帖子，在这种情况下，您正在寻找[*关系部门*](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)；这是一种方法：

```
SELECT  
  wp_posts.ID 
FROM wp_posts 
INNER JOIN
(
   SELECT *
   FROM wp_term_relationships
   WHERE object_id IN (SELECT object_id
                       FROM  wp_term_relationships
                       WHERE term_taxonomy_id IN (83 , 48);
                       GROUP BY objecT_id
                       HAVING COUNT(term_taxonomy_id ) = 2)
)  t ON wp_posts.ID = t.object_id; 
```

**或：**直接，不带`JOIN`. 像这样：

```
SELECT  
  wp_posts.ID 
FROM wp_posts 
WHERE ID IN
(
    SELECT object_id
    FROM  wp_term_relationships
    WHERE term_taxonomy_id IN (83 , 48);
    GROUP BY objecT_id
    HAVING COUNT(term_taxonomy_id ) = 2
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:47:15.270

如果您想返回所有`term_taxonomy_id`与它们相关联的帖子，您可以使用：

```
SELECT  p.ID 
FROM wp_posts p
INNER JOIN wp_term_relationships r
  ON p.ID = r.object_id
WHERE  r.term_taxonomy_id IN (83, 84)
GROUP BY p.ID 
HAVING count(distinct r.term_taxonomy_id) =2 
```

这将返回具有两个分类术语的所有记录。

您的查询将不起作用，因为`term_taxonomy_id`不能同时具有两个值。您可以将查询更改为使用`OR`，`AND`也可以使用我提供的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T10:46:16.047

如果您希望结果显示属于这两个类别的帖子，则需要获取两个结果并进行比较：

```
SELECT a.ID
FROM   (
        SELECT  wp_posts.ID 
        FROM wp_posts 
        INNER JOIN wp_term_relationships ON wp_posts.ID = wp_term_relationships.object_id
        WHERE  wp_term_relationships.term_taxonomy_id  = 83
        ) a
        INNER JOIN (
                    SELECT  wp_posts.ID 
                    FROM wp_posts 
                    INNER JOIN wp_term_relationships ON wp_posts.ID = wp_term_relationships.object_id
                    WHERE wp_term_relationships.term_taxonomy_id  = 84
                    ) b
            ON a.ID = b.ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T10:46:32.077

我假设您需要使用“OR”而不是“AND”。我的猜测是，您不是在寻找 taxonomy_id 为 83 和 84 的帖子，而是在寻找两者之一的帖子？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T10:46:39.303

您的查询说：

```
WHERE  wp_term_relationships.term_taxonomy_id  = 83  
AND    wp_term_relationships.term_taxonomy_id  = 84 
```

这不会返回任何内容，我怀疑您应该将 AND 更改为 OR

# c# - MVC3 正则表达式属性 - 我如何拒绝括号

> ID：14255921
> 
> 赞同：0
> 
> 时间：2013-01-10T10:39:16.310
> 
> 标签：c#, regex, asp.net-mvc, attributes, brackets

我正在使用 MVC3，需要为`RegularExpression`模型中的属性创建一个属性，以验证用户没有输入括号。有人知道这个正则表达式字符串会是什么样子吗？

这就是我现在所拥有的。

```
[Required]
[RegularExpression("--enter regex here--", ErrorMessage = "You cannot use '[' or ']' on the title ")]
public string Title { get; set; } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T10:43:37.173

您可以对不想要的字符使用否定字符类。

请注意，方括号在正则表达式中被认为是“特殊的”，因此您需要像这样对它们进行转义：

```
[Required]
[RegularExpression(@"^[^\[\]]+$", ErrorMessage = "You cannot use '[' or ']' on the title ")]
public string Title { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:41:45.430

以下应该做：

```
[^\[\]]* 
```

这是一个字符类，它将匹配任何不是`[`or的字符`]`。请注意，*在*字符类`[]`中进行了转义。

 *在属性中，这将是：

```
[RegularExpression(@"[^\[\]]*", 
                   ErrorMessage = "You cannot use '[' or ']' on the title ")] 
```*

# javascript - 指令内部模板中的 ng-click 未提供该功能

> ID：14255929
> 
> 赞同：9
> 
> 时间：2013-01-10T10:39:26.793
> 
> 标签：javascript, angularjs

`ng-click`不提供警报。单击指令的内部模板时，不显示警告框。

小提琴链接在这里：http: [//jsfiddle.net/NNDhX/](http://jsfiddle.net/NNDhX/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-10T11:37:02.387

您的指令有自己的**隔离范围**。所以函数'hi'应该在指令的范围内。如果你想传递你的控制器的功能，你应该做绑定，比如`scope: { ..., hi: '&' }`然后`<you-directive hi='hi' ..>`。这是有关此文档的链接：[Understanding Transclusion and Scopes](http://docs.angularjs.org/guide/directive)。

因此，只需将其添加到链接功能中就足够了：

```
 link: function(scope, element, attrs) {
  scope.hi = function() { alert("hi"); } 
```

这是更新的小提琴：http: [//jsfiddle.net/GwBAh/](http://jsfiddle.net/GwBAh/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-19T11:42:40.970

我不知道这是否是最好的方法，但您可以在指令中使用 $parent 来访问父范围。

```
<a ng-click="$parent.hi();">parent</a> 
```

这是完整小提琴示例的链接：http: [//jsfiddle.net/EKDse/](http://jsfiddle.net/EKDse/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T12:11:29.440

隔离作用域的整个想法正是避免在父<->子作用域之间“共享”事物，以某种方式保护它们不被其他指令/控制器暴露和（无意地）改变。

**如果您真的想避免隔离范围并共享父范围**，请尝试以下操作：

首先删除指令的范围定义（如下注释）：

```
transclude: true,
/*scope: { title:'@zippyTitle' },*/ 
```

然后将指令元素中的属性 ( `attrs`) 放在指令的范围内：

```
scope.attrs = attrs; 
```

注意：通过这样做，该`attrs`属性也将在父 (Ctrl3) 范围内可用。

最后根据`scope.attrs`

```
 template: '<div>' +
              '<div class="title">{{attrs.zippyTitle}}</div>' +
              '<div class="body" ng-transclude></div>' +
                        '<a ng-click="hi();">hi</a>' +
            '</div>', 
```

**jsFiddle**：http: [//jsfiddle.net/NNDhX/1/](http://jsfiddle.net/NNDhX/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-05T08:44:59.417

指令内的控制器函数必须在转置块内调用。在指令模板中使用控制器方法会使您的指令依赖于控制器，并且由于其依赖关系（指令外部控制器）而成为不受欢迎的设计。

在您的示例中，将这段`<a>`代码转换为嵌入块。它使您的指令更加孤立并解决了问题：

```
 <div class="zippy" zippy-title="Details: {{title}}...">
  {{text}}
  <a ng-click="hi();">hi</a>
</div> 
```

# javascript - 在 swiffyobject 中调用 flash ExternalInterface

> ID：14255937
> 
> 赞同：1
> 
> 时间：2013-01-10T10:39:49.273
> 
> 标签：javascript, flash, externalinterface, google-swiffy

我有一个使用 ExternalInterface 与 javascript 通信的闪存。我已经使用 swiffy 将其转换为 HTML5。如何使用 javascript 调用我在 flash 中创建的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-10T07:31:26.490

以下是仍在寻找答案的更新：截至目前，Swiffy 5.3 已经支持 ExternalInterface。我可以使用以下方法从 AS3 进行 javascript 调用：

```
ExternalInterface.call("jsFunction", args); 
```

在 js 中，你只需要声明 "jsFunction" ：

```
<script>
    function jsFunction(args) {
       alert("Call from AS3");
    }
</script> 
```

对于反方向，通过 Swiffy 调用 JS 到 AS3 可以在 AS3 中使用这个实现：

```
ExternalInterface.addCallback("nameForJS", closeFunction);
function closeFunction(s:String) {
    trace("Received " + s + " from js");
} 
```

在 JS 中，您需要将 DOM el 弄得紧到 swiffy，然后从那里执行函数：

```
document.getElementById("swiffycontainer").nameForJS(); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T11:17:27.193

根据 swiffy 文档，swiffy 的 AS 2.0 或 AS 3.0 不支持 ExternalInterface。

请参阅：

*   [动作脚本 2.0 支持](https://www.google.com/doubleclick/studio/swiffy/actionscript2.html)

*   [动作脚本 3.0 支持](https://www.google.com/doubleclick/studio/swiffy/actionscript3.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T19:18:59.517

尽管如此，还是很容易从 AS3-to-HTML5-via-Swiffy 调用 JavaScript 函数：

```
var urlRequest : URLRequest = new URLRequest( "javascript:doRoo();" );
navigateToURL( urlRequest,'_self' ); 
```

从 JavaScript 调用在 AS3 pre-swiffy 中声明的函数的最佳方法是什么 - 基本上是相反的？

# python - python-ajax 阻止查看源响应数据

> ID：14255939
> 
> 赞同：0
> 
> 时间：2013-01-10T10:39:50.693
> 
> 标签：python, ajax, flask

我正在使用烧瓶框架编写 python。当我从浏览器中使用“view-source”时，来自服务器的数据响应不断出现。

html:

```
$('li.channel, div.channel-in-top').on('click', function(e){
  $.getJSON($(this).find('a').attr('href'), function(data){
    ...
  }
} 
```

响应的服务器代码：

```
if request.headers.get('X-Requested-With') == 'XMLHttpRequest':
  return current_app.response_class(json.dumps(c), mimetype='application/json; charset=UTF-8') 
```

c 是一些数据的数组。我试过只返回 c, jsonify(c) 每次我从浏览器（chrome、firefox）使用视图源时，它都会显示返回的整个数据 c。

我访问过一些使用 ajax（不是 python thou）的网站，并看到在触发 ajax 之前或之后，view-source 可以像往常一样看到 html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:42:20.497

我才发现真正的问题。是关于 html5 的 history.pushState flask-Python 本身的 ajax 做的很好

# android - 使用最新 NDK r8d 的 Eclipse 中本机代码中的语法错误通知

> ID：14255949
> 
> 赞同：2
> 
> 时间：2013-01-10T10:40:07.717
> 
> 标签：android, android-ndk

在 Eclipse 编辑器中打开 C++ 源文件时，我可以在使用 ndk-r8d 时看到语法错误通知。它们不是真正的错误，但根据 Internet 教程需要额外的 CDT 配置。

为此，我打开了项目属性 -> C/C++ 常规 -> 路径和符号，并为 ndk r8d 添加了 C++ 的包含路径。

但仍然存在错误通知。请提供一些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:47:04.887

我的经验是 Eclipse 经常为 c++ 项目提供错误的错误，即使它编译正确。这是因为运行时 c++ 检查器并不完美。

我的解决方案是关闭 Project Properties -> C/C++ General -> Code Analysis 中的所有检查。这样，没有实时反馈，但显示的所有错误至少是*真实的*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-07T19:47:18.407

也许是暂时的修复。

1.  项目 -> 属性 -> C/C++ 常规 -> 预处理器包括路径、宏等 -> 提供程序
2.  检查“CDT GCC Build Output Parser”（您可以检查其他）
3.  尝试清理并重建。

当我选中“使用项目之间共享的全局提供程序”时，我得到了可靠的标头解析结果。

# sql-server - 数据库迁移到 TFS - 循环依赖

> ID：14255951
> 
> 赞同：3
> 
> 时间：2013-01-10T10:40:14.607
> 
> 标签：sql-server, architecture, tfs

**我们有什么**

我们所有的内部产品都有 7 个数据库。由于紧密集成和缺乏架构，它们在存储过程和函数中彼此之间存在大量循环依赖。

我们需要将所有这些丛林迁移到 TFS 2012。

**问题**

将数据库导入数据库项目后，我们得到错误 -**不允许循环依赖**

有没有办法在不重写大量 SP 的情况下将此类数据库导入 TFS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:55:34.243

Visual Studio 允许复合项目和部分项目。2010 年的一些文档在[这里](http://msdn.microsoft.com/en-gb/library/dd193405%28v=vs.100%29.aspx)。部分项目确实允许循环引用，因此应该为您提供解决方案。

# php - php preg_match 和 ereg 语法区别

> ID：14255953
> 
> 赞同：1
> 
> 时间：2013-01-10T10:40:18.133
> 
> 标签：php, regex, preg-match, deprecated, ereg

我发现语法 of`preg_match()`和 deprecated`ereg()`是不同的。
例如：

我以为

```
preg_match('/^<div>(.*)</div>$/', $content); 
```

意思是一样的

```
ereg('^<div>(.*)</div>$', $content); 
```

但是我错了。`preg_match()`不像 enter 那样包含特殊字符`ereg()`。

所以我开始使用这种语法：

```
preg_match('/^<div>([^<]*)</div>$/', $content); 
```

但这与我所需要的并不完全相同。

谁能建议我如何在不使用已弃用功能的情况下解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:46:37.150

对于解析 HTML，我建议阅读[这个问题](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php)并选择一个内置的 PHP 扩展。

如果出于某种原因您*需要*或*想要*使用 RegEx 来执行此操作，您应该知道：

*   `preg_match()`是一个**贪婪**的小虫子，它会尝试吃掉你的**任何东西** `(.*)`，直到它生病（这意味着它达到了递归或回溯限制）。您可以使用**`U`**修饰符¹更改它。

*   引擎预计只输入一条*线*。您可以使用**`m`**or**`s`**修饰符¹更改它。

*   使用你的 ' **not a < character** ' `([^<]*)`hack 做得很好，因为它强制引擎在第一个**<**字符处停止，但**只有**在`<div>`里面不包含其他标签时才会起作用！

ref: ¹ [PCRE 模式修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)

# regex - 如何从 JSON 响应中提取 2 个字符之间的所有内容？

> ID：14255956
> 
> 赞同：2
> 
> 时间：2013-01-10T10:40:20.420
> 
> 标签：regex, json, jmeter, extraction

我正在使用 Jmeter 2.8 中的正则表达式从 JSON 响应中提取一些值。

响应是这样的：

```
{
    "key": "prod",
    "id": "p2301d",
    "objects": [{
            "id": "102955",
            "key": "member",
            ...
         }], 
    "features":"product_features"
} 
```

我正在尝试使用一个正则表达式来获取除文本之外的所有内容`[{....}]`。我试过这个，`"key":([^\[\{.*\}\],].+?)`但我总是得到其他值`[{...}]`（在这个例子中：*member*）

你有什么线索吗？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:33:07.807

假设您可以尝试为 jmeter使用自定义[JSON](https://github.com/ATLANTBH/jmeter-components/)工具（JSON 路径断言、JSON 路径提取器、JSON 格式化程序）——在这种情况下为**JSON 路径提取器。**

1.  将 ATLANTBH jmeter-components 添加到 jmeter：[https](https://github.com/ATLANTBH/jmeter-components#installation-instructions) ://github.com/ATLANTBH/jmeter-components#installation-instructions 。
2.  将 JSON 路径提取器（来自 Post Processors 组件列表）作为子级添加到返回要处理的 json 响应的采样器：

    ![enter image description here](../Images/dab2e237f98e21ac307f3250ff7bcc89.png)

    （我使用 Dummy Sampler 来模拟您的响应，您将拥有原始采样器）

    ![enter image description here](../Images/76e58d993df014f53d8b5cbc3ac9c132.png)

    添加与您要提取的值一样多的提取器（在本例中为 3 个：“key”、“id”、“features”）。

3.  配置每个提取器：定义变量名来存储提取的值和[JSONPath 查询](http://code.google.com/p/json-path/)来提取相应的值：

    *   for "key": `$.key`
    *   for "id": `$.id`
    *   for "features": `$.features`
4.  Further in script your can refer extracted values using jmeter variables (variable name pointed in JSON Path Extractor settings in "Name" field): e.g. `${jsonKey}`, `${jsonID}`, `${$.features}`.

    ![enter image description here](../Images/e47a27b59ca074feea91529a7f2dd5ad.png)

Perhaps it may be not the most optimal way but it works.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T22:47:19.417

My solution for my problem was to turn the JSON into an object so that i can extract just the value that i want, and not the values in the `{...}`.

Here you can see my code:

```
var JSON={"itemType":"prod","id":"p2301d","version":"10","tags":[{"itemType":"member","id":"p2301e"},{"itemType":"other","id":"prod10450"}],"multiPrice":null,"prices":null};

//Transformation into an object: 
obj = eval(JSON );

//write in the Jmeter variable "itemtype", the content of obj.itemType:prod
vars.put("itemtype", obj.itemType); 
```

For more information: [http://www.havecomputerwillcode.com/blog/?p=500](http://www.havecomputerwillcode.com/blog/?p=500).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T11:46:35.543

通用解决方案：[DEMO](http://regex101.com/r/nP4mP2)

正则表达式：`(\[{\n\s*(?:\s*"\w+"\s*:\s*[^,]+,)+\n\s*}\])`

解释，您没有正确使用必须的空格，在每行之前有空格并且您必须在匹配之前使用它们，这就是为什么您的正则表达式不能真正起作用的原因。您不需要对`{`字符进行转义。

# ios - FB like/Twitter 关注/Youtube 订阅的 iOS 游戏币

> ID：14255959
> 
> 赞同：0
> 
> 时间：2013-01-10T10:40:27.070
> 
> 标签：ios, facebook, twitter, cocos2d-iphone, youtube

我们正在创建一个游戏，并希望让我们的玩家喜欢/订阅/关注我们的 FB/YT/Twitter 页面，我们会为此给予他们奖励（游戏内硬币）。

我检查过的大多数游戏都会在用户单击“喜欢”按钮后立即给予奖励（即使他们后来实际上并不喜欢显示的页面）。

所以我想知道是否有可能检测到实际的喜欢/订阅/关注，并且只有在收到确认后才奖励用户？

是否值得增加麻烦？

任何信息表示赞赏！

BR，韩国

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:09:26.830

使用完成处理程序。

脸书 SDK：

```
+ (FBRequestConnection*)startWithGraphPath:(NSString*)graphPath
                                parameters:(NSDictionary*)parameters
                                HTTPMethod:(NSString*)HTTPMethod
                         completionHandler:(FBRequestHandler)handler; 
```

并且`FBRequestHandler`是

```
typedef void (^FBRequestHandler)(FBRequestConnection *connection, 
                                 id result,
                                 NSError *error); 
```

如果 error 不为零，那么 request 显然没有成功。您还可以检查它`result`是否具有预期值。

iOS6的Social框架（处理块参数为NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error）：

```
- (void)performRequestWithHandler:(SLRequestHandler)handler; 
```

iOS5 的 Twitter 框架：

```
- (void)performRequestWithHandler:(TWRequestHandler)handler; 
```

在 Twitter 的情况下，您应该检查返回的 NSHTTPURLResponse 的状态代码（200 表示“成功”）。

# erlang - Erlang 一个特殊值的双引号

> ID：14255965
> 
> 赞同：-2
> 
> 时间：2013-01-10T10:40:48.117
> 
> 标签：erlang, double-quotes

当我运行我的程序时，发生了一个错误，当我查看日志时，出现这个 {k,3108,"s"},{k,3109,"}，如何将一个双引号作为变量的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:24:18.183

在文本字体中，很难确切地看到您在日志中实际得到的内容，但我猜它是：

```
{k,3108,"s"},{k,3109,''} 
```

第一个真正的双引号构成一个 Erlang*字符串*（它实际上是一个整数列表），而第二个实际上是一对，`'`它是*atom*的引号字符。在这种情况下，允许使用具有空名称的原子。这就是@shk 所指出的。

但是如果没有您提供的更多信息，很难给出正确的答案。

# android - 在打电话时改变声音android

> ID：14255967
> 
> 赞同：11
> 
> 时间：2013-01-10T10:40:53.270
> 
> 标签：android, voice, phone-call

我想制作一个允许用户在通话期间更改语音的 android 应用程序。例如：你是一个男人，你可以在打电话时把声音变成女人或机器人。这就像一个有趣的恶作剧。

我在android的API和google上工作了几天，但仍然不知道。有人说是不可能的，但我在 google play 上看到了一些应用程序可以做到： [https](https://play.google.com/store/apps/details?id=com.gridmob.android.funnycall) ://play.google.com/store/apps/details?id=com.gridmob.android.funnycall 所以我认为有一些方法可以做到那。

我考虑使用 AudioTracker 录制和播放，但我还有 2 个问题：1\. 我无法将电话中的声音静音，所以手机只在处理后播放我的声音 2\. 录制和处理会产生很长的延迟（慢实时)

任何人都可以为此分享一些解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-26T14:36:07.383

您链接的应用程序不会改变电话上的声音：它使用 SIP（​​或类似的）通过作者的服务器拨打电话，并且声音改变发生在那里。这就是为什么您在付费之前只能获得少量的免费使用时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-04T00:42:43.360

是的，它使用 sip 服务器来执行此过程。您实际上无法在手机上创建执行此操作的应用程序的原因有两个。首先，手机的声音处理被锁定。您无法解锁它，因为它是通过硬件而非软件严格设计的。个人电脑可以做到这一点，因为它使用标准声卡，软件可以在其中修改其频率。第二件事是手机制造商需要以标准格式设计他们的手机。有些法律迫使这些公司无法进行任何语音变形。在任何电话网络上冒充他人是违法的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-15T15:49:57.997

**艰辛的道路**

您获得输入语音，使用语音识别来检测单词，然后使用语音到文本以及所需语音作为输出。

**不那么难的方法**

声音处理：改变频率、振幅等。

# html - 由于 z-index，href 标记不起作用

> ID：14255969
> 
> 赞同：1
> 
> 时间：2013-01-10T10:40:58.287
> 
> 标签：html

我有一个带有“标题”类的 div，它的 z-index 值为 1。在该 div 之后，我在锚标签中有一个用于徽标的 div。但问题是我在“徽标”上没有任何指针光标。如果我删除标题的 z-index，我可以点击它。我有 .header 如下：

```
.header{
  z-index:1;
} 
```

这是我得到的结果：

[我得到的输出...](http://jsfiddle.net/chetana/pThNz/3/)

只需删除我为 z-index 给出的 css 部分中的注释。您将能够再次单击该徽标。

有没有办法让锚标签在“标题”上使用 z-index 值作为 1？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-27T16:06:50.810

只需将 pointer-events:none 添加到阻止链接单击的父级（因此到标题）。

这是您更新的代码： [https ://jsfiddle.net/pThNz/31/](https://jsfiddle.net/pThNz/31/)

```
.header {
    pointer-events:none
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T11:16:00.633

你为什么要绝对定位？如果你想让你的代码工作，你需要将你的标签相对或绝对定位，并给它一个更高的 z-index：

[http://jsfiddle.net/pThNz/11/](http://jsfiddle.net/pThNz/11/)

```
a {position:relative; z-index:2;} 
```

否则，您可以尝试这样的方法来获得更好的代码；阻止您稍后进入 z-index 噩梦；并停止在各处创建空 div：

[http://jsfiddle.net/pThNz/10/](http://jsfiddle.net/pThNz/10/)

```
<div class="header">
  <a href="http://therepublik.ambibytes.com/" title="Home">
    <span class="leftCorners">
      <span class="rightCorners">
        <span class="text">The fuzzy Republik</span>
      </span>
    </span>
  </a>
</div> 
```

**CSS：**

```
.header a {margin:20px; font-size: 20px; color: black; text-transform: uppercase; text-decoration:none; text-align:center; }
.header a,
.header span {display:block; width:283px; height:100px;}
.leftCorners {background:url(http://therepublik.ambibytes.com/wp-content/themes/republik/imgs/left_corners.gif) left top no-repeat;}
.rightCorners {background:url(http://therepublik.ambibytes.com/wp-content/themes/republik/imgs/right_corners.gif) right top no-repeat;}
.header .text {padding-top:45px; height:50px;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T10:48:33.177

z-index 不影响不是位置的元素：绝对、相对或静态

```
.header{
  z-index:1;
  position:relative;
} 
```

# batch-file - 批量 findstr 查找数字

> ID：14255970
> 
> 赞同：2
> 
> 时间：2013-01-10T10:41:00.550
> 
> 标签：batch-file, findstr

我正在尝试从`svn update`命令输出中获取修订号。在文件中`tmpFile.txt`我有字符串`At revision 58998.`

我已经运行了以下命令：

```
findstr /r "\<[0-9][0-9]*\>" "tmpFile.txt" 
```

我有

```
At revision 58998. 
```

此外，运行

```
findstr /r /o "\<[0-9][0-9]*\>" "tmpFile.txt" 
```

我明白了

```
0:At revision 58998. 
```

发生了什么事，我怎样才能只得到号码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T12:24:09.967

FINDSTR 打印出匹配的整行。它不能只提取该行的匹配部分。

您可以使用 FOR /F 解析输出并仅获取数字。

```
for /f "tokens=3 delims=. " %%A in (
  'findstr /rc:"At revision [0-9][0-9]*\." "tmpFile.txt"'
) do echo %%A 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T10:50:22.043

不是`findstr`解决方案，但它有效:)

```
setlocal enabledelayedexpansion
for /f "tokens=3" %%a in (tmpFile.txt) do (
set num=%%a
set num=!num:.=!
)
echo !num! 
```

这也`.`将从最后删除。

如果您不介意`.`使用

```
for /f "tokens=3" %%a in (tmpFile.txt) do echo %%a 
```

或用于 cmd 行（无批处理）

```
for /f "tokens=3" %a in (tmpFile.txt) do echo %a 
```

# javascript - knockoutjs 数据保存 UI 问题

> ID：14255971
> 
> 赞同：0
> 
> 时间：2013-01-10T10:41:00.667
> 
> 标签：javascript, jquery, data-binding, knockout.js, visibility

在我的网络应用程序中，当我更新一些数据时，我需要在网页中显示一些加载旋转 gif。这是我的代码。

这是我的html代码

```
<img src="../../../../Content/images/submit-gif.gif" class="hidegif" data-bind="visible: isWaiting"/>
<button data-bind="click: createNew">Save</button> 
```

在我的 knockoutjs 模型中，我有这个

```
self.isWaiting = ko.observable(false);

self.createNew = function () {
            this.isWaiting(true);
                        $.getJSON("/Admin/Material/GetFolders", function (allData) {
                            this.isWaiting(true);
                            var mappedFolders = $.map(allData, function (item) { return new Folder(item); });
                            self.folders(mappedFolders);
                            this.isWaiting(false);
                        }).success(function () { this.isWaiting(false); }).error(function () { }).complete(function () { this.isWaiting(false); }); ;
        }; 
```

我有一个名为 isWaiting 的属性。在调用服务器之前，我将其设置为 true。在完成和连续方法中，我将其设置回 false。因此，基于此，我的纺车应该出现和消失。

但这不起作用。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:44:56.033

`this`在`createNew`and`callback`函数中将有另一个上下文。您应该使用`self`而不是`this`访问视图模型的属性：

```
self.createNew = function () {
    self.isWaiting(true);
    $.getJSON("/Admin/Material/GetFolders", function (allData) {
        self.isWaiting(true);
        var mappedFolders = $.map(allData, function (item) { return new Folder(item); });
        self.folders(mappedFolders);
        self.isWaiting(false);
    }).success(function () { 
        self.isWaiting(false); 
    }).error(function () {})
    .complete(function () {   
        self.isWaiting(false); 
    }); 
}; 
```

# python - 不可能的“PyDict_DelItem”的原因

> ID：14255975
> 
> 赞同：0
> 
> 时间：2013-01-10T10:41:15.600
> 
> 标签：python, c, api

我想知道 Python C-API 函数的 -1 返回值的可能原因是什么`PyDict_DelItem`。

我确定字典中存在键和值，但不明白为什么有时我会得到 -1 返回值。我没有找到有关可能原因的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:53:37.713

从[源代码](http://hg.python.org/cpython/file/tip/Objects/dictobject.c#l820)：

*   第一个参数不是 dict （`PyDict_Check`测试失败）： raises `SystemError`。
*   密钥不可散列：可能引发`NotImplemented`或其他异常，取决于确切的`__hash__`或`PyObject_Hash`钩子实现。
*   在字典中找不到密钥： raises `KeyError`。

在任何情况下，您都需要检查当 -1 返回时[是否设置了异常。](http://docs.python.org/2/c-api/exceptions.html#PyErr_Occurred)`PyDict_DelItem`

# selenium - rails +capybara +selenium 无法打开外部网址

> ID：14255978
> 
> 赞同：1
> 
> 时间：2013-01-10T10:41:16.843
> 
> 标签：selenium, cucumber, capybara

在 Rails 项目中，我添加了一个功能文件和步骤定义尝试使用 capybara+selenium 加载外部 url，但它不能工作？它没有任何浏览器加载行为，并且从控制台，它没有请求外部 url`'http://baidu.com'`但是`'http://localhost:3000'`为什么，如何检查我，非常感谢！

```
**env.rb**
require 'cucumber/rails' 
require 'capybara/rails' 
require 'capybara/cucumber' 
require 'selenium/client'
Capybara.current_driver = :selenium 
Capybara.default_selector = :css

**setp_definition:**
When /^i visit baidu$/ do
  visit('http://www.baidu.com/')

end

Then /^you should see Baidu$/ do
  page.should have_content('Baidu')
end

****the infor on the console:**** 
```

[31m 预计在“浏览文档 Rails Guides Rails API Ruby 核心 Ruby 标准库 欢迎加入您正在使用 Ruby on Rails！关于您的应用程序的环境在这里开始使用”中的文本“百度” rolling: 使用 rails generate 创建你的模型和控制器 要查看所有可用选项，不带参数运行它。设置默认路由并删除 public/index.html 路由在 config/routes.rb 中设置。创建你的数据库运行 rake db:create 来创建你的数据库。如果你没有使用 SQLite（默认），用你的用户名和密码编辑 config/database.yml。**(RSpec::Expectations::ExpectationNotMetError)[0m** .

# ruby-on-rails - 我应该在哪里存储在同一个控制器中通用的变量？

> ID：14255983
> 
> 赞同：0
> 
> 时间：2013-01-10T10:41:29.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3

现在我正在这样做。这应该是正常的吗？
或者还有其他方法可以以另一种方式做到这一点，哪种方式更受欢迎？

**users_controller.rb**

```
before_filter :set_variable

def set_variable
    @number_of_records_to_display = 10  
    @number_of_tags_to_display = 10 
end

def index
...
        @users = User.find_by_username(params[:id]).all_following(order: 'updated_at DESC')
        @users = Kaminari.paginate_array(@users).page(params[:page]).per(@number_of_records_to_display)
        @tags = User.tag_counts_on(:tags, :limit => @number_of_tags_to_display, :order => "id desc")
...
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:44:37.727

您所做的是正确且适当的，因为您可能仅用于某些操作而不是全部，因此您可以将 only 子句与 before_filter 一起使用

before_filter your_method，仅：[:show, :index]

但您也可以使用初始化程序，或在环境文件中定义常量。如果您需要代码或更多帮助，请告诉我。

如果使用初始化器，您可以在一个文件中定义常量，比如 constants.rb 并将其放在 config/initializers 文件夹中，在该文件中只有 PAGE_SIZE = 10 TAG_COUNT = 10，

一旦您启动应用程序，此常量将在您的应用程序中随处可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T10:45:47.623

无需定义方法，可以定义为控制器的常量

```
NUMBER_OF_RECORD_DISPLAY = 10
NUMBER_OF_TAGS_DISPLAY = 10

def index
...
        @users = User.find_by_username(params[:id]).all_following(order: 'updated_at DESC')
        @users = Kaminari.paginate_array(@users).page(params[:page]).per(NUMBER_OF_RECORD_DISPLAY)
        @tags = User.tag_counts_on(:tags, :limit => NUMBER_OF_TAGS_DISPLAY, :order => "id desc")
...
end 
```

# java - 如何在代码中编写 'android:configChanges="keyboardHidden"'？

> ID：14255994
> 
> 赞同：0
> 
> 时间：2013-01-10T10:42:36.747
> 
> 标签：java, android, xml

我如何使用 Java 代码而不是 XML 来做到这一点？谢谢

`android:configChanges="keyboardHidden"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:18:53.183

简短的回答：你不能。

长答案：不可能开箱即用，我想你可以反汇编Activity类并研究代码，然后在子类中重写它，但我相信你会遇到比你解决的更多的麻烦。

# excel - Excel Autocomplete/lookup that I can edit

> ID：14255998
> 
> 赞同：0
> 
> 时间：2013-01-10T10:42:44.307
> 
> 标签：excel

I have a system where I enter a code in one cell and in the next cell the corresponding text appears, using a lookup table.

Cell 1: I put "W1" Cell 2: "Make sure that both your opening and ending are interesting and engaging." appears automatically.

Of course, I can't then edit the text. If I try, I find I'm editing the lookup formula.

What I'm really trying to do: I'm a teacher, the codes are target codes and the text is the actual advice to the pupil. We have a standard system of targets, but we tend to customise the text in different ways according to the pupil.

Am I doing this the most sensible way? Is there a workaround?

Many thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:15:41.343

Perhaps it's not you're looking for, but try the following:

1.  Put all grades in the column 1 (corresponds to your cell 1).
2.  Apply Lookup formula and get default answers - this for the column 2.
3.  Now copy entire column 2 and **paste special it** as `values` to the same place.

After the above you'll get default grades as TEXT ready for your editing.

Please respond in comments in case you have some more not obvious (from the initial request) limitations.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:34:19.223

This requires, as far as I understand it, VBA. Thanks to those below for helping me figure that out.

The answer is here:

[VBA Lookup and insert on cell change](https://stackoverflow.com/questions/14261549/vba-lookup-and-insert-on-cell-change)

# jquery - 防止图像重新排列

> ID：14255999
> 
> 赞同：0
> 
> 时间：2013-01-10T10:42:46.973
> 
> 标签：jquery

我有一个由 4 个图像组成的网格，如下所示：

![在此处输入图像描述](../Images/49e6c947d7b0c548e80495e4395f282f.png)

`.overlay-not-interested`将鼠标悬停在每个图像上都有一个取消按钮 ( )，单击该按钮将用新的 ajax 获取的图像替换该图像。jquery 是这样的：

```
$('.overlay-not-interested').on("click", function(){
    var movie=$(this).closest('.movie');
    movie.fadeOut(500, function(){
        $.get('reco_product_stream.jsp?type=replace', function(data) {
            var $a = $(data).find('a'); 
            movie.children('a').replaceWith($a);
            movie.fadeIn(500);
        });             
    }); 
}); 
```

问题是当图像淡出时，网格会在新图像出现之前突然重新排列一毫秒（即 3rs 到第 2 位，第 4 到第 3 位）。虽然在获取后它很好，但我想防止这种生涩的重新排列发生。

网格的 HTML 是这样的：

```
<div id="reco" class="span4">
    <div class="viewport">
        <ul class="overview">
            <li class="movie-group">
                <span class="movie"><a title="Sin city" class="movie-link"><img src="images/1.jpg" /></a></span>
                <span class="movie"><a title="Annie Hall" class="movie-link"><img src="images/2.jpg" /></a></span>
                <span class="movie"><a title="Madagascar 3" class="movie-link"><img src="images/3.jpg" /></a></span>
                <span class="movie"><a title="As Good As It Gets" class="movie-link"><img src="images/4.jpg" /></a></span>
            </li>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:46:34.967

### 而不是`fade`使用`opacity`动画。

```
$('.overlay-not-interested').on("click", function(){
    var movie=$(this).closest('.movie');
    movie.animate({
           opacity: 0
        }, 500, function(){
        $.get('reco_product_stream.jsp?type=replace', function(data) {
            var $a = $(data).find('a'); 
            movie.children('a').replaceWith($a);
            movie.animate({
                opacity: 1
            }, 500);
        });             
    }); 
}); 
```

此方法将等到图像加载完毕，然后才会显示出来。AJAX 兼容。`;)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:46:25.737

将包含元素的尺寸设置为电影封面的大小，并且只替换其内容。这样，当你替换它的孩子时，就不会有回流。