# StackOverflow 问答 13795000-13795999

# javascript - 使用 window.open() 附加事件

> ID：13795000
> 
> 赞同：0
> 
> 时间：2012-12-10T04:26:40.587
> 
> 标签：javascript, jquery

我正在使用 codeigniter - mysql 开发一个计费系统。我想使用`window.open()`JavaScript 打印发票。我的代码如下

```
$(document).ready(function() 
{

function invoice()
{
    var wind = window.open('','_blank','width=700,height=700,scrollbars=yes,status=yes');

    var html = '<input type="button" id="submit_button" value="Submit"/>';
    $(wind.document.body).html(html);
}

$('#print_invoice').click(invoice);
}); 
```

我想在输入按钮中附加一个函数`id="submit_button"`来将发票保存在数据库中。

谁能说我该怎么做？

# javascript - 在 DOM 中更新图像的最有效方法是什么？

> ID：13795003
> 
> 赞同：3
> 
> 时间：2012-12-10T04:27:09.213
> 
> 标签：javascript, jquery, html, image, dom

这个话题最近一直在我脑海中浮现，我一直在思考与替换/更新图像相关的 DOM 更新的效率。我还没有找到专门讨论这个问题的讨论，我什至不确定我将在下面展示的两个选项之间是否存在理想的解决方案。

我想出的最佳答案是，它完全取决于您是否需要更新`<img>`标签上的其他属性，例如`alt`, `width`,`height`值（如果它们正在被使用）。

好的，假设您要更新图像或在两个图像之间进行图像交换，您认为最有效或最优雅的方式是什么。用更新`<img>`的新元素完全替换元素还是只用新图像更新现有的值更好？`<img>``src``<img>``src`

我使用小图像的示例，性能会受到图像大小或其他因素的影响。

我有两种方法：

```
$('.swapimage_ele').on("click", function(evt){
    var img1 = $("#img1").html();
    var img2 = $("#img2").html();

    $("#img1").html(img2);
    $("#img2").html(img1);
});

$('.swapimage_src').on("click", function(evt){
    var img1 = $("#img1 img").attr("src");
    var img2 = $("#img2 img").attr("src");

    $("#img1 img").attr("src", img2);
    $("#img2 img").attr("src", img1);
}); 
```

​我写的显示这两个选项的快速工作示例在这里：http: [//jsfiddle.net/jshaw/KMmeR/](http://jsfiddle.net/jshaw/KMmeR/)

只是好奇每个人的意见或偏好，以及是否有理想的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T04:31:37.463

更少的 jQuery，而且绝对不使用`.html()`

```
$('.swapimage_src').on("click", function(evt){
    var img1 = document.querySelector("#img1 img");
    var img2 = document.querySelector("#img2 img");

    var temp = img1.src;
    img1.src = img2.src;
    img2.src = temp;
}); 
```

或者，如果您必须支持 IE6/7：

```
$('.swapimage_src').on("click", function(evt){
    var img1 = document.getElementById("img1").getElementsByTagName("img")[0];
    var img2 = document.getElementById("img2").getElementsByTagName("img")[0];

    var temp = img1.src;
    img1.src = img2.src;
    img2.src = temp;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T04:39:44.363

> 用更新后的 src 的新元素完全替换元素还是只用新图像更新现有的 src 值更好？

创建元素将比更改属性更昂贵。特别是如果通过`innerHTML`您的代码中的方式完成。但是，您不需要更改任何内容，只需从 DOM 中获取元素并更改它们的位置：

```
$('#swapimage_dom').on("click", function(e){
    var img1 = $("#img1"),
        img2 = $("#img2");
    var imgEl = img1.find("img");
    img2.find("img").appendTo(img1);
    imgEl.appendTo(img2);
}); 
```

> 我使用小图像的示例，性能会受到图像大小或其他因素的影响。

DOM 操作很便宜。您不会注意到这些方法之间的任何差异，它可以忽略不计。可能有点不同的回流过程应该足够快而不会被注意到。

然而，重绘 - 与 DOM 操作具有相同的结果相同 - 是一项需要内存和一些时间的任务。当然，这会随着图像大小而增加。然而你无法解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T04:31:07.470

为一个涉及极高分辨率图像并交换它们的移动项目做了一些实验。

交换 src 比创建新元素要快。

但是，另一种选择是将两个图像叠加在一起并更改 z-indexes 以交换哪个是可见的。（或将一张图像从屏幕上移开并交换它们的位置）如果您希望能够将其与任何动态图像交换，或者如果您有多个图像要交换，则此方法不起作用。

# c++ - 在 std::map 中使用 boost 智能指针

> ID：13795005
> 
> 赞同：0
> 
> 时间：2012-12-10T04:27:20.707
> 
> 标签：c++, memory-management, boost, shared-ptr, stdmap

在我最近的 C++ 内存管理工作中，我一直在搞乱使用智能指针。部分原因是我使用一系列映射将字符串与一个类（称为 IBlockInput）联系起来，并将该类与“上下文”内的当前值联系起来。我看到两个选项，但都有相同的问题：

**选项1**：类的当前值存储在类内部，按上下文排序

**选项 2**：类的当前值存储在上下文中，按类排序

这里的问题是任何一个对象都可能先于另一个对象死亡。一个上下文可能在所有输入保留时被销毁，或者一个输入可能在上下文保留时被销毁。当一个人死亡时，需要为它释放资源。到目前为止我所拥有的是（使用选项 2）：

```
std::map<std::string, boost::weak_ptr<IBlockInput> > inputs;
std::map<boost::weak_ptr<IBlockInput>, boost::shared_ptr<std::vector<double> > > inputValues; 
```

它们需要像这样分开的原因是其他类（IOutputBlocks）需要根据它们的指针访问和设置 IInputBlocks 的值。

我对此有几个问题：

**问题 1**：我可以像普通贴图一样访问 inputValues 贴图并只传递指针（而不是 boost::shared_ptr/boost::weak_ptr...T*）来访问它吗？如果这是实际的方法，我也可以使用weak_ptrs 或shared_ptrs

**问题 2**：如果需要，我正在使用弱指针让对象死掉（如果我在上面执行选项 1，我将不得不使用指向上下文的弱指针）。如果弱指针过期并且我尝试在地图中访问它会发生什么？它指向的数据是否已经丢失了，还是仍然可以使用原始指针？

**问题 3**：也许更好的方法是使用原始指针作为键/值，然后使用弱指针（用于各种实时检查）进行补充映射，如下所示：

```
std::map<std::string, IBlockInput*> inputs;
std::map<IBlockInput*, boost::shared_ptr<std::vector<double> > inputValues;
std::map<IBlockInput*, boost::weak_ptr<IBlockInput> > pointerCache; 
```

然后我可以使用 来做一个“实时检查” `pointerCache`，看看我是否应该保持双打向量活着并以这种方式管理内存。*注意*：输入向量相对频繁地刷新。

**推荐的做法是什么？**一般来说，我对提升和使用智能指针非常陌生（过去几个月我在工作中一直被 C# 宠爱，不必担心这种事情）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:36:24.550

`std::map<boost::weak_ptr<IBlockInput>, boost::shared_ptr<std::vector<double> > > inputValues;` - 这是不好的。当 a`weak_ptr`死亡时，它将比较等于`nullptr`，并且它的顺序不保持。你会得到未定义的行为（实际上，无限循环和崩溃）

小心你在`std::map`s 中使用什么键。

由于 ABA 问题，使用可能被释放的原始指针是不好的，其中一个有效的指针变得无效，然后分配一个与其相等的新指针。（有利用实现细节`make_shared`使这种事情在实践中发挥作用，但那是混乱和危险的）

您可能需要某种双重间接，其中您有指向指针的指针。我称它们为把手。句柄到期的内部指针导致它在地图中注销句柄，并且当它超出每个地图时，它会自行销毁。我不知道它是否会起作用，但它可能会。我怀疑它首先需要一些摆弄。

句柄将按其（外部）指针值排序，因此将保持排序。要确定句柄是否有效，您必须同时检查外部和内部指针的有效性（因此非空句柄可能对“取消引用”无效）。

但我想不出办法让这个干净。

# iphone - Xcode 4：从项目中删除文件？

> ID：13795009
> 
> 赞同：1
> 
> 时间：2012-12-10T04:27:32.617
> 
> 标签：iphone, xcode, ipad, project

如何从 Xcode 项目中删除文件？按“删除”然后选择“删除引用”时遇到问题。

我问是因为我将一堆 PNG 从`<root>`到`<root>/icons/`（在创建`icons`子目录之后）。我从项目中删除了 PNG，然后在新位置下重新添加了 PNG。我还在 Xcode 的“资源”下添加了一个“图标”文件夹。由于旧路径，它会导致 CopyPNG 失败。

一些测试表明 Xcode 不会删除 PBXPROJ 文件中的引用。这就引出了一个问题，如果仍然存在引用，我究竟要从项目中删除什么？它还乞求，我如何真正从项目中删除数据，以便我可以干净地再次添加它？

杰夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T04:49:32.827

这是我的想法..

**1.右键文件-->删除-->RemoveReference**

它**只会从您的项目中删除链接的引用**。文件不会被删除。它们将存在于项目文件夹中。当您再次需要该文件时，只需浏览项目文件夹中的文件并添加到您的项目中。请注意，应**取消选中“****将项目复制到目标组的文件夹**”选项。

 ****2\. 右键文件-->删除-->移到废纸篓**

它将从您的项目中删除**所有文件和链接引用。**当您再次需要该文件时，您必须从其下载/原始位置浏览文件并添加到您的项目中。请注意，应**选中****“将项目复制到目标组的文件夹”**选项。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T04:32:32.423

您单击您的项目，然后右键单击鼠标选择在finder中显示然后从中删除png图像或文件。然后来xcode并从所选文件夹中的图像中拖动。它将起作用......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T04:43:50.130

除了删除引用之外，还有另一个选项。点击它。这将从您的应用程序中完全删除该文件，包括引用。在我的经验中，我似乎无法想出我只需要删除引用的情况。

如果您只删除引用，该文件将从您的 Xcode 项目窗口中消失，但仍将存在于文件系统中。这会导致在以相同名称复制另一个文件时出现问题。****

# python - 有没有办法编写一个创建和执行代码的 Python 脚本？

> ID：13795010
> 
> 赞同：1
> 
> 时间：2012-12-10T04:27:38.703
> 
> 标签：python

Python中有没有办法在Python脚本中创建Python代码然后执行/测试它？

我的函数具有以下类型的形式（例如）

```
def f(n):
    if n<=3: return [0, 0, 6, 12][n]
    return 2*f(n-1) - 4*f(n-2) - 5*f(n-3) + 15*f(n-4) 
```

但是我希望能够动态地创建这些类型的函数（或任何任意函数），然后在运行时测试它们的输出（而不是将这个函数复制/粘贴到脚本中，然后手动测试它）。

不确定这是否有意义，如果需要，请要求详细说明。我已经研究过 eval 和 exec 但无法让它们与整个函数定义一起工作，只是像 1+2 等基本语句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T04:44:29.360

There are a number of ways to do this kind of thing.

If the function can be described without "stepping outside the language", you can just define a local function and return it, as in Blender's answer. This is usually what you want when you think you need to define new functions (borrowing Blender's example):

```
def make_func(a, b):
    def f(n):
        return n**a + b
    return f 
```

Sometimes, you can do even better, and represent the functions as data. For example, how do you create an arbitrary polynomial function? Well, you don't have to; you can have a *generic* polynomial function that takes a list of coefficients and a value and evaluates it; then all you need to do is create coefficient lists.

In fact, I think this is the one you want here. As you say:

> It may be return 2*f(n-1) - 4*f(n-2) - 5*f(n-3) + 15*f(n-4) one minute, or return f(n-1) + 3*f(n-2) another, or f(n-1)+f(n-2)+f(n-3)+f(n-4)+5*f(n-5) depending on what I need it to be.

This can definitely be represented as a list of coefficients:

```
def make_recursive_func(coefficients, baseval):
    def f(n):
        if n < len(coefficients): return baseval[n]
        return sum(coefficient * f(n-i-1) for i, coefficient in enumerate(coefficients))
    return f 
```

But it's probably even simpler to write a single `eval_recursive_func(coefficients, baseval)`, if all you're ever going to do with the returned function is call it immediately and then forget it.

Sometimes—rarely, but not never—you really do need to execute code on the fly. As Himanshu says, `eval` and `exec` and friends are the way to do this. For example:

```
newcode = '''
def f(n):
    if n<=3: return [0, 0, 6, 12][n]
    return 2*f(n-1) - 4*f(n-2) - 5*f(n-3) + 15*f(n-4)
'''
exec(newcode) 
```

Now the `f` function has been defined, exactly as if you'd just done this:

```
def f(n):
    if n<=3: return [0, 0, 6, 12][n]
    return 2*f(n-1) - 4*f(n-2) - 5*f(n-3) + 15*f(n-4) 
```

It's a bit different in Py3 than Py2, and there are variations depending on what context you want things executed in, or whether you just want it executed or evaluated or compiled or treated like an import, etc. But this is the basic idea.

If you can't think of why you'd want to write the first instead of the second, then you don't need this.

And if you can't figure out how to generate the right string on the fly, you shouldn't be doing this.

And, as Ignacio Vazquez-Abrams points out, if these functions can be built out of user input, you need to do something to validate that they're safe, usually by compiling iteratively and walking the AST.

Finally, even more rarely, you need to use the `new` module (and/or `inspect`) to create a new function object on the fly out of bits of other function objects (or even out of hand-crafted bytecode). But if you need to know how to do that, you probably already know how.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T04:36:33.523

如果您的函数相似，您可以使用另一个函数创建它们：

```
def make_func(a, b):
    def f(n):
        return n**a + b

    return f 
```

使用`make_func`转换此函数定义：

```
def g(n):
     return n**2 + 1 
```

就这样：

```
g = make_func(2, 1) 
```

* * *

在你的情况下，这样的事情应该有效：

```
def create_f(start_condition, vars, coeff_pairs):
    def x(n):
        if n <= start_condition:
            return vars[n]

        result = 0.0

        for coeff, shift in coeff_pairs:
            result += coeff * x(n + shift)

        return result

    return x 
```

您可以使用以下命令调用它：

```
f = create_f(3, [0, 0, 6, 12], [(2, -1), (-4, -2), (-5, -3), (15, -4)]) 
```

输出与硬编码函数的输出相匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T04:38:42.310

这很有意义。Python 甚至为此目的明确地提供了一[组模块。](http://docs.python.org/2/library/language.html)不过，请确保在执行函数之前遍历 AST 并验证节点，以确保没有人潜入`os.system('rm -rf /')`其中。

# java - JUnit测试方法，测试add方法的一个特性

> ID：13795014
> 
> 赞同：1
> 
> 时间：2012-12-10T04:27:53.553
> 
> 标签：java, testing, methods, junit

假设 MyList 的 add 方法接受一个参数，并且如果给定 null 作为其参数，则指定抛出 NullPointerException。完成此 JUnit 测试方法以测试 add 方法的该功能：

```
 public void testAddNull() {
    MyList<String> ls = new MyList<String>();

    } 
```

这是答案：

```
 public void testAddNull() {
    MyList<String> ls = new MyList<String>();
      try {
        ls.add(null);
        fail();
        } catch (NullPointerException e) {
      }
    } 
```

为什么失败（）；这里需要， ls.add(null) 不会导致它失败，所以不放 fail(); 这里多余？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T07:04:39.083

上面的测试方法会失败，*如果*`ls.add(null);`没有抛出. 由于期望的行为是抛出异常，因此当异常被捕获时测试将通过。*`NullPointerException``catch (NullPointerException e)`*

 *使用 Junit 4 你也可以这样做：

```
@Test(expected = NullPointerException.class)
public void testAddNull() {
    ls.add(null);
} 
```

这将要求测试代码抛出一个`NullPointerException`. 否则，测试将失败。*

# xml - 在 AppleScript 中解析 XML

> ID：13795016
> 
> 赞同：0
> 
> 时间：2012-12-10T04:28:02.523
> 
> 标签：xml, applescript, evernote

我正在尝试使用 AppleScript 解析 EverNote .enex 文件（它只是 XML）中的标签。这是我要解析的文件的一个片段：

```
<note>
...
<tag>Foo</tag>
<tag>Bar</tag>
...
</note> 
```

这是我拥有的 AppleScript 代码（其中 theNote 是对我正在迭代的 XML 树中当前 <note> 的引用）：

```
set theTags to (value of XML element named "tag" of theNote) as string 
```

我希望 theTags 成为一个列表：（Foo，Bar）。希望有一种简单的方法可以做到这一点，而我只是想念它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:52:50.857

像这样;

```
set theTags to value of every XML element of theNote whose name = "tag" 
```

# machine-learning - 最新的句子可读性算法

> ID：13795019
> 
> 赞同：5
> 
> 时间：2012-12-10T04:28:15.657
> 
> 标签：machine-learning, nlp, text-mining

我正在研究一种估计[句子难度](https://en.wikipedia.org/wiki/Readability_test)的算法，但我发现的方法似乎太老了，无法利用现代计算机的功能。

今天使用的算法大多是在 40 到 60 年前开发的。[Flesch-Kincaid](https://en.wikipedia.org/wiki/Flesch%E2%80%93Kincaid_readability_tests)是最受欢迎的，并且仍然被国防部和许多州和企业用作文件标准。我查看了 Flesch-Kincaid Grade Level、Gunning Fog Index、SMOG Index、Fry Readability Formula 和 Coleman-Liau Index。

我决定使用自动可读性索引：

```
ARI = 4.71 * (characters / words) + .5 * (words / sentences) - 21.43; 
```

在我看来，根据基于语料库的词频列表为每个词分配一个值，然后将这些值放入旧的可读性公式中并不难。
这可以对前 1000 到 5000 个最常用的词进行。此外，为某些不同类型的单词和词性制作单独的列表可能会很有效。连词的存在肯定是句子复杂性的标志。

有没有这样做的公式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-24T08:30:32.557

当您在机器学习公式中看到硬编码常量时，请保持怀疑...

[自动可读性指数](https://en.wikipedia.org/wiki/Automated_readability_index)中的数字表示一个模型，该模型适合用于构建它的数据集以及选择用来表示它的特征。除了适用性之外，我认为这是一种常见的衡量标准，校准到学校成绩是另一个好处。

您将词频添加到可读性中的想法听起来是一个很棒的功能。毕竟，简单语法句子中的一个不熟悉的单词可能会使它变得不可读。

给定单词频率，您应该选择您想要表示句子的方式。示例可能是整个句子的概率、不常见单词的数量、最小频率等。

然后你应该建立一个数据集并从中学习模型的参数。最直接的方法是使用手动标记的句子数据集以提高可读性。然而，构建这样一个数据集似乎非常耗时。

您可以通过使用一些可读性水平普遍已知的来源来绕过这个问题，并根据来源标记句子的可读性。例如，来自[简单英语维基百科](https://simple.wikipedia.org/wiki/Main_Page)的句子应该比来自维基百科的句子更具可读性。常见可读性级别的其他来源可以是华尔街日报和网络论坛。对这些句子进行一些手动标记，以对齐和校准您的可读性值。

通过使用这种技术，您可以在标签准确度与标签数量之间进行权衡。由于已经证明机器学习可以在存在白噪声甚至恶意错误的情况下完成，因此这种权衡通常是有益的。

# annotations - 如何使用注释在我的项目中使用学说 2 调整模块 ZfcUser/zfcuserDoctrineORM？

> ID：13795021
> 
> 赞同：6
> 
> 时间：2012-12-10T04:29:04.567
> 
> 标签：annotations, doctrine, zfcuser

我是从阿根廷写的，请原谅我的英语小。我在模块`ZfcUser`和`zfcuserDoctrineORM`. 我需要将它们集成到我的项目中。我正在使用 Zend 框架 2、教义 2.3 和 postgreSQL，这是我第一次使用这些工具。出于这个原因，有很多事情我不能很好地掌握，我的所有模块都包含在`/config/application.config.php`我的数据库中，我的连接配置在我的数据库中`/config/autoload/local.php`

**本地.php**

```
    返回数组（
      '教义' => 数组（
        '连接' => 数组（
            'orm_default' =>数组（
                'driverClass' => 'Doctrine\DBAL\Driver\PDOPgSql\Driver',
                    '参数' => 数组（
                        '主机' => '本地主机'，
                        '端口' => '5432',
                        '用户' => 'postgres',
                        '密码' => 'postgres',
                        'dbname' => 'ministerio',
                    )
                )
            )
        ),
    );

```

**应用程序.config.php**

```
    返回数组（
      '模块' => 数组（
        '应用'，
        '教义模块',
        'DoctrineORMModule',
        'Reeser', // 我的模块名称
        'ZfcBase',
        'Zfc用户',
        'ZfcUserDoctrineORM',  

    ),
    'module_listener_options' =>数组（
          'config_glob_paths' =>数组（
              'config/autoload/{,*.}{global,local}.php',
        ),
        'module_paths' =>数组（
             '。/模块'，
             '。/小贩'，
          ),
       ),
    );

```

为了映射我的数据库，我使用了带有教义的注释，并且在我的模块中生成了我自己的实体用户。

我添加了配置档案`zfcuser.global.php`并`zfcuserdoctrineorm.global.php`在我的自动加载目录中，但我不知道如何配置它们以便档案识别我的实体。

进入**zfcuser.global.php**

```
    'zend_db_adapter' => 'Zend\Db\Adapter\Adapter', // 应该注释掉吗？

    'user_entity_class' => 'Reeser\Entity\User',

    'login_redirect_route' => 'Reeser/index/index.phtml',

    返回数组（
         'zfcuser' => $settings, // 我如何配置这段代码？
         'service_manager' =>数组（     
         '别名' => 数组（
         'zfcuser_zend_db_adapter' => (isset($settings['zend_db_adapter'])) ？
         $settings['zend_db_adapter']: 'Zend\Db\Adapter\Adapter',
            ),
         ),
    );  

```

进入**zfcuserdoctrineorm.global.php**

```
    返回数组（
       '教义' => 数组（
          '驱动程序' => 数组（
             'zfcuser_driver' =>数组（
                 'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
                 '缓存' => '数组',
                 '路径' => 数组（__DIR__ .'/../src/Reeser/Entity'）
            ),

            'orm_default' =>数组（
                '驱动程序' => 数组（
                    'ZfcUser\Entity' => 'zfcuser_driver'
                )
            )
         )
      ),
    );

```

我看到该模块`zfcuserDoctrineORM`适用于 XML。该模块可以适应注释吗？如果这是可能的，我如何使我的实体用户适应这个模块？我应该修改哪些档案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T21:03:10.953

您无需调整[ZfcUserDoctrineORM](https://github.com/ZF-Commons/ZfcUserDoctrineORM)即可使用注释映射。[DoctrineORMModule 原生](https://github.com/doctrine/DoctrineORMModule)支持混合映射（您可以选择决定哪些实体与哪些驱动程序进行映射）。关于[ZfcUser](https://github.com/ZF-Commons/ZfcUser)的配置，我个人根本没有修改它（我只是对 ZfcUserDoctrineORM 做了一些覆盖）。

1.  删除`config/autoload/zfcuser.global.php`（你不需要它）
2.  消除`config/autoload/zfcuserdoctrineorm.global.php`
3.  在定义用户实体的模块中，如果要覆盖 ZfcUserDoctrineOrm 的注释驱动程序（假设文件位于`YourModule/config/module.config.php`），请使用以下内容：

    ```
    // entity mappings
    'doctrine' => array(
        'driver' => array(
            'zfcuser_entity' => array(
                // customize path
                'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
                'paths' => array(__DIR__ . '/../src/YourModule/Entity'),
            ),
            'orm_default' => array(
                'drivers' => array(
                    'YourModule\Entity' => 'zfcuser_entity',
                ),
            ),
        ),
    ),

    // ZfcUser specific config
    'zfcuser' => array(
        'user_entity_class'       => 'YourModule\Entity\User',
        'enable_default_entities' => false,
    ), 
    ```

这应该适用`0.1.x`于`ZfcUserDoctrineORM`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T22:26:00.080

Ocramius 的解决方案对我进行了一些修改（非常感谢！），

首先，最新版本的学说模块中似乎有一个错误（我收到一个错误说'当需要 zfcuser_doctrine_em 时，找不到服务'），所以我不得不恢复到 0.7。我在下面附上了我的 composer.json 配置，

```
"doctrine/dbal": "2.3.*",
"doctrine/common": "2.3.*",
"doctrine/doctrine-module": "0.7.*",
"doctrine/doctrine-orm-module": "0.7.*",
"doctrine/orm": "2.3.*",
"zf-commons/zfc-user": "0.1.*",
"zf-commons/zfc-user-doctrine-orm": "0.1.*", 
```

接下来是，我必须使用以下配置选项保留我的 zfcuser.global.php， `'user_entity_class' => 'Application\Entity\User',` 如果你想用你自己的实体覆盖默认实体，这是必需的。

希望这可以帮助。

# ruby - 搜索数组成员的文本

> ID：13795022
> 
> 赞同：1
> 
> 时间：2012-12-10T04:29:06.127
> 
> 标签：ruby, arrays, ruby-on-rails-3.2

在我目前正在进行的一个项目中，我有以下模型：

```
Guest
    name: string

Episode
    title: string
    description: string

Appearance
    guest_id: integer
    episode_id: integer 
```

如您所见，客人通过外观表“出现”在多个剧集中。当我检索剧集时，目前通过 RSS..我想找到一种方法来检查 Guest 表中任何成员的标题和描述。如果找到匹配项，它将建立关联。

通常情况下，如果有少量客人，这将非常容易，但遍历整个客人集合并检查剧集的标题和描述字段似乎很浪费。

我可以看到这是一个“已解决的问题”，但我在寻找解决方案时遇到了问题，该解决方案考虑到了大量客人的扩展影响或越来越多的搜索属性（例如向要检查的情节模型）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:37:55.863

假设您的关系配置正确：

```
descriptions = rss_items.map {|i| i.description}

Guest.includes(:episodes)
     .where(Episode.arel_table[:description].in(descriptions)) 
```

哪里`Guest`有一个`has_many :episodes, through: :appearances`和`has_many :appearances`。

# coldfusion - 检查带有过滤条件的 entityLoad 是否返回结果

> ID：13795025
> 
> 赞同：1
> 
> 时间：2012-12-10T04:29:38.917
> 
> 标签：coldfusion, coldfusion-9

我这样调用 entityLoad：

```
currentSubmission =  entityload("EventSubmission", { eventID = variables.eventID, profileID = variables.profileID, true } 
```

如何检查 entityLoad 是否返回了记录？如果过滤条件匹配，则返回一个对象。如果不匹配，则不返回任何内容，并且变量 currentSubmission 不存在。

我发现的问题是，如果我使用：

一种。isObject(currentSubmission)，在没有返回任何内容时给出错误，因为 currentSubmission 不存在。

湾。isDefined(currentSubmission)，当返回某些内容时会出错，因为您无法对对象执行 isDefined。

所以问题是，我应该使用什么方法来确定 entityLoad 是否返回结果？

这是我试图放在一起的完整方法。基本上，我想根据一些过滤条件加载一个实体并返回它，如果没有匹配的实体，则返回一个新的 Empty 实体。

```
public function getByEventProfile(){
    currentSubmission =  entityload("EventSubmission", { eventID = variables.eventID, profileID = variables.profileID }, true);
    if (!isObject(currentSubmission))
        currentSubmission = entityNew("EventSubmission");
    return currentSubmission;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T04:40:51.563

`isNull()`是您正在寻找的功能。

[http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSe9cbe5cf462523a0-3c4c0bb81223f1daffb-8000.html](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSe9cbe5cf462523a0-3c4c0bb81223f1daffb-8000.html)

**更新：**虽然`isDefined()`或`structKeyExists()`可能有效，`isNull()`但*实际上*是用于检查是否`entityLoad()`找到任何东西的功能。事实上，在 CF9 中引入它只是为了做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T04:55:19.657

尝试`isDefined("currentSubmission")`（注意引号）或稍快`structKeyExists(variables,"currentSubmission")`

# nagios - Nagios NRPE：未定义命令

> ID：13795027
> 
> 赞同：9
> 
> 时间：2012-12-10T04:29:55.377
> 
> 标签：nagios, nrpe

在我`nrpe_local.cfg`添加的以下命令中：

```
command[check_mycommand]=/usr/lib/nagios/plugins/check_command 30 35 
```

然后重新启动 nrpe 守护进程。

当我使用执行此命令时`nrpe`，出现以下错误：

```
NRPE: Command 'check_mycommand' not defined 
```

我使用以下命令执行：

```
/usr/lib/nagios/plugins/check_nrpe -H hostname -c check_mycommand 
```

我无法得到任何线索。

在我`nrpe_local.cfg`的文件中，又添加了 10 个命令，并且它们工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T12:13:27.970

> 在我的 nrpe_local.cfg 中添加了以下命令：> `command[check_mycommand]=/usr/lib/nagios/plugins/check_command 30 35`

尝试 ：

```
command[check_mycommand]=/usr/lib/nagios/plugins/check_command -w (warningTreshold) -c (criticalTreshold)
/etc/init.d/nagios-nrpe-server restart 
```

并且确实杀死了所有其他已经在运行的 nrpe 守护进程。原因可能是它已经由不同的用户运行，这可能会导致冲突。例如。nagios-nrpe-server 在用户 root 和用户 nagios 下运行

还要确保将 Nagios 服务器的 IP 地址添加到 /etc/nagios/nrpe.cfg 中的 allowed_hosts 中：

```
allowed_hosts=<ip address of nagios server> 
```

否则，您将无法使用 Nagios 的 NRPE 执行外部命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-26T11:54:49.987

您输入的命令`nrpe.cfg`应如下所示：

```
command[check_mycommand]=/usr/lib/nagios/plugins/check_command -w $ARG1$ -c $ARG2$ 
```

然后，您在`services.cfg`文件中的服务（或任何名称）检查应如下所示：

```
define service{
   servicegroups        Basic Functionality
   host_name            localhost
   service_description  Mycommand
   check_command        check_nrpe!check_mycommand -a '-w 30 -c 35'
   use                  generic-service
} 
```

请让我知道它是否解决了您的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-09T05:03:27.423

你好我通过在配置文件中添加**本地地址解决了这个问题，我的****nagios服务器**的IP在哪里。你还应该定义命令`nrpe.cfg` `allowed_host = 127.0.0.1``xxxx``xxxx`**`[check_disk]=/usr/lib/nagios/plugins/check_disk-w 20%-c 10%-p /var`**

 **非常重要的是命令名称`[check_disk]`与路由上指示的名称相同

多亏了这个，我的问题得到了解决，我现在有了一个很好的监控。

耶尔马尔·埃尔南德斯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T02:49:13.260

1.  确保你杀死了所有旧的守护进程，包括任何分叉。
2.  NRPE 干净重启后，检查 /var/log/messages 是否有任何错误？！尤其是“NRPE：错误 - 无法绑定到已在使用的端口/端口”之类的内容。
3.  您确定没有使用 inetd 控制的 NRPE 吗？
4.  如果上述方法没有帮助，请再次执行第 1 步，然后在启动 NRPE 时不要包含“-d”标志并检查输出。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T08:32:57.613

您是否使用正确的配置文件启动了 NRPE 守护程序？(nrpe -c config_file -d) 你使用的配置文件是nagios_local.conf还是nrpe_local.cfg？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-20T16:26:34.970

嗨，我收到了这个错误并且能够解决它：在 /etc/nagios/nrpe.cfg 你会看到：

```
command[check_var]=/usr/lib64/nagios/plugins/check_disk -w 20% -c 10% -p /var
command[check_slash]=/usr/lib64/nagios/plugins/check_disk -w 20% -c 10% -p /
command[check_ssh]=/usr/lib64/nagios/plugins/check_ssh $ARG1$ 
```

但我确定您感到困惑并设置：commend.cfg 与：check_disk 而不是 check_slash

看到该行显示“command[check_slash]”这就是 command.cfg 想要得到的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-22T23:44:22.913

我通过将以下几行添加到我的`nrpe.cfg`文件并重新启动`nrpe`. 基本上，我们告诉 nagios 识别我们正在运行的命令。

```
command[check_var]=/usr/lib64/nagios/plugins/check_disk -w 20% -c 10% -p /var
command[check_slash]=/usr/lib64/nagios/plugins/check_disk -w 20% -c 10% -p /
command[check_ssh]=/usr/lib64/nagios/plugins/check_ssh $ARG1$ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-06T08:51:58.560

我有一个类似的问题，检查系统日志我可以看到 nrpe 在 /var/run/ 中有写入问题

```
Nov  6 08:30:05 xxxxxx nrpe[39777]: Cannot write to pidfile '/var/run/nrpe.pid' - check your privileges. 
```

我在这里找到：

[https://bugs.launchpad.net/ubuntu/+source/nagios-nrpe/+bug/957367](https://bugs.launchpad.net/ubuntu/+source/nagios-nrpe/+bug/957367)

解决方案很简单。只需编辑 nrpe.cfg 并更改：

```
pid_file=/var/run/nrpe.pid 
```

至

```
pid_file=/var/run/nagios/nrpe.pid 
```

手动杀死 nrpe 并使用 /etc/init.d/nagios-nrpe-server start 再次启动它

它对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-29T12:42:58.000

可能会对某人有所帮助。

在我的情况下，问题是错字。我创建了文件`/etc/nrpe.d/commands.cgf`而不是`/etc/nrpe.d/commands.cfg`;)**

# performance - 关于 x86 汇编语言的一些问题？

> ID：13795030
> 
> 赞同：-4
> 
> 时间：2012-12-10T04:30:57.073
> 
> 标签：performance, assembly, x86-64, simd

我刚开始学asm语言，有几个问题：

1）如何通过汇编语言分配对齐的内存块，就像我们在 C/C++ 中经常做的那样？

2) 是否有一些 asm 数学库涵盖了一些基本的数学运算/函数，例如我们可以在标准 C/C++ 数学库/头文件等中找到的这些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T04:55:30.190

1.  In Assembly, it is up to you and the OS. Allocating memory in Windows, you would use the Heap* or Virtual* memory API functions. In Linux, you need to change the program break to allocate memory.

2.  Math libraries?!?! We use Assembly to learn how to do things on our own, that is the fun part - experimenting and learning. If you want to use libraries, just use C/C++ otherwise search for math libraries.

# javascript - 我如何为真或假条件创建 ember 车把助手

> ID：13795038
> 
> 赞同：0
> 
> 时间：2012-12-10T04:31:41.407
> 
> 标签：javascript, ember.js, handlebars.js

这是我的车把模板...

```
{{#idType}}
  <label>{{unbound Model.viewData.name}}<span class="redTxt">*</span></label>
  <input type="text" name="" id="{{unbound Model.viewData.name}}">
{{/idType}} 
```

在 Ember 视图中，我创建了一个辅助方法，例如

```
Em.Handlebars.registerHelper("idType", function() {
    if(Model.viewData.selectGender === "Gender") {
        return true;
    } else {
        return false;
    }
}); 
```

在这里，如果它是真的，那么它会显示为真，而不是我的标签和文本字段。您能帮我找到解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:03:55.263

在你的控制器/模型中定义一个计算属性，如下所示，你不需要一个辅助方法

```
requiredGender: function(){
  //returning a boolean value
  return this.get('viewData.selectGender') === "Gender";
}.property('viewData.selectGender') // defining dependencies

{{#if requiredGender}}
  TRUE
{{else}}
  <label>{{unbound Model.viewData.name}}<span class="redTxt">*</span></label>
  <input type="text" name="" id="{{unbound Model.viewData.name}}">
{{/if}} 
```

# c++ - glibc 检测到 *** free() 无效指针

> ID：13795045
> 
> 赞同：0
> 
> 时间：2012-12-10T04:32:37.517
> 
> 标签：c++

嗨朋友们，当我在我的代码中运行我的代码“glibc detected *** free() invalid pointer”时，我收到了这个错误，我正在创建 3 个指针并使用 new 仅将内存分配给一个并删除所有三个指针。

```
class test()
{
public : 
int a;
/..some functionality../

}; 

class second_test()
{
public : 
int b;
/..some functionality../
} 

  class third_test()
    {
    public : 
    int c;
    /..some functionality../
    } 

int main()
{
test *ptrtest;
second_test *psecond_test;
third_test*pthird_test;

ptrtest = new test;
/..Doing some functionality.../

delete ptrtest;
   delete psecond_test;
delete pthird_test;

} 
```

当我运行它时，它给出了上述错误，但令人惊讶的是，它在 10 次中给出错误 7 的时间却没有给出上述错误..请帮助我到底是什么问题。因为在 c++ 中我认为删除 NULL 指针是安全的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T04:33:57.460

```
second_test *psecond_test; 
```

这并不指向空指针。

```
second_test *psecond_test = NULL; 
```

确实如此。

* * *

例如，这里有一些代码：

```
#include <cstdio>

int main() {
    struct x *ptr;
    printf("%p\n", ptr);
} 
```

当我运行它时，我每次都会得到不同的地址。（虽然它们可能相同，但它们可能为零，它们是什么尚未定义）

```
[10:36pm] ./foo
0x7fff6413205e
[10:36pm] ./foo
0x7fff6cff105e
[10:36pm] ./foo
0x7fff6890305e 
```

* * *

例如，当我使用 Clang 时，会发出警告`-Wall`。

```
[10:41pm] clang++ -Wall foo.cc
foo.cc:5:9: warning: variable 'ptr' is uninitialized when used here [-Wuninitialized]
        delete ptr;
               ^~~
foo.cc:4:10: note: initialize the variable 'ptr' to silence this warning
        int *ptr;
                ^
                 = NULL 
```

# php - 正则表达式 - 下载与正则表达式匹配的某些文件

> ID：13795047
> 
> 赞同：-2
> 
> 时间：2012-12-10T04:33:10.893
> 
> 标签：php, regex

我有一个数据库，其中包含我从中下载数据的服务器列表。我想添加一个具有正则表达式模式的列，以便我的程序只能下载与此模式匹配的文件。

以前从未学过正则表达式，我需要一点帮助。

我目前希望正则表达式匹配任何扩展名为`.edi`. 我该怎么办？

如何准确匹配文件名（如某些客户可能想要的那样）？例如，文件总是会被调用`salesorder.txt`。

如果客户不想匹配任何文件，并希望我们提取所有文件怎么办？是否有一个可以抓住一切的正则表达式..还是一个空白的正则表达式和那个一样？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:39:31.577

对于 .edi 扩展文件：`.*\.edi$`

对于固定文件名“salesroder.txt”`^salesorder\.txt$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:50:36.780

匹配任何东西

> .*

点的意思是“任何一个字符”，星号的意思是“任意数量”，@Billy chan 回答了剩下的问题

# javascript - 如何让 SVG 圆圈沿着 SVG 路径拖动？

> ID：13795048
> 
> 赞同：3
> 
> 时间：2012-12-10T04:33:24.293
> 
> 标签：javascript, svg, d3.js

我创建了一个 JSFiddle，我希望能够沿着路径拖动一个圆圈，但我遇到了问题。这是 JSFiddle 的链接：http: [//jsfiddle.net/fHBpC/2/](http://jsfiddle.net/fHBpC/2/)

以下是我遇到的问题：

1.  在 dragMove 内部，参数“d”是未定义的。

2.  我的路径应该从 (0,0) 开始到 (200, 200) 并在 (150, 150) 结束，但它只从 (0, 0) 开始并到 (200, 200)。

3.  如何让圆圈仅沿线拖动？

对应代码：

1.

```
function dragMove(d) {
    console.log("dragging a circle");
    d.x += d3.event.dx;
    d.y += d3.event.dy;
    d3.select(this)
        .attr('x', d.x)
        .attr('y', d.y)
        .attr("transform", "translate(" + d.x + "," + d.y + ")");
} 
```

2.

```
var path = content.append("path").attr("d", "M 100 100 L 200 200 L 150 150").style("stroke-width", 5).style("stroke", "steelblue"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:20:59.053

1.  您可以使用`this`来引用圆形元素。但是该功能还有一些问题`dragMove()`。
    *   请注意，圆没有属性`x`and `y`，它们被称为`cx`and `cy`。
    *   这些属性不是数字，它们是 type `SVGAnimatedLength`。这意味着，您不能对它们进行算术运算。
    *   您正在尝试以三种方式移动圆圈：
        1.  通过更改属性
        2.  通过设置圆心的属性
        3.  通过一个`transform`
    *   其中一种方法就足够了。此外，`transform`它独立于`cx`/`cy`属性/属性，即它使圆圈移动了额外的量，以便圆圈移动的距离是您预期的两倍。
2.  当从 200,200 回到最后一位到 150,150 时，您的路径不会添加额外的“油漆涂层”，这与从 0,0 到 200,200 时已经应用的油漆区分开来。
3.  这真的很困难，并且取决于您在指针离开路径时的预期行为。最直观的行为可能是圆圈总是移动到路径上最接近指针的点。然而，这是一个重要的计算，甚至不需要一个明确的结果，除非它是一条简单的直线，这很容易。您唯一的帮助是[`getPointAtLength()`](https://developer.mozilla.org/en-US/docs/DOM/SVGPathElement#Methods)返回点的方法。这意味着，您可以使用指针的向下或向右移动将圆进一步移动到路径的末尾，并类似地使用向左或向上移动将其进一步移动到起点（参见[固定的 jsFiddle](http://jsfiddle.net/NMeYV/)）。这有一些缺点，即一般来说，即使指针在路径上，圆圈也会在其他地方（在您的示例中不会出现这种情况，因为初始路径段是 45° 笔划），如何如果我已经到达屏幕的边缘并且无法进一步移动，我会到达路径的尽头吗？或者，您可以抛出一些值`getPointAtLength()`并选择最接近指针位置的值。

# javascript - 如何在 javascript 中创建隐藏的 iframe 并将其源代码放入文本框并作为变量？

> ID：13795050
> 
> 赞同：2
> 
> 时间：2012-12-10T04:33:30.640
> 
> 标签：javascript, html, iframe, textbox

这就是我想做的。我想在指向外部网站的 javascript 中创建一个隐藏的 iframe，然后使用 javascript 将该隐藏 iframe 的 html 源代码获取到文本框中并作为变量（如果 iframe 未加载并询问用户，可能会进行一些错误检查重新加载...）到目前为止，我尝试了这个，但是如何隐藏它并从中读取源代码？提前致谢。

```
<script language="JavaScript" type="text/javascript">

ifrm = document.createElement("IFRAME");
ifrm.setAttribute("src", "http://www.somesite.com/");
ifrm.style.width = 640+"px";
ifrm.style.height = 480+"px";
document.body.appendChild(ifrm);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:43:21.527

由于[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)，您无法使用 iframe 执行此操作，但您可以使用一些服务器端，使用 php 它将类似于：

```
if (isset($_GET['url'])) {
   $ch = curl_init(); 
   curl_setopt($ch, CURLOPT_URL, $_GET['url']); 
   curl_setopt($ch, CURLOPT_HEADER, FALSE); 
   curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); 
   echo curl_exec($ch); 
   curl_close($ch);
} 
```

并且您可以使用 ajax 调用该脚本（将使用 jQuery）

```
$.get('script.php', {url: 'http://www.somesite.com/'}, function(page) {
   alert(page);
}); 
```

# mysql - 从具有外键约束的 MySQL 表中删除

> ID：13795052
> 
> 赞同：3
> 
> 时间：2012-12-10T04:33:54.217
> 
> 标签：mysql, foreign-keys, constraints

我有两个表，其中加载了一些数据，并且两者相互引用。表 B 引用表 A 的主键。我手动尝试从表 A 中删除表 B 中存在的一些表行，我得到了这个：

**#1451 - 无法删除或更新父行：外键约束失败 ( `TableA`. `TableB`, CONSTRAINT `TableB_ibfk_2`FOREIGN KEY ( `column`) REFERENCES `flashcard`( `primaryKeyColumn`))**

我不太确定这里发生了什么。据我了解，如果我删除 TableA 的某些行，那么它们也应该自动删除表 B 中存在的相应行（即，如果它们存在于表 B 中）但显然这里不是这种情况，它会提示上述错误.

有人想敲打我的脑袋让我知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T04:42:27.567

不幸的是，您认为应该发生的自动删除并没有发生。您需要从表 A 中要删除的行中手动删除表 B 中包含 ID 的行。

尝试将**ON DELETE CASCADE**添加到表 B 中的外键列定义中。

如果您使用的是 Hibernate 或其他一些 ORM 工具，它会有一个“级联”机制来自动处理这个问题。但是在这里，由于您直接与数据库交互，因此您必须记住，如果该行的 ID 作为外键存在于任何其他表中（如您的情况，A 的主键存在于B）中的一些行。当然，除非您指定 ON DELETE CASCADE 属性。

# css - 从 Ruby/Rails 中的变量分配 CSS 类

> ID：13795054
> 
> 赞同：1
> 
> 时间：2012-12-10T04:34:15.650
> 
> 标签：css, ruby-on-rails

我正在尝试根据元素在列表中的索引来分配元素的 CSS。

在这里，我将 CSS（“q-light”或“q-dark”）存储在变量“styling1”中，效果很好。

```
 <% answers.each_with_index do |answer, i| %>
    <% styling1 = i % 2 == 0 ? 'q-light' : 'q-dark' %>

    <div class="<%= styling %>"> 
```

但是，当我尝试将索引存储在变量 'styling2' 中并尝试将其添加到另一个 CSS 类时，假设每个元素的 CSS 将是 'otherclass 0'、'otherclass 1' 等等，它给了我一个语法错误，说我有一个意外的'>'。

```
 <% answers.each_with_index do |answer, i| %>
    <% styling2 = i %>

    <%= f.radio_button :answer_id, answer.id%>
    <%= f.label :answer_id, answer.answer, :class => "<%= otherclass styling =>" %> 
```

我不太确定错误来自哪里。我知道 CSS 类不应该以数字开头，但我用 unicode 转义字符命名它们，所以在我的 css 文件中它不是 0，而是 \30，并且该样式在其他地方有效，所以我不认为它是数字. 难道是当我分配像“：class =>”这样的类时我不能调用变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T04:40:43.583

使用`"#{otherclass styling}"`而不是`<%= otherclass styling %>`.

# sql-server-2008 - 如何通过 sql server 2005/2008 中的统计信息减少 mdf 和 ldf 大小

> ID：13795056
> 
> 赞同：1
> 
> 时间：2012-12-10T04:34:20.617
> 
> 标签：sql-server-2008, sql-server-2005

我有一个问题，即我发现我的**mdf 大小：13 GB**和**ldf 大小：96 GB**，我从数据库表中删除了所有记录以减少 mdf 和 ldf 的大小，我确实**使用了 DATA_AQUA go exec sp_updatestats go**即使**DBCC SHOW_STATISTICS**命令给出空值，我的期望是我删除了所有记录，但它应该显示较小的大小，但它仍然显示旧大小，如何解决这个问题请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:45:16.207

Start reading the documentation.

NONE of your steps will make any of those files smaller per documentation.

*   The LDF points to you not having made a backup and truncated the log, quite "ever". That is significantly bad and I dare saying the file size is not your problem but the fact that you have no backup and do not seem to care about your data.

*   Once you have backups, you can reinitialize the LDF using a sequence of switching to simple recovery then running a shrink operation.

*   Regarding the MDF - same thing. You have to reorganize the database using a maintenance task to shrink it.

Why do you think that deleting records, using updatestats will magically shrink the file?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T14:16:35.003

对于 LDF，您应该进行常规[事务日志备份](https://technet.microsoft.com/en-us/library/ms190440%28v=sql.105%29.aspx)，或者从[完全恢复模式切换到简单恢复模式](https://msdn.microsoft.com/en-us/library/ms189275.aspx)。它会增长，直到你采取这两个行动之一。请注意，在任何一种情况下，执行操作后都应[缩小 ldf](http://www.falconitservices.com/support/KB/Lists/Posts/Post.aspx?ID=89)文件。

如果您从主数据库中删除了记录，则 mdf 不会自动收缩，但您可以使用与 ldf 相同的收缩机制（又名 database->tasks->shrink->files 或`DBCC Shrinkfile (<DBName>, <TargetSize>)`

# vb.net - Reportviewer 未填写数据

> ID：13795057
> 
> 赞同：0
> 
> 时间：2012-12-10T04:34:34.683
> 
> 标签：vb.net, report-viewer2010

我的程序上有一个reportviewer 控件。它一直在工作，然后我改变了一些与它无关的东西。我有这个代码，在我的程序中，这个代码和另一个代码之间的唯一区别是数据集。但是，这个没有填充reportviewer中的数据。数据在数据表中，但未显示在报告中。有任何想法吗？

这是我的代码：

```
'Shows Appropriate Batch Reports
Private Sub btnShowBatchReport_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnShowBatchReport.Click
    Try
        'Get Dates for reports
        Dim todayDate As Date = Today
        Dim weekDate As Date = Today.AddDays(-7)
        Dim monthDate As Date = Today.AddMonths(-1)
        Dim yearDate As Date = Today.AddYears(-1)
        Dim name As String = My.Settings.Store_Name

        'Assigning the report name object
        Dim BatchReportName As New Generic.List(Of ReportParameter)

        If rbBatchAll.Checked Then
            Me.OVERALLINVENTORYTableAdapter.Fill(Me.POSDataSet.OVERALLINVENTORY)
            BatchReportName.Add(New ReportParameter("ReportBatchName", "All Batches"))

        ElseIf rbBatchMonth.Checked Then
            Me.OVERALLINVENTORYTableAdapter.FillByBetweenDates(Me.POSDataSet.OVERALLINVENTORY, monthDate, todayDate)
            BatchReportName.Add(New ReportParameter("ReportBatchName", "Past Month Batches " & monthDate & " to " & todayDate))

        ElseIf rbBatchWeek.Checked Then
            Me.OVERALLINVENTORYTableAdapter.FillByBetweenDates(Me.POSDataSet.OVERALLINVENTORY, weekDate, todayDate)
            BatchReportName.Add(New ReportParameter("ReportBatchName", "Past Week Batches " & weekDate & " to " & todayDate))

        ElseIf rbBatchYear.Checked Then
            Me.OVERALLINVENTORYTableAdapter.FillByBetweenDates(Me.POSDataSet.OVERALLINVENTORY, yearDate, todayDate)
            BatchReportName.Add(New ReportParameter("ReportBatchName", "Past Year Batches " & yearDate & " to " & todayDate))

        Else
            Me.OVERALLINVENTORYTableAdapter.FillByBetweenDates(Me.POSDataSet.OVERALLINVENTORY, dpBatchStartDate.Value, dpBatchEndDate.Value)
            BatchReportName.Add(New ReportParameter("ReportBatchName", "Custom Batches between" & dpBatchStartDate.Value & " and " & dpBatchEndDate.Value))

        End If

        'Resets the Report Viewer
        rvBatchOrders.Reset()

        'Creates the ReportData Source Object
        Dim BatchOrders = New Microsoft.Reporting.WinForms.ReportDataSource

        'Assigns the DataSet to the object
        BatchOrders.Name = "InventoryBatch"

        'Assigns the binding source of the dataset
        BatchOrders.Value = INVENTORYBindingSource

        'Clears Previous Data source
        Me.rvBatchOrders.LocalReport.DataSources.Clear()

        'Add the new data source
        Me.rvBatchOrders.LocalReport.DataSources.Add(BatchOrders)

        'Embeds the new report in the report viewer
        rvBatchOrders.LocalReport.ReportEmbeddedResource = "POS_System_V2.OrderBatches.rdlc"

        'Sets the Report Name
        rvBatchOrders.LocalReport.SetParameters(BatchReportName)

        rvBatchOrders.SetDisplayMode(DisplayMode.PrintLayout)
        rvBatchOrders.ZoomMode = ZoomMode.PageWidth

        'Refreshs the report viewer with the new report
        rvBatchOrders.Refresh()
        rvBatchOrders.RefreshReport() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:40:55.343

我解决了这个问题。很有趣，我用了 3 个小时来解决这个问题。一旦我把它放在堆栈溢出上，我就会立即发现问题。

问题

```
 BatchOrders.Value = INVENTORYBindingSource 
```

答案：

```
 BatchOrders.Value = OVERALLINVENTORYBindingSource 
```

我有错误的绑定源。

# iphone - JSON 不在 iOS 中解析？

> ID：13795059
> 
> 赞同：-1
> 
> 时间：2012-12-10T04:34:46.903
> 
> 标签：iphone, ios, json

我有以下代码。我的问题是我试图解析一个简单的 JSON 响应，但它似乎不起作用。JSON 响应如下所示：

```
{"response":"session_exists"} 
```

我使用以下内容来回显 JSON：

```
$json_output = array('response' => 'session_exists'); 
```

我只想知道响应等于什么。这将是 session_exists 或成功。我究竟做错了什么？

我以前没有使用过 JSON，所以如果有人可以帮助我，它真的会帮助我继续这个项目。

谢谢！

```
- (IBAction)login:(id)sender {
    NSURL *url = [NSURL URLWithString:@"http://localhost/lookin_chill/Website/api/api_account.php?action=login&email=email@email.com&password=pass123"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    [connection start];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    data = [[NSMutableData alloc] init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData
{
    [data appendData:theData];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    responses = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];

    NSLog(@"%@", responses);

    NSLog(@"%@", [[responses objectAtIndex:0] objectForKey:@"response"]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T04:40:16.970

如果您的 JSON 看起来像您说的那样，那么响应应该是字典，而不是数组，因此您不能在其上调用 objectAtIndex:0。日志应该是：

NSLog(@"%@", [responses objectForKey:@"response"]);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T04:49:18.427

亚历克我刚刚用我的解析器测试了它并且效果很好只需将你的响应转换为 NSDictionary 并尝试这个我只是用字符串尝试过

```
 NSString *string =@"{\"response\":\"session_exists\"}";
         JSONDecoder *value =[string objectFromJSONString];
         NSDictionary *dictionary = (NSDictionary *)value;
         NSLog(@"value %@",[dictionary objectForKey:@"response"]); 
```

价值是

```
 session_exists 
```

# jquery - 与 jquery 循环的外部链接

> ID：13795061
> 
> 赞同：0
> 
> 时间：2012-12-10T04:35:00.760
> 
> 标签：jquery, cycle, jquery-cycle

我想使用 jquery 循环将外部链接添加到导航按钮之一。让我们假设有 5 个按钮，我想做其中一个外部链接。有小费吗？

```
 $('#content').cycle({
        fx:     'scrollUp',
        speed:  'slow',
        timeout: 0,
        pager:  '#nav',
        pagerAnchorBuilder: function(idx, slide) {
            // return sel string for existing anchor
            return '#nav li:eq(' + (idx) + ') a';
        }           
    }); 
```

这就是我发现的，请看评论

```
 $('#content').click(function() { 
    $('#nav li:eq(2) a').trigger('click'); 
    **return '<a href="' + el.src + '">' + (i+1) + '</a>';** // this should be it but how do I implement so both triggers work accordingly?
}); 
```

和 html 大纲：

```
<div class="menu">                          
                            <ul id="nav">
                                <li class="home"><a href="#home" title="home" >Home</a></li>
                                <li class="about"><a href="http://www.dot.net/Resume.pdf" title="about" class="external">About</a></li>
                                <li class="networks"><a href="#networks" title="networks">Networks</a></li>
                                <li class="last contact"><a href="#contact" title="contact">Contact</a></li>
                            </ul>
                        <br class="spacer"/>
                        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:04:57.767

```
if (which == "resume"){     
      $('#nav li:eq(2) a').trigger('click'); 
    return '<a href="' + el.src + '" >' + (i+1) + '</a>'; 
```

这是我现在的解决方案。

# django - 使用 Django 的测试客户端，使用内存文件发出请求

> ID：13795063
> 
> 赞同：3
> 
> 时间：2012-12-10T04:35:33.107
> 
> 标签：django, django-testing

我正在为 Django 视图编写测试，我想发布一个文件。这是一个相当微不足道的测试，我不想在我的`tests/`目录中乱扔不同的文本文件，所以我想使用内存文件并动态创建内容：

```
from StringIO import StringIO
file = StringIO('content')
client.post("/", data={'file': file}) 
```

不幸的是，这不起作用：

```
Traceback (most recent call last):
  File "/Users/brad/project/tests/files.py", line 57, in test_set_and_save
    'mgmt-current_step': 'Attachments',
  File "/Users/brad/django/test/client.py", line 423, in post
    response = super(Client, self).post(path, data=data, content_type=content_type, **extra)
  File "/Users/brad/django/test/client.py", line 245, in post
    post_data = self._encode_data(data, content_type)
  File "/Users/brad/django/test/client.py", line 211, in _encode_data
    return encode_multipart(BOUNDARY, data)
  File "/Users/brad/django/test/client.py", line 117, in encode_multipart
    lines.extend(encode_file(boundary, key, value))
  File "/Users/brad/django/test/client.py", line 145, in encode_file
    content_type = mimetypes.guess_type(file.name)[0]
AttributeError: StringIO instance has no attribute 'name' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T04:35:33.107

Django 为 Python 的内置`file`对象提供了一组包装器。在这种情况下`django.core.files.base.ContentFile`适合：

```
from django.core.files.base import ContentFile
file = ContentFile(b'content', name='plain.txt')
client.post('/', data={'file': file}) 
```

`ContentFile`期望使用字节，所以不要给它 unicode 数据。

另一个技巧（如果您不关心文件的内容）是发送当前文件：

```
client.post('/', data={'file': open(__file__, 'rb')) 
```

# google-app-engine - 如何让 appstats 与 GAE 上的 webapp2 和扩展路由一起使用？

> ID：13795066
> 
> 赞同：2
> 
> 时间：2012-12-10T04:35:48.357
> 
> 标签：google-app-engine, python-2.7, webapp2, appstats

我正在尝试让 Appstats 在我的 GAE Python 应用程序上工作。我将 webapp2 与 python 2.7 一起使用。

我已按照[https://developers.google.com/appengine/docs/python/tools/appstats#Setup](https://developers.google.com/appengine/docs/python/tools/appstats#Setup)的说明进行操作，其中包括创建 appengine_config.py 文件：

```
def webapp_add_wsgi_middleware(app):
    from google.appengine.ext.appstats import recording
    app = recording.appstats_wsgi_middleware(app)
    return app 
```

并将以下几行添加到我的 app.yaml 中：

```
builtins:
- appstats: on 
```

我希望在其上使用 Appstats 的 python 应用程序如下所示：

```
import webapp2
from google.appengine.api import urlfetch
from google.appengine.ext import db
import appengine_config

class MainHandler(webapp2.RequestHandler):
    def get(self):
        self.response.write('Hello word!')

app = webapp2.WSGIApplication([
    webapp2.Route(r'/method1/', handler=Method1, name='method1'),
    webapp2.Route(r'/method2/', handler=Method2, name='method2'),
    webapp2.Route(r'/', handler=MainHandler, name='home')
], debug=True) 
```

`import appengine_config`（我在阅读 Appstats 的评论后尝试了[仅适用于一个 WSGIApplication](https://stackoverflow.com/questions/9738518/appstats-are-only-working-for-one-wsgiapplication#comment12399013_9738518)但这也不起作用）

我面临的问题是我可以看到 appstats 控制台，`/_ah/stats`但即使在向应用程序发出许多请求后它也没有记录任何内容。

我想知道这是否与我使用扩展 URL 路由的事实有关？我真的很想使用 webapps2 扩展路由，所以我希望 Appstats 没有问题。如果有人对我做错了什么有任何见解，那真的会有所帮助！

提前感谢负载！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:05:37.893

也许这会有所帮助：

1）我只在我的 app.yaml 中配置：

```
builtins:
- appstats: on 
```

2）和 appengine_config.py ：

```
# -*- coding: utf-8 -*-
from __future__ import unicode_literals

def webapp_add_wsgi_middleware(app):                    
    from google.appengine.ext.appstats import recording
    app = recording.appstats_wsgi_middleware(app)
    return app 
```

3) 我不必更改我的处理程序或路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T03:39:54.570

经过大量调查，事实证明我的问题的答案是一个粗心的错误。我以某种方式在`appengine_config.py`子文件夹而不是根文件夹中创建了该文件，但我没有注意到它，因为我一直在使用 IDE。

因此，如果有人遇到此问题，请确保：

1.  `appengine_config.py`在根文件夹中
2.  `appengine_config.py`包含上面提到的代码
3.  `app.yaml`包含`appstats: on`as a `builtins:`（如果可以访问`/_ah/stats`，这部分配置正确）

它应该工作。:)

# mamp - MAMP / PHP.INI：phpinfo() 中的“date.timezone”设置显示“无值”，即使该值是在 php.ini 中设置的

> ID：13795068
> 
> 赞同：9
> 
> 时间：2012-12-10T04:36:04.100
> 
> 标签：mamp, php

向 StackOverflow 大师致敬！

这是我正在努力解决的问题。

我在 MAMP 中运行 phpinfo()，结果表在 date.timezone 行的两列中都显示“无值”。

此外，该页面显示以下内容：

**警告：** phpinfo() [function.phpinfo]：依赖系统的时区设置是不安全的。您*需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。**我们在/Applications/MAMP/bin/mamp/phpinfo.php**中为 'EST/-5.0/no DST' 选择了 'America/New_York'

 **然而，在 php.ini 文件中，设置如下：

date.timezone = America/New_York

我预见到建议检查 php.ini 的路径是否正确 - 我已经这样做了，并且路径确实正确：/Applications/MAMP/conf/php5.3/php.ini - 那是文件设置了值。

我该如何解决这个问题？我错过了什么？

将不胜感激有知识的人的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-18T19:26:39.253

I know I might be a little late in answering this but I see on a few sites that you are asking about setting the correct timezone in MAMP.

It should be noted that there are two locations for a php.ini file for the version of php you are using. MAMP could be loading it from a different path then the one you are editing.

For example, lets say we are using php 5.3\. Here are two locations of a php.ini file that could confuse someone on which one to edit.

```
/Applications/MAMP/bin/php/php5.3/conf/php.ini 
```

You seem to be editing it at this location below:

```
/Applications/MAMP/conf/php5.3/php.ini 
```

Editing the timezone in the second path did not work for me but editing the one in the first one did. It could be that you are editing the wrong file even though it looks the same. I have tested this on my version. Running `<?php phpinfo(); ?>` in a php file and checking the path of the php.ini file will always show the correct path.

Also just to point out, using double quotes around the value of date.timezone will work. For example in my php.ini file the following works.

```
date.timezone = "America/Vancouver" 
```

Also the default value was encapsulated in double quotes as well.

I was also using MAMP version 2.1.1 when testing this out.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T04:32:12.783

如果在相关的 php.ini 文件中正确设置了时区并且您仍然收到此消息，您可以尝试设置您的 TZ 环境变量。编辑您的 .profile 以添加以下行（子在您自己的[时区字符串](http://us3.php.net/manual/en/timezones.php)中）：

```
export TZ="America/New_York" 
```

不知道为什么（a）MAMP 会覆盖您的 php.ini 设置，（b）PHP 在使用 TZ env 变量时不会发出通知/警告，即使它说会，但这个解决方案对我使用 MAMP 2.0.5 有效使用 PHP 5.3.6。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T04:48:12.700

Note that there are different versions of PHP in the **/Applications/MAMP/conf**. You should check which version you are using into the MAMP -> Preferences -> Tab "PHP"

If set to 5.4.4, you must access **/Applications/MAMP/conf/php5.4.4/php.ini**

@edit

**Run in Terminal this:**

```
sed -i '$ a\date.timezone = "America/New_York"' /Application/MAMP/conf/php{5.4.4,5.2.17,5.3.13,5.3.14,5.3.5,5.4.3}/php.ini 
```

or

```
sed -i 's/date.timezone = "Europe/Berlin"/date.timezone = "America/New_York"/g' /Application/MAMP/conf/php{5.4.4,5.2.17,5.3.13,5.3.14,5.3.5,5.4.3}/php.ini 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-04T21:49:40.513

如果此错误出现在 PHP 的终端 CLI 使用中，则可能是本机与 MAMP PHP 冲突的问题。

MacOS X 预装了自己的 PHP 版本，当您键入`php`. MAMP 的 PHP 配置与预安装的 PHP 配置是分开的：更改 MAMP PHP 时区设置不会影响您在 CLI 中看到的内容 - 因此时区错误仍然存​​在。一个快速的检查方法是运行`which php`——如果你没有看到一个开始的路径，`/Applications/MAMP/...`你需要调整你的环境。

为此，请编辑一个`.profile`（或 bash RC 文件）文本文件并将这一行添加到其中：

```
export PATH="/Applications/MAMP/bin/php5.5.3/bin:$PATH" 
```

调整上述路径以指向所需的 MAMP PHP 安装。然后运行：

```
. ~/.profile
hash -r 
```

这将立即应用 PATH 更改（否则您需要打开一个新的终端窗口来应用更改）。第二个命令只是一个 bash CLI 缓存清除命令。

作为最后的检查，运行`which php`以验证正在使用哪个 PHP 安装路径。希望这可以帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-02T08:45:31.093

在 Ubuntu 13.10 中使用 php 5.5.3 打开你的终端并执行

```
cd /

sudo find -name php.ini 
```

它为我显示了两个文件 php.ini 它的结果：

```
 ./etc/php5/apache2/php.ini
    ./etc/php5/cli/php.ini 
```

使用 sudo 打开两个文件，我使用 nano

```
sudo nano /etc/php5/apache2/php.ini 
```

找到并编辑这一行：

```
;date.timezone = 
```

并更改为：

```
date.timezone = America/Caracas 
```

保存并关闭此文件并编辑另一个

```
sudo nano /etc/php5/cli/php.ini 
```

找到并编辑这一行：

```
;date.timezone = 
```

并更改为：

```
date.timezone = America/Caracas 
```

保存并关闭并重新启动apache

```
sudo service apache2 restart 
```

# 这个对我有用！！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-16T20:33:39.623

`grep -lr "Berlin" * | xargs sed -i .backup -e 's#Europe/Berlin#America/New_York#g'`

就我而言，上面的命令需要一些技巧。这也将创建备份文件。**

# java - 比较通用项目？

> ID：13795069
> 
> 赞同：1
> 
> 时间：2012-12-10T04:36:11.487
> 
> 标签：java, generics, compare, project

我目前被困在代码的特定部分。对于我的班级，我们将创建一个包含载人或货物的棚车的火车。我们使用泛型来定义棚车是否可以载人或载货。然后我们将个人/货物加载到棚车上，如果它与已经在棚车上的人具有相同的字符串“ID”，那么我们记录一个错误并且不加载那个人/货物。这就是我遇到麻烦的地方。我一生都无法弄清楚如何比较他们的“ID”以查看它们是否相等。以下是我到目前为止的代码，

```
package proj5;

public class Person implements Comparable<Person> {

private String id;
private String name;
private int age;

public Person(String id, String name, int age){
    this.id = id;
    this.id = id;
    this.name = name;
    this.age = age;
}   

public Person(String id){
    this.id = id;
}

public String getId(){
    return id;
}

public int getAge(){
    return age;
}

public String getName(){
    return name;
}

public String toString(){
    String str = "        " + "ID: " + id + "  " + " Name: " + name + "  " + " Age: " + age;
    return str;
}

public int compareTo(Person p) {
    int result = this.id.compareTo(p.getId());
    return result;
} 
```

}

```
package proj5;

import java.util.ArrayList;
import java.util.List;
import java.util.Collections;

public class Boxcar<T extends Comparable<T>> {

private ArrayList<T> boxcar;
private int maxItems;
private int boxcarID;

public Boxcar(){
    boxcar = new ArrayList<T>();
}

public void load(T thing){
    for(int i = 0; i < boxcar.size(); i++){
    if(boxcar.size() < maxItems && !boxcar.get(i).equals(thing)){
        boxcar.add(thing);
        System.out.println(boxcar.get(i));
    }
    else{
        boxcar.remove(thing);
    }
    }
    Collections.sort(boxcar);
}

public int getBoxcarId(){
    return boxcarID;
}

public int getMaxItems(){
    return maxItems;
}

public void setMaxItems(int i){
    maxItems = i;
}

public void unload(T thing){
    for(T item : boxcar){
        if(item.equals(thing)){
            boxcar.remove(item);
        }
    }
}

public List<T> getBoxcar(){
    return boxcar;
}

public String toString(){
    String str = "";
    for(T item : boxcar){
        str += item + "\n";
    }
    return str;
} 
```

}

问题出在我的加载功能上。我不知道如何比较他们的ID。为澄清起见，对象 ID 是字符串。我还有其他课程，但我只包括了我认为必要的课程。如果您需要更多文件，我很乐意提供。我已经坚持了几个小时，希望有任何帮助！非常感谢您！

编辑：我尝试使用 Collections API 中的 contains() 方法，但为什么这不起作用？听起来它会完美运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:46:13.677

You have to implement the equals and hashCode for your class Person.

The problem is that `boxcar.get(i).equals(thing)` is calling the generic equals and its only comparing the references.

so a generic equals will look like.

```
public boolean equals(Object obj){
  if (obj == null) return false;
  if (obj == this) return true;
  if (obj instanceof Person){
    Person p = (Person) obj;
    return p.getId().equals(this.getId());
  }
  return false;
} 
```

and hashCode can be like this

```
public int hashCode(){
  return 37*this.getId().hashCode();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T04:51:35.860

我认为问题在于`boxcar = new ArrayList<T>();`因为它可以包含人员/货物。如果它包含所有人对象，那么您的代码就可以了。但是因为它也可以包含货物，所以它显示了问题。

所以你能做的就是检查它的对象是否是人然后只检查比较。

```
public boolean equals(Object obj){
 if (obj instanceof Person){
   Person p = (Person) obj;
   return p.getId().equals(this.getId());
 }
 return true;
} 
```

如果你重写 equals 方法，那么你还必须重写 [hashCode](https://stackoverflow.com/questions/2265503/why-do-i-need-to-override-the-equals-and-hashcode-methods-in-java)方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T05:18:18.410

接受的答案可以供您使用，实际上可以用于测试相等性，但是考虑一下它确实会留下一个问题：因为您的`Boxcar`类是通用的，所以这将依赖于它所持有的已实现`equals()`和`hashcode()`. 您的`load()`方法本身也有问题。

由于您使用`<T extends Comparable<T>>`then 限制泛型，因此您可以简单地执行以下操作：

```
if (boxcar.get(i).compareTo(thing) == 0) { 
```

检查是否相等，因为`compareTo()`将返回`0`完全匹配。

您的`load()`方法不正确；`ArrayList`它一遍又一遍地迭代并添加相同的东西。为了满足您发布的标准，它需要类似于：

```
public void load(T thing) {
    boolean found = false;

    // Go through ArrayList and see if thing exists
    for (int i = 0; i < boxcar.size(); i++){
        if (boxcar.get(i).compareTo(thing) == 0) { 
            System.out.println(thing + " already exists");
            found = true;
            break;
        }
    }

    // If the thing didn't exist, add it, and sort the ArrayList    
    if (!found) {
        boxcar.add(thing);
        System.out.println("Added " + thing);
        Collections.sort(boxcar);
    }
} 
```

现在它适用于您`People`和您的`Cargo`

现在......对于奖励积分，由于您`ArrayList`每次添加项目时都会对您的项目进行排序，因此您可以使用二进制搜索而不是线性搜索。方便的是，[Java Collections 类](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html)中为此提供了一个——它依赖于一个排序列表，其中包含实现的东西`Comparable`：

```
public void load(T thing) {

    // See if the thing exists. binarySearch returns an index if it's there
    // or a negative number if it's not
    if (Collections.binarySearch(boxcar, thing) >= 0) {
        System.out.println(thing + " already exists");
    } else {
        boxcar.add(thing);
        System.out.println("Added " + thing);
        Collections.sort(boxcar);
    }
} 
```

**由于评论而编辑添加：**您还需要更改您的`unload()`方法。同样，我们`compareTo()`用于检查相等性。另外......一旦你找到它，你就不会打破你的循环。由于我们知道工作方式不能重复，`load`并且您永远不想在迭代列表时修改它：

```
public void unload(T thing){
    for(T item : boxcar){
        if(item.compareTo(thing) == 0) {
            boxcar.remove(item);
            break;
        }
    }
} 
```

请注意，这里有一点细微差别。我们确保使用`item`with `remove()`。这是因为`remove()`依赖于`equals()`默认情况下将使用对象的引用值。`item`并且同等`thing` *比较*，但是是同一类的两个不同实例。通过给`remove()`它`item`知道从列表中删除*该*实例。

更好的是，因为它更快并且避免了这种情况......`binarySearch()`通过索引使用和删除！

```
public void unload(T thing){
    int index = Collections.binarySearch(boxcar, thing);
    if (index >=0) {
        boxcar.remove(index);
    }
} 
```

# xml - xslt 生成的表中的 URL 重定向到该页面

> ID：13795070
> 
> 赞同：0
> 
> 时间：2012-12-10T04:36:20.667
> 
> 标签：xml, xslt, html-table

我正在通过 XSLT 将 XML 文件中的数据转换为 HTML 页面上的表格。（使用 javascript 代码调用 XML 和 XSLT 文件，该代码与[客户端页面上 w3schools XSLT 上的](http://www.w3schools.com/xsl/xsl_client.asp)代码相同。）我的一个 XML 字段包含一个 URL。我的转换为该字段创建了一个 href 属性，但不是从 XML 文件中发布 URL，而是将其替换为该表将存在的 HTML 页面的 URL。

我的 XML 如下所示：

```
<database>
<Table>
<Title>Title</Title>
<URL value="www.link.com">Watch this video</URL>
</table> 
```

我的 XSLT 看起来像这样：

```
<table>
<tr>
<th>Title</th>
<th>URL</th>
</tr>
<xsl:for-each select="database/table">
<tr>
<td><xsl:value-of select="Title"/></td>
<td>
<a>
<xsl:attribute name="href">
<xsl:value-of select="URL/@VALUE"/>
</xsl:attribute>
<xsl:value-of select="URL"/>
</a>
</td>
</tr>
</xsl:for-each>
</table> 
```

但在 HTML 页面上，“观看此视频”链接不是“www.link.com”而是“www.HTMLpage.com”。如果我将 XSL 转换添加到 XML 文档并在浏览器中打开它，也会发生同样的事情 - 链接仍然指向该页面的地址，而不是我想要它们的外部地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:14:19.383

**XPath 区分大小写**。

**替换**：

```
<xsl:value-of select="URL/@VALUE"/> 
```

**与**：

```
<xsl:value-of select="URL/@value"/> 
```

**现在，当应用于提供的 XML 文档（也需要类似的更正和结束标记）时，更正转换的结果会产生所需的结果**：

```
<table>
   <tr>
      <th>Title</th>
      <th>URL</th>
   </tr>
   <tr>
      <td>Title</td>
      <td>
         <a href="www.link.com">Watch this video</a>
      </td>
   </tr>
</table> 
```

# php - PHP：提高面向对象类的加载时间

> ID：13795073
> 
> 赞同：-2
> 
> 时间：2012-12-10T04:36:42.977
> 
> 标签：php, oop, design-patterns

*注意：这个问题有点长*

我有一个基于 PHP 的系统，其`Service-Dao-Model`结构如下：

```
Service Factory > Foo Service > Core Service > Abstract Service > Service Interface
Dao Factory > Foo Dao > Core Dao > Abstract Dao > Dao
Foo > Core Model > Abstract Model 
```

让我一点一点地解释。我尝试首先通过在*Abstract & Interface 类中定义抽象函数来集中代码，然后在**Core Service、Core Dao 和 Core Model*中实现默认行为。

然后，自定义函数编写在**Foo Service、Foo Dao 和 Foo Model**中。最后，**Service Factory & Dao Factory**负责在[Factory Pattern](http://en.wikipedia.org/wiki/Factory_method_pattern)中创建对象。

其他信息：所有类都`log4php`附有对象`__construct()`。

在目前的开发状态下，我在初始化阶段加载了大约 65 个 PHP 类。通过添加计时器（timed by `microtime(true)`），我发现 PHP 在加载类时花费的时间最多（0.02119s），接下来是将 DB 结果集转换为对象值（0.00608s），最后是 DB 查询时间（0.00223s）。无法相信类加载时间是数据库查询时间的 10 倍！

**问题**：如何提高加载类的 PHP 初始化时间？

版本：PHP 5.2.16，通过 MySQLi PHP 扩展连接到 MySQL 5.1 localhost 服务器

**更新**eAccelerator 预装在共享主机中！`Zend Engine v2.2.0 with eAccelerator v0.9.6.1`

*如果需要，可以共享 ps 代码。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:49:54.757

如果类加载时间很慢，我会假设您正在使用某种自动加载。考虑一种类似于 Symfony 的 APC 类加载器的方法：

[http://symfony.com/doc/current/components/class_loader.html](http://symfony.com/doc/current/components/class_loader.html) https://github.com/symfony/ClassLoader

它背后的想法是它将类路径缓存在 APC 中，因此不会为每个请求遍历用于自动加载的包含路径。无论如何，我认为如果实际的 php 加载比 DB 慢，则存在一些架构问题，如果它比 ORM 层慢，则更是如此……根据我的经验，加载时间通常是相反的。特别是 PHP 的哪些部分最慢。您可以使用的另一种方法也是 symfony 的一个想法，您有一个部署脚本，该脚本在部署时将所有类合并到一个文件中，减少文件系统调用，但我不知道这在您的情况下是否实用，它肯定速度提升。基本上每次你有一个文件系统操作它都非常慢，所以尽可能避免它..

# android - 是否可以在opengl es 2.0中获取存储在纹理中的数据

> ID：13795076
> 
> 赞同：2
> 
> 时间：2012-12-10T04:37:12.750
> 
> 标签：android, opengl-es-2.0, glsl

我现在正在编写一个程序，在 GL 着色语言的帮助下使用 GPU 生成纹理。但是，我想知道是否可以获取存储在纹理中的数据并将其写入数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:01:35.790

这没什么大不了的，如果你有[glGetTexImage*()](http://www.opengl.org/sdk/docs/man/xhtml/glGetTexImage.xml)。

如果 glGetTexImage*() 不可用，您必须将带纹理的四边形渲染到渲染缓冲区，该渲染缓冲区附加到 FBO（如果支持）或后缓冲区，并使用 glReadPixels() 从任一渲染目标读取它。如果渲染目标大小不足，则必须分别渲染和检索多个图块。

在实现这两种方法时，请注意其他状态，这些状态决定了像素实际写入的方式和位置：

*   `GL_PACK_ALIGNMENT`（图像行对齐；1、2、4 或 8 个字节）需要为请求的图像大小分配适当的内存。例如，24 位 DIB (.bmp) 使用 4 字节的行对齐。每个像素有 3 个字节，如果`(image.width * 3) % 4 != 0`. 额外填充字节的总量为：

    `readSize.y * ((alignment - readSize.x % alignment) % alignment)`.

*   `GL_PIXEL_PACK_BUFFER`，像素传输的目标缓冲区绑定（在您的情况下可能未使用并显式设置为 0）。

# ruby-on-rails - Postgresql 表值与 Ruby on Rails Active Record 查询结果不匹配

> ID：13795080
> 
> 赞同：5
> 
> 时间：2012-12-10T04:37:35.480
> 
> 标签：ruby-on-rails, postgresql, activerecord, rails-console

我在 Postgresql 中有一个名为monthly_trips 的表。有一行值 id = 3 & al = 107.415。我的问题是当我尝试访问 rails 中“al”列的值时。使用带有以下代码的 Rails 控制台，我得到 6154.426156397738 的结果。我不知道是什么产生了这个更大的数字（准确地说是 57.295779513 倍）。任何帮助将不胜感激！如果您需要更多信息，请与我们联系。

```
trip = MonthlyTrip.find(3)
result = trip.al 
```

每月旅行.rb

```
class MonthlyTrip < ActiveRecord::Base
  attr_accessible :al, :month, :vehicle_id, :year
  belongs_to :vehicle
end 
```

psql 输出（选择 id，al frommonthly_trips where id = 3;）

```
 id |   al    
----+---------
  3 | 107.415
(1 row) 
```

psql 输出（\d 每月一次）

```
 Table "public.monthly_trips"
   Column   |            Type             |                         Modifiers                          
------------+-----------------------------+------------------------------------------------------------
 id         | integer                     | not null default nextval('monthly_trips_id_seq'::regclass)
 vehicle_id | integer                     | 
 year       | integer                     | 
 month      | integer                     | 
 al         | numeric(9,3)                | 
 ak         | numeric(9,3)                | 
 az         | numeric(9,3)                | 
 ar         | numeric(9,3)                | 
 ca         | numeric(9,3)                | 
 co         | numeric(9,3)                | 
 ct         | numeric(9,3)                | 
 de         | numeric(9,3)                | 
 fl         | numeric(9,3)                | 
 ga         | numeric(9,3)                | 
 hi         | numeric(9,3)                | 
 ida        | numeric(9,3)                | 
 il         | numeric(9,3)                | 
 ind        | numeric(9,3)                | 
 ia         | numeric(9,3)                | 
 ks         | numeric(9,3)                | 
 ky         | numeric(9,3)                | 
 la         | numeric(9,3)                | 
 me         | numeric(9,3)                | 
 md         | numeric(9,3)                | 
 ma         | numeric(9,3)                | 
 mi         | numeric(9,3)                | 
 mn         | numeric(9,3)                | 
 ms         | numeric(9,3)                | 
 mo         | numeric(9,3)                | 
 mt         | numeric(9,3)                | 
 ne         | numeric(9,3)                | 
 nv         | numeric(9,3)                | 
 nh         | numeric(9,3)                | 
 nj         | numeric(9,3)                | 
 nm         | numeric(9,3)                | 
 ny         | numeric(9,3)                | 
 nc         | numeric(9,3)                | 
 nd         | numeric(9,3)                | 
 oh         | numeric(9,3)                | 
 ok         | numeric(9,3)                | 
 ore        | numeric(9,3)                | 
 pa         | numeric(9,3)                | 
 ri         | numeric(9,3)                | 
 sc         | numeric(9,3)                | 
 sd         | numeric(9,3)                | 
 tn         | numeric(9,3)                | 
 tx         | numeric(9,3)                | 
 ut         | numeric(9,3)                | 
 vt         | numeric(9,3)                | 
 va         | numeric(9,3)                | 
 wa         | numeric(9,3)                | 
 wv         | numeric(9,3)                | 
 wi         | numeric(9,3)                | 
 wy         | numeric(9,3)                | 
 created_at | timestamp without time zone | not null
 updated_at | timestamp without time zone | not null
Indexes:
    "monthly_trips_pkey" PRIMARY KEY, btree (id) 
```

迁移文件

```
class CreateMonthlyTrips < ActiveRecord::Migration
  def change
    create_table :monthly_trips do |t|
      t.integer :vehicle_id
      t.integer :year
      t.integer :month
      t.decimal :al, precision: 9, scale: 3
      t.timestamps
    end
  end
end 
```

pg_locks 表

```
locktype | database | relation | virtualxid | virtualtransaction | pid | mode | granted

"relation" | 11955 | 11000 | blank | "8/18417" | 25475 | "AccessShareLock" | TRUE

"virtualxid" | blank | blank | "8/18417" | "8/18417" | 25475 | ExclusiveLock" | TRUE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:13:30.890

您的“trip”变量会产生一个数组，这就是它返回 BigDecimal 的原因

您可以使用这种方法：

1) 表示 ActiveRecord 返回的第一个值

```
trip = MonthlyTrip.find(3).first
result = trip.al 
```

或者

2）循环在数据库中找到的每个元素。

> trip = MonthlyTrip.find(3) trip.each 做 |t| 结束

# iphone - 音频播放但视频视图未加载

> ID：13795083
> 
> 赞同：1
> 
> 时间：2012-12-10T04:37:58.657
> 
> 标签：iphone, ios, mpmovieplayercontroller

我已经为 VUforia Qualcomm SDK 使用了 VideoPlayback 示例，以下是我的应用程序流程：

当应用程序启动时，视图带有一个按钮。当您按下按钮时，将加载增强现实视图。

我已经成功地创建了一个新的视图控制器，我将 VideoPlaybackAppDelegate 中的所有功能都放入其中。它有效，它检测到目标并向我显示图像和播放按钮。当我点击按钮时，声音开始播放。但是 MoviePlayerView 没有加载到屏幕上。

我发现负责这个的行在 VideoPlayerHelper.m 中：

```
// Add the MPMoviePlayerController's view to the

        // arParentViewController's view

        VideoPlaybackAppDelegate* appDelegate = [[UIApplication sharedApplication] delegate];

        [[appDelegate arParentViewController] addMoviePlayerViewToMainView:moviePlayer.view]; 
```

所以我把它改成：

```
(ARview is my customView Controller)

ARView *myview = [[ARView alloc]init];

            [[myview arParentViewController]  addMoviePlayerViewToMainView:moviePlayer.view]; 
```

有了这个，我可以播放有声视频。但是电影播放器​​没有加载；声音播放，屏幕上没有视频。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T13:47:22.597

我遇到过类似的情况，Vuforia VideoPlayback + Unity + Android，有声音但没有视频，只是注意到在设计模式下视频 url 路径错误（无效），并且在运行应用程序并尝试通过代码更改路径时会产生这个问题。可能在初始化视频时出现错误，目前还不确定。但是，当用现有路径替换设计模式下的 url 路径并运行我的应用程序并再次通过代码更改 url 时，一切正常。希望能帮到你

马里亚诺

# bash - 有没有办法从 bash 中提取 pdf 的内容？

> ID：13795091
> 
> 赞同：8
> 
> 时间：2012-12-10T04:39:35.590
> 
> 标签：bash

有没有办法从 bash 中提取 pdf 的内容？（我有一个很大的学术论文文件夹，很遗憾有“1010.3423.pdf”之类的标签。我想编写一个 bash 脚本来更合理地命名它们，这涉及到谷歌搜索前几行。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T04:44:44.830

There is [pdftotext](http://en.wikipedia.org/wiki/Pdftotext), which can help you get the title and authors from the pdf file. You can then use this to google, or generate a filename yourself.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T04:47:11.577

try pdftotext to extract the text? [http://en.wikipedia.org/wiki/Pdftotext](http://en.wikipedia.org/wiki/Pdftotext)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T04:52:27.283

pdf2xml 会为您提供更详细的信息，我去年一直在寻找这样的实用程序，其中我认为[pdf2xml](http://sourceforge.net/projects/pdf2xml/?source=navbar)是最好的。

# ios - 在 UITabController 中使用 UIScrollview 显示 UIImageView 不显示所有页面

> ID：13795103
> 
> 赞同：1
> 
> 时间：2012-12-10T04:41:07.453
> 
> 标签：ios, uiscrollview, uipagecontrol, uiscrollviewdelegate

我正在关注[如何使用 UIScrollView 滚动和缩放内容](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)的“使用 UIScrollView 进行分页”部分，并将4 个图像加载到数组中。我应该提到我正在将它加载到 UITabController 中，它是情节提要中的第一个视图控制器。

由于某种原因，视图加载时会出现两个问题：

一，页面控件不响应来自 UIScrollView 的更新（点根本不移动，而是用正确的页数计算）。

二，只有前两个页面加载，这让我认为 loadVisiblePages 方法不起作用。

从 View Controller 的 First Responder 连接起来的是一个 page control 到 pageControl 和一个 Scroll View 到 scrollView 和 view 到 View （默认），最后是关系 segue。

**更新**：我刚刚发现了关于这个问题的一些有趣的东西。如果我转到第 3 页（数组中的 3 个图像），我看不到图像。但是如果我切换选项卡，页面控件和图像都会正确显示。

标题：

```
#import <UIKit/UIKit.h>

@interface TutorialViewController : UIViewController <UIScrollViewDelegate>

@property (nonatomic, strong) IBOutlet UIScrollView *scrollView;
@property (nonatomic, strong) IBOutlet UIPageControl *pageControl;

@end 
```

实施：

```
#import "TutorialViewController.h"

@interface TutorialViewController ()
@property (nonatomic, strong) NSArray *pageImages;
@property (nonatomic, strong) NSMutableArray *pageViews;

- (void)loadVisiblePages;
- (void)loadPage:(NSInteger)page;
- (void)purgePage:(NSInteger)page;
@end

@implementation TutorialViewController

@synthesize scrollView = _scrollView;
@synthesize pageControl = _pageControl;

@synthesize pageImages = _pageImages;
@synthesize pageViews = _pageViews;

- (void)loadPage:(NSInteger)page {
    if (page < 0 || page >= self.pageImages.count) {
        // If it's outside the range of what you have to display, then do nothing
        return;
    }

    // 1
    UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView == [NSNull null]) {
        // 2
        CGRect frame = self.scrollView.bounds;
        frame.origin.x = frame.size.width * page;
        frame.origin.y = 0.0f;

        // 3
        UIImageView *newPageView = [[UIImageView alloc] initWithImage:[self.pageImages objectAtIndex:page]];
        newPageView.contentMode = UIViewContentModeScaleAspectFit;
        newPageView.frame = frame;
        [self.scrollView addSubview:newPageView];
        // 4
        [self.pageViews replaceObjectAtIndex:page withObject:newPageView];
    }
}

- (void)purgePage:(NSInteger)page {
    if (page < 0 || page >= self.pageImages.count) {
        // If it's outside the range of what you have to display, then do nothing
        return;
    }

    // Remove a page from the scroll view and reset the container array
    UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView != [NSNull null]) {
        [pageView removeFromSuperview];
        [self.pageViews replaceObjectAtIndex:page withObject:[NSNull null]];
    }
}

- (void)loadVisiblePages {
    // First, determine which page is currently visible
    CGFloat pageWidth = self.scrollView.frame.size.width;
    NSInteger page = (NSInteger)floor((self.scrollView.contentOffset.x * 2.0f + pageWidth) / (pageWidth * 2.0f));

    // Update the page control
    self.pageControl.currentPage = page;

    // Work out which pages you want to load
    NSInteger firstPage = page - 1;
    NSInteger lastPage = page + 1;

    // Purge anything before the first page
    for (NSInteger i=0; i<firstPage; i++) {
        [self purgePage:i];
    }

    // Load pages in our range
    for (NSInteger i=firstPage; i<=lastPage; i++) {
        [self loadPage:i];
    }

    // Purge anything after the last page
    for (NSInteger i=lastPage+1; i<self.pageImages.count; i++) {
        [self purgePage:i];
    }
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    // Load the pages that are now on screen
    [self loadVisiblePages];
}

- (void)viewDidLoad {
    [super viewDidLoad];

    // 1
    self.pageImages = [NSArray arrayWithObjects:
                       [UIImage imageNamed:@"640x960 tutorial_1.png"],
                       [UIImage imageNamed:@"640x960 tutorial_2.png"],
                       [UIImage imageNamed:@"640x960 tutorial_3.png"],
                       [UIImage imageNamed:@"640x960 tutorial_4.png"],
                       nil];

    NSInteger pageCount = self.pageImages.count;

    // 2
    self.pageControl.currentPage = 0;
    self.pageControl.numberOfPages = pageCount;

    // 3
    self.pageViews = [[NSMutableArray alloc] init];
    for (NSInteger i = 0; i < pageCount; ++i) {
        [self.pageViews addObject:[NSNull null]];
    }
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    // 4
    CGSize pagesScrollViewSize = self.scrollView.frame.size;
    self.scrollView.contentSize = CGSizeMake(pagesScrollViewSize.width * self.pageImages.count, pagesScrollViewSize.height);

    // 5
    [self loadVisiblePages];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:51:50.363

我终于弄明白了。

用户错误。我将 View 而不是我的 ViewController 链接为故事板中的委托。

感谢您的观看，我希望这对其他人有所帮助，这样他们就不必在两天内拔掉头发！

# jquery - JQuery Ajax 错误文本

> ID：13795104
> 
> 赞同：2
> 
> 时间：2012-12-10T04:41:29.073
> 
> 标签：jquery, ajax, servlets, response

我想从 Java Servlet 设置有关 Ajax 错误操作的错误消息。

```
request.setAttribute(BreezeWebConstants.ERROR_MESSAGE, errMsg);
response.setStatus(HttpServletResponse.SC_FORBIDDEN);

error : function(jqXHR, textStatus, errorThrown) {
alert("Move Ticket Error - " + textStatus);
console.log("Move Unknown Ticket Error");
} 
```

textStatus 是在 Jquery 中预定义的，但我需要在 java servlet 中设置自定义错误消息并在此错误函数上检索它。怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:33:35.773

只需将错误消息作为纯文本或 XML 或 JSON 写入响应正文。

这是一个假设纯文本的示例：

```
response.setStatus(HttpServletResponse.SC_FORBIDDEN);
response.setContentType("text/plain;charset=UTF-8");
response.setCharacterEncoding("UTF-8");
response.getWriter().write(errMsg); 
```

您可以按如下方式提取它：

```
var message = jqXHR.responseText; 
```

请注意，jQuery 也有内置的 XML 和 JSON 解析，所以它也很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:31:50.987

尝试使用[$.ajaxSetup()](http://api.jquery.com/jQuery.ajaxSetup/)来获得正确的错误，如下所示：

```
$(function() {
    $.ajaxSetup({
        error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                alert('Move Ticket Error - Not connect.\n Verify Network.');
            } else if (jqXHR.status == 404) {
                alert('Move Ticket Error - Requested page not found. [404]');
            } else if (jqXHR.status == 500) {
                alert('Move Ticket Error - Internal Server Error [500].');
            } else if (exception === 'parsererror') {
                alert('Move Ticket Error - Requested JSON parse failed.');
            } else if (exception === 'timeout') {
                alert('Move Ticket Error - Time out error.');
            } else if (exception === 'abort') {
                alert('Move Ticket Error - Ajax request aborted.');
            } else {
                alert('Uncaught Move Unknown Ticket Error.\n' + jqXHR.responseText);
            }
        }
    });
}); 
```

只需打一个ajax调用。如果出现任何错误，您将收到警报。

# .net - .Net 中是否有类似 ConcurrentSet 的东西？

> ID：13795105
> 
> 赞同：2
> 
> 时间：2012-12-10T04:41:32.927
> 
> 标签：.net, concurrency, thread-safety, concurrentdictionary

我使用了`ConcurrentDictionary`in .Net 并爱上了使用它编写并发类是多么容易。

现在，我有一个不同的场景。我基本上需要跟踪非重复无序列表中的单个对象类型，所以基本上是一个`Set<T>`类型的东西，除了它需要我所期望的所有线程安全性`ConcurrentDictionary`，所以有类似`GetOrAdd`.

.Net中是否有类似的东西？

我考虑过只使用 ConcurrentDictionary 并且只担心密钥，而从不使用值，但这似乎非常不理想

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:24:10.547

不，但您可以通过引用 FSharp.Core.dll 并使用 Microsoft.FSharp.Collections 创建线程安全集。

只需使用 interlocked.CompareExhchange 包装添加和删除。

性能随集合大小而变化。但是你应该能够处理几十万套物品。

这处理大量线程读取和写入集合。

此外，“锁”（不是真正的锁，只是原子动作的区域）围绕着两行之间的所有内容：

初始集 = 共享集；

和

done = (initialSet == Interlocked.CompareExchange(ref sharedSet, newSet, initialSet));

```
 FSharpSet<MyClass> _myItems;

 InterLockedSetAdd(ref _myItems, Item);

    public static void InterLockedSetAdd<T>(ref FSharpSet<T> sharedSet, T item)
    {

        FSharpSet<T> initialSet;
        FSharpSet<T> newSet;
        var spin = new SpinWait();
        bool done = false;

        while (!done)
        {
            initialSet = sharedSet;
            newSet = sharedSet.Add(item);
            done = (initialSet == Interlocked.CompareExchange(ref sharedSet, newSet, initialSet));
            if (!done) spin.SpinOnce();
        }
    } 
```

# c++ - 是否可以安全地假设 64 位指针中的 16 个高位（2 个对我来说就足够了）未设置？

> ID：13795108
> 
> 赞同：2
> 
> 时间：2012-12-10T04:42:21.583
> 
> 标签：c++, 64-bit, bit-manipulation, x86-64, virtual-address-space

我正在构建一个数据结构，它将每 2 位或 3 位设置为 64 位整数。

如果我可以交替地在这个结构中存储一个指针（当它们是树中的终端节点时，但这不相关），那对我来说会很方便。

出于我的表示的目的（保证设置最高或第二高位），如果可以假设指针永远不会设置其最高两位，即这个断言成立：

```
void *sixty_four_bit_pointer = a_valid_address(); 
bool always_zero = 0xC000000000000000 & sixty_four_bit_pointer; 
```

那么我可以做到这一点！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T04:50:09.203

这通常是不安全的。正是这些程序使用了这样的技巧，导致了`/LARGEADDRESSAWARE`Windows 中的标志。（又名“这就是我们不能拥有美好事物的原因。”）

您可以做的是使用底部位而不是顶部位。由于您的结构包含一个指针，它已经是 8 字节对齐的，这意味着底部三位始终为 0，因此您可以将这些位用作标记位。

# android - 使用 Android 签到时上传 FourSquare 照片

> ID：13795109
> 
> 赞同：0
> 
> 时间：2012-12-10T04:42:22.800
> 
> 标签：android, foursquare

我需要使用 FourSquare 在签到时上传照片。如果有人这样做，请帮助我传递参数。我参考了 FourSquare 官方文档： [https](https://developer.foursquare.com/docs/photos/add) ://developer.foursquare.com/docs/photos/add 。我在最后三个参数中面临问题。如果你已经完成了，请帮助我。谢谢你提前......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:01:15.137

参数`postUrl`、`postContentId`和`postText`是可选的，因此您不需要提供它们。`postUrl`并`postContentId`用于提供您的照片可以链接到的链接以获取更多信息。`postText`是关于照片的简短评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T09:50:29.410

/* * 将foursquare sdk 文件放入projects libs 文件夹，后面的代码放入Activity 文件*/

```
todaydate = Latest Date;
venueId = The Venue Id is important.
URL = The image url from which the image will be downloaded to sd card;

foursquare = new Foursquare(
        "Your Client Id", //*client id
        "Your Client Secret", //*client secret
        "Callback Url");

foursquare.authorize(ActivityName.this, new FoursquareAuthenDialogListener());

// Creates Bitmap from InputStream and returns it   
private Bitmap downloadImage(String url) {
    Bitmap bitmap = null;
    InputStream stream = null;
    BitmapFactory.Options bmOptions = new BitmapFactory.Options();
    bmOptions.inSampleSize = 1;

    try {
        stream = getHttpConnection(url);
        bitmap = BitmapFactory.decodeStream(stream, null, bmOptions);
        stream.close();
    } catch (IOException e1) {
        e1.printStackTrace();
    }
    return bitmap;
}

// Makes HttpURLConnection and returns InputStream
private InputStream getHttpConnection(String urlString)
        throws IOException {
    InputStream stream = null;
    URL url = new URL(urlString);
    URLConnection connection = url.openConnection();

    try {
        HttpURLConnection httpConnection = (HttpURLConnection) connection;
        httpConnection.setRequestMethod("GET");
        httpConnection.connect();

        if (httpConnection.getResponseCode() == HttpURLConnection.HTTP_OK) {
            stream = httpConnection.getInputStream();
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    return stream;
}

@SuppressLint("SdCardPath")
private class FoursquareAuthenDialogListener implements DialogListener {

    @Override
    public void onComplete(Bundle values) {

        foursquareAccessToken = Foursquare.mAccessToken;
        //Toast.makeText(getApplicationContext(), "TOKEN: " + foursquareAccessToken, Toast.LENGTH_LONG).show();

        new downloadUploadedImage().execute();

    }

    @Override
    public void onFoursquareError(FoursquareError e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onError(DialogError e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onCancel() {
        // TODO Auto-generated method stub

    }
}

/*
 * downloadUploadedImage Class will download image from url and convert to bitmap image,
 * using that bitmap image then convert it to file and get the file path from sd card 
 * to upload image to fs from sdcard.
 */
public class downloadUploadedImage extends AsyncTask<String, Void, String>{

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        dialog = ProgressDialog.show(MyActivityName.this, "", "Posting Image to Foursquare...", true);
    }

    @Override
    protected String doInBackground(String... params) {

        bitMapImage = downloadImage(URL);
        writeExternalToCache(bitMapImage, file);
        return null;
    }

    @Override
    protected void onPostExecute(String result){
        super.onPostExecute(result);

        if(file.exists()){
            //Toast.makeText(getApplicationContext(), "PIC PATH: " + file.toString(), Toast.LENGTH_LONG).show();
            //Toast.makeText(getApplicationContext(), "PIC PATH: " + picPATH, Toast.LENGTH_LONG).show();
            picturePath =  file.toString();

            BitmapFactory.Options options=new BitmapFactory.Options();
            options.inJustDecodeBounds = true;
            BitmapFactory.decodeFile(picturePath,options);
            final int REQUIRED_SIZE=200;
            //Find the correct scale value. It should be the power of 2.
            int scale=1;
            while(options.outWidth/scale/2>=REQUIRED_SIZE && options.outHeight/scale/2>=REQUIRED_SIZE)
                scale*=2;

            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            preview_bitmap = BitmapFactory.decodeFile(picturePath,o2);
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            preview_bitmap.compress(CompressFormat.JPEG, 75, bos);  
            fileContent = bos.toByteArray();  //byte array  static byte[] fileContent;

            new UploadImageToFsProfile().execute();

        } else {

            //Toast.makeText(getApplicationContext(), "Image not exist in sdcard.", Toast.LENGTH_LONG).show();
        }

    }
}

public class UploadImageToFsProfile extends AsyncTask<String, Void, String>{//params,progress,result
    @Override
    protected void onPreExecute(){
        super.onPreExecute();

    }
    @SuppressWarnings("deprecation")
    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("https://api.foursquare.com/v2/photos/add");

        try 
        {
            @SuppressWarnings("deprecation")
            /*
             * To use MultipartEntity class use httpclient-X.x.jar , httpcore-X.x.jar ,httpmime-X.x.jar
             * and apachemime4jcore-X.x.jar
             */
            MultipartEntity entity = new MultipartEntity();
            entity.addPart("v", new StringBody(todaydate)); 
            entity.addPart("venueId", new StringBody(venueId));
            entity.addPart("public", new StringBody("1"));
            entity.addPart("oauth_token", new     StringBody(foursquareAccessToken));
            ByteArrayBody imgBody = new ByteArrayBody(ChFsLogin.fileContent, "image/jpeg",    "FS_image");

            entity.addPart("image",imgBody);
            httppost.setEntity(entity);
            HttpResponse response = httpclient.execute(httppost);
            responseResult = inputStreamToString(response.getEntity().getContent()).toString();
        } 
        catch (ClientProtocolException e) 
        { } 
        catch (IOException e) 
        { }

        return responseResult;
    }
    @Override
    protected void onPostExecute(String result){
        super.onPostExecute(result);

        dialog.dismiss();

        System.out.println("RES"+responseResult);
        JSONObject obj;
        try {
            obj = new JSONObject(result);
            //JSONArray meta = 
            obj = obj.getJSONObject("meta");
            code = obj.getInt("code");
            if(obj.has("errorDetail")){         
                Toast.makeText(getApplicationContext(), obj.getString("errorDetail"), Toast.LENGTH_LONG).show();

            }

            //Toast.makeText(getApplicationContext(), "code:"+code, Toast.LENGTH_LONG).show();
        } catch (JSONException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        if (code ==200) {
            Toast.makeText(getApplicationContext(), "Your Image Has Successfully Posted to FourSquare.", Toast.LENGTH_LONG).show();

        } else {

        Toast.makeText(getApplicationContext(), "Unable to Post Image to FourSquare.", Toast.LENGTH_LONG).show();
        }

        File fileToDelete = new File(file.toString());
        boolean deleted = fileToDelete.delete();
        if (deleted) {

        } else {

        }

    }

    private StringBuilder inputStreamToString(InputStream is) {
        String rLine = "";
        StringBuilder answer = new StringBuilder();
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));

        try {
         while ((rLine = rd.readLine()) != null) {
          answer.append(rLine);
           }
        }

        catch (IOException e) {
            e.printStackTrace();
         }
        return answer;
       }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T19:22:11.977

我通过以下代码成功地将图像上传到 Foursquare：

```
mBitmap.compress(Bitmap.CompressFormat.JPEG, 100, stream);
byte[] bitmapdata = stream.toByteArray();

HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("https://api.foursquare.com/v2/photos/add");

try 
{
    MultipartEntity entity = new MultipartEntity();
    entity.addPart("v", new StringBody("20121210")); 
    entity.addPart("venueId", new StringBody(venue.getId()));
    entity.addPart("public", new StringBody("1"));
    entity.addPart("oauth_token", new     StringBody(mAccessToken));
    ByteArrayBody imgBody = new ByteArrayBody(bitmapdata, "image/jpeg",    "FS_image");

    entity.addPart("image",imgBody);
    httppost.setEntity(entity);
    HttpResponse response = httpclient.execute(httppost);
    Log.v("response","" +response);
    responseResult = inputStreamToString(response.getEntity().getContent()).toString();
} 
catch (ClientProtocolException e) 
{
    Log.d(TAG, "Opening URL " +e);
} 
```

# java - 部分填充数组，删除重复数组

> ID：13795111
> 
> 赞同：0
> 
> 时间：2012-12-10T04:43:06.890
> 
> 标签：java, arrays, arraylist

我正在用 Absolute Java 做一项练习。
**问题是**：编写一个静态方法，将部分填充的字符数组作为形式参数，并从数组中删除所有重复的字母。该方法应该有两个形式参数：一个数组参数和一个 int 类型的形式参数，它给出了使用的数组位置的数量。当字母被删除时，剩余的字母移动一个位置以填补空白。

我想到的是使用hashset，它应该是最简单的方法。
我在想的另一种方法是将 array 转换为 list ，删除重复的元素，然后将其传回。
**这对我来说是一个问题：**如何编写该代码？（我为什么要问它？）

```
public static char[] deleteRepeats(char[] array, int size)
{
    ArrayList<String> newarray = new ArrayList<String>();
    newarray = Arrays.asList(array);
} 
```

它说类型不匹配，我该如何更正代码？

**另一个问题是：**回到最开始的问题，如何使用部分填充的数组来实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:04:03.383

```
ArrayList<String> newarray = new ArrayList<String>(); 
```

是泛型字符串的数组列表。但是，您的参数是`char`类型。因此它们不可互换。这就是引发`Type Mismatch`错误的原因。

你是对的，使用 a`Set`是实现它的最简单方法。但是我不知道练习是否要您手动完成工作。

但是，如果您不能使用包装器类`Character`并且必须使用该`char`类型，那么如果您要为`Set`您完成替换工作，则必须进行手动转换。

编辑：

您不能使用`Arrays.asList()`方法来获取这样的列表。该方法将 java 对象作为参数而不是原始类型。当你传递`char[]`它看到的唯一对象是数组本身。

所以结果是`List<char[]>`因为泛型不支持原始类型。

# c# - 将 IP 地址（int）解析为名称

> ID：13795114
> 
> 赞同：3
> 
> 时间：2012-12-10T04:43:34.673
> 
> 标签：c#, string, dns, ip

> **可能重复：**
> [如何从 C# 中的给定 IP 获取域名？](https://stackoverflow.com/questions/3252845/how-to-get-domain-name-from-given-ip-in-c)

如何将 int 格式的 IP 地址转换为字符串格式。例如，我有这个 int 格式的 IP 地址，`173.194.38.138`我想转换为 string `www.rugadingku.blogspot.com`。我看到了很多关于如何将 ip 字符串转换为 int，而不是 int 为字符串的示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T05:03:25.163

您可以使用此代码将 IP 地址转换为 HostName ：

```
IPHostEntry IpToDomainName = Dns.GetHostEntry("173.194.38.138");
string hostname =IpToDomainName.HostName; 
```

[Dns.GetHostByAddress](http://msdn.microsoft.com/en-us/library/system.net.dns.gethostentry.aspx)

你也可以这样使用：

```
 System.Net.IPHostEntry ip = System.Net.Dns.GetHostByAddress("173.194.38.138");
 string hostname = ip.HostName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:02:39.400

试试这个：未测试

访问[http://www.dijksterhuis.org/converting-an-ip-address-to-a-hostname-and-back-with-c/](http://www.dijksterhuis.org/converting-an-ip-address-to-a-hostname-and-back-with-c/)

```
// Map an IP address to a hostname

IPHostEntry IpToDomainName = Dns.GetHostEntry("209.85.173.99");
Console.WriteLine("DomainName: {0}", IpToDomainName.HostName); 
```

也试试这个：

```
public static string getDNSName(string myIP)
{
 System.Net.IPHostEntry ip = System.Net.Dns.GetHostByAddress(myIP);
 return ip.HostName;
} 
```

# c# - 内存缓存 - SQLite 与 System.Data.DataTable

> ID：13795123
> 
> 赞同：1
> 
> 时间：2012-12-10T04:44:20.610
> 
> 标签：c#, .net, sqlite, caching, datatable

我正处于在 C# 中设计内存缓存的初始阶段（它将作为 Windows 服务运行）。一旦投入生产，预计平均可容纳近一百万个对象（各种类型）。一些缓存项目的大小可以达到 10MB（或更大）。我考虑了各种数据存储解决方案，现在我决定使用 DataTable 或 SQLite 内存实例作为缓存存储。在这一点上，我的问题是

1.  您认为有这么多记录的 DataTable 的性能如何？
2.  你认为使用 SQLite 解决方案是不是有点矫枉过正？（由于 SQLite 被设计为“数据库”，我可能并不真正想要所有与数据库相关的管道活动）

性能对我来说是最重要的。

编辑

添加更多细节。

1.  这些缓存项不仅仅是键值对，它们还有两个（截至目前）属性（固定和锁定项），这会影响它们的可用性。每次查找都将包括所有三个属性。
2.  已经考虑过 Memcached，但目前这不是一个选项，主要是由于我们的 SLA 限制（我只能说这些）。
3.  并非所有项目的大小都是 10MB。
4.  我很确定其中许多项目将仅仅是数字和小字符串值。
5.  我相信，RAM 的可用性不是问题。

在此先感谢，詹姆斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:17:17.950

1：可怕。DataTbles 很慢，而且会占用大量内存，不会神奇地改变大型项目。
2：你告诉我们。

您是否考虑过使用简单的字典？键/值对，你知道的。

答案真的取决于你计划用缓存做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:51:59.933

如果每个项目都是 1 MB，即 1 TB 内存。
您有 1 TB 的内存专用于此？
固态磁盘上的数据库可能是更好的设计。

DataTable 又大又慢。

你将如何查找这些项目？
你会有完整的钥匙吗？
你会有足够的内存吗？
如果是字典。

# php - 在提交之前合并 $_GET 变量

> ID：13795129
> 
> 赞同：-3
> 
> 时间：2012-12-10T04:45:03.030
> 
> 标签：php, html, forms, get

我不确定这是否可能，但这是我无法弄清楚的问题。

从这个链接中得到一个结果。

最终结果链接。

[http://www.website.com/index.php?a=price_range_A_B](http://www.website.com/index.php?a=price_range_A_B)

我不能使用 from 但我可以使用输入字段。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:04:39.330

**编辑：**由于 OP 改变了问题，我在下面更新了我的答案。

我举了一个例子来说明你如何做到这一点。

```
<?php  
    $action_path = "index.php";
    ?>

    <script type="text/javascript">
        function submitData() {
            var a = null;
            var _A = document.getElementById("_A").value;
            var _B = document.getElementById("_B").value;

            a = "price_range_" + _A + "_" + _B;

            window.location.href = "<?php echo $action_path; ?>?a=" + a;

            return;
        }
    </script>

    <input type="text" id="_A" maxlength="6" size="5" />
    <input type="text" id="_B" maxlength="6" size="5" />
    <input type="button" value="Submit" onclick="submitData();" />

    <?php
    // the code to be put after </form> goes here
?> 
```

# c# - How C# SortedList get key by value?

> ID：13795130
> 
> 赞同：6
> 
> 时间：2012-12-10T04:45:03.897
> 
> 标签：c#, sortedlist

There is a `SortedList`

```
slLanguage = new SortedList();
slLanguage.Add("Bahasa","id-ID");
slLanguage.Add("Chinese Simplified(中文简体)","zh-CN");
slLanguage.Add("Chinese Traditional(中文繁體)","zh-TW");      
slLanguage.Add("Kazakh","kk-KZ");
slLanguage.Add("Russian(русский)","ru-RU");
slLanguage.Add("Vietnamese(Việt)","vi-VN");
slLanguage.Add("English", "en-US"); 
```

How can I get the key by value?

For example: Get the item key "zh-CN"

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T04:49:44.133

如果您想从一个值中获取键，您可以使用`SortedList.IndexOfValue(object value)`来获取您指定的值的索引。然后，使用从我们刚刚收集的值的索引`SortedList.GetKey(int index)`中返回一个键。`object`

**例子**

```
SortedList slLanguage = new SortedList(); //Initializes a new SortedList of name slLanguage
//Add the keys and their values to the list
slLanguage.Add("Bahasa", "id-ID");
slLanguage.Add("Chinese Simplified(中文简体)", "zh-CN");
slLanguage.Add("Chinese Traditional(中文繁體)", "zh-TW");
slLanguage.Add("Kazakh", "kk-KZ");
slLanguage.Add("Russian(русский)", "ru-RU");
slLanguage.Add("Vietnamese(Việt)", "vi-VN");
slLanguage.Add("English", "en-US");
//
object returnedKey = slLanguage.GetKey(slLanguage.IndexOfValue("zh-CN")); //Gets the key from zh-CN as returnedKey of type object 
```

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T04:50:13.817

可能有更好的方法来做到这一点，但这里有一种方法：

```
int index = slLanguage.IndexOfValue("zh-CN");
var item = slLanguage.GetKey(index); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-19T06:49:18.980

从 Value 中查找 key 效率不高，并且违背了 sorted List 的目的。排序列表实际上是一个排序字典，令人困惑地命名为 SortedList。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-15T18:22:37.563

Dang，旧帖子，但我只是在寻找自己如何做到这一点。根据排序列表的大小，您可以这样做：

```
string value = "zh-CN"
foreach (var kvp in slLanguage)
{
    if (kvp.Value == value) return kvp.Key;
} 
```

# iis - RewritePath not working in IIS 7.5 integrated mode

> ID：13795137
> 
> 赞同：2
> 
> 时间：2012-12-10T04:45:26.983
> 
> 标签：iis, httpmodule, rewritepath

I got an issue when using HttpContext.RewritePath in HttpModule for URL rewriting.

Environment: Windows Server 2008 R2, IIS 7.5 integrated mode, .Net 4.0 In my project, most URLs will be rewritten to the same aspx page(Handler.aspx). The aspx page will do different thing based on the URL.

Example:

"/en/abc/" will be written to Handler.aspx. [Page output: This is abc]

"/en/test/" will be written to Handler.aspx. [Page output: This is test]

"/en/test/a.html" will be written to Handler.aspx as well. [Page output: This is test]. As I only check the string "test" and ignore the sting "/a.html", the output is same as the URL "/en/test/". And a.html doesn't exist in wwwroot folder, the URL is a bad case for testing.

I got a issue, if 2 or more requests that contain htm/html extension come simultaneously Example: "/en/test/a.htm" or "/en/test/a.html"

HttpContext.RewritePath will not work for any request after that. Handler.aspx won't be called any more, and the page output will always be 'This is test' no matter what URL entered. Http status code is 200 when the issue occurs. Also if visit the real aspx page(Handler.aspx), it will display the same content 'This is test' as well. It seems like a server-side cache. And this issue can be resolved by recycling app pool in IIS.

In following cases, the issue won't occur:

1.  Visit these two requests with a delay, for example visit "/en/test/a.html" first and wait 3-5 seconds, then visit "en/test/a.html" again. Everything works fine.

2.  Change IIS pipeline from integrated mode to classic mode. If visit "/en/test/a.html", a IIS 404 page will be displayed.

3.  Use Server.Transfer instead of HttpContext.RewritePath, everything works fine.

4.  The URL contains .php, .jsp, .xml won't cause the issue

I have to find the root cause of it. Any potential reason may cause this issue?

# web-applications - How to pass some value to another action in chicagoboss?

> ID：13795138
> 
> 赞同：0
> 
> 时间：2012-12-10T04:45:33.597
> 
> 标签：web-applications, erlang, chicagoboss

I wrote some like that:

```
login('POST', []) ->
    ....
            case Client:check_password(Req:post_param("password")) of
                true ->
                    {redirect, [{controller, "chat"}, {action, "live"}], [{username, Name}, {gender, Gender}]};
    ....
    end. 
```

how to let the live action in chat controller receive the name and gender information? I wrote:

```
live('GET', [Req]) ->
   Name=Req:post_param("username"),
   ....
   {ok, [{username, Name}, {gender, Gender}]} 
```

But it doesn't work, could anyone can help me>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T04:23:03.453

您在重定向中所做的很可能不是您想要的。

如果您查看[控制器 API 文档](http://chicagoboss.org/api-controller.html)，您会注意到第二个 proplist 指的是请求标头，而不是参数 ( `{redirect, Location, Headers::proplist()}`)。这意味着您可以访问`live/2`like this中的值`Req:header("HEADERNAME")`。

其次，在`live/2`控制器函数的定义中，您假设您已经捕获了一个 URL 参数（您将其引用为`Req`）。这不会反映在`login`控制器功能中的重定向中。所以你可以做的是改变你`live/2`to的定义`live('GET', [Username, Gender])`，这意味着你必须像这样调用它`/live/a-username/the-users-gender`，然后将重定向更改为`{redirect, [{controller, "chat"}, {action, "live"}, {username, Name}, {gender, Gender}]}`.

但是，我建议您改用会话。在您的控制器上实现一个`before_/1`方法，并确保您的模块定义包含 request 和 session_id 参数（查看[文档](http://chicagoboss.org/api-controller.html) [）](http://chicagoboss.org/api-session.html)。现在您可以使用会话 API 来传递任何与会话相关的值（它还有一个好处是您可以清理控制器功能 - 添加第三个参数并简单地根据结果区分请求 `before_/1`）。

例如，您可以拥有：

```
live('GET', [], undefined) -> 
    % redirect to the login page
live('GET', [], UserObject) ->
    {ok, [{username, UserObject:username()}, {gender, UserObject:gender()}]}. 
```

# mod-rewrite - 2 parameters (id and page) in url with mod_rewrite?

> ID：13795140
> 
> 赞同：1
> 
> 时间：2012-12-10T04:45:36.133
> 
> 标签：mod-rewrite

With my current code I can convert the URL:

```
www.midomain.com/all.php?id=3 
```

In this URL (I can perfectly get the 'id' with php):

```
www.midomain.com/all/3/ 
```

But how do I convert the URL:

```
www.midomain.com/all.php?id=3&page=2 
```

In this URL?:

```
www.midomain.com/all/3/2/
or:
www.midomain.com/all/3/page-2/ 
```

This is my actual code:

```
Options +FollowSymLinks
RewriteEngine on

RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^([^/]+)/$ $1.php

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule (.*)$ /$1/ [R=301,L]

RewriteRule ^all/([^/\.]+)/?$ all.php?id=$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:51:06.143

扩展正则表达式以匹配您所追求的 url，并将额外的匹配作为页面参数传递。

像这样的东西：

```
RewriteRule ^all/([^/\.]+)/([^/\.]+)/?$ all.php?id=$1&page=$2 [L] 
```

# ios - Print all rows of a table view when it's too large to fit on screen

> ID：13795141
> 
> 赞同：1
> 
> 时间：2012-12-10T04:45:41.710
> 
> 标签：ios, uitableview, printing

How do I print my whole multi-page `UITableView` (I need to scroll) and not just the part of the view which is currently displayed on screen?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T07:04:38.793

我假设您正在谈论使用 iOS 打印系统进行打印，如 iOS[*绘图和打印指南*](http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/Printing/Printing.html)[的“打印”一章中所述](http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/Printing/Printing.html)*。*

 *由于`-[UITableView viewPrintFormatter]`不返回一个可用的`UIViewPrintFormatter`，你必须找到另一种方法来做到这一点。让我们编写一个将表格视图转换为 PDF 的函数：

```
static NSData *pdfDataWithTableView(UITableView *tableView) { 
```

首先，我们将保存视图的当前边界，以便在最后恢复边界。

```
 CGRect priorBounds = tableView.bounds; 
```

现在我们将要求 table view 计算出它需要多高才能容纳它的所有行。

```
 CGSize fittedSize = [tableView sizeThatFits:CGSizeMake(priorBounds.size.width, HUGE_VALF)]; 
```

我们将继续将表格视图调整为那么大。我们还将它的原点（与它的 相同`contentOffset`）设置为 0,0，因此它实际上将包含它的所有行。

```
 tableView.bounds = CGRectMake(0, 0, fittedSize.width, fittedSize.height); 
```

我们需要一个`CGRect`包含 PDF 页面边界的文件。

```
 // Standard US Letter dimensions 8.5" x 11"
    CGRect pdfPageBounds = CGRectMake(0, 0, 612, 792); 
```

现在我们可以创建一个 PDF 图形上下文。

```
 NSMutableData *pdfData = [[NSMutableData alloc] init];
    UIGraphicsBeginPDFContextToData(pdfData, pdfPageBounds, nil); { 
```

我们需要将表格视图渲染到图形上下文中。由于表格视图可能高于页面大小，因此我们将上下文的原点沿 Y 轴以页面高度为增量进行步进。

```
 for (CGFloat pageOriginY = 0; pageOriginY < fittedSize.height; pageOriginY += pdfPageBounds.size.height) { 
```

我们告诉上下文开始一个页面。

```
 UIGraphicsBeginPDFPageWithInfo(pdfPageBounds, nil); 
```

由于我们要更改上下文的原点，我们将保存图形状态并在渲染此页面后恢复它。

```
 CGContextSaveGState(UIGraphicsGetCurrentContext()); { 
```

现在我们可以调整上下文的原点，使渲染区域的左上角位于表格视图坐标系中的适当点。

```
 CGContextTranslateCTM(UIGraphicsGetCurrentContext(), 0, -pageOriginY); 
```

最后，我们可以告诉 table view 的 layer 将自己渲染到上下文中。当前页面范围之外的所有内容都将被剪掉。

```
 [tableView.layer renderInContext:UIGraphicsGetCurrentContext()]; 
```

为了清理，我们恢复图形状态。

```
 } CGContextRestoreGState(UIGraphicsGetCurrentContext()); 
```

此时，如果还有更多的页面，我们将回到`for`循环的顶部。

```
 } 
```

现在我们已经渲染了所有页面，所以我们可以结束 PDF 图形上下文。

```
 } UIGraphicsEndPDFContext(); 
```

我们需要恢复表格视图的边界。

```
 tableView.bounds = priorBounds; 
```

最后我们可以返回 PDF 数据。

```
 return pdfData;
} 
```

这一切都在一起：

```
static NSData *pdfDataWithTableView(UITableView *tableView) {
    CGRect priorBounds = tableView.bounds;
    CGSize fittedSize = [tableView sizeThatFits:CGSizeMake(priorBounds.size.width, HUGE_VALF)];
    tableView.bounds = CGRectMake(0, 0, fittedSize.width, fittedSize.height);

    // Standard US Letter dimensions 8.5" x 11"
    CGRect pdfPageBounds = CGRectMake(0, 0, 612, 792);

    NSMutableData *pdfData = [[NSMutableData alloc] init];
    UIGraphicsBeginPDFContextToData(pdfData, pdfPageBounds, nil); {
        for (CGFloat pageOriginY = 0; pageOriginY < fittedSize.height; pageOriginY += pdfPageBounds.size.height) {
            UIGraphicsBeginPDFPageWithInfo(pdfPageBounds, nil);
            CGContextSaveGState(UIGraphicsGetCurrentContext()); {
                CGContextTranslateCTM(UIGraphicsGetCurrentContext(), 0, -pageOriginY);
                [tableView.layer renderInContext:UIGraphicsGetCurrentContext()];
            } CGContextRestoreGState(UIGraphicsGetCurrentContext());
        }
    } UIGraphicsEndPDFContext();
    tableView.bounds = priorBounds;
    return pdfData;
} 
```

你当然可以`UIGraphicsBeginPDFContextToFile`改用。那将使用更少的工作记忆。

无论哪种方式，一旦您拥有 PDF（在内存中或文件中），您就可以使用 iOS 打印系统将其发送到打印机。*

# python - 如何初始化辅助方法？

> ID：13795142
> 
> 赞同：1
> 
> 时间：2012-12-10T04:46:08.730
> 
> 标签：python

如果我有两个文件 helper.app 和 main.app，我希望能够完成这样的事情。

助手.py

```
def configurestuff(dblocationstring):
  # Stuff that sets name and location
  generic_connection_variable = connectto(dblocationstring)

def dostuff():
  # does stuff with the generic_connection_variable 
```

在我的 main.py 中，我希望能够做类似的事情

```
import helper
helper.configure("customlocationofdb")
helper.dostuff()
#or even
helper.generic_connection_variable.someApplicableMethod() 
```

我的目标是让我可以拥有一个 main.app，它能够使用“帮助器”传递变量来建立连接并在导入帮助器后在 main.app 中重用该变量（如果可能）。组织我的代码以完成此任务的最佳方法是什么？（我不确定如何在我的 main.py 中访问 generic_connection_variable，因为它在函数中，或者最好的方法是什么）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:57:25.130

将其作为一个类实现可以提供更大的灵活性：

```
class Config(object):
    DB_STRING = 'some default value'
    ANOTHER_SETTING = 'another default'
    DEBUG = True

    def dostuff(self):
      print 'I did stuff to ',self.DEBUG

class ProductionConfig(Config):
    DEBUG = False # only turn of debugging

class DevelopmentConfig(Config):
    DB_STRING = 'localhost'

    def dostuff(self):
       print 'Warning! Development system ',self.DEBUG 
```

将其存储在任何文件中，例如`settings.py`. 在您的代码中：

```
from settings import Config as settings
# or from settings import ProductionConfig as settings

print settings.DEBUG # for example 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:51:17.553

您可以定义`generic_connection_variable`为模块级变量。

所以在你的`helper.py`你将不得不

```
generic_connection_variable = None  # or whatever default you want.

def configurestuff(dblocationstring):
    global generic_connection_variable
    # Stuff that sets name and location
    generic_connection_variable = connectto(dblocationstring)

def dostuff():
    global generic_connection_variable
    # does stuff with the generic_connection_variable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T04:50:41.493

很难说出您在问什么，但是您是否尝试过制作`generic_connection_variable`的实例变量`helper`？（带`self`关键字）

`# helper.py:`

```
def configurestuff(dblocationstring):
  # Stuff that sets name and location
  self.generic_connection_variable = connectto(dblocationstring) 
```

现在它`generic_connection_variable`属于一个实例，`helper`而不是局部范围的`configurestuff`，您将能够`main`按如下方式使用它：

```
import helper
helper.configure("customlocationofdb")
helper.generic_connection_variable.someApplicableMethod() 
```

但是您可能需要为它定义一个类，`generic_connection_variable`以便它有一个名为`someApplicableMethod()`.

# c++ - C++：内存不足时应该返回什么？

> ID：13795145
> 
> 赞同：1
> 
> 时间：2012-12-10T04:46:50.187
> 
> 标签：c++, out-of-memory, nothrow

当我编写如下代码时，它将返回“null”并且没有发生异常。

```
Char* pStr = new(std::nothrow)Char(10); 
```

在 new 运算符上不使用“nothrow”参数怎么样？它是否也返回'null'？如果是这样，为什么建议使用“nothrow”参数？

```
Char* pStr = new Char(10); 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T04:49:57.813

`new`如果失败，将抛出异常，除非您指定，在这种情况下，如果失败`nothrow`将返回。`nullptr`

至于为什么`nothrow`使用：在某些系统上，不支持异常（或严重支持）（在游戏机上尤其如此）。所以最好不要使用它们。这只是`nothrow`可以使用的一个例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T04:58:48.837

> **不对运算符使用`nothrow`参数怎么`new`办？它也返回`null`吗？**

C++ 标准（第 18.4.1.1 节）将 operator new 定义为：

```
void* operator new (std::size_t size) throw (std::bad_alloc); 
```

因此，带有一个参数的 new 的标准行为是`std::bad_alloc`在失败的情况下抛出 a 。该标准还定义了一个`nothrow`采用两个参数的新版本：

```
void* operator new(std::size_t size, const std::nothrow_t&) throw(); 
```

此版本在失败的情况下返回 a `NULL`，但请注意，要使用此版本，您明确需要将附加参数传递给 new 运算符。

* * *

> **什么时候应该使用`nothrow`版本？**

**理想情况下，您应该始终使用标准版本的 new ，它会抛出`bad_alloc`**. 您应该始终坚持该建议。但是，在某些情况下，您可能会被迫使用该`nothrow`版本。其中一些情况是：

*   您正在使用不支持异常的旧 C++ 编译器（在语言标准化之前发布）。
*   明确禁用异常的目标平台（例如：嵌入式系统）或不保证正常工作。
*   1990 年后的标准行为`new`是 return `NULL`，如果您正在使用大量依赖此行为的遗留代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T05:13:13.223

当`new`无法分配内存时，它会抛出一个异常`bad_alloc`，如果不处理此异常，这将使您的程序以不寻常的方式崩溃。如果我们想避免这种情况，我们可以使用`nothrow`which 是重载函数的参数，`new`也可以 catch例外。`nothrow`将`null`在内存不足时返回，程序员可以决定此时要做什么。

# sql-server - EF 在使用 StartsWith 过滤时不使用 SQL 索引

> ID：13795155
> 
> 赞同：3
> 
> 时间：2012-12-10T04:48:15.020
> 
> 标签：sql-server, entity-framework, ef-code-first

以下 LINQ 查询使用`StartsWith()`谓词过滤行：

```
db.Pictures.Where(pic => pic.Filename.StartsWith(path)).Count(); 
```

转换为以下 SQL（来自 SQL Server Profiler）：

```
exec sp_executesql N'SELECT 
[GroupBy1].[A1] AS [C1]
FROM ( SELECT 
    COUNT(1) AS [A1]
    FROM [dbo].[Pictures] AS [Extent1]
    WHERE [Extent1].[Filename] LIKE @p__linq__0 ESCAPE N''~''
)  AS [GroupBy1]',N'@p__linq__0 nvarchar(4000)',@p__linq__0=N'10429\2\6\%' 
```

该`Filename`列的类型为 VARCHAR(255) 并已编入索引。但是，由于 N in ，查询不使用索引`ESCAPE N'~'`。

在查询执行计划中，我可以看到一个警告：

> 表达式 (CONVERT_IMPLICIT(NVARCHAR(255), [Extent1].[Filename], 0)) 中的类型转换可能会影响查询计划选择中的“CardinalityEstimate”

删除 N 后，查询运行良好（使用索引）。

我该如何解决这个问题？

（一个明显的解决方案可能是将列的类型更改为 NVARCHAR，但这似乎并不理想，因为我实际上不需要存储 unicode 数据）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T19:20:32.827

您需要将您的模型也设置为 varchar。`OnModelCreating`您可以通过在您的上下文中覆盖来配置它。

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Picture>().Property(p => p.Filename).IsUnicode(false);
} 
```

# javascript - 淡出整个窗口 - 然后加载 URL？

> ID：13795156
> 
> 赞同：0
> 
> 时间：2012-12-10T04:48:18.017
> 
> 标签：javascript, jquery, html, css, fade

我想知道当用户单击链接时是否有可能淡出我的整个窗口（所以可能是覆盖整个窗口的 div 将其淡化为黑色），然后加载外部 URL，例如'谷歌'。

例如：

用户单击“此处”，整个窗口从 0% 的不透明度变为 100% 的黑色不透明度。然后，加载链接......谷歌。

任何想法我将如何能够实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:53:09.320

只需为您的身体设置动画，然后在“完成动画”回调中更新窗口的位置。

```
$("body").animate({ opacity: 0, backgroundColor: '#000' }, function() {
  window.location = "http://google.com"
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T04:56:07.613

我认为您可以通过在单击功能上淡出正文元素来实现这一点，如下所示：

`<a href="www.google.com" id="hyper"></a>`

```
$("#hyper").click(function(){ 
    $('body').fadeOut('slow',function(){$(this).remove();});
}); 
```

# android - 如何在 Android 中发送带有图像附件和一些文本的彩信？

> ID：13795158
> 
> 赞同：1
> 
> 时间：2012-12-10T04:48:46.677
> 
> 标签：android, android-intent

我想将一些文本中的图像附加到 Android 中的 MMS。我在 SO 和 Google 上发现了很多，但仍然没有得到正确的解决方案。我的代码如下：

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
            sendIntent.setType("image/png");
            sendIntent.putExtra("sms_body",
                    getResources().getText(R.string.Message));
            // sendIntent.setType("vnd.android-dir/mms-sms");

            Uri mms_uri = Uri.parse("android.resource://"
                    + getPackageName() + "/" + R.drawable.app_logo);

            sendIntent.putExtra(Intent.EXTRA_STREAM, mms_uri.toString());

            startActivity(Intent.createChooser(sendIntent, "")); 
```

请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T20:16:23.313

你有这方面的运气吗？我尝试了类似的方法，发现

```
Uri mms_uri = Uri.parse("android.resource://" + getPackageName() + "/" + R.drawable.app_logo); 
```

不是通用的。我设法通过在资产文件夹中复制图像文件并将其转换为文件来做到这一点。你可以这样做：

```
File f = new File(getCacheDir()+"/app_logo.png");
if (!f.exists()) try {
    InputStream is = getAssets().open("R.drawable.app_logo");
    int size = is.available();
    byte[] buffer = new byte[size];
    is.read(buffer);
    is.close();

    FileOutputStream fos = new FileOutputStream(f);
    fos.write(buffer);
    fos.close();
} catch (Exception e) { throw new RuntimeException(e); }

sharePicture = f.getPath(); 
```

# mysql - mysql_fetch_array() 期望参数 1 是资源，布尔值在

> ID：13795161
> 
> 赞同：-6
> 
> 时间：2012-12-10T04:49:10.327
> 
> 标签：mysql, php

这是我一直用来尝试连接到数据库并从中检索数据的代码，但它没有正确显示图像。所有其他内容均正确显示。

```
//This php quote is test2.php
<?php

$dbhost='localhost';
$dbuser='root';
$dbpass='';
$db='dynamic';

$con = mysql_connect("localhost","elemental","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_selectdb($db);

?>

<?php
include 'test2.php';

$query="selelct * from data";
$result=mysql_query($query);

while ($data=mysql_fetch_array($result)) {

echo '<h3>' . $data['id'] . '</h3>';
    echo '<h3>' . $data['name'] . '</h3>';

}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T04:52:11.743

你有2个错别字：

```
$query="selelct * from data"; 
```

应该：

```
$query="select * from data";  //select not selelct 
```

和

```
mysql_selectdb($db); 
```

应该：

```
mysql_select_db($db); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:36:24.903

您的代码中有一些疏忽或问题。包括无缘无故地重复自己，以及在你进步的过程中未能测试你的变量/行动。

```
<?php

$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = '';
$dbbase = 'dynamic';

// WAS
// $con = mysql_connect("localhost","elemental","");
// why have your variables above if you hardcode them?
if( !( $con = mysql_connect( $dbhost , $dbuser , $dbpass ) ) ){
  error_log( 'MySQL Server Connection Failed - '.mysql_error() );
  // Never echo your errors publicly
  die( 'Cannot connect to database, but I am not going to show you why publicly.' );
}
if( !mysql_select_db( $dbbase ) ){
  error_log( 'MySQL Database Connection Failed - '.mysql_error() );
  // Never echo your errors publicly
  die( 'Cannot connect to database, but I am not going to show you why publicly.' );
}

include( 'test2.php' );

// WAS
// $query="selelct * from data";
// check your spelling!
$query = 'SELECT * FROM data';

if( !( $result = mysql_query( $query ) ) ){
  error_log( 'MySQL Query Failed - '.mysql_error() );
  die( 'Cannot query the database, but I am not going to show you why publicly.' );
}
if( !mysql_num_rows( $result ) ){
  echo 'No Records Found';
}else{
  while( $d = mysql_fetch_array( $result ) ){
    echo '<h3>'.$d['id'].'</h3><h3>'.$d['name'].'</h3>';
  }
} 
```

# c# - 社交媒体操作的通用 API

> ID：13795180
> 
> 赞同：3
> 
> 时间：2012-12-10T04:51:06.473
> 
> 标签：c#, api, design-patterns, social-networking

我正在创建一个需要与多个社交网络平台集成的 MVC4 网站。框架中内置的新 OAuthWebSecurity 类解决了身份验证和授权问题。

我的模型有文章和评论类型的对象。这两个对象都是“社交的”，即可以共享、发布喜欢等

我一直试图为此想出一个优雅的实现

目前我已经定义了以下类和接口

ISocial - 定义“社交”类型应实现的最小方法

文章和评论实施 ISocial

IProvider - 定义社交媒体提供商的属性和方法，例如 AppId、AppSecret 和所需的端点

FacebookProvider 和 TwitterProvider 实现 IProvider

当前用户已授权的网络可用

OAuthWebSecurity.GetAccountsFromUserName(User.Identity.Name)

如何实现执行 ISocial 中定义的操作的 GenericAPI (JSON)

IE

Share() - 分享/推文/评论到用户墙

Comment() - 如果文章，为文章创建新评论，如果评论，回复现有评论

需要对提议的结构提出实施建议和/或批判性分析

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:01:44.817

作为管理“提供者”的说明；如果您的提供者能够做同样的事情，但是有不同的实现，您可以采用[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)

**描述**

> 在计算机编程中，策略模式（也称为策略模式）是一种特定的软件设计模式，可以在运行时选择算法的行为。从形式上讲，策略模式定义了一系列算法，封装了每一个，并使它们可以互换。策略让算法独立于使用它的客户而变化。

在您的情况下，不同的“算法”是每个提供商的逻辑（例如，在 Facebook 上添加评论的代码或在 Google+ 上发布新文章的代码）。

在下面的示例中`SocialContext`，是用于为每个 Provider 执行通用函数的对象。您只需要通过调用设置提供程序`SetProvider(IProvider provider)`

您的 API 调用方法可以模仿这些`SocialContext`方法以及一些代码来决定在运行时使用哪个 Provider。

这是您的示例：

```
namespace StrategyPattern
{
    class Program
    {
        static void Main(string[] args)
        {
            var context = new SocialContext();

        context.SetProvider(new FacebookProvider()); //switch which provider you want to use

        context.AddComment(new Comment()
            {
                Message = "Heres my Comment!"
            });
    }
}

//providers

public interface IProvider
{
    void AddComment(Comment comment);
    void PostArticle(Article article);
}

public class FacebookProvider :IProvider
{
    public void AddComment(Comment comment)
    {
        //facebook implementation of "AddComment"
    }

    public void PostArticle(Article article)
    {
        //facebook implementation of "PostArticle"
    }
}

public class TwitterProvider : IProvider
{
    public void AddComment(Comment comment)
    {
        //twitter implementation of "AddComment"
    }

    public void PostArticle(Article article)
    {
        //twitter implementation of "PostArticle"
    }
}

public class Article
{
    public string Content { get; set; }
}

public class Comment
{
    public String Message { get; set; }
}

//context to use the providers

public class SocialContext
{
    private IProvider _provider;

    public void SetProvider(IProvider provider)
    {
        _provider = provider;
    }

    public IProvider GetProvide { get { return _provider; } }

    public void AddComment(Comment comment)
    {
        _provider.AddComment(comment);
    }

    public void PostArticle(Article article)
    {
        _provider.PostArticle(article);
    }
} 
```

}

# ruby-on-rails - Rails 3.2 自加入关联在控制台中工作但不在视图中

> ID：13795181
> 
> 赞同：0
> 
> 时间：2012-12-10T04:51:16.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, self-join

我的 Rails 3.2 应用程序中有一个自我连接。它似乎在控制台中工作，但在视图中似乎我无权访问 class_name 的任何关联。这是我的代码：

```
class Comment < ActiveRecord::Base
  belongs_to :profile
  belongs_to :author, :class_name =>"User", :foreign_key => "author_id"

  def author_name
    author.profile.name
  end
end

class Profile < ActiveRecord::Base
  belongs_to :user
  has_many :comments
end 
```

上面的区别是个人资料有很多关于它的评论。但是用户可以作为作者对另一个配置文件发表评论。

因此，如果我在控制台中并运行以下内容：

```
Comment.first.author_name 
```

我会得到一个字符串结果，如“测试作者”

但是，如果我调用`<%= comment.author_name %>`使用@comments 呈现的部分 _comment.html.erb，则会收到以下错误：

```
ActionView::Template::Error (undefined method `profile' for nil:NilClass): 
```

`author_id`我在`comments_controller`create 操作中分配了这一行：

```
@comment = Comment.new(params[:comment].merge(:author_id => current_user.id)) 
```

**配置文件和评论控制器：**

```
class CommentsController < ApplicationController
  def create
    @comment = Comment.new(params[:comment])
    if @comment.save!
      @profile = @comment.profile
      Resque.enqueue(CommentWorker, @comment.id)
      respond_to do |format|
        format.js { }
      end
    else
      respond_to do |format|
        format.js { render 'fail.js.erb' }
      end
    end
  end
end

class ProfilesController < ApplicationController
  def show
    @profile = Profile.find(params[:id])
    @user = User.find(@profile.user_id)
    @comments = @profile.comments
  end
end 
```

**视图（按部分加载的顺序：**

内`profiles/_logged_in.html.erb`（称为 in `profiles/show.html.erb`）

```
<%= render :partial => 'profile_cred' %> 
```

内`profiles/_profile_cred_in.html.erb`

```
<% if current_user_profile?(@profile) %>
  <%= render :partial => "comments/auth_user_comments" %>
<% else %>
  <%= render :partial => "comments/user_comments" %>
<% end %> 
```

内`profiles/_auth_user_comments.html.erb`

```
<% if @comments.count == 0 %>
  <p id="commentIntro">You have no comments yet, <%= "#{@profile.first_name}" %>.</p>
<% elsif @comments.count > 0 %>
  <p id="commentIntro"><%= "#{@profile.first_name}" %>&nbsp;is most likely to:</p>&nbsp;<ul id="commentInfo"><%= render @comments, :locals => {:comment_count => @comments.length} %>
<% end %></ul> 
```

内`profiles/_user_comments.html.erb`

```
<div id="newComment">
  <p id="commentIntro"><%= @profile.first_name %> is:&nbsp;&nbsp;</p><%= render :partial => 'comments/form', :locals => {profile: @profile} %>
</div>
<div id="list">
  <ul id="commentInfo">
    <% if @comments.count > 0 %>
      <%= render @comments %>
    <% end %>
  </ul>
</div> 
```

内`comments/_comment.html.erb`

```
<li id="<%= comment.id %>" class="comment">
  <span title="<%= comment.author_name %>"><%= comment.body %><% if current_user_profile?(@profile) %><p class="deleteSup"><%= link_to 'x', comment_path(comment.id), :method => :delete, :remote => true, :confirm => "Are you sure you want to remove this comment?" %></p><% end %></span> 
```

我不知道为什么这在控制台中有效，但在视图中无效。有任何想法吗？

**编辑：**

`comments/user_comments`例如，如果我正在查看我在另一个人的个人资料上给出的评论，则会在渲染代码时引发错误。当我调试这里是我的输出：

```
#<Comment id: 32, profile_id: 1, author_id: 45, body: "test", created_at: "2012-12-15 05:12:00", updated_at: "2012-12-15 05:12:00">, 
#<Comment id: nil, profile_id: 1, author_id: nil, body: nil, created_at: nil, updated_at: nil>] 
```

我认为这是由于以`comments/user_comments`部分形式实例化一个新的评论引起的，但我不知道。这是表单代码：

```
<% if logged_in? and not current_user_profile?(profile) %>
  <%= form_for(profile.comments.new, :remote => true, :html => {:id =>"new_comment"}) do |f| %>
    <%= f.hidden_field :profile_id, :value => profile.id %>
    <%= f.hidden_field :author_id, :value => current_user.id %>
  <div class="holds">
    <%= content_tag(:span, "ex: change the world", :class =>"holder_comment") %>
    <%= f.text_field :body, :autofocus => true %>
  </div>
    <%= f.submit 'Add' %>
  <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:17:56.843

我想我想通了。在其中一个部分中，我有一个 for 的表单`@profile.comments.new`，它用 . 初始化一个 nil 评论`profile_id`。所以这把事情搞砸了。替换它`form_for Comment.new`并添加一个`hidden_field`for`profile_id`帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:57:19.587

你能写下你在控制器和视图中的代码吗？另外，您可以在调用部分之前调试@comments 上的内容吗？

在你看来做这样的事情之前：

```
<%= render :partial => "comment", :collection => @products %> 
```

注释代码并执行类似的操作

```
<%= debug @products %>
<%# render :partial => "comment", :collection => @products %> 
```

另外，您可能想尝试做

```
<%# render :partial => "comment", :collection => @products.all %> 
```

因为可能是您传递的是 ActiveRecord 关系而不是 Products 集合，这可能是错误的

# c# - 获取嵌入式 pdf 文件

> ID：13795184
> 
> 赞同：1
> 
> 时间：2012-12-10T04:51:36.190
> 
> 标签：c#, pdf, stream

我浏览了论坛，发现了许多看似相关的问题，但到目前为止没有任何帮助。我希望能够从各个网站获取精选的 pdf。这是我在我感兴趣的大多数文档中成功使用的一个片段。

```
if (!String.IsNullOrEmpty(filePaths[1]))
{
     var myRequest = (HttpWebRequest)WebRequest.Create(filePaths[1]);
     myRequest.Method = "GET";
     WebResponse myResponse = myRequest.GetResponse();
     var sr = new StreamReader(myResponse.GetResponseStream(), Encoding.UTF8);
     var fileBytes = sr.ReadToEnd();
     using (var sw = new StreamWriter("<localfilepath/name")
          {
               sw.Write(fileBytes);
          }
} 
```

当我尝试获取此文档时出现问题：[http ://www.azdor.gov/LinkClick.aspx?fileticket=r_I2VeNlcCQ%3d&tabid=265&mid=921](http://www.azdor.gov/LinkClick.aspx?fileticket=r_I2VeNlcCQ%3d&tabid=265&mid=921)

如果我使用上面的代码，我会得到一个 DotNetNuke 错误。正如许多其他帖子所建议的那样，我尝试使用 WebClient，但得到了同样的错误。

当我使用此代码时：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.UserAgent = @"Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0";
request.ContentType = "application/x-unknown";
request.Method = "GET";
using (WebResponse response = request.GetResponse())
{
     using (Stream stream = response.GetResponseStream())
     {
          var sr2 = new StreamReader(stream, Encoding.UTF8);//.ASCII);
          var srt = sr2.ReadToEnd();
          var a = srt.Length;
          using (var sw = new StreamWriter("WebDataTestdocs/testpdf.pdf"))
          {
               sw.Write(srt);
          }
     }
} 
```

我得到一个文件，但它说它已损坏。也使用 UTF8 使文件大小比我访问该站点时得到的更大。如果我制作 Encoding.ASCII，文件大小是正确的，但仍然收到损坏的文件错误。我可以通过用记事本打开文件来看到文件中的英文文本，所以我不确定究竟是什么损坏了。

任何可以提供的帮助将不胜感激，我已经有一段时间了！

# android - 具有透明区域的纹理将区域呈现为黑色 - 如何使它们透明？

> ID：13795185
> 
> 赞同：1
> 
> 时间：2012-12-10T04:51:52.210
> 
> 标签：android, opengl-es, opengl-es-2.0

我有一个非常简单的 2d 正方形，我将游戏精灵从纹理渲染到它上面。这一切都很好，除了纹理中应该透明的区域被渲染为黑色。如何渲染这些透明区域以显示正方形后面的对象（在本例中为背景）？

* * *

万一相关，这里是简单的片段着色器：

```
uniform sampler2D uTexture;
varying vec2 vImagePosition;
void main(){
    gl_FragColor =  texture2D(uTexture, vImagePosition);
} 
```

和顶点着色器：

```
attribute vec4 aPosition;
attribute vec2 aImagePosition;
uniform mat4 uMVPMatrix;
varying vec2 vImagePosition;
void main(){
    gl_Position = uMVPMatrix*aPosition;
    vImagePosition = aImagePosition;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T06:21:13.077

经过几个小时的搜索，我实际上偶然发现了答案。你必须打开混合。希望这对其他人有帮助。

```
GLES20.glEnable(GLES20.GL_BLEND);
GLES20.glBlendFunc(GLES20.GL_SRC_ALPHA, GLES20.GL_ONE_MINUS_SRC_ALPHA); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T05:52:35.833

您可能更喜欢将透明区域编码为 Alpha 通道，以便透明区域具有平滑过渡。如果您只使用黑色 RGB(0,0,0) 颜色，那么您应该在片段着色器中考虑到这一点。黑色不代表没有颜色，代表黑色。启用 OpenGL 混合状态，以便在将像素值写入缓冲区时考虑来自片段着色器的 Alpha 通道。例如：

```
uniform sampler2D uTexture;
varying vec2 vImagePosition;
vec4 color;

void main(){
    color =  texture2D(uTexture, vImagePosition);
    if(color.r == 0 && color.g == 0 && color.b == 0){
        gl_FragColor = vec4(0,0,0,0);
    } else{
        gl_FragColor = color;
    }
} 
```

（我没有检查上面的代码是否编译，只是给你一个想法）。

# asp.net-mvc - MVC 应用程序，这个逻辑属于哪里？

> ID：13795191
> 
> 赞同：3
> 
> 时间：2012-12-10T04:52:40.293
> 
> 标签：asp.net-mvc, model-view-controller

在上周的工作中，我们举行了一次会议/演讲，讨论了重新思考我们如何做 MVC，基于我们老板可能进行的大量研究以及对其他 SO 问题的一些阅读。对我来说，一个收获是，当人们说“将逻辑与数据分离”时，我可能更准确地说“将逻辑与数据*源*分离”。如果你做第一个，你可能会成为贫血域模型的牺牲品。我在这方面是正确的吗？

其次，我们了解到 MVC 不会在任何地方包含您的业务逻辑。这应该位于 Web 应用程序之外的单独服务层或 BLL 中。协调这两点似乎有点棘手 - 是否按照基本 OOP 原则的要求，特定逻辑与数据对象一起使用，还是在单独的层中？

这是我现在需要帮助的一个具体示例。我非常确信这将属于服务层，但我还有其他问题。假设我有一些行为将多个不同类型的不同实体作为输入。它运行，然后作为输出，它可以修改输入实体，并生成新实体作为记录。在我的情况下，它是为了游戏，但你可以说它就像一个交易。涉及多人，一些产品，并生成了收据。

1.  一个简单的问题，你会把这个逻辑放在哪里？它是一个被实例化的单独的类吗？
2.  难题（对我而言）是谁负责调用此代码？让控制器这样做会感觉不对。或者这正是它的工作？如果它不在任何一个特定页面上运行，而是在用户在特定时间后访问该站点时运行怎么办？基础控制器？
3.  一般来说，您如何在“这属于我的实体类，因此它不仅仅是一堆 getter 和 setter”和“这属于我的服务层”之间做出决定？还是我把事情搞混了……实体类是否属于服务层？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T23:48:01.940

让我们先整理一些术语。正如您所说，您所说的“服务层”通常称为“域模型”，不要与 MVC 模型混淆。在最基本的层面上，MVC 模型封装了领域模型。两者如何交互不是由模式本身定义的，而是模型存储状态的逻辑方式是实现两种不同的状态：

*   域状态——在现实世界中，这通常会以某种方式存储在数据库中，但域模型不应该将任何数据源暴露给 MVC 模型。这允许域模型保留适当的封装。任何改变或访问此数据的逻辑都应在此处使用相关但抽象的访问器来完成，以便 MVC 模型访问。

*   应用程序状态——例如“当前正在编辑哪个记录？”

要回答您的问题，这实际上取决于您对数据的处理方式。如果您正在进行任何类型的处理，那么这应该在域模型中完成。如果您只是获取显示所需的数据集合，则 MVC 模型应查询域模型以检索相关数据。然后视图应该向模型查询此数据。

所以回答你的问题：

1.  在这种特定情况下：处理数据的事务应该在域模型内。它可以直接访问所有相关数据，只需使用任何必需的参数进行调用。这促进了可重用性，因为它不直接绑定到 MVC 模型。
2.  从技术上讲，如果您的控制器直接访问域模型，则它更接近于 MVVM 实现而不是 MVC 实现。但是，这并不是一件坏事，只要您的域模型采用与域逻辑无关的参数，就没有真正的问题。然而，控制器不应该构建域对象（例如创建用户帐户并将其传递给模型）。拥有位于 MVC 三元组之外的域模型的原因正是为了：因此，调用代码的内容无关紧要，域逻辑与其运行的体系结构无关。这是一件好事。MVC 是表现性的，有时域逻辑只是数据处理。关于“每当用户在特定时间后访问站点”这是域逻辑，因此当然应该进入域模型。
3.  的确。实体（我假设您的意思是指单个域对象、用户、产品、博客等的对象？）本身可能不包含太多逻辑，因为它们主要是数据结构。一个订单可能有一个“getProducts()”或“getDeliveryAddress()”来获取相关实体，但域模型会对数据本身进行任何处理。

根据经验，几乎所有改变数据或处理来自多个实体的数据的逻辑都应该发生在域模型中。这有两个主要原因： 1\. 可重用性，该逻辑可以在任何地方重用。2.封装。一旦开始将此逻辑放入实体中，您最终会遇到域实体依赖于其他域实体的情况。这会导致现实世界中的代码非常脆弱，因为您最终会在以后引入任意规则，例如“这些客户不必输入付款详细信息”。“这是一个公司客户，他们没有帐单地址”，如果您已经为您的“订单”建模

# perl - 使用 awk 或 cut 或 perl 选择特定列

> ID：13795196
> 
> 赞同：24
> 
> 时间：2012-12-10T04:53:15.470
> 
> 标签：perl, unix, sed, awk

我需要从制表符分隔的文件中选择第 7 列。例如：

```
cat filename | awk '{print $7}' 
```

问题是第 4 列中的数据有多个值，中间有空格。示例 - 以下输出中的最后一行：

```
user  \Adminis FL_vol Design         0         -       1       -
group        0 FL_vol Design   19324481         -    3014       -
user      \MAK FL_vol Design   16875161         -    2618       -
tree       826 FL_vol Out Global Doc Mark     16875162         -    9618       - /vol/FL_vol/Out Global Doc Mark 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-10T05:36:40.153

如果数据是明确的制表符分隔的，那么`cut`将在制表符上剪切，而不是空格：

```
cut -f7 filename 
```

您当然也可以使用 来做到这`awk`一点：

```
awk -F'\t' '{ print $7 }' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T05:38:31.050

如果字段由制表符分隔，并且您担心某些字段包含空格，那么这里没有问题，只需：

```
cut -f 7 
```

（剪切默认为制表符分隔的字段。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-10T04:57:35.053

从输入文件的格式来看，您可以使用分隔`-`而不是空格：

```
awk 'BEGIN{FS="-"} {print $2}' filename 
```

*   `FS`代表字段分隔符，只需将其视为输入的分隔符。
*   鉴于我们现在在 上划界`-`，您之前的第 7 个字段将成为第 2 个字段。
*   [救猫](http://partmaps.org/era/unix/award.html)！将输入文件指定`filename`为 awk 的参数。

* * *

或者，如果您的数据字段由制表符分隔，您可以更明确地执行以下操作：

```
awk 'BEGIN{FS="\t"} {print $7}' filename 
```

这将解决问题，因为`Out Global Doc Mark`看起来被空格分隔。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T07:30:15.873

这可能对您有用（GNU sed）：

```
sed -r 's/(([^\t]*)\t?){7}.*/\2/' file 
```

* * *

此替换命令选择行中的所有内容并返回第 7 个非制表符。在`sed`最后一个被分组的事物中，`(...)`将通过使用反向引用在替换的左侧返回。在这种情况下，第一个反向引用将返回非制表符和制表符（如果存在 NB`?`元字符，其中一个或没有一个正在进行的模式）。`.*`如果任何。

# javascript - 在 Express 中 res.render() 和 res.redirect() 的正确用法是什么？

> ID：13795197
> 
> 赞同：15
> 
> 时间：2012-12-10T04:53:17.250
> 
> 标签：javascript, node.js, express

我在解读两者之间的歧义时遇到了一些麻烦

```
res.render('viewname', {msg: 'Message' }) 
```

和

```
res.redirect('route') 
```

重定向功能不允许您传递“消息”，但您可能仍然想要，并且渲染功能将渲染您的视图，但它不会更改您的 Web 应用程序的 URL，也不会触发所需的功能你的路线。

我遇到的情况是我有一个邀请表单，它有一个更改我的 URL 的操作，并在该路由上触发一个函数，该函数有一个成功和失败回调，我想用一条消息将用户重定向到仪表板表示成功或失败。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-10T06:37:50.983

查看 connect-flash 以使用 rails 样式的消息闪烁。

res.render() 将使用传递给它的数据呈现视图， res.redirect() 将用户重定向到另一个页面（此时请求重新开始）

# objective-c - webViewDidFinishLoad：在 iOS 6 中不调用（但在 iOS 5 中调用）

> ID：13795200
> 
> 赞同：3
> 
> 时间：2012-12-10T04:53:44.380
> 
> 标签：objective-c, ios

我要加载的网址是以下形式：`@"http://user:password@x.x.x.x/something"`

我所做的只是创建一个 NSURLRequest 对象并在 Web 视图中加载请求，如下所示：

```
NSString *urlString = @"http://user:password@x.x.x.x/something";
NSURL *url = [NSURL URLWithString:urlString];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[_webView loadRequest:request]; 
```

该页面在 iOS 6.0 模拟器中加载正常，但在 iOS 5.0 模拟器中加载不正常。

在 iOS 5.0 中发生的情况是调用了 Web 视图委托方法`webViewDidStartLoad:`，但其中任何一个方法`webViewDidFinishLoad:`都`webView:didFailLoadWithError:`没有被调用。

我错过了什么？

# websocket - How to handle a remote delete in the adapter?

> ID：13795204
> 
> 赞同：1
> 
> 时间：2012-12-10T04:54:14.443
> 
> 标签：websocket, ember-data

It seems that Ember-Data is very well suited to manage change originating from the client, and I've handled changing coming in realtime via websockets with `store.load(type, id, data)`, but I can't figure out how to tell the `store` that an object has been removed on the server and thus needs to be removed locally as well.

Anyone knows how to do that?

Thanks!

# javascript - 为什么我的 d3 数据在 body 之后输出？

> ID：13795205
> 
> 赞同：5
> 
> 时间：2012-12-10T04:54:21.353
> 
> 标签：javascript, css, d3.js

这是一个简单的页面，展示了 d3 的一些基本功能。我做了一个数据集 var dataset = [3,1,4,1,5]; 并想输出它以及一些段落。数据是出现的，但*在*身体之后！奇怪的 ...

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title> demo project</title>
    <script type="text/javascript" src="d3/d3.v2.js"></script>
</head>
<body>

    <script type="text/javascript">
        d3.select("body").append("p").text("hello!");
        d3.select("p").append("text").text(" hello!!");
        d3.select("body").append("p").text("hello2!");
        d3.select("p:nth-child(3)").append("text").text(" hello2!!");
        var dataset = [3,1,4,1,5];
        d3.select("p:nth-child(3n+1)")
            .data(dataset)
            .enter()
            .append("p")
            .text(function(d) { return d; });
        d3.select("p:nth-child(7n + 1)").append("text").text("hello againss?");
    </script>

</body>
</html> 
```

页面如下所示：

![在此处输入图像描述](../Images/e2d6b1d4ac21e4ca7a31ea566488345b.png)

DOM 看起来像这样（注意数据显示*在*body 关闭标记之后）：

![在此处输入图像描述](../Images/700a0209e76da9eda1ab6a31f8d577dc.png)

还要注意行 d3.select("p:nth-child(7n + 1)").append("text").text("hello againstss?"); 打算在我的所有数据之后打印，但它没有显示出来。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T07:08:04.260

简短的回答是，在您的特定情况下， enter() 选择`parentNode`是`document`（而不是`body`）。

让我们举一个简单的例子来看看 enter() 选择是什么样子的。假设我们有一个正文没有任何 p 元素的文档。

```
var ps = d3.select("body").selectAll("p")
    .data([0, 1, 2]); 
```

由于尚不存在 p 个元素，因此 enter() 选择将包含三个元素。让我们检查输入选择：

![ps.enter()](../Images/ce0adb4636a664655de9d3c0a94e63f2.png)

您会看到内部数组有一个名为 parentNode 的属性。当您使用[selection.append()](https://github.com/mbostock/d3/wiki/Selections#wiki-append)或[selection.insert()](https://github.com/mbostock/d3/wiki/Selections#wiki-insert)添加新元素时，新元素将被创建为该父节点的子节点。

因此，检查`ps.enter()[0].parentNode`将揭示`body`元素。现在很清楚，在数据连接中，selectAll 之前的选择指定了父节点；在上述情况下是`d3.select("body")`。

如果我们在数据连接中省略了 select("body") 部分会怎样？

```
// example of bad data join
var ps2 = d3.selectAll("p")
    .data([0, 1, 2]); 
```

事实证明，在这种情况下`ps2.enter()[0].parentNode`是`#document`！这意味着如果您使用此 enter() 选择添加元素，它们将成为文档的直接子元素。append 方法会将它们添加到文档的末尾；即在身体之后。

最后一种情况基本上就是你遇到的情况。您的数据连接和输入表达式不正确；它应该遵循这种模式：

```
d3.select(parent).selectAll(element)
    .data(data)
  .enter().append(element); 
```

顺便说一句，没有 HTML`text`元素。所以，`append("text")`似乎没什么意义。

# java - Java 类型转换的奇怪输出

> ID：13795206
> 
> 赞同：1
> 
> 时间：2012-12-10T04:54:49.310
> 
> 标签：java, encryption, rsa

我正在使用 RSA 算法进行简单的加密，发现了一个奇怪的错误。

```
private static Integer testEnc(Integer value){
    Integer val = (int)Math.pow(value, 37);
    return val % 437; 
}

private static Integer testDec(Integer value){
    Integer val = new Integer((int)Math.pow(value, 289));
    return val % 437;
}

public static void main(String[] args) {
    System.out.print("Encode 55  = ");
    Integer encoded = testEnc(2);
    System.out.println(encoded + "\n");

    System.out.print(encoded + " decoded = ");
    Integer decoded = testDec(3977645);
    System.out.println(decoded + "n");
} 
```

无论输入如何，以下两个函数都返回 97。如果我注释掉模数并只返回 val，则返回值为 2147483647。

将 double 类型转换为 int 似乎是问题所在，但我不确定为什么会这样。这些方法是静态的，只是因为我是从主方法调用它们的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T04:59:39.567

2147483647 是 int 最大值，即 2^31-1。对于任何值 >=2，你会得到一个溢出，因为 2^37 > 2^31-1

为了获得功率模 437，您应该在每一步都获得模数。例如：

```
private static int myPow(int a, int b, int mod){
    int ret = 1;
    for(int i = 0; i < b; i++)
    {
        ret = (ret * a) % mod;
    }
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T04:59:34.117

2147483647 是最大的有符号 32 位整数。我的猜测是您的 37 次方和 289 次方的测试值大于可以存储在 int 中的值。尝试使用 long 看看会发生什么。

# html - 需要使用 MVC.net 4 在移动设备上放置 10000 条记录的网格

> ID：13795212
> 
> 赞同：0
> 
> 时间：2012-12-10T04:55:42.967
> 
> 标签：html, jquery-mobile, asp.net-mvc-4

我有 100,000 条记录的 JSON。我需要在手机上展示这个。我有两个选择：

1.  加载完整的 JSON 一次，然后使用 jQuery 移动网格来呈现它
2.  使用 MVc4.net 先获取 20 条记录，然后使用分页加载后续记录。

请建议我哪种方法最好，因为性能是我的主要参数。在第一种情况下，初始加载时间会更慢，但随后的分页会更快，但在第二种情况下，会发生更多的服务器交互。

# actionscript-3 - ActionScripting 问题：添加/删除子项

> ID：13795216
> 
> 赞同：2
> 
> 时间：2012-12-10T04:56:24.260
> 
> 标签：actionscript-3, actionscript, event-handling, removechild, addchild

我有三个电影剪辑都链接到舞台，我希望它们表现得像一个按钮/但我没有使用按钮，因为我还没有找到一种方法让每个部分（上、下、下、击）都被动画和不仅仅是在使用鼠标时更改。到目前为止，我已经能够让所有三个都出现在我的舞台上，并在我将鼠标悬停以及单击时显示出来，但我认为我在 removeChild 上做错了。每个 MC 一次应该出现一个，现在当我将鼠标悬停在上面并似乎“闪烁”时，所有三个都会出现。这是我的代码：

```
var mainMoon:swayingMoon = new swayingMoon();
mainMoon.x = 50;
mainMoon.y = 10;
addChild(mainMoon);

var hoverMoon:glowMoon = new glowMoon();
hoverMoon.x = 50;
hoverMoon.y = 10;

var movieMoon:clickedMoon = new clickedMoon();
movieMoon.x = 50;
movieMoon.y = 10;

mainMoon.addEventListener(MouseEvent.ROLL_OVER, showHoverMoon);
mainMoon.addEventListener(MouseEvent.ROLL_OUT, hideHoverMoon);
hoverMoon.addEventListener(MouseEvent.CLICK, startMovieMoon)
function showHoverMoon(event:MouseEvent):void
{
 addChild(hoverMoon);

}
function hideHoverMoon(event:MouseEvent):void
{
removeChild(hoverMoon)
}
function startMovieMoon(event:MouseEvent):void
{
addChild(movieMoon);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:24:08.807

我认为您应该将您的三个月亮状态封装到一个单独的 MovieClip 中，该视频剪辑将自行控制所有月相变化。如果已经是这样，那很好。这种 MovieClip-Button 类型对象的一般原则是将侦听器分配给父实例，而不是该按钮的部分。

```
public class Moon extends Sprite {
    private var upState:swayingMoon=new swayingMoon();
    private var overState:glowMoon=new glowMoon();
    private var downState:clickedMoon=new clickedMoon();
    private var areWeClicked:Boolean;
    private var areWeOver:Boolean;
    public function Moon() {
        areWeClicked=false;
        areWeOver=false;
        addChild(upState);
        addEventListener(MouseEvent.ROLL_OVER, showHoverMoon);
        addEventListener(MouseEvent.ROLL_OUT, hideHoverMoon);
        addEventListener(MouseEvent.CLICK, showClickedMoon);
        addEventListener(Event.COMPLETE, hideClickedMoon);
    }
    private function showHoverMoon(e:MouseEvent):void {
        areWeOver=true;
        if (areWeClicked) return;
        removeChild(upState);
        addChild(overState);
    }
    private function hideHoverMoon(e:MouseEvent):void {
        areWeOver=false;
        if (areWeClicked) return;
        removeChild(overState);
        addChild(upState);
    }
    private function showClickedMoon(e:MouseEvent):void {
        if (areWeClicked) {
            downState.gotoAndPlay(1);
            return;
        }
        if (overState.parent) removeChild(overState); else removeChild(upState);
        addChild(downState);
        downState.gotoAndPlay(1); // your clicked moon seems to be a playing MC, so starting it over
        areWeClicked=true;
    }
    private function hideClickedMoon(e:Event):void {
        if (e.target!=downState) return; // not our event
        if (!areWeClicked) return;
        areWeClicked=false;
        removeChild(downState);
        if (areWeOver) addChild(overState); else addChild(upState);
    }
} 
```

现在，您的父类正在控制发生的事情和时间。我假设您的`clickedMoon`MC 只会完全播放一次，然后`Event.COMPLETE`向其自身发送一个事件，以便其父级收到通知并采取行动。

最初，您的事件侦听器结构阻止您隐藏`mainMoon`MC，否则您的其他侦听器将永远不会行动，现在您正在使用父对象侦听事件，并且可以安全地删除月球的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:10:40.417

```
Just for a custom button you are going too much complex way. one movieClip is enough for create the button. First create a movieClip and inside that movieClip's timeline create two more frame for 'hover' and click effect. here is little bit of code to start.

var myButton_btn:CustomButton = new CustomButton();
addChild(myButton_btn);
myButton_btn.x = 100;
myButton_btn.y = 100;

myButton_btn.addEventListener(MouseEvent.ROLL_OVER, onOver);
myButton_btn.addEventListener(MouseEvent.ROLL_OUT, onOut);
myButton_btn.addEventListener(MouseEvent.CLICK, onClick);

function onOver(event:MouseEvent):void {
    //trace('over');
    event.target.gotoAndStop('hover');
}

function onOut(event:MouseEvent):void {
    //trace('normal');
    event.target.gotoAndStop('normal');
}

function onClick(event:MouseEvent):void {
    //trace('click');
    event.target.gotoAndStop('click');

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:16:22.333

我不建议这样做，因为它会使事情变得不必要的复杂。现在，对于单个按钮，您有 3 倍的影片剪辑/精灵、添加/删除子事件处理程序以及其他要检查/调试的变量。将其乘以您拥有的按钮数量。

相反，我建议使用或扩展 SimpleButton{} 类或编写自己的类来封装行为。

SimpleButton 类：[http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/SimpleButton.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/SimpleButton.html)

# redmine - 无法在 Redmine 中发送电子邮件

> ID：13795217
> 
> 赞同：2
> 
> 时间：2012-12-10T04:56:27.897
> 
> 标签：redmine

我尝试使用 sendmail 方法在 Redmine 中发送电子邮件，但我没有收到任何电子邮件。因此，我尝试使用以下参数在 Redmine 中配置 smtp 电子邮件设置，但我收到错误“发送邮件时发生错误（执行已过期）”。

```
production:
  email_delivery:
    delivery_method: :smtp
    smtp_settings:
      address: "box784.bluehost.com"
      port: 465
      authentication: :plain
      user_name: "username+domain.com"
      password: password
      enable_starttls_auto: true 
```

我的信息：

```
Environment:
  Redmine version                          2.1.4.stable
  Ruby version                             1.8.7 (x86_64-linux)
  Rails version                            3.2.8
  Environment                              production
  Database adapter                         MySQL
Redmine plugins:
  no plugin installed 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-09T15:13:05.730

After a couple of very late nights playing with all the settings in the configuration.yml file, I have finally been able to get email notifications to work with Redmine on Bluehost. Getting it to work with SMTP was a futile exercise, and Bluehost wasn't very helpful with getting it resolved, however I got it working using sendmail. The trick is to add a couple extra parameters, which really should be documented in the Redmine Wiki help. Here is a copy of my configuration.yml file, which works. It's the enable_starttls_auto and authentication settings that make it work (go figure). Make sure you get the spacing right (each indent has 2 spaces):

```
production:  
    email_delivery:
        delivery_method: :sendmail
        sendmail_settings:
            arguments: -i
            enable_starttls_auto: false
            authentication: :none 
```

Finally! Working Sendmail with Redmine on Bluehost!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-27T17:46:24.660

[![生产：email_delivery：delivery_method：：smtp smtp_settings：enable_starttls_auto：真实地址：](../Images/92644c4c6a7a88aa0728b91849263171.png)](https://i.stack.imgur.com/ZbRny.png)

此配置有效。您可以使用 Redmine 中的测试电子邮件功能对此进行测试。

来源：[https ://poopcode.com/configure-outlook-email-in-redmine/](https://poopcode.com/configure-outlook-email-in-redmine/)

# ruby-on-rails - TypeError：日期不能被强制转换为 Fixnum

> ID：13795219
> 
> 赞同：0
> 
> 时间：2012-12-10T04:56:57.530
> 
> 标签：ruby-on-rails, date

基本上是这样的：

```
1.9.3p0 :024 > 2.day + Date.today

```

给出一个错误：

```
TypeError：日期不能被强制转换为 Fixnum
```

谁能解释为什么会发生这种情况以及如何将 2 天/月添加到当前日期

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T04:59:25.973

你需要把它转过来。

```
Date.today + 2.days 
```

**跟进**

`2.days`返回 a `Fixnum`，它有一个`.+()`方法，它需要另一个数字类型，但`Date`不是。 `Date`有一个`.+()`接受`Fixnum`和其他数字类型的方法。

# sql - LISTAGG 函数：“字符串连接的结果太长”

> ID：13795220
> 
> 赞同：70
> 
> 时间：2012-12-10T04:57:04.403
> 
> 标签：sql, oracle

我正在使用 Oracle SQL 开发人员版本 3.0.04。我试图使用该功能`LISTAGG`将数据分组在一起..

```
 CREATE TABLE FINAL_LOG AS
    SELECT SESSION_DT, C_IP, CS_USER_AGENT,
    listagg(WEB_LINK, ' ')
        WITHIN GROUP(ORDER BY C_IP, CS_USER_AGENT) "WEB_LINKS"
        FROM webviews
        GROUP BY C_IP, CS_USER_AGENT, SESSION_DT
        ORDER BY SESSION_DT 
```

但是，我不断收到错误消息，

```
SQL Error: ORA-01489: result of string concatenation is too long 
```

我很确定输出可能超过 4000，因为这里提到的 WEB_LINK 是 url stem 和 url query 的串联值。

有什么办法可以绕过它还是有其他选择？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2015-03-12T11:23:24.797

```
SELECT RTRIM(XMLAGG(XMLELEMENT(E,colname,',').EXTRACT('//text()') ORDER BY colname).GetClobVal(),',') AS LIST
FROM tablename; 
```

这将返回一个 clob 值，因此对行没有限制。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-12-10T05:22:12.507

由于聚合字符串可能超过 4000 个字节，因此您不能使用该`LISTAGG`函数。您可能会创建一个[用户定义的聚合函数](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php#user_defined_aggregate_function)，该函数返回 a`CLOB`而不是 a `VARCHAR2`。有一个用户定义的聚合示例，它`CLOB`在[原始 askTom 讨论](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:2196162600402#29842804516386)中返回一个 Tim 从第一个讨论链接到该讨论。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2017-10-23T16:39:23.147

`listagg`最近被 ISO SQL 标准 (SQL:2016) 覆盖。作为其中的一部分，它还获得了`on overflow`Oracle 12cR2 支持的子句。

```
LISTAGG(<expression>, <separator> ON OVERFLOW …) 
```

该`on overflow`子句支持一个`truncate`选项（作为默认`on overflow error`行为的替代）。

```
ON OVERFLOW TRUNCATE [<filler>] WITH[OUT] COUNT 
```

可选默认为三个句点 (...)，如果发生截断，将作为最后一个元素添加。

如果指定了 with count 并且发生了截断，则将省略的值的数量放在括号中并附加到结果中。

更多关于`listagg`'s`on overflow`条款： http: [//modern-sql.com/feature/listagg](http://modern-sql.com/feature/listagg)

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2016-02-17T09:22:37.487

您超出了同样适用的 4000 字节的**SQL 限制**`LISTAGG`。

```
SQL> SELECT listagg(text, ',') WITHIN GROUP (
  2  ORDER BY NULL)
  3  FROM
  4    (SELECT to_char(to_date(level,'j'), 'jsp') text FROM dual CONNECT BY LEVEL < 250
  5    )
  6  /
SELECT listagg(text, ',') WITHIN GROUP (
*
ERROR at line 1:
ORA-01489: result of string concatenation is too long 
```

作为一种解决方法，您可以使用**XMLAGG**。

例如，

```
SQL> SET LONG 2000000
SQL> SET pagesize 50000
SQL> SELECT rtrim(xmlagg(XMLELEMENT(e,text,',').EXTRACT('//text()')
  2                     ).GetClobVal(),',') very_long_text
  3  FROM
  4    (SELECT to_char(to_date(level,'j'), 'jsp') text FROM dual CONNECT BY LEVEL < 250
  5    )
  6  /

VERY_LONG_TEXT
--------------------------------------------------------------------------------
one,two,three,four,five,six,seven,eight,nine,ten,eleven,twelve,thirteen,fourteen
,fifteen,sixteen,seventeen,eighteen,nineteen,twenty,twenty-one,twenty-two,twenty
-three,twenty-four,twenty-five,twenty-six,twenty-seven,twenty-eight,twenty-nine,
thirty,thirty-one,thirty-two,thirty-three,thirty-four,thirty-five,thirty-six,thi
rty-seven,thirty-eight,thirty-nine,forty,forty-one,forty-two,forty-three,forty-f
our,forty-five,forty-six,forty-seven,forty-eight,forty-nine,fifty,fifty-one,fift
y-two,fifty-three,fifty-four,fifty-five,fifty-six,fifty-seven,fifty-eight,fifty-
nine,sixty,sixty-one,sixty-two,sixty-three,sixty-four,sixty-five,sixty-six,sixty
-seven,sixty-eight,sixty-nine,seventy,seventy-one,seventy-two,seventy-three,seve
nty-four,seventy-five,seventy-six,seventy-seven,seventy-eight,seventy-nine,eight
y,eighty-one,eighty-two,eighty-three,eighty-four,eighty-five,eighty-six,eighty-s
even,eighty-eight,eighty-nine,ninety,ninety-one,ninety-two,ninety-three,ninety-f
our,ninety-five,ninety-six,ninety-seven,ninety-eight,ninety-nine,one hundred,one
 hundred one,one hundred two,one hundred three,one hundred four,one hundred five
,one hundred six,one hundred seven,one hundred eight,one hundred nine,one hundre
d ten,one hundred eleven,one hundred twelve,one hundred thirteen,one hundred fou
rteen,one hundred fifteen,one hundred sixteen,one hundred seventeen,one hundred
eighteen,one hundred nineteen,one hundred twenty,one hundred twenty-one,one hund
red twenty-two,one hundred twenty-three,one hundred twenty-four,one hundred twen
ty-five,one hundred twenty-six,one hundred twenty-seven,one hundred twenty-eight
,one hundred twenty-nine,one hundred thirty,one hundred thirty-one,one hundred t
hirty-two,one hundred thirty-three,one hundred thirty-four,one hundred thirty-fi
ve,one hundred thirty-six,one hundred thirty-seven,one hundred thirty-eight,one
hundred thirty-nine,one hundred forty,one hundred forty-one,one hundred forty-tw
o,one hundred forty-three,one hundred forty-four,one hundred forty-five,one hund
red forty-six,one hundred forty-seven,one hundred forty-eight,one hundred forty-
nine,one hundred fifty,one hundred fifty-one,one hundred fifty-two,one hundred f
ifty-three,one hundred fifty-four,one hundred fifty-five,one hundred fifty-six,o
ne hundred fifty-seven,one hundred fifty-eight,one hundred fifty-nine,one hundre
d sixty,one hundred sixty-one,one hundred sixty-two,one hundred sixty-three,one
hundred sixty-four,one hundred sixty-five,one hundred sixty-six,one hundred sixt
y-seven,one hundred sixty-eight,one hundred sixty-nine,one hundred seventy,one h
undred seventy-one,one hundred seventy-two,one hundred seventy-three,one hundred
 seventy-four,one hundred seventy-five,one hundred seventy-six,one hundred seven
ty-seven,one hundred seventy-eight,one hundred seventy-nine,one hundred eighty,o
ne hundred eighty-one,one hundred eighty-two,one hundred eighty-three,one hundre
d eighty-four,one hundred eighty-five,one hundred eighty-six,one hundred eighty-
seven,one hundred eighty-eight,one hundred eighty-nine,one hundred ninety,one hu
ndred ninety-one,one hundred ninety-two,one hundred ninety-three,one hundred nin
ety-four,one hundred ninety-five,one hundred ninety-six,one hundred ninety-seven
,one hundred ninety-eight,one hundred ninety-nine,two hundred,two hundred one,tw
o hundred two,two hundred three,two hundred four,two hundred five,two hundred si
x,two hundred seven,two hundred eight,two hundred nine,two hundred ten,two hundr
ed eleven,two hundred twelve,two hundred thirteen,two hundred fourteen,two hundr
ed fifteen,two hundred sixteen,two hundred seventeen,two hundred eighteen,two hu
ndred nineteen,two hundred twenty,two hundred twenty-one,two hundred twenty-two,
two hundred twenty-three,two hundred twenty-four,two hundred twenty-five,two hun
dred twenty-six,two hundred twenty-seven,two hundred twenty-eight,two hundred tw
enty-nine,two hundred thirty,two hundred thirty-one,two hundred thirty-two,two h
undred thirty-three,two hundred thirty-four,two hundred thirty-five,two hundred
thirty-six,two hundred thirty-seven,two hundred thirty-eight,two hundred thirty-
nine,two hundred forty,two hundred forty-one,two hundred forty-two,two hundred f
orty-three,two hundred forty-four,two hundred forty-five,two hundred forty-six,t
wo hundred forty-seven,two hundred forty-eight,two hundred forty-nine 
```

* * *

如果要连接本身有**4000 字节的****多个列**，则可以连接每列的 XMLAGG 输出以避免 4000 字节的 SQL 限制。

 **例如，

```
WITH DATA AS
  ( SELECT 1 id, rpad('a1',4000,'*') col1, rpad('b1',4000,'*') col2 FROM dual
  UNION
  SELECT 2 id, rpad('a2',4000,'*') col1, rpad('b2',4000,'*') col2 FROM dual
  )
SELECT ID,
       rtrim(xmlagg(XMLELEMENT(e,col1,',').EXTRACT('//text()') ).GetClobVal(), ',')
       || 
       rtrim(xmlagg(XMLELEMENT(e,col2,',').EXTRACT('//text()') ).GetClobVal(), ',') 
       AS very_long_text
FROM DATA
GROUP BY ID
ORDER BY ID; 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2018-02-11T13:10:05.687

12cR2 中添加的一个新特性`ON OVERFLOW`是`LISTAGG`. 包含此子句的查询如下所示：

```
SELECT pid, LISTAGG(Desc, ' ' ON OVERFLOW TRUNCATE ) WITHIN GROUP (ORDER BY seq) AS desc
FROM B GROUP BY pid; 
```

以上会将输出限制为 4000 个字符，但不会抛出 `ORA-01489`错误。

这些是`ON OVERFLOW`条款的一些附加选项：

*   `ON OVERFLOW TRUNCATE 'Contd..'` ：这将显示`'Contd..'`在字符串的末尾（默认为`...`）
*   `ON OVERFLOW TRUNCATE ''` ：这将显示没有任何终止字符串的 4000 个字符。
*   `ON OVERFLOW TRUNCATE WITH COUNT`：这将在终止字符之后显示最后的字符总数。例如：-' `...(5512)`'
*   `ON OVERFLOW ERROR`：如果您希望`LISTAGG`失败并出现 `ORA-01489`错误（无论如何都是默认设置）。

**[12c R2 中的 LISTAGG 增强功能](https://oracle-base.com/articles/12c/listagg-function-enhancements-12cr2)**

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-11-23T01:02:11.010

我可以容忍我的字段连接成多行，每行少于 4000 个字符的限制 - 执行以下操作：

```
with PRECALC as (select 
                 floor(4000/(max(length(MY_COLUMN)+LENGTH(',')))) as MAX_FIELD_LENGTH
                 from MY_TABLE)
select LISTAGG(MY_COLUMN,',') WITHIN GROUP(ORDER BY floor(rownum/MAX_FIELD_LENGTH), MY_COLUMN)
from MY_TABLE, PRECALC
group by floor(rownum/MAX_FIELD_LENGTH)
; 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-07-21T14:49:17.673

添加到接受的答案。我遇到了类似的问题，最终使用了一个返回 clob 而不是 varchar2 的用户定义函数。这是我的解决方案：

```
CREATE OR REPLACE TYPE temp_data FORCE AS OBJECT
(
    temporary_data NVARCHAR2(4000)
)
/

CREATE OR REPLACE TYPE temp_data_table FORCE AS TABLE OF temp_data;
/

CREATE OR REPLACE FUNCTION my_agg_func (p_temp_data_table IN temp_data_table, p_delimiter IN NVARCHAR2)
RETURN CLOB IS
  l_string CLOB;
BEGIN
  FOR i IN p_temp_data_table.FIRST .. p_temp_data_table.LAST LOOP
    IF i != p_temp_data_table.FIRST THEN
      l_string := l_string || p_delimiter;
    END IF;
    l_string := l_string || p_temp_data_table(i).temporary_data;
  END LOOP;
  RETURN l_string;
END my_agg_func;
/ 
```

现在，而不是做

```
LISTAGG(column_to_aggregate, '#any_delimiter#') WITHIN GROUP (ORDER BY column_to_order_by) 
```

我必须这样做

```
my_agg_func (
    cast(
        collect(
            temp_data(column_to_aggregate)
            order by column_to_order_by
        ) as temp_data_table
    ),
    '#any_delimiter#'
) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-04-26T08:36:50.780

管理 LISTAGG 中的溢出

我们可以使用 Database 12c SQL 模式匹配函数 MATCH_RECOGNIZE 来返回不超过限制的值列表。

以下链接中的示例代码和更多说明。

[https://blogs.oracle.com/datawarehousing/entry/managing_overflows_in_listagg](https://blogs.oracle.com/datawarehousing/entry/managing_overflows_in_listagg)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-07-03T10:10:13.507

在某些情况下，目的是获取所有**DISTINCT LISTAGG键，溢出是由 LISTAGG 连接****所有**键的事实引起的。

这是一个小例子

```
create table tab as
select 
  trunc(rownum/10) x,
  'GRP'||to_char(mod(rownum,4)) y,
  mod(rownum,10) z
 from dual connect by level < 100;

select  
 x,
 LISTAGG(y, '; ') WITHIN GROUP (ORDER BY y) y_lst
from tab
group by x;

        X Y_LST                                                            
---------- ------------------------------------------------------------------
         0 GRP0; GRP0; GRP1; GRP1; GRP1; GRP2; GRP2; GRP3; GRP3               
         1 GRP0; GRP0; GRP1; GRP1; GRP2; GRP2; GRP2; GRP3; GRP3; GRP3         
         2 GRP0; GRP0; GRP0; GRP1; GRP1; GRP1; GRP2; GRP2; GRP3; GRP3         
         3 GRP0; GRP0; GRP1; GRP1; GRP2; GRP2; GRP2; GRP3; GRP3; GRP3         
         4 GRP0; GRP0; GRP0; GRP1; GRP1; GRP1; GRP2; GRP2; GRP3; GRP3         
         5 GRP0; GRP0; GRP1; GRP1; GRP2; GRP2; GRP2; GRP3; GRP3; GRP3         
         6 GRP0; GRP0; GRP0; GRP1; GRP1; GRP1; GRP2; GRP2; GRP3; GRP3         
         7 GRP0; GRP0; GRP1; GRP1; GRP2; GRP2; GRP2; GRP3; GRP3; GRP3         
         8 GRP0; GRP0; GRP0; GRP1; GRP1; GRP1; GRP2; GRP2; GRP3; GRP3         
         9 GRP0; GRP0; GRP1; GRP1; GRP2; GRP2; GRP2; GRP3; GRP3; GRP3 
```

如果组很大，重复的键会很快达到允许的最大长度，你会得到`ORA-01489: result of string concatenation is too long`.

不幸的是，不支持`LISTAGG( DISTINCT y, '; ')` 但作为一种解决方法，可以使用[LISTAGG 忽略 NULL 的事实。](https://stackoverflow.com/questions/38127914/oracle-listagg-top-3-most-frequent-values-given-in-one-column-grouped-by-id?answertab=active#tab-top)使用 ROW_NUMBER 我们将只考虑第一个键。

```
with rn as (
select x,y,z,
row_number() over (partition by x,y order by y) rn
from tab
)
select  
 x,
 LISTAGG( case when rn = 1 then y end, '; ') WITHIN GROUP (ORDER BY y) y_lst,
 sum(z) z 
from rn
group by x
order by x;

         X Y_LST                                       Z
---------- ---------------------------------- ----------
         0 GRP0; GRP1; GRP2; GRP3             45 
         1 GRP0; GRP1; GRP2; GRP3             45 
         2 GRP0; GRP1; GRP2; GRP3             45 
         3 GRP0; GRP1; GRP2; GRP3             45 
         4 GRP0; GRP1; GRP2; GRP3             45 
         5 GRP0; GRP1; GRP2; GRP3             45 
         6 GRP0; GRP1; GRP2; GRP3             45 
         7 GRP0; GRP1; GRP2; GRP3             45 
         8 GRP0; GRP1; GRP2; GRP3             45 
         9 GRP0; GRP1; GRP2; GRP3             45 
```

当然`GROUP BY x,y`，在子查询中使用也可以达到相同的结果。的优点`ROW_NUMBER`是可以使用所有其他聚合函数，如图所示`SUM(z)`。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-06-19T12:45:52.790

谢谢你的建议。连接多个字段时我遇到了同样的问题，但甚至`xmlagg`没有帮助我 - 我仍然得到 ORA-01489。经过多次尝试，我找到了原因和解决方案：

1.  `xmlagg`原因：我的商店中的字段之一大文本；
2.  解决方法：应用`to_clob()`函数。

例子：

```
rtrim(xmlagg(xmlelement(t, t.field1 ||'|'|| 
                           t.field2 ||'|'|| 
                           t.field3 ||'|'|| 
                           to_clob(t.field4),'; ').extract('//text()')).GetClobVal(),',') 
```

希望这对任何人都有帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-08-05T14:23:44.607

我们在这里使用 Oracle LISTAGG 解决了类似的问题。有一点，我们分组的内容超过了 4K 限制，但这很容易解决，方法是让第一个数据集采用前 15 个项目进行聚合，每个项目都有 256K 的限制。

更多信息：我们有项目，这些项目有变更单，而这些项目又有解释。为什么将数据库设置为以 256K 限制的块获取更改文本尚不清楚，但它是设计约束之一。因此，将变更说明输入表格的应用程序在 254K 处停止并插入，然后获取下一组文本，如果 > 254K 生成另一行，等等。所以我们有一个变更单的项目，即 1:1。然后我们将这些作为 1:n 进行解释。LISTAGG 连接所有这些。我们有 RMRKS_SN 值，每个备注和/或每个 254K 字符为 1。

最大的 RMRKS_SN 被发现是 31，所以我做了第一个数据集，将 SN 0 拉到 15，第二个数据集 16 到 30，最后一个数据集 31 到 45——嘿，让我们计划有人为一些变化添加很多解释订单！

在 SQL 报告中，Tablix 与第一个数据集相关联。要获取其他数据，请使用以下表达式：

=First(Fields!NON_STD_TXT.Value, "DataSet_EXPLAN") & First(Fields!NON_STD_TXT.Value, "ds_EXPLAN_SN_16_TO_30") & First(Fields!NON_STD_TXT.Value, "ds_EXPLAN_SN_31_TO_45")

对我们来说，由于安全限制，我们必须让 DB Group 创建函数等。因此，有了一点创意，我们就不必进行用户聚合或 UDF。

如果您的应用程序有某种 SN 可用于聚合，则此方法应该可以工作。我不知道等效的 TSQL 是什么——我们很幸运能够为这份报告与 Oracle 打交道，而 LISTAGG 是天赐之物。

代码是：

```
SELECT
LT.C_O_NBR AS LT_CO_NUM,
RT.C_O_NBR AS RT_CO_NUM,
LT.STD_LN_ITM_NBR, 
RT.NON_STD_LN_ITM_NBR,
RT.NON_STD_PRJ_NBR, 
LT.STD_PRJ_NBR, 
NVL(LT.PRPSL_LN_NBR, RT.PRPSL_LN_NBR) AS PRPSL_LN_NBR,
LT.STD_CO_EXPL_TXT AS STD_TXT,
LT.STD_CO_EXPLN_T, 
LT.STD_CO_EXPL_SN, 
RT.NON_STD_CO_EXPLN_T,
LISTAGG(RT.RMRKS_TXT_FLD, '') 
    WITHIN GROUP(ORDER BY RT.RMRKS_SN) AS NON_STD_TXT

FROM ...

    WHERE RT.RMRKS_SN BETWEEN 0 AND 15

GROUP BY 
    LT.C_O_NBR,
    RT.C_O_NBR,
    ... 
```

在其他 2 个数据集中，只需为 FROM 中的子查询选择 LISTAGG：

```
SELECT
LISTAGG(RT.RMRKS_TXT_FLD, '') 
    WITHIN GROUP(ORDER BY RT.RMRKS_SN) AS NON_STD_TXT 
```

从 ...

```
WHERE RT.RMRKS_SN BETWEEN 31 AND 45 
```

...

... 等等。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-04-05T15:01:04.783

使用 CLOB 和 substr 不使用 12c 溢出也可以

rtrim(dbms_lob.substr(XMLAGG(XMLELEMENT(E,column_name,',').EXTRACT('//text()') ORDER BY column_name).GetClobVal(),1000,1),',')**

# mysql - 插入触发器后当前日期未更新

> ID：13795223
> 
> 赞同：0
> 
> 时间：2012-12-10T04:57:49.387
> 
> 标签：mysql, triggers

我在插入触发器后遇到问题。当我在表中插入数据时，它应该自动更新日期，它应该是当前日期。但是当我执行以下查询时，它在我的表中无法正常工作。首先我创建了一个表：

```
DROP TABLE IF EXISTS `ignite`.`products`;
CREATE TABLE  `ignite`.`products`(
  `products_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `products_model` varchar(30) NOT NULL,
  `model_hash` bigint(20) unsigned NOT NULL,
  `Product_name` varchar(45) NOT NULL,
  `created` datetime NOT NULL,
  PRIMARY KEY (`products_id`)
) ENGINE=MyISAM AUTO_INCREMENT=977 DEFAULT CHARSET=latin1; 
```

然后我创建了这个触发器：

```
use ignite;
CREATE TRIGGER created_date BEFORE INSERT ON products
FOR EACH ROW
SET NEW.created = NOW(); 
```

但是当我在这个表中插入数据时：

```
use ignite;
INSERT INTO products
(products_id, products_model, model_hash, Product_name)
values
(123, "456645", 457567, "awetert"); 
```

这显示以下错误：

```
field 'created' does not have default value. error-1364 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:48:05.523

这是因为在您的`INSERT`声明中不包含这些`created`值。例如，您需要将其包含为零日期时间值：

```
INSERT INTO products
(products_id, products_model, model_hash, Product_name, created)
values
(123, "456645", 457567, "awetert", "0000-00-00 00:00:00"); 
```

# html - 3 列 html 模板 - 尽管两者都清晰且高度为 100%，但内容溢出

> ID：13795225
> 
> 赞同：0
> 
> 时间：2012-12-10T04:58:19.613
> 
> 标签：html, css

我在一个包装器中有 3 个 div：

```
<div id="wrapper">

<div id="leftbar">
Lorem ipsum dolar sit amet
</div><!--LEFTBAR-->

<div id="middle">
Lorem ipsum dolar sit amet
</div><!--middle-->

<div id="rightbar">
Lorem ipsum dolar sit amet
</div><!--RIGHTBAR-->

</div><!--wrapper--> 
```

“leftbar”和“middle”都向左浮动，而“rightbar”向右浮动。'wrapper' 已`height:100%; clear:both;`设置。

但是，如果“中间”中有大量文本或内容，则会溢出“包装器”div。我正在努力弄清楚为什么会发生这种情况。

我的 CSS 是：

```
#wrapper {
    width: 1000px;
    height: 100%;
    margin:auto;
    padding: 30px;
    margin-top: 40px;
    background-color:#FFF;
    color:#000;
    border: 2px solid #828fc4;
    clear:both;
}

#leftbar {
    float:left;
    width: 150px;
    min-height: 450px;
    padding: 5px;
}

#middle {
    float:left;
    height: 100%;
    width: 580px;
    padding-left: 20px;
    padding-right: 20px;
    border-right: 1px dotted #2B308C;
    border-left: 1px dotted #2B308C;
}

#rightbar {
    float:right;
    width: 200px;
    min-height: 450px;
    padding: 5px;
} 
```

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:08:04.507

添加和删`overflow:auto`​​除表单和`#textcontent``height:100%``#textcontent``#maincontent`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T05:37:53.130

这是带有一些小添加的 css 文件：

*   为您的栏的文本对齐
*   包装器中的宽度设置为 1000 像素，因此所有 px 在条形图中均等分布。

> ```
> #wrapper {
> width: 1000px;
> height: auto;
> margin:auto;
> padding: 30px;
> margin-top: 40px;
> background-color:#FFF;
> color:#000;
> border: 2px solid #828fc4;
> clear:both;
> overflow:auto;
> } 
> ```

```
#leftbar {
float:left;
width: 250px;
padding: 5px;
text-align:center;
}

#middle {
float:left;
width: 400px;
padding-left: 20px;
padding-right: 20px;
border-right: 1px dotted #2B308C;
border-left: 1px dotted #2B308C;
text-align: center;
}

#rightbar {
float:right;
width: 250px;
padding: 5px;
text-align:center;
} 
```

只是我的两分钱

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T05:01:40.777

当你编辑你的问题时，我才知道它是如何溢出的，这是因为你正在使用`height: 100%;`，所以你的 div 不会超过视口，所以使用`height: auto;`而不是像 Musa 告诉你的那样使用`overflow: auto;`for而不是......（检查带萤火虫）`#textcontent``clear: both;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T05:02:14.127

如果您只需要文本，请尝试使用 CSS3 列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T05:09:04.073

添加溢出属性并将高度更改为自动。

```
#wrapper {
    width: 1000px;
    height: auto;
    margin:auto;
    padding: 30px;
    margin-top: 40px;
    background-color:#FFF;
    color:#000;
    border: 2px solid #828fc4;
    clear:both;
    overflow:hidden;
}
#middle {
    float:left;
    width: 580px;
    padding-left: 20px;
    padding-right: 20px;
    border-right: 1px dotted #2B308C;
    border-left: 1px dotted #2B308C;
} 
```

# java - 使用动态形状获取鼠标检测

> ID：13795236
> 
> 赞同：1
> 
> 时间：2012-12-10T05:00:20.337
> 
> 标签：java, image, click, awt, java-2d

基本上我正在构建世界地图。我知道如何有一个方形的点击区域。但我想做到这一点，这样我就可以把这些国家放在一起，然后点击这个国家。现在很明显，我不能为此使用方形点击区域，因为我会有重叠的点击区域。我可以通过查看每个像素的透明度来做到这一点吗？即使这样我也不知道该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T06:49:31.727

使用[`Shape.contains(Point2D)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Shape.html#contains%28java.awt.geom.Point2D%29)- 像这样的东西：

![形状遏制](../Images/e4c4ebd75697645fc433b69e3c849be4.png)

此示例使用重叠椭圆来展示该`contains(..)`方法如何准确识别鼠标单击落在哪个椭圆内。但是您所指的那种地图可能由许多[`GeneralPath`](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/GeneralPath.html)不重叠的对象（每个国家一个）组成。

```
import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.BasicStroke;
import java.awt.RenderingHints;
import java.awt.event.*;
import java.awt.geom.*;
import java.awt.image.BufferedImage;
import javax.swing.*;
import java.io.File;
import java.util.*;
import javax.imageio.ImageIO;

public class ShapeContainment {

    List<Ellipse2D> shapes = new ArrayList<Ellipse2D>();
    int w = 400;
    int h = 100;
    BufferedImage img = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);
    Point2D mouse = new Point2D.Double(0, 0);
    JLabel l;

    ShapeContainment() {
        Random r = new Random();
        for (int ii = 0; ii < 10; ii++) {
            int x = r.nextInt(w / 2);
            int y = r.nextInt(h / 2);
            int wE = r.nextInt(w - x);
            int hE = r.nextInt(h - y);
            Ellipse2D ellipse = new Ellipse2D.Double(x, y, wE, hE);
            shapes.add(ellipse);
        }
        l = new JLabel(new ImageIcon(img));
        MouseAdapter listener = new MouseAdapter() {

            @Override
            public void mouseClicked(MouseEvent me) {
                mouse = me.getPoint();
                drawImage();
            }
        };
        l.addMouseListener(listener);
        drawImage();

        JOptionPane.showMessageDialog(null, l);
    }

    public void drawImage() {
        Graphics2D g = img.createGraphics();
        g.setColor(Color.WHITE);
        g.fillRect(0, 0, w, h);

        RenderingHints hints = new RenderingHints(
                RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
        g.setRenderingHints(hints);

        Color bg = new Color(0, 128, 0, 60);
        Color inside = new Color(0, 0, 255, 120);
        Color outside = new Color(255, 0, 0, 120);
        g.setStroke(new BasicStroke(4));
        for (Ellipse2D shape : shapes) {
            g.setColor(bg);
            g.fill(shape);
            if (shape.contains(mouse)) {
                g.setColor(inside);
            } else {
                g.setColor(outside);
            }
            g.draw(shape);
        }
        g.setColor(Color.RED);
        int x = (int) mouse.getX();
        int y = (int) mouse.getY();
        g.setStroke(new BasicStroke(2));
        int s = 3;
        g.drawLine(x-s, y, x+s, y);
        g.drawLine(x, y-s, x, y+s);
        l.setIcon(new ImageIcon(img));

        g.dispose();

        try {
            ImageIO.write(
                    img,
                    "png",
                    new File(System.currentTimeMillis() + ".png"));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        Runnable run = new Runnable() {

            @Override
            public void run() {
                new ShapeContainment();
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(run);
    }
} 
```

# shell - “导出”命令有什么作用？

> ID：13795237
> 
> 赞同：90
> 
> 时间：2012-12-10T05:00:27.220
> 
> 标签：shell, unix, command, environment-variables

为了完成任务，我碰巧盲目地运行了一些命令。

我最近开始使用[Jenkins](https://en.wikipedia.org/wiki/Jenkins_%28software%29)，然后我不得不使用这个`export`命令来运行[Jenkins WAR 存档](https://updates.jenkins-ci.org/download/war/)。该`export`命令一般做什么，为什么我们需要在运行 Jenkins 时运行这个命令（在设置 Jenkins 主页之后）？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-12-10T05:03:35.140

`export`在`sh`和相关的 shell（如 Bash）中，标记要*导出*到子进程的环境变量，以便子进程继承它们。

[`export`在 POSIX 中定义](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#export)：

> shell 应将导出属性赋予与指定名称对应的变量，这将使它们处于随后执行的命令的环境中。如果变量名后跟= word，则该变量的值应设置为word。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-07-16T19:19:34.393

我猜你来自 Windows 背景。所以我将对比它们（我对 Linux 也很陌生）。我发现一个用户对我的评论的回复，对弄清楚事情很有用。

在 Windows 中，变量可以是永久的，也可以不是。术语*环境变量*包括使用 SET 命令在*cmd* shell 中设置的变量，以及在 Windows GUI 中设置变量时，因此在注册表中设置，并在新的 cmd 窗口中可见。

例如， Windows 中[*set*](https://technet.microsoft.com/en-us/library/bb490998.aspx)[命令](https://technet.microsoft.com/en-us/library/bb490998.aspx)[的文档](https://technet.microsoft.com/en-us/library/bb490998.aspx)*“显示、设置或删除环境变量。不带参数使用时，set 显示当前环境设置。”*

 *在 Linux 中，*set*不显示环境变量。它显示了它不调用/引用为环境变量的 shell 变量。此外，Linux 不使用 set 来设置变量（除了位置参数和 shell 选项，我在最后解释为注释），只显示它们，即使这样也只显示 shell 变量。Windows 使用*set*进行设置和显示，例如`set a=5`，但 Linux 没有。

在 Linux 中，我猜你可以编写一个脚本，在启动时设置变量，例如，`/etc/profile`或`/etc/.bashrc`，但除此之外，它们不是永久性的。它们存储在 RAM 中。

在 Linux 中，shell 变量和环境变量是有区别的。在 Linux 中，shell 变量仅在当前 shell 中，*环境变量*在该 shell 和所有子 shell 中。

您可以使用命令查看 shell 变量`set`（但请注意，与 Windows 不同，在 Linux 中不使用*set*命令设置变量）。

`set -o posix; set`（先这样做`set -o posix`一次，有助于不显示太多不必要的东西）。因此`set`显示 shell 变量。

`env`您可以使用该命令查看环境变量。

Shell 变量设置为，例如，just `a = 5`。

*使用export*设置环境变量。导出还设置 shell 变量。

在这里，您看到 shell 变量*zzz*设置为`zzz = 5`，并看到它在运行时显示`set`，但它没有显示为环境变量。

在这里，我们看到`yyy`set with export，所以它是一个环境变量。并查看它在 shell 变量和环境变量下的显示：

```
$ zzz=5

$ set | grep zzz
zzz=5

$ env | grep zzz

$ export yyy=5

$ set | grep yyy
yyy=5

$ env | grep yyy
yyy=5

$ 
```

其他有用的 QnA：

*   *[https://unix.stackexchange.com/questions/176001/how-can-i-list-all-shell-variables](https://unix.stackexchange.com/questions/176001/how-can-i-list-all-shell-variables)*

*   *[https://askubuntu.com/questions/26318/environment-variable-vs-shell-variable-whats-the-difference](https://askubuntu.com/questions/26318/environment-variable-vs-shell-variable-whats-the-difference)*

注意：有一点详细说明并且对我所写的内容有所纠正，那就是，在 Linux bash 中，'set' 可用于设置“位置参数”和“shell 选项/属性”，从技术上讲这些是变量，尽管[手册页](https://en.wikipedia.org/wiki/Man_page)可能没有这样描述它们。

但是，如前所述，set 不会设置 shell 变量或环境变量）。如果你这样做，`set asdf`那么它会将 $1 设置为 asdf，如果你这样做，`echo $1`你会看到*asdf*。

如果你这样做`set a=5`，它不会将变量 a 设置为等于 5。它将位置参数 $1 设置为等于“a=5”的字符串。因此，如果您曾经在 Linux 中看到 set a=5，那可能是一个错误，除非有人真的想要字符串 a=5，在 $1 中。

*Linux 的set*可以设置的另一件事是 shell 选项/属性。如果你确实 set -o 你会看到它们的列表。例如`set -o verbose`，您可以执行关闭，以打开详细信息（顺便说一下，默认值恰好是关闭的，但这对此没有影响）。或者您可以`set +o verbose`关闭详细信息。Windows 的 set 命令没有这种用法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-16T09:51:41.140

简单来说，环境变量是在您打开一个新的 shell 会话时设置的。在任何时候，如果您更改任何变量值，shell 都无法选择该更改。这意味着您所做的更改在新的 shell 会话中生效。

`export`另一方面，该命令提供了更新当前 shell 会话有关您对导出变量所做更改的能力。您不必等到新的 shell 会话才能使用您更改的变量的值。*

# php - MySQL 错误 2006：执行 cron 作业时 MySQL 服务器已消失

> ID：13795239
> 
> 赞同：0
> 
> 时间：2012-12-10T05:00:56.190
> 
> 标签：php, mysql, mysql-error-2006

我知道当服务器重新启动或带宽问题时会发生此错误。但是我们有无限的带宽，服务器不会重新启动。我无法追踪为什么会出现此错误。

仅当我在服务器上运行 cron 作业时才会发生此错误。我每 10 分钟设置一次 cron 作业，以执行少量计算和更新表。

```
protocol_version : 10
version : 5.1.65-cll
version_comment : MySQL Community Server (GPL)
version_compile_machine : x86_64
version_compile_os : unknown-linux-gnu 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:25:52.910

I've run into a similar situation cron job that took a while to run (ran nightly, updating reporting tables). The fix was to increase the mysql.connect_timeout and default_socket_timeout in the my.conf file. Alternately, you could use ini_set to set these values at the script level if you cannot/do not want to change it server-wide.

Also see this SO post as it deals with exactly the same thing:

[https://stackoverflow.com/a/1644572/1867941](https://stackoverflow.com/a/1644572/1867941)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T05:34:07.200

为防止此类问题，您应该在运行每个查询之前创建一个持久连接并检查连接是否存在（并重新连接）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T04:36:19.733

实际问题是我执行的查询计数。每 10 分钟执行大约 50000 个查询，因此服务器正在关闭。我已经减少了限制和时间间隔，现在工作正常。

谢谢你的回答，对我也有很大帮助。

# c++ - itoa 替换为 std::to_string 如何

> ID：13795240
> 
> 赞同：1
> 
> 时间：2012-12-10T05:01:04.203
> 
> 标签：c++, tostring, itoa

我该如何替换这个

```
 itoa(i, buf, 10);
    key1.append(buf);
    key2.append(buf);
    key3.append(buf); 
```

和`std::to_string`

itoa 给了我一个错误，它没有在范围内声明它不是标准的一部分

我听说我可以`std::to_string`用来制作它的另一个版本，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T07:29:21.503

如果你使用 C++11，你可以使用`std::to_string`

```
#include <string>
std::string buf = std::to_string(i);
key1.append(buf);
key2.append(buf);
key3.append(buf); 
```

或者你可以使用`std:stringstream`

```
#include <sstream>
std::stringstream ss;
ss << i;
key1.append(ss.str());
key2.append(ss.str());
key3.append(ss.str()); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T06:56:20.367

要使用 itoa() 函数，您需要包含 stdlib.h 文件，然后在使用 itoa() 时您不会看到错误。

# java - 在预览模式下使用的设计模式？

> ID：13795245
> 
> 赞同：8
> 
> 时间：2012-12-10T05:01:20.263
> 
> 标签：java, design-patterns, jakarta-ee

我必须提供一个功能，人们应该能够在将其永久化之前预览对其个人资料的更改。这包括布局、文字、好友、好友、照片等。用户可以进入“预览模式”并在直播之前查看不同的配置。

我的问题是哪个可能是最好的设计模式？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T12:38:31.757

我想这是[Memento 模式的工作](http://en.wikipedia.org/wiki/Memento_pattern)

在这里，你可以找到一些清晰的解释：http: [//sourcemaking.com/design_patterns/memento](http://sourcemaking.com/design_patterns/memento)

# mysql - MySql 查询返回每个相册中的照片数量

> ID：13795246
> 
> 赞同：0
> 
> 时间：2012-12-10T05:01:36.720
> 
> 标签：mysql, sql, foreign-keys, primary-key

我的表是这样设置的，我需要做的就是调用我的照片表的查询。

我将 PhotoID 作为主键，GalleryID 作为 Gallery 的外键。如何计算每个多个 GalleryID 的唯一 PhotoID 的数量。

可以这么说，因为画廊中有很多照片，所以可能会有重复的 GalleryID。所以我只需要知道与该 GalleryID 关联的唯一 PhotoID 的数量。

可以在一个查询中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:14:09.457

使用以下 sql

```
select count(photoid) as noOfPhotos from photos group by galleryid; 
```

使用 galleryid 上的 where 获取特定画廊的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:13:10.167

通常的方法是像这样使用 JOIN 和 GROUP BY 子句：

```
SELECT `Gallery`.`GalleryID`, COUNT(`Photos`.`PhotoID`) AS `NumOfPhotos` FROM `Gallery`
LEFT JOIN `Photos` ON `Gallery`.`GalleryID` = `Photos`.`GalleryID`
GROUP BY `Gallery`.`GalleryID`; 
```

这将计算按图库 ID 分组的 Photos.PhotoID 条目的数量。

在这种情况下，您可以在不使用 JOIN 的情况下进行查询，只需查询 Photos 表，但如果您想要的不仅仅是图库表中的 GalleryID，则需要连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T05:40:04.973

用这个：

```
SELECT GalleryID, count(PhotoID)
FROM Photos
GROUP BY GalleryID; 
```

# java - 联系人和自动完成

> ID：13795250
> 
> 赞同：0
> 
> 时间：2012-12-10T05:02:04.393
> 
> 标签：java, android

第一篇文章。我是 android 和一般编程的新手。我想要的是弹出一个自动完成文本框，其中包含联系人列表中的自动完成名称。IE，如果他们输入“john”，它将显示“John Smith”或他们联系人中的任何 john。代码是基本的，我从一些教程中提取了它。

```
private void autoCompleteBox() {

        ContentResolver cr = getContentResolver();

        Uri contacts = Uri.parse("content://contacts/people");

        Cursor managedCursor1 = cr.query(contacts, null, null, null, null);

        if (managedCursor1.moveToFirst()) {

            String contactname;
            String cphoneNumber;

            int nameColumn = managedCursor1.getColumnIndex("name");
            int phoneColumn = managedCursor1.getColumnIndex("number");

            Log.d("int Name", Integer.toString(nameColumn));
            Log.d("int Number", Integer.toString(phoneColumn));

            do {
                // Get the field values
                contactname = managedCursor1.getString(nameColumn);
                cphoneNumber = managedCursor1.getString(phoneColumn);
                if ((contactname != " " || contactname != null)
                        && (cphoneNumber != " " || cphoneNumber != null)) {

                    c_Name.add(contactname);
                    c_Number.add(cphoneNumber);

                    Toast.makeText(this, contactname, Toast.LENGTH_SHORT)
                    .show();
                }

            } while (managedCursor1.moveToNext());

        }

        name_Val = (String[]) c_Name.toArray(new String[c_Name.size()]);
        phone_Val = (String[]) c_Number.toArray(new String[c_Name.size()]);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_dropdown_item_1line, name_Val);

        personName.setAdapter(adapter);

    } 
```

personName 是我的自动完成文本框。因此，当我在模拟器（4.2）中使用它并通过人员应用程序手动输入联系人时，它实际上可以工作，但是当我在我的设备上使用它时，它不会弹出任何名称。我确信这很荒谬，但我试图找到答案，但我一无所获。不问就学不会。

这是日志

12-11 18:35:09.229: I/ActivityManager(578): 显示 12-11 18:35:11.031: I/ActivityManager(578): 开始 u0 {cmp=com.fthatnoise.borrow.me/.AddItem} 从PID 4153

12-11 18:35:11.161: D/dalvikvm(4153): GC_CONCURRENT freed <1K, 2% free 9648K/9784K, paused 5ms+2ms, total 22ms 12-11 18:35:11.181: D/dalvikvm(4153) ：GC_FOR_ALLOC 已释放 <1K，2% 可用 9648K/9784K，暂停 21ms，总共 21ms 12-11 18:35:11.181：I/dalvikvm-heap(4153)：将堆（碎片情况）增加到 10.359MB，分配 960016 字节12-11 18:35:11.201：D/dalvikvm(4153)：GC_FOR_ALLOC 释放 0K，2% 释放 10585K/10724K，暂停 18ms，总共 18ms 12-11 18:35:11.221：D/dalvikvm(4153)：GC_CONCURRENT 释放<1K，1%免费10637K/10744K，暂停3ms+1ms，共15ms

12-11 18:35:11.551: I/ActivityManager(578): 显示 com.fthatnoise.borrow.me/.AddItem: +514ms 12-11 18:35:11.571: D/overlay(162): FROM_STATE = OV_BYPASS_3_LAYER TO_STATE = OV_CLOSED 12-11 18:35:11.911: D/overlay(162): FROM_STATE = OV_CLOSED TO_STATE = OV_BYPASS_3_LAYER 12-11 18:35:13.073: D/overlay(162): FROM_STATE = OV_BYPASS_3_LAYER TO_STATE = OV_CLOSED

# jquery - 使用时调用函数使用 jQuery Mobile 标记

> ID：13795252
> 
> 赞同：0
> 
> 时间：2012-12-10T05:02:13.453
> 
> 标签：jquery, jquery-mobile

我已经问过[类似](https://stackoverflow.com/questions/13794480/using-jquery-mobile-button-to-run-javascript)的问题**标签，但我发现该解决方案无法使用**标签。所以，如果我使用的是引用 jQuery Mobile 的脚本，我有以下行：****

 ****```
<button id="buttonAnswer1" data-inline="true">Click me</button> 
```

当单击此按钮并调用 hello() 函数时，我将如何添加一个侦听器？IE

```
<button id="buttonAnswer1" data-inline="true">Click me</button>

<script>
function hello(){
  console.log("hello world");
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:26:31.317

Are you wanting to select all `<button>` with data-line set to `true`?

if so, try this: [http://jsfiddle.net/M9pwp/2/](http://jsfiddle.net/M9pwp/2/)

html:

```
<button id="buttonAnswer1" data-inline="true">Click me</button> 
```

script:

```
$("button").click(function() {
   if ($(this).attr('data-inline') == 'true')
      hello();
});

function hello()
{
     alert('hi');   
} 
```

if you only want a listener for this particular button, then you can change the script to:

```
$("#buttonAnswer1").click(function() {
    hello();
});

function hello()
{
    alert('hi');   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T05:16:17.760

您能否参考以下代码。

```
$("button#buttonAnswer1").on("click",hello); 
```

请在 jsfiddle 中尝试上面的代码，让我知道您的疑虑。

[http://jsfiddle.net/](http://jsfiddle.net/)****

# iphone - 如何为多个产品实施 Inapp Purchase？

> ID：13795255
> 
> 赞同：1
> 
> 时间：2012-12-10T05:02:42.977
> 
> 标签：iphone, objective-c, ios5, in-app-purchase

我想在我的应用中为多个产品实施 Inapp 购买。

我需要在 iTunes 上注册所有产品吗？多个产品和单个产品的代码过程是否相同？

我不知道 Inapp 中恢复按钮的要求是什么。

如果有人有多个产品 inApp 的教程或代码，请提供。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:04:46.623

你需要阅读这个。您将获得所有答案[InApp 购买](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T05:05:15.977

您需要在 iTunes 商店中注册您的所有产品才能购买多个 InApp。

**Inapp 中的恢复按钮有什么要求？**

如果用户不小心从他们的设备中删除了该应用程序。如果他/她再次下载或安装该应用程序。他们不会得到以前购买的物品，然后他/她应该再次购买它们以使用它。在这种情况下，您需要提供一个选项来恢复已购买的项目。

这是一个很好的[教程](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

# git - Git新手。在 git commit 上犯了一个大错误，最终导致了一个较旧的提交

> ID：13795256
> 
> 赞同：1
> 
> 时间：2012-12-10T05:02:46.613
> 
> 标签：git

我是 Git 新手，我犯了一个巨大的错误。Git一直提示我

`git - rejected master -> master (non-fast-forward)`.

但是，我仍然承诺使用：

`--force`

这是灾难性的，整个项目又回到了大约一周前的阶段。我失去了很多改变。我似乎被推回了之前的提交。无论如何我可以回到我的新提交之一吗？因为我已经进行了大量的更改并且需要将它们恢复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T05:17:58.560

使用`git reflog`命令。reflog 命令将为您提供有关分支头部发生的事情的良好历史记录。运行它，然后找到引用您想要返回的状态的行。

找到提交后，重置您的分支以指向特定的提交。

```
git reset --hard <commit_id> 
```

这些`--hard`选项将当前分支的 HEAD 设置回您指定的提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:34:32.543

从您的问题看来，您做了一个`git push --force`. 这真是太糟了。我不确定这是否可行，但值得一试。按照建议的顺序进行，只有当一个建议不起作用时才跳到下一个：

*   尝试`master`使用`git revert {commit_hash}`. 如果您觉得您的更改已恢复，请再执行一次`git commit`and `git push`。
*   如果上述方法不起作用并且这是您所做的最后一次提交，您可以尝试使用`git checkout HEAD~1`. 这将使 HEAD 返回一个提交。了解需要返回多少次提交的最简单方法是使用`git reflog`并查看哪个提交是最后一个稳定的提交。如果这个状态是你认为正确的，那么做 a`git commit`和`git push`。

请不要忽略 git 警告。根据我的经验，git 只会警告你绝对必要的东西。

# asp.net - 用于基于 MAP 的应用程序的 asp.net 控件

> ID：13795258
> 
> 赞同：-2
> 
> 时间：2012-12-10T05:02:59.103
> 
> 标签：asp.net

我是 stackoverflow 的新手，我正在创建一个类似于谷歌地图的 .net 网络地图应用程序。但我的第一个要求是创建自己的地图。请推荐用于创建 shapefile、索引文件和 dbfile 的工具。

第二个要求是我需要知道 asp.net 中的控件才能实现它。

我有我的地图的 jpg 图像，我可以使用该图像作为我的地图还是需要为此创建形状文件。我想在我的应用程序中包含谷歌地图中显示的所有功能。

注意 .net 3.5 框架是我必须实现此应用程序的地方。而且我不能使用任何现有的地图，如 bing、谷歌地图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:24:56.677

查看 ESRI 的 ArcInfo 和 Spacial Analyst 工具。我们曾经生成自己的地图，但相当耗时（但这是大约 10 多年前的事了）。这些天他们可能做得更快了。听起来您可能对 arcview（shapefile、db、indx）有所了解，但这不会满足您的需要。

# javascript - 将球面上沿曲面的点投影到 2D 中

> ID：13795259
> 
> 赞同：0
> 
> 时间：2012-12-10T05:03:01.450
> 
> 标签：javascript, math, 3d

我有许多用 HTML/CSS/JavaScript 呈现的对象。这些物体都位于一个半径为 R 的不可见球体的表面上。

此外，与用户的交互允许这个不可见的球体任意旋转。

显而易见的解决方案是分配给对象的球坐标（Theta、Phi 和固定半径），它是转换为笛卡尔 3D 坐标的，然后我可以只降低深度 (Z)，或者应用一些花哨的看法。我以后会担心透视...

由于我正在处理图形，X/Y 分别是水平/垂直，Z 是深度，+ve 伸出屏幕，-ve 位于显示器内部。

我有一个名为 的 JavaScript 对象数组`objects[]`，每个对象都有一个 Theta 和 Phi。我假设 Theta 是围绕 Y 轴旋转，而 Phi 是围绕 X 轴旋转，因此在 Phi = 0 和 Theta = 0 时，我们处于 (X,Y,Z) = (0,0,R);

由于我正在旋转不可见的球体，因此我不想更改每个单独对象的 Theta 和 Phi，这也只会增加数值的不稳定性。相反，我存储了与球体本身的旋转相关的全局 Theta 和 Phi。

因此，点的“有效” Theta 和 Phi 是点的 Theta 和 Phi 加上全局 Theta 和 Phi。

根据 Wikipedia、WolframAlpha、MathWorld 和许多其他资源，我们可以通过以下方式从球坐标中找到笛卡尔坐标：

```
z = r * sin(phi) * cos(theta);
y = r * sin(phi) * sin(theta);
x = r * cos(phi); 
```

（当我向后使用它们时，我已经从维基百科交换了 Theta 和 Phi，而且我的 X/Y/Z 坐标也不同）。

我不知道为什么，但是当我渲染这些对象时，它们看起来根本不正确。如果您想象一个球体赤道上的一个点，Theta = Pi/4，并且您围绕 Y 轴旋转球体，则该点仅在投影到 2D 上且不使用透视变换时才应上下移动。然而，这根本不是发生的事情。这些点从屏幕的右侧移动到左侧。整个事情看起来都错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:21:06.053

Order matters. When you use your equations

```
z = r * sin(phi) * cos(theta);
y = r * sin(phi) * sin(theta);
x = r * cos(phi); 
```

then you can interpret them as a rotation *first* by `phi` about *y* and *second* by `theta` about *x* (for appropriate choices of angle measurement directions):

```
(x1, y1, z1) = (r, 0, 0)
(x2, y2, z2) = (x1 * cos(phi) - z1 * sin(phi),
                y1,
                x1 * sin(phi) + z1 * cos(phi))
             = (r * cos(phi), 0, r * sin(phi))
(x3, y3, z3) = (x2,
                y2 * cos(-theta) - z2 * sin(-theta),
                y2 * sin(-theta) + z2 * cos(-theta))
             = (r * cos(phi),
                r * sin(phi) * sin(theta),
                r * sin(phi) * cos(theta)) 
```

When you simply add those angles, you end up with a wrong order: rotating first by `phi1`then by `theta1` then by `phi2` and then by `theta2` about the different axes is not the same as rotating by `phi1 + phi2` first and `theta1 + theta2` afterwards. You're changing the order between `theta1` and `phi2`, which breaks your 3D position.

Better use [rotation matrices](http://en.wikipedia.org/wiki/Rotation_matrix#In_three_dimensions), [quaternions](http://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation), a library (like [three.js](/questions/tagged/three.js "show questions tagged 'three.js'")) which encapsulates this for you, or make sure you properly combine [euler angles](http://en.wikipedia.org/wiki/Euler_angles).

# xaml - 如何在您的 Metro 应用程序中从右侧滑动自定义侧边栏？

> ID：13795260
> 
> 赞同：2
> 
> 时间：2012-12-10T05:03:11.620
> 
> 标签：xaml, windows-8, microsoft-metro, winrt-xaml

我正在开发一个地铁应用程序，当用户单击屏幕上的某些内容时，我希望有一个自定义的条形幻灯片。

这就是我所说的：-

```
 --------------
|          |   |
|          |   |  <----
|          |   |
 ---------------
main screen  side
              bar 
```

在这个侧边栏中，我想要一些简单的控件，如图像和文本块等。

1）我该怎么做，任何帮助将不胜感激

2）它不违反地铁原则吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T05:19:52.277

您可以尝试利用诸如设置弹出按钮之类的弹出按钮。你可能想看看[Callisto](http://timheuer.com/blog/archive/2012/05/31/introducing-callisto-a-xaml-toolkit-for-metro-apps.aspx)。

否则，您可以包含一个高于所有其他元素的 Xaml 元素，并切换它的可见性以及屏幕上的定位。如何定位取决于您使用的根元素。要在画布中定位元素，请添加`Canvas.Right="0"`到子元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:23:37.937

you can use following helper

[WinRT Flyout Helper](http://codepaste.net/erev2v)

```
public class FlyoutHelper
{
    protected Popup m_Popup = new Popup();
    public Popup Show(Popup popup, FrameworkElement button, double offset = 35d)
    {
        if (popup == null)
            throw new Exception("Popup is not defined");
        m_Popup = popup;
        if (button == null)
            throw new Exception("Button is not defined");
        if (double.IsNaN(offset))
            throw new Exception("Offset is not defined");
        var _Child = popup.Child as FrameworkElement;
        if (_Child == null)
            throw new Exception("Popup.Child is not defined");
        if (double.IsNaN(_Child.Height))
            throw new Exception("Popup.Child.Height is not defined");
        if (double.IsNaN(_Child.Width))
            throw new Exception("Popup.Child.Width is not defined");

        // get position of the button
        var _Page = Window.Current.Content as Page;
        var _Visual = button.TransformToVisual(_Page);
        var _Point = _Visual.TransformPoint(new Point(0, 0));
        var _Button = new
        {
            Top = _Point.Y,
            Left = _Point.X,
            Width = button.ActualWidth,
            Height = button.ActualHeight,
        };

        // determine location
        var _TargetTop = (_Button.Top + (_Button.Height / 2)) - 
                         _Child.Height - offset;
        var _TargetLeft = (_Button.Left + (_Button.Width / 2)) - 
                          (_Child.Width / 2);

        if ((_TargetLeft + _Child.Width) > Window.Current.Bounds.Width)
            _TargetLeft = Window.Current.Bounds.Width - _Child.Width - offset;
        if (_TargetLeft < 0)
            _TargetLeft = offset;

        // setup popup
        popup.VerticalOffset = _TargetTop;
        popup.HorizontalOffset = _TargetLeft;

        // add pretty animation(s)
        popup.ChildTransitions = new TransitionCollection 
        { 
            new EntranceThemeTransition 
            { 
                FromHorizontalOffset = 0, 
                FromVerticalOffset = 20 
            }
        };

        // setup
        m_Popup.IsLightDismissEnabled = true;
        m_Popup.IsOpen = true;

        // handle when it closes
        m_Popup.Closed -= popup_Closed;
        m_Popup.Closed += popup_Closed;

        // handle making it close
        Window.Current.Activated -= Current_Activated;
        Window.Current.Activated += Current_Activated;

        // return
        return m_Popup;
    }

    protected void Current_Activated(object sender, WindowActivatedEventArgs e)
    {
        if (m_Popup == null)
            return;
        if (e.WindowActivationState == CoreWindowActivationState.Deactivated)
            m_Popup.IsOpen = false;
    }

    protected void popup_Closed(object sender, object e)
    {
        Window.Current.Activated -= Current_Activated;
        if (m_Popup == null)
            return;
        m_Popup.IsOpen = false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T05:18:47.063

您可以使用**PopUp**。

看看这个例子，

[http://code.msdn.microsoft.com/windowsapps/App-settings-sample-1f762f49](http://code.msdn.microsoft.com/windowsapps/App-settings-sample-1f762f49)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T12:33:22.517

为此，您可以使用 CharmFlyout。
这是示例代码
[http://code.msdn.microsoft.com/windowsapps/CharmFlyout-A-Metro-Flyout-25fe53b6](http://code.msdn.microsoft.com/windowsapps/CharmFlyout-A-Metro-Flyout-25fe53b6)

# json - JSON 输出到浏览器 -> 提供订单

> ID：13795261
> 
> 赞同：0
> 
> 时间：2012-12-10T05:03:22.393
> 
> 标签：json, api

所以我读到你在请求 json 时不能期望默认顺序。我已经看到这个调用我构建的一个小 api 的实际操作，每次我进行不同的调用时，它都会返回一个混乱的、随机的元素顺序。

像ticketfly的api这样的网站（在这里调用它[http://www.ticketfly.com/api/events/upcoming.json?venueId=57](http://www.ticketfly.com/api/events/upcoming.json?venueId=57)）如何始终确保返回的json是特定的顺序？

事件 id 总是第一个，等等。

感谢您对情况有所了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:24:30.990

If you are in control of the endpoint API then you can hardcode the order in which you render the properties. Though I have to ask why exactly do you need the JSON properties in a particular order? You will finally be accessing the properties via there property names so the order in which they appear in the JSON should not ideally matter.

**EDIT :** Since your bosses insist on this (what can one say now?):

You can try and see if any of the following suits your needs:

1.  Try hardcoding the *display order* in the view's representation. This means you will need to echo/print each property name explicitly in the view script. In PHP it could be something like `echo $variable_representing_json["id"];` and so forth. Note that with this approach you needn't change the original JSON representation.
2.  If you want the original JSON representation to be changed then depending on how you are doing the process it varies in difficulty:
    *   If it's string concatenation that you are using to represent the json then hard-code the order in which the json properties get concatenated in the string.
    *   In some languages the display order of properties is actually a representation of the order in which the properties were defined. In simple words if `$var` is an empty json representation then you should define `$var["id"] = {some_val}` first to display it first.
    *   If you are using a framework for processing the JSON data it may have its own quirks irrespective of how you define your representation. In such cases you will have to try and see if you can work around the issue or if it gives any helper methods.

# python - Tkinter 的奇怪函数行为

> ID：13795265
> 
> 赞同：2
> 
> 时间：2012-12-10T05:03:40.520
> 
> 标签：python, tkinter

我们在事件回调中有一些代码，如下所示：

```
...
self.position.side = -self.position.side
self.update_with_board() # displays self.position graphically
ai_move = self.brain.get_move(self.position)
... 
```

update() 被立即调用，但直到该`ai_move`行才影响 GUI。

但是，当我这样做时：

```
...
self.position.side = -self.position.side
self.update_with_board() # displays self.position graphically
raw_input()
ai_move = self.brain.get_move(self.position)
... 
```

当它要求输入时，它会立即以图形方式更新。我不知道该怎么做：也许是时髦的懒惰评估或我不知道的 tkinter 调度事情？如何让 GUI 以指定的顺序而不是延迟更新？

编辑：对不起，我没有使用内置`update()`方法，而是我定义的一种绘制方法。我重命名它`update_with_board()`，并看到相同的行为。

```
def update_with_board(self):
    for i in range(8):
        for j in range(8):
            color = "gray" if (i+j) % 2 else "white"
            self.canvas.create_rectangle(self.square * i, self.square * j, self.square * (i+1), self.square * (j+1), fill=color)
            if self.position.board[8 * j + i] in self.ims.keys():
                self.canvas.create_image(self.square * i + self.square/2,
                self.square * j + self.square/2, image = self.ims[self.position.board[8 * j + i]]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T05:39:00.997

做更多的研究，我很确定我的评论是正确的。

UI 每次通过事件循环都会根据需要更新所有小部件。调用`update`基本上只是强制它现在运行事件循环。所以，如果你在一个事件回调的中间，你就递归地进入了事件循环，这是一件非常糟糕的事情，并且可能导致无限递归。

正如[The TkInter Book](http://effbot.org/tkinterbook/widget.htm#Tkinter.Widget.update-method)所说，`update`：

> 处理所有挂起的事件，调用事件回调，完成任何挂起的几何管理，根据需要重绘小部件，并调用所有挂起的空闲任务。这个方法应该小心使用，因为如果从错误的地方调用它可能会导致非常糟糕的竞争条件（例如，从事件回调中，或者从可以以任何方式从事件回调中调用的函数等） .)。如有疑问，请改用 update_idletasks。

同样，[TkInter 参考](http://infohost.nmt.edu/tcc/help/pubs/tkinter/universal.html)说：

> 此方法强制更新显示。仅当您知道自己在做什么时才应使用它，因为它可能导致不可预测的行为或循环。永远不应从事件回调或从事件回调调用的函数中调用它。

`update`测试一下，至少在某些情况下，当您从事件循环内部调用时，TkInter 似乎只是忽略了您。大概是为了保护您免受无限递归，但我还没有查看代码来验证这一点。

无论如何，这不是你想要的功能，所以它为什么没有做它没有做的事情并不重要。

如果您需要从事件回调中触发更新，请调用`update_idletasks`. 这实际上调用了所有挂起的“空闲”任务，包括重绘，而不调用任何事件回调。（不是“下次我们在事件循环中并且无事可做时更新”。）

同时，`raw_input`在事件回调中调用更糟糕。您正在阻止终端输入上的主事件循环。除非这只是出于调试目的而做的事情，否则这是一个非常糟糕的主意。即使出于调试目的，测试也是一件非常奇怪的事情，而且完全有可能发生的任何事情都与正常行为无关。

有关更多背景信息，请参阅问题[TkInter: How do widgets update](https://stackoverflow.com/questions/5781286/tkinter-how-do-widgets-update)，或`update_idletasks`在此站点上搜索，或查看右侧的一些相关链接（至少其中两个是相关的）。

根据你的编辑，事实证明，听起来你有一种*相反*的问题——你只是在没有告诉 TkInter 做任何事情的情况下改变了一些东西，所以这些改变要等到下一次活动时才会出现循环（这意味着直到你从这个函数返回之后）。但答案基本上是一样的——一种方式是“将您的呼叫替换为`update`” `update_idletasks`，另一种方式是“添加呼叫`update_idletasks`”。

# javascript - 如何从 javascript 中的字符串中获取子字符串？

> ID：13795278
> 
> 赞同：0
> 
> 时间：2012-12-10T05:05:12.683
> 
> 标签：javascript, indexing, substring

我有一个看起来像这样的字符串：

```
var stringOriginal = "72157632110713449SomeDynamicText"; 
```

我想将此字符串分成两个子字符串：

*   一个子字符串是前 17 位数字
*   一个子字符串是字符串的其余部分

我希望这些存储在两个单独的变量中，如下所示：

```
var string1 = "72157632110713449"; //First static 17 digits
var string2 = "SomeDynamicText";   // Dynamic Text 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:16:38.710

假设您的字符串是固定的，您可以使用[`substring`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring)or[`substr`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr)字符串函数。两者非常相似：

*   `substr(start, length)`从`start`索引中获取一个值到指定的`length`（或到末尾，如果未指定）
*   `substring(start, end)`从`start`索引到`end`索引（或结尾，如果未指定）获取一个值

因此，您可以通过混合和匹配两者来做到这一点的一种方法是：

```
var string1 = stringOriginal.substring(0, 17);
# interestingly enough, this does the same in this case
var string1 = stringOriginal.substr(0, 17);

var string2 = stringOriginal.substr(17); 
```

但是，如果您需要更复杂的解决方案（例如，不是固定长度的数字），您可以尝试使用正则表达式：

```
var regex   = /(\d+)(\w+)/;
var match   = regex.exec(stringOriginal);
var string1 = match[1]; // Obtains match from first capture group
var string2 = match[2]; // Obtains match from second capture group 
```

当然，这增加了复杂性，但更加灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T05:08:49.813

干得好：

```
string1 = stringOriginal.substring(0, 17);
string2 = stringOriginal.substring(17, stringOriginal.length); 
```

或者

```
string2 = stringOriginal.substring(17); 
//Second parameter is optional. The index where to stop the extraction. 
//If second parameter is omitted, it extracts the rest of the string 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T05:09:31.467

鉴于前 17 个字符始终进入 string1，其余字符进入 string2，这会将字符串拆分为 var。

```
var string1 = stringOriginal.substring(0,17);
var string2 = stringOriginal.substring(17,stringOriginal.length); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T06:11:20.747

假设您想通过将初始数字与其余数字分开来拆分字符串，而不考虑长度：

```
 string = string.match (/^(\d+)(.*)/) || [string, '', '']; 
```

`string[1]`将保存初始数字，`string[2]`字符串的其余部分，原始字符串将在`string[0]`.

如果`string`不以数字开头，`string[0]`则将保存原始字符串，`string[1]`并且`string[2]`将是空字符串。

通过将代码更改为：

```
 string = string.match (/^(\d*)(.*)/); 
```

不包含初始数字的字符串将为`string[1]`空，并且`string[2]`具有与 相同的值`string[0]`，即初始字符串。在这种情况下，无需处理匹配失败的情况。

# python - 如何在 Python 中删除字符串中的最后一个单词？

> ID：13795280
> 
> 赞同：0
> 
> 时间：2012-12-10T05:05:42.827
> 
> 标签：python, string

例如，如果我有这样的字符串：

```
a = "username@102.1.1.2:/home/hello/there" 
```

如何删除最后一个单词之后的最后一个单词`/`。结果应该是这样的：

```
username@102.1.1.2:/home/hello/ 

OR 

username@102.1.1.2:/home/hello 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T05:14:59.550

试试这个：

```
In [6]: a = "username@102.1.1.2:/home/hello/there"

In [7]: a.rpartition('/')[0]
Out[7]: 'username@102.1.1.2:/home/hello' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T05:10:01.187

```
>>> "username@102.1.1.2:/home/hello/there".rsplit('/', 1)
['username@102.1.1.2:/home/hello', 'there']
>>> "username@102.1.1.2:/home/hello/there".rsplit('/', 1)[0]
'username@102.1.1.2:/home/hello' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T05:08:33.293

你可以试试这个

```
a = "username@102.1.1.2:/home/hello/there"
print '/'.join(a.split('/')[:-1]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T05:08:42.363

这可能不是最 Pythonic 的方式，但我相信以下方法会起作用。

```
tokens=a.split('/')
'/'.join(tokens[:-1]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T18:54:43.940

您是否考虑过[os.path.dirname](http://docs.python.org/2/library/os.path.html#os.path.dirname)？

```
>>> a = "username@102.1.1.2:/home/hello/there"
>>> import os
>>> os.path.dirname(a)
'username@102.1.1.2:/home/hello' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-12T16:48:23.960

a = "用户名@102.1.1.2:/home/hello/there" a.rsplit('/', 1)[0]

结果 -`username@102.1.1.2:/home/hello/`

# html - 如何硬编码文件名以将它们发送到服务器？

> ID：13795281
> 
> 赞同：0
> 
> 时间：2012-12-10T05:05:46.217
> 
> 标签：html, file, node.js, file-upload

我想使用 NODEJS 将一些文件（图像）发送到服务器。但我不想使用常规输入文件标签来附加文件。那么，如何对文件路径进行硬编码以将它们从 HTML 客户端发送到服务器？有什么解决办法吗？提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:21:03.197

文件输入字段不能自动填充——用户必须自己选择一个文件上传。

# java - LinkedList 到矩阵（我猜）java

> ID：13795282
> 
> 赞同：1
> 
> 时间：2012-12-10T05:06:14.050
> 
> 标签：java, int

```
int test = recDada.getKey();
LinkedList<Integer> stack = new LinkedList<Integer>();
while(test > 0) {

    stack.push(test % 10);
    test = test/10;             
}
for (int i = 0; i < stack.size(); i++) {
    while(stack.size() < 5) stack.addFirst(0);
    System.out.println(stack.get(i));

        } 
```

事情是这样的，我有这段代码，它包含一个 int 获取我的地图键，它有很多像'73'，'180'这样的数字......我需要将这些数字转换成这样的东西

我需要的输出：

```
0 0
0 0
0 1
7 8
3 0 
```

我得到的输出：

```
0 
0 
0
7
3
0 
0 
1
8
0 
```

你们能给我一个提示吗？无论如何，谢谢，对不起我的英语：\

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:37:03.437

你不能只使用一个链表

```
LinkedList<Integer> stacks[] = new LinkedList<Integer>[recDataSize]; 
```

如何输入数据

```
for(int i=0;i<recDataSize;i++){
          int test = recDada.getKey();
          stacks[i] = new LinkedList<Integer>();
         while(test > 0) {
               stacks[i].push(test % 10);
               test = test/10;             
         } 
} 
```

因此`stack[0]`会`7,3`。`stack[1]`将会`1,8,0`

打印功能

```
//Add 0s to each stack
for (int i = 0; i <stacks.length; i++) {
     while(stacks[i].size() < 5) stacks[i].addFirst(0);
}

//Assuming all stacks are length 5 as they have been set in loop i
for (int j = 0; j < 5; j++) {
   for (int i = 0; i <stacks.length; i++) {
           System.out.print(stacks[i].get(j)+" ");
    }
   System.out.println();
} 
```

每个堆栈都需要输入。

另一种选择是使用像 -1 这样的未使用字符来分隔一个长链表中的数字。然后将该链表映射到二维数组并打印：

现在对于那个链表

```
LinkedList<integer> stack=new LinkedList<Integer>(); 
```

如何输入：

```
for(int i=0;i<recDataSize;i++){
      int test = recData.getKey();
      stacks[i] = new LinkedList<Integer>();
      while(test > 0) {
           stacks[i].push(test % 10);
           test = test/10;             
     } 
     while(stacks[i].size() < 5) stacks[i].addFirst(0);
     //Add 0 in the input now not in printing function
 } 
```

因此堆栈将是`0 0 0 7 3 0 0 1 8 0`

映射功能

```
int map[][]=new int[recDataSize][5]; //This is the 2d array

for (int i = 0; i <recDataSize; i++) {
   for (int j = 0; j < 5; j++)  map[i][j]=stack.get((i*5)+j);
} 
```

矩阵将为 0 0 0 0 0 1 7 8 3 0

现在只需打印 (i,j)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T05:11:47.703

你可以改变

```
 System.out.println(stack.get(i)); 
```

到

```
 System.out.print(stack.get(i));

 if (i % 2 == 0) 
     System.out.print(" "); 
 else
     System.out.println(); 
```

# javascript - 滚动时固定标题

> ID：13795283
> 
> 赞同：1
> 
> 时间：2012-12-10T05:06:24.387
> 
> 标签：javascript, jquery, html, css

我在页面中间有一个表格的标题，但由于页面很大，我想在向下滚动页面时将标题固定到浏览器的顶部......

所以我的问题是：如何将标题设置为正常，直到用户向下滚动并且标题的顶部边框接触浏览器边框，无论用户向下滚动多少，它都应该保持固定在该位置上？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T05:51:42.563

让我解释一下如何做到这一点。

## 脚步

1.  找到你的表头，并保存它`position`
2.  为窗口的`scroll`事件添加一个侦听器。
3.  检查窗口滚动到您的表头位置
    1.  如果位置 < 窗口滚动 - 添加一个类来修复表头
    2.  否则，将 css 重置为像普通标题一样。

我发布了一个小提琴，[你可以在这里找到](http://jsfiddle.net/jbY6X/1/)。

## 代码示例

## HTML

```
<div class='lots_of_stuff_in_here'> ... </div>
<table>
    <thead id='my_fixable_table_header'>
        <tr>
            <th>My awsesome header number 1</th>
            <th>My awsesome header number 2</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Content</td>
            <td>Content</td>
        </tr>
        // much more content
    </tbody>
</table> 
```

## Javascript

```
// Just so you get the idea behind the code

var myHeader = $('#my_fixable_table_header');
myHeader.data( 'position', myHeader.position() );
$(window).scroll(function(){
    var hPos = myHeader.data('position'), scroll = getScroll();
    if ( hPos.top < scroll.top ){
        myHeader.addClass('fixed');
    }
    else {
        myHeader.removeClass('fixed');
    }
});

function getScroll () {
    var b = document.body;
    var e = document.documentElement;
    return {
        left: parseFloat( window.pageXOffset || b.scrollLeft || e.scrollLeft ),
        top: parseFloat( window.pageYOffset || b.scrollTop || e.scrollTop )
    };
} 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T05:17:18.427

您正在寻找一个水平方向的“粘性框”，它会在您滚动时跟随您向下滚动。

这是一个演练，解释了如何为侧边栏创建这种效果：http: [//css-tricks.com/scrollfollow-sidebar/](http://css-tricks.com/scrollfollow-sidebar/)

我修改了代码以使用跨越页面宽度的通用示例：

### HTML：

```
<div class="wrapper">
  <div class="head">HEAD</div>
  <div class="header">Table Header</div>
  <div class="content">Content</div>
  <div class="footer">Footer</div>
</div>​ 
```

### CSS：

```
.wrapper {
  border:1px solid red;
}
.head{
  height: 100px;
  background: gray;
}
.header {
  background:red;
  height:100px;
  left:0;
  right:0;
  top:0px;
  margin-top:100px;
  position:absolute;
}

.content {
   background:green;
   height:1000px;
}

.footer {
   background:blue;
   height:100px;
} 
```

### jQuery：

```
$(function() {

    var $sidebar = $(".header"),
        $window = $(window),
        offset = $sidebar.offset(),
        topPadding = 0;

    $window.scroll(function() {
        if ($window.scrollTop() > offset.top) {
            $sidebar.stop().animate({
                top: $window.scrollTop() - offset.top + topPadding
            });
        } else {
            $sidebar.stop().animate({
                top: 0
            });
        }
    });

});​ 
```

当您滚动超出最初出现的位置时，这会将标题块动画化到视图中。

[jsFiddle在这里](http://jsfiddle.net/radiatorsounds/Bavvw/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T05:21:28.280

我希望你看起来像这个 Header Fix [**Demo**](http://tinkerbin.com/cH1FK535)

**HTML**

```
<div class="wrapper">
<div class="header">Header Fix</div>
<div class="content">Content</div>
<div class="footer">Footer</div>
</div> 
```

**CSS**

```
.wrapper {
  border:1px solid red;
}

.header {
  background:red;
  height:100px;
  position:fixed;
  left:0;
  right:0;
  top:0;

}

.content {
   background:green;
   height:1000px;
}

.footer {
   background:blue;
   height:100px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-04T11:45:14.030

为了保持任何块元素的位置固定，您需要在样式的 display 属性中使用 absolute 或 fixed 属性，但不要忘记给顶部元素留出足够的空间并打破顶部元素，否则它将进入标题部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T05:10:57.037

您可以尝试将底部元素包含在一个 div 中的标题下，然后将类添加到该 div 将溢出设置为自动

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-10T09:09:11.600

这是使用固定页眉、页脚和列的完整工作版本！

应用相对位置的类，非常重要，否则固定列会重叠页眉和页脚，然后在需要的地方定义表级别的类：“sticky-table”（强制），“sticky-header”，“sticky- column”，“sticky-footer”，而不是调用函数“applyStickyHeaders”。就这样！

```
$(function(){
    applyStickyHeaders();
}); 
```

完整示例：

[https://jsfiddle.net/pintilies/6zLyxewg/4/](https://jsfiddle.net/pintilies/6zLyxewg/4/)

在 IE、FireFox 和 Chrome 中测试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-02T11:19:14.993

```
$(window).scroll(function() {
 if ($(this).scrollTop() > 100){  
    $('header').addClass("sticky");
  }
  else{
    $('header').removeClass("sticky");
  }
}); 
```

CSS：

```
header.sticky {
  font-size: 24px;
  line-height: 48px;
  height: 48px;
  background: #efc47D;
  text-align: left;
  padding-left: 20px;
} 
```

# c# - 如何检测是否启用了防火墙产品？

> ID：13795285
> 
> 赞同：8
> 
> 时间：2012-12-10T05:06:37.367
> 
> 标签：c#, windows-applications, windows-firewall, windows-firewall-api

如果启用了防火墙产品，我如何检测（从用 C# 编写的 Windows 窗体应用程序）？

这是我的代码，我在**INetFwMgr 上遇到错误，找不到类型或命名空间**

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private const string CLSID_FIREWALL_MANAGER = "{304CE942-6E39-40D8-943A-B913C40C9CD4}"; 

       INetFwMgr manager = GetFireWallManager();
       bool isFirewallEnabled = manager.LocalPolicy.CurrentProfile.FirewallEnabled;

       private static INetFwMgr GetFireWallManager()
       {
           Type objectType = Type.GetTypeFromCLSID(new Guid(CLSID_FIREWALL_MANAGER));
           return Activator.CreateInstance(objectType) as INetFwMgr;
       }
        private void button1_Click(object sender, EventArgs e)
        {

            if (isFirewallEnabled == false)
           {
                MessageBox.Show("Firewall is not enabled.");
           }
           else
           {
                MessageBox.Show("Firewall is enabled.");
           }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T05:18:42.637

```
NetFwMgrType = Type.GetTypeFromProgID("HNetCfg.FwMgr", false); 
INetFwMgr mgr = (INetFwMgr)Activator.CreateInstance(NetFwMgrType);
bool Firewallenabled = mgr.LocalPolicy.CurrentProfile.FirewallEnabled; 
```

有关详细信息，请参阅链接。

[http://technet.microsoft.com/en-us/library/cc737845%28WS.10%29.aspx](http://technet.microsoft.com/en-us/library/cc737845%28WS.10%29.aspx)

[http://blogs.msdn.com/b/securitytools/archive/2009/08/21/automating-windows-firewall-settings-with-c.aspx](http://blogs.msdn.com/b/securitytools/archive/2009/08/21/automating-windows-firewall-settings-with-c.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T05:15:28.133

在这里查看这个关于防病毒的问题[How to detect antivirus installed on windows 2003 server and 2008 server 2003 server R2 and 2008 server R2 using WMI or other then WMI in C++](https://stackoverflow.com/questions/4396757/how-to-detect-antivirus-installed-on-windows-2003-server-and-2008-server-2003-se)相同的 API 调用可用于使用[`WSC_SECURITY_PROVIDER_FIREWALL`](http://msdn.microsoft.com/en-us/library/bb432509%28v=vs.85%29.aspx)枚举检测防火墙设置。该问题的答案实际上是错误的，但它会为您提供非服务器计算机的答案。该代码在 C++ 中，但它只是您需要的 Windows API 调用，您也可以从 C# 调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T05:29:19.883

您首先需要将以下组件添加到您的项目中

*   **INetFwMgr**

然后，从家庭网络配置管理器 CLSID 中获取对象类型`{304CE942-6E39-40D8-943A-B913C40C9CD4}`（链接到`C:\WINDOWS\system32\hnetcfg.dll`并且可以在 中找到`HKEY_CLASSES_ROOT\CLSID\{304CE942-6E39-40D8-943A-B913C40C9CD4}`），并使用收集到的类型创建一个实例，使用该类型的默认构造函数作为新的`INetFwMgr`，用于检测防火墙是否启用或不使用`INetFwMgr.LocalPolicy.CurrentProfile.FirewallEnabled`返回一个`bool`

```
private const string CLSID_FIREWALL_MANAGER = "{304CE942-6E39-40D8-943A-B913C40C9CD4}"; //This is the CLSID of Home Networking Configuration Manager. We'll use this to detect whether the Firewall is enabled or not
private static NetFwTypeLib.INetFwMgr GetHNCMType()
{
    Type objectType = Type.GetTypeFromCLSID(new Guid(CLSID_FIREWALL_MANAGER)); //Creates a new GUID from CLSID_FIREWALL_MANAGER getting its type as objectType
    return Activator.CreateInstance(objectType) as NetFwTypeLib.INetFwMgr; //Creates an instance from the object type we gathered as an INetFwMgr object
}
static void Main(string[] args)
{
    INetFwMgr manager = GetHNCMType(); //Initializes a new INetFwMgr of name manager from GetHNCMType
    if (manager.LocalPolicy.CurrentProfile.FirewallEnabled == false) //Continue if the firewall is not enabled
    {
        //The firewall is not enabled
        Console.WriteLine("OFF"); //Writes OFF to the Console in a new line
    }
    else //Otherwise:
    {
        //The fire wall is enabled
        Console.WriteLine("ON"); //Writes ON to the Console in a new line
    }
} 
```

谢谢，
我希望你觉得这有帮助:)

* * *

要将组件添加到您的项目中，

*   右键单击项目名称下**解决方案资源管理器中的****引用**，然后选择**添加引用...**
*****   在选项卡**COM**下，选择您要添加的组件，然后单击**OK******

 ***** * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-21T18:36:43.367

只需从 C://windows/system32/hnetcfg.dll 和 C://windows/system32/FirewallAPI.dll 导入引用

然后使用

```
using NATUPNPLib;
using NETCONLib;
using NetFwTypeLib; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-13T18:12:17.757

我知道这是一篇旧帖子，但我找到了一个很好的解决方案！
读取防火墙状态的注册表项：

> HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\SharedAccess\Parameters\FirewallPolicy\StandardProfile
> 
> 键：EnableFirewall

```
public static bool isFirewallEnabled() {
        try {
            using (RegistryKey key = Registry.LocalMachine.OpenSubKey("System\\CurrentControlSet\\Services\\SharedAccess\\Parameters\\FirewallPolicy\\StandardProfile")) {
                if (key == null) {
                    return false;
                } else { 
                    Object o = key.GetValue("EnableFirewall");
                    if (o == null) {
                        return false;
                    } else {
                        int firewall = (int)o;
                        if (firewall == 1) {
                            return true;
                        } else {
                            return false;
                        }
                    }
                }
            }
        } catch {
            return false;
        }
    } 
```

您还可以获得 DomainProfile、PublicProfile 和 StandardProfile 的值。您也可以获得 FirewallRules。

我希望这有帮助 ：）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T05:21:18.767

您可以将[FwMgr](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365287%28v=vs.85%29.aspx)用于旧的 Windows 版本 (XP)，并使用[带有高级安全 API 的 Windows 防火墙](http://msdn.microsoft.com/en-us/library/windows/desktop/ff956124%28v=vs.85%29.aspx)用于 Vista 及更高版本。

这是一个检索防火墙设置的[示例](http://msdn.microsoft.com/en-us/library/aa366328%28v=vs.85%29.aspx)。****

# asp.net-mvc - 多对多实体框架和存储库模式插入/更新

> ID：13795289
> 
> 赞同：0
> 
> 时间：2012-12-10T05:07:16.183
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first, many-to-many, repository-pattern

我正在使用 EF 代码优先方法和流利的 api。我的申请中有一个注册表单，在其中注册候选人可以从下拉列表中选择多个选项（对注册表单上的下拉列表感兴趣），其中包含一组预定义的选项（将来可能会增加，但机会非常少）。当用户提交表单时，我想将此记录保存到数据库中。所以我创建了以下实体。

**将保存注册候选人信息的参与者班级**

```
public class Participant
    {
        public Participant()
        {
            Interests = new Collection<Interest>();
        }
        [Key, ForeignKey("User")]
        public int Id { get; set; }
        [DisplayName("First Name")]
        [StringLength(50, ErrorMessage = "First name cannot be more than 50 characters")]
        [Required(ErrorMessage = "You must fill in first name")]
        public string FirstName { get; set; }

        [DisplayName("Last Name")]
        [StringLength(50, ErrorMessage = "Last name cannot be more than 50 characters")]
        [Required(ErrorMessage = "You must fill in last name")]
        public string LastName { get; set; }

        [Required(ErrorMessage = "You must indicate your full birthday")]
        [DisplayName("Birthday")]
        [DataType(DataType.DateTime)]
        public DateTime BirthDate { get; set; }

        [DisplayName("Gender")]
        [Required(ErrorMessage = "You must select gender")]
        public int Gender { get; set; }

        public string Address { get; set; }

        public int CountryId { get; set; }
        public Country Country { get; set; }

        [DisplayName("Zip code")]
        [StringLength(10, ErrorMessage = "Zip code cannot be more than 10 characters")]
        public string ZipCode { get; set; }

        public string Mobile { get; set; }

        public string PhotoUrl { get; set; }

        public virtual User User { get; set; }

        public virtual ICollection<Interest> Interests { get; set; }

        public string MedicalConditions { get; set; }
} 
```

注册表格上的“感兴趣”下拉列表中的兴趣类*用户可以从“感兴趣”下拉列表中选择多个选项*

**兴趣班**

```
 public class Interest
    {
        public Interest()
        {
            Participants = new Collection<Participant>();
        }
        public int Id { get; set; }
        public string InterestName { get; set; }
        public virtual ICollection<Participant> Participants { get; private set; }
    } 
```

为了保持每个参与者的兴趣，我在 DB 中使用以下模式创建了一个 ParticipantInterests 表。ParticipantInterests Id (PK) ParticipantId（来自 Participants 表的 FK） InterestId（FK Interests 表）

我添加了 public virtual ICollection Participants { get; 放; } 在兴趣模型和

公共虚拟 ICollection 兴趣 { 获取；放; } 在 Participant 模型中形成多对多关联。 **我的数据上下文类如下**

```
public class STNDataContext : DbContext
    {
        public DbSet<Participant> Participants { get; set; }
        public DbSet<User> Users { get; set; }
        public DbSet<Country> Countries { get; set; }
        public DbSet<Interest> Interests { get; set; }
        public DbSet<Role> Roles { get; set; }
        public DbSet<SecurityQuestion> SecurityQuestions { get; set; }

        public DbSet<Tour> Tours { get; set; }
        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Participant>()
                .HasKey(p => p.Id);

            modelBuilder.Entity<User>()
                .HasOptional(u => u.Participant)
                .WithRequired();

            modelBuilder.Entity<Participant>()
            .HasMany(p => p.Interests)
            .WithMany(i => i.Participants)
            .Map(m =>
            {
                m.ToTable("ParticipantInterests");
                m.MapLeftKey("ParticipantId");
                m.MapRightKey("InterestId");
            });

            modelBuilder.Entity<User>().HasRequired(u => u.Role);
            modelBuilder.Entity<Participant>().HasRequired(p => p.Country);
            modelBuilder.Entity<User>().HasOptional(u => u.SecurityQuestion);
        }

        public virtual void Commit()
        {
            base.SaveChanges();
        } 
```

**控制器动作代码**

```
public virtual ActionResult Register(StudentRegisterViewModel studentRegisterViewModel)
        {
            if (ModelState.IsValid)
            {
                if (_userService.IsUserExists(studentRegisterViewModel.Participant.User) == false)
                {
                    studentRegisterViewModel.Participant.User.Username = studentRegisterViewModel.Username;
                    studentRegisterViewModel.Participant.User.Email = studentRegisterViewModel.Email;
                    studentRegisterViewModel.Participant.User.DateCreated = DateTime.Now;
                    studentRegisterViewModel.Participant.User.Id = 3;
                    studentRegisterViewModel.Participant.User.IsApproved = false;
                    studentRegisterViewModel.Participant.User.RoleId = 2;
                    studentRegisterViewModel.Participant.CountryId = 1;
                    var interests = new List<Interest>();
                    foreach (var interestItem in studentRegisterViewModel.SelectedInterests)
                    {
                        var interest = new Interest { Id = interestItem };
                        interest.Participants.Add(studentRegisterViewModel.Participant);
                        interests.Add(interest);
                        studentRegisterViewModel.Participant.Interests.Add(interest);
                    }
                    studentRegisterViewModel.Participant.Interests = interests;
                    _participantService.CreatParticipant(studentRegisterViewModel.Participant);
                    var user = _userService.GetUser(studentRegisterViewModel.Participant.User.Username);
                }
            }
            studentRegisterViewModel.Gender =
                Enum.GetNames(typeof(Gender)).Select(
                    x => new KeyValuePair<string, string>(x, x.ToString(CultureInfo.InvariantCulture)));
            studentRegisterViewModel.Interests = _interestService.GetAllInterests();
            return View(studentRegisterViewModel);
        } 
```

**参与者存储库 (DAL)**

```
 public class ParticipantRepository : Repository<Participant>, IParticipantRepository 
    {
        public ParticipantRepository(IDatabaseFactory databaseFactory)
            : base(databaseFactory)
        {
        }
    } 
```

**参与者服务 (BLL)**

```
public class ParticipantService : IParticipantService
    {
        private readonly IParticipantRepository _participantRepository;
        private readonly IUnitOfWork _unitOfWork;

        public ParticipantService(IParticipantRepository participantRepository, IUnitOfWork unitOfWork)
        {
            this._participantRepository = participantRepository;
            this._unitOfWork = unitOfWork;
        }

        public void CreatParticipant(Participant participant)
        {
            _participantRepository.Add(participant);
            _unitOfWork.Commit();
        }
} 
```

**数据库工厂**

```
public class DatabaseFactory : Disposable, IDatabaseFactory
    {
        private STNDataContext _stnDataContext;
        public DatabaseFactory()
        {
            Database.SetInitializer<STNDataContext>(null);
        }
        public STNDataContext Get()
        {
            return _stnDataContext ?? (_stnDataContext = new STNDataContext());
        }
        protected override void DisposeCore()
        {
            if (_stnDataContext != null)
                _stnDataContext.Dispose();
        }
    } 
```

**工作单位**

```
public class UniOfWork : IUnitOfWork
{
    private readonly IDatabaseFactory _databaseFactory;
    private STNDataContext _stnDataContext;

    public UniOfWork(IDatabaseFactory databaseFactory)
    {
        this._databaseFactory = databaseFactory;
    }

    public STNDataContext StnDataContext
    {
        get { return _stnDataContext ?? (_stnDataContext = _databaseFactory.Get()); }
    }

    public void Commit()
    {
        StnDataContext.Commit();
    }

} 
```

当我尝试创建参与者时，出现以下错误。

> 无法将值 NULL 插入到列“InterestName”、表“StudyTourNetworkDB.dbo.Interests”中；列不允许空值。INSERT 失败。\r\n语句已终止。

理想情况下，根据我的想法，它应该在 Participants 表和 ParticipantsInterests 表中插入参与者信息。但它也试图在兴趣表中插入记录，这也不应该发生。请帮我解决这个问题。通过创建多对多关联，我可能做错了。

谢谢

**注意：我可以理解这个问题，因为兴趣集合没有被添加/附加到上下文，但我无法找到如何将兴趣集合添加到具有存储库模式和工作单元的相同上下文中。**

请给我解决方案。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:35:19.447

您是正确的，因为您的兴趣对象正在重新添加，因为您的模型中保存的副本没有被 EF 跟踪，因此它认为它们是新的。相反，您需要从存储库中查找版本，然后添加这些版本。

代替：

```
var interests = new List<Interest>();
foreach (var interestItem in studentRegisterViewModel.SelectedInterests)
{
    var interest = new Interest { Id = interestItem };
    interest.Participants.Add(studentRegisterViewModel.Participant);
    interests.Add(interest);
    studentRegisterViewModel.Participant.Interests.Add(interest);
}
studentRegisterViewModel.Participant.Interests = interests; 
```

尝试类似：

```
// Look up the actual EF entities which match your selected items.  You'll  
// probably need to adapt this to make it work
var selectedInterestIds = studentRegisterViewModel.SelectedInterests.Select(i => i.Id);
var interests = _interestService.GetAllInterests().Where(i => selectedInterestIds.Contains(i.Id));    
studentRegisterViewModel.Participant.Interests = interests; 
```

请注意，对于多对多关系，您不需要设置双方-在您的示例中，您填写了兴趣实体的参与者字段-这将由 EF 自动设置，因为您将其添加到参与者的权益财产。

# javascript - 如何在Javascript中捕获鼠标输入？

> ID：13795296
> 
> 赞同：1
> 
> 时间：2012-12-10T05:08:29.367
> 
> 标签：javascript, prototypejs

谁能帮助我，当鼠标从左侧或右侧进入而不是从任何地方进入Javascript中的特定区域时，我如何才能抓住该事件。我得到了坐标代码，但这并不能解决我的问题。对于x，y坐标，我使用这个块代码

```
tempX = e.pageX
tempY = e.pageY 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:32:32.570

你在正确的轨道上

使用

```
​document.observe("mousemove",function(e){
    console.log("X: "+e.pointerX()+", Y: "+e.pointerY()); 
});​​​​​​​​​​​​​ 
```

它获取鼠标在文档上的 X 和 Y 坐标

我会检查是否有任何 X 小于 10 - 给一点错误空间，然后根据从左侧进入的代码运行代码，并确保您设置了一个正在处理它的标志 - 否则您将有多个调用到同一个处理程序。

右侧有点棘手，因为您需要知道屏幕的宽度，然后在右侧添加一个小错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T05:33:00.693

你可以试试这个（可能不是优化的方法）：

在页面的左侧和右侧都有一个隐藏/不可见的 div。就像一条覆盖整个页面的长条。一旦在这些 div 上触发了鼠标悬停事件，您可以在各自的情况下使相应的标志为 true。

所以如果leftFlag为真->做必要的

做类似的 rightFlag 练习。

**注意：** 使不透明度非常低（**不透明度：.01**）使 div 不可见。并且事件也会被触发。

# php - PHP 错误，布尔逻辑

> ID：13795307
> 
> 赞同：0
> 
> 时间：2012-12-10T05:09:48.080
> 
> 标签：php, mysql, phpmyadmin

```
 <?php
date_default_timezone_set("America/New_York");
require("db_vars.php");

  // Connect to the database
  $dbc = mysqli_connect($db_hostname, $db_database, $db_username, $db_password);

  // Custom function to draw a bar graph given a data set, maximum value, and image filename
  function draw_bar_graph($width, $height, $data, $max_value, $filename) {
    // Create the empty graph image
    $img = imagecreatetruecolor($width, $height);

    // Set a white background with black text and gray graphics

    $bg_color = imagecolorallocate($img, 255, 255, 255);       // white

    $text_color = imagecolorallocate($img, 255, 255, 255);     // white

    $bar_color = imagecolorallocate($img, 0, 0, 0);            // black
    $border_color = imagecolorallocate($img, 192, 192, 192);   // light gray

    // Fill the background
    imagefilledrectangle($img, 0, 0, $width, $height, $bg_color);

    // Draw the bars
    $bar_width = $width / ((count($data) * 2) + 1);
    for ($i = 0; $i < count($data); $i++) {
      imagefilledrectangle($img, ($i * $bar_width * 2) + $bar_width, $height,
        ($i * $bar_width * 2) + ($bar_width * 2), $height - (($height / $max_value) * $data[$i][1]), $bar_color);
      imagestringup($img, 5, ($i * $bar_width * 2) + ($bar_width), $height - 5, $data[$i][0], $text_color);
    }

    // Draw a rectangle around the whole thing
    imagerectangle($img, 0, 0, $width - 1, $height - 1, $border_color);

    // Draw the range up the left side of the graph
    for ($i = 1; $i <= $max_value; $i++) {
      imagestring($img, 5, 0, $height - ($i * ($height / $max_value)), $i, $bar_color);
    }

    // Write the graph image to a file
    imagepng($img, $filename, 5);

    imagedestroy($img);
  } // End of draw_bar_graph() function

 // if (mysqli_num_rows($data) != 0) {
    // First grab the user's responses from the response table (JOIN to get the topic and category names)
   $query = "SELECT ts.species_name, COUNT(ti.species_id)  " .
      "FROM tree_species ts " .
      "INNER JOIN tree_individuals ti ON ts.species_id = ti.species_id " .
      "GROUP BY ts.species_name'";
    $data = mysqli_query($dbc, $query);
    $tree_totals = array();
    while ($row = mysqli_fetch_array($data)) {
      array_push($tree_totals, $row);
    }

        // Generate and display the mismatched category bar graph image
        echo '<h4>Mismatched category breakdown:</h4>';
        draw_bar_graph(480, 240, $tree_totals, 5, 'treetotalgraph.png');
        echo '<img src="treetotalgraph.png" alt="Tree total graph" /><br />';
//}

mysqli_close($dbc);
?> 
```

产生以下错误

警告：mysqli_query() 期望参数 1 为 mysqli，布尔值在第 54 行的 G:\Students\test.php 中给出

警告：mysqli_fetch_array() 期望参数 1 为 mysqli_result，在第 56 行的 G:\Students\test.php 中给出 null

不匹配的类别细分：

警告：imagepng() [function.imagepng]：无法打开“treetotalgraph.png”进行写入：第 43 行 G:\Students\test.php 中的权限被拒绝

警告：mysqli_close() 期望参数 1 为 mysqli，布尔值在第 68 行的 G:\Students\test.php 中给出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:11:27.110

正是它所说的：您没有明确设置时区，php.ini 文件中也没有设置。

将此添加到代码的开头：

```
date_default_timezone_set("America/New_York"); 
```

# gcc - 使用 CooCox 在 STM32F4-Discovery 上编译 CHIBIOS

> ID：13795308
> 
> 赞同：1
> 
> 时间：2012-12-10T05:09:50.047
> 
> 标签：gcc, arm, stm32f4discovery

我对 ARM 的编译非常陌生。

我从使用 CooCox 开始。创建项目后，我将所有 CHIBIOS 包含路径添加到项目中。我的代码本身是 stm32F4 发现的默认 Chibios 示例代码。

在编译时，我得到一个没有任何内容的输出文件。

但是，如果我在链接配置中取消选择“丢弃未使用的部分”，我会得到以下信息：

`GCC HOME: C:\CooCox\CoIDE\GCC\bin compile: [mkdir] Skipping C:\CooCox\Code\Test3\test3_Flash\Debug\bin because it already exists. [mkdir] Skipping C:\CooCox\Code\Test3\test3_Flash\Debug\obj because it already exists. [cc] 2 total files to be compiled. [cc] arm-none-eabi-gcc -mcpu=cortex-m4 -mthumb -Wall -ffunction-sections -g -O0 -c -DSTM32F407VG -DSTM32F4XX -IC:\CooCox\Code\Test3 -IC:\CooCox\Code\chibitest\chibios_2.4.2\boards\st_stm32f4_discovery -IC:\CooCox\Code\chibitest\chibios_2.4.2\os\ports\common\armcmx -IC:\CooCox\Code\chibitest\chibios_2.4.2\os\ports\gcc\armcmx -IC:\CooCox\Code\chibitest\chibios_2.4.2\os\hal\src -IC:\CooCox\Code\chibitest\chibios_2.4.2\os\various -IC:\CooCox\Code\chibitest\chibios_2.4.2\os\kernel\src -IC:\CooCox\Code\chibitest\chibios_2.4.2\os\ports\gcc\armcmx\stm32f4xx\ld -IC:\CooCox\Code\chibitest\chibios_2.4.2\os\hal\platforms\stm32 -IC:\CooCox\Code\chibitest\chibios_2.4.2\demos\armcm4-stm32f407-discovery -IC:\CooCox\Code\chibitest\chibios_2.4.2\os\hal\platforms\stm32\rtcv1 -IC:\CooCox\Code\chibitest\chibios_2.4.2\os\hal\include -IC:\CooCox\Code\chibitest\chibios_2.4.2\os\ports\gcc\armcmx\stm32f4xx -IC:\CooCox\Code\chibitest\chibios_2.4.2\os\hal\platforms\stm32\usbv1 -IC:\CooCox\Code\chibitest\chibios_2.4.2\os\hal\platforms\stm32f4xx -IC:\CooCox\Code\chibitest\chibios_2.4.2\test -IC:\CooCox\Code\chibitest\chibios_2.4.2 -IC:\CooCox\Code\chibitest\chibios_2.4.2\os\ports\common\armcmx\cmsis\include -IC:\CooCox\Code\chibitest\chibios_2.4.2\os\hal\platforms\stm32\gpiov2 -IC:\CooCox\Code\chibitest\chibios_2.4.2\os\kernel\include C:\CooCox\Code\Test3\main.c C:\CooCox\Code\Test3\syscalls\syscalls.c [cc] In file included from C:\CooCox\Code\chibitest\chibios_2.4.2\os\hal\include/hal.h:39:0, [cc] from C:\CooCox\Code\Test3\main.c:29: [cc] C:\CooCox\Code\chibitest\chibios_2.4.2\boards\st_stm32f4_discovery/board.h:57:0: warning: "STM32F4XX" redefined [enabled by default] [cc] <command-line>:0:0: note: this is the location of the previous definition [cc] C:\CooCox\Code\Test3\main.c: In function 'Thread1': [cc] C:\CooCox\Code\Test3\main.c:189:1: warning: no return statement in function returning non-void [-Wreturn-type] [cc] Starting link [cc] arm-none-eabi-gcc -mcpu=cortex-m4 -mthumb -Wl -nostartfiles -g -Wl,-Map=test3_Flash.map -O0 -lgcc -lc -lm -lnosys -LC:\CooCox\CoIDE\workspace\test3_Flash -Wl,-TC:\CooCox\CoIDE\workspace\test3_Flash/arm-gcc-link.ld -g -o test3_Flash.elf ..\obj\main.o ..\obj\syscalls.o [cc] ..\obj\main.o: In function`pwmpcb':

```
 [cc] C:\CooCox\Code\Test3/main.c:127: undefined reference to `ADCD1' 
```

在最后一行之后，文件中几乎每个变量都以相同的方式列出。

现在我知道我的问题与链接器有关，但我不确定在哪里解决它。

也许我需要以不同的方式处理它？修复上述两个警告（分别注释和添加返回）并不能解决问题。

作为背景知识，我希望使用 Chibios 来驱动连接到 stm32F4 的相机和其他设备。如果 CooCox 变得很痛苦，我可以切换到对 makefile 更友好的东西（没有办法导入 makefile！）

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:36:40.743

作为使用 F4 和 chibios 开发的开源工具链，您可以尝试 chibistudio：

[http://sourceforge.net/projects/chibios/files/ChibiStudio/](http://sourceforge.net/projects/chibios/files/ChibiStudio/)

我已经使用了一段时间，我对它真的很满意。

# python - 添加 dict_values

> ID：13795309
> 
> 赞同：0
> 
> 时间：2012-12-10T05:09:51.280
> 
> 标签：python

我希望能够组合列出的数据字典项目的值（点池、力量、健康、智慧、敏捷）并确保它们的总和不超过 30 的值。我可以导出数据字典中的项目，但是我不确定如何将它们加在一起以确保它们的总和不超过 30 的数值，然后在执行操作之前对其进行测试。

```
variables=(attributes.values())
print(variables)
dict_values(['0', '30', '0', '0', '0'])
variables=items(attributes.values()) 
```

我想将字典值添加在一起并将它们分配给我将用作 while 条件的变量。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:21:25.257

我想你的意思是：

```
char_info = {'Pool': '5', 'Strength': '10', 'Health': '3', 'Wisdom': '1', 'Dexterity': '2'}
if sum(int(x) for x in char_info.values()) > 30:
    print 'Too many points!' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:18:00.080

```
>>> variables=attributes.values()
>>> print(variables)
dict_values(['0', '30', '0', '0', '0'])
>>> print(sum(variables))
030000
>>> # Oops, you're adding strings; we want to convert them to ints...
>>> print(sum(int(variable) for variable in variables))
30
>>> if sum(int(variable) for variable in variables) > 30:
...     print('Cheater!')
... else:
...     print('OK')
OK 
```

如果您不了解 sum 函数，可以通过以下方式显式编写它：

```
total = 0
for value in attributes.values():
    total += int(value)
if value > 30:
    … 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T05:18:07.047

我不完全确定我是否正确地解释了您；你应该让你的问题更准确，更清楚。

但是，我认为您要求的语句检查字典值的总和以查看它是否大于 30。如果是，请考虑以下问题：

```
dic = {'Key1':1,'Key2':5,'Key3':8}
vals = dic.values()
if sum(vals) > 30:
    # do something 
```

如果您只检查某些键，那么看看这个：

```
dic = {'Key1':1,'Key2':5,'Key3':8}
vals = map(lambda x:x[1],filter(lambda x:x[0] in ['Key1','Key2'],dic.items()))
if sum(vals) > 30:
    # do something 
```

请进一步澄清您的问题！

# android - android启动和卸载服务或线程

> ID：13795310
> 
> 赞同：2
> 
> 时间：2012-12-10T05:09:58.867
> 
> 标签：android, multithreading, service, uninstallation

我想做一个活动，启动一个（服务或线程），每隔 x 秒连续重复相同的命令。

我该如何做以下事情：

1.  即使操作系统破坏了活动，（服务或线程）也需要在后台运行。
2.  即使我的活动被多次破坏和创建，我也只希望运行 1 个（服务或线程）
3.  当用户卸载活动时，我想杀死（服务或线程）

我将不胜感激一些指示，以引导我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T05:18:58.170

在我看来，您应该使用带有 IntentService 的 AlarmManager 来安排重复的后台任务。您甚至可以让闹钟唤醒手机以使用 AlarmManager 执行您的代码。

看：

[https://developer.android.com/reference/android/app/AlarmManager.html](https://developer.android.com/reference/android/app/AlarmManager.html)

[http://mobile.tutsplus.com/tutorials/android/android-fundamentals-scheduling-recurring-tasks/](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-scheduling-recurring-tasks/)

[http://android-er.blogspot.in/2010/10/simple-example-of-alarm-service-using.html](http://android-er.blogspot.in/2010/10/simple-example-of-alarm-service-using.html)

如果手机重启，您将需要再次触发警报管理器。有关如何执行此操作的确切说明，请参阅本教程：

[http://www.androidenea.com/2009/09/starting-android-service-after-boot.html](http://www.androidenea.com/2009/09/starting-android-service-after-boot.html)

# javascript - 在 Jquery Mobile 中如何显示/隐藏 HTML 页面

> ID：13795311
> 
> 赞同：2
> 
> 时间：2012-12-10T05:09:59.340
> 
> 标签：javascript, jquery, jquery-mobile

我使用此代码显示/隐藏`div`

```
$("[id*=viewMeButton]").click(function(){
     $("[id*=viewMe]").toggle();
     $("[id*=viewMeButton]").show(); 
}); 
```

同样，在 Jquery Mobile 中，可以显示/隐藏 HTML 页面。

例如在 LinkedIn 应用程序中。

在 LinkedIn 移动应用程序中，如果我们单击该`in`图标，则表示它显示/隐藏页面。就像我需要的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:22:43.727

```
$.mobile.changePage() 
```

从一页更改为另一页

```
$.mobile.loadPage() 
```

加载外部页面，增强其内容，并将其插入 DOM。

[http://jquerymobile.com/test/docs/api/methods.html](http://jquerymobile.com/test/docs/api/methods.html)

# django - 是否可以使用 Django 和 Node.Js？

> ID：13795313
> 
> 赞同：8
> 
> 时间：2012-12-10T05:10:09.817
> 
> 标签：django, node.js

我为用户登录和用户管理设置了 django 后端，以及我的整套模板，网站访问者使用这些模板来显示 html 文件。但是，我正在尝试向我的站点添加实时功能，并且我在 Node.Js 中找到了一个完美的库，它允许两个用户在文本框中键入内容，并让文本出现在他们的两个屏幕上。是否可以合并两个后端？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-10T11:06:58.830

为不同目的运行多个后端是绝对可能的（有时甚至非常有用）。然而，它会打开一些蠕虫，这取决于您的系统预期具有什么样的严格性，您的团队中有哪些人等：

*   状态。您需要在不同的应用服务器之间共享会话状态。最简单的方法是以与框架无关的方式存储外部会话状态。我建议在键/值存储中使用 JSON 对象，您可能会从 JSON 模式中受益。
*   域/路由。您需要您的登录 cookie 可用于两个应用服务器，这意味着由 Apache/Nginx 路由的单个域或通过 DNS 路由的单独子域。出于以下原因，我建议使用单独的子域
*   网络套接字。我可能已经过时了，但据我所知，Apache 和 Nginx 都不支持 websockets 代理，这意味着如果你想使用它，你将牺牲使用 http 服务器作为应用程序代理的灵活性，而是直接通过子域。
*   未指定的要求。监控、日志记录、错误通知、构建系统、测试、持续集成/部署、文档等都需要扩展以支持新型组件
*   技能。您必须为管理更复杂的应用程序架构所需的技能集支付时间或金钱

所以，我的建议是非常仔细地考虑你是否需要这个。可能会涉及很多时间和思想。

**更新**：实际上有一些公司专门为现有网站添加实时功能。我不会说出任何名字，但是如果您在托管平台（例如 Heroku）的附加市场上寻找“实时”，那么您会找到它们。

**更新 2**：Nginx 现在[支持 Websockets](http://nginx.org/en/docs/http/websocket.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T08:27:01.487

你不能合并它们。您可以通过 Reddis 等队列系统将消息从 Django 发送到 Node.Js。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:42:12.613

如果你真的想使用两个后端，你可以使用两个后端都支持的数据库。

虽然我不会推荐它。

# r - 将 Google 地理编码输出转换为 R 中的地图

> ID：13795316
> 
> 赞同：2
> 
> 时间：2012-12-10T05:10:55.727
> 
> 标签：r, maps, ggplot2, geocode

恐怕我在做应该相对容易的事情时遇到了一些麻烦。我正在尝试从这个问题[World Map - Plotting Circles, size of circle related to No of](https://stackoverflow.com/questions/10751326/world-map-plotting-circles-size-of-circle-relevant-to-no-of) using the output from the Google geocode API 中有效地复制 ggplot 地图。我向它传递了一堆格式有问题的自由文本位置数据（即它擅长什么），并得到下表。

```
> summary(userlocations)
       ID              lon                lat             lonmin        
 Min.   :   1.0   Min.   :-169.867   Min.   :-82.86   Min.   :-180.000  
 1st Qu.: 618.8   1st Qu.: -91.815   1st Qu.: 33.72   1st Qu.: -91.956  
 Median :1200.0   Median : -77.201   Median : 40.06   Median : -78.110  
 Mean   :1220.5   Mean   : -49.884   Mean   : 35.40   Mean   : -51.709  
 3rd Qu.:1804.2   3rd Qu.:  -2.248   3rd Qu.: 45.52   3rd Qu.:  -2.798  
 Max.   :2500.0   Max.   : 174.886   Max.   : 71.29   Max.   : 174.771  
                  NA's   :643        NA's   :643      NA's   :643       
     lonmax             latmin           latmax            location   
 Min.   :-169.774   Min.   :-90.00   Min.   :-61.00   London   :  65  
 1st Qu.: -89.013   1st Qu.: 33.07   1st Qu.: 33.95   Canada   :  31  
 Median : -75.891   Median : 39.74   Median : 40.59   Atlanta  :  25  
 Mean   : -47.521   Mean   : 34.01   Mean   : 36.86   England  :  22  
 3rd Qu.:  -1.521   3rd Qu.: 44.37   3rd Qu.: 47.08   New York :  22  
 Max.   : 180.000   Max.   : 71.23   Max.   : 85.41   Las Vegas:  21  
 NA's   :643        NA's   :643      NA's   :643      (Other)  :3286 
```

虽然我知道足以做类似的事情：

```
map(database="worldHires")
points(userlocations$lon, userlocations$lat, pch=20) 
```

这会产生一个相当小、丑陋的地图。为了重现 ggplot 示例，我需要（至少）获得一个重复纬度/经度整数的计数器，所以我知道伦敦何时有 65 人，但似乎我不能只使用 userlocations$location ，因为这个字段只包含我最初传递给 Google 的非规范化自由文本；只有 lon 和 lat 似乎有有用的数据。

对于这个问题的简单性，我深表歉意，但如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:55:03.390

如果您可以将代码整齐地格式化为两个向量 x（经度）和 y（纬度），那么您可以使用：

```
require(ggplot2)
ggplot(data.frame(x = x, y = y, circle_size = '\\add a vector'), aes(x, y, size = circle_size) + geom_point() 
```

我没有测试上述函数，但它应该会产生与您提供的示例非常相似的图。

# javascript - 在 JavaScript 中设置变量 JSTL

> ID：13795318
> 
> 赞同：0
> 
> 时间：2012-12-10T05:11:02.437
> 
> 标签：javascript, jstl

> **可能重复：**
> [如何在 javascript 中设置 JSTL 变量值？](https://stackoverflow.com/questions/3287114/how-to-set-the-jstl-variable-value-in-javascript)

我有以下某些代码：

```
 <c:set var="test" scope="page" value="0"/>
    <script type="text/javascript">
    var time;

    function Check(){
       if(time <= 0)
       {
           <c:set var="test" scope="page" value="1"/>         
       }
      time-=1;
    }
    </script> 
```

当我这样做的时候

```
 <c:out value="${test}"/> 
```

似乎它的值始终为 1，并且发生在 time=0 或小于 0 之前。并且还做了以下事情：

```
 <c:if test="${test=='1'}">
        <sql:transaction dataSource="${dataBase}">
          <sql:update var="tDel">
               DELETE FROM tmp_time WHERE username='${username}'
          </sql:update>
        </sql:transaction>
     </c:if> 
```

它总是在第一时间出现，而不是等到 time=0 或更少。谁能帮我吗？

# nservicebus - NServiceBus 消息处理创建/更新

> ID：13795319
> 
> 赞同：1
> 
> 时间：2012-12-10T05:11:09.967
> 
> 标签：nservicebus

我们有一条消息，“人”。**使用PersonH​​andler**的 UPDATE 一切正常。但是现在我们需要添加一个新的**Person**。（以前，添加新人员是通过 CRM 系统完成的，因此我们不必担心插入）。现在我们需要将该功能移至我们新的 NSB 系统。**添加人员**后，我需要将该人员的 GUID 传递到前端。为此，我应该使用带有 NSB 的请求/响应模型还是使用普通的 ADO.Net 代码？如果我使用后者，我们将在客户端使用 ADO.Net 和 NSB 中的更新来插入代码。这对我来说看起来不合适。

这可能是一个愚蠢的问题，但如果你们能从建筑的角度为我指出正确的方向，我真的很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:03:54.957

如果您要在客户端上新建 Person GUID，然后将其在消息中传递给服务器 - 您将不需要来自服务器的响应。那可能是最简单的。

您还可以执行请求/响应，如 Full Duplex 和 AsyncPages 示例中所示。

# arm - 可以在 ARM Cortex M3 上禁用 LSI 振荡器以实现低功耗停止模式吗？

> ID：13795326
> 
> 赞同：1
> 
> 时间：2012-12-10T05:11:45.447
> 
> 标签：arm, cortex-m3

我正在尝试将“独立看门狗”功能添加到项目中。它工作正常，但我让芯片长时间休眠以节省电池，看门狗仍然唤醒一切并强制重置。有什么办法可以禁用低速内部振荡器？我还没有找到任何有关这方面的信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:41:11.457

我正在使用 ST Micro stm32f103v8 cortex M3。事实证明，一旦启用了看门狗，就不可能禁用独立看门狗或禁用 LSI 振荡器。由于最大看门狗时间约为 37 秒，当前的解决方案似乎是每 25 秒唤醒一次（以考虑振荡器温度速度差异）并在返回睡眠之前重新加载计数器。我将在接下来的几周内对此进行功率分析，看看它是否有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-26T19:39:25.600

您可以使用系统窗口看门狗 (WWDG) 而不是独立看门狗 (IWDG)。由于您停止了 APB 时钟 (PCLK)，因此 WWDG 将在您进入睡眠/停止时停止

# cuda - 如何检索 CUDA 4.0+ 内核的参数列表信息？

> ID：13795329
> 
> 赞同：5
> 
> 时间：2012-12-10T05:11:51.150
> 
> 标签：cuda

根据[cuLaunchKernel 函数](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDA__EXEC_gb8f3dc3031b40da29d5f9a7139e52e15.html)的 NVidia 文档，使用 CUDA 3.2+ 编译的内核包含有关其参数列表的信息。有没有办法以编程方式从 CUfunction 句柄中检索这些信息？我需要从其 CUfunction 句柄中知道内核的参数数量和每个参数的大小（以字节为单位）。我已经看到上面引用的 NVidia 文档说此信息存在，但我在 CUDA 文档中没有看到任何地方表明访问此信息的编程方式。

添加更多解释：我正在使用中间件系统。它的前端库取代了目标系统上的 libcuda（驱动 API 库）。然后，后端作为守护进程在另一台使用 GPGPU 资源的主机上运行，​​并调用该机器上真正的 libcuda。还有其他中间件解决方案已经使用 cuLaunchKernel 做到了这一点，所以这绝对是可能的。此外，CUDA 本身使用此信息来了解如何从传递给 cuLaunchKernel 的指针解析参数。

编辑：我最初的 CUDA 版本中引入了此元数据，但列出不正确。根据[cuLaunchKernel 文档](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDA__EXEC_gb8f3dc3031b40da29d5f9a7139e52e15.html)，它是 3.2，而不是 4.0 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:45:53.910

`cuLaunchKernel`旨在启动您知道函数原型的内核。没有用于“逆向工程”函数原型的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-07T08:46:46.023

我正在处理同样的问题（我不知道你是否解决了它）。我正在使用一个已知的内核来研究如何使用 che CUfunction 指向的内存。这是无参数版本：

```
#include<cstdio>

extern "C" {
    __global__ void HelloWorld(){
        int thid = (blockIdx.x * blockDim.x) + threadIdx.x;
    }
} 
```

这是一个参数版本，依此类推。

```
#include<cstdio>

extern "C" {
    __global__ void HelloWorld(int a) {
        int thid = (blockIdx.x * blockDim.x) + threadIdx.x;
    }
} 
```

我建议您转储 CUfunction 指向的内存的前 1024 个字节并按照指针进行操作。例如，在 0x30 偏移处有一个指向指针表的指针。我注意到 CUfunction 发布的结构的大小不会随着函数参数的数量而变化，所以我们要查找的表必须按照指针进行搜索。

# ios - 如何在iOS中获取地图中某个点的方向？

> ID：13795330
> 
> 赞同：0
> 
> 时间：2012-12-10T05:12:01.673
> 
> 标签：ios, maps, compass-geolocation

我需要在地图上标记一个点并获取与手机当前持有的角度相关的该点的方向（如指南针）。任何提示将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:49:25.543

您的手机角度矢量将是：`av = (cos(phone_angle), sin(phone_angle))`

从手机到目的地的角度矢量将是`dv = (x_phone_location - x_dest, y_phone_location - y_dest)`

求上述两个向量的大小（长度）。称这些幅度`mag_dv`和`mag_av`

然后你可以做目标向量和电话角度向量的点积。

`angle = arccos( ((dv_x * av_x)+(dv_y * av_y)) / (mag_av * mag_dv) )`

# c# - 填充包含另一个形状的形状的特定区域

> ID：13795336
> 
> 赞同：0
> 
> 时间：2012-12-10T05:13:08.293
> 
> 标签：c#, winforms, drawing

在 Winforms 应用程序中，我正在做 2D 绘图。例如，当我尝试填充一个包含圆形的矩形时。我只想用指定的颜色填充圆圈外的区域。我试过了，但整个矩形都被填满了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T06:03:07.560

试试这个以获得所需的输出。打开一个窗体并添加一个按钮。在按钮单击事件中，只需添加以下代码：

```
Region rgn = new Region(new Rectangle(50, 50, 200, 150));
System.Drawing.Drawing2D.GraphicsPath path = new System.Drawing.Drawing2D.GraphicsPath();
path.AddEllipse(60, 60, 100, 100);
rgn.Exclude(path);
Graphics g = this.CreateGraphics();
g.FillRegion(Brushes.Blue, rgn); 
```

“rgn.Exclude(Path)”将帮助您绘制矩形，不包括其中的圆圈。

# javascript - 无法获取 div 样式的宽度或高度

> ID：13795341
> 
> 赞同：0
> 
> 时间：2012-12-10T05:13:59.613
> 
> 标签：javascript

我不知道为什么，但我无法设置画布的宽度和高度，并且不确定我做错了什么。

我创建这样的页面：

```
//create div
var d = document.createElement('div'); 
d.id = 'G';
d.className = 'GameOuput';  
document.getElementById('E').appendChild(d);    

var i = 1;
var c = document.createElement('canvas');
    c.id = 'layer' + i;
    c.className = 'c';
    c.style['z-index'] = i;

    document.getElementById('G').appendChild(c);  

    console.log(document.getElementById('G').style.width);  
    c.width = document.getElementById('G').style.width;
    c.height = document.getElementById('G').style.height; 
```

画布显示：

```
<canvas id="layer1" class="c" style="z-index: 1;" width="0" height="0"></canvas> 
```

`console.log(document.getElementById('G').style.width);`= 空白

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:17:46.327

尝试：

```
document.getElementById('G').offsetWidth; 
```

通常，一个元素的`offsetWidth`度量包括元素边框、元素水平填充、元素垂直滚动条（如果存在，如果呈现）和元素 CSS 宽度。

# javascript - Javascript 复制剪贴板功能，可在所有最新浏览器上完美运行

> ID：13795342
> 
> 赞同：0
> 
> 时间：2012-12-10T05:14:02.577
> 
> 标签：javascript, jquery

我有下面的复制剪贴板功能，它在最新的 Internet Explorer 和最新的 Firefox 上完美运行。

```
function copyToClipboardCrossbrowser(s) 
{           
        //s = document.getElementById(s).value;               

        if( window.clipboardData && clipboardData.setData )
        {
            clipboardData.setData("Text", s);
        }           
        else
        {
            // You have to sign the code to enable this or allow the action in about:config by changing
            //user_pref("signed.applets.codebase_principal_support", true);
            netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');

            var clip = Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);
            if (!clip) return;

            // create a transferable

            var trans = Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);
            if (!trans) return;

            // specify the data we wish to handle. Plaintext in this case.
            trans.addDataFlavor('text/unicode');

            // To get the data from the transferable we need two new objects
            var str = new Object();
            var len = new Object();

            var str = Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);

            str.data= s;        

            trans.setTransferData("text/unicode",str, str.data.length * 2);

            var clipid=Components.interfaces.nsIClipboard;              
            if (!clip) return false;
            clip.setData(trans,null,clipid.kGlobalClipboard);      
        }
} 
```

您能否建议我在上述功能中需要做哪些更改，以便在 safari 和歌剧中完美运行。

我知道如果我们使用 Flash 在这些浏览器上安装Shockwave 来获取复制的数据，是有办法的。我只是不想寻求闪存解决方案。

谢谢。

最好的问候， 马诺伊

# php - 带有输入框但没有来自的 PHP 链接

> ID：13795347
> 
> 赞同：0
> 
> 时间：2012-12-10T05:14:11.180
> 
> 标签：php, html

> **可能重复：**
> [在提交之前合并 $_GET 变量](https://stackoverflow.com/questions/13795129/combine-get-variables-before-submit)

我不确定这是否可能，但这是我无法弄清楚的问题。

我需要一种方法来拥有两个带有最小和最大价格的框以及一个将用户发送到这样的链接的按钮。其中A是最低价格，B是最高价格。

最终结果链接。

```
domain/index.php?a=price_range_A_B 
```

我不能使用 from 但我可以使用输入字段。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:22:47.513

使用此功能 onclick of button

```
 function value_change(){
    var a=document.getElementById('box1').value();
    var b=document.getElementById('box2').value();
     document.getElementById('linkdiv').innerHTML()="domain/index.php?a=price_range_"+A+"_"+B;
    } 
```

其中 box1 和 box2 分别是最高和最低价格的 id，linkdiv 是显示链接的 id od di

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T05:26:56.253

```
<input id="one" type="text" />
<input id="two" type="text" />
<input id="go" type="button" value="button"/> 
```

* * *

```
$("#go").click(function(){
    window.location = "http://google.com/a=price_range_" + $("#one").val() + '_' + $("#two").val();
});​ 
```

[http://jsfiddle.net/kTUu5/](http://jsfiddle.net/kTUu5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T05:27:06.993

您将需要使用 javascript 来执行此操作。在“提交”按钮/链接/任何点击操作中，获取字段的值并构造 url。然后根据您的需要将浏览器发送到那里，或者执行 ajax 请求。

例如。

```
<script>
  function doSubmit() {
    var fieldA = document.getElementById('fieldA'),
        fieldB = document.getElementById('fieldB'),
        valA = fieldA.value,
        valB = fieldB.value,
        url = "/index.php?a=price_range_" + valA + "_" + valB;

    window.location = url;
  }
</script>
<input id="fieldA" />
<input id="fieldB" />
<input type="button" onclick="doSubmit();" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T05:31:15.867

试试这个代码，

**HTML**

```
<div>
    Max: <input type="textbox" id="max" name="max" value="" />
    <br />
    Min: <input type="textbox" id="min" name="min" value="" />
    <br />
    <input type="button" name="btn" value="Submit"  onclick="sendData()"/>
</div> 
```

**Javascript**

```
function sendData(){
   var max = document.getElementById('max').value;
   var min = document.getElementById('min').value;
   if(!max || !min){
     alert('Enter max and min value');
     return false;
   }

   window.location = "http://domain/index.php?a=price_range_"+min+"_"+max;
}​ 
```

演示：http: [//jsfiddle.net/muthkum/FhY5a/](http://jsfiddle.net/muthkum/FhY5a/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T05:51:23.750

是的。如果您可以使用任何客户端脚本 Like`javascript`或“Jquery”，您就可以做到这一点。您必须在该提交按钮上绑定一个单击事件函数。因此，一旦您单击该按钮，它将调用一个函数，该函数获取这些输入框的值并准备一个 url 并将您发送到该位置。

例子：

```
 <input type="text" name="minPrice" id="min" value="" />
     <input type="text" name="maxPrice" id="max" value="" />
     <button type="button" name="Submit" onClick="doSubmit()">Submit</button> 
```

现在你的`doSubmit()`功能。

```
 function doSubmit(){

        var minPrice=document.getElementById('min').value;
        var maxPrice=document.getElementById('max').value;
        var location='domain/index.php?a=price_range_'+minPrice+'_'+maxprice+'';  
        window.location=location;       

     } 
```

现在在页面上，您可以像这样`index`轻松地分解变量`$_REQUEST['a']`

```
 $var=$_REQUEST['a'];
      $explodedVar=explode('_',$var);
      //print_r($explodedVar);
      $minPrice=$explodedVar[2];
      $maxPrice=$explodedvar[3]; 
```

# sql-server - 如何在 SQL Server 中透视这些数据？

> ID：13795349
> 
> 赞同：0
> 
> 时间：2012-12-10T05:14:15.447
> 
> 标签：sql-server, stored-procedures

我在下面有这个查询

```
select * from (
    SELECT tjdm.ID as id,  cjb.CORPORATE_ID, 
        tjdm.JOB_TICKET_VALUE, cjb.DISPLAY_NAME
        from Cjd cjb
        join Tjdm tjdm 
        on cjb.CUSTOM_JOB_DATA_ID = tjdm.CUSTOM_JOB_DATA_ID
        where cjb.CUSTOM_DATA_TYPE in (1,2) and cjb.DISPLAY_IS_ACTIVE = 1
    ) AS PivotData
PIVOT (
    max(JOB_TICKET_VALUE)
    FOR DISPLAY_NAME IN
        ([OMXAccount],[Consignee],[Col1],[Col2],[Col3],[Col4])
) AS PivotTable 
```

返回一个数据列，`select * from (.....)`如下所示。

```
id  CORPORATE_ID  JOB_TICKET_VALUE  DISPLAY_NAME
--  ------------  ----------------  ------------
53  1             9                 OMXAccount
53  1             199               Consignee
54  6             "No value"        OMXAccount
54  6             "No value"        Consignee
58  1             "No value"        OMXAccount
58  1             "No value"        Consignee 
```

但是当执行“PIVOT”语句时，我得到了这个结果。

```
id  CORPORATE_ID  OMXAccount  Consignee  [Col1]  [Col2]  [Col3]  [Col4]
--  ------------  ----------  ---------  ------  ------  ------  ------
53  1             9           199        Null    Null    Null    Null
54  6                                    Null    Null    Null    Null
58  1                                    Null    Null    Null    Null 
```

预期的输出应该如下所示。

```
id  CORPORATE_ID  OMXAccount  Consignee  [Col1]  [Col2]  [Col3]  [Col4]
--  ------------  ----------  ---------  ------  ------  ------  ------
53  1             OMXAccount  Consignee  Null    Null    Null    Null
54  6             OMXAccount  Consignee  Null    Null    Null    Null
58  1             OMXAccount  Consignee  Null    Null    Null    Null 
```

怎么了？

谢谢

RJuy

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:26:20.217

```
select * from (
    SELECT tjdm.ID as id,  cjb.CORPORATE_ID, 
        cjb.DISPLAY_NAME
        from Cjd cjb
        join Tjdm tjdm 
        on cjb.CUSTOM_JOB_DATA_ID = tjdm.CUSTOM_JOB_DATA_ID
        where cjb.CUSTOM_DATA_TYPE in (1,2) and cjb.DISPLAY_IS_ACTIVE = 1
    ) AS PivotData
PIVOT (
    max(DISPLAY_NAME)
    FOR DISPLAY_NAME IN
        ([OMXAccount],[Consignee],[Col1],[Col2],[Col3],[Col4])
) AS PivotTable 
```

# iphone - 导航到下一页 iphone 时显示白屏

> ID：13795353
> 
> 赞同：3
> 
> 时间：2012-12-10T05:14:34.687
> 
> 标签：iphone, cordova

当我尝试在我的 iPhone 上移动到下一页`window.open`时，我总是在加载下一页之前得到一个快速的白屏。我正在使用 jquery mobile 和 cordova 2.1。

我有两页。当我单击“下一步”按钮时，我使用下面的代码移至下一页：

```
function MovetoNextForm()
{
    window.open("nextpage.html");   
} 
```

它移动到下一页，但问题是在下一页出现之前，它显示白屏几秒钟（1-2 秒）。

我使用了这些包括：

```
<script src="cordova-2.2.0.js" type="text/javascript"></script>
<script src="jquery-1.8.2.min.js" type="text/javascript"></script>
<script src="jquery.mobile-1.2.0.min.js" type="text/javascript"></script> 
```

这是该问题的一些屏幕截图。

第一页 ：

![第一页](../Images/37309f0a036636b570804d96af4a6320.png)

白屏：

![白屏](../Images/073dad7ffbe95c3436f86bbe85542230.png)

第二页：

![第二页](../Images/f9747c435ae9598a04cd9f478594d3d1.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:19:56.187

您应该使用 $.mobile.changePage("pagename.html")。

您还应该阅读[http://jquerymobile.com/demos/1.2.0/docs/pages/page-anatomy.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-anatomy.html)以了解有关 jQuery Mobile 中的多页模板的更多信息。

亲切的问候，

# javascript - 使用 three.js 立方体使用多个纹理的验证

> ID：13795354
> 
> 赞同：5
> 
> 时间：2012-12-10T05:14:34.860
> 
> 标签：javascript, 3d, three.js

有人可以验证three.js r53的以下代码吗？

取自这个问题：[How to use multiple materials in a Three.js cube?](https://stackoverflow.com/questions/8820591/how-to-use-multiple-materials-in-a-three-js-cube)

我尝试了这段代码和一些变体，但没有看到可见的立方体。我的纹理图像按应有的名称命名。

```
var materials = [];

for (var i=0; i<6; i++) {
  var img = new Image();
  img.src = i + '.png';
  var tex = new THREE.Texture(img);
  img.tex = tex;

  img.onload = function() {
      this.tex.needsUpdate = true;
  };

  var mat = new THREE.MeshBasicMaterial({color: 0xffffff, map: tex});
  materials.push(mat);
}

var cubeGeo = new THREE.CubeGeometry(400, 400, 400, 1, 1, 1, materials);
var cube = new THREE.Mesh(cubeGeo, new THREE.MeshFaceMaterial()); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-10T13:32:55.287

改为这样做：

```
var cubeGeo = new THREE.BoxGeometry( 400, 400, 400, 1, 1, 1 );
var cube = new THREE.Mesh( cubeGeo, materials ); 
```

`materials`是一个包含 6 个three.js 材质的数组，每个面一个。

请参阅迁移指南：[https](https://github.com/mrdoob/three.js/wiki/Migration-Guide) ://github.com/mrdoob/three.js/wiki/Migration-Guide 。

编辑：`CubeGeometry`已重命名`BoxGeometry`并`THREE.MeshFaceMaterial`已弃用。

三.js r.92

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:57:09.880

THREE.CubeGeometry() 不支持材质列表。我也认为它是，但如果你检查当前的源代码......它没有

# c# - MVC @Html.Partial - 两种模型

> ID：13795357
> 
> 赞同：2
> 
> 时间：2012-12-10T05:14:53.950
> 
> 标签：c#, asp.net-mvc-3, razor, telerik-mvc

我正在尝试在视图中使用局部视图。第一个视图需要一个模型，而部分视图需要相同模型的 IEnumerable。我收到以下错误：

```
The model item passed into the dictionary is of type 'MyVDC.Models.LogBook', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1[MyVDC.Models.LogBook]'. 
```

在控制器中：

```
public ActionResult Create(string phn)
    {
        phn = MySession.Current.PHN;
        ViewBag.PHN = MySession.Current.PHN;
        LogBook logBook = new LogBook();
        try
        {
            logBook = db.LogBooks.Where(c => c.PHN == phn).OrderByDescending(x => x.Day).First();
        }
        catch
        {
            logBook.Day = DateTime.Now.Date;
            logBook.PHN = phn;
        }
        return View(logBook);
    } 
```

局部视图的第二个动作：

```
 public ActionResult Grid()
        {
            string phn = MySession.Current.PHN;
            return View(db.LogBooks.ToList().Where(c => c.PHN == phn));
        } 
```

第一种观点：

```
@model MyVDC.Models.LogBook
@{

}
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <input type="hidden" name="PHN" id="PHN" value="@ViewBag.PHN" />
    <fieldset>
        <legend>LogBook</legend>
        @(Html.Telerik().DatePicker()
            .Name("Day")

    )
        <p>
            <input type="submit" value="Start New Logbook" class="t-button" />
        </p>
    </fieldset>
}
<div>
</div>
     @Html.Partial("Grid") 
```

第二种观点：

```
@model IEnumerable<MyVDC.Models.LogBook>

@(Html.Telerik().Grid(Model)
        .Name("Grid")
        .Columns(columns =>
        {

            columns.Bound(o => o.Day).Format("{0:MM/dd/yyyy}").Width(120);
        })
        .DataBinding(dataBinding => dataBinding.Ajax().Select("Grid", "LogBook"))
        .Pageable()
        .Sortable()
        .Filterable()
) 
```

我会很感激你的建议。解决，见下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:32:37.953

我想通了，通过使用 ViewData 如下：在控制器中：

```
 ViewData["Log"] = db.LogBooks.ToList().Where(c => c.PHN == phn); 
```

在视图中：

```
@(Html.Telerik().Grid((IEnumerable<MyVDC.Models.LogBook>)ViewData["Log"]) 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:33:55.943

使用的问题`Html.Render`是与两个视图关联的类型需要相同。您可以使用`Html.RenderAction`而不是`Html.Render`. 当您使用这种方法时，与视图关联的类型无关紧要。你会想要这样的东西：

```
@{ Html.RenderAction("Grid"); } 
```

# android - webview不下载文件

> ID：13795364
> 
> 赞同：5
> 
> 时间：2012-12-10T05:15:31.953
> 
> 标签：android, android-layout

大家好，我做了一个应用程序，但我碰壁了。当您使用 Firefox 或 chrome 等桌面浏览器访问网站并单击下载链接时，它会开始下载文件，但是当我在我的 android 应用程序中打开使用 webview 显示该页面的同一页面并单击下载链接时，没有任何反应根本上，它只是坐在那里，就像它不知道如何处理该链接一样。如果你能帮助我，那将是一个巨大的帮助，让我重新回到正轨。

这是我在我的网站上用于 pdf 文件的下载链接：

```
<img src="images/Art1.jpg" width="80" height="166" /><a href="m2.pdf">Download</a> 
```

这是我的 android 应用程序的 main.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
    <WebView  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
    /> 
```

如果有人能帮助我指出正确的道路，我将不胜感激。

```
package com.jeffonlinelibrary;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.Window;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class WebPageLoader extends Activity
{
    final Activity activity = this;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
        setContentView(R.layout.main);
        WebView webView = (WebView) findViewById(R.id.webview);
        webView.getSettings().setJavaScriptEnabled(true);

        webView.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress)
            {
                activity.setTitle("Loading...");
                activity.setProgress(progress * 100);

                if(progress == 100)
                    activity.setTitle(R.string.app_name);
            }
        });

        webView.setWebViewClient(new WebViewClient() {
            @Override
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
            {
                // Handle the error
            }

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url)
            {
                view.loadUrl(url);
                return true;
            }
        });

        webView.setDownloadListener(new DownloadListener() {

            public void onDownloadStart(String url, String userAgent,
                    String contentDisposition, String mimetype,
                    long contentLength) {
                // handle download, here we use brower to download, also you can try other approach.
                Uri uri = Uri.parse(url);
                Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                startActivity(intent);
            }
        });

        webView.loadUrl("http://jeffonlinelibrary.comuv.com/jeffOnlinelibraryApp");
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T06:47:56.180

将 DownloadListener 设置为您的 WebView。并使用浏览器应用程序或[下载](http://developer.android.com/reference/android/app/DownloadManager.html)管理器下载文件。

```
 webview.setDownloadListener(new DownloadListener() {
        @Override
        public void onDownloadStart(String url, String userAgent,
                String contentDisposition, String mimetype,
                long contentLength) {
            // handle download, here we use brower to download, also you can try other approach.
            Uri uri = Uri.parse(url);
            Intent intent = new Intent(Intent.ACTION_VIEW, uri);
            startActivity(intent);
        }
    }); 
```

# java - 保存 SQL 查询并从上次查询结果中检索数据

> ID：13795367
> 
> 赞同：3
> 
> 时间：2012-12-10T05:15:32.627
> 
> 标签：java, database, postgresql, database-design

我正在设计一个数据库和一个 Java 应用程序来满足以下要求：
1\. 允许用户通过 API 查询数据库。
2\. 允许用户保存查询并通过'query-id'识别查询。然后，用户可以在下次调用 API 时传入“query-id”，这将执行与 id 关联的查询，但它只会检索上次请求特定查询的数据。
- 除此之外，我还需要保存每个 UserID 的查询 ID 信息。

有关数据库
的信息 选择的数据库是 PostgreSQL，用户请求的信息将存储在各种表中。

**我的问题：**关于如何实施要求 2 的任何建议/建议/提示？
是否有现有的设计模式、sql 查询、内置的 db 函数来说明如何保存查询并从最后返回的结果中从多个表中获取信息。

注意：
到目前为止，我最初的想法是将每个表中读取的最后一行（所有表中的每一行都有一个主键）存储到一个数据结构中，然后为每个保存的查询保存这个数据结构，并在检索数据时使用它再次。

为了存储用户和查询 ID 信息，我正在考虑创建一个单独的表来存储 UserName、UserUUID、SavedQuery、LastInfoRetrieved。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:31:39.460

这是一个相当大的问题。在这里使用的明显工具是准备好的语句，但由于这些是在首次运行时计划好的，因此在使用多个参数多次运行时可能会遇到问题。考虑差异，假设 id 介于 1 到 1000000 之间：

```
SELECT * FROM mytable WHERE id > 999900; 
```

和

```
SELECT * FROM mytable WHERE id > 10; 
```

第一个应该使用索引，而第二个应该对表进行物理顺序扫描。

第二种可能性是具有[返回 refcursors](http://www.postgresql.org/docs/9.1/static/plpgsql-cursors.html)的函数。这意味着查询实际上是在返回 refcursor 时运行的。

第三种可能性是有一个可以用于此的表模式，每个会话，保存结果。理想情况下，这些将是 pg_temp 中的临时表，但如果您必须跨会话保留，那可能不太理想。构建这样的解决方案需要更多的工作，并且会增加很多复杂性（阅读：*可能出错的事情*），因此它确实是最后的选择。

从您所说的来看，refcursors 听起来像是执行此操作的方式，但请记住 PostgreSQL 需要知道要返回的数据类型，因此您可能会在这方面遇到一些困难（在继续之前仔细阅读文档），以及准备好的语句是否得到你需要去的地方，那可能更简单。

# java - 如何使用 XStream 设置“，”而不是一些标签

> ID：13795371
> 
> 赞同：1
> 
> 时间：2012-12-10T05:16:01.487
> 
> 标签：java, xml, parsing, xstream

我有 Person 对象（例如），当我使用 XStream 将它们转换为 XML 文件时，它看起来像这样：

```
<person>
   <name>
      Bob
   </name>
   <accounts>
      <account>
         12345
      </account>
      <account>
         23456
      </account>
      <account>
         34567
      </account>
   </accounts>
</person> 
```

我想让它看起来像下一个文件：

```
<person>
   <name>
      Bob
   </name>
   <accounts>
         12345,
         23456,
         34567
   </accounts>
</person> 
```

请告诉我，如果我可以用 XStream 做到这一点。我该怎么做？

别名只能将一个标签替换为另一个标签。我曾尝试为此使用`registerLocalConverter`方法，覆盖 Converter 类中的 marshal 方法，并设置参数`(Person.class, "account", new PersonConverter());` ，但没有成功。如果我使用`registerConverter`(not `registerLocalConverter`) 方法，如何仅更改一个标签的 marshal 方法？

请帮我。谢谢！

# c# - 在 wpf 中合并 ResourceDictionary 的问题

> ID：13795372
> 
> 赞同：0
> 
> 时间：2012-12-10T05:16:14.340
> 
> 标签：c#, wpf, xaml

```
public partial class App : Application
    {
        public App()
        {
            switch (Thread.CurrentThread.CurrentCulture.ToString())
            {
                case "de-DE":
                    var German = new Uri("..\\GlobalString\\Dictionary_de-DE.xaml", UriKind.RelativeOrAbsolute);
                    Application.Current.Resources.MergedDictionaries.Add(new ResourceDictionary() { Source = German });
                    break;
                case "it-IT":
                    var Italy = new Uri("..\\GlobalString\\Dictionary_it-IT.xaml", UriKind.RelativeOrAbsolute);
                    Application.Current.Resources.MergedDictionaries.Add(new ResourceDictionary() { Source = Italy });
                    break;
                case "es-ES":
                    var Spanish = new Uri("..\\GlobalString\\Dictionary_es-ES.xaml", UriKind.RelativeOrAbsolute);
                    Application.Current.Resources.MergedDictionaries.Add(new ResourceDictionary() { Source = Spanish });
                    break;
                case "fr-FR":
                    var France = new Uri("..\\GlobalString\\Dictionary_fr-FR.xaml", UriKind.RelativeOrAbsolute);
                    Application.Current.Resources.MergedDictionaries.Add(new ResourceDictionary() { Source = France });
                    break;
                default:
                    var English = new Uri("..\\GlobalString\\Dictionary_de-DE.xaml", UriKind.RelativeOrAbsolute);
                    Application.Current.Resources.MergedDictionaries.Add(new ResourceDictionary() { Source = English });
                    break;
            }   
        }
    } 
```

首先我合并了所有字典，然后我尝试从字典中动态获取值，如下所示。但它显示错误（**未找到'MyString'资源**）。

```
 private void Window_Loaded(object sender, RoutedEventArgs e)
    {
      string StringFromDictionary= Application.Current.FindResource("MyString");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:21:07.780

对于英语，它显示 de-DE。你是复制粘贴的受害者吗？

不确定 WPF 但在 silverlight Application.Current.Resources["MyString"] 中有效。

除此之外，您还可以添加到 Application.Resources.MergedDictionaries 中，这样 Application.Resources.MergedDictionaries["My String"] 也可能对您有用。

也许 FindResource 只是寻找 Application.Current.Resources ？

[http://msdn.microsoft.com/en-us/library/system.windows.application.findresource(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.windows.application.findresource(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:23:27.250

*   我怀疑`Application.Current`它是否可以在`App`'s 构造函数中使用，因为`Application.Current`它应该最终成为`App`它自己。尝试`this.Resources.MergedDictionaries.Add`改用。
*   您的“App.xaml”中有什么东西吗？如果是这样，它将替换`App.Resources`并且您在构造函数中设置的所有内容都将丢失。

# visual-studio-2010 - 由于文件路径不正确，托管在 Dropbox 中的 XNA 项目无法构建

> ID：13795373
> 
> 赞同：0
> 
> 时间：2012-12-10T05:16:16.230
> 
> 标签：visual-studio-2010, xna, dropbox

我有一个 XNA 项目，它通过 Dropbox 帐户托管并与其他用户共享。当我尝试构建时，它失败并出现以下错误：

无法将文件“D:\Documents\Dropbox\Super Mario Limitless\SuperMarioLimitless\SuperMarioLimitless\bin\x86\Debug\Content\m_norm.xnb”复制到“bin\x86\Debug\m_norm.xnb”。找不到路径“D:\Documents\Dropbox\Super Mario Limitless\SuperMarioLimitless\SuperMarioLimitless\bin\x86\Debug\Content\m_norm.xnb”的一部分。

它似乎试图从另一台计算机的路径中提取一个文件，而这台计算机上显然不存在该文件。我已经（大致）将其追溯到 $(SolutionFolder)\SuperMarioLimitlessContent\obj\x86\Debug\ 中名为 ContentPipeline.xml 的文件

```
 <Item>
      <Source>m_norm.png</Source>
      <Name>m_norm</Name>
      <Importer>TextureImporter</Importer>
      <Processor>TextureProcessor</Processor>
      <Options>None</Options>
      <Output>D:\Documents\Dropbox\Super Mario Limitless\SuperMarioLimitless\SuperMarioLimitless\bin\x86\Debug\Content\m_norm.xnb</Output>
      <Time>2012-12-06T21:47:30-05:00</Time>
  </Item> 
```

现在，我可以改变自己的路径，这对我有用，但对他无效。我尝试将它们更改为相对路径，但似乎加载此文件的任何内容都不会解析相对路径，也不适用于 $(SolutionFolder) 或 $(ProjectFolder)，而是按字面解释它们。

有问题的两个内容文件都设置为“构建操作：编译”和“复制到输出目录：始终复制”。

那么，有没有办法解决这个问题，或者这是更深层次问题的迹象？

提前致谢。

# java - Scala：如何在有向图中查找并返回循环路径

> ID：13795376
> 
> 赞同：2
> 
> 时间：2012-12-10T05:16:31.170
> 
> 标签：java, algorithm, scala, graph, graph-algorithm

我在 Scala 中编写了一个函数来找出并返回有向图中的循环路径。程序如下，其中一个参数是相邻列表中呈现的图形，另一个是起始节点。它通过节点列表返回一对，包括循环路径。

我想知道有更优雅的方法可以做到这一点。如果您愿意，请分享您的想法。谢谢。

```
 def GetACycle(start: String, maps: Map[String, List[String]]): (Boolean, List[String]) = {
    def explore(node: String, visits: List[String]): (Boolean, List[String]) = {
      if (visits.contains(node)) (true, (visits.+:(node)).reverse)
      else {
        if (maps(node).isEmpty) (false, List())
        else {
          val id = maps(node).indexWhere(x => explore(x, visits.+:(node))._1)
          if (id.!=(-1))
            explore(maps(node)(id), visits.+:(node))
          else
            (false, List())
        }
      }
    }
    explore(start, List())
  } 
```

我觉得在这种情况下我必须使用 indexWhere，但我想它还有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:46:54.313

您应该使用数组来检查您是否已经访问过一个节点而不是`visits.contains(node)`，它会以恒定时间而不是线性时间为您提供答案。

你的算法的整体复杂性是指数级的。例如，如果您在此图上运行算法：

```
0 -> 1, 2, ..., n
1 -> 2, ..., n
... 
```

如果有`n`节点并且有从`i`到`j`iff的边，`i<j`那么该节点`i`将被探索`2^i`次数。

同样，您可以使用一个数组（所有节点一个数组）来解决这个问题，以确保每个节点最多被探索一次。

# ruby-on-rails - Rails 按条件查找

> ID：13795380
> 
> 赞同：0
> 
> 时间：2012-12-10T05:16:50.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.2

只是想知道是否有任何功能可以做到这一点：

```
MyModel.find_by_conditon(method_a - method_b > 0)
```

`MyModel.class`

```
定义方法_a
  next_service_date.to_i
结尾

定义方法_b
  last_service_date.to_i
结尾

```

```
def next_service_date
  service_date.present？? 计算时间估计：row_time_estimation
结尾
def 计算时间估计
  service_date + computed_service_period
结尾
def computed_service_period
      案例（服务频率周期）
      当'年'
        service_frequency_number.to_i.year
      当'月'
        service_frequency_number.to_i.month
      当'周'
        service_frequency_number.to_i.day * 7
      当'日'
        service_frequency_number.to_i.day
      结尾
结尾

```

`service_frequency_number`, `service_frequency_period`,`service_date`是 MyModel 的属性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:23:44.613

假设`method_a`and`method_b`实际上是属性，您可以执行以下操作：

```
MyModel.where('method_a - method_b > ?', 0) 
```

**编辑**

我认为您能够查询计算字段的唯一方法是将计算移至数据库，在那里您将有一个标量函数来返回结果。那你就可以了`MyModel.where('next_service_date_on_db(service_date) > 0')`。不幸的是，这会将您绑定到特定于数据库的实现，但是如果没有服务器端功能，您将无法以这种方式进行查询。

现在，如果您拥有整个集合，则可以根据这些条件进行过滤，但您必须加载整个集合。例如：

```
MyModel.all.select {|m| m.method_a - m.method_b > 0} 
```

`#all`返回所有对象的数组，并根据块的条件选择过滤器。不幸的是，该解决方案将所有记录加载到排序应用程序端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:20:56.083

不完全确定您要达到的目标.. 但您可能不得不求助于 SQL？

（什么是method_a和b？）

```
MyModel.where('? > 0', (method_a - method_b)) 
```

# sql - 从sql中的日期开始获取星期

> ID：13795386
> 
> 赞同：0
> 
> 时间：2012-12-10T05:17:25.377
> 
> 标签：sql, plsql

我想知道如何根据用户输入将一个月分成几个星期，比如从一个月的第一天或一周的第一周开始。

示例：如果用户想要基于每月 1 天的数据，即 2012 年 1 月 6 日，那么

2012 年 6 月 1/6-7/6 8/6-14/6 15/6-21/6 22/6-28/6 29/6-30/6

如果用户想要根据第一周，即 2012 年 4 月 6 日

2012 年 6 月 4-10 11-17 18-24
我认为这将是一个财政周

谁能告诉我我怎么能得到这个？

以及如何根据给定日期获得完整的一周

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:30:25.840

这可以给你一个想法，

```
declare
vdate date := sysdate;  
temp  Date;
begin
temp  :=  VDate;
WHILE last_day(temp) >=  vDate
LOOP
   dbms_output.put_line(to_char(vDate));
   vDate := vDate+7;
END LOOP;
end;

end; 
```

结果将从今天（2012 年 12 月 10 日）开始到本周的最后一天

```
 10-DEC-12
    17-DEC-12
    24-DEC-12
    ..... 
```

# c++ - 从 C++ 文件写入数据（点云库）

> ID：13795387
> 
> 赞同：0
> 
> 时间：2012-12-10T05:17:31.537
> 
> 标签：c++, depth, point-clouds, point-cloud-library

我正在使用点云库获取深度图，然后每秒左右将 PCD 文件写入内存，以便其他程序可以获取它。

我让程序使用可视化器正确渲染深度图，除了实际写入文件的一行外，它都可以正常工作。

这是我的代码：

```
 #include <pcl/io/openni_grabber.h>
 #include <iostream>
 #include <pcl/io/pcd_io.h>
 #include <pcl/visualization/cloud_viewer.h>

 class SimpleOpenNIViewer
 {
   public:
     SimpleOpenNIViewer () : viewer ("PCL OpenNI Viewer") {}

     void cloud_cb_ (const pcl::PointCloud<pcl::PointXYZ>::ConstPtr &cloud)
     {
       if (!viewer.wasStopped())
         viewer.showCloud (cloud);
         //this is the line to write the file.
         //I am not sure it is the correct location.
         pcl::io::savePCDFileASCII ("test_pcd_here.pcd", cloud);
     }

     void run ()
     {
       pcl::Grabber* interface = new pcl::OpenNIGrabber();

       boost::function<void (const pcl::PointCloud<pcl::PointXYZ>::ConstPtr&)> f =
         boost::bind (&SimpleOpenNIViewer::cloud_cb_, this, _1);

       interface->registerCallback (f);

       interface->start ();

       while (!viewer.wasStopped())
       {
         boost::this_thread::sleep (boost::posix_time::seconds (1));
       }

       interface->stop ();
     }

     pcl::visualization::CloudViewer viewer;
 };

 int main ()
 {
   SimpleOpenNIViewer v;
   v.run ();
   return 0;
 } 
```

这是我在尝试 cmake 文件时遇到的错误：

```
/home/patrick/Desktop/kinect/grabber/openni_grabber.cpp: In member function ‘void SimpleOpenNIViewer::cloud_cb_(const ConstPtr&)’:
/home/patrick/Desktop/kinect/grabber/openni_grabber.cpp:15:59: error: no matching function for call to ‘savePCDFileASCII(const char [18], const ConstPtr&)’
/home/patrick/Desktop/kinect/grabber/openni_grabber.cpp:15:59: note: candidate is:
/usr/include/pcl-1.6/pcl/io/pcd_io.h:704:5: note: template<class PointT> int pcl::io::savePCDFileASCII(const string&, const pcl::PointCloud<PointT>&)
make[2]: *** [CMakeFiles/openni_grabber.dir/openni_grabber.cpp.o] Error 1
make[1]: *** [CMakeFiles/openni_grabber.dir/all] Error 2
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:17:39.367

当您提供一个**指针**时，该`savePCDFileASCII()`函数需要一个 const 引用。您必须取消引用指针：`PointCloud`

 **```
pcl::io::savePCDFileASCII ("test_pcd_here.pcd", *cloud); 
```

请记住，您的回调函数会尽可能频繁地触发（每秒超过一次），因此您可能需要限制导出。更重要的是，如果您在其他程序正在读取数据（或相反）时尝试写入数据，则任何一个程序都可能崩溃（竞争条件），因此您需要某种形式的同步或直接通过其他程序流式传输 PointCloud表示（例如套接字或管道）。**

# python - numpy append_field 为具有 2d 形状的新字段提供形状错误

> ID：13795390
> 
> 赞同：5
> 
> 时间：2012-12-10T05:17:53.003
> 
> 标签：python, numpy

我有一个结构化的 numpy 数组，我想使用 recfunctions 库 [http://pyopengl.sourceforge.net/pydoc/numpy.lib.recfunctions.html](http://pyopengl.sourceforge.net/pydoc/numpy.lib.recfunctions.html) 函数 append_fields() 或 rec_append_fields() 附加一个具有某种形状的字段. 但是，我收到一个错误：

> ValueError：操作数无法与形状一起广播 (10) (10,3)

其中`10`是我现有数组的长度，`(3,)`是我要附加的字段的形状。

例如：

```
import numpy as np
from numpy.lib.recfunctions import append_fields

my_structured_array = np.array(
    zip([0,1,2,3],[[4.3,3.2],[1.4,5.6],[6.,2.5],[4.5,5.4]]),
    dtype=[('id','int8'),('pos','2float16')]
    )
my_new_field = np.ones(
    len(my_structured_array),
    dtype='2int8'
    )
my_appended_array = append_fields(
    my_structured_array,
    'new',
    data=my_new_field
    ) 
```

> ValueError：操作数无法与形状一起广播 (4) (4,2)

有任何想法吗？我尝试制作`my_new_field`一个元组列表并将具有适当形状的 dtype 参数放入 append_fields()：

```
my_new_field = len(my_structured_array)*[(1,1)]

my_appended_array = append_fields(
    my_structured_array,
    'new',
    data=my_new_field,
    dtype='2int8'
    ) 
```

但是一旦它被转换为一个 numpy 数组，结果似乎是一样的。

当我使用 rec_append_fields() 而不是简单的 append_fields() 时，这一切似乎都没有改变

编辑：鉴于我的新字段与我的数组的形状不同，我想我想要的附加是不可能的，[@radicalbiscuit](https://stackoverflow.com/users/895755/radicalbiscuit)建议。

```
In : my_new_field.shape
Out: (4, 2)

In : my_structured_array.shape
Out: (4,) 
```

但是，我在数组中包含了一个形状与原始数组不同的原始字段来说明我的观点，即字段不必具有与结构化数组相同的形状。我怎样才能附加这样的字段？

```
In : my_structured_array['pos'].shape
Out: (4, 2)

In : my_new_field.shape
Out: (4, 2) 
```

我应该注意，对于我的应用程序，只要以后可以以某种方式更改形状，我就可以附加一个空字段。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T15:42:58.710

`append_fields()`确实要求两个数组的形状相同。话虽如此，正如您在 中所意识到的那样`my_structured_array`，numpy 确实支持子数组（即，字段本身可以是具有形状的数组）。

在您的情况下，我认为您可能不想`my_new_field`成为二维数组，而是成为具有`shape(my_structured_array)`dtype 元素的一维数组（形状），例如`dtype([('myfield', '<i8', (2,))])`. 例如，

```
import numpy as np
from numpy.lib.recfunctions import append_fields

my_structured_array = np.array(
    zip([0,1,2,3],[[4.3,3.2],[1.4,5.6],[6.,2.5],[4.5,5.4]]),
    dtype=[('id','int8'),('pos','2float16')]
    )

my_new_field = np.ones(
    len(my_structured_array),
    dtype=[('myfield', 'i8', 2)]
    )

my_appended_array = append_fields(
    my_structured_array,
    'new',
    data=my_new_field
    ) 
```

会产生，

```
>>> my_appended_array[0]
(0, [4.30078125, 3.19921875], ([1, 1],)) 
```

尽管数据类型`myfield`嵌套在 中，但稍有不便`new`，

```
>>> my_appended_array.dtype
dtype([('id', '|i1'), ('pos', '<f2', (2,)), ('new', [('myfield', '<i8', (2,))])]) 
```

然而，这很容易被强制删除，

```
>>> np.asarray(my_appended_array, dtype=[('id', '|i1'), ('pos', '<f2', (2,)), ('myfield', '<i8', (2,))])
array([(0, [4.30078125, 3.19921875], [0, 0]),
       (1, [1.400390625, 5.6015625], [0, 0]), (2, [6.0, 2.5], [0, 0]),
       (3, [4.5, 5.3984375], [0, 0])], 
      dtype=[('id', '|i1'), ('pos', '<f2', (2,)), ('myfield', '<i8', (2,))]) 
```

尽管如此，我们不得不重复`my_structured_array`这里的 dtype 有点不幸。虽然乍一看似乎`numpy.lib.recfunctions.flatten_descr`可以完成扁平化 dtype 的繁琐工作，但不幸的是，它提供了一个元组而不是`np.dtype`. 但是，将其输出强制到列表中可以解决此问题，

```
>>> np.dtype(list(np.lib.recfunctions.flatten_descr(my_appended_array.dtype)))
dtype([('id', '|i1'), ('pos', '<f2', (2,)), ('myfield', '<i8', (2,))]) 
```

这可以作为 dtype 传递给`np.asarray`，使事情对`my_structured_array.dtype`.

事实上，诸如此类的细微不一致会使处理记录阵列的工作变得一团糟。人们会觉得事情可以更加连贯地结合在一起。

*编辑：* 事实证明，该`np.lib.recfunctions.merge_arrays`功能更适合这种合并，

```
 >>> my_appended_array = merge_arrays([my_structured_array, my_new_field], flatten=True)
 array([(0, [4.30078125, 3.19921875], [1, 1]),
        (1, [1.400390625, 5.6015625], [1, 1]), (2, [6.0, 2.5], [1, 1]),
        (3, [4.5, 5.3984375], [1, 1])], 
       dtype=[('id', '|i1'), ('pos', '<f2', (2,)), ('myfield', '<i8', (2,))]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T06:48:35.340

`append_fields()`要求两个数组的形状相同，在这种情况下它们不是。打印出这两个数组将有助于它变得明显：

```
>>> my_structured_array
array([(0, [4.30078125, 3.19921875]), (1, [1.400390625, 5.6015625]),
       (2, [6.0, 2.5]), (3, [4.5, 5.3984375])], 
      dtype=[('id', '|i1'), ('pos', '<f2', (2,))])
>>> my_new_field
array([[1, 1],
       [1, 1],
       [1, 1],
       [1, 1]], dtype=int8) 
```

如您所见，`my_structured_array`它是一个长度为 4 的数组，其中每个元素是一个包含两个对象的元组，一个 int 和一个包含两个浮点数的列表。

`my_new_field`另一方面，它是一个长度为 4 的数组，其中每个元素都是两个整数的列表。这就像尝试添加苹果和橙子。

使您的阵列具有相同的形状，它们将加在一起。

# css - 使用 Bootstrap 进行 CSS 样式设置

> ID：13795393
> 
> 赞同：0
> 
> 时间：2012-12-10T05:18:04.180
> 
> 标签：css, twitter-bootstrap, css-position

我正在尝试在 Bootstrap-sass 环境中制作一个静态顶栏。问题：在保持响应的同时固定顶部栏。我已经阅读了关于继承和嵌套规则的 CSS 文档，但仍然不确定如何应用于这种情况。

现在，我的顶部栏固定在顶部，但没有响应。

**CSS**

```
.fixed_pos {
    position: fixed;
}

.flowing_body {
    margin-top: 100px;
} 
```

**引导 CSS**

```
// Reset utility classes due to specificity
[class*="span"].hide,
.row-fluid [class*="span"].hide {
  display: none;
}

[class*="span"].pull-right,
.row-fluid [class*="span"].pull-right {
  float: right;
} 
```

**HTML**

```
<div class="container-fluid">
    <div class="fixed_pos row-fluid">
      <div class="span9">//left long side of top bar</div>
      <div class="span3">//right long side of top bar</div>
    </div>
    <div class="row fluid flowing_body">
       <%= yield %>
    </div>
</div> 
```

这就是我尝试添加的响应功能： **CSS**

```
.row-fluid .fixed_pos {
    position: fixed;
} 
```

**HTML**

```
<div class="row-fluid"><!-- MENUS -->
  <div class="fixed_pos">
    //everything else the same
  </div>
</div> 
```

但随后顶部栏的尺寸缩小了，仍然没有响应。

我很感激这方面的任何帮助。这里有一个很好的参考，我尝试自己解决但还没有成功：[链接](https://stackoverflow.com/questions/9350818/fixed-sidebar-navigation-in-fluid-twitter-bootstrap-2-0)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T06:09:14.853

这就是我解决问题的方法：

**CSS**

```
.row-fluid .fixed_pos {
    position: fixed;
    width: 80%;
} 
```

**看法**

```
<div class="container-fluid">
    <!-- TOP BAR, FIXED -->
    <div class="row-fluid">
        <div class="fixed_pos">
        <!-- MENUS -->
            <div class="span12">
                <ul class="nav nav-tabs">
</appropriate endings..> 
```

最后，顶部栏是固定的并且是响应式的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:57:27.570

```
Add this code in bootstrap-responsive.css

@media (max-width: 979px){
.navbar-fixed-top, .navbar-fixed-bottom {position: fixed;}
.container-fluid{ margin-top:70px;}
} 
```

# c# - 在报表查看器中显示 Crystal Report Control

> ID：13795395
> 
> 赞同：0
> 
> 时间：2012-12-10T05:18:07.193
> 
> 标签：c#, windows, crystal-reports

我对 Crystal Report 很陌生。现在，我在我的 C# 窗口应用程序中使用了 Crystal Report。
首先，我添加了一个文本框控件并将所有边框设置为无。
然后我使用报表查看器来显示这个报表。
当我运行它时，它会这样显示。
![在此处输入图像描述](../Images/cdcb669ac43d9e271d8e745fabe8848b.png)

然后我点击这个文本框控件，报告显示如下
![在此处输入图像描述](../Images/6e8ccf6be5ccb0533458d497e3f2d492.png)

它显示了我的控制时间。
我不想向用户展示我的控制力有多高以及我的控制力有多长。
我想在任何时候都像第一张图片一样显示我的报告。
我怎么能表现得像第一张照片。
我应该使用哪些属性来正确显示。

带着敬意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:17:05.907

您是否将数据源绑定到报告文档？

# bing-api - 为必应搜索创建appid的步骤

> ID：13795396
> 
> 赞同：0
> 
> 时间：2012-12-10T05:18:08.790
> 
> 标签：bing-api

我真的被 bing search Api 困住了。在 bing 的开发者中心，我没有找到任何生成 Appid 的选项。实际上，我想通过 curl 使用 bing 的搜索功能。

当我尝试点击 Api 时，它显示以下错误：

计算机 test2001AppID 无法正常运行。请参考 HelpUrl 获取更多信息。http://msdn.microsoft.com/en-us/library/dd251042.aspx

数组（[SearchResponse] => 数组（[Query] => 数组（[SearchTerms] => 计算机测试）

```
 [Errors] => Array
            (
                [Error] => Array
                    (
                        [Code] => 2001
                        [Message] => AppID is not functioning properly. Please refer to the HelpUrl to get more information.
                        [HelpUrl] => http://msdn.microsoft.com/en-us/library/dd251042.aspx
                    )

            )

    )

[SearchResponse_attr] => Array
    (
        [xmlns] => http://schemas.microsoft.com/LiveSearch/2008/04/XML/element
        [Version] => 2.0
    ) 
```

)

请帮我。我认为它是一个错误的 Appid 错误消息所以请告诉我生成新 Appid 的步骤我在开发者中心找不到任何选项。

非常感谢提前...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T01:14:53.227

当我开始时，我遇到了同样的问题。Microsoft 不再允许您在未在 Azure 市场上提交应用的情况下添加应用 ID。他们现在使用一个安全密钥作为您的用户名和密码。

每月 5000 次查询是免费的 -> [http://datamarket.azure.com/dataset/bing/search](http://datamarket.azure.com/dataset/bing/search)。

阅读本指南以从旧 API 样式迁移到新样式 -> [http://www.bing.com/webmaster/content/developers/ADM_MIGRATION_GUIDE.docx](http://www.bing.com/webmaster/content/developers/ADM_MIGRATION_GUIDE.docx)

# objective-c - 如何从Objective C中的对象列表中获取数据

> ID：13795401
> 
> 赞同：-3
> 
> 时间：2012-12-10T05:18:26.610
> 
> 标签：objective-c

我是Objective C的初学者。

我想知道我们如何通过使用 for 循环从对象列表中获取数据[特定类的对象]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:26:21.557

I would use a loop. Here is the sample code to accomplish the problem

```
for(int itemIndex = 0;itemIndex < yourCollectionCount; itemIndex++){

    id myObject = yourCollection objectAtIndex:itemIndex]; //replace id  with your Collection Individual Item dataType

} 
```

or

If you know the index of item, then use

```
id myObject = yourCollection objectAtIndex:knownIndex]; //replace id  with your Collection Individual Item dataType 
```

# sql-server-2008 - 如何在截断表格时触发触发器？

> ID：13795408
> 
> 赞同：0
> 
> 时间：2012-12-10T05:19:16.607
> 
> 标签：sql-server-2008

我正在使用 MS SQL Server 2008。现在正在触发我的触发器，从我的主表中删除记录以从我的子表中删除相应的记录。现在我试图在我的主表上触发 truncate 触发器。可能吗？如果是，请帮助我找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:25:14.447

> `TRUNCATE TABLE` cannot activate a trigger because the operation does not log individual row deletions.

[Ref](http://msdn.microsoft.com/en-us/library/ms177570.aspx).

Suggest you perform an actual delete, and perform in batches if this was the original reason (i.e. locking) you used `TRUNCATE` instead of `DELETE`

# sencha-touch - 拉动刷新并列出列表页面上的分页重复记录

> ID：13795410
> 
> 赞同：2
> 
> 时间：2012-12-10T05:19:24.947
> 
> 标签：sencha-touch, refresh, duplicate-data

我是煎茶触摸的新手。我有一个列表页面，它使用 Ext.plugin.PullRefresh 和 Ext.plugin.ListPaging 插件刷新我的页面，但是我在拉刷新后出现重复项目的问题。

这是我的编码

~查看

成员列表.js

```
 Ext.define('bluebutton.view.BlueButton.MemberList', {
    extend: 'Ext.List',
    xtype: 'memberlistcard',
    requires: [
        'Ext.field.Select',
        'Ext.field.Search',
        'bluebutton.view.BlueButton.MemberDetail',
         'Ext.plugin.ListPaging',
        'Ext.plugin.PullRefresh'

    ],
    config: {
        iconCls: 'team1',
        title: 'Member List',
        styleHtmlContent: true,
        scrollable: 'vertical',

         store : { xclass : 'bluebutton.store.BlueButton.MemberList'},
        grouped: true,
        indexBar: true,
         limit: 5,
       plugins: [
                    { xclass: 'Ext.plugin.ListPaging',
                      autoPaging: true },
                    { xclass: 'Ext.plugin.PullRefresh' }
                ],

        id :'memberlist',
        items: [

            {
                xtype: 'toolbar',
                docked: 'top',

                items: [
                    {
                        xtype: 'selectfield',
                        name: 'gender',
                        cls: 'txtwhite',
                        options: [
                            { text: 'Active Member', value: 'both' },
                            { text: 'Delete Member', value: 'male' },
                            { text: 'Suspended Member', value: 'female' }
                        ]
                    },

                    { xtype: 'spacer' },

                    { xtype: 'searchfield' ,
                         itemId:'membersearch',
                         id :'membersearch'
                    }
                ]
            }
        ],
        emptyText: '<p class="no-search-results">No member record found matching that search</p>',
        itemTpl: Ext.create(
            'Ext.XTemplate',
            '<div class="tweet-wrapper">',
                '<table>',
                    '<tr>',
                        '<td rowspan="2" width="1%">',
                        '   <img src="{imgUrl}" width="170" height="170" />',
                        '</td>',
                        '<td>',
                        '   <div class="tweet">',
                        '       <h2>{memberId}</h2>',
                         '      <h3>Name: {name}</h3>',
                        '       <h3>Age : {age}</h3>',
                        '       <h3>Address : {address}</h3>',
                        '       <h3>Point Avalaible : {pointAvalaible}</h3>',
                        '       <h3>Last Visited : {lastVisited}</h3>',
                        '   </div>',
                        '</td>',
                    '</tr>',
                '</table>',
            '</div>'

        ),

    },

}); 
```

~商店

成员列表.js

```
Ext.define('bluebutton.store.BlueButton.MemberList', {
extend: 'Ext.data.Store',

config: {
    grouper: {
        groupFn: function (record) {
            return record.get('name')[0];
        }
    },

    fields: ['memberId', 'name','age' ,'imgUrl','address','lastVisited','pointAvalaible'],
      pageSize: 5,
       autoLoad: false,
        storeId :'memberlist',

    data: [{
        memberId: 'Kenny',
        name: 'Kenny Chow',
        imgUrl: '/bluebutton/resources/images/user3.png',
        age: '20',
        address:'The Business Centre , 61 Wellfield Road , Roath, Cardiff, CF24 3DG',
        pointAvalaible :'10',
        lastVisited: '26/11/2012, 11:52 AM',

    }, {
        memberId: 'Anthony',
        name: 'Anthony Tan',
        imgUrl: '/bluebutton/resources/images/user3.png',
        age: '21',
        address:'3 Edgar Buildings , George Street , Bath , England , BA1 2FJ',
        pointAvalaible :'44',
        lastVisited: '27/11/2012, 09:52 AM'
    },

    {
        memberId: 'Nicholas',
        name: 'Nicholas Chen',
        imgUrl: '/bluebutton/resources/images/user3.png',
        age: '22',
        address: '91 Western Road , Brighton ,East Sussex ,England ,BN1 2NW ',
        pointAvalaible :'30',
        lastVisited: '30/11/2012, 15:52 PM'
    },

    {
        memberId: 'Admin2',
        name: 'Admin2',
        imgUrl: '/bluebutton/resources/images/user3.png',
        age: '30',
        address: '50 Eestern Road , Brighton ,West Sussex ,England ,BN1 34W ',
        pointAvalaible :'120',
        lastVisited: '01/12/2012, 15:52 PM'
    },

     {
         memberId: 'User2',
         name: 'User2',
         imgUrl: '/bluebutton/resources/images/user3.png',
         age: '25',
          address:'Office 33 ,27 Colmore Row ,Birmingham, England ,B3 2EW',
             pointAvalaible :'32',

              lastVisited: '30/11/2012, 18:52 PM'
         }

    ]
    }
}); 
```

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:19:01.977

我也遇到过这个问题。我覆盖了 pullrefresh 中的刷新功能并添加了

```
刷新Fn(){
  Ext.getStore(storeid).load()
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T14:09:19.620

目前，您的商店无法确定刷新时哪些记录是新的。要解决此问题，您需要创建一个 Ext.data.Model 实例，其中定义了您的商店可以使用的 idProperty。创建后，将商店的“模型”属性设置为模型的名称。然后，当您的商店刷新时，它将能够查看哪些记录实际上是新的并且只插入这些记录。

删除商店配置中的“字段”属性并替换为：

```
model: 'bluebutton.model.BlueButton.MemberList' 
```

模型样本：

```
Ext.define('bluebutton.model.BlueButton.MemberList', {
extend: 'Ext.data.Model',
config: {
     idProperty: 'memberId',
     fields: ['memberId', 'name','age' ,'imgUrl','address','lastVisited','pointAvalaible']
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T10:45:36.460

我和你有同样的问题。这是一个奇怪的问题，因为我的应用程序曾经可以工作，并且有一天，它开始使用 pull to refresh 插件复制列表中的字段。

在数据存储中添加 idProperty 会导致 Pull to Refresh 插件的 onLatestFetched 函数中的刷新失败。我的调查似乎表明故障线路是：

```
oldRecord = oldRecords.getByKey(newRecord.getId()); 
```

newRecord.getId() 始终未定义，即使 newRecord 已正确填充。我通过以下方式修补此行解决了我的问题：

```
oldRecord = oldRecords.getByKey(newRecord.internalId;); 
```

这对我有用。不确定这是否真的是未来的证明，也不确定它是否适用于所有情况，但它可以帮助你。

# java - applicationContext.xml 中的 bean 声明

> ID：13795412
> 
> 赞同：4
> 
> 时间：2012-12-10T05:19:48.673
> 
> 标签：java, spring, hibernate, jsf-2, javabeans

**我对applicationContext.xml**中的类声明有疑问

 **在**applicationContext.xml**中我们是否需要指定应用程序中的所有类？例如，在我的小型 Web 应用程序中，我有一个**实体**类、**服务**类和**DAO**类。所以目前它被定义为

```
<!-- Beans Declaration -->
    <bean id="Employees"
        class="net.test.model.Employees" />

 <!-- User Service Declaration -->
    <bean id="
        EmployeeService" class="net.test.employees.service.EmployeeService">
        <property name="employeesDAO" ref="EmployeeDAOImpl" />
    </bean>

 <!-- User DAO Declaration -->
    <bean id="EmployeeDAO" class="net.test.employee.dao.EmployeeDAOImpl">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean> 
```

因此，如果我有多个实体、服务和 dao 类，我需要在 中提及所有这些类`applicationContext.xml`吗？

对此的任何见解都是非常可观的。

问候

更新 1

托管豆

```
@ManagedBean(name="empMB")
@Named
@Scope("request")
public class EmployeesManagedBean implements Serializable { 
```

我有注入注释

```
@Inject
EmployeesService employeesService; 
```

在EmployeesService中，我有类似的注释

```
@Named
public class EmployeesService implements IEmployeesService {

@Inject
EmployeesDAO employeesDAO;

@Override
public List<Employees> getEmployees() {
    return getEmployeesDAO().getEmployees();
} 
```

最后在 applicationContext.xml 我有

```
<context:component-scan base-package="net.test" /> 
```

现在的问题是当我运行我的应用程序时

```
java.lang.NullPointerException at
net.test.managed.bean.EmployeesManagedBean.getEmpList(EmployeesManagedBean.java:53) 
```

我做错了什么来获得**空指针异常**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T05:28:10.697

> 在 applicationContext.xml 中我们是否需要指定应用程序中的所有类？

不。声明像你这样的模型类`net.test.model.Employees`是没有意义的，除非你需要一个原型来使用，比如初始化它的值，但是你可以直接在类中这样做并实例化它。

> 因此，如果我有多个实体、服务和 dao 类，是否需要在 applicationContext.xml 中提及所有这些类？

正如我之前解释的，实体类没有。服务和 DAO 都可以，因为大多数时候您需要将 DAO 注入到服务中（这就是 DI 的重点）。但是当然，如​​果您创建了 3 个 DAO 并且希望将它们注入到您的 3 个服务中，那么请在您的 Spring XML Bean 定义文件（您所称的`applicationContext.xml`）中提及它们。

但有一件事，您可能希望使用[包扫描](http://static.springsource.org/spring/docs/3.1.3.RELEASE/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-scanning-autodetection)自动检测和[基于注释的配置](http://static.springsource.org/spring/docs/3.1.3.RELEASE/spring-framework-reference/htmlsingle/spring-framework-reference.html#expressions-beandef-annotation-based)来避免在您的 Bean 定义文件中写入所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T08:40:35.413

应用上下文中的bean声明是在应用容器中注册bean。

如果 bean 未注册，容器将无法依赖注入该类的任何实例，或将拦截器应用于该类的对象。

因此，除非任何任务（如拦截它或注入它，或者创建它的默认单例对象）不需要 bean 的引用，否则不需要在 applicationContext.xml 中声明它

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T05:23:05.993

理想情况下是的，另一种方法是使用[Spring Annotations](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s11.html)，这样您就不会在 xml 中添加多个条目。**

# ios - iOS用数组过滤数组

> ID：13795413
> 
> 赞同：2
> 
> 时间：2012-12-10T05:19:51.980
> 
> 标签：ios, nsarray, plist, nspredicate

我有一个字符串数组，我想将其用作从 plist 创建的另一个字典数组的过滤器。例如，如果我有一个看起来像这样的字典列表：

```
Key:      Value:
car1      audi
car2      bmw
car3      bmw
car4      audi
car5      jaguar 
```

我的字符串数组是“audi, jaguar”。我将如何对其进行编码，以便创建一个返回“car1、car4、car5”的新数组？希望这是有道理的。或者更好的是，我怎样才能遍历这个字典并根据一个值对其进行过滤，然后创建一个新的字典数组来使用。

代码：

```
-(void)plotStationAnnotations {

desiredDepartments = [[NSMutableArray alloc] init];

BOOL tvfrSwitchStatus = [[NSUserDefaults standardUserDefaults] boolForKey:@"tvfrSwitchStatus"];
BOOL hfdSwitchStatus =  [[NSUserDefaults standardUserDefaults] boolForKey:@"hfdSwitchStatus"];

if (tvfrSwitchStatus) {
    NSString *tvfr = @"TVF&R";
    [desiredDepartments addObject:tvfr];
}
if (hfdSwitchStatus) {
    NSString *hfd = @"HFD";
    [desiredDepartments addObject:hfd];
}

NSLog(@"Array 1 = %@", desiredDepartments);

NSString *path = [[NSBundle mainBundle] pathForResource:@"stationAnnotations" ofType:@"plist"];
NSMutableArray *anns = [[NSMutableArray alloc] initWithContentsOfFile:path];

NSMutableArray *newDictionaryArray = [NSMutableArray array];
for (NSDictionary *dictionary in anns) {
    for (NSString *string in desiredDepartments) {
        if ([dictionary allKeysForObject:string]) {
            [newDictionaryArray addObject:dictionary];
            break;
        }
    }
}

NSLog(@"Array = %@", keyMutableArray);

for (int i = 0; i < [keyMutableArray count]; i++) {

    float realLatitude = [[[keyMutableArray objectAtIndex:i] objectForKey:@"latitude"] floatValue];
    float realLongitude = [[[keyMutableArray objectAtIndex:i] objectForKey:@"longitude"] floatValue];

    StationAnnotations *myAnnotation = [[StationAnnotations alloc] init];
    CLLocationCoordinate2D theCoordinate;
    theCoordinate.latitude = realLatitude;
    theCoordinate.longitude = realLongitude;
    myAnnotation.coordinate = theCoordinate;
    myAnnotation.title = [[keyMutableArray objectAtIndex:i] objectForKey:@"station"];
    myAnnotation.subtitle = [[keyMutableArray objectAtIndex:i] objectForKey:@"department"];
    [mapView addAnnotation:myAnnotation];
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:27:19.107

可能是这样的

```
NSArray *array1;
if([array1 containsObject : someValue]) 
```

可以帮忙。someValue 可以是您想要检查它们是否存在于 array1 中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:01:27.507

您可以执行以下操作来按键过滤：

```
NSArray *keysToLookFor = [NSArray arrayWithObjects:@"car1", @"car4", @"car5", nil];
NSArray *foundObjects = [dictionary objectsForKeys:keysToLookFor notFoundMarker:nil]; 
```

或者像这样按值过滤的东西：

```
NSString *valueToLookFor = @"Audi";
NSArray *keyArray = [dictionary allKeysForObject:valueToLookFor];

// To filter by multiple values
NSArray *valuesToFilterBy = [NSArray arrayWithObjects:@"Bmw", @"Audi", nil];
NSMutableArray *keyMutableArray = [NSMutableArray array];
for (NSString *string in valuesToFilterBy) {
    [keyMutableArray addObjectsFromArray:[dictionary allKeysForObject:string]];
} 
```

更新了数组中字典的答案：

```
NSArray *dictionaryArray; // The array of dictionaries that you have
NSMutableArray *newDictionaryArray = [NSMutableArray array];
NSArray *valuesToFilterBy = [NSArray arrayWithObjects:@"Bmw", @"Audi", nil];
for (NSDictionary *dictionary in dictionaryArray) {
    for (NSString *string in valuesToFilterBy) {
        if ([dictionary allKeysForObject:string]) {
            [newDictionaryArray addObject:dictionary];
            break;
        }
    }
} 
```

# ruby-on-rails - 创建一个“动作”下拉框来决定表格的顺序

> ID：13795415
> 
> 赞同：0
> 
> 时间：2012-12-10T05:19:58.563
> 
> 标签：ruby-on-rails, ruby, select, drop-down-menu

我有一个索引页，其中有一个表格。我想要一个下拉框，它将显示订购表格的各种方式。像这样：

```
 '<%= f.select :order_by [service_date, Car_name, etc.]' 
```

我不确定要在我的控制器中放入什么才能读取下拉框中的值，然后提交新订单

```
#index_controller
def index
  @cars = Car.find(:all, :order => 'value of drop down box in here')
  @cars_available = Car.where(:available => true, :booked => false)

  respond_to do |format|
    format.html # index.html.erb
    format.json { render :json => @cars}
  end
end 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:36:04.657

它与任何其他**表单参数**一样工作：

```
# GET
def index
  @cars = Car.find(:all, :order => params[:car][:order_by])
  @cars_available = Car.where(:available => true, :booked => false)

  respond_to do |format|
    format.html # index.html.erb
    format.json { render :json => @cars}
  end
end 
```

`order_by`您应该在模型中定义一个实例方法`Car`以返回默认值：

```
def order_by
  "your default order_by" #will determine the default selected order_by on a form
end 
```

**PS**你需要这个方法，或者至少`attr_reader :order_by`或者`attr_accessor :order_by`，否则你会得到一个执行`f.select :order_by`

# c# - 初始化 C# DayOfWeek 枚举

> ID：13795417
> 
> 赞同：2
> 
> 时间：2012-12-10T05:20:33.627
> 
> 标签：c#, enums, initialization, dayofweek

根据[此处](http://msdn.microsoft.com/en-us/library/System.DayOfWeek.aspx)的 MSDN 文档，可以将 Enum 的每个成员强制转换为`Int`以获取相应的 0 索引值。但我想将一个`Int`从 0 到 6 的值转换为这个枚举。

这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T05:24:26.473

You can cast it in reverse:

```
int intValue = 1;
DayOfWeek dayOfWeek = (DayOfWeek)intValue; 
```

# r - 使用 R 的一个单元格中的多个值

> ID：13795421
> 
> 赞同：2
> 
> 时间：2012-12-10T05:20:41.823
> 
> 标签：r

假设有 2 个 data.frames，例如：

```
dat1 <- read.table("[path_dat1]", header=TRUE, sep=",")
    id   name  age
     1   Jack   21
     2  James   40

dat2 <- read.table("[path_dat2]", header=TRUE, sep=",")
    id      interests
     1       football
     1     basketball
     1         soccer
     2  pingpang ball 
```

如何将表 1 和表 2 加入到如下所示的 data.frame 中？

```
 id   name age                       interests
1  1   Jack  21  (football, basketball, soccer)
2  2  James  40                 (pingpang ball) 
```

如何以最简单的方式使用 plyr 加入这些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T05:35:53.923

我不能告诉你如何在 plyr 中解决这个问题，但可以在 base 中：

```
dat3 <- aggregate(interests~id, dat2, paste, collapse=",")
merge(dat1, dat3, "id") 
```

编辑：如果你真的想要括号，你可以使用：

```
ppaste <- function(x) paste0("(", gsub("^\\s+|\\s+$", "", paste(x, collapse = ",")), ")")
dat3 <- aggregate(interests~id, dat2, ppaste)
merge(dat1, dat3, "id") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T07:09:00.683

使用泰勒的例子：

```
dat1$interests <- ave(dat1$id, dat1$id, 
        FUN=function(x) paste(dat2[ dat2$id %in% x, "interests"], collapse=",") )
> dat1
  id   name age                     interests
1  1   Jack  21  football, basketball, soccer
2  2  James  40                 pingpang ball 
```

# sharepoint - 网站中的 Web 部件丢失

> ID：13795424
> 
> 赞同：0
> 
> 时间：2012-12-10T05:20:56.240
> 
> 标签：sharepoint, sharepoint-2007, moss, moss2007-security

我正在开发我的 sharePoint 2007(MOSS) 门户。我访问了一个站点并完成了我的调节器任务。一段时间后，当我检查网站页面中的 web 部件丢失时。整个页面是空的.. 虽然我只能在站点选项卡上看到导航链接.. 请让我知道这个问题已经发生了，我需要找到一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:32:15.833

页面发布了吗？您是否使用相同的用户帐户进行编辑/显示？尝试在 URL 末尾添加 ?contents=1 并查看这些部分是否实际在页面上。

还要检查日志 - 特别是 ULS 日志。

大卫·斯特林 davidmsterling.blogspot.com www.sterling-consulting.com

# php - 更改显示的 PHP 结果的更有效方式

> ID：13795425
> 
> 赞同：0
> 
> 时间：2012-12-10T05:20:58.853
> 
> 标签：php, ajax

我有一个 PHP 脚本，它在一个漂亮的网格中显示一堆数据库结果并将它们分页。

我试图弄清楚如何创建一种方法来使用下拉系统更改每页显示的结果数量，因此我开始使用 AJAX。

我有一个变量来确定要显示的项目数量，所以我所做的是我创建了更多的页面，这些页面具有完全相同的 PHP 代码，但该变量的编号不同。它做了它打算做的事情，但我不禁觉得我已经以可以想象的最低效的方式来做这件事，因为我必须使用不同的变量创建三个额外的页面。

如何改进？

这是php代码。我曾经将它放在页面本身中，但已将其移动到 ajax 查看的另一个文件中。

```
<?php

                //Add the file that connects to the database
                include("C://wamp/www/site/config.php");    
                //Selects which database to get the data from
                mysql_select_db("products");

                //Variables for pagination 

                $per_page = 24;                 
                // get the number of items that actually have Oven in their name
                $sql = "SELECT SUM(rowcount)
                        FROM (
                        SELECT COUNT(1) AS rowcount 
                        FROM brand1
                        WHERE description LIKE '%oven%' 
                        UNION ALL 
                        SELECT COUNT(1) 
                        FROM brand2
                        WHERE description LIKE '%oven%'
                        ) AS counts";
                $pages_query = mysql_query ($sql) ;
                //Ceil rounds up to the nearest number so that we don't get pages with decimals on the end
                $pages = ceil(mysql_result($pages_query, 0) / $per_page);

                //append a page=1,2,3 at the end of the URL to indicate which page the user is on

                //set : 1 so that if a person doesn't pick a page it automatically sets them on page 1.
                $page = (isset($_GET['page'])) ? (int)$_GET['page'] : 1;

                $start = ($page -1) * $per_page;

                //Selects which table to extract the data from
                $i = 0;
                $result = mysql_query("SELECT * FROM brand1 WHERE description LIKE '%oven%' UNION ALL SELECT * FROM brand2 WHERE description LIKE '%oven%' LIMIT $start, $per_page") ;
                $dyn_table = '<table border ="1" cellpadding ="10">';

                //create a variable to store the data in
                while($row = mysql_fetch_array($result))
                    {
                        //Variables to store vendors information, product number and image as retrieved from the database
                        $brand = $row["Brand"];
                        $model_number = $row["Model Number"];
                        $product_image = $row["Image"];

                        //Set up a loop that puts the information into a grid rather than a single line
                        if($i%4==0) //First number sets the column number
                            {
                                // Starts to draw the table. Adds the vendor name, the product number then breaks line to draw the image underneath the titles
                                $dyn_table .= '<tr><td>' .  $brand . " " . $model_number . '<br>' . $product_image .'</td>';
                            }   
                        else
                            {
                                //This line does the same thing, but once the first if condition hits 4, it jumps to this line to contine drawing.
                                $dyn_table .= '<td>' . $brand . " " . $model_number . '<br>' . $product_image . '</td>';
                            }
                        //Simply adds 1
                        $i++;
                    }
                    //Adds the ending of the table
                    $dyn_table .= '</tr></table>';

                    //Draws the table
                    echo $dyn_table;

                    //Set the pagination links at the bottom of the page
                    if ($pages >=1 && $page <= $pages)
                        {
                            for($x=1; $x<=$pages; $x++)
                                {
                                    echo ($x == $page) ? '<strong><a href ="?page='.$x.'">'.$x.'</a></strong> ' : '<a href ="?page='.$x.'">'.$x.'</a> ';
                                }
                        }
            ?> 
```

还有 AJAX（我刚刚从 W3 中拿了一个例子

```
 <script>
function loadXMLDoc()
{
    var xmlhttp;
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
    }
    xmlhttp.open("GET","http://localhost/site/products/ovens/products.php",true);
    xmlhttp.send();
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:26:49.513

By your description, I assume you have something like `page1.php`, `page2.php`...?

Make a `page.php`, read `$_GET['page']` to see which page you should be doing, and in HTML link to `page.php?page=2` and similar.

As Charles says, that's as much as I can offer with the level of detail you provide.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:48:19.680

在这里，有一个大胖无聊的答案。

您的代码*很好*，除了来自家庭的整个污点`mysql_`和史前手动 ajax 的东西。您的分页方法是可靠的，并遵循通常的模式，即找出您可能拥有多少页，然后根据该限制抓取当前页面的结果。你也有所有正确的验证点和点。

你是对的，这有点低效，但除非你有一个方便的地方来粘贴预先计算的最大结果数/最大页数，否则几乎没有办法解决它。你很可能已经有了一个。仔细检查您的数据库结构。您还应该确保您有适当的索引。是时候玩了[`EXPLAIN`](http://dev.mysql.com/doc/refman/5.0/en/explain.html)。

我唯一可以推荐的可能是无关的。看起来您可能需要[阅读数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)。您的表名（brand1、brand2）表明您可能有两个结构完全相同的表，唯一的区别是它们包含用于两个不同“品牌”的数据。这可以很容易地在一个表中完成，并将品牌添加为另一列。

# jquery - jQuery Mobile + Phonegap：页面标题和内容在转换完成后变为空白

> ID：13795428
> 
> 赞同：1
> 
> 时间：2012-12-10T05:21:03.900
> 
> 标签：jquery, ios, cordova

我有一个有一个奇怪问题的 phonegap (2.2.0) + jquery mobile (1.2.0) 应用程序。

我的应用中有一个页面，其中包含用于加载另一个页面的链接。在加载的页面上，我有一个后退按钮，单击该按钮后，用户将返回上一页。当我在 Web 浏览器中查看此交互时，它可以完美运行，并且不会引发任何错误。

但是，当我在 IOS 中查看时，一旦完成后退按钮过渡动画，页面内容和标题就会消失。我看到页面显示一闪而过，然后一切都变白了。同样，只有页眉和内容消失了。我在要返回的页面上的 pageshow 事件中放置了一个警报，并且该页面直到警报关闭后才变为空白。

更奇怪的是，如果我点击/点击页面的空白区域，内容会神奇地再次出现！我只是不明白。我尝试通过在页面容器上调用 .page() 和/或 .trigger('updatelayout') 来重新绘制页面，但它似乎什么也没做。

只有这个页面有这个问题。所有其他转换都可以正常工作，即使在出现空白页之后也是如此。

我已经有好几个小时无法解决这个问题了，因此非常感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:56:17.923

原来是一行 CSS 搞砸了。不久前我添加了一些 CSS 以减少过渡之间的闪烁。当我删除它时，一切正常。有问题的 CSS 是这样的：

```
.ui-page { -webkit-backface-visibility: hidden; } 
```

# windows-phone-8 - 在没有 sd 卡的 windows phone 8 上安装应用程序

> ID：13795432
> 
> 赞同：6
> 
> 时间：2012-12-10T05:21:38.110
> 
> 标签：windows-phone-8

好吧，当我搜索这个短语时，我会得到很多关于如何使用 SD 卡安装应用程序的链接，我没有 SD 卡，还有其他方法可以从 XAP 文件安装应用程序吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T07:50:54.510

截至目前，这是不可能的。如果您将 xap 下载到 SD 卡以外的任何其他内存，则必须先将其移动到 SD 卡，然后从那里安装。阅读这篇官方博客文章了解更多详情 - [http://blogs.windows.com/windows_phone/b/windowsphone/archive/2012/12/13/windows-phone-store-expands-adds-new-features.aspx](http://blogs.windows.com/windows_phone/b/windowsphone/archive/2012/12/13/windows-phone-store-expands-adds-new-features.aspx)

这是网站上引用的内容-

> Web Store 现在还支持通过 SD 卡安装应用程序，许多 Windows Phone 8 型号都支持。当蜂窝或 Wi-Fi 数据连接不可用时，此选项很有用。只需在应用程序的详细信息页面上查找“手动下载并安装”链接。单击以下载应用程序的安装或.xap 文件，然后可以将其复制到手机的 SD 卡并安装。（有关分步说明，请参阅如何从 SD 卡安装应用程序？）

要从 SD 卡安装任何 xap，请阅读此博客文章 - [http://www.windowsphone.com/en-US/How-to/wp8/apps/how-do-i-install-apps-from-an-sd -卡片](http://www.windowsphone.com/en-US/How-to/wp8/apps/how-do-i-install-apps-from-an-sd-card)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T05:30:58.230

如果您的手机是开发人员解锁的，您可以使用随 Windows Phone SDK 提供的应用程序部署工具。[要开发者解锁手机，请在http://dev.windowsphone.com](http://dev.windowsphone.com)上注册您的 Microsoft 帐户（付费），下载 SDK，然后运行解锁工具。

如果这是一个企业应用程序，您还可以通过下载（通过网络）并安装它来旁加载该应用程序。您需要先对 XAP 进行代码签名，然后安装应用程序注册令牌才能使其正常工作。有关更多详细信息，请参阅此帖子：http: [//nicksnettravels.builttoroam.com/post/2012/12/03/Windows-Phone-8-SDK-Deploying-Multiple-Enterprise-Applications.aspx](http://nicksnettravels.builttoroam.com/post/2012/12/03/Windows-Phone-8-SDK-Deploying-Multiple-Enterprise-Applications.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-21T08:27:02.060

您可以免费注册[Windows Phone App Studio](http://apps.windowsstore.com/default.htm)，然后开发人员免费解锁它。

更多细节[在这里](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769508)。

# android - Android 编程中无法从 Fragment 切换到 Activity / Activity 到 Fragment

> ID：13795433
> 
> 赞同：2
> 
> 时间：2012-12-10T05:21:58.403
> 
> 标签：android, android-activity, hyperlink, switch-statement, fragment

目前，我主要使用 Fragments 连接到 Facebook。

但是，对于其他代码，我使用的是普通活动（无片段）。

我现在的问题是我希望有一个按钮可以从我的“主页”链接到片段，并从片段返回到我的“主页”

我无法这样做。

我尝试使用相同的代码在活动之间切换，但它不起作用。

有没有办法将正常活动链接到片段和反之亦然？还是它们只能相互链接？

这是我的代码：

```
 public class SplashFragment extends Fragment{

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle     savedInstanceState) {
    View view = inflater.inflate(R.layout.splash, container, false);
//   return view;

    Button btnNextScreen = (Button) view.findViewById(R.id.btnNextScreen);      
//    Button btnNextScreen = (Button) findViewById(R.id.btnNextScreen);

    //Listening to button event
    btnNextScreen.setOnClickListener(new View.OnClickListener() {

      public void onClick(View arg0) {
          //Starting a new Intent
          Intent nextScreen = new Intent(**getApplicationContext()**, SecondScreenActivity.class);
            startActivity(nextScreen);

}
});

 return view;   
}
} 
```

我在 getApplicationContext() 处遇到错误。

如果我将其更改为 getActivity()，他们将提示另一个错误，他们希望切换到 Fragment，而不是活动。

谢谢您的帮助 ！

问候， Android 学生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:26:14.223

use this getActivity() if u want to navigate from fragment to activity.

```
Intent nextScreen = new Intent(getActivity(), SecondScreenActivity.class);
startActivity(nextScreen); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T13:14:43.137

这样做：

```
Intent i = new Intent(getActivity(), activityname.class); 
i.putExtra("key", value);           
getActivity().startActivity(i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-26T14:17:50.107

就我而言，我也无法从片段中找到类，然后我编写了这段代码并且它可以工作；公共类用户配置文件扩展片段{

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    final View view = inflater.inflate(R.layout.fragment_userprofile, container, false);

    final ImageView iconoptions = view.findViewById(R.id.iconoptions);

    iconoptions.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
          startActivity(new Intent(getActivity(),com.example.miniproject. options.class));
        }
    });

    return view;
} 
```

}

# ios - PhoneGap www 中的本地图像路径在 iOS 5 上不起作用

> ID：13795434
> 
> 赞同：1
> 
> 时间：2012-12-10T05:22:09.060
> 
> 标签：ios, ios5, cordova, path, webkit

这适用于 iOS 6 而不是 iOS 5，所以我假设它是 webkit 的东西。

我的`www/images`文件夹中有一张图片，所以我使用以下 html：

```
<img src="images/img.gif" /> 
```

然而，图像显示为带有问号的蓝色方块（iOS 的*图像未找到*图像）。

**我怎样才能让这条路径同时在 iOS 5 和 iOS 6 上工作？**

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:44:09.173

我注意到同样的问题，相同的代码在本地浏览器和 iOS6 及更高版本中运行良好，但在 iOS4.3、5.0 或 5.1 中不显示图像。

对我有用的解决方案是改用背景图像并使用 CSS 对其进行样式设置，这也意味着您可以提供高分辨率视网膜图像并为非视网膜设备缩放它。

将您的 IMG 标签替换为：

```
<div id="myImage" /> 
```

在您的 CSS 文件中：

```
#myImage
{
    background-image:url("../../assets/images/img.gif"); // The relative path from your CSS file to your image
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size:cover;
    width:100px;  // Actual image size is 200px x 200px
    height:100px;
} 
```

CSS 文件中图像的相对路径似乎可以正常工作，但该路径必须相对于 css 文件而不是您的 html 文件。

如果您希望图像在非视网膜设备上显示 100 像素 x 100 像素的图像，您应该创建一个两倍大小（200 像素 x 200 像素）的图像，并在您的应用程序运行时让 background:cover 自动更改为更高分辨率在视网膜设备上。

# testing - 带有断言的 JUnit 测试方法

> ID：13795435
> 
> 赞同：0
> 
> 时间：2012-12-10T05:22:12.123
> 
> 标签：testing, junit, assertions

A 类中的 isSorted() 实例方法有一个 bug：

```
public class A {
private int[] a;
public A(int[] a) { this.a = a; }

/** Return true if this A object contains an array sorted
* in nondecreasing order; else false. */

  public boolean isSorted() {
    for(int i=1; i<a.length-1; i++) {
    if(a[i] < a[i-1]) return false;
    }
  return true;
  }
} 
```

编写一个 JUnit 测试方法 testIsSorted()，它会因为这个 bug 而失败，但当 bug 修复后会通过。（假设没有定义 setUp() 方法。）这是答案：

```
public void testIsSorted() {
int[] array = {2, 1};
A haha = new A(array);
assertFalse(haha.isSorted);
} 
```

首先，错误在哪里，我似乎无法找到它。其次，它不应该是 assertTrue(haha.isSorted) 因为当它的 assertFalse 它将通过，因为数组是按降序排列的，因此 isSorted 将返回 false 并且 assertFalse(false) 将返回 true where-as assertTrue(false) 将返回错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:18:02.000

错误已上线

```
for(int i=1; i<a.length-1; i++) { 
```

由于数组索引从 0 开始，所以定义`i`应该是`int i=0`，而不是`1`。索引`1`指向数组的第二个元素。

该`assertFalse`语句检查该`isSorted()`方法是否返回`false`给定数组`{2,1}`。该`isSorted()`方法检查没有条目小于前一个（相反，每个条目大于或等于前一个）。在示例中，它将返回`false`，因为`2`at index`0`大于`1`at index `1`。因此，`assertFalse`对于本案，这是正确的断言。

您也可以像这样进行测试（注意 的相反顺序`array`）。

```
public void testIsSorted() {
    int[] array = {1, 2};
    A haha = new A(array);
    assertTrue(haha.isSorted());
} 
```

# c - C解析功能不起作用

> ID：13795440
> 
> 赞同：0
> 
> 时间：2012-12-10T05:22:28.843
> 
> 标签：c, parsing, pointers, char

我正在尝试编写一个用于演示一些基本解析的程序，但 C 不是我的主要语言。这种方式存在问题，我正试图让它打印这个输出。

输出：FOO/4200、FOO、4200

假设显示组合，然后分别显示。

```
char *afterSeparator(char *complete)
{
    char *separator = strchr(complete, '/');
    if(slash) 
    {
    return separator + 1;
    }
    return complete;
}

char *beforeSeparator(char *complete)
{
    char *separator = strchr(complete, '/');
    if(separator)
    {
        *separator = '\0';
    }
    return complete;
void printParts(void)
{
    char original[] = "FOO/4200";
    char *preSeparator = beforeSeparator(original);
    char *postSeparator = afterSeparator(original);
    printf("%s, %s, %s\n", original, preSeparator, postSeparator);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:32:04.973

当你使用“beforeSeparator”时，你会用'\0'覆盖'/'。这将终止中间的字符串。当您生成“afterSeparator”时，字符串中不再有“/”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T05:32:21.620

先打电话`afterSeparator`后打电话`beforeSeparator`。

在所有你的订单应该是

1.  第一次打印原件
2.  调用 afterSeparator
3.  在分隔符之前调用
4.  打印 preSeparator & postSeparator

`beforeSeparator``/`用替换`\0`。因此，调用`afterSeparator`后调用`beforeSeparator`将不起作用。`original`调用后打印`beforeSeparator`也不会给出正确的结果，因为它只会`FOO`因为`\0`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:09:29.510

我已经为你做了一个样本。

```
#include<stdio.h>
#include<string.h>

int main()
{
char str[100] = "Hello/Jay";

printf("\n%s\n", strrchr(str, '/')+1);
str[strlen(str)-strlen(strchr(str, '/'))] = '\0';
printf("\n%s\n", str);

return 0;
} 
```

根据您的需要对其进行修改。

# c# - 为什么数据服务不返回值给应用程序，而是返回给浏览器？如何解决？

> ID：13795449
> 
> 赞同：1
> 
> 时间：2012-12-10T05:23:00.343
> 
> 标签：c#, web-services, odata

只需一个简单的 OData Web 服务：

```
public class TestService : DataService<ASUTBEntities>
{
    public static void InitializeService(DataServiceConfiguration config)
    {
        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;
        config.SetEntitySetAccessRule("*", EntitySetRights.AllRead
             | EntitySetRights.WriteMerge
             | EntitySetRights.WriteReplace);
        config.SetServiceOperationAccessRule("*", ServiceOperationRights.All);
        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;
    }

    [WebGet]
    public List<Search_Result1> FindCarOwner(string searchString)
    {
        List<Search_Result1> result = new List<Search_Result1>();
        result.AddRange(CurrentDataSource.FindContragents(searchString).ToList());
        return result;
    }
} 
```

Search_Result1 - 是一种复杂类型，由 EDMX 文件中的 Sql Server 存储过程自动生成。如果我在浏览器中输入如下内容： hxxp://MyWebService/Test.svc/FindCarOwner?searchString='SomeString' 。它返回如下内容：

```
<FindCarOwner xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices">
    <element xmlns:p2="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" p2:type="ASUTBModel.Search_Result1">
        <Name>
        Name of the company
        </Name>
        <ID p2:type="Edm.Int32">538175</ID>
    </element>
    ... and 3 elements more (total 4 elements)
</FindCarOwner> 
```

但是，如果我尝试从应用程序调用此函数，它会返回容量 = 4 且计数 = 0 的列表。我这样做：

```
ASUTBOData.ASUTBEntities context = new ASUTBOData.ASUTBEntities(new Uri(servicePath));
context.Credentials = System.Net.CredentialCache.DefaultCredentials;
context.MergeOption = MergeOption.NoTracking;
List<Search_Result1> preresult;
try
{
    preresult = context.Execute<Search_Result1>(new Uri("hxxp://MyWebService/Test.svc/FindCarOwner?searchString='SomeString'")).ToList();
}
catch (Exception e)
{
    return null;
} 
```

为什么应用程序无法转换接收到的值？它可以修复，还是我必须找到其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:54:45.100

数据服务客户端仅支持来自 Schema 的 EntityType 物化，如 OData 中所述（对我而言，它是 MyWebService/Test.svc/$metadata）。我能找到的唯一解决方案是使用 System.Net 中的 WebClient

```
WebClient wc = new WebClient();
wc.UseDefaultCredentials = true;

XDocument xdoc = XDocument.Parse(wc.DownloadString(new Uri(request)));
var res = xdoc.Root.Descendants( ((XNamespace)@"http://schemas.microsoft.com/ado/2007/08/dataservices") + 
                                            "element");

preresult = res.Select(xe => xe.Value).ToList(); 
```

# android - 无法在 Android Webview 中播放 Vimeo 或 Dailymotion 视频

> ID：13795462
> 
> 赞同：0
> 
> 时间：2012-12-10T05:25:08.000
> 
> 标签：android, android-webview, vimeo

我无法在 android webview 中播放 Vimeo 或 DailyMotion 视频。我仍然得到视频的缩略图和播放按钮。但是当我点击播放按钮时没有任何反应并且视频不播放。但是，我能够完美地播放 Youtube 视频。是Vimeo 或 Dailymotion 视频需要 Adob​​e Flash Player 插件吗？我也实现了 WebChromeClient。我正在 Android 4.1 设备上进行测试。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:05:36.420

最后，使用以下实现的代码，视频工作正常：

```
if (Build.VERSION.SDK_INT < 8) {
            contetView.getSettings().setPluginsEnabled(true);
        } else {
            contetView.getSettings().setPluginState(PluginState.ON);
        } 
```

# php - populate selectbox jquery using php array

> ID：13795465
> 
> 赞同：0
> 
> 时间：2012-12-10T05:25:25.300
> 
> 标签：php, jquery, mysql, arrays

i have a little question here... i have a PHP array like this..

```
Array
(
    [0] => Array
        (
            [idCustomer] => 2553
            [session] => 
            [noMobil] => 666
            [keterangan] => Sistem
            [tahun] => 2012
            [merk] => Sistem
        )

    [1] => Array
        (
            [idCustomer] => 2553
            [session] => 
            [noMobil] => 7777
            [keterangan] => hahahaha
            [tahun] => 2120
            [merk] => 
        )

) 
```

And i stored that array to `**$_SESSION[datamobil]**`.. and then my question is.. how to populate that array into selectbox using jquery.. so the select box is like this..

```
<select id='mobil' name='mobil'>
<option> - PILIH MOBIL - </option>
<option value='666'>666</option>
<option value='7777'>7777</option>
</select> 
```

and when i select **one** of that selectbox option.. it will populate the **detail** element... like this

```
selectbox : [-- 666 --] <-- the selectbox
- Detail -
keterangan : Sistem
tahun : 2012
merk : Sistem 
```

any one can help me?? thanks before

EDIT :

a code to get the array..

```
$query = "SELECT * FROM customer_car WHERE idCustomer = '$_SESSION[idCustomer]'";
        $go = $db->query($query);
        $mobil_array = array();
        while($car = $go->fetchAll(PDO::FETCH_ASSOC))
        {
            $mobil_array = $car;
        }
        $_SESSION[datamobil] = $mobil_array; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:49:29.670

您是否使用`jquery ajax`..来获取该数组？如果是.. 考虑将整个数组分配给一个变量`arrayvariable` ，因此在 jquery 端，您可以将代码指定为

```
var replacetext="<option value=''> - PILIH MOBIL - </option>";
for(var i=0; i<arrayvariable.length;i++)
{
 replacetext+="<option value='"+arrayvariable[i]+"'>"+arrayvariable['i']['noMobil']+"</option>";
}
$('#mobil').html(replacetext); 
```

您可以使用 jquery[更改](http://api.jquery.com/change/)事件。显示特定手机的详细信息..

**编辑**

在您的情况下，如果变量存储在 session.get 变量并在 php 中执行相同的 for 循环

```
$sesionvariable=$_SESSION[datamobil];
echo "<select id='mobil' name='mobil'><option> - PILIH MOBIL - </option>";
for ($i=0;$i<=count($sesionvariable);$i++)
{
echo "<option value='".$sesionvariable[$i]."'>".$sesionvariable[$i]['noMobil']."</option>";
}
echo "</select>"; 
```

并为该选择框使用 onload[更改](http://api.jquery.com/change/)事件。

希望这可以帮助..

# c# - How to get values from template fields in GridView?

> ID：13795468
> 
> 赞同：9
> 
> 时间：2012-12-10T05:25:35.820
> 
> 标签：c#, asp.net, excel, gridview, templatefield

This is my markup of GridView.

```
<Columns>
    <asp:TemplateField HeaderText="Customer Name">
        <ItemTemplate>
            <asp:Label ID="lblname" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "Customer.Name")%>'></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="PickUpPoint">
        <ItemTemplate>
            <asp:Label ID="lblPickUpPoint" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "Pickuppoint")%>'></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>
</Columns> 
```

I have a button which stores the values in the worksheet cells of excel object.

```
for (int i = 0; i < GridView2.Rows.Count; i++)
{
    for (int j = 0; j < GridView2.Rows[i].Cells.Count; j++)
    {
        xlWorkSheet.Cells[i + 1, j + 1] = GridView2.Rows[i].Cells[j].Text;
   }
} 
```

How do I get the values of GridView and store it in a worksheet, as the `GridView2.Rows[i].Cells[j]`.Text returns empty string.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T05:55:43.733

您缺少类型转换。像这样做-

```
Label name = (Label)GridView2.Rows[i].Cells[j].FindControl("lblname");
xlWorkSheet.Cells[i + 1, j + 1] = name.Text; 
```

**更新-如果您可以将标签命名为 Label0 和 Label1，那么在第二个 for 循环中**-****

 **```
for (int j = 0; j < GridView2.Rows[i].Cells.Count; j++)
  {
     Label xyz = (Label)GridView2.Rows[i].Cells[j].FindControl("Label"+j);
     xlWorkSheet.Cells[i + 1, j + 1] = xyz.Text;
  } 
```

对于标题文本-`string hText = GridView2.HeaderRow.Cells[your column number].Text;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T05:36:22.360

要检索值，请执行以下操作：

```
for (int i = 0; i < GridView2.Rows.Count; i++)
{
  //extract the TextBox values
  Label lblname= (Label)GridView2.Rows[i].Cells[0].FindControl("lblname");
  Label lblPickUpPoint= (Label)GridView2.Rows[i].Cells[0].FindControl("lblPickUpPoint");
  //Do your excel binding here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T06:10:04.180

`{cell}.Text`只有在`TemplateField`. 您已在模板中添加了一个标签，这就是您首先需要找到控件、将对象强制转换为控件并根据需要访问控件属性的原因。

如果您想要更通用的方法，您可以随时执行以下操作（删除标签控件并简单地添加评估字段）：

```
<Columns>
    <asp:TemplateField HeaderText="Customer Name">
        <ItemTemplate>
            <%# DataBinder.Eval(Container.DataItem, "Customer.Name")%>
        </ItemTemplate>
     </asp:TemplateField>
     <asp:TemplateField HeaderText="PickUpPoint">
         <ItemTemplate>
             <%# DataBinder.Eval(Container.DataItem, "Pickuppoint")%>
         </ItemTemplate>
     </asp:TemplateField>
</Columns> 
```

当您使用最初使用的代码时，`{cell}.Text`不应再返回空。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-09T11:49:10.730

尝试使用此代码，我遇到了类似的问题。我认为这段代码更具动态性，您不必每次都找到标签的名称。但是要保持控件之间的对应关系 和索引 Controls [ ]：

```
for (int row = 1; row <= totalRows; row++)
{
    for (int col = 0; col < totalCols; col++)
    {
        if (GridView1.Columns[col].Visible)
        {
            if (String.IsNullOrEmpty(GridView1.Rows[row - 1].Cells[col].Text))
            {
                if (GridView1.Rows[row - 1].Cells[col].Controls[1].GetType().ToString().Contains("Label"))
                {
                    Label LB = (Label)GridView1.Rows[row - 1].Cells[col].Controls[1];
                    workSheet.Cells[row + 1, col + 1].Value = LB.Text;
                }
                else if (GridView1.Rows[row - 1].Cells[col].Controls[1].GetType().ToString().Contains("LinkButton"))
                {
                    LinkButton LB = (LinkButton)GridView1.Rows[row - 1].Cells[col].Controls[1];
                    workSheet.Cells[row + 1, col + 1].Value = LB.Text;
                }
            }
            else
            {
                workSheet.Cells[row + 1, col + 1].Value = GridView1.Rows[row - 1].Cells[col].Text;
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-03T12:40:35.020

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        int i = 0;
        for (i = 0; i <= GvSchedule.Rows.Count - 1; i++)
        {
            if (((CheckBox)GvSchedule.Rows[i].FindControl("ChkIsService")).Checked)
            {
                string catName = ((Label)GvSchedule.Rows[i].FindControl("lblCatName")).Text;
                var subCatName = ((Label)GvSchedule.Rows[i].FindControl("lblSubCatName")).Text;
            }
        }
     } 
```**

# imagemagick - imagemagick identify gives "dyld: Library not loaded: /usr/local/lib/libtiff.3.dylib"

> ID：13795469
> 
> 赞同：6
> 
> 时间：2012-12-10T05:25:51.270
> 
> 标签：imagemagick, osx-mountain-lion, ghostscript

after brew install imagemagick and brew install ghostscript on osx when i run identify i get:

```
$ identify
dyld: Library not loaded: /usr/local/lib/libtiff.3.dylib
  Referenced from: /usr/local/bin/identify
  Reason: image not found
Trace/BPT trap: 5 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-10T05:25:51.270

this fixes it

```
ln -s /usr/local/Cellar/libtiff/3.9.5/lib/libtiff.3.dylib /usr/local/lib/libtiff.3.dylib 
```

thanks to rlaraujo on this link [https://github.com/mxcl/homebrew/issues/12099](https://github.com/mxcl/homebrew/issues/12099)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T08:53:13.810

我最近在 10.6.8 上遇到了同样的问题。我安装了 ImageMagick（从回来的路上），然后安装`freetype`并`ghostscript`开始出现故障。对我来说，修复只是升级 ImageMagick，它重建并链接到更新的`libtiff`和其他库。

```
brew upgrade imagemagick 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-19T07:12:26.377

`libpng`当我尝试对`convert`png 文件使用命令时，我遇到了与库类似的问题。

我首先尝试升级 imagemagick，但我拥有的当前版本的 brew 没有可用的升级。更新 brew 然后升级 ImageMagick 解决了这个问题。

```
brew update
brew upgrade imagemagick 
```

# git - 使用 git 分支的门控提交

> ID：13795479
> 
> 赞同：2
> 
> 时间：2012-12-10T05:26:20.467
> 
> 标签：git, continuous-integration

我正在研究为每个开发人员使用 git 分支设置门控提交工作流程，如下所示：

1.  每个开发人员都有自己的远程分支。
2.  开发人员只推送到他们的远程分支。
3.  CI 服务器单独构建每个分支，如果测试通过，则合并到 master。
4.  开发人员通过将他们的分支拉取并重新定位到 master 来接收更改。

这是一个合理的解决方案吗？我来自颠覆，对 git 没有太多经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T05:33:34.773

我认为这种方法通常是合理的。我会尽量不要将分支视为“远程”。这是颠覆的一部分。所有开发人员都有本地和远程（暂存）区域（'origin'），用于与实际的远程存储库同步。开发人员应该经常使用主分支提交、拉取、推送和重新定位（保持最新）。

有关工作流程的更多信息：[git branch、fork、fetch、merge、rebase 和 clone，有什么区别？](https://stackoverflow.com/questions/3329943/git-branch-fork-fetch-merge-rebase-and-clone-what-are-the-differences/9204499#9204499)

我的工作流程是：

*   拉最新的主人
*   做一个分支
*   做工作
*   提交更改到分支
*   获取最新的主人
*   合并master到分支
*   做更多的工作
*   提交更改到分支
*   获取最新的主人
*   合并master到分支
*   代码审查
*   切换到主
*   获取最新远程版本的远程主机
*   合并分支到master
*   将 master 推送到远程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:00:42.637

以我个人的经验，过去最适合我的团队的工作流程是让所有开发人员共享一个远程分支。对于我的团队，我们恰好称这个分支为“master”。我们的分支策略借鉴了这篇文章的想法：[a-successful-git-branching-model](http://nvie.com/posts/a-successful-git-branching-model/)。只需将文章中的“开发/主”分支与“主/发布”互换，您基本上就拥有了我的设置。都是一样的，只是标签不同而已。

我基本上让我们所有的开发人员都提交给 master，但增加了只提交合并的约定。所有直接编码都发生在主题分支上。对于只有一个变更集的快速修复，可以直接提交给 master。但总的来说，强烈鼓励使用本地主题分支。

此外，必须立即推送所有对 master 的提交，否则差异会累积并使其更难合并。通过这种方式，解决合并的负担是开发人员而不是团队负责人或某些自动化软件的责任。这是理想的情况，因为开发代码的人通常最了解自己的更改。

如果多个开发人员需要处理单个主题分支，我允许所有开发人员将他们自己的分支推送到特定路径下的远程（在我的情况下是“共享/”），以便其他人可以从中提取和推送。

至于测试服务器（CI 服务器），它会在每次测试运行时更新 master 和分支。在新分支上进行测试并不是绝对必要的，但是知道某些自动化脚本不能直接在 master 上运行，我会更舒服。

如果您来自 svn，在共享分支上不断发生小变化可能看起来有点可怕。不要害怕，git 通常非常擅长解决冲突，而且 90% 的时间`git merge`甚至`git pull`不会引发冲突。

最后，确保向开发人员灌输经常提交、经常拉取的习惯。小的增量更改实际上有助于 git 更好地合并代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T10:36:50.657

使用[Gerrit](https://code.google.com/p/gerrit/) - 它基本上是一个内置代码审查功能的门控提交解决方案。

# cuda - CUDA 上的单线程

> ID：13795483
> 
> 赞同：3
> 
> 时间：2012-12-10T05:26:31.683
> 
> 标签：cuda

我正在调用一个只有一个块且该块内只有一个线程的 CUDA 内核，例如

内核<<<1, 1>>>

这个内核是否只在指定的*单个*CUDA 内核上执行？例如，如果 GPU 有 128 个内核，那么 128 个内核中只有 1 个可以工作？

多谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T05:45:29.123

不。CUDA 是一种 SIMD 风格的架构，基本执行单元是一个*warp——*一组 32 个线程，它们在硬件上按锁步方式执行。如果您启动包含单个线程的单个块，则硬件将执行 32 个线程的单个 warp，其中 31 个被屏蔽并执行相当于 noops 流。任何给定的 warp 都在单个流式多处理器上执行，并且取决于您使用的硬件的生成，这可能涉及运行它的 SM 的 8、16 或 32 个内核。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T05:44:29.823

每个 CUDA 核心都是 SM 的 SIMD 中的一个通道。您的内核仅激活一个 SM 并使用其中一个通道。所以内核<<<1,1>>> 效率很低，只利用一个SM 的一个通道。

# android - Android: id never declared anywhere but exist?

> ID：13795488
> 
> 赞同：3
> 
> 时间：2012-12-10T05:27:03.850
> 
> 标签：android

I examine code example from FragmentBasics.zip

[http://developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)

There was this code (MainActivity.java):

```
ArticleFragment articleFrag = (ArticleFragment)
                getSupportFragmentManager().findFragmentById(R.id.article_fragment); 
```

But I never find ***article_fragment*** declared/set anywhere in the whole classes or layouts(xml) or values. Where does it come from??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:32:15.550

`R.id.article_fragment`布局在当前示例中用于大屏幕设备，您可以在里面找到这个布局`res/layout-large/news_articles.xml`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T05:33:25.850

检查项目中的 ArticleFragment 类。该类扩展了 Fragment，并且在该类中它们正在膨胀名为 article_view.xml 的 xml。

因此，基本上他们正在寻找扩展片段的那个类的 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T06:02:37.473

这是用于的 XML 代码`res\layout-large\news_articles.xml`：

```
<fragment android:name="com.example.android.fragments.HeadlinesFragment"
          android:id="@+id/headlines_fragment"
          android:layout_weight="1"
          android:layout_width="0dp"
          android:layout_height="match_parent" />

<fragment android:name="com.example.android.fragments.ArticleFragment"
          android:id="@+id/article_fragment"
          android:layout_weight="2"
          android:layout_width="0dp"
          android:layout_height="match_parent" /> 
```

`fragment`带有属性的`android:name="com.example.android.fragments.ArticleFragment`id 设置为：`@+id/article_fragment`

找到`article_fragment`正在使用的 id 的 JAVA 代码位于此方法的**第 55 行**`public void onArticleSelected(int position)`： . 它会检查您是否使用*双窗格布局*。这就是为什么顶部提到的 XML 文件位于文件夹中的原因`layout-large`（在示例中）。

# scala - 如何在 reify 子句中使用 Scala 宏中计算的类型？

> ID：13795490
> 
> 赞同：13
> 
> 时间：2012-12-10T05:27:12.057
> 
> 标签：scala, scala-2.10, scala-macros

我一直在使用 Scala 宏，并在宏中有以下代码：

```
 val fieldMemberType = fieldMember.typeSignatureIn(objectType) match {
      case NullaryMethodType(tpe)   => tpe
      case _                      => doesntCompile(s"$propertyName isn't a field, it must be another thing")
    }

    reify{
      new TypeBuilder() {
        type fieldType = fieldMemberType.type
      }
    } 
```

如您所见，我设法获得了一个`c.universe.Type fieldMemberType`. 这表示对象中某个字段的类型。一旦我明白了，我想`TypeBuilder`在 reify 中创建一个新对象。`TypeBuilder`是一个带有抽象参数的抽象类。这个抽象参数是`fieldType`。我希望这`fieldType`是我以前发现的类型。

运行此处显示的代码会返回一个`fieldMemberType not found`. 有什么方法可以让我`fieldMemberType`在 reify 子句中工作？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-10T11:09:34.153

问题是您传递给的代码`reify`基本上将逐字放置在宏被扩展的位置，并且在`fieldMemberType`那里没有任何意义。

在某些情况下，您可以使用`splice`将宏扩展时的表达式偷偷带入您正在具体化的代码中。例如，如果我们试图创建这个 trait 的一个实例：

```
trait Foo { def i: Int } 
```

并且在宏扩展时有这个变量：

```
val myInt = 10 
```

我们可以这样写：

```
reify { new Foo { def i = c.literal(myInt).splice } } 
```

这在这里行不通，这意味着您将不得不忘记漂亮的小事`reify`并手动写出 AST。不幸的是，你会发现这种情况经常发生。我的标准方法是启动一个新的 REPL 并输入如下内容：

```
import scala.reflect.runtime.universe._

trait TypeBuilder { type fieldType }

showRaw(reify(new TypeBuilder { type fieldType = String })) 
```

这将吐出几行 AST，然后您可以将其剪切并粘贴到宏定义中作为起点。然后你摆弄它，替换这样的东西：

```
Ident(TypeBuilder) 
```

有了这个：

```
Ident(newTypeName("TypeBuilder")) 
```

和`FINAL`，`Flag.FINAL`等等。我希望`toString`AST 类型的方法更准确地对应于构建它们所需的代码，但是您很快就会了解需要更改的内容。你最终会得到这样的东西：

```
c.Expr(
  Block(
    ClassDef(
      Modifiers(Flag.FINAL),
      anon,
      Nil,
      Template(
        Ident(newTypeName("TypeBuilder")) :: Nil,
        emptyValDef,
        List(
          constructor(c),
          TypeDef(
            Modifiers(),
            newTypeName("fieldType"),
            Nil,
            TypeTree(fieldMemberType)
          )
        )
      )
    ),
    Apply(Select(New(Ident(anon)), nme.CONSTRUCTOR), Nil)
  )
) 
```

`anon`您预先为匿名类创建的类型名称在哪里，并且`constructor`是我用来使这种事情不那么可怕的一种方便方法（您可以在[这个完整的工作示例](https://gist.github.com/4249936)的末尾找到它的定义）。

[现在，如果我们将这个表达式包装成这样](https://gist.github.com/4249936)的东西，我们可以编写以下内容：

```
scala> TypeMemberExample.builderWithType[String]
res0: TypeBuilder{type fieldType = String} = $1$$1@fb3f1f3 
```

所以它有效。我们采用了一个`c.universe.Type`（我从`WeakTypeTag`on 的类型参数中得到`builderWithType`它，但它与任何 old 的工作方式完全相同）并用它来定义我们特征`Type`的类型成员。`TypeBuilder`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-10T23:03:48.187

对于您的用例，有一种比树编写更简单的方法。事实上，我一直使用它来阻止树木，因为用树木进行编程真的很困难。我更喜欢计算类型并使用 reify 来生成树。这使得宏更加健壮和“卫生”并且编译时错误更少。IMO 使用树必须是最后的手段，仅适用于少数情况，例如树转换或元组等类型家族的泛型编程。

这里的技巧是定义一个函数作为类型参数，你想在 reify 主体中使用的类型，在 WeakTypeTag 上绑定一个上下文。然后，您可以通过显式传递 WeakTypeTags 来调用此函数，这要归功于上下文 WeakTypeTag 方法。

因此，在您的情况下，这将给出以下结果。

```
 val fieldMemberType: Type = fieldMember.typeSignatureIn(objectType) match {
      case NullaryMethodType(tpe)   => tpe
      case _                      => doesntCompile(s"$propertyName isn't a field, it must be            another thing")
  }

  def genRes[T: WeakTypeTag] = reify{
    new TypeBuilder() {
      type fieldType = T
    }
  }

  genRes(c.WeakTypeTag(fieldMemberType)) 
```

# java - 在 Java 中以最少的内存使用遍历许多文件

> ID：13795491
> 
> 赞同：4
> 
> 时间：2012-12-10T05:27:16.023
> 
> 标签：java, file, file-io, iterator, iteration

我需要遍历包含大约 2000 万个 Java 文件的目录层次结构。目前我正在使用[`FileUtils.iterateFiles`](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#iterateFiles)Apache Commons-IO。这似乎可以通过将整个列表加载到内存中来工作，这很慢（延迟应用程序启动时间）并且内存**很大**（大约 8GB）。我以前使用我自己的递归文件迭代器，它有同样的问题。

我一次只需要处理一个文件（或者，沿着轨道，并行处理列表前面的少数文件），因此浪费所有这些时间和内存将完整列表加载到内存中似乎有点不必要。

Java 的`Iterator`类允许我需要的那种最小内存占用的迭代器，但由于`java.io.File`该类的本机特性只提供急切初始化的数组，因此利用这些似乎非常困难。

有没有人对我如何遍历文件层次结构而不提前将其全部加载到内存有任何建议？

多亏了[这个答案](https://stackoverflow.com/a/10691278/1711188)，我现在知道了新的 Java 7 文件 API，我认为它可以解决我的问题，但在这个阶段，Java 7 对我来说并不是一个真正的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:41:55.600

由于 Java 7 NIO 不是一个选项，您可以执行“dir /B /AD”（对于 Windows）并从输出中读取文件名。如果需要，您可以将输出重定向到临时文件并从那里读取文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:21:45.300

好的，我最终实现了自己的迭代器来执行此操作（正如 Amir 建议的那样）。这不是微不足道的（尽管幸运的[是有人已经编写了代码来扁平化迭代器](http://langexplr.blogspot.com.au/2007/12/combining-iterators-in-java.html)），但相当简单

它仍然在内存中保存单个目录（没有后代）的完整列表，因此对于平面目录布局没有用（在这种情况下，我认为在 Java 7 之前使用纯 Java 是不走运的）但到目前为止它正在工作对我的用例来说好多了。

**`RecursiveFileIterable.java`**：

```
import java.io.File;
import java.io.FileFilter;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Iterator;
import java.util.List;

public class RecursiveFileIterable implements Iterable<File> {
    private File file;

    public RecursiveFileIterable(File f) {
        file = f;
    }

    public RecursiveFileIterable(String filename) {
        this(new File(filename));
    }

    private class DirectoriesOnlyFilter implements FileFilter {
        @Override
        public boolean accept(File pathname) {
            return pathname.isDirectory();
        }

    }

    private class NoDirectoriesFilter implements FileFilter {
        @Override
        public boolean accept(File pathname) {
            return !pathname.isDirectory();
        }
    }

    @Override
    public Iterator<File> iterator() {
        List<File> normFiles = Arrays.asList(file
                .listFiles(new NoDirectoriesFilter()));
        ArrayList<Iterable<File>> pendingIterables = new ArrayList<Iterable<File>>();
        pendingIterables.add(normFiles);

        File[] subdirs = file.listFiles(new DirectoriesOnlyFilter());
        for (File sd : subdirs)
            pendingIterables.add(new RecursiveFileIterable(sd));

        return new FlattenIterable<File>(pendingIterables).iterator();

    }

} 
```

**`FlattenIterable.java`**：

```
// from http://langexplr.blogspot.com.au/2007/12/combining-iterators-in-java.html

import java.util.Iterator;

public class FlattenIterable<T> implements Iterable<T> {
    private Iterable<Iterable<T>> iterable;

    public FlattenIterable(Iterable<Iterable<T>> iterable) {
        this.iterable = iterable;
    }

    public Iterator<T> iterator() {
        return new FlattenIterator<T>(iterable.iterator());
    }

    static class FlattenIterator<T> implements Iterator<T> {
        private Iterator<Iterable<T>> iterator;
        private Iterator<T> currentIterator;

        public FlattenIterator(Iterator<Iterable<T>> iterator) {
            this.iterator = iterator;
            currentIterator = null;
        }

        public boolean hasNext() {
            boolean hasNext = true;
            if (currentIterator == null) {
                if (iterator.hasNext()) {
                    currentIterator = iterator.next().iterator();
                } else {
                    return false;
                }
            }

            while (!currentIterator.hasNext() && iterator.hasNext()) {
                currentIterator = iterator.next().iterator();
            }

            return currentIterator.hasNext();
        }

        public T next() {
            return currentIterator.next();
        }

        public void remove() {
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T07:05:22.127

我知道这不是您问题的严格答案，但是您能否不重新组织目录树以使用更多级别的目录，以便每个目录包含更少的文件？

# actionscript-3 - 从子元素访问选项卡导航器

> ID：13795495
> 
> 赞同：1
> 
> 时间：2012-12-10T05:27:33.100
> 
> 标签：actionscript-3, apache-flex, air, flex4.5

在我的主应用程序 mxml 中，我使用的是选项卡导航器，我可以通过以下代码在应用程序的任何位置访问该选项卡导航器。

```
mx.core.FlexGlobals.topLevelApplication.menuOption.selectedIndex=0; 
```

**现在我的问题是我在transactionUI**中使用了一个切换按钮栏， 它是选项卡导航器的子元素，我如何像上面提到的代码一样访问该元素？

**我的主要 mxml 选项卡导航器 ::**

```
<mx:TabNavigator   left="10" top="20" bottom="10" right="10" id="menuOption" >

    <ui1:homeUI label="Home" width="100%" height="100%" backgroundColor="#373737" chromeColor="#181818" contentBackgroundColor="#181818" color="#FDFDFD" /> 

    <ui1:transactionUI label="Transaction" width="100%" height="100%" backgroundColor="#373737"  />     

        <ui1:calanderUI label="Employee service" width="100%" height="100%"  horizontalCenter="0"  backgroundColor="#373737" chromeColor="#181818" contentBackgroundColor="#181818" color="#FDFDFD" />
        <ui1:ManagementUI label="Management" width="100%" height="100%" backgroundColor="#373737" chromeColor="#181818" contentBackgroundColor="#181818" color="#FDFDFD" />
        <ui1:reportUI label="Reports" width="100%" height="100%" backgroundColor="#373737" chromeColor="#181818" contentBackgroundColor="#181818" color="#FDFDFD" />

        <ui1:admin label="Admin" width="100%" height="100%" backgroundColor="#373737" chromeColor="#181818" contentBackgroundColor="#181818" color="#FDFDFD" />

    </mx:TabNavigator> 
```

**我在 transactionUI 中的切换栏**::

```
<s:NavigatorContent xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx" width="100%" height="100%"
                xmlns:ui="com.colan.*" xmlns:ui1="com.colan.ui.*"
                backgroundColor="#373737" chromeColor="#181818" 
                contentBackgroundColor="#181818" color="#FDFDFD">
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<fx:Script>
    <![CDATA[

        import mx.collections.*;
        import mx.core.*;
    ]]>
</fx:Script>
<mx:VBox horizontalAlign="center"  verticalAlign="middle" width="100%"  height="100%">

    <mx:HBox horizontalAlign="center"  verticalAlign="middle" width="100%"  height="15%" >

        <mx:ToggleButtonBar id="toggleButtonBar"
                            dataProvider="{viewStack}"    
                            selectedButtonTextStyleName="mySelectedButtonTextStyleName"
                            />

    </mx:HBox>
    <mx:HBox horizontalAlign="center"  verticalAlign="middle" width="100%"  height="85%" >

        <mx:ViewStack id="viewStack"                 
                      visible="{toggleButtonBar.selectedIndex > -1}" width="100%"  height="100%" >

            <ui1:transaction label="Transaction"/>
            <ui1:addClient label="Add  Client"/>
            <ui1:invoice label="Make invoice"/>
            <ui1:workCatalogue label="Work catalogue"/>
            <ui1:productCataloge label="Products Categories"/>

            <ui1:suppliers label="Offers"/>
            <ui1:calendarPlanUI label="Calendar"/>

        </mx:ViewStack>
    </mx:HBox>
</mx:VBox> 
```

请给我建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:56:07.933

FlexGlobals.topLevelApplication 旨在从其任何子屏幕访问主应用程序屏幕中的公共变量/函数。

例如.. 如果“transactionUI”NavigatorContent 的 ToggleButtonBar“calendarPlanUI”用于迁移到主应用程序“calanderUI”NavigatorContent。然后您可以立即提及它，就像

```
<ui1:calendarPlanUI label="Calendar" click="mx.core.FlexGlobals.topLevelApplication.menuOption.selectedIndex = '2'"/> 
```

但是，如果您有任何机会尝试这样的 toggleButtonBar

```
mx.core.FlexGlobals.topLevelApplication.toggleButtonBar.selectedIndex = 1; 
```

那么我想提一下，主应用程序的变量/函数/组件只能使用“topLevelApplication”访问。如果不创建 transactionUI 实例，您将无法在其他子屏幕/主应用程序中使用 toggleButtonBar。

# haskell - Haskell - 无法匹配预期的类型。帮助我理解问题

> ID：13795497
> 
> 赞同：0
> 
> 时间：2012-12-10T05:27:48.553
> 
> 标签：haskell

我有以下类型类实例：

```
type Scalar = Double
data Vector = Vector [Double] deriving (Show, Eq)

instance Num Vector where
  (+) (Vector xs) (Vector ys) = Vector (zipWith (+) xs ys)
  (-) (Vector xs) (Vector ys) = Vector (zipWith (-) xs ys)
  (*) (Vector xs) (Vector ys) = Vector (zipWith (*) xs ys)

instance Fractional Vector where
  (/) (Vector xs) (Vector ys) = Vector (zipWith (/) xs ys)

dot :: Vector -> Vector -> Vector
dot (Vector v1) (Vector v2) = sum $ v1 + v2 
```

然而 dot 方法不进行类型检查。我猜它不能使用 + 方法，即使它在 Vector 类上。

```
 No instance for (Num [Double])
      arising from a use of `+'
    Possible fix: add an instance declaration for (Num [Double])
    In the second argument of `($)', namely `v1 + v2'
    In the expression: sum $ v1 + v2
    In an equation for `dot':
        dot (Vector v1) (Vector v2) = sum $ v1 + v2 
```

编辑：嗯，这很尴尬。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:19:41.310

*（在数学上，我们通常不会像这样定义向量的乘法（或除法）——我们使用[叉积](http://mathworld.wolfram.com/CrossProduct.html)或点积来组合两个向量。）*

无论如何，如果您愿意，我们*可以*使用您的实例函数来定义点积：

```
dot :: Vector -> Vector -> Scalar
dot vector1 vector2 = let (Vector list3) = vector1 * vector2 in
   sum list3 
```

注意类型`Vector -> Vector -> Scalar`。结果类型是`Scalar`因为当您将相乘的条目相加时，只有一个数字，而不是一个充满数字的向量。这也意味着这两个参数`vector1`和`vector2`是向量，因此它们被写为`Vector somelist`.

我们使用`*`了 on`vector1`并且`vector2`它们的`Vector`构造函数仍然完好无损，因为我们不能将 Doubles 列表相乘。在您的原始代码中，您尝试添加（或相乘）双精度列表，但这是行不通的，因为您的实例仅定义向量的加法和乘法，而不是原始的 [Double]。

在`let`子句中，我采用了这个乘法的结果并将其与`Vector list3`. 这意味着这`list3` *是*一个双打列表，所以我可以使用`sum`它的功能；`sum`是在 Doubles 列表上定义的，但不是在向量上定义的，因此`sum`直接使用 on`vector1 * vector2`是行不通的。

例子：

```
> dot (Vector [1, 10, 100]) (Vector [1, 2, 3])
321.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T05:33:46.873

问题是在

```
dot :: Vector -> Vector -> Vector
dot (Vector v1) (Vector v2) = sum $ v1 + v2 
```

有错误的类型，而不是你想要的

```
dot :: Vector -> Vector -> Double
dot (Vector v1) (Vector v2) = sum $ zipWith (*) v1 v2 
```

另请注意，我将 更改`+`为 a`*`因为我假设您想要点积，或者

```
dot :: Vector -> Vector -> Double
dot v1 v2 = let Vector ls = v1 * v2 in sum ls 
```

它使用`Num`实例`Vector`

# cordova - 黑莓中的Phonegap地理定位

> ID：13795501
> 
> 赞同：0
> 
> 时间：2012-12-10T05:28:15.103
> 
> 标签：cordova, blackberry, geolocation

我正在黑莓中开发一个基于 phonegap 的应用程序。在此我正在访问当前位置的纬度和经度。如果位置服务已关闭，那么我该如何知道？我可以为获取当前位置或任何其他方式设置超时吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:08:19.707

是的，您可以，您实际上可以为通话设置最大年龄和超时

```
navigator.geolocation.getCurrentPosition(positionSuccess, positionError, { 
        enableHighAccuracy: true,
        maximumAge: 9000,
        timeout: 10000                  
    }); 
```

在这种情况下，最大年龄设置为 9 秒，超时设置为 10 秒

# parse-platform - Parse.com JS API 的“找不到对象”ACL 问题

> ID：13795502
> 
> 赞同：1
> 
> 时间：2012-12-10T05:28:14.613
> 
> 标签：parse-platform

我正在使用 Parse.com 以下列方式对“喜欢”活动进行建模。

```
Activity object has 4 attributes
type: "like", "share" etc
fromUser: pointer to user who is liking
toUser: pointer to object's creator
object: pointer to the object liked. 
```

在对象上设置 ACL 后，

当我尝试在其他人创建的对象上保存“喜欢”活动时，我收到“找不到对象”错误，我认为该错误与 ACL 相关。

在我创建的对象上保存“喜欢”活动时，一切都很好。

我建模此活动的方式有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-28T02:09:39.763

你的 Parse Object 是脏的。`revert()`在将其附加到另一个对象之前，请通过调用对象上的函数来清理它。

# python - 类变量不是静态的？

> ID：13795503
> 
> 赞同：1
> 
> 时间：2012-12-10T05:28:18.473
> 
> 标签：python

我的类“NodeCreate”中的类变量“adjList”有问题。似乎每当我附加到 adjList 时，它都会扩展到该类的所有对象，而不仅仅是我正在调用的对象。我想我从根本上误解了一些东西，但我不知道我应该做什么。如何附加到每个对象的 adjList？

代码：

```
import sys

class FileReader:

    edgeList = []

    def __init__(self, args):
        with open(args, 'r') as inFile:

            #get the node list
            self.nodeList = inFile.readline().strip().split()

            while 1:
                line = inFile.readline().strip()
                if not line:
                    break   

                self.edgeList.append(line)

class NodeCreate:

    adjList = []

    def __init__(self, name):
        self.name = name

def main():

    nodeObjDict = {}

    #read in nodes
    fr = FileReader(sys.argv[1])

    #make node objects
    for node in fr.nodeList:
        nodeObjDict[node] = NodeCreate(node)

    #make smaller items from edgeList
    for item in fr.edgeList:
        itemList = item.split()

        #add adjacent lists
        nodeObjDict[itemList[0]].adjList.append(itemList[1])
        print(nodeObjDict[itemList[0]].adjList)

if __name__ == "__main__":
    main() 
```

输入：

```
A B C D E F G
A B
A D
A F
B C
B G
C D 
```

我最终得到的打印输出类似于： ['B', 'D', 'F', 'C', 'G', 'D'] 即使对于 A.adjList。我期待的只是['B'，'D'，'F']。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:37:29.717

当您需要实例变量时，您正在使用类变量。基本上一个类变量是为一个类的所有对象设置的，而一个实例变量只为一个对象设置。

这是您的类，`adjList`它作为实例变量而不是类变量：

```
class NodeCreate:

    def __init__(self, name):
        self.name = name
        self.adjList = [] 
```

这是我之前写的一个答案，更详细地解释了它：[https ://stackoverflow.com/a/12924803/1460235](https://stackoverflow.com/a/12924803/1460235)

# python - 我如何在 django 中获取所有 url 参数

> ID：13795504
> 
> 赞同：-1
> 
> 时间：2012-12-10T05:28:23.637
> 
> 标签：python, django

我的 Django 视图中有下载链接，用户可以在其中下载 pdf 表单。但我还需要获取通过链接传递的所有 URL 参数。

我的意思是如果用户点击

`http://www.abc.com/download`然后将下载简单的pdf表格

但我使用点击

`http://www.abc.com/download?var1=20&var2=30&var3=40`

然后我需要获取这些参数及其名称并填写字段。

该参数可能会有所不同，因此我无法对视图中的内容进行硬编码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T05:31:59.327

```
def my_view(request):
    get_args = request.GET #dict of arguments from a get request (like your example)
    post_args = request.POST #dict of arguments from a post request
    all_args = requst.REQUEST #dict of arguments regardless of request type. 
```

编辑：根据您的评论，您一定是 python 新手。

### 以下是访问字典中项目的几种方法。

```
#This method will throw an exception if the key is not in the dict.
get_args['var1'] #represents the value for that key, in this case '20'

#This method will return None if the key is not in the dict.
get_args.get('var2') #represents the value for that key, in this case '30' 
```

或者你可以遍历字典：

```
for key,val in get_args.items():
    do_something(val) 
```

# android - Android - 视图在 ListView 滚动上丢失填充

> ID：13795505
> 
> 赞同：2
> 
> 时间：2012-12-10T05:28:29.543
> 
> 标签：android, android-ui

我有一个`TextView`

```
<TextView
    android:background="@drawable/myshape"
    android:padding="5dp"
    ... /> 
```

具有以下形状设置为背景：

```
<shape>
    <corners android:radius="4dp" />
    <solid android:color="#FFFAD6" />
</shape> 
```

显示`TextView`在`ListView`. 问题是填充在滚动时丢失了。当列表视图首次呈现时，它看起来很好：

![在此处输入图像描述](../Images/149a912672d10929723fdaa8771b06c5.png)

当列表来回滚动时，填充丢失：

![在此处输入图像描述](../Images/503e955956dffb5b428d3e7af210b4ca.png)

我错过了什么？

**编辑**这是代码：

```
public class MyArrayAdapter extends ArrayAdapter<MyBean> {

    private Context context;
    private List<MyBean> myBeans;

    public MyArrayAdapter(Context context, int resource, int textViewResourceId, List<MyBean> myBeans) {
        super(context, resource, textViewResourceId, myBeans);
        this.context = context;
        this.myBeans = myBeans;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;

        if (row == null) {
            LayoutInflater inflater = ((Activity) context).getLayoutInflater();
            row = inflater.inflate(R.layout.my_activity, parent, false);
        }

        MyBean bean = myBeans.get(position);
        setData(row, bean);
        return row;
    }

    private void setData(View layout, MyBean bean) {
        TextView dateHeader = (TextView) layout.findViewById(R.id.dateHeader);
        dateHeader.setText(bean.getDate());

        TextView textView1 = (TextView) layout.findViewById(R.id.box);
        textView1.setText("textView 1");

        TextView box = (TextView) layout.findViewById(R.id.box);
        box.setText(Html.fromHtml("<b>Foo</b><br><small>Bar</small>"));
        // etc..
    }
}

public class MyActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_activity);

        ListView listView = new ListView(this);
        setContentView(listView);
        ArrayAdapter<MyBean> arrayAdapter = new MyBeanArrayAdapter(
                this, R.layout.my_activity, R.id.dateHeader, getBeans());

        listView.setAdapter(arrayAdapter);
    }

} 
```

**更新**玩了之后，我发现这是因为文本被分成两行（使用`<br>`或`\n`）：

```
box.setText(Html.fromHtml("<b>Foo</b><br><small>Bar</small>"));
box.setText("Foo \n Bar"); 
```

当我删除`<br>`or`\n`时，`TextView`框保持其大小。

但是，我还没有解决方案。接受建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:30:46.903

我也遇到过类似的行为。当在列表适配器中查看回收时，布局参数似乎丢失了。我最终在我的适配器的**getView()**方法中设置了布局参数。您可以在 getView() 中尝试 setPadding (int left, int top, int right, int bottom) 并查看它是否解决了问题。

# java - 如何减少 Full GC 的数量？

> ID：13795509
> 
> 赞同：3
> 
> 时间：2012-12-10T05:29:17.320
> 
> 标签：java, performance, logging, garbage-collection, sun

我有一个 java 程序，可以下载信息并解析它，将结果存储在 MySQL 数据库中。可以多次启动，最多同时启动3次。

我发现服务器负载在某些时候变得非常高（> 10），虽然我仍然需要调整我的 MySQL 服务器，但我发现 java 程序正在停止或 GC 很多并且服务器正在磨到绝对停止.

在阅读了一些 GC[配置文章](http://randomlyrr.blogspot.com.au/2012/03/java-tuning-in-nutshell-part-1.html)之后，我使用以下参数来减少发生的完整 GC 扫描的数量（或至少阻止它们停止程序）：

```
-d64 
-Xms256m 
-Xmx256m 
-XX:PermSize=128m 
-XX:MaxPermSize=128m 
-server 
-XX:+PrintGCTimeStamps 
-Xloggc:/log/gc_$1_$2.log 
-XX:+UseConcMarkSweepGC 
-verbose:gc 
-XX:-UseAdaptiveSizePolicy 
```

但是，现在我在每次运行时都看到几乎恒定的 Full GC。这是日志的摘录：

```
1057.920: [Full GC 30851K->29270K(258880K), 0.1528210 secs]
1058.965: [Full GC 30303K->29297K(258880K), 0.2060580 secs]
1062.652: [Full GC 29839K->29353K(258880K), 0.2875420 secs]
1063.639: [Full GC 30894K->29356K(258880K), 0.1839510 secs]
1070.604: [Full GC 33956K->29262K(258880K), 0.3445180 secs]
1072.146: [Full GC 29770K->29262K(258880K), 0.2201660 secs]
1074.600: [Full GC 30295K->29321K(258880K), 0.1319390 secs]
1081.234: [Full GC 31373K->29293K(258880K), 0.1931140 secs]
1086.498: [Full GC 30591K->29347K(258880K), 0.2624270 secs] 
```

几乎每秒都有一次 Full GC。我是否选择了错误的参数，或者我可以使用其他什么来阻止这种情况？

**更新：**

这是运行的 gc 日志输出的前 10 分钟，带有`-XX:+PrintGCDetails`. 我也删了`-XX:-UseAdaptiveSizePolicy`

```
4.794: [GC 5.367: [ParNew: 34112K->4224K(38336K), 0.0814000 secs] 34112K->8605K(520064K), 0.0816920 secs] [Times: user=0.04 sys=0.03, real=0.65 secs] 
5.843: [GC 5.843: [ParNew: 38336K->4224K(38336K), 0.0371760 secs] 42717K->15987K(520064K), 0.0372770 secs] [Times: user=0.02 sys=0.01, real=0.04 secs] 
6.153: [GC 6.153: [ParNew: 38336K->4224K(38336K), 0.0333900 secs] 50099K->24554K(520064K), 0.0334970 secs] [Times: user=0.02 sys=0.02, real=0.04 secs] 
15.668: [GC 15.668: [ParNew: 38336K->4224K(38336K), 0.0471250 secs] 58666K->30766K(520064K), 0.0472230 secs] [Times: user=0.06 sys=0.00, real=0.05 secs] 
220.547: [Full GC (System) 220.548: [CMS: 26542K->31455K(481728K), 3.3996650 secs] 57025K->31455K(520064K), [CMS Perm : 20869K->20848K(131072K)], 3.3998940 secs] [Times: user=0.38 sys=0.05, real=3.40 secs] 
448.238: [Full GC (System) 448.264: [CMS: 31455K->31236K(481728K), 2.3479700 secs] 32783K->31236K(520064K), [CMS Perm : 20898K->20895K(131072K)], 2.5008180 secs] [Times: user=0.30 sys=0.03, real=2.53 secs] 
456.217: [Full GC (System) 456.217: [CMS: 31236K->31177K(481728K), 0.2216600 secs] 33856K->31177K(520064K), [CMS Perm : 20912K->20910K(131072K)], 0.2218030 secs] [Times: user=0.21 sys=0.00, real=0.22 secs] 
480.982: [Full GC (System) 480.982: [CMS: 31177K->31251K(481728K), 0.2026140 secs] 32586K->31251K(520064K), [CMS Perm : 20915K->20912K(131072K)], 0.2027550 secs] [Times: user=0.19 sys=0.00, real=0.20 secs] 
483.419: [Full GC (System) 483.419: [CMS: 31251K->31196K(481728K), 0.2436580 secs] 33189K->31196K(520064K), [CMS Perm : 20928K->20926K(131072K)], 0.2438080 secs] [Times: user=0.23 sys=0.00, real=0.24 secs] 
484.583: [Full GC (System) 484.583: [CMS: 31196K->31233K(481728K), 0.2706090 secs] 31842K->31233K(520064K), [CMS Perm : 20980K->20973K(131072K)], 0.2707580 secs] [Times: user=0.25 sys=0.01, real=0.27 secs] 
486.361: [Full GC (System) 486.424: [CMS: 31233K->31235K(481728K), 0.2614690 secs] 32866K->31235K(520064K), [CMS Perm : 20994K->20993K(131072K)], 0.2618060 secs] [Times: user=0.21 sys=0.02, real=0.33 secs] 
521.280: [Full GC (System) 521.280: [CMS: 31235K->31163K(481728K), 0.2190910 secs] 34502K->31163K(520064K), [CMS Perm : 21010K->21009K(131072K)], 0.2192190 secs] [Times: user=0.15 sys=0.00, real=0.22 secs] 
531.169: [Full GC (System) 531.169: [CMS: 31163K->29453K(481728K), 0.2923910 secs] 32492K->29453K(520064K), [CMS Perm : 21015K->20845K(131072K)], 0.2925890 secs] [Times: user=0.27 sys=0.01, real=0.29 secs] 
532.270: [Full GC (System) 532.271: [CMS: 29453K->29384K(481728K), 0.2542390 secs] 32073K->29384K(520064K), [CMS Perm : 20852K->20850K(131072K)], 0.2780520 secs] [Times: user=0.20 sys=0.01, real=0.28 secs] 
533.320: [Full GC (System) 533.321: [CMS: 29384K->29379K(481728K), 0.2429570 secs] 30030K->29379K(520064K), [CMS Perm : 20853K->20851K(131072K)], 0.2430970 secs] [Times: user=0.17 sys=0.00, real=0.24 secs] 
542.963: [Full GC (System) 542.963: [CMS: 29379K->29443K(481728K), 0.2208060 secs] 30708K->29443K(520064K), [CMS Perm : 20854K->20851K(131072K)], 0.2209180 secs] [Times: user=0.11 sys=0.01, real=0.22 secs] 
544.949: [Full GC (System) 544.949: [CMS: 29443K->29405K(481728K), 0.1397210 secs] 31382K->29405K(520064K), [CMS Perm : 20855K->20853K(131072K)], 1.0028950 secs] [Times: user=0.14 sys=0.00, real=1.00 secs] 
546.517: [Full GC (System) 546.517: [CMS: 29405K->29464K(481728K), 0.2366270 secs] 30051K->29464K(520064K), [CMS Perm : 20858K->20857K(131072K)], 0.2367790 secs] [Times: user=0.20 sys=0.00, real=0.23 secs] 
547.508: [Full GC (System) 547.508: [CMS: 29464K->29467K(481728K), 0.1974860 secs] 30756K->29467K(520064K), [CMS Perm : 20859K->20858K(131072K)], 0.1976260 secs] [Times: user=0.17 sys=0.01, real=0.19 secs] 
560.975: [Full GC (System) 560.975: [CMS: 29467K->29382K(481728K), 0.1750130 secs] 32092K->29382K(520064K), [CMS Perm : 20865K->20864K(131072K)], 0.1751500 secs] [Times: user=0.17 sys=0.00, real=0.17 secs] 
573.975: [Full GC (System) 573.975: [CMS: 29382K->29451K(481728K), 0.2862430 secs] 30711K->29451K(520064K), [CMS Perm : 20868K->20865K(131072K)], 0.2863970 secs] [Times: user=0.19 sys=0.00, real=0.28 secs] 
575.101: [Full GC (System) 575.101: [CMS: 29451K->29381K(481728K), 0.1325170 secs] 31390K->29381K(520064K), [CMS Perm : 20869K->20867K(131072K)], 0.1326370 secs] [Times: user=0.13 sys=0.00, real=0.14 secs] 
580.396: [Full GC (System) 580.396: [CMS: 29381K->29454K(481728K), 0.1913770 secs] 30709K->29454K(520064K), [CMS Perm : 20875K->20872K(131072K)], 0.1928260 secs] [Times: user=0.19 sys=0.00, real=0.19 secs] 
582.300: [Full GC (System) 582.300: [CMS: 29454K->29403K(481728K), 0.1238430 secs] 31392K->29403K(520064K), [CMS Perm : 20875K->20873K(131072K)], 0.1239580 secs] [Times: user=0.12 sys=0.00, real=0.13 secs] 
582.982: [Full GC (System) 582.982: [CMS: 29403K->29457K(481728K), 0.1238720 secs] 30049K->29457K(520064K), [CMS Perm : 20875K->20874K(131072K)], 0.1239860 secs] [Times: user=0.12 sys=0.00, real=0.13 secs] 
584.284: [Full GC (System) 584.284: [CMS: 29457K->29461K(481728K), 0.1820700 secs] 31431K->29461K(520064K), [CMS Perm : 20875K->20874K(131072K)], 0.1823370 secs] [Times: user=0.16 sys=0.01, real=0.18 secs] 
592.363: [Full GC (System) 592.364: [CMS: 29461K->29385K(481728K), 0.2151030 secs] 32081K->29385K(520064K), [CMS Perm : 20892K->20890K(131072K)], 0.2153350 secs] [Times: user=0.18 sys=0.02, real=0.22 secs] 
599.096: [Full GC (System) 599.096: [CMS: 29385K->29408K(481728K), 0.1319160 secs] 30713K->29408K(520064K), [CMS Perm : 20894K->20890K(131072K)], 0.1320350 secs] [Times: user=0.13 sys=0.00, real=0.14 secs] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:07:06.043

首先，用于`-XX:+PrintGCDetails`查看每个集合的完整 GC 统计信息。然后您应该计算***Live Data Set*的大小、*分配率*和*提升率***。这将告诉您是否需要更大的堆或您的例如。小根太小了。有关如何计算这些统计信息的提示，请参阅[Advanced JVM Tuning 。](https://oracleus.activeevents.com/connect/sessionDetail.ww?SESSION_ID=7236)获得这些统计数据后，您可以`-XX:InitialSurvivorRatio=3 -XX:SurvivorRatio=3 -XX:TargetSurvivorRatio=90`使用例如调整年轻一代和大小`-Xmn -Xmx -Xms`。将数字调整为您的分配/晋升率。

暂时不要使用`-XX:-UseAdaptiveSizePolicy`。此选项用于禁用自动 GC 人体工程学，以便您可以调整堆参数。但是如果你不知道你的应用程序的分配行为，那么这个参数将无济于事。此外，自适应大小策略仅对吞吐量收集器 ( `-XX:+UseParallelOldGC`) 启用。

此外，如果你想调整你的 GC 的吞吐量，你应该使用`-XX:+UseParallelOldGC`and eg `-XX:ParallelGCThreads=4`。这将启用多线程年轻/老一代 GC（前提是您在多核上运行）。

此外，使用 设置任期`-XX:MaxTenuringThreshold=15`并检查`-XX:+PrintTenuringDistribution`。

**更新：**

请查看日志，您是否也可以使用`-XX:+DisableExplicitGC`，因为`Full GC (System)`表示有人在呼叫`System.gc()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:47:44.827

内存很便宜，年轻一代比老一代 GC 便宜得多。

尝试 2 或 4 GB 堆...应该少得多的完整 GC（如果您的应用程序表现得足够好，则可能为 0）。一个parnew应该只需要几毫秒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T21:22:25.777

根据这些参数，您不应该因为老一代的空间不足而达到完整的 GC，因为老一代的容量应该超过 200MB，而您显然只使用了 30MB。

如果您使用 PrintGCDetails 标志，CMS 收集器可以为您提供有关正在发生的事情的更多信息。将此添加到您的参数中：`-XX:+PrintGCDetails`.

我的第一个想法是，您会认为完整的 GC 是由并发模式故障引起的。一些关于这些的阅读：

*   [什么是并发模式？](https://blogs.oracle.com/jonthecollector/entry/what_the_heck_s_a)
*   [如何减少java并发模式失败和过多gc](https://stackoverflow.com/questions/2918124/how-to-reduce-java-concurrent-mode-failure-and-excessive-gc)

**编辑：**

根据您详细的 GC 日志，以及一些进一步的研究，似乎当日志显示 Full GC (System) 时，它表示[显式 GC invocation](https://stackoverflow.com/questions/6626680/does-java-garbage-collection-log-entry-full-gc-system-mean-some-class-called)。如果您不自己调用它，也许您正在使用的库是？

那里的答案是指制作一个自定义运行时类，它可以帮助您追踪谁在调用 GC。在 Java 6 中执行此操作的一种方法是按照[这些说明](http://www.tedneward.com/files/Papers/BootClasspath/BootClasspath.pdf)将内容添加到您的引导类路径。

# php - PHP/HTML

> ID：13795511
> 
> 赞同：-1
> 
> 时间：2012-12-10T05:29:21.030
> 
> 标签：php, html, option

基本上我想这样做，所以当我将数据发布到 PHP 脚本时，它将使用选项 name="Name Here" 而不是使用里面的内容`<option></option>`作为它发布的数据。

```
<select name="color">
  <option value="4" name="4">Dark Red</option>
  <option>Dark Blue</option>
  <option>Dark Green</option>
  <option>Orange</option>
  <option>Purple</option>
</select> 
```

在这段代码中，当他们选择深红色作为颜色然后单击提交按钮时，我希望它发布 4，有人有什么想法吗？感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:31:34.710

使用只是`value`，不是`name`。你`name`在`select`元素中设置。

```
<select name="color">
  <option value="4">Dark Red</option>
  <option>Dark Blue</option>
  <option>Dark Green</option>
  <option>Orange</option>
  <option>Purple</option>
</select> 
```

提交后，如果选择“深红色”，`$_REQUEST['color']`则为`4`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:35:24.297

您应该在服务器端有一个阵列。就像是

```
colors = [
    1: "Value 1",
    2: "value 2"
] 
```

然后就拿一个

```
colors[POSTCOLOR]; 
```

我不是 php 大师，但这是正确的方法。

# java - 尝试访问java中另一个类中的整数时的空指针

> ID：13795512
> 
> 赞同：0
> 
> 时间：2012-12-10T05:29:27.510
> 
> 标签：java, nullpointerexception

我正在尝试制作一个简单的颜色处理程序，允许您更改窗口中框的颜色。我通过将一些预设颜色从文件中读取到我专门设置为包含这些值的类中来使用它们。我正在使用数组来包含所有预设值，当我尝试访问该数组的各个元素时，我不断收到空指针异常。这是我第一次尝试使用 java，所以我认为我犯了一个愚蠢的错误。这是我的代码：

```
package color.sampler;
import java.io.*;
import javax.swing.*;
import javax.swing.event.*;

public class ColorSampler extends JFrame
{
protected ColorFrame sampler;
public JList colorList;
protected colors [] listOfColors;

/**
 * @param args the command line arguments
 */
public static void main(String[] args) throws IOException 
{
    new ColorSampler("ColorSampler");
}
public ColorSampler(String title) throws IOException
{
    super(title);
    setBounds(100,100,300,300);
    addWindowListener(new WindowDestroyer());

    sampler = new ColorFrame();

    getContentPane().setLayout(null);

    getContentPane().add(sampler);

    sampler.setBounds(10,10,270,200);
    FileInputStream stream = new FileInputStream("C:\\java input\\input.txt");
    InputStreamReader reader;
    reader = new InputStreamReader(stream);
    StreamTokenizer tokens = new StreamTokenizer(reader);
    int numColors, counter;
    numColors = 11;
    counter = 0;
    listOfColors = new colors[numColors];
    while(tokens.nextToken() != tokens.TT_EOF)
    {
        listOfColors[counter].name = (String)tokens.sval; 
        tokens.nextToken();
        listOfColors[counter].r = (int)tokens.nval;
        System.out.println(listOfColors[counter].r);
        tokens.nextToken();
        listOfColors[counter].g = (int)tokens.nval;
        tokens.nextToken();
        listOfColors[counter].b = (int)tokens.nval;
        counter++;
    }
    stream.close();
    colorList = new JList();
    colorList.addListSelectionListener(new ListHandler());
    String colorString[];
    colorString = new String[numColors];
    for(counter = 0; counter < numColors; counter++)
    {
        colorString[counter] = listOfColors[counter].name;
    }
    colorList.setListData(colorString);
    getContentPane().add(colorList);
    setVisible(true);
    // TODO code application logic here
}
private class ListHandler implements ListSelectionListener
{

    @Override
    public void valueChanged(ListSelectionEvent e) 
    {
        if(e.getSource() == colorList)
        {
            if(!e.getValueIsAdjusting())
            {
                int i = colorList.getSelectedIndex();
                String s = (String) colorList.getSelectedValue();
                System.out.println("Position " + i + " selected: " + s);
            }
        }
    }

}
} 
```

以及我用来存储值的类：

```
public class colors 
{
public int r, g, b;
public String name;
public colors()
{
    r = 0;
    g = 0;
    b = 0;
    name = "bob";
}

} 
```

那么，当我尝试访问数组中第一个元素的名称时，我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:35:26.650

仅仅因为你这样做：

```
listOfColors = new colors[numColors]; 
```

并不意味着数组中有任何东西。实际上，此时，它是一个空值数组。在设置名称和颜色值之前，您需要为每个元素构造一个颜色对象。

顺便说一下，颜色的类名应该以大写开头：颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T05:35:33.327

我想您还需要初始化 listOfColors 数组的每个对象，将您的 while 循环更改为...

```
counter = 0;
listOfColors = new colors[numColors];
while(tokens.nextToken() != tokens.TT_EOF)
{
    listOfColors[counter] = new Colors();
    listOfColors[counter].name = (String)tokens.sval; 
    tokens.nextToken();
    listOfColors[counter].r = (int)tokens.nval;
    System.out.println(listOfColors[counter].r);
    tokens.nextToken();
    listOfColors[counter].g = (int)tokens.nval;
    tokens.nextToken();
    listOfColors[counter].b = (int)tokens.nval;
    counter++;
} 
```

# android - Web 服务不接受从 android 应用程序传递的值。有什么建议吗？

> ID：13795514
> 
> 赞同：1
> 
> 时间：2012-12-10T05:30:19.710
> 
> 标签：android, asp.net, .net, web-services, ksoap2

我试图将一个 int 值传递给 Web 服务并期待回复。但我只在网络服务上获得价值。我的意思是它不接受我的输入值。安卓代码如下：

```
 package com.example.fp1_webservicedropdown;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

import org.ksoap2.*;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.*;

public class MainActivity extends Activity {
    TextView result;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        result = (TextView) findViewById(R.id.textView2);

        final String NAMESPACE = "http://sample.com/";
        final String METHOD_NAME = "SayHello";
        final String SOAP_ACTION = "http://sample.com/SayHello";
        final String URL = "http://localip/HellowWorld/Service1.asmx";

        SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
        Request.addProperty("SayHello", "32");

        SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        soapEnvelope.dotNet = true;
        soapEnvelope.setOutputSoapObject(Request);

        AndroidHttpTransport aht = new AndroidHttpTransport(URL);
        try {
            aht.call(SOAP_ACTION, soapEnvelope);
            SoapPrimitive resultString = (SoapPrimitive) soapEnvelope
                    .getResponse();
            result.setText("The web service returned " + resultString);
            System.out.println(resultString);
        }

        catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

Web服务代码如下：

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.Services;

namespace HellowWorld
{
    [WebService(Namespace = "http://sample.com/")]
    public class Service1 : System.Web.Services.WebService
    {
        [WebMethod]
        public int SayHello(int a)
        {

            int t = 8 + a;
            return t;
        }
    }
} 
```

它只是返回当我通过 android 运行时，Web 服务返回 8。Insted 给予 Web 服务返回 40。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:33:39.447

Web 服务或 Web URL 是基于文本的格式。它不识别数据类型。它只接受文本..所以您必须作为字符串传递，并且必须从 Web 服务代码将其转换为 int。

在网络服务中使用它

```
public int SayHello(String abc)
        {
            // convert abc  to int
            int t = 8 + converted int;
            return t;
        } 
```

# asp.net-mvc - 向下移动表格：itextsharp

> ID：13795519
> 
> 赞同：0
> 
> 时间：2012-12-10T05:30:43.820
> 
> 标签：asp.net-mvc, asp.net-mvc-4, itextsharp

我正在使用 iTextSharp 生成 pdf。

我的代码是，

```
 public FileStreamResult Export(int ID)
    {
        MemoryStream stream = new MemoryStream();
        Document pdf = new Document();
        PdfWriter writer = PdfWriter.GetInstance(pdf, stream);
        pdf.Open();
        //code for table
        PdfPTable table = new PdfPTable(3);
        PdfPCell cell = new PdfPCell(new Phrase("Header spanning 3 columns"));
        cell.Colspan = 3;
        cell.HorizontalAlignment = 1;
        table.SpacingBefore = 100;   //not working
        table.SpacingAfter = 10;     //not working
        table.AddCell(cell);
        table.AddCell("Col 1 Row 1");
        table.AddCell("Col 2 Row 1");
        table.AddCell("Col 3 Row 1");
        table.AddCell("Col 1 Row 2");
        table.AddCell("Col 2 Row 2");
        table.AddCell("Col 3 Row 2");

        pdf.Add(table);

        pdf.Close();

        //code to download 
        Response.ContentType = "application/pdf";
        Response.AddHeader("content-disposition", "attachment;filename="+_child[0].Child_Name+".pdf");
        Response.Buffer = true;
        Response.Clear();
        Response.OutputStream.Write(stream.GetBuffer(), 0, stream.GetBuffer().Length);
        Response.OutputStream.Flush();
        Response.End();

        return new FileStreamResult(Response.OutputStream, "application/pdf");
    } 
```

该表显示在页面顶部。但我想把桌子移下来。我该怎么办？

请帮忙，

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-16T22:02:37.697

您只需`f`在固定值的末尾添加一个 ' '。

示例：

```
table.SpacingBefore = 100f;   //is working 
table.SpacingAfter = 10f;     //is working 
```

# mysql - SQL中的多个JOIN

> ID：13795520
> 
> 赞同：-1
> 
> 时间：2012-12-10T05:30:47.177
> 
> 标签：mysql, join

这是我的表设计

```
PERSON
DriverID (primary)
DriverName
Address

CAR
RegNO (primary) 
Model 
Year

ACCIDENT
ReportNumber (primary)
AccidentDate
Location

OWNS
DriverID (primary key)  foreign key with PERSON(DriverID)
RegNo (primary Key) foreign key with CAR(RegNo)

PARTICIPATION
DriverID (primary key) foreign key with PERSON (DriverID)
RegNo (primary Key) foreign key with CAR(RegNo)
ReportNumber (primary key) foregin with ACCIDENT(primary)
Damage Amount 
```

现在我想加入所有这些表，所以以下列应该输出 DriverID DriverName Address RegNo Model Year ReportNumber AccidentDate Location DamageAMout

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:55:41.317

尝试这个 ：：

```
Select
* 
from 
participation pt

inner join PERSON p on (p.DriverID = pt.DriverID )
inner join car c on (pt.RegNo =c.RegNo)
inner join accidents a on (pt.ReportNumber =a.ReportNumber) 
```

删除查询是

```
delete
from 
participation pt

inner join PERSON p on (p.DriverID = pt.DriverID )
inner join car c on (pt.RegNo =c.RegNo)
inner join accidents a on (pt.ReportNumber =a.ReportNumber)
where p.DriverID = 111 
```

# ruby - 如何在ruby中解析IP路由

> ID：13795522
> 
> 赞同：1
> 
> 时间：2012-12-10T05:30:56.780
> 
> 标签：ruby, ip

假设一台多角电脑有两个网络接口，IP 地址为 192.168.1.100/24 和 192.168.2.100/24。如果任何其他 PC 向其中任何一个发送多播消息，我需要发回响应，但在响应的 UDP 数据部分，我需要告诉那台 PC 我的正确 IP 地址，它们可以到达。

假设 192.168.1.123 发送该多播消息，我可以使用`ip route get to 192.168.1.123`来确定哪个是正确的接口（即 192.168.1.100），但我不知道如何在 ruby​​ 代码中执行此操作。

调用外部进程然后解析标准输出不是我想要的，因为它对于繁忙的网络来说太慢了，并且让它跨平台并不容易。

目前我模仿使用这些代码解析的路线：

```
localifs = Socket.ip_address_list.keep_if { |addr| addr.ipv4? and not(addr.ipv4_loopback?) }
raise Error, "There is no alive ipv4 interface on local machine" if localifs.empty?
src_addr_i = IPAddr.new(src_addr).to_i
localifs = localifs.sort do |x,y|
  (IPAddr.new(x.ip_address).to_i ^ src_addr_i) <=> (IPAddr.new(y.ip_address).to_i ^ src_addr_i)
end
host = localifs.first.ip_address 
```

# .net - .NET 将 Ctrl-V 发送到活动应用程序

> ID：13795524
> 
> 赞同：1
> 
> 时间：2012-12-10T05:30:58.283
> 
> 标签：.net

我尝试创建一个捕获热键的程序，以将预定义的文本复制到剪贴板并将其粘贴到活动应用程序（ei、文本编辑器、地址框、用户输入字段等）

根据链接 1 和链接 2 的讨论，我[可以](https://stackoverflow.com/questions/2886756/trigger-os-to-copy-ctrlc-or-ctrl-x-programmatically)[创建](http://www.dreamincode.net/forums/topic/180436-global-hotkeys/)我想要的程序。根据我的测试，它适用于记事本、Windows 资源管理器地址栏、来自网络浏览器的用户输入字段。但是，它不适用于 MS Office 应用程序（Word、Excel、Outlook 等）和 Web 浏览器地址栏（chrome、IE）。它确实将文本复制到剪贴板，但不能将文本粘贴到应用程序。如果我按热键然后按 Ctrl-V，我会粘贴文本，但这不是我想要的。

我想知道是否可以使其与 MS Office 应用程序一起使用。到目前为止，我还没有从网上找到任何好的建议。

任何机构都可以给我一个提示吗？

谢谢

# r - 将列表的元素作为全局环境中的独立对象返回

> ID：13795526
> 
> 赞同：43
> 
> 时间：2012-12-10T05:31:29.417
> 
> 标签：r, environments

我有一个列表，并且想将列表中的元素分解为全局环境中的单独对象。

例如，我想要以下列表：

```
obj <- list(a=1:5, b=2:10, c=-5:5) 
```

是三个单独的对象`a`,`b`和`c`。

我试图通过以下方式实现这一目标：

```
lapply(obj, FUN = function(x) names(x)[1] <<- x[1]) 
```

但它失败了，与`Error in names(x)[1] <<- x[1] : object 'x' not found`.

我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-10T09:17:22.397

将列表映射到环境有特殊功能：

```
> obj <- list(a=1:5, b=2:10, c=-5:5)
> ls()
[1] "obj"
> list2env(obj,globalenv())
<environment: R_GlobalEnv>
> ls()
[1] "a"   "b"   "c"   "obj" 
```

PS这是我作为答案提供的评论

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-10T05:45:08.107

这也可行：

```
lapply(seq_along(obj), function(i) assign(names(obj)[i], obj[[i]], envir = .GlobalEnv)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-22T09:53:55.110

如果列表还不是命名列表，我们需要先设置名称，例如使用递增的字母。

```
obj2 <- list(1:5, 2:10, -5:5)

list2env(setNames(obj2, letters[seq(obj2)]), envir=.GlobalEnv)
ls()
# [1] "a"    "b"    "c"    "obj2" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-10T05:36:28.667

我不推荐它，但你可以使用`attach`

```
> obj <- list(a=1:5, b=2:10, c=-5:5)
> attach(obj)
> a
[1] 1 2 3 4 5
> b
[1]  2  3  4  5  6  7  8  9 10
> c
 [1] -5 -4 -3 -2 -1  0  1  2  3  4  5 
```

# mysql - 如何回滚 Sugar crm 中的更新查询

> ID：13795527
> 
> 赞同：3
> 
> 时间：2012-12-10T05:31:26.533
> 
> 标签：mysql, sugarcrm, rollback

我已经安装了 Sugar CRM，我希望销售主管可以对插入的数据进行更改，但只有在管理员批准后才能反映该数据。

我的逻辑是我必须回滚该员工（销售主管）的更新查询。请让我知道如何实现它。如果有任何文件，我是 Sugar crm 的新手，请告诉我谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:02:37.557

我会利用 Sugar 中的审计表来做到这一点。只需查询审计表以找到以前的值并重新设置它。

# c# - 在 RadSchedular 中从 c# 创建定期约会

> ID：13795533
> 
> 赞同：0
> 
> 时间：2012-12-10T05:32:02.620
> 
> 标签：c#, telerik, rad-controls

我正在尝试从 Telerik radschedular 的代码创建定期约会。

```
Appointment recurringAppointment = new Appointment("1",
           Convert.ToDateTime("12/12/2012 3:30 PM").ToUniversalTime(),
           Convert.ToDateTime("12/12/2012 4:00 PM").ToUniversalTime(),
           "Sample appointment");

RecurrenceRange range = new RecurrenceRange();
range.Start = recurringAppointment.Start;
range.EventDuration = recurringAppointment.End - recurringAppointment.Start;
range.MaxOccurrences = 10;
HourlyRecurrenceRule rrule = new HourlyRecurrenceRule(2, range); 
```

创建约会和重复规则后，我无法将它们组合起来。Telerik Appointment 的“RecurrenceRule”属性接受一个字符串。所以我无法将我的 HourlyRecurrenceRule 添加到我创建的约会中。

对此的任何类型的 c# 代码帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:00:53.967

[正如 Brian Mains 在本文](http://dotnetslackers.com/articles/aspnet/Using-Teleriks-Scheduler-Component.aspx)中指出的那样：

> 重复可以指定为每小时、每天、每周、每月或每年，并且可以在某个日期或间隔结束。您会看到此规则作为字符串传递给 Appointment；最终结果如下所示：
> 
> DTSTART:20081122T143000Z\r\nDTEND:20081122T170000Z\r\nRRULE:FREQ=WEEKLY;
> 
> UNTIL=20091021T040000Z；间隔=1\r\n

在[Telerik 的示例](http://www.telerik.com/help/aspnet-ajax/scheduler-serverside-populating-recurrence-rule.html)中，您可以看到 RecurrenceEditor 接受 RecurrenceRule 对象，但 Appointment 的 RecurrenceRule 属性只接受 RecurrenceRule 对象的字符串表示形式。

在你的最后一行代码之后，只需添加这个，它应该可以解决问题：

```
recurringAppointment.RecurrenceRule = rrule.ToString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:49:17.257

看起来你从他们的文档中获得了代码：

[http://www.telerik.com/help/aspnet-ajax/scheduler-working-with-recurring-appointments.html](http://www.telerik.com/help/aspnet-ajax/scheduler-working-with-recurring-appointments.html)

这是其余的代码（来自上面的网址）

```
// Prints the string representation of the recurrence rule:
string rruleAsString = rrule.ToString();
Console.WriteLine("Recurrence rule:\n\n{0}\n", rruleAsString);
// The string representation can be stored in a database, etc.
// ...
// Then it can be reconstructed using TryParse method:
RecurrenceRule parsedRule;
RecurrenceRule.TryParse(rruleAsString, out parsedRule);
Console.WriteLine("After parsing (should be the same):\n\n{0}", parsedRule); 
```

这两种类型不能“组合”，您将约会与重复规则字符串一起保存在数据库中，并在加载它时使用 TryParse 方法重新创建具有相同属性的新重复规则。

希望能帮助到你 ：）

# php - 用imagick循环图像

> ID：13795535
> 
> 赞同：0
> 
> 时间：2012-12-10T05:32:07.390
> 
> 标签：php, imagick

尝试拍摄一张矩形照片，将其裁剪为方形区域，然后将其蒙版为具有透明背景的圆形。

```
//$dims is an array with the width, height, x, y of the region in the rectangular image (whose path on disk is $tempfile)

$circle = new \Imagick();
$circle->newImage($dims['w'], $dims['h'], 'none');
$circle->setimageformat('png');
$circle->setimagematte(true);
$draw = new \ImagickDraw();
$draw->setfillcolor('#ffffff');
$draw->circle($dims['w']/2, $dims['h']/2, $dims['w']/2, $dims['w']);
$circle->drawimage($draw);

$imagick = new \Imagick();
$imagick->readImage($tempfile);
$imagick->setImageFormat( "png" );
$imagick->setimagematte(true);
$imagick->cropimage($dims['w'], $dims['h'], $dims['x'], $dims['y']);
$imagick->compositeimage($circle, \Imagick::COMPOSITE_DSTIN, 0, 0);
$imagick->writeImage($tempfile);
$imagick->destroy(); 
```

结果是矩形图像，未裁剪且未圆化。我究竟做错了什么？

示例图片： ![在此处输入图像描述](../Images/97f6f773181a0056ba45b6cf52f0c74c.png)

$dims = {"x":253,"y":0,"x2":438.5,"y2":185.5,"w":185.5,"h":185.5} 的示例输入

粗略的预期输出：

![在此处输入图像描述](../Images/096958348dba4ba1d1643ccf07d6217d.png)

我得到的图像看起来与输入图像大致相似。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-03T10:02:05.880

对于那些使用旧版 Imagick 的人（低于 6.2.9 的版本中不存在 setimagematte），我想出了一个简单的解决方案。这里的事情是**将不透明度从蒙版复制到原始图像**。

## 原图：

![在此处输入图像描述](../Images/196f0d4a68a87d15ede262d4582e2e38.png)

## 面具：

![在此处输入图像描述](../Images/827abf9b8b53966f2ce5b24b50a4e3f1.png)

## 结果：

![在此处输入图像描述](../Images/dac055ae38c382f4bd8d0d2c898891b4.png)

## 编码：

```
$base = new Imagick('original.jpg');
$mask = new Imagick('mask.png');

$base->compositeImage($mask, Imagick::COMPOSITE_COPYOPACITY, 0, 0);
$base->writeImage('result.png'); 
```

您可以使用 Imagick 黑色圆圈作为面具，但我认为它并不完美，所以我使用了我自己的。

当然，您当然必须**调整图像大小/裁剪**图像，但那是另一回事了。

希望这可以帮助。

J。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T22:01:07.980

![代码结果](../Images/7dc31791eab7592919061f6e31f8a476.png)

这对我有用：

```
<?php
//$dims is an array with the width, height, x, y of the region in the rectangular image (whose path on disk is $tempfile)
$tempfile = 'VDSlU.jpg';
$outfile = 'blah.png';

$circle = new Imagick();
$circle->newImage(185.5, 185.5, 'none');
$circle->setimageformat('png');
$circle->setimagematte(true);
$draw = new ImagickDraw();
$draw->setfillcolor('#ffffff');
$draw->circle(185.5/2, 185.5/2, 185.5/2, 185.5);
$circle->drawimage($draw);

$imagick = new Imagick();
$imagick->readImage($tempfile);
$imagick->setImageFormat( "png" );
$imagick->setimagematte(true);
$imagick->cropimage(185.5, 185.5, 253, 0);
$imagick->compositeimage($circle, Imagick::COMPOSITE_DSTIN, 0, 0);
$imagick->writeImage($outfile);
$imagick->destroy();
?>

<img src="blah.png"> 
```

我总是尽量保持代码简单，直到我让它工作，然后添加所有变量等。这可能是问题，或者你的 Imagick 版本可能有问题。

> 它是命名空间的

还是不知道什么意思！- 我在使用 php 方面有点落后，因为这些天我不太使用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-16T09:21:50.917

我在这里建议还有另一种解决方法：

```
// create an imagick object of your image
$image = new \Imagick('/absolute/path/to/your/image');
// crop square your image from its center (100px witdh/height in my example)
$image->cropThumbnailImage(100, 100);
// then round the corners (0.5x the width and height)
$image->roundCorners(50, 50);
// force the png format for transparency
$image->setImageFormat("png");
// write the new image
$image->writeImage('/absolute/path/to/your/new/image');
// done! 
```

非常感谢所有以前的答案和贡献者，他们把我带到了这段代码！

随意测试/评论我的解决方案！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-09T17:53:04.780

我在为 Ruby on Rails 寻找类似的解决方案时偶然发现了这一点，请注意[这个 Stackoverflow 问题](https://stackoverflow.com/questions/7321289/php-imagemagick-vignette)使用了小插图，这似乎是一种更简单的解决问题的方法。

我使用小插图来解决我[在 Ruby on Rails 中使用 Dragonfly 的圆形图像](https://stackoverflow.com/questions/20477809/crop-circular-image-with-dragonfly-rails/25750740#25750740)问题。

# azure - 配置 TFS-Azure 部署以使用“发布”进行构建

> ID：13795536
> 
> 赞同：1
> 
> 时间：2012-12-10T05:32:09.487
> 
> 标签：azure, tfs, tfsbuild, configuration-management, azure-deployment

我正在将项目签入到 TFS，以部署到 Azure 主机。

我希望将项目构建和部署为“发布”，而不是“调试”。

我把这段代码放在我的`Application_Start`：

```
#if DEBUG 
      throw new System.Exception("An Exception!");
#endif 
```

抛出异常，如何将 TFS 构建设置为“发布”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:47:30.117

当您在构建定义中选择要构建的项目时，您可以指定要构建的配置。

![要构建的配置](../Images/c8e54906ffacf42b9ef97898abd8cfc7.png)

# data-structures - Draw Something 是如何记录绘图轨迹的？

> ID：13795540
> 
> 赞同：1
> 
> 时间：2012-12-10T05:32:27.597
> 
> 标签：data-structures

热门APP *Draw Something*，它会记录你所有的绘画轨迹并发送给你的朋友传达猜字，让他猜。

这个应用程序如何记录绘图轨迹？在什么样的数据结构中？

如果开发一个类似的实时通信白板应用程序，如何设计数据模型以使两个或多个参与者的交互更高效和更好？（如何记录绘图轨迹并发送给其他参与者）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:35:35.180

他们是怎么做到的，我不知道。我会怎么做，是一个点数组，其中每个点要么是一个中断（其中包括下一行的颜色值），要么是一个`(X, Y, T)`元组（坐标和时间）。这仅适用于手绘线；如果您需要其他东西，显然，它需要扩展。

# core-data - 自定义 NSManagedObject 类以从 NSOrderedSet 添加/删除对象

> ID：13795545
> 
> 赞同：0
> 
> 时间：2012-12-10T05:33:05.457
> 
> 标签：core-data, nsarraycontroller, nsorderedset

我正在学习 Cocoa 并遵循 Aaron Hillegass 的书（第 32 章核心数据关系）中的一个示例，但无法让它为我自己的应用程序工作。

我有一个核心数据模型，它由一个与子对象有一对多关系的父对象组成，但**我的是一个有序集合，这与书中**的基本 NSMutableSet 不同。

每个对象（父对象和子对象）都有关联的 NSArrayControllers，我在 Interface Builder 中开发了一个基于文档的应用程序，其中包含按钮和绑定，用于从选定的父对象（称为层）。这一切都在工作。

现在我想拦截 add 和 remove 方法，以便在添加或删除孩子时我可以自己编写代码。

在 Hillegass 的书中，他通过创建 NSManagedObjects 子类然后在代码中实现 addEmployeesObject: 和 removeEmployeesObject: 方法来做到这一点。所以这就是我尝试的。

这是我由 XCode 编辑器创建的子类：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class Network, Perceptron;

@interface Layer : NSManagedObject

@property (nonatomic, retain) Network *network;
@property (nonatomic, retain) NSOrderedSet *perceptrons;
@end

@interface Layer (CoreDataGeneratedAccessors)

- (void)insertObject:(Perceptron *)value inPerceptronsAtIndex:(NSUInteger)idx;
- (void)removeObjectFromPerceptronsAtIndex:(NSUInteger)idx;
- (void)insertPerceptrons:(NSArray *)value atIndexes:(NSIndexSet *)indexes;
- (void)removePerceptronsAtIndexes:(NSIndexSet *)indexes;
- (void)replaceObjectInPerceptronsAtIndex:(NSUInteger)idx withObject:(Perceptron *)value;
- (void)replacePerceptronsAtIndexes:(NSIndexSet *)indexes withPerceptrons:(NSArray *)values;
- (void)addPerceptronsObject:(Perceptron *)value;
- (void)removePerceptronsObject:(Perceptron *)value;
- (void)addPerceptrons:(NSOrderedSet *)values;
- (void)removePerceptrons:(NSOrderedSet *)values;
@end 
```

这是我根据教科书在 Layer.m 中实现的两种方法：

```
- (void)addPerceptronsObject:(Perceptron *)value
{
    NSLog(@"Network '%@' layer %lu is adding perceptron %lu", [[self network] name], [self indexInNetwork], [value indexInLayer]);
    NSSet *s = [NSSet setWithObject:value];
    [self willChangeValueForKey:@"perceptrons"
                withSetMutation:NSKeyValueUnionSetMutation
                   usingObjects:s];
    [[self primitiveValueForKey:@"perceptrons"] addObject:value];
    [self didChangeValueForKey:@"perceptrons"
     withSetMutation:NSKeyValueUnionSetMutation
                  usingObjects:s];
}

- (void)removePerceptronsObject:(Perceptron *)value
{
    NSLog(@"Network '%@' layer %lu is removing perceptron %lu", [[self network] name], [self indexInNetwork], [value indexInLayer]);
    NSSet *s = [NSSet setWithObject:value];
    [self willChangeValueForKey:@"perceptrons"
                withSetMutation:NSKeyValueUnionSetMutation
                   usingObjects:s];
    [[self primitiveValueForKey:@"perceptrons"] removeObject:value];
    [self didChangeValueForKey:@"perceptrons"
               withSetMutation:NSKeyValueUnionSetMutation
                  usingObjects:s];
} 
```

我把 NSLogs 放进去，所以我确定它们不会被调用——当我添加/删除感知器对象时，控制台中什么也没有。

ArrayController 在收到 add: remove: 消息时会做什么？是否将 addObject/removeObject 消息直接发送到集合？为什么在教科书示例中它会向父对象发送消息以删除子对象？为什么这里没有发生？有没有办法调试并找出答案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:41:07.277

账单，

您正在覆盖由 Core Data 动态生成的方法。我怀疑您在查找表中的静态条目只是被覆盖了。这些方法与`@property`期望被覆盖的方法不同。

从更大的意义上说，为什么要在此处插入代码？当对象被实例化时，有更好的支持方法为您的实现设计。您不妨检查一下`-awakeFromFetch`和`-awakeFromInsert`。

安德鲁

# javascript - 使用 appendChild() 添加 oncontextmenu

> ID：13795564
> 
> 赞同：1
> 
> 时间：2012-12-10T05:34:37.490
> 
> 标签：javascript

嘿，如果您使用 appendChild，是否可以通过 JavaScript 向元素添加 oncontextmenu？

我这样设置我的div：

```
var d = document.createElement('div');
d.id = 'G';
d.className = 'Ouput';  
document.getElementById('E').appendChild(d); 
```

但我想知道我如何添加：

`oncontextmenu="return false;"`

可以在我附加子项之前将其添加到 Div 属性中，还是必须在之后添加它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:49:20.577

您可以在将 div 添加到 dom 之前或之后添加 oncontextmenu，但使用函数而不是字符串。

```
var d = document.createElement('div');
d.id = 'G';
d.className = 'Ouput';
d.oncontextmenu = function(){return false};
document.getElementById('E').appendChild(d); 
```

[http://jsfiddle.net/mowglisanu/ZNvhD/](http://jsfiddle.net/mowglisanu/ZNvhD/)

# facebook - Facebook没有一起添加喜欢

> ID：13795566
> 
> 赞同：0
> 
> 时间：2012-12-10T05:34:52.920
> 
> 标签：facebook, facebook-like

我的网站上有一些类似 Facebook 的按钮，但数字并没有真正加起来。有一个帖子有 18 个赞，然后是首页赞有 8 个赞，我的 Facebook 墙有 3 个赞。不应该把这些喜欢结合起来吗？我认为我正确使用了 OG 标签。

网站：[Rushtips.com](http://rushtips.com/)

提前致谢！

编辑：

我使用了这段代码：

```
<div id="facebook"><div class="fb-like" data-href="http://rushtips.com" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" data-font="tahoma"></div></div> 
```

是否会使用此代码，让它也算在我的墙上？：

```
<div id="facebook"><div class="fb-like" data-href="http://facebook.com/rushtipscom" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" data-font="tahoma"></div></div> 
```

如果是这种情况，我只需要知道如何处理这些帖子，如果可能的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:40:22.007

不可能将帖子喜欢添加到页面喜欢计数中，我认为默认情况下应该这样做，无论如何..

使用您的 Facebook 页面，而不是您自己的域，因为 data-href 是在您的墙上和喜欢按钮上获得相同计数的唯一方法。

在帖子中，您应该使用您网站的默认永久链接。

希望它可以帮助某人。

# asp.net - 带有文本框的 ASP.Net 中的日历控件

> ID：13795567
> 
> 赞同：0
> 
> 时间：2012-12-10T05:34:54.890
> 
> 标签：asp.net, calendar-control

我想使用带有文本框的日历控件。但是当我在 ajax 工具包的帮助下尝试使用它时，我才知道没有安装相应的库。任何解决问题的方法...？我的意思是什么可以代替这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:30:38.580

试试 jQueryui UI 日期选择器。如果这对您有用，它就是客户端。这是一个链接 [http://jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)

# function - 什么是一对一的功能？

> ID：13795578
> 
> 赞同：0
> 
> 时间：2012-12-10T05:35:52.400
> 
> 标签：function, one-to-one, discrete-mathematics

有人告诉我们这个函数：一对一和 on 的组合，我们的老师称之为（“一对一 on 函数”）。但我对此持怀疑态度，因为我在网上找不到这样的词或其定义。

也许我们的老师对这个话题有误；也许它并不真正存在。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:39:12.717

在通常的术语中，“一对一”意味着域中的不同点总是映射到范围内的不同点，“onto”意味着对于范围内的每个点，域中的某个点映射到它。

具有这两个属性的函数通常称为[双射](http://en.wikipedia.org/wiki/Bijection)；该函数有一个逆函数，它具有完全相同的一对一和上属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:31:03.153

[![](../Images/08cb78b191389cc0b925867ca5335210.png)](https://i.stack.imgur.com/tIYQo.jpg)
[（来源：[regentsprep.org](http://www.regentsprep.org/Regents/math/algtrig/ATP5/onetoone.jpg)）]
一对一功能

[![](../Images/79c34de3edd48429059838404fa71f1a.png)](https://i.stack.imgur.com/TUeTI.gif)不是一对一的功能

[![](../Images/79c34de3edd48429059838404fa71f1a.png)](https://i.stack.imgur.com/TUeTI.gif)到函数

[![](../Images/680a9320d4f014ce638e0740024e7ffd.png)](https://i.stack.imgur.com/Gf9Af.gif)
[（来源：[regentsprep.org](http://www.regentsprep.org/Regents/math/algtrig/ATP5/surjectiveNO.gif)）]

不上功能

# php - 如何将文本字段数组与列表数组相关联

> ID：13795580
> 
> 赞同：0
> 
> 时间：2012-12-10T05:35:57.190
> 
> 标签：php, html

朋友我有一个包含许多列表和文本字段的表单。每个表格行都有一个列表和一个文本字段。您可以从列表中选择一个选项并将内容添加到其相关的文本字段。如下，

```
<tr>
<td>
<select name="area[]">
<option>Family</option>
<option>Love</option>
<option>Marriage</option>
</select>
</td>
<td><input type="text" name="content[]"></td>
</tr> 
```

由于可以有任意数量的行，我决定将输入作为数组获取，并尝试对这些记录使用 foreach()。

我的循环是这样的

```
<?php 
if(!empty($_POST['content'])){
    foreach($_POST['content']as $value){
    //need to get the related list value here
    }
    }
?> 
```

我的问题是我可以获取文本字段值，但是如何从列表数组中获取相关列表值？

对不起，我的英语不好。希望你能就此给我建议谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:58:42.933

文本字段值 isnet 数组尝试

```
<input type="text" name="content"> 
```

您可以通过以下方式获得内容的价值

```
$_POST['content'] 
```

我想你想在这里获得期权价值

```
if( !empty($_POST['area']){
    foreach($_POST['area'] as $value){
    //need to get the related list value here
    }
} 
```

# php - 用于更新记录的 PDO 准备语句产生简单错误？

> ID：13795581
> 
> 赞同：0
> 
> 时间：2012-12-10T05:36:04.060
> 
> 标签：php, mysql, pdo

我对 PHP 非常陌生。我想使用准备好的 PDO 语句，但我的不起作用。[我试图按照一个简单的例子](http://www.phpeveryday.com/articles/PDO-Insert-and-Update-Statement-Use-Prepared-Statement-P552.html)

这是我下面的内容（是的，我知道 range、range2 和 spellrange 都指的是同一个东西，但我意识到当我在 MySQL 中调用该字段时出现错误“range”，所以我将字段更改为“spellrange”在数据库中） - 我对发送到页面的 POST 内容进行了回显（现在已删除回显），并且我成功获取了所有 POST 信息 - 这是错误：

> `SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') WHERE id='747')' at line 2`

id=747 是正确的。那是我从上一页点击的 ID，它确实存在于数据库中。希望我在这里不会太蹩脚，但我试图按照那个网站上的例子（这似乎是我看到的最简单的一个）。

```
 <?PHP
// MAIN PROCESSING SECTION
    $id = $_POST['id'];
    $level = $_POST['level'];
    $specialty = $_POST['specialty'];
    $name = $_POST['name'];
    $cost = $_POST['cost'];
    $bcu = $_POST['bcu'];
    $range2 = $_POST['range'];
    $prereq = $_POST['prereq'];
    $description = $_POST['description'];

try {
$sql = "UPDATE tblspells 
    SET level=?, specialty=?, name=?, cost=?, spellrange=?, basecostuses=?,  prereq=?, description=?) WHERE id=?)";
    $q = $pdo->prepare($sql);
    $q->execute(array($level, $specialty, $name, $cost, $range2, $bcu, $prereq, $description, $id));
}
    catch(PDOException $e)
    {
        echo "Error ---------- " . $e->getMessage();
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:39:40.750

`'description'`对于初学者，您在and`where`子句之后有额外的右括号。

# iphone - iOS UINavigationController

> ID：13795589
> 
> 赞同：1
> 
> 时间：2012-12-10T05:37:17.867
> 
> 标签：iphone, ios, xcode

我在使用导航控制器时遇到问题。我的程序布置在我有一个开始屏幕的地方（不在导航控制器中），然后当您按下按钮时，它会将您发送到导航控制器和新视图。

有没有办法使用后退按钮从导航控制器返回主屏幕。

或者，如果我将开始屏幕作为导航控制器的根目录，是否可以隐藏视图中的顶部栏。

我最初没有包含开始屏幕的原因是因为我不希望屏幕上出现导航栏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:41:04.837

为了隐藏`UINavigationBar`然后在您的开始屏幕视图控制器的方法中使用波纹管`viewWillAppear:`..

```
[self.navigationController setNavigationBarHidden:YES]; 
```

**或者**

```
[self.navigationController setNavigationBarHidden:YES animated:YES]; 
```

**并且**您可以使用以下代码返回上一个视图以及主屏幕或父视图...

```
-(IBAction)yourButton_Clicked:(id)sender{

    [self.navigationController popViewControllerAnimated:YES];//// For back to Previous view
  //  [self.navigationController popToRootViewControllerAnimated:YES]; // For Back to home screen or parent view

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:41:05.283

好吧，有一个非常简单的方法可以`UINavigationBar`在蚂蚁视图中隐藏你想要的时候：-

```
[self.navigationController setNavigationBarHidden:YES]; 
```

并且在您想要显示它的视图中，只需像这样取消隐藏它：-

```
[self.navigationController setNavigationBarHidden:NO]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T05:41:30.590

您可以在所有屏幕中使用导航栏。但是对于您不想显示的屏幕，只需使用隐藏属性作为导航栏。该屏幕不会在顶部显示导航栏。

```
[[self navigationController] setNavigationBarHidden:YES animated:YES]; 
```

它会解决你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T05:45:44.470

```
 - (void) viewWillAppear:(BOOL)animated{

    [self.navigationController setNavigationBarHidden:YES animated:animated];

         [super viewWillAppear:animated];
 }

- (void) viewWillDisappear:(BOOL)animated{

    [self.navigationController setNavigationBarHidden:NO animated:animated];

[super viewWillDisappear:animated];
} 
```

通过在主屏幕上实现此功能，您可以隐藏顶部栏

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T05:46:50.563

你可以使用隐藏导航栏

```
self.navigationController.navigationBarHidden = YES; 
```

将开始屏幕作为子视图添加到导航的根视图控制器。

```
[self.view addSubview:startScreen.view] 
```

稍后将其删除并将`[startScreen.view removFromSuperview]`标志设置`navigationBarHidden`为`NO`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T05:47:00.767

如果您使用情节提要，您可以创建一个 UIButton 并以模态方式链接视图。

另请查看[https://stackoverflow.com/a/8348527/401787](https://stackoverflow.com/a/8348527/401787)以在视图控制器之间导航。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-10T05:49:09.973

其实你的要求并不明确。但是要隐藏您可以使用的导航控制器，

```
self.navigationController.navigationBarHidden=YES; 
```

您还可以将自定义按钮添加到导航栏。

```
UIBarButtonItem *leftBtn=[[UIBarButtonItem alloc]initWithTitle:@"Back" style:UIBarButtonSystemItemAction target:self action:@selector(backBtnClicked:)];
    self.navigationItem.leftBarButtonItem=leftBtn; 
```

您可以在`backBtnClicked:`方法中正确地提出您的要求。您还可以导航到您的根级视图控制器。

# java - 如何在java中使用正则表达式验证字符串

> ID：13795592
> 
> 赞同：3
> 
> 时间：2012-12-10T05:37:28.110
> 
> 标签：java, android, regex, string, validation

在这里，我想为仅包含 0 到 6 个数字的字符串制作 regx。这个字符串包含 0 到 6 个这样的数字。

```
 Example-1 : "010002030405" Valid String 
```

这个字符串只包含 o 到 6 个数字，所以在这里我使用了这个 regx `"[0-6]*"`。但是我想在这个字符串中验证的另一件事是，我只希望 0 在奇数位置 1-6 永远不会在奇数位置。0 可以放在奇数和偶数位置，但 1-6 只能放在偶数位置。

在这里，我给了你一些有效和无效的字符串示例

```
Valid : 000102000004
invalid : 0023015006 
```

在这里我使用了这个代码请建议我或告诉我我必须在我的 regx 中更改什么以满足以下验证

```
1) String contains only 0-6 numbers nothing else.
2) 1-6 would be only even positions only they would not be at odd position ever, 0 would be odd and even position. 
```

**代码 ：**

```
public boolean isOptions(String input) {
    String patternString = "[0-6]*";
    Pattern pattern = Pattern.compile(patternString);
    return pattern.matcher(input).matches();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T05:41:45.503

没有尝试过，但可能有效：

```
(0[0-6])*0? 
```

# c# - 如何使用 MVVMLight SimpleIoc？

> ID：13795596
> 
> 赞同：59
> 
> 时间：2012-12-10T05:37:59.437
> 
> 标签：c#, wpf, inversion-of-control, mvvm-light, windows-store-apps

我正在改进我的软件，它有`Messenger.Default(...)`一些乱七八糟的地方。

是否有任何备忘单可以了解 MVVMLight SimpleIoc 的用法（不是一般的 IoC 描述）？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-12-10T16:32:56.117

SimpleIoc 婴儿床床单：

1）您在 ViewModelLocator 中注册所有接口和对象

```
class ViewModelLocator 
{ 
    static ViewModelLocator() 
    {         
        ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);          
        if (ViewModelBase.IsInDesignModeStatic) 
        {              
            SimpleIoc.Default.Register<IDataService, Design.DesignDataService>();          
        }          
        else         
        {              
            SimpleIoc.Default.Register<IDataService, DataService>();          
        }          
        SimpleIoc.Default.Register<MainViewModel>();                  
        SimpleIoc.Default.Register<SecondViewModel>(); 
    }      

    public MainViewModel Main 
    {  
        get  
        {      
            return ServiceLocator.Current.GetInstance<MainViewModel>();  
        } 
    }
} 
```

2）默认情况下，每个对象都是单例。要解析对象使其不是单例，您需要将唯一值传递给 GetInstance 调用：

```
SimpleIoc.Default.GetInstance<MainViewModel>(Guid.NewGuid().ToString()); 
```

3）针对接口注册一个类：

```
SimpleIoc.Default.Register<IDataService, Design.DesignDataService>(); 
```

4）针对接口注册具体对象：

```
SimpleIoc.Default.Register<IDataService>(myObject); 
```

5）注册一个具体类型：

```
SimpleIoc.Default.Register<MainViewModel>(); 
```

6) 从接口解析对象：

```
SimpleIoc.Default.GetInstance<IDataService>(); 
```

7）直接解析对象（进行构建和依赖解析）：

```
SimpleIoc.Default.GetInstance<MainViewModel>(); 
```

8) MVVM 使处理设计时数据变得非常容易：

```
if (ViewModelBase.IsInDesignModeStatic) 
{              
    SimpleIoc.Default.Register<IDataService, Design.DesignDataService>();          
}          
else         
{              
    SimpleIoc.Default.Register<IDataService, DataService>();          
} 
```

如果您处于设计时模式，它将自动注册您的设计时服务，从而在 VS 设计器中工作时非常容易在您的视图模型和视图中拥有数据。

希望这可以帮助。

# mysql - MySQL - 从一个表引用数据到另 一个表

> ID：13795597
> 
> 赞同：0
> 
> 时间：2012-12-10T05:38:02.407
> 
> 标签：mysql, database

我正在尝试通过将另一个表中的 id 列到另一个表中一行的特定字段中来连接表。

这就是我想要做的；

表项

```
Id   Name    Price
 1   Drink   5
 2   Food    3 
```

表格字符

```
Id   Name   Cash   Inventory 
 1   Foo    10     1
 2   Bar    10     2
 3   Stu    10     1, 2 
```

我正在尝试引用这些项目，以便当我提取有关角色“Stu”的数据时，它会提取与项目“1 和 2”相关的数据，因为他的库存中有这些数据。

我已经阅读了规范化和外键，但无法找到一种方法以我想要的方式将它们联系在一起。我还发现 INT 字段不接受多个逗号分隔的整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:49:47.227

您正在尝试建立一对多的关系。您需要将外键放入表项中，即 CharacterId 。然后您可以使用 JOIN 拉取数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T05:57:25.127

这应该很容易使用 FIND_IN_SET 查看您的表结构这里是解决方案

```
SELECT 
    * 
FROM `characters` as c
LEFT JOIN items as i on FIND_IN_SET(i.id, c.Inventory)
WHERE c.name= 'Stu' 
```

编辑 ：

这是编辑后的解决方案，意味着一条线解决方案。

```
SELECT 
    c.* ,
    group_concat(i.name) as ItemName,
    group_concat(i.price) as ItemPrices         
FROM `characters` as c
LEFT JOIN items as i on FIND_IN_SET(i.id, c.Inventory)
WHERE c.name= 'Stu'
group by c.name 
```

如果您使用的是 php，您可以使用 php explode 函数分解单元格，然后遍历单元格以访问所有单元格值。

编辑 ：

```
SELECT 
    c.* ,
    group_concat(i.id) as ItemIds,
    group_concat(i.name) as ItemName,
    group_concat(i.price) as ItemPrices         
FROM `characters` as c
LEFT JOIN items as i on FIND_IN_SET(i.id, c.Inventory)
WHERE c.name= 'Stu'
group by c.name 
```

# wordpress - 如何在wordpress中显示主要类别的子类别？

> ID：13795604
> 
> 赞同：0
> 
> 时间：2012-12-10T05:38:40.043
> 
> 标签：wordpress

如何在wordpress中显示主要类别的子类别？喜欢 类别 子类别 1 子类别 2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:21:21.763

您可以通过使用[get_categories](http://codex.wordpress.org/Function_Reference/get_categories)函数来做到这一点。像这样：

```
<?php
    $cat = get_categories(array('child_of' => 3));
    var_dump($cat);
?> 
```

child_of 参数是父类别的 ID。它将返回该父类别的所有子类别。

样本输出：

```
array(2) {
  [0]=>
  object(stdClass)#74 (15) {
    ["term_id"]=>
    &string(1) "4"
    ["name"]=>
    &string(19) "Child 1 of Parent 1"
    ["slug"]=>
    &string(16) "child-1-parent-1"
    ["term_group"]=>
    string(1) "0"
    ["term_taxonomy_id"]=>
    string(1) "4"
    ["taxonomy"]=>
    string(8) "category"
    ["description"]=>
    &string(0) ""
    ["parent"]=>
    &string(1) "3"
    ["count"]=>
    &string(1) "1"
    ["cat_ID"]=>
    &string(1) "4"
    ["category_count"]=>
    &string(1) "1"
    ["category_description"]=>
    &string(0) ""
    ["cat_name"]=>
    &string(19) "Child 1 of Parent 1"
    ["category_nicename"]=>
    &string(16) "child-1-parent-1"
    ["category_parent"]=>
    &string(1) "3"
  }
  [1]=>
  object(stdClass)#114 (15) {
    ["term_id"]=>
    &string(1) "5"
    ["name"]=>
    &string(19) "Child 2 of Parent 1"
    ["slug"]=>
    &string(16) "child-2-parent-1"
    ["term_group"]=>
    string(1) "0"
    ["term_taxonomy_id"]=>
    string(1) "5"
    ["taxonomy"]=>
    string(8) "category"
    ["description"]=>
    &string(0) ""
    ["parent"]=>
    &string(1) "3"
    ["count"]=>
    &string(1) "1"
    ["cat_ID"]=>
    &string(1) "5"
    ["category_count"]=>
    &string(1) "1"
    ["category_description"]=>
    &string(0) ""
    ["cat_name"]=>
    &string(19) "Child 2 of Parent 1"
    ["category_nicename"]=>
    &string(16) "child-2-parent-1"
    ["category_parent"]=>
    &string(1) "3"
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-18T10:10:08.900

> 首先，您需要父类别 ID，然后您可以从表 wp_term_taxonomy 中获取其子类别

```
<?php global $wpdb;$prefix=$wpdb->prefix;

$subcateogyr_list=$wpdb->get_results("Select * from ".$prefix."term_taxonomy WHERE parent='parent_category_id'");

foreach($subcateogyr_list as $subcat

   echo  $subcat_name=$wpdb->get_var("select name from ".$prefix."wp_terms where term_taxonomy_id='$subcat['term_id']'");

}
?> 
```

# c - 结构链表中的类型转换指针

> ID：13795606
> 
> 赞同：0
> 
> 时间：2012-12-10T05:39:07.303
> 
> 标签：c, pointers, linked-list, segmentation-fault, structure

问题表明我需要两个结构，STRUCTURE1 和 STRUCTURE2（我知道的原始结构）。STRUCTURE1 包含 5 个浮点值（不是数组）和一个指针。STRUCTURE2 保存 1 个浮点值和一个指向另一种 STRUCTURE2 类型的指针。我还需要一个指针数组，其中每个元素都指向一个 STRUCTURE1。然后每个第一个 STRUCTURE1 都指向另一个 STRUCTURE1，然后 THAT STRUCTURE1 需要指向一个 STRUCTURE2（这是类型转换的来源）。

下面是我的代码的重要部分，问题（至少我遇到错误的地方）在 printToFile()`trav2 = (STRUCT2*)trav1->next;`中我遇到分段错误的部分。

```
 void main(){
      STRUCT1 *ptr[20] = {NULL};  //Array of pointers that point to type STRUCT1
      float min, max;
      int i, j, answer;
      for(i = 0; i < 19; i++){   //19 to leave the 20th array spot for NULL
        printf("\nWould you like to add 2 more sets of numbers?\n");
        printf("1: Yes\n");
        printf("2: No\n");
        scanf("%d", &answer);
        if(answer == 1){
          printf("\nFirst set of numbers:\n");
          ptr[i] = getData();
          printf("\nSecond set of numbers:\n");
          ptr[i]->next = getData();
          min = getMin(ptr[i]);
          max = getMin(ptr[i]->next);
          STRUCT2 *trav;
          trav = (STRUCT2*)malloc(sizeof(STRUCT1));
          trav = (STRUCT2*)ptr[i]->next;
          trav->next = assignMin(min);
          trav = trav->next;
          trav->next = assignMax(max);
        }else{
          break;
        }
      }
      printToFile(ptr);
      printf("\nProgram Done\n");
    }

STRUCT1* getData(){
  STRUCT1 *newStruct;
  newStruct = (STRUCT1*)malloc(sizeof(STRUCT1));
  float num;
      printf("Enter number 1: ");
      scanf("%f", &num);
      newStruct->f1 = num;
      printf("Enter number 2: ");
      scanf("%f", &num);
      newStruct->f2 = num;
      printf("Enter number 3: ");
      scanf("%f", &num);
      newStruct->f3 = num;
      printf("Enter number 4: ");
      scanf("%f", &num);
      newStruct->f4 = num;
      printf("Enter number 5: ");
      scanf("%f", &num);
      newStruct->f5 = num;

      return newStruct;
}

void printToFile(STRUCT1 *ptr[]){
  FILE *f;
  f = fopen("structure.txt", "w");
  int i, j;
  STRUCT1 *trav1;
  STRUCT2 *trav2;
  trav1 = (STRUCT1*)malloc(sizeof(STRUCT1));
  trav2 = (STRUCT2*)malloc(sizeof(STRUCT2));

  for(i = 0; i < 20; i++){
    fprintf(f, "%.3f,%.3f,%.3f,%.3f,%.3f\n", ptr[i]->f1, ptr[i]->f2, ptr[i]->f3, ptr[i]->f4, ptr[i]->f5);
    trav1 = ptr[i]->next;
    fprintf(f, "%.3f,%.3f,%.3f,%.3f,%.3f\n", trav1->f1, trav1->f2, trav1->f3, trav1->f4, trav1->f5);
    trav2 = (STRUCT2*)trav1->next;
    fprintf(f, "Minimum of first number set: %.3f\n", trav2->f1);
    trav2 = trav2->next;
    fprintf(f, "Maximum of second number set: %.3f\n", trav2->f1);
    fprintf(f, "\n");    
  }
} 
```

这可能都是非常非常错误的，但我的教授从未谈论过指向不同类型的指针，而且关于结构的部分也很短。希望它没有完全拙劣，只需要在这里和那里做一些事情。

有人认为他们看到哪里出了问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:05:19.940

问题中没有足够的信息，缺少结构定义和填充这些结构的代码。演员表不一定是错的。但是，您可以使用不同的指针来访问任一类型的结构：

```
 if (ptr->next_st1 != NULL) {
      trav1 = ptr->next_st1;
   } else if (ptr->next_st2 != NULL) {
      trav2 = ptr->next_st2;
   } 
```

作为旁注，您在此处进行的分配：

```
 trav1 = (STRUCT1*)malloc(sizeof(STRUCT1));
  trav2 = (STRUCT2*)malloc(sizeof(STRUCT2));

  for(i = 0; i < 20; i++){
    /* ... */
    trav1 = ptr[i]->next;
    /* ... */ 
```

没有必要，因为您正在分配指向已分配区域的指针 ( `trav1 = ptr[i]->next`)。由于此分配，您正在泄漏内存，因为您丢失了指向 malloced 块的指针。在这种情况下`malloc`是没有必要的，但是当有必要时你应该有一个相应的`free()`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:46:00.550

我认为您的问题出在这一行：

```
trav = (STRUCT2*)malloc(sizeof(STRUCT1)); 
```

在这里，`tray`作为`STRUCT2`指针并为`STRUCT1`. 更好用`sizeof(STRUCT2)`。

# .net - AWS SDK for .NET S3 GetPreSignedURL 用于特定版本的版本化对象

> ID：13795609
> 
> 赞同：2
> 
> 时间：2012-12-10T05:39:25.620
> 
> 标签：.net, sdk, amazon-s3, amazon-web-services

在使用 AmazonS3Client.GetPreSignedURL API 构建预签名 URL 时，是否有人成功填充了 GetPreSignedUrlRequest 的 versionId？我从浏览器返回 AccessDenied 以获取生成的 URL。当我从 GetPreSignedUrlRequest 中省略 versionId 时，它启用了版本的存储桶和预签名的 URL 工作正常。我使用的是 AWS 开发工具包的当前版本（版本 = 1.5.9.0）。我发现了一个 2010 年的帖子，其中 AWS 表示此功能已在路线图上，但此后就没有了。谢谢 [https://forums.aws.amazon.com/thread.jspa?messageID=406987㗋](https://forums.aws.amazon.com/thread.jspa?messageID=406987&#406987)

# javascript - d3转换后调用函数

> ID：13795610
> 
> 赞同：3
> 
> 时间：2012-12-10T05:39:29.907
> 
> 标签：javascript, d3.js

这是我的代码：

```
var text = container.append('text');
text.text('text')
          .attr('transform',function(){
            return "translate(" + x1 + "," + y1 + ")"
          })
          .transition()
          .attr('transform',function(){
            return "translate(" + x2 + "," + y2 + ")";
          });
 addTextBackground(text); 
```

将文本传递给函数 addTextBackground，我发现变换 attr 中的值仍然是 x1, y1 而不是 x2, y2。似乎在转换之前调用了 addTextBackground 。过渡后如何调用它？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T05:45:35.500

我想到了。使用 each('end',callback) 像：

```
text.text('text')
          .attr('transform',function(){
            return "translate(" + x1 + "," + y1 + ")"
          })
          .transition()
          .attr('transform',function(){
            return "translate(" + x2 + "," + y2 + ")";
          })
          .each('end',function(){addTextBackground(d3.select(this))}); 
```

# mysql - 按制造商获取所有相关类别，5 个表格

> ID：13795612
> 
> 赞同：0
> 
> 时间：2012-12-10T05:39:40.650
> 
> 标签：mysql, relational-database

为商店构建报告并尝试按制造商 ID 获取类别。做 MySQL 查询不走运（经验几乎为零，呵呵），但我有这个：

![制造商-产品-product_category-category-category_description](../Images/19266e1c05bf5a066b4efec8c3477253.png)

## 表架构

```
CREATE SCHEMA IF NOT EXISTS `table` DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ;
USE `table` ;

-- -----------------------------------------------------
-- Table `table`.`category_description`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `table`.`category_description` (
  `category_id` INT(11) NOT NULL AUTO_INCREMENT ,
  `name` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`category_id`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `table`.`category`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `table`.`category` (
  `category_id` INT(11) NOT NULL AUTO_INCREMENT ,
  `image` VARCHAR(255) NULL ,
  PRIMARY KEY (`category_id`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `table`.`manufacturer`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `table`.`manufacturer` (
  `manufacturer_id` INT(11) NOT NULL AUTO_INCREMENT ,
  `name` VARCHAR(64) NOT NULL DEFAULT '' ,
  PRIMARY KEY (`manufacturer_id`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `table`.`product`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `table`.`product` (
  `product_id` INT(11) NOT NULL AUTO_INCREMENT ,
  `manufacturer_id` INT(11) NOT NULL ,
  `name` VARCHAR(45) NULL ,
  PRIMARY KEY (`product_id`) ,
  INDEX `product_manufacturer` (`manufacturer_id` ASC) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `table`.`product_category`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `table`.`product_category` (
  `product_id` INT(11) NOT NULL ,
  `category_id` INT(11) NOT NULL ,
  PRIMARY KEY (`product_id`, `category_id`) ,
  INDEX `product_to_category_product_id` (`product_id` ASC) ,
  INDEX `product_to_category_category_id` (`category_id` ASC) )
ENGINE = InnoDB;

-- Sorry if example data is not provided 
```

## MySQL 查询

```
SELECT category_description.name, category.category_id
FROM manufacturer
  JOIN product ON product.manufacturer_id = manufacturer.manufacturer_id
  JOIN product_to_category ON product_to_category.product_id = product.product_id
  JOIN category ON category.category_id = product_to_category.category_id
  JOIN category_description ON category_description.category_id = category.category_id
  WHERE manufacturer.manufacturer_id = 7 
```

查询结果有很多`category_description.name`重复的行（我猜是继承自我的新手查询）

架构基于产品，而是选择制造商的想法，那么获得与其产品相关的所有类别都获得（独特）。

由于缺乏构建查询的知识，我有货

**编辑**：很抱歉，更正了`category`表行名称（`category.image`改为`category.name`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:04:42.377

给你（[sqlfiddle](http://sqlfiddle.com/#!2/a740f/6/0)）：

```
SELECT DISTINCT category_description.name, category.category_id
FROM product
  JOIN product_category ON product_category.product_id = product.product_id
  JOIN category ON category.category_id = product_category.category_id
  JOIN category_description ON category_description.category_id = category.category_id
  WHERE product.manufacturer_id = 1 
```

a) 不要链接你不需要的表

b) 用于`DISTINCT`清理被剪断的曾经不同的数据（即产品，此处）生成的欺骗。

c）不要拼错表名：p

# php - SQLanywhere 工作控制台，但不在本地主机上使用 PHP

> ID：13795614
> 
> 赞同：1
> 
> 时间：2012-12-10T05:39:47.483
> 
> 标签：php, apache, sqlanywhere

我有一个 linux 设置（cent os），我完美地安装了 Sqlanywhere 12，当我使用带有 PHP 模块的控制台时一切正常。我可以使用 php 文件访问数据库...

唯一的事情是我需要强制控制台中的 LD_LIBRARY_PATH 使其工作。

```
LD_LIBRARY_PATH=:$LD_LIBRARY_PATH/opt/sqlanywhere12/lib64/
export LD_LIBRARY_PATH 
```

然后它完美地工作

但现在我还需要通过使用浏览器的简单请求（例如 test.php）使其工作。一直告诉我与数据库的连接失败。

我想知道是否是由于 LD_LIBRARY_PATH 未导出到 htppd 服务，我尝试了几件事但没有成功（httpd.conf 文件、脚本、..）

Sqlanywhere 运行良好，所有 .so 文件都在那里，服务器正在运行，...

我想这是我想念的地方的一个小配置

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T12:56:26.120

您需要添加以下行

. /opt/sqlanywhere12/bin64/sa_config.sh

进入文件 /etc/init.d/httpd

那应该行得通。

# keychain - 钥匙串助手不创建公钥/私钥对，我的分发证书未通过协同签名验证

> ID：13795615
> 
> 赞同：1
> 
> 时间：2012-12-10T05:39:59.937
> 
> 标签：keychain, private-key, public-key

我的证书今天到期（此时，它已经完全过期），所以我开始更新证书。但问题是，我无法使用更新的证书获得匹配的私钥/公钥以进行正确的代码签名验证。我读过的所有内容都说钥匙串会自动创建匹配的公钥/私钥，但它不是为我做的。我完全被难住了，我不知道此时我能做什么。请帮忙。这是我到目前为止所做的：

1) 我从 Apple Developer > iOS Provisioning Portal > Certificates > Developer and Distribution 选项卡吊销了证书。

2) 我从 Applications > Utilities 启动了 Keychain Access.app。

3) 我删除了所有过时的证书，最终删除了除 Apple 代码签名证书颁发机构、Apple 全球开发者关系证书颁发机构、仪表板咨询和软件签名之外的所有内容。（顺便说一句，我不知道这个“软件签名”证书是做什么用的，但它要到 2015 年才会到期，我不愿意删除它，但不知道如果我删除它会对系统造成什么影响。 )

4) 我通过 Keychain Access > Certificate Assistant > Request a Certificate From a Certificate Authority 生成 CertificateSigningRequest.certSigningRequest

5) 在桌面上获得 CertificateSigningRequest.certSigningRequest。（此时，我检查了钥匙串，我仍然看不到我的私钥或公钥。

6) 我在 Apple Developer > iOS Provisioning Portal > Certificates > Developer and Distribution 选项卡上提交 CertificateSigningRequest.certSigningRequest。

7）我下载证书，将它们安装到钥匙串，看起来我的证书现在又续订了一年。

8) 我更新了所有配置文件。

9) 我将它们检索到我的 Xcode。

10）我生成了新的分发版本，然后我收到警告“应用程序未通过协同签名验证。签名无效，包含不允许的权利，或者未使用 iPhone 分发证书签名。”

11）我再次查看钥匙串，我没有看到我的私钥或公钥。

12) 好吧，我在一年前导出了 p12 文件。所以，好吧，我重新开始（即，执行步骤 1、2 和 3。）然后我导入 p12 文件。现在我在钥匙串中看到了我的私钥。

13) 然后我继续执行上面的第 4 步（即，通过 Keychain Access > Certificate Assistant > Request a Certificate From a Certificate Authority 获取 CertificateSigningRequest.certSigningRequest）

14) 我继续执行第 5 步到第 8 步。为了确保，我再次重新启动我的机器。然后我检查了我的钥匙串，公钥仍然丢失，执行第 9 步和第 10 步的结果完全相同。

我究竟做错了什么？我应该怎么做才能解决这个问题？我非常感谢任何和所有的帮助。

* * *

编辑：我不完全确定我采取的哪些步骤实际上最终解决了这个问题，但我现在让它工作了。主要的是，从钥匙串中删除所有内容并在整个网络上寻找可能的原因，我也确实阅读了这个帖子：

[http://hints.macworld.com/article.php?story=20060318124936642](http://hints.macworld.com/article.php?story=20060318124936642)

并运行以下命令：

须藤系统钥匙串-vfcC

系统钥匙串-vt

我还继续寻找如何修复钥匙串、运行磁盘实用程序、修复所有权限问题等。

最终，我的钥匙串访问应用程序再次开始按预期工作，并最终生成了私钥和公钥。啊。一旦这样做了，其他一切都正常，按照我之前采取的步骤进行。

# mysql - percona mysql 5.5.25a 服务器复制速度非常慢

> ID：13795618
> 
> 赞同：2
> 
> 时间：2012-12-10T05:40:11.337
> 
> 标签：mysql, percona

我已经使用 Percona 5.5.25a 服务器设置 MySQL 复制作为 MySQL 5.0.95 主服务器的从属服务器。奴隶追上主人的速度很慢。它现在落后于主人大约 4 天。master 和 slave 都运行在 VM 节点上。两个节点的物理配置相同。两者的 MySQL 配置也相同。

当我把slave换成5.0.95后，slave立马赶上来，从不落后master。

我使用 Innodb 作为引擎。最初，当复制开始时，从站上的 Innodb 状态显示复制期间表上有锁。此表上的每次更新都会导致锁定保持大约 15 到 20 分钟。我在复制中忽略了这个表。在此之后，从站中没有观察到锁。但是slave上的QPS只有4。以这个速率，slave永远赶不上master。

任何有关如何解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T05:01:04.740

SHOW ENGINE INNODB STATUS 检查任何死锁原因！

# android - 在列表项中使用 Spinner 不会触发 OnItemClik

> ID：13795619
> 
> 赞同：0
> 
> 时间：2012-12-10T05:40:12.523
> 
> 标签：android, events, listview

我有一个`ListView`其中每个列表项都有一个`Spinner`. 通过在适配器中实现并将其添加到适配器中，我已经成功地`OnItemSelectedListener`为每个微调器添加了一个。`OnItemSelectedListener``Activity``GetView()`

问题是，我还必须`OnItemClickListener`在`ListView`. `Activity`我已经这样做了，但是在正常列表项上的 Item Click 事件并没有被触发。但是，它会因为列表部分标题（没有微调器）而被解雇。

如何也触发列表项的事件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T05:46:05.873

试试这个，

将以下属性添加到您的 Spinner 元素，

```
android:focusable=false 
```

问题是因为微调器是一个具有可点击属性的元素，它将控制您的点击事件，因此您的列表视图将没有机会处理点击事件。通过添加上述属性，您可以使微调器和列表视图都正常工作。

如果它仍然不起作用，请尝试将其添加到您的 listview 元素 xml 的最顶层布局中，

```
android:descendantFocussability=blocksDescendants 
```

# android - 如何在android中绘制条形图？

> ID：13795620
> 
> 赞同：3
> 
> 时间：2012-12-10T05:40:14.100
> 
> 标签：android, database, bar-chart, achartengine

我使用 achartengine 创建了一个条形图，但图中绘制的值是静态的。现在我已经使用 sqlite 创建了一个数据库，我想使用数据库中的值绘制条形图并每 1 分钟刷新一次，以便绘制新值（如果有）。我在下面发布我的代码。请指导我如何修改代码，以便我可以执行上述操作。我在网上尝试了很多教程，但没有太大帮助。

```
package flu.solutions.travelsense;

import java.util.ArrayList;
import java.util.List;

import org.achartengine.ChartFactory;
import org.achartengine.chart.BarChart.Type;
import org.achartengine.model.CategorySeries;
import org.achartengine.model.XYMultipleSeriesDataset;
import org.achartengine.renderer.SimpleSeriesRenderer;
import org.achartengine.renderer.XYMultipleSeriesRenderer;
import org.achartengine.renderer.XYMultipleSeriesRenderer.Orientation;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;  
import android.view.Menu;
public class ChartActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Intent intent = createIntent();
        startActivity(intent);

    }

    public Intent createIntent() 

     {

    String[] titles = new String[] { "Top 10 Destinations", " " };
    List<double[]> values = new ArrayList<double[]>();
    values.add(new double[] { 8, 6, 7, 6, 7, 7, 9, 5, 7, 8, 8 });
    values.add(new double[] {});

    int[] colors = new int[] { Color.RED, Color.BLACK};

    XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
    renderer.setOrientation(Orientation.HORIZONTAL);

    setChartSettings(renderer, "Top 10 Destinations", " ", " ", 0,10, 0,10, Color.GRAY, Color.GREEN);

    renderer.setXLabels(1);
    renderer.setYLabels(10);

    renderer.addXTextLabel(1, "Bangalore");
    renderer.addXTextLabel(2, "Mysore");
    renderer.addXTextLabel(3, "Chennai");
    renderer.addXTextLabel(4, "Delhi");
    renderer.addXTextLabel(5, "Kolkatta");
    renderer.addXTextLabel(6, "Kashmir");
    renderer.addXTextLabel(7, "Hyderabad");
    renderer.addXTextLabel(8, "Mumbai");
    renderer.addXTextLabel(9, "Kerala");
    renderer.addXTextLabel(10, "Gujarat");

    int length = renderer.getSeriesRendererCount();
    for (int i = 0; i < length; i++) 
    {
      SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
      seriesRenderer.setDisplayChartValues(false);
      }

    return ChartFactory.getBarChartIntent(this, buildBarDataset(titles, values), renderer,Type.DEFAULT);
    }

    protected XYMultipleSeriesRenderer buildBarRenderer(int[] colors) 
    {

    // creates a SeriesRenderer and initializes it with useful default values as well as colors

        XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();

        renderer.setAxisTitleTextSize(26);

        renderer.setChartTitleTextSize(20);

        renderer.setLabelsTextSize(15);

        renderer.setLegendTextSize(25);

        int length = colors.length;

        for (int i = 0; i < length; i++) 
        {
          SimpleSeriesRenderer r = new SimpleSeriesRenderer();
          r.setColor(colors[i]);
          //r.setChartvalueAngle(-90);
          r.setChartValuesSpacing(15);
          renderer.addSeriesRenderer(r);
        }
        return renderer;
      }

       protected void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle,
       String yTitle, double xMin, double xMax, double yMin, double yMax, int axesColor,int labelsColor) 
      {

      // sets lots of default values for this renderer

       renderer.setChartTitle(title);

       renderer.setXTitle(xTitle);
       renderer.setYTitle(yTitle);

       renderer.setXAxisMin(xMin);
       renderer.setXAxisMax(xMax);

       renderer.setYAxisMin(yMin);
       renderer.setYAxisMax(yMax);

       renderer.setAxesColor(axesColor);
       renderer.setLabelsColor(labelsColor);

       renderer.setApplyBackgroundColor(true);
       renderer.setBackgroundColor(Color.WHITE);

       renderer.setBarSpacing(1);

    }

    protected XYMultipleSeriesDataset buildBarDataset(String[] titles, List<double[]> values) 
    {

        // adds the axis titles and values into the dataset

        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        int length = titles.length;

        for (int i = 0; i < length; i++) 
        {
          CategorySeries series = new CategorySeries(titles[i]);
          double[] v = values.get(i);
          int seriesLength = v.length;
          for (int k = 0; k < seriesLength; k++) 
          {
            series.add(v[k]);
          }

          dataset.addSeries(series.toXYSeries());
         }
        return dataset;
        }

    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_chart, menu);
        return true;
    }
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T11:43:57.687

您可以使用以下内容：achartengine、AndroidPlot 或 charts4j。如果您想以编程方式执行此操作，那么这里有一个程序：

```
public class BarchartsampleActivity extends Activity {
    /** Called when the activity is first created. */

    static XYMultipleSeriesDataset dataset;
    static XYMultipleSeriesRenderer renderer;
    static XYSeriesRenderer rendererSeries;
    static CategorySeries series;
    static GraphicalView mChartView;
    String xvalstring1,xvalstring2,xvalstring3,xvalstring4,xvalstring5;
    int xvalint1,xvalint2,xvalint3,xvalint4,xvalint5;

     public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        LinearLayout layout = (LinearLayout) findViewById(R.id.linearlayout);
        Intent intent=getIntent();
        xvalstring1=intent.getStringExtra("xvalstring1").toString().trim();
        xvalstring2=intent.getStringExtra("xvalstring2").toString().trim();
        xvalstring3=intent.getStringExtra("xvalstring3").toString().trim();
        xvalstring4=intent.getStringExtra("xvalstring4").toString().trim();
        xvalstring5=intent.getStringExtra("xvalstring5").toString().trim();     
        xvalint1=Integer.parseInt(xvalstring1);
        xvalint2=Integer.parseInt(xvalstring2);
        xvalint3=Integer.parseInt(xvalstring3);
        xvalint4=Integer.parseInt(xvalstring4);
        xvalint5=Integer.parseInt(xvalstring5);

     String[] titles = new String[] { "USER INPUTS" };
        List<double[]> x = new ArrayList<double[]>();
        x.add(new double[] { 1, 2, 3, 4, 5});
        List<double[]> values = new ArrayList<double[]>();
        values
                .add(new double[] { xvalint1,xvalint2,xvalint3,xvalint4,xvalint5 });
        dataset = new XYMultipleSeriesDataset();
        renderer = new XYMultipleSeriesRenderer();
        renderer.setChartTitle("USER INPUTS");
        renderer.setXTitle("X");
        renderer.setYTitle("Y");
        renderer.setXLabelsAlign(Align.RIGHT);
        renderer.setYLabelsAlign(Align.RIGHT);
        renderer.setXAxisMin(0);
        renderer.setXAxisMax(10);
        renderer.setYAxisMin(0);
        renderer.setYAxisMax(40);
        renderer.setClickEnabled(false);
        renderer.setExternalZoomEnabled(false);
        renderer.setZoomButtonsVisible(true);
        renderer.setPanLimits(new double[] { 0,5,0,100 });
        renderer.setZoomLimits(new double[] { -10, 20, -10, 40 });
        renderer.setShowGrid(true);
        /*renderer.setPanEnabled(false, false);
        renderer.setZoomEnabled(false, false);*/
        renderer.setBarSpacing(1.5);
        renderer.setLabelsColor(Color.BLUE);
        renderer.setAxisTitleTextSize(16);
        renderer.setChartTitleTextSize(20);
        renderer.setLabelsTextSize(15);
        renderer.setLegendTextSize(15);
        renderer.setMargins(new int[] {20, 30, 15, 20});
        renderer.setBackgroundColor(Color.GREEN);
        renderer.setMarginsColor(Color.GREEN);
        rendererSeries = new XYSeriesRenderer();
        rendererSeries.setColor(Color.GREEN);
        rendererSeries.setDisplayChartValues(true);
        renderer.addSeriesRenderer(rendererSeries);

      if (mChartView == null) {
            Log.d("Oncreate ", "if (mChartView == null)");
            mChartView = ChartFactory.getBarChartView(this, mDataset(titles,
                    x, values), renderer, Type.DEFAULT);
            layout.addView(mChartView, new LayoutParams(
                    LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

        } else {
    //              mChartView.repaint();
                Log.d("Oncreate ", "if (mChartView != null)");
        }
    }    
    private XYMultipleSeriesDataset mDataset(String[] titles,
            List<double[]> xValues, List<double[]> yValues) {
        // TODO Auto-generated method stub
        XYMultipleSeriesDataset dataset1 = new XYMultipleSeriesDataset();
        addXYSeries(dataset1, titles, xValues, yValues, 0);
        return dataset1;
    }
    private void addXYSeries(XYMultipleSeriesDataset dataset, String[] titles,
            List<double[]> xValues, List<double[]> yValues, int scale) {
        // TODO Auto-generated method stub

        int length = titles.length;
        for (int i = 0; i < length; i++) {
            XYSeries series = new XYSeries(titles[i], scale);
            double[] xV = xValues.get(i);
            double[] yV = yValues.get(i);
            int seriesLength = xV.length;
            for (int k = 0; k < seriesLength; k++) {
                series.add(xV[k], yV[k]);

            }
            dataset.addSeries(series);
        }

    }
} 
```

# javascript - jquery 对话框外部页面事件未触发

> ID：13795621
> 
> 赞同：0
> 
> 时间：2012-12-10T05:40:14.430
> 
> 标签：javascript, jquery-ui, jquery

我使用 jquery 对话框打开一个 html 页面。

```
var url = "Popup.htm";
$('<div id=DialogDiv>').dialog({
            dialogClass: 'DynamicDialogStyle',
            modal: true,
            open: function () {
                $(this).load(url);
            },
            close: function (e) {
                $(this).empty();
                $(this).dialog('destroy');
            },
            height: 350,                              
            width: 540,
            title: 'Lookup'
        }); 
```

上面的代码在模式对话框中打开 Popup.htm。Popup.htm 有一个按钮，但点击事件没有触发。请帮助。

```
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.22/jquery-ui.min.js"></script>
<title>PopUpView</title>
<script type="text/javascript">

    $(function () {

        $("#btnSearch").click(function () {                
            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: "http://localhost:3340/Service1.svc/FetchAllCompany",
                dataType: "json",
                success: function (data) {
                    alert('ok');
                    var div = $("#test").empty();
                    $(data.d).each(function (index, item) {
                        div.append(
                $("<tr>").append($("<td>").html(item.COMP_CODE))
                .append($("<td>").html(item.COMP_NAME))
                .append($("<td>").html(item.COMP_FRZ_FLAG)));
                    });
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {                        
                    debugger;
                }
            });

        });
    })

</script> 
```

```
<body>
<div id="MainContentDiv">
    <label>Search</label>
    <input />
    <button id="btnSearch">...</button>
    <div>
        <table id="test">    
        </table>
    </div>
</div> 
```

btnSearch 的点击事件未触发

# unity3d - 在 Unity3D 中为控制器创建管理器

> ID：13795624
> 
> 赞同：2
> 
> 时间：2012-12-10T05:40:21.417
> 
> 标签：unity3d, game-engine

我想在 Unity3D 中制作一个主要的 Gameobject，它将充当与控件相关的任何内容的命令中心，以便游戏中需要知道玩家是否尝试正确移动的任何组件都会收到通知或状态更改并采取行动因此。我对 Unity 中的编程和脚本编写有点陌生，所以我知道这是可能的，但我不知道如何专门使用引擎来做到这一点。

我遇到的几个概念是：

*   状态改变技术
*   单身神班
*   带有向上发送消息并向下接收消息的子对象的父游戏对象
*   抽象类的继承，这些抽象类充当接口并实现到某个集合中并迭代以获取调用的消息

如果你们对这个主题有任何见解，那就太好了。我基本上想找出解决这个问题的好方法，如何决定一个好的方法（优点与缺点），或者我是否完全错了。:)

我正在寻找的只是您为此目的选择的方法的实现示例。无需进入每个单独的方法。也许简要说明您决定使用模式的原因会很棒！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:49:53.390

好吧，您可以使用 C#[事件](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)： 1) 创建您的 CommandCenter 类（MonoBehaviour），在那里实现一些您需要共享的事件，并创建一些公共方法来调用 tham。2）每当您处理按钮播放器按下时，调用CommandCenter中的方法，该方法调用事件（或者，您可以将事件公开并直接调用tham）3）在每个组件中，女巫应该知道一些事件，在`Awake`方法中，请执行下列操作：

```
var commandCenter =  FindObjectOfType(CommandCenter);
commandCenter.MyEvent += localMyEventHandler; 
```

4）不要忘记取消订阅销毁事件：

```
OnDestroy ()
{
var commandCenter =  FindObjectOfType(CommandCenter);
commandCenter.MyEvent -= localMyEventHandler;
} 
```

5）因此，在`localMyEventHandler`方法中您可以处理此事件。

# ruby-on-rails - Backbone + Coffeescript + Rails App Init 问题（2 级命名空间）：无法读取未定义的属性“IndexView”

> ID：13795626
> 
> 赞同：0
> 
> 时间：2012-12-10T05:40:40.230
> 
> 标签：ruby-on-rails, backbone.js, namespaces, coffeescript

我是 Backbone + Coffeescript + Rails 的新手，我一直在初始化应用程序。main_app.js.coffee 是：

```
#= require_self
#= require_tree ./templates
#= require_tree ./models
#= require_tree ./views
#= require_tree ./routers

class window.BackofficeApp
  Models: {}
  Collections: {}
  Routers: {}
  Views: {}

  sanity:-> true

  constructor: ->
        console.log "go backofficeapp!"
        new BackofficeApp.Router()
        try
            Backbone.history.start() 
```

路由器还是很简单的：

```
class BackofficeApp.Router extends Backbone.Router

    routes:
        "": "index",
        "users": "users",
        "csense": "csense"

    index: ->
        console.log "index called from router!"
        view = new BackofficeApp.Views.IndexView()
        $('#main-app').html(view.render().el)

    users: ->
        console.log "users"

    csense: ->
        console.log "contentsense!" 
```

还有 IndexView：

```
class BackofficeApp.Views.IndexView extends Backbone.View    

    render: ->
        template = JST['index_view']
        $(@el).html(template);
        console.log "index called from indexview!"
        this 
```

一切都从 jQuery 开始（准备好文档）：

```
jQuery ->
    new BackofficeApp() 
```

但是我们在控制台中看到以下消息/错误：

```
Uncaught TypeError: Cannot read property 'IndexView' of undefined
go backofficeapp!
index from router! 
```

如果我将 .Views 从 IndexView 类声明中取出，它可以工作......但是，由于应用程序是中型到大型，我们希望在命名类时使用 2 个（或更多）级别。

我们做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:15:45.577

这不会像您认为的那样做：

```
class window.BackofficeApp
  Models: {}
  Collections: {}
  Routers: {}
  Views: {} 
```

这将创建`window.BackofficeApp`but `Models`, `Collections`, ... 将附加到 `BackofficeApp.prototype`而不是`BackofficeApp`自身。JavaScript 版本是这样的：

```
window.BackofficeApp = (function() {
  function BackofficeApp() {}
  BackofficeApp.prototype.Models = {};
  BackofficeApp.prototype.Collections = {};
  BackofficeApp.prototype.Routers = {};
  BackofficeApp.prototype.Views = {};
  return BackofficeApp;
})(); 
```

我认为您想制作`Models`和朋友类属性：

```
class window.BackofficeApp
  @Models: {}
  @Collections: {}
  @Routers: {}
  @Views: {} 
```

这将创建`BackofficeApp.Models`, `BackofficeApp.Collections`, ... 这样你就可以说：

```
class BackofficeApp.Views.IndexView extends Backbone.View
  #... 
```

`TypeError`没有看到

# ruby - ruby send 方法传递多个参数

> ID：13795627
> 
> 赞同：141
> 
> 时间：2012-12-10T05:40:42.220
> 
> 标签：ruby

尝试通过动态创建对象和调用方法

```
Object.const_get(class_name).new.send(method_name,parameters_array) 
```

什么时候工作正常

```
Object.const_get(RandomClass).new.send(i_take_arguments,[10.0]) 
```

但是抛出错误数量的参数 1 for 2 for

```
Object.const_get(RandomClass).new.send(i_take_multiple_arguments,[25.0,26.0]) 
```

定义的随机类是

```
class RandomClass
def i_am_method_one
    puts "I am method 1"
end
def i_take_arguments(a)
    puts "the argument passed is #{a}"
end
def i_take_multiple_arguments(b,c)
    puts "the arguments passed are #{b} and #{c}"
end
    end 
```

有人可以帮助我如何动态地将多个参数发送到 ruby​​ 方法

* * *

## 回答 #1

> 赞同：260
> 
> 时间：2012-12-10T05:53:25.247

```
send("i_take_multiple_arguments", *[25.0,26.0]) #Where star is the "splat" operator 
```

或者

```
send(:i_take_multiple_arguments, 25.0, 26.0) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-06-16T17:10:07.770

您可以交替调用`send`它的同义词`__send__`：

```
r = RandomClass.new
r.__send__(:i_take_multiple_arguments, 'a_param', 'b_param') 
```

顺便说一句*您可以将哈希作为参数逗号分隔，如下所示：

```
imaginary_object.__send__(:find, :city => "city100") 
```

或新的哈希语法：

```
imaginary_object.__send__(:find, city: "city100", loc: [-76, 39]) 
```

根据 Black的说法，`__send__`命名空间更安全。

> “发送是一个广泛的概念：发送电子邮件，将数据发送到 I/O 套接字，等等。程序定义一个名为 send 的方法与 Ruby 的内置 send 方法冲突的情况并不少见。因此，Ruby 为您提供了另一种调用 send: 的方法`__send__`。按照惯例，从来没有人用那个名字写过方法，所以内置的 Ruby 版本总是可用的，并且永远不会与新编写的方法发生冲突。它看起来很奇怪，但从方法名称冲突的角度来看，它比普通发送版本更安全”</p>

`__send__`Black 还建议包装对in 的调用`if respond_to?(method_name)`。

```
if r.respond_to?(method_name)
    puts r.__send__(method_name)
else
    puts "#{r.to_s} doesn't respond to #{method_name}"
end 
```

参考：Black，David A. 扎实的 Rubyist。曼宁，2009 年。第 171 页。

*我来这里是为了寻找 的哈希语法`__send__`，所以可能对其他谷歌用户有用。;)

# php - 使用选定复选框中的选项从 mySQL 检索结果

> ID：13795632
> 
> 赞同：0
> 
> 时间：2012-12-10T05:41:29.513
> 
> 标签：php, mysql

我在 PHP 中有一个简单的表单，有 4 个复选框。用户可以选择 0-4 个复选框，根据他们的选择，结果应该不同。

基本上，四个复选框代表大学的四个校区——校区 A、B、C、D。并假设如果用户选择 2 个校区说 A 和 C。那么我想根据选择查询数据库并检索与这两个校区 A 和 C 对应的课程。如果用户只选择一个校区，那么我想检索课程在那个单一的校园里。

在 mySQL 上，我有一个具有以下模式（ID、校园名称、城市、州）的 Location 表，其中 ID 是主键。我还有一个课程表，其架构为 Course(ID,CourseName,LocationID,Seatsleft)。ID是主键，LocationID是外键，引用Location表的ID。

我的PHP代码如下：

这是我的代码的更新版本。

选择不同校区的 PHP 表单复选框

```
<body>

<?php
require 'connection.php';

    if(isset($_POST['formSubmit'])) 
    {
        $aCampus = $_POST['campus'];

        if(empty($aCampus)) 
        {
            echo("<p>You didn't select any campus.</p>\n");
        } 
        else 
        {
            $N = count($aCampus);

            echo("<p>You selected $N campus(s): ");
            for($i=0; $i < $N; $i++)
            {
                echo($aCampus[$i] . " ");
            }
            echo("</p>");
        }

    }

    function IsChecked($chkname,$value)
    {
        if(!empty($_POST[$chkname]))
        {
            foreach($_POST[$chkname] as $chkval)
            {
                if($chkval == $value)
                {
                    return true;
                }
            }
        }
        return false;
    }

    $where="1";

    if(!empty($_POST['campus'])){
    foreach ($_POST['campus'] as $campus){

       $where=" LocationID='". $campus."'";
       }
    }

//$query = "SELECT `Name` FROM `course` WHERE LocationID=1";
$query="SELECT `Name` FROM  `course` WHERE 1 AND (".$where.")";

if ($query_run = mysql_query($query)) {

while ($query_row = mysql_fetch_assoc($query_run)) {

$coursename =$query_row['Name'];
echo $coursename. '<br/>';

}
} else {
echo mysql_error();

}

?>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
    <p>
        Which campus courses do you want to get access to?<br/>
        <input type="checkbox" name="campus[]" value=1 />Campus A<br />
        <input type="checkbox" name="campus[]" value=2 />Campus B<br />
        <input type="checkbox" name="campus[]" value=3 />Campus C<br />
        <input type="checkbox" name="campus[]" value=4 />Campus D

    </p>

    <input type="submit" name="formSubmit" value="Submit" />
</form>

</body>
</html> 
```

我的问题是如何从我的 PHP 表单中获取选项并查询数据库以仅从选定的校园检索课程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:09:32.523

请尝试以下简单的查询创建者逻辑。

```
 $whereArr =Array();
    $whereArr[] = 1;
    if(!empty($_POST['campus'])){
    foreach ($_POST['campus'] as $campus){
        $whereArr[]="  LocationID LIKE ',". $campus.",'";
       }
    }
   $query="SELECT `Name` FROM  `course` WHERE 1 AND(".implode(" OR ",$whereArr)." )"; 
```

以上代码适用于以下记录：

```
289,"Math","2,3,",67 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:04:01.153

在这种情况下，我会将校园作为逗号分隔的字符串存储在数据库中。然后你可以使用`FIND_IN_SET()`mySQL中的函数来查询

例如

课程记录

```
203,"Biology","1,2,4",34 
```

那么你也能

```
SELECT * FROM course WHERE FIND_IN_SET(4,locationid) 
```

这将为您提供`4`“集合”中的所有记录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T06:33:47.107

像这样的东西：

```
$validoptions = array('A','B','C','D');
$allvalid = true;
foreach ($_POST['campus'] as $campus){ 
    if (!in_array($campus,$validoptions)) $allvalid = false;
}
if (!$allvalid) {
    echo 'Wrong campuses selected. Try again.';
    exit;
}
$query = 'SELECT * FROM `Courses` WHERE ';
$query .= 'LocationID = \''.implode('\' OR LocationID = \'',$campuses).'\'';
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) die('Could not connect: ' . mysql_error());
mysql_select_db("databasename");
$res = mysql_query($query);
$data = array();
if ($res && mysql_num_rows()) {
     $data = array();
     while($d = mysql_fetch_array($res)) {
         $data[] = $d;
     }
}
if (count($data) > 0) {
    echo 'No courses found !';
}else {
    echo 'Courses found : ';
    print_r($data);
} 
```

# javascript - 使页面响应触摸

> ID：13795633
> 
> 赞同：0
> 
> 时间：2012-12-10T05:41:39.073
> 
> 标签：javascript, html

我正在尝试使用[画布照片](http://code.google.com/p/canvas-photo)，但无法使其对移动/标签有用。

您能否指导我如何使此脚本响应触摸事件。我的 Android Stock 浏览器在打开脚本时也崩溃了。

在此处查看[演示](http://www.ernestdelgado.com/public-tests/canvasphoto/demo/canvas.html)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:20:16.203

我总是用这样的东西

```
var touchdevice = ('ontouchstart' in window);
var START_EVENT = touchdevice ? 'touchstart' : 'mousedown';
var MOVE_EVENT = touchdevice ? 'touchmove' : 'mousemove';
var END_EVENT = touchdevice ? 'touchend' : 'mouseup'; 
```

并在这样的代码中使用它：

```
$('#something1').on(START_EVENT, function (event) {
  dosomething1(event);
});
$('#something2').on(END_EVENT, function (event) {
  dosomething2(event);
});
$('#something3').on(MOVE_EVENT, function (event) {
  dosomething3(event);
}) 
```

这将在“鼠标”和“触摸”事件之间自动切换

# jquery - 如何使 Jqplot 条形图点标签垂直对齐。？

> ID：13795649
> 
> 赞同：2
> 
> 时间：2012-12-10T05:43:54.113
> 
> 标签：jquery, jqplot

我正在制作一个几乎不需要帮助的图表。（我已经用谷歌搜索了很多但无法成功，这就是为什么要问。 - 如果可能重复我道歉。）![在此处输入图像描述](../Images/69f3a0749b6368b9f6ac73b95b8e0d4b.png)

我的代码：

```
var plot2 = $.jqplot('distance_graph', data.distance, {
                // The "seriesDefaults" option is an options object that will
                // be applied to all series in the chart.
                seriesDefaults:{
                    renderer:$.jqplot.BarRenderer,
                    rendererOptions: {fillToZero: false},
                    pointLabels: { show: true },
                },
                // Custom labels for the series are specified with the "label"
                // option on the series option.  Here a series option object
                // is specified for each series.

                // Show the legend and put it outside the grid, but inside the
                // plot container, shrinking the grid to accomodate the legend.
                // A value of "outside" would not shrink the grid and allow
                // the legend to overflow the container.
                legend: {
                    show: true,
                    placement: 'outsideGrid'
                },
                axes: {
                    // Use a category axis on the x axis and use our custom ticks.
                    xaxis: {
                        renderer: $.jqplot.CategoryAxisRenderer,
                        label: 'Date',
                        ticks: ticks,
                        labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
                        tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                        tickOptions: {
                            angle: -30
                        }
                    },
                    // Pad the y axis just a little so bars can get close to, but
                    // not touch, the grid boundaries.  1.2 is the default padding.
                    yaxis: {
                        label: 'Distance Travelled',
                        pad: 1.05,
                        labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
                        tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                        tickOptions: {
                          labelPosition:'middle'
                        },
                        min:min_val,
                        max:max_val     
                    }
                }
            });
        plot2.legend.labels = data.device;
        plot2.replot( { resetAxes: false } ); 
```

以及如何删除 0 值，因为我正在将此图表转换为多个项目的图表。这目前是一个项目的图表.. 那么如何删除 0 个标签也......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:08:19.423

基于这些示例：[point-labels](http://www.jqplot.com/tests/point-labels.php)，您可以使用`.jqplot-point-label`CSS 中的类修改点标签的显示。因此，您可以使用 CSS`transform`属性来旋转文本，如下所述：[how-to-draw-vertical-text-with-css-cross-browser](https://stackoverflow.com/questions/1080792/how-to-draw-vertical-text-with-css-cross-browser)

要删除 0 值的标签，您需要提供一组将零更改为空字符串的标签。您可以像这样使用此自定义集：

```
pointLabels: {
    show: true,
    labels: customSetOfLabels
}, 
```

这是[一个工作演示](http://jsfiddle.net/jfrej/dVuD2/)- 但是，看起来 jqPlot 会阻止来自 jsfiddle 的请求，因此有时脚本不会加载。您可以在本地尝试，也可以在一个浏览器窗口中访问[jqPlot 演示页面](http://www.jqplot.com/tests/point-labels.php)和 jsfiddle，以便从缓存中加载脚本。

我使用 JavaScript 数组[`map()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)函数来创建自定义标签集，如下所示：

```
function removeZeros(x){
    return x===0 ? '' : x;
}
var line1 = [14, 32, 41, 44, 0, 40];
var line1Labels = line1.map(removeZeros); 
```

请注意，这`map()`可能不适用于所有浏览器，因此您可能希望使用 for 循环来迭代数组。

# session - 如何整合 spring security 和 spring social 以在两种情况下具有相同的执行流程？

> ID：13795651
> 
> 赞同：0
> 
> 时间：2012-12-10T05:44:27.687
> 
> 标签：session, spring-security, spring-social

我在我的项目中使用 spring security 进行身份验证，其中在成功身份验证后，我得到了存储各种详细信息的主体对象。该主体对象被传递给允许条目在数据库中针对当前用户反映的各种方法。简而言之，principal 帮助我在我需要的任何地方提供 principal.getName()。

但是现在当我通过 spring social 登录时，我手头没有 Principal 的主体对象，而是实现了 MyPrincipal 类--->

```
public class MyPrincipal implements Principal {
public String name;
public boolean flag;

public boolean isflag() {
    return flag;
}

public void setFlag(boolean flag) {
    this.flag = flag;
}

public void setName(String name) {
    this.name = name;
}

@Override
public String getName() {
   return name;
}

} 
```

然后在社交登录处理程序中，我将当前用户名和标志值添加到 myPrincipal 对象，并将用户转发到弹簧安全在正常登录情况下转发的同一主页。

```
 MyPrincipal myPrincipal = new MyPrincipal();
                    myPrincipal.name = username;
                    myPrincipal.socialFlag = true;
                    modelMap.addAttribute("myPrincipal", myPrincipal);
                    return new ModelAndView("forward:/home"); 
```

通过使用注释类在会话中添加此对象

```
@SessionAttributes({"myPrincipal"}) 
```

现在从这里开始，我希望将流程移交给主页，并且所有功能都可以正确地为用户工作。但是每个方法都以 Principal 为参数，就像这样 -->

```
 @RequestMapping(value = {"/home"}, method = RequestMethod.POST)
 @ResponseBody
  public ModelAndView test(ModelMap modelMap, Principal principal) {
   String name = principal.getName();
 } 
```

在这两种情况下都会发生两种不同的事情——正常登录直接给我主体，但社交登录在会话属性中给我它。

即使在正常的弹簧安全登录的情况下，我也不想将主体作为参数传递，而是在这里我也想将它放在会话属性中。当我实现了自己的身份验证提供程序后，我该如何执行此操作以及在何处进行更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:14:21.663

我不认为我完全理解......但是，一般来说，没有必要传递主要实例。用于`org.springframework.security.core.context.SecurityContextHolder.getContext()`获取上下文，然后调用`SecurityContext.getAuthentication().getPrincipal()`或`SecurityContext.getAuthentication().getDetails()`。

# iphone - UIModalTransitionStyleFlipHorizo ntal 在横向模式下垂直翻转

> ID：13795656
> 
> 赞同：3
> 
> 时间：2012-12-10T05:45:17.373
> 
> 标签：iphone, ios, uinavigationcontroller, screen-orientation, uiviewanimationtransition

我正在开发一个横向模式的应用程序。在横向模式下进行 UIModalTransitionStyleFlipHorizo​​ntal 翻转时，它会垂直翻转。

有什么办法可以解决吗？

这是代码：

```
InfoViewController *vc = [[InfoViewController alloc] initWithNibName:@"InfoViewController" bundle:nil];
vc.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:vc animated:YES];
[vc release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T14:37:09.560

```
MyViewController *viewController = [[MyViewController alloc] init];

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.0];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UIView setAnimationBeginsFromCurrentState:YES];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.navigationController.view cache:YES];
[self.navigationController pushViewController:viewController animated:NO];
[UIView commitAnimations];
[viewController release]; 
```

检查这个...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:52:53.267

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

# python - 如何在 Python 2.7 中的 3 个随机数之间进行选择？

> ID：13795659
> 
> 赞同：4
> 
> 时间：2012-12-10T05:45:33.880
> 
> 标签：python, random, python-2.7

假设我想生成数字 1、4 或 7 之一。

我该怎么做？我原本以为我会写

```
import random
rand.randint(1,4,7) 
```

但这似乎不起作用。谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-10T05:47:01.787

使用随机选择

```
print random.choice([1,4,7]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T07:43:40.247

```
import random
import string
def random_number(length):
    return [random.choice(string.digits) for x in range(length)]

>>> random_number(5)
['0', '1', '1', '9', '0']
>>> random_number(2)
['5', '9']
>>> random_number(1)
['0']
>>> random_number(11)
['2', '3', '4', '7', '1', '8', '1', '9', '3', '6', '9']
>>> 
```

# printing - 使用 bytes.replace 时有没有办法使用通配符？

> ID：13795662
> 
> 赞同：2
> 
> 时间：2012-12-10T05:45:43.160
> 
> 标签：printing, replace, byte, go, wildcard

我正在使用 Go 进行编程，我读取了一个文本文件，并在其中替换了多个内容，以将代码从一种语言翻译成 Go 以便能够运行。我遇到的问题是，当尝试替换诸如 Println 语句之类的内容时，如果没有真正具体到我正在转换的代码，我就无法在语句末尾加上括号。有没有办法使用这样的代码？

```
src = bytes.Replace(src, []byte("Insert"), []byte("Println(" * ")"), -1) 
```

并且有能力在代码行的末尾加上一个括号吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:50:28.480

```
package main

import (
        "fmt"
        "regexp"
)

func main() {
        src := []byte(`
Write(1, 3, "foo", 3*qux(42));
WriteLn("Enter bar: ");
`)
        re := regexp.MustCompile(`Write\((.*)\);`)
        re2 := regexp.MustCompile(`WriteLn\((.*)\);`)
        src = re.ReplaceAll(src, []byte(`Print($1)`))
        src = re2.ReplaceAll(src, []byte(`PrintLn($1)`))
        fmt.Printf("%s", src)
} 
```

（也在[这里](http://play.golang.org/p/h7tDbWfjvZ)）

* * *

输出：

```
Print(1, 3, "foo", 3*qux(42))
PrintLn("Enter bar: ") 
```

# java - 在 JTextArea 中突出显示字符串

> ID：13795663
> 
> 赞同：2
> 
> 时间：2012-12-10T05:45:53.180
> 
> 标签：java, swing, highlight, jtextarea

> **可能重复：**
> [突出显示在框架中打开的文本文件的几个单词](https://stackoverflow.com/questions/12481698/highlighting-few-of-the-words-of-a-text-file-opened-in-a-frame)

我在其中找到一个字符串`JTextArea`，一旦找到该字符串，我想用某种颜色突出显示该字符串。我一直在互联网上寻找解决方案，但找不到答案。

如何突出显示中的字符串`JTextArea`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:50:59.877

您需要为此使用 a [`Highlighter`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Highlighter.html)。[这个](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)Oracle 教程应该让您走上正轨。

编辑：

`entry.getDocument().addDocumentListener(this);`：这会将当前类附加为特定对象的事件处理程序。没有这行代码你很可能可以做到。

`hilit.addHighlight(index, end, painter);`：这应该突出显示文本。

`entry.setBackground(entryBg);`：为给定项目设置背景。

我建议您复制教程中编写的代码并从那里开始。

# javascript - 交换原始字符串的一半

> ID：13795665
> 
> 赞同：0
> 
> 时间：2012-12-10T05:46:02.073
> 
> 标签：javascript, html

我可以编写一个函数来读取 id 为“message”的 HTML 文本框的内容，然后用原始字符串的值将其两半交换后写入 id 为“shuffled”的 HTML 元素吗？

例子：

```
"it" -> "ti"
"electric" -> "tricele"
"this laptop is lame" -> "op is lamethis lapt" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:00:57.460

是的，这是可能的，请查看：

```
var swap = function(str){
var half = Math.floor(str.length / 2);
return str.substr(half, str.length) + str.substr(0, half);
};

swap("electric"); // tricelec 
```

玩得开心 ：）

# html - html页面的快捷方式图片

> ID：13795668
> 
> 赞同：1
> 
> 时间：2012-12-10T05:46:15.873
> 
> 标签：html

对于我的个人用途，我正在创建一个网站，我希望在其中提供一个快捷方式图像，该快捷方式图像将显示在浏览器的选项卡中。我使用以下代码

```
<link rel="shortcut icon" href="image/logo/logo.png"/> 
```

但问题是，当我使用除 firefox 以外的任何其他浏览器时，快捷方式图像不会显示。我用 firefox 很好，但在所有其他情况下，它只是显示空白。知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:50:37.760

您需要设置类型，并将 href 指向 .ico 文件。

以下作品：

```
<link rel="shortcut icon" type="image/ico" href="/favicon.ico" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:54:10.870

***建议使用`.ico`文件而不是`.png`***

您可以将任何文件`.ico`从此处**[从 Pics 转换为 FavIcon](http://favicon.htmlkit.com/favicon/)**

然后试试这个：

```
<link rel="shortcut icon" href="your_file.ico" /> 
```

# c - 总线错误：10，在 C

> ID：13795670
> 
> 赞同：-3
> 
> 时间：2012-12-10T05:46:33.303
> 
> 标签：c

此代码在执行时给出**“总线错误：10” ：**

```
int main(int argc, char *argv[]) {
    int row, column, tick;
    char *prompt;
    char c;

    ...
    return 0;
    } 
```

但是，如果我注释掉`char c;`声明，程序运行良好：

```
int main(int argc, char *argv[]) {
    int row, column, tick;
    char *prompt;
    //char c; 

    ...
    return 0;
    } 
```

我真的不明白发生了什么。`char c;`只是一个声明，对吧？我没有在这里初始化任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T05:48:02.147

您正在遗漏带有错误的程序部分。如果您移动声明，您的程序似乎可以工作的原因是您正在重新排列堆栈以使其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:43:23.273

你在哪个 CPU 上运行？

总线错误可能意味着至少未对齐的内存访问，这通常是通过未初始化或损坏的指针访问内存的结果。

删除字符时程序不崩溃或不崩溃可能是更改代码的随机副作用。这并不意味着它只是那个字符，任何更改都可能导致或破坏它。

你有

```
char *prompt; 
```

这有点可疑。像这样不初始化指针是不明智的，首先将其（以及代码中的每个类似位置）更改为：

```
char *prompt = 0; // NULL 
```

因此，如果您在真正初始化之前使用它，您将得到分段错误而不是内存损坏。

# sql - 如何修复来自 SQL 选择联合的 Indeterminate TOP 1 结果

> ID：13795672
> 
> 赞同：1
> 
> 时间：2012-12-10T05:46:46.193
> 
> 标签：sql, sql-server

我正在从两个不同的表中选择一个 int 值，如下所示

```
select col1 from tablea
union 
select col1 from tableb 
```

要求是如果在第一个查询中找到结果，则使用该结果；否则，请查看第二个表。

```
select top 1 * from (select col1 from tablea union select col1 from tableb) as a 
```

问题是结果集的最高数值返回为`top 1`- 不是找到的第一个结果。

我不关心它的顺序中的数值 - 我只想应用优先级，如果从 select 1 中找到一个值不打扰运行第二个查询。

没有`top 1 *`我返回`3`和`6`。当我这样做时，如果我先做另一个选择， `top 1 *`我会得到相同的结果。`6`

帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T05:53:22.957

当您 UNION 这两个选择订单未定义时，您可以将其视为随机订单。因此，您应该定义顺序以获得正确的结果。例如：

```
select top 1 C1 from 
(select col1 as C1, 1 as c2 from tablea 
     union 
 select col1 as C1, 2 as c2 from tableb) as a 
ORDER BY C2 
```

# c++ - C函数反转char数组字符串

> ID：13795674
> 
> 赞同：0
> 
> 时间：2012-12-10T05:46:54.620
> 
> 标签：c++, c, arrays, string, char

> **可能重复：**
> [在 C 中反转字符串](https://stackoverflow.com/questions/784417/reversing-a-string-in-c)

我目前正在为一个项目从 C++ 切换到 C 编程，并且我对 Char 数组作为字符串做的不多。我需要一个函数来读取指向 char 数组的指针并将其反转。我用 C++ 编写了这个，使用字符串函数很容易，但我有点困惑 C 中是否有函数或其他东西是最好的方法。谢谢，我不一定要找人来完全完成代码，而是要为我指明正确的方向。如果它是简单的一条线，请随意，但不要做任何让您感到不舒服的事情。

```
#include<stdio.h>
#include<string.h>

void reverseString(char *myString)
{
    //reverse string here
}

int main(void)
{
    char myString[] = "This is my string!";
    reverseString(myString);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T05:49:16.353

最简单的方法：将字符串 char 逐个循环，然后以相反的顺序将每个 char 插入到另一个 char 数组中。

或者试试这个：2）

```
void reverse_string(char str[])
{
    char c;
    char *p, *q;

    p = str;
    if (!p)
        return;

    q = p + 1;
    if (*q == '\0')
        return;

    c = *p;
    reverse_string(q);

    while (*q != '\0') {
        *p = *q;
        p++;
        q++;
    }
    *p = c;

    return;
} 
```

3)

```
if( strlen( str ) > 0 ) {
   char* first = &str[ 0 ];
   char* last = &str[ strlen( str ) - 1 ];
   while( first < last ) {
       char tmp = *first;
       *first = *last;
       *last = tmp;
      ++first;
      --last; 
```

4)

```
char* strrev( char* s )
  {
  char  c;
  char* s0 = s - 1;
  char* s1 = s;

  /* Find the end of the string */
  while (*s1) ++s1;

  /* Reverse it */
  while (s1-- > ++s0)
    {
    c   = *s0;
    *s0 = *s1;
    *s1 =  c;
    }

  return s;
  } 
```

# c# - 如何引用不同文件中的变量？

> ID：13795678
> 
> 赞同：-1
> 
> 时间：2012-12-10T05:47:05.210
> 
> 标签：c#, winforms

我想要做的是将按钮单击事件中的两个变量传递给同一文件中的另一个类。

这是我的代码：

Settings.cs（Windows 窗体文件）

```
namespace ShovelShovel

public partial class Settings : Form
{
    public Settings()
    {
        InitializeComponent();
    }

    public void button1_Click(object sender, EventArgs e)
    {
        SetWindowSize.SaveData(textBoxWidth.Text, textBoxHeight.Text);
    }
}
}
} 
```

SetWindowSize.cs（类文件）

```
namespace ShovelShovel

class SetWindowSize
{
    public static void SaveData(string width, string height)
    {          
        using (BinaryWriter binaryWriter = new BinaryWriter(File.Open("file.dat", FileMode.Create)))
        {
                binaryWriter.Write(width, height);
        }
    }
}
} 
```

我想在 SetWindowSize.cs 中从`Settings.width`和中`Settings.height`获取文本。`textBoxWidth``textBoxHeight`

我无法改变

```
public void button1_Click(object sender, EventArgs e) 
```

其他任何事情，因为它会破坏表单的功能，所以我不知道该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:06:45.377

向 SetWindowSize 类添加新方法并从 button1_Click 调用它

```
public static class SetWindowSize
{
    public static void SaveData(string width, string height)
    {
        File.WriteAllText("file.dat", string.Format("height: {0}, width: {1}.", height, width));
    }
} 
```

和按钮点击

```
public void button1_Click(object sender, EventArgs e)
{
    SetWindowSize.SaveData(textBoxWidth.Text, textBoxHeight.Text);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:06:58.277

不需要更改按钮单击事件处理程序的签名，并且其他类也不应该调用该函数。按钮单击事件处理程序应该创建一个实例`SetWindowSize`并调用`Write`. 您可以添加一个附加参数以`Write`从按钮单击处理程序传递两个字符串。

# c++ - 映射/折叠运算符（在 C++ 中）

> ID：13795679
> 
> 赞同：6
> 
> 时间：2012-12-10T05:47:08.143
> 
> 标签：c++, stl, functional-programming

我正在编写可以对范围进行映射/折叠操作的[库。](http://volnitsky.com/project/ro/)我需要和操作员一起做这些。我对函数式编程不是很熟悉，我暂时选择`*`了map和`||`fold。所以要找到（蛮力算法） `cos(x)`区间的最大值`8 < x < 9`：

```
double maximum = ro::range(8, 9, 0.01) * std::cos  || std::max; 
```

在上面，`ro::range`可以用任何 STL 容器替换。

如果地图/折叠运算符有任何约定，我不想有所不同。我的问题是：是否有数学符号或是否有任何语言使用运算符进行映射/折叠？

** 编辑 **

对于那些询问的人，下面是 RO 目前可以做什么的小演示。 `scc`是可以评估 C++ 片段的小实用程序。

```
// Can print ranges, container, tuples, etc directly (vint is vector<int>) :
scc 'vint V{1,2,3};  V'
{1,2,3}

// Classic pipe. Alogorithms are from std::
scc 'vint{3,1,2,3} | sort | unique | reverse'
{3, 2, 1}

// Assign 42 to [2..5)
scc 'vint V=range(0,9);   range(V/2, V/5) = 42;  V'
{0, 1, 42, 42, 42, 5, 6, 7, 8, 9}

// concatenate vector of strings ('add' is shotcut for std::plus<T>()):
scc 'vstr V{"aaa", "bb", "cccc"};  V || add'
aaabbcccc

// Total length of strings in vector of strings
scc 'vstr V{"aaa", "bb", "cccc"};  V * size ||  (_1+_2)'
9

// Assign to c-string, then append `"XYZ"` and then remove `"bc"` substring :
scc 'char s[99];  range(s) = "abc";  (range(s) << "XYZ") - "bc"'
aXYZ

// Remove non alpha-num characters and convert to upper case
scc '(range("abc-123, xyz/") | isalnum) * toupper'
ABC123XYZ

// Hide phone number:
scc "str S=\"John Q Public  (650)1234567\";  S|isdigit='X';  S"
John Q Public  (XXX)XXXXXXX 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T06:58:36.293

这实际上更像是一个评论而不是一个真正的答案，但它太长了，无法放入评论中。

至少如果我对术语的记忆正确， map 本质上是`std::transform`，而 fold 是`std::accumulate`。假设这是正确的，我认为尝试编写自己的代码充其量是不明智的。

如果你想使用 map/fold 风格的语义，你可以这样做：

```
std::transform(std::begin(sto), std::end(sto), ::cos);
double maximum = *std::max_element(std::begin(sto), std::end(sto)); 
```

虽然`std::accumulate`更像是通用折叠，但`std::max_element`基本上是一个`fold(..., max);`如果您更喜欢单个操作，您可以执行以下操作：

```
double maximum = *(std::max_element(std::begin(sto), std::end(sto),
    [](double a, double b) { return cos(a) < cos(b); }); 
```

为此，我敦促您重新考虑重载运算符。我上面给出的任何一个例子对于几乎所有合理的 C++ 程序员来说都应该是清楚的。你给出的例子对大多数人来说是完全不透明的。

在更一般的层面上，我会敦促在重载运算符时要格外小心。运算符重载在正确使用时非常有用——能够为任意精度整数、矩阵、复数等内容重载运算符，使使用这些类型的代码*比*没有重载运算符的代码更具可读性和可理解性。

不幸的是，当您以意想不到的方式使用运算符时，情况正好相反——这些用法肯定是*非常*出乎意料的——事实上，完全进入了“相当令人惊讶”的范围。如果这些运算符在特定领域被很好地理解，但与 C++ 中的其他用途相反，可能会有问题（但至少有一点理由）。但是，在这种情况下，您似乎是在“从整体上”发明一个符号——我不知道有人使用任何运算符 C++ 支持重载来表示折叠或映射（也没有任何视觉上相似或类似的东西）方法）。简而言之，以这种方式使用重载是一个糟糕且不合理的想法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T06:05:49.397

在我知道的语言中，没有标准的折叠方式。Scala 使用运算符`/:`和`:\`方法名称，Lisp 有`reduce`，Haskell 有`foldl`.

`map`另一方面，就像`map`在我所知道的所有语言中一样，它更常见。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T10:31:39.543

以下是`fold`准人类可读的中缀 C++ 语法的实现。请注意，代码不是很健壮，仅用于演示这一点。它支持更常见的 3 参数`fold`运算符（范围、二元运算和中性元素）。

这很容易成为滥用（您刚刚说过“强奸”吗？）操作员超载的有趣方式，并且是用 900 磅炮弹击中自己脚部的最佳方式之一。

```
 enum { fold } fold_t;

template <typename Op>
struct fold_intermediate_1
{
    Op op;
    fold_intermediate_1 (Op op) : op(op) {}
};

template <typename Cont, typename Op, bool>
struct fold_intermediate_2
{
    const Cont& cont;
    Op op;
    fold_intermediate_2 (const Cont& cont, Op op) : cont(cont), op(op) {}
};

template <typename Op>
fold_intermediate_1<Op> operator/(fold_t, Op op)
{
    return fold_intermediate_1<Op>(op);
}

template <typename Cont, typename Op>
fold_intermediate_2<Cont, Op, true> operator<(const Cont& cont, fold_intermediate_1<Op> f)
{
    return fold_intermediate_2<Cont, Op, true>(cont, f.op);
}

template <typename Cont, typename Op, typename Init>
Init operator< (fold_intermediate_2<Cont, Op, true> f, Init init)
{
    return foldl_func(f.op, init, std::begin(f.cont), std::end(f.cont));
}

template <typename Cont, typename Op>
fold_intermediate_2<Cont, Op, false> operator>(const Cont& cont, fold_intermediate_1<Op> f)
{
    return fold_intermediate_2<Cont, Op, false>(cont, f.op);
}

template <typename Cont, typename Op, typename Init>
Init operator> (fold_intermediate_2<Cont, Op, false> f, Init init)
{
    return foldr_func(f.op, init, std::begin(f.cont), std::end(f.cont));
} 
```

`foldr_func`和`foldl_func`（左右折叠的实际算法）在别处定义。

像这样使用它：

```
foo myfunc(foo, foo);
container<foo> cont;
foo zero, acc;

acc = cont >fold/myfunc> zero; // right fold
acc = cont <fold/myfunc< zero; // left fold 
```

这个词`fold`在这里被用作一种穷人的新保留词。可以定义这种语法的几种变体，包括

```
<<fold/myfunc<< >>fold/myfunc>>
<foldl/myfunc> <foldr/myfunc>
|fold<myfunc| |fold>myfunc| 
```

内部运算符的优先级必须与外部运算符相同或更高。这是 C++ 语法的限制。

对于`map`，只需要一个中间体，语法可以是例如

```
mapped = cont |map| myfunc; 
```

实施它是一个简单的练习。

哦，请不要在生产中使用这种语法，除非你非常清楚自己在做什么，而且可能即使你知道；）

# python - Numpy错误：奇异矩阵

> ID：13795682
> 
> 赞同：13
> 
> 时间：2012-12-10T05:47:45.997
> 
> 标签：python, numpy

错误具体是什么`Numpy error: Matrix is singular`意思（使用`linalg.solve`函数时）？我在 Google 上查看过，但在发生此错误时找不到任何明确的信息。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-10T06:09:48.220

奇异矩阵是不可逆的。这意味着您尝试求解的方程组没有唯一解；`linalg.solve`不能处理这个。

您可能会发现它`linalg.lstsq`提供了一个可用的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-17T14:02:26.397

此函数也使用以下方法反转奇异矩阵`numpy.linalg.lstsq`：

```
def inv(m):
    a, b = m.shape
    if a != b:
        raise ValueError("Only square matrices are invertible.")

    i = np.eye(a, a)
    return np.linalg.lstsq(m, i)[0] 
```

# c# - 如何使用键绑定在 xaml 中聚焦文本框？

> ID：13795683
> 
> 赞同：2
> 
> 时间：2012-12-10T05:47:49.257
> 
> 标签：c#, wpf, textbox, keypress

如何将焦点设置在`TextBox`按下`F3`键时。

换句话说，请执行以下操作：

```
private void Window_PreviewKeyDown(object sender, KeyEventArgs )
{
       switch (e.Key)
       {
           case Key.F3:
               myTextBox1.Focus();
               break;
           case Key.F4:
               myTextBox2.Focus();
               break;
           default:
               break;
      }
} 
```

注意：我想用 xaml 来做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T10:20:15.997

您可以通过创建一个带有快捷键的附加属性然后在托管该控件的窗口上创建一个输入绑定来做到这一点。它是一个有点复杂的类，但非常易于使用。

首先在下面的项目中添加一个新类。

```
 public class TextBoxHelper : DependencyObject
    {
        public class MvvmCommand : DependencyObject, ICommand
        {
            readonly Action<object> _execute;
            readonly Func<object, bool> _canExecute;
            public event EventHandler CanExecuteChanged;
            public MvvmCommand(Action<object> execute, Func<object, bool> canExecute = null)
            {
                if (execute == null) throw new ArgumentNullException("command");
                _canExecute = canExecute == null ? parmeter => MvvmCommand.AlwaysCanExecute() : canExecute;
                _execute = execute;
            }
            public object Tag
            {
                get { return (object)GetValue(TagProperty); }
                set { SetValue(TagProperty, value); }
            }
            public static readonly DependencyProperty TagProperty = DependencyProperty.Register("Tag", typeof(object), typeof(MvvmCommand), new PropertyMetadata(null));
            static bool AlwaysCanExecute()
            {
                return true;
            }
            public void EvaluateCanExecute()
            {
                EventHandler temp = CanExecuteChanged;
                if (temp != null)
                    temp(this, EventArgs.Empty);
            }
            public virtual void Execute(object parameter)
            {
                _execute(parameter == null ? this : parameter);
            }
            public virtual bool CanExecute(object parameter)
            {
                return _canExecute == null ? true : _canExecute(parameter);
            }
        }

        public static Key GetFocusKey(DependencyObject obj)
        {
            return (Key)obj.GetValue(FocusKeyProperty);
        }

        public static void SetFocusKey(DependencyObject obj, Key value)
        {
            obj.SetValue(FocusKeyProperty, value);
        }

        public static readonly DependencyProperty FocusKeyProperty =
            DependencyProperty.RegisterAttached("FocusKey", typeof(Key), typeof(TextBoxHelper), new PropertyMetadata(Key.None, new PropertyChangedCallback((s, e) =>
                {
                    UIElement targetElement = s as UIElement;
                    if (targetElement != null)
                    {
                        MvvmCommand command = new MvvmCommand(parameter => TextBoxHelper.FocusCommand(parameter))
                            {
                                Tag = targetElement, 
                            };
                        InputGesture inputg = new KeyGesture((Key)e.NewValue);
                        (Window.GetWindow(targetElement)).InputBindings.Add(new InputBinding(command, inputg));
                    }
                })));

        public static void FocusCommand(object parameter)
        {
            MvvmCommand targetCommand = parameter as MvvmCommand;
            if (targetCommand != null)
            {
                UIElement targetElement = targetCommand.Tag as UIElement;
                if (targetElement != null)
                {
                    targetElement.Focus();
                }
            }
        }
    } 
```

现在在 XAML 中设置焦点键所需要做的就是指定 FocusKey 属性，下面的示例有 2 个文本框，一个在按下 F1 时获得焦点，另一个在按下 F7 时获得焦点。

```
<Window x:Class="WpfApplication5.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication5"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Title="MainWindow" Height="131" Width="460">

    <Grid Margin="10">
        <TextBox Margin="0,0,0,60" local:TextBoxHelper.FocusKey="F1" />
        <TextBox Margin="0,35,0,0" local:TextBoxHelper.FocusKey="F7" />
    </Grid>
</Window> 
```

# codeigniter - 视图中的调用函数

> ID：13795692
> 
> 赞同：1
> 
> 时间：2012-12-10T05:48:41.330
> 
> 标签：codeigniter, function, call

我想问一些关于codeigniter的事情

这是视图

```
<input class="mws-textinput" name="div_id" type="text" readonly="readonly">
<input class="mws-textinput" name="div_name" type="text" readonly="readonly">
<input id="mws-jui-dialog-mdl-btn" class="mws-button blue small" type="button" value="Show Modal Dialog">
<div id="mws-jui-dialog">
     <p><? (**i wanna call the function here**) ?></p>
</div> 
```

这是控制器中的功能

```
function dialog(){
        $query = mysql_query('select * from tbl_divisi');
        while($isi=mysql_fetch_array($query)){
            echo '<a href="E:/web/intranet.net/application/views/user/tabel.php" onclick="setParent(\'$isi[div_id]\',\'$isi[div_name]\')"></a>';
        }
    } 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:53:57.760

有两种方法，您可以在模型中定义此方法，然后在视图文件中调用该模型的方法，或者您可以从控制器中获取所有这些值。以下是如何在 ci 中使用模型的详细信息。[http://ellislab.com/codeigniter/user-guide/general/models.html](http://ellislab.com/codeigniter/user-guide/general/models.html)

# python - 如何在 Python 中加入这两个列表以形成路径？

> ID：13795694
> 
> 赞同：4
> 
> 时间：2012-12-10T05:49:01.290
> 
> 标签：python, list

我有一个这样的列表：

```
remote =  ['django', 'django/genelaytics', 'django/genelaytics/manage.py', 'django/genelaytics/rsync/rsync-HEAD-20121003-2147GMT'] 
```

我使用 for 循环找到了每个列表的父目录，如下所示：

```
for i in remote:
    os.path.dirname(i) 
```

我有另一个从用户选择中获得的列表（仅包括文件名），如下所示：

```
choices = ['django', 'genelaytics', 'manage.py'] 
```

要处理这个列表，我需要使用`for loop`上面提到的我已经拥有的父目录。如何使用这两个列表来获取每个文件的完整路径并处理它们？

```
django/genelaytics 
```

**编辑**：列表可能并不总是从顶层层次结构开始。此外，顶层层次结构可能并不总是相同的。这就是为什么我想找出每个文件的完整父目录。例如：

```
 django
    genelaytics
    .project
    .pydevproject
    manage.py
    fileupload
    __init__.py
    __init__.pyc
    form.html~
    form
    forms.py
    forms.pyc
    models.py
    models.pyc 
```

该列表可能包含 manage.py 和 forms.py。`The full path for manage.py may be: django/genelaytics/manage.py and for forms.py django/genelaytics/forms/forms.py`. 它实际上是一个树形结构。也是`django/genalaytics`动态生成的，并且因每个用户而异。所以，它不能是静态的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T05:51:11.813

您可以使用`os.path.join`和参数扩展来做到这一点：

```
>>> import os
>>> choices = ['django', 'genelaytics', 'manage.py']
>>> os.path.join(*choices)
'django/genelaytics/manage.py'
>>> os.path.join(*choices[:-1])
'django/genelaytics' 
```

这假设 in 中的元素`choices`是安全的（即 no `../../manage.py`），因为这样的事情可能会发生：

```
>>> choices = ['django', 'genelaytics', '/etc/passwd']
>>> os.path.join(*choices)
'/etc/passwd' 
```

* * *

看起来OP实际上正在寻找：

```
>>> [os.path.join(*choices[:i + 1]) for i in range(len(choices))]
['django', 'django/genelaytics', 'django/genelaytics/manage.py']

>>> root = '/test/foo/'
>>> [os.path.join(root, *choices[:i + 1]) for i in range(len(choices))]
['/test/foo/django', '/test/foo/django/genelaytics', '/test/foo/django/genelaytics/manage.py'] 
```

# java - JMenuItem 仅从键盘输入触发而不是单击

> ID：13795696
> 
> 赞同：0
> 
> 时间：2012-12-10T05:49:10.190
> 
> 标签：java, swing, jframe, menubar, jmenubar

我使用 JFrame 用 Ja​​va 制作了一个简单的绘图程序（这是我第一次使用）。用户单击并拖动以绘制形状，但这并不重要。我有`JMenuBar`很多选项，比如形状类型、新建和退出。当用户单击`new`按钮时，它应该清除屏幕。当用户点击 Ctrl+N 时，这工作得很好。但是，当单击按钮时，它根本不起作用。

我`System.out.println`在 newItem 的 actionEvent 中进行了调试，当单击该项目时它打印得很好，但它实际上并没有擦除屏幕。知道什么会导致这种情况吗？

我删掉了程序的大部分内容，并留下了看到问题所必需的部分。您仍然可以按住并拖动来绘制一个形状（直到您释放鼠标按钮该形状才会出现），然后按 Ctrl+N 清除屏幕，但单击新建不会这样做。

```
import java.awt.*;
import java.awt.event.*;
import java.lang.*;
import javax.swing.*;

public class E3G04 extends JFrame implements WindowListener, ActionListener, MouseListener, MouseMotionListener
{
    //Variables are declared as volatile to ensure that they're always called from system RAM
    static volatile String type = "rectangle";
    static volatile Boolean fill = true;
    static Color lineColor = Color.BLACK;
    static Color fillColor = Color.RED;
    static int size = 1;

    CanvasEX cx = new CanvasEX();

    static boolean running = true;

    JMenuBar mb = new JMenuBar();
        JMenu fileMenu = new JMenu("File");
            JMenuItem newItem = new JMenuItem("New");
            JMenuItem quitItem = new JMenuItem ("Quit");

    protected E3G04()
    {

        mb.add(fileMenu);
        fileMenu.add(newItem);
        fileMenu.add(quitItem);             
        newItem.setMnemonic('N');
        quitItem.setMnemonic('Q');
        newItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_N, ActionEvent.CTRL_MASK));
        quitItem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_Q, ActionEvent.CTRL_MASK));          
        newItem.addActionListener(this);
        quitItem.addActionListener(this);
        cx.setSize(800,600);
        cx.addMouseListener(this);
        cx.addMouseMotionListener(this);
        setJMenuBar(mb);
        setBounds(100,100,800,600);
        setLayout(new BorderLayout());
        add("Center",cx);
        addWindowListener(this);
        setResizable(true);
        setVisible(true);
    }

    public static void main(String [] args)
    {
        new E3G04();
    }

    public void stop()
    {
        newItem.removeActionListener(this);
        quitItem.removeActionListener(this);    
        dispose();
        System.exit(0);
    }

    public void actionPerformed(ActionEvent e)
    {
        Object o = e.getSource();

        if (o == newItem)
        {
            cx.erase = true;
            cx.repaint();
        }

        if (o == quitItem)
        {   
            running = false;
            stop();
        }

    }      

    public void mousePressed(MouseEvent m)
    {
        cx.start = m.getPoint();
        cx.end = cx.start;
        cx.cur = cx.start;
    }

    public void mouseDragged(MouseEvent m)
    {
        cx.cur = m.getPoint();
    }   

    public void mouseReleased(MouseEvent m)
    {
        cx.end = cx.cur;
        cx.repaint();
    }   
    public void itemStateChanged(ItemEvent e)
    {
        Object o = e.getSource();

    }
    public void windowClosing(WindowEvent e)
    {
        running = false;
        stop();
    }
    public void mouseClicked(MouseEvent m){}    
    public void mouseExited(MouseEvent m){}
    public void mouseEntered(MouseEvent m){}    
    public void mouseMoved(MouseEvent m){}
    public void windowClosed(WindowEvent e){}
    public void windowOpened(WindowEvent e){}
    public void windowActivated(WindowEvent e){}
    public void windowDeactivated(WindowEvent e){}
    public void windowIconified(WindowEvent e){}
    public void windowDeiconified(WindowEvent e){}
}

class CanvasEX extends Canvas
{
    Point start = new Point(100,100);
    Point cur = new Point(100,100);
    Point end = new Point(100,100);
    Image offscreen;
    boolean erase = false;

    public void update(Graphics g)
    {
        //This is adds the new stuff to the screen or erases the screen if erase is true
        Graphics buffer;
        if (offscreen == null)
        {
            offscreen = createImage(getWidth(), getHeight());
        }
        buffer = offscreen.getGraphics();
        if (erase)
        {
            buffer.setColor(getBackground());
            buffer.fillRect(0,0,800, 600);
            buffer.dispose();
            erase = false;
        }
        paint(buffer);
        g.drawImage(offscreen, 0, 0, this);
    }   

    public void paint(Graphics g)
    {
        Graphics buffer = g;
        if (erase)
        {
            g.dispose();
            erase = false;
        }   
        g.setColor(E3G04.lineColor);
        if (end.x > start.x && end.y > start.y)
            g.fillRect(start.x,start.y, Math.abs(end.x-start.x),Math.abs(end.y-start.y));
        if (end.x > start.x && end.y < start.y)
            g.fillRect(start.x,end.y, Math.abs(end.x-start.x),Math.abs(end.y-start.y));  
        if (end.x < start.x && end.y > start.y)
            g.fillRect(end.x, start.y, Math.abs(end.x-start.x),Math.abs(end.y-start.y));
        if (end.x < start.x && end.y < start.y)
            g.fillRect(end.x, end.y, Math.abs(end.x-start.x),Math.abs(end.y-start.y));
        g.setColor(E3G04.fillColor);
        if (end.x > start.x && end.y > start.y)
            g.fillRect(start.x + E3G04.size,start.y + E3G04.size, Math.abs(end.x-start.x) - 2 * E3G04.size,Math.abs(end.y-start.y) - 2 * E3G04.size);
        if (end.x > start.x && end.y < start.y)
            g.fillRect(start.x + E3G04.size,end.y + E3G04.size, Math.abs(end.x-start.x) - 2 * E3G04.size,Math.abs(end.y-start.y) - 2 * E3G04.size);  
        if (end.x < start.x && end.y > start.y)
            g.fillRect(end.x + E3G04.size, start.y + E3G04.size, Math.abs(end.x-start.x) - 2 * E3G04.size,Math.abs(end.y-start.y) - 2 * E3G04.size);
        if (end.x < start.x && end.y < start.y)
            g.fillRect(end.x + E3G04.size, end.y + E3G04.size, Math.abs(end.x-start.x) - 2 * E3G04.size,Math.abs(end.y-start.y) - 2 * E3G04.size);          
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T07:43:35.130

如果您放弃了使用 AWT 的教授建议，请更改

```
class CanvasEX extends Canvas 
```

..至..

```
class CanvasEX extends JPanel 
```

&

```
public void paint(Graphics g)
{
    .. 
```

至

```
public void paintComponent(Graphics g)
{ 
  super.paintComponent(g);
  .. 
```

然后，您将需要弄清楚如何让图纸持续存在。

# java - 如何解决 javax.mail.AuthenticationFailedException？

> ID：13795704
> 
> 赞同：1
> 
> 时间：2012-12-10T05:50:12.577
> 
> 标签：java, sendmail

我尝试使用下面的代码发送邮件，但我收到了类似的异常。

```
javax.mail.AuthenticationFailedException
    at javax.mail.Service.connect(Service.java:306)
    at javax.mail.Service.connect(Service.java:156)
    at javax.mail.Service.connect(Service.java:105)
    at javax.mail.Transport.send0(Transport.java:168)
    at javax.mail.Transport.send(Transport.java:98)
    at mail.MailTest.sendMailSSL(MailTest.java:116) 
```

请任何人帮助我如何解决它。

这是我的代码。谢谢

```
String mailBODY = "<h3>Hi this is my test Mail</h3>;

        final String username = "username@gmail.com";
        final String password = "password";

        Properties props = new Properties();
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.starttls.enable", "true");
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.port", "587");

        Session session = Session.getInstance(props, new GMailAuthenticator(username, password));

        try {

            Message message = new MimeMessage(session);
            message.setFrom(new InternetAddress("TEST"));
            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(test@gmail.com));
            message.setSubject("Mail subject test");
            message.setContent(mailBODY,"text/html; charset=utf-8");

            Transport.send(message);
            System.out.println("mail has been send");

        } catch (MessagingException e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:40:04.850

尝试添加道具并像这样发送：

```
 Properties props = System.getProperties();
            props.put("mail.smtp.starttls.enable", "true");
            props.put("mail.smtp.host", host);
            props.put("mail.smtp.user", from);
            props.put("mail.smtp.password", pass);
            props.put("mail.smtp.port", "587");
            props.put("mail.smtp.auth", "true");
// ...
Session session = Session.getDefaultInstance(props, null);
            MimeMessage message = new MimeMessage(session);
// ...

Transport transport = session.getTransport("smtp");
            transport.connect(host, from, pass);
            transport.sendMessage(message, message.getAllRecipients());
            transport.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-29T12:00:05.470

我在我的谷歌帐户上启用两步验证后收到此错误

# python - 从文本文件中获取数据并将其写入 python 中的 .csv 文件

> ID：13795713
> 
> 赞同：0
> 
> 时间：2012-12-10T05:51:08.447
> 
> 标签：python, csv

编辑：谢谢大家的回答，得到了我需要的东西！！

基本上我正在尝试获取我存储在文本文件中的内容，并尝试将其写入 .csv 文件。在我的文件中是我存储的推文，我试图在我的 .csv 文件的每个单元格中都有一条推文。

现在它只需要一条推文并用它创建一个 .csv 文件，我需要它来获取所有这些。任何帮助是极大的赞赏。这是我到目前为止所拥有的。

```
with open('reddit.txt', 'rb') as f:
reader = csv.reader(f, delimiter=':', quoting = csv.QUOTE_NONE)
for row in reader:
    print row

    cr = csv.writer(open('reddit.csv', 'wb'))
    cr.writerow(row) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T05:57:54.463

您需要在循环之外创建编写器：

```
with open('reddit.txt', 'rb') as input_file:
    reader = csv.reader(input_file, delimiter=':', quoting = csv.QUOTE_NONE)

    with open('reddit.csv', 'wb') as output_file:
        writer = csv.writer(output_file)

        for row in reader:
            writer.writerow(row) 
```

虽然在这里打开文件可能会更干净`with`：

```
input_file = open('reddit.txt', 'rb')
output_file = open('reddit.csv', 'wb')

reader = csv.reader(input_file, delimiter=':', quoting=csv.QUOTE_NONE)
writer = csv.writer(output_file)

for row in reader:
    writer.writerow(row)

input_file.close()
output_file.close() 
```

或者你仍然可以使用`with`并且只有很长的一行：

```
with open('reddit.txt', 'rb') as input_file, open('reddit.csv', 'wb') as output_file:
    reader = csv.reader(input_file, delimiter=':', quoting = csv.QUOTE_NONE)
    writer = csv.writer(output_file)

    for row in reader:
        writer.writerow(row) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:59:38.080

该行`cr = csv.writer(open('reddit.csv', 'wb'))`位于 for 循环内。您只需打开文件一次，将此行放在后面

`reader = csv.reader(f, delimiter=':', quoting = csv.QUOTE_NONE)`

然后像在每个循环迭代中那样写入它。

# textbox - 如何使用 webdriver 获取只读模式文本框的值...我尝试使用 gettext 但它不起作用

> ID：13795716
> 
> 赞同：2
> 
> 时间：2012-12-10T05:51:18.520
> 
> 标签：textbox, webdriver

有人可以帮忙吗

如何使用 webdriver 获取只读模式文本框的值...我尝试使用 gettext 但它不起作用....

我给了一个代码如下

```
String Streetnumbercopare = driver.findElement(By.id("ctl00_ctl00_ContentPlaceHolder1_ContentPlaceHolderInNestedMP_uclRiskInfo_txtStreetNumber")).getText();
if (StreetNumberTextValue.equals(Streetnumbercopare)) {
    System.out.println("Streetnumber matches --- Pass");
}else {
    System.out.println("Street number doesn't match --- Fail");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-15T15:31:32.540

我在 python 中遇到了同样的问题（使用 pytest）如果你也使用 python：试试

*`element.get_attribute('value')`* 这个对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:50:42.963

尝试`driver.findElement(By.id("ctl00_ctl00_ContentPlaceHolder1_ContentPlaceHolderInNestedMP_uclRiskInfo_txtStreetNumber")).getAttribute("value")`

你可能有这样的 HTML：[输入标签示例](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_form_submit)

# facebook - 如何为 Facebook 自定义操作创建不同的 URL

> ID：13795719
> 
> 赞同：0
> 
> 时间：2012-12-10T05:51:27.227
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我正在尝试在 facebook 自定义 Action 帖子中添加指向 [object] 的自定义链接（下方标记为红色）。

![在此处输入图像描述](../Images/bb44dbd0967a327ab0e43dbc6d2215f7.png)

这是我的代码：

```
FB.api('/me/testapponens:cook', 'post',
{ recipe: 'http://foobar.com/page1.html' },
   function(response) {
     if (!response || response.error) {
        alert('Error occured');
     } else {
        alert('Cook was successful! Action ID: ' + response.id);
     }
}); 
```

现在，因为我已经`http://foobar.com/page1.html`在我的“**食谱**”中声明了“”，所以在发布此内容时，将从该页面中选择开放图属性。

**问题**：我需要将链接显示为第三方链接 www.thirdparty.com/page1.html 但打开的图形元属性不能写入thirdparty.com/page1.html（因为我对该页面没有任何控制权）。

所以，我决定这样做：

```
i) Create a dummy page : www.foobar.com/page1.html.
ii) Add all the og meta to it.
iii) Add a redirect (javascript) code to the dummy page so that it goes to the third party page. 
```

`www.foobar.com/page1.html`看起来像这样：

```
<html ...>
<title> Page 1 </title>
 <meta property="fb:app_id"            content="..." /> 
...
<script type="text/javascript">
function redirect1()
{
    window.location = "http://thirdparty.com/page1.html"
}
</script>
</head>
<body onLoad="redirect1()"></body>
</html> 
```

**问题**：我认为这是一种 hacky 方法，用户可能无法接受。有没有更好的方法来做到这一点？如果我无法解释我打算做什么，请告诉我。

PS：我不是垃圾邮件发送者，第三方页面来自客户，我不想误导用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:07:15.100

> 我认为这是一种 hacky 方法，用户可能无法接受。有没有更好的方法来做到这一点？

你可以做一个服务器端重定向，检查用户代理——只有当它*没有*表明是 Facebook 爬虫时，才重定向客户端，否则让爬虫从你的页面读取 OG 元信息。

如何检测 FB 刮板：[https ://developers.facebook.com/docs/reference/plugins/like/#scraperinfo](https://developers.facebook.com/docs/reference/plugins/like/#scraperinfo)

# arrays - 在 Ember 中如何从 ArrayController 中删除对象

> ID：13795724
> 
> 赞同：0
> 
> 时间：2012-12-10T05:52:24.850
> 
> 标签：arrays, ember.js

我正在执行以下操作，但我无法`this`从方法中的上下文中检索 obj`searchAgain`和`removeUser`. 这是我从[http://www.adobe.com/devnet/html5/articles/flame-on-a-beginners-guide-to-emberjs.html获取的示例](http://www.adobe.com/devnet/html5/articles/flame-on-a-beginners-guide-to-emberjs.html)

```
 <div id="recent">
            <h3>Recent Users</h3>
            <ol>
                {{#each App.recentUsersController.reverse}}
                    <li>
                        <a href="#" title="view again" {{action "searchAgain" target="App.recentUsersController"}}>{{this}}</a> - 
                        <a href="#" title="remove" {{action "removeUser" target="App.recentUsersController"}}>X</a>
                    </li>
                {{/each}}
            </ol>
        </div>

   App.recentUsersController = Em.ArrayController.create({
content: [],
addUser: function(name) {
    if ( this.contains(name) ) this.removeObject(name);
    this.pushObject(name);
},
removeUser: function(view){
    alert(view.context);
    this.removeObject(view.context);
},
searchAgain: function(view){
    alert(view.context);
    App.tweetsController.set('username', view.context);
    App.tweetsController.loadTweets();
},
reverse: function(){
    return this.toArray().reverse();
}.property('@each') 
```

});

`view.context`里面`SearchAgain`给`removeUser`我不确定的。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:08:01.597

我找到了解决方案；我希望这对其他人也有帮助：

*   实际接收事件的方法`recentUsersController`，而不是视图（我认为这是文章中的错误）
*   `{{each}}`小胡子应该是这样`{{#each user in App.recentUsersController.reverse}}`的，以便为您正在循环的对象声明一个标识符
*   在遍历 时`recentUsers`，应在`{{action}}`胡须内添加此类标识符（例如`{{action "removeUser" "user" target="App.recentUsersController"}}`）

# java - 我可以像这样在 JFrame 中放置 2 个 JPanel 吗？

> ID：13795727
> 
> 赞同：0
> 
> 时间：2012-12-10T05:52:42.957
> 
> 标签：java, layout, window, jframe, jpanel

这会将两个 JPanel 放在 JFrame 中还是需要制作某种容器？

我只是想让 JTextField 只占用按钮上方的 1 列，而不是放在带有所有按钮的列中。

```
 window = new JFrame("Window");

    displayBox = new JTextField(20);
    display = new JPanel(new GridLayout(0, 1));

    buttons = new JPanel(new GridLayout(0, 3));
    b0 = new JButton("0");
    b1 = new JButton("1");
    //...

    window.getContentPane().add(display);
    display.add(displayBox);

    window.getContentPane().add(buttons);
    buttons.add(b0);
    buttons.add(b1);
    //...

    window.pack();
    window.setSize(300, 400);
    window.setVisible(true);
    window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:04:57.327

如果您将代码更改为

```
window = new JFrame("Window");
window.setLayout(new BoxLayout(window.getContentPane(), BoxLayout.PAGE_AXIS));
window.add(Box.createVerticalGlue());
window.add(Box.createHorizontalGlue());

displayBox = new JTextField(20);
display = new JPanel();

buttons = new JPanel();
buttons.setLayout(new GridLayout(0, 3));

b0 = new JButton("0");
b1 = new JButton("1");
//...

window.getContentPane().add(display);
display.add(displayBox);

window.getContentPane().add(buttons);
buttons.add(b0);
buttons.add(b1);
//...

window.pack();
window.setSize(300, 400);
window.setVisible(true);
window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

这应该将 JPanel 添加到另一个之上的 JFrame 1 中。

# database - Xtify Datastore Richnotification db 为 Nil

> ID：13795729
> 
> 赞同：0
> 
> 时间：2012-12-10T05:52:53.307
> 
> 标签：database, null, datastore, iphone-5, xtify

我必须说我一直看到你们的支持团队非常棒，成功地解决了很多很多问题。感谢英雄的支持。

这是我的小宝贝。

我按书安装了所有内容，并在我的 iPhone 5 固件 6.0.1 上运行了代码。它给出以下错误：错误创建数据存储。Richnotification db 的数据存储为 nil。下面是日志。下面也是最后一个异常回溯。

```
-[XLappMgr registerForPush] [Line 325]  Attempt to register for push notifications...
Reachability Flag Status: WR t------ networkStatusForFlags
Succeeded registering for push notifications. Device token: <left out for security purposes, but valid.>
ERROR Creating data store. Datastore for richnotification db is nil

Last Exception Backtrace:
0   CoreFoundation      0x3972a3e2 __exceptionPreprocess + 158
1   libobjc.A.dylib     0x385b695e objc_exception_throw + 26
2   CoreFoundation      0x3972a302 +[NSException raise:format:] + 102
3   Foundation          0x39964f14 -[NSURL(NSURL) initFileURLWithPath:] + 72
4   Foundation          0x39964e3e +[NSURL(NSURL) fileURLWithPath:] + 38
5   Rabbit              0x00108acc -[XLDbMgr managedObjectModel]     (XLDbMgr.m:74)
6   Rabbit              0x00108caa -[XLDbMgr createNewDatabase] (XLDbMgr.m:101)
7   Rabbit              0x00108b4c -[XLDbMgr persistentStoreCoordinator] (XLDbMgr.m:89)
8   Rabbit              0x001088f0 -[XLDbMgr managedObjectContext] (XLDbMgr.m:47)
9   Rabbit              0x0010883c +[XLDbMgr getDBMgr] (XLDbMgr.m:23)
10  Rabbit              0x000fba10 -[AppDetailsMgr init] (AppDetailsMgr.m:33)
11  Rabbit              0x000fb97c +[AppDetailsMgr get] (AppDetailsMgr.m:26)
12  Rabbit              0x00110fd2 -[XLServerMgr sendProviderDeviceToken] (XLServerMgr.m:94)
13  Rabbit              0x00110d0c -[XLServerMgr initWithReg:] (XLServerMgr.m:64)
14  Rabbit              0x001000d6 -[XLappMgr registerWithXtify:] (XLappMgr.m:118)
15  Rabbit              0x0008073e -[AppDelegate application:didRegisterForRemoteNotificationsWithDeviceToken:] (AppDelegate.m:54)
16  UIKit               0x38c5f7ee _UIXXRemoteNotificationRegistrationSucceeded + 146
17  UIKit               0x38c60278 _XRemoteNotificationRegistrationSucceeded + 112
18  AppSupport          0x36a9940c migHelperRecievePortCallout + 188
19  CoreFoundation      0x396ff3e2 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 30
20  CoreFoundation      0x396ff386 __CFRunLoopDoSource1 + 134
21  CoreFoundation      0x396fe20a __CFRunLoopRun + 1378
22  CoreFoundation      0x39671238 CFRunLoopRunSpecific + 352
23  CoreFoundation      0x396710c4 CFRunLoopRunInMode + 100
24  GraphicsServices    0x369aa336 GSEventRunModal + 70
25  UIKit               0x38a6128c UIApplicationMain + 1116
26  Rabbit              0x0008055a main (main.m:16)
27  Rabbit              0x000804fc start + 36 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-27T13:18:08.700

我为Adobe AIR App做了ANE，解决了很久，终于明白了原因：**XtifyLib/XtifyPush.embeddedframework/XtifyPush.framework/Versions/A/Resources/must中的资源文件在我的情况下总是被添加到项目**中，使用 ANE 它应该在文件夹 iPhone-ARM 中，因为 ADT 将它们移动到顶级目录 - 它在那里是必要的

# iphone - 使用 Twitter OAuth 在 TwitPic 上上传图片

> ID：13795733
> 
> 赞同：0
> 
> 时间：2012-12-10T05:53:23.560
> 
> 标签：iphone, objective-c, twitter-oauth, twitpic

我知道这可能是重复的问题，因为在 SO 上有很多与此相关的问题。我已经提到了以下内容：

**参考：**

[使用 twitpic 在 Twitter 上上传图片](https://stackoverflow.com/questions/8292576/uploading-image-on-twitter-using-twitpic)

[使用 Twitter+OAuth 将图像发布到 Twitter](https://stackoverflow.com/questions/9616102/posting-image-to-twitter-using-twitteroauth)

[使用 TwitPic + OAuth 将照片 + 推文上传到 Twitter (.NET C#) - 为什么没有推文？](https://stackoverflow.com/questions/4434576/using-twitpic-oauth-to-upload-a-photo-tweet-to-twitter-net-c-why-no-tw)

它作为一个人工作得很好。但是，因为已经使用了“OAuth_token”，并且它是静态给出的，如 3xxxxxx1-KxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxY。因此，在这种情况下，它将在使用此 OAuth_token 的同一帐户上上传图像。

我还提到了[https://github.com/Gurpartap/GSTwitPicEngine](https://github.com/Gurpartap/GSTwitPicEngine) .... 但在此`[_accessToken key]`返回`NULL`。

我想在当前登录的帐户上上传图像。意思是，如果我下次登录另一个帐户，则必须将图像上传到该帐户。

**问题：**

如果我`OAuth_token`按照前面指定的方式提供静态，那么尽管我已经登录到另一个帐户，但它每次都会在该帐户上上传图像。

**问题：**

无论如何生成动态`OAuth_token`或任何其他方式来解决这个问题？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:11:43.507

**图片上传到 Twitter 不需要使用 Twipic api。Twitter API 为自己提供了一个上传图片的 URL [https://api.twitter.com/1.1/statuses/update_with_media.json](https://api.twitter.com/1.1/statuses/update_with_media.json) 对于文档，你可以按照这个 URL [https://dev。 twitter.com/docs/api/1.1/post/statuses/update_with_media](https://dev.twitter.com/docs/api/1.1/post/statuses/update_with_media)**

# windows - 在 Window 8/RT 应用程序中检测和实现滚动条样式

> ID：13795737
> 
> 赞同：0
> 
> 时间：2012-12-10T05:53:56.643
> 
> 标签：windows, microsoft-metro, winrt-xaml, modern-runtime

我正在开发一个要放置在 ScrollViewer 中的自定义控件，我已经自定义编码了一个 generic.xaml，用于为 Scrollviewer 应用视觉样式。

```
 <ScrollBar x:Name="VerticalScrollBar"
                                   Grid.Row="0"
                                   Grid.Column="1"
                                   Width="18"
                                   Margin="0,-1,-1,-1"
                                   IndicatorMode="TouchIndicator"
                                   IsTabStop="False"
                                   Maximum="{TemplateBinding ScrollableHeight}" 
```

我面临的问题是，我需要根据用户是否使用触摸设备将 IndicatorMode 设置为 TouchIndicator/MouseIndicator。有没有办法做到这一点？

谢谢

阿伦·塞尔瓦·库马尔。乙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:28:48.563

使用 Visual State Manager 来实现需求。

# java - 如何从java中的结果集列名中获取值？

> ID：13795747
> 
> 赞同：0
> 
> 时间：2012-12-10T05:54:44.293
> 
> 标签：java, excel, jdbc-odbc

我正在使用 java 中的 jdbc-odbc 从 Excel 中读取值？列名之一以 . 如何从该列中读取？我在阅读时收到错误未知列..

```
//String filesend = resultset.getString(".file send"); 
```

请帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:58:42.510

你有没有尝试逃避 . ?
一个好主意是使用 ResultSetMetaData.getColumnName(index) 方法查看列的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:10:05.733

可能你应该使用[Apache POI](http://poi.apache.org/)来获得连接

这是代码：

```
FileInputStream myInput = new FileInputStream(inputFile);
XSSFWorkbook wb = new XSSFWorkbook(myInput);

XSSFSheet sheet = wb.getSheetAt(0);
XSSFRow row = sheet.getRow(0); 
XSSFCell cell = row.getCell(1);
cell.setCellValue(123); 
```

# .net - 如何在运行时更改工作流程？

> ID：13795749
> 
> 赞同：0
> 
> 时间：2012-12-10T05:55:08.663
> 
> 标签：.net, workflow-foundation

这是我的要求。

我有一个订单工作流程，无论何时收到订单，都应由托运人“B”运送。现在我想更改由托运人“C”运送的订单。如何在运行时更改工作流程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:07:32.183

.NET 4.5 引入了许多重要的新增强功能来处理此类工作流版本控制方案。这是一篇总结功能的精彩文章（特别注意版本控制部分）：http: [//msdn.microsoft.com/en-us/magazine/hh781025.aspx](http://msdn.microsoft.com/en-us/magazine/hh781025.aspx)

您的解决方案将取决于您当前使用的主机（WorkflowApplication 或 WorkflowServiceHost）、您如何持久化这些实例，以及您是否只想修改新实例与现有正在运行的实例。

让我知道其中的一些细节，我会尽力提供更多帮助。

谢谢，

——戴夫，WF团队

# jquery - 让 div 出现在列表项 Jquery 下方

> ID：13795753
> 
> 赞同：0
> 
> 时间：2012-12-10T05:55:38.713
> 
> 标签：jquery, slidedown, slideup

我试图让每个 div 在用户鼠标悬停和鼠标悬停时单独显示在我的列表中，我希望能够将鼠标悬停在显示的 div 上，然后在退出时滑动。

这是我的[http://jsfiddle.net/AZhgk/](http://jsfiddle.net/AZhgk/)

```
<div id="left_aside">

    <ul id="menu_seo" class="menu">
        <li id="menu-seo"><span class="arrowout1"></span>SEO</li>
        <div class="menu-seo-desc"></div>
        <li id="menu-siteaudits"><span class="arrowout2"></span><a href="#">Site Audits</a></li>
        <div class="menu-seo-desc"></div>
        <li id="menu-linkbuilding"><span class="arrowout3"></span><a href="#">Link-Building</a></li>
        <div class="menu-seo-desc"></div>
        <li id="menu-localseo"><span class="arrowout4"></span><a href="#">Local SEO</a></li>
        <div class="menu-seo-desc"></div>
    </ul>
    <script>
    $(document).ready(function(){
    var menu_seo = $("menu_seo");

        menu_seo.mouseover(function(){
             $(".menu-seo-desc").slideDown(300);
        });
    menu_seo.mouseout(function(){
             $(".menu-seo-desc").slideUp(300).end();
        });
 });
    </script>
</div> 
```

任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:02:32.903

试试这样：

```
<div id="left_aside">

    <ul id="menu_seo" class="menu">
        <li id="menu-seo" class="menu-seo"><span class="arrowout1"></span>SEO
        <div class="menu-seo-desc"></div>
            </li>
        <li id="menu-siteaudits" class="menu-seo"><span class="arrowout2"></span><a href="#">Site Audits</a>
        <div class="menu-seo-desc"></div>
            </li>
        <li id="menu-linkbuilding" class="menu-seo"><span class="arrowout3"></span><a href="#">Link-Building</a>
        <div class="menu-seo-desc"></div>
            </li>
        <li id="menu-localseo" class="menu-seo"><span class="arrowout4"></span><a href="#">Local SEO</a>
        <div class="menu-seo-desc"></div>
            </li>
    </ul> 
```

和jQuery

```
 $(".menu-seo").hover(function(){
              $(this).find(".menu-seo-desc").slideDown(300);
        },function(){
              $(this).find(".menu-seo-desc").slideUp(300).end();
        });

$(".menu-seo-desc").hover(function(){
              $(this).show();
        },function(){
              $(this).slideUp(300).end();
        }
                       ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:03:30.290

试试下面的代码

```
 $("#menu-seo").mouseover(function(){
              $(this).next().slideDown(300);
        });

        $("#menu-seo").mouseout(function(){
              $(this).next().slideUp(300).end();
        }); 
```

[http://jsfiddle.net/AZhgk/6/](http://jsfiddle.net/AZhgk/6/)

# python - Python 3 中的 sys.maxint 是什么？

> ID：13795758
> 
> 赞同：208
> 
> 时间：2012-12-10T05:56:20.867
> 
> 标签：python, python-3.x

我一直在尝试找出如何表示最大整数，并且我已经阅读过使用`"sys.maxint"`. 但是，在 Python 3 中，当我调用它时，我得到：

```
AttributeError: module 'object' has no attribute 'maxint' 
```

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2012-12-10T05:58:00.050

> sys.maxint 常量已被删除，因为整数值不再有限制。但是，sys.maxsize 可以用作大于任何实际列表或字符串索引的整数。它符合实现的“自然”整数大小，并且通常与同一平台上先前版本中的 sys.maxint 相同（假设相同的构建选项）。

[http://docs.python.org/3.1/whatsnew/3.0.html#integers](http://docs.python.org/3.1/whatsnew/3.0.html#integers)

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2014-04-08T21:09:28.507

正如其他人指出的那样，Python 3`int`没有最大大小，但如果您只需要保证高于任何其他`int`值的东西，那么您可以使用 Infinity 的浮点值，您可以使用`float("inf")`.

注意：根据 ely 的评论，这可能会影响代码的效率，因此它可能不是最佳解决方案。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2019-01-14T00:28:39.807

如果您正在寻找一个比其他所有数字都大的数字：

方法一：

```
float('inf') 
```

方法二：

```
import sys
max = sys.maxsize 
```

如果您正在寻找一个小于所有其他数字的数字：

方法一：

```
float('-inf') 
```

方法二：

```
import sys
min = -sys.maxsize - 1 
```

方法 1 适用于 Python2 和 Python3。方法 2 适用于 Python3。我没有在 Python2 中尝试过方法 2。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2012-12-10T06:58:00.753

Python 3 整数没有最大值。

如果您的目的是确定在 C 中以与 Python 相同的方式编译时 int 的最大大小，您可以使用 struct 模块来找出：

```
>>> import struct
>>> platform_c_maxint = 2 ** (struct.Struct('i').size * 8 - 1) - 1 
```

如果您对 Python 3 int 对象的内部实现细节感到好奇，请查看`sys.int_info`每位数的位数和位数大小的详细信息。没有正常的程序应该关心这些。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-12-28T14:42:22.760

Python 3.0 不再具有 sys.maxint ，因为 Python 3 的整数是任意长度的。而不是 sys.maxint 它有 sys.maxsize; 正尺寸 size_t aka Py_ssize_t 的最大尺寸。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-14T20:54:55.983

另一种选择是

```
import math

... math.inf ... 
```

# ios - AVAssetWriterInput Video 没有得到

> ID：13795759
> 
> 赞同：2
> 
> 时间：2012-12-10T05:56:21.520
> 
> 标签：ios, xcode, avfoundation, avassetwriter

`AVAssetWriter`我使用我的作家设置生成图像到视频

```
NSDictionary* videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                               AVVideoCodecH264, AVVideoCodecKey,
                               [NSNumber numberWithInt:self.frame.size.width], AVVideoWidthKey,
                               [NSNumber numberWithInt:self.frame.size.height], AVVideoHeightKey,
                               videoCompressionProps, AVVideoCompressionPropertiesKey,
                               nil];
videoWriterInput = [[AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo outputSettings:videoSettings] retain]; 
```

我的输入图像缓冲区图像，

![在此处输入图像描述](../Images/d8eb03a0ebe591d31bddecd3fb632a15.png)

但生成的 mov 文件看起来像这样

![在此处输入图像描述](../Images/158fe215b040ee98e4143faa59ac1af2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:05:00.913

我生成图像到视频使用`AVAssetWriter`，我的作家设置刚刚修改。

```
NSDictionary* videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                               AVVideoCodecH264, AVVideoCodecKey,
                               [NSNumber numberWithInt:imageView.size.width], AVVideoWidthKey,
                               [NSNumber numberWithInt:imageView.size.height], AVVideoHeightKey,
                               videoCompressionProps, AVVideoCompressionPropertiesKey,
                               nil];
videoWriterInput = [[AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo outputSettings:videoSettings] retain]; 
```

# linux - 如何从子 shell 脚本导出库路径并使用父 shell 中的路径？

> ID：13795762
> 
> 赞同：-1
> 
> 时间：2012-12-10T05:56:33.220
> 
> 标签：linux, shell, export

我有以下文件

1.  构建.sh

    ```
    source exportpath.sh 
    ```

2.  导出路径.sh

    ```
    export LD_LIBRARY_PATH=/usr/local/lib/ 
    ```

但是，当我执行此 build.sh 然后运行`echo $LD_LIBRARY_PATH`命令时，我无法获得该`LD_LIBRARY_PATH`值。如何将此值设置为`current shell`.

我发现我们必须`source`在当前的 shell 中使用它。但我希望它通过一个 shell 脚本来完成。

当我`source exportpath.sh`在当前 shell 中使用时，我`LD_LIBRARY_PATH`正在工作，但我希望这应该由 shell 脚本完成。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:34:41.737

没有神奇的方法可以将子 shell 中设置的环境变量传播到父 shell。看到[这个回复](https://stackoverflow.com/a/13786515/841108)

您可以实现一些约定，例如通过`exportpath.sh`采用文件名，`build.sh`稍后`source`（或使用`eval`）。

您可能希望拥有自己的外壳`function`来包装两者。

但是**你**通常**不应该做这种奇怪的把戏**。例如，您可以将一些程序包装到一个 shell 脚本中来设置`LD_LIBRARY_PATH`（*mozilla*或`firefox`经常做这样的事情）。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-12-10T06:03:54.427

```
echo $LD_LIBRARY_PATH 
```

注意使用“$”来引用变量值。

# c++ - 使用堆栈的中缀到后缀转换器

> ID：13795765
> 
> 赞同：0
> 
> 时间：2012-12-10T05:56:45.377
> 
> 标签：c++

我想将中缀转换为后缀表达式。这是我的代码：

问题是这实际上并没有这样做，我很困惑为什么。一切对我来说都很有意义，但是当我输入例如`4*5`作为输出时，我得到了同样的结果。中缀是一个输入，而后缀是我想要作为指向后缀的指针返回的内容，因此可以对其进行评估。

如果操作数是 * - + 或 /，则返回 true

更新：

oki 我得到了它的工作，但我很难弄清楚如果你输入像 5 * 3 + -1.2 那么如果你想要负数，它就行不通了。

```
void infix2postfix(char* infix, char* postfix){
     char *in,*post;
        Stack<char>Q;
        char n;
        in = &infix[0];
        post = &postfix[0];
        while(*in){
            while(*in == ' ' || *in == '\t'){
                in++;
            }
            if( isdigit(*in) || isalpha(*in) ){
                while( isdigit(*in) || isalpha(*in)){
                    *post = *in;
                    post++;
                    in++;
                }
            }
            if( *in == '(' ){
                Q.Push(*in);
                in++;
            }
            if( *in == ')'){
                n = Q.Pop();
                while( n != '(' ){
                    *post = n;
                    post++;
                    n = Q.Pop();
                }
                in++;
            }
            if( operand(*in) ){
                if(Q.IsEmpty())
                    Q.Push(*in);
                else{
                    n = Q.Pop();
                    while(priority(n) >= priority(*in)){
                        *post = n;
                        post++;
                        n = Q.Pop();
                    }
                    Q.Push(n);
                    Q.Push(*in);
                }
                in++;
            }
        }
        while(!Q.IsEmpty())
        {
            n = Q.Pop();
            *post = n;
            post++;

        }
        *post = '\0';
    } 
```

这是我的代码新代码，它可以工作，但我希望它可以与一元运算符一起使用，所以它会接受输入`4 * 5 + 4 + -1.2`，所以之间有一个空格，如果没有，那么它是例如 -1.2 负数。我的代码也不适用于大于 9 的整数，如果我输入 10，那么它只会乘以 1*0。.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:31:52.933

如果可以使用两个堆栈，则可以将一个用于值，一个用于运算符。

当您从输入中提取一个值时，将其压入值堆栈，当您找到一个运算符时，将其压入运算符堆栈。

然后在创建输出时，从运算符堆栈中弹出一个运算符，从值堆栈中弹出一个或两个（取决于运算符）值。输出值，输出运算符。对于使用多个运算符的表达式，前一个操作被认为是第一个值，因此您下次只需弹出一个（或零）值。

当然，这是一种幼稚的方式，并且不处理诸如运算符优先级之类的事情。

你也可以做一个递归下降解析器，虽然它实际上不使用显式堆栈，但它使用隐式堆栈，因为函数被递归调用，所以堆栈实际上是函数调用堆栈。

# html - 浏览器后退按钮导致 iframe 被导航

> ID：13795766
> 
> 赞同：3
> 
> 时间：2012-12-10T05:56:57.407
> 
> 标签：html, iframe, browser, navigation, back-button

我有一个网页，并且我正在使用该页面`iFrame`。这`iFrame`包含上一个和下一个按钮。在下一个按钮上单击我将源更改`iFrame`为让我们说`page2.html`，在上一个按钮上单击我将源更改回`page1.html`。问题是当我单击浏览器的后退和前进按钮时，它会导致`iFrame`导航（描述了上述按钮的功能）。我怎样才能避免这种情况，即在浏览器后退按钮上单击上一页应该加载（浏览器的而不是 iframe 的）。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T05:35:26.207

我得到了问题的解决方案。我必须将框架的 url 替换为`window.location.replace(newurl)`.

在这种情况下，它不会添加到浏览器历史记录中。

# iphone - Skype 集成问题

> ID：13795767
> 
> 赞同：0
> 
> 时间：2012-12-10T05:57:03.970
> 
> 标签：iphone, ios, skype, skype4com, skype4py

我是 iOS 开发的新手。但无论如何，现在我可以：在 Facebook 和 Twitter 上向我的朋友发布私人信息。

有没有办法向我的 Skype 联系人发布消息？

Skype 是否为 iOS 提供任何 API 来向 Skype 联系人发布消息？

有没有办法获得 Skype 联系人信息（电子邮件、电话号码），以便能够直接向 Skype 联系人发布电子邮件/短信？

将数据发布到我的 Skype 联系人的最佳方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T06:06:16.143

**目前没有为 iOS 提供公共 API。**

您可以查看他们的文档[skypekit](http://developer.skype.com/public/skypekit)和[api 参考](http://developer.skype.com/desktop-api-reference#Reference)以获取更多详细信息。

您可以使用[Skype Uri](https://developer.skype.com/skype-uri)从您的 APP 与 Skype 进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:10:23.273

尝试查看此存储库

[支持 Skype 的 Objective-C 项目](https://github.com/search?q=skype&p=1&ref=searchbar&type=Repositories&l=Objective-C)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T18:32:13.077

Sevabot Skype bot 提供了一个用于发送 Skype 消息的 HTTP 接口：

[https://github.com/opensourcehacker/sevabot](https://github.com/opensourcehacker/sevabot)

（免责声明：我是该项目的作者）

但是，使用此解决方案意味着您需要在服务器上运行 Skype 客户端。

# image-processing - 带有 tesseract 缩放选项的 ghostscript

> ID：13795771
> 
> 赞同：0
> 
> 时间：2012-12-10T05:57:25.073
> 
> 标签：image-processing, ocr, ghostscript, tesseract

我正在使用 ghostscript 和 tesseract 从扫描的 PDF 中提取文本数据。但是 pdf 某些部分的扫描结果并不准确。出于测试目的，我正在截取 pdf 的屏幕截图并将其传递给 tesseract。以下是我面临的场景和问题。

**场景一：**

截图链接：[https ://dl.dropbox.com/u/9409594/scenario_1.tif](https://dl.dropbox.com/u/9409594/scenario_1.tif)

一旦我将此图像（来自 125% 缩放 pdf 的屏幕截图）传递给 tesseract，以下是我得到的结果文本：

ART\CLE 标准编号 PFUCE

**场景二：**

截图链接：[https ://dl.dropbox.com/u/9409594/scenario_2.tif](https://dl.dropbox.com/u/9409594/scenario_2.tif)

如果我将上面的屏幕截图（300% 缩放）传递给 tesseract，结果很好。

文章编号

以下是我在 ghostscript 和 tesseract 中使用的参数：

**Ghostscript：** gswin64.exe -dNOPAUSE -dBATCH -dSAFER -sDEVICE=tifflzw -r600 -sOutputFile="C:\test\output.tiff" "C:\test\input.pdf"

**正方体：** tesseract.exe "c:\test\output.tif" "c:\test\output.html" -l eng -psm 6 hocr

根据我的测试，我觉得如果将图像的缩放版本传递给 tesseract，结果是好的。在将图像转换为图像之前，我可以使用 ghostscript 缩放图像吗？还是有更好的方法来做到这一点？

感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T17:13:32.933

你可以试试这个， [http://www.fmwconcepts.com/imagemagick/textcleaner/index.php](http://www.fmwconcepts.com/imagemagick/textcleaner/index.php)

您可能知道这一点，与截屏有关，而不是截屏，您可以尝试使用 imagemagik 的转换命令将 pdf 转换为 tif，或者如果它的多页 pdf 使用 pdftoppm，然后使用转换命令转换为 tif。

# android - 上传的应用程序显示在错误的 api 级别设备中

> ID：13795773
> 
> 赞同：0
> 
> 时间：2012-12-10T05:57:32.360
> 
> 标签：android, api, android-market-filtering, android-sdk-1.6

我们已经在 AndroidManifest 文件中上传了一个具有以下 api 级别的应用程序到市场

```
uses-sdk android:minSdkVersion="15"
        android:targetSdkVersion="16" 
```

它用于支持 api 级别 4.1.1 和 4.1.2。但是这个应用程序可以安装在具有 api 级别 17 的 4.2 上。任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:27:39.227

`targetSdkVersion`未指定最大 SDK API 级别。也可以使用`maxSdkVersion`。

[此链接](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)也可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:36:11.780

> android:maxSdkVersion="16" :- 这是应用程序工作的最大 SDK 版本号。[整数]

# c - 在联合中具有指针和非指针数据类型是否有效？

> ID：13795776
> 
> 赞同：0
> 
> 时间：2012-12-10T05:57:59.337
> 
> 标签：c

假设我们正确取消引用并正确使用整数，这是一个好的编程习惯吗？

```
union {
int x;
struct node * next;
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T06:01:53.900

联合是相当低级的语言功能。关于哪些类型可以一起存在于一个联合中，没有任何有意义的理由存在任何限制性的“良好编程实践”。联合的目的是“多路复用”内存使用：通过在同一内存区域中存储几个生命周期不重叠的不相关对象来节省空间。

如果这就是你所需要的 - 去吧。

联合有时用于原始内存重新解释（AKA 类型双关语）。工会的这种使用曾经是非法的，直到它在 C99 标准的最新技术勘误之一中正式合法化。虽然它有其用途，但类型双关确实可以被视为有问题的编程实践。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:01:33.560

有效的？是的。

好主意？可能不是。指针甚至不是`sizeof(int)`64 位的，因此这将导致不太有用的结果。

# module - 在 openerp pos 模块中添加客户字段

> ID：13795778
> 
> 赞同：1
> 
> 时间：2012-12-10T05:58:02.340
> 
> 标签：module, field, openerp

我正在使用 openerp 6.1。在 pos 模块中，没有选择客户的功能。我想添加这个字段。但我不能。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:14:31.597

您可以通过继承自定义模块中的任何模型来添加额外的字段。

您必须继承“pos.order”对象和视图。

在 .py 中继承“pos.order”：

```
class pos_order(osv.osv):
    _inherit = 'pos.order'
    _columns = {
        'customer_id': fields.many2one('res.partner', 'Customer'),
    }
pos_order() 
```

上面的代码将在您的数据库中创建一个字段。

现在，要在表单中显示您的字段，请在 .xml 中继承“pos.order”的视图：

```
<record id="inherited_form_pos_view" model="ir.ui.view">
        <field name="name">pos.order.form.inherit</field>
        <field name="model">pos.order</field>
        <field name="type">form</field>
        <field name="inherit_id" ref="point_of_sale.view_pos_pos_form"/>
        <field name="arch" type="xml">
              <field name="name" position="after">
                  <field name="customer_id"/>
              </field>
        </field>
    </record> 
```

现在，您可以在 pos.order 表单中看到“客户”字段。

# javascript - JavaScript：在外部脚本中搜索和替换字符串

> ID：13795782
> 
> 赞同：0
> 
> 时间：2012-12-10T05:58:58.003
> 
> 标签：javascript, replace

我在我的网站上运行这个很酷的产品小部件（展示空间），将选定的产品放在那里。它使用以下脚本：

```
<script>
  (function(d, s, id) {
    if (d.getElementById(id)) return;
    var fjs = d.getElementsByTagName(s)[0],
        js  = d.createElement(s); js.id = id;
    js.src = "http://www.show-space.com/widgets/manager.js?api_key=0qslzweoj79lp7h03ki9";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, "script", "showspace-manager-js"));
</script> 
```

这被这样的东西调用：`[ss-widget id=my_widget]`

我现在遇到的问题是小部件（不再受支持）对所有产品小部件使用美元（“$”），而我更喜欢用瑞典克朗（“kr”）显示它们，通常放在数字。

我更喜欢
：将“$99”更改为“99 kr”
，但
b. 将“$ 99”更改为“SEK 99”
也可以

我几乎不知道任何 JavaScript，但被告知这可以用 JavaScript 解决。那么，我该怎么做才能解决这个问题？

小部件外观示例：http: [//www.presenttips.se/fars-dag](http://www.presenttips.se/fars-dag)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:36:18.830

我个人会使用正则表达式。

使用 jQuery：

```
$(document).ready(function(){
    var contents=$('#my_widget').html();
    var rgx=/\$\s?(\d*(?:\.\d{2})?)/g;
    $('#my_widget').html(contents.replace(rgx,"$1 kr"));
}); 
```

香草：

```
var contents=document.getElementById("my_widget").innerHTML;
var rgx=/\$\s?(\d*(?:\.\d{2})?)/g;
document.getElementById("my_widget").innerHTML=contents.replace(rgx,"$1 kr")); 
```

笔记：

这会以以下形式查找价格：

20 美元

20 美元

20.50 美元

20.50 美元

它找不到的一些价格示例：

20 美元

20.999 美元

20.9 美元

使用香草版本，您需要一个事件来触发 javascript。这可能是正文加载，因此您的脚本标签中将包含以下内容：

```
body.onload=function() {
var content=...
...
}; 
```

编辑：我查看了您的页面并且可以看到（至少在那种特定情况下）您的小部件是由类名而不是 id 定义的。我对 vanilla 脚本进行了以下更改，它在您链接的页面上运行良好 - 但您应该知道，在此实现中，它仅适用于它在每个页面上找到的第一次出现的小部件。 . 我认为你不可能有一页多于一个，所以应该没什么大不了的。

适用于您的页面：

```
var contents=document.getElementsByClassName("ss-widget")[0].innerHTML;
var rgx=/\$\s?(\d*(?:\.\d{2})?)/g;
document.getElementsByClassName("ss-widget")[0].innerHTML=contents.replace(rgx,"$1 kr"); 
```

最终编辑：正如上面显示的那样，在小部件中捏造了一些其他的东西，这里是工作的 jQuerified 版本，包括事件处理程序注册和脚本标签

```
<script> 
    jQuery(document).ready( //When the document is ready, run the following function...
        function(){
            jQuery('.ss-widget .product-price').each( //Pick everything with class product-price inside everything with class ss-widget and run the following function on each
                function() {
                    var contents=jQuery(this).html(); //Get the contents of this element
                    var rgx=/\$\s?(\d*(?:\.\d{2})?)/g; //Define a regex to search for a dollar sign, followed by an optional space, followed by an arbitary amount of digits, optionally followed by a decimal plus 2 digits. Group everything but the dollar sign and space.
                    jQuery(this).html(contents.replace(rgx,"$1 kr")); //Replace any text found by the regex with it's grouped result, a space, then the text kr.
                }
            );
        }
    );
</script> 
```

# maven - maven：指定包输出位置

> ID：13795783
> 
> 赞同：0
> 
> 时间：2012-12-10T05:59:15.863
> 
> 标签：maven, package

我有一个带有这样的自定义配置文件的 pom 文件：

```
<profile>
    <id>openshift</id>
    <build>
        <finalName>pomtest</finalName>
        <plugins>
            <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <configuration>
                    <outputDirectory>webapps</outputDirectory>
                    <warName>ROOT</warName>
                </configuration>
            </plugin>
        </plugins>
    </build>
</profile> 
```

当我执行

```
mvn war:war -Popenshift 
```

它在 webapps 文件夹中正确生成 ROOT.war

但是当我执行

mvn 包 -Popenshift

它在 /home/sas/Ubuntu 中生成战争文件

（Ubuntu不是文件夹，是ht ROOT.war文件的名字）

如何告诉 package 包输出的输出位置？

--

编辑：我尝试使用 wemu anser 没有运气

万一有人觉得它有用，我在这里发布整个 pom 文件

它只是 grails 使用 grails pom-generate xxx 生成的 pom 加上 openshift 配置文件

--

```
 <?xml version="1.0" encoding="utf-8"?>
    <project xmlns="http://maven.apache.org/POM/4.0.0"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
        <modelVersion>4.0.0</modelVersion>
        <groupId>com.pomtest</groupId>
        <artifactId>pomtest</artifactId>
        <packaging>grails-app</packaging>
        <version>0.1</version>
        <name>pomtest</name>
        <description>pomtest</description>

        <properties>
            <grails.version>2.1.1</grails.version>
        </properties>

        <dependencies>

            <dependency>
                <groupId>org.grails</groupId>
                <artifactId>grails-dependencies</artifactId>
                <version>${grails.version}</version>
                <type>pom</type>
            </dependency>

            <dependency>
                <groupId>org.grails</groupId>
                <artifactId>grails-plugin-testing</artifactId>
                <version>${grails.version}</version>
                <scope>test</scope>
            </dependency>

            <dependency>
                <groupId>org.grails.plugins</groupId>
                <artifactId>tomcat</artifactId>
                <version>${grails.version}</version>
                <scope>provided</scope>
                <type>zip</type>
            </dependency>

        <dependency>
            <groupId>org.grails.plugins</groupId>
            <artifactId>cache</artifactId>
            <version>1.0.0</version>
            <scope>compile</scope>
            <type>zip</type>
        </dependency>

        <dependency>
            <groupId>org.grails.plugins</groupId>
            <artifactId>resources</artifactId>
            <version>1.1.6</version>
            <scope>runtime</scope>
            <type>zip</type>
        </dependency>

        <dependency>
            <groupId>org.grails.plugins</groupId>
            <artifactId>database-migration</artifactId>
            <version>1.1</version>
            <scope>runtime</scope>
            <type>zip</type>
        </dependency>

        <dependency>
            <groupId>org.grails.plugins</groupId>
            <artifactId>jquery</artifactId>
            <version>1.8.0</version>
            <scope>runtime</scope>
            <type>zip</type>
        </dependency>

        <dependency>
            <groupId>org.grails.plugins</groupId>
            <artifactId>hibernate</artifactId>
            <version>2.1.1</version>
            <scope>runtime</scope>
            <type>zip</type>
        </dependency>

        </dependencies>

        <build>
            <!-- trying to set output to webapps/ROOT.war... with no luch so far -->
            <directory>${project.basedir}/webapps</directory>
            <outputDirectory>${basedir}/webapps</outputDirectory>
            <pluginManagement />

            <plugins>
                <!-- Disables the Maven surefire plugin for Grails applications, as we have our own test runner -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-surefire-plugin</artifactId>
                    <configuration>
                        <skip>true</skip>
                    </configuration>
                    <executions>
                        <execution>
                            <id>surefire-it</id>
                            <phase>integration-test</phase>
                            <goals>
                                <goal>test</goal>
                            </goals>
                            <configuration>
                                <skip>false</skip>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-clean-plugin</artifactId>
                    <version>2.4.1</version>
                    <configuration>
                        <filesets>
                            <fileset>
                                <directory>plugins</directory>
                                <includes>
                                    <include>**/*</include>
                                </includes>
                                <followSymlinks>false</followSymlinks>
                            </fileset>
                        </filesets>
                    </configuration>
                </plugin>

                <plugin>
                    <groupId>org.grails</groupId>
                    <artifactId>grails-maven-plugin</artifactId>
                    <version>${grails.version}</version>
                    <configuration>
                        <!-- Whether for Fork a JVM to run Grails commands -->
                        <fork>true</fork>
                    </configuration>
                    <extensions>true</extensions>
                </plugin>
            </plugins>
        </build>

        <repositories>
            <repository>
                <id>grails</id>
                <name>grails</name>
                <url>http://repo.grails.org/grails/core</url>
            </repository>
            <repository>
                <id>grails-plugins</id>
                <name>grails-plugins</name>
                <url>http://repo.grails.org/grails/plugins</url>
            </repository>
        </repositories>

        <profiles>
            <profile>
                <id>tools</id>
                <activation>
                    <property>
                        <name>java.vendor</name>
                        <value>Sun Microsystems Inc.</value>
                    </property>
                </activation>
                <dependencies>
                    <dependency>
                        <groupId>com.sun</groupId>
                        <artifactId>tools</artifactId>
                        <version>${java.version}</version>
                        <scope>system</scope>
                        <systemPath>${java.home}/../lib/tools.jar</systemPath>
                    </dependency>
                </dependencies>
            </profile>

            <profile>
                <id>openshift</id>
                <build>
                    <finalName>pomtest</finalName>
                    <plugins>
                        <plugin>
                            <artifactId>maven-war-plugin</artifactId>
                            <version>2.1.1</version>
                            <configuration>
                                <outputDirectory>webapps</outputDirectory>
                                <warName>ROOT</warName>
                            </configuration>
                        </plugin>
                    </plugins>
                </build>
            </profile>

        </profiles>
    </project> 
```

--

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:21:50.137

我认为您需要重新配置 build.directory 文件夹：

```
<build>
    <directory>${project.basedir}/target</directory>
</build> 
```

请注意，并非所有目录都可以在配置文件中更改：[http ://maven.apache.org/pom.html#Directories](http://maven.apache.org/pom.html#Directories)

但是使用可用属性或自己的属性可能就足够了[http://docs.codehaus.org/display/MAVENUSER/MavenPropertiesGuide](http://docs.codehaus.org/display/MAVENUSER/MavenPropertiesGuide)来配置构建以按照您希望的方式工作。

warName 的默认值已经是：${project.build.finalName} - 因此，在您的示例中不使用 pomtest，您也可以在那里使用 ROOT。仅从插件配置很难判断为什么东西最终会出现在“/home/sas/Ubuntu”中。

问候维尔纳

# python - 如何从 Python 程序中调用 OCaml 函数？

> ID：13795785
> 
> 赞同：7
> 
> 时间：2012-12-10T05:59:32.120
> 
> 标签：python, ocaml

我有一个用 OCaml 编写的大型遗留程序，我希望能够从我的 Python 程序中调用一些 OCaml 函数。

我怎样才能做到这一点最简单的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T06:03:42.493

直接说不行。但是，如果您为 Ocaml 库创建`C`API，则可以通过调用该 API。Python 的`ctypes`模块或类似的。同样，如果您为 OCaml 应用程序公开网络服务，Python 可以调用它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-10T07:27:56.250

您可能会发现有用的[Pycaml](http://caml.inria.fr/cgi-bin/hump.en.cgi?contrib=792)，一个 Python-OCaml 接口，允许从 Python 调用 OCaml 函数，反之亦然。

一定要寻找基于 2002 版本的 2011 或更高版本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-06-20T01:31:59.037

Pycaml 不再维护：现在有 pyml 和 lymp 可以做到这一点。

pyml：[http](http://pyml.gforge.inria.fr) ://pyml.gforge.inria.fr lymp：[https ://github.com/dbousque/lymp](https://github.com/dbousque/lymp)

它们都在 opam 中可用（opam install pyml lymp）。我还没有尝试过，但是因为我知道 pyml 的作者非常称职，所以我会打赌那个。

# asp.net-mvc - ADFS 2.0 - 自定义家庭领域发现页面

> ID：13795788
> 
> 赞同：1
> 
> 时间：2012-12-10T06:00:01.683
> 
> 标签：asp.net-mvc, customization, wif, adfs2.0

当多个 STS 添加到 ADFS 2.0 管理单元时，我讨厌 Home Realm Discovery（声明提供程序选择屏幕）页面的默认外观。下面是默认的

![http://blogs.perficient.com/microsoft/files/2012/06/image_9_776B8D4C.png](../Images/be2184b19fa78bb2635e9db9b4138373.png)

这个可以定制吗。这样它就会重定向到`somepage.aspx`我可以使用用户名和密码登录的位置。然后它正确返回索赔？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:13:46.873

问题是 ADFS 不知道您要登录到哪里。

如果您总是想登录同一个站点，有一个 cookie 会记住这一点，下次不会再询问您。

您还可以使用“whr”参数告诉 ADFS 去哪里，这样它就不必询问了。

是的，您可以自定义屏幕 - 请参阅[AD FS 2.0 登录页面自定义概述](http://msdn.microsoft.com/en-us/library/ee895356.aspx)。

如果要强制 FBA，请将 Forms 条目移入

```
<localAuthenticationTypes> 
```

在 web.config 到顶部。

# php - 检查字符串是否包含数组中的单词

> ID：13795789
> 
> 赞同：26
> 
> 时间：2012-12-10T06:00:06.960
> 
> 标签：php, arrays, string, compare

这是一个聊天页面。我有一个`$string = "This dude is a mothertrucker"`. 我有一堆坏词：`$bads = array('truck', 'shot', etc)`. 我如何检查是否`$string`包含中的任何单词`$bad`？
到目前为止，我有：

```
 foreach ($bads as $bad) {
        if (strpos($string,$bad) !== false) {
            //say NO!
        }
        else {
            // YES!            }
        } 
```

除非我这样做，当用户在`$bads`列表中输入一个单词时，输出为 NO！其次是！所以由于某种原因，代码运行了两次。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-12-10T06:06:22.193

```
function contains($str, array $arr)
{
    foreach($arr as $a) {
        if (stripos($str,$a) !== false) return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-30T12:46:00.673

**1）最简单的方法：**

```
if ( in_array( 'three',  ['one', 'three', 'seven'] ))
... 
```

**2）另一种方式**（同时检查另一个数组的数组）：

```
$keywords=array('one','two','three');
$targets=array('eleven','six','two');
foreach ( $targets as $string ) 
{
  foreach ( $keywords as $keyword ) 
  {
    if ( strpos( $string, $keyword ) !== FALSE )
     { echo "The word appeared !!" }
  }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-10T07:11:34.953

你能试试这个而不是你的代码吗

```
$string = "This dude is a mothertrucker";
$bads = array('truck', 'shot');
foreach($bads as $bad) {
    $place = strpos($string, $bad);
    if (!empty($place)) {
        echo 'Bad word';
        exit;
    } else {
        echo "Good";
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-03T16:57:06.753

您可以翻转您的坏词数组并更快地进行相同的检查。将每个坏词定义为数组的一个键。例如，

```
//define global variable that is available to too part of php script
//you don't want to redefine the array each time you call the function
//as a work around you may write a class if you don't want global variable
$GLOBALS['bad_words']= array('truck' => true, 'shot' => true);

function containsBadWord($str){
    //get rid of extra white spaces at the end and beginning of the string
    $str= trim($str);
    //replace multiple white spaces next to each other with single space.
    //So we don't have problem when we use explode on the string(we dont want empty elements in the array)
    $str= preg_replace('/\s+/', ' ', $str);

    $word_list= explode(" ", $str);
    foreach($word_list as $word){
        if( isset($GLOBALS['bad_words'][$word]) ){
            return true;
        }
    }
    return false;
}

$string = "This dude is a mothertrucker";

if ( !containsBadWord($string) ){
    //doesn't contain bad word
}
else{
    //contains bad word
} 
```

在这段代码中，我们只是检查是否存在索引，而不是将坏词与坏词列表中的所有单词进行比较。
isset 比 in_array 快得多，并且比 array_key_exists 快一点。
确保坏字数组中的任何值都没有设置为空。
如果数组索引设置为 null，isset 将返回 false。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-10T06:07:14.580

一旦它发现任何不好的词，就放置并退出或死亡，就像这样

```
foreach ($bads as $bad) {
 if (strpos($string,$bad) !== false) {
        //say NO!
 }
 else {
        echo YES;
        die(); or exit;            
  }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-07-21T11:29:09.280

有一个非常短的 php 脚本，您可以使用它来识别使用 str_ireplace 的字符串中的坏词，如下所示：

```
$string = "This dude is a mean mothertrucker";
$badwords = array('truck', 'shot', 'ass');
$banstring = ($string != str_ireplace($badwords,"XX",$string))? true: false;
if ($banstring) {
   echo 'Bad words found';
} else {
    echo 'No bad words in the string';
} 
```

单行：

```
$banstring = ($string != str_ireplace($badwords,"XX",$string))? true: false; 
```

做所有的工作。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-06-27T12:56:55.890

您也可以通过这种方式进行过滤

```
$string = "This dude is a mothertrucker";
if (preg_match_all('#\b(truck|shot|etc)\b#', $string )) //add all bad words here.       
    {
  echo "There is a bad word in the string";
    } 
else {
    echo "There is no bad word in the string";
   } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-10T06:11:55.253

想要这个？

```
$string = "This dude is a mothertrucker"; 
$bads = array('truck', 'shot', 'mothertrucker');

    foreach ($bads as $bad) {
        if (strstr($string,$bad) !== false) {
            echo 'NO<br>';
        }
        else {
            echo 'YES<br>';
        }
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-10T06:08:06.543

如果聊天字符串不是那么长，我会那样做。

```
$badwords = array('mothertrucker', 'ash', 'whole');
$chatstr = 'This dude is a mothertrucker';
$chatstrArr = explode(' ',$chatstr);
$badwordfound = false;
foreach ($chatstrArr as $k => $v) {
    if (in_array($v,$badwords)) {$badwordfound = true; break;}
    foreach($badwords as $kb => $vb) {
        if (strstr($v, $kb)) $badwordfound = true;
        break;
    }
}
if ($badwordfound) { echo 'You\'re nasty!';}
else echo 'GoodGuy!'; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-17T06:28:18.047

如果您想使用 array_intersect()，请使用以下代码：

```
function checkString(array $arr, $str) {

  $str = preg_replace( array('/[^ \w]+/', '/\s+/'), ' ', strtolower($str) ); // Remove Special Characters and extra spaces -or- convert to LowerCase

  $matchedString = array_intersect( explode(' ', $str), $arr);

  if ( count($matchedString) > 0 ) {
    return true;
  }
  return false;
} 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2015-02-11T09:15:28.600

```
 $string = "This dude is a good man";   
 $bad = array('truck','shot','etc'); 
 $flag='0';         
 foreach($bad as $word){        
    if(in_array($word,$string))        
    {       
        $flag=1;       
    }       
}       
if($flag==1)
  echo "Exist";
else
  echo "Not Exist"; 
```

# android - 如何在android中为一个活动提及两个意图过滤器

> ID：13795793
> 
> 赞同：30
> 
> 时间：2012-12-10T06:00:17.740
> 
> 标签：android, intentfilter

我正在编写一个应用程序来打开 HTML 文件，所以我提到了活动的意图过滤器

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="text/html" />
        </intent-filter> 
```

，对于这个应用程序，没有启动器图标。但我希望我的应用程序作为启动器应用程序，当我打开应用程序时，我想显示一些有关应用程序的信息，然后他通过 html 文件打开应用程序然后我想做不同的功能（解析html）。有什么想法吗？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-12-10T06:04:15.700

您可以在标签`<intent-filter>`之间指定多个：`<activity>`

```
<activity android:name=".MyActivity">
  <intent-filter>
     <action android:name="android.intent.action.MAIN" />
     <category android:name="android.intent.category.LAUNCHER" />
  </intent-filter>
  <intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="text/html" />
  </intent-filter>
</activity> 
```

# cookies - ELB HAproxy 和 cookie

> ID：13795795
> 
> 赞同：3
> 
> 时间：2012-12-10T06:00:33.290
> 
> 标签：cookies, amazon-web-services, load-balancing, haproxy, amazon-elb

我在 HA-Proxy 前面使用 ELB。在 ELB 上禁用粘性，我在 HA-Proxy 中有此配置：

```
backend endpoint
    balance leastconn
    cookie  VALUE insert nocache maxidle 30 
```

我正在使用 curl 进行查询，我注意到如果我直接查询 HA-Proxy，我会为每个查询获取一个 cookie。但是对于 ELB，我会在第一次查询时得到一个 cookie，但在下一个查询时不会，我必须等待几分钟才能给我一个 cookie。

知道为什么吗？

HA-Proxy 版本 1.4.18 2011/09/16

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:04:59.820

*原来，我需要使用选项 http-server-close*或*选项 forceclose*要求 HA-Proxy 尽快关闭连接。

更多关于 ELB keepalive 的信息可以在这里找到

> ELB 的 HTTP 侦听器向客户端提供 HTTP 1.1 端点，这意味着：
> 
> *   HTTP Keepalive 将默认为 HTTP 1.1 客户端启用
> *   默认情况下，HTTP 1.0 客户端将禁用 HTTP Keepalive
> *   无论哪种情况，客户端都可以通过在请求中分别包含“Connection: keep-alive”或“Connection: close”标头来显式打开或关闭keepalive。

来源：[https ://forums.aws.amazon.com/thread.jspa?messageID=200999ᄧ](https://forums.aws.amazon.com/thread.jspa?messageID=200999&#200999)

# google-apps-script - 根文件夹的 url

> ID：13795799
> 
> 赞同：0
> 
> 时间：2012-12-10T06:00:54.027
> 
> 标签：google-apps-script

生成的`DocsList.getRootFolder().getUrl()`url 会为我带来这样的内容：

```
Sorry, the page (or document) you have requested does not exist.

Make sure that you have the correct URL and that the owner of the document hasn't deleted it. 
```

是虫子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:25:18.590

在云端硬盘 UI 中，返回有效 URL 的文件夹似乎还具有“共享...”的向下钻取选项，该选项生成的 URL 可供具有权限的人访问。由于根文件夹没有这样的向下钻取选项，我可以理解为什么 URL Apps Script 提供的会导致这样的消息。也许应该更好地记录这种行为——随时在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上打开一个问题，以在文档中解决这个问题。

# ssis - SSIS派生列错误

> ID：13795803
> 
> 赞同：0
> 
> 时间：2012-12-10T06:01:19.777
> 
> 标签：ssis, expression

在 SSIS 中调试时出现此错误：

> > 错误：数据流任务中的 0xC0049064，派生列 [70]：尝试执行类型转换时发生错误。错误：数据流任务中的 0xC0209029，派生列 [70]：SSIS 错误代码 DTS_E_INDUCEDTRANSFORMFAILUREONERROR。“组件“派生列”（70）”失败，因为发生错误代码 0xC0049064，并且“输出列“EVENT_DT”（118）”上的错误行处置指定错误失败。指定组件的指定对象发生错误。在此之前可能会发布错误消息，其中包含有关失败的更多信息。错误：数据流任务中的 0xC0047022：SSIS 错误代码 DTS_E_PROCESSINPUTFAILED。组件“派生列”(70) 上的 ProcessInput 方法失败，错误代码为 0xC0209029。已识别的组件从 ProcessInput 方法返回错误。该错误是特定于组件的，但该错误是致命的，将导致数据流任务停止运行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。错误：数据流任务中的 0xC0047021：SSIS 错误代码 DTS_E_THREADFAILED。线程“WorkThread0”已退出，错误代码为 0xC0209029。在此之前可能会发布错误消息，其中包含有关线程退出原因的更多信息。信息：数据流任务的 0x40043008，DTS.Pipeline：后执行阶段开始。信息：数据流任务中的 0x40043009，DTS.Pipeline：清理阶段开始。信息：数据流任务中的 0x4004300B，DTS.Pipeline：“组件“DataReaderDest”(143)”写入 0 行。任务失败：数据流任务警告：包中的 0x80019002：SSIS 警告代码 DTS_W_MAXIMUMERRORCOUNTREACHED。Execution 方法成功，但引发的错误数 (4) 达到了允许的最大值 (1)；导致失败。当错误数量达到 MaximumErrorCount 中指定的数量时，就会发生这种情况。更改 MaximumErrorCount 或修复错误。SSIS 包“Package.dtsx”完成：失败。

我的表达是：

```
(DT_DBTIMESTAMP)(SUBSTRING(EVENT_D,7,4) + "-" + 
 SUBSTRING(EVENT_D,4,2) + "-" + 
 SUBSTRING(EVENT_D,1,2) + EVENT_T) 
```

我的原始数据按以下顺序排列：

```
EVENT_D: DD/MM/YYYY
EVENT_T: HH:MM:SS 
```

任何帮助表示赞赏。我多次尝试改变我的表情，但仍然失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T07:12:32.247

我怀疑有些日期时间值的格式不正确。所以 SSIS 在解析它们时会抛出错误。

为了从源表中找到不正确的日期时间值，请尝试重定向错误行`Derived Transformation`并使用数据查看器检查不正确的数据

子字符串值的问题是，如果字符串数据的格式不正确，`Derived Transformation`则会抛出错误。

1.  在您的 OLEDB 源组件中尝试编写 sql 并仅获取正确的日期时间值

前任：

```
 Select col1,
        case when isDate(EVENT_D) = 1 THEN EVENT_D ELSE NULL 
        END as [EVENT_D],
        Col2,EVENT_T,other columns
        from yourTable 
```

在您的派生转换中，使用您的代码转换为`DT_DBTIMESTAMP`type 。

1.  否则尝试使用脚本组件并解析`EVENT_D`和`EVENT_T`值并转换为日期时间值。无需使用所有这些`substring`值的派生列

    创建一个`New Output column` `Valid_D`数据类型为. 在in 中`DT_DBTIMESTAMP`选择 2 个输入列 EVENT_D 和 EVENT_T`available input Columns``Script Transformation Editor`

VB.NET 代码

```
 Dim result As DateTime

If DateTime.TryParseExact(Row.EVENT_D, "dd/MM/yyyy", 
                          Nothing, Globalization.DateTimeStyles.None, result) Then
     Row.ValidD = result.Add (TimeSpan .Parse (Row.EventT ) );
End If 
```

C# 代码

```
DateTime result;
    if (DateTime.TryParseExact(Row.EventD, "dd/MM/yyyy",
        CultureInfo.InvariantCulture, DateTimeStyles.None,out result))
    {
         Row.ValidD = result.Add (TimeSpan .Parse (Row.EventT ) );
    } 
```

现在您可以在后续转换中使用 DateTime 类型的 Valid_D 列

`Update`：您的语法问题是您不能以字符串格式添加日期+时间。您需要`parse`分别 EVENT_D 和 EVENT_T 。

```
(DT_DBTIMESTAMP)(SUBSTRING(EVENT_D,7,4) + "-" + 
 SUBSTRING(EVENT_D,4,2) + "-" + 
 SUBSTRING(EVENT_D,1,2) + EVENT_T)

So your syntax is not valid. 
```

该`isDate`函数显示 NULL`30/04/2012`因为根据 MSDN

```
 The return value of ISDATE depends on the settings set by
   SET DATEFORMAT, SET LANGUAGE and Configure the default language
   Server Configuration Option. 
```

但它返回 1 的值`01/05/2012`，`02/05/2012`因为它采用 MM/dd/YYYY 所以第一个日期是 2012 年 1 月 5 日而不是 2012 年 5 月 1 日

所以灵魂是使用脚本组件并将这些值解析为有效的日期和时间，然后在您的后续转换中使用它。

请检查我上面的脚本转换代码

```
Update 2: 
```

我认为您使用 SSIS 2005 。代码应该是

```
 Public Overrides Sub Input0_ProcessInputRow(ByVal Row As Input0Buffer)
  Dim result As DateTime
  If DateTime.TryParseExact(Row.EVENTD, "dd/MM/yyyy", Nothing,    Globalization.DateTimeStyles.None, result) Then
  Row.ValidD = result.Add(TimeSpan.Parse(Row.EVENTT))
  End If
  End Sub 
```

Script 转换后，不需要使用 Derived 组件。Valid_D 列中得到的结果包含`datetime` 格式的有效值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:22:56.367

如果您想在没有脚本的情况下执行此操作，则可以将表达式从

`(DT_DBTIMESTAMP)(SUBSTRING(EVENT_D,7,4) + "-" + SUBSTRING(EVENT_D,4,2) + "-" + SUBSTRING(EVENT_D,1,2) + EVENT_T)`

到

`(DT_DBTIMESTAMP)(SUBSTRING(EVENT_D,7,4) + "-" + SUBSTRING(EVENT_D,4,2) + "-" + SUBSTRING(EVENT_D,1,2) + " " + EVENT_T)`

日期和时间部分之间没有空格最有可能导致您的原始错误。你得到

2012-04-3012:25:37

代替

2012-04-30 12:25:37

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-07T04:56:11.243

在将包含日期的字符串转换为 datetimestamp 字段时，我遇到了同样的问题。这都是由于场地中的空间。所以我们需要检查空间，然后将其转换为 datetimestamp。下面是相同的表达式。

LEN(TRIM([Field1])) == 1 ？NULL(DT_DBTIMESTAMP) : (DT_DBTIMESTAMP)(SUBSTRING([Field1],1,4) + "-" + SUBSTRING([Field1],5,2) + "-" + SUBSTRING([Field1],7,2) + " " + SUBSTRING([Field1],10,2) + ":" + SUBSTRING([Field1],12,2))

# java - Spring MVC将多个列表从控制器传递到jsp

> ID：13795809
> 
> 赞同：5
> 
> 时间：2012-12-10T06:01:57.287
> 
> 标签：java, jsp, spring-mvc, jstl

我有两个对象`Employee`，`Department`Employee 包含`dept_id`. 我想要做的是`Employee`在 jsp 页面的表格中显示内容。但是`dept_id`我不想显示，而是想`dept_name`从`Department`表格中显示。到目前为止，我的控制器方法为：

```
public ModelAndView viewEmployee(HttpServletRequest request,
            HttpServletResponse response) throws Exception {

        List<Employee> employeeList = employeeService.getAllEmployee();
        List<Department> departmentList = new ArrayList<Department>();
        for (Employee e : employeeList) {
            departmentList.add(departmentService.getDepartment(e.getDept_id()));
        }
        Map<String, Object> model = new HashMap<String, Object>();
        model.put("employee", employeeList);
        model.put("department", departmentList);

        return new ModelAndView("viewEmployee", "model", model);
    } 
```

**viewEmployee.jsp**

```
<table border="1px" bordercolor="black" width=80% align="center">
                <tr>
                    <td>Name</td>
                    <td>Gender</td>
                    <td>Salary</td>
                    <td>Department</td>
                    <td>Action</td>
                </tr>
                <c:forEach items="${model.employeeList}" var="element">

                    <tr>
                        <td><c:out value="${element.name}" /></td>
                        <td><c:out value="${element.gender}" /></td>

                        <td><c:out value="${element.salary}" /></td>

                        <td>display Department Name here </td>

                        <td><a
                            href="<c:url value="editEmployee.htm">  
                    <c:param name="emp_id" value="${element.id}"/>  
        </c:url>  
    ">Edit</a>
                            <a
                            href="<c:url value="deleteEmployee.htm">  
                    <c:param name="emp_id" value="${element.id}"/>  
        </c:url>  
    ">Delete</a>

                        </td>
                    </tr>

                </c:forEach>
            </table> 
```

有什么帮助吗？我无法将地图内容显示到 jsp 页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T06:12:47.250

它应该是`<c:forEach items="${model.employee}" var="element">`

部门也应该是 Employee 的属性，以便您可以使用`${employee.department.name}`

# c# - 无法在 Visual Studio 2010 中为安装项目选择新的解决方案配置

> ID：13795810
> 
> 赞同：1
> 
> 时间：2012-12-10T06:01:57.757
> 
> 标签：c#, visual-studio-2010, setup-project, solution

我在 Visual Studio 2010 中有一个具有多个解决方案配置的 C# 项目（不仅是调试版本）。几天前，我为我的项目创建了另一个设置项目并创建了一个新的解决方案配置。在配置管理器中，我可以为我的解决方案中的所有项目选择我的新配置，除了我的新设置项目。在下拉列表中它只有调试和发布，而其他设置项目有我的新配置。
有谁知道问题可能出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:26:51.687

好的，我找到了解决方案。我将 vdproj 文件作为 xml 文件打开后，手动添加了必要的配置。

# c# - 在 EF Code First 中拥有计算字段的正确方法

> ID：13795811
> 
> 赞同：2
> 
> 时间：2012-12-10T06:02:05.523
> 
> 标签：c#, entity-framework, ef-code-first, calculated-columns

我在 SO 上引用了这个问题：

[使用 Entity Framework Code First 存储只读计算字段](https://stackoverflow.com/questions/5663488/store-read-only-calculated-field-with-entity-framework-code-first)

他们所做的事情是有道理的，但我正在尝试一些不同的东西，并且不确定我的实现是否正确，或者是否有更简单的方法来做到这一点：

```
public class AffiliateCommission
{
    public int Id { get; set; }
    public Merchant Merchant { get; set; }
    public AffiliateCommissionType Type { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public int Amount { get; set; }
    public string Status { get; set; }
    public DateTime RecievedDate { get; set; }
    public int TotalPaid { get 
    {
        if (Status == "Paid")
        {
            return this.Amount += this.Amount;
        }
        return 0;
    }
        protected set { }
    }

    public int TotalUnpaid
    {
        get
        {
            if (Status == "Unpaid")
            {
                return this.Amount += this.Amount;
            }
            return 0;
        }
        protected set { }
    }
    public int TotalInvoiced
    {
        get
        {
            if (Status == "Invoiced")
            {
                return this.Amount += this.Amount;
            }
            return 0;
        }
        protected set { }
    }
} 
```

将有一个 AffiliateCommissions 列表，我想根据状态获得所有佣金的总数。也许将它存储在不同的模型中？需要一些实施建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:00:24.830

您为什么要保留计算字段？使用属性中的计算逻辑，您可以将属性保留为瞬态并让它每次都即时计算。这样就不需要坚持了。你的计算似乎不是很昂贵。这种方法还具有计算值始终准确的优势，在您的业务逻辑发生变化的情况下。

持久化计算字段的一种用例是用于报告您希望直接从数据库中提取的报告。如果是这种情况，我建议改为查看 mapreduce 查询：[http ://en.wikipedia.org/wiki/MapReduce](http://en.wikipedia.org/wiki/MapReduce)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:55:45.830

我喜欢 EF Code First，但我实际上并不“首先编写代码”。我通常会在数据库中创建架构并使用 EF Code First Powertool 进行逆向工程。Code First 的重量较轻，但整个数据库升级过程在开发和生产中可能会很痛苦，所以我发现以老派的方式维护数据库和逆向工程来获取我的实体更容易。

您可以尝试这种方法，在 SQL Server 中创建计算字段，然后对其进行逆向工程以查看生成的代码。

# perl - 在 List::Util::reduce 中查询 reg 代码

> ID：13795814
> 
> 赞同：1
> 
> 时间：2012-12-10T06:02:25.237
> 
> 标签：perl

我在 List::Util 中遇到了以下代码，用于 reduce 子例程。

```
my $caller = caller;
local(*{$caller."::a"}) = \my $a;
local(*{$caller."::b"}) = \my $b; 
```

我可以理解reduce函数被称为：

```
my $sum = reduce { $a + $b } 1 .. 1000; 
```

所以，我理解代码试图引用子例程中提到的 $a 。但是，我无法正确理解意图。

作为参考，我正在添加子程序的完整代码

```
sub reduce (&@) {
  my $code = shift;
  require Scalar::Util;
  my $type = Scalar::Util::reftype($code);
  unless($type and $type eq 'CODE') {
    require Carp;
    Carp::croak("Not a subroutine reference");
  }
  no strict 'refs';

  return shift unless @_ > 1;

  use vars qw($a $b);

  my $caller = caller;
  local(*{$caller."::a"}) = \my $a;
  local(*{$caller."::b"}) = \my $b;

  $a = shift;
  foreach (@_) {
    $b = $_;
    $a = &{$code}();
  }

  $a;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T07:03:13.963

以下将 package variable 别名`$foo`为 variable `$bar`。

```
*foo = \$bar; 
```

对一个的任何更改都会更改另一个，因为两个名称都引用相同的标量。

```
$ perl -E'
   *foo = \$bar;
   $bar=123; say $foo;
   $foo=456; say $bar;
   say \$foo == \$bar ? 1 : 0;
'
123
456
1 
```

当然，您可以完全符合条件，`*foo`因为它是符号表条目。以下将包变量别名`$main::foo`为`$bar`.

```
*main::foo = \$bar; 
```

或者，如果您在编译时不知道名称

```
my $caller = 'main';
*{$caller."::foo"} = \$bar;   # Symbolic reference 
```

`$bar`, of course, can just as easily be a lexical variable as a package variable. And since `my $bar;` actually returns the variable begin declared,

```
my $bar;
*foo = \$bar; 
```

can be written as

```
*foo = \my $bar; 
```

So,

```
my $caller = caller;
local(*{$caller."::a"}) = \my $a;
local(*{$caller."::b"}) = \my $b; 
```

declares and aliases lexical variables `$a` and `$b` the similarly named package variables in the caller's namespace.

`local` simply causes everything to return to their original state once the sub is exited.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T07:16:55.823

### On scope

Perl has two variable name scoping mechnisms: global and lexical. Declaration of lexical vars is done with `my`, and they are accessibly by this name until they encounter a closing curly brace.

Global variables, on the other hand, are accessible from anywhere and do not have a scope. They can be declared with `our` and `use vars`, or do not have to be declared if `strict` is not in effect. However, they have *namespaces*, or `packages`. The namespace is a prefix seperated from the variable name by two colons (or a single quote, but never do that). Inside the package of the variable, the variable can be accessed with or without the prefix. Outside of the package, the prefix is required.

The `local` function is somewhat special and gives global variables a temporary value. The scope of this value is the same as that of a lexical variable plus the scopes of all subs called within this scope. The old value is restored once this scope is exited. This is called *the dynamic scope*.

### On Globs

Perl organizes global variables in a big hash representing the namespace and all variable names (sometimes called the *stash*). In each slot of this hash, there is a so-called glob. A typeglob is a special hash that has a field for each of Perls native types, e.g. scalar, array, hash, IO, format, code etc. You assign to a slot by passing the glob a reference of a value you want to add - the glob figures out the right slot on it's own. This is also the reason you can have multiple variables with the same name (like `$thing`, `@thing`, `%thing`, `thing()`). Typeglobs have a special *sigil*, namely the asterisk `*`.

### On `no strict 'refs'`

The `no strict 'refs'` is a cool thing if you know what you are doing. Normally you can only dereference normal references, e.g.

```
my @array = (1 .. 5);
my $arrayref = \@array; # is a reference
push @{$arrayref}, 6; # works
push @{array}, 6; # works; barewords are considered o.k.
push @{"array"}, 6; # dies horribly, if strict refs enabled. 
```

The last line tried to dereference a string, this is considered bad practice. However, under `no strict 'refs'`, we can access a variable of which we do not know the name at compile time, as we do here.

### Conclusion

The `caller` functions returns the name of the package of the calling code, i.e. it looks up one call stack frame. The name is used here to construct the full names of `$a` and `$b` variables of the calling packages, so that they can be used there without a prefix. Then, these names are `local`ly (i.e. in the dynamic scope) assigned to the reference of a newly declared, lexical variable.

The global variables `$a` and `$b` are predeclared in each package.

In the `foreach` loop, these lexicals are assigned different values (lexical vars take precedence over global vars), but the global variables `$foo::a` and `$foo::$b` point to the same data because of the reference, allowing the anonymous callback sub in the `reduce` call to read the two arguments easily. (See ikegamis answer for details on this.)

All of this hassle is good because (a) the effects are not externaly visible, and (b) the callback doesn't have to do tedious argument unpacking.

# css - CSS clearfix在chrome / safari中隐藏文本？

> ID：13795823
> 
> 赞同：0
> 
> 时间：2012-12-10T06:03:28.410
> 
> 标签：css, google-chrome, safari, clearfix

我面临一个奇怪的问题。[我正在使用CSS-Tricks](http://css-tricks.com/snippets/css/clear-fix/)上描述的简单 CSS clearfix hack来清除浮动。代码片段：

```
*:after {
  content: "";
  display: table;
  clear: both;
} 
```

但是，添加上述代码会导致文本在 Chrome 和 Safari 中不可见。我现在已经在几台设备上对其进行了测试，每次都得到相同的结果，但我不明白为什么这会破坏任何东西。然而，火狐

您可以在此处查看[工作版本](http://dev.zachwolf.com/fonts-demo/a/)和[在此处查看损坏的版本](http://dev.zachwolf.com/fonts-demo/b/)。如果您检查页面源，唯一的区别是上面的代码片段被注释掉了。

问题截图[http://cl.ly/image/3h1s0Q31473Q](http://cl.ly/image/3h1s0Q31473Q)

我花了一些时间环顾四周，但在其他任何地方都找不到任何提及这个问题的地方。在 Firefox 中一切都很好。

提前致谢，

-扎克

# django - Django - 从其他字段动态分配初始值给表单

> ID：13795825
> 
> 赞同：0
> 
> 时间：2012-12-10T06:03:38.083
> 
> 标签：django, django-forms

我正在创建一个 Django 应用程序。我想知道它有可能（我没有在任何地方看到它）创建一个具有初始值的表单，该初始值可以根据其他字段中的选择而改变。更具体地说，我有一个字段，它是标准宇宙学的下拉菜单，每个宇宙学都有一组特定的参数。这些参数是它们自己的字段。我想在用户从下拉菜单中选择特定选项后设置这些参数的初始值。如果可能，它们也应该在完成后显示为灰色（即不可更改）（下拉菜单中有一个选项是“自定义”，它们应该是可编辑的）。

我希望这是足够的信息。干杯。

# zk - zkoss中没有孩子时如何在标签前添加树结

> ID：13795830
> 
> 赞同：0
> 
> 时间：2012-12-10T06:03:58.033
> 
> 标签：zk

我正在 zkoss 框架中构建一个动态树。在这种情况下，当没有孩子时，树旋钮（用于通过单击它来展开和压缩树）不可见。但我的要求是即使没有孩子该旋钮应该是可见的。请任何人帮助我做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:23:23.337

在数据结构的第一个位置添加一个特殊对象，
并告诉您的渲染器/模板为其创建一个不可见的对象。
所以，因为你有一个孩子，你看到了旋钮，但它是不可见的，所以它似乎是空的。

# c# - C#(.NET 4.0) 应用程序在其引用之一从 .net 2.0 升级到 .net 4.0 时引发 System.MissingMethodException

> ID：13795832
> 
> 赞同：1
> 
> 时间：2012-12-10T06:04:09.037
> 
> 标签：c#, .net, .net-4.0, interop, .net-2.0

我有一个最初用 .net 4.0 编写的应用程序。此应用程序引用了针对 .net 2.0 的库。最近，我不得不将此库升级到 .net 4.0，而不更改任何公开方法的签名。但是将库升级到.net 4.0，调用这个库的exe会抛出异常

```
Unhandled Exception: System.MissingMethodException: Method not found: 
```

`'Void InteropSpace.myClass.Table(System.String[,] ByRef, System.String[,])'. at` `ConsoleApplication1.Program.Main(String[] args)`

我在 .net 2.0 版本的库和 ILSpy 中的 .net 4.0 版本的库中检查了这个方法（表）。函数的签名没有改变。我对为什么我无法弄清楚这种奇怪的行为感到有些恼火。

**更新**：旧库（.net 2.0）中导出函数的签名：

```
.method public hidebysig static 
    void Table (
        [out] string[, ]& TableControl2,
        string[, ] TableControl
    ) cil managed 
```

新库（.net 4.0）中导出函数的签名：

```
.method public hidebysig static 
    void Table (
        [out] string[0..., 0...]& TableControl2,
        string[0..., 0...] TableControl
    ) cil managed 
```

我并不完全相信这是它失败的原因。和有什么区别

```
string[0..., 0...] 
```

和

```
string[, ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:23:07.840

可能是.net 4中该方法有一个新的重载。这篇文章可能会有所帮助..

[http://www.mikeplate.com/2008/09/26/missingmethodexception-and-waitone/](http://www.mikeplate.com/2008/09/26/missingmethodexception-and-waitone/)

# jquery - 用于更改 GET URL 参数的 Jquery 或 JS 代码

> ID：13795835
> 
> 赞同：2
> 
> 时间：2012-12-10T06:04:17.357
> 
> 标签：jquery, get

我有一个带有复选框的页面，因此当它被选中时，它将通过 GET 提交值和参数，这是默认情况下的样子：

**传递两个产品 SKU**：

```
http://example.com/product-comparisons/?product-skus=1&product-skus=2 
```

**仅传递一个产品 SKU：**

```
http://example.com/product-comparisons/?product-skus=1 
```

或这个：

```
http://example.com/product-comparisons/?product-skus=2 
```

我想要完成的是仅在传递两个或多个产品时更改 GET 参数，例如：

```
http://example.com/product-comparisons/?product-skus=1&product-skus=2 
```

进入这个：

```
http://example.com/product-comparisons/?product-skus=1,2 
```

并且当没有选中的产品但提交了表单时，它会将 URL 更改为：

```
http://example.com/product-comparisons/ 
```

进入这个：

```
http://example.com/product-comparisons/?product-skus=0 
```

即向 product-skus 查询字符串变量添加 0。

我已经有一个 jQuery 代码，它会在单击提交按钮时运行：

```
jQuery( document ).ready( function( $ ) {
$('#myform').submit( function() {

    //change the GET URL parameters

 }); 
```

});

但我坚持剩下的过程。我希望在提交表单时发生这种情况。如果有人可以提供一些示例代码来入门，我会很高兴。太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:14:00.327

我将提供一个不会直接回答您的问题的建议，但它可能会解决您的问题，并且可能会在此过程中为您节省大量工作和头痛。

我假设您要修改 GET 参数，因为您的服务器端应用程序仅在传递多个值时接收其中一个值，并且您希望拆分逗号分隔的参数来解决您的问题。

有一个更简单的选择。

将您的复选框`name`属性更改为`product_skus[]`，当您在服务器端应用程序上读取它时，它将作为数组检索。

例如：

```
http://example.com/product-comparisons/?product-skus[]=1&product-skus[]=2 
```

如果你在 PHP 中阅读：

```
print_r($_GET['product_skus']);` 
```

会给你：

```
Array(0 => '1', 1 => '2') 
```

希望对您有所帮助！

（PS - 你也可以用其他服务器端语言来做到这一点，比如 Python，我相信大多数其他现代语言。Java 和 .NET 可以在没有 [] 语法的情况下做到这一点，所以我很确定你不使用那些。）

# android - 适用于 Android 的带有 SSL 的 Https 请求

> ID：13795840
> 
> 赞同：0
> 
> 时间：2012-12-10T06:05:25.607
> 
> 标签：android

对于 android 开发，如何发送带有 SSL 证书的 https 请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:26:36.400

```
 >     Try using TrustManagerManipulator Class:

              try {
                                TrustManagerManipulator.allowAllSSL();
                                try {
                                    SoapObject request = new SoapObject(Data.NAMESPACE,
                                            methodName);

                                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                                            SoapEnvelope.VER11);

                                    if (methodName.equals(Data.DOPAYMENT))

                                    {
                                        request.addProperty("firstname", param1);
                                        request.addProperty("lastName", param2);

                envelope.dotNet = true;
                                envelope.setOutputSoapObject(request);
                                envelope.env = "http://schemas.xmlsoap.org/soap/envelope/";
                                TrustManagerManipulator.allowAllSSL();
                                System.setProperty("http.keepAlive", "false");

                                HttpTransportSE androidHttpTransport = new HttpTransportSE(
                                        Data.URL_BASE);
                                androidHttpTransport
                                        .setXmlVersionTag("<?xml version=\"1.0\" encoding=\"utf-8\"?>");

                                try {
                                    androidHttpTransport.call(Data.SOAP_ACTION,
                                            envelope);
                                } catch (Exception e) {
                                    e.printStackTrace();
                                    Toast.makeText(context, "Network failed!",
                                            Toast.LENGTH_LONG).show();
                                    dismissDialog();
                                }
                                SoapObject resultsRequestSOAP = (SoapObject) envelope.bodyIn;
                                String responseLocal = resultsRequestSOAP.toString();
                                responseXML = (String) resultsRequestSOAP
                                        .getProperty(0);
                                Log.v("responseXML0::", "" + responseXML);

                                Log.v("responseSTR", "" + responseLocal);

///////////////////////////////////

> TrustManagerManipulator Class

import java.security.KeyManagementException;
import java.security.NoSuchAlgorithmException;
import java.security.SecureRandom;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;
import javax.net.ssl.HostnameVerifier;
import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSession;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;

public class TrustManagerManipulator implements X509TrustManager {

    private static TrustManager[] trustManagers;
    private static final X509Certificate[] acceptedIssuers = new X509Certificate[] {};

    public boolean isClientTrusted(X509Certificate[] chain) {
        return true;
    }

    public boolean isServerTrusted(X509Certificate[] chain) {
        return true;
    }

    public static void allowAllSSL() 
    {

        HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier() {
            public boolean verify(String hostname, SSLSession session) {
                return true;
            }
        });
        SSLContext context = null;
        if (trustManagers == null) {
            trustManagers = new TrustManager[] { new TrustManagerManipulator() };
        }
        try {
            context = SSLContext.getInstance("TLS");
            context.init(null, trustManagers, new SecureRandom());
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        } catch (KeyManagementException e) {
            e.printStackTrace();
        }
        HttpsURLConnection.setDefaultSSLSocketFactory(context
                .getSocketFactory());
    }

    public void checkClientTrusted(X509Certificate[] chain, String authType)
            throws CertificateException {
    }

    public void checkServerTrusted(X509Certificate[] chain, String authType)
            throws CertificateException {
    }

    public X509Certificate[] getAcceptedIssuers() {
        return acceptedIssuers;
    }
} 
```

# xml - 链接 iTunes 的 ITC2 文件和“iTunesLibrary.XML”

> ID：13795842
> 
> 赞同：8
> 
> 时间：2012-12-10T06:05:41.690
> 
> 标签：xml, image, itunes

我正在尝试从 iTunes 的 .ITC2 文件中转储专辑插图。女巫我能做到。但在我尝试转储图像之前，我需要记下它对应的专辑/曲目/艺术家（三者中的任何一个）。有没有人发现他们是否更改了缓存文件的命名方式？因为，文件名为“2100F8A77FA24601-F2E26C349A9AB861.itc2”“2100F8A77FA24601”实际上是我的库 ID，但在我的库的 XML 文件中找不到“F2E26C349A9AB861”。有人可以向我解释如何将 itc2 文件与位于 XML 文件中的轨道相关联。

[参考](http://nada-labs.net/2010/file-format-reverse-engineering-an-introduction/comment-page-1/)

我确实从上面的链接中获得了一些关于如何设置 iTunes 的信息。但是这篇文章已经过时了，并且对于今天的 iTunes（v11）版本不是 100% 正确的。

谢谢， 索罗德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:28:19.400

好吧，实际上，.itc2 文件名的第二部分应该是*iTunes Library.xml*文件中的曲目持久 id。也许您有已删除曲目的图稿缓存？

可以通过以下方式从 XML 库中检索到的信息计算出艺术品的路径：

```
[itunes library folder]/Album Artwork/Cache/[Library Persistent ID]/XX/YY/ZZ/[Library Persistent ID - Track Persistent ID].itc2 
```

在哪里：

```
 XX: First hex digit from the end in the track persistent id in decimal form
    YY: Second hex digit from the end in the track persistent id in decimal form
    ZZ: Third hex digit from the end in the track persistent id in decimal form 
```

因此，如果：

```
Library Persistent ID = BEAE1DB35624CB18
Track Persistent ID = 2488665ADBC5420F 
```

然后文件夹是：

```
[itunes library folder]/Album Artwork/Cache/BEAE1DB35624CB18/15/00/02/BEAE1DB35624CB18-2488665ADBC5420F.itc2 
```

iTunes XML 库使用[plist xml 格式](http://en.wikipedia.org/wiki/Property_list)，这是 XML[做错了](http://cakoose.com/wiki/plist_xml_is_pointless)。尽管如此，您仍然可以通过一些 XSLT 魔法找到自己的出路。

检查下面的 java 代码，它将转换*iTunes Library.xml*并将计算出的艺术品路径以及艺术家和曲目名称放在*output.xml*中：

测试.java：

```
import java.io.File;

import javax.xml.transform.Source;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.stream.StreamResult;
import javax.xml.transform.stream.StreamSource;

public class Test {
    public static void main(String[] args) throws Exception {   
        String libraryFolder = "/Path/To/iTunes/";
        TransformerFactory factory = TransformerFactory.newInstance();
        Source xslt = new StreamSource(new File("convert.xsl"));
        Transformer transformer = factory.newTransformer(xslt);
        transformer.setParameter("library_folder", libraryFolder);
        Source text = new StreamSource(new File(libraryFolder + "iTunes Library.xml"));
        transformer.transform(text, new StreamResult(new File(libraryFolder  + "output.xml")));
    }
} 
```

和转换.xsl：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:param name="library_folder"/>
    <xsl:template match="plist">
        <xsl:variable name="libid">
            <xsl:value-of select="dict/key[. = 'Library Persistent ID']/following-sibling::string[1]"/>
        </xsl:variable>
        <tracks>
            <xsl:apply-templates select="dict/key[. = 'Tracks']/following-sibling::dict[1]/dict" mode="track">
                <xsl:with-param name="libid"><xsl:value-of select="$libid"/></xsl:with-param>
            </xsl:apply-templates>
        </tracks>
    </xsl:template>

    <xsl:template match="dict" mode="track">  
        <xsl:param name="libid" />
        <entry>
            <xsl:variable name="trackid">
                <xsl:value-of select="key[. = 'Persistent ID']/following-sibling::string[1]"/>
            </xsl:variable>
            <xsl:variable name="dig1">
                <xsl:call-template name="HexToDecimal">
                    <xsl:with-param name="hexNumber" select="substring($trackid, string-length($trackid))"/>
                </xsl:call-template>
            </xsl:variable>
            <xsl:variable name="dig2">
                <xsl:call-template name="HexToDecimal">
                    <xsl:with-param name="hexNumber" select="substring($trackid, string-length($trackid) - 1, 1)"/>
                </xsl:call-template>
            </xsl:variable>
            <xsl:variable name="dig3">
                <xsl:call-template name="HexToDecimal">
                    <xsl:with-param name="hexNumber" select="substring($trackid, string-length($trackid) - 2, 1)"/>
                </xsl:call-template>
            </xsl:variable>
            <artist><xsl:value-of select="key[. = 'Artist']/following-sibling::string[1]"/></artist>
            <name><xsl:value-of select="key[. = 'Name']/following-sibling::string[1]"/></name>
            <track_id><xsl:value-of select="$trackid"/></track_id>
            <artwork><xsl:value-of select="concat($library_folder, 'Album Artwork/Cache/',$libid,'/',$dig1,'/',$dig2,'/',$dig3,'/',$libid,'-',$trackid,'.itc2')"/></artwork>
        </entry>
    </xsl:template>

    <!-- Very simple hex to decimal, only one digit -->
    <xsl:template name="HexToDecimal">
        <xsl:param name="hexNumber" />
        <xsl:value-of select="format-number(number(substring-before(substring-after('00/11/22/33/44/55/66/77/88/99/A10/B11/C12/D13/E14/F15/a10/b11/c12/d13/e14/f15/', $hexNumber), '/')),'00')" />
    </xsl:template>

</xsl:stylesheet> 
```

# api - 有没有在线搜索和下载字幕的api？

> ID：13795844
> 
> 赞同：17
> 
> 时间：2012-12-10T06:05:53.917
> 
> 标签：api, subtitle

我需要一个 api 用于在我的 android 应用程序中在线搜索和下载字幕。

我尝试了 Sublight 的 api，但我无法获得任何字幕。

还有其他的api吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-10T06:30:35.367

是的，实际上。[OpenSubtitles.org](http://www.opensubtitles.org/en)有一个很好的搜索和下载 API。

[干得好](http://trac.opensubtitles.org/projects/opensubtitles/wiki/XMLRPC)

# python - 如何更改python列表字典中的值

> ID：13795851
> 
> 赞同：0
> 
> 时间：2012-12-10T06:06:29.950
> 
> 标签：python

我有这样的字典

`dict1 = [('var1','aa'),('var2','bb')('var3','cc')]`

我有另一本字典

`dict2 = [('var2','22'),('var3','33'),('var5','23'),('var6','33'),('var7','23')]`

我想要做的是我`dict2`用 dict1 中的变量替换内容

我的意思是最终的dict3 =`dict2 = [('var2','bb'),('var3','cc'),('var5','23'),('var6','33'),('var7','23')]`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T06:11:36.933

```
>>> list1 = [('var1','aa'),('var2','bb'),('var3','cc')]
>>> list2 = [('var2','22'),('var3','33'),('var5','23'),('var6','33'),('var7','23')]
>>> dict1 = dict(list1)
>>> list2 = [(k, dict1.get(k, v)) for k, v in list2]
>>> list2
[('var2', 'bb'), ('var3', 'cc'), ('var5', '23'), ('var6', '33'), ('var7', '23')] 
```

这将保持原始顺序`list2`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T06:11:08.500

那些不是[字典](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)。如果他们是，这里是如何做到的：

```
>>> dict1 = {'var1':'aa', 'var2':'bb' ,'var3':'cc'}
>>> dict2 = {'var2':'22', 'var3':'33', 'var5':'23', 'var6':'33', 'var7':'23'}
>>> for key in dict2:
...     if key in dict1:
...             dict2[key] = dict1[key]
... 
>>> dict2
{'var5': '23', 'var7': '23', 'var6': '33', 'var3': 'cc', 'var2': 'bb'} 
```

您可能想从我的示例中的字典开始`dict1`并`dict2`实际成为字典，但请注意，您可以使用例如轻松转换它们。`dict1 = dict(dict1)`.

# sharepoint - 如何使用javascript或jquery在sharepoint 2010的文档库中隐藏浏览器中的视图

> ID：13795858
> 
> 赞同：-1
> 
> 时间：2012-12-10T06:07:09.010
> 
> 标签：sharepoint

我在 sharepoint 2010 中集成了 Office Web Apps。当从上下文菜单中的文档库中选择文档时，我想在浏览器中隐藏选项视图并在文档库中在浏览器选项中编辑。

是否可以使用 jquery 或 javascript 如果是的话可以告诉我怎么做吗？我使用以下 css 隐藏，但它只隐藏删除选项而不是在浏览器选项中查看

```
li.ms-MenuUIULItem[text~=Delete]
        {
            display: none;
        } 
```

所以我也修改如下

```
li.ms-MenuUIULItem[text~=View&nbsp;in&nbsp;Browser]
        {
            display: none;
        } 
```

它也没有工作。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:04:30.973

使用功能比使用 javascript 更好。

您必须创建一个包含`HideCustomAction`元素的特征。元素结构是这样的：

```
<HideCustomAction
  GroupId = "[GroupId]"
  HideActionId = "[HideActionId]"
  Id = "...."
  Location = "....">
</HideCustomAction> 
```

这是一个链接，可以帮助您找到所需的操作 ID：

[http://www.sharepointarchitects.us/johnholliday/post/0001/01/01/how-to-find-customaction-identifiers/](http://www.sharepointarchitects.us/johnholliday/post/0001/01/01/how-to-find-customaction-identifiers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:16:27.880

我使用 jquery 创建了它

```
 $(document).ready(function(){            

        $('.ms-MenuUIPopupBody').live('blur', function() {       
           var elm = $("div.ms-MenuUIULItem a:contains('View in Browser')"); 
           elm.remove();     
           $("div.ms-MenuUIULItem a:contains('Edit in Browser')").remove();  
         });
}); 
```

它仅在焦点或模糊或鼠标悬停时隐藏菜单

我希望它在加载时隐藏，因为我单击文档右侧的“V”选项它应该在浏览器中隐藏视图并在浏览器中编辑

当我点击 V 选项时！[我希望一旦我点击测试右侧的 v 选项，它应该在浏览器中隐藏视图并在浏览器中编辑][1]

# javascript - 谷歌地图 API v3；Web 服务请求并使用 for-loop 显示多个位置

> ID：13795861
> 
> 赞同：2
> 
> 时间：2012-12-10T06:07:49.790
> 
> 标签：javascript, web-services, google-maps, google-maps-api-3, for-loop

我是 javascript 新手，所以如果我的问题不清楚，我深表歉意。我会尽量澄清。

我要完成的工作：根据您当前的位置让谷歌地图填充健身房。（目前它仅填充一个健身房，并且仅用于当我删除 for 循环并在 i 的位置输入 0 时输入的坐标）

我正在尝试创建一个 for 循环，以便它多次运行代码块，并根据搜索和用户当前位置向地图添加多达 12 个标记。

我也无法弄清楚如何将用户的地理位置添加到 httpRequest 中。我尝试制作一个变量“both”（我将其注释掉），当放在 httprequest 中的位置时，它将输入用户当前的纬度和经度。

这是我的一段代码：

```
function handler_actionBtn8_onClick(mouseev){

//console.log("in button click at top " + latitude + longitude);
// both = [latitude,longitude];

for (var i=0; i<12; i++){

var data = app.httpRequest(
    "https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=41.265319,-95.948305&radius=1000&types=gym&sensor=false&key=AIzaSyCKnE1Fk2JKQXjhYuVuBK1uPZOz_bpNZRQ", 
    "GET", 

        function(data, error, httpResponse){
        if (error === false){
        console.log("in function if, error was false");
        console.log("data.results[i].name is " + data.results[i].name);
        console.log("the lng is " + data.results[i].geometry.location.lng);
        console.log("the lat is " + data.results[i].geometry.location.lat);

        // now need to display in map widget
        var temp = [data.results[i].geometry.location.lat, data.results[i].geometry.location.lng];
        app.setValue("googlemap", temp);
       // app.setProperty("gmap", "longitude", data.results[i].geometry.location.lng);
        //app.setProperty("gmap", "latitude", data.results[i].geometry.location.lat);         
    } else {
        app.showMessage("AJAX Error", "Cannot locate it");
        console.log("here is the error place data", data);
    }
    }, {}, "JSON"); 
}
} 
```

我还有一段我没有包含的代码，它找到了地理位置，然后有变量纬度和经度，我试图在这一部分中使用它来将它添加到位置。

再次抱歉，如果这是杂乱无章的，我将尝试澄清或包括我需要的任何其他内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:16:45.710

这个 javascript 是在网站或手机应用程序上运行还是什么？

我无法正确测试您的代码，因为您的 api 密钥特定​​于您的域 (CORS)，并且您的信息有点模糊，但是从上面的内容来看，您需要稍微重构代码：您应该移动httpRequest 在您的 forloop 之外的初学者，因为您发出相同的请求 12 次，而是遍历`data.results`数组以获取请求，然后将每个标记/位置添加到您的地图中。

# actionscript-3 - 选择年份的日期字段

> ID：13795865
> 
> 赞同：1
> 
> 时间：2012-12-10T06:08:27.127
> 
> 标签：actionscript-3, apache-flex, air, flex4.5

我正在使用 Datefield 来获取用户生日..但是很难选择像 1987 年这样的过去年份..在这里我必须移动 12 个月才能通过一年..有什么方法可以轻松实现它吗？

```
 <mx:DateField  width="17%" height="75%" selectedDate="{new Date()}" formatString="MM/DD/YYYY" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:27:06.667

您可以启用 DateField 控件的 yearNavigationEnabled 属性

```
<mx:DateField yearNavigationEnabled="true"/> 
```

只需鼠标按下年份导航向上箭头或向下箭头，它将增加/减少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:02:48.077

考虑将此字段拆分为三个列表选择器，并用序列号填充每个选择器，1-31 表示天，1-12 表示月份（或使用名称选择器），1900-当前年份（生成）表示年份。我从未见过任何网站使用这样的组合字段来选择出生日期，这仅用于从当前日期起 1-2 个月的日期。我希望这样的组件不是为了选择遥远的日期而设计的。

# ruby-on-rails - git push heroku master 失败

> ID：13795866
> 
> 赞同：0
> 
> 时间：2012-12-10T06:08:30.870
> 
> 标签：ruby-on-rails, git, heroku

我在山狮。我的用户名是管理员。

***更新！！！在终端运行接下来的三行之后 - 一切都很好！***

```
export ARCHFLAGS='-arch x86_64'
export PATH=/Library/PostgreSQL/9.1/bin:${PATH}
gem install pg 
```

当我尝试做 git push heroku master 时。它失败。我有这么多麻烦。我不知道该怎么办。

**'which heroku'**导致**/usr/bin/heroku**

**哪个 git**导致**/usr/local/git/bin/git**

**ruby -v**生成ruby**​​ 1.8.7**

我正在运行 Postgres 版本 1.0 (11)

**我有一个 Gemfile 和一个 Gemfile.lock：**

```
new-host:testing3 admin$ ls -la
total 72
drwxr-xr-x  21 admin  staff   714 Dec  9 18:40 .
drwx------+  6 admin  staff   204 Dec  8 16:20 ..
drwxr-xr-x  14 admin  staff   476 Dec 10 00:59 .git
-rw-r--r--   1 admin  staff   609 Dec  9 20:12 .gitignore
-rw-r--r--   1 admin  staff   812 Dec  9 20:14 Gemfile
-rw-r--r--   1 admin  staff  2502 Dec  6 17:54 Gemfile.lock
-rw-r--r--   1 admin  staff   204 Dec  9 18:40 README.markdown
-rw-r--r--   1 admin  staff  9208 Dec  6 17:54 README.rdoc
-rw-r--r--   1 admin  staff   273 Dec  6 17:54 Rakefile
drwxr-xr-x   8 admin  staff   272 Dec  8 18:28 app
drwxr-xr-x  10 admin  staff   340 Dec  6 17:54 config
-rw-r--r--   1 admin  staff   158 Dec  6 17:54 config.ru
drwxr-xr-x   4 admin  staff   136 Dec  8 16:34 db
drwxr-xr-x   3 admin  staff   102 Dec  6 17:54 doc
drwxr-xr-x   4 admin  staff   136 Dec  6 17:54 lib
drwxr-xr-x   4 admin  staff   136 Dec  8 16:33 log
drwxr-xr-x   8 admin  staff   272 Dec  6 17:54 public
drwxr-xr-x   3 admin  staff   102 Dec  6 17:54 script
drwxr-xr-x   8 admin  staff   272 Dec  6 17:54 test
drwxr-xr-x   6 admin  staff   204 Dec  8 16:33 tmp
drwxr-xr-x   4 admin  staff   136 Dec  6 17:54 vendor 
```

**Gemfile.lock 看起来像这样：**

```
GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.9)
      actionpack (= 3.2.9)
      mail (~> 2.4.4)
    actionpack (3.2.9)
      activemodel (= 3.2.9)
      activesupport (= 3.2.9)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.4)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.2.1)
    activemodel (3.2.9)
      activesupport (= 3.2.9)
      builder (~> 3.0.0)
    activerecord (3.2.9)
      activemodel (= 3.2.9)
      activesupport (= 3.2.9)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.9)
      activemodel (= 3.2.9)
      activesupport (= 3.2.9)
    activesupport (3.2.9)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    arel (3.0.2)
    builder (3.0.4)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.4.0)
    erubis (2.7.0)
    execjs (1.4.0)
      multi_json (~> 1.0)
    hike (1.2.1)
    i18n (0.6.1)
    journey (1.0.4)
    jquery-rails (2.1.4)
      railties (>= 3.0, < 5.0)
      thor (>= 0.14, < 2.0)
    json (1.7.5)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.19)
    multi_json (1.4.0)
    polyglot (0.3.3)
    rack (1.4.1)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.2)
      rack
    rack-test (0.6.2)
      rack (>= 1.0)
    rails (3.2.9)
      actionmailer (= 3.2.9)
      actionpack (= 3.2.9)
      activerecord (= 3.2.9)
      activeresource (= 3.2.9)
      activesupport (= 3.2.9)
      bundler (~> 1.0)
      railties (= 3.2.9)
    railties (3.2.9)
      actionpack (= 3.2.9)
      activesupport (= 3.2.9)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (>= 0.14.6, < 2.0)
    rake (10.0.2)
    rdoc (3.12)
      json (~> 1.4)
    sass (3.2.3)
    sass-rails (3.2.5)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    sprockets (2.2.2)
      hike (~> 1.2)
      multi_json (~> 1.0)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    sqlite3 (1.3.6)
    thor (0.16.0)
    tilt (1.3.3)
    treetop (1.4.12)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.35)
    uglifier (1.3.0)
      execjs (>= 0.3.0)
      multi_json (~> 1.0, >= 1.0.2)

PLATFORMS
  ruby

DEPENDENCIES
  coffee-rails (~> 3.2.1)
  jquery-rails
  rails (= 3.2.9)
  sass-rails (~> 3.2.3)
  sqlite3
  uglifier (>= 1.0.3) 
```

**Gemfile 看起来像这样：**

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

#gem 'sqlite3-ruby', '1.2.5', :group => development

gem 'pg'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

**我做了以下操作以将我在 github 上的存储库推送到我在 heroku 上的子域（我通过在 iterm 中执行 'heroku create' 来制作），但它失败了：**

```
new-host:testing3 admin$ git push heroku master
Counting objects: 72, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (58/58), done.
Writing objects: 100% (72/72), 26.90 KiB, done.
Total 72 (delta 8), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.2.2
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
       You are trying to install in deployment mode after changing
       your Gemfile. Run `bundle install` elsewhere and add the
       updated Gemfile.lock to version control.
       You have added to the Gemfile:
       * pg
       You have deleted from the Gemfile:
       * sqlite3
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:limitless-thicket-9719.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:limitless-thicket-9719.git'
new-host:testing3 admin$ 
```

**我执行了以下操作，因为我安装了 postgres，因此它位于我的 Applications 文件夹中并命名为 Postgres.app：**

```
new-host:testing3 admin$ gem install pg -- --with-pg-config=/Applications/Postgres.app/Contents/MacOS/bin/pg_config
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb --with-pg-config=/Applications/Postgres.app/Contents/MacOS/bin/pg_config
Using config values from /Applications/Postgres.app/Contents/MacOS/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --with-pqlib
    --without-pqlib
    --with-libpqlib
    --without-libpqlib
    --with-ms/libpqlib
    --without-ms/libpqlib

Gem files will remain installed in /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/pg-0.14.1 for inspection.
Results logged to /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/pg-0.14.1/ext/gem_make.out
new-host:testing3 admin$ --ruby=/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
-bash: --ruby=/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby: No such file or directory
new-host:testing3 admin$ --with-pg
-bash: --with-pg: command not found
new-host:testing3 admin$ --without-pg
-bash: --without-pg: command not found
new-host:testing3 admin$ --with-pg-dir
-bash: --with-pg-dir: command not found
new-host:testing3 admin$ --without-pg-dir
-bash: --without-pg-dir: command not found
new-host:testing3 admin$ --with-pg-include
-bash: --with-pg-include: command not found
new-host:testing3 admin$ --without-pg-include=${pg-dir}/include
-bash: --without-pg-include=dir/include: No such file or directory
new-host:testing3 admin$ --with-pg-lib
-bash: --with-pg-lib: command not found
new-host:testing3 admin$ --without-pg-lib=${pg-dir}/lib
-bash: --without-pg-lib=dir/lib: No such file or directory
new-host:testing3 admin$ --with-pg-config
-bash: --with-pg-config: command not found
new-host:testing3 admin$ --with-pqlib
-bash: --with-pqlib: command not found
new-host:testing3 admin$ --without-pqlib
-bash: --without-pqlib: command not found
new-host:testing3 admin$ --with-libpqlib
-bash: --with-libpqlib: command not found
new-host:testing3 admin$ --without-libpqlib
-bash: --without-libpqlib: command not found
new-host:testing3 admin$ --with-ms/libpqlib
-bash: --with-ms/libpqlib: No such file or directory
new-host:testing3 admin$ --without-ms/libpqlib
-bash: --without-ms/libpqlib: No such file or directory
new-host:testing3 admin$ 
new-host:testing3 admin$ 
new-host:testing3 admin$ Gem files will remain installed in /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/pg-0.14.1 for inspection.
ERROR:  While executing gem ... (RuntimeError)
    Unknown command files
new-host:testing3 admin$ Results logged to /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/pg-0.14.1/ext/gem_make.out 
```

**当我这样做时：**

```
new-host:testing3 admin$ bundle install
Fetching gem metadata from https://rubygems.org/...........
Fetching gem metadata from https://rubygems.org/..
Using rake (10.0.2) 
Using i18n (0.6.1) 
Using multi_json (1.4.0) 
Using activesupport (3.2.9) 
Using builder (3.0.4) 
Using activemodel (3.2.9) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.2) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.2.2) 
Using actionpack (3.2.9) 
Using mime-types (1.19) 
Using polyglot (0.3.3) 
Using treetop (1.4.12) 
Using mail (2.4.4) 
Using actionmailer (3.2.9) 
Using arel (3.0.2) 
Using tzinfo (0.3.35) 
Using activerecord (3.2.9) 
Using activeresource (3.2.9) 
Using bundler (1.2.3) 
Using coffee-script-source (1.4.0) 
Using execjs (1.4.0) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using json (1.7.5) 
Using rdoc (3.12) 
Using thor (0.16.0) 
Using railties (3.2.9) 
Using coffee-rails (3.2.2) 
Using jquery-rails (2.1.4) 
Installing pg (0.14.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb 
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config
    --with-pqlib
    --without-pqlib
    --with-libpqlib
    --without-libpqlib
    --with-ms/libpqlib
    --without-ms/libpqlib

Gem files will remain installed in /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/pg-0.14.1 for inspection.
Results logged to /Users/admin/.rvm/gems/ruby-1.9.3-p327/gems/pg-0.14.1/ext/gem_make.out
An error occurred while installing pg (0.14.1), and Bundler cannot continue.
Make sure that `gem install pg -v '0.14.1'` succeeds before bundling. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:20:31.973

发生的情况是，当您的本地 gem 未根据您对 Gemfile 所做的更改正确配置时，您正试图推送到实时服务器。

最后一条错误消息建议，确保`gem install pg`可行。首先，您可能应该完全卸载 Postgres。[然后，从http://postgresapp.com](http://postgresapp.com)安装 Postgres.app——这是让它运行的最简单方法。

安装完成后，您可以使用命令行工具正确连接到它，尝试运行`gem install pg`并查看是否有效。如果是这样，运行`bundle install`它应该成功完成。一旦它起作用了，你应该能够毫无问题地推送到heroku。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:33:29.813

```
export ARCHFLAGS='-arch x86_64'
export PATH=/Library/PostgreSQL/9.1/bin:${PATH}
gem install pg 
```

转到项目文件夹中的 Gemfile，在编辑器中打开它并使其看起来像这样：

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

#gem 'sqlite3-ruby', '1.2.5', :group => development

group :production do
  gem 'pg'
end

#group :development, :test do
#  gem 'sqlite3'
#end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

保存文件

运行 bundle install -- 不生产

混帐添加。

git commit -a -m "Heroku 重新提交"

git 推送

git push heroku 大师

# php - 如何加快引导工具提示

> ID：13795867
> 
> 赞同：1
> 
> 时间：2012-12-10T06:08:40.207
> 
> 标签：php, javascript, html, twitter-bootstrap, tooltip

我有一张每 60 秒动态重新加载的表。这使数据保持最新。我正在使用这里的脚本 - [http://www.michaelfretz.com/2010/04/21/using-ajax-to-load-data-from-php-into-your-website/](http://www.michaelfretz.com/2010/04/21/using-ajax-to-load-data-from-php-into-your-website/)

在有大约 15 条记录的页面上，Twitter Bootstrap 工具提示运行良好，速度很快，而且看起来很棒。

然而，在另一页上，我有 400 多条记录。每条记录都有一个悬停工具提示，显示数据库中有关该记录的信息。该信息已经输出到标题标签，但是当它悬停时，它需要超过一秒钟才能出现，这使得整个页面看起来很迟钝。

我认为这是由于使用了实时的“Rel”标签和 twitter javascript（持续更新），因此减慢了它的速度。但我不确定。

有什么办法可以解决这个问题.....还是我最好尝试制作一个分页表，每次单击下一步时都会加载下一页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:32:34.380

期望某人在 60 秒内遍历 400 条记录是很多的。在没有实际看到任何实际 html 的情况下，提出建议有点困难，但这里有三个：

*   请改用 title 属性 - 请参阅[Title 属性](http://webdesign.about.com/od/htmltags/a/aa101005.htm)。这意味着您正在使用内置浏览器代码而不是 Bootstrap 呈现工具提示。
*   为每一行显示一个主题/内容片段，而不仅仅是主题，即将内容的初始部分放在实际主题之后的可用空间中。如今，大多数人都拥有大型显示器，并且通过响应式设计，您可以在主题之后显示大量内容。
*   正如你所说，使用分页。Bootstrap 提供了一个，但它需要您进行接线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:47:59.787

### 400 条记录！太多了！

这与浏览器和系统的性能有很大关系。显示 400 条记录`live()`有点疯狂。浏览器肯定会崩溃。相反，你可以做一件事。只使用`pagination`和显示一个小的子集。此外，用户会发现难以导航和搜索。

另一种方法是使用数据[表](https://datatables.net/)。加载完整的内容，`table`不要担心任何事情。数据表将负责其余的工作。分页和搜索是这方面的好功能。

### 数据表截图：

[![数据表截图](../Images/a39a814950c4c95de45e744fa31d3c6b.png)](https://i.stack.imgur.com/R5kWA.gif)
[（来源：[webresourcesdepot.com](http://www.webresourcesdepot.com/wp-content/uploads/image/datatables.gif)）]

如果您看到这一点，从搜索、排序、提供工具提示的所有内容都在客户端完成，并且使用最少的数据集。因此，浏览器上的有效负载会更少，用户会看到他们只需要的部分。

# regex - 使用 pcregrep 搜索模式

> ID：13795877
> 
> 赞同：0
> 
> 时间：2012-12-10T06:10:13.203
> 
> 标签：regex, linux, grep

我在文本文件中有以下模式。

```
######################
# ADD=123 New Comment
######################

if ($ADD==123) 
```

其中，以下几行是可变的

```
# ADD=124 Old Comment

if ($ADD==1234) 
```

我尝试使用 pcregrep 进行多行 greping，但我不擅长正则表达式。任何指针如何提取这种模式。

```
[root@srv admin]# pcregrep -M '######################\n#*\n' text.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:17:29.653

使用 sed：

```
sed -n '/###[#]*/,/if (\$ADD/{p}' input 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-23T04:39:45.220

```
pcregrep -Mo '(?<=#)\s*ADD=1234' text.php 
```

pcregrep -multiline -only，向后看（找到最后一个 #），然后是任意数量的空格，然后是 'ADD=1234'（或者你可以执行 'ADD=[[:digit:]]*'）

希望这可以帮助

# python - 删除未被任何其他对象使用的标签

> ID：13795878
> 
> 赞同：4
> 
> 时间：2012-12-10T06:10:17.070
> 
> 标签：python, django, django-taggit

我正在尝试修改此文件[https://github.com/alex/django-taggit/blob/master/taggit/models.py](https://github.com/alex/django-taggit/blob/master/taggit/models.py)以便当标签不与任何其他对象关联时，它会被删除。

这是我添加到文件末尾的内容：

```
# ---

# Delete the tags that are not used by any other object
from django.db.models.signals import post_delete

def after_deleting(sender, instance, **kwargs):
    if TaggedItem.objects.filter(tag=instance.tag_id).count() == 0:
        print "Deleting tag", instance
        t = Tag.objects.get(pk=instance.tag_id)
        t.delete()

post_delete.connect(after_deleting, sender=TaggedItem) 
```

它没有按预期工作。当我运行它时，会出现此错误：

```
Exception Type: DoesNotExist
Exception Value:    Tag matching query does not exist. 
```

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:31:55.033

我认为您不应该`instance.tag_id`在过滤器中使用。尝试仅使用`instance.tag`. 然后在找到可以替换的标签对象时 -

```
t = Tag.objects.get(pk=instance.tag_id) 
```

和 -

```
t = instance.tag 
```

在字段中添加 _id 是获取对象主键的快捷方式。标签对象也是如此`instance.tag`，是标签对象`instance.tag_id`的主键。

整个事情会更简洁 -

```
# Delete the tags that are not used by any other object
from django.db.models.signals import post_delete

def after_deleting(sender, instance, **kwargs):
    if not TaggedItem.objects.filter(tag=instance.tag):
        print "Deleting tag", instance
        instance.tag.delete()

post_delete.connect(after_deleting, sender=TaggedItem) 
```

# javascript - Extjs Grid - 点击事件监听器

> ID：13795880
> 
> 赞同：9
> 
> 时间：2012-12-10T06:10:31.823
> 
> 标签：javascript, extjs, extjs4, click, gridpanel

我确实通过以下方式成功地将行双击事件侦听器添加到我的网格中：

```
listeners : {
    itemdblclick: function(dv, record, item, index, e) {
        alert('working');
    }
}, 
```

现在，我需要在所选行的第三列中获取确切值，我该怎么做？

**编辑**

好的，找到了：

```
listeners: {
    itemclick: function(dv, record, item, index, e) {
        alert(record.get('name'));
    }
} 
```

但似乎结果`record.get('name')`不是文本！它是一个对象，但我无法像处理文本一样处理它。任何机构有任何想法吗？

**编辑**

例如，如果我将名称传递给搜索功能：`Search(record.get('name'));`这将不起作用。但如果我这样通过它：`Search('Mike');`它有效！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T12:15:26.577

确保这件事

*   您的属性名称实际上是小写的“名称”而不是“名称”
*   使用或通过键入或`console.log(record.get('name'))`使用直接访问将字段的值打印到控制台中。基本上所有的都应该返回相同的。`console.log(record.data.name)``console.log(record.data['name'])`
*   将值强制转换为字符串应用`''`，例如`var myVar = 2; myVar = myVar + ''; // now print 20 as string`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:18:59.700

尝试，

```
listeners: {
itemclick: function(dv, record, item, index, e) {
 var selectedRec = dv.getSelectionModel().getSelected();          
 alert(selectedRec.get('name')); //Will display text of name column of selected record
} 
```

# objective-c - 在 iOS 6 SDK 中获取“observationInfo”会更改对象的 retainCount

> ID：13795889
> 
> 赞同：0
> 
> 时间：2012-12-10T06:11:33.537
> 
> 标签：objective-c, ios6, automatic-ref-counting, key-value-observing

我需要我的类的实例本身的观察属性，所以我设置了观察：

```
[self addObserver:self forKeyPath:@"myProperty" options:NSKeyValueObservingOptionNew context:nil] 
```

在 dealloc 中只需检查并删除观察者：

```
- (void)dealloc
{
    if ([self observationInfo])
    {
        [self removeObserver:self];
    }
} 
```

该项目在 ARC 下，在 iOS 6 SDK 之前一切正常。但是使用 iOS 6 SDK，在使用 EX_BAD_ACCESS（释放消息发送到已释放的实例）`observationInfo`之后，对象和应用程序崩溃的增加会增加。`dealloc`

这段代码有什么问题？是苹果的BUG还是我的？

**更新** 有堆栈跟踪：

```
thread #1: tid = 0x1f03, 0x016b60ab libobjc.A.dylib`objc_release + 27, stop reason = EXC_BAD_ACCESS (code=1, address=0xff000002)

frame #0: 0x016b60ab libobjc.A.dylib`objc_release + 27
frame #1: 0x016b6bd9 libobjc.A.dylib`(anonymous namespace)::AutoreleasePoolPage::pop(void*) + 555
frame #2: 0x02538468 CoreFoundation`_CFAutoreleasePoolPop + 24
frame #3: 0x0253cafd CoreFoundation`__CFRunLoopRun + 1933
frame #4: 0x0253bf44 CoreFoundation`CFRunLoopRunSpecific + 276
frame #5: 0x0253be1b CoreFoundation`CFRunLoopRunInMode + 123
frame #6: 0x024f07e3 GraphicsServices`GSEventRunModal + 88
frame #7: 0x024f0668 GraphicsServices`GSEventRun + 104
frame #8: 0x0022e65c UIKit`UIApplicationMain + 1211
frame #9: 0x00001efd MyProjects`main + 141 at main.m:16 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T21:05:09.387

当您调用时`[self observationInfo]`，它是保留和自动释放`self`。但是由于您已经在 中`dealloc`，因此该对象将在自动释放池耗尽之前被释放。因此，当自动释放池最终耗尽时，它会尝试释放您现在释放的对象并崩溃。您可以在堆栈跟踪中看到这一点。第 2 帧是对 的调用`CFAutoreleasePoolPop`，这是一个耗尽自动释放池的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:43:50.753

-observationInfo 不是为此而设计的。如果您真的需要知道是否设置了 KVO，请将某种标志存储为实例变量

# solr - 将大条件作为过滤器传递时，Solr 响应延迟

> ID：13795893
> 
> 赞同：1
> 
> 时间：2012-12-10T06:12:06.923
> 
> 标签：solr

我正在通过 solr 执行在线搜索，我需要将 25000 个 id 作为过滤器传递给 solr。在这种情况下，solr 的响应速度非常慢，因此我的应用程序没有按预期运行。如果有人遇到类似问题，请提供帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:26:37.137

Solr 标记数据并创建倒排索引，并且对搜索查询执行相同操作，这有助于搜索，这在数据库的情况下是不可能的。

一般来说，id（主键）没有空格、连字符等，这有助于对数据进行标记和索引，只需创建一个类似于数据库的索引，当您搜索它时，它几乎类似于平面文件搜索。

简而言之，在 solr 中搜索 id 效率不高，但另一方面

数据库为数据库创建一个 BTree，这是搜索索引的最佳数据结构，并按顺序对其进行排序，因此在数据库中搜索 25000 个 id 会快得多。但不要指望它会像闪电一样快。

* * *

发布此答案对您的 id 进行了基本假设，其数据类型和其他详细信息未知。

# ios - iOS ZipArchive 编译错误：-stdlib=libc++ 的部署目标无效（需要 iOS 5.0 或更高版本）

> ID：13795895
> 
> 赞同：1
> 
> 时间：2012-12-10T06:12:34.460
> 
> 标签：ios, xcode4, zip, objective-c++, unzip

我在 Xcode 中使用 zipArchive 库来集成到我的项目中进行解压缩操作。我收到了以下编译错误消息。我的问题是如何解决这个编译问题？

哪些步骤将重现该问题？

1.  [从http://code.google.com/p/ziparchive/](http://code.google.com/p/ziparchive/)下载 ziparchive ：
2.  新建一个xcode项目（只用单视图模板），选择ios4.3模拟器
3.  将下载的解压文件夹拖到项目中，选择“复制项目...”“创建组”，勾选“添加到目标”

什么是预期的输出？你看到了什么呢？

带有错误消息的编译错误：-stdlib=libc++ 的部署目标无效（需要 iOS 5.0 或更高版本）

您使用的是什么版本的产品？在什么操作系统上？

mac、xcode4.5.1、iphone4.3模拟器（iOS6下可以）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:26:31.783

`ZipArchive.mm`来自 ziparchive 项目的文件具有*Objective-C++*文件的后缀`.mm`。但是，该文件似乎不包含任何 C++ 代码。将其重命名为之后，我什至可以为 iOS 4.3 部署目标编译它。*`ZipArchive.m`*

 ** * *

可以在[Xcode 4.5 发行说明](https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/_index.html#//apple_ref/doc/uid/TP40001051-SW174)中找到该问题的不同解决方案：

> 使用此 Xcode 版本创建的项目使用标准 C++ 库的新 libc++ 实现。libc++ 库仅适用于 iOS 5.0 及更高版本以及 OS X 10.7 及更高版本。
> 
> 要在项目中的早期版本的 iOS 和 OS X 上启用部署，请将 C++ 标准库构建设置设置为 libstdc++（Gnu C++ 标准库）。*

# iphone - 在 xcode 中创建一个 NSMutableArray？

> ID：13795899
> 
> 赞同：0
> 
> 时间：2012-12-10T06:13:00.383
> 
> 标签：iphone, nsmutablearray

我需要使用如下所示的字典创建一个 NSMutableArray ..Donno 如何做到这一点./

```
(
        {
        businessName = "IBM Business Continuity & Recovery Service";
        city = "Costa Mesa";
        phone = "(714) 668-6900";
        state = CA;
        street = "600 Anton Blvd";
        zip = 92626;
    },
        {
        businessName = "IBM Sanno";
        city = Lomita;
        phone = "(310) 626-0613";
        state = CA;
        street = "25835 Appian Way";
        zip = 90717;
    },
        {
        businessName = "Ewert's IBM Typewriter Service";
        city = "";
        phone = "(559) 732-3215";
        state = "";
        street = "";
        zip = "";
    },
) 
```

请指导我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T06:29:15.350

NSMutableDictionary *list = [[NSMutableDictionary alloc] init];

```
[list setObject:businessName.text forKey:@"businessName"];
[list setObject:city.text forKey:@"city"];
[list setObject:phone.text forKey:@"phone"];
[list setObject:state.text forKey:@"state"];
[list setObject:street.text forKey:@"street"];
[list setObject:zip.text forKey:@"zip"];

NSMutableArray *listArraySignup = [[NSMutableArray alloc] init];
[listArraySignup addObject:list]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T06:25:42.397

如果你想要一个`NSMutableArray`字典，你可以做这样的事情

```
NSMutableArray *array = [[NSMutableArray alloc] initWithCapacity: 10];

NSMutableDictionary *dict = [[NSMutableDictionary alloc] initWithCapacity: 10];

[dict setObject: @"IBM Business Continuity & Recovery Service" forKey: @"businessName"]; 
```

像这样设置其他对象

```
[array addObject: dict];

[dict release]; 
```

在数组中添加像这样的其他字典，你会很高兴:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T06:21:30.933

有很多方法可以做到这一点。

如果您打算动态添加这些字典（粗略地说）：

```
NSMutableArray *dictionaries = [[NSMutableArray alloc] init];

NSDictionary *exampleDict = [[NSDictionary alloc] initWithObjectsAndKeys:
@"IBM Business Continuity & Recovery Service", @"businessName", 
@"Costa Mesa", @"city", 
@"(714) 668-6900", @"phone", 
@"CA", @"state", 
@"600 Anton Blvd", @"street", 
@"92626", @"zip", nil];

[dictionaries addObject:exampleDict]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T06:38:47.507

使用新的 Objective-C 文字

```
NSArray *array = @[
    @{
        @"businessName" : @"IBM Business Continuity & Recovery Service",
        @"city" : @"Costa Mesa",
        @"phone" : @"(714) 668-6900",
        @"state" : @"CA",
        @"street" : @"600 Anton Blvd",
        @"zip" : @(92626)
    },
    @{
        @"businessName" : @"IBM Sanno",
        @"city" : @"Lomita",
        @"phone" : @"(310) 626-0613",
        @"state" : @"CA",
        @"street" : @"25835 Appian Way",
        @"zip" : @(90717)
    },
    @{
        @"businessName" : @"Ewert's IBM Typewriter Service",
        @"phone" : @"(559) 732-3215"
    }
]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T06:21:55.850

试试这个，使用[NSDictionary](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)

# magento - 等级价格和厂商建议零售价

> ID：13795901
> 
> 赞同：0
> 
> 时间：2012-12-10T06:13:01.543
> 
> 标签：magento

我想在 magento 的产品页面中同时显示 MSRP（制造商建议零售价）价格和等级价格。

两个价格应同时显示在 magento 的产品页面上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T06:50:20.127

您需要在要显示 MSRP 价格的主题/目录/产品/view.phtml 中添加以下代码。

```
<?php echo Mage::helper('core')->currency($_product->getMsrp(),true,false); ?> 
```

等级价格将自动显示在 price.phtml 中

# algorithm - ARIES KVL，为什么我们总是插入到 1st_page

> ID：13795903
> 
> 赞同：1
> 
> 时间：2012-12-10T06:13:07.580
> 
> 标签：algorithm, database, recovery, aries

我正在学习你的论文 ARIES/KVL[1]，从论文中，B+树结构看起来像：

> ```
>  ------------------------------------
>                     |  p0  |  k0  |  p1  |  k1  |  p2  |
>                     ------------------------------------
>                      /                \                                      
>                     /                  \                                   
>                    /                    \                                  
>                   /                      \                                 
>                  /                        \                               
>              --------      <-----      --------
>              |  c0  |                  |  c1  |
>              --------      ----->      -------- 
> ```

从 Search 伪代码中，Fetch、Insert 和 Delete 永远不会在 progrss SMO 中看到，因为在 SMO 完成后重新启动搜索。有一次，我们进入插入过程，满足以下条件：

1.  x 锁存第一叶，
2.  没有涉及 1st_leaf 的 SMO 正在进行中。
3.  1st_leaf 的最高键 < 分隔键
4.  2nd_leaf 的键 >= 分隔键
5.  1st_leaf 的键 < 2nd_leaf 的键
6.  要插入的密钥 < 分隔的密钥。

例如，给定上图，当我们在 c0 中插入一个键时，那么

1.  c0 被 x 锁存
2.  没有涉及 c0 的 SMO 正在进行。
3.  c0 < k0 的最高键
4.  c1 >= k0 的键
5.  c0 的键 < c1 的键
6.  待插入密钥 < k0。

以下代码摘自[1]，我删除了问题中不相关的部分。

```
/*No Space for Insert of Key*/
.....    
/* No Need to Lock Next Key */
.....

/* Insert Key Value NOT Already in 1st_Leaf */
IF No Higher Key Value in 1st_Leaf AND 2nd_leaf Exists THEN
  S Latch 2nd_Leaf /* while Holding X Latch on 1st_Leaf */
  IF 2nd_Leaf is Empty THEN              /*Page Delete in Progress-Wait for it to be Over*/
    Unlatch 1st_Leaf and 2nd_Leaf
    S Latch Tree for Instant-Duration
    Unwind Recursion as far as Necessary Based on Noted Page VNs and Go Down Again
  ELSE                                                     /* 2nd_Leaf is NOT Empty */
    IF Insert Key Value found in 2nd_Leaf THEN             /* This Can't be a Unique Index */
      IX Lock Insert Key Value for Commit Duration
      Unlatch 2nd_Leaf, Insert Key in 1st_Leaf, Log, Unlatch 1st_leaf and Return
    ELSE Next Key Value := First Key Value in 2nd_Leaf
ELSE
  IF No Higher Key Value in 1st_Leaf THEN Next Key Value := End_Of_file
  ELSE Next Key Value := Higher Key Value in 1st_Leaf

IX Lock Next Key Value for Instant Duration

/*Insert Key into 1st_leaf*/
..... 
```

**Q1：**为什么我们可以在 2nd_leaf 中找到插入键值？**我的猜测是，****从释放 1st_leaf 的父级闩锁到尝试 s_latch 2nd_leaf**期间，其他事务引起了许多更新，因此在 2nd_leaf 中找到了一个待插入的密钥。但是，这将导致分隔键被更改，我无法理解它是如何发生的。

1.  插入可能会导致拆分第二页，但不需要更改第一页和第二页之间的分隔键，因为拆分总是向右。
2.  删除可能会导致删除 2nd_page，但它仍然不需要更改分隔键。

**Q2：**即使我们在2nd_leaf中找到了一个Insert Key Value，为什么还要把这样的key插入到1st_leaf中？因为它显然违反了 b+tree 属性（1st_leaf 的键 < 2nd_leaf 的键）。除了#6，上述条件仍然成立，因为分隔键被改变了，所以我们可以在2nd_leaf中找到to-be-inserted-key。

**参考**

1.  Mohan, C. ARIES/KVL：一种键值锁定方法，用于对 B 树索引上操作的多操作事务进行并发控制，Proc。第 16 届超大型数据库国际会议，布里斯班，1990 年 8 月。

# magento - 自定义 PHP 文件的正确路径包括 Magento 中的文件夹？

> ID：13795906
> 
> 赞同：1
> 
> 时间：2012-12-10T06:13:19.197
> 
> 标签：magento, magento-1.5

我需要在 Magento 根目录中包含一些自定义的 Php 文件。现在我已经使用“媒体”文件夹来包含我的自定义 PHP 文件。所以“媒体”文件夹是使用我的自定义 PHP 文件的正确目录吗？

非常感谢任何帮助

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T06:39:26.703

请参考以下网站链接供您参考：

[点击这里参考你的答案](http://www.siteground.com/tutorials/magento/structure.htm)

*   媒体（目录） - 这是 Magento 媒体文件的存储 - 开箱即用的图像、生成的缩略图、上传的产品图像。它还用作通过大量导入/导出工具导入图像的容器。

*   lib（目录）- Magento 核心代码位于此文件夹中。它包含软件的 PHP 库。

我不确定媒体（目录）是否正确。但是这个链接对你很有帮助。

# javascript - 使用 javascript 将 CSV 文件转换为 GEXF 文件格式

> ID：13795907
> 
> 赞同：0
> 
> 时间：2012-12-10T06:13:23.287
> 
> 标签：javascript

有什么方法可以帮助使用 javascript 将 csv 转换为 GEXF 文件格式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:18:31.150

CSV 只是一个包含数据的表，但 GEXF 包含节点和边。您必须自己制作转换器以适应您的源数据。

# map - 如何从 Bing Map v7 中的外部链接打开信息框？

> ID：13795910
> 
> 赞同：1
> 
> 时间：2012-12-10T06:13:41.293
> 
> 标签：map, bing

我有以下必应地图 v7： http://new.piperrealtycompany.com/temp/test2.cfm?city= [fenton](http://new.piperrealtycompany.com/temp/test2.cfm?city=fenton)

其中我有一组图钉，每个图钉都与 InfoBox 相关联。

如果地图的话，我会有一个外部相应链接的列表。

我需要列表中的链接来打开地图中的相应信息框并滚动图钉以突出显示列表中的相应链接。

我正在努力实现这样的目标！ [http://www.zillow.com/flint-township-mi/](http://www.zillow.com/flint-township-mi/) 。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T13:18:12.973

这很容易做到。首先，您需要在将每个图钉添加到地图时为其添加一个唯一值。例如：

```
var pin = new Microsoft.Maps.Pushpin(map.getCenter());
pin.MyPinID = 1234;
map.entities.push(pin); 
```

由于您使用的是 JavaScript，因此很容易将自定义属性添加到类中。如果您为每个图钉指定一个唯一值，您可以稍后循环遍历地图上的所有形状并查找该值。然后，您可以获取此值并将其链接到您的列表项。您可以通过几种不同的方式执行此操作。一种方法是在项目的 rel 标记中指定它。另一种方法是将值传递给项目的点击事件，如下所示：

```
<a href="javascript:void(0);" onclick="FindPushpin(1234);">Link to pushpin</a> 
```

然后，您可以创建一个循环遍历形状的方法，如下所示：

```
function FindPushpin(id){
    var cnt = map.entities.getLength();
    var pin, temp;

    for(var I = 0; I< cnt; I++){
      temp = map.entities.get(I);
      if(temp.MyPinID && temp.MyPinID == id){
         pin = temp;
         break;
      }
    }

    if(pin){
      //you found the relative pin
    }
} 
```

# android - 如何为 Android 应用程序包创建包安装程序链接？

> ID：13795914
> 
> 赞同：0
> 
> 时间：2012-12-10T06:14:24.847
> 
> 标签：android, package

我创建了一个 Android 应用程序。我通过连接USB将其安装在移动设备上。我想在不将手机连接到PC的情况下安装它。如何创建包安装程序链接来安装 pacakage？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:27:04.383

[developer.android.com](http://developer.android.com/tools/publishing/app-signing.html)上有一个很好的演练

部署：

以下是帮助您入门的几个步骤：

1.  右键单击您的项目并在底部找到*“Android 工具” 。*
2.  在子菜单中找到一个选项*导出签名的应用程序包...*

在弹出的窗口中：

1.  **选择要导出的项目**：确保您选择了要创建 APK 的相同项目，然后点击*下一步*按钮
2.  **密钥库选择**：您可以选择现有的密钥库或创建新的密钥库。根据您选择的选项执行步骤。
3.  **密钥别名选择**：在创建新的 Keystore 时，您还创建了一个别名。根据您之前的选择（在步骤 2 中），您必须选择现有密钥或创建新密钥。同样，请按照本节中的步骤进行操作。
4.  最后，**Destination 和 key/certificate 检查**：点击*浏览*按钮并在您的计算机上选择要创建 APK 的路径。

完成这些步骤后，您将创建一个 APK，该 APK 可以部署到 Google Play 商店，也可以转移到任何_兼容_设备上进行安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:25:41.347

从您的项目 bin 文件夹中复制您的应用程序 apk（安装程序）并将其存储在您的手机内存或 SD 卡中。复制到手机内存或SD卡后。使用文件浏览器查找 apk 并通过 android 默认安装程序进行安装。

谢谢

# java - 如何使用 Jenkins CI 部署 Java EE 应用程序？

> ID：13795915
> 
> 赞同：0
> 
> 时间：2012-12-10T06:14:26.390
> 
> 标签：java, jakarta-ee, jenkins, continuous-integration, jenkins-plugins

我为 Jenkins CI 配置了基于 Java EE 的应用程序的 SVN 存储库。

我能够构建应用程序，但在部署战争时遇到了问题。实际上，我不知道如何从构建中获取战争文件并将其部署到远程 Tomcat 7 服务器。

我需要以war部署的形式将此代码部署到Tomcat 7。请指导我完成任何教程或文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:20:53.603

如果你的构建是基于 Maven 的，你可以使用[Maven Tomcat 插件](http://mojo.codehaus.org/tomcat-maven-plugin/deployment.html)。[这将执行与Jenkins Deploy 插件](https://wiki.jenkins-ci.org/display/JENKINS/Deploy+Plugin)或多或少相同的操作，但它将添加对您的构建工具而不是您的持续集成工具的依赖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:09:24.847

有一个插件：[https ://wiki.jenkins-ci.org/display/JENKINS/Deploy+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Deploy+Plugin)

基本上，deploy 插件将使用 tomcat 内置的[REST API/manager 应用程序](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html)来部署 war 文件。

我在愤怒中使用它，它非常简单。该插件可以满足您在简单情况下所需的一切。

如果您的需求比这更复杂，您可以直接通过脚本访问管理 REST API，但我建议您从插件开始。

# javascript - 使用循环将两个字符串字符排列成一个字符串

> ID：13795922
> 
> 赞同：0
> 
> 时间：2012-12-10T06:15:29.077
> 
> 标签：javascript, jquery, string, algorithm, loops

我有两根绳子，应该放在一起成为一根绳子。第一个字符串是输入值，第二个字符串是第一个字符串的外观模式。
这是示例 -
输入字符串（var val） - **9165678823 模式**
字符串（var mask） - **(999)999-9999**
输出字符串应该看起来像（var startVal） - **(916)567-8823**
我试过了，这是我的代码

```
 var val = $(control).data("loadMaskValue"); // Input Value
            var mask = $(control).attr("mask");         //Masking Pattern
            var startVal = "";
            var j = 0;

            for (var i = 0; i < mask.length; i++) {
                    var c = mask.charAt(j);
                    if (c == '9' || c == 'X' || c == 'A') {    //Checks the char is normal char 
                        startVal += val.charAt(j);
                    }
                    else {
                        startVal += c;                      //Inserts the special char to string like ( ) -
                        startVal += val.charAt(j);
                    }
                    j = startVal.length;
                } 
```

这段代码的问题是它错过了中间的一个数字。此代码的结果是
startValue - **(965)688-2**。
请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T06:21:43.903

这是一个稍微简单的实现：

```
var input = '9165678823';
var mask = '(999)999-9999';

var output = '';
var offset = 0;

for (var i = 0; i < mask.length; i++) {
    var char = mask.charAt(i);

    if ('9XA'.indexOf(char) != -1) {
        output += input.charAt(i - offset);
    } else {
        output += mask.charAt(i);
        offset += 1;
    }
}

console.log(output); 
```

确保`input`在开头和结尾处已删除所有空格。

**演示：http: [//jsfiddle.net/qWtjk/](http://jsfiddle.net/qWtjk/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:22:39.893

您可以使用正则表达式来取出元素。检查小提琴： http: [//jsfiddle.net/BuddhiP/9MmqS/](http://jsfiddle.net/BuddhiP/9MmqS/) ~~var str= '9165678823'; var regEx = new RegExp("(\d{3})(\d{3})(\d{4})");~~

 ~~```
var m = regEx.exec(str);
var res = '(' + m[1] + ')' + m[2] + '-' + m[3];
console.log(res); 
```~~ 

~~结果是**(916)567-8823**~~

更新：如何使用动态模式使其工作。检查更新的小提琴：http: [//jsfiddle.net/BuddhiP/9MmqS/](http://jsfiddle.net/BuddhiP/9MmqS/)

```
$(function() {
    var str= '9165678823';
    var regEx = new RegExp("(\\d{3})(\\d{3})(\\d{4})");

    var m = regEx.exec(str);
    var mask = "({0}){1}-{2}";
    var res = mask.supplant(m.slice(1));
    console.log(res);
});​ 
```

从这里使用替代方法：http: [//javascript.crockford.com/remedial.html](http://javascript.crockford.com/remedial.html)

一旦你理解了你的正则表达式，你就可以让它与任何模式和掩码一起工作。

# jquery - jQuery slideToggle() 问题 - 将 display:block 更改为 display:inline-table？

> ID：13795923
> 
> 赞同：2
> 
> 时间：2012-12-10T06:15:32.790
> 
> 标签：jquery, css, slidetoggle

我正在使用 jQuery 的 slideToggle() 函数来控制我网站的展开/折叠功能。目前，在我在整个网站上实施之前，我只有一个页面已经开发；[在这里](http://dylricho.com/devices/phones/htc/one-s.php)。

默认情况下，jQuery slideToggle() 使用**display="block"**这对我没有帮助。我想让它在展开面板时使用**display="inline-table"** ，并在同一面板折叠时恢复为**display="none" 。**

我对 CSS 应用了一些设置，以确保布局是我想要的：

```
.specs {
    width: 930px;
    height: 100px;
    border: none;
    color: #ffffff;
    font-weight: normal;
    display: none;
} 
```

height 属性用于确保面板中的所有图标都是完全可见的。删除它会导致较小的面板（如“内存”）切断图标的一半。

折叠时，面板设置为**display="none"**以确保它们不会影响布局。但是，在展开时，需要将它们设置为**display="inline-table"**以绕过一些对齐问题，您当前可以在查看“Web 浏览”和“后置摄像头”等面板时看到这些问题（基本上，列表与 DIV 重叠下面，并且*inline-table*设置解决了这个问题）。

一旦我能够解决这个问题，我就可以继续将此设计实施到其他页面中。

PS - 目前使用的是[Redsquare的方法](https://stackoverflow.com/questions/1266221/jquery-slidetoggle-display-type)，所以扩展是可以的，但他们不想崩溃。

谢谢你，
迪伦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:35:04.400

您不必使用 slideToggle() 内置函数，创建自己的函数。

使用 .toggleClass() ：[http ://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

像这样的东西：

CSS：

```
.DisplayNone{
   display: none;
}

.DisplayInlineTable{
   display: inline-table;
} 
```

然后创建 onclick 事件：

jQuery：

```
$(parent).click(function(){
   $(child).toggleClass("DisplayInlineTable").slideToggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:20:09.593

这似乎对我有用。使用`min-height`代替`height`

```
.specs {
    width: 930px;
    /*min-height: 100px; CHECK UPDATE */
    border: none;
    color: #ffffff;
    font-weight: normal;
    display: none;
} 
```

**更新：在**[http://jsfiddle.net/LLQyV/1/](http://jsfiddle.net/LLQyV/1/)上查看它的实际应用

尝试这个。从 CSS 中删除 min-height。

在您的 HTML 中，将每个规范包含在一个分类为 toggleContainer 的 div 中，就像这样（我复制了您的一般类别并为每个规范添加了各种规范。）

```
<!-- General -->
<div class="toggleContainer">
<div class="spec-cat">
<div class="spec-cat-content" id="general"><a href="#general">General</a>
<span class="spec-cat-desc"></span></div>
</div>
<div class="specs" id="sec1">
    <ul>
        <li>Manufactured by HTC</li>
        <li>Also known as HTC Ville and HTC Z520e</li>
        <li>Released in March 2012</li>
        <li>£429 (GBP); $399 (USD)</li>
        <li>Manufactured by HTC</li>
        <li>Also known as HTC Ville and HTC Z520e</li>
        <li>Released in March 2012</li>
        <li>£429 (GBP); $399 (USD)</li>
    </ul>
</div>
</div>

<!-- General -->
<div class="toggleContainer">
<div class="spec-cat">
<div class="spec-cat-content" id="general"><a href="#general">General</a>
<span class="spec-cat-desc"></span></div>
</div>
<div class="specs" id="sec1">
    <ul>
        <li>£429 (GBP); $399 (USD)</li>
    </ul>
</div>
</div>

<!-- General -->
<div class="toggleContainer">
<div class="spec-cat">
<div class="spec-cat-content" id="general"><a href="#general">General</a>
<span class="spec-cat-desc"></span></div>
</div>
<div class="specs" id="sec1">
    <ul>
        <li>Manufactured by HTC</li>
        <li>Also known as HTC Ville and HTC Z520e</li>
    </ul>
</div>
</div> 
```

然后在您的 JS 文件中执行此操作（我将您的所有 onclick='toggle' 调用合并到此）

```
$(function() {
    $(".toggleContainer").each(function() {
        //store the .specs height to an unchanging attribute
        $(this).find(".specs").attr("specHeight", $(this).find(".specs").height());

        //when the cat is clicked, expand or collapse the spec
        $(this).find(".spec-cat-content").click(function(e) {
            e.preventDefault();
            //find spec for current toggleContainer that contains this category toggle button
            var spec = $(this).parent().parent().find(".specs");

            //check to see if the spec is displayed.
            if ($(spec).css("display") == "none") {
                //if it isn't then animate to specHeight attr and display block                $(spec).height(0);
                $(spec).css("display","block");
                var newHeight=$(spec).attr("specHeight");
                if(newHeight<100)
                    newHeight=100;
                $(spec).animate({height:newHeight},400);
            }
            else {
                //if it is, then animate to 0 height, and display:none
                $(spec).animate({height:0},400,function(){$(spec).css("display","none");});

            }
        });
    });
});​ 
```

# java - InputStream.close() 是java中的阻塞调用吗？

> ID：13795928
> 
> 赞同：-3
> 
> 时间：2012-12-10T06:16:04.223
> 
> 标签：java, io, inputstream

我从输入流中读取数据，并在 finally 块中尝试通过调用 in.close(); 来关闭它。但是 main 的执行被阻止了。出路是什么？

根据建议，我使用的代码是，

```
if (!processed) {
                System.out.println("in processed");
                byte[] contents = new byte[(int) fileSplit.getLength()];
                Path file = fileSplit.getPath();
                FileSystem fs = file.getFileSystem(conf);
                FSDataInputStream in = null;
                try {
                    in = fs.open(file);
                    IOUtils.readFully(in, contents, 0, contents.length);

                    value.set(contents, 0, contents.length);
                } finally {
                    System.out.println("before close stream");
                    IOUtils.closeStream(in);
                }
                processed = true;
                return true;
            }
            System.out.println("out of processed");
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-10T06:35:04.697

java.io.InputStream.close 没有阻塞，至少 API 从来没有这么说。比较 InputStream.read

```
 Reads the next byte of data from the input stream. The value byte is
 returned as an <code>int</code> in the range <code>0</code> to
 <code>255</code>. If no byte is available because the end of the stream
 has been reached, the value <code>-1</code> is returned. This method
 blocks until input data is available, the end of the stream is detected,
 or an exception is thrown. 
```

和 InputStream.close

```
 Closes this file input stream and releases any system resources
  associated with the stream. 
```

至于解决您的问题，我建议使用 Java 7 Files.readAllBytes 并忘记您的难题。

# javascript - jQuery幻灯片放映简化

> ID：13795930
> 
> 赞同：0
> 
> 时间：2012-12-10T06:16:13.337
> 
> 标签：javascript, jquery, html, css

我正在尝试提出制作 JQuery 幻灯片的最基本示例，您可以在其中单击正在查看的当前图像并循环浏览照片库。我知道它可能不是最基本的例子，因为如果我想添加一个新图像，我必须编写更多的 JQuery。有没有一种更抽象的方法，我不必根据 div id 编写 JQuery 并让类来处理工作？这是我的 jQuery

```
$(document).ready(function() {
$("#pic1").click(function() {
$("#pic1").hide();
$("#pic2").show();                
});  
$("#pic2").click(function() {
$("#pic2").hide();
$("#pic3").show();                
});
$("#pic3").click(function() {
$("#pic3").hide();
$("#pic1").show();                
});
}); 
```

其余的都在这里。[http://jsfiddle.net/XjdTX/3/](http://jsfiddle.net/XjdTX/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:23:36.083

以下代码将尽可能简单，

```
$("#slideframe div").click(function() {
    $(this).hide();
    if ($(this).next().length > 0) {
        $(this).next().show();
    } else {
        $("#slideframe div").first().show();
    }
});​ 
```

[http://jsfiddle.net/XjdTX/5/](http://jsfiddle.net/XjdTX/5/)

# asp.net-mvc - ASp.NEt MVC：在浏览器中推送网站的新资源更新

> ID：13795931
> 
> 赞同：0
> 
> 时间：2012-12-10T06:16:42.240
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我使用 ASP.MVC3 平台开发了我的网站，请针对以下问题提供准确的解决方案。

如果用户访问我的网站后，在我们的网站中更新了新资源[样式更改，脚本]，他们只能查看网站中的旧资源。为了在站点中获取新的资源更新，他们需要多次手动刷新页面以使其在新更改下正确呈现。这不会发生在任何几个站点上。

所以有人建议如何避免一次又一次地刷新页面以以编程方式获取新的更新站点。并且还建议在网站加载时在我的网站 global.axjax 文件 MVC 应用程序中执行此操作？

请不要这样说“清除浏览器缓存”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:00:24.780

人们使用的最常用技术之一是通过在链接末尾添加随机查询字符串来更新对源文件的引用，如下所示

```
<link href="/Content/all.min.css?d=20090107" rel="stylesheet" type="text/css" /> 
```

您可以对 Javascript 文件执行相同的操作。有关为什么这有帮助的更多详细信息，请查看以下链接

[什么是'？在 Css 链接中做什么？](https://stackoverflow.com/questions/438821/what-does-do-in-a-css-link/438828#438828)

# actionscript-3 - 所有 Flash 内容的 ROLL_OVER 事件

> ID：13795933
> 
> 赞同：1
> 
> 时间：2012-12-10T06:16:43.410
> 
> 标签：actionscript-3, flash, events, jwplayer

我正在尝试将悬停事件从 flash 发送到 js（在某些浏览器中，`mousemove`/`mouseover`事件不会触发 flash 内容）。我试过这样做：

```
stage.addEventListener(MouseEvent.ROLL_OVER, function():void {
    ExternalInterface.call("alert", "Rolled over!!");
}); 
```

但它没有用。我是AS新手，你能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:27:36.793

此外，您必须为要调用的外部接口定义一个函数。它有点开销：

```
ExternalInterface.addCallback("sendToActionScript", receivedFromJavaScript); 
```

更多信息在这里：[http](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html) ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html 使用最后一个例子。

# google-maps-api-3 - 谷歌地图方向图标

> ID：13795936
> 
> 赞同：0
> 
> 时间：2012-12-10T06:17:18.377
> 
> 标签：google-maps-api-3

在谷歌地图上显示行车路线时，左侧有方向图标（环形交叉路口、左箭头、右箭头等），我搜索了文档，但找不到在我的模块上显示图标的方法在创建时，有没有人找到一种在方向窗格上显示它们的方法。如何在 DirectionsResult 对象中搜索此驾驶图标并将其显示在我的 JSP 中..？

谢谢，

维纳亚克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:57:04.460

该 api 不会为您提供每个步骤的图标。您可以通过查看每个步骤的说明文本来确定要显示哪些图标。先去掉html标签。然后，如果文本以“右转”开头，则使用该图标。如果它显示“保持正确”、“轻微向右”、“退出”等，请使用相应的图标。如果它以您不认识的东西开头，请不要使用图标。

# microsoft-metro - Windows 应用商店应用程序：消除 GridView 样式并仅用于中心页面布局

> ID：13795937
> 
> 赞同：2
> 
> 时间：2012-12-10T06:17:22.630
> 
> 标签：microsoft-metro, winrt-xaml, windows-store-apps

我尝试使用 GridView 制作一个具有四个不同模板的 Windows 应用商店应用程序（Metro）中心页面。

[我在使用 Windows 8 页面中的不同控件创建中心页面](https://stackoverflow.com/questions/13155905/creating-hub-page-with-different-controls-in-windows-8)中引用了[链接](http://coding.kulman.sk/using-different-data-templates-with-gridview-in-windows-8-apps/)，它工作正常。

但是 GridView 具有与触摸（和鼠标）活动交互的默认样式。悬停时变灰，并显示点击交互。

我的问题是，如何禁用这些行为？我尝试用 Blend 进行挖掘，但很难找到要定制的地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T14:15:47.767

抱歉，我不知道 MS Blend

但在视觉工作室请遵循以下说明：

1.  右键单击您的网格
2.  转到编辑附加模板
3.  单击“编辑生成的项目容器（ItemContainerStyle）”>“编辑副本...”
4.  转到 XAML 代码并从代码中删除 PointerOver 内容。代码应如下所示

    ```
     //some code here

    <VisualStateGroup x:Name="CommonStates">
       <VisualState x:Name="Normal"/>
         <VisualState x:Name="PointerOverPressed"/>
         <VisualState x:Name="Disabled">

        //continue 
    ```

# asp.net - asp.net linq 查询中的列表不起作用

> ID：13795941
> 
> 赞同：0
> 
> 时间：2012-12-10T06:17:39.617
> 
> 标签：asp.net, linq

```
 const string keyword = "manoj";
        rsp.DataSource = company.GetCompanySearch(keyword);
        rsp.DataBind();

    public List<Company> GetCompanySearch(string keyword)
{
    using (var context = huntableEntities.GetEntitiesWithNoLock())
    {
        List<Company> query = context.Companies.ToList();
        if (!string.IsNullOrEmpty(keyword))
        {
            keyword = keyword.ToLower();
            query =  (List<Company>) query.Where(u=>u.CompanyName.Contains(keyword)
                                           || u.EmailAdress.Contains(keyword)
                                           ||u.MasterCountry.Description.Contains(keyword)
                                           ||u.MasterIndustry.Description.Contains(keyword)
                                           ||u.CompanyDescription.Contains(keyword)
                                           ||u.CompanyHeading.Contains(keyword));
        }
        return query.ToList();
    }
} 
```

以下代码引发以下异常：{“无法转换类型为 'WhereListIterator `1[Data.Company]' to type 'System.Collections.Generic.List`1[Data.Company]' 的对象。”}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:29:41.497

“（List）query.Where（）”等于“（List）（query.Where（））”，所以这将抛出该异常。应该使用 query.Where().ToList() 但不是显式转换。

此外，最好不要输入“List query = context.Companies.ToList();” 在你的“如果”陈述之前。在这种情况下，无论关键字是否为空，它都会将所有记录查询到内存中，这会导致性能问题。可以改成下面

```
 IQueryable<Company> query = context.Companies; //Remove ToList()
    if (!string.IsNullOrEmpty(keyword))
    {
        keyword = keyword.ToLower();
        // Remove cast
        query =  query.Where(u=>u.CompanyName.Contains(keyword)
                                       || u.EmailAdress.Contains(keyword)
                                       ||u.MasterCountry.Description.Contains(keyword)
                                       ||u.MasterIndustry.Description.Contains(keyword)
                                       ||u.CompanyDescription.Contains(keyword)
                                       ||u.CompanyHeading.Contains(keyword));
    }
    return query.ToList(); 
```

# ruby - eclipse - 如何使所需的宝石自动完成

> ID：13795944
> 
> 赞同：1
> 
> 时间：2012-12-10T06:18:23.040
> 
> 标签：ruby, eclipse, autocomplete

我正在使用 eclipse 进行 ruby​​ 开发，并且我已经安装了 Ruby Development Tools 插件。例如，似乎 eclipse 不会自动完成所需的 gem

需要“宝石”

a = gemA.new

一个。# 没有自动完成

有没有办法让它在eclipse中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:51:37.897

您可能想查看[JetBrain 的 Ruby Mine](http://www.jetbrains.com/ruby/)。它不是免费的，但我听说它物有所值。

另外，我怀疑 Eclipse 是否具有该插件的自动完成功能。为确保，请检查您的 IDE 首选项是否启用了自动完成功能。

# git - Heroku：在本地文件系统中使用外部挂载

> ID：13795946
> 
> 赞同：5
> 
> 时间：2012-12-10T06:18:42.147
> 
> 标签：git, heroku, amazon-s3, redmine, s3fs

我知道可以使用 Fuse（s3fs [或 s3fsr ruby​​ gem？]）安装 Amazon S3 存储桶。

我的案例是针对 Heroku 的。

Heroku 的文件系统对于可扩展性等来说是只读的，但是有没有办法在 Heroku 的文件系统中挂载亚马逊 s3？

就我而言，我在 Heroku 上使用 Redmine，并希望使用 Redmine 的内置 git 存储库管理将代码审查链接到我的问题。Redmine 需要将存储库克隆到本地目录，这在 Heroku 上是可能的，但不是持久的。

我希望 Redmine 在已安装的 S3 存储桶上维护一个 git 存储库。这可能吗？如果有可能，那会有多慢？有没有其他选择可以实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T02:16:18.333

我还没有找到我的问题的完美答案，但这是一个好的解决方法。

您可以通过在项目的根目录创建一个名为 Procfile 的文件来覆盖默认的 Heroku 启动脚本（以及更多）。

这是 Procfile ：

```
# run custom boot scirpt
web: sh /app/config/web-boot.sh 
```

它告诉 Heroku 这个脚本启动 Redmine。

我将 Bitbucket 与私有存储库一起使用，因此我创建了一个 SSH 密钥对并将它们放在“config/ssh/”中。然后，我将公钥添加到我的 Bitbucket 帐户的部署密钥中，并将 Bitbucket 的公钥添加到我的“config/ssh/know_hosts”文件中

这是“config/web-boot.sh”文件：

```
# move ssh keys
mkdir /app/.ssh
cp /app/config/ssh/* /app/.ssh/

# git clone code repos
mkdir /tmp/repos

# Do this for every repo you want to clone
git clone --bare ssh://git@bitbucket.org/[YOUR_ACCOUNT]/[YOUR_REPO].git /tmp/repos/[YOUR_REPO]
git --git-dir=/tmp/repos/[YOUR_REPO] remote add origin ssh://git@bitbucket.org/[YOUR_ACCOUNT]/[YOUR_REPO].git
git --git-dir=/tmp/repos/[YOUR_REPO] fetch origin

# run Unicorn http server
cd /app
bundle exec unicorn -p $PORT -c ./config/unicorn.rb 
```

然后，您可以通过指定“/tmp/repos/[YOUR_REPO]”将 Git 存储库添加到您的 Redmine 项目

当您将更改推送到 Bitbucket 时，您可以使用**[Redmine Bitbucket Hook 插件](https://bitbucket.org/Avalarion/redmine-bitbucket-git)**将更改拉入您的存储库。

像这样希望有一个私钥并不理想，但在我的具体情况下，这个密钥是这个应用程序独有的，仅用于获得对我的代码存储库的只读访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-22T19:11:38.880

请注意 Heroku 现在在启动时在 .profile.d/ 中运行脚本。

[https://devcenter.heroku.com/articles/profiled](https://devcenter.heroku.com/articles/profiled)

您还可以添加一个 'git push' 提交后挂钩（在 .git/hooks/post-commit 中），它应该在每次本地提交后将所有更改推送到 BitBucket。

[https://www.kernel.org/pub/software/scm/git/docs/githooks.html](https://www.kernel.org/pub/software/scm/git/docs/githooks.html)

# hashtable - 哈希函数和哈希表

> ID：13795949
> 
> 赞同：0
> 
> 时间：2012-12-10T06:19:20.277
> 
> 标签：hashtable

我被分配了一个处理哈希表和哈希函数的问题，我目前被困在如何使用给定的函数分配大小上。

我遇到的问题是 h(n) = n/10 这很简单

然后我被告知大小为 10，我必须将给我的数字插入到列表中。

我的问题是我认为我放置这些数字的数组是 0-9。我的数字是 352、4079、25、251、498、591、242，这让我更加困惑，因为如果我确实说 4079/10 之类的东西，那远远超过 9，所以我不能把它放在数组中......

我想我可能在这里遗漏了一些巨大的东西，但我不知道是什么。

# eclipse - 项目在tomcat中工作，但不能在eclipse中工作。错误：找不到 log4j.properties

> ID：13795950
> 
> 赞同：1
> 
> 时间：2012-12-10T06:19:31.840
> 
> 标签：eclipse, struct, log4j

我有一个 struts 项目，我已经从一个 war 文件导入到 eclipse 中。通过在tomcat中部署它可以完美地工作。但是导入后同样显示错误：

```
log4j:ERROR Could not read configuration file from URL [file:/D:/xxxfolder/xxxworkspace/xxxproject/WebContent/WEB-INF/classes/log4j.properties].
java.io.FileNotFoundException: D:xxx\xxx\xxx\WebContent\WEB-INF\classes\log4j.properties (The system cannot find the path specified) 
```

我在 src 文件夹中有 log4j.property。

请帮助提供适当的解决方案以摆脱它！

如果需要更多信息，请告诉我

编辑！我找到了问题的根源，但找不到解决方案 Bu 默认 Eclipse 中 src 的输出构建路径是：build/classess。但是 tomcat 正在 webContent/web_inf/ Classess/ 上搜索文件，你能建议怎么做吗？如何将仅 log4j 的输出文件更改为 tomcat 正在搜索的特定文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:35:34.813

在上面的评论中，结论是路径不正确。修改路径后，问题解决。

# jquery - jQuery.ajax 正在替换“？” 在带有 jquery 版本号的 url 中

> ID：13795952
> 
> 赞同：0
> 
> 时间：2012-12-10T06:19:36.347
> 
> 标签：jquery, ajax, twitter, cross-domain

尝试使用 jQuery 的 ajax（也称为 getJSON）进行跨域 JSON 交换。

jQuery 正在替换“回调=？” 与“回调=jQuery181051499094045721_1355119986411”...

以下是具体网址： [http ://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=twitterapi&callback=?&include_entities=true](http://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=twitterapi&callback=?&include_entities=true)

jQuery 提出这个请求：

[http://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=twitterapi&callback=jQuery181051499094045721_1355119986411&include_entities=true&_=1355119986471](http://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=twitterapi&callback=jQuery181051499094045721_1355119986411&include_entities=true&_=1355119986471)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:25:29.780

这就是 jquery 处理[jsonp](http://en.wikipedia.org/wiki/JSONP)的方式。回调函数是动态生成的。

# iphone - 创建类似于 PassCode 功能的 UI（作为参考查看 Dropbox 应用程序）

> ID：13795953
> 
> 赞同：0
> 
> 时间：2012-12-10T06:19:37.063
> 
> 标签：iphone, ios, xcode

我是 iOS SDK 的新手。我需要创建一个类似于 Dropbox 应用程序中的密码条目的 UI。我有几个问题如下：

1.  如何创建不显示光标闪烁的安全文本字段？
2.  如何创建在特定 UIViewController 上始终可用的数字键盘？
3.  如何接收键盘按键事件，以便我可以在特定文本字段中设置按下值？

我已经阅读了许多关于此的帖子和文章，但没有一个对我有帮助。一些帖子具有诸如创建一个不可见的虚拟文本字段并将键盘附加到该文本字段的技术。对于此文本字段中的每个条目，相应地更新四个密码条目文本字段。

我希望上述问题的答案将帮助我创建相同的密码输入 UI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:16:02.817

你可以看看现有的实现，如[KKPasscodeLock](https://github.com/aporat/KKPasscodeLock)、[EAPasscodeLock](https://github.com/eaceto/EAPasscodeLock)或[pinview](https://github.com/guicocoa/pinview)。您可以免费下载这些并查看源代码（或仅在您自己的应用程序中使用代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:48:01.100

也许像计算器应用程序一样？您使用 TextField（不可编辑/安全）和许多按钮创建一个视图，并且不使用任何键盘。如果您点击按钮，则将相应的字符添加到 TextField，如果您点击某种删除按钮，则会删除 TextField 中的最后一个字符。

如果您想要一个更漂亮的文本，您可以根据隐藏文本字段中字符串的长度隐藏文本字段并在 textView（不可编辑）中显示点。

# css - CSS按钮：活动不工作

> ID：13795954
> 
> 赞同：2
> 
> 时间：2012-12-10T06:19:56.670
> 
> 标签：css

也许这只是一个我忽略的愚蠢问题。

[小提琴](http://jsfiddle.net/Q3n4J/)

表格上方的按钮和删除按钮都服从子句`box-shadow`中的，`:active`但第 5 个单元格不服从。

我正在使用 Chrome 23。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:22:45.200

您希望您的按钮位于第 5 个 td 中吗？如果是，则删除此

[**演示**](http://jsfiddle.net/Q3n4J/1/)

```
#table button{    
    position: absolute;
    top: 0px;
    right: 5px;
    height: 10px;
    width: 1.5em
} 
```

或者，如果您希望您的按钮就在那里（表外），请替换`#table button`为以下样式

[**演示 2**](http://jsfiddle.net/Q3n4J/5/)

```
#table button{    
    position: absolute;
    top: 0px;
    right: 5px;
} 
```

并添加这个

```
#table button:active{    
    position: absolute;
    top: 0px;
    right: 5px;
    top: 1px;
    box-shadow: 0 1px 1px rgba(0, 0, 0, .3) inset;
    background-image: none
} 
```

> 注意：您正在使用`position: absolute;`，请确保已将其包裹在 position: relative; 容器

# c# - 网格视图分页 -ASP.net mvc 和 linq

> ID：13795957
> 
> 赞同：0
> 
> 时间：2012-12-10T06:20:19.607
> 
> 标签：c#, asp.net-mvc, linq

我正在使用 nop commercer2.6 所以我想创建自定义报告，并且我想为该报告进行分页。

这是我的功能

```
 public virtual IPagedList<HireItemReportLine> HireItemReport(int ceremony_id, string Fname, string Mname, string Lnmae, string emailAdd, int sesson_id, int pageIndex, int pageSize)
        {

            var query1 = from opv in _opvRepository.Table
                         join o in _orderRepository.Table on opv.OrderId equals o.Id
                         join gr in _graduandRepository.Table on opv.graduand_id equals gr.Id
                         join pv in _productVariantRepository.Table on opv.ProductVariantId equals pv.Id
                         join p in _productRepository.Table on pv.ProductId equals p.Id
                         join c in _ceremonyRepository.Table on gr.ceremony_id equals c.Id
                         join s in _seasonRepository.Table on c.season_id equals s.Id
                         where (!o.Deleted) && (opv.IsHireItem == true) &&
                         (!p.Deleted) &&
                         (!pv.Deleted)
                         select new
                         {
                             opvTable = opv,
                             grTable = gr,
                             seaTable = s,

                         };

            if (!(sesson_id == 0))
                query1 = query1.Where(item => item.seaTable.Id == sesson_id);

             if (!(ceremony_id == 0))                 
                 query1 = query1.Where(item => item.opvTable.ceremony_id == ceremony_id);

             if (!String.IsNullOrEmpty(Fname))
                 query1 = query1.Where(item => item.grTable.first_name == Fname);

             if (!String.IsNullOrEmpty(Mname))
                 query1 = query1.Where(item => item.grTable.middle_name == Mname);

             if (!String.IsNullOrEmpty(Lnmae))
                 query1 = query1.Where(item => item.grTable.last_name == Lnmae);

             if (!String.IsNullOrEmpty(emailAdd))
                 query1 = query1.Where(item => item.grTable.email == emailAdd);

             var query2 = from opv in query1
                          group opv by opv.opvTable.OrderId into g
                          select new
                          {
                              OrderId = g.Key,
                              TotalAmount = g.Sum(x => x.opvTable.PriceInclTax),

                          };
 int totalCount = query2.Count();
             query2 = query2.OrderByDescending(x => x.OrderId);

             var result = query2.ToList().Select(x =>
            {
                return new HireItemReportLine()
                {
                    OrderId = x.OrderId,                   
                    Amount= x.TotalAmount,

                };
            });

             var orders_1 = result.ToList();       

             return new PagedList<HireItemReportLine>(orders_1, pageIndex, pageSize,totalCount);
        } 
```

这是 PagedLis() 函数

```
 public PagedList(IEnumerable<T> source, int pageIndex, int pageSize, int totalCount)
    {
        TotalCount = totalCount;
        TotalPages = TotalCount / pageSize;

        if (TotalCount % pageSize > 0)
            TotalPages++;

        this.PageSize = pageSize;
        this.PageIndex = pageIndex;
        this.AddRange(source);

    } 
```

我想将此数据绑定到网格视图并且它具有分页功能。我可以绑定，它显示页码。但我的问题是，当我在网格视图中单击页码时，它总是只显示第一页。你有什么主意吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:54:46.957

我认为这些分页/排序/分组在使用第三方工具时会变得更容易。但是，请检查以下链接以使用 LINQ 在 c# 中进行分页/排序。

[自定义分页](http://mvc.syncfusion.com/demos/ui/grid/DataBinding/CustomBinding)

# php - MySQL 添加好友 | 删除好友 - 关注 | 取消关注系统效率

> ID：13795958
> 
> 赞同：0
> 
> 时间：2012-12-10T06:20:22.063
> 
> 标签：php, mysql

我目前有一个名为 [friends] 的表，它用于行等。

+------------------------------------------------friend_id | 朋友一个 | 朋友二 | 角色----------------------------------------------+ +--- -------------------------------------------------- -------------------------------------------------- -------------------------------------+

这是一个关注和取消关注系统，但它不是很好。

对于“添加和删除”朋友，我想知道如何提高效率，以便更轻松地读取数据库，并且更可靠。

```
// Add Friend
public function Add_Friend($uid,$fid){
    $fid            = mysql_real_escape_string($fid);
    $q          = mysql_query("SELECT friend_id FROM friends WHERE friend_one='$uid' AND friend_two='$fid' AND role='fri'");

    if(mysql_num_rows($q) ==0 ){
        $query      = mysql_query("INSERT INTO friends(friend_one,friend_two,role) VALUES ('$uid','$fid','fri')") or die(mysql_error());    
        $query      = mysql_query("UPDATE users SET friend_count=friend_count+1 WHERE uid='$uid'") or die(mysql_error());   
        return true;
    }
}

// Remove Friend
public function Remove_Friend($uid,$fid){
    $fid            = mysql_real_escape_string($fid);
    $q          = mysql_query("SELECT friend_id FROM friends WHERE friend_one='$uid' AND friend_two='$fid' AND role='fri'");

    if(mysql_num_rows($q) == 1){
        $query      = mysql_query("DELETE FROM friends WHERE friend_one='$uid' AND friend_two='$fid'") or die(mysql_error());
        $query      = mysql_query("UPDATE users SET friend_count=friend_count-1 WHERE uid='$uid'") or die(mysql_error());   
        return true;
    }

} 
```

一切正常，我只想知道如何让它变得更容易。因为现在我正在尝试了解我目前关注了多少朋友，但以我目前的 SQL 知识几乎不可能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:52:52.577

我建议您不要运行此查询

```
$fid            = mysql_real_escape_string($fid);
$q          = mysql_query("SELECT friend_id FROM friends WHERE friend_one='$uid' AND friend_two='$fid' AND role='fri'"); 
```

bcoz 显然在 add_friend 的情况下**，**这两个 id**没有相互连接，**那么只有你会调用这个函数，所以不需要使用查询。

并且在**删除朋友**的情况下，这两个 id 是**相互连接的，**那么只有你会调用这个函数。

所以，我建议删除这两行。而且，你的方法很好，所以继续前进。

# python - 在 Python 中制作多音和不同乐器的 Midi 文件

> ID：13795959
> 
> 赞同：1
> 
> 时间：2012-12-10T06:20:26.817
> 
> 标签：python, midi, synthesis

我正在寻找一个 Python 中的 midi 库，它允许我使用不同的乐器创建和弦 MIDI 文件。

似乎在这里得到很多推荐的是[MidiUtil](http://code.google.com/p/midiutil/)。虽然，它似乎支持复调，但我似乎无法从钢琴改变乐器。

谁能推荐一个替代的 midi 库或建议如何更换乐器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T21:54:20.633

为此，您想在文件中使用的每种不同音色都需要将它们的事件放在单独的 MIDI 通道上。在每个通道上发出任何音符之前，使用`addProgramChange()`MIDIFIle 对象的方法在每个通道上选择正确的补丁。

addProgramChange(轨道、频道、时间、节目)

### 添加 MIDI 程序更改事件。

利用`MyMIDI.addProgramChange(track,channel, time, program)`

### 论据

**track：**添加事件的轨道。[整数，0-127]。
**频道：**事件分配到的频道。[整数，0-15]。
**time：**添加事件的时间，以节拍为单位。[漂浮]。
**节目：**节目编号。[整数，0-127]。

有关该类支持的所有方法的文档，请参阅[http://www.emergentmusics.org/mididutil-class-reference 。](http://www.emergentmusics.org/mididutil-class-reference)

# android - 如何生成-10到10范围内的随机数

> ID：13795962
> 
> 赞同：0
> 
> 时间：2012-12-10T06:20:40.657
> 
> 标签：android, cocos2d-x

您好，我正在开发一款游戏，其中对象必须在屏幕上随机移动。我正在使用 cocos2dx 框架。我的代码是

```
CCSize winSize = CCDirector::sharedDirector()->getWinSize();
    int minY = HelloWorld::bird->getContentSize().height/2;
    int maxY = winSize.height - HelloWorld::bird->getContentSize().height/2;
    int minX = HelloWorld::bird->getContentSize().width/2;
    int maxX = winSize.width - HelloWorld::bird->getContentSize().width/2;
    int range = maxX - minX;
    int actualY = (rand() % range) + minY;
    int actualX = (rand() % range) + minX;
    //HelloWorld::bird->setPosition(ccp(actualX, actualY));
    CCActionInterval*  actionTo = CCMoveTo::actionWithDuration(3, ccp(actualX,actualY));
    HelloWorld::runAction(actionTo); 
```

它正在工作但只产生正数。所以精灵要离开屏幕了。我搜索了教程，但没有得到。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T23:54:01.547

`CCRANDOM_MINUS1_1() * 10.0f`如果你使用 cocos2d-x

我的回答永远不会被接受，即使它最适合提问者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:22:55.430

尝试这个 ：

```
int min = -10;

int max = 10;

Random r = new Random();

int i1 = r.nextInt(max - min + 1) + min; 
```

**请注意，nextInt(int max) 返回一个介于 0 和 max 之间的 int。输入+1。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-08T05:47:39.267

利用`random(T min, T max)`

```
int randomNo = random(-10, 10); 
```

它在 -10 和 10 的范围内生成随机数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-28T15:18:57.860

```
boolean cof1=rand.nextBoolean();

if (!cof1)
    result =-result ; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-10T07:01:07.723

利用

```
int result = r.nextInt(max - min) + min;
instead of 
int result = r.nextInt(max) + min; 
```

因为 nextInt 采用随机数的范围而不是实际的上限。

# mysql - 通过弧度获取用户的sql语句的逻辑是什么

> ID：13795963
> 
> 赞同：0
> 
> 时间：2012-12-10T06:20:46.333
> 
> 标签：mysql, math, geometry, sql

请帮助我，我不明白这个查询中的 3959 是什么以及这个查询的逻辑是什么。

```
$sql = 'SELECT `Zip`, `City`, `State`, `Lat`, `Long`, 
( 3959 * acos( cos( radians("%s") ) * cos( radians( `Lat` ) ) * cos( radians( `Long` ) -    
radians("%s") ) + sin( radians("%s") ) * sin( radians( `Lat` ) ) ) ) AS distance 
FROM Zips 
HAVING distance < "%s"
ORDER BY distance LIMIT 0 , 2'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T06:28:26.963

3959 是以英里为单位的地球半径。该查询正在计算输入的经度和纬度与表中点的经度和纬度之间的距离（以英里为单位），并选择最接近的。没有那么多逻辑，它是纯粹的数学。鉴于距离本身没有输出，您甚至可以不用乘以 3959，仍然得到相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:28:08.157

此逻辑是使用经纬度查找位置，请参考[使用 MySQL 查找位置](https://developers.google.com/maps/articles/phpsqlsearch_v3)

上述逻辑使用[Haversine 公式](http://en.wikipedia.org/wiki/Haversine_formula)来查找球体内的位置

# xaml - 尝试运行 Windows 8 示例时出现此错误找不到类型或命名空间名称“WindowCreatedEventArgs”？

> ID：13795964
> 
> 赞同：1
> 
> 时间：2012-12-10T06:20:47.490
> 
> 标签：xaml, windows-8, microsoft-metro, windows-runtime

我试图使用 Microsoft 提供的 Windows 8 示例，我不知道为什么会出现此错误，它说：-

**Error1 找不到类型或命名空间名称“WindowCreatedEventArgs”（您是否缺少 using 指令或程序集引用？**

请让我知道我该如何解决这个问题

提前致谢。

# android - Android：按钮对齐

> ID：13795965
> 
> 赞同：0
> 
> 时间：2012-12-10T06:21:00.343
> 
> 标签：android

嗨，我很难让这个按钮看起来不错，我可以做普通的 xml 文件还是应该使用样式![在此处输入图像描述](../Images/e0bee07eb36a0fb29d0a131f851d8188.png)

下面是我的xml代码

```
<Button
        android:id="@+id/cancelbtn"
        android:textSize="18sp"
        android:layout_marginLeft="2dip"
        android:layout_width="wrap_content"
        android:layout_height="45dip"
        android:layout_weight="1.0"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="Cancel"
        android:textColor="#000000" />
<Button
        android:id="@+id/startbtn"
        android:background=""
        android:textColor="#000000" 
        android:layout_alignTop="@+id/fbcancel"
        android:layout_toLeftOf="@+id/fbcancel"
        android:textSize="18sp"
        android:layout_marginRight="2dip"
        android:layout_width="wrap_content"
        android:layout_height="45dip"
        android:layout_weight="1.0"
        android:text="Start" /> 
```

开始按钮高度大而宽度小..无法与取消按钮完全相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:42:56.063

由于按钮文本中的字符数不同，因此显示如下。您需要为按钮提供固定的宽度和高度。

请参阅[此](http://androidv.wordpress.com/2012/08/09/how-to-customize-a-button/)链接以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:43:28.433

`android:layout_weight="1.0"`从两个按钮和`android:layout_alignTop="@+id/fbcancel"`开始按钮中删除

# python - 将静态图像添加到 django

> ID：13795976
> 
> 赞同：1
> 
> 时间：2012-12-10T06:22:04.777
> 
> 标签：python, django

**更新** 我的文件夹结构如下：运行manage.py collectstatic coomand后，django的静态文件复制到我的项目文件夹如下，然后我把我的logo.png放到它的img/

```
 mysite_new/

      manage.py
      mysite/
      ------ __init__.py
             urls.py
             setting.py
             wsgi.py
             templates/
                      default.html
             static/
                     img/
                          logo.png
                          .....
      ticket/
      ------__init__.py
            models.py
            view.py
            urls.py
            ...... 
```

在setting.py中，我设置

```
PROJECT_PATH = os.path.abspath(os.path.dirname(__file__))
MEDIA_URL = ''
MEDIA_ROOT = ''
STATIC_URL = '/static/'
STATIC_ROOT = os.path.join(PROJECT_PATH,'static')
STATICFILES_DIRS = (
)
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
) 
```

在 mysite/urls.py 我设置

```
 urlpatterns = patterns('',
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
    url(r'^admin/', include(admin.site.urls)),
    url(r'^hello/', hello),
    url(r'^static/(?P<path>.*)$', 'django.views.static.serve',{'document_root': settings.MEDIA_ROOT },name="media"),

) 
```

# 默认.html

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8>
<title>staitc sample</title>
</head>
<body>
    <img src="{{ STATIC_URL }}img/logo.png"" alt="hahhaa">
</body>
</html> 
```

在票证/view.py

```
def hello(request):
     return render_to_response( 'admin/default.html') 
```

然后在网络浏览器中，在 input 中`http://127.0.0.1:8000/hello`，它显示![在此处输入图像描述](../Images/4029d81e782cccd70dc3ef0019751b06.png)

然后我从“hahhaa”加载图像，它链接到 ![在此处输入图像描述](../Images/897723c95b6651e4194ac0171916d7f0.png)

没有显示图片，所以可能是图片路径不正确，图片没有加载成功。谁能帮我在我的 hello 方法 view.py 中显示图片？这个问题让我困惑了很长时间，提前感谢您的帮助。我的 django 版本是 1.4。

我已经找到解决办法了，不需要移动我的静态文件夹，只要和ticket/保持同一级别，然后在setting.py中添加ADMIN_MEDIA_PREFIX = '/static/admin/'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:10:08.560

您应该将静态目录移动到 mysite。徽标的 url 将是 127.0.0.1:8000/static/images/logo.png

并将 STATIC_ROOT 设置为上一级：

```
STATIC_ROOT = os.path.join(PROJECT_ROOT, '..', 'static') 
```

这是 collectstatic 命令将复制项目和应用程序的静态文件的地方。

升级版：

```
url(r'^static/(?P<path>.*)$', 'django.views.static.serve',{'document_root': settings.MEDIA_ROOT },name="media"), 
```

这里应该是 settings.STATIC_ROOT。对于开发，您还可以使用：

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
urlpatterns += staticfiles_urlpatterns() 
```

[https://docs.djangoproject.com/en/dev/howto/static-files/#staticfiles-development](https://docs.djangoproject.com/en/dev/howto/static-files/#staticfiles-development)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:05:21.330

在 urls.py 中尝试以下操作

```
from django.conf import settings
from django.conf.urls.static import static 
```

在文件的底部

```
if settings.DEBUG and settings.MEDIA_ROOT:
    urlpatterns += static(settings.MEDIA_URL,
        document_root=settings.MEDIA_ROOT) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T08:23:08.877

问题出在您的 urls 文件中。您将 django 服务函数路径带到媒体根目录，而不是您的静态文件。

试试看：

```
urlpatterns = patterns('',
url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
url(r'^admin/', include(admin.site.urls)),
url(r'^hello/', hello),
url(r'^static/(?P<path>.*)$', 'django.views.static.serve',{'document_root': settings.STATIC_ROOT },name="media"), 
```

)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-28T18:14:28.807

语法错误

```
<img src="{{ STATIC_URL }}img/logo.png"" alt="hahaha"> 
```

正确的语法——

```
<img src="{{ STATIC_URL }}img/logo.png" alt="hahhaa"> 
```

或者

```
<img src="{% static 'img/logo.png' %}" alt="hahhaa"> 
```

# android - 从自己的 android 应用程序将图像发布到 instagram

> ID：13795977
> 
> 赞同：3
> 
> 时间：2012-12-10T06:22:12.790
> 
> 标签：android, instagram

我已经在自己的应用程序中完成了 Instagram 集成。现在我想将照片从我的应用程序上传到 Instsgram。

# javascript - 无法访问其他 javascript 函数中的全局数组

> ID：13795978
> 
> 赞同：0
> 
> 时间：2012-12-10T06:22:14.820
> 
> 标签：javascript, jquery, javascript-events

txtPhones 数组无法存储值给出空白警报。警报（txt电话）；在 removefromlist() 函数中没有给出任何内容当我在“createSpanforuser()”函数中检查“txtPhones”时它给出了完美的值但是“txtPhones”在 removefromlist 中是空白的

```
 var txtPhones=[];
    function createSpanforuser(id, uname) {

        txtPhones=uname.split(",");
        document.getElementById("tdTeliphone").innerHTML="";
        alert(txtPhones); //gives correct value
        for(var lp=0;lp<txtPhones.length;lp++){
           var myID=lp+"span4"+id; 
           document.getElementById("tdTeliphone").innerHTML+="<span id="+myID+"> " +txtPhones[lp]+"<span id=Inner"+myID+" class=hyper onclick='removefromlist(\"" + myID + "\",\"" + txtPhones[lp] + "\")'> <img class=imgspan  src=../img/cross-script.png style=width:14px;height:14px /> </span> </span> </br>";

        }

    }

    function removefromlist(idSpan, uname) {
            $('#' + idSpan).remove();
            alert(txtPhones); //gives blank
    } 
```

# asp.net - 使用 SwfDotNet 时如何处理垃圾收集/释放资源

> ID：13795980
> 
> 赞同：1
> 
> 时间：2012-12-10T06:22:24.477
> 
> 标签：asp.net, c#-4.0, webforms

我能够读取`.swf`文件的高度和大小，如果它不在指定的尺寸内，那么我必须从服务器中删除文件，不幸的是它不断产生错误，因为我无法释放资源，我不是确定我必须释放哪些其他资源。

[教程链接](http://www.codeproject.com/Articles/19970/Reader-of-SWF-Header-File-in-Pure-C?msg=4448020#xx4448020xx)

**该进程无法访问文件“C:\PROJECTS\xyz\images\banners\file.swf”，因为它正被另一个进程使用。**

```
/* Not using below case as i not able to dispose the swfReader object which can result in unnecessary memory*/

   // Create a swf stream reader
   SwfReader swfReader = new SwfReader(path);
   // Read the completed swf file
   Swf swf = swfReader.ReadSwf();
   // Read only headers of file to optimize read speed
   //Swf swf = swfReader.ReadSwfHeader();
   int swfHeight = swf.Header.Height;
   int swfWidth = swf.Header.Width;
   swfReader.Close();
   if ((swfHeight > int.Parse(hdnBannerHeight.Value)) || (swfWidth > int.Parse(hdnBannerWidth.Value)))
   {
       lblImageUploadMessage1.Text = "File cant be upload as it has invalid dimensions";
       lblImageUploadMessage1.CssClass = "lblErrorMSG";
       Session["bannerImage"] = null;
       if (System.IO.File.Exists(path)) { System.IO.File.Delete(path); }
   } 
```

上面的代码生成与其他进程正在使用的文件相关，我无法使用`IDispose`方法，所以我不知道如何解决这个问题。我只是使用 FileUpload 服务器控件在 asp.net 网络表单上上传文件。

# c - 如何获得最高的浮点数？

> ID：13795981
> 
> 赞同：-1
> 
> 时间：2012-12-10T06:22:24.773
> 
> 标签：c, gcc, floating-point

我在 libgcc 中阅读了一些代码：

```
UDWtype __fixunsxfDI (XFtype a)
{
  if (a < 0)
    return 0;

  /* Compute high word of result, as a flonum.  */
  const XFtype b = (a / Wtype_MAXp1_F);
  /* Convert that to fixed (but not to DWtype!),
     and shift it into the high word.  */
  UDWtype v = (UWtype) b;
  v <<= W_TYPE_SIZE;
  /* Remove high part from the XFtype, leaving the low part as flonum.  */
  a -= (XFtype)v;
  /* Convert that to fixed (but not to DWtype!) and add it in.
     Sometimes A comes out negative.  This is significant, since
     A has more bits than a long int does.  */
  if (a < 0)
    v -= (UWtype) (- a);
  else
    v += (UWtype) a;
  return v;
} 
```

关于 XFType：

```
typedef     float XFtype    __attribute__ ((mode (XF))); 
```

关于Wtype_MAXp1_F：</p>

```
#if W_TYPE_SIZE == 8
# define Wtype_MAXp1_F  0x1p8f
#elif W_TYPE_SIZE == 16
# define Wtype_MAXp1_F  0x1p16f
#elif W_TYPE_SIZE == 32
# define Wtype_MAXp1_F  0x1p32f
#elif W_TYPE_SIZE == 64
# define Wtype_MAXp1_F  0x1p64f
#else
# error "expand the table"
#endif 
```

我认为 XFType 是 96 位浮点数，而 0x1p32f 是 1^32。

什么是

const XFtype b = (a / Wtype_MAXp1_F)

方法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:00:43.620

“0x1p32f”是 2 ^(32)，类型为`float`。这是十六进制浮点格式。“0x”之后和“p”之前的部分被解释为十六进制数字，并且可能包括小数点，因此，在“0x3.5p1”中，“3.5”表示3 + 5/16 = 3.3125 [10]。“p”后面的数字是一个整数，表示2乘以第一部分的幂。所以“0x1p32f”是1•2 ^(32)，“0x3.5p-1”是3.3125 [10] •2 ^(-1) = 1.65625 [10]。后缀与十进制浮点常量相同：“f”或“F”表示`float`，无后缀表示`double`，“l”或“L”表示`long double`。

`a / Wtype_MAXp1_F`除以`a`2 的某个字长的位数的幂。因此，如果由 表示的字长`W_TYPE_SIZE`是 32 位，则`a / Wtype_MAXp1_F`除以`a`2 ^(32)。它似乎是某些扩展精度算术的一部分；它`a`分为一些“高位”和一些“低位”。

在 C 中，您可以通过包含`<float.h>`并使用`FLT_MAX`最大有限浮点数`float`、`DBL_MAX`最大有限浮点数`double`和最大有限浮点数来获得最大`LDBL_MAX`有限浮点数`long double`。这些值远大于`Wtype_MAXp1_F`。如果它在您的平台上可用，您可以`float`通过包含`<math.h>`和使用`INFINITY`.

# php - 如何使magento的“电话”字段仅针对特定主题“不需要”？

> ID：13795984
> 
> 赞同：1
> 
> 时间：2012-12-10T06:22:39.143
> 
> 标签：php, magento

如何使magento的“电话”字段“不需要”仅适用于移动版？

我尝试更改“eav_attribute”表中“电话”行的“is_required”列。但它改变了桌面版和移动版都不需要的电话。

评论

```
if (!Zend_Validate::is($this->getTelephone(), 'NotEmpty')) {
$errors[] = $helper->__('Please enter telephone.'); 
```

在 magento/app/code/core/Mage/Customer/Model/Address/Abstract.php 也做了同样的事情！

有没有其他方法可以使这项工作适用于特定主题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:22:49.037

我将添加一个系统配置字段“需要电话”，可在商店视图级别进行配置，并仅为普通版本而不是移动版本执行电话验证。这显然只有在您为移动设备创建了不同的商店时才有效。

# python - 从 Python 中的嵌套列表绘制差异图

> ID：13795990
> 
> 赞同：1
> 
> 时间：2012-12-10T06:22:58.750
> 
> 标签：python, graph, matplotlib, nested-lists, differentiation

我制作了一个脚本，它从嵌套列表（温度和变化）中的数据生成图表。

```
#!/usr/bin/python
import matplotlib.pyplot as plt

temperature = [['65', '65.5', '66', '66.5', '67', '67.5', '68', '68.5', '69', '69.5', '70', '70.5', '71', '71.5', '72', '72.5', '73', '73.5', '74', '74.5', '75', '75.5', '76', '76.5', '77', '77.5', '78', '78.5', '79', '79.5', '80', '80.5', '81', '81.5', '82', '82.5', '83', '83.5', '84', '84.5', '85', '85.5', '86', '86.5', '87', '87.5', '88', '88.5', '89', '89.5', '90', '90.5', '91', '91.5', '92', '92.5', '93', '93.5', '94', '94.5', '95'], ['65', '65.5', '66', '66.5', '67', '67.5', '68', '68.5', '69', '69.5', '70', '70.5', '71', '71.5', '72', '72.5', '73', '73.5', '74', '74.5', '75', '75.5', '76', '76.5', '77', '77.5', '78', '78.5', '79', '79.5', '80', '80.5', '81', '81.5', '82', '82.5', '83', '83.5', '84', '84.5', '85', '85.5', '86', '86.5', '87', '87.5', '88', '88.5', '89', '89.5', '90', '90.5', '91', '91.5', '92', '92.5', '93', '93.5', '94', '94.5', '95'], ['65', '65.5', '66', '66.5', '67', '67.5', '68', '68.5', '69', '69.5', '70', '70.5', '71', '71.5', '72', '72.5', '73', '73.5', '74', '74.5', '75', '75.5', '76', '76.5', '77', '77.5', '78', '78.5', '79', '79.5', '80', '80.5', '81', '81.5', '82', '82.5', '83', '83.5', '84', '84.5', '85', '85.5', '86', '86.5', '87', '87.5', '88', '88.5', '89', '89.5', '90', '90.5', '91', '91.5', '92', '92.5', '93', '93.5', '94', '94.5', '95']]
changes = [['94.566', '94.210', '93.836', '93.443', '93.030', '92.597', '92.145', '91.673', '91.181', '90.669', '90.137', '89.585', '89.011', '88.409', '87.760', '87.019', '86.063', '84.577', '81.806', '76.130', '65.071', '47.659', '28.454', '14.158', '6.305', '2.678', '1.128', '0.480', '0.210', '0.095', '0.045', '0.022', '0.012', '0.006', '0.004', '0.002', '0.002', '0.001', '0.001', '0.001', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000'], ['94.566', '94.210', '93.836', '93.443', '93.030', '92.597', '92.145', '91.673', '91.181', '90.669', '90.138', '89.588', '89.016', '88.420', '87.788', '87.088', '86.239', '85.028', '82.929', '78.744', '70.282', '55.446', '36.209', '19.361', '8.976', '3.874', '1.634', '0.691', '0.298', '0.132', '0.060', '0.029', '0.015', '0.008', '0.004', '0.003', '0.002', '0.001', '0.001', '0.001', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000'], ['94.566', '94.210', '93.836', '93.443', '93.030', '92.597', '92.145', '91.673', '91.181', '90.669', '90.138', '89.588', '89.016', '88.421', '87.790', '87.093', '86.255', '85.072', '83.059', '79.131', '71.434', '58.441', '41.784', '25.977', '14.170', '6.919', '3.146', '1.386', '0.608', '0.270', '0.122', '0.057', '0.028', '0.014', '0.007', '0.004', '0.003', '0.001', '0.001', '0.001', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000']]

products=[]
for t,c in zip(temperature,changes):
    products.append(t)
    products.append(c)

plt.plot(*products)
plt.xlabel('temperature')
plt.ylabel('changes')
plt.show() 
```

图表如下所示：

![http://i.stack.imgur.com/k2pBh.png](../Images/5d86af2b277f487e4e695b757a195217.png)

只是想知道如何制作图表的差异化版本（EG 随温度变化的速率）？

我尝试使用的绘制导数的示例都处理两个或三个数字，没有这么大和嵌套的数字，因此我很难尝试将它们应用于我的数据集。（生成并输入此脚本的数据始终采用嵌套列表的形式）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:58:04.740

您可以通过计算有限差分轻松地逼近导数。虽然您可以使用嵌套列表来执行此操作，但使用 numpy 数组会更好。见下文：

```
import matplotlib.pyplot as plt
import numpy as np

temperature = [['65', '65.5', '66', '66.5', '67', '67.5', '68', '68.5', '69', '69.5', '70', '70.5', '71', '71.5', '72', '72.5', '73', '73.5', '74', '74.5', '75', '75.5', '76', '76.5', '77', '77.5', '78', '78.5', '79', '79.5', '80', '80.5', '81', '81.5', '82', '82.5', '83', '83.5', '84', '84.5', '85', '85.5', '86', '86.5', '87', '87.5', '88', '88.5', '89', '89.5', '90', '90.5', '91', '91.5', '92', '92.5', '93', '93.5', '94', '94.5', '95'], ['65', '65.5', '66', '66.5', '67', '67.5', '68', '68.5', '69', '69.5', '70', '70.5', '71', '71.5', '72', '72.5', '73', '73.5', '74', '74.5', '75', '75.5', '76', '76.5', '77', '77.5', '78', '78.5', '79', '79.5', '80', '80.5', '81', '81.5', '82', '82.5', '83', '83.5', '84', '84.5', '85', '85.5', '86', '86.5', '87', '87.5', '88', '88.5', '89', '89.5', '90', '90.5', '91', '91.5', '92', '92.5', '93', '93.5', '94', '94.5', '95'], ['65', '65.5', '66', '66.5', '67', '67.5', '68', '68.5', '69', '69.5', '70', '70.5', '71', '71.5', '72', '72.5', '73', '73.5', '74', '74.5', '75', '75.5', '76', '76.5', '77', '77.5', '78', '78.5', '79', '79.5', '80', '80.5', '81', '81.5', '82', '82.5', '83', '83.5', '84', '84.5', '85', '85.5', '86', '86.5', '87', '87.5', '88', '88.5', '89', '89.5', '90', '90.5', '91', '91.5', '92', '92.5', '93', '93.5', '94', '94.5', '95']]
changes = [['94.566', '94.210', '93.836', '93.443', '93.030', '92.597', '92.145', '91.673', '91.181', '90.669', '90.137', '89.585', '89.011', '88.409', '87.760', '87.019', '86.063', '84.577', '81.806', '76.130', '65.071', '47.659', '28.454', '14.158', '6.305', '2.678', '1.128', '0.480', '0.210', '0.095', '0.045', '0.022', '0.012', '0.006', '0.004', '0.002', '0.002', '0.001', '0.001', '0.001', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000'], ['94.566', '94.210', '93.836', '93.443', '93.030', '92.597', '92.145', '91.673', '91.181', '90.669', '90.138', '89.588', '89.016', '88.420', '87.788', '87.088', '86.239', '85.028', '82.929', '78.744', '70.282', '55.446', '36.209', '19.361', '8.976', '3.874', '1.634', '0.691', '0.298', '0.132', '0.060', '0.029', '0.015', '0.008', '0.004', '0.003', '0.002', '0.001', '0.001', '0.001', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000'], ['94.566', '94.210', '93.836', '93.443', '93.030', '92.597', '92.145', '91.673', '91.181', '90.669', '90.138', '89.588', '89.016', '88.421', '87.790', '87.093', '86.255', '85.072', '83.059', '79.131', '71.434', '58.441', '41.784', '25.977', '14.170', '6.919', '3.146', '1.386', '0.608', '0.270', '0.122', '0.057', '0.028', '0.014', '0.007', '0.004', '0.003', '0.001', '0.001', '0.001', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000']]

temperature = np.array(temperature, dtype=np.float32).transpose()
changes = np.array(changes, dtype=np.float32).transpose()

plt.figure()
plt.plot(temperature, changes)
plt.xlabel('temperature')
plt.ylabel('changes')
plt.show()

delta_t = temperature[1:]-temperature[:-1]
t_av = 0.5*(temperature[1:]+temperature[:-1])
dc_dt = (changes[1:]-changes[:-1])

plt.figure()
plt.plot(t_av, dc_dt)
plt.xlabel('temperature')
plt.ylabel('dc/dt')
plt.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T16:33:47.677

从@DavePs 解决方案继续，您可以使用[np.gradient](http://docs.scipy.org/doc/numpy/reference/generated/numpy.gradient.html)：

```
import matplotlib.pyplot as plt
import numpy as np

temperature = [['65', '65.5', '66', '66.5', '67', '67.5', '68', '68.5', '69', '69.5', '70', '70.5', '71', '71.5', '72', '72.5', '73', '73.5', '74', '74.5', '75', '75.5', '76', '76.5', '77', '77.5', '78', '78.5', '79', '79.5', '80', '80.5', '81', '81.5', '82', '82.5', '83', '83.5', '84', '84.5', '85', '85.5', '86', '86.5', '87', '87.5', '88', '88.5', '89', '89.5', '90', '90.5', '91', '91.5', '92', '92.5', '93', '93.5', '94', '94.5', '95'], ['65', '65.5', '66', '66.5', '67', '67.5', '68', '68.5', '69', '69.5', '70', '70.5', '71', '71.5', '72', '72.5', '73', '73.5', '74', '74.5', '75', '75.5', '76', '76.5', '77', '77.5', '78', '78.5', '79', '79.5', '80', '80.5', '81', '81.5', '82', '82.5', '83', '83.5', '84', '84.5', '85', '85.5', '86', '86.5', '87', '87.5', '88', '88.5', '89', '89.5', '90', '90.5', '91', '91.5', '92', '92.5', '93', '93.5', '94', '94.5', '95'], ['65', '65.5', '66', '66.5', '67', '67.5', '68', '68.5', '69', '69.5', '70', '70.5', '71', '71.5', '72', '72.5', '73', '73.5', '74', '74.5', '75', '75.5', '76', '76.5', '77', '77.5', '78', '78.5', '79', '79.5', '80', '80.5', '81', '81.5', '82', '82.5', '83', '83.5', '84', '84.5', '85', '85.5', '86', '86.5', '87', '87.5', '88', '88.5', '89', '89.5', '90', '90.5', '91', '91.5', '92', '92.5', '93', '93.5', '94', '94.5', '95']]
changes = [['94.566', '94.210', '93.836', '93.443', '93.030', '92.597', '92.145', '91.673', '91.181', '90.669', '90.137', '89.585', '89.011', '88.409', '87.760', '87.019', '86.063', '84.577', '81.806', '76.130', '65.071', '47.659', '28.454', '14.158', '6.305', '2.678', '1.128', '0.480', '0.210', '0.095', '0.045', '0.022', '0.012', '0.006', '0.004', '0.002', '0.002', '0.001', '0.001', '0.001', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000'], ['94.566', '94.210', '93.836', '93.443', '93.030', '92.597', '92.145', '91.673', '91.181', '90.669', '90.138', '89.588', '89.016', '88.420', '87.788', '87.088', '86.239', '85.028', '82.929', '78.744', '70.282', '55.446', '36.209', '19.361', '8.976', '3.874', '1.634', '0.691', '0.298', '0.132', '0.060', '0.029', '0.015', '0.008', '0.004', '0.003', '0.002', '0.001', '0.001', '0.001', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000'], ['94.566', '94.210', '93.836', '93.443', '93.030', '92.597', '92.145', '91.673', '91.181', '90.669', '90.138', '89.588', '89.016', '88.421', '87.790', '87.093', '86.255', '85.072', '83.059', '79.131', '71.434', '58.441', '41.784', '25.977', '14.170', '6.919', '3.146', '1.386', '0.608', '0.270', '0.122', '0.057', '0.028', '0.014', '0.007', '0.004', '0.003', '0.001', '0.001', '0.001', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000', '0.000']]

temperature = np.array(temperature, dtype=np.float32).transpose()
changes = np.array(changes, dtype=np.float32).transpose()

plt.figure()

distances = np.gradient(temperature)[0]

plt.plot(temperature, np.gradient(changes, distances)[0])
plt.xlabel('temperature')
plt.ylabel('dc/dt')
plt.show() 
```

# php - preDispatch zend 框架 2 不工作

> ID：13795991
> 
> 赞同：1
> 
> 时间：2012-12-10T06:23:01.653
> 
> 标签：php, zend-framework2

我在理解 preDispatch 下面是我的代码时遇到问题

```
 public function preDispatch(\Zend\Mvc\MvcEvent $e)
    {

        $application    = $e->getApplication();
        $serviceManager = $application->getServiceManager();
        $controller = $e->getTarget();
        $route = $controller->getEvent()->getRouteMatch();
        $hit_controller = $route->getParam('__CONTROLLER__');
        if(strcmp($hit_controller,"Dashboard")==0){
            $authService = $serviceManager->get('Admin\Authentication\Service');
            if (!$authService->hasIdentity()) {
                $pluginManager  = $serviceManager->get('Zend\Mvc\Controller\PluginManager');
                $redirectPlugin = $pluginManager->get('redirect');
                return $redirectPlugin->toRoute('Admin',array('controller'=>'Admin','action'=>'index'));
            }
        }
        return;
    } 
```

以下是我在 module.config.php 中定义的路线

```
return array(
    'router' => array(
        'routes' => array(
            'Dashboard' => array(
              'type' => 'Segment',
              'options' => array(
                  'route' => '/Dashboard[/:action][/:id]',
                  'defaults' => array(
                      '__NAMESPACE__' => 'Admin\Controller',
                        'controller'    => 'Dashboard',
                        'action'        => 'index',
                  ),

              ),

            ),
            'Admin' => array(
                'type'    => 'Segment',
                'options' => array(
                    'route'    => '/Admin[/:action][/:id]',
                    'defaults' => array(
                        '__NAMESPACE__' => 'Admin\Controller',
                        'controller'    => 'Admin',
                        'action'        => 'index',
                    ),
                ),
            ),
        ),
    ),
    'controllers' => array(
        'invokables' => array(
            'Admin\Controller\Admin' => 'Admin\Controller\AdminController',
            'Admin\Controller\Dashboard' => 'Admin\Controller\DashboardController'
        ),
    ),
    'view_manager' => array(  ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),
    ),
); 
```

如果我输入网址

```
public/Admin works fine
 public/Dashboard works fine
 public/Dashboard/edit works fine
 public/Dashboard/edit/11  fails 
```

并显示 edit/11 的内容。我不明白为什么 preDispatch 不在 Dashboard/edit/11 上运行？

有人可以向正确的方向投光并引导。任何建议/意见/帮助都受到高度重视。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:19:29.783

尝试更改 Dashboard 路由中的括号，如下所示：

```
'route' => '/Dashboard[/:action[/:id]]', 
```

# asp.net - 安装了 VS 2012，现在我在项目的登录页面上收到“ViewState Mac 验证失败”异常

> ID：13795992
> 
> 赞同：1
> 
> 时间：2012-12-10T06:23:01.620
> 
> 标签：asp.net, visual-studio-2012

登录页面在代码隐藏中包含一个登录控件和少量代码 - 但是它使用自定义成员资格提供程序。

我最初在 VS2012 中打开它，它在没有询问的情况下执行了项目更新（它进行了备份，显然文件与 2010 向后兼容，所以还不错）但现在每当我使用登录时都会出现此错误页面 - 即使从 SVN 回滚到我的原始代码并回到 2010 年。

我只能假设在安装过程中对 IIS 或我的 .net 版本进行了更新，这改变了一些东西，但我不知道它会是什么，而且谷歌上的信息很少。此错误可能有多种原因。

其他人遇到过这个问题吗？有谁知道可能是什么原因造成的？

如果我将“EnableViewStateMac”设置为 false，则无法解决问题 - 如果我还将 enableEventValidation 设置为“false”，它确实可以解决此问题，但如果我不知道是什么，我不想随机禁用事件验证错误是什么或导致它的原因。

有任何想法吗？

# python - 将 Pig 嵌入 Python

> ID：13795993
> 
> 赞同：0
> 
> 时间：2012-12-10T06:23:03.057
> 
> 标签：python, hadoop, apache-pig, embedding

我正在尝试在 Python 中嵌入一个猪脚本，但遇到了异常，似乎找不到问题所在。我有一个 Python 脚本，其中嵌入了 pig 脚本，并安装了 Apache PIG 0.10。我可以从 shell 运行 pig 脚本，它工作正常。当我使用命令运行从 shell 嵌入 pig 的 python 脚本时

`pig -x mapreduce pythonscript.py`它给了我错误

> Pig 启动前的错误 ---------------------------- 错误 2998：未处理的内部错误。org/python/util/PythonInterpreter
> 
> java.lang.NoClassDefFoundError：org.apache.pig.scripting.jython.JythonScriptEngine.main 的 org/python/util/PythonInterpreter（JythonScriptEngine.java:338）

`$PIG_CLASSPATH`在运行 pig 命令之前，我尝试将 Jython jar 添加到 shell 的环境变量中。它没有帮助。

我看到其他人也遇到了这个问题，但是有没有人找到解决方案？任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:49:24.447

好的。已经找到解决方案。如果您也看到此错误，那么我希望这会有所帮助。

1) 下载了 Jython 安装程序 jar。2) 使用 java -jar 运行它 3) 指定安装位置 4) 将 Jython 可执行 shell 脚本添加到我的 PATH 环境变量中。5) 将 jython jar 从安装文件夹复制到 HADOOP_HOME/lib 文件夹。IE。hadoop下的lib文件夹。

大多数情况下，第 5 步是交易撮合者。但这些是我遵循的步骤。似乎将 Jython jar 复制/设置为 PIG 似乎没有帮助。我在伪集群模式下运行 Hadoop，上面有 Pig。而且 Pig 似乎采用了基于 HADOOP 的 jars 而不是它自己的 lib！

在此之后，它像魅力一样运行。

# javascript - 使用 JavaScript 的图像数组

> ID：13795994
> 
> 赞同：1
> 
> 时间：2012-12-10T06:23:14.047
> 
> 标签：javascript, arrays, loops, infinite-loop, image-gallery

我需要帮助使用 JavaScript 创建图像数组。我需要创建一个图像数组来循环使用它们的 src 属性来循环它们。然后图像需要循环到下一个和上一个按钮。图像必须循环通过。换句话说，不要让他们结束。单击下一步时，一旦您到达图像的末尾，它们应该从第一张图像开始并重复。

有人可以为此编写一个简单的代码吗？我真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:29:56.453

我很无聊，而且我以前没有建造过其中一个。这是我想出的：http: [//jsfiddle.net/grantk/pHdAN/](http://jsfiddle.net/grantk/pHdAN/)

```
<div id="images" style="height:300px;">
    <img src="http://www.livehacking.com/web/wp-content/uploads/2012/08/chrome-logo-1301044215-300x300.jpg" />
    <img src="http://upload.wikimedia.org/wikipedia/commons/e/e7/Mozilla_Firefox_3.5_logo_256.png" />
    <img src="http://html5doctor.com/wp-content/uploads/2011/01/HTML5_Logo_256.png" />
</div>
<a id="prev" href="#">Prev</a> <a id="next" href="#">Next</a>

<script>
var imgArr = document.getElementById('images').getElementsByTagName('img');

//Hide all images except first
for(var i=1; i<imgArr.length; i++){
    imgArr[i].style.display = "none";
}
i=0;

document.getElementById('prev').onclick = function(){
    if(i===0){
        imgArr[i].style.display = "none";
        i=imgArr.length-1;
        imgArr[i].style.display = "";
    }
    else{
        imgArr[i].style.display = "none";
        i--;
        imgArr[i].style.display = "";
    }
}

document.getElementById('next').onclick = function(){
    if(i===imgArr.length-1){
        imgArr[i].style.display = "none";
        i=0;
        imgArr[i].style.display = "";
    }
    else{
        imgArr[i].style.display = "none";
        i++;
        imgArr[i].style.display = "";
    }
}
</script> 
```

# javascript - 如何限制使用jQuery在文本区域中通过鼠标单击粘贴的文本？

> ID：13795997
> 
> 赞同：0
> 
> 时间：2012-12-10T06:23:30.623
> 
> 标签：javascript, jquery, web, char, textarea

我们有一个**文本区域**，它应该只允许 300 个字符。我们可以使用任何**键盘按下事件**来控制它

```
onkeydown="limitText(this,300);" 
onkeyup="limitText(this,300); 
```

`limitText`如下_

```
limitText = function (limitField, limitNum) {
    if (limitField.value.length > limitNum) {
        limitField.value = limitField.value.substring(0, limitNum);
    }
}, 
```

但是我们无法通过这个控制**鼠标**点击粘贴....请分享任何想法。请注意：我在互联网上检查了一些解决方案，但无法解决。我知道这是一个小问题，但作为**jQuery**的新手（实际上是整个网络世界），我无法在正确的地方 ping ......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T06:44:27.220

处理所有输入现代浏览器有[`oninput`事件](https://developer.mozilla.org/en-US/docs/DOM/window.oninput)

这是使用此事件执行您要求的示例：

```
$('.limited').bind('input',function() {
    var $t=$(this);
    var max=$t.data('maxchars');
if ($t.val().length>max) {
    $t.val($t.val().substr(0,max));
}
});​ 
```

[演示](http://jsfiddle.net/oceog/rR7Qd/)

对于旧浏览器，您应该使用 keyup,keydown+onpaste：

```
$('.limited').bind('keyup keydown paste',function(e) {
    var $t=$(this);
    setTimeout(function(){ 
    var max=$t.data('maxchars');
if ($t.val().length>max) {
    $t.val($t.val().substr(0,max));
}
    },0);
});​ 
```

[老浏览器演示](http://jsfiddle.net/oceog/rR7Qd/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T06:36:26.740

通过 javascript 控制文本区域的长度并不是一个真正的智能解决方案，因为 HTML 已经支持开箱即用 :)

[http://www.w3schools.com/tags/att_textarea_maxlength.asp](http://www.w3schools.com/tags/att_textarea_maxlength.asp)

```
<textarea maxlength="50">
  Enter text here...
</textarea> 
```

我不是 100% 确定这是一个旧功能还是由 HTML5 发明的。恕我直言，自从进行了一些修订后，它就已经可用了。但是 w3schools 说它是 textareas 的新功能。

PS：这是我一个月前写的：[https](https://github.com/sdepold/jquery.char-counter) ://github.com/sdepold/jquery.char-counter 。它基本上是观察插入到 textarea 中的字符数并切断所有过多的字符。你也得到一个字符计数器。

PPS：jquery.char-counter 的演示：http: [//jsfiddle.net/TBDue/](http://jsfiddle.net/TBDue/)

# regex - 如何在开始使用 sed 时去掉数字？

> ID：13795999
> 
> 赞同：1
> 
> 时间：2012-12-10T06:23:40.177
> 
> 标签：regex, unix, sed

我有管道分隔文件。我想去掉以 '00' 开头的子 ID 的数字，保持其余数字相同。例如：Karen Calvert50335491| **0020380050335491** |活动|100|KINGSPORT|KarenCalvert50335491@charter.net|8353/3000|住宅|FiberNode|田纳西|00:00:00:20:0f:03|东|423-343-9250|HSIPLUS|1826 HIGHLAND ST|服务1|MA|01602

预期 o/p-

凯伦卡尔弗特50335491| **20380050335491** |活跃|100|KINGSPORT|KarenCalvert50335491@charter.net|8353/3000|住宅|FiberNode|田纳西|00:00:00:20:0f:03|东|423-343-9250|HSIPLUS|1826 HIGHLAND ST|服务1|MA|01602

注意：在这个文件中，有一些mac地址也带有'00'

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T06:28:16.613

使用 sed：

```
 sed 's/^\([^|]*\)|0*\([^|]*\)/\1|\2/' input 
```

它匹配、捕获并保留`\1`via中的第一列`^\([^|]*\)`并捕获 中的第二列`\2`，跳过前导 0 的 via `0*\([^|]*\)`。然后它将匹配的部分（第 1 列和第 2 列）替换为通过这些列捕获的部分`/\1|\2/`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T12:05:03.557

这可能对您有用（GNU sed）：

```
sed -r 's/^([^|]*\|)0+/\1/' file 
```

或更一般地说：

```
sed -r 's/^(([^|]*\|){1})0+/\1/' file 
```

在这种情况下`1`是`nth -1`字段

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T14:21:51.410

好伤心。如果您想操作第 7 个字段而不是第二个字段，请尝试 sed 解决方案。只需使用 awk：

```
awk 'BEGIN{FS=OFS="|"} {sub(/^0+/,"",$2);print}' file 
```

如果您想更改第 7 个字段而不是第 2 个字段，只需将 $2 更改为 $7。