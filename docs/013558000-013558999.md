# StackOverflow 问答 13558000-13558999

# google-app-engine - 将 google 关闭拖放文件选择器连接到 Blobstore 图像上传器

> ID：13558015
> 
> 赞同：1
> 
> 时间：2012-11-26T02:48:05.543
> 
> 标签：google-app-engine, google-closure

我有一个连接到 Google App Engine 后端的 javascript 前端。将[文件上传到 Blobstore 的说明](https://developers.google.com/appengine/docs/java/blobstore/overview)假设您使用的是 JSP，但我不是。[创建文件删除处理程序](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/filedrophandler.html)的示例假设您只想在帖子中自行发送文件。

这适用于发送文件：

```
var files = event.getBrowserEvent().dataTransfer.files;
if (files.length > 0) {
  if (files.length > 1) {
    console.log('Too many files!');
  } else {
    var file = files[0];

    var xhr = new goog.net.XmlHttp();
    xhr.open('POST', '/imageUpload?gwt.codesvr=localhost:9997');
    xhr.send(file);
  }
} 
```

但这只是将数据直接发送到我的 servlet。我可以在我的 html 中添加一个表单，但据我所知，[闭包不喜欢设置 file 类型的输入](http://closure-library.googlecode.com/svn/docs/closure_goog_dom_forms.js.html)。

关于如何将文件上传到 Blobstore 的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:15:10.297

在[这个答案](https://stackoverflow.com/a/8469533/449161)的帮助下，我终于想通了。

首先，确保在您的 appengine-web.xml 中启用了会话：`<sessions-enabled>true</sessions-enabled>`

我最终编写了两个单独的 servlet，一个创建上传 URL，第二个在图像写入 blobstore 后处理重定向。

**图片上传 URL servlet**

```
public void doGet(HttpServletRequest pRequest, HttpServletResponse pResponse) throws IOException {
    BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
    Map<String, String> payload = new HashMap<String, String>();

    payload.put("url", blobstoreService.createUploadUrl("/imageUpload"));

    LOGGER.info("Payload: " + GSON.toJson(payload));

    pResponse.setContentType("application/json");
    pResponse.getWriter().println(GSON.toJson(payload));
} 
```

**客户端图片上传请求者**

```
// request function
...
goog.net.XhrIo.send('/imageUploadURL', goog.bind(this.handleURLReceived, this));
...

// response handler function
myapp.ImageDrop.prototype.handleURLReceived = function(event)
{
  this.postURL = this.extractValidJson(event).url;
  myapp.logger.fine('Response: ' + this.postURL);
}; 
```

`extractValidJson(event)`只是我编写的用于提取 json 响应的实用程序函数。

一旦我们有了一个有效的 URL，我们就可以允许上传。

**客户端上传丢弃发件人**

```
// In constructor
...
var dropZone = goog.dom.getElement('image-drop');
var handler = new goog.events.FileDropHandler(dropZone, true);
goog.events.listen(handler, goog.events.FileDropHandler.EventType.DROP, goog.bind(this.handleDrop, this));
...

// FileDropHandler
myapp.ImageDrop.prototype.handleDrop = function(event)
{
  var files = event.getBrowserEvent().dataTransfer.files;

  var file = files[0]; // IRL, do error checking

  this.xhr = new goog.net.XmlHttp();
  this.xhr.open('POST', this.postURL, true); // asych
  this.xhr.onreadystatechange = goog.bind(this.uploadResponseHandler, this);

  var form_data = new FormData();
  form_data.append('file', file); // name is arbitrary, must match in servlet      
  this.xhr.send(form_data);
}; 
```

**图片上传重定向 servlet**

```
public void doPost(HttpServletRequest pRequest, HttpServletResponse pResponse) throws IOException {
    Map<String, List<BlobKey>> blobs = blobstoreService.getUploads(pRequest);

    // 'file' matches param name from form
    for (BlobKey key : blobs.get("file")) {
        LOGGER.info("We have a KEY!!!! " + key);
        blobstoreService.delete(key); // Just testing
    }

    // Make this a real response        
    pResponse.setContentType("text/html");
    pResponse.getWriter().println("OK"); 
```

}

然后你可以在你的uploadResponseHandler 中做任何事情。请求完成是 4（[见此](http://www.w3schools.com/ajax/ajax_xmlhttprequest_onreadystatechange.asp)）。

```
myapp.ImageDrop.prototype.uploadResponseHandler = function(event)
{ 
  if (this.xhr.readyState === myapp.ImageDrop.REQUEST_FINISHED) {
    myapp.logger.fine('Request finished!');
  }
}; 
```

一旦所有的部分组合在一起，就不会那么糟糕了。

# matlab - 插入图像并绘制它MATLAB

> ID：13558018
> 
> 赞同：1
> 
> 时间：2012-11-26T02:49:10.840
> 
> 标签：matlab, plot, equation

我正在尝试插入一个方程并绘制它，但我不能，因为我不断收到错误，例如：矩阵尺寸必须一致，或者内部矩阵尺寸必须一致。

[http://www4.0zz0.com/2012/11/25/10/272913238.png](http://www4.0zz0.com/2012/11/25/10/272913238.png) 这是等式。M 的值为 1 到 6，增量为 0.5。Q 的值为 0 到 1，增量为 0.1。

[http://www4.0zz0.com/2012/11/25/10/700692428.png](http://www4.0zz0.com/2012/11/25/10/700692428.png) 情节是这样的

```
 m=1:0.5:6;
 q=0:0.1:1; 
```

我试图将方程分成几部分，这样我插入它会更容易，但最后一部分出现错误

```
e=q./m(1-sqrt(1-(q./m).^2)); 
```

下标索引必须是实数正整数或逻辑数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:20:14.690

1.  遍历和的每个组合`m`：`q`你想使用`ndgrid`. 现在，两者`m`和`q`都是行向量，因此数组操作只会将 的第一个元素`m`与 的第一个元素相结合`q`，将第二个元素与第二个元素相结合，依此类推。你想要的是一个二维矩阵，其中`m`沿一个维度`q`变化，并沿另一个维度变化。这就是这样`ndgrid`做的。尝试这个：

    ```
    [q, m] = ndgrid(0:0.1:1, 1:0.5:6); 
    ```

2.  对于下标索引错误消息：问题是乘法与数组访问。在等式 PNG 中，分母的形式是`M{…}`，这意味着`M`乘以大括号中的值。在您的代码中，您编写`m(…)`，这实际上是一个数组访问——而不是乘法。将其更改为`m .* (…)`使代码工作。工作版本是：

    ```
    e=q./(m.*(1-sqrt(1-(q./m).^2))); 
    ```

    现在，您可以执行以下操作：

    ```
    figure; plot(e); 
    ```

    ......你应该得到类似于你想要的输出。

# javascript - Jasmine 使用 PhantomJS 丢失了 jQuery：ReferenceError：找不到变量：$

> ID：13558021
> 
> 赞同：11
> 
> 时间：2012-11-26T02:49:25.683
> 
> 标签：javascript, jquery, jasmine, phantomjs, guard

我想通过 PhantomJS 在控制台中使用 Jasmine 的 jQuery 测试我的 JS 代码，但是`ReferenceError: Can't find variable: $`

我可以在浏览器中正常测试 Jasmine 的代码。

谢谢您的帮助。

```
$ phantomjs examples/run-jasmine.js http://localhost:8888/
ReferenceError: Can't find variable: $

  http://localhost:8888/public/javascripts/PhotoTable.js:59
ReferenceError: Can't find variable: $

  http://localhost:8888/public/javascripts/PhotoTable2.js:129
ReferenceError: Can't find variable: $

  http://localhost:8888/public/javascripts/amenimomakezu.js:18
  http://localhost:8888/public/javascripts/amenimomakezu.js:20
ReferenceError: Can't find variable: _error

  http://localhost:8888/public/javascripts/p121106.js:29
  http://localhost:8888/public/javascripts/p121106.js:39
null
Data loaded [object Object]
Data loaded [object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object]
Data loaded [object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object]
[object Object]
Winter in October
[object Object]
[object Object]
'waitFor()' finished in 200ms.

Animal
Passing 20 specs 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-17T19:17:32.590

我也遇到了这个问题。我通过在加载其余 javascript 文件之前更改我的 jasmine.yml 以加载 jquery 来修复它：

```
src_files：
  - 公共/js/jquery.js
  - 公共/js/**/*.js

```

# algorithm - 包含笛卡尔曲面项目的算法

> ID：13558030
> 
> 赞同：4
> 
> 时间：2012-11-26T02:50:10.457
> 
> 标签：algorithm

是否有任何算法可以帮助最佳地找到最小数量的矩形以包含分布在笛卡尔表面上的一定数量的项目（每个项目都是具有 x 和 y 坐标的点）？矩形必须与 Ox 轴正交且底部段位于 Ox 轴上，并且每个矩形的面积必须小于给定值 M。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:49:22.253

不是一个完整的解决方案，而是问题的简化：假设所有点 P 都在一般位置并且在 x 坐标上排序。

然后通过找到`x >= fx`将 P 划分为不相交集的 F 个垂直栅栏（形式为 ）来形成解决方案。

然后每个集合可以被一个轴对齐的矩形覆盖，其中集合中的第一个和最后一个点确定矩形的宽度，集合中具有最高 y 坐标的点确定高度，从而确定表面大小的矩形。

显然，现在的诀窍是选择栅栏，使栅栏的数量（以及矩形的数量）最小化，同时将所有矩形的总表面尺寸保持在允许的最大值以下。

**编辑可能**~~*可以*~~~~使用动态编程解决~~
~~放置 F 栅栏的问题。~~ *到目前为止，这是我想出的：*

 *如果是这样，则最多有 |P|-1 个栅栏位置；这些可能会成为动态规划表中的列。动态规划表中的每一行都应该表示使用了一个额外的栅栏（请记住，我们试图找到栅栏数量最少的结果）。然后，每个单元格 (X, Y) 将代表在前 X 个可用位置上精确分布 Y 栅栏的最佳解决方案（就总矩形大小而言）。但是，我在查看表格的相邻单元格如何（或是否）有助于确定特定单元格的值时遇到了一些问题。

**编辑2**：忘记这一点，我认为动态编程方法是不可能的。这是因为我认为不可能逐步构建最佳解决方案（通过添加另一个点或栅栏，最佳解决方案配置可能会完全改变）。这也将排除贪婪的方法。

我能想到的唯一想法，虽然从算法的角度来看没有那么壮观，但它是一种随机方法，例如用于分布栅栏的[模拟退火。](http://en.wikipedia.org/wiki/Simulated_annealing)它不能保证*最佳*解决方案，但您应该能够非常接近它。

**编辑 3**：为了回应这篇文章下的反应，我们不一定需要*最好*的解决方案，而是选择一个“相当不错”的解决方案，并应用你现在正在学习的东西。

无论如何，您可能需要从左到右对所有点进行排序。

一个贪婪的解决方案可能是定义第一个矩形，使其包含最左边的点。接下来，展开矩形，使其包含右侧的点。继续添加下一个点，直到矩形超过其最大尺寸。在这种情况下，从一个新的矩形开始，然后再次开始添加点，等等。

获得解决方案的一种分而治之的方法可能是从覆盖所有点的矩形开始。显然，这个矩形超过了最大尺寸 M，所以你可以根据一些启发式方法将它垂直分成 2 个较小的矩形 Ml 和 Mr（例如，正好在中间，或者在两个后续点相距最远的点）。以相同的方式递归处理 Ml 和 Mr，或者再次拆分矩形，或者如果找到的矩形 <= M，则将找到的矩形报告为结果的一部分。

请注意，对于这两种方法，对于某些人为的配置，结果可能是任意的，但总的来说，解决方案应该是“好的”。*

# mysql - MySQL版本错误使用准备好的语句

> ID：13558031
> 
> 赞同：0
> 
> 时间：2012-11-26T02:50:13.157
> 
> 标签：mysql, sql

我正在使用准备好的语句来保护我的 sql 查询免受 sql 注入攻击。该声明在另一篇文章中提出，我按照指示实施了它。现在更新查询运行时出现错误。它只发生在我的程序中的几个步骤。这是代码的一部分和详细说明错误的注释区域。如果我需要发布整个程序，请告诉我。

这是片段：

```
 String updateQuery ="" + "   Update student" 
                + "Set  firstname = ?, " 
                + "     lastname = ?, " 
                + "     gpa = ? " 
                + "     status = ?, " 
                + "     mentor = ?, " 
                + "     level = ?, "
                + "     thesisTitle = ?, "
                + "     thesisAdvisor = ?, "
                + "     company = ?, "
                + "Where studentid = ? ";
            //This seems to work right up to set #7, then the program errors out. It indicates a syntax error that I cannot find?   
             // I wonder if the error is version dependant? Error points to MySQL version for correct syntax to use near '= ?,  that would be right after firstName.

        PreparedStatement pstmt = conn.prepareStatement(updateQuery); //to protect against SQL injection attacks
          pstmt.setString(1,firstName);
          pstmt.setString(2,lastName);
          pstmt.setDouble(3,gpa);
          pstmt.setString(4,status);
          pstmt.setString(5,mentor);
          pstmt.setString(6,level);
          pstmt.setString(7,thesisTitle);
          pstmt.setString(8,thesisAdvisor);
          pstmt.setString(9,company);
          pstmt.setString(10,studentID);

            int rowsInserted = stmt.executeUpdate(updateQuery);
        System.out.print("Number of Rows inserted = " + rowsInserted);      

        // Close the statement and the connection

        stmt.close();
        conn.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T02:52:14.630

删除额外`comma`的`company`

```
 + "     company = ?, "
                    ^ here 
```

# android - 我的位置抛出空指针异常？

> ID：13558032
> 
> 赞同：0
> 
> 时间：2012-11-26T02:50:25.360
> 
> 标签：android, eclipse, google-maps, geolocation, gps

昨天！我写了代码来查找位置！这是工作。但是今天，当我在不同的功能上编写更多代码时，它就不起作用了。并抛出异常你能帮帮我吗？嗨！我是新手。这是日志：

```
 11-26 09:44:52.109: E/AndroidRuntime(9259): FATAL EXCEPTION: main
11-26 09:44:52.109: E/AndroidRuntime(9259): java.lang.NullPointerException
11-26 09:44:52.109: E/AndroidRuntime(9259):     at com.example.zzzzzz.MainActivity.onOptionsItemSelected(MainActivity.java:351)
11-26 09:44:52.109: E/AndroidRuntime(9259):     at android.app.Activity.onMenuItemSelected(Activity.java:2205)
11-26 09:44:52.109: E/AndroidRuntime(9259):     at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:777)
11-26 09:44:52.109: E/AndroidRuntime(9259):     at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:143)
11-26 09:44:52.109: E/AndroidRuntime(9259):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855)
11-26 09:44:52.109: E/AndroidRuntime(9259):     at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:532)
11-26 09:44:52.109: E/AndroidRuntime(9259):     at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:122)
11-26 09:44:52.109: E/AndroidRuntime(9259):     at android.view.View$PerformClick.run(View.java:9112)
11-26 09:44:52.109: E/AndroidRuntime(9259):     at android.os.Handler.handleCallback(Handler.java:587)
11-26 09:44:52.109: E/AndroidRuntime(9259):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-26 09:44:52.109: E/AndroidRuntime(9259):     at android.os.Looper.loop(Looper.java:130)
11-26 09:44:52.109: E/AndroidRuntime(9259):     at android.app.ActivityThread.main(ActivityThread.java:3835)
11-26 09:44:52.109: E/AndroidRuntime(9259):     at java.lang.reflect.Method.invokeNative(Native Method)
11-26 09:44:52.109: E/AndroidRuntime(9259):     at java.lang.reflect.Method.invoke(Method.java:507)
11-26 09:44:52.109: E/AndroidRuntime(9259):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
11-26 09:44:52.109: E/AndroidRuntime(9259):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
11-26 09:44:52.109: E/AndroidRuntime(9259):     at dalvik.system.NativeStart.main(Native Method)
11-26 09:44:53.939: I/Process(9259): Sending signal. PID: 9259 SIG: 9 
```

这是我查找位置的功能：

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()) {
    case R.id.about:
        //about
        Intent about = new Intent("com.example.zzzzzz.About");
        startActivity(about);
        break;
    case R.id.setting:
        //setting
        Intent setting = new Intent("com.example.zzzzzz.Setting");
        startActivityForResult(setting, 2);
        break;
    case R.id.direction:
        //direction
        Intent direction = new Intent("com.example.zzzzzz.Direction");
        startActivityForResult(direction, 1);
        break;
    case R.id.MyLocation:
        //mylocation
        //Intent mylocation = new Intent("com.example.zzzzzz.MyLocation");
        //startActivity(mylocation);
        initLocationManagerV2();
        LocationManager locationManager;
        locationManager = (LocationManager)getSystemService (Context.LOCATION_SERVICE);
        Location location = locationManager.getLastKnownLocation (LocationManager.GPS_PROVIDER);
        double lat = location.getLatitude();
        double lng = location.getLongitude();
        GeoPoint find = new GeoPoint((int)(lat*1E6), (int)(lng*1E6));
        mv.getController().animateTo(find);
        mv.invalidate();
        break;
    }

    return false;
} 
```

这是函数 initLocationMaganeV2 ：

```
private void initLocationManagerV2() {
    locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    locListener = new LocationListener() {

        public void onLocationChanged(Location newLocation) {
            createAndShowCustomOverlay(newLocation);
        }

        public void onProviderDisabled(String arg0) {
        }

        public void onProviderEnabled(String arg0) {
        }

        public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
        }
    };
    locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
            locListener);
}

protected void createAndShowCustomOverlay(Location newLocation) {
    List overlays = mv.getOverlays();

    // first remove old overlay
    if (overlays.size() > 0) {
        for (Iterator iterator = overlays.iterator(); iterator
                .hasNext();) {
            iterator.next();
            iterator.remove();
        }
    }

    // transform the location to a geopoint
    GeoPoint geopoint = new GeoPoint(
            (int) (newLocation.getLatitude() * 1E6), (int) (newLocation
                    .getLongitude() * 1E6));

    // Create new Overlay
    CustomOverlay overlay = new CustomOverlay(geopoint);

    mv.getOverlays().add(overlay);

    // move to location
    //mv.getController().animateTo(geopoint);

    // redraw map
    mv.postInvalidate();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:16:20.993

getLastKnownLocation(provider) 上的 Google 文档指出“如果提供程序当前被禁用，则返回 null。” 确保在您使用上面的代码测试您的例程时启用您的 GPS，因为您已经

```
locationManager.getLastKnownLocation (LocationManager.GPS_PROVIDER); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T03:03:57.887

最可能

```
Location location = locationManager.getLastKnownLocation (LocationManager.GPS_PROVIDER); 
```

返回**null**，您无需检查即可使用它。

# c# - 如果不在 ActionFilter 中，该把逻辑放在哪里？

> ID：13558033
> 
> 赞同：1
> 
> 时间：2012-11-26T02:51:04.157
> 
> 标签：c#, asp.net-mvc

所以我一直在阅读一些关于 StackOverlow 的评论，说你不应该将业务逻辑放在自定义中`ActionFilterAttribute`，因为它被认为是元数据。

例如访问存储库并进行一些检查，并在您的自定义属性中进行相应的处理（错误）。

首先，我不确定我是否同意这一点，因为很多框架过滤器（身份验证）等都在做业务逻辑——主要区别主要在控制器的范围内，即只访问控制器值、路由数据等。

所以我的问题是，当您确实需要使用 ActionFilter 来标记单个操作以进行额外的逻辑/处理时，您将逻辑放在哪里？

感谢您的输入/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:11:03.827

使用 actionfilter 做*一些*业务逻辑并没有错。通常，这就是您实现诸如日志记录、安全性等横切关注点的方式（正如您所指出的）。

他们的目的都是以他们的名义。您的操作的过滤器。传入的操作，或*对要输出*的数据的传出修改。

您需要注意的是，将修改业务数据并将更改持久化的行为置于 actionfilters 中。这些事情对于下一个查看您的代码的开发人员来说是违反直觉的。它们不过滤任何东西，它们改变了整个系统的状态，这就是 Actions(Commands) 的用途。

# java - 数字未显示在 JFrame 上

> ID：13558034
> 
> 赞同：1
> 
> 时间：2012-11-26T02:51:29.663
> 
> 标签：java, multithreading, swing, jframe, paint

这是使数字显示的线程：

```
 class CoOrdCounter extends Thread{
    public void run(){
        try{
            while(true){
                    Thread.sleep(500);
                    printX = cow.x;
                    printY = cow.y;
            }
        }catch(Exception e){}
    }
}
//Of course I also have CoOrdCounter co = new CoOrdCounter; co.start(); 
```

然后......
`g.drawString("Co-ords: ("+printX+","+printY+")",50,100);` 它总是显示`(0,0)`，可能是因为`int printX = 0, printY = 0;`。所以这意味着变量根本没有改变......为什么？我应该如何使这项工作......？
**[请]**我知道我不应该使用paint()，但我是中级初学者，所以...
**[编辑]**现在 MadProgrammer 提到了它，我确实收到了 EventDispatchThread 错误。
**[编辑 2]**我知道使用 a`Timer`但`@MadProgrammer`我如何获得`cow.x`和`cow.y`使用您的代码片段？
**[编辑 3]**如果您键入密钥`p`，`KeyListener`将启动 , 的`Thread` `Slider`实例`thread`。
**[UPDATE CLASS 2（真品）]**

```
import javax.swing.*;

import java.awt.*;
import java.awt.event.*;
import java.awt.geom.*;
import java.util.*;
import java.io.*;
import java.net.*;
@SuppressWarnings({"serial","rawtypes","unchecked"})
public class CowbenderI extends JFrame implements MouseListener, KeyListener{

CoOrdCounter co;
Counter cnt;
Icon icon = new ImageIcon("resources/img/cow.png");
int focusX = 0, focusY = 0, counter = 0;
ArrayList lines = new ArrayList();
Point2D.Double start;
final Color BROWN = new Color(156,93,82);
Slider thread;
Rectangle cow = null;
boolean drawGuy = false, useFinal = false, checkedForWin = false, alive = true;
int finalTime = 0;
int printX = 0, printY = 0;
public CowbenderI(){
    super("Cowbender I - \"Slope Run\"");
    setSize(700,700);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    addMouseListener(this);
    addKeyListener(this);

    cnt = new Counter();
    cnt.go = false;
    cnt.start();
    co = new CoOrdCounter();
    co.go = false;
    co.start();
}

public void paint(Graphics g){
    super.paint(g);
    try{
        g.setColor(Color.WHITE);
        g.fillRect(-2000, -2000, 5000, 5000);
        URL url = this.getClass().getResource("resources/img/world/slope.png");
        Image bckgrnd = Toolkit.getDefaultToolkit().getImage(url);
        g.drawImage(bckgrnd,0,0,this);
    }catch(Exception e){}
    g.setColor(BROWN);
    for(int i = 0; i < lines.size(); i++){
        Line2D.Double temp = (Line2D.Double) lines.get(i);
        int x1 = Integer.parseInt(""+Math.round(temp.getX1()));
        int x2 = Integer.parseInt(""+Math.round(temp.getX2()));
        int y1 = Integer.parseInt(""+Math.round(temp.getY1()));
        int y2 = Integer.parseInt(""+Math.round(temp.getY2()));

        g.drawLine(x1-focusX,y1-focusY,x2-focusX,y2-focusY);
    }

    if(drawGuy){
        try{
            g.setFont(new Font("Arial",Font.BOLD,16));
            if(useFinal == false) g.drawString("Current Time: "+counter,50,50);
            else g.drawString("Current Time: "+finalTime,50,50);
            g.drawString("Co-ords: ("+printX+","+printY+")",50,100);
            if(alive == true){
                URL url = this.getClass().getResource("resources/img/world/char.png");
                Image image = Toolkit.getDefaultToolkit().getImage(url);
                g.drawImage(image, cow.x-focusX, cow.y-focusY, this);
            }
            else{
                URL url = this.getClass().getResource("resources/img/world/deadchar.png");
                Image image = Toolkit.getDefaultToolkit().getImage(url);
                g.drawImage(image, cow.x-focusX, cow.y-focusY, this);
                    if(checkedForWin == false){
                        finalTime = counter;
                        useFinal = true;
                        checkWin();
                    }
                }
        } catch(Exception exc){}
        focusX = cow.x-100;
        focusY = cow.y-100;
    }
}

public void checkWin(){
    if(finalTime >= 45){
        JOptionPane.showMessageDialog(null,"You won!\nThe farmer got tired and ran back!","Cowbender I - The Slope",JOptionPane.INFORMATION_MESSAGE,icon);
        System.exit(0);
    }
}

public void mouseClicked(MouseEvent e){}
public void mouseEntered(MouseEvent e){}
public void mouseExited(MouseEvent e){}
public void mousePressed(MouseEvent e){
    start = new Point2D.Double(e.getX()+focusX,e.getY()+focusY);
}
public void mouseReleased(MouseEvent e){
    Point2D.Double end = new Point2D.Double(e.getX()+focusX,e.getY()+focusY);
    lines.add(new Line2D.Double(start,end));
    repaint();
}
public void keyPressed(KeyEvent e){}
public void keyReleased(KeyEvent e){}
public void keyTyped(KeyEvent e){
    if(e.getKeyChar()=='w'||e.getKeyChar()=='W'){
        focusY-=100;
        repaint();
    }
    if(e.getKeyChar()=='a'||e.getKeyChar()=='A'){
        focusX-=100;
        repaint();
    }
    if(e.getKeyChar()=='s'||e.getKeyChar()=='S'){
        focusY+=100;
        repaint();
    }
    if(e.getKeyChar()=='d'||e.getKeyChar()=='D'){
        focusX+=100;
        repaint();
    }
    if(e.getKeyChar()=='p'||e.getKeyChar()=='P'){
        alive = true;
        counter = 0;
        cnt.go = true;
        co.go = true;
        useFinal = false;
        thread = new Slider();
        thread.start();
        thread.action(true);
    }
    if(e.getKeyChar()=='z'||e.getKeyChar()=='Z'){
        lines.remove(lines.size()-1);
        repaint();
    }
    if(e.getKeyChar()=='x'||e.getKeyChar()=='X'){
        int response = milkSwing.confirmBox(null, "Do you really want to remove all of your summoned earth?", "Cowbender - The Slope", JOptionPane.YES_NO_OPTION);
        if(response == JOptionPane.YES_OPTION) lines.clear();
        repaint();
    }
    if(e.getKeyChar()=='q'||e.getKeyChar()=='Q'){
        System.exit(0);
    }
}

class CoOrdCounter extends Thread{
    public boolean go = true;
    public void run(){
        try{
            while(true){
                if(go){
                    Thread.sleep(500);
                    printX = cow.x;
                    printY = cow.y;
                    repaint();
                }
            }
        }catch(Exception e){}
    }
}

class Counter extends Thread{
    public boolean go = true;
    public void run(){
        try{
            while(true){
                if(go){
                    Thread.sleep(1000);
                    counter++;
                }
            }
        } catch(Exception e){}
    }
}

private class Slider extends Thread{
    double velocity, gravity;
    boolean go = false;
    public void run(){
        if(go){
            initGuy();
            velocity = 0;
            gravity = 1;
        }
        while(go){
            try{
                Line2D.Double lineTaken = null;
                boolean onLine = false;
                int firstOnLine = -1;
                for(int i = lines.size()-1; i>=0; i--){
                    Line2D.Double temp = (Line2D.Double) lines.get(i);
                    if(temp.intersects(cow.x,cow.y,50,50)){
                        lineTaken = temp;
                        onLine = true;
                        if(firstOnLine!=i){
                            firstOnLine = i;
                            gravity = 0;
                        }
                        break;
                    }
                }
                if(onLine){
                    double grav = (lineTaken.y2-lineTaken.y1)/50;
                    double vlct = (lineTaken.x2-lineTaken.x1)/100;
                    if(velocity<5)velocity+=vlct;
                    if(gravity<2.5)gravity+=grav;
                }
                else{
                    gravity+=.2;
                }
                cow.x+=velocity;
                cow.y+=gravity;
                if(cow.x > 10000) alive = false;

                Thread.sleep(75);
                repaint();
            }catch(Exception e){break;}
        }
    }
    public void action(boolean b){
        go = b;
    }
    public void initGuy(){
        Line2D.Double firstLine = (Line2D.Double) lines.get(0);
        int x = Integer.parseInt(""+Math.round(firstLine.x1));
        int y = Integer.parseInt(""+Math.round(firstLine.y1));
        cow = new Rectangle(x+90,y-60,50,50);
        drawGuy = true;
    }
}
/**
 * @param args
 */
public static void main(String[] args) {
    CowbenderI g = new CowbenderI();

}
}<br /> 
```

**[编辑 4]** @MadProgrammer 不工作：
![在此处输入图像描述](../Images/be80a7c72752b40cedd707a24dc95663.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T03:07:23.287

您需要告诉 Swing 您想要更新 UI。在您的情况下，这将出现问题，因为它可能违反与事件调度线程的合同（您不应该从除事件调度线程之外的任何线程更新 UI）

我在下面做的例子使用了一个简单的`javax.swing.Timer`，它克服了这个问题

```
public class PrintNumbers {

    public static void main(String[] args) {
        new PrintNumbers();
    }

    public PrintNumbers() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new PrintPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class PrintPane extends JPanel {

        private int printX;
        private int printY;

        public PrintPane() {
            Timer timer = new Timer(500, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    printX = (int) Math.round(Math.random() * 1000);
                    printY = (int) Math.round(Math.random() * 1000);
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(100, 100);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            int width = getWidth() - 1;
            int height = getHeight() - 1;
            FontMetrics fm = g.getFontMetrics();
            String text = printX + "x" + printY;
            int x = (width - fm.stringWidth(text)) / 2;
            int y = ((height - fm.getHeight()) / 2) + fm.getAscent();
            g.drawString(text, x, y);
        }

    }

} 
```

**更新**

从示例代码。

首先，您的示例代码有问题的列表......

*   没有理由扩展`JFrame`或覆盖该`paint`方法。您最好从 a 扩展`JPanel`并覆盖`paintComponent`. 首先，这将为您提供自动双缓冲，其次，它将为您提供灵活的部署选项（将面板添加到 a`JFrame`或`JApplet`）
*   您的线程管理需要更多工作。在 while 循环中运行不执行任何操作（while`go`为 false）的线程会浪费 CPU，因为这些线程仍需要被调度才能运行。通读[Concurrency](http://docs.oracle.com/javase/tutorial/essential/concurrency/)，特别是[Synchronization](http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html)和 locks
*   [在](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)`KeyListener`. _ _ 它具有更好的焦点控制（组件不必为了触发动作而获得焦点）并生成可插入和可重用的代码。
*   为您的事件侦听器使用[内部类。](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)当您真的不想时，它会减轻您通过主类公开事件处理程序方法的需要
*   您应该避免在可行的情况下使用空异常块。 `catch (Exception e) {}`如果出现问题，不会告诉你任何事情。至少您应该记录异常。

至于你的问题..

[首先](http://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html)制作`CoOrdCounter#go`,`Counter#go`和`Slider#go`volatile 。`Cow`

我侥幸逃脱`CoOrdCounter#go`并能够正确看到打印到控制台的结果（由于上述原因，您的图形在我的机器上无法正常工作）

# shell - 简单的 Shell 脚本

> ID：13558036
> 
> 赞同：0
> 
> 时间：2012-11-26T02:52:04.360
> 
> 标签：shell, directory, delete-file

论证示例：

```
../path/cse/lab3/remove 
```

现在，它正在打印“lab3”中的所有目录和文件。我希望它打印出“删除”中的所有文件。我不知道该怎么做。我想使用 for 循环。

代码：

```
if test -d $1    #check if argument is a directory.
then

    for fileName in *
    do  
        echo "what is this::: $fileName"

    done

fi 
```

另外，我如何将所有文件打印为字符串，如下所示：

```
remove/test.out
remove/test2.out 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T02:54:31.360

```
for fileName in $1/* 
```

……大概就是你的意思。

# ios - IOS MBProgressHUD显示位置错误（不在中心，加载显示在左上角。）

> ID：13558039
> 
> 赞同：2
> 
> 时间：2012-11-26T02:52:26.323
> 
> 标签：ios, objective-c, position, uiactivityindicatorview, mbprogresshud

我使用`MBProgressHUD`showWhileExecuting 从网络查询一些数据，但`MBProgressHUD`有时不是中心

![在此处输入图像描述](../Images/3d6815f1113af12be031b50d165462c1.png)

图片上（红色数字）：

左上角显示加载，中间显示背景。

1.加载显示不在MBProgressHUD的背景上 2.只显示一个不包含加载的背景

```
-(void)viewDidLoad
{
    //other code ...

    mb = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
    // --> i try which causes also an error
    //[[MBProgressHUD alloc] initWithWindow:self.view.window]; 
    // --> error too
    //[[MBProgressHUD alloc] initWithView:self.view];
    mb.labelText = @"loding city...";

    [self.navigationController.view addSubview:mb];
    [mb showWhileExecuting:@selector(queryCity:) 
                  onTarget:self 
                withObject:[NSNumber numberWithInt:1] 
             animated:YES];
}

-(void)queryCity:(NSNumber*)flag
{
    //query some data from network.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-08T17:24:41.850

仅供参考：我说

`[[[UIApplication sharedApplication] keyWindow] addSubview:_progress];`

代替

`[self.view addSubview:_progress];`

我不是很喜欢它，也因为它适用`self.view`于另一种情况，但我在这里没有看到其他选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T02:49:56.900

我发现这个问题。当 MBProgressHUD 清理它会丢失矩形。

```
- (void)cleanUp {
taskInProgress = NO;
    //changed by zt9788 2012-12-26
    //comment this line to fix it.
//self.indicator = nil;
#if !__has_feature(objc_arc)
[targetForExecution release];
[objectForExecution release];
#else
targetForExecution = nil;
objectForExecution = nil;
#endif
[self hide:useAnimation]; 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-18T08:40:22.993

我有同样的问题。看看这个，为我解决了这个问题，非常简单：

```
[MBProgressHUD showHUDAddedTo:_selfWeak.viewOverlay animated:YES].center 
 = self.viewOverlay.center; 
```

如果您保存通过调用收到的实例类型，`showHUDAddedTo:animated:`您应该能够做更多的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T03:01:52.597

MBProgressHUD 会自动将自身定位在您将其添加到的视图上。由于您将其添加到导航控制器视图中，因此它会将自身定位为在进行中阻止与导航栏的任何交互。

如果这不是您想要发生的，则将 MBProgressHUD 子视图添加到不同的视图中，在这种情况下，您可能希望它在 self.view 而不是 self.navigationcontroller.view 上。

# java - 单选按钮在动态创建的 RadioGroup 中没有正确选择/取消选择

> ID：13558045
> 
> 赞同：4
> 
> 时间：2012-11-26T02:52:57.783
> 
> 标签：java, android, radio-button, radio-group

当我在 XML 布局文件中创建 RadioGroup 时，一切都很好，但是当我动态创建它时，RadioButtons 在选择另一个时不会取消选择：

![在此处输入图像描述](../Images/121e41b9e136c6f455da1010091068cb.png)

这是代码：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    RadioGroup radioGroup = (RadioGroup) findViewById(R.id.radioGroup1);

    RadioButton radioButtonView = new RadioButton(this);
    radioButtonView.setText("RadioButton");
    radioGroup.addView(radioButtonView);

    RadioButton radioButtonView2 = new RadioButton(this);
    radioButtonView2.setText("RadioButton2");
    radioGroup.addView(radioButtonView2);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

和布局文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true" >
</RadioGroup>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T03:08:42.010

您需要为单选按钮设置某种 ID，例如：

```
int idRadio = <some number>;
radioButtonView.setId(idRadio++);
radioButtonView2.setId(idRadio++); 
```

一旦他们有不同的 ID，它应该可以工作。只需确保 ID 不与任何现有的图形元素冲突，并且不为零（转到您的“gen”文件夹并查看 R.java 以获取其他元素 ID）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T03:06:48.953

相关问题[`how to uncheck the radio button in android`](https://stackoverflow.com/questions/10222166/how-to-uncheck-the-radio-button-in-android)。尝试`radioButtonView.setChecked(false);`

# event-handling - 向下滑动时关闭照片滑动窗口

> ID：13558046
> 
> 赞同：0
> 
> 时间：2012-11-26T02:52:59.203
> 
> 标签：event-handling, gesture, photoswipe

这个问题有点具体，但我已经实现了 Photoswipe ( [http://www.photoswipe.com](http://www.photoswipe.com) ) 图片库，并且希望在用户向下滑动时关闭全屏查看器。

已经有与查看上一张/下一张图像相关的左右滑动事件以及具有我正在寻找的相同功能的关闭按钮。

向下滑动 = 关闭全屏查看器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:37:09.147

使用未压缩的 code.photoswipe-xxxjs。找到处理不同手势的函数 onUILayerTouch。在这里添加一个案例，就像 swipeRight 或 swipeLeft：

```
case Util.TouchElement.ActionTypes.swipeUp:
    this.destroyZoomPanRotate();
    this.hide();
    this.toggleToolbar();
    break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-17T19:02:40.427

我要补充一些与 OP 的问题不完全相关的内容，但我认为它仍然相关。

我正在寻找一种在verticalDrag上禁用PhotoSwipe close的方法，这就是我禁用它的方法。

```
var options = {
    closeOnVerticalDrag: false,
    //...
} 
```

另请注意，使用鼠标时此功能被禁用，请参阅：

[http://photoswipe.com/documentation/options.html](http://photoswipe.com/documentation/options.html)

> 垂直拖动和未缩放图像时关闭图库。使用鼠标时始终为假。

# spring - Spring Controller servlet 重定向未发生

> ID：13558051
> 
> 赞同：0
> 
> 时间：2012-11-26T02:53:50.797
> 
> 标签：spring

我创建了一个简单的 Spring 框架，其中控制器（springapp dispatcherservlet 重定向到视图）但它没有重定向到视图..

我正在获取 index1.jsp 的视图，但无法获取 Redirect.htm/jsp 的视图

这是我的代码..

## web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->

<web-app version="2.4"
         xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
         http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" >

  <servlet>
    <servlet-name>SpringApp</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>SpringApp</servlet-name>
    <url-pattern>*.htm</url-pattern>
  </servlet-mapping>

  <welcome-file-list>
    <welcome-file>
      index1.jsp
    </welcome-file>
  </welcome-file-list>

</web-app> 
```

## SpringApp-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!--

1\. This file will be used up by the DispatcherServlet and which contains the bean definition
2\. The file will be picked up by the specification in the WEB-INF/web.xml using <servlet>spring</servlet>
3\. hello controller is responsible for handling the request for the particular page of the website and known 
as the page controller.
-->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

  <!-- the application context definition for the springapp DispatcherServlet -->

  <bean name="Redirect.htm" class="HelloController"/>

</beans> 
```

## 重定向.jsp

```
<%-- 
    Document   : index
    Created on : Nov 23, 2012, 11:55:53 AM
    Author     : gopc
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Hello Controller redirect</title>
    </head>
    <body>
        <h1>This is redirect from the HelloController!</h1>
    </body>
</html> 
```

## 重定向.hml

```
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title>Hello Controller redirect</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <div>This is redirect from the HelloController!</div>
    </body>
</html> 
```

## index1.jsp

```
<%-- 
    Document   : index
    Created on : Nov 23, 2012, 11:55:53 AM
    Author     : gopc
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>Hello World!</h1>
    </body>
</html> 
```

## HelloController.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author gopc
 */
import org.springframework.web.servlet.mvc.Controller;
import org.springframework.web.servlet.ModelAndView;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

import java.io.IOException;

public class HelloController implements Controller {

    protected final Log logger = LogFactory.getLog(getClass());

    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        logger.info("Returning hello view");
        System.out.println("inside controller");
        return new ModelAndView("Redirect.jsp");
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:52:42.390

首先，我将回答为什么您将 index1.jsp 作为视图。它会在您运行应用程序时向您显示 index1.jsp 的视图，**原因是您在 web.xml 的欢迎文件列表中指定了 index1.jsp。** 您将无法获得 Redirect.jsp，因为您没有在**SpringApp-servlet.xml**中配置视图解析器。将以下 bean 添加到您的**SpringApp-servlet.xml**

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
   <property name="prefix" value="/WEB-INF/jsp/"/>
   <property name="suffix" value=".jsp"/>
</bean> 
```

在前缀属性中，您必须提供 Redirect.jsp 文件所在的路径（我假设在 /WEB-INF/jsp 文件夹中）。在后缀属性中，您必须指定要解析的视图的扩展名。

*更改声明*

```
return new ModelAndView("Redirect.jsp"); 
```

*至*

```
return new ModelAndView("Redirect"); 
```

运行您的应用程序并根据请求访问您的应用程序`/Redirect.htm`

它现在应该可以工作了。希望这可以帮助。

请务必阅读[http://static.springsource.org/spring/docs/2.5.x/reference/view.html上的 spring 参考手册](http://static.springsource.org/spring/docs/2.5.x/reference/view.html)

# c# - 算术运算导致溢出。删除 AS400 中的数据时

> ID：13558052
> 
> 赞同：0
> 
> 时间：2012-11-26T02:53:51.843
> 
> 标签：c#, db2, ibm-midrange

当我试图从 AS400 中删除数据时，我遇到了一个奇怪的错误。当我执行这个程序时，在状态 cmd.ExecuteNonQuery() 我得到算术运算导致溢出。
我在这里没有使用任何数字，但我得到了这样的错误。
我试过调试这个程序，但是执行 cmd.ExecuteNonQuery() 语句时没有问题。但是当我运行可执行文件时，总是会出现错误。我不明白我犯了什么错误。希望有人可以帮助我。谢谢...

这是源代码：

```
...                
using (OdbcCommand cmd = new OdbcCommand())
{
   cmd.Connection = conn;
   cmd.CommandText = "DELETE FROM MDPDTAM.IWMDPOC";
   cmd.ExecuteNonQuery();
}
... 
```

我尝试从 AS400 手动执行查询，它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T04:31:54.823

你有实际的 SQL 错误代码吗？您可以使用[SQL 消息查找器](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzas2/rzas2finder.htm)获取更多详细信息。

我建议从[收集 ODBC 跟踪 (SQL.LOG)](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzaii/rzaiiodbc58.htm)开始以识别任何问题。

如果这没有帮助，我将使用[Server-side ODBC diagnostic and performance tools](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzaii/rzaiiodbc62serverside.htm)中概述的步骤检查**QZDASOINIT 作业日志**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-07T11:53:29.610

迟到了这个问题，但我会留下这个以防其他人遇到这个问题。在调用 AS400 程序时，我也遇到了算术溢出，该程序没有返回任何数据并且正在使用`ExecuteNonQuery`.

关键是堆栈跟踪：

```
 at System.Data.Odbc.OdbcStatementHandle.RowCount(SQLLEN& rowCount)
   at System.Data.Odbc.OdbcDataReader.GetRowCount()
   at System.Data.Odbc.OdbcDataReader.FirstResult()
   at System.Data.Odbc.OdbcCommand.ExecuteReaderObject(CommandBehavior behavior, String method, Boolean needReader, Object[] methodArguments, SQL_API odbcApiMethod)
   at System.Data.Odbc.OdbcCommand.ExecuteReaderObject(CommandBehavior behavior, String method, Boolean needReader)
   at System.Data.Odbc.OdbcCommand.ExecuteNonQuery() 
```

即使调用没有返回任何行，也会抛出异常处理返回代码。

我发现该项目已切换到创建 64 位应用程序而不是 32 位（甚至 vshost 可执行文件也是 64 位）。正在使用的 ODBC 驱动程序是 32 位的，因此不匹配会导致异常。将项目更改为 x86 解决了该问题。

# c - 这个 Valgrind 警告是什么意思？- 警告设置地址范围权限

> ID：13558067
> 
> 赞同：89
> 
> 时间：2012-11-26T02:55:48.070
> 
> 标签：c, memory, valgrind

当我针对 valgrind 运行我的程序时，我遇到了以下警告。

```
Warning: set address range perms: large range [0x4d59d040, 0x6159d040) (undefined)
Warning: set address range perms: large range [0x194f7030, 0x2d4f7050) (noaccess)
Warning: set address range perms: large range [0x3959d030, 0x6159d050) (noaccess) 
```

经过一番谷歌搜索后，我在[这里](http://www.network-theory.co.uk/docs/valgrind/valgrind_29.html)发现它是一个`Diagnostic message, mostly for benefit of the Valgrind developers, to do with memory permissions`，这并没有告诉我太多。

我的程序确实在堆上分配了大量内存。（经过一大堆`realloc`'s 可以达到 2-3 GB 的内存）

但是，尽管没有任何分配失败，但还是出现了警告。

所以，我想知道这条消息的真正含义是什么？我没有某种内存权限？（但分配成功）

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-11-26T09:11:17.670

这只是意味着权限在特别大的内存块上发生了变化。

发生这种情况的原因可能是调用`mprotect`或发生非常大的内存分配或释放时 -例如`mmap`or`munmap`调用。

您列出的第一个是设置大约 320Mb 的内存，`undefined`这很可能是一个新的分配，最初将被标记为未定义。其他人都在设置类似大小的块，`noaccess`这可能与内存的释放有关。

# java - 如何在 IE 上停止 selenium click() 等待 30 秒

> ID：13558068
> 
> 赞同：1
> 
> 时间：2012-11-26T02:55:48.413
> 
> 标签：java, internet-explorer, selenium

在 java.my 代码中使用 selenium.click() 时出现 av 问题

```
public void manageLeft1(int arg[]) throws Exception{
        selenium.click("name=checkboxgame");
        for(int i=1;i<8;i++){
            //block for test
            selenium.click("xpath=(//input[@name='list'])["+i+"]");
        }
        if(arg[0]>0&&arg.length<7){
            int memberNum=arg.length;
            for(int i=0;i<memberNum;i++){
                selenium.click("xpath=(//input[@name='list'])["+arg[i]+"]");
            }
        }
    } 
```

问题是点击总是等待 30 秒，我已经尝试过 setTimeout，它不起作用。请帮忙，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:48:50.570

我建议首先检索元素，然后调用 click() 方法。

```
getDriver().findElement(By.id("name=checkboxgame")).click(); 
```

所以点击只执行，没有等待发生。另一方面，当元素不存在时，你会得到一个异常。

# sql - 用于 SQL Server 2008 的 Oracle SQL 开发人员？

> ID：13558069
> 
> 赞同：1
> 
> 时间：2012-11-26T02:55:49.040
> 
> 标签：sql, oracle, sql-server-2008, oracle-sqldeveloper

这是一个非常基本的问题。我们可以使用 Oracle SQL 开发者工具在 SQL Server 2008 数据库中开发东西吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T04:57:12.783

[http://thinkoracle.blogspot.in/2010/09/using-oracle-sql-developer-with-ms-sql.html](http://thinkoracle.blogspot.in/2010/09/using-oracle-sql-developer-with-ms-sql.html)

请通过此博客逐步了解连接到 SQL Server 数据库的过程。

希望这对你有帮助

# unit-testing - ReSharper 执行单元测试的控制顺序

> ID：13558070
> 
> 赞同：10
> 
> 时间：2012-11-26T02:55:51.390
> 
> 标签：unit-testing, resharper

有没有办法告诉 ReSharper 在其他人之前在项目中执行某组测试？我仍然想要并行执行，我不需要按方法控制它，只需按类即可。测试框架是 MSTest 如果这有所作为。

我想这样做的原因是一些测试在低级别工作并且非常快，但其他测试在更高级别工作并且速度要慢得多。我希望首先运行快速测试，因为如果它们失败了，那么我就知道有问题了，继续下去就没有意义了。但是，ReSharper 目前首先运行我的慢速测试。

**编辑：**测试对我来说不是按字母顺序运行的（VS 2010 上的 R# 7.1）。我每个班级都有一个源文件。类中的测试似乎按照方法在源代码中出现的顺序运行，但我无法弄清楚 R# 如何确定测试类的顺序。这就是我所追求的，因为慢速和快速测试在不同的课程中。这也不是按字母顺序排列的，但每次运行都是一致的。

**编辑2：**好的，想通了（见答案）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T04:10:01.530

这看起来有点像 hack，但我发现如果我从项目中删除带有慢速测试的文件并重新添加它们，它们就会最后运行。因此，R# 似乎会跟踪包含测试类的源文件的添加顺序并按该顺序运行它们。（编辑 .csproj 文件以重新排序文件没有效果，所以它似乎没有使用它。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T10:21:37.253

> 我想这样做的原因是一些测试在低级别工作并且非常快，但其他测试在更高级别工作并且速度要慢得多。

我建议几种方法：

将测试拆分为两个单独的项目。将“快速”测试放入

`YourProject.Test.Unit`

和缓慢的测试

`YourProject.Test.Integration`

集成测试通常是与其他组件（例如网络、数据库、文件系统等）交互的测试，这可能导致测试运行速度变慢。可能是您较慢的测试正在访问外部资源（我们不知道）。

或者使用@thersch 的使用类别来标记较慢测试的建议。我会使用 category 方法，因为您的测试实际上都是单元测试，因此拆分它们是没有意义的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T10:01:22.473

似乎测试执行是按字母顺序排列的......所以你可以**改变你的命名空间/类名**来匹配测试顺序。但我想这不是你的选择。

另一种选择是在“单元测试会话”窗口**中将测试添加到不同的测试会话。**将快速测试移至会话 #1，将慢速测试移至会话 #2。然后你只运行你需要的一个测试会话。

**不是一个选项**是将 TestCategory 添加到您的测试方法（即：`[TestCategory("Fast"), TestMethod]`和`[TestCategory("Slow"), TestMethod]`）并在*Unit Test Sessions*窗口中按*Categories*对您的测试进行分组。这对测试顺序**没有影响。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-18T09:34:07.733

或者，您可以创建一个测试，它按照您想要的顺序编排对其他测试的调用 - 因此该测试本身充当“会话”。

```
[TestMethod]
public void A_RunAllTests()
{
    Test1();
    Test2();
    .
    .

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-26T06:06:13.580

在解决方案资源管理器中右键单击您的 UnitTest 项目 > 添加 > 有序测试..

您无法从 Resharper 访问此有序测试，但它会显示在 VS 测试资源管理器中。将您订购的测试添加到特定的 VS 测试播放列表，并从您的 Resharper 会话/会话中删除涉及的测试。

为了节省大量样板文件，我通常将这种技术与数据库添加 > 获取 > 编辑 > 删除测试一起使用，并使用带有 [ClassCleanup] 属性的清理方法来扫描测试插入的数据库，以防其中一个测试失败。

# c++ - glGenVertexArrays 调用时程序崩溃

> ID：13558073
> 
> 赞同：13
> 
> 时间：2012-11-26T02:56:04.123
> 
> 标签：c++, opengl

我正在尝试学习如何在 opengl 中编程并正在使用[本教程](http://www.opengl-tutorial.org/)。教程 1 工作正常，教程 2 崩溃并返回 1。

它失败了：

```
GLuint VertexArrayID;
glGenVertexArrays(1, &VertexArrayID);
glBindVertexArray(VertexArrayID); 
```

具体来说：

```
glGenVertexArrays(1, &VertexArrayID); 
```

有什么建议么？与 glGenVertexArrays 调用相关但从未解决[的 OpenGL、FreeGlut 和 Glew 崩溃](https://stackoverflow.com/questions/11104047/opengl-freeglut-and-glew-crash-with-glgenvertexarrays-call)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-26T03:36:34.497

阅读此[线程](https://stackoverflow.com/questions/8302625/segmentation-fault-at-glgenvertexarrays-1-vao)后，似乎调用

```
glewExperimental = GL_TRUE; 
glewInit(); 
```

会解决问题。[在这里](http://glew.sourceforge.net/basic.html)阅读 glewExperimental ，它说

> GLEW 从图形驱动程序获取有关支持的扩展的信息。然而，实验性或预发布驱动程序可能不会通过标准机制报告每个可用的扩展，在这种情况下，GLEW 将报告它不受支持。为了规避这种情况，可以通过在调用 glewInit() 之前将 glewExperimental 全局开关设置为 GL_TRUE 来打开 glewExperimental 全局开关，这样可以确保所有具有有效入口点的扩展都将被公开。

我不太确定这对 glGenVertexArrays 有何帮助，但值得一试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-10T13:11:02.743

将您的 glew 更新到 2.0.0。这是由[这个错误](https://sourceforge.net/p/glew/bugs/124/)引起的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-13T19:46:08.837

在 nvidia GPU 和 GLEW 上使用 OpenGL 4.3 这个技巧仍然有效。

我能够使用此修复程序来运行第 8 版 4.3 第 1 章中的“我们的第一个程序：详细讨论”。

注释掉

```
glewExperimental = GL_TRUE; 
```

导致未处理的异常，所以我相当肯定这是问题所在。将其添加回代码中，程序按预期运行。

更新答案以澄清原始答案的新内容：

[1] 请注意原始答案上的日期已经超过两年，所以我验证这在较新版本的 OpenGL 中仍然适用。Web 上的 OpenGL 示例代码的一个主要问题是教程内容的老化，这些内容可能仍然有效，但不被认为是最佳实践或最高性能的路径。当我阅读原始答案时，我的想法是：

“嗯，但这已经两年了……GLEW 还没有更新，这个答案已经过时了吗？”，所以现在读者会知道，截至 2014 年 9 月 13 日，这实际上是真的。

[2] 我希望许多读者尝试制作 OpenGL 程序员指南中非常简单的第一个示例来运行，并且它不会没有这个修复。通过包括书名，我希望他们在网络搜索中找到这个答案。

[3] 我指定了平台我确信这可以澄清我没有在所有平台上测试它。

# php - 根据 id 列出自定义 wordpress 用户元

> ID：13558075
> 
> 赞同：1
> 
> 时间：2012-11-26T02:56:15.523
> 
> 标签：php, wordpress

我正在尝试从所有用户那里获取自定义元数据。我有以下代码返回没有错误。所以我不知道出了什么问题。有没有更简单的方法来遍历所有 id 并返回自定义元数据？

```
global $wpdb;
$wp_user_search = $wpdb->get_results("SELECT ID FROM $wpdb->users ORDER BY ID");

foreach ($wp_user_search as $userid) {
    $all_meta_for_user = get_user_meta($userid->id);

    $email_alert = $all_meta_for_user['email_sms'][0];

    echo $email_alert;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:51:49.667

使用常规的 WordPress 功能。

在这种情况下，[`get_users()`](http://codex.wordpress.org/Function_Reference/get_users)。

像这样：

```
$wp_user_search = get_users( 'blog_id=1&orderby=id' );

foreach ( $wp_user_search as $userid ) 
{
    $all_meta_for_user = get_user_meta($userid->ID);
    $email_alert = $all_meta_for_user['email_sms'][0];
    echo $email_alert;
} 
```

另请注意，您使用的是`$userid->id`, 而不是**`$userid->ID`**.

要检查变量的值，请使用：

*   `var_dump($userid)`
*   或者`echo '<pre>' . print_r( $all_meta_for_user, true ) . '</pre>';`

# actionscript-3 - 我怎样才能使用这样的变量？

> ID：13558076
> 
> 赞同：0
> 
> 时间：2012-11-26T02:56:16.793
> 
> 标签：actionscript-3, variables

我想用 actionscript 3 中的变量做这样的事情，你可以忽略 randomNumber 函数。这只是为了让我的问题更清楚地说明我在做什么：

```
function randomNumber(low:Number=0, high:Number=1):Number {
return Math.floor(Math.random() * (1+high-low)) + low;
}

randomNumber(1, 3)

var selection:int = randomNumber;

mymovieclip.insideclip(selection); 
```

所以我想基本上使用变量的内容来选择某个movieclip。你可以想象有多个内夹。所以像 insideclip1、insideclip2、insideclip3 这样的东西。我随机选择一个数字并将其放入一个名为 selection 的变量中，然后我想使用 mymovieclip.insideclip1、2 或 3，具体取决于该变量存储的数字。

我敢肯定有办法做到这一点，有人可以指导我弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T03:21:50.273

有很多方法可以做到这一点（也基于你想要的）。一种方法是，您可以将所有“内部剪辑”存储到一个数组中，然后选择一个随机索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:58:28.113

```
var selection:int = randomNumber(1, 3);//randomNumber(1, mymovieclip.numChildren)
var myMovie = mymovieclip.getChildByName("insideclip" + selection); 
```

或者如果你想去掉名字，你可以通过它们的深度来访问它。

```
var selection:int = randomNumber(1, mymovieclip.numChildren);
var myMovie = mymovieclip.getChildByDepth(selection); 
```

# php - phpmyadmin 初始设置生成错误

> ID：13558078
> 
> 赞同：1
> 
> 时间：2012-11-26T02:56:44.763
> 
> 标签：php, phpmyadmin, xampp

我正在尝试在我的机器上设置 phpmyadmin，在初始设置和安装 xampp 之后，我收到以下错误。我试图通过修改文件来解决这个问题很长一段时间，但`config.inc.php`没有成功。我想知道是否有人遇到过类似的问题并且可以帮助我解决这个问题？

[![](../Images/e41addd5c96f5d3157b1f1beeabdc556.png)](https://i.stack.imgur.com/q6maj.png)

**config.inc.php 文件**

```
<?php
/*
 * This is needed for cookie based authentication to encrypt password in
 * cookie
 */
$cfg['blowfish_secret'] = 'xampp'; /* YOU SHOULD CHANGE THIS FOR A MORE SECURE COOKIE AUTH! */

/*
 * Servers configuration
 */
$i = 0;

/*
 * First server
 */
$i++;

/* Authentication type and info */
$cfg['Servers'][$i]['auth_type'] = 'HTTP';
$cfg['Servers'][$i]['user'] = 'myusername';
$cfg['Servers'][$i]['password'] = '';
$cfg['Servers'][$i]['extension'] = 'mysql';
$cfg['Servers'][$i]['AllowNoPassword'] = false;
$cfg['Lang'] = '';

/* Bind to the localhost ipv4 address and tcp */
$cfg['Servers'][$i]['host'] = '127.0.0.1';
$cfg['Servers'][$i]['connect_type'] = 'tcp';

/* User for advanced features */
$cfg['Servers'][$i]['controluser'] = 'pma';
$cfg['Servers'][$i]['controlpass'] = '';

/* Advanced phpMyAdmin features */
$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';
$cfg['Servers'][$i]['bookmarktable'] = 'pma_bookmark';
$cfg['Servers'][$i]['relation'] = 'pma_relation';
$cfg['Servers'][$i]['table_info'] = 'pma_table_info';
$cfg['Servers'][$i]['table_coords'] = 'pma_table_coords';
$cfg['Servers'][$i]['pdf_pages'] = 'pma_pdf_pages';
$cfg['Servers'][$i]['column_info'] = 'pma_column_info';
$cfg['Servers'][$i]['history'] = 'pma_history';
$cfg['Servers'][$i]['designer_coords'] = 'pma_designer_coords';
$cfg['Servers'][$i]['tracking'] = 'pma_tracking';
$cfg['Servers'][$i]['userconfig'] = 'pma_userconfig';
$cfg['Servers'][$i]['recent'] = 'pma_recent';
$cfg['Servers'][$i]['table_uiprefs'] = 'pma_table_uiprefs';

/*
 * End of servers configuration
 */

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T03:28:49.590

好像您正在尝试使用高级功能，但 phpmyadmin 无法使用指定的用户/密码连接到 mysql：

```
/* User for advanced features */
$cfg['Servers'][$i]['controluser'] = 'pma';
$cfg['Servers'][$i]['controlpass'] = '';

/* Advanced phpMyAdmin features */
$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin'; 
```

在此处使用正确的 mysql 用户/密码对，或者如果您不想要高级功能，请注释掉这些行。另外，`pmadb`（`phpmyadmin`默认）下的数据库也必须存在（这个数据库的目的是存储phpmyadmin特有的数据）。如果没有，请手动创建它并确保您的 mysql 用户对其具有完全访问权限。

# python - 从 DDFS ValueError 读取数据：无法解码 JSON 对象

> ID：13558079
> 
> 赞同：2
> 
> 时间：2012-11-26T02:57:03.290
> 
> 标签：python, json, mapreduce, disco

我正在使用 disco 为多种不同的目的运行数十个 map reduce 作业。我的数据已经变得庞大，我想我会尝试使用 DDFS 进行更改，而不是使用标准的 txt 文件。

我已经按照 DISCO map/reduce example [Counting Words as a map/reduce job](http://discoproject.org/doc/disco/start/tutorial.html)进行了操作，在其他人的帮助下没有太多困难，将[JSON 特定数据读入 DISCO](https://stackoverflow.com/questions/13539141/python-map-reduce-how-do-i-read-json-specific-field-in-using-disco-count-w)我已经解决了我最近遇到的一个问题。

我正在尝试从 ddfs 中读取/读取数据以更好地分块并分发它，但遇到了一些麻烦。

这是一个示例文件：file.txt

```
{"favorited": false, "in_reply_to_user_id": null, "contributors": null, "truncated": false, "text": "I'll call him back tomorrow I guess", "created_at": "Mon Feb 13 05:34:27 +0000 2012", "retweeted": false, "in_reply_to_status_id_str": null, "coordinates": null, "in_reply_to_user_id_str": null, "entities": {"user_mentions": [], "hashtags": [], "urls": []}, "in_reply_to_status_id": null, "id_str": "168931016843603968", "place": null, "user": {"follow_request_sent": null, "profile_use_background_image": true, "profile_background_image_url_https": "https://si0.twimg.com/profile_background_images/305726905/FASHION-3.png", "verified": false, "profile_image_url_https": "https://si0.twimg.com/profile_images/1818996723/image_normal.jpg", "profile_sidebar_fill_color": "292727", "is_translator": false, "id": 113532729, "profile_text_color": "000000", "followers_count": 78, "protected": false, "location": "With My Niggas In Paris!", "default_profile_image": false, "listed_count": 0, "utc_offset": -21600, "statuses_count": 6733, "description": "Made in CHINA., Educated && Making My Own $$. Fear GOD && Put Him 1st. #TeamFollowBack #TeamiPhone\n", "friends_count": 74, "profile_link_color": "b03f3f", "profile_image_url": "http://a2.twimg.com/profile_images/1818996723/image_normal.jpg", "notifications": null, "show_all_inline_media": false, "geo_enabled": true, "profile_background_color": "1f9199", "id_str": "113532729", "profile_background_image_url": "http://a3.twimg.com/profile_background_images/305726905/FASHION-3.png", "name": "Bee'Jay", "lang": "en", "profile_background_tile": true, "favourites_count": 19, "screen_name": "OohMyBEEsNice", "url": "http://www.bitchimpaid.org", "created_at": "Fri Feb 12 03:32:54 +0000 2010", "contributors_enabled": false, "time_zone": "Central Time (US & Canada)", "profile_sidebar_border_color": "000000", "default_profile": false, "following": null}, "in_reply_to_screen_name": null, "retweet_count": 0, "geo": null, "id": 168931016843603968, "source": "<a href=\"http://twitter.com/#!/download/iphone\" rel=\"nofollow\">Twitter for iPhone</a>"}
{"favorited": false, "in_reply_to_user_id": 50940453, "contributors": null, "truncated": false, "text": "@LegaMrvica @MimozaBand makasi om artis :D kadoo kadoo", "created_at": "Mon Feb 13 05:34:27 +0000 2012", "retweeted": false, "in_reply_to_status_id_str": "168653037894770688", "coordinates": null, "in_reply_to_user_id_str": "50940453", "entities": {"user_mentions": [{"indices": [0, 11], "screen_name": "LegaMrvica", "id": 50940453, "name": "Lega_thePianis", "id_str": "50940453"}, {"indices": [12, 23], "screen_name": "MimozaBand", "id": 375128905, "name": "Mimoza", "id_str": "375128905"}], "hashtags": [], "urls": []}, "in_reply_to_status_id": 168653037894770688, "id_str": "168931016868761600", "place": null, "user": {"follow_request_sent": null, "profile_use_background_image": true, "profile_background_image_url_https": "https://si0.twimg.com/profile_background_images/347686061/Galungan_dan_Kuningan.jpg", "verified": false, "profile_image_url_https": "https://si0.twimg.com/profile_images/1803845596/Picture_20124_normal.jpg", "profile_sidebar_fill_color": "DDFFCC", "is_translator": false, "id": 48293450, "profile_text_color": "333333", "followers_count": 182, "protected": false, "location": "\u00dcT: -6.906799,107.622383", "default_profile_image": false, "listed_count": 0, "utc_offset": -28800, "statuses_count": 3052, "description": "Fashion design maranatha '11 // traditional dancer (bali) at sanggar tampak siring & Natya Nataraja", "friends_count": 206, "profile_link_color": "0084B4", "profile_image_url": "http://a3.twimg.com/profile_images/1803845596/Picture_20124_normal.jpg", "notifications": null, "show_all_inline_media": false, "geo_enabled": true, "profile_background_color": "9AE4E8", "id_str": "48293450", "profile_background_image_url": "http://a0.twimg.com/profile_background_images/347686061/Galungan_dan_Kuningan.jpg", "name": "nana afiff", "lang": "en", "profile_background_tile": true, "favourites_count": 2, "screen_name": "hasnfebria", "url": null, "created_at": "Thu Jun 18 08:50:29 +0000 2009", "contributors_enabled": false, "time_zone": "Pacific Time (US & Canada)", "profile_sidebar_border_color": "BDDCAD", "default_profile": false, "following": null}, "in_reply_to_screen_name": "LegaMrvica", "retweet_count": 0, "geo": null, "id": 168931016868761600, "source": "<a href=\"http://blackberry.com/twitter\" rel=\"nofollow\">Twitter for BlackBerry\u00ae</a>"}
{"favorited": false, "in_reply_to_user_id": 27260086, "contributors": null, "truncated": false, "text": "@justinbieber u were born to be somebody, and u're super important in beliebers' life. thanks for all biebs. I love u. follow me? 84", "created_at": "Mon Feb 13 05:34:27 +0000 2012", "retweeted": false, "in_reply_to_status_id_str": null, "coordinates": null, "in_reply_to_user_id_str": "27260086", "entities": {"user_mentions": [{"indices": [0, 13], "screen_name": "justinbieber", "id": 27260086, "name": "Justin Bieber", "id_str": "27260086"}], "hashtags": [], "urls": []}, "in_reply_to_status_id": null, "id_str": "168931016856178688", "place": null, "user": {"follow_request_sent": null, "profile_use_background_image": true, "profile_background_image_url_https": "https://si0.twimg.com/profile_background_images/416005864/Captura.JPG", "verified": false, "profile_image_url_https": "https://si0.twimg.com/profile_images/1808883280/Captura6_normal.JPG", "profile_sidebar_fill_color": "f5e7f3", "is_translator": false, "id": 406750700, "profile_text_color": "333333", "followers_count": 1122, "protected": false, "location": "Adentro de una supra.", "default_profile_image": false, "listed_count": 0, "utc_offset": -14400, "statuses_count": 20966, "description": "Mi \u00eddolo es @justinbieber , si te gusta \u00a1genial!, si no, solo respetalo. El cambi\u00f3 mi vida completamente y mi sue\u00f1o es conocerlo #TrueBelieber . ", "friends_count": 1015, "profile_link_color": "9404b8", "profile_image_url": "http://a1.twimg.com/profile_images/1808883280/Captura6_normal.JPG", "notifications": null, "show_all_inline_media": false, "geo_enabled": false, "profile_background_color": "f9fcfa", "id_str": "406750700", "profile_background_image_url": "http://a3.twimg.com/profile_background_images/416005864/Captura.JPG", "name": "neversaynever,right?", "lang": "es", "profile_background_tile": false, "favourites_count": 22, "screen_name": "True_Belieebers", "url": "http://www.wehavebieber-fever.tumblr.com", "created_at": "Mon Nov 07 04:17:40 +0000 2011", "contributors_enabled": false, "time_zone": "Santiago", "profile_sidebar_border_color": "C0DEED", "default_profile": false, "following": null}, "in_reply_to_screen_name": "justinbieber", "retweet_count": 0, "geo": null, "id": 168931016856178688, "source": "<a href=\"http://yfrog.com\" rel=\"nofollow\">Yfrog</a>"} 
```

我将其加载到 DDFS 中：

```
# ddfs chunk data:test1 ./file.txt
created: disco://localhost/ddfs/vol0/blob/44/file_txt-0$549-db27b-125e1 
```

我测试该文件确实加载到 ddfs 中：

```
# ddfs xcat data:test1
{"favorited": false, "in_reply_to_user_id": null, "contributors": null, "truncated": false, "text": "I'll call him back tomorrow I guess", "created_at": "Mon Feb 13 05:34:27 +0000 2012", "retweeted": false, "in_reply_to_status_id_str": null, "coordinates": null, "in_reply_to_user_id_str": null, "entities": {"user_mentions": [], "hashtags": [], "urls": []}, "in_reply_to_status_id": null, "id_str": "168931016843603968", "place": null, "user": {"follow_request_sent": null, "profile_use_background_image": true, "profile_background_image_url_https": "https://si0.twimg.com/profile_background_images/305726905/FASHION-3.png", "verified": false, "profile_image_url_https": "https://si0.twimg.com/profile_images/1818996723/image_normal.jpg", "profile_sidebar_fill_color": "292727", "is_translator": false, "id": 113532729, "profile_text_color": "000000", "followers_count": 78, "protected": false, "location": "With My Niggas In Paris!", "default_profile_image": false, "listed_count": 0, "utc_offset": -21600, "statuses_count": 6733, "description": "Made in CHINA., Educated && Making My Own $$. Fear GOD && Put Him 1st. #TeamFollowBack #TeamiPhone\n", "friends_count": 74, "profile_link_color": "b03f3f", "profile_image_url": "http://a2.twimg.com/profile_images/1818996723/image_normal.jpg", "notifications": null, "show_all_inline_media": false, "geo_enabled": true, "profile_background_color": "1f9199", "id_str": "113532729", "profile_background_image_url": "http://a3.twimg.com/profile_background_images/305726905/FASHION-3.png", "name": "Bee'Jay", "lang": "en", "profile_background_tile": true, "favourites_count": 19, "screen_name": "OohMyBEEsNice", "url": "http://www.bitchimpaid.org", "created_at": "Fri Feb 12 03:32:54 +0000 2010", "contributors_enabled": false, "time_zone": "Central Time (US & Canada)", "profile_sidebar_border_color": "000000", "default_profile": false, "following": null}, "in_reply_to_screen_name": null, "retweet_count": 0, "geo": null, "id": 168931016843603968, "source": "<a href=\"http://twitter.com/#!/download/iphone\" rel=\"nofollow\">Twitter for iPhone</a>"}
{"favorited": false, "in_reply_to_user_id": 50940453, "contributors": null, "truncated": false, "text": "@LegaMrvica @MimozaBand makasi om artis :D kadoo kadoo", "created_at": "Mon Feb 13 05:34:27 +0000 2012", "retweeted": false, "in_reply_to_status_id_str": "168653037894770688", "coordinates": null, "in_reply_to_user_id_str": "50940453", "entities": {"user_mentions": [{"indices": [0, 11], "screen_name": "LegaMrvica", "id": 50940453, "name": "Lega_thePianis", "id_str": "50940453"}, {"indices": [12, 23], "screen_name": "MimozaBand", "id": 375128905, "name": "Mimoza", "id_str": "375128905"}], "hashtags": [], "urls": []}, "in_reply_to_status_id": 168653037894770688, "id_str": "168931016868761600", "place": null, "user": {"follow_request_sent": null, "profile_use_background_image": true, "profile_background_image_url_https": "https://si0.twimg.com/profile_background_images/347686061/Galungan_dan_Kuningan.jpg", "verified": false, "profile_image_url_https": "https://si0.twimg.com/profile_images/1803845596/Picture_20124_normal.jpg", "profile_sidebar_fill_color": "DDFFCC", "is_translator": false, "id": 48293450, "profile_text_color": "333333", "followers_count": 182, "protected": false, "location": "\u00dcT: -6.906799,107.622383", "default_profile_image": false, "listed_count": 0, "utc_offset": -28800, "statuses_count": 3052, "description": "Fashion design maranatha '11 // traditional dancer (bali) at sanggar tampak siring & Natya Nataraja", "friends_count": 206, "profile_link_color": "0084B4", "profile_image_url": "http://a3.twimg.com/profile_images/1803845596/Picture_20124_normal.jpg", "notifications": null, "show_all_inline_media": false, "geo_enabled": true, "profile_background_color": "9AE4E8", "id_str": "48293450", "profile_background_image_url": "http://a0.twimg.com/profile_background_images/347686061/Galungan_dan_Kuningan.jpg", "name": "nana afiff", "lang": "en", "profile_background_tile": true, "favourites_count": 2, "screen_name": "hasnfebria", "url": null, "created_at": "Thu Jun 18 08:50:29 +0000 2009", "contributors_enabled": false, "time_zone": "Pacific Time (US & Canada)", "profile_sidebar_border_color": "BDDCAD", "default_profile": false, "following": null}, "in_reply_to_screen_name": "LegaMrvica", "retweet_count": 0, "geo": null, "id": 168931016868761600, "source": "<a href=\"http://blackberry.com/twitter\" rel=\"nofollow\">Twitter for BlackBerry\u00ae</a>"}
{"favorited": false, "in_reply_to_user_id": 27260086, "contributors": null, "truncated": false, "text": "@justinbieber u were born to be somebody, and u're super important in beliebers' life. thanks for all biebs. I love u. follow me? 84", "created_at": "Mon Feb 13 05:34:27 +0000 2012", "retweeted": false, "in_reply_to_status_id_str": null, "coordinates": null, "in_reply_to_user_id_str": "27260086", "entities": {"user_mentions": [{"indices": [0, 13], "screen_name": "justinbieber", "id": 27260086, "name": "Justin Bieber", "id_str": "27260086"}], "hashtags": [], "urls": []}, "in_reply_to_status_id": null, "id_str": "168931016856178688", "place": null, "user": {"follow_request_sent": null, "profile_use_background_image": true, "profile_background_image_url_https": "https://si0.twimg.com/profile_background_images/416005864/Captura.JPG", "verified": false, "profile_image_url_https": "https://si0.twimg.com/profile_images/1808883280/Captura6_normal.JPG", "profile_sidebar_fill_color": "f5e7f3", "is_translator": false, "id": 406750700, "profile_text_color": "333333", "followers_count": 1122, "protected": false, "location": "Adentro de una supra.", "default_profile_image": false, "listed_count": 0, "utc_offset": -14400, "statuses_count": 20966, "description": "Mi \u00eddolo es @justinbieber , si te gusta \u00a1genial!, si no, solo respetalo. El cambi\u00f3 mi vida completamente y mi sue\u00f1o es conocerlo #TrueBelieber . ", "friends_count": 1015, "profile_link_color": "9404b8", "profile_image_url": "http://a1.twimg.com/profile_images/1808883280/Captura6_normal.JPG", "notifications": null, "show_all_inline_media": false, "geo_enabled": false, "profile_background_color": "f9fcfa", "id_str": "406750700", "profile_background_image_url": "http://a3.twimg.com/profile_background_images/416005864/Captura.JPG", "name": "neversaynever,right?", "lang": "es", "profile_background_tile": false, "favourites_count": 22, "screen_name": "True_Belieebers", "url": "http://www.wehavebieber-fever.tumblr.com", "created_at": "Mon Nov 07 04:17:40 +0000 2011", "contributors_enabled": false, "time_zone": "Santiago", "profile_sidebar_border_color": "C0DEED", "default_profile": false, "following": null}, "in_reply_to_screen_name": "justinbieber", "retweet_count": 0, "geo": null, "id": 168931016856178688, "source": "<a href=\"http://yfrog.com\" rel=\"nofollow\">Yfrog</a> 
```

此时一切都很好，我加载了以前的 Stack Post 生成的脚本：

```
from disco.core import Job, result_iterator
import gzip

def map(line, params):
    import unicodedata
    import json
    r = json.loads(line).get('text')
    s = unicodedata.normalize('NFD', r).encode('ascii', 'ignore')
    for word in s.split():
        yield word, 1

def reduce(iter, params):
    from disco.util import kvgroup
    for word, counts in kvgroup(sorted(iter)):
        yield word, sum(counts)

if __name__ == '__main__':
    job = Job().run(input=["tag://data:test1"],
                    map=map,
                    reduce=reduce)
    for word, count in result_iterator(job.wait(show=True)):
        print word, count 
```

**注意：**如果 ，此脚本运行文件`input=["file.txt"]`，但是当我运行它时，`"tag://data:test1"`我收到以下错误：

```
 # DISCO_EVENTS=1 python count_normal_words.py
Job@549:db30e:25bd8:
Status: [map] 0 waiting, 1 running, 0 done, 0 failed
2012/11/25 21:43:26  master     New job initialized!
2012/11/25 21:43:26  master     Starting job
2012/11/25 21:43:26  master     Starting map phase
2012/11/25 21:43:26  master     map:0 assigned to solice
2012/11/25 21:43:26  master     ERROR: Job failed: Worker at 'solice' died: Traceback (most recent call last):
  File "/home/DISCO/data/solice/01/Job@549:db30e:25bd8/usr/local/lib/python2.7/site-packages/disco/worker/__init__.py", line 329, in main                                                                                                                     
    job.worker.start(task, job, **jobargs)                                                                                     
  File "/home/DISCO/data/solice/01/Job@549:db30e:25bd8/usr/local/lib/python2.7/site-packages/disco/worker/__init__.py", line 290, in start                                                                                                                    
    self.run(task, job, **jobargs)                                                                                             
  File "/home/DISCO/data/solice/01/Job@549:db30e:25bd8/usr/local/lib/python2.7/site-packages/disco/worker/classic/worker.py", line 286, in run                                                                                                                
    getattr(self, task.mode)(task, params)                                                                                     
  File "/home/DISCO/data/solice/01/Job@549:db30e:25bd8/usr/local/lib/python2.7/site-packages/disco/worker/classic/worker.py", line 299, in map                                                                                                                
    for key, val in self['map'](entry, params):                                                                                
  File "count_normal_words.py", line 12, in map                                                                                
  File "/usr/lib64/python2.7/json/__init__.py", line 326, in loads                                                             
    return _default_decoder.decode(s)                                                                                          
  File "/usr/lib64/python2.7/json/decoder.py", line 366, in decode                                                             
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())                                                                          
  File "/usr/lib64/python2.7/json/decoder.py", line 384, in raw_decode                                                         
    raise ValueError("No JSON object could be decoded")                                                                        
ValueError: No JSON object could be decoded                                                                                    

2012/11/25 21:43:26  master     WARN: Job killed
Status: [map] 1 waiting, 0 running, 0 done, 1 failed
Traceback (most recent call last):
  File "count_normal_words.py", line 28, in <module>
    for word, count in result_iterator(job.wait(show=True)):
  File "/usr/local/lib/python2.7/site-packages/disco/core.py", line 348, in wait
    timeout, poll_interval * 1000)
  File "/usr/local/lib/python2.7/site-packages/disco/core.py", line 309, in check_results
    raise JobError(Job(name=jobname, master=self), "Status %s" % status)
disco.error.JobError: Job Job@549:db30e:25bd8 failed: Status dead 
```

错误状态：`ValueError: No JSON object could be decoded`。同样，使用文本文件作为输入但现在使用 DDFS 可以正常工作。

有什么想法，我愿意接受建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:00:44.733

加载到 DDFS 时数据似乎不完整。加载的最后一行没有 } 作为最后一个字符。因此，这项工作失败了。我想我需要尝试继续处理非 JSON 行。

# php - 一个关于连接的 PHP MySQL 查询

> ID：13558080
> 
> 赞同：1
> 
> 时间：2012-11-26T02:57:06.663
> 
> 标签：php, mysql, sql

我有一个新手 PHP MySQL 问题，我有 2 个表、成员和消息。

表“成员”

```
+-----------+------+
| MEMBER_ID | NAME |
+-----------+------+
|         1 | Bob  |
|         2 | Ted  |
|         3 | Tom  |
+-----------+------+ 
```

表“消息”

```
+----+------------+--------------+--------------------+
| ID | SENDERS_ID | RECEIVERS_ID |      MESSAGE       |
+----+------------+--------------+--------------------+
|  1 |          1 |            3 | Hello Tom from Bob |
|  2 |          2 |            3 | Hello Tom from Ted |
|  3 |          2 |            1 | Hello Bob from Ted |
+----+------------+--------------+--------------------+ 
```

我想查询汤姆只有他的**members.member_id**可用才能获取他的所有消息以及发件人的姓名，如下所示：

```
+------+--------------------+
| name |      message       |
+------+--------------------+
| Bob  | Hello Tom from Bob |
| Ted  | Hello Tom from Ted |
+------+--------------------+ 
```

我已经阅读了一些连接示例，但知道如何将它们实现到 MySQL 语句中。

我可以轻松获得 Tom 的 member_id，但不知道如何继续。我也想在数组中返回结果。

```
 public function getMessages($member_id) {

  $result = mysql_query("SELECT member_id FROM members WHERE member_id = '$member_id'") or die(mysql_error());
    $no_of_rows = mysql_num_rows($result);
    if ($no_of_rows > 0) {
        $result = mysql_fetch_array($result); 
        $receivers_id = $result['member_id'];
        .
        // What can I do here to get the $result that I want?
        .
    }
    $no_of_rows = mysql_num_rows($result);
    if ($no_of_rows > 0) {
        $results = array();
        while(list($results) = mysql_fetch_array($result)) {
            array_push($results, $result);
        } 
        return $results;
    }
} 
```

任何帮助将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T03:04:17.133

```
SELECT  c.name,
        b.message
FROM    members a
        INNER JOIN  messages b
            ON a.member_ID = b.receivers_id
        INNER JOIN members c
            ON b.senders_ID = c.member_ID
WHERE   a.name = 'Tom' 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/24e39/1)

# c++ - 返回数组中最小元素的索引

> ID：13558081
> 
> 赞同：7
> 
> 时间：2012-11-26T02:57:53.007
> 
> 标签：c++, arrays, indexing

我正在尝试返回整数数组中具有最小元素的索引。我错过了什么吗？将整数放入后，它不会返回索引。

更新：最后我收到一个`int main()`关于数组堆栈被损坏的错误。谢谢你。我的代码如下：

```
#include <iostream>
#include <conio.h>

using namespace std;

int indexofSmallestElement(double array[], int size);

int main()
{    
int size = 10; 
double array[10];

for (int i = 0; i <= size; i++)
{
    cout << "Enter an integer: " << endl;
    cin >> array[i];
}

indexofSmallestElement(array, size);
}

int indexofSmallestElement(double array[], int size)
{
int index = 0;

if (size != 1)
{

    int n = array[0];
    for (int i = 1; i < size; i++)
    {
        if (array[i] < n)
        {
            n = array[i];
            index = i;
        }
    }
}
return index;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-26T03:16:53.020

许多人向您展示了他们的`indexofSmallestElement`. 我将包括我的解释以及*为什么*我认为它更好：

```
int indexofSmallestElement(double array[], int size)
{
    int index = 0;

    for(int i = 1; i < size; i++)
    {
        if(array[i] < array[index])
            index = i;              
    }

    return index;
} 
```

你会注意到我取消了`n`变量，你用来保存迄今为止遇到的最小值。我这样做是因为，根据我的经验，必须保持两个不同的东西同步可能是微妙错误的来源。即使在这种简单的情况下，它也是*多个*错误的根源，其中最重要的是您`n`被声明为 an`int`但您在其中分配了 type`double`的值。

**底线**：去掉`n`变量，只跟踪一件事：索引。

* * *

**更新**：当然，不用说，对于 C++17 ，这个问题*唯一*真正可以接受的答案是使用[`std::min_element`](https://en.cppreference.com/w/cpp/algorithm/min_element)：

```
#include <iostream>
#include <algorithm>
#include <iterator>
#include <cstdint>
#include <array>
#include <vector>

template <typename Iter>
auto indexofSmallestElement(Iter first, Iter last)
{
    return std::distance(first,
        std::min_element(first, last));
}

template <typename T, std::size_t N>
auto indexofSmallestElement(std::array<T, N> arr)
{
    return std::distance(std::begin(arr),
        std::min_element(std::begin(arr), std::end(arr)));
}

template <typename T>
auto indexofSmallestElement(std::vector<T> vec)
{
    return std::distance(std::begin(vec),
        std::min_element(std::begin(vec), std::end(vec)));
}

int main(int, char **)
{
    int arr[10] = { 7, 3, 4, 2, 0, 1, 9, 5, 6, 8 };

    auto x = indexofSmallestElement(std::begin(arr), std::end(arr));

    std::cout
        << "The smallest element in 'arr' is at index "
        << x << ": " << arr[x] << "\n";

    std::array<float, 5> fa { 0.0, 2.1, -1.7, 3.3, -4.2 };

    auto y = indexofSmallestElement(fa);

    std::cout
        << "The smallest element in 'fa' is at index "
        << y << ": " << fa[y] << "\n";

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T03:02:36.400

它应该`n = array[0]`代替`array[0] = n`. 这意味着您假设数组的第一个元素在开始时是最小的，然后将其与其他元素进行比较。

此外，在您的循环中，您超出了数组的范围。for 循环应该运行 until`i < size`而不是`i <= size`。

你的代码应该是这样的..

```
int indexofSmallestElement(double array[], int size)
{
  int index = 0 ;
  double n = array[0] ;
  for (int i = 1; i < size; ++i)
  {
    if (array[i] < n)
    {
        n = array[i] ;
        index = i ;
    }
  }
 return index;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T03:01:27.840

在循环内使用 array[i] 和 index = i。大小是界限:)

# android - 在另一个类的 ProgressBar 上设置进度

> ID：13558082
> 
> 赞同：3
> 
> 时间：2012-11-26T02:58:05.953
> 
> 标签：android, nullpointerexception, android-fragments, progress-bar, android-tabs

我有一个`MainActivity`有两个标签的`ActionBar`. 我对该活动的主要布局是一个空的`FrameLayout`. 第一个选项卡包含一个`ProgressBar`，第二个选项卡`Button`开始下载文件。这是`SettingsTab`：

```
public class SettingsTab extends Fragment {
    private Button downloadButton;
    private ImagesTab imagesTab;
    private static String fileDir = "sdcard/AndroidCourse/";
    public void downloadImages(String url,int limit,String imageExtension)
    {

        try {
            StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
            .detectAll()
            .build());
            Document doc = Jsoup.connect(url).get();
            StringBuilder sb = new StringBuilder("img[src$=.");
            sb.append(imageExtension);
            sb.append("]");
            Elements images = doc.select(sb.toString());
            ArrayList<String> urls = new ArrayList<String>();
            for(Element image : images) {
                if(urls.size() == limit) {  
                    break;
                }
                urls.add(image.attr("src"));
            }
            Log.e("urls", String.valueOf(urls.size()));
            imagesTab.downloadStarted(urls);

        } catch (IOException e) {
            Log.e("SettingsTab", e.getMessage());
        }
    }
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.settings_tab, null);
        downloadButton = (Button) view.findViewById(R.id.startButton);
        imagesTab = new ImagesTab();
        downloadButton.setOnClickListener( new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                downloadImages("http://www.google.com",5,"jpg");

            }

        });
        return view;

    }
} 
```

和`ImagesTab`：

```
public class ImagesTab extends Fragment {
    ProgressBar downloadProgressBar;
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.images_tab, null);
        downloadProgressBar = (ProgressBar) view.findViewById(R.id.downloadProgressBar);
        //downloadProgressBar.setVisibility(View.INVISIBLE);

        return view;

    }
    public void downloadStarted(ArrayList<String> urls)
    {
        //downloadProgressBar.setVisibility(View.VISIBLE);
        Intent intent = new Intent(getActivity(), DownloadService.class);
        intent.putExtra("urls", urls);
        intent.putExtra("receiver", new DownloadReceiver(new Handler()));
        getActivity().startService(intent);
        Toast.makeText(getActivity(), "Service started!" + urls.size(), Toast.LENGTH_SHORT).show();
    }
    private class DownloadReceiver extends ResultReceiver{
        public DownloadReceiver(Handler handler) {
            super(handler);
        }

        @Override
        protected void onReceiveResult(int resultCode, Bundle resultData) {
            super.onReceiveResult(resultCode, resultData);
            if (resultCode == DownloadService.UPDATE_PROGRESS) {
                int progress = resultData.getInt("progress");
                downloadProgressBar.setProgress(progress);
                if (progress == 100) {
                    downloadProgressBar.setVisibility(View.INVISIBLE);
                }
            }
        }
    }
} 
```

当我单击*StartDownload* `Button`时，应用程序崩溃并出现以下异常：

```
11-26 03:55:55.765: E/AndroidRuntime(21200): FATAL EXCEPTION: main
11-26 03:55:55.765: E/AndroidRuntime(21200): java.lang.NullPointerException
11-26 03:55:55.765: E/AndroidRuntime(21200):    at android.content.ComponentName.<init>(ComponentName.java:75)
11-26 03:55:55.765: E/AndroidRuntime(21200):    at android.content.Intent.<init>(Intent.java:3227)
11-26 03:55:55.765: E/AndroidRuntime(21200):    at com.example.lista2.ImagesTab.downloadStarted(ImagesTab.java:32)
11-26 03:55:55.765: E/AndroidRuntime(21200):    at com.example.lista2.SettingsTab.downloadImages(SettingsTab.java:55)
11-26 03:55:55.765: E/AndroidRuntime(21200):    at com.example.lista2.SettingsTab$1.onClick(SettingsTab.java:72) 
```

有谁知道如何更改`ProgressBar`应用程序不同部分的进度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:08:27.937

您的代码中的主要问题，其原因`NullPointerException`是行：

```
imagesTab = new ImagesTab(); 
```

你在哪里实例化一个新的`ImagesTab` `Fragment`. 问题是这个新`Fragment`实例没有绑定到一个`Activity`（它在“空中”），所以它的`getActivity()`方法返回`null`. 此`null`值来自`getActivity()`您传递给`Intent`您在方法中构建的`downloadStarted()`方法，该方法将抛出`NulPointerException`. 与其实例化您所做的那样，您应该通过使用并根据其标签搜索片段来`ImgesTab`获取对已经（很可能）在父活动中的另一个片段的引用。`getFragmentManager()`

其次，更新`ProgressBar`似乎更像是一个应用程序设计问题。例如，为什么您`Button`在一个选项卡中开始下载，而`ProgressBar`在另一个选项卡中显示下载进度？此外，您似乎使用 a进行下载，因此您应该真正使下载文件的选项卡和所需的选项卡片段（带有）进行通信`Service`，而不是使选项卡进行通信。这可以通过在某些下载级别进行发送广播并让您的（包含两个选项卡片段）动态注册一个. 当发送广播时（例如在 10%），'s将接收它（如果它还活着），然后它会更新`Service``ProgressBar``Service``Activity``BroadcastReceiver``Service``Activity``BroadcastReceiver``ProgressBar``Fragment`如果`Fragment`在那一刻可见，则从所需的。

# android - “销毁”一个 DragShadowBuilder

> ID：13558086
> 
> 赞同：0
> 
> 时间：2012-11-26T02:58:17.267
> 
> 标签：android, user-interface, drag-and-drop

我正在制作一个具有拖放功能的应用程序。基本上发生的是您可以通过拖放将视图从一个容器移动到另一个容器。但是，当我以编程方式重置视图的位置时，在拖放过程中创建的 DragShadowBuilder 会保留它们的位置并且仍然可见。

如何“销毁”或停用 DragShadowBuilder？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:04:25.843

您可能会考虑尝试使用[View](http://developer.android.com/reference/android/view/View.html#invalidate%28%29)`invalidate()`中的函数来强制重绘包含拖动视图及其阴影的视图。如果拖动结束，则不应重绘阴影。

# java - 如何使用 java efflux 库

> ID：13558089
> 
> 赞同：4
> 
> 时间：2012-11-26T02:58:37.263
> 
> 标签：java, rtsp, rtp

最近我在[https://github.com/jonbo372/efflux](https://github.com/jonbo372/efflux)上找到了一个 RTP/RTSP 库。我想学习和使用该项目，但我无法获得任何示例或手册。谁能提供这些材料？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:47:25.873

我无法让它工作，但我*认为*它一定是这样的：

```
String server = "example.com";  // you need to set this
long ssrc = 0; // you need to set this
String sessionid = "???"; // you need to set this
int server_data_port = 0; // you need to set this
int server_ctrl_port = 0; // you need to set this
int my_data_port = 8000; // you can pick this
int my_ctrl_port = 8001; // you can pick this
int payloadType = 0;    // set from RTP spec.  I want to send H.264 but don't see a number for that.  http://www.iana.org/assignments/rtp-parameters/rtp-parameters.xml

RtpParticipant pThem = RtpParticipant.createReceiver(server, server_data_port, server_ctrl_port);
pThem.getInfo().setSsrc(ssrc);

RtpParticipant pMe = RtpParticipant.createReceiver("0.0.0.0", my_data_port, my_ctrl_port);
pMe.getInfo().setSsrc(ssrc); // I guess both have the same ssrc?

RtpSession session = new SingleParticipantSession(sessionid, payloadType, pMe, pThem);

session.addDataListener(new RtpSessionDataListener() {
    @Override
    public void dataPacketReceived(RtpSession session, RtpParticipantInfo participant, DataPacket packet) {
             // Do something with the data
        }});

session.init(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T03:11:25.390

没有一个似乎很容易获得。您可以尝试查看[此处](https://github.com/jonbo372/efflux/tree/master/src/test/java/com/biasedbit/efflux)的测试，以了解使用情况。

# c - DDS 插值 - 8 位 Atmel AVR ASM 到 12 位 DAC

> ID：13558090
> 
> 赞同：5
> 
> 时间：2012-11-26T02:58:51.507
> 
> 标签：c, assembly, embedded, microcontroller, avr

我刚刚在使用 ASM 的 Atmel AVR 上完成了一个 DDS 项目，得出的结论是 8 位查找表和 8 位 DAC 在低频下会产生过多的量化失真；由于缺乏更好的措辞，我在示波器上得到了一个带有梯形效果的正弦波。

显然，如果我用大 LPF 平滑波形，我会遇到更高频率的振幅问题。

从理论上讲，从 8 位 DAC 升级到 12 位 DAC 并使用 4 个最低有效位的插值应该允许我将滤波器的截止点提高到足够显着的量，以缓解较高频率下的波形幅度问题。我的问题是我不知道如何做到这一点，或者是否有更简单的方法来消除拉链效果。也许是 12 位查找表？

到目前为止，我已经创建了一个无限循环，每次循环完成一个循环时，都会根据与查找表相关的指针的位置向 DAC 发送一个值。这就是我感到困惑的地方。我已经阅读了大量关于此的信息，但仍然没有找到一个可行的例子。如果我有一个无限循环，我应该如何在表查找值之间填充插值？关于我能想到的最好的事情是 (a + b) /2; 我可能可以实现这一点并获得额外的位或相当于 512 点查找表，但我想认为有一种更简单的方法或可能提供更好结果的方法。我不知道 C 或如何使用它，但如果它是谨慎的，我会试一试。

目前，我的时钟是 1MHZ，如果有必要我可能会转到 16MHZ。

这是我的代码示例：

; 将正弦波输出设置为默认值

```
 ldi     ZH, High(sine*2); setup Z pointer hi
    ldi     ZL, Low(sine*2) ; setup Z pointer lo 
```

; 清除蓄能器

```
 clr     r29             ; clear accumulator 
```

; 设置加法器寄存器

```
 ldi     r24,0x50        ; Fine adder value change register
    ldi     r25,0x08        ; Middle adder value change register
    ldi     r26,0x00        ; Coarse adder value change register 
```

循环1：

```
 add     r28,r24         ; 1  Adder values carry over to higher registers.  Higher registers raise freq. in larger steps 
    adc     r29,r25         ; 1
    adc     r30,r26         ; 1  r30 is database address pointer for Z register
    lpm     r0, Z           ; 3  (Load Program Memory) Reads byte from database into the destination register based on Z pointer
    out     PORTD,r0

    rjmp    LOOP1           ; 2 => 9 cycles 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:56:19.010

如果您的 LUT 有 256 个条目，您可以首先使用寄存器 r29（显然从 0 到 255）作为两个连续样本之间的比例因子。

`Output = (LUT[r30] * (256 - r29) + LUT[r30+1] * r29) >> 8;`

[此线程还](https://stackoverflow.com/questions/13466623/how-to-look-up-sine-of-different-frequencies-from-a-fixed-sized-lookup-table)讨论了正弦波生成的许多实用替代方案。

**编辑**公式实现教科书线性插值

```
y = a*(1-t) + b*t, with 0<=t<1 
```

所以 y=a，当 t=0 和 y=b，当 t=1。移位 8 表示插值项*t*在乘法后除以 256。在表达式 LUT[r30+1] 中，我假设隐式模 256 算术，因为 r30 是 8 位（不是吗？）。

LUT 扩展到 12 位必须单独完成，因为除以 4 只会增加 LUT 中的量化误差。

![在此处输入图像描述](../Images/e6f744d086a7ecb72fd11c86f39c8662.png)

插值总是相对于 LUT 中的整数索引发生，无论是否有许多样本落入相同的范围，例如。LUT [2](https://i.stack.imgur.com/yVkmK.gif)和 LUT[3]。数学上 Lut[R], LUT[R+1] 比 [R-1], [R] 更正确，但在现实生活中没有区别，因为人类的听觉系统没有绝对参考相位。

# php - PHP PDO：为什么我的代码不能插入具有不同值的多行？

> ID：13558093
> 
> 赞同：2
> 
> 时间：2012-11-26T02:59:10.087
> 
> 标签：php, mysql, pdo, rows

我尝试插入具有不同值的多行，但我不知道为什么不起作用

```
$id_poliza = $this->dbConnect->lastInsertId(); //With this, I save last insert id from last executed sql statement.

if($this->dataNewPoliza['d724'] == 'on')
    $disp1 = 1;
else
    $disp1 = 0;
if($this->dataNewPoliza['d58'] == 'on')
    $disp2 = 1;
else
    $disp2 = 0;
if(($this->dataNewPoliza['especial']) == '')
    $disp3 = 0;
else
    $disp3 = $this->dataNewPoliza['especial'];

if(($this->dataNewPoliza['ticket']) == '')
    $disp4 = 0;
else
    $disp4 = $this->dataNewPoliza['ticket'];

$sqlDispPol = "INSERT INTO disponibilidad_poliza (Id_Poliza, Id_Disponibilidad, Valor)
    VALUES (:idP,:idD1,:val1), 
           (:idP,:idD2,:val2), 
           (:idP,:idD3,:val3),
           (:idP,:idD4,:val4)";
$resultDisp = $this->dbConnect->prepare($sqlDispPol) or die ($sqlDispPol);

$resultDisp->bindParam(':idP',$id_poliza,PDO::PARAM_INT);

$resultDisp->bindParam(':idD1',1,PDO::PARAM_INT);
$resultDisp->bindParam(':val1',$disp1,PDO::PARAM_STR);

$resultDisp->bindParam(':idD2',2,PDO::PARAM_INT);
$resultDisp->bindParam(':val2',$disp2,PDO::PARAM_STR);

$resultDisp->bindParam(':idD3',3,PDO::PARAM_INT);
$resultDisp->bindParam(':val3',$disp3,PDO::PARAM_STR);

$resultDisp->bindParam(':idD4',4,PDO::PARAM_INT);
$resultDisp->bindParam(':val4',$disp4,PDO::PARAM_STR);

if($resultDisp->execute()) {
         //more code
    } 
```

我想从此表格中保存：

**表 disponibilidad_poliza**

```
Id_Poliza     Id_Disponibilidad   Valor
________________________________________
   1                1               1
   1                2               0
   1                3               especial10
   1                4               7

Note: $disp1 and $disp2 are checkboxes, $disp3 and $disp4 are inputs text 
```

也许这种方式是不正确的，我很感激如果你用另一种方式来做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:06:48.000

使用 bindValue() 而不是 bindParam()。它采用相同的参数，但适用于原始整数和其他标量。方法 bindParam() 需要明确地绑定一个参数，并从我看到你所做的事情中绑定你不需要使用它。

# c++ - 类定义和初始化中的静态 const int

> ID：13558094
> 
> 赞同：3
> 
> 时间：2012-11-26T02:59:16.813
> 
> 标签：c++, static, initialization, constants, definition

> 如果（且仅当）您以需要将其作为对象存储在内存中的方式使用初始化成员，则该成员必须（唯一）在某处定义。
> 
> 来自“C++ 编程语言”

我有一堂课

```
class Bingo{
      std::string name;
    public:
      Bingo(){}
      int i;
      static const int i89=89;
}; 
```

而且我不需要像这样的定义：

```
const int Bingo::i89; 
```

这被描述为必要的。因此，我显然不明白。你能解释一下那句话的意思吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T03:32:06.180

当您在类中定义一个成员时，它被称为**In-class Initialization**。

请注意，编译器可以将此类成员视为编译时常量，因为它知道该值不会随时更改，因此它可以应用自己的优化魔法并简单地内联此类成员，即它们不再存储在内存中。由于它们不存储在内存中，因此无法获取此类成员的地址。反之亦然。

上述内容来自 Bjarne 的基本原理，即每个 C++ 对象都需要唯一的定义，因此每个对象都需要存储在内存中，以便它们可以具有唯一的地址并被唯一标识。

因此引用，

> 如果（且仅当）您以需要将其作为对象存储在内存中的方式使用初始化成员，则该成员必须（唯一）在某处定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T03:04:49.737

据我记得，当静态变量在您的类中定义时，您需要 :: 来访问它

# php - 对所有用户使用相同的 MySQL 查询，而无需重新连接到数据库

> ID：13558098
> 
> 赞同：6
> 
> 时间：2012-11-26T02:59:41.910
> 
> 标签：php, mysql, caching, query-cache

我会尽量简单，所以我需要的是，执行一个 MySQL 查询（从表中选择记录），假设我每 5 分钟使用 cron 作业或其他任何方式生成查询，并将此查询或结果保存到文件或如果可能的话，一个全局变量，然后将它提供给所有客户端（即对所有用户使用相同的查询，而不必重新连接到该数据库。）现在我知道你们中的一些人会告诉我使用缓存，但我搜索了它，如果表发生变化，就会有新的缓存，而且我的表在不断变化，现在我不在乎表是否发生了变化，我只想为所有客户端提供相同的查询。那可能吗？请提出您的建议。谢谢。

当表被修改（插入、更新、删除等）时，缓存会自动过期。而且我的表是不断变化的，所以即使表被修改了也能保存缓存吗？还是我应该寻找不同的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:34:06.267

如果结果集不是太大，您可以将其缓存到生成的脚本中，如下所示：

```
file_put_contents(
    'mycache.php', 
    '<?php return ' . var_export($results, true) . ' ?>'
); 
```

然后使用它：

```
$results = include 'mycache.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:21:20.687

如果您总是使用相同的方式（函数、类）来执行数据库读取和写入，
您总是可以在每个操作之后放置一个缓存过期

例如：

```
function add() // update, delete
{
  if (added) $this->expire_cache();
}

function search()
{
  if (results) $this->set_cache(results);
}

function expire_cache()
{
  // do expire or purge cache
}

function set_cache( $db_results )
{
  // saving the database result OR computed result into cache
  // memcache, redis, disk cache or anything
} 
```

但是，拥有缓存的目的是为请求提供服务，而不必像数据库查询那样获取昂贵的资源，
但是如果您需要非常频繁地更新，那么缓存实现就没那么有用了

内存缓存示例： http: [//php.net/manual/en/book.memcache.php](http://php.net/manual/en/book.memcache.php)

您需要编译 memcache 模块，设置和启动 memcache 服务器才能使用 memcache

# ios - 在 XMPP 和 django 之间同步用户

> ID：13558102
> 
> 赞同：1
> 
> 时间：2012-11-26T03:00:21.443
> 
> 标签：ios, django, xmpp, user-profile

我正在创建一个使用 django 作为后端的 iOS 应用程序。我需要在用户之间建立聊天功能。

听说XMPP很适合实时通信，我已经成功设置ejabberd作为XMPP服务器。但是我仍然很难处理细节：
我先创建了应用程序，然后创建了聊天功能，所以在我设置 ejabberd 之前，我的 django DB 中已经有用户了。我需要 ejabberd 针对我现有的数据库对用户进行身份验证，我几乎通过使用外部身份验证解决了这个问题。只有一个小问题，因为 ejabberd 似乎需要像*username@abc.com*这样的 jabber ID ，这里是*abc*表示 ejabberd 的虚拟主机。我不知道也许我只能在我的服务器上使用一个虚拟主机（即域名）？但是一开始我要求用户使用来自不同域的电子邮件进行注册，例如 gmail.com、yahoo.com，但*username@gmail.com@abc.com*不是有效的 jabber ID，所以也许是一个我可以在这里做的小技巧是将第一个 @ 转换为 # 并在后端的 python 脚本中正确处理它。但也许我做错了？

另一个问题是关于用户资料。我还将用户信息存储在我的 django 数据库中，例如显示名称、头像 url 等。我了解到，如果我想从 XMPP 服务器获取这些信息，我可以使用 vCard 模块。所以也许我需要在两个地方有重复的信息？而且我还没有弄清楚如何将用户信息从 DB 同步到 ejabberd。或者也许我只需要一个来源，即我的数据库，然后 iOS 客户端可以在需要时从后端查询信息？

我觉得 XMPP 不容易设置，在你的应用程序中使用它真的很流行吗？特别是如果聊天不是您的应用程序的主要功能，并且您不希望收到来自大量用户的大量消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:52:35.640

你写了：

> 但 username@gmail.com@abc.com 不是有效的 jabber ID

您应该转义用户 ID（即“username@gmail”）。

[XEP 106](http://xmpp.org/extensions/xep-0106.html#escaping)解释了如何转义 JID 的节点部分。

在 python 中，它看起来像这样：

```
def escape_node(node):
    """ """
    node.strip()
    node = node.replace('\\', "\\5c")
    node = node.replace(' ',  "\\20")
    node = node.replace('\"', "\\22")
    node = node.replace('\&', "\\26")
    node = node.replace('\'', "\\27")
    node = node.replace('\/', "\\2f")
    node = node.replace(':',  "\\3a")
    node = node.replace('<',  "\\3c")
    node = node.replace('>',  "\\3e")
    node = node.replace('@',  "\\40")
    return node 
```

关于在 Django 中存储用户的详细信息。当您在 XMPP 中注册 Django 用户时，只需确保您还为他们注册了有效的 vCard。

当 Django 用户更改他的详细信息时，也要更新 vCard。

# css - 停止 jQuery Mobile 样式覆盖我的样式？

> ID：13558103
> 
> 赞同：1
> 
> 时间：2012-11-26T03:00:21.433
> 
> 标签：css, jquery-mobile

我有一个使用自己的样式的菜单，但 jQuery Mobile css 不断覆盖我的菜单样式。我希望他们将那里的样式限制为 ui-body。有没有办法防止 jQuery Mobile css 覆盖我的菜单样式？我尝试在 jQuery Mobile 包含链接之前和之后移动我的样式，但没有帮助。也试过data-role="none"，没有帮助。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-24T18:43:04.713

尝试使用 !important 来阻止 JQ Mobile 覆盖您的样式。

前任：

```
font-weight:normal !important; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T03:53:48.683

好的，如果您提供示例代码会有所帮助，但我假设正在发生以下情况。

示例 html：

```
<div class="my-menu">
    <ul class="menu">
        <li><a href="#"></li>
        <li><a href="#"></li>
        <li><a href="#"></li>
    </ul>
</div> 
```

jQuery mobile 可能有一个类集如下：

```
<style>
    a {color:blue;}
</style> 
```

要覆盖它，您需要更具体地使用您的类：

```
<style>
    div.my-menu ul li a {color:red;}
</style> 
```

# c - GDB 在调试快速分叉并执行另一个程序的多线程程序时崩溃

> ID：13558108
> 
> 赞同：5
> 
> 时间：2012-11-26T03:00:27.373
> 
> 标签：c, linux, gdb

我正在用 GDB 调试我的 C 程序，这有点奇怪，可能是因为我没有使用 glibc，所以它不会检测到新线程，直到它中断它们。我通过添加一个立即恢复的断点来解决这个问题（如果为 0 则中断）。

然而今天我撞到了一堵墙。

我需要 execve() 非常快，所以正常的 fork() 是不可能的（将使用大量内存）并且我不能 vfork() （我需要一个堆栈来设置管道等）所以我使用了相同的这个库（https://code.google.com/p/popen-noshell/）中的方法，基本上只使用 CLONE_VM 进行克隆。这（或一般调用 execve() - 我真的不知道）使 GDB 出于某种原因真的很困惑 - 基本上它输出的是这样的：

```
[New LWP 516]
[New LWP 520]
[New LWP 519]
[New LWP 521]
LWP 521 is executing new program: /bin/bash
Error in re-setting breakpoint 1: No source file named xxx.c.
Error in re-setting breakpoint 2: No source file named yyy.c.
Error in re-setting breakpoint 4: Function "zzz_main" not defined.
[LWP 521 exited]

Program received signal SIGTRAP, Trace/breakpoint trap.
[Switching to LWP 519]
0x00000000004307f8 in shell_execve ()
(gdb) info threads 
Id   Target Id         Frame 
* 5    LWP 519 "self-tes" 0x00000000004307f8 in shell_execve ()
4    LWP 520 "self-tes" 0x000000000040825f in ?? ()
3    LWP 516 "self-tes" 0x000000000040825f in ?? ()
2    LWP 515 "self-tes" 0x000000000040825f in ?? ()
1    LWP 512 "self-tes" 0x000000000040848a in ?? () 
```

GDB 基本上对所有事情都感到困惑，并认为它当前正在执行 /bin/bash - 它不是 - 在没有 GDB 的情况下运行正常但是我需要它来调试我的程序。我试图禁用我能找到的每个 fork 和 exec 设置，但没有启用像“follow exec”这样的设置。如您所见，它尝试在 execve() 之后重新设置断点...为什么？它不再识别任何帧或符号，因为它完全擦除了先前的空间并加载了 /bin/bash。

如何让 GDB 忽略调用 execve() 的线程而不尝试为子进程加载符号？

编辑：哦，我目前正在使用 x86_64 Linux 3.2.0-27 (Ubuntu)。

EDIT2：还有 GNU gdb (Ubuntu/Linaro 7.4-2012.04-0ubuntu2) 7.4-2012.04

EDIT3：也刚刚检查了 gdb 7.5。同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T05:51:30.953

发现问题了！显然，我在克隆时忘记用 SIGCHLD 屏蔽标志，显然 gdb（或 libthread）使用它作为生成子进程（fork 样式）的提示，而不仅仅是另一个线程。感谢@R .. 的提示，引导我朝着正确的方向前进。

# matlab - 这个旋转矩阵（关于矢量的角度）是否仅限于某些方向？

> ID：13558110
> 
> 赞同：2
> 
> 时间：2012-11-26T03:01:06.513
> 
> 标签：matlab, 3d, rotation, octave

来自几个参考资料（即[http://en.wikipedia.org/wiki/Rotation_matrix](http://en.wikipedia.org/wiki/Rotation_matrix) “轴和角度的旋转矩阵”，以及 Foley 等人的“计算机图形学 - 原理与实践”中的练习 5.15，C 中的第 2 版)，我已经看到了旋转矩阵的定义（下面在 Octave 中实现），它围绕指定的向量将点旋转指定的角度。虽然我以前使用过它，但我现在看到的旋转问题似乎与方向有关。该问题在以下 Octave 代码中重新创建

*   采用两个单位向量：src（图中绿色）和 dst（图中红色），
*   计算它们之间的角度：theta，
*   计算两者的法线向量：枢轴（图中为蓝色），
*   最后尝试通过将 src 围绕矢量枢轴旋转角度 theta 来将 src 旋转到 dst 中。

    ```
    % This test fails: rotated unit vector is not at expected location and is no longer normalized.
    s = [-0.49647; -0.82397; -0.27311]
    d = [ 0.43726; -0.85770; -0.27048]
    test_rotation(s, d, 1);

    % Determine rotation matrix that rotates the source and normal vectors to the x and z axes, respectively.
    normal = cross(s, d);
    normal /= norm(normal);
    R = zeros(3,3);
    R(1,:) = s;
    R(2,:) = cross(normal, s);
    R(3,:) = normal;
    R

    % After rotation of the source and destination vectors, this test passes.
    s2 = R * s
    d2 = R * d
    test_rotation(s2, d2, 2);

    function test_rotation(src, dst, iFig)
        norm_src = norm(src)
        norm_dst = norm(dst)

        % Determine rotation axis (i.e., normal to two vectors) and rotation angle.
        pivot = cross(src, dst);
        theta = asin(norm(pivot))
        theta_degrees = theta * 180 / pi
        pivot /= norm(pivot)

        % Initialize matrix to rotate by an angle theta about pivot vector.
        ct = cos(theta);
        st = sin(theta);
        omct = 1 - ct;

        M(1,1) = ct - pivot(1)*pivot(1)*omct;
        M(1,2) = pivot(1)*pivot(2)*omct - pivot(3)*st;
        M(1,3) = pivot(1)*pivot(3)*omct + pivot(2)*st;
        M(2,1) = pivot(1)*pivot(2)*omct + pivot(3)*st;
        M(2,2) = ct - pivot(2)*pivot(2)*omct; 
        M(2,3) = pivot(2)*pivot(3)*omct - pivot(1)*st;
        M(3,1) = pivot(1)*pivot(3)*omct - pivot(2)*st;
        M(3,2) = pivot(2)*pivot(3)*omct + pivot(1)*st;
        M(3,3) = ct - pivot(3)*pivot(3)*omct;

        % Rotate src about pivot by angle theta ... and check the result.
        dst2 = M * src
        dot_dst_dst2 = dot(dst, dst2)
        if (dot_dst_dst2 >= 0.99999)
            "success"
        else
            "FAIL"
        end

        % Draw the vectors: green is source, red is destination, blue is normal.
        figure(iFig);
        x(1) = y(1) = z(1) = 0;
        ubounds = [-1.25 1.25 -1.25 1.25 -1.25 1.25];
        x(2)=src(1); y(2)=src(2); z(2)=src(3);
        plot3(x,y,z,'g-o');
        hold on
        x(2)=dst(1); y(2)=dst(2); z(2)=dst(3);
        plot3(x,y,z,'r-o');
        x(2)=pivot(1); y(2)=pivot(2); z(2)=pivot(3);
        plot3(x,y,z,'b-o');
        x(2)=dst2(1); y(2)=dst2(2); z(2)=dst2(3);
        plot3(x,y,z,'k.o');
        axis(ubounds, 'square');
        view(45,45);
        xlabel("xd");
        ylabel("yd");
        zlabel("zd");
        hold off
    end 
    ```

以下是结果数据。图 1 显示了一个不起作用的方向。图 2 显示了一个有效的方向：相同的 src 和 dst 矢量但旋转到第一象限。

![在此处输入图像描述](../Images/202393372027b2ac1ef6a6e9d6a793ed.png)

![在此处输入图像描述](../Images/82831e994033342799fccd459aabad7e.png)

对于所有向量方向，我期望 src 向量始终旋转到 dst 向量上，如图 2 中黑色圆圈覆盖红色圆圈所示。然而，图 1 显示了 src 矢量不旋转到 dst 矢量上的方向（即，黑色圆圈不在红色圆圈的顶部，甚至不在单位球面上）。

对于它的价值，定义旋转矩阵的参考文献没有提到方向限制，我推导出（在几个小时和几页内）旋转矩阵方程并且没有发现任何方向限制。我希望这个问题是我的一个实现错误，但我还没有在我的任何一个实现中找到它：C 和 Octave。在实现这个旋转矩阵时，您是否遇到过方向限制？如果是这样，您是如何解决这些问题的？如果没有必要，我宁愿避免额外翻译到第一象限。

谢谢，
格雷格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T08:03:00.410

似乎两个减号已经逃脱：

```
M(1,1) = ct - P(1)*P(1)*omct;
M(1,2) = P(1)*P(2)*omct - P(3)*st;
M(1,3) = P(1)*P(3)*omct + P(2)*st;

M(2,1) = P(1)*P(2)*omct + P(3)*st;
M(2,2) = ct + P(2)*P(2)*omct;      %% ERR HERE; THIS IS THE CORRECT SIGN
M(2,3) = P(2)*P(3)*omct - P(1)*st;

M(3,1) = P(1)*P(3)*omct - P(2)*st;
M(3,2) = P(2)*P(3)*omct + P(1)*st;
M(3,3) = ct + P(3)*P(3)*omct;      %% ERR HERE; THIS IS THE CORRECT SIGN 
```

这是一个更紧凑、更快并且还基于[Rodrigues 旋转公式](http://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula)的版本：

```
function test

% first test: pass
s  = [-0.49647; -0.82397; -0.27311];
d  = [ 0.43726; -0.85770; -0.27048]
d2 = axis_angle_rotation(s, d)

% Determine rotation matrix that rotates the source and normal vectors to the x and z axes, respectively.
normal = cross(s, d);
normal = normal/norm(normal);

R(1,:) = s;
R(2,:) = cross(normal, s);
R(3,:) = normal;

% Second test: pass
s2 = R * s;
d2 = R * d
d3 = axis_angle_rotation(s2, d2)

end

function vec = axis_angle_rotation(vec, dst)

    % These following commands are just here for the function to act 
    % the same as your original function. Eventually, the function is 
    % probably best defined as 
    %
    %     vec = axis_angle_rotation(vec, axs, angle)
    %
    % or even 
    %
    %     vec = axis_angle_rotation(vec, axs)
    %
    % where the length of axs defines the angle. 
    %     
    axs = cross(vec, dst);
    theta = asin(norm(axs));

    % some preparations
    aa = axs.'*axs;        
    ra = vec.'*axs;

    % location of circle centers
    c = ra.*axs./aa;

    % first coordinate axis on the circle's plane
    u = vec-c;

    % second coordinate axis on the circle's plane
    v = [axs(2)*vec(3)-axs(3)*vec(2)
         axs(3)*vec(1)-axs(1)*vec(3)
         axs(1)*vec(2)-axs(2)*vec(1)]./sqrt(aa);

    % the output vector   
    vec = c + u*cos(theta) + v*sin(theta);        

end 
```

# jsp - 从 JSP 中检索一个数组列表

> ID：13558113
> 
> 赞同：1
> 
> 时间：2012-11-26T03:01:16.347
> 
> 标签：jsp, servlets

这是我想要做的。

我有一个 servlet，其中包含一个`ArrayList`, 和一个在 servlet 之后显示的 JSP 文件。在用户单击`JSP`文件的下一步后，我转到另一个 servlet，它需要`ArrayList`来自原始 Servlet 的。

我如何使用 JSP 页面来检索它`Arraylist`？

目前，我`ArrayList`在 JSP 中将 The 作为隐藏输入，但新`Servlet`调用不会将该隐藏输入检索为`ArrayList`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:15:04.457

使用`HttpSession`. 在将`ArrayList`原始 Servlet 传递给`JSP`. 然后再当你`Servlet`从那个调用另一个`JSP`。你应该`Arraylist`从`HttpSession`.

**另一种不推荐但不推荐的方法是序列化值，然后将其再次发送回 Servlet。**

如果有少量数据，如字符串、整数等`ArrayList`，你可以这样做

```
public String serializeArrayList(ArrayList list){
  StringBuffer sb = new StringBuffer();
  for(int i = 0; i < list.size(); i++){
    sb.append("<input type=\"hidden\" name=\"list_values\" value=\"");
    sb.append(list.get(i));
    sb.append("\">\n");
  }
  return sb.toString();
} 
```

然后构建一个新列表，使用`request.getParameterValues("list_values")`它返回一个`String[]`并再次构建 ArrayList

当然，如果列表中有几十个或几百个条目，并且如果您有对象存储在`ArrayList`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T03:10:11.060

如果可能，再次调用 servlet 以获取更新的列表，或带有参数的相同列表以指示要使用列表的哪一部分。这是使用您的 servlet 作为控制器；您应该避免使用 JSP 文件（演示文稿）作为控制器。虽然现在这看起来很复杂，但您会发现它使您的 JSP（和其他演示文稿）页面更易于编写。

# recursion - 试图用递归绘制一个特定的形状，尝试了我知道的所有可能的方法

> ID：13558114
> 
> 赞同：3
> 
> 时间：2012-11-26T03:01:23.613
> 
> 标签：recursion, processing

使用处理和递归，我正在尝试绘制与此类似的形状： ![http://i.imgur.com/OPf5D.png](../Images/d9f81e7af6ce78497d0eac4046578622.png)

但我觉得我在尝试各种可能的方式来绘制形状时失去了理智。这是我得到的最接近的：![http://i.imgur.com/vCHJG.png](../Images/6490819d0248b6546b168af22b0966cd.png)

加上我的代码，任何帮助将不胜感激。谢谢：

```
void setup(){
  size(600,600);
}

void draw(){
  background(255);
  draws(300, 300, 50, 5);
}

void draws(int x, int y, int x2, int num){
  stroke(0);
  strokeWeight(2);
  line (x, y, (x+x2), y); //right
  line(x, y, x, y-50); //right up
  line (x-x2, y, x-(x2*2), y); // left 
  line(x-x2, y, x-x2, y-50); //left up 
  line (x, y-50, x-x2, y-50); //top 

  if(num>0){
    draws(x-x2, y-x2, x2/2, num-1);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:22:02.743

（也许这应该是一个评论 - 因为它不是一个完整的答案 - 但我似乎无法做到）

那就是说.......

*   您在每一步都除以 2 而不是 3。
*   您需要每次绘制 3 秒层次结构“绘制”
*   你在这里有'y'坐标-但是x坐标是错误的。猜测......层次结构应该是......

`

```
if(num>0){

    draws(x, y-x2, x2/3, num-1); // Central one    
    draws(x-x2, y, x2/3, num-1); // Left One   
    draws(x, y, x2/3/2,  num-1); // right one
} 
```

`

稍微困难的是，您的坐标从右边线的左侧开始......可能更容易从最左边或最右边开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:29:15.783

我知道了！谢谢您的帮助。

这是它的肉，其他一切都很好：

线（x，y，x，y-x2）；//正确的

线（x-x2，y，x-x2，y-x2）；//剩下

如果（数量> 0）{

```
draws(x-(x2/3), y-x2, x2/3, num-1); // Central one  

draws(x+(x2/1.5), y, x2/3, num-1); // right one  

draws(x-(x2*1.33), y, x2/3, num-1); // left one 
```

}

if (num==0) { //如果没有更多实例，画水平线

```
line (x, y, (x+x2), y); //right

line (x-x2, y, x-(x2*2), y); // left 

line (x, y-x2, x-x2, y-x2); //top 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T04:26:26.690

逻辑类似于生成科赫分形。它是这样的：

1.  画一条水平直线。
2.  将线分成 3 段。
3.  将中间段向上移动一个段的大小。
4.  对每个段重复。

所以，我们的函数基本上应该尝试画这条线：

```
 _________
          |         |
          |         |
          |         |
 _________|         |_________ 
```

对每条水平线依次重复该过程。

我能想到的一种简单方法是从直线开始。然后在每次迭代中擦除行的中间并进行上移（您可以在黑线的顶部画一条白线）。

因此，伪代码将是这样的：

```
// Pseudocode:

fractal (x_start,x_end, y) {
    // first simply draw a straight line:
    line(x_start,y,x_end,y);

    // divide the line into 3 and push the middle up
    length = x_end-x_start;
    segment_length = length/3;
    x2 = x_start+segment_length;
    x3 = x_start+segment_length*2;
    y2 = y-segment_length;
    erase_line(x2,y,x3,y);
    line(x2,y,x2,y2);  // up
    line(x2,y2,x3,y2); // accross
    line(x3,y2,x3,y);  // down

    // now repeat for each segment
    fractal(x_start,y,x2,y);
    fractal(x2,y2,x3,y2);
    fractal(x3,y,x_end,y);
} 
```

这就是基本的工作功能。请注意，它不会停止递归，因此上述函数将无限执行（或直到内存不足）。所以首先要做的是添加递归限制：

```
// Pseudocode:

fractal (x_start,x_end, y, limit) {
    //
    // same content as above except the last 3 lines
    //

    limit --;
    if (limit) {
        fractal(x_start,y,x2,y,limit);
        fractal(x2,y2,x3,y2,limit);
        fractal(x3,y,x_end,y,limit);
    }
} 
```

这应该是一个很好的起点。

您还可以进行其他优化。例如，您实际上不需要在开始时绘制直线，因为每次迭代基本上都会再次绘制它。您只需要在递归的极限处绘制水平线。这意味着您不需要擦除未绘制的线条。但我将把它的实现留给读者作为练习。

# python - 如何从字符串中提取子字符串？

> ID：13558124
> 
> 赞同：0
> 
> 时间：2012-11-26T03:02:44.813
> 
> 标签：python

假设我有一个字符串`/Apath1/Bpath2/Cpath3/0-1-2-3-4-5-something.otherthing`，我只想提取 '0-1-2-3-4-5' 部分。我试过这个：

```
str='/Apath1/Bpath2/Cpath3/0-1-2-3-4-5-something.otherhing'

print str[str.find("-")-1:str.find("-")] 
```

但是，结果只有 0。如何只提取 '0-1-2-3-4-5' 部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T03:05:29.877

使用 os.path.basename 和 rsplit：

```
>>> from os.path import basename
>>> name = '/Apath1/Bpath2/Cpath3/0-1-2-3-4-5-something.otherhing'
>>> number, tail = basename(name).rsplit('-', 1)
>>> number
'0-1-2-3-4-5' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T03:06:48.433

您快到了：

```
str='/Apath1/Bpath2/Cpath3/0-1-2-3-4-5-something.otherhing'
print str[str.find("-")-1:str.rfind("-")] 
```

`rfind`会从头开始搜索。这假设路径中的其他任何地方都没有出现破折号。如果可以，请改为：

```
str='/Apath1/Bpath2/Cpath3/0-1-2-3-4-5-something.otherhing'
str = os.path.basename(str)
print str[str.find("-")-1:str.rfind("-")] 
```

`basename`将获取文件名，不包括路径的其余部分。这可能就是你想要的。

**编辑：**

正如@bradley.ayers 所指出的那样，如果文件名没有在问题中准确描述，这就会崩溃。由于我们使用`basename`，我们可以省略开始索引：

```
print str[:str.rfind("-")] 
```

这会将“/Apath1/Bpath2/Cpath3/10-1-2-3-4-5-something.otherhing”解析为“10-1-2-3-4-5”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T03:07:31.873

这有效：

```
>>> str='/Apath1/Bpath2/Cpath3/0-1-2-3-4-5-something.otherhing'
>>> str.split('/')[-1].rsplit('-', 1)[0]
'0-1-2-3-4-5' 
```

假设您想要的只是最后一个“/”和最后一个“-”之间的内容。其他建议`os.path`可能更有意义（只要操作系统对正确路径的外观没有混淆）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T03:14:46.913

你可以使用`re`：

```
>>> import re
>>> ss = '/Apath1/Bpath2/Cpath3/0-1-2-3-4-5-something.otherhing'
>>> re.search(r'(?:\d-)+\d',ss).group(0)
'0-1-2-3-4-5' 
```

虽然稍微复杂一些，但似乎与此类似的解决方案可能更健壮......

# php - ESI 是阻塞还是非阻塞？

> ID：13558127
> 
> 赞同：9
> 
> 时间：2012-11-26T03:03:08.943
> 
> 标签：php, caching, symfony, varnish, esi

我正在计划我的缓存策略，并且我正在深入研究[ESI](http://symfony.com/doc/current/book/http_cache.html#using-edge-side-includes)以查看它是否符合我的需求。

今天出现了这些问题：

*   每个包含是串行还是并行执行的？假设我有 5 个：`{% render '...' with {}, {'standalone': true} %}`. 我知道生成的页面将不得不等待所有这些，但是它所花费的时间会类似于最慢的包含，还是类似于所有这些包含的总和？
*   如果答案是“串行”，有没有办法把它变成并行？
*   我是否最好将 Ajax 用于网站的特定于用户的部分？在哪种情况下，您会选择其中一种？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T08:53:02.590

带有清漆的 ESI 总是串行执行。他们在使用 varnish 3 改进 ESI 上做了很多工作，但在这方面仍然没有改变。我还记得看到 varnish 工作人员的一些回复说该功能在他们的愿望清单上，但实施起来很棘手。

对于现在进行并行，我想唯一的选择是自己实现该功能。

至于 Ajax 与 ESI，我会说断点晚于 5 ESI，只要它们可以由您的后端快速呈现。如果将 Ajax 用于您网站的内容部分，那么 Ajax 总是存在不好的 SEO 的缺点。

# java - 尝试输入带空格的字符串时 SQLite 崩溃

> ID：13558129
> 
> 赞同：1
> 
> 时间：2012-11-26T03:03:30.533
> 
> 标签：java, android, sqlite, android-sqlite

我正在创建一个具有默认表的应用程序，该表存储其他表的内容，因此当您尝试将自己的输入放入应用程序时，它将存储表，但是当您尝试将表添加到默认表时，它可以完美运行除非有空格，否则“测试”会完美运行，“测试 1”会使应用程序崩溃。这是我检索用户输入的字符串的代码：

```
t = new Table(this);
t.open();
final AlertDialog.Builder alert = new AlertDialog.Builder(this);
final EditText input = new EditText(this);
alert.setView(input);
alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        rListName = input.getText().toString();
        t.createNew(rListName + "DB");
        t.createList(rListName, rListName + "DB");
        t.close();
    }
});
alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        dialog.cancel();
    }
});
alert.show(); 
```

这是我的 createNew 和 createList：

```
public void createNew(String TABLE_NAME){
if(DATABASE_STATUS == "new"){
    ourHelper.createNew(ourDatabase, TABLE_NAME);
    System.out.println("Creating " + TABLE_NAME);
}else{
    System.out.print("Already Created");
    }
}

public long createList(String listName, String listDB){
    ContentValues cv = new ContentValues();
    cv.put(KEY_LISTNAME, listName);
    cv.put(KEY_LISTDB, listDB);
    return ourDatabase.insert(DEFAULT_TABLE, null, cv);
} 
```

我执行创建新表的 createNew()

```
public void createNew(SQLiteDatabase db, String TABLE_NAME){
    db.execSQL("CREATE TABLE " + TABLE_NAME + " (" + 
    KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
    KEY_QUESTION + " TEXT NOT NULL, " +
    KEY_PATH + " TEXT NOT NULL);"
    );
} 
```

最后但不是租约，我的 logcat：

```
11-25 22:02:30.418: I/SqliteDatabaseCpp(24726): sqlite returned: error code = 1, msg = near "helloDB": syntax error
11-25 22:02:30.428: D/AndroidRuntime(24726): Shutting down VM
11-25 22:02:30.428: W/dalvikvm(24726): threadid=1: thread exiting with uncaught exception (group=0x40ab9228)
11-25 22:02:30.438: E/AndroidRuntime(24726): FATAL EXCEPTION: main
11-25 22:02:30.438: E/AndroidRuntime(24726): android.database.sqlite.SQLiteException: near "helloDB": syntax error: , while compiling: CREATE TABLE hello helloDB (_id INTEGER PRIMARY KEY AUTOINCREMENT, question TEXT NOT NULL, path TEXT NOT NULL);
11-25 22:02:30.438: E/AndroidRuntime(24726):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:141)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:368)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at android.database.sqlite.SQLiteStatement.acquireAndLock(SQLiteStatement.java:272)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:84)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:2031)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1971)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at com.mitterederStudios.Quiz.Table$DbHelper.createNew(Table.java:49)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at com.mitterederStudios.Quiz.Table.createNew(Table.java:94)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at com.mitterederStudios.Quiz.Menu$1.onClick(Menu.java:56)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:174)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at android.os.Looper.loop(Looper.java:154)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at android.app.ActivityThread.main(ActivityThread.java:4945)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at java.lang.reflect.Method.invokeNative(Native Method)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at java.lang.reflect.Method.invoke(Method.java:511)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-25 22:02:30.438: E/AndroidRuntime(24726):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T03:18:27.640

如果你真的想要空格，你需要在你的表名周围加上引号，所以它是“test 1”。然而这通常是一个坏主意，我会用下划线替换空格，这样它就变成了 test_1。

# c# - 这 2 个 LINQ 连接查询是否实现了相同的目标

> ID：13558131
> 
> 赞同：2
> 
> 时间：2012-11-26T03:03:46.140
> 
> 标签：c#, .net, linq, entity-framework, join

我想加入 2 个表并使用 LINQ 从中获取一些数据。这是我可以做到这一点的两种方法

```
1\. 

 var orders = from order in db.Order
                 from user in db.User
                 where order.UserId == user.UserId
                 select order;

2.
    var result = from order in db.Order
                 join user in db.user
                 on order.UserId equals user.userId
                 select order 
```

这些查询是否相同？它们有什么不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T03:14:26.920

两者都是一样的。第一个语法是隐式的，第二个是显式连接语法。

有关这两种语法，请参阅 wikipedia[链接](http://en.wikipedia.org/wiki/Join_%28SQL%29)。

# javacv - 在 JavaCV 中捕获帧时出错

> ID：13558132
> 
> 赞同：1
> 
> 时间：2012-11-26T03:03:48.013
> 
> 标签：javacv

全部：

我正在运行带有 32 位 Java 和 32 位 OpenCV 2.4.3 的 Windows XP（32 位）。当我尝试在 Eclipse 中使用以下代码从 AVI 捕获视频帧时：

```
import com.googlecode.javacv.FrameGrabber.Exception;
import com.googlecode.javacv.OpenCVFrameGrabber;

public class FrameReader
{
    public static void main(String[] args) throws Exception,
            InterruptedException
    {

         OpenCVFrameGrabber grabber = new OpenCVFrameGrabber("hall_gray.avi");        
         grabber.start();
         grabber .release();
        return;
    }//End method
}//End class 
```

发生以下错误：

=========================== 错误开始 ===================== ====

Java 运行时环境检测到一个致命错误：

EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x77c46fa3, pid=4776, tid=3392

JRE 版本：7.0_02-b13 Java VM：Java HotSpot(TM) 客户端 VM（22.0-b10 混合模式，共享 windows-x86） 有问题的框架：C [msvcrt.dll+0x36fa3]

无法写入核心转储。默认情况下，在 Windows 的客户端版本上不启用小型转储

包含更多信息的错误报告文件保存为：C:\Java Projects\JavaCVTester\hs_err_pid4776.log

如果您想提交错误报告，请访问： [http](http://bugreport.sun.com/bugreport/crash.jsp) ://bugreport.sun.com/bugreport/crash.jsp 崩溃发生在 Java 虚拟机之外的本地代码中。请参阅有问题的框架以了解报告错误的位置。

==================== 错误信息结束 ==================

有人可以帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:34:41.133

尝试重新安装您的jre。还转到 Windows 启动和恢复选项。选择“写入调试选项”到“完成内存转储”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T08:01:49.530

`OpenCVFrameGrabber`不支持许多视频格式。错误消息“[...] Problematic frame: C [msvcrt.dll+0x36fa3] [...]”可能指出您的视频格式可能不受支持。

`FFmpegFrameGrabber`更灵活。试试下面的代码：

```
import com.googlecode.javacv.FFmpegFrameGrabber;
import com.googlecode.javacv.FrameGrabber;
import com.googlecode.javacv.FrameGrabber.Exception;

public class FrameReader {
    public static void main(String[] args) throws Exception {    
        FrameGrabber grabber = new FFmpegFrameGrabber("hall_gray.avi");
        grabber.start();
        grabber.release();
        return;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-28T11:29:40.067

在 JavaCV 中，您可以使用 FFmpegFrameGrabber，它是 OpenCVFrameGrabber 的包装器，它有很多方法，而不是 OpenCVFrameGrabber。

尝试使用以下代码从视频中提取和保存帧：

```
import java.io.File;
import com.googlecode.javacv.FFmpegFrameGrabber;
import com.googlecode.javacv.Frame;
import com.googlecode.javacv.cpp.opencv_core.IplImage;
import static com.googlecode.javacv.cpp.opencv_highgui.cvSaveImage;
public class Getting_Frames
{
public static void main(String[] args) throws Exception 
 {
    File f = new File("example.avi");
    FFmpegFrameGrabber grabber = new FFmpegFrameGrabber(f);

   try {
            grabber.start();
        } catch (com.googlecode.javacv.FrameGrabber.Exception e1) {
        }
   long frameLength = grabber.getLengthInFrames();
        int increment = (int) Math.ceil(frameLength / 30);
        if (frameLength < 30) {
            System.err.println("Not enough frames");
        }

     // To grab frames per 30 seconds    
        Frame[] s_frame = new Frame[1000];
           for (int i=0, frame_counter = 0; i < frameLength; frame_counter++) {
            if((frame_counter % 2000 )==0)
            {
                s_frame[i]=grabber.grabKeyFrame();
                 IplImage temp = s_frame[i].image;
                System.out.println(temp.nChannels()+" "+temp.origin()+" "+temp.highValue());
                cvSaveImage(i+"new.jpg",temp);
                i++;
            }
        }
      // To know number for each video
      System.out.println(frameLength);

  }
} 
```

# java - 如何截断边界框中的文本？

> ID：13558135
> 
> 赞同：1
> 
> 时间：2012-11-26T03:04:08.607
> 
> 标签：java, itext

我正在`PdfContentByte`使用 直接将内容写入对象`PdfContentByte.showTextAligned`，我想知道如何在写入时阻止文本溢出给定区域。

如果可能的话，如果 iText 还可以在文本不适合的地方放置一个省略号字符，那就太好了。

我也找不到任何`ColumnText`有帮助的方法。我不希望内容在写作时换行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:40:56.283

用这个：

```
int status = ColumnText.START_COLUMN;
ColumnText ct = new ColumnText(cb);
ct.setSimpleColumn(rectangle);
status = ct.go(); 
```

确保您`rectangle`以一种方式进行定义，以便只有一条线适合，用于`ColumnText.hasMoreText(status)`确定是否需要添加省略号字符。

# cordova - 如何让回车键在 Android / jQuery mobile 上工作

> ID：13558137
> 
> 赞同：1
> 
> 时间：2012-11-26T03:04:22.133
> 
> 标签：cordova, jquery-mobile

所以首先让我先说我是 jQuery 移动/任何类型的移动开发的新手。但是，我正在使用使用 Phonegap 的 Icenium 构建一个应用程序。我的应用程序运行良好，但有两件大事我无法弄清楚。

1.  如何与回车按钮交互，即触发点击处理程序，就像我的按钮一样。
2.  当用户单击文本框时如何突出显示所有文本。所以他们不必使用键盘返回键。

我试过谷歌搜索各种术语，但似乎找不到任何东西。问题是你把 jQuery 这个词放在任何东西上，结果是疯狂的。

这是我的 HTML。

```
<body>
  <div data-role="page" id="home">
    <div data-role="header">
      <div id='SearchInput'>
        <label for="txtSearchTerm">Search For a Session</label>
        <input type="text" id="txtSearchTerm" value="" />
        <input type="button" id="btnFilterSessions" value="Filter Sessions" />
        <span id="sessionCount"></span>
      </div>
    </div>
    <div data-role="content">
      <ul id="sessionsList"></ul>
    </div>
    <div data-role="footer" data-position="fixed" data-id="oneFooter">
      <span class="footerText">@r0k3t</span>
    </div>
  </div> 
```

这是我完整的JS。

```
document.addEventListener("deviceready", onDeviceReady, false);
var codeMashApp = {};
function listSessions(sessions) {
  $("#sessionsList").empty();
  sessions.each(function() {
    var title = $(this).find('Title').text();
    var uri = $(this).find('URI').text();
    $("#sessionsList").append("<li class='sessionTitle'><a href='#detailsPage' id='" + uri + "' data-transition='slide'>" + title + "</a></li>");
  });
  $("#sessionCount").text("Number of sessions: " + sessions.length);
}
function onDeviceReady() {
  $.ajax({
    type: "GET",
    url: "http://rest.codemash.org/api/sessions",
    data: "{}",
    success: function(d) {
      codeMashApp.rootElement = d.documentElement;
      var sessions = $(codeMashApp.rootElement).find("Session");
      listSessions(sessions);
    }
  });
  $("#btnFilterSessions").click(searchSessions);
}
function searchSessions() {
  var searchTerm = $("#txtSearchTerm").val();
  if (searchTerm) {
    var sessions = $(codeMashApp.rootElement).find("Title:contains(" + searchTerm + ")").parent();
    listSessions(sessions);
  } else {
    reloadAllSessions()
  }
}
function reloadAllSessions() {
  var sessions = $(codeMashApp.rootElement).find("Session");
  listSessions(sessions);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T04:10:06.227

您需要使您的页面看起来更像一个标准的 html 表单，以便浏览器应用标准的表单行为 - 将文本框和按钮放在表单标签内，并使用`input type="submit"`而不是通用按钮。

有关选择，请参阅 [当文本框获得焦点时选择文本框的所有内容（JavaScript 或 jQuery）](https://stackoverflow.com/questions/480735/select-all-contents-of-textbox-when-it-receives-focus-javascript-or-jquery)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-20T12:07:08.390

手机没有回车键。但是，当您点击文本字段时，键盘会弹出。键盘上有“开始”按钮。当您按下它时，将给出一个 ascii 13 的按键事件，即 Enter 键。

只需正常编写程序并正常捕获按键事件即可进入。在 PC 浏览器中，当用户按下 Enter 键时它会激活该事件，但是在移动设备中，如果用户按下 Go 按钮，该事件将被触发。

这就是我为我的backbonejs 应用程序所做的。我为所有文本字段按 Enter 键创建了一个全部内容，并且假设我希望全名的文本字段在按下 Enter 键时更新 db 中的值，以便它可以通过 AJAX 仅针对该字段进行更新而无需按提交按钮：

```
$(document).on('keypress', 'input', function(event) {   
    var keycode = event.keyCode || event.which;
    if(keycode == '13') {
        //alert('You pressed a "enter" key in somewhere');  

        alert("DEBUG: ENTER KEY PRESSED!"); 
        var element = event.currentTarget;
        var id = $(element).attr("id");

       if (id == "fullname") {
            $(event.currentTarget).trigger('enter');
            var text = $(event.currentTarget).val();
            localStorage.setItem("memberprofileupdatetype", "fullname");
            localStorage.setItem("memberprofilenameupdate", text);              
            event.preventDefault();
       }
    }
}); 
```

这段代码：

```
$(event.currentTarget).trigger('enter'); 
```

将在我的主干视图中触发 Enter 按键事件，所以我这样做是为了执行更新：

```
events: {
    'enter': 'processUpdate'
},

processUpdate: function() {
    var updatetype = localStorage.getItem("memberprofileupdatetype");
    if (updatetype == "fullname") {
        var newname = localStorage.getItem("memberprofilenameupdate");
        localStorage.removeItem("memberprofileupdatetype");
        localStorage.removeItem("memberprofilenameupdate");

        alert("New name - " + newname);
        //do AJAX update here for the newname
    }
} 
```

这有点像 hack，但是对于 Enter Key，您无能为力，因为只有这样才能完成

# php - 从链接中读取文件的隐藏扩展名

> ID：13558139
> 
> 赞同：1
> 
> 时间：2012-11-26T03:04:27.417
> 
> 标签：php

我需要从我从网络上抓取的一些链接中读取 pdf 扩展文件。链接保存在`$link`变量中。但有时，扩展名并没有写在链接中，例如：`http://tstc.bz/docs/490`除了490是一个pdf文件外，我点击它时扩展名会存在。如何阅读隐藏的扩展名？谢谢我试过用`PATHINFO`

```
if (strtolower(pathinfo($link,PATHINFO_EXTENSION)) === 'pdf'){ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T03:12:54.640

使用[此处](http://php.net/manual/en/function.mime-content-type.php)`mime_content_type`的文档来获取您尝试加载的文件的类型。

如果您要缓存链接的内容，这是一个不错的选择，因为您需要将文件保存在本地。否则，请像 baba 建议的那样，使用`get_headers`链接（[此处](http://ca1.php.net/get_headers)的文档），将非零值作为第二个参数传递给`keys`结果数组。然后，只需`[Content-Type]`从结果数组中读取

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T03:28:03.693

您可以使用`get_headers`

```
$link = "http://tstc.bz/docs/490";
if (getPdf($link)) {
    // yes its a PDF File
} 
```

使用的功能

```
function getPdf($link) {
    $ext = strtolower(pathinfo($link, PATHINFO_EXTENSION));
    if (empty($ext)) {
        $type = array_change_key_case(get_headers($link, true), CASE_LOWER);
        if (is_array($type['content-type']))
            return false;
        if (strtolower($type['content-type']) === "application/pdf") {
            return true;
        }
    }
    if ($ext === 'pdf') {
        return true;
    }
    return false;
} 
```

# perl - /usr/lib/perl5/Tk/Widget.pm 第 205 行的未知选项“-browsecmd”？

> ID：13558144
> 
> 赞同：0
> 
> 时间：2012-11-26T03:05:07.400
> 
> 标签：perl, arguments, tk

**注意：**我在 Perl 5 上使用 Perl/Tk

我正在开发一个新应用程序，以查找此错误消息：

```
unknown option "-browsecmd" at /usr/lib/perl5/Tk/Widget.pm line 205.
at pack2.pl line 76 
```

这是完整的论点：

```
$f1->Checkbutton(-text => "-expand", -onvalue => 1, -offvalue => 0,
    -variable => \$expand[$count], -browsecmd => \&repack)
    ->pack(-ipady => 5, -side => 'left'); 
```

我做错了什么？你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T03:24:41.093

该`-browsecmd`选项通常仅适用于列表、树或网格小部件，用户可以在其中选择多个选项之一。

如果您想在单击检查按钮时执行回调，那么您需要该`-command`选项。

# flex-datagrid - Flexicious Ultimate Datagrid：设置列标题的高度

> ID：13558145
> 
> 赞同：0
> 
> 时间：2012-11-26T03:05:16.607
> 
> 标签：flex-datagrid, flexicious

我正在向 FlexDataGridColumn 添加一个 headerRenderer。是否可以自定义 FlexDataGridColumn 的高度，以便 headerRenderer 的所有元素都可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:28:09.387

Flexicious 2.9 有 variableHeaderHeight 属性，应该这样做。

# ruby-on-rails-3.1 - Ruby on Rails 无法从外部 API 获取 JSON

> ID：13558147
> 
> 赞同：1
> 
> 时间：2012-11-26T03:05:23.617
> 
> 标签：ruby-on-rails-3.1

我似乎无法弄清楚如何对 URI 进行 API 调用，例如：

```
http://elophant.com/api/v1/na/getSummonerNames?summonerIds=7428,26670961,12468&key=APIKey 
```

其中 SummonerIds 是游戏中玩家的 ID，key 是访问 API 的 API 密钥。

当我在浏览器中运行它时，它会返回（当然是使用实际的 API 密钥）：

```
["Phreak","Test","OranGe"] 
```

当我运行时，尝试通过执行以下操作在我的 Rails 应用程序的主控制器中访问它：

```
require 'net/http'
class MainController < ApplicationController
  def index

  end

  def player 
    @player = params[:player]

    url = URI.parse('http://elophant.com/api/v1/na/getSummonerNames?summonerIds=' +     @player + '&key=APIKey')
    req = Net::HTTP::Get.new(url.path)
    res = Net::HTTP.start(url.host, url.port) {|http|
    http.request(req)
    }
    @b = res.body 
  end
end 
```

（如果它说“&key=APIKey”，我会用实际的 API 密钥替换 APIKey。）

然后在我的 player.html.erb 中打印出@b：

```
<%= @b %> 
```

它返回：

```
v1 getSummonerNames 
```

如果我不提供 API 密钥，这与我在浏览器中得到的响应完全相同，但我确实在代码中的 URL 中提供了 API 密钥。

所以我的问题是，如何让浏览器使用 API 密钥来获得响应？

谢谢，

亚历克斯·D。

# jquery - JQuery Draggables，动态删除/销毁/移除

> ID：13558149
> 
> 赞同：1
> 
> 时间：2012-11-26T03:05:54.087
> 
> 标签：jquery

我有一个程序可以使用一些像这样的鬼鬼祟祟的代码动态添加可拖动对象：

```
(function ($) {
   $.fn.liveDraggable = function (opts) {
      this.live("mouseover", function() {
         if (!$(this).data("init")) {
            $(this).data("init", true).draggable(opts);
         }
      });
      return $();
   };
}(jQuery));

$("#draggable_component").liveDraggable({ 
    scroll: true,
    handle: ".drag_handle",         
    containment: ".middle_container"
}); 
```

这段代码工作正常。我有两个无法解决的相关问题。首先，每次我添加一个可拖动对象时，它都会被添加到屏幕上的不同位置。其次，每次我删除一个可拖动对象（我一直在使用 .hide() 执行此操作，因为我无法删除或销毁工作），所有可拖动对象都会转移。不幸的是，此时我无法将可拖动对象的定位设为绝对。

如果有人可以帮助我找到解决这些问题的方法，那将不胜感激。

我觉得将所有东西都切换到绝对定位可能是一种解决方案，但是该死的，如果是这种情况，我必须更改很多旧代码……希望有另一种解决方案。

# java - 如何打印自定义纸张尺寸（支票 8" x 4"）？

> ID：13558152
> 
> 赞同：4
> 
> 时间：2012-11-26T03:06:29.230
> 
> 标签：java, html, swing, printing

我正在尝试从 Java 小程序打印自定义纸张尺寸。我已经设置了纸张尺寸，但它被忽略了。

我也尝试过使用 book 方法，因为我已经看到了一些关于这有助于让它工作但是当我使用它时它只是打印一个空白页并且似乎仍然是关于 A4 的（我正在寻找打印显然很多的支票更小 (8" x 4"))。

如果这有什么不同，我正在尝试从 JEditorPane 打印 HTML。

如果您有任何想法，我将不胜感激，我正在用这个把头发扯掉。

我还应该补充一点，当谈到 Java 时，我是一个初学者。

这是我到目前为止所拥有的：

**更新：** 我现在已经获得了正确的页面大小，但似乎无法让我正在加载的 HTML 页面适合或对齐页面大小。

**更新：** 现在我无法让小程序在浏览器中运行。它适用于 Eclipse，而不是浏览器。我还需要从参数传递 URL。

这是我正在使用和更新的 Java 代码的 HTML 小程序标记：

```
<!DOCTYPE html>
<html>
<head><title>Printing Cheque</title></head>
<body>
<applet width=100 height=100 code="HTMLPrinter"
        archive="cheque_print.jar">
</applet>

</body>
</html>

package com.yunatech.pns.chequeprint;

import java.applet.Applet;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.print.Book;
import java.awt.print.PageFormat;
import java.awt.print.Paper;
import java.awt.print.Printable;
import java.awt.print.PrinterException;
import java.awt.print.PrinterJob;
import javax.swing.JEditorPane;

public class HTMLPrinter extends Applet {

    /**
     * 
     */
    private static final long serialVersionUID = 8065834484717197790L;
    private static JEditorPane editor;

    public HTMLPrinter() {

        try {

            editor = new JEditorPane();
            editor.setPage("http://localhost/print_test/test.html");

            PrinterJob pj = PrinterJob.getPrinterJob();
            if (pj.printDialog()) {
                PageFormat pf = pj.defaultPage();
                Paper paper = pf.getPaper();
                double width = 8d * 72d;
                double height = 4d * 72d;
                double margin = 1d * 72d;
                paper.setSize(width, height);
                paper.setImageableArea(
                        margin,
                        0,
                        width - (margin * 2),
                        height);
                System.out.println("Before- " + dump(paper));
                pf.setOrientation(PageFormat.PORTRAIT);
                pf.setPaper(paper);
                System.out.println("After- " + dump(paper));
                System.out.println("After- " + dump(pf));
                dump(pf);
                PageFormat validatePage = pj.validatePage(pf);
                System.out.println("Valid- " + dump(validatePage));

                Book pBook = new Book();
                pBook.append(new Page(), pf);
                pj.setPageable(pBook);

                try {
                    pj.print();
                } catch (PrinterException ex) {
                    ex.printStackTrace();
                }
            }

        } catch (Exception exp) {
            exp.printStackTrace();
        }
    }

    protected static String dump(Paper paper) {
        StringBuilder sb = new StringBuilder(64);
        sb.append(paper.getWidth()).append("x").append(paper.getHeight())
                .append("/").append(paper.getImageableX()).append("x").
                append(paper.getImageableY()).append(" - ").append(paper
                .getImageableWidth()).append("x").append(paper.getImageableHeight());
        return sb.toString();
    }

    protected static String dump(PageFormat pf) {
        Paper paper = pf.getPaper();
        return dump(paper);
    }

    public static class Page implements Printable {

        public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) {
            if (pageIndex >= 1) return Printable.NO_SUCH_PAGE;

            Graphics2D g2d = (Graphics2D)graphics;
            g2d.translate((int)pageFormat.getImageableX(), (int)pageFormat.getImageableY());

            editor.setSize((int)pageFormat.getImageableWidth(), (int)pageFormat.getImageableHeight());
            editor.print(g2d);

            return Printable.PAGE_EXISTS;
        }
    }
} 
```

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T03:32:58.207

打印设计为以每英寸像素为单位。基本打印 API 使用 72 的 DPI。

您需要相应地转换您的测量值...

```
double paperWidth = 8 * 72d;
double paperHeight = 4 * 72d;
double margin = 1 * 72d; 
```

**更新示例**

`g2d.setClip(0, 0, (int)pageFormat.getImageableWidth(), (int)pageFormat.getImageableHeight());`不建议，危险，通常不需要，除此之外，您使用了错误的宽度和高度值。可成像参数考虑了边距，但您没有翻译图形，这很可能会切割您必须打印到的区域的底部左侧部分......

我只是避免使用剪辑

![在此处输入图像描述](../Images/ad74edced92537786dc812cc3fe5d626.png)

```
public class TestPrinting01 {

    public static void main(String[] args) {

        PrinterJob pj = PrinterJob.getPrinterJob();
        if (pj.printDialog()) {
            PageFormat pf = pj.defaultPage();
            Paper paper = pf.getPaper();
            double width = 8d * 72d;
            double height = 4d * 72d;
            double margin = 1d * 72d;
            paper.setSize(width, height);
            paper.setImageableArea(
                    margin,
                    margin,
                    width - (margin * 2),
                    height - (margin * 2));
            System.out.println("Before- " + dump(paper));
            pf.setOrientation(PageFormat.LANDSCAPE);
            pf.setPaper(paper);
            System.out.println("After- " + dump(paper));
            System.out.println("After- " + dump(pf));
            dump(pf);
            PageFormat validatePage = pj.validatePage(pf);
            System.out.println("Valid- " + dump(validatePage));

            Book pBook = new Book();
            pBook.append(new Page(), pf);
            pj.setPageable(pBook);

            try {
                pj.print();
            } catch (PrinterException ex) {
                ex.printStackTrace();
            }
        }
    }

    protected static String dump(Paper paper) {
        StringBuilder sb = new StringBuilder(64);
        sb.append(paper.getWidth()).append("x").append(paper.getHeight())
                .append("/").append(paper.getImageableX()).append("x").
                append(paper.getImageableY()).append(" - ").append(paper
                .getImageableWidth()).append("x").append(paper.getImageableHeight());
        return sb.toString();
    }

    protected static String dump(PageFormat pf) {
        Paper paper = pf.getPaper();
        return dump(paper);
    }

    public static class Page implements Printable {

        public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) {
            if (pageIndex >= 1) {
                return Printable.NO_SUCH_PAGE;
            }

            Graphics2D g2d = (Graphics2D) graphics;
            // Be careful of clips...
            g2d.translate((int) pageFormat.getImageableX(), (int) pageFormat.getImageableY());

            double width = pageFormat.getImageableWidth();
            double height = pageFormat.getImageableHeight();

            g2d.drawRect(0, 0, (int)pageFormat.getImageableWidth() - 1, (int)pageFormat.getImageableHeight() - 1);
            FontMetrics fm = g2d.getFontMetrics();
            String text = "top";
            g2d.drawString(text, 0, fm.getAscent());

            text = "bottom";
            double x = width - fm.stringWidth(text);
            double y = (height - fm.getHeight()) + fm.getAscent();
            g2d.drawString(text, (int)x, (int)y);

            return Printable.PAGE_EXISTS;
        }
    }
} 
```

**更新**

打印组件时，您将负责其布局。

![在此处输入图像描述](../Images/471f8d1d43de22988146e60af273bbde.png)

```
public class TestPrinting01 {

    private static JEditorPane editor;

    public static void main(String[] args) {

        try {

            editor = new JEditorPane();
            editor.setPage(new File("C:/hold/search.htm").toURI().toURL());

            PrinterJob pj = PrinterJob.getPrinterJob();
            if (pj.printDialog()) {
                PageFormat pf = pj.defaultPage();
                Paper paper = pf.getPaper();
                double width = 8d * 72d;
                double height = 4d * 72d;
                double margin = 1d * 72d;
                paper.setSize(width, height);
                paper.setImageableArea(
                        margin,
                        margin,
                        width - (margin * 2),
                        height - (margin * 2));
                System.out.println("Before- " + dump(paper));
                pf.setOrientation(PageFormat.LANDSCAPE);
                pf.setPaper(paper);
                System.out.println("After- " + dump(paper));
                System.out.println("After- " + dump(pf));
                dump(pf);
                PageFormat validatePage = pj.validatePage(pf);
                System.out.println("Valid- " + dump(validatePage));

                Book pBook = new Book();
                pBook.append(new Page(), pf);
                pj.setPageable(pBook);

                try {
                    pj.print();
                } catch (PrinterException ex) {
                    ex.printStackTrace();
                }
            }

        } catch (Exception exp) {
            exp.printStackTrace();
        }
    }

    protected static String dump(Paper paper) {
        StringBuilder sb = new StringBuilder(64);
        sb.append(paper.getWidth()).append("x").append(paper.getHeight())
                .append("/").append(paper.getImageableX()).append("x").
                append(paper.getImageableY()).append(" - ").append(paper
                .getImageableWidth()).append("x").append(paper.getImageableHeight());
        return sb.toString();
    }

    protected static String dump(PageFormat pf) {
        Paper paper = pf.getPaper();
        return dump(paper);
    }

    public static class Page implements Printable {

        public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) {
            if (pageIndex >= 1) {
                return Printable.NO_SUCH_PAGE;
            }

            Graphics2D g2d = (Graphics2D) graphics;
            // Be careful of clips...
//            g2d.setClip(0, 0, (int) pageFormat.getWidth(), (int) pageFormat.getHeight());
            g2d.translate((int) pageFormat.getImageableX(), (int) pageFormat.getImageableY());

            double width = pageFormat.getImageableWidth();
            double height = pageFormat.getImageableHeight();

            System.out.println("width = " + width);
            System.out.println("height = " + height);

            editor.setLocation(0, 0);
            editor.setSize((int)width, (int)height);
            editor.printAll(g2d);

            g2d.setColor(Color.BLACK);
            g2d.draw(new Rectangle2D.Double(0, 0, width, height));

            return Printable.PAGE_EXISTS;
        }
    }
} 
```

# c++ - sprintf 未在范围内声明？

> ID：13558159
> 
> 赞同：16
> 
> 时间：2012-11-26T03:07:19.043
> 
> 标签：c++

我在这里有一小段代码来自我设计的东西，但我不断收到错误：

```
sprintf not declared in scope 
```

我是否在#includes 中包含某些内容，或者我怎样才能使其正常工作？我在我妈妈的 VS 上工作，但回到家，我无法在代码块上得到它

```
if (tmp2 <= B_dest[hr - 6])
{
    sprintf(name, "B%d", tmp3);
}else{
    sprintf(name, "A%d", tmp3);
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-26T03:10:09.250

您需要包括`stdio.h`.

```
#include<stdio.h> 
```

`stdio.h`声明函数，如果`sprintf`没有标头，编译器无法理解是什么`sprintf`意思，因此它会给你错误。

在 C++ 中请注意，

包括在命名空间和*可能*在全局命名空间`cstdio`中导入符号名称。 包括在全局命名空间和*可能*在命名空间中导入符号名称。 `std` *`stdio.h`*`std`**

 **这同样适用于所有 c 样式的标题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T03:10:01.827

确保你已经`#include <cstdio>`

并`std::sprintf()`按照@Potatoswatter 的指示访问 sprintf。

或者做旧的 c 风格：`#include <stdio.h>`包括*sprintf*的定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T10:07:30.580

我与 C::B 有类似的问题，发现问题不仅仅是编译器路径 - 似乎 IDE 本身在打开 #include <...> 文件时遇到问题 - 但是这可以通过设置 -> 编辑器来解决-> 其他设置 -> 打开文件时使用编码：默认

我的编码不是默认的，这不知何故导致 IDE 打开 include <...>

然而，它并没有解决“未在此范围内声明”的问题**

# sql - SQL 仅显示我的 COUNT() 列的 MAX

> ID：13558166
> 
> 赞同：0
> 
> 时间：2012-11-26T03:07:37.547
> 
> 标签：sql, sql-server-2008

有一个显示这个的查询......

```
salesPersonId Total
------------- -----------
AB4           3
GT10          2
JB9           1
JS1           2
KT8           4
TC3           4
VG7           2
WC2           7

(8 row(s) affected) 
```

我的查询是...

```
SELECT so.salesPersonId, COUNT(so.orderId) AS 'Total'
FROM salesOrder AS so

GROUP BY so.salesPersonId
GO 
```

我想这样做...

```
SELECT so.salesPersonId, COUNT(so.orderId) AS 'Total'
FROM salesOrder AS so
WHERE MAX(COUNT(so.orderId))
GROUP BY so.salesPersonId
GO 
```

这给了我一个错误，关于如何只显示总数最高的 salesPersonId 的任何想法？这里是WC2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:11:58.317

```
WITH totalCount
AS
(
    SELECT so.salesPersonId, COUNT(so.orderId) AS 'Total'
    FROM salesOrder AS so
    GROUP BY so.salesPersonId
),
maxCount AS
(
    SELECT salesPersonId, Total,
            DENSE_RANK() OVER (ORDER BY Total DESC) rn
    FROM totalCount
)
SELECT salesPersonId, Total
FROM    maxCount
WHERE rn = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T03:12:07.547

您可以使用[公用表表达式](http://msdn.microsoft.com/en-us/library/ms175972.aspx)（或子查询）来获取细分，然后选择 CTE 中的所有条目，其中它们的总数等于最大总数（因为*可能*有多个）：

```
;WITH TotalOrders
AS
    (
    SELECT so.salesPersonId, COUNT(so.orderId) AS 'Total'
    FROM salesOrder AS so
    GROUP BY so.salesPersonId
    )
SELECT *
FROM TotalOrders [TO]
WHERE [TO].Total = (SELECT MAX([TO].Total) FROM TotalOrders [TO]) 
```

# javascript - 在多个地方声明时，html页面上的javascript变量初始化

> ID：13558167
> 
> 赞同：2
> 
> 时间：2012-11-26T03:07:42.120
> 
> 标签：javascript, html, variables, initialization

# 哎呀 - 错误发布

向所有人道歉。误读了我的代码并误解了它的行为。

* * *

## 源代码

有一个页面，其中变量`shoe`被初始化两次，一次`index.html`在一个被包含的变量中`script.js`：

### 索引.html

```
<script src='script.js'></script>
<script>
   var shoe = { color: 'pink' };
</script> 
```

### 脚本.js

```
var shoe = { size: 13 }; 
```

## 结果值

在 中，结果`chrome`值为`shoe`

```
>> shoe = { color: 'pink', size: 13 } 
```

似乎`chrome`将这两个声明连接在一起——这非常酷而且非常有礼貌。

这是标准行为吗？我可以在浏览器之间指望这个吗？

* * *

## 运行时示例

见[http://www.trailsandtribulations.net/tech/barebone.html](http://www.trailsandtribulations.net/tech/barebone.html)

来源是：

*   [http://www.trailsandtribulations.net/tech/barebone.jade](http://www.trailsandtribulations.net/tech/barebone.jade)
*   [http://www.trailsandtribulations.net/scripts/session.js](http://www.trailsandtribulations.net/scripts/session.js)

（我暂时解绑了 javascript）

多次声明的变量是`state`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T03:15:04.343

这种行为不是标准的，不应依赖。你应该这样做：

```
var shoe = shoe || {};
shoe.color = 'pink';

var shoe = shoe || {};
shoe.size = 13; 
```

基本上，此语法分配`shoe`给`shoe`它是否已定义，否则它会创建一个新对象。这将始终保留`shoe`它是否存在的先前状态，并允许您安全地对其进行修改。使用这种语法，尝试初始化变量一次或十次都没有关系。它总是正确的并且行为方式相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T03:13:25.513

chome 知道将它们变成一个对象可能非常酷，但我建议您以后避免这样做。

更好的做法是创建一个类似于

```
var shoe = {
  size: 13,
  color: 'pink'
}; 
```

如果你想创建不同颜色的鞋子对象，你可以做类似的事情

```
function shoe(attributes) {
   this.size = attributes.size;
   this.color = attributes.color;
} 
```

现在您可以使用以下内容创建一个新的鞋子对象

```
var my_shoe = new shoe({
  size: 10.5,
  color: 'white'
}); 
```

我现在可以像这样得到 my_shoe 的颜色：

```
my_shoe.color; // returns 'white' 
```

依靠浏览器来解释您正在尝试做的事情绝不是一个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T04:05:37.423

您的问题中的情况实际上根本没有发生（至少对于 chrome 的 23 版）。我将尝试向您展示这种情况。

首先，在您的“session.js”中声明“var state”，并带有以下属性。

```
var state = {
  inited: false,
  sid: null,
  hash: null,
  status: null,
  usr: {},
  domain: window.location.hostname.split('.').splice(-2).join('.')
}; 
```

然后在你的 html 的头部你有一个脚本块，它再次声明'var state'，这会覆盖原来的对象。

```
var state = {
  sources: [
    '/tech/layout.jade',
    '/scripts/bladette.js',
    '/scripts/utils.js',
    '/scripts/modal.js',
    '/scripts/session.js',
    '/scripts/outliner.js',
    '/scripts/restful.js',
    '/scripts/params.js',
    '/scripts/menu.js',
    '/scripts/checks.js',
    '/scripts/notes.js',
    '/scripts/expand.js',
    '/scripts/store.js',
    '/scripts/storage.js' ],
  initFuncs: [ session.init ]
} 
```

在此之后，您的代码中有很多地方可以为您的状态对象分配值。这就是为什么它开始看起来像两个对象被合并了。**一个不存在的问题是“state.inited”不存在，但它是在“session.js”脚本中用这个属性声明的**。您的对象正在通过其他函数获取这些属性。我的建议是在不同阶段/事件中通过您的 JS 进行调试，并检查“状态”对象以找出这些值的添加位置。记住'state.foo = 1;' 将给'state'对象一个'foo'的属性，不管它是否被声明。

希望有帮助。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-26T03:16:33.337

var 关键字已知会使页面内的变量成为全局变量 这是 Chrome 的一个“不错”功能，但很奇怪可以避免尝试使用 OOP 概念编写代码以避免这种浏览器依赖

# java - Swing 表格中单元格编辑（单击或双击）的最佳实践

> ID：13558171
> 
> 赞同：2
> 
> 时间：2012-11-26T03:08:51.460
> 
> 标签：java, swing, tablecelleditor, jide

我想问一些关于编辑表格中的单元格的问题。

目前，我在表格中进行单元格编辑的做法是双击单元格以使单元格可编辑以进行文本输入。对于单击，它将改为选择行。它就像 Excel 的单元格编辑行为。我在一些[JIDE demo](http://www.jidesoft.com/products/1.4/jide_demo.jnlp)中看到，有些表格可以单击编辑，例如“EditableTableHeaderDemo”，有些可以双击编辑，例如 JideTableDemo。

这里我想知道的是表格中单元格编辑的最佳实践，无论是单击还是双击？如果我们使用双击编辑表格与单击编辑表格相比有什么问题吗？在用户友好性、可用性和人机交互方面，哪个更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T03:18:00.437

许多用户更喜欢键绑定。`F2`是一个常见的（但不是普遍的）默认值；`Enter`也有一定的吸引力。还考虑将选择部分作为您的选择，[此处](https://stackoverflow.com/a/13309183/230513)`java.util.Preferences`提到。

```
table.getInputMap().put(
    KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "startEditing"); 
```

# python - NameError at week/2012/48/全局名称'_get_next_prev_month'未定义

> ID：13558176
> 
> 赞同：0
> 
> 时间：2012-11-26T03:09:21.587
> 
> 标签：python, django, django-templates, python-2.7, django-views

我正在尝试让 weekarchive 视图正常工作，但出现以下错误：

```
NameError at /archive/week/2012/48/
global name '_get_next_prev_month' is not defined 
Request Method: GET
Request URL:    http://localhost:8000/archive/week/2012/48/
Django Version: 1.4.2
Exception Type: NameError
Exception Value:    
global name '_get_next_prev_month' is not defined
Exception Location: /job/views.py in get_next_week, line  79
Python Executable:  /jobenv/bin/python
Python Version: 2.7.3 
```

这是我的视图继承自的子类：

```
class BetterWeekArchiveView(WeekArchiveView):

def get_next_week(self, date):
    """
    Get the next valid week.
    """
    from datetime import timedelta
    next = date + timedelta(days=7)
    return _get_next_prev_month(self, next, is_previous=False, use_first_day=False)

def get_previous_week(self, date):
    """
    Get the previous valid week.
    """
    from datetime import timedelta
    prev = date - timedelta(days=7)
    return _get_next_prev_month(self, prev, is_previous=True, use_first_day=False)

def get_dated_items(self):
    """
    Return (date_list, items, extra_context) for this request.
    Inject next_week and previous_week into extra_context.
    """
    result = super(BetterWeekArchiveView, self).get_dated_items()
    extra_context = result[2]
    date = extra_context['week']

    extra_context.update({
        'next_week': self.get_next_week(date),
        'previous_week': self.get_previous_week(date),
    })
    return result 
```

这是视图：

```
class week_archive(BetterWeekArchiveView):
   model=Job
   allow_future =True
   allow_empty=True
   paginate_by=12
   date_field='datemade'
   template_name='task/task_archive_week'

   def get_queryset(self):
       return Job.objects.filter(author=self.request.user) 
```

我从[如何对 WeekArchiveView 进行分页得到了这个 BetterWeekArchiveView()](https://stackoverflow.com/questions/7665013/how-do-i-paginate-weekarchiveview)

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:51:47.360

似乎我错过了一个导入，我在这里的源代码中找到了 _get_next_prev_month 的定义： [Django-source-file](http://code.djangoproject.com/svn/django/trunk/django/views/generic/dates.py) 这应该是一个最小的工作示例：

```
class BetterWeekArchiveView(WeekArchiveView):
    from django.views.generic.dates import _get_next_prev_month
    def get_next_week(self, date):
       """
        Get the next valid week.
        """
        from datetime import timedelta
        next = date + timedelta(days=7)
        return _get_next_prev_month(self, next, is_previous=False, use_first_day=False)

    def get_previous_week(self, date):
       """
       Get the previous valid week.
       """
       from datetime import timedelta
       prev = date - timedelta(days=7)
       return _get_next_prev_month(self, prev, is_previous=True, use_first_day=False)

    def get_dated_items(self):
        """
        Return (date_list, items, extra_context) for this request.
        Inject next_week and previous_week into extra_context.
        """
        result = super(BetterWeekArchiveView, self).get_dated_items()
        extra_context = result[2]
        date = extra_context['week']

        extra_context.update({
         'next_week': self.get_next_week(date),
          'previous_week': self.get_previous_week(date),
          })

         return result 
```

# android - 尝试在运行 4.2 的设备上访问 Picasa 图像时出现安全异常

> ID：13558177
> 
> 赞同：16
> 
> 时间：2012-11-26T03:09:21.383
> 
> 标签：android, android-permissions

在我的应用程序中，我让用户从图库中选择图像，并且在 4.2 之前执行此操作没有问题，但是现在当我选择从我的 google+ 帐户同步的图像时，我猜是 Picasa 图像我收到此错误

```
11-25 20:31:52.508: E/AndroidRuntime(17387): java.lang.RuntimeException: An error occured while executing doInBackground()
11-25 20:31:52.508: E/AndroidRuntime(17387):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at java.util.concurrent.FutureTask.run(FutureTask.java:239)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at java.lang.Thread.run(Thread.java:856)
11-25 20:31:52.508: E/AndroidRuntime(17387): Caused by: java.lang.SecurityException: Permission Denial: opening provider com.android.gallery3d.provider.GalleryProvider from ProcessRecord{42817d60 17387:com.tyczj.bowling/u0a10087} (pid=17387, uid=10087) requires com.google.android.gallery3d.permission.GALLERY_PROVIDER or com.google.android.gallery3d.permission.GALLERY_PROVIDER
11-25 20:31:52.508: E/AndroidRuntime(17387):    at android.os.Parcel.readException(Parcel.java:1425)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at android.os.Parcel.readException(Parcel.java:1379)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at android.app.ActivityManagerProxy.getContentProvider(ActivityManagerNative.java:2530)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at android.app.ActivityThread.acquireProvider(ActivityThread.java:4460)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at android.app.ContextImpl$ApplicationContentResolver.acquireUnstableProvider(ContextImpl.java:2002)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at android.content.ContentResolver.acquireUnstableProvider(ContentResolver.java:1101)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at android.content.ContentResolver.openTypedAssetFileDescriptor(ContentResolver.java:708)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:614)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at android.content.ContentResolver.openInputStream(ContentResolver.java:449)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at com.tyczj.bowling.BowlersListFragment$LoadImage.doInBackground(BowlersListFragment.java:390)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at com.tyczj.bowling.BowlersListFragment$LoadImage.doInBackground(BowlersListFragment.java:1)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
11-25 20:31:52.508: E/AndroidRuntime(17387):    at   java.util.concurrent.FutureTask.run(FutureTask.java:234)
11-25 20:31:52.508: E/AndroidRuntime(17387):    ... 4 more 
```

所以我输入`com.google.android.gallery3d.permission.GALLERY_PROVIDER`了我的清单，但我仍然得到那个错误，那么我还需要做什么呢？这是我第一次看到这个并且在网上没有找到关于这个问题的信息。

如果这将是一个问题，我可以让画廊显示设备上的图像和`exclude Picasa`图像吗？

就像我说的那样，我以前没有遇到过这个问题，`4.2`或者可能与`recent google+ update?`

**编辑：**

它只会在我退出应用程序并尝试重新启动后给我错误。因此，如果我在应用程序中并选择图像以显示第一次它可以正常工作，直到我退出。我将它存储`Uri`在我的数据库中以在它启动时加载

这是我的清单权限

```
<uses-permission android:name="com.tyczj.bowling.permission.C2D_MESSAGE" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.USE_CREDENTIALS" />
<uses-permission android:name="com.google.android.gallery3d.permission.GALLERY_PROVIDER" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:13:08.357

我在我的应用程序（也在 Android 4.2.x 中）实现 ACTION_SEND 和 ACTION_SEND_MULTIPLE 时遇到了类似的问题。如果我去画廊，选择一个或多个*Picasa*图像，然后选择“共享”，然后从选择器中选择我的应用程序，我的应用程序将抛出与上面相同的 SecurityException。任何从 ContentResolver 使用查询/加载方法的尝试都会抛出。

我还尝试添加 GALLERY_PROVIDER 权限，但没有帮助（另外，我查看了 Instagram 的清单；它没有列出此权限）。

最终，一时兴起，我从我的实体中取出了 android:launchMode="singleTask" ，低头一看，一切正常。

我不知道为什么单任务应用程序会被禁止以这种方式共享。漏洞？特征？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T13:52:53.797

我最终解决这个问题的方法是将图像保存在本地，并在我需要图像的任何时候使用该图像的 uri

```
@Override
    public void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent){
        super.onActivityResult(requestCode, resultCode, imageReturnedIntent); 

            if(resultCode == Activity.RESULT_OK && requestCode == 1){  
                Uri selectedImage = imageReturnedIntent.getData();
                new SaveImage().execute(selectedImage.toString());

        }
    }

public class SaveImage extends AsyncTask<String,Void,Void>{

        @Override
        protected Void doInBackground(String... params) {
            String uri = params[0];

            if(uri != null && !uri.equals("")){
                ContextWrapper cw = new ContextWrapper(getActivity());
                File directory = cw.getDir("imageDir", Context.MODE_PRIVATE);
                File mypath=new File(directory,String.valueOf(bowlerID)+"profile.jpg");
                FileOutputStream fos = null;
                InputStream input = null;
                try { 
                    fos = new FileOutputStream(mypath);
                    input = getActivity().getContentResolver().openInputStream(Uri.parse(uri));
                    Bitmap bitmap = BitmapFactory.decodeStream(input);
                    if(bitmap != null){
                        if(bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos)){
                            ContentValues values = new ContentValues();
                            values.put(BowlersDB.PHOTO_URI, mypath.getAbsolutePath());
                            getActivity().getContentResolver().update(BowlersDB.CONTENT_URI, values,BowlersDB.ID+"="+bowlerID,null);
                        }
                    }
                    fos.close();
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            return null;
        }

    } 
```

# delphi - AContext.data 可以为零吗？

> ID：13558178
> 
> 赞同：-1
> 
> 时间：2012-11-26T03:09:23.067
> 
> 标签：delphi, indy, delphi-xe3

在这段代码中，正如您在 Connect 上看到的那样，AContext.Data 填充了一些东西

```
TmyTThreadList = class(TThreadList)
  id: integer;
end;

var unique_id:integer;

procedure TfrmTestIdTCPServer.IdTCPServerConnect(AContext: TIdContext);
 begin
  CS.Enter;
  try
    inc(unique_id);
  finally
    CS.Leave;
  end;

   AContext.Data := myTThreadList.Create;
   list := myTThreadList(AContext.Data).LockList;
   try
     myTThreadList(AContext.Data).id := my_unique_id;
     list.Add(myTThreadList(AContext.Data));
   finally
     myTThreadList(AContext.Data).UnlockList;
   end;
 end; 
```

然后在断开连接时，编码器在这里检查 Acontext.Data <> nil

```
procedure TfrmTestIdTCPServer.IdTCPServerDisconnect(AContext: TIdContext);
 var
 begin
   if AContext.Data <> nil then
   begin 
```

问题是，他为什么要检查 nil ？

谢谢。

**编辑：**

我问这个，因为当我做同样的事情时， onExecute 我访问 AContext.Data ，有时（当同时连接许多客户端时） AContext.Data 为空，出现访问冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:23:45.337

最初的程序员可以出于多种不同的原因检查 Data 是否为 nil，真正知道这一点的唯一方法是问他/她为什么这样做。

我认为可能是：

*   即使为任何连接创建了一个新的*Data*对象，这个对象**也可以在连接的生命周期内被释放**，出于任何其他数量或原因。例如，由于存储在那里的数据或来自客户端或其他外部源的请求，在该服务器组件的 OnExecute 事件处理程序中。
*   也许在连接的生命周期内要执行的代码**超出了原始程序员的控制**，所以他/她没有其他方法可以知道 Data 对象是否仍然存在，例如组件编写者应该进行那种测试，或者一个在团队中工作的图书馆程序员。
*   最初的编码员只是那种**防御性的程序员**，即使他/她知道 Data 对象应该在那里，也正在应用检查，但只是为了确保它存在并防止意外的访问冲突。

至于您所关心的，AFAIK，Indy 不会触及 Data 对象，而是在 Task 实例的 Destroy 序列中。

TIdTask.Data[文档](http://www.indyproject.org/docsite/html/TIdTask_Data.html)指出：

> 用户指定的对象，其值在任务执行期间使用。Data 是一个 TObject 属性，表示用户指定的对象实例，其值可在任务执行期间使用。
> 
> 在 Create 中创建任务后，必须将对象实例分配给 Data。
> 
> Data 属性归 TIdTask 实例所有，将在 Destroy 中释放。

并且没有提及 Indy 本身释放数据的任何情况。

我做了一个测试，将一个对象分配给一个新连接，在服务器中对其进行一些工作并从客户端进行多个连接，并且在数千个连接之后，没有人未能保持正确的 Data 对象附加到每个 AContext调用，不仅对 OnDisconnect，而且对 OnExecute 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T22:12:40.920

`OnConnect`如果事件处理程序中发生未捕获的异常，`OnDisconnect`仍然可以调用该事件。如果到那时引发异常，`TThreadList.Create`则`AContext.Data`不会分配。

# sql - 如何在存储过程中将 JDE 日期转换为 SQL 日期

> ID：13558183
> 
> 赞同：2
> 
> 时间：2012-11-26T03:09:59.153
> 
> 标签：sql, sql-server-2005

我已经为此工作了几天，并尝试了我能找到的所有选项。我希望有人可以解决这个问题。在存储过程中，我将数据从 JDE 提取到 SQL 表中。其中一个字段是 JDE 日期字段，我需要将其放入日期时间格式的 SQL 表中。日期字段是 IVEFTJ。

我有以下情况：

```
SELECT DISTINCT * FROM OPENQUERY(GDCJDE9PRODR, '
    SELECT 
       IVLITM,
       IVCITM,
       IVEFTJ,
       Convert(datetime,DATEADD(day,[IVEFTJ]-729960,Convert(datetime,"1900-01-01")),103) as BCDAte
FROM 
    PRODDTA.F4104
WHERE
    IVXRT = ''UP'' 
') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:37:26.037

您不能在 openquery SQL 语句中使用 SQL 函数，因为该语句与您从中选择行的数据库相关。而是使用外部 SQL 语句中的函数，如下所示：

```
SELECT DISTINCT 
   IVLITM,
   IVCITM,
   IVEFTJ,
   dateadd(day, convert(int, substring(IVEFTJ, 4, 3)), convert(datetime,convert(varchar(4), convert(int, substring(IVEFTJ, 1, 1))*100 + 1900 + convert(int, substring(IVEFTJ, 2, 2))) + '-01-01 00:00:00', 121)) as BCDAte 
FROM OPENQUERY(GDCJDE9PRODR, '
SELECT 
   IVLITM,
   IVCITM,
   IVEFTJ,
   IVEFTJ
FROM 
PRODDTA.F4104
WHERE
IVXRT = ''UP'' 
') 
```

这是你玩的[sqlfiddle](http://sqlfiddle.com/#!3/d41d8/6662)

# jquery - 使用 jQuery File Upload 到 s3 rails app 时获取 403（禁止）

> ID：13558185
> 
> 赞同：1
> 
> 时间：2012-11-26T03:10:07.580
> 
> 标签：jquery, file-upload, ruby-on-rails-3.1, amazon-s3, railscasts

我想将图像上传到 s3。为此，我正在关注[http://railscasts.com/episodes/383-uploading-to-amazon-s3](http://railscasts.com/episodes/383-uploading-to-amazon-s3)

我可以将单个图像上传到 s3，但现在我正在使用 jquery 文件上传来上传多个文件。

当我尝试上传文件时，它给了我 403（禁止）。

我需要做什么来修复它？

感谢任何可以提前提供帮助的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T11:35:37.907

在测试时，您可以使用非常广泛的 CORS 配置

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>PUT</AllowedMethod>
        <AllowedMethod>POST</AllowedMethod>
        <AllowedMethod>GET</AllowedMethod>
        <MaxAgeSeconds>3000</MaxAgeSeconds>
        <AllowedHeader>*</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:39:43.603

您需要检查您的 S3 存储桶的权限。它应该允许“上传/删除”。

此外，您应该设置 CORS 配置（CORS：跨域资源共享）（对于您的存储桶，转到 Properties ==> Permissions，然后单击“Add CORS Configuration”）

该文件应该是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>http://localhost:3000</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedMethod>POST</AllowedMethod>
        <AllowedMethod>PUT</AllowedMethod>
        <MaxAgeSeconds>3000</MaxAgeSeconds>
        <AllowedHeader>*</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

在这里，它允许我的本地主机将文件发布到此存储桶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-06T14:47:02.227

除了 CORS，可能会出现 403，因为设置了错误的 contentType。

服务器端：

```
GeneratePresignedUrlRequest rq = new GeneratePresignedUrlRequest(bucketName, objectKey);
rq.setContentType("video/*");
... 
```

客户端：

```
$.ajax({
                url:upUrl,
                type: "PUT",
                data: file,
                contentType:'video/*',
                cache: false,
                processData:false,
                success: function (data) {

                }
              }); 
```

# c - 旋风是否对胖指针执行静态或动态检查？

> ID：13558189
> 
> 赞同：2
> 
> 时间：2012-11-26T03:10:13.730
> 
> 标签：c, static-analysis, bounds-checker

我正在通过[Cyclone: A Safe Dialect of C](http://www.cs.umd.edu/projects/cyclone/papers/cyclone-safety.pdf) for a PL class 工作。该论文的作者解释说，他们添加了一个特殊的“胖”指针，用于存储边界信息以防止缓冲区溢出。但是他们没有指定对这个指针的检查是静态的还是动态的。他们给出的例子似乎暗示程序员必须记住检查数组的大小，以检查它们是否不超过缓冲区。这似乎打开了编程错误的可能性，就像在 C 中一样。我认为 Cyclone 的整个想法是使此类错误成为不可能。语言有检查吗？是否只会让编程错误变得更难？

```
int strlen(const char ?s) {
    int i, n;
    if (!s) return 0;
    n = s.size; //what if the programmer forgets to do this.. or accidentally adds an n++;
    for (i = 0; i < n; i++,s++)
         if (!*s) return i;
    return n;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:09:28.000

> “胖”指针支持带有运行时边界检查的指针算术。

通过谷歌搜索“胖指针”从[Wikipedia获得。](http://en.wikipedia.org/wiki/Cyclone_%28programming_language%29)

# rest - RESTful 设计：重命名的资源是否应该永远阻止旧的 URI？

> ID：13558192
> 
> 赞同：3
> 
> 时间：2012-11-26T03:10:21.663
> 
> 标签：rest, api-design

我正在尝试了解[RESTful Web 服务](http://shop.oreilly.com/product/9780596529260.do?sortby=publicationDate)页面 274 部分`HTTP PUT`。对`PUT`不存在的资源进行发布会创建资源。如果`PUT`导致现有资源移动，则返回[HTTP 301（永久移动）](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.2)和新位置。对旧 URI 的请求返回 HTTP 301、404 或 410。

我的问题是关于返回`HTTP 301`。这似乎意味着资源永远保留旧 URI 的所有权。

考虑：`/companies/{companyName}/departments/{departmentName}`

我看到使用以下好处`HTTP 301`：

*   **并发**：如果一个用户重命名一家公司，而另一个用户正在导航到一个部门，尽管他们没有做错任何事情，但后者将获得 HTTP 404。`HTTP 301`允许我们无缝地将第二个用户重定向到新的 URI。
*   **书签**：人类和计算机都需要为 URI 添加书签以进行长期存储。人类在讨论论坛中发布链接。计算机将 URI 用于缓存目的和用户偏好。

我看到以下问题`HTTP 301`：

*   **阻止长期资源演变**：在其生命周期内，部门`A`被重命名为`B`和。几年后，有人想创建部门，但被. 公平地说，我想不出任何会发生这种情况的实际例子，所以也许这不是问题。`C``D``A``D`
*   **API 版本限制了它的使用**：随着新 API 版本的发布和旧版本的删除，甚至根资源也会随着时间而变化。`HTTP 301`如果客户端不能以与旧资源相同的方式访问新资源，那么返回有什么意义？

**什么是适当的行动方案？**URL 层次结构是否应该以不同的方式建模？行为/反应应该不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:03:05.450

> 如果 PUT 导致现有资源移动，则返回 HTTP 301 和新位置。

从技术上讲，您不能在 HTTP 中*移动资源。*如果您作为客户端操作资源，您正在做的是：

```
GET /oldurl
PUT /newurl
DELETE /oldurl 
```

服务器不会知道新 URL 是资源在旧 URL 处的新位置，也没有客户端可以使用通用 HTTP 方法建立的重定向 URL 持久性的概念。如果服务提供允许您移动项目的 API，例如通过传递某些参数，并且基本上在幕后执行上述操作，但也在此过程中创建重定向，那么该重定向是否是由服务决定的是否可以用新操作覆盖`PUT`，以及要使用哪种重定向。

> 我的理解是，当帖子标题被重命名时，我们应该跟踪旧名称并在客户端引用旧地址时返回 HTTP 301。

这与 REST 无关，是[Cool URIs don't change](http://www.w3.org/Provider/Style/URI.html)的一种表现。在 RESTful 服务中，通过可从服务入口点访问的资源或资源序列链接到新 URL 就足够了。

例如，HTML 网站是 REST 实现的规范示例

服务入口点 = /blog
/blog 链接到 /blog/archive
/blog/archive 链接到 /blog/new-post-title

由于博客服务旨在供人们使用 Web 浏览器使用，因此预计他们可能希望将 URL 加入书签以便以后重新访问。这就是重定向的用途。

机器对机器的 API 必须做类似的事情：

服务入口点 = //
链接到 /companies，rel 为“http://myservice/rels/companies”
/companies 链接到 /companies/new-company-name，rel 为“item”

无需提及旧的公司名称，因为机器不会为某个位置添加书签，而是每次都从入口点开始导航。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:47:34.887

我会返回一个简单的`404`. 这表示没有与请求的 uri 匹配的内容，并且从[文档](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)中指定：

> 没有说明这种情况是暂时的还是永久性的。

这样，创建新资源来替换过去某个时候存在的资源是完全有效的。

否则，如果您要通过重命名来*移动*资源，则始终可以返回 a `302`，指定资源位于不同的位置。您可以返回此状态，直到生成替换为止。用户必须继续使用这些标头以确保资源仍然被重新定位：

> 由于重定向有时可能会改变，客户端应该继续使用 Request-URI 来处理未来的请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:46:57.993

Answering my own question:

1.  I can't think of any practical example where keeping `HTTP 301` forever would cause problems.
2.  Links are not meant to survive across API versions. Resources from one version should not reference resources from another version (even using `HTTP 301`). If a resource's URI changes as the result of an API change, the old API should keep on using the old URI forever.

**UPDATE**: According to [Willy Tarreau](http://lists.w3.org/Archives/Public/ietf-http-wg/2013OctDec/0145.html) idempotency only requires the application to redirect for a short period of time. Once the client has finished retrying a request, the redirect is no longer needed (at least not for idempotency). You might want to keep redirects around for a longer period of time, to support features such as permalinks, but nothing in the specification forces you to.

# visual-studio-2010 - ctrl-c ctrl-v 停止在 Visual Studio 2010 和 2012 中工作

> ID：13558193
> 
> 赞同：2
> 
> 时间：2012-11-26T03:10:22.303
> 
> 标签：visual-studio-2010, visual-studio-2012

无法弄清楚发生了什么，并且最近没有安装插件。有谁知道可能导致它的原因？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T03:17:02.707

如果它与 Visual Studio 隔离，请转到工具--> 选项--> 键盘并验证它`Ctrl``C`仍然 `Ctrl``V`分别绑定到`Edit.Cut`和`Edit.Paste`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-20T08:16:33.620

去视觉工作室

在工具 > 选项 > 键盘中

将映射方案 dropdonw 设置为 Default 并单击 Reset 按钮。

立即重新启动 Visual Studio。

您的问题可能已解决。

# ruby-on-rails - 销毁会话，Rails 设计

> ID：13558195
> 
> 赞同：0
> 
> 时间：2012-11-26T03:10:28.073
> 
> 标签：ruby-on-rails, devise

我已经设置了 Devise 来验证/注册用户。

但是在签出它们时遇到问题。

有这个链接：

```
<%= link_to "Sign out", destroy_user_session_path, :method => :delete %> 
```

它在 HTML 中看起来像这样：

```
<a href="/users/sign_out">Sign Out</a> 
```

当我单击它时 - 收到此错误：

```
No route matches [GET] "/users/sign_out" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:42:10.917

首先，确保您`<%= javascript_include_tag :defaults %>`的布局文件中有“application.html.erb”。

然后，在你的 config -> initializers -> "devise.rb" 文件中确保它说：

`config.sign_out_via = :delete`

并且您的“sign_out”代码`destroy_user_session_path, :method => :delete`应该可以工作。

如果还是不行请评论！

祝你好运。

# java - 如何在java中创建学生名册

> ID：13558196
> 
> 赞同：0
> 
> 时间：2012-11-26T03:10:36.157
> 
> 标签：java

我有一个看起来像这样的家庭作业问题：

> （20 分）使用以下内容创建一个学生类：
> 
> *   一个名为“name”的私有字符串变量，用于存储学生的姓名
> *   一个名为“UFID”的私有整数变量，其中包含该学生的唯一 ID 号
> *   一个名为“DOB”的私有字符串变量，用于存储学生的出生日期
> *   一个名为 numberOfStudents 的私有整数类变量，用于跟踪到目前为止已创建的学生数量
> *   公共构造函数 Student(String name, int UFID, String dob)
> *   所有属性的几个公共 get/set 方法
>     
>     
>     
>     ```
>     getName/setName
>     getUFID/setUFID
>     getDob/setDob 
>     ```
>     
>     
> *   编写一个测试程序 roster.java，保存当前注册学生的列表。它应该具有能够招收新学生和放弃现有学生的方法。

我不是要求任何人为我做这个任务，我只是真的需要一些一般性的指导。我认为我的`Student`课程做得很好，但我不能确切地说`addStudent()`and`dropStudent()`方法应该做什么 - 它应该向数组或其他东西添加一个元素还是只是增加学生的数量？我到目前为止的代码看起来像这样。

```
public class Student {
    private String name;
    private int UFID;
    private String DOB;
    private static int numberOfStudents;

    public Student(String name, int UFID, String DOB) {
        this.name = name;
        this.UFID = UFID;
        this.DOB = DOB;
    }

    public String getDOB() {
        return DOB;
    }

    public void setDOB(String dOB) {
        DOB = dOB;
    }

    public int getUFID() {
    return UFID; }

    public void setUFID(int uFID) {
    UFID = uFID; }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getNumberOfStudents() {
        return numberOfStudents;
    }

    public void setNumberOfStudents(int numberOfStudents) {
        Student.numberOfStudents = numberOfStudents;
    }

    public static void addStudent(String name, int UFID, String DOB) {
        numberOfStudents++;
    }

    public static void dropStudent(String name) {
        numberOfStudents--;
    }
} 
```

我将不胜感激任何指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T03:13:21.613

作业自己写：您需要一个拥有并维护学生集合的 Roster 类：

```
public class Roster {
    private Set<Student> roster = new HashSet<Student>();

    public void addStudent(Student s) { this.roster.add(s); }

    public void removeStudent(Student s) { this.roster.remove(s); }
} 
```

# matlab - 使用向量来索引没有线性索引的矩阵

> ID：13558199
> 
> 赞同：5
> 
> 时间：2012-11-26T03:11:00.290
> 
> 标签：matlab, vector, matrix, indexing, subscript

G'day，我正在尝试找到一种方法来使用 [x,y] 点的向量从 MATLAB 中的大矩阵中进行索引。通常，我会将下标点转换为矩阵的线性索引。（例如，[使用向量作为矩阵的索引](https://stackoverflow.com/questions/5904488/use-a-vector-as-an-index-to-a-matrix-in-matlab)）但是，矩阵是 4 维的，我想取第 3 维和第 4 维具有相同的第 1 维和第 2 维。让我希望用一个例子来证明：

```
Matrix = nan(4,4,2,2); % where the dimensions are (x,y,depth,time)
Matrix(1,2,:,:) = 999; % note that this value could change in depth (3rd dim) and time (4th time) 
Matrix(3,4,:,:) = 888; % note that this value could change in depth (3rd dim) and time (4th time) 
Matrix(4,4,:,:) = 124; 
```

现在，我希望能够使用下标 (1,2) 和 (3,4) 等进行索引，并且不仅返回存在于的 999 和 888，而且返回`Matrix(:,:,1,1)`存在于`Matrix(:,:,1,2)`、`Matrix(:,:,2,1)`和`Matrix(:,:,2,2)`等处的内容（IRL , 的维度`Matrix`可能更像`size(Matrix) = (300 250 30 200)`

我不想使用线性索引，因为我希望结果采用类似的矢量方式。例如，我想要一个类似的结果：

```
ans(time=1)
999 888 124
999 888 124
ans(time=2)
etc etc etc
etc etc etc 
```

我还想补充一点，由于我正在处理的矩阵的大小，速度在这里是一个问题 - 因此我想使用下标索引来索引数据。

我还应该提一下（与这个问题不同：[Accessing values using subscripts without using sub2ind](https://stackoverflow.com/questions/1146719/accessing-values-using-subscripts-without-using-sub2ind?rq=1)）因为我希望所有信息都存储在 i 和 jth 索引的额外维度 3 和 4 中，我不认为稍微快一点版本的`sub2ind`仍然不会削减它..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T06:07:44.230

我可以想到三种方法来解决这个问题

## 简单循环

只需遍历您拥有的所有 2D 索引，并使用冒号访问剩余的维度：

```
for jj = 1:size(twoDinds,1)
    M(twoDinds(jj,1),twoDinds(jj,2),:,:) = rand;
end 
```

## 线性指数的矢量化计算

跳过`sub2ind`并向量化线性索引的计算：

```
% generalized for arbitrary dimensions of M

sz = size(M);
nd = ndims(M);

arg = arrayfun(@(x)1:x, sz(3:nd), 'UniformOutput', false);

[argout{1:nd-2}] = ndgrid(arg{:});

argout = cellfun(...
    @(x) repmat(x(:), size(twoDinds,1),1), ...
    argout, 'Uniformoutput', false);

twoDinds = kron(twoDinds, ones(prod(sz(3:nd)),1));

% the linear indices
inds = twoDinds(:,1) + ([twoDinds(:,2) [argout{:}]]-1) * cumprod(sz(1:3)).'; 
```

## Sub2ind

只需使用 Matlab 附带的现成工具：

```
inds = sub2ind(size(M), twoDinds(:,1), twoDinds(:,2), argout{:}); 
```

## 速度

那么哪个最快？让我们来了解一下：

```
clc

M = nan(4,4,2,2);

sz = size(M);
nd = ndims(M);

twoDinds = [...
    1 2
    4 3
    3 4
    4 4
    2 1];

tic
for ii = 1:1e3
    for jj = 1:size(twoDinds,1)
        M(twoDinds(jj,1),twoDinds(jj,2),:,:) = rand;
    end
end
toc

tic
twoDinds_prev = twoDinds;
for ii = 1:1e3

    twoDinds = twoDinds_prev;

    arg = arrayfun(@(x)1:x, sz(3:nd), 'UniformOutput', false);

    [argout{1:nd-2}] = ndgrid(arg{:});

    argout = cellfun(...
        @(x) repmat(x(:), size(twoDinds,1),1), ...
        argout, 'Uniformoutput', false);

    twoDinds = kron(twoDinds, ones(prod(sz(3:nd)),1));
    inds = twoDinds(:,1) + ([twoDinds(:,2) [argout{:}]]-1) * cumprod(sz(1:3)).';

    M(inds) = rand;

end
toc

tic
for ii = 1:1e3

  twoDinds = twoDinds_prev;

    arg = arrayfun(@(x)1:x, sz(3:nd), 'UniformOutput', false);

    [argout{1:nd-2}] = ndgrid(arg{:});

    argout = cellfun(...
        @(x) repmat(x(:), size(twoDinds,1),1), ...
        argout, 'Uniformoutput', false);

    twoDinds = kron(twoDinds, ones(prod(sz(3:nd)),1));

    inds = sub2ind(size(M), twoDinds(:,1), twoDinds(:,2), argout{:});

    M(inds) = rand;
end
toc 
```

结果：

```
Elapsed time is 0.004778 seconds.  % loop
Elapsed time is 0.807236 seconds.  % vectorized linear inds
Elapsed time is 0.839970 seconds.  % linear inds with sub2ind 
```

结论：使用循环。

诚然，上述测试很大程度上受到 JIT 未能编译最后两个循环的影响，以及对 4D 数组的非特异性（最后两种方法也适用于 ND 数组）。制作 4D 的专用版本无疑会快得多。

尽管如此，由于 JIT，使用简单循环的索引是最简单的，最简单的，也非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:41:24.090

所以，这是一个可能的答案......但它很混乱。我怀疑它会比更直接的方法在计算上更昂贵......这绝对不是我的首选答案。如果我们能在没有任何 for 循环的情况下得到答案，那就太好了！

```
Matrix = rand(100,200,30,400);
grabthese_x = (1 30 50 90);
grabthese_y = (61 9 180 189);
result=nan(size(length(grabthese_x),size(Matrix,3),size(Matrix,4));
for tt = 1:size(Matrix,4)
subset = squeeze(Matrix(grabthese_x,grabthese_y,:,tt));
 for NN=1:size(Matrix,3)
 result(:,NN,tt) = diag(subset(:,:,NN));
 end
end 
```

生成的矩阵`result`应该有 size `size(result) = (4 N tt)`。

我认为这应该有效，即使`Matrix`不是方形的。但是，正如我上面所说，它并不理想。

# java - 如何制作“不再显示此警告消息”对话框弹出框

> ID：13558209
> 
> 赞同：2
> 
> 时间：2012-11-26T03:12:20.870
> 
> 标签：java, android, android-layout

我正在尝试创建一个对话框以在我的应用程序中显示介绍消息，并在其下方带有“不再显示”复选框。我不知道如何编写代码。

< **MainActivity.java** >

```
@Override

    protected void onStart()
    {
        super.onStart();

        final Dialog dialog = new Dialog(this);
        dialog.setContentView(R.layout.dialog);
        dialog.setTitle("Warning!");

        Button button = (Button) dialog.findViewById(R.id.okay);
        button.setOnClickListener(new OnClickListener() {  
            @Override  
            public void onClick(View view) {  
                dialog.dismiss();            
            }  
        });

        dialog.show();
    } 
```

这是我的java代码

这是我的 layout.xml 代码

<**对话框.xml** >

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/layout_root"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

  <RelativeLayout
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="10.0dip" >

    <TextView
        android:id="@+id/content"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:text="@string/brick_warning"
        android:textSize="15dp" />
</RelativeLayout>

  <CheckBox
      android:id="@+id/dont_show"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="@string/dont_show"
      android:textSize="13dp" />

  <LinearLayout
    style="?android:attr/buttonBarStyle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:orientation="horizontal" >

  <Button
        android:id="@+id/okay"
        style="?android:attr/buttonBarButtonStyle"
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:text="@string/dialog_continue" />

   </LinearLayout>

</LinearLayout> 
```

祝你有美好的一天 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-18T14:07:02.733

海对不起迟到的答案，但在您的问题中
，您可以使用共享首选项轻松解决它
，[链接](http://programondaspot.blogspot.com/2015/07/make-dont-show-this-message-again-on.html)如下：

和代码：

```
 AlertDialog.Builder adb= new

 AlertDialog.Builder(this);
 LayoutInflater adbInflater = 

  LayoutInflater.from(this);
  View eulaLayout = adbInflater.inflate

  (R.layout.activity_main, null);
  check = (CheckBox)

     eulaLayout.findViewById(R.id.skip);
  adb.setView(eulaLayout);
  adb.setTitle("Example:");
   adb.setMessage(Html.fromHtml("Type your 

  text here: "));
    adb.setPositiveButton("Ok", new

   DialogInterface.OnClickListener() {
      public void onClick(DialogInterface 

    dialog, int which) {
        String checkBoxResult = "NOT 

     checked";
        if (check.isChecked())  

     checkBoxResult = "checked";
          SharedPreferences settings = 

         getSharedPreferences(PREFS_NAME, 0);
          SharedPreferences.Editor 

         editor = settings.edit();
          editor.putString("noshow", 

        checkBoxResult);
          // Commit the edits!

        //  sunnovalthesis();

          editor.commit();
        return;
    } });

   adb.setNegativeButton("Cancel", new

DialogInterface.OnClickListener() {
public void onClick(DialogInterface 

 dialog, int which) {
    String checkBoxResult = "NOT 

checked";
    if (check.isChecked())  

   checkBoxResult = "checked";
    SharedPreferences settings = 

   getSharedPreferences(PREFS_NAME, 0);
      SharedPreferences.Editor editor = 

    settings.edit();
      editor.putString("noshow", 

checkBoxResult);
      // Commit the edits!

    //  sunnovalthesis();

      editor.commit();
        return;
} });
 SharedPreferences settings = 

getSharedPreferences(PREFS_NAME, 0);
   String noshow = settings.getString

 ("noshow", "NOT checked");
  if (noshow != "checked" ) adb.show(); 
```

快乐编码！

# javascript - 使用递增变量访问数组中的变量

> ID：13558214
> 
> 赞同：0
> 
> 时间：2012-11-26T03:12:53.180
> 
> 标签：javascript, asp.net-mvc-3, counter

我正在尝试遍历标记集合并使用计数器变量来连接事件。`"When someone clicks a marker, show the infobox in position 'count'"`

问题在于脚本执行时，计数变量在每个点击事件订阅者之间共享。

这意味着，在标记 A 或 B 中的单击被连接到相同的位置，这意味着相同的 InfoBox。

```
 var popups = [];
    var count = 0;

    @foreach (var marker in Model) {
        <text>
        /* Create Markers */
        popups[count] = {};

        popups[count]["marker"] = new google.maps.Marker({
            map: themap
        });

        popups[count]["content"] = document.createElement("div");</div>';

        popups[count]["infoboxoptions"] = {
            boxClass: 'infobox-custom'
        };

        popups[count]["infobox"]= new InfoBox(popups[count]["infoboxoptions"]);            

        google.maps.event.addListener(popups[count]["marker"], "click", function (e) {
            popups[count]["infobox"].open(themap, this);
            /* PROBLEM IS HERE! ^ */
        });
        count++;
        </text>
    } 
```

我理解这个问题，但不知道如何解决它。Javascript 为每个点击事件使用相同的变量，并且在每次迭代后递增它也为每个点击事件递增它。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:24:52.753

这是一个解决方案。我使用 Razor 引擎来输出一个硬编码的`number`值。

```
var popups = [];
var count = 0;

@{ var i = 0; }
@foreach (var marker in Model) {
    <text>
    /* Create Markers */
    popups[count] = {};

    popups[count]["marker"] = new google.maps.Marker({
        map: themap
    });

    popups[count]["content"] = document.createElement("div");</div>';

    popups[count]["infoboxoptions"] = {
        boxClass: 'infobox-custom'
    };

    popups[count]["infobox"]= new InfoBox(popups[count]["infoboxoptions"]);            

    google.maps.event.addListener(popups[count]["marker"], "click", function (e) {
        popups[@i]["infobox"].open(themap, this);
    });
    count++;
    </text>
    i++;
} 
```

# c# - Antlr3、C# 和 VS 2012 Express

> ID：13558217
> 
> 赞同：1
> 
> 时间：2012-11-26T03:13:09.600
> 
> 标签：c#, .net, antlr3

我正在使用 VS 2012 Express 中的 Antlr3 运行时，在尝试构建项目时，我从生成的文件中收到以下错误：

```
C:\dev\projects\vs\ANTLR\T\obj\Debug\TParser.cs(587,23,587,29): error CS0102: The type 'T.TParser' already contains a definition for 'Follow
C:\dev\projects\vs\ANTLR\T\obj\Debug\TLexer.cs(2587,16,2587,20): error CS0102: The type 'T.TLexer' already contains a definition for 'DFA7' 
```

我试过到处搜索这方面的任何东西，但似乎在任何地方都没有提到这一点。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:14:14.360

它看起来像目标生成中的错误 C# 或 ANTRL 本身。目前尚不清楚您使用的是哪个 ANTLR 版本。在这种情况下，您可以尝试更新版本或更早版本的 ANTLR。或者看看再次定义了什么并自己修复生成的代码。

# java - 扫描 nfc 时缺少 Android tabhost

> ID：13558219
> 
> 赞同：0
> 
> 时间：2012-11-26T03:13:20.990
> 
> 标签：java, android, image, dynamic, nfc

当我扫描我的 NFC 标签时，我的应用程序启动并执行它必须做的事情，但 tabhost 丢失了。mainactivity.java 是我用 3 个选项卡初始化 tabhost 的地方，下面第一部分代码是我利用 NFC 读取功能的选项卡之一。这是因为pendingintent吗？我真的不知道如何解决它，我是否必须在每个活动布局中实现 3 个选项卡？

我的代码：

```
package com.example.ponpon;

import android.annotation.TargetApi;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.PendingIntent;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.SharedPreferences;
import android.nfc.NdefMessage;
import android.nfc.NfcAdapter;
import android.os.Bundle;
import android.os.Parcelable;
import android.os.PatternMatcher;
import android.preference.Preference;
import android.preference.PreferenceManager;
import android.provider.Settings;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.Toast;

@TargetApi(10)
public class CouponManager extends Activity {

        private static final String TAG = "NFCReadTag";
        private NfcAdapter mNfcAdapter;
        private IntentFilter[] mNdefExchangeFilters;
        private PendingIntent mNfcPendingIntent;
        public static final String PREF_FILE_NAME = "PrefFile";

        private int[] images = new int[11];

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.coupon_layout);

            //List of images
            images[0]=R.drawable.cp0;
            images[1]=R.drawable.cp1;
            images[2]=R.drawable.cp2;
            images[3]=R.drawable.cp3;
            images[4]=R.drawable.cp4;
            images[5]=R.drawable.cp5;
            images[6]=R.drawable.cp6;
            images[7]=R.drawable.cp7;
            images[8]=R.drawable.cp8;
            images[9]=R.drawable.cp9;
            images[10]=R.drawable.cp10;

            //Restore preferences 
            SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE);
            int storedPreference = preferences.getInt("storedInt", 0);

            //Image to use depending on coupon collected
            final ImageView img = (ImageView)findViewById(R.id.imageView1);

            if(storedPreference!=10)
            {
                img.setImageResource(images[storedPreference]);
                img.invalidate();
            }
            else
            {
                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setCancelable(false);
                builder.setTitle("Coupon Redemption");
                builder.setMessage("Redeem Your Coupon?");
                builder.setInverseBackgroundForced(true);
                builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which)
                    {
                        dialog.dismiss();
                        SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE);
                        SharedPreferences.Editor editor = preferences.edit();
                        editor.putInt("storedInt", 0); // value to store
                        editor.commit();    
                        img.setImageResource(images[0]);
                        img.invalidate();
                    }
                });
                builder.setNegativeButton("No", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();
                        img.setImageResource(images[10]);
                        img.invalidate();
                    }
                });
                builder.show();
            }

            //Check and send Intent from NFC tag discovered
            mNfcAdapter = NfcAdapter.getDefaultAdapter(this);

            mNfcPendingIntent = PendingIntent.getActivity(this, 0, new Intent(this,
                    getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP
                    /*| Intent.FLAG_ACTIVITY_CLEAR_TOP*/), 0);

            IntentFilter coupontag = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);
            coupontag.addDataScheme("http");
            coupontag.addDataAuthority("www.ichatime.com", null);
            coupontag.addDataPath(".*", PatternMatcher.PATTERN_SIMPLE_GLOB);

            mNdefExchangeFilters = new IntentFilter[] { coupontag };

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

        @Override
        protected void onResume() {
            super.onResume();
            if(mNfcAdapter != null) {
                mNfcAdapter.enableForegroundDispatch(this, mNfcPendingIntent,
                    mNdefExchangeFilters, null);
            } else {
                Toast.makeText(getApplicationContext(), "Sorry, No NFC Adapter found.", Toast.LENGTH_SHORT).show();
            }

        }

        @Override
        protected void onPause() {
            super.onPause();
            if(mNfcAdapter != null) mNfcAdapter.disableForegroundDispatch(this);
            SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE);
            int storedPreference = preferences.getInt("storedInt", 0);

            SharedPreferences.Editor editor = preferences.edit();
            editor.putInt("storedInt", storedPreference); // value to store
            editor.commit();    
        }

        @Override
        protected void onStop() {
            super.onStop();

            // We need an Editor object to make preference changes.
              // All objects are from android.context.Context
                SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE);
                int storedPreference = preferences.getInt("storedInt", 0);

                SharedPreferences.Editor editor = preferences.edit();
                editor.putInt("storedInt", storedPreference); // value to store
                editor.commit();    
        }

        @Override
        protected void onDestroy() {
            super.onDestroy();

            // We need an Editor object to make preference changes.
              // All objects are from android.context.Context
                SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE);
                int storedPreference = preferences.getInt("storedInt", 0);

                SharedPreferences.Editor editor = preferences.edit();
                editor.putInt("storedInt", storedPreference); // value to store
                editor.commit();    
        }

        @Override
           public void onBackPressed() {
            SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE);
            int storedPreference = preferences.getInt("storedInt", 0);

            SharedPreferences.Editor editor = preferences.edit();
            editor.putInt("storedInt", storedPreference); // value to store
            editor.commit();    
               super.onBackPressed();
           }

        @Override
        protected void onNewIntent(Intent intent) {
            super.onNewIntent(intent);      
            SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE);
            int storedPreference = preferences.getInt("storedInt", 0);

            if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(intent.getAction())) {
                NdefMessage[] messages = null;
                Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
                if (rawMsgs != null) {
                    messages = new NdefMessage[rawMsgs.length];
                    for (int i = 0; i < rawMsgs.length; i++) {
                        messages[i] = (NdefMessage) rawMsgs[i];
                    }
                }
                if(messages[0] != null) {
                    String result="";
                    byte[] payload = messages[0].getRecords()[0].getPayload();
                    // this assumes that we get back am SOH followed by host/code
                    for (int b = 1; b<payload.length; b++) { // skip SOH
                        result += (char) payload[b];
                    }
                    if (result.contains("ichatime.com"))
                        {
                        final ImageView img = (ImageView)findViewById(R.id.imageView1);

                        /*if (storedPreference!=10)
                        {
                            Toast.makeText(getApplicationContext(), "Coupon collected!", Toast.LENGTH_SHORT).show();
                            storedPreference++;
                            SharedPreferences.Editor editor = preferences.edit();
                            editor.putInt("storedInt", storedPreference);
                            img.setImageResource(images[storedPreference]);
                            img.invalidate();
                        }*/
                            if (storedPreference==10)
                            {
                                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                                builder.setCancelable(false);
                                builder.setTitle("Redeem Your Coupon?");
                                builder.setInverseBackgroundForced(true);
                                builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog, int which)
                                    {
                                        dialog.dismiss();
                                        SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE);
                                        SharedPreferences.Editor editor = preferences.edit();
                                        editor.putInt("storedInt", 0); // value to store
                                        editor.commit();    
                                        img.setImageResource(images[0]);
                                        img.invalidate();
                                    }
                                });
                                builder.setNegativeButton("No", new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog, int which) {
                                        dialog.dismiss();
                                        img.setImageResource(images[10]);
                                        img.invalidate();
                                    }
                                });
                                builder.show();
                            }
                        else
                        {
                            Toast.makeText(getApplicationContext(), "Coupon collected!", Toast.LENGTH_SHORT).show();
                            storedPreference++;
                            SharedPreferences.Editor editor = preferences.edit();
                            editor.putInt("storedInt", storedPreference);
                            editor.commit();
                            img.setImageResource(images[storedPreference]);
                            img.invalidate();
                        }}
                    else 
                    {
                        Toast.makeText(getApplicationContext(), "Wrong tag detected!", Toast.LENGTH_SHORT).show();
                    }
                    //Debugging Mode to see what is contained in the tags.
            //          Toast.makeText(getApplicationContext(), "Tag Contains " + result, Toast.LENGTH_SHORT).show();
                }
            }
        }

    } 
```

***还有，我的主要活动：***

```
package com.example.ponpon;

import android.os.Bundle;
import android.app.TabActivity;
import android.content.Intent;
import android.view.Menu;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class MainActivity extends TabActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TabHost tabHost = getTabHost();

        TabSpec spec1=tabHost.newTabSpec("Coupon Manager");
        spec1.setContent(R.id.tab1);
        spec1.setIndicator("Coupons");
        Intent CouponsIntent = new Intent(this, CouponManager.class);
        spec1.setContent(CouponsIntent);

        TabSpec spec2=tabHost.newTabSpec("Help");
        spec2.setIndicator("Help");
        spec2.setContent(R.id.tab2);
        Intent SettingsIntent = new Intent(this, Settings.class);
        spec2.setContent(SettingsIntent);

        TabSpec spec3=tabHost.newTabSpec("Write[Vendor]");
        spec3.setIndicator("Write\n[Vendor]");
        spec3.setContent(R.id.tab3);
        Intent HelpIntent = new Intent(this, HelpActivity.class);
        spec3.setContent(HelpIntent);

        tabHost.addTab(spec1);
        tabHost.addTab(spec2);
        tabHost.addTab(spec3);
        }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:28:39.920

仔细看看你的逻辑：你有

```
if (storedPreference!=10) {
    ...stuff... (including storedPreference++)
}
if (storedPreference==10) {
    ...stuff...
} else {
    SharedPreferences.Editor editor = preferences.edit();
    editor.putInt("storedInt", 10);
    img.setImageResource(images[10]);
    img.invalidate();
} 
```

您应该考虑用`else`块替换块的内容`storedPreference!=10`，然后摆脱第一个块。你需要的只是`if storedPreference==10`和`else`。

# css - 在 IE 的 Rails 中动态加载 CSS

> ID：13558221
> 
> 赞同：0
> 
> 时间：2012-11-26T03:13:44.467
> 
> 标签：css, ruby-on-rails, internet-explorer, internet-explorer-8, internet-explorer-7

我有一个应用程序`rails`。在我的应用程序中，有部分使用的地方。

每个部分使用，自带`CSS`

问题出现在我们亲爱的身上`Internet Explorer 7`，`Internet Explorer 8`它不允许我插入`CSS`外部标题。我试图通过以下方式做到这一点：

```
css=stylesheet_link_tag 'my_partial'
$(CSS).appendTo("head"); 
```

它在 Chrome、Safari 和 Firefox 中运行良好。但是，我无法`CSS`在 Internet Explorer 中加载。有人可以给我一个如何解决这个问题的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:12:53.263

`yield`可以在布局的 head 部分中包含一个部分。然后，您可以`content_for`在包含自定义 CSS 的每个部分中执行此操作。

例如在`layouts/application.html.erb`

```
<html>
<head>
  <!-- blah blah title and regular css here -->
  <%= yield :extra_stylesheets %>
</head>
... 
```

然后在部分：

```
<% content_for :extra_stylesheets do %>
  <%= stylesheet_link_tag 'my_partial_stylesheet' %>
<% end %> 
```

# tcp - 使用 Unix 域套接字与 TCP 套接字建立连接的成本是多少？

> ID：13558222
> 
> 赞同：10
> 
> 时间：2012-11-26T03:13:45.437
> 
> 标签：tcp, connection-pooling, unix-socket

奇怪的是，我没有通过谷歌搜索找到此信息。使用 Unix 域套接字与 TCP 套接字建立连接的成本是多少？

现在我必须使用 TCP 套接字进行连接池，因为重新连接非常昂贵。我想知道是否可以通过简单地切换到 Unix 域套接字并摆脱连接池来简化我的客户端。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-16T18:40:27.040

如果您查看代码，您会发现 Unix Domain 套接字执行的代码远少于 TCP 套接字。

通过 TCP 套接字发送的消息必须一路通过网络堆栈到达环回接口（在 Unix 风格的系统上通常称为“lo”的虚拟网络接口设备），然后返回到接收套接字。网络堆栈代码添加 TCP 和 IP 标头，做出路由决策，通过“lo”将数据包转发给自己，然后执行更多路由并将标头剥离。此外，由于 TCP 是一种网络协议，它的连接建立部分对于处理丢弃的数据包具有各种额外的复杂性。对您来说最重要的是，TCP 必须发送三个消息才能建立连接（SYN、SYN-ACK 和 ACK）。

Unix 域套接字只需查看虚拟文件系统（或“抽象名称空间”）即可找到目标套接字对象（在 RAM 中）并直接将消息排队。此外，即使您使用文件系统来命名目标套接字，如果该套接字最近被访问过，它的文件系统结构将缓存在 RAM 中，因此您不必转到磁盘。为 Unix 域套接字建立连接涉及在 RAM 中创建一个新的套接字对象实例（即，由 accept() 返回的套接字，这也是 TCP 必须完成的事情）并在每个套接字中存储一个指针两个连接的套接字对象（因此当它们需要发送时，它们每个都有一个指向另一个套接字的指针）。差不多就是这样。不需要额外的数据包。

By the way, this paper suggests that Unix Domain sockets are actually faster than even Pipes for data transfers:

[http://osnet.cs.binghamton.edu/publications/TR-20070820.pdf](http://osnet.cs.binghamton.edu/publications/TR-20070820.pdf)

Unfortunately, they didn't do specific measurements of connection establishment costs, but as I have said, I've looked at the Linux source code and it's really quite a lot simpler than the TCP connection establishment code.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T08:30:44.270

使用 TCP 套接字连接到服务器可能涉及网络流量以及 TCP[三向握手](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Connection_establishment)。

本地套接字（以前称为 Unix 域套接字）都是本地的，但需要访问磁盘上的物理文件。

如果您只进行本地通信，那么本地套接字可能会更快，因为协议的开销更少。如果您的应用程序需要远程连接，那么您不能使用本地套接字。

* * *

顺便说一句，如果您只是在本地进行通信，而不是通过网络进行通信，那么一对命名管道（或者如果您正在分叉，则为匿名管道）可能会更好。

# java - 关于代码的 UML 关联

> ID：13558225
> 
> 赞同：1
> 
> 时间：2012-11-26T03:14:51.710
> 
> 标签：java, uml

我完全理解代码但是我在理解与代码相关的 UML 时遇到了一些麻烦。

问题 1 - 如果我有课

```
public class one
{....}

public class two
{
    one ob;
    public two(){ob=new one();}
} 
```

我知道这是一个关联，但我是否在类图中用箭头显示它？

![在此处输入图像描述](../Images/d8588aeec0509fa143fbdd86ea3455c7.png)

问题 2 - 如果我有以下课程

```
public class three
{
   public three(){.........}

   public void method() {  one obt=new one();  }
} 
```

这是三班和一班之间的关联吗？我不确定，因为它是从方法中应用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:57:31.057

首先，箭头指向另一个方向，从`two`到`one`因为`two`指向`one`。如果你没有用箭头显示它，你就是说你不知道关系的方向 - 它可以是`one`call`two`和`two`call `one`。既然你知道`two`拥有`one`，你应该添加箭头方向。

关于你的第二个问题，是的，这是从`three`to `one`since `three`requires的关系`one`。这种关系可以是依赖关系或关联，取决于`three`与`one`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:01:09.057

> 我知道这是一个关联，但我是否在类图中用箭头显示它？

如果类`one`没有对类的引用，`two`那么你应该有一个箭头。但它指向`two`（`one`与您显示它的方式相反）。原因：箭头表示可导航性。类`two`可以导航到类`one`，因为它拥有一个实例。反之则不然。从技术上讲，它应该是一个开放的箭头，而不是您使用的封闭形式。

> 这是三班和一班之间的关联吗？我不确定，因为它是从方法中应用的。

`three`如果来自to的唯一引用`one`是作为方法参数，那么您很可能会显示为依赖项而不是关联。关联声明了实体之间的系统关系，例如`Purchase Order`由`Order Lines`. 在最常转换为成员变量（或其集合）的代码中。依赖关系是比关联更弱的关系形式，并不意味着系统链接。

hth。

# android - $.mobile.changePage 不起作用

> ID：13558226
> 
> 赞同：0
> 
> 时间：2012-11-26T03:15:00.420
> 
> 标签：android, html, cordova, jquery-mobile

我使用 $.mobile.changePage 转到另一个页面。它成功但几秒钟后页面自动返回到第一页。我怎么解决这个问题？这是我的代码

```
$("#frmLogin").on("submit", function(e){
var u = $("#username",this).val();
var p = $("#password",this).val();
if(u != '' && p != ''){
    if(window.method.login(u,p) == true){
        $.mobile.changePage("home.html");
    }else{  
             navigator.notification.alert("wrong combination");
}
}else{
 navigator.notification,alert("wrong");
}
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T04:03:51.543

代码运行后，表单将继续执行标准提交过程，其中包括重新加载页面。

要阻止这种情况发生，您的事件处理程序需要调用 preventDefault 或返回 false。

# clojure - Clojure 文档：理解这个 Reduce 函数的例子

> ID：13558229
> 
> 赞同：3
> 
> 时间：2012-11-26T03:15:19.993
> 
> 标签：clojure, reduce

通读[Clojure 文档](http://clojuredocs.org)，我对`reduce`函数的一个示例感到困惑。我明白是什么`reduce`，但在[这个例子](http://clojuredocs.org/clojure_core/clojure.core/reduce#example_72)中发生了很多事情，我不确定它们是如何协同工作的。

```
(reduce
  (fn [primes number]
    (if (some zero? (map (partial mod number) primes))
      primes
      (conj primes number)))
  [2]
  (take 1000 (iterate inc 3)))

=> [2 3 5 7 11 13 17 19 23 29 31 37 41 43 47 53 59 61 67 71 73 79 83 89 97 101 103 107 109 113 127 131 137 139 149 151 157 163 167 173 179 181 191 193 197 199 211 223 227 229 233 239 241 251 257 263 269 271 277 281 283 293 307 311 313 317 331 337 347 349 353 359 367 373 379 383 389 397 401 409 419 421 431 433 439 443 449 457 461 463 467 479 487 491 499 503 509 521 523 541 547 557 563 569 571 577 587 593 599 601 607 613 617 619 631 641 643 647 653 659 661 673 677 683 691 701 709 719 727 733 739 743 751 757 761 769 773 787 797 809 811 821 823 827 829 839 853 857 859 863 877 881 883 887 907 911 919 929 937 941 947 953 967 971 977 983 991 997] 
```

据我了解，`reduce`接受一个函数，在这种情况下是一个匿名函数。该函数有两个参数，一个集合和一个数字。然后我们有一个条件语句来检查数字零是否出现在集合中。

`(map (partial mod number) primes)`让我困惑。不`mod`接受两个参数并返回第一个除以第二个的余数？

看来，如果这个条件返回真，它返回素数的集合。如果不是，则将该数字添加到素数集合中。那是对的吗？

最后一行，它是从 3 开始的 1,000 个数字的集合。有人可以通过这个函数吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T04:26:22.570

您可能已经知道这一点，但首先要注意的是以下属性：如果一个数不能被任何小于它的素数整除，那么它就是素数。

所以匿名函数从一个先前素数的向量开始，然后检查 number 是否可以被任何先前素数整除。如果它可以被任何先前的素数整除，它将只传递先前素数的向量，否则它将当前数字添加到素数向量，然后返回新向量。

`(partial mod number)`相当于`(fn [x] (mod number x))`在这种情况下。

逐步介绍几个案例：

```
;Give a name to the anonymous function
(defn prime-checker [primes number]
  (if (some zero? (map (partial mod number) primes))
      primes
      (conj primes number)))

;This is how reduce will call the anonymous function
(prime-checker [2] 3) 
```

->`((map (partial mod number) primes) = [1]`

-> 将返回`[2 3]`

```
(prime-checker [2 3] 4) 
```

->`((map (partial mod number) primes) = [0 1]`

->`some zero?`在这里找到一个零值，所以函数将返回`[2 3]`

```
(prime-checker [2 3] 5) 
```

->`((map (partial mod number) primes) = [1 2]`

-> 将返回`[2 3 5]`

希望您可以从中看到如何使用此函数进行reduce 返回素数列表。

# c# - 如何使 SqlContext.Pipe.Send(string str) 立即刷新到 SSMS？

> ID：13558231
> 
> 赞同：2
> 
> 时间：2012-11-26T03:15:53.177
> 
> 标签：c#, sql-server, sqlclr

我正在使用 SqlContext.Pipe.Send(string str) 从 SQL/CLR 存储过程发送消息，但消息不会立即显示在 SSMS 中。如何立即将消息刷新到 SSMS？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:32:04.387

您可以像这样调整@RBarryYoung 所说的话：

```
SqlConnection sqlCon = new SqlConnection("context connection=true"));
sqlCon.Open();

try {
    SqlCommand sqlCommand = new SqlCommand(String.Format("raiserror('{0}', 0, 0) with nowait", str), sqlCon);
    SqlContext.Pipe.ExecuteAndSend(sqlCommand);
} finally {
    sqlCon.Close();
} 
```

如果要使用 Send 执行此操作，可以填充缓冲区：

```
SqlContext.Pipe.Send(str.PadRight(4000));
SqlContext.Pipe.Send(String.Empty.PadRight(4000)); 
```

可以处理的最大消息长度`Send()`是 4000。要填充缓冲区，您需要发送另一行带有空格的行。在第二行使用 4000 应该确保它刷新整个消息，无论缓冲区中已经存在什么。

第二种方式的唯一缺点是消息之间有一个空白行，并且有很多额外的空格。第一种方式产生更好的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:26:52.503

我知道的唯一方法是使用`RAISERROR`该`WITH NOWAIT`选项。这将导致所有待处理的文本输出立即刷新。这不一定是真正的错误或任何东西，这将正常工作：

```
RAISERROR(' ',1,1) WITH NOWAIT; 
```

# c# - 命令重定向问题

> ID：13558234
> 
> 赞同：1
> 
> 时间：2012-11-26T03:16:11.027
> 
> 标签：c#, command-line, io, standards

这是我的代码

```
//Create process
System.Diagnostics.Process pProcess = new System.Diagnostics.Process();

//strCommand is path and file name of command to run
pProcess.StartInfo.FileName = "ffmpeg.exe";

//strCommandParameters are parameters to pass to program
pProcess.StartInfo.Arguments = "-i " + videoName;

pProcess.StartInfo.UseShellExecute = false;

//Set output of program to be written to process output stream
pProcess.StartInfo.RedirectStandardOutput = true;

//Start the process
pProcess.Start();

//Get program output
string strOutput = pProcess.StandardOutput.ReadToEnd();

//Wait for process to finish
pProcess.WaitForExit(); 
```

该命令有效，但`strOutput`字符串为空，结果显示在控制台中。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:24:38.200

程序可能会将其输出写入 StandardError 而不是 StandardOutput。尝试使用`.RedirectStandardError = true`然后`.pProcess.StandardError.ReadToEnd()`捕获该输出。

如果您需要在（大致）正确的交错中捕获标准错误和标准输出的可能性，您可能需要使用带有回调的异步版本，`OutputDataReceived`并`ErrorDataReceived`使用 BeginOutput/ErrorReadLine。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-26T03:36:44.857

尝试捕获 Std 错误，因为任何错误事件都会被使用。

```
 //Set output of program to be written to process output stream
        pProcess.StartInfo.RedirectStandardError = true;
        pProcess.StartInfo.RedirectStandardOutput = true;

        //Start the process
        pProcess.Start();

        //Wait for process to finish
        pProcess.WaitForExit();

        //Get program output
        string strError = pProcess.StandardError.ReadToEnd();
        string strOutput = pProcess.StandardOutput.ReadToEnd(); 
```

我只是想知道为什么你在阅读输出后等待退出 WaitForExit，它应该是相反的顺序，因为你的应用程序可能会转储更多，直到它最终完成操作

# objective-c - 将参数传递给存储在块数组中的块

> ID：13558237
> 
> 赞同：0
> 
> 时间：2012-11-26T03:16:39.590
> 
> 标签：objective-c, ios, objective-c-blocks

我在界面上声明了这个

```
void (^ soc)(NSString *type, BOOL configured); 
```

和

```
@property (nonatomic, assign) BOOL serviceOK; 
```

然后在 .m 上的一个方法中，我有这个：

```
soc = ^(NSString *type, BOOL configured){
    // ...
};

// other blocks defined here 
```

然后这个：

```
NSMutableArray *arrayBlocks = [[NSMutableArray alloc] initWithObjects:
                               [block1 copy],
                               [soc(typeOne, self.serviceOK) copy],
                               [block3 copy],
                               [block4 copy],
                               nil]; 
```

我在 soc 行出现错误消息**错误接收器类型无效**（什么？？？）

如果我只是运行这个：

```
soc(typeOne, self.serviceOK); 
```

它工作正常，但如果我将它包含在数组中，它会抱怨。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T03:25:05.937

如果要添加块的副本，请添加：

```
[soc copy], 
```

到数组。您要做的是添加调用块结果的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T03:24:03.113

```
soc(typeOne, self.serviceOK) 
```

执行块。并且因为它什么都不返回，所以没有任何东西可以发送复制消息并放入数组中。

# vb.net - Visual Basic 贷款利息和本金计算器

> ID：13558242
> 
> 赞同：0
> 
> 时间：2012-11-26T03:17:31.793
> 
> 标签：vb.net, visual-studio-2010

我试图让程序输出支付给 5000 美元贷款的本金和支付的利息。没有输入已经全部声明。

```
 Private Sub calButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles calButton.Click
    Dim monthlyPayments As Double
    Dim bloanTotal As Double = 5000
    Dim rate As Double = 0.005
    Dim interest As Double
    Dim toPrincipal As Double
    Dim toInterest As Double
    Dim counter As Integer

    Do
        'calculate the montly payments.
        monthlyPayments =
    Financial.Pmt(0.06 / 12, 12, 5000)
        TextBox1.Text = monthlyPayments.ToString("C2")

        counter = counter + 1        'add one to the counter 
        interest = bloanTotal * rate    'calculate interest rate from payment that will only count as interest
        toInterest = monthlyPayments - interest 'amount of monthly payment going towards interest
        toPrincipal = monthlyPayments - toInterest ' amount of monthly payment going towards principal
        bloanTotal = bloanTotal - toPrincipal 'new balance after deducing principal from begining balance

        Label2.Text = toPrincipal.ToString & "      " &
                      toInterest.ToString &
                      ControlChars.NewLine ' concatinate principal and interest strings and create a new line

        If counter = 12 Then 'exit loop once counter has reached 12 and loan amount has reached zero
            Exit Do
        End If
    Loop
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:22:23.510

我相信你的问题是`Financial.Pmt`函数返回一个负数。因为这是会计，所以你告诉函数你收到了 5000 笔贷款（正数），你将付款（负数）。如果你这样做

`monthlyPayments = Math.Abs(Financial.Pmt(0.06 / 12, 12, 5000))`

那么你的计算应该会成功。

# visual-c++ - 如何允许输入长于 MFC ComboBox 宽度的文本

> ID：13558245
> 
> 赞同：3
> 
> 时间：2012-11-26T03:18:14.123
> 
> 标签：visual-c++, mfc, combobox

如果文本长于 MFC 组合框的宽度，它将停止接受新字符。如果将长文本粘贴到 MFC 组合框，则剩余部分（长于可显示的部分）将被修剪。

如何允许输入全文？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T06:32:33.470

Combobox 控件具有`'auto'`自动滚动太长而无法容纳的文本的属性。默认情况下它是假的。将其设置为 true 以启用此行为。

# protobuf-net - Protobuf-net - 什么被序列化了？

> ID：13558246
> 
> 赞同：1
> 
> 时间：2012-11-26T03:18:23.693
> 
> 标签：protobuf-net

我正在尝试用 Proto-buf 替换我们现有的序列化。问题是我们目前使用 ISerializable 来检查数据是否已更改，如果数据已更改，则仅序列化原始值。这是通过使用两个可为空的变量完成的，并且如果值已更改，则仅将 ISerializable.GetObjectData 中的原始值添加到 info 对象。

反序列化时，在 ISerializable 构造函数中，我读取了 SerializationInfo 以查找哪些成员已序列化，哪些未序列化。如果原始值未序列化，则将其值设置为当前值。（因此节省了资源，因为它没有被序列化）。

在 Protobuf-net 中有没有办法让我找出哪些字段被反序列化了？如上所述，我使用 ShouldSerialize 模式不发送原始值，但是当我到达另一端时，我需要知道哪些字段被序列化才能设置原始值。

编辑：更多细节，这里是一个示例类。

```
[Serializable()]
[ProtoContract(ImplicitFields = ImplicitFields.AllFields)]
public class SomeClass : ISerializable
{
    internal int? _key;
    internal int? _originalKey;

    internal bool ShouldSerialize_key()
    {
        return _key.HasValue;
    }
    [NonSerialized]
    public bool _keySpecified;

    internal bool ShouldSerialize_originalKey()
    {
        return _key != _originalKey;
    }
    [NonSerialized]
    public bool _originalKeySpecified;
    [OnDeserialized()]
    internal void OnDeserializedMethod(StreamingContext context)
    {
        // Use this to set the _originalKey if it hasn't been specified.
        if (!_originalKeySpecified)
        {
            _originalKey = _key;
        }
    }
} 
```

如您所见，如果_originalKey 与_key 具有相同的值，则它不会被序列化。当对象被反序列化时，我想知道 _originalKey 是否被反序列化。我认为您对 _originalKeySpecified 的回答会起作用，但在上面的课程中，一旦我反序列化，_originalKeySpecified 总是错误的。Protobuf 反序列化过程是否设置了值？（请注意，我无法使用 ShouldSerialize 属性来决定是否在反序列化时设置 _originalKey，因为它可能已从 null 更改为另一个值，我需要在保存到数据存储时知道这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:38:25.807

这取决于您的具体情况。例如，如果您有可为空的支持字段，那么：被序列化的字段是具有非空值的示例......即

```
private int? id;
[ProtoMember(n)]
public int Id {
    get { return id.GetValueOrDefault(); }
    set { id = value; }
}
public bool ShouldSerializeId() { return id.HasValue; } 
```

在这里，您可以简单地检查每个`ShouldSerialize*`方法以查看哪些值被反序列化；没有的东西*仍然有`null`*`set`（如果它没有要反序列化的数据，它不会调用）。

另一种选择是`*Specified`模式，正如其他一些序列化程序（`XmlSerializer`，IIRC - 和可能`DataContractSerializer`）所使用的那样。这是一个简单的 bool 属性，如果分配了一个值，它会（由序列化程序）设置`true`，否则不会。同样， 的值同样`*Specified`用于`ShouldSerialize*`确定是否应在序列化期间处理成员。

如果我错过了您的意图，请澄清（最好用一个例子），我会尝试解释更多。

# pic - 将 16 位数除以 2 [PIC 单片机]

> ID：13558249
> 
> 赞同：1
> 
> 时间：2012-11-26T03:19:12.183
> 
> 标签：pic

如果将 16 位值存储为（在 pic 微控制器中）作为高字节和低字节，您如何将它们除以 2？16位数字如何右旋？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T03:22:33.547

将 16 位数字除以 2 相当于将数字右移一位^*。清除进位标志，通过进位将高字节右移，然后通过进位将低字节右移。[你可以在这里](http://www.mcmanis.com/chuck/robotics/projects/pic-16bit.htm)找到它的代码：

```
LSR16   MACRO   VAR16
    BCF     STATUS, C       ; Clear carry
    RRF     (VAR16)+1,F     ; Rotate high byte right
    RRF     (VAR16),F       ; Rotate low byte right
    ENDM 
```

* * *

^*当然这是整数除法：当奇数除以 2 时，the`0.5`被截断。

# java - 创建 File 对象时如何指定目录？

> ID：13558250
> 
> 赞同：1
> 
> 时间：2012-11-26T03:19:20.527
> 
> 标签：java, eclipse, file, formatting, directory

这应该是一个非常简单的问题，但谷歌+我的代码不起作用。

在 Windows 上的 Eclipse 中，我希望我的程序查看某个文件夹。该文件夹直接位于 Project 文件夹内，与 、 、 等处于同一级别`.settings`。`bin`我`src`的文件夹名为`surveys`，这是我希望我的`File`对象指向的文件夹。

我不想指定完整路径，因为我希望它在我的两台计算机上运行。只是我项目中的路径。

我正在尝试这段代码，但它不起作用 -`names[]`返回为空。是的，我里面有一些文件夹和测试垃圾`surveys`。

```
File file = new File("/surveys");
    String[] names = file.list();

    for(String name : names)
    {
        if (new File("/surveys/" + name).isDirectory())
        {
            System.out.println(name);
        }
    } 
```

我确定我的错误在我传递给 File 的字符串中，但我不确定出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T03:38:09.643

在您的问题中，您没有指定您正在运行的平台。在非 Windows 上，前导斜杠表示绝对路径。最好去掉前面的斜线。尝试这个：

```
File file = new File("surveys");
System.out.println("user.dir=" + System.getProperty("user.dir"));
System.out.println("file is at: " + file.getCanonicalPath());
String[] names = file.list();

for(String name : names)
{
    if (new File(file, name).isDirectory())
    {
        System.out.println(name);
    }
} 
```

确保在您的运行配置中，程序从项目目录 (user.dir = `<projects>`)运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T07:17:59.077

在使用 file.list() 之前确保你的文件是一个目录，否则你会得到一个讨厌的 NullPointerException。

```
File file = new File("surveys");
if (file.isDirectory()){
   ...
} 
```

或者

```
if (names!=null){
   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T03:55:45.080

如果您检查了文件的完整路径

`System.out.println(file.getCanonicalPath())`

画面会立即变得清晰。File.getCanonicalPath 为您提供了完整的路径。请注意，File 规范了路径，例如在 Windows 上，“c:/file”被转换为“C:\file”。

# haskell - Haskell 做关键字

> ID：13558251
> 
> 赞同：1
> 
> 时间：2012-11-26T03:19:36.377
> 
> 标签：haskell

所以在过去的几个小时里，我一直在研究打印数独板的问题，我几乎完成了，但我被困在最后一步。所以我所拥有的是一个表示为“列表列表”的数独板（即 board = [[1, 3, 5, 7, 0, 2, 0, 0, 0], [3, 4, 5, .. .], ...]

我已经能够使用以下功能打印出带有格式的行：

```
line i s_board = intercalate " | " . map unwords . chunksOf 3 $ map show a
             where 
               a = s_board!!i 
```

因此，通过拨打“line 0 board”之类的电话，我会得到“1 3 5 | 7 0 2 | 0 0 0”，这部分是我需要的。接下来我尝试使用“do block”来输出我需要的板，它看起来像这样：

```
print = do line 0 board 
        line 1 board 
        ... 
```

这甚至不会编译，当我做这样的事情时：

```
print = do 
        line 0 board 
        line 1 board 
```

适当的列表被打印了多次，这相当令人困惑。我想努力增加额外的格式，例如在每三行之后打印一个字符串，例如“----------”以完成电路板，但我什至无法让其他东西工作对了。对于这些问题提供的任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T03:46:27.243

生成一个函数来获取您的电路板，制作一个大字符串并最终打印它会更容易和更优雅，而不是担心通过一个`do`块打印每一行。

因此，如果我们简化您的线条显示功能以占用电路板的一条线：

```
showLine :: [Int] -> String
showLine = intercalate " | "
         . map unwords
         . chunksOf 3
         . map show 
```

然后，我们需要获取每一行的字符串表示并将它们放在一起。这看起来很像`showLine`代码：

```
showBoard :: [[Int]] -> String
showBoard = intercalate "---------------------\n"
          . map unlines
          . chunksOf 3
          . map showLine 
```

使用示例板

```
-- Obviously not a valid sudoku board...
example :: [[Int]]
example = replicate 9 [ 1, 2, 3, 4, 5, 6, 7, 8, 9 ]

*Main> putStrLn $ showBoard example
1 2 3 | 4 5 6 | 7 8 9
1 2 3 | 4 5 6 | 7 8 9
1 2 3 | 4 5 6 | 7 8 9
---------------------
1 2 3 | 4 5 6 | 7 8 9
1 2 3 | 4 5 6 | 7 8 9
1 2 3 | 4 5 6 | 7 8 9
---------------------
1 2 3 | 4 5 6 | 7 8 9
1 2 3 | 4 5 6 | 7 8 9
1 2 3 | 4 5 6 | 7 8 9 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T03:52:22.647

您最初的尝试没有编译，因为它违反了 Haskell 的布局规则。

第二个没有做你所期望的，因为`line n board`它是一个列表，所以`do`-notation 表示不确定性，而不是 IO 操作的顺序。如果您尝试输入类似的类型

```
print :: IO () 
```

在你的函数之上（顺便说一句，`print`在标准前奏中定义，你应该得到一个关于隐藏它的警告），类型检查器会通知你你的错误。如果您真的想像这样打印出电路板（尽管正如另一个答案所暗示的那样，构建一个字符串然后将整个内容打印出来要好得多），您可以尝试

```
printBoard :: IO ()
printBoard = do print $ line 0 board
                print $ line 1 board 
```

或打印整个电路板，

```
printBoard = mapM_ (print . showLine) board 
```

where`showLine`和你的一样`print`，但是去掉了索引。

# c# - 阅读视频信息（创建日期）？

> ID：13558252
> 
> 赞同：0
> 
> 时间：2012-11-26T03:19:51.233
> 
> 标签：c#, web-applications, video, taglib-sharp

在窗口中，我可以从属性（右键单击）获取视频的创建日期。
我对此有一些想法，但我不知道该怎么做。
**1.**直接从视频中获取视频信息（如windows中），
**2.** 通过提取视频名称获取创建日期（视频名称为日期格式，即创建时间）。
而且我还使用**taglib-sharp**来获取视频持续时间和分辨率，但我找不到任何关于如何获取视频创建日期的示例代码。

**注意**：日期格式的视频名称 - 例如，20121119_125550.avi

**编辑**
找到这个代码，到目前为止它的工作

```
string fileName = Server.MapPath("//video//20121119_125550.avi");
FileInfo fileInfo = new FileInfo(fileName);
DateTime creationTime = fileInfo.CreationTime; 
```

输出：**`2012/11/19 12:55:50`**

对于文件名，我将在名称中添加另一个字符串。比如**User1-20121119_125550.avi.avi**，后面会比较复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:44:21.053

如果您可以安全地信任您的文件名，您可能会对以下内容感到满意：

```
string file_name = "20121119_125550.avi";
string raw_date = file_name.Split('.')[0];
CultureInfo provider = CultureInfo.InvariantCulture;

string format = "yyyyMMdd_hhmmss";
DateTime result = DateTime.ParseExact(raw_date, format, provider); 
```

注意：您可能需要添加`using System.Globalization;`到您希望在其中使用它的任何文件中。

如果您只想要文件的创建日期（您在 Windows 资源管理器中看到的），您可以使用：

```
string file_path = @"C:\20121119_125550.avi"; //Add the correct path
DateTime result = File.GetCreationTime(file_path); 
```

# ruby-on-rails - Rails 将字符串与视图中的变量连接的最佳方法

> ID：13558255
> 
> 赞同：36
> 
> 时间：2012-11-26T03:20:13.560
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

本质上我正在尝试进行这种比较

```
request.fullpath == "/contacts/"+current_user.id 
```

将字符串与变量连接以执行这样的比较的最佳方法是什么？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-11-26T03:29:38.830

您可以将其插入为 `request.fullpath == "/contacts/#{current_user.id}"`

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-26T03:30:53.130

```
"/contacts/#{current_user.id}" 
```

始终使用字符串插值，它比`<<`和`+`

# php - 使用 PDO 拉取列数据

> ID：13558259
> 
> 赞同：0
> 
> 时间：2012-11-26T03:20:55.837
> 
> 标签：php, html, mysql, pdo

好的，我已经能够拉一个随机帐户并拉一个帐户，只要我预先定义它，但现在我很好奇如何根据帐号拉一个帐户

因此，基本上，如果帐号匹配，则提取该行的所有数据。

```
 $db = new PDO('mysql:host=' . $config['db']['host'] . ';dbname=' . $config['db']     ['dbname'], $config['db']['username'], $config['db']['password']);

  $AccountNumber = "uwoi1002"

  $query = $db->query("SELECT `content`.`ProfilePic` FROM `content`");

 while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
 $Hello = $row['ProfilePic'];
 echo  '<html><img src="http://www.MYDOMAIN.COM/Content/';
 echo $Hello;
 echo '"></html>';

 }
  ?> 
```

所以这样做是在一页上返回每个人的个人资料图片 不是我想要的

我有它，在我的mysql数据库的一个字段中，它为每个帐户都有一个唯一的ID 我希望它随机拍摄其中一个然后返回该行的所有数据

FirstName LastName Gender City State FacebookUrl BirthMonth BirthDay BirthYear AccountNumber - 这是我要根据 ProfilePic ProfilePicCaption 拉取的那个 所以基本上选择一个随机行并拉取所有数据，而不是显示一列的所有数据

谢谢你所有的帮助都很棒，至少现在我使用安全代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:49:04.890

听起来你只是需要一个`WHERE`条款......

```
// the ?, called a placeholder will have the value substituted for it
$stmt = $db->prepare("SELECT `content`.`ProfilePic` FROM `content` WHERE id = ?");

// an array of values for the placeholders in the query
$stmt->execute(array(2));

while(false !== ($row = $stmt->fetch(PDO::FETCH_ASSOC))) {
   // do stuff with data
} 
```

或者，如果您可以使用命名占位符，如果您有很多参数的查询，我会推荐：

```
// the :id, called a placeholder will have the value substituted for it
$stmt = $db->prepare("SELECT `content`.`ProfilePic` FROM `content` WHERE id = :id");

// an array of values for the placeholders in the query
$stmt->execute(array(':id' => 2)); 
```

# lotus-notes - 数据库lotus note中没有重复

> ID：13558262
> 
> 赞同：1
> 
> 时间：2012-11-26T03:21:04.633
> 
> 标签：lotus-notes, lotus, lotusscript, lotus-formula

今天是个好日子。

如果我将它用于更新数据，重新缓存有什么影响？ [这就是我想要做的，但我需要知道如果我将 no-cache 替换为重新缓存会发生什么](https://stackoverflow.com/questions/13524206/lotus-notes-search-data-that-equal-to-textbox/13549035#13549035)

我将解释这个想法，在这个文本框中，它将调用我数据库中的最后一个数字并加 1，但我发现这有问题，如果多个用户使用此表单，则数字可能会重复。`@If(@IsNewDoc;@Elements(@DbColumn("":"nocache";@DbName;"GPA";1))+1;@Return(GPnum))`

我的想法引导我走这条路，如果我使用@dblookup 来查找我的号码中是否有重复，但是我没有通过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:50:38.810

重新缓存不会帮助您避免重复。

您正在尝试增加 Lotus Notes 中的计数器以创建文档的唯一顺序标识符。这是一个至少 20 年来被许多人多次讨论过的问题。您可以在 StackOverflow 以及其他各种论坛、博客和文章中找到很好的信息。有效的两种方法是

*   将最后一个计数器值存储在配置文档中，并使用文档锁定来确保您没有两个用户同时访问和更新它。
*   不要直接在用户代码中设置计数器变量。编写代码以在字段中放置一个“待定”值，并依靠仅在一台服务器上运行的计划或触发的后台代理来设置最终值。（由于代理管理器保证在一个数据库中一次只能运行一个代理，因此不会发生冲突。）
*   不要为您的标识符使用顺序计数器。请改用该`@Unique`功能。文档将具有唯一代码而不是唯一编号。

请看[这个](https://stackoverflow.com/questions/8532296/how-to-create-an-auto-incrementing-field-in-lotus-domino)答案，[这个](https://stackoverflow.com/questions/10748691/how-do-i-generate-the-unique-number-in-replication-copy)答案，还有[这篇](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/sequential-numbering.htm)文章。

# android - 停止覆盖tabwidget的Android webview

> ID：13558267
> 
> 赞同：4
> 
> 时间：2012-11-26T03:21:52.473
> 
> 标签：android, android-layout, tabwidget

我在屏幕底部放置了一个 tabwidget，上面有一个 webview。当 webview 加载的网页内容大于屏幕时，webview 会扩展以转换 tabwidget - 因为 layout_height 在 webview 和它所在的滚动视图中设置为 wrap_content。

我希望滚动视图调整到可用的屏幕空间。我的xml如下：

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="0dp" >

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="-4dp"
        android:gravity="top" />

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true" >

        <ScrollView
            android:id="@+id/scroll1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:scrollbars="none"
            tools:ignore="UselessParent" >

            <WebView
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/webView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:gravity="bottom"/>
        </ScrollView>

    </FrameLayout>
</RelativeLayout> 
```

我已经为滚动视图设置了一个高度，但正如预期的那样，它只对特定设备准确，而不是通用的。

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:25:18.147

使用这个xml，它会解决你的问题：

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="0dp" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

            <ScrollView
                android:id="@+id/scroll1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:scrollbars="none"
                tools:ignore="UselessParent" >

                <WebView
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/webView1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:gravity="bottom" />
            </ScrollView>
        </FrameLayout>

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>

</TabHost> 
```

# sql - T-SQL 查询帮助 - 基于 IF/ELSE 的联接

> ID：13558268
> 
> 赞同：1
> 
> 时间：2012-11-26T03:22:00.567
> 
> 标签：sql, tsql, conditional, sap

我正在尝试使用 SQL 查找 SAP 中文章的零售价，但文章的性质意味着当前价格可以针对父母或孩子。判断我需要加入哪个字段的唯一方法是某个字段是否包含值。

我有 2 个单独的查询，但我确实需要 1 个结果集中的结果。

MATNR 是文章编号，而 M.PMATN 是父母文章编号。如果 M.PMATN 字段为空，那么我想像 M.MATNR = A.MATNR 上的查询 #1 一样加入，但如果 M.PMATN 不为空，那么我想使用该字段中的值作为 M. PMATN = A.MATNR

查询 #1- 不存在父文章编号，因此使用文章编号 = 文章编号从文章本身获取价格：

```
SELECT A.MANDT, A.VKORG, A.VTWEG, A.MATNR, M.PMATN, K.KBETR, A.DATAB, A.DATBI FROM pdp.KONP AS K
INNER JOIN pdp.A073 AS A ON
    A.KNUMH = K.KNUMH
INNER JOIN pdp.MVKE AS M ON
    M.VKORG = M.VKORG
    AND M.VTWEG = A.VTWEG AND M.MATNR = A.MATNR
      WHERE A.MANDT = '510' 
AND A.VKORG = '1010'
AND A.VTWEG ='D1'
AND GETDATE() < A.DATBI
AND GETDATE() > A.DATAB 
AND M.PMATN = '' 
```

查询 #2 - 字段中存在父文章编号，因此将其与文章连接以从父文章中查找价格：

```
SELECT distinct A.MANDT, A.VKORG, A.VTWEG, A.MATNR, M.PMATN, K.KBETR, A.DATAB, A.DATBI FROM pdp.KONP AS K
INNER JOIN pdp.A073 AS A ON
    A.KNUMH = K.KNUMH
INNER JOIN pdp.MVKE AS M ON
    M.VKORG = M.VKORG
    AND M.VTWEG = A.VTWEG AND M.PMATN = A.MATNR
WHERE A.MANDT = '510' 
AND A.VKORG = '1010'
AND A.VTWEG ='D1'
AND GETDATE() < A.DATBI
AND GETDATE() > A.DATAB 
```

谢谢，我希望我试图解释这一点有某种意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:26:38.610

在我看来，你会联合这两个查询。您可能希望向两个查询添加一个字段，将某种文字值作为生成该行的查询的标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T03:31:48.303

我还没有运行这个查询，但我认为这应该可以工作。

```
SELECT distinct A.MANDT, A.VKORG, A.VTWEG, A.MATNR, M.PMATN, K.KBETR, A.DATAB, A.DATBI FROM pdp.KONP AS K
INNER JOIN pdp.A073 AS A ON
    A.KNUMH = K.KNUMH
INNER JOIN pdp.MVKE AS M ON
    M.VKORG = M.VKORG
    AND M.VTWEG = A.VTWEG AND (((M.PMATN = A.MATNR) AND M.PMATN IS NOT NULL) OR ((M.MATNR = A.MATNR) AND M.PMATN IS NULL))
WHERE A.MANDT = '510' 
AND A.VKORG = '1010'
AND A.VTWEG ='D1'
AND GETDATE() < A.DATBI
AND GETDATE() > A.DATAB 
```

# python - 如何让套接字接受多个连接？

> ID：13558271
> 
> 赞同：2
> 
> 时间：2012-11-26T03:22:42.237
> 
> 标签：python, sockets

目前我有一个只能接受一个连接的套接字服务器。任何第二个连接，它只是挂起而不做任何事情。

服务器可以获取从一个客户端发送的消息。我现在只有服务器发回确认。

服务器.py：

```
import socket, sys

# some vars
HOST = "localhost";
PORT = 4242;

# create the socket
soc = socket.socket(socket.AF_INET, socket.SOCK_STREAM);

# bind the socket to port
server_addr = (HOST, PORT);
print >>sys.stderr, "starting server %s on port %s" % (HOST, PORT);
soc.bind(server_addr);

# check for connections
soc.listen(1);

while True:
    # wait for a connection
    connection, client_address = soc.accept();
    try:
        # since just test
        # just send back whatever server receives
        while True:
            data = connection.recv(16);
            if data:
                connection.sendall(str(client_address[1]) + " said " + data);
    finally:
        connection.close(); 
```

客户端.py：

```
import socket, sys, thread

# some vars
HOST = "localhost";
PORT = 4242;

# create the socket
soc = socket.socket(socket.AF_INET, socket.SOCK_STREAM);

# connect to server/port
server_addr = (HOST, PORT);
print >>sys.stderr, "connecting to %s on port %s" % (HOST, PORT);
soc.connect(server_addr);

# try to send data over
while True:
    try:
        # send the message
        msg = raw_input("Message: ");
        soc.sendall(msg);

        # check if there is response
        amt_recd = 0;
        amt_expd = len(msg);

        while amt_recd < amt_expd:
            data = soc.recv(16);
            amt_recd += len(data);
            print >>sys.stderr, data, "\n";
    finally:
        msg = ''; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T03:29:35.767

服务器中的这个无限循环没有退出条件：

```
while True:
    data = connection.recv(16)
    if data:
        connection.sendall(str(client_address[1]) + " said " + data) 
```

如果客户端关闭连接数据将是空的，但它仍然会继续循环。修理：

```
while True:
    data = connection.recv(16)
    if not data:
        break
    connection.sendall(str(client_address[1]) + " said " + data) 
```

此外，即使在修复此问题后，服务器一次也只能处理一个连接。如果您希望同时为多个客户端提供服务，则需要`select.select`为每个客户端连接使用或分离线程。

顺便说一句，Python 不需要在语句末尾使用分号。

# jquery-ui - Jquery UI 自动完成在 IE 中不显示列表

> ID：13558272
> 
> 赞同：0
> 
> 时间：2012-11-26T03:22:42.330
> 
> 标签：jquery-ui, jquery-autocomplete

我正在尝试按照[http://jqueryui.com/autocomplete/#remote](http://jqueryui.com/autocomplete/#remote)中的示例构建一个自动完成输入。到目前为止，这些代码在 Opera、Firefox 和 Chrome 中有效，但在 IE8 和 IE9 中无效。以下是我的代码和服务器对 TestData 的响应。

过去几天一直在测试这些，但没有成功。将不胜感激这里的任何大师都可以提供帮助。

谢谢。

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Test</title>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
        <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
        <script>
            $(function() {
                $( "#test" ).autocomplete({
                    source: "TestData",
                    minLength: 2
                });
            })
        </script>
    </head>
    <body>
        <div class="ui-widget">
            <input id="test" />
        </div>
    </body>
</html> 
```

来自服务器的响应头

```
Key             Value
Response        HTTP/1.0 200 
Server          Development/1.0
Date            Mon, 26 Nov 2012 02:49:31 GMT
Cache-Control   no-cache
Content-Type    text/html; charset=utf8
Content-Length  43 
```

响应正文

```
[{"id":"1","value":"a1","label":"a1 test"}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:34:45.080

为了更精细地控制 Web 服务实际返回的内容，我建议以这种方式实现：

```
$( "#city" ).autocomplete({
            source: function( request, response ) {
                $.ajax({
                    .............
                    success: function( data ) {
                        var transformedData = transformData(data);
                        // feeding back to jquery autocomplete 
                        response( transformedData );
                    }
                });
            }); 
```

如果您在成功函数中设置断点，您应该能够在调试器中看到从 Web 服务获得的内容。

# php - 当我将会话变量放入变量时，它们会变成数组

> ID：13558274
> 
> 赞同：1
> 
> 时间：2012-11-26T03:23:22.033
> 
> 标签：php, session

我有一个登录数据会话，我试图将它放入一个变量中，以便在我想回显或使用 ID、用户名或电子邮件时缩短。发生的事情是现在我将它放在一个变量中，但是当我回显它时，它会在一个数组中显示它。

这是我的可变数据。

```
$User = htmlentities(ucwords($_SESSION['user']['username']));
$Email = htmlentities($_SESSION['user']['email'], ENT_QUOTES, 'UTF-8'); 
```

如果我回显其中任何一个，它会返回“Array”。

**编辑**

我通过更改获取 $_SESSION 数据的方式并使用 unset 摆脱数组来修复我的解决方案。现在我可以做到这一点，

```
$User  = $_SESSION['user']["username"];
$Email = $_SESSION['user']["email"]; 
```

感谢您提醒我，我什至首先是如何获取会话数据的 =]

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-26T03:32:17.543

如果您正在使用类，在其中指定所有变量，则可以尝试以下操作：

```
$User  = $_SESSION['user']->username;
echo $User; 
```

`user`你的班级在哪里，`username`你的变量在哪里当你将它添加到你的会话时，你需要这样做：

```
 $_SESSION['user'] = new user();
    $_SESSION['user']->username= 'whatever value it is'; 
```

# javascript - JS 目标不起作用，即 8

> ID：13558275
> 
> 赞同：0
> 
> 时间：2012-11-26T03:23:40.743
> 
> 标签：javascript, internet-explorer-8, target, dwr

我有这段代码，其中数据是包含来自响应 servlet 的行的 DWR 对象。img.onclick 使用 IE9 工作，但我需要它也可以在 IE8 上工作。有什么想法？谢谢！

```
function functionA(data){
  var getPrintCred = function(data) { 
                        var img = document.createElement("img");
                        img.src = "images/image1.jpg";
                        img.style.width="20px";
                        img.style.height="18px";
                        img.alt = data.field1;
                        img.title = getRegimen;
                        img.onclick = function(target) { functionB(target) };
                        return img;
  };
}

function functionB(data){
                var var1= data.target.title;
                var var2= data.target.alt;
                if ( var1 != null && var1 == "IM")
                    var1 = "valueA";
                else
                    var1 = "valueB";
                functionC(var2,var1);
}

function functionC(param1, param2){
 alert ('Using IE 9 works, but IE8 no works...help me!'+param1+'-'param2);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:36:08.160

即8不支持`target`事件对象中的属性，你必须使用`srcElement`属性。

```
function functionB(data){
            var var1= (data.target || data.srcElement).title;
            var var2= data.target.alt;
            if ( var1 != null && var1 == "IM")
                var1 = "valueA";
            else
                var1 = "valueB";
            functionC(var2,var1);
} 
```

此外，看起来没有事件对象被传递给 onclick 事件处理程序，因此您可以将 window.event 作为后备传递。

```
img.onclick = function(target) { functionB(target || event) }; 
```

[http://jsfiddle.net/mowglisanu/wkB6K/](http://jsfiddle.net/mowglisanu/wkB6K/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T03:53:06.903

试试下面的

```
function functionA(data){
    var getPrintCred = function(data) { 
        var img = document.createElement("img");
        img.src = "images/image1.jpg";
        img.style.width="20px";
        img.style.height="18px";
        img.alt = data.field1;
        img.title = getRegimen;
        img.onclick = function(target) {
            target = target || window.event;
            functionB(target);
        };
        return img;
    };
}

function functionB(data){
    var var1= data.target.title;
    var var2= data.target.alt;
    if ( var1 != null && var1 == "IM")
        var1 = "valueA";
    else
        var1 = "valueB";
    functionC(var2,var1);
}

function functionC(param1, param2){
    alert ('Using IE 9 works, but IE8 no works...help me!'+param1+'-'param2);
} 
```

在 IE 中，事件对象不作为参数传递给事件处理程序方法，但它在全局属性`window.event`对象中可用。

# jquery - 我制作了一个自定义图像滑块，图像抖动出现奇怪的错误

> ID：13558276
> 
> 赞同：0
> 
> 时间：2012-11-26T03:23:42.750
> 
> 标签：jquery, html, css, cross-browser, cross-platform

我的滑块适用于所有浏览器/计算机，但一个人的计算机上的 safari 除外。
这是一个奇怪的错误（大约 7 秒后开始）：

[http://www.youtube.com/watch?v=eoNWkT7MDJQ&feature=youtu.be](http://www.youtube.com/watch?v=eoNWkT7MDJQ&feature=youtu.be)

什么可能导致计算机/浏览器之间出现这种奇怪的不一致？

谢谢！

编辑：这是代码

JS：

```
 setInterval(wells_fancy_slider, 130);
    t = null;
    timeout_variable = null;

})

function wells_fancy_slider() {
    if (!paused) {
        if(style=='day'){
            if (parseInt($('.building_container').css('left')) < -2200) {
                $('.building_container').css('left', '+=4000');
            }
            if (parseInt($('.building_container2').css('left')) < -2200) {
                $('.building_container2').css('left', '+=4000');
            }
        }else{
            if (parseInt($('.building_container_night').css('left')) < -2200) {
                $('.building_container_night').css('left', '+=4000');
            }
            if (parseInt($('.building_container_night2').css('left')) < -2200) {
                $('.building_container_night2').css('left', '+=4000');
            }
        }

        $('.building_container_night').css('left', '-=' + speed);
        $('.building_container_night2').css('left', '-=' + speed);

        $('.building_container').css('left', '-=' + speed);
        $('.building_container2').css('left', '-=' + speed);
    }
} 
```

HTML：

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
        <link rel="stylesheet" type="text/css" href="wells_slider.css">
        <script type="text/javascript" src="wells_slider.js"></script>
    </head>
    <body>

        <div id="container">
            <img id="night_sign" src="img/full_night.png"/>
            <img id="day_sign" src="img/full_day.png">
            <!-- day -->
            <div class="building_container">
                <img class="building b1" id="b1" src="img/buildings/b1.png" width="250" height="250"/>
                <a href="http://www.lifestylemirror.com/living/culture/lifestyle-mirror-lifestyle-avenue-exclusives-boutique/">
                    <div class="popover pb1" ><div class="shop_now">SHOP NOW</div></div>
                </a>
                <img class="building b2" id="b2" src="img/buildings/b2.png" width="180" height="240"/>
                <a href="http://www.lifestylemirror.com/woman/shoes-bags/lifestyle-mirror-lifestyle-avenue-exclusive-akris-boutique/">
                    <div class="popover pb2"><div class="shop_now">SHOP NOW</div></div>
                </a>
                <img class="building b3" id="b3" src="img/buildings/b3.png" width="180" height="230"/>
                <a href="http://www.lifestylemirror.com/woman/jewelry-watches/lifestyle-mirror-lifestyle-avenue-exclusive-luisaviaroma-boutique/">
                    <div class="popover pb3"><div class="shop_now">SHOP NOW</div></div>
                </a>
                <img class="building b4" id="b4" src="img/buildings/b4.png" width="155" height="240"/>
                <a href="http://www.lifestylemirror.com/woman/fashion/lifestyle-mirror-lifestyle-avenue-exclusive-moncler-boutique/">
                    <div class="popover pb4"><div class="shop_now">SHOP NOW</div></div>
                </a>
                <img class="building b5" id="b5" src="img/buildings/b5.png" width="180" height="240"/>
                <a href="http://www.lifestylemirror.com/woman/fashion/lifestyle-mirror-lifestyle-avenue-exclusive-marni-boutique/">
                    <div class="popover pb5"><div class="shop_now">SHOP NOW</div></div>
                </a>
                <img class="building b6" id="b6" src="img/buildings/b6.png" width="180" height="240"/>
                <a href="http://www.lifestylemirror.com/living/culture/holiday-gift-guide-2012/">
                    <div class="popover pb6"><div class="shop_now">SHOP NOW</div></div>
                </a>
                <img class="building b7" id="b7" src="img/buildings/b7.png" width="180" height="240"/>
                <a href="http://www.lifestylemirror.com/woman/fashion/lifestyle-mirror-lifestyle-avenue-exclusive-versace-boutique/">
                    <div class="popover pb7"><div class="shop_now">SHOP NOW</div></div>
                </a>
                <img class="building b8" id="b8" src="img/buildings/b8.png" width="180" height="240"/>
                <a href="http://www.lifestylemirror.com/woman/jewelry-watches/lifestyle-mirror-lifestyle-avenue-exclusive-cartier-boutique/">
                    <div class="popover pb8"><div class="shop_now">SHOP NOW</div></div>
                </a>
                <img class="building b9" id="b9" src="img/buildings/b9.png" width="150" height="280"/>
                <a href="http://www.lifestylemirror.com/woman/shoes-bags/lifestyle-mirror-lifestyle-avenue-exclusive-smythson-boutique/">
                    <div class="popover pb9"><div class="shop_now">SHOP NOW</div></div>
                </a>
                <img class="building b10" id="b10" src="img/buildings/b10.png" width="250" height="250"/>
                <a href="http://www.lifestylemirror.com/woman/fashion/lifestyle-mirror-lifestyle-avenue-exclusive-the-webster-boutique/">
                    <div class="popover pb10"><div class="shop_now">SHOP NOW</div></div>
                </a>
                <img class="building b11" id="b11" src="img/buildings/b11.png" width="150" height="230"/>
                <a href="http://www.lifestylemirror.com/man/style/lifestyle-mirror-lifestyle-avenue-exclusive-brooks-brothers-boutique/">
                    <div class="popover pb11"><div class="shop_now">SHOP NOW</div></div>
                </a>
            </div>

        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:58:17.517

我无论如何都不会认为这是一个答案，但我不会让我用我目前的声誉添加评论，但请看看这个页面：

[http://www.dwuser.com/education/content/creating-a-jquery-image-scroller/](http://www.dwuser.com/education/content/creating-a-jquery-image-scroller/)

这似乎是您想要实现的目标，但方式不同。过去它对我来说效果很好，并且代码解释得很好。也许您可以使用它或使用其中的一些想法来帮助您的项目。

使用它，您可以将图像拆分为 5 - 10 个部分，然后滚动浏览它们，将乞求图像添加到末尾以重置滑块。这在上面的文章中解释得很清楚。

至于为什么你的代码会出现这样的故障，坦率地说，我不知道。对不起，我不能更直接地回答你的问题。

# ios - UIMenuItem 切换到其他选项卡后没有出现

> ID：13558280
> 
> 赞同：1
> 
> 时间：2012-11-26T03:24:40.337
> 
> 标签：ios, uitabbar, uimenuitem

我已经实现了一个 UIMenuItem，通过长按 TableViewController 上的一个项目来显示，该项目是 UITabBarController 的一个元素。我像下面那样做

```
- (void)viewDidLoad
{
    resendMenuItem = [[UIMenuItem alloc] initWithTitle:@"Kirim Ulang" action:@selector(resend:)];
    [[UIMenuController sharedMenuController] setMenuItems: @[resendMenuItem]];
    [[UIMenuController sharedMenuController] update];

} 

- (BOOL)tableView:(UITableView *)tableView shouldShowMenuForRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}

-(BOOL)tableView:(UITableView *)tableView canPerformAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {
    selectedIndex = indexPath.row;
    return (action == @selector(resend:));
}

- (BOOL)tableView:(UITableView *)tableView performAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {
    selectedIndex = indexPath.row;
    return YES;
}

-(BOOL) canPerformAction:(SEL)action withSender:(id)sender {
    return (action == @selector(resend:));
}

-(BOOL)canBecomeFirstResponder {
    return YES;
}

/// this methods will be called for the cell menu items
-(void) resend: (id) sender
{
 // do something
} 
```

最初菜单看起来不错。但是，在切换到 UITabBarController 中的其他选项卡然后再次切换回 UITableViewController 后，如果我长按它，菜单就不会出现。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:00:53.537

我有同样的问题。[在此答案](https://stackoverflow.com/a/13096016/536241)中找到解决方案：您必须在 UITableViewController 的 viewDidAppear 中调用 becomeFirstResponder。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-29T02:36:33.013

您应该实现以下`UITabBarControllerDelegate`方法：

迅速：

```
func tabBarController(_ tabBarController: UITabBarController, didSelect viewController: UIViewController) {
    viewController.becomeFirstResponder()
} 
```

目标-C：

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {
    [viewController becomeFirstResponder];
} 
```

# java - 强制android立即发送UDP数据包？

> ID：13558283
> 
> 赞同：9
> 
> 时间：2012-11-26T03:24:56.087
> 
> 标签：java, android, udp, ping, latency

我正在尝试通过 WiFi 将我的 Galaxy Ace 连接到我的笔记本电脑。两个设备都通过 WiFi 连接到路由器，并且双方都使用 Java。

在 TCP 连接不时给我很高的 ping 之后，我决定将连接基于 UDP，以便能够控制实际发送数据包的时间。

但是，Android 似乎仍在缓冲 UDP 数据包并且不会立即发送它们。如果在几分之一秒内没有传出数据，则此操作或它会完全关闭 WiFi。

首先，我以大约每秒一次的不规则间隔 ping 电话，反复发送 ping 请求，只要没有收到应答（包括 UDP 中的丢包）：

```
 computer -> phone -> computer
    Pinging 192.168.1.40: 148.05968ms
    Pinging 192.168.1.40: 524.41156ms
    Pinging 192.168.1.40: 705.8688ms
    Pinging 192.168.1.40: 3.705367ms
    Pinging 192.168.1.40: 3.872159ms
    Pinging 192.168.1.40: 549.4541ms
    Pinging 192.168.1.40: 479.29843ms
    Pinging 192.168.1.40: 3.89936ms
    Pinging 192.168.1.40: 428.85876ms
    Pinging 192.168.1.40: 739.28125ms 
```

我通过每 100 毫秒仅使用 1 个字节的数据将数据包从手机发送到计算机来解决此问题，除此之外没有改变例程：

```
 computer -> phone -> computer
    Pinging 192.168.1.40: 4.147753ms
    Pinging 192.168.1.40: 3.738213ms
    Pinging 192.168.1.40: 14.133768ms
    Pinging 192.168.1.40: 4.470561ms
    Pinging 192.168.1.40: 3.628386ms
    Pinging 192.168.1.40: 3.898334ms
    Pinging 192.168.1.40: 3.512401ms
    Pinging 192.168.1.40: 7.907006ms
    Pinging 192.168.1.40: 5.234216ms
    Pinging 192.168.1.40: 5.639137ms 
```

对于我的应用程序来说，低延迟至关重要，所以我会继续发送这样的空数据包（至少只要没有传输真实数据）。我想知道，如果我可以强制 android 尽可能快地响应，而不需要在整个网络中抛出无用的数据。那么，有没有更优雅的解决方案呢？

顺便说一句，我假设问题出在智能手机上，而不是计算机上，尽管它也可能是计算机在等待传入的数据包然后发送它的数据包。不过，从我对网络的了解来看，这不太可能。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T04:50:52.280

就 Java 而言，一旦 DatagramSockect.send(...) 被调用，数据报就被“发送”了。Java 应用程序空间中没有缓冲，也无法控制操作系统中的任何缓冲。

TCP 或 UDP 都不太可能“阻止”数据包。更可能的是，根本问题出在 WiFi 级别……或者可能与路由有关……并且操作系统会延迟发送数据包，直到问题自行解决。

* * *

> 谢谢，我现在实现了仅当在此期间没有发送其他数据包时才发送这些保活数据包。

听起来您的保活 ping 正在产生预期的效果……据此我推断根本问题是 / 是由于不活动而导致 WiFi“链接”被丢弃。（这听起来像是“不要耗尽电池”功能......）这表明另一种解决方法是查看您是否可以调整 WiFi 超时。

> 除此之外，将数据包发送到另一个没有人在监听的端口会更快吗？它应该仍然具有相同的效果，对吧？

不太可能有任何区别。没有证据表明问题是由拥堵引起的。证据表明您的手机关闭了不活动的 WiFi 以节省电量......

# wpf - TargetType="{x:Type Button}" 和 TargetType="Button" 有什么区别？

> ID：13558287
> 
> 赞同：61
> 
> 时间：2012-11-26T03:25:08.543
> 
> 标签：wpf, silverlight, xaml

有什么区别

```
TargetType="{x:Type Button}" 
```

和

```
TargetType="Button" 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-26T05:31:43.790

`System.Type`XAML 设计器应用了将字符串值“Button”转换为 is的内置类型转换器`Button`，这使得看起来没有实际区别。

但是，应该练习使用显式类型规范使用`x:Type`.

需要显式`Type`规范是当我们继承`Styles`using时`BasedOn`，隐式字符串将`Type`不起作用。

例如

这会起作用

```
 BasedOn="{StaticResource {x:Type Button}}" 
```

但不是这个...

```
 BasedOn="{StaticResource Button}" 
```

就像这里它会尝试使用键“按钮”搜索资源。但是在`x:Type`规范中，正如我们已经明确指定的那样`Button` `Type`，静态资源的搜索将`Style`针对针对 a 的`Button`.

# ruby - 突出显示正在执行的元素的命令

> ID：13558291
> 
> 赞同：1
> 
> 时间：2012-11-26T03:25:57.863
> 
> 标签：ruby, selenium-webdriver

使用 Selenium IDE，我们可以突出显示元素（以黄色突出显示）。我的意思是在命令文本字段中我们输入命令 - verifyElementPresent，在目标字段中我们输入类似 - id=nav-unanswered & 当我们点击“查找”按钮时，网页上的元素会突出显示。Selenium-webdriver 和 Ruby 有什么办法，我们可以突出显示在脚本运行时开始执行的每个元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:47:07.593

有一个 java 脚本代码，您可以在程序中调用它来突出显示一个元素。但它只能与 Selenium-RC 或 WebDriverBackedSelenium 一起使用。

http://code.google.com/p/selenium/source/browse/trunk/java/client/src/org/openqa/selenium/internal/seleniumemulation/htmlutils.js

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T12:16:31.170

你可以在 selenium+java 中这样做

```
public void highlightElement(WebElement element) {

        for (int i = 0; i < 2; i++) {

            JavascriptExecutor js = (JavascriptExecutor) this.getDriver();
            js.executeScript(
                    "arguments[0].setAttribute('style', arguments[1]);",
                    element, "color: yellow; border: 3px solid yellow;");
            js.executeScript(
                    "arguments[0].setAttribute('style', arguments[1]);",
                    element, "");

        }

    } 
```

# php - 浏览器关闭后用户未访问会话数据

> ID：13558292
> 
> 赞同：1
> 
> 时间：2012-11-26T03:26:03.117
> 
> 标签：php, session, browser

我已经看到这个问题问了几十次，但没有一个答案有效。

我有会话数据（`$_SESSION['name']`例如），即使在用户关闭浏览器窗口并打开新浏览器后它仍然可以访问。这发生在 chrome 和 FF 中，而不是 IE 中。

我需要一种方法来在用户访问我的网站时为用户生成随机数据，并在他打开浏览器窗口时保留该数据（即使他在其他网站上也是如此）。但是如果他关闭并打开一个新的浏览器窗口，那么我想再次生成随机数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:41:00.290

您需要在浏览器关闭后删除会话 cookie。这是通过 [session.cookie-lifetime](http://www.php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime)设置完成的：

> session.cookie_lifetime integer session.cookie_lifetime 以秒为单位指定发送到浏览器的 cookie 的生命周期。值 0 表示“直到浏览器关闭”。

您可以添加php.ini，也可以使用[session_set_cookie_params](http://www.php.net/manual/en/function.session-set-cookie-params.php)`session.cookie_lifetime = 0`为每个请求手动设置它

```
session_set_cookie_params(0); // Call before session_start
session_start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T03:40:34.350

会话 cookie 保存在临时内存中，只有在浏览器关闭时才会被删除，这与根据配置的生命周期删除的持久性 cookie 不同。

即使用户通过关闭窗口离开您的站点，这并不意味着浏览器本身会关闭，因此“会话”cookie 可能会由浏览器自行决定保持活动状态。一方面，Firefox 在该领域有一些[有趣的行为](http://www.mrclay.org/2010/05/02/uh-oh-firefoxs-unique-session-cookie-behavior/)。

也许在每个浏览器会话一页的早期，关闭窗口通常意味着关闭整个浏览器，因此这个问题可能不像现在那么普遍。

底线是基于打开和关闭浏览器窗口的会话 cookie 的行为根本不可靠，您应该找到其他方法来完成您需要的操作。设置明确的[生命周期](http://www.php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime)实际上可能对您有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T03:45:10.307

`$_SESSION`默认情况下，当您的浏览器关闭时总是结束，但如果您仍想使用您使用的上一个会话

您可以使用[session_set_cookie_parameters()](http://www.php.net/manual/en/function.session-set-cookie-params.php)在开始会话之前为会话 cookie 提供非零生命周期，或将[session.cookie_lifetime](http://www.php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime)设置为非零。

# hash - 哈希表的最佳增量哈希函数

> ID：13558293
> 
> 赞同：1
> 
> 时间：2012-11-26T03:26:14.433
> 
> 标签：hash

哪个*增量*哈希函数最适合通用哈希表实现？

我需要在哈希表中搜索一条消息，例如“ABC”。如果消息在散列表中，则在消息中附加一条短信息，例如“D”，然后在散列表中搜索消息“ABCD”。重复追加更多信息，直到哈希表中不存在全部信息。

我需要做很多这种搜索，所以一个高效（计算速度快、冲突率低）的增量哈希函数对我的算法非常重要。

# java - AppEngine/Java Cron DeadlineExceededException

> ID：13558295
> 
> 赞同：1
> 
> 时间：2012-11-26T03:26:34.810
> 
> 标签：java, google-app-engine, cron

我在 appengine 项目中有 cron 设置：

```
<?xml version="1.0" encoding="UTF-8"?>
<cronentries>
    <cron>
        <url>/cron/someurl</url>
        <description>cron</description>
        <schedule>every monday 8:00</schedule>
        <timezone>Asia/Singapore</timezone>
    </cron>
</cronentries> 
```

我收到错误消息：

```
com.google.apphosting.api.DeadlineExceededException: This request (40811df3b6350a70) started at 2012/11/26 00:00:00.404 UTC and was still executing at 2012/11/26 00:09:59.917 UTC. 
```

运行任务有 1 分钟的限制？我虽然 cron 没有这个限制。如何避免cron条目中的错误？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T05:50:09.260

[根据文档](https://developers.google.com/appengine/docs/java/config/cron)，由 cron 调用的 HTTP 请求最多可以运行 10 分钟。如果您密切注意 HH:MM:SS 值中的异常日志，您会发现自作业开始以来总共过去了 10 分钟。

您可能想查看您的代码以了解为什么要花这么长时间。如果您的要求使您的任务运行时间超过 10 分钟，我建议您查看捕获异常，然后插入另一个请求以运行带有一些请求参数的作业，该参数告诉作业从上次停止的位置开始.

或者，您也可以查看[Backends](https://developers.google.com/appengine/docs/java/backends/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-01T21:33:03.857

您也可以尝试使用任务队列（最多 10 分钟）并在接近时间限制时重新排队，使用存储在数据存储中的任何状态变量，或者如果您依赖于数据存储中的迭代，您可以传递数据存储游标到另一个重新排队的任务。对我来说效果很好。

# java - 当 Java 应用程序位于负载均衡器后面时，在某些 URL 上强制使用 SSL

> ID：13558303
> 
> 赞同：1
> 
> 时间：2012-11-26T03:28:37.190
> 
> 标签：java, ssl, heroku, https, load-balancing

我有一个 Java Web 应用程序，我在其中定义了某些 URL 只能通过 HTTPS 访问 - 这是使用 web.xml 中的安全约束定义完成的，如下所示：

```
<security-constraint>
                <web-resource-collection>
                        <web-resource-name>SSL URLs</web-resource-name>
                        <url-pattern>/j_spring_security_check</url-pattern>
                        <url-pattern>/secure/account/create</url-pattern>
                        <url-pattern>/register</url-pattern>
                        <url-pattern>/login/*</url-pattern>
                        <url-pattern>/</url-pattern>
                        <http-method>GET</http-method>
                <http-method>POST</http-method>
                </web-resource-collection>
                <user-data-constraint>
                        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
                </user-data-constraint>
        </security-constraint> 
```

我的问题是，当我将应用程序部署到 Heroku 并尝试背负其 SSL 连接时，我的应用程序位于负载均衡器后面，并且进入应用程序的每个请求都是 HTTP，因此，我的 web.xml 中的上述定义强制重定向到 SSL URL，它再次作为 HTTP 进入应用程序，因此它最终进入重定向循环，在我的浏览器中显示为错误。

我不太确定如何处理这个问题，我读过我可以查看 x-forwarded-proto，它应该告诉我原始请求是 https 还是 http，但我不知道该怎么处理它因为上面的安全约束总是会起作用。我应该删除安全约束部分并以编程方式强制执行 https 吗？这对我来说似乎并不理想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:28:57.203

确保您的负载平衡器转发有关 SSL 的信息，然后您的应用程序应该能够识别连接是加密的，即使与应用程序服务器本身的连接不是。

# c++ - 初始化 stringstream.str( a_value ) 和 stringstream << a_value 之间的区别

> ID：13558306
> 
> 赞同：13
> 
> 时间：2012-11-26T03:28:48.573
> 
> 标签：c++, initialization, concatenation, stringstream

考虑：

```
std::string        s_a, s_b;

std::stringstream  ss_1, ss_2;

// at this stage:
//     ss_1 and ss_2 have been used and are now in some strange state
//     s_a and s_b contain non-white space words

ss_1.str( std::string() );
ss_1.clear();

ss_1 << s_a;
ss_1 << s_b;

// ss_1.str().c_str() is now the concatenation of s_a and s_b, 
//                    <strike>with</strike> without space between them

ss_2.str( s_a );
ss_2.clear();

// ss_2.str().c_str() is now s_a

ss_2 << s_b;  // line ***

// ss_2.str().c_str() the value of s_a is over-written by s_b 
// 
// Replacing line *** above with "ss_2 << ss_2.str() << " " << s_b;"
//                    results in ss_2 having the same content as ss_1. 
```

问题：

1.  stringstream.str(a_value); 有什么区别？和 stringstream << a_value; 并且，具体来说，为什么第一个不允许通过 << 进行连接，但第二个允许？

2.  ~~为什么 ss_1 会自动获得 s_a 和 s_b 之间的空白，但是我们是否需要在可以替换行 ***: 的行中显式添加空白 `ss_2 << ss_2.str() << " " << s_b;`？~~

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T03:51:36.340

您遇到的问题是因为`std::stringstream`默认构造`ios_base::openmode mode = ios_base::in|ios_base::out`为非*附加*模式。

您对此处的输出模式感兴趣（即`ios_base::openmode mode = ios_base::out`：）

`std::basic_stringbuf::str(const std::basic_string<CharT, Traits, Allocator>& s)`以两种不同的方式运行，具体取决于`openmode`：

1.  `mode & ios_base::ate == false`:（即：**非附加**输出流）：

    `str`将设置`pptr() == pbase()`，以便后续输出将**覆盖从 s 复制的字符**

2.  `mode & ios_base::ate == true`:（即：**附加**输出流）：

    `str`将设置`pptr() == pbase() + s.size()`，以便后续输出将**附加**到从 s 复制的最后一个字符

（注意这个**附加**模式是c++11以后新增的）

更多细节可以在[这里](http://en.cppreference.com/w/cpp/io/basic_stringbuf/str)找到。

如果您想要*附加*行为，请创建您的`stringstream`with `ios_base::ate`：

```
std::stringstream ss(std::ios_base::out | std::ios_base::ate) 
```

这里的简单示例应用程序：

```
#include <iostream>
#include <sstream>

void non_appending()
{
    std::stringstream ss;
    std::string s = "hello world";

    ss.str(s);
    std::cout << ss.str() << std::endl;

    ss << "how are you?";
    std::cout << ss.str() << std::endl;
}

void appending()
{
    std::stringstream ss(std::ios_base::out | std::ios_base::ate);
    std::string s = "hello world";

    ss.str(s);
    std::cout << ss.str() << std::endl;

    ss << "how are you?";
    std::cout << ss.str() << std::endl;
}

int main()
{
    non_appending();
    appending();

    exit(0);
} 
```

如上所述，这将以 2 种不同的方式输出：

```
hello world
how are you?
hello world
hello worldhow are you? 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T03:37:10.687

建议您阅读字符串流参考：[http ://en.cppreference.com/w/cpp/io/basic_stringstream](http://en.cppreference.com/w/cpp/io/basic_stringstream)

`std::stringstream::str()`替换底层字符串的内容

`operator<<`将数据插入流中。

# objective-c - 检测删除键被按下

> ID：13558308
> 
> 赞同：1
> 
> 时间：2012-11-26T03:28:56.020
> 
> 标签：objective-c, ios, xcode

我四处寻找方法来检测何时按下删除键。我遇到了 Apple 的关键处理文档，还有一些人尝试解决这个问题。我不确定要采用哪种方法。我想做的很简单：

```
-(void)deleteKeyWasPressed {

if (myTextField.text.length == 0) {

[previousTextField becomeFirstResponder]; 

}

} 
```

但据我所知，这种方法不存在。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T03:33:29.877

iOS 不直接支持检测删除键（或 Return 以外的任何键）。你能做的最好的就是实现`textField:shouldChangeCharactersInRange:replacementString:`委托方法。当用户点击 Delete 键时，替换字符串将是空字符串。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    if (string.length == 0) {
        // handle Delete (but this also handles the Cut menu as well)
    } else {
        // some other key or text is being pasted.
    }

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T03:33:47.527

我实现它的方式是将文本字段的先前长度保存在某处，然后将先前的长度与当前长度进行比较。如果先前的长度大于当前长度，则按下删除键。对我来说效果很好。

# sql - 创建视图，根据不同的标准从表中删除多个数据切片

> ID：13558315
> 
> 赞同：2
> 
> 时间：2012-11-26T03:30:09.560
> 
> 标签：sql, sql-server, sql-server-2005

下表包含 PC 资产信息，我需要根据不同的标准从中删除数据片段。

我需要在 SQL Server 2005 中创建一个返回结果的视图。

我尝试使用临时表来实现我的目标，直到我意识到我不能在视图中使用临时表。

然后我尝试使用 CTE，直到我意识到从 CTE 中删除数据也会从实际表中删除数据。

我无法从实际表中删除数据。我也无法在数据库中创建另一个表。

该表有 160,000 条记录。

桌子：

```
TABLE dsm_hardware_basic
(
[UUID] binary(16) -- Randomly generated 16 digit key that is unique for each record, only column with no duplicate rows.
[HostUUID] binary(16) -- Randomly generated 16 digit key, column has duplicate rows.
[Name] nvarchar(255) -- Column that contains hostnames of computer assets. Example of record: PCASSET001\. Column has duplicate rows.
[LastAgentExecution] datetime -- The last time that the software agent that collects asset information ran on the PC.
[HostName] nvarchar(255) -- The fully qualified domain name of the PC. Example of record: PCASSET001.companydomain.com. Column has duplicate rows.
) 
```

我将解释我想要完成的事情：

1) 读入表 dbo.dsm_hardware_basic 中的所有信息。让我们称之为：dsm_hardware_basic_copy。

2) 查询 dbo.dsm_hardware_basic 并从 dsm_hardware_basic_copy 中删除符合以下条件的数据。这基本上删除了具有最早 [LastAgentExecution] 时间的重复 [HostUUID]。：

```
 SELECT   ,dsm_hardware_basic.[HostUUID]
             ,MIN(dsm_hardware_basic.[LastAgentExecution]) AS [LastAgentExecution]
    FROM      dsm_hardware_basic
    WHERE     dsm_hardware_basic.[HostUUID] <> ''
    GROUP BY  dsm_hardware_basic.[HostUUID]
              HAVING COUNT(*) = 2 -- The tiny amount of rows where this count is >2 will be left alone. 
```

3) 另外查询 dbo.dsm_hardware_basic 并从 dsm_hardware_basic_copy 中删除符合以下条件的数据：这基本上删除了具有最早 [LastAgentExecution] 时间的重复 [HostName]。：

```
 SELECT   ,dsm_hardware_basic.[HostName]
             ,MIN(dsm_hardware_basic.[LastAgentExecution]) AS [LastAgentExecution]
    FROM      dsm_hardware_basic
    WHERE     dsm_hardware_basic.[HostName] <> ''
    GROUP BY  dsm_hardware_basic.[HostName]
              HAVING COUNT(*) > 1 
```

我不确定如何在上面的选择中执行此操作，但不仅 [HostName] 的 COUNT 应该 > 1，而且 [Name] 应该等于 [HostName] 中第一个句点之前 [HostName] 中的所有内容。示例 [名称]：PCASSET001。示例 [主机名]：PCASSET001.companydomain.com。考虑到我们在这两列中讨论的 PC 数据类型，我知道这听起来很奇怪，但这是我真正需要解决的问题。

3) 另外查询 dbo.dsm_hardware_basic 并从 dsm_hardware_basic_copy 中删除符合以下条件的数据：

这基本上删除了具有最早 [LastAgentExecution] 时间的重复 [Name]。：

```
 SELECT   ,dsm_hardware_basic.[Name]
             ,MIN(dsm_hardware_basic.[LastAgentExecution]) AS [LastAgentExecution]
    FROM      dsm_hardware_basic
    WHERE     dsm_hardware_basic.[Name] <> ''
    GROUP BY  dsm_hardware_basic.[Name]
              HAVING COUNT(*) = 2 -- The tiny amount of rows where this count is >2 will be left alone. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:09:50.893

您实际上已经在这里问了几个不同的问题，我不确定我是否完全遵循查询的逻辑，但是，构建它应该不会太难。

首先，您可以`dsm_hardware_basic`直接工作而不是复制：

```
SELECT 
    * 
FROM dsm_hardware_basic 
```

现在的部分

> 删除具有最早 [LastAgentExecution] 时间的重复 [HostUUID]

```
SELECT 
    dsm_hardware_basic.* 
FROM dsm_hardware_basic
INNER JOIN 
    (
        SELECT [UUID], ROW_NUMBER() OVER 
            (PARTITION BY [HostUUID] 
             ORDER BY [LastAgentExecution] DESC) AS host_UUID_rank
        FROM dsm_hardware_basic
        WHERE 
            [HostUUID] <> ''
    ) AS 
    duplicate_host_UUID_filtered ON dsm_hardware_basic.UUID = duplicate_host_UUID_filtered.UUID
    AND duplicate_host_UUID_filtered.host_UUID_rank = 1 
```

我们所做的是`HostUUID`按最新排序对您的表进行分区，`LastAgentExecution`并使用`JOIN`.

我们现在可以将相同的逻辑应用于您的`HostName`：

```
SELECT 
    dsm_hardware_basic.* 
FROM dsm_hardware_basic
INNER JOIN 
    (
        SELECT [UUID], ROW_NUMBER() OVER 
            (PARTITION BY [HostUUID] 
             ORDER BY [LastAgentExecution] DESC) AS host_UUID_rank
        FROM dsm_hardware_basic
        WHERE 
            [HostUUID] <> ''
    ) AS 
    duplicate_host_UUID_filtered ON dsm_hardware_basic.UUID = duplicate_host_UUID_filtered.UUID
    AND duplicate_host_UUID_filtered.host_UUID_rank = 1
INNER JOIN 
    (
        SELECT [UUID], ROW_NUMBER() OVER 
            (PARTITION BY [HostName] 
             ORDER BY [LastAgentExecution] DESC) AS host_UUID_rank
        FROM dsm_hardware_basic
        WHERE 
            [HostName] <> ''
    ) AS 
    duplicate_HostName_filtered ON dsm_hardware_basic.UUID = duplicate_HostName_filtered.UUID
    AND duplicate_HostName_filtered.host_UUID_rank = 1 
```

我将把最后一部分留给你作为练习。最后，在您完成调试后，只需添加`CREATE VIEW`到此。

# java - 如何确定以前是否在变量中使用过数字？

> ID：13558316
> 
> 赞同：-3
> 
> 时间：2012-11-26T03:30:25.893
> 
> 标签：java, random, random-access

如果用户尝试输入以前使用的 ID 号，我将如何不保存记录？我已经尝试了一个while循环，它第二次询问用户，之后它就不会工作了。我想过使用数组吗？

```
import java.util.*;

import java.io.*;
public class CreateCustomerFile
{
   public static void main(String[] args) throws IOException
   {
      int pos;
      RandomAccessFile it = 
         new RandomAccessFile("CustomerFile.txt", "rw");
      Scanner input = new Scanner(System.in);

      int id;
      String name;
      int zip;
      final int RECORDSIZE = 100;
      final int NUMRECORDS = 1000;
      final int STOP = 99;
      try
      {

        byte [] padding = new byte[RECORDSIZE];
     Arrays.fill(padding, (byte)0 );
     for(int x = 0; x < NUMRECORDS; ++x)
     {
         it.write(padding);
     }

      }

      catch(IOException e)
      {
         System.out.println("Error: " + e.getMessage());
      }
      finally
      {
         it.close();
      }
      it = 
        new RandomAccessFile("CustomerFile.txt","rw");
      try
      {
         System.out.print("Enter ID number" +  
                        " or " + STOP + " to quit ");

         id = input.nextInt();
         while(id != STOP)
         {
            input.nextLine();

            System.out.print("Enter last name");
            name = input.nextLine();
                while(name.length() > 7 || name.length() <7)
                {   
                System.out.print("Name must be 7 characters; Enter last name");
            name = input.nextLine();
                }
            System.out.print("Enter zipcode ");
            zip = input.nextInt();
            pos = id - 1;
            it.seek(pos * RECORDSIZE);
            it.writeInt(id);
                it.writeUTF(name);
            it.writeInt(zip);
                System.out.print("Enter ID number"  +
               " or " + STOP + " to quit ");
           int id1 = input.nextInt();

                if(id == id1)
                {
             System.out.print("Id has been previously used" );

                 System.out.print("Enter ID number"  +
               " or " + STOP + " to quit ");
           id1 = input.nextInt();

                }
                id = id1;

                }

         }  

      catch(IOException e)
      {
         System.out.println("Error: " + e.getMessage());
      }
      finally
      {
         it.close();
      }
   }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T03:33:06.837

您应该考虑将[UUID](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html)用于唯一标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T03:36:32.700

听起来你可能需要一个哈希表/字典。

可以找到 Java 的哈希表/字典实现：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Dictionary.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Dictionary.html)

基本示例：

```
import java.util.*;
public class DictionaryDemo {
public static void main(String[] args)
{
Dictionary d=new Hashtable();

    d.put("1", "a");
    d.put("2","b" );
    d.put("3","ck" );
    d.put("4","c" );
    d.put("10","d" );
    System.out.println(d.get("10"));
    System.out.println(d.remove("10")+"  has been removed");
    System.out.println("the  value of key 10 = " +d.get("10"));

 for (Enumeration e = d.keys();e.hasMoreElements();)
     System.out.println(e.nextElement());
     System.out.println(e.nextElement());

}
} 
```

# parallel-processing - OpenMP 私有数组 - 分段错误：11

> ID：13558318
> 
> 赞同：2
> 
> 时间：2012-11-26T03:30:48.763
> 
> 标签：parallel-processing, fortran, openmp, fortran90

当我尝试通过 OpenMP 在 Fortran90 中并行化我的程序时，我收到了分段错误错误。

```
 !$OMP PARALLEL DO NUM_THREADS(4) &
    !$OMP PRIVATE(numstrain, i)
    do irep = 1, nrep
        do i=1, 10
            PRINT *, numstrain(i)
        end do
    end do
    !$OMP END PARALLEL DO 
```

我发现如果我注释掉“PRINT *, numstrain(i)”或删除 openmp 标志，它可以正常工作。我认为这是因为当我并行访问 numstrain(i) 时会发生内存访问冲突。我已经将 i 和 numstrain 声明为私有变量。有人可以告诉我为什么会这样吗？非常感谢。:)

更新：

我修改了以前的版本，这个版本可以打印出正确的结果。

```
integer, allocatable :: numstrain(:)
integer :: allocate_status
integer :: n
!$OMP PARALLEL DO NUM_THREADS(4) &
!$OMP PRIVATE(numstrain, i)
n = 1000000
do irep = 1, nrep
    allocate (numstrain(n), stat = allocate_status)
    do i=1, 10
        PRINT *, numstrain(i)
    end do
    deallocate (numstrain, stat = allocate_status)
end do
!$OMP END PARALLEL DO 
```

但是，如果我将 numstrain 访问移动到由该子例程调用的另一个子例程（代码附在下面），1\. 它总是在一个线程中处理。2\. 在某个点（i=4 或 5），它返回 Segmentation Fault:11。当我有不同的 NUM_THREADS 时，它返回 Segmentation Fault:11 时的变量 i 是不同的。

```
integer, allocatable :: numstrain(:)
integer :: allocate_status
integer :: n
!$OMP PARALLEL DO NUM_THREADS(4) &
!$OMP PRIVATE(numstrain, i)
n = 1000000
do irep = 1, nrep
    allocate (numstrain(n), stat = allocate_status)
    call anotherSubroutine(numstrain)
    deallocate (numstrain, stat = allocate_status)
end do
!$OMP END PARALLEL DO

subroutine anotherSubroutine(numstrain)
    integer, allocatable   :: numstrain(:)
    do i=1, 10
        PRINT *, numstrain(i)
    end do
end subroutine anotherSubroutine 
```

我还尝试在帮助子程序和主子程序中分配/解除分配，并且只在帮助子程序中分配/解除分配。什么都没有改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:14:35.697

最典型的原因是堆栈上没有足够的空间来保存`numstrain`. 计算并比较以下两个值：

*   数组的大小（以字节为单位）
*   堆栈大小限制

有两种堆栈大小限制。主线程的堆栈大小由 Unix 系统上的进程限制（用于`ulimit -s`检查和修改此限制）或在 Windows 上的链接时固定（需要重新编译或二进制编辑可执行文件以更改限制） ）。附加 OpenMP 线程的堆栈大小由环境变量控制，例如标准`OMP_STACKSIZE`或特定于实现的`GOMP_STACKSIZE`(GNU/GCC OpenMP) 和`KMP_STACKSIZE`(Intel OpenMP)。

请注意，大多数 Fortran OpenMP 实现总是将私有数组放在堆栈上，无论您是否启用在堆上分配大型数组的编译器选项（使用 GNU`gfortran`和 Intel测试`ifort`）。

如果您注释掉该`PRINT`语句，您就有效地删除了对的引用，`numstrain`并且编译器可以自由地对其进行优化，例如，它不能简单地制作 的私有副本`numstrain`，因此不会超过堆栈限制。

* * *

在您提供的其他信息可以得出结论之后，堆栈大小不是罪魁祸首。在处理`private` `ALLOCATABLE`数组时，您应该知道：

*   未分配数组的私有副本保持未分配；
*   分配数组的私有副本分配有相同的界限。

如果您不在`numstrain`并行区域之外使用，则可以按照您在第一种情况下所做的操作，但需要进行一些修改：

```
integer, allocatable :: numstrain(:)
integer :: allocate_status
integer, parameter :: n = 1000000
interface
   subroutine anotherSubroutine(numstrain)
      integer, allocatable :: numstrain(:)
   end subroutine anotherSubroutine
end interface

!$OMP PARALLEL NUM_THREADS(4) PRIVATE(numstrain, allocate_status)
allocate (numstrain(n), stat = allocate_status)
!$OMP DO
do irep = 1, nrep
   call anotherSubroutine(numstrain)
end do
!$OMP END DO
deallocate (numstrain)
!$OMP END PARALLEL 
```

如果您还在`numstrain`并行区域之外使用，则分配和释放将在外部进行：

```
allocate (numstrain(n), stat = allocate_status)
!$OMP PARALLEL DO NUM_THREADS(4) PRIVATE(numstrain)
do irep = 1, nrep
   call anotherSubroutine(numstrain)
end do
!$OMP END PARALLEL DO
deallocate (numstrain) 
```

您还应该知道，当您调用将`ALLOCATABLE`数组作为参数的例程时，您必须为该例程提供显式接口。您可以编写一个`INTERFACE`块，也可以将被调用的例程放在一个模块中，然后放在该`USE`模块中——这两种情况都将提供显式接口。如果您不提供显式接口，编译器将无法正确传递数组，并且子例程将无法访问其内容。

# c# - 将点符号插入字符串编号

> ID：13558321
> 
> 赞同：7
> 
> 时间：2012-11-26T03:31:08.077
> 
> 标签：c#, .net

我有 int 变量，例如：

```
int money = 1234567890; 
```

我如何插入“。” 变成钱，并使其格式如下：

```
1.234.567.890 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-26T03:41:09.310

你可以简单地这样做：

```
var text = money.ToString("N0",
    System.Globalization.CultureInfo.GetCultureInfo("de")); 
```

结果是：

```
1.234.567.890 
```

（我刚刚选择了德国文化，因为我知道他们使用`.`分隔符。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T03:43:53.447

您可以使用[`NumberFormatInfo.NumberGroupSeparator`](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.numbergroupseparator.aspx)：

```
NumberFormatInfo nfi = new CultureInfo( "en-US", false ).NumberFormat;
nfi.NumberGroupSeparator = ".";
Int64 myInt = 1234567890;
Console.WriteLine( myInt.ToString( "N", nfi ) ); 
```

（[链接到ideone。](http://ideone.com/Z7O5Ou)）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-26T03:35:43.697

要获得准确的格式，请使用

```
int money = 1234567890;
money.ToString(@"#\.###\.###\.##0"); 
```

有关自定义格式的更多信息，请[点击此处](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)。您需要转义点，否则第一个将被解释为十进制。如果要显示零值，则最后需要 0。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T03:35:17.307

如果您想要“金钱”格式，请尝试：

```
 int money = 1234567890;
    string moneyString = String.Format("{0:C}", money); 
```

返回 "$1,234,567,890.00"

我不确定什么货币格式使用“。” 而不是“，”，但这可能只是一个全球化的事情。

# android - 无法从edittext中检索值

> ID：13558322
> 
> 赞同：0
> 
> 时间：2012-11-26T03:31:14.850
> 
> 标签：android, android-edittext

您好我正在尝试从我的编辑文本中检索某些值。

首先，当我没有输入任何内容时，我敬酒以通知我没有文本输入并且它有效！

然后当我输入文本时，这一次，祝酒词再次出现！当有文本输入时..

显示 toast / 检索文本的代码：

```
public class ResetPassword extends Activity implements OnClickListener{

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();

    private static final String TAG_PASSWORD = "password";
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_PASS = "pass";

    String enteredPassword;
    String changedPass;
    String currentPass;
    //String password;

    // products JSONArray
    JSONArray products = null;

    //private static String url_member_login = "http://10.0.2.2/android_connect/get_login.php";
    private static String url_login = "http://10.0.2.2/android_connect/change_password.php";

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.password);

        this.setRequestedOrientation(
                ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        ImageButton home = (ImageButton)findViewById(R.id.btn_home);
        home.setOnClickListener(this);

        Button save = (Button) findViewById(R.id.btn_save);
        save.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) 
                {
                if (currentPass != null && changedPass != null)
                {
                   new ResetPass().execute();
                }     
                else
                {
                    /** A TEMPORARY DISPLAY FROM CUSTOM TOAST **/
                    LayoutInflater inflater = getLayoutInflater();
                    View layout = inflater.inflate(R.layout.customtoast,
                                                   (ViewGroup) findViewById(R.id.toast_layout_root));

                    TextView text1 = (TextView) layout.findViewById(R.id.txt_engRecords);
                    TextView text2 = (TextView) layout.findViewById(R.id.txt_chiRecords);

                    text1.setText("Feature is temporarily unavailable");
                    text2.setText("Unable to update ");

                    Toast toast = new Toast(getApplicationContext());
                    toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
                    toast.setDuration(Toast.LENGTH_SHORT);
                    toast.setView(layout);
                    toast.show();               

                }

                }});

    }

    /**
     * Background Async Task to  Save product Details
     * */

    class ResetPass extends AsyncTask<String, String, String> {

        /**
         * Saving product
         * */
        protected String doInBackground(String... args) {

            // check json success tag
            try {
                // Building Parameters

                   EditText currentPassword = (EditText) findViewById(R.id.edit_current);
                    currentPass = currentPassword.getText().toString();

                    EditText newPassword = (EditText) findViewById(R.id.edit_new);
                    changedPass = newPassword.getText().toString();

                List<NameValuePair> params = new ArrayList<NameValuePair>();
                params.add(new BasicNameValuePair(TAG_PASSWORD, changedPass));

                // sending modified data through http request
                // Notice that update product url accepts POST method
                JSONObject json = jParser.makeHttpRequest(url_login,
                        "GET", params);

                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    finish();
                } else {
                    // failed to update product
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:36:03.977

您不能从后台线程访问 UI 元素意味着来自 doInBackground。您必须将 EditText 值作为参数传递给 doInBackground，如下所示：

首先在 ArrayList 中添加 EditText vlaues 为：

```
public static List<String> arrlist = new ArrayList<String>();

    arrlist.add(currentPassword.getText().toString());
    arrlist.add(newPassword.getText().toString()); 
```

现在将此列表传递给 AsyncTask 作为：

```
new ResetPass().execute(arrlist); 
```

将您的 AsyncTask 类更改为：

```
 class ResetPass extends AsyncTask<ArrayList<String>, String, String> {

        /**
         * Saving product
         * */
        protected String doInBackground(ArrayList<String>... args) {

                    // check json success tag
                  try {
                       // Building Parameters
                      ArrayList<String> result = new ArrayList<String>();
                      result = passing[0]; //get passed arraylist
                      currentPass = result.get(0); // get old pass from ArrayList
                      changedPass = result.get(1);// get new pass from ArrayList
                      //...your code here
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }

                    return null;
                }
} 
```

# android - 文本到语音在 Android 4.2 Jelly Bean 中不起作用

> ID：13558337
> 
> 赞同：6
> 
> 时间：2012-11-26T03:33:16.763
> 
> 标签：android

几年前，我们使用 Text to Speech API 在我们的应用程序中添加了语音提示，并且一直运行良好。最近，我们开始收到升级到 Android 4.2 Jelly Bean 的用户的电子邮件，他们说语音提示无法正常工作，并且他们收到一条消息，提示语音数据丢失，需要下载。当他们点击下载时，他们可以选择下载英语以外的语言。

我们在 Android 开发者博客上的这篇[文章之后实现了文本转语音。](http://android-developers.blogspot.fr/2009/09/introduction-to-text-to-speech-in.html)我们正在调用意图，如果返回`TextToSpeech.Engine.ACTION_CHECK_TTS_DATA`以外的任何内容，我们将调用该意图。`TextToSpeech.Engine.CHECK_VOICE_DATA_PASS``TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA`

我们无权访问运行 4.2 的设备。我今天去了一家本地商店，在安装了 4.2 的 Nexus 7 平板电脑上下载了该应用程序，并且能够重现该问题。但是，当我们基于 Nexus 7 创建 AVD 并运行模拟器时，语音提示工作正常，我们无法重现该问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T20:02:43.703

礼貌地说，使用 Android OS4.1 和 OS 4.2 检查 TTS 是不同的。

OS 4.1 未正确处理安装数据的意图*

`TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA`

OS 4.2 未正确处理检查语音数据的意图*

`TextToSpeech.Engine.ACTION_CHECK_TTS_DATA`

***我的意思是它不会按照旧版本返回正确的状态代码。例如，CHECK_TTS_DATA`CHECK_VOICE_DATA_MISSING_DATA`在明确安装了语音数据时返回。现在可能需要传递一些其他意图数据，但我不确定这些数据记录在哪里。

在我的应用程序中，我不得不为较新的操作系统版本禁用这些检查。我怀疑谷歌可能已经这样做了，因为他们使用 Android 的条款现在强制要求 TTS（但我无法验证这一点 - 我确信那里有一个网站准确描述了必须实施什么才能被称为“Android”）

更新

正如我所怀疑的那样，Android OS 4.1 现在要求每个 Android 设备都包含文本转语音功能，因此这些检查现在有些多余。从此链接：[Android 4.1 兼容性定义](http://static.googleusercontent.com/external_content/untrusted_dlcp/source.android.com/en//compatibility/4.1/android-4.1-cdd.pdf)

> 3.11 文本转语音
> Android 4.1 包括允许应用程序使用文本转语音 (TTS) 服务的 API，并允许服务提供商提供 TTS 服务的实现 [Resources, 32]。设备实现必须满足与 Android TTS 框架相关的以下要求：
> 
> *   设备实现必须支持 Android TTS 框架 API，并且应该包含支持设备上可用语言的 TTS 引擎。请注意，上游 Android 开源软件包括一个功能齐全的 TTS 引擎实现。
> *   设备实现必须支持安装第三方 TTS 引擎。
> *   设备实现必须提供用户可访问的界面，允许用户选择在系统级别使用的 TTS 引擎。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T04:34:16.867

代码的直接链接

谷歌项目托管

链接代码

[http://simple-jellybean-tts-example.googlecode.com/svn/trunk/%20simple-jellybean-tts-example/Sandbox/](http://simple-jellybean-tts-example.googlecode.com/svn/trunk/%20simple-jellybean-tts-example/Sandbox/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T04:22:47.393

我建议看下面的代码演示。我会帮助你。

```
http://code.google.com/p/simple-jellybean-tts-example/ 
```

和

看

```
http://developer.android.com/reference/android/speech/tts/TextToSpeech.Engine.html#KEY_FEATURE_NETWORK_SYNTHESIS 
```

和

```
http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#speak(java.lang.String,int,java.util.HashMap) 
```

——贾廷

# zend-framework - zf脚手架工具

> ID：13558341
> 
> 赞同：-1
> 
> 时间：2012-11-26T03:33:57.067
> 
> 标签：zend-framework, zend-framework2

你们中是否有任何开源项目建议遵循或贡献，包括那些已经在 zf 贡献者中记录的项目，以添加 zend 框架脚手架的 crud 功能以实现大多数竞争对手框架中的快速开发？

作为语言和框架的贡献者，而且作为 zf 的日常用户，我知道这是一个有趣的话题，我觉得像你在这里找到的专业开发人员会对我的问题和找到一个正在进行的可以贡献的图书馆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:08:47.177

仍然指出一个生成具有文件夹结构、配置和模块类的新模块的 Repo

*   [Inrbiro / ZF2-代码生成器](https://github.com/Inforbiro/ZF2-Code-Generator)

虽然我个人觉得这比手工操作更麻烦，但这只是第一步。尽管目前看来开发已经停止。

如果有的话（我很确定）会有一个 ZF2-Tool，你会在 zf-commons 存储库中找到它

*   [ZF-Commons](https://github.com/zf-commons)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T03:45:18.327

对不起，显然这不是一个合适的问题，我了解到，在stackoverflow。没有意识到这种问题是不允许的，因为我猜它没有代码。

# python - 使用带有 SelectMultipleField 的 WTForms 的 Flask 应用程序

> ID：13558345
> 
> 赞同：10
> 
> 时间：2012-11-26T03:35:33.600
> 
> 标签：python, flask, jinja2, wtforms

我有一个使用 WTForms 进行用户输入的 Flask 应用程序。它`SelectMultipleField`在表单中使用 a。选择后，我似乎无法让应用程序发布字段中的所有项目；无论用户选择了多少，它只发送选择的第一个项目。

[Flask 文档](http://wtforms.simplecodes.com/docs/0.6.1/fields.html#wtforms.fields.SelectMultipleField)对从此字段类型发送的数据进行了说明，但我没有看到这种行为：

> SelectMultipleField 上的数据存储为对象列表，每个对象都从表单输入中检查和强制。

这是一个完整的、最小的 Flask 应用程序，它说明了这一点：

```
#!/usr/bin/env python

from flask import Flask, render_template_string, request
from wtforms import Form, SelectMultipleField

application = app = Flask('wsgi')

class LanguageForm(Form):
    language = SelectMultipleField(u'Programming Language', choices=[('cpp', 'C++'), ('py', 'Python'), ('text', 'Plain Text')])

template_form = """
{% block content %}
<h1>Set Language</h1>

<form method="POST" action="/">
    <div>{{ form.language.label }} {{ form.language(rows=3, multiple=True) }}</div>
    <button type="submit" class="btn">Submit</button>    
</form>
{% endblock %}

"""

completed_template = """
{% block content %}
<h1>Language Selected</h1>

<div>{{ language }}</div>

{% endblock %}

"""

@app.route('/', methods=['GET', 'POST'])
def index():
    form = LanguageForm(request.form)

    if request.method == 'POST' and form.validate():
        print "POST request and form is valid"
        language =  request.form['language']
        print "languages in wsgi.py: %s" % request.form['language']
        return render_template_string(completed_template, language=language)

    else:

        return render_template_string(template_form, form=form)

if __name__ == '__main__':
    app.run(debug=True) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T06:01:49.603

Flask 将 request.form 作为 werkzeug MultiDict 对象返回。这有点像字典，只是为粗心的人设置了陷阱。

[http://flask.pocoo.org/docs/api/#flask.request](http://flask.pocoo.org/docs/api/#flask.request) http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.MultiDict

> MultiDict 实现了所有标准的字典方法。在内部，它将键的所有值保存为列表，但标准的 dict 访问方法只会返回键的第一个值。如果您也想访问其他值，则必须使用列表方法。

但是，我认为有一个更简单的方法。你能帮我一个忙并尝试替换：

```
language =  request.form['language'] 
```

和

```
language =  form.language.data 
```

看看有什么不同吗？WTForms 应该处理 MultiDict 对象并为您返回一个列表，因为您已将表单数据绑定到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-10-18T22:11:51.657

我最近遇到了这个问题。我发现您可以使用检索所有选择的项目

```
request.form.getlist('...') 
```

这将评估为一个列表，其中包含所有选定的项目。在您的情况下，请使用：

```
languages = request.form.getlist('language') 
```

# javascript - 如何使用 CSS 或 Javascript 或 jQuery 使粗体字体变细？

> ID：13558346
> 
> 赞同：7
> 
> 时间：2012-11-26T03:35:39.297
> 
> 标签：javascript, css, fonts, thin, bold

如果我使用的是字体并且没有粗体版本，我可以使用标签`text-shadow`，添加轮廓以使细字体更粗体。

但我只有粗体字体，我想让它更薄。我不知道要使用什么 CSS 或 Javascript 或 jQuery 脚本。

是否可以使用 CSS、Javascript 或 jQuery 使粗体字体变细？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:05:26.703

你不能让字体变细。甚至使它变得更粗`text-shadow`也是不真实的：它会产生扭曲的字体呈现，而不是更粗的字体。

因此，您应该根据您使用不同字体（包括不同粗细）的意图以及每个字体系列中字体的可用性来选择您的字体系列。

浏览器*可以*实现`font-weight`小于 400 的值，就像某些浏览器在没有可用的粗体字体时实现大于 400 的值一样，即通过算法将宽度更改为更粗。但是似乎没有浏览器可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-29T14:04:17.267

虽然浏览器可以生成粗体版本，但我不知道它们可以执行相反的过程。粗略地说，您可以使用以下方法生成更轻和更窄的文本`transform`：

```
<div style="transform: scaleX(0.8);transform-origin:center left">This might very well appear lighter./div> 
```

但这充其量只是一个非常粗略的技巧，并且需要目测每种字体的比例值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T00:12:25.610

*虽然晚了*
要使字体更薄，请添加

```
 <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic"> 
```

在 head 部分，然后为您的文本设置样式

```
style = "font-family: Lato;
          font-weight:100 or 200 or 300... (according to the thinness you want);
          font-size: ...;" 
```

使用字体 lato，您可以实现所需字体的粗细，并在所有浏览器中对其进行测试。[在这里](http://wbpreview.com/previews/WB0G25H3J/index.html)
检查这些字体 它对我来说非常有用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-26T03:43:26.597

你的意思是 CSS font-weight 属性吗？您可以在此处参考如何使用该属性。[http://www.w3schools.com/cssref/pr_font_weight.asp](http://www.w3schools.com/cssref/pr_font_weight.asp)

# css - 使用 Glyphs 构建并使用 FontSquirrel 导出的图标字体大小不正确

> ID：13558352
> 
> 赞同：1
> 
> 时间：2012-11-26T03:36:16.617
> 
> 标签：css, icons, font-size, octicons

生成的图标过大，即使字体大小设置为 16 像素，它看起来也像 32 像素甚至更大。

我使用 [Octicons][2] 方法来构建图标，因此 Glyphs 设置如下所示：

1.  每个 Em 的单位是 2048
2.  Metrics 就像 Octicons
3.  字形宽度设置为 2048
4.  网格间距设置为 32

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:18:59.310

我的错误是创建“units per em”设置为 1000 的字形。更改值后，已经存在的字形不会自动更新，您应该按下设置旁边的按钮。

# java-native-interface - 黑莓 10：Android 运行时和 JNI

> ID：13558356
> 
> 赞同：6
> 
> 时间：2012-11-26T03:36:42.730
> 
> 标签：java-native-interface, blackberry-10, blackberry-android

BlackBerry 10 Android 运行时是否支持 JNI？我想在我想在黑莓 10 操作系统上部署的 android 应用程序中执行本机 c 代码。在我的 android 应用程序中，我使用 JNI 处理从本地 c 代码到 java 代码的回调。bb10 android 运行时是否支持此功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T04:05:50.323

我能找到的只是这个线程：[任何支持 Android Native Code 的计划](http://supportforums.blackberry.com/t5/Android-Runtime-Development/Any-plans-for-supporting-Android-Native-Code/td-p/1563397)，似乎没有官方回应。

我的猜测是“不”Android NDK 将不受支持，因为 Blackberry 10 已经为那些纯 C/C++ 应用程序（游戏、其他性能密集型应用程序）提供了本机 C/C++ SDK，或者如果您希望 UI 小部件使用 C++ /Qt/Cascades 框架。

编辑：在不支持的软件功能下找到官方回复：“利用捆绑到其 APK 文件中的本机代码的应用程序”。[适用于 Android 的 Blackberry 10 不受支持的软件功能](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_software_features.html "Android 运行时不支持的 Blackberry 10 功能")。因此，对于使用 Android Gingerbread 的 Blackberry 10.1 和更低的运行时，它是绝对不行的。

2013-12-05 更新：看起来 Blackberry 10.2 将支持 Jelly Bean，并通过 Android NDK 对 Android JNI 提供一般支持，但有一些限制。请参阅[Blackberry Android 原生支持](http://developer.blackberry.com/android/apisupport/unsupported_api_android_ndk.html)

# .net - 有关如何使此 XNA 游戏手柄代码更高效/更可靠的任何提示？

> ID：13558358
> 
> 赞同：1
> 
> 时间：2012-11-26T03:36:46.283
> 
> 标签：.net, xna, gamepad

最近我一直在为 ROV 项目编写代码。我的目标是配置一个 XBOX 360 控制器来控制整个事情。到目前为止，一切都很好，除了操纵杆！我确实让它在某种程度上适用于驱动电机，但我希望有人可以快速查看代码，看看是否有更有效或更可靠的方法来做到这一点。我发现有时候我快速拨动摇杆时，当摇杆居中到 0 时电机不熄火。这个项目的问题是它将用于比赛，我想确定一下比赛期间不躲避我。无论如何，这是我目前正在使用的代码。我唯一真正关心的是操纵杆。

```
Imports Microsoft.Xna.Framework
Imports Microsoft.Xna.Framework.Input
Public Class Form1
Dim WithEvents MC1 As Phidget21COM.PhidgetMotorControl
Dim WithEvents MC2 As Phidget21COM.PhidgetMotorControl

Private Sub Form1_FormClosing(ByVal sender As Object, ByVal e As System.Windows.Forms.FormClosingEventArgs) Handles Me.FormClosing
    'Kills the power to the motors and disconnects the Phidget.
    MC1.Velocity(0) = 0
    MC1.Velocity(1) = 0
    MC1.Close()
    MsgBox("Now safe to remove devices")
End Sub

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'Creates a new instance of the motor controller (For drives)
    MC1 = New Phidget21COM.PhidgetMotorControl
    MC1.Open(15100)
    MC1.WaitForAttachment(3000)
    'Checks phidget attached status
    If MC1.IsAttached = True Then
        CheckBox2.Checked = True
    Else
        CheckBox2.Checked = False
        MsgBox("Connection could not be established. Check hardware and restart the program.")
    End If
    'Checks joystick attached status
    JoyConnect.Text = ""
    Threading.Thread.Sleep(1000)
    If GamePad.GetState(PlayerIndex.One).IsConnected = True Then
        JoyConnect.Text = "Controller Connected!"
        CheckBox1.Checked = True
    Else
        JoyConnect.Text = "Not Connected. :("
    End If

End Sub

Private Sub JoySticks()

    'Left Joystick
    Dim LY As Integer
    Dim LX As Integer
    LY = GamePad.GetState(PlayerIndex.One).ThumbSticks.Left.Y * 100
    LX = GamePad.GetState(PlayerIndex.One).ThumbSticks.Left.X * 100
    LX1.Text = LX
    LY1.Text = LY
    If LY > 0 Then
        MC1.Velocity(0) = LY
        MC1.Velocity(1) = LY
    ElseIf LY < 0 Then
        MC1.Velocity(0) = LY
        MC1.Velocity(1) = LY
    ElseIf LX > 0 Then
        MC1.Velocity(0) = LX
        MC1.Velocity(1) = LX * -1
    ElseIf LX < 0 Then
        MC1.Velocity(0) = LX
        MC1.Velocity(1) = LX * -1
    ElseIf LX Or LY = 0 Then           '<--- Seemed to fix some issues with
        MC1.Velocity(0) = 0            'the motors not stopping when the stick
        MC1.Velocity(1) = 0            'centred to 0.
    End If

    'Right Joystick
    Dim RY As Integer
    Dim RX As Integer
    RY = GamePad.GetState(PlayerIndex.One).ThumbSticks.Right.Y * 100
    RX = GamePad.GetState(PlayerIndex.One).ThumbSticks.Right.X * 100
    RY1.Text = RY
    RX1.Text = RX

End Sub

Private Sub Timer1_Tick(ByVal sender As Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    'Frequently updates the joysticks and motors. 1000 Updates/Second. (1ms)
    JoySticks()
End Sub
End Class 
```

# ios - Xcode 4.5 中的当前位置错误

> ID：13558362
> 
> 赞同：2
> 
> 时间：2012-11-26T03:37:56.300
> 
> 标签：ios, xcode, ipad, map

在 Xcode 4.5 苹果引入了苹果新的地图。我的应用程序需要地图服务。而且我注意到在我的应用程序中它会显示错误的当前位置，直到您删除应用程序并重新打开它才会显示正确的当前位置（有时不会）。顺便提一下，当它显示错误的当前位置时，我已连接到 4G。有没有办法修复这个错误，因为我的应用程序非常需要正确的位置。提前致谢。如果您可以提供代码，那将有很大帮助...**编辑：** Apple Map App 中的相同问题

**我的代码：**

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation {
    {

    }

    if (!oldLocation)
        totalDistance = 0.0;
    else
        totalDistance += [newLocation distanceFromLocation:oldLocation];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:26:18.267

苹果文档中的旧方法似乎仍然适用于 iOS6（在我的活动应用程序中没有注意到这一点（它通过 gps 跟踪用户的路线））

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

    NSTimeInterval locationAge = -[newLocation.timestamp timeIntervalSinceNow];
    if (locationAge > 5.0) return;
    if (newLocation.horizontalAccuracy < 0) return; 

    // proceed with coords here
} 
```

*讨论中的更新*：计算总距离和当前距离可以这样完成（不包括一些小东西）：

```
// somewhere at the top
CLLocation* lastUsedLocation = nil; // last location used in calculation
CLLocation* pointA = nil;  // start of the track
double totalDistance = 0;  // total distance of track
double currentDistance = 0; // distance between startTrack point and current location
...

// when you start updating location:
- (void) startTracking {
    lastUsedLocation = nil;
    pointA = nil;
    totalDistance = 0;
    currentDistance = 0;
    [locationManager startUpdatingLocation];
}
...

// location update callback
 - (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation { 
    NSTimeInterval locationAge = -[newLocation.timestamp timeIntervalSinceNow]; 
    if (locationAge > 5.0) return;  // filter cached
    if (newLocation.horizontalAccuracy < 0) return; // filter invalid

    if(!pointA) pointA = [newLocation retain]; 

    if(lastUsedLocation) 
    { 
        totalDistance += [newLocation distanceFromLocation:lastUsedLocation]; 
    } 
    currentDistance = [pointA distanceFromLocation:newLocation]; 
    [lastUsedLocation release]; 
    lastUsedLocation = [newLocation retain]; 
} 
```

如果您需要故意关闭后台位置的选项，您可以手动禁用它，例如：

```
- (void)applicationDidEnterBackground:(UIApplication *)application {
    if(backgroundLocationDisabled)
    {
        [locationManager stopUpdatingLocation];
        // additional stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:29:35.457

我注意到 Xcode 4.4+ 存在同样的问题。该问题仅在 Xcode 中发生（随机发生，或者看起来如此）：如果您将应用程序上传到 App Store，这不再是问题。同时，请提交一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:19:09.783

您应该检查时间戳..如果我正确理解您的应用程序逻辑，您可以执行以下操作 -

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation {

NSDate* time = newLocation.timestamp;
    NSTimeInterval timePeriod = [time timeIntervalSinceNow];
    if(timePeriod < SOME_MINIMUM_TIME_PERIOD ) { //for eg: timePeriod < 1.0
               totalDistance += [newLocation distanceFromLocation:oldLocation];
    } else {
        // skip.. or do what you do on a 'location-not-updated' event
    }
} 
```

# r - 什么时候应该明确指定整数？

> ID：13558365
> 
> 赞同：11
> 
> 时间：2012-11-26T03:38:23.647
> 
> 标签：r, integer

我经常编写 R 代码来测试向量的长度、数据框中的行数或矩阵的维度，例如`if (length(myVector) == 1)`. 在浏览一些基本 R 代码时，我注意到在此类比较中，值被明确表示为整数，通常使用“L”后缀，例如`if (nrow(data.frame) == 5L)`. 显式整数有时也用于函数参数，例如来自`cor`函数的这些语句：`x <- matrix(x, ncol = 1L)`和`apply(u, 2L, rank, na.last = "keep")`. 什么时候应该在 R 中明确指定整数？不指定整数是否有任何潜在的负面影响？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T04:17:42.033

您问：

> 不指定整数是否有任何潜在的负面影响？

在某些情况下，它可能更重要。来自*用于数据分析的钱伯斯软件*p193：

> 只要整数的绝对值小于 2^m，即表示的小数部分的长度（32 位机器为 2^54），整数值将精确地表示为“双”数。

不难看出，如果您计算一个值，它可能看起来像一个整数，但并不完全是一个：

```
> (seq(-.45,.45,.15)*100)[3]
[1] -15
> (seq(-.45,.45,.15)*100)[3] == -15L
[1] FALSE 
```

然而，很难想出一个显式输入整数的例子，并且在浮点表示中它不是一个整数，直到你得到钱伯斯描述的更大的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T03:44:11.527

使用`1L`etc 在编程上是安全的，因为它是明确的意思，并且不依赖于任何转换等。

当以交互方式编写代码时，很容易注意到错误并在此过程中进行修复，但是如果您正在编写一个包（甚至是 base `R`），那么显式会更安全。

当您考虑相等时，使用浮点数会导致精度问题，[请参阅此常见问题解答](http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f)。

显式指定整数可以避免这种情况，因为`nrow`和以及返回或需要整数`length`的索引参数。`apply`

# c++ - 将变量插入mysql表

> ID：13558369
> 
> 赞同：5
> 
> 时间：2012-11-26T03:39:41.267
> 
> 标签：c++, mysql, sql, winapi

我知道如何将非变量值插入 MySql 表（使用 C++）：

前任：

```
//Table person:
mysql_query(conn, "INSERT INTO MyTable VALUES (  '1', 'John', 'Kennedy')");
mysql_query(conn, "INSERT INTO MyTable VALUES (  '2', 'Dave', 'Chappelle')");
mysql_query(conn, "INSERT INTO MyTable VALUES (  '3', 'Arnold', 'Schwarzenegger')");
//Up to 100 rows of data... 
```

我想做的是能够使用 C++ 将变量插入到表中：

前任：

```
i=0;
for(i=0; i < 100; i++)
{
mysql_query(conn, "INSERT INTO MyTable VALUES ( i, 'FirstName', 'LastName')"); 
} 
```

我不想手动输入 100 行数据，而是希望能够使用 for 循环，并增加一个变量来为我创建行。

有谁知道如何使用 C++ 将变量插入 mysql 数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T03:48:06.200

我不太熟悉让它工作的语法，但你想要的通用版本是[Prepared Statements](http://en.wikipedia.org/wiki/Prepared_statement)。你做一个有变量作为占位符的语句。这些是稍后提供的值并使用。

[编辑：您可以在MySQL 网站上](http://dev.mysql.com/doc/refman/5.1/en/connector-cpp-examples-prepared-statements.html)找到有关在 c++ 中使用准备好的语句的更多信息

```
// ...
sql::Connection *con;
sql::PreparedStatement  *prep_stmt
// ...

prep_stmt = con->prepareStatement("INSERT INTO test(id, label) VALUES (?, ?)");

prep_stmt->setInt(1, 1);
prep_stmt->setString(2, "a");
prep_stmt->execute();

prep_stmt->setInt(1, 2);
prep_stmt->setString(2, "b");
prep_stmt->execute();

delete prep_stmt;
delete con; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-18T15:22:48.707

你可以这样做

```
 int var = 10;
   string str = to_string(var);
   string requete="INSERT INTO stat(temps) VALUES (\"";
   requete += str;
   requete += "\")";
   mysql_query(&mysql,requete.c_str()); 
```

只需在 mySql 中指定该字段的类型为 int 、 double 、 float 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T03:54:12.893

在执行查询之前，您需要先创建查询字符串。将下面的 printf 替换为字符串类实例以创建一个。您可能还想将其放入字符串向量中。

```
char queryFmt[]="INSERT INTO myTable VALUES('%d','%s',%s)\n";
char color[16];
char fruit[32];
for(int i=0;i<2;i++)
{       
    //scanf_s("%s",color);
    //scanf_s("%s",fruit);      
    std::cin>>color;
    std::cin>>fruit;
    printf_s(queryFmt,i,color,fruit);

} 
```

如果您还不知道并且对此感兴趣，请参考许多相关问题的线程，使用 scanf 读取循环内的字符或字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-11T16:32:37.703

这对我有用。

```
#include <stdio.h>
#include <stdlib.h>
#include <iostream>

#include <mysql_connection.h>

#include <cppconn/driver.h>
#include <cppconn/exception.h>
#include <cppconn/resultset.h>
#include <cppconn/statement.h>

sql::Driver *driver;
sql::Connection *con;
sql::ResultSet *res;
sql::Statement *stmt;

/* Create a connection */
driver = get_driver_instance();
con = driver->connect("tcp://127.0.0.1:3306", "admin", "password");

// db name
con->setSchema("db_name");

std::string lookup = "bob" ;

stmt = con->createStatement();
res = stmt->executeQuery("SELECT last_name FROM names_table WHERE first_name = '" + lookup + "'");
while (res->next()) {
  std::cout << res->getString("last_name") << std::endl;
}

delete res;
delete stmt;
delete con; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-26T03:42:26.183

```
i=0;
for(i=0; i < 100; i++)
{
mysql_query(conn, "INSERT INTO MyTable VALUES ( '"+i+"', 'blue', 'pumpkin')"); 
} 
```

这应该工作

# android - 为什么我也可以在我的手机应用程序中录制音频，即使我删除了 android.permission.RECORD_AUDIO 的声明

> ID：13558372
> 
> 赞同：2
> 
> 时间：2012-11-26T03:39:58.390
> 
> 标签：android, audio-recording, android-permissions

手机录音机在我们以欧元出售的设备上是合法的，因此我们需要在手机应用程序的 Android 清单中删除**android.permission.RECORD_AUDIO的声明。**但即使我这样做了，我的手机应用程序也可以正常录制音频。

为什么？

# java - 分析方法中的变量。JavaParser/ANTLR 还是别的什么？

> ID：13558373
> 
> 赞同：4
> 
> 时间：2012-11-26T03:40:14.743
> 
> 标签：java, parsing, variables, reflection, antlr

我正在编写一个 java 代码分析片段，它将找出方法中变量的使用。（具体来说，一个全局类变量在一个方法中被读写的次数）。这可以使用 JavaParser 完成吗？有人有其他建议吗？有谁知道类指标是如何计算的？他们可能处理类似的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:42:19.980

多谢你们。您的两个答案都引导我使用 JAVAPARSER 中的 AST 实现来解决这个问题。这是帮助他人的代码片段

```
class CatchNameExpr extends VoidVisitorAdapter {
    HashMap<String, ArrayList<Integer>> variableLineNumMap;``
    ArrayList<String> variableList;
    boolean functionParsing = false;
    public CatchNameExpr(ArrayList<String> classVariables) {
        variableList=classVariables;
    }
    public void visit(MethodDeclaration method, Object arg) {
        System.out.println("---------------");
        System.out.println(method.getName());
        System.out.println("---------------");
        variableLineNumMap = new HashMap<String, ArrayList<Integer>>();
        System.out.println();
        functionParsing = true;
        visit(method.getBody(),arg);
        // Analyze lines for variable usage. Add to list of vars after checking if its read or written or unknown.

        functionParsing = false;
    }

    public void visit(NameExpr n, Object arg) {

        if(!functionParsing)
            return;
        //TODO: check if this var was declared above it, as a local var to the func. if yes, return
        ArrayList<Integer> setOfLineNum;

        System.out.println(n.getBeginLine()+" NameExpr " + n.getName());

        if(!variableList.contains(n.getName()) || n.getName().length()==0)
            return;
        if (!variableLineNumMap.containsKey(n.getName()))
        {
            setOfLineNum =   new ArrayList<Integer>();
            setOfLineNum.add(n.getBeginLine());
            variableLineNumMap.put(n.getName(), setOfLineNum);
        }
        else
        {
            setOfLineNum = variableLineNumMap.get(n.getName());
            setOfLineNum.add(n.getBeginLine());
            variableLineNumMap.put(n.getName(), setOfLineNum);

        }
    }
} 
```

实例化类--->

```
CatchNameExpr nameExp = new CatchNameExpr(classVariables);
        nameExp.visit(classCompilationUnit, null); 
```

以类似的方式，您可以访问 AST 以获取以下表达式、语句、条件等

[http://www.jarvana.com/jarvana/view/com/google/code/javaparser/javaparser/1.0.8/javaparser-1.0.8-javadoc.jar!/japa/parser/ast/visitor/VoidVisitorAdapter.html](http://www.jarvana.com/jarvana/view/com/google/code/javaparser/javaparser/1.0.8/javaparser-1.0.8-javadoc.jar!/japa/parser/ast/visitor/VoidVisitorAdapter.html)

我很清楚字节码处理器会更有效率，并且会比我希望的更好。但考虑到时间限制，这个选项最适合我。

谢谢大家，贾斯米特

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T05:12:14.987

要完成查找变量用法的任务，带有 ANTLR 的解析器也应该生成 AST。我几乎可以肯定您可以找到现成的 AST 构建器，但不知道在哪里。

另一种方法是使用[ASM](http://www.google.ru/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&cad=rja&ved=0CFQQFjAD&url=http://asm.ow2.org/&ei=WPmyUMyjEO2Q4gThvoGYCg&usg=AFQjCNEv2IRP-KCv_PInxMBDtMibNLnWlw&sig2=VgVRVVJHuOW9xduWAIA8sg)、[BCEL](http://www.google.ru/url?sa=t&rct=j&q=&esrc=s&source=web&cd=6&cad=rja&ved=0CGYQFjAF&url=http://commons.apache.org/bcel/manual.html&ei=WPmyUMyjEO2Q4gThvoGYCg&usg=AFQjCNGqEP9PdX1RAzShft8WdQ48gGLTVw&sig2=pcsg9LxhaHBBlIHFSCnDvw)或其他类文件分析器来分析类文件。我认为这更容易，而且工作得更快。此外，它也适用于其他 jvm 语言（例如 Scala）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T05:52:25.700

要询问有关变量读取是否为“全局”的问题，您需要一个完整的 Java 编译器前端，它可以解析代码、构建符号表和相关类型信息。

如果编译器实际上已经在你的类文件中记录了这些信息，你也许可以执行“反射”操作来获取它。如果此类信息存在于 .class 文件中，您可以使用类文件字节码处理器访问它，例如 Kaigorodov 的答案中提到的那些。

ANTLR 有 Java 语法，但我不相信任何对符号表构造的支持。你不能自己伪造这个；Java 的规则太复杂了。您也许可以扩展 ANTLR 解析器来执行此操作，但这将是很多工作；“Java 的规则太复杂了”。

我了解 Java 编译器提供了对其内部结构的某种名称/类型的准确访问；你也许可以使用它。

我们的 DMS Software Reengineering Toolkit 具有完整的 Java 解析器，具有名称和类型解析，可用于此目的。

# r - 从数据框中删除列列表

> ID：13558378
> 
> 赞同：2
> 
> 时间：2012-11-26T03:41:00.527
> 
> 标签：r, dataframe

> **可能重复：**
> [删除列 R 数据框](https://stackoverflow.com/questions/4605206/drop-columns-r-data-frame)

我有一个我想从 IRIS 表中删除的变量列表，如下所示：

```
dropList <- c("Sepal.Length", "Sepal.Width") 
```

如何使用此列表从 IRIS 数据框中删除？（我不想明确提及职位）

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T03:43:45.440

还有其他一些方法可以做到这一点，比如使用`select`参数 of `subset`，但如果`dropList`它作为来自其他地方的字符向量出现在你面前，那么它的效果很好。

```
data(iris)
dropList <- c("Sepal.Length", "Sepal.Width")
iris2 <- iris[, !colnames(iris) %in% dropList] 
```

# c# - 实体框架选择其中 null 使用“FieldName = null”而不是“FieldName 为 null”

> ID：13558380
> 
> 赞同：0
> 
> 时间：2012-11-26T03:41:18.797
> 
> 标签：c#, sql-server, asp.net-mvc, entity-framework

> **可能重复：**
> [如何在实体框架中查询空值？](https://stackoverflow.com/questions/682429/how-can-i-query-for-null-values-in-entity-framework)

我正在使用实体框架作为我的 DAL。当我运行以下代码行时，使用 sql profiler 我截获了对数据库的查询

```
 m_Context.DomainEntities.Where(e => e.EntityParentID == i_UnitID); 
```

当`i_UnitID`equals`null`时，它生成的查询是：

```
exec sp_executesql N'SELECT 
[Extent1].[EntityTypeID] AS [EntityTypeID], 
[Extent1].[EntityID] AS [EntityID], 
[Extent1].[EntityName] AS [EntityName], 
[Extent1].[EntityParentID] AS [EntityParentID], 
...
FROM [dbo].[DomainEntities] AS [Extent1]
WHERE ([Extent1].[EntityTypeID] IN ( CAST( ''1'' AS int), CAST( ''2'' AS int), CAST( ''3'' AS int))) AND ([Extent1].[EntityParentID] = @p__linq__0)',N'@p__linq__0 int',@p__linq__0=NULL 
```

请注意，它`[Extent1].[EntityParentID] = @p__linq__0`在 where 子句中使用。这当然可以工作，我需要它来生成以下内容

```
[Extent1].[EntityParentID] is NULL 
```

是否有使用实体框架来实现这一目标的不同方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:41:25.900

试着写

```
m_Context.DomainEntities.Where(e => e.EntityParentID == Convert.ToInt32(i_UnitID)); 
```

并检查生成的 SQL 查询。

# c# - 超级终端中控制字符的显示格式

> ID：13558381
> 
> 赞同：1
> 
> 时间：2012-11-26T03:41:33.863
> 
> 标签：c#, serial-port, hyperterminal

我正在使用串行设备。在接收数据时，我得到了心形符号和实际数据。
然后我解码了 ASCII 值，发现它等同于`<ETX>`(End of text)
为什么它显示 ETX 的心形符号？
STX 的显示字符是什么？是否有任何可用的其他控制字符列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T03:51:29.973

[http://en.wikipedia.org/wiki/Code_page_437#Interpretation_of_code_points_1.E2.80.9331_and_127](http://en.wikipedia.org/wiki/Code_page_437#Interpretation_of_code_points_1.E2.80.9331_and_127)

*为什么 SO 认为上面的链接是 0 个字符长？*

# air - Adobe AIR 剪贴板检测

> ID：13558383
> 
> 赞同：0
> 
> 时间：2012-11-26T03:41:44.413
> 
> 标签：air, adobe, clipboard

在 Adob​​e AIR 中创建桌面应用程序的美妙之处在于，我仍然可以使用我的 Web 开发技能来执行此操作。

出于某种原因，我在检测剪贴板中的内容并将其显示在我的应用程序中时遇到了一个小问题。

这是我的代码：

```
<body>
<div id="infoDiv"></div>

<script>
function everysecond() {
    setInterval("checkClipBoard()",1000);       
}   

function checkClipBoard(){

    if(air.Clipboard.generalClipboard.hasFormat("text/plain")){ 
        var text = air.Clipboard.generalClipboard.getData("text/plain"); 
    }else{
        var text = "nothing in clipboard"; 
    }

    $("#infoDiv").html(text);

}

everysecond();
</script>
</body> 
```

无论我的应用程序是否处于焦点，它似乎都没有检测到我复制到剪贴板的任何内容 (Ctrl + C)

有人看到我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:23:48.683

剪贴板轮询是一个可怕的黑客。您将与（合法）打开剪贴板的其他应用程序发生冲突。因此，当您的应用程序运行时，您将在用户尝试复制/粘贴数据的其他应用程序中导致失败（并可能崩溃）。你见过“无法打开剪贴板”的错误吗？正是这样的事情导致了他们。我不知道您在 Air 中可以使用哪些功能，但是如果没有剪贴板通知功能（例如 WM_DrawClipboard 消息），那么您可能应该重新考虑您在这里尝试做的事情的必要性.

这说得最好：

> “如果没有用户的明确指示，程序不应将数据从剪贴板中传输出来。” — Charles Petzold，Windows 3.1 编程，微软出版社，1992

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T06:34:42.440

从[文档](http://help.adobe.com/en_US/AIR/1.5/devappshtml/WS5b3ccc516d4fbf351e63e3d118666ade46-7d60.html)：

```
Only code running in the application sandbox can access the system clipboard 
directly. In non-application HTML content, you can only access the clipboard 
through the clipboardData property of an event object dispatched by one of 
the HTML copy or paste events. 
```

如果您的 HTML 内容在应用程序沙箱之外，这可能是问题所在。

# javascript - jQuery fileupload 插件成功回调

> ID：13558389
> 
> 赞同：1
> 
> 时间：2012-11-26T03:43:39.697
> 
> 标签：javascript, jquery, ruby-on-rails-3, html

我使用 jQuery File Upload Plugin (https://github.com/blueimp/jQuery-File-Upload) 在 rails 中同时上传多张图片。照片附加到项目模型，项目被添加到投票中。

使用插件作为：

```
$(document).ready(function(){
    $('#fileupload').fileupload({
      url: '/polls',
      dataType: "json",
      done: function(e,data){
        window.location = "/polls/" + data.result.id;
      }
    }
}); 
```

预计会在投票控制器中为每个照片文件调用创建操作，并在所有文件上传后重定向页面以显示创建的投票。However, for instance, when 6 files were chosen to upload, it only displayed 4 photos in the poll page at first. 刷新页面后，显示了6张照片。我猜这个问题是由回调函数引起的。似乎它在所有文件的上传完成之前重定向到投票页面
。所有的上传请求都应该发送成功，但项目并未全部创建（回形针处理图像可能需要几秒钟）。

对我解决这个问题有什么建议吗？谢谢

编辑：检查“完成”回调函数实际上是为每个成功的 http 请求调用的。发送完所有请求后，它没有被调用。并且为每个照片文件调用了创建操作。我怎样才能拥有一个仅在所有文件上传后才回调的函数，无论是在客户端还是服务器端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-14T14:25:06.223

您可以尝试使用`add`回调来计算正在上传的文件，然后在每次`done`回调时减少该数字。那么你只会在那个号码是`0`.

像这样的东西：

```
$(document).ready(function(){
    var filesToProcess = 0;
    $('#fileupload').fileupload({
      url: '/polls',
      dataType: "json",
      add: function(e, data){
        filesToProcess++;
      },
      done: function(e,data){
        filesToProcess--;
        if (filesToProcess === 0){
          window.location = "/polls/" + data.result.id;
        }
      }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T04:22:10.880

done 回调的作用类似于 jQuery 发送的成功回调`ajax()`，并不意味着文件上传已经完成。尝试使用

```
$('#fileupload').bind('fileuploaddone', function (e, data) {/* ... */}) 
```

我不确定上述是否可行，但请尝试一下。如果不是这样，您总是可以在服务器端编写一个方法，以便在上传完成时进行报告。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-03T17:16:11.103

`"stop"`上传所有文件时会触发另一个回调。试试那个

# jquery - 试图在css中创建一个图像更改div

> ID：13558390
> 
> 赞同：-1
> 
> 时间：2012-11-26T03:43:39.977
> 
> 标签：jquery, css, photo

我正在尝试在网站中创建一个图像更改框。

做了一些尝试，但没有任何结果。

![例子](../Images/01814b9e220ad2bc9954f7864d984b4f.png)

是我基本上想要做的一个例子。

我希望用户能够单击箭头来更改图像。

真的很想在这个问题上寻找答案。

我更喜欢使用 css 和 html，但如果我需要，我也可以使用 JavaScript (jquery) 和 PHP

任何关于从哪里开始的想法或任何有方法的人都将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:53:00.543

对于此功能，您必须使用 javascript。仅使用 css 和 html 将无法做到这一点。

我推荐使用现有的 jQuery 插件。为什么要重新造轮子？

这是一个可以满足您需求的 jQuery 循环插件示例：

[http://jquery.malsup.com/cycle2/demo/prevnext.php](http://jquery.malsup.com/cycle2/demo/prevnext.php)

祝你好运，玩得开心，如果您有任何问题，请告诉我们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T03:55:51.393

我创建了一个使用 jQuery 的不错的演示，如果需要，请查看并下载示例。

[http://jsbin.com/ubowoq/3/edit](http://jsbin.com/ubowoq/3/edit)

# python - Python中Prim的算法输入参数（值）

> ID：13558396
> 
> 赞同：2
> 
> 时间：2012-11-26T03:44:39.900
> 
> 标签：python, algorithm, minimum-spanning-tree, prims-algorithm

我查看了以下 prim 的算法（为了创建最小生成树），我不确定以下代码中的输入值 s 是什么，我认为 G 当然是发送的图（邻接矩阵或列表图），我认为值 s 应该从哪里开始？此外，如果它是开始，那么您将以何种方式将起始值发送到以下算法？：

```
from heapq import heappop, heappush

def prim(self, G, s): 
    P, Q = {}, [(0, None, s)] 
    while Q: 
        _, p, u = heappop(Q) 
        if u in P: continue 
        P[u] = p 
        for v, w in G[u].items(): 
            heappush(Q, (w, u, v)) 
    return P 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T04:48:00.790

给你：

```
#A = adjacency matrix, u = vertex u, v = vertex v
def weight(A, u, v):
    return A[u][v]

#A = adjacency matrix, u = vertex u
def adjacent(A, u):
    L = []
    for x in range(len(A)):
        if A[u][x] > 0 and x <> u:
            L.insert(0,x)
    return L

#Q = min queue
def extractMin(Q):
    q = Q[0]
    Q.remove(Q[0])
    return q

#Q = min queue, V = vertex list
def decreaseKey(Q, K):
    for i in range(len(Q)):
        for j in range(len(Q)):
            if K[Q[i]] < K[Q[j]]:
                s = Q[i]
                Q[i] = Q[j]
                Q[j] = s

#V = vertex list, A = adjacency list, r = root
def prim(V, A, r):
    u = 0
    v = 0

    # initialize and set each value of the array P (pi) to none
    # pi holds the parent of u, so P(v)=u means u is the parent of v
    P=[None]*len(V)

    # initialize and set each value of the array K (key) to some large number (simulate infinity)
    K = [999999]*len(V)

    # initialize the min queue and fill it with all vertices in V
    Q=[0]*len(V)
    for u in range(len(Q)):
        Q[u] = V[u]

    # set the key of the root to 0
    K[r] = 0
    decreaseKey(Q, K)    # maintain the min queue

    # loop while the min queue is not empty
    while len(Q) > 0:
        u = extractMin(Q)    # pop the first vertex off the min queue

        # loop through the vertices adjacent to u
        Adj = adjacent(A, u)
        for v in Adj:
            w = weight(A, u, v)    # get the weight of the edge uv

            # proceed if v is in Q and the weight of uv is less than v's key
            if Q.count(v)>0 and w < K[v]:
                # set v's parent to u
                P[v] = u
                # v's key to the weight of uv
                K[v] = w
                decreaseKey(Q, K)    # maintain the min queue
    return P

A = [ [0,  4,  0,  0,  0,  0,   0,  8,  0],
      [4,  0,  8,  0,  0,  0,   0, 11,  0],
      [0,  8,  0,  7,  0,  4,   0,  0,  2],
      [0,  0,  7,  0,  9, 14,   0,  0,  0],
      [0,  0,  0,  9,  0, 10,   0,  0,  0],
      [0,  0,  4, 14, 10,  0,   2,  0,  0],
      [0,  0,  0,  0,  0,  2,   0,  1,  6],
      [8, 11,  0,  0,  0,  0,   1,  0,  7],
      [0,  0,  2,  0,  0,  0,   6,  7,  0]]
V = [ 0, 1, 2, 3, 4, 5, 6, 7, 8 ]

P = prim(V, A, 0)
print P

[None, 0, 5, 2, 3, 6, 7, 0, 2] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-16T05:40:43.107

G是图或邻接矩阵，s是你可以给出的任何随机起始节点，你选择哪个节点都没有关系

# telerik - 如何将行客户端添加到 radGrid

> ID：13558401
> 
> 赞同：1
> 
> 时间：2012-11-26T03:45:31.647
> 
> 标签：telerik, client-side, radgrid

我有一个 Telerik RadGrid，通过 Web 服务绑定客户端，它返回一个 JSON 对象列表。网格按类别名称分组，每个类别下都有后者下的项目。如果我调用该页面，最初假设 3 个组下有 10 个项目，它们会正确显示。

我有一个在服务器端生成的自定义组标头（不确定如何在客户端生成它，但这是另一个问题……如果您有任何简单的答案，我会很高兴收到您的来信）

我有 pageLoad 来绑定数据源 onRowDataBound，它会更新 JSON 列表中每一行的控件。在第一次加载时，它工作得很好。现在我有一个功能可以将一个项目添加到这个列表中。添加时，它会调用 Web 服务，该服务会返回一个新列表，其中新项目分组在其自己的类别下。

现在调用 updateGrid 回调来填充网格，并再次通过客户端的 onRowDataBound。在某个时刻，当它到达第 11 行时，它再也找不到要添加的控件，我猜是因为以前我们没有 11 行。我错过了什么吗？

我将如何创建新行？

代码：

```
function pageLoad(sender, eventArgs) {
    console.log('pageLoad');
    var tableView = $find("<%= grdSelectedList.ClientID %>").get_masterTableView();
    ApplicationLayer.WebServices.ShoppingListWS.GetData(updateGrid);
}

function rowDataBound(sender, args) {
    var gridItem = args.get_item();
    var record = args.get_dataItem();

    var lblItemDescription = args.get_item().findElement("lblItemDescription");
    var btnDeleteItem = args.get_item().findControl("btnDeleteItem");
    var hidElementId = args.get_item().findElement("hidElementId");
    var btnPriceStatus = args.get_item().findControl("btnPriceStatus");
    var btnDecrementQty = args.get_item().findControl("btnDecrementQty");
    var txtQty = args.get_item().findControl("txtQty");
    var btnIncrementQty = args.get_item().findControl("btnIncrementQty");
    var cmbSizeChoices = args.get_item().findControl("cmbSizeChoices");
    var lblSizeDescription = args.get_item().findElement("lblSizeDescription");

    console.dir(lblItemDescription);
    lblItemDescription.innerHTML = record.ItemName; // Error on this because lblItemDescription returns >null (only on the newly added Row)  when adding new item 
    btnDeleteItem.set_commandArgument(record.ItemName.trim() + '|' + record.ListId + ',' + >record.ElementId + '|' + hidElementId.id);
    hidElementId.value = record.ElementId;

    if (record.ItemId == "0") {
        btnPriceStatus.set_text("Item not found in database");
        btnPriceStatus.set_enabled(false);
    }
    else if (record.StoreId != "0" && record.StoreName != "") {
        btnPriceStatus.set_text("Selected Deal from " + record.StoreName);
        btnPriceStatus.set_enabled(false);
    }
    else if (record.PriceStatus == "1") {
        btnPriceStatus.set_text("Deals Found!");
        btnPriceStatus.set_enabled(false);
    }
    else {
        btnPriceStatus.set_visible(false);
        btnPriceStatus.set_text("No Deals found (Click for suggestions)");
        btnPriceStatus.set_enabled(true);
        btnPriceStatus.set_commandArgument(record.ItemName + ',' + record.ElementId);
    }
    txtQty.set_value(record.Quantity);

    if (!IsAddedButton(btnDecrementQty.get_id())){
        btnDecrementQty.add_clicked(function (btnDecrementQty, args) { ChangeQty(btnDecrementQty, args, >"D," + record.ElementId + "," + ((record.PerPound == "1") ? "Y" : "N") + "," + txtQty.get_id() + "," + >btnDecrementQty.get_id() + "") });
        eventsButton[eventsButton.length] = btnDecrementQty.get_id();
    }
    if (!IsAddedButton(txtQty.get_id())){
        txtQty.add_blur(function (txtQty, args) { ChangeQty(txtQty, args, "Q," + record.ElementId + "," + >((record.PerPound == "1") ? "Y" : "N") + "," + txtQty.get_id() + "," + btnDecrementQty.get_id() + "") });
        eventsButton[eventsButton.length] = txtQty.get_id();
    }
    if (!IsAddedButton(btnIncrementQty.get_id())){
        btnIncrementQty.add_clicked(function (btnIncrementQty, args) { ChangeQty(btnIncrementQty, args, >"I," + record.ElementId + "," + ((record.PerPound == "1") ? "Y" : "N") + "," + txtQty.get_id() + "," + >btnDecrementQty.get_id() + "") });
        eventsButton[eventsButton.length] = btnIncrementQty.get_id();
    }

    scString = record.SizeChoices;
    scStringArray = scString.split(',');

    if (scString != "" && scStringArray.length > 1) {
        cmbSizeChoices.set_visible(true);
        lblSizeDescription.visible = false;
        cmbSizeChoices.clearItems();
        for(i=0; i < scStringArray.length; i++){
            var cmbItem = new Telerik.Web.UI.RadComboBoxItem();
            cmbItem.set_value(scStringArray[i].split('|')[0]);
            cmbItem.set_text(scStringArray[i].split('|')[1]);
            cmbSizeChoices.get_items().add(cmbItem);
        }

        if (!IsAddedButton(cmbSizeChoices.get_id())){
            if (record.SizeChoiceID != "" && record.SizeChoiceID != "0") {
                var itm = cmbSizeChoices.findItemByValue(record.SizeChoiceID);
                if (itm != null) itm.select();
            }
            cmbSizeChoices.add_selectedIndexChanged(function (cmbSizeChoices, args) { >ChangeItemSize(cmbSizeChoices, args, record.ElementId) });
            cmbSizeChoices.add_onClientFocus(function (cmbSizeChoices, args) { >SetCurrentCombo(cmbSizeChoices, args) });
            eventsButton[eventsButton.length] = cmbSizeChoices.get_id();
        }
    }
    else if (scString != "" && scStringArray.length  == 1) {
        cmbSizeChoices.set_visible(false);
        lblSizeDescription.visible = true;
        lblSizeDescription.innerHTML = scStringArray[0].split('|')[1];
    }
    else {
        cmbSizeChoices.set_visible(false);
        lblSizeDescription.visible = false;
    }
}

function updateGrid(result, userContext) {
    var tableView = $find("<%= grdSelectedList.ClientID %>").get_masterTableView();
    alert('updateGrid');

    console.dir(userContext);
    console.dir(result);

    tableView.set_dataSource(result);
    tableView.dataBind();
    var grid = $find("<%= grdSelectedList.ClientID %>");
    grid.repaint();
}

function btAddItemPlus_Clicking(sender, eventArgs) {
    var ajaxManager = $find("<%= RadAjaxManager.GetCurrent(Page).ClientID %>");
    var txtAddItem = $find("<%= txtAddItem.ClientID %>");
    var args;

    var tempVal = txtAddItem.get_value();
    tempVal = tempVal.replace(/[^a-zA-Z 0-9]+/g, '');

    var tempTxt = txtAddItem.get_text();
    tempTxt = tempTxt.replace(/[^a-zA-Z 0-9]+/g, '');

                //Adds the item calling the WebService , it returns a new list
    args = 'AddItemByID,' + tempVal;
    ApplicationLayer.WebServices.ShoppingListWS.AddItemByID(tempVal, tempTxt, updateGrid, onFailed, args);

    txtAddItem.set_text('');
    txtAddItem.clearItems();
    eventArgs.set_cancel(true);
}

function ExpandMe(n, args) {
    var type = args.target.tagName.toLowerCase();
    if (type != "input" && type != "a") {
        console.log('clicked');
        $(n).children()[0].children[0].click();
    }
} 
```

标记：

```
<telerik:RadGrid ID="grdSelectedList" runat="server" AutoGenerateColumns="False"
CellSpacing="0" GridLines="None" ShowHeader="False" Style="outline: none;" EnableViewState="false"
OnNeedDataSource="grdSelectedList_NeedDataSource"
OnItemCommand="grdSelectedList_ItemCommand" OnItemDataBound="grdSelectedList_ItemDataBound"
Height="493px" Width="595px" Skin="Default" EnableEmbeddedSkins="false" CssClass="grdSelectedList">
<ClientSettings AllowGroupExpandCollapse="True">
    <Selecting AllowRowSelect="True" />
    <Scrolling AllowScroll="True" UseStaticHeaders="True" ScrollHeight="493px" />
    <ClientEvents OnRowClick="grdSelectedList_RowClick" OnRowDataBound="rowDataBound" />
</ClientSettings>
<MasterTableView DataKeyNames="AccountId, ItemId, ListId, ElementId, DealId" ClientDataKeyNames="AccountId, ItemId, ListId, ElementId, DealId, CategoryName"
    TableLayout="Fixed" GroupLoadMode="Client">
    <GroupByExpressions>
        <telerik:GridGroupByExpression>
            <SelectFields>
                <telerik:GridGroupByField FieldName="CategoryName" />
            </SelectFields>
            <GroupByFields>
                <telerik:GridGroupByField FieldName="CategoryName" />
            </GroupByFields>
        </telerik:GridGroupByExpression>
    </GroupByExpressions>
    <NoRecordsTemplate>
        This list is empty.<br />
        Click in "Add an Item" or "Browse Aisles" to add items to this list.
    </NoRecordsTemplate>
    <Columns>
        <telerik:GridBoundColumn FilterControlAltText="Filter CategoryCol column" UniqueName="CategoryCol"
            DataField="CategoryName" Groupable="true" Visible="False">
        </telerik:GridBoundColumn>
        <telerik:GridTemplateColumn FilterControlAltText="Filter DescriptionCol column" UniqueName="DescriptionCol"
            HeaderStyle-Width="350px">
            <ItemTemplate>
                <div style="width: 350px; clear: both; font-weight: bold; margin-left: -5px;">
                    <asp:Label ID="lblItemDescription" runat="server" CssClass="blackHyperlink"></asp:Label>
                </div>
                <div style="margin-left: -9px;">
                    <telerik:RadButton ID="btnPriceStatus" runat="server" UniqueName="PriceStatusColumn"
                        OnClientClicking="SuggestSubItems" BackColor="Transparent" ButtonType="LinkButton"
                        CssClass="dealFound" BorderStyle="None">
                    </telerik:RadButton>
                </div>
            </ItemTemplate>
        </telerik:GridTemplateColumn>
        <telerik:GridTemplateColumn UniqueName="QtyCol" HeaderStyle-Width="78px">
            <ItemTemplate>
                <div class="divQtyWrapper">
                    <div class="divPlusMinus" id="qtyMinus">
                        <telerik:RadButton ID="btnDecrementQty" runat="server" CommandName="DecrementQty"
                            Width="17" Height="20" AutoPostBack="false">
                            <Image ImageUrl="../Images/btGrdMinus.gif" />
                        </telerik:RadButton>
                    </div>
                    <div class="divQty">
                        <telerik:RadTextBox ID="txtQty" runat="server" CssClass="txtQtyInput" ViewStateMode="Disabled">
                        </telerik:RadTextBox></div>
                    <div class="divPlusMinus" id="qtyPlus">
                        <telerik:RadButton ID="btnIncrementQty" runat="server" CommandName="IncrementQty"
                            Width="17" Height="20" AutoPostBack="false">
                            <Image ImageUrl="../Images/btGrdPlus.gif" />
                        </telerik:RadButton>
                    </div>
                </div>
            </ItemTemplate>
        </telerik:GridTemplateColumn>
        <telerik:GridTemplateColumn UniqueName="QtyCol" HeaderStyle-Width="105px">
            <ItemTemplate>
                <telerik:RadComboBox ID="cmbSizeChoices" runat="server" Width="98px">
                </telerik:RadComboBox>
                <asp:Label ID="lblSizeDescription" runat="server"></asp:Label>
            </ItemTemplate>
        </telerik:GridTemplateColumn>
        <telerik:GridTemplateColumn UniqueName="DelCol">
            <ItemTemplate>
                <telerik:RadButton ID="btnDeleteItem" runat="server" CommandName="DeleteShoppingListItem"
                    OnClientClicking="ConfirmDeleteItem" Width="18" Height="20" AutoPostBack="false">
                    <Image ImageUrl="..\Images\icoDeleteRedX.gif" />
                </telerik:RadButton>
                <asp:HiddenField ID="hidElementId" runat="server" />
            </ItemTemplate>
        </telerik:GridTemplateColumn>
    </Columns>
</MasterTableView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:35:03.920

我们通过在隐藏表中设置一行来完成此操作，其中设置了所有输入元素。当用户单击“添加”按钮时，我们将该行简单地附加到 RadGrid 的头部。这使它成为最顶层的行，并允许他们在所有验证到位的情况下输入。当他们单击保存时，ajax 会触发 web 服务进行保存，然后调用更新以重新绑定网格。这很好地保存了一切。

# ffmpeg - 如何加入两个 ffmpeg 命令

> ID：13558405
> 
> 赞同：0
> 
> 时间：2012-11-26T03:46:00.773
> 
> 标签：ffmpeg, video-encoding, watermark

我有一个脚本，它使用这个 ffmpeg 命令的参数来编码视频。

```
ffmpeg -i inputfile -acodec libfaac -keyint_min 20 -r 20 -vcodec libx264 -vpre hq -crf 25 -b 300k -bt 300k -y -v 0 -bf 16 -threads 0 outputfile 
```

我有一个我想添加到它的自定义命令，就像这样

```
ffmpeg -i inputfile -vf "movie=watermark.png [watermark]; [in][watermark] overlay=main_w-overlay_w-10:main_h-overlay_h-10 [out]" outputfile 
```

所以我像这样替换了主命令

```
 ffmpeg -i inputfile -acodec libfaac -keyint_min 20 -r 20 -vcodec libx264 -vpre hq -crf 25 -b 300k -bt 300k -y -v 0 -bf 16 -threads 0 -vf "movie=watermark1.png [watermark]; [in][watermark] overlay=main_w-overlay_w-10:main_h-overlay_h-10 [out]" outputfile 
```

并在命令行中尝试过，但这没有做任何事情，输出不是这样的

```
[root@www test1]#  ffmpeg -i test1800.mp4 -acodec libfaac -keyint_min 20 -r 20 -vcodec libx264 -vpre hq -crf 25 -b 300k -bt 300k -y -v 0 -bf 16 -threads 0 -vf "movie=watermark1.png [watermark]; [in][watermark] overlay=main_w-overlay_w-10:main_h-overlay_h-10 [out]" outputfile.mp4
[root@www test1]# 
```

我该如何解决？

谢谢你的时间。

**更新** 我的 ffmpeg 命令详细信息

```
[root@www test1]# ffmpeg
ffmpeg version N-47061-gbe2c0bc Copyright (c) 2000-2012 the FFmpeg developers
  built on Nov 25 2012 09:32:08 with gcc 4.1.2 (GCC) 20080704 (Red Hat 4.1.2-52)
  configuration: --enable-gpl --enable-libmp3lame --enable-libvorbis --enable-libvpx --enable-libx264
  libavutil      52\.  9.100 / 52\.  9.100
  libavcodec     54\. 77.100 / 54\. 77.100
  libavformat    54\. 37.100 / 54\. 37.100
  libavdevice    54\.  3.100 / 54\.  3.100
  libavfilter     3\. 23.102 /  3\. 23.102
  libswscale      2\.  1.102 /  2\.  1.102
  libswresample   0\. 17.101 /  0\. 17.101
  libpostproc    52\.  2.100 / 52\.  2.100
Hyper fast Audio and Video encoder
usage: ffmpeg [options] [[infile options] -i infile]... {[outfile options] outfile}...

Use -h to get full help or, even better, run 'man ffmpeg' 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:55:27.773

如果您使用`-vpre`with ，您的 ffmpeg 版本必须非常旧`libx264`。此外，`-crf`and`-b`是互斥的，因此您可以使用其中一个，但不能同时使用两者，这将导致 ffmpeg 忽略其中一个选项。

此示例是您的命令的近似值，但使用了最新语法：

```
ffmpeg -i input -i watermark.png -c:v libx264 -preset slow -crf 25 -c:a libfaac -q:a 100 -filter_complex "overlay=main_w-overlay_w-10:main_h-overlay_h-10" output.mp4 
```

如果您懒得编译，请参阅[ffmpeg.org 下载](https://ffmpeg.org/download.html)页面以获取 Linux、Windows 或 OS X 构建的链接。请注意，`libfaac`第三方构建可能不提供该功能，但其他 AAC 编码器（例如，`libvo_aacenc`可能提供） - 并且最肯定的是本机编码器`aac`始终是一种选择。

有关详细信息，请参阅[FFmpeg 和 x264 编码指南](https://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide)。

* * *

下次要记住的一些事情：

*   ffmpeg 使用问题更适合 superuser.com。Stack Overflow 专门针对编程问题和答案。

*   这是一个常见问题，但不要说“这没有任何作用”，而是显示您的 ffmpeg 命令产生的完整 ffmpeg 控制台输出。它包含更多有用的信息，而不是简单地说明“这不会做任何事情”。

*   尽可能尝试使用最新版本的 ffmpeg。开发非常活跃，任何遇到的错误都很有可能已经被修复。

# nested-queries - 我必须更新表中的所有行。这是我的查询

> ID：13558406
> 
> 赞同：0
> 
> 时间：2012-11-26T03:46:07.173
> 
> 标签：nested-queries, mysql-error-1242

```
UPDATE tracks 
SET People_id_Reference = (SELECT People_id 
                           FROM People 
                           RIGHT JOIN top100 
                           ON 
                           People_name=top100.artist ) 
                           WHERE People_id_Reference IS NULL; 
```

但我得到这样的错误：

```
ERROR 1242(21000): SUBQUERY RETURNS MORE THAN ONE ROW 
```

有人可以帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:52:21.120

最简单的方法是将 a 附加`LIMIT 1`到子查询的末尾以仅强制它返回单行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:44:09.673

像这样更改您的代码：SELECT * FROM `package_reviews` WHERE `post_id`= ANY (SELECT `post_id` FROM `wp_posts` WHERE `post_author`=1); 这个链接非常有用 [http://dev.mysql.com/doc/refman/5.0/en/subquery-errors.html](http://dev.mysql.com/doc/refman/5.0/en/subquery-errors.html)

# iphone - AVAudioPlayer 在 iPhone 5 中不起作用

> ID：13558407
> 
> 赞同：3
> 
> 时间：2012-11-26T03:46:09.880
> 
> 标签：iphone, objective-c, ios

我正在开发一个 iPhone 应用程序。在这个应用程序中，我使用 AVAudioPlayer 播放音频。这是我播放声音的代码。

```
 NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/sound.mp3"];

    NSError* err;

    player_ = [[AVAudioPlayer alloc] initWithContentsOfURL:
               [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err )
    {
    }
    else
    {
        [player_ prepareToPlay];

        [player_ play];

        int playingLoops = 0;

        player_.numberOfLoops = playingLoops;
    } 
```

它在 iPhone5 以外的 iPhone 设备上运行良好。当我在 iPhone 5 上运行应用程序时，我收到以下错误，然后应用程序崩溃。

```
2012-11-26 09:02:28.484 test[728:1dd03] <0xb0081000> Error '!obj' trying to fetch default input device's sample rate
2012-11-26 09:02:28.484 test[728:1dd03]  <0xb0081000> Error getting     audio input  device sample rate: '!obj'
2012-11-26 09:02:28.494 test[728:1dd03]  <0xb0081000> AQMEIOManager::FindIOUnit: error '!dev' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:20:14.253

您必须将 AVAudioPlayerDelegate 添加到您的 .h 文件中，并将以下代码添加到您的 .m 文件中

```
NSString* resourcePath =[[NSBundle mainBundle]pathForResource:@"sound" ofType:@"mp3"];
NSError* err;
AVAudioPlayer *audioplayer =[[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath: resourcePath]  error:&err];
audioplayer.delegate=self;
if( err )
{
   NSLog(@"%@",err);
}
else
{
   [audioplayer prepareToPlay];
   [audioplayer play];
} 
```

此代码对我有用，如果有效，请接受答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:36:50.733

我也面临同样的问题，给出同样的错误。当尝试解决这个问题时，我注意到代码没有问题。我们需要更新媒体播放器或安装 Flash 播放器，它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:19:35.850

Anbu，试试下面的代码。在我的最后它工作正常。

```
NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/audiofile.mp3", [[NSBundle mainBundle] resourcePath]]];

NSLog(@"File path is:->%@",[NSString stringWithFormat:@"%@/audiofile.mp3", [[NSBundle mainBundle] resourcePath]]);

NSFileManager* manager;
manager = [NSFileManager defaultManager];
if([manager fileExistsAtPath:[NSString stringWithFormat:@"%@/audiofile.mp3", [[NSBundle mainBundle] resourcePath]]])
{
    printf("file Exists...\n\n");
}
else
    printf("File not exist...\n\n");

NSError *er;
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
audioPlayer.numberOfLoops = -1;

if (audioPlayer == nil)
    NSLog([er description]);                
else 
    [audioPlayer play]; 
```

有任何问题，请告诉我。并且，还请检查您的控制台以获取完整路径以及文件是否存在。

# mkmapview - MKMapView：有什么方法可以告诉最大/最小可见矩形（缩放级别）？

> ID：13558410
> 
> 赞同：0
> 
> 时间：2012-11-26T03:46:48.390
> 
> 标签：mkmapview

是否有确定 MKMapView 的最大和最小缩放级别或可见矩形的常数或方法？我什至在寻找代理解决方案，例如获得“visibleRectForRect:”方法。目标是了解地图何时“完全放大”（等）并相应地更改相关 UI 的显示设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:39:22.727

鉴于您可以计算缩放级别（http://stackoverflow.com/questions/4359424/check-whether-zoom-level-changed），我们可以合理安全地假设缩放级别介于 1 和 21 之间（不是未来-经过验证，但现在肯定会保持几年不变）。

因此，请检查缩放级别并为您的应用使用“最大”阈值。在我的测试中，我永远无法让地图超过 3-19，所以我使用它。

# python - 优化或加速从 .xy 文件读取到 excel

> ID：13558411
> 
> 赞同：0
> 
> 时间：2012-11-26T03:47:33.067
> 
> 标签：python, excel, file, batch-file

我有几个 .xy 文件（2 列带有 x 和 y 值）。我一直在尝试读取所有这些并将“y”值粘贴到单个 excel 文件中（所有这些文件中的“x”值都相同）。到目前为止，我拥有的代码一个一个地读取文件，但速度极慢（每个文件大约需要 20 秒）。我有很多 .xy 文件，而且时间加起来相当多。我到目前为止的代码是：

```
import os,fnmatch,linecache,csv
from openpyxl import Workbook

wb = Workbook() 
ws = wb.worksheets[0]
ws.title = "Sheet1"

def batch_processing(file_name):
    row_count = sum(1 for row in csv.reader(open(file_name)))
    try:
        for row in xrange(1,row_count):

            data = linecache.getline(file_name, row)
            print data.strip().split()[1]   
            print data
            ws.cell("A"+str(row)).value = float(data.strip().split()[0])
            ws.cell("B"+str(row)).value = float(data.strip().split()[1])

        print file_name
        wb.save(filename = os.path.splitext(file_name)[0]+".xlsx")
    except IndexError:
        pass

workingdir = "C:\Users\Mine\Desktop\P22_PC"
os.chdir(workingdir)
for root, dirnames, filenames in os.walk(workingdir):
    for file_name in fnmatch.filter(filenames, "*_Cs.xy"):
        batch_processing(file_name) 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:50:38.407

我认为您的主要问题是您正在写入 Excel 并保存文件中的每一行，对于目录中的每个文件。我不确定将值实际写入 Excel 需要多长时间，但只是移出`save`循环并仅在添加所有内容后才保存应该会缩短一点时间。另外，这些文件有多大？如果它们很大，那么`linecache`可能是个好主意，但假设它们不是太大，那么你可能可以不用它。

```
def batch_processing(file_name):

    # Using 'with' is a better way to open files - it ensures they are
    # properly closed, etc. when you leave the code block
    with open(filename, 'rb') as f:
        reader = csv.reader(f)
        # row_count = sum(1 for row in csv.reader(open(file_name)))
        # ^^^You actually don't need to do this at all (though it is clever :)
        # You are using it now to govern the loop, but the more Pythonic way is
        # to do it as follows
        for line_no, line in enumerate(reader):
            # Split the line and create two variables that will hold val1 and val2
            val1, val2 = line
            print val1, val2 # You can also remove this - printing takes time too
            ws.cell("A"+str(line_no+1)).value = float(val1)
            ws.cell("B"+str(line_no+1)).value = float(val2)

    # Doing this here will save the file after you process an entire file.
    # You could save a bit more time and move this to after your walk statement - 
    # that way, you are only saving once after everything has completed
    wb.save(filename = os.path.splitext(file_name)[0]+".xlsx") 
```

# css - p 标签到动态文本宽度

> ID：13558412
> 
> 赞同：6
> 
> 时间：2012-11-26T03:47:42.917
> 
> 标签：css

如何使`<p>`标签扩展，使其大小适合填充它的内容。只是给它填充似乎并没有做到这一点。当我省略该`width`属性时，它会扩展以填充其 parent 的整个宽度`<td>`。它必须是所有内联样式，因为它是电子邮件。

```
<p style="font-family:'helvetica', 'arial', 'sans-serif'; font-size:11pt; padding:7px 5px 5px 7px; background-color:#dddddd;">
    Purchase order {$sector_value['sector_info']['purchase_order']}
</p> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-26T03:50:31.927

只需添加`display:inline-block`到段落中！:)

[http://jsfiddle.net/SZSFE](http://jsfiddle.net/SZSFE)

# css - 如何使用 css 更改 kendo ui datepicker 的背景颜色

> ID：13558416
> 
> 赞同：2
> 
> 时间：2012-11-26T03:48:22.967
> 
> 标签：css, kendo-ui

> **可能重复：**
> [Kendo ui 选择器 css 问题](https://stackoverflow.com/questions/13507971/kendo-ui-picker-css-issue)

我想在 kendo ui 日期选择器中更改所选状态的背景颜色。我写了这样的代码

```
 k.datepicker .k-state-selected
    {
         background-color: blue;
    } 
```

但颜色没有变化。我怎样才能做到这一点

问候，

斯里兰卡

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T07:42:44.723

利用：

```
.k-calendar .k-state-selected { background: blue; } 
```

反而

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:28:43.510

可以使用 jQuery 吗？处理焦点事件很容易：

```
$("#datePicker").focus(function(){$("#datePicker").css("background-color", "blue");}) 
```

# xpath - xslt 1.0 用同一 xml 中的实际数据替换 xpath 引用

> ID：13558418
> 
> 赞同：2
> 
> 时间：2012-11-26T03:49:03.760
> 
> 标签：xpath, reference, replace, xslt-1.0

我有一些要求，我需要替换同一个 xml 文件中的引用。限制是仅使用 xslt 1.0。

下面是我的示例输入 xml。

```
 <org>
       <depts>
          <dept>
             <deptId>1009</deptId>
                <deptName>IT</deptName>
                <deptAccessCode>IT-1009</deptAccessCode>
          </dept>
          <dept>
             <deptId>2344</deptId>
             <deptName>BPO</deptName>
             <deptAccessCode>BP-2344</deptAccessCode>
          </dept>
          </depts>
          <employees>
             <employee>
             <name>abc</name>
             <dept>
              <REFERENCE>
                 <LocationXPath>/org/depts/dept[2]</LocationXPath>
              </REFERENCE>
          </dept>
          <employee>
       </employees>
</org> 
```

现在我想用 XPath /org/depts/dept[2] 中的实际数据替换节点 REFERENCE。所以输出 xml 应该如下所示。

```
 <org>
       <depts>
          <dept>
             <deptId>1009</deptId>
                <deptName>IT</deptName>
                <deptAccessCode>IT-1009</deptAccessCode>
          </dept>
          <dept>
             <deptId>2344</deptId>
             <deptName>BPO</deptName>
             <deptAccessCode>BP-2344</deptAccessCode>
          </dept>
          </depts>
          <employees>
             <employee>
             <name>abc</name>
             <dept>
             <deptId>2344</deptId>
             <deptName>BPO</deptName>
             <deptAccessCode>BP-2344</deptAccessCode>
          </dept>
          <employee>
       </employees>
    </org> 
```

我在不同的元素中有几个 REFERENCE 节点，它们引用了 xml 树中的不同 xpath，我需要用实际数据替换它们。

```
<someWhereInTheXmlTree>
<sometag>
   <REFERENCE>
      <LocationXPath>some/reference[1]/to/a/node[3]/in/the[4]/same/xml</LocationXPath>
   </REFERENCE>
</sometag>
<someWhereInTheXmlTree>
...
<ffff>
<bbbb>
   <REFERENCE>
      <LocationXPath>abc/xyz[1]/node[4]/element</LocationXPath>
   </REFERENCE>
</bbbb>
<ffff> 
```

请帮助我。在此先感谢您的帮助。

到目前为止，我已经实现了一个 XSLT 来替换引用，但现在我面临着不需要的空名称空间。

这是我的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:tib="http://www.tibco.com/bw/xslt/custom-functions"
xmlns="http://www.realestate.org/residential/2010/schemas" >

<xsl:output omit-xml-declaration="no" indent="yes" method = "xml" />
<xsl:strip-space elements="*"/>
<xsl:param name="myxml"  />
<xsl:template match="node()|@*">
    <xsl:param name="isNodeToReplace"><xsl:call-template name="ReferenceCheck" /></xsl:param>
    <xsl:choose>
        <xsl:when test="$isNodeToReplace='true'">
            <xsl:call-template name="replaceWithData">
                <xsl:with-param name="ref"><xsl:value-of select="." /></xsl:with-param>
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:copy>
                <xsl:apply-templates select="node()|@*"/>
            </xsl:copy>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>

<xsl:template name="ReferenceCheck">
    <xsl:choose>
        <xsl:when test="name(child::*[1])='REFERENCE' and name(child::*[1]//child::*[1])='LocationXPath'">true</xsl:when>
        <xsl:otherwise>false</xsl:otherwise>
    </xsl:choose>
</xsl:template>

<xsl:template name="replaceWithData">
    <xsl:param name="ref" />
    <xsl:copy-of select="tib:evaluate($myxml,$ref)" />
</xsl:template>

</xsl:stylesheet> 
```

在上面的 XSLT 中，我将整个 xml（正在处理的相同 xml）作为参数**$myxml**

下面是我的示例输入 XML - 这只是 xml 的一个片段，我正在处理的实际 xml 文件太大并且包含如此复杂的树结构。但是这个示例 xml 足以产生我的问题。

输入文件

```
<?xml version="1.0" encoding="UTF-8"?>
<org xmlns="http://www.realestate.org/residential/2010/schemas">
    <depts>
        <dept>
            <deptId>1</deptId>
            <deptName>health</deptName>
            <deptAccessCode>HL007845</deptAccessCode>
        </dept>
    </depts>
    <employees>
        <employee>
            <name>TOM</name>
            <dept>
                <REFERENCE>
                    <LocationXPath>/org/depts/dept[1]</LocationXPath>
                </REFERENCE>
            </dept>
        </employee>
    </employees>
</org> 
```

我的输出文件

```
<?xml version="1.0" encoding="UTF-8"?>
<org xmlns="http://www.realestate.org/residential/2010/schemas">
    <depts>
        <dept>
            <deptId>1</deptId>
            <deptName>health</deptName>
            <deptAccessCode>HL007845</deptAccessCode>
        </dept>
    </depts>
    <employees>
        <employee>
            <name>TOM</name>
            <dept xmlns="">
                <deptId>1</deptId>
                <deptName>health</deptName>
                <deptAccessCode>HL007845</deptAccessCode>
            </dept>
        </employee>
    </employees>
</org> 
```

预期输出在哪里

```
<?xml version="1.0" encoding="UTF-8"?>
<org xmlns="http://www.realestate.org/residential/2010/schemas">
    <depts>
        <dept>
            <deptId>1</deptId>
            <deptName>health</deptName>
            <deptAccessCode>HL007845</deptAccessCode>
        </dept>
    </depts>
    <employees>
        <employee>
            <name>TOM</name>
            <dept>
                <deptId>1</deptId>
                <deptName>health</deptName>
                <deptAccessCode>HL007845</deptAccessCode>
            </dept>
        </employee>
    </employees>
</org> 
```

所以我在替换的根元素中的 << dept xmlns="">> 中得到了不需要的空名称空间。希望这可以清楚地解释我的问题在此先感谢

最终，我在下面的链接中找到了删除不需要的空名称空间的解决方案。 [http://social.msdn.microsoft.com/forums/en-US/xmlandnetfx/thread/0de59291-ef3a-4a4c-9ca5-17923b16a504](http://social.msdn.microsoft.com/forums/en-US/xmlandnetfx/thread/0de59291-ef3a-4a4c-9ca5-17923b16a504)

这是新的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:tib="http://www.tibco.com/bw/xslt/custom-functions"
xmlns="http://www.realestate.org/residential/2010/schemas" >

<xsl:output omit-xml-declaration="no" indent="yes" method = "xml" />
<xsl:strip-space elements="*"/>
<xsl:param name="myxml"  />
<xsl:template match="node()|@*">
    <xsl:param name="isNodeToReplace"><xsl:call-template name="ReferenceCheck" /></xsl:param>
    <xsl:choose>
        <xsl:when test="$isNodeToReplace='true'">
            <xsl:call-template name="replaceWithData">
                <xsl:with-param name="ref"><xsl:value-of select="." /></xsl:with-param>
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:copy>
                <xsl:apply-templates select="node()|@*"/>
            </xsl:copy>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>

<xsl:template name="ReferenceCheck">
    <xsl:choose>
        <xsl:when test="name(child::*[1])='REFERENCE' and name(child::*[1]//child::*[1])='LocationXPath'">true</xsl:when>
        <xsl:otherwise>false</xsl:otherwise>
    </xsl:choose>
</xsl:template>

<xsl:template name="replaceWithData">
    <xsl:param name="ref" />
    <xsl:apply-templates select="tib:evaluate($myxml,$ref)" mode="move-to-namespace">
        <xsl:with-param name="namespace" select="'http://www.realestate.org/residential/2010/schemas'" />
    </xsl:apply-templates>
</xsl:template>
<xsl:template match="*" mode="move-to-namespace">
    <xsl:param name="namespace" />
    <xsl:element name="{local-name()}" namespace="{$namespace}">
        <xsl:copy-of select="@*" />
        <xsl:apply-templates select="node()" mode="move-to-namespace">
            <xsl:with-param name="namespace" select="$namespace"/>
        </xsl:apply-templates>
    </xsl:element>
</xsl:template>

<xsl:template match="text() | comment() | processing-instruction()" mode="move-to-namespace">
    <xsl:copy/>
</xsl:template>

</xsl:stylesheet> 
```

如果任何 xslt 专家进一步改进它以避免任何不必要的说明并提供适当的解释，那将非常高兴。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:39:49.857

这在纯 XSLT 1.0 中是不可能的。您必须使用扩展功能，例如[Xalan 评估表达式](http://xml.apache.org/xalan-j/extensionslib.html#evaluate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:13:59.847

**一般来说**：

*   在纯 XSLT 1.0 中不可行。

*   在纯 XSLT 2.0 中不可能

*   在纯 XSLT 3.0 中可能是可能的——阅读该
    **[`<xsl:evaluate>`](http://www.w3.org/TR/xslt-30/#element-evaluate)**指令。

*   在 XSLT 1.0 中，如果您的 XSLT 处理器实现了 EXSLT**[`dyn:evaluate()`](http://www.exslt.org/dyn/functions/evaluate/index.html)**扩展功能（少数人这样做），您可能会很幸运。否则，您将不得不编写一个扩展函数来选择节点并将它们返回。

如果对 XPath 表达式的语法有限制，那么有可能实现纯 XSLT 1.0 解决方案。

# c# - 试图设计一个小的消息处理程序类来模拟 C# 事件。这种方法有什么缺点？

> ID：13558422
> 
> 赞同：4
> 
> 时间：2012-11-26T03:49:12.403
> 
> 标签：c#, generics, delegates, messaging

所以这是我的代码：

```
static class MessageHandler<T> where T : Message
{
    public delegate void MessageDelegate(T m);

    private static MessageDelegate messageHandlers;

    public static void Publish(T message)
    {
        messageHandlers(message);
    }

    public static void Subscribe(MessageDelegate messageHandler)
    {
        messageHandlers += messageHandler;
    }
} 
```

`Message`只是其他类可以继承的空类。大多数`Message`派生都是具有相关属性的简单对象（这是针对游戏的，因此可能会有`PlayerDamagedMessage`伤害和攻击者作为属性。）

基本上，`Player`当他们受到攻击时，他们会在课堂上发布一个`PlayerDamagedMessage`，然后其他想要了解它的类可以订阅，然后在它发生时接收相关详细信息。

这适用于多条消息的原因是泛型类在 C# 中的工作方式。我的意思是，在幕后使用的每种不同的泛型类型都会有一个委托的副本。

实际上，我在玩耍时偶然发现了这一点，并且很兴奋，因为它**确实**简化了我的代码，并且在这一点上看起来几乎就像一种设计模式。

我在这里发帖询问使用这种方法的潜在缺点。幕后通用代表的数量是否有限制？这样的规模会有多好？

此外，有没有办法进行某种通用类型推断，以便语句不必这么长？

`MessageHandler<MessagePlayerDamaged>.Publish(new MessagePlayerDamaged(this, this));`

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:23:37.937

我在我的项目中使用了一个解决方案。

```
 public class MessageDispatcher {
        private readonly Dictionary<Type, MulticastDelegate> registeredHandlers = new Dictionary<Type, MulticastDelegate>();

        private delegate void MessageActionDelegate<in T>(T message);

        public void Register<T>(Action<T> action) {
            Type messageType = typeof (T);
            if (registeredHandlers.ContainsKey(messageType)) {
                var messageDelegate = (MessageActionDelegate<T>) registeredHandlers[messageType];
                registeredHandlers[messageType] = messageDelegate + new MessageActionDelegate<T>(action);
            }
            else {
                registeredHandlers.Add(messageType, new MessageActionDelegate<T>(action));
            }

        }

        public void Deregister<T>() {
            Type messageType = typeof (T);
            if (registeredHandlers.ContainsKey(messageType)) {
                registeredHandlers.Remove(messageType);
            }
        }

        public void DeregisterAll() {
            registeredHandlers.Clear();
        }

        public void Send<T>(T message) {
            Type messageType = typeof (T);
            if (!registeredHandlers.ContainsKey(messageType)) return;

            ((MessageActionDelegate<T>) registeredHandlers[messageType])(message);
        }
    } 
```

并测试示例：

```
 private static void Main(string[] args) {
        var messenger = new MessageDispatcher();
        messenger.Register<Message>(m => Console.WriteLine(m.Text));
        messenger.Send(new Message() { Text = "Good morning, sir."});
        messenger.Register<Message>(m => Console.WriteLine(m.Text + " It's nice weather today."));
        messenger.Register<Notification>(n => Console.WriteLine(n.Text));
        messenger.Send(new Message() { Text = "How do you feel? "});
        messenger.Send(new Notification() { Text = "Cup of tea, sir?" });
        messenger.Deregister<Message>();
        messenger.Send(new Message() { Text = "Good bye" });
        Console.ReadLine();
    }

    public class Message {
        public string Text { get; set; }
    }

    public class Notification {
        public string Text { get; set; }
    } 
```

你可以做`MessageDispatcher`一个单例。如果您的应用程序是多线程的，那么您需要考虑线程安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T04:10:15.413

与 C# 事件的主要区别：

*   您的消息由它们的 Arguments-Class 标识，这使得不可能有两个不同的事件用于相同的目的（想想 MouseUp、MouseDown、MouseMoved 等）
*   您的消息耦合到静态上下文，而不是对象，这使得很难从 say`player1`和 not注册事件`player2`
*   并且您的消息可以从任何地方调用，而事件调用对于拥有该事件的类/对象始终是私有的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T04:01:17.007

我实际上使用了非常相似的模式并取得了很大的成功。我采取的进一步措施是将实际的消息处理程序封装在 a`MessageHandlerRegistry`中以允许更清晰的语法。这是您修改的示例：

**消息.cs**

```
public class Message
{

} 
```

**消息处理程序.cs**

```
public class MessageHandler<T> where T : Message
{
    private Action<T> messageHandlers;

    public void Publish(T message)
    {
        messageHandlers(message);
    }

    public void Subscribe(Action<T> messageHandler)
    {
        messageHandlers = (Action<T>) Delegate.Combine(messageHandlers, messageHandler);
    }
} 
```

**MessageHandlerRegistry.cs**

```
public static class MessageHandlerRegistry
{
    private static readonly IDictionary<Type, object> _handlers = new Dictionary<Type, object>();

    public static void Publish<T>(T m) where T : Message
    {
        if (_handlers.ContainsKey(typeof (T)))
        {
            ((MessageHandler<T>) _handlers[typeof (T)]).Publish(m);
        }
    }

    public static void Subscribe<T>(Action<T> messageHandler) where T : Message
    {
        if (!_handlers.ContainsKey(typeof (T)))
        {
            _handlers[typeof (T)] = new MessageHandler<T>();
        }
        ((MessageHandler<T>) _handlers[typeof (T)]).Subscribe(messageHandler);
    }
} 
```

**程序.cs**

```
class Program
{
    static void Main(string[] args)
    {
        MessageHandlerRegistry.Subscribe((Message m) => Console.WriteLine("Message received."));
        MessageHandlerRegistry.Publish(new Message());
    }
} 
```

我看到的唯一缺点是过度松散耦合，在某些情况下使用传统的基于事件的方法更有意义，有时只发布消息更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:03:06.430

我找到了一种使用泛型的方法，我添加了一个存储静态委托的私有注册表类：

```
class Message
{
}

class MessageHandler
{
    public static void Publish<T>(T message) where T : Message
    {
        Registry<T>.action(message);
    }

    public static void Subscribe<T>(Action<T> h) where T : Message
    {
        Registry<T>.action += h;
    }

    private class Registry<T> where T : Message
    {
        public static Action<T> action;
    }
} 
```

这样您就不必添加类型参数：

```
class IntMessage : Message
{
    public int Value = 100;
}

class StringMessage : Message
{
    public string Value = "a string";
}

static void Main(string[] args)
{
    MessageHandler.Subscribe((StringMessage m) => Console.WriteLine("String : " + m.Value));
    MessageHandler.Subscribe((StringMessage m) => Console.WriteLine("2nd String : " + m.Value));
    MessageHandler.Subscribe((IntMessage m) => Console.WriteLine("Int : " + m.Value));
    MessageHandler.Subscribe((IntMessage m) => Console.WriteLine("2nd Int : " + m.Value));

    MessageHandler.Publish(new IntMessage());
    MessageHandler.Publish(new StringMessage());
} 
```

# java - IOException 循环

> ID：13558427
> 
> 赞同：1
> 
> 时间：2012-11-26T03:51:41.043
> 
> 标签：java, loops, ioexception

我需要帮助弄清楚如何循环我的`IOException`（在我要求文件名的地方，直到输入有效的文件名）。我需要一个循环来以某种方式识别输入了无效文件并且不确定如何执行此操作。

```
import java.util.*;
import java.io.*;
public class JavaGradedLab {
    public static void main(String[] args) throws IOException {

        Scanner inScan, fScan = null;
        int [] A = new int[5];
        inScan = new Scanner(System.in);
        System.out.println("Please enter the file to read from: ");

        try{
            String fName = inScan.nextLine();
            fScan = new Scanner(new File(fName));
        }

        catch (FileNotFoundException ex)
        {
            System.out.println("Your file is invalid -- please re-enter");
        }

        String nextItem;
        int nextInt = 0;
        int i = 0;

        while (fScan.hasNextLine())
        {
            nextItem = fScan.nextLine();
            nextInt = Integer.parseInt(nextItem);
            A[i] = nextInt;
            i++;
        }

        System.out.println("Here are your " + i + " items:");
        for (int j = 0; j < i; j++)
        {
            System.out.println(A[j] + " ");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:57:38.613

好吧，肯定会有人解释如何通过最佳实践等来改进您的代码，但作为一个非常基本的答案，它本身可能会得到改进（假设您的代码在输入有效时工作*）*：

```
while(true) {
    try{
        String fName = inScan.nextLine();
        fScan = new Scanner(new File(fName));
        break;
    }
    catch (FileNotFoundException ex)
    {
        System.out.println("Your file is invalid -- please re-enter");
    }
} 
```

# mongodb - MongoDB查找子文档ID

> ID：13558432
> 
> 赞同：1
> 
> 时间：2012-11-26T03:52:28.063
> 
> 标签：mongodb, mongodb-java, mongodb-query

我的架构设置是这样的：

```
{
 _id:1234,
 friends: [
           {
             "fid":1235
             "is_user":true
           },
           {
             "fid":1236
             "is_user":true
           },
           {
             "fid":1235
             "is_user":false
           }
          ]
 } 
```

我的要求是，给定 a `_id`，我需要找到所有设置为 true 的朋友`(fid)`ID `is_user`。

我尝试了以下方法：

```
db.users.find({ friends: { $elemMatch : { is_app_user: true}}}); 
```

似乎在整个集合中给我返回结果，但我想要它作为一个 ID。所以我尝试了这个：

```
db.users.find({_id:1234},{friends: { $elemMatch : { is_app_user: true}}}); 
```

但这什么也没给我。另外，我只需要返回`fid`. 有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T04:25:36.230

在这种情况下，您需要的不仅仅是数组中的*第一个*匹配元素，您必须使用[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)而不是`find`.

```
db.users.aggregate([
    // Find the matching document
    { $match: { _id: 1234 }},
    // Duplicate the document for each element of friends
    { $unwind: '$friends' },
    // Filter the documents to just those where friends.is_user = true
    { $match: { 'friends.is_user': true }},
    // Only include fid in the results
    { $project: { _id: 0, fid: '$friends.fid'}}
]); 
```

# coldfusion - 当前模板的修改日期

> ID：13558433
> 
> 赞同：3
> 
> 时间：2012-11-26T03:52:32.143
> 
> 标签：coldfusion

在我的 application.cfc 文件中，我想设置一个变量：

```
 application.gsversion = "Version 0.1.#year(x)#.#month(x)#.#day(x)#"; 
```

其中 x 具有 application.cfc 的当前修改日期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T04:26:12.830

在 Application.cfc 中的 onApplicationStart() 方法中添加类似这样的内容：

```
var objAppFile = fileopen(expandpath('./Application.cfc'), 'read');
application.gsversion = "Version 0.1.#year(objAppFile.lastmodified)#.#month(objAppFile.lastmodified)#.#day(objAppFile.lastmodified)#";
fileclose(objAppFile); 
```

# java - Java - 使用扫描器将字符串和整数从文件中提取到数组中

> ID：13558435
> 
> 赞同：1
> 
> 时间：2012-11-26T03:52:53.670
> 
> 标签：java, arrays, java.util.scanner

我正在尝试为 ParkingArea(string, int, int, int, int) 创建一个数组。正在扫描的文件在这里[http://uwf.edu/jcoffey/data.txt](http://uwf.edu/jcoffey/data.txt)

```
try
{
  Scanner scan = new Scanner(file);
  for (int i = 0;scan.hasNext(); i++)
  {
    for(int x = 0; x < 4; x++)
    {
      if(x == 0)
      {
        name = scan.next();
      }
      else
      {
        array[x-1] = scan.next();
      }
    }
    ParkingArea[i] = new ParkingArea(name, array[0], array[1], array[2], array[3]);
  }
}
catch (FileNotFoundException e)
{
  e.printStackTrace();
} 
```

编译时出现此错误。

```
Parking.java:40: error: incompatible types
              array[x-1] = scan.next();
                                    ^ 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T03:56:09.913

scan.next() 返回一个字符串。如果要将其转换为 int，则需要调用 `

```
Integer.parseInt(scan.next()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T03:58:16.650

代替

```
array[x-1] = scan.next(); 
```

给

```
array[x-1] = scan.nextInt(); 
```

试一试。假设它`array`是 type `int[]`，那么您的问题来自将`int`值分配`array[x-1]`给 a `String`，这就是`scan.next()`返回的内容。使用`scan.nextInt()`将返回一个`int`，从而解决错误。

# mysql - 选择查询以获取确切的时间戳

> ID：13558440
> 
> 赞同：3
> 
> 时间：2012-11-26T03:53:38.237
> 
> 标签：mysql

如果我有几条时间戳记录并且想要获取最接近当前日期的时间戳。我应该使用什么确切的查询命令？提前致谢。下面我描述了我的最后一个查询命令：

```
mysql> select date_format(time_stamp, '%Y-%m-%d %H:%i:%s' ) as Time_Stamp
       from log 
       where username='test' and Time_Stamp <= NOW();

                  | 2012-11-23 14:50:28 |
                  | 2012-11-23 16:39:45 |
                  | 2012-11-23 16:51:41 |
                  | 2012-11-23 16:58:43 |
                  | 2012-11-25 10:12:14 |
                  | 2012-11-25 12:50:38 |
                  | 2012-11-25 12:51:20 |
                  | 2012-11-25 13:15:44 |
                  | 2012-11-25 17:47:43 |
                  | 2012-11-26 09:24:46 |
                  +---------------------+
                  285 rows in set (0.00 sec) 
```

我只想得到**2012-11-26 09:24:46**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T04:02:52.083

可能这应该有效（见最后一行）：

```
select date_format(time_stamp, '%Y-%m-%d %H:%i:%s' ) as Time_Stamp
   from log 
   where username='test' and Time_Stamp <= NOW()
   ORDER BY Time_Stamp DESC LIMIT 1; 
```

# c - sqlite3_step：如何多次解析输出？

> ID：13558444
> 
> 赞同：1
> 
> 时间：2012-11-26T03:54:30.343
> 
> 标签：c, linux, sqlite

是否可以重新使用 sqlite3 输出？我有这样的查询：

```
 error = sqlite3_prepare_v2(conn,SQL_STMT_GET_FILE,-1, &res, &tail);
            error = sqlite3_bind_text(res, 1,file,strlen(file), SQLITE_STATIC);   assert(error == SQLITE_OK);
            if (error != SQLITE_OK) {
            handle_error("No matching record found."); 
```

并解析结果

```
 while (sqlite3_step(res) == SQLITE_ROW) 
                //do something here with results for device X 
```

现在我想重新使用输出'res'，例如，代码流就像

```
 while (sqlite3_step(res) == SQLITE_ROW) 
                //do something here with results for device X

    //reset the cursor to starting position and scan through the records.

    while (sqlite3_step(res) == SQLITE_ROW) 
                //do something here with results for device Y 
```

如何做到这一点？我不希望第二次重新运行相同的 sql 语句并获取结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T04:17:24.997

您必须自己缓存数据，或者重新运行查询。

在此页面上阅读[有关 Sqlite 和滚动光标的原因，](http://www2.sqlite.org/cvstrac/wiki?p=ScrollingCursor)包括：

> 问题是 sqlite3_step() 函数根本不单步执行预先计算的结果集。考虑问题的更好和更现实的方法是假设每个准备好的语句实际上是一个计算机程序。您正在调试器中运行该程序，并且在计算深处某处的单个语句上设置了一个断点。调用 sqlite3_step() 函数就像在调试器中按下“运行”按钮，从而要求调试器运行程序，直到它退出或遇到断点。Sqlite3_step() 如果遇到断点则返回 SQLITE_ROW，如果完成则返回 SQLITE_DONE。如果您命中断点，则可以查看局部变量以查找“行”的值。然后你可以按“运行”

# jquery - hoverIntent 在目标区域注册失败

> ID：13558445
> 
> 赞同：2
> 
> 时间：2012-11-26T03:54:55.050
> 
> 标签：jquery, ajax, hoverintent

我确定我不是第一个遇到此问题的人，但在搜索过去 30 分钟后，我无法找到遇到问题的人。

[http://stagecentral.org/example/](http://stagecentral.org/example/)

当您在 IE7 以外的任何地方查看它时，当您将鼠标从文本向下移动到第一个选项时，它工作正常。但是，在 IE7 中进行测试时，我可以足够快地将光标移动到文本上，但是有一些小故障。

1.  原始菜单文本和选项之间的空间似乎没有注册并导致计时器开始删除菜单。
2.  在您到达文本之前，顶部菜单项不会注册任何悬停（顶部填充被忽略）。

这是与该部分相关的 HTML：

```
<div class="megamenu_container">
    <ul id="menu">
        <li>
            <a href="#">Upcoming Events</a>
            <div class="dropcontainer">
                <div class="submenu-cap-left"></div>
                <div class="submenu-cap-right"></div>
                <div class="clear"></div>
                <div class="submenu-left">
                    <ul class="submenu">
                        <li class="first"><a href="#">Upcoming Performances</a></li>
                        <li><a href="#">Upcoming Auditions</a></li>
                        <li><a href="#">Upcoming Staged Readings</a></li>
                        <li><a href="#">Upcoming Workshops</a></li>
                        <li><a href="#">Calendar of Events</a></li>
                        <li class="last"><a href="#">Directions to Venues</a></li>
                    </ul>
                    <div class="submenu-foot-left"></div>
                    <div class="submenu-foot-right"></div>
                </div>
                <div class="submenu-right" style="height:251px;"></div>
            </div>
        </li>
    </ul>
</div> 
```

主 CSS 位于以下样式表中： [http ://stagecentral.org/example/css/main.css](http://stagecentral.org/example/css/main.css)

最后，可以在这里找到 Megamenu 的 Javascript：http: [//stagecentral.org/example/js/megamenu.js](http://stagecentral.org/example/js/megamenu.js)

# ios - iOS 自定义 TabBar 和 Storyboards

> ID：13558446
> 
> 赞同：1
> 
> 时间：2012-11-26T03:55:29.427
> 
> 标签：ios, uitabbarcontroller, storyboard, uitabbar

我正在关注这里的一篇文章，展示如何添加自定义中心标签栏项目。

[将自定义中心按钮添加到标签栏的最佳方法是什么？](https://stackoverflow.com/questions/7527192/whats-the-best-way-of-adding-a-custom-centre-button-to-a-tab-bar)

我唯一的问题是代码应该放在哪里？我正在使用情节提要，现在我将它放在 viewwillappear 中，以显示我的默认视图。这应该在更通用或全球范围内进行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T06:32:35.827

1.  创建 UITabBarController 的子类，比如 MyTabBarController。
2.  在情节提要中，将标准的 UITabBarController 拖到场景中，并将其类类型更改为 MyTabBarController。
3.  在 MyTabBarController 中，将代码插入其**viewDidLoad**方法中。如果将它放在 viewwillappear 方法中，它将被多次添加，因为每次显示 tabbarcontroller 时都会调用 viewwillappear。

# android - Jsoup http错误获取url

> ID：13558448
> 
> 赞同：8
> 
> 时间：2012-11-26T03:55:39.553
> 
> 标签：android, jsoup

我只是下载了最新版本的jsoup（1.7.1）并按照官方代码（更改了网址）。然后我得到**“http错误获取url”**

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    try {
        loadData();
    } catch (IOException e) {
        Log.i("error",e.getMessage());
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void loadData() throws IOException {
    Document doc = Jsoup.connect("http://forum.mtr.com.hk/search.php?station=30&cat=&x=25&y=2").get();
    String title = doc.title();
    Log.i("title",title);
}} 
```

我的代码有什么问题？似乎错误刚刚发生在 Android 项目中，因为我在一个运行良好的 Java 项目中做了同样的事情。

**注意： - 我已经添加了 Internet 权限**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T16:50:35.100

我有一个类似的问题。可能是您的设备连接太慢并且 connect() 函数超时太快，或者它可能因一些无害的 HTTP 错误状态而失败。此外，我的 Jsoup 连接适用于大多数页面，但对于某些页面，我收到“HTTP 错误获取 URL。状态 = 307”。事实证明，这实际上是从 Web 服务器到另一个 URL 的重定向请求。我用以下代码解决了所有这些问题：

```
Connection.Response res = Jsoup.connect(sUrl).
        timeout(5000).ignoreHttpErrors(true).followRedirects(true).execute();
if (res.statusCode() == 307) {
    String sNewUrl = res.header("Location");
    if (sNewUrl != null && sNewUrl.length() > 7)
        sUrl = sNewUrl;
    res = Jsoup.connect(sUrl).
            timeout(5000).execute();
}
Document doc = res.parse(); 
```

希望这会有所帮助，或者至少能激发您在调用 get() 或 execute() 之前尝试更多设置。

格雷格

# ruby - 红宝石注册表检查

> ID：13558452
> 
> 赞同：8
> 
> 时间：2012-11-26T03:56:21.733
> 
> 标签：ruby, windows, registry

我有以下片段，我试图用它来验证注册表项（操作系统是 Windows 2008R2 或 Win7）

```
def value_exists?(path,key)
  reg_type = Win32::Registry::KEY_READ 
  Win32::Registry::HKEY_LOCAL_MACHINE.open(path, reg_type) do |reg|
    begin
      regkey = reg[key]
      return true
    rescue
      return false
    end
  end
end 
```

当我执行以下 2 个命令时，预期输出（在我的情况下返回 false）：

```
puts(value_exists?("SYSTEM\\CurrentControlSet\\Control\\Session Manager\\",'PendingFileRenameOperations'))
puts(value_exists?("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Component Based Servicing\\",'RebootPending')) 
```

当我执行

```
puts(value_exists?("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\WindowsUpdate\\Auto Update\\",'RebootRequired')) 
```

我收到以下错误

```
C:/Ruby187/lib/ruby/1.8/win32/registry.rb:528:in `open': The system cannot find the file specified. (Win32::Registry::Error)
        from C:/Ruby187/lib/ruby/1.8/win32/registry.rb:608:in `open'
        from ./reg2.rb:7:in `value_exists?'
        from ./reg2.rb:21 
```

我真的不明白该怎么做才能完成这项工作。我怀疑这可能与 x64 系统有关，并且无法在正确的位置找到密钥。但我不确定我需要做些什么来解决这个问题。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T15:27:18.047

我想通了 - [http://msdn.microsoft.com/en-us/library/windows/desktop/aa384129(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384129(v=vs.85).aspx)

reg_type = Win32::Registry::KEY_READ | 0x100

这解决了问题！我的猜测是你们没有在 x64 上进行测试？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:47:53.837

`SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\WindowsUpdate\\Auto Update\\`您的问题是您的注册表中不存在以下路径。你用regedit检查过吗？

您应该将代码修改为 -

```
def value_exists?(path,key)
    reg_type = Win32::Registry::KEY_READ 
    begin
        Win32::Registry::HKEY_LOCAL_MACHINE.open(path, reg_type) {|reg| regkey = reg[key]}
    rescue
        false
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-24T03:15:31.270

您也可以尝试使用`ENV`. 它充当哈希，并允许您执行哈希函数。

```
ENV.has_key?("CUSTOM_PATH") #=> Should return TRUE or FALSE 
```

并列出所有可用的键

```
ENV.each do |k, v|
    puts "#{k} is related to #{v}"
end 
```

我希望这会有所帮助。

[Ruby-Doc Core-2.0.0 - ENV](http://www.ruby-doc.org/core-2.0.0/ENV.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T05:15:58.223

我无法在 ruby​​ 1.9.2 P286 上复制您的问题，即使键不存在，也会按预期返回三个 false。

可以对比<ruby path>\lib\ruby\<version>\win32下的源码找出变化，自行更新。

# asp.net - asp.net mvc 4 网站拒绝在 teamcity 上构建

> ID：13558456
> 
> 赞同：1
> 
> 时间：2012-11-26T03:56:48.780
> 
> 标签：asp.net, asp.net-mvc-4, teamcity

我有一个带有 teamcity 的 Windows Server 2003 盒子，我将其用作构建/部署服务器。我签入了一个新的 asp.net mvc 4 项目，它出现以下错误：

```
App_Start\BundleConfig.cs(2, 18): error CS0234: The type or namespace name 'Optimization' does not exist in the namespace 'System.Web' (are you missing an assembly reference?)

Controllers\AccountController.cs(8, 7): error CS0246: The type or namespace name 'DotNetOpenAuth' could not be found (are you missing a using directive or an assembly reference?)

Global.asax.cs(7, 18): error CS0234: The type or namespace name 'Optimization' does not exist in the namespace 'System.Web' (are you missing an assembly reference?)

Models\AccountModels.cs(4, 45): error CS0234: The type or namespace name 'Schema' does not exist in the namespace 'System.ComponentModel.DataAnnotations' (are you missing an assembly reference?)

App_Start\BundleConfig.cs(9, 44): error CS0246: The type or namespace name 'BundleCollection' could not be found (are you missing a using directive or an assembly reference?) 
```

我已经在那个盒子上安装了 asp.net mvc 4，重新启动机器并尝试了其他所有方法，但没有任何运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T17:18:06.440

对我来说，我的 CI 服务器 (TeamCity) 不会通过 Web 平台安装程序采用 MVC 4。不知道为什么。

所以我检查了 TC 构建日志中的黄色警告，寻找它试图解决的参考。

对于每一个，然后我在项目/解决方案中查找相应的 NuGet 包并重新安装它。这会使用包还原对其进行设置，以便 TeamCity/MSBuild 在构建期间对其进行还原。

例如：

```
Update-Package WebGrease -Reinstall 
```

MVC 项目模板，虽然它使用 NuGet 包，但由于某种原因，它们并未连接到整个包还原机制中，因此重新安装它们会强制执行此操作。实际上，我想您正在通过其组成包安装 MVC 4。

卢克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:54:38.447

我会调查的几件事：

1.  确保在构建期间适当地下拉 NuGet 包。[文档](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages "文档")
2.  确保项目不再在某处引用旧的 MVC 3 程序集。也许 nant/msbuild 构建脚本正在某处复制旧程序集？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T21:16:15.727

我不确定这是否会有所帮助。但我有同样的问题。我试图做的是使用 EnableNuGetPackageRestore 我试图恢复它以及它导致问题的一些地方（从测试项目而不是 MVC 项目恢复 nuget 包。我不知道为什么但如果我发现我肯定会更新线程） . 我所做的是关注来自[http://blog.jetbrains.com/teamcity/2013/08/nuget-package-restore-with-teamcity/](http://blog.jetbrains.com/teamcity/2013/08/nuget-package-restore-with-teamcity/)的博客。再添加一个构建步骤 NuGet Installer 帮助我解决了问题。（注意：如果您使用的是内部 nuget 包服务器，则需要在 Sources 中指定相同的内容）。如果您仍有问题，请告诉我，我可以提供任何帮助。快乐建筑！！

# rabbitmq - RabbitMQ Shovel Frozen 'Running'

> ID：13558458
> 
> 赞同：1
> 
> 时间：2012-11-26T03:57:14.620
> 
> 标签：rabbitmq

我有一把已经使用了一段时间的 RabbitMQ 铲子。

我有一台 PC '192.168.7.1' 正在从另一台 PC '192.168.7.6' 铲除消息。除非 '192.168.7.6' 重新启动，否则此方法有效，然后 '192.168.7.1' 上的铲子保持在 RUNNING 状态，不再接收消息，也永远不会重新连接。所以消息只是无限期地在“192.168.7.6”上缓冲。

这是我的配置文件的摘录，显示了铲子配置：

```
[{rabbit, [{disk_free_limit, {mem_relative, 1.0}}]},
{rabbitmq_shovel,
    [ {shovels, [ {backbone_shovel,
                    [ {sources,
                        [ {brokers, [ "amqp://guest:guest@192.168.7.6"
                                    ]}
                        , {queue.declare, [
                                {queue, <<"backbone">>}
                                , durable
                                ]}
                        ]}
                    , {destinations,
                        [ {broker, "amqp://guest:guest@localhost"}
                        , {queue.declare, [
                                {queue, <<"backbone">>}
                                , durable
                                ]}
                        ]}
                    , {queue, <<"backbone">>}
                    , {ack_mode, on_confirm}                    
                    , {reconnect_delay, 5}
                    ]}, 
```

这是源（192.168.7.6）重新启动时rabbitmq铲管理插件的摘录：

```
backbone_shovel 
running
type:   network
virtual_host:   /
host:   192.168.7.6
username:   guest
ssl:    false
type:   network
virtual_host:   /
host:   localhost
username:   guest
ssl:    false
2012-11-26 11:03:51 
```

目标死亡时如何强制铲子重新启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T06:46:39.390

回答我自己的问题，以防其他人有同样的问题。

这个简单的解决方案是将铲子放在客户端（PC'192.168.7.6'）而不是服务器（PC'192.168.7.1'）上。然后如果客户端重新启动，铲子重新启动。所以铲子永远不会与客户端的状态不同步。

# ruby - 如何在 ruby 数组中找到匹配的值？

> ID：13558461
> 
> 赞同：8
> 
> 时间：2012-11-26T03:57:45.417
> 
> 标签：ruby, arrays

有数组 `[1, 2, 5]`，`[1, 2, 3]` 我想提取匹配值，如果有这样的方法：

`[1, 2, 5].match([1, 2, 3]) #=> [1, 2]`

有没有关于数组的方法，谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-26T04:03:04.457

很简单：

```
[1,2,5] & [1,2,3]  #=> [1,2] 
```

其他有用的数组操作包括：

```
[1,2,3] | [1,3,4]  #=> [1,2,3,4]
[1,2,3] - [1,3,4]  #=> [2]
[1,2,3] + [1,3,4]  #=> [1,2,3,1,3,4] 
```

# javascript - Javascript函数返回未定义而不是数字

> ID：13558462
> 
> 赞同：0
> 
> 时间：2012-11-26T03:58:12.547
> 
> 标签：javascript

我有两个 Javascript 函数，它们尝试使用 Google Maps API Geocode 查找地址的纬度和经度：

```
function getLatLon(address) {
    var location = -1;
    geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var lat = results[0].geometry.location.lat();
            var lon = results[0].geometry.location.lng();
            location = new Array(lat, lon);
            //document.getElementById('results').innerHTML = location[0];
        } else {
            alert("Geocode was not successful.");
        }
    });
    return location;
}

function search() {
    var address = document.getElementById('address').value;
    var location = getLatLon(address);
    document.getElementById('results').innerHTML = location[0];
} 
```

虽然 getLatLon() 中的 location[0] 在 #results div 中打印出正确的数字，但 search() 中的 location[0] 返回未定义。你有什么想法为什么会发生这种情况？我尝试从 getLatLon() 返回一个纯字符串（“Hello”），效果很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T04:05:13.353

问题是异步的`geocoder.geocode(...)`，**因此**您无法返回值。试试这样：

```
function getLatLon(address, callback) {
    geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var lat = results[0].geometry.location.lat();
            var lon = results[0].geometry.location.lng();
            location = new Array(lat, lon);
            callback(location);
        } else {
            alert("Geocode was not successful.");
        }
    });
}

function search() {
    var address = document.getElementById('address').value;
    getLatLon(address, function(location) {
        document.getElementById('results').innerHTML = location[0];
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T04:06:34.827

根据[API 文档](https://developers.google.com/maps/documentation/javascript/reference#Geocoder)，调用`geocoder.geocode(request, callback_function)`不会立即返回任何内容。收到并处理响应后，`callback_function`将调用 。在此之前，`location`将保留您设置的任何值。

您需要在调用时在回调函数中启动搜索本身`getLatLon`。为了灵活性，您可以通过添加一个回调参数来执行此操作，该参数`getLatLon`将从`geocode()`回调函数中调用。

# google-apps-script - 如何设置面板可见和不可见？

> ID：13558465
> 
> 赞同：1
> 
> 时间：2012-11-26T03:58:17.630
> 
> 标签：google-apps-script

我想知道如何设置“blocksPanel”和“briquettesPanel”可见或不可见？如果在下拉列表中选择了“8:1 Compressed Blocks”，我希望“blocksPanel”可见，如果在下拉列表中选择“8:1 Compressed Briquettes”，则“briquettesPanel”可见。

```
function doGet(e) {
  var app = UiApp.createApplication();

  //Create horizontal product + other panel
  var productOtherPanel = app.createHorizontalPanel().setId('productOtherPanel')
  .setStyleAttribute('position','relative').setStyleAttribute('left','0%');

  //Create horizontal Product Panel  
  var productPanel = app.createHorizontalPanel().setId('productPanel').setStyleAttribute('position','relative')
  .setStyleAttribute('left','0%').setVisible(true);
  //Create listBox
  var productList = app.createListBox().setName("productList").setId('productList');
  //Add items to listBox
  productList.addItem("8:1 Compressed Blocks");
  productList.addItem("8:1 Compressed Briquettes");

  //Create horizontal Compressed Blocks panel
  var blocksPanel = app.createHorizontalPanel().setId('blocksPanel')
  .setStyleAttribute('position','relative').setStyleAttribute('left','0%').setVisible(true);
  //Create Compressed Blocks Size List
  var blocksSizeList = app.createListBox().setName('blocksSizeList').setId('blocksSizeList');
  //addItem fills the Compressed Blocks Size List
  blocksSizeList.addItem("5kg");
  blocksSizeList.addItem("20kg");

  //Create horizontal Briquettes panel
  var briquettesPanel = app.createHorizontalPanel().setId('briquettesPanel')
  .setStyleAttribute('position','relative').setStyleAttribute('left','0%').setVisible(true);
  //Create Briquettes Size List
  var briquettesSizeList = app.createListBox().setName('briquettesSizeList').setId('briquettesSizeList');
  //addItem fills the Briquettes Size List
  briquettesSizeList.addItem("250g");
  briquettesSizeList.addItem("650g");

  app.add(productOtherPanel);
  productOtherPanel.add(productPanel);
  productPanel.add(productList);

  productOtherPanel.add(blocksPanel);
  blocksPanel.add(blocksSizeList);

  productOtherPanel.add(briquettesPanel);
  briquettesPanel.add(briquettesSizeList);

  return app;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T05:55:03.990

首先为产品列表创建一个服务器更改处理程序。

```
var handler = app.createServerHandler("panelHandler");
productList.addChangeHandler(handler); 
```

然后定义面板处理函数如下。productList 被传递到处理函数的“event”参数中。

```
function panelHandler(event) {
  var app = UiApp.getActiveApplication();
  if (event.parameter.productList == "8:1 Compressed Blocks") {
    app.getElementById('blocksPanel').setVisible(true);
    app.getElementById('briquettesPanel').setVisible(false);
  }
  else if (event.parameter.productList == "8:1 Compressed Briquettes") {
    app.getElementById('blocksPanel').setVisible(false);
    app.getElementById('briquettesPanel').setVisible(true);
  }
  return app;
} 
```

一开始需要设置 blocksPanel 可见和 briquettesPanel 不可见，以匹配产品列表的初始状态。

有关更多信息，请参阅[服务器处理程序](https://developers.google.com/apps-script/class_serverhandler?hl=en)文档。

# jquery - 如何隐藏我的原始显示按钮并允许单击任意位置来隐藏我的内容？

> ID：13558467
> 
> 赞同：2
> 
> 时间：2012-11-26T03:59:15.513
> 
> 标签：jquery, click, show-hide

我想弄清楚如何隐藏我原来的显示按钮。然后做到这一点，当我点击页面上的任何地方时，它会隐藏显示按钮显示的原始内容。

```
<script>
    $(function(){

        $(".content").hide();
        $('.more-btn').click(function(){
           $(this).parent().parent().siblings('.content').show();
           $(this).hide();
        });

    });
</script> 
```

这是HTML

```
<section>
    <article class="toggle-box" id="toggle1">
        <aside class="info-rollover">
            <h3>Locavores</h3>
            <button class="more-btn">Show More</button>
        </aside>
    </article>
    <aside class="content">
        <img src="images/loca/1.jpg"/>
        <img src="images/loca/2.jpg"/>
        <img src="images/loca/3.jpg"/>
        <img src="images/loca/4.jpg"/>
        <img src="images/loca/5.jpg"/>
        <img src="images/loca/6.jpg"/>
        <img src="images/loca/7.jpg"/>
        <img src="images/loca/8.jpg"/>
        <img src="images/loca/9.jpg"/>
    </aside>
</section> 
```

点击代码上的新隐藏显示

```
 $(document).click(function(){
                    $('.content:visible').hide();
                    $('.content>img:hidden').show(),$('body').css('cursor', 'default');
                    });

            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:05:45.023

隐藏按钮后，您可以绑定到正文单击。

```
$( '.more-btn').click( function(){
  var button=$( this ).hide(),
  content= $('.content' ).show();
  $( 'body' ).bind( 'click.more', function( e ){
    $( this ).unbind( 'click.more' );
    button.show();
    content.hide();
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:10:50.537

**[jsBin 演示](http://jsbin.com/ozejib/2/edit)**

```
$(function(){

    $(".content").hide();
    $('.more-btn').click(function( e ){
       e.stopPropagation(); // to lower "DOM layers"
       $(this).closest('section').find('.content').show();
       $(this).hide();
    });

    $(document).click(function(){
      $('.content:visible').hide();
      $('.more-btn:hidden').show();
    });

}); 
```

# c++ - 将字符数组附加到字符串 C++

> ID：13558472
> 
> 赞同：10
> 
> 时间：2012-11-26T03:59:58.990
> 
> 标签：c++, string

我有一个 256 个字符的字符数组，或者`char myArray[256]`只有第一对实际保存任何信息

```
myArray[0] = 'H';
myArray[1] = 'E';
myArray[2] = 'L';
myArray[3] = 'L';
myArray[4] = 'O';
myArray[5] = NULL;
myArray[6] = NULL;
// etc... 
```

我不一定知道数组中的确切内容，但我想将那里的内容（减去空字符）复制到我的缓冲区字符串`string buffer`

我认为执行此操作的适当方法是执行以下操作：

```
buffer.append(myArray); 
```

一旦遇到 nul 字符，程序就会停止读取值，但我没有看到这种行为。我看到它将整个数组复制到我的缓冲区、空字符和所有字符中。这样做的正确方法是什么？

编辑：一些工作代码使其更容易

```
#include <string>
#include <iostream>

using namespace std;

int main()
{
    string buffer;
    char mychararray[256] = {NULL};

    mychararray[0] = 'H';
    mychararray[1] = 'e';
    mychararray[2] = 'l';
    mychararray[3] = 'l';
    mychararray[4] = 'o';

    buffer.append(mychararray);

    cout << buffer << endl;

    return 0;
} 
```

刚刚意识到我没有正确初始化 null 并且我原来的方式有效。很抱歉浪费你们的时间。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T04:02:08.697

尝试

```
buffer += myArray; 
```

应该这样做。`append`如果您对数组进行空终止，也应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T04:01:46.033

这应该做的工作：

```
int c;
while(myArray[c] != NULL) {
  buffer.append(1,myArray[c]);
  ++c;
} 
```

此外，您应该执行以下操作：`myArray[5] = '\0'`

# r - 自动将零归为 NA 值

> ID：13558473
> 
> 赞同：0
> 
> 时间：2012-11-26T04:00:01.343
> 
> 标签：r, dataframe

我想用 0 替换数据框中数字列中的所有 NA 值。我应该怎么做？

我得到了一个具有 NA 值的数值变量列表，如下所示（我确信它不是最优的）：

```
iris[3,4] <- NA
missingVars <- iris[colSums(is.na(iris)) > 0] 
missingNumVars <- missingVars[sapply(missingVars, is.numeric)] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T04:04:04.503

这应该适合你

```
iris[is.na(iris)] <- 0 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T04:07:44.293

像这样的东西会起作用并避免相同大小的对象的重复副本`iris`（由创建`is.na(iris)`）

```
as.data.frame(lapply(iris, function(x) 
if(is.numeric(x)) {return(replace(x, is.na(x),0))} 
  else {return(x)}) ) 
```

# android - setcontent的textview中的空指针异常

> ID：13558474
> 
> 赞同：2
> 
> 时间：2012-11-26T04:00:05.460
> 
> 标签：android, android-layout

我正在`java.lang.NullPointerException`使用`createTabContent`以下代码。有两个标签规范。当我打电话并设置标签时，第一次更改标签就可以了。但是当我在第二个选项卡上再次调用时，它命中了 line 的空指针异常：`NoStudentText.setVisibility(View.VISIBLE);`

如果学生列表没有数据，我将显示 No Student Text。它显示第一次通话的文字。但是，如果我第二次调用该选项卡，则会收到错误消息。

```
tspecStudent.setContent(new TabContentFactory() {
            public View createTabContent(String arg0) {
                if(listStudent != null && listStudent .size() > 0) {
                    //show the student list
                } else {
                    TextView noStudentText = (TextView)findViewById(R.id.NoStudentText);
                    noStudentText.setVisibility(View.VISIBLE);
                    return noStudentText;
                }

            }
        }); 
```

我在主布局中包含另一个 xml。

**主要的.xml**

```
<TabHost
        android:id="@+id/tabhostMain"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1" > 
....
<include layout="@layout/tab_student" />

</TabHost> 
```

**tab_student.xml**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabcontent"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

 <ListView
        android:id="@+id/StudentList"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:drawSelectorOnTop="false" />

<TextView
        android:id="@+id/NoStudentText"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="No Student"
        android:visibility="gone" />

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:54:44.100

有时由于您的应用条件，它无法初始化，所以将此变量设为全局变量 -

```
 TextView _noStudentText; 
```

在 onCreate 方法中初始化它::

```
 _noStudentText = (TextView)findViewById(R.id.NoStudentText); 
```

现在根据您的需要更改可见性，如下所示 -

```
 _noStudentText.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:59:44.703

也许您忘记添加`setContentView(R.layout.your_layout);`：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.your_layout); 
```

# ruby-on-rails - 我无法使用 Soundcloud 帐户进行身份验证

> ID：13558477
> 
> 赞同：1
> 
> 时间：2012-11-26T04:01:15.410
> 
> 标签：ruby-on-rails, authentication, omniauth, soundcloud

我正在编写一个必须能够允许用户使用他们的 soundcloud 帐户注册的应用程序，到目前为止我还没有找到任何有用的使用 Omniauth 的教程，有人可以帮我提供一些开始的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:40:30.310

我在本地聚会上做了一个演示，介绍如何使用[此处](https://github.com/xfernandox/babl)的演示应用程序将 OmniAuth 集成到您的应用程序中。您可以分叉它并完成自述文件第 3 节中的步骤。您还可以在[此处](https://speakerdeck.com/xfernandox/authenticate-with-omniauth)查看一些幻灯片。

仍有许多重构需要完成，但它旨在为一群以前从未使用过 OmniAuth 的人提供一个基本的介绍。

我还列出了有助于整理演示文稿的资源。我强烈建议检查一下。

尽管这些示例不使用omniauth-soundcloud，但它应该类似地工作。

# php - 仅在特定类别中显示评论

> ID：13558480
> 
> 赞同：0
> 
> 时间：2012-11-26T04:01:41.980
> 
> 标签：php, wordpress, comments, categories

我正在尝试仅在特定类别中启用评论。Ex// 事件类别 ID=17 视频类别 ID=15

我尝试了这段代码，只列出了一个类别。

`<?php if (!in_category('17')) comments_template(); ?>`

但是评论却消失了……我认为该代码仅在特定类别中才显示评论？当我像这样添加多个类别 ID 时，

`<?php if (!in_category('17, 15')) comments_template(); ?>` 它停止工作......

我想要超过 1 个类别的显示评论......不仅仅是一个。但似乎上面的代码只是从该类别中删除评论......

什么是正确的代码？

**编辑//** 不确定此信息是否有用..但这些都是我希望显示而不显示评论的子类别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:23:42.340

试试这个 ：

```
<?php if (in_category('15') || in_category('17')) comments_template(); ?> 
```

# phpdoc - 使用 phpDocumentor 2 自定义模板

> ID：13558482
> 
> 赞同：5
> 
> 时间：2012-11-26T04:01:48.883
> 
> 标签：phpdoc

我一直在尝试让自定义模板与 PHPDocumentor (2) 一起使用，但运气不佳。他们网站上的文档不完整，我有点难过。

我所做的是下载完整模板的副本并在我的命令中引用它，如下所示：

```
php phpdoc.php 
    --template=/path/to/customtemplate/ 
    -d /path/to/php/source/files 
    -t /path/to/generated/content/ 
```

该命令运行良好：它正确生成了文档，但似乎忽略了该`--template`选项 - 至少，我对文件`/customtemplate`夹中的模板文件所做的任何更改都将被忽略。

有人知道吗？

（提前致谢！）

*   本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T20:18:29.727

您可以尝试更改 phpdoc.dist.xml 配置文件，以便它直接从那里提取模板名称或路径，而不是在 CLI 上声明模板命令。

# jquery - 如何在每个用户会话中显示一次模式窗口？

> ID：13558489
> 
> 赞同：0
> 
> 时间：2012-11-26T04:03:02.427
> 
> 标签：jquery, session, window, modal-dialog

我正在寻找一个`script`, 以在进入我的网站（无论哪个页面）时在页面加载时显示模式窗口，但在同一浏览期间仅显示一次`session`，因此当用户关闭并重新打开时，`browser`他会在我的网站中再次看到模式窗口。有人可以帮助我吗？

我找到了一个对这个问题的回复，其中包含一个`jquery`现在不起作用的插件链接和一段我不知道如何使用的代码。请参阅下面对另一个类似问题的答复

给出的链接是[http://plugins.jquery.com/files/jquery.cookie.js.txt](http://plugins.jquery.com/files/jquery.cookie.js.txt)

给出的代码是

```
if ($.cookie('modal') != 'shown')    {
      $.cookie('modal', 'shown');
      // code to show modal    
} 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:52:09.557

看起来新的插件位置在[这里](https://github.com/carhartl/jquery-cookie)。包含[脚本](https://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js)后，您的代码应该按原样工作。

至于显示模态对话框，最简单的方法是`alert()`调用。您还可以查看几个[插件，它们提供了更精美的外观。](http://www.jquery4u.com/windows/14-jquery-modal-dialog-boxes/)

**更新**

[此处](http://jsbin.com/ogadil/1/)添加的示例。它只会在您第一次访问时显示警报对话框，除非您清除 cookie。点击编辑查看源代码。

# java - 如何将默认的水平进度条更改为垂直？

> ID：13558492
> 
> 赞同：2
> 
> 时间：2012-11-26T04:03:21.587
> 
> 标签：java, android

到目前为止，我有一个工作水平进度条。

这是我的 xml 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ProgressBar
    android:id="@+id/progressBar1"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="168dp" /> 
```

我将把它用作液体罐的视觉指示器。（进度作为液位）

我想知道如何设置它vertcal。如果不可能，有人可以为我的问题提出其他选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:18:23.687

检查下面的链接它会帮助你..

演示代码以及如何设置进度条垂直

```
http://www.androidpeople.com/android-progress-dialog-example 
```

[http://www.helloandroid.com/tutorials/using-threads-and-progressdialog](http://www.helloandroid.com/tutorials/using-threads-and-progressdialog)

# c++ - C++ 使用信号量而不是忙于等待

> ID：13558493
> 
> 赞同：2
> 
> 时间：2012-11-26T04:03:26.770
> 
> 标签：c++, multithreading, pthreads, posix, semaphore

我正在尝试学习信号量和多线程。我正在使用的示例创建 1 到 t 个线程，每个线程指向下一个线程，最后一个线程指向第一个线程。该程序允许每个线程依次轮流，直到所有线程都轮流 n 轮。那是程序结束的时候。唯一的问题是在 tFunc 函数中，我正忙着等到轮到特定线程。我想知道如何使用信号量来使所有线程进入睡眠状态，并且只有在轮到它执行时才唤醒一个线程以提高效率。

```
int turn = 1;
int counter = 0;
int t, n;

struct tData {
        int me;
        int next;
};

void *tFunc(void *arg) {
        struct tData *data;
        data = (struct tData *) arg;
        for (int i = 0; i < n; i++) {
            while (turn != data->me) {
        }
        counter++;
        turn = data->next;
    }
}

int main (int argc, char *argv[]) {
    t = atoi(argv[1]);
    n = atoi(argv[2]);
    struct tData td[t];
    pthread_t threads[t];
    int rc;

    for (int i = 1; i <= t; i++) {
        if (i == t) {
            td[i].me = i;
            td[i].next = 1;
        }
        else {
            td[i].me = i;
            td[i].next = i + 1;
        }
        rc = pthread_create(&threads[i], NULL, tFunc, (void *)&td[i]);
        if (rc) {
            cout << "Error: Unable to create thread, " << rc << endl;
            exit(-1);
        }
    }
    for (int i = 1; i <= t; i++) {
        pthread_join(threads[i], NULL);
    }
    pthread_exit(NULL);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T04:45:23.737

使用互斥锁和条件变量。这是一个工作示例：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

int turn = 1;
int counter = 0;
int t, n;

struct tData {
        int me;
        int next;
};

pthread_mutex_t mutex;
pthread_cond_t cond;

void *tFunc(void *arg)
{
    struct tData *data;
    data = (struct tData *) arg;
    pthread_mutex_lock(&mutex);
    for (int i = 0; i < n; i++)
    {
        while (turn != data->me)
            pthread_cond_wait(&cond, &mutex);
        counter++;
        turn = data->next;
        printf("%d goes (turn %d of %d), %d next\n", data->me, i+1, n, turn);
        pthread_cond_broadcast(&cond);
    }
    pthread_mutex_unlock(&mutex);
}

int main (int argc, char *argv[]) {
    t = atoi(argv[1]);
    n = atoi(argv[2]);
    struct tData td[t + 1];
    pthread_t threads[t + 1];
    int rc;

    pthread_mutex_init(&mutex, NULL);
    pthread_cond_init(&cond, NULL);

    for (int i = 1; i <= t; i++)
    {
        td[i].me = i;
        if (i == t)
            td[i].next = 1;
        else
            td[i].next = i + 1;

        rc = pthread_create(&threads[i], NULL, tFunc, (void *)&td[i]);
        if (rc)
        {
            printf("Error: Unable to create thread: %d\n", rc);
            exit(-1);
        }
    }
    void *ret;
    for (int i = 1; i <= t; i++)
        pthread_join(threads[i], &ret);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:09:26.607

使用`N+1`信号量。启动时，线程`i`在 semaphore 上等待`i`。醒来时它“轮流`and signals semaphore`i + 1 ”。

主线程产生`N`, 线程，信号 semaphore 0 并等待 semaphore `N`。

伪代码：

```
sem s[N+1];

thread_proc (i):
  repeat N:
      wait (s [i])
      do_work ()
      signal (s [i+1])

main():
  for i in 0 .. N:
    spawn (thread_proc, i)

  repeat N:    
      signal (s [0]);
      wait (s [N]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T10:21:12.050

每个线程有一个信号量。让每个线程都在其信号量上，如果返回`wait`则重试。一旦它完成了它的工作，就让它到下一个线程的信号量。这通过一次只唤醒一个线程来避免 David 的解决方案的“雷鸣般的羊群”行为。`sem_wait``EINTR``post`

另请注意，由于您的信号量永远不会有大于 1 的值，因此您可以使用 a `pthread_mutex_t`。

# actionscript-3 - 在 Flash 中创建用户生成的列表

> ID：13558496
> 
> 赞同：0
> 
> 时间：2012-11-26T04:03:55.517
> 
> 标签：actionscript-3, flash

我正在尝试创建一个跟踪用户生成值的 Flash 应用程序。该应用程序基本上应该允许用户输入项目的名称和成本。然后应将总成本相加以向用户显示总价值。我可能会弄清楚如何将这些值相加，但我不确定如何允许用户创建一个列表然后允许用户保存它。任何人都可以将我指向教程或指向正确的方向吗？

我正在使用变量来添加用户输入的数字以得出总数。第一个问题是 actionscript 3.0 不允许文本变量。我只是将它转换为 2.0 来解决这个问题。第二个问题是，当我测试应用程序并输入我的值并单击提交时，我在总值字段中得到 NaN。是否有理由不添加值？

这是我用于提交按钮的代码：

on (release) { total = Number(rent) + Number(food) + Number(travel) + Number(entertainment) + Number(bills)；}

我错过了什么吗？

我可以给输入文本实例名称，然后给它们变量吗？有什么方法可以解决这个问题？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:26:34.997

有一个`object array`，比如说

```
var stack:Array = new Array(); 
```

然后在用户输入时将项目名称和它的成本推送到该数组，例如

```
stack.push({item:AAA, cost:xx}); 
```

这样您就可以随时使用该数组生成列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:37:25.393

你必须看看这在代码中是如何工作的。actionscript 中的列表可以存储在数组、向量、字典甚至对象中。

```
 Var myList:Array = [];
 myList.push({name: "item 1", cost: 5 });
 myList.push({name: "item 2", cost: 7.5 }); 
```

如果您想从列表中获取“项目 1”的“产品”，则必须为此创建一个函数，我们将其命名为 getProductByName

```
 function getProductByName(name:String):Object
 {
    for each(var product:Object in myList)
    {
       if (product.name === name) return product; 
    }
    return null; // no match found
 } 
```

您可以像这样调用该函数：

```
 var product = getProductByName("item 1");
 trace(product.cost); // 5 
```

你可以改变产品，所以让它变得更贵

```
 product.cost += 1;
 trace(product.cost); // 6 
```

玩得开心！如果您正在使用类，您将为产品创建一个具有公共名称和成本的类，在这种情况下，您最好使用向量，以确保使用正确的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T21:10:02.933

这就是在动作脚本 3.0 中为我解决的问题：

```
myButton.addEventListener(MouseEvent.CLICK, addThem);

function addThem(e:MouseEvent)
{
    totalField.text = String ( Number(field1.text) + Number(field2.text) + ....);
} 
```

我还必须适当地命名实例。

# android - 如何将 CursorAdapter 绑定到 ExpandableListView？

> ID：13558498
> 
> 赞同：11
> 
> 时间：2012-11-26T04:04:16.783
> 
> 标签：android, expandablelistview, android-cursoradapter

我现在可以将**CursorAdapter**绑定到`ListView`. 并且ListView可以在**数据库**修改时自动更新。

对于数据库中的数据行有一个字段'type'，它们可以是'Daily'，'Weekly'，'Monthly'等。我想在**ExpandableListView**中显示行，以便每种类型的行都可以组合在一起。而且我还希望 ExpandableListView 在数据库被修改时可以自动更新。如何将**CursorAdapter**和**ExpandableListView**结合在一起？

我google了很多，但没有找到解决方案，感谢您的关注！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T05:28:56.047

它被称为一个`CursorTreeAdapter`

[http://developer.android.com/reference/android/widget/CursorTreeAdapter.html](http://developer.android.com/reference/android/widget/CursorTreeAdapter.html)

[http://developer.android.com/reference/android/widget/SimpleCursorTreeAdapter.html](http://developer.android.com/reference/android/widget/SimpleCursorTreeAdapter.html)

# jquery - 按特定顺序添加图像

> ID：13558499
> 
> 赞同：0
> 
> 时间：2012-11-26T04:04:21.227
> 
> 标签：jquery, prepend

我知道这不是最好的方法，但不幸的是，由于截止日期，这就是它的样子。我正在加载三张图像，然后将它们添加到 div 中，我希望它们以特定的顺序添加。现在这就是我所拥有的，但我不确定如何在订单中添加前缀。我也不想使用 jquery 加载。这些图像是按照我希望它们出现的顺序列出的，我在想只是写它，这样一个函数在下一个函数完成之前不会启动？但我也不知道该怎么做。感谢您对此的任何帮助。

```
$("#pt_figures").click(function() {
$("<img>", { src: "http://www.klossal.com/figures_doc.png" }).prependTo("#images"); 
$("<img>", { src: "http://www.klossal.com/figure_front.png" }).prependTo("#images"); 
$("<img>", { src: "http://www.klossal.com/figure_back.png" }).prependTo("#images");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:14:23.973

你的问题的答案很简单。

`.append()`不使用`.prepend()`

```
$("#pt_figures").click(function() {
  $("<img>", { src: "http://www.klossal.com/figures_doc.png" }).appendTo("#images"); 
  $("<img>", { src: "http://www.klossal.com/figure_front.png" }).appendTo("#images"); 
  $("<img>", { src: "http://www.klossal.com/figure_back.png" }).appendTo("#images");
}); 
```

在时间紧迫的情况下，人们往往会忽略简单的事情——很容易犯错误。

# python - 图像/视频处理选项

> ID：13558510
> 
> 赞同：12
> 
> 时间：2012-11-26T04:06:08.020
> 
> 标签：python, arduino

我有一个 12 伏的小型车载摄像头，放在蜂巢内。它用红外线 LED 点亮（蜜蜂看不到红外线）。它通过电线将简单的 NTSC 信号发送到我拥有的小型电视监视器。这让我可以看到蜂巢的内部，而不会打扰蜜蜂。

女王在她的背上有一个点，当她在画面中时非常明显。

我想要一些处理信号的东西，以便它在女王在框架中时注册。这不一定是一个非常准确的计数。与其处理视频，不如每 10 秒拍摄一张图像并查看是否有一定的亮度（表明女王在帧中）。

这很有用，因为它可以帮助养蜂人知道蜂王是否还活着（如果她有好几天没有出现，这可能意味着有问题）。

我很想听听有关处理此视频的廉价方法的建议，尤其是在低功耗的情况下。树莓派？阿杜诺？

相机示例： [这里](http://www.securitycamera2000.com/products/600TVL-SONY-SUPER-HAD-CCD-Color-Mini-HD-Board-Camera-Wire-Control-OSD.html)

示例视频（帧中没有女王）： [这里](http://www.youtube.com/watch?v=l6B7JumlZvg&feature=relmfu)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T04:26:59.150

首先，伟大的项目。我希望我正在做这么有趣的事情。

这里最明显的解决方案是**OpenCV**，据我所知，它将在 Raspberry Pi (Linux) 和 Android 平台上运行，但不能在 Arduino 上运行。（在这两者中，我会从 Raspberry Pi 开始，因为它在你如何进行编程方面不太特别。）

正如您所描述的那样，您可能能够摆脱不太强大的图像处理工具，但这些问题很少像最初看起来那么容易。例如，在我看来，视频中最亮的地方是（我猜是）从玻璃反射的照明二极管。但如果不是这个，那就是别的东西，所以不要双手反绑在背后开始这个项目。如果这不能用 OpenCV 完成，它可能根本无法完成。

Raspberry Pi 计算机大约 50 美元，OpenCV 是免费的，所以我怀疑你会比这便宜得多。

如果您以前没有做过这样的事情，我建议不要直接在 C++ 中为 OpenCV 编程，因为这样的探索性也不是很高。取而代之的是，例如，使用 Python 绑定，以便您可以交互地浏览图像。

您还询问了 Arduino，我认为这对于此类项目来说不是一个很好的选择。首先，您需要额外的硬件，例如视频屏蔽（例如， http: [//nootropicdesign.com/ve/](http://nootropicdesign.com/ve/)），这会增加费用。其次，Arduino 没有好的图像处理库，所以你需要从头开始做所有事情。第三，一般来说，调试单片机程序比较困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T12:47:13.020

我对图像处理没有很好的答案，但我知道如何让它变得更容易。当你标记女王时，在油漆上扔一些反光珠以获得更高的光返回。

我认为您可以简单地将珠子与油漆混合——按体积使用 1 份珠子到 3 份油漆。也就是说，我认为如果在标记女王时将珠子倒在湿漆的表面上，你会得到更好的效果。我会倒很多珠子以确保粘住（你可以在碗或袋子上做，以接住所有多余的珠子。

我建议在标记女王之前做一些测试——我以前从未使用过珠子，但我使用过反光带和油漆，它会给你一个显着更高的光返回。高多少取决于（即我没有数字），但我猜至少要多 2-5 倍的光——足以让你的相机在以当前曝光设置看到女王时饱和。如果您在某些阈值像素数的饱和度上设置触发器（确保少数像素正常饱和），这应该会给您一个非常好的信噪比，这将大大简化图像处理。

[编辑] 我做了更多的挖掘，还有一些重要的参数需要考虑。首先，在指数为 1.5（我之前连接的珠子）的情况下，这些珠子不会将光线聚焦在背面并进行逆反射，它们只会像镜片一样起作用。它们可能会闪闪发光并反射一点，但你最好在油漆上添加闪光。

您可以获得非常高反光的胶带，它有合适的珠子，并且在珠子的背面有一层反光涂层，可以反射更多的光！您必须弄清楚如何将一点胶带粘在女王身上才能使用它，但这可能是您可以获得的最佳反射。 [http://www.amazon.com/3M-198-Scotch-Reflective-Silver/dp/B00004Z49Q](https://rads.stackoverflow.com/amzn/click/com/B00004Z49Q)

你也可以试试我之前推荐的折射率为 1.5 的珠子。我一定会在纸上针对闪光进行测试，以确保您不会浪费时间。 [http://www.colesafety.com/Reflective-Powder-Glass-Beads-GSB10Powder.htm](http://www.colesafety.com/Reflective-Powder-Glass-Beads-GSB10Powder.htm)

我很难找到 1 磅或更少、折射率为 1.9+ 的玻璃珠的来源。我会做更多的搜索，如果我找到少量的体面来源，我会告诉你。

# extjs - 如何在 extjs 4 中的网格中以时间格式在窗口中显示编辑值

> ID：13558512
> 
> 赞同：1
> 
> 时间：2012-11-26T04:06:21.193
> 
> 标签：extjs, extjs4

我正在使用 extjs 4.1。我有一个以所需时间格式显示日期的网格。但是，当我想在窗口中显示日期、时间和超时时间以进行编辑时，只显示日期。但 intime 和 outtime 没有显示。数据库中的所有字段都是日期时间。谁能帮我解决这个问题。下面是我的代码：

我的网格如下：

```
Ext.define('Ext4Example.view.attendence.Datagrid' ,{
    extend: 'Ext.grid.Panel',
    alias : 'widget.datagrid',
    layout: 'fit',
    border: true,
    viewConfig: {
        stripeRows: true,
        forceFit:true,
        emptyText:'No Records to display'
    },

    hideHeaders: false,
    initComponent: function() {

        this.store = 'Attendences';
        //this.width = 400;      
        this.columns = [
        {
            text: 'Date',
            dataIndex: 'id',
            renderer: function(value, metaData){
                return Ext.Date.format(value, 'M d, Y');
            }
        },{
            text: 'Day',
            dataIndex : 'id',
            renderer: function(value, metaData){
                return Ext.Date.format(value, ' l');
            }
        },
        {
            text: 'In-Time',
            dataIndex: 'intime',
            renderer: function(value, metaData){
                return Ext.Date.format(value, 'h:i A');
            }
        },
        {
            text: 'Out-Time',
            dataIndex: 'outtime',
            renderer: function(value, metaData){
                return Ext.Date.format(value, 'h:i A');
            }
        }

        ];

        this.callParent(arguments);
    }
}); 
```

下面给出了我想要编辑值的窗口：

```
 Ext.define('Ext4Example.view.attendence.Editattendence' ,{
    extend: 'Ext.window.Window',
    alias : 'widget.editattendence',
    title: 'Edit Attendence',
    layout: 'fit',
    autoShow: true,
    initComponent: function () {
        this.items = [
        {
            xtype: 'form',

            bodyStyle: {
                background: 'none',
                padding: '10px',
                border: '0'
            },
            items: [
            {
                xtype: 'datefield',
                name: 'id',
                allowBlank: false,
                fieldLabel: 'Attendene ID'
            },
            {
                xtype: 'numberfield',
                name: 'intime',
                allowBlank: false,
                fieldLabel: 'IN TIME',
                renderer: function(value, metaData){
                return Ext.Date.format(value, 'h:i A');
            }
            },{
                xtype: 'numberfield',
                fieldLabel: 'OUT TIME',
                name: 'outtime',
                renderer: function(value, metaData){
                return Ext.Date.format(value, 'h:i A');
            }
            }
            ]
        }
        ];
        this.buttons = [
        {
            text: 'Save',
            action: 'save'
        },
        {
            text: 'Cancel',
            scope: this,
            handler: this.close
        }
        ];
        this.callParent(arguments);
    }
}); 
```

我在网格行中双击调用此窗口的控制器如下所示：

```
Ext.define('Ext4Example.controller.Attendences', {
    extend: 'Ext.app.Controller',
    stores: [
    'Attendences','Months'
    ],
    models: [
    'Attendence','Month'
    ],
    views: [
    'attendence.Timeperiod','attendence.Details','attendence.Attendencewindow','attendence.Editattendence','attendence.Datagrid'  //'attendence.Months'
    ],

    refs: [{
        ref: 'stockaddForm',
        selector: 'form'
    }],

    init: function () {
        this.control({
            'datagrid': {
                itemdblclick: this.editUser,
                viewready: this.attnready
            },
            'attendencewindow button[action=save]': {
                click: this.save
            }       
        });
    },

    editUser: function(grid, record){
        var view = Ext.widget('editattendence');
        view.down('form').loadRecord(record);
    },
    save: function(){
        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth()+1; //January is 0!
        var yyyy = today.getFullYear();     //+1
        Ext.Msg.alert("Today is - ",dd+" - "+mm+" - "+yyyy);
    },
    attnready: function(grid, eOpts) {       
        console.log('hello');
        var store = grid.getStore(),
        selModel = grid.getSelectionModel();
          if (store.getAt(0)) {
            selModel.select(0);
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:15:49.870

嘿，我已经解决了这个问题。只需在editAttendence 表单中进行一点更改，如下所示：

```
Ext.define('Ext4Example.view.attendence.Editattendence' ,{
    extend: 'Ext.window.Window',
    alias : 'widget.editattendence',
    title: 'Edit Attendence',
    layout: 'fit',
    autoShow: true,
    initComponent: function () {
        this.items = [
        {
            xtype: 'form',

            bodyStyle: {
                background: 'none',
                padding: '10px',
                border: '0'
            },
            items: [
            {
                xtype: 'datefield',
                name: 'id',
                allowBlank: false,
                fieldLabel: 'Attendene ID'
            },
            {
                xtype: 'datefield',
                format:'h:i A',
                name: 'intime',
                allowBlank: false,
                fieldLabel: 'IN TIME'

            },{
                xtype: 'datefield',
                format:'h:i A',
                fieldLabel: 'OUT TIME',
                allowBlank: false,
                name: 'outtime'

            }
            ]
        }
        ];
        this.buttons = [
        {
            text: 'Save',
            action: 'save'
        },
        {
            text: 'Cancel',
            scope: this,
            handler: this.close
        }
        ];
        this.callParent(arguments);
    }
}); 
```

# html - 从列表项中的链接中删除格式

> ID：13558514
> 
> 赞同：0
> 
> 时间：2012-11-26T04:06:29.283
> 
> 标签：html, css, list, colors, hover

我有一个包含许多链接的列表的经典配置，用 CSS 很好地格式化。不幸的是，列表项在悬停时应该改变颜色（使用 li:hover），保持格式为链接（未单击时为蓝色，单击时为紫色，带下划线）。我如何让浏览器忽略链接的格式并使用上面的格式 - 还是我应该自己编辑链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:11:58.357

也将格式应用于链接标签，如下所示：

```
li:hover, li:hover a
{
   ...
} 
```

# jquery - 在jquery mobile中为特定页面绑定pageinit

> ID：13558518
> 
> 赞同：0
> 
> 时间：2012-11-26T04:07:28.787
> 
> 标签：jquery, jquery-mobile

我在 JQuery-Mobile 应用程序中有两个页面，第一个链接到第二个。我在第二页上有一个表单，它根据来自 php 脚本的信息动态加载一些 html，并且我想在该页面的所有内容加载后将事件处理程序附加到一些动态添加的元素。我相信这有助于使用 pageinit，因为一旦对第二页的 ajax 调用完成，就会调用它。但是你如何只为单个页面执行此操作，因为我不想为每个 pageinit 事件加载脚本，因为它会引用尚未创建的元素？

我有类似的东西：

```
$('#page_two').bind("pageinit",function(){//some code}); 
```

但是，这不会执行函数体内的代码。我尝试改用 .live ，这确实按我想要的方式工作，但我读过这在 JQuery 中已被弃用。有没有办法只为 JQuery Mobile 中的特定页面加载 javascript？此外，如果有人可以解释为什么 .bind 不起作用，但 .live 起作用，那就太好了。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T10:19:38.920

对不起，如果我迟到了，但我这样做：

```
$( document ).delegate(".yourpageclass", "pageshow", function() {
alert ("Ciao!");
}); 
```

我希望它对某人有帮助。

# java - 绑定到特定的 IP 地址和端口以接收 UDP 数据

> ID：13558522
> 
> 赞同：11
> 
> 时间：2012-11-26T04:08:01.563
> 
> 标签：java, c, udp, bind

我正在尝试接收由 PlayCap（[http://www.signal11.us/oss/playcap/](http://www.signal11.us/oss/playcap/)）广播到网络地址 192.168.103.255 端口 3000 的 UDP 数据。我在绑定到此地址和端口时遇到问题。这是我的Java代码：

```
public static void main(String[] args) {
    try {
        DatagramSocket s = new DatagramSocket();
        InetSocketAddress address = new InetSocketAddress("192.168.103.255", 3000);
        s.bind(address);

        byte buffer[] = new byte[1024];
        DatagramPacket packet = new DatagramPacket(buffer, buffer.length);

        System.out.println("Waiting...");
        s.receive(packet);
        System.out.println("Received!");

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

这将返回错误：

```
java.net.SocketException: already bound
    at java.net.DatagramSocket.bind(Unknown Source)
    at runner.main(runner.java:12) 
```

我已经运行了命令“netstat -a -n”，并且在输出中的任何地方都没有列出地址 192.168.103.255 和端口 3000，所以我认为这个端口还没有被使用。事实上，对于我尝试的任何地址/端口组合（包括我的静态 IP 地址），我都会收到此错误。

我还编写了一些 C 代码来创建一个套接字并绑定到这个地址和端口，但它在绑定调用时也失败了。但是，此代码将绑定到我的静态 IP 地址 (192.168.1.149) 上的端口。这是代码：

```
#include <stdio.h>
#include <sys/types.h>
#include <winsock.h>
#include <unistd.h>

#define a1 192
#define a2 168
#define a3 103
#define a4 255
#define PORT 3000

int main() {

    /* Open windows connection */
    WSADATA w;
    if (WSAStartup(0x0101, &w) != 0)
    {
        printf("Could not open Windows connection.\n");
        exit(0);
    }

    /* Clear out server struct */
    SOCKADDR_IN server;
    memset((void *)&server, '\0', sizeof(struct sockaddr_in));

    /* Set family and port */
    server.sin_family = AF_INET;
    server.sin_port = htons(PORT);
    server.sin_addr.S_un.S_un_b.s_b1 = (unsigned char)a1;
    server.sin_addr.S_un.S_un_b.s_b2 = (unsigned char)a2;
    server.sin_addr.S_un.S_un_b.s_b3 = (unsigned char)a3;
    server.sin_addr.S_un.S_un_b.s_b4 = (unsigned char)a4;

    /* Open a datagram socket */
    int sd = socket(AF_INET, SOCK_DGRAM, 0);
    if (sd == INVALID_SOCKET)
    {
        printf("Could not create socket.\n");
        WSACleanup();
        exit(0);
    }

    /* Bind address to socket */
    if (bind(sd, (struct sockaddr *)&server, sizeof(SOCKADDR_IN)) == -1)
    {
        printf("Could not bind name to socket.\n");
        closesocket(sd);
        WSACleanup();
        exit(0);
    }

    /* Receive */
    char data[1024];
    printf("Waiting to receive...\n");
    if (recv(sd, (char *)&data, (int)sizeof(data), 0))
    {
        printf("Error receiving data.\n");
        closesocket(sd);
        WSACleanup();
        exit(0);
    }

    printf("Data: %s", data);

    return 0;
} 
```

我正在使用 Windows 7 机器。我在 Eclipse 中运行 Java 代码。我正在使用以下命令用 MinGW 编译 C 代码：

```
gcc a.c -lws2_32 
```

（“ac”是文件名）。

虽然 Java 代码更重要，但我很高兴知道我的代码示例中哪里出错了。任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-26T04:16:19.007

尝试对您的 Java 代码执行此操作：

```
public static void main(String[] args) {
    try {
        DatagramSocket s = new DatagramSocket(null);
        InetSocketAddress address = new InetSocketAddress("192.168.103.255", 3000);
        s.bind(address);

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

为数据报套接字调用无参数构造函数将导致它绑定到一个随机的可用端口。一旦绑定，进一步尝试（重新）绑定将引发套接字异常（您看到的错误）。要“延迟”绑定，您改为创建处于未绑定状态的数据报套接字（通过在构造函数中传递 null），然后`bind`稍后调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T04:10:41.010

您不绑定到广播地址来接收广播数据包。只需绑定到端口和地址`INADDR_ANY`（抱歉，不知道如何用 Java 表达），您将通过广播地址将数据包发送到该端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T04:24:21.460

Datagram 构造函数似乎[采用](http://www.heimetli.ch/udp/UDPServer.html)了要绑定的端口号。希望有帮助...

# python - Programming Collective Intelligence 中的 Pearson 算法仍然无法正常工作

> ID：13558529
> 
> 赞同：3
> 
> 时间：2012-11-26T04:10:18.057
> 
> 标签：python, algorithm, pearson

我运行代码来计算皮尔逊相关系数，并且函数（粘贴在下面）顽固地返回 0。

根据之前关于这个问题的建议（参见下面的#1、#2），我确实确保该函数能够执行浮点计算，但这并没有帮助。我会很感激这方面的一些指导。

```
 from __future__ import division
    from math import sqrt

    def sim_pearson(prefs,p1,p2):
    # Get the list of mutually rated items
       si={}
       for item in prefs[p1]:
          if item in prefs[p2]: si[item]=1

          # Find the number of elements
          n=float(len(si))

          # if they are no ratings in common, return 0
          if n==0: return 0

          # Add up all the preferences
          sum1=float(sum([prefs[p1][it] for it in si]))
          sum2=float(sum([prefs[p2][it] for it in si]))

          # Sum up the squares
          sum1Sq=sum([pow(prefs[p1][it],2) for it in si])
          sum2Sq=sum([pow(prefs[p2][it],2) for it in si])

          # Sum up the products
          pSum=sum([prefs[p1][it]*prefs[p2][it] for it in si])

          # Calculate Pearson score
          num=pSum-(1.0*sum1*sum2/n)
          den=sqrt((sum1Sq-1.0*pow(sum1,2)/n)*(sum2Sq-1.0*pow(sum2,2)/n))
          if den==0: return 0

          r=num/den

          return r 
```

我的数据集：

```
 # A dictionary of movie critics and their ratings of a small
 # set of movies

 critics={'Lisa Rose': {'Lady in the Water': 2.5, 'Snakes on a Plane': 3.5,
       'Just My Luck': 3.0, 'Superman Returns': 3.5, 'You, Me and Dupree': 2.5,
       'The Night Listener': 3.0},
     'Gene Seymour': {'Lady in the Water': 3.0, 'Snakes on a Plane': 3.5,
      'Just My Luck': 1.5, 'Superman Returns': 5.0, 'The Night Listener': 3.0,
      'You, Me and Dupree': 3.5},
     'Michael Phillips': {'Lady in the Water': 2.5, 'Snakes on a Plane': 3.0,
      'Superman Returns': 3.5, 'The Night Listener': 4.0},
     'Claudia Puig': {'Snakes on a Plane': 3.5, 'Just My Luck': 3.0,
      'The Night Listener': 4.5, 'Superman Returns': 4.0,
      'You, Me and Dupree': 2.5},
     'Mick LaSalle': {'Lady in the Water': 3.0, 'Snakes on a Plane': 4.0,
      'Just My Luck': 2.0, 'Superman Returns': 3.0, 'The Night Listener': 3.0,
      'You, Me and Dupree': 2.0},
     'Jack Matthews': {'Lady in the Water': 3.0, 'Snakes on a Plane': 4.0,
      'The Night Listener': 3.0, 'Superman Returns': 5.0, 'You, Me and Dupree': 3.5},
     'Toby': {'Snakes on a Plane':4.5,'You, Me and Dupree':1.0,'Superman Returns':4.0}} 
```

其他类似问题：

*   链接 #1： [“编程集体智能”中的这个 python 函数有什么问题？](https://stackoverflow.com/questions/1423525/what-is-wrong-with-this-python-function-from-programming-collective-intelligenc)

*   链接#2： [《编程集体智能》中的皮尔逊算法有什么问题？](https://stackoverflow.com/questions/1778411/what-is-wrong-with-the-pearson-algorithm-from-programming-collective-intelligen)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:37:41.050

感谢大家在评论中的帮助，我已经确定了问题所在。只是在开玩笑。有很多问题。最后，我注意到 for 循环没有加倍（在第 6 行），它需要加倍。结束前的一个阶段，我疯狂地包围了一切`float`，对不起。无论如何，你想要花车。在此之前，有一个事实是他没有`keys()`为评论家引用，这是他需要的。此外，皮尔逊系数计算不正确，以至于需要数学家来修复它（我有数学学士学位）。现在，他为 Gene Seymour 和 Lisa Rose 测试的示例可以正常工作。无论如何，将其另存为`pearson.py`，或其他内容：

```
from __future__ import division
from math import sqrt

def sim_pearson(prefs,p1,p2):
# Get the list of mutually rated items
   si={}
   for item in prefs[p1].keys():
      for item in prefs[p2].keys():
         if item in prefs[p2].keys():
            si[item]=1

      # Find the number of elements
      n=float(len(si))

      # if they are no ratings in common, return 0
      if n==0:
         print 'n=0'
         return 0

      # Add up all the preferences
      sum1=float(sum([prefs[p1][it] for it in si.keys()]))
      sum2=float(sum([prefs[p2][it] for it in si.keys()]))
      print 'sum1=', sum1, 'sum2=', sum2
      # Sum up the squares
      sum1Sq=float(sum([pow(prefs[p1][it],2) for it in si.keys()]))
      sum2Sq=float(sum([pow(prefs[p2][it],2) for it in si.keys()]))
      print 'sum1s=', sum1Sq, 'sum2s=', sum2Sq
      # Sum up the products
      pSum=float(sum([prefs[p1][it]*prefs[p2][it] for it in si.keys()]))

      # Calculate Pearson score
      num=(pSum/n)-(1.0*sum1*sum2/pow(n,2))
      den=sqrt(((sum1Sq/n)-float(pow(sum1,2))/float(pow(n,2)))*((sum2Sq/n)-float(pow(sum2,2))/float(pow(n,2))))
      if den==0:
         print 'den=0'
         return 0

      r=num/den

      return r

critics={'Lisa Rose': {'Lady in the Water': 2.5, 'Snakes on a Plane': 3.5,
   'Just My Luck': 3.0, 'Superman Returns': 3.5, 'You, Me and Dupree': 2.5,
   'The Night Listener': 3.0},
 'Gene Seymour': {'Lady in the Water': 3.0, 'Snakes on a Plane': 3.5,
  'Just My Luck': 1.5, 'Superman Returns': 5.0, 'The Night Listener': 3.0,
  'You, Me and Dupree': 3.5},
 'Michael Phillips': {'Lady in the Water': 2.5, 'Snakes on a Plane': 3.0,
  'Superman Returns': 3.5, 'The Night Listener': 4.0},
 'Claudia Puig': {'Snakes on a Plane': 3.5, 'Just My Luck': 3.0,
  'The Night Listener': 4.5, 'Superman Returns': 4.0,
                                                                                                                                                             1,1 
```

然后，键入：

```
import pearson
pearson.sim_pearson(pearson.critics, pearson.critics.keys()[1], pearson.critics.keys()[2]) 
```

或者简单地说：

```
import pearson
pearson.sim_pearson(pearson.critics, 'Lisa Rose', 'Gene Seymour') 
```

如果您在使用它时遇到任何问题，请告诉我。我留下了`print`我用来解决它的语句，这样你就可以看到我是如何解决它的，但显然不需要它们。

如果您在本书中遇到任何问题并且无法解决，请在 SO 的帮助下给我发电子邮件：raphael[at]postacle.com，我应该可以回复您。我前段时间也下载了，有点懒；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:46:29.397

@rofls 是对的——

*   For 循环：我*的 for 循环*是个问题。Floats：一些术语需要从int类型转换为float类型。
*   **键**：这是我第一次肯定错过的东西，@rofls 被抓住了。
*   皮尔逊系数：我收紧了皮尔逊系数的分母部分，使其与[维基百科](http://en.wikipedia.org/wiki/Pearson_productmoment_correlation_coefficient)页面上的表达式一致；*它是数学属性*部分下的最后一个表达式。

该代码现在有效。我尝试了不同的输入组合。

```
 from __future__ import division
    from math import sqrt

    def sim_pearson(prefs,p1,p2):
    # Get the list of mutually rated items
       si={}
       for item in prefs[p1].keys():
           if item in prefs[p2].keys():
               print 'item=', item
               si[item]=1

       # Find the number of elements
       n=float(len(si))
       print 'n=', n

       # if they are no ratings in common, return 0
       if n==0:
           print 'n=0'
           return 0

       # Add up all the preferences
       sum1=float(sum([prefs[p1][it] for it in si.keys()]))
       sum2=float(sum([prefs[p2][it] for it in si.keys()]))
       print 'sum1=', sum1, 'sum2=', sum2

       # Sum up the squares
       sum1Sq=float(sum([pow(prefs[p1][it],2) for it in si.keys()]))
       sum2Sq=float(sum([pow(prefs[p2][it],2) for it in si.keys()]))
       print 'sum1s=', sum1Sq, 'sum2s=', sum2Sq

       # Sum up the products
       pSum=float(sum([prefs[p1][it]*prefs[p2][it] for it in si.keys()]))
       print 'pSum=', pSum

       # Calculate Pearson score
       num=(n*pSum)-(1.0*sum1*sum2)
       print 'num=', num
       den1=sqrt((n*sum1Sq)-float(pow(sum1,2)))
       print 'den1=', den1
       den2=sqrt((n*sum2Sq)-float(pow(sum2,2)))
       print 'den2=', den2
       den=1.0*den1*den2

      if den==0:
           print 'den=0'
           return 0

       r=num/den
       return r

    critics={'Lisa Rose': {'Lady in the Water': 2.5, 'Snakes on a Plane': 3.5,
          'Just My Luck': 3.0, 'Superman Returns': 3.5, 'You, Me and Dupree': 2.5,
          'The Night Listener': 3.0},
         'Gene Seymour': {'Lady in the Water': 3.0, 'Snakes on a Plane': 3.5,
          'Just My Luck': 1.5, 'Superman Returns': 5.0, 'The Night Listener': 3.0,
          'You, Me and Dupree': 3.5},
         'Michael Phillips': {'Lady in the Water': 2.5, 'Snakes on a Plane': 3.0,
          'Superman Returns': 3.5, 'The Night Listener': 4.0},
         'Claudia Puig': {'Snakes on a Plane': 3.5, 'Just My Luck': 3.0,
          'The Night Listener': 4.5, 'Superman Returns': 4.0,
          'You, Me and Dupree': 2.5},
         'Mick LaSalle': {'Lady in the Water': 3.0, 'Snakes on a Plane': 4.0,
          'Just My Luck': 2.0, 'Superman Returns': 3.0, 'The Night Listener': 3.0,
          'You, Me and Dupree': 2.0},
         'Jack Matthews': {'Lady in the Water': 3.0, 'Snakes on a Plane': 4.0,
          'The Night Listener': 3.0, 'Superman Returns': 5.0, 'You, Me and Dupree': 3.5},
         'Toby': {'Snakes on a Plane':4.5,'You, Me and Dupree':1.0,'Superman Returns':4.0}}

    # Done 
```

# c++ - 如何从 C++ DLL 导出函数并在 delphi 中使用？

> ID：13558530
> 
> 赞同：3
> 
> 时间：2012-11-26T04:10:17.620
> 
> 标签：c++, delphi, dll

我正在尝试在 C++ 中创建一个 DLL 并导出一个函数。

这是我的 C++ 代码：

```
#include <Windows.h>

void DLLMain(){

}

__declspec(dllexport) void xMain(){
MessageBox(NULL,L"Test",L"Test",NULL);
} 
```

这是我的德尔福代码：

```
program prjTestDllMain;

Uses
  Windows;

Var
  xMainPrc:procedure;stdcall;
  handle : THandle;
begin
    handle := LoadLibrary('xdll.dll');
    if handle <> 0 then
    begin
        MessageBox(0,'DLL Loaded', 0, 0);
        @xMainPrc := GetProcAddress(handle, 'xMain');
        if @xMainPrc <> nil then
            MessageBox(0,'Function Loaded', 0, 0)
        else
          MessageBox(0,'Function Not Loaded', 0, 0);
        MessageBox(0,'Process End', 0, 0);
        FreeLibrary(handle);
    end else
      MessageBox(0,'DLL Not Loaded', 0, 0);
end. 
```

我得到一个“DLL Loaded”的消息框就好了。但之后我得到“未加载功能”。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T04:47:36.127

您可以将它导出为 C 函数 ( `__cdecl`)，以便它在导出表上具有一个好听的名称。

> **名称装饰约定**：下划线字符 (_) 作为名称的前缀，导出使用 C 链接的 __cdecl 函数时除外。

所以基本上，您的函数将`xMain`在导出表中具有名称。

```
extern "C" __declspec(dllexport) void xMain() 
```

在 Delphi 部分，您只需指定`cdecl`并正常调用它：

```
var
  xMainPrc: procedure; cdecl; 
```

例如：

```
if @xMainPrc <> nil then
begin
  MessageBox(0,'Function Loaded', 0, 0);
  xMainPrc;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T22:07:32.497

使用调用约定导出函数`__stcall`（特别是因为您尝试使用`stdcall`Delphi 中的调用约定导入它），并用于`extern "C"`删除任何导出的名称装饰：

**MyDll.h**：

```
#ifndef MyDLLH
#define MyDLLH

#ifdef __BUILDING_DLL
#define MYDLLEXPORT __declspec(dllexport)
#else
#define MYDLLEXPORT __declspec(dllimport)
#endif

#ifdef __cplusplus
extern "C" {
#endif

MYDLLEXPORT void __stdcall xMain();

#ifdef __cplusplus
}
#endif

#endif 
```

.

**MyDll.cpp**：

```
#define __BUILDING_DLL
#include "MyDll.h"

#include <Windows.h>

void DLLMain()
{
}

void __stdcall xMain()
{
    MessageBox(NULL, L"Test", L"Test", NULL);
} 
```

.

**prjTestDllMain.dpr**：

```
program prjTestDllMain;

uses
  Windows;

var
  xMainPrc: procedure; stdcall;
  handle : THandle;
begin
  handle := LoadLibrary('xdll.dll');
  if handle <> 0 then
  begin
    MessageBox(0,'DLL Loaded', 0, 0);
    @xMainPrc := GetProcAddress(handle, 'xMain');
    if @xMainPrc <> nil then
    begin
      MessageBox(0,'Function Loaded', 0, 0)
      xMainPrc();
    end else
      MessageBox(0,'Function Not Loaded', 0, 0);
    MessageBox(0,'Process End', 0, 0);
    FreeLibrary(handle);
  end else
    MessageBox(0,'DLL Not Loaded', 0, 0);
end. 
```

或者：

**prjTestDllMain.dpr**：

```
program prjTestDllMain;

uses
  Windows;

procedure xMain; stdcall; extern 'MyDll.dll';

begin
  MessageBox(0,'DLL Loaded', 0, 0);
  xMain();
  MessageBox(0,'Process End', 0, 0);
end. 
```

# java - 爪哇；初始化对象并传递对象

> ID：13558531
> 
> 赞同：0
> 
> 时间：2012-11-26T04:10:38.597
> 
> 标签：java, initialization

```
Integer[] intArray = new Integer[] {1,2,3,4};
Haha.sort(intArray);

public class Haha<E extends Comparable<? super E>> implements B<E>
{
     private E[] array;

     public Haha()
     {
         array = (E[]) new Comparable[10];
     }

     private Haha( ??? )  
     {
         ???
     }

    public static <T extends Comparable<? super T>> void sort (T[] a)
    {
        Haha(a);
    }
} 
```

我想定义一个私有构造函数静态 sort() 方法可以调用来创建一个用特定给定数组初始化的哈哈对象。

但是它必须在不分配另一个数组的情况下对其参数数组进行排序，因为公共构造函数已经在分配另一个数组。

问题 1) private haha​​ 如何从 sort() 方法中接收 'a'？如果我做

```
private Haha(E[] b)  // gives error because of different type   T & E
{
    // skip    
} 
```

如果我做

```
private Haha(T[] b) // gives error too because Haha is class of Haha<E>
{
   // skip
} 
```

问题2）如何用特定的给定数组初始化对象

```
private Haha( ??? b )  // if  problem 1 is solved
{
     array = b; // is this right way of initializing array, not allocating?
                // It also gives error because sort() is static, but Haha is not.

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:46:37.143

我质疑这个类的整体设计，因为在我看来，任务只是对一个数组进行排序。但是，请注意，静态方法中指定的泛型参数类型与类签名中定义的类型完全不同。您***可以***同时使用：

```
public class Haha<E extends Comparable<? super E>> {
    public static <T extends Comparable<? super T>> void sort (T[] a) {
        // unusual, but can be done
        final Haha<T> haha = new Haha<T>(a);
    }

    private E[] array;

    public Haha() {
        this(new Comparable[10];
    }

    public Haha(final E[] array) {
        super();
        this.array = array;
    }
} 
```

但要使其正常工作，您需要将备用构造函数设为*public*。这是因为您尝试从静态方法访问它，这实际上与尝试从完全不同的类访问它相同。

# c++ - 包含多个图像的 SDL_surface

> ID：13558538
> 
> 赞同：0
> 
> 时间：2012-11-26T04:11:22.473
> 
> 标签：c++, sdl

假设我有一个`SDL_Surface`只是一个图像。如果我想让它`SDL_Surface`拥有该图像的三个副本，一个在另一个之下怎么办？

我想出了这个功能，但它没有显示任何东西：

```
void ElementView::adjust() 
{
    int imageHeight = this->img->h;
    int desiredHeight = 3*imageHeight;

    int repetitions =  desiredHeight / imageHeight ;
    int remainder = desiredHeight % imageHeight ;

    SDL_Surface* newSurf = SDL_CreateRGBSurface(img->flags, img->w, desiredHeight, 32, img->format->Rmask, img->format->Gmask, img->format->Bmask,img->format->Amask);

    SDL_Rect rect;
    memset(&rect, 0, sizeof(SDL_Rect));
    rect.w = this->img->w;
    rect.h = this->img->h;

    for (int i = 0 ; i < repetitions ; i++) 
    {
        rect.y = i*imageHeight;
        SDL_BlitSurface(img,NULL,newSurf,&rect);
    }
    rect.y += remainder;
    SDL_BlitSurface(this->img,NULL,newSurf,&rect);

    if (newSurf != NULL) {
        SDL_FreeSurface(this->img);
        this->img = newSurf;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:00:00.303

我想你应该

*   创建一个比初始曲面长 3 倍的新曲面
*   `img`使用类似于您所拥有的代码 (SDL_BlitSurface)从复制到新表面，除了将目标作为新表面
*   原件上的 SDL_FreeSurface`img`
*   将新表面分配给`img`

**编辑：**这是一些示例代码，虽然没有时间测试它......

```
void adjust(SDL_Surface** img)
{
    SDL_PixelFormat *fmt = (*img)->format;
    SDL_Surface* newSurf = SDL_CreateRGBSurface((*img)->flags, (*img)->w, (*img)->h * 3, fmt->BytesPerPixel * 8, fmt->Rmask, fmt->Gmask, fmt->Bmask, fmt->Amask);

    SDL_Rect rect;
    memset(&rect, 0, sizeof(SDL_Rect));
    rect.w = (*img)->w;
    rect.h = (*img)->h;

    int i = 0;
    for (i ; i < 3; i++) 
    {
        SDL_BlitSurface(*img,NULL,newSurf,&rect);
        rect.y += (*img)->h;
    }

    SDL_FreeSurface(*img);
    *img = newSurf;
} 
```

# jquery - 带有来自 ajax 输出的总行数的 jQuery 数据表页脚

> ID：13558540
> 
> 赞同：8
> 
> 时间：2012-11-26T04:11:50.933
> 
> 标签：jquery, datatables

我正在尝试使用 fnFooterCallback 将列中的金额相加作为总数，我还无法弄清楚的部分是，我需要从 aaData 中获得的该页面的总数。

关于如何使用 ajax 输出在 aaData 中获得的输出显示页脚的任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-03T10:50:39.380

不确定这是否是您正在寻找的，但我试一试。

为了在页脚中显示，将此代码放在`<thead>`和之后`<tbody>`

```
<tfoot>
  <tr>
    <th>Total:</th> 
    <th></th>
  </tr>
</tfoot> 
```

所以它可以显示在页脚中。

然后将其添加到启动中：

```
"fnFooterCallback": function ( nRow, aaData, iStart, iEnd, aiDisplay ) {
    /*
     * Calculate the total market share for all browsers in this table (ie inc. outside
     * the pagination)
     */
    var iTotalMarket = 0;
    for ( var i=0 ; i<aaData.length ; i++ )
    {
        iTotalMarket += aaData[i][1]*1;
    }

    /* Calculate the market share for browsers on this page */
    var iPageMarket = 0;
    for ( var i=iStart ; i<iEnd ; i++ )
    {
        iPageMarket += aaData[ aiDisplay[i] ][1]*1;
    }

    /* Modify the footer row to match what we want */
    var nCells = nRow.getElementsByTagName('th');
    nCells[1].innerHTML = parseInt(iPageMarket);
} 
```

更改`aaData[i][1]`要计算的列中的数字（从 0 开始，而不是从 1 开始）。

注意：如果行中有特殊字符，这将不起作用，需要剪切它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-15T23:07:10.030

此代码也有效，并且更易于使用和理解：

将此添加到您的刀片视图中：

```
<tfoot>
   <tr>
       <th>Total:</th> 
       <th></th>
   </tr>
</tfoot> 
```

th 的数量取决于您的行数。

在你的 js 中添加这个 footerCallback

```
"footerCallback": function ( row, data, start, end, display ) {
                        var api = this.api(), data;

                        var intVal = function ( i ) {
                            return typeof i === 'string' ?
                                i.replace(/[\$,]/g, '')*1 :
                                typeof i === 'number' ?
                                    i : 0;
                        };

                        // This is for the Total text
                        var col0 = api
                            .column( 0 )
                            .data()
                            .reduce( function (a, b) {
                                return intVal(a) + intVal(b);
                            }, 0 ); 
                    //First, please note var name col1 and we use it then
                    var col1 = api
                        .column( 1 )
                        .data()
                        .reduce( function (a, b) {
                            return intVal(a) + intVal(b);
                        }, 0 );

                    $( api.column( 0 ).footer() ).html('Total');
                    // Here you can add the rows
                    $( api.column( 1 ).footer() ).html(col1); 
                    }, 
```

这段代码需要放在之前

```
table.dataTable({ 
```

我希望这有帮助。

# asp.net-mvc-3 - 我需要什么样的路线来提供虚荣网址？

> ID：13558541
> 
> 赞同：1
> 
> 时间：2012-11-26T04:11:57.007
> 
> 标签：asp.net-mvc-3, routes, vanity-url

我想为我的用户提供一个虚荣网址，例如：

```
www.foo.com/sergio 
```

我需要创建什么样的路线？

想象一下，我有以下控制器和操作，如何将虚 URL 映射到该控制器？

```
public ActionResult Profile(string username)
{
    var model = LoadProfile(username);
    return View(model);
} 
```

* * *

这是我尝试过的以及会发生什么：

## 选项 A：

每个 url 都在这条路由中被捕获，这意味着我输入的每个 URL 都将我引导到 Account 控制器，而不仅仅是`foo.com/[USERNAME]`. 不好。

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Profile",
        "{username}",
        new { controller = "Account", action = "Profile", username = UrlParameter.Optional }
    );

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
    );
} 
```

* * *

## 选项 B：

默认路由运行良好，但在尝试访问配置文件时`foo.com/[USERNAME]`出现 HTTP 404 错误。

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
    );

    routes.MapRoute(
        "DentistProfile",
        "{username}",
        new { controller = "Account", action = "Profile", username = UrlParameter.Optional }
    );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:07:49.267

一种解决方案可能是使用自定义路由约束，

```
public class VanityUrlContraint : IRouteConstraint
{
    private static readonly string[] Controllers =
        Assembly.GetExecutingAssembly().GetTypes().Where(x => typeof(IController).IsAssignableFrom(x))
            .Select(x => x.Name.ToLower().Replace("controller", "")).ToArray();

    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values,
                      RouteDirection routeDirection)
    {
        return !Controllers.Contains(values[parameterName].ToString().ToLower());
    }
} 
```

并将其用作

```
 routes.MapRoute(
        name: "Profile",
        url: "{username}",
        defaults: new {controller = "Account", action = "Profile"},
        constraints: new { username = new VanityUrlContraint() }
    );

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    ); 
```

这种方法的缺点是，与现有控制器名称相同的用户名的配置文件视图将不起作用，例如如果有“资产”、“位置”和“资产控制器”等用户名，项目中存在“位置控制器”，“资产”的配置文件视图，“位置”将不起作用。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:09:44.193

你有没有尝试过：

```
routes.MapRoute(
"YourRouteName",
"{username}",
new {controller="YourController", action="Profile", username=UrlParameter.Optional}
); 
```

这应该捕获 www.foo.com/{username}。请记住，路线是按照您添加它们的顺序检查的，因此您可以添加

```
routes.MapRoute(
"default",
"{controller}/{action}/{input}",
new {controller="controller", action="action", input=UrlParameter.Optional}
); 
```

首先要保持“默认”行为。

# jquery - 比较jQuery中的元素ID

> ID：13558546
> 
> 赞同：0
> 
> 时间：2012-11-26T04:12:38.083
> 
> 标签：jquery, html, css

我正在尝试将 jQuery 中的两个元素 ID 与以下代码进行比较。

```
if($("#pic" + i).attr("id") == ($this.attr("id"))) 
```

如果我尝试单独检索 id，我可以，但是当我尝试在 if 语句中比较它们时，它会使我的脚本崩溃，我不知道为什么。

编辑：整段代码。

```
$(document).ready(function() {
    $(".slideshow").click(function() {
        $("#pic0").attr('class', 'a');
        $("#pic6").attr('class', 'a');

        $(this).css('z-index', 1);
        $(".slideshow").animate({
            left: '10px'
        }, 1000);

        for (var i = 1; i < 6; i++) {
            alert($("#pic" + i).attr("id"));
            alert($(this).attr("id"));

            if ($("#pic" + i).attr("id") == ($this.attr("id"))) {
                $("#pic" + i).removeClass("boxShadow");
                alert("Doesn't");
            }
        }

        $("#contenttable").show();
        $("#contenttable").animate({
            width: '1200'
        }, 1000);
        $("#fadecontent").fadeIn(4000);

        $("#pic0").attr('attr', "slideshow");
        $("#pic6").attr('attr', "slideshow");
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T04:19:37.240

您在 if 语句中执行 $this 而不是 $(this) ......得到了该死的 php/jquery

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T04:20:09.297

尝试使用

```
$(this).attr("id") 
```

代替

```
$this.attr("id") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T04:23:27.287

更改您的代码

这

```
 if ($("#pic" + i).attr("id") == ($this.attr("id"))) 
```

到

```
 var pic_id = "pic" + i;
 if (pic_id == (this.id)) 
```

# asp.net-mvc-4 - 没有为 - 带有 UOW 的 ViewModel 定义无参数构造函数

> ID：13558547
> 
> 赞同：1
> 
> 时间：2012-11-26T04:13:04.737
> 
> 标签：asp.net-mvc-4, ninject, viewmodel

我有一个视图模型类，它`UnitOfWork`用于一些数据库操作，如获取项目以创建选择列表和`IPrincipal`一些审计（如修改等）。没有这个 UOW，它就无法工作。我已将我的网站配置为用于`Ninject`将 UOW 注入`Controller`s。在创建视图模型时，我从控制器传递了这个 UOW。但是在执行`POST`操作时我得到

```
No parameterless constructor defined for this object. 
```

我的属性类型很少`SelectList`，我已经用属性排除了`Bind`。

我该如何克服这个问题？我可以配置`Ninject`创建这种类型的对象并`ModelBinder`使用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T04:19:09.760

也许从 DefaultModelBinder 继承并通过 Ninject 解析模型类？

更新：

**NinjectModelBinder.cs**

```
public class NinjectModelBinder : DefaultModelBinder
{
    private readonly StandardKernel _kernel;

    public NinjectModelBinder(StandardKernel kernel)
    {
        _kernel = kernel;
    }

    protected override object CreateModel(ControllerContext controllerContext, 
                              ModelBindingContext bindingContext, Type modelType)
    {
        var model = _kernel.TryGet(modelType);
        if (model != null) return model;
        return base.CreateModel(controllerContext, bindingContext, modelType);
    }
} 
```

**全球.asax.cs**

```
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);

        var kernel = new StandardKernel();
        ModelBinders.Binders.DefaultBinder = new NinjectModelBinder(kernel);
    }
} 
```

# php - 使用 PHP 从 SQL 数据库表中打印值

> ID：13558549
> 
> 赞同：0
> 
> 时间：2012-11-26T04:13:23.700
> 
> 标签：php, mysql, sql

我是 PHP/SQL 的新手，所以如果我说一些明显或完全错误的话，请多多包涵。
我有一个 SQL 表（在数据库中），我需要从表中的不同字段中获取 3 个随机值（姓名、种族、年份），然后使用 php.ini 将其打印在网站上。值要求“种族”将根据单选按钮（比如说 RB1 和 RB2）而有所不同，这一切都必须在

`<input type="submit" name="button">`被点击。

```
<html>  <input type="radio" name="RB1"> Asian  </html> 
```

在这种情况下我能做什么？

示例：因此，如果选择 RB1 并单击按钮，我将需要随机打印一个带有相应“年份”（名称）的“名称”，并且它应该有一个对应的 RB1 种族（即亚洲人）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:53:37.823

我认为这段代码将帮助您理解这一点-

数据库的事情，你必须照顾好......我给你一个处理这类事情的想法。

创建一个 test.php 文件（这是我所做的）

放置此代码 -

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>index</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$("input:radio[name=race]").change(function(){
$.ajax({
type : 'GET',
url : 'getdata.php',
data: {race : $('input:radio[name=race]:checked').val()},
success: function(data){
$('#showdata').html(data);
},
});
});
});
</script>
</head>

<body>

<form action="#" method="post" name="myform">
<input type="radio" name="race" value="RB1" /> Asian
<input type="radio" name="race" value="RB2" /> European 
</form>

<div id="showdata"></div>

</body>
</html> 
```

在 getdata.php 文件中粘贴此内容 -

```
<?php

$myvalue = $_GET['race'];

if( $myvalue == 'RB1')
{
echo "I am RB1";
}
if( $myvalue == 'RB2')
{
echo "I am RB2";
} 
```

现在在浏览器中运行代码（test.php）。

# android - 我可以从服务内的共享首选项中获取数据吗？

> ID：13558550
> 
> 赞同：50
> 
> 时间：2012-11-26T04:13:28.920
> 
> 标签：android, sharedpreferences, android-service, android-2.2-froyo

我正在开发一个安卓应用程序。我正在使用安卓 2.2

在我的应用程序中，我正在捕获 GPS 数据并以 1 小时的时间间隔将其发送到服务。如果用户退出应用程序，它也可以工作（这是必需的）。

我正在使用 2 项服务（用户定义），一项用于捕获 GPS 数据，另一项用于发送到服务器。

这是我的疑问

*   在服务中，我们可以使用共享偏好。

*   如果我们在应用程序的任何活动中将任何数据存储在共享首选项中，我们是否能够在共享首选项的帮助下在服务中使用该数据？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-26T04:31:23.603

您可以通过调用以下方式访问默认的共享首选项实例，该实例在您的所有班级`Activity`和班级之间共享：`Service`[`PreferenceManager.getDefaultSharedPreferences(Context context)`](http://developer.android.com/reference/android/preference/PreferenceManager.html#getDefaultSharedPreferences%28android.content.Context%29)

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this); 
```

这对于存储简单的原语（如布尔值）或可序列化对象非常有用。但是，如果您要捕获大量位置数据，则可以考虑改用 SQLite 数据库。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-28T11:07:54.467

我找到了解决方案。
在服务内部，我们调用以下方法来获取共享首选项

```
myapp.bmodel.getApplicationContext().getSharedPreferences("myPrefs_capture_gps_per_hour", Context.MODE_PRIVATE); 
```

在上面的代码中**myapp**是应用程序类的一个对象，它是从**Application派生的**

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-26T04:22:26.810

您需要一个上下文来访问共享首选项。最好的方法是创建`MyApplication`为`Application`类的后代，在那里实例化 `preferences`并在应用程序的其余部分中使用它们`MyApplication.preferences`：

```
public class MyApplication extends Application {
    public static SharedPreferences preferences;

    @Override
    public void onCreate() {
        super.onCreate();

        preferences = getSharedPreferences( getPackageName() + "_preferences", MODE_PRIVATE); 
```

例如，如果您需要在其他地方访问您的首选项，您可以调用它来读取首选项：

```
String str = MyApplication.preferences.getString( KEY, DEFAULT ); 
```

或者您可以调用它来将某些内容保存到首选项中：

```
MyApplication.preferences.edit().putString( KEY, VALUE ).commit(); 
```

`commit()`（添加或更改首选项后不要忘记调用！）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-26T04:25:58.573

是的 Shivkumar，您可以在任何类型的服务中使用您的共享偏好，就像您在活动中使用的一样。

相似

```
SharedPreferences preferences = getSharedPreferences("<PrefName>",
            MODE_PRIVATE); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-05-08T10:06:05.750

有两种创建实例的方法`SharedPreference`：

情况1：

```
SharedPreferences preferences = activity.getSharedPreferences("<PrefName>", MODE_PRIVATE); 
```

案例二：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this); 
```

请注意，即使您在不同的地方创建具有相同名称（案例 1）或相同上下文（案例 2）的首选项，它仍然是相同的，并且显然可以共享数据。

# c# - 是否可以在屏幕上获取颜色的鼠标坐标？

> ID：13558552
> 
> 赞同：1
> 
> 时间：2012-11-26T04:13:47.467
> 
> 标签：c#, .net

假设在我的计算机显示器（任何应用程序）上某处可见一个橙色圆圈。如何在屏幕上搜索橙色，然后获取该橙色圆圈的鼠标坐标（不必位于圆圈的中心）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T04:22:56.893

您首先需要做一个`ScreenCapture`，请参阅[此线程](https://stackoverflow.com/questions/1163761/c-sharp-capture-screenshot-of-active-window)以获取更多信息。然后，您想阅读生成的图像，请参阅[此线程](https://stackoverflow.com/questions/190385/how-to-manipulate-images-at-pixel-level-in-c)`LockBits`以获取和的建议`GetPixel`。然后，只需将像素值与您要查找的颜色进行比较。然后，您将获得**像素**的 X/Y 坐标，不涉及任何**鼠标。**

# c# - WPF WebBrowser 中的 ProgressChanged

> ID：13558553
> 
> 赞同：0
> 
> 时间：2012-11-26T04:13:52.597
> 
> 标签：c#, wpf, browser, progress-bar

在 WinForm App (C#) 中，当 WebBrowser 加载页面时，要在 ProgressBar 控件中显示进度（加载），我们可以使用以下代码：

```
 private void WebBrowser_ProgressChanged(object sender, WebBrowserProgressChangedEventArgs e)
    {
        WebBrowser wb = (WebBrowser)sender;
        ProgressBar.Maximum = (int)e.MaximumProgress;
        ProgressBar.Value = (int)e.CurrentProgress;
    } 
```

我在 WPF 上试过这个，但它不起作用。似乎 WPF WebBrowser 没有 ProgressChanged 事件。我知道我们可以在 WPF 中使用 WinForm WebBrowser，但我只是想知道 WPF WebBrowser 有没有办法在进度条中显示当前进度（加载页面）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:43:05.433

WPF 控件中没有这样的事件，但是，您可以使用 Loaded Event，或者您可以在 WPF 中托管 windows 窗体控件并获取您想要的任何事件

请参阅[在 WPF 中托管 Windows 窗体控件](http://msdn.microsoft.com/en-us/library/ms751761.aspx)

# java - 循环计算 - Java

> ID：13558555
> 
> 赞同：0
> 
> 时间：2012-11-26T04:14:19.777
> 
> 标签：java, loops

我无法根据客户购买的瓶子数量计算出客户支付的价格。对于购买的任何数量的瓶子，它都会返回 14 美元的价值。请参阅下面的 Java 代码：

```
// PriceCalculator class that calculates the prices for customers
// counter controlled repetition

import java.util.Scanner; // program uses class Scanner

public class PriceCalculator
{
private String beginSale; // name of shop this price is calculated

// constructor initializes beginSale
public PriceCalculator( String name )
{
    beginSale = name; // initializes shopName
} // end constructor

// method to set the shop name
public void setBeginSale (String name )
{
    beginSale = name; // set the welcome address
} // end method setBeginSale

// method to retrieve the welcome address
public String getBeginSale()
{
    return beginSale;
} // end method getBeginSale

// display a welcome message to the shopper
public void displayMessage ()
{
    // getBeginSale gets the thank you address
    System.out.printf( "Welcome to Price Calculator for Purchasing Wines at %s!\n",
        getBeginSale() );
} // end method displayMessage

// determine charges based on 5 customers who shopped
public void calculatePrice()
{
    // create scanner to obtain input from command window
    Scanner input = new Scanner( System.in );

    int basePrice; // base price of a bottle of wine
    String customer; // name of customer
    int gradeCounter; // number of customers to be entered next
    int bottles; // number of bottles purchased
    double discount; // discount value on the number of bottles
    double rate;
    double total; // total costs of wine purchased

    // initialization phase
    basePrice =  10; // initialize base price
    gradeCounter = 1; // initialize loop counter
    bottles = 1; // initialize bottles
    discount = (basePrice * bottles); // initialize discount
    rate = 0;
    customer = null; // initialize customer name

    // processing phase uses counter-controlled repetition
    while ( gradeCounter <= 3 ) // loop 5 times
    {
        System.out.print( "Enter the name for customer " + gradeCounter + " : " ); // prompt
        customer = input.next(); // input next name
        System.out.print( "Enter the number of bottles for customer " + gradeCounter + " : "); // prompt
        bottles = input.nextInt(); // input next bottles sold
        gradeCounter = gradeCounter + 1; // increment counter by 1
        discount = (basePrice * bottles) - (rate * bottles);

        System.out.printf( "\nThe Price for Customer - %s is : $%.2f\n\n",
            customer, discount );
    } // end while loop

    // calculate purchase based on number of bottles sold

    if ( bottles <= 6 )
    {
        discount = (basePrice * bottles) - (rate * bottles); // calculates discount
    }
    else if 
    ( bottles > 6 && bottles<= 12 )
        {
        discount = (basePrice * bottles) - (rate * bottles); // calculates discount
        }
    else if ( bottles > 48 )
        System.out.println ( "It is forbidden to sell above the maximum range");

} // end method calculatePrice
} // end class PriceCalculator 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:05:44.807

改变 || 至 ＆＆

```
if (bottles > 6 || bottles <= 12) // Your code

if (bottles > 6 && bottles <= 12) // changes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T04:20:23.917

您没有更改任何值...首先，您设置折扣的值：

```
discount = (basePrice * bottles); // initialize discount 
```

然后在 while 循环中，它永远不会根据给定的值更新：

```
System.out.printf( "\nThe Price for Customer - %s is : $%.2f\n",
        customer, discount ); 
```

折扣值不应该在 printf 之前的 while 循环内设置吗？:)

或者更清楚地说：

```
 // processing phase uses counter-controlled repetition
while ( gradeCounter <= 3 ) // loop 3 times
{
    System.out.print( "Enter the name for customer 1: " ); // prompt
    customer = input.next(); // input next name
    System.out.print( "Enter the number of bottles for customer 1: "); // prompt
    bottles = input.nextInt(); // input next bottles sold
    gradeCounter = gradeCounter + 1; // increment counter by 1
discount = (basePrice * bottles);
    System.out.printf( "\nThe Price for Customer - %s is : $%.2f\n",
        customer, discount );
} // end while loop 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T04:22:32.587

这很简单; 您正在输入数据的循环中打印价格，因此价格不会改变，并且会一次又一次地打印相同的语句。

只需移动以下语句：

```
System.out.printf( "\nThe Price for Customer - %s is : $%.2f\n", customer, discount );
} // end while loop 
```

发布这一行：

```
System.out.println( "It is forbidden to sell above the maximum range" ); 
```

输出将是：

```
Welcome to Price Calculator for Purchasing Wines at Red Rocky!
Enter the name for customer 1: asdfsa
Enter the number of bottles for customer 1: 3

The Price for Customer - asdfsa is : $42.00
Enter the name for customer 1: gasdfs
Enter the number of bottles for customer 1: 4

The Price for Customer - gasdfs is : $56.00
Enter the name for customer 1: asfasdf
Enter the number of bottles for customer 1: 5

The Price for Customer - asfasdf is : $70.00 
```

您也可以替换此语句

```
System.out.print( "Enter the name for customer 1: " ); 
```

和

```
System.out.print( "Enter the name for customer " + gradeCounter + ":"); 
```

最终代码如下所示：

```
while (gradeCounter <= 3) // loop 3 times
{
    System.out.print("Enter the name for customer 1: "); // prompt
    customer = input.next(); // input next name
    System.out.print("Enter the number of bottles for customer 1: "); // prompt
    bottles = input.nextInt(); // input next bottles sold
    gradeCounter = gradeCounter + 1; // increment counter by 1
// calculate purchase based on number of bottles sold
    if (bottles <= 6) {
        discount = (basePrice * bottles); // calculates discount
    } else if (bottles > 6 || bottles <= 12) {
        discount = discount * 0.05 * bottles * basePrice; // calculates discount
    } else if (bottles > 48)
    System.out.println("It is forbidden to sell above the maximum range");
    System.out.printf("\nThe Price for Customer - %s is : $%.2f\n",customer, discount);
} // end while loop 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T04:17:15.143

你想改变你的

```
if (bottles > 6 || bottles <= 12) 
```

至

```
if (bottles > 6 && bottles <= 12) 
```

# matlab - 用外行的方式解释周期图（或至少以非常简单的方式）

> ID：13558557
> 
> 赞同：0
> 
> 时间：2012-11-26T04:14:38.933
> 
> 标签：matlab, math, statistics

您能否以非常基本和简单的方式向我解释什么是周期图以及它的物理意义？

我正在查看本文档中的数字（[第 5 页](http://www.stat.tamu.edu/~jnewton/stat626/topics/topics/topic4.pdf)）。它与傅里叶变换的幅度图有什么区别？

周期图和频谱图之间有什么关系吗？

我也可以有一个使用matlab的周期图函数的非常简单的例子吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T10:07:55.503

周期图是一种计算信号功率谱密度 (PSD) 的方法。一个简单的周期图涉及将数据划分为多个窗口并计算每个窗口的 PSD，然后取这些单独 PSD 的平均值。为什么？原始 PSD 在统计意义上是一个糟糕的估计（卡方分布？我建议你检查 Bendat & Piersol）。一个简单的周期图解决了这个问题，但不能解决可以通过某些类型的窗口（例如汉宁）修复的频谱泄漏。我只是触及表面......有不同的算法来计算它 - 例如 Welch 和 Blackman-Tukey。

如果您想知道 PSD 到底是什么：

假设您有一个信号 x(t) = (一些噪声分量)*(频率为*f*的正弦波)。该信号的功率谱密度（通常是功率/Hz 与频率，在对数图上）将在频率*f*处具有峰值。它对于识别信号中的频率内容很有用。

Matlab 有一个内置的周期图函数`periodogram`供您参考。

频谱图是频谱密度的时域表示。在某一时刻，信号可能比另一时刻具有更强的频率成分。

# php - 打印出二维数组php

> ID：13558559
> 
> 赞同：0
> 
> 时间：2012-11-26T04:14:56.933
> 
> 标签：php, arrays

我正在尝试从 php 中的 sql 语句的结果中打印出二维数组

到目前为止我有这个代码

```
for ($i=0; $i < count($searchResults); $i++) {
print "<tr>";
print "<td>";
print "$searchResults[$i]['username']";
print "</td>";
print "<td>";
print "<a href=\"viewprofile.php?email=$searchResults[$i]['email'] 
     \">$searchResults[$i]['email']</a>";
print "</td>";
print "</tr>";
  } 
```

但不是打印出数组中的值，而是打印出 $array['username'] 之类的东西，我不想为每个循环使用，因为第二个条件必须是链接任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:22:25.693

您不能按照您的方式在字符串中执行多维数组：

```
print "$searchResults[$i]['username']";
print "<a href=\"viewprofile.php?email=$searchResults[$i]['email'] 
 \">$searchResults[$i]['email']</a>"; 
```

将它们更改为：

```
print $searchResults[$i]['username'];
print "<a href=\"viewprofile.php?email=".$searchResults[$i]['email']." 
 \">".$searchResults[$i]['email']."</a>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:22:39.280

它在解析数组语法时遇到问题。只需去掉双引号

```
print $searchResults[$i]['username'];
print "<a href=\"viewprofile.php?email=" . $searchResults[$i]['email'] .
     "\">" . $searchResults[$i]['email'] . "</a>"; 
```

如果您坚持使用 PHP 解析，请阅读更多关于字符串解析[http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

对于数组语法，您不需要引号，例如

```
print "{$searchResults[$i][username]}"; 
```

（注意“用户名”周围没有引号）。但是不要使用变量，除非你使用那些花括号（再次阅读）。最好只使用 concat

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T04:24:56.087

```
foreach ($searchResults as $result) {
    print "<tr>";
    print "<td>";
    print $result['username'];
    print "</td>";
    print "<td>";
    print "<a href=\"viewprofile.php?email=$result[email] 
         \">$result[email]</a>";
    print "</td>";
   print "</tr>";
} 
```

请注意，在字符串中嵌入数组变量时`" "`，不要单引号转义数组键。（`$result[email]`而不是`$result['email']`）。

# jquery - 打印谷歌地图时出现奇怪的空白

> ID：13558561
> 
> 赞同：0
> 
> 时间：2012-11-26T04:15:13.753
> 
> 标签：jquery, google-maps, google-maps-api-3, twitter-bootstrap

我正在为我自愿参加的当地小联盟重建一个自定义团队资格检查器，虽然它还有很长的路要走，但我正在努力让打印工作。

我承认代码仍然很草率，但一切都正确显示，在屏幕上就是这样。当我实际上去文件->打印时，一个奇怪的水平空白出现在地图下方大约四分之一的位置，如下所示[http://rowast.com/bootstrap/template/map-2.php?type=roster](http://rowast.com/bootstrap/template/map-2.php?type=roster)。

要复制错误，只需单击“Lakewood Village 9-10 All Stars”，然后单击打印图标。

我已经调查了我自己的代码以及谷歌的地图标记，但没有弹出任何信息表明为什么会发生这个错误，尤其是为什么它只在打印时发生。

根据您使用的浏览器，错误发生的方式不同，并且代码在 IE 中根本不起作用。

如果有人知道发生了什么，请提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:11:11.227

它是一个 CSS 问题。

艰难，我完全不了解您的 CSS，但这些课程`.container.map-whole #map.map-map`- 和`.win-firefox .container.map-whole #map.map-map, .mac-firefox .container.map-whole #map.map-map`

有 `height: 1119px !important;`指定的。

当您打开地图的打印页面时，此高度值将被继承，因此，实际地图仅保留在`649px`您提供的高度中，剩余`470px`部分显示为空白区域。

# c# - 如何避免 TypeInitializer 异常？

> ID：13558564
> 
> 赞同：2
> 
> 时间：2012-11-26T04:16:08.513
> 
> 标签：c#, asp.net, webforms, typeinitializeexception

在应用程序中有 2 个页面，CompletePoll.aspx、Default.aspx。

**CompletePoll.aspx --> Page_Load()**

```
 Ultoo u = new Ultoo();
          u.UserName = Request["username"].ToString();
          u.Password = Request["password"].ToString();
          new Thread(u.CompletePoll).Start(); 
```

**完成投票（）**

```
 .......
          .......
          String str = "Question:" + QuestionGenerator.GetNextQuestion(); /*Here i am getting Type initializer exception*/
          .......
          ....... 
```

**问题生成器**

```
 public static class QuestionGenerator
          {
               private static string[] FirstParts = new StreamReader(HttpContext.Current.Server.MapPath("App_Data/QuestionPart1.txt")).ReadToEnd().Split(new string[] { "\r\n" }, StringSplitOptions.RemoveEmptyEntries);
               private static string[] SecondParts = new StreamReader(HttpContext.Current.Server.MapPath("App_Data/QuestionPart2.txt")).ReadToEnd(). Split(new string[] { "\r\n" }, StringSplitOptions.RemoveEmptyEntries);
               private static Random r = new Random();

               public static string GetNextQuestion()
               {
                    return FirstParts[r.Next(0, FirstParts.Length - 1)] + " " + SecondParts[r.Next(0, SecondParts.Length - 1)] + "?";
               }
          } 
```

但是，如果我先调用 Default.aspx，然后调用 CompletePoll.aspx，则代码工作正常。

**Default.aspx --> Page_Load()**

```
 Label1.Text = QuestionGenerator.GetNextQuestion(); 
```

所以这里我的问题是，如果我**首先**访问 CompletePoll.aspx ，我会得到 TypeInitializer 异常。如果我先访问 Default.aspx，然后再访问 CompletePoll.aspx，我不会遇到任何问题。我的代码有什么问题，我错过了什么吗？如何首先访问 CompletePoll.aspx？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:36:52.887

> ```
> private static string[] FirstParts = new StreamReader(HttpContext.Current.Server.MapPath("App_Data/QuestionPart1.txt")).ReadToEnd().Split(new string[] { "\r\n" }, StringSplitOptions.RemoveEmptyEntries); 
> ```

这是不对的。当类型被初始化时，这会检查`HttpContext.Current`一次，保存结果，并且永远不会再次尝试读取它。第一次成功时，never check again 可以是正确的，但第一次将要求`HttpContext.Current`not `null`。如果第一次尝试导致异常，则以后不会重新初始化。您无法确定该类何时被初始化，因此您无法确定`HttpContext.Current`此时是否已设置（如果您从线程调用它则不会）。

此外，这不会调用`StreamReader.Dispose`，因此它将保持阅读器和文件本身处于打开状态，直到垃圾收集器碰巧运行。

一种更安全的方法是

```
private static string[] firstParts; // field

private static string[] FirstParts // property
{
    get
    {
        if (firstParts == null)
        {
            using (var reader = new StreamReader(HttpContext.Current.Server.MapPath("App_Data/QuestionPart1.txt")))
                firstParts = reader.ReadToEnd().Split(new string[] { "\r\n" }, StringSplitOptions.RemoveEmptyEntries);
        }
        return firstParts;
    }
} 
```

这将确保`reader.Dispose()`被调用，将确保在首次访问属性时而不是在初始化类型时读取文件，将确保任何异常实际上以更直接的方式告诉您正在发生的事情，并确保即使`FirstParts`无法设置，其余类型也可用。

但是，它仍然要求您不要`FirstParts`从线程中读取。您可以通过在启动线程之前阅读一次来避免该问题：

```
Ultoo u = new Ultoo();
u.UserName = Request["username"].ToString();
u.Password = Request["password"].ToString();
QuestionGenerator.Initialize(); // from the main thread
new Thread(u.CompletePoll).Start();

public static class QuestionGenerator
{
    public static void Initialize()
    {
        var firstParts = FirstParts;
        var secondParts = SecondParts;
        // merely reading the properties is enough to initialise them, so ignore the results
    }
} 
```

一旦线程启动，在`Initialize()`被调用之后，您就可以`FirstParts`可靠地访问`SecondParts`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:19:47.837

您需要查看内部异常。TypeInitializerException 仅表示从构造函数内部引发了异常。异常将从对 QuestionGenerator.GetNextQuestion() 的调用中包含的代码生成；

# c# - 比较字符串和数组c#

> ID：13558576
> 
> 赞同：7
> 
> 时间：2012-11-26T04:17:41.460
> 
> 标签：c#, .net, arrays, string

`true`如果字符串包含数组的任何元素，我将如何制作一个返回的函数？

像这样的东西：

```
string str = "hi how are you";
string[] words = {"hi", "hey", "hello"}; 
```

会回来`true`的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T04:19:36.047

你可以这样做：

```
var array = new[] {"quick", "brown", "fox"};
var myString = "I love foxes.";
if (array.Any(s => myStr.IndexOf(s) >= 0)) {
    // One of the elements is there
} 
```

这种方法不*要求*元素是一个完整的单词（即上面的片段将返回`true`，即使该单词`"fox"`不是作为单个单词出现在那里）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:22:49.407

您可以拆分字符串并使用`Enumerable.Intersect`. 对于长字符串，它比`Any`+更有效`IndexOf`：

```
var any = words.Intersect(str.Split()).Any(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T04:23:33.803

不需要循环，这里有一个更快的方法：

```
 string [] arr = {"One","Two","Three"};
   var target = "One";
   var results = Array.FindAll(arr, s => s.Equals(target)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T04:32:13.513

我认为您需要检查一个字符串是否包含在其他字符串中（我不知道性能）

```
foreach(string strLine in words)
 {
    if(strLine.Contains(str)) //or str.Contains(strLine)
    {
      return true;
    }
 }
 //return false; 
```

# c++ - 从另一个类中修改对象的 std::vector

> ID：13558578
> 
> 赞同：2
> 
> 时间：2012-11-26T04:17:49.277
> 
> 标签：c++, pass-by-reference

## 介绍：

在我的程序中，一个`group`对象有一个`std::vector`完整的多边形（一个环和孔），一个`polygon`对象有一个`std::vector`点。实际上，这些类更复杂，我在这里将它们剥离以说明我的问题。

## 问题：

我希望能够`point`从其对应的组对象中修改 'sx 和 y 坐标。下面，在 中`group.cpp`，我有一个名为的虚拟函数`void Group::tryChangingAllX()`试图完成此任务。但是，之后调用`show()`该组显示其多边形点的坐标没有变化。

我想我需要使用引用/指针，但我需要朝着正确的方向轻推。

## 点.cpp：

```
#include "point.h"
#include <iostream>
Point::~Point(){}
Point::Point(int x, int y){
    _x = x;
    _y = y;
}
void Point::show(){std::cout << "(" << x() << "," << y() << ")";}
void Point::x(int x){_x = x;}
void Point::y(int y){_y = y;}
int Point::x(){return _x;}
int Point::y(){return _y;} 
```

## 点.h：

```
#ifndef POINT_GUARD
#define POINT_GUARD
class Point{
    int _x;
    int _y;
    public:
        Point(int x, int y);
        ~Point();
        void show();
        int x();
        int y();
        void x(int x);
        void y(int y);  
};
#endif 
```

## 多边形.cpp：

```
#include "polygon.h"
#include "point.h"
#include <iostream>
#include <vector>

Polygon::~Polygon(){}
Polygon::Polygon(){}
std::vector<Point> Polygon::points(){return _points;}
Polygon::Polygon(std::vector<Point> points){_points = points;}
void Polygon::show(){
    std::cout << "Points: ";
    for(std::vector<Point>::size_type i = 0; i != _points.size(); i++) {
        _points[i].show();
    }
} 
```

## 多边形.h：

```
#ifndef POLYGON_GUARD
#define POLYGON_GUARD

#include <vector>
#include "point.h"

class Polygon{
    //private:
    std::vector<Point> _points;
    public:
        ~Polygon();
        Polygon ();
        Polygon(std::vector<Point> points);
        std::vector<Point> points();
        void show();
};
#endif 
```

## 组.cpp：

```
#include <iostream>
#include <vector>
#include "group.h"
#include "polygon.h"
Group::~Group(){}
Group::Group(std::vector<Polygon> polygons){
    _ring = polygons.front();
    polygons.erase(polygons.begin());
    _holes = polygons;
}
void Group::tryChangingAllX(){
    std::vector<Point> points = _ring.points();
    for(std::vector<Point>::size_type i = 0; i != points.size(); i++) {
        points[i].x(15);
    }
}
void Group::show(){
    _ring.show();
    if(_holes.size()>0){
        for(std::vector<Polygon>::size_type i = 0; i != _holes.size(); i++) {
            _holes[i].show();
        }
    }
} 
```

## 组.h：

```
#ifndef GROUP_GUARD
#define GROUP_GUARD

#include <vector>
#include "polygon.h"

class Group{
    Polygon _ring;
    std::vector<Polygon> _holes;
    public:
        ~Group();
        Group(std::vector<Polygon> polygons);
        void show();
        void tryChangingAllX();

};
#endif 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T04:20:42.553

功能

```
std::vector<Point> points(); 
```

**按值**返回，所以当你调用它时，你会得到一个成员的副本。您需要将其更改为

```
std::vector<Point>& points(); 
```

完成此操作后

```
std::vector<Point> points = _ring.points(); 
```

还制作返回值的副本。要引用 中的实际成员`_ring`，请更改为：

```
std::vector<Point>& points = _ring.points(); 
```

那应该这样做。

请注意，您应该通过`std::vector`const 引用传递以防止不必要的复制：

```
Polygon(const std::vector<Point>& points); 
```

并考虑制作不修改类的方法`const`：

```
int x() const; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T04:22:42.767

这正是你的问题——你得到的是你的观点的**副本**，而不是**参考**原始观点本身。

**多边形.cpp：**

**通过引用**而不是值返回点：

```
std::vector<Point>& Polygon::points(){return _points;} // note the '&' in the return 
```

**组.cpp：**

获得对点的**引用**，而不是副本

```
std::vector<Point>& points = _ring.points(); // note the '&' in what you're getting 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T04:30:16.703

Luchian 和 lori 发布的答案在技术上是正确的。但我想指出一些设计注意事项。

返回 a`reference`将允许任何人修改对象`private`的一部分。`Polygon`按照设计，您只希望`Group`类执行此操作。考虑制作`Group`一个`friend`。然后将可以访问. 这将确保整体更紧密的封装。`Polygon``Group``Polygon`

在*多边形.h*

```
friend class Group; 
```

在*group.cpp 中*

```
void Group::tryChangingAllX()
{
    for(std::vector<Point>::size_type i = 0; i != _ring._points.size(); i++)
    {
        _ring._points[i].x(15);
    }
} 
```

# c# - 除了在泛型类中，还有其他方法可以在没有装箱的情况下调用结构的接口方法吗？

> ID：13558579
> 
> 赞同：13
> 
> 时间：2012-11-26T04:18:01.050
> 
> 标签：c#, il

见代码片段

```
public interface I0
{
    void f0();
}
public struct S0:I0
{
    void I0.f0()
    {

    }
}
public class A<E> where E :I0
{
    public E e;
    public void call()
    {
        e.f0();
    }
} 
```

这是 call() 的 IL 代码

```
.maxstack 8
L_0000: ldarg.0 
L_0001: ldflda !0 Temp.A`1<!E>::e
L_0006: constrained !E
L_000c: callvirt instance void Temp.I0::f0()
L_0011: ret 
```

请参阅[受约束的参考](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.constrained.aspx)

> 约束前缀也可以用于调用值类型的接口方法，因为实现接口方法的值类型方法可以使用 MethodImpl 进行更改。如果不使用约束前缀，编译器将被迫在编译时选择绑定到哪个值类型的方法。使用 constrained 前缀允许 MSIL 在运行时而不是在编译时绑定到实现接口方法的方法。

这意味着它将调用一个包含 f0 接口方法代码的方法，而无需对结构进行装箱。

在 C# 中是否存在与上述 GenericClass 一样的其他没有装箱的接口方法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-26T08:17:54.760

这取决于...您特别说您不想要泛型*类*...唯一的其他选择*是非泛型*类中的泛型*方法*。你可以让编译器发出调用的唯一*其他*时间是如果你调用,或(from ) on a ，因为那些是 then - 如果有 an它们将是；如果它*没有*，它们将是。这就是为什么您应该始终使用这 3 个;p 但我离题了。一个简单的例子是具有一些静态方法的实用程序类 -*扩展***`constrained``ToString()``GetHashCode()``Equals()``object``struct``constrained``struct``override``call`*`override``callvirt``override``struct`*方法将是一个理想的示例，因为您还可以获得编译器将在公共/隐式 API 和扩展/显式 API 之间自动切换的优势，而您无需更改代码。例如，以下（显示隐式和显式实现）没有装箱，只有一个`call`和一个`constrained`+ `callvirt`，它将通过`call`JIT 实现：****

 ***```
using System;
interface IFoo
{
    void Bar();
}
struct ExplicitImpl : IFoo
{
    void IFoo.Bar() { Console.WriteLine("ExplicitImpl"); }
}
struct ImplicitImpl : IFoo
{
    public void Bar() {Console.WriteLine("ImplicitImpl");}
}
static class FooExtensions
{
    public static void Bar<T>(this T foo) where T : IFoo
    {
        foo.Bar();
    }
}
static class Program
{
    static void Main()
    {
        var expl = new ExplicitImpl();
        expl.Bar(); // via extension method
        var impl = new ImplicitImpl();
        impl.Bar(); // direct
    }
} 
```

这是 IL 的关键部分：

```
.method private hidebysig static void Main() cil managed
{
    .entrypoint
    .maxstack 1
    .locals init (
        [0] valuetype ExplicitImpl expl,
        [1] valuetype ImplicitImpl impl)
    L_0000: ldloca.s expl
    L_0002: initobj ExplicitImpl
    L_0008: ldloc.0 
    L_0009: call void FooExtensions::Bar<valuetype ExplicitImpl>(!!0)
    L_000e: ldloca.s impl
    L_0010: initobj ImplicitImpl
    L_0016: ldloca.s impl
    L_0018: call instance void ImplicitImpl::Bar()
    L_001d: ret 
}
.method public hidebysig static void Bar<(IFoo) T>(!!T foo) cil managed
{
    .custom instance void [mscorlib]System.Runtime.CompilerServices.ExtensionAttribute::.ctor()
    .maxstack 8
    L_0000: ldarga.s foo
    L_0002: constrained. !!T
    L_0008: callvirt instance void IFoo::Bar()
    L_000d: ret 
} 
```

然而，扩展方法的一个缺点是它在堆栈上做一个额外的副本*（*`struct`参见反正）。如果是这种情况，参数会很有帮助，但请注意*扩展*方法不能有参数 - 所以你不能使用扩展方法来做到这一点。但请考虑：`ldloc.0`*`ref`*`ref this`**

 **```
Bar(ref expl);
Bar(ref impl); 
```

和：

```
static void Bar<T>(ref T foo) where T : IFoo
{
    foo.Bar();
} 
```

这是：

```
L_001d: ldloca.s expl
L_001f: call void Program::Bar<valuetype ExplicitImpl>(!!0&)
L_0024: ldloca.s impl
L_0026: call void Program::Bar<valuetype ImplicitImpl>(!!0&) 
```

和：

```
.method private hidebysig static void Bar<(IFoo) T>(!!T& foo) cil managed
{
    .maxstack 8
    L_0000: ldarg.0 
    L_0001: constrained. !!T
    L_0007: callvirt instance void IFoo::Bar()
    L_000c: ret 
} 
```

仍然没有装箱，但现在我们也从不复制结构，即使是*显式*情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:28:46.633

由于接口被视为引用类型，因此没有办法在接口引用的结构上调用方法，而不必先对底层结构进行装箱。

当使用强制类型的泛型方法来实现接口时，C# 编译器简单地将实际的实现细节和调用约定提升到运行时。幸运的是，C# 编译器足够聪明，可以指示 JIT 编译器，该类型确实实现了接口 X，并且可能是一个结构。有了这些信息，JIT 编译器可以计算出如何调用接口 X 声明的方法 Y。

上述技巧不适用于非泛型方法调用，因为当 X 是非密封类或接口时，JIT 编译器无法确定参数 X 表示的实际类型。因此，如果传递的接口表示的类型是非密封类和处理结构和密封类的直接方法调用，C# 编译器无法生成处理查找表的 JIT。

理论上，当使用动态时，您可以防止装箱，但是引入 DLR 的性能损失可能根本不会产生任何好处。*****

# sql - 使用具有多个值的变量选择行

> ID：13558580
> 
> 赞同：0
> 
> 时间：2012-11-26T04:18:02.470
> 
> 标签：sql, toad

我是新手，我似乎无法在互联网上找到正确的答案，因为有很多方法可以创建 SQL 语句。但基本上，这就是我想要做的。

用户填写表格：

> 名称：名称 1、名称 2、名称 3

如何选择表中名称为“Name1”、“Name2”和“Name3”的行？我知道在 TOAD 中我们可以像这样查询一个值：

```
SELECT * FROM TableName
WHERE Names = ? 
```

如果我想为名称输入多个值，应该如何查询？SQL 可以在数组中搜索单个变量的值吗？

编辑：我在创建帖子时按了 Enter，所以第一个帖子不完整。对不起！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:33:42.010

尝试这样的事情

```
SELECT column_name(s)
FROM table_name
WHERE column_name IN (value1,value2,...) 
```

# c - 我的程序崩溃了，我不明白为什么

> ID：13558582
> 
> 赞同：-1
> 
> 时间：2012-11-26T04:18:10.943
> 
> 标签：c

我正在使用二进制文件处理在 C 中编写一个记录保存程序。我正在使用 Code::Blocks 和 gcc 在 Windows 8 上编译我的 C 程序。

当程序到达以下块时，会出现一条错误消息：

![在此处输入图像描述](../Images/f62562f6a619787b3bdc10279e848032.png)

我的代码：

```
int dispaly(student record[], int count)
{

/*
This is what structure `student` looks like:

 int id;
    char name[200], phone[20], address[200], cclass[50];
    char sec[20], roll[50], guardian_name[200], relation[200] ;
    char p2_colg[100], slc_school[200];
    float plus2_percent, slc_percent;
    struct date dob;
    struct date enr_date;

    struct date looks like
       int day, month, year;
*/
printf("Reached"); /*Program Runs Fine upto here*/
int i = 0;
for(i=0; i<count; i++)
{
    printf("\nId: %d\tPhone: %s\nName: %s\nAddress: %s"
           "\nClass: %s\tSection: %s\nRoll: %s\nGuardian Name: %s\tRelation:%s"
           "\nPlus-Two in: %s\tPercentage:%f\nSLC School: %s\tPercentage: %f"
           "\nDate Of Birth(mm/dd/yyyy): %d/%d/%d"
           "\nEnrolled in (mm/dd/yyyy): %d/%d/%d\n\n---------------------------------------\n", record[i].id, record[i].name, record[i].address
           , record[i].cclass, record[i].sec, record[i].roll, record[i].guardian_name, record[i].relation, record[i].p2_colg
           , record[i].plus2_percent, record[i].slc_school, record[i].slc_percent, record[i].dob.month, record[i].dob.day, record[i].dob.year
           , record[i].enr_date.month, record[i].enr_date.day, record[i].enr_date.year);

}
getch();
return 0;
} 
```

该程序编译没有任何错误或警告。

这是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T04:23:33.237

如果不查看数组中的确切数据，很难准确判断发生了什么崩溃，但是您在 printf 的参数列表中忘记了“电话”，这肯定会导致 printf 内部崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T04:36:21.060

没有一个非常好的理由将所有这些都叠加到一个电话中。如果您将每条线路分成自己的`printf`. `record[i]`此外，如果您捕获到指针，您可以减少冗余。

对比：

```
student * r = &record[i];

printf("\n");

printf("Id: %d\tPhone: %s\n", r->id, r->phone);

printf("Name: %s\n", r->name);

printf("Address: %s\n", r->address);

printf("Class: %s\tSection: %s\n", r->cclass, r->sec);

printf("Roll: %s\n", r->roll);

printf("Guardian Name: %s\tRelation:%s\n", r->guardian_name, r->relation);

printf("Plus-Two in: %s\tPercentage:%f\n", r->p2_colg, r->plus2_percent);

printf("SLC School: %s\tPercentage: %f\n", r->slc_school, r->slc_percent);

printf("Date Of Birth(mm/dd/yyyy): %d/%d/%d\n",
       r->dob.month, r->dob.day, r->dob.year);

printf("Enrolled in (mm/dd/yyyy): %d/%d/%d\n"
       r->enr_date.month, r->enr_date.day, r->enr_date.year);

printf("\n");

printf("---------------------------------------\n"); 
```

从技术上讲，多次调用`printf`会产生*一些*函数调用开销。并且为数组中的当前学生声明一个指针变量会产生*一些*存储空间。但它基本上可以忽略不计，在这种情况下没有任何意义。在引擎盖下，无论如何都会缓冲输出。

# jquery - 将html元素从一个视图遍历到另一个视图

> ID：13558587
> 
> 赞同：0
> 
> 时间：2012-11-26T04:18:49.633
> 
> 标签：jquery, jquery-selectors

```
$('#addstflgnlink').live('click', function (e) {
    e.preventDefault();
    $.ajax({
        url: this.href,
        type: "get",
        success: function (fk) {
            $('#stflgn').append(fk);
            alert(fk);
            //            alert($('#tmpcount').val());
        },
        error: function () {
            alert("error");
        }

    });
}); 
```

这里 fk 是 ajax 调用返回的部分视图。我想在部分视图 fk 中获取#tmpcount。我怎么能在jquery中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:23:51.577

```
$('#addstflgnlink').live('click', function (e) {
    e.preventDefault();
    $.ajax({
        url: this.href,
        type: "get",
        success: function (fk) {
            var tmpcount = $(fk).find('#tmpcount');//assuming tmpcount is the id of an element
            $('#stflgn').append(tmpcount);
            alert(fk);
            //            alert(tmpcount.val());
        },
        error: function () {
            alert("error");
        }

    });
}); 
```

# ms-access-2007 - Access 2007 - 报告中的下拉框

> ID：13558588
> 
> 赞同：0
> 
> 时间：2012-11-26T04:19:01.073
> 
> 标签：ms-access-2007

我需要创建一个下拉框，以便员工可以在报告的“RE：”字段中选择预设原因。只有两个选项需要在框中：“个人事件”和“缺乏足够的通知”。

报告本身已经生成，并且有许多字段链接回数据库 - 名称、地址、特定日期等已经在报告中。我已经想出了如何在表单中使用组合框功能制作下拉框，但是有什么方法可以将组合框合并到报表中？

顺便说一句，我是初学者，所以我仍在弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:28:02.173

目前您的报告位于查询中（查询从表中获取相关数据）

要遵循的步骤：-

1.  通过添加包含您刚才提到的两个选项的列来更改表格

2.  将组合框添加到表单，其中项目作为两个选项

3.  调整您的查询以使用这些选项作为更改查询返回的结果的条件

4.  如您现在所显示的那样在报告中显示结果。

如果您已经有代码，请发布该代码段。因此，我们可以为您提供相应的帮助。

一些[参考供您获得想法](http://www.fontstuff.com/access/acctut19.htm)

**但我有一个疑问，您是否想说您想根据在 COMBOBOX 中选择的用户选择在两个报告之间切换？**

# c - 为什么 pthread_yield() 在大的 for 循环中不能很好地工作？

> ID：13558594
> 
> 赞同：0
> 
> 时间：2012-11-26T04:19:45.140
> 
> 标签：c, linux, pthreads

我有两个线程，一个是接受 TCP 连接并处理请求，一旦处理完成，它会将 DELETE 标志标记为树中的记录。另一个线程基本上在这棵树上执行 gc，如果设置了 DELETE 标志，则在遍历树和删除节点的大 for 循环中。在每个交互中，我都有一个 pthread_yield() 只是为了防止这个 gc 线程使用过多的 CPU；

现在的问题是，当这棵树很大时，gc线程占用过多的CPU，进而导致TCP线程的select()和epol.wait(0)返回时间过长，即使已经有连接等待.

现在，如果我将大 for 循环拆分为较小的循环，以使 gc 每次从上次运行时的左侧开始，CPU 占用问题似乎不再发生。

这是为什么？

我可以使用任何 API 以编程方式记录/监视线程切换统计信息吗？linux 盒子上没有 valgrind 或 gcc 编译器。

# c++ - OpenGL - 用击键暂停动画

> ID：13558603
> 
> 赞同：0
> 
> 时间：2012-11-26T04:20:41.763
> 
> 标签：c++, opengl

我需要无限期地暂停整个动画，直到用户再次按下相同的键。我使用 usleep 有一个粗略的暂停：

```
#include <unistd.h>

...

if(key == 'p')
    usleep(200000); 
```

理想情况下，我希望时间是无限的，直到再次按下 p （并且以毫秒为单位进行睡眠测量，所以它不是很有用）有人可以指出我如何做到这一点的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T04:25:32.610

```
static bool paused = false;
if(key == 'p')
  paused = !paused;

// Somewhere in your main loop.
if(!paused)
  Render(); 
```

您可能还想尝试检查是否按下键*而*不是按下键，否则您会非常快速地暂停和恢复。

# asp.net-mvc - ASP.NET MVC：参数字典包含参数的空条目

> ID：13558605
> 
> 赞同：0
> 
> 时间：2012-11-26T04:21:30.713
> 
> 标签：asp.net-mvc, parameters, model-binding, elmah

我在客户端计算机上部署的网站上遇到错误。起初，根据我对问题的回答，我认为这是由 Windows 身份验证和多个错误提供程序引起[的](https://stackoverflow.com/questions/7613196/ajax-post-request-only-works-once-in-safari-5/10328567#10328567)。但是我添加了[Elmah](http://code.google.com/p/elmah/)来登录客户端并注意到一个模式....

控制器签名是：

```
public ActionResult Class(int subjectId, int classGroupId) 
```

elmah 日志中列出了失败的请求：

```
HTTP_REFERER - https://someUrl.com/Results/Class/4372/16202 
```

但是路径信息只有一个参数。

```
PATH_INFO - /Results/Class/4372/ 
```

错误信息是

> System.ArgumentException 参数字典包含“MyNamespace.Controllers.ResultsController”中方法“System.Web.Mvc.ActionResult Class(Int32, Int32)”的不可为空类型“System.Int32”的参数“subjectId”的空条目. 可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

所以在某个地方我丢失了一个参数。奇怪的是错误消息说缺少第一个参数而不是第二个参数。

我为此操作设置了一条路线：

```
 routes.MapRoute(
     "ClassResults", // Route name
     "{controller}/{action}/{subjectId}/{classGroupId}", // URL with parameters
     new { controller = "Results", action = "Class" } // Parameter defaults
 ); 
```

我该如何调试这个错误，我应该看什么来确定问题是什么？

# javascript - 在eclipse中导入一个javascript项目

> ID：13558610
> 
> 赞同：6
> 
> 时间：2012-11-26T04:22:10.843
> 
> 标签：javascript, eclipse

我想知道是否可以将我的 javascript 库分离到不同的 eclipse 项目中，然后将它们导入另一个动态 web 项目中，就像我通常对常规 java 子项目所做的那样？

这个答案：[Link JavaScript project with Java project in Eclipse](https://stackoverflow.com/questions/9085880/link-javascript-project-with-java-project-in-eclipse) 是我想做的，但是我不太喜欢这个答案......我宁愿链接到工作区项目，而不是直接依赖 FileSystem 。

似乎 JSDT（[http://www.eclipse.org/webtools/jsdt/](http://www.eclipse.org/webtools/jsdt/)）“将 JavaScript 项目类型和透视图添加到 Eclipse 工作台”但是如何在您的 java 项目中使用/导入/链接这些 JS 项目？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:14:32.333

从相关的属性页将其添加到您的 Web 项目的 JavaScript 包含路径：

![项目“JS”的 JavaScript/包含路径属性页](../Images/451b6134ab117b5bc414a373615ccd33.png)

# r - ggplot2图中的主题元素

> ID：13558619
> 
> 赞同：1
> 
> 时间：2012-11-26T04:22:56.217
> 
> 标签：r, ggplot2, legend

我正在尝试调整 ggplot2 图中的一些主题元素。我对这个多层图的三个问题/目标是（数据代码如下）：

1.  为所有八年创建一个 x 轴刻度标记标签，即 2004-2011。我不想要一个'xlab'。
2.  从“受感染的茎”图例 b/c 中删除两个实心点，这些“geom_bars”不应该有与之关联的点 (???)。
3.  将线/点图例的图例标题更改为“SOD-dead Stems”。

我的代码对你们中的许多人来说可能是多余的，所以请随时在任何地方提供建议，例如只有一个图例。我是 ggplot 的新手（喜欢它），但到目前为止“尺度”有问题....

* * *

我的图形代码：

```
##### BUILD UP DATAFRAME:
quag.infect= c(31, 52, 58, 74, 76, 85, 99, 102)
quke.infect= c(10, 13, 17, 20, 23, 27, 28, 27)
qusp.hosts = (rep(c("QUAG", "QUKE"), each=8))
year = rep(2004:2011, 2)
quag.dead = c(NA, 4,  11, 19, 33, 38, 48, 49)
quke.dead = c(NA,  1,  1,  1,  2,  3,  7,  8)

my.df = data.frame(Species=qusp.hosts, Year=year, 
Inf.ct = c(quag.infect, quke.infect), Sod.Dead=c(quag.dead, quke.dead))

##### Establish grey colors for bars:
grays = c(QUAG="gray50", QUKE="gray66")

##### Make multi-layered graphic:
library(ggplot2)
plot_x = ggplot(my.df, aes(Year, Inf.ct, fill=Species)) +
  geom_bar(stat="identity", position="dodge") +
  ylab(expression("Number of stems (dbh">="1-cm)", sep="")) +
  xlab("") +          
  scale_fill_manual(values=grays, "Infected Stems", labels = c("Black Oak", "Coast Live           Oak")) +
  geom_line(aes(y=Sod.Dead, linetype=Species)) +
  geom_point(aes(y=Sod.Dead, shape=Species)) 
plot_x 
```

* * *

谢谢，莎拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:29:53.337

你不远了。

对于第 1 点：代替`xlab`，使用`scale_x_continuous`，设置`breaks`，并指定一个空标题。

对于第 2 点：`fill = Species`从全局`aes`函数移出到`aes`函数 for `geom_bar`。

对于第 3 点：更改`scale_shape`和`scale_linetype`函数中的图例标题，确保相同的标题进入两者。

对 ggplot 的代码进行这些更改：

```
plot_x = ggplot(my.df, aes(Year, Inf.ct)) +
  geom_bar(aes(fill=Species), stat="identity", position="dodge") +
  ylab(expression("Number of stems (dbh">="1-cm)", sep="")) +
  scale_x_continuous("", breaks = seq(2004, 2011, 1)) +
  scale_fill_manual(values=grays, "Infected Stems", labels = c("Black Oak", "Coast Live Oak")) +
  geom_line(aes(y=Sod.Dead, linetype=Species)) +
  geom_point(aes(y=Sod.Dead, shape=Species)) +
  scale_shape("SOD-dead Stems") +
  scale_linetype("SOD-dead Stems")
plot_x 
```

给出以下情节：

![在此处输入图像描述](../Images/22c35f0d6a86c581449daf020b9b83df.png)

# linq - 组合 Linq + "RangeVariables" + TPL + DynamicTableEntity 时出现编译器错误

> ID：13558621
> 
> 赞同：0
> 
> 时间：2012-11-26T04:22:57.427
> 
> 标签：linq, asynchronous, azure, task-parallel-library, azure-storage

我正在查看 Microsoft 提供的示例[“完成时处理任务”](http://code.msdn.microsoft.com/windowsdesktop/Samples-for-Parallel-b4b76364)并将该 TPL 示例调整为 Azure 存储。

我遇到的问题在下面标记了变量`domainData`在编译器中报告错误的位置：（`Unknown method Select(?) of TableQuerySegment<DynamicTableEntity>` 已删除完全限定的命名空间）

我也收到以下错误`DynamicTableEntity domainData \n\r Unknown type of variable domainData`

```
 /// if you have the necessary references the following most likely should compile and give you same error

            CloudStorageAccount acct = CloudStorageAccount.DevelopmentStorageAccount;

            CloudTableClient client = acct.CreateCloudTableClient();
            CloudTable tableSymmetricKeys = client.GetTableReference("SymmetricKeys5");

            TableContinuationToken token = new TableContinuationToken() { };
            TableRequestOptions opt = new TableRequestOptions() { };
            OperationContext ctx = new OperationContext() { ClientRequestID = "ID" };
            CancellationToken cancelToken = new CancellationToken();

            List<Task> taskList = new List<Task>();

            var task2 = tableSymmetricKeys.CreateIfNotExistsAsync(cancelToken);
            task2.Wait(cancelToken);

            int depth = 3;
            while (true)
            {
                Task<TableQuerySegment<DynamicTableEntity>> task3 = tableSymmetricKeys.ExecuteQuerySegmentedAsync(query, token, opt, ctx, cancelToken);

                // Run the method
                task3.Wait();

                 Console.WriteLine("Records retrieved in this attempt = " + task3.Result.Count());// + " | Total records retrieved = " + state.TotalEntitiesRetrieved);

        // HELP! This is where I'm doing something the compiler doesn't like
        //
                IEnumerable<Task<int>> getTrustDataQuery =
                              from domainData in task3.Result select QueryPartnerForData(domainData, "yea, search for this.", client, cancelToken);

                // Prepare for next iteration or quit
                if (token == null)
                {
                    break;
                }
                else
                {
                    token = task3.Result.ContinuationToken;

                    // todo: persist token  token.WriteXml()
                }
            }

    //....

  private static object QueryPartnerForData(DynamicTableEntity domainData, string p, CloudTableClient client, CancellationToken cancelToken)
    {
        throw new NotImplementedException();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:45:44.963

您的代码缺少查询。为了测试代码，我创建了以下查询：

```
TableQuery<DynamicTableEntity> query = new TableQuery<DynamicTableEntity>()
    .Where(TableQuery.GenerateFilterCondition("PartitionKey", QueryComparisons.Equal, "temp")); 
```

我还添加了`QueryPartnerForData`不执行任何操作的方法（仅返回 null）并且一切正常。所以也许这是`QueryPartnerForData`方法的问题？找到实际错误的最佳方法是在这里和那里设置断点。

StackOverflowException 通常意味着您陷入了无限循环。通过断点运行几次，看看你的代码卡在哪里。会不会是`QueryPartnerForData`调用了另一个方法，而另一个方法又调用`QueryPartnerForData`了？

# ios - 从 iOS 和 JSON 解析调用 ASP.NET webmethod

> ID：13558629
> 
> 赞同：1
> 
> 时间：2012-11-26T04:24:19.100
> 
> 标签：ios, ajax, web-services, nsurlconnection, webmethod

我有一个`.aspx`文件，里面有一些网络方法。我想从 iOS (iPhone) 应用程序中使用这些方法。web方法代码如下：

```
[WebMethod]
public static string Login(string username, string password) 
{
    return username + ":" + password;
} 
```

为了测试这个网络方法，我使用了：

```
$.ajax({
    type: "POST",
    url: "DataProvider.aspx/Login",
    data: JSON.stringify({ username: "myUserName", password: "myPassword" }),
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (result) { alert(result.d); },
    error: function (xhr, ajaxOptions, thrownError) {
        alert(xhr.status);
        alert(thrownError);
    }
}); 
```

所以一切都检查完了，我`"myUserName:myPassword"`回来了，现在我想从 xcode 4.5.2 内部做同样的事情，所以我创建了一个新的 iPhone 应用程序，并在 ViewController 中放置一个`label`(lbResult) 和一个`button`(btDoLogin) 并分配出口和动作.

请注意，我对异步或委托不感兴趣，我只想返回数据并能够解析它（JSON）。

很抱歉对细节如此具体，但我看到了很多类似的问题，但没有一个答案对我有用。对于我所读到的内容，我的理解是可以使用 NSURLConnection 来解决这个问题。例如这个问题[Passing parameters to a JSON web service in Objective C](https://stackoverflow.com/questions/9968042/passing-parameters-to-a-json-web-service-in-objective-c)和我需要的非常相似，但是我得到的是整个页面！（意味着它正在下载整个页面而不是调用 web 方法）另外，我需要传递 2 个参数并且问题只使用 1（我不明白如何在连接的字符串中将它们分开）。

现在，我究竟需要在 IBAction 内部做什么才能连接到这个特定的 webmethod 并获取返回值？

```
- (IBAction)btDoLogin:(id)sender {
    // magic code goes here!
} 
```

谢谢。-

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T05:45:15.227

事实证明，问题是`how to pass the parameters in a JSON format`，而不是正常的连接字符串。这是完整的代码：

```
- (IBAction)btSend:(id)sender {
    NSError *errorReturned = nil;
    NSString *urlString = @"http://192.168.1.180:8080/DataProvider.aspx/DoLogin";
    NSURL *url = [NSURL URLWithString:urlString];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod: @"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    [dict setObject:@"myUsername" forKey:@"username"];
    [dict setObject:@"myPassword" forKey:@"password"];
    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dict options:kNilOptions     error:&errorReturned];
    [request setValue:[NSString stringWithFormat:@"%d", [jsonData length]] forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody: jsonData];

    NSURLResponse *theResponse =[[NSURLResponse alloc]init];
    NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&theResponse error:&errorReturned];
    if (errorReturned)
    {
        //...handle the error
    }
    else
    {
        NSString *retVal = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
        NSLog(@"%@", retVal);
        //...do something with the returned value        
    }
} 
```

希望这对其他人有帮助

# php - yii cgridview 排序不起作用

> ID：13558634
> 
> 赞同：1
> 
> 时间：2012-11-26T04:25:09.090
> 
> 标签：php, sorting, yii

![在此处输入图像描述](../Images/60429a2aa1406c985299eab9062b31ab.png)

这是我的网格视图。当我单击“电子邮件”标题时，标题旁边有一个箭头。但是gridview不会重新加载来对数据进行排序。
那么，什么是问题？我怎样才能找到它？
谢谢...

==================================================== =====

这是我的看法：

```
<?php $this->widget('zii.widgets.grid.CGridView', array(

            'id' => 'users-grid',

            'dataProvider' => $model->search(),
            'afterAjaxUpdate' => 'function(id, data) { var regex = data.match("data-counter=\"(.*)\""); $("#countUser").text(regex[1]); }',
            'filter' => $model,
            'template'=>'{items}<div class="nav-controller">{pager}</div>',
            'columns' => array(
                array(
                    'class' => 'CCheckBoxColumn',
                    'selectableRows' => '2',
                ),
                array(
                    'htmlOptions' => array('width'=>10),
                    'header' => 'No.',
                    'value' => '$this->grid->dataProvider->pagination->currentPage * $this->grid->dataProvider->pagination->pageSize + ($row+1)',
                ),
                array(
                    'name' => 'full_name',
                    'value' => '$data->first_name . \' \' . $data->last_name',
                ),
                'email',
                array(

                    'name' => 'gender',

                    'value' => '($data->gender == 1) ? Yii::t(\'app\', \'Male\') : Yii::t(\'app\', \'Female\')',

                    'filter' => array('1' => Yii::t('app', 'Male'), '0' => Yii::t('app', 'Female')),

                ),
                array(
                    'name' => 'birthday',
                    'filter' => $this->widget('zii.widgets.jui.CJuiDatePicker', array(
                        'model'=>$model, 
                        'attribute'=>'birthday', 
                        'language' => 'en',
                        'i18nScriptFile' => 'jquery.ui.datepicker-ja.js', // (#2)
                        'htmlOptions' => array(
                            'id' => 'datepicker_for_birthday',
                            'size' => '10',
                        ),
                        'defaultOptions' => array(  // (#3)
                            'showOn' => 'focus', 
                            'dateFormat' => 'yy-mm-dd',
                            'showOtherMonths' => true,
                            'selectOtherMonths' => true,
                            'changeMonth' => true,
                            'changeYear' => true,
                            'showButtonPanel' => true,
                        )
                    ), 
                    true), // (#4)
                ),
                'home_town',

                array(
                    'header' => 'Action',
                    'class' => 'CButtonColumn',
                ),

            ),

        )); 

        ?> 
```

这是我的控制器：

```
$model = new Users('search');

        $model->unsetAttributes();

        $this->render('index', array(

            'model' => $model,

        )); 
```

这是我的搜索代码：

```
public function search() {

        $criteria = new CDbCriteria;
        $criteria->compare('id', $this->id);
        $criteria->compare('first_name', $this->first_name, true);
        $criteria->compare('last_name', $this->last_name, true);
        $criteria->compare('CONCAT(first_name, \' \', last_name)', $this->full_name, true);
        $criteria->compare('username', $this->username, true);
    $criteria->compare('email', $this->email, true);    
        $criteria->compare('avatar', $this->avatar, true);
        $criteria->compare('home_town', $this->home_town, true);
        $criteria->compare('birthday', $this->birthday, true);
        $criteria->compare('gender', $this->gender);
        $criteria->compare('about_me', $this->about_me, true);
        $criteria->compare('password', $this->password, true);
        $criteria->compare('log_as', $this->log_as);
        $criteria->compare('token', $this->token, true);
        $criteria->compare('token_device', $this->token_device, true);
        $criteria->compare('notification_setting', $this->notification_setting, true);
        $criteria->compare('total_streams', $this->total_streams);
        $criteria->compare('total_punches', $this->total_punches);
        $criteria->compare('total_likes', $this->total_likes);
        $criteria->compare('status', $this->status);
        $criteria->compare('role_id', $this->role_id);
        $criteria->compare('long', $this->long);
        $criteria->compare('lat', $this->lat);
        $criteria->compare('social_id', $this->social_id);
        $criteria->compare('created_at', $this->created_at, true);
        $criteria->compare('updated_at', $this->updated_at, true);
        $criteria->addSearchCondition('concat(first_name, " ", last_name)', $this->full_name); 
        $criteria->addCondition(array('condition'=>'role_id = 0'));
        ///$criteria->condition = "role_id != 1";
        $criteria->order = 'username';

        $sort = new CSort();
        $sort->attributes = array(
            'full_name'=>array(
                'asc'=>'first_name ASC',
                'desc'=>'first_name DESC',
            ),
            '*', // this adds all of the other columns as sortable
        );

        return new CActiveDataProvider($this, array(

            'criteria' => $criteria,

            'sort' => $sort,

        ));

    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T08:35:03.763

您的问题似乎是搜索功能中的 $criteria->order = 'username' 行。这表明结果应该如何排序。

如果你把它更新为 $criteria->order = Yii::app()->request->getParam('sort'); （可能有一些验证和默认值“用户名”）那么你应该没问题。

# c++ - 为什么当向量中的数字被复制到我的文件时，这不会反转它们？

> ID：13558640
> 
> 赞同：1
> 
> 时间：2012-11-26T04:25:47.680
> 
> 标签：c++

该程序运行完美，我的向量的数字最终出现在我的文件中，但它们并没有反转。

```
#include <iostream>
#include <vector>
#include <fstream>
using namespace std;

void reversevector(vector<double> &vd, int i, int j)
{
    if(i>=j) {
        double temp = vd[i];
        vd[i]=vd[j];
        vd[j]=temp;
        i++;
        j--;
    }
}
int main() {
    double n = 0;
    vector<double> vd;
    while (cin>>n) {
        vd.push_back(n);
    }

    reversevector(vd,0,vd.size()-1);

    ofstream ofs("reversedlist.txt");

    if(!ofs) {
        cout<<"error";
        exit(1);
    }

    for(int i=0; i<vd.size(); i++){
        ofs<<vd[i];
    }

    ofs.close();
} 
```

例如：如果我将 12345 放入我的向量中，它应该将 54321 打印到我的文件中。当我打开我的文件时，它仍然包含 12345。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T04:28:13.470

线

```
if (i >= j) 
```

在`reversevector`函数中应该是

```
while (i < j) 
```

否则，您有条件地交换第一个和最后一个数字，然后立即退出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T04:29:11.600

你调用你的方法，说：

```
reversevector( {1,2,3,4,5} , 0, 4 ) 
```

然后进入

```
if (0>=4) {
  ...
 } 
```

然后退出该方法 - 没有任何反应。

当然，**如果您调试过**.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T04:28:38.703

反向向量中没有循环。它将运行一次然后退出。您需要遍历数组并替换它才能工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T04:28:25.283

您的`reversevector`函数最多交换两个元素。您必须交换两个以上的元素才能反转向量。由于`if`无论如何都将是错误的测试条件，它实际上根本不会做任何事情。

# iphone - 切换视图后 UIImageView 在屏幕上浮动

> ID：13558641
> 
> 赞同：0
> 
> 时间：2012-11-26T04:25:54.730
> 
> 标签：iphone, ios, animation, uiview, ios6

我正在尝试制作指南针。

基本上，我使用指南针的图像作为指南针的方向。在我切换视图或添加另一个视图（例如 UIActionView 或切换到另一个视图控制器）之前，它在指南针的中心周围动画效果很好：

```
 - (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading{

            float oldRadian = (-manager.heading.trueHeading *M_PI /180.0f);
            float newRadian = (-newHeading.trueHeading *M_PI /180.0f);

            CABasicAnimation *animation;
            animation=[CABasicAnimation animationWithKeyPath:@"transform.rotation"];
            animation.fromValue = [NSNumber numberWithFloat:oldRadian];
            animation.toValue = [NSNumber numberWithFloat:newRadian];
            animation.duration = 0.5f;

            [compassArrow.layer addAnimation:animation forKey:@"animateMyRotation"];
            compassArrow.transform = CGAffineTransformMakeRotation(newRadian);
} 
```

在此之后，我将切换到另一个视图控制器，即 compassArrow 图像视图，它正在动画并开始浮动。

**任何想法为什么会发生这种情况？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:13:12.120

将指南针箭头中心设置为您的指南针中心

```
compassArrow.center = CompassImage.center; 
```

希望这对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T04:48:39.790

为`compassArrow`imageView 设置锚点。这样它就会根据锚点旋转。

采用 `compassArrow.layer.anchorPoint = CGPointMake(0.5, 0.5);`

希望我能帮助你......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:19:00.633

首先获取您的图像视图框架。为此，您可以输入`NSLog(@"%f %f %f %f", compassArrow.frame.origin.x,compassArrow.frame.origin.y,compassArrow.frame.size.width,compassArrow.frame.size.height);`viewDidLoad。记下框架。然后在 viewWillAppear 方法中，添加该行。

```
-(void)viewWillAppear:(BOOL)animated{

   [super viewWillAppear:YES];
   [compassArrow setFrame:CGRectMake(CMPASSARROWFRAME.x, CMPASSARROWFRAME.y, CMPASSARROWFRAME.width, CMPASSARROWFRAME.height)];
} 
```

请注意，此“CMPASSARROWFRAME”是您的框架的`compassArrow`框架。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T09:36:23.667

请检查切换前后的框架，看看它们是否相同。如果它们不一样，则意味着您在某处设置了错误的框架。如果切换视图前后的框架相同，则问题出在图层转换。您可能已经更改了锚点或图层位置。

找出更新的位置，使用断点，遵循控制流并跟踪框架更新的位置。您可以在 xcode 中的调试控制台上方找到进入按钮。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T07:18:41.097

在更改视图之前，我使用 removeFromSuperlayer 方法解决了它。问题是我为同一个键（@“animateMyRotation”）创建了多个动画。

```
[compassArrow.layer removeFromSuperlayer]; 
```

# extjs - 如何在 ext js 中禁用组合框

> ID：13558645
> 
> 赞同：1
> 
> 时间：2012-11-26T04:26:15.160
> 
> 标签：extjs, extjs3

我有具有国家和州列的网格。此网格数据使用组合框添加。添加数据后，我想完全禁用网格中的组合框

**这是我禁用组合框的代码**

```
gridRegionsRoweditor.on('beforeedit', function(roweditor, rowIndex){
            var  record = this.gridRegions.store.getAt(rowIndex);

            if(typeof record.data.ROWDATE != 'undefined'){
               grdcmbCountry.setDisabled(true);
               grdcmbState.setDisabled(true);
               return false;
            }else{
               grdcmbCountry.setDisabled(false);
               grdcmbState.setDisabled(false);
            }
      },this); 
```

以上解决方案对我来说并不完美。当我双击查看不清楚组合框的组合框之一时。如何避免这个不清楚的组合框形成网格？（当我禁用想要看起来像标签的组合框时）。是否可以针对我的问题删除这些单元格中的双击事件？

![在此处输入图像描述](../Images/f19af30f7becde1b90421759d42b4db0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T07:09:17.043

使用此功能并检查

```
setDisabled(true/false); 
```

或者检查[这个](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.ComboBox-method-processRawValue)链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-13T05:41:58.897

在 extjs 中禁用组合使用

```
grdcmbState.setDisabled(true); 
```

上面的代码对我有用

# objective-c - 如何从辅助进程加载笔尖？

> ID：13558651
> 
> 赞同：1
> 
> 时间：2012-11-26T04:27:07.167
> 
> 标签：objective-c, macos, cocoa

我有一个由 NSTask 生成的进程，它需要显示一个窗口。我一开始只是手工编写所有的 UI 代码，但这已经成为一种痛苦。

所以，我用 xib 创建了一个新类，`MyWindowController`. 我想在辅助进程中加载​​这个控制器的一个实例，并让所有的 IBOutlets 和其他不能正常工作的东西。

这是我到目前为止所得到的：

```
// Get the bundle for the main application (not the subprocess).The executable lives in Contents/Helpers, so look two dirs up from its path for the main app bundle root.
NSArray *executablePathComponents = [[[NSBundle mainBundle] executableURL] pathComponents];
NSIndexSet *indexOfEveryComponentExceptLastTwo = [NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, [executablePathComponents count] - 2)];
NSBundle *myBundle = [NSBundle bundleWithURL:[NSURL fileURLWithPathComponents:[executablePathComponents objectsAtIndexes:indexOfEveryComponentExceptLastTwo]]];

// Load the controller nib.
NSNib *windowControllerNib = [[NSNib alloc] initWithNibNamed:@"MyWindowController" bundle:myBundle];
MyWindowController *windowController = [[MyWindowController alloc] init];
NSArray *topLevelObjects = nil;
[windowControllerNib instantiateNibWithOwner:windowController topLevelObjects:topLevelObjects]; 
```

这给了我一个窗口控制器的实例，它从屏幕上的笔尖显示窗口，所以这似乎工作。但是，`instantiateNibWithOwner:topLevelObjects`不推荐使用instantiateNibWithOwner:topLevelObjects。

使用不推荐使用的方法会导致异常：“-`[NSNib instantiateWithOwner:topLevelObjects:]:`无法识别的选择器发送到实例 0x10291ab1”

至少我不想使用不推荐使用的方法。但也许有更好的方法来处理整个事情？

# python - 如何在 Python 中使用 Google Drive API 创建新文件夹？

> ID：13558653
> 
> 赞同：6
> 
> 时间：2012-11-26T04:27:16.667
> 
> 标签：python, google-drive-api

从[这个例子](https://developers.google.com/drive/v2/reference/files/insert)。我可以使用 MediafileUpload 创建文件夹吗？我怎样才能得到parent_id？

来自[https://developers.google.com/drive/folder](https://developers.google.com/drive/folder)

我只知道我应该使用 mime = "application/vnd.google-apps.folder" 但是如何实现本教程以使用 Python 进行编程？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-12T13:16:22.683

要在云端硬盘上创建文件夹，请尝试：

```
 def createRemoteFolder(self, folderName, parentID = None):
        # Create a folder on Drive, returns the newely created folders ID
        body = {
          'title': folderName,
          'mimeType': "application/vnd.google-apps.folder"
        }
        if parentID:
            body['parents'] = [{'id': parentID}]
        root_folder = drive_service.files().insert(body = body).execute()
        return root_folder['id'] 
```

如果您想在另一个文件夹中创建文件夹，您只需要一个父 ID，否则不要为此传递任何值。

如果您需要父 ID，则需要编写一个方法来在该位置搜索具有该父名称的文件夹（执行 list() 调用），然后获取该文件夹的 ID。

* * *

**编辑：**请注意，API 的 v3 使用“父母”字段的列表，而不是字典。此外，`'title'`字段更改为`'name'`，`insert()`方法更改为`create()`。对于 v3，上面的代码将更改为以下代码：

```
 def createRemoteFolder(self, folderName, parentID = None):
        # Create a folder on Drive, returns the newely created folders ID
        body = {
          'name': folderName,
          'mimeType': "application/vnd.google-apps.folder"
        }
        if parentID:
            body['parents'] = [parentID]
        root_folder = drive_service.files().create(body = body).execute()
        return root_folder['id'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T10:52:24.833

仅当您要插入内容时才需要媒体文件上传。由于您只想插入元数据（文件夹只是元数据），因此您不需要它。带有代表 foder 的 JSON 的常规 POST 就足够了。

您可以通过多种方式获取父 ID：

*   搜索（file.list 端点）
*   插入文件夹：这将返回一个 JSON 表示插入的文件夹，包含其 ID
*   通过 Web UI 自己获取（ID 包含在您的文件夹或文件的 URL 中）：转到 Web UI，选择您想要的文件夹或文件，然后您可以在 URL 中识别 fileId。ex ：`https://drive.google.com/#folders/0B8VrsrGIcVbrRDVxMXFWVkdfejQ`
    文件 ID 是 URL 的最后一部分，即。`0B8VrsrGIcVbrRDVxMXFWVkdfejQ`

* * *

**如何以编程方式获取 FileID：**

1.  使用 children.list 端点使用已知的 fileId 来获取此已知 ID 的孩子的 id。
2.  使用 google drive 的搜索功能：带 aq 参数的 files.list 端点
3.  使用别名：我在 Google Drive 中知道的唯一一个是`root`您 Drive 的根文件夹。

使用 3\. 和 1.，您可以获得 Drive 的所有 fileId。

我不知道我怎样才能更清楚

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-03T09:01:31.133

```
def create_folder(header, folder_name, folder_id, drive_id=None):
    url = 'https://www.googleapis.com/upload/drive/v3/files'

    file_metadata = {
        'name': folder_name,
        'mimeType': 'application/vnd.google-apps.folder',
        'parents': [folder_id]
    }
    file_withmetadata = {"data": ("metadata", json.dumps(file_metadata), "application/json; charset=UTF-8")}

    param = {"q":"'%s' in parents" %folder_id, "supportsAllDrives":"true"}
    if drive_id is not None:
        param['driveId'] = drive_id

    r = requests.post(
        url,
        headers=header,
        params=param,
        files=file_withmetadata
    )

    return json.loads(r.text) 
```

# mysql - 基于 WHERE 的带有额外手动输出的 MySQL 查询

> ID：13558655
> 
> 赞同：0
> 
> 时间：2012-11-26T04:27:32.067
> 
> 标签：mysql, sql

也许这是一个愚蠢的问题，但想象一下有一个包含以下字段的表格：

```
wholename, lastname, firstname, dateOfBirth 
```

现在我想根据用户输入搜索该表，但我想为结果提供匹配百分比。意义：

如果 lastname + firstname + dateOfBirth 都在数据库中找到 matchPrct = 100。如果 lastname + dataofBirth 在数据库中找到 matchPrct = 80。还有一些其他规则（换句话说，字段 matchPrct 是一个自动生成的字段，它不是真的在分贝中）。

我想要实现的 SQL 是：

```
SELECT * FROM table 
WHERE firstname="%mike%" AND lastname="%tysson%" AND dateOfBirth="01/01/2012"
(create matchPrct=100) OR .... 
```

希望我的意思很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:40:16.397

LIKE 是一个返回布尔值的运算符，`=`行为类似。MySQL 中的布尔值是 1 表示真，0 表示假。这意味着你可以这样说：

```
select *,
      ((firstname like '%mike%') + (lastname like '%tysson%') + (dateOfBirth = '01/01/2012')) / 3.0 as score
from table
where firstname like '%mike%'
   or lastname like '%tysson%'
   or dateOfBirth = '01/01/2012' 
```

然后从`score`. 您还可以对每个组件应用单独的权重，以便姓氏匹配比名字匹配更重要。

在不使用 1 和 0 作为布尔值的数据库中，您可以转换它们或使用 CASE 将布尔值转换为您想要的数字。这当然不适用于 MySQL，但值得牢记。

# php - 通过实现 Iterator 的对象一次迭代 2 个项目的优雅方式

> ID：13558657
> 
> 赞同：1
> 
> 时间：2012-11-26T04:27:41.880
> 
> 标签：php, phpquery

我`phpQuery`用来解析一些`HTML`与此结构类似的：

```
<div>
    <span>Name</span>
    <span>John</span>
    <span>Age</span>
    <span>23</span>
    <span>Location</span>
    <span>London</span>
</div> 
```

我需要将所有这些信息收集到一个关联数组中，所以我正在做这样的事情：

```
$doc = new phpQuery($html);
foreach($doc['div span'] as $span){
    $text = pq($span)->text();
    // do some other stuff with $text
} 
```

请注意`$doc`和`$doc['div span']`是`phpQueryObject`实现`Iterator`和`Countable`的s `ArrayAccess`。

现在，为了关联这些数据，我不得不使用一个变量来存储当前状态（标题或值），这不是很优雅。我想做的是能够一次迭代 2 个项目。`foreach`我发现的一个解决方案是使用将所有项目添加到数组来遍历所有对象，然后在该数组上使用`next()`or`each()`以在 while 循环中一次获取 2 个项目，但这一点都不好。请记住，在对象上使用`next()`或我只是得到它的公共属性，这根本不是我想要的。有没有办法做到这一点并有一个很好的代码？`each()``phpQuery`

* * *

注意：虽然这个问题与 相关`phpQuery`，但我认为这是一个笼统的`php`问题，不涉及`phpQuery`知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:33:01.213

如问题所述，`phpQuery`实现`Iterator`.

所以我想说这可能是你可以做你想做的最干净的方式：

```
$doc = new phpQuery($html);
$elements = $doc['div span'];

foreach($elements as $span){
    $key = pq($span)->text();
    $elements->next();
    $value = pq($elements->current())->text();
} 
```

# sql - 如何使用 sys.dm_fts_parser 拆分逗号（或任何定界符）分隔的字符串？

> ID：13558659
> 
> 赞同：1
> 
> 时间：2012-11-26T04:28:02.907
> 
> 标签：sql, sql-server-2008

好吧，对于给定的输入，例如

```
Name    MobileNumber
Name1   1111111111,22222222222,3333333333,4444444444
Name2   5555555555,6666666666 
```

并获得表格的输出

```
Name    splitdata
Name1   1111111111
Name1   22222222222
Name1   3333333333
Name1   4444444444
Name2   5555555555
Name2   6666666666 
```

有[很多方法](http://www.dotnetfunda.com/codes/code1797-split-function-in-sql-server-using-set-base-approach.aspx) 可以完成，例如

```
Declare @t Table (Name Varchar(10),MobileNumber Varchar(50))
Insert Into @t Values
('Name1','1111111111,22222222222,3333333333,4444444444'),
('Name2','5555555555,6666666666')

select F1.Name, 
 O.splitdata 
 from
 (
 select *,
 cast('<X>'+replace(F.MobileNumber,',','</X><X>')+'</X>' as XML) as xmlfilter
 from @t F
 )F1
 cross apply
 ( 
 select fdata.D.value('.','varchar(50)') as splitdata 
 from f1.xmlfilter.nodes('X') as fdata(D)) O 
```

但是，我刚刚遇到[sys.dm_fts_parser](http://technet.microsoft.com/en-us/library/cc280463.aspx)并想使用它来实现相同但失败了。我的尝试

```
SELECT Name,display_term
 FROM @t
CROSS APPLY sys.dm_fts_parser('"' + MobileNumber + '"', 1033, 0,0) 
```

有人可以帮我这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:59:40.030

解决了。

```
where display_term NOT LIKE 'nn%' 
```

完整查询

```
SELECT Name,display_term
FROM @t
CROSS APPLY sys.dm_fts_parser('"' + MobileNumber + '"', 1033, 0,0)
where display_term NOT LIKE 'nn%' 
```

# ruby-on-rails - 自定义操作未使用带有 remote=true 的 link_to 触发

> ID：13558666
> 
> 赞同：0
> 
> 时间：2012-11-26T04:28:39.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

对 ruby​​ on rails 非常陌生，并试图让我的第一个 ajax 调用正常工作。它正在进行 ajax 调用，但它总是调用 #index 操作并且似乎忽略了 URL 参数。这是代码：

```
class UserController < ApplicationController
def flag
    logger.debug "in flag user"
    respond_to do |format|
      format.js { render :layout=>false }
    end
  end
end 
```

在我的 routes.db 中：

```
resources :users do
    member do
      post 'flag'
      get 'flag'
    end
  end 
```

然后在我看来，我创建了这样的链接：

```
<%= link_to "Flag User", :url => flag_user_path(user.id), :method => :get, :remote => true %> 
```

HTML 源代码是：

```
<a href="/users?method=get&amp;url=%2Fusers%2F1%2Fflag" data-remote="true">Flag User</a> 
```

rake 路线产生这个：

```
flag_user  POST   /users/:id/flag(.:format)   users#flag
           GET    /users/:id/flag(.:format)   users#flag 
```

每当我单击链接时，都会执行 user#index 方法。如何让 user#flag 方法执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:20:46.400

问题在于您如何定义路线。应该是这样的

```
resources :users do
  post 'flag'
  get 'flag', on: :member
end 
```

检查导轨以了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T02:33:33.743

问题是 :url 符号。我变了：

```
<%= link_to "Flag User", :url => flag_user_path(user.id), :method => :get, :remote => true %> 
```

到：

```
<%= link_to "Flag User", flag_user_path(user.id), :method => :get, :remote => true %> 
```

and everything works was expected. I was incorrectly using it like link_to_remote which requires the :url symbol. Thanks everyone for their input.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:39:52.700

如果您运行 rake 路由，我想您会看到使用名称“flag_user_path”创建的路由需要“post”而不是“get”

# java - 如何在android中将list.java添加到main.java中

> ID：13558667
> 
> 赞同：0
> 
> 时间：2012-11-26T04:28:40.270
> 
> 标签：java, android, xml, android-intent

我正在开发 android 媒体播放器。在 main.java 它包含 main.xml 和 list.java 包含
list.xml ，我使用意图调用 list.java （当我按下 imagebutton 时）进入 main.java ，但是当我按下 imagebutton list.xml 出现新窗口我想要显示在 main.xml 的底部

在 main.java 图像按钮调用 list.java 到 main.java

```
songslist_button.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        Intent i = new Intent(main.this, list.class);
        Toast.makeText(main.this, "Song List", Toast.LENGTH_SHORT).show();

        startActivityForResult(i, 100); 
        //Intent i = new Intent(main.this, list.class);
        //startActivity(i);
    }
});

/////////////////////////

public class list extends ListActivity 
{
    // Songs list
    public ArrayList<HashMap<String, String>> songsLists = new ArrayList<HashMap<String, String>>();

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list);//list.xml

        ArrayList<HashMap<String, String>> songsListData = new ArrayList<HashMap<String, String>>();

        SongList plm = new SongList();
        // get all songs from sdcard
        this.songsLists = plm.getPlayList();

        // looping through playlist
        for (int i = 0; i < songsLists.size(); i++)
        {
            // creating new HashMap
            HashMap<String, String> song = songsLists.get(i);

            // adding HashList to ArrayList
            songsListData.add(song);
        }

        // Adding menuItems to ListView
        ListAdapter adapter = new SimpleAdapter(this, songsListData,
        R.layout.song_item, new String[] { "songTitle" }, new int[] {R.id.song_title });

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();
        //lv = (ListView) findViewById (R.layout.list);

        // listening to single listitem click
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,int position, long id) 
            {
                // getting listitem index
                int songIndex = position;

                // Starting new intent
                Intent in = new Intent(getApplicationContext(),main.class);
                // Sending songIndex to PlayerActivity
                in.putExtra("songIndex", songIndex);
                setResult(100, in);
                // Closing PlayListView
                finish();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:53:56.360

您的 main.java 类是一项活动吗？您的列表甚至是一项活动，因此您开始了一项新活动，该活动将显示在新窗口中。我认为你需要另一种方法来做到这一点。首先阅读本教程：

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

[http://windrealm.org/tutorials/android/android-listview.php](http://windrealm.org/tutorials/android/android-listview.php)

一种可能的做法是将简单的 listView 集成到您的 main.xml 布局中并隐藏此视图，直到按下按钮。

## 编辑

例如：

```
 <ListView android:layout_width="fill_parent"   
      android:layout_height="fill_parent"   
      android:id="@+id/mainListView">  
    </ListView> 
```

将其放入您的 main.xml 中，可能位于您的按钮下方。然后您可以在 main.java 中引用列表视图：

```
 mainListView = (ListView) findViewById( R.id.mainListView ); 
```

但是还有很多工作要做，所以我建议您阅读教程以清楚地了解如何构建 listView。

# android - Android kSOAP2 SSL 自签名证书“ 未满足安全要求 - 消息中没有安全标头”

> ID：13558670
> 
> 赞同：4
> 
> 时间：2012-11-26T04:29:01.767
> 
> 标签：android, ssl, ksoap2, certificate, self-signed

连接到 SSL WebServices Apache Tomcat 时出现问题，Java SE 客户端连接正常，但 Android 客户端不想连接并显示以下错误之一：1.“未满足安全要求 - 消息中没有安全标头”， 2\. “Java.lang.RuntimeException: java.lang.RuntimeException: error: 0407006A: rsa routines: RSA_padding_check_PKCS1_type_1: block type is not 01 (SHA-1) . “要连接，我描述如下代码：

```
private SSLSocketFactory getSSLSocketFactory() throws KeyStoreException, NoSuchAlgorithmException, KeyManagementException {
    KeyStore trusted = KeyStore.getInstance("PKCS12");
    InputStream in = activity.getResources().openRawResource(R.raw.client_keystore);
    try {
        trusted.load(in, "blablabla".toCharArray());
    } catch (CertificateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally {
        try {
            in.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    TrustManagerFactory tmf = TrustManagerFactory.getInstance("X509");
    tmf.init(trusted);
    SSLContext context = SSLContext.getInstance("SSLv3");
    context.init(null, tmf.getTrustManagers(), null);
    return context.getSocketFactory();
}

public String SendRecieveMessage(String xmlData, String nameXML, String methodName, String methodAction) {

    HttpsTransportSE httpTransport = new KeepAliveHttpsTransportSE("hostname", 8443, "/blablabla/blablabla?wsdl", 1000);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    SoapObject request = new SoapObject(activity.getResources().getString(R.string.SOAP_NAMESPACE), methodName); // set
    // request
    Log.e("Sending SOAP", xmlData);
    String base64 = base64Coder.encodeString(xmlData);
    request.addProperty(nameXML, base64); 
    envelope.setOutputSoapObject(request); // prepare request
    try {
        ((HttpsServiceConnectionSE) httpTransport.getServiceConnection()).setSSLSocketFactory(getSSLSocketFactory());
    } catch (KeyManagementException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (KeyStoreException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (NoSuchAlgorithmException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    SoapPrimitive result = null;
    try {
        httpTransport.call(methodAction, envelope);
        result = (SoapPrimitive) envelope.getResponse(); // get
        if (result != null) {
            base64 = base64Coder.decodeString(result.toString());
        } else {
            base64 = null;
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        Log.e("ERROR", "SOAPSendRecieve: " + e.getMessage());
        base64 = null;
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        Log.e("ERROR", "SOAPSendRecieve: " + e.getMessage());
        base64 = null;
    } catch (IllegalArgumentException e) {
        Log.e("ERROR", "SOAPSendRecieve: " + e.getMessage());
        base64 = null;
        }
    } finally {
        request = null;
        result = null;
    }
    return base64;
} 
```

由 blablabla.jks 中的服务器转换为 blablabla.pfx（PKCS #12），我尝试使用两个程序：“KeyStore Explorer”和“Portecle”，还尝试了“BKS”格式，结果相同，SSL kSOAP2 中描述官方网站上的例子，可能是什么问题，是因为错误或客户端可能是服务器设置有问题而导致的错误？

示例请求和响应转储： ![在此处输入图像描述](../Images/663634b3a2bb3c50f48c957d06287557.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:10:00.513

问题解决，服务器部署了库WSIT，需要保护Security Header，即“User”和“Password”，一个SOAP消息，由于我没有指定这些参数，服务器我没有连接给出的描述在邮件标题谢谢大家的帮助。

# ember.js - 如何设置 Ember View 类以附加到特定容器？

> ID：13558672
> 
> 赞同：0
> 
> 时间：2012-11-26T04:29:17.450
> 
> 标签：ember.js

`Ember.View`有一个很好的方法`.appendTo("#container")`，它允许我为视图指定一个容器 div。但是，当我使用路由器时`.connectOutlet method`，我的视图实例会根据约定自动创建，并默认添加到页面*正文*元素中。有没有办法配置视图的类定义，以便在创建时它将在我想要`#container`的 . 这是我的看法：

```
Jimux.BuildsView = Em.View.extend({
  templateName: 'builds',
  appendTo: '#jimux-header', #this was just a guess and did not work. but does some propery like this exist for the view?
  tagName: 'div',
  listVisible: true,
  ... 
```

问这个问题的另一种方法是：我如何告诉 Ember 路由器将视图附加到 dom 中的特定项目？默认情况下，路由器将视图附加到*body*。

这是路由器位：

```
# Connect builds controller to builds view
router.get('applicationController').connectOutlet("builds","builds", Jimux.buildsController) 
```

澄清一下，我不想把我的整个 Ember 应用程序放在一个容器中。我的应用程序中有几个视图，其中大部分都可以直接在正文中使用。但是有一对像这个问题中提到的那样，我想把它们放在`"#application-header"`div 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:32:30.173

您可以为应用程序对象指定根元素。

```
window.App = Ember.Application.create({
    rootElement: '#ember-app'
}); 
```

编辑：

重新阅读您的问题后，我认为您应该查看命名的网点，以便您可以执行以下操作：

```
<div id="application-header">
    {{outlet builds}}
</div>

{{outlet}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:56:52.590

好吧..在理解你的问题后，我记得有同样的麻烦。此外，即使在浏览了 Ember 代码之后，我也没有找到任何方法来做到这一点。但后来我明白这只是为了好的目的。我知道您可能已经遇到过我们可以实现这一目标的车把。如果我们给视图添加一个 ID，我们就限制了应用程序，整个使用 ember 变得毫无用处。好的，来问你问题，据我所知，我们可以在 HTML 的 div 元素中添加小胡子模板。

```
<div id="jimux-header">
{{view Jimux.BuildsView}}
</div> 
```

这样我们就可以在任何你想要的地方和尽可能多的地方使用 Jimux.BuildsView。Ember之美，你不得不说...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T04:31:33.997

只需添加`rootElement`应用程序对象。

```
var App = Ember.Application.create({
    rootElement: '#container'
}); 
```

# android - JellyBean 4.2 中的某些 AccessibilityEvent 未触发

> ID：13558685
> 
> 赞同：1
> 
> 时间：2012-11-26T04:31:28.770
> 
> 标签：android, accessibility

我正在编写一个专门为盲人和视力受损者设计的应用程序，并且我试图覆盖`TextView`特定`AccessibilityEvent`被触发时的行为。屏幕布局由 4 个`TextView`垂直排列的屏幕组成。我只想改变背景的颜色以反映哪个是“聚焦”的，所以在我的自定义中`TextView`我有这个方法

```
 @Override
    public boolean dispatchPopulateAccessibilityEvent(AccessibilityEvent event) {

        System.out.println(event.toString());

        if (event.getEventType() == AccessibilityEvent.TYPE_VIEW_HOVER_ENTER ||
                event.getEventType() == AccessibilityEvent.TYPE_VIEW_ACCESSIBILITY_FOCUSED) {
            this.setBackgroundColor(mColorArray[2]);
        }

        if (event.getEventType() == AccessibilityEvent.TYPE_VIEW_HOVER_EXIT ||
                event.getEventType() == AccessibilityEvent.TYPE_VIEW_ACCESSIBILITY_FOCUS_CLEARED) {
            this.setBackgroundColor(mColorArray[0]);
        }

        return super.dispatchPopulateAccessibilityEvent(event);         
    } 
```

我的问题是`AccessibilityEvent.TYPE_VIEW_ACCESSIBILITY_FOCUS_CLEARED`永远不会被解雇。其他三个在使用 ExploreByTouch 或向上/向下左右滑动时正确触发。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:46:09.483

[如果我理解正确，此链接](https://stackoverflow.com/questions/12019848/accessibilityservice-is-started-but-does-not-receive-accessibilityevents-on-jell)中接受的答案 可能会解决您的问题。请注意，如果您将目标 sdk 设置为 17，则需要执行一些额外的类似步骤，如链接评论中所述。

好吧，我可能读得太快了，奇怪的是有些人被解雇了，有些人没有。

# sql-server-2008 - 通配符不起作用？

> ID：13558687
> 
> 赞同：0
> 
> 时间：2012-11-26T04:31:30.930
> 
> 标签：sql-server-2008

```
SELECT _cotM.Customer_ID, _cotM.Material_ID
FROM dbo.COT_Monthly AS cot 
INNER JOIN
dbo.vw_Dim_Material AS matr ON cot.Material_ID = matr.Material_ID  
GROUP BY _cotM.Customer_ID, _cotM.Material_ID 
```

我有 sql 代码，结果为 25855 行

但是当我`where matr.Brand <> '%VIT%'`通过结果添加上组时仍然是 25855 行。

但是当我删除通配符时`where matr.Brand <> 'VIT'`，结果变成了 25089。

我徘徊为什么会这样？

使用通配符还是我错了？

谢谢回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T04:33:56.307

通配符仅适用于[`LIKE`从句](http://msdn.microsoft.com/en-us/library/ms179859.aspx)，因此请更改条件：

```
WHERE matr.Brand NOT LIKE '%VIT%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:36:09.387

正如**马特**所说使用`where matr.Brand not like '%VIT%'`，阅读更多关于[通配符的信息](http://www.w3schools.com/sql/sql_wildcards.asp)

# google-app-engine - Google App Engine 日志 - ms 和 cpu_ms

> ID：13558691
> 
> 赞同：1
> 
> 时间：2012-11-26T04:31:44.883
> 
> 标签：google-app-engine

> **可能重复：**
> [GAE 日志字段中时间值的确切含义是什么？](https://stackoverflow.com/questions/5945538/what-are-the-exact-meaning-of-time-values-in-gae-log-fields)

Google App Engine 的日志显示了两个不同的执行时间“ms”和“cpu_ms”。

他们俩有什么不同？

如何解释以下日志条目的应用程序执行行为？

```
a - ms=2443 cpu_ms=539
b - ms=8105 cpu_ms=14779 
```

# java - 数据库连接句柄问题

> ID：13558695
> 
> 赞同：4
> 
> 时间：2012-11-26T04:32:18.377
> 
> 标签：java, database-connection, google-search-appliance

我目前正在使用 Google Search Appliance (GSA) 进行数据库抓取测试，并构建了一个用于处理数据库查询和内容的连接器。

GSA 有一个爬取间隔，这意味着它会重复爬取数据库以进行更新。所以我的问题是：

*   每次 GSA 抓取数据库时，我应该创建一个连接并关闭它吗？（爬取率非常高，这意味着连接会被重复创建和关闭很多）。

*   还是我应该只创建一个连接并让它保持为每次爬网查询数据库？问题是我无论如何都没有在系统终止时关闭连接。

或者另一个更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:52:02.910

正如 Vikdor 所说，使用[连接池](http://en.wikipedia.org/wiki/Connection_pool)，但我建议您使用[BoneCP](http://jolbox.com/)，因为它具有更好的[性能](http://jolbox.com/benchmarks.html)。在池中设置多个连接，然后您就不必担心打开和关闭或保持连接处于活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:44:30.183

您应该使用像[C3P0](http://www.mchange.com/projects/c3p0/)这样的简单连接池库，并根据您的要求配置连接数。连接生命周期管理将由库处理，您将从建立连接、在非活动期间删除它们、在需要时重新建立等中解脱出来，

# r - 寻找 twit 和短信风格的停用词

> ID：13558703
> 
> 赞同：3
> 
> 时间：2012-11-26T04:33:27.507
> 
> 标签：r, nlp, text-mining, stop-words

我已经使用 R 来挖掘推文，并且得到了推文中使用频率最高的词。然而，最常见的词是这样的：

```
 [1] "cant"     "dont"     "girl"     "gonna"    "lol"      "love"    
 [7] "que"      "thats"    "watching" "wish"     "youre" 
```

我正在寻找文本中的趋势、名称和事件。我想知道是否有办法从语料库中删除这种短信风格的词（例如，想要，想要，...）？他们有停用词吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T08:05:54.390

文本挖掘包维护它自己的停用词列表，并提供有用的工具来管理和总结这种类型的文本。

假设您的推文存储在向量中。

```
library(tm)
words <- vector_of_strings
corpus <- Corpus(VectorSource(words))
corpus <- tm_map(corpus, removePunctuation)
corpus <- tm_map(corpus, function(x) tolower(x))
corpus <- tm_map(corpus, function(x) removeWords(x, 
                stopwords())) 
```

您可以将最后一行与您自己的停用词列表一起使用（）：

```
stoppers <- c(stopwords(), "gonna", "wanna", "lol", ... ) 
```

不幸的是，您必须生成自己的“文本消息”或“互联网消息”停用词列表。

[但是，您可以通过向 NetLingo ( http://vps.netlingo.com/acronyms.php](http://vps.netlingo.com/acronyms.php) )借用一点作弊

```
library(XML)
theurl <- "http://vps.netlingo.com/acronyms.php"
h <- htmlParse(theurl)
h <- getNodeSet(h,"//ul/li/span//a")
stoppers <- sapply(h,xmlValue) 
```

# php - PHP 文件错误

> ID：13558705
> 
> 赞同：-2
> 
> 时间：2012-11-26T04:33:29.847
> 
> 标签：php, mysql, sql

我有一个 html 文件，它创建了一个链接到 php 文件的表单，并允许对数据库进行多参数搜索。无论出于何种原因，该文件没有被读取并且我遇到了一个错误，这使得我很难测试我的 sql 查询并验证它是否有效。提前致谢。

这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"

"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
<head>

<title>Bicycle Store Employees</title>
<link rel="stylesheet" type="text/css" href="web.css" />

</head>
<body>

<h1>Bicycle Store Manager</h1>

<h2>Customized Business Management for Bicycle Stores</h2>

<h3>EMPLOYEE INFORMATION</h3>

<?php

ini_set('display_errors', 'On');

$mysqli = new mysqli("$database", "$username", "$password", "$username");

if ($mysqli->connect_errno) {

print "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;

}
if( $_POST["submit"] ) {

    if (!($stmt =$mysqli->prepare("SELECT * into tempTable FROM 
(SELECT Fname, Minit, Lname, Address, Hourly, Sname, Saddress, Dno
FROM EMPLOYEE
join on Employee.Dno = DEPARTMENT.Dnumber
join on LOCATION.Store_num = DEPARTMENT.Store_num
where Fname = $_POST['Fname'] OR Lname = $_POST['Lname'] 
OR Stor_num = $_POST['Store_num'] OR Dno = $_POST['Dno']
GROUP BY Store_num);"))) {

print "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;
}
if (!$stmt->bind_param("ssii",$_POST['Fname'], $_POST['Lname'], $_POST['Dno'], $_POST['Store_num'])) {
print "Binding parameters failed: (" . $stmt->errno . ") " . $stmt->error;
}
if (!$stmt->execute()) {
print "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
}
 $stmt->store_result();

if (!$stmt->bind_result($Fname,$Minit,$Lname,$Phone,$Address,$Slocation,$Saddress,$Dno,$Hourly)) {
    print "Binding output parameters failed: (" . $stmt->errno . ") " . $stmt->error;
}
if ($stmt->num_rows == 0){
print "No results were found for the following search <p>"
  .$_POST['Fname'].$_POST['Lname'].$_POST ['Store_num'].$_POST['Dno']."</p>";
    }
else {
print "<table border=2 cellpadding=4>

        <tr bgcolor=white>

        <th>First Name</th>

        <th>Middle Initial</th>

        <th>Last Name</th>

        <th>Phone</th>

        <th>Address</th>

        <th>Store</th>

        <th>Store Location</th>

        <th>Dept #</th>

        <th>Hourly Rate</th>

        </tr>";

    while ($stmt->fetch()){

        print "<tr><td>".$Fname."</td><td>".$Minit."</td><td>".$Lname.

        "</td><td>".$Phone."</td><td>".$Address."</td><td>".$Slocation."</td>

        <td>".$Saddress."</td><td>".$Dno."</td><td>".$Hourly."</td></tr>";

    }

    print "</table>";
}

$stmt->free_result();
}

$mysqli->close();
?>

<p><a href="employee_info.html">SEARCH AGAIN</a></p>

<p><a href="index.html">HOME</a></p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:41:01.530

看一看。

[mysqli_error,mysqli::$error](http://php.net/manual/en/mysqli.error.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:45:09.997

```
$mysqli = new mysqli("$database", "$username", "$password", "$username"); 
```

首先，您不必将变量括在双引号中。

所以，它会是这样的：

```
$mysqli = new mysqli($database, $username, $password, $username); 
```

还有，变量,`$database`和defined的值在哪里？您应该在使用它之前设置值！`$username``$password``$username`

# iphone - ivar 在两个街区内

> ID：13558709
> 
> 赞同：2
> 
> 时间：2012-11-26T04:33:42.593
> 
> 标签：iphone, ios, ipad, objective-c-blocks

我在接口上声明了这样的 ivar：

```
BOOL controllerOK; 
```

我必须在一个块内使用这个 ivar，该块本身位于一个块中。就像是

```
myBlockl = ^(){
  [self presentViewController:controller
    animated:YES
    completion:^(){
      if (controllerOK)
        [self doStuff];
      }];
}; 
```

如果我尝试这样做，我会看到一个警告：

> **在此块中强烈捕获自我可能会导致保留循环**

对于 if (controllerOK) 行。

这似乎不是您在块开始之前使用 __unsafe_unretained 创建另一个变量的那些块问题之一。首先是因为该指令不能与 BOOL 一起使用，其次是因为 ivar controllerOK 必须在块内的运行时测试。另一个问题是块本身是在接口上声明的，因此它将在创建它的上下文之外使用。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T04:50:39.783

这应该有效：

```
__weak id this = self;
myBlockl = ^(){
  [self presentViewController:controller
    animated:YES
    completion:^(){
      if (this->controllerOK)
        [this doStuff];
      }];
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T04:52:43.580

`controllerOK`隐式编译为`self->controllerOK`因为它需要*通过* `self`. 正因为如此，它**是** *“那些块问题之一”*，尽管在这种情况下只是一个简单的`BOOL`变量就可以了。

```
__weak typeof(self) weakSelf = self;
myBlockl = ^(){
    BOOL isControllerOK = controllerOK;
    [self presentViewController:controller animated:YES completion:^(){
        if (isControllerOK)
        {
            [weakSelf doStuff];
        }
    }];
}; 
```

我把它放在`_weak`那里是因为即使你修​​复了 的警告消息`controllerOK`，你也会再次得到它`[self doStuff]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T04:39:02.057

您需要用引用替换对对象的`weak`引用。

典型的解决方法是声明一个局部变量：

```
__weak id weakSelf = self; 
```

正如 rmaddy 所观察到的，引用 ivar`controllerOK`也会生成一个强引用循环。您可以`BOOL controllerOK`用一个对象替换 ivar：

```
NSNumber *controllerOK; 
```

然后您可以使用对它的`weak`引用，如下所示：

```
controllerOK = @YES;

__weak typeof(self) weakSelf = self;
__weak NSNumber *weakControllerOk = controllerOK;

myBlockl = ^(){
    [weakSelf presentViewController:controller
                           animated:YES
                         completion:^(){
                             if ([weakControllerOk boolValue])
                                 [weakSelf doStuff];
                         }];
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T04:53:08.290

问题可能是您实际上并没有引用您的实际代码。我试过你的代码，它在 ARC 下编译，没有任何警告。但是我不得不稍微修改它，因为您声明块的语法是错误的。因此，您显然没有复制和粘贴您的实际代码。如果你不展示真正的麻烦代码，那么人们试图帮助你是浪费时间。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-26T04:41:39.813

你能这样试试吗

```
myBlockl = ^(){

    [self presentViewController:controller
                       animated:YES
                     completion:^(BOOL isFinished){
                                if (isFinished == controllerOK)
                                      [self doStuff];
                                  }];
}; 
```

我对块不是很熟悉，但它对我有用......

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-26T05:01:33.237

不幸的是，唯一可行的解​​决方案是将 BOOL controllerOK 转换为非原子属性，分配然后在块内使用它。

我已经测试了您在此处发布的所有解决方案，但均未成功。

# cocos2d-iphone - 使用 UITabBar 时替换场景

> ID：13558717
> 
> 赞同：1
> 
> 时间：2012-11-26T04:35:06.387
> 
> 标签：cocos2d-iphone, uitabbar

我的应用程序有四个 tabBarItems。其中两个 tabBarItems 使用 CCScene (Cocos2d) 类。我从一个运行良好的场景开始，然后使用同样运行良好的 tabBar 切换到第二个场景。我的问题是，当我尝试返回原始场景时，我的视图是第一个场景，但实际运行的场景与第二个场景没有变化。

在 tabBar 上切换时有没有办法切换场景？

每个 tabBarItem 是否应该简单地链接到 CCLayer，然后让所有这些层成为单个 CCScene 对象的子级？

任何建议将不胜感激。

# ajax - 将键是对象的哈希传递给JSON？

> ID：13558718
> 
> 赞同：0
> 
> 时间：2012-11-26T04:35:14.630
> 
> 标签：ajax, ruby-on-rails-3, json

我试图通过 JSON 将哈希传递到 Javascript，其中键是 ruby​​ 对象，值是对象数组。对象数组传输得很好，但是密钥被转换为类的字符串。

这是一个例子：

```
[4] pry(#<User>)> x = find_all_sections.collect { |s| { s => s.find_all_events_id_and_title } }
=> [{#<Section id: 58, course_id: 12, section_number: 3, semester_id: 1>} =>
   [{:id=>37, :title=>"Event 37"},
    {:id=>40, :title=>"Event 40"},
    {:id=>9, :title=>"Event 9"},
    {:id=>10, :title=>"Event 10"},
    {:id=>16, :title=>"Event 16"},
    {:id=>38, :title=>"Event 38"}, etc... 
```

将此转换为 json 的结果是（您只需查看字符串的前几个字符即可看到它不是对象，而是对象的 to_s：

```
[11] pry(#<User>)> x.to_json
=> "[{\"#<Section:0x007fa475b52f68>\":[{\"id\":37,\"title\":\"Event 37\"},{\"id\":40,\"title\":\"Event 40\"},{\"id\":9,\"title\":\"Event 9\"},{\"id\":10,\"title\":\"Event 10\"},{\"id\":16,\"title\":\"Event 16\"},{\"id\":38,\"title\":\"Event 38\"},{\"id\":49,\"title\":\"Event 49\"},{\"id\":39,\"title\":\"Event 39\"},{\"id\":15,\"title\":\"Event 15\"},{\"id\":25,\"title\":\"Event 25\"},{\"id\":11,\"title\":\"Event 11\"},{\"id\":4,\"title\":\"Event 4\"},{\"id\":22,\"title\":\"Event 22\"},{\"id\":1,\"title\":\"Event 1\"},{\"id\":23,\"title\":\"Event 23\"},{\"id\":8,\"title\":\"Event 8\"},{\"id\":13,\"title\":\"Event 13\"},{\"id\":26,\"title\":\"Event 26\"},{\"id\":46,\"title\":\"Event 46\"},{\"id\":20,\"title\":\"Event 20\"},{\"id\":31,\"title\":\"Event 31\"},{\"id\":6,\"title\":\"Event 6\"},{\"id\":18,\"title\":\"Event 18\"},{\"id\":41,\"title\":\"Event 41\"},{\"id\":7,\"title\":\"Event 7\"},{\"id\":43,\"title\":\"Event 43\"},{\"id\":45,\"title\":\"Event 45\"},{\"id\":24,\"title\":\"Event 24\"},{\"id\":2,\"title\":\"Event 2\"},{\"id\":44,\"title\":\"Event 44\"},{\"id\":29,\"title\":\"Event 29\"},{\"id\":28,\"title\":\"Event 28\"},{\"id\":5,\"title\":\"Event 5\"},{\"id\":3,\"title\":\"Event 3\"},{\"id\":27,\"title\":\"Event 27\"}]}, 
```

如何实现 JSON 数据保持密钥对象完整？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:57:36.363

你不能。在 JavaScript 中，键始终是字符串。此外，[JSON 规范](http://json.org/)规定键必须始终采用单双引号字符串文字的形式。

# mysql - 日期时间类型的 Mysql datediff

> ID：13558719
> 
> 赞同：0
> 
> 时间：2012-11-26T04:35:24.690
> 
> 标签：mysql

我想知道以下哪一项是将 datediff 用于日期时间类型的首选方法。

1.  `datediff(current_date, <datetime type>)`
2.  `datediff(current_date, date(<datetime type>))`
3.  `datediff(now(), <datetime type>)`

我在几个案例中尝试了它们，它们都返回了相同的答案，但我担心它们可能会产生一些错误。

datediff 是查找两种日期时间类型之间天数的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:44:36.600

出于您的目的，它们都是等效的。

current_date 返回 DATE 类型，而 now() 返回 DATETIME

不过，在这种情况下这并不重要，因为 datediff() 忽略了 DATETIME 的时间部分，因此将 DATE 和 DATETIME 与 datediff() 一起使用是完全等价的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T04:45:45.207

鉴于：

*   `datediff`在内部将参数转换为日期
*   `now()`投射到日期与`current_date`

任何这些组合之间的结果应该没有差异

# php - php日期函数显示错误时间

> ID：13558725
> 
> 赞同：1
> 
> 时间：2012-11-26T04:36:06.957
> 
> 标签：php, timezone

我遇到了一个非常有趣的问题。我的服务器时区设置为**America/New_York**（如 中所示`phpinfo()`并返回值`date_default_timezone_get()`），现在是纽约的 23:30 PM，但使用`echo date(h:i)`时显示为 7:30 AM，偏移 8 小时！

我的服务器系统时间也显示为上午 7:30，并且未在 php.ini 中设置默认时区

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T04:53:23.113

听起来很简单。

根据对您问题的评论，修复服务器上的时间，PHP 将报告正确的时间。

如果您的服务器设置在 America/New_York 时区，并且 PHP 也设置为 America/New_York，即如果服务器偏移量与 PHP 的偏移量匹配，则 PHP 将仅输出服务器的时间。

您可能假设 PHP 的 date() 函数正在从时间服务器或其他东西获取当前时间；不是这种情况。

### 奖金

写完答案的最后一部分后，我想弄清楚如何从 NTP 时间服务器获取时间，例如，`time.apple.com`

```
<?php 

function ntp_time($host) {

  // Create a socket and connect to NTP server
  $socket = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP);
  socket_connect($socket, $host, 123);

  // Send request
  $msg = "\010" . str_repeat("\0", 47);
  socket_send($socket, $msg, strlen($msg), 0);

  // Receive response and close socket
  socket_recv($socket, $recv, 48, MSG_WAITALL);
  socket_close($socket);

  // Interpret response
  $data = unpack('N12', $recv);
  $timestamp = sprintf('%u', $data[9]);

  // NTP is number of seconds since 0000 UT on 1 January 1900
  // Unix time is seconds since 0000 UT on 1 January 1970
  $timestamp -= 2208988800; 

  return $timestamp;
}

// Get America/New_York time from time.apple.com
date_default_timezone_set('America/New_York');
echo date('Y-m-d H:i:s', ntp_time('time.apple.com'));
//=> 2012-11-25 23:59:02 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:27:48.620

我自己发现这篇文章[http://abdussamad.com/archives/343-CentOS-Linux:-Setting-timezone-and-synchronizing-time-with-NTP-.html](http://abdussamad.com/archives/343-CentOS-Linux:-Setting-timezone-and-synchronizing-time-with-NTP-.html)对我来说真的很有用，对我来说效果很好。

正如其他朋友提到的，服务器时间应该与服务器时区进行更正和同步。

# ios - 由 __delayedPerformDealloc 释放的视图控制器

> ID：13558731
> 
> 赞同：0
> 
> 时间：2012-11-26T04:36:38.730
> 
> 标签：ios, cocoa-touch

我有一个有趣的问题让我很困惑。我有一个显示在另一个视图之上的视图（使用 addView）。第二个视图不会填满 iPhone 上的整个屏幕。两个视图都由视图控制器管理。然后第二个视图控制器呈现一个充满屏幕的模态视图控制器（特别是 MFMessageComposeViewController）。

所有这些第一次都很好用。但是，当我第二次关闭模态视图控制器时，呈现视图控制器（呈现模态的那个）上的 dealloc 方法被 __delayedPerformDealloc 调用。

包含视图控制器保留了内部视图控制器，所以我无法弄清楚内部视图控制器在哪个列表上导致它被释放。

有没有其他人看过这个？

工具：Xcode 4.5.2、iOS 6、iPhone 5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:55:33.133

事实证明这是我的愚蠢举动。有问题的控制器作为委托传递，并在 init 方法中分配给成员变量，但在 dealloc 方法中释放。哦！

# c# - 通过 TempData 传递 ViewModel？

> ID：13558732
> 
> 赞同：2
> 
> 时间：2012-11-26T04:36:40.133
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq-to-entities

在执行重定向到操作时，我需要维护我的 ViewModel 数据。我知道我可以使用 tempdata 来做到这一点，但我不确定它是什么样子。这是我的重定向：

```
if(StateList == "MN" && PorR == "Purchase")
                {
                    TempData["calculationViewModel"] = calculationViewModel;
                    return RedirectToAction("MNPurchase");
                } 
```

一旦我重定向到动作 MNPurchase，我如何从 TempData 创建一个 ViewModel？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T04:41:52.187

```
var calculationModel=(CalculationViewModel)TempData["calculationViewModel"]; 
```

您应该将其转换为您的模型类型。否则会被反对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:39:16.050

```
var calculationViewModel = TempData["calculationViewModel"]; 
```

# xaml - 我可以根据 XAML 元素的父元素对其应用样式吗？

> ID：13558733
> 
> 赞同：1
> 
> 时间：2012-11-26T04:37:08.807
> 
> 标签：xaml, styles, conditional-statements, controltemplate

对具有父元素类型条件的元素应用样式的正确方法是什么，即仅当它们是某些其他元素的子元素时？

就我而言，我想应用一些精确的按钮宽度和高度，但前提是这些按钮是堆栈面板的直接子级。此外，应将第二种样式应用于这些按钮（字形）中的图像。

*   如何定义仅影响堆栈面板上的按钮而不影响直接放置在网格上的按钮的按钮样式？
*   是否可以添加其他条件，例如*仅带有 的堆栈面板`orientation="horizontal"`*？
*   我可以定义“树条件”，例如*[水平] 堆栈面板上的按钮上的图像*吗？

由于我的应用程序中 90% 的按钮都是堆栈面板上的按钮，因此到目前为止，我已将样式应用于所有按钮和图像，并在必要时覆盖它。但这不是最好的解决方案，不是吗？

最好，该解决方案将处理样式定义中的所有条件，因此我不必将该样式显式分配给我的每个堆栈面板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:03:03.013

```
<StackPanel>
   <StackPanel.Resources>
      <Style x:Key="Rectangle1" TargetType="Rectangle">
        <Setter Property="Stroke" Value="Black" />
        <Setter Property="Fill" Value="White" />                                            
      </Style>                                      
   </StackPanel.Resources>
   <UniformGrid Columns="10">
      <UniformGrid.Resources>
         <Style TargetType="Rectangle" BasedOn="{StaticResource Rectangle1}">
            <Setter Property="Fill" Value="Red" />                                          
     </Style>                                       
      </UniformGrid.Resources>

    </UniformGrid>
</StackPanel> 
```

# java - 使用 selenium Web 驱动程序获取 NoClassDefFoundError

> ID：13558735
> 
> 赞同：1
> 
> 时间：2012-11-26T04:37:16.497
> 
> 标签：java, apache-poi, openxml, junit4

尝试在 Eclipse 中使用 selenium JUni4 Web 驱动程序打开 excel 文件时出现以下错误。错误和代码如下所示。我是 JAVA 的新手。请帮忙。

```
public void xlRead_TC(String sPath, int sSheet) throws Exception{   
    //Workbook book = Workbook.createWorkbook(f);       
    System.out.println("Step 1B  - Opening excel files Reached");
    File myxl = new File(sPath);
    FileInputStream myStream = new FileInputStream(myxl);
    //Workbook w;
    //w = Workbook.getWorkbook(myStream);

    XSSFWorkbook myWB = new XSSFWorkbook(myStream);
    //XSSFSheet mySheet = myWB.getSheetAt(sSheet);  // Referring to 1st  sheet

    //xRows_Inp = mySheet.getLastRowNum()+1;
    //xCols_Inp = mySheet.getRow(0).getLastCellNum();
    System.out.println("Rows are " + xRows_Inp);
    System.out.println("Cols are " + xCols_Inp);

    //Workbook[] wbs = new Workbook[] { new HSSFWorkbook(), new XSSFWorkbook() };

    //xRows_TC = mySheet.getLastRowNum()+1;
    //xCols_TC = mySheet.getRow(0).getLastCellNum();
    //System.out.println("Rows are " + xRows_TC);
    //System.out.println("Cols are " + xCols_TC);
    //xData_TC = new String[xRows_TC][xCols_TC];
} 
```

例外

```
java.lang.NoClassDefFoundError: org/dom4j/DocumentException
at org.apache.poi.openxml4j.opc.OPCPackage.init(OPCPackage.java:154)
at org.apache.poi.openxml4j.opc.OPCPackage.<init>(OPCPackage.java:141)
at org.apache.poi.openxml4j.opc.Package.<init>(Package.java:54) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-21T14:55:49.150

看来您运行的是旧版本的 POI，它仍然需要 dom4j 第三方库。你有两个选择：

1) 升级到 POI 的最新版本，不再需要这个库

2) 将 dom4j jar 文件添加到您的类路径中。jar 文件是 POI 二进制分发的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:55:40.927

我有时会遇到像你一样的问题。您可以这样做：在 IDE 中重建项目 + 刷新项目。如果它仍然不起作用，您应该重新启动 IDE。希望这有帮助:))

# ios - 多对多关系核心数据

> ID：13558736
> 
> 赞同：0
> 
> 时间：2012-11-26T04:37:20.930
> 
> 标签：ios, core-data, many-to-many

我的两个实体有很多很多：

> 一个类别可以有很多地方，另一方面，地方也可以在很多类别下

数据已成功存储在我的 sqlite 中，但是当我在 sqlite manager 软件中检查两个实体的结构时，两者之间的关系消失了。

通常，当我声明 1..* 时，例如：

> 实体 B 有一个实体 A
> 
> 地点属于一类

Category 将成为 Place 中的一个属性，我可以在其中使用它以供以后使用：

```
Category *category = (Category*)place.category;
NSString *catId = category.catId; 
```

`catId`如果那里有值，它应该返回一个值。

但在我的许多情况下，我什至无法得到`catId`，它像这样崩溃：

```
-[_NSFaultingMutableSet catID]: unrecognized selector sent to instance 
```

我在这里错过了一个概念吗？我相信核心数据支持多对多关系，正如我在某些网络上所读到的那样。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:12:55.010

您有来自 Place->Category 的“对多”关系，因此`place.category`对象`NSMutableSet`不是`Category`对象

尝试这个

```
NSMutableSet *categorySet = place.category;

foreach (Category *category in categorySet)
{
    NSString *catId = category.catId;
    NSLog(@"catId: %@", catId);
} 
```

# javascript - 在 JQuery 中将输入值设置为属性值

> ID：13558738
> 
> 赞同：1
> 
> 时间：2012-11-26T04:37:36.973
> 
> 标签：javascript, jquery, html

我有许多`<input />`框，我想开始它们的值类似于“*输入您的名字...* ”。

当您关注它们时，该值变为空，您可以输入。当你模糊它们时，如果没有输入任何内容，那么它会回到“*输入你的名字......* ”。

我想过有这样的事情：

```
<input id="name" _startValue="Enter your name..." /> 
```

然后，像这样：

```
$(document).ready($("input").val($(this).attr(_startValue))); 
```

这最初应该设置`value`为`_startValue`但它什么都不做。将行替换为：

```
$(document).ready($("input").val("hello")); 
```

但是，确实有效，因此问题必须与`$(this)`或`attr()`。

首先，我如何让它工作。其次，如果我试图以一种非常迟钝的方式做到这一点，那么获得此功能的好方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T04:39:16.190

我相信最好使用如下占位符：

```
 <input id="name" placeholder="Enter your name..." /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T04:40:04.053

```
 // v---you're not passing a function
 $(document).ready($("input").val($(this).attr(_startValue)));
          // `this` isn't magic-------^---- It doesn't just mean what you want 
```

应该更像这样：

```
$(document).ready(function() {
    $("input").val(function() {
        return $(this).attr("_startValue");
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T04:48:06.827

已经有这方面的库，如果你已经在使用 jquery，你应该使用它们。

[https://github.com/mathiasbynens/jquery-placeholder](https://github.com/mathiasbynens/jquery-placeholder)

只需添加属性“占位符”并调用函数：

```
<input placeholder="my placeholder">
<script type="text/javascript">
    $("document").ready(function(){
        $("input").placeholder();
    });
</script> 
```

注意，***如果需要旧浏览器支持***（特别是在IE中），则只需要添加插件，否则，该属性就足够了。

另外，请考虑如果您对此进行编码，则会出现错误，例如提交表单的默认值。jquery 插件通常做的事情是制作一个`<span>`或任何东西，并在输入为空时将其放在输入之上，并在输入不为空时将其隐藏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T05:24:08.873

模拟占位符的一种常见方法是将占位符文本放在元素的值中，然后检查焦点上的值，例如：

```
if (this.value == this.defaultValue) this.value = ''; 
```

然后模糊：

```
if (this.value == '') this.value = this.defaultValue; 
```

请不要使用占位符代替标签或屏幕帮助（例如日期格式）。如果浏览器不支持 placeholder 属性，如果将其用作默认值是一个问题，最好不要模拟它们。

毕竟，占位符是“很高兴拥有”，它们不应该是正确使用表单的基础。

# windows - WinIo v3.0中基于SetPhysLong()构建1Byte/2Byte访问的例程

> ID：13558743
> 
> 赞同：0
> 
> 时间：2012-11-26T04:39:17.290
> 
> 标签：windows, memory, dll, dllimport

我有一个关于如何基于**WinIo v3.0**中的**SetPhysLong()为***1Byte/2Byte*访问构建例程的问题。

 ******SetPhysLong()**用于以 DWORD(32bit) 为单位访问内存，我的目标是构建自己的例程：

*   *SetPhysBYTE()*以 BYTE(8bit unsigned) 为单位访问内存，和
*   *SetPhysWORD()*以 WORD(16bit unsigned) 为单位访问内存

有人告诉我下面的方法可以解决这个问题：

1.  使用**GetPhysLong**检索当前 DWORD 内容
2.  将新的 BYTE / WORD 放入DWORD的**正确部分**
3.  然后使用**SetPhysLong**将其写回

但如果发生以下情况，我认为上述方法失败：

1.  假设4字节寄存器映射到内存0x12345678（因为是内存映射IO）
2.  假设该寄存器的第二个字节是**状态寄存器**，属性是*“写 1 清除”*，第二个字节现在是 0x40
3.  假设我们要将 0xA5 写入内存 0x12345678。按照你的方式，我们得到：

    *   使用 GetPhysLong 然后返回 0x00004000
    *   把 0xA5 放到 LSB，我们得到 0x000040A5
    *   使用 SetPhysLong 将 0x000040A5 设置为内存地址 0x12345678

这是***不***正确的，因为值 0x40 将被写入第二个字节并将其清除为 0x00 ！！！

因此，我的目标是使用 SetPhysBYTE(0x12345678, 0xA5) 来实现我的目标，并且不影响基于以下 SetPhysLong()... 的其他字节。

```
bool _stdcall SetPhysLong(PBYTE pbPhysAddr, DWORD dwPhysVal)
{
    PDWORD pdwLinAddr;
    tagPhysStruct PhysStruct;

    if (!IsWinIoInitialized)
        return false;

    if (g_Is64BitOS)
    {
        PhysStruct.pvPhysAddress = (DWORD64)pbPhysAddr;
    }
    else
    {
        // Avoid sign extension issues
        PhysStruct.pvPhysAddress = (DWORD64)(DWORD32)pbPhysAddr;
    }

    PhysStruct.dwPhysMemSizeInBytes = 4;

    pdwLinAddr = (PDWORD)MapPhysToLin(PhysStruct);

    if (pdwLinAddr == NULL)
        return false;

    *pdwLinAddr = dwPhysVal;

    UnmapPhysicalMemory(PhysStruct);

    return true;
} 
```

[编辑] 我已经解决了这个问题，如果需要，请参考下面的代码......

```
bool _stdcall SetPhysBYTE(PBYTE pbPhysAddr, BYTE bPhysVal)
{
PDWORD pdwLinAddr;
tagPhysStruct PhysStruct;

if (!IsWinIoInitialized)
    return false;

if (g_Is64BitOS)
{
    PhysStruct.pvPhysAddress = (DWORD64)pbPhysAddr;
}
else
{
    // Avoid sign extension issues
    PhysStruct.pvPhysAddress = (DWORD64)(DWORD32)pbPhysAddr;
}

PhysStruct.dwPhysMemSizeInBytes = 1;

pdwLinAddr = (PDWORD)MapPhysToLin(PhysStruct);

if (pdwLinAddr == NULL)
    return false;

*(((PBYTE)((DWORD)pdwLinAddr))) = bPhysVal;

UnmapPhysicalMemory(PhysStruct);

return true;
}

bool _stdcall SetPhysWORD(PBYTE pbPhysAddr, WORD wPhysVal)
{
PDWORD pdwLinAddr;
tagPhysStruct PhysStruct;

if (!IsWinIoInitialized)
    return false;

if (g_Is64BitOS)
{
    PhysStruct.pvPhysAddress = (DWORD64)pbPhysAddr;
}
else
{
    // Avoid sign extension issues
    PhysStruct.pvPhysAddress = (DWORD64)(DWORD32)pbPhysAddr;
}

PhysStruct.dwPhysMemSizeInBytes = 2;

pdwLinAddr = (PDWORD)MapPhysToLin(PhysStruct);

if (pdwLinAddr == NULL)
    return false;

*(((PWORD)((DWORD)pdwLinAddr))) = wPhysVal;

UnmapPhysicalMemory(PhysStruct);

return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:05:23.670

请参阅此问题的 [EDIT] 部分！****

# android - 如何实现像这张图片一样的轨迹栏 - Android？

> ID：13558749
> 
> 赞同：5
> 
> 时间：2012-11-26T04:39:52.603
> 
> 标签：android, seekbar, trackbar

请帮我实现这个观点。单击圆圈将鼠标悬停在最小/最大/目标的实际值上。酒吧长度不根据任何事情。但条形颜色根据目标圈。非常感谢 ![在此处输入图像描述](../Images/83d272c9cdbeab7622b17fc8434836b7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T04:43:11.963

使用自定义 SeekBar。这是一个帮助您入门[的教程。](http://www.techrepublic.com/blog/app-builder/androids-seekbar-your-way/943)

# entity-framework - 实体框架 TPH - 仅针对一种子类型的附加 WHERE 子句

> ID：13558753
> 
> 赞同：0
> 
> 时间：2012-11-26T04:40:28.870
> 
> 标签：entity-framework, entity-framework-4.1, entity-framework-5

假设我有一个 Parent 类，它有两个子类 AChild 和 BChild。我使用 .NET 4.5 上的 Entity Framework 5.0.0 使用 TPH 将这些映射到单个表。

```
public abstract class Parent {
    public string Type { get; set; } // Column with this name in DB is discriminator.
    public string Status { get; set; }
}

public class AChild : Parent {
    // Other stuff.
}

public class BChild : Parent {
    // Other stuff.
} 
```

配置映射的代码：

```
class ParentConfiguration : EntityTypeConfiguration<Parent> {
    Map((EntityMappingConfiguration<AChild> mapping) => mapping
        .Requires("Type")
        .HasValue("A"));
    Map((EntityMappingConfiguration<BChild> mapping) => mapping
        .Requires("Type")
        .HasValue("B"));
} 
```

我需要运行一个返回 AChild 和 BChild 对象的查询。但是，它只需要按第二列过滤 AChild 行，在本例中我将其称为 Status。

理想情况下，我想做以下事情：

```
public IList<Parent> RunQuery() {
    IQueryable<Parent> query =
        this.context.Set<Parent>()
        .Where((Parent parent) => !parent.Type.Equals("A") || parent.Status.Equals("Foo"))
        .OrderBy((Parent parent) => parent.Number);
    return query.ToList();
} 
```

这行不通。它坚持寻找“Type1”列，而不是让鉴别器和“Type”属性都映射到同一个“Type”列。

我知道“OfType”扩展方法可以用来完全过滤到一种类型，但在这种情况下这太宽泛了。

我可能会运行多个查询并组合结果，但我正在构建的实际系统正在进行分页，所以如果我需要拉回 10 行，查询会变得混乱（而且效率低下），因为我要么最终拉回退太多行，或者回退不够，必须运行额外的查询。

有没有人有其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:37:01.073

问题很少。首先，您不能将鉴别器映射为属性。这就是它寻找`Type1`列的原因 - 您的`Type`属性导致第二列，因为第一列已经映射到您的类的 .NET 类型。过滤派生类型的唯一方法是通过`OfType`.

您要构建的查询可能非常复杂，因为您需要查询所有 B 并将它们与过滤 As 的查询结果连接起来。它很可能不允许您将 Bs 的实例与 As 连接，因此您必须将它们转换回父类型。

# filepicker.io - 添加 s3 凭据后的 filepicker.io 所有文件 404

> ID：13558756
> 
> 赞同：0
> 
> 时间：2012-11-26T04:40:47.050
> 
> 标签：filepicker.io

在我将 S3 凭据添加到文件选择器后，所有文件 404。这是怎么回事？我认为这是因为文件选择器试图从 s3 获取文件而不是其原始位置而不尝试移动它？

如何确保文件选择器迁移文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:26:53.737

我们将在接下来的两天内对此进行修复，在此期间，我们有一个脚本可以在您需要移动文件时将文件迁移到您的 S3 存储桶中。

# javascript - 多选组合框和 tpl - 在 Ext JS 中标记选定条目的问题

> ID：13558757
> 
> 赞同：1
> 
> 时间：2012-11-26T04:40:57.390
> 
> 标签：javascript, extjs, combobox, tooltip, extjs3

我使用 tpl 为组合框添加了快速提示（工具提示），如下所示，

```
'<tpl for="."><div ext:qtip="{text}" class="x-combo-list-item">{text}</div></tpl>' 
```

但添加后，组合框不会标记（蓝色）选定的条目。即，在我添加工具提示之前，所选条目可以被视为已标记或已选中（对我来说是蓝色）。但现在它不起作用（选定的实体没有被选中）。这是我的代码，

```
 {           
              name          : name,
              hideOnSelect  : false,
              triggerAction : 'all',
              mode          : 'local',
              width         : size,
              tpl           :'<tpl for="."><div ext:qtip="{text}" class="x-combo-list-item">{text}</div></tpl>',
              store         : new Ext.data.SimpleStore({
              id                : 0,
              fields            : ['value','text'],
              data          : data
              }),
              listWidth     : 400,
              valueField    : 'value',
              displayField  : 'text'
            } 
```

![在此处输入图像描述](../Images/2acbf341352bf5f9c2df5957ad5a32a6.png)<---之前 ![在此处输入图像描述](../Images/9234c0f516aa43afe1673c6812eeab00.png)<---之后

必须感谢任何帮助...谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:00:10.730

[displayTpl](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox)也应该工作：

```
{           
      name: name,
      hideOnSelect: false,
      triggerAction: 'all',
      mode: 'local',
      width: size,
      store: new Ext.data.SimpleStore({
          id: myCombo,
          fields: ['value','text'],
          data: data
      }),
      listWidth: 400,
      valueField: 'value',
      displayField: 'text',
      displayTpl: '<tpl for="."><div ext:qtip="{text}">{text}</div></tpl>'
} 
```

**更新**

发现问题！您必须先启动 QuickTips。您的其余代码都很好！这是一个工作[小提琴](http://jsfiddle.net/Vandeplas/Nfwnn/)

```
Ext.QuickTips.init();
var cb = new Ext.form.ComboBox({
    name: name,
    hideOnSelect: false,
    triggerAction: 'all',
    mode: 'local',
    width: 200,
    store: new Ext.data.JsonStore({
        id: "myCombo",
        fields: ['value', 'text'],
        data: [
            { value: 1, text: 'one'},
            { value: 2, text: 'two'},
            { value: 3, text: 'three'}
        ]
    }),
    listWidth: 250,
    valueField: 'value',
    displayField: 'text',
    renderTo: Ext.getBody(),
    tpl: '<tpl for="."><div ext:qtip="{text}" class="x-combo-list-item">{text}</div></tpl>'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:41:01.120

你能试试这个吗...

```
 {           
          name          : name,
          hideOnSelect  : false,
          triggerAction : 'all',
          mode          : 'local',
          width         : size,
          store         : new Ext.data.SimpleStore({
          id                : myCombo,
          fields            : ['value','text'],
          data          : data
          }),
          listWidth     : 400,
          valueField    : 'value',
          displayField  : 'text',
          listConfig: {
               getInnerTpl: function() {
                 return '<div data-qtip="{text}">{value}</div>';
               }
           }

        } 
```

# c - 链接共享对象时对“测试”的未定义引用

> ID：13558760
> 
> 赞同：1
> 
> 时间：2012-11-26T04:41:20.513
> 
> 标签：c, linker, makefile, shared-libraries

我正在学习如何在 C 中链接共享对象的教程

这是我的制作文件

```
test: glenn.c libhala.so
    gcc glenn.c -L. -o test

libhala.so: hala.o
    gcc -shared hala.o -o libhala.so

hala.o: hala.c hala.h
    gcc -c -Wall -Werror -fpic hala.c

clean:
    rm *.o
    rm *.so
    rm test 
```

哈拉.h

```
#ifndef HALA
#define HALA

extern void test(char*);
#endif 
```

hala.c

```
#include "hala.h"
#include <stdio.h>

extern void test(char* s)
{

    printf("%s", s);
} 
```

格伦.c

```
#include <stdio.h>
#include "hala.h"

int main()
{
    test("Hello There!");
    return 0;
} 
```

这让我很充实。请帮帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T04:46:20.217

您应该`-lhaha`在链接时添加`glenn.c`.

```
gcc glenn.c -L. -lhala -o test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T04:46:39.137

`-lhala`编译时添加`glenn.c`，所以更新makefile为

```
test: glenn.c libhala.so
    gcc glenn.c -L. -lhala -o test 
```

# actionscript-3 - 有没有办法把stage3d带到前面？

> ID：13558761
> 
> 赞同：1
> 
> 时间：2012-11-26T04:41:22.327
> 
> 标签：actionscript-3, stage3d

我在 adobe 网站上尝试了 hello 示例。

[http://www.adobe.com/devnet/flashplayer/articles/hello-triangle.html](http://www.adobe.com/devnet/flashplayer/articles/hello-triangle.html)

它可以工作，但是 context3D 似乎在最低级别的舞台背景上工作。如果我画任何东西，它将覆盖 3d 上下文。

我想把它放在前面或设置到一定的水平。我怎样才能做到这一点？

另外有人告诉我如果同时使用 2d api 和 3d api 会降低 3d 的性能，这是真的吗？在我的作品中，我仍然需要 2d api，例如，绘制文本字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T08:02:22.490

一切都是这样的（从下到上）：

StageVideo（1 个或多个实例）> Stage3D（1 个或多个实例）> 您的常规显示列表。

是的，常规显示对象可能会降低 Stage3D 的性能，因此使用 Stage3D 替代品可能会更好。一些 Stage3D 加速框架已经内置了一些框架（如 Starling 中的 TextField）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:42:40.423

不，你不能把它带到前面。2d 和 3d 互不相关。但是，当然，如果您编写 100% 占用 cpu 的 2d 内容，您将获得整体缓慢的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:49:05.007

唯一的方法是从 stage3D 实例的底层获取渲染的位图并将其显示在您的 displayList 之上.. 但它应该在每一帧上工作，这会影响性能很多，当然没有鼠标交互.. . 此解决方案仅适用于在 stage3D 上显示渲染场景 .. 只是一个模拟

# sql - Oracle-确定行是否是返回多于 1 行的连接的结果

> ID：13558769
> 
> 赞同：2
> 
> 时间：2012-11-26T04:42:33.167
> 
> 标签：sql, oracle

在 Oracle 中，他们是否有任何方法来确定一行是否仅由于导致超过 1 行返回的连接而显示？

我会解释：

对于这个例子，我有 2 个表，比如 SO 和 PO。

SO 是驱动表，并加入 PO。PO 可以为每个 SO 返回超过 1 条记录。这是需要的，但是我希望能够有一个列来指示结果集的 SO 记录是否重复（因为仅显示因为 PO 连接导致它重复）。

我想在 Crystal Reports 中使用此标识符来抑制报表上的前半部分字段，因为这是不需要多次显示的重复数据。

我还应该补充一点，我正在对这些数据进行一些分组，我刚刚意识到这意味着除非我将它们添加到 group by，否则我不能做大量的工作，这是我做不到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:51:30.893

`row_number() over(partition by SO.join_id order by PO.something) as r`

并抑制 .* 的行的输出`r > 1`。

~~更新：您不一定需要按连接条件进行分区。按您想要抑制的任何内容进行分区。~~

 ~~```
13:35:44 SYSTEM@dwal> ed
Wrote file S:\\tools\buffer.sql

  1  select decode(rn, 1, owner) owner, object_type, cnt
  2    from (
  3      select owner, object_type,  count(*) cnt,
  4            row_number() over(partition by owner order by owner, object_type desc) rn
  5        from dba_objects
  6       where owner in( 'SYSTEM', 'OUTLN')
  7       group by owner, object_type
  8*   )
13:36:09 SYSTEM@dwal> / </s>

OWNER    OBJECT_TYPE                CNT
-------- ------------------- ----------
OUTLN    TABLE                        3
         PROCEDURE                    1
         LOB                          1
         INDEX                        5
SYSTEM   VIEW                        14
         TYPE                         1
         TRIGGER                      2
         TABLE PARTITION             47
         TABLE                      159
         SYNONYM                      8
         SEQUENCE                    20
         QUEUE                        4
         PROCEDURE                    1
         PACKAGE BODY                 1
         PACKAGE                      1
         LOB                         23
         INDEX PARTITION             72

OWNER    OBJECT_TYPE                CNT
-------- ------------------- ----------
         INDEX                      239

18 rows selected. 
```~~ 

~~在这种情况下，您将需要对多个列进行多次分析，这很昂贵~~

# iphone - Iphone 检测每个手指并画线（使用 cocos2d/openGL 进行绘图）

> ID：13558773
> 
> 赞同：3
> 
> 时间：2012-11-26T04:43:59.467
> 
> 标签：iphone, ios, cocos2d-iphone

我了解多点触控事件的基本原理

1.  当手指触摸视图/屏幕时，该视图将收到`ccTouchesBegan`一组`UITouch`.
2.  `UITouch`将保存`CGPoint`每个手指的位置 ( ) 及其唯一性。
3.  如果多个手指同时触摸视图，则将 2 个手指`UITouch`发送到视图。
4.  有时 view 会收到`ccTouchesBegan` 2 `UITouch`，或者`ccTouchesBegan`会因为每个手指一个接一个地触摸而被调用 twise 。
5.  如果 finger1 正在移动视图，将收到`ccTouchesMoved`一个`UITouch`。

我的问题是如何分别用每个手指触摸画线，将 1 或 2 根手指放在屏幕上并为每个手指触摸开始/移动/结束画线？

下面的代码在只有单点触控时有效，但对于多点触控，由于上述第 3 点和第 4 点，它不会工作。

正是这样 ![在此处输入图像描述](../Images/fa37fd4f1936294e22c810391cc7749c.png)

```
-(void) ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    if ([touches count] > 0) {

        // handle multi touch
        UITouch *touch1 = [[touches allObjects] objectAtIndex:0];
        CGPoint touchLocation1 = [touch1 locationInView: [touch1 view]];
        touchLocation1 = [[CCDirector sharedDirector] convertToGL: touchLocation1];

        Edge *temEdge1 = (Edge*)[temEdges objectAtIndex:0];
        [[temEdge1 end] updateXY:touchLocation1];
        [[temEdge1 start] updateXY:touchLocation1];

        if ([touches count] > 1) {
            UITouch *touch2 = [[touches allObjects] objectAtIndex:1];
            CGPoint touchLocation2 = [touch2 locationInView: [touch2 view]];
            touchLocation2 = [[CCDirector sharedDirector] convertToGL: touchLocation2];

            Edge *temEdge2 = (Edge*)[temEdges objectAtIndex:1];
            [[temEdge2 end] updateXY:touchLocation2];
            [[temEdge2 start] updateXY:touchLocation2];

        }

    }
}

-(void) ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    if ([touches count] > 0) {

        // handle multi touch
        UITouch *touch1 = [[touches allObjects] objectAtIndex:0];
        CGPoint touchLocation1 = [touch1 locationInView: [touch1 view]];
        touchLocation1 = [[CCDirector sharedDirector] convertToGL: touchLocation1];

        Edge *temEdge1 = (Edge*)[temEdges objectAtIndex:0];
        [[temEdge1 end] updateXY:touchLocation1];

        if ([touches count] > 1) {
            UITouch *touch2 = [[touches allObjects] objectAtIndex:1];
            CGPoint touchLocation2 = [touch2 locationInView: [touch2 view]];
            touchLocation2 = [[CCDirector sharedDirector] convertToGL: touchLocation2];

            Edge *temEdge2 = (Edge*)[temEdges objectAtIndex:1];
            [[temEdge2 end] updateXY:touchLocation2];
        }

    }

}

-(void) ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    if ([touches count] > 0) {

        // handle multi touch
        UITouch *touch1 = [[touches allObjects] objectAtIndex:0];
        CGPoint touchLocation1 = [touch1 locationInView: [touch1 view]];
        touchLocation1 = [[CCDirector sharedDirector] convertToGL: touchLocation1];

        Edge *temEdge1 = (Edge*)[temEdges objectAtIndex:0];
        [[temEdge1 end] updateXY:touchLocation1];

        if ([touches count] > 1) {

            UITouch *touch2 = [[touches allObjects] objectAtIndex:1];
            CGPoint touchLocation2 = [touch2 locationInView: [touch2 view]];
            touchLocation2 = [[CCDirector sharedDirector] convertToGL: touchLocation2];

            Edge *temEdge2 = (Edge*)[temEdges objectAtIndex:1];
            [[temEdge2 end] updateXY:touchLocation2];
        }
    }

}
-(void)draw
{
    [super draw];
    glLineWidth(5.f);
    ccDrawColor4B(0, 0, 255, 255);
    for (Edge *temEdge in temEdges) {
        CGPoint start = [[temEdge start] toCCP];
        CGPoint end   = [[temEdge end] toCCP];
        ccDrawLine(start , end);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:44:59.713

您可以尝试将触摸位置数组与不同的触摸相关联（例如 NSDictionary，将 UITouches 作为键，将点的 NSArrays 作为值）。`ccDrawLine`然后，如果您的方法，您可以使用或任何其他方式绘制这些线`draw`。只是不要忘记将这些数组存储在当前触摸结束的地方。

# linq - 创建我自己的 LINQ 集合

> ID：13558775
> 
> 赞同：0
> 
> 时间：2012-11-26T04:44:07.190
> 
> 标签：linq

我正在寻找关于如何为我的业务类创建 LINQ 访问器/API 的优秀教程。这样有人最终可以在程序中输入这样的内容——

```
var potentialCustomers = from people in county
                  where people.NumberOfCats > 2
                  select people 
```

我在 .Net 集合中经常使用 LINQ，但以前从未在我自己的课程中使用过。仅仅是实现 IEnumerable 的问题，还是需要额外的步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:16:11.867

LINQ 是一个有趣的野兽。

讨论 LINQ 时立即`IEnumerable<T>`想到。这似乎`IEnumerable<T>` **是**LINQ，但事实并非如此。`IEnumerable<T>`是 LINQ 方法的一种实现，它允许针对实现`IEnumerable<T>`.

另一个实现是`IObservable<T>`为 Microsoft 的响应式扩展提供支持。这是一组扩展，允许针对事件（或数据流）编写 LINQ 查询。无关`IEnumerable<T>`。

LINQ 也可以直接写在你的对象中——它根本不必是扩展方法。

例如，定义类`A`，`B`如下所示：

```
public class A
{
    public B Select(Func<A, B> selector)
    {
        return selector(this);
    }
}

public class B
{
    public B(A a) { }
} 
```

现在我可以编写这段代码：

```
B query =
    from x in a
    select new B(x); 
```

这是 LINQ，Jim，但不是我们所知道的。

所有的 LINQ 操作符都可以这样定义。只要编译器能够看到具有正确签名的方法，你就是黄金。

话虽如此，当使用一系列值时，这种 LINQ 查询感觉很自然——因此这就是为什么`IEnumerable<T>`，并且`IObservable<T>`是 LINQ 实际应用的好例子。但是，只需实现正确的方法，就可以针对您喜欢的任何类型定义 LINQ。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:21:26.893

您只需要在您的类中实现[IEnumerable 接口](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)，然后您就可以使用 LINQ。
因为 LINQ 是`IEnumerable`对象的一组扩展

# php - 我认为 PHP 需要分号？

> ID：13558788
> 
> 赞同：-3
> 
> 时间：2012-11-26T04:45:38.297
> 
> 标签：php

我最近升级了我的服务器（本地 WAMP 和生产盒到 PHP 5.4）并且对分号的使用感到很满意，我并不是在抱怨我不喜欢 ; 但不知道此代码如何在本地和在没有错误的生产机器上运行，并且错误报告设置为 E_ALL ...

我以为我需要一个 ; <之后`<? phpinfo ?>`——显然不是！

这也不会产生错误：`<? print_r(apache_get_modules()) ?>`

这也适用于没有分号的情况：`<? foreach (getallheaders() as $name => $value) printf("%s:%s \n", $name, $value, PHP_EOL) ?>`

所有这些代码都不会产生错误，而且就像我朋友的遗漏一样；我想知道WTF正在发生吗？

是因为我的PHP 5.4版本还是phpinfo、print_r和printf不需要分号？？？？？？

所有这些代码都运行没有错误：

```
<div id="tabs">
    <div id="tab_one"><pre>Server Variables: <? print_r($_SERVER) ?></pre></div>
    <div id="tab_two"><pre>Server and PHP interface: <?= PHP_SAPI ?></pre></div>
    <div id="tab_three"><pre>Apache Modules: <? print_r(apache_get_modules()) ?></pre></div>
    <div id="tab_four"><pre><?= apache_get_version() ?></pre></div>
    <div id="tab_five"><pre><? foreach (getallheaders() as $name => $value) printf("%s:%s \n", $name, $value, PHP_EOL) ?></pre></div>
    <div id="tab_six">
        <p><a href="/server-status?refresh=3" target="_blank">Server Status</a></p>
        <br />
        <p><a href="/server-info/" target="_blank">Server Info</a></p>
    </div>
</div> 
```

玉米糊？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T04:48:42.643

根据[PHP 手册中的“指令分离”](http://php.net/manual/en/language.basic-syntax.instruction-separation.php)：

> PHP 代码块的结束标记自动暗示分号；您不需要在 PHP 块的最后一行结束分号。

# hadoop - 长时间的hadoop运行，卡在reduce>reduce

> ID：13558792
> 
> 赞同：3
> 
> 时间：2012-11-26T04:46:25.033
> 
> 标签：hadoop, mapreduce

我有hadoop运行，基本上只是聚合键，它的代码：（映射器是身份映射器）

```
 public void reduce(Text key, Iterator<Text> values,
            OutputCollector<Text, Text> results, Reporter reporter) throws IOException {

            String res = new String("");
            while(values.hasNext())
            {
                res += values.next().toString();
            }
            Text outputValue = new Text("<all><id>"+key.toString()+"</id>"+res+"</all>");
            results.collect(key, outputValue);
    } 
```

它停留在这个级别：

```
 12/11/26 06:19:23 INFO mapred.JobClient: Running job: job_201210240845_0099
    12/11/26 06:19:24 INFO mapred.JobClient:  map 0% reduce 0%
    12/11/26 06:19:37 INFO mapred.JobClient:  map 20% reduce 0%
    12/11/26 06:19:40 INFO mapred.JobClient:  map 80% reduce 0%
    12/11/26 06:19:41 INFO mapred.JobClient:  map 100% reduce 0%
    12/11/26 06:19:46 INFO mapred.JobClient:  map 100% reduce 6%
    12/11/26 06:19:55 INFO mapred.JobClient:  map 100% reduce 66% 
```

我在本地运行它并看到了这个：

```
 12/11/26 06:06:48 INFO mapred.LocalJobRunner:
    12/11/26 06:06:48 INFO mapred.Merger: Merging 5 sorted segments
    12/11/26 06:06:48 INFO mapred.Merger: Down to the last merge-pass, with 5 segments left of total size: 82159206 bytes
    12/11/26 06:06:48 INFO mapred.LocalJobRunner:
    12/11/26 06:06:54 INFO mapred.LocalJobRunner: reduce > reduce
    12/11/26 06:06:55 INFO mapred.JobClient:  map 100% reduce 66%
    12/11/26 06:06:57 INFO mapred.LocalJobRunner: reduce > reduce
    12/11/26 06:07:00 INFO mapred.LocalJobRunner: reduce > reduce
    12/11/26 06:07:03 INFO mapred.LocalJobRunner: reduce > reduce
    ...
    a lot of reduce > reduce ...
    ... 
```

最后，它完成了工作。我想问一下：

1）它在这个reduce > reduce阶段做了什么？

2）我该如何改进呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T05:12:38.533

查看百分比时，0-33% 是 shuffle，34%-65% 是 sort，66%-100% 是实际的 reduce 函数。

您的代码中的一切看起来都很好，但我会在黑暗中尝试一下：

`res`您正在一遍又一遍地创建和重新创建字符串。每次获得新值时，Java 都会创建一个新的字符串对象，然后创建另一个字符串对象来保存连接。如您所见，当字符串变得非常大时，这可能会失控。尝试使用 a[`StringBuffer`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuffer.html)代替。编辑：[`StringBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)优于`StringBuffer`.

无论这是否是问题，您都应该更改它以提高性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T22:01:15.623

使用 StringBuilder 解决了它。它将运行时间从 30 分钟缩短到 30 秒。我没想到会有这么大的不同。非常感谢。

# haskell - 是否可以在没有前置函数的情况下在原始递归中定义减法？

> ID：13558794
> 
> 赞同：2
> 
> 时间：2012-11-26T04:46:35.023
> 
> 标签：haskell, recursion, computation-theory

我有一个任务，我正在编写一堆基本的原始递归函数，其中一个是减法。我没有得到前任的定义，我认为我不太可能将其定义为`eval Pred [x] = x-1`. 下面是我对 PR 的定义，我还定义了几个其他函数，例如时间、AND、OR、NOT、pow、true、false 和 ite。是否可以只用我这里的东西来定义减法？如果是这样，有人可以给我一些指导。我目前的想法是我可以做类似的事情，给定`minus[x,y]`递归`y`时间然后 return `P 2`。如果`y > x`我应该返回零。以下是我对 PR 的定义。

```
 import Prelude hiding (pred,and,or,not)

 data PR = Z
     | S
     | P Int
     | C PR [PR]
     | PR PR PR
     deriving Show
 eval :: PR -> [Integer] - Integer
 eval Z _ = 0
 eval S [x] = x+1
 eval (P n) xs = nth n xs
 eval (C f gs) xs = eval f (map (\g -> eval g xs) gs)
 eval (PR g h) (0:xs) = eval g xs
 eval (PR g h) (x:xs) = eval h ((x-1) : eval (PR g h) ((x-1):xs) : xs)

 nth _ [] = error "nth nil"
 nth 0 _ = error "nth index"
 nth 1 (x:_) = x
 nth (n) (_:xs) = nth (n-1) xs

 one = C S [Z]
 plus = PR (P 1) (C S [P 2]) 
```

编辑; 我发现我的问题在于定义正确的基本情况。`PR (P 3) (P 1)`Returns `P 1 - 1`，这是朝着正确方向迈出的一步，但是，我需要递归`P 3`时间。我在想类似的东西`PR (PR Z (P 3)) (P 1)`会做到这一点。这当然是不正确的，但想法是每次递减从到递归`P 3`。`Z``P 1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:51:19.840

我意识到做到这一点的方法是使用 PR 定义前任。

```
pred = PR Z (P 1) 
```

如果 .返回`x-1`或为零`x = 0`。

从那里可以定义如下

```
modus = C modus' [P 2, P 1]
modus' = PR P 1 (C pred [P 2]) 
```

递归递减`P 1` `P 2`时间或直到`P 1`等于零。

# sql-server - CodeFirst：无法打开登录请求的数据库“MyDatabase”。登录失败。用户“MyDomain\MyUser”登录失败

> ID：13558797
> 
> 赞同：2
> 
> 时间：2012-11-26T04:46:44.737
> 
> 标签：sql-server, ef-code-first

所以我突然收到这个错误，我不知道如何解决它。`MyDomain\MyUser`列在服务器用户下，但由于我使用的是 CodeFIrst，因此尚未创建数据库，因此无法添加`MyDatabase`到用户。

这是我的代码：

连接字符串：

```
<add name="MyDatabaseConnection" connectionString="Data Source=myServer; Database=MyDatabase.sdf;Trusted_Connection=True;Persist Security Info=True;Pooling=false" providerName="System.Data.SqlClient" /> 
```

代码：

```
public class MyDbContext: DbContext
{
    public MyDbContext()
        : base("MyDatabaseConnection")
    {
    }

    public DbSet<User> Users { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);
        modelBuilder.Configurations.Add(new UserConfiguration());
    }
}

public class UserConfiguration : EntityTypeConfiguration<User>
{
    public UserConfiguration()
    {
        ToTable("User");
        Property(u => u.ID).HasColumnName("UserID").HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
    }
}

protected void Application_Start()
{
    Database.SetInitializer<MyDbContext>(new MyDbContextInitializer());
    using (MyDbContext db = new MyDbContext())
    {
        db.Database.Initialize(false);
    }
    ...
}

public class MyDbContextInitializer : DropCreateDatabaseIfModelChanges<MyDbContext>
{
    protected override void Seed(MyDbContextcontext)
    {
        base.Seed(context);
        SeedMembership();
    }

    private void SeedMembership()
    {
        WebSecurity.InitializeDatabaseConnection(ConfigurationManager.ConnectionStrings["MyDatabaseConnection"].ConnectionString, "System.Data.SqlClient", "User", "UserID", "UserName", true);
        WebSecurity.CreateUserAndAccount("doe1", "password11", new { FirstName = "John", LastName = "Doe" });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T06:36:36.267

*   打开 IIS 管理控制台
*   打开应用程序池节点
*   选择与您的网站对应的应用程序池
*   右键单击应用程序池并选择“高级设置”
*   在流程模型部分选择身份
*   选择本地系统

![在此处输入图像描述](../Images/56757bb7cfedc66facef5979f030f92e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T15:08:46.157

我有一个类似的问题，尝试将您的连接字符串更改为：

```
<add name="MyDatabaseConnection" connectionString="Data Source=myServer; Database=MyDatabase.sdf;Trusted_Connection=True;" providerName="System.Data.SqlClient" /> 
```

所以只需删除`Persist Security`and `Pooling`。看看这是否有效

# javascript - HTML5 是否支持任何类型的多边形遮罩？

> ID：13558798
> 
> 赞同：0
> 
> 时间：2012-11-26T04:46:57.893
> 
> 标签：javascript, css, html

我很好奇是否有可能（使用画布或 CSS）在 JPG 或 PNG 上放置蒙版以使其某些部分透明。具体来说，我想在图像上定义一个圆圈，并让该圆圈内的像素保持不透明，但让图像的所有其他部分变得透明。

我是 Java，这是一个相当简单的操作，但我在 Javascript 中没有找到任何类似的东西，我想知道这是否根本不可能。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:49:48.813

只需从 css 技巧中查看这个[-webkit-mask 教程。](http://css-tricks.com/webkit-image-wipes/)

**CSS**

```
.circle-mask {
    -webkit-mask-box-image: url(mask.png);
} 
```

结果

![CSS 掩码](../Images/b5ff14ac5458a61c15e940c4ebbe420f.png)

相关链接：

*   [CSS3 -webkit-mask 属性。](http://blog.romanliutikov.com/coding/css3-webkit-mask-property/)
*   [使用图像作为蒙版](http://developer.apple.com/library/safari/#documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Masks/Masks.html)
*   [-webkit-mask-image](https://developer.mozilla.org/en-US/docs/CSS/-webkit-mask-image)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:53:13.877

您可以使用[SVG 过滤器](http://www.w3.org/TR/SVG/filters.html)来创建类似“混合模式”的东西。您可以使用 ie Inkscape 来组合这些效果。如果您熟悉语法，您可以创建很多效果。或许你可以张贴一张想要效果的图片，比它应该更容易看到可以做什么。还有一些 js 库可以对图像进行某些效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T05:22:20.483

您还可以使用 SVG 中的[mask](http://www.w3.org/TR/SVG/masking.html#Masking)标签来实际放置具有不同渐变的圆圈图像，看看这是否有帮助？

# algorithm - 在 O (V + E) 中验证 Dijkstras 算法

> ID：13558800
> 
> 赞同：3
> 
> 时间：2012-11-26T04:47:11.650
> 
> 标签：algorithm, graph, computer-science, dijkstra

我正在努力解决这个问题：

Gaedel 教授编写了一个程序，他声称该程序实现了 Dijkstra 算法。该程序为 V 中的每个顶点 v 生成 vd 和 v.π。给出一个 O.(V + E) 时间算法来检查教授程序的输出。它应该确定 d 和 π 属性是否与某些最短路径树的属性相匹配。您可以假设所有边权重都是非负的。

vd 是从起始节点到 vvπ 的最短距离是 v 在从起始节点到 v 的最短路径中的前任

我的想法是：对于每个顶点 (i)，将 id 与 (i.π).d 进行比较。如果 i 的前任具有更大的 d 值，那么我们就不可能有最短路径树。

我相信这可以检查教授的输出是否不是最短路径树，但我认为它不能确认输出是最短路径树。如果没有更多信息，我想不出办法做到这一点。

我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T06:06:05.877

我*认为*这会奏效

做一个 DFS，但不是遵循常规的图边，而是只遵循每个顶点的 π 值。您这样做是为了产生拓扑排序，以便完成的第一个顶点将是拓扑排序中的第一个顶点。请注意，您生成的拓扑排序中的第一个顶点将是提供给 Gaedel 算法的“源”顶点。

现在你有了一个拓扑排序，你可以以最有效的顺序放松边缘，就像你在 DAG 上做的那样。

```
for each v in topoSortedVerts
    if v.d_verify != v.d_Gaedel
        //fail

    for each u in v.adjacencies
        relax(v, u)

if v.d_verify != v.d_Gaedel
    //fail 
```

我认为您可能还需要确保考虑所有 V 顶点，并且源顶点匹配。也许。另外，我猜 Gaedel 的前任子图由 π 值诱导可能真的被抬高了，并且有各种疯狂的错误，但我认为它没有。

这是`O(V + E)`因为外部循环运行`V`时间，而内部循环`E`使用聚合分析运行时间。

# ruby-on-rails - 如何使方法在seeds.rb中工作

> ID：13558801
> 
> 赞同：1
> 
> 时间：2012-11-26T04:47:29.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake-task

我有`undefined method`# `when lauch`$ rake db:seeds` 的错误 add_friend' 。我正在尝试通过 rake 任务添加朋友，它在用户模型中定义。但该方法无法使用。

**这是 db/seeds.rb 文件**

```
require 'faker'
require 'populator'

User.destroy_all

10.times do
  user = User.new
  user.username = Faker::Internet.user_name
  user.email = Faker::Internet.email
  user.password = "test"
  user.password_confirmation = "test"
  user.save
end

User.all.each do |user|  
  Flit.populate(5..10) do |flit|
    flit.user_id = user.id
    flit.message = Faker::Lorem.sentence
  end

  3.times do
    User.add_friend(User.all[rand(User.count)])
  end
end 
```

并且有用户文件。

```
class User < ActiveRecord::Base
  # new columns need to be added here to be writable through mass assignment
  attr_accessible :username, :email, :password, :password_confirmation

  attr_accessor :password
  before_save :prepare_password

  validates_presence_of :username
  validates_uniqueness_of :username, :email, :allow_blank => true
  validates_format_of :username, :with => /^[-\w\._@]+$/i, :allow_blank => true, :message => "should only contain letters, numbers, or .-_@"
  validates_format_of :email, :with => /^[-a-z0-9_+\.]+\@([-a-z0-9]+\.)+[a-z0-9]{2,4}$/i
  validates_presence_of :password, :on => :create
  validates_confirmation_of :password
  validates_length_of :password, :minimum => 4, :allow_blank => true

  has_many :flits, :dependent => :destroy

  has_many :friendships
  has_many :friends, :through => :friendships

  def add_friend(friend)
    friendship = friendships.build(:friend_id => friend.id)
      if !friendship.save
        logger.debug "User '#{friend.email}' already exists in the user's friendship list."
      end
  end

  # login can be either username or email address
  def self.authenticate(login, pass)
    user = find_by_username(login) || find_by_email(login)
    return user if user && user.password_hash == user.encrypt_password(pass)
  end

  def encrypt_password(pass)
    BCrypt::Engine.hash_secret(pass, password_salt)
  end

  private

  def prepare_password
    unless password.blank?
      self.password_salt = BCrypt::Engine.generate_salt
      self.password_hash = encrypt_password(password)
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T04:52:04.057

使 add_friend 成为类方法

```
def self.add_friend(friend)
    friendship = friendships.build(:friend_id => friend.id)
      if !friendship.save
        logger.debug "User '#{friend.email}' already exists in the user's friendship list."
      end
end 
```

或称其为`User.new.add_friend(User.all[rand(User.count)])`

高温高压

# javascript - 无法在 javascript 对象中创建函数

> ID：13558807
> 
> 赞同：0
> 
> 时间：2012-11-26T04:48:02.227
> 
> 标签：javascript

我有两个对象

```
function Response(dbResponseId, responseText){
    this.response = {
        "dbResponseId" : dbResponseId,
        "responseText" : responseText,
        "isDeleted" : false,

    };  

    this.setResponseText = function(responseText){
        this.response.responseText = responseText;
        return this.response;

    };

    this.getId = function(){
        return this.response.frontEndId;
    };
    this.deleted = function(){
        this.response.isDeleted = true;
    };
    return this.response; 
}

function OptionGroup(responses, dbOptionGroupId,isDeleted,id){
    this.optionGroup = {"dbOptionGroupId" : dbOptionGroupId, "responses" : responses, "isDeleted" : isDeleted,"frontEndId" : id};

    this.setResponses = function(responses){
        this.optionGroup.responses = responses;
        return this.optionGroup;
    };
    this.addResponse = function(response){
        this.optionGroup.responses.push(response);
        return this.optionGroup;
    };
    this.getId = function(){
        return this.optionGroup.frontEndId;
    };
    this.setId = function(id){
        this.optionGroup.frontEndId = id;
        return this.optionGroup;
    };
    this.deleted = function(){
        this.optionGroup.isDeleted = true;
        return this.optionGroup;
    };
    this.getResponsesById = function(id){
        for(var i = 0; i < this.optionGroup.responses.length;i++){
            if(id == this.optionGroup.responses[i].getId()){
                return this.optionGroup.responses[i];
            }
        }
        return null;
    };

    return this.optionGroup;
} 
```

但是，当我尝试调用我创建的任何函数时，控制台会告诉我该对象没有这样的函数。当我在控制台中打印出 Response 或 OptionGroup 对象时，我可以看到对象中的字段，但看不到任何功能。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T04:51:06.913

[当您从用作构造函数的对象返回某些内容时，如上面的代码所做的那样，该值就是`new`调用的结果。](https://stackoverflow.com/questions/3350215/what-is-returned-from-a-constructor)请注意，返回的对象 (`this.response`和`this.optionGroup`) 都没有您有兴趣调用的函数。

最简单的解决方案是删除`return`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:17:20.303

不知道马特的回答是否明确，但是：

```
> return this.optionGroup; 
```

表示函数返回`optionGroup`对象，而不是 . 引用的新对象`this`。

构造函数`this`默认返回，所以没有 return 语句等价于：

```
return this; 
```

功能相同`Response`。

当然，假设您使用`new`.

# c# - 普通人应该如何在 Windows Phone 8 应用程序中保留设置？

> ID：13558809
> 
> 赞同：19
> 
> 时间：2012-11-26T04:48:17.127
> 
> 标签：c#, windows-8, windows-phone-8

我正在编写一个 Windows Phone 8 应用程序，因此我可以占领如此抢手的 3% 市场份额，并且很难在应用程序中保留用户设置。

我第一次看到[这个博客](http://windows-mobile-dev.blogspot.com/2012/06/how-to-uses-isolated-storage-api-in.html)，它介绍了 Windows.Storage 命名空间的基础知识，它旨在完成这类事情。耶！

但是，我猜作者从未真正*运行*过他自己的代码，否则他会知道你调用的第二个`ApplicationData.Current.LocalSettings`，你会得到一个`NotImplementedException`异常。 [我们去 MSDN！](http://msdn.microsoft.com/en-US/library/windows/apps/windows.storage.applicationdata.localsettings)

好吧，这很清楚地表明这个 API 没有在 Windows Phone 8 上实现。当它说“这个 API 没有实现，如果调用会抛出异常”时，我得出了这个结论。- 那太好了。

所以，也许还有其他一些类似的 API。在谷歌搜索后，我发现了[这个博客](http://www.silverlightshow.net/items/Windows-8-Apps-The-8-Must-Know-Tricks-Day-6.aspx)。它被称为“Windows 8 应用程序 - 必须知道的技巧！”。这看起来很官方！它涵盖了各种*看起来很酷的*持久性 API，包括永久和临时存储、漫游存储等。

但你猜怎么着：`RoamingFolder`, `RoamingSettings`, `TemporaryFolder`, `LocalSettings`- Windows Phone 8 上都没有实现。

实现这些有点关键的功能只是让他们忘记了吗？我应该创建一个本地 SQL 数据库来存储基本的应用程序设置，还是有一些我没有找到的简单的东西？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-26T05:17:55.717

啊哈！想通了。我挖掘了 Windows Phone 7 API 文档，旧版 API 实际上仍然可以在 Windows Phone 8 上运行。

```
public static void Session_PersistSession(string ticket)
{
   if (IsolatedStorageSettings.ApplicationSettings.Contains("SessionTicket"))
   {
      IsolatedStorageSettings.ApplicationSettings["SessionTicket"] = ticket;
   }
   else
   {
      IsolatedStorageSettings.ApplicationSettings.Add("SessionTicket", ticket);
   }

   IsolatedStorageSettings.ApplicationSettings.Save();
}

public static string Session_LoadSession()
{
   string ticket;
   if (IsolatedStorageSettings.ApplicationSettings.TryGetValue<String>("SessionTicket", out ticket))
   {
      return ticket;
   }

   return null;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T05:22:35.927

这里有几个选择......

1.  [支持LocalFolder](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402541%28v=vs.105%29.aspx#BKMK_Localfolder)，因此您可以将您想要的任何状态序列化到那里的文件。
2.  查看[IsolatedStorageSettings](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.io.isolatedstorage.isolatedstoragesettings%28v=vs.105%29.aspx)类，特别是[ApplicationSettings](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.io.isolatedstorage.isolatedstoragesettings.applicationsettings%28v=vs.105%29.aspx)属性

此外，这可能会提供更多上下文：[How to preserve and restore app state for Windows Phone](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff967547%28v=vs.105%29.aspx)

# mips - MIPS RISC count 存储在寄存器 $a0 中的非零位数

> ID：13558810
> 
> 赞同：0
> 
> 时间：2012-11-26T04:48:32.210
> 
> 标签：mips

如果我理解正确，寄存器文件是一个整数数组。所以我首先需要将寄存器 $a0 转换为二进制，对吗？一旦我这样做了，我将如何访问它的各个位？我想我可能需要使用掩码，但在我对它进行 ORed 或 ANDed 之后，我想不出一种方法来访问寄存器的各个元素。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T04:50:46.773

您不会“将整数转换为二进制”。整数作为位存储在寄存器中。二进制是整数的*文本表示*。

您想用 AND 屏蔽寄存器的各个位，并测试该结果是否为非零。

```
// Assuming 32-bit registers
int reg = .... // Your register...
int count = 0;
for (int i=0; i<32; i++) {
    uint32_t mask = 1<<i;
    if (reg & mask)
        count++;
} 
```

# ruby - 从数据库而不是文件系统导入 SASS 文件

> ID：13558811
> 
> 赞同：5
> 
> 时间：2012-11-26T04:48:34.737
> 
> 标签：ruby, sass, compass-sass

我对 Ruby 没有太多经验。我想从数据库而不是文件系统@import sass。我在网上没有找到任何例子。我应该如何实施这一点。我看到我必须扩展一个导入器类，但由于我对 ruby​​ 不了解，我需要知道这个类在我的文件系统中的哪个位置（只是为了检查一下）以及通常涉及的基本步骤是什么。

更多信息

MySQL 数据库包含 sass 内容。因此，在我的 Web 应用程序中，我接受来自用户的 sass（作为字符串），其中可能包含导入语句，例如：

```
@import test.scss
body  { color:red } 
```

现在在我的 MySQL DB 中，我会有这样的东西

```
Table  sass_files
column_name             filename  |   content
example row             test.scss |   p {color:blue;} 
```

我想让这个导入工作，确保我可以做一个正则表达式匹配以从用户输入中获取文件名，然后通过该文件名查询数据库并获取内容。但我读到有一种很好的方法可以让 ruby​​/sass 使用 DB 作为加载路径而不是文件系统。

更新

所以我用 find 方法创建了一个虚拟的自定义导入器类

```
def find(name, options)
  Sass::Engine.new("p { color :blue; }", options)
end 
```

如何在不使用 ruby​​ 的情况下将此导入器添加到 sass 加载路径，例如我可以更改 sass gem 文件夹中的源文件并将此导入器添加到 lib/sass/importers 吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T05:51:04.410

开箱即用，sass 只会导入本地文件（其他任何东西都被编译成 CSS @import 语句），但[正如 sass 文档解释的那样，您可以通过扩展](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#custom_importers)[Sass::Importers::Base](http://sass-lang.com/docs/yardoc/Sass/Importers/Base.html)类来编写自己的自定义导入器。

[这个](https://stackoverflow.com/a/6861985/131226)对另一个问题的回答给出了一个自定义 HTTP 导入器的示例。您可以通过（至少）两种方式来解决这个问题：为您的数据库编写自定义导入器或通过 HTTP 从数据库提供 sass 文件（通过简单的 PHP 页面或其他方式）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T23:11:53.597

由于您使用 Compass 进行编译，因此您可以在 Compass 配置文件中添加自定义 Sass 导入器。例如，使用 编译`compass compile -c config.rb`，您将在`config.rb`文件中包含以下内容：

```
require File.join(File.dirname(__FILE__), 'importer.rb')
Sass.load_paths << Sass::Importers::Custom.new() 
```

然后在`importer.rb`同一个目录中，您将包含您的导入器定义：

```
module Sass
    module Importers
        class Custom < Base
            def find(name, options)
                if name == '[globals]'
                    options[:syntax] = :scss
                    options[:filename] = 'globals'
                    options[:importer] = self
                    return Sass::Engine.new("$imported-variable: blue;", options)
                else
                    return nil
                end
            end

            def find_relative(uri, base, options)
                nil
            end

            def key(uri, options)
                [self.class.name + ":" + uri, uri]
            end

            def mtime(uri, options)
                nil
            end

            def to_s
                '[custom]'
            end
        end
    end
end 
```

然后在您的 Sass 文件中，您可以使用导入器：

```
@import '[globals]';
p {
    color: $imported-variable;
} 
```

当然，这只是一个只接受 URI 匹配的虚拟实现`"[globals]"`。您需要提供自己的实现来访问您的 MySQL 数据库，因为我对 Ruby 中的数据库访问没有任何经验。不过，除了@Sean 提供的链接之外，希望这能让您更接近一点。

# amf - amf0 还在用吗？amf3 中的 amf0 是否有向后兼容性？

> ID：13558812
> 
> 赞同：0
> 
> 时间：2012-11-26T04:48:35.903
> 
> 标签：amf

amf0 还在用吗？

amf3 中的 amf0 是否有向后兼容性？

当前版本的 Adob​​e flex 使用哪种编码——amf0 或 amf3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:09:03.450

amf0 用于 as2。amf3 用于 amf3，但如果需要，您可以切换到 amf0。

所以很少使用amf0

是的，有向后兼容性

flex 使用 amf3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T14:33:42.180

截至 2015 年，AMF0 仍被广泛用作 FLV 文件的元数据格式。

虽然 MPEG-4 Part 14（或简称 MP4）文件格式已在很大程度上取代了大多数工作流程的 FLV，但在将实时视频发布到 Adob​​e Media Server、Wowza 或 nginx-rtmp 等 RTMP 服务器时仍会使用它。

因此，它用于由 NetStream 实例处理的 FLV 事件，如下所示：

```
netStream.onMetaData = function(myMeta) { 
  for (var i in myMeta) { 
      trace(i + ":\t" + myMeta[i]) 
  } 
}; 
```

# css - 如何更改或删除css中的引号符号

> ID：13558813
> 
> 赞同：0
> 
> 时间：2012-11-26T04:48:38.210
> 
> 标签：css, quotes, symbols

我一直在尝试用萤火虫和其他检查工具找到这个符号的位置。

您可以在此屏幕截图中看到红色的符号市场。我想将其移除或至少更改颜色以使其与背景融为一体。

![您可以在这里看到红色的符号市场](../Images/db14c957137ff1fa1fa232294a344132.png)

这是网页： [http ://npmaudiovisual.com/esde/?page_id=41](http://npmaudiovisual.com/esde/?page_id=41)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:51:13.437

*style.css 中的第 88 行：*

```
q:before, q:after{ content: "'";} 
```

删除或覆盖声明。

要覆盖，请向选择器添加特异性：

```
q:before, q:after{ content: "'";} /* original declaration */
body q:before, body q:after{ content: "";} /* override with more specificity */
q:before, q:after{ content: ""!important;} /* override with !important */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T04:51:24.200

在`style.css`第 88 行的文件中，您有：

```
q:before, q:after{ content: "'";} 
```

这是添加`'`字符。将其删除或将其覆盖为空字符串 ( `content: ""`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T04:54:32.540

现在只需在**样式表中****添加**这个 css

 **```
.entry_content q:before, .entry_content q:after {
    content: "";
} 
```**

# ios - IOS：在注销/登录时，谷歌驱动器每次都要求授予权限

> ID：13558816
> 
> 赞同：1
> 
> 时间：2012-11-26T04:48:58.457
> 
> 标签：ios, xcode, google-api, google-drive-api

我将 google drive sdk 与我的 ios 应用程序集成在一起。但问题是当我注销并登录到谷歌驱动器时，它每次都要求我授予权限。如何设置只询问一次此权限？

-洛甘那坦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T04:32:48.803

您需要存储刷新令牌。当您将用户重定向到 google 登录页面时，您应该添加以下参数`access_type=offline`，然后当您交换访问令牌的代码时，它也会返回一个 refresh_token。您需要确保存储刷新令牌，因为通常您只会在用户第一次登录您的应用程序时收到它。该过程在此处进行了说明[https://developers.google.com/accounts/docs/OAuth2WebServer#offline](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)

# c - GCC 抽象语法树

> ID：13558818
> 
> 赞同：0
> 
> 时间：2012-11-25T19:17:44.703
> 
> 标签：c, gcc

我试图理解 GCC 在解析源文件时构造的抽象语法树的结构，但我发现它令人困惑，并且没有太多可用的信息。有人可以解释它是如何工作的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:50:20.540

GCC 树表示在[GCC Internals](http://gcc.gnu.org/onlinedocs/gccint)文档中进行了描述，特别是关于[GENERIC](http://gcc.gnu.org/onlinedocs/gccint/GENERIC.html#GENERIC)的部分。

# algorithm - Fractional Knapsack +“产生的解决方案小于 0/1 背包的最优解的 1%。”

> ID：13558823
> 
> 赞同：0
> 
> 时间：2012-11-26T04:49:39.413
> 
> 标签：algorithm, knapsack-problem

我正在审查即将进行的测试，并想知道是否有人可以重述问题的 b 部分。这是通过的审查表中的文字，但我不确定 b 部分到底在问什么。我更严格地猜想“产生的解决方案小于 0/1 背包问题的最佳解决方案的 1%”是什么意思。

a) 解决以下背包问题的例子，即给出每个选择的对象的分数和最佳背包的值。显示步骤：

背包容量为 C = 100

** 他在这里列出了对象、它们的值和权重。在表中**

b) [10pts] 举一个包含两个对象的示例，表明用于分数背包问题的相同贪心方法（稍作修改以省略贪心方法选择的最后一个对象，如果它不适合）产生的解决方案是小于 0/1 背包问题的最优值的 1%。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:44:41.907

通常，贪婪启发式对于背包问题非常有效。如果您只是随机提出一个小问题实例，那么应用贪心启发式可能会产生一个好的，甚至可能是最优的解决方案。（解决方案的质量是通过取其包含的对象的总值，并计算其与最优解决方案中包含的对象的总值之比来衡量的。）

这个问题要求你想出一个令人讨厌的问题实例（即具有值和权重的对象列表），它使贪婪启发式算法非常混乱，以至于应用它会产生一个背包，其中仅包含最佳解决方案将包含的值的 1% .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:28:49.787

我理解 b) 部分要求表明贪心算法不是最优的，而且可以产生不到最优值的 1%。小型实例已经是这种情况。考虑以下实例：

```
Item 1: profit 2, weight 1 (efficiency is 2/1 = 200/100 = 2)
Item 2: profit 400, weight 400 (efficiency is 400/400 = 1)

Knapsack capacity: 400 
```

请注意，这些项目是按效率的非递增顺序给出的，这是贪心算法处理它们的顺序。现在贪心算法会选择第 1 项，因为它适合，但现在第 2 项无法选择。这会产生 2 的利润。但是，选择项目 2 会产生 400 的利润。总的来说，贪心算法产生的利润为 2，其中最优值至少为 400，因此贪心算法产生的利润不到最优利润。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-26T05:20:04.957

背包问题属于NP。我认为第二部分要求基于贪心策略的多项式时间逼近算法（其中最优解具有指数时间复杂度），它给出的解与最优解仅相差 1%。

例如，如果最佳答案是 100，则近似算法应给出 99 或 101 的结果。

# css - 更高分辨率的登录页面对齐问题

> ID：13558826
> 
> 赞同：-1
> 
> 时间：2012-11-26T04:50:14.980
> 
> 标签：css

我设计了一个登录页面，其中包括用户名文本框、密码文本框、登录按钮、记住我链接和忘记密码链接，但最后两个链接在更高分辨率下不正确，我该如何对齐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:13:06.083

如果您还没有这样做，您可以将链接包装在 div 容器中，并将其与表单的其余部分正确对齐。

但我确实同意，如果你向我们展示在更小和更高的分辨率上到底发生了什么，那会更容易。你试过不同的浏览器吗？一些渲染引擎以不同的方式解释某些元素，这也可能在以后给您带来麻烦。

干杯!

# facebook - 如何使用 FQL 获得所有朋友的页面赞

> ID：13558829
> 
> 赞同：2
> 
> 时间：2012-11-26T04:50:49.160
> 
> 标签：facebook, facebook-fql

我一直在使用以下 FQL，试图弄清楚如何获得我所有朋友的页面喜欢：

```
SELECT name FROM page WHERE page_id IN 
    (SELECT page_id FROM page_fan WHERE uid IN 
        (SELECT uid1, uid2 FROM friend WHERE uid1 = me())
    ) 
```

它在某种程度上符合我的喜好，但我无法分辨哪个“uid”属于哪个页面名称。返回类似以下内容：

```
{
  "data": [
    {
      "name": "Snoop Dogg"
    }, 
    {
      "name": "Good Grief"
    }, 
    {
      "name": "Aaliyah"
    }
  ]
} 
```

我也尝试过使用 Graph API，但它超时了。有什么方法可以让我的结果看起来更像：

```
{
  "data": [
    {
      "uid" : "987234",
      "name": "Snoop Dogg"
    }, 
    {
      "uid" : "987234",
      "name": "Good Grief"
    }, 
    {
      "uid" : "234789",
      "name": "Aaliyah"
    }
  ]
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:14:47.430

/[Friend-ID]/likes 对我来说很好用。当然，要获得“friends_likes”的许可。这也适用于我，只是需要一些时间，因为它得到了每个朋友的喜欢：

```
SELECT page_id, name FROM page WHERE page_id IN 
   (SELECT page_id FROM page_fan WHERE uid IN 
   (SELECT uid1, uid2 FROM friend WHERE uid1 = me())
) 
```

要将页面连接到用户，您需要一个 JOIN。无论如何，我更喜欢使用 Graph API 并仅为一个用户获取它。

如果您只需要Page的ID和User ID，那么如果您只使用第一个Sub-Select，还有一个更简单的方法：

```
SELECT uid, page_id FROM page_fan WHERE uid IN 
       (SELECT uid1, uid2 FROM friend WHERE uid1 = me()) 
```

不幸的是，FQL 中没有 JOIN，但是有 Multiqueries：

> [https://developers.facebook.com/docs/technical-guides/fql](https://developers.facebook.com/docs/technical-guides/fql)

因此，query1 将是上面的最后一个，query2 将是这样的：

```
SELECT page_id, name FROM page WHERE page_id IN (SELECT page_id FROM #query1)" 
```

# c++ - stl 优先级队列中的堆管理是否调用了复制构造函数？

> ID：13558834
> 
> 赞同：2
> 
> 时间：2012-11-26T04:51:07.730
> 
> 标签：c++, stl, c++11, priority-queue

我知道 stl 优先级队列使用`make_heap`、`push_heap`和`pop_heap`来管理底层 stl 容器（例如向量）。

`make_heap`在、`push_heap`和调用期间移动元素时是否调用了元素的复制构造函数`pop_heap`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:57:59.443

根据标准，`push_heap`要求`make_heap`值类型（`*iterator`）为`MoveAssignable`and `MoveConstructible`；`pop_heap`并且`sort_heap`还要求迭代器类型是`ValueSwappable`，这需要`swap`工作，这也要求值类型是`MoveAssignable`and `MoveConstructible`。

我的解释是标准库只能调用可以满足移动语义的操作，可以通过在其值类型的复制构造函数和复制赋值运算符已被删除的容器上尝试它来进行测试。

通过快速验证，我在删除了移动构造函数和移动赋值运算符的数据类型上尝试了堆函数。gcc 4.7.2 和 clang 3.2 都产生了编译时错误，抱怨移动操作被删除。删除复制操作的测试编译得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T05:28:41.913

我测试了我的实现。它只使用移动构造函数和移动赋值。由于底层类型是典型的向量或双端队列，我看不出你能做得更好。

您可以通过创建一个只有一个 int（比较对象所需）的虚拟类并将打印语句放入默认构造函数、复制构造函数、移动构造函数、复制赋值运算符和移动赋值运算符来测试自己。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-26T05:01:07.850

尽管这是依赖于实现的，但大多数明智的实现将使用 std::swap 来移动元素，从而避免复制开销。

# android - 如何将整数传递给类的实例并使用它来调用另一个类的方法？

> ID：13558848
> 
> 赞同：2
> 
> 时间：2012-11-26T04:52:27.027
> 
> 标签：android, android-intent, cursor, bundle, adapter

这是活动 1，它是一个列表视图。当用户单击一个项目时，我希望单击该项目以启动一个类的实例并将一个 int 值传递给它，稍后将在开关中使用该值。

```
 @Override
    public void onItemClick(AdapterView<?> adapter, View view,
                int position, long id) {

    switch(position){

   case 0:

       Intent g = new Intent(books.this, SpecificBook.class);
       Bundle b = new Bundle();
       b.putInt("dt", 0);
       g.putExtras(b);
       books.this.startActivity(g);
       break;

    case 1: 
        Intent ex = new Intent(books.this, SpecificBook.class);
       Bundle b1 = new Bundle();
       b1.putInt("dt", 1);
       ex.putExtras(b1);
       books.this.startActivity(ex);
      break;

      //etc. 
```

这是活动 2，它应该检索 int 值并从数据库帮助程序类中调用适当的方法。

```
 public class SpecificBook extends Activity {

       private DatabaseHelper Adapter;

Intent myLocalIntent = getIntent();
 Bundle myBundle = myLocalIntent.getExtras();
  int dt = myBundle.getInt("dt");

 @SuppressWarnings("deprecation")
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
  setContentView(R.layout.listy);

ListView lv = (ListView)findViewById(R.id.listview);     
 Adapter = new DatabaseHelper(this);
 Adapter.open();    
 Cursor cursor = null;

switch(dt){
 case 0:cursor = DatabaseHelper.getbook1Data(); break;
 case 1:cursor = DatabaseHelper.getbook2Data(); break;
  //etc.
}

startManagingCursor(cursor); 
```

等等

数据库方法是查询。基本上，我希望书类列表视图中的每个项目都根据所选项目运行它自己的查询并显示结果。我收到“找不到源”和运行时异常错误。我哪里错了？有没有更好的方法来解决这个问题？

我已经尝试过“getter and setter”方法，但无济于事。我还尝试了意图实例上的“putextra”方法，但没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T04:56:17.800

您可以访问 Intent 的最早时间是`onCreate()`：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.listy);

    Intent myLocalIntent = getIntent();
    Bundle myBundle = myLocalIntent.getExtras();
    int dt = myBundle.getInt("dt"); 
```

* * *

您应该检查 Intent 或 Bundle 是否为空，如果您只想要 Intent 中的一项，您可以使用：

```
Intent myLocalIntent = getIntent();
if(myLocalIntent != null) {
    int dt = myLocalIntent.getIntExtra("dt", -1); // -1 is an arbitrary default value
} 
```

最后，你不需要创建一个新的 Bundle 来传递 Intent 中的值，看起来你只是想传递`position`... 所以你可以大大缩短你的`onItemClick()`方法：

```
@Override
public void onItemClick(AdapterView<?> adapter, View view, int position, long id) {
    Intent g = new Intent(books.this, SpecificBook.class);
    g.putInt("dt", position);
    books.this.startActivity(g);
} 
```

# javascript - 在 javascript 中访问 ajax POST 响应

> ID：13558855
> 
> 赞同：3
> 
> 时间：2012-11-26T04:53:17.477
> 
> 标签：javascript, jquery, asp.net

我正在从 javascript 函数发出 ajax POST 请求：

```
function UpdateMetrics() {
   $.ajax({
              type: "POST",
              url: "MyHandler.ashx?Param1=value1",
              data: "{}",
              contentType: "text/json; charset=utf-8",
              dataType: "text",
              success: function (msg) {
                  var jsonUpdatedData = msg;
                  ...
              }
          });
} 
```

从我的处理程序，我发送 json 字符串：

```
context.Response.write(json); 
```

我想我会得到它`msg`。

我还想发送其他字符串（计数）。因此，我尝试将标头信息与 json 数据一起使用。所以我添加了这一行：

```
context.Response.Headers.Add("MaxCount",Convert.ToString(tempList.Count)); 
```

如果这是正确的方法，我如何在我的`success`函数中访问它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T05:00:38.900

要访问函数中的标头，请在`success`函数中再添加 2 个参数，即状态代码和 jqXHR 对象，您可以在[api.jquery.com](http://api.jquery.com/jQuery.ajax/#jqXHR)阅读文档。

因此，您的函数应如下所示：

```
success: function (msg, status, jqXHR) {
    var jsonUpdatedData = msg;
    ...
} 
```

但是，正如评论中指出的那样，最好不要使用标头发送数据。您可能应该将其包含在您发送的 json 中。

您还需要通过设置告诉 jQuery 将响应解释为 json

```
dataType: "json" 
```

否则，它只会作为文本返回给您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:06:33.043

您可以使用 getResponseHeader 方法实现在 ajax 发布成功后获取标头数据的要求，请参阅以下代码片段。

```
function UpdateMetrics() {
var callback =  $.ajax({
          type: "POST",
          url: "MyHandler.ashx?Param1=value1",
          data: "{}",
          contentType: "text/json; charset=utf-8",
          dataType: "text",
          success: function (msg) {

          var jsonUpdatedData = msg;
        var headerdata = callback.getResponseHeader("MaxCount"); 
// Where MaxCount is name provided in the header.
   ...
          }
      });
} 
```

谢谢

# c# - Web 服务显示 Jquery 令牌输入结果的正确响应应该是什么？

> ID：13558856
> 
> 赞同：0
> 
> 时间：2012-11-26T04:53:17.713
> 
> 标签：c#, jquery, web-services, jquery-plugins, jquery-tokeninput

我正在使用 Jquery 令牌输入插件。我试图从数据库而不是本地数据中获取数据。我的 Web 服务返回的 json 结果被包装在 xml 中：

```
 <?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/">[{"id":"24560","name":"emPOWERed-Admin"},{"id":"24561","name":"emPOWERed-HYD-Visitors"}]</string> 
```

我已经检查了网站[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)，它说脚本应该以以下格式输出 JSON 搜索结果：

```
[
    {"id":"856","name":"House"},
    {"id":"1035","name":"Desperate Housewives"}
] 
```

两者似乎是相同的，但我仍然没有得到我页面中显示的项目。

我也在发布我的代码。我的 Js 代码：DisplayTokenInput.js

```
 $(document).ready(function() {
     $("#textboxid").tokenInput('PrivateSpace.asmx/GetDl_info', {

            hintText: "Type in DL Name", theme: "facebook",
            preventDuplicates: true,
            searchDelay: 200

            });
    }); 
```

我的网络服务代码：

```
[WebMethod]

    [ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
     public string GetDl_info(string q)
    {
        string dl_input = string.Empty;
        DataSet ds;
        PSData ObjDl = new PSData();
        ds = ObjDl.GetDistributionList(q);

        List<DistributionList> DLObj = new List<DistributionList>();

        foreach (DataRow datarow in ds.Tables[0].Rows)
        {
            DistributionList dl_list = new DistributionList();
            dl_list.id = Convert.ToString(datarow["id"]);
            dl_list.name = Convert.ToString(datarow["name"]);

            DLObj.Add(dl_list);
        }

        dl_input = JsonConvert.SerializeObject(DLObj);

        return dl_input;

    }

 }
public class DistributionList
    {
        public string id { get; set; }
        public string name { get; set; }
    } 
```

我发布了 aspx 代码的头部以显示我包含的库文件：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
  <title>Untitled Page</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

   <link href="../Styles/jquery-ui-1.8.20.custom.css" rel="stylesheet" type="text/css" />
      <link href="../Styles/token-input.css" rel="stylesheet" type="text/css" />

    <link href="../Styles/token-input-facebook.css" rel="stylesheet" type="text/css" />

    <script src="Scripts/Lib/jquery-1.7.2.min.js" type="text/javascript"></script>  

    <script src="../Scripts/jquery.tokeninput.js" type="text/javascript"></script>--%>

    <script src="DisplayTokenInput.js" type="text/javascript"></script>
<head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:20:14.403

我假设插件的代码没有将 ajax 请求的内容类型设置为 JSON，因此您可以在使用 $.ajaxSetup 进行服务调用之前自己完成，即：

```
$.ajaxSetup({
  contentType: "application/json; charset=utf-8"
}); 
```

更新：显然 asmx 服务有时会在 'charset=utf-8' 部分出现问题，所以如果这不起作用，您可以尝试仅使用 'application/json'

**更新 2**：

我认为这不是导致问题的 contentType，请使用以下命令强制 POST 处理 ajax 请求，看看是否可以解决问题：

```
$.ajaxSetup({
  type: "POST", contentType: "application/json; charset=utf-8"
}); 
```

**更新 3**：

您正在使用的插件中有一个默认设置可以将请求从 GET 更改为 POST。请参阅此处的 GitHub 存储库：[jquery.tokeninput.js](https://github.com/loopj/jquery-tokeninput/blob/master/src/jquery.tokeninput.js)

并在项目中的 js 文件副本中，更改以下行：

```
var DEFAULT_SETTINGS = {
    // Search settings
    method: "GET", 
```

至

```
var DEFAULT_SETTINGS = {
    // Search settings
    method: "POST", 
```

我还假设插件以忽略全局 jquery ajax 设置的方式构造查询，因此您不再需要包含我之前的片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:23:20.107

您需要确保您的请求是 POST 请求。不是获取请求。请参阅此答案以了解有关原因的更多信息：[如何让 ASMX 文件输出 JSON](https://stackoverflow.com/questions/211348/how-to-let-an-asmx-file-output-json)

# ruby-on-rails - 如何在推特输出中显示：文本值

> ID：13558859
> 
> 赞同：0
> 
> 时间：2012-11-26T04:53:40.513
> 
> 标签：ruby-on-rails, twitter

所以在我的 ArticlesController 中我设置了这个......

```
@most_recent_tweets = Twitter.home_timeline(count:1) 
```

并在文章 index.html.erb 文件中...

```
 <% @most_recent_tweets.each do |tweet| %>
        <%= tweet["attrs"] %>
    <% end %> 
```

这工作正常......我得到以下输出......

```
{:created_at=>"Mon Nov 26 04:45:31 +0000 2012", :id=>272924019395813376, :id_str=>"272924019395813376", :text=>"Episode 394: STI and Polymorphic Associations (pro) http://t.co/UrLLdY1n", :source=>".....etc} 
```

所以这是我的问题..我如何只显示 :text 的值？

我希望我的输出是....

```
Episode 394: STI and Polymorphic Associations (pro) http://t.co/UrLLdY1n 
```

我该怎么做呢？（感谢您的时间）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:58:54.157

明白了...鸣叫[“文本”]

所以....

```
<% @most_recent_tweets.each do |tweet| %>
    <%= tweet["attrs"] %>
<% end %> 
```

变成……

```
<% @most_recent_tweets.each do |tweet| %>
    <%= tweet["text"] %>
<% end %> 
```

# javascript - Twitter Bootstrap 在 Modal 内部的形式很丑陋

> ID：13558860
> 
> 赞同：2
> 
> 时间：2012-11-26T04:53:51.310
> 
> 标签：javascript, css, twitter-bootstrap, modal-dialog

我刚刚有一个用例来使用 Bootstrap 查看模态框内的表单。但它看起来不一样。我需要插入所有表单标签和大量的东西只是为了让它们看起来不错。你们能建议我我在做什么错吗？文本框也看起来很奇怪（小和大小改变了）

[http://jsbin.com/welcome/53151/edit](http://jsbin.com/welcome/53151/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:01:44.283

JSBin CSS 干扰了 Bootstrap CSS。

这看起来不错：http: [//jsbin.com/welcome/53151](http://jsbin.com/welcome/53151)

在全屏视图中，仅包含您编写的代码和您选择的库。在编辑视图中，JSBin.com 样式也适用于您的 HTML。

# c++ - 使用 MPI::Send 可以发送的最大数据量

> ID：13558861
> 
> 赞同：6
> 
> 时间：2012-11-26T04:53:54.673
> 
> 标签：c++, mpi

使用 MPI::Isend 的语法为

```
MPI::Request MPI::Comm::Isend(const void *buf, int count, 
              const MPI::Datatype& datatype, 
              int dest, int tag) const; 
```

是限制发送的数据量

```
std::numeric_limits<int>::max() 
```

许多其他 MPI 函数具有 int 参数。这是 MPI 的限制吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T12:20:20.510

MPI-2.2 将数据长度参数定义为`int`. 这可能是并且通常是大多数 64 位 Unix 系统的问题，因为`int`它仍然是 32 位。这样的系统被称为 LP64，这意味着`long`指针是 64 位长的，而指针`int`是 32 位长的。相比之下，Windows x64 是 LLP64 系统，这意味着`int`和`long`都是 32 位长，`long long`而指针是 64 位长。用于 64 位 x86 CPU 的 Linux 是 LP64 类 Unix 系统的一个示例。

鉴于 MPI-2.2 实现中的上述所有内容，都具有元素`MPI_Send`的消息大小限制。`2^31-1`可以通过构造用户定义的类型（例如连续类型）来克服限制，这将减少数据元素的数量。例如，如果您注册了`2^10`一些基本 MPI 类型的元素的连续类型，然后您使用`MPI_Send`发送`2^30`这种新类型的元素，则将产生`2^40`基本类型元素的消息。在这种情况下，如果某些 MPI 实现用于`int`在内部处理元素计数，它们可能仍然会失败。它也中断了`MPI_Get_elements`，`MPI_Get_count`因为它们的输出`count`参数是 type `int`。

MPI-3.0 解决了其中一些问题。例如，它提供了使用typedef 作为参数的`MPI_Get_elements_x`and`MPI_Get_count_x`操作。被定义为能够保存指针值，这使得它在大多数 64 位系统上为 64 位长。还有其他扩展调用（全部以 结尾）代替. 旧的/操作被保留，但现在如果计数大于输出参数可以保存的值，它们将返回（此说明在 MPI-2.2 标准中不存在，并且在未定义的行为中使用非常大的计数）。`MPI_Count``count``MPI_Count``_x``MPI_Count``int``MPI_Get_elements``MPI_Get_count``MPI_UNDEFINED``int`

正如 pyCthon 已经指出的那样，C++ 绑定在 MPI-2.2 中已弃用，并已从 MPI-3.0 中删除，因为 MPI 论坛不再支持。您应该使用 C 绑定或求助于第 3 方 C++ 绑定，例如`Boost.MPI`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:00:00.033

我没有做过 MPI，但是，int 是数组的通常限制大小，我怀疑这就是限制的来源。

在实践中，这是一个相当高的限制。您是否需要发送超过 4 GB 的数据？（在单个 Isend 中）

有关更多信息，请参阅[C++ 中是否存在最大数组长度限制？](https://stackoverflow.com/questions/216259/is-there-a-max-array-length-limit-in-c)

请注意，链接引用了 size_t，而不是 int（至少在 2012 年，它允许几乎无限的数据） - 然而，在过去，'int' 是此类计数的常用类型，而应该使用size_t，实际上，很多代码仍然使用'int'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T05:07:19.370

an 的最大大小`MPI_Send`将受到您可以分配的最大内存量的限制

和大多数 MPI 实现支持`sizeof(size_t)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-09T07:23:28.450

[在https://github.com/jeffhammond/BigMPI](https://github.com/jeffhammond/BigMPI)上讨论了这个问题和一些解决方法（带有代码）。特别是，该项目演示了如何通过用户定义的数据类型发送超过 INT_MAX 的元素。

# angularjs - 如何在 POST、PUT 或 DELETE 请求后进行 AngularJS $resource 更新？

> ID：13558868
> 
> 赞同：13
> 
> 时间：2012-11-26T04:55:30.223
> 
> 标签：angularjs

在我的 Angular 应用程序中，我将“项目”设置为`$resource`. 在我的控制器中，当页面加载时，我立即通过 GET 请求向服务器请求数据。我可以使用 Angular 的双向数据绑定在浏览器中编辑信息，然后可以通过 POST 请求将数据保存回服务器，如下所示：

（为简洁而编辑/简化）

```
function ProjectCtrl($scope, $routeParams, Project) {
    $scope.project = Project.get({id: $routeParams.projectId},
        function(data) { //Successfully received data }, 
        function(data) { //Failed to receive data },
    );

    $scope.saveProject = function() {
        $scope.project.save();
    };
} 
```

我的 Node 服务器正确接收数据，对其进行处理并进行一些更改，将其保存到我的数据库中，然后通过 JSON 使用新更新的“项目”对象进行响应。在我刷新页面之前，Angular 不会显示新对象。有没有办法让它显示新数据？我假设有比手动调用另一个 GET 请求更自动的 Angular 方式来做到这一点`$scope.project.save();`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T02:05:59.890

看起来服务器响应作为回调的第一个参数返回`save`，所以只要服务器响应*完整*的对象数据，您应该能够使用它来创建一个“新”项目对象，如下所示：

```
function ProjectCtrl($scope, $routeParams, Project) {
    $scope.project = Project.get({id: $routeParams.projectId},
        function(data) { /* Successfully received data */ }, 
        function(data) { /* Failed to receive data */ },
    );

    $scope.saveProject = function() {
        $scope.project.save(function(data) {
            $scope.project = new Project(data);
        });
    };
} 
```

# android - 如何强制 WebView 将长文本行分成多行？

> ID：13558870
> 
> 赞同：8
> 
> 时间：2012-11-26T04:55:45.967
> 
> 标签：android, webview

我目前正在从网站（论坛）获取 HTML，对其进行修改，并将其显示在 WebView 中。然而，有时，有些字符串很长并且没有任何 WebView 认为允许换行的字符，因此 WebView 会水平拉伸并引入水平滚动。我讨厌水平滚动，我想强制 WebView 将这些行换成新行，而不管 WebView 是否喜欢它在前面换行的字符。

注意：我确实希望 WebView 仍然可以垂直扩展和滚动。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-11-12T21:36:54.900

使用以下样式打破所有类型的单词。 **参考链接** [css-tricks.com](https://css-tricks.com/snippets/css/prevent-long-urls-from-breaking-out-of-container/)

```
 style="overflow-wrap: break-word; word-wrap: break-word; -ms-word-break: break-all; word-break: break-all; word-break: break-word; -ms-hyphens: auto; -moz-hyphens: auto; -webkit-hyphens: auto; hyphens: auto; " 
```

**演示**

```
String html ="<html> <head><meta name=\"viewport\" content=\"width=device-width, user-scalable=0,initial-scale=1.0\"></head><body style=\"overflow-wrap: break-word; " +
                "word-wrap: break-word; -ms-word-break: break-all; word-break: break-all; word-break: break-word; -ms-hyphens: auto; -moz-hyphens: auto; -webkit-hyphens: auto; hyphens: auto; \">" +
                YourHtmlText +"</body></html>";

webView.loadDataWithBaseURL(null, html, "text/html", "utf-8",
                "about:blank"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:08:24.630

将此功能添加到您的网络视图

```
 myWebView.loadUrl("javascript:stopScrolling()"); 
```

在你的 index.html 中添加这个函数

```
function stopScrolling()
{
    document.ontouchmove = function(e){ e.preventDefault(); }
} 
```

# cakephp - 关联模型及其主键作为cakephp中的外键？

> ID：13558873
> 
> 赞同：0
> 
> 时间：2012-11-26T04:56:33.787
> 
> 标签：cakephp, foreign-keys, associations

我在不同区域有一些用户属性，所以我想将它们分成两个表。

一种是带有用户 ID 的 users 表。另一个表保存用户的位置坐标。它仍然是每个用户一个位置。它是用户的可选值。

因为在我看来用户表太重要了，不能乱来，它不会像位置表那样改变，我想把位置表变成一个新表。这是好习惯吗？

但是我可以将这两个表关联为一对多并且仍然属于吗？所以我仍然可以将它们用作控制器中的正常关联模型吗？只有他们实际上是一对一的关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:17:01.030

只处理一张桌子通常更简单，但如果你愿意，你仍然可以这样做。

你可以使用`hasOne`它的关系。您应该在两种模型中都使用它。

您可以在这里阅读更多信息：http: [//book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasone](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasone)

# c++ - 指向多参数 C++11 std::function 的函数指针：模板化 GetProcAddress

> ID：13558875
> 
> 赞同：2
> 
> 时间：2012-11-26T04:56:34.960
> 
> 标签：c++, function, templates, c++11, getprocaddress

我试图从另一个调用 GetProcAddress 的函数给出的 FARPROC 地址返回一个函数实例。想出了一个有趣的问题。这是功能：

```
template<class FT>
std::function<FT> to_function(FARPROC address) {
    return address;
} 
```

稍后我将创建一个没有任何问题的无输入函数：

```
auto try1 = to_function<int()>(addr1); 
```

然而，当函数接受输入时，visual c++ 11 编译器会爆炸：

```
auto try2 = to_function<int(int)>(addr2); 
```

它正确地返回：

错误 C2197：“int (__stdcall *)(void)”：调用参数过多

所讨论的类型等同于 FARPROC，它是 GetProcAddress 返回的内容，与函数的参数列表无关。

我的问题是，在给定 to_function 的简单函数原型的情况下，我将如何通过将 FARPROC 转换为 std::function 的适当类型来解决这个问题？提前喝彩。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:03:21.100

我建议您先转换指针，然后将其包装到 std::function 中：

```
template<Signature>
std::function<Signature> to_function(FARPROC f)
{
    return std::function<Signature>(reinterpret_cast<Signature*>(f));
} 
```

恕我直言，命名这样一个函数是个好主意`cast_to_function`。它的名字听起来应该很危险。

# mysql - 计数中的最小值

> ID：13558876
> 
> 赞同：0
> 
> 时间：2012-11-26T04:56:44.843
> 
> 标签：mysql, sql

我有一张表 employee(id,dept_id,salary,hire_date,job_id) 。我必须执行以下查询。

显示在一周中雇用最少员工的那一天雇用的所有员工。

我已经完成了查询，但我无法得到至少。请检查是否正确。

```
 select id, WEEKDAY(hire_date)+1 as days,count(WEEKDAY(hire_date)+1) as count

           from test.employee  group by days 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:13:25.580

```
select id from test.employee where hire_date in
    ( select count(id) count,hire_date 
      from test.employee
      order by count desc 
      limit 1) 
```

这应该工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:09:00.447

这应该会为您提供雇用最少员工的工作日：

```
SELECT 
   count(id) as `Total`,
   WEEKDAY(hire_date) as `DoW`
FROM
   test.employee
GROUP BY `DoW`
ORDER BY `Total` DESC LIMIT 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T06:52:04.977

您可以尝试这样做，因为如果您有多个工作日雇用相同数量的最少员工，它不会限制为一条记录。实际上这是有道理的。以下是基于*样本数据。*

**询问：**

```
-- find minimum id count
SELECT MIN(e.counts) INTO @min 
FROM (SELECT COUNT(*) as counts,
      WEEKDAY(hire_date+1) as day 
FROM employee
GROUP BY WEEKDAY(hire_date+1)) e
;

-- show weekdays with minimum id counts
SELECT e2.counts as mincount, 
WEEKDAY(e1.hire_date+1) as weekday
FROM employee e1
  JOIN (SELECT COUNT(id) as counts, 
        WEEKDAY(hire_date+1) as day
        FROM employee 
        GROUP BY day
        HAVING COUNT(*) = @min) e2
    ON WEEKDAY(e1.hire_date+1) = e2.day; 
```

**结果：**

```
MINCOUNT    WEEKDAY
1           6
1           3
1           4
1           2 
```

*   [SQLFIDDLE](http://sqlfiddle.com/#!2/13844/39)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T05:00:03.140

```
select min(id), WEEKDAY(hire_date)+1 as days,count(WEEKDAY(hire_date)+1) as count

       from test.employee  group by days 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T09:53:24.863

```
 SELECT
           *
         FROM
       employee
       WHERE
          DAYOFWEEK(hire_date)
         IN 
      (
             SELECT 
            weekday 
        FROM
           (
             SELECT 
        count(*) as bcount, 
        DAYOFWEEK(hire_date) as weekday 
    FROM 
        employee as a
    GROUP BY 
        weekday
    HAVING
        bcount = (
            SELECT 
                MIN(tcount)
            FROM
                (
                    SELECT 
                        count(*) as tcount, 
                        DAYOFWEEK(hire_date) as weekday 
                    FROM 
                        employee 
                    GROUP BY 
                        weekday

                ) as t
        )
    ) as q 
```

# php - 如何使用 codeigniter 解码 json。主类位于哪个文件夹中？

> ID：13558882
> 
> 赞同：0
> 
> 时间：2012-11-26T04:58:09.807
> 
> 标签：php, json, codeigniter, codeigniter-2, codeigniter-url

我是codeigniter的新手。

我一直在尝试解码 codeigniter 中的 json 响应。早些时候，当我使用简单的 php 进行编码时，我使用了一些 CURL 函数，例如

```
 $init = curl_init();
    curl_setopt($init, CURLOPT_URL, $url);
    curl_setopt($init, CURLOPT_HEADER,0);
    curl_setopt($init, CURLOPT_USERAGENT, $_SERVER["HTTP_USER_AGENT"]);
    curl_setopt($init, CURLOPT_RETURNTRANSFER, 1);
    $response = curl_exec($init);
    curl_close($init);
    $abc=json_decode($response,true); 
```

我曾经让它工作。但是在 codeigniter 中，我如何解码 json 字符串。

**示例：** **我正在尝试从 json 响应中在 codeigniter 中显示带有图片库的视图。我怎样才能做到这一点。我很难找到 curl 函数的位置，也是基类**

请帮助并带领我完成这项任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T06:18:56.933

问题是因为您的 codeIgntier 库中可能没有 curl 库。因此，从此链接获取 curl 库，并在将代码加载到控制器函数后尝试代码。

[https://github.com/philsturgeon/codeigniter-curl](https://github.com/philsturgeon/codeigniter-curl)

# windows-services - 将 Pentaho BI Server 作为 Windows 服务启动？

> ID：13558883
> 
> 赞同：1
> 
> 时间：2012-11-26T04:58:22.487
> 
> 标签：windows-services, pentaho

我是 Pentaho BI 的新手，我正在使用“Peantho BI 社区版”。请指导我如何将 BI Server 作为 Windows 服务启动。目前，我正在手动启动 Pentaho 服务器，但是，我想将 BI 服务器作为 Windows 服务启动。

请帮助我。

在此先感谢， 苏雷什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T21:55:41.317

这是使用 BI 服务器执行此操作的链接。

[http://wiki.pentaho.com/display/ServerDoc2x/Starting+BI+Server+as+a+windows+service](http://wiki.pentaho.com/display/ServerDoc2x/Starting+BI+Server+as+a+windows+service)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T11:52:14.833

看看一个名为 YAJSW 的产品——又一个 java 服务包装器。

非常易于使用，我已经将它与 Carte 和 BI Server 一起使用。

如果您查看 pentaho wiki，则有使用此包装器运行 Carte（DI 服务器）的指南，BI 服务器的说明应该类似。

# haskell - 原始递归 If Then Else 实际执行 If Else Then

> ID：13558884
> 
> 赞同：1
> 
> 时间：2012-11-26T04:58:49.070
> 
> 标签：haskell, recursion, computation-theory

我对 If Then Else 定义中的预测有疑问。它实际上是作为 If-Else-Then 执行的。

```
 import Prelude hiding (pred,and,or,not)

 data PR = Z
     | S
     | P Int
     | C PR [PR]
     | PR PR PR
     deriving Show
 eval :: PR -> [Integer] - Integer
 eval Z _ = 0
 eval S [x] = x+1
 eval (P n) xs = nth n xs
 eval (C f gs) xs = eval f (map (\g -> eval g xs) gs)
 eval (PR g h) (0:xs) = eval g xs
 eval (PR g h) (x:xs) = eval h ((x-1) : eval (PR g h) ((x-1):xs) : xs)

 nth _ [] = error "nth nil"
 nth 0 _ = error "nth index"
 nth 1 (x:_) = x
 nth (n) (_:xs) = nth (n-1) xs

 one = C S [Z]
 plus = PR (P 1) (C S [P 2])
 ife = PR (P 1) (C (P 2) [P 3, P 4]) 
```

如果我尝试交换`P 3`并且`P 4`它完全中断（每次返回'then'值）。`ite[0,2,3]`应该返回`3`并且`ite[1,2,3]`应该返回`2`。相反，正在发生相反的情况。我该如何纠正？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T08:05:54.343

你觉得这门课怎么样？我注意到你和我的家庭作业非常相似，非常相似。

那么首先，您想要创建一个模拟 IF-Then-Else 模型的原始递归函数。所以，

```
eval ite [0,1,2] => 1 
```

和

```
eval ite [1,2,3] => 3 
```

并且根据您提供的内容，您似乎在相反的情况下获得了具有相同质量的功能，具体取决于第一个输入。

`ife = PR (P 1) (C (P 2) [P 3, P 4])`

现在你的功能在说什么？您的 ITE 实现使用原始递归构造，这是一个开始，因为在此您可以根据条件将执行拆分为两个不同的表达式。布尔代数中使用的条件相同。如果 0 我们有假，否则如果一个数字评估为任何 (0<)，我们有真。如果“堆栈”的头部为 0，PR 构造通过评估其第一个参数来执行此操作，否则它评估其第二个参数以希望沿着这条线的某个地方终止（通常时间递减头部作为您的计数器并最终执行第一个参数）。但是出于所有意图和目的，我们可以说第二个表达式将在 (0<) 上执行。

呸！那么，我们如何修复您的实施！？简单的：

`ife = PR (P 2) (C (P 1) [P 3, P 4])`

我们切换您的两个投影，因为您只是将它们向后。如果栈首是 Z，我们要投影第二个表达式，否则我们投影第一个。或者更好：

```
ite = PR (P 2) (P 1) 
```

我想，我的作业也没有完成，如果我错了，我将非常感谢任何额外的见解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T09:19:47.863

由于我不够好，无法发表评论，我将把它留在这里。

我认为应该是

```
ife = PR (P 1) (C (P 2) [P 3, P 3])
                                ^ 
```

而不是原来的版本

```
ife = PR (P 1) (C (P 2) [P 3, P 4])
                                ^ 
```

如果第一个值不是 0 否则 Y 将选择 X。这样不会返回随机值。它也使写作和/或/...更容易。

# c# - Invalidate 和 OnPaint 有什么区别

> ID：13558886
> 
> 赞同：0
> 
> 时间：2012-11-26T04:59:01.897
> 
> 标签：c#, winforms, graphics

在我的 Winforms 应用程序中，我想发送一个 Paint 请求。

我应该使用哪种方法？`Invalidate`另外，和之间的基本区别是`OnPaint`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:09:13.483

OnPaint 是实际绘画发生的方法。

无效是请求重新绘制控件或表单的一种方式。

[Control.Invalidate、Control.Update 和 Control.Refresh 有什么区别？](http://blogs.msdn.com/b/subhagpo/archive/2005/02/22/378098.aspx)

# jquery - 如何使用 Disqus 添加星级？

> ID：13558889
> 
> 赞同：4
> 
> 时间：2012-11-26T04:59:17.667
> 
> 标签：jquery, disqus

我有一个已经实施 Disqus 的网站，并且还想要一个星级评分系统。我已经找到了做一个单独的星级系统的方法，但是，我想将它与 Disqus 评论集成，要么使用 Disqus 已经提供的东西，要么在用户使用 jQuery 登录到 Disqus 后允许星级评分。

Disqus有这样的东西吗，还是我必须自己做？

而且，如果我自己做，我如何检查用户是否登录到 Disqus 以允许星级评分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T22:55:55.350

这里没有真正好的解决方案，因为您无法将任何代码插入 Disqus 嵌入。

从技术上讲，唯一的方法是使用 API 和您自己的增强功能重新创建 Disqus 嵌入，但是对于免费帐户，您限制为每小时 1000 次 API 调用，因此它必须是一个相当低容量的站点。如果您确实想将它们放在一起，请查看[API 文档](http://disqus.com/api/docs/)以及一些[示例](https://github.com/disqus/DISQUS-API-Recipes)

专门针对身份验证，这里有一些可以帮助您入门的资源：

文档：[http ://disqus.com/api/docs/auth/](http://disqus.com/api/docs/auth/)

示例：[https](https://github.com/disqus/DISQUS-API-Recipes/tree/master/python/oauth) ://github.com/disqus/DISQUS-API-Recipes/tree/master/python/oauth和[https://github.com/disqus/DISQUS-API-Recipes/tree/master/php/oauth](https://github.com/disqus/DISQUS-API-Recipes/tree/master/php/oauth)

# c++ - C++ 流运算符重载。1 个来自链式调用的结果

> ID：13558890
> 
> 赞同：0
> 
> 时间：2012-11-26T04:59:19.103
> 
> 标签：c++, operator-overloading

我正在查看[glog](http://google-glog.googlecode.com/svn/trunk/doc/glog.html)的文档，并对流运算符的使用方式感到困惑。

```
LOG(INFO) << "Found " << num_cookies << " cookies"; 
```

它如何推断所有这些调用都是为了形成一条日志消息？

据我了解，这是：

```
cout << foo << bar << baz; 
```

相当于：

```
cout << foo;
cout << bar;
cout << baz; 
```

如果没有特殊的分隔符，它如何能够将这样的链接调用组合在一起？

**编辑：**

我知道您可以将它们链接起来，为什么有效，那不是我的问题。我在问 glog 能接受多少

```
LOG(INFO) << "Found " << num_cookies << " cookies"; 
```

在我看来，对`<<`重载进行 3 次单独调用并知道

```
"Found 3 cookies" 
```

是单个日志消息，而不是 3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:03:00.100

`cout << foo`返回`cout`

所以它变成了
`cout << bar << baz;`

等等。

另一种更清楚地看到它的方法是

`((cout.operator<<(foo)).operator<<(bar)).operator<<(baz);`

这正是正在发生的事情

[您可以从http://www.cplusplus.com/reference/ostream/ostream/operator%3C%3C/](http://www.cplusplus.com/reference/ostream/ostream/operator%3C%3C/)看到这一点

`ostream& operator<< (double val);`

### 编辑

在讨论之后，问题似乎更多地是关于 gLogs 如何在没有终止符或任何`endl`类型对象的情况下将每个日志分隔到自己的日志条目中。

从一瞥看来`logging.h`，每个单独的日志都可能由不同的流对象写入。

```
#define PLOG(severity) GOOGLE_PLOG(severity, 0).stream() 
```

这意味着在使用相同的日志对象时，您会写入相同的日志条目。对 Log 的所有其他调用实际上都会创建一个新的流对象。[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)将负责实际写入完成的日志，因为这是一个临时对象，并且[在执行代码行后被销毁](https://stackoverflow.com/questions/3041959/life-scope-of-temporary-variable)。

我需要更深入地了解代码才能更好地理解，但看起来这是一个准确的简短答案。问题仍然存在，如果（如果是的话）这是如何优化的..

# c# - 仅将方面应用于具有特定属性的方法

> ID：13558892
> 
> 赞同：6
> 
> 时间：2012-11-26T04:59:40.613
> 
> 标签：c#, aop, postsharp

我正在尝试设置 PostSharp 方面`RunOutOfProcessAttribute`，以便它适用于：

1.  所有公共方法
2.  任何标有 的方法`DoSpecialFunctionAttribute`，无论成员可访问性如何（公共/受保护/私有/其他）。

到目前为止，我`RunOutOfProcessAttribute`的定义是这样的：

```
[Serializable]
[MulticastAttributeUsage(MulticastTargets.Method, TargetMemberAttributes = MulticastAttributes.Public)]
[AttributeUsage(AttributeTargets.Class)]
public class RunOutOfProcessAttribute : MethodInterceptionAspect
{
    public override void OnInvoke(MethodInterceptionArgs args)
    {
        ...
    }
} 
```

已经到位的应该满足上面的`MulticastAttributeUsageAttribute`标准 1，但我不知道如何满足标准 2，而不是简单地将现有方面的行为复制到新属性中。

`DoSpecialFunctionAttribute`无论成员可访问性如何（公共/受保护/私有/其他），我如何将此方面应用于任何标有 的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T02:49:25.793

这是解决方案：

*   以所有方法为目标`[MulticastAttributeUsage(MulticastTargets.Method)]`
*   覆盖`CompileTimeValidate(MethodBase method)`。设置返回值，以便在适当的目标上返回，`CompileTimeValidate`在要静默忽略的目标上返回，并在应提醒用户 Aspect 使用不适当时引发异常（这在[PostSharp 文档](http://doc.sharpcrafters.com/postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/M_PostSharp_Extensibility_IValidableAnnotation_CompileTimeValidate.htm)中有详细说明）。`true``false`

在代码中：

```
[Serializable]
[MulticastAttributeUsage(MulticastTargets.Method)]
[AttributeUsage(AttributeTargets.Class)]
public class RunOutOfProcessAttribute : MethodInterceptionAspect
{
    protected static bool IsOutOfProcess;

    public override void OnInvoke(MethodInterceptionArgs args)
    {
        ...
    }

    public override bool CompileTimeValidate(MethodBase method)
    {
        if (method.DeclaringType.GetInterface("IDisposable") == null)
            throw new InvalidAnnotationException("Class must implement IDisposable " + method.DeclaringType);

        if (!method.Attributes.HasFlag(MethodAttributes.Public) && //if method is not public
            !MethodMarkedWith(method,typeof(InitializerAttribute))) //method is not initialiser
            return false; //silently ignore.

        return true;
    }
} 
```

# objective-c - 牢房？自定义 IOS 表视图单元格

> ID：13558897
> 
> 赞同：0
> 
> 时间：2012-11-26T05:00:10.943
> 
> 标签：objective-c, ios, cocoa-touch, ios5, ios4

我有以下代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    UIImage * i1 = [UIImage imageNamed: @"inc_01.png"];
    UIImage * i2 = [UIImage imageNamed: @"inc_02.png"];
    UIImage * i3 = [UIImage imageNamed: @"inc_04.png"];
    UIImage * i5 = [UIImage imageNamed: @"inc_05.png"];
    UIImage * i6 = [UIImage imageNamed: @"inc_06.png"];
    UIImage * i7 = [UIImage imageNamed: @"inchd.png"];

    if (cell == nil) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    }

    if(indexPath.row == 0)
    {
        UIImageView * header= [[UIImageView alloc] initWithImage: i1];

        cell.backgroundView = header;
        // Configure the cell…
    }
    else if (indexPath.row == 2)
    {

        UIImageView *backgroundCellImage=[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 280, 11)];

        backgroundCellImage.image=[UIImage imageNamed:@"inc_06.png"];

        [cell.contentView addSubview:backgroundCellImage];
    }
    else
    {
        // Configure the cell…
        UIImageView *imageView = [[UIImageView alloc] initWithImage: i3];

        cell.textLabel.text = @"text";

        UIImageView *backgroundCellImage=[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 57, 46)];

        backgroundCellImage.image=[UIImage imageNamed:@"inc_02.png"];

        UIImageView *backgroundCellImage2=[[UIImageView alloc] initWithFrame:CGRectMake(223, 0, 57, 46)];
        backgroundCellImage2.image=[UIImage imageNamed:@"inc_04.png"];

        UILabel * label = [[UILabel alloc] initWithFrame:CGRectMake(57, 0, 166, 46)];

        label.text = @"wow";

        [cell.contentView addSubview:backgroundCellImage];
        [cell.contentView addSubview:backgroundCellImage2];
        [cell.contentView addSubview:label];

    }

    return cell;  
} 
```

这基本上创建了一个表格视图并将图像放在每个单元格的左侧和右侧。我想要它，以便人们可以单击每个单元格中的左侧或右侧图像，并且根据单元格编号会发生不同的事情。

因此，如果他们单击第 1 行中单元格的左侧图像，则会使用他们单击的行号调用一个函数，并且一个指示器会告诉我他们单击的是左侧图像而不是右侧图像。

我怎样才能使用objective-c做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:08:14.407

制作一个自定义原型单元如下

```
 ---------------------------------------
| Button 1 |     Text       | Button 2 |
 --------------------------------------- 
```

为两个按钮调用不同的方法。

* * *

或者，您可以查看详细解释单元格的[官方文档](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html)

添加右图为 an `accessory view`，左图为 an`editing control`

# css - CSS：粘性页脚不起作用

> ID：13558903
> 
> 赞同：0
> 
> 时间：2012-11-26T05:00:59.287
> 
> 标签：css, sticky-footer

如果比较以下 2 页：

第 1 页：http: [//goldencraft.co/wp/](http://goldencraft.co/wp/)

第 2 页：http: [//goldencraft.co/wp/contact/](http://goldencraft.co/wp/contact/)

CSS： http: [//goldencraft.co/wp/wp-content/themes/minecraft/style.css](http://goldencraft.co/wp/wp-content/themes/minecraft/style.css)

您会看到当有内容时，页脚没有正确粘贴。我一直在尝试修复它一个小时，所以我希望有人能在 CSS 中发现问题，谢谢。

[粘性页脚示例](http://ryanfait.com/sticky-footer/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:26:05.100

罪魁祸首似乎就`iframe`在`</body>`标签之前。它有一个`visibility:hidden`规则，允许它替换页面上的元素（与 相比`display:none`）。

您可以删除它，也可以添加以下 css：

```
iframe {
  display:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:04:42.730

现在只需在您的 css 文件中替换为您的`#footer` **ID**

```
#footer {
    background-color: #252525;
    bottom: 0;
    left: 0;
    position: fixed;
    right: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T05:20:13.263

试试这个

CSS

```
html,body{height:100%; width:100%; margin:0px; padding:0px;}
#wrapper{width:100%; height:100%; min-height:100%; height:auto; margin:0 auto; margin-bottom:-100px !important; background-color:#999999;}
#push{min-height:100px;}
#footer{min-height:100px; width:100%; overflow:hidden; background-color:#FF0000;} 
```

HTML

```
<body>
    <div id="wrapper">
        <div id="push"></div><!-- do not remove -->
    </div>
    <div id="footer">Footer</div>
</body> 
```

# c - C中的内存对齐

> ID：13558904
> 
> 赞同：4
> 
> 时间：2012-11-26T05:01:02.587
> 
> 标签：c, memory, alignment

这是一个片段：

```
#pragma pack(4)
struct s1
{
    char a;
    long b;
};
#pragma pack()

#pragma pack(2)
struct s2
{
    char c;
    struct s1 st1;
};
#pragma pack()

#pragma pack(2)
struct s3
{
    char a;
    long b;
};
#pragma pack()

#pragma pack(4)
struct s4
{
    char c;
    struct s3 st3;
};
#pragma pack() 
```

我虽然 sizeof(s4) 应该是 10 或 12。但结果是 8。我使用的是 Visual C++ 6.0。有人能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:07:26.140

```
#pragma pack(2)
struct s3
{
    char a;
    long b;
};
#pragma pack() 
```

所以包装对齐`s3`是2，它的大小是1（对齐1）+1（填充）+4（对齐2）=6。

```
#pragma pack(4)
struct s4
{
    char c;
    struct s3 st3;
};
#pragma pack() 
```

的打包对齐`s4`为4，其大小为1（对齐1）+1（填充）+6（对齐2）=8。

请注意，`#pragma pack`这不会“额外对齐”任何具有较宽松对齐要求的东西。它只减少对齐，即控制“打包”对齐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:22:59.613

[的文档`#pragma pack(n)`](http://msdn.microsoft.com/en-us/library/2e70t5y1.aspx)说“成员的对齐方式将在边界上，要么是 n 的倍数，要么是成员大小的倍数，以较小者为准”。但是我认为这是不正确的；文档应该说成员的对齐方式将在 n 的倍数或*成员的对齐要求的*边界上，以较小者为准。

的对齐要求`struct s3`是 2（由于`#pragma pack(2)`在声明时生效）。因此，即使在有效的结构中，它仍然得到 2 的对齐`#pragma pack(4)`。所以布局`struct s4`看起来像：

```
 char c;
 char padding;      // for alignment of the `struct s3`
 char s3.a;
 char s3.padding;   // for alignment
 long s3.b; 
```

总大小 == 8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T05:05:07.403

在`s3`, `char`(1) + `long`(4) = 5 -> 6（压缩）

在`s4`, `char`(1) + `struct s3`(6) = 7 -> 8（压缩）

我实际上不确定如何`#pragma pack`工作，但这似乎是合理的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T05:41:28.160

这验证了 Michael Burr 所说的：

```
#include <stdio.h>

#pragma pack(push, 2)
struct s3
{
    long b;
};
#pragma pack(pop)

struct s4
{
    char c;
    struct s3 st3;
};

int main() {
    printf("%lu, %lu\n", sizeof(s3), sizeof(s4));
    return 0;
} 
```

输出：4、6

# grails - grails单选按钮组没有其他值的tabindex？

> ID：13558914
> 
> 赞同：0
> 
> 时间：2012-11-26T05:02:33.627
> 
> 标签：grails, attr, radio-group, tabindex

我注意到`<g:radioGroup/>`grails 不会将索引标记为其他值。前任。如果我的广播组有两个值，例如 True 和 False。当用户使用键盘选项卡时，它只突出显示 True 并停止，而不突出显示 False。因此，用户无法使用键盘选择其他选项。如何将 tabindex 作为第二个选项？我们有自己的无线电组，任何人都可以修改它以在所有值上实现选项卡索引吗？谢谢！

```
 def myRadioGroup = {attrs ->

    attrs.values.eachWithIndex  { obj, i ->

        out << "${attrs.labels[i]}&nbsp;"
        out << "<input type='radio' name='${attrs.name}' value='${obj}'"

        if(obj.equals (attrs.value)){
            out << " checked='checked' "
        }

        if(attrs.function){
            out << " ${attrs.function}"
        }

        if(attrs.disabled != null){
            out << " disabled='disabled' "
        }

        out << " />&nbsp;&nbsp;"

    }

} 
```

我尝试添加这个，但没有帮助。它仍然不会跳到下一个选项。

```
if(attrs.tabIndex != null){
                out << " tabIndex='${i}' "
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:44:19.940

虽然我还没有找到任何支持这一点的来源，但您不能在同一组（又名相同名称）中选择多个收音机。您可以跳到第一个选项卡，然后可以使用箭头键，但不能使用多个选项卡。

这不是正确生成 HTML 的问题，而是 HTML 的限制。

# android - 应用程序 gui 已完全加载，但仅部分可见

> ID：13558915
> 
> 赞同：1
> 
> 时间：2012-11-26T05:02:54.357
> 
> 标签：android, android-layout

我在模拟器中运行我的 android 应用程序时遇到问题，它打开正常，所有内容都已加载..但是当我在我的设备中运行时，它只占用屏幕的一部分，但加载了整个屏幕。就像你改变时一样您的窗口的分辨率。窗口似乎太大，无法放入屏幕。请帮我解决这个问题。

我尝试上传图片但不能。但是定义的布局是这样的

```
 <linearlayout(main layout)>
      <linearLayout>
         <TextView>xyz</TextView>
      </linearLayout>
      <linearLayout>
         <TextView>xyz</TextView>
      </linearLayout>
      <linearLayout>
         <TextView>xyz</TextView>
      </linearLayout>
     <TableLayout>
<TableRow>
         <TextView>xyz</TextView>
</TableRow>
      </TableLayout>
    </linearLayout(mainLayout)> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:06:39.517

听起来您的布局定义不正确。查看开发人员指南或发布更详细的问题。

[http://developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)

# ruby-on-rails - 我应该如何在数据库 Mongodb 中使用 Devise 和 Omniaauth？

> ID：13558919
> 
> 赞同：0
> 
> 时间：2012-11-26T05:03:39.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, mongoid, omniauth

我确实看过 Ryan Bates 的剧集，以便将设计与omniauth一起使用。问题是我可以用linkdin注册。我的代码

在我的 user.rb

```
field :provider,   :type => String
     field :uid,   :type => String
      field :name,   :type => String

 #has_many :authentications
   def self.from_omniauth(auth)
    where(auth.slice("provider", "uid")).first || create_from_omniauth(auth)
  end

  def self.create_from_omniauth(auth)
    create! do |user|
      user.provider = auth["provider"]
      user.uid = auth["uid"]
      user.name = auth["info"]["nickname"]
    end
  end 
```

我添加了这个并在我的创建控制器中进行了身份验证

```
 user = User.from_omniauth(env["omniauth.auth"])
    session[:user_id] = user.id
    redirect_to root_url, notice: "Signed in!" 
```

我成功地将 linkdin 的值放入我的用户数据库中

```
 { "_id" : ObjectId("50b2f4e66d7ab88ac7000003"), "email" : "", "encrypted_password" : "", "sign_in_count" : 0, "provider" : "linkedin", "uid" : "wuBFLcbDyB", "name" : null, "updated_at" : ISODate("2012-11-26T04:49:42.549Z"), "created_at" : ISODate("2012-11-26T04:49:42.549Z") } 
```

但是当我从 linkdin 登录时，它不会通过 linkdin 注册，否则它会重定向到

```
http://localhost:3000/users/sign_in 
```

我如何通过该链接登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:40:11.650

如果你的用户模型中有这样的东西

```
validates :username, presence: true 
```

那么您必须知道，linked in 不会为您提供任何用户名。从那以后，要完成您的身份验证/注册，您的用户必须明确添加他的用户名。

确保您的 registrations_controoller.rb 看起来像这样

```
class RegistrationsController < Devise::RegistrationsController
  def create
    super
  end

private

  def build_resource(*args)
    super
    if session[:omniauth]
      @user.apply_omniauth(session[:omniauth])
      @user.valid?
    end
  end
end 
```

# list - 将列表放入方案中的参数中

> ID：13558920
> 
> 赞同：2
> 
> 时间：2012-11-26T05:03:41.597
> 
> 标签：list, scheme, guile

所以我是使用 Scheme/Guile 的新手，并且有一个必须接受 2 个输入的任务；一个简单的变量和一个列表。

然后我将变量添加到列表中的每个数字并打印出来。我已经加载了它，但是当我输入这个时：

```
(add 1 (1 2 3)) 
```

我收到此错误：

```
Backtrace:
  39: 0* [add 1 ...
  39: 1*  [1 2 3]

standard inout:39:8: In expression (1 2 3):
standard input:39:8:wrong type to appy: 1
ABORT: (misc-error) 
```

这是我目前拥有的代码。

```
(define a (list a))
(define (add y a)
    (define x 0)
    (while (< x (length a))
        (display (+ y (car a)))
        (newline)
        (set! a (cdr a))
        (set! x (+ x 1))
    )
) 
```

我的问题是：
如何让列表在参数中起作用？我在网上环顾四周，但没有找到太多可以解决这个问题的方法。非常感谢您能给我的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:11:18.120

您收到错误是因为`(1 2 3)`告诉它`1`使用两个参数调用函数，`2`并且`3`. 要创建包含 1、2 和 3 的列表，请使用`(list 1 2 3)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T12:32:28.457

您真的打算以这种命令式的方式编写程序吗？它看起来不太像 Scheme。在 GNU Guile 中评估您的过程会产生许多关于未绑定变量等的错误消息。`set!`对于 Scheme 的初学者来说是评估；) :) （SICP 在第 3 章中广泛地处理了赋值）。`set!`您可以在功能样式中更轻松地做到这一点，而不会产生and的副作用`display`。

如果您已经了解映射和高阶函数，则可以执行以下操作：

```
(define (add x)
  (lambda (y) (+ x y)))

(map (add 1) (list 1 2 3))
===> (2 3 4) 
```

如果没有，请自己编写一个递归过程：

```
(define (add-to-list x list)
  (if (null? list)
      '()
      (cons (+ x (car list))
            (add-to-list x (cdr list)))))

(add-to-list 1 '(1 2 3))
===> (2 3 4) 
```

为了学习递归思维，请查阅 SICP、HTDP 或“The litte Schemer”等书籍。

# mysql - VBA 如何在 Excel 中连接 MySQL 数据库？

> ID：13558921
> 
> 赞同：15
> 
> 时间：2012-11-26T05:03:46.857
> 
> 标签：mysql, excel, vba

```
Dim oConn As ADODB.Connection
Private Sub ConnectDB()
Set oConn = New ADODB.Connection
Dim str As String
str = "DRIVER={MySQL ODBC 5.2.2 Driver};" & _
                                            "SERVER=sql100.xtreemhost.com;" & _
                                            "PORT=3306" & _
                                            "DATABASE=xth_9595110_MyNotes;" & _
                                            "UID=xth_9595110;" & _
                                            "PWD=myPassword;" & _
                                            "Option=3"
''' error '''
oConn.Open str
End Sub

Private Sub InsertData()
Dim rs As ADODB.Recordset
Set rs = New ADODB.Recordset
ConnectDB
sql = "SELECT * FROM ComputingNotesTable"
rs.Open sql, oConn, adOpenDynamic, adLockOptimistic
Do Until rs.EOF
    Range("A1").Select
    ActiveCell = rs.Fields("Headings")
    rs.MoveNext
Loop
rs.Close
oConn.Close
Set oConn = Nothing
Set rs = Nothing
End Sub 
```

在PHP中做类似的事情，我可以成功登录到MySQL服务器。我已经安装了 ODBC 连接器。但是在上面的 VBA 代码中，我失败了。出现错误。（请参阅存在错误的代码）

```
$connect = mysql_connect("sql100.xtreemhost.com","xth_9595110","myPassword") or die(mysql_error());

mysql_select_db("myTable",$connect); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T05:12:41.827

这段 vba 对我有用：

```
Sub connect()
    Dim Password As String
    Dim SQLStr As String
    'OMIT Dim Cn statement
    Dim Server_Name As String
    Dim User_ID As String
    Dim Database_Name As String
    'OMIT Dim rs statement

    Set rs = CreateObject("ADODB.Recordset") 'EBGen-Daily
    Server_Name = Range("b2").Value
    Database_name = Range("b3").Value ' Name of database
    User_ID = Range("b4").Value 'id user or username
    Password = Range("b5").Value 'Password

    SQLStr = "SELECT * FROM ComputingNotesTable"

    Set Cn = CreateObject("ADODB.Connection") 'NEW STATEMENT
    Cn.Open "Driver={MySQL ODBC 5.2.2 Driver};Server=" & _ 
            Server_Name & ";Database=" & Database_Name & _
            ";Uid=" & User_ID & ";Pwd=" & Password & ";"

    rs.Open SQLStr, Cn, adOpenStatic

    Dim myArray()

    myArray = rs.GetRows()

    kolumner = UBound(myArray, 1)
    rader = UBound(myArray, 2)

    For K = 0 To kolumner ' Using For loop data are displayed
        Range("a5").Offset(0, K).Value = rs.Fields(K).Name
        For R = 0 To rader
           Range("A5").Offset(R + 1, K).Value = myArray(K, R)
        Next
    Next

    rs.Close
    Set rs = Nothing
    Cn.Close
    Set Cn = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-18T15:00:48.727

Ranjit 的代码导致了与 Tin 报告的相同的错误消息，但在使用我正在运行的 ODBC 驱动程序更新 Cn.open 后工作。检查 ODBC 数据源管理器中的驱动程序选项卡。我说“MySQL ODBC 5.3 Unicode 驱动程序”所以我相应地更新了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-07T12:57:27.187

对于偶然发现相同查询的任何人来说，只是一个旁注……我的操作系统是 64 位的 - 所以我当然下载了 64 位 MySQL 驱动程序……但是，我的 Office 应用程序是 32 位的……一旦我下载了32位版本，错误消失了，我可以继续前进。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T05:13:22.010

启用 Microsoft ActiveX 数据对象 2.8 库

```
Dim oConn As ADODB.Connection 
Private Sub ConnectDB()     
Set oConn = New ADODB.Connection    
oConn.Open "DRIVER={MySQL ODBC 5.1 Driver};" & _        
"SERVER=localhost;" & _         
"DATABASE=yourdatabase;" & _        
"USER=yourdbusername;" & _      
"PASSWORD=yourdbpassword;" & _      
"Option=3" 
End Sub 
```

剩下的就在这里：[http ://www.heritage-tech.net/908/inserting-data-into-mysql-from-excel-using-vba/](http://www.heritage-tech.net/908/inserting-data-into-mysql-from-excel-using-vba/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-27T01:13:44.697

使用更新的答案更新此主题，该解决方案适用于 MySQL Connector/ODBC 8.0 版（在[https://downloads.mysql.com/archives/c-odbc/](https://downloads.mysql.com/archives/c-odbc/)下载）：

```
Public oConn As ADODB.Connection
Sub MySqlInit()
    If oConn Is Nothing Then
        Dim str As String
        str = "Driver={MySQL ODBC 8.0 Unicode Driver};SERVER=xxxxx;DATABASE=xxxxx;PORT=3306;UID=xxxxx;PWD=xxxxx;"
        Set oConn = New ADODB.Connection
        oConn.Open str
    End If
End Sub 
```

在这件事上最重要的是检查已安装驱动程序的正确名称和版本：HKEY_LOCAL_MACHINE\SOFTWARE\ODBC\ODBCINST.INI\ODBC Drivers\

# r - 如何删除R数据框中的列

> ID：13558922
> 
> 赞同：17
> 
> 时间：2012-11-26T05:03:51.053
> 
> 标签：r, dataframe

> **可能重复：**
> [删除列 R 数据框](https://stackoverflow.com/questions/4605206/drop-columns-r-data-frame)

假设，我有以下数据框，并且想要删除列“dataB”，那么 R 命令会是什么？

```
y <- data.frame(k1=c(101,102,103,104,105,106,107,108),
                B=c(11,12,13,NA,NA,16,17,18), 
                dataB=11:18) 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-26T05:07:03.723

这：从 dataframe`y$B <- NULL`中删除列。`B``y`

# java - 获取html数据时Android sax解析器错误

> ID：13558924
> 
> 赞同：1
> 
> 时间：2012-11-26T05:04:26.277
> 
> 标签：java, android, xml-parsing, saxparser

您好我正在尝试使用 sax 解析器从包含 html 数据的 xml 中解析数据，xml 中的数据如下所示

但是在解析时，我将详细信息标记之间的数据作为不同的字符串，而不是作为包含 dtails 标记之间完整 html 数据的单个字符串。

谁能帮帮我，我该如何解决这个问题。

```
<details>
    <html> <b>Animal Care BTEC Level 1</b>

        <hr style="height:0.03em;width:18em;border:1px ;border-style:dotted;margin-left:0; color:white"
        />

        <body>
            <e>Course Length: 1 year</e>
            <br />
            <e>Fees: Free for 16-18 year olds</e>
            <br />
            <e>Course Code: B332</e>
            <br />
            <br />

            <body> <b> Overview:</b>

                <hr style="height:0.03em;width:18em;border:1px ;border-style:dotted;margin-left:0 ;color:white"
                />
                <p>The course provides a basic introduction to working with animals. A practical
                    approach allows student to develop animal handling skills along side personal
                    and social development. Student will have access to a wide range of animals
                    to enable them to develop skills and confidence. Each week practical work
                    will include time spent on the animal unit, the farm and at the equine
                    centre to enable students to develop practical ability in all three areas.</p>
            </body>

    </html>
</details> 
```

* * *

```
package com.bb.mypotential;

import java.util.ArrayList;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

import android.util.Log;

public class SaxHandler extends DefaultHandler {
    public static Courseobj courseobj;
    public static Subject subjectobj;
    public boolean courseidb = false;
    public boolean coursesubjectb = false;
    public boolean coursetitleb = false;
    public boolean subjectidb = false;
    public boolean subjectnameb = false;
    public boolean subjectcodeb = false;
    public boolean subjectdetailsb = false;
    public boolean entryRequirementb = false;
    public boolean courseContentb = false;
    public boolean futhuroptionsb = false;
    public boolean additionalInfob = false;
    public boolean fundingInfob = false;
    public boolean assignmethodb = false;

public String currentvalue = null;
public ArrayList<Subject> subarr = null;

String TAG = getClass().getSimpleName();

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    // TODO Auto-generated method stub
    if (localName.equals("Courses")) {
        MainListActivity.value = new ArrayList<Courseobj>();
    }
    if (localName.equals("Course")) {
        courseobj = new Courseobj();
        subarr = new ArrayList<Subject>();
        String courseid = attributes.getValue(0);// getValue("ID");
        courseobj.setCOURSE_ID(courseid);
        courseidb = true;
    } else if (localName.equalsIgnoreCase("title")) {
        coursetitleb = true;

    } else if (localName.equals("subject")) {
        subjectobj = new Subject();
        String subid = attributes.getValue(0);
        subjectobj.setSUB_ID(subid);

        subjectidb = true;
    } else if (localName.equals("name")) {
        subjectnameb = true;

    } else if (localName.equals("code")) {
        subjectcodeb = true;
    } else if (localName.equals("details")) {
        subjectdetailsb = true;
    } else if (localName.equals("entryRequirement")) {
        entryRequirementb = true;
    } else if (localName.equals("courseContent")) {
        courseContentb = true;
    } else if (localName.equals("assignmentMethods")) {
        assignmethodb = true;
    } else if (localName.equals("furtherOptions")) {
        futhuroptionsb = true;
    } else if (localName.equals("additionalInformation")) {
        additionalInfob = true;
    } else if (localName.equals("fundingInformation")) {
        fundingInfob = true;
    }

}

@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {
    // TODO Auto-generated method stub

    currentvalue = new String(ch, start, length);

    if (coursetitleb) {
        courseobj.setTitle(currentvalue);

    } else if (subjectnameb) {
        subjectobj.setName(currentvalue);

    } else if (subjectcodeb) {
        subjectobj.setCode(currentvalue);

    } else if (subjectdetailsb) {
        subjectobj.setDetails(currentvalue);

    } else if (entryRequirementb) {
        subjectobj.setEntryRequirement(currentvalue);
    } else if (courseContentb) {
        subjectobj.setCourseContent(currentvalue);
    } else if (assignmethodb) {
        subjectobj.setCourseContent(currentvalue);
    } else if (futhuroptionsb) {
        subjectobj.setFuthuroptions(currentvalue);
    } else if (additionalInfob) {
        subjectobj.setAdditionalInfo(currentvalue);
    } else if (fundingInfob) {
        subjectobj.setFundingInfo(currentvalue);
    }

}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    // TODO Auto-generated method stub
    if (localName.equalsIgnoreCase("Course")) {

        courseobj.setSubject(subarr);
        MainListActivity.value.add(courseobj);

        courseidb = false;
    } else if (localName.equalsIgnoreCase("title")) {
        coursetitleb = false;
    } else if (localName.equals("subject")) {

        subarr.add(subjectobj);
        subjectidb = false;

    } else if (localName.equals("name")) {
        subjectnameb = false;

    } else if (localName.equals("code")) {
        subjectcodeb = false;
    } else if (localName.equals("details")) {
        subjectdetailsb = false;
    } else if (localName.equals("entryRequirement")) {
        entryRequirementb = false;
    } else if (localName.equals("courseContent")) {
        courseContentb = false;
    } else if (localName.equals("assignmentMethods")) {
        assignmethodb = false;
    } else if (localName.equals("furtherOptions")) {
        futhuroptionsb = false;
    } else if (localName.equals("additionalInformation")) {
        additionalInfob = false;
    } else if (localName.equals("fundingInformation")) {
        fundingInfob = false;
    }
}
} 
```

# php - Opencart 为所有项目设置默认税级

> ID：13558930
> 
> 赞同：0
> 
> 时间：2012-11-26T05:05:43.057
> 
> 标签：php, mysql, shopping-cart, opencart

我正在开发一个 Opencart 项目，它是为澳大利亚客户服务的。所以我必须为所有项目设置 GST 10%。这些物品已经添加到购物车中，我想出了一种添加税级的方法，并将其添加到产品中，效果很好。

问题是目录已经有超过 10000 种产品，我需要更新所有产品的税级。我知道我们可以运行查询来做到这一点，但我的问题是“有没有办法将税类设置为默认值”请告诉我。谢谢

我的 Opencart 版本是 1.5.1.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T11:12:42.883

最简单的方法是使用 SQL。您将需要在您的 phpMyAdmin 或您在服务器上用于 SQL 的任何其他工具中运行以下代码

```
UPDATE `product` SET `tax_class_id` = '123'; 
```

更改`123`为税类 ID。`product`根据您的设置，您可能还需要在表名中添加数据库前缀

# 编辑

要使其默认与新产品一起使用，请打开`/admin/controller/catalog/product.php`并更改此行

```
$this->data['tax_class_id'] = 0; 
```

将 设置`0`为税类 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:23:57.173

我在我的设置（1.5.3.1）上试过这个，它似乎工作正常；假设您输入的所有产品都设置为相同的现有税级？如果是这种情况，那么您可以编辑大多数产品所在的税收类别，然后将该类别的**税率**更改为您创建的 GST 税率。您还应该能够重命名该税类，使其在实际网站上显示为 GST。我希望这会有所帮助。

# jquery - 在原型之后加载 jquery 但导致页面处理错误

> ID：13558934
> 
> 赞同：1
> 
> 时间：2012-11-26T05:06:38.697
> 
> 标签：jquery, prototypejs

我有一个 javascript 库，可以在不同类型的网站上运行，例如 wordpress 或 magento。js库动态加载jQuery并调用noConflict分配给脚本元素的onereadystatechange()中的另一个变量命名空间。但是，如果该站点还在我的 js 库之前加载了 Prototype js，则可能会发生 Prototype 和 jQuery 之间的冲突。

在调用 onereadystatechange 回调之前，可能会解析页面并调用 Prototype 函数。如果该 Prototype 函数使用任何“$”，它会导致该函数失败，因为该美元符号“$”仍然是 jQuery，而不是 Prototype（在调用 jQuery.noConflict() 之前）。

我目前的解决方案是检查原型版本并在 jQuery 之后再次动态加载它。像这样的东西：

```
var deps = [];
if(!hasJQueryReqVersion()) {
      deps.push("//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js");
      if ( typeof Prototype !== "undefined" ) { // if ptototype exists, load it again to avoid conflict
            deps.push("//ajax.googleapis.com/ajax/libs/prototype/"+Prototype.Version+"/prototype.js");
      }
   }
// iterate deps and create javascript elements 
```

我可以要求 jQuery 根本不要使用 '$'，这样就不需要出于上述原因再次加载 Prototype 了吗？

# c++ - 带空格的字符串 getline(cin,str); 错误

> ID：13558947
> 
> 赞同：0
> 
> 时间：2012-11-26T05:08:25.127
> 
> 标签：c++, string, spaces

有一个案例：

```
case 3:
    cout << "Digite la palabra que desea añadir: ";
    cin >> word;
    cout << "Digite el significado de la palabra: ";
    getline(cin,auxstr);
    result = addWord(word,auxstr); 
```

但是当我编译并运行程序时，就好像我按下了 enter 到 getline 却不允许我输入一行：

```
Digite la opción adecuada: 3
Digite la palabra que desea añadir: a
Digite el significado de la palabra: La palabra a ha sido añadida con éxito en el diccionario 
```

"La palabra a ha sido añadida con éxito en el diccionario" 是 addWord 函数的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:10:00.193

您仍然`'\n'`在缓冲区中保留上一行的内容，因此当`getline`尝试从缓冲区获取输入时，它只需要`'\n'`并假设工作已完成，不允许您输入任何其他内容。

只是放在`cin.get()`前面`getline(cin,auxstr);`

# c++ - getopt_long 行为怪异

> ID：13558953
> 
> 赞同：0
> 
> 时间：2012-11-26T05:09:22.923
> 
> 标签：c++, c, getopt, getopt-long

我正在编写一些代码来解析命令行输入。我使用 getopt_long 的方式如下：

```
int c = 0; 
static struct option long_options[] =  
{ 
    {"mode",        1,  NULL,   'm'}, 
    {"help",        0,  NULL,   'h'}, 
    {0,             0,  0,      0} 
}; 
while ((c = getopt_long(argc, argv, "mh", long_options, NULL))!=-1) 
{ 
    switch(c) 
    { 
        case 0: 
        { 
            cerr<<"Usage: ./program <-m> <-h>"<<endl; 
            exit(1); 
            break; 
        } 
        case 'm': 
        { 
            if (!strcmp(optarg, "small"))
                mode = 0;
            else if (!strcmp(optarg, "medium"))
                mode = 1;
            else if (!strcmp(optarg, "large"))
                mode = 2;
            else{
                cerr<<"Invalid mode "<<optarg<<endl;
                exit(1);
            }
            break; 
        } 
        case 'h': 
        { 
            cerr<<"See man page for help."<<endl;
            exit(0); 
        } 
        default: 
        { 
            cerr<<"Unrecognized argument!"<<endl; 
            exit(1); 
        } 
    } 
} 
```

我测试了以下内容：

1)

```
./program 
```

程序不进入while循环。检查变量 c 为 -1。

2)

```
./program -h 
```

效果很好。

3)

```
./program -m small 
```

程序退出并从 strcmp() 抛出分段错误。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:21:32.810

这是一个如何解析选项`getopt_long()`并正确处理其返回值的示例，例如选项结束、缺少参数和未知选项：

```
struct Options
{
    std::string username = "guest";

    void parse_command_line(int ac, char** av) try {
        enum {
              HELP
            , USER
        };

        // This array must be in the same order as the enum.
        option const options[] = {
              {"help",            no_argument, nullptr, HELP}
            , {"username",  required_argument, nullptr, USER}
            , {}
        };

        ::opterr = 0;
        for(int c; -1 != (c = getopt_long(ac, av, ":h", options, nullptr));) {
            switch(c) {
            // both short and long option
            case 'h':
            case HELP:
                usage(av, EXIT_SUCCESS);
                break;

            // only long option
            case USER:
                username = ::optarg; // 
                break;

            case ':': // missing argument
                throw Exception("--%s: an argument required", options[::optopt].name);

            case '?': // unknown option
                throw Exception("%s: unknown option", av[optind - 1]);
            }
        }

    }
    catch(std::exception& e) {
        fprintf(stderr, "error: %s\n", e.what());
        usage(av, EXIT_FAILURE);
    }
}; 
```

请注意，没有必要为每个多头期权设置相应的空头期权。

# php - 如何从 php 中的 String 变量中提取特定字符串？

> ID：13558955
> 
> 赞同：0
> 
> 时间：2012-11-26T05:09:58.480
> 
> 标签：php, string, extract

我有与花括号覆盖的变量**$photo**中的图像相关的字符串值。我从 MySQL 表中得到这个值。它在字符串变量**$photo中具有****图像名称、替代文本和图像标题**。我想提取大括号覆盖的图像名称、alt 和图像标题。

 **我添加了具有以下字符串值的代码，

```
<?php
$photo =' {"imagename":
    {"filename":"imagename.jpg","alt":"Hunting Rifle","caption":"This is Hunter Image"}
}';
?> 
```

我想分别获取文件名和 alt 字符串并将其分别存储在新变量中 [$filename,$alt] 。

任何人都知道如何从字符串变量中提取这些特定的字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T05:12:04.597

那是[JSON](http://json.org/)，所以使用[`json_decode`](http://php.net/manual/en/function.json-decode.php).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:20:56.593

```
$jdphoto = json_decode($photo);

$imagename = $jdphoto->imagename;

$filename = $imagename->filename;
$alt = $imagename->alt;
$caption = $imagename->caption; 
```**

# android - Android Fragment & ViewPager：方向改变时崩溃

> ID：13558957
> 
> 赞同：3
> 
> 时间：2012-11-26T05:09:59.513
> 
> 标签：android, android-fragments, actionbarsherlock, android-viewpager, android-orientation

我对 Fragments 还很陌生，我有一个活动，其中包含一些使用 Fragments 和 viewpager 的选项卡。

我的问题是，每当我改变方向或转到主屏幕时，我的应用程序就会崩溃。

这是我的活动：

```
public class MainActivity extends SherlockFragmentActivity {

    ActionBar actionBar;
    ViewPager mPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        mPager = (ViewPager) findViewById(R.id.pager);

        FragmentManager fm = getSupportFragmentManager();

        ViewPager.SimpleOnPageChangeListener pageChangeListener = new ViewPager.SimpleOnPageChangeListener(){
            @Override
            public void onPageSelected(int position) {
                super.onPageSelected(position);
                actionBar.setSelectedNavigationItem(position);
            }
        };

        mPager.setOnPageChangeListener(pageChangeListener);

        MyFragmentPagerAdapter fragmentPagerAdapter = new MyFragmentPagerAdapter(fm);

        mPager.setAdapter(fragmentPagerAdapter);

        actionBar.setDisplayShowTitleEnabled(true);

        ActionBar.TabListener tabListener = new ActionBar.TabListener() {

            @Override
            public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            }

            @Override
            public void onTabSelected(Tab tab, FragmentTransaction ft) {
                mPager.setCurrentItem(tab.getPosition());
            }

            @Override
            public void onTabReselected(Tab tab, FragmentTransaction ft) {
            }
        };

        Tab firstTab = mActionBar.newTab().setText("First Tab").setTabListener(tabListener);

        actionBar.addTab(firstTab);

        Tab secondTab = mActionBar.newTab()
            .setText("Second Tab")
            .setTabListener(tabListener);

        actionBar.addTab(secondTab);
    }
} 
```

...然后这是我的片段之一：

```
public class FirstFragment extends SherlockFragment implements ActionBar.TabListener{

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.fragmentone, container, false);

        // Stuff...

        return view;
    }

    @Override
    public void onStart() {
        super.onStart();
    }
} 
```

...和我的片段适配器：

```
public class MyFragmentPagerAdapter extends FragmentPagerAdapter{

    final int PAGE_COUNT = 2;

    public MyFragmentPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int arg0) {
        Bundle data = new Bundle();
        switch(arg0){
            case 0:
                FirstFragment firstFragment = new FirstFragment();
                data.putInt("current_page", arg0+1);
                firstFragment.setArguments(data);
                return firstFragment;

        case 1:
                SecondFragment secondFragment = new SecondFragment();
                data.putInt("current_page", arg0+1);
                secondFragment.setArguments(data);
                return secondFragment;
        }
        return null;
    }

    @Override
    public int getCount() {
        return PAGE_COUNT;
    }
} 
```

...这是我所有的活动 XML 文件：

```
 <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
    />

</RelativeLayout> 
```

请帮忙，这让我很头疼。如果有帮助，我正在使用 ActionBarSherlock 库。

**编辑：这是我崩溃时得到的 logcat**

```
11-27 22:44:14.590: D/dalvikvm(803): newInstance failed: no <init>()
11-27 22:44:14.599: D/AndroidRuntime(803): Shutting down VM
11-27 22:44:14.599: W/dalvikvm(803): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
11-27 22:44:14.669: W/Trace(700): Unexpected value from nativeGetEnabledTags: 0
11-27 22:44:14.760: E/AndroidRuntime(803): FATAL EXCEPTION: main
11-27 22:44:14.760: E/AndroidRuntime(803): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.pk.chemhelp/com.pk.chemhelp.Debug}: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.pk.chemhelp.Debug$FirstFragment: make sure class name exists, is public, and has an empty constructor that is public
11-27 22:44:14.760: E/AndroidRuntime(803):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
11-27 22:44:14.760: E/AndroidRuntime(803):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
11-27 22:44:14.760: E/AndroidRuntime(803):  at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3692)
11-27 22:44:14.760: E/AndroidRuntime(803):  at android.app.ActivityThread.access$700(ActivityThread.java:141)
11-27 22:44:14.760: E/AndroidRuntime(803):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1240)
11-27 22:44:14.760: E/AndroidRuntime(803):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-27 22:44:14.760: E/AndroidRuntime(803):  at android.os.Looper.loop(Looper.java:137)
11-27 22:44:14.760: E/AndroidRuntime(803):  at android.app.ActivityThread.main(ActivityThread.java:5039)
11-27 22:44:14.760: E/AndroidRuntime(803):  at java.lang.reflect.Method.invokeNative(Native Method)
11-27 22:44:14.760: E/AndroidRuntime(803):  at java.lang.reflect.Method.invoke(Method.java:511)
11-27 22:44:14.760: E/AndroidRuntime(803):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
11-27 22:44:14.760: E/AndroidRuntime(803):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
11-27 22:44:14.760: E/AndroidRuntime(803):  at dalvik.system.NativeStart.main(Native Method)
11-27 22:44:14.760: E/AndroidRuntime(803): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.pk.chemhelp.Debug$FirstFragment: make sure class name exists, is public, and has an empty constructor that is public
11-27 22:44:14.760: E/AndroidRuntime(803):  at android.support.v4.app.Fragment.instantiate(Fragment.java:395)
11-27 22:44:14.760: E/AndroidRuntime(803):  at android.support.v4.app.FragmentState.instantiate(Fragment.java:96)
11-27 22:44:14.760: E/AndroidRuntime(803):  at android.support.v4.app.FragmentManagerImpl.restoreAllState(FragmentManager.java:1726)
11-27 22:44:14.760: E/AndroidRuntime(803):  at android.support.v4.app.FragmentActivity.onCreate(FragmentActivity.java:198)
11-27 22:44:14.760: E/AndroidRuntime(803):  at com.pk.chemhelp.Debug.onCreate(Debug.java:63)
11-27 22:44:14.760: E/AndroidRuntime(803):  at android.app.Activity.performCreate(Activity.java:5104)
11-27 22:44:14.760: E/AndroidRuntime(803):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
11-27 22:44:14.760: E/AndroidRuntime(803):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
11-27 22:44:14.760: E/AndroidRuntime(803):  ... 12 more
11-27 22:44:14.760: E/AndroidRuntime(803): Caused by: java.lang.InstantiationException: can't instantiate class com.pk.chemhelp.Debug$FirstFragment; no empty constructor
11-27 22:44:14.760: E/AndroidRuntime(803):  at java.lang.Class.newInstanceImpl(Native Method)
11-27 22:44:14.760: E/AndroidRuntime(803):  at java.lang.Class.newInstance(Class.java:1319)
11-27 22:44:14.760: E/AndroidRuntime(803):  at android.support.v4.app.Fragment.instantiate(Fragment.java:384)
11-27 22:44:14.760: E/AndroidRuntime(803):  ... 19 more
11-27 22:44:14.880: W/ActivityManager(290):   Force finishing activity com.pk.chemhelp/.Debug
11-27 22:44:14.950: W/Trace(519): Unexpected value from nativeGetEnabledTags: 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:18:48.660

例外情况很明显，Android 需要完全访问您`Fragment`的类，以便它可以在需要时实例化它（例如在配置更改时）。问题是您在`FirstFragment`类中声明为内部类`Debug`并且Android系统无法实例化，`FirstFragment`因为内部类始终与封闭类的实例相关联（`Debug`在您的情况下），所以`FirstFragment`不能只是简单地实例化。

`FirstFragment`解决方案是通过将类与类“分离” `Debug`，或者将其放入`FirstFragment`自己的 java 文件中，或者将其保留在`Debug`类中并制作它`static`（因此它不再与`Debug`类的实例绑定）：

```
public static class FirstFragment extends SherlockFragment implements ActionBar.TabListener{ 
```

# c# - 在不使用 ViewBag 的情况下将两个查询从控制器传递到视图

> ID：13558959
> 
> 赞同：0
> 
> 时间：2012-11-26T05:10:32.473
> 
> 标签：c#, asp.net-mvc-3

我正在尝试在同一视图页面中比较两辆汽车的详细信息。我不想使用 ViewBag 方法将我的数据发送到查看，因为我从很多人那里听说这不是推荐的数据传递方式。

我在这件事上找不到任何信息。我试图在一个查询中发送两辆车的详细信息，但这会非常复杂，而且我没有成功区分我视图中的第一辆车和第二辆车。

这是我的观点的缩写形式：

```
@model IEnumerable<Cars.Models.Car>

@using (Html.BeginForm("Comparison", "Home", FormMethod.Post,
new { id = "ComparisonFormID" })) 
{
<table>

    <tr>
        <td>
            <p>First car:</p>
            @Html.DropDownList("carMake","All Makes")
        </td>
        <td>
            <p>Second car:</p>
            @Html.DropDownList("carMake2", "All Makes")

            <button type="submit" name="submit" value="search" id="CompareID">Compare</button>
        </td>
    </tr>
    @foreach (var item in Model)
    {
    <tr>
        <td>
            <label>Make:</label>
        </td>
        <td>
            <p>@Html.DisplayFor(modelItem => item.Make)</p>         @*First car's information*@
        </td>
        <td>
            <p>@Html.DisplayFor(modelItem => item.Make)</p>         @*Second car's information*@
        </td>
    </tr>
    }
</table> 
```

}

我的模型类的缩短版本：

```
public class Car
{
    public int ID { get; set; }

    public String Make { get; set; }
} 
```

最后是我的控制器：

```
public ActionResult Comparison(String carMake, String carMake2)
    {
        var makeLstBase = new List<String>();
        var makeQryBase = from m in db.Car
                          orderby m.Make
                          select m.Make;

        makeLstBase.AddRange(makeQryBase.Distinct());
        ViewBag.carMake = new SelectList(makeLstBase);
        ViewBag.carMake2 = new SelectList(makeLstBase);

        var cars = from m in db.Car
                   orderby m.Make
                   where m.Make == carMake || m.Make == carMake2
                   select m;

        return View(cars);
    } 
```

请注意，我在页面加载时使用 ViewBag 填充下拉列表。现在我试图在两个不同的列中展示两个不同的汽车品牌，以便详细比较汽车。

我的问题：从同一个模型类中获取两个查询并将其发送到视图的最佳方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:10:39.197

从你的观点我猜你想显示一个比较列表？只需为表中的一行创建一个类：

```
public class CarComparisonViewModel
{
    Car Car1 { get; set; }
    Car Car2 { get; set; }
} 
```

在您看来，您列出了这些比较：

```
@model IEnumerable<CarComparisonViewModel>
@foreach (var item in Model)
{
  <tr>
    <td>
        <label>Make:</label>
    </td>
    <td>
        <p>@Html.DisplayFor(m => item.Car1.Make)</p>
    </td>
    <td>
        <p>@Html.DisplayFor(m => item.Car2.Make)</p>
    </td>
</tr> 
```

我不确定你想如何查询你的汽车，所以我把动作部分放在一边，直到你提供更多信息。

# java - 如何将面板发送到内部框架的背面？

> ID：13558960
> 
> 赞同：0
> 
> 时间：2012-11-26T05:10:34.267
> 
> 标签：java, swing, background, jframe, menubar

我有一个 JDesktopPane，里面有一个面板。我在顶部还有一个帮助菜单。

当它绘制面板时，它会将其绘制在菜单栏的顶部，从而挡住菜单栏。

如何将面板发送到后面，解除菜单栏的阻塞？

这是构造函数。

```
public Desktop () {
   Toolkit toolkit = Toolkit.getDefaultToolkit();
   Dimension scrnsize = toolkit.getScreenSize();
   desktop.setBackground(Color.orange); 
   desktopFrame.setContentPane(desktop);
   desktopFrame.addKeyListener(this);
   desktopFrame.setVisible(true);
   desktopFrame.setSize(scrnsize);

   desktopBackground = new JPanel();
   desktopBackground.setLocation(30 , 10);
   desktopBackground.setSize(100, 110);
   desktopBackground.setBackground(Color.red);

    setJMenuBar(menuBar);       

    menuBar.add(startButton);       
    startButton.add(programsButton);        
    programsButton.add(terminalButton);
    desktopFrame.setJMenuBar(menuBar);

    terminalButton.addActionListener(this);

    desktop.add(menuBar);
    desktop.add(desktopBackground);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:20:18.190

菜单栏甚至不应该位于内部面板或组件可以阻止它的位置。`setJMenuBar(...)`如果这是一个 JFrame 应用程序，则应通过其方法将 JMenuBar 直接添加到 JFrame 。然后可以将 JDesktopPane 添加到 JFrame BorderLayout.CENTER，并将 JInternalFrames 添加到 JDesktopPane。这样就没有机会覆盖菜单栏。

# c++ - 迭代结构类型的链接列表

> ID：13558961
> 
> 赞同：0
> 
> 时间：2012-11-26T05:10:42.427
> 
> 标签：c++, struct, iterator, linked-list

我有一个结构的链表：

```
typedef struct {
    std::string title;
    int rating;
} listing; 
```

和一个标准迭代器，它是我列表类的一部分：

```
template<class T>
class ListIterator
{
public:
    ListIterator( ) : current(NULL) {}

    ListIterator(Node<T>* initial) : current(initial) {}

    const T& operator *( ) const { return current->getData( ); }
    //Precondition: Not equal to the default constructor object,
    //that is, current != NULL.

    ListIterator& operator ++( ) //Prefix form
    {
        current = current->getLink( );
        return *this;
    }

    ListIterator operator ++(int) //Postfix form
    {
        ListIterator startVersion(current);
        current = current->getLink( );
        return startVersion;
    }

    bool operator ==(const ListIterator& rightSide) const
    { return (current == rightSide.current); }

    bool operator !=(const ListIterator& rightSide) const
    { return (current != rightSide.current); }

    //The default assignment operator and copy constructor
     //should work correctly for ListIterator,
private:
    Node<T> *current;
}; 
```

这在处理标准数据类型（int、char、string 等）列表时效果很好，但我不知道如何遍历列表中每个结构中的数据。

这可能是由于我如何存储它们：

```
// declaration of list, Queue is list class name
Queue<listing> list;

// data reads from file
while (!datafile.eof()) {

    listing entry = *new listing;

    datafile >> listing.rating;
    std::getline(datafile, listing.title);

    list.add(entry);

} 
```

希望这不是太模糊。如果您需要查看更多代码，请告诉我。

节点和队列类：

```
template<class T>
class Node
{
public:
    Node(T theData, Node<T>* theLink) : data(theData), link(theLink){}
    Node<T>* getLink( ) const { return link; }

    const T& getData( ) const { return data; }

    void setData(const T& theData) { data = theData; }
    void setLink(Node<T>* pointer) { link = pointer; }

private:
    T data;
    Node<T> *link;
};

template<class T>
class Queue
{
public:
    typedef ListIterator<T> Iterator;

    Queue( );
    // Initializes the object to an empty queue.

    Queue(const Queue<T>& aQueue);

    Queue<T>& operator =(const Queue<T>& rightSide);

    virtual ~Queue( );

    void add(T item);
    // Postcondition: item has been added to the back of the queue.

    T remove( );
    // Precondition: The queue is not empty.
    // Returns the item at the front of the queue
    // and removes that item from the queue.

    bool isEmpty( ) const;
    // Returns true if the queue is empty. Returns false otherwise.

    Iterator begin() const { return Iterator(front); }
    Iterator end() const { return Iterator(); }

private:
    Node<T> *front; // Points to the head of a linked list. 
                    // Items are removed at the head

    Node<T> *back; // Points to the node at the other end of the linked list.
                   // Items are added at this end.
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:26:44.530

解决方案非常简单。我很尴尬我没有早点看到它。

```
Queue<listing>::Iterator all;
for (all = list.begin(); all != list.end(); all++) {

    listing entry = *all;
    cout << entry.title << " ";
    cout << entry.rating << "\n";

} 
```

# python - 将空字符串传递给 argparse

> ID：13558964
> 
> 赞同：5
> 
> 时间：2012-11-26T05:11:01.890
> 
> 标签：python, command-line, argparse, python-3.2

我正在使用`argparse`（Python 3.2）。一个参数`mode`被简单地定义为：

```
p.add_argument('--mode', dest='mode') 
```

`mode`我想以将参数设置为空字符串的方式从命令行调用程序；或者至少到一个空格`' '`（我可以稍后去掉空格）。

我尝试使用（在 Windows 下）`program_name --mode ""`和`program_name --mode " "`，但都没有成功。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-26T05:13:58.827

这似乎在 OS-X 下对我有用：

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('--mode')
p = parser.parse_args()
print(p) 
```

进而：

```
python test.py --mode= 
```

我没有windows机器，所以我不知道它们是如何操作的......

当然，您上面提到的其他内容也适用于 OS-X。这里的优点是它不应该依赖于 shell 如何拆分引号中的参数，这应该使它在我认为的更多地方工作。

# php - 多维数组和array_push？

> ID：13558965
> 
> 赞同：1
> 
> 时间：2012-11-26T05:11:06.390
> 
> 标签：php, arrays, array-push

我有一个巨大的多维数组，我们来命名它`$big_array`。

另外我有这组数据，我必须放入上面的数组：

```
$input = array('one','two','three','four'); 
```

这就是我需要推入 $big_array 的内容（基于上面的 $input）：

```
 $value = array(
   'id' => $number,
   'title' => 'foo',
   'type' => 'options',
   'options' => array('one','two','three','four'),
   'page' => 'font_manager',
   );

  array_push($big_array, $value); 
```

$big_array 结构如下所示：

```
$big_array = array(
(...)

array(
 'id' => 'Bar',
 'title' => 'Foo',
 'type' => 'select',
 'page' => 'font_manager',
 ), 

 array(
  'id' => 'ss_font',
  'title' => __("Main font:",'solidstyle_admin'), 
  'type' => 'select',
  'page' => 'font_manager',
  'description' =>  __("This font will be used for all pages.",'solidstyle_admin'),
  'default' => '',
  'options' => array(
     'option1' => 'option1',
     'option2' => 'option12,
   ),
  ),

(...)
); 
```

如果可以在数组中包含循环（是的，我知道这是多么错误，只是想更好地解释它），那么我真正想做的就是这样：

```
$input = array('one','two','three','four');
$value = array(
       'id' => $number,
       'title' => 'foo',
       'type' => 'options',
       'options' => array(
         foreach($input as $number) {
           echo $number.',';
         };
        ),
       'page' => 'font_manager',
       ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T12:48:25.820

我*想*你要做的是得到

```
$input = array('one','two','three','four'); 
```

插入

```
$value = array(
   'id' => $number,
   'title' => 'foo',
   'type' => 'options',
   'page' => 'font_manager',
); 
```

使它看起来像这样：

```
$value = array(
   'id' => $number,
   'title' => 'foo',
   'type' => 'options',
   'options' => array('one','two','three','four'),
   'page' => 'font_manager',
); 
```

然后可以推到 $bigArray 上。如果是这样的话，它应该很简单

```
$input = array('one','two','three','four');
$value = array(
   'id' => $number,
   'title' => 'foo',
   'type' => 'options',
   'page' => 'font_manager',
);
$value['options'] = $input;
$bigArray[] = $value; // equivalent to array_push($bigArray, $value); 
```

如果我误解了你的目标，请告诉我。

编辑：如果你想要这样的事情

```
$value = array(
   'id' => $number,
   'title' => 'foo',
   'type' => 'options',
   'options' => array('one,two,three,four'),
   'page' => 'font_manager',
); 
```

那么你就会改变

```
$value['options'] = $input; 
```

至

```
$value['options'] = implode(",",$input); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T05:45:59.013

有几种方法可以模拟`foreach`循环`$array['options']`——最简单的方法是在其他地方定义一个函数来执行此操作，然后返回该选项数组！喜欢：

```
function return_array_options($input) {
   $array = array();
   foreach($input as $number) {
     $array[] = $number 
     // or, $array['option'.$number] = $number 
   };

   return $array;
} 
```

然后在你的代码的其他地方你可以使用这个函数：

```
$my_array = array();
$my_array['options'] = return_array_options(array(1,2,3,4)); 
```

通过编程，最好将事情分解成较小问题的解决方案，然后再组合起来。

此外，请查看 PHP 的函数式编程函数，例如`array_map()`、 和`array_filter()`. 它们有助于像循环一样转换事物，但实际上并没有使用循环。因此，它们在某些方面在语法上更加灵活。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T14:43:46.157

如果我理解得很好。你想得到这个：

```
 $input = array('one','two','three','four');
    $value = array(
       'id' => $number,
       'title' => 'foo',
       'type' => 'options',
       'options' => array(
         foreach($input as $number) {
           echo $number.',';
         };
        ),
       'page' => 'font_manager',
       ); 
```

并将其推入 $big_array，对吗？

那么解决方案非常简单。

```
 $input = array('one','two','three','four');
        $value = array(
           'id' => $number,
           'title' => 'foo',
           'type' => 'options',
           'options' => array(
            ),
           'page' => 'font_manager',
           ); 
```

建立你的阵列。然后你的循环：

```
foreach($input as $number)
{
    $value['options'][] = $number;
} 
```

如果您想“按原样”添加 $input，您可以这样做

```
$value['options'] = $input; 
```

如果你想拥有 'one' => 'one'

```
foreach($input as $number)
{
    $value['options'][$number] = $number;
} 
```

它将产生与循环完全相同的结果，而没有循环开销。

最后：

```
array_push($big_array, $value); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T05:20:09.637

看看下面的代码。我已经评论了它，所以你可以理解我在做什么。

```
$input = array('one','two','three','four');

// set the base info here, i.e., info that is common to each push
$baseInfo = array(   
   'title' => 'foo',
   'type' => 'options',   
   'page' => 'font_manager',
   );

// now loop
foreach($input as $number) {
    // fill in base info with data that is specific to this iteration
    $baseInfo['id'] = $number;
    $baseInfo['options'] = $input;

    // do the push
    array_push($big_array, $baseInfo);
} 
```

*我不完全确定我的问题是否正确。如果您要问其他问题，请澄清，我将编辑我的答案。*

# android - 隐藏 ActionBar 上的 Home 按钮 Sherlock Actionbar 扩展导航活动

> ID：13558967
> 
> 赞同：4
> 
> 时间：2012-11-26T05:11:30.340
> 
> 标签：android, actionbarsherlock

我在我的简单应用程序上使用 ActionBarSherlock，如果用户在主页/主要活动上，我想隐藏主页按钮。我了解如何使用 setHomeButtonEnabled(false) 执行此操作，但是，我正在扩展一个包含我的导航并具有 setHomeButtonEnabled(true) 的类，并且我似乎无法在我的主要活动中覆盖该设置。

感谢@andy，我能够摆脱图标，但是，我无法摆脱 < 箭头。有任何想法吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T02:26:55.647

使用 ActionBarSherlock 只需将其放在您的家庭/主要活动 onCreate() 方法中：

```
final ActionBar actionBar = getSupportActionBar();
actionBar.setDisplayShowHomeEnabled(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:41:53.223

我发现这样做的唯一方法是不要在你的 baseActivity 上设置这个：

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

然后为需要菜单的每个活动设置它：

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

或者

```
getSupportActionBar().setDisplayHomeAsUpEnabled(false); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-26T05:21:36.227

获取主页按钮视图并应用它

```
 mHomeButton.setVisibility(View.INVISIBLE); 
```

# android - 开发者选项从设置中消失

> ID：13558969
> 
> 赞同：7
> 
> 时间：2012-11-26T05:11:51.483
> 
> 标签：android, android-4.2-jelly-bean

升级到 Android Jelly Bean 4.2 后，我在设置中找不到`developer options`。这个设置会发生什么？我现在在哪里可以找到它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T05:11:51.483

我发现它隐藏在设置菜单中以改善用户体验。**您可以在设置>关于手机>版本号上点击****7**次随时激活它

 **来自官方 android[文档](http://developer.android.com/about/versions/jelly-bean.html#42-dev-options)：

> 在运行 Android 4.2 的设备上，开发者选项默认隐藏，有助于为用户创造更好的体验。您可以随时在任何兼容的 Android 设备上点击设置 > 关于手机 > 版本号 7 次来显示开发者选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-21T21:16:40.150

在大多数运行 Android 3.2 或更早版本的设备上，您可以在“

```
Settings > Applications > Development. 
```

在 Android 4.0 及更高版本上，它位于

```
Settings > Developer options. 
```

注意：在 Android 4.2 和更新版本上，开发者选项默认是隐藏的。要使其可用，请访问

```
Settings > About phone and tap Build number seven (7) times. 
```

返回上一个屏幕以查找开发人员选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T10:27:52.713

从 Android 4.2 开始，开发者选项默认隐藏以增强用户体验。

**您可以随时在任何兼容的 Android 设备上点击设置 > 关于手机 > 版本号 7 次来获取和启用开发者选项。**

在三星、索尼 experia 和 HTC 设备上也已经过测试并且运行良好。**

# google-maps - 如何部署新的地图瓦片，强制清除用户缓存？

> ID：13558972
> 
> 赞同：1
> 
> 时间：2012-11-26T05:11:56.800
> 
> 标签：google-maps, google-maps-api-3

我有一个自定义地图，其中包含我为网站创建的自定义地图图块。每当我更新这些地图图块并将它们部署到站点时，我都需要我的用户清除旧图块的缓存，以便他们下载新图块。

由于地图图块是由 JavaScript 加载的，因此您不能简单地强制用户使用 SHIFT-Refresh 获取新文件。

到目前为止，我能想到的唯一方法是更改​​加载磁贴的文件夹名称。就像是：

```
tiles-20121125  <--- todays date 
```

所以每次更新磁贴时，我只需将文件夹名称更改为新名称，强制访问者下载新磁贴。

有没有更好的办法？可能是 Google Maps v3 API 内置的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:51:30.820

浏览器根据请求的 url 缓存图像数据，这也是 ajax 缓存。Google Maps API 不提供任何方法来做到这一点。

所以最简单的方法是，您可以将版本附加为查询参数。

```
function getTileUrl(point, number) {
  return "http://your.server.com/tiles/" + point.x + "_" + point.y + ".png?v=20121125"
} 
```

然后 Google Maps API 从 URL 加载图像数据。加载图像的机制可能是：

```
var img = new Image();
img.src = tile_url; 
```

类似的东西。（实际上 Google Maps API 最近使用的是 canvas 标签而不是 Image）

# vim - 在 .vimrc 中设置文件内容的选项

> ID：13558975
> 
> 赞同：0
> 
> 时间：2012-11-26T05:12:25.800
> 
> 标签：vim

我需要一个

```
set foo=bar 
```

或者

```
set foo=baz 
```

在`.vimrc`. 我想从某个文件中读取“bar”或“baz”。也就是说，`sh`使用`foo=`cat 文件会做什么（我不知道如何逃避反引号......）。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:32:13.120

```
let &foo = readfile('filename', '', 1)[0] 
```

该`let &foo`语法允许您将选项设置为任意表达式。

# php - 建议，php mysql transaction for inserts to multiple tables in a block

> ID：13558985
> 
> 赞同：1
> 
> 时间：2012-11-26T05:13:12.963
> 
> 标签：php, mysql, transactions, symfony-1.4, propel

我需要对一段代码使用事务，它由多个插入组成。在 try catch 块中包含整个代码块是否是一个好习惯，在 try..catch 块之前开始事务。然后对于任何捕获的异常回滚其他事务提交。

基本问题：

*   在单个事务周期内拥有整个代码块是不好的做法吗？
*   如果这是一种不好的做法，那么处理这个问题的好方法是什么？为什么？

这是一段代码：

```
 $con = Propel::getConnection(SomeTablePeer::DATABASE_NAME);        
    $con->beginTransaction();        
    try {
        $currentRevision = $budgetPeriod->getRevision();
        $newRevision = $currentRevision->copy();
        $newRevision->setIdclient($client->getIdclient());            
        $newRevision->setIsLocked(0);
        $newRevision->save();
        $currentRevision->setEffectiveTo($currentDate);
        $currentRevision->save();

        $currentRevisionHasCorporateEntities = $currentRevision->getCorporateEntitys();
        $newOldCorporateEntitiesRelations = array(); 

        foreach ($currentRevisionHasCorporateEntities as $currentRevisionHasCorporateEntity) {

            $newRevisionHasCorporateEntity = $currentRevisionHasCorporateEntity->copy();                
            $newRevisionHasCorporateEntity->save();
        }

     // this continues for a while there are a whole list of insertions based on previous insertion and on and on.
    }catch (Exception $exc) {
        $con->rollback();            
        $this->getUser()->setFlashError('Error occured! Transaction Failed');
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:29:21.623

实际上，我们应该关注较小的事务边界，这样我们就可以避免在 Db 中发生任何锁定，但有时我们需要执行或不执行整个代码块，所以在这种情况下，我们几乎没有任何机会，你需要尽可能模块化你的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:31:58.257

这里需要注意的是，无论 try 块有多大，我们都应该能够捕捉到它抛出的异常并采取相应的措施。

但是在这里你已经使用了

```
catch (Exception $exc) 
```

您将无法捕获不同的异常。这有助于调试和显示异常的正确原因。

此外，如果它是一个事务，我们必须将它放在一个 try 块中

# angularjs - angularjs调用$resource参数和美元符号

> ID：13558989
> 
> 赞同：3
> 
> 时间：2012-11-26T05:13:38.013
> 
> 标签：angularjs

在来自 angularjs 站点的“连接后端”演示代码中，他们设置了一个 db 调用。据我所知，他们正在扩展更新功能，以添加 mongolab api 所需的一些额外参数。

```
angular.module('mongolab', ['ngResource']).
factory('Project', function($resource) {
  var Project = $resource('https://api.mongolab.com/api/1/databases' +
      '/angularjs/collections/projects/:id',
      { apiKey: '4f847ad3e4b08a2eed5f3b54' }, {
        update: { method: 'PUT' }
      }
  );

  Project.prototype.update = function(cb) {
    return Project.update({id: this._id.$oid},
        angular.extend({}, this, {_id:undefined}), cb);
  }; 
```

然后他们像这样调用更新属性：

```
$scope.save = function() {
$scope.project.update(function() {
  $location.path('/');
}); 
```

我尝试使用此代码使用本地开发服务器构建演示应用程序，因此我省略了扩展更新属性，因为我不需要额外的 $oid 参数。我需要的是指定更新方法应该使用 PUT。我的代码是这样的：

```
var Unit = $resource('http:/localhost/api/unit/:id', {id:'@Unit_Id'},
{'update': { method: 'PUT' }}); 
```

然后像这样调用它：

```
$scope.save = function () {
    $scope.unit.update(function () {
        $location.path('/unitlist');
    }); 
```

但我发现代码只在更新前使用美元符号运行，如下所示：

```
 $scope.save = function () {
    $scope.unit.$update(function () {
        $location.path('/unitlist');
    }); 
```

所以这是我的问题：

1.  在演示代码中，“更新”实际添加到 Project 变量的位置在哪里？作为 $resource 中的参数或使用原型扩展项目？
2.  为什么我的代码中未定义更新，除非我在调用它时添加 $ 前缀？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:26:55.483

> “在演示代码中，“update”实际上是在哪里添加到Project变量中的？作为$resource中的参数还是使用prototype扩展Project？

将以下代码添加到 factory() 方法的末尾：

```
console.log('Project.update=' + Project.update)
console.log('Project.prototype.update=' + Project.prototype.update)
return Project; 
```

我们看到 Project.update 是一个函数，而 Project.prototype.update 是另一个/不同的函数。所以实际上有两个更新函数。函数 Project.update 是一个（非 GET）“类”操作，因此调用它时不带 $ 前缀。update() 是在 $resource 返回的对象上定义的函数 - 即 Project。实际上，我们看到函数 Project.prototype.update 调用了 Project.update(...)。

在 EditCtrl 中，当从服务器返回数据时，*项目*变量是资源“实例”对象（与资源“类”对象不同），因此它具有（非 GET）“实例”操作，即以 $ 为前缀。其中一项操作是 $update。将以下 log() 添加到 EditCtrl 函数以证明 project.$update() 存在：

```
Project.get({id: $routeParams.projectId}, function(project) {
   console.log('project.$update=' + project.$update) 
```

所以现在我们有了第三个“更新”功能。然而，在演示代码中，他们没有使用这个 project.$update() 函数——而是使用他们在 Project.prototype 上定义的函数。

> “为什么我的代码中未定义更新，除非我在调用它时添加 $ 前缀？”

在您的代码中，应该定义 Unit.update （这是一个资源“类”操作），当您的数据从服务器返回时，则 $scope.unit.$update 成为定义（这是一个资源“实例”操作）。Unit 是一个类，$scope.unit 是一个实例。

在您的代码中，您可能不需要使用 Unit.update，因为我猜您首先使用 Unit.get() 您的数据，然后将返回的数据分配给 $scope.unit，然后使用实例（不是类），因此您使用 $scope.unit.$update() 而不是 Unit.update() 进行更新，这是推荐的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T12:42:58.223

好的，这是[来自文档](http://docs.angularjs.org/api/ngResource.%24resource)

> 可以使用以下参数调用类对象或实例对象上的操作方法： HTTP GET “类”操作：Resource.action([parameters], [success], [error]) 非 GET “类”操作：资源.action([parameters], postData, [success], [error]) 非 GET 实例操作：instance.$action([parameters], [success], [error])

所以，当你扩展类（原型）时，调用它时不要像正常的 $ 一样，但是当你添加一个动作作为 $resource 前缀 $ 的参数时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:11:56.200

据我所知，他们用这段代码扩展了原型：

```
Project.prototype.update = function(cb) {
  return Project.update({id: this._id.$oid}, angular.extend({}, this, {_id:undefined}), cb);
}; 
```

然后他们在 project.js 的第 30 行创建了一个项目实例

```
$scope.project = new Project(self.original); 
```

然后他们可以通过简单地调用来执行更新：

```
$scope.project.update(...) 
```

如果您摆脱了扩展服务的原型，则不能调用*$scope.unit.update*，因为不存在 unit 的称为*update*的属性。

我希望它有帮助:)

# c++ - 永久存储缓冲区值

> ID：13558991
> 
> 赞同：0
> 
> 时间：2012-11-26T05:13:43.197
> 
> 标签：c++

我正在尝试解析文本文件的行，然后将它们存储在`vector<string>`. 我来自 Java 背景，对 C++ 如何处理将内容分配给缓冲区的值感到困惑。这是我的代码：

```
string line;
vector<string> adsList;
ifstream inputFile;
inputFile.open("test.txt");
while(getline(inputFile, line))
{
    adsList.push_back(line);
} 
```

在 Java 中，当向数据结构添加对象时，会创建对象的副本，然后插入该副本。在 C++ 中，我的理解是数据结构只保存引用，因此任何操作都非常快。在 C++ 中实现我想要做的事情的正确方法是什么？我还尝试了以下代码：

```
vector<string> adsList;
string line;
ifstream inputFile;
inputFile.open("test.txt");
while(getline(inputFile, line))
{
    string *temp = new string;
    *temp = line;
    adsList.push_back(*temp);
} 
```

我的理由是，创建一个新的字符串对象并存储它会在每次循环迭代被销毁后保留它。C++ 似乎处理这个与 Java 完全相反的问题，我很难理解它。

编辑：这是 test.txt 的样子：

```
item1 item1 item1
item2 item2 item2
item3 item3 item3
item4 item4 item4 
```

我试图将每一行存储为一个字符串，然后将字符串存储在我的向量中。所以向量的前面会有一个值为“item1 item1 item1”的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:22:29.723

`push_back()`制作副本，因此您的第一个代码示例完全符合您的要求。事实上，所有 C++ 结构都默认存储副本。您必须有一个*指针*容器才能获取副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:22:41.060

由于您没有发布整个代码，我建议您试试这个，看看它是否正在读取文件：

```
#include <iostream>
#include <fstream>
#include <vector>
using namespace std;

int main() {
  fstream inputFile("test.txt",fstream::in);
  string l;
  vector<string> v;
  while(getline(inputFile,l)) v.push_back(l);
  //Display the content of the vector:
  for(int i = 0; i < v.size(); ++i) {
    cout << v[i] << endl;
  }
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T05:22:59.367

您对引用的理解不正确-Java 存储引用，C++ 存储您要求的任何内容，无论是它`pointers`还是`copies`（请注意，您不能将引用存储在 stl 容器中，等价于指针）

`vector::push_back`存储存储在向量中的项目的**副本**- 因此您不必在堆上创建`pointer`, 和`new`一些内存来存储字符串。

（在内部，有**一些**堆分配正在进行，但这是实现细节`std::string`）

我们在 C++ 中的选项**是**store `pointers`，而这些你**必须**堆分配，否则当当前堆栈帧被弹出时，指针将指向失效的内存......但这是另一个话题。

有关代码的简单工作示例，请参见此处：

```
#include <iostream>
#include <vector>
#include <fstream>

int main()
{
    std::vector<std::string> adsList;
    std::string line;
    std::ifstream inputFile;
    inputFile.open("test.txt");

    // read a line from the file - store it in 'line'
    while(getline(inputFile, line))
    {
        // store a *copy* of line in the vector
        adsList.push_back(line);
    }

    // for each element in adsList vector, get a *reference* (note the '&')
    for (std::string& s : adsList)
    {
        std::cout << s << std::endl;
    }

    exit(0);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T05:23:54.757

你最初的假设是不正确的。副本（通常）存储在`vector`（忽略使用 C++11 引入的移动操作）。通常，这是您想要的操作方式。

如果您真的担心速度并且想要存储对事物的引用（实际上是指针），您将需要使用类似`std::unique_ptr`or的东西`std::shared_ptr`。例如：

```
std::vector<std::unique_ptr<std::string>> adsList;
std::string line;
inputFile.open("test.txt");
while(std::getline(inputFile, line)) {
    adsList.push_back(std::unique_ptr<std::string>(new std::string(line));
} 
```

通常，仅当您必须能够修改容器中的值并将修改反映到原始对象时才会这样做 - 在这种情况下，您将使用`std::shared_ptr`. 到目前为止，最常见的场景是您的第一个代码示例。

# php - php 显示目录中的图像

> ID：13558993
> 
> 赞同：0
> 
> 时间：2012-11-26T05:13:59.777
> 
> 标签：php

我试图显示目录“uploaded_files”中的图像

来源：使用本[教程中的代码](http://www.youtube.com/watch?v=aL-tOG8zGcQ&feature=plcp)

但我得到的只是盒子，没有图片[链接到我的项目](http://ultimatemango.com/lightboxphabumdelete/phalbum/multiple/test.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T05:16:58.127

你的代码是`<img scr="...`

将其更改为`<img src="...`

# javascript - javascript中的InfoWindow对于移动设备是否可点击？

> ID：13558994
> 
> 赞同：0
> 
> 时间：2012-11-26T05:14:02.103
> 
> 标签：javascript, jquery-mobile, google-maps-mobile

我的应用程序中有一个位置，当我单击按钮时，它会在该位置上显示一个带有标记的地图，当我单击标记时，它会显示一个包含该位置详细信息的信息窗口。现在我希望当我点击那个信息窗口时，另一个地图页面打开，显示我当前位置和那个位置之间的路径。

是否有人建议我在移动设备中是否可以点击 InfoWindow，所以我转到下一页。

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:28:59.977

不能那样做。

您还有 3 个其他选项：

1.  查看[此](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-streetview.html)示例并将 infoWindow 替换为对话框：

2.  将点击事件标记在另一个页面上显示所需的信息：

    ```
    $('#map_canvas').gmap('addMarker', {
         'position': new google.maps.LatLng(parameters[j].lat, parameters[j].lng),
         'bounds': true
    }).click(function() {
          // Do something with marker
    }); 
    ```

3.  在 google.maps.Map 实现的情况下，有一个用于创建自定义信息框的插件。它被称为 InfoBox，[在这里](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html)和[这里](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html)你可以找到更多关于它的信息。随心所欲地设计它。

[在这里](https://stackoverflow.com/questions/12102598/trigger-event-with-infowindow-or-infobox-on-click-google-map-api-v3)，您将找到如何在 infoWindow 和 infoBox（v2 和 v3）上添加点击事件的示例。之后，只需使用此代码显示您想要的页面：

```
$.mobile.changePage("#jobInfo", {transition: "none", reloadPage : false}); 
```

# c - 可以将地址分配给C中的变量吗？

> ID：13558995
> 
> 赞同：5
> 
> 时间：2012-11-26T05:14:05.253
> 
> 标签：c, pointers, memory-address, addressof, address-operator

是否可以在内存中为变量分配您想要的地址？

我试图这样做，但我收到一个错误，因为“需要左值作为赋值的左操作数”。

```
int main() {
  int i = 10;
  &i = 7200;
  printf("i=%d address=%u", i, &i);
} 
```

我的方法有什么问题？C语言中有什么方法可以将我们想要的地址分配给变量吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T05:19:47.660

不是直接的。你可以这样做： int* i = 7200; .. 然后使用 i (ie. *i = 10) 但你很可能会崩溃。这仅在进行低级开发时才有意义 - 设备驱动程序等......具有已知的内存地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T05:27:02.210

C 语言无法为您提供将名称“附加”到特定内存地址的方法。即你不能告诉语言一个特定的变量名应该引用一个位于特定地址的左值。因此，如前所述，您的问题的答案是“不”。故事结局。

此外，从形式上讲，没有其他可移植的方式来处理 C 中的特定数字地址。语言本身没有定义可以帮助您做到这一点的功能。

但是，特定的实现可能会为您提供访问特定地址的方法。在典型的实现中，将整数值转换`A`为指针类型会创建一个指向 address 的指针`A`。通过取消引用此类指针，您可以访问该内存位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T05:28:31.083

假设您在现代操作系统上使用 x86 类型的处理器，则无法写入 aribtray 内存位置；CPU 与操作系统协同工作以保护内存，以便一个进程不会意外（或有意）覆盖另一个进程的内存。允许这样做会带来安全风险（请参阅：缓冲区溢出）。如果您尝试这样做，则会收到“分段错误”错误，因为 OS/CPU 会阻止您执行此操作。

有关这方面的技术细节，您需要从[1](http://en.wikipedia.org/wiki/Ring_%28computer_security%29)、[2](http://en.wikipedia.org/wiki/Protected_mode)和[3](http://en.wikipedia.org/wiki/Virtual_memory)开始。

相反，您要求操作系统为您提供一个可以写入的内存位置，使用`malloc`. 在这种情况下，操作系统内核（通常是唯一允许写入任意内存位置的进程*）*找到一个空闲的内存区域并将其分配给您的进程。分配过程还将该内存区域标记为属于您的进程，以便您可以读取和写入它。

但是，不同的操作系统/处理器架构/配置可能允许您写入任意位置。在这种情况下，此代码将起作用：

```
#include <stdio.h>
void main() {
  int *ptr;
  ptr = (int*)7000;
  *ptr = 10;
  printf("Value: %i", *ptr);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T05:18:58.630

不便携。但是一些编译器（通常用于嵌入式世界）有扩展来做到这一点。

例如在 IAR 编译器（这里是 MSP430）上，你可以这样做：

```
static const char version[] @ 0x1000 = "v1.0"; 
```

这会将对象`version`放在内存地址`0x1000`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T05:17:13.170

不。

即使可以， 7200 也不是指针（内存地址），它是一个 int，所以无论如何这都行不通。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T05:19:27.260

可能无法确定变量将具有哪个地址。但是作为你最后的希望，有一个叫做“指针”的东西，所以你可以修改地址上的值`7200`（尽管这个地址可能无法访问）：

```
int *i = (int *)7200;
*i = 10; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-26T05:20:06.823

使用 ldscript/链接器命令文件。但是，这将在链接时分配，而不是在运行时分配。

链接器命令文件语法很大程度上取决于特定的编译器。因此，您需要为您的编译器搜索链接器命令文件。

近似的伪语法有点像这样：

```
In linker command file:
.section start=0x1000 lenth=0x100 myVariables
In C file:
#pragma section myVariables
int myVar=10; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-26T05:22:32.877

这是不可能的，也许可以通过编译器扩展来实现。但是，您可以在您想要的地址访问内存（如果您的进程可以访问该地址）：

```
int addr = 7200;
*((int*)addr) = newVal; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-26T05:34:54.853

我认为***&a中******的 '&'***在编译时评估 i 的地址，我认为这是一个虚拟地址。所以根据你的编译器，它不是左值。改用指针

# java - 如何在 EXTJS 的 ajax 请求中发送特殊字符

> ID：13558998
> 
> 赞同：0
> 
> 时间：2012-11-26T05:15:04.817
> 
> 标签：java, ajax, extjs

我有简单的`extjs(2.0)`表单，它包含动态生成的文本字段。我将表单参数发送给`servlet`using `ajax request`。如果我`special characters`在文本字段中输入任何内容，则文本字段值将以`URL escape codes`. 例如在 servlet`&`中用 表示。`%26`

如果我使用表单提交，而不是使用 ajax 请求，它正在工作。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:24:35.133

如果要将参数发送到“GET”方法，请使用 url 编码并发送。

尝试查看[encodeURI()](http://phpjs.org/functions/urlencode/)和[decodeURI()](http://www.w3schools.com/jsref/jsref_decodeURI.asp)。

如果您使用的是“POST”方法，那么只有正常发送才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T11:29:52.063

在发送之前将值编码为 JSON，并在服务器上对其进行解码。

# java - 如何反序列化 CSV 文件流？

> ID：13558999
> 
> 赞同：0
> 
> 时间：2012-11-26T05:15:12.570
> 
> 标签：java, csv, deserialization

8 年后我又回到了 Java。

我有一个文件上传 HTML 页面：

```
<form action="/upload" method="post" enctype="multipart/form-data">
  <input type="file" name="file" />
  <input type="submit" value="Upload" />
</form> 
```

我从那里上传 CSV 文件。

`/upload`映射到实现该`doPost`方法的 servlet：

```
 ServletFileUpload upload = new ServletFileUpload();
  FileItemIterator iterator = upload.getItemIterator(req);

  while (iterator.hasNext()) {

    FileItemStream item = iterator.next();
    InputStream stream = item.openStream();

    if (!item.isFormField()) {
      int len;
      byte[] buffer = new byte[8192];
      while ((len = stream.read(buffer, 0, buffer.length)) != -1) {
        // do some deserialization here..?
      }
    }

  } 
```

我真的希望有比手动解析方法更好的方法。我正在阅读有关`Serializable`界面的信息 - 这是我可以使用的东西吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:42:01.517

我希望您已经根据您的代码查看了公共文件上传的[用户指南。](http://commons.apache.org/fileupload/streaming.html)

您可以轻松地将来自 commons fileupload 的输入流传递到 CSV 库（例如[Super CSV](http://supercsv.sourceforge.net)）中，而无需编写自己的流读取代码。您甚至可以将 CSV 读取为 POJO（即 Javabean）。看看[例子](http://supercsv.sourceforge.net/examples_reading.html)。

您的代码与示例的不同之处仅在于您从 InputStream 而不是文件中读取，因此创建阅读器将如下所示：

```
ICsvBeanReader beanReader = new CsvBeanReader(
    new InputStreamReader(stream), CsvPreference.STANDARD_PREFERENCE); 
```

如果您实际上不想读取 CSV 文件（例如，您可能希望将其保存或通过电子邮件发送），那么您可以使用 Commons IO 的[IOUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html#toByteArray%28java.io.InputStream%29)将其读入字节数组。

```
byte[] bytes = IOUtils.toByteArray(stream); 
```

哦，欢迎回到 Java :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:22:14.193

有[CSVReader](http://sourceforge.net/projects/javacsv/)库。

该`Serializable`接口用于将对象的状态存储到字节流中。将其视为将游戏保存到保存文件（如果您升级版本然后尝试重新加载旧保存，则会产生类似的影响）。