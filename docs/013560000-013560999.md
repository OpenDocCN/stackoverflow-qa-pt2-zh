# StackOverflow 问答 13560000-13560999

# java - 对象数组的长度

> ID：13560001
> 
> 赞同：6
> 
> 时间：2012-11-26T06:54:10.777
> 
> 标签：java, arrays

> **可能重复：**
> [Java 数组 - 长度](https://stackoverflow.com/questions/5950155/java-arrays-length)

如何确定不是字符串数组或整数数组的数组的长度？它不会让我使用`.length()`，但只有`.length`？

为什么以及是否有另一种方法来确定这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T07:01:49.190

您可以使用使用反射`getLength`的方法 from `java.lang.reflect.Array`（所以它会很慢）：

```
Object[] anArray = new Object[2];
int length = Array.getLength(anArray); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T07:02:23.537

无论数组是什么类型，我们只有`.length`但没有`.length()`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-26T07:05:09.437

Java 中的数组不可调整大小。一旦一个数组被实例化，它的长度就不能改变。这就是为什么总是可以信任`length`属性 ( ) 包含数组长度的原因。`myArray.length`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-26T06:58:42.720

事实上，数组`length`不是一种方法。但是您仍然使用它来确定数组的长度。

您是说`myArray.length()`适用于`String`or `int`/`Integer`数组吗？

无论如何，在 Java 中使用数组时，请始终考虑使用`ArrayList`是否更适合您的目的。

编辑：从@fatfredyy 的评论中复制有用的 SO 链接以作为答案：[Java Arrays 中的长度是如何实现的？](https://stackoverflow.com/questions/5950155/java-arrays-length?lq=1)

# php - 保护开发中的网站/每个用户的自定义 URL 和存储 IP

> ID：13560007
> 
> 赞同：2
> 
> 时间：2012-11-26T06:55:05.377
> 
> 标签：php, wordpress, .htaccess, hyperlink, access-control

我想保护正在开发的页面。问题是人们正在共享该链接。我想手动为用户提供自定义链接，存储他们使用的 IP，然后防止链接在不同的 IP 上重复使用。我正在使用 wordpress，这是我想要保护的整个网站。另外，有没有办法跟踪谁共享了 URL？

例子：

我会给朋友这个[http://exemple.com/abc](http://exemple.com/abc)，只要用户在第一次使用的 IP 上，该链接就可以工作。如果该用户将该链接共享给其他人或另一个 IP 尝试使用我想以某种方式记录它的 URL 访问该站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:55:00.850

我会给你一些基本的建议，因为这相对复杂，而且我没有时间编写所有代码:)。

首先，您需要添加一个普通的管理页面 - 在此页面上，您最初希望拥有一个`<form>`带有文本字段和提交字段的页面。文本字段将是您输入要共享的页面 URL 的位置。

您还将有一个存储在数据库中的选项（我们稍后将创建它）。它应该是一个数组，稍后您将向其中添加 URL。

提交 URL 后，您将为该 URL 创建一个随机数 - 它必须是唯一的（[`uniqid()`](http://php.net/manual/en/function.uniqid.php)例如，您可以使用）。然后，您将 URL 存储在一个数组中，如下所示：

```
if ( $_SERVER['REQUEST_METHOD'] == 'POST' ) {
    $urls = get_option( 'my_custom_links', array() );

    $id = uniqid();

    $urls[ $id ] = array(
        'url' => $_POST['my_url'],
        'ip' => '',
    );

    // Update the links.
    update_option( 'my_custom_links', $urls );
}

$urls = get_option( 'my_custom_links', array() );

// Display the form here...

// Display the URL's data
foreach ($urls as $id => $data) {
    echo '<p>URL: <strong>' . $data['url'] . '</strong><br />Share URL: <strong>' . add_query_arg( 'n', $id, home_url( '/' ) ) . '</strong>' . ( $data['ip'] ? '<br />Accessed from IP: <strong>' . $data['ip'] . '</strong>' : '' ) . '</p>';
} 
```

然后您只需要添加一个函数来检查是否允许用户查看特定 URL，如下所示（将代码添加到您的`functions.php`）：

```
function my_site_protection() {
    global $pagenow;
    // If we're not on admin or login page and the user is not logged-in
    if ( ! is_admin() && 'wp-login.php' != $pagenow ) {
        $login_redirect = true;
        if ( isset( $_GET['n'] ) && $_GET['n'] ) {
            $n = $_GET['n'];
            $urls = get_option( 'my_custom_links', array() );
            $data = isset( $urls[ $n ] ) ? $urls[ $n ] : false;
            if ( $data ) {
                if ( ! $data['ip'] || $data['ip'] == $_SERVER['REMOTE_ADDR'] ) {
                    // If no IP is set, set it and update the option
                    if ( ! $data['ip'] ) {
                        $urls[ $id ]['ip'] = $_SERVER['REMOTE_ADDR'];
                        update_option( 'my_custom_links', $urls );
                    }
                    if ( add_query_arg( 'n', $id, $data['url'] ) == curPageURL() ) {
                        // Don't redirect if we're on the correct page
                        $login_redirect = false;
                    } else {
                        // Redirect the user to the proper URL
                        wp_redirect( add_query_arg( 'n', $id, $data['url'] ) );
                        exit;
                    }
                }
            }
        }
        // Redirect user to log-in screen
        $login_redirect && auth_redirect();
    }
}
add_action('init', 'my_site_protection', 1);

function curPageURL() {
    $pageURL = 'http';
    if ($_SERVER["HTTPS"] == "on") {
        $pageURL .= "s";
    }
    $pageURL .= "://";
    if ($_SERVER["SERVER_PORT"] != "80") {
        $pageURL .= $_SERVER["SERVER_NAME"] . ":" . $_SERVER["SERVER_PORT"] . $_SERVER["REQUEST_URI"];
    } else {
        $pageURL .= $_SERVER["SERVER_NAME"] . $_SERVER["REQUEST_URI"];
    }
    return $pageURL;
} 
```

你必须自己弄清楚其余的，但我给了你大部分的东西，所以如果你环顾四周，你就可以完成。

PP：我没有测试过代码，但理论上它应该可以工作——告诉我它的某些部分是否不工作。

# android - 在重新启动 Eclipse 之前，不会应用对 Android 库项目的更改

> ID：13560014
> 
> 赞同：1
> 
> 时间：2012-11-26T06:55:29.733
> 
> 标签：android, compilation, android-library, library-project

我有一个使用 Android 库项目的主要 Android 应用程序。当我更改我的库项目时，`Build Project`或者`Build All`在我清理主项目或关闭并重新打开 Eclipse 之前，在主项目中未检测到更改。

我如何解决这个问题？有什么快速的解决办法吗？

**更新**

我在用：

日食 3.7.1

Android SDK API 15 修订版 3

Android SDK 工具第 19 版

Android SDK 平台工具 Rev 11

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T07:24:12.253

**解决方案 1）**我在**Package Explorer**中单击**Android Dependencies**并按**F5**（刷新）并构建主项目并解决问题。

 ****![在此处输入图像描述](../Images/0b290b19478de89a6770698b300ba04a.png)

**解决方案2）** [这个答案](https://stackoverflow.com/a/12875910/779408)也适用于这个问题。它说您可以将项目添加到构建路径。（右键单击项目-> 属性-> java 构建路径-> 项目-> 添加）。

在**Order and Export**部分下，确保库位于**Android Dependencies**之上。****

# javascript - 如何检查图像质量/分辨率/dpi/ppi？

> ID：13560017
> 
> 赞同：7
> 
> 时间：2012-11-26T06:56:01.833
> 
> 标签：javascript, jquery, image, resolution, image-size

我想检查所选输入图像文件的当前质量**（分辨率/dpi/ppi）**。

我的控件是图像上传器 jquery 插件。

如何获得所选文件的质量？

**（我需要选择图像文件的分辨率而不是屏幕分辨率）**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T08:53:51.597

## 笔记：

答案是用 C# 而不是 Javascript，在 JS 中没有办法做到这一点，这不是原始问题的要求。

## 关于你原来的问题

这很大程度上取决于您认为“高质量”图像（顺便说一句很好读）。但无论如何，品质因数并不直接存储在 JPEG 文件中，因此您无法直接从文件中读取。

这些因素中的大多数都涉及复杂的成像算法。但不要失望，您可以使用`PropertyItems`Image 类上的属性读取一些属性，并根据大小和 dpi 或 ppi 进行一些计算以了解图像的质量。这是一个简单的例子：

```
Bitmap bmp = new Bitmap("winter.jpg");
Console.WriteLine("Image resolution: " + bmp.HorizontalResolution + " DPI");
Console.WriteLine("Image resolution: " + bmp.VerticalResolution + " DPI");
Console.WriteLine("Image Width: " + bmp.Width);
Console.WriteLine("Image Height: " + bmp.Height); 
```

这也将有所帮助：[如何获得图像的分辨率？（JPEG、GIF、PNG、JPG）](https://stackoverflow.com/questions/2207187/how-can-i-get-the-resolution-of-an-image-jpeg-gif-png-jpg)

> “但我想在上传之前检查所选文件的图像质量”

如果您想在上传前检查图像质量（正如您在评论中所说），这是该问题的一大优势。获得所需数字的唯一内置方法是创建一个新实例（并解码整个图像）——这将是非常低效的。但是……嘿！这是一个起点：[如何在不加载图像的情况下在 .NET 中可靠地获取图像尺寸？](https://stackoverflow.com/questions/552467/how-do-i-reliably-get-an-image-dimensions-in-net-without-loading-the-image)

## 进一步阅读：

*   [读取图像标题以获取宽度和高度](http://www.codeproject.com/Articles/35978/Reading-Image-Headers-to-Get-Width-and-Height)
*   [http://en.wikipedia.org/wiki/Image_quality](http://en.wikipedia.org/wiki/Image_quality)

# python - 如何覆盖 UserChangeForm

> ID：13560018
> 
> 赞同：1
> 
> 时间：2012-11-26T06:56:06.863
> 
> 标签：python, regex, django, django-forms

Thie是Django中的源代码，当更改名为“xxx///\”的用户的权限时，会出错，但实际上我不想阻止这种格式的用户名，所以我想覆盖UserChangeForm 类。你能告诉我怎么做吗？谢谢！

```
class UserChangeForm(forms.ModelForm):
    username = forms.RegexField(
        label=_("Username"), max_length=30, regex=r"^[\w.@+-]+$",
        help_text = _("Required. 30 characters or fewer. Letters, digits and "
                      "@/./+/-/_ only."),
        error_messages = {
            'invalid': _("This value may contain only letters, numbers and "
                         "@/./+/-/_ characters.")})
    password = ReadOnlyPasswordHashField(label=_("Password"),
        help_text=_("Raw passwords are not stored, so there is no way to see "
                    "this user's password, but you can change the password "
                    "using <a href=\"password/\">this form</a>."))

    def clean_password(self):
        return self.initial["password"]

    class Meta:
        model = User

    def __init__(self, *args, **kwargs):
        super(UserChangeForm, self).__init__(*args, **kwargs)
        f = self.fields.get('user_permissions', None)
        if f is not None:
            f.queryset = f.queryset.select_related('content_type') 
```

我终于找到了方法，在Admin.py中添加这个

```
from django.contrib.auth.admin import UserAdmin
# overwrite the UserChangeForm
class UserChangeForm(forms.ModelForm):
    username = forms.RegexField(
        label=_("Username"), max_length=30, regex=r"^[a-zA-Z0-9@\.+-_\/\\]+$",
        help_text = _("Required. 30 characters or fewer. Letters, digits and "
                      "@/./+/-/_ only."),
        error_messages = {
            'invalid': _("This value may contain only letters, numbers and "
                         ".")})
UserAdmin.form = UserChangeForm 
```

一样的谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:41:34.100

你的正则表达式没有做你想做的事。查找一些关于正则表达式的教程（谷歌“正则表达式教程”）。然后我建议使用一些软件来测试正则表达式（Windows 上的[Regex Coach很棒）。](http://download.cnet.com/The-Regex-Coach/3000-2056_4-10795049.html)

我觉得表情`^[a-zA-Z0-9@\.+-_\/\\]+$`。应该做你正在寻找的东西。您还需要更改您的帮助和错误文本 - 实际上您接受的字符是您说接受的字符。最后，添加一个`max_length`字段以匹配您现有的帮助文本。

```
class CustomChangeForm(forms.ModelForm):
    username = forms.RegexField(
        label=_("Username"), max_length=30, regex=r"^[a-zA-Z0-9@\.+-_\/\\]+$",
        help_text = _("Required. 30 characters or fewer. Letters, digits and "
                      "@.+-_/\ only."),
        error_messages = {
            'invalid': _("This value may contain only letters, numbers and "
                         "@.+-_/\ characters.")}),
        max_length=30)
        .... 
```

编辑

要覆盖 UserChangeForm 重写类语句，以便您的表单继承自 UserChangeForm 而不是 ModelForm -

```
from django.contrib.auth.forms import UserChangeForm

class CustomChangeForm(UserChangeForm):
    username = forms.RexField(
        ... 
```

查看文档以获取有关[Django 表单继承](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#form-inheritance)的更多信息。

# java - SQL注入——如何在java中使用preparedstatement

> ID：13560021
> 
> 赞同：-2
> 
> 时间：2012-11-26T06:56:23.273
> 
> 标签：java, prepared-statement, sql-injection

我有一个动态构建的 SQL，以下是查询：

```
private String constructTownSearchQuery(String country, String stateName,String districtName,String townName) {
        StringBuilder statesSearchQuery = new StringBuilder();
        statesSearchQuery.append(" select cntry.countryid,cntry.country,sta.stateid,sta.state,dst.districtid,dst.district,twn.townid,twn.town ");
        statesSearchQuery.append(" from m_countries as cntry,m_states as sta,m_districts as dst,m_towns as twn ");
        statesSearchQuery.append(" where cntry.countryid = sta.countryid ");
        statesSearchQuery.append(" and sta.stateid = dst.stateid ");
        statesSearchQuery.append(" and twn.districtid=dst.districtid ");

        if (!country.equals("")) {
            statesSearchQuery.append(" and cntry.country='").append(country).append("' ");
        }
        if (!stateName.equals("")) {
            statesSearchQuery.append(" and sta.state='").append(stateName).append("'");
        }
        if (!districtName.equals("") ) {
           statesSearchQuery.append(" and dst.district='").append(districtName).append("'");
        }
        if (!townName.equals("") ) {
           statesSearchQuery.append(" and  twn.town='").append(townName).append("'");
        }
        statesSearchQuery.append(" order by cntry.country ");
        return statesSearchQuery.toString();
    } 
```

当我使用这个查询时，它很容易发生 SQL 注入，我被告知`PreparedStatement`要避免这种情况。

请建议我如何使用`preparedStatement`它。

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T07:18:04.307

当您将 value 参数添加到像 ( `.append(country)`) 这样的查询时，它可以很容易地注入。

例如，如果您将 country 作为`"Australia"`正常情况传递，则不会有任何问题，但如果我将 country 作为 传递`"a' or '1'='1"`，那么它将选择您的所有国家/地区。

就像在`PreparedStatement`SQL 语句中预编译的那样，然后可以使用该对象多次有效地执行该语句，您将不会受到 SQL 注入的影响。

更多关于[PreparedStatement](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

```
String selectStatement = "SELECT * FROM User WHERE userId = ? ";
PreparedStatement prepStmt = con.prepareStatement(selectStatement);
prepStmt.setString(1, userId);
ResultSet rs = prepStmt.executeQuery(); 
```

更多关于[SQL 注入](https://www.owasp.org/index.php/Preventing_SQL_Injection_in_Java)的信息。

# java - 请求参数在 Tomcat 中被丢弃

> ID：13560023
> 
> 赞同：2
> 
> 时间：2012-11-26T06:56:28.870
> 
> 标签：java, web-services, tomcat, servlets, jersey

客户端代码：

```
 FormDataBodyPart f = new FormDataBodyPart(...);
    FormDataBodyPart f2 = new FormDataBodyPart(...);
    MultiPart multiPart = new MultiPart();
    multiPart.bodyPart(f);
    multiPart.bodyPart(f2);

    //Execute Call
    WebResource wr = resource().path(Url.X);
    wr = wr.queryParam("subjectId", "value_something");
    ClientResponse response = wr.type(MediaType.MULTIPART_FORM_DATA).post(ClientResponse.class, multiPart); 
```

服务器代码：

```
String id = req.getParameter("subjectId"); 
```

req 是 HttpServletRequest - 由 spring 注入

```
@Context
protected HttpServletRequest httpServletRequest; 
```

问题：在某些环境中，`id`检索到的参数为空。在过滤器中，我们打印 while 请求参数映射以登录，它只是空的。
我们认为问题出在服务器端，因为执行相同的客户端与不同的环境会产生不同的结果。
在某些服务器上，来自所有客户端的参数始终为空，而在其他环境中，来自所有客户端的参数始终存在。
所以......它看起来像Tomcat方面的问题，但是......在哪里？

更新：来自服务器上的wireshark的结果：

```
[Malformed Packet: MIME multipart]
Expert Info (Error/Malformed): Malformed Packet (Exception occurred)
Message: Malformed Packet (Exception occurred) 
```

尽管出现错误，但在某些服务器上 - 参数存在，而在其他服务器上，参数丢失。

**更新**：AccessLogValve 记录的请求包含参数
127.0.0.1 - - [26/Nov/2012:03:04:58 -0800] "POST /api/get-retrieve? **x=y** HTTP/1.1" 200 16
所以，可能问题出在Tomcat的某个地方抛出了那些参数......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-15T13:33:51.540

我们遇到了这个问题，结果证明我们允许多个线程访问该`HttpServletRequest`对象。这是不允许的。它不是线程安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:06:58.117

检查请求对象是否有效？您也可以尝试其他方法，例如使用 request.getParameterMap() 读取参数或读取 Input stream 。

# asp.net - 带有ajax自动完成功能的asp文本框在.net 3.5中不起作用

> ID：13560024
> 
> 赞同：1
> 
> 时间：2012-11-26T06:56:29.823
> 
> 标签：asp.net

我在 asp.net 和 c#.net 中使用带有文本框的 ajax 自动完成扩展器。我无法获得可供选择的列表，我有适当的 Web 服务方法调用..任何人都可以指导我完成自动操作。声明

这是我使用的标签我 aspx

```
the ajax part

    <asp:AutoCompleteExtender ID="AutoCompleteExtender1" runat="server"  TargetControlID="txtUsername"  MinimumPrefixLength="1" EnableCaching="true" CompletionSetCount="1" CompletionInterval="1000" ServiceMethod="GetCountries" >
 </asp:AutoCompleteExtender>
</div> 
```

背后的代码

```
[System.Web.Services.WebMethod]
public static List<string> GetCountries(string strUserName, int count)
{

    SqlConnection scon = new SqlConnection(ConfigurationManager.ConnectionStrings["ConStr"].ToString());
    scon.Open();
    SqlCommand scmd = new SqlCommand("select * from UserInformation where UserName like @Username+'%'", scon);
    scmd.Parameters.AddWithValue("@Username", strUserName);
    SqlDataAdapter sda = new SqlDataAdapter(scmd);
    DataTable dt = new DataTable();
    sda.Fill(dt);
    List<string> UserNames = new List<string>();
    for (int i = 0; i < dt.Rows.Count; i++)
    {

        UserNames.Add(dt.Rows[i][1].ToString());
    }

    return UserNames;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:34:10.803

标签中的 ASPX 代码。GetCur : asmx 文件中给出的名称。

```
$("#<%=txtSearch.ClientID %>").autocomplete({
        source: function(request, response) {
            $.ajax({
                 url: '<%=ResolveUrl("~/WebService.asmx/GetCur") %>',
                data: "{ 'prefixText': '" + request.term + "'}",
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                success: function(data) {
                    response($.map(data.d, function(item) {
                        return {
                            label: item,
                            val: item
                        }
                    }))
                },
                error: function(response) {
                    alert(response.responseText);
                },
                failure: function(response) {
                    alert(response.responseText);
                }
            });
        },
    });
}); 
```

# c - 我可以检测宏内部是否存在局部变量吗？

> ID：13560028
> 
> 赞同：3
> 
> 时间：2012-11-26T06:56:37.283
> 
> 标签：c, macros, c-preprocessor

有没有办法安全地检查当前范围内是否存在某个命名变量（我们称之为“foo”）？我想要一个宏，比如说，如果它存在就使用“foo”，否则会做其他事情。我可以在这里使用任何运行时技巧吗？

（实际情况是试图解决[这个问题](https://stackoverflow.com/questions/13557663/how-can-i-determine-that-im-executing-inside-an-obj-c-method)，但我意识到一个可能是这个问题的一个特例，所以一个单独的问题似乎也很有趣。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:04:09.130

很不幸的是，不行。编译器负责解析变量名并为其分配作用域，预处理器在编译器之前运行。因此它无法访问该信息。

# python - 为 Python 查找最长重复字符串的有效方法（来自 Programming Pearls）

> ID：13560037
> 
> 赞同：11
> 
> 时间：2012-11-26T06:57:08.983
> 
> 标签：python, c, suffix-tree, suffix-array, programming-pearls

来自编程珍珠的第 15.2 节

C代码可以在这里查看：[http ://www.cs.bell-labs.com/cm/cs/pearls/longdup.c](http://www.cs.bell-labs.com/cm/cs/pearls/longdup.c)

当我使用后缀数组在 Python 中实现它时：

```
example = open("iliad10.txt").read()
def comlen(p, q):
    i = 0
    for x in zip(p, q):
        if x[0] == x[1]:
            i += 1
        else:
            break
    return i

suffix_list = []
example_len = len(example)
idx = list(range(example_len))
idx.sort(cmp = lambda a, b: cmp(example[a:], example[b:]))  #VERY VERY SLOW

max_len = -1
for i in range(example_len - 1):
    this_len = comlen(example[idx[i]:], example[idx[i+1]:])
    print this_len
    if this_len > max_len:
        max_len = this_len
        maxi = i 
```

我发现这`idx.sort`一步很慢。我认为这很慢，因为 Python 需要按值而不是按指针传递子字符串（如上面的 C 代码）。

测试文件可以从[这里下载](http://classics.mit.edu/Homer/iliad.mb.txt)

C 代码只需 0.3 秒即可完成。

```
time cat iliad10.txt |./longdup 
On this the rest of the Achaeans with one voice were for
respecting the priest and taking the ransom that he offered; but
not so Agamemnon, who spoke fiercely to him and sent him roughly
away. 

real    0m0.328s
user    0m0.291s
sys 0m0.006s 
```

但是对于 Python 代码，它永远不会在我的计算机上结束（我等了 10 分钟并杀死了它）

有谁知道如何使代码高效？（例如，少于 10 秒）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-03T23:45:41.637

我的解决方案基于*Suffix arrays*。它是由*Prefix 将 Longest common prefix 加倍*构造*的*。最坏情况的复杂度为 O(n (log n)^2)。文件“iliad.mb.txt”在我的笔记本电脑上需要 4 秒。该`longest_common_substring`函数很短并且可以很容易地修改，例如用于搜索 10 个最长的非重叠子字符串。 如果重复字符串超过 10000 个字符，则此 Python 代码比问题中的[原始 C 代码更快。](https://gist.github.com/hynekcer/7e8641998bb57b48c6146fd3640f4fd7)

```
from itertools import groupby
from operator import itemgetter

def longest_common_substring(text):
    """Get the longest common substrings and their positions.
    >>> longest_common_substring('banana')
    {'ana': [1, 3]}
    >>> text = "not so Agamemnon, who spoke fiercely to "
    >>> sorted(longest_common_substring(text).items())
    [(' s', [3, 21]), ('no', [0, 13]), ('o ', [5, 20, 38])]

    This function can be easy modified for any criteria, e.g. for searching ten
    longest non overlapping repeated substrings.
    """
    sa, rsa, lcp = suffix_array(text)
    maxlen = max(lcp)
    result = {}
    for i in range(1, len(text)):
        if lcp[i] == maxlen:
            j1, j2, h = sa[i - 1], sa[i], lcp[i]
            assert text[j1:j1 + h] == text[j2:j2 + h]
            substring = text[j1:j1 + h]
            if not substring in result:
                result[substring] = [j1]
            result[substring].append(j2)
    return dict((k, sorted(v)) for k, v in result.items())

def suffix_array(text, _step=16):
    """Analyze all common strings in the text.

    Short substrings of the length _step a are first pre-sorted. The are the 
    results repeatedly merged so that the garanteed number of compared
    characters bytes is doubled in every iteration until all substrings are
    sorted exactly.

    Arguments:
        text:  The text to be analyzed.
        _step: Is only for optimization and testing. It is the optimal length
               of substrings used for initial pre-sorting. The bigger value is
               faster if there is enough memory. Memory requirements are
               approximately (estimate for 32 bit Python 3.3):
                   len(text) * (29 + (_size + 20 if _size > 2 else 0)) + 1MB

    Return value:      (tuple)
      (sa, rsa, lcp)
        sa:  Suffix array                  for i in range(1, size):
               assert text[sa[i-1]:] < text[sa[i]:]
        rsa: Reverse suffix array          for i in range(size):
               assert rsa[sa[i]] == i
        lcp: Longest common prefix         for i in range(1, size):
               assert text[sa[i-1]:sa[i-1]+lcp[i]] == text[sa[i]:sa[i]+lcp[i]]
               if sa[i-1] + lcp[i] < len(text):
                   assert text[sa[i-1] + lcp[i]] < text[sa[i] + lcp[i]]
    >>> suffix_array(text='banana')
    ([5, 3, 1, 0, 4, 2], [3, 2, 5, 1, 4, 0], [0, 1, 3, 0, 0, 2])

    Explanation: 'a' < 'ana' < 'anana' < 'banana' < 'na' < 'nana'
    The Longest Common String is 'ana': lcp[2] == 3 == len('ana')
    It is between  tx[sa[1]:] == 'ana' < 'anana' == tx[sa[2]:]
    """
    tx = text
    size = len(tx)
    step = min(max(_step, 1), len(tx))
    sa = list(range(len(tx)))
    sa.sort(key=lambda i: tx[i:i + step])
    grpstart = size * [False] + [True]  # a boolean map for iteration speedup.
    # It helps to skip yet resolved values. The last value True is a sentinel.
    rsa = size * [None]
    stgrp, igrp = '', 0
    for i, pos in enumerate(sa):
        st = tx[pos:pos + step]
        if st != stgrp:
            grpstart[igrp] = (igrp < i - 1)
            stgrp = st
            igrp = i
        rsa[pos] = igrp
        sa[i] = pos
    grpstart[igrp] = (igrp < size - 1 or size == 0)
    while grpstart.index(True) < size:
        # assert step <= size
        nextgr = grpstart.index(True)
        while nextgr < size:
            igrp = nextgr
            nextgr = grpstart.index(True, igrp + 1)
            glist = []
            for ig in range(igrp, nextgr):
                pos = sa[ig]
                if rsa[pos] != igrp:
                    break
                newgr = rsa[pos + step] if pos + step < size else -1
                glist.append((newgr, pos))
            glist.sort()
            for ig, g in groupby(glist, key=itemgetter(0)):
                g = [x[1] for x in g]
                sa[igrp:igrp + len(g)] = g
                grpstart[igrp] = (len(g) > 1)
                for pos in g:
                    rsa[pos] = igrp
                igrp += len(g)
        step *= 2
    del grpstart
    # create LCP array
    lcp = size * [None]
    h = 0
    for i in range(size):
        if rsa[i] > 0:
            j = sa[rsa[i] - 1]
            while i != size - h and j != size - h and tx[i + h] == tx[j + h]:
                h += 1
            lcp[rsa[i]] = h
            if h > 0:
                h -= 1
    if size > 0:
        lcp[0] = 0
    return sa, rsa, lcp 
```

我更喜欢这个解决方案而不是[更复杂的 O(n log n)](http://webglimpse.net/pubs/suffix.pdf)，因为 Python 有一个非常快速的列表排序算法[(Timsort)](https://en.wikipedia.org/wiki/Timsort)。Python 的排序可能比那篇文章中的方法中必要的线性时间操作要快，在随机字符串和小字母表（典型用于 DNA 基因组分析）的非常特殊的假设下，这应该是 O(n)。[我在Gog 2011](http://www.siam.org/proceedings/alenex/2011/alx11_03_gogs.pdf)中读到，我的算法的最坏情况 O(n log n) 实际上比许多不能使用 CPU 内存缓存的 O(n) 算法更快。

如果文本包含 8 kB 长的重复字符串，则基于[grow_chains](https://stackoverflow.com/a/13562507/448474)的另一个答案中的代码比问题中的原始示例慢 19 倍。长时间重复的文本在古典文学中并不典型，但它们经常出现在例如“独立”学校作业集中。该程序不应该冻结它。

我为 Python 2.7、3.3 - 3.6编写[了一个示例并使用相同的代码进行了测试。](https://gist.github.com/hynekcer/fa340f3b63826168ffc0c4b33310ae9c)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T07:30:28.267

主要问题似乎是python通过复制进行切片：[https ://stackoverflow.com/a/5722068/538551](https://stackoverflow.com/a/5722068/538551)

您必须使用[memoryview](http://docs.python.org/3/library/stdtypes.html#memoryview)来获取引用而不是副本。当我这样做时，程序在函数之后挂起（**非常**`idx.sort`快）。

我敢肯定，只要做一点工作，你就可以得到其余的工作。

**编辑：**

~~上述更改不能作为直接替换，因为`cmp`与`strcmp`. 例如，尝试以下 C 代码：~~

 ~~```
#include <stdio.h>
#include <string.h>

int main() {
    char* test1 = "ovided by The Internet Classics Archive";
    char* test2 = "rovided by The Internet Classics Archive.";
    printf("%d\n", strcmp(test1, test2));
} 
```~~ 

并将结果与​​此 python 进行比较：

```
test1 = "ovided by The Internet Classics Archive";
test2 = "rovided by The Internet Classics Archive."
print(cmp(test1, test2)) 
```

C 代码打印`-3`在我的机器上，而 python 版本打印`-1`. 看起来示例`C`代码正在滥用（毕竟`strcmp`它被用于）的返回值。`qsort`我找不到任何关于何时`strcmp`返回除 之外的其他内容的文档`[-1, 0, 1]`，但在原始代码中添加`printf`to`pstrcmp`显示了该范围之外的许多值（3、-31、5 是前 3 个值）。

~~为了确保这`-3`不是一些错误代码，如果我们反转 test1 和 test2，我们会得到`3`.~~

**编辑：**

以上是有趣的琐事，但在影响任一代码块方面实际上并不正确。当我关闭笔记本电脑并离开 wifi 区域时，我意识到了这一点......真的应该在我点击之前仔细检查所有内容`Save`。

FWIW，`cmp`最肯定适用于对象（按预期`memoryview`打印）：`-1`

```
print(cmp(memoryview(test1), memoryview(test2))) 
```

我不确定为什么代码没有按预期工作。在我的机器上打印出列表看起来不像预期的那样。我将对此进行调查并尝试找到更好的解决方案，而不是抓住稻草。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-26T23:18:44.520

The translation of the algorithm into Python:

```
from itertools import imap, izip, starmap, tee
from os.path   import commonprefix

def pairwise(iterable): # itertools recipe
    a, b = tee(iterable)
    next(b, None)
    return izip(a, b)

def longest_duplicate_small(data):
    suffixes = sorted(data[i:] for i in xrange(len(data))) # O(n*n) in memory
    return max(imap(commonprefix, pairwise(suffixes)), key=len) 
```

[`buffer()`](https://stackoverflow.com/q/2282579/4279) allows to get a substring without copying:

```
def longest_duplicate_buffer(data):
    n = len(data)
    sa = sorted(xrange(n), key=lambda i: buffer(data, i)) # suffix array
    def lcp_item(i, j):  # find longest common prefix array item
        start = i
        while i < n and data[i] == data[i + j - start]:
            i += 1
        return i - start, start
    size, start = max(starmap(lcp_item, pairwise(sa)), key=lambda x: x[0])
    return data[start:start + size] 
```

It takes 5 seconds on my machine for the [`iliad.mb.txt`](http://classics.mit.edu/Homer/iliad.mb.txt).

In principle it is possible to find the duplicate in O(n) time and O(n) memory using a [suffix array](http://en.wikipedia.org/wiki/Suffix_array) augmented with a [lcp array](http://en.wikipedia.org/wiki/LCP_array).

* * *

^(Note: `*_memoryview()` is deprecated by `*_buffer()` version)

More memory efficient version (compared to longest_duplicate_small()):

```
def cmp_memoryview(a, b):
    for x, y in izip(a, b):
        if x < y:
            return -1
        elif x > y:
            return 1
    return cmp(len(a), len(b))

def common_prefix_memoryview((a, b)):
    for i, (x, y) in enumerate(izip(a, b)):
        if x != y:
            return a[:i]
    return a if len(a) < len(b) else b

def longest_duplicate(data):
    mv = memoryview(data)
    suffixes = sorted((mv[i:] for i in xrange(len(mv))), cmp=cmp_memoryview)
    result = max(imap(common_prefix_memoryview, pairwise(suffixes)), key=len)
    return result.tobytes() 
```

It takes 17 seconds on my machine for the `iliad.mb.txt`. The result is:

```
On this the rest of the Achaeans with one voice were for respecting
the priest and taking the ransom that he offered; but not so Agamemnon,
who spoke fiercely to him and sent him roughly away. 

```

I had to define custom functions to compare `memoryview` objects because `memoryview` comparison either raises an exception in Python 3 or produces wrong result in Python 2:

```
>>> s = b"abc"
>>> memoryview(s[0:]) > memoryview(s[1:])
True
>>> memoryview(s[0:]) < memoryview(s[1:])
True 
```

Related questions:

[Find the longest repeating string and the number of times it repeats in a given string](https://stackoverflow.com/questions/2172033/find-the-longest-repeating-string-and-the-number-of-times-it-repeats-in-a-given)

[finding long repeated substrings in a massive string](https://stackoverflow.com/questions/398811/finding-long-repeated-substrings-in-a-massive-string)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T10:05:04.950

This version takes about 17 secs on my circa-2007 desktop using totally different algorithm:

```
#!/usr/bin/env python

ex = open("iliad.mb.txt").read()

chains = dict()

# populate initial chains dictionary
for (a,b) in enumerate(zip(ex,ex[1:])) :
    s = ''.join(b)
    if s not in chains :
        chains[s] = list()

    chains[s].append(a)

def grow_chains(chains) :
    new_chains = dict()
    for (string,pos) in chains :
        offset = len(string)
        for p in pos :
            if p + offset >= len(ex) : break

            # add one more character
            s = string + ex[p + offset]

            if s not in new_chains :
                new_chains[s] = list()

            new_chains[s].append(p)
    return new_chains

# grow and filter, grow and filter
while len(chains) > 1 :
    print 'length of chains', len(chains)

    # remove chains that appear only once
    chains = [(i,chains[i]) for i in chains if len(chains[i]) > 1]

    print 'non-unique chains', len(chains)
    print [i[0] for i in chains[:3]]

    chains = grow_chains(chains) 
```

The basic idea is to create a list of substrings and positions where they occure, thus eliminating the need to compare same strings again and again. The resulting list look like `[('ind him, but', [466548, 739011]), (' bulwark bot', [428251, 428924]), (' his armour,', [121559, 124919, 193285, 393566, 413634, 718953, 760088])]`. Unique strings are removed. Then every list member grows by 1 character and new list is created. Unique strings are removed again. And so on and so forth...

# ios - AVAudioplayer 无法在 iOS 5 中播放 iPod 库中的歌曲

> ID：13560039
> 
> 赞同：3
> 
> 时间：2012-11-26T06:57:27.703
> 
> 标签：ios, objective-c, ios5, avaudioplayer, playback

我正在使用 AVAudioPlayer 创建一个 iPhone 应用程序。它在 iOs 6 设备中运行良好。但它不能在 iOs 5 及更低版本中播放 iPod 库中的歌曲。当我尝试从 NSBundle 播放音乐文件时，它正在工作，所以只有当我尝试从 iPod 库播放歌曲时才会出现问题。这是我的代码，请检查

```
if (isPlaying) {
    [audioPlayer stop];
    isPlaying = NO;
}

extern NSMutableArray *songsUrlArray;
extern int selectedSongIndex;

audioPlayer.volume = 1.0;

NSString *urlString = [NSString stringWithFormat:@"%@",[songsUrlArray objectAtIndex:selectedSongIndex]];
NSURL *url = [NSURL URLWithString:urlString];
    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
audioPlayer.delegate = self;
    audioPlayer.numberOfLoops = 0;

    if (audioPlayer == nil)
        NSLog(@"%@",[error description]);
    else{
        [audioPlayer play];
    isPlaying = YES;
} 
```

**编辑：**

这是我收到的错误消息，

```
Error Domain=NSOSStatusErrorDomain Code=-43 "The operation couldn’t be completed. (OSStatus error -43.)" 
```

当我用谷歌搜索时，我发现`OSStatus error -43`指定路径中没有可用内容时会出现这种情况。这是 3GS 设备中 iPod 库中歌曲的路径，`ipod-library://item/item.mp3?id=564371652689620079`. 但它不玩。请一些请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-03T00:10:23.447

AVAudioPlayer 仅在 iOS6 中获得了对 iPod URL 的支持。如果要支持目标 iOS6 之前的设备，则必须使用 AVPlayer 或 AVQueuePlayer。

[https://developer.apple.com/library/prerelease/ios/releasenotes/General/WhatsNewIniOS/Articles/iOS6.html#//apple_ref/doc/uid/TP40011812-SW1](https://developer.apple.com/library/prerelease/ios/releasenotes/General/WhatsNewIniOS/Articles/iOS6.html#//apple_ref/doc/uid/TP40011812-SW1)

# oracle - 在 PL/SQL 中使用布尔值

> ID：13560040
> 
> 赞同：10
> 
> 时间：2012-11-26T06:57:33.073
> 
> 标签：oracle, plsql

我在 PL/SQL 中有一个函数，它检查一个特定的是否`emp_id`存在，它是：

```
CREATE OR REPLACE FUNCTION checkEmpNo(eno numeric)
RETURN boolean IS
    emp_number number;
BEGIN
    SELECT emp_id INTO emp_number
    FROM emp;
    IF eno=emp_number
    THEN
        return true;
    ELSE
        return false;
    END IF;
END checkEmpNo; 
```

该函数编译成功，但是当我尝试将其运行为：

```
DECLARE
    exist boolean;
BEGIN
    exist=checkEmpNo(1);
    dbms_output.put_line(exist);
END; 
```

它返回错误：

```
ORA-06550: line 5, column 1:
PLS-00306: wrong number or types of arguments in call to 'PUT_LINE'
ORA-06550: line 5, column 1:
PL/SQL: Statement ignored

3\. BEGIN
4\. exist:=checkEmpNo(1);
5\. dbms_output.put_line(exist);
6\. END; 
```

编辑：

我也试过这个：

```
DECLARE
    exist boolean:=true;
BEGIN
    if(exist=checkEmpNo(1))
    then
        dbms_output.put_line('true');
    else
        dbms_output.put_line('false');
    end if;
END; 
```

它返回错误：`ORA-01422: exact fetch returns more than requested number of rows`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-26T07:00:23.093

`dbms_output.put_line`没有重载以接受布尔参数。你可以做类似的事情

```
dbms_output.put_line( case when exist = true 
                           then 'true'
                           else 'false'
                        end ); 
```

将布尔值转换为字符串，然后您可以将其传递给`dbms_output`.

ORA-01422 错误是一个完全独立的问题。该函数`checkEmpNo`包括`SELECT INTO`语句

```
SELECT emp_id 
  INTO emp_number
  FROM emp; 
```

`SELECT INTO`如果查询返回除 1 行以外的任何内容，A将生成错误。在这种情况下，如果表中有多行，`emp`则会出现错误。我的猜测是你会希望你的函数做类似的事情

```
CREATE OR REPLACE FUNCTION checkEmpNo(p_eno number)
  RETURN boolean 
IS
  l_count number;
BEGIN
  SELECT count(*)
    INTO l_count
    FROM emp
   WHERE emp_id = p_eno;

  IF( l_count = 0 )
  THEN
    RETURN false;
  ELSE
    RETURN true;
  END IF;
END checkEmpNo; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-26T07:20:06.047

Alternatively you can use the Oracle function `diutil.bool_to_int` to convert a boolean value to an integer: True -> 1, False -> 0.

```
dbms_output.put_line(diutil.bool_to_int(p_your_boolean)); 
```

# android - 在android中找不到层列表作为根元素

> ID：13560047
> 
> 赞同：0
> 
> 时间：2012-11-26T06:58:09.783
> 
> 标签：android

我想使用android中的图层列表来设置背景。但是我在drawable中找不到它。我应该怎么做才能得到它？

[http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)

在上面的链接中，它告诉 Resource 指向 LayerDrawable 但在我的 Eclipse 中找不到它。如何得到这个？

# c# - 本地化资源中的文本样式

> ID：13560048
> 
> 赞同：1
> 
> 时间：2012-11-26T06:58:13.980
> 
> 标签：c#, windows-phone-7, localization, text-styling

我有一个关于 windows-phone 本地化资源的问题。

假设我的资源文件中有一个字符串，它应该如下所示：

> 这是一些文字。**这个值**是粗体的。*这个*是斜体的。

所有这些都存储在一个字符串字段中。我如何在资源本身中定义粗体或斜体等文本样式？我知道，我可以预定义一些自定义字体，如下所示：

```
<FontFamily x:Key="CustomBold">...</FontFamily> 
```

然后添加就像`{StaticResource CustomBold}`在页面中一样，但如果字符串字段中的整个文本都是粗体，这可能是一个解决方案。如果我想在短语中间加粗一个单词怎么办？

* * *

我想使用原生 c# 风格的资源（即字符串名称 -> 字符串值），而不是编写不同的实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:12:23.720

当我在 iOS 上需要这样的东西时，我已经实现了非常基本[的类似 BBCode 的](http://en.wikipedia.org/wiki/BB-code)标记语言，只有几个标签：“[b]”、“[/b]”、“[[”和“]]”（在我的项目我什至不需要斜体，只需要粗体）。

但是，.NET 没有我用来解析语法的 NSScanner 类的模拟。相反，它对解析 XML 数据有更好的支持。因此，在 WP7 上实现一个非常基本的 XML 子集会更容易，只支持 <b> 和 <i> 标签。有关示例代码，请参见[本页末尾。](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader%28v=vs.95%29.aspx)

[以下是如何将格式化的文本片段添加到 WP7 TextBlock 中。](https://stackoverflow.com/a/5066485/126995)

更新：好的，这是适合您的完整解决方案：

```
[Flags]
enum eParseState: byte
{
    bold = 1,
    italic = 2,
}

// Sample input: "<txt>This is <i>some</i> text. <b>This value is <i>bold</i>.</b> This one is not.</txt>"
static void parseRichText( TextBlock tb, string xml )
{
    tb.Inlines.Clear();
    XmlReader reader = XmlReader.Create( new StringReader( xml ), new XmlReaderSettings() { ConformanceLevel=ConformanceLevel.Fragment } );
    eParseState state = 0;

    var names = new Dictionary<string, eParseState>()
    {
        { "b", eParseState.bold },
        { "i", eParseState.italic },
    };

    Action<bool> actElement = ( bool isOpening ) =>
    {
        string name = reader.Name.ToLower();
        eParseState flag;
        if( !names.TryGetValue( name, out flag ) ) return;
        if( isOpening )
            state |= flag;
        else
            state &= ( ~flag );
    };

    while( reader.Read() )
    {
        switch( reader.NodeType )
        {
            case XmlNodeType.Element:
                actElement( true );
                break;
            case XmlNodeType.EndElement:
                actElement( false );
                break;
            case XmlNodeType.Text:
                var run = new Run() { Text = reader.Value };
                if( 0 != ( state & eParseState.bold ) ) run.FontWeight = FontWeights.Bold;
                if( 0 != ( state & eParseState.italic ) ) run.FontStyle = FontStyles.Italic;
                tb.Inlines.Add( run );
                break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:55:58.077

好...

我找到了一个解决方案，但它看起来很笨拙。

应该使用的控件是*RichTextBox*。

在 Windows Phone 中 RichTextBox 的工作方式与在本机 .Net 中有所不同

要为部分文本设置不同的样式，我们必须划分我们的单个字符串：

所以，让我们想象一下，我们在 Resources 中有一个字符串字段：

> 这是一些文字。**这个值是粗体的**。这个不是。

将它分成三个字符串（是的，这真的很笨拙）：

1.  这是一些文字。
2.  这个值是粗体的
3.  这个不是。

然后，在代码中我们使用 RichTextBox **rtb**。

```
 Paragraph paragraph = new Paragraph();
            Bold bold = new Bold();
            bold.Inlines.Add(new Run() { Text = _string2FromResources });

            Run run = new Run();
            run.Text = _string1FromResources;
            Run run2 = new Run();
            run2.Text = _string3FromResources;

            paragraph.Inlines.Add(run); 
            paragraph.Inlines.Add(bold);
            paragraph.Inlines.Add(run2);

            rtb.Blocks.Add(paragraph); 
```

那真的会奏效。但是实施的质量......嗯，你明白了。因此，如果有人可以添加更好的解决方案示例，我将不胜感激。

# javascript - Jquery 未定义，但函数执行良好

> ID：13560052
> 
> 赞同：-2
> 
> 时间：2012-11-26T06:58:39.880
> 
> 标签：javascript, jquery, magento

在 magento 的结帐页面上，我收到此错误：

`VarienForm is not defined [Break On This Error]`

`var loginForm = new VarienForm('login-form', true);`

但是当我输入我的用户名和密码时，它会登录。我可以删除错误吗？

PS：我已将 varien js 库移至页脚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:40:52.457

看起来您正在尝试调用尚未定义的函数，在 JavaScript 中，您需要在使用之前声明变量、函数和对象。

如果您将所有定义移到页脚并尝试在页面中间调用它们，您将收到“未定义”错误。

```
// Example Success
var test = "OK!";
alert(test) // Alerts: OK!

// Example Fail
alert(test); // Alerts: undefined
var test = "OK!"; 
```

简单的示例，但它适用于上面提到的所有内容，您使用的所有内容都必须在使用之前定义。

```
$(function() {

    // Define VarienForm here somewhere
    var loginForm = new VarienForm('login-form', true);

}); 
```

此代码应该在您的页面上运行而没有未定义的错误，并且可以放置在页脚或页眉中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:11:09.560

该错误意味着您的脚本不起作用 - 就是这样。事实上，您正在登录与 VarienForm 对象无关 - 这是一个带有提交按钮的 HTML 表单，因此它当然会提交并让您登录。 VarienForm 的主要任务是在提交之前验证表单数据。因此，通常如果您尝试使用空密码或登录名登录，VariendForm 会阻止提交表单。在您的情况下，当脚本被破坏时，它在提交之前不会做任何事情。

所以，对不起，但最好的建议是 - 不要移动这个库。是的，您可以修复会遇到此错误的每个页面，但这需要很长时间。如果您要安装第 3 方扩展，您很可能也必须修改它们。我不认为，这样的优化是值得的。

PS。除非您在玩 Magento 2，否则 VarienForm 基于 Prototype，而不是 jQuery，因此您的标签不正确，SnapGravy 的代码很可能无法工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T18:57:24.527

可能是javascript框架冲突。

jQuery 与 Prototype 冲突，Prototype 是购物车功能、验证和窗帘效果中偏好使用的东西。

在 Prototype 之前的头部加载 jQuery，然后调用 jQuery noconflict 函数。

在这里回答[了 Magento 中的 jQuery](https://stackoverflow.com/questions/8933199/jquery-in-magento)

将不同的东西移回它所属的地方。框架需要在页面加载之前加载，这样它们才能正常运行。

# php - 使用 Ajax 发送电子邮件

> ID：13560057
> 
> 赞同：0
> 
> 时间：2012-11-26T06:58:51.680
> 
> 标签：php, ajax, email

我正在使用以下方式发送电子邮件`ajax`。不是发送`name`。

```
var submitForm = function(){
                var name = jQuery('[name=name]').val();
                var email = jQuery('[name=email]').val();
                var gender = jQuery('[name=gender]').val();
$.ajax({
                    url: 'http://domainname.com/Email.php',
                    data: {name: name, email: email, phone: phone, gender: gender},
                    type: 'POST',
                    success: function ( data ) {
                        $(".rhino-container").html("Dear <b>"+name+"</b> You have applied successfully, Our career counseller will get in touch with you."); 
                    }
                });

            }; 
```

下面是`email.php`：

```
<?php
    $name = $_POST['name'];
    $email = $_POST['email'];
    $gender = $_POST['gender'];
    $to = 'yourdomain@gmail.com';
    $from = $email;
    $subject = 'Apply Online Details from a user as below---';
    $body = "Hello Admin<br><br>
            Name: <strong>$name</strong><br>
            Email: $email<br>
            Phone: $phone<br>
            Gender: $gender<br>
                ";
    $headers  = 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
    $headers .= "From: $from";
    $ok = mail($to, $subject, $body, $headers);
    if($ok)
        echo '1';
    else
        echo '0';
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:12:25.270

```
var submitForm = function () {
    var name = $('input[name="name"]').val();
    var email = $('input[name="email"]').val();
    var phone = $('input[name="phone"]').val();
    var gender = $('input[name="gender"]').val();

    var param = {
        "name": name,
            "email": email,
            "phone": phone,
            "gender": gender
    };

    $.ajax({
        url: 'http://domainname.com/Email.php',
        data: param,
        type: 'POST',
        dataType: json,
        success: function (data) {
            if (data.status) {
                $(".rhino-container").html("Dear <b>" + name + "</b> You have applied successfully, Our career counseller will get in touch with you.");
            } else {
                $(".rhino-container").html("Something went wrong");
            }
        }
    });

}; 
```

请将此 PHP 用于服务器端。

header('内容类型：应用程序/json'); 回声 $ 好吗？json_encode(array("status" => true)) : json_encode("status" => false));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:16:02.847

每行应该用 LF (\n) 分隔。行不应超过 70 个字符。不要使用休息时间。

除此之外，您是否尝试过在您的服务器上发送电子邮件？没有ajax的直接php？也许您的邮件设置不正确，至少尝试一下。

在 jQuery 中也使用选择器，我还没有看到你的 html，但是做类似的事情

```
var name = $('#name').val(); 
```

祝你好运。

# iphone - 合适的视图页脚

> ID：13560059
> 
> 赞同：2
> 
> 时间：2012-11-26T06:59:02.030
> 
> 标签：iphone, uitableview

`UITableView`如果用户单击表格视图未滚动的最后一个单元格的文本字段，我已在普通样式中添加页脚

```
 -(UIView *)tableView:(UITableView *)tableView viewForFooterInSection:   (NSInteger)section{

            UIView *view =[[UIView alloc] initWithFrame:CGRectMake(0, 0, 500, 500)];
            [view setBackgroundColor:[UIColor blackColor]];
            return view;
} 
```

如果它是一个有效的分段表，请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:08:35.963

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    if(textField == yourTextField){ /// here write name of your Textfield in which you want to scroll tableview
        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:0.3];
        yourTableView.frame = CGRectMake(yourTableView.frame.origin.x, -160, yourTableView.frame.size.width, tblContactUS.frame.size.height);
        [UIView commitAnimations];
     }
     return YES;
} 
```

并将您的 TableView 与前一帧放在一起，然后使用下面的方法

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField 
{
    [textField resignFirstResponder];
    if(textField == yourTextField){ /// here write name of your Textfield in which you want to scroll down tableview
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:0.3];
            yourTableView.frame = CGRectMake(yourTableView.frame.origin.x, 0, yourTableView.frame.size.width, tblContactUS.frame.size.height);
            [UIView commitAnimations];
     }
    return YES;
} 
```

我希望这可以帮助你...

# javascript - js toString 是如何工作的？

> ID：13560061
> 
> 赞同：1
> 
> 时间：2012-11-26T06:59:33.730
> 
> 标签：javascript

`56.toString`不工作会抛出异常。`56..toString`工作正常 。

谁能解释这两种说法有什么区别？

```
56.toString(); //throws exception
56..toString(); //Works Fine. 
```

这个怎么运作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T07:00:22.293

数字文字有些特殊，因为属性访问`.`可以与小数点混为一谈`.`

当解析器遇到`56.`它时，它期望一个数字（或什么都没有）跟随它。当你写作时，`56..toString()`你得到的`toString()`是`56.0`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T07:22:40.030

这对 toString() 方法没有问题，只是 56。toString 会认为它是 56.0，但它没有 '0'，所以它会失败。

工作正常或像这样：

```
(56.).toString() 
```

或者

```
56..toString() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:58:02.763

这里的问题是当你输入

```
56.toString() 
```

JavaScript 认为 56 是一个变量名，而您正试图访问它的 toString() 方法。但这不起作用，因为 56 不是变量，甚至不是有效的变量名，因此会导致编译错误。（变量名必须以字母开头）

[在这里查看 JS 变量命名规则](http://www.w3schools.com/js/js_variables.asp)

但是当你在 56 (56.) 后面添加一个点时，它会变成一个数字文字，语言会为此创建一个 Number 类的实例，然后尝试解析 Number 实例上的 toString() 方法。由于 Number 类定义了一个名为 toString() 的方法，然后它就可以工作了。

```
56..toString(); 
```

相当于

```
(new Number(56.)).toString(); 
```

这里要理解的关键是数字文字（56.）和方法访问运算符（variable.methodName()）之间的区别

# java - 如何在JPanel中显示的矩形区域内的图像上写入文本

> ID：13560065
> 
> 赞同：0
> 
> 时间：2012-11-26T07:00:05.943
> 
> 标签：java, image, swing

想在图像上绘制文本。在第一次鼠标单击矩形区域显示时，一旦输入文本，文本应以矩形形状绘制，矩形应自动调整大小，文本显示在附加图像中。

![在此处输入图像描述](../Images/6e1f86929bc2fbeb0428b6d883b09a88.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T09:10:32.870

基本概念就像任何正常的 Swing 形式。您只需要添加一些额外的工作即可将它们组合在一起。

您需要决定的第一件事是您是否需要多线支持？

下面的示例简单地使用`JLayeredPane`, 来提供自由布局，并使用 custom`JTextArea`来提供可编辑字段。

关于这一点的巧妙之处在于，调整大小和“可重新编辑性”一样主要由您负责，只需单击文本，您就会明白我的意思。

![在此处输入图像描述](../Images/ec9edb762bab097947ab487005cdf873.png)

我会把重新定位留给你；）

```
public class TextOverImage {

    public static void main(String[] args) {
        new TextOverImage();
    }

    public TextOverImage() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ImagePane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class ImagePane extends JLayeredPane {

        private BufferedImage background;

        public ImagePane() {
            setFocusable(true);
            try {
                background = ImageIO.read(new File("Your/image/here"));
            } catch (Exception e) {
                e.printStackTrace();
            }
            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    Component focusOwner = FocusManager.getCurrentKeyboardFocusManager().getFocusOwner();
                    if (!(focusOwner instanceof OverlayEditor)) {
                        OverlayEditor field = new OverlayEditor();
                        field.setLocation(e.getPoint());
                        add(field);
                        invalidate();
                        repaint();
                        field.requestFocusInWindow();
                    } else {
                        requestFocusInWindow();
                    }
                }

            });
            InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
            ActionMap am = getActionMap();
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0), "cancel");
            am.put("cancel", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    Component focusOwner = FocusManager.getCurrentKeyboardFocusManager().getFocusOwner();
                    if (focusOwner instanceof OverlayEditor) {
                        remove(focusOwner);
                        invalidate();
                        repaint();
                    }
                }

            });
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (background != null) {
                int x = (getWidth() - background.getWidth());
                int y = (getHeight() - background.getHeight());
                g.drawImage(background, x, y, this);
            }
        }

    }

    public class OverlayEditor extends JTextArea {

        public OverlayEditor() {
            super(1, 10);
            setBorder(null);
            setForeground(Color.WHITE);
            setOpaque(false);
            setSize(getPreferredSize());

            getDocument().addDocumentListener(new DocumentListener() {
                public void update() {
                    setSize(getPreferredSize());
                }

                @Override
                public void insertUpdate(DocumentEvent e) {
                    update();
                }

                @Override
                public void removeUpdate(DocumentEvent e) {
                    update();
                }

                @Override
                public void changedUpdate(DocumentEvent e) {
                    update();
                }

            });

            addFocusListener(new FocusListener() {
                @Override
                public void focusGained(FocusEvent e) {
                    setBorder(new LineBorder(Color.WHITE));
                    repaint();
                }

                @Override
                public void focusLost(FocusEvent e) {
                    setBorder(null);
                    repaint();
                }

            });
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            if (hasFocus()) {
                g2d.setColor(new Color(0, 0, 0, 32));
                g2d.fill(new Rectangle(getWidth(), getHeight()));
            }
            g2d.dispose();
        }

    }

} 
```

# android - Base 64 和 AES base 64 是否相同？

> ID：13560066
> 
> 赞同：2
> 
> 时间：2012-11-26T07:00:07.427
> 
> 标签：android, password-encryption

我已经使用`Base64`解码在我的应用程序中向服务器发送密码。但是我的服务器端支持建议我专门使用 AES base64；我用谷歌搜索了一下，发现了在 android 中不使用 AES base64 的原因[；](http://www.oracle.com/technetwork/java/faq-sun-packages-142232.html)但是如果我发送普通的base64（在android.util.Base64中）加密字符串，我们可以使用AES base 64将它解密成原始字符串吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T07:22:29.843

sun 实现了一些不属于标准 jdk 的文件这一事实并不意味着您找不到符合您想要的相同协议的其他 impl。

就您而言，请检查“加密”的含义。毕竟，base64 不是一种加密/解密的方式，只是以一种完全可逆的方式对某些字节进行编码/解码，不需要任何密钥。但是，AES 使用加密密钥，因此这取决于您的服务器是否希望您发送已经 AES 加密的缓冲区，以 base64 编码......您应该尝试找出这一点。

# json - 如何让javacc在生成源代码时不转义字符？

> ID：13560067
> 
> 赞同：1
> 
> 时间：2012-11-26T07:00:11.903
> 
> 标签：json, escaping, javacc

我使用 javacc 5.0 生成带有语法文件的 json 解析器：[https ://github.com/inqwell/json/blob/master/src/main/javacc/com/inqwell/json/JSON.jj](https://github.com/inqwell/json/blob/master/src/main/javacc/com/inqwell/json/JSON.jj)

但是生成的java源代码有一些错误。

```
char escape = '\u005c\u005c'; 
```

和

```
switch(echar)
{
  case 'n':
    buf.append(System.getProperties().get("line.separator")); to++;
    break;

  case 'r':  buf.append('\u005cr'); to++; break;
  case 't':  buf.append('\u005ct'); to++; break;
  case 'b':  buf.append('\u005cb'); to++; break;
  case 'f':  buf.append('\u005cf'); to++; break;
  case '\u005c\u005c': buf.append('\u005c\u005c'); to++; break;
  case '"':  buf.append('"');  to++; break;
  case '\u005c'': buf.append('\u005c''); to++; break;
  case '\u005cr': to++; if (to < len && s.charAt(to) == '\u005cn') to++; break;
  case '\u005cn': to++; break;
} 
```

在语法文件中，它们是：

```
char escape = '\\'; 
```

和

```
switch(echar)
{
  case 'n':
    buf.append(System.getProperties().get("line.separator")); to++;
    break;

  case 'r':  buf.append('\r'); to++; break;
  case 't':  buf.append('\t'); to++; break;
  case 'b':  buf.append('\b'); to++; break;
  case 'f':  buf.append('\f'); to++; break;
  case '\\': buf.append('\\'); to++; break;
  case '"':  buf.append('"');  to++; break;
  case '\'': buf.append('\''); to++; break;
  case '\r': to++; if (to < len && s.charAt(to) == '\n') to++; break;
  case '\n': to++; break;
} 
```

这些大小写字符不应该被转义，但是怎么做呢？

* * *

**更新**

代码无法在我的IDEA中编译，请看我的截图：

![在此处输入图像描述](../Images/a2f3f2fe22898f6273e1885bcbfba4cd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T03:29:58.737

生成的代码没有错误。Java中的文字 `'\\'`和`'\u005c\u005c'`含义相同。原因是首先处理 unicode 转义，然后处理其他转义序列。请参阅 JLS（第 3 版）[http://docs.oracle.com/javase/specs/jls/se5.0/html/lexical.html的第 3.2 节](http://docs.oracle.com/javase/specs/jls/se5.0/html/lexical.html)

* * *

**编辑**：添加以下内容以回应 Freewind 的评论

```
theo-laptop:src theo$ javacc JSON.jj
Java Compiler Compiler Version 5.0 (Parser Generator)
(type "javacc" with no arguments for help)
Reading from file JSON.jj . . .
Note: UNICODE_INPUT option is specified. Please make sure you create the parser/lexer using a Reader with the correct character encoding.
File "TokenMgrError.java" is being rebuilt.
File "ParseException.java" is being rebuilt.
File "Token.java" is being rebuilt.
File "JavaCharStream.java" is being rebuilt.
Parser generated successfully.
theo-laptop:src theo$ fgrep \\u005c JSON.java
char escape = '\u005c\u005c';
  case 'r': buf.append('\u005cr'); to++; break;
  case 't': buf.append('\u005ct'); to++; break;
  case 'b': buf.append('\u005cb'); to++; break;
  case 'f': buf.append('\u005cf'); to++; break;
  case '\u005c\u005c': buf.append('\u005c\u005c'); to++; break;
  case '\u005c'': buf.append('\u005c''); to++; break;
  case '\u005cr': to++; if (to < len && s.charAt(to) == '\u005cn') to++; break;
  case '\u005cn': to++; break;
theo-laptop:src theo$ javac JSON.java
theo-laptop:src theo$ javac -version
javac 1.7.0_07 
```

# c# - 如何在视频流服务器中支持微软媒体播放器搜索？

> ID：13560069
> 
> 赞同：2
> 
> 时间：2012-11-26T07:00:16.430
> 
> 标签：c#, streaming, dlna

我实现了一个 DLNA 媒体播放器服务器功能。

服务器支持 DMP(Digital Media Player) 搜索功能，XBMC 或 VLC 播放器正常工作。

但是当我在 Microsoft Media Player 中播放视频并尝试寻找稍后的时间位置时，媒体播放器停止了。

我分析了 MS Media Player 的网络数据包，并尝试创建与 MS Media Player 的 DMS（数字媒体服务器）相同的标头。

但我还是失败了。

我错过了任何重要的标签信息吗？

我关于响应的响应代码如下：

```
NetworkStream ns = new NetworkStream(mClient.Client);
try
{

    StreamWriter sw = new StreamWriter(ns);
    if (rangeBegin >= 1)
    {
        sw.WriteLine("HTTP/1.1 {0}", HttpStatus.Http206);
    }
    else
    {
        sw.WriteLine("HTTP/1.1 {0}", HttpStatus.Http200);
    }

    long k=total_size - rangeBegin;
    sw.WriteLine("Content-Length: {0}",k );
    sw.WriteLine("Content-Type: " + ContentType);
    try
    {
        String st = HttpRequest.IfUnmodifiedSince;
        sw.WriteLine("LAST-MODIFIED: " + st);
    }
    catch (Exception e)
    {
        Log(TAG, "Exception:" + e.Message);
    }

    sw.WriteLine("Server: PegaServer");
    sw.WriteLine("Accept-Ranges: bytes");
    //sw.WriteLine("ContentFeatures.DLNA.ORG: DLNA.ORG_PN=AVC_MP4_HP_HD_AAC;DLNA.ORG_OP=01;DLNA.ORG_FLAGS=01500000000000000000000000000000");
    sw.WriteLine("contentFeatures.dlna.org: DLNA.ORG_PN=AVC_MP4_HP_HD_AAC;DLNA.ORG_OP=01;DLNA.ORG_CI=0;DLNA.ORG_FLAGS=01700000000000000000000000000000");
    sw.WriteLine("CONTENT-RANGE: bytes " + getContentRange());
    sw.WriteLine("transferMode.dlna.org: Streaming");
    String date = DateTime.Now.ToString("r");
    sw.WriteLine("Date: " + date);

    sw.WriteLine("Pragma: no-cache");
    sw.WriteLine("Expires:  0");
    sw.WriteLine("Cache-Control:    no-cache, no-store, must-revalidate, max-age=0, proxy-revalidate, no-transform, private");
    sw.WriteLine("Connection: close"); 
```

任何人都可以给我一个关于媒体寻求请求的建议吗？

# iphone - 如何在 xcode 4.3.1 中为 iphone 应用程序生成 .apk 文件

> ID：13560075
> 
> 赞同：0
> 
> 时间：2012-11-26T07:00:31.500
> 
> 标签：iphone, apk

任何人都可以向我解释为我正在使用 xcode 4.3.1 的 iphone 应用程序创建 .apk 文件的分步过程。我是新手，任何帮助对我来说都是一个很好的推动。关于 .apk 文件的一些解释将是很大的帮助..提前谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T07:22:05.617

你不能在 ios 中制作 .apk 文件，你可以为 ios 制作 .ipa 文件。请参阅以下创建 .ipa 文件的步骤

```
1). you can make the certificate and download provisioning profile in keychain.
2). after downloading provisioning profile double click on that and set the code signing of that.
3). select the ios device.
4). in Product file select archive.
5). in the archive select the Distribution.
6). in radio button second save option select and next
7). select your provisioning profile and next.
8). after where you want to save select your path and save. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T07:25:09.573

它不是您的 iPhone 应用程序可以生成的 APK 文件。它实际上称为使用 Xcode IDE./ .ipa 文件创建的构建文件 (.app)。

以下几点对整个过程进行了粗略的概述。

1.  在创建此 .app 文件之前，应从 Apple 开发人员处获得证书和配置文件 a/c（99 美元）

2.  出于安全原因，使用证书和配置文件来表明此应用程序不是被黑客入侵的应用程序，并确保其仅使用苹果支持的技术开发，就像数字签名一样。

3.  在从开发人员网站下载后，双击该文件，必须为该特定项目添加该配置文件。

4.  每个配置文件都将与一个捆绑标识符相互链接，该标识符也是使用苹果开发者的帐户创建的

5.  添加上述配置文件后，您应该将该配置文件的捆绑标识符添加到可以在 Targets -> Summary -> iOS Application target 中找到的“Bundle Identifier”键中

6.  只有在添加后，您才能将配置文件集成到项目中（将捆绑 ID 与相应的配置文件匹配）。

7.  添加后只需发出 CMND + B 以构建将创建 .app 文件的应用程序

8.  这个 .app 可以在“项目导航器”部分下列出的“产品”文件夹下找到。

希望这对您来说风险不大，因为您是 iOS 新手，以上几点将使您对 iOS 中的 .app 文件有一个总体了解。

干杯！

# python - 将 Tkinter 检查按钮文本字符向左对齐

> ID：13560081
> 
> 赞同：4
> 
> 时间：2012-11-26T07:01:19.783
> 
> 标签：python, python-2.7, tkinter

我正在使用 Python 2.7 来显示 2 `Checkbuttons`。如果我使用`justify = LEFT`它会显示错误`"global name 'LEFT' is not defined"`

```
class simple_ap(Tkinter.Tk):
    def __init__(self,parent):
        Tkinter.Tk.__init__(self,parent)
        self.parent = parent
        self.initialize()

    def initialize(self):

        Checkbutton = Tkinter.Checkbutton(self,text='All_1',width = 50,justify = LEFT)
        Checkbutton.grid(column = 0, row = 0)

        Checkbutton = Tkinter.Checkbutton (self,text='To_check_for_the_space_between_brackets',width = 50)
        Checkbutton.grid(column = 0, row = 8)

if __name__ == "__main__":
    app = simple_ap(None)
    app.title('my_app')
    app.mainloop() 
```

这是使用“证明”的正确方法吗？我工作了[http://www.tutorialspoint.com/python/tk_frame.htm](http://www.tutorialspoint.com/python/tk_frame.htm)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T07:13:59.363

看起来好像您正在使用`import Tkinter`而不是`from Tkinter import *`，它在您链接的示例中使用。

你需要使用`Tkinter.LEFT`.

# itext - 动态定位使用jfree图表生成的表格和条形图

> ID：13560092
> 
> 赞同：1
> 
> 时间：2012-11-26T07:02:42.490
> 
> 标签：itext, jfreechart

大家好，我使用 itextpdf-5.1.0.jar，显示表（此表中的值是根据输入屏幕中的开始日期和结束日期从数据库中获取的）和上表中值的条形图。

问题是我想将条形图定位在表格下方，我从数据库中获取的值可能会因开始日期和结束日期而异，现在我通过给出一些静态值（234,567）来定位表格和条形图，如果有的话大量值表值和条形图被覆盖。有没有其他方法可以动态定位表格和条形图。

```
Document document = new Document(PageSize.A4_LANDSCAPE, 10, 10, 10, 10);
document.open();
document.add(new Paragraph("Batch Report:", FontFactory.getFont(FontFactory.COURIER, 10, Font.BOLD, new CMYKColor(255, 255, 255, 255))));
Paragraph paragraph1 = new Paragraph();
paragraph1.setSpacingBefore(4);
document.add(paragraph1);
PdfPTable table = new PdfPTable(5);
table.setWidthPercentage(100);
PdfPCell c1;

for (BoardBean bean : listHeader) {
addColumn(bean.getID(),c1,table,myColor,btableheadercolor);   
} 
```

将列值添加到表中

```
private void addColumn(String text,PdfPCell c1,PdfPTable dataTable,BaseColor   myColor,BaseColor btablecolumncolor) {
  try {
  final Font tabletdcolor = new Font(Font.FontFamily.HELVETICA, 6, Font.NORMAL, BaseColor.BLACK);
  c1 = new PdfPCell(new Paragraph(text, tabletdcolor));
  cellStyle(c1, myColor, btablecolumncolor);
  dataTable.addCell(c1);
  } catch (Exception ex) {
ex.printStackTrace();
  }
} 
```

生成条形图

```
JFreeChart reportBarChart = genBatchReportBarChart(listHeader);
PdfTemplate reportTemplate = contentByte.createTemplate(280, 230);
        Graphics2D reportGraphics = reportTemplate.createGraphics(280, 230, new DefaultFontMapper());
Rectangle2D reportRectangle = new Rectangle2D.Double(0, 0, 280, 230);
reportBarChart.draw(reportGraphics, reportRectangle);
reportGraphics.dispose();
contentByte.addTemplate(reportTemplate, 10, height+150); 
```

现在在上面的代码中，我正在修复条形图的位置，如果值的数量很少，它很好，但如果它们的数量很大，条形图会覆盖表格值。根据表格值，条形图需要如何对齐我能做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T07:34:49.423

将表格添加到文档后，您可以询问表格的总高度，并使用该表格高度来决定放置图表的位置。

或者（甚至更容易实现）：您可以将对象包装在`PdfTemplate`内部`Image`：

```
Image img = Image.getInstance(reportTemplate); 
```

`document.add()`在您添加表格后立即添加该图像（假设您正在添加表格`document.add()`）。

# asp.net-mvc - 模型中的最后一条记录。使用 Linq

> ID：13560097
> 
> 赞同：0
> 
> 时间：2012-11-26T07:03:11.767
> 
> 标签：asp.net-mvc, asp.net-mvc-3, linq, linq-to-entities

```
from stu in Students
where stu.Department == 'CS'
select stu 
```

以上是 linq 查询。我想返回 CS 系的所有学生并在 View 中展示他们。要查看，我正在传递一个模型 Student，其结果由此查询返回。在查看时，我想添加评论选项（评论链接），以便我可以为第一个学生添加评论。那么有人可以告诉我如何检测到这是第一个学生的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:09:25.920

**详细信息：**下面显示了如何获取特定部门的所有学生以及从该查询结果中获取第一个学生。使用 Take 获取第一个元素：[Take Information](http://msdn.microsoft.com/en-us/library/bb300906.aspx)

```
var students = from stu in Students
where stu.Department == 'CS'
select stu;

var firstStudent = students.Take(1); 
```

# android - 在 Android 4.0 或更高版本中禁用主页按钮

> ID：13560100
> 
> 赞同：-4
> 
> 时间：2012-11-26T07:03:23.830
> 
> 标签：android

> **可能重复：**
> [Android - 是否可以禁用单击主页按钮](https://stackoverflow.com/questions/2162182/android-is-it-possible-to-disable-the-click-of-home-button)

我想禁用主页按钮并设置甚至在主页按钮上打开一些应用程序。

* * *

## 回答 #1

> 赞同：-6
> 
> 时间：2012-11-26T07:13:44.403

无论您使用什么版本，但不可能在 Android 中以编程方式**禁用主页按钮。**

# java - 使用不同属性的组合对 ArrayList 的对象进行排序

> ID：13560101
> 
> 赞同：-3
> 
> 时间：2012-11-26T07:03:24.963
> 
> 标签：java, collections, arraylist, comparator, comparable

我的课是这样的：

```
class Employee{
  int age;
  String name;
  int empId;
  .
  .
  . 
 } 
```

在主要方法中，我创建了 Employee 类的对象并将其保存在 ArrayList 中，例如 objEmpList。现在，我的要求是像 SQL 语句一样对 objEmpList 进行排序，Select * From Employee Order by age,name,empId; Measn，我希望结果按年龄、姓名和 empId 的顺序排序。

例如：我的数据如下：10 Nirdesh 1 10 Ambesh 222 9 Ramesh 9 12 Amar 3

所以我的结果应该是，

```
 9    Ramesh  9
 10   Ambesh  222
 10   Ramesh  1 
 12   Amar    3 
```

我怎样才能达到这个要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:25:17.177

您应该实现一个实现 Comparator 的新类 EmployeeComparator。通过指定字段名称的可变参数列表来配置字段的顺序`public EmployeeComparator(String... fields)`。

这是一个例子：

```
public class CarComparator implements Comparator<Car> {

private final List<String> fieldSortOrder;

public CarComparator(String... fieldSortOrder) {
    this.fieldSortOrder = new ArrayList<String>(
            Arrays.asList(fieldSortOrder));
}

@Override
public int compare(Car a, Car b) {
    try {
        return cmp(a, b, fieldSortOrder);
    } catch (Exception e) {
        return 0;
    }
}

private int cmp(Car a, Car b, final List<String> fields) throws Exception {
    if (fields.isEmpty())
        return 0;

    PropertyDescriptor pd = new PropertyDescriptor(fields.get(0), Car.class);
    String ma = (String) pd.getReadMethod().invoke(a);
    String mb = (String) pd.getReadMethod().invoke(b);
    if (ma.compareTo(mb) == 0) {
        return cmp(a, b, fields.subList(1, fields.size()));
    } else {
        return ma.compareTo(mb);
    }
}

} 
```

然后将列表排序如下：

```
Collection.sort(cars, new CarComparator("brand", "mileage")); 
```

值对象中的每个字段都需要访问器（即 getter 和 setter），上面的示例对非字符串字段会有些麻烦。但我想我应该把一些乐趣留给你！:)

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T07:42:43.453

**-**`java.util.Compartor<T>`如果要**根据对象的多个属性进行排序，**可以使用界面。

 ****-**你将不得不使用`Collections.sort(List<?> l, Comparator c)`.

**例如：**

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;

class Car {

    private String name;
    private String brand;
    private double cost;

    public Car(String name, String brand, double cost) {

        this.name = name;
        this.brand = brand;
        this.cost = cost;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getBrand() {
        return brand;
    }

    public void setBrand(String brand) {
        this.brand = brand;
    }

    public double getCost() {
        return cost;
    }

    public void setCost(double cost) {
        this.cost = cost;
    }

    public String toString() {

        return getName();
    }

}

public class Hog {

    ArrayList<Car> cars = new ArrayList<Car>();

    public void setIt() {

        cars.add(new Car("Padmini", "Fiat", 100008.00));
        cars.add(new Car("XYlo", "Mahindra", 100000.00));
        cars.add(new Car("Swift", "Maruti", 200000.00));
    }

    public void sortIt() {

        Collections.sort(cars, new NameComparator());
        System.out.println(cars);
        Collections.sort(cars, new BrandComparator());
        System.out.println(cars);
        Collections.sort(cars, new CostComparator());
        System.out.println(cars);
    }

    class NameComparator implements Comparator<Car> {

        public int compare(Car c1, Car c2) {

            return c1.getName().compareTo(c2.getName());
        }
    }

    class BrandComparator implements Comparator<Car> {

        public int compare(Car c1, Car c2) {

            return c1.getBrand().compareTo(c2.getBrand());
        }
    }

    class CostComparator implements Comparator<Car> {

        public int compare(Car c1, Car c2) {

            return new Double(c1.getCost()).compareTo(new Double(c2.getCost()));
        }
    }

    public static void main(String[] args) {

        Hog h = new Hog();

        h.setIt();
        h.sortIt();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:09:57.480

让 Employee 实现 Comparable，然后调用 Collections.sort(list);

```
public class Employee implements Comparable<Employee> {

    // rest of class omitted

    public int compareTo(Employee e) {
       // Here's how you order by age, name, empId
       if (age != e.age) return age - e.age;
       if (!name.equal(e.name) return name.compareTo(e.name);
       return empId - e.empId;
    }
} 
```

然后

```
Collections.sort(list); 
```**

# java - java文本文件集线阅读器

> ID：13560109
> 
> 赞同：0
> 
> 时间：2012-11-26T07:04:08.547
> 
> 标签：java

我想将 line reader 设置为第一个位置，例如它刚刚完成了整个文本文件的读取，我想将 line reader 设置为它第一次开始读取文本文件时的位置？

我使用扫描仪打开了 txt 文件

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:10:04.263

`Scanner`本身没有办法回退输入。您可能能够`reset()`使用底层输入流，但这可能不受支持，具体取决于正在使用的流实现。您最好的选择是关闭并重新打开输入。

编辑：

如果您无法关闭/重新打开输入，请尝试调用`reset()`底层流。

# javascript - 在 iphone 中使用 javascript 组件

> ID：13560111
> 
> 赞同：2
> 
> 时间：2012-11-26T07:04:16.097
> 
> 标签：javascript, iphone, ios, cocoa-touch

我想在 iphone 中使用 javascript 组件。我不知道如何在 UIWebView 中使用 javascript。

我想要一个翻转组件，比如 HTC 中使用 javascript 的翻转时钟。请帮我。我会很感激你的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:35:30.990

你当然可以。一个好的方法是使用像[PhoneGap](http://www.phonegap.com/)这样的框架。这应该使您免于编写大多数 native-js 交互。

如果您想自己执行一些专有工作，您应该查看[UIWebView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)：

1.  从本机代码调用 js 函数：stringByEvaluatingJavaScriptFromString
2.  要从 js 中调用 native：将 window.location 更改为自定义 url 方案，如“myscheme://blahblah”，并使用 shouldStartLoadWithRequest 方法实现[UIWebViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIWebViewDelegate)，该方法检测自定义方案并将 url 路由到某些本地方法。

# java - 如何使用 MySQL 只读副本配置 Spring / Hibernate

> ID：13560113
> 
> 赞同：6
> 
> 时间：2012-11-26T07:04:17.023
> 
> 标签：java, mysql, spring, hibernate

我有一个使用 Spring/Hibernate（在 Amazon Elastic Beanstalk 上运行）和普通 Amazon RDS 实例的 Java 应用程序。为了分配负载，我添加了一个只读副本。我将 DB.url 交换到只读副本并测试了一种只*应*读取数据的方法（这些方法绝对不使用 UPDATE、INSERT 或 DELETE）。但是，该应用程序正在返回错误。

**我的问题：**为什么只读取数据时应用程序会失败？如何配置 Spring/Hibernate 以使用只读副本？

**细节：**

我得到的错误是：

```
INFO: Internal error in method IEngageManager.getSimpleExamActivityLiveResults, ARGUMENTS=[
  Credentials {
(m) password=0c2a765c057a31c51b68d0f6c75cef93, 
(m) email=w1jg
  }
]
com.iengage.exceptions.IEException: Internal error in method IEngageManager.getSimpleExamActivityLiveResults, ARGUMENTS=[
  Credentials {
    (m) password=0c2a765c057a31c51b68d0f6c75cef93, 
    (m) email=w1jg
  }
]
    at com.iengage.exceptions.ExceptionWrapper.overridingInvoke(ExceptionWrapper.java:25)
    at com.iengage.springobjects.SingletonMethodInterceptor.invoke(SingletonMethodInterceptor.java:18)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621)
    at com.iengage.managers.IEngageManager$$EnhancerByCGLIB$$c8a2c385.getSimpleExamActivityLiveResults(<generated>)
    at com.iengage.services.IEngageService.getSimpleExamActivityLiveResults(IEngageService.java:379)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.sun.xml.ws.api.server.InstanceResolver$1.invoke(InstanceResolver.java:246)
    at com.sun.xml.ws.server.InvokerTube$2.invoke(InvokerTube.java:146)
    at com.sun.xml.ws.server.sei.EndpointMethodHandler.invoke(EndpointMethodHandler.java:257)
    at com.sun.xml.ws.server.sei.SEIInvokerTube.processRequest(SEIInvokerTube.java:93)
    at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:595)
    at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:554)
    at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:539)
    at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:436)
    at com.sun.xml.ws.server.WSEndpointImpl$2.process(WSEndpointImpl.java:243)
    at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:444)
    at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:244)
    at com.sun.xml.ws.transport.http.servlet.ServletAdapter.handle(ServletAdapter.java:135)
    at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doGet(WSServletDelegate.java:129)
    at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doPost(WSServletDelegate.java:160)
    at com.sun.xml.ws.transport.http.servlet.WSSpringServlet.doPost(WSSpringServlet.java:52)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:680)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

调用数据库的代码：

```
public LecturerBO getLecturerByCode(Credentials credentials) {
    return findSingleResultByCriteria(LecturerBO.class,Restrictions.eq("loginCode",credentials.getPassword()));
} 
```

在哪里

```
protected <T> T findSingleResultByCriteria(Class<T> clazz, Criterion... criterion) {
    Criteria crit = getSession().createCriteria(clazz);
    for (Criterion c : criterion) {
        crit.add(c);
    }
    return (T) crit.uniqueResult();
} 
```

最后，Hibernate 配置：

```
<bean id="generalManagerProxyTemplate"
      class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean"
      abstract="true">
    <property name="transactionManager" ref="hibernateTransactionManager"/>
    <property name="proxyTargetClass" value="true"/>
    <property name="transactionAttributes">
        <props>
            <prop key="*">PROPAGATION_REQUIRED</prop>
        </props>
    </property>
    <property name="preInterceptors">
        <list>
            <bean class="com.iengage.exceptions.ExceptionWrapper"/>
            <bean class="com.iengage.utils.PerformanceLogger"/>
        </list>
    </property>
</bean>

<bean id="hibernateTransactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="pooledDataSource"/>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</prop>
            <prop key="transaction.auto_close_session">true</prop>
            <prop key="transaction.flush_before_completion">true</prop>
            <prop key="show_sql">false</prop>
            <prop key="hibernate.cache.use_query_cache">false</prop>
            <prop key="hibernate.show_sql">false</prop>
        </props>
    </property>
    <property name="annotatedClasses">
        <bean class="com.iengage.dao.EntityList"/>
    </property>
</bean>

<bean id="pooledDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="${db.driverClassName}"/>
    <property name="url" value="${db.url}"/>
    <property name="username" value="${db.username}"/>
    <property name="password" value="${db.password}"/>
    <property name="defaultAutoCommit" value="false"/>
    <property name="testWhileIdle" value="true"/>
</bean>

<bean id="abstractDAO" class="com.iengage.dao.GeneralDAO" abstract="true">
    <property name="sessionFactory" ref="sessionFactory"/>
    <property name="dataSource" ref="pooledDataSource"/>
</bean>

<bean id="dao" class="com.iengage.dao.IEngageDAO" parent="abstractDAO"/> 
```

最后，作为健全性检查，我确实通过一个简单的脚本直接连接了只读副本，该脚本执行了我托管在第三方服务器上的 SELECT 查询。一切都按预期工作。

此外，在我发布此问题之前的研究中，大多数答案都集中在`@Transactional`我们不使用的注释上。悲伤的熊猫。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:14:28.860

要提供这种类型的访问（仅限只读副本），您必须实现此属性。

```
 <property name="transactionAttributes">
            <props>
                <prop key="get*">PROPAGATION_REQUIRED,readOnly
                </prop>
                <prop key="find*">PROPAGATION_REQUIRED,readOnly
                </prop>
                <prop key="load*">PROPAGATION_REQUIRED,readOnly
                </prop>
                <prop key="store*">PROPAGATION_REQUIRED</prop>
                <prop key="add*">PROPAGATION_REQUIRED</prop>
            </props>
        </property> 
```

在这里，我使用这两个来允许存储并添加到数据库中。如果不需要，您必须删除它。

```
 <prop key="store*">PROPAGATION_REQUIRED</prop>
       <prop key="add*">PROPAGATION_REQUIRED</prop> 
```

# ruby-on-rails - 黄瓜矛盾的错误信息

> ID：13560114
> 
> 赞同：1
> 
> 时间：2012-11-26T07:04:18.280
> 
> 标签：ruby-on-rails, ruby, cucumber

[问题背景：“使用 web_steps.rb 的黄瓜声明性步骤定义”堆栈溢出问题](https://stackoverflow.com/questions/13525108/cucumber-declarative-step-definitions-using-web-steps-rb)

在对有问题的问题进行故障排除时，会得到两条相互矛盾的错误消息；声明：

```
When /^(?:|I )uncheck "([^"]*)"$/ do |field|
  check(field)
end 
```

添加到 'features/step_definitions/movie_steps.rb' 执行 'bundle exec cucumber features/filter_movie_list.feature' 会导致：

```
Ambiguous match of "I uncheck "ratings_G"":

features/step_definitions/movie_steps.rb:65:in '/^(?:|I )uncheck "([^"]*)"$/
features/step_definitions/web_steps.rb:65:in '/^(?:|I )uncheck "([^"]*)"$/ 
```

但是，删除该步骤不会导致使用“web_steps.rb”中的步骤定义；相反，会显示不同的错误消息：

```
When I uncheck the following ratings: G, PG-13                 # features/step_definitions/movie_steps.rb:44
  Undefined step: "When I uncheck "ratings_G"" (Cucumber::Undefined)
  ./features/step_definitions/movie_steps.rb:52:in `block (2 levels) in <top (required)>'
  ./features/step_definitions/movie_steps.rb:49:in `each'
  ./features/step_definitions/movie_steps.rb:49:in `/I (un)?check the following ratings: (.*)/'
  features/filter_movie_list.feature:30:in `When I uncheck the following ratings: G, PG-13' 
```

当两个地方有两个定义时，Cucumber 怎么可能抱怨一个步骤是多余的，但后来又抱怨删除重复项时没有定义相同的步骤？第二条错误消息是否可能真的意味着不同于所述内容？

PS：配置是通过 Cucumber 安装和用于 CS169.x1 @ edX 的训练轮来实现的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:19:27.940

似乎您有一个定义，它与错误消息中出现`When I uncheck "ratings_G"`的调用有些匹配。`When I uncheck the following ratings: G, P-13`Cucumber 抱怨没有什么比得上后者。它是否存在于您的代码中？

*有点*匹配可能会解释您最初收到的歧义警告。定义匹配但不匹配在字符串中找到的内容。

# asp.net - 在 ASP .NET 中查找列表框

> ID：13560117
> 
> 赞同：-2
> 
> 时间：2012-11-26T07:04:29.620
> 
> 标签：asp.net

我在 ASP.NET 中创建了动态列表框（4 到 10）。我的问题是，如何使用 c# 找到动态创建的列表框？

谢谢

当然...感谢您的帮助。下面我用于创建动态 LB 的代码

```
protected void btndyfilter_Click(object sender, EventArgs e)
        {

            int numberOfListBox = lbFilter.GetSelectedIndices().Length;
            string lbname = lbFilter.SelectedValue;
            for (int i = 0; i < numberOfListBox; i++)
            {
                ListBox listb = new ListBox();
                ListItem lItem = new ListItem();
                listb.SelectionMode = System.Web.UI.WebControls.ListSelectionMode.Multiple;

                listb.Height = 150;
                listb.Width = 200;
                lItem.Value = i.ToString();

                lItem.Text = lbname;
                listb.Items.Add(lItem);
                panFilter.Controls.Add(listb);
                //once we created the LB dynamically i need to populate each LB with the corresponding values
                connstr2 = System.Configuration.ConfigurationManager.ConnectionStrings["connstr"].ConnectionString;
                conn2.ConnectionString = connstr2;
                conn2.Open();
                CubeCollection CubeList = conn2.Cubes;
                string cb = ddlCubeList.SelectedItem.Text;
                //need to remove the Hardcoded Code
                foreach (Member dimem in CubeList[cb].Dimensions["Date"].Hierarchies["Calendar Date"].Levels["Date"].GetMembers())
                {
                    ListItem Memlist = new ListItem();
                    Memlist.Text = dimem.UniqueName;
                    lbFilter.Items.Add(Memlist);

                }

            }
            panFilter.Visible = true;
            panCubeDef.Visible = true;
        } 
```

所以这将创建我相信的 LB :)...并且在我需要用来填充每个 LB 项目的注释代码中..也许它有点硬编码，我需要删除它。所以我填充了所有动态 LB，然后从所有 LB 中选择的项目将进入我的 MDX 查询中的 where 子句。希望我没有混淆你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:20:19.080

有两种方法，您可以使用字典存储动态控制详细信息，或者使用类似这样的代码查找何时使用它

```
Control GetControlByName(string Name)
{
foreach(Control c in this.Controls)
    if(c.Name == Name)
        return c;

return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:11:20.320

动态生成 ListBox 时，将 ListBox ID 指定为： `lstBoxNo1`, `lstBoxNo2`. `lstBoxNo3`等等，其中 1,2,3(no) 将来自计数。喜欢

整数计数=1；

生成列表框控件

`listboxid=lastBoxNo+count;`

`count++`

`通过这样做，你可以控制 id。

否则使用 `http://stackoverflow.com/questions/3731007/using-findcontrol-to-find-control` 此链接来了解 findcontrol。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:20:51.510

您不会发现动态控件的要点。

1.  首次呈现页面的那一刻。
2.  在所有其他帖子上。

在 1 的情况下，您最好在页面上保留一个变量来保留该创作。

在 2 的情况下，当您回发时，您需要在呈现时以某种方式将控件的创建存储在页面中。一个好地方是将这些信息保存在视图状态中。

您也可以在回发上，只是为了检查您是否有任何来自您命名的控件的回发值，这些控件的序列号从 1 开始，例如，您开始查看是否从 ControlName_1 回发，然后是 ControlName_2，当您没有找到你结束的任何其他值。

# java - Selenium Web 驱动程序：使用 Java 处理确认框

> ID：13560120
> 
> 赞同：9
> 
> 时间：2012-11-26T07:04:51.407
> 
> 标签：java, selenium, selenium-webdriver

嗨，我正在使用以下代码在单击操作后处理警报框，但它不起作用 有人可以帮忙吗？

这是我调用处理程序的地方。调用 clickOnAddQuote() 后的 clickOnAlert() 出现警告框。

```
System.out.println("before add to quote");
this.clickOnAddQuote();
System.out.println("before alert");
this.clickOnAlert();
System.out.println("after alert"); 
```

函数 clickOnAlert()

```
public void clickOnAlert() {
        System.out.println("In click");
        Alert alert = webdriverSession().switchTo().alert();
        System.out.println("after constructor");
        alert.accept();
    } 
```

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-26T14:06:46.543

使用 selenium webDriver 处理不同的对话框：

```
import org.openqa.selenium.Alert;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;

public class JavaScriptAlertTest {

public static void main(String[] args) {

    WebDriver myTestDriver = new FirefoxDriver();
    myTestDriver.get("...blablabla....");

    myTestDriver.manage().window().maximize();

    myTestDriver.findElement(By.xpath("//input[@value = 'alert']")).click();

    Alert javascriptAlert = myTestDriver.switchTo().alert();
    System.out.println(javascriptAlert.getText()); // Get text on alert box
    javascriptAlert.accept();

    System.out.println("*************prompt******************************************");

    myTestDriver.findElement(By.xpath("//input[@value = 'prompt']")).click();

    Alert javascriptprompt = myTestDriver.switchTo().alert();
    javascriptprompt.sendKeys("This is Selenium Training");

    System.out.println(javascriptprompt.getText()); // Get text on alert box

    javascriptprompt.accept();
    javascriptprompt = myTestDriver.switchTo().alert();

    System.out.println(javascriptprompt.getText()); // Get text on alert box
    javascriptprompt.accept();

    myTestDriver.findElement(By.xpath("//input[@value = 'prompt']")).click();

    javascriptprompt = myTestDriver.switchTo().alert();

    System.out.println(javascriptprompt.getText()); // Get text on alert box

    javascriptprompt.dismiss();
    javascriptprompt = myTestDriver.switchTo().alert();

    System.out.println(javascriptprompt.getText()); // Get text on alert box
    javascriptprompt.accept();

    System.out.println("***********************************confirm dialog box****************************");
    myTestDriver.findElement(By.xpath("//input[@value = 'confirm']")).click();

    Alert javascriptconfirm = myTestDriver.switchTo().alert();
    javascriptconfirm.accept();

    javascriptconfirm = myTestDriver.switchTo().alert();
    System.out.println(javascriptconfirm.getText()); // Get text on alert box
    javascriptconfirm.accept();

    myTestDriver.findElement(By.xpath("//input[@value = 'confirm']")).click();
    javascriptconfirm = myTestDriver.switchTo().alert();

    javascriptconfirm.dismiss();
    javascriptconfirm = myTestDriver.switchTo().alert();
    System.out.println(javascriptconfirm.getText()); // Get text on alert box
    javascriptconfirm.accept();

}
} 
```

希望对你有帮助：）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-26T07:14:33.007

```
protected void handleAlert() {
    try {
        getDriver().switchTo().alert().accept();
    } catch (NoAlertPresentException e) {
        // That's fine.
    }
} 
```

# javascript - 将 "['a','b','c']" 转换为 ['a','b','c'] ：Javascript

> ID：13560129
> 
> 赞同：-1
> 
> 时间：2012-11-26T07:05:37.737
> 
> 标签：javascript

做这些事情的最好方法是什么？

**注意：**我的数组包含复杂值意味着逗号分隔或侧字符串数组中的对象值和数组字符串用**双**引号括起来，元素用**单**引号括起来。

**前任。** `str = "['sam', 'admin', '1062', 'Sam', 'True', '$$global_permissions#1062:manage_replenishment,purchase_order,reprint_invoice#1008', 'sameer@opnce.com', '9920580', 'en', '358', '{\"Sales-tax-details\":\"brand,category,supplierNo\",\"invoice-logs\":\"invoiceNo,eventDateTime,event\"}']"`

我在这里玩过`JSON.parse`，

```
JSON.parse(str);
Uncaught SyntaxError: Unexpected token ' // this error i got on console 
```

然后我试了，

```
JSON.parse(str.replace(/'/g, '"'))
Uncaught SyntaxError: Unexpected token S  // this error i got on console 
```

我想在这里探索的另一件事是，如果`str`包含以下元素，

`str = "['sam', 'admin', '1062', 'Sam', 'True', '$$global_permissions#1062:manage_replenishment,purchase_order,reprint_invoice#1008', 'sameer@opnce.com', '9920580', 'en', '358', '{}']"`

为此`str`我尝试过，

```
JSON.parse(str.replace(/'/g, '"')) 
```

它在这里工作正常，

问候。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T07:06:41.647

也许，

```
JSON.parse('["a", "b", "c"]'); 
```

**编辑**：对于**EX。** `str`从这个问题来看，以下应该有效：

```
JSON.parse(str.replace(/'{/g, "{").replace(/}'/g, "}").replace(/'/g, "\"").replace(/\\\"/g, "'")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T07:06:50.630

这个怎么样：

```
JSON.parse('["a","b","c"]'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T07:21:37.863

`JSON.parse`应该管用。如果你不能使用`JSON`，这也有效：

```
var str = '["a","b","c"]'
   ,str2arr = str.replace(/"|\[|\]/g,'').split(',');
//=> str2arr = ['a','b','c'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T07:50:01.767

最正确的方法是：

```
try{
    var res = JSON.parse(your_string);
} catch(e){
    //console.log(e);
} 
```

这样，如果字符串不正确，它不会产生错误，并且在 catch 块中，您可以针对这种情况做正确的事情

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-26T07:08:19.180

没有jquery（不是问题）试试这个：

```
var string = '["a","b","c"]';
var myArray = [];
try {
    myArray = eval(string);
}
catch (r) {
}

console.log(myArray) 
```

# c# - 有没有办法强制 DeflateStream 完全刷新？

> ID：13560131
> 
> 赞同：4
> 
> 时间：2012-11-26T07:05:46.740
> 
> 标签：c#, zlib, deflate

zlib 的 deflate 函数接受一个`Z_FULL_FLUSH`选项作为其参数，据我所知，当执行完全刷新时，`(0,0,0xFF,0xFF)`将设置一个完全刷新点，后续数据将独立于该点之前的字节，因此使压缩数据准随机访问。我读过一点[dictzip的来源](http://www.linuxmanpages.com/man1/dictzip.1.php)，它利用这个特性来实现它的块级随机可访问性，同时保持与 gzip 的兼容性。我想使用 CLR 提供的功能重新实现 dictzip 压缩器/解压缩器。解压器（随机部分读取器）很简单，我可以用DeflateStream逐块解压数据，没有问题，但是创建有很大的障碍，DeflateStream的API太高级了，似乎所有放气细节都是隐藏的，因此无法利用。我真的不喜欢在我的 C# 项目中包含 C 共享库，它使跨平台部署非常痛苦，并且首先取消了选择 C# 编码的好处。所以，我应该怎么办？有什么方法可以仅使用托管代码来绕过这个障碍？Mono 是否为 zlib 提供了较低级别的包装器，以便我可以使用完全刷新选项调用 deflate？任何建议将被认真考虑！

--- >8 ---

感谢提供答案的 Mark Adler。DotNetZip（特别是 Ionic.Zlib.DeflateStream）完全支持我要求的功能。下面的例子展示了它是如何工作的：

```
 Encoding u8 = Encoding.UTF8;
        byte[]  s1 = u8.GetBytes("the quick brown fox "),
                s2 = u8.GetBytes("jumps over the lazy dog!");
        var ms = new MemoryStream(100);
        var deflator = new DeflateStream(ms, CompressionMode.Compress, true);
        deflator.FlushMode = FlushType.Full;
        deflator.Write(s1, 0, s1.Length);
        deflator.Flush();
        var pos = ms.Position;//remember the full flush point
        deflator.Write(s2, 0, s2.Length);
        deflator.Dispose();

        var inflator = new DeflateStream(ms, CompressionMode.Decompress);
        ms.Position = pos;
        byte[] buf = new byte[100];
        inflator.Read(buf, 0, s2.Length);
        Console.WriteLine(u8.GetString(buf));//output: jumps over the lazy dog! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:59:21.863

试试[DotNetZip](http://dotnetzip.codeplex.com/)。所以不会让我发布少于 30 个字符，即使这是一个完整且正确的答案，所以我添加了这个无关的句子。

# flash - 增加 Flash 脚本执行时间 (FlasCC)

> ID：13560133
> 
> 赞同：1
> 
> 时间：2012-11-26T07:06:04.877
> 
> 标签：flash, actionscript, loading, alchemy, flascc

我正在使用 FlasCC。我的应用程序运行良好，但需要很长时间才能加载。我收到一条消息，它已超过 15 秒（错误 #1502）。我怎样才能让这个时间更长？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:24:21.473

如果你使用 mxmlc 编译 swf，你可以使用选项 'max-execution-time'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:11:34.747

简短的回答是你[不能增加 max timeout](https://stackoverflow.com/questions/2568206/disabling-script-max-execution-time-in-flex)。

长答案是您可以解决它：

1.  如果您在 FlasCC 代码中进行大量计算
    1.  您可以将执行分解成更小的“块” [，这些“块”会被异步调用](https://stackoverflow.com/questions/8350319/loading-progress-for-long-loop-in-flex)。
    2.  您可以在 FlasCC C 代码 (FP 11.5+) 中使用 pthreads
2.  您可以将 FlasCC 实例放入 Worker 线程（FP 11.4+）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T19:59:45.273

您可以为本地测试目的增加最大超时。查看如何[在 mms.cfg 中设置 ScriptStuckTimeout 变量](http://www.adobe.com/devnet-docs/flascc/docs/Reference.html#section_gdb)。

请注意，如果您的程序甚至超过了您指定的延长超时时间，Flash 播放器仍会显示一条消息“超过 15 秒”，尽管实际上它等待的时间更长。

# javascript - 我们正在从 .cache.html 文件加载 javascript，那么为什么我们不能从 .js 下载呢？

> ID：13560137
> 
> 赞同：1
> 
> 时间：2012-11-26T07:06:33.037
> 
> 标签：javascript, gwt

我在学习gwt的时候在developers.google.com看到了以下句子。

```
"The "`cache`" files contain your application's logic. If you were to look inside a 
`.nocache.html` file, you would see that it is JavaScript code wrapped in a thin HTML
 wrapper.You might wonder why the `GWT` Compiler doesn't simply emit it as a JavaScript .js 
file. The reason for this is that certain browsers do not correctly handle compression of 
pure-JavaScript files in some circumstances. This would effectively mean that users 
unfortunate enough to be using such a browser would download the `.js` file uncompressed. " 
```

我们是`javascript`从 .cache.html 文件加载的，那为什么我们不能从 .js 下载呢？我认为现在所有浏览器都支持`javascript`..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:12:15.713

引用的声明似乎已经解释得很清楚：*“某些浏览器在某些情况下不能正确处理纯 JavaScript 文件的压缩”*。这**不是**关于支持 JavaScript，而是关于支持 JavaScript 文件的压缩。

# ruby - 计算数组的统计信息

> ID：13560138
> 
> 赞同：9
> 
> 时间：2012-11-26T07:06:40.410
> 
> 标签：ruby, statistics

我正在构建一个需要计算数据集统计数据的网络应用程序。我需要计算数组的百分位数、平均值、众数和其他统计函数。

通常在 Python 中，我只会使用 scipy、numpy 或 nltk，它们有一个庞大的 stat 数组函数库。我可以利用任何红宝石宝石或库来做到这一点吗？

在没有任何现有库的情况下，是否有一种简单的方法可以在 Python 中进行数据处理，同时将我的应用程序保留在 Ruby/Rails 中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T07:16:37.023

如果您真的需要一个完整的统计库，请查看[statsample](https://github.com/clbustos/statsample)。否则，您可能会发现[descriptive_statistics](https://github.com/thirtysixthspan/descriptive_statistics)是一个不错的轻量级替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T07:14:38.163

您也许可以使用[Rubystats](https://rubygems.org/gems/rubystats)或[Easystats](https://github.com/mgrigajtis/easystats)。我敢肯定还有更多我不知道的宝石。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:50:43.563

对于数字运算， [Narray](http://masa16.github.io/narray/)是标准推荐。它的统计方法有求和、累积求和、乘积（乘元素）、累积产生、平均值、标准差、均方根、均方根差、最小值、最大值和中值。

它专门用于数字，[据称](https://stackoverflow.com/questions/7832289/what-are-the-advantages-of-using-ruby-narray-over-array)比 Array 快 50 倍，内存效率更高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T17:03:40.613

如果您正在计算 ActiveRecord 模型的统计信息，那么您可能需要查看[统计信息](https://github.com/acatighera/statistics)gem。

我还为[statisticus](https://github.com/davidrichards/statisticus)添加了书签，它提供了 GNU-R 集成和[SIRB](https://github.com/davidrichards/sirb)以供在控制台中使用。

在 Rails 应用程序下运行 Python 的方法有很多种，但在 Ruby 库中找到所需的方法可能更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T14:57:57.767

我已经实现了一个新的 Gem - MDArray，它在 JRuby 中进行统计。这对于 Web 应用程序来说实际上可能非常好，因为 JRuby 基本上是 Java。MDArray 遵循 NArray 和 Numpy 哲学，尽管在这一点上它可能比两者都慢，但它应该比纯 Ruby 替代品更快。

检查一下，如果您需要任何帮助，我将很乐意尝试并提供帮助。

干杯，

罗德里戈

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-19T00:36:45.783

您可以使用[NMatrix](https://github.com/sciruby/nmatrix)，它是一个类似于 NumPy 的数值库，在不断开发中。（免责声明：我来自 SciRuby/NMatrix 团队）

# c# - 在 C# 中使用 crl（证书吊销列表）验证证书

> ID：13560140
> 
> 赞同：7
> 
> 时间：2012-11-26T07:06:41.797
> 
> 标签：c#, certificate

我想使用 CRL 属性验证证书。但是，当我在为 CRL 检查设置标志后调用证书上的 verify() 方法时，会出现以下错误。

1) RevocationStatusUnknown => 吊销功能无法检查证书的吊销。

2) OfflineRevocation => 吊销功能无法检查证书的吊销，因为吊销服务器离线...

但服务器还可以。

这是我的标志设置代码

```
X509Chain ch = new X509Chain();
ch.ChainPolicy.RevocationMode = X509RevocationMode.Online;
ch.ChainPolicy.RevocationFlag = X509RevocationFlag.EntireChain;
ch.ChainPolicy.UrlRetrievalTimeout = new TimeSpan(2000);
ch.ChainPolicy.VerificationFlags = X509VerificationFlags.NoFlag;
ch.ChainPolicy.VerificationTime = DateTime.Now;
ch.Build(certificate); 
```

想不通这背后的原因是什么？

# php - 从php中的数组中删除某些值

> ID：13560141
> 
> 赞同：-2
> 
> 时间：2012-11-26T07:06:47.777
> 
> 标签：php, arrays

> **可能重复：**
> [删除空数组元素](https://stackoverflow.com/questions/3654295/remove-empty-array-elements)

我有一个这样的数组

```
Array ( [81] => 5.00 [78] => 4.67 [13] => 4.67 [65] => 4.60 [91] => 4.50 [4] => 4.40 [7] => 4.25 [11] => 4.20 [47] => 4.20 [21] => 4.20 [66] => 4.17 [48] => 4.00 [37] => 4.00 [69] => 4.00 [49] => 4.00 [38] => 4.00 [54] => 4.00 [62] => 4.00 [63] => 4.00 [64] => 4.00 [61] => 4.00 [60] => 4.00 [52] => 4.00 [59] => 4.00 [80] => 4.00 [50] => 4.00 [34] => 4.00 [16] => 4.00 [18] => 4.00 [9] => 4.00 [5] => 4.00 [3] => 4.00 [19] => 4.00 [20] => 4.00 [25] => 4.00 [42] => 3.83 [73] => 3.83 [28] => 3.83 [58] => 3.83 [15] => 3.83 [45] => 3.80 [10] => 3.80 [67] => 3.75 [17] => 3.75 [2] => 3.75 [27] => 3.75 [32] => 3.75 [51] => 3.75 [1] => 3.75 [31] => 3.71 [53] => 3.70 [72] => 3.70 [26] => 3.67 [82] => 3.67 [12] => 3.67 [71] => 3.67 [77] =>  [70] =>  [41] => 3.67 [8] => 3.60 [22] => 3.60 [57] => 3.60 [39] => 3.60 [83] => 3.60 [76] => 3.50 [74] => 3.50 [79] => 3.50 [43] => 3.50 [35] => 3.50 [14] => 3.50 [6] => 3.50 [44] => 3.50 [33] => 3.50 [89] => 3.33 [68] => 3.30 [29] => 3.25 [40] => 3.20 [24] => 3.17 [30] => 3.13 [56] => 3.00 [36] => 3.00 [23] => 3.00 [55] => 3.00 [46] => 2.67 [90] =>  ) 
```

现在我想要的是从这个数组中删除空白值索引。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:09:54.827

```
foreach($array as $key => $val)
{
    if(empty($val)) unset($array[$key]);
}
print_r($array); 
```

这将取消设置数组中没有键的任何部分

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T07:10:45.263

您可以遍历它，取消设置任何空值。

```
foreach ($array as $key => $value) {
    if (empty($value)) {
        unset($array[$key]);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T07:12:04.057

```
function is_not_blank($value) {
    return $value !== false && !is_null($value) && trim($value) !== "";
}

$myArray = array_filter($myArray, "is_not_blank"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T07:15:16.540

您可以使用[`array_filter`](http://www.php.net/manual/de/function.array-filter.php)

```
function not_empty($a)
{
    return !empty($a) && !is_null($a);
}

$array = array_filter($array, 'not_empty'); 
```

# android - getViewTypeCount 和 getItemViewType 方法中的问题

> ID：13560144
> 
> 赞同：0
> 
> 时间：2012-11-26T07:06:51.333
> 
> 标签：android, android-listview, admob, baseadapter

我希望在列表视图的顶部插入一个广告，但是从它`BaseAdapter`在构造函数中使用的 admob 提供的示例中，而我使用的是我`ArrayList<Hashmap>`的，因此我现在很困惑，请帮助我。

```
public class ListAdapter extends BaseAdapter implements AdListener{

private static String admobId = null;
private Activity activity;
private ArrayList<HashMap<String, String>> data;

private static LayoutInflater inflater=null;

public ListAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    this.activity = a;
    this.data = d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public int getCount() {
    return data.size()+1; //Adding one ads
}

public Object getItem(int position) {
    if (isItemAnAd(position)) {
        return null;
    }
    return data.get(getOffsetPosition(position));
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;

    if (isItemAnAd(position)) {
          if (vi instanceof AdView) {
            Log.d(LOGTAG, "I am reusing an ad");
            return vi;
          } else {
            Log.d(LOGTAG, "I am creating a new ad");
            AdView adView = new AdView(activity, AdSize.SMART_BANNER, getAdmobId(activity));
            AdRequest adRequestBanner = new AdRequest();
            adView.loadAd(adRequestBanner);
            return adView;
          }
    } else {

    vi = inflater.inflate(R.layout.listview, null);
    TextView subject = (TextView)vi.findViewById(R.id.subject);
    TextView permalink = (TextView)vi.findViewById(R.id.permalink);

    HashMap<String, String> map = new HashMap<String, String>();
    map = data.get(position);
     //Setting all values in listview

       subject.setText(map.get(ViewPagerAdapter.KEY_NEWS_SUBJECT));
       permalink.setText(map.get(ViewPagerAdapter.KEY_NEWS_PERMA));

    return vi;
        }
}

@Override
public int getViewTypeCount() {
 //what should i write here?
}

@Override
public int getItemViewType(int position) {
 //what should i write here?
}

//Ads
@Override
public boolean areAllItemsEnabled() {
  return false;
}

@Override
public boolean isEnabled(int position) {
  return (!isItemAnAd(position));
}

private boolean isItemAnAd(int position) {
  // Place an ad at the first 
  return (position == 0);
}

private int getOffsetPosition(int position) {
  return position - 1;
}
} 
```

我应该怎么写`getViewTypeCount()`& `getItemViewType()`。

更新：

```
@Override
public int getViewTypeCount() {
    return 2;
}
@Override
public int getItemViewType(int position) {
    if (isItemAnAd(position)) {
          return 0;
        } else {
          return 1;
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T08:23:48.957

您的列表视图有 2 种行：广告和普通行。所以`getViewTypeCount`应该返回 2。让我们给广告行类型 0，和正常行类型 1。如果为 true，则`getItemViewType`应该返回 0 ，否则返回 1。`isItemAnAd`

# iphone - 在 Appdelegate 中以编程方式检查哪个 viewController 在 iPhone 应用程序中运行

> ID：13560150
> 
> 赞同：0
> 
> 时间：2012-11-26T07:07:27.120
> 
> 标签：iphone, objective-c

他们是否有可能在 Appdelegate 中以编程方式检查哪个 viewController 正在 IPhone 应用程序中运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:31:55.817

对此没有简单的答案。您需要从主窗口的根视图控制器开始遍历视图控制器层次结构。如果遇到 a`UINavigationController`需要查看`topViewController`. 到达 后`UIViewController`，您需要查看 （`modalViewController`如果有）。如果您有任何标签栏控制器，那么您需要查看当前选择的标签。

诸如此类的`UISplitViewController`事情会使事情变得复杂，因为这可以同时显示两个视图控制器。

这是您可以添加到的类别方法的开始`UIViewController`。这仅处理常规视图控制器和导航控制器。

```
- (UIViewController *)topMostController {
    if (self.modalViewController) {
        return [self.modalViewController topMostController];
    } else {
        if ([self isKindOfClass:[UINavigationController class]]) {
            UINavigationController *nc = (UINavigationController *)self;

            return [nc.topViewController topMostController];
        } else {
            return self;
        }
    }
} 
```

从您的应用程序委托中调用此键窗口的`rootViewController`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T07:12:56.457

假设您已在以下位置设置了 rootViewController 属性`AppDelegate`：

```
[UIApplication sharedApplication].keyWindow.rootViewController; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T07:30:36.923

对于视图控制器，无法获取当前正在运行的视图控制器名称。

为此，您在应用程序委托文件中编写了一个以下方法，然后在每个视图控制器视图中调用 getCurentViewController 方法，如果您没有通过将 self 传递给它来分配 agin，则视图确实加载或视图确实出现

```
-(void) getCurentViewController:(UIViewController*) vc
{
      if([vc isMemberOfClass:NSClassFromString(@"vcName")])
      {
          //write your code here
      }
      else if([vc isMemberOfClass:NSClassFromString(@"vcName1")])
      {  
         //write your code here
      }

 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T08:08:52.990

```
UIViewController *currentViewController = yourRootViewController;
while (currentViewController.presentedViewController) {
    currentViewController = currentViewController.presentedViewController;
}
//currentViewController is now your top-most viewController
//I use this same snippet in my production code 
```

# mysql - 以UNIX格式在mysql数据库中保存时间戳

> ID：13560152
> 
> 赞同：0
> 
> 时间：2012-11-26T07:07:31.363
> 
> 标签：mysql, sql, datetime

我的数据库中有这个事件表，在这个表中 event_time 列带有当前时间戳，默认情况下时间戳的格式类似于“1970-01-01 00:00:01”，有什么办法可以使这个默认格式可以改成UNIX时间戳格式吗？

```
EVENTS table:-
  `global_id` int(11) NOT NULL AUTO_INCREMENT,
  `event_creator` int(11) NOT NULL,
  `event_type` int(2) NOT NULL,
  `event_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP 
```

,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:12:45.130

也许你想要**[`UNIX_TIMESTAMP`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)**

```
SELECT UNIX_TIMESTAMP('1989-01-01 00:00:01') 
```

将有一个结果`599616001`

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/d41d8/4203)

# sockets - sendmsg 返回错误空间不可用

> ID：13560158
> 
> 赞同：1
> 
> 时间：2012-11-26T07:08:07.073
> 
> 标签：sockets

我有两个进程 - 父母和孩子。父级建立套接字对，并将其作为 fork 的一部分传递给子级。然后父级接受连接并传递每个新的套接字 fd 以供子级处理。这是通过 sendmsg 完成的。当传入连接的速率约为每秒 10 个时，这可以正常工作。但是，在增加到每秒 200 次后，我继续收到消息 sendmsg：没有可用的缓冲区空间。这可能是什么原因？我应该检查什么？

到目前为止，这是我的想法：我想知道是否像其他套接字调用一样，当孩子执行 recvmsg 时，应该将其从套接字对缓冲区中删除

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:23:24.110

最可能的原因是您的子进程从套接字读取的速度不够快，因此父进程会溢出内核缓冲区，但如果不看代码就很难说。

您是否考虑过一次发送多个文件描述符[`cmsg(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/cmsg.3.html)？

# jquery - 如何使用 datepicker 默认选择当前日期？

> ID：13560160
> 
> 赞同：0
> 
> 时间：2012-11-26T07:08:11.320
> 
> 标签：jquery

js 字段中有一个 datePicker ：

```
$( ".datepicker" ).datepicker({ 
        defaultDate: +0,
        showOtherMonths:true,
        autoSize: true,
        appendText: '(dd-mm-yyyy)',
        dateFormat: 'dd-mm-yy'
    }); 
```

显示日期选择器时如何默认选择当前日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:10:06.273

你可以这样做

叫这个

```
$( ".datepicker" ).datepicker("setDate", (new Date()));
$( ".datepicker" ).val(''); 
```

后

```
$( ".datepicker" ).datepicker({ 
        defaultDate: +0,
        showOtherMonths:true,
        autoSize: true,
        appendText: '(dd-mm-yyyy)',
        dateFormat: 'dd-mm-yy'
    }); 
```

[演示](http://jsfiddle.net/zVPVJ/)

# android - Android 从 json 文件 (.txt) 获取数据

> ID：13560161
> 
> 赞同：2
> 
> 时间：2012-11-26T07:08:16.887
> 
> 标签：android, json, string

我有 Json 文件（test.txt），我想从该文件获取数据到 Android 应用程序。我的代码是：

```
private static String url = "file:///AndroidJSONParsingActivity/res/raw/test.txt"; 
```

但它不起作用。我得到的错误是：

```
error opening trace file: No such file or directory (2) 
```

来人帮帮我？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T07:23:28.283

将`test.txt`文件放入assets文件夹

```
public class Utility {
   public static String readXMLinString(String fileName, Context c) {
      try {
          InputStream is = c.getAssets().open(fileName);
          int size = is.available();
          byte[] buffer = new byte[size];
          is.read(buffer);
          is.close();
          String text = new String(buffer);

          return text;
      } catch (IOException e) {
          throw new RuntimeException(e);
      }
   }
} 
```

然后您可以`test.txt`使用以下代码

```
JSONObject json = new JSONObject(Utility.readXMLinString("test.txt",getApplicationContext())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T07:14:01.523

你有一个[在 Android 应用资源中使用 JSON 文件的答案](https://stackoverflow.com/questions/6349759/using-json-file-in-android-app-resources)

你需要把文件介绍原始文件夹，你可以访问这个：

```
getResources().openRawResource(resourceName) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:13:09.187

用于`getResources().openRawResource(RawResource_id)`从 res/raw 文件夹中读取文本文件：

```
 InputStream inputStream = Current_Activity.this.
                            getResources().openRawResource(R.raw.test);
 //put  your code for reading json from text file(inputStream) here 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T07:13:18.897

使用以下代码打开存储在原始文件夹中的文件的输入流：

```
getResources().openRawResource(R.raw.text_file) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T07:27:01.507

请参阅下面的代码，它将解决您的问题。

```
public void mReadJsonData() {
    try {
        InputStream is = getResources().openRawResource(R.raw.textfilename)
        int size = is.available();
        byte[] buffer = new byte[size];
        is.read(buffer);
        is.close();
        String mResponse = new String(buffer);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

# asp.net - 无法在应用程序页面中加载类型错误

> ID：13560170
> 
> 赞同：3
> 
> 时间：2012-11-26T07:09:03.720
> 
> 标签：asp.net, sharepoint, applicationpage

我按照[这篇文章](http://tomaszrabinski.pl/wordpress/2011/06/23/sharepoint-2010-custom-login-page/comment-page-1/#comment-1949)在 sharepoint 中创建了一个用于登录功能的应用程序页面。

但这给了我继承页面的错误。我有文件夹结构和 .aspx 文件，如下所示。 ![在此处输入图像描述](../Images/827297f56a753ccc64703ff5c78649df.png) 在应用程序页面中提供指向 .cs 文件的链接时，我是否犯了任何错误？在我部署到我的站点后，它给了我如下错误。 ![在此处输入图像描述](../Images/51a0a4a506ea4a10efbff50a5bd62fac.png) 我试图从 2 小时开始解决它，但无法找到解决方案。任何人都可以建议我这样做的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T22:37:43.147

尝试添加
`<%@ Assembly Name="$SharePoint.Project.AssemblyFullName$" %>`
之前
`<%@ Page ... %>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T03:08:24.677

将 $SharePoint.Project.AssemblyFullName$ 添加到您的 Inherits 属性

而不是 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="YourPage.aspx.cs" Inherits="YourNamespace.YourPage" %>

使用 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="YourPage.aspx.cs" Inherits="YourNamespace.YourPage, **$SharePoint.Project.AssemblyFullName$** " %>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-20T07:02:13.070

当有另一个不存在的对该程序集的引用时，也可能发生这种情况。要显示错误，只需检查 Ha Doan 答案。

# objective-c - 使用objective c从sqlite获取今天的数据

> ID：13560171
> 
> 赞同：0
> 
> 时间：2012-11-26T07:09:06.870
> 
> 标签：objective-c

我如何使用objective c从sqlite数据库中获取今天的数据？我使用此查询，但它返回数据库中的所有数据：

```
const char *sql = "select * from SavedD where julianday('now')"; 
```

请帮我只检索今天的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:56:07.530

尝试这个

```
NSDateFormatter* formatter = [[[NSDateFormatter alloc] init] autorelease];            
//Set the required date format 
[formatter setDateFormat:@"dd-MM-yyyy"];
NSString* cCurrentTimeStamp = [formatter stringFromDate:dDate]; 
NSString *cPrevTimeStamp=[NSString stringWithFormat:@"%@ 00:00 AM",cCurrentTimeStamp];
NSString *cNextTimeStamp=[NSString stringWithFormat:@"%@ 23:59 PM",cCurrentTimeStamp];
const char *sqlStatement="SELECT * from _tablename where iAgentId=? and dScheduleTIme BETWEEN ? and ?"; 
```

或者，如果您使用任何其他格式化程序，则将该类型格式化程序时间附加到上一个和下一个时间戳

# algorithm - 在没有虚拟内存分页的情况下使用 3GB 可用空间访问 30 GB 信息？

> ID：13560175
> 
> 赞同：0
> 
> 时间：2012-11-26T07:09:29.180
> 
> 标签：algorithm

我有一个快速的问题：

我们如何在没有虚拟内存或压缩的情况下使用 3GB 的可用空间来访问大约 30GB 的数据？这更像是一个数据结构问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T07:14:35.687

您应该以某种方式模仿分页机制。

一种方法是*散列*¹。

将所有数据散列到 bin 中，并将这些 bin 存储在磁盘中。在您的主内存 (RAM) 中，您将只保存一组指向磁盘的指针。一旦你需要一个地址，你就可以通过访问 RAM 并从该位置获取指针来知道它在磁盘上的位置`hash(address)`

您当然可以优化它以将部分数据保留在内存中 - 使用[局部性原则](http://en.wikipedia.org/wiki/Principle_of_locality)- 并希望获得*成功*- 并避免从磁盘重新加载块。

* * *

(1) 散列不必复杂或均匀分布。我相信使用地址的 MSb 会很好 - 实际上会更好地模仿分页机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:13:47.910

最明显的方法是通过带有 、 和 函数的典型文件`read`系统`write`API `seek`。

# c# - C#正则表达式，获取用逗号分隔的左右单词

> ID：13560178
> 
> 赞同：-5
> 
> 时间：2012-11-26T07:09:35.550
> 
> 标签：c#

我有以下输入字符串`str = "a,b,c,d";`

期望在组中输出，例如（获取每个逗号的左右单词）

```
[group0 : a b]       [group1 : b c]       [group2 : c d] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T07:16:21.970

您可以执行以下操作：

```
string str = "a,b,c,d";
string[] parts = str.Split(',');

for (int i = 0; i < parts.Length-1; i++)
   System.Diagnostics.Debug.WriteLine(parts[i] + " " + parts[i+1]); 
```

顺便说一句，[你试过什么？](http://whathaveyoutried.com)

**编辑：** 对于那些对此解决方案有任何担忧的人，[这里是 demo](http://ideone.com/RREFov)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:13:42.730

您可以匹配单个组并使用此正则表达式迭代匹配项：

```
([^,]+),([^,]+) 
```

因此，在每场比赛中，第一组将是左词，第二组将是右词。

# php - 如何从后端获取前端的 Magento getBaseUrl？

> ID：13560181
> 
> 赞同：1
> 
> 时间：2012-11-26T07:09:54.297
> 
> 标签：php, magento, magento-1.7, magento-1.6, base-url

我的**前端 url**和**后端 url**不一样。

例子，

> 前端： http: [//magento.com/](http://magento.com/)
> 
> 后端： http: [//my.magento.com/](http://my.magento.com/)

然后，

如何从**后端获取****前端**基本网址？

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T07:17:09.533

我没有带有自定义管理区域 URL 的商店，但我想这应该可行：

```
Mage::app()->getStore($storeId)->getBaseUrl(Mage_Core_Model_Store::URL_TYPE_LINK); 
```**

# xcode - 静态库中的类别混淆

> ID：13560186
> 
> 赞同：1
> 
> 时间：2012-11-26T07:10:06.933
> 
> 标签：xcode, linker, static-libraries, objective-c-category

在静态库中使用类别时无法识别的选择器。

我在谷歌搜索并找到了这个？ [http://www.dribin.org/dave/blog/archives/2006/03/13/static_objc_lib/](http://www.dribin.org/dave/blog/archives/2006/03/13/static_objc_lib/)

但我仍然很困惑：

1、如果我有`object.h/.m`and `object+category.h/.m`, and `#import "object+category.h"`in `object.m`，我将这些作为源代码添加到我的项目中，它工作正常（没有无法识别的选择器错误）。但是，如果我将这些编译到静态库并添加到我的项目中，则会因无法识别的选择器而崩溃。

那么这两种方式有什么不同呢？为什么第一种方式可以找到选择器而第二种方式不能？

2、文章说“作为一种优化，链接器只选择解析符号所需的目标文件。” 与静态库和源代码相同吗？表示如果我在我的项目中有`object.h/.m`和`object+category.h/.m`作为源代码并且`object+category.h/.m`从未使用过。所有这些编译的`.o`文件都会链接到最终的.app吗？

3、xcode链接器如何知道`object+category.o`是必需的并将其链接到.app，如果符号是为每个类而不是每个方法创建的？当链接发生时`object+category.o`，编译时还是运行时？

# adfs2.0 - 如何在 SAML 响应中发送更多属性以及电子邮件 ID

> ID：13560188
> 
> 赞同：0
> 
> 时间：2012-11-26T07:10:18.370
> 
> 标签：adfs2.0, openam

我正在使用使用 openam 创建的 fedlet 登录 ADFS。在 fedlet 中，我从 ADFS 获得 saml 响应，其中我只获得电子邮件地址，但我想要其他属性，如角色、用户名、用户状态、密码。我如何在我的 fedlet 应用程序中获取这些属性。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:32:33.423

我假设您获取了 sp.xml fedlet 文件并将其作为 RP 信任导入 ADFS？

您需要做的就是使用“将 LDAP 属性作为声明发送”向 RP 添加一些声明规则，然后选择要包含在 SAML 响应中的 AD 属性。

# javascript - 动态更改 URL

> ID：13560193
> 
> 赞同：1
> 
> 时间：2012-11-26T07:10:34.390
> 
> 标签：javascript, jquery, url

请问如何使用链接（href）更改此脚本中的提要 URL

```
<script type="text/javascript">
$(document).ready(function () {
    $('#test').rssfeed('http://feeds.reuters.com/reuters/oddlyEnoughNews');
});
</script>
<div id="test"> </div> 
```

请参阅此处的示例[http://www.zazar.net/developers/jquery/zrssfeed/example.html](http://www.zazar.net/developers/jquery/zrssfeed/example.html)

测试 div 显示的内容`rss feed`

我只是希望能够`rssfeed(url)`通过单击具有不同 rssfeed url 的链接来更改

```
<a onclick ="rssfeed('http://feeds.cnn.com/News');"></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:32:14.727

请注意您希望链接如何加载它，但我假设点击所以这就是我要做的..

```
<script type="text/javascript">
$(文档).ready(函数 () {
  $('.rss').click(function(){
    $('#test').rssfeed($(this).attr('href'));
  })
});
</脚本>

<a class="rss" href="http://feeds.reuters.com/reuters/oddlyEnoughNews">加载rss</a>
<div id="test"> </div>

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:33:07.827

如此处所示：[http ://www.zazar.net/developers/jquery/zrssfeed/example_menu.html](http://www.zazar.net/developers/jquery/zrssfeed/example_menu.html)

只需`.rssfeed`再次调用即可更改提要。

# android - 安卓设备rssi

> ID：13560194
> 
> 赞同：0
> 
> 时间：2012-11-26T07:10:35.317
> 
> 标签：android, bluetooth, rssi

我想获得单独的蓝牙 rssi 值。

```
device1 address 00:00:00:00:00:01 rssi1
device2 address 00:00:00:00:00:02 rssi2 
```

如何获得 rssi1 和 rssi2 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:39:20.317

发现设备后，根据意图使用`EXTRA_RSSI`参数，如下所示：`ACTION_FOUND`

```
private BroadcastReceiver mBluetoothDeviceFoundReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        Object rssi = intent.getParcelableExtra(BluetoothDevice.EXTRA_RSSI);
    ... 
```

不确定返回数据类型，所以我只是`Object`在示例中使用。

# css - 如何删除内联块产生的额外边距空间？

> ID：13560197
> 
> 赞同：0
> 
> 时间：2012-11-26T07:10:43.180
> 
> 标签：css

标记在这里：

```
<ul>
    <li></li>
    <li></li>
    <li></li>
</ul>

* {margin: 0; padding:0;}
ul{ border: 1px solid black; height: 100px;width:100%; display:block;} 
li{display:inline-block;width: 200px; height: 100px; background: red;} 
```

[你可以在这里](http://jsfiddle.net/5KDZG/2/)看到演示

我的困惑是，我已经将所有边距和填充设置为零，为什么这里还有差距？直到我必须设置`float: left`以清除差距

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:21:02.943

试试这个 html

```
<ul>
     <li></li><!--
  --><li></li><!--
  --><li></li>
</ul> 
```

工作**[jsfiddle](http://jsfiddle.net/matmuchrapna/5KDZG/6/)**

***您还***可以在这篇 css-tricks 文章中找到解释和其他解决方案： **[Fighting the Space between Inline Block Elements](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:16:28.697

现在只需在样式表中添加这个 css

```
ul{
font-size:0;
}
ul li{
font-size:12px; // according to your design 
} 
```

**[*现场演示*](http://jsfiddle.net/5KDZG/3/)**

## ------

**如果您将所有 li 设置在一行中而不是定义此**

```
ul{
white-space:nowrap;
} 
```

***[更新的演示](http://jsfiddle.net/5KDZG/5/)***

# jquery - 响应式、多级导航 IE7 错误

> ID：13560204
> 
> 赞同：1
> 
> 时间：2012-11-26T07:11:06.810
> 
> 标签：jquery, css, navigation, multi-level

我正在使用此页面上的示例代码来创建**响应式多级导航**。**在此处找到**的示例代码： ***[单击此处](http://webdesigntutsplus.s3.amazonaws.com/tuts/378_tessa/tessa-lt-dropdowns-21c7868/index.html)*** 在 IE7 中效果很好

但是，我的版本位于此处：**[单击此处](http://sccsa.kook.com.au/)** 没有。

这是我的**CSS**

```
#mainMenu ul{ margin:0; padding: 0; }
    nav { overflow: visible!important; }
    .nav { list-style: none;  *zoom: 1; background: transparent url('../images/background-pattern.jpg') repeat bottom center; }
    .nav:before, .nav:after { content: " ";  display: table; }
    .nav:after { clear: both;}
    .nav ul { list-style: none;  width: 12em; }
    .nav a { color:#aaa; line-height: 3em; padding:0 .9em 0 .9em; text-transform:uppercase; font-size: 90% }
    .nav a:hover, .nav li:hover > a{ color:#fff; }
    .nav li {  position: relative; }
    .nav > li { float: left;  }
    .nav > li > .parent { background-image: url("../images/downArrow.png"); background-repeat: no-repeat; background-position: right;}
    .nav > li > a { display: block;}
    .nav li ul { position: absolute;  left: -9999px;}
    .nav > li.hover > ul { left: 0; top: 0;}
    .nav li li.hover ul { left: 100%; top: 0;}
    .nav li li a { display: inline-block; /* For IE 7 and below, but anyone can see it */}
    .nav li li a { display: block; background: #2b2c2d; position: relative; z-index:100; border-top: 1px solid #1e1f20; line-height:1.6em; padding:0.25em 0.5em 0.25em 0.5em; text-transform:uppercase;}
    .nav li li li a { background:#353637; z-index:200; border-top: 1px solid #1e1f20;}
    .nav li li a:hover { background: #1e1f20; } 
```

我一直在搜索，直到我脸色发青，但找不到原因？？？？？？？？？？？？

# c# - System.Collections.ArrayList 的替代方案是什么？

> ID：13560206
> 
> 赞同：3
> 
> 时间：2012-11-26T07:11:12.030
> 
> 标签：c#, .net, data-structures, .net-2.0

我被要求修改前段时间为 Windows 窗体应用程序编写的代码。程序员用`ArrayList`得很厉害。我认为通用列表与数组列表相比效率更高，并计划使用`List<T>`我想知道是否还有其他可能值得考虑的替代方案来重写代码。我在.net 2.0 上工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T07:13:21.813

如果您在 .NET 2 中工作，那么您将无法使用 .NET 4 中的任何并发集合，这几乎只是留下`List<T>`“有点像`ArrayList`. 的集合”（即使在并发集合，没有直接的等价物 - 并且您应该只在您实际预期并发访问时才使用并发集合。）

有`Stack<T>`和`Queue<T>`，以及- 但就你可以用它们做什么而言，`LinkedList<T>`所有这些都有些不同。`ArrayList`当然，如果您不需要随机访问，它们值得考虑。

*除非*您当前在`ArrayList`. 你*可以*期待的是更清晰的代码。更少的演员表，更少的关于收藏内容的不确定性等。

如果您可以选择在不久的将来随时升级到 .NET 3.5，那么您就可以访问 LINQ，这在处理集合时非常有用*。*相对较少的新集合类型，但表达对它们的操作的方式要简单得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T08:08:31.273

**更新：**

对于从头/尾添加/删除，最好使用`LinkedList<T>`，但是如果您可以确定集合的确切最大容量并且大小将接近容量，那么使用它可能会更好`Queue<T>`（因为在内部它是数组，当大小达到容量时重新分配）。使用 Queue，您将不会获得 LinkedList 节点带来的内存开销。

**原文：** 来自 MSDN：`The List<T> class is the generic equivalent of the ArrayList class.` 请仔细阅读`List<T>` [性能注意事项](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)部分。你应该使用什么取决于如何使用 ArrayList？是随机访问还是从头/尾添加/删除？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T07:17:10.820

尝试[SortedList](http://msdn.microsoft.com/en-us/library/ms132319%28v=vs.80%29.aspx)和[Collection](http://msdn.microsoft.com/en-us/library/system.collections%28v=vs.80%29.aspx)。两者都受 .NET Framework 2.0 支持

# php - 如何在没有哈希或 cookie 的情况下保存表单信息？

> ID：13560209
> 
> 赞同：0
> 
> 时间：2012-11-26T07:11:22.643
> 
> 标签：php, database

我想在访客注册或以用户身份登录之前将信息保存在表单中。问题是我将信息保存在浏览器的会话中，所以如果访问者在注册后关闭了浏览器，那么我们就会丢失表单信息。注册需要电子邮件验证，所以很多时候用户可能会关闭窗口并稍后验证他的帐户。我知道另一种方法是使用哈希，但是如果访问者已经是用户，填写表格，然后登录他的帐户，我该怎么办？在这种情况下我不能使用哈希，cookie 也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:25:37.930

我认为正确的方法是将信息保存到数据库中并生成确认码并将其发送给用户。

您需要`ConfirmationCode`，`Confirmed`数据库字段来检查用户状态。

# networking - 在 2 台计算机之间创建基于 USB 电缆的连接

> ID：13560212
> 
> 赞同：1
> 
> 时间：2012-11-26T07:11:29.000
> 
> 标签：networking, usb, linux-device-driver

我有 2 台 linux 电脑。为了安全起见，我想在它们之间建立一个链接，然后编写一个库来通过这个连接发送/接收数据。我知道我们可以使用 USB 网线进行连接。但是我不确定是否可以在此链接上发送和接收数据，这取决于电缆制造商吗？我可以在不使用电缆驱动程序的情况下对库进行编程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:49:11.673

文章中描述的“电缆”不仅仅是一根电缆，正确的名称应该是 USB 主机-主机桥控制器，它由[Prolific](http://www.prolific.com.tw/US/index.aspx)设计和制造的芯片- PL 2501 供电。它也在文章中进行了描述。

正如大卫施瓦茨用哑电缆（只有电线）所说的那样，您无法在两台 PC 之间建立链接，因为 USB 是主/从总线，其中一个设备是从设备，其他设备是主机。PC 设计为始终作为主机（主机）。

响应是您无法使用哑 USB 电缆在两台 PC 之间建立链接或进行网络连接。您只能使用本文中描述的桥接器来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T07:12:53.897

您不能使用 USB 电缆连接两台具有标准 USB 接口的计算机。计算机上的标准 USB 接口是*主机*接口，您只能将主机连接到设备，而不能连接另一台主机。

# routes - 如何使用 jboss 运营网络监控骆驼路线？

> ID：13560213
> 
> 赞同：0
> 
> 时间：2012-11-26T07:11:37.383
> 
> 标签：routes, monitoring, rhq

我是新手`SERVICEMIX`和`JBoss Operations Network`（乔恩）。

我已经`JON`成功配置了服务器和代理，服务组合。

但是我如何`camel routes`在`JON`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:42:39.627

你需要一个用于 JBoss ON 的插件，它允许监控路由。我认为这可能在未来可用（2012 年 12 月/2013 年 1 月——运气好的话）。

目前最好的办法是使用 RHQ / JBoss ON 的[通用 JMX 插件](http://management-platform.blogspot.de/2008/11/monitoring-custom-jmx-mbeans-with-jopr.html)并通过 Jmx 监控它们。另请参阅[此链接](http://www.consulting-notes.com/2010/08/managing-camel-routes-with-jmx-apis.html)。

# java - 在java中访问网络上的文件

> ID：13560214
> 
> 赞同：0
> 
> 时间：2012-11-26T07:11:43.610
> 
> 标签：java, mysql, networking

我正在做一个有两个不同部分的项目。这是一个电子投票系统，所以有选民投票的部分，还有管理员可以进行更改的部分，例如添加新职位、候选人等。我将这两个部分放在两个不同的项目文件夹中，分别称为客户端和服务器。每个候选人都有他们图片的 URL，该 URL 也存储在服务器计算机上，应根据选择的候选人显示给客户端。我遇到的问题是如何将图片从服务器读取到客户端应用程序中。有关存储文件的最佳位置的任何提示，以便我可以将服务器名称作为参数传递给客户端，并且它能够检索文件。

该应用程序使用 MySQL，到目前为止，我假设数据库服务器与应用程序服务器相同。

另外，我想知道将文件存储在数据库本身中的可能性，如果是这样，这在速度方面有多实用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:20:21.500

单点信息很有帮助 - 如果可能，请将图片放入数据库中。如果你做得对，与其他客户端-服务器通信相比，不会有更多的性能损失。如果客户端继续运行，您可以缓存图片。

我还没有理解两个文件夹的事情。服务器文件夹必须同步到客户端？为什么？你为什么不把想法也存储在数据库中的一个新位置呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:21:28.440

您可以使用 mySQL 数据库，但它的设计目的不是因为它可能会很慢，您可以将**MongoDB 与 GridFS 一起**使用，或者使用某种文件存储库，例如**Apache Jackrabbit**。

# javascript - 尝试抽象 WebAudio API xhr 请求的部分时，无法将 DOM 元素传递给 Javascript 中的构造函数

> ID：13560218
> 
> 赞同：0
> 
> 时间：2012-11-26T07:12:03.190
> 
> 标签：javascript, dom, web-audio-api

我的问题是这个。当我在下面的**audioBoing 函数**中添加一个参数，然后将相同的参数放在**getElementById**字符串中时，该函数不起作用。我收到一个错误，显示**未捕获的类型错误，无法调用 null 的方法“AddEventListener”**

下面的功能工作正常。我重写了它下面的函数以反映我正在尝试做的事情。最终，我试图抽象出函数的很大一部分，这样我就可以插入参数并运行它，而不必每次为它存储/启动的每个声音都重写它。

```
var playAudioFileOneDrumOneBig = function () {
var source = context.createBufferSource();
source.buffer = savedBufferOne;
source.connect(delay.input);
delay.connect(convolver.input);
convolver.connect(context.destination);
source.noteOn(0); // Play sound immediately
};

function audioBoing()  
var xhr = new XMLHttpRequest();
xhr.open('get', 'audio/F.mp3', true);
xhr.responseType = 'arraybuffer';
xhr.onload = function () {
        context.decodeAudioData(xhr.response,
             function(incomingBuffer1) {
                 savedBufferOne = incomingBuffer1;
                 var noteOneDrumOneBig = document.getElementById("noteOneDrumOneBig"); 
                 noteOneDrumOneBig.addEventListener("click", playAudioFileOneDrumOneBig , false);
             }
        );
};
xhr.send();
};

audioBoing(); 
```

**重写不工作**

```
function audioBoing(yay) {      //added yay

this.yay=yay;                 // defined yay

var xhr = new XMLHttpRequest(); 
xhr.open('get', 'audio/F.mp3', true);
xhr.responseType = 'arraybuffer';
xhr.onload = function () {
        context.decodeAudioData(xhr.response,
             function(incomingBuffer1) {                  
                 savedBufferOne = incomingBuffer1;    
                 var noteOneDrumOneBig = document.getElementById(yay);           //passed yay
                 noteOneDrumOneBig.addEventListener("click", playAudioFileOneDrumOneBig , false);   //error happens here
             }
        );
};
xhr.send();
};

audioBoing(noteOneDrumOneBig); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:17:58.807

您没有引用传递给的字符串`audioBoing`

```
audioBoing("noteOneDrumOneBig"); 
```

# android - Twitter 与授权的集成问题

> ID：13560219
> 
> 赞同：1
> 
> 时间：2012-11-26T07:12:12.947
> 
> 标签：android, twitter, authorization

我做了很多谷歌搜索并将 Twitter 集成到我的应用程序中。但我被困在某一点上。在我找到并创建的所有其他示例中，我都面临同样的问题。

我得到了一个 7 位数字，并告诉我必须返回到我在[http://dev.twitter.com](http://dev.twitter.com)创建的应用程序，然后输入提供的密码以完成授权过程。

没有这个，我无法在 Twitter 上通过我的应用发推文。现在我尝试在 Twitter 开发者帐户中访问应用程序，但我找不到可以放置号码的地方。

![在此处输入图像描述](../Images/0d7e46da97682966ed588cb8d66f5659.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-29T05:27:29.000

当我提供空的回调 url 时，我也遇到了同样的问题。您需要在[http://dev.twitter.com/apps/xyz](http://dev.twitter.com/apps/xyz) 帐户中创建回调 url 并创建回调 url。登录时使用该回调 url

# android - Android重新布局问题

> ID：13560220
> 
> 赞同：0
> 
> 时间：2012-11-26T07:12:14.880
> 
> 标签：android, layout

请帮帮我

我的 xml 布局是这样的

```
<LinearLayout width=fill height=wrap orient=horizontal>
  <LinearLayout width=0 height=wrap weight=1>...</>
  <LinearLayout width=0 height=wrap weight=1>...</>
  <LinearLayout width=0 height=wrap weight=1>...</>
  <LinearLayout width=wrap height=wrap weight=0>...</>
</LinearLayout> 
```

这个充气`main.xml`的正是我所需要的——四组均匀分布在屏幕上。

但是，当我使用 [例如] 第二个子布局可见性启动活动`GONE`并`VISIBLE`在运行时进行时，整个根/父布局看起来非常糟糕。[来自子布局的] 子视图相互混淆，看起来他们的位置没有重新计算以考虑到新的`linearlayout`变得可见。

`requestLayout()`并`forceLayout()`没有帮助。

我怎样才能让根布局做与活动刚开始时一样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:56:59.347

```
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:weightSum="4">

        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1">........</LinearLayout>

        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1">........</LinearLayout>

        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1">........</LinearLayout>

        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1">........</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:49:27.773

毕竟我得到它的作品。现在所有更新都正确，尽管我认为这不是真正的解决方案。我只是将重新计算布局可见性的代码移动到`onWindowFocusChanged`回调并`android:weightSum`手动设置代码。相信`onSizeChanged`回调也可以提供帮助。

# android - GPS使用标准方法获取纬度经度？

> ID：13560223
> 
> 赞同：1
> 
> 时间：2012-11-26T07:12:24.697
> 
> 标签：android, gps

我正在尝试获取设备的位置，但代码

```
 Criteria criteria = new Criteria();
 String provider = myLocationManager.getBestProvider(criteria, false);

 myLocationManager.requestLocationUpdates(provider, 0, 0,
 myLocationListener);

 Location lastLocation = myLocationManager.getLastKnownLocation(provider); 
```

“lastLocation”返回空值。如果重新启动设备，则获得相同的 null。有没有其他标准方法可以从设备获取纬度和经度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:20:52.167

您将在您的`myLocationListener`. 之后（当调用侦听器时）`gatLastKnownLocation`将返回非空值。

[这](http://developer.android.com/guide/topics/location/strategies.html)是一个如何实现它的完整示例。

# opengl - glTexParameter() 之后的 glGetError() 总是返回 GL_INVALID_OPERATION

> ID：13560224
> 
> 赞同：0
> 
> 时间：2012-11-26T07:12:27.200
> 
> 标签：opengl

```
glTexParameterf(GL_TEXTURE_RECTANGLE, GL_TEXTURE_WRAP_T, GL_REPEAT);
GLuint err = glGetError(); 
```

如果我设置`GL_TEXTURE_RECTANGLE's GL_TEXTURE_WARP to GL_REPEAT, glGetError()`将永远返回

```
GL_INVALID_OPERATION.

: GL_TEXTURE_RECTANGLE -> GL_TEXTURE_2D  return GL_NO_ERRORS

: GL_REPEAT -> GL_CLAMP return GL_NO_ERRORS 
```

...如何解决这个问题？

我需要调用`glTexParameterf(GL_TEXTURE_RECTANGLE, GL_TEXTURE_WRAP_T, GL_REPEAT);

-- 对不起这篇文章...愚蠢.. TEXTURE_RECTANGLE 不允许 GL_REPEAT...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T07:15:30.370

我不知道所有细节，但简短的回答是：`GL_TEXTURE_RECTANGLE`不支持`GL_REPEAT`. 你必须找到另一个解决方案。

# android - 如何在android中关闭自定义对话框类

> ID：13560235
> 
> 赞同：1
> 
> 时间：2012-11-26T07:13:33.777
> 
> 标签：android, android-intent, android-activity, android-webview, android-alertdialog

我在关闭自定义对话框时遇到问题。我有两节课

```
 class 1->  AndroidHTMLActivity
 class 2->  CustomizeDialog 
```

在我的`AndroidHTMLActivity`我使用从javascript调用的java接口，在这个类中我调用`CustomizeDialog`

```
 public class AndroidHTMLActivity extends Activity {
     WebView myBrowser;
     setContentView(R.layout.main);
     myBrowser = (WebView)findViewById(R.id.mybrowser);
     myBrowser.addJavascriptInterface(new MyJavaScriptInterface(this), "AndroidFunction");

     myBrowser.getSettings().setJavaScriptEnabled(true);
     myBrowser.loadUrl("file:///android_asset/mypage.html");

        }
      public class MyJavaScriptInterface {
         Context mContext;

          MyJavaScriptInterface(Context c) {
           mContext = c;
       }
          public void openAndroidDialog(){

            CustomizeDialog customizeDialog = new CustomizeDialog(mContext);
            customizeDialog.show();
       } 
```

自定义对话框 .java

```
 public class CustomizeDialog extends Dialog   {
    Context ctx ;
    public CustomizeDialog(Context context) {
    super(context);
     ctx = context;
    }

    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);     
        setContentView(R.layout.test);
        MyThread downloadThread = new MyThread();
        downloadThread.start();
    }
   public class MyThread extends Thread {
        @Override
        public void run() {
        try {
       handler.post(new MyRunnable());
            }
        }
     }
    static public class MyRunnable implements Runnable {
        public void run() {

      // here i want to close this customized dialog

        }
      } 
```

这里我不能使用`finish()`方法，我想通过线程关闭自定义对话框。有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T11:00:53.153

好吧，我知道这个问题是过去被问过的，也许已经回答了，但没有分享正确的答案，但我仍然想分享这个，因为我也遇到了同样的问题。这就是我所做的。

首先创建基类并为对话框创建一个静态声明。

```
public class Dialogs {
    static Dialog dialog;

} 
```

第二是放置您的自定义对话框。

public void customDialog(Context context){ dialog = new Dialog(context);

```
 dialog.setContentView(R.layout.dialog_login);
    dialog.setTitle(title);
//... other parts here
    dialog.show();
} 
```

然后对话框关闭：

```
public static void dismissDialog(){
        dialog.dismiss();
    } 
```

并在另一个类上关闭当前的 customDialog 只需调用

```
Dialogs.dismissDialog(); 
```

而已。：） 希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-29T14:09:47.103

像这样用外部处理程序关闭它

```
App.HANDLER.post(new Runnable() {
                @Override
                public void run() {
                    dismiss();
                    cancel();
                }
            }); 
```

App 是一个应用程序类

# iphone - 如何在iOS中分割图像以去除背景并保留前景图片

> ID：13560239
> 
> 赞同：4
> 
> 时间：2012-11-26T07:13:53.417
> 
> 标签：iphone, ios, image-processing, opencv, opengl-es

我需要通过仅保留前景图像并删除图像的所有其他背景部分来为时尚应用程序分割图像，这应该类似于在各种照片编辑工具中删除图像背景的工具，请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T10:37:09.870

一般背景减法是一个未解决的问题，因此获得完美的结果将是一项巨大的努力。话虽如此，您可能会接近。以下是一些建议的途径：

1.  我猜你的应用程序会将衣服放在人身上，或者类似的东西。[运行一个人检测器](http://lear.inrialpes.fr/people/triggs/pubs/Dalal-cvpr05.pdf)，而不是获得完美的分割，删除除检测到的人之外的所有图像，并将基于部分的人体模型拟合到剩余的图像中。然后你就有了人的姿势，并且可以相应地进行图像处理。

2.  允许用户输入一些来自前景的笔画和一些来自背景的笔画，并在框架上运行基于[图形切割的图像分割算法](http://lvelho.impa.br/ip12/reading/ijcv06.pdf)。

3.  通过让用户不在您的视频流中开始您的流程。从中学习背景分布（从背景像素的简单直方图开始，还有更复杂的方案，但您需要一个起点）。然后，当用户进入场景时，创建一个包含不适合学习背景分布的[连接组件的二进制图像。](http://en.wikipedia.org/wiki/Connected-component_labeling)这并不完美，但您将开始看到接近二值图像的东西，其中白色像素是您的用户，黑色像素是背景。使用[形态学算子](http://en.wikipedia.org/wiki/Mathematical_morphology)连接任何稍微分开的大型连接组件，并对图像进行阈值化以消除图像中的小噪声，例如镜面物体和照明变化。

就像我说的（并在评论中提到），这不是一个简单的问题，但如果你花一些时间，你可以想出一个很好的近似值。我建议我列出的第三种方法。这是可以实现的，并且可以分解成小部分，这样您就可以知道何时取得了进展。

祝你好运！

# android - 当应用程序进入后台时如何停止可运行？

> ID：13560243
> 
> 赞同：12
> 
> 时间：2012-11-26T07:14:08.613
> 
> 标签：android, background, runnable

我正在尝试建立一个可以每 5 秒间隔加载广告的可运行文件（当然 5 秒太快了，这只是为了测试目的）

这是我的代码：

```
package com.admobsdk_dfp_handler;

import com.google.ads.*;
import com.google.ads.doubleclick.*;

import android.os.Bundle;
import android.os.Handler;
import android.app.Activity;
import android.view.Menu;
import android.widget.RelativeLayout;

public class AdMobSDK_DFP_Handler extends Activity {
    private DfpAdView adView;
    private Handler handler = new Handler();
    private Runnable runnable = new Runnable() {

        public void run() {
        adView.loadAd(new AdRequest());
        handler.postDelayed(this, 5000);
    }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_ad_mob_sdk__dfp__handler);

        adView = new DfpAdView(
                this,
                AdSize.BANNER,
                AD_UNIT_ID);

        RelativeLayout layout = (RelativeLayout) findViewById(R.id.mainLayout);

        layout.addView(adView);

        adView.loadAd(new AdRequest());

        handler.postDelayed(runnable, 5000);

    };

    @Override
    protected void onDestroy() {
        handler.removeCallbacks(runnable);
        super.onDestroy();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_ad_mob_sdk__dfp__handler,
                menu);
        return true;
    }

} 
```

如果我按主页按钮将应用程序隐藏到后台，runnable 会以 5 秒的间隔继续加载广告。

当应用程序隐藏到后台时，有什么方法可以停止运行？非常感谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-26T07:19:00.510

只需使用`onPause()`

当活动进入后台但尚未（尚未）被杀死时，作为活动生命周期的一部分调用

```
@Override
protected void onPause() {
     handler.removeCallbacks(runnable);
     super.onPause();
} 
```

选修的

如果要恢复该可运行文件。只需覆盖`onResume()`回调

```
@Override
protected void onResume()
{
      handler.postDelayed(runnable, 5000);
      super.onResume();
} 
```

删除`handler.postDelayed(runnable, 5000);`也`onCreate()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T07:24:48.440

`onPause()` `onStop()`你可以放在那里的功能`handler.removeCallbacks(runnable);`

您可以从这里获取更多信息[查看活动生活圈](http://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:21:32.387

当应用程序进入后台时调用 onPause()。删除 onPause() 中的可运行文件

```
protected void onPause() {
     handler.removeCallbacks(runnable);
     super.onPause();
} 
```

# iphone - 如何在 iphone 中保存或捕获图像时降低图像分辨率和内存大小

> ID：13560244
> 
> 赞同：2
> 
> 时间：2012-11-26T07:14:30.407
> 
> 标签：iphone, objective-c, uiimageview, uiimage, uiimagepickercontroller

在我的**联系人应用程序中**，我使用图像视图来显示联系人图像，

在此过程中，用户在保存数据的同时，还可以*保存联系人图片（字符串形式，图片文件名）*。

我复制沙箱（文档目录）中的图像并保存图像的文件名

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo
{

            NSString *DirectoryPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

            [[NSUserDefaults standardUserDefaults] setValue:storedPicsDict.contactImage forKey:@"oldContactPic"];

            //To SET the NEw IMAGE images from directory path
            CFUUIDRef uuid = CFUUIDCreate(NULL);
            CFStringRef generatedUUIDString = CFUUIDCreateString(NULL, uuid);
            CFRelease(uuid);
            NSString* hashKey = [(NSString*)generatedUUIDString autorelease];
            self.ContactImageFilePath = [NSString stringWithFormat:@"%@/%@.png",DirectoryPath,hashKey];

            storedPicsDict.contactImage = self.ContactImageFilePath;
            [contactPicture setImage:image forState:UIControlStateNormal];

            isNewContactImage = true;
      }

      [picker dismissModalViewControllerAnimated:YES];
} 
```

相应的保存图像将显示在联系人信息中。

但是，*当我保存的图像超过 6/7 时，它会导致内存警告，并且应用程序会崩溃/变慢。**

所以我需要用 LOW RESOUTION 和 LOW MEMORY SIZE 保存图像，

怎么可能，谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T08:01:51.840

1>以jpeg格式保存图像，以减小图像大小

```
NSData *imgData = UIImageJPEGRepresentation(your_UIImage_to_save, 0.5);
[imgData writeToFile:path_of_doc_dir_with_image_name atomically:YES]; 
```

2>

如果要降低图像的质量和大小，可以使用此代码

```
CGSize newSize=CGSizeMake(50,50); // I am giving resolution 50*50 , you can change your need
UIGraphicsBeginImageContext(newSize);
[image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

希望对你有帮助..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T07:55:51.747

用这个怎么样

```
UIImage *small = [UIImage imageWithCGImage:original.CGImage scale:0.25     orientation:original.imageOrientation]; 
```

并将较小的图像保存到 tmp 文件路径以供上传。图片必须是.png吗？否则，您也可以尝试 UIImageJPEGRepresentation 来降低图像的质量。

# c# - 如何使用 C# 在 asp.net 中生成静态 html 文件？

> ID：13560245
> 
> 赞同：-4
> 
> 时间：2012-11-26T07:14:30.650
> 
> 标签：c#, html

我需要使用 C# 在 asp.net 中生成静态 html 文件。我知道PHP应该有生成静态html文件的功能，如何用C#做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:19:11.040

检查以下链接：

[ASP.NET C# 为页面正确生成 HTML](https://stackoverflow.com/questions/1195306/asp-net-c-sharp-properly-generating-html-for-page)

[ASP.NET：动态生成 HTML，如何？](https://stackoverflow.com/questions/1409257/asp-net-dynamicly-generating-html-how-to)

# javascript - 限制按 Enter 键

> ID：13560249
> 
> 赞同：1
> 
> 时间：2012-11-26T07:14:51.063
> 
> 标签：javascript, jquery, asp.net

> **可能重复：**
> [防止使用回车键提交表单](https://stackoverflow.com/questions/1563062/prevent-form-submission-with-enter-key)

在我的项目中，我试图禁用该`Enter`键并提供我自己的输入键功能。（*我还没有做过*）

下面的功能正在工作，但是每当我`Enter`在字段内按下键时`TextBox`，内容就会添加到`div`（根据需要）并且在`TextBox`字段中，输入键功能正在发生（我不想要）。如何停止输入键功能在`TextBox`字段上运行？为了清楚地理解，请参阅我在下面代码中的评论。

**.aspx 文件**（*工作*）

```
<asp:TextBox ID="msg" BackColor="Transparent" runat="server" BorderStyle="None"
                        TextMode="MultiLine" /> 
```

* * *

**jQuery**（*工作*）

```
$('#msg').keypress(function (e) {
            if (e.which == 13) {

                //Shows the TextBox text in a Div, which I want to.
                chat.server.send($('#msg').val());  //also going one step down in TextBox field which I dont want to.

                $('#msg').val(''); //Clearing the Text in TextBox field

                //what should I add here to make the Enter Key work only for the DIV?
            }
        }); 
```

[来源](https://stackoverflow.com/a/979686/1577396)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T07:17:36.463

试试`e.preventDefault()` 这样

```
$('#msg').keypress(function (e) {
            if (e.which == 13) {
                e.preventDefault();
                //Shows the TextBox text in a Div, which I want to.
                chat.server.send($('#msg').val());  //also going one step down in TextBox field which I dont want to.

                $('#msg').val(''); //Clearing the Text in TextBox field

                //what should I add here to make the Enter Key work only for the DIV?
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T11:30:20.497

也尝试使用 C# 在 C# 中进行验证。只需编写以下函数并调用提供参数的函数（如下所述）

```
public void disable_TextBox_Enter(Control parent)
    {
        foreach (Control c in parent.Controls)
        {
            if ((c.Controls.Count > 0))
            {
                disable_TextBox_Enter(c);
            }
            else
            {
                if (c is TextBox)
                {
                    ((TextBox)(c)).Attributes.Add("onkeydown", "return (event.keyCode!=13);");

                }
                if (c is GridView)
                {

                    ((GridView)(c)).Attributes.Add("onkeydown", "return (event.keyCode!=13);");

                }

            }
        }
    } 
```

你可以像这样调用函数：

```
disable_TextBox_Enter(this); 
```

# javascript - 是否可以在 JavaScript 中获取父类中的元素？

> ID：13560253
> 
> 赞同：2
> 
> 时间：2012-11-26T07:15:14.673
> 
> 标签：javascript, inheritance

```
function A() {
    this.a = 'this is a';
    var b = 'this is b';
}

function B() {
    var self = this;
    this.c = 'this is c';
    var d = 'this is d';

    // a: undefined, b: undefined, c: this is c, d: this is d
    $("#txt1").text('a: ' + A.a + ', b: ' + b + ', c: ' + this.c + ', d: ' + d);

    C();

    function C() {
        // this.c is not defined here
        // a: undefined, b: undefined, c: this is c, d: this is d
        $("#txt2").text('a: ' + A.a + ', b: ' + b + ', c: ' + self.c + ', d: ' + d);
    }
}
B.prototype = new A();

var b = new B();
​ 
```

B类和内部函数C是否有可能获得变量`a`和`b`？

小提琴文件在这里：http: [//jsfiddle.net/vTUqc/5/](http://jsfiddle.net/vTUqc/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:18:03.130

你可以进入`a`，`B`使用`this.a`，因为原型`B`是 的实例`A`。您也可以`a`使用：`C``self.a`

```
function A() {
    this.a = 'this is a'; // This is accessible to any instance of A
    var b = 'this is b';  // This is not accessible outside the scope of the function
}
function B() {
    var self = this;

    alert(this.a); // Alerts 'this is a'

    C(); // Also alerts 'this is a'

    function C() {
        alert(self.a);
    }
}
B.prototype = new A();
new B(); 
```

`b`另一方面，您无法直接获得。如果要访问它，可以使用返回其值的函数：

```
function A() {
    this.a = 'this is a';
    var b = 'this is b';
    this.returnb = function(){
        return b;
    }
} 
```

现在`b`可以访问`A`via的实例`(new A()).returnb()`

# iphone - 在 Iphone +[UIActivityIndi catorView _loadResourcesForStyle:] 中显示泄漏？

> ID：13560256
> 
> 赞同：2
> 
> 时间：2012-11-26T07:15:36.120
> 
> 标签：iphone, ios, ipad

我有一个 Iphone 应用程序，在我进行分析时，我在

> +[UIActivityIndi​​catorView _loadResourcesForStyle:]在 UIkit

但是在我的应用程序中，当我搜索时，没有这样的方法。我正在使用 MBProgressbarHUD 类为加载视图设置动画。但我想知道它发生在哪里。有趣的是，它不会一直出现。有时只是，我真的很想知道这个错误可能出现的可能性。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:52:49.860

好吧，它肯定发生在使用`UIActivityIndicatorView`.

看起来特定线路是您无权访问的专用线路，但它可能是附近的其他东西导致它。

你在用ARC吗？

如果不是，您可能会创建一个`UIActivityIndicatorView`然后不在 ivar 中保存对它的引用或不释放它等...

您能否提供一些关于您使用`UIActivityIndicatorView`.

# java - 在 Jpanel 上绘制多个形状时的歧义

> ID：13560264
> 
> 赞同：1
> 
> 时间：2012-11-26T07:16:27.807
> 
> 标签：java, swing

下面的代码有几个问题：

1）多边形连接最后一个点和第一个点本身，不应该自己做，但用户应该绘制它。

2）单击其他形状后，多边形线消失了。

```
package Circles;

import java.awt.*;
import java.awt.event.*;
import java.awt.geom.Ellipse2D;
import java.awt.geom.Line2D;
import java.awt.geom.Path2D;

import javax.swing.*;
import java.awt.image.BufferedImage;
import java.util.ArrayList;
import java.util.Iterator;

//////////////////////////////////////////////////////////////PaintDemo
class PaintDemo2 {
 //============================================================= main
 public static void main(String[] args) {
     PaintWindow2 window = new PaintWindow2();
     window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
     window.setVisible(true);
 }//end main
}//endclass PaintDemo

@SuppressWarnings("serial")
////////////////////////////////////////////////////////////PaintWindow
class PaintWindow2 extends JFrame {
 PaintPanel2 canvas = new PaintPanel2();
 //====================================================== constructor
 public PaintWindow2() {
     //--- create the buttons
     JButton circleButton = new JButton("Circle");
     circleButton.addActionListener(new ActionListener() {
         public void actionPerformed(ActionEvent e) {
             canvas.setShape(PaintPanel2.CIRCLE);
         }});
     JButton rectangleButton = new JButton("Rectangle");
     rectangleButton.addActionListener(new ActionListener() {
         public void actionPerformed(ActionEvent e) {
             canvas.setShape(PaintPanel2.Ellipse);
         }});

     JButton polyButton = new JButton("Polygon");
     polyButton.addActionListener(new ActionListener() {
         public void actionPerformed(ActionEvent e) {
             canvas.setShape(PaintPanel2.POLY);
         }});

     //--- layout the buttons
     JPanel buttonPanel = new JPanel();
     buttonPanel.setLayout(new GridLayout(2, 1));
     buttonPanel.add(circleButton);
     buttonPanel.add(rectangleButton);
     buttonPanel.add(polyButton);

     //--- layout the window
     Container content = this.getContentPane();
     content.setLayout(new BorderLayout());
     content.add(buttonPanel, BorderLayout.WEST);
     content.add(canvas     , BorderLayout.CENTER);
     this.setTitle("Paint Demo");
     this.pack();
 }//end constructor
}//endclass PaintWindow

///////////////////////////////////////////////////////////// PaintPanel2
@SuppressWarnings("serial")
class PaintPanel2 extends JPanel implements MouseListener, 
                                        MouseMotionListener {
 //--- Public constants used to specify shape being drawn.          
 public static final int NONE      = 0;
 public static final int LINE      = 1;
 public static final int Ellipse = 2;
 public static final int CIRCLE    = 3;
 public static final int POLY    = 4;

 //--- Variables to store the current figure info
 private int _shape = NONE;
 public int getShape() {
    return _shape;
}

 private int _currentStartX = 0;  // where mouse first pressed
 private int _currentStartY = 0;
 private int _currentEndX   = 0;  // where dragged to or released
 private int _currentEndY   = 0;

 //--- BufferedImage to store the underlying saved painting.
 //    Will be initialized first time paintComponent is called.
 private BufferedImage _bufImage = null;
 private boolean polygonIsNowComplete = false;

 //--- Private constant for size of paint area.
 private static final int SIZE = 600; // size of paint area

 private final Point trackPoint = new Point();
 private Path2D currentShape;
 private ArrayList<Path2D> lstPloys  = new ArrayList<Path2D>();;
 private Point lastPoint;
 private Point currentPoint;
 @SuppressWarnings("rawtypes")
private ArrayList points = new ArrayList();

 //====================================================== constructor
 public PaintPanel2() {
     setPreferredSize(new Dimension(SIZE, SIZE));
     setBackground(Color.white);
     //--- Add the mouse listeners.
     this.addMouseListener(this); 
     this.addMouseMotionListener(this);
 }//endconstructor

 //========================================================= setShape
 public void setShape(int shape) {
     //--- Provided so users can set the shape.
     _shape = shape;
 }//end setShape

 //=================================================== paintComponent
 public void paintComponent(Graphics g) {
     super.paintComponent(g);

     Graphics2D g2 = (Graphics2D)g;  // downcast to Graphics2D
     if (_bufImage == null) {
         //--- This is the first time, initialize _bufImage
         int w = this.getWidth();
         int h = this.getHeight();
         _bufImage = (BufferedImage)this.createImage(w, h);
         Graphics2D gc = _bufImage.createGraphics();
         gc.setColor(Color.white);
         gc.fillRect(0, 0, w, h); // fill in background
     }
     g2.drawImage(_bufImage, null, 0, 0);  // draw previous shapes

     drawCurrentShape(g2);
 }//end paintComponent

 //================================================= drawCurrentShape
 private void drawCurrentShape(Graphics2D g2) {
     //--- Draws current shape on a graphics context, either
     //    on the context passed to paintComponent, or the
     //    context for the BufferedImage.
     switch (_shape) {
         case NONE  :
                  break;

         case CIRCLE:
                  g2.drawOval(_currentStartX, _currentStartY,
                              _currentEndX - _currentStartX, 
                              _currentEndY - _currentStartY);
                  break;

         case Ellipse:
                  g2.draw(new Ellipse2D.Double(_currentStartX, _currentStartY,
                          _currentEndX - _currentStartX, 
                          _currentEndY - _currentStartY));
                  break;

         case POLY:

                drawPolyGon(g2);
                break;

         default:  // should never happen
                  g2.drawString("Huh?", 10, 20);
                  break;
     }
 }//end paintComponent

private void drawPolyGon(Graphics2D g2) {

    g2.create();
    if (lastPoint != null) {
         g2.setColor(Color.RED);
         g2.fillOval(lastPoint.x - 2, lastPoint.y - 2, 4, 4);
    }
    if (currentShape != null) {
         g2.setColor(Color.RED);
         g2.draw(currentShape);
         if (lastPoint != null && currentPoint != null) {
              g2.setColor(new Color(255, 0, 0, 64));
              g2.draw(new Line2D.Float(lastPoint, currentPoint));

         }
    }
    g2.setColor(Color.BLACK);
    for (Path2D shape : lstPloys) {
         g2.draw(shape);
    }
    g2.dispose();

    // TODO Auto-generated method stub

}

//===================================================== mousePressed
 public void mousePressed(MouseEvent e) {
    _currentStartX = e.getX(); // save x coordinate of the click
    _currentStartY = e.getY(); // save y
    _currentEndX   = _currentStartX;   // set end to same pixel
    _currentEndY   = _currentStartY;
 }//end mousePressed

 //===================================================== mouseDragged
 public void mouseDragged(MouseEvent e) {

  _currentEndX = e.getX();   // save new x and y coordinates
    _currentEndY = e.getY();
     this.repaint(); 
     // show new shape
 }//end mouseDragged

 //==================================================== mouseReleased
 public void mouseReleased(MouseEvent e) {
     // This will save the shape that has been dragged by
     // drawing it onto the bufferedImage where all shapes
     // are written.
    _currentEndX = e.getX(); // save ending coordinates
     _currentEndY = e.getY();

     //--- Draw the current shape onto the buffered image.
     Graphics2D grafarea = _bufImage.createGraphics();
     drawCurrentShape(grafarea);

     this.repaint();
 }//end mouseReleased

 public void mouseMoved   (MouseEvent e) {

     if (currentShape != null) {
          currentPoint = e.getPoint();
          repaint();
     } else {
          currentPoint = null;
     }

 }
 public void mouseEntered (MouseEvent e) {}
 public void mouseExited  (MouseEvent e) {}
public void mouseClicked (MouseEvent e) {
     if (e.getButton() == MouseEvent.BUTTON1) {
         if (e.getClickCount() == 1) {
              Point p = e.getPoint();
              lastPoint = p;
              if (currentShape == null) {
                   currentShape = new Path2D.Float();
                   currentShape.moveTo(p.x, p.y);
              } else {
                   currentShape.lineTo(p.x, p.y);
              }
              repaint();
         } else if (e.getClickCount() == 2) {
              currentShape.closePath();
              lstPloys.add(currentShape);
              currentShape = null;
              lastPoint = null;
              repaint();
         }
    }

 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T07:35:17.500

绘制周期是无状态的，即图形的内容不会从一个周期传递到另一个周期。

您需要在每个绘制周期重新绘制组件的全部内容。

您尝试实现双缓冲区解决方案，但不是传递缓冲区的图形上下文，而是传递了绘制系统提供给您的图形内容。如果您将缓冲区的图形上下文传递给该`drawCurrentShape`方法，它可能会解决您的问题（并消除缓存所有形状的需要）

**更新**

因此，在您的组件`paintComponent`方法中`PaintPanel2`，您正在创建一个`BufferedImage`，但您没有将组件绘制到它...

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);

    Graphics2D g2 = (Graphics2D)g;  // downcast to Graphics2D
    if (_bufImage == null) {
        //--- This is the first time, initialize _bufImage
        int w = this.getWidth();
        int h = this.getHeight();
        _bufImage = (BufferedImage)this.createImage(w, h);
        Graphics2D gc = _bufImage.createGraphics();
        gc.setColor(Color.white);
        gc.fillRect(0, 0, w, h); // fill in background
    }
    g2.drawImage(_bufImage, null, 0, 0);  // draw previous shapes

    drawCurrentShape(g2);
}//end paintComponent 
```

相反，您应该使用缓冲图像中的图形上下文`drawCurrentShape`

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);

    Graphics2D g2 = (Graphics2D)g;  // downcast to Graphics2D
    Graphics2D gc = null;
    if (_bufImage == null) {
        //--- This is the first time, initialize _bufImage
        int w = this.getWidth();
        int h = this.getHeight();
        _bufImage = (BufferedImage)this.createImage(w, h);
        gc = _bufImage.createGraphics();
        gc.setColor(Color.white);
        gc.fillRect(0, 0, w, h); // fill in background
    } else {
        gc = _bufImage.createGraphics();
    }
    drawCurrentShape(g2);
    gc.dispose();

    g2.drawImage(_bufImage, null, 0, 0);  // draw previous shapes
}//end paintComponent 
```

应该注意的是，这可能会产生一些其他问题，但这个概念是合理的。

就个人而言，我更喜欢保留`List`所有形状并重新绘制它们。这使您能够选择、移动、删除、重新排序和更改程序中的所有形状，并提供一种历史；）

# mysql - MYSQL - 从大表的第二行中选择数据

> ID：13560266
> 
> 赞同：4
> 
> 时间：2012-11-26T07:16:31.860
> 
> 标签：mysql, optimization, select, row

我有一个外部 3rd 方程序将数据库实时导出到 mysql，我想显示用于报告的数据。所以，我不能改变结构，因为它是实时同步的。

表结构是这样的

```
ID | Date       | Transaction
-----------------------------
12 | 2012-11-01 | 200
12 | 2012-11-02 | 250
12 | 2012-11-03 | 150
12 | 2012-11-04 | 1000
12 | 2012-11-05 | 225
....
13 | 2012-11-01 | 175
13 | 2012-11-02 | 20
13 | 2012-11-03 | 50
13 | 2012-11-04 | 100
13 | 2012-11-05 | 180
13 | 2012-11-06 | 195 
```

数据非常大，而且每天都在变大。

我想做的是基于以下内容构建报告（视图表）：

```
ID | Date       | Transaction | Prev Day Transaction
----------------------------------------------------
12 | 2012-11-01 | 200         | 0
12 | 2012-11-02 | 250         | 200
12 | 2012-11-03 | 150         | 250
12 | 2012-11-04 | 1000        | 150
12 | 2012-11-05 | 225         | 1000
....
13 | 2012-11-01 | 175         | 0
13 | 2012-11-02 | 20          | 175
13 | 2012-11-03 | 50          | 20
13 | 2012-11-04 | 100         | 50
13 | 2012-11-05 | 180         | 100
13 | 2012-11-06 | 195         | 180 
```

我只是无法获得快速选择语句。目前原始数据已经是 283,120 行。它将每天增长 500 行。

我试过类似的东西：

```
SELECT *, (SELECT transaction FROM table as t2 WHERE t1.id=t2.id 
AND t1.date>t2.date ORDER BY t2.date DESC LIMIT 0,1)
FROM table AS t1 
```

它正在工作，但 select 语句非常慢。大多数时候，它会在手术过程中被切断。

我需要帮助的是一个非常快速的 sql 语句，稍后我可以使用它来构建视图表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T03:12:18.020

看到这个链接：[http ://sqlfiddle.com/#!2/54a5e/12](http://sqlfiddle.com/#!2/54a5e/12)

```
select t.id,t.cDate,t.cTrans
  ,(case when @pID=t.id then @pTran else 0 end) as preT 
  ,(@pID :=t.id) as `tID`,(@pTran := t.cTrans) as `tTrans` 
from tb_test_1 as t,(select @pID = 0, @pTran = 0) as t2
order by id,cDate; 
```

`tID`和`tTrans`列必须保留，不能在页面上显示。

请原谅我，因为我只会一点英语！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T07:40:38.583

试试这个查询 -

```
SELECT t1.*, COALESCE(t2.transaction, 0) Prev_Day_Transaction FROM trans t1
  LEFT JOIN (SELECT * FROM trans ORDER BY id, date DESC) t2
    ON t1.id = t2.id AND t1.date > t2.date
GROUP BY t1.id, t1.date;

+------+------------+-------------+----------------------+
| id   | date       | transaction | Prev_Day_Transaction |
+------+------------+-------------+----------------------+
|   12 | 2012-11-01 |         200 |                    0 |
|   12 | 2012-11-02 |         250 |                  200 |
|   12 | 2012-11-03 |         150 |                  250 |
|   12 | 2012-11-04 |        1000 |                  150 |
|   12 | 2012-11-05 |         225 |                 1000 |
|   13 | 2012-11-01 |         175 |                    0 |
|   13 | 2012-11-02 |          20 |                  175 |
|   13 | 2012-11-03 |          50 |                   20 |
|   13 | 2012-11-04 |         100 |                   50 |
|   13 | 2012-11-05 |         180 |                  100 |
|   13 | 2012-11-06 |         195 |                  180 |
+------+------------+-------------+----------------------+ 
```

将复合索引 (id, date) 添加到表中。

============================

```
ALTER TABLE mt4_daily
  ADD INDEX IX_mt4_daily_DATE (DATE);

ALTER TABLE mt4_daily
  ADD INDEX IX_mt4_daily (ID, DATE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T07:30:00.727

通过 select 语句将表分成几个部分，并使用 UNION Set 运算符将它们连接起来。由于所有集合运算符都是并行操作，因此您将非常快速地获取数据。您可以使用表中的唯一数字列来划分数据。例如

```
select * from tbl_x where col1%3=0 union
select * from tbl_x where col1%3=1 union
select * from tbl_x where col1%3=2 ... 
```

上面的sql查询分数据并行取数据

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T07:41:17.523

我会尝试这样编写查询：

```
SELECT
  tbl.ID,
  tbl.Date,
  tbl.Transaction,
  COALESCE(tbl1.Transaction,0) as PrevDay
FROM
  tbl left join tbl tbl1
  on tbl.ID = tbl1.ID
     and tbl.Date = tbl1.Date + INTERVAL 1 DAY 
```

（这只有在您确保表格包含所有日期时才有效，如果您错过了一天，第二天将始终显示 PrevDay 为 0，我不确定这是否是您需要的）。

**编辑：**即使缺少某些日子，我也会尝试这种可行的解决方案：

```
SELECT
  tbl.id,
  tbl.date,
  tbl.Transaction,
  COALESCE(tbl1.Transaction,0) as PrevDay
FROM
  (SELECT tbl.id, tbl.date as d1, max(tbl1.ddate) as d2
   FROM tbl LEFT JOIN tbl tbl1
        ON tbl.id = tbl1.id and tbl.date>tbl1.date
   GROUP BY tbl.id, tbl.date) t
  LEFT JOIN tbl on tbl.id = t.id and DATE(tbl.ddate) = DATE(t.d1)
  LEFT JOIN tbl tbl1 ON tbl1.id = t.id and DATE(tbl1.date) = DATE(t.d2) 
```

# ios - 使用用户权限 IOS 从收件箱读取/解析短信

> ID：13560267
> 
> 赞同：11
> 
> 时间：2012-11-26T07:16:34.317
> 
> 标签：ios, permissions, sms, inbox

我希望从应用程序中访问 SMS 收件箱。这是我目前理解的——

1.  由于隐私原因，标准 SDK 不允许访问 sms 数据库 [iphone 应用程序读取短信](https://stackoverflow.com/questions/3656723/iphone-app-reading-sms) 以及[如何以编程方式在 iPhone 上发送短信？](https://stackoverflow.com/questions/10848/how-to-programmatically-send-sms-on-the-iphone)

2.  由于隐私原因，该应用不得在后台运行

3.  一个应用程序无法访问另一个应用程序的数据，因为每个应用程序都在其沙箱中运行

4.  可以访问联系人列表（Whatsapp，例如） [https://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/100-Introduction/chapter_1_section_1.html](https://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/100-Introduction/chapter_1_section_1.html)

5.  这是/也许可以在越狱的 iPhone 上执行此操作 [如何在 iphonse sdk 上获取收件箱中的所有短信？](https://stackoverflow.com/questions/10223232/how-to-get-inbox-all-sms-on-iphonse-sdk)

我的问题是（在非越狱电话的情况下）-

1.  在应用程序中获得明确的用户权限后，是否可以从 SMS 收件箱访问消息？

2.  是否可以要求用户从应用程序内授予对选定用户（列出）的 SMS 消息的访问权限

3.  是否有一些解决方法可以让我的应用在应用内的用户许可下从选定用户那里读取这些消息？

万分感谢！最大限度

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T08:34:42.243

您对第 1-5 项的理解是正确的。

要回答您的问题：

1.  没有。没有 API 要求用户访问他们的 SMS 的权限，也没有公共 API/批准的方法来访问 SMS。
2.  不。
3.  不。

很抱歉成为坏消息的承担者。

# asp.net - Web服务性能优化

> ID：13560271
> 
> 赞同：1
> 
> 时间：2012-11-26T07:16:41.720
> 
> 标签：asp.net, asp.net-mvc, performance

场景：ASP.NET MVC Web 应用程序调用 Java Web 服务请求 2 年的数据。以下是来自 Web 服务的响应大小：

```
Request Count:   1
Bytes Sent:      937        (headers:396; body:541)
Bytes Received:  689,300        (headers:338; body:688,962) 
```

这大约需要 2 分钟。这会导致 ASP.NET 运行缓慢，从而导致用户感到沮丧。与 Java 人员交谈过，他们已尽最大努力优化性能。

有人可以帮助我优化对第三方的 Web 服务调用的最佳方法吗？以下是我做过但没有帮助的事情的清单：

1.  使用 ASYC 调用将 2 年的数据分解为 1 年。
2.  已要求 Java 人员减小消息大小，以使有效负载变小。

性能仍然没有提高。

如果我创建一个简单地请求 2 年数据并填充缓存的异步 VOID 方法，这会起作用吗？主要关心的是登录过程是否需要等待这个 VOID 方法完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:32:10.673

这种问题不容易从远程调试，但是你应该首先从测量你浪费大部分时间的地方开始。是不是在调用你处理的Java服务。将性能计数器添加到您的代码/或日志记录中，以查看哪里可以改进最多。接下来，您可以使用存根交换诸如 web 服务调用之类的部分，看看您的性能是否更好，现在您知道必须在哪里更改性能。

# algorithm - 最快的近似计数算法

> ID：13560272
> 
> 赞同：5
> 
> 时间：2012-11-26T07:16:45.290
> 
> 标签：algorithm, statistics, machine-learning, probability, graph-algorithm

获取输入文件或标准输出数据流的行数的近似计数的最快方法是什么。仅供参考，这是一个概率算法，我在网上找不到很多例子。

数据可能只是来自 csv 文件的 awk 脚本的一列或两列！可以说我想在其中一列上有一个 aprox groupby。我会使用数据库组，但行数超过 6-70 亿。我希望在 3 到 4 秒内获得第一个近似结果。然后在事先做出决定之后运行贝叶斯或其他东西。关于真正粗略的初始组数的任何想法？

如果您可以在 python 或 java 中提供算法示例，那将非常有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T23:34:37.183

如果您想计算总行数，@Ben Allison 的回答是一个好方法。既然你提到了贝叶斯和之前的，我会在那个方向添加一个答案来计算不同组的百分比。（请参阅我对您的问题的评论。我想如果您对总数有所了解，并且如果您想做一个`groupby`，估计不同组的百分比更有意义）。

## 递归贝叶斯更新：

我将首先假设您只有两个组（可以进行扩展以使其适用于多个组，请参阅后面的解释。），`group1`和`group2`.

对于您处理`m` `group1`的第一`n`行（行）中的 s，我们将事件表示为`M(m,n)`。显然你会看到`n-m` `group2`s 因为我们假设它们是仅有的两个可能的组。所以你知道给定( )`M(m,n)`百分比的事件的条件概率是由试验的二项分布给出的。我们试图以贝叶斯的方式进行估计。`group1``s``n``s`

二项式的共轭先验是 beta 分布。所以为了简单起见，我们选择`Beta(1,1)`作为先验（当然，你可以在这里为`alpha`和选择你自己的参数`beta`），它是 (0,1) 上的均匀分布。因此，对于这个 beta 分布，`alpha=1`和`beta=1`.

二项式 + beta 先验的递归更新公式如下：

```
if group == 'group1':
    alpha = alpha + 1
else:
    beta = beta + 1 
```

的后验`s`其实也是一个贝塔分布：

```
 s^(m+alpha-1) (1-s)^(n-m+beta-1)
p(s| M(m,n)) = ----------------------------------- = Beta (m+alpha, n-m+beta)
                      B(m+alpha, n-m+beta) 
```

[beta 函数](http://en.wikipedia.org/wiki/Beta_function)`B`在哪里。要报告估计结果，您可以依赖[分布的](http://en.wikipedia.org/wiki/Beta_distribution)均值和方差，其中：[`Beta`](http://en.wikipedia.org/wiki/Beta_distribution)

```
mean = alpha/(alpha+beta)
var = alpha*beta/((alpha+beta)**2 * (alpha+beta+1)) 
```

## 蟒蛇代码：`groupby.py`

因此，几行 python 来处理您的数据`stdin`并估计百分比`group1`将如下所示：

```
import sys

alpha = 1.
beta = 1.

for line in sys.stdin:
    data = line.strip()
    if data == 'group1':
        alpha += 1.
    elif data == 'group2':
        beta += 1.
    else:
        continue

    mean = alpha/(alpha+beta)
    var = alpha*beta/((alpha+beta)**2 * (alpha+beta+1))
    print 'mean = %.3f, var = %.3f' % (mean, var) 
```

## 样本数据

我向代码提供了几行数据：

```
group1
group1
group1
group1
group2
group2
group2
group1
group1
group1
group2
group1
group1
group1
group2 
```

## 近似估计结果

这是我得到的结果：

```
mean = 0.667, var = 0.056
mean = 0.750, var = 0.037
mean = 0.800, var = 0.027
mean = 0.833, var = 0.020
mean = 0.714, var = 0.026
mean = 0.625, var = 0.026
mean = 0.556, var = 0.025
mean = 0.600, var = 0.022
mean = 0.636, var = 0.019
mean = 0.667, var = 0.017
mean = 0.615, var = 0.017
mean = 0.643, var = 0.015
mean = 0.667, var = 0.014
mean = 0.688, var = 0.013
mean = 0.647, var = 0.013 
```

结果显示 group1 估计有 64.7% 到第 15 行处理（基于我们之前的 beta(1,1)）。您可能会注意到方差不断缩小，因为我们有越来越多的观察点。

## 多组

现在，如果您有超过 2 个组，只需将下划线分布从二项式更改为多项式，然后相应的[共轭先验](http://en.wikipedia.org/wiki/Conjugate_prior)将是 Dirichlet。其他一切你只需做类似的改变。

## 补充说明

您说您希望在 3-4 秒内进行粗略估计。在这种情况下，您只需对一部分数据进行采样并将输出提供给上述脚本，例如，

```
head -n100000 YOURDATA.txt | python groupby.py 
```

就是这样。希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T10:16:14.067

如果假设数据是 IID 是合理的（因此没有偏差，例如某些类型的记录出现在流的某些部分），那么只需进行二次抽样并按近似大小扩大计数。

假设前一百万条记录（这应该可以在几秒钟内处理）。它的大小是*x*个单位（MB、字符，无论你关心什么）。完整流的大小为*y*，其中*y* >> *x*。*现在，从样本x*中获取您关心的任何内容的计数，并简单地按因子*y* /*x* 对它们进行缩放以获得近似的完整计数。一个例子：您想大致了解在整个流中有多少条记录的第 1 列的值为*v 。*前一百万条记录的文件大小为 100MB，而总文件大小为 10GB。在前 100 万条记录中，有 150,000 条记录的价值为*v*对于第 1 列。因此，您假设在完整的 10GB 记录中，您将看到 150,000 * (10,000,000,000 / 100,000,000) = 15,000,000 具有该值。您对样本计算的任何统计数据都可以简单地按相同的因子进行缩放以产生估计值。

如果数据存在偏差，使得某些记录或多或少可能位于文件的某些位置，那么您应该从总集中随机（或均匀间隔）选择样本记录。这将确保一个公正的、有代表性的样本，但可能会产生更大的 I/O 开销。

# capitalization - text-transform：在 IE 中大写问题

> ID：13560275
> 
> 赞同：3
> 
> 时间：2012-11-26T07:16:54.000
> 
> 标签：capitalization, css

我的 css 属性有问题`text:transform`。当我将它设置为大写时，它在 IE7 和 IE8 中的行为不同。page[1] 的产品标题`apple tree 'Gala'`在其他浏览器中显示，而在 IE 中显示`apple tree 'gala'`。请注意引用后的“g”字母。我希望 'g' 在 IE 和其他浏览器中都是大写字母。

我需要做任何 hack 或额外的设置，让它在 IE 中工作吗？

[1] - [http://shop.shootcare.co.uk/pomonafruits/find/apple-tree-gala-apl026?path=&ref=mall](http://shop.shootcare.co.uk/pomonafruits/find/apple-tree-gala-apl026?path=&ref=mall)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T08:33:50.690

该属性`text-transform`在 CSS 规范中的定义严重不足。它的[CSS 2.1 定义](http://www.w3.org/TR/CSS21/text.html#propdef-text-transform)甚至没有指定“单词”的含义。在计算机上下文中，作为文本单位的“单词”仅表示非空白字符的最大序列，因此在您的情况下，包含撇号的字符串“gala”将是一个单词，其第一个字符是撇号。所以可以说 IE 在这里是最合适的，但其他浏览器采用了其他解释。

[CSS3 文本](http://www.w3.org/TR/css3-text/#text-transform0)草案建议更改或澄清含义，以便第一个字母*（*实际上意味着“字母或数字”！）会受到影响。所以这将使'gaia'中的g大写。但它仍然没有定义“词”，例如“尖端”是两个词还是一个词，或者“摇滚”有多少个词。

结论是几乎任何大写单词的方法都比 CSS 方法更可靠。如果可能，根据您喜欢的规则修改生成页面的软件，使其在服务器端执行所需的操作。即使在这里使用 JavaScript 也比 CSS 更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:16:55.193

好吧，大写转换在某些浏览器上的工作方式不同，例如，对于某些浏览器，java-script 会返回 Java-Script，而另一些则只会返回 Java-script。

还请记住，大写字母不适用于单词的其余字母，它只会更改第一个字母，因此如果您有单词 intERNET，它将返回 IntERNET，而其余部分则保持原样。

所以我的疯狂猜测是，ie7 和 ie8 将 'gala' 作为一个单词，将 ' 作为第一个字符，所以他们试图将 ' 返回相同 ' 大写，我不知道它是否有破解，但这可能会让你开始，尝试使用 gala 而不是 'gala' 只是为了测试，然后看看是否有办法在大写时忽略 '。

# c# - 对我的网站使用基本身份验证时无法连接到服务器

> ID：13560291
> 
> 赞同：0
> 
> 时间：2012-11-26T07:18:22.643
> 
> 标签：c#, asp.net, sql-server, sql-server-2008, basic-authentication

我正在对托管在服务器上的 Web api 使用基本身份验证。它在我的本地使用基本身份验证工作正常。但是当我将它托管到服务器时，它会导致以下错误

* *{"Message":"发生错误。","ExceptionMessage":"建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。未找到或无法访问服务器。验证实例名称正确，并且 SQL Server 配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL 的连接 **

当我删除基本身份验证时，它也可以在服务器上正常工作。

我的连接字符串

```
<connectionStrings>
<add name="DefaultConnection" connectionString="Password=password;Persist Security Info=True;User ID=wbuser;Initial Catalog=WinBouts_com;Data Source=WINBOUTSAPIVM"
  providerName="System.Data.SqlClient" />
<add name="WinBoutsConnectionString" connectionString="Password=password;Persist Security Info=True;User ID=wbuser;Initial Catalog=WinBouts_com;Data Source=WINBOUTSAPIVM"
  providerName="System.Data.SqlClient" /> 
```

我正在使用 system.web.providers 进行基本身份验证，所以我在我的 web.config 中找到了这个

```
<!--
        If you are deploying to a cloud environment that has multiple web server instances,
        you should change session state mode from "InProc" to "Custom". In addition,
        change the connection string named "DefaultConnection" to connect to an instance
        of SQL Server (including SQL Azure and SQL  Compact) instead of to SQL Server Express.
  -->
<sessionState mode="Custom" customProvider="DefaultSessionProvider">
  <providers>
    <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="WinBoutsConnectionString" />
  </providers>
</sessionState> 
```

我确实将模式更改为自定义，我想我的连接字符串连接到 sql server 而不是 sql server express？我不确定！

有趣的是，它在 connectionStringName 处显示一个错误，说“不允许使用该属性”？但是在我的本地虚拟机中，它不会抛出任何这样的错误，这就是我猜基本身份验证在我的本地虚拟机上运行良好。

谁能告诉我哪里可能出错了。任何建议都将不胜感激。我整天都在为此头疼:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:54:59.570

终于解决了问题。问题出在我的基本身份验证过滤器类中。

```
private bool TryGetPrincipal(string username, string password, out IPrincipal principal)
    {      string connectionString = ConfigurationManager.ConnectionStrings["WinBoutsConnectionString"].ConnectionString;    

        username = username.Trim();
        password = password.Trim();

        //only supporting SSO login atm
       // var valid = Membership.Provider.ValidateUser(username, password);
        serviceContext = new WinBoutsDataContext<DataAccess.Model.UserInfo>(connectionString);
        userRepository = new UserRepository(serviceContext);

        var valid = this.userRepository.ValidateAccount(username, password);

        if (valid)
        {
            // once the user is verified, assign it to an IPrincipal with the identity name and applicable roles
            principal = new GenericPrincipal(new GenericIdentity(username), System.Web.Security.Roles.GetRolesForUser(username));
            return true;
        }

        //user wasn't found, unauthorised
        principal = null;
        return false;
    } 
```

我在这里对我的 DataContext 进行了硬编码，但之前我没有将连接字符串传递给它。我只是选择了 WinBoutsDataContext 的默认构造函数，当我将代码放到服务器上时它不起作用。

# java - 使用自定义 bean spring security 时避免双重身份验证

> ID：13560292
> 
> 赞同：0
> 
> 时间：2012-11-26T07:18:27.450
> 
> 标签：java, jsf-2, spring-security

我有一个调用 some 的登录表单`LoginBean`，它返回一个 ajax 回调参数，指示凭据是否有效。代码如下：

```
public void doLogin() {

    Authentication authenticationRequestToken =
             new UsernamePasswordAuthenticationToken(user, password);

    try {
        Authentication authenticationResponseToken =
                 authenticationManager.authenticate(authenticationRequestToken);

        SecurityContextHolder.getContext().
                     setAuthentication(authenticationResponseToken);

        if (authenticationResponseToken.isAuthenticated()) {
            RequestContext context = RequestContext.getCurrentInstance();
            FacesMessage msg;
            boolean loggedIn = true;
            msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Welcome", user);
            FacesContext.getCurrentInstance().addMessage(null, msg);
            context.addCallbackParam("loggedIn", loggedIn);
        }
    } .authenticate(...) catches ...

    // Here I need some code that continue whatever j_spring_security_check
    // would do after authenticating.
} 
```

我的应用程序现在的工作方式，在这个调用之后`doLogin()`，表单被提交到`j_spring_security_check`，然后再次进行身份验证过程，浪费了以前的工作。我正在尝试为此找到解决方案，不胜感激。

因此，最重要的是，我需要一些东西来模拟过滤器拦截时发生`j_spring_security_check`的情况（或一种明确强制拦截的方法），因此处理将在按钮后面进行，而不是在提交表单之后进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:29:24.393

如果你只是转发到 spring 安全认证 url 而不是`SecurityContextHolder`自己使用会更好。看看这段代码：

```
public String doLogin() throws ServletException, IOException {

    FacesContext context = FacesContext.getCurrentInstance();

        String springCheckUrl = this.buildSpringSecurityCheckUrl();

        HttpServletRequest request = (HttpServletRequest) context
                .getExternalContext().getRequest();

        RequestDispatcher dispatcher = request
                .getRequestDispatcher(springCheckUrl);

        dispatcher.forward((ServletRequest) request,
                (ServletResponse) context.getExternalContext.getResponse());

        context.responseComplete();

        return null;
    }

    private String buildSpringSecurityCheckUrl() {
        StringBuilder springCheckUrl = new StringBuilder(
                "/j_spring_security_check").append("?").append("j_username")
                .append("=").append(this.userName.trim()).append("&")
                .append("j_password").append("=")
                .append(this.userPassword.trim());
        return springCheckUrl.toString();
    }
} 
```

# c# - 用新的 (C#) 替换或更新 ListView 中的一整行（包含所有子项）

> ID：13560295
> 
> 赞同：0
> 
> 时间：2012-11-26T07:18:44.610
> 
> 标签：c#, winforms

我正在使用`ListView`并有几行。当一个新项目到达时，如果它们相同，我想替换现有的项目/行。

有没有办法可以用新项目替换 ListView 中的整行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:17:18.310

如果有新的，只需更换旧的即可解决。

# jquery - 当我单击链接时，如何阻止雅虎将“href”更改为“dirtyhref”？

> ID：13560303
> 
> 赞同：1
> 
> 时间：2012-11-26T07:19:23.977
> 
> 标签：jquery, greasemonkey

我是中国网民。Google/Yahoo 搜索引擎在我国非常不稳定。
当我单击雅虎搜索结果链接时，我经常会收到此错误页面：

```
ERROR
The requested URL could not be retrieved    
While trying to retrieve the URL: http://search.yahoo.com/r/_ylt=A0oGdUY7FbNQFQsA5rZXNyoA;_ylu=X3oDMTE0ODJ2YTduBHNlYwNzcgRwb3MDMQRjb2xvA3NrMQR2dGlkA1ZJUDA1MV83Ng--/SIG=11ac0sa5q/EXP=1353942459/**http%3a//www.google.com/

The following error was encountered:    
    Access Denied.    
    Access control configuration prevents your request from being allowed at this time. Please contact your service provider if you feel this is incorrect. 

Your cache administrator is noc_admin@163.com.
by DXT-GZ-APP02 
```

我注意到，当我单击链接时，雅虎会自动`href`更改的值。 我尝试，但它不起作用。 如何阻止雅虎这样做？`dirtyhref`
`$('a[id|=link]').unbind('click mousedown')`

* * *

目前，我使用这个Firefox的greasemonkey代码：

```
// ==UserScript==
// @name        Clean URL
// @namespace   http://hjkl.me
// @include     https://www.google.com/search*
// @include     http://search.yahoo.com/search*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js
// @version     1
// ==/UserScript==

// GOOGLE
$('h3.r>a').removeAttr('onmousedown');

// YAHOO
$('a[id|=link]').on('click', function(){
    var url = $(this).attr('dirtyhref').split('**')[1];
    url = decodeURIComponent(url);
    $(this).attr('href', url);  //<-- yahoo will change it back!
    window.open(url, '_blank');
    return false;
}); 
```

问题是：我不能使用鼠标中键功能。（默默打开标签页）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:00:05.637

通常，人们只是将“好”`href`值复制到坏/跟踪`dirtyhref`属性，然后让雅虎做这件事。

如今，只需清理这两个值。

这是一个似乎对我有用的 AJAX 处理脚本：

```
// ==UserScript==
// @name        Clean URL
// @namespace   http://hjkl.me
// @include     http://search.yahoo.com/search*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js
// @require     https://gist.github.com/raw/2625891/waitForKeyElements.js
// @version     1
// @grant       GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

// GOOGLE
$('h3.r>a').removeAttr('onmousedown');

// YAHOO
waitForKeyElements ("a[id|=link]", fixDirtyLinks);

function fixDirtyLinks (jNode) {
    var url = jNode.attr('dirtyhref').split('**');
    if (url.length > 1) {
        var goodURL = decodeURIComponent (url[1]);
        jNode.attr ('href', goodURL);
        jNode.attr ('dirtyhref', goodURL);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:41:09.023

IE9+、Opera 和 Firefox 定义了这个[`DOMAttrModified`](http://help.dottoro.com/ljdchxcl.php)事件。遗憾的是，当前版本的 Webkit 没有定义这个事件。

每当其任何属性更改时，这都会将`href`属性覆盖`a[id|=link]`到值。`dirtyhref`请注意，为属性分配其当前值不计为更改：

```
$('a[id|=link]').on('DOMAttrModified', function(){
    $(this).attr("href", $(this).attr("dirtyhref"));
}); 
```

测试：http: [//jsfiddle.net/ZzJae/](http://jsfiddle.net/ZzJae/)

您还需要在页面加载时覆盖链接。

如果新链接可能不断出现（例如，存在 AutoPager），您可能还需要绑定[`DOMNodeInserted`](http://help.dottoro.com/ljmcxjla.php)和使用事件委托：`$(document).on("DOM...", "a[id|=link]", handler)`

IE9+、Chrome+Safari 和 Firefox 定义[`DOMSubtreeModified`](http://help.dottoro.com/ljrmcldi.php)，但 Opera 没有。如果你想添加 Webkit 支持，你也需要监听这个事件。

最终解决方案的草图（仅限 Firefox）：

```
(function(){
  function overrideOne(){
    var dirty = $(this).attr("dirtyhref");
    var clean = dirty.split("**")[1];
    $(this).attr("href", clean);
  }
  function overrideAll(){
    $("a[id|=link]").each(overrideOne)
  }

  $(document).on("ready DOMNodeInserted", overrideAll);
  $(document).on("DOMAttrChanged", "a[id|=link]", overrideOne);
  $(document).on("click", "a[id|=link]",function(){
     ...
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T21:54:11.657

基本上，您需要做的是删除该`dirtyhref`属性。为了防止`href`变脏，您的`dirtyhref`删除功能必须在 Yahoo! 的功能之前运行。为此，请将事件捕获与鼠标事件一起使用。

这是我在 Opera 中使用的用户 JS：

禁用雅虎！搜索重写：

[https://gist.github.com/XP1/5008515/](https://gist.github.com/XP1/5008515/)

```
// ==UserScript==
// @name Disable Yahoo! Search rewrite
// @version 1.00
// @description Disables the rewrite of links in Yahoo! Search results.
// @namespace https://gist.github.com/XP1/5008515/
// @copyright 2013
// @author XP1
// @homepage https://github.com/XP1/
// @license Apache License, Version 2.0; http://www.apache.org/licenses/LICENSE-2.0
// @include http*://search.yahoo.*/search?*
// @include http*://*.search.yahoo.*/search?*
// ==/UserScript==

/*
 * Copyright 2013 XP1
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*jslint browser: true, vars: true, maxerr: 50, indent: 4 */
(function (window, MouseEvent, HTMLElement) {
    "use strict";

    function disableRewrite(event) {
        if (!(event instanceof MouseEvent)) {
            return;
        }

        var target = event.target;

        var current = null;
        for (current = target; current instanceof HTMLElement; current = current.parentNode) {
            if (current.hasAttribute("dirtyhref")) {
                current.removeAttribute("dirtyhref");
                return;
            }
        }
    }

    window.addEventListener("mousedown", disableRewrite, true);
    window.addEventListener("click", disableRewrite, true);
}(this, this.MouseEvent, this.HTMLElement)); 
```

# php - 无法在 Axon 查询中包含 LIMIT

> ID：13560304
> 
> 赞同：0
> 
> 时间：2012-11-26T07:19:25.163
> 
> 标签：php, fat-free-framework

我正在尝试在 Axon 中执行以下查询，但无法使其工作。使用普通查询它可以工作 -

```
SELECT user_name, email_id FROM ors_email_user WHERE email_sent=false LIMIT 5; 
```

在 Axon 中，我尝试执行以下操作 -

```
$users = new Axon('ors_email_user');
$users->load(array('email_sent=:email_sent', array(':email_sent' => false)), '', 3);
while(!$users->dry()) {
   echo 'here';
} 
```

它永远不会进入 while 循环。查询有什么问题？有没有一种方法可以让我看到实际正在形成的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:36:55.300

我相信 load 函数只允许传递 3 个参数，其中第三个是应该排序的列。

您应该使用`find()`or`select()`函数。从网站：

```
find( [criteria],[order],[limit],[offset] );

select( fields,[criteria],[grouping],[order],[limit],[offset] ); 
```

# php - URL 类/方法路由的安全性

> ID：13560305
> 
> 赞同：2
> 
> 时间：2012-11-26T07:19:25.927
> 
> 标签：php, javascript, ajax, url-routing, front-controller

他们是否有关于在 url 中使用类名和/或参数的任何安全问题？

我创建了一个简单的 PHP 页面路由器来路由路径，例如：

```
www.mysite.com/classname/methodname/param1/param2/etc/etc 
```

透露我的类和方法的名称有什么危险吗？还是应该在类方法中进行足够的过滤以使其不成问题？

此外，我的 AJAX 调用将以相同的方式路由。为了确保合法的 AJAX 调用，我能否以某种方式生成每次调用时都会更改的会话令牌。例如，在 AJAX 访问的 PHP 脚本中生成了一个随机数，该随机数也是由调用发送的。如果它们匹配，则它是一个授权请求。唯一的问题是我如何让它们匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:24:49.167

最大的安全问题是您不会盲目地包含类名，例如：

```
require_once('classes/' . $_GET['class'] . '.php'); 
```

以上将是一个易受攻击的示例，因此请务必验证您包含的类名或任何文件，以避免本地文件包含漏洞。

`class_exists()`是不够的。我将首先对其进行验证，使其仅包含`a-z`. 然后使用 file_exists、class_exists 等。

我想不是所有的类和方法都会被公众通过路由使用，所以有一些系统可以检查路由器是否被允许访问指定的类和方法。这可以通过多种方式完成，例如从基类派生公开可用的类，例如`BaseController`检查所包含的类是否派生自该基类，或者只是将控制器保存在内部类的单独目录中，并控制类内的访问如所须。

至于揭示你的类和方法——这并不是一个真正的问题，事实上它是大多数 MVC 框架的工作方式。确保验证作为用户输入的所有内容。

对于您的 AJAX 建议，是的，可以通过将令牌存储在会话中来完成，这样您就可以在调用时检查它是否匹配。不过，我认为这不会增加很多安全性。通常，AJAX 服务提供的数据与页面上可用的数据相同。

# xml - Authorize.net 可以在托管形式 iframe 中创建 CIM 客户资料

> ID：13560307
> 
> 赞同：2
> 
> 时间：2012-11-26T07:19:28.387
> 
> 标签：xml, iframe, authorize.net, authorize.net-cim

现在，我通过传递 xml 请求创建客户配置文件，并在使用托管 iframe 创建付款配置文件后，但是否可以在托管 iframe 中创建客户配置文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:56:33.053

您必须首先通过传递 XML 请求来创建客户资料，然后使用此 ID，您将能够在 iframe 中打开添加付款详细信息表单，因为您需要一个令牌，并且没有客户资料 ID，您将无法获得令牌请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T22:15:42.577

是的。[CIM 指南](http://www.authorize.net/support/CIM_XML_guide.pdf)的第 102 页明确指出您可以。有关如何执行此操作，请参阅 CIM 指南的第 103 页。

> 以下 HTML 代码添加了一个标有“添加新付款方式”的按钮，单击该按钮会打开一个 iframe：
> 
> `<button onclick="AuthorizeNetPopup.openAddPaymentPopup()">Add a New Payment Method</button>`

# javascript - 如何在选择标签 ruby on rails 中使用选项

> ID：13560308
> 
> 赞同：0
> 
> 时间：2012-11-26T07:19:37.007
> 
> 标签：javascript, ruby-on-rails, ruby

我有这样的表格：

```
<%= form_tag project_configure_select_path , :method => :put do %>
Select The Type Of Project<%= select_tag "type", "<option>Agile</option><option>Sales</option>".html_safe %>
<br/>
<label class="agile"> 
    <%= check_box_tag 'modules_enabled[]', "time_tracking", false, :id => "project_enabled_module_names_time_tracking", :checked => "checked", :type => "hidden" %>
    <%= check_box_tag 'modules_enabled[]', "issue_tracking", false, :id => "project_enabled_module_names_issue_tracking", :checked => "checked", :type => "hidden" %>
    <%= check_box_tag 'modules_enabled[]', "wiki", false, :id => "project_enabled_module_names_wiki", :checked => "checked", :type => "hidden" %>
    <br/>
</label>
<label class="sales"> <%= check_box_tag 'modules_enabled[]', "news", false, :id => "project_enabled_module_names_news", :checked => "checked", :type => "hidden" %> </label>
<br/>
<%= submit_tag 'Submit'%>
<% end %> 
```

我想在这里提出一个条件。那就是如果我从选择标签中选择选项敏捷，那么标签 class="agile" 必须工作，否则如果它是销售，那么它下面的另一个标签块称为 class = "sales" 必须工作。

我没有将这些中的任何一个存储在数据库中。所以我希望根据我的选择来选择特定的块。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:07:29.077

您将需要一些 Javascript 来执行此操作。（我将使用 jQuery，因为它是标准的）。

在您的选项元素上添加一些值（例如。`<option value="agile">Agile</option>`）和一些 JS，如下所示：

（这可能会有所优化）

```
// By default, both should be hidden
$('label.agile, label.sales').hide(); 

$('select#type').change(function() {
    $('label.agile, label.sales').hide(); 

    // Show the label with the class that matches the selected option
    $('label.'+$(this).val()).show(); 
}); 
```

# php - PHP Zend 中的结构“zend_ptr_stack”是什么意思？

> ID：13560311
> 
> 赞同：0
> 
> 时间：2012-11-26T07:19:51.040
> 
> 标签：php

PHP-5.2.17 中“Zend/zend_globals.h”的第 29 行。

结构“zend_ptr_stack”是什么意思，这个结构有什么用？

```
typedef struct _zend_ptr_stack {
    int top, max;
    void **elements;
    void **top_element;
} zend_ptr_stack; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:45:03.570

我不确定您要问的是以下哪些问题：

1.  结构是做什么`_zend_ptr_stack`用的？

    该`_zend_ptr_stack`结构与支持代码一起用于实现`Stack`数据类型。浏览此处获取更多信息：

    [http://en.wikipedia.org/wiki/Stack_%28abstract_data_type%29](http://en.wikipedia.org/wiki/Stack_%28abstract_data_type%29)

2.  尾随`zend_ptr_stack`有什么作用？

    尾随`zend_ptr_stack`声明允许您引用 ，`struct _zend_ptr_stack`而不必使用`struct`关键字。浏览此处获取更多信息：

    [为什么我们要在 C 中如此频繁地对结构进行 typedef 呢？](https://stackoverflow.com/questions/252780/why-should-we-typedef-a-struct-so-often-in-c)

希望有帮助。

# javascript - 相关模型和例外

> ID：13560312
> 
> 赞同：0
> 
> 时间：2012-11-26T07:20:04.667
> 
> 标签：javascript, extjs, extjs4

我有与另一个模型**Chamber相关联的模型****Schedule**。当关联的模型数据为空时，我遇到了问题。这是正常行为，因为它不是必填字段。

 ****升级**：**调度**模型是 scheduleTree 模型的一部分，用于存储从服务器加载数据。

```
Ext.define('...SchedulesTree', {
    extend : '...TreeStore',
    model: "...ScheduleTree",
    root: {
        expanded: true,
        text: "root",
        children: [],
        loaded: true
    },
    paramsAsHash : true,
    proxy : {
        type: "direct",
        autoLoad: false,
        api : {
            read: registratorAction.getScheduleNode
        },
        reader: {
            type: "json",
            root : "records",
            totalProperty: 'total'
       }
    }
});

Ext.define("...ScheduleTree", {
    extend: "Ext.data.Model",

...
    associations: [   
        {
            type: "hasMany",
            model: "Unimed.model.staff.Schedule",
            name: "schedules",
            getterName: "schedules"
        }
    ]
});

Ext.define("...Schedule", {
extend: "Ext.data.Model",
fields: [
    {name: "timeBegin", type: "date", dateFormat: "time"},
    {name: "timeEnd", type: "date", dateFormat: "time"}
],
proxy: {
    type: "direct",
    reader: {
        type: "json"
    }
},
associations: [
    {
        type: "belongsTo",      
        model: "..LpuPosition", 
        associationKey: "lpuPosition",
        getterName: "lpuPosition",
        associatedName: "lpuPosition"
    },
    {
        type: "belongsTo",
        model: "...Chamber",
        associationKey: "chamber",
        getterName: "chamber",
        associatedName: "chamber"
    }
]
}); 
```

当我得到房间时：

```
chamber = schedule.chamber(); 
```

并且没有链接数据我得到异常：'Uncaught TypeError：undefined is not a function'。

我可以通过查看原始数据来解决问题，但可能存在更优雅的解决方案吗？**

# jsf - 数据表行保持选中/突出显示，其中 selectionMode="single"

> ID：13560315
> 
> 赞同：0
> 
> 时间：2012-11-26T07:20:12.653
> 
> 标签：jsf, datatable, primefaces

我一直在运行 Primefaces 3.0，没有问题，现在正在尝试升级到 3.4.x - 我已经尝试了 3.4、3.4.1 和 3.4.2，并且这个问题出现在所有 3 中 - 基本上是针对具有selectionMode="single" 选项，当我单击一行时，无论我选择了多少其他行，它都保持选中状态。同时，我很确定在单击行时未设置 selection="#{databrowser.selectedData}" 变量。该表已完全填充，并且没有 2 行在所有列中具有完全相同的数据。经过测试，这发生在 Chrome 和 Firefox 中。我找不到任何类似的问题 - 想知道是否有其他人遇到过这个问题？

除了引用的元素之外，这是我使用的 3.0 代码：

```
<p:layoutUnit position="center" resizable="true" header="Data Set Details" styleClass="east_panel_header" >
        <h:form id="tblbrowser">  
            <p:dataTable id="dataTable" emptyMessage="No data sets found." style="width: 100%" var="datlis" resizableColumns="true" value="#{databrowser.selectedDataModel}" widgetVar="dataTable" selection="#{databrowser.selectedData}" selectionMode="single" >  

            <p:ajax event="rowSelect" update=":usercomments:commentsTable, :tblbrowser:dataTable" />

            <f:facet name="header" >
                <p:outputPanel>  
                <h:outputText value="Search all fields " />  
                <p:inputText id="globalFilter" onkeyup="dataTable.filter()"/>  
                </p:outputPanel>  
            </f:facet>  

            <p:column id="owner" filterBy="#{datlis.uname}" headerText="Added By" filterMatchMode="contains" >  
                <h:outputText value="#{datlis.uname}" />  
            </p:column>  

            <p:column id="name" filterBy="#{datlis.name}" headerText="Name" >  
                <h:outputText value="#{datlis.name}" />  
            </p:column>  

            <p:column id="description" filterBy="#{datlis.description}" headerText="Description" filterMatchMode="endsWith" >  
                <h:outputText value="#{datlis.description}" />  
            </p:column> 

            <p:column id="datatype" filterBy="#{datlis.data_type}" headerText="Data Type"  
                    filterOptions="#{databrowser.dataTypeOptions}" filterMatchMode="exact" >  
                <h:outputText value="#{datlis.data_type}" />  
            </p:column>  

            <p:column id="quality" filterBy="#{datlis.quality}" headerText="Source Type"  
                    filterOptions="#{databrowser.qualityOptions}" filterMatchMode="exact" >  
                <h:outputText value="#{datlis.quality}" />  
            </p:column>  

            <p:column id="added" headerText="Date Added" filterMatchMode="endsWith" >  
                <h:outputText value="#{datlis.added}" />  
            </p:column>  

            <p:column headerText="Metadata" style="width:40px" >  
                <p:commandButton id="selectButton" rendered="#{datlis.has_metadata}" icon="ui-icon-circle-arrow-s" title="View" ajax="false" >  
                    <f:param name="filepath" value="#{datlis.filepath}" />   
                    <p:fileDownload value="#{filedownloader.mfile}" /> 
                </p:commandButton>
            </p:column>

            <p:column headerText="Data File(s)" style="width:90px" >  
                <p:commandButton id="selectButton2" rendered="#{datlis.has_datafiles}" icon="ui-icon-circle-arrow-s" title="View" ajax="false" >  
                    <f:param name="datafiles" value="#{datlis.datafiles}" />   
                    <p:fileDownload value="#{filedownloader2.dfile}" /> 
                </p:commandButton>
                <h:outputText value=" " />  
                <h:outputText value="#{datlis.zipsize}" />  
            </p:column>   

            </p:dataTable>  
        </h:form>  
    </p:layoutUnit> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:09:57.673

您缺少`rowKey`应该是每一行的唯一标识符的属性。

例如，如果您的 selectedData 对象具有唯一字段`id`，您的`dataTable`组件应如下所示：

```
<p:dataTable id="dataTable" rowKey=#{datlis.id}
             value="#{databrowser.selectedDataModel}" var="datlis"
             selection="#{databrowser.selectedData}" selectionMode="single" > 
```

无需更新同一个表`p:ajax`以查看选择，因此您可以`:tblbrowser:dataTable`从更新目标中删除，并且只有：

```
<p:ajax event="rowSelect" update=":usercomments:commentsTable" /> 
```

# c - C中的后增量和预增量

> ID：13560321
> 
> 赞同：3
> 
> 时间：2012-11-26T07:20:35.533
> 
> 标签：c

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等……）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

下面有一个代码，我在理解代码逻辑方面面临一个非常严重的问题。

```
#include <stdio.h>
#include <stdlib.h>

int main(void )
{
int i = 1 ;
printf("\n%d %d %d %d\n",++i,i++,i++,++i) ;
return 0 ;
} 
```

我在名为 Mandriva 的 Linux 发行版下使用 gcc 编译器。在上面提到的我在 printf 语句中使用了带有变量的前后增量。我应该得到的输出是 2 2 3 5，但我得到了不同的输出。请在这段代码中帮助我。

我在这段代码中感觉很困难。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T07:22:08.377

这是未定义的行为。的增量之间没有序列点`i`。

任何结果都是正确的结果（包括正在格式化的硬盘）。

# drupal - 使用模式窗口滚动浏览器窗口，Drupal 6

> ID：13560328
> 
> 赞同：1
> 
> 时间：2012-11-26T07:21:03.553
> 
> 标签：drupal, dialog, scroll

我正在使用 Drupal 6 + dialog.module、Ctools(Axaj)、jQuery 1.3.2、jQuery UI

当我打开模式对话框窗口时，浏览器的滚动条被锁定。如果我使用鼠标滚轮，我可以滚动它，但不能通过单击或上键、下键功能来滚动。

有什么问题？我在这样的代码中找不到任何块函数：

站点/所有/模块/对话框/dialog.js

```
Drupal.CTools.AJAX.commands.dialog_display = function(command) {
    var $el = Drupal.Dialog.dialog,
      o = {},
      overrides = {};

    // Ensure that the dialog wasn't closed before the request completed.
    if ($el) {
      $el.html(command.output).dialog('show');

      // Merge all of the options together: defaults, overrides, and options
      // specified by the command, then apply them.
      overrides = {
        // Remove any previously added buttons.
        'buttons': {},
        'title': command.title,
        //'maxHeight': Math.floor($(window).height() * .8), // HACK // DISABLED
        'minHeight' : 700, // HACK // I've set it, and dialog window automagically adjusted - we need central part with content have height = auto, so there is no scroll bar, and hence no problems with autocomplete popups in dialog windows 
      };
      o = $.extend({}, Drupal.settings.Dialog.defaults, overrides, command.options);
      $.each(o, function (i, v) { $el.dialog('option', i, v); });

      if ($el.height() > o.maxHeight) {
        $el.dialog('option', 'height', o.maxHeight);
        $el.dialog('option', 'position', o.position);
        // This is really ugly, but dialog gives us no way to call _size() in a
        // sane way!
        $el.data('dialog')._size();
      }

      Drupal.attachBehaviors($el);
    }
  }; 
```

而且我在 css 文件中没有发现任何有趣的东西。有什么问题？

# c++ - C++ typedef 与未详细说明的继承

> ID：13560329
> 
> 赞同：9
> 
> 时间：2012-11-26T07:21:05.167
> 
> 标签：c++, stl

我有一个由嵌套 STL 容器组成的数据结构：

```
typedef std::map<Solver::EnumValue, double> SmValueProb;
typedef std::map<Solver::VariableReference, Solver::EnumValue> SmGuard;
typedef std::map<SmGuard, SmValueProb> SmTransitions;
typedef std::map<Solver::EnumValue, SmTransitions> SmMachine; 
```

这种形式的数据仅在我的程序中短暂使用，除了简单地存储它们的数据之外，附加到这些类型并没有太多有意义的行为。但是，编译器 (VC++2010) 抱怨生成的名称太长。

将类型重新定义为 STL 容器的子类，无需进一步说明似乎可行：

```
typedef std::map<Solver::EnumValue, double> SmValueProb;
class SmGuard : public std::map<Solver::VariableReference, Solver::EnumValue> { };
class SmTransitions : public std::map<SmGuard, SmValueProb> { };
class SmMachine : public std::map<Solver::EnumValue, SmTransitions> { }; 
```

认识到 STL 容器不打算用作基类，在这种情况下实际上是否存在任何危险？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T07:49:43.970

有一个危险：如果你调用`delete`一个指向没有`virtual`析构函数的基类的指针，你就会有未定义的行为。否则，你很好。

至少理论是这样的。在实践中，在 MSVC ABI 或 Itanium ABI（gcc，Clang，icc，...）`delete`中，没有虚拟析构函数的基类（`-Wdelete-non-virtual-dtor`使用 gcc 和 clang，提供类具有虚拟方法）只会导致问题，如果您派生类添加具有非平凡析构函数的非静态属性（例如 a `std::string`）。

在您的具体情况下，这似乎很好......但是......

...您可能仍想*封装*（使用组合）并公开*有意义的*（面向业务的）方法。`it->second.find('x')->begin()`它不仅危险性更小，而且比...更容易理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T07:23:42.483

就在这里：

```
std::map<Solver::VariableReference, Solver::EnumValue>* x = new SmGuard;
delete x; 
```

导致未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T08:18:34.043

这是 C++ 与“基于继承的经典 OOP”的争议点之一。

有两个方面必须考虑：

*   typedef 为同一类型引入了另一个名称：`std::map<Solver::EnumValue, double>`并且`SmValueProb`- 在所有效果上 - 完全相同并且可以互换使用。
*   一个**类**引入了一种（原则上）与其他任何东西无关的新类型。

类关系由类“组成”的方式定义，以及是什么让隐式操作和转换成为可能与其他类型。

在特定的编程范式（如 OOP，与“inhritance”和“is-a”关系的概念相关联）继承、隐式构造函数、隐式转换等之外，都做同样的事情：让一个类型被使用跨另一种类型的接口，从而定义了跨不同类型的可能操作网络。这是（一般来说）“多态性”。

存在各种编程范式来说明应该如何构建这样的网络，每个都试图优化编程的特定方面，例如表示或运行时可替换对象（经典 OOP）、编译时可替换对象（CRTP）的表示、使用不同类型的流派算法函数（通用编程），使用“纯函数”来表示算法组合（函数和 lambda“捕获”）。

所有这些都规定了一些关于必须如何使用语言“特性”的“规则”，因为 - 作为 C++ 多范式 - 其特性仅满足范式的要求，从而使一些肮脏的东西变得开放。

正如[Luchian](https://stackoverflow.com/a/13560364/924727)所说，继承 std::map 不会产生纯 OOP 可替换类型，因为对基指针的删除将不知道如何销毁派生部分，因为析构函数不是设计为虚拟的。

但是 - 事实上 - 这只是一个特例：也`pbase->find`不会调用你自己的最终覆盖的`find`方法，`std::map::find`不是虚拟的。（但这不是未定义的：它被很好地定义为很可能不是您想要的）。

真正的问题是另一个：“经典 OOP 替代原则”在您的设计中是否重要？换句话说，你是否打算互换使用你的类和它们的基础，函数只接受一个`std::map*`or`std::map&`参数，假装这些函数调用 std::map 函数导致调用你的方法？

*   如果是，继承不是要走的路。std::map 中没有虚方法，因此运行时多态性将不起作用。
*   如果不是，那就是：*您只是在编写自己的类，重用 std::map 行为和接口，无意交换它们的用法*（特别是，您不是用 new 分配自己的类，并用 delete 应用删除它们到 std::map 指针），只提供一组以`yourclass&`或`yourclass*`作为参数的函数，这很好。它甚至可能比 typedef 更好，因为您的函数不能再与 std::map 一起使用，从而分离了功能。

替代方案可以是“封装”：即：使地图和类的显式成员允许地图作为公共成员访问，或者使其成为具有访问器函数的私有成员，或者自己重写类中的地图接口。你最终得到了一个不相关的类型，它具有相同的接口和它自己的行为。以重写可能有数百个方法的东西的整个接口为代价。

## 笔记：

对于任何考虑丢失 vitual dtor 的危险的人来说，注意 tat 包含公众可见性并不能解决问题：

```
class myclass: public std::map<something...>
{};

std::map<something...>* p = new myclass;
delete p; 
```

UB 非常喜欢

```
class myclass
{
public:
   std::map<something...> mp;
};

std::map<something...>* p = &((new myclass)->mp);
delete p; 
```

第二个示例与第一个示例有相同的错误，只是不太常见：它们都假装使用指向部分对象的指针来操作整个对象，部分对象中没有任何内容让您能够知道“包含一”是。

# asp-classic - 如何在windows 7中运行asp程序

> ID：13560338
> 
> 赞同：-3
> 
> 时间：2012-11-26T07:21:45.807
> 
> 标签：asp-classic

我试图在我的 Windows 7 系统中运行一个 asp 程序，但它显示错误“HTTP 错误 401.3 - 未经授权由于访问控制列表 (ACL) 配置或加密设置，您无权查看此目录或页面用于 Web 服务器上的此资​​源。” 你能告诉我一步一步地运行程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:33:03.297

Windows 7 不适合用作服务器，因此它有一些无情的安全规则。即使使用开箱即用的 Windows Server，您也需要打开防火墙，因为在您准备好上线之前，默认设置是安全的。

在 IIS 中检查您的站点是否公开。

# objective-c - UILabel 文本被截断

> ID：13560340
> 
> 赞同：4
> 
> 时间：2012-11-26T07:22:07.377
> 
> 标签：objective-c, ios, cocoa-touch

我正在尝试动态设置标签大小。它以一种奇怪的方式工作，我截断了一些文本。我首先设置我的标签文本，然后尝试像这样调整它的大小。

```
 _switch2Label.text = @"Call on alarm, there will be no call if other user of alarm system will recieve an alarm call and confirm (answer) it by pressing 0#";
    _switch2Label.numberOfLines = 0;
    [self newFrame:_switch2Label];

- (void) newFrame:(UILabel *) label
{

    CGSize maxSize = self.view.bounds.size;
    maxSize.width = maxSize.width - 30;
    CGSize labelSize = [label.text sizeWithFont:label.font constrainedToSize:maxSize lineBreakMode:label.lineBreakMode];

    CGRect newFrame = label.frame;
    newFrame.size.height = labelSize.height;
    label.frame = newFrame;

} 
```

我只得到三行文本，而这个标签需要五行。也许有人可以在这里看到我的错误？如果我在标签上添加更多文本，它会显示出来，但仍然有大约两行标签文本被截断。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:47:02.323

```
 _switch2Label.text = @"Call on alarm, there will be no call if other user of alarm system will recieve an alarm call and confirm (answer) it by pressing 0#,";
 _switch2Label.numberOfLines = 0;
 [self newFrame:_switch2Label];

- (void) newFrame:(UILabel *) label
{

    CGSize maximumSize = CGSizeMake(label.frame.size.width, 10000);
    //maxSize.width = maxSize.width - 30;
    CGSize labelSize = [label.text sizeWithFont:label.font constrainedToSize:maximumSize lineBreakMode:UILineBreakModeWordWrap];

    CGRect newFrame = label.frame;
    newFrame.size.height = labelSize.height;
    label.frame = newFrame;

} 
```

使用这个代码块，可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T07:50:46.417

我已经改变了你的方法......请检查它..它可能会帮助你..

```
- (void) newFrame:(UILabel *) label
{
     CGSize constraint = CGSizeMake(300, 1000.0f);
     CGSize size_txt_overview1 = [label.text sizeWithFont:[UIFont fontWithName:@"Arial Rounded MT Bold" size:15] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];
     label.frame = CGRectMake(20,20, size_txt_overview1.width, size_txt_overview1.height+15);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:27:38.870

为什么以编程方式调整标签大小？[这是您在 IB 或使用autorezizeMask](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)无法做到的事情吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T07:33:00.080

标签的约束大小未按您的预期计算，目前，您的代码将标签高度限制为视图的边界高度。将您的 maxSize 实例更改为：

```
CGSize maxSize = CGSizeMake(self.view.bounds.size.width - 30, MAXFLOAT);
CGSize labelSize = ... 
```

这样做将确保约束不受视图边界的约束。如果您希望标签能够超出视图的边界，您可能还需要考虑设置视图的 clipsToBounds 属性。

# wix - 由于先前 wix msi 的自定义任务失败，Msp 失败

> ID：13560342
> 
> 赞同：0
> 
> 时间：2012-11-26T07:22:14.710
> 
> 标签：wix, windows-installer, wix3.5, msp

我们正在尝试创建补丁（.msp），但是当我们安装它时，它没有更新任何文件。

在分析的过程中，我们发现以前版本的微星编写的自定义任务有卸载缺陷。

由于无法卸载，msp 没有升级。

现在我们无法更改之前的 msi，因为它已经发布给客户。

有没有办法通过任何解决方法来安装 msp？我们还想修复以前自定义任务的卸载问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:59:30.433

由于您的问题没有明确定义，因此很难提供详细建议。

当您应用 msp 时，已安装的产品不会卸载。补丁是对已安装的 msi 的转换，然后是修复。

可能可以修复自定义操作并在补丁中更新它。

# android - 与 listAdapter 和 setadapter 相处不愉快

> ID：13560343
> 
> 赞同：0
> 
> 时间：2012-11-26T07:22:16.893
> 
> 标签：android, eclipse, listview, adapter

**已编辑** *如果有人遇到同样的问题，我编辑了代码，现在正在工作* 首先感谢到目前为止帮助过我的所有人，我是 android 和 java 开发的新手，我在适配器和自定义行方面遇到了非常糟糕的时间。

好的，我已经根据提供的示例更改了代码，现在如下

```
public class EveryonesDiaries extends ListActivity {

private ProgressDialog m_ProgressDialog = null;
private ArrayList<Every> m_every = null;
private EveryAdapter m_adapter = null;
private Runnable viewEvery;
private String strcline;

SharedPreferences pref;
String userid = "";
String pageNum = "";
String maxNum = "";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.everyonesdiaries);

    m_every = new ArrayList<Every>();
    this.m_adapter = new EveryAdapter(this, R.layout.cellevery, m_every);
    setListAdapter(this.m_adapter);

    pref = getSharedPreferences("pref", MODE_PRIVATE);
    String userid = pref.getString("userid","");
    pageNum = "0";
    maxNum = "3";

    AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);

    StringBuilder data = new StringBuilder();
    data.append("--0xKhTmLbOuNdArY\r\n");
    data.append("Content-Disposition: form-data; name=\"userid\"\r\n\r\n");
    data.append(userid);
    data.append("\r\n--0xKhTmLbOuNdArY\r\n");
    data.append("Content-Disposition: form-data; name=\"pagenum\"\r\n\r\n");
    data.append(pageNum);
    data.append("\r\n--0xKhTmLbOuNdArY\r\n");
    data.append("Content-Disposition: form-data; name=\"maxnum\"\r\n\r\n");
    data.append(maxNum);
    data.append("\r\n--0xKhTmLbOuNdArY\r\n");
    String sendData = data.toString();

    try{
        String usedServer = Common.diaryHistory();
        strcline = Common.connect(sendData, usedServer);
        Log.d("string", strcline);

    }catch(Exception e){        
        e.printStackTrace();
        alertDialog.setTitle(R.string.title_error);
        alertDialog.setMessage(R.string.connection_error);
        alertDialog.setPositiveButton(R.string.ok_button, null);
        alertDialog.show();
    }

    viewEvery = new Runnable(){
        @Override
        public void run() {
            getEvery();
        }
    };

    Thread thread =  new Thread(null, viewEvery, "MagentoBackground");
    thread.start();
    m_ProgressDialog = ProgressDialog.show(EveryonesDiaries.this,     
          "Please wait...", "Retrieving data ...", true);
}

private Runnable returnRes = new Runnable() {

    @Override
    public void run() {
        Log.d("a3", ""+ m_every.size());
        if(m_every != null && m_every.size() > 0){
            m_adapter.notifyDataSetChanged();
            for(int i=0;i<m_every.size();i++)
            m_adapter.add(m_every.get(i));
        }
        m_ProgressDialog.dismiss();
        m_adapter.notifyDataSetChanged();
    }
};

private void getEvery(){

    try{
        //start to work the JSON array
        JSONArray a1 = new JSONArray(strcline);

        //Start decoding the first cycle of the JSON array
        for(int i=0; i < a1.length(); i++){
            JSONArray a2 =  a1.getJSONArray(i);
            Log.d("a1", String.valueOf(a2));
            String userName = a2.getString(1);
            String diaryDate = a2.getString(4);
            Log.d("a2", userName);
            Log.d("a2", diaryDate);
            Every e1 = new Every();
            e1.setUserName(userName);
            e1.setDiaryDate(diaryDate);
            m_every.add(e1);
            Thread.sleep(5000);
            Log.i("a2", ""+ m_every.size());
        }
    }catch(Exception e){
        Log.e("BACKGROUND_PROC", e.getMessage());
        }
    runOnUiThread(returnRes);
        } 
```

使用如下适配器：

```
private class EveryAdapter extends ArrayAdapter<Every> {

        private ArrayList<Every> items;

        public EveryAdapter(Context context, int textViewResourceId,      ArrayList<Every> items) {
                super(context, textViewResourceId, items);
                this.items = items;
        }
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
                View v = convertView;
                if (v == null) {
                    LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    v = vi.inflate(R.layout.cellevery, null);
                }
                Every e = items.get(position);
                Log.e("a2", String.valueOf(items));
                if(e != null){
                    TextView cName = (TextView) v.findViewById(R.id.cellName);
                    TextView cDate = (TextView) v.findViewById(R.id.cellDate);
                    if(cName != null){
                        cName.setText(e.getUserName());
                    if(cDate != null){
                        cDate.setText(e.getDiaryDate());
                    }
                }

                }
                return v;
        }
 } 
```

**编辑** 它缺少部分代码 *m_every = new ArrayList();* 它开始填充字段，但在第一个字段上停止，并继续显示带有“检索数据...”的可运行文件，直到它用完内存崩溃。

我认为我的问题出在这部分代码上，但我无法弄清楚。请如果有人可以帮助我理解。

```
private void getEvery(){

    try{
        //start to work the JSON array
        JSONArray a1 = new JSONArray(strcline);

                     // this part was missing
                     m_every = new ArrayList<Every>();

        //Start decoding the first cycle of the JSON array
        for(int i=0; i < a1.length(); i++){
            JSONArray a2 =  a1.getJSONArray(i);
            Log.d("a1", String.valueOf(a2));
            String userName = a2.getString(1);
            String diaryDate = a2.getString(4);
            Log.d("a2", userName);
            Log.d("a2", diaryDate);
            Every e1 = new Every();
            e1.setUserName(userName);
            e1.setDiaryDate(diaryDate);
            m_every.add(e1);
            Thread.sleep(5000);
            Log.i("a2", ""+ m_every.size());
        }
    }catch(Exception e){
        Log.e("BACKGROUND_PROC", e.getMessage());
        }
    runOnUiThread(returnRes);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:29:02.303

**Android 使用 Java Servlet HTTP 请求从 JSON 数据填充 ListView**

```
http://www.mysamplecode.com/2012/07/android-populate-listview-from-json.html 
```

嘿检查下面的链接列表视图。

```
http://devtut.wordpress.com/2011/06/09/custom-arrayadapter-for-a-listview-android/

http://windrealm.org/tutorials/android/android-listview.php 
```

在此处自定义行链接

```
http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/

http://android-er.blogspot.in/2010/06/custom-arrayadapter-with-with-different.html

http://theopentutorials.com/tutorials/android/listview/android-custom-listview-with-image-and-text-using-arrayadapter/ 
```

# magento - 在magento的观察者中捕获订单完成状态

> ID：13560346
> 
> 赞同：1
> 
> 时间：2012-11-26T07:22:38.440
> 
> 标签：magento

嗨，我想在订单完成或关闭时捕获订单信息。我尝试了不同的事件，例如 (sales_order_place_after)，但没有完成我的要求。我正在完成订单表单管理端并创建观察者来捕获 Xml 等信息：

```
<events>
        <sales_order_place_after>
        <observers>
            <extra_options>             
                <class>My_Module_Model_Observer</class>
                <method>salesConvertQuoteItemToOrderItem</method>
            </extra_options>
        </observers>
            </sales_order_place_after>
    </events> 
```

观察员：

```
public function salesConvertQuoteItemToOrderItem($observer)
    {

        $order = $observer->getOrder();
        $orders = $observer->getEvent()->getOrder();

        if($order->getState() == Mage_Sales_Model_Order::STATE_COMPLETE){
         echo "<pre>";
        print_r($orders);exit;
        }
    } 
```

任何人都可以帮忙吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T08:42:53.347

使用 sales_order_save_after 仍然很好，但它只需要您还检查状态（如 Mischa 建议的那样）：

```
public function salesOrderSaveAfter($observer)
{       
    $order = $observer->getEvent()->getOrder();
    if($order->getState() != Mage_Sales_Model_Order::STATE_COMPLETE) {
        return $this;
    }       

    if($order->getData('state') == $order->getOrigData('state')) {
        return $this;
    }

    // do your stuff

    return $this;
} 
```

这对我来说很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T09:28:08.970

除了收听错误的事件之外，您所做的一切都是正确的。你必须`sales_order_save_after`改用。

# python - 在 Python 中查找不等于不需要的字节的前一个字节

> ID：13560349
> 
> 赞同：1
> 
> 时间：2012-11-26T07:22:50.547
> 
> 标签：python, binary, blob, padding, seek

我正在编写一个小脚本，旨在打开一个二进制文件，找到一个经常变化的二进制 blob，然后将该 blob 复制到一个新文件中。

这是二进制文件的布局：

```
-JUNK (Unknown Size) (Unknown Contents)
-3-byte HEADER containing encoded size of blob
-PADDING (Unknown Size) (Every byte is FF in hex)
-Start of blob (72 bytes) (Unknown Contents)
-16 bytes that are ALWAYS the same
-End of blob (Size can be determined from subtracting (72+16) from value HEADER) (Unknown Contents)
-JUNK (Unknown Size) (Unknown Contents) 
```

这是我到目前为止编写的代码：

```
from sys import argv
import binascii
import base64

InputFileName = argv[1]

with open(InputFileName, 'rb') as InputFile:

    Constant16 = base64.b64decode("GIhTSuBask6y60iLI2VwIg==")
    Constant16Offset = InputFile.read().find(Constant16)

    InputFile.seek(Constant16Offset)
    InputFile.seek(-72,1)

    InputFile.seek(-1,1)
    FFTestVar = InputFile.read(1)

    while FFTestVar == b'\xFF':
        InputFile.seek(-2,1)
        FFTestVar = InputFile.read(1)

    InputFile.seek(-3,1)
    BlobSizeBin = InputFile.read(3)
    BlobSizeHex = binascii.b2a_hex(BlobSizeBin)
    BlobSizeDec = int(BlobSizeHex, 16)

    InputFile.seek(Constant16Offset)
    InputFile.seek(-72,1)

    Blob = InputFile.read(BlobSizeDec)

    with open('output.bin', 'wb') as OutputFile:

        OutputFile.write(Blob) 
```

不幸的是，*while*循环很慢。InputFile 最大可达 24MB，而填充可能是其中的一大块。一次一个字节地浏览它是非常慢的。

我在想可能有更好的方法可以做到这一点，但是谷歌搜索一两个小时并没有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:31:55.647

您可以将整个文件读入内存（实际上是这样做的）：

```
data = InputFile.read() 
```

然后你可以把`data`它当作随便的字符串（但它不是 unicode 字符串，而是一个字节数组，不幸的是`str`在 python 2.X 下调用）。您需要记住偏移量，以便我们创建`offset`属性。看起来像的每一行都`InputFile.seek(xx)`必须翻译`offset = xx`成.`InputFile.seek(xx, 1)``offset += xx`

```
magic_number = base64.b64decode("GIhTSuBask6y60iLI2VwIg==")
offset = magic_number_offset = data.find(magic_number)
offset -= 72 
```

然后，而不是 while 循环使用`re`模块（您需要导入该模块）：

```
pattern = re.compile("[^\xFF]\xFF*$")
offset = pattern.search(data, endpos=offset).start() + 1 
```

其余代码是：

```
offset -= 3
blob_size_bin = data[offset:offset+3]
blob_size_hex = binascii.b2a_hex(blob_size_bin)
blob_size_dec = int(blob_size_hex, 16)
offset = magic_number_offset - 72
blob = data[offset:offset+blob_size_dec] 
```

如果文件非常大并且python进程消耗大量内存，您可以使用`mmap`模块而不是将整个文件加载到内存中。

如果此解决方案仍然很慢，您可以反转数据顺序 ( `reversed_data = data[::-1]`) 并搜索 pattern `[^\ff]`。

# php - 显示弹出消息 onload

> ID：13560353
> 
> 赞同：-3
> 
> 时间：2012-11-26T07:22:53.260
> 
> 标签：php, javascript, html, javascript-events

问题是quote.html有一个提交表单，它通过在其中包含相同的页面进入php脚本和aganin，我想在第二次显示成功弹出，如果是的话，你能给我代码吗？如果你不能，请不要投票理解问题

我的 php 脚本：

```
include'quote.html'; 
```

quote.html->php script->quote.html（这次在弹出窗口中显示成功消息）

检测到在 php 脚本上加载并应该显示一个弹出消息

有可能吗，如果是，请帮助我获取代码..

提前致谢...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T07:52:28.230

当您重定向到 php 文件 script->quote.html 文件时，在 URL 中添加请求参数，例如 quote.html?pass=y

在quote.html文件中添加下面的java脚本以检测请求变量之后

```
<script>
function get(name){
   if(name=(new RegExp('[?&]'+encodeURIComponent(name)+'=([^&]*)')).exec(location.search))
      return decodeURIComponent(name[1]);
}
if(get('pass')=='y')
{
    //add your popup code 
}
</script> 
```

# android - 替代 LinearLayouts 的 layout_weight 属性？

> ID：13560356
> 
> 赞同：1
> 
> 时间：2012-11-26T07:23:02.230
> 
> 标签：android

我需要一个 View 来保存多个 TextView，不幸的是我不知道确切的数量。我需要将 TextViews 排序为彼此下方或彼此相邻的堆栈（想象俄罗斯方块，但只有矩形或正方形）。我尝试考虑的方式是使用 LinearLayout 水平或垂直地保持它们。然后，如果它们彼此相邻，我会使用它们的重量适当地拉伸它们。否则，我使用垂直方向。问题在于具有更复杂堆栈的嵌套线性布局的性能。我考虑过使用RelativeLayout，但这行不通，因为我需要TextViews 不重叠。所以就像如果他们彼此相邻，他们需要每个人均匀地占据足够的空间。使用 layout_weight 效果很好。

这是一个给我警告的例子（只是我以编程方式做的一个简单例子）：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >
<LinearLayout 
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:layout_weight="1">
    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Hello World 1"
        android:background="#000000"
        android:layout_weight="1"/>
    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Hello World 3"
        android:background="#000000"
        android:layout_weight="1"/>
        <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Hello World 4"
        android:background="#000000"
        android:layout_weight="1"/>
</LinearLayout>
<LinearLayout 
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:layout_weight="1">
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Hello World 2"
        android:background="#000000" />
</LinearLayout> 
```

顺便说一句，我已经尝试过使用 RelativeLayout，但是其中一个 TextView 需要设置大小，但我需要它们均匀地占用空间。我不知道具体的尺寸。测量屏幕宽度并以这种方式划分它既笨重又不精确。我感谢任何人的意见。

**编辑：**所以我一直在考虑更多，并想到了使用RelativeLayout的解决方案。[Android文档](http://developer.android.com/guide/topics/ui/layout/relative.html)中有一个很好的示例，但唯一的问题是其中一个视图需要设置大小，以便另一个可以拉伸。但是如果有一种方法可以让它们都没有固定的尺寸，那也可以，这样它们就可以伸展了。有人在某个时候尝试过这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:45:15.897

有点不清楚你的最终用例是什么样的，所以我不知道这是否会完全解决你的问题，但你可以看看`TableLayout`（[文档链接](https://developer.android.com/reference/android/widget/TableLayout.html)）。它基于`LinearLayout`so 项目仍然可以定义为均匀占据给定空间，但它允许您根据行和列定义位置和跨度。

因此，例如，您的示例代码如下所示：

```
<TableLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:stretchColumns="*" >
    <!-- Wrap all items in a given row in a TableRow -->
    <TableRow>
        <TextView
            android:text="Hello World 1"
            android:background="#000000"/>
        <TextView
            android:text="Hello World 3"
            android:background="#000000"/>
        <TextView
            android:text="Hello World 4"
            android:background="#000000"/>
    </TableRow>
    <!-- If a child occupies an entire row, it can be by itself -->
    <TextView
        android:text="Hello World 2"
        android:background="#000000"/>
</TableLayout> 
```

您还可以使用`android:layout_column`和`android:layout_span`属性来准确定义项目应该在哪一列，以及它应该占据多少列。另请注意，`TableLayout`并且`TableRow`基本上忽略了任何应用的布局参数并使用非常具体的（记录的）参数，因此将它们添加到您的代码只会混淆实际发生的情况。当然，这一切都可以通过编程方式以及在 XML 中构建。

如果这不能提供您需要的灵活性，那么我建议您创建自己的自定义布局，该布局可以扩展或基于`LinearLayout`. 该机制用于测量儿童的体重并不复杂，然后您可以在测量后覆盖每个孩子的放置方式。如果您想了解平台是如何做这些事情的，这里是一个[源链接。](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/widget/LinearLayout.java)`LinearLayout`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-06T07:48:10.627

**更新：**正如我们所知，API 级别 26 已弃用百分比支持库。`ConstraintLayout`这是实现相同平面 xml 结构的新方法。

[**更新了 Github 项目**](https://i.stack.imgur.com/9vuL3.png)

**更新示例：**

```
<android.support.constraint.ConstraintLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:id="@+id/fifty_thirty"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:background="#ffff8800"
        android:gravity="center"
        android:text="@string/fifty_fifty_text"
        android:textColor="@android:color/white"
        app:layout_constraintHeight_default="percent"
        app:layout_constraintHeight_percent="0.5"
        android:textSize="25sp"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintWidth_default="percent"
        app:layout_constraintWidth_percent="0.5" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:background="#ffff5566"
        android:gravity="center"
        android:text="@string/fifty_fifty_text"
        android:textColor="@android:color/white"
        android:textSize="25sp"
        app:layout_constraintHeight_default="percent"
        app:layout_constraintHeight_percent="0.5"
        app:layout_constraintLeft_toRightOf="@id/fifty_thirty"
        app:layout_constraintTop_toBottomOf="@id/fifty_thirty"
        app:layout_constraintWidth_default="percent"
        app:layout_constraintWidth_percent="0.5" />

</android.support.constraint.ConstraintLayout> 
```

**已弃用**

**更新：**我们也可以使用 android 支持库。

```
compile 'com.android.support:percent:23.0.0' 
```

考虑这个将屏幕划分为 50-50% 的演示。

```
<android.support.percent.PercentRelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <TextView
        android:id="@+id/fifty_huntv"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:background="#ff7acfff"
        android:text="20% - 50%"
        android:textColor="@android:color/white"
        app:layout_heightPercent="20%"
        app:layout_widthPercent="50%" />
    <TextView
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_toRightOf="@id/fifty_huntv"
        android:background="#ffff5566"
        android:text="80%-50%"
        app:layout_heightPercent="80%"
        app:layout_widthPercent="50%"
        />

</android.support.percent.PercentRelativeLayout> 
```

**输出：**

[![百分比支持库演示](../Images/6bf9702d130b5b544beb91f2552b713f.png)](https://i.stack.imgur.com/9vuL3.png)

[演示在这里！！！](http://code2concept.blogspot.in/2015/08/android-percent-support-lib-sample.html)

[GitHub项目在这里！！！](https://github.com/nitiwari-dev/android-percent-layout-sample)

# android - 秒表在后台模式下不起作用

> ID：13560358
> 
> 赞同：0
> 
> 时间：2012-11-26T07:23:13.507
> 
> 标签：android

我有一个秒表，它工作正常，但是当我按下主页按钮或按钮关闭铃并在一段时间后重新打开它时，我在秒表中看到错误的时间。请告诉我我能做些什么来解决这个问题？

```
public class Stopwatch extends Activity {
    Timer mTimer;
    int second_f_p = 0, second_s_p = 0, millisecond = 0;
    int minute_f_p = 0, minute_s_p;
    int hour_f_p = 0, hour_s_p = 0;
    int numberOfLap = 0;
    TextView tv;
    TextView TVlap;
    Button btn_start;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_stopwatch);

        btn_start = (Button) this.findViewById(R.id.button1);
        tv = (TextView) this.findViewById(R.id.tvTime);
        btn_start.setOnClickListener(new View.OnClickListener() {@Override
            public void onClick(View arg0) {
                btn_start.setClickable(false);
                mTimer = new Timer();
                mTimer.schedule(new TimerTask() {

                    @Override
                    public void run() {
                        timerMethod();
                    }

                }, 0, 100);

            }
        });

        Button btn_stop = (Button) this.findViewById(R.id.button2);
        btn_stop.setOnClickListener(new View.OnClickListener() {@Override
            public void onClick(View v) {
                btn_start.setClickable(true);
                mTimer.cancel();
            }

        });

        Button btn_reset = (Button) this.findViewById(R.id.button4);
        btn_reset.setOnClickListener(new View.OnClickListener() {@Override
            public void onClick(View v) {

                second_f_p = 0;
                second_s_p = 0;
                minute_f_p = 0;
                minute_s_p = 0;
                millisecond = 0;
                hour_f_p = 0;
                hour_s_p = 0;
                numberOfLap = 0;
                TVlap.setText("");
                tv.setText(String.valueOf(hour_f_p) + String.valueOf(hour_s_p) + ":" + String.valueOf(minute_f_p) + String.valueOf(minute_s_p) + ":" + String.valueOf(second_f_p) + String.valueOf(second_s_p) + "." + String.valueOf(millisecond));
            }

        });
        TVlap = (TextView) this.findViewById(R.id.tvLap);
        Button btn_lap = (Button) this.findViewById(R.id.button3);
        btn_lap.setOnClickListener(new View.OnClickListener() {@Override
            public void onClick(View v) {
                numberOfLap++;
                TVlap.setText(TVlap.getText() + String.valueOf(numberOfLap) + ". " + String.valueOf(hour_f_p) + String.valueOf(hour_s_p) + ":" + String.valueOf(minute_f_p) + String.valueOf(minute_s_p) + ":" + String.valueOf(second_f_p) + String.valueOf(second_s_p) + "." + String.valueOf(millisecond) + "\n");
            }

        });

    }

    private void timerMethod() {
        this.runOnUiThread(doSomething);
    }

    private final Runnable doSomething = new Runnable() {@Override
        public void run() {
            millisecond++;

            if (millisecond == 10) {
                second_s_p++;
                millisecond = 0;

            }

            if (second_s_p == 10) {
                second_f_p++;
                second_s_p = 0;
            }
            if (second_f_p == 6) {
                minute_s_p++;
                second_f_p = 0;
            }
            if (minute_s_p == 10) {
                minute_f_p++;
                minute_s_p = 0;
            }
            if (minute_f_p == 6) {
                hour_s_p++;
                minute_f_p = 0;
            }

            if (hour_s_p == 10) {
                hour_f_p++;
                hour_s_p = 0;
            }

            if (hour_f_p == 9 && hour_s_p == 9) {
                second_f_p = 0;
                second_s_p = 0;
                minute_f_p = 0;
                minute_s_p = 0;
                hour_f_p = 0;
                hour_s_p = 0;
            }
            tv.setText(String.valueOf(hour_f_p) + String.valueOf(hour_s_p) + ":" + String.valueOf(minute_f_p) + String.valueOf(minute_s_p) + ":" + String.valueOf(second_f_p) + String.valueOf(second_s_p) + "." + String.valueOf(millisecond));
        }

    };

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_stopwatch, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:36:17.810

请参阅下面的代码链接

```
http://www.edumobile.org/android/android-development/stop-watch-example/ 
```

如果您查看 Chronometer 类的源代码，您会发现它不会将经过的时间存储在字段中，并且每次需要更新显示时都会在内部计算它。

然而，在你自己的代码中做同样的事情相对容易：

```
long elapsedMillis = SystemClock.elapsedRealtime() - chronometerInstance.getBase(); 
```

这假设你已经开始你的时钟是这样的：

```
chronometerInstance.setBase(SystemClock.elapsedRealtime());
chronometerInstance.start(); 
```

这是一个完整的例子：

```
public class ChronoExample extends Activity {
Chronometer mChronometer;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    LinearLayout layout = new LinearLayout(this);
    layout.setOrientation(LinearLayout.VERTICAL);

    mChronometer = new Chronometer(this);
    layout.addView(mChronometer);

    Button startButton = new Button(this);
    startButton.setText("Start");
    startButton.setOnClickListener(mStartListener);
    layout.addView(startButton);

    Button stopButton = new Button(this);
    stopButton.setText("Stop");
    stopButton.setOnClickListener(mStopListener);
    layout.addView(stopButton);

    Button resetButton = new Button(this);
    resetButton.setText("Reset");
    resetButton.setOnClickListener(mResetListener);
    layout.addView(resetButton);        

    setContentView(layout);
}

private void showElapsedTime() {
    long elapsedMillis = SystemClock.elapsedRealtime() - mChronometer.getBase();            
    Toast.makeText(ChronoExample.this, "Elapsed milliseconds: " + elapsedMillis, 
            Toast.LENGTH_SHORT).show();
}

View.OnClickListener mStartListener = new OnClickListener() {
    public void onClick(View v) {
        mChronometer.start();
        showElapsedTime();
    }
};

View.OnClickListener mStopListener = new OnClickListener() {
    public void onClick(View v) {
        mChronometer.stop();
        showElapsedTime();
    }
};

View.OnClickListener mResetListener = new OnClickListener() {
    public void onClick(View v) {
        mChronometer.setBase(SystemClock.elapsedRealtime());
        showElapsedTime();
    }
};
} 
```

关于 Chronometer 的一个有点令人困惑的事情是，您不能真正将它用作开始、停止和重新启动的秒表。当它运行时，它将始终显示自上次重置以来经过的时间，无论您在此期间停止了多少次和多长时间。当它停止时，它只是停止更新显示。

# .net - 将 Datagridview1(Table1) 中的值相加并将其保存到 Datagridview2(Table2) 使用 Linq 和 MySql

> ID：13560361
> 
> 赞同：1
> 
> 时间：2012-11-26T07:23:33.713
> 
> 标签：.net, mysql, vb.net, winforms, linq

我正在尝试将值相加`Datagridview1(Table1)`并将其保存到`Datagridview2(Table2)`

两者`DGVs`都是`Databound`并且都具有相同的 2 列`Name, Quantity`。

我`Childform1(DGV1)`有一个`Textbox1`和一个`Post`按钮。

用户必须输入一个`Name`on`Textbox1`并点击`Post`，然后所有与输入的on相同的`Quantity`on`DGV1`必须相加。`Name``Textbox1`

前任：

**表格1**

```
Name | Quantity
 a       10
 b        5
 a       10
 b        5 
```

按下`POST`按钮后

**表 2**

```
Name | Quantity
 a        20
 b        10 
```

**代码**

```
 Dim occurences As New Dictionary(Of String, Double)
    Dim oTempObjects As New List(Of DataGridViewRow)

    MasterForm.oTransferRows = oTempObjects

    For Each xRow As DataGridViewRow In Datagridview1.Rows

        If (Not xRow.Cells("GVName").Value Is Nothing AndAlso xRow.Cells("GVName").Value.ToString() = TextBox1.Text) Then

            oTempObjects.Add(xRow)
        End If
    Next

    Dim _Name As New List(Of String)

    For Each xRows In MasterForm.oTransferRows

        _Name.Add("'" & xRows.Cells("GVName").Value.ToString() & "'")

        Dim inClause1 As String = String.Join(",", _Name.ToArray())
        Dim _sqlUpdate As String = String.Format("UPDATE tested SET Posted = @Posted WHERE Name IN ({0})", inClause1)

        Using _conn As New MySqlConnection("Server = localhost; Username= root; Password =; Database = test")
            Using _commm As New MySqlCommand()
                With _commm

                    .CommandText = _sqlUpdate
                    .Connection = _conn
                    .CommandType = CommandType.Text
                    .Parameters.AddWithValue("@Posted", "Yes")

                End With
                Try

                    _conn.Open()
                    _commm.ExecuteNonQuery()

                Catch ex As MySqlException

                    MsgBox(ex.StackTrace.ToString)

                End Try

                _conn.Close()

            End Using
        End Using

        If (occurences.ContainsKey(xRows.Cells(1).Value.ToString())) Then

            occurences(xRows.Cells(1).Value.ToString()) = Double.Parse(occurences(xRows.Cells(1).Value.ToString()).ToString()) + Double.Parse(xRows.Cells(4).Value.ToString())

        Else

            occurences.Add(xRows.Cells(1).Value.ToString(), Double.Parse(xRows.Cells(4).Value.ToString()))
        End If

    Next

    For Each KVP As KeyValuePair(Of String, Double) In occurences
        oChildForm2.DataGridView2.Rows.Add(New Object() {KVP.Key, KVP.Value})
    Next

    Dim xlist As List(Of KeyValuePair(Of String, Double)) = occurences.ToList

    For Each pair As KeyValuePair(Of String, Double) In occurences

        Dim oUpdateString = String.Format("Insert Into testing (Name, Quantity) VALUES (@iName, @iQty)")
        Using _conn As New MySqlConnection("Server = localhost; Username= root; Password =; Database = test")
            Using _commm As New MySqlCommand()
                With _commm

                    .CommandText = oUpdateString
                    .Connection = _conn
                    .CommandType = CommandType.Text
                    .Parameters.AddWithValue("@iName", pair.Key)
                    .Parameters.AddWithValue("@iQty", pair.Value)
                End With
                Try

                    _conn.Open()
                    _commm.ExecuteNonQuery()

                Catch ex As MySqlException

                    MsgBox(ex.StackTrace.ToString)

                End Try

                _conn.Close()

            End Using
        End Using
    Next 
```

此代码仅`DGV1`在第一次单击时汇总相同的名称并将其保存在`DGV2`.

但例如我添加了另一个`DGV1`同名的数据，

我希望将新添加数据的 QUANTITY 添加到 DGV2 上现有数据的当前总和中。

对此也有一点帮助会非常棒。**

前任：

**表 2**

```
Name | Quantity
 a       20
 b       10 
```

然后我在表 1 中添加数据

**表格1**

```
Name | Quantity
  a       20
  b       10 
```

发帖后

**表2**

```
Name | Quantity
 a        40
 b        20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:47:56.607

在遍历行时检查 Posted 列以查看是否已发布行：

```
For Each xRows In MasterForm.oTransferRows.Where(Function(x) x.Cells("Posted").Value.ToString() = "No") 
```

然后使用以下伪逻辑编写代码：

```
 'code to select data - select name from testing where name = 'Product1'
 'if(dr.Read())
 'update goes here
 'Else
 ' insert goes here
 'End if 
```

# iphone - 将 NSMutableArray 添加到另一个 NSMutableArray 时覆盖最后一个数组值

> ID：13560363
> 
> 赞同：1
> 
> 时间：2012-11-26T07:23:37.503
> 
> 标签：iphone, objective-c, nsstring, nsmutablearray, nsarray

```
 NSMutableArray *no1=[[NSMutableArray alloc]init];
    NSMutableArray *no2=[[NSMutableArray alloc]init];

    for(int i=0;i<3;i++)
    {
        for (int j=0;j<=i;j++)
        {
            NSString *no_str=[NSString stringWithFormat:@"%d",j];
            [no1 addObject:no_str];
        }
        [no2 addObject:no1];
        [no1 removeAllObjects];
    }
    NSLog(@"Final:%@",no2); 
```

我得到如下输出：

决赛：( ( 0, 1, 2 ), ( 0, 1, 2 ), ( 0, 1, 2 ) )

但我需要这样的输出：

决赛：( ( 0 ), ( 0, 1 ), ( 0, 1, 2 ) )

请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:45:47.393

![在此处输入图像描述](../Images/4cedf29a74659194fdd1a952da201613.png)

我假设你使用的是 ARC，所以这段代码会很好用。

```
NSMutableArray *no1;
NSMutableArray *no2=[[NSMutableArray alloc]init];

for(int i=0;i<3;i++)
{
    no1=[[NSMutableArray alloc]init];
    for (int j=0;j<=i;j++)
    {
        NSString *no_str=[NSString stringWithFormat:@"%d",j];
        [no1 addObject:no_str];
    }
    [no2 addObject:no1];
}
NSLog(@"Final:%@",no2); 
```

编辑：即使你 alloc init the no1 结果也是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:42:47.937

更新代码：-

```
NSMutableArray *no1;

    NSMutableArray *no2=[[NSMutableArray alloc]init];

    for(int i=0;i<3;i++)
    {
        no1=[[NSMutableArray alloc]init];
        for (int j=0;j<=i;j++)
        {
            NSString *no_str=[NSString stringWithFormat:@"%d",j];
            [no1 addObject:no_str];
        }
        [no2 addObject:no1];
        [no1 release];
    }
    NSLog(@"Final:%@",no2); 
```

# python - 简化列表

> ID：13560365
> 
> 赞同：0
> 
> 时间：2012-11-26T07:23:47.330
> 
> 标签：python, simplify, simplification

如何简化此代码？就是那个问题。

```
 stat_keys.append(self.request.get("stat_one"))
    stat_keys.append(self.request.get("stat_two"))
    stat_keys.append(self.request.get("stat_three"))
    stat_keys.append(self.request.get("stat_four")) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T07:27:00.410

```
stat_keys += [self.request.get(k) for k in ('stat_one', 'stat_two', 'stat_three', 'stat_four')] 
```

或者

```
stat_keys += map(self.request.get, ('stat_one', 'stat_two', 'stat_three', 'stat_four'))) 
```

或者

```
map(stat_keys.append, map(self.request.get, ('stat_one', 'stat_two', 'stat_three', 'stat_four'))) 
```

不过我建议第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T07:31:05.570

`.extend()`使用生成器表达式更改为：

```
stat_keys.extend(self.request.get(stat) for stat in('stat_one', 'stat_two', 'stat_three', 'stat_four')) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T07:26:17.067

在不知道任何变量是什么的情况下很难回答，但是这个怎么样：

```
for stat in ('stat_one', 'stat_two', 'stat_three', 'stat_four'):
    stat_keys.append(self.request.get(stat)) 
```

或者，使用生成器表达式：

```
[stat_keys.append(self.request.get(stat)) for stat in ('stat_one', 'stat_two', 'stat_three', 'stat_four')] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T07:31:15.003

```
s_list = [ "stat_one", "stat_two", "stat_three", "stat_four" ]
[ stat_keys.append(self.request.get(s)) for s in s_list ] 
```

# c# - 使用 OleDB 命令更新 Excel 中的整行

> ID：13560374
> 
> 赞同：1
> 
> 时间：2012-11-26T07:24:25.090
> 
> 标签：c#, excel, oledbconnection, oledbcommand

我正在尝试空白/清除整个 Excel 选项卡。但似乎没有任何效果

我尝试了以下方法：

```
OleDbConnection connection = new OleDbConnection(connectionString);
OleDbCommand command = new OleDbCommand("Select * FROM [Sheet1$]", connection);
OleDbCommand count = new OleDbCommand("Select count(*) FROM [Sheet1$]", connection);

DataSet dataset = new DataSet();
OleDbDataAdapter adapter = new OleDbDataAdapter();
adapter.SelectCommand = new OleDbCommand("Select * from [Sheet1$]", connection);
adapter.Fill(dataset);

for (int i = 0; i < dataset.Tables[0].Rows.Count; i++)
{
    DataRow dtRow = dataset.Tables[0].Rows[i];
    foreach (DataColumn col in dataset.Tables[0].Columns)
    {
        if(col.DataType == typeof(string))
        dataset.Tables[0].Rows[i][col] = "";
   }

}
dataset.Tables[0].AcceptChanges();
adapter.Update(dataset.Tables[0]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T06:48:10.763

如果你的 Excel 文件有主键，你可以使用 OleDbCommandBuilder，如果没有，OleDbDataAdapter 或 OleDbCommand 会是更好的方法。适配器。你不能直接使用 Update(dataset.Tables[0])，这里是代码：

```
 OleDbDataAdapter adapter = new OleDbDataAdapter("SELECT * FROM [Sheet1$]", myConnection);
            DataTable dt = new DataTable();
            adapter.Fill(dt);
            string updateSQL = string.Format(@"UPDATE [Sheet1$] SET Status =? WHERE ID IN ( SELECT TOP 5 ID FROM [Sheet1$] WHERE Status <>? OR Status IS NULL )");
            adapter.UpdateCommand = new OleDbCommand(updateSQL, myConnection);
            adapter.UpdateCommand.Parameters.Add("@Status", OleDbType.Char, 255).SourceColumn = "Status";
            adapter.UpdateCommand.Parameters.Add("@OldStatus", OleDbType.Char, 255, "Status").SourceVersion = DataRowVersion.Original;
            dt.AsEnumerable().Take(5).ToList().ForEach(o => o.SetField("Status", @"Imported"));
            dt.AcceptChanges();
            adapter.Update(dt); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T08:35:43.110

我想操作 excel 文件，[NPOI](http://npoi.codeplex.com/)对你来说是一个更好的选择。

它是开源的且易于使用。

我以前使用 OLEDB 读取 excel 文件，但从未尝试使用它来更新数据。如果您必须使用它，请确保您的 excel 文件不是只读的。

# xml - 在 xslt 中创建序列号

> ID：13560379
> 
> 赞同：8
> 
> 时间：2012-11-26T07:24:51.560
> 
> 标签：xml, xslt, xslt-2.0

输入 XML：

```
<doc>
 <section>
  <para>Paragraph 1</para>
  <para>Paragraph 2</para>
  <para>Paragraph 3</para>
 </section>
  <para>Paragraph 4</para>
  <para>Paragraph 5</para>
  <para>Paragraph 6</para>
</doc> 
```

所需输出：

```
<book>
<section>
  <p class="para" id="0001">Paragraph 1</p>
  <p class="para" id="0002">Paragraph 2</p>
  <p class="para" id="0003">Paragraph 3</p>
 </section>
  <p class="para" id="0004">Paragraph 4</p>
  <p class="para" id="0005">Paragraph 5</p>
  <p class="para" id="0006">Paragraph 6</p>
 </book> 
```

我尝试使用 XSL，但没有得到想要的输出。任何人都可以帮助我吗？

```
<xsl:template match="para">
    <xsl:variable name="count" select="position()"/>
    <p class="para" id="{$count}">
        <xsl:apply-templates/>
    </p>
</xsl:template> 
```

我得到的结果是：

```
<p class="para" id="2">Paragraph 1</p>
<p class="para" id="4">Paragraph 2</p>
<p class="para" id="6">Paragraph 3</p>

    <p class="para" id="4">Paragraph 4</p>
    <p class="para" id="6">Paragraph 5</p>
    <p class="para" id="8">Paragraph 6</p> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-26T08:22:18.753

这是一个未使用`xsl:for-each`或任何`xsl:variable`'s 的选项...

**XML 输入**

```
<doc>
    <section>
        <para>Paragraph 1</para>
        <para>Paragraph 2</para>
        <para>Paragraph 3</para>
    </section>
    <para>Paragraph 4</para>
    <para>Paragraph 5</para>
    <para>Paragraph 6</para>
</doc> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="doc">
        <book>
            <xsl:apply-templates select="@*|node()"/>
        </book>
    </xsl:template>

    <xsl:template match="para">
        <p class="para" id="{format-number(count(preceding::para)+1,'0000')}">
            <xsl:apply-templates select="@*|node()"/>
        </p>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<book>
   <section>
      <p class="para" id="0001">Paragraph 1</p>
      <p class="para" id="0002">Paragraph 2</p>
      <p class="para" id="0003">Paragraph 3</p>
   </section>
   <p class="para" id="0004">Paragraph 4</p>
   <p class="para" id="0005">Paragraph 5</p>
   <p class="para" id="0006">Paragraph 6</p>
</book> 
```

* * *

第二种选择是`preceding::para`您可以使用`xsl:number`...而不是计数

```
<xsl:template match="para">
    <p class="para">
        <xsl:attribute name="id">
            <xsl:number format="0000" level="any"/>
        </xsl:attribute>
        <xsl:apply-templates select="@*|node()"/>
    </p>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T07:45:27.440

这是您需要的 xsl

```
 <xsl:template match="doc">
    <book>
        <section>
            <xsl:for-each select="section/para">
                <xsl:variable name="count" select="position()"/>
                <xsl:variable name ="seq">
                    <xsl:value-of select="format-number($count,'0000')"/>
                </xsl:variable>
                <p class="para" id="{$seq}">
                    <xsl:value-of select="."/>
                </p>
            </xsl:for-each>
        </section>
        <xsl:variable name="secCount" select="count(section/para)"/>
        <xsl:for-each select="para">
            <xsl:variable name="count" select="position()"/>
            <xsl:variable name ="seq">
            <xsl:value-of select="format-number( number($count) + number($secCount),'0000')"/>
        </xsl:variable>
            <p class="para" id="{$seq}">
                <xsl:value-of select="."/>
            </p>
        </xsl:for-each>
    </book>
</xsl:template> 
```

# ruby-on-rails - 如何在迁移脚本中的表上设置自动递增 1

> ID：13560381
> 
> 赞同：0
> 
> 时间：2012-11-26T07:25:02.643
> 
> 标签：ruby-on-rails, rails-migrations

如何在迁移脚本中的表上设置自动递增 1

> > `ALTER TABLE Table_name AUTO_INCREMENT = 1;`

是否可以在创建表期间或之后在您的数据库迁移脚本中提及这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:19:11.043

也许有更好的解决方案。否则，您可以在迁移脚本中运行原始 SQL 语句，如下所示：

```
ActiveRecord::Base.connection.execute("ALTER TABLE Table_name AUTO_INCREMENT = 1") 
```

# asp.net - 使用格式化将数据导出到 Excel、Word 和 PDF

> ID：13560392
> 
> 赞同：0
> 
> 时间：2012-11-26T07:26:16.730
> 
> 标签：asp.net

我想以 Word、Excel 和 PDF 格式的页眉颜色、字体大小、行颜色等格式导出 DataTable 或 DataSet 的数据。是否可以？

如果是，那怎么办？请医治我。我的代码如下。

```
public void ExportToExcel(DataTable dt)
{   
        con.Open();
        string sql = "select *from test";
        cmd = new SqlCommand(sql, con);
        dt = new DataTable();
        da = new SqlDataAdapter(cmd);
        da.Fill(dt);
        GridView1.DataSource = dt;
        GridView1.DataBind();
        cmd.Dispose();

        string filename = "DownloadTest.xls";
        System.IO.StringWriter tw = new System.IO.StringWriter();
        System.Web.UI.HtmlTextWriter hw = new System.Web.UI.HtmlTextWriter(tw);
        DataGrid dgGrid = new DataGrid();
        dgGrid.DataSource = dt;
        dgGrid.DataBind();
        DataSet ds = new DataSet();
        ds = dt.Clone;

        dgGrid.RenderControl(hw);

        Response.ContentType = "application/vnd.ms-excel";
        Response.AppendHeader("Content-Disposition", "attachment; filename=" + filename + "");
        this.EnableViewState = false;
        Response.Write(tw.ToString());
        Response.End();

        con.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:32:12.207

对于pdf：-

我认为你应该使用'itextSharp'。你可以通过这个链接
[http://www.codeproject.com/Articles/81118/ITextSharp-Helper-Class](http://www.codeproject.com/Articles/81118/ITextSharp-Helper-Class)
你可以从这里下载它（.dll）
[http://sourceforge.net/projects/itextsharp/](http://sourceforge.net/projects/itextsharp/)

对于 excel 和 word，您可以使用 gridview 将其导出为带有颜色和字体的 excel 和 word。
对于excel，您可以通过此[链接](http://exporttoexcel.codeplex.com/)

# android - 如何使用固定行和水平滚动条应用 Gridview

> ID：13560393
> 
> 赞同：2
> 
> 时间：2012-11-26T07:26:16.573
> 
> 标签：android, android-layout, android-gridview

我想用三行多列实现gridview。我尝试了下面的代码，但无法实现我想要的。

我的 xml 文件是

```
<LinearLayout
    android:layout_width="300dp"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <HorizontalScrollView
        android:id="@+id/horizontalScrollView1"
        android:layout_width="340dp"
        android:layout_height="wrap_content"
        android:fillViewport="true" >

        <GridView
            android:id="@+id/gridView"
            android:layout_width="340dp"
            android:layout_height="385dp"
            android:layout_marginBottom="30dp"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"
            android:layout_marginTop="20dp"
            android:columnWidth="90dp"
            android:horizontalSpacing="10dp"
            android:verticalSpacing="10dp" 
            android:padding="5dp"
            android:scrollbars="horizontal">

        </GridView>
    </HorizontalScrollView>

</LinearLayout> 
```

和活动文件代码是

```
gridView.setAdapter(new ImageAdapter(this,id_list,favflag_list,thumb_img_list));
    gridView.setNumColumns(5); 
```

是否可以实现或任何其他方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:31:57.113

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/grid_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:numColumns="auto_fit"
    android:columnWidth="90dp"
    android:horizontalSpacing="10dp"
    android:verticalSpacing="10dp"
    android:gravity="center"
    android:stretchMode="columnWidth" >  

</GridView> 
```

绑定适配器：

```
public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    // Keep all Images in array
    public Integer[] mThumbIds = {
            R.drawable.pic_1, R.drawable.pic_2,
            R.drawable.pic_3, R.drawable.pic_4,
            R.drawable.pic_5, R.drawable.pic_6,
            R.drawable.pic_7, R.drawable.pic_8,
            R.drawable.pic_9, R.drawable.pic_10,
            R.drawable.pic_11, R.drawable.pic_12,
            R.drawable.pic_13, R.drawable.pic_14,
            R.drawable.pic_15
    };

    // Constructor
    public ImageAdapter(Context c){
        mContext = c;
    }

    @Override
    public int getCount() {
        return mThumbIds.length;
    }

    @Override
    public Object getItem(int position) {
        return mThumbIds[position];
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView = new ImageView(mContext);
        imageView.setImageResource(mThumbIds[position]);
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setLayoutParams(new GridView.LayoutParams(70, 70));
        return imageView;
    }

} 
```

主要活动 ：

```
public class AndroidGridLayoutActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.grid_layout);

        GridView gridView = (GridView) findViewById(R.id.grid_view);

        // Instance of ImageAdapter Class
        gridView.setAdapter(new ImageAdapter(this));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:57:32.100

这取决于您的数据。如果您添加更多数据，它将改变其大小。例子。如果您有 9 张图片要存储在 gridview 中。您必须`android:numColumns = "3"`在 xml 中设置，它会显示 3 行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-26T11:39:39.860

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/gridview"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:numColumns="auto_fit"
 android:verticalSpacing="10dp"
 android:horizontalSpacing="10dp"
 android:columnWidth="90dp"
 android:stretchMode="columnWidth"
 android:gravity="center"
/> 
```

自定义 xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:orientation="vertical">
 <ImageView
  android:id="@+id/imagepart"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"/>
 <TextView
  android:id="@+id/textpart"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"/>
</LinearLayout> 
```

主要活动 ：

```
public class CustomGridView extends Activity {

 // references to our images
 private Integer[] mThumbIds = {
   R.drawable.androider_01,
   R.drawable.androider_02,
   R.drawable.androider_03,
   R.drawable.androider_04,
   R.drawable.androider_05,
   R.drawable.androider_06,
   R.drawable.androider_07,
   R.drawable.androider_08,
   R.drawable.androider_09,
   R.drawable.androider_10,
   R.drawable.androider_11,
   R.drawable.androider_12,
   R.drawable.androider_13,
   R.drawable.androider_14,
   R.drawable.androider_15,
   R.drawable.androider_16
   };

    public class MyAdapter extends BaseAdapter {

     private Context mContext;

  public MyAdapter(Context c) {
   // TODO Auto-generated constructor stub
   mContext = c;
  }

  @Override
  public int getCount() {
   // TODO Auto-generated method stub
   return mThumbIds.length;
  }

  @Override
  public Object getItem(int arg0) {
   // TODO Auto-generated method stub
   return mThumbIds[arg0];
  }

  @Override
  public long getItemId(int arg0) {
   // TODO Auto-generated method stub
   return arg0;
  }

  @Override
  public View getView(int position, View convertView, ViewGroup parent) {
   // TODO Auto-generated method stub

   View grid;

   if(convertView==null){
    grid = new View(mContext);
    LayoutInflater inflater=getLayoutInflater();
    grid=inflater.inflate(R.layout.mygrid, parent, false);
   }else{
    grid = (View)convertView;
   }

   ImageView imageView = (ImageView)grid.findViewById(R.id.imagepart);
   TextView textView = (TextView)grid.findViewById(R.id.textpart);
   imageView.setImageResource(mThumbIds[position]);
   textView.setText(String.valueOf(position));

   return grid;
  }

 }

 /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        GridView gridview = (GridView) findViewById(R.id.gridview);
        gridview.setAdapter(new MyAdapter(this));

    }
} 
```

# ruby - Ruby csv文件相关操作

> ID：13560396
> 
> 赞同：-1
> 
> 时间：2012-11-26T07:26:30.587
> 
> 标签：ruby

我正在处理与文件相关的任务..我有一个包含一些行和标题的 CSV 文件..我需要获取具有特定标题的列并在最后创建一个新列并执行一些操作..我如何获取列具有特定标题值的值以及我如何最终创建新列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:01:11.990

假设您有以下格式的 CSV

邮政编码 网络 ID 网络名称 区域 新网络？显示名称 64024 275 Kansas City 2 No Kansas City 64034 275 Kansas City 2 No Kansas City

您可以使用 FasterCSV；如果您的 csv 中有标题，那么您可以指定它`headers => true`，您可以使用 FasterCSV 逐行获取数据，如下所示

```
FasterCSV.foreach(path_to_file, { :headers => true, :row_sep => :auto }) do |row| 
```

每次迭代 csv 时，您都会从 CSV 文件中获取行，现在您已经知道第 2 列具有“network_id”标题，第 3 列具有“网络名称”标题，因此您可以轻松给出`network_id = row[2]`，`network_name = row[3]`

希望它能回答你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:47:10.423

CSV 中的第一条记录可被视为 Header 记录。没有任何规则规定必须如此。

来回答你的问题。简短的回答是您必须编写逻辑（使用或不使用 API）来获取您认为是“标题”的内容。

> 我需要获取具有特定标题的列并在最后创建一个新列并执行一些操作

我认为 API 不会提供任何隐式机制来获取特定的标头。AFAIK CSV 没有规范。您可以使用 FasterCSV 之类的 API 来解析 CSV 以完成工作。

# iphone - 如何通过 POST 向服务器提交非常长的字符串并获得 JSON 响应

> ID：13560397
> 
> 赞同：0
> 
> 时间：2012-11-26T07:26:36.263
> 
> 标签：iphone, objective-c, ios, json

我希望向服务器发送一个非常长的字符串（字符串长度超过 10000），然后从字符串中获取 jSON 响应。什么是该任务的最佳方法。我正在发送各种参数以及这个非常长的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:54:30.773

```
If you are using the ASI-Http classes , then you can send request like this
  ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:[WebService getAddPhoto]]];
                 [request addPostValue:[[imgArray objectAtIndex:i] valueForKey:@"vComments"] forKey:@"comment"];
                 NSData *imageData = UIImagePNGRepresentation([UIImage imageWithContentsOfFile:[[imgArray objectAtIndex:i] valueForKey:@"vPhoto"]]);
                 NSString *encodedString = [imageData base64EncodingWithLineLength:[imageData length]];
                 [request addPostValue:encodedString forKey:@"Photo"];
                 [request setDelegate:self];
                [request startAsynchronous] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:30:29.710

将您的长字符串拆分为可以通过一个请求发送的部分。像这样创建一个json

```
 {
    "index":"0",
    "length":"LENGTH_OF_STRING",
    "string":"xsfsffwff.......",
    //other json parameters
 } 
```

然后你可以发送你的字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:39:52.480

问题是您试图将这一切都放入查询参数中。大多数服务器都有内置的 URL 限制，这是有充分理由的。

HTTP POST 的主体并没有什么特别之处，因此只需像发送其他任何内容一样发送它即可。只需确保您设置了`Content-Length`标头（因为您知道；它可能被 HTTP 库覆盖），然后将您的数据流式传输。不需要任何编码或查询参数。

我对objective-c了解不多，但我确信有一种方法可以非常简单地在HTTP POST中发送这样的数据。我已经用 Go 和 node.js 完成了这项工作，两者都有在 POST 请求正文中发送任意数据的简单方法。

# oracle - Oracle ADF af:inputFile 和 af:commandButton 在 IE 9 上给出 JS 错误

> ID：13560401
> 
> 赞同：3
> 
> 时间：2012-11-26T07:26:53.977
> 
> 标签：oracle, oracle-adf, jspx

我有一个非常简单的 jspx，没有支持 bean：

```
<f:view>
    <af:document id="d1" title="Home">
      <af:form id="f1" usesUpload="true">
        <af:pageTemplate value="#{bindings.pageTemplateBinding.templateModel}" id="pt1">
          <f:facet name="content">
          <af:group>
          <af:inputFile label="" id="logoImageFile" />
            <af:commandButton text="Up" />
          </af:group>

          </f:facet>
        </af:pageTemplate>
      </af:form>
    </af:document>
  </f:view> 
```

当我`commandButton`在选择要上传的文件后单击，IE 9 会抛出一个通用的 JS 错误。其他浏览器 [IE 8、FF、Chrome] 运行良好。即使我`autosubmit=true`输入`inputFile`，它也会引发错误，除非我注释掉`commandButton`.

*注意：这可能是一个组件问题，但是想知道你们中是否有人找到了解决方法/修复/补丁。我正在使用 Jdev 11.1.1.5*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:50:35.853

为按钮设置 partialSubmit="true" 以避免重新加载整个页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:58:47.043

这是 Jdev 11.1.1.5 中对 IE 9 的不完全支持的问题。该问题不会在 Jdev 11.1.1.6 及更高版本中复制（我仅在 11.1.1.6 上测试过）

# sql-server - 如何从具有元素序列的 XML 列中提取

> ID：13560409
> 
> 赞同：1
> 
> 时间：2012-11-26T07:27:22.160
> 
> 标签：sql-server, xquery

我在 SQL Server 2005 中有一个 XML 列：

```
<treatmentDetails>
      <treatmentFactor>
        <treatmentFactorName>Varieties</treatmentFactorName>
        <plot>Whole</plot>
        <levels>
          <level>Var1</level>
          <level>Var2</level>
        </levels>
      </treatmentFactor>
      <treatmentFactor>
        <treatmentFactorName>Nitrogen</treatmentFactorName>
        <plot>Whole</plot>
        <levels>
          <level>N1</level>
          <level>N2</level>
          <level>N3</level> 
        </levels>
      </treatmentFactor>
</treatmentDetails> 
```

由此，我想创建这样的输出：

```
Varieties Nitrogen    
Var1      N1         
var1      N2
var1      N3
var2      N1
var2      N2
var3      N3 
```

我尝试使用`xmlfield.query`or `.value`，但我能够提取单个值（例如 Var1）或 XML 标记，`<level>Var1</level>`......任何帮助都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:33:00.220

尝试这个：

```
DECLARE @Test TABLE (ID INT NOT NULL, XmlContent XML)

INSERT INTO @TEST VALUES(1, '<treatmentDetails>
      <treatmentFactor>
        <treatmentFactorName>Varieties</treatmentFactorName>
        <plot>Whole</plot>
        <levels>
          <level>Var1</level>
          <level>Var2</level>
        </levels>
      </treatmentFactor>
      <treatmentFactor>
        <treatmentFactorName>Nitrogen</treatmentFactorName>
        <plot>Whole</plot>
        <levels>
          <level>N1</level>
          <level>N2</level>
          <level>N3</level> 
        </levels>
      </treatmentFactor>
</treatmentDetails>')

SELECT
    Varieties = TDLevel.value('(.)[1]', 'varchar(20)'),
    Nitrogen = TDLevel2.value('(.)[1]', 'varchar(20)')
FROM
    @test
CROSS APPLY
    XmlContent.nodes('/treatmentDetails/treatmentFactor[1]/levels/level') AS Tbl(TDLevel)
CROSS APPLY
    XmlContent.nodes('/treatmentDetails/treatmentFactor[2]/levels/level') AS Tbl2(TDLevel2) 
```

这会给我一个类似于您正在寻找的输出。

但是：我不清楚您是否总是只有两个`<treatmentFactor>`节点`<treatmentDetails>`- 我只是选择第一个和第二个子节点 - 这可能需要根据您的数据进行一些调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:39:53.683

尝试这个

```
select
    TV.V.value('(.)[1]', 'varchar(20)'),
    TN.N.value('(.)[1]', 'varchar(20)')
from table1 as A
    outer apply Data.nodes('/treatmentDetails/treatmentFactor[treatmentFactorName = "Varieties"]/levels/level') as TV(V)
    outer apply Data.nodes('/treatmentDetails/treatmentFactor[treatmentFactorName = "Nitrogen"]/levels/level') as TN(N) 
```

**`[sql fiddle demo](http://sqlfiddle.com/#!3/fff29/9)`**

# ubuntu - 如何在虚拟机中获取性能详细信息？

> ID：13560412
> 
> 赞同：0
> 
> 时间：2012-11-26T07:27:51.220
> 
> 标签：ubuntu, virtual-machine, virtualbox, load-testing

我有安装 Ubuntu 服务器 12.4 的虚拟机。现在我正在通过发送请求数量对此虚拟机进行负载测试。现在我想获取该虚拟机的性能详细信息。在 Ubuntu 服务器中没有安装任何 gui。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:55:41.140

如果我们使用python然后使用ssh的**paramiko库，我们可以通过远程****vm（虚拟机）**的ssh获取机器详细信息，然后执行任何终端命令，如**top**，它将提供所有核心cpu信息。那是我用来获取 CPU 信息的解决方案。

# edi - EDI 999 实施确认

> ID：13560414
> 
> 赞同：1
> 
> 时间：2012-11-26T07:27:57.633
> 
> 标签：edi

EDI 999 实施确认中的元素、段和业务上下文等上下文信息的用途是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T13:07:57.443

999 文件确认收到的索赔数量、接受和拒绝的索赔数量。即索赔数量基于 837 文件中的 CLM 段数

# sqlite - 关于共享单个数据库的 web2py 应用程序的说明

> ID：13560417
> 
> 赞同：0
> 
> 时间：2012-11-26T07:28:16.157
> 
> 标签：sqlite, web2py, shared

[对不起，我对web2py 手册解释](http://web2py.com/books/default/chapter/29/06#Migrations)有点不清楚。

例如，给定 app1 和 app2

我想让 app2 共享我在 app1 中构建的数据库

那么我是否将 app2/models/db.py 文件更改为显示： db = DAL('sqlite://storage.sqlite',migrate='false') ？

并在 app2/models 目录中包含所有其他 myModel.py 文件？

如果数据库在 app1/databases/ 中，app2 如何知道如何找到正确的数据库文件？

[这个线程](https://stackoverflow.com/questions/8033307/one-single-mysql-database-for-many-web2py-applications)开始回答这个问题，但我仍然不清楚如何定义共享数据库的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:08:07.907

我现在无法对此进行测试，但答案应该是：

*   您可以覆盖 DAL 中的文件夹：

    所以两个应用程序都应该指向同一个文件。

    （请参阅[文档](http://web2py.com/books/default/chapter/29/06#Using-DAL-without-define-tables)和此[线程](https://groups.google.com/forum/?fromgroups=#!topic/web2py/vzMWpOWPC68)）。

.

```
db = DAL('sqlite://storage.sqlite',folder='path/to/app/databases') 
```

*   是的，两个应用程序中也应该需要模型文件，否则应用程序将不知道如何访问数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T23:59:49.273

请注意，`DAL(..., migrate=False)`只需为每个表设置默认值`migrate`——它不会对`define_table()`调用包含其自己的显式`migrate`参数的表的迁移状态产生任何影响。如果您想完全禁用整个数据库连接的迁移（不管单个`define_table()`调用），请改用：

```
DAL(..., migrate_enabled=False) 
```

此外，为了在应用程序之间共享模型定义，而不是简单地复制模型文件，您可以将定义放在模块内的函数或类中，然后导入模块。另一种选择是使用[auto_import](http://web2py.com/books/default/chapter/29/06#Using-DAL-without-define-tables)：

```
DAL(..., auto_import=True) 
```

注意，`auto_import`将导入字段名称和类型，但不会包含特定于 DAL 的属性，例如验证器和默认值，因此其使用受到一定限制。

# jquery - 我应该如何在表格中呈现长 URL

> ID：13560428
> 
> 赞同：0
> 
> 时间：2012-11-26T07:29:04.660
> 
> 标签：jquery, ruby-on-rails, url, user-interface, usability

我应该如何在表格中呈现长 URL，我不希望显示整个 URL，因为它可能超过表格长度。如果它超过某个预定义的大小（比如 50 个字符），我想缩短并显示它。如果我点击它，它应该会带我到一个新页面，我可以在其中查看链接的内容。我该如何实施？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T08:00:35.207

Rails 有一个帮手

```
link_to truncate("And they found that many people were sleeping better.", :length => 25, :omission => '... (continued)'), your_path
# => "And they f... (continued)" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T07:35:26.377

我假设 table 表示 html 类型，如果长 url 字符串位于名为 url 的实例中，请执行

```
<td><%= link_to url[0...49], some_path %></td> 
```

应该给你前 50 个字符。

额外添加那个......如果它超过了，

```
<td><%= link_to url.length < 50 ? aa : "#{aa[0..49]...}", some_path %></td> 
```

未测试代码，如有语法错误，请见谅。

# c# - 不能通过并发线程访问破坏数据

> ID：13560430
> 
> 赞同：2
> 
> 时间：2012-11-26T07:29:10.240
> 
> 标签：c#, .net, multithreading, locking

我编写这个实验是为了向某人证明使用多个线程同时访问共享数据是一个很大的禁忌。令我惊讶的是，无论我创建了多少线程，我都无法创建并发问题，并且该值始终导致平衡值 0。我知道增量运算符不是线程安全的，这就是为什么有方法像`Interlocked.Increment()`和`Interlocked.Decrement()`（这里也注意到[++ 运算符线程安全吗？](https://stackoverflow.com/questions/4628243/is-the-operator-thread-safe)）。

**如果递增/递减运算符不是线程安全的，那么为什么下面的代码执行时没有任何问题并且结果达到预期值？**

下面的代码片段创建了 2,000 个线程。1,000 不断增加和 1,000 不断减少，以确保多个线程同时访问数据。更糟糕的是，在普通程序中，您不会拥有几乎一样多的线程。然而，尽管为了创建并发问题而夸大了数字，但该值始终导致平衡值为 0。

```
static void Main(string[] args)
    {
        Random random = new Random();
        int value = 0;

        for (int x=0; x<1000; x++)
        {
            Thread incThread = new Thread(() =>
            {
                for (int y=0; y<100; y++)
                {
                    Console.WriteLine("Incrementing");
                    value++;
                }
            });

            Thread decThread = new Thread(() =>
            {
                for (int z=0; z<100; z++)
                {
                    Console.WriteLine("Decrementing");
                    value--;
                }
            });

            incThread.Start();
            decThread.Start();
        }

        Thread.Sleep(TimeSpan.FromSeconds(15));
        Console.WriteLine(value);
        Console.ReadLine();
    } 
```

我希望有人能给我一个解释，以便我知道我编写线程安全软件的所有努力都没有白费，或者这个实验在某种程度上存在缺陷。我还尝试了所有线程递增并使用 ++i 而不是 i++。该值始终会产生预期值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T07:43:48.407

如果您有两个线程在*非常*接近的时间递增和递减，您通常只会看到问题。（还有内存模型问题，但它们是分开的。）这意味着您希望它们花费大部分时间递增和递减，以便为您提供操作冲突的最佳机会。

目前，您的线程将花费*绝大多数*时间休眠或写入控制台。这大大减少了碰撞的机会。

此外，我要指出，没有证据并不是没有证据 - 并发问题确实很难引发，特别是如果您碰巧在具有强大内存模型和内部原子递增/递减指令的 CPU 上运行JIT 可以使用。可能您永远不会在您的特定机器上引发问题 - 但同一程序可能会在另一台机器上失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:04:13.880

除了乔恩斯基茨回答：

一个简单的测试，至少在我的小双核上很容易显示问题：

```
Sub Main()

    Dim i As Long = 1
    Dim j As Long = 1

    Dim f = Sub()
                While Interlocked.Read(j) < 10 * 1000 * 1000
                    i += 1
                    Interlocked.Increment(j)
                End While
            End Sub

    Dim l As New List(Of Task)
    For n = 1 To 4
        l.Add(Task.Run(f))
    Next

    Task.WaitAll(l.ToArray)
    Console.WriteLine("i={0}   j={1}", i, j)
    Console.ReadLine()

End Sub 
```

i 和 j 应该都具有相同的最终值。但他们没有！

**编辑**

如果您认为 C# 比 VB 更聪明：

```
 static void Main(string[] args)
    {
        long i = 1;
        long j = 1;

        Task[] t = new Task[4];

        for (int k = 0; k < 4; k++)
        {
            t[k] = Task.Run(() => {
                            while (Interlocked.Read(ref j) < (long)(10*1000*1000))
                            {
                                i++;
                                Interlocked.Increment(ref j);
                            }});
        }

        Task.WaitAll(t);
        Console.WriteLine("i = {0}   j = {1}", i, j);
        Console.ReadLine();

    } 
```

它不是;)

结果：i 比 j 低大约 15%（百分比！）。在我的机器上。拥有一台八线程机器，probabyl 甚至可能使结果更加迫在眉睫，因为如果多个任务真正并行运行并且不只是被抢占，则错误更有可能发生。

上面的代码当然是有缺陷的 :(
如果一个任务被抢占，就在 i++ 之后，所有其他任务继续增加 i 和 j，所以 i 应该与 j 不同，即使“++”是原子的。有一个简单的解决方案：

```
 static void Main(string[] args)
    {
        long i = 0;
        int runs = 10*1000*1000;

        Task[] t = new Task[Environment.ProcessorCount];

        Stopwatch stp = Stopwatch.StartNew();

        for (int k = 0; k < t.Length; k++)
        {
            t[k] = Task.Run(() =>
            {
                for (int j = 0; j < runs; j++ )
                {
                    i++;
                }
            });
        }

        Task.WaitAll(t);

        stp.Stop();

        Console.WriteLine("i = {0}   should be = {1}  ms={2}", i, runs * t.Length, stp.ElapsedMilliseconds);
        Console.ReadLine();

    } 
```

现在可以在循环语句中的某处抢占任务。但这不会影响`i`。因此，查看效果的唯一方法`i`是，如果任务在`i++`语句中被抢占。这就是要展示的内容：它可能会发生，并且当您运行的任务更少但运行时间更长时更有可能发生。
如果您编写`Interlocked.Increment(ref i);`而不是`i++`代码运行时间更长（因为锁定），但这`i`正是它应该的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T08:53:42.907

IMO 这些循环太短了。我敢打赌，当第二个线程启动时，第一个线程已经完成执行其循环并退出。尝试大幅增加每个线程执行的迭代次数。在这一点上，您甚至可以只生成两个线程（删除外部循环），它应该足以看到错误的值。

例如，使用以下代码，我在系统上得到了完全错误的结果：

```
static void Main(string[] args)
{
    Random random = new Random();
    int value = 0;

    Thread incThread = new Thread(() =>
            {
                for (int y = 0; y < 2000000; y++)
                {
                    value++;
                }
            });

    Thread decThread = new Thread(() =>
            {
                for (int z = 0; z < 2000000; z++)
                {
                    value--;
                }
            });

    incThread.Start();
    decThread.Start();

    incThread.Join();
    decThread.Join();
    Console.WriteLine(value);
} 
```

# c++ - 如何将一个矢量块复制到另一个

> ID：13560431
> 
> 赞同：6
> 
> 时间：2012-11-26T07:29:12.580
> 
> 标签：c++, memory

我使用数组来存储数据，但是我用向量替换了，所以我想用 c++ 运算符替换所有 c 运算符。我使用 memcpy 复制一个内存块

```
for (i = 0; i < rows_; i++)
    memcpy((T *) &tmp.data_[cols_ * i], (T *) &a.data_[cols_ * (2 * i + 1)], rows_ * sizeof(T)); 
```

它也适用于向量，我只想知道 c++ 中是否有等效函数？

我尝试了副本：

```
std::copy(tmp.data_[cols_ * i], tmp.data_[cols_ * i+rows], a.data_[cols_ * (2 * i + 1)]); 
```

但我收到以下错误：

```
error: invalid use of member function (did you forget the ‘()’ ?) 
```

例如：

我有一个 2xnxn 大小的数组，我正在使用 for 循环来制作一个 nxn 数组。例如我有 1 2 3 4 5 6 7 8，我的新数组必须如下：3 4 7 8。我使用 memcpy 来实现这一点，但我不知道如何在 C++ 中实现

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T07:34:01.247

有一个标准的算法[副本](http://www.cplusplus.com/reference/algorithm/copy/)。它比 memcpy 更安全，因为它也适用于非 POD 类型。它有时会针对 POD 类型进行优化以生成 memcpy。您通常不会将指针与标准算法一起使用，但您必须使用迭代器。要获得迭代器，您可以使用`begin()`和`end()`方法或自由函数。例子：

```
vector<int> a(10, 5);
vector<int> b(5);

copy(a.begin(), a.begin()+5, b.begin()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T07:35:24.723

好吧，[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)有本机`operator=()`，可用于将一个矢量内容复制到另一个：

```
std::vector<T> x;
std::vector<T> y;
y = x; 
```

还有[`std::copy`](http://en.cppreference.com/w/cpp/algorithm/copy)一个适用于迭代器并允许复制数组切片。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T07:54:48.497

使用[`std::copy`](http://en.cppreference.com/w/cpp/algorithm/copy)或者[`std::vector::assign`](http://en.cppreference.com/w/cpp/container/vector/assign)如果您从 复制`array`到`vector`

```
 int from_array[10] = {1,2,3,4,5,6,7,8,9,10};

  std::vector<int> to_vector;

  int array_len = sizeof(from_array)/sizeof(int);
  to_vector.reserve(array_len);
  std::copy( from_array, from_array+10, std::back_inserter(to_vector)); 
  or C++11
  std::copy( std::begin(from_array), std::end(from_array), std::back_inserter(to_vector));   

  std::vector<int> to_vector2;
  to_vector2.reserve(array_len);
  to_vector2.assign(from_array, from_array + array_len); 
```

如果从向量复制到向量

```
 std::vector<int> v1;
   std::vector<int> v2;
   v2 = v1; // assign operator = should work 
```

如果您不需要保留 v1，`std::swap`也可以

```
v2.swap(v1); 
```

更新：

```
 const int M = 2;
  const int N = 4;
  int from_array[M][N] = {{1,2,3,4},{5,6,7,8}};

  std::vector<int> to_vector;
  to_vector.reserve(N);
  int start=2;
  int end = 4;
  for (int i=0; i<M; i++)
  {
    std::copy( from_array[i]+start, from_array[i]+end, std::back_inserter(to_vector)); 
  } 
```

# android - Android：更改微调器下拉视图

> ID：13560432
> 
> 赞同：9
> 
> 时间：2012-11-26T07:29:13.953
> 
> 标签：android, android-layout, spinner, android-spinner

我是我的应用程序，我想要以下类型的 Spinner Dropdown 视图。![在此处输入图像描述](../Images/631602ff07430cbbe3023bc73bbb6577.png) 对于这种类型的微调器视图。我写了这段代码。

```
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
            R.array.spinner, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner_obj.setAdapter(adapter); 
```

我从[http://developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)得到这个 但我得到的是， ![在此处输入图像描述](../Images/390f1c1bbd48165106548151c02186b1.png)

请给我最好的方法来做到这一点......

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-05-17T16:56:26.480

有点像在这里恢复旧帖子，但接受的答案远非理想。正确的方法是在布局 xml 中将 Spinner 设置为下拉模式：

```
<Spinner 
    android:id="@+id/my_spinner"
    ...
    android:spinnerMode="dropdown"/> 
```

可用的选项是“对话框”和“下拉菜单”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-26T07:43:29.023

您的应用程序在旧主题上运行。

如果您使用的是 android 4.2，请将 android 应用程序主题（在清单文件中）设置为

```
 android:theme="@android:style/Theme.Holo.Light" 
```

或者

```
 android:theme="@android:style/Theme.Holo.Light.DarkActionBar" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T07:33:12.920

可能是您在低于 4.0 的环境下运行，4.0 将显示下拉菜单作为您的图像

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-31T13:24:59.527

对于 GUI 使用 HoloEverywhere。[https://github.com/Prototik/HoloEverywhere](https://github.com/Prototik/HoloEverywhere) 如果您想在较旧的 Android 上使用 Holo 主题，那么 HoloEverywhere 是最好的选择，然后是 4.0。

对于下拉菜单，请使用 android:spinnerMode="dropdown" 在布局中，正如 Stephen Kidson 所提到的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T07:59:35.633

您可以使用如下弹出窗口：

```
 spinner=(EditText)findViewById(R.id.txt_Spinner);

        spinner.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                p = new Point();
                p.x = location[0]+(v.getHeight());
                p.y = location[1]+v.getHeight();

                if (p != null)
                    showPopup(statusActivity.this, p);

                System.out.println("show popup");
            }
        });

    // The method that displays the popup.
    private void showPopup(final Activity context, Point p) {
        int popupWidth = 300;
        int popupHeight = 500;

        // Inflate the popup_layout.xml
        LinearLayout viewGroup = (LinearLayout) context.findViewById(R.id.popup);
        LayoutInflater layoutInflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View layout = layoutInflater.inflate(R.layout.popup_layout, viewGroup);

        // Creating the PopupWindow
        popup = new PopupWindow(context);
        popup.setContentView(layout);
        popup.setWidth(popupWidth);
        popup.setHeight(popupHeight);
        popup.setFocusable(true);

        // Some offset to align the popup a bit to the right, and a bit down, relative to button's position.
        int OFFSET_X = 00;
        int OFFSET_Y = 00;

        // Clear the default translucent background
        popup.setBackgroundDrawable(new BitmapDrawable());

        // Displaying the popup at the specified location, + offsets.
        popup.showAtLocation(layout, Gravity.NO_GRAVITY, p.x + OFFSET_X, p.y + OFFSET_Y);
        ((TextView)layout.findViewById(R.id.textView2)).setClickable(true);
        ((TextView)layout.findViewById(R.id.textView3)).setClickable(true);
        ((TextView)layout.findViewById(R.id.textView4)).setClickable(true);
        ((TextView)layout.findViewById(R.id.textView5)).setClickable(true);
        ((TextView)layout.findViewById(R.id.textView6)).setClickable(true);
        ((TextView)layout.findViewById(R.id.textView7)).setClickable(true);
        ((TextView)layout.findViewById(R.id.textView8)).setClickable(true);
        ((TextView)layout.findViewById(R.id.textView9)).setClickable(true);

    }

and popup.xml

    <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/popup"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/popup_bg"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        style="@style/text_orange_heading"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Select Status"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView2"
        style="@style/text_blue_contains"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:onClick="onClick"
        android:clickable="true"
        android:drawableBottom="@drawable/line_white"
        android:tag="Sleeping"
        android:text="Sleeping" />

    <TextView
        android:id="@+id/textView3"
        style="@style/text_blue_contains"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:onClick="onClick"
        android:clickable="true"
        android:drawableBottom="@drawable/line_white"
        android:tag="Available"
        android:text="Available" />

    <TextView
        android:id="@+id/textView4"
        style="@style/text_blue_contains"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:onClick="onClick"
        android:clickable="true"
        android:drawableBottom="@drawable/line_white"
        android:tag="Busy"
        android:text="Busy" />

    <TextView
        android:id="@+id/textView5"
        style="@style/text_blue_contains"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:onClick="onClick"
        android:clickable="true"
        android:drawableBottom="@drawable/line_white"
        android:tag="At work"
        android:text="At work" />

    <TextView
        android:id="@+id/textView6"
        style="@style/text_blue_contains"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:onClick="onClick"
        android:clickable="true"
        android:drawableBottom="@drawable/line_white"
        android:tag="Battery charge low"
        android:text="Battery charge low" />

    <TextView
        android:id="@+id/textView7"
        style="@style/text_blue_contains"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:onClick="onClick"
        android:clickable="true"
        android:drawableBottom="@drawable/line_white"
        android:tag="In meeting"
        android:text="In meeting" />

    <TextView
        android:id="@+id/textView8"
        style="@style/text_blue_contains"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:onClick="onClick"
        android:clickable="true"
        android:drawableBottom="@drawable/line_white"
        android:tag="TMS me later"
        android:text="TMS me later" />

    <TextView
        android:id="@+id/textView9"
        style="@style/text_blue_contains"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:onClick="onClick"
        android:clickable="true"
        android:drawableBottom="@drawable/line_white"
        android:tag="At the toilet"
        android:text="At the toilet" />

    <EditText
        android:id="@+id/textCustomize"
        style="@style/text_blue_contains"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:tag="Customize"
        android:text="Customize" />

</LinearLayout> 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-11-26T07:34:29.063

它是您应该使用的`AutocompleteTextView`小部件，但您已尝试使用`Spinner`小部件。

如果我的猜测是正确的，请参考链接。 [自动完成文本视图](http://saigeethamn.blogspot.in/2010/05/auto-complete-text-view-android.html)

干杯。

# javascript - 尝试在同一页面上显示多个倒数计时器

> ID：13560433
> 
> 赞同：0
> 
> 时间：2012-11-26T07:29:28.763
> 
> 标签：javascript, jquery, html, timer

我正在尝试在同一页面上显示几个倒数计时器。现在据我所知，有两种方法可以在不使用 jquery 插件或其他脚本的情况下做到这一点（如果你知道一个好的方法，请告诉我）

1.  从 1 秒开始`setInterval`，一个包含毫秒的全局变量，然后每个间隔减少 -1000。

2.  创建一个从全局变量减少 1 秒的函数，然后在该函数的底部将 a 设置`setTimeout`为 1 秒，该函数将运行该函数，因此基本上每 1 秒递归一次。

我的问题是这两个选项中的哪一个会更好和/或更快？

这是两者的演示代码：

`setInterval`：

```
var amount_of_seconds_left = 46800000;

setInterval(function(){
if(amount_of_seconds_left > 1000){
    amount_of_seconds_left -= 1000;
}
},1000); 
```

`setTimeout`：

```
var amount_of_seconds_left = 46800000;
function startTime(){
if(amount_of_seconds_left > 1000){
    amount_of_seconds_left -= 1000;
    t=setTimeout(function(){startTime()},1000);
}
} 
```

两种方法都可以，但我想知道性能方面哪个更好，性能甚至是这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:32:44.913

**我相信 setInterval 代码恰好每 1000 毫秒执行一次，而 setTimeout 等待 1000 毫秒，运行该函数，这需要一些毫秒，然后设置另一个超时。所以等待时间实际上大于1000ms。**

从这篇文章：

[设置超时或设置间隔？](https://stackoverflow.com/questions/729921/settimeout-or-setinterval)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:18:47.947

`setInterval`并且`setTimeout`不要在 1000 毫秒后启动，例如如果另一个脚本正在运行，那么两者都会导致延迟。最好使用`setIntervall`仅调用显示更新并使用[`Date`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)对象来计算确切的剩余时间。例如，在浏览器忙碌之后，计时器会在下次更新后显示正确的时间。

这里有一个[例子](http://jsfiddle.net/F4X6z/)：

HTML：

```
<div id="timer1"></div>
<div id="timer2"></div> 
```

javascript:

```
// update all timer
function updateTimer() {
    for (var i in aTimer) {
        var oTimer = document.getElementById(aTimer[i].sId);
        var iSeconds = parseInt((aTimer[i].iFinished - Date.now()) / 1000);
        oTimer.innerHTML = iSeconds;
    }
}

// Init all timers with DOM-id and finish time
var aTimer = [
    { sId: 'timer1', iFinished: Date.now() + 46800000 },
    { sId: 'timer2', iFinished: Date.now() + 780000}
];

// call display update
setInterval(function() {
    updateTimer();
}, 333); 
```

# java - 将数组传递给方法（java）

> ID：13560434
> 
> 赞同：2
> 
> 时间：2012-11-26T07:29:33.397
> 
> 标签：java, arrays, methods, declaration

我目前正在编写代码来进行骑士之旅。我试图将一个双数组（板）传递给一个方法，但我得到一个预期的错误。我不知道我应该如何声明它（数组不起作用），或者这是否完全错误。这是我目前坚持的代码。

```
 public void makeBoard(Board,int column, int row){
     for (i=1;i<=column;i++)
     {
         for  (j=1;j<=row;j++)
         {
              Board[i][j] = "x";
         }
     }
     Board[1][1] = "1";
     xpos = 1;
     ypos = 1;
 } 
```

主要是声明。Board 是一个双数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T07:31:45.087

您需要指定参数的类型。

```
public void makeBoard(String[][] Board, int column, int row){ 
```

笔记：

1.  类型的名称*不是*双精度数组。这个词`double`是Java中不同类型的名称。这意味着一个[双精度浮点数](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)。您的代码中没有任何双打。

2.  标准命名约定是对参数名称使用驼峰式大小写。你应该写`board`而不是`Board`.

3.  数组在 Java中是[0 索引的。](http://en.wikipedia.org/wiki/Zero-based_numbering)你的循环应该从 0 开始，而不是 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T07:55:07.950

在 java 方法中，参数由参数类型和名称组成。对于`int`列，`int`是类型，列是名称。因此， board 实际上是您的参数名称，类型应该是`String[][]`.

```
public void makeBoard(String[][] Board,int column, int row){...} 
```

# ajax - 如何调用ajax自动完成功能？

> ID：13560437
> 
> 赞同：1
> 
> 时间：2012-11-26T07:29:56.097
> 
> 标签：ajax, jquery, autocomplete

如何在特定时间调用ajax自动完成？这是我的代码

```
function auto(x){

x.autocomplete('ajax/getFriends',{
        max:500,
        width:300,
        minChars:2,
        autoFill: false,

        formatItem: formatItem,
        formatResult: formatResult
        });

        function formatItem(row) {
                return row[0];
                //return row[0] + " (<strong>id: " + row[1] + "</strong>)";
        }
        function formatResult(row) {
            return row[0].replace(/(<.+?>)/gi, '');
        }

         $("#comment").result(function(event, data, formatted) {
            $("#test1").val(data[1]);
            $("#test2").val(data[2]);
         });
    } 
```

但它说错误 x.autocomplete 不是一个函数

我打电话给上面就像

```
auto("string"); 
```

谁能帮我解决这个问题

提前谢谢我的英语不好，如果有任何错误，请原谅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:28:38.680

我认为您对 jQuery 自动完成功能的整体工作方式感到困惑。在我看来，您正在将自动完成附加到您的字符串并为建议构建 HTML 元素。这不是自动完成功能的工作方式。

您想要做的是将自动完成功能附加到您的输入框。然后，只要在其中输入内容，自动完成功能就会在输入时自动触发。这就是它的构建方式。

因此，假设您的 HTML 代码中有一个 ID 等于 myAwesomeInputBox 的输入框：

```
<input type="text" id="myAwesomeInputBox"/> 
```

要将自动完成（使用 ajax）绑定到此输入字段，只需在 Javascript 中执行以下操作：

```
$("#myAwesomeInputBox").autocomplete({
                source: function( request, response ) {

                        // request.term is the input in the textbox, encode for security reasons
                        var input = encodeURI(request.term); 

                        $.ajax({

                            // your ajax endpoint
                            url: 'ajax/getFriends', 

                            // the request method, modify to your actual method
                            type: 'GET', 

                            // whatever data you want to pass to your endpoint. 
                            // I'm assuming at least the input (with key userInput here) 
                            // and maybe the limit of the elements in the response array 
                            // the server should send back
                            data: {userInput: input, limit: 500}, 

                            // what to do on success (process the response) 
                            success: function(data){ 

                                // assuming your ajax endpoint returns a JSON encoded array with the suggestions as a response
                                var responseArray = $.parseJSON(data);

                                // pass the decoded response array to the jquery defined response method for autocomplete
                                response(responseArray); 
                            }, 

                            // what to do if the server returns an error
                            error: function(jqXHR, textStatus, errorThrown){
                                // pass an empty suggestions array maybe?
                                response(new Array()); 
                            }
                          }, 'json');
                    }
            }); 
```

对我来说棘手的部分是

```
response(responseArray); 
```

但是一旦你检查它，它是完全可以理解的。您只是将一个数组传递给 jQuery 自动完成处理程序以进行进一步处理。

我不确定以前版本的 jQuery 如何处理 ajax 自动完成，但这是 1.8.0 版（及更高版本）处理它的方式。

# android - Android - Actionbar Sherlock - 搜索过滤器

> ID：13560438
> 
> 赞同：18
> 
> 时间：2012-11-26T07:29:57.600
> 
> 标签：android, android-actionbar, actionbarsherlock, searchview

![在此处输入图像描述](../Images/9778e8f1211c7be97a189e3fbede0742.png)

我正在尝试使用 ActionBar Sherlock 实现 Action Bar。我有三个操作按钮，其中一个是搜索按钮。单击搜索按钮时，应显示我已经实现的搜索输入字段。但我希望它占据操作栏的整个宽度。知道我如何能达到同样的效果。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-29T09:34:40.960

首先制作一个editTextLayout

布局搜索.xml

```
<?xml version="1.0" encoding="utf-8"?>
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/search_edit_text"
    android:cursorVisible="true"
    android:hint="@string/search_friend_hint"
    android:imeOptions="actionDone"
    android:inputType="text"
    android:textColor="@android:color/black"
    android:textCursorDrawable="@android:color/black" /> 
```

在您的菜单 xml 添加`android:actionLayout`和`android:showAsAction="always|collapseActionView"` 搜索选项。对于其他选项`android:showAsAction="ifRoom"`

菜单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:icon="@drawable/ic_action_sort"
        android:orderInCategory="1"
        android:showAsAction="ifRoom"
        android:title="@string/menu_sort"/>
    <item
        android:id="@+id/menu_search"
        android:actionLayout="@layout/layout_search"
        android:icon="@drawable/search"
        android:orderInCategory="0"
        android:showAsAction="always|collapseActionView"
        android:title="@string/search"/>

</menu> 
```

在您的活动或片段中覆盖 onCreateOptionsMenu 就像这个 fragment.java

```
@Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        super.onCreateOptionsMenu(menu, inflater);
        inflater.inflate(R.menu.menu, menu);

        final EditText editText = (EditText) menu.findItem(
                R.id.menu_search).getActionView();
        editText.addTextChangedListener(textWatcher);

        MenuItem menuItem = menu.findItem(R.id.menu_search);
        menuItem.setOnActionExpandListener(new OnActionExpandListener() {
            @Override
            public boolean onMenuItemActionCollapse(MenuItem item) {
                // Do something when collapsed
                return true; // Return true to collapse action view
            }

            @Override
            public boolean onMenuItemActionExpand(MenuItem item) {
                editText.clearFocus();
                return true; // Return true to expand action view
            }
        });
    } 
```

并添加 textWatcherListener

```
private TextWatcher textWatcher = new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

            if (null != mAdapter) {
                mAdapter.getFilter().filter(s);
            }
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }
    }; 
```

# api - 纯 REST 和指数退避可能吗？

> ID：13560440
> 
> 赞同：0
> 
> 时间：2012-11-26T07:30:08.357
> 
> 标签：api, rest

*有没有办法在纯*REST API上实现指数退避？您必须跟踪某些状态（例如 IP 地址、帐户），不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:33:27.143

就我而言，实施退避政策是**客户的责任。**否则，如您所说，必须维护某种状态，例如检查 cookie、请求令牌等。

现在，根据该定义，许多 REST API 并不是*纯粹*的，因为它们将请求令牌作为参数，并且可能会限制每小时或每天的调用次数，但这就是权衡。

# ruby-on-rails - 生成模型失败

> ID：13560444
> 
> 赞同：0
> 
> 时间：2012-11-26T07:30:14.070
> 
> 标签：ruby-on-rails, ruby

当尝试遵循*工程持久软件*（Fox 和 Patterson）中的示例时，命令：

```
rails generate model Moviegoer name:string provider:string uid:string 
```

从`~/Documents/application_root`（课程工作人员生成的项目主目录）运行会导致

```
rails generate model Moviegoer name:string provider:string uid:string:command not found 
```

正在显示的消息；为什么会返回这样的消息以及如何使命令成功执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:14:43.890

如果您还没有，请尝试在开头添加“sudo”。如果 rails 安装到默认根位置，那么您的命令只会在以根用户身份运行时找到您的应用程序文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T19:34:25.043

所以...我再次尝试，仅通过从正在工作的命令部分复制/粘贴空格字符来更改输入（“rails model generate”变为“rails model generate Moviegoer”，最后一个空间被重用）和命令起作用了。由于派生该命令的原始命令是从一个输入源输入到终端的，因此控制台如何看到两个不同的空格字符的谜团仍然存在……

# java - 如何从 JSONObject 填充字符串数组以在 ListView 中使用

> ID：13560445
> 
> 赞同：3
> 
> 时间：2012-11-26T07:30:21.430
> 
> 标签：java, android

我有一个 android/java 任务，我想将 JSON 值放入字符串数组中以显示在 ListView 中，但我不确定从哪里开始？谢谢。

```
private String[] values;
...
// this is what is returned from the web server (Debug view)
// jObj = {"success":1,"0":"Mike","1":"message 1","2":"Fred","3":"message 2","4":"John","5":"message 3"};

try {
   if (jObj.getInt("success") == 1) {
      .
      // what i'm trying to do here is iterate thru JObj and assign values to the 
      // values array to populate the ArrayAdapter so that the ListView displays this:
      //
      // Mike: Message 1
      // Fred: Message 2
      // John: Message 3
      //
      .
      this.setListAdapter(new ArrayAdapter<String>(
         this, android.R.layout.simple_list_item_1, android.R.id.text1, values));
      ListView listView = getListView();
   }
}
catch (JSONException e) {
   Log.e(TAG, e.toString());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:40:06.993

使用`ArrayList`而不是`Array`添加从 Json Obejct 检索到的值，然后将 ListView 的 ArrayList 设置为数据源。将您的代码更改为：

```
 ArrayList<String> array_list_values = new ArrayList<String>();
try {
       if (jObj.getInt("success") == 1) {

        array_list_values.add(jObj.getString("0"));
        array_list_values.add(jObj.getString("1"));
        array_list_values.add(jObj.getString("2"));
        array_list_values.add(jObj.getString("3"));
        array_list_values.add(jObj.getString("4"));
        array_list_values.add(jObj.getString("5"));
        this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, array_list_values));
                ListView listView = getListView();
            }
     }
catch (JSONException e) {
      Log.e(TAG, e.toString());
  } 
```

编辑：如果消息的数量并不总是相同，它可能是 1 到更大的数量，那么您可以将 JsonObject 迭代为：

```
 ArrayList<String> array_list_values = new ArrayList<String>();
try {
       if (jObj.getInt("success") == 1) {

        Iterator iter = jObj.keys();
        while(iter.hasNext()){
        String key = (String)iter.next();
        String value = jObj.getString(key);
        array_list_values.add(value);
        }

        this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, array_list_values));
                ListView listView = getListView();
            }
     }
catch (JSONException e) {
      Log.e(TAG, e.toString());
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:39:43.737

你应该这样做并使用很棒的 GSON 库：

```
InputStream source = retrieveStream(url);
Gson gson = new Gson();
Reader reader = new InputStreamReader(source);
APIResponse response = gson.fromJson(reader, APIResponse.class); 
```

和：

```
Public class APIResponse{

public String 0;
public String 1;
public String 2;
public String 3;
public String 4;
public String 5;
public String succes;

} 
```

但这不起作用，因为您需要为变量找到 0,1,2,3,4,5 的其他名称。

请在服务器端更改此设置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:40:37.680

```
JSONObject jsonObject = new JSONObject(jsonString);
String value0 = jsonObject.getString("0"); 
```

或在 for 循环中

```
String tempArray[] = new String[5]; 
```

做就是了

```
for(int i=0;condition;i++){
    tempArray[i] = jsonObject.getString(String.ValueOf(i));
} 
```

并将数组传递给适配器

# ios - 处理 UITableViewCell 内的按钮单击

> ID：13560447
> 
> 赞同：3
> 
> 时间：2012-11-26T07:30:25.250
> 
> 标签：ios, uitableview, xamarin.ios

我似乎无法在自定义 UITableViewCell 中正确处理按钮单击。它是一个包含标签和按钮的单元格。我有以下代码：

```
var cell = tableView.DequeueReusableCell (cellKey) as ApptHistoryCell;
if (cell == null)
{
    cell = _container.Cell;
    cell.SelectionStyle = UITableViewCellSelectionStyle.None;
}

if (InfoClicked != null)
{
    cell.ActionButton.TouchUpInside += InfoClicked;
} 
```

InfoClicked 是在单元格创建时循环传递的事件处理程序。当重新使用单元格时，这会导致空引用异常，因为（我认为）TouchUpInside 正在尝试调用 2 个处理程序。旧的和新的，这会导致崩溃。如果我将事件处理程序放在 cell == null if 块中，则会显示错误的操作。

如何正确处理点击？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T07:43:00.547

我在自定义单元格中处理按钮的方式：

*   我定义了一个连接到自定义单元格内的 UIButton 事件的 IBAction
*   我为单元格定义了一个委托和一个委托方法来处理按钮操作
*   IBAction 调用该委托方法
*   在 cellAtRow 中定义单元格时...我将 tableViewController 设置为委托。cell.delegate=自己；
*   我在 tableViewController 的委托方法中做任何我想做的动作

说得通？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:41:36.587

您应该从 xib 文件创建您的单元格，该文件已经将按钮连接到所有者的目标（视图控制器）。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-26T08:45:54.863

在您的自定义单元格中，只需在 IB 上找到您的按钮并与该属性建立连接。

现在，在控制器中`cellForRowAtIndexPath`，您需要什么，只需标记该按钮，例如：

```
(MyCustomCell*)cell.myButton = indexPath.row; 
```

现在，之后只需像这样设置点击事件： -

```
[(MyCustomCell*)cell.myButton addTarget:self action:@selector(NeedFunctionToCall:) forControlEvents:UIControlEventTouchUpInside]; 
```

现在，在同一个视图控制器中，实现所需的方法，如下所示：

```
-(void)NeedFunctionToCall:(id)sender
{
 NSLog("Got the event :-> %d, from the cell/button",[sender tag]);
} 
```

# javascript - ajax重定向时浏览器出错

> ID：13560454
> 
> 赞同：3
> 
> 时间：2012-11-26T07:31:03.183
> 
> 标签：javascript, python, browser

我试图向`ajax` `delete`这个 url 发送一个请求但是得到一个弹出错误。

```
$( "#dialog-confirm" ).dialog({
        resizable: false,
        height:140,
        modal: true,
        buttons: {
            "Delete": function() {
                //To show the loader                    

                //Ajax call to delete the data          
                $.ajax({
                    type: "DELETE",
                    url: window.location.pathname + id + '/centers/' + c,
                    contentType: 'application/html; charset=utf-8',
                    data: {
                        dc : dc,
                    },
                    success: function(){} }); }); 
```

错误是

> 此网页正在重定向到新位置。您想将您输入的表单数据重新发送到新位置吗？

[https://my2.v2.domain.com/grd/net/lb/checker/Env2/centers/11](https://my2.v2.domain.com/grd/net/lb/checker/Env2/centers/11)

（这是我要发送的演示网址。）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-06T20:57:21.417

使用 DELETE 方法（或 PUT 或 POST）时，并非所有浏览器都支持*重定向。*解决方案是在浏览器调试控制台中检查您被重定向到的位置（检查`Location`标题），然后调整代码中的 URL 以直接提交到该 URL，使其不会重定向。

所有现代浏览器都支持 DELETE 方法。

# c# - 下载特定标签源

> ID：13560456
> 
> 赞同：0
> 
> 时间：2012-11-26T07:31:07.283
> 
> 标签：c#, webclient

我有一些带有很多标签的网页。我想下载它标签所在的源页面，`Span`它`className`是`Something`。

我可能只是下载页面的一部分（源代码）而不是整个页面？

我知道我可以做到这一点`webbrowser`（例如导航到我的目标页面并搜索特定标签并获取其源代码）但是有了它，我必须首先获取整个页面，然后再获取特定标签。

有什么方法（例如：`WebClient`类）可以只下载带有特定`ClassName`源代码的特定标签吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:33:51.823

不，HTTP 协议没有任何设施来做你需要的事情（唯一能做的就是获得某个 Range，但这需要你确切知道数据在哪里，所以这似乎没有帮助） ，您必须下载整个页面，然后解析您需要的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T07:34:44.647

恐怕您不能只下载部分页面，而需要先加载整个页面。但是为了使它更容易，您可以在 XML 中解析 HTML，然后使用它，这要容易得多。

# php - 根据描述获取 Facebook 图片

> ID：13560457
> 
> 赞同：1
> 
> 时间：2012-11-26T07:31:12.630
> 
> 标签：php, facebook

我需要创建一个程序，该程序允许根据照片描述存储人们上传到 Facebook 的照片。例如，我在 Facebook 上上传/发布了一张带有“#awesomeevent”描述的图片，程序应该能够将这个特定的图片存储到数据库中。Twitter 有标签，但 Facebook 没有任何我可以解决这个问题的地方？

我正在考虑使用 FQL 查询，但不确定如何去做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:46:02.883

最好的（也是唯一的？）方法是在照片信息中包含标签并从那里阅读。我不会为此使用 FQL，因为没有必要使用它。Graph API 提供了足够的可能性/连接来读取照片：

> [https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

(/me/photos, /me/photos/uploaded, /me/albums, ...)

# php - PHP：更好地 - 创建哈希表查找，或加密/解密哈希键？

> ID：13560466
> 
> 赞同：-2
> 
> 时间：2012-11-26T07:31:50.510
> 
> 标签：php, mysql, performance, encryption, hash

我正在构建一个适用于两个主要元素的应用程序。

第**一个**是一个段，它生成一个带有一些哈希键的条目（例如，5c2a4b5773500a0417f6e6d8299776d9cba7ead9）并将其插入到表中。

第二**个**是共享的 url（例如[http://myapp.com/a/5c2a4b5773500a0417f6e6d8299776d9cba7ead9](http://myapp.com/a/5c2a4b5773500a0417f6e6d8299776d9cba7ead9)），然后返回到服务器，对上述表进行查找，并执行某种预定义的操作，沿着记录传入的流量。

**这是我的问题：**

使用 40 个字符长度的字符串键进行查找似乎非常耗费资源。**加密**数据库中行的 ID是否更好，从而创建一个密钥，然后*使用 PHP***解密**“哈希”密钥，并在数据库返回服务器后在数据库上进行单行查找？*（永远不需要将哈希/加密密钥存储在数据库中）*

 **陷阱在哪里？我是否使用了正确的术语？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:52:54.823

**共识：**

*   **在数据库中的索引表列**上使用键进行查找已经非常有效，尽管 40 个字符长。

*   **避免**PHP 做任何**不必要的繁重**工作。

*   尽量不要对SO.com 用户**保密**。**

# web-applications - Servlet 没有被调用

> ID：13560468
> 
> 赞同：0
> 
> 时间：2012-11-26T07:31:55.900
> 
> 标签：web-applications, servlets

我显然在文件夹下的文件`Servlet`中声明了以下内容，但不知何故从未调用过 servlet OnStartup。我用println追踪，没有打印出来。有小费吗。`web.xml``WEB-INF`

```
<servlet>
        <servlet-name>onStartup</servlet-name>
        <servlet-class>com.my.package.OnStartup</servlet-class>
        <load-on-startup>1</load-on-startup>
</servlet> 
```

# delphi - 在 Delphi 中保持 ADOConnection 的连接

> ID：13560471
> 
> 赞同：0
> 
> 时间：2012-11-26T07:32:09.950
> 
> 标签：delphi, adoconnection

我有一个名为 MainModule 的数据模块，其中包含一个 ADOConnection 和另一个名为 DatabaseModule 的数据模块，其中包含 ADOQuery 、 ADOStoredProcedure 等，它是 MainModule 的子类：

```
TDatabaseModule= class(TMainModule) 
```

*   这个模块是自动创建的。

在我的应用程序中，所有来自 DatabaseModule 的类子类，现在认为 2 类如下：

```
TMyClass1= class(TDatabaseModule)

TMyClass2= class(TDatabaseModule) 
```

在我的应用程序中，我从 TMyClass1 和 TMyClass2 创建了一个实例，这两个类最终都连接到 MainModule 的 ADOConnection ，现在当我释放其中一个类时，MainModule 的连接被删除，其他类无法访问数据库，因为我的 ADOQuery 等已连接到MainModule 的 ADOConnection 和它的连接不活跃，我怎样才能保持连接活跃？

注意：我知道我可以将连接放在我的 DatabaseModule 中，并且每次创建类时，它都会为该类创建一个特定的连接实例，但它对数据库有过载，我在 SQL Server Profiler 中检查它。

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:03:18.050

MainModule 和 DatabaseModule 的 AutoCreation 将创建 2 个 ADOConnection 实例，加上 TDatabaseModule 子类的每个实例将再创建一个。

如何将您的 TMyClass1 实例（比如说 MyObj1）连接到 MainModule.ADOConnection？像 MyObj1.ADOConnection := MainModule.ADOConnection; ?

如果您现在销毁 MyObj1，它的所有组件也会被销毁，但是当您将 MyObj1.ADOConnection 引用更改为 MainModule.ADOConnection 时，您将失去 MainModule.ADOConnection。

您可以将 ADOConnection 组件移动到另一个 DataModule，将 ADOConnection 设置为 DatabaseModule（或 MainModule）属性，并在代码中分配使用数据集的 Connection 属性。而且您不应该自动创建您根本不打算使用的 DataModules。

# php - 如果函数在 PHP 中抛出致命错误，如何在下一个循环中继续执行？

> ID：13560474
> 
> 赞同：0
> 
> 时间：2012-11-26T07:32:29.653
> 
> 标签：php, exception-handling, error-handling, web-scraping, fatal-error

我会给你要点的。

我正在尝试使用[第三方 HTML 标签剥离器](http://www.chuggnutt.com/html2text)抓取某些 URL ，因为我认为默认的 strip_tags() 不能很好地完成这项工作。（我认为你不需要检查那个刮板）

现在有时，某些网站的 HTML 源代码包含一些奇怪的代码，导致我的 HTML 标签剥离器失败。

一个这样的例子是这个包含以下代码的[站点：](http://www.in.com/manmohan-singh/profile-311.html)

```
<li><a href="<//?=$cnf['website']?>girls/models-photo-gallery/?sType=6#top_menu">Photo Galleries</a></li> 
```

这导致上述标签剥离器抛出此错误：

> **解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，期望****/var/www/GET Tweets/htdocs/tmhOAuth-master/examples/class.html2text.inc(429)**中的 T_STRING 或 T_VARIABLE 或 T_NUM_STRING ：第**1**行的正则表达式代码
> 
> **致命错误**：preg_replace () [<a href='function.preg-replace'>function.preg-replace</a>]：评估代码失败：$this->_build_link_list("<//?=$cnf[\' website\']?>girls/models-photo-gallery/?sType=6#top_menu", "Photo Gallery") 在**/var/www/GET Tweets/htdocs/tmhOAuth-master/examples/class.html2text。公司**上线 **429**

现在发生的情况是，有许多 URL 数组，其中一些会抛出上述错误。我对每个 URL 进行一些处理。

如果数组中的某个 URL 抛出这样的错误，我希望执行继续处理下一个 URL，而不会干扰任何东西。我的代码是这样的：

```
foreach ($results as $result)
{
    $url=$result->Url;

    $worddict2=myfunc($url,$worddict2,$history,$n_gram);        
} 
```

这里 myfunc 进行处理并使用我之前提到的第 3 方 HTML 剥离器。我尝试将代码修改为：

```
foreach ($results as $result)
    {
        $url=$result->Url;
        $worddicttemp=array();
        try
        {
            $worddicttemp=myfunc($url,$worddict2,$history,$n_gram); //returns the string represenation of what matters, hopefully
            //The below line will be executed only when the above function doesn't throw a fatal error
            $worddict2=$worddicttemp;
        }
        catch(Exception $e)
        {
            continue;
        }
    } 
```

但我仍然遇到同样的错误。怎么了？为什么 myfunc() 中的代码现在一旦遇到致命错误就会将控制权转移到 catch 块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:14:15.920

我建议你在解析之前使用一些美化脚本，比如[Tidy 。](http://www.php.net/manual/ru/book.tidy.php)你的问题可以通过添加来解决

```
$html_content = htmlspecialchars($html_content) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T08:17:35.950

您无法捕获解析错误（或任何致命错误，但解析错误更糟糕，因为它们会在代码加载后立即生成）。我所知道的隔离它们的最好方法是运行完全独立的 PHP 进程来处理您想要从中恢复并期望生成致命错误的任何内容。

另请参阅[如何捕获 PHP 致命错误](https://stackoverflow.com/questions/277224/how-do-i-catch-a-php-fatal-error)

# iphone - 如何在 iphone 的 avassetwriter（img 到视频）中添加淡入/淡出效果

> ID：13560476
> 
> 赞同：8
> 
> 时间：2012-11-26T07:32:30.900
> 
> 标签：iphone, objective-c, avassetwriter

我正在使用 avassetwriter 从带有音频的图像数组中创建一个 .mov，我想在创建视频中添加淡入/淡出效果，有人使用过任何代码吗？提前感谢您的帮助！

```
...
for(UIImage * img in imageArray)
    {
        //UIImage * img = frm._imageFrame;
        buffer = [self pixelBufferFromCGImage:[img CGImage]]; ``BOOL append_ok = NO;
    int j = 0;
    while (!append_ok && j < 30) {
        if (adaptor.assetWriterInput.readyForMoreMediaData)  {
            //print out status:
            NSLog(@"Processing video frame (%d,%d)",frameCount,[imageArray count]);

            CMTime frameTime = CMTimeMake(frameCount*frameDuration,(int32_t) fps);
            append_ok = [adaptor appendPixelBuffer:buffer withPresentationTime:frameTime];
            if(!append_ok){
                NSError *error = videoWriter.error;
                if(error!=nil) {
                    NSLog(@"Unresolved error %@,%@.", error, [error userInfo]);
                }
            }
        }
        else {
            printf("adaptor not ready %d, %d\n", frameCount, j);
            [NSThread sleepForTimeInterval:0.1];
        }
        j++;
    }
    if (!append_ok) {
        printf("error appending image %d times %d\n, with error.", frameCount, j);
    }
    frameCount++;
}...`` 

```

# .net - 等效于 .NET 的 Twitter Thrift API

> ID：13560493
> 
> 赞同：0
> 
> 时间：2012-11-26T07:33:54.680
> 
> 标签：.net, twitter, load-balancing, rpc, thrift

如果您编写基于 thrift 的服务器到服务器调用，Twitter 提供了一个非常好的 api - com.twitter.common.thrift - 它提供支持多个 thrift 服务器、负载平衡和其他一些好东西。有谁知道.NET是否有等价物？我主要对上面提到的多远程服务器支持和负载平衡感兴趣。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:48:36.497

好像没有同类。我必须自己开发： [https ://github.com/vyakhir/pooling](https://github.com/vyakhir/pooling)

# bing-api - 如何从 Bing API 获取搜索结果的数量

> ID：13560495
> 
> 赞同：7
> 
> 时间：2012-11-26T07:34:08.983
> 
> 标签：bing-api

我想使用 bing search api 来获取给定查询的搜索结果计数，但是，Bing API 似乎不返回任何包含搜索结果计数的字段。

我应该指定一些选项来请求 URL 吗？或者 Bing API 不返回结果计数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T20:23:42.660

您可以获得结果计数，但它并不像我想象的那么明显。使用此网址：

```
https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Composite?Sources=%27web%27&Query=%27YOUR_QUERY_HERE%27&$top=1&$format=JSON 
```

您可以获得一个 JSON 字符串，其中包含结果计数

```
d->results[0]->WebTotal 
```

您需要为此使用复合搜索（我仅`web`在此示例中指定，但您可以使用`web+news`或任何其他 bing 源）并且您必须检索至少一个结果 ( `$top=1`)。

您也可以使用`Atom`代替`JSON`来获取 xml 响应。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T08:55:24.260

对于那些订阅 SearchWeb 流而不是一般搜索的人，URL 是这样的：

```
https://api.datamarket.azure.com/Data.ashx/Bing/SearchWeb/v1/Composite?Query=%27YOUR_QUERY_HERE%27&$top=1&$format=JSON 
```

与王堂的回答一样，结果应该包括

```
d->results[0]->WebTotal 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-10T14:03:09.077

您可以从结果对象中获取结果计数：

```
results_object['searchResults']['webPages']['totalEstimatedMatches'] 
```

# symfony1 - 获取 symfony 中关系表条目的计数

> ID：13560502
> 
> 赞同：0
> 
> 时间：2012-11-26T07:34:37.707
> 
> 标签：symfony1, symfony-1.4

如何获取每个作业下的条目数。让我们看一个 jobeet 教程，在这里我想显示每个工作的简历提交数量。

表

```
job : id  title      
submit : id job_id file 
```

结果 ：

```
 title           submits    
 job a             5
 old job           20 
```

我正在使用*Doctrine*。那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:10:53.027

像这样的东西：

```
$job    = Doctrine_Core::getTable('Job')->find(1);

// it will query the database to fetch the relation
$submit = $job->getSubmit()->count(); 
```

但是，如果您想要更具体的内容，请向我们展示您的`schema.yml.`

如果您想避免对数据库进行新查询，可以使用 a 获取关系`leftJoin`：

```
$job    = Doctrine_Core::getTable('Job')
  ->leftJoin('Job.Submit')
  ->find(1);

// the relation is already fetched, so it won't perform a new query
$submit = $job->getSubmit()->count(); 
```

顺便提一下，这个`->count()`方法要小心，如果你有很多提交，这个查询不会真正优化。最好的方法是执行手动查询计数：

```
$submit = Doctrine_Core::getTable('Submit')
    ->createQuery('s')
    ->select('COUNT(s.id) as total')
    ->where('s.job_id = ?', array($job->getId()))
    // HYDRATE_NONE won't hydrate the return object 
    ->execute(array(), Doctrine_Core::HYDRATE_NONE);

// I guess the value is here but test yourself
var_dump($submit[0]); 
```

# java - 另一个 epl 文件中的 Esper 表达式

> ID：13560515
> 
> 赞同：0
> 
> 时间：2012-11-26T07:35:33.710
> 
> 标签：java, esper, complex-event-processing

如何在其他 EPL 文件中分发**表达式？**

我试过了，但有两个问题需要看。
1\. 任何 EPL 文件不能只包含“表达式”。（“意外结束”错误）
2\. 访问另一个 EPL 文件中定义的表达式，给出“未找到”错误。
这是我的尝试：
//epl1.epl

```
module eplTest;
expression twoPI 
{ 
  3.141 * 2
} 
```

//epl2.epl

```
module eplTestmain;
uses SampleEvent;
uses eplTest;

select twoPI() from SampleEvent; 
```

我正在使用netbeans。 **如果我知道如何在 epl 中创建单行函数**
也会很有用？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T23:03:28.327

目前在 Esper EPL 中没有“创建表达式”语法，表达式是语句本地的，目前不能全局声明**

# jquery - 如何克服 window.onbeforeunload 中的默认警报消息

> ID：13560516
> 
> 赞同：0
> 
> 时间：2012-11-26T07:35:33.923
> 
> 标签：jquery, window.onunload

我使用 window.onbeforeunload 我有我自己的自定义警报消息，但随着我的消息，一些默认消息也显示在该确认窗口中。我只需要我的自定义消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:36:29.557

你无法做到这一点。这是浏览器的默认功能。

# spring - 测试包中的自动装配 java 类 - Junit

> ID：13560518
> 
> 赞同：1
> 
> 时间：2012-11-26T07:35:41.340
> 
> 标签：spring, junit, autowired

我想在运行时为我的 junit 测试用例创建测试数据。作为该活动的一部分，我选择编写一组数据夹具和一个围绕它的实现，它将创建/删除/更新测试数据。这些将从每个 Junit 类的 @before 和 @After 方法中调用——@before 用于设置测试数据，@after 用于拆除测试数据。

我已经在“test”包中编写了所有这些实现，并将主类标记为@component 和@autowired 这些新类。但是，当我运行 junit 测试时，它无法创建这些新类的实例，因此自动装配似乎不起作用。

除了在 test-config.xml 中添加以下配置之外，我不确定在自动装配之前我还需要做什么

```
<context:component-scan base-package="test">
</context:component-scan> 
```

我正在使用 Spring 3.x 和 Junit 4。

- - - - -更多信息 - - - - - - -

//业务实现：

//文件位置：src/main/java/com/abc/prq

```
package com.abc.pqr

@Service("myservice")
public class MyService{

} 
```

//Myservice类的Junit测试：

//文件位置：src/test/java/com/abc/pqr

```
 package com.abc.pqr;
 @RunWith(SpringJUnit4ClassRunner.class)
 @ContextConfiguration(locations={"classpath:/META-INF/spring/test-Config.xml"})
 public class MyServiceTest {
     @Autowired  
     private ABC abc;
 } 
```

//数据夹具创建/删除/更新测试数据

//文件位置：src/test/java/com/abc/pqr/datafixtures

```
 package com.abc.pqr.datafixtures
 @Component("abc") 
 public class ABC{
     public void create(){
     } 
     public void remove(){
     } 
     public void update(){
     }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T12:45:21.187

我认为问题是由于您没有在弹簧测试上下文中扫描正确的包这一事实引起的。该`test-Config.xml`文件应如下所示：

```
<context:annotation-config />
<context:component-scan base-package="com.abc.pqr.datafixtures" /> 
```

希望这可以帮助。

# sql - 如何计算当前查询中包含值的行数？

> ID：13560521
> 
> 赞同：0
> 
> 时间：2012-11-26T07:36:06.640
> 
> 标签：sql, sql-server, tsql

我正在使用带有此表的 SQL Server 2008： ![在此处输入图像描述](../Images/75632568f927346bcc410ff1636081a7.png)

我有以下查询：

```
SELECT caller, called, SUM(duration) as duration, 
      dateadd(DAY,0, datediff(day,0, time))as Batch2 ,
      CONVERT(VARCHAR(8), time, 4) AS Batch  
FROM  Calls oc
WHERE caller='somevalue'
GROUP BY called, dateadd(DAY,0, datediff(day,0, time)),
          CONVERT(VARCHAR(8), time, 4),
          caller
ORDER BY duration DESC,called 
```

现在我想按查询中包含相同调用值的行数对查询进行排序，这意味着第一个结果将是大多数日子出现的调用。

现在我得到的最接近的是使用：

```
order by (select count(called) from Calls where called=oc.called ),
         duration DESC,
         called 
```

但这通常会返回 call 的所有外观，而不是按我的初始查询区分值分组。

而且我不能使用`OVER()`，因为它只会返回一般的行数。

这是我现在的输出示例：

```
callervalue   somecalledvalue   589 2012-11-21 00:00:00.000 21.11.12
callervalue   somecalledvalue   551 2012-11-20 00:00:00.000 20.11.12
callervalue   somecalledvalue   506 2012-11-22 00:00:00.000 22.11.12 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:37:27.403

答案由 Chris Bednarski 作为评论发布：

> 尝试 COUNT(called) OVER (PARTITION BY called)

哪个成功了。

# java - 提取 AVCHD 视频的创建日期和时间

> ID：13560525
> 
> 赞同：1
> 
> 时间：2012-11-26T07:36:30.143
> 
> 标签：java, xuggler

我正在尝试从 .MTS 文件（AVCHD 视频文件）中提取视频的创建日期和时间。

有没有免费的java库可用？

我已经尝试过使用 Xuggler，但无法弄清楚如何提取这些特定信息。

任何帮助表示赞赏。

谢谢。

# android - 如何在 Android 中的菜单项上实现动态值

> ID：13560526
> 
> 赞同：12
> 
> 时间：2012-11-26T07:36:30.370
> 
> 标签：android, menu, android-actionbar, android-menu

我在操作栏中有一个菜单项。除了菜单项图像，我还需要显示一些与之相关的数字，这些数字会经常变化。我没有使用操作栏 sherlock。我不想用那个。除此之外，其他一切都可以正常工作。在显示的图像中，白色图标颜色图标是我的。我需要动态生成带有红色背景的数字。我怎样才能在 Android 中做到这一点？

这是示例图像：

![在此处输入图像描述](../Images/c6d8a9ea4dad53bbb6eb4f8ce9de38ef.png)

更新：

我的 menu.xml 中有这个菜单项。这应该像显示通知计数的通知菜单项一样工作。我将菜单图标设置为，

```
 menuItem.setIcon(image); 
```

现在，在菜单项的顶部，我需要放置一个包含通知总数的文本视图。

是否可以使用 viewbadger 实现此功能？ [Github 网址](https://github.com/jgilfelt/android-viewbadger)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-20T16:31:41.107

我发现了如何将 actionView 添加到菜单项并在代码中将设置值检索到视图中。

见这里：[https ://stackoverflow.com/a/16648170/857681](https://stackoverflow.com/a/16648170/857681)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-10T22:15:04.883

在对 SO 上的几乎所有资源进行了大量尝试之后，我转向了博客；成功。我想分享对我有用的东西（Api >= 13）；[来源](http://www.jmhend.me/layerdrawable-menuitems)。

让我们从甜蜜的代码开始，**它的使用方式**：

```
 public boolean onCreateOptionsMenu(Menu menu) {
    //inflate menu
    getMenuInflater().inflate(R.menu.menu_my, menu);

    // Get the notifications MenuItem and LayerDrawable (layer-list)
    MenuItem item = menu.findItem(R.id.action_notifications);
    LayerDrawable icon = (LayerDrawable) item.getIcon();

    // Update LayerDrawable's BadgeDrawable
    Utils2.setBadgeCount(this, icon, 2);

    return true;
} 
```

`menu_my.xml`: _

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    tools:context=".MainActivity">
    <item
        android:id="@+id/action_notifications"
        android:icon="@drawable/ic_menu_notifications"
        android:title="Notifications"
        app:showAsAction="always" />
</menu> 
```

此类方便地制作`BadgeDrawable`; 它的外观也可以修改：

```
public class BadgeDrawable extends Drawable {

    private float mTextSize;
    private Paint mBadgePaint;
    private Paint mTextPaint;
    private Rect mTxtRect = new Rect();

    private String mCount = "";
    private boolean mWillDraw = false;

    public BadgeDrawable(Context context) {
        //mTextSize = context.getResources().getDimension(R.dimen.badge_text_size);
        mTextSize = 12F;

        mBadgePaint = new Paint();
        mBadgePaint.setColor(Color.RED);
        mBadgePaint.setAntiAlias(true);
        mBadgePaint.setStyle(Paint.Style.FILL);

        mTextPaint = new Paint();
        mTextPaint.setColor(Color.WHITE);
        mTextPaint.setTypeface(Typeface.DEFAULT_BOLD);
        mTextPaint.setTextSize(mTextSize);
        mTextPaint.setAntiAlias(true);
        mTextPaint.setTextAlign(Paint.Align.CENTER);
    }

    @Override
    public void draw(Canvas canvas) {
        if (!mWillDraw) {
            return;
        }

        Rect bounds = getBounds();
        float width = bounds.right - bounds.left;
        float height = bounds.bottom - bounds.top;

        // Position the badge in the top-right quadrant of the icon.
        float radius = ((Math.min(width, height) / 2) - 1) / 2;
        float centerX = width - radius - 1;
        float centerY = radius + 1;

        // Draw badge circle.
        canvas.drawCircle(centerX, centerY, radius, mBadgePaint);

        // Draw badge count text inside the circle.
        mTextPaint.getTextBounds(mCount, 0, mCount.length(), mTxtRect);
        float textHeight = mTxtRect.bottom - mTxtRect.top;
        float textY = centerY + (textHeight / 2f);
        canvas.drawText(mCount, centerX, textY, mTextPaint);
    }

    /*
    Sets the count (i.e notifications) to display.
     */
    public void setCount(int count) {
        mCount = Integer.toString(count);

        // Only draw a badge if there are notifications.
        mWillDraw = count > 0;
        invalidateSelf();
    }

    @Override
    public void setAlpha(int alpha) {
        // do nothing
    }

    @Override
    public void setColorFilter(ColorFilter cf) {
        // do nothing
    }

    @Override
    public int getOpacity() {
        return PixelFormat.UNKNOWN;
    }
} 
```

这个类有助于设置数字。我建议实施更多的方法来将徽章设置为日期等：

```
public class Utils2 {
    public static void setBadgeCount(Context context, LayerDrawable icon, int count) {

        BadgeDrawable badge;

        // Reuse drawable if possible
        Drawable reuse = icon.findDrawableByLayerId(R.id.ic_badge);
        if (reuse != null && reuse instanceof BadgeDrawable) {
            badge = (BadgeDrawable) reuse;
        } else {
            badge = new BadgeDrawable(context);
        }

        badge.setCount(count);
        icon.mutate();
        icon.setDrawableByLayerId(R.id.ic_badge, badge);
    }

} 
```

并且*mui 重要*的是一个可绘制对象（如布局）`res/drawable`：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/ic_notification"
        android:drawable="@drawable/ice_skate"
        android:gravity="center" />

    <!-- set a place holder Drawable so android:drawable isn't null -->
    <item
        android:id="@+id/ic_badge"
        android:drawable="@drawable/ice_skate" />
</layer-list> 
```

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T07:56:07.923

这是您可以尝试的一件事：

创建一个自定义`Drawable`，在背景中绘制图像并在图像顶部绘制文本。查看[此帖子](https://stackoverflow.com/questions/2967904/implementing-a-customized-drawable-in-android)以获取示例。

然后将其动态设置`Drawable`为`MenuItem`背景...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T07:59:08.630

使用动作视图。它适用于： default`ActionBar`和`ActionBarSherlock`.

[这是一个例子](http://developer.android.com/guide/topics/ui/actionbar.html#ActionView)

使用这种方法，您可以创建自己的`View`（例如通过膨胀一些布局），然后做任何您想做的事情（更改背景、更改内容、如果您的操作视图是子类`ViewGroup`等动态添加另一个视图）。

# java - 关于 Swing 计时器的一些问题

> ID：13560528
> 
> 赞同：0
> 
> 时间：2012-11-26T07:36:47.437
> 
> 标签：java, swing, timer

```
package xyz;

import javax.swing.Timer;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class XYZ {

    public static void main(String[] args) throws InterruptedException {

        class TimeClass implements ActionListener {

            private int counter = 0;

            @Override
            public void actionPerformed(ActionEvent e) {
                counter++;
                System.out.println(counter);
            }

        }

        Timer timer;
        TimeClass tc = new TimeClass();
        timer = new Timer (100, tc);
        timer.start();
        Thread.sleep(20000);

    }
} 
```

在上面的代码中：

1.  TimeClass 应该在 main() 函数中创建。否则会显示错误“无法从静态上下文引用的非静态变量。”。为什么是这样？

2.  当我对 TimeClass 使用访问说明符（如 public 或 private）时，我遇到了非法的表达式开始错误。为什么是这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T07:59:33.337

1.  如果您在 main 方法之外定义 TimeClass，它应该是静态的。因为您正在尝试从静态方法（主要）访问它。无法从静态块或方法访问非静态变量。

2.  如果您在方法中定义一个类（如您的情况），则不能为它定义任何访问说明符。因为它只能在您的方法中访问，并且没有人可以在此方法之外看到或使用它。

将您的代码更改为这样的内容，然后它可以工作：

```
public class Test {

    private static class TimeClass implements ActionListener {

        private int counter = 0;

        @Override
        public void actionPerformed(ActionEvent e) {
            counter++;
            System.out.println(counter);
        }

    }

    public static void main(String[] args) throws InterruptedException {    

        TimeClass tc = new TimeClass();
        Timer timer = new Timer (100, tc);
        timer.start();
        Thread.sleep(20000);    
    }
} 
```

# linux - linux qt QWidget::create 运行错误

> ID：13560536
> 
> 赞同：0
> 
> 时间：2012-11-26T07:37:39.230
> 
> 标签：linux, qt, qwidget

我正在 linux OS 下使用 qt 开发一个项目，其中 qt Qwidget 需要将其设置为属于其他进程的本机窗口。本机窗口不是我删除的。所以我无法获取它的来源并更改它。
我在以下位置找到了一种方法： http: [//libqxt.bitbucket.org/doc/0.6/qxtwindowsystem.html](http://libqxt.bitbucket.org/doc/0.6/qxtwindowsystem.html)

```
class NativeWindow : public QWidget {
    public:
        NativeWindow(WId wid) {
            QWidget::create(wid, false, false); // window, initializeWindow, destroyOldWindow
        }
        ~NativeWindow() {
            QWidget::destroy(false, false); // destroyWindow, destroySubWindows
        }
};

WindowList windows = QxtWindowSystem::windows();
QStringList titles = QxtWindowSystem::windowTitles();
bool ok = false;
QString title = QInputDialog::getItem(0, "Choose Window", "Choose a window to be hid:", titles, 0, false, &ok);
if (ok)
{
    int index = titles.indexOf(title);
    if (index != -1)
    {
        NativeWindow window(windows.at(index));
        window.hide();
    }
} 
```

它指出：
注意：底层窗口系统可能允许也可能不允许改变属于其他进程的窗口的状态。
当我这样做时，我收到一个异常错误：

```
X Error: BadWindow (invalid Window parameter) 3
Major opcode :3(X_GetWindowAttributes)
Resource id: 0x805cff4 
```

那么，我怎样才能让窗口系统允许我改变属于 linux 中其他进程的窗口的状态呢？

# powershell - Powershell 中的数组

> ID：13560540
> 
> 赞同：0
> 
> 时间：2012-11-26T07:37:59.727
> 
> 标签：powershell, powershell-2.0, powershell-3.0

我曾经在 VBSCRIPT 中使用数组，如下所示……我不确定我应该如何在 PowerShell 中进行操作……有谁能帮我……？

```
CODE --> VBSCRIPT
dim arrErrors(12)
arrErrors(0) = "APP0"
arrErrors(1) = " APP1"
arrErrors(2) = " APP2"
arrErrors(3) = " APP3”
arrErrors(4) = "APP4"
arrErrors(5) = "APP5"
arrErrors(6) = "APP6"
arrErrors(7) = "APP7"
arrErrors(8) = "APP8"
arrErrors(9) = "APP9"
arrErrors(10) = "APP10"
arrErrors(11) = "APP11"
arrErrors(12) = "APP12"
for i = 0 to ubound(arrErrors)
    strError = arrErrors(i)
    if (left(lcase(strErrorLine), len(strError)) = lcase(strError)) then
    objErrorLog.WriteLine strErrorLine & vbTab & strComputer & vbTab & "Found Error number" & vbTab & i
    exit for
    end If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:06:48.343

创建一个哈希表。用错误名称和值填充它。解析错误字符串并查看哈希表是否包含它。像这样，

```
$htErr = @{ "app0" = 0; "app1" = 1; "app2" = 2 } # Populate hash table
$error = ... # get the error string from somewhere.
if($htErr[$error]) { 
    "Found error, code " + $htErr[$error] # Get code based on error string
} 
```

# silverlight - Silverlight 组件未加载到 MSCRM 2011 表单上

> ID：13560541
> 
> 赞同：1
> 
> 时间：2012-11-26T07:38:02.537
> 
> 标签：silverlight, crm

我有一个带有 silverlight 组件的部分，根据记录的状态可见。

*   如果我设置该部分的默认可见 = true 并在某些情况下隐藏它 => 它可以工作。但我无法将其设置为默认可见 = true，因为屏幕加载不流畅（silverlight 组件出现并消失）

*   或者，我默认隐藏它（默认情况下可见 = false）并且仅在需要时显示它（jscript - onload）=> 它不起作用！silverlight 组件是空的！我已经尝试了一个非常简单的silverlight组件，只有一个简单的标签，但它仍然是同样的问题。

我想这是在 MSCRM 2011 上加载 silverlight webresource 的问题......

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:41:46.840

我发现了问题，我认为这是 CRM 中的错误。在我的onload中，我添加了它

var s = document.getElementById("WebResource_silverlight");

s.style.height = "100%"

然后它再次可见:)

# iphone - 我可以使用 UIImage 在 Facebook 上朋友的墙上发布图像吗

> ID：13560542
> 
> 赞同：0
> 
> 时间：2012-11-26T07:38:02.783
> 
> 标签：iphone, objective-c, ios, xcode

我可以使用代码在朋友的墙上张贴图片

```
-(void)PostToBuddyWallWithText:(NSString *)strMessage
{
    NSMutableDictionary  *postVariablesDictionary = [[NSMutableDictionary alloc] init];

    [postVariablesDictionary setObject:@"100003146964353" forKey:@"from"];    
    [postVariablesDictionary setObject:strMessage forKey:@"message"];
    [postVariablesDictionary setObject:@"http://www.xyz.com/graphics/best-friends/best-friends24.gif" forKey:@"picture"];

    AppDelegate *objAppDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    if (objAppDelegate.objFacebook.isSessionValid == YES) 
    {
        [objAppDelegate.objFacebook requestWithGraphPath:[NSString stringWithFormat:@"%@/feed/",self.strfacebook_Id] andParams:postVariablesDictionary andHttpMethod:@"POST" andDelegate:nil];

        NSLog(@"message: %@",postVariablesDictionary);
        [postVariablesDictionary release];

        UIAlertView *facebookAlter=[[UIAlertView alloc] initWithTitle:@"Message" message:@"Posted successfully on facebook" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil, nil];
        [facebookAlter show];
        [facebookAlter release]; 
        [self dismissModalViewControllerAnimated:YES];    
    }  else {
            [objAppDelegate FacebookLogin];
    }   
} 
```

但我无法找到将我拥有的图像作为 UIImage 发布的方法。这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:30:30.860

实现 GarphAPI 和 ASIHTTPRequest 并使用下面的代码在朋友墙上发布带有图像的文本......

```
 NSString *urlString = [NSString stringWithFormat:@"https://graph.facebook.com/%@/photos?access_token=%@",[FRIEND_ID], fbGraph.accessToken];

    UIImage * pic = [UIImage imageNamed:@"image.png"];
    NSData *picData = UIImageJPEGRepresentation(pic, 1);
    NSURL *url = [NSURL URLWithString:urlString];
    ASIFormDataRequest *newRequest = [ASIFormDataRequest requestWithURL:url];
    [newRequest setPostValue:@"This is Sample Text" forKey:@"message"];
    [newRequest setData:picData forKey:@"data"];
    [newRequest setPostValue:fbGraph.accessToken forKey:@"access_token"];
    [newRequest setDelegate:self];
    [newRequest startAsynchronous]; 
```

这将作为 100% 的欢呼工作......我现在正在使用它......顺便将 FBGraph.h 和 ASIFormDataRequest.h 导入您的实现文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:40:53.360

用它来发布 UIImage

```
[postVariablesDictionary setObject:UIImagePNGRepresentation(image) forKey:@"picture"]; 
```

# c# - SystemOutOfMemoryException

> ID：13560545
> 
> 赞同：0
> 
> 时间：2012-11-26T07:38:11.787
> 
> 标签：c#, .net, c#-4.0, optimization, memory-management

我有大约 60,000 个图像 URL，我正在使用多个 webclient 实例下载这些图像以下载这些图像。但是在下载图像时，它会在大约 15000 张图像后给出 SystemOutOfMemory 异常。那么如何优化 webclient 使其不会出现此异常。

我的代码看起来像这样：

```
if (!File.Exists(download_image_path))
{
wc = new System.Net.WebClient();
wc.DownloadFile(imgURL, download_image_path);
wc.Dispose();
} 
```

它正在循环运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:58:26.337

使用[对象池](http://sourcemaking.com/design_patterns/object_pool)设计模式。

不要使用 60000 个 webclient 实例（从您的响应中查看），而是使用 10/15/100 任何最佳值。保持也是可配置的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:30:27.460

一次获取一些 url 并将其发送到另一个函数，或者我建议您改用另一个应用程序，当这些图像完全下载后关闭该应用程序，然后启动另一个应用程序并将另一批 url 作为命令行参数传递，将帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:41:57.017

一次下载一张图片？如果速度不是问题，那将是最简单的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T09:03:54.140

1.  使用每 1 秒运行一次的计时器控件
2.  将您的代码放在计时器内。
3.  创建一个计数器：File_inDownload，并在计时器中增加它。计时器还应检查 File_inDownload <100 以处理下载
4.  处理对象 wc 的 eventDownloadFileCompleted
5.  在这种情况下，将计数器 File_inDownload 减 1。

# java - Multipart，设置一个部分的Content-Type

> ID：13560546
> 
> 赞同：3
> 
> 时间：2012-11-26T07:38:22.590
> 
> 标签：java, android, content-type, multipart

我有这段代码可以将数据发布到我的服务器：

```
// HTTP Settings
            HttpClient httpClient = new DefaultHttpClient();
            HttpPost postRequest = new HttpPost(
                    "http://myserver.com/Login");
            MultipartEntity reqEntity = new MultipartEntity(
                    HttpMultipartMode.BROWSER_COMPATIBLE);

            // Http Headers
            postRequest.addHeader("Accept", "application/xml");
            postRequest.addHeader("Connection", "keep-alive");

            // Credentials
            reqEntity.addPart("username", new StringBody(ServerData.username));
            reqEntity.addPart("password", new StringBody(ServerData.password));

            if (m_sigFile.exists()) {
                Bitmap m_sig = BitmapFactory.decodeFile(sigFilePath
                        + "m_sig.jpg");
                ByteArrayOutputStream m_bao = new ByteArrayOutputStream();
                m_sig.compress(Bitmap.CompressFormat.JPEG, 90, m_bao);

                byte[] m_ba = m_bao.toByteArray();
                String m_ba1 = Base64.encodeToString(m_ba, 0);
                reqEntity.addPart("m_sig.jpg", new StringBody(m_ba1));
            }

            postRequest.setEntity(reqEntity);
            HttpResponse response = httpClient.execute(postRequest);
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    response.getEntity().getContent(), "UTF-8"));
            String sResponse;
            StringBuilder s = new StringBuilder();

            while ((sResponse = reader.readLine()) != null) {
                s = s.append(sResponse);
            } 
```

该代码完美运行，所有数据都发送到服务器，除了 jpeg 文件。如果我将内容类型设置为“图像/jpeg”，服务器仅接受该文件，但仅适用于图像。用户名和密码必须是纯文本。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T20:47:28.100

这将起作用：

```
 ContentBody cbFile = new FileBody(new File(myPath
                    + "image_1.jpg"),
                    "image/jpeg");
            reqEntity.addPart("photo1"), cbFile); 
```

不要忘记检查您的文件是否存在！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:47:04.200

有一个`StringBody`接受内容类型的构造函数：

```
new StringBody(titleString, "application/atom+xml", Charset.forName("UTF-8")); 
```

# backbone.js - 使用 Backbone.Notifier 显示自定义视图

> ID：13560548
> 
> 赞同：2
> 
> 时间：2012-11-26T07:38:51.293
> 
> 标签：backbone.js, backbone-views

我正在使用[Backbone.Notifier](http://backbone-notifier.e-w.co.il/)来显示警报。如何在其中显示自定义主干视图？有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T10:20:40.820

不要认为它适合添加您自己的自定义视图。通知视图的自定义是通过 CSS 实现的。

要自定义按钮，您可以使用 css 属性：

```
buttons: [
    {'data-role': 'myOk', text: 'Sure', 'class': 'default', css: {width: 120}},
    {'data-role': 'myOk', text: 'Yes'}] 
```

要自定义基本通知窗口，请使用“notifier”CSS 类。

您可以使用通知程序上的“baseCls”属性更改此设置。

不幸的是，我认为没有办法将 Backbone 视图分配给通知程序，但如果它只是自定义您想要的美学，那么希望 CSS 就足够了。

如果您真的想采用 hacky 方法，您可以使用 NotificationView，它是标准的 Backbone 视图（Notifier 类的一部分 - Backbone.Notifier.NotificationView）。您可以尝试将其覆盖到您的实现中，但这绝对是一个 hack，所以不推荐它。值得一看 notifer.js 源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:44:10.153

为了在backbone.notifier中显示我的自定义视图，我在插件中添加了以下几行

在return语句之前的notify函数中

```
 .......

    if(options.custView){
        msgInner.off('click'); //the turn off default behaviour which is to destroy view on click
        options.custView.destroyNotifier = removeFn; //now in the custom view i just call this.destroyNotification to destroy the notification 
        msgView.$el.find('.notifier-message').html(options.custView.render().el); //pasting my view on notification to display  
    }                   
    return msgView;
} 
```

这就是我现在调用插件的方式

```
var notifier = new Backbone.Notifier({
            el : 'body',
            theme : 'clean'
        });

notifier.notify({
    custView : (new SomeView({
          x : 'xyz'
        })),
    ms : false,  //to aviod a timeout 
    destroy : true 
}) 
```

# android - Android：使用 viewPager 限制片段加载

> ID：13560550
> 
> 赞同：6
> 
> 时间：2012-11-26T07:38:58.743
> 
> 标签：android, android-fragments, android-viewpager, fragmentpageradapter

我有 3 个由 FragmentPagerAdapter 管理的片段，设置为 viewPager。

我想一个一个地加载fragment，但是在执行FragmentActivity的onCreate方法时，执行的是前2个fragment（onCreateView方法）。

我尝试使用 setOffscreenPageLimit 方法限制片段加载，但没有任何改变。

```
mPagerAdapter =  new MyPagerAdapter(super.getSupportFragmentManager(), fragments);
pager = (ViewPager) super.findViewById(R.id.tabviewpager);
pager.setOffscreenPageLimit(0);
pager.setAdapter(this.mPagerAdapter); 
```

感谢您的帮助 。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T01:17:33.653

[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/support/v4/view/ViewPager.java#ViewPager.setOffscreenPageLimit%28int%29)中的最小值`OffscreenPageLimit`设置为：`1``ViewPager`

```
private static final int DEFAULT_OFFSCREEN_PAGES = 1;
....
public void setOffscreenPageLimit(int limit) {
    if (limit < DEFAULT_OFFSCREEN_PAGES) {
        Log.w(TAG, "Requested offscreen page limit " + limit + " too small; defaulting to " +
                DEFAULT_OFFSCREEN_PAGES);
        limit = DEFAULT_OFFSCREEN_PAGES;
    }
    if (limit != mOffscreenPageLimit) {
        mOffscreenPageLimit = limit;
        populate();
    }
} 
```

# android - 摩托罗拉蓝牙低功耗 readGattCharacterisitics 不返回

> ID：13560551
> 
> 赞同：1
> 
> 时间：2012-11-26T07:39:17.503
> 
> 标签：android, bluetooth, bluetooth-lowenergy

我正在摩托罗拉 Razr 手机（运行 android 版本 2.3.5）上开发一个 android 应用程序，用于测试蓝牙低功耗设备（类似于 TI 的 CC2540 的密钥卡）。我正在为我的应用程序使用摩托罗拉提供的 MOT_BTLE_Stubs.jar。从我的应用程序中，我可以连接到设备。但是 readGattCharacteristicValue 似乎没有工作，它在某个时候工作。我正在尝试从句柄中读取值。每次我在广播接收器中读取时，它都会返回该值。但现在它没有反应。我添加了一个意图过滤器来接收 ACTION_GATT_CHARACTERISTICS_READ。它不返回广播接收器中的值。

我恢复了旧代码。它不起作用了。貌似手机蓝牙设置有问题。我无法刷新缓存内容。如果有人遇到同样的问题并已解决，请告诉我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T04:24:39.717

我正在使用`ICS_R2`，所以那里没有帮助。但是要刷新缓存，root手机，删除`/data/misc/bluetoothd`，然后重启手机：

```
adb shell
su
busybox rm -rf /data/misc/bluetoothd
adb reboot 
```

# java - 如何在我的 jar 中获取 .txt 文件？

> ID：13560552
> 
> 赞同：0
> 
> 时间：2012-11-26T07:39:31.677
> 
> 标签：java, jar, embedded-resource, filepath, getresource

我想说我搜索了很多，甚至 google 和 stackoverflow。有很多关于这个的话题，但我没有找到我真正需要的东西。

我的问题是：

我想定义我自己的包文件夹中的文件。文件的格式是 .txt。文件在 `xxx\src\xxxx\myTXTFile.txt` 我写这个代码来到达我的txt：

```
 File f = new File(xxx.class.getResource("pr.txt").getFile()); 
```

当我在 netbeans 上运行此代码时，它可以工作。但是当我编译并单击 .jar 文件时，它会报告：

```
File not found 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:58:32.520

您可以使用以下代码访问您的 txt 文件：

```
File f = new File("xxxx/myTXTFile.txt"); 
```

或者您必须将 txtfile 保存在临时文件夹中：

```
 InputStream is = getClass().getClassLoader().getResourceAsStream("xxxx/myTXTFile.txt");
        OutputStream os = new FileOutputStream(new File("/tmp/tempTXTFile.txt"));

        while ((i = is.read(buffer)) != -1)
        {
            output.write(buffer, 0, i);
        }

        output.close();

        is.close();

        File f = new File("/tmp/tempTXTFile.txt"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:19:08.027

在 IDE 中，该文件仍然位于 zip 格式的 jar 之外。因此被发现。对于 jar 中的文件，请使用：

```
OutputStream f = xxx.class.getResourceAsStream("pr.txt"); 
```

文件不起作用。

# jquery - 使用 jquery 的多个日期选择器

> ID：13560555
> 
> 赞同：0
> 
> 时间：2012-11-26T07:39:47.570
> 
> 标签：jquery, datepicker

我在使用 jQuery 在多个日期选择器中选择日期数组时注意到的一个问题。我在 11 月挑选了几个日期，然后将它们移到了 12 月。一旦我选择了 12 月的任何日期，日历会自动切换到 11 月，而它本应留在 12 月。如果我也搬到以后的任何一个月，也会发生同样的行为。

以下是我使用的代码：

```
$(function() {
    $( "#arry_dates" ).multiDatesPicker 
        ({ showOn: 'button',
        autoOpen: true,
        minDate: 0,
        buttonImage: 'favicon.ico',
        buttonImageOnly: true, 
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T00:43:12.403

看到您正在使用 $( "#arry_dates" )...，这意味着您正在使用 ID 进行输入，例如：

```
<input type="text" id="arry_dates" />

$(function() {
    $( "#arry_dates" ).multiDatesPicker 
        ({ showOn: 'button',
        autoOpen: true,
        minDate: 0,
        buttonImage: 'favicon.ico',
        buttonImageOnly: true, 
    }); 
}); 
```

从 ID 更改为类，例如：

```
<input type="text" class="arry_dates" />

$(function() {
    $( ".arry_dates" ).multiDatesPicker 
        ({ showOn: 'button',
        autoOpen: true,
        minDate: 0,
        buttonImage: 'favicon.ico',
        buttonImageOnly: true, 
    }); 
}); 
```

这应该独立对待它们。

# wordpress - wordpress while 循环的第 N 次迭代

> ID：13560562
> 
> 赞同：0
> 
> 时间：2012-11-26T07:40:21.903
> 
> 标签：wordpress, while-loop, zurb-foundation

我知道这有点容易，但无法用 wordpress while 循环解决问题。我正在使用 zurb 框架和使用下面的 html 结构的产品列表。

```
<div class="row">
    <div class="four columns">
        item here
    </div>
    <div class="four columns">
        item here
    </div>
    <div class="four columns">
        item here
    </div>
</div> 
```

所以在while循环中，我想在每三个四列div之后重复整个结构。我试过下面的代码

```
 <?php
        $temp = $wp_query;
        $wp_query = null;
        $wp_query = new WP_Query();
        $wp_query->query('post_type=product' . '&paged=' . $paged .'');
    ?>

    <?php $counter = 0;

    if ( have_posts() ) : while ( have_posts() ) : the_post();
        if ($counter % 3 == 0):
        echo '<div class="row"><!--row starts here-->';
        endif; ?>

        <div class="four columns">
            <article>

                <header>
                    <hgroup>
                        <h2><a href="<?php the_permalink(); ?>" title="<?php echo esc_attr( sprintf( __( 'Permalink to %s', 'foundation' ), the_title_attribute( 'echo=0' ) ) ); ?>" rel="bookmark"><?php the_title(); ?></a></h2>
                        <h6>Written by <?php the_author_link(); ?> on <?php the_time(get_option('date_format')); ?></h6>
                    </hgroup>
                </header>

                <?php if ( has_post_thumbnail()) : ?>
                <a href="<?php the_permalink(); ?>" class="th" title="<?php the_title_attribute(); ?>" ><?php the_post_thumbnail(); ?></a>
                <?php endif; ?>

                <?php the_excerpt(); ?>

            </article>

        </div>

        <?php endwhile; ?>

    <?php else : ?>

        <h2><?php _e('No posts.', 'foundation' ); ?></h2>
        <p class="lead"><?php _e('Sorry about this, I couldn\'t seem to find what you were looking for.', 'foundation' ); ?></p>

    <?php endif;

    if ($counter % 3 == 0):
        echo '</div><!--row end here-->';
    endif; ?>

    <?php foundation_pagination(); ?>

</div>
<!-- End Main Content --> 
```

但它在每个循环中都错误地重复。我知道这很明显可以重复，但是我无法找到如何在仅 3 个四列之后重复的解决方案，并且在第一个循环行中也应该插入 div。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T01:25:15.460

完全按照安迪所说的去做，`$counter++;`在你的代码中添加代码，在 while 循环中。

例如，在您的代码中：

```
</div>
<?php $counter++; ?>
<?php endwhile; ?> 
```

这显示了在您的示例中将其放在两条现有行之间的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:42:50.153

您可能应该在循环中向计数器添加一个，例如`$counter++`，然后关闭此问题。

# objective-c - 如何在 XIB 中指定左、右或标题视图按钮

> ID：13560564
> 
> 赞同：0
> 
> 时间：2012-11-26T07:40:24.030
> 
> 标签：objective-c, xcode4.5

1.  我不想创建自定义导航栏。
2.  我正在推送一个 UIViewController，我想自定义导航栏如何查找该 UIViewController

在故事板中，我们只需指定 segue 并在屏幕上显示导航栏。我们只需将 UIBarItem 拖放到左侧和右侧。

在 XIB 中，navigationBar 根本不显示。

我可以添加导航项，但我添加的一项被忽略了。

我听说曾经有一个名为 navigationItem 的出口，但由于我不知道的原因它已被弃用。我可以添加 UINavigationBar，但是那将添加我自己的自定义栏。我想要 UINavigationController 提供的导航栏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T11:38:54.400

故事板设计器中导航栏的外观只是为了说明当您将 ViewController 加载到`UINavigationController`. 这并不意味着您的应用程序中实际上有一个导航控制器。

您需要将 a 添加`UINavigationController`到您的故事板（可能作为第一个场景），然后将您的 ViewController 连接到它（作为根视图控制器）。

然后您应该能够在故事板设计器中设置您的标题，并将条形按钮项拖到导航栏上。

另请参阅[此问题](https://stackoverflow.com/questions/11979705/linking-uinavigationcontroller-in-storyboard-to-appdelegate)的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T11:33:09.090

我认为这是苹果希望实现这一点的实际方式。

把 UINavigationBar

将出口设置为 UINavigationItem

这是陷阱

覆盖 navigationItem 属性以返回您创建的 UINavigationItem。

而已。

```
-(UINavigationItem *) navigationItem
{
    return self.navigationItem1;
} 
```

如果您的 navigationItem 仍在 UINavigationBar 中，我认为您也需要对 UINavigation Bar 有一个强大的出口。如果我在这里错了，请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T11:02:29.297

您可以在代码中设置它。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.title = @"Title";
    self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back"style:UIBarButtonItemStyleBordered target:self action:nil];
    self.navigationItem.rightBarButtonItem = "Create button" ;
    self.navigationItem.leftBarButtonItem =  "Create button" ;
    self.navigationItem.titleView =  "Create custom title view";
} 
```

# delphi - ZeosDb：加密 SQLite

> ID：13560566
> 
> 赞同：0
> 
> 时间：2012-11-26T07:40:29.053
> 
> 标签：delphi, sqlite, zeos

我正在使用 ZeosDB 组件来访问 sqlite 数据库。它在未加密的数据库上运行良好。

在加密的数据库上，我收到：**文件是否加密或不是数据库**。即使我设置了密码。

我使用的 DLL 文件是否错误？我使用的[是官方页面](http://www.sqlite.org/)的最后一个dll。它默认不支持加密吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T08:33:17.250

SQLite3 上有[几种加密方案](https://stackoverflow.com/questions/5669905/sqlite-with-encryption-password-protection)。

其中，您有：

*   SQLite3作者的官方非免费加密库，名为[SQLite Encryption Extension (SEE)](http://www.hwaci.com/sw/sqlite/see.html)：只需付费使用dll，修改初始化设置数据库密钥；
*   开源[SQLCipher](http://sqlcipher.net/)；
*   [WXSQlite3](https://stackoverflow.com/questions/4971483/how-to-compile-wxsqlite3-and-sqlite-to-get-encryption-support)包装器；
*   [对于 Delphi，我们的 mORMot 中包含](http://synopse.info/forum/viewtopic.php?id=373)我们的开源静态链接版本（带有自定义加密） - 静态链接允许您不使用外部链接，`sqlite3.dll`因此有助于简化部署和支持 - 它具有轻松切换到 MS SQL、Oracle 的特点或 OleDB/ODBC 与从 Delphi 5 到 XE3 的相同源代码，并且[速度快](http://blog.synopse.info/post/2012/07/25/Synopse-mORMot-benchmark)；
*   请参阅上面的链接。

ZeosDB SQLite3 级别不处理它们。

SQlite3 API 驱动程序（单元 ZPlainSqLiteDriver）不包含密码。所以你将不得不改变它。或者切换到另一个支持加密 API 的包装器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T08:32:52.220

最近我遇到了同样的问题（使用 UniDac）。官方 DLL 不支持加密。有几个库包含加密，但它们不可互换。即用一个 SQLite DLL 加密的 DB 不能用另一个发行版解密。我认为你的情况是一样的。

我的解决方案是：

*   为 .NET下载了[...static bunde... 包 (x86, x64)](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki) - 这支持加密（我认为是 Windows DPAPI）
*   将 System.Data.SQLite.dll 重命名为 SQLite3.dll -> 此 DLL 是本机 DLL 并支持 enc/dec
*   在我的 DBMS 的文件夹中，我将 SQLite DLL 替换为上面提取的

这样，DBMS 使用新的 DLL 进行加密，您的程序可以使用相同版本的 DLL 对其进行解密。

你也可以看看：

*   [具有加密/密码保护的 SQLite](https://stackoverflow.com/questions/5669905/sqlite-with-encryption-password-protection)
*   [如何编译 wxsqlite3 和 sqlite 以获得加密支持](https://stackoverflow.com/questions/4971483/how-to-compile-wxsqlite3-and-sqlite-to-get-encryption-support)

笔记：

*   还要确保将 SQLite3.dll 复制到程序目录。许多其他产品使用 SQLite 并且位于 %PATH% 中，因此无法保证您的可执行文件会加载“正确的”SQLite3.dll。[可以在这里找到有趣的解决方案](https://stackoverflow.com/questions/13269169/how-to-use-a-dll-outside-of-the-system-path)；
*   查阅许可证以查看是否可以免费使用 .NET 版本，[因为](http://www.hwaci.com/sw/sqlite/see.html).

# jquery - TinyMCE：TypeError：K未定义

> ID：13560567
> 
> 赞同：1
> 
> 时间：2012-11-26T07:40:37.057
> 
> 标签：jquery, tinymce, nullreferenceexception, typeerror

我在现有插件中添加了一个按钮（该插件运行良好）。该按钮动态创建一个虚拟键盘`$('#vkb')`，让用户选择一些符号。我第一次在 tinyMCE 上执行该按钮时，它可以工作，我可以选择符号并将它们插入到 TinyMCE 编辑器中。

但是在第一个正常运行的实例中的某个时刻，我得到了错误`TypeError: K is undefined`。当前实例继续工作，尽管调用 ed.execCommand 不断出现`K undefined`错误。但在那之后，创建 TinyMCE 工具栏的所有其他实例，都会发生以下情况：

1.  `ed.execCommand('mceInsertContent', false, str);`插件代码中的命令不起作用，并且
2.  这个错误出现了：（`t is null`我认为`t`最有可能的地方`this`，即编辑器本身）。

以下是我的代码：

```
 // Registering the command
       ed.addCommand('mceArIndic', function() {
       _dovkb();

    function _dovkb()
    {  // some code for a virtual keybaord that lets users choose indic symbols
           // the final symbols are stored in a variable called 'ret'
           // I want ret's contents to be inserted in the tinymce editor

           // the code below is what happens when the closing key on the virtual keyboard is clicked:

    $('#vkbstop').live('click',function(e){
    var ret = $('#numoutput').val();
    $('#numoutput').val('');
    $('#vkb').remove();
    console.log("t.inserting");
            /* THIS IS WHERE K SOMETIMES BECOMES UNDEFINED, THEN ALL */ 
            /* DYNAMICALLY-CREATED TINMYCE INSTANCES THAT FOLLOW HAVE T AS NULL */
    ed.execCommand('mceInsertContent', false, ret); 
    toprint = '';
});

    // Register arindic button
    ed.addButton('arindic', {
        title : 'Type Arabic/Indic digits',
        cmd : 'mceArIndic',
        image : url + '/img/indic.png'
    }); 
```

在代码的末尾，插件已正确注册。

我想也许编辑器还没有完成加载，但事实并非如此，因为我也在等待很长时间后尝试过。为什么`ed.execCommand`有时会给出该`K is null`错误，以及为什么在此之后对命令的所有尝试都只是说`t is null`，虽然不是，因为其他按钮工作正常。

## 编辑

切换到 tiny_mce_dev.js 后，它给了我一个稍微不同的错误，而不是“K”，而不是“选择”： `TypeError: selection is null` 更多信息： `ieRng = selection.getRng();`-Editor.js 第 897 行

# ios - UITabBarController 不能在 iphone 5 模拟器上工作，我正在使用 xib，所以没有 mainwindow.xib

> ID：13560570
> 
> 赞同：0
> 
> 时间：2012-11-26T07:40:41.530
> 
> 标签：ios, ios6, uitabbarcontroller, iphone-5

我添加了代码来制作具有导航功能的标签栏应用程序。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization

        ChatVC *objChatVC = [[ChatVC alloc]init];
        UpdateMeContactVC *objUpdateMeContact = [[UpdateMeContactVC alloc]init];
        cardsVC *objCardsVC = [[cardsVC alloc]init];
        settingVC *objSettingVC = [[settingVC alloc]init];
        NotificationVC *objNotificationVC = [[NotificationVC alloc]init];

        self.objNavConChat = [[UINavigationController alloc]initWithRootViewController:objChatVC];
        self.objNavConContact = [[UINavigationController alloc]initWithRootViewController:objUpdateMeContact];
        self.objNavConCards = [[UINavigationController alloc]initWithRootViewController:objCardsVC];
        self.objNavConNotification = [[UINavigationController alloc]initWithRootViewController:objNotificationVC];
        self.objNavConSetting = [[UINavigationController alloc]initWithRootViewController:objSettingVC];
        self.objTabBarController = [[UITabBarController alloc]init];

        self.objNavConChat.title = @"Chat";
        self.objNavConContact.title = @"Contacts";
        self.objNavConCards.title = @"Cards";
        self.objNavConNotification.title = @"Notification";
        self.objNavConSetting.title = @"Setting";

        self.objNavConChat.tabBarItem.image = [UIImage imageNamed:@"online_chat.png"];
        self.objNavConCards.tabBarItem.image = [UIImage imageNamed:@"card.png"];
        self.objNavConContact.tabBarItem.image = [UIImage imageNamed:@"contact.png"];
        self.objNavConNotification.tabBarItem.image = [UIImage imageNamed:@"notification.png"];
        self.objNavConSetting.tabBarItem.image = [UIImage imageNamed:@"settings.png"];

        objTabBarController.viewControllers = [NSArray arrayWithObjects:objNavConChat,objNavConCards,objNavConContact,objNavConNotification,objNavConSetting, nil];
        objTabBarController.selectedIndex=2;
        [self.view addSubview:self.objTabBarController.view];

    }
    return self;
} 
```

在 updatemecontact 中，我使用的是滚动视图上的 tableview，我的 xib 是 3.5 英寸，但是当我运行程序时，tabbar 不起作用。我无法在 tabbar 上选择任何选项。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T08:04:45.020

转到 MainWindow.xib，选择 Window 对象并检查“启动时全屏”。

![在此处输入图像描述](../Images/cca78448999eb93a48c0abe607725285.png)

# javascript - JavaScript Internals 101：数组只是一种特殊类型的对象

> ID：13560575
> 
> 赞同：1
> 
> 时间：2012-11-26T07:41:06.023
> 
> 标签：javascript

在内部，JavaScript 只有对象（和原始类型）。对象是对的**无序**集合`key:value`，其中`key`是字符串，`value`可以是任何 JavaScript 类型。

数组虽然在外观上看起来像任何其他语言的普通数组，但实际上是对象的一种特殊情况，具有本机支持的语言语法。

每个数组都是一个对象，其中键是数字，值可以是任何类型。键由 JavaScript 本身管理，因此我们可以将数组作为**有序**的值集合进行操作。这就是我们也可以在`for-in`循环中使用数组的原因。此外，JavaScript 提供了标准的数组操作（长度、索引、拼接、切片、连接）作为使用编号键来完成它们的事情的方法。

```
>>> typeof []
"object"

>>> Object.prototype.toString.call([])
"[object Array]" 
```

我的理解是正确的，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:45:26.383

您错过的一件事是数字索引本身只是数组对象的命名属性，它们没有潜在的顺序。

可能值得记住的另一件事是可以修改 Array 构造函数，这将从那时起影响所有数组。

考虑以下：

```
var a = new Array(1,2,3,4,5);
a.slice(1); // returns [2,3,4,5]

//Now for some prototype modification
Array.prototype.slice = function(){alert("Foo");};

var b = new Array(1,2,3,4,5);
a.slice(1); // alerts "Foo"!

//The [] syntax is also affected
var c = [1,2,3,4,5];
c.slice(1); // alerts "Foo"! 
```

# php - xcache 只缓存管理文件

> ID：13560577
> 
> 赞同：2
> 
> 时间：2012-11-26T07:41:13.950
> 
> 标签：php, admin, xcache

我正在运行 xcache（显示为安装在 phpinfo 中）。

当我查看管理页面时，唯一显示为缓存的 php 文件与管理文件夹中的文件（或我正在查看的当前页面上的文件）一样。

![在此处输入图像描述](../Images/f368c89b6c1aaf031996a3e363316ce5.png)

有没有人有关于为什么文件可能没有缓存的建议？（注意：尝试从 src 安装 xcache 2 和 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-21T10:27:19.950

我认为您应该启用 SuPHP。我遇到了同样的问题，当我禁用 SuPhp 时，xcache 开始像它应该的那样缓存所有内容。

# c# - 保存表单桌面位置和大小

> ID：13560585
> 
> 赞同：0
> 
> 时间：2012-11-26T07:41:45.207
> 
> 标签：c#, winforms

我正在使用 winforms，并且我想在用户更改时保存表单的桌面位置和大小。我找到了一些有用的代码并将其放入表单关闭事件和表单加载事件中，以分别保存和加载大小和位置。

但是，当用户直接关闭 PC 而不先关闭程序时，不会保存更改的大小和位置。

因此，我在 size changed 和 location changed 事件中使用了相同的代码，但它不起作用，并且在程序重新启动时大小和位置没有改变。

```
private void frmScopeStatus_SizeChanged(object sender, EventArgs e)
{
    Application.UserAppDataRegistry.SetValue("WindowState", this.WindowState);
    Application.UserAppDataRegistry.SetValue("WindowSizeH", this.Size.Height);
    Application.UserAppDataRegistry.SetValue("WindowSizeW", this.Size.Width);
    Application.UserAppDataRegistry.SetValue("LocationX", this.DesktopLocation.X);
    Application.UserAppDataRegistry.SetValue("LocationY", this.DesktopLocation.Y);
}

 private void frmScopeStatus_LocationChanged(object sender, EventArgs e)
{
    Application.UserAppDataRegistry.SetValue("WindowState", this.WindowState);
    Application.UserAppDataRegistry.SetValue("WindowSizeH", this.Size.Height);
    Application.UserAppDataRegistry.SetValue("WindowSizeW", this.Size.Width);
    Application.UserAppDataRegistry.SetValue("LocationX", this.DesktopLocation.X);
    Application.UserAppDataRegistry.SetValue("LocationY", this.DesktopLocation.Y);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T08:01:10.010

您可以提供范围的应用程序设置数据绑定`User`来存储这些值。

*   在设计器中打开您的表单
*   转到表单属性`Data > (Application Settins)`组
*   `Location`为（和`ClientSize`）属性（范围用户）添加数据绑定
*   事件`FormClosing`保存更改的属性`Properties.Settings.Default.Save();`

这将为您的应用程序文件 (at `%SYSTEMDRIVE%/Users/{username}/AppData/Local/CompanyName/AppName`) 的每个用户创建用户设置，这些用户设置将在应用程序启动时应用：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <userSettings>
        <AppName.Properties.Settings>
            <setting name="FormLocation" serializeAs="String">
                <value>345, 234</value>
            </setting>
            <setting name="FormSize" serializeAs="String">
                <value>458, 555</value>
            </setting>
        </AppName.Properties.Settings>
    </userSettings>
</configuration> 
```

*顺便说一句*，我认为`FormClosed`事件更适合保存应用程序设置。

# java - Lucene 在索引和搜索时是否需要相同的 Analyzer 实例？

> ID：13560588
> 
> 赞同：0
> 
> 时间：2012-11-26T07:42:03.077
> 
> 标签：java, android, lucene, indexing, analyzer

我正在使用 Lucene 在 Android 中创建一个字典应用程序。我是否需要`StandardAnalyzer`在索引和搜索时提供相同的实例，或者我可以只为两者提供一个新实例？

例如，当我要创建索引时，我会这样做：

```
Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_36);
IndexWriter writer = new IndexWriter(directory,
                    new IndexWriterConfig(Version.LUCENE_36, analyzer)); 
```

然后，当在顶级文档中获得搜索词的最佳片段时，我会这样做：

```
TokenStream ts = TokenSources.getAnyTokenStream(indexSearcher.getIndexReader(),
                    hits[i].doc, "definition", analyzer); 
```

或者我可以只替换 with 的所有用法`analyzer`吗`new StandardAnalyzer(Version.LUCENE_36)`？我问这个是因为我的索引和搜索任务在不同的类中，我想保持最少数量的对象，我在实例之间传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:18:06.810

您绝对可以使用同一分析器/标记器的不同实例。

唯一的要求是确保它们在搜索和索引期间的行为*完全相同*（例如，应该使用相同的对象构造函数，具有相同级别的数据访问等）。

# java - 我怎么知道哪个类来自接口

> ID：13560589
> 
> 赞同：0
> 
> 时间：2012-11-26T07:42:04.160
> 
> 标签：java, eclipse

我使用 eclipse 并且当我编写这段代码时

```
for (Property property : properties)
{                                           
property.getType(); 
```

并使用`CTRL+1`我得到这个有效的建议

```
IPropertyTypeU type = property.getType(); 
```

但是我想使用特定的演员表

```
SimpleType simpletype = ((SimpleTypeU) property).getSimpleType(); 
```

我在使用 where used 选项 (CTRL+SHIFT+G) 时发现了这个选项

1.  有更方便的方法吗？
2.  有一种简单的方法可以查看谁是从特定接口扩展的，例如，如果我单击 IPropertyTypeU 我会看到他扩展的所有类/接口，但是我怎么能很容易地知道 SimpleType 扩展了 IPropertyTypeU ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:45:17.800

在编辑器中选择“IPropertyTypeU”类的字符，然后按 F4。

您将能够看到 4 种不同类型的继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:54:42.673

虽然 F4 为您提供了有关类、变量和方法的超类成员的详细信息，但 ctrl+T 应该让您快速了解类型的层次结构。但是，在这个层次结构中，您只能看到类（抽象和非抽象超类），而看不到接口。

# android - 如何阻止其他应用程序访问我的帐户密码（帐户和同步）？

> ID：13560591
> 
> 赞同：0
> 
> 时间：2012-11-26T07:42:11.300
> 
> 标签：android

```
Textview t1=(Textview) findViewById(R.id.tv);
AccountManager acM=AccountManager.get(this);
    Account[] accs=acM.getAccounts();
    for (Account account : accs) 
        {
             t1.setText(t1.getText() + "\n\n\n" + "Name :" + account.name + "\n"+ "Type :" 
             + account.type + "\nPassword :" + acM.getPassword(account);
        } 
```

我正在从测试应用程序访问密码。我不想让其他应用程序访问我的帐户密码。示例我无法访问 facebook 帐户密码或 twitter 密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:55:34.643

只有与帐户提供者具有相同 UID 的应用程序才能访问密码。这通常意味着在同一个应用程序和进程中运行（除非您使用`sharedUid`）：

> 此方法要求调用者持有权限 AUTHENTICATE_ACCOUNTS 并具有与帐户的身份验证器相同的 UID。

有关详细信息，请参阅参考：http: [//developer.android.com/reference/android/accounts/AccountManager.html#getPassword](http://developer.android.com/reference/android/accounts/AccountManager.html#getPassword(android.accounts.Account) (android.accounts.Account )

# facebook - 阅读转发的消息

> ID：13560592
> 
> 赞同：0
> 
> 时间：2012-11-26T07:42:29.973
> 
> 标签：facebook, facebook-fql

有没有办法获取已在某个线程中转发的 ID（或直接消息）列表？我一直在尝试访问`attachment`FQL 表中的列，但它不包含任何内容。一段时间以来，我一直在尝试寻找某种答案，但没有找到任何对我有帮助的东西。我目前正在使用这个 FQL 查询：

```
SELECT attachment,message_id,author_id,body,created_time FROM message WHERE thread_id = ID 
```

有没有办法从`message`表中获取转发的消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:37:40.003

不，实际（和旧）`message`表不会让您访问转发信息。事实上，转发系统看起来很新。

[但是，当新的Unified_message](https://developers.facebook.com/docs/reference/fql/unified_message)表可用时，您很快就能使用它。我猜这些`unified_`表还没有完全部署。但是您已经可以将它们用作开发和测试目的。

> 请注意：我们正在为所有用户提供新的消息系统，此时此表将替换现有的消息表。仅在新的消息传递系统广泛可用之前，我们才为注册的开发者帐户提供对该 API 的早期访问。您应该在当前时间将消息表用于生产应用程序。

# javascript - javascript中0-255和点的IP地址验证

> ID：13560601
> 
> 赞同：-10
> 
> 时间：2012-11-26T07:43:01.253
> 
> 标签：javascript, regex, ip

> **可能重复：**
> [验证 IP 地址不是 0.0.0.0 或多播地址](https://stackoverflow.com/questions/1503893/validate-ip-address-is-not-0-0-0-0-or-multicast-address)
> [javascript 正则表达式来检查 IP 地址](https://stackoverflow.com/questions/4460586/javascript-regular-expression-to-check-for-ip-addresses)

我需要执行应该接受 0-255 数字范围和点的 IP 地址验证。

我正在尝试使用此代码：

```
<script type='text/javascript'>
   function checkValid(eleValue) {

      if(!eleValue.match(/^[0-9]+\.?[0-9]*$/))
      {
         alert('Please enter Only Number or Dot');
      } 
   }
</script>

<input type="text" onkeyup='javascript:checkValid(this.value);' /> 
```

但它不适合我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:47:11.870

您可以使用以下正则表达式

```
/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i 
```

例如

```
/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i.test('111.170.0.1') === true 
```

# nsis - 接受许可协议后将按钮的文本从下一步更改为安装？

> ID：13560602
> 
> 赞同：3
> 
> 时间：2012-11-26T07:43:19.297
> 
> 标签：nsis

一旦用户接受许可协议，我想将按钮文本从下一步更改为安装。单击接受许可协议的单选按钮应将按钮的文本从下一步更改为安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T10:14:07.307

没有允许您根据许可页面上的事件更改文本的挂钩，但您可以在首次进入页面时更改文本：

```
Page license "" licshow
LicenseForceSelection radiobuttons

Function licshow
GetDlgItem $0 $HWNDPARENT 1
SendMessage $0 ${WM_SETTEXT} 0 "STR:$(^InstallBtn)"
FunctionEnd 
```

或者你可以使用`LicenseText "" "$(^InstallBtn)"`

如果出于某种原因您觉得**必须**这样做，您可以尝试[按钮事件插件](http://nsis.sourceforge.net/ButtonEvent_plug-in)...

# image - Nivo 7 JQuery Slider 在第一张图像后压缩约 15%

> ID：13560606
> 
> 赞同：1
> 
> 时间：2012-11-26T07:43:53.507
> 
> 标签：image, slider, nivo-slider

对于我在使用 Nivo 7 JQuery 图像滑块时遇到的问题，我真的很感激。

- 我的网站是响应式的，我有单独的手机和桌面样式表 - 滑块在手机版本上运行良好，问题出现在我网站的桌面版本 **问题：* *在第一张图片之后，滑块压缩了大约 15%，并且在所有其他图像中保持这种方式，即使它再次击中第一张图像。这些图像都是相同的尺寸（我已经检查了很多次）。这不是尺寸问题，滑块只是在出现的第一张图像之后覆盖了底部 15% 的图像。我已按照 nivo 7 网站上的指示复制了所有代码并附上了相关的样式表。

我不明白的是，它在我网站的手机版本中完美运行，但在桌面上却不行。手机和台式机之间的唯一区别是布局。在桌面上，我在滑块周围放置了一个 div 包装器，以将宽度限制为 59%，将高度限制为自动。#home1 部分​​仅声明宽度为 100%。下面是代码：

```
<div id="homeWrapper">
   <section id="home1">
    <div class="slider-wrapper theme-light">
<div id="slider" class="nivoSlider">
    <img src="pictures/home/MindBodySoulCafe.jpg" width="470" height="303" alt="Mind, Body, Soul     project Cafe perspective"> 
    <img src="pictures/home/MindBodySoulCAD.jpg" width="470" height="303" alt="floor plan     of       Mind, Body &amp; Soul"> 
    <img src="pictures/home/barkmaterials.jpg" width="470" height="303" alt="Materials used for Bark Media Project">
    <img src="pictures/home/modelstairs.jpg" width="470" height="303" alt="Construction model  for staircase">
    </div>
</div>
<script type="text/javascript">
$(window).load(function() {
$('#slider').nivoSlider({
    effect: 'slideInLeft',
    pauseTime: 4000,
    pauseOnHover: true,
    startSlide: 0,
});
});
</script>
  </section>
  </div> 
```

不幸的是，我目前无法访问 css 文件。

# jquery - 使用 JQuery 中的锚链接到当前页面和其他页面的特定（隐藏）选项卡？

> ID：13560607
> 
> 赞同：3
> 
> 时间：2012-11-26T07:43:54.360
> 
> 标签：jquery, hyperlink, tabs, hidden, visible

我已经在这个网站上检查了多个答案，但无论出于何种原因，他们都无法解决我的问题（[如何使用 JQuery 中的锚标记从其他页面中选择特定选项卡..？](https://stackoverflow.com/questions/8250426/how-to-select-a-particular-tab-from-other-page-using-anchor-tag-in-jquery)）。我只是在我的本地计算机上测试这个，所以我不确定这是否会产生影响。

我想从当前页面以及其他页面链接到每个选项卡。现在我可以单击每个选项卡，它可以完美运行，并且站点 URL 会更改（#tab1、#tab2 等）。

但是，例如，如果我在选项卡 2 可见时单击选项卡 1 链接（不是实际的选项卡，而是页面上针对选项卡 1 的链接），则什么都不会发生，但 URL 会更改为 /site.html#tab1 . 但是，如果我在选项卡 1 可见时单击选项卡 1 链接，它会成功将我带到选项卡 1。出现问题，因为选项卡是隐藏的 - 链接仅适用于当前可见的选项卡。我想如果我至少可以让它在页面内工作，我也可以从页面外的链接让它工作。

基本上，我希望能够向某人发送一个链接`/site.html#tab3`并将其转到该选项卡。

我的代码：

```
 $(document).ready(function() {

      //Default Action
    $(".tab_content").hide(); //Hide all content
    $("ul.tabs li:first").addClass("active").show(); //Activate first tab
    $(".tab_content:first").show(); //Show first tab content

    //On Click Event
    $("ul.tabs li").click(function() {
        $("ul.tabs li").removeClass("active"); //Remove any "active" class
        $(this).addClass("active"); //Add "active" class to selected tab
        $(".tab_content").hide(); //Hide all tab content
        var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
        $(activeTab).fadeIn(); //Fade in the active content
        return;
    });
}); 
```

和：

```
$(document).ready(function () {

    var tabId = window.location.hash; // will look something like "#h-02"
    $(tabId).click(); // after you've bound your click listener
}); 
```

和标签：

```
 <ul class="tabs">
        <li><a href="#tab1">Ex 1</a></li>
        <li><a href="#tab2">Ex 2</a></li>
        <li><a href="#tab3">Ex 3</a></li>
        <li><a href="#tab4">Ex 4</a></li> 
```

以及一个示例选项卡内容和页面上指向该选项卡的链接：

```
//tab content
<div class="tab_container">
        <div id="tab1" class="tab_content">
          <h2>Ex 1</h2>

//Link to Tab 1 from right menu
<ul><li>
<a href="#tab1">Click here to go to tab 1</a></li></ul> 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:02:08.840

向您的选项卡链接添加一个通用类。当您单击链接时，您可以触发对相应选项卡的单击。

HTML

```
<a href="#tab1" class="tab-link">Click here to go to tab 1</a> 
```

JS

```
$('.tab-link').click(function(){
    $('ul.tabs li a[href="'+this.href+'"]').parent().click();

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:26:09.130

看到这个：

在页面加载时执行此操作（当 dom 准备好时）

```
var tabId = location.hash; // will look something like "#h-02" 
```

检查哈希

```
 if(tabId){
   $(tabId).show(); // this will fired only when url get hash
   $(tabId).siblings().hide(); // this will show only targeted tab 
                               // others get hidden
 } 
```

当你得到这样的 url 时会发生什么`site.html#tab1`

`variable tabId`会有价值`#tab1`

然后条件如果代码块将显示目标选项卡

# python - Python 查询 - Web 应用程序等

> ID：13560613
> 
> 赞同：1
> 
> 时间：2012-11-26T07:44:34.343
> 
> 标签：python, database, google-app-engine

```
def get_songs(requested_username):
   songs = db.GqlQuery("SELECT * FROM Song ORDER BY created DESC") 
```

Song db.Model 实体有一个用户名属性。

如果一首歌的用户名属性等于请求的用户名，我如何从一个特定的用户名中找到所有歌曲？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:08:04.160

你可以通过两种方式做到这一点：

GQL

```
def get_songs(requested_username):
    songs = db.GqlQuery('SELECT * FROM Song WHERE username=:1 ORDER BY created DESC', requested_username)
    return songs 
```

查询实例：

```
def get_songs(requested_username):
    songs = Song.all()
    songs.filter('username =', requested_username).order('-created')
    return songs 
```

在这两种情况下，`songs`都将包含查询的结果，您可以对其进行迭代并根据需要访问其中的对象。

```
songs = get_songs(requested_username)
for song in songs:
  # Do stuff here... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:07:39.157

就像是

```
SELECT * FROM Song where username="Batman" ORDER BY created DESC 
```

在这种情况下你可能不想使用蝙蝠侠

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T08:09:45.703

建议您查看文档-> [https://developers.google.com/appengine/docs/python/datastore/queries#Filters](https://developers.google.com/appengine/docs/python/datastore/queries#Filters)

但要回答你的问题，是这样的：

```
def get_songs(requested_username, limit=10):
   query = db.GqlQuery("SELECT * FROM Song WHERE username = :1 ORDER BY created DESC", requested_username)
   songs = query.fetch(limit)
   return songs 
```

# java - 如何使用java正则表达式从某物中获取“某物”

> ID：13560614
> 
> 赞同：0
> 
> 时间：2012-11-26T07:44:39.230
> 
> 标签：java, html, regex

在下面，我需要得到：

```
String regex = "Item#: <em>.*</em>";
String content = "xxx Item#: <em>something</em> yyy";

Pattern pattern = Pattern.compile(regex);
Matcher matcher = pattern.matcher(content); 

if( matcher.find() ) {
    System.out.println(matcher.group());
} 
```

它将打印：

```
Item#: <em>something</em> 
```

但我只需要“某物”的价值。

我知道我可以使用 .substring(begin,end) 来获取值，但是还有另一种更优雅的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:47:24.660

它会打印整个字符串，因为您已经打印了它。`matcher.group()`打印完整的匹配。要获取匹配字符串的特定部分，您需要更改正则表达式以捕获组中标签之间的内容：-

```
String regex = "Item#: <em>(.*?)</em>"; 
```

此外，使用`Reluctant`量词匹配遇到`(.*?)`an 之前的最少字符数。`</em>`

然后在 if 中，打印`group(1)`而不是`group()`

```
if( matcher.find() ) {
    System.out.println(matcher.group(1));
} 
```

无论如何，你不应该使用`Regex`parse `HTML`。正则表达式不足以完成这项任务。您可能应该使用一些`HTML`解析器，例如 - `HTML Cleaner`。另请参阅 OP 中的评论之一中提供的链接。那篇文章很好地解释了您可能面临的问题。

# windows-phone-7 - Windows Phone - 墓碑

> ID：13560615
> 
> 赞同：2
> 
> 时间：2012-11-26T07:44:46.400
> 
> 标签：windows-phone-7, user-interface, tombstoning

> **可能重复：**
> [WP7：是否可以在创建/存储日志缩略图之前拦截 backstack](https://stackoverflow.com/questions/11565798/wp7-is-it-possible-to-intercept-the-backstack-before-the-journal-thumbnail-is-c)

我有一个包含个人数据的应用程序，当应用程序发送到后台时，该应用程序不应显示在 WP8 的任务查看器中。

我的想法是在`Application_Deactivated`事件中引发一个黑页，但 UI 似乎只在应用程序再次重新激活时更新，在任务查看器中仍然是旧 UI。

您对此问题有任何想法/解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:58:29.483

这是不可能的。在为快速应用切换 UI 获取应用程序“屏幕截图”之前，没有可以“挂钩”的生命周期事件。您将不得不重新考虑您的应用程序。

但是，+1 表示实际上想出了一个合理的方案来实现这一目标

# google-maps - 在法国没有获得 Place API 的结果

> ID：13560617
> 
> 赞同：0
> 
> 时间：2012-11-26T07:45:03.920
> 
> 标签：google-maps, google-places-api

我正在使用 place API 来搜索医院、医生。类型=药房&关键字=药房

[https://maps.googleapis.com/maps/api/place/search/json?location=50.468869,2.909696&radius=50000.0&types=pharmacy&keyword=pharmacy&language=&sensor=false&key=value](https://maps.googleapis.com/maps/api/place/search/json?location=50.468869,2.909696&radius=50000.0&types=pharmacy&keyword=pharmacy&language=&sensor=false&key=value)

但在法国没有得到结果？我们可以在搜索 API 中改进什么以获得准确的结果吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:28:01.333

类别关键字和搜索词之间的 API 行为很奇怪。正如您在此处看到的，如果您在法国搜索“pharmacy”，则不会得到与搜索“pharmacie”相同的结果：

*   [https://maps.google.fr/maps?q=pharmacy&sugexp=chrome,mod%3D6&um=1&ie=UTF-8&hl=fr&sa=N&tab=wl](https://maps.google.fr/maps?q=pharmacy&sugexp=chrome,mod%3D6&um=1&ie=UTF-8&hl=fr&sa=N&tab=wl)
*   [https://maps.google.fr/maps?q=pharmacie&sugexp=chrome,mod%3D6&um=1&ie=UTF-8&hl=fr&sa=N&tab=wl](https://maps.google.fr/maps?q=pharmacie&sugexp=chrome,mod%3D6&um=1&ie=UTF-8&hl=fr&sa=N&tab=wl)

请注意，对于第一个，您可以在左侧结果列表中看到“类别：药房”。而不是为了其他请求。

# image - 图像匹配算法：使用 SIFT 或 SURF 从两个图像中获取相同对象的大小？

> ID：13560618
> 
> 赞同：0
> 
> 时间：2012-11-26T07:45:05.647
> 
> 标签：image, algorithm, image-processing, sift, surf

我正在做一个图像匹配项目。首先我们使用 SURF 来找出一对匹配的图片。两幅图像上都会出现至少一个对象。**现在我需要找出，对于同一个物体，它在两张图片上的尺寸是多少？相对大小就足够了。**

SIFT 和 SURF 都只是局部特征点描述符。我会得到一堆描述符和相关的特征点位置，但是如何使用这些信息来确定对象的大小？我正在考虑使用轮廓：如果我可以正确关联两个图像中的轮廓，那么我可以通过计算轮廓点位置轻松找出对象大小。但是如何关联轮廓呢？

我认为必须有某种方法可以应用 SIFT 或 SURF 来获取对象信息，因为人们可以使用 SIFT 进行对象跟踪……但经过长时间的搜索，我仍然无法获得任何有用的信息……

任何帮助，将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:22:34.863

SIFT/SURF 检测器给每个特征一个规范的尺度。通过简单地比较每个图像中匹配特征的比例，您应该能够确定它们的相对大小。

您应该已经在比较潜在匹配的规模，以便在存在转换不一致时丢弃虚假匹配。

# mysql - MySQL 错误 1064 (v 5.0.96) GROUP BY 子句

> ID：13560620
> 
> 赞同：3
> 
> 时间：2012-11-26T07:45:18.413
> 
> 标签：mysql

我习惯于在 Oracle 数据库上运行，所以我不太确定如何解决这个问题。我已将我的查询的一个简单示例缩小到以下内容：

```
 SELECT 0 as gm_rowID, 
'-ALL Grantmakers-' as grantmakerName 
FROM dual
GROUP BY 2 
```

phpMyAdmin 运行 SQL 时出现以下错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ORDER BY 2 LIMIT 0, 30' at line 1 
```

Oracle 可以很好地运行这个查询。MySQL 可以在没有`GROUP BY`子句的情况下运行查询。有任何想法吗？

--这是整个查询：

```
SELECT 
    p.grantmaker_rowid as gm_rowID, 
    gm.grantmaker_companyName as grantmakerName 
FROM grantmaker_info gm, proposal_submission p 
WHERE 0=0 
AND p.grantmaker_rowid = gm.grantmaker_rowid 
UNION 
SELECT 
    0 as gm_rowID, 
    '-ALL Grantmakers-' as grantmakerName
FROM dual 
ORDER BY 2
GROUP BY 2
LIMIT 0 , 30 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:49:51.827

> 可以使用列名、列别名或列位置在 ORDER BY 和 GROUP BY 子句中引用为输出选择的列。列位置是整数，以 1 开头

来自：[http ://dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

除非您在该表中只有 1 列，否则它应该可以正常运行。但是，我的建议是引用您要尝试的任何内容的列名（或别名）`GROUP BY`。

编辑：我唯一的其他建议是包含该`SHOW CREATE TABLE`表的输出。

编辑2：好的，我看到你已经更新了你的问题。为什么不代替`ORDER BY 2`, you `ORDER BY grantmakerName`（如果那是您要订购的列？）

# c++ - 未解析的外部符号 (LNK2019)

> ID：13560625
> 
> 赞同：0
> 
> 时间：2012-11-26T07:45:47.163
> 
> 标签：c++, visual-studio-2008, linker

我有以下文件：
interface.h

```
class Interface
{
  ...
};

Interface* CreateInterface(); 
```

实现.h

```
#include "interface.h"

class Impl: public Interface
{
  ...
}; 
```

实现.cpp

```
#include "impl.h"

SomeInterface* CreateInterface()
{
  return new Impl;
}
... 
```

主文件

```
#include "Interface.h"
int main()
{
  CreateInterface();
} 
```

最初我的项目看起来像[这样](https://stackoverflow.com/q/2481138/279982)。但是出于测试目的，所有文件现在都在同一个项目中。
编译时出现 LNK2019 错误，提示 CreateInterface 未解决。我正在使用 VS 2008 我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:20:39.907

您是否打算有多个`CreateInterface()`声明？

**接口.h**

```
Interface* CreateInterface(); 
```

**实现.cpp**

```
SomeInterface* CreateInterface() 
```

其中只有一个（后者）似乎实际实施。您的名称有歧义，并且编译器似乎选择了错误的名称（很可能是因为它甚至不知道另一个名称是否存在）。

`CreateInterface()`在 impl.cpp 中定义与 Interface.h 中的原型*相同*的参数列表和返回类型。我通常不会容忍这种野兽般的设计，但看起来这就是你想要的。

**实现.cpp**

```
Interface* CreateInterface() // note the return type
{
    return new Impl;
} 
```

老实说，我简直不敢相信这甚至可以编译，考虑到您只是两者之间的区别（Interface.h 中的声明和 Impl.cpp 中的实现）是返回类型的差异，编译器应该对此感到厌烦，所以您可能还没有向我们展示某些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:48:44.467

链接器告诉您它知道`CreateInterface`存在并且是一个函数，但它无法找到实际的函数本身。所以我怀疑你没有在你的项目中包含 impl.cpp ，并且它没有被编译。

# html - 如何正确对齐多个标签文本框对（有和没有浮动）？

> ID：13560627
> 
> 赞同：0
> 
> 时间：2012-11-26T07:46:06.300
> 
> 标签：html, css

我写了以下内容：

```
<ul>
    <li>
        <span class="filter">
            <label>Name: </label><input type="text"/>
        </span>
    </li>
    <li>
        <span class="filter">
            <label>Id: </label><input type="text"/>
        </span>
    </li>
</ul>​ 
```

CSS为：

```
span.filter{
    width: 50px;
}
input{
    text-align: right;
}
label{
    text-align: left;
}
ul{
    list-style: none;
}​ 
```

但结果如[this](http://jsfiddle.net/krL7z/1/) fiddle所示。有些人建议使用浮点数，但为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T08:13:32.580

没有必要使用`float`. 有很多方法可以让它工作：

例如。

```
label{
    display: inline-block;
    width: 200px;
    text-align: left;
} 
```

[http://jsfiddle.net/krL7z/7/](http://jsfiddle.net/krL7z/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:02:18.910

如果您想使用浮动来实现此效果，请将标签的 display 属性设置为 block，声明它们的宽度，并将它们向左浮动。然后将您的输入向左浮动，我们 clear:left 在标签元素上，这样它们就不会全部在一行上结束。

所以：

```
label{
display:block;
width:50px; /*arbitrarily determined */
float:left;
clear:left;
} 

input{
float:left; 
} 
```

在这个[小提琴](http://jsfiddle.net/krL7z/6/)中查看结果。

您也可以使用 display:inline-block （因此代码更少）来执行此操作，如 xiaoyi 的回答中所示。

另一种方法是使用表格单元格，（虽然有些人认为它们在语义上适合表单）不是您通常想要依赖的布局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T08:13:52.903

如果您知道可以限制您支持的浏览器（浏览器高于 IE7）和所有其他 Firefox、Chrome、Opera、Safari ......那么您可以使用 display:table 和 display:table -cell 以表格方式布局单元格 - 没有实际的表格标记。

```
span.filter 
{    
    display:table;
}
span.filter label, span.filter input
{    
    display:table-cell;
} 
```

# c++ - 在 C++ 中的多维数组中生成唯一的随机数

> ID：13560628
> 
> 赞同：-3
> 
> 时间：2012-11-26T07:46:07.863
> 
> 标签：c++, c

我正在尝试创建一个 3x5 二维数组，其中包含随机顺序的值 1-15，以便每个数字仅使用一次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T07:50:10.847

生成包含数字 1-15 的向量或数组，然后使用[`std::random_shuffle`](http://en.cppreference.com/w/cpp/algorithm/random_shuffle)，将结果放入数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:51:45.570

我建议使用[boost random](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_random.html)并使用[统一的 int](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_random/reference.html#boost_random.reference.distributions)或统一的小 int 分布

# c# - 使用 C# 从十六进制转换为二进制而不丢失前导 0

> ID：13560630
> 
> 赞同：1
> 
> 时间：2012-11-26T07:46:18.253
> 
> 标签：c#, asp.net, .net, hex

我想将十六进制转换为等效的二进制。我试过的代码如下：

```
string hex_addr = "0001A000";
string bin_value = Convert.ToString(Convert.ToInt32(hex_addr, 16), 2); 
```

这将截断前导零。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T07:51:44.937

尝试关注（来自[SO 链接](https://stackoverflow.com/a/6617626/649524)）

```
private static readonly Dictionary<char, string> hexCharacterToBinary = new Dictionary<char, string> {
    { '0', "0000" },
    { '1', "0001" },
    { '2', "0010" },
    { '3', "0011" },
    { '4', "0100" },
    { '5', "0101" },
    { '6', "0110" },
    { '7', "0111" },
    { '8', "1000" },
    { '9', "1001" },
    { 'a', "1010" },
    { 'b', "1011" },
    { 'c', "1100" },
    { 'd', "1101" },
    { 'e', "1110" },
    { 'f', "1111" }
};

public string HexStringToBinary(string hex) {
    StringBuilder result = new StringBuilder();
    foreach (char c in hex) {
        // This will crash for non-hex characters. You might want to handle that differently.
        result.Append(hexCharacterToBinary[char.ToLower(c)]);
    }
    return result.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T16:09:13.787

您可能需要按照此[链接中的建议使用 PadLeft](https://stackoverflow.com/questions/7682628/how-to-pad-a-binary-string-with-zeros)

```
bin_value.PadLeft(32, '0') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T15:23:09.640

只需使用 PadLeft( , )：

```
string strTemp = System.Convert.ToString(buf, 2).PadLeft(8, '0'); 
```

这里 buf 是你的字符串 hex_addr，strTemp 是结果。8 是您可以更改为所需长度的二进制字符串的长度。

# android - ActionBarSherlock 使用 - 个人或商业产品

> ID：13560633
> 
> 赞同：0
> 
> 时间：2012-11-26T07:46:57.347
> 
> 标签：android

actionbarsherlock 可以用于 amy 的商业制作吗？有人可以帮我通过 ActionBarSherlock 的许可证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:52:47.973

**它是 Apache 许可证。**

这意味着你必须在你的应用程序中提到你使用了这个库。

不要删除代码文件中存在的许可标头。

然后你就可以使用它了。

> 版权所有 2012 杰克·沃顿
> 
> 根据 Apache 许可证 2.0 版（“许可证”）获得许可；除非遵守许可，否则您不得使用此文件。您可以在以下网址获取许可证的副本
> 
> [http://www.apache.org/licenses/LICENSE-2.0](http://www.apache.org/licenses/LICENSE-2.0)
> 
> 除非适用法律要求或书面同意，否则根据许可分发的软件将按“原样”分发，没有任何明示或暗示的保证或条件。有关许可下的特定语言管理权限和限制，请参阅许可。

# android - 超出对话框边框的对话框上的按钮

> ID：13560638
> 
> 赞同：0
> 
> 时间：2012-11-26T07:47:05.377
> 
> 标签：android, button, dialog

有没有办法用一个看起来超出对话框边框的按钮来绘制对话框。例如，一个关闭按钮 (X)，一半在对话框上，一半在对话框外。我试图保持对话框上的一个区域透明以创建效果，但对话框仍显示其边界线。有什么好的方法吗？

谢谢，西蒙

# ios - 需要有关将下载图像显示为图库的帮助

> ID：13560646
> 
> 赞同：0
> 
> 时间：2012-11-26T07:47:54.513
> 
> 标签：ios

在我的应用程序中，我从 url 下载图像并保存到应用程序文档目录中。现在我想将这些下载的图像显示为图像库。对于图片库，我正在使用[fGallery](https://github.com/gdavis/FGallery-iPhone)，我能够对其进行配置并成功将其推送到导航控制器上，并且 fGallery 视图也可见但它没有显示我的图像，我为 fGalley 提供了这样的图像数组

**头文件**

```
@interface myController <FGalleryViewControllerDelegate> 

@property (strong, nonatomic) FGalleryViewController *localGallery;
@property (strong, nonatomic) NSMutableArray *localImages; 
```

**类文件**

```
 //These are delegate methods of FGalleryViewControllerDelegate
    - (NSString*)photoGallery:(FGalleryViewController*)gallery filePathForPhotoSize:(FGalleryPhotoSize)size atIndex:(NSUInteger)index
    {
        return [localImages objectAtIndex:index];
    }

    - (NSString*)photoGallery:(FGalleryViewController *)gallery urlForPhotoSize:(FGalleryPhotoSize)size atIndex:(NSUInteger)index
    {
        return [localImages objectAtIndex:index];
    }

    - (int)numberOfPhotosForPhotoGallery:(FGalleryViewController *)gallery
    {
        int num;

        num = [localImages count];

        return num;
    }

    - (FGalleryPhotoSourceType)photoGallery:(FGalleryViewController *)gallery sourceTypeForPhotoAtIndex:(NSUInteger)index
    {    
         return FGalleryPhotoSourceTypeLocal;
    }
    //Delegate method ends here

// My method to show gallery with my images
-(void)ShowGallery
{
    localImages = [[NSMutableArray alloc]init];    

     NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [paths objectAtIndex:0];
NSString *dataPath = [documentsDir stringByAppendingPathComponent:chatWithUser;
NSString *msgsColumn;

    //database query to fetch all images name and then
    while([results next])
    {
        msgsColumn = [results stringForColumn:@"msgs"];
        if([[[msgsColumn componentsSeparatedByString:@"."]objectAtIndex:1]isEqualToString:@"jpg"])
        {
            [localImages addObject:[dataPath stringByAppendingPathComponent:msgsColumn]];
        }
    }

    [database close];

    localGallery = [[FGalleryViewController alloc]initWithPhotoSource:self];

    [self.navigationController pushViewController:localGallery animated:YES];     
} 
```

对于图像路径，我使用**了 stringByAppendingPathComponent**但我也尝试**了 stringByAppendingString**来指导图像驻留在文档目录中，但没有任何效果。

请帮助我找出问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:26:21.910

我找到了解决方案，就在这里

[https://github.com/gdavis/FGallery-iPhone/issues/15](https://github.com/gdavis/FGallery-iPhone/issues/15)

# ios - 将 1.6.0 Cordova 插件添加到 2.2.0 Cordova 项目

> ID：13560647
> 
> 赞同：1
> 
> 时间：2012-11-26T07:47:59.173
> 
> 标签：ios, cordova, phonegap-plugins

如何将在 1.6.0 上制作的 cordova 插件添加到适用于 iOS 的 2.2.0 cordova 项目？

把1.6.0的项目升级到1.7.0，然后1.8.0等等（感觉不对）？

或者如何解决使用“(CDInvokedURL *)command”作为参数而不是 (NSDictionary *)options 的新 Cordova(2.2.0) 上的当前回调签名？

更具体地说，我正在尝试将适用于 iOS 的日历插件添加到 Cordova 2.2.0 项目中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:02:33.580

好吧，我将插件添加到了 Cordova 2.0.0rc1 项目中。它奏效了。从那里，我升级到 2.1.0，然后升级到 2.2.0。

诀窍是让它在 2.0.0 中工作。我必须弄清楚如何创建我的 javascript 和 index.html 文件以及如何调用我的 Obj-C 本机函数，因为我是 PhoneGap 的新手。并且`(NSMutableArray *)arguments (NSMutableDictionary *)options`（根据 Cordova 文档，这似乎已被弃用）在升级时仍然可以顺利地在更高版本（即 2.1.0 和 2.2.0）上运行（我想在它完全被弃用之前，它会起作用）。

**编辑**：

目前没有答案的另一个大问题是[这个](https://github.com/davejohnson/phonegap-plugin-facebook-connect/issues/221)，在最新的 Cordova 版本中，可能来自 2.0.0（如果我错了，请纠正我）

这是需要实现的函数的签名 ->

`- (void)echo:(CDVInvokedUrlCommand*)command`

这是有问题的代码->

`[self.commandDelegate sendPluginResult:pluginResult callbackId:command.callbackId];`

我`callbackId`在类中找到了该属性`CDVInvokedURLCommand`。我不知道它在抱怨什么。

# html - 其文本可以动态更改的 html 元素也是一个 onclick 动作以指向一个函数 NOT 按钮

> ID：13560651
> 
> 赞同：0
> 
> 时间：2012-11-26T07:48:27.083
> 
> 标签：html

目前我正在使用一个按钮，它的“值”我可以改变，这样写在按钮上的文本就会改变，但我看到文本在按钮内部居中并且不够大。我可以得到类似 +,- 我们在 Windows 资源管理器中看到的东西，它可以在树视图中折叠和展开文件夹。我不想使用任何外部文件（img 等），因为我正在创建一个自给自足的网页。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:55:45.333

您可以使用此代码显示 + 号

----首先把这段代码放在你的html的头部。

```
 <script type="text/javascript">
    function function_Name()
     { 
        alert('hi');
      }
   </script> 
```

然后从下面的这个链接调用上面的函数，onclick事件在这里调用上面声明的函数：

```
 <a href="javascript:void(0)"style="textdecoration:none"onclick="return  function_Name();">&#43;</a> 
```

# php - 用户名作为控制器 codeigniter

> ID：13560657
> 
> 赞同：1
> 
> 时间：2012-11-26T07:49:19.143
> 
> 标签：php, codeigniter, url-rewriting

我正在尝试开发一个人们可以访问 mysite.com/username 的社交网络。我使用了 _remap 函数并且我得到了它的工作，但是它没有加载我的任何其他控制器。请问有人可以帮忙吗？

这是我的默认控制器：

 `````
if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Welcome extends CI_Controller {

    public function index($username = NULL)
    {
        $this->load->model('user_model');
        if ($this->user_model->is_a_username($username)) {
            $data['title'] = $username;
            $data['main_content'] = 'users/profile_page';
            $this->load->view('shared/template',$data);
        } else {
            $this->home();
        }
    }

    public function _remap($method, $params = array())
    {
        if (method_exists($this, $method))
        {
            return call_user_func_array(array($this, $method), $params);
        }
        show_404();
    }

    public function home()
    {
        if ($this->ion_auth->logged_in()) {
            $data['title'] = 'Carnect';
            $data['main_content'] = 'users/wall_page';
            $this->load->view('shared/template',$data); #if logged in show the user's wall
        } else {
            $data['title'] = 'Carnect';
            $data['main_content'] = 'welcome/index';
            $this->load->view('shared/template',$data); #if not logged in show the home page
        }       
    }
} 
````  `这是我的路线文件：

 `````
if ( ! defined('BASEPATH')) exit('No direct script access allowed');

$route['default_controller'] = "welcome";
$route['404_override'] = '';

$route['login'] = "auth/login";
$route['logout'] = "auth/logout";
$route['register'] = "auth/create_user";

/*$route['news'] = "news/index";
$route['politics'] = "politics/index";
$route['culture'] = "culture/index";
$route['messages'] = "messages/index";*/

$route['(:any)/(:any)'] = "$1/$2";
$route['(:any)/(:any)/(:any)'] = "$1/$2/$3";
$route['(.*)'] = 'welcome/index/$1'; 
```` 

`不会加载的控制器之一的示例..`

 ``````
session_start();

class News extends CI_Controller {

    function News()
    {
        parent::Controller();
    }

    function index() {
        $data['title'] = 'Politics';
        $data['main_content'] = 'news/index';
        $this->load->view('shared/template',$data);
    }
} 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:36:27.433

我正在开发一个对这些网址有类似要求的项目。

我通过添加这样的路线来做到这一点：

```
$routes['news'] = 'news/index'; 
```

或者

```
$routes['news'] = 'news'; 
```

这正是您评论过的行。

可悲的是，没有这些线是不可能的（至少我做不到）。

如果您的 URL 是：example.com/news/index，它将匹配规则`$routes['(:any)/(:any)']`，但如果是`example.com/news`，它不会匹配任何内容并转到您的最后一条规则。

CodeIgniter 的 Routing 不采用真正的段，而是 url 中显示的 uri 段。因此，您的 url`example.com/news`将被解释为`$username = news`.

您必须为每个只有 1 个 uri 段的 url 执行此 uri 路由。您需要确保没有用户与您的控制器具有相同的用户名，否则他/她将永远无法访问用户页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:10:32.013

您必须在`application/config/routes.php`文件中编写规则只需添加以下行

```
$route['(:any)'] = "welcome/index/$1"; 
```

`http://example.com/username`如果您添加了用于从 url 中删除文件的 .htaccess 规则，您可以`index.php`访问，或者您可以访问`http://example.com/index.php/username```````

# html - 在 div 之外获取一些东西

> ID：13560658
> 
> 赞同：3
> 
> 时间：2012-11-26T07:49:21.643
> 
> 标签：html, css

好吧，我不知道如何用文字来问这个问题，所以我会发布一张图片：

![在此处输入图像描述](../Images/a7b400debe65a6c3a30720126a29f2b3.png)

所以在图像中，有一个主 div，我们称之为“红色”。

在“红色”里面还有另一个`div`叫做：“绿色”

在“绿色”内部有一个`ul`，带有一些`li`元素，它们应该有一个下划线，但是该下划线必须超出 div，所以我遇到的问题是在代码中将该行放在“绿色”之外，它在里面。

我猜可能有某种溢出设置或某种技术来实现这一点，也许它比我想象的要容易得多，但我就是想不通。

总而言之，我需要从一个 div 中获取一些东西，并让它在它之外显示。

我尽可能多地用谷歌搜索它，但我找不到任何对我有用的东西，也许是因为我什至不知道如何问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:06:11.993

这取决于情况。如果它是固定大小的元素，并且无论您做什么，它们总是相同的大小：定位`red div`为`relative`，然后再次定位`green div`为绝对。这将允许您移动元素。相对于红色 div。如果它根据窗口的大小来拉伸元素，它会更难，并且会成功，但你应该非常小心，因为它很难跨浏览器。`absolute``ul``margin-left``margin-top``float:left`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:15:13.767

你不能用溢出来解决这个问题。您需要做的是让`ul`里面的绿色设置为`position: absolute`，红色框设置为`position: relative`。

我为它做了一个[jsfiddle](http://jsfiddle.net/helmers/VxjeY/2/)（我的第一个）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:05:07.760

根据您的要求查看演示：- [**演示**](http://tinkerbin.com/PhAWjURF)

**HTML**

```
<div class="red">
<div class="green">
  <ul>
    <li>loreum</li>
    <li>loreum</li>
        <li>loreum</li>
    <li>loreum</li>
  </ul>
  </div>

</div> 
```

**CSS**

```
.red {
width:300px;
height:300px;
background:red;  
}

    .green {
        float: right;
        height: 200px;
        margin: 30px 30px 0;
        width: 200px;
    background:green;
    }

    .green ul {
        left: 8px;
        margin: 0;
        padding: 0;
        position: absolute;
        width: 200px;
    }

    .green ul li {
    list-style-type:none;
    display:block;
    border-bottom:1px solid white;
      text-align:right;
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-26T07:54:04.020

对绿色 div 使用“溢出：隐藏”（css）

# html - Twitter Bootstrap 中选择框的大小

> ID：13560659
> 
> 赞同：8
> 
> 时间：2012-11-26T07:49:26.263
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Twitter 引导程序。选择框总是比输入框窄。

![在此处输入图像描述](../Images/cff5b2ca2b019d58bdf1edbe65301eec.png)

如何使它们具有相同的宽度？添加填充有帮助，但看起来很难看。

**编辑**

这是一个小示例 - [http://jsfiddle.net/DfY8z/2/](http://jsfiddle.net/DfY8z/2/)
应用自定义类的相同示例 - [http://jsfiddle.net/DfY8z/3/](http://jsfiddle.net/DfY8z/3/)

我可以使用诸如等之类的类`span3`。`span4`但是我希望我的输入能够填充所有可用空间（并且大小相同），因此我使用的是自定义类。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-02-11T00:12:57.113

只是在为我工作的`input-sm`旁边添加课程。`form-control`

```
<select class="form-control input-sm" id="xxx" ... > 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T09:20:11.630

```
<input type="text" value="" name=""><br>
<select>
 <option>Some options which is very very long... </option>
</select> 
```

结果是盒子的确切大小。![在此处输入图像描述](../Images/2f6fccacd4a68df48f4c1482c89cf778.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T23:26:30.973

您似乎正在使用旧版本的引导程序（当前版本是 2.2.1）。较新版本中的选择框和输入框在未应用类和使用 span* 方法调整大小时大小相同

如果您需要设置自定义大小，则必须使用 2 个不同的自定义类或分别定位选择框和输入框。输入框需要比选择框小 14 像素（文本区域也是如此）。

查看[更新的示例](http://jsfiddle.net/DfY8z/5/)

```
// code sample because its required
<input class="myClass" type="text" value="Abcdefghijklmnop" />

<br />
<br />

<select class="myClass">
    <option> ABC </option>
    <option> XYZ </option>
</select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-10T09:00:30.593

这对我有用-转到 bootstrap.css 文件并注释掉以下内容-

```
select.form-control:not([size]):not([multiple]) {
height: calc(2.25rem + 2px); } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-04T08:12:24.207

放置控件

在 div 内并在 div 上应用 class="col-sm-2" 。

`<div class="col-sm-2"> <select></select>`

您可以根据您的要求更改 col-sm-2 col-sm-3

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-05-13T14:32:42.650

这有效：

```
<select style="width: 200px">...</select> 
```

# hadoop - 使用 FileInputFormat 为大文件拆分映射器的输入？

> ID：13560662
> 
> 赞同：0
> 
> 时间：2012-11-26T07:49:50.830
> 
> 标签：hadoop, mapreduce

我正在尝试使用 map-reduce 从 FTP 并行读取文件。我有一个可以读取文件并对其执行字数统计的代码。但是，当输入大小很大（具体超过 2 MB）时，它会失败。它以 Spill 0 completed 消息停止，然后是 Map 100% Reduce 0% 。然后一个连接被服务器关闭。我不太明白。溢出 0 是什么意思？为什么大输入的代码会失败？如何拆分输入并将其提供给 mapper ？那会有帮助吗？我可以扩展 FileInputFormat 类来解决这个问题吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:54:49.943

是的，你可以实现你的 on `InputFormat`。除了`FileInputFormat`Hadoop 中的其他几个，例如`TextInputFormat`,`KeyValueInputFormat`等。您还可以定义如何从拆分中读取记录。为此，您需要实现自己的`RecordReader`.

[http://developer.yahoo.com/hadoop/tutorial/module4.html](http://developer.yahoo.com/hadoop/tutorial/module4.html)

例如，默认值`InputFormat`是`TextInputFormat`读取文件并使用 a`LineRecordReader`逐行获取记录。如果您正在从文件中读取结构化数据，您可以实现自己的`RecordReader`，因此每条记录都是来自该文件的数据结构。

无论如何，从 FTP 读取文件的 MapReduce 工作真的很奇怪。Hadoop 之所以有效，是因为数据存储在 Hadoop 的文件系统 (HDFS) 上，这是一个分布式文件系统，其中每个文件都被分成块并分布在文件系统的所有节点上。恕我直言，您应该将该文件下载到您的 HDFS 并执行您的 MapReduce 作业。

# windows-phone-7 - Windows phone 开发错误

> ID：13560666
> 
> 赞同：0
> 
> 时间：2012-11-26T07:50:05.993
> 
> 标签：windows-phone-7

我想为 windows phone 开发应用程序。为此，我在 Windows 8 机器上安装了 Visual Studio 2010。之后，我打开了视觉工作室并创建了新项目。但是在silverlight选项中，我没有找到“Windows Phone Application”模板。我在谷歌上搜索并安装了 Windows Phone 的 Visual Studio 2012 Express，通过它安装了 Windows Phone 8 sdk。但我仍然没有得到“Windows Phone 应用程序”模板。那我现在该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T12:01:35.497

要在 VS2010 中创建 Windows Phone 7 应用程序，相信您需要安装[Windows Phone 7 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=27570)。因为您运行的是 Windows 8，所以我建议您也从[此处](http://www.microsoft.com/en-gb/download/details.aspx?id=29233)下载更新。

但是，如果您已经安装了 WP8 SDK，则该模板应该在 VS2012 中可见，所以我不确定您为什么看不到它们。

# android - alertbox receiver sms android 没有出现

> ID：13560667
> 
> 赞同：0
> 
> 时间：2012-11-26T07:50:09.897
> 
> 标签：android, sms, android-alertdialog

我在收到他的短信时使用 alertbox 短信创建应用程序。但是我遇到了麻烦，因为收到短信时没有出现警报框代码。

我的代码：

```
//SMSReceiver

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
public class SMSReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent)
    {       
        Intent startIntent = new Intent(context, SMSNotif.class);
        startIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(startIntent);
    }
}
//SMSNotif

import android.app.Activity;
import android.app.AlertDialog;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
public class SMSNotif extends Activity 
{
private static final String LOG_TAG = "SMSReceiver";
public static final int NOTIFICATION_ID_RECEIVED = 0x1221;
static final String ACTION = "android.provider.Telephony.SMS_RECEIVED";
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    IntentFilter filter = new IntentFilter(ACTION);
    this.registerReceiver(registerReceiver, filter);
}
private void displayAlert()
{
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("Are you sure you want to exit?").setCancelable(
            false).setPositiveButton("Yes",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            }).setNegativeButton("No",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
    AlertDialog alert = builder.create();
    alert.show();
}
private final BroadcastReceiver registerReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (ACTION.equals(action)) 
        {
            //your SMS processing code
            displayAlert();
        }
    }
};
} 
```

如果程序没有用完alertbox，是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:04:04.247

为了在收到短信时显示 AlertDialog，请将您的代码更改为：

**步骤1：**

为传入的 SMS 通知注册一个 Reciver，如下所示`AndroidManifest.xml`：

```
<receiver android:name=".SMSReceiver"> 
  <intent-filter> 
    <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
  </intent-filter> 
</receiver> 
```

和 SMS_RECEIVED 权限`AndroidManifest.xml`：

```
<uses-permission android:name="android.permission.RECEIVE_SMS"></uses-permission> 
```

* * *

**第 2 步：** 更改您的`SMSReceiver.java`身份：

```
public class SMSReceiver extends BroadcastReceiver
{
    static final String ACTION = "android.provider.Telephony.SMS_RECEIVED";
    @Override
    public void onReceive(Context context, Intent intent)
    {   
               String action = intent.getAction();
        if (ACTION.equals(action)) 
        {
            //Start Activity here
             Intent startIntent = new Intent(context, SMSNotif.class);
                     startIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                     context.startActivity(startIntent);
        }    
    }
} 
```

* * *

**第 3 步：**`SMSNotif.java`将您的活动代码 更改为：

```
public class SMSNotif extends Activity 
{
private static final String LOG_TAG = "SMSReceiver";
public static final int NOTIFICATION_ID_RECEIVED = 0x1221;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     setContentView(R.layout.Activity_layout);
     // call displayAlert() here
       displayAlert();
}
    private void displayAlert()
    {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage("Are you sure you want to exit?").setCancelable(
            false).setPositiveButton("Yes",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            }).setNegativeButton("No",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
        AlertDialog alert = builder.create();
        alert.show();
     }

} 
```

* * *

# ios - iOS 跨多个 UIViewController 从 Nib 文件实例化自定义视图

> ID：13560671
> 
> 赞同：1
> 
> 时间：2012-11-26T07:50:29.457
> 
> 标签：ios, xib, custom-view

我需要一个如何从 nib 文件实例化自定义视图的示例。我把头绕在几个stackoverflow帖子上，但我没有明白。也许我只需要一个提示如何去做。

我想要做的是 - 使用界面构建器创建自定义视图。它应该是一个模板，以便我可以多次实例化它以将其添加到多个视图控制器。

到目前为止，我已经创建了名为 MyIssueView.xib 的自定义视图 xib 文件。它实际上只包含主视图和一些标签。

我在 MyIssueView.xib 中为我的标签创建了一个名为 IssueView 的 UIView 子类。

我现在如何将网点与 IB 连接起来？以及如何从任何 ViewController 实例化 IssueView？

很高兴举个例子！干杯。

**更新：**

我现在有

IssueView.xib IssueView.h（UIView 子类） IssueView.m

我的问题视图.h：

```
#import <UIKit/UIKit.h>

@interface IssueView : UIView

@property (weak, nonatomic) IBOutlet UILabel *label1;
@property (weak, nonatomic) IBOutlet UILabel *label2;
@property (weak, nonatomic) IBOutlet UILabel *label3;
@property (weak, nonatomic) IBOutlet UILabel *label4;

@end 
```

我的问题视图.m：

```
#import "IssueView.h"

@implementation IssueView
@end 
```

我的 ViewController.m：

```
#import "AllIssuesViewController1.h"
#import "IssueView.h"
#import "UIView+NibLoading.h"

@interface AllIssuesViewController1 ()

@end

@implementation AllIssuesViewController1

- (void) loadView
{

}

- (void)viewDidLoad
{
    [super viewDidLoad];

    _issueView = [IssueView loadInstanceFromNib];
} 
```

它给了我一个错误：

```
*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<NSObject 0x8292580> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key label1.' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T07:56:28.750

我有一个扩展 UIView 的类别，称为 UIView+NibLoading。

在它是这个代码......

```
#import "UIView+NibLoading.h"

@implementation UIView (NibLoading)

+ (id)loadInstanceFromNib
{
    UIView *result;

    NSArray* elements = [[NSBundle mainBundle] loadNibNamed:NSStringFromClass([self class]) owner:nil options:nil];

    for (id anObject in elements) {
        if ([anObject isKindOfClass:[self class]]) {
            result = anObject;
            break;
        }
    }

    return result;
}

@end 
```

然后，当我想从 nib 实例化 UIView 子类时，我只需导入类别即可运行...

```
self.issueView = [IssueView loadInstanceFromNib];\ 
```

你需要像这样连接标签......

![在此处输入图像描述](../Images/ef7c536ca325e8093cf2a6b74688943e.png)

如果将标签连接到“文件所有者”，则需要删除这些连接。

# c# - .Net JSON WebService 和返回限制

> ID：13560675
> 
> 赞同：1
> 
> 时间：2012-11-26T07:50:46.070
> 
> 标签：c#, asp.net, .net, json, web-services

我有一个 C# WebService 设置来返回 JSON 信息以在移动设备上使用。一切正常，除了现在抛出“HTTP 错误 502（坏网关）：网关或代理服务器从上游服务器收到无效响应”的调用之一。

当我增加调用返回的数据时，错误就开始了。数据是从驻留在服务器上的 JSON 文件中读取的。这个数据文件的大小以前是 1,324,859 字节，它工作正常（现在仍然如此），新的数据文件是 1,563,570 字节，这是失败的。

似乎很明显，我达到了某种默认限制，即我可以在一次调用中返回多少，但对于像我这样的人来说，我无法弄清楚如何增加这个限制。谷歌搜索指向设置 maxJsonLength 的方向，但这似乎没有任何效果。

下面是 WebService 的深入代码，更重要的是我的 web.config。我应该说调用在本地运行良好，这意味着在 VS2010 中运行时，但在服务器上失败（运行 IIS 7.5 的 GearHost）。

我是配置/设置 IIS 的新手，因此非常感谢任何帮助。

```
[ServiceContract]
public interface IMyService
{
  [OperationContract]
  [WebInvoke(Method = "GET", UriTemplate = "/GetItems", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
  Item[] GetItems();
}

public class MyService : IMyService
{
  public Item[] GetItems()
  {
      var result = ReadDataFile<List<Item>>(DataType.Items);
      return result == null ? null : result.ToArray();
  }
} 
```

我现在已经尝试了很多设置，我什至不确定这里需要什么，什么不应该......

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <sectionGroup name="system.web.extensions"         type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
      <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
        <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="MachineToApplication"/>
        <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
          <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="Everywhere" />
          <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="MachineToApplication" />
          <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="MachineToApplication" />
          <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" allowDefinition="MachineToApplication" />
        </sectionGroup>
      </sectionGroup>
    </sectionGroup>
  </configSections>
  <system.web>
    <customErrors mode="On"/>
    <compilation debug="true" targetFramework="4.0" />
    <caching>
      <outputCacheSettings>
        <outputCacheProfiles>
          <add name="NoCacheProfile" noStore="true" duration="0" varyByParam="none" enabled="true"/>
        </outputCacheProfiles>
      </outputCacheSettings>
    </caching>
  </system.web>
  <system.serviceModel>
    <bindings>
      <webHttpBinding>
        <binding name="StreamedRequestWebBinding"
                 bypassProxyOnLocal="true"
                 useDefaultWebProxy="false"
                 hostNameComparisonMode="WeakWildcard"
                 sendTimeout="10:15:00"
                 openTimeout="10:15:00"
                 receiveTimeout="10:15:00"
                 maxReceivedMessageSize="2147483647"
                 maxBufferSize="2147483647"
                 maxBufferPoolSize="2147483647"
                 transferMode="StreamedRequest">
          <readerQuotas maxArrayLength="2147483647"
                        maxStringContentLength="2147483647" />
        </binding>
      </webHttpBinding>
    </bindings>
    <services>
      <service name="JSON_WebService.WoWService" behaviorConfiguration="ServiceBehaviour">
        <endpoint address ="" binding="webHttpBinding" bindingConfiguration="StreamedRequestWebBinding" contract="JSON_WebService.IWoWService" behaviorConfiguration="web">
        </endpoint>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <system.web.extensions>
    <scripting>
      <webServices>
        <jsonSerialization maxJsonLength="50000000"/>
      </webServices>
    </scripting>
  </system.web.extensions>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:53:50.763

```
<system.web.extensions>
    <scripting>
        <webServices>
            <jsonSerialization maxJsonLength="1000000000" />
        </webServices>
    </scripting>
</system.web.extensions> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:20:48.817

在与 GearHost（托管 Web 服务的）来回通信后，他们确认我的问题与服务器错误有关，而不是与编程/web.config 错误有关。jsonSerialization 设置应该已经足够了。

在他们的辩护中，我必须说他们的支持非常出色，我认为很多其他人会认为我的主张是一个发展问题。

# c - C多个文件，分段错误打印数组

> ID：13560679
> 
> 赞同：0
> 
> 时间：2012-11-26T07:51:31.937
> 
> 标签：c, arrays, segmentation-fault

我有这个代码与 2 个文件交互，但是我在这两个函数中遇到了分段错误，我需要帮助找出原因。`fileA.c`将 an 传递`int**`给 in 中的函数`fileB.c`，`int**`用作输出参数，因为我想在 in 中创建一个 int 数组`fileB`并`foo`指向它，以便我可以在中打印它`fileA`。在`fileB.c`中，我创建了一个数组，并将指针设置为它。

size 和 foo 在主文件的另一个函数中初始化。它编译得很好，但输出是 (if `size == 10`) ：

> 0 1 2 3 4 5 6 7 8 9

分段故障

在`fileA.c`：

```
void testPointing(int size, int** foo) {
    initialize(size, foo);
    int i;
    for(i = 0; i < size; i++) {
        printf("%d ", (*foo)[i]);
    }
} 
```

`fileB.c`：

```
void initialize(int size, int** foo) {
    int* a;
    a = (int*)malloc(size * sizeof(int);
    int i;
    for(int i = 0; i < size; i++) {
        printf("%d ", a[i]);
    }
    printf("\n\n");
    foo = &a;
} 
```

我需要帮助来修复和理解为什么会出现分段错误。每当我选择将位于`fileA.c`after `foo = &a` in的循环`fileB.c`改为时，它都会编译并显示正确的输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T07:54:00.067

返回的地址`malloc()`是保存您的数据的地址，它存储在 中`a`，而不是`&a`. `&a`只是局部变量的地址`a`。

此外，`foo`只是 的本地函数参数`initialize()`，而不是调用者的传递参数；那是`*foo`。这使得调用者的未`foo`设置，这就是你得到分段错误的原因。

所以而不是：

```
foo = &a; 
```

你需要：

```
*foo = a; 
```

最初的调用`testPointing()`应该是这样的：

```
int* array;
testPointing(size, &array); 
```

# javascript - 使用 Opera OTransform 缩小或缩小网页

> ID：13560686
> 
> 赞同：0
> 
> 时间：2012-11-26T07:51:49.087
> 
> 标签：javascript, css, transform, opera

当用户单击指定按钮时，我试图缩小我的网页，在经历了许多教程和 stackoverflow 问题之后，我在 FireFox、Chrome 和 Safari 中找到了这样做的方法，但这些方法在 Opera 中不起作用，但我发现它可以使用`OTransform`.

我尝试使用`OTransform`但我的编码只是缩放/放大网页，是否可以在 Opera`zoom-out`中使用网页？`OTransform`

代码

```
var zoom = 1.5;
document.body.style.OTransform = 'scale(' + zoom + ')'; 
```

我也尝试对变量使用负值，`zoom`但它不起作用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:23:13.313

好的，我在发布这个问题后自己找到了答案！

我希望这会帮助其他尝试这样做的人，因为我看到很多人都在寻找这个..如果您需要将网页缩小到 90%`0.9`用于`zoom`变量，0.8 用于 80% ，0.7 用于 70% 等等. ——</p>

```
var zoom = 0.9;
document.body.style.OTransform = 'scale(' + zoom + ')'; 
```

希望这会对某人有所帮助...... :)

# delphi - 在 DELPHI XE2 中卸载一个包

> ID：13560687
> 
> 赞同：1
> 
> 时间：2012-11-26T07:51:51.470
> 
> 标签：delphi, package, delphi-xe2

我想从 DELPHI XE2 Servicepack 4 中卸载一个软件包并用一个新的替换它。在 package -> INSTALL PACKAGE -> UNINSTALL PACKAGE BUTTON 下，这个简单的流程是否已经足够了，还是我需要采取其他措施来避免任何其他问题。

就我而言，我需要卸载 INDY 10 并将最新的 SVN 版本安装到我的系统中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:56:57.737

您还应该检查您的库路径并删除明确引用您刚刚卸载的软件包的文件夹。

# javascript - 显示上一周和下一周的日期

> ID：13560691
> 
> 赞同：-2
> 
> 时间：2012-11-26T07:52:16.217
> 
> 标签：javascript, jquery

我有 2 个按钮（上一个和下一个）一周。在上一周和下一周之间的按钮需要显示该周的结束日期（星期五）。当我们单击前一周按钮时，我想显示从 Sun 11/18 到 Mon 11/26 的前一周日期。与下周按钮单击事件相同，从星期一 11/26" 到星期日 12/2 显示。如何显示？以及如何获取该周的结束日期（星期五）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:59:23.643

这是获取 7 天后的日期，以及 7 天前的日期：

```
var today = new Date();
var nextWeek = Date.parse(new Date(today.getFullYear(), today.getMonth(), today.getDate() + 7));
var previousWeek = Date.parse(new Date(today.getFullYear(), today.getMonth(), today.getDate() - 7)); 
```

如果您不希望返回时间戳，请`Date.parse()`从中删除以接收如下字符串：

```
Mon Dec 03 2012 00:00:00 GMT+0100 (West-Europa (standaardtijd)) 
```

（这是在具有荷兰语设置的系统上返回的）

要获取星期日期，请查看以下 2 个问题：
[JavaScript - 从当前日期获取一周的第一天](https://stackoverflow.com/questions/4156434/javascript-get-the-first-day-of-the-week-from-current-date)
[如何在 JavaScript 中获取一周的第一天和最后一天](https://stackoverflow.com/questions/5210376/get-first-and-last-day-of-the-week-in-javascript)

# android-activity - Jira 3.13.5 项目中的最后一个活动

> ID：13560692
> 
> 赞同：0
> 
> 时间：2012-11-26T07:52:24.297
> 
> 标签：android-activity, jira

我在 Jira **3.13.5**中有 847 个项目。现在我想清理它。我想备份和删除所有在 2012 年没有任何活动的项目。但是我该如何检查呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:33:42.240

使用 JIRA SOAP API：使用*getProjectsNoSchemes*方法获取所有项目密钥。要从每个项目中找出最近更新的问题，请遍历所有这些键并运行：

```
jiraSoapService.getIssuesFromJqlSearch(authToken, "project = " + projectKey + " ORDER BY updatedDate", 1); 
```

注意**1**作为最后一个参数 - 这将 JQL 结果限制为只有 1 个问题，因为我们通过 updatedDate 对查询进行排序，这为我们提供了来自给定项目的单个、最近更新的问题。

只需检查该问题的更新日期是否低于 2012-01-01 并且您已经得到了答案。

这是 JIRA SOAP API 的 javadoc：http: [//docs.atlassian.com/rpc-jira-plugin/latest/com/atlassian/jira/rpc/soap/JiraSoapService.html](http://docs.atlassian.com/rpc-jira-plugin/latest/com/atlassian/jira/rpc/soap/JiraSoapService.html)

这是有关如何创建 JIRA SOAP 客户端的教程：[https ://developer.atlassian.com/display/JIRADEV/Creating+a+JIRA+SOAP+Client#CreatingaJIRASOAPClient-Step2.CreatetheSOAPclientproject](https://developer.atlassian.com/display/JIRADEV/Creating+a+JIRA+SOAP+Client#CreatingaJIRASOAPClient-Step2.CreatetheSOAPclientproject)

**编辑：**抱歉，刚刚意识到 JIRA 3.13 还没有 JQL 搜索，所以答案对于这个 JIRA 版本无效。

# jakarta-ee - Java EE 应用服务器上的 OSGi 支持

> ID：13560696
> 
> 赞同：4
> 
> 时间：2012-11-26T07:52:35.150
> 
> 标签：jakarta-ee, jboss, websphere, osgi

我们一直在考虑将 OSGi 用于我们的 Web 应用程序模块。然而，我们不知道我们想要使用哪个 AS。

对 OSGi 的原生支持似乎存在于主要应用服务器的 WebSphere 和 JBoss 中，以及一些不太常用的服务器（例如 Glassfish 和 Geronimo）中。对于 Tomcat 或 WebLogic，它不是直接支持的，而是通过[桥接解决方法](https://stackoverflow.com/questions/3893494/integrating-equinox-osgi-into-apache-tomcat-web-app)。

如果我们使用 Tomcat/WebLogic + 解决方法，我们会放弃哪些功能？哪些东西只有在 JBoss 和 WebSphere 等原生支持下才能获得？

JTA 就是一个这样的例子。似乎我们不会使用桥接解决方法获得 Java EE 事务。还有其他人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:00:07.940

你考虑过[http://www.eclipse.org/virgo/](http://www.eclipse.org/virgo/)吗？

谢谢，拉古

# virtualbox - Xen Hypervisor 安装在哪里？

> ID：13560703
> 
> 赞同：-1
> 
> 时间：2012-11-26T07:53:06.077
> 
> 标签：virtualbox, hypervisor

它会安装在**现有的操作系​​统**或**硬件**上吗？

**Hypervisor**和**virtualbox**有什么区别？我知道我可以在我的 windows xp 上安装 virtualbox，然后在上面安装几个带有 linux 或 windows 的 VMS。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:30:05.667

> Xen Hypervisor 安装在哪里？它会安装在现有的操作系​​统或硬件上吗？

正如在精美的[维基百科文章](http://en.wikipedia.org/wiki/Xen#Architecture)中所解释的，Xen 是一个*裸机管理程序*，这意味着它直接在硬件上运行。

然而，由于 Xen 本身没有用户界面，它总是需要至少安装一个来宾操作系统才能工作。必须有一个操作系统来宾以特​​殊权限运行（所谓的“dom0”）。此 dom0 用于管理 Xen，因此与托管管理程序上的主机操作系统具有相似的作用。因此，虽然从技术上讲 Xen 直接在您的硬件上运行，但实际上您仍将安装操作系统，然后从操作系统内部安装 Xen，就像托管解决方案一样。但是，您必须重新启动进入 Xen（这将启动 dom0 操作系统）。

> Hypervisor 和 virtualbox 有什么区别？

Hypervisor是总称，Xen和VirtualBox都是hypervisor的实现。

> 我知道我可以在我的 windows xp 上安装 virtualbox，然后在上面安装几个带有 linux 或 windows 的 VMS。

Yes, you can do the same with Xen (though support for Windows guests seems to be more limited than with VirtualBox).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:23:57.287

完全虚拟化很难实现（例如：virtualbox）并且速度很慢，因为您应该创建底层硬件的精确副本，并且难以从硬件错误中恢复。

半虚拟化（xen 虚拟机管理程序）提供机器硬件，但由sitll 管理它。和操作系统，将作为虚拟机安装应该有一些修改。

Xen 仍然需要一些操作系统来管理虚拟机的资源，所以它不会只安装在硬件上。例如，Citrix Zen Server 使用 CentOS5（顺便说一句，它已经过时了）。

半虚拟化方法有利于云计算，因为它能够在许多不同的机器和规模上有效地运行多个 VM。

我建议你阅读一篇名为《[云端之上](http://www.eecs.berkeley.edu/Pubs/TechRpts/2009/EECS-2009-28.pdf)》的文章。

# android - 广播接收器中的 getSharedPreferences(sharedprefname, Context.MODE_PRIVATE) 返回空指针异常？

> ID：13560707
> 
> 赞同：-1
> 
> 时间：2012-11-26T07:53:46.973
> 
> 标签：android, broadcastreceiver, sharedpreferences, android-2.2-froyo

**我正在开发一个 android 应用程序。我正在使用 Android SDK 2.2**
我正在使用 2 个广播接收器。接收器 A 启动服务`S1`
接收器 B 启动服务`S2`。
两个接收器都以 1 小时的时间间隔
调用 接收器 A 在时间 9.00、10.00 等处
被调用 接收器 B 在时间 8.50、9.50 等处被调用
在服务 S1 中，我将一些数据存储在共享首选项
中将一些数据存储在接收器 B 中的共享首选项中。
**我在 BroadcastReceiver 中使用下面的代码来获取共享首选项。但它抛出空指针异常**

```
context.getApplicationContext().getSharedPreferences("myPrefs_capture_gps_per_hour", Context.MODE_PRIVATE); 
```

在上面的代码中，**上下文**是类 BusinessModel 的对象。这个 BusinessModel 类是**Application(android.app.Application)的子类**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:12:02.140

我得到了解决方案。
以下语句用于获取广播接收器内部的共享首选项

```
mContext.getSharedPreferences("myPrefs_capture_gps_per_hour", Context.MODE_PRIVATE); 
```

上面代码中的**“mContext”**是**onReceive()**方法中传入的上下文

# javascript - NodeJS - 如何正确导出模块

> ID：13560709
> 
> 赞同：0
> 
> 时间：2012-11-26T07:53:55.143
> 
> 标签：javascript, node.js

给定两个模块`a`和`b`. 我知道可以`a`使用`module.exports`. 我可能没有正确使用它。

**一个.js**

```
function A() { ... }
A.prototype.func = function() { ... }

function test() {
    new A().func();
}

test();
module.exports = {
    A : new A()
}; 
```

`test()`工作正常。但以下中断：

**b.js**

```
var A = require("./a");
A.func(); //throws an exception 
```

如何导出整个`A`模块及其功能？

**更新：**执行`console.log(A)`结束`b`（作为第二行），不显示任何`A`方法和变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:56:05.223

试试这个：

```
module.exports = new A(); 
```

您将无法`A`在 b 中实例化新的，但看起来这就是您想要的。

**编辑：**

或者您可以更改`b.js`为：

```
var A = require('./a');
A.A.func(); 
```

但这可能不是您想要的。

这个想法是，无论`exports`是什么都将是从`require`. 这是完全相同的参考。

# scala - 在 Spec2 中的每个测试之前执行重置方法

> ID：13560713
> 
> 赞同：4
> 
> 时间：2012-11-26T07:54:04.987
> 
> 标签：scala, testing, specs2

我在使用 Spec2 的测试类中有一个定义的测试方法链：

```
def is =
  "EntriesServlet with logged user" ^
  "POST / request should update entry that user owns" ! updateExistingEntryThatLoggedUserOwns ^
  "POST / request should not update non existing entry" ! notUpdateNonExistingEntry ^
  "POST / request should not update non owner entry" ! notAllowToUpdateNotOwnedEntry
end 
```

在这些方法中，我正在检查是否调用了定义的模拟。但是我需要重新创建一个模拟，这样我就可以只计算一种方法的调用，而不是全局的。

所以我需要一种无缝定义方法的方法让我们说：

```
 def prepareMocks = {
   serviceMock = mock[MyService]
 } 
```

这将在每个测试方法之前执行，所以在检查我的断言之前我已经准备好了干净的模拟。

我尝试了特征`BeforeEach`和`BeforeExample`Spec2，但它们不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:51:18.487

您可以使用案例类来实例化您的模拟并将它们与同时执行的其他示例隔离开来：

```
import org.specs2._
import specification._
import mock._

class MySpec extends Specification { def is =
  "EntriesServlet with logged user" ^
    "POST / request should update entry that user owns" !        c().updateExistingEntryThatLoggedUserOwns ^
    "POST / request should not update non existing entry" ! c().notUpdateNonExistingEntry ^
    "POST / request should not update non owner entry" ! c().notAllowToUpdateNotOwnedEntry ^
  end

  trait MyService
  case class c() extends Mockito {
    val service = mock[MyService]

    def updateExistingEntryThatLoggedUserOwns = service must not beNull
    def notUpdateNonExistingEntry = ok
    def notAllowToUpdateNotOwnedEntry = ok
  }
}

// here's a similar solution using standardised group names which is a 1.12.3 feature

class MySpec extends Specification { def is =
  "EntriesServlet with logged user" ^
    "POST / request should update entry that user owns"   ! g1().e1 ^
    "POST / request should not update non existing entry" ! g1().e2 ^
    "POST / request should not update non owner entry"    ! g1().e3 ^
  end

  trait MyService
  "POST requests" - new g1 with Mockito {
    val service = mock[MyService]

    e1 := { service must not beNull }
    e2 := ok
    e3 := ok
  }
} 
```

# ios - 如何动态调整静态 UITableViewCell 的大小？

> ID：13560716
> 
> 赞同：0
> 
> 时间：2012-11-26T07:54:25.147
> 
> 标签：ios, uitableview, uistoryboard

> **可能重复：**
> [带有包装标签的静态表格单元格的动态高度？](https://stackoverflow.com/questions/11981071/dynamic-height-for-static-table-cells-with-wrapping-labels)

我正在使用带有静态内容的 UITableView。视图控制器不实现委托或数据源协议中的任何内容（因为部分和单元格都在情节提要中定义），只是使用连接为 IBOutlets 的 UILabel 插入文本内容。

但现在我想动态设置一个特定单元格的高度。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T08:42:07.090

这是一个例子：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row==0) {
        return 70;
    }else {
        // return height from the storyboard
        return [super tableView:tableView heightForRowAtIndexPath:indexPath];
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T08:30:29.093

如果需要在运行时定义单元格的高度，则*必须*实现`tableView:heightForRowAtIndexPath:`. `UITableViewDelegate`这有点痛苦，但这是您能够以编程方式计算单元格高度并在表格需要显示时将其返回到表格的唯一方法。

# json - C# 谷歌位置 API 失败

> ID：13560720
> 
> 赞同：1
> 
> 时间：2012-11-26T07:54:42.587
> 
> 标签：json

问题是关于使用 google api 的 json 格式的位置请求，如下所示。它总是返回“{}”。这段代码已经正常工作了，有什么改变？下面的示例中是否有任何遗漏。

谢谢。

```
 static void Main(string[] args)
    {
        var httpWebRequest = (HttpWebRequest)WebRequest.Create("http://www.google.com/loc/json");
        httpWebRequest.ContentType = "text/json";
        httpWebRequest.Method = "POST";

        using (var streamWriter = new StreamWriter(httpWebRequest.GetRequestStream()))
        {
            string json = "{\"version\":\"1.1.0\",\"host\":\"maps.google.com\"" +
                         ",\"cell_towers\":[{\"cell_id\":25070,\"location_area_code\":4474" +
                         ",\"mobile_country_code\":460,\"mobile_network_code\":0}]" +
                         ",\"wifi_towers\":[{}]}";

            streamWriter.Write(json);
        }
        var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();
        using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
        {
            var responseText = streamReader.ReadToEnd();
            //Now you have your response.
            //or false depending on information in the response
            Console.WriteLine("result 1:");
            Console.WriteLine(responseText);
            Console.ReadKey();
            return;
        }
    } 
```

# fuzzy-logic - ffll 免费模糊逻辑库的资源

> ID：13560724
> 
> 赞同：1
> 
> 时间：2012-11-26T07:55:04.130
> 
> 标签：fuzzy-logic

下面推荐[哪个模糊逻辑库？](https://stackoverflow.com/questions/11145253/open-source-fuzzy-logic-library)

我也选择使用这个库，ffll。然而，这个库的社区似乎不存在或者使用这个库的程序员太少，而且很难获得简单的支持。

例如，要编写 FCL 语言来定义（.fcl）模糊模型，必须购买语言参考。现在，我只想编写一个具有两个输出的模型，但不知道如何（旧的参考指南无法编译）。甚至在该 .fcl 文件中定义一些常量

我用谷歌搜索但失败了。

任何人的经验和评论对我都有很大的帮助！谢谢

# matrix - 未知矩阵乘法

> ID：13560725
> 
> 赞同：0
> 
> 时间：2012-11-26T07:55:08.030
> 
> 标签：matrix, matrix-multiplication

如何找到 X、Y、X' 和 Y'，其中这些是**未知**的2x2 矩阵，而 A、B、C、I、J、K 和 L 是**已知**的2x2 矩阵。

方程是：

```
A . X . Y . B = I
A . X . Y' . B = J
A . X . Y . C . X' . Y' . B = K
A . X' . Y' . B = L 
```

通过在 A 和 B 之间保留 2 个未知数，可以生成方程以简化问题。

看起来很现实，因为问题包含 4 个方程和 4 个未知数。

请问有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:01:17.653

我不认为这是可能的。从第一个方程，您可以计算`X.Y`. 从最后，您可以计算`X'.Y'`. 第三个没有提供任何新信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:43:38.207

我的方法使用第一个和第四个等式：（假设矩阵 A、B、Y 可以反转）

```
 A . X . Y . B = I                  (1)
   A . X . Y' . B = J                 (2)
   A . X . Y . C . X' . Y' . B = K    (3)
   A . X' . Y' . B = L                (4)

(1)=>  X . Y = Inv(A) . I . Inv(B) = M    (5)   (introducing abbreviation M)
(4)=>  X'. Y'= Inv(A) . L . Inv(B) = N'   (6)   (introducing abbreviation N')
(6)=>  Y . X = N                          (7)
(5)=>  X = M . Inv(Y)                     (8)   Inv(Y) is the inverse matrix of Y
(7)=>  X = Inv(Y) . N                     (9)
(9)=>  M . Inv(Y) = Inv(Y) . N            (10)
(10)=> Y . M = N . Y                      (11)
(11)=> (y11*m11+y12*m21) = (n11*y11+n12*y21)  (12)  matrix components have to be equal
(11)=> (y11*m21+y12*m22) = (n11*y21+n12*y22)  (13)
(11)=> (y21*m11+y22*m21) = (n21*y11+n22*y21)  (14)
(11)=> (y21*m12*y22*m22) = (n21*y12+n22*y22)  (15)
(12)=> y11*(m11-n11) +y12*m21 -y21*n12                      = 0   (16)
(13)=> y11*m21       +y12*m22 -y21*n11       -y22*n12       = 0   (17)
(14)=> y11*(-n21)             +y21*(m11-n22) +y22*m21       = 0   (18)
(15)=>               +y12*n21 +y21*m12       +y22*(m22-n22) = 0   (19) 
```

方程(16)-(19)的解可以通过高斯消元法求得。从 Y，通过 (8) 计算 X

得到的解——如果线性方程组 (16)-(19) 有解——不是唯一的。X 和 Y 可以通过与比例因子相乘来修改。

# gwt - GWT.runAsync(new RunAsyncCallback() 是否使用任何代理从 .cache.js 下载？

> ID：13560735
> 
> 赞同：0
> 
> 时间：2012-11-26T07:55:33.397
> 
> 标签：gwt

我不了解代码拆分的工作。我在[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)中阅读了它，但它没有指定从 .cache.js 文件下载代码的任何代理调用。我想清楚地知道这意味着它是如何工作的。谁能帮我？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:39:56.737

您在评论中指的是 GWT RPC。

1) **RPC**用于从服务器端获取数据。

2)**代码拆分**用于将您的 GWT 生成的应用程序 javascript 拆分为较小的文件，并在您导航到给定屏幕或执行代码时根据需要加载它们。

# javafx-2 - JavaFX 中的错误信息

> ID：13560737
> 
> 赞同：1
> 
> 时间：2012-11-26T07:55:40.370
> 
> 标签：javafx-2, javafx

JavaFX中有没有什么方法可以提示和处理类似于org.​jdesktop.​swingx.​error.​ErrorInfo类的错误？

请让我知道 JavaFX 中是否有任何可用的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:53:44.967

[ErrorInfo 对话框处理程序](http://javadoc.geotoolkit.org/external/swingx/org/jdesktop/swingx/error/ErrorInfo.html)不是核心 JavaFX 2.2 平台的一部分。您必须自己开发这样的处理程序。

周围有几个现有的 JavaFX 对话框项目。如果您愿意，您可以将您的工作基于这些项目之一，并回馈这样一个对话框处理程序 - [JavaFX UI 控制 sandbox](http://fxexperience.com/2012/10/announcing-the-javafx-ui-controls-sandbox/)、[jfxtras](http://jfxtras.org/)和[MonologFX](https://blogs.oracle.com/javajungle/entry/monologfx_floss_javafx_dialogs_for)。

# jquery - 如何在使用 jquery 选择其他单选按钮时关闭第一个打开的单选按钮？

> ID：13560740
> 
> 赞同：1
> 
> 时间：2012-11-26T07:56:02.633
> 
> 标签：jquery, radio-button

大家好，我在这里工作 jquery 我有三个三个单选按钮，每个选择我有三个 div 我需要选择一个潜水，就像我在选择 div 时为它提供单独的 div 一样，它会正确打开，我需要执行就像当我选择另一个单选按钮时，首先打开的另一个单选按钮应该关闭并选择应该打开我怎么能这样做这是我的代码如下请帮我这样做

```
 <form class="form-horizontal" id="zone"> 
                           <label class="control-label" for="Availability">Shipping Zone Type</label>
                <div class="controls">
                <label class="radio">
                    <input type="radio" class="regular-radio" name="radio-1-set" id="radio-1-1"><label for="radio-1-1"></label>
                    This shipping zone is based on one more countries
                    <span class="tooltip-demo"><a data-original-title="Tooltip on right" href="#" rel="tooltip" data-placement="right"><i class="icon-question-sign"></i> </a></span>

                </label>

                <div class="selectbox-bg selectbox-bg-sb3 pull-left " id="shippingZone" style="display:none">
               <select>
                  <option>Choose a Country</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
               </select>
               </div> 
                           <label class="radio">
                    <input type="radio" class="regular-radio" name="radio-1-set" id="radio-1-2"><label for="radio-1-2"></label>                     
                    This shipping zone is based on one more state or provinces
                    <span class="tooltip-demo"><a data-original-title="Tooltip on right" href="#" rel="tooltip" data-placement="right"><i class="icon-question-sign"></i> </a></span>
                 </label>
                   <div class="selectbox-bg selectbox-bg-sb3 pull-left " id="shippingzonecountry" style="display:none">
               <select>
                  <option>Choose a Country</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
               </select>
               </div>
                  <input type="radio" class="regular-radio" name="radio-1-set" id="radio-1-3"><label for="radio-1-3"></label>                    
                 This shipping zone is based on one more postal or ZIP codes
                        <span class="tooltip-demo"><a data-original-title="Tooltip on right" href="#" rel="tooltip" data-placement="right"><i class="icon-question-sign"></i> </a></span>
                </label>
                <div class="selectbox-bg selectbox-bg-sb3 pull-left " id="zipcode" style="display:none">
               <select>
                  <option>Choose a Country</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
               </select>
               </div>  
                         </form> 
```

在上面我有三个单选按钮和三个 div 我需要选择一个单选按钮，当我选择另一个打开时它应该打开它应该关闭请帮助我这个 sdtha

```
 thi is my jquery :as fpllows

                $(function () {
                 $("#radio-1-2").click(function () {
           $("#shippingzonestate").show('slow');
             });

          $("#radio-1-2").click(function () {
          $("#shippingzonestate").show('slow');
          $("#shippingzonecountry").show('slow');
           });

          $("#radio-1-3").click(function () {
         $("#zipcode").show('slow');
          $("#Product-Code-SKU").show('slow');
           }); 
```

我试过这样但是当我打开另一个应该关闭我怎么能这样做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:59:41.957

**编辑**（通用功能）

```
function showhide(radioname)
{
    $("#shippingzonestate").hide('slow');
    $("#shippingzonecountry").hide('slow');
    $("#zipcode").hide('slow');
    $("#Product-Code-SKU").hide('slow');

   if(radioname=="one")
   {
     $("#shippingzonestate").show('slow');
   }
   if(radioname=="two")
   {
     $("#shippingzonestate").show('slow');
     $("#shippingzonecountry").show('slow');
   }
   if(radioname=="three")
   {
     $("#zipcode").show('slow');
     $("#Product-Code-SKU").show('slow');
   }
}

$(function () {
                 $("#radio-1-2").click(function () {
                       showhide("one");
             });

          $("#radio-1-2").click(function () {
                        showhide("two");
           });

          $("#radio-1-3").click(function () {
                        showhide("three");
           });
}); 
```

* * *

只需使用[隐藏](http://api.jquery.com/hide/)方法

```
 $(function () {
             $("#radio-1-2").click(function () {
       $("#shippingzonestate").show('slow');
        $("#shippingzonecountry").hide('slow');
          $("#zipcode").hide('slow');
      $("#Product-Code-SKU").hide('slow');
         });

      $("#radio-1-2").click(function () {
      $("#shippingzonestate").show('slow');
      $("#shippingzonecountry").show('slow');
          $("#zipcode").hide('slow');
      $("#Product-Code-SKU").hide('slow')
       });

      $("#radio-1-3").click(function () {
     $("#zipcode").show('slow');
      $("#Product-Code-SKU").show('slow');
      $("#shippingzonestate").hide('slow');
      $("#shippingzonecountry").hide('slow');
       }); 
```

# android - Android：存储微调器选定值

> ID：13560747
> 
> 赞同：0
> 
> 时间：2012-11-26T07:56:41.233
> 
> 标签：android, spinner, android-spinner

我创建了一个`spinner`从数据库填充数据的。

假设，用户从中选择项目`spinner`并按下后退按钮。（或我的 android 应用程序中的任何其他按钮）。然后用户做一些其他的事情并回到用户之前从中选择项目的屏幕`spinner`。在这个场合`spinners selected item`应该是那个用户的物品`previously selected`。

我是怎么做云的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T23:17:50.227

共享偏好并非真正用于此目的。如果您使用共享首选项，则保存的状态可能会在活动的不同调用中持续存在 - 可能是您想要的，也可能不是。

更好的方法是使用用于保存 UI 状态的功能 - 覆盖 onSaveInstanceState(Bundle savedInstanceState) 并将您要更改的应用程序状态值写入 Bundle 参数，如此答案所示： [Android 添加更多保存结果到记事本示例](https://stackoverflow.com/questions/6734743/android-adding-more-save-results-to-notepad-sample)

# shell - Unix shell bash 脚本无法放置回显调试语句

> ID：13560755
> 
> 赞同：0
> 
> 时间：2012-11-26T07:57:25.273
> 
> 标签：shell, makefile

我有以下make文件，我认为它是一个shell脚本。

我正在尝试循环`FILE_DIR`执行一些操作。但是，我觉得实施没有按预期工作。所以我试图插入一些`echo`断点。

资源：

```
# Target to recurse through the DIR_LIST and make each makefile found in that DIRS
ALLDIRS:
       for se in $(FILE_DIR); do \
              if [ -d $se ]; then \
              cd $se; \
              $(MAKE) -f Makefile.mk all; \
              cd ..; \
              fi \
       done 
```

跑步：

```
$ make -f Makefile.batch

h: syntax error at line 3: `then' unexpected
*** Error code 2
The following command caused the error:
for se in `ls -p /app/internal|grep "/"`; do \
        echo "Test" \
        if [ -d e ]; then \
        cd e; \
        /usr/ccs/bin/make -f Makefile.mk all; \
        cd ..; \
        fi \
done
make: Fatal error: Command failed for target `ALLDIRS' 
```

我可以请这方面的帮助。想插入`echo`断点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T08:07:16.747

s 中的一个常见错误`Makefile`是在命令行中使用空格而不是制表符。检查整个`for`循环并确保每行的开头只有制表符

```
ALLDIRS:
<tab>for se in $(FILE_DIR); do \
<tab><tab>if [ -d $se ]; then \
<tab><tab>cd $se; \
<tab><tab>$(MAKE) -f Makefile.mk all; \
<tab><tab>cd ..; \
<tab><tab>fi \
<tab>done 
```

另一个错误是美元符号`$`。如果你想在 shell 命令中使用美元符号，你必须在你的命令中加倍它，因为否则美元会引入一个*make 变量*，并且会在 shell 看到它之前被扩展。

```
for se in $(FILE_DIR); do \
    if [ -d $$se ]; then \
        cd $$se; \
        $(MAKE) -f Makefile.mk all; \
        cd ..; \
    fi \
done 
```

最后一个，`echo Test`也需要一个分号

```
for se in $(FILE_DIR); do \
    if [ -d $$se ]; then \
        echo "Test"; \
        cd $$se; \
... 
```

# java - 将 shortarray 转换为 bytearray 和 bytearray 到 shortarray

> ID：13560756
> 
> 赞同：1
> 
> 时间：2012-11-26T07:57:30.810
> 
> 标签：java, android, bytearray, short

我已经尝试过[这种**short2byte 和 byte2short**转换，效果很好但很耗时。](http://short2byteandbytetoshort.blogspot.in/)

我正在将**字节转换为短**，如下所示

```
ByteBuffer.wrap(bData).order(ByteOrder.LITTLE_ENDIAN).asShortBuffer().get(sData); 
```

以同样的方式，我想将**短转换回字节。**

我已经搜索并查看了许多示例，但没有得到我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:37:21.010

我想我有办法了。

**使用 ByteBuffer 将字节转换为短字节**

```
byte[] bData= {};
short[] sData= new short[bData.length/2];
// to turn bytes to shorts as either big endian or little endian. 
ByteBuffer.wrap(bData).order(ByteOrder.LITTLE_ENDIAN).asShortBuffer().get(sData); 
```

**使用 ByteBuffer 将短字节转换为字节**

```
// to turn shorts back to bytes.
byte[] bData= new byte[sData.length * 2];
ByteBuffer.wrap(bData).order(ByteOrder.LITTLE_ENDIAN).asShortBuffer().put(sData); 
```

# neo4j - 如何使用节点的所有属性对节点进行分组？

> ID：13560761
> 
> 赞同：0
> 
> 时间：2012-11-26T07:57:58.010
> 
> 标签：neo4j, cypher, spring-data-neo4j

我有一个要求，我必须获取按节点的所有属性分组的节点。它喜欢这样：我在 neo4j db 中有 2 个节点，它们具有属性“名称”和“地址”，我可以像这样编写密码 sql：start node=node(0) match node-->record return count( *),record .姓名，记录.地址。这很容易。但现在的问题是我有很多属性可能是 50 年代并且属性名称不固定，我这样写密码：start node=node(0) match node-->record return count(* ), record, 但它无法得到我想要的结果。有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:34:18.833

尝试：

```
...
return record.Name!, record.Address! 
```

或者：

```
where has(record.Name) and has(record.Address)
... 
```

# android - android将数据作为xml发送到服务器php

> ID：13560763
> 
> 赞同：0
> 
> 时间：2012-11-26T07:58:00.637
> 
> 标签：android

我的数据是字符串类型，我想将此数据作为 xml 发送到服务器。我该怎么做？你能帮帮我吗！

```
httpclient = new DefaultHttpClient();
            httppost = new HttpPost("http://longvansolution.tk/login.php"); // make
                                                                            // sure
                                                                            // the
                                                                            // url
                                                                            // is
                                                                            // correct.
            // add your data
            nameValuePairs = new ArrayList<NameValuePair>(2);
            // Always use the same variable name for posting i.e the android
            // side variable name and php side variable name should be
            // similar,
            nameValuePairs.add(new BasicNameValuePair("username",
                    txtusername.getText().toString().trim())); // $Edittext_value
                                                                // =
                                                                // $_POST['Edittext_value'];
            nameValuePairs.add(new BasicNameValuePair("password",
                    txtpassword.getText().toString().trim()));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            // Execute HTTP Post Request
            response = httpclient.execute(httppost); 
```

现在我不想用这种方式，我想发送 xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:59:16.630

```
String url = "http://yourserver";
File file = new File(Environment.getExternalStorageDirectory(),
    "yourfile");
try {
    HttpClient httpclient = new DefaultHttpClient();

    HttpPost httppost = new HttpPost(url);

    InputStreamEntity reqEntity = new InputStreamEntity(
        new FileInputStream(file), -1);
    reqEntity.setContentType("binary/octet-stream");
    reqEntity.setChunked(true); // Send in multiple parts if needed
    httppost.setEntity(reqEntity);
    HttpResponse response = httpclient.execute(httppost);
    //Do something with response...

} catch (Exception e) {
    // show error
} 
```

可能重复[ttp://stackoverflow.com/questions/4126625/how-to-send-a-file-in-android-from-mobile-to-server-using-http](https://stackoverflow.com/questions/4126625/how-to-send-a-file-in-android-from-mobile-to-server-using-http)

# c++ - c++/cx 中的 storagefile::ReadAsync 异常？

> ID：13560768
> 
> 赞同：3
> 
> 时间：2012-11-26T07:58:26.487
> 
> 标签：c++, windows-8, windows-store-apps, c++-cx

我一直在尝试使用 c++/cx`StorageFile::ReadAsync()`读取商店应用程序中的文件，但无论如何它总是返回无效的参数异常

```
// "file" are returned from FileOpenPicker
IRandomAccessStream^ reader = create_task(file->OpenAsync(FileAccessMode::Read)).get();
if (reader->CanRead)
{
    BitmapImage^ b = ref new BitmapImage();
    const int count = 1000000;
    Streams::Buffer^ bb = ref new Streams::Buffer(count);
    create_task(reader->ReadAsync(bb, 1, Streams::InputStreamOptions::None)).get();
} 
```

我已经打开了所有清单功能，并为声明添加了“文件打开选择器”+“文件类型关联”。有任何想法吗 ？谢谢！

ps：我发现的大多数解决方案都是针对C#的，但是代码结构相似......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T22:55:03.493

如果此代码在 UI 线程（或任何其他单线程单元或 STA）上执行，则`.get()`如果任务尚未完成，则调用将抛出，因为调用`.get()`会阻塞线程。您不得阻塞 UI 线程或任何其他 STA，并且在启用 C++/CX 支持的情况下进行编译时，库会强制执行此操作。

如果您在调试器中打开第一次机会异常处理（Debug -> Exceptions...，选中 C++ Exceptions 复选框），您应该`invalid_operation`从以下行中看到要抛出的第一个异常是异常`<ppltasks.h>`：

```
// In order to prevent Windows Runtime STA threads from blocking the UI, calling
// task.wait() task.get() is illegal if task has not been completed.
if (!_IsCompleted() && !_IsCanceled())
{
  throw invalid_operation("Illegal to wait on a task in a Windows Runtime STA");
} 
```

您报告的“无效参数”是此异常到达 ABI 边界时导致的致命错误：通知调试器应用程序即将终止，因为此异常未处理。

您需要重组代码以使用*continuations*， using `task::then`，如文章[Asynchronous Programming in C++ Using PPL中所述](http://msdn.microsoft.com/en-us/magazine/hh781020.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-18T20:27:19.220

只是为了确保您了解异步模式，您的代码中发生的事情是您调用 create_task 并在该任务开始后立即尝试使用 .get() 获取结果。如果任务仍在运行或找不到文件，对 .get() 的调用将立即抛出。因此，构建此任务的正确方法是在文件任务上使用 .then，确保在开始下一个任务之前获得此任务的结果。

```
create_task(file->OpenAsync(FileAccessMode::Read)).then([](IRandomAccessStream^ reader)
{
    //do stuff with the reader
}); 
```

此时阅读器可用，因此您可以做任何您想做的事情，甚至开始一项新任务。

此外，对 OpenAsync 的调用可能会失败，因为文件为空，我会在上一个任务（获取文件的任务）中添加一个 try catch 块，以确保这不是问题。

# android - 如何以 root 身份运行 adb push？

> ID：13560771
> 
> 赞同：29
> 
> 时间：2012-11-26T07:58:40.600
> 
> 标签：android, adb, root, pull

我想用来`adb pull`将 db 文件从 Nexus 7 拉到 PC。

我的nexus 7已经root了。

如果使用“ `adb pull /data/data/com.xx.xx/databases/xx.db`.”，则由于权限问题而失败。但是如果我使用`">adb shell; >su"`, 但是我不能使用`"adb pull"`命令。

# c++ - libav 视频编码 ratecontrol.cpp:766

> ID：13560775
> 
> 赞同：1
> 
> 时间：2012-11-26T07:59:11.167
> 
> 标签：c++, libav

我在尝试使用 libav 对视频进行编码时遇到了一些麻烦。

`ratecontrol.c : 766`我说这个断言错误`q>0.0`

我不知道发生了什么，我知道字母 q 通常代表质量，其中 0 是无损的。

但在这种情况下，我就是无法把握可能出了什么问题。

我有很多关于这个的代码，在这里发布是不可能的。我正在使用带有 gpl 和 libx264 的 ffmpeg 包 1.0。我正在尝试使用 crf 值为 1 的 libx264 编码器进行编码。

我检查了输入的值，它们看起来很合理，我尝试将给定的图像保存到单独的 .bmp 文件中，一切似乎都井井有条。

编辑：

明白了，比特率与编码器不兼容。

奇怪的是它应该做这样的事情来表明这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:18:11.143

有问题的文件似乎是[libav ratecontrol.c](http://git.libav.org/?p=libav.git;a=blob;f=libavcodec/ratecontrol.c;h=2cb5eeaefe589ebc3fdce18a12ade43e42fa21e7;hb=HEAD#l767)

围绕那个的线是：

```
 763         q= modify_qscale(s, rce, q, picture_number);
 764 
 765         rcc->pass1_wanted_bits+= s->bit_rate/fps;
 766 
 767         assert(q>0.0); 
```

因此，您似乎必须深入了解并了解[`modify_qscale`](http://git.libav.org/?p=libav.git;a=blob;f=libavcodec/ratecontrol.c;h=2cb5eeaefe589ebc3fdce18a12ade43e42fa21e7;hb=HEAD#l433).

由于这个问题非常笼统，我建议您尝试浏览代码，尝试理解它。

# android - 如何在形状布局中添加垂直线

> ID：13560778
> 
> 赞同：0
> 
> 时间：2012-11-26T07:59:30.497
> 
> 标签：android, xml, android-layout, shape

我懂了： ![在此处输入图像描述](../Images/0ba45bf7daf5b96b20d3422a7e06fd59.png)

我想要的是： ![在此处输入图像描述](../Images/fd1e56b8f557ea2e7907638ece2c676e.png)

不要在意现在的颜色。我想出了如何做水平线，但不是垂直线。那么如何添加垂直线呢？

这是我的 row_border.xml （形状）：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
    <solid android:color="#ffffff" />
    <stroke android:width="1dp" android:color="#99cc00" />

</shape> 
```

已经试过了，但是没有用：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
    <solid android:color="#ffffff" />
    <stroke android:width="1dp" android:color="#99cc00" />

    <stroke
        android:angle="90"
        android:width="1dp"
        android:color="#ff0000"
        ></stroke>

</shape> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:06:30.387

如果你使用表格布局，

1- 给 TableLayout 背景 android:background="#000000"

2-给你的 TableRow 不同的背景（它将是边框颜色）

3 给你的 TableRow 边距（它将是边框宽度）

左边距 = 左边框

右边距 = 右边框

上边距 = 上边框

下边距 = 下边框

![在此处输入图像描述](../Images/2cb17e8ee684c401a928d41413c70109.png)

```
 <TableLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:background="#000000" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:background="#FFFFFF" >

            <TextView
                android:id="@+id/txt6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/txt5"
                android:text="Hello World 6" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:background="#FFFFFF" >

            <TextView
                android:id="@+id/txt6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/txt5"
                android:text="Hello World 6" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:background="#FFFFFF" >

            <TextView
                android:id="@+id/txt6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/txt5"
                android:text="Hello World 6" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:background="#FFFFFF" >

            <TextView
                android:id="@+id/txt6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/txt5"
                android:text="Hello World 6" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:background="#FFFFFF" >

            <TextView
                android:id="@+id/txt6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/txt5"
                android:text="Hello World 6" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:background="#FFFFFF" >

            <TextView
                android:id="@+id/txt6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/txt5"
                android:text="Hello World 6" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:background="#FFFFFF" >

            <TextView
                android:id="@+id/txt6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/txt5"
                android:text="Hello World 6" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="2dp"
            android:background="#FFFFFF" >

            <TextView
                android:id="@+id/txt6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/txt5"
                android:text="Hello World 6" />
        </TableRow>
    </TableLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:07:15.660

根据您的情况使用 TableLayout

# android - 使用代码在 Gmail 中添加附件

> ID：13560781
> 
> 赞同：0
> 
> 时间：2012-11-26T07:59:37.480
> 
> 标签：android, email, attachment

我有使用 gmail 帐户发送电子邮件的工作代码，现在我只想使用没有用户交互的代码去附件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:02:28.887

```
public synchronized void sendMail(String subject, String body, String sender, String recipients, File attachment) throws Exception {
    try{
    MimeMessage message = new MimeMessage(session);
    message.setSender(new InternetAddress(sender));
    message.setSubject(subject);

    MimeBodyPart mbp1 = new MimeBodyPart();
    mbp1.setText(body);

    MimeBodyPart mbp2 = new MimeBodyPart();
    FileDataSource fds = new FileDataSource(attachment);
    mbp2.setDataHandler(new DataHandler(fds));
    mbp2.setFileName(fds.getName());

    Multipart mp = new MimeMultipart();
    mp.addBodyPart(mbp1);
    mp.addBodyPart(mbp2);

    message.setContent(mp);

    if (recipients.indexOf(',') > 0)
        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));
    else
        message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));
    Transport.send(message);
    }catch(Exception e){

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:10:45.563

如果您想从 SDCard 发送一些文件，请使用以下代码：

```
public static void email(Context context, String emailTo, String emailCC,
    String subject, String emailText, List<String> filePaths)
{
    //need to "send multiple" to get more than one attachment
    final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);
    emailIntent.setType("text/plain");
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, 
        new String[]{emailTo});
    emailIntent.putExtra(android.content.Intent.EXTRA_CC, 
        new String[]{emailCC});
    //has to be an ArrayList
    ArrayList<Uri> uris = new ArrayList<Uri>();
    //convert from paths to Android friendly Parcelable Uri's
    for (String file : filePaths)
    {
        File fileIn = new File(file);
        Uri u = Uri.fromFile(fileIn);
        uris.add(u);
    }
    emailIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);
    context.startActivity(Intent.createChooser(emailIntent, "Send mail..."));
} 
```

[用于发送带有附件的电子邮件的 Android Intent](https://stackoverflow.com/questions/6078099/android-intent-send-an-email-with-attachment)

[使用 Intent 的 Android 多个电子邮件附件](https://stackoverflow.com/questions/2264622/android-multiple-email-attachments-using-intent)

[尝试将文件从 SD 卡附加到电子邮件](https://stackoverflow.com/questions/587917/trying-to-attach-a-file-from-sd-card-to-email)

[http://www.anddev.org/code-snippets-for-android-f33/sending-email-with-attachment-using-intent-t11041.html](http://www.anddev.org/code-snippets-for-android-f33/sending-email-with-attachment-using-intent-t11041.html)

[http://www.toxicbakery.com/android-development/creating-emails-android/](http://www.toxicbakery.com/android-development/creating-emails-android/)

[http://android-geek.blogspot.be/2011/04/share-via-email-intent-image-attachment.html](http://android-geek.blogspot.be/2011/04/share-via-email-intent-image-attachment.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T08:11:00.840

我想您**没有**使用任何第三方库来发送邮件。

```
 Intent i = new Intent(Intent.ACTION_SEND);
        i.setType("image/jpg");
        i.putExtra(Intent.EXTRA_EMAIL, new String[] {"someone@gmail.com"} );
        i.putExtra(Intent.EXTRA_SUBJECT, "Subject");
        i.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:///mnt/sdcard/myImage.gif"));
        startActivity(i); 
```

# css - 如何减小 sencha 应用程序中所有组件的大小

> ID：13560782
> 
> 赞同：0
> 
> 时间：2012-11-26T07:59:40.360
> 
> 标签：css, extjs, sencha-touch, sencha-touch-2, sass

我正在开发 sencha android 移动应用程序，sencha 中的每个组件看起来都很大，字体也很大，我完成了我的应用程序，但最后我必须做造型。

**我必须使用 css 减小每个组件的大小，我该如何开始，我不太擅长 css，而且我也喜欢 sass。**

我需要看什么，我在css下面使用了。

```
 .btnfacebook {
    background: url(../images/facebook.png) !important;
    background-repeat: no-repeat !important;
}

.btnmyapp {
    background: url(../images/myapp.png) !important;
    background-repeat: no-repeat !important;
}
.btntwitter {
    background: url(../images/twitter.png) !important;
    background-repeat: no-repeat !important;
}
.my-dataview-item {
    background: #ddd;
    border-bottom: 1px solid #ccc;
}
.my-dataview-item img {
    width: 50px;
    height : 43px;
    float: left;
    margin-right: 1em;
}
.my-dataview-item #count {
    float: right;
    -webkit-border-radius: 9px;
    -moz-border-radius: 999px;
    border-radius: 999px;
    width: -4px;
    height: 25px;
    padding: 4px;
    background: #fff;
    border: 2px solid #666;
    color: #666;
    text-align: center;
    font: 14px Arial, sans-serif;
    margin-bottom: -4px;
}
.my-dataview-item #time {
    float: right;
    margin-right: 1em;
}
.x-list-item-label div{
    padding-left: 3px;  
}
#profilePhoto {
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
}
#profilePicture{
    background-repeat: no-repeat;
    background-size: contain;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:16:16.153

最好使用 sass，并生成这样的 css 文件。您可以设置默认字体大小（仅使用 1 行），其余大小根据该大小计算。

关于如何开始的一个很好的教程可以在这里找到：

[http://docs.sencha.com/touch/2-1/#!/guide/theming](http://docs.sencha.com/touch/2-1/#!/guide/theming)

# alfresco - 属性标记设置 false 不起作用

> ID：13560784
> 
> 赞同：0
> 
> 时间：2012-11-26T07:59:52.260
> 
> 标签：alfresco

`tokenised`我通过添加如下更改属性：

```
<property name="sci:doc">
 <type>d:text</type>
 <index enabled="true"> 
   <atomic>true</atomic> 
   <stored>false</stored> 
   <tokenised>false</tokenised> 
 </index>
</property> 
```

在完全重建索​​引并重新启动 alfresco 后，我使用 Lucene 在节点浏览器中搜索，如下所示：

```
PATH:"/app:company_home/app:guest_home/cm:mySpace/*" AND (@sci\:doc:'my doc') 
```

但是没有返回任何结果。我也试过了`(@sci\:doc:'my') OR (@sci\:doc:'doc')`。这一切都失败了。

我正在使用 3.4.d。我发现任何设置`<tokenised>`为 false 的属性都有这个问题：搜索总是不返回任何内容！

我在节点浏览器中尝试了 alfresco-fts 搜索，它适用于`tokenized`上面的属性，但我使用的是 Alfresco 网络服务，默认`QUERY_LANG_LUCENE`为`lucene`. 我无法切换到露天 fts。

知道如何解决这个问题吗？

# c - 我的小 c 程序崩溃了

> ID：13560785
> 
> 赞同：0
> 
> 时间：2012-11-26T07:59:54.070
> 
> 标签：c, string, crash

这是应该在字符串中找到最常见元素的程序。但是当我输入一个字符串时它会崩溃。

```
#include <stdio.h>
#include <conio.h>
#include <string.h>
int main(){
    char a[100];
    scanf("%s", a);
    int max=0,n,k;
    int urt = strlen(a);
    for(int i=0; i<urt-1; i++){
        n=0;
        for(int l=i+1; l<urt; l++){
            if(a[i]==a[l]) n++;
        }
        if(max<n){
            max=n; 
            k=i;
        }
    }
    printf("%s\n", a[k]);
    printf("%d", max);
    getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T08:05:55.363

> 错误：格式“%s”需要“char *”类型的参数，但参数 2 的类型为“int”</p>

这意味着您需要更改：

```
printf("%s\n", a[k]); 
```

到：

```
printf("%c\n", a[k]); 
```

因为`a[k]`不是字符串，而是字符。此外，为了获得更准确的输出，将 1 添加到 n 以考虑您正在扫描的字符（来自外循环）：

```
n=1; // instead of n=0; 
```

# java - 在哪里可以找到适用于 vlcj 2.1.0 的“libvlc”更新版本？

> ID：13560787
> 
> 赞同：1
> 
> 时间：2012-11-26T08:00:07.530
> 
> 标签：java, macos, runtimeexception, libvlc, vlcj

我正在尝试使用 vlcj 2.1.0 为 VLC 播放器的 Java 绑定编译代码，但出现错误：

线程 "AWT-EventQueue-0" java.lang.RuntimeException 中的异常：此版本的 vlcj 需要 2.0.0 或更高版本的 libvlc，发现 1.1.9 版本太旧了 Luggage。

我能为 MacOS 找到的唯一版本是“libvlc-1.1.9-macosx”

有任何想法吗？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:43:12.437

我在做这个关于使用绑定的教程时遇到了同样的问题：http: [//www.capricasoftware.co.uk/vlcj/tutorial2.php](http://www.capricasoftware.co.uk/vlcj/tutorial2.php)

我在 OSX 10.6.8 上的解决方案是启动 VLC 并更新到 2.0.3 版本。现在我正在运行版本 2.0.3 并指向 /Applications/VLC.app/Contents/MacOS/lib/ 并且绑定工作。请注意，更新到最新版本不起作用，因为它引入了一个单独的问题：[VLCJ not working on Mac - plugin libvlccore.5.dylib](https://stackoverflow.com/questions/13341080/vlcj-not-working-on-mac-plugin-libvlccore-5-dylib)。

# java - jar 文件被执行

> ID：13560789
> 
> 赞同：1
> 
> 时间：2012-11-26T08:00:13.080
> 
> 标签：java, eclipse, swing, executable-jar

我正在使用一个 jar 文件。我需要做的是将其组件之一添加到我的选项卡式窗格中的面板中。现在的问题是，当我将它的组件添加到我的 Jpanel 时，整个 jar 文件都会被执行（是的，它是一个可执行的 jar 文件）。有人可以帮我吗？这里有4个LOC

```
JComponent panel_exp = new JPanel();
MyClass exp = new MyClass();
panel_exp.add(exp);
tabbedPane.addTab("Experiment", panel_exp); 
```

但是当它编译时，MyClass jar 文件被执行，而不是我正在导入这个 jar 文件的项目。我正在使用 Eclipse IDE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:11:44.087

首先，看起来你并没有完全理解“executable jar”是什么意思，所以我将尝试解释一下。

可执行 jar 的概念与将 jar 作为依赖项导入项目无关。

“可执行jar”只是一个普通的jar，唯一的区别是它可以独立运行，借助

```
java -jar your_jar.jar 
```

因此，jar 在其 MANIFEST.MF 文件中有一个特殊条目，以便 java 可以确定在这种情况下应该运行哪个主类。而已。

现在，当您将 jar 导入 IDE 时，您与该 jar 的“可执行性”无关，只是没有考虑到它。

所以，问题可能出在你的 ide 配置中，你应该看看什么类被执行以及当你点击“播放”按钮时是如何执行的:)

要获得更深入的答案，您应该详细说明“整个 jar 被执行”的含义

希望这可以帮助

# delphi - 命令行 shell 中的参数

> ID：13560793
> 
> 赞同：3
> 
> 时间：2012-11-26T08:00:39.250
> 
> 标签：delphi, cmd

我在 CMD shell 中打开一个 .exe 文件，如下所示： **d:/program1.exe text1 text2 text3 text4 text5**
如何使用 text3 text4 text5 作为单个参数？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T08:10:07.147

您应该在包含空格的参数周围使用引号：

```
d:/program1.exe text1 text2 "text3 text4 text5"

```

当你像这样调用你的程序时，ParamStr(1) 是'text1'，ParamStr(2) 是'text2'，ParamStr(3) 是'text3 text4 text5'。

# grails - 单选按钮，真或假

> ID：13560798
> 
> 赞同：0
> 
> 时间：2012-11-26T08:01:16.183
> 
> 标签：grails, controller, radio-button, gsp

我刚刚遇到了一个关于如何使用单选按钮的问题。所以这是我的代码：在 GSP 中

```
 <g:each in="${Query1}">
 <label for="account_expired">Account Expired:</label><br />
          <input type="radio" name="acc_expired" value="${it.acc_exp}" checked="checked"> True
              <input type="radio" name="acc_expired" value="${it.acc_exp}"> False
<br />
</g:each> 
```

在我的控制器中：

```
if(params.username != null )
    {
    String updateQuery = "UPDATE sec_user SET account_locked='"+params.account_locked+"'  WHERE Username='"+params.username+"'"

    String queryname = "select * from sec_user where username = '"+params.username+"'"
    def Query1 = sql.rows(queryname)

    def update = sql.executeUpdate(updateQuery)

    [update:update, Query1:Query1]

    } 
```

所以，我想要做的是单选按钮如何检查哪些值转到哪个“已检查”单选按钮。因为我正在编辑页面，所以控制器将从数据库中检索信息并自动选择单选按钮，无论是“真”还是“假”。在这种情况下，它是“1”或“0”。那么有没有人可以帮助我解决这个问题？

非常感谢你们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T16:22:11.143

为了让您的视图正确地检查您想要的收音机，您需要在标签中添加一个表达式。另外我怀疑您不希望每个按钮都具有相同的值。我猜一个应该是真的，另一个应该是假的。

```
<input type="radio" name="acc_expired" value="${true}" ${it.acc_exp == true ? 'checked="checked"' : ''}> True
<input type="radio" name="acc_expired" value="${false}" ${it.acc_exp == false ? 'checked="checked"' : ''}> False 
```

PS。您可能需要查找 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:07:56.300

你能具体解释一下吗，但这可能对你有帮助[http://grails.org/doc/latest/ref/Tags/radioGroup.html](http://grails.org/doc/latest/ref/Tags/radioGroup.html)

```
boolean[] acc_expired= [] //in your controller 
```

并迭代此数组以获取其已检查或未检查的索引。

# visual-studio - Visual Source Safe 和 Visual Studio 2012

> ID：13560800
> 
> 赞同：2
> 
> 时间：2012-11-26T08:01:21.137
> 
> 标签：visual-studio, visual-sourcesafe

很抱歉这个愚蠢的问题，但是有没有机会将 vs2012 与 Source Safe 集成，如果是这样，我在哪里可以下载 Visual Studio 2012 的 Visual source safe。

谢谢。

# php - Apache URL 重写如何

> ID：13560801
> 
> 赞同：0
> 
> 时间：2012-11-26T08:01:21.220
> 
> 标签：php, apache, codeigniter, mod-rewrite, url-rewriting

我从来没有接触过正则表达式或 apache 重写的东西，但我为客户做了一个大型电子商务网站，他现在问我是否可以为他的商店重写 URL。我有两个我需要的东西，如果有人能告诉我是否有可能重写他想要的方式，那将是非常有帮助的。

产品详情网址目前为：product/details/3/royal-blue-choir-stole

他希望它只是... /royal-blue-choir-stole

第二个是类别页面。他们目前在

类别/视图/合唱团围巾

他希望他们只是 /choir-stoles

这可能吗？如果您想查看当前所做的工作，该站点的完整 URL 目前是[http://www.stoles.com/stoles （用户名 alex，密码 superman）。](http://www.stoles.com/stoles)它在codeigniter中编程。

目前，它进行了以下重写，以摆脱 codeigniter URL 中的 index.php ...

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:53:57.360

这是我真正感兴趣的事情。如果您的类别数量有限且不会经常更改，那么对类别路线进行硬编码似乎是合理的。

```
 $route['choir-stoles'] = "shop/choir-stoles"; 
```

否则，如果类别不断变化，或者如果您想以相同的方式制作产品，那么您将不得不搜索 url 中的任何值 - 这可能是任何值。那么我想知道的是-可能会发生什么样的预过滤，所以如果您收到类似的请求

```
 http://www.stoles.com/213as+dfjljWHATEVER 
```

它在进入数据库和控制器之前停止了。

**这种类型的过滤应该发生在路由中吗？**我们应该记录这些尝试吗？如果他们连续几次禁止IP？或者这是否过于偏执而不是一个问题？

现在的风格是把搜索价值推到一个词后面，比如“产品”、“类别”等，但更多的客户会要求短网址，想出一些最佳实践会很酷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:08:10.080

首先，类别 url 和产品详细信息 url 应该不同，可能是这样的：

```
product details  :   pd/royal-blue-choir-stole    
category         :   /choir-stoles 
```

但是，如果您想不使用前缀，则可以将 url 与您的产品标题或类别名称相匹配。例如：
您有一个名称为“Choir Stoles”的类别，产品名称为“royal blue choir stole”。
现在您可以在 htaccess 中使用这些代码行：

```
RewriteRule /([a-z\-]+)$ router.php?q=$1  [NC,L] 
```

然后您可以在 router.php 中获取 $_GET['q'] 并用空格替换“-”，在数据库中搜索并找出它是类别还是产品，然后从数据库中获取信息。
希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:08:27.880

对于产品 url（添加在 routes.php 中）（product/details/blah-blah-blah-blah）

将路线中的值更改为

```
$route['product/:any'] = "product/details";
product ->controller
details -> action 
```

对于类别 url (类别/视图/blah-blah)

```
$route['catagory/:any'] = "catagory/details";
    catagory ->controller
    details -> action 
```

[http://ellislab.com/codeigniter/user-guide/general/routing.html](http://ellislab.com/codeigniter/user-guide/general/routing.html)

# jquery - jquery.jscrollpane 问题。滚动条未加载

> ID：13560807
> 
> 赞同：1
> 
> 时间：2012-11-26T08:01:57.280
> 
> 标签：jquery, jscrollpane

在 WordPress 中建立一个网站，这有点奇怪。

该站点基本上使用高级下拉菜单来显示页面内容，而不是更改页面。

我想在每个下拉菜单中添加一个（样式）滚动条以适应所有内容。

我已经加载了 Jquery Scroll Pane 文件，我可以看到它开始为滚动条构建 div 和样式，但实际上并没有加载带有滚动条的 div。

[你可以在这里](http://boutiqueathome.co.uk/wp)看到它的作用

单击“时尚购物”选项卡。

应该存在的 .jspVerticalBar div ......不是。

我已经在标准的[WordPress 页面](http://boutiqueathome.co.uk/wp/scroll-test/)上尝试了我的代码，它运行良好。

谁能看到是什么阻止了它在菜单上的工作？

# php - 对自动完成数据进行分类

> ID：13560808
> 
> 赞同：0
> 
> 时间：2012-11-26T08:02:07.827
> 
> 标签：php, jquery, mysql

我在搜索文本框中使用了自动完成框。它对我来说正常工作......这是我的脚本..

```
<?php

require_once('database.php');

if(isset($_POST['queryString'])) {

    $queryString = $dbc->real_escape_string($_POST['queryString']);

    if(strlen($queryString) >0) {
        $q = "SELECT keyword 
                FROM (
                    SELECT tname AS keyword FROM t
                    UNION
                    SELECT sname AS keyword FROM sub
                    UNION
                    SELECT cname AS keyword FROM c
                    UNION
                    SELECT iname AS keyword FROM i
                ) s
              WHERE keyword LIKE '%$queryString%' 
              LIMIT 10";

        $r = mysqli_query ( $dbc, $q);

        if($q) {
            while ($row = mysqli_fetch_array($r, MYSQL_ASSOC)) {
                echo '<li onClick="fill(\''.$row['keyword'].'\');">'.$row['keyword'].'</li>';
            }
        } else {
            echo 'ERROR: There was a problem with the query.';
        }
    } else {

    }
} else {
    echo 'There should be no direct access to this script!';
}

?> 
```

问题是我的自动完成框显示主题、导师姓名、机构等相关关键字的所有结果。现在我想将它们分类在自动完成框中.. 例如：主题类别下的主题，导师类别下的导师姓名等......我想做的是类似于 facebook 搜索选项..

这是我的 jQuery：

```
<script type="text/javascript">

    function lookup(inputString) {

        if(inputString.length == 0) {
            $('#suggestions').hide();
        } else {
            $.post("rpc.php", {queryString: ""+inputString+""}, function(data){
                if(data.length >0) {
                    $('#suggestions').show();
                    $('#autoSuggestionsList').html(data);
                }
            });
        }
    }

    function fill(thisValue) {
        $('#inputString').val(thisValue);
        setTimeout("$('#suggestions').hide();", 200);
    }

</script> 
```

有人可以帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:14:35.997

使用搜索文本输入附近的下拉菜单选择类别或多个复选框以查看您必须创建的联合？我会推荐你​​狮身人面像[http://sphinxsearch.com/](http://sphinxsearch.com/)

尝试

```
SELECT 1 as type,tname AS keyword FROM t
                    UNION
                    SELECT 2 as type,sname AS keyword FROM sub
                    UNION
                    SELECT 3 as type,cname AS keyword FROM c
                    UNION
                    SELECT 4 as type,iname AS keyword FROM i

foreach($results as $result)
{
    switch($result['type'])
    {
        case 1:
        $cat_1[]=$result;
        break;

        case 2:
        $cat_2[]=$result;
        break;
    }

} 
```

# asp.net-mvc-3 - 使用数据库为 mvc3 剃须刀创建图表

> ID：13560817
> 
> 赞同：1
> 
> 时间：2012-11-26T08:02:28.040
> 
> 标签：asp.net-mvc-3, razor, charts

我是 asp.net mvc3 的新手，并且一直在阅读有关 MVC3 razor 图表的 stackoverflow 中的很多帖子。

但是，我无法为此创建图表。基本上这是我的 sql 查询

```
SELECT COUNT(RequestStatus) AS Expr1, RequestStatus
FROM Request
GROUP BY RequestStatus 
```

到目前为止，在我的控制视图中，这是我的代码：

```
public ActionResult RequestReport()
{ 
    var result = from p in db.Requests
                 group p by p.RequestStatus into pgroup
                 let count = pgroup.Count()
                 orderby count
                 select new { Count = count, RequestStatus = pgroup.Key }.ToString();

    var x = new [] {result};    

    Chart chart = new Chart(600, 400)
        .AddSeries(yValues: x , yFields:"Count")
    .AddTitle("Request Statistic");

    this.ViewBag.Chart = chart;      

    return View();
} 
```

并在视图中：

```
@ViewBag.Chart.Write() 
```

请帮我解决这个问题。我找不到一个简单的教程。

我对控制器中的代码进行了一些更改。

```
using (var db = new ITAMMVCDBEntities())
            {
                var rs = db.Requests.GroupBy(o=>o.RequestStatus).ToList();
                var result = from o in db.Requests
                             group o by o.RequestStatus
                                 into g
                                 select new
                                 {
                                     result = g.Count()
                                 };

            Chart chart = new Chart(600, 400)
                .AddSeries(
                        xValue: rs.Select(x=>x.Key).ToArray() ,
                        yValues: result.ToArray()
                      )
           .AddTitle("Request Statistic");

            this.ViewBag.Chart = chart;      

            return View();
        } 
```

现在我在运行时收到此错误消息

```
Series data points do not support values of type <>f__AnonymousType1`1[System.Int32] only values of these types can be used: Double, Decimal, Single, int, long, uint, ulong, String, DateTime, short, ushort. 
```

我认为我的 xValue 没问题，因为它按组显示，但问题 populationg yValue 将显示每个组的值

# api - 如何在 .net 中使用 wikipedia api 获取 Wikipedia 的事件（门户事件）数据？

> ID：13560822
> 
> 赞同：0
> 
> 时间：2012-11-26T08:03:03.163
> 
> 标签：api, events, wikipedia

我必须从维基百科获取事件。假设我输入巴西大奖赛，输出不应该是巴西大奖赛，但它应该是未来几天/几周举行的地方。我必须在 asp.net Web 应用程序上实现它。用户输入应该只是事件名称，他将得到 xml/json 格式的输出。请告诉我是否有人知道如何做到这一点？

我们可以在这里看到所有事件：[http ://en.wikipedia.org/wiki/Portal:Current_events](http://en.wikipedia.org/wiki/Portal:Current_events)

但我不知道如何以编程方式获取它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:22:30.750

我不完全确定，但在我看来，您希望获取名称格式为[Portal:Current events/2012 November 25](http://en.wikipedia.org/wiki/Portal%3aCurrent_events/2012_November_25)的页面列表，具体取决于您认为“当前”的确切内容。然后在每个页面的代码中搜索您想要的内容。如果匹配，则输出匹配的行。

获取页面代码的最简单方法可能是使用[`action=raw`](http://www.mediawiki.org/wiki/Manual%3aParameters_to_index.php#Raw). 另一种选择是使用[API](https://www.mediawiki.org/wiki/API)。

# objective-c - 在 ARC 下替换“self”

> ID：13560825
> 
> 赞同：0
> 
> 时间：2012-11-26T08:03:27.547
> 
> 标签：objective-c, ios, automatic-ref-counting, self

通常我从 xib 加载自定义视图的代码如下所示：

```
@implemenation MyCustomView

- (id)init
{
    [self release];

    if ((self = [[NSBundle loadViewFromXibName:@"MyCustomView" withClass:[MyCustomView class] owner:nil] retain]))
    {
        //some init here
    }

    return self;
} 
```

where `[NSBundle loadViewFromXibName:withClass:owner:]`- 返回 atoreleased 视图，从 xib 加载。

并且一切正常。但是当我尝试在 ARC 等效代码下编写时：

```
@implemenation MyCustomView

- (id)init
{
    if ((self = [NSBundle loadViewFromXibName:@"MyCustomView" withClass:[MyCustomView class] owner:nil]))
    {
        //some init here
    }

    return self;
} 
```

我的应用程序因 EX_BAD_ACCESS 崩溃（释放消息发送到已释放的实例）在这种情况下会发生什么？我该如何解决这个问题？

**已更新**此问题仅在 iOS6 SDK（iOS6 模拟器）上。在 iOS5 SDK 和 iOS 5 设备/模拟器上一切都很好。

**更新**这个问题只出现在表格视图单元格中，它在表格视图生命周期中被释放。我实现了静态单元生成器（从 xib 加载的返回单元）并将内部单元初始化移动到 awakeFromNib。现在一切正常。

我不明白为什么会出现这个问题——“self”是__strong，如果我给它分配任何对象，它就不能自动释放。我弄错了吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-26T08:34:31.387

我曾经做过这种模式，但在 ARC 之后，我试图通过覆盖来避免它`new`。我不知道为什么这会导致问题，但我猜测两件事之一：

1.  由于 Cocoa命名前缀， ARC 会`[self release]`为您正确处理。如果您从 nib（或其他地方）加载，您将不会得到相同的行为`self = [super init...]``init`
2.  如果您分配的东西`self`不是来自`[super init...]`，您将失去分配的内存`[MyCustomView alloc]`。

我倾向于认为是后者。如果您是从 nib 加载，我建议您在工厂方法中执行此操作，例如`new`，而不是 from `init`。

编辑：当你说这个问题出现在 iOS 6 上时，我很确定你遇到了我以前遇到的同样的问题。当我调试这个时，我什至在里面放了一个断点`dealloc`。您会看到每次调用时它都会停在那里一次`init`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T08:37:18.133

改用这个：

```
NSArray* nibViews = [[NSBundle mainBundle] loadNibNamed:@"MyCustomClass" owner:nil options:nil];
self = [nibViews objectAtIndex: 0]; 
```

//理想情况下，最好循环遍历该数组，检查哪个视图是您的类的成员并将 self 分配给它。

在你的 init 方法中。

希望这可以帮助。

干杯!

# java - Java Web 应用程序中 ActiveMQ 日志中的异常

> ID：13560827
> 
> 赞同：1
> 
> 时间：2012-11-26T08:03:31.837
> 
> 标签：java, jakarta-ee, jms, activemq

虽然我的系统没有出现任何错误或问题，但为什么我会在日志中收到此异常。[我试图从http://www.docjar.com/html/api/org/apache/activemq/thread/Scheduler.java.html](http://www.docjar.com/html/api/org/apache/activemq/thread/Scheduler.java.html)找出问题，我没有得到任何有用的东西。请帮助我。

我正在使用 java.util.Timer 来安排一组任务。

我的 Web 应用程序详细信息。

```
Web Server : Tomcat 5.5
JMS queue
ActiveMQ : 5 
```

异常跟踪：

```
Exception in thread "Thread-1" java.lang.NullPointerException
    at ecnet.core.util.ReloadableResourceBundle.checkAll(ReloadableResourceBundle.java:319)
    at ecnet.core.util.ReloadableResourceBundle$1.run(ReloadableResourceBundle.java:227)
    at java.lang.Thread.run(Unknown Source)
Exception in thread "InactivityMonitor WriteCheck" java.lang.NullPointerException
    at org.apache.activemq.transport.InactivityMonitor.writeCheck(InactivityMonitor.java:147)
    at org.apache.activemq.transport.InactivityMonitor$2.run(InactivityMonitor.java:113)
    at org.apache.activemq.thread.SchedulerTimerTask.run(SchedulerTimerTask.java:33)
    at java.util.TimerThread.mainLoop(Unknown Source)
    at java.util.TimerThread.run(Unknown Source)
perrrrrrrrrrrrrrrrrrrr    RED DRAGON PRIMARY 
```

# android - 退出后如何保存复选框的状态？

> ID：13560833
> 
> 赞同：0
> 
> 时间：2012-11-26T08:04:14.187
> 
> 标签：android, checkbox, sharedpreferences

在我的应用程序中，一个界面有一些复选框，我希望退出界面后，复选框应该保持状态。所以下次我进入它可以显示我上次做了什么。我曾经`SharedPreferrences`实现过这个。

```
checkbox1.setOnCheckedChangeListener(new OnCheckedChangeListener(){
    public void onCheckedChanged(CompoundButton arg0, boolean isChecked) {
// TODO Auto-generated method stub
Editor editor = getSharedPreferences("syllabus", 0).edit();
editor.putBoolean("cbx1_ischecked", isChecked);
editor.commit();
}
    });
checkbox2.setOnCheckedChangeListener(new OnCheckedChangeListener(){
    public void onCheckedChanged(CompoundButton arg0, boolean isChecked) {
    // TODO Auto-generated method stub
    Editor editor = getSharedPreferences("syllabus", 0).edit();
    editor.putBoolean("cbx2_ischecked", isChecked);
    editor.commit();
    }

}); 
```

但它不起作用。当我返回此页面时，所有复选框都显示“每个项目都未选中”的状态。

如何实现我想要的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T08:10:59.437

在放置日期 getSharedPreferences 之后，您必须在 onCreate 中使用此数据初始化您的 checkboz 状态，如下所示

// onCreate

```
SharedPreferences settings = getSharedPreferences("syllabus", 0);
Boolean isChecked = settings.getBoolean("cbx1_ischecked", false);
checkbox1.setChecked(isChecked ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:15:43.950

您的值保存到`SharedPreferences`，但这并不意味着它们会自动恢复到相应的复选框。正如@talhakosen 提到的，您需要在活动开始时阅读它们`SharedPreferences`并设置您的复选框。

此外，您不需要在每次更改时将值写入 SharedPreferences。当用户离开您的活动时存储它们就足够了，即在`onStop()`方法中。

# unix - 从目录中获取文件名，将其放入文件中，然后将其压缩 (UNIX)

> ID：13560836
> 
> 赞同：0
> 
> 时间：2012-11-26T08:04:52.377
> 
> 标签：unix, zip, pipe, io-redirection

好的 - 所以我今天一整天都在尝试看看这是否可能。

就我而言，我有一个缓存文件夹，其中包含 100 万个缓存文件（是的，它无法打开）。因此，对于内务管理，我想删除自 120 天以来未访问过的内容并记录删除的内容。设法用这一行清理了大约 200K 文件：

```
find thisfolder -name "pattern*" -type f -atime +120 -exec rm -f {} \; -fprint /home/myfolder/logs/deleted_cache.txt 2>&1 
```

但是，我最终得到了一个大约 50MB 的日志文件 (deleted_cache.txt)。这对管家没有任何好处。所以我想把它拉上拉链，希望我们能腾出更多空间。

阅读有关 I/O 重定向、管道和 zip 的信息；并且经过几次尝试，似乎不可能在一条线上完成。bash 脚本是唯一的方法吗？

请赐教。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:17:58.943

你可以使用这个命令：

```
find thisfolder -name "pattern*" -type f -atime +120 -delete -printf '%f\n' | gzip > deleted_cache.gz 
```

*   `-delete`删除文件
*   `-printf`将文件名打印到标准输出
*   `gzip`压缩标准输入

* * *

注意：我只在 Ubuntu 中测试它。

# mysql - SQL JOIN 2 条件

> ID：13560837
> 
> 赞同：2
> 
> 时间：2012-11-26T08:05:03.507
> 
> 标签：mysql, sql, tsql, join

我的 mysql 数据库中有两个表。表 1：喊话箱 表 2：用户

我的桌子看起来像这样

```
TABLE SHOUTBOX (id, name, title, user_id)

TABLE USERS (id, name, profile_image) 
```

> 我想做的是显示 SHOUTBOX 表中的所有内容，但条件必须是 USERS 表中的 profile_image = '2' 所以我试过这个：

```
SELECT shoutbox.id, shoutbox.name, shoutbox.title, shoutbox.user_id, user.profile_image
FROM shoutbox, users
WHERE users.profile_image = '2' 
```

我得到了非常错误的结果。所以我在这方面完全是新手，所以请帮忙=）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T08:06:29.540

您正在从两个表中获取笛卡尔积，因为您缺少链接两个表的非常重要的条件。`WHERE`在子句上添加此条件。

```
SELECT ... FROM ....
WHERE users.profile_image = '2' AND
      shoutbox.user_ID = users.id 
```

但我敦促你使用`SQL-92`语法

```
SELECT   shoutbox.id, 
         shoutbox.name,
         shoutbox.title, 
         shoutbox.user_id, 
         users.profile_image
FROM     shoutbox INNER JOIN users ON shoutbox.user_ID = users.id
WHERE    users.profile_image = '2' 
```

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T08:06:55.100

```
SELECT shoutbox.id, shoutbox.name, shoutbox.title, 
shoutbox.user_id, user.profile_image
FROM shoutbox
inner join users
on user_id= users.id
WHERE users.profile_image = '2' 
```

如果您是新手而不是获取有关联接的信息

已经回答的问题：[INNER JOIN、LEFT JOIN、RIGHT JOIN 和 FULL JOIN 有什么区别？](https://stackoverflow.com/questions/5706437/whats-the-difference-between-inner-join-left-join-right-join-full-join-in-mys/6188334#6188334)

![在此处输入图像描述](../Images/d226ca3a29c9a170e4acb1bb261764b1.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T08:07:26.297

```
SELECT shoutbox.id, 
       shoutbox.name, 
       shoutbox.title, 
       shoutbox.user_id, 
       user.profile_image
FROM shoutbox
join users
on shoutbox.user_id=users.id
WHERE users.profile_image = '2' 
```

# c# - 如何更改 CreationTime.ToShortDateString() 日期格式？

> ID：13560840
> 
> 赞同：0
> 
> 时间：2012-11-26T08:05:31.127
> 
> 标签：c#

代码行和输出：

```
fileInfo.CreationTime.ToShortDateString(); 
```

例如，输出就是**`11/19/2012`**这种格式**MM/dd/yyyy**。
如何将格式更改为**dd/MM/yyyy**？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T08:08:13.413

使用[ToString（字符串格式）](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)：

```
fileInfo.CreationTime.ToString("dd/MM/yyyy") 
```

# c# - 使用 SolidBrush 的 DrawLine 并不是真正的纯色

> ID：13560841
> 
> 赞同：0
> 
> 时间：2012-11-26T08:05:37.480
> 
> 标签：c#, graphics

这是我用 SolidBursh 画线的代码：

```
Brush aGradientBrush = new SolidBrush(Color.Black);
gdPrintImage.DrawLine(new Pen(aGradientBrush), 20, 20, 20, 100); 
```

但似乎这条线不是真正的纯色，请查看图片：

![在此处输入图像描述](../Images/9365b5997bd87430dac79cfe1741dc65.png)

颜色像渐变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:47:29.200

这条线是实心的，宽度为 1 像素。
您正在以 3000% 的放大倍率查看生成的图像，我假设它是一个图像查看器，它在缩放时应用图像插值。
在非插值图像查看器中查看生成的图像，您会看到它是实心的。

# regex - Yacc - 匹配函数的产生式

> ID：13560844
> 
> 赞同：1
> 
> 时间：2012-11-26T08:05:51.990
> 
> 标签：regex, compiler-construction, yacc

我正在使用 Yacc 编写编译器，但无法弄清楚如何编写产品来匹配函数。在我的语言中，函数是这样定义的：

```
function foo(a, b, c); 
```

我创建了 lex 模式以将单词 function 与 FUNC 匹配，并将任何 C 样式名称与 NAME 匹配。

理想情况下，我想要这样的东西：

```
FUNC NAME OBRACKET NAME (COMMA NAME)* CBRACKET 
```

这将允许在 NAME 和 CBRACKET 之间存在一些未知数量的 COMMA NAME 对。

另外，我怎么知道它找到了多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:41:14.307

你可以尝试这样的事情：

```
funcdecl: FUNC NAME OBRACKET arglist CBRACKET SEMI
;

arglist: nonemptyarglist
       |
;

nonemptyarglist: nonemptyarglist COMMA NAME
               | NAME
; 
```

我建议使用语法为您的语言构建语法树，然后在解析完成后对语法树执行任何您需要的操作。Bison 和 yacc 的特性使这变得相当简单。查找`%union`并`%type`在信息页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T12:54:08.483

经过一些实验，我发现这个效果很好：

```
int argCount;
int args[128];

arglist: nonemptyarglist
       |
        ;

nonemptyarglist: nonemptyarglist COMMA singleArgList
               | singleArgList
        {

        };

singleArgList:
            REGISTER
        {
            args[argCount++] = $1;
        }; 
```

# ffmpeg - 使用 FFMPEG 将 mp4 转换为最大支持移动设备的 MP4

> ID：13560852
> 
> 赞同：23
> 
> 时间：2012-11-26T08:06:10.217
> 
> 标签：ffmpeg, h.264

我想`ffmpeg`用来将一个转换`mp4`为“小尺寸” `mp4`......

我需要一个包含视频和音频的`mp4`文件（或低成本移动设备支持的其他一些设置）。我主要担心的是视频可以在大多数设备上播放。`h263``aac`

有什么可能的`ffmpeg`命令来完成这个？

提前致谢。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-27T09:22:56.020

编码 mp4 视频的方法有很多种，而为移动设备编码则更加复杂。我不确定您所说的“低成本移动”是什么意思，是指设备中的低成本，还是播放所述视频所需的带宽？

无论哪种方式，这里有一篇文章可以帮助您：[H.264 WEB VIDEO ENCODING TUTORIAL WITH FFMPEG](https://www.virag.si/2012/01/web-video-encoding-tutorial-with-ffmpeg-0-9/)

## 例子

以下是帖子中的一些`ffmpeg`示例...

> “标准”网络视频（480p，500kbit/s）：
> 
> **`ffmpeg -i input_file.avi -vcodec libx264 -vprofile high -preset slow -b:v 500k -maxrate 500k -bufsize 1000k -vf scale=-1:480 -threads 0 -acodec libvo_aacenc -b:a 128k output_file.mp4`**
> 
> 旧手机的 360p 视频（基线配置文件中 250kbit/s 的 360p 视频）：
> 
> **`ffmpeg -i inputfile.avi -vcodec libx264 -vprofile baseline -preset slow -b:v 250k -maxrate 250k -bufsize 500k -vf scale=-1:360 -threads 0 -acodec libvo_aacenc -ab 96k output.mp4`**
> 
> 适用于 iPad 和平板电脑的 480p 视频（主要配置文件中 480p，400kbit/s）：
> 
> **`ffmpeg -i inputfile.avi -vcodec libx264 -vprofile main -preset slow -b:v 400k -maxrate 400k -bufsize 800k -vf scale=-1:480 -threads 0 -acodec libvo_aacenc -ab 128k output.mp4`**
> 
> 用于存档/存储的高质量标清视频（PAL 在高配置中为 1Mbit/s）：
> 
> **`ffmpeg -i inputfile.avi -vcodec libx264 -vprofile high -preset slower -b:v 1000k -vf scale=-1:576 -threads 0 -acodec libvo_aacenc -ab 196k output.mp4`**

## 比特率、规模和配置文件...

从那里的示例中，您可能需要注意的一些关键事项是......

`-b:v 500k`

`-b:a 128k`

这些是视频`v`和音频的比特率，`a`数字越低质量越低，但它在低端设备上“播放”的效果就越好。

`scale=-1:480`

这会将视频缩小到更小的尺寸，请参阅帖子中的更多信息）

`-vprofile baseline`

在为某些低成本（例如 Android）设备进行编码时，这个看似奇怪的`baseline`（或另一个适当[的配置文件参数）可能很重要......](http://en.wikipedia.org/wiki/H.264#Profiles)

> **基线资料 (BP)**
> 
> 主要针对需要额外数据丢失鲁棒性的低成本应用程序，此配置文件用于一些视频会议和移动应用程序。此配置文件包括受约束的基线配置文件中支持的所有功能，以及可用于损失鲁棒性（或用于其他目的，例如低延迟多点视频流合成）的三个附加功能。自 2009 年约束基线配置文件定义以来，此配置文件的重要性已有所减弱。所有约束基线配置文件比特流也被视为基线配置文件比特流，因为这两个配置文件共享相同的配置文件标识符代码值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-03T12:56:45.603

```
 ffmpeg.exe -i "input.mp4" -vcodec mpeg4 -preset slower -b:v 1000k -vf "scale=640:480,setsar=1,fps=30,pad=640:480:0:0" -acodec aac -ac 2 -ar 22050 -ab 128k "output (480p).mp4" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T09:06:57.687

我找到了答案，无论如何感谢您的帮助。

```
ffmpeg -i $input_file -s $size $output_file 
```

$size : 320X400 或任何 WidthXHeight

# c++ - 如何将位图设置为 CHILD 窗口的背景 (WIN32)

> ID：13560854
> 
> 赞同：2
> 
> 时间：2012-11-26T08:06:11.053
> 
> 标签：c++, winapi, user-interface, bitmap, win32gui

首先这不是MFC。这是我一直在处理的 GUI 的裁剪版本：

## ![在此处输入图像描述](../Images/7d275c2b9f51fa70664fffa506c74457.png)

如您所见，选项卡控件上方有一个位图图像（它使用默认窗口的句柄），我将其称为“蓝色位图”我没有问题，它运行良好。我遇到的问题是**将**另一个位图（来自磁盘上的位图文件）设置为子窗口的背景（更具体地说是选项卡控件子窗口），替换灰色。以下是我**尝试**将位图设置为子窗口（选项卡）的背景的一些事情。

1) 我使用了与将蓝色位图分配给窗口相同的方法，首先使用 LoadImage 导入位图，如下所示：

```
index->hbmBitmapBanner = (HBITMAP)LoadImage(index->hInstance,L"Images\\horizontal.bmp",IMAGE_BITMAP,0,0,LR_LOADFROMFILE); 
```

然后在 WM_PAINT 消息中：

```
 case WM_PAINT:
    {
        PAINTSTRUCT ps1;
        if (BeginPaint(WINDOWHANDLE,&ps1))
        {
            HDC hdcBanner = CreateCompatibleDC(ps1.hdc);
            HBITMAP hbmOldHorizontal = (HBITMAP)SelectObject(hdcBanner,index->hbmBitmapBanner); // banner
            BitBlt(ps1.hdc,0,0,516,101,hdcBanner,5,0,SRCCOPY);
            SelectObject(hdcBanner,hbmOldHorizontal);
            DeleteDC(hdcBanner);
            EndPaint(WINDOWHANDLE,&ps1);
        }
        break;
    } 
```

该代码成功地将蓝色位图设置到窗口中，但没有成功地将另一个位图设置到窗口中（当然，蓝色位图的变量被替换，大小和方向也发生了变化）。它根本没有在屏幕上显示位图，窗口保持不变，但**没有任何**功能失败。**另外**，当我交换文件位置时，它会将位图加载到蓝色位图所在的位置，因此加载功能肯定没有失败。

2) 使用上面的代码，我尝试将BeginPaint的第一个参数改成选项卡控件框的窗口句柄，再次证明没有用，窗口保持不变。我还尝试将 BeginPaint 的第一个参数更改为显示在信息选项卡上的子窗口，这导致子窗口（它是一个组框）消失，但窗口上仍然没有出现位图。

3）作为最后的手段，我愚蠢地试图在子窗口上使用这个功能

```
SetClassLongPtr(tab->hTabIndex[0],GCLP_HBRBACKGROUND,(DWORD)GetStockObject(BLACK_BRUSH)); 
```

当然，它没有用

* * *

如果它有任何用处，以下是我在窗口中创建选项卡的方式：

```
TCITEM tie = {0};     
tab->hTab = CreateWindowEx(0,WC_TABCONTROL,L"",WS_CHILD | WS_VISIBLE,0,101,600,400,                    
        WINDOWHANDLE,NULL,(HINSTANCE)GetWindowLong(WINDOWHANDLE,GWLP_HINSTANCE),NULL   
    ); 
```

是主选项卡控件，后面依次插入单个选项卡（即信息选项卡）

```
 TCHAR pszTab1 [] = L"Information";  // tab1's text 
tie.pszText = pszTab1;  // the tab's text/caption
TabCtrl_InsertItem(tab->hTab, 0, &tie); // insert the tab 
```

附加信息：除此之外，选项卡控件和窗口正在**完美地**工作/交互。我只在一个选项卡上测试/尝试这个，因为我知道它是否在一个选项卡上工作，那么它将在所有选项卡上工作，从而节省时间。

我有我旁边的 Charles Petzold 编写的 Programming For Windows Fifth Edition 作为参考，并且有相当大的部分关于位图，但他没有谈论将位图加载到子窗口，他得到的最接近的是使用菜单中的位图，与窗口完全不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T11:42:32.083

我认为这里的问题是 Windows 公共控件不通过主线程的窗口过程与您的应用程序交互，而是通过它们自己的（系统定义的）窗口过程。

因此，例如，当您的选项卡窗口重绘自身时，它不会响应到达代码中定义的窗口过程的 WM_PAINT 消息。您应该能够通过检查传递给您的窗口过程的消息的窗口句柄（例如 WM_PAINT）来验证自己是否如此。

如果您希望“利用”公共控件的默认行为，则必须对其进行“子类化”（参见[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773183%28v=vs.85%29.aspx)），但根据我的经验，尝试更改重绘行为通常是有问题的。

在选项卡控件的情况下，最好的办法是创建一个大小与选项卡控件的客户区大小一致的子窗口数组，并安排在任何时候显示的窗口对应于选定的选项卡。

如果您使用 C++，您可能会考虑创建一个基类来包装这些处理​​背景（位图）绘图的窗口。然后，您可以派生一系列包装器来处理每个单独的选项卡。我过去就使用过这种方法并且效果很好。

记住选项卡控件的选项卡并不延伸到整个控件的客户区，而只是字面上的选项卡本身，这可能会有所帮助。我不记得细节，但我认为它们是由控件在内部处理的，并且以任何方式操作它们都是相当诡计的，即使控件是子类化的——这可能是错误的。

希望有帮助。

干杯，伊恩。

# javascript - 通过 JavaScript 在客户端上使用 BSON

> ID：13560863
> 
> 赞同：3
> 
> 时间：2012-11-26T08:06:51.477
> 
> 标签：javascript, json, bson

对于金融系统，我需要使用轻量级和快速的协议，通过推送服务器（例如 Socket.IO）将数据从服务器传输到客户端

如您所知，使用 BSON 打包和解包也比使用原生 JSON 需要更多时间，并且可能本身成为瓶颈。

我想知道，这是使用 BSON 而不是 JSON 来传输数据以减小消息大小的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T08:17:55.193

> 我想知道，这是使用 BSON 而不是 JSON 来传输数据以减小消息大小的正确方法吗？

这取决于应用程序。如果它是基于浏览器的应用程序，那么答案是**否定**的。主要是因为基于浏览器的 javascript（还）不具备处理二进制数据的能力。有一些建议，比如类型化数组，如果真的有必要，可以在某种程度上做到这一点，但即使是目前的规范也只是“草稿”。更不用说 IE 不支持它。

对于基于浏览器的应用程序，减小数据包大小的标准方法是使用 gzip 之类的压缩。这可以在您的服务器上进行配置，也可以在您的 Web 应用程序中完成。

对于非基于浏览器的应用程序，答案**取决于它**。像 MongoDB 这样的项目在 BSON 上取得了巨大的成功。另一方面，仅使用 JSON+压缩，整个 Web 就运行良好。最好的答案是让您自己对其进行基准测试，看看它是否适合您的情况。

# c# - 将数据从 excel 导入 sql server C# 应用程序

> ID：13560864
> 
> 赞同：0
> 
> 时间：2012-11-26T08:06:53.127
> 
> 标签：c#, sql-server, winforms, sql-server-2008

我正在使用 sql server 2008。我有一个数据库“CustomerManagement”和一个表“Customer”，如下所示：

```
CustomerID    |    Name    |    Money
1             | Paul       | 300
2             | Mary       | 250
3             | David      | 
4             | May        | 
5             | Ann        | 
```

我有一个excel文件，其中一些数据如下：

```
CustomerID    |    Money
3             | 100
4             | 150
5             | 175 
```

如何根据CustomerID将excel文件中的“Money”插入到sql server？

我正在使用 winform C# 和 MS Excel 2010

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:24:48.257

从 Excel 中检索要插入到 sql 数据库的所有数据，然后将其循环并插入到 sql server。

[检索数据](http://www.codeproject.com/Questions/412468/Excel-csharp-net-retrieving-data-without-opening-e)

[插入到 SQL 数据库](http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/91bd10ce-c83b-4766-920b-2137ddc29908)

# c# - XAML 绑定到不可变结构

> ID：13560872
> 
> 赞同：2
> 
> 时间：2012-11-26T08:07:35.287
> 
> 标签：c#, xaml, data-binding, windows-8

我的 Windows 8 应用程序中有一些[DownloadOperation](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.backgroundtransfer.downloadoperation)。DownloadOperation 有一个`Progress`包含`Status`,`TotalBytesToReceive`和的属性`BytesReceived`。我试图将数据绑定到我的 XAML 标记中的那些，但我遇到了[一些错误](http://pastebin.com/Uus5VTpJ)。然后我发现不可能绑定到[BackgroundDownlodProgress](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.backgroundtransfer.backgrounddownloadprogress)是的结构。我在网上找到的唯一解决方案是使结构可变，这对我来说是不可能的，因为它不是我的代码。

我试图将 DownloadOperation 包装到一个 Wrapper 类中，该类具有 DownloadOperation.Progress.Status、DownloadOperation.Progress.BytesReceived 和 DownloadOperation.Progress.TotalBytesToReceive 的类属性。

我必须通知系统属性更改才能更新 UI 中的值，通常这是在属性的 setter 方法中完成的。我没有设置器，因为底层结构是只读的。

如何创建与系统定义的不可变结构的 XAML 绑定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T08:20:39.877

DownloadOperation 有一个名为 " `AttachAsync`" 的方法，它返回一个 " `IAsyncOperationWithProgress<DownloadOperation, DownloadOperation>`" 类型的对象。您可以使用此返回值添加处理进度事件的方法。每次调用此进度方法时，您都可以通知您的 UI 进度属性已更改。它应该如下所示：

```
var operationWithProgress = download.AttachAsync();
operationWithProgress.Progress = (asyncInfo, progressInfo) => {
    //send notify property changed events
} 
```

免责声明：我没有尝试使用此解决方案运行程序，我只是在搜索文档。如果您对此解决方案有任何问题，请发表评论。

# cuda - 对于小型数据集，为什么使用 cula(dgesv) 求解线性方程组比 mkl (dgesv) 慢

> ID：13560883
> 
> 赞同：0
> 
> 时间：2012-11-26T08:08:28.970
> 
> 标签：cuda, gpgpu, intel-mkl, cula

我编写了一个 CUDA C 和 C 程序来求解矩阵方程 Ax=b 使用 CULA 例程 dgesv 和 MKL 例程 dgesv。似乎对于一个小数据集，CPU 程序比 GPU 程序快。但是随着数据集增加到超过 500，GPU 克服了 CPU。我正在使用我的戴尔笔记本电脑，它有 i3 CPU 和 Geforce 525M GPU。GPU最初性能缓慢的最佳解释是什么？

我写了另一个程序，它接受两个向量，将它们相乘并相加。这就像点积一样，只是结果是向量和而不是标量。在这个程序中，即使对于小数据集，GPU 也比 CPU 快。我正在使用同一个笔记本。为什么与上面解释的相比，即使对于小数据集，该程序中的 GPU 也更快？是不是因为求和涉及的计算量不多？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T23:12:26.797

与大型数据集相比，GPU 在小型数据集上的兴趣并不鲜见。其原因会因具体算法而异。GPU 通常具有比 CPU 更高的主内存带宽，并且通常在重型数字运算方面也可以胜过它们。但是 GPU 通常只有在问题中存在固有的并行性时才能很好地工作，这可能会暴露出来。利用这种并行性，算法可以利用更大的内存带宽以及更高的计算能力。

然而，在 GPU 可以做任何事情之前，有必要将数据获取到 GPU。这对 GPU 版本的代码产生了“成本”，而这通常不会出现在 CPU 版本中。

更准确地说，当 GPU 上计算时间的减少（超过 CPU）超过数据传输的成本时，GPU 将提供好处。我相信求解线性方程组的复杂度介于 O(n^2) 和 O(n^3) 之间。对于非常小的 n，这种计算复杂度可能不足以抵消数据传输的成本。但显然随着 n 变大它应该。另一方面，您的向量运算可能只有 O(n) 复杂度。因此，收益情况看起来会有所不同。

对于 O(n^2) 或 O(n^3) 的情况，随着我们移动到更大的数据集，传输数据的“成本”随着 O(n) 的增加而增加，但解决方案的计算需求随着 O( n^2) （或 O(n^3)）。因此，更大的数据集应该具有*指数级*更大的计算工作负载，从而降低数据传输“成本”的影响。另一方面，O(n) 问题可能不会有这种缩放动态。工作量的增加速度与数据传输的“成本”相同。

另请注意，如果将数据传输到 GPU 的“成本”可以通过将其与计算工作重叠来隐藏，那么重叠部分的“成本”将变为“免费”，即它不会影响整体求解时间。

# linux - EC2 上最新的 linux 内核是什么？

> ID：13560886
> 
> 赞同：1
> 
> 时间：2012-11-26T08:08:33.103
> 
> 标签：linux, amazon-ec2, linux-kernel

ec2 上最新的 linux 内核是什么？我想在 EC2 上找到的最新内核上进行一些测试。

你知道 EC2 上最新的 linux 内核是什么，我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:22:56.477

目前是Amazons Linux ami 2012.09[版本中的3.2.30](http://aws.amazon.com/amazon-linux-ami/2012.09-packages/)

查看此页面 [http://aws.amazon.com/en/amazon-linux-ami/](http://aws.amazon.com/en/amazon-linux-ami/)

如果您启动一个新实例，这是用于特定实例类型的默认 ami。

机器启动后运行

```
sudo yum upgrade --assumeyes && sudo init 6 
```

确保您获得最新的补丁

**编辑：**

当前更新带来了 3.2 内核版本 3.2.34 rev 55

```
===================================================================================
 Package              Arch        Version                 Repository          Size
===================================================================================
Installing:
 kernel               x86_64      3.2.34-55.46.amzn1      amzn-updates       9.1 M 
```

# mysql - 选择一个数字范围

> ID：13560894
> 
> 赞同：0
> 
> 时间：2012-11-26T08:09:40.617
> 
> 标签：mysql, sql

询问：

```
SELECT nummer
   FROM tabell_med_nummer
  WHERE SUBSTR(nummer, -1) = 0 
```

此查询在表 tabell_med_nummer 中选择一个以“0”结尾的数字。例如，它将选择 1000、1010、1020，但不会选择 1001、1002 等。

我需要基于此获得一个范围。例如 1000-1100 或 1010-1023。范围的大小是可变的。它以什么结尾并不重要，但它必须选择一个以“0”结尾的数字，例如1010。

棘手的部分是表中并非每个数字都存在。因此，如果表中不存在 1004，则结束我需要 100 的范围，它不能从 1000 开始。

有谁知道我该如何解决这个问题？

按照要求：

```
 +----+-------------+-------+-------+-------------------------------+---------------+---------+------+------+---------------------------------+
| id | select_type | table | type  | possible_keys                 | key           | key_len | ref  | rows | Extra                           |
+----+-------------+-------+-------+-------------------------------+---------------+---------+------+------+---------------------------------+
|  1 | SIMPLE      | f     | ALL   | NULL                          | NULL          | NULL    | NULL |   19 | Using temporary; Using filesort |
|  1 | SIMPLE      | t2    | index | telefonnummer,telefonnummer_2 | telefonnummer | 5       | NULL | 1001 | Using index; Using join buffer  |
|  1 | SIMPLE      | p     | ALL   | NULL                          | NULL          | NULL    | NULL | 4568 | Using where; Using join buffer  |
|  1 | SIMPLE      | t3    | index | telefonnummer,telefonnummer_2 | telefonnummer | 5       | NULL | 1001 | Using index; Using join buffer  |
|  1 | SIMPLE      | t1    | ALL   | telefonnummer,telefonnummer_2 | NULL          | NULL    | NULL | 1001 | Using where; Using join buffer  |
+----+-------------+-------+-------+-------------------------------+---------------+---------+------+------+---------------------------------+
5 rows in set (0.00 sec) 
```

我更改了一些表和字段名称，并添加了一些连接和 where 语句：

```
SELECT t1.telefonnummer start, t2.telefonnummer end, t1.kundenummer kundenummer, t1.fornavn fornavn, t1.etternavn etternavn, t1.bedriftsnavn bedriftsnavn, t1.organisasjonsnummer organisasjonsnummer, t1.partnerID partnerID

FROM TELEFONNUMMERTILDELING t1

JOIN TELEFONNUMMERTILDELING t2
ON t1.telefonnummer % 10 = 0
AND t1.telefonnummer <= t2.telefonnummer

JOIN TELEFONNUMMERTILDELING t3
ON t3.telefonnummer BETWEEN t1.telefonnummer AND t2.telefonnummer

JOIN TELEFONNUMMERTILDELING_POSTNUMMER p
ON p.postnummer = 4085

JOIN TELEFONNUMMERTILDELING_FYLKE f
ON f.ID = p.fylkeID GROUP BY start, end

HAVING end - start + 1 = COUNT(*)
AND end - start + 1 = 50
AND (kundenummer IS NULL OR kundenummer = '')
AND (fornavn IS NULL OR fornavn = '')
AND (etternavn IS NULL OR etternavn = '')
AND (bedriftsnavn IS NULL OR bedriftsnavn = '')
AND (organisasjonsnummer IS NULL OR organisasjonsnummer = '')
AND partnerID = 1001 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:29:07.210

```
-- get the start and end points
SELECT   t1.nummer AS start, t2.nummer AS end

-- pair every possible start number with every potential end number
FROM     tabell_med_nummer t1
    JOIN tabell_med_nummer t2
      ON t1.nummer % 10 = 0 AND t1.nummer <= t2.nummer

-- obtain every number in between
    JOIN tabell_med_nummer t3
      ON t3.nummer BETWEEN t1.nummer AND t2.nummer

-- group into potential ranges
GROUP BY start, end

-- now limit only to contiguous ranges
  HAVING end - start + 1 = COUNT(*)

-- and those that contain the desired number of records
     AND end - start + 1 = ? 
```

如果`nummer`不能保证是唯一的，例如带有`UNIQUE`约束，那么您将需要替换`COUNT(*)`为性能较差的`COUNT(DISTINCT t3.nummer)`或者替换`t3`为`(SELECT DISTINCT nummer FROM tabell_med_nummer)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:11:13.370

`WHERE`在您的子句中添加另一个条件。

```
 SELECT nummer
   FROM tabell_med_nummer
  WHERE SUBSTR(nummer, -1) = 0 AND
        nummer BETWEEN 1000 AND 1100 
```

# c# - 带有可替换物品的键控系列

> ID：13560898
> 
> 赞同：5
> 
> 时间：2012-11-26T08:09:56.697
> 
> 标签：c#, collections

到目前为止，我一直在使用 KeyedCollection 创建一个大型对象集合（接近 100 万个），每个对象都有一个 uint ID 字段作为集合的键。这很好，但是现在我在扩展功能时遇到了一个问题：我有“覆盖”记录，需要用新项目替换具有相同键的任何现有项目。平均而言，可能会覆盖 20 条记录中的 1 条，甚至可能会覆盖同一条记录的多次。

如有必要，我不介意从 KeyedCollection 重构。我最好的选择是什么？字典<>? ids 不是连续的，所以直接索引就出来了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-12T22:03:55.920

这是一个老问题，我以前自己也使用过现有的答案。但是在再次使用 KeyedCollection<> 时，我意识到 Remove-and-then-Add 技术的效率低于我现在实施的技术。问题是 Remove() 方法线性搜索列表，然后将列表的其余部分向左移动一个条目。我在这里介绍的技术也线性搜索列表，但至少它避免了移动列表的其余部分。

注意。这仅适用于替换项目与要替换的项目具有相同密钥的情况。

```
 /// <summary>
   /// Derived (but still abstract) version of KeyedCollection{} to provide a couple of extra 
   /// services, in particular AddOrReplace() and Replace() methods.
   /// </summary>
   public abstract class KeyedList<TKey, TItem> : KeyedCollection<TKey, TItem>
   {
      /// <summary>
      /// Property to provide access to the "hidden" List{} in the base class.
      /// </summary>
      public List<TItem> BaseList
      {
         get { return base.Items as List<TItem>; }
      }

      /// <summary>
      /// Method to add a new object to the collection, or to replace an existing one if there is 
      /// already an object with the same key in the collection.
      /// </summary>
      public void AddOrReplace(TItem newObject)
      {
         int i = GetItemIndex(newObject);
         if (i != -1)
            base.SetItem(i, newObject);
         else
            base.Add(newObject);
      }

      /// <summary>
      /// Method to replace an existing object in the collection, i.e., an object with the same key. 
      /// An exception is thrown if there is no existing object with the same key.
      /// </summary>
      public void Replace(TItem newObject)
      {
         int i = GetItemIndex(newObject);
         if (i != -1)
            base.SetItem(i, newObject);
         else
            throw new Exception("Object to be replaced not found in collection.");
      }

      /// <summary>
      /// Method to get the index into the List{} in the base collection for an item that may or may 
      /// not be in the collection. Returns -1 if not found.
      /// </summary>
      private int GetItemIndex(TItem itemToFind)
      {
         TKey keyToFind = GetKeyForItem(itemToFind);
         return BaseList.FindIndex((TItem existingItem) => 
                                   GetKeyForItem(existingItem).Equals(keyToFind));
      }
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T08:27:40.283

与`Dictionary`您应该从集合中删除该项目一样，更改/替换它并再次添加它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-28T16:57:21.253

我使用以下类作为可更新的键控集合。它仅适用于引用类型。

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using JetBrains.Annotations;

namespace Fiftytwo
{
    [PublicAPI]
    public abstract class UpdatableKeyedCollection<TKey, TValue> : KeyedCollection<TKey, TValue> where TValue : class
    {
        public List<TValue> ItemList => ( List<TValue> )Items;

        public bool AddOrUpdate ( [NotNull] TValue item )
        {
            int i, count = Count;
            if( count == 0 )
            {
                Add( item );
                return true;
            }

            List<TValue> list;

            TKey key = GetKeyForItem( item );
            var dict = Dictionary;
            IEqualityComparer<TKey> comparer;
            if( dict == null )
            {
                comparer = Comparer;
                list = ( List<TValue> )Items;
                for ( i = 0; i < count; ++i )
                {
                    if( comparer.Equals( GetKeyForItem( list[i] ), key ) )
                    {
                        list[i] = item;
                        return false;
                    }
                }
                Add( item );
                return true;
            }

            if( dict.TryGetValue( key, out TValue obj ) )
            {
                if( obj == item )
                    return false;

                comparer = Comparer;
                list = ( List<TValue> )Items;
                for ( i = 0; i < count; ++i )
                {
                    if( comparer.Equals( GetKeyForItem( list[i] ), key ) )
                    {
                        list[i] = item;
                        dict[key] = item;
                        return false;
                    }
                }

                throw new KeyNotFoundException(
                    $"Key {key} does not exist in the internal list but exists in the internal lookup dictionary." );
            }

            Add( item );
            return true;
        }

        [NotNull] public TValue GetOrAddNew ( [NotNull] TKey key, [NotNull] Func<TKey, TValue> createNew )
        {
            TValue value;

            int count = Count;
            if( count == 0 )
            {
                value = createNew( key );
                Add( value );
                return value;
            }

            var dict = Dictionary;
            if( dict == null )
            {
                var comparer = Comparer;
                var list = ( List<TValue> )Items;
                for ( int i = 0; i < count; ++i )
                {
                    if( comparer.Equals( GetKeyForItem( list[i] ), key ) )
                        return list[i];
                }
                value = createNew( key );
                Add( value );
                return value;
            }

            if( dict.TryGetValue( key, out value ) )
                return value;

            value = createNew( key );
            Add( value );
            return value;
        }
    }
} 
```

# android - Eclipse 未检测到与其连接的移动设备。

> ID：13560902
> 
> 赞同：2
> 
> 时间：2012-11-26T08:10:17.137
> 
> 标签：android, eclipse

我想在设备中运行我的 android 项目。我的设备未在 Eclipse 中检测到。当我在 Eclipse 中使用 USB 电缆连接时。我重新启动了 Eclipse，并检查了设备上的 USB 调试。任何人都可以告诉什么是问题以及如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:19:09.377

导致此问题的主要问题可能是，

*   检查设备是否开启了USB调试模式。
*   是否安装了设备驱动程序。
*   可能某些设备驱动程序需要更新。

为了解决这些问题，

*   USB 调试选项可以在**Settings > Applications > Development**访问。

*   要安装设备驱动程序，请转到**设备管理器->USB 设备->更新驱动程序**。

# html - Internet Explorer 上的文本旋转

> ID：13560906
> 
> 赞同：6
> 
> 时间：2012-11-26T08:10:38.283
> 
> 标签：html, css

> **可能重复：**
> [IE 中的 CSS 旋转属性](https://stackoverflow.com/questions/4617220/css-rotate-property-in-ie)

任何人都可以在这里帮助旋转 IE-8、IE -7 版本上的文本。它正在 Chome、firefox、IE-9 上运行，但在 IE-8、IE-7 上没有任何结果。

```
<a href="#" class="beta_home">BETA</a>

css
a.beta_home{
  position: absolute;
  text-decoration: none;
  top: 12px;
  right:0;
  margin-left: 0px;
  font-size: 9px;
  color:red;
  border: 1px solid #fff; 
  display: block; 
    -webkit-transform: rotate(-90deg);  
    -moz-transform: rotate(-90deg);  
    -ms-transform: rotate(-90deg);  
    -o-transform: rotate(-90deg);  
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T08:16:10.330

我不喜欢在任何浏览器中这样做，因为它们都呈现非常不同的..但你可以用 javascript 来做

**文档** [http://code.google.com/p/jquery-rotate/](http://code.google.com/p/jquery-rotate/)

**命令** $('#theimage').rotateRight(45); $('#theimage').rotateLeft();

这将在 IE 9、chrome、firefox、opera 和 safari 中呈现相同的内容，因为它使用画布对象而不是通过浏览器呈现来转换文本

它将使用 ie8、7 和 6 的旧编码在[此处生成](http://www.useragentman.com/IETransformsTranslator/)

```
/* IE8+ - must be on one line, unfortunately */ 
-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=1, M12=-0.1763269807084645, M21=0, M22=1, SizingMethod='auto expand')";
/* IE6 and 7 */ 
filter: progid:DXImageTransform.Microsoft.Matrix( M11=1, M12=-0.1763269807084645, M21=0, M22=1, SizingMethod='auto expand'); 
```

**工作前**

IE 7&8 测试 了[Fiddle](http://jsfiddle.net/S8848/6/)（chrome 中的边距需要不同，其他浏览器无法说明原因，但确实如此）

如果您不知道如何通过不同的浏览器区分 css，请参阅此[链接](http://css-tricks.com/resolution-specific-stylesheets/)

**我的意见**

除此之外，我建议您使用 Photoshop 将其制作为图片（已经旋转），或者如果您无法访问此类程序，请免费使用（[GIMP](http://www.gimp.org/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:13:44.393

```
/* IE8+ - must be on one line, unfortunately */ 
-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=1, M12=-0.1763269807084645, M21=0, M22=1, SizingMethod='auto expand')";
/* IE6 and 7 */ 
filter: progid:DXImageTransform.Microsoft.Matrix( M11=1, M12=-0.1763269807084645, M21=0, M22=1, SizingMethod='auto expand');

/* For IE6 and 7 */
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:50:55.740

尝试使用此在线服务：

[http://www.useragentman.com/IETransformsTranslator/](http://www.useragentman.com/IETransformsTranslator/)

它转换 css3 规则

```
rotate(-90deg) 
```

适用`div`于`WIDTH: 220px; HEIGHT: 70px;`

到 IE 特定规则：

```
/*
 * The following two rules are for IE only and
 * should be wrapped in conditional comments.
 * The -ms-filter rule should be on one line 
 * and always *before* the filter rule if
 * used in the same rule.
 */

#transformedObject {

   /* IE8+ - must be on one line, unfortunately */ 
   -ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=3.061515884555943e-16, M12=1, M21=-1, M22=3.061515884555943e-16, SizingMethod='auto expand')";

   /* IE6 and 7 */ 
   filter: progid:DXImageTransform.Microsoft.Matrix(
            M11=3.061515884555943e-16,
            M12=1,
            M21=-1,
            M22=3.061515884555943e-16,
            SizingMethod='auto expand');

   /*
    * To make the transform-origin be the middle of
    * the object.    Note: These numbers
    * are approximations.  For more accurate results,
    * use Internet Explorer with this tool.
    */
   margin-left: 71px; 
   margin-top: -78px;

} 
```

# javafx - 使用 install4j 捆绑 javafx

> ID：13560913
> 
> 赞同：5
> 
> 时间：2012-11-26T08:11:03.710
> 
> 标签：javafx, install4j

我想将 javafx 2.1 与我的 install4j 安装程序捆绑在一起，我知道我可以根据特定的 .dll 和 .jar 文件手动实现这一点。但是我想以与捆绑 JRE 时相同的简单方式执行此操作，有没有办法做到这一点？如果没有，这个功能会很快（或根本没有）可用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T09:05:28.653

可在 install4j IDE 中下载的预制 Java 7 JRE 包已经包含 JavaFX，因此您无需执行任何操作。

从 install4j 8.x 开始，您可以选择 Liberica JDK 提供程序来获取适用于 Java 8 和 Java 9+ 的 JavaFX。

# java - 项目移植到 android 和源代码管理

> ID：13560914
> 
> 赞同：2
> 
> 时间：2012-11-26T08:11:10.170
> 
> 标签：java, android, version-control, porting

我们正在尝试将现有的 java 应用程序移植到 android，并想知道管理源代码的最佳实践是什么。

我们已经将我们的大项目分解为几个不可知的项目，但我们仍然有一个大的单体项目。对于那些小框架，我们不应该做太多工作，但大框架需要一些重写。

目前，一位开发人员正在将我们的应用程序移植到 Android，但其他开发人员继续在非 Android 项目上开发新功能。移植完成后，我们将不得不将所有修改重新合并到 android 代码库中，这将是一个真正的痛苦。所以我的问题是：我们应该如何管理我们的代码源？我们应该为每个平台创建一个特定的存储库吗？我们是否应该将两个代码库保留在同一个存储库中但指向不同的分支以便更容易合并？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T08:27:34.467

这可能不是源管理问题。尝试创建一个抽象的移植层。它应该抽象出使您的应用程序运行所需的所有 API。然后在 SWT 下使用 SWT API 实现该移植层，在 Android 下使用 Android API 实现相同的层。

可以想象：

```
public interface ISoundEngine {
void startSound();
void stopSoud();
} 
```

应用程序的其余部分使用 startSound/stopSound 来操作引擎。

那么在windows下你实现

```
public WindowsSoundEngine implements ISoundEngine {
...
} 
```

在你实现的 Android 下

```
public AndroidSoundEngine implements ISoundEngine {
...
} 
```

在每种情况下都使用特定于 Windows 和特定于 Android 的低级 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:08:26.923

我看到的唯一好的解决方案是将所有常用代码移至库，您可以独立开发。然后为 Swing UI、Android UI 等创建项目。如果您的逻辑仍然需要一些特定于平台的服务（用于数据存储、通知，即），请使用 Alex 的方法在客户端调用公共库时传递正确的库。

# c++ - 数组的字符串转换的段错误

> ID：13560916
> 
> 赞同：2
> 
> 时间：2012-11-26T08:11:13.133
> 
> 标签：c++, segmentation-fault

作为 Accelerated C++ 问题 12.1 的一部分，我正在实现一个字符串类。主要是这个构造函数：

```
Str(const char* cp) {
    std::copy(cp, cp+std::strlen(cp), std::back_inserter(*this));
} 
```

这似乎在`back_inserter`调用时引起了问题`push_back`：

```
void Str::push_back( const char& c){
    if ((data + length) == limit){
        grow();
    }
    unchecked_append(c);
} 
```

这似乎在调用`grow()`但在执行任何`grow()`.

```
void Str::grow()
{
    // when growing, allocate twice as much space as currently in use
    size_type new_size = std::max(2 * (limit - data), ptrdiff_t(1));
    // allocate new space and copy existing elements to the new space
    iterator new_data = alloc.allocate(new_size);
    iterator new_avail = std::uninitialized_copy(data, (data+length), new_data);

    // return the old space
    uncreate();
    // reset pointers to point to the newly allocated space
    data = new_data;
    limit = data + new_size;
} 
```

具体来说，它会导致 Windows 说“Str.exe 已停止工作”，并导致 Ubuntu 仅报告分段错误。

这是我的完整代码：

```
#ifndef _GUARD_STR_H
#define _GUARD_STR_H

#include <ctype.h>
#include <memory>
#include <iterator>
#include <iostream>
#include <cstddef>
#include <cstring>

class Str {
    friend std::istream& operator>>(std::istream&, Str&);
    public:
        typedef size_t size_type;
        typedef char * iterator;
        typedef const char * const_iterator;
        typedef char& reference;
        typedef const char& const_reference;
        typedef char value_type;

        Str& operator+=(const Str& s){
            std::copy(s.begin(), s.end(),
            std::back_inserter(*this));
            return *this;
        }

        // default constructor; create an empty Str
        Str() { create();}

        // create a Str containing n copies of c
        Str(size_type n, char c){ }

        iterator end() { return data + length; }
        iterator begin() { return data; }
        const_iterator end() const { return data + length; }
        const_iterator begin() const { return data; }

        // create a Str from a null-terminated array of char
        Str(const char* cp) {
            std::copy(cp, cp+std::strlen(cp), std::back_inserter(*this));
        }

        template<class In> Str(In i, In j) {
            std::copy(i, j, std::back_inserter(data));
        }

        std::allocator<char> alloc;

        void push_back( const char&);

        char& operator[](size_type i) { return data[i]; }
        const char& operator[](size_type i) const { return data[i]; }
        size_type size() const { return length; }

    private:
        iterator data;
        size_t length;
        iterator limit;
        void create();
        void create(size_type, char);
        void grow();
        void unchecked_append(const char& c);
        void uncreate();
};

void Str::push_back( const char& c){
    if ((data + length) == limit){
        grow();
    }
    unchecked_append(c);
}

void Str::unchecked_append(const char & val)
{
    alloc.construct((data+(length++)), val);
}

void Str::uncreate()
{
    if (data) {
        // destroy (in reverse order) the elements that were constructed
        iterator it = (data + length);
        while (it != data)
            alloc.destroy(--it);

        // return all the space that was allocated
        alloc.deallocate(data, limit - data);
    }

    // reset pointers to indicate that the Vec is empty again
    data = limit = 0;
}

void Str::create(){
    data = limit = 0;
}

void Str::create(size_type n, char c){
    data = alloc.allocate(n);
    std::uninitialized_fill(data, data + n, c);
}

void Str::grow()
{
    // when growing, allocate twice as much space as currently in use
    size_type new_size = std::max(2 * (limit - data), ptrdiff_t(1));
    // allocate new space and copy existing elements to the new space
    iterator new_data = alloc.allocate(new_size);
    iterator new_avail = std::uninitialized_copy(data, (data+length), new_data);

    // return the old space
    uncreate();
    // reset pointers to point to the newly allocated space
    data = new_data;
    limit = data + new_size;
}

std::ostream& operator<<(std::ostream&, const Str&);
Str operator+(const Str&, const Str&);

std::ostream& operator<<(std::ostream& os, const Str& s)
{
    for (Str::size_type i = 0; i != s.size(); ++i)
        os << s[i];
    return os;
}

std::istream& operator>>(std::istream& is, Str& s)
{
    char c;
    while (is.get(c)){
        s.push_back(c);
    }
    return is;
}

Str operator+(const Str& s,  const Str& t)
{
    Str r = s;
    r += t;
    return r;
}

#endif 
```

是什么导致了分段错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:19:12.627

您似乎没有在`length`任何地方进行初始化。

# javascript - JavaScript 内部知识 101：函数和函数

> ID：13560918
> 
> 赞同：0
> 
> 时间：2012-11-26T08:11:25.530
> 
> 标签：javascript

```
>>> function () {}
SyntaxError

>>> f = function() {}
f = function() {}

>>> new function() {}
>>> Object

>>> new Function()
function anonymous() {}

>>> Function()
function anonymous() {}

>>> f = (function() { a = 10; return function() {console.log(a);} })();
>>> f()
10
undefined

>>> f = (function() { a = 10; return new Function('console.log(a)'); })();
>>> f()
undefined 
```

因此，我有两个问题：

1.  为什么`Function`即使没有运算符，构造函数也会返回一个新函数`new`？

2.  用构造函数创建的`Function`函数不是闭包吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T08:17:20.413

> 为什么即使没有 new 运算符，Function 构造函数也会返回一个新函数？

[调用`Function()`与调用相同`new Function()`](http://es5.github.com/#x15.3.1)：

> 当`Function`作为函数而不是构造函数调用时，它会创建并初始化一个新的 Function 对象。因此，函数调用`Function(…)`等效于`new Function(…)`具有相同参数的对象创建表达式。

* * *

> 使用 Function 构造函数创建的函数不是闭包吗？

是的，函数的范围设置为全局环境，而不是词法环境的范围。参见[http://es5.github.com/#x15.3.2.1](http://es5.github.com/#x15.3.2.1)，第 11 步：

> 11\. 返回一个按照 13.2 中指定的方法创建的新 Function 对象，将*P*作为*FormalParameterList*并将*body*作为*FunctionBody*。将 Global Environment 作为*Scope*参数传入，并将*strict*作为*Strict*标志。

这意味着使用`Function`构造函数就好像您在全局范围内声明了一个函数，关于它可以访问的范围（而不是关于函数在哪里可见）。

这与使用函数声明/表达式不同，其中范围基于当前执行上下文（[http://es5.github.com/#x13](http://es5.github.com/#x13)）：

> 1.  让*funcEnv*成为调用 NewDeclarativeEnvironment 的结果，传递运行执行上下文的词法环境作为参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:21:48.777

`Function`是用于实现`function`s 的对象，它们在语义上是相同的底层对象。

但是，a`function`与它们所属的脚本同时`Function`被解析，而 body 是在实例化时解析的，这可以解释为什么你的 js 解释器的行为会有所不同。

看到[那里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function)了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T08:16:52.487

1、函数可以返回对象，所以`Function()`返回一个并不荒谬。如果你想使用它，我会仔细检查文档，因为它很不寻常，它可能不适用于所有浏览器。

2、正确。

# python - UTF8 编码错误

> ID：13560920
> 
> 赞同：0
> 
> 时间：2012-11-26T08:11:33.220
> 
> 标签：python, unicode

我有一些需要导入的外部数据。如何将输入字符串编码为 un​​icode/utf8？

这是探测线的示例

> >>>'Compa\xf1\xeda Dominicana de Tel\xe9fonos, C. por A. - CODETEL'.encode("utf8")
> Traceback（最近一次调用最后）：
> 文件“”，第 1 行，在
> UnicodeDecodeError: 'ascii ' 编解码器无法解码位置 5 中的字节 0xf1：序数不在范围内（128）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T08:15:24.967

要将字节转换为 Unicode 字符串，请使用`decode`而不是`encode`.

这也不是UTF-8。我猜它是[Latin-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)：

> >>> print 'Compa\xf1\xeda Dominicana de Tel\xe9fonos, C. por A. - CODETEL'.decode("latin1")
> Compañía Dominicana de Teléfonos, C. por A. - CODETEL

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T08:15:52.343

`.encode("utf8")`期望源是一个 unicode 字符串。您将它与默认情况下具有“ascii”编码的“常规”字符串一起使用。您应该执行以下操作：

`original_string.decode('original_encoding').encode('utf-8')`

在你的情况下，我的猜测是：

```
'Compa\xf1\xeda Dominicana de Tel\xe9fonos, C. por A. - CODETEL'.decode("iso8859-1").encode("utf8") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T08:15:59.327

`encode`从 unicode 字符串转换为字节序列。 `decode`从字节序列转换为 unicode 字符串。您想要`decode`，因为您的数据已经编码。

更一般地说，如果您从外部源读取字符串，您*总是*想要解码，因为世界上没有“unicode 字符串”这样的东西。只有各种编码中的 unicode 字符串表示。Unicode 字符串就像柏拉图式的理想，只能通过有形的编码媒介来传输。

# c++ - 调试多边形逼近算法代码 C++

> ID：13560922
> 
> 赞同：0
> 
> 时间：2012-11-26T08:11:56.207
> 
> 标签：c++, algorithm, debugging, opengl, polygon

我想知道您是否可以帮助我调试我的一些代码。我已经为一个我们正在实现多边形逼近算法的类项目编写了以下代码。但我似乎无法让代码做我想做的事情。这是该算法的维基文章的链接：[http ://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)

我遇到的问题是第二个数组 closedStack 要么没有正确更新内部的值，要么没有正确显示。但是第一个数组，即从文件中读取的数组正确显示。我还不断收到已满的 closedStack 错误，因此我将 if 语句更改为不使用 fileSize 变量，因此它也可能存在问题。如果您需要我解释任何逻辑或变量等，请询问，我会解释。

```
#include "math.h"
#include <iostream>
#include <fstream>
#include "glut.h"

using namespace std;

struct point{
    int x, y;
};

void display(void);
void fileRead();
void oPush(point);
void cPush(point);
point oPop();
int deviation();

point pixel[2000];
int fileSize = 0;
int errorAllowed= 5;
int errorDeviation=0;
int oTop = 0;
int cTop = 0;
point first;
point last;
point openStack[5000];
point closedStack[5000];
int V1 = 0;
int V2 = 0;

void main(int argc, char **argv){

    fileRead();

    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(500,500);
    glutInitWindowPosition(75,75);
    glutCreateWindow("Ramer's Iterative Algorithm");
    glutDisplayFunc(display);
    gluOrtho2D(0,500,0,500);

    fileSize = fileSize/2;

    int tmp1 = pixel[0].x+pixel[0].y;
    int tmp2 = 0;

    for(int i = 0; i<2000; i++){
        tmp2 = pixel[i].x+pixel[i].y;

        if(tmp2 < tmp1){
            tmp1 = tmp2;
            V1 = i;
        }
    }

    for(int i = 0; i<2000; i++){
        tmp2 = pixel[i].x+pixel[i].y;

        if(tmp2 > tmp1){
            tmp1 = tmp2;
            V2 = i;
        }
    }

    oPush(pixel[V1]);
    oPush(pixel[V2]);
    oPush(pixel[V1]);

    do{
        first = oPop();
        last = oPop();

        int Mid = deviation();

        if(errorDeviation>errorAllowed){
            oPush(last);
            oPush(pixel[Mid]);
            oPush(first);
        }

        else if(errorDeviation<=errorAllowed){
            oPush(last);
            cPush(first);
        }

    }while(oTop>=2);

    glutMainLoop();

    cin >> V1;

}

void display(void){
    glClearColor(0,0,0,0);
    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(1,1,1);

    glBegin(GL_POINTS);
    for(int i=0; i<2000; i++)
        glVertex2i(pixel[i].x,pixel[i].y);
    glEnd();

    glColor3f(1,0,0);
    glBegin(GL_LINE_STRIP);
    for(int i=0;i<=cTop; i++)
        glVertex2i(closedStack[i].x,closedStack[i].y);
    glEnd();

    glFlush();
}

void fileRead(){
    char fileName[20];

    cout << "Enter the name of the file you would like to parse data from: ";
    cin >> fileName;

    ifstream boundary;
    boundary.open(fileName);
    if(boundary.fail()){
        cout << "Could not open '" << fileName << "' for reading.\n";
        exit(0);
    }

    for(int i=0; !boundary.eof(); i++){
        boundary >> pixel[i].x;
        boundary >> pixel[i].y;
        fileSize ++;
    }

}

void oPush(point p){
    if(oTop>fileSize){
        cout << "Full Stack--Open\n";
        exit(0);
    }

    else{
        oTop++;
        openStack[oTop]= p;
    }
}

void cPush(point p){
    if(cTop>10000){
        cout << "Full Stack--Closed\n";
        exit(0);
    }

    else{
        cTop++;
        closedStack[cTop]= p;
    }
}

point oPop(){
    point temp;

    if(oTop<=0){
        cout << "Stack Empty\n";
        exit(0);
    }

    else{
        temp = pixel[oTop];
        oTop--;
    }
    return temp;
}

int deviation(){
    float y = last.y-first.y;
    float x = last.x-first.x;
    float theta = atan(y/x);
    int most = 0;

    for(int i = V1+1; i < V2; i++){
        float ped = (-(pixel[i].x-first.x)*sin(theta))+((pixel[i].y-last.y)*cos(theta));
        float errDev= abs(ped);

        if(errDev>most)
            most = i;
        errorDeviation = (int)errDev;
    }

    return most;
} 
```

为了详细说明 V1 和 V2，它们应该是数组的左下角和右上角。检查我的循环已简化为：

```
for(int i = 0; i<fileSize; i++){
tmp2 = (pixel[i].x)+(pixel[i].y);

if(tmp2 <= tmp1){
    tmp1 = tmp2;
    V1 = i;
}

if(tmp2 >= tmp1){
    tmp1 = tmp2;
    V2 = i;
} 
```

循环将点的 x+y 加在一起，然后将其与前一个点进行检查以更新它。x+y 最低的点最终应该是 V1，最高的点应该是 V2。但我认为循环运行不正常。通过放大绘制的内容，显示循环的第二部分只有三个点。它看起来像初始数组的第一个和第二个点以及 0,0 被绘制。不知道为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:45:50.893

就目前而言，您的问题实在是太宽泛了。您需要尝试自己缩小范围。这是一个很好的清单： http: [//msmvps.com/blogs/jon_skeet/archive/2012/11/24/stack-overflow-question-checklist.aspx](http://msmvps.com/blogs/jon_skeet/archive/2012/11/24/stack-overflow-question-checklist.aspx)

您不会通过尝试一次性编写完整的工作程序来解决您的问题。视觉输出是无价的，但它不能代替实际点列表的文本输出。您的问题和评论表明您只是通过查看最终的视觉输出来尝试调试它。您需要将其分解为更小的部分，并查看每个步骤之间的数据，以便您了解您的程序与您的预期不同的地方。

正如您所说的“第二个数组， closedStack 要么没有正确更新内部的值，要么没有正确显示”。解决这个问题的第一步是找出这些情况中的哪一个！数组是否有错误的值，或者显示不正确？您可以通过打印中间值并将它们与手动解决问题时的期望值进行比较来发现这一点。如果输入太大，请创建一组较小的输入点，您可以手动处理。一旦你缩小了范围，你会发现你可以自己解决问题，或者你有一个更集中的问题要问，这会得到更好的答案。

* * *

从粗略的检查来看，我猜：

1.  您似乎误解了输入。你没有描述它是什么。如果它是形成[分段线性曲线](http://en.wikipedia.org/wiki/Polygonal_chain)的点序列，那么不清楚为什么选择最西南和最东北的元素会有所帮助（假设东是+ve x 和北+ve y） . 如果它是一堆点，那么您需要做的不仅仅是挑出角落以使其余部分以有意义的顺序排列。
2.  您的函数似乎`deviation()`假设 index *first*小于 index *last*。但似乎没有什么可以保证这一点。首先，也许 V1 比 V2 具有更大的索引。即使没有，您也可以使用 [V1, V2, V1] 填充初始堆栈，保证`deviation()`将看到输入 where `first`> `last`。虽然我当然不会保证 没有任何问题`deviation()`，但我的猜测是您输入的内容存在问题。

# emacs - 如何在 gud 中关闭 *input/output* 缓冲区

> ID：13560933
> 
> 赞同：20
> 
> 时间：2012-11-26T08:13:36.403
> 
> 标签：emacs, gdb, gud

我最近从 23 切换到使用 GNU Emacs 24，我注意到每当我输入 gud 时，*输入/输出*缓冲区都是打开的。每次调试时，我都会使用 Cx 0 手动关闭它。谁能指出我需要配置的正确变量才能默认停止显示此缓冲区？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T22:49:33.797

在新的 emacs 版本中有一个“gud-gdb”，它实现了 gdb/emacs 交互的旧行为（没有专用窗口和 I/O 缓冲区）。如果你不想在使用时调用 Mx gud-gdb，你可以为 Mx gdb 定义一个别名

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-29T08:06:48.580

我也有这个问题。快速查看源代码后，问题似乎是 GUD 专用于它的大部分窗口（即，它调用`set-window-dedicated-p`它们）。专用窗口是无法切换的窗口。我猜越来越多的年轻枪手在多窗口模式下使用 GUD 并希望 GUD 管理他们的窗口布局，而我们这些喜欢手动操作的人是少数。gdb-mi.el 中似乎没有任何明显的东西可以禁用此行为（例如，`gdb-set-window-buffer`似乎总是对它管理的所有窗口执行操作`set-window-dedicated-p`）`t`。

目前，[这个解决方案](https://stackoverflow.com/a/65992)或多或少是我正在使用的解决方案——我手动停用了窗口专用。不过，这似乎并不理想。应该有一些方法可以让 GUD 让您手动管理窗口布局。[这个问题是相关的。](https://stackoverflow.com/questions/812192/emacs-preventing-gud-pdb-from-controlling-windows)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-16T23:33:13.180

您可以像这样完全禁用窗口专用：（在 Emacs 24.4+ 中）

```
(defun set-window-undedicated-p (window flag)
 "Never set window dedicated."
 flag)

(advice-add 'set-window-dedicated-p :override #'set-window-undedicated-p) 
```

请注意，这不会影响已经专用的窗口。

# java - EJB3 Mappings/onetomany/manytoone如何处理关系

> ID：13560941
> 
> 赞同：1
> 
> 时间：2012-11-26T08:14:15.437
> 
> 标签：java, database, jakarta-ee, jpa, ejb-3.0

我正在使用 Java EE JSP/EJB3，但在实现表之间的关系时遇到问题。最初我正在考虑存储 id，但我读过它会破坏 EJB 存储对对象的引用的目的

作为解释我的问题的测试示例，我想出了一个汽车模型和汽车品牌关系。在此 Web 应用程序中，用户首先创建品牌。然后创建汽车并从下拉列表中选择品牌。

Car ->rand：多对一 Brand->Car：一对多

```
public class Brand implements Serializable {
  private static final long serialVersionUID = 1L;

  @Id
  @GeneratedValue(strategy=GenerationType.AUTO)
  @Column(name="id")
  private long id;

  @Column(name="brand_name")
  private String brand_name;

  @Column(name="cars_fk")
  private Set<Car> cars;
...

} 
```

以下是汽车Entitybean

```
public class Car implements Serializable {
  private static final long serialVersionUID = 1L;

  @Id
  @GeneratedValue(strategy=GenerationType.AUTO)
  @Column(name="id")
  private long id;

  private Brand brand;

  @ManyToOne(fetch = FetchType.LAZY)
  @Column(name="brand_FK")
  private Brand brand;
...

} 
```

鉴于以上是正确的（我不确定）

处理这些输入的最佳做法是什么

可以说我有这个html（如果选择必须不同，请告诉）

```
<form action="processCar.jsp">
  Model: <input type="text" name="title"><br>

  <select>
    <option value="volvo">Volvo</option>
    <option value="saab">Saab</option>
    <option value="mercedes">Mercedes</option>
    <option value="audi">Audi</option>
  </select> 

  <input type="submit" value="Submit">
</form> 
```

品牌选项从 Brand.findAll 加载。

此外，如果这是正确的，从品牌名称/id 到实体对象 Brand 的转换是在哪里完成的？在会话 bean 中？

```
public void createCar(String title,String brandname){
   Query query = em.createNamedQuery("Brand.getBrandbyName");
   query.setParameter("brand_name", brandname);
   Brand brand = (Brand)query.getSingleResult();
   carSLSBManagement.create(title,brand);
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:30:45.117

通常的做法是使用 ID 作为下拉列表中的值，然后在接收请求的代码中尽快将其转换为对象。那将是一个 servlet 或等价物，而不是一个 bean。bean 应该与已经获取的对象一起工作。

如果您有品牌的 ID，那么获取它就像这样简单：

```
long brandId = Long.parseLong(request.getParameter("brandId"));
Brand brand = em.find(Brand.class, brandId); 
```

我要补充一点，虽然我的偏好是在 web 层中完成所有参数的解析和解码，但在进入领域层之前，出于技术原因，可能更方便您将其中的一些向下推入领域层。例如，您应该在执行 时打开一个事务`em.find`，并且如果您使用带有 servlet 和 EJB 的经典 Java EE 架构，那么事务自然会从 EJB 开始，而 servlet 是非事务性的。为了适应这种情况，您可以在 servlet 中将 ID 解析为 long，但在 EJB 中获取对象。这有点笨拙，但这确实意味着你不必搞乱交易。

# c++ - 使用 longjmp 的 C++ 和 C 库

> ID：13560945
> 
> 赞同：5
> 
> 时间：2012-11-26T08:14:36.730
> 
> 标签：c++, lua, setjmp

我正在使用 Lua，它有一个 C API，它的错误引发函数使用 longjmps。当引发错误时，我首先构建一条消息来描述发生了什么问题，然后告诉 Lua 引发错误。例如

```
std::stringstream ss;
ss << "'" << function->cb->name << "' expects at most " << maxargs_all  
<< " argument(s) and received " << nargs;
luaL_error(L, ss.str().c_str()); 
```

我的理解是 longjmp 不会展开堆栈，因此我的`stringstream`对象不会被破坏。如果我没记错的话，`stringstream`其他 C++ 库类通常会在堆上分配数据，当对象被销毁时会释放这些数据。但是，这里不会调用析构函数，所以我认为这会导致内存泄漏。根据编写脚本的人，我可能会引发很多错误，从而泄漏大量内存。

我确信其他人需要解决与此类似的问题，但我找不到任何我所追求的东西。很多地方说对象不会被破坏，但我认为必须有一种方法来确保内存被释放？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T08:19:23.317

解决方案是将 Lua 编译为 C++ 库。然后`luaL_error()`将抛出异常而不是调用`longjmp()`，并且所有内容都将被堆栈展开销毁。

# java - 我想使用 Java 连接到 SQL Server，请找到下面的代码，我得到了下面给出的异常“错误消息”

> ID：13560948
> 
> 赞同：0
> 
> 时间：2012-11-26T08:15:21.230
> 
> 标签：java, sql-server-2008

```
String dburl="jdbc:sqlserver://209.18.103.198:1433;CreditDB_V2";
  //Connecting to Database
 Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
 Connection con=java.sql.DriverManager.getConnection(dburl,"700User","cred!tUser");
 Thread.sleep(20000);
 if (con!=null)
   {
    System.out.println("Database Connected Successfully");
    Statement stmt=con.createStatement();
    ResultSet rss=stmt.executeQuery("update User_LogDetail set LoginTime=(GETDATE()-   
        35), StatusId = 401 where UserId in(select userid from user_detail where UserName 
        in('sahooxml','gopal','psahoo7'))");
 Thread.sleep(30000);
  while (rss.next()) {
    Object dbtime = rss.getString(1);
    System.out.println(dbtime);
   } //end while
 con.close();
 }
 else
  {
    System.out.println("Database Failed to connect");
  } 
```

错误信息：

```
Exception in thread "main" java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at Login700.LoginTest(Login700.java:26)
    at Login700.main(Login700.java:242) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T08:16:23.733

包含“com.microsoft.sqlserver.jdbc.SQLServerDriver”类的 jar 文件必须在您的类路径中。

# java - R语言奇怪的行为

> ID：13560954
> 
> 赞同：1
> 
> 时间：2012-11-26T08:15:48.400
> 
> 标签：java, r, rcaller

我正在使用一些 R 代码来使用模型 BG-NBD 实现我正在使用 Java 并使用 RCaller 调用 R。我必须承认我对 R 真的很陌生，所以也许我做错了什么。我使用此 URL 上的代码：[http](http://code.google.com/p/clv-master-thesis/) ://code.google.com/p/clv-master-thesis/ 这是我的工作 Java 代码（一个简单的 Junit 测试）：

```
@Test
public void testRCaller(){
try {
RCaller caller = new RCaller();
caller.setRscriptExecutable("/usr/bin/Rscript");
caller.cleanRCode();
RCode code = new RCode();
code.clear();
String helper = "/dati/helper.R";
String modelNbd = "/dati/model-nbd.R";
String modelParetoNbd = "/dati/model-pareto-nbd.R";
String modelBgNbd = "/dati/model-bg-nbd.R";
String modelCbgCnbd = "/dati/model-cbg-cnbd-k.R";
code.R_source(helper);
code.R_source(modelNbd);
code.R_source(modelParetoNbd);
code.R_source(modelBgNbd);
code.R_source(modelCbgCnbd);
code.addRCode("cdData <- read.table(\"/dati/cdnow.csv\", head=T)");
code.addRCode("names(cdData)[2] <- \"x\";");
code.addRCode("bgMleFit <- bgEstimateParameters(cdData, list(r=1, alpha=2, a=1, b=2));");
code.addRCode("summary(bgMleFit);");
code.addRCode("cdBgParams <- as.list(coef(bgMleFit));");
code.addRCode("t <- 39;");
code.addRCode("cdBgCe <- bgConditionalForecast(cdData, cdBgParams, t);");
code.addRCode("(cdBgSumEstimate <- sum(cdBgCe));");
code.addRCode("(cdBgMsle <- mean((log(cdData$p2x+1)-log(cdBgCe+1))^2));");
code.addRCode("(corr <- cor(cdData$p2x, cdBgCe));");
caller.setRCode(code);
caller.runAndReturnResult("cdBgCe");
ROutputParser parser = caller.getParser();
ArrayList<String> nomi = parser.getNames();
for (String nome : nomi) {
double[] previsioni = parser.getAsDoubleArray(nome);
logger.info("Nome "+nome+" lunghezza valori "+previsioni.length);
for (int i = 0; i < previsioni.length; i++) {
logger.info("Valore "+ previsioni[i]);
}
}
} catch (Exception e) {
logger.error(e.getMessage(), e);
}
} 
```

通过运行这段代码，一切都很好；现在我不想使用 csv 文件作为数据源；我想查询数据库并将数据传递给 R 据我所知，R read.table 函数通过读取提供的 csv 文件构建一个 data.frame。所以我所做的是：我使用 Java 来读取 csv 并编写了这段代码（在我读取了 csv 文件之后，为了简洁起见，我没有编写与 csv 读取相关的代码）：

```
@Test
public void testRCaller(){
try {
RCaller caller = new RCaller();
caller.setRscriptExecutable("/usr/bin/Rscript");
caller.cleanRCode();
RCode code = new RCode();
code.clear();
String helper = "/dati/helper.R";
String modelNbd = "/dati/model-nbd.R";
String modelParetoNbd = "/dati/model-pareto-nbd.R";
String modelBgNbd = "/dati/model-bg-nbd.R";
String modelCbgCnbd = "/dati/model-cbg-cnbd-k.R";
code.R_source(helper);
code.R_source(modelNbd);
code.R_source(modelParetoNbd);
code.R_source(modelBgNbd);
code.R_source(modelCbgCnbd);
Map<String, Object> data = this.readCsvData();
StringBuilder userIds = new StringBuilder("ID <- c(");
long[] utenti = (long[])data.get("userIds");
int[] ordini = (int[]) data.get("ordini");
double[] tx = (double[]) data.get("tx");
double[] t = (double[])data.get("t");
int[] p2x = (int[]) data.get("p2tx");
for(int i = 0; i < utenti.length; i++){
userIds.append(utenti[i]+", ");
}
//here i check if the stringbuilder ends with, and i clean it...checkSb is simply an utility method
userIds     = checkSb(userIds).append(");");
code.addIntArray("p1x", ordini);
code.addDoubleArray("tx", tx);
code.addDoubleArray("t", t);
code.addIntArray("p2x", p2x);
code.addRCode("cdData<-data.frame(ID , p1x, tx, t, p2x);");
code.addRCode("names(cdData)[2] <- \"x\";");
code.addRCode("bgMleFit <- bgEstimateParameters(cdData, list(r=1, alpha=2, a=1, b=2));");
code.addRCode("summary(bgMleFit);");
code.addRCode("cdBgParams <- as.list(coef(bgMleFit));");
code.addRCode("t <- 39;");
code.addRCode("cdBgCe <- bgConditionalForecast(cdData, cdBgParams, t);");
code.addRCode("(cdBgSumEstimate <- sum(cdBgCe));");
code.addRCode("(cdBgMsle <- mean((log(cdData$p2x+1)-log(cdBgCe+1))^2));");
code.addRCode("(corr <- cor(cdData$p2x, cdBgCe));");
caller.setRCode(code);
caller.runAndReturnResult("cdBgCe");
ROutputParser parser = caller.getParser();
ArrayList<String> nomi = parser.getNames();
for (String nome : nomi) {
double[] previsioni = parser.getAsDoubleArray(nome);
logger.info("Nome "+nome+" lunghezza valori "+previsioni.length);
for (int i = 0; i < previsioni.length; i++) {
logger.info("Valore "+ previsioni[i]);
}
}
} catch (Exception e) {
logger.error(e.getMessage(), e);
}
} 
```

如您所见，除了我不使用 read.table 函数之外，代码与前一个完全相似。那么通过执行这段代码我有一个错误。起初我认为 Java 代码中有一些错误，但我检查并没有出现错误然后我在 R 控制台中尝试了代码。好吧，我有一些很奇怪的东西。让我们从这条指令开始（int数组是从csv文件中恢复的）：

```
int[] ordini = (int[]) data.get("ordini");
code.addIntArray("p1x", ordini); 
```

此 Java-RCaller 指令生成此 R 代码：p1x<-c(..........)。更确切地说，生成的 R 代码如下（准备好：它很大）：

```
p1x<-c(2, 1, 0, 0, 0, 7, 1, 0, 2, 0, 5, 0, 0, 0, 0, 0, 10, 1, 3, 0, 2, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 12, 0, 0, 1, 0, 0, 0, 0, 0, 0, 2, 1, 0, 1, 0, 4, 0, 1, 0, 0, 0, 2, 0, 0, 3, 0, 0, 1, 0, 1, 0, 0, 0, 3, 0, 0, 1, 0, 0, 0, 7, 0, 10, 0, 0, 1, 6, 0, 0, 0, 0, 0, 2, 4, 1, 5, 0, 0, 0, 1, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 4, 3, 0, 1, 2, 0, 1, 2, 0, 2, 1, 1, 0, 5, 2, 7, 2, 0, 4, 13, 0, 4, 4, 0, 0, 1, 0, 1, 29, 0, 3, 0, 0, 1, 0, 10, 0, 0, 13, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 6, 8, 0, 0, 0, 1, 0, 4, 0, 2, 3, 3, 0, 0, 0, 0, 0, 6, 0, 1, 0, 0, 2, 0, 2, 2, 0, 0, 1, 0, 1, 0, 0, 7, 0, 0, 0, 2, 0, 4, 0, 1, 1, 0, 0, 0, 0, 0, 2, 0, 1, 1, 2, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 1, 5, 0, 0, 2, 0, 1, 2, 0, 0, 1, 0, 1, 0, 5, 0, 0, 1, 2, 0, 1, 0, 0, 1, 2, 1, 0, 1, 0, 1, 0, 3, 1, 13, 0, 0, 0, 0, 0, 3, 3, 1, 0, 0, 3, 0, 5, 0, 2, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 3, 1, 1, 0, 1, 0, 0, 0, 4, 0, 2, 0, 3, 0, 0, 1, 0, 1, 0, 2, 0, 1, 3, 25, 0, 0, 0, 0, 5, 0, 2, 0, 0, 0, 5, 0, 0, 1, 0, 0, 0, 0, 2, 0, 0, 0, 1, 0, 2, 1, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 2, 4, 0, 0, 1, 3, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 11, 0, 0, 4, 0, 0, 1, 2, 0, 0, 0, 0, 1, 1, 0, 3, 1, 0, 0, 2, 0, 8, 1, 0, 2, 1, 0, 0, 1, 0, 2, 0, 0, 3, 0, 0, 0, 0, 0, 0, 2, 2, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 2, 4, 0, 0, 2, 0, 6, 0, 1, 0, 1, 1, 1, 2, 1, 0, 7, 4, 0, 0, 0, 7, 0, 1, 1, 0, 2, 1, 0, 4, 0, 1, 0, 0, 2, 0, 0, 4, 0, 0, 2, 1, 0, 1, 0, 11, 0, 4, 0, 0, 0, 4, 0, 3, 0, 1, 1, 0, 0, 6, 3, 0, 0, 0, 0, 2, 0, 2, 0, 18, 0, 1, 0, 1, 0, 0, 0, 5, 0, 1, 0, 6, 0, 2, 0, 0, 2, 0, 1, 1, 0, 0, 1, 0, 1, 2, 0, 0, 0, 1, 0, 2, 0, 2, 0, 0, 0, 0, 1, 10, 0, 1, 3, 3, 0, 2, 0, 0, 12, 0, 1, 2, 2, 0, 0, 0, 0, 5, 0, 0, 2, 0, 5, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 0, 1, 7, 0, 0, 2, 0, 0, 2, 0, 4, 0, 0, 3, 0, 1, 0, 2, 2, 0, 1, 1, 2, 0, 0, 0, 0, 2, 0, 0, 1, 0, 1, 0, 3, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 3, 0, 4, 0, 0, 0, 0, 2, 1, 1, 0, 0, 0, 0, 5, 1, 0, 0, 1, 2, 1, 0, 0, 0, 0, 1, 0, 8, 1, 0, 6, 1, 2, 0, 3, 6, 0, 1, 0, 2, 5, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 13, 0, 0, 1, 3, 0, 5, 0, 2, 1, 0, 0, 1, 0, 1, 1, 0, 0, 0, 4, 6, 1, 2, 0, 0, 2, 0, 7, 0, 0, 0, 0, 0, 3, 0, 5, 0, 2, 1, 3, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 2, 0, 1, 0, 0, 1, 10, 0, 0, 0, 0, 3, 3, 0, 0, 2, 5, 4, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 3, 1, 0, 0, 0, 0, 6, 2, 0, 0, 0, 0, 0, 0, 0, 0, 1, 6, 0, 1, 0, 2, 0, 0, 7, 0, 0, 0, 2, 0, 0, 0, 0, 2, 0, 1, 13, 7, 0, 0, 3, 0, 1, 0, 1, 1, 2, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 2, 1, 0, 0, 1, 19, 2, 2, 0, 2, 2, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 2, 0, 0, 0, 1, 0, 7, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 2, 0, 1, 1, 0, 0, 4, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 5, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 7, 2, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 1, 0, 4, 0, 1, 1, 0, 1, 0, 1, 2, 0, 1, 0, 0, 0, 2, 0, 4, 0, 1, 7, 1, 0, 1, 0, 0, 4, 0, 1, 0, 0, 0, 0, 1, 0, 7, 1, 0, 6, 0, 5, 0, 2, 0, 1, 0, 6, 0, 2, 0, 0, 0, 2, 2, 0, 0, 6, 0, 0, 1, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 1, 4, 0, 0, 1, 0, 1, 0, 0, 1, 0, 5, 2, 0, 0, 0, 3, 0, 12, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 1, 1, 0, 0, 3, 0, 1, 0, 1, 0, 0, 0, 0, 4, 0, 0, 2, 0, 5, 0, 3, 1, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 2, 3, 0, 0, 0, 0, 11, 0, 0, 2, 0, 1, 0, 7, 0, 0, 1, 0, 3, 0, 2, 0, 1, 0, 4, 2, 2, 1, 0, 0, 0, 0, 0, 1, 3, 0, 0, 1, 1, 6, 0, 0, 4, 0, 0, 1, 0, 2, 0, 1, 3, 7, 2, 0, 5, 0, 0, 0, 0, 5, 0, 12, 1, 0, 1, 0, 1, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 4, 0, 0, 0, 2, 0, 4, 0, 1, 0, 1, 0, 3, 0, 0, 0, 0, 0, 1, 0, 0, 3, 0, 3, 4, 1, 0, 2, 1, 2, 1, 0, 0, 2, 1, 0, 0, 0, 1, 7, 0, 6, 0, 6, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 3, 0, 0, 3, 0, 3, 0, 8, 0, 1, 0, 0, 2, 0, 0, 11, 0, 1, 8, 0, 1, 0, 1, 0, 0, 3, 0, 0, 0, 0, 0, 3, 1, 0, 1, 6, 0, 2, 1, 1, 0, 1, 1, 0, 3, 2, 0, 0, 0, 2, 1, 1, 0, 0, 0, 0, 3, 2, 0, 3, 0, 0, 1, 4, 0, 6, 0, 1, 1, 4, 0, 2, 0, 4, 0, 0, 0, 0, 2, 0, 1, 0, 1, 2, 0, 0, 1, 0, 0, 2, 1, 0, 0, 3, 0, 0, 0, 0, 0, 0, 1, 1, 3, 2, 0, 0, 0, 1, 0, 0, 0, 4, 0, 1, 3, 0, 0, 0, 0, 0, 0, 3, 1, 0, 1, 1, 2, 0, 2, 0, 0, 0, 3, 0, 1, 0, 1, 0, 9, 0, 0, 4, 0, 2, 0, 5, 0, 0, 1, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0, 0, 4, 1, 0, 0, 1, 5, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 3, 0, 0, 2, 0, 14, 4, 0, 0, 0, 0, 0, 0, 2, 0, 0, 2, 0, 3, 0, 2, 0, 0, 1, 1, 6, 1, 6, 0, 1, 2, 0, 0, 2, 1, 0, 2, 1, 0, 1, 0, 2, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 4, 0, 4, 0, 1, 0, 0, 5, 0, 2, 0, 1, 0, 5, 0, 1, 2, 0, 2, 2, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 3, 0, 4, 0, 1, 0, 0, 3, 1, 0, 2, 0, 2, 1, 0, 0, 0, 4, 0, 0, 0, 26, 1, 6, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 1, 2, 0, 1, 0, 0, 0, 14, 0, 1, 0, 2, 4, 0, 1, 6, 0, 0, 1, 3, 1, 0, 0, 0, 0, 1, 1, 0, 8, 0, 0, 0, 0, 0, 0, 3, 0, 1, 0, 0, 3, 0, 1, 1, 1, 1, 0, 1, 9, 0, 0, 3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 2, 0, 4, 1, 0, 0, 0, 0, 0, 0, 2, 0, 1, 1, 1, 0, 3, 2, 0, 2, 5, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 5, 1, 0, 1, 0, 4, 0, 0, 0, 0, 0, 4, 3, 0, 0, 0, 1, 0, 1, 0, 2, 0, 0, 0, 2, 4, 0, 0, 0, 0, 2, 0, 0, 0, 1, 0, 1, 1, 0, 0, 3, 3, 0, 2, 0, 1, 0, 1, 0, 0, 0, 5, 1, 3, 0, 2, 1, 0, 1, 0, 0, 0, 1, 0, 2, 0, 0, 0, 2, 3, 0, 0, 5, 0, 2, 0, 0, 0, 0, 0, 1, 1, 0, 0, 9, 2, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 3, 0, 0, 0, 1, 0, 0, 0, 0, 2, 0, 4, 0, 4, 3, 0, 3, 2, 0, 0, 0, 0, 0, 4, 0, 0, 0, 5, 3, 2, 2, 0, 0, 3, 2, 4, 0, 7, 1, 2, 0, 2, 2, 0, 3, 0, 0, 0, 1, 0, 1, 0, 0, 3, 0, 0, 1, 6, 0, 1, 0, 2, 3, 0, 0, 3, 0, 1, 0, 0, 0, 0, 0, 0, 0, 5, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 9, 4, 2, 0, 0, 1, 4, 1, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 5, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 1, 0, 0, 0, 7, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 2, 0, 0, 0, 1, 0, 0, 0, 1, 15, 0, 1, 0, 2, 0, 0, 3, 0, 0, 0, 0, 1, 0, 21, 2, 0, 0, 0, 3, 0, 0, 3, 2, 1, 0, 0, 1, 1, 1, 0, 0, 1, 2, 2, 1, 0, 0, 4, 0, 0, 0, 2, 0, 0, 1, 0, 1, 1, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 2, 0, 0, 0, 1, 0, 0, 6, 0, 11, 0, 0, 1, 1, 0, 1, 1, 2, 2, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 17, 2, 2, 0, 2, 0, 2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 1, 0, 0, 1, 0, 2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 7, 0, 0, 1, 0, 0, 3, 0, 0, 2, 4, 0, 1, 0, 0, 0, 0, 2, 1, 0, 4, 2, 0, 0, 1, 3, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 0, 1, 0, 1, 1, 3, 3, 0, 0, 0, 0, 1, 0, 2, 0, 1, 0, 0, 0, 1, 1, 0, 2, 0, 2, 0, 3, 0, 4, 0, 1, 1, 0, 0, 1, 0, 3, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 3, 0, 6, 0, 0, 0, 0, 3, 0, 0, 0, 2, 5, 0, 1, 0, 0, 1, 0, 1, 0, 0, 2, 0, 1, 2, 0, 0, 7, 0, 0, 2, 0, 2, 2, 0, 0, 0, 0, 0, 2, 0, 8, 0, 0, 5, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 3, 0, 2, 0, 0, 0, 2, 1, 0, 0, 0, 0, 1, 0, 2, 0, 0, 0, 0, 2, 0, 0, 1, 0, 1, 2, 0, 0, 1, 0, 2, 0, 0, 3, 0, 0, 0, 1, 0, 0, 0, 1, 0, 9, 3, 0, 0, 0, 0, 0, 0, 3, 0, 0, 2, 0, 1, 1, 1, 0, 0, 0, 2, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 4, 0, 0, 2, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0, 1, 0, 0, 6, 0, 0, 0, 0, 1, 0, 0, 2, 6, 0, 1, 0, 0, 0, 0, 2, 0, 7, 0, 1, 2, 1, 1, 1, 0, 0, 1, 5, 0, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 5, 1, 0, 1, 2, 0, 0, 1, 2, 0, 1, 0, 2, 0, 1, 2, 7, 1, 2, 0, 0, 0, 5, 0, 4, 0); 
```

当我在 R 控制台中执行此功能时，我有一些奇怪的行为；有时它似乎在其他时候没有被执行，我有一个错误，比如“Unexpected element in......”，我真的不知道我错在哪里......相反，如果我使用“read.table功能”一切都很好。你能给我一些建议吗？我哪里错了吗？

# javascript - Mozilla Firefox 如何使用 DEL 键

> ID：13560955
> 
> 赞同：1
> 
> 时间：2012-11-26T08:15:49.453
> 
> 标签：javascript, firefox, dom-events, mozilla, keycode

我需要帮助解决我的 asp.net MVC3 应用程序中的问题 我有一个文本框，用于验证货币格式 ($228.00) 但在此文本框中它不适用于`DEL`密钥，因为`.`删除密钥具有相同的 ASCII 密钥，即 46 .我还在这个文本框中设置了一个验证，`.`只有一次将在文本框中接受，所以如果“。” 输入一次然后删除将不起作用。

这是我的验证 Javascript：

```
function validateForCharacter(val, id, e) {
    window.event.keyCode : -1;
    var key = e.keyCode || e.charCode || e.which;
    var currentChar = String.fromCharCode(key);
    if (val.indexOf(currentChar) != -1 && currentChar == ".")
    {
           return false;
    }
    if (key >= 48 && key <= 57 || key == 46 || e.keyCode === 8 || e.keyCode === 9 || e.keyCode === 37 || e.keyCode === 35 || e.keyCode === 39)
    {
           $(this).val("");
           return true;
    }
    return false;
 } 
```

这是我的文本框视图（Html）代码：

```
<input type="text" id="t1" onkeypress="return validateForCharacter(value, id, event)/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-18T21:41:57.463

Jquery 做对了...但是如果您需要专门检测 Firefox 或 IE9 上的删除键，您可以使用`event.key`属性。

IE：

```
if (event.key == "Delete") 
```

现场演示：

```
$(document).ready(function() {
  $("#nondeletable").on("keydown", function(event) {
    $("#result").html(event.type + ": " + event.which);
    if (event.key == "Delete")
      $("#result").append(" <b>Delete!</b>");
  });

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<input type="text" id="nondeletable" />
<div id="result"></div>
```

# jfreechart - 具有双 x 轴的 JFreeChart

> ID：13560964
> 
> 赞同：4
> 
> 时间：2012-11-26T08:16:23.527
> 
> 标签：jfreechart

我想问一下是否有可能有一个带有双 x 轴（或 y 轴，但因为它是我专注于双 x 轴的时间序列数据集）的时间序列图表。我有两个数据文件，其中测量是在一分钟或一整天内进行的。结果我不能有一个 x 轴。因此，一种解决方案是将一个数据文件转换为另一个数据文件的格式或具有两个不同的 x 轴。第二种解决方案可以做到吗？

我找到了[JFreeChartDualAxisDemo](http://www.java2s.com/Code/Java/Chart/JFreeChartDualAxisDemo2.htm)

但这不是我想要的。

提前感谢您的帮助！！！

编辑：

我有以下代码，我正在尝试使用属于特定 x 轴的两个数据集创建时间序列图（如您所见，我创建了两个 x 轴）。我尝试执行此代码，但创建的图表不正确，实际上它只有 x 轴和 y 轴。谁能告诉我错在哪里？

```
int year1 = 2004;
int year2 = 2005;
int year3 = 2006;
int year4 = 2007;

int month1 = 1;
int month2 = 5;
int month3 = 8;
int month4 = 12;

int day1 = 3;
int day2 = 10;
int day3 = 15;
int day4 = 30;

TimeSeries ts= new TimeSeries("Metrisi", Day.class);
ts.add(new Day(day1, month1, year1), 100);
ts.add(new Day(day2, month2, year2), 150);
ts.add(new Day(day3, month3, year3), 250);
ts.add(new Day(day4, month4, year4), 275);

TimeSeriesCollection dataset = new TimeSeriesCollection();
dataset.addSeries(ts);

int year1_2 = 2004;
int year2_2 = 2005;
int year3_2 = 2006;
int year4_2 = 2007;

int month1_2 = 2;
int month2_2 = 7;
int month3_2 = 9;
int month4_2 = 11;

int day1_2 = 23;
int day2_2 = 14;
int day3_2 = 19;
int day4_2 = 22;

TimeSeries ts2= new TimeSeries("Metrisi", Day.class);
ts.add(new Day(day1_2, month1_2, year1_2), 100);
ts.add(new Day(day2_2, month2_2, year2_2), 150);
ts.add(new Day(day3_2, month3_2, year3_2), 250);
ts.add(new Day(day4_2, month4_2, year4_2), 275);

TimeSeriesCollection dataset2 = new TimeSeriesCollection();
dataset.addSeries(ts2);

JFreeChart chart = ChartFactory.createTimeSeriesChart(
"Measurement",
"Date",
"Measurement",
dataset,
true,
true,
false);

final XYPlot plot = chart.getXYPlot();

plot.setBackgroundPaint(Color.lightGray);
plot.setDomainGridlinePaint(Color.white);
plot.setRangeGridlinePaint(Color.white);
plot.setDomainCrosshairVisible(true);
plot.setRangeCrosshairVisible(false);

final DateAxis axis2 = new DateAxis("Secondary");
//xAxis2.setAutoRangeIncludesZero(false);
//plot.setDomainAxis(1, axis );
plot.setRangeAxis(1, axis2);
plot.setDataset(1, dataset2);
plot.mapDatasetToRangeAxis(1, 1);

 final XYItemRenderer renderer = plot.getRenderer();
 renderer.setToolTipGenerator(StandardXYToolTipGenerator.getTimeSeriesInstance());
if (renderer instanceof StandardXYItemRenderer) {
    final StandardXYItemRenderer rr = (StandardXYItemRenderer) renderer;
    //rr.setPlotShapes(true);

    rr.setShapesFilled(true);
    //renderer.setSeriesStroke(0, new BasicStroke(2.0f));
    //renderer.setSeriesStroke(1, new BasicStroke(2.0f));
   }

final StandardXYItemRenderer renderer2 = new StandardXYItemRenderer();
renderer2.setSeriesPaint(0, Color.black);
//renderer2.setPlotShapes(true);
renderer.setToolTipGenerator(StandardXYToolTipGenerator.getTimeSeriesInstance());
plot.setRenderer(1, renderer2);

final DateAxis axis = (DateAxis) plot.getDomainAxis(); 
```

这就是我想要做的。如您所见，我有两个 x 轴，但只有一个数据集，这就是问题所在。我已经使用以下代码完成了图像中显示的示例：

```
 final XYPlot plot = chart.getXYPlot();

    plot.setBackgroundPaint(Color.lightGray);
    plot.setDomainGridlinePaint(Color.white);
    plot.setRangeGridlinePaint(Color.white);
    plot.setDomainCrosshairVisible(true);
    plot.setRangeCrosshairVisible(false);

    final XYItemRenderer renderer = plot.getRenderer();
    if (renderer instanceof StandardXYItemRenderer) {
        final StandardXYItemRenderer rr = (StandardXYItemRenderer) renderer;
        //rr.setPlotShapes(true);
        rr.setShapesFilled(true);
        renderer.setSeriesStroke(0, new BasicStroke(2.0f));
        renderer.setSeriesStroke(1, new BasicStroke(2.0f));
       }

    final DateAxis axis = (DateAxis) plot.getDomainAxis();

    final DateAxis xAxis2 = (DateAxis) plot.getDomainAxis();
    plot.setDomainAxis(1, xAxis2 );
    plot.mapDatasetToDomainAxis(1, 1); 
```

![我想要的输出示例](../Images/1c3293e6e55ef5388b58b0659286d6cc.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T09:28:25.377

是的，您可以添加辅助 X（域）轴。要将辅助域轴添加到您链接的演示中，请添加以下代码：

```
final NumberAxis xAxis2 = new NumberAxis("Secondary X Axis");
plot.setDomainAxis(1, xAxis2 );
plot.mapDatasetToDomainAxis(1, 1); 
```

在你有对 Plot ( `plot`)的引用之后给构造函数

这将允许您显示两个数据集：

![在此处输入图像描述](../Images/c6bda4ea50a0b7691c9823243bdd2265.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:21:01.173

使用我之前发布的代码，我得到的是这样的

![在此处输入图像描述](../Images/c7e6141ff2d45fa83f5a8d618f0623ba.png)

# sql - 使用 IF ELSE 时 SQL 选择所有行的计数

> ID：13560967
> 
> 赞同：1
> 
> 时间：2012-11-26T08:16:36.410
> 
> 标签：sql, count, sql-server-2008-r2, if-statement

我在 SQL 中使用 IF ELSE 语句时遇到一种情况。

```
 @searchString nvarchar(50),
    @languageId int, 
    @count int,
    @id int
IF(@count IS NOT NULL)
    SELECT TOP (@count) Id, value
    FROM TABLE1
        WHERE  (Id IN
        (SELECT Id
    FROM      TABLE2
    WHERE   (Id = @id))) and languageId = @languageId AND value LIKE '%' + @searchString + '%'
ORDER BY value

ELSE
    SELECT Id, value
    FROM TABLE1
        WHERE  (Id IN
        (SELECT Id
        FROM      TABLE2
    WHERE   (Id = @id))) and languageId = @languageId AND value LIKE '%' + @searchString + '%'
ORDER BY value 
```

我想使用 count(*) over() （或类似的东西）返回所有行的数量（因为我现在只返回 TOP 计数记录），就像这里回答的那样： [如何返回带有 TOP * 的记录总数选择](https://stackoverflow.com/questions/5637254/how-to-return-total-number-of-records-with-top-select)

但是：我不会为每个实例返回这个值，但我想只返回一次计数。

有没有办法用一个查询来做到这一点，或者我必须为此编写一个单独的查询？

任何提示将不胜感激！

编辑：使用 SQL Server 2008 r2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:53:31.777

我建议您使用 INNER JOIN，例如带有脚本的示例：{ SCRIPT

选择

```
 l.localite_id,
                p.patient_id,
                p.patient_date_naissance, 
                p.patient_gsm, p.patient_tel 
```

FROM 患者 p INNER JOIN localite l ON l.localite_id = p.localite_id INNER JOIN ville v ON v.ville_id = l.ville_id INNER JOIN gouvernorat g ON v.gouv_id = g.gouv_id INNER JOIN pays ON pays.pays_id = g。 pays_id

IF NEQ #patient_gsm# -1 WHERE p.patient_gsm like #patient_gsm#

和 p.patient_code 像 #patient_code#

万一

结尾

}

# iphone - UIWebview 没有关闭

> ID：13560968
> 
> 赞同：1
> 
> 时间：2012-11-26T08:16:39.700
> 
> 标签：iphone

我正在开发一个应用程序，因为我正在使用`UIWebview`并在该 web 视图上打开 youtube。

我添加了关闭 webview 的关闭按钮，当我在 youtube 上打开视频并单击关闭按钮时，webview 关闭但视频声音仍在播放。

所以请告诉我如何从我的主视图中删除 webview。

我的关闭按钮代码：

```
- (void)cancel:(UITapGestureRecognizer *)recognizer {
      [web stopLoading];
      [web removeFromSuperview];
      [cnclbtn removeFromSuperview];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:47:26.250

试试这个......它可能会解决你的问题......

在从超级视图中删除之前，只需像这样加载带有空 html 页面的 webview ......

```
- (void)cancel:(UITapGestureRecognizer *)recognizer {
  [web stopLoading];
  [web loadHTMLString:@"<html><head></head><body></body></html>" baseURL:nil];
  [web removeFromSuperview];
  [cnclbtn removeFromSuperview];
} 
```

# c# - 如何检测当前类型是否有“ToString”覆盖方法？

> ID：13560971
> 
> 赞同：4
> 
> 时间：2012-11-26T08:16:48.307
> 
> 标签：c#, reflection

> **可能重复：**
> [如何确定 MethodInfo 是否是基方法的覆盖](https://stackoverflow.com/questions/982347/how-to-determine-if-the-methodinfo-is-an-override-of-the-base-method)

通常，当我们执行任何复杂类型的“ToString”方法时，它将返回当前类型名称，如下面的字符串，除了有“ToString”覆盖的方法。

> System.Data.Entity.DynamicProxies.UserRole_D77A004638495805D68478322DF47F48540438D82DC9A5A0E1B0B2A181E4A100

我想要一些逻辑来检测当前类型，因为我尝试将数据导出为 excel 格式。但是模型的某些属性是复杂类型，没有定义“ToString”方法。此属性的输出对普通用户无用。

![在此处输入图像描述](../Images/07f50ff886c59dbad85e1ec51eb6c154.png)

**谢谢，**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T08:26:24.757

您可以在 to string 的 methodInfo 上检查 DeclaringType

```
if (methodInfo.DeclaringType != typeof(YourObject)) {
    ...
} 
```

[system.reflection.methodinfo](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T08:29:34.247

你当然可以通过反射来做到这一点。另一种可能为您提供所需且不使用反射的方法是：

```
if (this.ToString() != this.GetType().ToString())
{
    // This Type or one of its base types has overridden object.ToString()
} 
```

请注意，您可能想要检查当前类型或任何基本类型（对象除外）是否已被覆盖`ToString()`。作为一个人为的例子，所有派生自的类型都`Exception`返回一个合理的值`ToString()`（异常详细信息包括堆栈跟踪），但不是所有的 override `Exception.ToString()`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T08:26:56.600

我认为这种检查特定类型是否覆盖 ToString 的方法有点脆弱。我们可以通过其他几种方式解决这个问题。

首先，如果**需要**字符串表示，您可以使用一种方法添加额外的混合接口，如 IObjectDescriptor：字符串 GetDescription。并且您可以**要求**每种类型都实现此功能（如果未实现类，则会引发异常）。

第二种方法（如果我们不想更改现有的代码库）是使用单独的帮助类，它将有一个方法：ConvertToString：

```
static class ToStringHelper
{
  // We can use Generic method to prevent boxing
  public string ConvertToString(object o)
  {
    var sb = new StringBuilder();
    // using reflection to access all public properties, for example

    return sb.ToString();
  }
} 
```

在这两种情况下，您与客户之间的意图和“合同”都会更加清晰。在第一种情况下，如果类型未实现特定接口，您将抛出异常，使用第二种方法，您将获得至少一致的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T09:39:26.567

您可以使用`IsSubclassOf`对象和`DeclaringType`方法。

```
public class BaseClass
{
    public string Name;

    public virtual void Write(string val)
    {
    }
}

public class SubClass : BaseClass
{
    public string Address;

    public override void Write(string val)
    {
        base.Write(val);
    }
} 
```

测试代码：

```
Type objType = obj.GetType();
MethodInfo info = objType.GetMethod("Write");
if (objType.IsSubclassOf(info.DeclaringType))
{

    Console.WriteLine("Not Override");
}
else
    Console.WriteLine("Override"); 
```

# xaml - 定期更新 Windows Phone 8 的动态磁贴

> ID：13560972
> 
> 赞同：2
> 
> 时间：2012-11-26T08:16:51.533
> 
> 标签：xaml, silverlight-5.0, windows-phone-8

我需要使用收件箱项目的数量定期更新我的应用程序的磁贴。任何人都可以给我一个示例或教程的参考或相关链接吗？我从网络服务获取数据。我去了谷歌，所有的例子都在按钮点击上。我需要一个每隔几分钟/几小时自动执行一次的吗？这是手机的windows phone 8开始屏幕。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T20:26:23.903

这可能是我在 wp8 中看到的关于动态磁贴的最佳教程：

[http://www.windowsphonegeek.com/articles/live-tiles-in-windows-phone-8-part-1-tile-templates](http://www.windowsphonegeek.com/articles/live-tiles-in-windows-phone-8-part-1-tile-templates)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-04T19:50:04.663

有几种不同的方法可以做到这一点。您可以使用 Azure 移动服务，也可以使用应用程序的后台进程来更新磁贴。你可以在这里找到信息：

[http://thesociablegeek.com/windows-8/livetiles/modifying-live-tiles-in-a-background-process/](http://thesociablegeek.com/windows-8/livetiles/modifying-live-tiles-in-a-background-process/)

丹尼尔

# javascript - 将 Javascript 数据传递给 Django

> ID：13560975
> 
> 赞同：2
> 
> 时间：2012-11-26T08:17:14.980
> 
> 标签：javascript, html, django, post

我对 Django（和 Web 开发）还很陌生，发现自己正在为这个问题苦苦挣扎：我使用 javascript 构建了一个简单的计时器，现在希望在模型中有一个变量，该变量在计时器启动时更新。我迷失在如何做到这一点。

这是我的代码：

**主页.html**：

```
<button onclick='activatecount()' value='countdown'>Start Timer</button>
<p id='countdown'></p>
<p id='endofcount'></p>

<script src='{{ STATIC_URL }}timerapp.js'></script>
</body>
</html> 
```

然后是**javascript**。屏幕上有一个按钮，当用户单击该按钮时，计时器开始倒计时。

```
var myTime = setInterval(displayTime, 1000);//Calls the function displayTime once every second
function subtractSeconds(){
seconds--;
document.getElementById('countdown').innerHTML = seconds; }

var interval;
var minutes = 2;
var seconds = 10;

function activatecount(){
    countdown('countdown');
}

function countdown(element) {
    interval = setInterval(function() {
        var el = document.getElementById(element); 
        if(seconds == 0) { 
            if(minutes == 0) {
                el.innerHTML = "countdown's over!";  
                clearInterval(interval); 
                return;
            } else { 
                minutes--;
                seconds = 60;
            }
        } 
        if(minutes > 0) { 
            var minute_text = minutes + (minutes > 1 ? ' minutes' : ' minute');
        } else {
            var minute_text = '';
        }
        var second_text = seconds > 1 ? 'seconds' : 'second';
        el.innerHTML = minute_text + ' ' + seconds + ' ' + second_text + ' remaining';
        seconds--; 
        }, 1000); 
} 
```

我的**意见.py**：

```
def home(request):
    return render_to_response('home.html', context_instance=RequestContext(request)) 
```

最后是我的**models.py**：

```
class User(models.Model):
    username = models.CharField(max_length=10)
    email = models.EmailField(max_length=254)
    first_name = models.CharField(max_length = 20)
    last_name = models.CharField(max_length = 20)
    join_date = models.DateField().auto_now_add
    block_count = models.IntegerField()

def __unicode__(self):
    return self.username 
```

我想要的只是当计时器到时 block_count 加一。（我稍后会添加更多功能，但我完全迷失了这个看似微不足道的事情。）我能找到的只是关于如何使用表单和 POST 将数据提交到数据库的讨论，但我在这里没有使用表单.

应该在这里使用 POST 吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:46:09.347

创建第二个视图以更新模型。`.ajax`如果您希望在数据库更新时能够保持在同一页面上，请使用 jquery 的方法调用第二个视图。

就像是：

视图.py

```
def ajax(request):
    if request.is_ajax():
    // add 1 to your block count 
```

jQuery：

```
function countdown(element) {
interval = setInterval(function() {
    var el = document.getElementById(element); 
    if(seconds == 0) { 
        if(minutes == 0) {
            el.innerHTML = "countdown's over!";  
              $.ajax({
                type:"POST",
                url :"/ajax-url/",
                error:function(data){alert('Error');}
                success:function(data{alert('OK!');}
                });
            clearInterval(interval); 
            return;
            // etc etc 
```

网址：

```
url(r'^ajax-url/$', 'views.ajax'), 
```

这是一般的想法。我没有测试过这段代码，但它应该给你一个起点，从中了解如何解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:49:56.390

你可以创建一个这样的表格

```
<form name="myform" action="/update-model/ method="post">
<input type="hidden" name="update" value="yes">
</form> 
```

和这样的景色

```
def update_model(request):
    if request.POST:
        if request.POST['update']:
            #do your code here. 
```

和你这样的javascript

```
 if(minutes == 0) {
            el.innerHTML = "countdown's over!";  
            document.myform.submit();
            clearInterval(interval); 
            return;
        } else { 
            minutes--;
            seconds = 60;
        } 
```

在 Django（以及一般的 Web 应用程序）中，当您需要服务器做某事时，您会向它发送 HTTP 请求。这是通过将方法映射到 url (urls.py) 来完成的。然后你可以做*deprecated for 1.5*

```
url = "{% url my_url_name %}" 
```

对于如何使用 Web 浏览器发送该请求，您有几个选择（您的 Web 应用程序的 GUI，对吗？）

*   异步
*   同步

同步发送请求需要标准页面加载。Google 的主页表单是同步的。您希望在请求需要将用户移动到另一个页面或应用程序需要在提交后重新启动时执行此操作。您可以通过表单提交和链接来执行此操作。

异步发送请求允许页面的某些部分在不同时间加载（重新加载），并且可以由服务器处理。从谷歌搜索结果页面再次搜索异步拉入搜索结果。您可以使用一种称为 ajax 的技术来执行此操作。

# gwt - .cache.html 文件也有 javascript，所以它没有被压缩？那么为什么它将压缩的javascript存储在.js文件中呢？

> ID：13560976
> 
> 赞同：-4
> 
> 时间：2012-11-26T08:17:16.487
> 
> 标签：gwt

在 GWT 中，JavaScript 代码包装在 .cache.html 文件中。是不是没有压缩？还是只压缩 .js 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:35:40.970

您指的是相当古老的文档。GWT 现在是 2.5 而不是 1.6 。 [https://developers.google.com/web-toolkit/doc/latest/DevGuide](https://developers.google.com/web-toolkit/doc/latest/DevGuide)

还要确保您已将 GWT 样式编译器选项设置为“OBF”

# java - 字符串操作 (Java)

> ID：13560979
> 
> 赞同：-1
> 
> 时间：2012-11-26T08:17:31.630
> 
> 标签：java, string

这是我的问题：我有一个字符串，它是一个表达式。该表达式包含数值常量、变量、数学和逻辑运算符。例如：4*A&&B，X+5>Y。另外，我有一个翻译图（String->String），它基本上翻译变量。

需要的输出是翻译后的表达式。由于此示例，简单替换失败：表达式为 A&&X，其中 A -> XX，X->B。从 A 开始的简单替换导致表达式为 XX&&X，然后在替换 XI 时得到 BB&B，其中预期输出应为 XX&B。

有什么建议么？

编辑：我想一个可能的解决方案是编写一个表达式编译器，它知道将表达式解析为原子单元，以后我可以替换它。我只是想知道是否有更简单的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:32:37.057

定义“更简单的解决方案”。

将表达式解析为原子单元（为了能够恢复运算符，不要使用`String.split()`- 使用`Pattern`，`Matcher`而是使用 (from `java.util.regex`)）很简单，并且会起作用。

为了提高效率，您必须编写某种词法分析器，这样简单性就会飞出窗外。

# html - ie8 无法识别 ⋅

> ID：13560982
> 
> 赞同：2
> 
> 时间：2012-11-26T08:17:46.867
> 
> 标签：html, internet-explorer, html-entities

我正在尝试使用 html 实体`&sdot;`

所有浏览器都承认这一点，但后来我注意到 ie8（及以下？） - 而不是显示点 - 显示一个空框。

所以我想知道：

1) 有什么我遗漏的或者这是一个 IE 错误吗？

2) IE 是否不支持其他实体？

3）有解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T09:21:59.217

IE（当前使用的所有版本）识别实体引用`&sdot;`，表示 DOT OPERATOR (U+22C5) “⋅”。如果您使用等效的字符引用`&#x22c5;`或字符本身（在 UTF-8 编码的文档中）进行测试，您会得到相同的结果。原因是这是字体问题。

点运算符仅包含在少数[字体](http://www.fileformat.info/info/unicode/char/22c5/fontsupport.htm)中。显然，用于您的文本的字体都不是。旧版本的 IE 通常无法从其他字体中提取字符，而在需要时，IE 9 会扫描系统中的字体，直到找到该字符。

您可以期望在旧 Windows 版本（主要使用旧版本 IE）中找到的唯一包含点运算符的字体是 Lucida Sans Unicode。它不适合数学课本，但你能做什么？但是您可以通过首先列出更合适的字体在更好的系统中获得良好的渲染。例如，

```
body { font-family: Cambria, Arial Unicode MS, Lucida Sans Unicode, serif; } 
```

另一方面，如果您没有按照其预期含义使用点运算符，作为数学运算符，您可能将其用作类似子弹的分隔符。然后考虑使用 U+2022 BULLET “•”字符 ( `&bull;`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:36:50.687

您需要包含此字符的（微软）字体，否​​则您会看到这个空框。或者，您也可以使用与 .非常相似的字符`&middot;`(unicode: ) 。`&#183;``&sdot;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T08:51:03.213

我发现使用它在 IE7、8 和 9 中使用的 doctype 对其进行测试。我已经在具有兼容性视图的 IE 以及 IE 测试器[http://www.my-debugbar.com/wiki/IETester/HomePage中对其进行了检查](http://www.my-debugbar.com/wiki/IETester/HomePage)

我已经找到 ：

> 浏览器兼容性说明
> 
> 上面的符号在 Internet Explorer 4.01 和更高版本中正确显示，但有以下三个例外：`&empty;. &notin;,`并且`&sdot;`在 IE 7 之前不能工作。否则所有符号都可以在各种浏览器中工作。

来自“http://www.johndcook.com/math_symbols.html”的引述

尝试作为替代`&#183;`

# iphone - 在 Coverflow 模式下启用特定子视图的用户交互

> ID：13560987
> 
> 赞同：0
> 
> 时间：2012-11-26T08:18:17.667
> 
> 标签：iphone, ios, coverflow

我创建了一个覆盖流模式，其中包含一个`UIWebView`用于播放 youtube 视频的模式，并且我还为整个视图提供了 Tapgesture。

现在用户交互在`UIWebView`.

我想要的是实现一个带有点击手势和视频播放功能的封面流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:44:34.570

[iCarousel](https://github.com/nicklockwood/iCarousel) is the best library so far to show video list in the coverflow View, yes tap gesture is available on tiles.

You'll get detail on GitHub site, go through with the readme file.

But remember one important thing, thumbnails would make much more sense, this will make the application use less processing power and faster performance.

# c# - 如何开发用于上传带状态文件的 Web 服务 (ASMX)

> ID：13560989
> 
> 赞同：0
> 
> 时间：2012-11-26T08:18:39.300
> 
> 标签：c#, web-services, asmx

借助网络服务将文件上传到网络服务器很容易。这是我通常这样做的方式。这是我的示例代码。

```
[WebMethod]
public bool UploadFile(string FileName, byte[] buffer, long Offset)
{
bool retVal = false;
try
{
// setting the file location to be saved in the server. 
// reading from the web.config file 
string FilePath = 
Path.Combine(ConfigurationManager.AppSettings["upload_path"], FileName);

if (Offset == 0) // new file, create an empty file
File.Create(FilePath).Close();
// open a file stream and write the buffer. 
// Don't open with FileMode.Append because the transfer may wish to 
// start a different point
using (FileStream fs = new FileStream(FilePath, FileMode.Open, 
FileAccess.ReadWrite, FileShare.Read))
{
fs.Seek(Offset, SeekOrigin.Begin);
fs.Write(buffer, 0, buffer.Length);
}
retVal = true;
}
catch (Exception ex)
{
//sending error to an email id
common.SendError(ex);
}
return retVal;
} 
```

但我想开发 Web 服务，它会给我以百分比上传文件的状态，当文件上传完成时，无论文件是否完全上传，都会在客户端触发一个带有状态消息的事件。我还需要编写可以同时处理多个请求的例程，并且例程必须是线程安全的。所以请指导我如何设计足以满足我所有要求的例程。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:29:17.850

我强烈建议您忘记从头开始实现这一点，而是查看现有的可用客户端文件上传解决方案之一 - 大多数都带有一些可以插入现有应用程序的样板 .NET 代码。

我使用了 jQuery Upload 和 plUpload，它们都有可靠的客户端上传管理器，它们通过 HTTP Range 标头上传文件并在此过程中提供上传状态信息。我相信两者都带有 .NET 示例。

这些类型的上传处理程序的服务器端实现涉及接收 HTTP 数据块，这些数据通过一种上传会话 id 标识。客户端发送文件块，每个文件都由这个文件相关的 id 标识，以及一些进度信息，如传输的字节数和总文件大小，以及指示请求状态的状态值。状态让您知道文件何时完全上传。

然后可以根据从客户端传递的唯一 ID 将来自 POST 缓冲区的传入数据写入文件或数据库或其他一些存储机制。因为客户端应用程序正在向服务器发送数据块，所以它可以提供进度信息。如果您使用 plUpload 或 jQuery-Upload 之类的客户端库，它们将提供可定制的 UI。

# javascript - array.prototype.slice.call 中的原型有什么用

> ID：13560990
> 
> 赞同：0
> 
> 时间：2012-11-26T08:18:41.873
> 
> 标签：javascript, prototype

为什么要包含原型？

为什么不呢？

```
 Array.slice.call() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:22:55.563

因为`Array`是一个函数，而函数没有`.slice`方法，只有数组有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:27:52.127

更好地检查文档，这可以帮助你[http://shifteleven.com/articles/2007/06/28/array-like-objects-in-javascript](http://shifteleven.com/articles/2007/06/28/array-like-objects-in-javascript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T08:41:22.023

`Array`是一个构造函数，不包含`slice`方法。它的原型 ( `Array.prototype`) 可以。但是，您可以`slice`从（空）`Array`实例调用：

```
[].slice.call(/*...*/) 
```

# jquery - jQuery 验证引擎中的箭头

> ID：13560991
> 
> 赞同：0
> 
> 时间：2012-11-26T08:18:42.813
> 
> 标签：jquery, html, css, css-shapes, jquery-validation-engine

在 promptPositions bottomRight 和 bottomLeft 的 JQuery 验证引擎中，箭头指向顶部，反之亦然。对于 centerRight Position，我想将箭头指向左侧，对于 centerLeft，我想将箭头指向右侧。

我正在研究它。但是，找不到更好的解决方案。

```
arrow.addClass("formErrorArrowBottom").html('<div class="line5"><!-- --></div>\n\
<div class="line6"><!-- --></div>\n\
<div class="line7"><!-- --></div>\n\
<div class="line8"><!-- --></div>\n\
<div class="line9"><!-- --></div>\n\
<div class="line6"><!-- --></div>\n\
<div class="line7"><!-- --></div>\n\
<div class="line8"><!-- --></div>\n\
<div class="line9"><!-- --></div>\n\
<div class="line10"><!-- --></div>'); 
```

我在 jquery.ValidateEngine.js 中编辑了这个。但徒劳。有谁知道正确的格式来获得左右箭头。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:08:16.997

那么我有同样的问题，所以我更新了CSS：

```
.formError .formErrorArrow .sideline12 {
    width: 1px;
    height: 15px;
    border: none;
    float: left;
}

.formError .formErrorArrow .sideline11 {
    width: 1px;
    height: 13px;
    border: none;
    float: left;
    margin-top: 1px;
}

.formError .formErrorArrow .sideline10 {
    width: 1px;
    height: 11px;
    border: none;
    float: left;
    margin-top: 2px;
    border-top: solid 4px #fff;
    border-bottom: solid 4px #fff;
}

.formError .formErrorArrow .sideline9 {
    width: 1px;
    height: 9px;
    border: none;
    float: left;
    margin-top: 3px;
    border-top: solid 4px #fff;
    border-bottom: solid 4px #fff;
}

.formError .formErrorArrow .sideline8 {
    width: 1px;
    height: 7px;
    border: none;
    float: left;
    margin-top: 4px;
    border-top: solid 4px #fff;
    border-bottom: solid 4px #fff;
}

.formError .formErrorArrow .sideline6 {
    width: 1px;
    height: 5px;
    border: none;
    float: left;
    margin-top: 5px;
    border-top: solid 4px #fff;
    border-bottom: solid 4px #fff;
}

.formError .formErrorArrow .sideline6 {
    width: 1px;
    height: 3px;
    border: none;
    float: left;
    margin-top: 6px;
    border-top: solid 4px #fff;
    border-bottom: solid 4px #fff;
}

.formError .formErrorArrow .sideline5 {
    width: 1px;
    height: 1px;
    border: none;
    float: left;
    margin-top: 7px;
    border-top: solid 4px #fff;
    border-bottom: solid 4px #fff;
}

.formError .formErrorArrow .sideline4 {
    width: 1px;
    height: 7px;
    border: none;
    float: left;
    margin-top: 8px;
    background: #fff;
}

.formError .formErrorArrow .sideline3 {
    width: 1px;
    height: 5px;
    border: none;
    float: left;
    margin-top: 9px;
    background: #fff;
}

.formError .formErrorArrow .sideline2 {
    width: 1px;
    height: 3px;
    border: none;
    float: left;
    margin-top: 10px;
    background: #fff;
}

.formError .formErrorArrow .sideline1 {
    width: 1px;
    height: 1px;
    border: none;
    float: left;
    margin-top: 11px;
    background: #fff;
}

.formError .formErrorArrow .rightSideArrow {
    width: 14px;
    margin-left: 2px;
    margin-bottom: 7px;
    z-index: 5;
    background-color: transparent;
    border-color: transparent;
    vertical-align: middle;
} 
```

和 ths JS：

```
case "centerRight":
    prompt.find(".formErrorContent").before(arrow);
    arrow.addClass("formErrorArrowRight").html('<div class="rightSideArrow"><div class="sideline1"><!-- --></div><div class="sideline2"><!-- --></div><div class="sideline3"><!-- --></div><div class="sideline4"><!-- --></div><div class="sideline5"><!-- --></div><div class="sideline6"><!-- --></div><div class="sideline7"><!-- --></div><div class="sideline8"><!-- --></div><div class="sideline9"><!-- --></div><div class="sideline10"><!-- --></div><div class="sideline11"><!-- --></div><div class="sideline12"><!-- --></div></div>');
break; 
```

和 HTML：

```
<script>
        jQuery(document).ready(function(){
            jQuery("#formID").validationEngine({ promptPosition: "centerRight" });
        });
</script> 
```

# jquery - 请帮助我在我的网站（CSS 或 JQuery）中实现此效果

> ID：13560998
> 
> 赞同：2
> 
> 时间：2012-11-26T08:19:09.147
> 
> 标签：jquery, css, web, jquery-effects

我在做一个网页，我想在这个网站上创建一个类似的效果：http: [//y2graphic.com/](http://y2graphic.com/)

在这个网页中，您可以看到名为“Chủ đề HOT”（热门内容）的部分，它有 3 张图像，当悬停时会产生效果（我不知道名称）。你能告诉我效果的名称和创建它的方法吗？非常感谢，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:27:36.857

他们为此使用 CSS3，[transform](http://www.w3schools.com/cssref/css3_pr_transform.asp) -attribute。

HTML

```
<a href="#" class="thumb">
    <img src="http://y2graphic.com/templates/v2/images/hot/wallpaper.jpg" />
</a> 
```

CSS

```
.thumb {
    display: block;
    height: 125px;
    overflow: hidden;
    position: relative;
    width: 150px;   
}

.thumb img {
    height: 100%;
    left: 0;
    position: absolute;
    top: 0;
    transition: transform 0.5s ease 0s;
    width: 100%;
    z-index: -1;
}

.thumb:hover img {
    transform: scale(1.2) rotate(5deg);
} 
```

这是一个演示上述代码的[小提琴！](http://jsfiddle.net/Yc6be/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:30:02.000

### HTML

```
<a href="#">
    <img src="http://images.google.com/intl/en_ALL/images/logos/images_logo_lg.gif" />
</a> 
```

### CSS：

```
a {
    width: 150px;
    height: 125px;
    display: block;
    overflow: hidden;
    position: relative;
}

a img {
    width: 100%;
    height: 100%;
    -moz-transition: -moz-transform 0.5s ease;
    -webkit-transition: -webkit-transform 0.5s ease;
    -o-transition: -o-transform 0.5s ease;
    transition: transform 0.5s ease;
    position: absolute;
    z-index: -1;
    top: 0;
    left: 0;
}

a:hover img {
    -moz-transform: scale(1.2) rotate(5deg);
    -webkit-transform: scale(1.2) rotate(5deg);
    -o-transform: scale(1.2) rotate(5deg);
    transform: scale(1.2) rotate(5deg);
} 
```

### 小提琴：http: [//jsfiddle.net/kD2v8/](http://jsfiddle.net/kD2v8/)

# c - 要询问的预处理器语句

> ID：13560999
> 
> 赞同：4
> 
> 时间：2012-11-26T08:19:10.990
> 
> 标签：c

我写了如下内容：

```
#define ABC20
//#define   ABC10
//#define   ABC00

#ifdef ABC20
    #define  SYSTEMNAME                       "ABC2"
#elif ABC10
    #define  SYSTEMNAME                       "ABC1"
#elif ABC00
    #define  SYSTEMNAME                       "ABC0"
#else
    #define  SYSTEMNAME                       "UNKNOWN"
#endif 
```

它可以工作。

但如果我改为以下：

```
//#define ABC20
#define   ABC10
//#define   ABC00

#ifdef ABC20
    #define  SYSTEMNAME                       "ABC2"
#elif ABC10
    #define  SYSTEMNAME                       "ABC1"
#elif ABC00
    #define  SYSTEMNAME                       "ABC0"
#else
    #define  SYSTEMNAME                       "UNKNOWN"
#endif 
```

当我编译时，它得到错误说 ABC10 没有声明。你们知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T08:22:32.857

使用定义的测试：

```
#ifdef ABC20
  #define  SYSTEMNAME                       "ABC2"
#elif defined ABC10
  #define  SYSTEMNAME                       "ABC1"
#elif defined ABC00
  #define  SYSTEMNAME                       "ABC0"
#else
  #define  SYSTEMNAME                       "UNKNOWN"
#endif 
```

否则 elif 没有条件进行检查，因为在预处理后您剩下：   

```
#ifdef 
   #define  SYSTEMNAME                       "ABC2"
#elif 
  #define  SYSTEMNAME                       "ABC1"
#elif 
  #define  SYSTEMNAME                       "ABC0"
#else
  #define  SYSTEMNAME                       "UNKNOWN"
#endif 
```

但是`defined`用结果替换测试所以你得到：

```
#if   0
  #define  SYSTEMNAME                       "ABC2"
#elif 1
  #define  SYSTEMNAME                       "ABC1"
#elif 0
  #define  SYSTEMNAME                       "ABC0"
#else
  #define  SYSTEMNAME                       "UNKNOWN"
#endif 
```

或者，您可以在标志上定义一个`true`值，并将其余标志定义为假值，而无需更改测试：

```
#define ABC20 0
#define ABC10 1
#define ABC00 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:41:45.350

这与已经给出的答案基本相同，但我尝试从不同的角度解释它。

该指令`#elif`是`#if`. 该指令接受一个表达式并检查该值是否为真（即非零）。在这种情况下，表达式中使用的任何变量都应该存在。（诚​​然，C 标准说任何未定义的符号都应该被视为存在值 0 ——然而，依赖它被认为是非常糟糕的做法。）

在您的情况下，您正在寻找与“#ifdef”相对应的“else if”变体。这是这样写的：

```
#ifdef ABC20
#define  SYSTEMNAME                       "ABC2"
#elif defined(ABC10)
#define  SYSTEMNAME                       "ABC1"
... 
```

后面的括号`defined`是可选的，但包含后会使代码更容易阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:00:05.217

在您的第一个示例中，您定义了值......什么都没有......您只创建它们的定义。因此第一个

```
 #ifdef ABC20 
```

工作......因为定义了ABC20。

但是，当您注释掉该行并且不再定义 ABC20 时，您会到达

```
 #elif 
```

该语句不评估是否定义了该值，而是测试定义本身......它不存在。

试试这个

```
 //#define ABC20 1
    #define   ABC10 1
    //#define   ABC00 1 
```