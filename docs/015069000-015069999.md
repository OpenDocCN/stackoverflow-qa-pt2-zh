# StackOverflow 问答 15069000-15069999

# extjs - Extjs XTemplate 两个相同级别的数组循环？

> ID：15069000
> 
> 赞同：-1
> 
> 时间：2013-02-25T14:14:55.123
> 
> 标签：extjs

我想将 XTempate 与以下 json 数据一起使用，将一个数组循环到另一个数组中，

```
var data = {
    name : 'xxx',
    rowTitleArr : ['1','2','3'],
    colTitleArr : ['a','b','c']
}
var tpl = [
    '{name}',
    '<tpl for="{rowTitleArr}">',
        '----{.}<br>',
        '<tpl for="parent.colTitleArr">',
            '---------{.}<br>',
        '</tpl>',
    '</tpl>'
];
var t = new Ext.Template(tpl);
t.overwrite(xx,data); 
```

但结果是：

```
 ----1
  ---------a  
  ---------b
  ---------c
  ----2
  ----3 
```

我想要以下结果：

```
 ----1
  --------a
  --------b
  --------c
  ----2
  --------a
  --------b
  --------c
  ----3  
  --------a
  --------b
  --------c 
```

为什么 ？我犯了一个错误？提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:29:25.700

我对您的模板做了一些小改动：

这对我有用：

这是一个小提琴：http: [//jsfiddle.net/johanhaest/2WEVE/](http://jsfiddle.net/johanhaest/2WEVE/)

```
var tpl = [
    '{name}',
    '<br/>',
    '<tpl for="rowTitleArr">',
    '----{.}<br>',
        '<tpl for="parent.colTitleArr">',
    '---------{.}<br>',
        '</tpl>',
    '</tpl>']; 
```

# windows-7 - Nancy / TinyIoC“在我的机器上工作”问题

> ID：15069001
> 
> 赞同：0
> 
> 时间：2013-02-25T14:14:56.967
> 
> 标签：windows-7, .net-4.0, windows-server-2008-r2, nancy, tinyioc

所以我有这个我在过去半年左右一直在开发的 webapp。最近我发现 NancyFx 在 nuget 上已经升级到 0.16 并且去升级（从 0.12）。在我的机器上一切都很顺利，或者说看起来很顺利。但是在 CI 机器上，事情却出奇地错误。我得到以下堆栈跟踪：

```
2013-02-25 14:28:51:145 - OtherApp - ERROR METHOD - Nancy.TinyIoc.TinyIoCContainer.ConstructType
2013-02-25 14:28:51:145 - OtherApp - ERROR MESSAGE - Unable to resolve type: Nancy.Routing.DefaultRouteResolver

2013-02-25 14:28:51:145 -    at Nancy.TinyIoc.TinyIoCContainer.ConstructType(Type requestedType, Type implementationType, ConstructorInfo constructor, NamedParameterOverloads parameters, ResolveOptions options)
   at Nancy.TinyIoc.TinyIoCContainer.SingletonFactory.GetObject(Type requestedType, TinyIoCContainer container, NamedParameterOverloads parameters, ResolveOptions options)
   at Nancy.TinyIoc.TinyIoCContainer.ResolveInternal(TypeRegistration registration, NamedParameterOverloads parameters, ResolveOptions options)
   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.<CastIterator>d__b1`1.MoveNext()
   at Nancy.Diagnostics.DiagnosticsModuleCatalog.ConfigureContainer(IModuleKeyGenerator moduleKeyGenerator, IEnumerable`1 providers, IRootPathProvider rootPathProvider, IRequestTracing requestTracing, NancyInternalConfiguration configuration, DiagnosticsConfiguration diagnosticsConfiguration)
   at Nancy.Diagnostics.DiagnosticsModuleCatalog..ctor(IModuleKeyGenerator keyGenerator, IEnumerable`1 providers, IRootPathProvider rootPathProvider, IRequestTracing requestTracing, NancyInternalConfiguration configuration, DiagnosticsConfiguration diagnosticsConfiguration)
   at Nancy.Diagnostics.DiagnosticsHook.Enable(DiagnosticsConfiguration diagnosticsConfiguration, IPipelines pipelines, IEnumerable`1 providers, IRootPathProvider rootPathProvider, IEnumerable`1 serializers, IRequestTracing requestTracing, NancyInternalConfiguration configuration, IModelBinderLocator modelBinderLocator, IEnumerable`1 responseProcessors, ICultureService cultureService)
   at Nancy.Diagnostics.DefaultDiagnostics.Initialize(IPipelines pipelines)
   at Nancy.Bootstrapper.NancyBootstrapperBase`1.Initialise()
   at Nancy.Hosting.Self.NancyHost..ctor(INancyBootstrapper bootstrapper, HostConfiguration configuration, Uri[] baseUris)
   at Core.Jobs.HealthMonitorJob.Execute(IJobExecutionContext context)
   at Quartz.Core.JobRunShell.Run() 
```

现在我已经将问题追踪到一个特定的模块，该模块需要 TinyIoC 需要为其处理创建的大量参数，如果我禁用该模块，Nancy 可以正常启动，但当然没有必要的功能。在我的机器上它完美无缺。两者之间唯一明显的区别是我的机器运行的是 Windows 7，而 CI 运行的是 Windows Server 2008 R2 Enterprise SP1。有没有其他人有过这样的事情发生的经验？它快把我逼疯了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:47:44.983

异常应该有一个 InnerException 异常树，应该指出存在问题的特定类型。

# php - WebSocket：向客户端发送数据服务器不起作用

> ID：15069011
> 
> 赞同：-1
> 
> 时间：2013-02-25T14:15:21.163
> 
> 标签：php, websocket

我做了一个简单的php代码来测试WebSocket，客户端连接没有问题，可以在没有探针的情况下接收数据，但是我不能从服务器发送数据到客户端，请更正我的代码，谢谢

服务器.php

```
$in = '';
$content = '';
$connected = 0;
while($in != "quit"){

    if(!$connected){
        $in=trim(fgets(STDIN));
        $pos = strpos($in, 'Sec-WebSocket-Key:');
        if($pos !== false){
            $key = str_replace('Sec-WebSocket-Key: ','',$in);
            $magic = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";
            $resp = shell_exec("echo -n $key$magic | openssl sha1 -binary | base64");
        }
        if($in == ""){
            $head = "HTTP/1.1 101 Switching Protocols\r\n";
            $head.= "Connection: Upgrade\r\n";
            $head.= "Upgrade: websocket\r\n";
            $head.= "Sec-WebSocket-Accept: $resp\r\n";
            $head.= "\r\n";
            echo $head;
            $connected = 1;
        }
    }else{
        sleep(3);

        $hex = "810461626364"; //abcd
        $byte = str_split($hex, 2);
        $out = '';
        foreach($byte as $b){
            $out.= chr(hexdec($b));
        }
        echo $out;
    }
} 
```

输入终端：

```
ncat -l 12345 -c 'php -q server.php' 
```

并将客户端连接到 localhost:12345

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:13:54.190

解决了，它不起作用，因为它在响应标题后有两个换行符，我改变了这个

```
$head.= "Sec-WebSocket-Accept: $resp\r\n";
$head.= "\r\n";
echo $head; 
```

为了这

```
$head.= "Sec-WebSocket-Accept: $resp\r\n";
echo $head; 
```

它奏效了。

# css - 使用 CSS 链接到页面？

> ID：15069012
> 
> 赞同：-1
> 
> 时间：2013-02-25T14:15:23.363
> 
> 标签：css, hyperlink

有人会碰巧知道如何使用 CSS 链接到内部页面而不是使用 href 吗？

情况是......我在我的另一个网站（控制链接）上的外部来源的页面上有一个提要RSS。

截至目前，我正在使用以下代码来终止链接，因为我宁愿它无处可去，也不愿去一个不受欢迎的地方：

```
.col-one-thirdtest a.item-link {
pointer-events: none;
cursor: default;
} 
```

任何帮助将不胜感激。

通过使用[http://open.dapper.net/user-dapps.php](http://open.dapper.net/user-dapps.php)和[http://feed.informer.com/](http://feed.informer.com/)来选择我需要的页面部分，然后将它们转换为 RSS 提要解决了问题！任务完成！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:33:39.147

没有。CSS 不是脚本/行为语言。它是一种样式语言。（无论如何，您的`pointer-events`技巧[并不适用于所有浏览器](http://caniuse.com/#search=pointer-events)。）

您需要使用 JavaScript 更改链接位置。

此外（作为旁注），如果链接没有到达您想要的位置，您可能需要重新考虑从所述外部来源获取提要的原因。您要求的行为表明您的提要可能是实现所需效果的错误方法。

# php - 有条件地使 MySQL 查询结果成为 PHP 中的超链接

> ID：15069013
> 
> 赞同：-1
> 
> 时间：2013-02-25T14:15:26.627
> 
> 标签：php, mysql

我试图让 mysql 查询的某个单元格成为我最终将创建的用户配置文件的超链接。我可以将所有内容都作为链接，而不仅仅是名称字段。现在我只是为了测试目的而显示所有链接到主键（playerID）的东西。

我知道问题出在这里：`if (($cell->name)=='fName')`

```
<?php

// db login info
include $_SERVER['DOCUMENT_ROOT'] . '/includes/db_login.php';

// connecting, selecting, & error messages
if (!mysql_connect($db_host, $db_user, $db_pwd))
    die("Can't connect to database");

if (!mysql_select_db($db))
    die("Can't select database");

// get parsed playerID
$id = $_GET[id];

$result = mysql_query("SELECT *
                       FROM players p
                       LEFT JOIN baseball b ON p.playerID = b.playerID
                       LEFT JOIN hockey h ON p.playerID = h.playerID
                       LEFT JOIN football f ON p.playerID = f.playerID
                       WHERE p.playerID = '$id';");
if (!$result) {
    die("Query to show fields from table failed");
}

$fields_num = mysql_num_fields($result);

echo "<table border='1' cellpadding='1'><tr>";

// printing column headers
for($i=0; $i<$fields_num; $i++)
{
        $field = mysql_fetch_field($result);
        echo "<td><b>{$field->name}</b></td>";
        }

echo "</tr>\n";

// printing table rows
while($row = mysql_fetch_row($result))
{
    echo "<tr>";

    foreach($row as $cell){

        if (($cell->name)=='fName'){
            echo "<td><a href=\"info.php?id={$row[0]}\">$cell</a></td>";
                    }
        else {
            echo "<td>$cell</td>";
                    }
            }
    echo "</tr>\n";

}
echo "</table>";
// clear result variable
mysql_free_result($result);
mysql_close($result);

echo "<a href=\"testing.php\">Back</a>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:21:47.013

在我看来，你需要这样的东西：

```
<?php

// db login info
include $_SERVER['DOCUMENT_ROOT'] . '/includes/db_login.php';

// connecting, selecting, & error messages
if (!mysql_connect($db_host, $db_user, $db_pwd))
    die("Can't connect to database");

if (!mysql_select_db($db))
    die("Can't select database");

// get parsed playerID
$id = $_GET[id];

$result = mysql_query("SELECT *
                       FROM players p
                       LEFT JOIN baseball b ON p.playerID = b.playerID
                       LEFT JOIN hockey h ON p.playerID = h.playerID
                       LEFT JOIN football f ON p.playerID = f.playerID
                       WHERE p.playerID = '$id';");
if (!$result) {
    die("Query to show fields from table failed");
}

print_r ($result);

$fields_num = mysql_num_fields($result);

echo "<table border='1' cellpadding='1'><tr>";
echo "<td><b>SCHMOHAWKS</b></td><tr>";

// printing column headers
for($i=0; $i<$fields_num; $i++)
{
        $field = mysql_fetch_field($result);
        echo "<td><b>{$field->name}</b></td>";
        }
echo "</tr>\n";

// printing table rows
// koala note: use mysql_fetch_assoc instead
while(($row = mysql_fetch_assoc($result)) != FALSE){
    echo "<tr>";

    // $row is array... foreach( .. ) puts every element
    // of $row to $cell variable

    foreach($row as $cell_name => $cell){

        // cell name will be the associative array's key
        // so things are as simple as this:
        if ($cell_name=='fName'){
            echo "<td><a href=\"info.php?id=$row[0]\">$cell</a></td>";
                    }
        else {
            echo "<td>$cell</td>";
                    }
            }
    echo "</tr>\n";

}
echo "</table>";
// clear result variable
mysql_free_result($result);
mysql_close($result);

echo "<a href=\"testing.php\">Back</a>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:23:04.723

***注意：**您可能应该为此使用 PDO，因为如果我理解正确，您正在使用的功能已被弃用。*

* * *

显然我在下面的回答没有像你预期的那样工作，甚至投了反对票，但它应该工作。如果您只是复制并粘贴它，可能不会，因为我可能在您的其余代码中遗漏了一些东西，但原则就在那里。用于`mysql_fetch_assoc`获取关联数组，该数组将包含列名作为键。循环遍历数组并检查您想要以不同方式处理的特殊情况的键。

无论哪种方式，您都需要学习如何阅读文档，更重要的是如何使用该功能`var_dump`来准确了解您正在处理的内容。例如尝试运行以下命令：

```
while($row = mysql_fetch_assoc($result))
{
    var_dump($row);
} 
```

它输出什么？它给了你你认为你拥有的东西吗？它实际上是一个数组吗？钥匙看起来像您预期的那样吗？接下来你可以尝试运行这个：

```
while($row = mysql_fetch_assoc($result))
{
    foreach($row as $name => $value)
        var_dump($name, $value);
    break; // Skip rest of rows in this case
} 
```

名称和价值是应有的吗？您尝试做的事情并不太难，如果您只是复制和粘贴代码而不试图了解正在发生的事情，您将不会学到很多东西:)

* * *

在您的循环中，我不确定您要做什么，但这应该可以：

```
while($row = mysql_fetch_assoc($result))
{
    echo "<tr>";
    foreach($row as $name => $value)
    {
        if ($name == 'fName')
            printf('<td><a href="info.php?id=%u">%s</a></td>', $row['id'], htmlspecialchars($value));
        else
            printf('<td>%s</td>', htmlspecialchars($value));
    }
    echo "</tr>\n";
} 
```

重要的变化是：

*   请改用 mysql_fetch_assoc，这样您就可以得到列名而不是列号作为键。
*   添加`$name =>`到 foreach 循环以在循环期间访问名称。
*   使用`printf`和`htmlspecialchars`更安全地打印您的值。

# javascript - 获取js对象中的物品数量

> ID：15069016
> 
> 赞同：3
> 
> 时间：2013-02-25T14:15:36.520
> 
> 标签：javascript

我需要获取 js 对象属性计数。

我搜索并找到了这样的解决方案：

```
var foo = {"key1": "value1", "key2": "value2", "key3": "value3"};
var count = 0;
for (var k in foo) {
    if (foo.hasOwnProperty(k)) {
      ++count;
    }
} 
```

问题：为什么需要条件`if (foo.hasOwnProperty(k)) {`？

我认为这段代码必须始终运行良好，也没有这种情况。

我错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:19:32.983

请参阅：[如何有效地计算 JavaScript 中对象的键/属性的数量？](https://stackoverflow.com/questions/126100/how-to-efficiently-count-the-number-of-keys-properties-of-an-object-in-javascrip)

是的，hasOwnProperty 方法在这里确实是多余的。

无论如何，为什么您需要获取属性计数？恐怕你正在以一种糟糕的方式解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:24:26.607

一些对象具有系统添加的属性（即原型）。

你通常不想计算那些。您询问的条件将确保您只计算属于您的对象本身的属性。

因此，如果您打算创建一个返回任何对象计数的函数，最好包含条件，否则您不一定需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T14:24:33.020

这是为了防止您计算继承的成员。

如果您这样做（不建议）：

```
Object.prototype.x = 1; 
```

那么这给出了 4 的计数：

```
var foo = {"key1": "value1", "key2": "value2", "key3": "value3"};
var count = 0;
for (var k in foo) {
  ++count;
} 
```

但`if (foo.hasOwnProperty(k))`它仍然给出3。

# mysql - Mysql JDBC主/从分离读写操作

> ID：15069018
> 
> 赞同：0
> 
> 时间：2013-02-25T14:15:40.037
> 
> 标签：mysql, database-replication, mysql-connector, connector-j

我已经开始检查 mysql 连接器 j 的复制范式，发现我们可以对主从数据库进行单独的读写操作。

我检查了下面的页面并获得了一些关于操作的线索，但仍然需要知道 mysql-jdbc 如何理解哪个服务器是主服务器以及哪些服务器是从属服务器？（可能有点傻，抱歉）

[http://www.dragishak.com/?p=307](http://www.dragishak.com/?p=307)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:26:28.590

ReplicationDriver 或 NonRegisteringReplicationDriver 将第一个 url 决定为**master**，其余的则视为**slave**

您应该考虑的一点是：如果您使用的是 ReplicationDriver 或 NonRegisteringReplicationDriver，您需要让至少两个主机包含相同的数据库实例。否则你会得到一个 SQLException 告诉：“**必须指定至少一个从属主机连接到主/从复制负载平衡功能**”。

还有一点：您实际上不需要创建 NonRegisteringReplicationDriver 的实例。因为 ReplicationDriver 也在使用它。您可以通过让您的应用程序抛出和异常来检查它。你会看到的是；通过 NonRegisteringReplicationDriver.connect(..) 方法尝试了数据库连接。

**编辑（！）**：您实际上不需要为您的系统创建非特定驱动程序。您需要知道的是您在做什么以及正确的连接 url。因为 Driver 类本身会根据复制模式和负载平衡模式检查 url。然后它触发所需的驱动程序实例。

# python - 使用python读取和显示原始图像

> ID：15069028
> 
> 赞同：3
> 
> 时间：2013-02-25T14:16:09.900
> 
> 标签：python, image-processing

我想尝试使用 spyder python 查看图像，如下所示：

[skydrive 分享](http://sdrv.ms/15JHr6a) 的图片是：

*   uint16（10 位）
*   宽度：1376 像素，高度：960 像素
*   没有标题
*   拜耳纹蓝绿、绿红

什么python脚本适合？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T18:13:22.890

这是一种方法。

从进口开始

```
from matplotlib import pyplot as plt
import numpy as np 
```

现在分配空间

```
image = np.empty((1376,960), np.uint16) 
```

将图像读入数组：

```
image.data[:] = open('20_1-20ms.raw').read() 
```

显示它：

```
plt.imshow(image) 
```

# php - 解析数据时出错 org.json.JSONException：值 我是 Android 开发的新手。 我正在尝试使用 JSON 在列表视图中基于用户 ID 获取 db 值。 我在stackoverflow上搜索了这个问题，但我找不到解决方案。 我不知道我得到了什么，JSONArray 或 JSONObject。 标题显示在 logcat 中。我已经尝试了下面提到的代码。 p 问问题 问问题 2013-02-25T14:16:24.363 8895 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我是 Android 开发的新手。 我正在尝试使用 JSON 在列表视图中基于用户 ID 获取 db 值。 我在stackoverflow上搜索了这个问题，但我找不到解决方案。 我不知道我得到了什么，JSONArray 或 JSONObject。 标题显示在 logcat 中。我已经尝试了下面提到的代码。 public class Search_Id extends Activity implements OnClickListener { private static String url_search_by_id="php file in the remote server"; private static final String REGISTER="regs"; private static final String ID="id"; private static final String FNAME="fname"; private static final String LNAME="lname"; private static final String PROFILEFOR="profilefor"; private static final String AGE="age"; private ProgressDialog PDialog; EditText Et_sear_id; Button Btn_Search; TextView search_id_detail_id,search_id_detail_fname,search_id_detail_lname,search_id_detail_profilefor,search_id_detail_age; public void onCreate(Bundle b) { super.onCreate(b); setContentView(R.layout.search_id); Et_sear_id=(EditText)findViewById(R.id.sear_et_id); Btn_Search=(Button)findViewById(R.id.sear_btn_search); Btn_Search.setOnClickListener(this); } @Override public void onClick(View v) { // TODO Auto-generated method stub if(v.equals(Btn_Search)) { //new SearchDetail().execute(); final String st_id=Et_sear_id.getText().toString(); if(st_id.length()>0) { ArrayList <namevaluepair>postparameter=new ArrayList<namevaluepair>(); postparameter.add(new BasicNameValuePair("id",st_id)); String response=null; try { response = CustomHttpClient.executeHttpPost("php file in the remote server", postparameter); String res=response.toString(); // res = res.trim(); res= res.replaceAll("\\s+",""); //error.setText(res); //Toast.makeText(getApplicationContext(), res, Toast.LENGTH_SHORT).show(); if(res.equals("yes")) { new SearchDetail().execute(); Toast.makeText(getApplicationContext(), "Correct",Toast.LENGTH_SHORT).show(); } else { Toast.makeText(getApplicationContext(), "Incorrect",Toast.LENGTH_SHORT).show(); Et_sear_id.setText(""); } } catch (Exception e) { // TODO: handle exception Toast.makeText(getApplicationContext(), e.toString(),Toast.LENGTH_LONG).show(); } } else { Et_sear_id.setError("Provide ID to Search"); } } } class SearchDetail extends AsyncTask <string,string,string>{ //final String St_sear_id1=Et_sear_id.getText().toString(); @Override protected void onPreExecute() { super.onPreExecute(); PDialog=new ProgressDialog(Search_Id.this); PDialog.setMessage("Loading..."); PDialog.setIndeterminate(false); PDialog.setCancelable(true); PDialog.show(); } @Override protected String doInBackground(String... arg0) { final String st_id=Et_sear_id.getText().toString(); // TODO Auto-generated method stub List <namevaluepair>params=new ArrayList<namevaluepair>(); params.add(new BasicNameValuePair("id",st_id)); JSONParser jsonParser=new JSONParser(); JSONObject json=jsonParser.makeHttpRequest(url_search_by_id_guna,"POST",params); //Log.d("Create Response", json.toString()); try { //Toast.makeText(getApplicationContext(), "Comes into Try Block", Toast.LENGTH_LONG).show(); JSONArray jsonarray = json.getJSONArray(REGISTER); for(int i=0;i<jsonarray.length();i++) {="" jsonobject="" jo="jsonarray.getJSONObject(i);" int="" id="jo.getInt(ID);" string="" fname="jo.getString(FNAME);" lname="jo.getString(LNAME);" profile_for="jo.getString(PROFILEFOR);" age="jo.getString(AGE);" intent="" in="new" intent(getapplicationcontext(),search_id_detail.class);="" i.putextra("register",="" regs);="" in.putextra("id",id);="" in.putextra("fname",fname);="" in.putextra("lname",lname);="" in.putextra("profilefor",profile_for);="" in.putextra("age",age);="" startactivity(in);="" }="" catch="" (exception="" e)="" todo:="" handle="" exception="" e.printstacktrace();="" return="" null;="" protected="" void="" onpostexecute(string="" arg)="" pdialog.dismiss();="" php文件如下：="" <?php="" *="" following="" code="" will="" list="" all="" products="" array="" for="" json="" response="" $response="array();" $id="$_POST['id'];" require_once="" 'vivagha_db_connect.php';="" connect="" to="" database="" $db="new" db_connect();="" get="" from="" table="" $result="mysql_query(&quot;select" *from="" regs="" where="" db_reg_id="$id&quot;)" or="" die(mysql_error());="" check="" empty="" result="" if(mysql_num_rows($result)="">0) { //looping through all results //products node //$response["regs"]=array(); while($row=mysql_fetch_array($result)) { //temp user array //$register=array(); $response["id"]=$row["db_reg_id"]; $response["fname"]=$row["db_reg_fname"]; $response["lname"]=$row["db_reg_lname"]; $response["profilefor"]=$row["db_reg_profilefor"]; $response["age"]=$row["db_reg_age"]; //push single product into final response array //array_push($response["regs"],$register); $response["success"]=1; $response["message"]="Found"; } //success //response["success"]=1; //echo JSON response echo json_encode($response); } else { //no product found $response["success"]=0; $response["message"]="No Products Found"; //echo no users JSON //echo json_encode($response); } //} ?> 我输入了用户的 id，然后如果 id 可用，则必须显示用户的详细信息。但它给了我标题所暗示的日志。 如果我能找到解决方案，这对我学习 android 会有帮助。 据我所知，问题在于您获取的是实际的 php 文件，而不是处理此类文件的结果。 这个问题实际上与android无关。尝试在您的网络浏览器上输入相同的地址，您将看到您为我们发布的相同 PHP 文件。 您需要配置一个服务器来处理该 PHP 文件并返回 JSON 响应。 phpandroidmysqljsonphpmyadmin 4 1 回答 1 This answer is useful 2 据我所知，问题在于您获取的是实际的 php 文件，而不是处理此类文件的结果。 这个问题实际上与android无关。尝试在您的网络浏览器上输入相同的地址，您将看到您为我们发布的相同 PHP 文件。 您需要配置一个服务器来处理该 PHP 文件并返回 JSON 响应。 于 2013-02-25T14:20:34.583 回答 Related 1 actionscript-3 - 将带有两个分隔符的字符串拆分为 arraycollection 1 javascript - JavaScript 无法在我的服务器上运行 2 java - Android / Java：莫名其妙地进入catch块但跳过行 1 graphics - 光线追踪中的相机 1 eclipse - 如何将 Skype 提供程序添加到 Eclipse 通信框架中？ 3 wpf - 为什么 ViewModel 需要实现 INotifyPropertyChanged 或使用 Dependency Properties？ 2 python - 睡衣与龙卷风的融合 1 windows - 使用批处理脚本自动将最新文件复制到文件夹 1 java - Facebook 在 libGDX 中的实现 1 objective-c - 从结果类型为“CardCreationClass *”的函数返回“UIView *_strong”的不兼容指针类型 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</jsonarray.length();i++)></namevaluepair></namevaluepair></string,string,string></namevaluepair></namevaluepair>

> ID：15069031
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, android, mysql, json, phpmyadmin

我是 Android 开发的新手。

我正在尝试使用 JSON 在列表视图中基于用户 ID 获取 db 值。

我在stackoverflow上搜索了这个问题，但我找不到解决方案。

我不知道我得到了什么，JSONArray 或 JSONObject。

标题显示在 logcat 中。我已经尝试了下面提到的代码。

```
public class Search_Id extends Activity implements OnClickListener
{
    private static String url_search_by_id="php file in the remote server";

    private static final String REGISTER="regs";
    private static final String ID="id";
    private static final String FNAME="fname";
    private static final String LNAME="lname";
    private static final String PROFILEFOR="profilefor";
    private static final String AGE="age";

    private ProgressDialog PDialog;
    EditText Et_sear_id;    
    Button Btn_Search;

    TextView  search_id_detail_id,search_id_detail_fname,search_id_detail_lname,search_id_detail_profilefor,search_id_detail_age;

public void onCreate(Bundle b)
{
    super.onCreate(b);
    setContentView(R.layout.search_id);
    Et_sear_id=(EditText)findViewById(R.id.sear_et_id);
    Btn_Search=(Button)findViewById(R.id.sear_btn_search);
    Btn_Search.setOnClickListener(this);
}
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    if(v.equals(Btn_Search))
    {
    //new SearchDetail().execute();
    final String st_id=Et_sear_id.getText().toString();

    if(st_id.length()>0)
    {
        ArrayList<NameValuePair> postparameter=new ArrayList<NameValuePair>();
        postparameter.add(new BasicNameValuePair("id",st_id));

        String response=null;
        try
        {
            response = CustomHttpClient.executeHttpPost("php file in the remote      server", postparameter);  
            String res=response.toString();
            //  res = res.trim();
            res= res.replaceAll("\\s+","");
            //error.setText(res);

            //Toast.makeText(getApplicationContext(), res, Toast.LENGTH_SHORT).show();
            if(res.equals("yes"))
            {   
                new SearchDetail().execute();
                Toast.makeText(getApplicationContext(), "Correct",Toast.LENGTH_SHORT).show();
            }
            else
            {
                Toast.makeText(getApplicationContext(), "Incorrect",Toast.LENGTH_SHORT).show();
                Et_sear_id.setText("");
            }
        }
        catch (Exception e) {
            // TODO: handle exception
            Toast.makeText(getApplicationContext(), e.toString(),Toast.LENGTH_LONG).show();
        }
    }
    else
    {
        Et_sear_id.setError("Provide ID to Search");
    }

    }
}

class SearchDetail extends AsyncTask<String,String,String>
{
    //final String St_sear_id1=Et_sear_id.getText().toString();

    @Override
    protected void onPreExecute()
    {
        super.onPreExecute();
        PDialog=new ProgressDialog(Search_Id.this);
        PDialog.setMessage("Loading...");
        PDialog.setIndeterminate(false);
        PDialog.setCancelable(true);
        PDialog.show();
    }
    @Override
    protected String doInBackground(String... arg0) {
        final String st_id=Et_sear_id.getText().toString();

        // TODO Auto-generated method stub
        List<NameValuePair> params=new ArrayList<NameValuePair>();          
        params.add(new BasicNameValuePair("id",st_id));

        JSONParser jsonParser=new JSONParser();
        JSONObject json=jsonParser.makeHttpRequest(url_search_by_id_guna,"POST",params);

        //Log.d("Create Response", json.toString());

        try
        {
            //Toast.makeText(getApplicationContext(), "Comes into Try Block", Toast.LENGTH_LONG).show();
            JSONArray jsonarray = json.getJSONArray(REGISTER);

            for(int i=0;i<jsonarray.length();i++)
            {
                JSONObject jo=jsonarray.getJSONObject(i);

                int id   = jo.getInt(ID);
                String fname = jo.getString(FNAME);
                String lname= jo.getString(LNAME);
                String profile_for=jo.getString(PROFILEFOR);
                String age=jo.getString(AGE);

                Intent in=new Intent(getApplicationContext(),Search_Id_Detail.class);
                //i.putExtra("REGISTER", regs);
                in.putExtra("ID",id);
                in.putExtra("FNAME",fname);
                in.putExtra("LNAME",lname);
                in.putExtra("PROFILEFOR",profile_for);
                in.putExtra("AGE",age);
                startActivity(in);          
            }

        }
        catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }
        return null;
    }
    protected void onPostExecute(String arg)
    {
        PDialog.dismiss();
    }
}
} 
```

PHP文件如下：

```
<?php

     /* Following code will list all products */

     //array for JSON response
     $response=array();

     $id=$_POST['id'];

     require_once 'vivagha_db_connect.php';
     //Connect to database
     $db=new DB_CONNECT();

     //get all products from products table
     $result=mysql_query("select *from regs where db_reg_id=$id") or die(mysql_error());

     //check for empty result
      if(mysql_num_rows($result)>0)
        {
          //looping through all results
          //products node
          //$response["regs"]=array();

          while($row=mysql_fetch_array($result))
          {
             //temp user array
             //$register=array();
             $response["id"]=$row["db_reg_id"];
             $response["fname"]=$row["db_reg_fname"];
             $response["lname"]=$row["db_reg_lname"];
             $response["profilefor"]=$row["db_reg_profilefor"];
             $response["age"]=$row["db_reg_age"];

             //push single product into final response array
             //array_push($response["regs"],$register);
             $response["success"]=1;
             $response["message"]="Found";
        }

        //success
        //response["success"]=1;

        //echo JSON response
        echo json_encode($response);
     }
     else
     {
        //no product found
        $response["success"]=0;
        $response["message"]="No Products Found";

         //echo no users JSON   
         //echo json_encode($response);
     }
    //} 
    ?> 
```

我输入了用户的 id，然后如果 id 可用，则必须显示用户的详细信息。但它给了我标题所暗示的日志。

如果我能找到解决方案，这对我学习 android 会有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:20:34.583

据我所知，问题在于您获取的是实际的 php 文件，而不是处理此类文件的结果。

这个问题实际上与android无关。尝试在您的网络浏览器上输入相同的地址，您将看到您为我们发布的相同 PHP 文件。

您需要配置一个服务器来处理该 PHP 文件并返回 JSON 响应。

# c# - 循环遍历文本框以检索数据，c#

> ID：15069033
> 
> 赞同：-1
> 
> 时间：2013-02-25T14:16:30.773
> 
> 标签：c#, textbox, foreach

我有一个名为“Player”的类，它的构造函数采用 2 个字符串和一个 int。

这些在表单上的文本框中声明，每个团队（主场 H / 客场 A）具有不同的名称，并且每个名称类型（Last L / First F）添加到文本框的名称。因此给出一个唯一的名称，例如`txtFHome1`.

在一个`foreach`循环中，我想创建一个包含页面上文本框详细信息的新播放器。

这就是我到目前为止所得到的。

```
List <Player> HomeTeam = new List<Player>    

private void btnAccept_Click(object sender, EventArgs e)
{
     foreach (Control c in this.Controls)
     {
          for (int i = 0; i < 10; i++)
          {
            HomeTeam.Add (new Player(c.Name.EndsWith("FHome"+i),c.Name.EndsWith("LHome"+i),c.Name.EndsWith("upDownH"+i)));
          }
     }
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:26:22.613

从您的帖子中，我了解到 11 个玩家始终有 3 个控件，因此无需`Controls`在表单中遍历所有控件。

```
private void btnAccept_Click(object sender, EventArgs e)
{
     for (int i = 0; i < 10; i++)
     {
          var player = new Player(((TextBox)this.Controls.FindControl("FHome" + i)).Text, ((TextBox)this.Controls.FindControl("LHome" + i)).Text, ((NumericUpDown)this.Controls.FindControl("upDownH" + i)).Value);
          HomeTeam.Add(player);
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:24:01.840

第一种方法是使用带有所有控件的字典。这是最快和最简单的方法。

```
Dictionary<int, TextBox> FHome;
Dictionary<int, TextBox> LHome;
Dictionary<int, TextBox> upDownH; 
```

您应该像这样添加控件：

```
FHome.Add(0, textBoxLHome0);
FHome.Add(1, textBoxLHome1); 
```

然后在你的代码中你可以使用

```
for (int i = 0; i < 10; i++)
{
    HomeTeam.Add (new Player(FHome[i].Text, LHome[i].Text, upDownH[i].Text));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:28:50.473

尝试这个：

```
Controls.OfType<TextBox>().ToList().ForEach((textbox) =>
    {
      for (int i = 0; i < 10; i++)
      {
        textbox.Text = "your text";
      }
    }); 
```

记得包括`using System.Linq`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T14:36:04.513

我建议您至少尝试将三个文本框封装到一个 UserControl 中，如下所示：

![在此处输入图像描述](../Images/396a910a0298794e7dcfe4294ba0bc5c.png)

```
public partial class ControlPlayerParams : UserControl {

    public string Param1 { get { return this.textBox1.Text; } }
    public string Param2 { get { return this.textBox2.Text; } }
    public string Param3 { get { return this.textBox3.Text; } }

    public ControlPlayerParams() {
        this.InitializeComponent();
    }

} 
```

这样，您至少可以更流畅、更安全地执行您想做的事情（此外，您只需修改一个 UserControl 以防您需要更改某些内容（验证 ??））：

```
foreach (ControlPlayerParams cpp in this.Controls.OfType<ControlPlayerParams>())
  HomeTeam.Add(new Player(cpp.Param1, cpp.Param2, cpp.Param3)); 
```

**但是**如果你问我，你应该重新考虑一下应用程序的架构。

# android - 通话过程如何与蓝牙设备配合使用？

> ID：15069043
> 
> 赞同：1
> 
> 时间：2013-02-25T14:16:55.277
> 
> 标签：android, iphone, ios, bluetooth, headset

我在带有蓝牙耳机的 Android 手机上测试了一些东西。我对此几乎没有问题。

设备规格：

Android 2.3 以上耳机蓝牙配置文件：HFP,A2DP

我接受了来自 android 手机的接受按钮的呼叫，并且能够听到来自蓝牙耳机的呼叫。之后，我将 android 设备移出范围并接受了来自 android 的呼叫，并且当 android 手机进入蓝牙范围蓝牙耳机连接时自动。它是通用的，我的意思是所有蓝牙耳机都支持相同的还是有任何偏差？

我想知道当我们接受来自耳机或 Android 手机的呼叫时会发生什么。Android 操作系统是否会创建一个呼叫会话/音频会话，并在从耳机按下接受按钮时将其传输到耳机。如果已接听电话且当耳机在蓝牙范围内时，Android 手机会将音量路由到耳机。在这两种情况下都会发生同样的事情（只是路由音频）。我想详细了解这两种情况的呼叫处理。有人可以帮我解决这个问题吗？

iOS 中的调用过程有何不同？

编辑

当我们接受呼叫时，是否会创建像 AVAudoioSession 这样的呼叫会话？

@jjv360：

“即使连接了蓝牙耳机，应用程序也可以手动分配路线，在这种情况下，由应用程序来处理检测到新路线时发生的事情......”

是否可以在 iOS 应用程序中将通话会话路由到耳机（从麦克风到耳机 sco）？您能否就此提供一些指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:38:53.223

在 iOS 上，如果您在音频会话处于活动状态时连接蓝牙耳机，则当前音频应用程序会收到通知，并且默认情况下会将会话的路由传输到耳机。即使连接了蓝牙耳机，应用程序也可以手动分配路线，在这种情况下，由应用程序来处理检测到新路线时发生的情况......

此外，AFAIK 设备（在很短的时间内）和耳机都尝试重新连接，因此主要取决于耳机在超出范围时尝试重新连接。不过，几乎所有耳机都应该这样做。

使用哪个按钮来接听电话（在设备上或耳机上）并不重要，如果连接了蓝牙耳机，它将被使用，除非应用程序指定它不想使用该路由。

Android 和 iOS 的调用过程 AFAIK 相同。

使用所使用的协议，A2DP 是听音乐时使用的高质量协议。它支持高质量的音频，但是是单向的，所以只有在蓝牙耳机没有从麦克风录音的情况下才有效。当还需要录制时使用HFP，但质量较差。这就是为什么你会注意到，如果你在 iOS 上用蓝牙耳机听音乐然后启动录音应用程序，音质会变差，直到你停止录音......

# java - 抽象批处理 SFTP 多个目标和自动重试

> ID：15069049
> 
> 赞同：0
> 
> 时间：2013-02-25T14:17:12.843
> 
> 标签：java, oracle, ftp, solaris, batch-processing

我使用内部 Java 框架进行了大量批处理工作。对我们来说特别麻烦的活动之一是 SFTP，我们遇到了两个问题：

1.  将文件发送到多个目的地，如果一个目的地不可用，整个过程将停止。
2.  没有自动重试，其中一些网络故障导致批处理停止。

目前，我们使用 Control-M 来存储所有 SFTP 相关信息：

1.  From & To 的主机和路径
2.  PGP 密钥信息
3.  用户名密码

虽然使用 Control-M 做一些事情来解决这些问题当然是可能的，但我发现它是一个笨重的野兽。我正在寻找有关抽象文件传输方式的建议，以便批处理可以生成文件，将其放入某个本地文件夹，并以稳健的方式将传输解耦到目的地，同时在何时提供警报/报告事情出错了，没有停下来。

特别是我正在寻找任何现成的东西，而不是自己编写这样的工具。

**环境**

*   索拉里斯 10
*   爪哇 6
*   甲骨文 11
*   控制-M 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:46:15.603

*   [JScape SFTP](http://www.jscape.com/)是一个企业级的商业 SFTP 系统。
*   [Aspera](http://asperasoft.com/)是一个比 SFTP 快得多的企业文件传输系统；适合大文件。
*   [Signiant](http://www.signiant.com/)是另一个企业文件传输和工作流系统。它的速度与 Aspera 相似。

# android - android：删除文件 - 代码排序

> ID：15069061
> 
> 赞同：0
> 
> 时间：2013-02-25T14:17:27.323
> 
> 标签：android, file, view

我想问一个与代码排序有关的问题。

我正在开发一个绘图应用程序，让用户选择图像，然后裁剪图像以适合绘图板。如果不删除代码中`tempFile`显示的内容，则使用以下代码一切正常：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
        super.onActivityResult(requestCode, resultCode, data);      

        if (requestCode == PHOTO_PICKED && resultCode == RESULT_OK) 
        {
            if (data == null) 
            {
                Log.w(TAG, "Null data, but RESULT_OK, from image picker!");
                Toast t = Toast.makeText(this, R.string.no_photo_picked, Toast.LENGTH_SHORT);
                t.show();
                return;
            }

            if (data != null) 
            {
                    File tempFile = getTempFile();
                    String filePath= Environment.getExternalStorageDirectory() +"/"+TEMP_PHOTO_FILE;
                    Toast.makeText(this, "path "+filePath, Toast.LENGTH_LONG).show();
                    doodleView.load_pic(filePath);
//                    if (tempFile.exists()) tempFile.delete();              
            }       
        } 
```

绘图板是一个名为 doodleView 的扩展视图，它会加载裁剪后的选定图像，`doodleView.load_pic(filePath);`我还想在使用 tempFile 后删除它，因为这些是多余的。然而，如果我添加`if (tempFile.exists()) tempFile.delete();`程序将崩溃，因为在图像文件加载到扩展视图之前文件被删除。

如果那样的话，它怎么能重新排列呢？或者是否可以在扩展视图上执行这样的删除 tempFile？裁剪和放置临时文件的所有主要操作都写在 MainActivity 中。

提前感谢您的建议！

# linux - 连接/断开电源时使用 udev 激活脚本

> ID：15069063
> 
> 赞同：5
> 
> 时间：2013-02-25T14:17:26.963
> 
> 标签：linux, udev

当我连接/断开电源时，我试图让 udev 运行几个小脚本。我在 /etc/udev/rules.d/50-caff.rules 中有以下代码：

```
SUBSYSTEM=="power_supply", ENV{POWER_SUPPLY_STATUS}=="Charging", RUN+="/home/haukur/rules/off.sh"
SUBSYSTEM=="power_supply", ENV{POWER_SUPPLY_STATUS}=="Discharging", RUN+="/home/haukur/rules/on.sh" 
```

这是on.sh：

```
#!/bin/sh
caffeine -a 
```

和 off.sh：

```
#!/bin/sh
caffeine -d 
```

无论如何，我写了这些，写进`udevadm control --reload-rules`了 bash，然后……什么也没发生。当我插入或拔下电源时，咖啡因似乎根本没有激活。

根据`/var/log/syslog`（Ubuntu的替代品`/var/log/messages`）udev在我拔掉插头时识别：

```
Feb 26 08:44:52 (none) udevd[3838]: starting '/home/haukur/rules/off.sh' 
```

但是当它试图运行 off.sh （它本身试图运行咖啡因）时，它会返回这个错误：

```
udevd[2719]: '/home/haukur/rules/off.sh'(err) '** (caffeine:3840): WARNING **: Command line `dbus-launch --autolaunch=62907743a139af9b3c86412e00000026 --binary-syntax --close-stderr' exited with non-zero exit status 1: Autolaunch error: X11 initialization failed.\n' 
```

你知道有什么办法可以解决这个问题吗？使用 xmonad WM 运行 Ubuntu 12.04 LTS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:03:25.457

如果应用程序“caffeine”需要访问您的桌面，您可能需要在调用程序之前导出 DISPLAY：

```
export DISPLAY=:0 
```

您可以简单地将其添加到命令调用中：

```
DISPLAY=:0 caffeine -a 
```

# reverse-proxy - gwan 反向代理

> ID：15069069
> 
> 赞同：0
> 
> 时间：2013-02-25T14:17:54.163
> 
> 标签：reverse-proxy, g-wan

我正在寻找将 gwan 配置为我的 web python 应用程序的反向代理缓存。
我在网上找不到一些例子。

非常感谢你的例子

* * *

洛朗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:05:29.677

如果您的目标只是*加速*您的 Python 应用程序，那么您应该从 G-WAN 运行它（参见[hello.py](http://gwan.ch/source/hello.py)示例）。

一些（高级）用户已使用 G-WAN 处理程序编写自己的自定义代理，但 G-WAN 将`embedded proxy`在接下来的几周内记录其（和负载均衡器）。

它仍然可以在没有配置文件的情况下工作，因此您无需学习任何新内容。

有能力的用户会喜欢使用自己的脚本个性化代理的能力。

在“运行”的解决方案和为广大公众准备好的完善版本之间总是有很长的路要走。

# html - 无法让最后一个孩子在我的 CSS 中工作

> ID：15069072
> 
> 赞同：2
> 
> 时间：2013-02-25T14:17:59.450
> 
> 标签：html, css, css-selectors

我正在尝试使用此 css 为最后一个 h3 元素应用不同的背景，但我不明白为什么它不起作用：

```
#s5_accordion_menu h3:last-child {
 background-color:#000000!;
 } 
```

这是html

```
<div id="s5_accordion_menu">
<div>

<h3 id='current' class='s5_am_toggler'><span class="s5_accordion_menu_left"><a class="mainlevel" href="/shooting-tips.html" >
<span>Shooting Tips</span></a></span></h3>
<div class='s5_accordion_menu_element' style='display: none; border:none; overflow: hidden; padding: 0px; margin: 0px'></div>
    <h3 class='s5_am_toggler'><span class="s5_accordion_menu_left"><a class="mainlevel" href="/stickhandling-tips.html" ><span>Stickhandling / Passing Tips</span></a></span></h3>
<div class='s5_accordion_menu_element' style='display: none; border:none; overflow: hidden; padding: 0px; margin: 0px'></div>
    <h3 class='s5_am_toggler'><span class="s5_accordion_menu_left"><a class="mainlevel" href="/skating.html" ><span>Skating Tips</span></a></span></h3>
<div class='s5_accordion_menu_element' style='display: none; border:none; overflow: hidden; padding: 0px; margin: 0px'></div>
    <h3 class='s5_am_toggler'><span class="s5_accordion_menu_left"><a class="mainlevel" href="/skating-2.html" ><span>Training Tips</span></a></span></h3>
<div class='s5_accordion_menu_element' style='display: none; border:none; overflow: hidden; padding: 0px; margin: 0px'></div>
    <h3 class='s5_am_toggler'><span class="s5_accordion_menu_left"><a class="mainlevel" href="/skating-3.html" ><span>Training Aid Drills</span></a></span></h3>
<div class='s5_accordion_menu_element' style='display: none; border:none; overflow: hidden; padding: 0px; margin: 0px'></div>
    <h3 class='s5_am_toggler'><span class="s5_accordion_menu_left"><a class="mainlevel" href="/skating-4.html" ><span>Product Reviews</span></a></span></h3>
<div class='s5_accordion_menu_element' style='display: none; border:none; overflow: hidden; padding: 0px; margin: 0px'></div>
    <h3 class='s5_am_toggler'><span class="s5_accordion_menu_left"><a class="mainlevel" href="/skating-5.html" ><span>HockeyShot Commercials</span></a></span></h3>
<div class='s5_accordion_menu_element' style='display: none; border:none; overflow: hidden; padding: 0px; margin: 0px'></div>
    <h3 class='s5_am_toggler'><span class="s5_accordion_menu_left"><a class="mainlevel" href="/skating-6.html" ><span>Contest - Promos</span></a></span></h3>
<div class='s5_accordion_menu_element' style='display: none; border:none; overflow: hidden; padding: 0px; margin: 0px'></div> 
```

知道如何为最后一个 h3 标签获得不同的背景吗？

顺便说一句，这适用于第一个 h3 标签：

```
#s5_accordion_menu div h3:first-child {
background-color:#000000;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T14:19:59.107

`h3:last-child`表示“'h3' 类型的元素，它是其父级的最后一个子级”。这并不意味着“其父级中的最后一个类型为'h3'的元素”。既然你有一个`div`after your `h3`， the`h3`不是最后一个孩子。

你要[`:last-of-type`](http://www.w3.org/TR/selectors/#last-of-type-pseudo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:26:03.553

如果你想使用更具体的东西，你可以使用`:nth-child(n)`where`"n"`是元素编号，或者像`"(n + 1)"`.

# c# - MVC 控制器视图绑定

> ID：15069075
> 
> 赞同：0
> 
> 时间：2013-02-25T14:18:03.267
> 
> 标签：c#, razor, asp.net-mvc-4

我是 MVC 的新手，正在尝试以下场景，但对如何继续感到震惊。

在我的网页中，我有几个部分，每个部分下面都有评论。为了获取评论，我在控制器中编写了一个函数，如下所示

```
public ActionResult ShowPreviousComments()
        {
            Comments com = new Comments();

            LstComments savedComments = new LstComments();

            ///Entity code here

            foreach (var item in comments)
            {
                com.comments = item.Comments;
                com.dTime = item.Time;

                savedComments.lstCommet.Add(com);

            }

            return View();
        } 
```

和下面的模型数据，以便我可以在视图中获取列表

```
public class Comments
    {
        public string comments { get; set; }

        public DateTime? dTime { get; set; }

        public int airPortId { get; set; }

    }

    public class  LstComments
    {
        public List<Comments> lstCommet { get; set; }
    } 
```

我的疑问是如何在每个部分的页面加载期间点击控制器？

对不起，如果这听起来很傻或有什么错误。请张贴如果我能以更好的方式做到这一点

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:38:57.297

控制器

```
public ActionResult ShowPreviousComments()
{
    Comments com = new Comments();
    LstComments savedComments = new LstComments();

    ///Entity code here

    foreach (var item in comments)
    {
        com.comments = item.Comments;
        com.dTime = item.Time;

        savedComments.lstCommet.Add(com);
    }

    return PartialView(savedComments);
} 
```

看法

```
@Html.Action("ShowPreviousComments", "SomeController") 
```

**依我看来**

控制器

```
public ActionResult ShowPreviousComments()
{
    // Entity code here
    // var comments = entity.comments;

    return PartialView(comments);
} 
```

**Index.cshtml**（包含自己的内容和注释的主视图）

```
// some main view content

// main view comments...
@Html.Action("ShowPreviousComments", "SomeController") 
```

**ShowPreviousComments.chtml**（包含先前评论的部分视图）

```
@model IEnumerable<comments>

<div class="comments_container>
    foreach(var item in Model)
    {
        <div class="comment_body">@item.Comments</div>
        <div class="comment_time">@item.Time</div>
    }
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T15:29:13.453

也许你可以尝试一个脚本来调用视图部分的加载控制器

# json - 解析 Facebook Json 结果

> ID：15069078
> 
> 赞同：0
> 
> 时间：2013-02-25T14:18:15.040
> 
> 标签：json, facebook, r

我正在尝试使用以下代码来解析来自 Facebook API 的响应，我收到一个奇怪的错误...下面是代码和错误...任何想法都非常感谢！

代码链接：[如何在 R 中获取最受欢迎的 Facebook 帖子](https://stackoverflow.com/questions/15046111/how-to-get-most-popular-facebook-post-in-r)

我得到的错误是：

```
Error in myposts[[1]]$paging$"next" : $ operator is invalid for atomic vectors 
```

以下是数据的样子：

```
tail(myposts[[1]]) 
```

结果是：

```
$paging

previous 
"https://graph.facebook.com/74133697733/posts?access_token=###token###&limit=25&since=1361736602&__previous=1" 

next

"https://graph.facebook.com/74133697733/posts?access_token=###token###&limit=25&until=1359727199" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:26:07.673

这是因为`paging`元素是命名向量，而不是列表，所以不能`$`用来获取子元素。

以下应该有效：

```
myposts[[1]]$paging["next"] 
```

# c# - 如何获取在上次调试会话期间附加到调试器的进程

> ID：15069082
> 
> 赞同：0
> 
> 时间：2013-02-25T14:18:23.017
> 
> 标签：c#, vsx, envdte, vs-extensibility, vspackage

我正在尝试编写允许附加到先前调试会话中选择的进程的 Visual Studio 包。基本上，我知道如何附加到进程：

```
var dte = GetGlobalService(typeof(DTE)) as DTE2;
if (dte != null)
{
    IList<Process2> processes =
        dte.Debugger.LocalProcesses.Cast<Process2>()
            .Where(process => process.Name.IndexOf("process.exe", StringComparison.Ordinal) != -1)
            .ToList();
    foreach (var p in processes)
    {
        p.Attach();
    }
} 
```

问题是，如何获取我上次附加的进程？是否存储了有关此的任何信息？如果没有，如何编写对我有帮助的逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:45:44.420

`IVsDebuggerEvents`(Microsoft.VisualStudio.Shell.Interop.dll) 在调试器更改模式时提供通知，而`IDebugEventCallback2`调试引擎使用 (Microsoft.VisualStudio.Debugger.Interop.dll) 发送调试事件。这些接口的使用将允许收集所需的信息。

**更新：** 如何做到这一点的详细示例显示在我的 github 存储库中，我在其中编写了[Visual Studio 扩展](https://github.com/JaroslawWaliszko/Resurrect)，它允许将调试器附加到以前调试过的进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:27:58.257

我不知道有任何此类信息。一种可能可行的不同方法是将 WCF 服务添加到每个进程。该服务将使您既可以启动调试器，也可以检查是否已经启动了调试器。

```
 public class DebugService : IDebugService
    {
        public void LaunchDebugger()
        {
            //TODO - write some code indicating that this 
            //process was bebugged. e.g. - mark a flag in DB or file
            Debugger.Launch();
        }

        public bool WasDebuggedLastTime()
        {
            //TODO - write code to check if this process was debugged
        }

    } 
```

# javascript - 将 jQuery Mobile 与 cordova-qt 一起使用

> ID：15069086
> 
> 赞同：1
> 
> 时间：2013-02-25T14:18:32.717
> 
> 标签：javascript, jquery, qt, cordova

我设法将 jQuery mobile 与 phonegap 一起使用，该应用程序正在 iPhone 和黑莓上运行。但是，当我尝试将 jquery mobile 与 phonegap 一起用于 Qt（cordova-qt + Qt Creator）时，jquery 不起作用。可以这样做吗？

我在cordova qt 库的 www 文件夹中的 index.html 文件中添加了以下几行：

```
<link rel="stylesheet" href="jquery.mobile-1.3.0.min.css" type="text/css"/> 
<script language="javascript type="text/javascript" charset="utf=8" src="jquery.js"> </script> 
<script language="javascript type="text/javascript" charset="utf=8" src="jquery.mobile-1.3.0.js"></script> 
```

然后我在旁边添加了这个 jQuery 文件`index.html`，有什么遗漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:15:40.350

什么不工作？目前也在尝试 cordova-qt 并使用 jQueryMobile 效果很好。

# python - 仅比较文件/文件夹名称上的目录，打印任何差异？

> ID：15069091
> 
> 赞同：2
> 
> 时间：2013-02-25T14:18:48.190
> 
> 标签：python, comparison, directory-structure, python-3.3

如何递归比较两个目录（比较应该仅基于文件名）并仅在一个或另一个目录中打印文件/文件夹？

我正在使用 Python 3.3。

我已经看过这个`filecmp`模块，但是，它似乎并没有完全满足我的需求。最重要的是，它不仅根据文件名来比较文件。

这是我到目前为止所得到的：

```
import filecmp
dcmp = filecmp.dircmp('./dir1', './dir2')
dcmp.report_full_closure() 
```

`dir1`看起来像这样：

```
dir1
  - atextfile.txt
  - anotherfile.xml
  - afolder
    - testscript.py
  - anotherfolder
    - file.txt
  - athirdfolder 
```

`dir2`看起来像这样：

```
dir2
  - atextfile.txt
  - afolder
    - testscript.py
  - anotherfolder
    - file.txt
    - file2.txt 
```

我希望结果看起来像：

```
files/folders only in dir1
  * anotherfile.xml
  * athirdfolder

files/folders only in dir2
  * anotherfolder/file2.txt 
```

我需要一种简单的 pythonic 方法来比较仅基于文件/文件夹名称的两个目录，并打印出差异。

另外，我需要一种方法来检查目录是否相同。

注意：我在 stackoverflow 和 google 上搜索过类似的内容。我看到很多关于如何在考虑文件内容的情况下比较文件的示例，但我找不到任何关于文件名的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T16:21:14.063

我的解决方案使用 set() 类型来存储相对路径。那么比较只是集合减法的问题。

```
import os
import re

def build_files_set(rootdir):
    root_to_subtract = re.compile(r'^.*?' + rootdir + r'[\\/]{0,1}')

    files_set = set()
    for (dirpath, dirnames, filenames) in os.walk(rootdir):
        for filename in filenames + dirnames:
            full_path = os.path.join(dirpath, filename)
            relative_path = root_to_subtract.sub('', full_path, count=1)
            files_set.add(relative_path)

    return files_set

def compare_directories(dir1, dir2):
    files_set1 = build_files_set(dir1)
    files_set2 = build_files_set(dir2)
    return (files_set1 - files_set2, files_set2 - files_set1)

if __name__ == '__main__':
    dir1 = 'old'
    dir2 = 'new'
    in_dir1, in_dir2 = compare_directories(dir1, dir2)

    print '\nFiles only in {}:'.format(dir1)
    for relative_path in in_dir1:
        print '* {0}'.format(relative_path)

    print '\nFiles only in {}:'.format(dir2)
    for relative_path in in_dir2:
        print '* {0}'.format(relative_path) 
```

### 讨论

*   主力是函数 build_files_set()。它遍历一个目录并创建一组相对文件/目录名称

*   函数 compare_directories() 接受两组文件并返回差异——非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:26:47.387

基本思想，使用 os.walk 方法填充文件名字典，然后比较字典。

```
import os
from os.path import join
fpa = {}
for root, dirs, files in os.walk('/your/path'):
   for name in files:
   fpa[name] = 1

fpb = {}
for root, dirs, files in os.walk('/your/path2'):
   for name in files:
   fpb[name] = 1

print "files only in a"
for name in fpa.keys():
    if not(name in fpb.keys()):
        print name,"\n"

print "files only in b"
for name in fpb.keys():
    if not(name in fpa.keys()):
        print name,"\n" 
```

我没有对此进行测试，因此您可能必须修复它也可以轻松重构以避免重用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-18T02:46:01.067

实际上，`filecmp`可以并且应该用于此目的，但您必须进行一些编码。

*   您提供`filecmp.dircmp()`两个目录，分别称为 left 和 right。
*   `filecmp.dircmp.left_only`是仅在左侧目录中的文件和目录的列表。
*   `filecmp.dircmp.right_only`是仅在正确目录中的文件和目录的列表。
*   `filecmp.dircmp.common_dirs`是两者中的目录的列表。

您可以使用它们来构建一个简单的递归函数来查找所有两个树都不通用的文件和目录。

**代码：**

```
from os.path import join
from filecmp import dircmp

def find_uncommon(L_dir, R_dir):
    dcmp = dircmp(L_dir, R_dir)
    L_only = [join(L_dir, f) for f in dcmp.left_only]
    R_only = [join(R_dir, f) for f in dcmp.right_only]
    for sub_dir in dcmp.common_dirs:
        new_L, new_R = find_uncommon(join(L_dir, sub_dir), join(R_dir, sub_dir))
        L_only.extend(new_L)
        R_only.extend(new_R)
    return L_only, R_only 
```

**测试用例：**

```
C:/
    L_dir/
        file_in_both_trees.txt
        file_in_L_tree.txt
        dir_in_L_tree/
        dir_in_both_trees/
            file_in_both_trees.txt
            file_in_L_tree.txt
            dir_in_L_tree/
                file_inside_dir_only_in_L_tree.txt
    R_dir/
        file_in_both_trees.txt
        file_in_R_tree.txt
        dir_in_R_tree/
        dir_in_both_trees/
            file_in_both_trees.txt
            file_in_R_tree.txt
            dir_in_R_tree/
                file_inside_dir_only_in_R_tree.txt 
```

**演示：**

```
L_only, R_only = find_uncommon('C:\\L_dir', 'C:\\R_dir')
print('Left only:\n\t' + '\n\t'.join(L_only))
print('Right only:\n\t' + '\n\t'.join(R_only)) 
```

**结果：**

```
Left_only:
    C:\L_dir\file_in_L_tree.txt
    C:\L_dir\dir_in_L_tree
    C:\L_dir\dir_in_both_trees\file_in_L_tree.txt
    C:\L_dir\dir_in_both_trees\dir_in_L_tree
Right_only:
    C:\R_dir\file_in_R_tree.txt
    C:\L_dir\dir_in_R_tree
    C:\R_dir\dir_in_both_trees\file_in_R_tree.txt
    C:\R_dir\dir_in_both_trees\dir_in_R_tree 
```

请注意，如果您想查看不常见目录的内部，则必须稍微修改上面的代码。我在说的是上面示例中的这两个文件：

```
file_inside_dir_only_in_L_tree.txt
file_inside_dir_only_in_R_tree.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-19T17:41:37.647

蟒蛇2：

```
import os    
folder1 = os.listdir('/path1')
folder2 = os.listdir('/path2')
folder_diff = set(folder1) - set(folder2) if folder1 > folder2 else set(folder2) - set(folder1)
print folder_diff 
```

# r - 查找数据框中所有值的均值和标准差

> ID：15069099
> 
> 赞同：1
> 
> 时间：2013-02-25T14:19:18.243
> 
> 标签：r, statistics, average, variance, standard-deviation

我有一组数据框，每个数据框都有不同的列名，例如`frameOne`看起来像

```
 Q2  Q6  Q9
1   1   0   0
2   0   1   1
...
N   1   1   0 
```

并且`frameTwo`是

```
 Q1  Q5  Q9 Q22
1   1   1   0   1
2   1   0   1   0
...
N   1   1   1   0 
```

在不明确说明列名的情况下如何计算*整个帧的平均值和标准差？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:26:11.340

根据你的回答，我猜你在这之后。

```
df1 <- as.data.frame(matrix(runif(9), ncol = 3))
df2 <- as.data.frame(matrix(runif(9), ncol = 3))
df3 <- as.data.frame(matrix(runif(9), ncol = 3))
df4 <- as.data.frame(matrix(runif(9), ncol = 3))

my.objs <- ls(pattern = "df")

sapply(my.objs, FUN = function(x) {
  st <- as.vector(as.matrix(get(x)))
  data.frame(mean = mean(st), sd = sd(st))
})

     df1       df2       df3       df4      
mean 0.4967452 0.4426861 0.5198141 0.3460732
sd   0.2533854 0.2179547 0.3106693 0.3179838 
```

# php - 如何在php中正确编写它？json

> ID：15069102
> 
> 赞同：0
> 
> 时间：2013-02-25T14:19:20.157
> 
> 标签：php, json

如何在 php 中回显 json？服务器向我发送 json。

```
$i=$_POST["id"];
if($i==1){

// here i must echo this

{

"item": 

{
        "html": 
[{

"description": "some text",
            "n": "1"
        }],
        "table": {

            "1": {

                "line": [{

                    "number": "",

                    "value": ""

                }

                ]
            }

        },
        "videos": [],

        "urlext": [],

        "imgs": [ {

            "size": {

                "root": "xxx xxx"

            }

        }]

    }

}

}
else {

// here i must echo another one

{

"item": 

{
        "html": 
[{

"description": "some text",
            "n": "1"
        }],
        "table": {

            "1": {

                "line": [{

                    "number": "",

                    "value": ""

                }

                ]
            }

        },
        "videos": [],

        "urlext": [],

        "imgs": [ {

            "size": {

                "root": "xxx xxx"

            }

        }]

    }

}

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:21:36.980

只需构建您需要作为 json 发送并用于`json_encode()`呈现 json的数据的关联数组

```
$data = array( 'name' => 'foo',
               'some' => 'thing' 
);

echo json_encode($data); 
```

# c++ - 不被视为构造函数的专用模板构造函数

> ID：15069104
> 
> 赞同：3
> 
> 时间：2013-02-25T14:19:26.593
> 
> 标签：c++, templates

这段代码：

```
constexpr uint32_t ticksPerSecond = 100000;

struct ticks {
    uint32_t count;
    template<typename integer>
    constexpr explicit ticks(integer c) : count(c) { }
    explicit inline operator float() {
        return count / (float) ticksPerSecond;
    }
};

template<>
constexpr explicit ticks::ticks<float>(float s) : count(s * ticksPerSecond) { } 
```

给我错误：

```
timer.hpp:(last line of snippet):
error: only declarations of constructors can be 'explicit' 
```

肯定`ticks::ticks` *是*构造函数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T14:21:43.773

错误信息很清楚，您只能`explicit`在**声明**中使用（不能在定义中使用）。只需从专业化中删除该关键字：

```
template<>
constexpr ticks::ticks<float>(float s) : count(s * ticksPerSecond) { } 
```

# java - 在不更改应用程序代码的情况下进行测试

> ID：15069105
> 
> 赞同：-1
> 
> 时间：2013-02-25T14:19:29.693
> 
> 标签：java, scala, testing, mocking

首先，我使用的是 Scala，但任何 Java 方法都可以。（为了便于理解，我将使用 Java 代码作为示例。）

假设我有一个`Connection`接口及其实现`RealConnection`和`FakeConnection`.

我想在我的应用程序中有**两个**条目：一个发布条目和一个测试条目。我想像往常一样对我的应用程序进行编码，然后开始我的测试，该测试使用发布版本所做的所有类，但有一个例外，它使用`FakeConnection`而不是`RealConnection`.

我的应用程序通过`Connection.get()`.

我不想要的是这样的：

```
public static Connection get() {
    if ( isReleaseVersion )
        return new RealConnection();
    return new FakeConnection();
} 
```

我希望我的应用程序代码不会被这种代码污染。

可能有一个`Config`对象，如：

```
public static Connection get() {
    return Config.getConnectionFactory().get();
} 
```

`Config`这里的问题是每次我想测试时都需要更改课程。如果没有其他方法，我可能会使用这种方法。

我不想使用的是二传手。我想处理`final`变量或函数！不是这样的：

```
public class TestEntry {
    public static void main(String... args) }
        Config.connectionFactory = new FakeConnectionFactory();
        Config.databaseConnection = new FakeDatabaseConnection(); // Singleton, no factory needed.
        MyApplication.start(args); // the ReleaseEntry is somewhere else!
    }
} 
```

我也不想使用的是`Guice`. 每次我想进行测试时，我都必须重新定义我的模块。另外，我一般不会在 Scala 中使用它。

`Reflection`有可能，但错误只会出现在运行时，所以它不是一个非常 .

有没有其他方法可以完成我想要的？

我必须顺其自然`Config`吗？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:47:15.297

您的问题包含一个矛盾：

你想让某些东西在全球范围内可用

> 我的应用程序访问`Connection`通过`Connection.get()`

不使用变量存储的

> 我不想使用的是二传手。我想处理最终变量或函数！

然而，您想在运行时提供此实现。

其他人提到了“依赖注入”，这是“控制反转”的一种形式，你的问题中的要求告诉我这就是你想要的。

如果您不想使用变量，则必须使用连接将正确的实例传递给组件。使用 Scala，您可以选择传递它`implicitly`而不是`explicitly`.

```
class MyComponent(name:String)(implicit c:Configuration)

implicit val configuration = new TestConfiguration

//note that the configuration is passed in implicitly
val m = new MyComponent("foo") 
```

此要求也使其他选项变得棘手：

> 反射是可能的，但错误只会出现在运行时

如果您不想更改任何要求，您可能（理论上）可以使用 Scala 宏之类的东西来做到这一点。如果这是您想要的，我建议您创建一个新问题。

# c - 不允许指向不完整类类型的指针

> ID：15069107
> 
> 赞同：10
> 
> 时间：2013-02-25T14:19:34.200
> 
> 标签：c

我正在实现一个冒泡排序功能，它对单词进行排序。交换功能的话非常好，但我无法得到错误。尝试在线搜索，但无法获得有用的东西。我已经标记了我得到错误的地方。

感谢您的帮助。

```
void sortWord (struct node** head) {
    struct node* temp  = (*head);
    struct node* temp2 = (*head);

    int i;
    int j;
    int counter = 0;
    while(temp != NULL)
    {
        temp = temp->next; //<-- this is where i get the error.
        counter++;
    }
    for( i = 1; i<counter; i++)
    {
        temp2=(*head);
        for(j = 1; j<counter-1;j++)
        {
            if(wordCompare(temp2,nodeGetNextNode(temp2))>0)
            {
                swap(head,temp2,nodeGetNextNode(temp2));
                continue;
            }
        }
        temp2 = nodeGetNextNode(temp2);
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-25T14:23:09.313

当您尝试使用`struct`已前向声明但*未定义*的 a 时，会出现此错误。虽然声明和操作*指向*此类结构的指针绝对可以，但尝试取消引用它们是不行的，因为编译器需要知道它们的大小和布局才能执行访问。

具体来说，在您的情况下，编译器不知道`struct node`has `next`，所以

```
temp->next 
```

不编译。

您需要在定义函数以解决此问题`struct node`的编译单元中包含 的定义。`sortWord`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T14:29:40.367

你应该替换这一行：

```
temp = temp->next; 
```

用那一行：

```
temp = nodeGetNextNode(temp); 
```

原因是在这段代码中你对`node`. 我想这就是为什么你使用`nodeGetNextNode`temp2 的函数。您也只需要将它用于温度。

# php - Magento：目录和产品图片未上传

> ID：15069109
> 
> 赞同：0
> 
> 时间：2013-02-25T14:19:40.347
> 
> 标签：php, magento

由于某种原因，目录图像无法正确上传，./var/log/exception.log 或 ./var/log/system.log 或 /var/log/httpd/magento/error.log 中没有错误消息或任何内容 -只是它似乎只是忽略了图像文件。

也许与此相关，当我上传产品图片时，catalog_product_entity_media_gallery 似乎根本没有更新，因此上传的图片显示在前端，但根本不显示在后端。重新保存时，它们将被删除。

我不确定从哪里开始调试，一直在寻找一段时间没有运气！

这只是在几天前进口一些产品后才开始发生的。在此之前它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T02:08:03.373

这已通过更新到最新版本的 Magento 社区版来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:47:19.397

当导入产品而不将它们分配到管理商店（商店 id 0）时，可能会发生这种情况。

例如，如果您为商店 1（默认商店）加载产品，然后将图像保存到该商店的产品版本，那么它们在管理区域中将不可见。

必须将图像分配到存储 0 版本的产品，以便它们在管理员中可见。

我猜您已经创建了您的产品并仅分配给商店 1，然后将产品图像保存到此。

我会尝试重新导入您的产品，而不是在保存之前设置商店 ID，这会自动为您将它们添加到管理商店，您的问题应该会消失 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T02:05:22.910

大卫，在您开始更改权限并寻找更复杂的问题原因之前，请尝试以下操作：

使用 Internet Explorer 或 Chrome，你应该是对的。

我遇到了同样的问题，我无法使用 Magento 管理员将图像上传到产品页面。我发现只是因为我使用的是 Firefox，而与 Flash 或 Java 有关的东西导致了这个问题。

现在对我来说工作正常。

# lua - 拍摄后显示截图

> ID：15069113
> 
> 赞同：1
> 
> 时间：2013-02-25T14:19:48.113
> 
> 标签：lua, coronasdk

我试图在拍摄后显示一个 screenCap，它正在保存 screenCap 但我怎样才能获得最新的 screenCap 的 url？

```
local screenCap = display.captureScreen( true )
local alert = native.showAlert( "Success", "Screen Capture Saved to Library", { "OK" } )

NewsScreenShot = display.newImage( "  path to the PNG file  " ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:51:09.097

[http://jp.anscamobile.com/dev/reference/index/displaycapturescreen/index.html](http://jp.anscamobile.com/dev/reference/index/displaycapturescreen/index.html)

图片将以图片 X.png 的名称保存在设备库中。在此之后，您需要自定义选择到最新的索引图片。

顺便说一句，您可以尝试使用 display.save("name",path) 这将始终是最后保存的图片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-22T05:35:09.547

`display.captureBounds`有利于将整个屏幕保存到目录中。但它通常会随着最后一个索引的增加来保存文件。所以可能很难正确阅读它们。所以我更喜欢`display.save`. 但这不是一条直截了当的方法。

为此，您必须：

*   首先创建一个`displayGroup`.
*   然后`add`屏幕对象到该组。
*   `Return`显示组。
*   用于`display.save`保存显示的整个组。
*   显示所需的图像`system.DocumentsDirectory`。

我在这里给出一个样本：

```
-- creating the display group --
local localGroup = display.newGroup()  

-- creating display objects and adding it to the group --
local bg = display.newRect(0,0,_w,_h)
bg.x = 160
bg.y = 240
bg:setFillColor(150)
localGroup:insert(bg)

local rect = display.newRect(0,0,50,50)
rect.x = 30+math.random(260)
rect.y = 30+math.random(420)
localGroup:insert(rect)

-- Take Screenshot --
local function saveGroupImages()
  -- take screen shot to baseDirectory --
  local baseDir = system.DocumentsDirectory
  display.save( localGroup, "myScreenshot.jpg", baseDir )
end
rect:addEventListener("tap",saveGroupImages) 
```

在此之后，您可以读取文件并显示如下：

```
local readImage = display.newImage( "myScreenshot.jpg" ,system.DocumentsDirectory , 50, 100  )
readImage.x = 160
readImage.y = 240
readImage:scale(0.5,0.5) 
```

继续编码............ :)

# iphone - UILabel 的 sizeThatFits 是否返回它的高度？

> ID：15069115
> 
> 赞同：6
> 
> 时间：2013-02-25T14:19:56.917
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uilabel

我正在尝试在我的应用程序中实现以下内容：

```
themeLabel = [[UILabel alloc] init];
themeLabel.backgroundColor = [UIColor redColor];
themeLabel.text = themeString;
[themeLabel sizeThatFits:CGSizeMake(274, 274)];
themeLabel.numberOfLines = 0;
[topThemeView addSubview:themeLabel];

NSLog(@"Height is %f ", themeLabel.frame.size.height);

[themeLabel setFrame:CGRectMake(leftMargin, mainScrollView.frame.origin.y + topPadding, 274, themeLabel.frame.size.height)]; 
```

我最终得到的`Label's`高度是`0.0`。任何想法为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:30:38.853

```
themeLabel = [[UILabel alloc] init];
themeLabel.backgroundColor = [UIColor redColor];
themeLabel.text = themeString;
themeLabel.numberOfLines = 0;

CGRect labelFrame = CGRectMake(leftMargin, mainScrollView.frame.origin.y + topPadding, 0.0, 0.0);
labelFrame.size = [themeLabel sizeThatFits:CGSizeMake(274, 274)];

[themeLabel setFrame:labelFrame];
[topThemeView addSubview:themeLabel]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T14:29:44.843

sizeThatFits 要求视图计算并返回最适合其子视图的大小。所以你永远不会设置 themeLabel 的框架

你应该做：

```
themeLabel.numberOfLines = 0;
CGSize size = [themeLabel sizeThatFits:CGSizeMake(274, 274)];
themeLabel.frame = (CGRect) {0,0, size}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T14:38:36.913

我为 UILabels 创建了一个处理高度的类别：

**UILabel+TCFlexibleHeight.h**：

```
#import <UIKit/UIKit.h>

@interface UILabel (TCFlexibleHeight)

- (CGFloat)heightForText:(NSString*)text;
- (CGFloat)heightForCurrentText;
- (CGFloat)adjustHeightForCurrentText;

@end 
```

**UILabel+TCFlexibleHeight.m** :

```
#import "UILabel+TCFlexibleHeight.h"

static const NSInteger kMaxLines = 1000;

@implementation UILabel (TCFlexibleHeight)

- (CGFloat)heightForText:(NSString*)text {
    if (text == nil) {
        return 0;
    }

    NSInteger numberOfLines = self.numberOfLines > 0 ? self.numberOfLines : kMaxLines;
    CGSize size = CGSizeMake(self.frame.size.width, self.font.lineHeight * numberOfLines);
    return [text sizeWithFont:self.font constrainedToSize:size lineBreakMode:self.lineBreakMode].height;
}

- (CGFloat)heightForCurrentText {
    return [self heightForText:self.text];
}

- (CGFloat)adjustHeightForCurrentText {
    CGFloat height = [self heightForCurrentText];
    CGRect frame = self.frame;
    frame.size.height = height;
    return height;
}

@end 
```

使用此类别，您的代码将如下所示：

```
[themeLabel setFrame:CGRectMake(leftMargin, mainScrollView.frame.origin.y + topPadding, 274, [themeLabel heightForCurrentText])]; 
```

请注意，此类别不处理属性字符串，并且需要将换行设置为剪辑到字符。

# wireshark - 一个数据包中的几条消息

> ID：15069117
> 
> 赞同：0
> 
> 时间：2013-02-25T14:20:05.347
> 
> 标签：wireshark, wireshark-dissector

我写了一个解剖器，

我发现了一个数据包，其中包含几个不同/无关紧要的消息，

有人可以指出这个问题吗？这甚至是一个问题吗？

我重新组装 TCP 数据包...

**这是解剖的功能：** （FRAME_HEADER_LEN = 8）

```
static void
dissect_PROTOC(tvbuff_t *tvb, packet_info *pinfo, proto_tree *tree)
{
    //Reassembling TCP fragments
    tcp_dissect_pdus(tvb, pinfo, tree, TRUE, FRAME_HEADER_LEN,
                     get_PROTOC_message_len, dissect_PROTOC_message);

}

static guint get_PROTOC_message_len(packet_info *pinfo, tvbuff_t *tvb, int offset)
{
    /* the packet's size is "length" + 4bytes of TYPESIZE + 4bytes of LENGTHSIZE + 256bytes of CONTEXTIDSIZE */
    return (guint)(tvb_get_ntohl(tvb, offset + 4) + CONTEXT_ID_SIZE + TYPE_SIZE + LENGTH_SIZE); /* e.g. length is at offset 4 */
}

static void dissect_PROTOC_message(tvbuff_t *tvb, packet_info *pinfo, proto_tree *tree)
{
    /* my dissecting code */
    guint32 packet_type = tvb_get_ntohl(tvb, 0);

    col_set_str(pinfo->cinfo, COL_PROTOCOL, "PROTOC");
    /* Clear out stuff in the info column */
    col_clear(pinfo->cinfo,COL_INFO);
    col_add_fstr(pinfo->cinfo, COL_INFO, "%d > %d [%s]",pinfo->srcport, pinfo->destport,
             val_to_str(packet_type, packettypenames, "Unknown (0x%02x)"));

    if (tree) { /* we are being asked for details */
        proto_item *ti              = NULL;
        proto_tree *PROTOC_tree         = NULL;
        proto_item *PROTOC_data         = NULL;
        proto_tree *PROTOC_data_tree    = NULL;
        guint32 type    = 0;
        guint32 length  = 0;
        gint offset     = 0;

        ti = proto_tree_add_item(tree, proto_PROTOC, tvb, 0, -1, ENC_NA);
        proto_item_append_text(ti, ", Type: %s",
            val_to_str(packet_type, packettypenames, "Unknown (0x%02x)"));
        PROTOC_tree = proto_item_add_subtree(ti, ett_PROTOC);

        //getting type
        type = tvb_get_ntohl(tvb, offset);
        proto_tree_add_item(PROTOC_tree, hf_PROTOC_pdu_type, tvb, 0, TYPE_SIZE, ENC_BIG_ENDIAN);
        offset += TYPE_SIZE;

        //getting length for the data length
        length = tvb_get_ntohl(tvb, offset);
        proto_tree_add_item(PROTOC_tree, hf_PROTOC_len, tvb, offset, LENGTH_SIZE, ENC_BIG_ENDIAN);
        offset += LENGTH_SIZE;
        proto_tree_add_item(PROTOC_tree, hf_PROTOC_contextid, tvb, offset, CONTEXT_ID_SIZE, ENC_BIG_ENDIAN);
        offset += CONTEXT_ID_SIZE;
        PROTOC_data = proto_tree_add_item(PROTOC_tree, hf_PROTOC_data, tvb, offset, length, FALSE);
        PROTOC_data_tree = proto_item_add_subtree(PROTOC_data, ett_PROTOC_data);
        offset += length;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:22:28.223

> 我发现了一个数据包，其中包含几个不同/无关紧要的消息，

...

> 我重新组装 TCP 数据包...

这对于在 TCP 上运行的协议来说很常见。不能保证 TCP 段边界将对应于在 TCP 之上运行的协议中的数据包边界。一个 TCP 段可以包含多个更高层协议包的部分或全部，一个更高层协议包可以由来自多个 TCP 段的数据组成。

# magento - 在 Magento 中使用 phpmyadmin 导出和导入目录、产品数据

> ID：15069118
> 
> 赞同：0
> 
> 时间：2013-02-25T14:20:08.800
> 
> 标签：magento, phpmyadmin

我有一个损坏的站点，我想全新安装 magento，但我想继续使用我的旧目录和产品。是否可以从旧数据库中提取和填充目录到新数据库。请让我知道如何复制以及复制哪个文件夹。编辑：我不是 php mvc 或 magento 方面的专家，所以我不会深入研究代码，因为我有一些前端控制器错误说路由器达到 100 等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:28:57.080

Magento 为数据库提供了一个“修复”工具，如果您的站点损坏了，请告诉我们什么损坏了？是数据库还是你搞砸了代码？尽管如此，由于 EAV 模型，备份目录并不容易。如果您有权访问后端，请尝试将目录导出为 csv 并再次重新导入。

但老实说：如果你的数据库坏了，试着修复它，如果你的代码坏了，试着找出坏了，然后再回来

# python - Python ConfigParser 模块重命名一个部分

> ID：15069127
> 
> 赞同：2
> 
> 时间：2013-02-25T14:20:34.207
> 
> 标签：python, configparser

如何重命名`ConfigParser`对象中的部分？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T15:19:29.560

示例辅助函数 - 真的很傻，但它可能会为某人节省几分钟的工作......

```
def rename_section(cp, section_from, section_to):
    items = cp.items(section_from)
    cp.add_section(section_to)
    for item in items:
        cp.set(section_to, item[0], item[1])
    cp.remove_section(section_from) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:25:28.773

据我所知，你需要

*   [通过ConfigParser.items](http://docs.python.org/2/library/configparser.html#ConfigParser.RawConfigParser.items)获取部分项目
*   通过[ConfigParser.remove_section删除该部分](http://docs.python.org/2/library/configparser.html#ConfigParser.RawConfigParser.remove_section)
*   [通过ConfigParser.add_section](http://docs.python.org/2/library/configparser.html#ConfigParser.RawConfigParser.add_section)创建一个新部分
*   [通过ConfigParser.set](http://docs.python.org/2/library/configparser.html#ConfigParser.RawConfigParser.set)将项目放回新部分

# powershell - 获取远程注册表值

> ID：15069130
> 
> 赞同：27
> 
> 时间：2013-02-25T14:20:38.263
> 
> 标签：powershell, powershell-2.0

我有下面的脚本，我希望它发送到多个服务器并获取注册表的值。不幸的是，它目前只是发回我正在运行脚本的机器的本地注册表值。

如何让脚本针对远程注册表运行？

脚本：

```
clear
#$ErrorActionPreference = "silentlycontinue"

$Logfile = "C:\temp\NEWnetbackup_version.log"

Function LogWrite
{
    param([string]$logstring)

    Add-Content $Logfile -Value $logstring
}

$computer = Get-Content -Path c:\temp\netbackup_servers1.txt

foreach ($computer1 in $computer){

$Service = Get-WmiObject Win32_Service -Filter "Name = 'NetBackup Client Service'" -ComputerName $computer1

    if (test-connection $computer1 -quiet) 
    {
            $NetbackupVersion1 = $(Get-ItemProperty hklm:\SOFTWARE\Veritas\NetBackup\CurrentVersion).PackageVersion

            if($Service.state -eq 'Running')
            {
                LogWrite "$computer1 STARTED $NetbackupVersion1"
            }
            else
            {
                LogWrite "$computer1 STOPPED $NetbackupVersion1"
            }
    }
    else 
    {
        LogWrite "$computer1 is down" -foregroundcolor RED
    }
} 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-25T14:44:31.693

您可以尝试使用 .net：

```
$Reg = [Microsoft.Win32.RegistryKey]::OpenRemoteBaseKey('LocalMachine', $computer1)
$RegKey= $Reg.OpenSubKey("SOFTWARE\\Veritas\\NetBackup\\CurrentVersion")
$NetbackupVersion1 = $RegKey.GetValue("PackageVersion") 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-25T14:49:22.470

试试[Remote Registry Module](http://psremoteregistry.codeplex.com/)，registry provider无法远程操作：

```
Import-Module PSRemoteRegistry
Get-RegValue -ComputerName $Computer1 -Key SOFTWARE\Veritas\NetBackup\CurrentVersion -Value PackageVersion 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-25T14:46:37.777

如果您有 Powershell 远程处理和 CredSSP 设置，则可以将代码更新为以下内容：

```
$Session = New-PSSession -ComputerName $Computer1 -Authentication CredSSP
$NetbackupVersion1 = Invoke-Command -Session $Session -ScriptBlock { $(Get-ItemProperty hklm:\SOFTWARE\Veritas\NetBackup\CurrentVersion).PackageVersion}
Remove-PSSession $Session 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-05T03:51:09.320

另一种选择...需要远程处理...

```
(invoke-command -ComputerName mymachine -ScriptBlock {Get-ItemProperty HKLM:\SOFTWARE\VanDyke\VShell\License -Name Version }).version 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-25T14:50:25.857

对于远程注册表，您必须使用带有 powershell 2.0 的 .NET

```
$w32reg = [Microsoft.Win32.RegistryKey]::OpenRemoteBaseKey('LocalMachine',$computer1)
$keypath = 'SOFTWARE\Veritas\NetBackup\CurrentVersion'
$netbackup = $w32reg.OpenSubKey($keypath)
$NetbackupVersion1 = $netbackup.GetValue('PackageVersion') 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-07T18:48:02.370

如果您需要用户的 SID 并浏览远程 HKEY_USERS 文件夹，您可以按照以下脚本进行操作：

```
<# Replace following domain.name with yours and userAccountName with remote username #>
$userLogin = New-Object System.Security.Principal.NTAccount(“domain.name“,”userAccountName“)
$userSID = $userLogin.Translate([System.Security.Principal.SecurityIdentifier])

<# We will open HKEY_USERS and with accurate user’s SID from remoteComputer #>
$remoteRegistry = [Microsoft.Win32.RegistryKey]::OpenRemoteBaseKey(‘Users’,”remoteComputer“)

<# We will then retrieve LocalName value from Control Panel / International subkeys #>

$key = $userSID.value+”\Control Panel\International”
$openKey = $remoteRegistry.OpenSubKey($key)

<# We can now retrieve any values #>

$localName = $openKey.GetValue(‘LocaleName’) 
```

来源：[http ://techsultan.com/how-to-browse-remote-registry-in-powershell/](http://techsultan.com/how-to-browse-remote-registry-in-powershell/)

# stylesheet - 根据文档模式动态更改样式表

> ID：15069142
> 
> 赞同：0
> 
> 时间：2013-02-25T14:21:37.370
> 
> 标签：stylesheet, xpages

有没有办法根据文档是处于编辑模式还是读取模式来动态更改样式表文件？

我想做的是将以下代码添加到资源 href 属性的“计算值”选项中：

```
if(document.isEditable()){
   return "style_edit.css"
}
else{
   return "style_read.css"
} 
```

我的主要问题是，当页面加载时，它会给出错误“找不到文档”。这可能是因为当页面加载时，只有一个包含文档的视图，当用户单击文档 id 时，会出现带有绑定文档的自定义控件。我不知道如何使绑定到自定义控件文档在页面加载时可用。

编辑：我尝试了一个 try/catch 块，现在 xpage 打开而不显示错误。但是虽然刷新了自定义控件，css文件并没有改变，尽管我使用动态计算而不是在加载时计算

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:37:08.937

您可以将资源`href`属性设置为计算。为此，请转到 XPage 的所有属性“**基础 > 资源 > 样式**表”。在这里，您可以使用 JavaScript 代码计算`href`属性。所以你在 XPage 源代码中的资源看起来像这样

```
<xp:this.resources>
    <xp:styleSheet>
        <xp:this.href><![CDATA[#{javascript:if (document.isEditable()) {
    return "style_edit.css";
} else {
    return "style_read.css";
}}]]></xp:this.href>
    </xp:styleSheet>
</xp:this.resources> 
```

要从自定义控件访问数据源，您可以使用全局变量`currentDocument`而不是`document`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T15:32:38.113

当您可以简单地将计算的 styleClass 添加到某个面板/组件时，为什么要强制用户在版本上下载单独的文件：

```
<xp:panel>
        <xp:this.styleClass><![CDATA[#{javascript:return document.isEditable()?"docEditMode":"docReadMode";}]]></xp:this.styleClass>
</xp:panel> 
```

并将其用作 style.css 中的选择器

# oracle - 获取与 Oracle 11 建立连接的 IP 地址

> ID：15069145
> 
> 赞同：4
> 
> 时间：2013-02-25T14:21:43.663
> 
> 标签：oracle, sqlplus, ora-24247

在开发过程中，我发现数据库有大量的活动连接：

```
SELECT username, COUNT(*) FROM v$session GROUP BY username; 
```

为了找到谁实际保持连接，我想获取一个 IP 地址列表。

在一般的网络搜索和阅读[官方文档](http://docs.oracle.com/cd/B19306_01/server.102/b14237/dynviews_2088.htm)期间，我构建了查询：

```
SELECT username, seconds_in_wait, machine, port, terminal, program, module, service_name
  FROM v$session
  WHERE type = 'USER'; 
```

`machine`最重要的部分在哪里`select`。但不幸的是，`machine`字段显示*客户端操作系统已知的主机名*。

互联网上充满了使用[UTL_INADDR.GET_HOST_ADDRESS](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/u_inaddr.htm)的建议，这在我的情况下不适用。首先是因为**ORA-24247：网络访问被访问控制列表 (ACL) 拒绝**，其次是因为*客户端操作系统主机名*通常定义在**/etc/hostname**中，并且对于我们内部网中的 DNS 服务器不可用...

任何其他方式来检索到 Oracle DB 的打开会话的 IP（数据库实例在任何情况下都保存有关其套接字的信息......）。

**更新**

我在受信任的 Intranet 下，但网络层次结构未知。

我试图找出哪些应用程序使用了我的表（几个应用程序服务器，我不知道所有这些）。其中一些过度使用连接，需要修复。但首先应该确定它们...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T17:13:10.710

请记住，Oracle 会话不需要知道，当然也不需要信任您来自的客户端名称/IP 地址；它位于网络传输层之上，并不关心您是通过 TCP/IP 还是其他方式连接。（我什至不确定侦听器是否必须传递信息，或者它是否有效地传递现成的套接字）。如您所见，`machine`这正是客户端声明的内容，例如视图`program`中的其他字段`v$session`；它可能与 DNS 或您的服务器可以解析的任何东西没有任何相似之处`/etc/hosts`，特别是如果客户端是 Windows 机器。

您可以做的是，在 Unix/Linux 级别（因为您指的是 /etc/hosts，我假设您不在 Windows 上），查找`port`并查看显示的地址；例如`v$session`显示我`port`的 as `50527`，所以如果`netstat -an | grep 50527`我看到：

```
tcp  0  0  192.168.1.1:1521  192.168.1.23:50527  ESTABLISHED 
```

所以我可以看到我从`192.168.1.23`. 如果您在服务器上运行 SQL*Plus，您可以使用`host`命令来执行此操作，但这仍然有点不方便。如果您需要定期执行此操作，并且无法选择添加登录触发器以将其捕获到审计表中，并且您确实必须从数据库中执行此操作，您可能可以编写一个 Java 存储过程来执行查找那个端口给你。但是编写一个shell脚本来查询`port`数字`v$session`并以这种方式进行查找可能更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T19:24:47.550

感谢大家深入研究我的问题（这仍然是通用的，不完全是我的！！）。

只是简短的回答：您无法从 Oracle 系统表中获得真正的 IP。

对于此任务，您可以使用通用实用程序，例如`netstat`或`lsof -p <pid-of-oracle>`但仅在**服务器端**！

一些帮助可以来自`v$session.port`价值观...

助手的一个好建议 - 使用数据库客户的好名字。它们填充到`v$session`表行中：

```
machine, terminal, program, module, service_name 
```

所以他们可以帮助识别客户......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T18:36:15.187

传入连接的 IP 地址通常可以在侦听器日志中找到。这就是我在需要时跟踪此类信息的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-08T11:29:36.840

当登录触发器不存在 AFAIK 时，我发现了 2001 年的审核脚本。它解析 SYS.AUD$ 的 COMMENT$TEXT 列，其中 ACTION#=100 以获取客户端的 IP 地址。该列仍然包含**Authenticated by: DATABASE; 客户端地址： (ADDRESS=(PROTOCOL=tcp)(HOST= *aaaa* )(PORT= *p* ))**在我们的环境中。

# javascript - 将 OAuth 令牌传送到 javascript 客户端的安全方式

> ID：15069151
> 
> 赞同：6
> 
> 时间：2013-02-25T14:21:52.320
> 
> 标签：javascript, ajax, rest, oauth, oauth-2.0

我目前正在设计一个以 REST API 为中心的多平台应用程序（客户端将包括内部开发的移动应用程序，以及最初的 AJAX 重型 javascript 客户端）。由于将来 API 可能会向第三方开放，因此我正在考虑使用 OAuth 2.0 对 API 进行身份验证和授权。

我正试图解决这种安排的一些安全问题，特别是关于 javascript 客户端的问题。我不希望这个客户端表现得像第三方客户端一样，带有一大堆重定向和弹出窗口等，这是大多数 OAuth 文档似乎关注的内容。由于它将从我自己的域交付，我认为 webapp 的服务器端可以是实际的客户端，并存储客户端机密和刷新令牌，而 javascript 根据需要从服务器检索新的身份验证令牌。

把它一步一步的形式：

1.  用户使用非 ajax html 表单登录，生成存储在服务器端的身份验证和刷新令牌。这将设置一个仅限 HTTP 的登录会话 cookie。
2.  javascript 客户端代码在登录后发送到用户的浏览器。
3.  javascript 客户端向属于其自己的应用程序（不是 REST api 的一部分）的资源发出请求以检索令牌。会话 cookie 确保客户端是真实的，并且还会检查引用者。返回身份验证令牌。
4.  javascript 客户端使用 REST API 验证令牌。
5.  客户端现在可以使用令牌向 REST API 发出请求，直到它过期。
6.  如果身份验证令牌过期或页面关闭并重新打开，javascript 客户端可以请求新令牌。webapp 的服务器端负责刷新令牌并发送新令牌，只要登录会话 cookie 仍然有效。

这有意义吗，还是会在系统中留下巨大的漏洞？特别是，在 Web 上拥有一个基于设置的 cookie 分发身份验证令牌的资源是不是很疯狂？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T04:50:21.070

只需确保与浏览器的任何通信都是 HTTPS，这样中间的任何人都无法窃取您的令牌。并在您的身份验证 cookie 上设置“安全”标志。

*   现在大多数浏览器授权方案都归结为在 cookie 中传递的会话令牌。OAuth 2 方案领先了几步，因为 a) 令牌（可以是）内部没有危险用户信息的哑令牌，以及 b) 它们过期。

*   （只是把这个评论放在上下文中：有一次我从一个站点弹出一个会话令牌，发现我的家庭地址和电话号码在那里。Ack！）

*   我已经看到在浏览器 javascript 中对请求进行 HMAC 签名的代码，但它带有一个巨大的免责声明：不要在生产中使用它。签名方案要求客户端 (javascript) 知道“秘密”字符串，但浏览器/javascript 是如此不安全，以至于将您的秘密字符串交给世界​​。

但是，如果您通过 HTTPS 进行所有通信，那么您实际上只是对熟悉的将会话令牌作为 cookie 传递的方案进行了 OAuth 扭曲。

# drop-down-menu - 将 nav-selected 添加到具体 5 的下拉菜单中

> ID：15069153
> 
> 赞同：0
> 
> 时间：2013-02-25T14:21:57.747
> 
> 标签：drop-down-menu, styling, concrete5

我试图在 Concrete5 中为下拉菜单结合两件事，但似乎无法使其正常工作，想知道是否有人可以帮助我。

我有这个菜单的代码

```
 <?
    defined('C5_EXECUTE') or die(_("Access Denied."));
    $aBlocks = $controller->generateNav();
    global $c;

    if ($c->isEditMode()) {
            echo("<div class=\"menu\" style=\"position:inherit!important;\"><ul>");
    }
    else {
            echo("<div class=\"menu\"><ul>");
    }

    $nh = Loader::helper('navigation');

    foreach($aBlocks as $ni) {
            $_c = $ni->getCollectionObject();
            if (!$_c->getCollectionAttributeValue('exclude_nav')) {

                    $thisLevel = $ni->getLevel();

                    if ($thisLevel > $lastLevel) {
                            echo("<!--[if IE 7]><!--></a><!--<![endif]-->\n<!--[if lte IE 6]><table><tr><td><![endif]-->\n<ul>\n");
                    } else if ($thisLevel < $lastLevel) {
                            for ($j = $thisLevel; $j < $lastLevel; $j++) {
                                    echo("</a></li>\n</ul>\n<!--[if lte IE 6]></td></tr></table></a><![endif]--></li>\n");
                            }
                    }

                    if ($thisLevel == $lastLevel && $i >0) {
                       echo "</a></li>\n";
                    }

                    $pageLink = false;

                    if ($_c->getCollectionAttributeValue('replace_link_with_first_in_nav')) {
                            $subPage = $_c->getFirstChild();
                            if ($subPage instanceof Page) {
                                    $pageLink = $nh->getLinkToCollection($subPage);
                            }

                    }

                    if (!$pageLink) {
                            $pageLink = $ni->getURL();
                    }

                      if ($_c->getCollectionAttributeValue('placeholder')) {
                             $pageLink="javascript:void(0)";
                     }

                    echo '<li><a href="'.$pageLink.'">' . $ni->getName();

                    $lastLevel = $thisLevel;
                    $i++;
            }
    }

    $thisLevel = 0;
    for ($i = $thisLevel; $i <= $lastLevel; $i++) {
            echo("</a></li></ul>");
    }
    echo '</div>';
    ?> 
```

但是没有任何运气来设计导航选择的样式，所以我想在 foreach 开头的行下添加：

```
 $classes = array();

    if ($ni->isCurrent) {
            //class for the page currently being viewed
            $classes[] = 'nav-selected';
    }

    if ($ni->inPath) {
            //class for parent items of the page currently being viewed
            $classes[] = 'nav-path-selected';
    } 
```

从另一个菜单中，可以设置导航选择的样式，但这没有什么区别。有谁看到我做错了什么，或者有人可以给我一个提示如何完成这项工作？我非常感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:12:40.503

It appears as though you've taken code from two different places and pasted them together (which rarely works). I think your first code sample is from an old template, and the second code sample is from the newer one.

Your best bet here is to start from scratch with the newer, cleaner autonav template: [https://raw.github.com/concrete5/concrete5/master/web/concrete/blocks/autonav/view.php](https://raw.github.com/concrete5/concrete5/master/web/concrete/blocks/autonav/view.php)

It shouldn't be too difficult to modify that to do what you want. If you run into trouble with that, try posting as a new question, either here or in the concrete5 forums ( [http://concrete5.org/community/forums](http://concrete5.org/community/forums) ).

# c# - VS2012 + CRM 2011：Microsoft.IdentityModel 错误参考

> ID：15069155
> 
> 赞同：5
> 
> 时间：2013-02-25T14:22:04.197
> 
> 标签：c#, reference, visual-studio-2012, dynamics-crm-2011

我已经下载了[CRM 2011 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=24004)，并按照说明使用 C# 快速入门项目启动和运行。当我尝试构建它时，VS 抱怨对上述程序集的引用，该程序集似乎不在我的 PC（Windows 8）上，根据项目文件中的引用，当然不是预期的。当我尝试安装 Microsoft Identity Model 时，它拒绝了，表明它已经通过与 .NET framework 4.5 集成来安装。

我不知道下一步该去哪里——有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:08:39.593

Windows 8 捆绑了 Windows Identity Foundation 3.5。但是，默认情况下不启用它。有关说明，请参阅[快速提示：启用 Windows Identity Foundation (Windows 8)](http://blog.xrm.com/index.php/2012/10/quick-tip-enable-windows-identity-foundation-windows-8/)。

之后，应该找到参考。

[最新版本的 WIF 是 .NET 4.5 的一部分](http://msdn.microsoft.com/en-us/library/ee748475.aspx)，因此不再有专门的安装程序。CRM 需要 WIF 3.5，因为它是 .NET 3.5 和 .NET 4 的附加 SDK。由于 CRM 基于 .NET 4，因此这是要遵循的路线。

我不知道他们为什么没有单独的 Windows 8 安装程序以及为什么将其与 Windows 8 捆绑在一起。也许这就是原因：[Windows 8 和 .Net Framework 3.5](http://blogs.technet.com/b/askcore/archive/2012/05/14/windows-8-and-net-framework-3-5.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:00:13.990

从以下链接下载并安装 Windows Identity Foundation

[身份模型问题修复](http://crmprof.wordpress.com/2013/02/16/ms-crm-2011-could-not-load-file-or-assembly-microsoft-identitymodel-exception/)

# php - javascript 和 php 中的电子邮件生成器

> ID：15069156
> 
> 赞同：0
> 
> 时间：2013-02-25T14:22:04.927
> 
> 标签：php, javascript, string

我有一个 javascript 和 php 代码，它使机器人很难找到一个电子邮件地址。我已经在一个非常基本的站点上实现了它，并且它运行良好，但是在另一个具有更多元素的站点上 - 似乎出现了问题并且它不会工作。

javascript添加了`mailto:`and`@`函数

在 php 中，元素被调用并运行 javascript 以在您单击它时完成该功能——使它像一个普通的 mailto: 函数。

在 DOM 或全局元素或其他方面，我有什么遗漏吗？

我在 header.php 中调用了这个脚本：

```
<script type="text/javascript" src="javascript/scripts.js"></script> 
```

脚本.js：

```
function blind(name,domain) {
        str = "mailto:" + name + "@" + domain;
        window.location = str;
        } 
```

emailgen.php：

```
function showContacts()
{
global $debe;
    $return ="";
    $return .="
    <div>";
    $contactitems = $debe->runSql("SELECT * FROM contacts ORDER BY imp");

    for($i=0; $i<count($contactitems); $i++)
    {
            $parts = explode('@', substr($contactitems[$i][3], $pos + 0));

            $return .="
            <p><a href=\"" . $contactitems[$i][2] . "\">" . $contactitems[$i][1] . "</a><br />
            <a href=\"javascript:blind('" . $parts[0] . ",'" . $parts[1] . "')\">" .  $parts[0] . "@" . $parts[1] . "</a><br />
            </p>";  
    }

    return $return;
} 
```

当我查看源代码时，它似乎显示正常，但由于某种原因`mailto:`没有调用。

emailgen.php的viewsource：

```
<a href="javascript:blind('name,'email.com')">name@email.com</a><br /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:25:47.433

在 之后添加单引号`$parts[0] . "`：

```
<a href=\"javascript:blind('" . $parts[0] . "','" . $parts[1] . "')\">" .  $parts[0] . "@" . $parts[1] . "</a><br /> 
```

# windows-phone-8 - 从墓碑返回时的应用程序认证要求

> ID：15069170
> 
> 赞同：0
> 
> 时间：2013-02-25T14:22:49.153
> 
> 标签：windows-phone-8, windows-phone, tombstoning

我有一个页面，用户可以在其中输入他的姓名并附上图片。

从墓碑状态返回时，我的应用程序是否也必须恢复图像？

1.  是否是应用程序认证要求，没有它我的应用程序将无法通过认证？还是推荐的模式？

2.  例如，当我有一个枢轴时，同样的问题是，是否必须保存选定枢轴项的索引并在从墓碑激活时恢复选择？

没有必要：是否有流行的库\框架来帮助我对对象、图像等进行墓碑化和序列化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:00:22.287

根据[Windows Phone 的技术认证要求](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184840%28v=vs.105%29.aspx)，唯一的要求是：

> 当用户按下“开始”按钮或设备超时导致锁定屏幕启动时，Windows Phone 应用程序将被停用。Windows Phone 应用程序也会因调用 Launcher 或 Chooser API 而被停用。
> 
> Windows Phone OS 7.0 应用程序在停用时会被删除（终止）。Windows Phone OS 7.1 或更高版本的应用程序在停用时变为休眠状态，但在资源使用策略导致其进入墓碑时可由系统终止。
> 
> 终止后激活时，应用程序必须满足第 5.2.1 节 - 启动时间中的要求。

由于第 5.2.1 节 - “启动时间”仅涉及启动性能和响应能力，因此您没有针对您的问题的认证要求。

但是，如果用户输入数据（附加图像等）并假设它接听电话，做一些其他事情并返回应用程序，然后他输入的数据丢失了......它肯定不会欣赏它. 这看起来更像是一个缺陷/错误。

关于状态的序列化，我建议您使用二进制序列化，因为性能至少比使用 Json、Xml 或任何其他格式好 10 倍。

就个人而言，我为我的“状态”相关类实现了一个自定义接口 IBinarySerializable，并使用此 BinaryWriter 扩展类来帮助编写序列化代码：

* * *

```
using System.IO;

namespace MyCompany.Utilities
{
    public interface IBinarySerializable
    {
        void Write(BinaryWriter writer);
        void Read(BinaryReader reader);
    }
} 
```

* * *

```
using System;
using System.Collections.Generic;
using System.IO;

namespace MyCompany.Utilities
{
    public static class BinaryWriterExtensions
    {
        public static void Write<T>(this BinaryWriter writer, T value) where T : IBinarySerializable
        {
            if (value == null)
            {
                writer.Write(false);
                return;
            }

            writer.Write(true);
            value.Write(writer);
        }

        public static T Read<T>(this BinaryReader reader) where T : IBinarySerializable, new()
        {
            if (reader.ReadBoolean())
            {
                T result = new T();
                result.Read(reader);
                return result;
            }

            return default(T);
        }

        public static void WriteList<T>(this BinaryWriter writer, IList<T> list) where T : IBinarySerializable
        {
            if (list == null)
            {
                writer.Write(false);
                return;
            }

            writer.Write(true);
            writer.Write(list.Count);
            foreach (T item in list)
            {
                item.Write(writer);
            }
        }

        public static List<T> ReadList<T>(this BinaryReader reader) where T : IBinarySerializable, new()
        {
            bool hasValue = reader.ReadBoolean();
            if (hasValue)
            {
                int count = reader.ReadInt32();
                List<T> list = new List<T>(count);
                if (count > 0)
                {
                    for (int i = 0; i < count; i++)
                    {
                        T item = new T();
                        item.Read(reader);
                        list.Add(item);
                    }
                    return list;
                }
            }

            return null;
        }

        public static void WriteListOfString(this BinaryWriter writer, IList<string> list)
        {
            if (list == null)
            {
                writer.Write(false);
                return;
            }

            writer.Write(true);
            writer.Write(list.Count);
            foreach (string item in list)
            {
                writer.WriteSafeString(item);
            }
        }

        public static List<string> ReadListOfString(this BinaryReader reader)
        {
            bool hasValue = reader.ReadBoolean();
            if (hasValue)
            {
                int count = reader.ReadInt32();
                List<string> list = new List<string>(count);

                if (count > 0)
                {
                    for (int i = 0; i < count; i++)
                    {
                        list.Add(reader.ReadSafeString());
                    }
                    return list;
                }
            }

            return null;
        }

        public static void WriteSafeString(this BinaryWriter writer, string value)
        {
            if (value == null)
            {
                writer.Write(false);
                return;
            }

            writer.Write(true);
            writer.Write(value);
        }

        public static string ReadSafeString(this BinaryReader reader)
        {
            bool hasValue = reader.ReadBoolean();
            if (hasValue)
                return reader.ReadString();

            return null;
        }

        public static void WriteDateTime(this BinaryWriter writer, DateTime value)
        {
            writer.Write(value.Ticks);
        }

        public static DateTime ReadDateTime(this BinaryReader reader)
        {
            var int64 = reader.ReadInt64();
            return new DateTime(int64);
        }
    }
} 
```

# javascript - Javascript中如何定义“功能”（不是“功能”）？

> ID：15069171
> 
> 赞同：4
> 
> 时间：2013-02-25T14:22:49.620
> 
> 标签：javascript, function

我碰巧注意到 Javascript 也支持`Function`关键字，就像在 ActionScript 中一样。由于两者都是从 ECMA Script 派生的，因此存在这种相似性是众所周知的。但我很好奇**Function**在 Javascript 的情况下代表什么，如果不是 Class（如 as3 中）。

在 JS 中，

`var func = new Function();` 或者 `var func = new Function;`

将一个名为 'anonymous' 的函数分配给变量 'func'。

它可能只是一种以面向对象的方式实现实际“功能”的方法..

由于大多数浏览器（ff，ie＆chrome）似乎以相同的方式实现它，它是否在规范中得到解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T14:26:29.540

[`Function`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function)是所有功能扩展的“类”。所有函数都是真正的`Function`对象。

```
(function(){}) instanceof Function === true 
```

您还可以使用`new Function`从字符串（如`eval`）创建函数。

```
var func = new Function('x,y', 'return x+y;') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:28:04.593

“JavaScript 中的每个函数实际上都是一个 Function 对象。” [MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function)。

```
function myFunc(a, b) {
  console.log( 'test' );
} 
```

基本上等于

```
var myFunc = new Function('a', 'b', 'console.log( "test" )'); 
```

然而，两种声明函数的方式之间存在一些差异。阅读文档！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T14:27:54.563

1种方式：

```
var Person = function() {
    this.name;
    this.age;
}

var p1 = new Person(); 
```

第二种方式：

```
function Person() {
    this.name;
    this.age;
}

var p1 = new Person(); 
```

# python - 读取数据表单 xml 以列出

> ID：15069174
> 
> 赞同：0
> 
> 时间：2013-02-25T14:23:00.300
> 
> 标签：python, xml

我有一个从 xml 文件中读取数据的 python 脚本

```
import xml.etree.ElementTree as ET

MAX_VALUE = 20
PATH_IN = "sweep.xml"

tree = ET.parse(PATH_IN)
root = tree.getroot()

projects = [""]*MAX_VALUE
designs = [""]*MAX_VALUE
params = [""]*MAX_VALUE

for i, project in enumerate(root):
    projects[i] = project
    print(project.get('name'))
    for u, design in enumerate(project):
        designs[u] = design
        print(design.get('name'))
        for x, param in enumerate(design):
            params[x] = param
            print(param.get('name'))
            for x, info in enumerate(param):
                print(info.text)

raw_input() 
```

这是xml

```
<xml>
    <project name="testProj">
        <design name="des1">
            <param name="mag_d">
                <value>3mm</value>
                <start>1</start>
                <stop>5</stop>
                <step>1</step>
            </param>
            <param name="mag_x">
                <value>3mm</value>
                <start>2</start>
                <stop>7</stop>
                <step>1</step>
            </param>
            <param name="mag_y">
                <value>3mm</value>
                <start>1</start>
                <stop>2</stop>
                <step>0.1</step>
            </param>
        </design>
        <design name="des2">
            <param name="mag_d">
                <value>3mm</value>
                <start>1</start>
                <stop>5</stop>
                <step>1</step>
            </param>
            <param name="mag_x">
                <value>3mm</value>
                <start>2</start>
                <stop>7</stop>
                <step>1</step>
            </param>
            <param name="mag_y">
                <value>3mm</value>
                <start>1</start>
                <stop>2</stop>
                <step>0.1</step>
            </param>
        </design>
    </project>
</xml> 
```

我现在要做的是将正在阅读的信息添加到列表中。它应该看起来像这样：

```
Input=[['testProj','des1',[['mag_d',[1,2,3]],['mag_x',[2,3,4]]]], ['testProj','des2'[['mag_d',[1,2,3]],['mag_x',[2,3,4]]]]] 
```

我真的不知道如何创建这样的列表。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:01:32.043

另一个没有建筑清单的版本。将 xml.etree.ElementTree 导入为 ET

```
PATH_IN = "sweep.xml"

tree = ET.parse(PATH_IN)

def convert(root):
    for p in root.iter('project'):
        yield p.get('name')
        for d in p.iter('design'):
            yield  d.get('name')
            for e in d.iter('param'):
                yield [e.attrib['name'], [p.text for p in e]]

it = convert(tree.getroot())
import pprint
pprint.pprint(list(it)) 
```

在 OP 输入上给出。

```
['testProj',
 'des1',
 ['mag_d', ['3mm', '1', '5', '1']],
 ['mag_x', ['3mm', '2', '7', '1']],
 ['mag_y', ['3mm', '1', '2', '0.1']],
 'des2',
 ['mag_d', ['3mm', '1', '5', '1']],
 ['mag_x', ['3mm', '2', '7', '1']],
 ['mag_y', ['3mm', '1', '2', '0.1']]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:37:25.433

只需在每个级别创建一个列表并将您读到的内容附加到其中。在每个级别的末尾，将列表附加到外层列表。

```
lst_lvl1 = [] # Top level list

for i, project in enumerate(root):
    projects[i] = project

    print(project.get('name'))
    lst_lvl1.append(project.get('name')) # Append to the top level list

    lst_lvl2 = [] # Create an empty 2nd level list

    for u, design in enumerate(project):
        designs[u] = design
        print(design.get('name'))
        lst_lvl2.append(design.get('name')) # Append to the 2nd level list

        lst_lvl3 = [] # Create a 3rd level list...
        for x, param in enumerate(design):
            params[x] = param
            print(param.get('name'))
            lst_lvl3.append(param.get('name'))
            lst_lvl4 = []
            for x, info in enumerate(param):
                print(info.text)
                lst_lvl4.append(info.text)
            lst_lvl3.append(lst_lvl4) # At the end of level 4, append what you got to the level-3 list
        lst_lvl2.append(lst_lvl3) # At the end of level 3, append what you got to the level-2 list... etc
    lst_lvl1.append(lst_lvl2)

print lst_lvl1 
```

# sql - 无法插入重复键 SQL

> ID：15069177
> 
> 赞同：2
> 
> 时间：2013-02-25T14:23:06.493
> 
> 标签：sql, sql-server

```
insert into A (id,Name)
select ti.id,ti .Name 
from A ti 
where ti.id >= 1 AND ti.id<=3 
```

`id`是主键但不是自动生成的。当我运行查询时出现错误

> *违反主键约束“XPKA”。无法在对象“dbo.A”中插入重复键*

表A

```
id Name
1   A
2   B
3   C 
```

我想插入

```
id Name
4   A
5   B
6   C 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:26:08.670

每一行的主键列必须具有不同的值。您正在将记录从`A`后面插入到自身中，因此您正在尝试使用已使用的主键值创建新行。这会导致您看到错误消息。

如果您必须以这种方式插入记录，那么您需要在 PK 列中包含一个包含唯一值的策略。如果您不能使用`autoincrement`规则（正常方法），那么您的逻辑需要强制执行此要求，否则您将继续看到这样的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T14:27:53.537

您正在从表中选择`A`并直接插入其中。这意味着您插入的 ID 值肯定已经存在。

消息说 ID col 上有一个 PrimaryKey，并且要求列中的值是唯一的。由于这个原因，它不会让您执行该操作。

要根据您声明的要求修复您的查询，请将脚本更改为：

```
insert into A (id,Name)
select ti.id + 3,ti .Name 
from A ti 
where ti.id >= 1 AND ti.id<=3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T15:43:58.787

您需要调整要插入的行的 ID。在您的示例中生成键 4、5、6：

```
insert into A (id,Name)
select ti.id + 3 as NewKey,ti.Name 
from A ti 
where ti.id >= 1 AND ti.id<=3 
```

但实际上，您需要选择一个值，使您的新密钥与任何可能的旧密钥分开，也许：

```
insert into A (id,Name)
select ti.id + 100000 as NewKey,ti.Name 
from A ti 
where ti.id >= 1 AND ti.id<=3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T14:28:51.310

正如 Yaakov Ellis 所说...

> 每一行的主键列必须具有不同的值。

因为你有一个 WHERE 子句，它将你的行限制为 3 总 EVER

具有唯一 ID 1、2 和 3 的人

因此，如果您想替换那些而不是尝试在它们已经存在的地方插入它们并生成错误。

也许您可以改为更新它们？这将解决您的问题。

# 更新

添加额外代码后...您应该将 UNIQUE Key Identifier 设置为 ID 号而不是 ABC 字段名称（无论您如何称呼它）

# sql-server - 使用 OLE DB 命令转换的 SSIS 包错误

> ID：15069179
> 
> 赞同：1
> 
> 时间：2013-02-25T14:23:11.100
> 
> 标签：sql-server, triggers, sql-server-2012, ssis

我最近开始将 MS SQL Server 2005 实例升级到 MS SQL 2012。我创建了一个 VM 并安装了 MS SQL Server，并使用备份在新服务器上创建了数据库。

在 Visual Studio 中，我将旧连接切换到新连接，当我切换包含命令的 OLE DB 命令转换的连接时，`"UPDATE JOB SET Active = 0 WHERE Job.JobId = ?"`我收到以下错误。

错误 1 ​​验证错误。

```
 Sync Jobs: Sync Jobs: SSIS Error Code
 DTS_E_OLEDBERROR.  An OLE DB error has occurred. Error code:
 0x80004005\.  An OLE DB record is available.  Source: "Microsoft SQL
 Server Native Client 11.0"  Hresult: 0x80004005  Description: "The
 metadata could not be determined because statement 'REVERT       
 --Check if SSB is enabled in this database' in procedure 'sp_send_dbmail' 
 does not support metadata discovery.".  JobPack.dtsx 0 0 
```

错误 2 验证错误。

```
 Sync Jobs: Sync Jobs: Unable to retrieve
 destination column descriptions from the parameters of the SQL
 command.   JobPack.dtsx 0 0 
```

我检查以确保此“SSB”在新数据库中已打开（未打开），但即使启用它，我仍然无法解决此错误。我切换回旧服务器，它工作正常......

**更新：** 我想知道电子​​邮件程序在哪里发挥作用，我发现数据库有一个触发器，可以在更新时发送电子邮件。禁用此触发器可解决 SSIS 包问题。我仍然不知道为什么启用此触发器时 BIDS 在编辑器中显示错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:23:11.223

我可以通过在转换中从 Native SQL Driver 切换到 MS SQL Driver 来解决这个问题。我仍然不知道为什么会这样以及为什么会导致兼容性问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T13:39:46.497

我遇到了类似的错误。

```
An OLE DB record is available.  Source: "Microsoft SQL Server Native Client 11.0"  Hresult: 0x80004005  Description: "The metadata could not be determined because statement '....' uses a temp table.". 
```

**解决问题。**

如果 SP 使用 a`#table or ##table`并且在 SP 中使用它，那么我们需要指定 #table 结构以及`EXEC`.

SP 应与结构一起给出。

```
EXEC SP_TestTemp 1,2 
```

它应该像

```
EXEC SP_TestTemp 1,2 WITH RESULT SETS
(
(
id      int,
Marks   int
)
) 
```

*注意：“保留相同的连接 = true”和“验证外部元数据”= false 在这里没有帮助/工作。*

# c++ - 在 C++ 中模拟基本字符串的使用

> ID：15069180
> 
> 赞同：1
> 
> 时间：2013-02-25T14:23:18.950
> 
> 标签：c++, string

我正在做一个小程序来模拟使用基本字符串。它目前无法始终如一地工作。

在这种情况下，程序工作正常：

```
a = a+ w + 10 + " " + L"x" + 65.5 ; 
```

但是，如果我以这种方式写相同的句子，所有工作都不好：

```
a = + w + 10 + " " + L"x" + 65.5 ; 
```

谁能向我解释我的程序有什么问题？

```
class sstring {
public:
    string s;

    sstring() {s.assign("");}

    template <class T>
    sstring& operator=(T i) {
        s = to_string( i );
        return *this;
    }

    sstring& operator=(const char *i) {
        s = i;
        return *this;
    }

    sstring& operator=(const wchar_t *w) {
        wstring ws = w;
        s.assign ( ws.begin(),ws.end() );
        return *this;
    }

    sstring& operator=(wstring w) {
        s.assign ( w.begin(),w.end() );
        return *this;
    }
    // *********************************************** +
    template <class T>
    sstring& operator+(T i) {
        s.append( to_string( i ));
        return *this;
    }

    sstring& operator+(const char *i) {
        s.append(i);
        return *this;
    }

    sstring& operator+(const wchar_t *i) {
        wstring ws = i;
        ws.assign(i);
        string cs;
        cs.assign ( ws.begin(),ws.end() );
        s.append( cs );
        return *this;
    }

    sstring& operator+(wstring w) {
        string temp;

        temp.assign( w.begin(),w.end() );
        s.append ( temp );
        return *this;
    }
    //*************************************************** <<
    friend ostream& operator<<( ostream &out,sstring obj);

};

ostream& operator<<( ostream &out,sstring obj) {
    out << obj.s;
    return out;
}

int main(void) {
    sstring a;
    wstring w;

    w = L"claudio";
    a = "daffra";
    a = a + w + 10 + " " + L"x" + 65.5;

    cout << "\ns :" << a;

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:39:30.317

这`a = w + 10 + " " + L"x" + 65.5`不起作用，因为`w`它不是类型，所以不使用`sstring`你的重载。`operator+`尝试例如在前面添加一个空`sstring`: `a = sstring() + w + 10 + " " + L"x" + 65.5;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:33:58.053

这两行将给出相同的结果：

```
int x;

x = x + 4;
x += 4; 
```

您建议的替代行是以下形式：

```
x =+ 4; 
```

PARSED与以下**内容**相同：

```
x = +4; 
```

我们看到的是（尽管这可以为类重载）：

```
x = 4; 
```

*如果它们实现了大多数人期望的正常行为，这也将适用于您的 wstring 和 sstring 类。从粗略的扫描来看，您似乎正试图保持这种行为。*

**附加说明：**让我们看一下两个解析树。

```
a = a + 9 + " "; 
```

这将做：

```
operator+(typeof(a), int);
operator+(typeof_previous_line, const char *); 
```

您可能已经重载了类型 + 一个 int 和 + 一个 const char* 才能工作。

另一方面：

```
a += 9 + " "; 
```

那会做：

```
operator+(int, const char *);
operator+=(typeof_previous_line); 
```

您可能没有定义这两个操作中的第一个。一个常见的解决方法是将第一项转换为您的结果类型。所以像：

```
a += sstring(9) + " ";    // or
a += sstring() + 9 + " "; 
```

# sql-server - 连接的数据库服务器不支持从 'uniqueidentifier' 到 'int' 的转换

> ID：15069184
> 
> 赞同：23
> 
> 时间：2013-02-25T14:23:44.977
> 
> 标签：sql-server, uniqueidentifier, ssms

我即将将我的数据库从使用旧成员身份迁移到 mvc4 中包含的那个，它使用`int`而不是`guid`.

更改类型时出现以下错误：

> *连接的数据库服务器不支持从 int 转换为 uniqueidentifier。*

如何更改`UserId`为`int`通过 SQL Server Management Studio？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-08-30T05:32:28.427

首先将数据类型更改为任何其他受支持的类型，如 varbinary 或任何其他类型。然后您可以将其转换为您想要的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-25T14:29:06.297

您必须添加一个新列 ( `ALTER TABLE ADD [NewId] INTEGER`)，然后运行以下命令来填充新的 id 列：

```
WITH Cte
AS
(
    SELECT *
    , ROW_NUMBER() OVER(ORDER BY [Your GUID Column Here] DESC) AS RowNumber
    FROM YourTable
)
UPDATE Cte
SET [NewId]= RowNumber
GO 
```

那里有一个新的 ID 列，您可以使用集群主键

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-06T12:06:59.920

参考[这篇](https://docs.microsoft.com/en-us/previous-versions/d7d0h4wt(v=vs.100)?redirectedfrom=MSDN)文章：

删除当前列并添加具有所需数据类型的新列应该可以解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-30T21:04:13.780

据我们所知; 唯一标识符变量为 32 个字节；int 是 8 个字节，而 bigint 是 16 个字节。

我们进行转换，第一个字节和唯一标识符之后。

简单的代码；

```
Select CAST( CAST(cast(0 as bigint) AS varbinary)+CAST(cast(88 as bigint) AS varbinary) as uniqueidentifier) 
```

# php - PHP file_get_contents 服务器检查

> ID：15069185
> 
> 赞同：0
> 
> 时间：2013-02-25T14:23:52.990
> 
> 标签：php, verification, cross-server

我的项目有单独的服务器，我想询问所有这些服务器的内容。我发现我必须使用`PHP: file_get_contents`or `cURL`，但这是我的问题。我的服务器有没有办法验证哪个服务器可以要求他们执行东西？

例如我使用这个脚本：

```
 function is_ajax() {

     // BOOLEAN return if AJAX
     return isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest';

 } 
```

检查请求是否基于 AJAX。

如果有办法使用它们，我可能会访问每个服务器的 IP 地址。

我可以说我想要执行的一件事是在验证了一些信息`SERVER B`之后开始一个会话。`SERVER A`因此，为了防止其他服务器和脚本在未经许可的情况下执行，我想要一种方法`SERVER B`来验证它实际上是`SERVER A`谁在询问。

**编辑：** 我正在`SERVER A`使用会话类创建一个会话，该会话类将加密的数据保存在 SQL 数据库中。

也通过使用会话 cookie 参数

```
 session_set_cookie_params(
        $cookieParams['lifetime'],
        $cookieParams['path'],
        $cookieParams['domain'],
        $secure,
        $httponly
     ); 
```

即使服务器不同，它们共享相同的域名但在服务器的子域中分开，所以也许一种方法是让`SERVER B`查看会话`SERVER A`然后创建类似的会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:03:05.807

如果您将会话存储在像 memcached 这样的集中式数据存储中，那么如果从同一个域访问它们，您的服务器将共享相同的会话。PHP 支持将会话存储在 memcached 中，因此您只需对其进行配置（session.save_handler）即可。然后，您的所有会话代码仍将按原样工作，但您的会话将在服务器之间共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:18:23.290

正如@complex857 建议的那样，我使用 ?SOMEPASSWORDVARIABLE=LONGSPASSWORDWITHRANDOMCHARS 解决。

由于 file_get_contents 是在服务器端运行的，如果可以通过监视来自服务器的流量来监视实际请求，那么猜测文件名文件变量和密码并不是很容易，但可能性很小

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T14:57:48.253

使用`[crossdomain.xml][1]`文件来指定哪些域能够发出请求。来自其他域的请求将被拒绝。

# javascript - JavaScript 的时间戳问题

> ID：15069186
> 
> 赞同：0
> 
> 时间：2013-02-25T14:23:54.423
> 
> 标签：javascript, date, timestamp

所以我只想找出日期是在今天之前还是将来的一天。所以基本上我有这个结构：

```
function data(startdate, enddate)
{
    var that = this;
    start = startdate;
    end = enddate;

    var today = new Date();
    today = today.getTime();
    today = Date.parse(today);

    this.status = false; // True = Server is in maintenance
    this.init = function()
    {
        isDone();
    }
    function isDone(){
        if( Date.parse(start) < today && today < Date.parse(end))
        {       
            that.status = true;
            console.log(that.status);
        }else
        {
            that.status = false;
            console.log(that.status);
        }
    }
} 
```

比我这样称呼它：

```
var x1 = new Date(2013,2,23,12,3,45);
var x2 = new Date(2013,2,27,12,3,45);

var foobar = new data(x1,x2);
foobar.init(); 
```

所以试图弄清楚，javascript创造了什么：

```
start:1364036625000 
end: 1364382225000 
today: 1361796935000 
```

我还将它解析回标准格式：

```
start:Sat Mar 23 2013 12:03:45 GMT+0100 
end:Wed Mar 27 2013 12:03:45 GMT+0100 
today:Mon Feb 25 2013 13:54:56 GMT+0100 
```

所以我不知道如何修复它或它如何工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:26:34.097

您的问题没有明确说明，但您似乎忘记（或忽略）月份在 javascript 中是零索引的。二月是`1`。

# sql - 如何使用子字符串或索引函数从datasatage中的文件中提取字符串的可变长度

> ID：15069197
> 
> 赞同：0
> 
> 时间：2013-02-25T14:24:43.557
> 
> 标签：sql, oracle, datastage

输入 ：

```
start1
david@gmail.com
david@gmail.com
david@gmail.com
david@gmail.com
david@gmail.com
david@gmail.com
david@gmail.com
start2 
```

我想捕获 start1 和 start2 之间的任何字符串。它们之间的字符串将是可变的。输出：

```
david@gmail.com
david@gmail.com
david@gmail.com
david@gmail.com
david@gmail.com
david@gmail.com
david@gmail.com 
```

**使用子字符串/索引函数**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:15:11.907

如果它在 pl/sql 中，那么你可以这样做：

```
SQL> declare
  2    v_str varchar2(2000) := 'start1
  3  david@gmail.com
  4  david@gmail.com
  5  david@gmail.com
  6  david@gmail.com
  7  david@gmail.com
  8  david@gmail.com
  9  david@gmail.com
 10  start2';
 11    v_newstr varchar2(2000);
 12    v_start_delim varchar2(10) := 'start1';
 13    v_end_delim varchar2(10) := 'start2';
 14  begin
 15    v_newstr := substr(v_str, instr(v_str, v_start_delim)+length(v_start_delim),
 16                       instr(v_str, v_end_delim) - instr(v_str, v_start_delim) - length(v_start_delim));
 17
 18    -- remove leading/trailing breaks.
 19    v_newstr := trim(both chr(10) from v_newstr);
 20    dbms_output.put_line(v_newstr);
 21
 22  end;
 23  /
david@gmail.com
david@gmail.com
david@gmail.com
david@gmail.com
david@gmail.com
david@gmail.com
david@gmail.com

PL/SQL procedure successfully completed. 
```

或者如果您在 SQL 中有字符串（假设字符串都在一行中）

```
SQL> select trim(both chr(10) from
 2           substr(str, instr(str, 'start1')+length('start1'),
 3                instr(str, 'start2') - instr(str, 'start1') - length('start1'))
 4         ) newstr
 5    from data;

NEWSTR
-----------------------
david@gmail.com
david@gmail.com
david@gmail.com
david@gmail.com
david@gmail.com
david@gmail.com
david@gmail.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:31:33.700

我在这里猜测是因为无法理解需要什么：

```
SELECT TRIM(SUBSTR(str, start1+1, btwn_starts)) final_str
  FROM
  (
  SELECT 'start1 '||' some data in between '||' start2' str
        , Length('start1') start1
        , Length('start2') start2 
        , Length(' some data in between ') btwn_starts
    FROM dual
  )
 /

Output string: some data in between 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:54:35.720

首先，您*必须*使用 order by。根据 SQL 规则，如果您不使用 order by，那么数据库可以按*任何*顺序返回结果，甚至与上次执行相同查询时不同。

假设您按 id 进行排序，并且您要查询的字段名称是 name

```
select name
from table1
where id > (select id from table1 where name = 'start1')
  and id < (select id from table1 where name = 'start2')
order by id 
```

# ruby - 红宝石基本正则表达式模式

> ID：15069201
> 
> 赞同：-2
> 
> 时间：2013-02-25T14:24:53.030
> 
> 标签：ruby, regex

您好，我正在尝试通过此标准从服务器日志中提取一些数据，`GET`但在输出中我想从 [GET] 路径 [协议] 仅获取路径

正则表达式：

```
line.match(/[a-z0-9]*GET \s*([\/a-zA-Z]+)/) 
```

修复.rb

```
...
GET /edu/languages/google
GET /edu/languages/google
GET /baz/img/techtalk
... 
```

那么，需要删除 GET 部分......有什么建议吗？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:37:13.450

第一个提示，使用[rubular.com](http://rubular.com)。

简短的回答

```
res = line.match(/^GET(.*)/)[1] 
```

含义：（如果需要）

1.  `^`表示匹配`GET`字符串的开头
2.  `()`表示在可恢复对象中捕获该部分的结果
3.  `.*`意味着捕获一切，因为那是你所需要的。
4.  `[1]`表示从匹配元素列表中获取第二项，0 是匹配的整个字符串。

如果需要，在循环中迭代

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:28:34.393

您可以使用括号运算符选择所需的匹配数据

```
"GET /hello".match(/[a-z0-9]*GET \s*([\/a-zA-Z]+)/)[1]
 => "/hello" 
```

# c# - c#请求FormClosing

> ID：15069202
> 
> 赞同：0
> 
> 时间：2013-02-25T14:24:56.747
> 
> 标签：c#, winforms, formclosing

我有一个表格来询问一些数据。在离开输入字段（TextBox、DGV）时，调用适当的 _Validating 方法或 _CellValueChanged 方法。

如果我想结束程序，也会调用这个方法——**在**调用 _FormClosing 方法之前。

如何确定程序是否分支到 _FormClosing 方法？

```
private void txb_Validating(object sender, CancelEventArgs e)
{
    doLog("Text 1");
}

private void dgv_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    doLog("Text 2");
}

private void doLog(string txt)
{
    // this is first called at closing...
    if( [FormClosing is active] )
    {
        // Do something
    }
    else
    {
        // Do someting different
    }
}

private void MyForm_FormClosing(object sender, FormClosingEventArgs e)
{
    // ... and this but later
    // Write the Logfile
} 
```

我如何替换 [FormClosing is active] 以获得正确的结果？

我试过了

```
if ( this.FormClosing== true ) 
```

所以

```
this.FormClosing +=new FormClosingEventHandler(MyForm_FormClosing); 
```

所以

```
FormClosingEventHandler cl = new FormClosingEventHandler(MyForm_FormClosing); 
```

但我总是走入死胡同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:30:51.717

`this.FormClosing`是一个在您的表单开始关闭时触发的事件（例如单击关闭按钮），因此得名。您需要您的应用程序像这样注册该事件：

```
 this.FormClosing +=new FormClosingEventHandler(MyForm_FormClosing); 
```

这确保了一旦触发了 FormClosing 事件，您`MyForm_FormClosing`将被调用。

`bool bIsFormClosing`一旦您的关闭函数被调用，您就可以创建一个类似的标志并设置该标志。

编辑：

正如我现在通过查看您的答案和评论了解到的那样，您想在 doLog 函数中知道表单是否正在关闭。

这是另一种方法

`

```
public class YourForm : Form
{
    private bool bIsClosing = false;
    Private bool bClosingHandled = false;

    public YourClass()
    {
       InitializeComponent();
       this.FormClosing +=
           new FormClosingEventHandler(MyForm_FormClosing);
    }

    private void txb_Validating(object sender, CancelEventArgs e)
    {
        doLog("Text 1");
    }

    private void dgv_CellValueChanged(object sender,
        DataGridViewCellEventArgs e)
    {
        doLog("Text 2");
    }

    private void doLog(string txt)
    {
        // this is first called at closing...
        if( bIsClosing )
        {
            // Do something
            bClosingHandled = true;
            this.close(); 
        }
        else
        {
            // Do someting different
        }
    }

    private void MyForm_FormClosing(object sender, FormClosingEventArgs e)
    {
        If(!bClosingHandled)
        {
          bIsClosing = true;
          e.Cancel = true;
          return;
        }

        // Write the Logfile
        doLog("whatever");
    }
}` 
```

这种方法使用两个标志...当您第一次收到关闭事件时，您将`bIsClosing`标志设置为 true，取消事件并返回。然后，一旦你的 dolog 函数被调用，你就强制关闭操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:48:06.873

这可以解决问题：

```
public class YourForm : Form
{
    private bool bIsClosing = false;

    public YourClass()
    {
       InitializeComponent();
       this.FormClosing +=
           new FormClosingEventHandler(MyForm_FormClosing);
    }

    private void txb_Validating(object sender, CancelEventArgs e)
    {
        doLog("Text 1");
    }

    private void dgv_CellValueChanged(object sender,
        DataGridViewCellEventArgs e)
    {
        doLog("Text 2");
    }

    private void doLog(string txt)
    {
        // this is first called at closing...
        if( bIsClosing )
        {
            // Do something
        }
        else
        {
            // Do someting different
        }
    }

    private void MyForm_FormClosing(object sender, FormClosingEventArgs e)
    {
        bIsClosing = true;
        // Write the Logfile
        doLog("whatever");
    }
} 
```

# javascript - ZeroClipboard 用于在 ASP.NET MVC 中复制到剪贴板

> ID：15069205
> 
> 赞同：0
> 
> 时间：2013-02-25T14:25:09.067
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc, zeroclipboard

我想向我的[ASP.NET](http://en.wikipedia.org/wiki/ASP.NET)网页添加复制到剪贴板功能。我找到[了 ZeroClipboard](http://code.google.com/p/zeroclipboard/)，但我找不到任何一个有效的例子。我可以让它在本地计算机上工作还是需要上传到服务器来测试它？

请给我一个示例链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:32:06.240

[jQuery ZeroClipBoard](http://www.steamdev.com/zclip/)可能是您正在寻找的。ZeroClipBoard 使用不可见的 Adob​​e Flash 影片来实现剪贴板功能。我们在我们的项目中使用它，它工作得非常好。

它很容易实现。下载 Flash 文件并将其包含在脚本文件夹中，然后按照以下步骤操作。

1.  将 jQuery 和 zClip 添加到您的文档中：

    ```
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery.zclip.js"></script> 
    ```

2.  在 <script> 块内，将 zClip 附加到将成为“复制按钮”的元素：

    ```
    $(document).ready(function(){
        $('a#copy-description').zclip({
            path:'js/ZeroClipboard.swf',
            copy:$('p#description').text()
        });
        // The link with ID "copy-description" will copy
        // the text of the paragraph with ID "description"
        $('a#copy-dynamic').zclip({
            path:'js/ZeroClipboard.swf',
            copy:function(){return $('input#dynamic').val();}
        });
        // The link with ID "copy-dynamic" will copy the current value
        // of a dynamically changing input with the ID "dynamic"
    }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:30:16.807

[该文档](https://github.com/jonrohan/ZeroClipboard)有一个关于如何设置它的完整示例。如果我们假设您使用[Razor](http://en.wikipedia.org/wiki/Microsoft_ASP.NET_Razor_view_engine)：

```
<html>
    <body>
        <button id="copy-button" data-clipboard-text="Copy Me!" title="Click to copy me.">Copy to Clipboard</button>
        <script src="@Url.Content("~/scripts/ZeroClipboard.js")"></script>
        <script type="text/javascript">
            var pathToSWF = '@Url.Content("~/scripts/ZeroClipboard.swf")';
        </script>
        <script src="@Url.Content("~/scripts/main.js)""></script>
    </body>
</html> 
```

然后在你的里面`main.js`：

```
// main.js
var clip = new ZeroClipboard( document.getElementById("copy-button"), {
    moviePath: pathToSWF
} );

clip.on( 'load', function(client) {
    // alert( "movie is loaded" );
} );

clip.on( 'complete', function(client, args) {
    this.style.display = 'none'; // "this" is the element that was clicked
    alert("Copied text to clipboard: " + args.text );
} );

clip.on( 'mouseover', function(client) {
    // alert("mouse over");
} );

clip.on( 'mouseout', function(client) {
    // alert("mouse out");
} );

clip.on( 'mousedown', function(client) {
    // alert("mouse down");
} );

clip.on( 'mouseup', function(client) {
    // alert("mouse up");
} ); 
```

# linux - 读取用户输入（应该是 linux 命令）并执行

> ID：15069211
> 
> 赞同：0
> 
> 时间：2013-02-25T14:25:32.043
> 
> 标签：linux, csh

我希望编写一个简单的 csh 脚本，它遍历网络中的所有计算机并执行在命令行输入的命令

`echo -n "Please enter command you would like executed on all computers > \n " set command = "$<"`

假设用户输入 ls | grep 的东西。然后我将如何在以下行中执行此命令？我尝试 `$command`了哪个适用于输入，例如`echo "Hello World"`. 我收到以下错误 ls | grep 某事

`ls: |: No such file or directory ls: grep: No such file or directory ls: something: No such file or directory`

理想情况下，我希望在循环通过网络中的每台计算机（我已经可以这样做）并执行之前在命令行输入几个命令。例如说我想复制两个不同的文件

`sudo cp ./bin/elastix /usr/bin; sudo cp ./lib/transformix /usr/lib`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:51:53.500

> 循环遍历网络中的所有计算机并执行在命令行输入的命令

您可能会使用 ssh，因此您会执行以下操作：

```
ssh $hostname "$command" 
```

我不是 csh 用户，所以我可能有语法错误。对于当前机器，您可以使用`eval`应该解释任何命令序列的 shell 命令，而不仅仅是简单的命令。

# php - 如何按优先级 id 列表对 mysql 结果进行排序？

> ID：15069212
> 
> 赞同：2
> 
> 时间：2013-02-25T14:25:34.953
> 
> 标签：php, mysql, sql

我有一个大型产品数据库，每个星期天，我的脚本都会激活 50 种新产品。问题是，根据我脚本中的一些规则，我找到了一些我应该优先激活的产品。（例如，假设它应该始终优先激活名称为“hello kitty”和“meshuggah”的产品，然后再进行其他操作）

我的 db 表包含有关产品的信息和唯一 ID。假设脚本找到了其中的 5 个 ID，标题中有 hello kitty。

那么，我该如何进行查询，以便优先项排在最前面，然后是 id desc？

这是我之后的一些伪代码：

`SELECT * FROM products order by (id='59', id='47', id='28', id='29', id='20'), id desc limit 50`

结果应该首先给我 id 59、47、28、29 和 20，然后是 products 表中按 id 降序排序的其他 id。

这可能在一个查询中吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T14:26:40.553

利用`FIELD`

```
SELECT * 
FROM products 
order by FIELD(id,59,47,28,29,20), id desc 
limit 50 
```

*   [使用 MySQL 按特定字段值排序](http://www.electrictoolbox.com/mysql-order-specific-field-values/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:10:36.450

实际上，您的伪代码也非常接近这样的查询：

```
SELECT *
FROM products
order by id='59' desc, id='47' desc, id='28' desc, id='29' desc, id='20' desc, id desc
limit 50 
```

这使用了条件评估为 0 或 1 的事实。

# java - 谷歌地图不显示

> ID：15069213
> 
> 赞同：0
> 
> 时间：2013-02-25T14:25:42.743
> 
> 标签：java, android, google-maps, android-emulator, google-maps-android-api-2

我正在尝试显示一个 android 项目的谷歌地图。我按照所有步骤没有任何问题，但是当我启动我的应用程序时，地图根本不显示，我只有一个白屏。

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.map"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.map.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.map.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
          <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="MyKeyXXXXXXX" />
        <activity
            android:name="com.map.HomeActivity"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:label="@string/app_name"
            android:theme="@style/FullscreenTheme" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name="com.map.MapActivity"
            android:label="@string/title_activity_map" >

        </activity>
    </application>

</manifest> 
```

有人看出什么不对了吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:51:40.543

以下是您应该遵循的步骤：

*   获取[Google Play 服务 SDK](https://developer.android.com/google/play-services/index.html)（这是 Maps API 所在的位置）
*   获取 API 密钥
*   在应用程序清单中设置密钥

最后但并非最不重要的一点是，不要忘记 Google 地图只会显示您的应用是否使用您提供的用于获取地图密钥的密钥进行签名。例如，如果您使用了生产证书并且正在使用调试密钥测试应用程序，您将无法看到地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:12:53.380

我也有这个问题。您的 API 密钥不是两个字符的巨大系列。在 Google Maps API 控制台上，创建项目并启用 Google Maps 后，您需要转到 API Access 页面，如果还没有，请单击“Create a new Android Key”。

您在应用程序中使用的 API 密钥是出现在新密钥上的约 40 个字符的字符串。将其粘贴到清单中，它应该可以工作。

# .net - Windbg lm：“延期”是什么意思？

> ID：15069220
> 
> 赞同：9
> 
> 时间：2013-02-25T14:25:57.777
> 
> 标签：.net, windbg, crash-dumps

我正在为 WinDbg 中的 .NET 2.0 程序集调试故障转储文件。

当我在 WinDbg 中输入“lm”时，我会得到一长串已加载的模块，如下所示：

```
723c0000 72950000 mscorwks   (deferred)  
.  
. 
```

这里的“延期”是什么意思？我需要担心吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T14:40:01.427

这只是意味着尚未为此模块加载任何符号。所以不用担心。

* * *

请参阅[lm（列出加载的模块）](http://msdn.microsoft.com/en-us/library/windows/hardware/ff552026%28v=vs.85%29.aspx)

> 符号类型紧跟模块名称。此列未标记。有关各种状态值的更多信息，请参阅[符号状态缩写](http://msdn.microsoft.com/en-us/library/windows/hardware/ff558838%28v=vs.85%29.aspx)。如果您已加载符号，则符号文件名在此列之后。

和[延迟符号加载](http://msdn.microsoft.com/de-de/library/windows/hardware/ff541840%28v=vs.85%29.aspx)

> 默认情况下，加载目标模块时不会实际加载符号信息。相反，调试器会根据需要加载符号。这称为延迟符号加载或延迟符号加载。

和[符号状态缩写](http://msdn.microsoft.com/en-us/library/windows/hardware/ff558838%28v=vs.85%29.aspx)：

> **缩写：**延期
> 
> **含义：**模块已加载，但调试器尚未尝试加载符号。符号将在需要时加载。有关详细信息，请参阅[延迟符号加载](http://msdn.microsoft.com/en-us/library/windows/hardware/ff541840%28v=vs.85%29.aspx)。

# xtify - iOS API 2.0 检索 XID

> ID：15069227
> 
> 赞同：1
> 
> 时间：2013-02-25T14:26:08.073
> 
> 标签：xtify

我正在使用适用于 iOS 的最新 SDK，并将建议的代码放入我的 appDelegate 的 init 方法中：

```
[[XLappMgr get] setInboxDelegate:self];
[[XLappMgr get]setDeveloperRegisterNotificationSelector:@selector(doSomethingAfterRegister:)];
[[XLappMgr get] setDeveloperXidNotificationSelector:@selector(doUpdateXid:)]; 
```

doSomethingAfterRegister 方法被成功调用，但 doUpdateXid 没有被调用。

我的目标是获取 Xid 值，我想知道何时是执行此任务的合适时间。

# php - 使用 Ajax 从 JSON Web 服务中检索数据

> ID：15069228
> 
> 赞同：1
> 
> 时间：2013-02-25T14:26:07.697
> 
> 标签：php, jquery, html, ajax, json

我有一个运行良好的 Web 服务，当我手动打开它并手动输入参数时。例如：

当我导航到 url.url/webservice.php?region=NY 时，它会为我提供我需要的数据库中的所有数据。现在我想在输入字段中输入一个城市，然后让 ajax 完成剩下的工作。

```
<form>
<input type="text" value="NY" name="myText" id="input">
<input type="submit" value="Submit" name="mySubmit" id="submit" onClick="changeView()">
</form> 
```

所以现在，当我在输入字段中键入内容时，Ajax 应该向我的 web 服务发送请求并获取数据。

我的网络服务如下所示：

```
<?php
header("Content-type: application/json"); 
$mysqli = new mysqli('localhost','root','','ttzaferis');
$array = array();
$region = $_GET['region'];
if($result = $mysqli->query("SELECT lon, lat FROM pointsofinterest WHERE region = '".$region."'")){
    $tempArray = array();
    while($row = $result->fetch_assoc()){
        $tempArray = $row;
        array_push($array, $tempArray); 
    }
    echo json_encode($array);
}
?> 
```

我现在只有 Ajax 部分的问题。我不明白如何使它工作。我尝试了以下

```
function changeView(){
    var region = document.getElementById('input').value;
    alert(region);
    $j.ajax({
    type: 'GET',
        url: 'webservice.php',
        data: region,
        success: function(response, textStatus, XMLHttpRequest) {  
        alert("test");
    }
});
} 
```

我不明白问题是什么以及如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:37:23.910

我通常发送这样的获取数据：

```
 $j.ajax({
    url: 'webservice.php?region='+region,

    success: function(response, textStatus, XMLHttpRequest) {  
    alert("test");
}
}); 
```

根据您的评论应该可以解决这个问题。我不知道是否可以通过数据发送，但如果是，那么你应该这样做：

```
 $j.ajax({
    url: 'webservice.php',
    dataType: "json",
    data: {region : region},
    success: function(response, textStatus, XMLHttpRequest) {  
    alert(response.somekey);
}
}); 
```

Or seirlizing it, But yet again, i'm not sure if it'll work. Note that i added `dataType`, though jQuery usually tries to find out what the dataType will be, won't hurt to add it

# objective-c - theos 错误“控制到达非空函数的结尾” cydia 调整

> ID：15069235
> 
> 赞同：0
> 
> 时间：2013-02-25T14:26:18.540
> 
> 标签：objective-c, cydia

我正在尝试创建一个 cydia 调整来改变游戏中的一些方法

但我总是收到这个错误

```
control reaches end of non-void function 
```

这是我的 Tweak.xm 中的代码（我将它们缩短到发生错误的位置）

```
 %hook Player

 -(void)Jump:(int)jump {

        if ((Upgrade = YES)) {

            jump = 1;

            %orig(jump); 

                            }

        else {

            %orig;

             }

    }
    -(int)GetSkill {

        if ((Upgrade = YES)) {

            return 1;

                             }

        else {

            %orig;

             }

    }

    %end

    %hook MainLayer

    -(int)GetSkill:(int)skill {
        if ((Upgrade = YES)) {

            skill = 1;

            %orig(skill);

                             }
        else {

            %orig;

             }

    }

    %end 
```

我不知道为什么代码块不起作用。对于那个很抱歉

请在这里帮助我，虽然这是一个警告即使我在警报中单击否，代码似乎仍然会改变游戏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:49:02.537

您的函数`-(int)GetSkill:(int)skill` 具有`int`指定的返回类型，但您没有`return`声明。`(void)`如果它不打算返回任何东西，那就让它成为一个

如果您有一个`return`if 语句内部，则必须至少有 1 个 return`if`和`else`部分才能始终返回，如果没有，它会给你那个警告

旁注：此语句`if ((Upgrade = YES))`将始终正确，因为它是分配`Upgrade`而不是进行比较，您可能希望将其更改为`if ((Upgrade == YES))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:01:24.197

我没有使用 Theos 的经验，也没有应用程序调整。

话虽如此，我建议您使用`return %orig;`而不是`%orig;`.

# linux - 用于将参数编写为变量以搜索特定字段的 awk 命令行

> ID：15069246
> 
> 赞同：0
> 
> 时间：2013-02-25T14:26:54.157
> 
> 标签：linux, variables, awk

所以我正在尝试编写一个脚本，该脚本将从命令行获取一个参数并将所述变量用作要打印的字段参数。该脚本必须使用任何数字或 NF。

所以，

```
echo a b c | ./awkprint.sh 1 
```

将打印第一个字段 (a)

和，

```
echo a b c | ./awkprint.sh NF 
```

将打印最后一个字段 (c)。

这是我在脚本中的行

```
awk -v awkvar=$1 '{print $awkvar}' 
```

它适用于我在命令行上使用的任何数字......但是，一旦我使用 NF，它似乎将其视为 $0 并打印所有字段，因此我得到：

```
echo a b c | ./awkprint.sh NF

a b c 
```

代替，

```
echo a b c | ./awkprint.sh NF

c 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:35:11.940

这样做是因为字符串`"NF"`被转换为`0`.

`awk`转换过程表明，任何无法转换为有效数字的字符串都会计算为`0`，因此，给你`print $0`.

来自`man awk`：

> 变量类型和转换
> 
> ```
>  Variables and fields may be (floating  point)  numbers,  or
>    strings,  or  both.   How the value of a variable is inter‐
>    preted depends upon its context.   If  used  in  a  numeric
>    expression,  it  will  be treated as a number; if used as a
>    string it will be treated as a string.
>    ...
>    When a string must be converted to a number, the conversion
>    is  accomplished using strtod(3). 
> ```

从`man strtod`：

> 返回值
> 
> ```
>  These functions return the converted value, if any.
> 
>   ...
>   If no conversion is performed, zero is returned and the
>   value of nptr is stored in the location referenced by
>   endptr. 
> ```

做你想做的事，你可以写——正如@Ed Morton所指出的：

```
#!/bin/bash
awk -v awkvar=$1 '{print (awkvar == "NF" ? $NF : $awkvar)}' 
```

但是请注意，`$0`当`awkvar`它不是可转换为整数的字符串时和它是`"NF"`.

更合适的检查是：

```
#!/bin/bash
awk -v awkvar=$1 '{
    if (awkvar == "NF") { print; }
    else if (int(awkvar) != 0) { print $awkvar; }
    else { print "Error: invalid field specifier;" }
}' 
```

您也可以检查 if `int(awkvar) <= NF`-- 以避免打印`""`。

# c++ - OpenCV - Brox 光流 - opencv_core244d!cv::GlBuffer::unbind 中的异常

> ID：15069255
> 
> 赞同：2
> 
> 时间：2013-02-25T14:27:19.653
> 
> 标签：c++, opencv, image-processing, cuda, opticalflow

有没有人设法让 OpenCV 中的 Brox 密集光流算法工作？

这是一些代码：

```
{
    // Load images
    cv::Mat PreviousFrameGrayFloat; // Has an image in format CV_32FC1
    cv::Mat CurrentFrameGrayFloat;  // Has an image in format CV_32FC1

    // Upload images to GPU
    cv::gpu::GpuMat PreviousFrameGPU(PreviousFrameGrayFloat);
    cv::gpu::GpuMat CurrentFrameGPU(CurrentFrameGrayFloat);

    // Prepare receiving variables
    cv::gpu::GpuMat FlowXGPU;
    cv::gpu::GpuMat FlowYGPU;

    // Create optical flow object
    cv::gpu::BroxOpticalFlow OpticalFlowGPU = cv::gpu::BroxOpticalFlow(0.197f, 0.8f, 50.0f, 10, 77, 10);

    // Perform optical flow
    OpticalFlowGPU(PreviousFrameGPU, CurrentFrameGPU, FlowXGPU, FlowYGPU); // EXCEPTION
    // Exception in opencv_core244d!cv::GlBuffer::unbind

    // Download flow from GPU
    cv::Mat FlowX;
    cv::Mat FlowY;
    FlowXGPU.download(FlowX);
    FlowYGPU.download(FlowY);
} 
```

如上所述，我遇到了一个异常，当我尝试使用该`cv::gpu::BroxOpticalFlow`对象时，我遇到了同样的问题，`cv::gpu::PyrLKOpticalFlow`但只有密集版本而不是稀疏版本，并且`cv::gpu::FarnebackOpticalFlow`工作正常......

奇怪的。

整个例外是：

```
Exception at 0x7c812fd3, code: 0xe06d7363: C++ exception, flags=0x1 (execution cannot be continued) in opencv_core244d!cv::GlBuffer::unbind 
```

我正在使用带有调试库的调试版本，使用 OpenCV 2.4.4，但是代码也在 OpenCV 2.4.3 中引发异常。

当我使用 OpenCV 2.4.3 时，我得到了这个异常：

```
Exception at 0x7c812fd3, code: 0xe06d7363: C++ exception, flags=0x1 (execution cannot be continued) in opencv_core243d!cv::SparseMat::erase 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:06:39.273

需要 OpenGL，但您的比例参数 (50.0f) 也可能存在问题。它似乎太大了。据我了解，这应该小于1。如果是一个很大的数字，算法会很快填满GPU内存。另外，使用扩展（倒置？）图像金字塔可能没有意义。虽然不完全确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:57:19.077

在尝试了其他版本的 OpenCV 并遵循此处包含的信息后：http: [//stuartjames.info/Journal/opencv-brox-optical-flow-sample-possible-fix.aspx](http://stuartjames.info/Journal/opencv-brox-optical-flow-sample-possible-fix.aspx)

看起来我需要用 OpenGL 重新编译 OpenCV。

您似乎可以通过运行以下命令来测试您安装的 OpenCV 是否具有 OpenGL：`cv::gpu::setGlDevice(0);`如果失败并出现上述异常异常，则需要重新编译。

OpenGL 是必需的，因为 OpenCV 中较新的光流算法将数据映射到 OpenGL 纹理以（我假设）加速操作，或者可能只是使代码更简单。

所以，在这一切之后，解决方案是用 OpenGL 重新编译 OpenCV。这可以通过`WITH_OPENGL`在使用 CMake 配置构建时勾选该框来实现。

如果您想使用视频阅读器的 GPU 版本，请确保您也勾选`WITH_NVCUVID`了这包含在 CUDA 中，但除非您要求，否则不包含在内...

**- 编辑 -**

在*保罗*发表评论后，我从问题中更正了代码中的比例因子。

这是我正在测试的完整代码，用于*nkint*：

```
{
    // Load images
    cv::Mat PreviousFrameGray = cv::imread("Input1.png", 0);
    cv::Mat CurrentFrameGray  = cv::imread("Input2.png", 0);

    cv::Mat PreviousFrameGrayFloat; // Has an image in format CV_32FC1
    cv::Mat CurrentFrameGrayFloat;  // Has an image in format CV_32FC1

    PreviousFrameGray.convertTo(PreviousFrameGrayFloat, CV_32FC1, 1.0/255.0);
    CurrentFrameGray.convertTo(CurrentFrameGrayFloat, CV_32FC1, 1.0/255.0);

    // Upload images to GPU
    cv::gpu::GpuMat PreviousFrameGPU(PreviousFrameGrayFloat);
    cv::gpu::GpuMat CurrentFrameGPU(CurrentFrameGrayFloat);

    // Prepare receiving variables
    cv::gpu::GpuMat FlowXGPU;
    cv::gpu::GpuMat FlowYGPU;

    // Create optical flow object
    cv::gpu::BroxOpticalFlow OpticalFlowGPU = cv::gpu::BroxOpticalFlow(0.197f, 50.0f, 0.8f, 10, 77, 10);

    // Perform optical flow
    OpticalFlowGPU(PreviousFrameGPU, CurrentFrameGPU, FlowXGPU, FlowYGPU);

    // Download flow from GPU
    cv::Mat FlowX;
    cv::Mat FlowY;
    FlowXGPU.download(FlowX);
    FlowYGPU.download(FlowY);

    // Use FlowX and FlowY in further processing
    //...
} 
```

# sql - 这个错误是什么意思“自然连接中使用的列不能有限定符”

> ID：15069256
> 
> 赞同：3
> 
> 时间：2013-02-25T14:27:21.840
> 
> 标签：sql, oracle11g

执行下面的代码后，我得到一个 ORA-25155 错误

```
SELECT p.prod_id, prod_name, prod_list_price,quantity_sold,cust_last_name
FROM products p NATURAL JOIN sales s NATURAL JOIN customer c
WHERE prod_id = 148; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T15:05:38.163

正如评论中所建议的那样，这个 ORA-25155 错误表明您正在限定列名“p.prod_id”而不仅仅是“prod_id”。这就是触发您的错误的原因。

试试这个完整的[SQL Fiddle 代码](http://sqlfiddle.com/#!4/4932f/1)。您的查询应该是：

```
SELECT prod_id, prod_name, prod_list_price,quantity_sold,cust_last_name
  FROM products
       NATURAL JOIN sales
       NATURAL JOIN customer
 WHERE prod_id = 148; 
```

多个表将连接一`NATURAL JOIN`对表，然后将第三个表连接到结果，依此类推。`NATURAL JOIN`语法没有明确的连接谓词，因此没有使用限定符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T15:20:31.067

`natural join`在 Oracle 中，在每个表中具有共同名称的列上连接两个表。因此，在连接之后，您不应该引用自然连接到别名的表之间共有的列，因为别名是多余的。

这类似于`using()`连接子句中的工作方式。

# c - 我的 C 程序上的输出非常混乱

> ID：15069259
> 
> 赞同：0
> 
> 时间：2013-02-25T14:27:27.687
> 
> 标签：c, io, runtime-error

这几天我发布了一些与该问题相关的更多问题。只是现在我得到了一些非常有趣的东西。

看我的代码：

```
#include <libpq-fe.h>
#include <stdlib.h>
#include <string.h>

#define LINE_SIZE 100

PGconn *connect(char *);

int main() 
{
    connect("/path/to/file.props");
    return 0;
}

PGconn *connect(char *file_path) 
{
    const char **keywords;
    const char **values;
    char *line = malloc(LINE_SIZE);
    char *prop, *val, *tmp;
    int i = 0, j = 0, k = 0;
    PGconn *conn = NULL;
    FILE *creds = fopen(file_path, "r");

    if (creds == NULL) {
        perror("error: cannot open credentials file");   //!!! warning
        exit(1);
    }

    keywords = malloc(6 * sizeof(char *));
    values = malloc(6 * sizeof(char *));

    while (fgets(line, LINE_SIZE, creds) != NULL) {
        if (line[strlen(line) - 1] == '\n')
            line[strlen(line) - 1] = '\0';
        prop = line;
        while(*(prop++) != '=') {
            i++;
        }
        tmp = prop;
        prop = malloc(i + 1);
        strncpy(prop, line, i);
        prop[i] = '\0';
        keywords[j++] = prop;
        val = malloc(strlen(line) - strlen(prop) + 1);
        strcpy(val, tmp);
        values[k++] = val;
        i = 0;
    }
    keywords[j] = NULL;
    values[k] = NULL;
    printf("%s %s %s %s %s\n", keywords[0], keywords[1], keywords[2], keywords[3], keywords[4]);
    printf("%s %s %s %s %s\n", values[0], values[1], values[2], values[3], values[4]); //prints well
    conn = PQconnectdbParams(keywords, values, 0);
    if (PQstatus(conn) != CONNECTION_OK) {
        fprintf(stderr, "%s\n", PQerrorMessage(conn));
        exit(1);
    }

    return conn;
} 
```

当我运行它时，我得到以下输出：

> hostaddr 端口 用户密码 dbname
> 
> 127.0.0.1 5432 my_user my_password my_db
> 
> 错误：无法打开凭据文件：地址错误

如您所见，文件内容被打印出来，并且只有在其内容被打印出来之后，上面的错误（来自带有“警告”注释的行）才会被打印出来，就像无法读取该文件一样。

你知道这里会发生什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T14:46:07.977

“connect”是连接到套接字的系统调用。我假设 PQconnextdbParams 可能会尝试使用“连接”并再次定向到您的函数。尝试将函数重命名为“myconnect”。

# typo3 - extbase 中属性的条件验证：手动添加错误

> ID：15069266
> 
> 赞同：0
> 
> 时间：2013-02-25T14:27:42.270
> 
> 标签：typo3, extbase

我需要在同一模型中根据其他字段的值来验证某些字段。由于自定义验证器只能访问它正在验证的值，因此我无法在那里检查其他验证。通过检查`AbstractValidator`，我找不到到达该对象的可能性，该对象的当前值已得到验证。

是否有解决方案来验证/添加控制器中的错误，设置错误并通过保留原始例程而不是向视图引入和分配新对象来呈现实际视图？基本上我可以创建一个自定义`$errors`变量，在完成自定义验证后用错误填充它，并将它与原始表单错误一起显示。但我不喜欢这种解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:41:41.247

添加新模型验证器时，您可以访问该模型的其他字段

文件：test_extension/Classes/Domain/Validator/TestModelValidator.php：

```
class Tx_TestExtension_Domain_Validator_TestModelValidator extends Tx_Extbase_Validation_Validator_AbstractValidator {
    /**
     * @param Tx_TestExtension_Domain_Model_TestModel $testModel
     * @return boolean
     */
    public function isValid($testModel) {
        /** @var $testModel Tx_TestExtension_Domain_Model_TestModel */
        //Access all properties from $testModel
        $field1 = $testModel->getMyField1();
        $field2 = $testModel->getMyField2();
    }
} 
```

您还可以将错误添加到特定字段，但此代码来自 TYPO3 4.5，不知道它是否仍然有效：

```
$error = t3lib_div::makeInstance('Tx_Extbase_Validation_Error', 'The entered value is allready in use.', 1329936079);
$this->errors['field2'] = t3lib_div::makeInstance('Tx_Extbase_Validation_PropertyError', 'field2');
$this->errors['field2']->addErrors(array($error)); 
```

# ipad - iPad 以不同方式显示网站

> ID：15069272
> 
> 赞同：0
> 
> 时间：2013-02-25T14:28:02.130
> 
> 标签：ipad, web

与其他平板电脑相比，我的网站 ( [http://thepearlguide.co.ug ) 在 iPad 上的显示非常笨拙。](http://thepearlguide.co.ug)

我已经搜索并尝试了不同的解决方案但没有成功[http://pixelproductionsinc.com/pixelblog/how-to-fix-background-image-scaling-on-ipad-safari-browser/](http://pixelproductionsinc.com/pixelblog/how-to-fix-background-image-scaling-on-ipad-safari-browser/)

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:16:39.767

看看[这个网站](http://css-tricks.com/snippets/css/ipad-specific-css/)。

您可以使用媒体查询为 ipad 添加一些 css，并使用元标记将默认缩放级别设置为使您的网站看起来正确的东西：

```
<meta name="viewport" content="width = 768, initial-scale=0.68, minimum-scale = 0.5,  maximum-scale = 1.25"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:46:25.210

您的网站是为 PC 设计的，而不是为 iPad、平板电脑或手机设计的。您必须使用响应式设计为所有设备设计您的网站。

# c# - 使用内存 SQLite 数据库在 C++ 和 C# 之间共享数据？

> ID：15069276
> 
> 赞同：3
> 
> 时间：2013-02-25T14:28:11.277
> 
> 标签：c#, c++, sqlite, in-memory-database

我正在一个具有多个 C++ 和一些 C# 组件的项目中工作。我目前正在开发一个新的 C# 组件，该组件需要与 C++ 组件共享数据（将来可能会有更多组件访问它）。所有组件都在同一个进程中运行。我目前的想法是使用内存数据库，但我不确定是否可行。

SQLite 很流行，可用于 C++ 和 C# 项目，并且它具有内存功能。问题是是否可以从两个组件访问同一个数据库，例如，我可以在我的 C# 项目中使用 C++ 中创建的 db（指针）的句柄吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:33:25.670

是的，这是可能的。当然，您需要共享一些数据结构和句柄（如您所说）。这样 SQLite 就无法检测到托管代码和本机代码之间的任何差异。因此，行为上没有区别。

如果您只使用 PInvoke 或 C++/CLI 来交换数据结构，可能会更容易。仅仅为了在进程中传递数据而启动整个 SQL 数据库似乎很浪费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:34:08.887

是的你可以。sqlite 数据库在内存中，但它作为文件驻留在磁盘上。当您关闭数据库连接时，它会刷新到磁盘上的文件中。因此，您基本上可以在一个组件写入中打开数据库连接并关闭连接，以便其他组件可以读取/写入数据库。它与您操作文件的方式类似，只是它是在内存中而不是在磁盘上管理的，因此比文件快一点。但是，如果您的意图是 C++ 和 C# 之间的 IPC，那么还有其他更好的方法。

# html - 重新设计默认 HTML 输入字段的最佳方法是什么？

> ID：15069277
> 
> 赞同：-2
> 
> 时间：2013-02-25T14:28:13.290
> 
> 标签：html, forms, css, cross-browser

我正在寻找最漂亮的方式来格式化 HTML (HTML5) 输入字段。有很多解决方案，但都太老了。（全部使用图像，而不是 CSS3）

我想要一个像这样的相同选择字段：[https](https://lector.hu/en/) ://lector.hu/en/ ，我想使用一个漂亮的上传区域，也许还有一个自动调整大小。

是否有任何基于 javascript 的跨浏览器兼容性库，有助于重新设计 html 上的所有输入字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:59:20.413

您找到的所有解决方案都是“过时的”，因为它们仍然是以跨浏览器方式设置*所有输入元素样式的唯一方法。*甚至您的[示例链接也使用 images](https://lector.hu/i/sprite-trans.png)。即使是 JavaScript 库也是如此，它通常只是用 span 或其他更具样式的元素动态替换输入元素。

样式表单输入的问题，以及为什么您*找不到*任何不使用图像和/或元素替换的跨浏览器方式，是因为表单元素实际上是*系统*元素，而不是 HTML 元素。

为了演示，在同一系统的不同浏览器中打开一个带有默认表单字段的网站；然后在具有不同操作系统的系统上打开相同的网站（例如，使用 Windows 和 Mac 机器）。你会发现，在同一个系统上浏览器之间不会有太大的区别，但是在不同的操作系统上，相同的浏览器会有很大的差异。

有些东西是样式化的——比如输入字段的边框，因此在不同的浏览器中可能略有不同，但你会注意到下拉（选择）和上传字段之类的东西几乎相同。这是因为浏览器没有太多权限来更改这些元素（可能的例外可能是 Internet Explorer，尤其是旧版本，因为它是内置在 Windows 中的）。

所以，你有两个选择：

1.  咬紧牙关，使用图片和/或 JavaScript
2.  接受输入在浏览器和平台之间会略有不同（这不一定是坏事，因为它与用户使用的系统建立了一致性）

# assembly - 如何从记忆中复制100个单词？

> ID：15069281
> 
> 赞同：1
> 
> 时间：2013-02-25T14:28:17.383
> 
> 标签：assembly, mips

我正在学习 MIPS 作为一种爱好并使用 QtSPIM 模拟器。这是我的第一个程序

我在书中的问题：

> 1.  编写一个程序，将 100 个字从内存中的位置复制`'SRC'`到内存中指定的另一个位置`'DEST'`。

顺便说一句，我知道运行循环 100 次可能是错误的。我还没有计算那部分。

我只想知道我的程序是否从其中复制这些位`src`并将它们放入 dest。

它至少能做到这一点吗？

请不要透露完整的解决方案，只是给我一些提示等。

这是我的尝试（我的第一次编程！）：

```
.data
src:  .space 400
dest: .space 400

.text
main:

la $t6, src     # t6 = pointer for src
la $t7, dest    # t7 = pointer for dest
li $t0, 100     # t0 = initialise countdown

loop:

lw $t1, ($t6)      # load 32 bits from src

sw $t2, ($t7)      # store bits from src to dest

addi $t6, $t6, 4   # add 4 to pointer to get next 32 bits of src 

addi $t7, $t7, 4   # add 4 to pointer to get next 32 bits of dest

addi $t0, $t0, -1      # countdown minus 1

bgt $t0, $zero, loop   # loop if countdown > 0

jr $ra    # end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T05:00:41.257

您的程序只需从 to 加载一个值，然后从`SRC`to存储一些随机值，因此需要进行一些更改。您之前尝试过任何调试吗？`$t1``$t2``DEST`

```
lw $t1, ($t6)      # load 32 bits from src
sw $t2, ($t7)      # store bits from src to dest 
```

并且无需循环 100 次。你可以做一些循环展开

# wpf - 更高效的日志过滤器

> ID：15069283
> 
> 赞同：1
> 
> 时间：2013-02-25T14:28:24.287
> 
> 标签：wpf, performance, filtering, processing-efficiency

我有一个程序可以显示日志文件中的行。

它们被解析并放入一个名为 LogLine 的类中，然后显示在数据网格中

这是我的过滤功能：

```
ICollectionView view = CollectionViewSource.GetDefaultView(this.LogView.ItemsSource);
bool traceChecked = this.TraceCheckbox.IsChecked.HasValue &&     this.TraceCheckbox.IsChecked.Value;
bool debugChecked = this.DebugCheckbox.IsChecked.HasValue && this.DebugCheckbox.IsChecked.Value;
bool infoChecked = this.InfoCheckbox.IsChecked.HasValue && this.InfoCheckbox.IsChecked.Value;
bool warnChecked = this.WarnCheckbox.IsChecked.HasValue && this.WarnCheckbox.IsChecked.Value;
bool errorChecked = this.ErrorCheckbox.IsChecked.HasValue && this.ErrorCheckbox.IsChecked.Value;
string filtertext = this.TextFilterBox.Text;
view.Filter = o =>
    {
        LogLine line = o as LogLine;
        return line != null
               && (((traceChecked && line.Trace) 
               || (debugChecked && line.Debug) 
               || (infoChecked && line.Info) 
               || (warnChecked && line.Warn) 
               || (errorChecked && line.Error))
               && line.Message.Contains(filtertext));
    }; 
```

这个函数已经很慢了，在一个有 200000 行的日志上需要将近 5 秒。

可以做些什么来加快这个速度？

根据 HighCore 的建议，我实现了一个真正的 ViewModel。这稍微快了一点，但仍然需要 5-6 秒才能扔掉 ObservableCollection 的所有行

```
ICollectionView view = CollectionViewSource.GetDefaultView(this.LogView.ItemsSource);
LogViewModel lvm = (LogViewModel)this.DataContext;
view.Filter = o =>
    {
        LogLine line = o as LogLine;
        if (line == null || !line.Message.Contains(lvm.FilterText))
            {
                return false;
            }

            switch (line.LogLevel)
            {
                case LogViewModel.LogLevel.Trace:
                    return lvm.Trace;
                case LogViewModel.LogLevel.Debug:
                    return lvm.Debug;
                case LogViewModel.LogLevel.Info:
                    return lvm.Info;
                case LogViewModel.LogLevel.Warn:
                    return lvm.Warn;
                case LogViewModel.LogLevel.Error:
                    return lvm.Error;
                default:
                    return false;
            }
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:43:04.133

我写了一个类似的日志查看器应用程序，但使用了不同的方法。

我对您的 LogLine 之类的类执行初始解析并将它们存储在列表中。然后当用户选择各种过滤器组合时，我使用 Linq 构建一个 IEnumerable 过滤器匹配项，该过滤器匹配项绑定到项目控件（在我的情况下为 ListView）。如果您愿意，可以使用 ObservableCollection 并清除/填充相同的结果。

我刚刚测试了一个 31MB 的文件（240k 行），结果在更改过滤器时会在一秒钟内显示出来。

# java - 运行 Junit 测试用例时出现 OutofMemoryError

> ID：15069286
> 
> 赞同：-3
> 
> 时间：2013-02-25T14:28:36.480
> 
> 标签：java, heap-memory, permgen

我正在通过 build.xml 在 Jenkins 中运行 Junit 测试用例。当我运行特定的测试用例时，出现以下错误。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<title>Error 500 Java heap space</title>
</head>
<body><h2>HTTP ERROR 500</h2>
<p>Problem accessing /url. Reason:
<pre>    Java heap space</pre></p><h3>Caused by:</h3><pre>java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2882)
    at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100)
    at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390)
    at java.lang.StringBuilder.append(StringBuilder.java:119)
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
    at java.lang.Long.parseLong(Long.java:410)
    at java.lang.Long.valueOf(Long.java:525)
    at org.codehaus.jettison.mapped.DefaultConverter.convertToJSONPrimitive(DefaultConverter.java:39)
    at org.codehaus.jettison.mapped.MappedNamespaceConvention.convertToJSONPrimitive(MappedNamespaceConvention.java:282)
    at org.codehaus.jettison.mapped.MappedXMLStreamWriter$JSONPropertyObject.withProperty(MappedXMLStreamWriter.java:153)
    at org.codehaus.jettison.mapped.MappedXMLStreamWriter$JSONProperty.withProperty(MappedXMLStreamWriter.java:66)
    at org.codehaus.jettison.mapped.MappedXMLStreamWriter.writeEndElement(MappedXMLStreamWriter.java:247)
    at com.sun.xml.bind.v2.runtime.output.XMLStreamWriterOutput.endTag(XMLStreamWriterOutput.java:144)
    at com.sun.xml.bind.v2.runtime.output.XmlOutputAbstractImpl.endTag(XmlOutputAbstractImpl.java:120)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.leafElement(XMLSerializer.java:326)
    at com.sun.xml.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl$StringImplImpl.writeLeafElement(RuntimeBuiltinLeafInfoImpl.java:1041)
    at com.sun.xml.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl$StringImplImpl.writeLeafElement(RuntimeBuiltinLeafInfoImpl.java:1020)
    at com.sun.xml.bind.v2.runtime.reflect.TransducedAccessor$CompositeTransducedAccessorImpl.writeLeafElement(TransducedAccessor.java:252)
    at com.sun.xml.bind.v2.runtime.property.SingleElementLeafProperty.serializeBody(SingleElementLeafProperty.java:121)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:340)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:696)
    at com.sun.xml.bind.v2.runtime.property.SingleElementNodeProperty.serializeBody(SingleElementNodeProperty.java:152)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:340)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:696)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementNodeProperty.serializeItem(ArrayElementNodeProperty.java:65)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementProperty.serializeListBody(ArrayElementProperty.java:168)
    at com.sun.xml.bind.v2.runtime.property.ArrayERProperty.serializeBody(ArrayERProperty.java:155)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:340)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsSoleContent(XMLSerializer.java:593)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeRoot(ClassBeanInfoImpl.java:324)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:494)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:315) 
```

下面是我用来运行 junit 测试用例 build.xml 的 build.xml 代码

```
<target name="runTests">
  <junit fork="yes" forkmode="once" printsummary="yes" dir="${basedir}" includeantruntime="yes" failureproperty="failureTest" maxmemory="1024m" jvm="">
  <jvmarg value="-XX:MaxPermSize=512M"/>
  <jvmarg value="-Dlog4j.configuration=log4j.properties"/> 
```

但是此错误仅在特定系统中发生，而不是在所有环境中发生。我怎样才能摆脱这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:03:23.413

在大多数情况下，从 OOM 的堆栈跟踪开始会产生误导，因为一旦堆几乎满了，任何对象分配都可能会失败。

增加堆可能会有所帮助，但是您的用例（测试您在评论中提到的一些验证）听起来不应该需要内存。

如果您想快速获得答案，请使用一些工具。包括 JVM arg: `<jvmarg value="-XX:+HeapDumpOnOutOfMemoryError"/>`，一旦堆被转储，在[Eclipse 内存分析器工具](http://www.eclipse.org/mat/)中打开它，看看是什么占用了内存。这是一个非常好的工具，您可以在几分钟内发现问题（对于更简单的情况）。

提示：如果您的测试类使用`SpringJUnit4ClassRunner`加载测试上下文，Spring 将缓存在运行期间加载的所有上下文。如果你有十几个不同上下文的集成测试，你很有可能会用完 512m 堆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:52:36.460

不看测试，真的很难帮助你，但我猜你正在使用的东西很大，特别是如果它涉及构建字符串。一些建议可以帮助你：

1.  尝试使用`StringBuilder class`来构建响应。我注意到在构建大字符串时使用“+”号有很大的不同。
2.  在 eclipse.ini 中增加可供 eclipse 使用的内存。可以在[此](https://stackoverflow.com/questions/5894312/how-to-tweak-this-eclipse-ini-file-to-improve-the-performance-of-eclipsehelios)链接中找到一个很好的解释。

我会尝试检查和更改代码，而不是更改内存设置。尽管可以增加分配给 JVM 的内存，但初始内存设置很小是有原因的。我认为这是因为开发人员不应该只编写内存失控程序，还应该注意构建在大多数环境中运行的程序，包括内存受限的环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:44:46.440

请尝试增加您的堆空间？

# machine-learning - 最近邻、朴素贝叶斯和决策树分类器解决给定分类问题的效果如何？

> ID：15069288
> 
> 赞同：2
> 
> 时间：2013-02-25T14:28:40.240
> 
> 标签：machine-learning, bayesian, decision-tree, nearest-neighbor

3 个图表 (i)、(ii)、(iii)![这里](../Images/26f7d3f5345f359e5831cd3bfb54d6af.png)显示了具有 2 个数值属性（x 和 y 轴）和具有两个类别（圆形和方形）的目标属性的训练集。

**我现在想知道数据挖掘算法（最近邻、朴素贝叶斯和决策树）解决每个分类问题的效果如何。**

我认为**朴素贝叶斯**（在属性不相关的朴素假设下）比（i）和（iii）更好地解决了第二个问题，因为这里的数值属性往往更独立于彼此。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T18:31:38.530

*如果您想在这种情况下使用每个给定的方法：*

**第一个**可以用**决策树**方法最好地解决，因为类可以按轴分开。我的意思是在 x 轴上画一条垂直线，将值分隔为左侧和右侧，并在 y 轴上画另一条垂直线，这样你会看到类将很好地分开。

**正如您提到的，**第二个**可以被视为**朴素贝叶斯问题。****

 ****第三个**可以用**k最近邻**方法解决。方形类在坐标系上的位置较近，圆形类也可以分类有一些错误。**

# javascript - 如何在元素后设置carret

> ID：15069292
> 
> 赞同：0
> 
> 时间：2013-02-25T14:28:51.337
> 
> 标签：javascript

之后我如何设置光标位置`<b>some test</b>`

示例代码：

`<div contenteditable="true"><p><b>some test</b></p></div>`

我正在使用 setStartAfter 和 setEndAfter，但无法正常工作

# html - 限制上传的文件类型，即仅显示 mp3

> ID：15069299
> 
> 赞同：13
> 
> 时间：2013-02-25T14:29:17.280
> 
> 标签：html

是否可以将表单输入的文件上传限制为仅显示扩展名为 mp3 的文件，如下所示：

```
<input class="someClass" type="file" name="UploadAudio" accept="audio/mp3"/> 
```

因为由于某种原因这不起作用，它似乎总是显示其他文件类型扩展名以供上传。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-25T14:50:02.523

要指定扩展名，请以点开头：

```
<input type="file" accept=".mp3,audio/*"> 
```

这将接受所有扩展名为 mp3 的文件或音频类型的文件。逗号允许列出多种可能性，因此只需删除`,audio`如果您严格只想要`.mp3`（而不是`.wav`例如）。

您的音频/mp3 正在混合两种方式：要么使用扩展名，要么使用正确的 mime 类型，应该是`audio/mpeg3`

所以你的可能性是：

```
<input type="file" accept=".mp3"> 
```

或者

```
<input type="file" accept="audio/mpeg3"> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-02-27T05:14:46.500

要接受所有类型的音频文件，请明确编写所有类型的接受扩展名。

```
<input type="file" accept="audio/mp3,audio/*;capture=microphone" />
```

这也隐藏了屏幕上显示的选择文件按钮。

# synchronization - 与 Exchange Server 日历同步

> ID：15069303
> 
> 赞同：0
> 
> 时间：2013-02-25T14:29:27.820
> 
> 标签：synchronization, exchangewebservices, exchange-server, mapi

我有一个“日历”表，它是我们数据库结构的一部分，即日历记录将包含唯一标识符、开始日期、结束日期、主题和注释字段

我想编写一个 Windows 服务（可能是 Delphi 或 C#），它经常将日历表中的数据记录与 Exchange 日历同步。

日历记录可以在数据库端进行添加、更改和删除，但只能在Exchange端进行编辑和删除。同步必须双向工作，即使用最新更改进行更新。

我一直将 MAPI 和 Exchange Web 服务作为起点。也许我应该考虑其他替代方案或第 3 方解决方案？有没有人有过执行此类任务的经验，或者能够就如何解决该任务提供任何建议。

任何帮助将不胜感激。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:58:58.190

Exchange MAPI 服务提供自己的同步 API - 增量更改同步。请参阅 IExchangeExportChanges 接口。

如果您使用的是 C#（不允许您访问扩展 MAPI），您可以使用 Redemption - 它将 ICS 包装为 RDOFolderSynchronizer 对象：[http ://www.dimastr.com/redemption/rdofoldersynchronizer.htm](http://www.dimastr.com/redemption/rdofoldersynchronizer.htm)

# java - 将一个类添加到另一个类中的 ArrayList

> ID：15069304
> 
> 赞同：-3
> 
> 时间：2013-02-25T14:29:28.667
> 
> 标签：java, class, arraylist, extends

我在将“行”类中的元素添加到“表”类中时遇到了一些问题。类 Table 扩展了 ArrayList，因此 arrayList 的每个元素都应该包含一个类 Row。如果我创建一个类表并手动运行 addApplicant(Row app) 方法，我可以添加一个行。但是，我希望行在创建后立即自动添加到类表中。到目前为止，这是我的代码： Table 类：

```
public class Table extends ArrayList<Row>{

public String appArray[];

/**
 * Constructor for objects of class Table
 */
public Table()
{
}

public void addApplicant(Row app)
{
    add(app);
}

public void listArray() //Lists the Array[]
{
    for(int i = 0; i<appArray.length; i++)
    {
        System.out.println(appArray[i]);
    }
}} 
```

行类：

```
public class Row{

private String appNumber;
private String name;
private String date;
private String fileLoc;
private String country;
public ArrayList<String> applicant;

public Row(String appNumber, String name, String date, String fileLoc, String country)
{
    this.appNumber = appNumber;
    this.name = name;
    this.date = date;
    this.fileLoc = fileLoc;
    this.country = country;
    applicant = new ArrayList<String>();
    applicant.add(appNumber);
    applicant.add(name);
    applicant.add(date);
    applicant.add(fileLoc);
    applicant.add(country);
}

private void convertToString()
{
    for(int i = 0; i<applicant.size(); i++)
        {
            String appStr = applicant.toString();
        }
}} 
```

关于我缺少什么的任何想法？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:33:05.207

您没有对表类的引用。您可以做的是请求将 Table 对象传递给构造函数，因此您的构造函数将如下所示：

```
 public Row(String appNumber, String name, String date, String fileLoc, String country, Table table) 
```

并打电话

```
table.addApplicant(this); 
```

当您完成将信息加载到行对象中时。这会将对该行对象的引用添加到您的表中:)

# jquery - 取消绑定jquery中的点击事件

> ID：15069313
> 
> 赞同：0
> 
> 时间：2013-02-25T14:30:03.907
> 
> 标签：jquery

我想取消绑定点击事件，但它不适用于实时方法

```
<script type="text/javascript">
$(function(){
$('a').live('click',function(){
alert(0)
$(this).unbind('click')
})
})
</script>

<a href="#">click</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:33:25.790

```
$(document).on('click','#a',function(){

//Code here

}); 
```

生活被贬低了..`on()`用于`live()`

并将其用于解除绑定

```
$("p").die("click", foo); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:34:00.890

使用[.one](http://api.jquery.com/one/)代替：

```
$(document).one('click','a',function(){
   alert(0);       
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T14:32:57.803

看看模具方法： [http ://api.jquery.com/die/](http://api.jquery.com/die/)

如果您使用 1.7：

```
$("p").live("click", foo); // ... now foo will be called when paragraphs are clicked ...
$("p").die("click", foo); // ... foo will no longer be called. 
```

确实已弃用，但这取决于您使用的版本。

```
 version deprecated: 1.7, removed: 1.9 
```

# asp.net - 为什么 HyperLinkField 替换某些 URL 中的字段而不替换其他 URL？

> ID：15069315
> 
> 赞同：1
> 
> 时间：2013-02-25T14:30:07.870
> 
> 标签：asp.net, gridview

我有一个大页面，`GridView`绑定`HyperLinkfield`到其中一个列，有两个参数，格式如下：

```
 <asp:HyperLinkField DataNavigateUrlFields="id,nome" DataNavigateUrlFormatString="~/adm/Clipping/Publicidade/Cadastro/ValorPrograma.aspx?programa={0}&amp;nome={1}" HeaderText="Valores" InsertVisible="False" NavigateUrl="~/adm/Clipping/Publicidade/Cadastro/ValorPrograma.aspx"                 Text="Ajustar valores">
        <ItemStyle ForeColor="#339933" />
 </asp:HyperLinkField> 
```

字符串`DataNavigateUrlFormatString="~/adm/Clipping/Publicidade/Cadastro/ValorPrograma.aspx?programa={0}&amp;nome={1}`替换为`DataNavigateUrlFields="id,nome"`。**一切都很好**......对于某些行。另一方面，值不会被替换并且 URL 不完整。

所以我去数据库检查是否有一些数据不一致，并从一个通常被替换的字段中提取数据，`GridView`以及另一个没有被替换的字段。

![数据库中的数据是一致的。 当formink超链接字段时，结果1根本没有被替换](../Images/063a87f2f5530b81707271c0800461b0.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:43:53.010

正如[Hanno](https://stackoverflow.com/users/964955/hanno)的[评论](https://stackoverflow.com/questions/15069315/why-is-hyperlinkfield-replacing-fields-in-some-urls-and-not-in-others#comment21190849_15069315)和[jadarnel27](https://stackoverflow.com/users/861565/jadarnel27)的实际[回复](https://stackoverflow.com/a/15071181/461076)所建议的那样，问题与 URL 字符编码有关（特别是在这种情况下是`:`字符的编码）。

为了解决这个问题，我建议使用a`TemplateField`代替`HyperLink`字段，如下

```
 <asp:TemplateField HeaderText="Valores" InsertVisible="False">
            <ItemTemplate>
                <asp:HyperLink ID="HyperLink1" runat="server" 
                    NavigateUrl='<%# "~/adm/Clipping/Publicidade/Cadastro/ValorPrograma.aspx?programa=" + HttpUtility.UrlEncode(Eval("id").ToString()) + "&nome=" + HttpUtility.UrlEncode(Eval("nome").ToString()) %>'
                    Text="Ajustar valores"></asp:HyperLink>
            </ItemTemplate>
            <ItemStyle ForeColor="#339933" />
        </asp:TemplateField> 
```

关键概念是`HttpUtility.UrlEncode()`在模板本身中使用而不是调用`RowDataBound`事件。

完成后，数据库数据将在构成 URL 之前被正确编码，并且它可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:07:31.887

我同意[Hanno](https://stackoverflow.com/users/964955/hanno)[在评论中](https://stackoverflow.com/questions/15069315/why-is-hyperlinkfield-replacing-fields-in-some-urls-and-not-in-others#comment21190849_15069315)的说法，这可能是由于 URL 字符不正确造成的。

这是您可以对 RowDataBound 事件中的字符进行编码的一种方法：

```
protected void yourGridView_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
        i = 0; // the ordinal of the column you need to encode

        DataRowView rowView = (DataRowView)e.Row.DataItem;
        string id = Server.UrlEncode(rowView["id"].ToString());
        string nome = Server.UrlEncode(rowView["nome"].ToString());

        string newURL = String.Format("~/adm/Clipping/Publicidade/Cadastro/ValorPrograma.aspx?programa={0}&amp;nome={1}", id, nome);

        e.Row.Cells[i].Text = newURL;
    }
} 
```

你需要在你的标记中有这样的东西`GridView`，以便将它连接到事件处理程序：

```
OnRowDataBound="yourGridView_RowDataBound" 
```

# c# - Wix .net 4 先决条件

> ID：15069322
> 
> 赞同：2
> 
> 时间：2013-02-25T14:30:28.497
> 
> 标签：c#, .net, wix, installation

我正在使用 Wix，并且我在 .net 中针对 Dotnet 4.0 编写了自定义操作。在安装过程中，欢迎 dlg 之后，在系统中检查 dotnet 框架，如果不存在，则会显示 dotnetframework 先决条件对话框。如果安装了点网框架，它将转到进度对话框，在该对话框中将调用用 .net 编写的自定义操作。但是在没有安装 dotnet 框架的系统上，msi 根本不会去welcomedlg 本身，它会抛出以下错误。在 customaction 配置中，有以下条目

`<startup useLegacyV2RuntimeActivationPolicy="true"> <supportedRuntime version="v4.0" /> <supportedRuntime version="v2.0.50727"/>`

它显示以下错误 SFXCA: Extracting custom action to temporary directory: C:\DOCUME~1\\LOCALS~1\Temp\MSI34.tmp-\ SFXCA: Failed to get requested CLR info. 错误代码 0x80131700 SFXCA：确保安装了正确版本的 .NET Framework，或者 CustomAction.config 中存在匹配的 supportedRuntime 元素。如果要绑定到 .NET 4 或更高版本，请将 useLegacyV2RuntimeActivationPolicy=true 添加到元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:41:18.517

从上面的评论中可以看出，自定义操作是在条件检查之前安排的，以检查是否安装了正确的 .NET Framework。修复是稍后在 UI 序列中移动自定义操作。

# android - Android 中主要活动的意图列表

> ID：15069331
> 
> 赞同：-1
> 
> 时间：2013-02-25T14:31:03.590
> 
> 标签：android, android-intent

是否有可用的列表列出所有主要活动，这些活动可以通过电子邮件、相机、系统功能等意图调用？我无法在 Google 的 Android 开发者网站上找到这样的列表。我很好奇 SO 中的一些开发人员如何能够在 Google 甚至没有发布 Intent 及其参数时提出它们。还是谷歌员工在这里发布它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:32:34.427

[在这里](http://developer.android.com/guide/appendix/g-app-intents.html)。直接来自谷歌开发者指南。

**更新**：[这里](http://developer.android.com/reference/android/content/Intent.html)有一些更多的意图，同样来自开发者指南。它详细解释了每个`Intent`功能的作用。

# matlab - 查找一对向量中的所有行，其中两个条目均非零（八度音阶）

> ID：15069333
> 
> 赞同：0
> 
> 时间：2013-02-25T14:31:14.607
> 
> 标签：matlab, octave

我在 Octave 中有 anx 2 矩阵，我想找到矩阵（行，1）和矩阵（行，2）元素非零的每一行。我可以使用这样的 for 循环：

```
[nrows, ncols] = size(data);
for i = 1:nrows
    if(data(i, 1) ~= 0 && data(i, 2) ~= 0)
        % Do something
    end
end 
```

问题是 n 大约是 300 万，而 Octave 中的迭代需要永远。我觉得有一种方法可以用 find 来做到这一点，但我还没有弄清楚。

有人有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:36:34.440

您可以创建使用逻辑索引：

```
idx = all(data(:,1:2)~=0, 2); 
```

结果向量在每行中都`idx`包含`1`s ，其中两个单元格均非零，`0`否则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:08:05.830

我认为在这种情况下（因为它与零值有关）以下也应该起作用

`idx=(data(:,1).*data(:,2)~=0)`

但是@H.Muster 的解决方案适用于所有情况，因此是更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:33:52.920

如果性能是问题：也许尝试将两列都转换为逻辑：

```
useful = and(logical(data(:,1)),logical(data(:,2))) 
```

然后您可以再次使用逻辑索引：

```
filtered = data(useful,:) 
```

# php - 一个变量上的多个函数

> ID：15069334
> 
> 赞同：0
> 
> 时间：2013-02-25T14:31:16.030
> 
> 标签：php, sql, str-replace, ucfirst

我想在数据库中写一些东西，但在我想删除字符串中的所有空格并将第一个字母放在上面之前。

这就是我想做的，但它不起作用：P

```
//INITIALIZATION OF VARIABLE $perfectFirstname 

    $perfectFirstname = str_replace(' ','',$_POST["firstnameInput"]);

//PART OF MY QUERY

    $sql .=     "'".mysql_real_escape_string(ucfirst($perfectFirstname))."', "; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:33:26.163

您可以将[ucfirst](http://php.net/manual/en/function.ucfirst.php)用于大写：

```
$your_var = mysql_real_escape_string(ucfirst(strtolower(str_replace(' ','',$_POST["firstnameInput"])))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:33:48.880

怎么样，

```
$perfectFirstname = preg_replace('/\s+/', '', $_POST["firstnameInput"]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:35:54.580

```
<?php

$_POST["firstnameInput"] = 'Billy';

$sql = '';
$sql .= "'".mysql_real_escape_string(ucfirst(str_replace(' ','', $_POST["firstnameInput"])))."', ";

var_dump($sql);

// OR, to reuse, a function like:

function MyEscape ($text) {
  return mysql_real_escape_string(ucfirst(str_replace(' ','', $text)));
}

$sql = '';
$sql .= "'".MyEscape($_POST["firstnameInput"])."', ";
var_dump($sql);

?> 
```

# c# - 单击时从 GridView 中的 SQL 中返回日历上选定日期的数据

> ID：15069336
> 
> 赞同：0
> 
> 时间：2013-02-25T14:31:23.733
> 
> 标签：c#, asp.net, sql

我正在为一家中小型企业创建一个轮换系统，作为我在大学的最后一年项目。我正在尝试创建一个功能，用户可以在其中单击日历，系统将自动返回所选日期的班次。这是代码：

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <h2>
        Select date to show rota for selected date:
    </h2>
        <p>
            <asp:Calendar ID="Calendar" runat="server" nextprevformat="shortmonth" OnSelectionChanged="Calendar_SelectionChanged" />
            <br />
             Date Selected: <asp:TextBox id="textSelected" runat="server" Text="2013-02-21" AutoPostBack="true"></asp:TextBox>
        </p>
        <asp:Label id="lbl" runat="server"></asp:Label>
        <p>&nbsp;</p>
    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataKeyNames="Shift_ID" DataSourceID="SqlDataSource1" onselectedindexchanged="GridView1_SelectedIndexChanged" AllowSorting="True">
        <Columns>
            <asp:CommandField ShowSelectButton="True" />
            <asp:BoundField DataField="Shift_ID" HeaderText="Shift_ID" ReadOnly="True" SortExpression="Shift_ID" />
            <asp:BoundField DataField="Shift_Date" HeaderText="Shift_Date" SortExpression="Shift_Date" />
            <asp:BoundField DataField="Start_Time" HeaderText="Start_Time" SortExpression="Start_Time" />
            <asp:BoundField DataField="End_Time" HeaderText="End_Time" SortExpression="End_Time" />
            <asp:BoundField DataField="Employee_ID" HeaderText="Employee_ID" SortExpression="Employee_ID" />
            <asp:BoundField DataField="Shift_Duration" HeaderText="Shift_Duration" SortExpression="Shift_Duration" />
        </Columns>
    </asp:GridView>

    <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:rotasystemConnectionString %>" SelectCommand="SELECT [Shift_ID], [Shift_Date], [Start_Time], [End_Time], [Employee_ID], [Shift_Duration] FROM [Shift]">
    </asp:SqlDataSource>
    <p>&nbsp;</p>    
</asp:Content> 
```

和

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

public partial class CalendarSelect : System.Web.UI.Page
{
    public string vconnstr;
    public string strsql;

    protected void Calendar_SelectionChanged(object o, EventArgs e)
    {
        textSelected.Text = Calendar.SelectedDate.ToString("yyyy-MM-dd");
        if (Page.IsPostBack == true)
        {
            lbl.Text = "This needs to return a gridview showing the shifts for the date of:";
            lbl.Text += "<br /> " + Calendar.SelectedDate.ToShortDateString();
        }
    }

    protected void GridView1_SelectedIndexChanged(object sender, EventArgs e) { }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:47:22.220

检查这个[http://msdn.microsoft.com/en-us/library/ms228044%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms228044%28v=vs.100%29.aspx)

我在我的项目中使用过它。

它肯定会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-10T16:21:08.550

即使我想这样做，我也是这样做的：
1- 拖放日历控件和网格视图
2- 将数据源添加到 gridview 并指定列，例如 select column1,2,3 from tablename where your_date_column = Control of the calendar . 配置数据源将为您提供选项选择控件
3- 并完成 :) 我的工作正常

# asp.net-mvc - 每种文件类型的图标

> ID：15069339
> 
> 赞同：0
> 
> 时间：2013-02-25T14:31:33.200
> 
> 标签：asp.net-mvc, asp.net-mvc-3

在我的 MVC 应用程序中，用户可以上传各种类型的文件（pdf、jpg、txt 等），我想显示特定于每种类型的图标，目前我正在使用一个图标（pdf），我想要的，基于应显示文件类型，相关图标。请指导我可以为此目的使用哪种方法

```
<td>
@if (item.CalibratedBy != null){
<a href = @Url.Action("ViewCertificate", new { fileName = item.CalibrationCert }) > 
<img src = "@Url.Content("~/Content/Icons/pdf.jpg")"  alt = "attachment" /> </a>
}
</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:36:47.273

1.  将所需的扩展类型作为属性公开`item`（可能通过模型​​传入）
2.  创建一个`HtmlHelper`扩展方法，该方法将接收`item.FileType`并返回要使用的适当图标文件的路径。`<img>`在你的标签中调用它。

# javascript - 在 Windows 上安装 GameClosure

> ID：15069344
> 
> 赞同：1
> 
> 时间：2013-02-25T14:31:57.590
> 
> 标签：javascript, node.js, windows, macos, gameclosure

有谁知道如何在 Windows 上安装 GameClosure？根据文档，在[安装指南](http://docs.gameclosure.com/guide/install.html)中，仅支持 osx，尽管它们*在 Linux 和 Windows 上运行取得了一些成功*。不幸的是，他们没有详细说明如何做到这一点，谷歌只出现了一个看起来很有希望的页面，它返回一个 404（有一个缓存版本，但它似乎只是半篇文章）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:36:42.383

我已经在 Windows 上成功安装了 GC DevKit，在尝试[安装 GC DevKit](http://docs.gameclosure.com/guide/install.html)之前还有一些额外的步骤，比如创建符号链接。

仔细按照这些步骤操作，启动和运行它应该没有问题。通读它们并尝试了解首先需要什么。

1.  [从安装指南](http://docs.gameclosure.com/guide/install.html)下载所需项目列表（适用于 Git、Node 和 Java 的 Windows 构建）。
2.  打开 Git Bash（在 Git 下的开始菜单中找到它）
3.  `git clone https://github.com/gameclosure/devkit`通过克隆 repo ( )继续安装指南。
4.  如果您在 Git Bash 中没有更改目录，这些文件将被安装到**%USERPROFILE% 。**
5.  *将devkit\SDK*中的所有文件移动到其他地方，但确保它们已从该目录中消失。
6.  打开一个普通的命令提示符 (cmd.exe)。
7.  使用命令提示符（不是 Git Bash 控制台）（在 Vista 及更高版本中可用）为*devkit\SDK*目录下的所有内容创建符号链接。`mklink`您在第 5 步中移动的文件将包含作为文本的路径，链接应指向 EG：>`mklink /D "%USERPROFILE%\devkit\sdk\squill" "..\lib\squill\"`
8.  JSIO 比较特殊，在撰写本文时实际上需要存在于子目录中。创建目录*devkit\SDK\jsio*，然后在内部创建一个符号链接，该链接返回另一个相对路径。例如：>`mklink /D "%USERPROFILE%\devkit\sdk\jsio\jsio" "..\..\lib\js.io\packages\"`
9.  回到你的 Git Bash 控制台，现在通过切换到运行脚本的*devkit目录继续安装*[GC DevKit 。](http://docs.gameclosure.com/guide/install.html)*`./install.sh`*
**   通过执行运行 basil`node src/basil [command]`*

 *如果所有正确的先决条件都到位，那么一切都应该顺利进行。如果 basil 抛出错误，则很可能是符号链接，只需检查所有内容是否都指向正确的位置并运行`./install.sh`以重试。

祝你好运！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:10:27.927

我无法在 Windows 上安装它，但它很容易安装在 linux 上，所以我最终使用了 virtualbox 和 linux vm。Cygwin 可能是另一种选择，但我没有尝试过，所以很遗憾不能确定它是否有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T14:53:37.367

现在[**这里有在 Windows 上安装 Game Closure SDK 的完整指南**](http://docs.gameclosure.com/guide/windows-guide.html)（我还在这里发布了[pastebin](http://pastebin.com/fWd9eMTx)中的内容，以防之前的链接消失）

安装和配置所有东西是一个相当大的过程，看起来你只能使用 Windows 版本的 SDK 为 Android 开发，但我可能弄错了*

# html - 创建指向 CSV 文件的超链接并使用应用程序打开文件

> ID：15069348
> 
> 赞同：1
> 
> 时间：2013-02-25T14:32:03.207
> 
> 标签：html, csv, hyperlink

我有一个指向 CSV 文件的链接。单击后，它将在浏览器中打开文件。我想使用不同的应用程序（即 Excel、Open Office、Lotus）将文件作为电子表格打开。是否可以包含标题或其他东西来实现这一点？谢谢

关联：

```
<a target="_blank" href="contacts.csv">Contacts</a> 
```

浏览器显示：

```
First Name,Last Name,Title,Email,Company,Address,City,State,Zipcode,Direct Phone,Mobile Phone,Direct Fax,Company Phone,Company Fax
John,Doe,Estimator,johnd@acme.com,Acme Co.,112 Main St,Gothem,IL,,(847) 555-1122,,,,
Jane,Doe,Engineer,,Ace Industries,,Seattle,WA,,,,,(206) 555-1234, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:40:03.697

您需要在生成 csv 文件的任何内容上设置内容类型标题。

请参阅：[为 excel 文档设置 mime 类型](https://stackoverflow.com/questions/974079/setting-mime-type-for-excel-document)

对于可用的标题。

你没有说你使用哪种语言来生成 csv 数据，或者它是否只是你链接到的平面文件。虽然大多数语言都会提供动态设置标头的方法，但如果您使用静态平面文件，则可能需要设置 htaccess（假设 apache 是您的 Web 服务器）。这里有这种情况的说明：http: [//htaccess.wordpress.com/2008/07/16/sending-correct-content-type-headers-with-htaccess/](http://htaccess.wordpress.com/2008/07/16/sending-correct-content-type-headers-with-htaccess/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-17T21:01:04.953

@stakolee 链接到的答案实际上更具体到在 Excel 中打开文件。如果您想要正确且广泛兼容，则 MIME 类型应为 CSV，而不是 Excel。

* * *

正确的 mime 类型是`text/csv`. Excel 可能是与此类型关联的应用程序，因此您将获得所需的行为。

[我应该为 CSV 使用什么 MIME 类型？](https://stackoverflow.com/q/7076042/378151)

* * *

您还`Content-Disposition`可以帮助您解决问题。

`Content-Disposition: attachment; filename="filename.csv"`

[为 CSV 文件设置什么 mimetype 以在电子表格应用程序中打开](https://stackoverflow.com/q/1382604/378151)

* * *

如果您需要备份选项，您可以设置多种 MIME 类型。

```
text/csv, application/csv, application/excel, application/vnd.ms-excel, application/vnd.msexcel 
```

[Filepicker 不接受 Windows 上的 mimetype 'text/csv'](https://stackoverflow.com/q/17518440/378151)

* * *

[RFC 4180](https://www.rfc-editor.org/rfc/rfc4180)说您可以回复`text/csv; header=present`或`header=absent`指示文件是否包含列标题。

[text/csv mimetype 的可选标头参数的正确语法？](https://stackoverflow.com/q/15457752/378151)

# haskell - 使用 yesod 构建 heroku 应用程序时出现错误“未知包：ghc”

> ID：15069352
> 
> 赞同：3
> 
> 时间：2013-02-25T14:32:17.060
> 
> 标签：haskell, heroku, yesod

我正在尝试使用新版本的 yesod (1.1.9) 构建 heroku 应用程序，不幸的是它由于`ghc-paths`依赖关系而失败（yesod 版本 1.1.2 可以工作，因为它没有这种依赖关系）。我尝试了各种依赖项和所有可能的`ghc-paths`版本，但最后我总是收到这个尴尬的错误消息，即 ghc 是一个未知包。本地构建在相同的依赖项下工作得很好。

```
main-is:           main.hs
hs-source-dirs:    app
build-depends:   base          == 4.5.*
                 , http-types
                 , shakespeare == 1.0.2
                 , template-haskell 
                 , wai           
                 , wai-extra     
                 , warp          
                 , yesod         == 1.1.9 
```

.

```
[176] rejecting: ghc-paths-0.1.0.9 (unknown package: ghc)
[__6] fail (backjumping, conflict set: TestHeroku, ghc, yesod)
[__5] rejecting: yesod-1.1.8.2, ... , 0.0.0.2, 0.0.0.1, 0.0.0 (conflict: TestHeroku => yesod==1.1.9)
[__0] fail (backjumping, conflict set: TestHeroku, ghc, yesod) 
```

[由于这里](https://stackoverflow.com/questions/15044336/shakespeare-js-fails-to-compile-on-heroku/)提到的错误，需要莎士比亚，我使用[heroku-buildpack-haskell](https://github.com/pufuwozu/heroku-buildpack-haskell)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:40:08.713

如果有人遇到同样的问题，我会自己动手，并根据已经流通的版本创建一个新的 buildpack。它与 yesod-1.1.9 一起运行。

[https://github.com/ichistmeinname/heroku-buildpack-haskell](https://github.com/ichistmeinname/heroku-buildpack-haskell)

# c# - Azure 表 - 通用错误消息

> ID：15069354
> 
> 赞同：0
> 
> 时间：2013-02-25T14:32:21.070
> 
> 标签：c#, azure-table-storage

我收到以下错误消息：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<error xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
  <code>InvalidInput</code>
  <message xml:lang="sv-SE">One of the request inputs is not valid.</message>
</error> 
```

堆栈跟踪：

```
at System.Data.Services.Client.DataServiceContext.SaveResult.HandleBatchResponse()
at System.Data.Services.Client.DataServiceContext.SaveResult.EndRequest()
at System.Data.Services.Client.DataServiceContext.SaveChanges(SaveChangesOptions options)
at MvcWebRole1.Controllers.HomeController.Index() in c:\Users\jgauffin\Documents\Visual Studio 2012\Projects\Azure.OneTrueError\MvcWebRole1\Controllers\HomeController.cs:line 20 
```

这并没有真正说明什么。如何获得更详细的错误？

我正在使用最新的存储 nuget 包并尝试在本地调试（使用模拟器）。

# twitter-bootstrap - twitter Bootstrap 折叠菜单不起作用

> ID：15069355
> 
> 赞同：3
> 
> 时间：2013-02-25T14:32:22.843
> 
> 标签：twitter-bootstrap

我正在使用[此处](http://twitter.github.com/bootstrap/examples/starter-template.html)为 Bootstrap 找到的入门模板。css 渲染得很好，但是当页面最小化时，可折叠菜单不起作用。IE，当我单击折叠按钮时，没有任何反应。

这是我到目前为止的代码：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Bootstrap, from Twitter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="css/bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../assets/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="../assets/ico/favicon.png">
  </head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="#">Project name</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

      <h1>Bootstrap starter template</h1>
      <p>Use this document as a way to quick start any new project.<br> All you get is this message and a barebones HTML document.</p>

    </div> <!-- /container -->
<script src="js/bootstrap.js"></script>
<script src="js/bootstrap.min.js"></script>
</body>
</html> 
```

我修改了原始的 css 引用和 js 尊敬，因为引导程序中的文件结构与模板不同。尽管路径无效，但我暂时只保留了图标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T14:39:56.103

在引导 javascripts 文件之前的页脚中包含 jquery，如下所示：

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
   <script src="js/bootstrap.min.js"></script> 
```

此外，您不必同时使用 min 和 main js 文件。如果您想使用缩小版本，请删除 bootstrap.js；如果您想使用主要版本，请删除 bootstrap.min.js。

我会建议你使用 bootstrap.min.js

# php - 带有模板的杂货 Codeigniter 加载视图

> ID：15069360
> 
> 赞同：0
> 
> 时间：2013-02-25T14:32:51.893
> 
> 标签：php, codeigniter, grocery-crud

我最近从他们的网站下载了杂货店，我在使用模板加载视图时遇到了一个小问题。在控制器中，加载视图的功能看起来像这样

```
function _example_output($output = null)
{
    $this->load->view('groceryView.php',$output);
}

function index()
{
    $this->_example_output((object)array('output' => '' , 'js_files' => array() ,'css_files' => array()));
} 
```

我想尝试实现的是这个

```
$data['main_content'] = 'groceryView';
$this->load->view('dashboardTemplate/template',$data); 
```

我不知道我是否这样做我怎么能传递输出......因为如果我这样做它会给我一个错误

```
$data['output'] = 'output'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:52:32.280

那么你可以加载多个视图。您需要修改 _example_output。如果你有单独的页眉和页脚，你可以像这样加载它。

```
function _example_output($output = null)
{
    $this->load->view('header.php');
    $this->load->view('groceryView.php',$output);
    $this->load->view('footer.php');
} 
```

# node.js - Node.JS 和 ExpressJS / 区分主机名和 IP 地址

> ID：15069362
> 
> 赞同：0
> 
> 时间：2013-02-25T14:33:00.450
> 
> 标签：node.js, express

我以两种方式登录到快速会话

1.  `http://myhostname.com/login`
2.  `http://123.123.43.12/login`

的IP地址`myhostname.com`是`123.123.43.12`。

要检查是否有人已经在登录，我基本上是为这个例子做的

> if (user === req.session.username && pwd === req.session.password)

然后我从一个页面进行相同的 AJAX 查询

1.  在`http://myhostname.com/main.html`，AJAX 查询`http://123.123.43.12/ajax`=> 错误未记录
2.  在`http://123.123.43.12/main.html`，AJAX 查询到`http://123.123.43.12/ajax`=> 成功

我如何告诉 expressJS（会话）或节点它们`myhostname.com`是`123.123.43.12`相同的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:30:38.190

你应该检查[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。判断两个 url 是否同源的规则是严格相同的协议、主机和端口。myhostname.com 和 123.123.43.12 不是同一来源。

AJAX 遵循相同的来源策略，因此它不能查询除其来源之外的任何其他页面。这就是为什么如果你从 main 访问`123.123.43.12`，你可以访问它的 ajax，但不能从`myhostname.com`. 如果你使用`myhostname.com`坚持它，或者如果你使用`123.123.43.12`然后坚持那个。不要互换使用两者。

# android - 将对象保存到内部存储上的文件 (Android)

> ID：15069368
> 
> 赞同：1
> 
> 时间：2013-02-25T14:33:24.960
> 
> 标签：android, serialization

我试过这个：

```
public class People implements Serializable  {

String name;

public People(String name)
{
    this.name = name;
}

public String getName()
{
    return name;
}

public void saveAsObject(People p) throws FileNotFoundException, IOException
{
    try 
    {
        ObjectOutputStream os = new ObjectOutputStream(new FileOutputStream(new File("test","test.dat") ));
        os.writeObject(p);
        os.close();
        System.out.println("Sucess");
    }

    catch(IOException e)
    {
        System.out.println(e);
    }

}

} 
```

我手动创建了该文件夹。它抛出这个错误：“java.io.FileNotFoundException：/test/test.txt：打开失败：ENOENT”（没有这样的文件或目录）

当我尝试

```
 new FileOutputStream("text.dat") 
```

它抛出 java.io.FileNotFoundException: EROFS (只读文件系统)

这是我的主要课程：

```
 public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
            People p = new People("Ray");
    try {
        p.saveAsObject(p);
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:39:10.190

这`new File("test","test.dat")`不是在 Android 上获取文件路径的有效方法。

尝试这个：

```
new File(Environment.getExternalStorageDirectory(), "/data.dat"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:59:28.347

您的应用程序的默认当前工作目录是“/”，您将无权写入。

# c# - Lists.AddAttachment 引发对象引用错误

> ID：15069372
> 
> 赞同：4
> 
> 时间：2013-02-25T14:33:29.690
> 
> 标签：c#, sharepoint, sharepoint-2010, attachment, caml

我正在尝试将附件添加到我刚刚使用 CAML 在共享点服务器上创建的列表项。下面的代码被简化了（例如，路径通常是一个变量，第二个字段（项目 id，这里是 16847）通常是我从 CAML 中的插入语句返回的 id）。

这是我的代码：

```
String desktopPath = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
String savePath = desktopPath + @"\" + "tutorials.txt";
byte[] data = GetData(savePath);
lists.AddAttachment("Tasks", "16847", "tutorials.txt", data); 
```

我收到此错误：

*无法根据您的更改更新安全性。在 ItemUpdating 期间发生以下异常：对象引用未设置为对象的实例。有关详细信息，请参阅事件查看器。0x81020089*

getdata 是一种将我桌面上的文件转换为字节 [] 的方法。数据不为空，看起来还可以。

除此之外，Tasks 是所需的列表，16847 是添加附件的任务 ID。

我能找到的大部分信息都是关于一个不同的错误：索引超出范围异常（如在 msdn 页面上：http: [//msdn.microsoft.com/en-us/library/lists.lists.addattachment (v= office.12).aspx](http://msdn.microsoft.com/en-us/library/lists.lists.addattachment(v=office.12).aspx) )。

我还尝试了 http put（显然是未经授权的访问）和复制服务（如果我们找不到上述更简单方法的解决方案，我可以发布此代码）。

谁能告诉我出了什么问题？

编辑1：

```
private dcp.Lists lists = new dcp.Lists(); 
lists.Credentials = System.Net.CredentialCache.DefaultCredentials; 
lists.Url = Values.SERVERADDRESS + "/_vti_bin/lists.asmx"; 
```

这将初始化与我们的 Web 服务的连接。它非常适合更新、插入...

获取数据代码：

```
private byte[] GetData(String savePath)
    {
        byte[] contents;
        using (FileStream fStream = File.OpenRead(savePath))
        {
            contents = new byte[fStream.Length];
            sFileName = fStream.Name;
            fStream.Read(contents, 0, Convert.ToInt32(fStream.Length));
        }
        return contents;
    } 
```

编辑2：

请注意，以下内容确实有效（我从任务中获得了现有附件的正确列表）：

```
XmlNode ndAttach = lists.GetAttachmentCollection("Tasks", "16847");

MessageBox.Show(ndAttach.OuterXml); 
```

并且以下没有（与 AddAttachment 方法相同的错误）：

```
lists.DeleteAttachment("Tasks", "16847", ndAttach.ChildNodes[0].InnerText); 
```

Whereas I'm quite certain this should work since it does exactly the same as the example code on msdn: [http://msdn.microsoft.com/en-us/library/lists.lists.deleteattachment(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/lists.lists.deleteattachment(v=office.12).aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T07:12:42.807

The code above is fine, the error occured on our server. When adding an attachment, no contenttype is given in the xml. This was programmed to throw an error because we've always used this method to update and add new items. So we removed the contenttype out of the underlying code and it works like a charm.

# android - 套接字关闭 - 从 API 下载

> ID：15069373
> 
> 赞同：0
> 
> 时间：2013-02-25T14:33:33.460
> 
> 标签：android, android-asynctask

我正在做的是每 X 秒下载一个带有 AsyncTask 的文件列表：

首先获取视频和图像列表，然后我下载它们中的每一个。一切都很完美。

```
package com.example.tvrplayer;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.content.Context;
import android.os.AsyncTask;
import android.util.Log;

public class updateFiles extends AsyncTask<Object, Integer, Long> {

     public PlayerActivity activity;

     public updateFiles(PlayerActivity a) { activity = a;}

    @Override
    protected Long doInBackground(Object... params) {
        Context context = (Context) params[0];
        String username = (String) params[1];
        String linkid = (String) params[2];
        String apiurl = (String) params[3];

        JSONArray programs = Json.getJson(apiurl + "/rest/program/device/"+ linkid +"/"+ username +"/"+ activity.deviceid, "GET");
        File mediadir = context.getDir("tvr", Context.MODE_PRIVATE);
            try {
                LINE 44- for (int j=0; j < programs.length(); j++) { 

                    JSONObject json_data = programs.getJSONObject(j);
                    String name = json_data.getString("Name").toLowerCase();
                    name = name.replace("-", "_");
                    if (name.contains("mp4") || name.contains("m4v") || name.contains("png") || name.contains("jpg") || name.contains("jpeg")) {
                        String _name = name.replace("/", "");
                        File file = new File(mediadir, _name);
                        Log.i("FILE SIZE", ""+file.length());
                        if ( file.length() > 0 ) {
                            Log.i("FILE EXISTS", _name);
                        } else {
                            Log.i("START DOWNLOAD", _name);
                            new Download().execute(context, _name, apiurl + "/rest/transfer/"+ linkid +"/"+ username +"/" + json_data.getString("ID"));
                        }
                        Log.i("FILES found", ""+mediadir.listFiles().length);
                    }
                }
        } catch (JSONException e) {
            Log.e("JSON Exception", e.getMessage());
            e.printStackTrace();
        }
//      activity.filelist = mediadir.listFiles();
        return null;
    }

    @Override
    protected void onPostExecute(Long result) {}

} 
```

过了一会儿我得到这个错误：

```
02-25 16:19:19.578: E/JSON - 2 -(17470): java.net.SocketException: Socket closed - http://192.168.2.136:8080/rest/program/device/123someasdidFoo123123/email@foo.com/000

02-25 16:19:16.648: W/dalvikvm(17284): threadid=11: thread exiting with uncaught exception (group=0x40bf11f8)
02-25 16:19:16.664: E/AndroidRuntime(17284): FATAL EXCEPTION: AsyncTask #1
02-25 16:19:16.664: E/AndroidRuntime(17284): java.lang.RuntimeException: An error occured while executing doInBackground()
02-25 16:19:16.664: E/AndroidRuntime(17284):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
02-25 16:19:16.664: E/AndroidRuntime(17284):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
02-25 16:19:16.664: E/AndroidRuntime(17284):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
02-25 16:19:16.664: E/AndroidRuntime(17284):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
02-25 16:19:16.664: E/AndroidRuntime(17284):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
02-25 16:19:16.664: E/AndroidRuntime(17284):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
02-25 16:19:16.664: E/AndroidRuntime(17284):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
02-25 16:19:16.664: E/AndroidRuntime(17284):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
02-25 16:19:16.664: E/AndroidRuntime(17284):    at java.lang.Thread.run(Thread.java:856)
02-25 16:19:16.664: E/AndroidRuntime(17284): Caused by: java.lang.NullPointerException
02-25 16:19:16.664: E/AndroidRuntime(17284):    at com.example.tvrplayer.updateFiles.doInBackground(updateFiles.java:44)
02-25 16:19:16.664: E/AndroidRuntime(17284):    at com.example.tvrplayer.updateFiles.doInBackground(updateFiles.java:1)
02-25 16:19:16.664: E/AndroidRuntime(17284):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
02-25 16:19:16.664: E/AndroidRuntime(17284):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
02-25 16:19:16.664: E/AndroidRuntime(17284):    ... 5 more 
```

这是从 API 获取内容的 JSON 文件

```
package com.example.tvrplayer;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.AsyncTask;
import android.os.Handler;
import android.os.Message;
import android.util.Log;

public class Json {

    static JSONArray getJson(String url, String method) {
        // Log.i("JSON",url);

        InputStream is = null;
        String result = "";
        JSONArray jsonObject = null;

        // HTTP
        try {
            HttpClient httpclient = new DefaultHttpClient(); // for port 80 requests!
            if ( method == "GET") {
                HttpGet httpget = new HttpGet(url);
                HttpResponse response = httpclient.execute(httpget);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
                if (entity != null) {
                    httpget.abort();
                }
            } else if (method == "POST") {
                HttpPost httppost = new HttpPost(url);
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
            }

        } catch(Exception e) {
            Log.e("JSON - 1 -", e.toString());
            return null;
        }

        // Read response to string
        try {           
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"utf-8"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();    
//          Log.d("JSON result",result);
        } catch(Exception e) {
            Log.e("JSON - 2 -", e.toString() + " - " + url);
            return null;
        }

        // Convert string to object
        try {
            jsonObject = new JSONArray(result);            
        } catch(JSONException e) {
            try {
                jsonObject = new JSONArray("["+result+"]");            
            } catch(JSONException e1) {
                Log.e("JSON - 3 -", e1.toString());
                return null;
            }
        }

        return jsonObject;
    }
} 
```

***所以我想象正在发生的是，当 asynctask 忙于下载另一个下载完成并关闭连接时？***

任何想法它是什么或如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:40:31.727

`Null Pointer Exception`您在方法的第 44 行得到了一个`doBackground()`。请发布完整的代码，以便我们为您提供进一步的帮助。确保在使用任何对象之前完成所有初始化。在任何情况下，检查第 44 行，无论您在那里使用哪个对象，确保它不为 NULL。

# c - 简单的 C 程序在运行时崩溃

> ID：15069385
> 
> 赞同：1
> 
> 时间：2013-02-25T14:34:07.350
> 
> 标签：c

嗨，我的程序在运行时遇到了一些问题，它崩溃了，我不得不强制它关闭，我在确定是什么原因时遇到了一些麻烦，任何帮助将不胜感激

```
#include <stdio.h>

void myprint(char let, int num, int line)
{
int countL=0,countT=0,numb, lin;
char abc;
numb=num;
line=lin;
abc=let;

while(countL<lin)
{
    while(countT<numb)
    {
        printf("%s",abc );
        countT++;
    }
    printf("\n");
    countL++;
 }
}

int main(int argc, char const *argv[])
{
int times = 5, lines = 3;
char letter = 'a';

myprint(letter, times, lines);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:38:34.253

问题是您只有一个字符并试图将其打印为字符串：

```
printf("%s",abc ); 
```

在 C 中，字符串是由空字符终止的字符序列`\0`。所以这`printf`将尝试继续打印字符，直到找到那个空字节。您的程序可能会一直尝试读取内存，直到它找到一个坏段，然后它就会崩溃。

您可能想要做的只是在您的 : 中指定一个字符`printf`：

```
printf("%c",abc ); 
```

* * *

另一个问题是您在赋值中颠倒了变量：

```
line=lin; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:40:29.500

问题1：

变量“lin”未正确初始化，

线=林；

所以变量“line”和“lin”包含垃圾值。

问题2：

改变

printf("%s",abc );

至

printf("%c",abc );

因为 abc 是一个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T14:35:58.673

`lin`没有初始化值。

我认为读取的行`line=lin;`应该是`lin=line`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T14:35:59.893

尝试反转此初始化：

```
line=lin; 
```

至

```
lin=line; 
```

否则，`lin`未定义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T14:36:12.023

```
printf("%s",abc ); 
```

打印一个字符串，abc 是一个字符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T14:36:44.897

您使用`printf`不正确。

`%s`您作为格式传递，它需要`char*`作为参数，而不是`char`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-25T14:55:33.597

您的代码中的错误很简单
“line = lin”是
这里代码的问题，变量 lin 没有初始化，因此保存垃圾值
这个垃圾值被传递给变量行，它搞砸了
我认为正确的代码会be lin=line
我发现的另一个错误是 printf('%s',abc); 类型说明符错误，因为 abc 已被声明为字符且类型说明符必须为 %c
我还发现未使用的命令参数 args 和 argv 只能用于传递从命令提示符运行的参数

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-25T14:35:46.150

在`while(countL<lin)`循环内部，您永远不会重置`countT`变量。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-25T14:36:35.103

尝试更换

```
while(countT<numb)
{
    printf("%s",abc );
    countT++;
} 
```

和

```
while(countT<numb)
{
    printf("%c",abc );
    countT++;
} 
```

# ios - UIDatePicker 更改 AM/PM 指定案例

> ID：15069389
> 
> 赞同：1
> 
> 时间：2013-02-25T14:34:09.870
> 
> 标签：ios, objective-c, uidatepicker

我需要`UIDatePicker`在`UIDatePickerModeTime`.

```
TimePicker= [[UIDatePicker alloc] init];
[TimePicker addTarget:self action:@selector(TimeChanged:) forControlEvents:UIControlEventValueChanged];
TimePicker.datePickerMode = UIDatePickerModeTime;
TimePicker.timeZone = [NSTimeZone systemTimeZone];
[self.view addSubview:imePicker]; 
```

`AM/PM`它可以工作，但它显示带有选项的 DatePicker 。我们可以将 更改`AM/PM`为小写（即`am/pm`）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:36:07.627

我相信做到这一点的唯一方法是使用具有 3 列的 UIPickerView：一小时，一分钟，另一列用于“上午/下午”。正确的形式是大写字母，这就是你别无选择的原因。

# c# - 如何使用 OpenXML 和 C# 从 Excel 文档中的合并单元格中获取值

> ID：15069399
> 
> 赞同：2
> 
> 时间：2013-02-25T14:35:04.443
> 
> 标签：c#, excel, openxml

我有合并单元格的问题。如果我在第一个单元格 (B3) 中有值，并且该单元格与其他一些单元格（例如 C3、D3、E3、F3、F4）合并 - 在 Excel 文档中，我只能看到一个值。这很好，但是当我要求 C3、D3、E3、F3 值时，我想从我的 GetCellValue 函数中获得相同的 B3 值。

我想有必要找到所有合并的单元格列表并从第一个单元格中读取值 - 但是如何使用 OpenXml 做到这一点？

```
 public string GetCellValue(char ch, int y)
    {
        WorksheetPart wsPart = GetWorksheetPart(_sheetName);
        var addressName = new StringValue(ch + "" + y);

        Cell cell = wsPart.Worksheet.Descendants<Cell>().
            Where(c => c.CellReference.Value == addressName).FirstOrDefault();

        if (cell == null)
            return null;

        return cell.InnerText;
    } 
```

更新：

我找到了部分解决方案（在 OpenXML 中查找合并的列名）：

```
 List<MergeCells> mergeCells;
        WorksheetPart wsPart = GetWorksheetPart(_sheetName);
        if (wsPart.Worksheet.Elements<MergeCells>().Count() > 0)
        {
            mergeCells = wsPart.Worksheet.Elements<MergeCells>().ToList();
            string cells = mergeCells[0].OuterXml;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-21T07:25:43.857

```
if (wsPart.Worksheet.Elements<MergeCells>().Count() > 0)
{
     MergeCells mergeCells = wsPart.Worksheet.Elements<MergeCells>().First();
     foreach (MergeCell mergeCell in mergeCells)
     {
         // mergeCell.
     }
} 
```

# jsf - JSF 1.1：不会替换所需 inputText 的占位符 {0}

> ID：15069401
> 
> 赞同：0
> 
> 时间：2013-02-25T14:35:06.740
> 
> 标签：jsf

对于必需的输入文本字段，我有以下 JSF 代码：

```
<h:inputText id="System"                        
         label="System"
         value="#{MyBean.system}"
         maxlength="2"
         required="true"> 
```

然后当用户没有为该字段输入值时，将显示以下消息：“{0}：需要值。” 问题是： JSF 没有像它应该做的那样**用 inputText 的 id 替换占位符 {0} 。**

我的系统中到处都是这种代码，并且以前运行良好。最近我切换到使用 Maven 构建，我可能已经更改了某些库的版本，这现在导致应用程序无法正常工作。我试图确保在我的 POM 中声明的库版本与我之前的版本相匹配，但即使是儿子，这个问题仍然存在。

在我的 POM 中声明的 JSF 相关库如下（另外我使用的是 JBoss 4.0.5 GA）：

```
<dependency>
  <groupId>org.apache.myfaces.core</groupId>
  <artifactId>myfaces-api</artifactId>
  <version>1.1.7</version>
</dependency>

<dependency>
    <groupId>org.apache.myfaces.core</groupId>
    <artifactId>myfaces-impl</artifactId>
    <version>1.1.7</version>
</dependency>

<dependency>
    <groupId>org.apache.myfaces.tomahawk</groupId>
    <artifactId>tomahawk</artifactId>
    <version>1.1.9</version>
</dependency>

<dependency>
    <groupId>com.sun.facelets</groupId>
    <artifactId>jsf-facelets</artifactId>
    <version>1.1.14</version>
</dependency>

<dependency>
    <groupId>org.richfaces.framework</groupId>
    <artifactId>richfaces-api</artifactId>
    <version>3.1.4.GA</version>
</dependency>

<dependency>
    <groupId>org.richfaces.framework</groupId>
    <artifactId>richfaces-impl</artifactId>
    <version>3.1.4.GA</version>
</dependency>

<dependency>
    <groupId>org.richfaces.ui</groupId>
    <artifactId>richfaces-ui</artifactId>
    <version>3.1.4.GA</version>
</dependency> 
```

有什么线索吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:09:12.313

这在 JSF 1.1 中不可用。这是在 JSF 1.2 中引入的。

升级到 JSF 1.2。它在 JSF 1.1 环境中 100% 兼容。额外的好处是在最新的 JSF 1.2 中修复了许多逻辑和性能错误。

# entity-framework - 应用程序配置文件中的连接字符串“MyConnection”不包含必需的 providerName 属性。”

> ID：15069403
> 
> 赞同：86
> 
> 时间：2013-02-25T14:35:13.727
> 
> 标签：entity-framework, ef-code-first, connection-string

我用`Entity Framework Code First`，

我的连接字符串在配置文件中：

```
<connectionStrings>
    <clear/>
    <add name="ApplicationServices" connectionString="Data Source=PC-X;Initial Catalog=MYdb;Integrated Security=True"/>
  </connectionStrings> 
```

当我尝试访问数据（应该创建数据库的东西）时，出现以下错误：

> 应用程序配置文件中的连接字符串“ApplicationServices”不包含必需的 providerName 属性。”

我错过了什么？

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2013-02-25T14:54:55.607

您在`connectionString`属性之后缺少以下代码（假设您使用的是 SQL）：

`providerName="System.Data.SqlClient"`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-03-05T02:28:33.327

在未来的某个时候。完整的代码

```
<add name="YouContext" connectionString="Integrated Security=True;Persist Security Info=False;Initial Catalog=YourDatabaseName;Data Source=YourPCName;" providerName="System.Data.SqlClient"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-24T09:23:24.617

进入你的 web.config 直到你到达`providers`标签。例如，这是我的提供者声明：

```
<providers><provider invariantName="System.Data.SqlClient" ... /></providers> 
```

您应该将此`System.Data.SqlClient`作为提供程序名称添加到您的连接字符串中，因此您的连接字符串应如下所示：

```
 <connectionStrings>
 <add name="ApplicationServices" providerName="System.Data.SqlClient" connectionString="Data Source=PC-X;Initial Catalog=MYdb;Integrated Security=True"/>
  </connectionStrings> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-26T08:25:28.453

就我而言，问题在于不正确的启动项目目标。在 PM 控制台中，目标迁移程序集项目是正确的。

我有一个多项目解决方案，目标是一些网络服务项目。

因此，我将 StartUp 更改为主 WebSite 项目，并且迁移已经完成且没有错误。

# templates - 具有值的剑道 ui 图表模板

> ID：15069404
> 
> 赞同：0
> 
> 时间：2013-02-25T14:35:15.163
> 
> 标签：templates, charts, kendo-ui, kendo-dataviz

我正在创建一个堆叠和分组的条形图，类似于您在演示中的示例……我正在使用 JSON 和 .DataSource 从远程数据填充它……

我正在尝试使用 .Tooltip.Template() 来格式化工具提示，但希望在工具提示中包含堆叠条的每个段的值......（所以工具提示说“卡车，District-1 45”（或 50 或 75 或任何堆叠段的值）...</p>

我用过

.Template("#= series.stack #s, #= series.name #= value #")

和

.Template("#= series.stack #s, #= series.name #= series.column #")

如果我不添加“#= value”或“#= series.column”，它们就可以工作，但是如果我添加它，代码炸弹......

我正在使用 VS2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:08:50.417

我可以看到您的模板无效

```
.Template("#= series.stack #s, #= series.name #= series.column #") 
```

可能您想尝试以下方法：

```
.Template("#= series.stack #s, #= series.name # #= series.column #") 
```

# asp.net - 在服务器端批量打印 PDF 文件

> ID：15069405
> 
> 赞同：4
> 
> 时间：2013-02-25T14:35:16.430
> 
> 标签：asp.net, printing, asp.net-mvc-4, server-side, bulk

我在 MSDN 论坛上问了以下问题。它实际上得到了回答，但经过几个小时的研究，我仍然无法提出解决方案。所以也许你们有一个想法。就这样……：

我有以下规范，我应该使用 ASP.Net MVC 4 开发原型：

在一个 SQL-DB 中最多可以存储 1000 个 PDF 文件。

ASP.Net MVC 4 wep 应用程序的用户应该能够启动服务器端批量打印作业。他还应该选择将作业发送到的网络打印机。

这在 ASP.Net MVC 4 中是否有可能？如果是这样，人们将如何解决这个问题？

提前感谢您提供正确方向的任何帮助、提示或步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:19:34.043

你可能想看看这个：

获取网络打印机：[http ://www.dotnetcurry.com/ShowArticle.aspx?ID=148](http://www.dotnetcurry.com/ShowArticle.aspx?ID=148)

-和这个-

打印到打印机：[从 ASP.NET 打印到网络打印机](https://stackoverflow.com/questions/3729153/printing-from-asp-net-to-a-network-printer)

# xml - xsl 在创建的 xml 树上选择不同的

> ID：15069407
> 
> 赞同：-1
> 
> 时间：2013-02-25T14:35:32.080
> 
> 标签：xml, xslt, xslt-2.0

我有以下 xml 树。

```
<columns>
    <column>
        <name>Version</name>
        <type>string</type>
        <multiquery useconnectionid="1" get="Version">SELECT ...</multiquery>
        <columns>
            <column>
                <name>Success</name>
                <type>number</type>
                <query useconnectionid="2" param="version">SELECT ...</query>
            </column>
            <column>
                <name>Failure</name>
                <type>number</type>
                <query useconnectionid="1" param="version">SELECT ...</query>
            </column>
        </columns>
    </column>
</columns> 
```

以及以下 xslt 模板：

```
<xsl:template match="column" mode="findid">
    <xsl:param name="header" required="yes" />
    <xsl:param name="dbid" required="no" />
    <xsl:variable name="dbids">
        <xsl:if test="$dbid">
            <xsl:value-of select="$dbid" />
        </xsl:if>
        <xsl:for-each select="multiquery">
            <id><xsl:value-of select="@useconnectionid" /></id>
        </xsl:for-each>
        <xsl:for-each select="query">
            <id><xsl:value-of select="@useconnectionid" /></id>
        </xsl:for-each>
    </xsl:variable>

    <xsl:for-each select="distinct-values($dbids/id)">
        <xsl:value-of select="." />
    </xsl:for-each>

    <xsl:choose>
        <xsl:when test="columns/column">
            <xsl:apply-templates select="columns/column" mode="findid">
                <xsl:with-param name="header" select="$header" />
                <xsl:with-param name="dbid" select="$dbids" />
            </xsl:apply-templates>
        </xsl:when>
        <xsl:otherwise>

        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

出于某种原因，我无法让创建的 id 树选择不同的。它总是绘制 121，我只希望它绘制 12。我不想要一个唯一的 id 列表，我将在 else 树中更改调用以写入信息。我已经尝试了一些与 xslt 1 一起使用的方法，但我认为这是一个问题，因为它在原始 xml 文件中不存在，但我构建了一个新树，我尝试对其进行排序。

我可以尝试的任何帮助或提示将不胜感激。我现在用撒克逊解析器解析这个。

// 安德烈亚斯

编辑：我想使用排序的 id 列表从标题创建连接。因此，我为连接 1 创建了一个设置，为连接 2 创建了一个设置。我现在遇到的问题是我创建了 2 次连接 1，因为我无法选择不同的 id:s。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:17:46.270

很抱歉造成混乱。它像我一样工作，但递归使它看起来像 group by 没有工作。

所以问题是递归使它看起来像打印了 3 次一样。

# jquery - 如何在jQuery中滑动图像

> ID：15069408
> 
> 赞同：-4
> 
> 时间：2013-02-25T14:35:32.713
> 
> 标签：jquery

我正在尝试将图像滑入左侧：

```
<html>
<head>
<title>JQuery Slider</title>
<link rel="stylesheet" href="style.css" />
<script type="text/javascript" src="jquery-1.4.1.min.js"></script>
<script type="text/javascript" src="jquery-ui-1.7.2.custom.min.js"></script>
<script>
  $(document).ready(function(){
     $("#one").show("fade",500);
     $("#one").delay(5500).hide("slide",{direction:'left'},500);
  });  
});
</script>
</head>

<body>
<div class="slider">
   <img id="one" src="img/banner01.jpg" alt="first image"/>
   <img id="two" src="img/banner02.jpg" alt="first image"/>
   <img id="three" src="img/banner03.jpg" alt="first image"/>
 </div>
</body>
</html> 
```

它在浏览器控制台上出现错误 Uncaught TypeError: Property '#' of object # is not a function 请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:38:27.180

您的代码中存在语法错误：

```
 $(document).ready(function(){
     $("#one").show("fade",500);
     $("#one").delay(5500).hide("slide",{direction:'left'},500);
  });  
}); // <--- remove this line 
```

编辑：

您正在加载 jQuery UI 1.7.2，我认为此版本不支持 jQuery 1.4.2，请尝试加载更新版本的 jQuery Core 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:39:45.947

jQuery/CSS

```
<script>
        $(function() {      
            $("#slideshow > div:gt(0)").hide(); 
            setInterval(function() { 
              $('#slideshow > div:first')
                .fadeOut(1500)
                .next()
                .fadeIn(1500)
                .end()
                .appendTo('#slideshow');
            },  3000);          
        });
    </script> 
        <style>
            #slideshow {position: absolute; width: 264px; height: 104px; padding: 0px; overflow: hidden;}
            #slideshow > div { position: absolute; overflow: hidden;}   
        </style> 
```

HTML

```
<div class="tile tile-white">
   <div id="slideshow">
   <div>
     <img src="tpl/main/img/pic1.png" />
   </div>
   <div>
     <img src="tpl/main/img/pic2.png" />
   </div>
      <div>
     <img src="tpl/main/img/pic3.png" />
   </div>
   <div>
     <img src="tpl/main/img/pic4.png" />
   </div>
      <div>
     <img src="tpl/main/img/pic5.png" />
   </div>
   <div>
     <img src="tpl/main/img/pic6.png" />
   </div>
   </div>
   </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:37:57.850

您可以使用任何 jquery 插件，如下所示

[nivo 滑块](http://dev7studios.com/nivo-slider/)

# asp.net-mvc - 500 - 内部服务器错误 - 在 asp.net mvc 中集成 Wordpress 后

> ID：15069409
> 
> 赞同：0
> 
> 时间：2013-02-25T14:35:35.423
> 
> 标签：asp.net-mvc, wordpress

我正在研究 asp.net mvc 应用程序。最近我在我的网站中的单独目录中集成了 wordpress

> www.mysite.com/blog

博客工作正常，但我收到**500 - 内部服务器错误。**当我尝试登录时。

> www.mysite.com/blog/wp-login.php

如果我删除了 web.config 文件并尝试登录，那么它可以正常工作。我认为我的 web.config 文件中缺少一些东西或任何其他问题。

有什么建议可以解决这个问题吗？

我要更新我的问题。

当我打开显示 iis 错误选项时。现在显示此错误

```
HTTP Error 500.0 - Internal Server Error

C:\Php5\php-cgi.exe - The FastCGI process exceeded configured request timeout 
```

我不知道为什么会产生这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:09:14.950

我必须更改我的 web.config 设置。现在它工作正常

**以前的设定是这里**

```
 <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer> 
```

**更改设置后**

```
 <system.webServer>
        <validation validateIntegratedModeConfiguration="false" />
        <modules runAllManagedModulesForAllRequests="false" />
        </system.webServer> 
```

# java - 如何从 Matlab 程序中调用 java 代码

> ID：15069414
> 
> 赞同：3
> 
> 时间：2013-02-25T14:35:54.777
> 
> 标签：java, matlab

我想从 Matlab 调用我自己的 Java 程序。

这是我的java程序：

```
public class TestArgu{
    public static void main(String[] args){
        System.out.println("Test passing arguments!");
    }

    public void addNumber(int aNumber){
        ansNumber = aNumber+5;
        chk = aNumber;
        System.out.println("input number = " + chk + ".\n");
        System.out.println("ans = " + ansNumber + ".\n");
    }

    public int ansChk(){
        return ansNumber;
    }

    private int ansNumber;
    private int chk;
} 
```

我从这个链接一步一步做了 [http://www.mathworks.nl/support/solutions/en/data/1-URS0E/?...1...](http://www.mathworks.nl/support/solutions/en/data/1-URS0E/?...1...)

但它不适用于我的程序。我正在从服务器计算机运行 Matlab 程序。所以我无法编辑`classpath.txt`.

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:14:06.300

首先，从你的类中删除 main 函数。然后添加行

```
package mypackage.release; 
```

在你的类定义之前。然后使用命令编译

```
javac -verbose -cp /home/javaclasses -d /home/javaclasses /home/javasource/TestArgu.java 
```

在 matlab 类型中

```
javaaddpath('/home/javaclasses');
clear java;
import mypackage.release.*;
test=TestArgu;
test.addNumber(6);
test.ansChk(); 
```

请记住，每次进行更改并编译 java 类时，必须`clear java`在更改可用之前调用 matlab。这也有清除工作区中所有变量的不幸副作用，因此请确保在调用它之前没有任何重要的东西要保存。

# jquery - jstree 不使用 ASP.NET MVC 4 刷新

> ID：15069421
> 
> 赞同：6
> 
> 时间：2013-02-25T14:36:16.913
> 
> 标签：jquery, asp.net-mvc-4, jstree

我目前无法刷新整个 jstree；初始树加载工作正常，刷新子节点也可以按预期工作，但如果根节点中的数据发生变化，即使数据发生变化并且对服务器进行了调用，树也不会刷新。

我将尝试解释 jstree 的设置。

**全局变量**

```
var levelType; 
```

**树设置**

```
 $("#explorer").jstree({
        plugins: ["core", "ui", "themes", "json_data", "types"],
        themes: {
            theme: "default",
            dots: false,
            url: url = '@Url.Content("~/Content/jstree/default/style.css")'
        },
             json_data: {
                 ajax: {
                     cache: false,
                     url: function (node) {
                         var nodeId = "";
                         var url = "";
                         if (node == -1) {
                             url = '@Url.Action("GetSites", "Site")';
                    } else if ($(node).attr("rel") == "station") {
                        url = '@Url.Action("GetInspections", "Inspection")' + '/' + $(node).attr("id");
                    }
                    return url;
                },
                success: function (metaData, textStatus, jqXhr) {

                    if (levelType == null || levelType == undefined || levelType == "root") {
                        //The initial node that is hard coded and will never change
                        var sitesData = [{ attr: { rel: "root" }, state: "open", data: "Root Node", children: [] }];

                        $(metaData).each(function () {
                            sitesData[0].children.push({ attr: { id: this.Id, rel: "station" }, state: "closed", data: this.Name });
                        });
                        return sitesData;
                    }

                    if (levelType == "station" || levelType == "inspection") {
                        var items = [];
                        $(metaData).each(function () {
                            items.push({ attr: { id: this.Id, rel: "inspection",    "class": "jstree-leaf" }, state: "closed", data: this.Name });
                        });

                        return items;
                    }

                    return null;
                }
            }
        },
             types: {
                 types: {
                     "station": {
                         "icon": {
                             "image": '@Url.Content("URL")'
                    }
                },
                "inspection": {
                    "icon": {
                        "image": '@Url.Content("URL")'
                }
            },
                'loading': {
                    'icon': {
                        'image': '@Url.Content("URL")'
                }
            },
                'root': {
                    'icon': {
                        'image': '@Url.Content("URL")'
                }
            }
            }
        }
 }); 
```

**树节点打开事件**

```
$("#explorer").bind("before.jstree", function (e, data) {
    if (data.func === "open_node") {
        levelType = $(data.args[0]).attr("rel");
    }
}); 
```

**此调用按预期工作并刷新站级别下的子节点**

```
 var tree = jQuery.jstree._reference("#explorer");
   var currentNode = tree._get_node("#the node Id");
   var parent = tree._get_parent(currentNode);

   // this returns "inspection"
   levelType = $(currentNode).attr("rel");

   //the parent node is the station node
   tree.refresh(parent); 
```

**此调用不起作用，但应刷新整个树**

```
 var tree = jQuery.jstree._reference("#explorer");
  var currentNode = tree._get_node("#the node id");
 //set the level the tree should be refreshing its data for (this is to ensure that the tree view knows it is not at a root node).
  var parent = tree._get_parent(currentNode);
 //this returns "root"
  levelType = $(parent).attr("rel");
  tree.refresh(-1); 
```

我希望有人可以帮助我，因为它让我发疯。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:04:05.043

您可以将树放在局部视图中，在父局部视图上创建一个 div 并在该 div 内呈现树局部视图。

然后，当您调用刷新树时，您可以改为执行 Json 获取 renderAction 并用内容树部分替换父部分的内容。这样做将是完全异步的，您可以应用自定义动画。

```
<div id="parent">
@Html.RenderPartial("tree")
</div>

<script>
$(function)({ 
// this could be any event
$('some id').click(function(){
//this could also be a post, we call the controller action and it returns the
//partialview
$.get("GetTree", function(data){
$('#parent').html(data);
});
});
</script> 
```

# xml - XML Schema 定义自定义命名节点到特定级别

> ID：15069432
> 
> 赞同：0
> 
> 时间：2013-02-25T14:36:49.220
> 
> 标签：xml, xsd

我有一个 XML 文件，它由一个定义名为“IDTree”的根节点组成。这个节点应该包含三个级别的**未定义**名称的后代，因为我需要在应用程序中使用 XPath 来漂亮地处理这个 XML 文件中的特定值。

例子：

```
<IDTree>
  <Foofoo id="0x00">
    <Foobar id="0x00">
      <Boofar id="0x00" />
      <Fasfoo id="0x01" />
      <Farfoo id="0x02" />
    </Foobar>
    <Foobas id="0x01">
      <Bas id="0x00" />
      <Bar id="0x01" />
      <Foo id="0x02" />
    </Foobas>
  </Foofoo>
</IDTree> 
```

我需要通过使用“/IDTree/Foofoo/Foobas/Bar”之类的 XPath 来处理这些节点，将它们转换为三个值，例如 0x00 0x01 0x01。

存储在此 XML 文件中的数据在某种程度上是“动态的”。也就是说，它可能会通过在这三个级别中添加、移动、删除具有未指定名称的节点来扩展、编辑或以其他方式更改。

然而，在第三层以下的节点应具有定义的名称。根节点以下第三层的每个节点都应有零个或一个名为“Description”的子节点，而子节点又应具有名为“ShortDesc”和“Field”的子节点。另一方面，“字段”应具有零到多个名为“值”的字段。

根节点的所有子节点都应具有定义名称的属性。根节点以下 1 - 3 层的所有节点，名称未指定，必须具有“id”属性。第 3 级以下的具有已定义名称的节点都应根据其类型具有已定义的属性。

问题是，如何在 XML 方案中指定所有这些要求和选项？

# assembly - 同一个汇编语言程序中的乘法、除法、减法和加法

> ID：15069436
> 
> 赞同：0
> 
> 时间：2013-02-25T14:37:00.720
> 
> 标签：assembly, x86, nasm

有谁知道如何在一个程序中为 8 位/16 位操作数执行所有四种数学运算（乘法、除法、减法和加法）。我最多可以使用 AL、BL、CL、DL 寄存器执行三个程序，但我无法理解之后应该在哪里存储这些值，因为 DIV、MUL 操作都需要 AL。

如果有人至少能想出一个简单的程序或逻辑，我们将不胜感激。

代码：

```
;================== Header ==================
; File:         all.asm
; Author:       Anurag Shukla
; Date:         25/02/2013
;================== Directives ==================

[BITS 16H]
[ORG 100H]

;================== Code Segment ==================
[SECTION .text]

mov al,0
mov bl,0
mov cl,0
mov dl,0
mov si,0
mov di,0
;================== Addition 
mov bp, 10H
add bp, [NUMADD]
daa

mov di, 20H
sub di, [NUMSUB]
das

mov al, 10H
mov bl, 10H
mul bl
mov [RMUL],al
mov dl,[RMUL]

mov al, 10H
mov bl, 2H
div bl

int3

[SECTION .DATA]

NUMADD: DB 10H
NUMSUB: DB 10H
RSUB: DB 0H
RSUM: DB 0H
RMUL: DB 0H
RDIV: DB 0H 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:26:42.020

您可以将中间结果保存在堆栈或某种缓冲区中。

如果您不想只使用寄存器，您仍然可以使用*ECX*、*ESI*、*EDI*和*EBP*（以及特殊情况下的*ESP*），同时最终使用*EAX*、*EDX*和*EBX*作为所需操作的输入和输出。

例如，如果您想在按顺序执行所有四个操作后获得所有操作的结果，您可以将*EAX + EBX*存储在*ECX*中，*EAX - EBX*存储在*EBP*中，*EAX x EBX*存储在*ESI:EDI*中，并简单地将*EAX / EBX*保留在*EDX 中： EAX*。

无论如何，内存是为了存储数据而存在的，所以我建议坚持使用它。

# c# - 带有子 where 子句的 LINQ 查询

> ID：15069438
> 
> 赞同：0
> 
> 时间：2013-02-25T14:37:06.257
> 
> 标签：c#, linq

我有一个 SQL 查询：

```
 SELECT [Paypoint]
      ,[Department]
      ,[EmployeeCode]
      ,[Gender]
      ,[EmployeeTitle]
      ,[Initials]
      ,[Surname]
      ,[ItemsIssuedDate]
      ,[ItemsIssuedStockNumber]
  FROM [MyTable] AS a
  WHERE
 (
      [ItemsIssuedDate] =   (   SELECT     max([ItemsIssuedDate])
                                FROM        [MyTable] AS b
                                WHERE       a.[Paypoint] = b.[Paypoint]
                                            AND a.[Department] = b.[Department]
                                            AND a.[EmployeeCode] = b.[EmployeeCode]
                                            AND a.[Gender] = b.[Gender]
                                            AND a.[Surname] = b.[Surname]
                             ) 
```

如何获得比较 LINQ 查询？我不能使用 SQL 查询，因为数据已经在数据集中，现在需要进一步修改......

我尝试过，但这不起作用：

```
 var query = from a in excelTable
                    where
                    (
                        from c in excelTable
                        group c by new
                        {
                            c.Paypoint,
                            c.EmployeeCode
                        } into g
                        where string.Compare(a.Paypoint, g.Key.Paypoint) == 0 && string.Compare(a.EmployeeCode, g.Key.Paypoint) == 0
                        select g.Key.Paypoint
                    )
                    select a; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:41:48.133

```
var query = from a in MyTable
            group a by new { 
              a.Paypoint,
              a.Department,
              a.EmployeeCode,
              a.Gender, 
              a.Surname
            } into g
            select g.OrderByDescending(x => x.ItemsIssuedDate)
                  //.Select(x => new { required properties })
                    .First(); 
```

您还可以选择仅包含必填字段的匿名对象。由你决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:05:38.757

您最直接的 SQL 查询将是：

```
var query = 
    from a in excelTable
    let maxIssueDate = 
        (from b in excelTable
         where a.Paypoint == b.Paypoint &&
             a.Department == b.Department &&
             a.EmployeeCode == b.EmployeeCode &&
             a.Gender == b.Gender &&
             a.Surname == b.Surname
         select b.ItemsIssueDate).Max()
    where a.ItemsIssueDate == maxIssueDate
    select a; 
```

# vbscript - 通过 VBS 访问 MDB

> ID：15069440
> 
> 赞同：2
> 
> 时间：2013-02-25T14:37:08.260
> 
> 标签：vbscript, dao, jet

我正在尝试使用 VBS 脚本更新 MDB。在一台机器上它工作正常（WinXP 和 Office 2003），但在另一台机器上（Win7 64 位 VM 和 Office 2010）我收到错误“ **ActiveX 组件无法创建对象：'DAO.DBEngine.36'** ”。编码：

```
Dim dbe
Set dbe = CreateObject("DAO.DBEngine.36") 
```

我试过了，`DAO.DBEngine`没有区别。 我不明白问题出在哪里。有什么线索吗？`DAO.DBEngine.120``.140`

* * *

更新：我发现我可以通过调用这样的脚本来使其工作：

```
c:\windows\syswow64\wscript MyScript.vbs Myargument 
```

显然要调用 32 位 Wscript，您必须从 syswow64 调用它，而 system32 中的 Wscript 是 64 位版本。有点奇怪……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T17:04:01.213

在 64 位操作系统中，.vbs 以 64 位进程启动，因此您需要（在开始时）将脚本重新启动为 32 位进程。

```
'call it here
Force32bit

Dim dbe
Set dbe = CreateObject("DAO.DBEngine.36")

'just for testing:
WScript.Echo TypeName(dbe) 'DBEngine

'the rest of the code here...
Set dbe = Nothing

Sub Force32bit()
    Dim sWinDir, sSys64, sSys32, oShell
    Set oShell = CreateObject("WScript.Shell")
    sWinDir = oShell.ExpandEnvironmentStrings("%WinDir%")
    With CreateObject("Scripting.FileSystemObject")
        sSys64 = .BuildPath(sWinDir, "SysWOW64")
        If Not .FolderExists(sSys64) Then Exit Sub
        sSys32 = .BuildPath(sWinDir, "System32")
        If sSys32 = WScript.Path Then
            oShell.CurrentDirectory = sSys64
            oShell.Run "wscript.exe " & Chr(34) & _
            WScript.ScriptFullName & Chr(34), 1, False
            WScript.Quit
        End If
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:27:13.337

您可能需要使用 32 位版本的脚本解释器运行脚本：

```
%SystemRoot%\SysWOW64\wscript.exe C:\path\to\script.vbs 
```

取自[this answer](https://stackoverflow.com/a/2429502/1630171) to a similar question。

# wpf - 手动调用 WPF Setter

> ID：15069442
> 
> 赞同：0
> 
> 时间：2013-02-25T14:37:08.770
> 
> 标签：wpf, xaml, setter

我想调用在后面的代码中传递的 Setter（特定于 WPF）。

```
void Invoke(Setter setter)
{
   //I am interested what to do here, ?
} 
```

设置器将类似于

```
<Setter TargetName="SomeUiElement" Property="SomeProperty" Value="{Binding SomeValue}" />

//resolution similar to
void Call(Setter setter)
{
   setter.Property.SetValue(setter.TargetObject, setter.Value.GetValue())
} 
```

提前致谢。请具体。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T16:03:38.687

二传手并不像他们看起来的那样。当 WPF 激活它们时，它们不会严格设置属性的值（尽管有名称）。相反，它们贡献了一个可能的价值，这可能会或可能不会对财产的有效价值产生影响。（这取决于更高优先级的属性值源当前是否处于活动状态。http: [//msdn.microsoft.com/en-us/library/ms743230.aspx](http://msdn.microsoft.com/en-us/library/ms743230.aspx)记录了属性值可以来自 11 个不同的位置。）当设置器停用时，他们不再提供这种价值。

我提到这一点的原因是为了解释为什么从来没有真正“调用”过 setter。调用是即时的——它是在特定时刻发生的事情。另一方面，Setter 会在一段时间内处于活动状态。（所以有两个有趣的时刻：它们变得活跃的点，以及它们停止活跃的点。）

因此，如果您询问如何调用 setter，您可能没有合适的工具来完成您尝试做的任何工作。可能发生的最接近的情况是 setter 变得活跃，并且无论您希望它多长时间都保持活跃。

此外，setter 的激活并不能保证它的 target 属性会真正改变，因为可能还有其他更高优先级的值源。此外，为了清楚激活应该意味着什么，您需要知道 setter 的使用方式 - 默认样式中的 setter 的优先级低于应用程序定义的样式中的优先级，而后者反过来具有低于模板中触发器激活的设置器的优先级...

因此，孤立的 setter 是没有意义的，因为它的行为（即当它变得活跃时会做什么）是由 setter 出现的上下文定义的。

现在从您的代码来看，您真正想要做的似乎是将设置器目标的本地值设置为属性将获取的任何值，如果 a）设置器变为活动状态并且 b）设置器是最高优先级该属性可用的值。但这并不是一个二传手实际上知道该怎么做的事情。

是的，这很讽刺，但设置者实际上并不知道如何设置属性。

导致 setter 的值成为目标属性值的代码实际上分布在 WPF 的各个部分（包括`Trigger`和`Style`类等）。没有一种直接的方法可以让 WPF 做你想做的事，因为它没有一种孤立的方法 - WPF 自己的 setter 处理与属性系统的许多其他方面混合在一起。我强烈建议您尝试寻找其他方法来解决您希望以这种方式解决的任何问题。

# iphone - TableViewCell 中的多个列

> ID：15069445
> 
> 赞同：0
> 
> 时间：2013-02-25T14:37:20.050
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我正在创建一个 iOS 应用程序，并将创建其中包含 3 列的表格视图单元格。例如包含用户信息的 Instagram 个人资料页面。这可以在xcode中实现吗？我正在使用故事板。

![在此处输入图像描述](../Images/97ad2cb8e462ea3fba593424984a3536.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:39:27.320

是的，这在 XCode 中很有可能。您必须创建一个自定义`UITableViewCell`来创建它。在您的自定义`UITableViewCell`中，您必须根据需要创建不同的组件。![在此处输入图像描述](../Images/412489560affebcfa41a1032b9b9c50a.png)

我相信上图中的黄色框是您想要实现的。为了这 ：

1.  您必须使用 3 创建一个自定义单元格`UIImageView`

**编辑 ：**

![在此处输入图像描述](../Images/9e4ad1ef1a3770fb76fe79a1bd6888be.png)

1.  您`UITableViewCell`必须创建一个`UIImageView`以显示个人资料图片。
2.  二`UILabel`一为统计。而且，一个用于文本。
3.  一个`UIButton`用于跟随。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T05:38:57.433

UICollectionView 代替 UITableView 怎么样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:26:59.690

创建一个自定义单元格。

您可以在界面构建器或子类 UITableViewCell 中创建单元格并覆盖其 initWithStyle 和 layoutSubviews 类。您可以像往常一样在 cellForRowAtIndexPath 中访问它们的属性。你甚至可以在 cellForRowAtIndexPath 中进行布局，但我不建议仅仅因为它的风格不好。对于用户来说不会有任何区别。

# android - BroadcastReceiver 与 AlarmManager 的实时循环？

> ID：15069448
> 
> 赞同：0
> 
> 时间：2013-02-25T14:37:27.653
> 
> 标签：android

```
public class MyReceiver extends BroadcastReceiver

    private Intent intentOnAlaramReceiver;
    private AlarmManager alarmManager;
    private PendingIntent pendingIntent; 
```

在文档中说：

> BroadcastReceiver 对象仅在调用 onReceive(Context, Intent) 期间有效。一旦您的代码从此函数返回，系统就会认为该对象已完成且不再处于活动状态。

但我正在使用`AlarmManager`. 如果我的班级在我`onReceive`如何使用之后被摧毁

```
alarmManager.cancel(pendingIntent); 
```

接收器不被破坏的最佳实践是什么。应用程序必须存在超过一天...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:46:32.213

要取消警报管理器，您只需传入相同的 PendingInent - [http://developer.android.com/reference/android/app/AlarmManager.html#cancel%28android.app.PendingIntent%29](http://developer.android.com/reference/android/app/AlarmManager.html#cancel%28android.app.PendingIntent%29)

因此，您可以在想要取消警报管理器时执行此操作（例如，如果通过按下按钮 - OnClickListener。或者在 onReceive 本身中）。

# opencv - OpenCV - 区域中的对象

> ID：15069460
> 
> 赞同：0
> 
> 时间：2013-02-25T14:38:04.667
> 
> 标签：opencv, location, detection

我想将图像分割成几个区域，然后找到某种颜色的方形对象并定义它位于哪个区域。我从来没有合作过`OpenCV`，我需要一些关于我进一步步骤的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:04:21.427

首先，开始阅读教程：[http ://docs.opencv.org/](http://docs.opencv.org/)

我会首先尝试找到某些颜色，然后再尝试找到它们的位置。我不会分割图像。要找到特定颜色的对象，请将您的图像转换为 HSV 颜色空间，然后对其进行阈值化以仅显示具有所需颜色的对象。

提示：cvtColor()、阈值()；

要查找 reqions 或轮廓，您可以尝试 findContours-method。OpenCV 有很好的例子。

# bash - 文件名替换在脚本中出现语法错误，在控制台中有效

> ID：15069462
> 
> 赞同：1
> 
> 时间：2013-02-25T14:38:06.283
> 
> 标签：bash, shell

我在 /var/log/uwsgi/ 下有几个文件，名称类似于 domain.123456789 我正在尝试遍历文件，如下所示

```
for FILE in /var/log/uwsgi/domain.+([[:digit:]]); do         
    gzip $FILE; 
done 
```

这在控制台中有效。但是当作为脚本的一部分运行时，我收到以下语法错误。

```
script.sh: line 16: syntax error near unexpected token `(' 
```

如何在 shell 脚本中使用替换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:45:41.097

通过添加以下内容确保`extglob`在脚本中启用了 shell 选项：

```
shopt -s extglob 
```

没有这个，shell 将无法识别您的`+([[:digit:]])`模式，您将收到错误消息。

您可能已经在 bash 配置文件中设置了此设置，这就是它在控制台中工作的原因。

# wpf - WPF 将 TabIndex 更改为不遵循视觉外观顺序

> ID：15069465
> 
> 赞同：0
> 
> 时间：2013-02-25T14:38:13.857
> 
> 标签：wpf, tabs

我正在尝试将标签索引设置为遵循视觉外观的顺序。这意味着出现在窗口顶部的按钮在我特别设置为不聚焦时首先获得焦点。

以下是控件的结构；

```
DocPanel
  |
  |---- DockPanel
  |       |----- Button
  |       |----- Button
  |       |----- Button
  |
  |---- Grid
          |----- Canvas
          |---- TabControl
                    |------ TextBox
                    |------ ComboBox 
```

我想要的标签顺序；

1.  帆布
2.  文本框
3.  组合框
4.  3 个按钮

目前的订单是；

1.  3 个按钮
2.  文本框，
3.  组合框
4.  帆布。

我尝试设置`KeyboardNavigation.TabNavigation="Local"`外部 DockPanel。

然后我将`TabNavigation.TabIndex`和设置`TabIndex`为我想要的数字，但这不起作用。

如果控件出现在窗口的顶部，是否不能在控件出现在底部之后将标签索引更改为焦点？

这是我的 XAML：

```
<Window x:Class="WpfApplication1.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    FocusManager.FocusedElement="{Binding ElementName=pic}"
    Title="Window1" Height="504" Width="929">
<DockPanel HorizontalAlignment="Stretch" VerticalAlignment="Stretch" KeyboardNavigation.TabNavigation="Local">
    <DockPanel DockPanel.Dock="Top" Height="30">
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Save and Close" KeyboardNavigation.TabIndex="4" TabIndex="4"/>
            <Button Content="Forward" KeyboardNavigation.TabIndex="5" TabIndex="5" />
            <Button Content="Delete" KeyboardNavigation.TabIndex="6" TabIndex="6" />
        </StackPanel>
    </DockPanel>
    <Grid DockPanel.Dock="Bottom">
        <Grid.ColumnDefinitions>
            <ColumnDefinition MinWidth="50"/>
            <ColumnDefinition MinWidth="500"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Border BorderBrush="Aqua" BorderThickness="2" >
            <Canvas x:Name="pic" Grid.Column="0" Grid.Row="0" KeyboardNavigation.TabIndex="1" KeyboardNavigation.IsTabStop="True" Focusable="True"  >
                <Canvas.Background>
                    <ImageBrush ImageSource="bookcover.jpg" Stretch="Fill"/>
                </Canvas.Background>
            </Canvas>
        </Border>
        <TabControl x:Name="tabs" Grid.Column="2" Grid.Row="0">
            <TabItem Header="Fax Details" IsTabStop="False">
                <StackPanel>
                <TextBox  Name="fdCustomerFileNumber" HorizontalAlignment="Left" Height="30" KeyboardNavigation.TabIndex="2" TabIndex="2" />

                <ComboBox TabIndex="3" KeyboardNavigation.TabIndex="3" Width="165"  HorizontalAlignment="Left" Height="22" VerticalAlignment="Center" Name="fdDocType" IsEditable="False" />
                </StackPanel>
            </TabItem>
        </TabControl>
    </Grid>

</DockPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:24:51.863

您可以将 XAML 设置为；

```
<Window x:Class="WpfApplication1.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    FocusManager.FocusedElement="{Binding ElementName=pic}"
    Title="Window1" Height="504" Width="929">
    <DockPanel HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <DockPanel DockPanel.Dock="Top" Height="30">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Save and Close" TabIndex="4"/>
                <Button Content="Forward" TabIndex="5" />
                <Button Content="Delete" TabIndex="6" />
            </StackPanel>
        </DockPanel>
        <Grid DockPanel.Dock="Bottom">
            <Grid.ColumnDefinitions>
                <ColumnDefinition MinWidth="50"/>
                <ColumnDefinition MinWidth="500"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Border BorderBrush="Aqua" BorderThickness="2" >
                <Canvas x:Name="pic" Grid.Column="0" Grid.Row="0" Focusable="True"  >
                    <Canvas.Background>
                        <ImageBrush ImageSource="bookcover.jpg" Stretch="Fill"/>
                    </Canvas.Background>
                </Canvas>
            </Border>
            <TabControl x:Name="tabs" Grid.Column="2" Grid.Row="0">
                <TabItem Header="Fax Details" IsTabStop="False">
                    <StackPanel>
                        <TextBox  Name="fdCustomerFileNumber" HorizontalAlignment="Left" Height="30" TabIndex="2" />
                        <ComboBox TabIndex="3" Width="165"  HorizontalAlignment="Left" Height="22" VerticalAlignment="Center" Name="fdDocType" IsEditable="False" />
                    </StackPanel>
                </TabItem>
            </TabControl>
        </Grid>
    </DockPanel>
</Window> 
```

然后在你后面的代码中，在New Sub中，简单的把焦点设置到Canvas上；

```
pic.Focus; 
```

# c# - C# WaitHandle 可取消的 WaitAll

> ID：15069467
> 
> 赞同：6
> 
> 时间：2013-02-25T14:38:17.803
> 
> 标签：c#, waithandle

我有以下代码，其目标是等待所有给定的等待句柄，但可以通过特定的等待句柄取消：

```
public static bool CancelableWaitAll(WaitHandle[] waitHandles, WaitHandle cancelWaitHandle)
{
    var waitHandleList = new List<WaitHandle>();
    waitHandleList.Add(cancelWaitHandle);
    waitHandleList.AddRange(waitHandles);
    int handleIdx;
    do
    {
        handleIdx = WaitHandle.WaitAny(waitHandleList.ToArray());
        waitHandleList.RemoveAt(handleIdx);
    }
    while (waitHandleList.Count > 1 && handleIdx != 0);
    return handleIdx != 0;
} 
```

这仅适用于 ManualReset 事件。使用 AutoReset 事件时，WaitAny 会重置所有信号事件，但仅返回第一个信号事件（根据 MSDN）。

任何想法如何在不轮询的情况下以适当的方式使用 AutoReset 事件完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:17:27.173

我认为您的方法应该按原样正常工作。

我相信 WaitHandle.WaitAny() 使用[Windows API 函数 WaitForMultipleObjects()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx)，其文档说：

> 修改仅针对其信号状态导致函数返回的一个或多个对象。

如果为真，则意味着您的代码应该可以工作。

我写了一个测试程序。它创建一个 AutoResetEvents 负载并在调用 CancelableWaitAll() 之前设置其中的一半。然后它启动一个线程，在设置 AutoResetEvents 的另一半之前等待 5 秒。启动该线程后，主线程立即调用 CancelableWaitAll()。

如果 WaitAny() 实际上重置了除返回索引的事件之外的任何自动重置事件，则 CancelableWaitAll() 将永远不会返回。

因为它确实返回（当然是在 5 秒后），所以我断言您的代码适用于 AutoResetEvents：

```
using System;
using System.Collections.Generic;
using System.Threading;
using System.Threading.Tasks;

namespace Demo
{
    public static class Program
    {
        private static void Main(string[] args)
        {
            AutoResetEvent[] events = new AutoResetEvent[32];

            for (int i = 0; i < events.Length; ++i)
            {
                events[i] = new AutoResetEvent(false);
            }

            // Set the first 16 auto reset events before calling CancelableWaitAll().

            for (int i = 0; i < 16; ++i)
            {
                events[i].Set();
            }

            // Start a thread that waits five seconds and then sets the rest of the events.

            Task.Factory.StartNew(() => setEvents(events));

            Console.WriteLine("Waiting for all events to be set.");

            ManualResetEvent stopper = new ManualResetEvent(false);
            CancelableWaitAll(events, stopper);

            Console.WriteLine("Waited.");
        }

        private static void setEvents(AutoResetEvent[] events)
        {
            Thread.Sleep(5000);

            for (int i = 16; i < events.Length; ++i)
            {
                events[i].Set();
            }
        }

        public static bool CancelableWaitAll(WaitHandle[] waitHandles, WaitHandle cancelWaitHandle)
        {
            var waitHandleList = new List<WaitHandle>();
            waitHandleList.Add(cancelWaitHandle);
            waitHandleList.AddRange(waitHandles);
            int handleIdx;
            do
            {
                handleIdx = WaitHandle.WaitAny(waitHandleList.ToArray());
                waitHandleList.RemoveAt(handleIdx);
            }
            while (waitHandleList.Count > 1 && handleIdx != 0);
            return handleIdx != 0;
        }
    }
} 
```

不幸的是，我无法证明 WaitHandle.WaitAll() 使用 WaitForMultipleObjects()。但是，如果没有，您可以自己调用它，方法是使用 WaitHandle.SafeWaitHandle 获取操作系统事件句柄并使用 P/Invoke 调用 WaitForMultipleObjects()。

# .net - 使用 UNnit 运行 log4net 的案例，无法创建日志文件。没有引发错误

> ID：15069468
> 
> 赞同：-1
> 
> 时间：2013-02-25T14:38:25.747
> 
> 标签：.net, nunit, log4net

最近测试了一个使用 log4net(.NET) 的日志项目，它是一个控制台项目。如果在VS中运行项目可以创建日志文件，但如果在NUnit中运行.exe文件则无法创建日志文件。日志内容只是在 UNnit GUI 中打印出来。没有错误引发。为什么？我在 App.config 中配置 log4net。

* * *

我需要使用 Nunit 来测试这个案例。

* * *

我用谷歌搜索，没有答案。

* * *

我在 App.config 中的配置文件如下：

```
<configSections>
<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net" />
</configSections>

<log4net>
<root>
  <level value="WARN">
  </level>     
  <appender-ref ref="SystemLogFileAppender" />
</root>

<appender name="SystemLogFileAppender" type="log4net.Appender.RollingFileAppender">
  <param name="File" value="d:\" type="" />
  <param name="AppendToFile" value="true" />
  <param name="RollingStyle" value="Date" />
  <param name="DatePattern" value="yyyyMMdd_SYS.TXT" />
  <param name="StaticLogFileName" value="false" />
  <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />

  <Encoding value="UTF-8" />
  <layout type="Log.LogLayout">
    <param name="ConversionPattern" value=" Level: %property{Level}%n Message: %property   {Message}%n Exception: %property{Exception}%n CreateDate: %property{CreateDate}%n%n" />
  </layout>
  <filter type="Log.SystemLogFilter">
  </filter>
  </appender> 
```

我在项目的 AssemblyInfo.cs 中添加了以下代码，但不起作用：

```
[assembly: log4net.Config.XmlConfigurator()] 
```

然后，我将其更改为以下，不再工作：

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile=@"D:\LogTest\FrameworkTest.exe.config",Watch=true)] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:48:40.697

no error raise：如果 log4net 无法记录或找不到记录信息或 dll 中未配置 log4net.Config.XmlConfigurator，log4net 将不会记录并且不会引发错误。是因为日志记录不应该影响你的程序。

如果没有写入日志，您可能有配置问题。日志记录必须在 NUnit 的运行目录中配置。您应该使用二进制文件部署 log4net.config 并将属性添加到您的测试项目（用于登录您的测试项目）：

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile = "log4net.config", Watch = true)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:19:44.320

我将 NUnit 更新到 version2.6.2，然后工作。使用配置：

```
[assembly: log4net.Config.XmlConfigurator()] 
```

# java - 调试不需要的停止

> ID：15069474
> 
> 赞同：0
> 
> 时间：2013-02-25T14:38:35.513
> 
> 标签：java, netbeans

我面临一个非常烦人的问题。我正在使用 Netbeans（7.3、7.2）完成一个 Java SE（更新版本）应用程序，有时，当调试器在这一行时，它会停止。

```
javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane()); 
```

它停止，没有错误。我的意思是，调试器不会转到下一行，它只是在应用程序仍在后台运行时停在这一行。当我以常规方式（不使用调试）运行应用程序时，不会出现此问题。

有人对这个问题有任何线索吗？

谢谢！

# html - CSS 字体粗细 - 看不见的差异？

> ID：15069475
> 
> 赞同：0
> 
> 时间：2013-02-25T14:38:35.530
> 
> 标签：html, css, fonts

我做了这个简单的[**演示**](http://jsbin.com/azazil/3/edit)。

我可以在 Visual Studio 中看到所有`font-weight`可以具有的值：

![在此处输入图像描述](../Images/0b86f5fbfa75941bd535e3d107e68d2f.png)

但是，当我尝试所有这些值时，我只能找到 4 个不同的值。

![在此处输入图像描述](../Images/b9a8314c8e7117d299b385bc2f313e76.png)

我添加了那些红色矩形，这样你就可以看到谁的宽度相同。

**为什么**中间的那些（和最后的）看起来都一样？为什么我需要所有这些数字？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T14:40:20.157

不同的字体有不同的字体粗细可供它们使用。您的浏览器不会尝试模拟丢失的权重（这是一件好事，但很难做到正确），因此您受限于您正在使用的已安装字体版本中存在的权重。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T14:40:10.040

这可能是因为字体不支持这么多不同的权重，或者浏览器无法显示这些权重。

无论如何，数字必须在那里，因为这就是字体权重的工作方式。如果字体*确实*支持不同的权重，则取决于浏览器是否尽可能准确地显示它；否则它会尝试优雅地退回到支持的最近的位置。

# android - imageView.getWidth(); 返回屏幕而不是位图宽度

> ID：15069478
> 
> 赞同：1
> 
> 时间：2013-02-25T14:38:42.890
> 
> 标签：android, android-layout, android-imageview

我有一个看起来像这样的图像视图

```
 <ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_alignTop="@+id/textView3"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="80dp"
    android:layout_marginTop="40dp"
    android:onClick="Time"
    android:adjustViewBounds="false"
    android:src="@drawable/ic_launcher" /> 
```

我正在尝试通过使用来获取图像视图中显示的图像宽度

```
ImageView artCover = (ImageView)findViewById(R.id.imageView1);
int coverWidth = artCover.getWidth(); 
```

但是返回的宽度与屏幕宽度相同，而不是图像的宽度（当图像宽度小于屏幕宽度时）。如果我做

```
int coverHeight = artCover.getHeight(); 
```

我得到了正确的图像高度。如何获取显示图像的宽度？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T15:56:07.607

您的 imageview 的位图可能会相应地缩放和对齐。您需要考虑到这一点。

```
// Get rectangle of the bitmap (drawable) drawn in the imageView.
RectF bitmapRect = new RectF();
bitmapRect.right = imageView.getDrawable().getIntrinsicWidth();
bitmapRect.bottom = imageView.getDrawable().getIntrinsicHeight();

// Translate and scale the bitmapRect according to the imageview's scale-type, etc. 
Matrix m = imageView.getImageMatrix();
m.mapRect(bitmapRect);

// Get the width of the image as shown on the screen:
int width = bitmapRect.width(); 
```

（请注意，我没有尝试编译上面的代码，但你会明白它的要点 :-)）。上述代码仅在 ImageView 完成布局后才有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:04:52.210

您可以从 imageview 获取图像并将获得图像的宽度。

```
Bitmap bitmap = ((BitmapDrawable)artCover.getDrawable()).getBitmap();<p>
bitmap.getWidth(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T14:47:45.050

您必须等到完全测量完视图树，这可能比 onPostResume() 还要晚。一种处理方法是：

```
final ImageView artCover = (ImageView)findViewById(R.id.imageView1);
artCover.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
    @Override
        public void onGlobalLayout() {
            int coverWidth = artCover.getWidth();
        }
    }
); 
```

# xcode - 未知类型名称 Xcode 恶作剧

> ID：15069483
> 
> 赞同：4
> 
> 时间：2013-02-25T14:39:01.360
> 
> 标签：xcode, macos, cocoa, avfoundation, avplayer

Xcode 再次试图让我发疯。

今天，出乎意料的是，Xcode 停止构建我的 OS X 项目。即使在此处导入，它也无法识别`AVPlayer`。`AVFoundation``AVFoundation`

![在此处输入图像描述](../Images/4088a7bcb36604cbc77f07d794003c17.png)

我尝试清理、删除`DerivedData`和重新启动计算机。这里可能有什么问题？

## 更新

在清理、删除 DerivedData、重新链接框架和重新启动 Xcode 的半随机组合后，问题自行解决，这让我认为问题是由难以重现的 Xcode 错误引起的。这个问题可能过于本地化，对其他人无用。请投票关闭它您同意。并感谢所有插话的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:24:31.887

这听起来非常奇怪，但经过一番折腾，我能够通过从 m 文件中删除 #import "RMVideoView.h" 来复制我希望相关的奇怪行为。事件的顺序似乎发生了一些事情。

1-我打开了一个新的 Mac 项目并创建了一个 NSView 子类并将您的代码放在 .h 文件中。我运行它没有错误。

2-做了一个干净的

3-现在，删除您的

`#import <AVFoundation/AVFoundation.h> from the .h file`

4- 做一个清洁。现在，如果我从 .m 文件中删除 #import"RMVideoView.h" ，奇怪的是你在放

`#import <AVFoundation/AVFoundation.h>`在 .h 文件中！这2个不应该相关

5-再试一次。将您的 #import"RMVideoView.h" 放回 .m 文件中。`#import <AVFoundation/AVFoundation.h>`插入.h 文件时，执行干净且现在的自动完成工作 。这种让我尝试下一步

6- 将你的#import 移动`<AVFoundation/AVFoundation.h>`到 .m 文件中，奇怪的是你在 .h 文件中没有出现任何错误。

我希望这能解决你的问题。

# ruby - 如何在 Cucumber / Capybara 中打印 a 的内容？

> ID：15069485
> 
> 赞同：3
> 
> 时间：2013-02-25T14:39:05.253
> 
> 标签：ruby, debugging, cucumber, capybara

我想打印位于跨度中的错误消息的内容，看起来像这样：

```
<span>Es exisitiert bereits ein Account mit dieser E-Mail Adresse. Wenn Sie sich sicher sind, dass dies Ihre Adresse ist, dann klicken Sie <a href="https://link-removed.com">hier</a> um das Passwort und den Zugang zu Ihrem Account zu erhalten.</span> 
```

在我的步骤定义中，我尝试了以下

```
print page.find('.error-msg span') 
```

然而，这并没有真正起作用。谷歌搜索一个小时后，我找不到任何有用的东西，这也可能是因为我对这一切都很陌生。

我基本上是想调试的，所以我想看看实际的内容是什么。这也将有助于未来的努力。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T14:51:29.303

你可以`text`反对那个。

```
puts page.find('.error-msg span').text 
```

[http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Element](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Element)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:44:31.187

您应该使用 rspec 匹配器来通过或失败错误。这样做会在页面上打印出有用的信息。

```
Given I visit a page
Then I should see "foo" in ".error-msg span"

Then /^I should see "([^\"]*)" in "([^\"]*)"$/ do |text, css|
  page.should have_selector(tag, text: text )
end 
```

如果您使用它并且页面上有一个“.error-msg span”元素，并且文本与您的预期不符，Capybara 显示的错误消息将告诉您选择器内的内容。例子：

```
 expected to find css ".error-msg span" with text "foo" but there were no matches. Also found "Bar", which matched the selector but not all filte 
```

rs。(Capybara::ExpectationNotMet)

翻译：“.error-msg span”中的文本是“bar”而不是“foo”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:09:09.033

您也可以使用它，因为您只需要验证该范围内的文本：

```
Then /^I should see (.+) as content in xpath "([^"]*)"$/ do |content, xpath|
  assert page.find(:xpath, xpath + "[contains(string(), '" + content +"')]")
end 
```

给出您的跨度的 xpath。它仅适用于字符串

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-11T11:49:59.383

你可以试试这个方法。将文件 elements.rb 添加到您的支持文件夹并在其中包含以下内容：

```
 def text(type=nil)
    type ||= :all unless Capybara.ignore_hidden_elements or Capybara.visible_text_only
   synchronize do
  if type == :all
     base.all_text
  else
      base.visible_text
  end
 end
end 
```

然后按如下方式编写您的步骤定义（示例）：

```
within(:id, "") do 
    page.should have_content("")
         puts text
    end
end 
```

您可以`puts text`在将来添加到任何步骤定义的末尾以输出元素文本

# android - Android - 硬键菜单项自定义选择器

> ID：15069487
> 
> 赞同：4
> 
> 时间：2013-02-25T14:39:09.913
> 
> 标签：android, android-menu, android-styles

如何更改硬键菜单的项目选择器？我能够为操作栏菜单设置自定义项目选择器。不幸的是，一些带有硬键菜单的设备（如 Nexus S）会创建不同的菜单样式。我想用我的自定义红色替换默认的蓝色突出显示选择器。我在这里和其他地方搜索了主题但没有成功。ICS+ 兼容性就足够了。

# codeigniter - codeigniter 中的重定向规则

> ID：15069500
> 
> 赞同：0
> 
> 时间：2013-02-25T14:39:57.403
> 
> 标签：codeigniter, redirect, any

我想在我的 codeigniter 站点中创建位置页面。所以我有一个名为位置和索引方法的控制器。所以所有的请求[http://mysite.com/location_name](http://mysite.com/location_name)应该登陆到[http://mysite.com/index.php/locations/index](http://mysite.com/index.php/locations/index)。并且所有其他都应该像[http://mysite.com/login](http://mysite.com/login)一样工作，应该登陆[http://mysite.com/index.php/home/login](http://mysite.com/index.php/home/login)。联系我们[http://mysite.com/contact-us](http://mysite.com/contact-us)应该登陆[http://mysite.com/index.php/home/contact](http://mysite.com/index.php/home/contact)。

我试图通过编写以下线路路由规则（route.php）来实现这一点：

```
$route['(:any)'] = 'locations';  //location name can be anything around the world 
```

所以位置工作正常，但[http://mysite.com/login](http://mysite.com/login)和[http://mysite.com/contact-us](http://mysite.com/contact-us)不起作用，它们在无限循环中不断重定向。

请提出解决方案。感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:26:29.537

[路由从上到下应用](http://ellislab.com/codeigniter/user-guide/general/routing.html)，因此您需要首先列出更具体的规则，然后才是更通用的规则：

```
$route['login'] = 'home/login';
$route['contact-us'] = 'home/contact';
$route['(:any)'] = 'location/index'; 
```

我看到您提到您已尝试更改路由文件中的规则顺序。因此，如果您已完成此操作并且它不起作用 - 您还有其他事情要做。

我会检查这些事情：

*   .htaccess 文件（如果您正在使用它）
*   导致无限循环的控制器（那里的任何重定向、`_remap`方法等）

# c# - 自动增量和 SQL 的标识

> ID：15069501
> 
> 赞同：1
> 
> 时间：2013-02-25T14:39:58.153
> 
> 标签：c#, asp.net, mysql, sql, asp.net-mvc-4

[SQL 数据库中的自增列](https://stackoverflow.com/questions/8717544/autoincrement-column-in-sql-database)

该链接回答了我对 SQL 中是否存在自动增量的疑问。

我现在的问题是这样的

我有 2 个由这些类表示的表

```
public class A
{
   [Key]
   public int AId{get;set;}
   public int BId{get;set;}
   [ForeignKey("BId")]
   public virtual B pb{get;set;}
}

public class B
{
   [Key]
   public int BId{get;set;}
   public int AId{get;set;}
} 
```

在初始化 A 类的对象期间，发生错误说`BId can not be null` 在 MySQL 中，我可以声明一个列，`AUTO_INCREMENT`然后将表初始化为类似

```
INSERT INTO myTable(col2, col3, col4) VALUES('col2','col3','col4'); 
```

假设它`col1`被声明为自动增量。我想对`BId`A 类做类似的事情，这样我就不必为它设置一个整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:47:23.460

如果`BId`不需要值，请`NULL`在 MySQL 中使用约束声明它，并使 C# 属性也可以为空：`public int? BId`.

如果您打算为 设置一个默认值`BId`，您可以使用该`DEFAULT`子句声明它。

如果你想`B`为每个创建一个新的`A`，这可以使用 table 上的触发器来完成`A`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:46:03.047

外键实际上不是这样工作的。

您可以使用主键执行您所要求的操作，如果它是标识列，SQL Server 将为您设置主键。但是对于外键，你应该已经知道你想要的值。您应该已经有一个`B`您想要引用的现有实例——要么是那个，要么您应该在创建之前创建它`A`。

如果您要求外键自动递增，您实际​​上并不想要外键，而是想要别的东西。您可能需要重新考虑您的表结构。

# android - 在 Json 中处理 null

> ID：15069502
> 
> 赞同：0
> 
> 时间：2013-02-25T14:39:59.620
> 
> 标签：android, json, null, asp.net-web-api

我有一个`asp.net-web-api`使用以下`GET`方法的项目：

```
 public string Get(string id)
    {
        List<dummy> dummies = new List<dummy>();
        string con = "user id=sa;" +
                     "password=1234" +
                     "server=foo\\bar;" +
                     "database=game; " +
                     "connection timeout=30";

        //SqlConnection sqlConn = new SqlConnection(con);
        using (SqlConnection sqlconn = new SqlConnection(con))
        {
            sqlconn.Open();
            StringBuilder sb = new StringBuilder();
            sb.Append("SELECT PART.PARTNAME,PART.PARTDES, PARTPARAMA.LOCATION ");
            sb.Append("FROM PART LEFT JOIN PARTPARAMA ");
            sb.Append("ON PART.PART = PARTPARAMA.PARTPARAM ");
            sb.Append("WHERE PART.PARTNAME = @part");

            using (SqlCommand cmd = new SqlCommand(sb.ToString(), sqlconn))
            {
                cmd.Parameters.AddWithValue("part", id);
                SqlDataReader sdr = cmd.ExecuteReader();
                while (sdr.Read())
                {
                    dummies.Add(new dummy
                    {
                        PartName = sdr.GetString(0),
                        PartDes = sdr.GetString(1),
                        PartLocation = sdr.GetString(2)
                    });
                }
            }
        }

        if (dummies.Count() > 0)
        {
            string json = JsonConvert.SerializeObject(dummies[0]);
            return json;
        }
        else
        {
            string json = JsonConvert.SerializeObject(null);
            return json;
        }
    } 
```

（我`json.net`用于序列化）。

然后`Android Activity`使用它（删除不相关的部分）：

```
public class MainActivity extends Activity {

    String tempResult = "";
    JSONObject tempJo;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        try {
            tempJo = mc.execute(someString).get();

            } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            }
        //Tried to check for null with the following
        //if(aaa == null)
        //{
        //  Toast.makeText(context, "clear null", Toast.LENGTH_LONG).show();
        //}
        //if(aaa == "null")
        //{
        //  Toast.makeText(context, "null", Toast.LENGTH_LONG).show();
        //}
        //if(aaa == "\"null\"")
        //{
        //  Toast.makeText(context, "special null", Toast.LENGTH_LONG).show();
        //}
        //if(aaa=="{}")
        //{
        //  Toast.makeText(context, "empty", Toast.LENGTH_LONG).show();
        //}
        if(tempJo.toString() == null)
        {
            Toast.makeText(context, "tempJo is null", Toast.LENGTH_LONG).show();
        }
        else
        {
            PartDetails pd = getPart(tempResult);
            txtPart.setText(pd.partName);
            txtDescription.setText(pd.partDescription);
            txtLocation.setText(pd.partLocation);
        }

    }
    private PartDetails getPart(String json){
        Toast.makeText(this, "*** the json value is: ***: " + json, Toast.LENGTH_LONG).show();
        PartDetails pd = new PartDetails();
        try {
            Toast.makeText(context, "got here!!!", Toast.LENGTH_LONG).show();

            JSONObject jo = new JSONObject(json);

            pd.partName = jo.getString("PartName");
            pd.partDescription = jo.getString("PartDes");
            pd.partLocation = jo.getString("PartLocation");

        } catch (JSONException e1) {
            Toast.makeText(this, "*** JSONException ***: " + e1.getMessage(), Toast.LENGTH_LONG).show(); <=> Exception is here
        }
        return pd;
    }

    public class myClass extends AsyncTask<String, Void, JSONObject>{

        protected JSONObject doInBackground(String... passing) {
            String url = "http://1.2.3.4/api1/api/values/" + passing[0];
            HttpClient httpclient = new DefaultHttpClient();
            HttpGet httpget = new HttpGet(url); 
            HttpResponse response;
            JSONObject json = new JSONObject();

            try{
                response = httpclient.execute(httpget);
                HttpEntity entity = response.getEntity();
                if(entity != null){
                    InputStream instream = entity.getContent();
                    String result= convertStreamToString(instream);
                    json=new JSONObject(result);
                    instream.close();
                }
            }
            catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

                return json;
        }

        public String convertStreamToString(InputStream is) {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is));
            StringBuilder sb = new StringBuilder();

            String line = null;
            try {
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                try {
                    is.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            return sb.toString();
        }
    } 
```

当使用 firefox 浏览`api`地址时，我得到这个“null”的空值和`Json`正确的查询。
![空json](../Images/b52db5cf206a8a4ca977dc556b142a76.png)
我得到的例外是`org.json.JSONException: Value null of type org.json.JSONObject$1 cannot be converted to JSONObject`。我怎样才能让`If`语句捕获空 json？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:06:57.420

这是您的代码：

```
protected JSONObject doInBackground(String... passing) {
    String url = "http://1.2.3.4/api1/api/values/" + passing[0];
    HttpClient httpclient = new DefaultHttpClient();
    HttpGet httpget = new HttpGet(url); 
    HttpResponse response;
    JSONObject json = new JSONObject();
    try {
        response = httpclient.execute(httpget);
        HttpEntity entity = response.getEntity();
        if(entity != null){
            InputStream instream = entity.getContent();
            String result= convertStreamToString(instream);
            json=new JSONObject(result);
            instream.close();
        }
    }
    catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

        return json;
} 
```

如果您的字符串不是有效的 json，则您正在将字符串从服务器传递到 JSONObject 构造函数并捕获异常。

```
json=new JSONObject(result); 
```

例如，您可以添加这样的条件：

```
if ("null".equals(result)) {
     //do something with null
} else {
    json = new JSONObject(result);
} 
```

# git - 使用 git-tfs 时将 git commit 元数据存储在 TFS 中

> ID：15069505
> 
> 赞同：3
> 
> 时间：2013-02-25T14:40:05.133
> 
> 标签：git, version-control, tfs, git-tfs

## 语境

我们是一个使用 github 进行协作的开发人员团队。我们需要在 TFS 上镜像我们的发布分支，以便我们为每个 git 提交都有一个 tfs 变更集。似乎最好的方法是使用[git-tfs rcheckin](https://github.com/git-tfs/git-tfs/wiki/Rcheckin)。

在对[我之前的 git-tfs 问题的](https://stackoverflow.com/questions/15005647/one-to-one-mapping-of-git-commits-to-tfs-changesets-using-git-tfs-rcheckin)[回答](https://stackoverflow.com/a/15013174/1591992)的评论中，[Matt Burke](https://stackoverflow.com/users/29691/matt-burke)告诉我

```
All changesets will be attributed to you... git-tfs connects to TFS with your 
credentials, and there's not an "attribute this to someone else" parameter on 
checkin (at least, not that I know of). 
```

## 正确提交 -> 变更集归属

如果一个人只使用我们的 tfs 镜像，我有什么方法可以识别出归因于我的这种 tfs 变更集的原始提交者？

有没有办法在 TFS 中存储元数据，或者有没有办法编写 git-tfs 脚本以便将此信息添加到提交消息中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:03:40.860

现在在稳定版本中发布的主干（[https://github.com/git-tfs/git-tfs/pull/336 ）中有一个修复程序。](https://github.com/git-tfs/git-tfs/pull/336)

您将必须配置和使用与 Windows 用户登录到该电子邮件地址相匹配的作者文件。该文件用于以原始提交者的名义提交。

但是必须在 tfs 权限中授予一项权利，才能代表其他人签入。

# python - 用于匹配带有通配符结尾的开始文件名的 Python 正则表达式

> ID：15069506
> 
> 赞同：0
> 
> 时间：2013-02-25T14:40:06.020
> 
> 标签：python, regex

我有以下表达

```
filingReportURL = re.search(r'Archive[\'"]?([^\'" >]+)', utf8line) 
```

它与以存档开头的网址匹配，但我遇到了麻烦，因为我想要带有扩展名的文件名，但我不知道该扩展名是什么。即必须有一个文件扩展名 Ie`jpg`或`.BMP`对于每种情况，但它可能是`.xyx123`. 我已经尝试添加`[\.\w+]`到末尾，但是当我进行搜索时，我总是会丢失扩展名的最后一个字母。关于更好更清洁的方法的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:48:08.013

为什么不能使用这样的简单匹配？
`Archive(.*)/(.*)\.([a-z A-Z 0-9]+)`

替换匹配将`\2.\3`在 grep 中。

# javascript - 如何在点击事件后延迟 javascript 的执行？

> ID：15069508
> 
> 赞同：2
> 
> 时间：2013-02-25T14:40:10.087
> 
> 标签：javascript, jquery, wordpress

程式！我在网站上找到了类似问题的解决方案，例如我的问题，但发生在我身上的事情相当不寻常，我认为它们不适用。

在此页面上： http: [//tdg.gswitchhost.com/calendar/](http://tdg.gswitchhost.com/calendar/)

我被锁定在使用这个我真的不关心的插件。这是一个 Wordpress 站点，但列出即将发生的事件的插件的行为与 Wordpress 不同。它有这个完全独特的系统。帖子位于帖子数据库表之外，您必须以完全不同的方式查询它们。这是一个无赖。所以我的问题：

我们有一些 jquery 在事件列表中使用它的魔法来添加手风琴效果，这很有效。然而。当您单击分页链接以加载下一组事件时，插件不会链接到事件的第 2 页，而是运行异步查询并将下一组事件加载到现有页面上，而无需重新加载页面。如果您单击其中一项新事件，则手风琴将不再起作用。

我*认为*正在发生的事情是，在点击时，插件会删除包含事件的整个 UL，并加载第二个全新的，包含第二个记录集，具有相同的类名，但由于 javascript 在第一个 UL 上初始化，一个插件被删除，新的设置没有受到影响，因为页面没有重新加载并再次运行 javascript。

当您单击分页链接时，我尝试使用 .on() 和 Livequery 插件重新运行 javascript，但是由于查询正在运行并加载新的 UL，所以会出现延迟，因此我相信当您单击时，javascript 会再次运行链接，但由于单击时尚未加载 UL，因此 jquery 没有什么可以处理的。

对不起，这太长了，但我只想尽可能清楚。我错了吗？这让我很生气，我的时间不多了，我真的需要让它工作，这样无论页面上加载了哪组事件，手风琴功能都可以工作。

这是初始化手风琴的javascript：

```
$('.eventListingNew').accordion({
    headerClassName: 'accordionHeader',
    headerActiveClassName: 'accordionHeader-active',
    contentClassName: 'accordionContent',
    collapseAll: false,
    speed: 250
}); 
```

这是整个手风琴功能的粘贴箱，因为它很长。[http://pastebin.com/BvDseg3g](http://pastebin.com/BvDseg3g)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:47:00.177

简单的事情就是在 Ajax 完成运行以重新初始化它时调用它。

```
$(document).ajaxComplete(function(event, xhr, settings) {

    $('.eventListingNew').accordion({
        headerClassName: 'accordionHeader',
        headerActiveClassName: 'accordionHeader-active',
        contentClassName: 'accordionContent',
        collapseAll: false,
        speed: 250
    });

}); 
```

# jakarta-ee - 比较java UI框架

> ID：15069510
> 
> 赞同：0
> 
> 时间：2013-02-25T14:40:17.940
> 
> 标签：jakarta-ee, user-interface, frameworks

我试图找到 JavaEE 用户界面框架和工具的精确比较。

到目前为止，我一直在使用 symfony/PHP 和 RoR——这些框架提供了 ORM、模板引擎、MVC 引擎等。您不使用框架的内置模板引擎并自行选择一个是非常罕见的。在 Java 中——正如我所见——恰恰相反——框架通常不与一个特定的解决方案捆绑在一起，你必须为你选择合适的工具。

我是 JavaEE 的新手，很难从这么多可用的工具中进行选择。到目前为止，我已经熟悉了 spring mvc、jsp 和 apache tile。另外，我读到还有：velocity、freemaker、sitemesh、jsf、facelets、tapestry、themyleaf ......等等。此外，它们中的一些被定义为布局引擎，另一些被定义为模板引擎等（在 symfony/PHP 中，您已经使用主框架配置了所有内容，因此您不必区分）。

你知道任何关于 Java web 工具的比较吗（最好是最新的，例如 struts 似乎正在消失）？适合初学者的东西；）

编辑：我做了一项研究——在每个框架上发现了很多文档，但我必须花很多时间来学习所有这些，而不是获得基本的理解并能够比较它们。我不是在寻找特定工具的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:15:50.540

您可能要考虑使用 JSF，它有多种风格：IceFaces、MyFaces、PrimeFaces 等...... GWT（Google Web Toolkit）也是一个很棒的 UI 框架。

我想说 GWT 和 JSF 在学习的加速时间上是可比的。这两个框架都非常适用于 Java EE 项目，它们甚至适用于非企业项目，因此在您熟悉它们之后真的取决于您。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:48:07.073

的确，Java 中有许多替代方案，但有一个明确的标准全栈框架，简称为 Java EE。

它包含一个 MVC 框架 (JSF)、一个模板引擎 (Facelets)、一个依赖注入工具 (CDI)、支持业务逻辑和事务 (EJB) 和一个 ORM (JPA)，

这是一个非常丰富的框架，并且可以非常小。TomEE 在大约 25 MB 中实现了这一切。

您提到的所有其他事情都是替代品。最简单的事情是从标准框架开始（只需下载像 TomEE 或 GlassFish 这样的实现）。当您有一些经验并且由于某种原因对标准框架/库中的内容不满意时，请担心选择替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:53:52.187

GWT 网页层不是 Java EE。唯一的服务层是 Java EE。

# svn - 如何在 phabricator 中包含外部 svn 存储库？

> ID：15069515
> 
> 赞同：1
> 
> 时间：2013-02-25T14:40:32.397
> 
> 标签：svn, version-control, phabricator

我已经运行 subversion 几年了，并且刚刚为一些管理和代码审查工具安装了 phabricator。但是，我找不到将位于本地服务器上的现有颠覆存储库包含到 phabricator 中的方法。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:49:08.917

显然（花了太多点击才发现这一点）Phabricator 的版本控制界面部分称为“Diffusion”，安装/配置它的说明在[这里](http://www.phabricator.com/docs/phabricator/article/Diffusion_User_Guide.html)

但是，该页面仅提供在工具中创建*新*存储库的说明，而不是链接到现有存储库。

# zend-framework - Zend 路由/URL 助手。在 URL 中首先显示一个全局参数

> ID：15069517
> 
> 赞同：0
> 
> 时间：2013-02-25T14:40:37.120
> 
> 标签：zend-framework, url-rewriting, zend-route, zend-view, zend-router

很好奇是否有人知道实现以下内容的最佳方法：我在我的 zend 框架 1.12 应用程序中有一个参数，它有效地控制事物的“范围”，并且是我数据库中每个表中的一个字段，用于表示一行的范围. 它是一个简单的整数变量，可以被认为是“buildingID”，因此它控制着我们正在使用的“建筑物”。

在一个插件中，我有：

```
Zend_Controller_Front::getInstance()->getRouter()->setGlobalParam('building', DYNAMIC_INT); 
```

这完成了我所需要的。当我使用 URL view-helper 构建 URL 时，我有我的参数，但它始终位于参数列表的末尾。我知道从编程的角度来看这是微不足道的，但是我将如何实现将这个全局参数“添加”到我的 url 参数中？

```
site.com/admin/controller/action/param1/xyz/param2/xyz/building/2 
```

成为

```
site.com/admin/controller/action/building/2/param1/xyz/param2/xyz ? 
```

接受任何想法。如果你想让我重载 url view helper，你能提供一些示例代码吗，因为我在设置这个类时遇到了麻烦。

谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:04:40.283

您可以使用[自定义路由](http://framework.zend.com/manual/1.12/en/zend.controller.router.html)来完成此操作。在引导文件中的某处设置路由：

```
$route = new Zend_Controller_Router_Route(
    ':controller/:action/building/:building/*'
);
$router = Zend_Controller_Front::getInstance()->getRouter();
$router->addRoute('building', $route); 
```

然后，假设在使用 url 视图助手之前的某个时间点调用了以下内容......

```
Zend_Controller_Front::getInstance()->getRouter()->setGlobalParam('building', DYNAMIC_INT); 
```

...您可以将路线指定为助手的第二个参数：

```
echo $this->url(array(
    'controller' => 'admin',
    'action' => 'controller',
    'param1' => 'xyz',
    'param2' => 'xyz',
), 'building');

// /admin/controller/building/1/param1/xyz/param2/xyz 
```

# c# - 在 C# 中将位图从 16bpp 转换为 8bpp

> ID：15069519
> 
> 赞同：0
> 
> 时间：2013-02-25T14:40:38.937
> 
> 标签：c#, asp.net, .net, windows, image

我有一个 16bpp 的位图。我想将该图像在我的 ASP.NET 端转换为 8bpp 图像。

我尝试了很多在互联网上找到的选项，但对我没有任何作用。

我也试过这样：[C# Converting 32bpp image to 8bpp](https://stackoverflow.com/questions/6355135/c-sharp-converting-32bpp-image-to-8bpp)

但是如果我想保存文件，我会收到以下错误：

异常详细信息：System.Runtime.InteropServices.ExternalException：GDI+ 中发生一般错误。

```
Line 278:                    System.Drawing.Image img2 = Convert(bm_resize);//byteArrayToImage(gray);
Line 279:                    
Line 280:                    img2.Save(helper+"grey2.jpg", System.Drawing.Imaging.ImageFormat.Jpeg);
Line 281:                }
Line 282: 
```

我的问题有什么正确的方法吗？

完整代码：

```
System.Drawing.Image img2 = Convert(bm_resize);
img2.Save(path+"test.jpg", System.Drawing.Imaging.ImageFormat.Jpeg);

public static System.Drawing.Image Convert(Bitmap oldbmp)
    {
        using (MemoryStream ms = new MemoryStream())
        {
            oldbmp.Save(ms, ImageFormat.Gif);
            ms.Position = 0;
            return System.Drawing.Image.FromStream(ms);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:09:24.410

该问题是由在保存图像之前处理内存流引起的。

我相信 GDI+ 需要内存流在您仍在使用从内存流创建的图像时持续存在。

请参阅[Microsoft 支持文章。](http://support.microsoft.com/default.aspx?scid=kb;en-us;814675)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:50:06.200

我使用一个小助手函数在 .NET 中创建 1 bpp 单色位图。查看此链接，它也适用于 8 bpp

[http://www.wischik.com/lu/programmer/1bpp.html](http://www.wischik.com/lu/programmer/1bpp.html)

希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-02T15:52:00.807

[AForge.Net](http://www.aforgenet.com/)有很多免费的（在较小的 GPL 许可下）例程，用于此类更改等等。16bpp 到 8bpp 的转换就是[这么](http://www.aforgenet.com/aforge/framework/docs/html/87465fa3-c7d0-7df9-382d-245461f48318.htm)简单。

# wpf - wpf 资源模板未应用

> ID：15069520
> 
> 赞同：1
> 
> 时间：2013-02-25T14:40:45.897
> 
> 标签：wpf, xaml, templates, resources, mvvm-light

我有一个 ResourceDictionary `CustomStyles.xaml`，我已经在两个视图中实现了它。在第一个视图中，所有模板和样式都可以正常工作。虽然在第二个视图中我的模板没有应用到我的`DataGrid`，当我进入视图时，会显示以下输出。仍然在我的 VS2012 Designer`HeaderTemplates`中显示正确。

```
System.Windows.ResourceDictionary Warning: 9 : Resource not found; ResourceKey='TransparentWhiteBrush'
System.Windows.ResourceDictionary Warning: 9 : Resource not found; ResourceKey='TransparentWhiteBrush'
System.Windows.ResourceDictionary Warning: 9 : Resource not found; ResourceKey='GrayBrush7'
System.Windows.ResourceDictionary Warning: 9 : Resource not found; ResourceKey='Gray3'
System.Windows.ResourceDictionary Warning: 9 : Resource not found; ResourceKey='Gray3'
System.Windows.ResourceDictionary Warning: 9 : Resource not found; ResourceKey='ControlBackgroundBrush'
System.Windows.ResourceDictionary Warning: 9 : Resource not found; ResourceKey='TextBrush'
System.Windows.ResourceDictionary Warning: 9 : Resource not found; ResourceKey='GrayBrush7'
System.Windows.ResourceDictionary Warning: 9 : Resource not found; ResourceKey='TextBrush'
System.Windows.ResourceDictionary Warning: 9 : Resource not found; ResourceKey='TransparentWhiteBrush'
System.Windows.ResourceDictionary Warning: 9 : Resource not found; ResourceKey='TransparentWhiteBrush'
System.Windows.ResourceDictionary Warning: 9 : Resource not found; ResourceKey='GrayBrush7'
System.Windows.ResourceDictionary Warning: 9 : Resource not found; ResourceKey='Gray3'
System.Windows.ResourceDictionary Warning: 9 : Resource not found; ResourceKey='Gray3' 
```

这些资源不是我的，我认为我没有应用它们。我实施的资源：

```
<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="pack://application:,,,/Fluent;Component/Themes/Office2010/Silver.xaml" />
    <ResourceDictionary Source="pack://application:,,,/Fluent;Component/Themes/Office2010/Silver.xaml" />
    <ResourceDictionary Source="/Fluent;Component/Themes/Metro/White.xaml" />
    <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colours.xaml" />
    <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
    <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
    <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Blue.xaml" />
    <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml" />
    <ResourceDictionary Source="/PQS;component/Resources/CustomStyles.xaml"/>
</ResourceDictionary.MergedDictionaries> 
```

最后是我的数据模板：

```
<DataGrid ItemsSource="{Binding Items.View}" Style="{DynamicResource InputDataGridStyle}" Grid.Row="1" Name="InputGrid" Loaded="InputGrid_Loaded" KeyUp="InputGrid_OnKeyUp">
    <DataGrid.Columns>
        <DataGridTemplateColumn HeaderTemplate="{DynamicResource InputGridIndexHeaderTempalte}" CellTemplate="{DynamicResource InputGridIndexCellTempalte}" />

        <DataGridTemplateColumn HeaderTemplate="{DynamicResource InputGridTimeStampHeaderTemplate}" CellTemplate="{DynamicResource InputGridTimeStampCellTemplate}" />

        <DataGridTemplateColumn HeaderTemplate="{DynamicResource InputGridUserHeaderTemplate}" CellTemplate="{DynamicResource InputGridUserCellTemplate}" />

        <DataGridTemplateColumn HeaderTemplate="{DynamicResource InputGridValueHeaderTemplate}" CellTemplate="{DynamicResource InputGridValueCellTempalte}" Visibility="{Binding ElementName=InputGrid, Path=DataContext.CharacteristicMeasure.Characteristic.CharacteristicType.IsBool,Converter={StaticResource boolToInv}, ConverterParameter=true}" />

        <DataGridTemplateColumn HeaderTemplate="{DynamicResource InputGridValueHeaderTemplate}" CellTemplate="{DynamicResource InputGridBoolValueCellTempalte}" Visibility="{Binding ElementName=InputGrid, Path=DataContext.CharacteristicMeasure.Characteristic.CharacteristicType.IsBool,Converter={StaticResource boolToInv}}" />

        <DataGridTemplateColumn HeaderTemplate="{DynamicResource InputGridValidHeaderTemplate}" CellTemplate="{DynamicResource InputGridValidCellTemplate}" />

        <DataGridTemplateColumn HeaderTemplate="{DynamicResource InputGridTextHeaderTemplate}" CellTemplate="{DynamicResource InputGridTextCellTemplate}" />
    </DataGrid.Columns>
</DataGrid> 
```

例如一个标题和单元格模板

```
<DataTemplate x:Key="InputGridIndexHeaderTempalte">
    <TextBlock Text="#" />
</DataTemplate>

<DataTemplate x:Key="InputGridIndexCellTempalte">
    <TextBlock Text="{Binding Index}" />
</DataTemplate> 
```

我的设计师截图 ![在此处输入图像描述](../Images/e47d0ef1751f87d378331c71365d8cf0.png)

以及它如何看待应用程序： ![在此处输入图像描述](../Images/67105fb55c68fdbb8136baa85836ba15.png)

请帮忙！！！并询问您是否需要更多信息！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:31:48.820

`ResourceDictionary`我的 .xml 文件中没有我的 xaml `App.xaml`。我不知道为什么......虽然如果我把它放在那里一切正常。

# ssh - ssh 隧道端口转发

> ID：15069522
> 
> 赞同：0
> 
> 时间：2013-02-25T14:40:51.630
> 
> 标签：ssh

我有三台计算机，A、B、C。A 是我正在使用的计算机，C 是我要访问的远程计算机。但是C只能通过B访问。只有B有ssh服务器，只有A有ssh客户端。

我应该使用什么命令（最好在 A 上），以便我可以通过 B 连接到 C（端口 80）？例如，B 应将所有传入端口 12345 转发到 C:80。

我知道这是一个常见问题，我在谷歌上找到了大量命令，但似乎没有一个有效。

设置好后，我应该只在 A 上使用 localhost:5678，它连接到 B:1234，然后转发到 C:80。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-10T02:02:37.303

您需要使用远程端口转发：

从 A 运行 ssh -R *:1234:C:80 you@B

然后你可以通过输入 B:1234 来访问 C，但这也需要在 /etc/ssh/sshd_config 中将 GatewayPorts 设置为 yes，然后重新启动 sshd（这告诉 C 监听所有 IP 地址，而不仅仅是本地 IP，所以它可以可从外部访问）

一旦你从 B 注销，它也会禁用到 C 的隧道。

# python - Python：登录网站

> ID：15069524
> 
> 赞同：1
> 
> 时间：2013-02-25T14:41:23.400
> 
> 标签：python, login, python-2.7, urllib2

我试图登录网站并进行自动清理工作。

我需要登录的网站是：[http ://site.com/Account/LogOn](http://site.com/Account/LogOn)

我尝试了在 Stack 上找到的各种代码，例如[Login to website using python](https://stackoverflow.com/questions/8316818/login-to-website-using-python)（但我坚持这一行

```
session = requests.session(config={'verbose': sys.stderr}) 
```

我的 JetBeans 不喜欢`'verbose'`告诉我我需要做某事，但没有具体解释什么）。

我也试过这个：[浏览器模拟 - Python](https://stackoverflow.com/questions/2567738/browser-simulation-python)，但也没有运气。

谁能帮我？所有答案将不胜感激。提前致谢。

PS：我两周前开始学习 Python，所以请详细说明您对我的“专业”水平的理解：)

- - - - - - - - - - - - -更新： - - - - - - - - - - - - ------

我设法登录，但是当我试图移动到其他页面并按下按钮时，它显示请登录！

我使用这段代码：

```
url = 'http://site.com/Account/LogOn'
values = {'UserName': 'user',
          'Password': 'pass'}

data = urllib.urlencode(values)
cookies = cookielib.CookieJar()

opener = urllib2.build_opener(
    urllib2.HTTPRedirectHandler(),
    urllib2.HTTPHandler(debuglevel=0),
    urllib2.HTTPSHandler(debuglevel=0),
    urllib2.HTTPCookieProcessor(cookies))

response = opener.open(url, data)
the_page = response.read()
http_headers = response.info()
print response 
```

登录后，我需要切换一个菜单值，在 HTML 中如下所示：

```
<select id="menu_uid" name="menu_uid" onchange="swapTool()" style="font-size:8pt;width:120px;">
<option value="1" selected>MyProfile</option>
...
<option value="6" >DeleteTree</option> 
```

但如果我形成这样的 URL，我也可以直接执行此操作： [http ://site.com/Account/management.html?Category=6&deltreeid=6&do=Delete+Tree](http://site.com/Account/management.html?Category=6&deltreeid=6&do=Delete+Tree)

那么，我怎样才能建立这个 URL 并提交呢？再次感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T20:01:55.000

为自己省去很多麻烦并使用[`requests`](http://docs.python-requests.org/)：

```
url = 'http://site.com/Account/LogOn'
values = {'UserName': 'user',
          'Password': 'pass'}

r = requests.post(url, data=values)
# Now you have logged in

params = {'Category': 6, 'deltreeid': 6, 'do': 'Delete Tree'}
url = 'http://site.com/Account/management.html'

# sending cookies as well
result = requests.get(url, data=params, cookies=r.cookies) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:51:16.037

那么第一件事

*它向/Account/LogOn*发送 POST 请求。这些字段称为*UserName*和*Password*。

然后就可以使用python的httplib来做HTTP请求了

[http://docs.python.org/2/library/httplib.html](http://docs.python.org/2/library/httplib.html)

（最后有一个关于如何进行 POST 的示例）。

然后，您可能会在 HTTP 标头中收到包含会话 cookie 的响应。您需要将该 cookie 存储在一个变量中，并将其发送到所有后续请求中以进行身份​​验证。

# c++ - 简单单行函数中的“无法访问代码”警告

> ID：15069526
> 
> 赞同：2
> 
> 时间：2013-02-25T14:41:29.237
> 
> 标签：c++, visual-studio-2010, boost, compiler-warnings

我在[Boost.Variant](http://www.boost.org/doc/libs/1_50_0/doc/html/variant.html)类中有 220 个“无法访问的代码”警告`boost::detail::variant::invoke_visitor`：

```
template <typename T>
result_type internal_visit(T& operand, int)
{
    return visitor_(operand);
} 
```

.

```
boost_1_50_0\boost\variant\variant.hpp(859): warning C4702: unreachable code 
```

线`return visitor_(operand);`。

首先，在这个简单的单行函数中，怎么可能有无法访问的代码呢？哪个代码无法访问？

我无法在简单的情况下重现此警告，似乎是因为我不明白究竟是什么原因造成的。在我`operator==`为`boost::variant`.

环境：VC++ 2010，Boost 1.50

**编辑：**

警告仅在发布版本（优化）中发生，并且仅在我比较`boost::variant`s. 我使用`boost::variant`原始类型和自定义类型。自定义类型实现了典型`bool operator(CT const& lh, CT const& rh)`的自由函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-05-04T22:54:47.350

我自己在 VS 2017 中遇到了这个问题。如果编译器确定`visitor_(T&)`将始终抛出异常，则“无法访问”部分是返回。如果您要将其解压缩成以下内容：

```
auto v = visitor_(operand);
return v; 
```

编译器将调用`return v;`为无法访问。就我而言，我使用的是基于策略的类和`NullPolicy`抛出的异常。我最终只是删除了异常。

有趣的事实：如果您启用了 LTCG，您只会在链接阶段收到错误，因此您甚至不知道从哪里开始。关闭 LTCG 但保留优化至少可以让您通过编译有问题的文件失败来缩小范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-13T10:35:36.420

以防万一其他人偶然发现同样的事情：（我在 MSVS 2017 v15.7.4 中体验过这个）

```
class Widget
{
public:
    void bar()
    {
        foo = 0; // C4702 here
    }

    void foobar()
    {
        return; // NOTE direct return here
        bar();
    }

private:
    int foo;
}; 
```

这是在旧代码中，有人“注释掉”了整个函数`foobar()`，将原始代码留作“未来参考”。（是的，源代码控制很难使用）

现在在发布模式下，编译器内联了`bar()`导致 C4702: unreachable code 警告的函数，但它表明函数的第一行`bar()`似乎没有任何问题。`return;`（实际上是触发警告后的每一行代码）

# iphone - 按下按钮时自动布局展开标签

> ID：15069529
> 
> 赞同：0
> 
> 时间：2013-02-25T14:41:38.970
> 
> 标签：iphone, ios, ios6, autolayout

我正在开发 iOS 6 应用程序并使用 Autolayout。我的界面非常简单：标签和按钮垂直对齐。标签有很长的文字，但它的高度设置为 50。我想在按下按钮时展开标签。我尝试做到这一点，但是当标签展开时，按钮不会移动。我希望它们之间的垂直空间保持不变。我的按钮操作代码如下所示：

```
- (IBAction)touch:(id)sender {
    [self.label sizeToFit];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:08:03.347

您可以通过界面构建​​器连接 UI 元素。

看看这个教程

[http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2](http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2)

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:10:41.523

我发现了问题。我应该将长度的高度设置为大于或等于不等于

# eclipse-plugin - 使用 eclipse 插件读取项目的内容

> ID：15069532
> 
> 赞同：0
> 
> 时间：2013-02-25T14:41:42.060
> 
> 标签：eclipse-plugin

我想创建一个 Eclipse 插件，单击菜单栏中的菜单将扫描所有项目内容，并让我了解指定函数的使用（如果有 isBoolean 或 isInteger 等）。

我到处搜索，但对如何做没有一个清晰的想法。我听说过 IResource 和 Iproject API，但没有找到它的任何实现。你能帮我找到正确的方向吗？

我试着把它放在我的行动中......但得到“java.lang.ClassNotFoundException：org.eclipse.jdt.core.search.SearchRequestor”

```
 SearchPattern pattern = SearchPattern.createPattern("isBool",  
            IJavaSearchConstants.METHOD, 
            IJavaSearchConstants.REFERENCES, 
            SearchPattern.R_EXACT_MATCH);

    IJavaSearchScope scope = SearchEngine.createWorkspaceScope();
    SearchRequestor requestor = new SearchRequestor() {

        @Override
        public void acceptSearchMatch(SearchMatch searchMatch) throws CoreException {
            // TODO Auto-generated method stub
            System.out.println( searchMatch.getElement());

        }
    };

    SearchEngine searchEngine = new SearchEngine();
    try {
        searchEngine.search(
                pattern, 
                new SearchParticipant[]
                        {SearchEngine.getDefaultSearchParticipant()},
                        scope, requestor, null);
    } catch (CoreException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我是否朝着正确的方向前进？或者有什么需要改的吗。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:19:36.523

我假设您的意思是一个 Java 项目。你应该看看`org.eclipse.jdt.core.search.SearchEngine`API。

你需要做这样的事情：

```
SearchPattern pattern = SearchPattern.createPattern("isBoolean",  IJavaSearchConstants.METHOD, IJavaSearchConstants.REFERENCES, SearchPattern.EXACT_MATCH);
new SearchEngine().search(
    SearchEngine.createJavaSearchScope(patter, 
    new SearchParticipant[] { SearchEngine.getDefaultSearchParticipant() },
    new IJavaElement[] { iJavaProject }),
    requestor,
    new NullProgressMonitor()); 
```

`requestor`异步接收（和处理）您的匹配结果的东西在哪里。

# http-headers - HTTP 请求标头：UserAgent 变量

> ID：15069533
> 
> 赞同：24
> 
> 时间：2013-02-25T14:41:44.640
> 
> 标签：http-headers, user-agent

发送 HTTP 请求时，IE 将 User-Agent 变量发送到服务器。一个可能的值（如网络调试器所见）：

> 用户代理：Mozilla /5.0（兼容 MSIE 9.0；Windows NT 6.1；WOW64；Trident/5.0）

我的问题：IE（或任何其他浏览器）如何找到这个变量？我问这个是因为在访问某些网站时，这个变量与其他变量不同，我想追踪变化的来源。“兼容性设置”是一种选择，但我认为还有更多。

谁能解释这个变量的过程？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-05T04:40:11.387

用户代理出现在 HTTP 请求标头中，而不是 HTTP 响应标头中。通常，请求是从浏览器发送到 Web 应用程序的。所以用户代理变量由浏览器填充。不同的浏览器会用不同的值填充这个字段。

关于 IE 如何找到这些变量，我想您是在询问[User-Agent Registry Keys](http://msdn.microsoft.com/en-us/library/ms537503%28v=vs.85%29.aspx#UARegistry)。

您还可以通过将值添加到以下注册表项来覆盖用户代理字符串的某些标记。

```
HKEY_LOCAL_MACHINE (or HKEY_CURRENT_USER)
   SOFTWARE
      Microsoft
         Windows
            CurrentVersion
               Internet Settings
                  5.0
                     User Agent
                        (default) = "Mozilla/4.0"
                        Compatible = "compatible"
                        Platform = "Windows NT 5.1"
                        Version = "MSIE 6.0"
                        Pre Platform
                           Token = Value
                        Post Platform
                           Token = Value 
```

用户代理键的默认值替换用户代理字符串中报告的应用程序名称和应用程序版本标记。请注意，前七个字符用于应用程序名称，其余字符指定应用程序版本令牌。

Compatible、Platform 和 Version 值替换用户代理字符串中的相应标记。

通过使用注册表编辑器在 Pre-Platform 键或 Post-Platform 键下创建新的字符串值，可以将其他令牌添加到用户代理字符串。值名称应该是完整的标记；值数据被忽略。添加到 Pre-Platform 密钥的令牌出现在最终用户代理字符串中的平台令牌之前。添加到 Post-Platform 键的标记出现在最终用户代理字符串中的平台标记之后。Pre-Platform key 或 Post-Platform key 中的多个令牌以不可预知的顺序显示。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T11:48:21.747

关于用户代理的[维基百科文章](http://en.wikipedia.org/wiki/User_agent)指出：

> User-Agent 字符串格式目前由 RFC 2616 (HTTP/1.1) 的第 14.43 节指定。HTTP 中的 User-Agent 字符串格式是带有可选注释的产品标记（关键字）列表。

所以我建议你阅读关于它的[RFC 2616 部分](https://www.rfc-editor.org/rfc/rfc2616#section-14.43)：

> 14.43 用户代理
> 
> User-Agent request-header 字段包含有关发起请求的用户代理的信息。这是出于统计目的、协议违规的跟踪以及用户代理的自动识别，以便定制响应以避免特定的用户
> 代理限制。
> 用户代理应该在请求中包含这个字段。
> 该字段可以包含多个产品令牌（第 3.8 节）和标识代理的注释以及构成用户代理重要部分的任何子产品。按照惯例，产品令牌是按照它们对识别应用程序的重要性的顺序列出的
> 。
> 
> ```
>  User-Agent     = "User-Agent" ":" 1*( product | comment ) 
> ```
> 
> 例子：
> 
> ```
>  User-Agent: CERN-LineMode/2.15 libwww/2.17b3 
> ```

关于产品令牌的第 4.8 节规定如下：

> 3.8 产品代币
> 
> 产品令牌用于允许通信应用程序
> 通过软件名称和版本来识别自己。大多数使用
> 产品令牌的字段还允许列出构成应用程序重要部分的子产品，
> 用空格分隔。按照
> 惯例，这些产品是按照它们
> 对识别应用程序的重要性排列的。
> 
> ```
>  product         = token ["/" product-version]
>    product-version = token 
> ```
> 
> 例子：
> 
> ```
>  User-Agent: CERN-LineMode/2.15 libwww/2.17b3
>    Server: Apache/0.8.4 
> ```
> 
> 产品代币应该简短明了。它们不得
> 用于广告或其他非必要信息。尽管任何标记字符都可以出现在产品版本中，但该标记应该
> 只用于版本标识符（即，
> 同一产品的连续版本应该只在产品值的产品版本部分有所不同）。

所以根据 RFC 2616，用户代理的内容取决于浏览器。例如，Mozilla Firefox 是如何构建其用户代理的： [https ://developer.mozilla.org/en-US/docs/Gecko_user_agent_string_reference](https://developer.mozilla.org/en-US/docs/Gecko_user_agent_string_reference)

# json - 从 XML 配置 Jackson Mapper

> ID：15069535
> 
> 赞同：0
> 
> 时间：2013-02-25T14:41:45.543
> 
> 标签：json, jackson, dto

我需要从域对象生成 Json。我无法在域类中添加注释。

使用 Mixin 不是一种选择，因为我必须忽略很多属性。

我的方法是创建一个具有我需要的属性的 DTO 对象。并使用推土机填充 dto，然后使用 jackson 从 dto 生成 Json。看起来太多了。

我想知道是否可以从 xml 配置 Jackson，以便生成具有在 xml 中映射的属性的 json，因此没有必要使用 dto 和 dozer。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T05:38:13.687

不，Jackson 不支持外部配置文件。

但是您没有解释如何或为什么要使用 Dozer 或 DTO。为什么不直接在 a 中添加您关心的属性`Map`，并将其序列化为 JSON？然后你可以使用任何你想构建/修剪的机制`Map`。

Jackson 还可以转换值，因此要使用来自另一个对象的所有内容创建完整的 Map，您可以执行以下操作：

```
Map<String,Object> map = objectMapper.convertValue(someBean, Map.class); 
```

然后也许只保留你想要的属性。

# sinatra - Sinatra 没有从 params 解析数组

> ID：15069537
> 
> 赞同：0
> 
> 时间：2013-02-25T14:41:50.113
> 
> 标签：sinatra, params, padrino

我有一个像这样的隐藏形式：

```
= form_for movie, 'create', method: 'POST' do |f|
  - Movie.attribute_names.each do |attr|
   = f.hidden_field attr.to_sym, value: movie.send(attr)
  = f.submit 'Save this Movie', class: 'button' 
```

其中一些属性是序列化数组，但 padrino 似乎不是从字符串解析数组，因此当我尝试从存储在 params 中的这个 attr 哈希中保存记录时，db 会引发序列化错误：

```
{"title"=>"Iron Man 2",
 "directors"=>"[\"Jon Favreau\"]",
 "cast_members"=>"[\"Robert Downey Jr.\", \"Gwyneth Paltrow\", \"Don Cheadle\", \"Scarlett Johansson\", \"Sam Rockwell\"]",
 "genres"=>"[\"Action\", \"Adventure\", \"Sci-Fi\"]",
 "length"=>"124",
 "trailer_url"=>"http://imdb.com/video/screenplay/vi1172179225/",
 "year"=>"2010",
 "languages"=>"[\"English\", \"French\", \"Russian\"]"} 
```

我可以用这段丑陋的代码来解析数组字符串：

```
Movie.serialized_attributes.keys.each do |k|
  movie[k] = movie[k].gsub(/\"|\[|\]/, '').split(', ') if movie[k]
end 
```

但这似乎很愚蠢，sinatra 应该自动解析它（或者不是？），或者我可能以错误的方式生成表单。**我该如何解决这种行为？**

**注意：**刚刚尝试生成这样的表单：

```
- Movie.attribute_names.each do |attr|
   - if Movie.serialized_attributes.keys.include? attr
     = f.hidden_field attr.to_sym, value: movie.send(attr), multiple: true
   - else
     = f.hidden_field attr.to_sym, value: movie.send(attr) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:00:23.863

我的建议是避免以数组和散列的形式发送数据。您尝试发送的数据可以很容易地作为一个字符串发送，然后在另一侧拆分。例如，为什么不将演员以逗号分隔的字符串形式发送，然后`param["cast_members"].split(/\s*,\s*/)`在收到时发送？某种自动提示将是谨慎的，否则您最终会得到很多拼写错误的名称。*这将通过在发送数据之前*用 slug 替换条目来帮助您进一步分隔数据。看看 StackOverflow 做标记字段的方式。

如果您确实需要作为数组发送，请考虑将其转换为 JSON，然后在另一端发送和反序列化，而不是自己做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:50:38.047

我想尽可能地保持 LOC 和可读性，因此使用 AJAX 解决了这个问题：

```
= link_to 'Save this movie', class: 'button', id: "create_movie_#{movie_id}"
- content_for :scripts do
  :javascript
    $(function(){
      $('#create_movie_#{movie_id}').on('click', function(){
        $.post("/movies/create.json",
        {movie: #{movie.to_json}},
        function(r){
          console.log('Response arrived:')
          console.log(r)
        })
      })
    })

# controller.rb
post :create, provides: [:html, :json] do
  case content_type
  when :json
    Movie.create(params[:movie]).to_json
  when :html
    if @movie = Movie.create(params[:movie])
      render 'movies/show'
    else
      redirect 'movies/fetch', error: 'Something went wrong'
    end
  end
end 
```

# vbscript - 使用 Visual Basic 脚本计算 Word 文档中的形状

> ID：15069538
> 
> 赞同：1
> 
> 时间：2013-02-25T14:41:49.973
> 
> 标签：vbscript, ms-word, ms-office

我想使用此代码使用 word 宏计算某些 word 文档中的所有形状

```
Set objWord = GetObject(, "Word.Application")
objWord.Visible = True

Set objDoc = objWord.Documents.Open("D:\Test.docx")
Set var1 = objWord.ActiveDocument
Set var2 = var1.Shapes
Set var3 = var2.Count 
```

但是执行脚本时出现此错误

“在第 7 行 - 错误：需要对象：var2.Count”

这有什么问题？

# html - 使 td 小于其内容？

> ID：15069541
> 
> 赞同：4
> 
> 时间：2013-02-25T14:42:02.293
> 
> 标签：html, css

有没有办法使用纯 css 使表格单元格小于其内容，并且不改变 DOM？将 td 的宽度设置为小于其子项只会使其与我的子项一样大。我还尝试将 table-layout:fixed 添加到表中，但这没有任何区别。

**HTML：**

```
<table>
<tr>
    <td><div/></td>
    <td class="mycell"><div/></td>
    <td><div/></td>
</tr> 
```

**CSS：**

```
table {
    table-layout:fixed;
}
td {
    border:3px solid black;
}
div {
    border:3px solid red;
    width:50px;
    height:50px;
}
.mycell {
 width:20px; 
```

**jsfiddle：**

[http://jsfiddle.net/clox/EzKNy/](http://jsfiddle.net/clox/EzKNy/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T14:44:11.637

是的，这是可能的。但是您必须改用该值`max-width`。所以上面写着：

```
.mycell {
    max-width: 20px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:45:48.140

如果您将内部 div 位置设为绝对，外部 td 位置设为相对，则内部 div 将脱离正常流程。

[http://jsfiddle.net/EzKNy/2/](http://jsfiddle.net/EzKNy/2/)

```
td {
    border:3px solid black;
    position:relative;
}
div {
    border:3px solid red;
    width:50px;
    height:50px;
    position:absolute;
} 
```

# solr - Lucene - 访问不同字段的令牌过滤器

> ID：15069544
> 
> 赞同：0
> 
> 时间：2013-02-25T14:42:06.963
> 
> 标签：solr, lucene

我正在尝试创建自己的 StopFilter 实现，它将根据其他字段选择术语。

有没有办法从 TokenFilter 访问 Document，然后访问其他字段？

（我正在考虑使用 UpdateRequestProcessor 来通知我的 TokenFilter 状态，但我没有找到好的方法）

谢谢，本尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:53:03.893

令牌过滤器无权访问其他字段。只有它自己。另一方面，UpdateRequestProcessor 可以访问当前文档的所有字段。

为什么不使用 UpdateRequestProcessor 并生成由某个唯一值分隔的令牌。然后，只需使用基本的 Tokenizer 来打破它，你就有了过滤后的值。

# java - org.xml.sax.SAXParseException；行号：17；列号：61；必须为元素类型“property”声明属性“value”

> ID：15069549
> 
> 赞同：2
> 
> 时间：2013-02-25T14:42:38.453
> 
> 标签：java, eclipse, hibernate

```
Caused by: org.hibernate.MappingException: invalid configuration
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2018)
    at org.hibernate.cfg.AnnotationConfiguration.doConfigure(AnnotationConfiguration.java:201)
    at org.hibernate.cfg.AnnotationConfiguration.doConfigure(AnnotationConfiguration.java:46)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1935)
    at org.hibernate.cfg.AnnotationConfiguration.configure(AnnotationConfiguration.java:183)
    at org.hibernate.cfg.AnnotationConfiguration.configure(AnnotationConfiguration.java:46)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1914)
    at org.hibernate.cfg.AnnotationConfiguration.configure(AnnotationConfiguration.java:177)
    at com.isti.client.HibernateUtil.getAnnotationConfiguration(HibernateUtil.java:20)
    at com.isti.client.HibernateUtil.getUser(HibernateUtil.java:75)
    at com.isti.server.GreetingServiceImpl.getUser(GreetingServiceImpl.java:52)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561)
    ... 22 more!
Caused by: org.xml.sax.SAXParseException; lineNumber: 17; columnNumber: 61; Attribute "value" must be declared for element type "property".
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.addDTDDefaultAttrsAndValidate(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.handleStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.emptyElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at org.dom4j.io.SAXReader.read(SAXReader.java:465)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2015)
    ... 37 more 
```

这是我的`hibernate.cfg.xml`

```
<session-factory>

    <property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
    <property name="hibernate.connection.password">root</property>
    <property name="hibernate.connection.url">jdbc:postgresql://localhost:5432/LoginForm</property>
    <property name="hibernate.connection.username">postgres</property>
    <property name="hibernate.default_schema">public</property>
    <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</property>
    <property name="javax.persistence.validation.mode">none</property>
    <property name="show_sql">true</property>
    <property name="hibernate.format_sql" value="true"/>
    <property name="hbm2ddl.auto">create</property>

    <mapping class="com.isti.client.model.User" />

</session-factory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:44:10.720

不

```
<property name="show_sql">true</property>
<property name="hibernate.format_sql" value="true"/> 
```

看起来不一致？特别是缺少该`value`属性看起来不正确。

# iis-7 - MSDeploy - preSync 命令

> ID：15069550
> 
> 赞同：0
> 
> 时间：2013-02-25T14:42:40.937
> 
> 标签：iis-7, msdeploy

在我们的一个网站上，我们有一些通过 html5 观看的视频，如果有人打开了网站（并流式传输视频文件），我们的网络部署将失败，因为它无法删除正在使用的视频文件。

我尝试使用 preSync:RunCommand 属性来停止网站，以便无法流式传输文件，并尝试使用 postSync 命令将其恢复。

但似乎在 preSync 之前尝试删除视频文件，因为我的部署将失败并出现相同的错误（无法删除视频文件）。但是，如果我确保没有下载视频，则该站点已按预期部署并关闭。

PreSync 命令不应该在“同步”部分之前运行吗？

# ios - UITabbarController 委托没有调用？

> ID：15069551
> 
> 赞同：-1
> 
> 时间：2013-02-25T14:42:42.003
> 
> 标签：ios, uitabbarcontroller

您好我正在开发一个`UITabBar`应用程序。

我需要：

1.当我选择一个`TabBAr`项目时，我需要获取当前选择的索引。

2.基于当前索引，我想在`AppDelegate`.

3.所以当我按下标签栏项目时，是否有任何委托方法调用。

4.请建议`AppDelegate`我每次按 Tab Items 时检查的方法

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:46:26.333

快速谷歌后：

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item 
```

确保在 IB 中链接代理...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:52:22.403

是的，您可以使用此委托方法

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {

    NSLog(@"selected index : %i",[tabBarController selectedIndex]);

    } 
```

每当您触摸任何 TabBarItem 时都会调用此方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T07:40:19.057

首先设置委托协议例如 UITabBarControllerDelegate 然后把 self.tabbarcontroller.delegate = self; 在您的 ViewDidLoad 或对象初始化的地方

# java - 在特定的 Swing 组件上设置自定义外观

> ID：15069552
> 
> 赞同：3
> 
> 时间：2013-02-25T14:42:50.450
> 
> 标签：java, swing, look-and-feel, synth

是否可以在 Swing GUI 上设置仅用于特定组件或组件集的 Synth 外观和感觉的文件，而无需为任何其他组件更改它？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-10T12:05:04.703

对的，这是可能的。将类型设置为“区域”将其更改为“名称”，将值设置为由 setName(“componentName”) 给出的特定名称；应用程序中的方法。

添加这个

```
<style id="titleBarButtonsPanel">
    <state>
        <opaque value="false" /><!-- background of the title bar -->

        <insets top="0" left="0" bottom="0" right="0" /><!-- size of the 
            title bar -->

        <color value="red" type="BACKGROUND" />
        <color value="white" type="FOREGROUND" />

    </state>
</style> <bind style="titleBarButtonsPanel" type="name" key="NameOfSpecificComponent" /> 
```

在程序中添加 setName("NameOfSpecificComponent");

# powershell - PowerShell，格式化来自 SQL 的大型 XML 结果

> ID：15069553
> 
> 赞同：0
> 
> 时间：2013-02-25T14:42:55.320
> 
> 标签：powershell

我有一个在 SQL 中执行存储过程的 powershell 脚本，它返回一个大的、单一的 XML 结果。我需要将此 XML 结果保存到文件中。

不幸的是，输出被 PowerShell 破坏，试图让事情看起来很漂亮。

```
 $xmldataset.tables[0] | ft -wrap -hidetableheaders | out-file C:\xml_result.xml 
```

这将使我得到完整的结果，但它会将结果包装在它会在我的屏幕上显示它的位置。这将破坏大多数 XML 解析器。

```
$xmldataset.tables[0] | ft -hidetableheaders | out-file C:\xml_result.xml 
```

这只是任意将我的结果分成两行，截断每一行。

除非我使用 -wrap ，否则它会将结果放入两行，即使它只是从 SQL 返回的一行。

这是完整的代码

```
$SqlCmd.CommandText = "exec dbo.sp_getXML"
$SqlConnection = New-Object System.Data.SqlClient.SqlConnection
$SqlConnection.ConnectionString = "Server = $SqlServer; Database = $SqlCatalog; Integrated Security = True"
$SqlCmd = New-Object System.Data.SqlClient.SqlCommand
$SqlCmd.CommandText = $SqlQuery
$SqlCmd.Connection = $SqlConnection
$SqlAdapter = New-Object System.Data.SqlClient.SqlDataAdapter
$SqlAdapter.SelectCommand = $SqlCmd
$xmlDataSet = New-Object System.Data.DataSet
$SqlAdapter.Fill($xmlDataSet) 
```

我如何才能将 SQL 的输出保存到文件中，最好也保存由 SQL 结果创建的换行符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:30:30.573

这就是最终对我最有效的方法。

```
$xml = ""
for ($i=0; $i -lt $xmldataset.tables[0].rows.count; $i++){
    $xml = $xml+$xmldataset.tables[0].rows[$i][0].ToString()
}
$xml | out-file -filepath C:\Users\mvrydaghs\Documents\test_copy\xml_result.xml 
```

因为它随机地将结果分成多行，所以我需要循环。在循环中直接写入文件仍然会引入不需要和未要求的换行符，因此我不得不使用一个附加变量进行连接，然后将其写入文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:03:37.920

您可以像这样去掉格式：

```
$xmldataset.tables[0] | ft -wrap -hidetableheaders | out-string | out-file C:\xml_result.xml 
```

# jsf - 组件commandButton中没有定义属性更新

> ID：15069556
> 
> 赞同：1
> 
> 时间：2013-02-25T14:43:00.543
> 
> 标签：jsf, jsf-2

我有这个 JSF commandButton，我用它来从表中删除行：

```
<h:commandButton id="deleterow" value="HiddenDelete"  action="#{BatteryProfileTabGeneralController.saveData}" style="display:none" update="growl">
    <f:ajax render="@form" execute="@form"></f:ajax>
</h:commandButton> 
```

在 Netbeans 7.3 中，我收到此错误：

```
The attribute update is not defined in the component commandButton 
```

`update`当我成功删除行时，我使用属性来显示消息。我可以用类似的属性替换这个属性吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T15:03:04.170

该`update`属性特定于 PrimeFaces [`<p:commandButton>`](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/commandButton.html)。它是标准 JSF 等价物的便捷替代品[`<f:ajax render>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/ajax.html)。

因此，基本上，其`<p:commandButton ... update="growl" />`本质上与以下内容相同：

```
<h:commandButton ...>
    <f:ajax render="growl" />
</h:commandButton> 
```

请注意，当`<p:growl id="growl">`不在同一个表单中时，您应该使用绝对客户端 ID 来引用它，也许`<f:ajax render=":growl">`. 如果您还想更新当前表单，请使用`<f:ajax render="@form :growl">`. 这可能是您的情况，因为您目前已经在`render="@form"`询问是否明确更新咆哮，这表明它*实际上*根本没有包含在表单中。

# c++ - VS2012 错误 C1107

> ID：15069559
> 
> 赞同：11
> 
> 时间：2013-02-25T14:43:18.233
> 
> 标签：c++, visual-c++, visual-studio-2012, windows-runtime

我收到以下错误：

```
fatal error C1107: could not find assembly 'platform.winmd': please specify the assembly search path using /AI or by setting the LIBPATH environment variable 
```

重现步骤

0) 创建一个新的空项目

1) C/C++ > 常规 > 使用 Windows 运行时扩展 > 是

2) C/C++ > 代码生成 > 启用最小重建 > 否

3）添加源文件*.cpp，文件可以为空

4) 尝试编译

我尝试手动比较和更改项目设置以匹配某些示例代码中的设置，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T16:02:09.327

我不明白你有什么问题，所以

1.  如果您不想针对 WinRT 进行编码，只需将“Consume ...”设置为 false，问题就会消失
2.  如果你想针对 WinRT 进行编码，你应该执行一个额外的步骤：转到**General**并将**Windows Store App Support**设置为 true

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-23T11:56:12.517

**要创建 C++/CX 桌面应用程序：**

在`C/C++ -> General`项目属性中，设置`Consume Windows Runtime Extension`为是

在同一个选项卡中输入这些以`Additional #using Directories`输入包含`windows.winmd`和`platform.winmd`文件的目录。对我来说，使用 VS2017，即：

> C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\lib\store\references；
> C:\Program Files (x86)\Windows Kits\10\UnionMetadata;
> C:\Program Files (x86)\Windows Kits\10\References\Windows.Foundation.UniversalApiContract\2.0.0.0;
> C:\Program Files (x86)\Windows Kits\10\References\Windows.Foundation.FoundationContract\2.0.0.0

然后调用[RoInitialize](https://docs.microsoft.com/en-us/windows/desktop/api/roapi/nf-roapi-roinitialize)或使用 WinRT 主样式函数（删除有关主线程的警告 C4447）：

```
using namespace Platform;

int main(Array<String^>^ args) .... 
```

* * *

参考：
[在桌面应用程序中使用 C++/CX，从桌面应用程序](http://blogs.microsoft.co.il/pavely/2012/09/29/using-ccx-in-desktop-apps/)调用
[Windows 10 API](https://blogs.windows.com/buildingapps/2017/01/25/calling-windows-10-apis-desktop-application/#4PeY5jWD7Mih3Wgz.97)

# weblogic-10.x - weblogic 10.3.6 问题

> ID：15069561
> 
> 赞同：2
> 
> 时间：2013-02-25T14:43:21.910
> 
> 标签：weblogic-10.x

我已将我的应用程序的 WebLogic 服务器从 10.3.5 升级到 10.3.6，并将 jar 升级到 WebLogic 10.3.6 可用的最新版本。

我已经创建`wlfullclient.jar`并且部署进展顺利。

当我尝试为我的应用程序运行测试用例时，它们失败并出现以下错误：

```
com.sun.xml.ws.util.ServiceConfigurationError:
weblogic.wsee.jaxws.tubeline.TubelineDeploymentListener:

Provider:`weblogic.wsee.wstx.wsat.tube.WSATTubelineDeploymentListener` is specified in jar:

> file:/root/Oracle/Middleware/wlserver_10.3/server/lib/wseeclient.jar!/META-INF/services/weblogic.wsee.jaxws.tubeline.TubelineDeploymentListener

but not found at
- com.sun.xml.ws.util.ServiceFinder.fail(ServiceFinder.java:241)
- com.sun.xml.ws.util.ServiceFinder.access$100(ServiceFinder.java:141)
- com.sun.xml.ws.util.ServiceFinder$LazyIterator.next(ServiceFinder.java:376)
    weblogic.wsee.jaxws.spi.WLSServiceDelegate$WLSTubelineDeploymentListenerRepository.<init>(WLSServiceDelegate.java:355)
- weblogic.wsee.jaxws.spi.WLSServiceDelegate.<init>(WLSServiceDelegate.java:89)
- weblogic.wsee.jaxws.spi.WLSProvider$ServiceDelegate.<init>(WLSProvider.java:632)
- weblogic.wsee.jaxws.spi.WLSProvider.createServiceDelegate(WLSProvider.java:143)
- weblogic.wsee.jaxws.spi.WLSProvider.createServiceDelegate(WLSProvider.java:117)
- weblogic.wsee.jaxws.spi.WLSProvider.createServiceDelegate(WLSProvider.java:88)
- javax.xml.ws.Service.<init>(Service.java:56) 
```

使用 WebLogic 10.3.5 时，测试用例顺利通过。我终于发现在为新版本（WebLogic 10.3.6）创建的`wsee`新文件夹中没有命名文件夹。`wlfullclient`

请帮助我如何解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:34:33.173

网络服务似乎有问题。

这个讨论可能有助于[wsse JAXWS](https://stackoverflow.com/questions/9565299/weblogic-wsee-ws-init-wsdeploymentexception-the-weblogic-server-9-x-style-polic)

# ruby-on-rails - 如何在不创建空模型的情况下创建 rails_admin 导航标签？

> ID：15069563
> 
> 赞同：8
> 
> 时间：2013-02-25T14:43:33.277
> 
> 标签：ruby-on-rails, ruby, navigation, dsl, rails-admin

在 rails admin 中，您可以为模型及其子项定义导航标签，如下所示：

```
# in rails_admin.rb

config.model Order do
  navigation_label 'Orders related'
end

config.model OrderProducts do
  parent Order
end 
```

有没有办法在不创建模型的情况下向导航菜单添加标签（即仅用于分组）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-13T20:59:05.433

根据[wiki](https://github.com/sferik/rails_admin/wiki/Navigation)，您可以将静态链接附加到导航，如下所示：

```
RailsAdmin.config do |config|
  config.navigation_static_links = {
    'Google' => 'http://www.google.com'
  }
end 
```

如果您只是想对它们进行分组，您可以在模块下命名您的模型，然后您将在导航中看到您的模型在模块名称下分组。像这样：http: [//i.imgur.com/kxtgNqx.png](http://i.imgur.com/kxtgNqx.png)

```
RailsAdmin.config do |config|
  config.model 'Spree::Product' do
    ...
  end
end 
```

# wix - 如何在自定义操作中保存数据以在 WIX 中回滚？

> ID：15069564
> 
> 赞同：1
> 
> 时间：2013-02-25T14:43:33.687
> 
> 标签：wix, dtf

有什么方法可以在 Wix 中使用 DTF 在自定义操作中存储回滚数据？在这种情况下，我需要跟踪为正确执行回滚所做的工作，并且我不知道如何将这些信息从安装期间运行的自定义操作传递到回滚时运行的操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:52:38.713

您的成本计算操作可以确定安装和回滚活动是什么，并将其分别传递给延迟、回滚和提交自定义操作。否则，您也可以让您的安装自定义操作写入一个临时文件，然后让您的回滚自定义操作读取它。

# xslt - 在 XSLT 中拆分和连接字符串

> ID：15069565
> 
> 赞同：0
> 
> 时间：2013-02-25T14:43:37.143
> 
> 标签：xslt, xslt-2.0

嗨，我有下面的 XML 行，我还需要一个数字的超链接。我希望这个输出以 HTML 格式显示。

```
<main>
<alph>a b 2,3</alph>
</main> 
```

我想要一个输出如下的 XSLT：

```
a b 2, a b 3 
```

我尝试了以下 XSLT：

```
<xsl:template match="alph">
  <xsl:variable name="link" select="normalize-space(translate(
    normalize-space(current()),abcdefghijklmnopqrstuvwxyz,''))"/>
  <xsl:value-of select="substring-before(normalize-space(.),$link)"/>
  <xsl:variable name="tex">
    <xsl:value-of select="text()"/>
  </xsl:variable>
  <xsl:choose>
    <xsl:when test="contains($link,',')">
      <xsl:variable name="new">
        <xsl:value-of select="tokenize($link,',')"/>
      </xsl:variable>
      <xsl:value-of select="concat($new,$tex)"/>
    </xsl:when>
    <xsl:when test="contains($link,'-')">
      <xsl:value-of select="tokenize($link,'-')"/>
    </xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="$link"/>
    </xsl:otherwise>
  </xsl:choose> 
```

但它给我的输出是：

```
a b 2 3a b 2,3 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:08:24.313

您遇到的一个问题是变量**链接**

```
<xsl:variable name="link" select="normalize-space(translate(
     normalize-space(current()),abcdefghijklmnopqrstuvwxyz,''))"/> 
```

看起来您正在尝试从字符串中删除所有字母字符，以便只剩下**2,3**。但是，要使其正常工作，**abc...xyz**需要用撇号括起来，否则它将寻找一个名为**abc...xyz**的元素。话虽如此，你说你使用的是XSLT2.0，所以你可以在这里使用**replace**函数，它接受一个正则表达式作为参数

```
<xsl:variable name="link" select="normalize-space(replace(current(),'[a-z]',''))"/> 
```

接下来就可以拿到这个**链接**前的文字了，像这样

```
<xsl:variable name="text" select="normalize-space(substring-before(current(), $link))"/> 
```

这会给你你的**腹肌**

最后，您可以使用**tokenize**函数来拆分**2,3**。在您的 XSLT 中，您似乎也在寻找连字符，但 tokenize 函数也使用正则表达式，所以这不是问题。您可以做的只是标记字符串，然后使用**文本**变量作为分隔符重新加入它

```
 <xsl:value-of select="concat($text, ' ')"/>
  <xsl:value-of select="tokenize($link,',|-')" separator="{concat(', ', $text, ' ')}"/> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="text"/>
   <xsl:template match="alph">
      <xsl:variable name="link" select="normalize-space(replace(current(),'[a-z]',''))"/>
      <xsl:variable name="text" select="normalize-space(substring-before(current(), $link))"/>
      <xsl:value-of select="concat($text, ' ')"/>
      <xsl:value-of select="tokenize($link,',|-')" separator="{concat(', ', $text, ' ')}"/>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的 XML 时，将输出以下内容

```
a b 2, a b 3 
```

# php - 无法从 PHP 中的 textarea 获取值

> ID：15069567
> 
> 赞同：0
> 
> 时间：2013-02-25T14:43:44.390
> 
> 标签：php, forms, post, html-parsing

我在获取 PHP 中文本区域的值时遇到问题（未定义）。

我的代码很简单。我的 HTML 是：

```
<form name="contactform" method="POST" action="submit_form.php">    
<input type="text" class="formInput" placeholder="Your Name" id="first_name" maxlength="50" size="20" />
<input type="text" class="formInput" placeholder="Email Address" id="email" maxlength="80" size="20" /> 
<textarea class="formInput" placeholder="Your Message" name="comments" id="comments" maxlength="1400" cols="20" rows="6"></textarea>
<input type="submit" id="SubmitContactForm" class="myButton" value="Submit" />
</form> 
```

我的PHP：

```
echo $_POST['comments']; 
```

`undefined`无论我在 textarea 中写什么，这都会导致. 我在这里搜索了一些解决方案，发现了一些东西，比如添加“name”和“id”并使它们都不同，添加`htmlspecialchars($_POST['comments'])`等等，所有这些解决方案都不起作用。我会记下并说我可以毫无问题地获取其他字段值，只是这个 textarea。

任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:47:02.673

您需要在 textarea name="comments" 中有一个 name 属性

```
<textarea class="formInput" placeholder="Your Message" id="comments" name="comments" maxlength="1400" cols="20" rows="6"></textarea> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:46:15.933

您还没有为您的文本区域定义名称属性。添加：`name="comments"`到它：

```
<textarea class="formInput" name="comments" placeholder="Your Message" id="comments" maxlength="1400" cols="20" rows="6"></textarea> 
```

如果它仍然没有出现，请确保您使用`method="post"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-26T19:21:54.333

首先定义它`$comment=$_POST['comments'];`，然后你可以做你想做的事， **注意：**不要直接使用它，`$_POST['comments'];`因为在某些情况下它会抛出一些错误/通知等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T14:46:45.177

您忘记添加名称属性。你的 html 应该是这样的

```
<textarea name="comments" class="formInput" placeholder="Your Message" id="comments" maxlength="1400" cols="20" rows="6"></textarea> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T14:46:59.210

```
<textarea class="formInput" placeholder="Your Message" id="comments" maxlength="1400" cols="20" rows="6" name="yourtextarea"></textarea> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T14:47:30.667

尝试将此添加到*接收*表单帖子的脚本中：

```
print "POST: " . print_r($_POST, true) . "\n"
   . "GET: " . print_r($_GET, true) . "\n"; 
```

如果“评论”出现在“GET”下，那么你还没有设置表单的 method=post

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-15T04:34:06.633

您可以尝试指定 textarea 的 form 属性。在此设置表单的 id。另一个好处是，这也允许您将 textarea 放在表单之外。来源：[http ://www.w3schools.com/tags/tag_textarea.asp](http://www.w3schools.com/tags/tag_textarea.asp)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-10-26T14:11:28.860

删除您的一些`textarea`课程，例如

```
<textarea name="Address" rows="3" class="input-text full-width" placeholder="Your Address" ></textarea> 
```

至

```
<textarea name="Address" rows="3" class="full-width" placeholder="Your Address" ></textarea> 
```

这取决于您的模板（购买的模板）。开发包括一些 JavaScript 以从 UI 上的正确对象获取价值，但对于像`input-text`find这样的元素`$('input[type=text]')`。

# bash - 使用命令替换和 Bash 实用程序编辑以空格分隔的数据中的一列字符串

> ID：15069573
> 
> 赞同：0
> 
> 时间：2013-02-25T14:44:16.823
> 
> 标签：bash, awk, multiple-columns, edit

我想使用程序基本名称（或其他程序）对空格分隔数据中一列的每个字符串进行更改。具体来说，我有如下形式的数据：

```
string string string /afs/address/user/directory1 string string string string 
```

我想更改数据（第四列中的字符串），使其如下所示：

```
string string string directory1 string string string string 
```

这可以通过在第四列的每一行上使用诸如 basename 之类的程序来实现。我想要的解决方案将包含某种命令替换，以便我可以在编辑列的每一行时使用 basename 以外的其他程序。因此，解决方案中可能会出现如下内容：

```
"$(basename $4)", 
```

其中 $4 表示第 4 列中的一行。我想我知道如何使用低效的代码显式地循环遍历每一行，但我想有一种使用 awk 之类的有效方法会更优雅。你对如何解决这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:47:41.803

```
awk '{sub(/.*\//,"",$4)}1' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:53:39.020

ED 的解决方案应该适合您。

如果您喜欢使用`basename`：

```
awk '{"basename "$4|getline $4}1' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:24:40.497

如果其他列都不包含斜线，则可以`/`用作字段分隔符并打印第一个和最后一个字段：

```
awk -F / '{print $1 $NF}' <<< "string string string /afs/address/user/directory1 string string string string" 
```

输出

```
string string string directory1 string string string string 
```

# javascript - 图片的jquery悬停效果

> ID：15069574
> 
> 赞同：0
> 
> 时间：2013-02-25T14:44:16.410
> 
> 标签：javascript, jquery

这是我的jQuery代码

```
this.imagePreview = function(){ 

    xOffset = 8;
    yOffset = 20;

    $("a.preview").hover(function(e){
        this.t = this.title;
        this.title = "";    
        var c = (this.t != "") ? "<br/>" + this.t : "";
        $("body").append(
            "<p id='preview'><img src='" 
            + this.href 
            + "' alt='Image preview' />" 
            + c 
            + "</p>"
        );                               
        $("#preview")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px")
            .fadeIn("fast");                        
    },
    function(){
        this.title = this.t;    
        $("#preview").remove();
    }); 
    $("a.preview").mousemove(function(e){
        $("#preview")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px");
    });         
};

// starting the script on page load
$(document).ready(function(){
    imagePreview();
}); 
```

这是html代码

```
<a href="1.png" target="_blank" class="preview"><img src="1s.png"></a> 
```

这是CSS代码

```
#preview{
    position: absolute;
    background: #333;
    padding: 5px;
    display: none;
    color: #fff;
} 
```

所有这些都在这个小提琴 [http://jsfiddle.net/56wk9/](http://jsfiddle.net/56wk9/)中 （虽然我找不到适合这个小提琴的图像，但这段代码工作正常）

这段代码做了什么，它在悬停在另一个图像 1s.png 上时显示图像 1.png

但是由于此代码使用要显示为的图像

```
<a href="1.png" target="_blank" class="preview"> 
```

单击基本图像时，它会在新窗口中打开这个放大的图像。相反，我希望打开另一个网站而不是这个放大的图像。当我放置网页链接时，它不显示悬停效果。

所有的帮助都是金。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:49:16.170

在链接中使用数据而不是 href。

例如

```
<a href=""http://www.somesite.com data="image-1s.png"><img ...></a> 
```

然后，而不是使用`this.href`使用数据

```
$("body").append("<p id='preview'><img src='"+ $(this).attr('data') +"' alt='Image preview' /> 
```

[这是更新的小提琴](http://jsfiddle.net/56wk9/1/)

HTML

```
<a href="http://www.google.com" target="_blank" class="preview" data="http://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Bachalpseeflowers.jpg/300px-Bachalpseeflowers.jpg"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/3/36/Hopetoun_falls.jpg/300px-Hopetoun_falls.jpg"></a> 
```

Javascript

```
this.imagePreview = function(){ 

        xOffset = 8;
        yOffset = 20;

    $("a.preview").hover(function(e){
        this.t = this.title;
        this.title = "";    
        var c = (this.t != "") ? "<br/>" + this.t : "";
        $("body").append("<p id='preview'><img src='"+ $(this).attr('data') +"' alt='Image preview' />"+ c +"</p>");                                 
        $("#preview")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px")
            .fadeIn("fast");                        
    },
    function(){
        this.title = this.t;    
        $("#preview").remove();
    }); 
    $("a.preview").mousemove(function(e){
        $("#preview")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px");
    });         
};

// starting the script on page load
$(document).ready(function(){
    imagePreview();
}); 
```

CSS

```
#preview{
    position:absolute;
    background:#333;
    padding:5px;
    display:none;
    color:#fff;
    /*box-shadow: 4px 4px 3px rgba(103, 115, 130, 1);*/
} 
```

# php - 使用 HybridAuth 和 PHP 将视频上传到 Youtube 频道

> ID：15069577
> 
> 赞同：0
> 
> 时间：2013-02-25T14:44:23.917
> 
> 标签：php, youtube-api, hybridauth

我想授予应用程序使用 HybridAuth ( [http://hybridauth.sourceforge.net/](http://hybridauth.sourceforge.net/) ) 和 PHP 将视频发布到我的 youtube 频道的权限。

1.  第一个问题可能吗？
    我已经可以对 facebook、linkedin 和 twitter 进行身份验证和授予权限。我可以将状态发布到这些网络。还没有尝试连接到谷歌，但应该很容易添加，我假设我只需要谷歌身份验证就可以访问 Youtube？

2.  HybridAuth 的哪一部分可以用来上传视频？有没有我可以用来学习的示例应用程序？有人做过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-07T16:47:18.097

您可以使用 HybridAuth 连接到 Google API 并在 Google 中注册您的应用程序/项目（HybridAuth 已经启用连接到 Google，请参阅文档以供参考）并且当您向 Google 注册项目时，您可以开始添加/启用正确的 Google API通过浏览可用的 API 列表项。您将找到一个名为 YouTube Data API v3 的 API，单击它并启用以将状态更改为 ON。

完成后，您在 Google 注册的项目将启用 YouTube API，您必须前往 Credentials 生成您的密钥。

希望它有帮助...

这是一个有用的链接，您可以通过 Google 开始使用 YouTube：

来源：[https ://developers.google.com/youtube/registering_an_application](https://developers.google.com/youtube/registering_an_application)

标题：通过 Google 向 YouTube 注册您的应用程序

转到 Google 开发者控制台。选择一个项目。在左侧边栏中，选择 APIs & auth。在 API 列表中，确保 YouTube 数据 API v3 的状态为开启。在左侧边栏中，选择凭据。API 支持两种类型的凭据。创建适合您项目的凭据：

```
OAuth 2.0: Your application must send an OAuth 2.0 token with any request that accesses private user data. Your application sends a client ID and, possibly, a client secret to obtain a token. You can generate OAuth 2.0 credentials for web applications, service accounts, or installed applications.
Learn more

API keys: A request that does not provide an OAuth 2.0 token must send an API key. The key identifies your project and provides API access, quota, and reports.

If the key type you need does not already exist, create an API key by selecting Create New Key and then selecting the appropriate key type. Then enter the additional data required for that key type. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T14:17:37.580

不，您不能将它与 Youtube 一起使用，但可以与 Vimeo 一起使用。

# php - 在 PHP 中比较服务器上大文件的大小与发布请求中的大小

> ID：15069579
> 
> 赞同：0
> 
> 时间：2013-02-25T14:44:31.740
> 
> 标签：php, apache, http, post, put

我有一个 Apache 服务器，文件在 HTTP 发布请求 ( `<form enctype="multipart/form-data" action="upload.php" method="post">`) 中上传。它有时会发生（非常罕见，但仍然会发生），原因我仍然无法理解，即文件上传后，其在磁盘上的大小将与原始文件的大小不匹配。

我想做的是在从 PHP 脚本返回之前捕获这些错误，该脚本将文件从 /tmp 复制到其最终目的地。我的第一个想法是比较`$_FILES['uploadedfile']['size']`and `filesize($target_path)`，这似乎适用于高达 2GB 的文件。但是，一旦文件大小的字节数超过 32 位，`$_FILES['uploadedfile']['size']`就会溢出并变为负数。此外，我怀疑在上传过程中使用这个值作为“参考文件大小”可能为时已晚（即它是服务器上的文件大小，而不是客户端上的文件大小）。

有可能从中提取文件大小`$_SERVER['CONTENT_LENGTH']`，但该值还包括似乎是请求“元数据”的内容，我找不到有关如何将该数据与实际文件大小分开的文档（“元数据”大小从请求请求）

最简单的方法是要求客户端将源的文件大小作为请求参数发布，但我希望在客户端进行尽可能少的更改。

我还被告知“HTTP PUT”可以首先防止该问题，但我仍处于调查的早期阶段。我仍然想用我当前的 POST 方法找到解决方案。

作为参考，我的上传脚本现在大致如下所示：

```
$id = strtolower($_POST["assetid"]);
$project = strtolower($_POST["project"]);
$target_path = Settings::getAssetPath($project,$id);

if (move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    if (filesize($target_path) != $_FILES['uploadedfile']['size']){
        header("HTTP/1.0 500 Internal Server Error");
        $result .= "Uploaded file size does not match source file size!<br />";
    }
    else {
        header("HTTP/1.0 200 OK");
        $result .= "The file " . basename($_FILES['uploadedfile']['name']) . " has been uploaded successfully.";
    }
} else {
    header("HTTP/1.0 500 Internal Server Error");
    $result .= "There was an error uploading the file, please try again!<br />";
} 
```

任何想法都非常受欢迎！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:48:18.683

您的上传脚本不正确。`['size']`是服务器收到的内容。如果上传因任何原因中止/失败，`['size']` **将**是不正确的。在对上传数据进行任何操作之前，您必须检查上传是否成功：

```
if($_FILES['uploadedfile']['error'] !== UPLOAD_ERR_OK) {
   die("Upload failed with error code " . $_FILES['uploadedfile']['error']);
} 
```

错误代码在这里定义：[http ://www.php.net/manual/en/features.file-upload.errors.php](http://www.php.net/manual/en/features.file-upload.errors.php)

# asp.net - 在单独的类中以编程方式添加控件的 EventHandler

> ID：15069581
> 
> 赞同：0
> 
> 时间：2013-02-25T14:44:32.243
> 
> 标签：asp.net, event-handling

好的，所以我有两节课。一个是带有面板的页面。另一个是我用来生成一组控件的类。例如，我使用“AddNote”类的一个实例来调用一个方法，该方法以编程方式生成一个 TextBox、一些标签、一个按钮等，AddNote 返回并添加到面板中的控件集。

我的控件之一是 DropDownList。我希望更改选择以触发我的 AddNote 类中的方法：

```
public Control[] GetNoteControls()
{

...

accountDropDownList.SelectedIndexChanged += new System.EventHandler(this.accountDropDownList_SelectedIndexChanged);
accountDropDownList.AutoPostBack = true;
...
return controls;
} 
```

还有在我的 AddNote 类中：

```
public void accountDropDownList_SelectedIndexChanged(object sender, EventArgs e){
//Do some stuff
} 
```

在我的页面中：

```
protected void Page_Load(object sender, EventArgs e)
{
...
Control[] controls = AddNote.GetNoteControls();
foreach(Control c in controls){
    PanelControls.Controls.Add(c);
}
...
} 
```

添加了控件，一切顺利。但是 accountDropDownList_SelectedIndexChanged 永远不会被解雇。我怎样才能使用这种方法？

# vb.net - 如何从文本框 vb.net 中删除字符串行

> ID：15069583
> 
> 赞同：0
> 
> 时间：2013-02-25T14:44:35.717
> 
> 标签：vb.net, string

`textbox`我有一个循环，它逐行提取字符串，每次迭代都有多个条件。如果条件为真，我想从中删除该行`textbox`有没有办法从字符串中删除整行？这是我的代码..

```
Dim fileContents As String
    fileContents = txtOCR.Text
    Dim strSet(1000) As String
    Dim a As Integer = 1
    Dim words As String

    MsgBox(fileContents)

    For i = 1 To fileContents.Length
        Dim xx As String = Mid(fileContents, i, 1)

        'parse text line by line
        If xx = Chr(10) Then
            If Mid(fileContents, i - 1, 1) = Chr(13) Then
                strSet(i) = Mid(fileContents, a, (i - a) - 1)

    'count words
                Dim intCount As Integer
                intCount = 1
                For b = 1 To Len(strSet(i))
                    If Mid(strSet(i), b, 1) = " " Then
                        intCount = intCount + 1
                    End If
                Next

        If txtTitle.Text = "" And intCount = 1 Then
                txtTitle.Text = " " & strSet(i)

    ElseIf intCount = 1 Then
                    If strSet(i).Contains("BY") = True Then
                        GoTo lastline

                    ElseIf strSet(i).Contains("by") = True Then
                        GoTo lastline

                    ElseIf strSet(i).Contains("By") = True Then
                        GoTo lastline

                    Else
                        txtTitle.Text = txtTitle.Text + " " & strSet(i)

                    End If

            End If

            a = i

        End If
    Next 
```

当找到关键字“BY”时，是否可以复制下一行字符串？我需要帮助这是我的论文项目..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:10:25.040

试试这个，`t`是`TextBox`：

```
 Dim linesResult As New List(Of String)()
    Dim iNumWords As Integer
    Dim bFound As Boolean

    For iLine As Integer = 0 To t.Lines.Length - 1
        Dim words() As String = t.Lines(iLine).Split(" "c)

        If bFound Then TextBox2.Text &= t.Lines(iLine) & Environment.NewLine()

        iNumWords += words.Length
        bFound = False

        For Each elem As String In words
            If elem.Equals("by", StringComparison.CurrentCultureIgnoreCase) Then
                bFound = True
                Exit For
            End If
        Next

        If Not bFound Then linesResult.Add(t.Lines(iLine))
    Next
    t.Lines = linesResult.ToArray() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:26:47.030

您正在使用许多旧的 VB6 函数，虽然 VB.NET 仍然支持这些函数以实现向后兼容性，但实际上并不推荐用于新开发。最好使用 .NET 框架的特性，这些特性使此类任务变得更加容易。例如：

*   使用`List(Of String)`or`StringBuilder`代替`Dim strSet(1000) As String`
*   使用`MessageBox.Show`代替`MsgBox`
*   使用`String.SubString`代替`Mid`
*   使用`String.Length`代替`Len`
*   使用`ContrlChars`or`Environment.NewLine`代替`Chr(10)`and`Chr(13)`
*   最重要的是，请不要使用`GoTo`

但是，您缺少的最重要的工具是该`String.Split`方法，该方法将一个字符串拆分为一个或多个分隔符上的字符串数组。在这种情况下，您可以在换行字符串上拆分字符串。例如：

```
Dim builder As New StringBuilder()
For Each line As String In fileContents.Split(New String() {Environment.NewLine}, StringSplitOptions.None)
    If Not line.ToLower().Contains("by") Then
        builder.AppendLine(line)
    End If
Next
txtOCR.Text = builder.ToString() 
```

或者，您可以使用`StringReader`该类，这取决于您的偏好和风格，可能更容易遵循：

```
Dim builder As New StringBuilder()
Dim reader As New StringReader(txtOCR.Text)
While True
    Dim line As String = reader.ReadLine()
    If line Is Nothing Then Exit While
    If Not line.ToLower().Contains("by") Then
        builder.AppendLine(line)
    End If
End While
txtOCR.Text = builder.ToString() 
```

或者，如果你想证明你有多聪明，你可以使用 LINQ 扩展方法在一行中完成整个事情：

```
txtOCR.Text = String.Join(Environment.NewLine, fileContents.Split(New String() {Environment.NewLine}, StringSplitOptions.None).Where(Function(x) Not x.ToLower().Contains("by"))) 
```

但是，如果逻辑是拼写出来的，而不是像那样全部挤在一起，有时代码更容易阅读:)

**更新**

这是一种获取所有“by”行以及紧随其后的行的方法：

```
Dim builder As New StringBuilder()
Dim reader As New StringReader(txtOCR.Text)
While True
    Dim line As String = reader.ReadLine()
    If line Is Nothing Then Exit While
    If line.ToLower().Contains("by") Then
        builder.AppendLine(line)
        builder.AppendLine(reader.ReadLine())
    End If
End While
txtOCR.Text = builder.ToString() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:50:36.577

我不会详细介绍，但通过检测“\n”，我认为您应该能够完成这项工作。你试过吗？

# java - 当filtertext为空时展开Jface FilteredTree上的所有项目

> ID：15069584
> 
> 赞同：0
> 
> 时间：2013-02-25T14:44:39.453
> 
> 标签：java, eclipse, swt, jface

我有点迷茫，有以下问题。我正在使用一个扩展“org.eclipse.dialogs.FilterTree”的类。当 filtertext 为空时，树中的每个节点都会折叠。但是在这种情况下，我想扩展树。

有人可以给个提示吗？最好的方法是什么？到目前为止，我已经覆盖了各种方法，但没有成功。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:07:28.850

您可以使用展开所有树`TreeViewer#expandAll()`

> **编辑1：**
> 
> 过滤器文本控件的`FilteredTree`每次更改都会刷新树，但会有一些延迟（默认为 200 毫秒）。因此，在文本控件上添加一个修改侦听器以扩展所有树，此时会显示一组不同的项目（可能没有），稍后刷新作业将使用自己的规则覆盖状态。因此，要么我们需要覆盖`doCreateRefreshJob()`以在空字符串的情况下展开所有树，要么覆盖`updateToolbar(boolean)`总是在刷新作业结束时调用。这是我尝试过的，它奏效了：

```
FilteredTree ft = new FilteredTree(composite, SWT.FULL_SELECTION, p, true) {
    @Override
    protected void updateToolbar(boolean visible) {
        super.updateToolbar(visible);
        treeViewer.expandAll();
    }
}; 
```

# javascript - 有没有办法加入 js 数组中的元素，但让最后一个分隔符不同？

> ID：15069587
> 
> 赞同：66
> 
> 时间：2013-02-25T14:44:51.953
> 
> 标签：javascript

我想要的是类似的东西`Array.join(separator)`，但它需要第二个参数`Array.join(separator, beforeLastElement)`，所以当我说`[foo, bar, baz].join(", ", " or")`我会得到时`"foo, bar or baz"`。我想我可以编写一个用于`Array.slice`分离最后一个元素的函数，但是有没有一些我可以使用的众所周知的方法呢？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-02-25T14:47:33.813

没有预定义的函数，因为它非常简单。

```
var a = ['a', 'b', 'c'];
var str = a.slice(0, -1).join(',')+' or '+a.slice(-1); 
```

这种函数的主要用例也存在规范问题，即自然语言格式化。例如，如果我们使用牛津逗号逻辑，我们将得到与您正在寻找的结果不同的结果：

```
// make a list in the Oxford comma style (eg "a, b, c, and d")
// Examples with conjunction "and":
// ["a"] -> "a"
// ["a", "b"] -> "a and b"
// ["a", "b", "c"] -> "a, b, and c"
exports.oxford = function(arr, conjunction, ifempty){
    let l = arr.length;
    if (!l) return ifempty;
    if (l<2) return arr[0];
    if (l<3) return arr.join(` ${conjunction} `);
    arr = arr.slice();
    arr[l-1] = `${conjunction} ${arr[l-1]}`;
    return arr.join(", ");
} 
```

所以把这个问题放在用户态似乎更好。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2018-03-14T23:07:59.590

我可以建议：

```
['tom', 'dick', 'harry'].join(', ').replace(/, ([^,]*)$/, ' and $1')
> "tom, dick and harry" 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2020-03-12T09:26:33.807

使用 reduce 的在线解决方案：

```
[1, 2, 3, 4, 5].reduce((text, value, i, array) => text + (i < array.length - 1 ? ', ' : ' or ') + value);

=> "1, 2, 3, 4 or 5" 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-02-25T14:47:16.497

不，这足够具体，您必须编写自定义函数。正如您所说，好消息是，一旦您使用`Array.join`了所有分隔符，最后一个分隔符将很容易更新。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2015-03-24T13:43:19.523

以@dystroy 的回答为基础：

```
function formatArray(arr){
    var outStr = "";
    if (arr.length === 1) {
        outStr = arr[0];
    } else if (arr.length === 2) {
        //joins all with "and" but no commas
        //example: "bob and sam"
        outStr = arr.join(' and ');
    } else if (arr.length > 2) {
        //joins all with commas, but last one gets ", and" (oxford comma!)
        //example: "bob, joe, and sam"
        outStr = arr.slice(0, -1).join(', ') + ', and ' + arr.slice(-1);
    }
    return outStr;
} 
```

示例用法：

```
formatArray([]);                //""
formatArray(["a"]);             //"a"
formatArray(["a","b"]);         //"a and b"
formatArray(["a","b","c"]);     //"a, b, and c"
formatArray(["a","b","c","d"]); //"a, b, c, and d" 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2021-09-02T14:44:48.543

**2021年更新答案！**

如果目标是在倒数第二个和最后一个元素（例如“and”或“or”）之间使用不同的分隔符，则可以使用[Intl.ListFormat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/ListFormat)

它正是这样做的，你可以免费获得 i18n。

除 IE11 外，所有主流浏览器都支持它。

例子：

```
const vehicles = ['Motorcycle', 'Bus', 'Car'];

const formatter = new Intl.ListFormat('en', { style: 'long', type: 'conjunction' });
console.log(formatter.format(vehicles));
// expected output: "Motorcycle, Bus, and Car"

const formatter2 = new Intl.ListFormat('de', { style: 'short', type: 'disjunction' });
console.log(formatter2.format(vehicles));
// expected output: "Motorcycle, Bus oder Car"
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-01-07T11:37:49.173

功能版本：

```
/* 
 * @param {Array.<string>} arr data array
 * @param {string} s1 regular separator
 * @param {string} s2 last separator
 */
function customJoin(arr, s1, s2) {
  return arr.slice(0,-1).join(s1).concat(arr.length > 1 ? s2 : '', arr.slice(-1));
} 
```

```
function customJoin(arr, s1, s2) {
  return arr.slice(0, -1).join(s1).concat(arr.length > 1 ? s2 : '', arr.slice(-1));
}

const arr1 = ['a','b','c','d'];
const arr2 = ['singleToken'];

console.log(customJoin(arr1, ',', ' and '));        // 'a,b,c and d'
console.log(customJoin(arr1, '::', ' and then::')); // 'a::b::c and then::d'
console.log(customJoin(arr2, ',', 'and '));         // 'singleToken'
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-11-30T19:25:02.377

```
Array.prototype.join2 = function(all, last) {
    var arr = this.slice();                   //make a copy so we don't mess with the original
    var lastItem = arr.splice(-1);            //strip out the last element
    arr = arr.length ? [arr.join(all)] : [];  //make an array with the non-last elements joined with our 'all' string, or make an empty array
    arr.push(lastItem);                       //add last item back so we should have ["some string with first stuff split by 'all'", last item]; or we'll just have [lastItem] if there was only one item, or we'll have [] if there was nothing in the original array
    return arr.join(last);                    //now we join the array with 'last'
}

> [1,2,3,4].join2(', ', ' and ');
>> "1, 2, 3 and 4" 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-11-16T12:55:36.813

有一个包[连接数组](https://www.npmjs.com/package/join-array)

```
const join = require('join-array');
const names = ['Rachel','Taylor','Julia','Robert','Jasmine','Lily','Madison'];
const config = {
  array: names,
  separator: ', ',
  last: ' and ',
  max: 4,
  maxMessage:(missed)=>`(${missed} more...)`
};
const list = join(config); //Rachel, Taylor, Julia, (3 more...) and Madison 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-04-16T08:14:17.333

对我来说，最简单的解决方案是：

```
['1', '2', '3'].reduce((previous, current, index, array) => {
    if (index === array.length - 1) {
        return previous + ' & ' + current;
    } else {
        return previous + ', ' + current;
    }
}) 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-07-05T13:57:05.600

虽然它的答案较晚，但添加了一些方法。

**方法 1**：使用 Array.splice() 添加`last delimiter`最后一个元素并加入和删除最后两个`,`。

```
function join(arr,last)
{
    if(!Array.isArray(arr)) throw "Passed value is not of array type.";
    last = last || ' and '; //set 'and' as default

    (arr.length>1 && arr.splice(-1,0,last));
    arr = arr.join().split("");
    arr[arr.lastIndexOf(",")]="";
    arr[arr.lastIndexOf(",")]="";
    return arr.join("");
}

console.log( join([1]) ); //single valued array
console.log( join([1,2]) ); //double valued array
console.log( join([1,2,3]) ); //more than 2 values array,
console.log( join([1,2,3],' or ') ); //with custom last delimiter
console.log( join("name") ); //Non-array type
```

**方法二**：使用 Array.reduce() 通过遍历每个元素来构造字符串。

```
function join(arr,last)
{
    if(!Array.isArray(arr)) throw "Passed value is not of array type.";
    last=last||' and ';

    return arr.reduce(function(acc,value,index){
        if(arr.length<2) return arr.join();
        return acc + (index>=arr.length-2 ? index>arr.length-2 ? value : value+last : value+",");
    },"");
}

console.log( join([1]) ); //single valued array
console.log( join([1,2]) ); //double valued array
console.log( join([1,2,3]) ); //more than 2 values array,
console.log( join([1,2,3,4],' or ') ); //with custom last delimiter
console.log( join("name") ); //Non-array type
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-09-20T15:15:30.450

使用解构的解决方案：

```
const { log } = console;

const formatList = list => {
    const [last = "", ...rest] = [...list].reverse();
    return rest.length
       ? [last, rest.reverse().join(", ")].reverse().join(" and ")
       : last;
};

log(formatList([1, 2, 3, 4]));
log(formatList(["Me", "Myself", "I"]));
log(formatList(["", ""]));
log(formatList([42]));
log(formatList([]));
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-03-02T22:15:30.460

```
function getValuesfromArray(strArray) {
  let endString = "";

  if (strArray.length > 1) {
    const lastEntry = strArray.pop();
    endString = strArray.join(", ") + " or " + lastEntry;
  }
  else {
    endString = strArray.toString();
  }

  return endString;
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-03-30T19:18:44.363

非空数组的单行

```
arr.reduce((res, k, i) => [res, k].join(i  === arr.length - 1 ? ' or ' : ', ')) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-06-20T12:30:57.697

[Denys Séguret 的牛津风格 join](https://stackoverflow.com/a/15069646/11347983)，但没有最后一个逗号：

```
function readableJoin(arr, conjunction = 'and', ifEmpty = '') {
  const length = arr.length;

  switch (length) {
    case 0:
      return ifEmpty;
    case 1:
      return arr[0];
    case 2:
      return arr.join(` ${conjunction} `);
    default:
      const arrCopy = arr.slice(0, -2);
      arrCopy.push(`${arr[length - 2]} ${conjunction} ${arr[length - 1]}`);
      return arrCopy.join(', ');
  }
}

readableJoin(['one', 'two', 'three']); // 'one, two and three' 
```

# c# - 在枚举参数中使用破折号 (-) 字符

> ID：15069588
> 
> 赞同：13
> 
> 时间：2013-02-25T14:45:04.523
> 
> 标签：c#, json, serialization, deserialization, json.net

```
public enum TimeFormat
{ 
        @12-hour,
        @24-hour
} 
```

你好，

我使用 newtonsoft 反序列化器将 json 字符串反序列化为对象。

JsonDeserializer 检查枚举参数名称。如果它与json字符串相同。它将字符串转换为枚举。

我可以在枚举中使用破折号、减号 (-) 字符作为枚举参数吗？我尝试如上使用，但我无法编译项目。

然后我尝试了这个。

```
[JsonConverter(typeof(Newtonsoft.Json.Converters.StringEnumConverter))]
public enum TimeFormat
{
    [JsonProperty("12-hour")]
    hour12,
    [JsonProperty("24-hour")]
    hour24,

} 
```

反序列化器无法反序列化 json 字符串。

错误：未找到请求的值“12 小时”

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T17:34:20.287

我解决了问题。

```
[JsonConverter(typeof(Newtonsoft.Json.Converters.StringEnumConverter))]    
public enum TimeFormat
{
    [System.Runtime.Serialization.EnumMember(Value = "12-hour")]
    hour12,
    [System.Runtime.Serialization.EnumMember(Value = "24-hour")]
    hour24,

} 
```

`StringEnumConverter`检查[`EnumMemberAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.enummemberattribute.aspx)。

# c# - SuperWebSocket ClearIdleSessionInterval vs IdleSessionTimeout

> ID：15069589
> 
> 赞同：1
> 
> 时间：2013-02-25T14:45:07.893
> 
> 标签：c#, .net, websocket

所以我不确定我是否理解这些与 SuberWebSocket 中的配置选项之间的区别。ClearIdleSessionInterval 只是 superwebsocket 检查超时会话的频率还是什么的一个选项？如果我设置 ClearIdleSession = false 会让我的会话永远存在（假设它们没有被强制关闭），那么 ClearIdleSessionInterval 或 IdleSessionTimeout 设置为什么？

感谢任何人提供的任何见解或帮助，因为谷歌搜索和检查文档并没有给我任何东西。

只有 SuperWebSockets 主页上的文档：

```
clearIdleSession: true or false, whether clear idle sessions. Default value is false.

clearIdleSessionInterval: the clearing timeout idle session interval. Default value is 120, in seconds.

idleSessionTimeOut: The session timeout period. Default value is 300, in seconds. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T22:12:48.920

我们必须使用`clearidlesession`with `idlesessiontimeout`。如果我们不同时使用两者，即使会话不是空闲的，它也会清除会话。因此，如果要清除空闲会话，请确保同时使用两者。

我也面临同样的问题并清除了活动会话。

例子：

```
IdleSessionTimeOut = 35,
ClearIdleSession = true,
ClearIdleSessionInterval = 35 
```

谢谢，维纳

# python - 如何在 Python 中计算年月差？

> ID：15069593
> 
> 赞同：0
> 
> 时间：2013-02-25T14:45:23.587
> 
> 标签：python, python-2.7, datediff

我有一个脚本可以从 datetime 获取日期，以及从 whois 服务获取日期：

```
import time
from datetime import datetime
import whois
#date
url='testurl.com'
now = datetime.now()
date1 = datetime.strftime(nowstr,'%Y-%m')
#whois
domain = whois.whois(url)
datestr = domain.creation_date
date2 = datetime.strftime(datestr, '%Y-%m') 
```

当我计算差异时：

```
diff = datetime.strptime(date1,'%Y-%m') - datetime.strptime(date2,'%Y-%m')
print diff 
```

它给了我这样的输出：

```
5451 days, 0:00:00 
```

如何获得年和月格式的输出（在我的情况下，14y 11m）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:50:16.123

看看[这个帖子](https://stackoverflow.com/questions/765797/python-timedelta-in-years)。我相信它回答了你的问题。它显示了使用标准和非标准 python 库。

# java - 检查空变量时出现空指针异常错误

> ID：15069594
> 
> 赞同：1
> 
> 时间：2013-02-25T14:45:24.787
> 
> 标签：java, jsp, jakarta-ee

```
<%@page import="java.sql.*"%>
<%@page import="java.util.*"%>
<%@page import="java.lang.*"%>

<%
String fname=request.getParameter("firstname");
String lname=request.getParameter("lastname");
String bday=request.getParameter("birthday");
String user="";
user = request.getParameter("username");
String pass="";
pass = request.getParameter("password");

try {
if(user.isEmpty() && pass.isEmpty()){
Class.forName("com.mysql.jdbc.Driver");
Connection conn = DriverManager.getConnection("jdbc:mysql://localhost/mydb", "root", "user");

String sql = "Insert into users (firstname, lastname, username, password) values('"+fname+"', '"+lname+"', '"+user+"', '"+pass+"')";
Statement stmt = conn.createStatement();

stmt.execute(sql);

conn.close();
response.sendRedirect("profile.jsp");
}

} catch (ClassNotFoundException e) {
e.printStackTrace();
} catch (SQLException e) {
e.printStackTrace();
}   
%>

<html>
<body>
<form method="post">
First Name:
<input type="text" name="firstname"/>
<br>
Last Name:
<input type = "text" name="lastname"/>
<br>
Birthdate:
Day: <select name="day">
<%
for(int x=1;x<32;x++){
%>
<option value= <% out.println(x); %> ><% out.println(x); %></option>
<%
}
%>
</select>
Month: <select name="month">
<%
for(int y=1;y<13;y++){
%>
<option value= <% out.println(y); %> ><% out.println(y); %></option>
<%
}
%>
</select>
Year: <select name="year">
<%
for(int z=1985;z<2030;z++){
%>
<option value= <% out.println(z); %> ><% out.println(z); %></option>
<%
}
%>
</select>
<br>
Username:
<input type="text" name="username"/>
<br>
Password:
<input type="password" name = "password"/>
<br>
<input type="submit" value="Register"/>
</form>
</body>
</html> 
```

我得到错误：

HTTP 状态 500 -

类型异常报告

信息

描述服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

org.apache.jasper.JasperException：java.lang.NullPointerException 根本原因

java.lang.NullPointerException

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T14:48:48.463

撇开[Bobby Tables 问题](http://xkcd.com/327/)不谈，您需要`null`在调用方法之前检查您的变量：

```
if(user != null && !user.isEmpty() && pass != null && !pass.isEmpty()){
} 
```

但在此代码投入生产之前，您应该自己解决[SQL 注入问题](http://en.wikipedia.org/wiki/SQL_injection)。否则，您的数据库将面临被隔壁的“脚本小子”消灭的严重风险。使您的 SQL 语句参数化，并将值绑定到它，而不是将值嵌入到语句中。

```
String sql = "Insert into users (firstname, lastname, username, password) values(?,?,?,?)";
// Bind values to 
```

最后，您似乎计划将密码存储在数据库中。不要这样做，即使在您不打算部署到 Internet 的玩具数据库中也是如此。这是您可以对您的客户（甚至是内部客户）做的最糟糕的事情。阅读[此答案](https://stackoverflow.com/questions/1054022/best-way-to-store-password-in-database)以解决此问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T14:47:12.743

你不检查`user`是空的。您假设它不为空，然后检查它是否为空。在检查它是否为空之前，您需要检查是否为空。

也许[Apache Commons StringUtils.isBlank()](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#isBlank%28java.lang.String%29)可能对简洁/可靠性有用？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T14:48:38.747

尝试更换

```
if(user.isEmpty() && pass.isEmpty()){ 
```

和

```
if((user != null && pass != null) && (user.isEmpty() && pass.isEmpty())) { 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T14:53:23.517

您正在分配一个空字符串，然后立即用 request.getParameter 中的新值替换它。这将覆盖您的初始化值，因此如果参数为空，您将获得用户的空值并通过。然后，如果您在 null String 对象上调用 isEmpty，您将获得 NullPointerException

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T14:51:37.813

尝试使用 isNullOrEmpty() 代替 isEmpty()

# database - Liquibase：如何导出自上次导入以来的更改？

> ID：15069604
> 
> 赞同：0
> 
> 时间：2013-02-25T14:45:50.630
> 
> 标签：database, liquibase

我正在使用 Liquibase 2.0.5。我有以下过程：

1.  将 Liquibase 更改导出到 XML 文件。
2.  登录到数据库并运行一些 db 命令（例如`ALTER TABLE ...`）
3.  将步骤 2 中所做的更改导出为 Liquibase 变更集。

我的问题是，我该怎么做第 3 步？我使用以下脚本执行步骤 1 ...

```
/opt/liquibase/liquibase --driver=com.mysql.jdbc.Driver \
  --classpath=~/.m2/repository//mysql/mysql-connector-java/5.1.15/mysql-connector-java-5.1.15.jar \
  --changeLogFile=~/db.changelog.xml \
  --url="jdbc:mysql://localhost:3306/db" \
  --username=user \
  --password=pass \
  generateChangeLog 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T15:04:30.370

你根本不应该做“手动”`ALTER TABLE`陈述。使用 Liquibase 后，***所有***架构更改都应通过它。做手动`ALTER`语句完全违背了 Liquibase 的目的。

如果你真的，真的无法避免绕过 Liquibase，那么使用`diff`or`diffChangeLog`命令查看增量（[http://www.liquibase.org/manual/command_line](http://www.liquibase.org/manual/command_line)）

如果您发现自己经常这样做，您应该重新考虑为什么以及如何使用 Liqubiase。

# android - 应用程序在中国和塞尔维亚不可用

> ID：15069607
> 
> 赞同：-1
> 
> 时间：2013-02-25T14:46:03.937
> 
> 标签：android, google-play

昨天我发布了我的第一个 Android 应用程序，一切都很好，除了我的应用程序在中国和塞尔维亚不可见，我去了我的开发者控制台，我看到中国和塞尔维亚交叉我试图检查它们以使应用程序在那些国家，但它不起作用。我向谷歌寻求支持，到目前为止没有答案。至少在塞尔维亚提供它对我来说非常重要，因为我在那里有很多朋友，所以我可以增加下载量。你知道我该如何解决这个问题吗？应用程序是免费的

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:00:15.237

如果您希望塞尔维亚和中国之间的一个国家可用，您必须取消它的旗帜，因为主要旗帜上写着：“世界其他地区，除了：”

# vim - 如何通过在vi中指定行号来复制

> ID：15069613
> 
> 赞同：41
> 
> 时间：2013-02-25T14:46:20.217
> 
> 标签：vim, vi

如何通过在 vi 中指定行号来复制，例如第 364-757 行？我试图搜索这个但找不到这样的命令。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-25T15:02:18.333

将这些行拉到寄存器中：

**`:364,757y``Enter`**

如果您想复制这些行并粘贴到某个特定行，**`t`**是您的朋友。例如：

**`:364,757t2``Enter`** 将这些行复制到**第二行之下**。

如果您想将它们复制到**当前行的正下方**：

**`:364,757t.``Enter`**

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-02-25T14:49:14.420

`:364,757y`应该可以正常工作，但是做类似的事情可能更常见 `364GV757Gy`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-25T14:50:37.853

您可以通过键入从第 364 行拉（用 vim 术语复制）到第 757 行

```
:364,757y<enter> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-01-01T23:47:16.557

不确定是否需要我的回答

但是您可以通过以下方式拉出一个行号

:123 岁

# javascript - 仅在 IE8 中未定义的 Json 对象属性

> ID：15069615
> 
> 赞同：0
> 
> 时间：2013-02-25T14:46:24.483
> 
> 标签：javascript, arrays, json, internet-explorer

我正在尝试遍历此数组以在地图上固定，在每个浏览器中它似乎都可以正常工作，但在 IE8 中我收到错误“SCRIPT5007：无法获取属性'top'的值：对象为空或未定义”如果我将 top 更改为其他内容或将其删除，IE 只会对 left 或 name 等说同样的话。如果有人有任何建议，他们将不胜感激。

```
jQuery(document).ready(function(){
    var pins =  [
            { "name":"Mexico", "top":"154" , "left":"176", "imageFile":"Mexico.jpg", "soundMP3File":"Mexico_GMartinez_1.mp3", "soundOGGFile":"Mexico_GMartinez_1.ogg"},
            { "name":"Chile", "top":"261" , "left":"246", "imageFile":"Chile.jpg", "soundMP3File":"Chile_MVelasquez_1.mp3", "soundOGGFile":"Chile_MVelasquez_1.ogg"},
            { "name":"Trinidad and Tobago", "top":"182" , "left":"242", "imageFile":"TrinidadTobago.jpg", "soundMP3File":"Trinidad-Tobago_SHarris_1.mp3", "soundOGGFile":"Trinidad-Tobago_SHarris_1.ogg"},
            { "name":"Columbia", "top":"209" , "left":"227", "imageFile":"Columbia.jpg", "soundMP3File":"Colombia_JGordon_2.mp3", "soundOGGFile":"Colombia_JGordon_2.ogg"},
            { "name":"Canada", "top":"86" , "left":"208", "imageFile":"Canada.jpg", "soundMP3File":"Canada_KBretzer_1.mp3", "soundOGGFile":"Canada_KBretzer_1.ogg"},            
            ];

for(var i = 0; i < pins.length; i++)
    {
        jQuery('#map #pins-container').append('<a href="#" class="pin" style="top: ' + pins[i].top + 'px; left:' + pins[i].left + 'px;" pinindex="' + i + '" name="' + pins[i].name + '"></a>');
    }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:06:47.217

@Guffa 是对的。'Canada' 行的尾随逗号无效。

IE 是唯一会抱怨它的浏览器，但它在技术上到处都是无效的。

为了避免此类问题，您应该使用[JSHint](http://www.jshint.com/)之类的工具，该工具将验证您的 Javascript 代码以编码常见错误，包括尾随逗号错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:46:34.547

在**IE**中，如果在最后一个**JSON 对象后加逗号，则在****IE6、IE7、IE8**中会出现错误。

 ****所以，当你编写 Javascript、JSON 时，永远记住这一点****

# php - 在 php echo 函数中包含带有 ID 的 Div

> ID：15069618
> 
> 赞同：1
> 
> 时间：2013-02-25T14:46:29.903
> 
> 标签：php, html, echo

好的，这是代码。

```
$c_time = mktime();
$open = strtotime('Today 5pm');
$close = strtotime('Today 7pm');

if ($c_time > $open && $c_time < $close) {
echo ' THIS IS WHERE I WANT TO ADD DIVs';
}
     else {
         echo 'DISPLAY THIS CODE.';
}

?> 
```

这就是我的工作代码，它基本上说明如果时间在下午 5 点到晚上 7 点之间，则显示第一组代码，如果不显示 Else 标签中的内容....

但是，我想将以下 php/html 包含在我在某处读过的 echo 标记中，您需要将 ' 替换为 \' 但无法实现它。

```
<div id="animated-head-link"><a href="<?php echo esc_url( home_url( '/' ) ); ?>" title="Return to <?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>' Homepage." rel="home">
        <div id="sky">
            <div id="logo">         </div><!-- END LOGO -->
            <div id="clouds">       </div><!-- END CLOUDS -->
            <div id="mountains">    </div><!-- END MOUNTAINS -->
        </div><!-- END SKY -->
</a> </div><!-- END ANIMATED-HEAD-LINK --> 
```

这段代码本身也可以正常工作，但在回显时不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:49:19.557

最简单和最易读的方法是使用替代语法：

```
<?php

$c_time = mktime();
$open = strtotime('Today 5pm');
$close = strtotime('Today 7pm');
?>

<?php if ($c_time > $open && $c_time < $close): ?> 

  <div id="animated-head-link">
    <a href="<?php echo esc_url( home_url( '/' ) ); ?>" title="Return to  <?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>' Homepage." rel="home">

        <div id="sky">

            <div id="logo">         </div><!-- END LOGO -->

            <div id="clouds">       </div><!-- END CLOUDS -->

            <div id="mountains">    </div><!-- END MOUNTAINS -->

        </div><!-- END SKY -->

    </a> 
  </div><!-- END ANIMATED-HEAD-LINK -->

<?php else: ?>
  DISPLAY THIS CODE.
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:57:37.637

问题是您正在回显 html，而 html 内部有 PHP 标记。由于您从 php 中回显代码，因此您需要删除内部 php 标记并使用点来连接字符串：

```
echo '<div id="animated-head-link"><a href="'
. esc_url( home_url( '/' ) ) 
. '" title="Return to '
. esc_attr( get_bloginfo( 'name', 'display' ) )
. ' Homepage." rel="home">

    <div id="sky">

        <div id="logo">         </div><!-- END LOGO -->

        <div id="clouds">       </div><!-- END CLOUDS -->

        <div id="mountains">    </div><!-- END MOUNTAINS -->

    </div><!-- END SKY -->

</a> </div><!-- END ANIMATED-HEAD-LINK -->'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:07:08.900

不要担心你不能使用简单的引号来跳过双引号的限制 PD：将函数更改`mktime()`为`time()` 代码看起来会这样

```
enter code here
<?php 
$c_time = time();
$open = strtotime('Today 5pm');
$close = strtotime('Today 7pm');
if ($c_time > $open && $c_time < $close) {
echo '
<div id="animated-head-link"><a href="'.esc_url( home_url( '/' ) ).'" title="Return to '.esc_attr( get_bloginfo( 'name', 'display' ) ).' Homepage." rel="home">

    <div id="sky">

        <div id="logo">         </div><!-- END LOGO -->

        <div id="clouds">       </div><!-- END CLOUDS -->

        <div id="mountains">    </div><!-- END MOUNTAINS -->

    </div><!-- END SKY -->
</a> </div> <!-- END ANIMATED-HEAD-LINK -->
';}else {
echo 'DISPLAY THIS CODE.';
}?> 
```

# javascript - 我需要 ($("#flip").click slideToggle ) 在同一页面上执行多次相同的 ID

> ID：15069625
> 
> 赞同：1
> 
> 时间：2013-02-25T14:46:47.133
> 
> 标签：javascript, jquery

我有一个使用 XSl 代码从 XML 读取的常见问题解答页面，问题和答案的 div 将与 XML 中的记录数一样重复。

这是 XSL 代码：

```
<xsl:for-each select ="TSPRoot/FAQS/FAQ">
<div id="flip">
<xsl:value-of select ="Question"/>
</div>
<div id="panel">
<xsl:value-of  select ="Answer" disable-output-escaping ="yes"/>
</div>
</xsl:for-each > 
```

在我的脑海中，我有这个 JQuery 代码：

```
<script>
$(document).ready(function(){
    $("#flip").click(function(event){
        event.preventDefault();
        $("#panel").slideToggle("slow");
    });
});
</script> 
```

slideToggle 仅适用于第一个 div，然后它不起作用。

我想不出任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:48:39.850

HTML 101：ID 是单数的，您不能拥有多个具有相同 ID 的项目！

使用类！使用下一个（）

**HTML：**

```
<div class="question">XXX</div>
<div class="answer">YYY</div>
<div class="question">XXX</div>
<div class="answer">YYY</div>
<div class="question">XXX</div>
<div class="answer">YYY</div> 
```

**JavaScript：**

```
$(document).on("click",".question", function(){
     $(this).next().toggle();   
}); 
```

**例子**

[http://jsfiddle.net/8xvTM/1/](http://jsfiddle.net/8xvTM/1/)

# jquery - 如何在jquery中获取动态下拉列表的选定文本

> ID：15069626
> 
> 赞同：0
> 
> 时间：2013-02-25T14:46:55.113
> 
> 标签：jquery, drop-down-menu

我可以使用以下代码获取动态下拉列表的选定值

```
 $("span[id*="+ orgId +"]")[0].innerHTML=$("'input[id$=" + comanyDropDown+ "]:'selected").val(); 
```

我想要检索我使用的选定文本

$("span[id*="+ orgId +"]")[0].innerHTML=$("'input[id$=" + comanyDropDown+ "]:'selected").text();

但它会检索下拉列表的所有项目。

我试过了

```
$("span[id*="+ orgId +"]")[0].innerHTML=$("'input[id$=" + comanyDropDown+ "]:option:'selected").text(); 
```

如何获取动态下拉列表的选定文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:50:52.227

你的选择器是错误的。没有`:option`选择器，您也尝试过滤作为选项的输入元素，您的选择器肯定找不到这样的元素。尝试以下操作：

```
$("span[id*="+ orgId +"]")
      .html( $("option[id$=" + comanyTextBox + "]:selected").text() ); 
```

# php - PHP Mysqli 没有关闭 TCP 连接

> ID：15069631
> 
> 赞同：1
> 
> 时间：2013-02-25T14:47:03.100
> 
> 标签：php, tcp, mysqli, connection

我正在更新我的脚本以从 ext/mysql 移动到 ext/mysqli。它引入了一些问题。

在 ext/mysqli 下，脚本终止时不会释放连接。

这些脚本都是从命令行运行的。没有 Apache 或其他 HTTP 参与。

出于业务原因，我有时需要进行大量的单数据库交互。它们不是同时活动的，每个操作（插入、更新、选择、删除）在下一个开始之前完成。在某些情况下，我能够构建大型的单个查询（例如 UPDATE...SET...CASE...WHEN 等），这些都不是问题，因为它们使用的连接当然更少，但是在某些情况下我不能使用这个选项。

我`$mysqli->close()`在每个数据库操作之后都有一个，但是（TCP）连接没有关闭。脚本终止后，连接将保持打开状态，直到超时（如“netstat -an”所示）。

对我的实际影响是我的 TCP 连接用完了。

这些脚本与 ext/mysql 完美结合。

这之前已被报告为错误 ( [http://bugs.mysql.com/bug.php?id=38107](http://bugs.mysql.com/bug.php?id=38107) )，但解决方案是升级到 PHP 5.3。我正在使用 5.3.8。

例子：

```
$mysqli = new mysqli(DB_SERVER, DB_SERVER_USERNAME,DB_SERVER_PASSWORD, DB_DATABASE)         or die ("Unable to connect: " . $mysqli->error());
$result = $mysqli->query($query) or die ("Query failed: " . $mysqli->error . " Actual query: " . $query);
// Do domething interesting with $result
$mysqli->close();
/** TCP connection remains open until it times out at an OS level /** 
```

有没有人遇到过这个问题并找到了解决方案？谢谢。

注意：Stackoverflow 上还有其他类似但不一样的问题。请不要将此作为重复项关闭。

更新：我可能会叫错树。我认为这是一个连接问题的原因是因为我收到了这个错误： `mysqli::mysqli(): [2002] Only one usage of each socket address (protocol/network address/port) is normally permitted.` 我在这里找到的解释（[http://www.online-it-support.co.uk/?p=652](http://www.online-it-support.co.uk/?p=652)）表明 TCP 端口耗尽是原因。我可以对我的开发环境进行更改，因为它在我的控制范围内。生产环境不是。我假设——也许是不明智的——这是不正确的行为。这是基于 ext/mysql 不会出现问题的事实。也许我的问题应该是“如何让 ext/mysqli 表现得像 ext/mysql？”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:00:25.580

*处于*关闭`TIME_WAIT`状态的连接。没有错误或问题。如果您在很短的时间内创建并关闭大量 TCP 连接，您将最终获得大量处于状态的 TCP 连接。*`TIME_WAIT`*

 *您要么需要重新使用连接而不是关闭它们，要么找出导致问题的原因并修复它。例如，增加本地端口的范围可能会有所帮助。

建立和拆除 TCP 连接的成本很高。如果你试图在一秒钟内这样做几十次，那你就做错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:16:53.710

[您应该在MySQLi](http://php.net/manual/en/mysqli.construct.php)中使用持久连接

> p 前置主机：打开一个持久连接。mysqli_change_user() 在从连接池打开的连接上自动调用。

这应该使连接保持打开状态，处于可用状态。*

# android - 当某些片段可见时启用显示方向更改，当其他片段可见时禁用

> ID：15069633
> 
> 赞同：8
> 
> 时间：2013-02-25T14:47:06.573
> 
> 标签：android, android-fragments

我在我的应用程序中使用片段。大多数片段应该只有一个方向 - 肖像。所以我强制持有人活动始终处于纵向模式。

但是我的一个片段应该同时具有纵向和横向模式。如何仅对一个片段启用方向更改？或者我需要让它成为一个单独的活动来处理方向而不依赖于其他片段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:00:22.193

您将不得不手动进行。

1) 将此行添加到您的活动标签 android:configChanges="orientation|screenSize"

2）覆盖您的fragmtn或活动中的配置更改回调

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig); 

   if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
        Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
    }

//Your fragment animation layout changing code

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-17T17:13:47.450

我知道这已经过时了，但我会加两分钱，以防它对某人有帮助，因为它仍然是当前的问题。

**注意：**这个答案是在我发布的一天后编辑的，因为我检测到 API 低于 26 的问题。经过大量测试，以下是我的最终答案。此解决方案在 API 21 及更高版本中有效（经过测试）。

我的案例可能与发布的问题不同，所以我会具体说明我拥有什么，以及我是如何解决的。

1.  一个具有多个片段的 Activity。
2.  只有一个片段需要能够同时处于纵向和横向，因为它具有相应的不同布局版本。其余部分必须保持纵向，并且在应用程序处于前台时屏幕不得旋转。
3.  我用过科特林。对于 Java 应该几乎是一样的。

在您拥有的每个片段中，您需要覆盖`onResume()`. 在其中，您指定要“强制”的方向。

在我的情况下，我只希望一个片段以**纵向和横向**显示，所以我设置`requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED`（如果没有设置，这是默认值），但是**因为我们将`requestedOrientation` 在其余片段中更改，所以我们必须设置它这里也是**：

```
 override fun onResume() {

    super.onResume()

    activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED

    //The rest of your code (if you have something else here).

    } 
```

在其余的片段中，我想“强制”**竖向**，所以我使用了以下内容：

```
 override fun onResume() {

    super.onResume()

    activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT

    //The rest of your code (if you have something else here).

    } 
```

这就是让它工作所需的一切！以下是可选的，但可能对我有用。

**可选1：**

如果您有许多片段并且您不想修改/添加`onResume()`每个片段，您可以**创建一个子类**（例如，PortraitFragment）`Fragment()`，您只需在其中覆盖`onResume()`。然后，您可以**从中派生出**您希望拥有此功能的所有片段。

```
open class PortraitFragment : Fragment() {

    override fun onResume() {
        super.onResume()

        activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
    }

} 
```

**可选2：**

根据您的布局，您可能还需要添加它。
我使用它是因为我的布局没有为**多窗口模式**做好准备。

在清单中添加`android:resizeableActivity="false"`：

```
 <activity android:name=".MainActivity"
    android:launchMode="singleTask"
    android:windowSoftInputMode="stateHidden|adjustPan"
    android:resizeableActivity="false"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:12:09.583

我找到了解决这个问题的方法：

在每个片段中覆盖 setUserVisibleHint()。

在肖像中只有片段：

```
@Override
public void setUserVisibleHint(boolean isVisibleToUser) {
super.setUserVisibleHint(isVisibleToUser);
if(isVisibleToUser) {
Activity a = getActivity();
if(a != null) a.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-05T00:10:31.947

[`setRequestedOrientation`](http://developer.android.com/reference/android/app/Activity.html#setRequestedOrientation(int))在选择要显示的片段时使用Activity 方法。

```
public class MyActivity extends Activity {
  // ...

  public void chooseFragment(int x) {
    Fragment newFragment;
    if (x == 1) {
      // FragmentOne can be any orientation
      setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);
      newFragment = new FragmentOne();
    }
    else {
      // FragmentTwo can be only portrait orientation
      setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
      newFragment = new FragmentTwo();
    }
    getSupportFragmentManager().beginTransaction()
      .replace(R.id.fragment_container, newFragment)
      .commit();
  }

  // ...
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-25T15:17:00.020

在您的**AndroidManifest.xml**添加**android:screenOrientation="portrait"**在您想要修复为**Portrait**的片段中，并且不要在您不想修复方向的片段中添加此语句。例子：

```
<activity
android:name="com.example.myapp.MainActivity"
android:screenOrientation="portrait"/> 
```

# android - 如何从editText解析两个双打？

> ID：15069635
> 
> 赞同：1
> 
> 时间：2013-02-25T14:47:07.357
> 
> 标签：android, string-parsing

我开发了一个简单的计算器，但我遇到了问题。当我输入计算的值时，只解析第一个数字。例如，如果输入 5 + 3，那么结果将是 5。如何解决这个问题？谢谢你的任何答案。

我的代码：

```
String[] val = mInputVal.getText().toString().split("\\+");
    try{
        inputNum1 =  Double.parseDouble(val[0]);
        inputNum2 =  Double.parseDouble(strVal);
    }catch (NumberFormatException e){} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:48:21.023

`inputNum2 = Double.parseDouble(val[1]);`?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:49:47.857

对于第二个索引，只需执行以下操作：`inputNum2 = Double.parseDouble(val[1]);`或确保 strVal = val[1]。并确保字符串被正确拆分。发生的事情是， val 中只有 1 个字符串，因此 val[1] 给了你`ArrayIndexOutOfBoundException`。希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:53:02.717

问题是解析器解析字符串直到第一个非数字，而你有“3”。所以你应该打电话

```
inputNum2 =  Double.parseDouble(val[1].trim()); 
```

# inversion-of-control - 我应该在抽象工厂创建的对象上调用 ioc.release() 吗？

> ID：15069640
> 
> 赞同：0
> 
> 时间：2013-02-25T14:47:16.247
> 
> 标签：inversion-of-control, castle-windsor, abstract-factory

我有一个简单的图表编辑器，在阅读了有关 IoC 和 DI 的书籍后，我决定尝试借助它们提供的帮助来解耦我的代码。看起来当用户将图表项目添加到图表时，项目由抽象工厂创建并添加到项目的内部图表列表中。但是当用户想要从图表中删除项目时该怎么办？首先我应该从内部列表中删除项目。然后我对sould i IoC.Release（Item）有一些误解吗？如果我不调用 IoC.Release(Item) （避免了解我的对象中的 IoC），那么 IoC 中的 Item 会发生什么。

PS：我正在尝试使用温莎城堡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:29:27.997

当您使用抽象工具（我假设它是使用 Windsor TypeFactory 实现的）创建组件时，如果您不释放它们，您的组件将不会被垃圾收集。组件可以通过以下任一方式发布：

1.  在您的抽象工厂上创建 Release 方法。此方法应采用一个参数（通常是对象）和一个 void 返回类型。调用此方法将释放创建的组件。
2.  释放工厂。这将释放工厂创建的所有组件。

一般来说，直接调用容器是个坏主意。只直接调用容器到：

1.  设置容器。
2.  解决您的顶级组件。
3.  处理容器（以及里面的所有组件）

我希望这有帮助。

亲切的问候，马尔维恩。

# maven - 如何使用分类器将一个 maven 模块生成的 jar 附加到另一个模块？

> ID：15069645
> 
> 赞同：0
> 
> 时间：2013-02-25T14:47:33.257
> 
> 标签：maven, dependency-management

我有一个项目，我已经对其进行了一些重构（以及模块名称说明）。

结果，原来的模块`neo4j-connector-impl`现在变成了`neo4j-connector-1.6`. 现在，为了更好的兼容性，我想让这个项目产生的 jar 也可以作为`neo4j-connector-impl`（它的旧名称，如果你关注我的话）。

我`pom`在这些 GAV 坐标下创建了一个类型化的项目，并尝试使用[maven-dependency-plugin](https://maven.apache.org/plugins/maven-dependency-plugin/)和[build-helper-maven-plugin](http://mojo.codehaus.org/build-helper-maven-plugin/plugin-info.html)的组合来附加 jar 。

不幸的是，每次我构建我的项目时，那个 jar 都不在 maven 存储库中，maven 说

```
[INFO] Installing C:\Users\ndx\Documents\workspaces\git\neo4j-connector\neo4j-connector-impl-parent\neo4j-connector-impl\neo4j-connector-impl-1.6.jar to C:\Users\ndx\.m2\repository\com\netoprise\neo4j-connector-impl\1.6-SNAPSHOT\neo4j-connector-impl-1.6-SNAPSHOT.jar
[DEBUG] Skipped re-installing C:\Users\ndx\Documents\workspaces\git\neo4j-connector\neo4j-connector-impl-parent\neo4j-connector-impl\neo4j-connector-impl-1.6.jar to C:\Users\ndx\.m2\repository\com\netoprise\neo4j-connector-impl\1.6-SNAPSHOT\neo4j-connector-impl-1.6-SNAPSHOT.jar, seems unchanged 
```

那么......我怎样才能把那个罐子作为一个分类的依赖呢？

有关信息，这是我的 pom

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>com.netoprise</groupId>
        <artifactId>neo4j-connector-impl-parent</artifactId>
        <version>1.6-SNAPSHOT</version>
    </parent>
    <artifactId>neo4j-connector-impl</artifactId>
    <packaging>pom</packaging>
    <description>Compatibility module ensuring previous code can "quite" work</description>
    <properties>
        <dependencies.directory>${project.build.directory}/dependencies</dependencies.directory>
    </properties>
    <dependencies>
        <dependency>
            <groupId>${project.groupId}</groupId>
            <artifactId>${project.artifactId}-1.6</artifactId>
            <version>${project.version}</version>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.6</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>copy-dependencies</goal>
                        </goals>
                        <configuration>
                            <includeGroupIds>${project.groupId}</includeGroupIds>
                            <excludeTransitive>true</excludeTransitive>
                            <overWriteSnapshots>true</overWriteSnapshots>
                            <stripVersion>true</stripVersion>
                            <outputDirectory>${dependencies.directory}</outputDirectory>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <!-- attach all projects artifact to this one in order for user projects 
                to have minimum integration work -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>build-helper-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>attach-artifact</goal>
                        </goals>
                        <configuration>
                            <artifacts>
                                <!--  for maximum compatibility, the 1.6 version is attached as default jar artifact -->
                                <artifact>
                                    <file>neo4j-connector-impl-1.6.jar</file>
                                    <type>jar</type>
                                </artifact>
                            </artifacts>
                            <basedir>${dependencies.directory}</basedir>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

**编辑 1**为什么工件中有版本号？因为该项目 (neo4j-jca-connector) 提供对各种 JavaEE 服务器的 neo4j 图形数据库的访问。neo4j 版本**不应**受此连接器的约束。因此，我们必须为用户提供一种方法来为该连接器的版本定义使用哪个 neo4j 版本（考虑默认 - 对于向后兼容版本 - 1.6 版本）。

因此，对于 neo4j,n 的每个版本，我们都有一个模块，这些模块在这里聚合。作为记录，[Bouncycastle](http://www.jarvana.com/jarvana/browse/bouncycastle/)对 JDK 版本这样做......在我看来，在一个更糟糕的版本中，因为他们直接在 artifactId 中使用 JDK 版本，我打算只在内部做：暴露的工件将是 neo4j-connector-impl和neo4j-connector-rar ...和分类器将允许人们选择使用哪个neo4j版本。

**编辑 2**欲了解更多信息，整个项目可以在 github 上看到：[https ://github.com/Riduidel/neo4j-connector](https://github.com/Riduidel/neo4j-connector)

包含 maven-shade-plugin 声明的父 pom 是[https://github.com/Riduidel/neo4j-connector/blob/master/neo4j-connector-impl-parent/pom.xml](https://github.com/Riduidel/neo4j-connector/blob/master/neo4j-connector-impl-parent/pom.xml)

该连接器的一个版本是[https://github.com/Riduidel/neo4j-connector/blob/master/neo4j-connector-impl-parent/neo4j-connector-impl-1.5/pom.xml](https://github.com/Riduidel/neo4j-connector/blob/master/neo4j-connector-impl-parent/neo4j-connector-impl-1.5/pom.xml)

并且预期的聚合器模块应该是[https://github.com/Riduidel/neo4j-connector/blob/master/neo4j-connector-impl-parent/neo4j-connector-impl/pom.xml](https://github.com/Riduidel/neo4j-connector/blob/master/neo4j-connector-impl-parent/neo4j-connector-impl/pom.xml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:25:09.810

好的，在阅读您的评论和编辑后，这更清楚了。

所以，如果我错了，请纠正我。

*   您希望能够为每个 neo4j 版本提供一个版本的连接器
*   您使用模块来执行此操作。

我仍然不清楚的是，我看不到模块的 POM 部分。你说你想使用分类器（所以，同一个项目）但是 maven 模块是不同的项目......

# android - 活动在 Finish() 上重新启动

> ID：15069647
> 
> 赞同：0
> 
> 时间：2013-02-25T14:47:35.527
> 
> 标签：android, android-intent, xamarin.android

我有一个登录活动，我只想在启动时以及用户注销时显示。因此，当用户处于登录活动并单击后退按钮时，我想关闭应用程序而不是返回登录活动。

我已经成功覆盖了后退按钮回调：

```
public override bool OnKeyDown(Keycode keyCode, KeyEvent e)
{
    if (keyCode == Keycode.Back)
    {
        Console.Out.WriteLine("Close activity");
        return true;
    }

    return base.OnKeyDown(keyCode, e);
} 
```

这会阻止后退按钮返回上一个活动。但是，包括`Finish();`before`return true`确实会使登录活动重新出现:(

这是我登录后使用的代码：

```
Intent activity = new Intent(this, typeof(WorkOrderActivity));
StartActivity(activity); 
```

尝试了几个 Intentflags 和 LaunchModes 但无法使其正常工作。根据日志，登录后仅启动一项活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:56:08.433

试试这个有效..

```
Intent mIntent = new Intent(this, WorkOrderActivity.class);
mIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(mIntent);

finish(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:56:43.300

`Activity`显示前一个后是正常行为`finish()`

该`finish()`方法只是关闭调用它的Activity

您可以隐藏您的登录表单并在您的`onResume()`登录活动中检查用户登录状态（如果他已登录，则完成它）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:52:25.487

从登录活动开始另一个活动时，您应该清除堆栈。

```
Intent intent = new Intent(LoginActivity.this, HomeActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK |      Intent.FLAG_ACTIVITY_CLEAR_TASK);
startActivity(intent); 
```

当用户注销时，您可以启动 LoginActivity。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T14:55:25.303

```
public override bool OnKeyDown(Keycode keyCode, KeyEvent e)
{
    if (keyCode == Keycode.Back)
    {
        moveTaskToBack(true);
        return true;
    }

    return base.OnKeyDown(keyCode, e);
} 
```

# c# - Sharepoint WebPart 属性在重新部署后丢失

> ID：15069656
> 
> 赞同：3
> 
> 时间：2013-02-25T14:47:49.863
> 
> 标签：c#, sharepoint, sharepoint-2010, web-parts

我有一个使用一些 webpart 属性（在本例中为字符串）的 sharepoint webpart。这些属性都可以按照我的意愿工作，但是如果我对我们的 web 部件进行了更改并部署到服务器，现有的属性就会丢失。

简要阅读后，我相信这可能与我的属性定义有关：

```
 public static string Exclusions;
    [Category("Extended Settings"),
    Personalizable(PersonalizationScope.Shared),
    WebBrowsable(true),
    WebDisplayName("Library Exclusions"),
    WebDescription("Enter any Libraries to exclude. Use '|' to separate.")]
    public string _Exclusions
    {
        get { return Exclusions; }
        set
        { Exclusions = value;}
    } 
```

我想知道是否应该从这里删除“静态”。但是，当我这样做时，我不能再像以前那样使用此属性：

```
protected override void OnPreRender(EventArgs e)
        {

            ((HiddenField)this.FindControl("DocumentLibraryListingHiddenWebPartProperties")).Value = DocumentLibraryListing.DocumentLibraryListing.Exclusions;

        } 
```

关于在这里做什么的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:33:08.273

事实证明，丢失的设置/属性与字符串是静态的有关。

我将我的财产更改为：

```
public string Exclusions;
[Category("Extended Settings"),
Personalizable(PersonalizationScope.Shared),
WebBrowsable(true),
WebDisplayName("Library Exclusions"),
WebDescription("Enter any Libraries to exclude. Use '|' to separate.")]
public string _Exclusions
{
    get { return Exclusions; }
    set
    { Exclusions = value;}
} 
```

此外，我必须在 CreateChildControls 方法中执行以下操作：

```
protected override void CreateChildControls()
        {
            Control control = Page.LoadControl(_ascxPath);
            if (control!= null)
            {
                ((MyUserControl)control).WebPart = this;
            }
            Controls.Add(control);
        } 
```

此外，在 webpart 的 ascx.cs 文件中，我必须在类定义的正下方添加它：

```
public MyWebPart WebPart { get; set; } 
```

最后，我能够使用以下方法访问 OnPreRender 事件的值：

```
this.WebPart.Exclusions 
```

有关更多信息，请参阅此站点：[NothingButSharepoint.com](https://www.nothingbutsharepoint.com/sites/devwiki/articles/pages/how-to-create-sharepoint-2010-custom-visual-webpart-properties.aspx)

# dotnetnuke - Dotnetnuke：在不同层次环境中具有不同角色的用户？（组/文件夹/子站点？）

> ID：15069661
> 
> 赞同：0
> 
> 时间：2013-02-25T14:48:09.760
> 
> 标签：dotnetnuke, hierarchy, roles

我希望 UserA 成为 dnn/SomeCountry/SomeDepartment/SomeArea 的管理员，但只能成为 dnn/SomeOtherCountry/SomeOtherDepartment/SomeOtherArea 的作者

我希望最终用户可以轻松创建层次结构，并且最好是轻量级。然后，我希望树末尾的页面显示基于角色的自定义模块。

这是否可以对现有的可嵌套内容项执行此操作？（文件夹或组或子站点或子页面等）

看起来我可以用子站点来做到这一点，但我认为子站点对于我正在寻找的东西来说太重了（很多重复的 css 等），某种类型的“文件夹”会更合适。

是否有已经支持此的内容类型？有没有一个模块已经支持这个？

如果不是，那么实现起来有多容易？

ps 我尝试在 DNN 论坛上发布[这个问题](http://www.dotnetnuke.com/Resources/Forums/forumid/118/postid/478658/scope/posts.aspx)并没有回应

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:59:37.447

使用 DotNetNuke 社区版您可能无法轻松做到这一点，但使用专业版中更精细的权限模型，我相信您可以相当轻松地做到这一点。

他们不会是“管理员”，但您可以赋予角色在不同层次结构中“添加”页面的能力，这是您在 CE 中无法做到的。

# html - 更改Firefox上的选项卡后，身体的背景图像消失了

> ID：15069662
> 
> 赞同：0
> 
> 时间：2013-02-25T14:48:17.810
> 
> 标签：html, css, firefox

我有一个带有 1,32mb 的背景图像的网站，它位于正文的 css 中，问题是当我在 Firefox 中更改选项卡并再次回到我的网站时，背景消失，并显示白色背景......有人知道怎么了？

//html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Cacilda Tour</title>
<link rel="StyleSheet" type="text/css" href="css/style.css" />
<script language="JavaScript" type="text/JavaScript">

<!-- começo do codigo random imagens
var mypics=['toppo1.png','toppo2.png','toppo3.png'];
onload=function(){
    var oTd = document.getElementById('cel');
    var pic= 'topo/'+mypics[Math.floor(Math.random()*mypics.length)];
    oTd.style.backgroundImage='url('+pic+')';
}
//  fim do codigo de imagens -->
</script>
</head>
<body>
<div class="principal">
    <div class="cabecalho">

    <img id="cel" src="images/topo_transp.gif" border="0" >

    </div>
    <div class="menu">

    </div>
    <div class="conteudo">
        <div class="centroesq">
            <div class="titcentroesq">
            <p>Pacotes</p>
            </div>
        </div>
        <div class="centrodir">
            <div class="titcentrodir">
            <p>Corporativo</p>
            </div>
        </div>
    </div>
    <div class="rodape">

    </div>

  </div>
</body>

</html> 
```

//css

```
body{
background-image: url(../imagens/fundo.jpg);
background-repeat:no-repeat;
height:1065px;
}
.principal{
width:980px;
margin: 0 auto;
}
.cabecalho{
float:left;
width:100%;
}
.cabecalho img {
width:100%;
background-repeat:no-repeat;
width:980px; 
height:200px;
}
.menu{
float:left;
width:100%;
height:40px;
background-image: url(../imagens/fundomenu.png);
margin-top:8px;
-webkit-border-radius: 6px;
-moz-border-radius: 6px;
border-radius: 6px;
}
.conteudo{
float:left;
width:100%;
height:700px;
background-image: url(../imagens/fundomenu.png);
margin-top:8px;
-webkit-border-radius: 6px;
-moz-border-radius: 6px;
border-radius: 6px;
}
.centroesq{
float:left;
width:488px;
height:300px;
border-right:1px dotted #c0c0c0;
margin-top:8px;
}
.titcentroesq{
float:left;
width:460px;
height:32px;

margin-left:10px;
background-image: url(../imagens/fundotitulo.png);
-webkit-border-radius: 6px;
-moz-border-radius: 6px;
border-radius: 6px;
line-height:2px;
color:#10468c;
font-family:arial;
font-size:105%;
font-weight:bold;
text-align:left;
padding-left:10px;
border:1px solid #fbca18;
}
.centrodir{
float:left;
width:490px;
height:300px;
margin-top:8px;
}
.titcentrodir{
float:left;
width:460px;
height:32px;

margin-left:10px;
background-image: url(../imagens/fundotitulo2.png);
-webkit-border-radius: 6px;
-moz-border-radius: 6px;
border-radius: 6px;
line-height:2px;
color:#ffffff;
font-family:arial;
font-size:105%;
font-weight:bold;
text-align:left;
padding-left:10px;
border:1px solid #2b4688;
}
.rodape{
float:left;
width:100%;
height:95px;
background-image: url(../imagens/fundomenu.png);
margin-top:8px;
-webkit-border-radius: 6px;
-moz-border-radius: 6px;
border-radius: 6px;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:55:49.427

我感觉问题是图像太大了。尝试为网络压缩它。

# java - 将字符串设置为日历类型

> ID：15069671
> 
> 赞同：1
> 
> 时间：2013-02-25T14:48:25.283
> 
> 标签：java, string, calendar

我有一个类似的代码

```
Customer_Todo_Master customerTodo=new Customer_Todo_Master();
customerTodo.setCALCDATE(String type); 
```

这`setCALCDATE`是一个日历类型。我怎样才能为此设置一个字符串`setCALCDATE()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:50:18.867

使用[**SimpleDateFormat**](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)类：

```
String str="your string rep of cal"; 
Calendar cal = Calendar.getInstance();
cal.setTime(new SimpleDateFormat("your date format").parse(str));
customerTodo.setCALCDATE(cal); 
```

# struts - Struts...不去Action Class

> ID：15069674
> 
> 赞同：0
> 
> 时间：2013-02-25T14:48:35.517
> 
> 标签：struts

当我运行 index.jsp 并输入用户名和密码时，我收到“严重：请求了无效路径 /UserAuth”。

这是我的 web.xml：

```
<web-app id="WebApp_ID" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>StrutDemo</display-name>

    <servlet>
        <servlet-name>action</servlet-name>
        <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
        <init-param>
            <param-name>config</param-name>
            <param-value>/WEB-INF/struts-config.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>action</servlet-name>
        <url-pattern>*.do</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

这是我的 struts-config.xml：

```
<struts-config>
    <form-beans>
        <form-bean name="UserLogin" type="jbeans.UserLogin" />
    </form-beans>

    <action-mapping>
        <action path="/UserAuth"
                type="controllers.UserAuthAction"
                name="UserLogin"
                scope="request"
                validate="false"
                input="index.jsp">
                <forward name="success" path="/success.jsp" />
        </action>

    </action-mapping>
</struts-config> 
```

index.jsp：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
    <form method="POST" action="UserAuth.do">
        <input type="text" name="username" />
        <input type="text" name="password" />
        <input type="submit" />
    </form>
</body>
</html> 
```

UserAuthAction.java：

```
public class UserAuthAction extends Action{

    public ActionForward execute(ActionMapping map, ActionForm form,
                                 HttpServletRequest req, HttpServletResponse res) throws Exception{
        System.out.println("Inside USERAUTHACTION");
        ActionForward nextPage = null;
        UserLogin loginInfo = (UserLogin) form;
        String userName = loginInfo.getUsername();
        String pwd = loginInfo.getPassword();
        System.out.println(userName + " " + pwd);
        nextPage = map.findForward("success");
        return nextPage;
    }

} 
```

和 UserLogin.java

```
public class UserLogin extends ActionForm{

    private String username;
    private String password;

    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }
    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }   
} 
```

谢谢！！！

# python-2.7 - 使用 CodeIgniter 的编码时如何在 python 中解码？

> ID：15069681
> 
> 赞同：2
> 
> 时间：2013-02-25T14:48:46.857
> 
> 标签：python-2.7, codeigniter-2

我使用 CodeIgniter 的编码方法存储用户名、密码和安全令牌，例如 -

```
$this->load->library('encrypt');
//...
$password = $this->encrypt->encode($rows["password"]);
//Then save it in password column of user_credentials table. 
```

现在，在 python 中，我想解码这个编码的密码。我一直在尝试用 python 的[hashlib](http://docs.python.org/2/library/hashlib.html)对其进行解码，但我做不到。

我认为这是因为 CI 的加密库对密码的作用超过了 md5-

```
function encode($string, $key = '')
{
    $key = $this->get_key($key);
    if ($this->_mcrypt_exists === TRUE)
    {
        $enc = $this->mcrypt_encode($string, $key);
    }
    else
    {
        $enc = $this->_xor_encode($string, $key);
    }
    return base64_encode($enc);
}

function decode($string, $key = '')
{
    $key = $this->get_key($key);

    if (preg_match('/[^a-zA-Z0-9\/\+=]/', $string))
    {
        return FALSE;
    }

    $dec = base64_decode($string);

    if ($this->_mcrypt_exists === TRUE)
    {
        if (($dec = $this->mcrypt_decode($dec, $key)) === FALSE)
        {
            return FALSE;
        }
    }
    else
    {
        $dec = $this->_xor_decode($dec, $key);
    }

    return $dec;
} 
```

我应该如何解码它？我需要在python中编写上面的解码函数。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T06:32:46.810

查看 CI 的 system/libraries/Encrypt.php 并查看 mcrypt_decode 和 _remove_cipher_noise 是如何工作的。mcrypt 库有一个 python 接口[可用](https://pypi.python.org/pypi/python-mcrypt)。很好的狩猎。

# c# - “子查询返回超过 1 个值。这是不允许的。” 需要返回一组值

> ID：15069683
> 
> 赞同：1
> 
> 时间：2013-02-25T14:48:50.273
> 
> 标签：c#, sql, linq

```
var range = this.dataStore.Query<NotificationConfiguration>()
                .Range(p => new NotificationConfigurationViewModel(p, from x in p.Events where !(x.Code == null || x.Code.Equals("")) select x.Code), pageNumber);

return this.View(range); 
```

我有上面的代码，我想在其中返回一个 IEnumerable 但得到一个“子查询返回超过 1 个值。当子查询遵循 =、!=、<、<=、>、>= 或子查询时，这是不允许的每次运行代码时都用作表达式。我知道查询只想返回一个值，但是如何让它按预期返回一组值？请帮忙！

让我澄清一下......我希望范围包括一个新对象。我有一个正在通过数据库的查询。它返回数据，然后我使用以下视图模型构造函数进行转换：

```
public NotificationConfigurationViewModel(NotificationConfiguration notification , IEnumerable<string> codes)
{
    Contract.Requires(notification != null);

    this.notification = notification;
    this.codes = codes;
} 
```

每个通知配置都有属性，然后是与其相关的事件列表。我只需要所述列表中的代码。

* * *

只是为了再次澄清。我希望查询返回一个 NotificationConfiguration 和一个 IEnumerable（稍后我将使用 SB 将其转换为单个字符串）。一旦查询将这两项返回给我，我将使用视图模型中的构造函数对其进行转换，以便可以使用 DataTable 正确显示所有数据。我正在寻找的答案可能非常具体，但是当我希望它返回 IEnumerable 以及如何修复它时，我需要了解为什么我会收到子查询错误。另请注意...根据.net docs，代码应该交给我一个 IEnumerable 但由于某种原因它仍然崩溃。这是相关的代码示例：

```
 [HttpPost]
    public ActionResult Index(DataTableRequest requestedData)
    {
        using (this.dataStore.Session.BeginTransaction())
        {
            return this.dataStore.Query<NotificationConfiguration>()
                          .TableRange(requestedData, p => new NotificationConfigurationViewModel(p, from x in p.Events select x.Code));
        }
    } 
```

.

```
 public NotificationConfigurationViewModel(NotificationConfiguration notification , IEnumerable<string> events)
    {
        Contract.Requires(notification != null);

        this.notification = notification;
        this.events = events;
    } 
```

.

```
 [Display(Name = "Events")]
    public virtual string EventTypeCodes
    {
        get
        {
            var codes = new StringBuilder();

            foreach (var item in this.events)
            {
               codes.Append(item + ",");
            }

            return codes.ToString().TrimEnd(',');
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:07:44.113

这里的问题是[Range](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)方法（复制如下）。

```
.Range(p => new NotificationConfigurationViewModel(p, from x in p.Events where !(x.Code == null || x.Code.Equals("")) select x.Code), pageNumber); 
```

[Range](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)期望调用者传入以下参数：

```
public static IEnumerable<int> Range(
    int start,
    int count
) 
```

代码正在传入`(NotificationConfigurationViewModel, int)`。这当然似乎是问题的一部分。我相信适当的解决方案如下：

```
var range = from p in this.dataStore.Query<NotificationConfiguration>()
select new NotificationConfigurationViewModel(p, p.Events.Where(x => !string.IsNullOrEmpty(x.Code))); 
```

这将从您的转换`NotificationConfiguration`为`NotificationConfigurationViewModel`，而不包括任何空字符串的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:09:05.147

答案在查询中，而不是数据集中，所以要给出准确的答案，我们需要查看查询。但是，一般来说，您可以使用一些构造。您可能有类似 WHERE Id = (SELECT ID FROM Values WHERE DateOFValues BETWEEN FirstDate AND LastDate) 之类的东西。你想要的是 WHERE ID IN (SELECT ... OR WHERE IS = ANY (SELECT ... 或子查询在这种情况下看这里... [http://allenbrowne.com/subquery-01.html](http://allenbrowne.com/subquery-01.html)（是的，我知道它说访问，但 MS SQL 支持此处使用的所有语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:16:24.803

继续假设......这就是你所追求的吗？

如果您尝试创建一堆新对象，则最好在查询的选择部分内完成对象创建。

```
int pageNumber = 0;
int pageSize = 10;

IQueryable<NotificationConfiguration> configurations = this.dataStore.Query<NotificationConfiguration>();

IList<NotificationConfigurationViewModel> viewModels =
    (from configuration in configurations
     where !string.IsNullOrEmpty(configuration.Code)
     select new NotificationConfigurationViewModel(configuration))
    .Skip(pageNumber * pageSize).Take(pageSize).ToList();

return viewModels; 
```

# java - Hibernate 用多个数据库注解

> ID：15069685
> 
> 赞同：-1
> 
> 时间：2013-02-25T14:48:52.083
> 
> 标签：java, hibernate, spring-security, spring-data-jpa

我正在尝试使用不同的表连接到另一个数据库（SQL 服务器）。我设法连接，但它在另一个数据库中搜索同一个表。

如何说应该在哪些数据库表中，哪些不应该？

实体 ：

```
@Entity(name = "ripError")
@Table(name = "rip_error")
public class RipError {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;

    @Column(name = "deleted")
    private char deleted;
    @Column(name = "error_code")
    private String errorCode;
    @Column(name = "error_desc")
    private String errorDesc;
} 
```

弹簧数据.xml

```
 <context:property-placeholder properties-ref="deployProperties" />

    <tx:annotation-driven transaction-manager="transactionManager"  />  

    <!-- Activate Spring Data JPA repository support -->
    <jpa:repositories base-package="com.worldone.repository" entity-manager-factory-ref="entityManagerFactory" transaction-manager-ref="transactionManager" />
    <jpa:repositories base-package="com.worldone.repositoryMetal" entity-manager-factory-ref="entityManagerFactoryMetal" transaction-manager-ref="transactionManagerMetal" />

    <!-- Declare a datasource that has pooling capabilities-->   
    <bean id="jpaDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close" 
        p:driverClass="${app.jdbc.driverClassName}"
        p:jdbcUrl="${app.jdbc.url}"
        p:user="${app.jdbc.username}"
        p:password="${app.jdbc.password}"
        p:acquireIncrement="5"
        p:idleConnectionTestPeriod="60"
        p:maxPoolSize="100"
        p:maxStatements="50"
        p:minPoolSize="10" 

        />

    <bean id="jpaDataSourceMetal" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close"
        p:driverClass="${app2.jdbc.driverClassName}"
        p:jdbcUrl="${app2.jdbc.url}"
        p:user="${app2.jdbc.username}"
        p:password="${app2.jdbc.password}"
        p:acquireIncrement="5"
        p:idleConnectionTestPeriod="60"
        p:maxPoolSize="100"
        p:maxStatements="50"
        p:minPoolSize="10" 

        />

    <!-- Declare a JPA entityManagerFactory -->
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" 
        p:persistenceXmlLocation="classpath*:META-INF/persistence.xml"
        p:persistenceUnitName="hibernatePersistenceUnit"

        p:dataSource-ref="jpaDataSource"
        p:jpaVendorAdapter-ref="hibernateVendor"/>

    <!-- Declare a JPA entityManagerFactory -->
    <bean id="entityManagerFactoryMetal" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" 
        p:persistenceXmlLocation="classpath*:META-INF/persistence.xml"
        p:persistenceUnitName="hibernatePersistenceUnitMetal"
        p:dataSource-ref="jpaDataSourceMetal"
        p:jpaVendorAdapter-ref="hibernateVendorMetal"/>

    <!-- Specify our ORM vendor -->
    <bean id="hibernateVendor" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"
                p:showSql="false"/>
    <!-- Specify our ORM vendor -->
    <bean id="hibernateVendorMetal" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"
                p:showSql="false"/>

    <!-- Declare a transaction manager-->
    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager" 
        p:entityManagerFactory-ref="entityManagerFactory"

        />

    <!-- Declare a transaction manager-->
    <bean id="transactionManagerMetal" class="org.springframework.orm.jpa.JpaTransactionManager" 
        p:entityManagerFactory-ref="entityManagerFactoryMetal"/> 
```

这是错误：

```
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: hibernatePersistenceUnitMetal] Unable to build EntityManagerFactory
Caused by: org.hibernate.HibernateException: Missing table: rip_error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:01:38.873

您可能希望拥有不同的持久性单元。每个都有自己的类集合和自己的数据源。

请参阅：[是否可以为多个数据源配置 persistence.xml？](https://stackoverflow.com/questions/3266688/its-possible-configure-a-persistence-xml-for-multiple-data-sources)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:53:01.220

检查[这](https://forum.hibernate.org/viewtopic.php?p=2370257)是否有助于解决您的问题

# c# - 将 html/css 模板转换为 asp.net mvc 4

> ID：15069690
> 
> 赞同：1
> 
> 时间：2013-02-25T14:49:08.917
> 
> 标签：c#, html, css, asp.net-mvc, asp.net-mvc-4

我想将我设计的 html/css 模板集成到 asp.net mvc 4 项目中。我试图更改 _layout.cshtml 但仍然存在问题。我是asp mvc的初学者。有什么教程可以帮助。我找到了一个处理 mvc 3 的教程，它不是 mvc 4 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:22:45.033

我是否建议您不仅查看 MVC 4 特定教程，还可以查看 MVC 附带的 layout.cshtml 并对其进行逆向工程。注意它拉入的所有文件，并尝试将它们拉入您的自定义 HTML 文件。

参考。 [http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4)

# java - Lotus Domino 数据表列

> ID：15069692
> 
> 赞同：0
> 
> 时间：2013-02-25T14:49:10.647
> 
> 标签：java, lotus-domino

所以我需要用java从lotus domino数据库中获取一些信息。

首先我需要创建一个会话：

```
Session session = NotesFactory.createSession(host, user, password); 
```

然后我需要获取数据库：

```
Database db = session.getDatabase(serverName, dbName); 
```

下一步我需要获取信息。这个数据库看起来如何与简单关系数据库相媲美？我的意思是，在关系数据库中，我可以进行 SQL 查询`"SELECT table FROM room WHERE table.hieght < 10"`，例如，该查询将如何从 Lotus Domino DB 中获取相同的信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:18:04.377

Notes 使用名为 NSF（Notes Storage Facility）的面向文档的数据库来管理半结构化数据，例如富文本和文件。与关系数据库不同，数据存储为文档和视图。

要查询 NSF，您可以使用 Java API，但它们很难使用，尤其是在您习惯于关系数据库和标准 Java 集合的情况下。（即大多数集合返回类型是不可迭代的，因此您必须使用 while 来迭代它们：S，还期望有很多奇怪的异常）。这是一个例子：

```
Session session = NotesFactory.createSession(host, user, password);
View view = session.getDatabase(DATABASE).getView(VIEW);
ViewEntryCollection allEntries = view.getAllEntries();
ViewEntry entry = allEntries.getFirstEntry();
while (entry != null) {
    if (entry.isDocument()) {
        Document doc = entry.getDocument();
        String no = doc.getItemValueString("No");
    }
    entry = allEntries.getNextEntry();
} 
```

使用上面的代码，我检索了一个标记为`"No"`注释文档的字段，该字段是我从一组条目中获得的，这些条目最终形成一个名为 的视图`VIEW`，并且该视图位于数据库下`DATABASE`。

还有一种称为 Lotus Domino 公式语言的脚本语言，它也用于查询 NSF，您可以在此处了解：[Lotus Programming Guide 和 Formula Language](http://www-12.lotus.com/ldd/doc/uafiles.nsf/docs/DESIGNER70/%24File/prog1.pdf)。

# php - 排除 SqlException (0x80131904)

> ID：15069694
> 
> 赞同：0
> 
> 时间：2013-02-25T14:49:16.140
> 
> 标签：php, sql, sql-server

一段时间以来，我一直在尝试解决此错误，但没有成功。我想知道有人可以帮助我开始确定可能导致此错误的原因。

我尝试查看调用它的 php 脚本，但没有帮助。此外，我无法找到此路径：

```
Inventory1.welcome.Page_Load(Object sender, EventArgs e) in C:\Inetpub\wwwroot\Inventory1\welcome.aspx.cs:55 
```

完整的错误信息

```
[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +6256377
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) +245
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, SqlConnection owningObject) +6270399
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnection owningObject) +181
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(String host, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, Int64 timerStart) +6271242
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +6271208
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +354
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +703
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +54
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +6272472
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +81
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +1657
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +88
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +6275911
   System.Data.SqlClient.SqlConnection.Open() +258
   Inventory1.welcome.Page_Load(Object sender, EventArgs e) in C:\Inetpub\wwwroot\Inventory1\welcome.aspx.cs:55
   System.Web.UI.Control.OnLoad(EventArgs e) +132
   System.Web.UI.Control.LoadRecursive() +66
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2428 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:57:19.737

这是一个`SqlException`.

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

`Page_Load`页面文件背后的代码方法`Welcome.aspx`正在尝试打开与您的 sql-server 的连接，但它失败了。检查您的连接字符串。

基本上，您应该`valid connection string`在打开 SqlConnection 对象以查询数据库之前为其提供一个。前任;

```
using(SqlConnection cnn = new SqlConnection("valid_connection_string"))
{
   //Other stuff
   cnn.Open();
   //Execute the command
} 
```

[该网站](http://www.connectionstrings.com/)有各种不同类型的连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:06:09.320

以下是有关 Sql Connection 调试的完整文章的 URL。

您的问题可能就像密码错误一样简单。

或者

可能是 Sql Server 不允许远程连接。

[http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx)

# c++ - 以下哪种方法可以安全地导出到 C++ dll 中？

> ID：15069695
> 
> 赞同：1
> 
> 时间：2013-02-25T14:49:15.517
> 
> 标签：c++, windows, dll

我正在制作一个供多个可执行文件使用的 dll。我已经阅读过在接口上使用 STL 类的危险，我担心需要使用相同的编译器进行编译并使用相同的运行时运行。

如果导入它们的可执行文件可以使用不同版本的 VC++ 编译器和不同版本的 boost 编译，那么这些签名中的哪一个是声明我的方法的正确方法？

```
#include "boost/date_time/posix_time/posix_time_types.hpp"

boost::posix_time::ptime getTime();
void setTime(boost::posix_time::ptime time);

time_t getTime();
void setTime(time_t time);

MyCustomTime getTime(); // Defined just like time_t
void setTime(MyCustomTime time); 
```

有没有更好的方法通过 dll 接口传递日期和时间结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:13:48.483

只需传递方便的内容，并记录所需的编译器/库。例如，不能保证不同的编译器具有相同的`time_t`，并且由于`time_t`2038 年 UNIX 32 位的溢出，您可以期待`time_t`在某个时候切换到 64 位。显然，这会破坏任何 DLL 接口。

# javascript - Angular.js 选择的集成

> ID：15069697
> 
> 赞同：8
> 
> 时间：2013-02-25T14:49:18.663
> 
> 标签：javascript, angularjs, jquery-chosen

我在我想要添加所选功能的角度视图中选择：

```
<select ng-options="value for value in deutscheBankEvent.dates" ng-init="" ng-model="chosenA" class="chzn-select">
 <option style="display:none" value="">Wählen Sie ein Datum</option>
 </select><br/> 
```

我的控制器：当我在这里注入 .chosen 函数时，它会清除选项。

```
function Ctrl($scope,$http) {

  $scope.text = '';
  $scope.user = {name: '', last: '', location: ''};
  $scope.value = 0;
  $scope.sendForm = function (){
       $http.post('/Submit/To/Url', $scope.data).success(function(data) {
           alert('done!');
       });
    };
} 
```

我的页脚：

```
<g:javascript>
 $(".chzn-select").chosen(); $(".chzn-select-deselect").chosen({allow_single_deselect:true});
            jQuery(".adressen1_chzn-select").chosen();jQuery(".adressen0_chzn-select").chosen();
        });
</g:javascript> 
```

我不知道如何让选择的工作。在控制器内部它清除选项并且不适用，其余的没有任何区别。任何想法表示赞赏

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-28T09:31:23.867

您的解决方案将不起作用，因为 jQuery 代码会在元素实际在 DOM 中创建之前触发。您应该使用表单元素上的指令来解决此问题。

元素需要动态创建，因此您实际上是在 DOM 元素上操作 - 非常适合 Angular 的指令。没有必要使用 jQuery，并且在使用 Angular 时尽量避免使用它。*请注意，由于已选择*的依赖项，仍然需要 jQuery 。

我用这套解决了这个问题：

1.  角度选择指令[https://github.com/localytics/angular-chosen](https://github.com/localytics/angular-chosen)
2.  [可选] Bootstrap3 样式[https://github.com/alxlit/bootstrap-chosen](https://github.com/alxlit/bootstrap-chosen)

我建议您尝试自己编写指令。这是一个很好的做法。你可以试试这个：[http ://www.youtube.com/watch?v=8ozyXwLzFYs](http://www.youtube.com/watch?v=8ozyXwLzFYs)

祝你好运！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T14:59:46.513

你也许应该试试[http://angular-ui.github.com/](http://angular-ui.github.com/)

这是一套角度指令。其中你会发现'select2'指令，它作为选择插件的代理*（*准确地说是*Select2*插件）。

# php - PHP 标记系统 - SESSION 的问题

> ID：15069701
> 
> 赞同：2
> 
> 时间：2013-02-25T14:49:23.080
> 
> 标签：php, mysql

我正在尝试为我的漫画网站实施一个标记系统。

目标类似于 SO - 用户可以单击多个标签，并且这些标签与它们保持一致 - 主要区别在于我使用 $_SESSION 来存储它们，而不是 SO 拥有的登录系统。

一旦用户点击一个标签，它会将显示的漫画限制为与标签 ID 匹配的漫画。有人建议我有 3 个单独的表 - 一个用于漫画，一个用于标签，还有一个关系表 ComicTags。一个漫画可以有 0 个或多个标签，一个标签可以与 1 个或多个漫画相关联。

我正在努力编写正确的 sql 查询，将漫画 id 与 0 个或多个标签 id 连接起来。

我的桌子会这样设置吗？

![在此处输入图像描述](../Images/25e0c7be538da8afcc23e17438e4ed97.png)

我的查询会像这样吗？

```
$result = $mysqli->query("SELECT * FROM comics c INNER JOIN comictags ct ON (c.id = ct.comicID) WHERE ct.tagID IN (1, 2, 3) GROUP BY c.id"); 
```

谢谢！

* * *

编辑

我是否正确地想象了这一点？

1）首先从漫画和标签中选择所有列...

2) 将漫画 ID 加入到 ComicTags 表中的匹配 ID

3) 将标签 ID 加入到 ComicTags 表中的匹配 ID

4）在这种情况下，仅选择那些 WHERE 标记 id 为 1 或 2...这样将返回所有漫画 ID...

![在此处输入图像描述](../Images/9607cf092975422a2d0bb171e1c0adb2.png)

* * *

编辑 2：代码

```
<?php 
session_start();
include 'dbconnect.php';

$site = (isset($_GET['site']) ? ($_GET['site']) : "comics");
$tag = $_GET['_tagChoice'];

if (!isset($_SESSION['tags'])) {
  $_SESSION['tags'] = array();
}

$tag = $mysqli->real_escape_string($tag);

$_SESSION['tags'][] = $tag;

    foreach ($_SESSION['tags'] as $tag) {

        echo $tag;
    }

$_SESSION['tags'] = array_unique($_SESSION['tags']);

$result = $mysqli->query(
    "SELECT c.*, t.*
    FROM comics c 
    LEFT JOIN comictags ct ON (c.id = ct.comicID) 
    LEFT JOIN tags t ON (t.id = ct.tagID)
    WHERE ct.tagname IN (" . implode(',', $_SESSION['tags']). ")
    OR ct.tagname IS NULL");

 mysqli_close($mysqli);

     while ($row = $result->fetch_assoc()) {        
        echo $row['comic_id'];
    }

//session_destroy();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:55:10.540

您需要*通过*`comicstags`表连接到表`tags`，才能获得`TagName`. 所以再加一个`INNER JOIN`：

```
SELECT 
 /* Selecting all columns from comics and tags, not from comicstags */
 c.*,
 t.*
FROM 
  comics c
  /* First join matches comics to comicstags */
  INNER JOIN comictags ct ON (c.id = ct.comicID)
  /* Second join pairs comicstags to tags */
  INNER JOIN tags t ON (t.TagID = ct.TagID)
WHERE 
   ct.tagID IN (1, 2, 3)     
   /* Or those which have no tags */
   OR ct.tagID IS NULL 
```

`GROUP BY`由于您没有使用聚合（`COUNT(), SUM(), MIN(), MAX()`等），因此已将其删除。如果您只想要唯一的行，请添加`DISTINCT`到`SELECT`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:03:54.537

用这个 ：

```
select t.TagId,t.TagNamem,cs.Path from Tag t
inner join ComicTag ct
on(t.TagId =ct.TagId)
inner join Comics cs
on(ct.ComicID = cs.Comic_id)
where t.TagId = $tag_cliked 
```

我希望这有帮助。

萨卢多斯 ;)

# javascript - 图像旋转时消失的 A 标签

> ID：15069702
> 
> 赞同：0
> 
> 时间：2013-02-25T14:49:31.940
> 
> 标签：javascript, html

我正在使用一个简单的脚本，当单击并拖动或滑动 4px 时，一系列 div 变得可见或不可见以创建图像旋转效果。现在有趣的是，当我进行完整旋转时，系列中的第一个 div 不再可见，它只是跳过它。现在，最后一个 div 和第一个 div 是同一个图像真的没关系，我只是好奇为什么会这样。这是旋转的脚本。

```
<script>
jQuery(document).ready(function ($) {
    var $product = $('#product'),
        $imgs = $product.find(".child"),
        imageTotal = $imgs.length - 1,
        clicked = false,
        widthStep = 4,
        currPos,
        currImg = 0,
        lastImg = 0;
    $imgs.bind('mousedown', function (e) {
        e.preventDefault(); // prevent dragging images
    })
        .filter(':gt(0)').addClass('notseen');

    $product.bind('mousedown touchstart', function (e) {
        if (e.type == "touchstart") {
            currPos = window.event.touches[0].pageX;
        } else {
            currPos = e.pageX;
        }
        clicked = true;
        return false;
    });
    $(document)
        .bind('mouseup touchend', function () {
        clicked = false;
    })
        .bind('mousemove touchmove', function (e) {
        if (clicked) {
            var pageX;
            if (e.type == "touchmove") {
                pageX = window.event.targetTouches[0].pageX;
            } else {
                pageX = e.pageX;
            }
            widthStep = 4;
            if (Math.abs(currPos - pageX) >= widthStep) {
                if (currPos - pageX >= widthStep) {
                    currImg++;
                    if (currImg > imageTotal) {
                        currImg = 1;
                    }
                } else {
                    currImg--;
                    if (currImg < 1) {
                        currImg = imageTotal;
                    }
                }
                currPos = pageX;
                $imgs.eq(lastImg).addClass('notseen');
                $imgs.eq(currImg).removeClass('notseen');
                lastImg = currImg;
                // $obj.html('<img src="' + aImages[options.currImg] + '" />');
            }
        }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:08:45.240

```
if (currImg > imageTotal) {
  currImg = 1;
} 
```

应该是

```
if (currImg > imageTotal) {
  currImg = 0;
} 
```

# xpages - 在网站中使用受 acl 保护的 nsf

> ID：15069703
> 
> 赞同：0
> 
> 时间：2013-02-25T14:49:36.687
> 
> 标签：xpages

我有一些 nsf（我们称它们为 one.nsf 和 two.nsf）文件，anonymous 无法访问它们。另一个 nsf 例如 website.nsf 包含来自这些 nsf 文件（one.nsf 和 two.nsf）的一些图片和文档的 unid 和文件名。如何在“xpage”网站中显示（我的意思是访问）这些图片和文档？我必须在服务器上创建一种虚拟用户吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:18:01.440

您可以通过创建代理或 XAgent 来做到这一点，它充当代理来访问不同用户上下文中的图像/文档等。

代理在签署代理的用户/ID 的上下文中运行 - 这是需要访问*one.nsf*和*two.nsf*的用户。XAgent 可以使用*sessionAsSigner*或*sessionAsSignerWithFullAccess*访问数据并返回结果。

但请记住，这会在您当前的应用程序安全性中造成一个安全漏洞：为什么只有有限的用户组可以访问您的图片？为什么不允许公共访问用户访问这些图像/文档？也许最好创建一个*three.nsf*，它只包含每个用户都可以访问的数据，并让公共用户访问这个数据库。

**编辑**：不久前，我创建了一个允许更高访问权限的 DocumentDataSource，但这会给您带来同样的安全问题：[http ://hasselba.ch/blog/?p=723](http://hasselba.ch/blog/?p=723)

# actionscript-3 - 引用其他项目的问题

> ID：15069704
> 
> 赞同：0
> 
> 时间：2013-02-25T14:49:44.047
> 
> 标签：actionscript-3, apache-flex, flash-builder

我正在尝试从我在 Flash Builder 4.6 中的工作项目中引用一个库项目，但是它不起作用。当我尝试从库项目中导入一个类时，我得到一个错误。

*   **我已经引用了图书馆项目：**

![参考项目](../Images/a5334333ec87297f25d2e697e12fad1e.png)

*   **我可以在包资源管理器中看到我想使用的类：**

![包浏览器](../Images/76bbe64ae6407cfb5858277b4b5ae5cb.png)

*   **但我无法将该类导入我的工作项目：**

![导入错误](../Images/7ed0c1e0f3d1f24cd7b932db91354727.png)

我尝试重新启动 IDE，并尝试删除 AS3CoreLib，然后再次创建它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:58:28.347

您想将该项目 [或 SWC] 添加到您的库路径中。这与“参考项目”不同。

[我写了一篇关于如何处理 SWC](https://www.flextras.com/blog/index.cfm/2009/12/18/What-do-you-do-with-a-SWC?event=PurchaseHistory)的详细博客文章。您可以使用“添加项目”按钮代替“添加 SWC”按钮。

# javascript - 失去悬停后没有 mouseup

> ID：15069708
> 
> 赞同：3
> 
> 时间：2013-02-25T14:49:51.957
> 
> 标签：javascript, jquery, html

[http://jsfiddle.net/rpfHw/](http://jsfiddle.net/rpfHw/)

我们有一个`input`and 类`active`，在 上添加`mousedown`和删除`mouseup`。

当鼠标光标放在输入上时效果很好。

问题是，单击，按住并从中删除光标`mouseup`后不起作用-类未删除。`input``active`

可以修复吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:53:06.933

那是因为`mouseup`没有在输入上触发，而是在它之外触发。为此，您可以在对象上使用通用事件处理程序`document`：

```
$(document).mouseup(function() {
    $('input.active').removeClass('active');
}); 
```

[http://jsfiddle.net/rpfHw/1/](http://jsfiddle.net/rpfHw/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:55:20.080

我将提出一个 CSS 解决方案。您可以使用以下规则达到相同的效果：

```
input:active{
    outline: 10px solid #000;
} 
```

(IE8+)

[http://jsfiddle.net/rpfHw/6/](http://jsfiddle.net/rpfHw/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T14:58:46.810

我建议收听事件 focusin 和 focusout。如果您使用键盘选择输入或将其保留在键盘上，则不会触发鼠标事件。

你可以这样做：

```
$('input').on('focusin focusout', function(event) {
    $(this).toggleClass('active', event.type==='focusin');
}); 
```

您所描述的问题仍然会发生，因为如果您在内部按下鼠标并将鼠标拖到外部，该元素仍将具有焦点，但我想这没关系，因为输入仍然具有焦点。

如果您想完全使用鼠标事件来处理它，并且还想解决将鼠标拖到外面的问题，那么您将不得不在 dom 对象上使用鼠标事件来实现它，然后检查处理程序中的正确元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T14:55:04.560

对我来说工作正常，请检查以下代码：

$('input').bind('click mouseup mousedown', function(event) { // 点击事件的一些代码

```
if (event.type == 'mousedown'){
    console.log('mousedown');    
    $(this).addClass('active');
    }

if (event.type == 'mouseup'){
    console.log('mouseup');
    $(this).removeClass('active');
}

//console.log(event.type); 
```

}); [http://jsfiddle.net/rpfHw/3/](http://jsfiddle.net/rpfHw/3/)

最好的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T17:08:16.037

好吧，我尝试了很多方法来解决这个问题。

更好的结果是用 with`mouseup`替换`mouseout`。

由于我们使用的是鼠标，它只是在未悬停时删除类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-16T17:45:42.327

我最近遇到了同样的问题。我通过向目标元素添加**mouseleave**事件来解决此问题。

# sql-server-2008 - sql server 2008静默安装后登录失败

> ID：15069710
> 
> 赞同：0
> 
> 时间：2013-02-25T14:49:57.310
> 
> 标签：sql-server-2008, command-prompt, silent-installer

有以下命令使用 CMD 提示符安装 sql。

> C:\SQL Server 2008\setup.exe" /QS /INDICATEPROGRESS /ACTION=Install /IACCEPTSQLSERVERLICENSETERMS /SkipRules=RebootRequiredCheck /FEATURES=SQL,RS,BIDS,Conn,BC,SDK,BOL,SSMS,ADV_SSMS,SNAC_SDK,OCS / INSTANCENAME=MSSQLServer /AGTSVCACCOUNT="NT AUTHORITY\SYSTEM" /AGTSVCSTARTUPTYPE=手动 /SQLSVCACCOUNT="NT AUTHORITY\SYSTEM" /SQLSVCSTARTUPTYPE=自动 /ASSVCACCOUNT="NT AUTHORITY\SYSTEM" /ASSVCSTARTUPTYPE=自动 /RSSVCACCOUNT="NT AUTHORITY\SYSTEM " /RSSVCSTARTUPTYPE=自动 /ISSVCACCOUNT="NT AUTHORITY\SYSTEM" /ISSVCSTARTUPTYPE=自动 /BROWSERSVCSTARTUPTYPE=禁用 /SECURITYMODE=SQL /SAPWD=test /RSINSTALLMODE=DefaultNativeMode /ASSYSADMINACCOUNTS="NT AUTHORITY\SYSTEM" /SQLSYSADMINACCOUNTS="NT AUTHORITY\系统

安装顺利，所有必需的服务都已安装。

我遇到的问题是当我尝试通过管理工作室登录到已安装的实例时，我得到“服务器名称：”

错误号：18456。 ??

如何重新分配参数值，以便在安装后能够登录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:55:16.953

您应该使用 .\SQLEXPRESS 作为服务器名称和 Windows 身份验证。要从您的 PC 名称访问 sql，请按照本教程进行操作。[点击这里](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx)

# c# - 必填字段验证器是否需要验证调用？

> ID：15069711
> 
> 赞同：2
> 
> 时间：2013-02-25T14:50:02.897
> 
> 标签：c#, asp.net

所以我继承了一些旧的、糟糕的代码，我正试图将它们从 VB 转换为 C# 并引起人们的注意（或者至少让它不那么可笑）。

我在里面到处都是这样的代码：

```
rfvReasons.Validate();

if rfvReasons.isValid)
{
    // do something
} 
```

每次您想使用 isValid 时都需要这些 Validate 调用吗？对象的 onChange 事件不会导致验证器更新吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:58:11.743

`.Validate();`在检查`isValid`属性之前，您通常不需要调用验证器。当他们将页面发回服务器时会执行验证，因此`isValid`在您运行服务器端代码时应该是最新的。

查看[`BaseValidator`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basevalidator.aspx)类（从其`RequiredFieldValidator`派生）：

> ASP.NET 提供了许多能够回发到服务器的控件。当这些控件之一将其 CausesValidation 属性设置为 true 时，将在控件回发到服务器时执行验证。

# asp.net - 向 .net Web 应用程序添加类感知全局函数

> ID：15069718
> 
> 赞同：0
> 
> 时间：2013-02-25T14:50:23.293
> 
> 标签：asp.net, .net, scope

当我开始使用 asp 工作时，我发现几乎不可能抛弃 php 的旧`echo()`功能——我的手下意识地输入了它而不是`response.write()`.

因此，在 .net 页面中，我倾向于创建如下内容：

```
Public Sub echo(ByVal strValue As String)
    Response.Write(strValue)
End Sub 
```

在 .net 类（即 app_code 文件夹中的类）中，我倾向于创建如下内容：

```
Public Sub echo(ByVal strValue As String)
    HttpContext.Current.Response.Write(strValue)
End Sub 
```

虽然这很好用——我想把它放在应用程序级别，这样它就可以在任何地方使用（即在类中、aspx 代码隐藏页面等）。

棘手的一点是 app_code 中的类，即它们需要用来`HttpContext.Current.`访问该`Response.Write`方法。

我知道你可以通过将它作为公共类中的共享子来拥有“全局”功能，但这仍然需要双桶使用（我认为？）即`tools.echo()`

**我的问题：**是否有可能拥有一个不需要包含类的全局函数，如果是这样，如何让它具有类意识，即如果它在 app_code 类中使用，那么它需要使用`HttpContext.Current.Response.Write`vs code-可以`Response`直接访问的页面后面。

撇开我的坏习惯不谈，`echo()`实际上代码看起来比`Response.Write()`我想以这种方式全球化的其他一些方法要整洁得多 - 因此我的问题是:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:57:39.790

创建您的“帮助”函数以接受上下文作为参数。

```
public partial class MyPage : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
        }
    }

    private void LogoutUser()
    {
        Helpers.SessionHelpers.LogoutUser(this.Context);
    }
} 
```

和

```
internal static class SessionVariableKeys
{
    internal static readonly string USER_ID = "UserId";
} 
```

和

```
internal static class SessionHelpers
{
    internal static void LogoutUser(System.Web.HttpContext context)
    {
        context.Session[SessionVariableKeys.USER_ID] = null;
                    /* or */
        context.Session.Remove(SessionVariableKeys.USER_ID);
                    /* or */
        context.Session.RemoveAll();
        /* and */
        /* icing on the cake */
        context.Session.Abandon();

        /*context.Response.Redirect("SomePage.aspx"); */
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:59:17.623

在 C# 中，您不能创建顶级函数。[C# 编译器的开发人员 Eric Lippert 在这篇博](http://blogs.msdn.com/b/ericlippert/archive/2009/06/22/why-doesn-t-c-implement-top-level-methods.aspx)文中解释了原因。

> C# 从一开始就被设计为面向专业开发人员的大规模应用程序开发语言；它从未打算成为一种脚本语言。因此，它的设计鼓励将即使是很小的代码块也立即组织成组件。C# 是一种面向组件的语言。因此，我们希望鼓励以基于组件的风格进行编程，并阻止与这种风格相悖的功能。

至于你的技术问题，你必须在“你能”和“你应该”之间做出决定。

**你能：如果你有***真正*的全局实用方法，我的直接想法是使用静态实用程序类或单例。您可以做到的另一种“技术”方法是创建`object`类型的扩展方法。 **当心**，后者是不好的做法。

**你应该：**我的建议是以 C# 的方式做 C# 的事情。

# php - jquery .ajax GET 显示错误

> ID：15069728
> 
> 赞同：-3
> 
> 时间：2013-02-25T14:51:00.693
> 
> 标签：php, jquery, ajax

我花了两个小时来创建一个非常小的 jquery ajax 片段，但这不起作用，这让我抓狂。出了什么问题，我找不到？我实际上不知道如何调试这个：

```
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script> 
<script type="text/javascript">
$(function () {
    $('#subForm').submit(function (e) {            
        $.ajax({
            url: 'subscribe.php',
            type: 'GET',
            data: "id = " + 2,  //EDIT: I have changed this to "id=2", but also not working                  
            success: function(result){
                alert("token recieved: " + result);
            },
            error: function() {
                alert('Error occured!')
            },                  
        });
    });
});
</script> 
```

如果直接调用 subscribe.php 可以工作：

```
<?php  
   include "conf.php";      
   $email = 'test';
   $query = 'INSERT INTO subscribers(email) VALUES("'.$email.'")';
   mysql_query($query);

  echo 'Success';
  exit;    
?> 
```

这给了我文本“发生错误！” 然后页面被重定向到“subscribe.php”。我第一次有 getjson 调用，但它不起作用，我决定将其更改为 .ajax get。

1）为什么会发生错误？

2）然后-即使是错误的，为什么用户被重定向到subscribe.php，这是ajax，为什么用户没有留在同一页面上？

**编辑** 如果我添加返回 false，则用户不会被重定向到 subscribe.php。这解决了。

这可以通过更改数据来解决：“id=2”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:54:10.297

你在`data: "id = " + 2`. 并且还使用`e.preventDefault()`

## 它会做什么？

如果您有空格，那么在发送请求时，该空格也将被视为参数的一部分。

像：`id%20=%202`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:54:39.063

我认为您的 javascript 中有错误。

```
data: "id = " + 2 
```

改为尝试：

```
data: "id="+"2" 
```

否则，您尝试将数字 2 添加到字符串中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T14:55:17.380

```
$.ajax({
    url: '/subscribe.php',
    type: 'GET', 
    data: "{id: 2}",
    dataType: "json",
    async: true,                   
    success: function(result){
        alert("token recieved: " + result);
    },
    error: function() {
        alert('Error occured!');
    },                  
}); 
```

并在您的 PHP 中，尝试首先回显 $_GET。

看到您收到从 javascript 发送的带有键值的 get。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T18:12:24.733

使用这样的东西不是更容易吗？

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script>
  $(document).ready(function() {
    $('#subForm').submit(function () { 
      window.open('subscribe.php?id='+id);
    });
  });
</script> 
```

以下是您希望在当前页面中显示结果的情况：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script>      
  $(document).ready(function() {
    $('#subForm').submit(function () { 
      $('<PUT THE DIV ID/CLASS HERE>').load('subscribe.php?id='+id);
    });
  });
</script> 
```

PS：我很可能忽略了 OP 不使用它的原因，如果是这种情况，请忽略我的回答。

# jquery - Kendo MVVM 绑定添加/插入项目，如何？

> ID：15069729
> 
> 赞同：2
> 
> 时间：2013-02-25T14:51:04.620
> 
> 标签：jquery, asp.net, mvvm, kendo-ui, datasource

我已经定义了一个带有传输方法（创建、读取、更新和销毁）的 kendo 数据源，以及一个模式定义：

```
$(document).ready(function() {
        var viewModel = kendo.observable({
            dsMedication: new kendo.data.DataSource({
                type: "json",
                serverFiltering: true,
                serverPaging: true,
                pageSize: 6,
                error: function(e) {
                    //alert(e.responseText);
                    //var error_obj = $.parseJSON(e.responseText);
                    //if (error_obj.Message != null) {
                    //alert(error_obj.Message);
                    //}
                },
                transport: {
                    read: {
                        contentType: "application/json; charset=utf-8",
                        type: "POST",
                        url: "../Services/svcMedication.asmx/SearchMedication",
                        dataType: "json",
                        cache: false
                    },
                    update: {
                        contentType: "application/json; charset=utf-8",
                        type: "POST",
                        url: "../Services/svcMedication.asmx/SaveMedication",
                        dataType: "json",
                        cache: false
                    },
                    destroy: {
                        url: "../Services/svcMedication.asmx/DeleteMedication",
                        type: "DELETE",
                        dataType: "json",
                        cache: false
                    },
                    create: {
                        contentType: "application/json; charset=utf-8",
                        type: "POST",
                        url: "../Services/svcMedication.asmx/SaveMedication",
                        cache: false
                    },
                    parameterMap: function(options, operation) {
                        if (operation !== "read" && options.models) {
                            return kendo.stringify({ models: options.models });
                        }
                        options.MedicationParam = $('#acMedications').val();
                        return kendo.stringify(options);
                    }
                },
                batch: true,
                schema: {
                    data: "d",
                    model: {
                        id: "MedicationId",
                        fields: {
                            MedicationId: {
                                type: "number",
                                editable: false // this field is not editable
                            },
                            Name: {
                                type: "text",
                                validation: { // validation rules
                                    required: true // the field is required
                                }
                            }
                        }
                    }
                }
            }),
            SelectedMedication: null,
            HasChanges: false,
            save: function() {
                //if (this.SelectedMedication == null) {
                    //this.dsMedication.add({ MedicationId: this.get("MedicationId"), Name: this.get("Name") });
                //}
                this.dsMedication.sync();
                this.set("HasChanges", false);
            },

            remove: function() {
                if (confirm("Are you sure you want to delete this record?")) {
                    this.dsMedication.remove(this.SelectedMedication);
                    this.set("SelectedMedication", this.dsMedication.view()[0]);
                    this.change();
                }
            },
            showForm: function() {
                return this.get("SelectedMedication") !== null;
            },
            change: function() {
                this.set("HasChanges", true);
            }
        });

        kendo.bind($("#fmMedication"), viewModel);
    }); 
```

我的表单元素包含适当的数据绑定属性到表单元素，我正在调用 kendo.bind 传递表单。目标是表单用于**添加**和**编辑**记录。

如果我搜索一个项目并对其进行更改，一切都会像魅力一样！

**我的问题是：**

我不确定如何编写代码来初始化表单以向数据源**添加**新记录。

我一直没有成功地在任何地方找到关于此的示例或资源！

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:06:16.907

基本上，由于您没有明确定义模型，因此您无法轻松创建它的实例。因此，如果您像[这里](http://docs.kendoui.com/api/framework/model)一样单独声明了模型- 创建实例会更容易一些，并且很可能您会知道下一步该做什么。

在您的情况下，您可以像这样创建模型的实例：

```
var newRecord = new viewModel.dsMedication.reader.model(); 
```

一旦有了新记录，您就可以通过 add 或 insert 方法轻松地将其添加到 dataSource 中（它们都在文档中进行了描述）。

最后，当您在本地添加记录时（您应该能够立即在屏幕上看到更改），您可以调用dataSource的**同步**方法将这些新记录发送到服务器上 - 创建传输选项将是用过的。

# c++ - VS 2008 中的多列表示 C++

> ID：15069730
> 
> 赞同：0
> 
> 时间：2013-02-25T14:51:10.803
> 
> 标签：c++, visual-studio-2008

我想制作一个应用程序，其中 listBox 输出将具有如下列：

```
Name   |Priority | Date
Task 1 |High     | Today
Task 2 |High     | Today
Task 3 |High     | Today
Task 4 |High     | Today 
```

但我似乎没有找到将数据输入不同列的方法。

如何在 VS C++ 2008 express 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:54:29.813

列表*框*不会这样做（无论如何，很方便）。您需要报表视图中的[列表*控件*](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774735.aspx)。由于 Express 不包含 MFC，因此您必须使用原始 Win32 API 来执行此操作（或者使用其他语言（例如使用 WinForms 的 C#）来执行此操作，我不建议这样做）。

# powershell - Powershell StreamReader ReadLine / ReadToEnd 多次读取同一行

> ID：15069734
> 
> 赞同：2
> 
> 时间：2013-02-25T14:51:19.630
> 
> 标签：powershell, streamreader, powershell-3.0

我有一个函数来检索文本文件的最后 n 行（在本例中为日志文件）：

```
function Get-Tail([object]$reader, [int]$count = 10) {

    $lineCount = 0
    [long]$pos = $reader.BaseStream.Length - 1

    while($pos -gt 0)
    {    
        $reader.BaseStream.position=$pos

        if ($reader.BaseStream.ReadByte() -eq 10)
        {
            $lineCount++
            if ($lineCount -ge $count) { break }
        } 
        $pos--
    } 

    # tests for file shorter than requested tail
    if ($lineCount -lt $count -or $pos -ge $reader.BaseStream.Length - 1) {
        $reader.BaseStream.Position=0
    } else {
        $reader.BaseStream.Position = $pos+1
    }

    # debug
    write-host $reader.readtoend()

    [....]
} 
```

在 Write-Host 处捕获我发现 $pos 为 166（即远在 EndOfStream 之前）。

输出是：

```
2013/02/23 03:39:13 ERROR 2 (0x00000002) Accessing Source Directory \\[redacted]
The system cannot find the file specified. -------------------------------------------------------------------------------

  Started : Sat Feb 23 03:39:13 2013

   Source : [redacted]
     Dest : [redacted]

    Files : *.*

  Options : *.* /FFT /V /TS /FP /NDL /TEE /S /E /COPY:DATS /SECFIX /PURGE /MIR /B /NP /XO /XN /XC /R:0 /W:0 

------------------------------------------------------------------------------

2013/02/23 03:39:13 ERROR 2 (0x00000002) Accessing Source Directory \\[redacted]
The system cannot find the file specified. 
```

因此，最后两行被重复。我已经尝试过先冲洗流式阅读器，没有任何可能。

这有点令人困惑。我想我犯了一个小学生错误，但不知道是哪一个。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:58:10.700

如果您可以远离 StreamReader，那么您可以使用这个简单的命令来检索文本文件中的最后 x 行。

```
Get-Content C:\example.txt -Tail 10 
```

# vb.net - 从列表中选择任何随机字符串

> ID：15069736
> 
> 赞同：2
> 
> 时间：2013-02-25T14:51:22.130
> 
> 标签：vb.net, visual-studio-2010, vb.net-2010

如何从给定的字符串列表中选择任何随机字符串？例子：

```
List1: banana, apple, pineapple, mango, dragon-fruit
List2: 10.2.0.212, 10.4.0.221, 10.2.0.223 
```

当我调用诸如**randomize(List1) = somevar**之类的函数时，它只会从该特定列表中获取任何字符串。**somevar**中的结果将是完全随机的。如何做呢？非常感谢你 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T14:54:54.743

采用[`Random`](http://msdn.microsoft.com/en-us/library/system.random.aspx)

```
Dim rnd = new Random()
Dim randomFruit = List1(rnd.Next(0, List1.Count)) 
```

请注意，如果要在循环中执行此代码，则必须重用随机实例。否则这些值将重复，因为 random 是用当前时间戳初始化的。

所以这有效：

```
Dim rnd = new Random()
For i As Int32 = 1 To 10
    Dim randomFruit = List1(rnd.Next(0, List1.Count))
    Console.WriteLine(randomFruit)
Next 
```

因为总是使用相同的随机实例。

但这不起作用：

```
For i As Int32 = 1 To 10
    Dim rnd = new Random()
    Dim randomFruit = List1(rnd.Next(0, List1.Count))
    Console.WriteLine(randomFruit)
Next 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:55:01.270

创建[`List`一个`String`s](http://msdn.microsoft.com/en-gb/library/6sh2ey19.aspx)。
创建一个随机数生成器：[Random类](http://msdn.microsoft.com/en-us/library/system.random.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)
调用随机数生成器的`NextInt()`方法`List.Count`作为上限。
返回`List[NextInt(List.count)]`。
任务完成 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T14:55:25.923

生成一个介于 1 和列表大小之间的随机数，并将其用作索引？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T15:00:33.457

试试这个：

```
Public Function randomize(ByVal lst As ICollection) As Object
    Dim rdm As New Random()
    Dim auxLst As New List(Of Object)(lst)
    Return auxLst(rdm.Next(0, lst.Count))
End Function 
```

或仅用于字符串列表：

```
Public Function randomize(ByVal lst As ICollection(Of String)) As String
    Dim rdm As New Random()
    Dim auxLst As New List(Of String)(lst)
    Return auxLst(rdm.Next(0, lst.Count))
End Function 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-19T18:11:03.010

你可以试试这个，这是一个从列表中选择每个项目的简单循环，但是以随机方式：

```
Dim Rand As New Random
For C = 0 to LIST.Count - 1 'Replace LIST with the collection name
    Dim RandomItem As STRING = LIST(Rand.Next(0, LIST.Count - 1)) 'Change the item type if needed (STRING)

    '' YOUR CODE HERE TO USE THE VARIABLE NewItem ''

Next 
```

# jquery - Twitter引导程序未正确显示

> ID：15069737
> 
> 赞同：1
> 
> 时间：2013-02-25T14:51:23.953
> 
> 标签：jquery, html, css, twitter-bootstrap

所以我正在寻找这个： http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)内联表单`.form-inline`

现在在我的页面上，输入看起来像没有填充一样连线：

现场示例：这里：http: [//jsbin.com/ariret/1/edit](http://jsbin.com/ariret/1/edit)

这是我的代码：

```
 <div class="navbar">
        <div class="navbar-inner">
          <form class="form-inline" action="<?php echo $this->baseUrl('login'); ?>" id="form-login" method="post">
            <input type="text" class="input-small" id="email" name="email-login" placeholder="<?=$this->translate('Email');?>">
            <input type="password" class="input-small" id="password" name="password-login"  placeholder="<?=$this->translate('Password');?>">
            <label class="checkbox">
              <input type="checkbox" name="keep-logged" value="1" id="check-logged"> <?=$this->translate('Remember me'); ?>
            </label>
            <input type="hidden" name="login_type" value="normal" />
            <button type="submit" class="btn"><?=$this->translate('Login');?></button>
          </form>
        </div><!-- end navbar-iner -->
      </div><!-- end navbar --> 
```

这是它的样子：

![在此处输入图像描述](../Images/b20eb75ad29001af60bfdaabda53d585.png)
它需要与登录按钮具有相同的高度。我的页面中包含 css 和 js 文件！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:05:53.157

这似乎是 Bootstrap 的 JSbin 错误。其他测试站点（和本地主机）显示这可以按预期工作。

Bootstrap 将输入字段的高度设置为 20 像素，但尚未应用。答案尚不清楚，但您可以随时前往[https://github.com/remy/jsbin/issues/new](https://github.com/remy/jsbin/issues/new)并提交新问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:23:34.977

"*它需要与登录按钮具有相同的高度。我的页面中包含 css 和 js 文件！* "

```
<button type="submit" class="btn btn-primary btn-mini">login</button> 
```

将按钮的高度降低到（几乎）输入的高度

如果你想增加输入的高度来对齐按钮，我建议你在本地覆盖css

```
<style type="text/css">
.form-inline .input-small {
  height: 30px;
  margin-top: 3px;
}
</style> 
```

两种“解决方案”都适用于 jsbin 示例 - [http://jsbin.com/ariret/4/edit](http://jsbin.com/ariret/4/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:20:30.130

您可以通过以下方式创建：

Jsfiddle[工作内联引导程序表单](http://jsfiddle.net/shail/BB8ns/3/)

结果在浏览器中[Jsfiddle 在浏览器中](http://jsfiddle.net/shail/BB8ns/3/show)

```
<div class="navbar">
        <div class="navbar-inner">
            <div class="container-fluid">
                <div class="nav row-fluid">

                        <form class="form-inline pull-right">
                            <input type="text" placeholder="email or username" />
                            <input type="password" placeholder="password" />
                            <label class="checkbox">
          <input type="checkbox" name="keep-logged" value="1" id="check-logged"> <?=$this->translate('Remember me'); ?>
        </label>
        <input type="hidden" name="login_type" value="normal" />
                            <button type="submit" class="btn">login</button>
                        </form>

                </div>
            </div>
        </div>
    </div> 
```

# cygwin - 自动窗口标题更新

> ID：15069745
> 
> 赞同：1
> 
> 时间：2013-02-25T14:51:56.247
> 
> 标签：cygwin

是否有一种机制可以根据环境变量的当前值设置 cgywin 窗口的标题？

前段时间我发现了这个小脚本（我认为是这样），它允许将窗口标题设置为特定的字符串：

```
echo -ne "\e]2;$@\a\e]1;$@\a"; 
```

* * *

*背景*：我刚刚从使用 Subversion 切换到 Perforce（公司政策），发现自己反复检查`P4CLIENT`环境变量的值以了解我当前的工作空间是什么。让 cygwin 窗口的标题自动包含该环境变量的当前值会非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:00:45.283

至少如果您使用 Bash 和 Mintty，您可以查看[SuperUser 上的这篇文章](https://superuser.com/a/471661/140335)。

因此，在您的情况下，您可以执行以下操作（单引号从原始答案更改为双引号，因为单引号不会插入）：

```
echo -ne "\e]0;$P4CLIENT\a" 
```

然后，您可以将该行添加到您的`.bashrc`文件中以使其永久化。

# php - Foreach 链接到全尺寸图像

> ID：15069748
> 
> 赞同：0
> 
> 时间：2013-02-25T14:52:02.520
> 
> 标签：php, image, foreach, permalinks

我想将此链接到全尺寸图像

```
<?php echo $p['thumb']; ?> 
```

我不能链接到每个图像，只是总是相同。

我想将同位素与 Fancybox 结合起来。

谢谢奥尼
_

我正在使用这段代码：

```
<?php
// get portfolio
$args = array( 'post_type' => 'portfolio', 'posts_per_page' => 100, 'orderby' => 'title', 'order' => 'asc' );
$loop = new WP_Query( $args );    
$port = array();
while ( $loop->have_posts() ) : $loop->the_post();      
        $idx = get_the_ID();
        $year_completed = get_post_meta($idx, 'year_completed', true);
        $website_addr = get_post_meta($idx, 'website_address', true);
        $thumb = get_the_post_thumbnail($idx, 'thumbnail'); //250x200 - featured image
        $title = get_the_title();
        $excerpt = get_the_excerpt();
        $content = get_the_content();

        //get 'Solutions' terms
        $terms = get_the_terms($idx, 'Solutions');
        $terms_string = '';

        //build up comma delimited string
        foreach($terms as $t){
            $terms_string .= $t->slug . ' ';
        }
        $port[] = array(
            'id' => $idx,
            'year_completed' => $year_completed,
            'website' => $website_addr,
            'thumb' => $thumb,
            'title' => $title,
            'content' => $content,
            'excerpt' => $excerpt,
            'terms' => $terms,
            'terms_string' =>$terms_string, //classifications (comma delimited slugs)
            'permalink' => get_permalink(),
        );
endwhile;

$terms = get_terms('Solutions');    

$filters = '<section id="options" class="clearfix">
            <ul id="filters" class="option-set floated clearfix">
            <li><a href="#filter" data-filter="*" class="selected">show all</a></li>';                          

            foreach($terms as $t){          
              $filters .= '<li><a href="#filter" data-filter=".' . $t->slug . '">' . $t->name . '</a></li>';// $t->count
            }
            $filters .= '</ul></section>';
?> 
```

和：

```
<!-- add this inside entry-content -->
<?php echo $filters; ?>                 
<div id="portfolio">

    <!-- isotope -->
    <ul class="thumbnails isotope">
    <?php foreach($port as $p){ ?>
        <li class="span3 element <?php echo $p['terms_string']; ?>">
            <div class="thumbnail">

                <?php echo $p['thumb']; ?>

                <div class="caption">
                  <h5><a href="<?php echo $p['permalink']; ?>"><?php echo $p['title']; ?></a></h5>
                </div><!-- end caption -->
            </div><!-- end thumbnail -->
        </li>
    <?  } //end foreach ?>
    </ul>

</div><!-- end #portfolio --> 
```

# jquery - 客户端验证在我的 MVC3 应用程序中不起作用

> ID：15069751
> 
> 赞同：0
> 
> 时间：2013-02-25T14:52:15.343
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui

我正在尝试在我的一个视图中放置电子邮件字段的验证。

但不幸的是，它不起作用。有人可以帮助我。

这是我的 HTML。

```
<!DOCTYPE html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>About SJ Electrical Ltd</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <script src="/Content/js/vendor/modernizr-2.6.2.min.js"></script>
</head>
<body>
    <div id="main">
<section class="main-content">
<form action="/info/contact" method="post">    <div id="contact-content">
        <article class="double-columned">
            <header></header>
            <img id="map-image" src="/Content/img/map.png" />
            <p>
                <span class="bold">Request a call Back
                </span>
            </p>
            <div class="one-third-column">
                <label for="Name">Name:</label>
                <input class="text-box single-line" id="Name" name="Name" type="text" value="" />

                <label for="Email">Email Address:</label>
                <input class="text-box single-line" data-val="true" data-val-required="Email address required." id="Email" name="Email" type="email" value="" />
                <span class="field-validation-valid" data-valmsg-for="Email" data-valmsg-replace="true"></span>
            </div>
            <div class="one-third-column">
                <label for="Message">Comments:</label>
                <textarea cols="20" id="Message" name="Message" rows="4">
</textarea>
                <div>
                    <input type="button" id="btnSendMessage" value="Submit" />
                </div>
            </div>
        </article>
    </div>
</form>
        </section>
    </div>
    <script src="/Scripts/jquery-1.7.1.js"></script>
    <script src="/Scripts/jquery.unobtrusive-ajax.js"></script>
<script src="/Scripts/jquery.validate.js"></script>
<script src="/Scripts/jquery.validate.unobtrusive.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            $("#btnSendMessage").on("click", sendCallBackRequest);
        });

        function sendCallBackRequest() {

                $.ajax({
                    type: 'POST',
                    url: '/Contact/SendJSonMessage',
                    //data: $('#form').serialize(),
                    data: contactRequest,
                    contentType: "application/json; charset=utf-8",
                    traditional: true,
                    success: sentMessage,
                    error: errorInSendingMessage
                });
        }

    </script>
     <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="~/content/js/vendor/jquery-1.9.0.min.js"><\/script>')</script>
    <script src="/content/js/plugins.js"></script>
    <script src="/content/js/main.js"></script>
    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script type="text/javascript">
        var _gaq = [['_setAccount', 'UA-XXXXX-X'], ['_trackPageview']];
        (function (d, t) {
            var g = d.createElement(t), s = d.getElementsByTagName(t)[0];
            g.src = ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g, s);
        }(document, 'script'));
    </script>
</body>
</html> 
```

这是我的模型。

```
public class UserMessage
    {

        [Required(AllowEmptyStrings = false,ErrorMessage = "Email address required.")]
        [DataType(DataType.EmailAddress, ErrorMessage = "Invalid Email Address")]
        [Display(Name = "Email Address:")]
        public string Email { get; set; }

        [AllowHtml]
        [Display(Name = "Comments:")]
        public string Message { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:21:15.910

我认为您只需要添加 [EmailAddress] 验证属性。

[DateType] 实际上并不进行验证。认为它只是添加了 HTML 输入类型属性。

```
[Required(AllowEmptyStrings = false, ErrorMessage = "Email address required.")]
[DataType(DataType.EmailAddress)]
[EmailAddress]
[Display(Name = "Email Address:")]
public string Email { get; set; } 
```

# jquery - jQuery：计算图像

> ID：15069760
> 
> 赞同：0
> 
> 时间：2013-02-25T14:52:46.840
> 
> 标签：jquery

我有一个名为`example_**_title.jpg`.

我想用 jQuery/Javascript 计算这些图像并返回图像的数量。

我试过：

```
count = 0;
for (var i=0; i<=10; i++){
   var bg_url = 'http://www.example-url.com/example_'+i+'_title.jpg';
   $.get(bg_url)
   .done(function(){ 
      count++;
   })
   .fail(function(){
   });
}
alert(count); 
```

谢谢您的帮助。

琼斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:59:47.870

由于您不想要`get`文件而只是计数，因此您可以使用`type:'HEAD'`它应该减少数据量：

```
$.ajax({
    url:'http://www.example-url.com/example_'+i+'_title.jpg',
    type:'HEAD',
    error: function()
    { 
      //file doesn't exist
    },
    success: function()
    {
        count++;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:02:28.437

您的代码应该可以工作，这是您的代码中缺少的引号。我希望这只是一个错字。

```
count = 0;
for (var i=0; i<=10; i++){
   var bg_url = 'http://www.example-url.com/example_'+i+'_title.jpg';
   $.get(bg_url, function(data){ count++; });
}
alert(count); 
```

# jquery - 自动完成不显示返回的结果

> ID：15069764
> 
> 赞同：15
> 
> 时间：2013-02-25T14:53:06.717
> 
> 标签：jquery, autocomplete, jquery-ui-autocomplete

尽管 php 代码返回 json 结果，但我无法显示 jquery 自动完成的结果。jquery代码如下：

```
$("#newName").autocomplete({
    source: function(request, response) {
        $.ajax({
            url: root + "/assets/php/autocomplete.php",
            dataType: "json",
            data: {
                term : request.term,
                field : "name"
            },
            success: function(data) {
                response(data);
            }
        });
    }); 
```

php代码是：

```
while ($row = $result->fetch(PDO::FETCH_ASSOC)) {
    $row_array['value'] = $row[$field];
    array_push($return_arr,$row_array);
}

echo json_encode($return_arr); 
```

在 Firebug 中检查结果时，我得到如下响应：

[{“价值”：“jdoe”}]

但是，我从来没有看到 html 页面中显示的建议列表。关于问题所在的任何建议。

谢谢， AB

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-25T17:02:30.093

我通过在我的主 css 文件中添加一个用于自动完成的 z-index 样式来解决这个问题。现在一切正常。

```
.ui-autocomplete {
z-index: 100;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-11-25T14:09:37.237

我也有同样的问题。对我来说，解决方案是像这样将 z-index 设置为更高的值

```
.ui-autocomplete
{
    position:absolute;
    cursor:default;
    z-index:1001 !important
} 
```

一些元素隐藏了自动完成表单。（在我的应用程序中）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-13T01:47:55.380

In the PHP code try to change 'value' for 'label':

```
while ($row = $result->fetch(PDO::FETCH_ASSOC)) {
    $row_array['label'] = $row[$field];
    array_push($return_arr,$row_array);
}

echo json_encode($return_arr); 
```

I don't know why, but it seems that this is important. I will attached the example that worked for me. In my case I had to do a MySQL connection from jQuery through a PHP file. I wanted to do an autocomplete field where you could write a username and, when you clicked on the username, the related fields (name, surname, email...) were populated. Here is my code:

**HTML code:**

```
 <html lang="en">
      <head>
      <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"   
      </script>
      <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
      <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>

      <!--Here there is my jQuery script-->
      <script type="text/javascript" src="scripts/myjQuery.js"></script>

      <title>EXAMPLE AUTOCOMPLETE</title>
   </head>
   <body>
     <h1>CREATING A NEW CASE</h1>         
     <form id='newcase' action="#" method="POST" name="newcase">      

      <label>Add Nickname </label>
      <input class="input-250" type="text" id="nickname" name="nickname"><br/>

      <label>First Name </label>
      <input class="input-250" type="text" id="firstname" name="firstname"><br/>

      <label>Surname </label>
      <input class="input-250" type="text" id="surn" name="surn"><br/>

      <label>Organisation</label>
      <input  class="input-250"type="text" id="organisation" name="organisation"><br/>

      <label>E-Mail Address </label>
      <input class="input-250" type="text" id="email" name="email"><br/>

    </form>
   </body>
 </html> 
```

**myjQuery.js:**

```
 $(document).ready(function(){

      $('#nickname').autocomplete({

       //Here I call the PHP file and the method inside this file, separated by '/'.
       //You should manage it somehow to make this possible.
     //I have managed it whith a PHP file called index.php, that gets whatever it comes 
    //from the URL after the 'rt' and it separates it by the slash,
   //being the first value the name of the file, and the second value the name of the 
   //method.

     source:'index.php?rt=jscallsController/listNicknameUsers', 
     minLength:1,
     select: function(evt, ui)
     {
      // when a username is selected, populate related fields in this form

        document.getElementById('firstname').value = ui.item.firstname;
        document.getElementById('surn').value  = ui.item.surname;
        document.getElementById('organisation').value  = ui.item.org;
        document.getElementById('email').value  = ui.item.mail;
        }
      });
    }); 
```

**And the PHP file jscallsController.php:**

```
 <?php

    class jscallsController{

    public function listNicknameUsers(){

      $hostdb = 'localhost';
      $namedb = 'tests';
      $userdb = 'username';
      $passdb = 'password';

      $term = trim(strip_tags($_GET['term']));

      $users  = 'table_users';

      $data = array();

     try {
      // Connect and create the PDO object
      $conn = new PDO("mysql:host=$hostdb; dbname=$namedb", $userdb, $passdb);

      // Sets encoding UTF-8
      $conn->exec("SET CHARACTER SET utf8");      

      //Define and perform the SQL SELECT query
      $sql = "SELECT u_name, u_fname, u_surname, u_organisation, u_email FROM $users  
              WHERE u_name LIKE '$term%'";
      $result = $conn->query($sql);

      // If the SQL query is succesfully performed ($result not false)
      if($result !== false) {

      // Number of returned rows
      $rows = $result->rowCount();   

      //If exists, returns 1
      if($rows > 0){
          foreach($result as $user) {

          /*The first position of the array needs to be called 'label', 
          otherwise it will not show anything in the HTML field 
          where the autocomplete is done.*/

          $data[] = array(

          'label' => $user['u_name']." (".$user['u_fname']." ".$user['u_surname'].")" ,
          'firstname' =>$user['u_fname'],
           'surname' => $user['u_surname'],
           'org' => $user['u_organisation'],
           'mail' => $user['u_email']
         );
        }
      }
     }
     //Disconnect
     $conn = null;        

     //We send back the array to the jQuery
     echo json_encode($data);
     }
     catch(PDOException $e) {
       echo $e->getMessage();
      }
     }
    }
    ?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-21T04:23:36.417

试试这个，它对我有用

```
.ui-front {
    z-index: 1500 !important;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T15:05:30.847

你试过这个吗？

```
data: {
    term : request.value,
    field : "name"
}, 
```

你的数组键是`'value'`，不是`'term'`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-03T07:03:38.393

使用 CSS 提出的答案实际上只是在解决问题。根据[JQuery Automcomplete API docs](https://api.jqueryui.com/autocomplete/#option-appendTo)，您应该将该类添加`ui-front`到您希望自动完成列表附加到的元素中（这很可能是该元素的父`#newName`元素），否则它只会被放入页面的正文中。

或者，您可以将父级的 id 指定为`appendTo`参数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-04T02:35:05.340

只是想分享什么解决了我的问题。

这很常见，但可能对其他人有所帮助。

除了包括`jquery-ui.js`在您的项目中。**始终确保您还包括** `jquery-ui.css`

```
<link href="Stylesheets/jquery-ui.css" rel="stylesheet" />
<script src="Scripts/jquery-ui.js"></script> 
```

# ruby-on-rails-3 - 嵌套表单不保存数据

> ID：15069767
> 
> 赞同：0
> 
> 时间：2013-02-25T14:53:16.450
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, rails-activerecord

我有 3 个模型。首先，我有一个有很多选票的选民。Votes 是一个连接表，用于链接投票者和条目。但是当我试图保存选票时，他们并没有保存。我的模型如下所示：

```
class Vote < ActiveRecord::Base
  belongs_to :entry
  belongs_to :voter
  attr_accessible :entry, :voter, :voter_id

class Voter < ActiveRecord::Base
  attr_accessible :email_address, :verification_code, :verified, :votes_attributes, :votes
  has_many :votes, :class_name => "Vote"
  accepts_nested_attributes_for :votes

class Entry < ActiveRecord::Base
  attr_accessible :caption, :email_address, :filename
end 
```

然后我的表格如下所示：

```
<%= f.fields_for :votes do |builder| %>  
    <fieldset>
    <%= builder.label :votes, "Vote" %>
    <%= collection_select(:votes, :entry_id, Entry.all, :id, :caption, :prompt => 'Please select an Entry') %>
    </fieldset>     
  <% end %> 
```

但是选票没有保存在数据库中。响应如下所示：

> 参数：{"utf8"=>"✓", "authenticity_token"=>"x5f85viIp/KHJKQF7DotaF3MhebARWcaLDKRbcZw/lM=", "voter"=>{"email_address"=>"sadasfd"}, "votes"=>{"entry_id "=>"3"}, "commit"=>"创建选民"}

那么怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T06:39:37.677

请试试

```
class Voter < ActiveRecord::Base
  attr_accessible :email_address, :verification_code, :verified, :votes
  has_many :votes, :class_name => "Vote"
  attr_accessible :votes_attributes,
  accepts_nested_attributes_for :votes

Modify vote_params in VotesController

private
def vote_params
      params.require(:vote).permit(:id, :email_address, :verification_code, :verified, votes_attributes: [:id, :name])
end 
```

# iphone - AWS S3 将图像上传到存储桶 iOS 应用程序

> ID：15069772
> 
> 赞同：10
> 
> 时间：2013-02-25T14:53:26.733
> 
> 标签：iphone, ios, objective-c, amazon-web-services, amazon-s3

我是 AWS 的新手，并将其用于 iOS 应用程序。

我正在尝试将图像从我的 iOS 应用程序上传到名为“img.haraj.com.sa”的存储桶。当我上传任何图像时，它们不会显示在存储桶中。但是当我将目标更改为名为“haraj”的存储桶时，它们会被上传并显示在存储桶中。

这是政策：

```
{
  "Statement": [
    {
      "Sid": "**********hidden**********",
      "Action": [
        "s3:GetObject",
        "s3:PutObject"
      ],
      "Effect": "Allow",
      "Resource": [
       "arn:aws:s3:::haraj/*"
      ]
    }
  ]
} 
```

我修改它以更改目标存储桶。我还创建了其他名为“img1.haraj.com.sa”的存储桶，并尝试上传图片，不幸的是它们也失败了。

存储桶名称带有点 (.) 和不带点似乎存在一些问题。不带点的存储桶名称适用于 iOS 应用程序，带点的名称不起作用。不过我不确定。但我正面临这个问题。我在应用程序代码中没有收到任何错误响应。

这是我的 iOS 应用程序实现的一部分：

```
- (void)postAdButtonPushed:(id)sender
{
    DLog(@"Post Ad")

    AmazonS3Client *s3Client = [[AmazonS3Client alloc] initWithAccessKey:AWS_ACCESS_KEY_ID withSecretKey:AWS_SECRET_KEY];
    s3Client.timeout = 240;

    NSString *bucketName = [NSString stringWithFormat:@"img.haraj.com.sa"];
    NSString *imageName = [NSString stringWithFormat:@"testimage.jpg"];

    S3PutObjectRequest *objReq = [[S3PutObjectRequest alloc] initWithKey:imageName inBucket:bucketName];
    objReq.contentType = @"image/jpeg";

    UIImage *testImageToUpload = [self.imagesToUpload objectAtIndex:0];

    NSData *imageData = UIImageJPEGRepresentation(testImageToUpload, 0.8);
    objReq.data = imageData;
    objReq.delegate = self;

    objReq.contentLength = [imageData length];

    [s3Client putObject:objReq];
}

- (void)request:(AmazonServiceRequest *)request didCompleteWithResponse:(AmazonServiceResponse *)response
{
    DLog(@"response: %@", response.description)
}

- (void)request:(AmazonServiceRequest *)request didFailWithError:(NSError *)error
{
    DLog(@"Req failed: %@", error.description)
} 
```

我还在亚马逊论坛上创建了一个线程：[AWS 将图像上传到存储桶 iOS 应用程序](https://forums.aws.amazon.com/thread.jspa?threadID=117729)

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-03T00:44:49.783

只是想权衡一下，这是我开始工作的代码片段

```
// #import <AWSS3/AWSS3.h>
// #import <AWSRuntime/AWSRuntime.h>
// then you should implement <AmazonServiceRequestDelegate>
// import those in your .h file and
// add the awss3 and awsruntime framework from the client
// download from Amazon
// myFace is the UIImage object

    AmazonS3Client *s3Client = [[AmazonS3Client alloc] initWithAccessKey:@"Key_Goes_here" withSecretKey:@"Secret_Goes_Here"];

    NSString *imageName = [NSString stringWithFormat:@"%@.png", @"cpa"];

    S3PutObjectRequest *objReq = [[S3PutObjectRequest alloc] initWithKey:imageName inBucket:@"bucket_name"];
    objReq.contentType = @"image/png";
    objReq.cannedACL   = [S3CannedACL publicRead];
    objReq.data = UIImagePNGRepresentation(myFace);
    objReq.delegate = self;

    [s3Client putObject:objReq]; 
```

这是委托方法：

```
-(void)request:(AmazonServiceRequest *)request didSendData:(long long)bytesWritten totalBytesWritten:(long long)totalBytesWritten totalBytesExpectedToWrite:(long long)totalBytesExpectedToWrite {
}

-(void)request:(AmazonServiceRequest *)request didReceiveResponse:(NSURLResponse *)response {
    NSLog(@"response! %@", response);
}

-(void)request:(AmazonServiceRequest *)request didCompleteWithResponse:(AmazonServiceResponse *)response {

}

-(void)request:(AmazonServiceRequest *)request didReceiveData:(NSData *)data {
    NSLog(@"data?");
}

-(void)request:(AmazonServiceRequest *)request didFailWithError:(NSError *)error {
    [self showAlertMessage:[error.userInfo objectForKey:@"message"] withTitle:@"Upload Error"];
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T17:55:09.607

[我已在此处](https://forums.aws.amazon.com/thread.jspa?messageID=427879&#427879)发布了对您的论坛主题的回复，但总而言之，我相信您遇到了 SDK 中的错误，需要明确设置存储桶所在的 S3 端点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-27T06:38:35.773

如果您不想提供公共访问权限，您还应该在 IAM 中定义一个用户，并将此代码放入您的存储桶策略中：

```
{
  "Version": "2012-10-17",
  "Id": "S3AccessPolicy",
  "Statement": [
    {
      "Sid": "GiveGetPutAccess",
      "Effect": "Allow",
      "Principal": {
        "AWS": "arn:aws:iam::123456789012:user/YOUR_USER"
      },
      "Action": [
        "s3:GetObject",
        "s3:PutObject"
      ],
      "Resource": "arn:aws:s3:::YOUR_BUCKET/*"
    }
  ]
} 
```

# matlab - Matlab 打印垫

> ID：15069773
> 
> 赞同：4
> 
> 时间：2013-02-25T14:53:28.037
> 
> 标签：matlab

我是 Matlab 的新手。有没有办法用来`printmat`打印 2 个单词的标题？

示例结果如下：

```
 Title One        Title Two         Title Three
        11               22                  33
        22               33                  44 
```

这是我目前尝试修改的代码：

```
matA = [ 11 22 33; 22 33 44];
printmat(matA, '' , '' , 'TitleOne TitleTwo TitleThree'); 
```

我似乎无法在“标题”和“一个”之间添加空格，添加空格总是会导致以下结果：

```
printmat(matA, '' , '' , 'Title One Title Two Title Three');

     Title              One               Title
        11               22                  33
        22               33                  44 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T15:10:04.740

根据 Matlabs 的帮助，`printmat`不会提供你正在寻找的东西。你可以`sprintf`改用。

```
a = [ 11 22 33; 22 33 44];
s = {'Title One' 'Title Two' 'Title Three'};
s1 = sprintf('%12s\t%12s\t%12s\t\n', s{:});
s2 = sprintf('%12d\t%12d\t%12d\n', a);

horzcat(s1,s2) 
```

这导致

```
ans =

   Title One       Title Two     Title Three    
          11              22              22
          33              33              44 
```

**~edit~**
如果使用`printmat`更可取（例如，因为它更灵活），您可以使用`evalc`and来解决`strrep`。这里的技巧是在对 的调用中用其他符号（例如问号）替换空格，`printmat`通过 将输出存储在字符串中`evalc`，然后用`strrep`空格替换问号。作为一个不错的副产品，您可以将表格作为字符串...

```
a = [ 11 22 33; 22 33 44];
x = evalc('printmat(matA, '''' , ''a b c'' , ''Title?One Title?Two Title?Three'')');

s = strrep(x, '?', ' ') 
```

这导致

```
s =

                 Title One    Title Two  Title Three
            a     11.00000     22.00000     33.00000
            b     22.00000     33.00000     44.00000 
```

但是 printmat 和 evalc 的组合会导致很多撇号......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T15:10:16.220

好吧，文档`printmat`告诉你

> PRINTMAT(A,NAME,RLAB,CLAB) 打印带有行标签 RLAB 和列标签 CLAB 的矩阵 A。NAME 是用于命名
> 矩阵的字符串。RLAB 和 CLAB 是字符串变量，包含
> 由空格分隔的行和列标签。

所以标题中的空格不是原生支持的。

作为一种解决方法，您可以使用另一个“看起来像空格”的分隔符，例如，[单位分隔符](http://en.wikipedia.org/wiki/Delimiter)：

```
printmat (
    matA, '', 'one two', ...
    ['Title' char(31) 'One Title' char(31) 'Two Title' char(31) 'Three']); 
```

输出：

```
Test = 
           Title One    Title Two  Title Three
    one     11.00000     22.00000     33.00000
    two     22.00000     33.00000     44.00000 
```

但是正如你所看到的，这很快就会变得很尴尬。当打印到文件或其他输出而不是 Matlab 命令窗口（例如终端）时，它也可能看起来不正确。你必须做一些实验。

正如 H.Muster (+1) 所建议的那样，我个人只会使用`cell`s 和格式字符串中的特定字段宽度编写自己的更通用的漂亮打印机。`sprintf`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T15:19:54.340

另一种选择是重新定义`printmat`如下：我所做的是向名为 的函数添加一个新参数，您可以使用标题之间的分隔符`separator`调用该函数。`printmat_v2`例如：

```
 printmat_v2 (matA, ' ' , ' ' , 'Title OneL Title TwoL Title Three','L'); 
```

代码：

```
function [] = printmat_v2(a,name,rlab,clab,separator)
%PRINTMAT Print matrix with labels.
%
%   PRINTMAT(A,NAME,RLAB,CLAB) prints the matrix A with the row labels
%   RLAB and column labels CLAB.  NAME is a string used to name the 
%   matrix.  RLAB and CLAB are string variables that contain the row
%   and column labels delimited by spaces.  For example, the string
%
%       RLAB = 'alpha beta gamma';
%
%   defines 'alpha' as the label for the first row, 'beta' for the
%   second row and 'gamma' for the third row.  RLAB and CLAB must
%   contain the same number of space delimited labels as there are 
%   rows and columns respectively.
%
%   PRINTMAT(A,NAME) prints the matrix A with numerical row and column
%   labels.  PRINTMAT(A) prints the matrix A without a name.
%
%   See also: PRINTSYS.

%   Clay M. Thompson  9-24-90
%   Copyright (c) 1986-93 by the MathWorks, Inc.

error(nargchk(1,5,nargin));

[nrows,ncols] = size(a);

if nargin<2, name = []; end
if nargin==3, error('Wrong number of input arguments.'); end
if nargin<4,
  rlab = []; clab = [];
  for i=1:nrows, rlab = [rlab, '--',int2str(i),'--> ']; end
  for i=1:ncols, clab = [clab, '----',int2str(i),'---- ']; end
  rlab=rlab(1:length(rlab)-1);
  clab=clab(1:length(clab)-1);
end

col_per_scrn=5;
len=12;

if (nrows==0)|(ncols==0), 
  if ~isempty(name), disp(' '), disp([name,' = ']), end
  disp(' ')
  disp('     []')
  disp(' ')
  return
end

% Remove extra spaces (delimiters)
ndx1 = find(clab==separator);
ndx2 = find([ndx1,0]==[-1,ndx1+1]);
if ~isempty(clab), clab(ndx1(ndx2))=[]; end

ndx1 = find(rlab==' ');
ndx2 = find([ndx1,0]==[-1,ndx1+1]);
if ~isempty(rlab), rlab(ndx1(ndx2))=[]; end

% Determine position of delimiters
cpos = find(clab=='L');
if length(cpos)<ncols-1, error('Not enough column labels.'); end
cpos = [0,cpos,length(clab)+1];

rpos = find(rlab==' ');
if length(rpos)<nrows-1, error('Not enough row labels.'); end
rpos = [0,rpos,length(rlab)+1];

col=1;
n = min(col_per_scrn-1,ncols-1);
disp(' ')
if ~isempty(name), disp([name,' = ']), end  % Print name
while col<=ncols
  % Print labels
  s = ' '*ones(1,len+1);
  for j=0:n,
    lab = clab(cpos(col+j)+1:cpos(col+j+1)-1);
    if length(lab)>len,
      lab=lab(1:len);
    else
      lab=[' '*ones(1,len-length(lab)),lab]; end
    s= [s,' ',lab];
  end
  disp(s)
  for i=1:nrows,
    s = rlab(rpos(i)+1:rpos(i+1)-1); 
    if length(s)>len, s=s(1:len); else s=[' '*ones(1,len-length(s)),s]; end
    s = [' ',s];
    for j=0:n,
      element = a(i,col+j);
      if element==0,
        s=[s,'            0'];
      elseif (element>=1.e6)|(element<=-1.e5)|(abs(element)<.0001)
        s=[s,sprintf(' %12.5e',element)];
      else
        s=[s,sprintf(' %12.5f',element)];
      end
    end
    disp(s)
  end % for
  col = col+col_per_scrn;
  disp(' ')
  if (ncols-col<n), n=ncols-col; end;
end % while 
```

# jquery - 无法在 jquery ajax 方法中写入 id

> ID：15069776
> 
> 赞同：0
> 
> 时间：2013-02-25T14:53:45.997
> 
> 标签：jquery, html

我想在ajax成功中写id

**.html：**

```
success: function (response) {
    debugger;
    if (response.d != null) {
        $("#mycarousel").empty();
        $.each(response.d, function (i, response) {
            $("#mycarousel").append('<li id='"+response.Soid+"'><img src="../Images/DefaultPhotoMale.png" width="40" height="40" alt="image"/></li>');

        });
        jQuery('#mycarousel').jcarousel();
    }
    else {

    }
},
error: function (xhr) {

} 
```

但我收到以下错误：

![在此处输入图像描述](../Images/8b033268817a91721c79425b0d590683.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:57:14.377

您需要像这样更改报价：

```
 $("#mycarousel").append('<li id="'+response.Soid+'"><img src="../Images/DefaultPhotoMale.png" width="40" height="40" alt="image"/></li>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:55:36.677

检查你的报价的使用你做了：

```
' '"+  +"'  ' 
```

这会产生一个错误，您使用单引号作为字符串分隔符，然后稍后切换它们

将其更改为：

```
' "'+  +'"  ' 
```

# javascript - 使用 num.toFixed();

> ID：15069779
> 
> 赞同：0
> 
> 时间：2013-02-25T14:53:50.007
> 
> 标签：javascript

在下面的函数中，我将在哪里包含 num.toFixed(2); 使“总计”的估价器显示到小数点后 2 位（价格）？

```
function calculate_total(id) {
   var theForm = document.getElementById( id )
   total = 0;
   if (theForm.toyCar.checked) {
      total += parseFloat(theForm.toyCar.value);
   } 
   theForm.total.value = total;
   theForm.GrandTotal.value = total + (total*0.18);
} 
```

这是输出：

```
<input type="button" name="CheckValue" value = "Calculate cost" onclick="calculate_total(this.form.id)" />
&nbsp;
Total: <input type="text" name="total" id="total" size="10" readonly="readonly" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:57:41.870

我会在两个地方更改它，以确保两个数字都被格式化为两位小数：

```
function calculate_total(id) {
    var theForm = document.getElementById( id )
    total = 0;
    if (theForm.toyCar.checked) {
        total += parseFloat(theForm.toyCar.value);
    } 
    theForm.total.value = total.toFixed(2);
    theForm.GrandTotal.value = (total + (total*0.18)).toFixed(2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:55:43.493

```
theForm.total.value = total.toFixed(2);
theForm.GrandTotal.value = (total + (total*0.18)).toFixed(2); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T14:56:14.830

在`num.toFixed()`中，`num`是希望影响的实际数值表达式。*您在*该表达式上运行该`toFixed`函数。

 *因此，您可以将其应用于`total + (total*0.18)`：

```
theForm.GrandTotal.value = (total + (total*0.18)).toFixed(2); 
```

但是，**不要**。不要在此处截断您的值，否则您会通过*显着*限制精度来在代码中引入潜在的舍入错误。

这可能是故意的（取决于您希望在计算中处理亚便士值的方式），如果是，那么您也应该将其应用于正常值`total`：

```
theForm.total.value = total.toFixed(2); 
```

*否则，在输出*值时应用此格式！即，其他地方：

```
alert(theForm.GrandTotal.value.toFixed(2));
// (or something other than `alert`) 
```*

# javascript - 如何使用自定义函数在每次重新加载网格时访问 JQgrid ajax 返回数据？

> ID：15069780
> 
> 赞同：1
> 
> 时间：2013-02-25T14:53:56.147
> 
> 标签：javascript, jquery, jqgrid

我已经重载了通过 AJAX 调用返回的 jqGrid 数据结构，以包含在每次网格重新加载时我的 Web 应用程序所需的额外信息。

每次加载/重新加载网格时，我都希望能够访问该数据并通过函数对 jqgrid 之外的其他 DOM 元素进行一些操作。

我已经尝试过 succes/afterSubmit 并且我认为它们不是我想要的，因为它们似乎无法访问返回的 json。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:04:24.337

您可以访问内部`loadComplete`或`beforeProcessing`回调的数据。第一个参数表示从服务器返回的数据，格式与服务器上完全相同。在`beforeProcessing`回调内部，您甚至可以以任何方式修改数据。

获得额外信息的另一个好地方是`userdata`服务器响应的一部分（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#user_data)）。附加`userdata`属性必须是对象。使用的主要优点`userdata`是保存了jqGrid内部参数的值`userdata`。`userData`所以你可以使用`getGridParam`来访问数据。

# php - 在 SimpleXMLElement 中搜索和替换

> ID：15069781
> 
> 赞同：1
> 
> 时间：2013-02-25T14:54:07.083
> 
> 标签：php, xml, replace, simplexml, str-replace

我循环浏览一个 XML 文件。一旦我找到某个节点，我就会获取它的值并更改它在整个文档中的所有出现。

**XML**

```
<?xml version="1.0" encoding="UTF-8"?>
<catalog catalog-id="my_catalog">
<product product-id="11111111">
    ......
    <new-id>aaaaaaa</new-id>
</product>
<product product-id="2222222">
    ......
    <new-id>bbbbbbb</new-id>
</product>
</catalog> 
```

对于每一个`<product>`当我发现`<new-id>`我需要替换`<product product-id="">`它时，这很好，但我还需要替换整个 XML 文档中所有出现的`11111111`with 。`aaaaaaa`

**PHP**

```
$cotalog = new SimpleXMLElement($file);
header('Content-Type: text/xml'); 
foreach ($cotalog as $product) {
    if ($product->getName() == 'product') {
        $product['product-id'] = $product->{'new-id'};
        // code here to replace all occurrences of $product['product-id'] with $product->{'new-id'}
        ...
    }
}
echo $cotalog->asXML(); 
```

有没有一种`str_replace`方法可以用不同的字符串替换所有出现的字符串值？

# javascript - 回发后 CSS 颜色在 Javascript 中不起作用

> ID：15069785
> 
> 赞同：0
> 
> 时间：2013-02-25T14:54:14.590
> 
> 标签：javascript, asp.net, css

我有一个 Web 应用程序，其中我正在做一些客户端验证。这是通过添加到每个 Asp:TextBox

```
onkeyup="javascript: value_change(this);" 
```

一旦达到价值变化，我就有了这个 Javascript ......

```
function value_change (text_box) {
    // validate code here
    if (valid) {
        text_box.className = "normalInput";
        document.getElementById("GoButton").disabled = false;
    }
    else {
        text_box.className = "errorInput";
        document.getElementById("GoButton").disabled = true;
    }
} 
```

className 对应于 CSS 类，其显着部分如下所示：-

```
.normalInput
{
    background-color: #ffffff;
}
.errorInput
{
    background-color: #ff0000;
} 
```

当页面最初显示时，这工作得很好，但是在第一次回发之后，虽然调用了函数，设置了类名和 GoButton 灵敏度设置（我已经通过调试单步执行了这一点），但背景颜色没有改变。

有谁知道这是为什么以及我应该怎么做？

**编辑**接受@Pete 的建议，我在为其分配了新的类名后立即检查了 text_box，并且似乎 currentStyle 属性保持不变。currentStyle 的特性与 normalInput 类相同；我调整了它们并重新运行它来检查。所以我推断分配被忽略了，而不是一个不同的 CSS 以某种方式工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:31:50.953

客户端上更改的样式不会发送回服务器。您必须自己在服务器上设置属性才能持久保存它们。服务器根据服务器上可用的属性集构建控件定义，并重新呈现原始值。这是因为只有文本框的值回传到服务器；其他一切都没有。

话虽如此，您可以解释启用或禁用按钮的条件，设置适当的 CSS 样式，并在服务器上设置这些属性，或在文档加载时重新应用样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:39:02.947

经过多次发誓后，我终于得到了验证，可以在回发后更改背景颜色，如下所示：-

```
function value_change (text_box) {
    // validate code here
    if (valid) {
        text_box.className = "normalInput";
        document.getElementById(text_box.name).style.backgroundColor = "#ffffff";
        document.getElementById("GoButton").disabled = false;
    }
    else {
        text_box.className = "errorInput";
        document.getElementById(text_box.name).style.backgroundColor = "#ff0000";
        document.getElementById("GoButton").disabled = true;
    }
} 
```

即通过手动设置。我不太喜欢这个，因为它正在推动一个四人小组完成 CSS 课程的全部目的。如果有人能想出更好的东西，我会全力以赴。

# d3.js - 如何隐藏 x 轴上的日期？

> ID：15069787
> 
> 赞同：0
> 
> 时间：2013-02-25T14:54:22.797
> 
> 标签：d3.js

假设我有一个简单的时间序列图，其中包含 2013 年 2 月 25 日的数据，从凌晨 1 点开始到晚上 11 点结束。如果我将这些数据绘制成图表，我会在 x 轴上每隔 3 小时有很好的甚至刻度：凌晨 3 点、早上 6 点、早上 9 点等。这正是我想要的。但是，在轴的开头显示“Mon 25”。我想隐藏这个，只显示时间。

我已通读 d3 的[时间文档](https://github.com/mbostock/d3/wiki/Time)，但找不到答案。有没有一种简单的方法可以做到这一点，将我的日期保留为 Javascript 对象？（我确信我可以转换为字符串，但我想避免这种情况。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:06:07.263

您可以使用该[`tickFormat()`](https://github.com/mbostock/d3/wiki/Time-Scales#wiki-tickFormat)函数传入日期格式化程序。文档不是很清楚，但是[这个例子](http://bl.ocks.org/mbostock/4149176)的链接说明了如何做到这一点。`customTimeFormat`在您的情况下，您将在该示例中只有一个条目。

# css - 从 CSS 编码的完整背景图案

> ID：15069793
> 
> 赞同：3
> 
> 时间：2013-02-22T17:28:15.950
> 
> 标签：css, background-image

我试图在我的网页设计中依赖更多的代码而不是图像，并努力在 HTML5 和 CSS3 中更有效。

我搜索了所有 Stack Exchange 站点，但没有任何可靠的结果。话虽如此，我真正想了解更多的是使用纯 CSS 为网站背景创建模式。

***我想知道这是否可以用纯 CSS 编码创建？***

![在此处输入图像描述](../Images/68974a9fbfd1c14acab0b9b017684c0a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T19:25:35.297

CSS3 无法在您所想的级别上创建模式。CSS 模式非常基础，使用小块模式来构建大型可扩展/可重复块的背景。

**CSS 模式是基本的 你的图像不是基本的**

您使用的图像不会重复，更适合用作：`{background: url("background.jpg");}`或者您可以使用[Base64 并将图像嵌入到 CSS 文件](http://webcodertools.com/imagetobase64converter)中。

**使用 C33 创建基本模式**

有多种方法可以使用 JavaScript/CSS 和 CSS3 即时制作 CSS3 模式。我建议您查看这篇文章：[CSS3 Patterns Explained](http://24ways.org/2011/css3-patterns-explained/)，或者另一种使用 Base64 嵌入制作简单模式的方法是使用[Patternify](http://24ways.org/2011/css3-patterns-explained/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T19:26:50.833

使用最新的浏览器（Internet Explorer 除外）和 CSS3，您**可以**仅使用 CSS 而无需图像来创建背景图案。在 IE 支持它并且当前的 IE 浏览器停止使用之前，这些技术在现实世界中不会有用几年。

这是一个拥有 CSS3 背景集合的网站：http: [//lea.verou.me/css3patterns/](http://lea.verou.me/css3patterns/) 他们没有和你的完全一样的，但是碳纤维是灰色的，不太像不同： http: [//lea.verou.me/css3patterns/#carbon](http://lea.verou.me/css3patterns/#carbon)

# android - Facebook skd 3.0 登录

> ID：15069796
> 
> 赞同：1
> 
> 时间：2013-02-25T14:54:48.490
> 
> 标签：android, facebook

我已将我的应用与 facebook 登录集成。这是我的代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Session.openActiveSession(this, true, new Session.StatusCallback() {

      public void call(Session session, SessionState state, Exception exception) {
        if (session.isOpened()) {

          Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

            public void onCompleted(GraphUser user, Response response) {
              if (user != null) {
                TextView t = (TextView) findViewById(R.id.text);
                t.setText("Hello " + user.getName() + "!");
              }
            }
          });
        }
      }
    });
  }

  public void onActivityResult(int requestCode, int resultCode, Intent data) {
      super.onActivityResult(requestCode, resultCode, data);
      Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
  }` 
```

在设备模拟器中，此代码有效，但是当我在设备中尝试时，应用程序会收到此消息：因此，当我单击确定时，未使用用户名设置 textView。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:34:47.260

我需要额外的阅读权限，所以我的代码如下所示：

```
 OpenRequest req = new OpenRequest(getActivity()).setCallback(new Session.StatusCallback() {
        @Override
        public void call(Session session, SessionState state, Exception exception) {                
            if (session.isOpened()) {
                Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {
                    @Override
                    public void onCompleted(GraphUser user, Response response) {
                        if (user != null) {
                            //do login stuff
                        } else {
                            //show error message

                        }
                    }
                });
            } else {
                if (exception != null) {
                    //show error
                }
            }
        }
    }); 
    req.setPermissions(Arrays.asList("email", "user_location"));
    Session session = new Builder(getActivity()).build();
    Session.setActiveSession(session);
    session.openForRead(req); 
```

这是在 Fragment 里面，所以你可以`getActivity()`用`this`. 使用正确的 onActivityResult() 方法，我对 FB 没有任何问题。

# lucene - Lucene：从 String 解析并通过 Query API 构建的相同查询不会产生相同的结果

> ID：15069803
> 
> 赞同：0
> 
> 时间：2013-02-25T14:55:05.757
> 
> 标签：lucene

我有以下代码：

```
public static void main(String[] args) throws Throwable {
    String[] texts = new String[]{
            "starts_with k mer",
            "starts_with mer",
            "starts_with bleue est mer",
            "starts_with mer est bleue",
            "starts_with mer bla1 bla2 bla3 bla4 bla5",
            "starts_with bleue est la mer",
            "starts_with la mer est bleue",
            "starts_with la mer"
    };

    //write:
    Set<String> stopWords = new HashSet<String>();
    StandardAnalyzer stdAn = new StandardAnalyzer(Version.LUCENE_36, stopWords);
    Directory fsDir = FSDirectory.open(INDEX_DIR);
    IndexWriterConfig iwConf  = new IndexWriterConfig(Version.LUCENE_36,stdAn);
    iwConf.setOpenMode(IndexWriterConfig.OpenMode.CREATE);
    IndexWriter indexWriter = new IndexWriter(fsDir,iwConf);
    for(String text:texts) {
         Document document = new Document();
         document.add(new Field("title",text,Store.YES,Index.ANALYZED));
         indexWriter.addDocument(document);
    }
    indexWriter.commit();

    //read
    IndexReader indexReader = IndexReader.open(fsDir);
    IndexSearcher indexSearcher = new IndexSearcher(indexReader);

    //get query:
    //Query query = getQueryFromString("mer");
    Query query = getQueryFromAPI("mer");

    //explain
    System.out.println("======== Query: "+query+"\n");
    TopDocs hits = indexSearcher.search(query, 10);
    for (ScoreDoc scoreDoc : hits.scoreDocs) {
        Document doc = indexSearcher.doc(scoreDoc.doc);
        System.out.println(">>> "+doc.get("title"));
        System.out.println("Explain:");
        System.out.println(indexSearcher.explain(query, scoreDoc.doc));
    }
}

private static Query getQueryFromString(String searchString) throws Throwable {
    Set<String> stopWords = new HashSet<String>();
    Query query = new QueryParser(Version.LUCENE_36, "title",new StandardAnalyzer(Version.LUCENE_36, stopWords)).parse("("+searchString+") \"STARTS_WITH "+searchString+"\"");
    return query;
}

private static Query getQueryFromAPI(String searchString) throws Throwable {
    Set<String> stopWords = new HashSet<String>();
    Query searchStringTermsMatchTitle = new QueryParser(Version.LUCENE_36, "title", new StandardAnalyzer(Version.LUCENE_36, stopWords)).parse(searchString);

    PhraseQuery titleStartsWithSearchString = new PhraseQuery();
    titleStartsWithSearchString.add(new Term("title","STARTS_WITH".toLowerCase()+" "+searchString));
    BooleanQuery query = new BooleanQuery(true);

    BooleanClause matchClause = new BooleanClause(searchStringTermsMatchTitle, Occur.SHOULD);
    query.add(matchClause);     
    BooleanClause startsWithClause = new BooleanClause(titleStartsWithSearchString, Occur.SHOULD);
    query.add(startsWithClause);

    return query;
} 
```

基本上我正在索引一些字符串，然后我有两种方法可以从用户输入创建 Lucene 查询，一种只是“手动”（通过字符串连接）构建相应的 Lucene 查询字符串，另一种是使用 Lucene 的 API 来构建查询。他们似乎正在构建相同的查询，因为查询的调试输出显示完全相同的查询字符串，但搜索结果不一样：

*   运行通过字符串连接生成的查询（对于参数“mer”）：

    **标题：mer 标题：“starts_with mer”**

并且在这种情况下，当我使用它进行搜索时，我`title:"starts_with mer"`首先会得到与该部分匹配的文档。这是`explain`第一个结果：

```
>>> starts_with mer
Explain:
1.2329358 = (MATCH) sum of:
  0.24658716 = (MATCH) weight(title:mer in 1), product of:
    0.4472136 = queryWeight(title:mer), product of:
      0.882217 = idf(docFreq=8, maxDocs=8)
      0.50692016 = queryNorm
    0.55138564 = (MATCH) fieldWeight(title:mer in 1), product of:
      1.0 = tf(termFreq(title:mer)=1)
      0.882217 = idf(docFreq=8, maxDocs=8)
      0.625 = fieldNorm(field=title, doc=1)
  0.9863486 = (MATCH) weight(title:"starts_with mer" in 1), product of:
    0.8944272 = queryWeight(title:"starts_with mer"), product of:
      1.764434 = idf(title: starts_with=8 mer=8)
      0.50692016 = queryNorm
    1.1027713 = fieldWeight(title:"starts_with mer" in 1), product of:
      1.0 = tf(phraseFreq=1.0)
      1.764434 = idf(title: starts_with=8 mer=8)
      0.625 = fieldNorm(field=title, doc=1) 
```

*   运行通过 Lucene 查询帮助工具构建的查询会产生一个明显相同的查询：

    **标题：mer 标题：“starts_with mer”**

但这一次结果不一样了，因为实际上这`title:"starts_with mer"`部分是不匹配的。这是`explain`第一个结果：

```
>>> starts_with mer
Explain:
0.15185544 = (MATCH) sum of:
  0.15185544 = (MATCH) weight(title:mer in 1), product of:
    0.27540696 = queryWeight(title:mer), product of:
      0.882217 = idf(docFreq=8, maxDocs=8)
      0.312176 = queryNorm
    0.55138564 = (MATCH) fieldWeight(title:mer in 1), product of:
      1.0 = tf(termFreq(title:mer)=1)
      0.882217 = idf(docFreq=8, maxDocs=8)
      0.625 = fieldNorm(field=title, doc=1) 
```

我的问题是：为什么我没有得到相同的结果？我真的很想能够在这里使用查询帮助工具，特别是因为有`BooleanQuery(disableCoord)`我想使用的选项，我真的不知道如何直接表达到 Lucene 查询字符串中。（是的，我的示例在那里传递了“true”，我也尝试过使用“false”，结果相同）。

===更新

femtoRgon 的回答很好：问题是我将整个搜索字符串作为一个术语添加，而不是先将其拆分为术语，然后将每个术语添加到查询中。

如果输入字符串由一个术语组成，则 femtoRgon 给出的答案可以正常工作：在这种情况下，将“STARTS_WITH”文本单独添加为一个术语，然后将搜索字符串添加为第二个术语有效。

但是，如果用户输入的内容会被多个术语标记，您必须首先将其拆分为术语（最好使用您在索引时使用的相同分析器和/或标记器 - 以获得一致的结果）然后添加查询的每个术语。

我最终做的是使用我用于索引的相同分析器创建一个将查询字符串拆分为术语的函数：

```
private static List<String> getTerms(String text) throws Throwable {
    Analyzer analyzer = getAnalyzer();      
    StringReader textReader = new StringReader(text);
    TokenStream tokenStream = analyzer.tokenStream(FIELD_NAME_TITLE, textReader);
    tokenStream.reset();        
    List<String> terms = new ArrayList<String>();
    CharTermAttribute charTermAttribute = tokenStream.addAttribute(CharTermAttribute.class);
    while (tokenStream.incrementToken()) {
        String term = charTermAttribute.toString();
        terms.add(term);
    }
    textReader.close();
    tokenStream.close();
    analyzer.close();       
    return terms;
} 
```

然后我首先将“STARTS_WITH”作为一个术语添加，然后将列表中的每个元素作为一个单独的术语添加：

```
PhraseQuery titleStartsWithSearchString = new PhraseQuery();
titleStartsWithSearchString.add(new Term("title","STARTS_WITH".toLowerCase()));
for(String term:getTerms(searchString)) {
    titleStartsWithSearchString.add(new Term("title",term));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:50:42.910

我相信您遇到的问题是您将整个短语作为一个术语添加到您的 PhraseQuery 中。在索引中，以及在 QueryParser 解析的查询中，这将被拆分为术语`"starts_with"`和`"mer"`，它们必须连续找到。但是，在您构建的查询中，您的 PhraseQuery 中有一个术语，即 term `"starts_with mer"`，它在索引中不作为单个术语存在。

您应该能够将构建 PhraseQuery 的位更改为：

```
PhraseQuery titleStartsWithSearchString = new PhraseQuery();
titleStartsWithSearchString.add(new Term("title","STARTS_WITH".toLowerCase())
titleStartsWithSearchString.add(new Term("title",searchString)); 
```

# javascript - 过滤逻辑问题 jQuery

> ID：15069806
> 
> 赞同：0
> 
> 时间：2013-02-25T14:55:10.103
> 
> 标签：javascript, jquery, algorithm

我有动态创建的 div，其中包含各种文章信息，最重要的是每个 div 的标签的唯一列表。

```
<div class="resultblock">
        <h3 id="sr-title"><a href="/Code/Details/2">Blog Post</a></h3>
        <p id="srdescription">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
        <p>
            Last Updated: 01/01/3001 00:00:00 <span class="resultright">
                Author: Kayra</span></p>
        <p>
            Project: Kayra <span class="resultright">CMS:
                Umbraco</span></p>
        <p class="tag">
            Tags:
<a href="/Code?SearchString=Web%20Forms">Web Forms</a>                     | 
<a href="/Code?SearchString=Blog">Blog</a>            </p>
    </div> 
```

我还有一个完整的标签列表，这些标签是动态创建的，用作过滤 div 的按钮。我希望他们打开和关闭 div；因此，例如，如果用户单击 Facebook 按钮，则只有 Facebook div 会显示，然后如果用户再次单击 Facebook，它将显示所有 div。我还希望这些按钮可以累积工作，所以如果用户点击 Facebook 和 MVC，它只会显示 Facebook 和 MVC 帖子。

```
 <div id="tagbar">
        <input type="submit" value="Facebook" class="button" /> <br />
        <input type="submit" value="MVC" class="button" /> <br />
        <input type="submit" value="Web Forms" class="button" /> <br />
        <input type="submit" value="Blog" class="button" /> <br />
    </div> 
```

目前我的 jQuery 代码正在产生一些奇怪的行为。单击一个按钮会使过滤器正常工作，但您不能像以前一样单击它并显示所有帖子。单击多个按钮也可以；有时单击关闭按钮会起作用，但这并不一致，有时需要多次单击才能起作用。

我觉得我的代码逻辑有问题，但找不到任何可以帮助我的在线资源。抱歉，如果我的问题模棱两可，但这是因为我不确定问题出在哪里，因为我才刚刚开始使用 jQuery。

```
$(document).ready(function () {

var tags = new Array();

// Array Remove - By John Resig (MIT Licensed)
Array.prototype.remove = function (from, to) {
    var rest = this.slice((to || from) + 1 || this.length);
    this.length = from < 0 ? this.length + from : from;
    return this.push.apply(this, rest);
};

$("#tagbar .button").click(function () {
    var clickedTag = $(this).val(); //Gets the name of the button clicked

    if (tags.indexOf(clickedTag) !== -1) {
        tags.remove(tags.indexOf(clickedTag));
        console.log("unclick");
    }
    else {
        tags.push(clickedTag);
        console.log("click");
    }
    $(".resultblock").each(function () {
        var theBlock = $(this);
        i = 0;
        $(tags).each(function () {

            var targetTags = theBlock.find(".tag a").text();

            if (!theBlock.hasClass("show") && targetTags.indexOf(tags[i]) !== -1) {
                $(theBlock).show();
                $(theBlock).addClass("show");
            }
            else if (!theBlock.hasClass("show")) {
                $(theBlock).hide();
            };
            console.log(tags[i] + " is comparing to " + targetTags + " and resulting in " + (targetTags.indexOf(tags[i]) !== -1));
            i++;
        });
        if ($(theBlock).hasClass("show")) {
            $(theBlock).removeClass("show");
        }
    });
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T12:10:10.883

您的问题是由于当`tags`为空时内部代码`$(tags).each(...)`未执行。您需要添加额外的代码来清除过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:59:38.557

不确定这是否是问题所在，但您的`i`声明并`var`没有说明它的全局意义，因此可能会产生一些怪异。你也不需要定义`i`自己，你可以从[`.each`](http://api.jquery.com/each/)：

```
$(".resultblock").each(function (i) {
    // now you can use i - this would replace your i=0; setup.
    // your logic as before      
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-03T09:54:45.483

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>

<script>
$(document).on("click",".button",function(e){
    if($("."+e.target.id).hasClass("active"))
    {    var i=0;
        $(".active").each(function(){i++;})
        if(i>1)
        { 
           $(".ondiv").hide();
          $(".ondiv").removeClass("active");
          $("."+e.target.id).addClass("active");
          $("."+e.target.id).show();

        }
        else
        {
         $(".ondiv").show();
         $(".ondiv").addClass("active");
        }
    }
    else
    {
      $(".ondiv").hide();
      $(".ondiv").removeClass("active");
      $("."+e.target.id).addClass("active");
      $("."+e.target.id).show();
    }

})

</script>

<div id="tagbar">
    <input type="button" value="Facebook" class="button "  id="Facebook"/> 
    <input type="button" value="Google" class="button "  id="Google"/> 
    <input type="button" value="youtube" class="button"  id="youtube"/>
    <input type="button" value="Jquery" class="button "  id="Jquery"/> 
</div>

<div class="Facebook ondiv" style="border:1px solid #000; width:300px; height:200px; float:left">
    <b style=" color:red; margin:100px;"> <a href="https://www.facebook.com/profile.php?id=100009644795095">hi i am Facebook</a> </b>
</div>
    <div class="Google ondiv" style="border:1px solid #000; width:300px; height:200px; float:left">
    <b style=" color:black; margin:100px;"> hi i am Google </b>
</div>
    <div class="youtube ondiv" style="border:1px solid #000; width:300px; height:200px; float:left">
    <b style=" color:blue; margin:100px;"> hi i am youtube </b>
</div> 
    <div class="Jquery ondiv" style="border:1px solid #000; width:300px; height:200px; float:left">
    <b style=" color:green; margin:100px;"> hi i am Jquery </b>
</div> 
```

# javascript - 断开连接的图表上缺少悬停标记

> ID：15069809
> 
> 赞同：4
> 
> 时间：2013-02-25T14:55:16.077
> 
> 标签：javascript, highcharts

我遇到了一个问题，我不确定这是 highcharts 插件中的错误还是编程错误。

我正在使用空值绘制只有一个系列的断开线图，但它似乎是悬停标记的问题：其中一些（在第一行的顶部和第二行的底部）似乎没有出现。代码很简单，但我找不到会导致这种情况的原因。

这是一个重现问题的示例：http: [//jsfiddle.net/KYXQS/9/](http://jsfiddle.net/KYXQS/9/)（26/02 更新）

这里是代码（26/02 更新）：

```
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line',
            marginRight: 130,
            marginBottom: 25,
            zoomType: 'xy'
        },
        title: {
            text: 'Monthly Average Temperature',
            x: -20 //center
        },
        subtitle: {
            text: 'Source: WorldClimate.com',
            x: -20
        },
        tooltip: {
            formatter: function() {
                    return '<b>'+ this.series.name +'</b><br/>'+
                    this.x +': '+ this.y +'°C';
            }
        },
        plotOptions :
        {
            line : {
                marker :
                {
                    enabled: false,
                }
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 100,
            borderWidth: 0
        },
        series: [{
            name: 'Red',
            data: [[0,0],[1,1],[2,2]
                   ,null
                   ,[4,4],[5,5],[6,6]

                   ,null
                   ,[2,0],[3,1],[4,2]
                   ,null
                   ,[6,4],[7,5],[8,6]

                   ,null
                   ,[12,0],[13,1],[14,2]
                   ,null
                   ,[16,4],[17,5],[18,6]

                   ,null
                   ,[22,0],[23,1],[24,2]
                   ,null
                   ,[26,4],[27,5],[28,6]

                   ,null
                   ,[32,0],[33,1],[34,2]
                   ,null
                   ,[36,4],[37,5],[38,6]

                   ,null
                   ,[34,0],[35,1],[36,2]
                   ,null
                   ,[38,4],[39,5],[40,6]

                   ,null
                   ,[36,0],[37,1],[38,2]
                   ,null
                   ,[40,4],[41,5],[42,6]

                   ,null
                   ,[40,2],[41,2],[42,3]
                   ,null
                   ,[47,8],[48,10],[49,11]
                  ],
            color: 'red'
        }
        ,{
            name: 'Blue',
            data: [[2,2],[3,3],[4,4]
                   ,null
                   ,[8,8],[9,10],[10,12]

                   ,null
                   ,[4,2],[5,3],[6,4]
                   ,null
                   ,[10,8],[11,10],[12,12]

                   ,null
                   ,[14,2],[15,3],[16,4]
                   ,null
                   ,[20,8],[21,10],[22,12]

                   ,null
                   ,[24,2],[25,3],[26,4]
                   ,null
                   ,[30,8],[31,10],[32,12]

                   ,null
                   ,[34,2],[35,3],[36,4]
                   ,null
                   ,[40,8],[41,10],[42,12]

                   ,null
                   ,[36,2],[37,3],[38,4]
                   ,null
                   ,[42,8],[43,10],[44,12]

                   ,null
                   ,[38,2],[39,3],[40,4]
                   ,null
                   ,[44,8],[45,10],[46,12]

                   ,null
                   ,[42,3],[41,3],[42,4]
                   ,null
                   ,[49,11],[52,12],[53,12]
                  ],
            color: 'blue'
        }
        ,{
            name: 'Green',
            data: [[6,6],[7,7],[8,8]
                   ,null
                   ,[10,12],[11,15],[12,19]

                   ,null
                   ,[8,6],[9,7],[10,8]
                   ,null
                   ,[12,12],[13,15],[14,19]

                   ,null
                   ,[8,6],[9,7],[10,8]
                   ,null
                   ,[12,12],[13,15],[14,19]

                   ,null
                   ,[18,6],[19,7],[20,8]
                   ,null
                   ,[22,12],[23,15],[24,19]

                   ,null
                   ,[28,6],[29,7],[30,8]
                   ,null
                   ,[32,12],[33,15],[34,19]

                   ,null
                   ,[38,6],[39,7],[40,8]
                   ,null
                   ,[42,12],[43,15],[44,19]

                   ,null
                   ,[40,6],[41,7],[42,8]
                   ,null
                   ,[44,12],[45,15],[46,19]

                   ,null
                   ,[42,6],[43,7],[44,8]
                   ,null
                   ,[46,12],[47,15],[48,19]

                   ,null
                   ,[42,4],[45,5],[47,8]
                   ,null
                   ,[53,12],[54,13],[55,14]
                  ],
            color: 'green'
        }]
    });
}); 
```

});

关于如何使这些标记重新出现的任何想法？

提前致谢。

更新 26/02：
我一直在测试其他方案以确定此问题的原因，这是我发现的：
-当线条彼此太靠近时（在 xAxis 上）会出现问题
-缩放没有帮助，即使在标记应该出现的地方完全放大也不会让它出现。
- 只要 y 值相同或不同，就会出现问题

更新 25/04 ：例如，您可以在尝试将点悬停在绿色系列上的 [47,15] 处时看到错误。而不是 [47,15] 点，而是“悬停”的 [47,8] 点，无论我尝试什么（比如精确缩放它），我都无法“悬停” [47,15] 点。

我已经用更多示例更新了 jsfiddle 链接和上面的代码来说明问题。

任何人有任何想法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T12:20:49.347

问题是，在 Highcharts 中，一个系列的数据应该为 xAxis 升序排序，而您的系列则不是。对您的数据进行排序，并且应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:42:37.427

我会假设您实际上并不是在谈论标记，因为它们设置为

plotOptions : { line : { marker : { enabled: false, } } },

在你的例子中。如果要显示标记，则需要将其更改为启用：true。

您可能正在谈论工具提示。

您需要做的是将代码更改为：

```
tooltip: {
    shared: true,
    formatter: function () {
        var s = '<b>' + this.x + '</b>';

        $.each(this.points, function (i, point) {
            s += '<br/>' + point.series.name + ': ' + point.y + 'm';
        });

        return s;
    },
}, 
```

请参阅这些文档条目和小提琴：

[http://api.highcharts.com/highcharts#tooltip.shared](http://api.highcharts.com/highcharts#tooltip.shared)

[http://api.highcharts.com/highcharts#tooltip.formatter](http://api.highcharts.com/highcharts#tooltip.formatter)

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/tooltip/formatter-shared/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/tooltip/formatter-shared/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:42:39.680

错误既不在 highcharts 中，也不在您的程序中。问题是一些标记隐藏在其他标记后面。看看[http://jsfiddle.net/msjaiswal/KYXQS/10/](http://jsfiddle.net/msjaiswal/KYXQS/10/) 你会注意到在绿色和蓝色线的连接点，蓝色标记隐藏在绿色标记后面。尝试从图例中取消选择绿色系列，隐藏的蓝色标记将出现。

在图表选项中启用标记，如下所示：

```
 line : {
                marker :
                {
                    enabled: true,
                }
            } 
```

# python - 格式化乳胶（to_latex）输出

> ID：15069814
> 
> 赞同：18
> 
> 时间：2013-02-25T14:55:21.653
> 
> 标签：python, latex, pandas

我已经阅读[了该`to_latex`](https://stackoverflow.com/questions/14380371/export-a-latex-table-from-pandas-dataframe/14383654#14383654)方法，但不清楚**如何使用 formatters 参数**。

我有一些**太长的**数字和一些我想要**千位分隔符**的数字。

*多索引表上的方法的一个附带[问题](https://github.com/pydata/pandas/issues/2924)，索引被一起解析并在乳胶输出中发出一些 s。`to_latex``&`*

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-25T15:10:52.470

对于一个简单的数据框。首先，没有格式化程序：

```
In [11]: df
Out[11]: 
              c1        c2
first   0.821354  0.936703
second  0.138376  0.482180

In [12]: print df.to_latex()
\begin{tabular}{|l|c|c|c|}
\hline
{} &        c1 &        c2 \\
\hline
first  &  0.821354 &  0.936703 \\
second &  0.138376 &  0.482180 \\
\hline
\end{tabular} 
```

*将输出（的）复制粘贴`[12]`到乳胶，我们得到：![没有格式化程序的乳胶](../Images/78393c615378f68c98288791270bf5a6.png)*

如果我们创建两个函数`f1`并将`f2`它们放入`to_latex`as `formatters`：

```
def f1(x):
    return 'blah_%1.2f' % x

def f2(x):
    return 'f2_%1.2f' % x

In [15]: print df.to_latex(formatters=[f1, f2])
\begin{tabular}{|l|c|c|c|}
\hline
{} &        c1 &      c2 \\
\hline
first  & blah\_0.82 & f2\_0.94 \\
second & blah\_0.14 & f2\_0.48 \\
\hline
\end{tabular} 
```

*将输出复制粘贴到 Latex 中，我们得到：* ![带有格式化程序 f1 和 f2 的乳胶](../Images/7bdd5c75d4baf13cb76aa702f561bde6.png)

注意：格式化程序函数如何`f1`应用于第一列和`f2`第二列。

# android - 使用 sherlock 列表片段派生的列表视图中的图像按钮

> ID：15069829
> 
> 赞同：-2
> 
> 时间：2013-02-25T14:56:09.790
> 
> 标签：android

我想在列表视图中使用**图像按钮，当我单击列表中的按钮时，该按钮是使用****夏洛克列表片段**派生的。然后我想显示一个对话框片段。为此，我想要语法。我的 Xml 文件是

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/manage_stocks"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<TextView
    android:id="@+id/lname"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="5dp"
    android:gravity="left"
    android:textColor="@android:color/black"
    android:textAppearance="?android:attr/textAppearanceLarge"
    />

<TextView
    android:id="@+id/lysymbol"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@id/lname"
    android:layout_below="@id/lname"
    android:textColor="@android:color/black"
    android:textAppearance="?android:attr/textAppearanceMedium" />
<ImageButton
    android:id="@+id/alertbutton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:src="@drawable/alerts"/>
</RelativeLayout> 
```

一些身体帮助我完成这项任务

感谢您在未来的任何帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:06:55.910

看看[这里](http://developer.android.com/reference/android/app/DialogFragment.html)和[这里](http://android-developers.blogspot.nl/2012/05/using-dialogfragments.html)，看看如何实现自定义 DialogFragment。

# jquery - Firefox中的jquery parseInt nan

> ID：15069831
> 
> 赞同：1
> 
> 时间：2013-02-25T14:56:12.510
> 
> 标签：jquery, parseint

以下代码行：

```
$border_width = parseInt($('#jma_border_element').css('border-width'));
console.log($border_width); 
```

例外值 5。它在 chrome 中工作，但在 firefox(18.0.2) 中是 nan

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:18:09.920

`border-width`不建议使用，因为四个边框都可以具有不同的宽度、样式和颜色，因此某些浏览器只能识别单个值。如果您确定它们都是相同的，那么只需使用它...

```
$border_width = parseInt($('#jma_border_element').css('border-left-width'), 10); 
```

# ios - 已删除默认 png 现在构建失败

> ID：15069834
> 
> 赞同：2
> 
> 时间：2013-02-25T14:56:15.173
> 
> 标签：ios, objective-c

我刚刚完成了我的项目，我正在尝试向它添加正确的默认图像。

我在使用 pngcrush 时遇到了构建错误，因此我删除了默认图像并尝试重新添加它们...

现在我构建失败了，这个错误......

```
CopyPNGFile "/Users/me/Library/Developer/Xcode/DerivedData/appName-focehhxhholrseatdpjqdglseomk/Build/Products/Debug-iphoneos/appName.app/Default@2x.png" "i-snapshot/Default@2x.png"
    cd /Users/me/Documents/appName
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/copypng -compress "" "/Users/me/Documents/appName/appName/Default@2x.png" "/Users/me/Library/Developer/Xcode/DerivedData/appName-focehhxhholrseatdpjqdglseomk/Build/Products/Debug-iphoneos/appName.app/Default@2x.png"

Can't find /Users/me/Documents/appName/appName/Default@2x.pngCommand /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/copypng failed with exit code 1 
```

我试过了：

*   重新添加文件。
*   添加然后再次删除。
*   删除派生数据。
*   清洁和建造。

现在我被卡住了，不知道该怎么做，应用程序根本无法构建。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-25T15:03:37.427

将 png 删除到“复制捆绑资源”：

![删除 png 以复制捆绑资源](../Images/9a7c56efd77a22f2ecf237e36cbfea15.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-14T11:06:09.620

转到项目目标 -> 构建阶段 -> 复制捆绑资源

并搜索您的图像文件名

并删除重复的图像文件名

# java - 从 Int 转换为 Hex 在 Java 中不起作用

> ID：15069836
> 
> 赞同：-2
> 
> 时间：2013-02-25T14:56:29.780
> 
> 标签：java, parsing, int, hex, valueconverter

```
 int diny6h = Integer.parseInt(Integer.valueOf(diny6).toString(), 10);
  int diny7h = Integer.parseInt(Integer.valueOf(diny7).toString(), 10);
  diny6h=diny6h-32;
  diny7h=diny7h-32;
  System.out.println(diny6h + " + " + diny7h);
} 
```

传入：`diny6=30` `diny7=20`

打印：`diny6h=16` `diny7h=00`

我想要的是：`diny6h=10` `diny7h=00`

我在这里做错了什么？

编辑：嗯..数字作为十六进制发送并作为小数接收，因为块中的其他数字（不是 diny6 和 7，而是 diny1 到 diny5）需要作为十六进制。但是 diny6 和 7 需要作为小数，但我无法以我想要的方式获得它们我想要发送一个 35（十六进制）它以 53（十进制）的形式出现，应该打印为 10（十进制）。同样的问题：想要发送一个 20（十六进制），它以 32（十进制）的形式出现，应该打印为 0

简而言之：

我发送 35，收到 53，但我需要 35 将其减​​少 20 并获得 15……我该怎么做？

编辑：

我为我昨天的混乱感到抱歉。我需要将收到的值转换为 BCD 数字...没有十六进制 ^^ 我现在应该删除这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:05:38.980

没有错误。

对于 diny6：

`30(hex) - 32(dec) = 30(hex) - 20(hex) = 10(hex) = 16(dec)`

diny7 也是如此。

默认情况下，整数以十进制打印，这就是为什么你得到 16。如果你想以十六进制格式打印数字，请执行以下操作：

```
System.out.println(String.format("%x",diny6)); 
```

更新：

恐怕你没有完全理解数学基础。hex 和 dec 只是表示形式，`int`变量不是十进制或十六进制 - 它只是一个数字。
1.读取数字的字符串表示。
2\. 做任何你需要的计算（在这个阶段不要让你自己关心基础）。
3\. 使用格式字符串将结果打印为十进制或十六进制。
4\. 阅读主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:43:47.733

是我自己的错，误解了我想做的事情的含义，忽略了一些硬件相关要求。问题完全错误asekd。

# c++ - 需要帮助优化代码（最小图像约定）

> ID：15069838
> 
> 赞同：1
> 
> 时间：2013-02-25T14:56:33.883
> 
> 标签：c++, optimization, inline, simulation

我已经编写了一些模拟代码，并且正在使用“在 GDB 中随机中断”的调试方法。我发现我的程序 99.9% 的时间都花在了这个例程中（这是最小的图像约定）：

```
inline double distanceSqPeriodic(double const * const position1, double const * const position2, double boxWidth) {
        double xhw, yhw, zhw, x, y, z;                                                                                 

        xhw = boxWidth / 2.0;                                                                                      
        yhw = xhw;                                                                                      
        zhw = xhw;                                                                                      

        x = position2[0] - position1[0];                                                                               
        if (x > xhw) 
                x -= boxWidth;                                                                                     
        else if (x < -xhw)
                x += boxWidth;                                                                                     

        y = position2[1] - position1[1];                                                                               
        if (y > yhw) 
                y -= boxWidth;                                                                                     
        else if (y < -yhw)
                y += boxWidth;                                                                                     

        z = position2[2] - position1[2];                                                                               
        if (z > zhw) 
                z -= boxWidth;                                                                                     
        else if (z < -zhw)
                z += boxWidth;                                                                                     

        return x * x + y * y + z * z;                                                                                  
} 
```

到目前为止我执行的优化（可能不是很重要）：

*   返回距离的平方而不是平方根
*   内联它
*   尽我所能
*   没有标准库膨胀
*   使用我能想到的每个 g++ 优化标志进行编译

我已经没有什么可以做的了。也许我可以使用浮点数而不是双精度数，但我希望这是最后的手段。也许我可以以某种方式使用 SIMD，但我从来没有这样做过，所以我想这是很多工作。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T12:03:52.387

首先，您没有使用正确的算法。如果两个点之间的距离大于 boxWidth 怎么办？其次，如果您有多个粒子，调用一个函数来执行所有距离计算并将结果放在输出缓冲区中会显着提高效率。内联有助于减少其中的一些，但不是全部。任何预先计算——比如在你的算法中将盒子长度除以 2——都会在不需要的时候重复。

这是一些用于计算的 SIMD 代码。您需要使用 -msse4 进行编译。在我的机器（macbook pro，llvm-gcc-4.2）上使用 -O3，我的速度提高了大约 2 倍。这确实需要使用 32 位浮点数而不是双精度算术。

SSE 真的没那么复杂，只是*看起来很*糟糕。例如，您必须编写笨拙的_mm_mul_ps(a,b)，而不是编写a*b。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <smmintrin.h>

// you can compile this code with -DDOUBLE to try using doubles vs. floats
// in the unoptimized code. The SSE code uses only floats.
#ifdef DOUBLE
typedef double real;
#else
typedef float real;
#endif

static inline __m128 loadFloat3(const float const* value) {
  // Load (x,y,z) into a SSE register, leaving the last entry
  // set to zero.
  __m128 x = _mm_load_ss(&value[0]);
  __m128 y = _mm_load_ss(&value[1]);
  __m128 z = _mm_load_ss(&value[2]);
  __m128 xy = _mm_movelh_ps(x, y);
  return _mm_shuffle_ps(xy, z, _MM_SHUFFLE(2, 0, 2, 0));
}

int fdistanceSqPeriodic(float* position1, float* position2, const float boxWidth,
                          float* out, const int n_points) {
  int i;
  __m128 r1, r2, r12, s12, r12_2, s, box, invBox;

  box = _mm_set1_ps(boxWidth);
  invBox = _mm_div_ps(_mm_set1_ps(1.0f), box);

  for (i = 0; i < n_points; i++) {
    r1 = loadFloat3(position1);
    r2 = loadFloat3(position1);
    r12 = _mm_sub_ps(r1, r2);

    s12 = _mm_mul_ps(r12, invBox);
    s12 = _mm_sub_ps(s12, _mm_round_ps(s12, _MM_FROUND_TO_NEAREST_INT));
    r12 = _mm_mul_ps(box, s12);

    r12_2 = _mm_mul_ps(r12, r12);

    // double horizontal add instruction accumulates the sum of
    // all four elements into each of the elements
    // (e.g. s.x = s.y = s.z = s.w =  r12_2.x + r12_2.y + r12_2.z + r12_2.w)
    s = _mm_hadd_ps(r12_2, r12_2);
    s = _mm_hadd_ps(s, s);

    _mm_store_ss(out++, s);
    position1 += 3;
    position2 += 3;
  }
  return 1;
}

inline real distanceSqPeriodic(real const * const position1, real const * const position2, real boxWidth) {
  real xhw, yhw, zhw, x, y, z;                                                                                 

  xhw = boxWidth / 2.0;                                                                                      
  yhw = xhw;                                                                                      
  zhw = xhw;                                                                                      

  x = position2[0] - position1[0];                                                                               
  if (x > xhw) 
    x -= boxWidth;                                                                                     
  else if (x < -xhw)
    x += boxWidth;                                                                                     

  y = position2[1] - position1[1];                                                                               
  if (y > yhw) 
    y -= boxWidth;                                                                                     
  else if (y < -yhw)
    y += boxWidth;                                                                                     

  z = position2[2] - position1[2];                                                                               
  if (z > zhw) 
    z -= boxWidth;                                                                                     
  else if (z < -zhw)
    z += boxWidth;                                                                                     

  return x * x + y * y + z * z;                                                                                  
}

int main(void) {
  real* position1;
  real* position2;
  real* output;
  int n_runs = 10000000;
  posix_memalign((void**) &position1, 16, n_runs*3*sizeof(real));
  posix_memalign((void**) &position2, 16, n_runs*3*sizeof(real));
  posix_memalign((void**) &output, 16, n_runs*sizeof(real));
  real boxWidth = 1.8;
  real result = 0;
  int i;
  clock_t t;

#ifdef OPT
  printf("Timing optimized SSE implementation\n");
#else
  printf("Timinig original implementation\n");
#endif

#ifdef DOUBLE
  printf("Using double precision\n");
#else
  printf("Using single precision\n");
#endif

  t = clock();
#ifdef OPT
  fdistanceSqPeriodic(position1, position2, boxWidth, output, n_runs);
#else
  for (i = 0; i < n_runs; i++) {
    *output = distanceSqPeriodic(position1, position2,  boxWidth);
    position1 += 3;
    position2 += 3;
    output++;
  }
#endif
  t = clock() - t;

  printf("It took me %d clicks (%f seconds).\n", (int) t, ((float)t)/CLOCKS_PER_SEC);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:11:54.507

您可能希望使用 fabs（在 ISO 90 C 中标准化），因为这应该能够简化为单个非分支指令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:13:05.070

```
Return the square of the distance instead of the square root 
```

只要您将正方形与正方形进行比较，这是一个好主意。

```
Inline it 
```

这有时是一种反优化：内联代码占用执行管道/缓存中的空间，无论它是否分支。

通常它没有区别，因为编译器对是否内联有最终决定权。

```
Const what I can 
```

通常没有任何区别。

```
No standard library bloat 
```

什么肿？

```
Compiling with every g++ optimization flag I can think of 
```

这很好：将大部分优化留给编译器。仅当您测量了真正的瓶颈并确定该瓶颈是否严重时，才可以在手头上投入资金进行优化。

您可以*尝试*做的是使您的代码无分支。如果不使用位掩码，这可能如下所示：

```
//if (z > zhw) 
//        z -= boxWidths[2];
//else if (z < -zhw)
//      z += boxWidths[2]; 

const auto z_a[] = {
    z,
    z - boxWidths[2]
};
z = z_a[z>zhw];
... 
```

或者

```
z -= (z>zhw) * boxWidths[2]; 
```

但是，不能保证这会更快。您的编译器现在可能更难识别代码中的 SIMD 点，或者分支目标缓冲区做得很好，并且大多数时候您的函数具有相同的代码路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T15:39:28.187

您需要摆脱比较，因为这些比较难以预测。

要实现的功能是：

```
 /    /           /\  /\
    /    /           /  \/  \
    ----0-----  or ------------ , as (-x)^2 == x^2
       /    / 
      /    / 
```

后者是两个 abs 语句的结果：

```
 x = abs(half-abs(diff))+half; 
```

编码

```
double tst(double a[4], double b[4], double half)
{
   double sum=0.0,t;
   int i;
   for (i=0;i<3;i++) { t=fabs(fabs(b[i]-a[i])-half)-half; sum+=t*t;}
   return sum;
} 
```

比原来的实现高出四倍（+一些）——此时甚至没有完全并行性：只使用了 xmm 寄存器的下半部分。

通过 x && y 的并行处理，可以实现大约 50% 的理论增益。从理论上讲，使用浮点数而不是双精度数可以使其速度提高约 3 倍。

# python - 导出 Python 脚本

> ID：15069839
> 
> 赞同：1
> 
> 时间：2013-02-25T14:56:34.387
> 
> 标签：python, numpy

我正在使用[Blender](http://en.wikipedia.org/wiki/Blender_%28software%29)和[Python](http://en.wikipedia.org/wiki/Python_%28programming_language%29)，并希望将 .py 文件提供给其他用户以使用我的脚本...我的脚本使用外部模块（如[NumPy](http://en.wikipedia.org/wiki/NumPy)），这会引发错误（如`can't find module xxxx`）。

并非所有人都可以安装 NumPy（甚至 Python :D），因为许多 Blender 用户只是艺术家。

另一个注意事项是 NumPy 不适用于 Blender（我将它安装在系统的 Python 中，然后删除 Blender Python，使其依赖于系统 Python）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:04:41.930

如果你想通过外部依赖来分发你的代码，那么你应该构建一个[Python egg](https://stackoverflow.com/questions/2051192/what-is-a-python-egg#2051195)。创建 .egg 格式是为了解决您正在处理的问题。它是您的代码的独立版本，具有依赖项和元数据。[以下](http://www.blog.pythonlibrary.org/2012/07/12/python-101-easy_install-or-how-to-create-eggs/)是有关如何创建 Python 鸡蛋的一些信息。

# mysql - SQL查询输出到SQL查询

> ID：15069840
> 
> 赞同：0
> 
> 时间：2013-02-25T14:56:39.477
> 
> 标签：mysql, terminal, putty

如何将 sql 查询的结果保存为另一个 sql 查询，以便在某个地方，如果进行了删除，它可以恢复为旧数据？

我正在考虑进行系统调用。像这样的东西

```
system (mysql -uuser-ppassword -Ddatabase < select.sql > backup.sql 
```

其中 select.sql 是初始查询，backup.sql 是最终查询。当我执行它时，只需在 backup.sql 中获取一个数据转储

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:45:19.937

尝试使用 SQLyog ( [http://www.webyog.com/](http://www.webyog.com/) ) 将表导出为一系列插入语句。这应该可以满足您的要求，尽管我不完全确定它是否可以使用 where 子句导出 select 语句的结果。它将允许您选择要导出的列。

# javascript - JavaScript Regex 将长日期时间转换为短日期并将长数字转换为小数点后 2 位

> ID：15069842
> 
> 赞同：0
> 
> 时间：2013-02-25T14:56:48.350
> 
> 标签：javascript, jquery, regex

大家好，我有一个简单的 javascript 问题，希望有人能帮我解决这个问题

```
function changeDate(){
var date = '2/1/2013 12:00:00 AM';

var newDate = date.replace^(?ni:(?=\d)((?'year'((1[6-9])|([2-9]\d))\d\d)(?'sep'[/.-])(?'month'0?[1-9]|1[012])\2(?'day'((?<!(\2((0?[2469])|11)\2))31)|(?<!\2(0?2)\2)(29|30)|((?<=((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|(16|[2468][048]|[3579][26])00)\2\3\2)29)|((0?[1-9])|(1\d)|(2[0-8])))(?:(?=\x20\d)\x20|$))?((?<time>((0?[1-9]|1[012])(:[0-5]\d){0,2}(\x20[AP]M))|([01]\d|2[0-3])(:[0-5]\d){1,2}))?)$

alert(newDate); // i need this to alert just '02/01/2013'

}

 function twoDecimalPlace{

var decimal = '1904686.92000000';
//do something;

alert(decimal) // this should alert 1904686.92
 } 
```

所以基本上我需要截断时间并缩短日期。对于小数位，我需要将其缩短到小数点后 2 位，并查看它是否类似于 0.988，如果尾随数字大于 5，则应该将 0.99 四舍五入到下一个最大值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:59:02.200

正则表达式不是这项工作的正确工具。

您应该使用[`Date()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)then 之类的方法[`getDate()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDate)来[`getFullYear()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getFullYear)重新格式化日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:08:25.753

至于小数位：

```
var x = twoDecimalPlace('1904686.92600000');
alert(x);
function twoDecimalPlace(decimal){
    var result = Number(decimal).toFixed(2);
    return(result);
 } 
```

[http://jsfiddle.net/6etNB/](http://jsfiddle.net/6etNB/)

# android - 如何使用带有 ListView 和自定义适配器的 Selector 来指示所选项目

> ID：15069845
> 
> 赞同：2
> 
> 时间：2013-02-25T14:57:01.590
> 
> 标签：android, android-layout, xamarin.android

我有一个具有 ListView 的活动，并且我创建了一个基于 BaseAdapter 的自定义适配器。

自定义适配器的 GetView 方法使用自定义布局：

```
view = context.LayoutInflater.Inflate(Resource.Layout.BluetoothDeviceListItem, null); 
```

布局如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/BluetoothDeviceListSelector">  
  <TextView android:id="@+id/txtBluetoothDeviceName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            style="@android:style/TextAppearance.Large"/>
  <TextView android:id="@+id/txtBluetoothDeviceAddress"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            style="@android:style/TextAppearance.Medium"/>
</LinearLayout> 
```

基本上我会显示蓝牙设备的名称及其下方的地址。
但是我希望用户能够在 ListView 中选择一个项目，并且该项目应该保持突出显示（至少），或者我可能想向它添加一个图标或其他什么。

据我了解，由于我使用的是自定义布局，因此我失去了默认选择指示器，必须使用我自己的选择器。我在一个在线教程中发现了类似的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_pressed="true" >
    <shape>
      <gradient
       android:startColor="#E77A26"
         android:endColor="#1DB38B"
         android:angle="270" />
    </shape>
  </item>
  <item android:state_selected="true">
    <shape>
      <gradient
       android:startColor="#E77A26"
         android:endColor="#2B37AE"
         android:angle="270" />
    </shape>
  </item>
  <item android:state_focused="true">
    <shape>
      <gradient
       android:startColor="#E77A26"
         android:endColor="#EEFFEE"
         android:angle="270" />
    </shape>
  </item>
</selector> 
```

但唯一能做的就是改变颜色，只要用户按住 ListView 中的一个项目。他一放手，就什么都没有了。

现在我无法弄清楚真正导致问题的原因。

*   我的 ListView 是否在某处失去了选择支持
*   选择器的 XML 是否完全错误
*   我是否应该向适配器添加选择支持（这似乎很奇怪，因为它应该独立于视图）

*免责声明：我看过一些相关的问题，但它们并没有真正帮助我。
另外，由于长城，我目前无法访问大部分在线文档*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T04:31:49.500

最后，基于@CommonsWare 的评论，我简单地使用了激活状态：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_pressed="true" >
    <shape>
      <gradient
       android:startColor="#E77A26"
         android:endColor="#1DB38B"
         android:angle="270" />
    </shape>
  </item>
  <item android:state_activated="true">
    <shape>
      <gradient
       android:startColor="#E77A26"
         android:endColor="#EEFFEE"
         android:angle="270" />
    </shape>
  </item>
</selector> 
```

也就是说，我现在已经不再显示选定的项目，我只是在单击项目时直接导航到一个新的活动，以符合 Android 设计指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:12:20.003

您可以将所选位置保留在内存中。在您的适配器中，添加一个变量来存储所选项目。然后在您的`getView()`方法中，如果当前位置等于您选择的项目，请执行不同的操作。如果您想突出显示您的项目，`setBackgroundColor()`.

这是一个例子

```
 @Override public View getView(int position, View convertView,
    ViewGroup parent) {

        View row = convertView;

        if (row == null) {      
            LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);         
             row = inflater.inflate(R.layout.my_xml_file, parent,false);    }
        if(position==selectedPosition){            
             row.setBackgroundColor(Color.parseColor("#800ff000"));     }   
        else{       
             row.setBackgroundColor(Color.TRANSPARENT);     }

       return row; } 
```

# c# - 关闭数据读取器时出现 NullReferenceException

> ID：15069847
> 
> 赞同：2
> 
> 时间：2013-02-25T14:57:07.007
> 
> 标签：c#, .net, ado.net

我刚刚学习使用 ADO.NET，我似乎遇到了问题。我想做的是从表中获取数据并将其插入 DataTable。这是我的代码：

```
public DataTable GetCategories()
    {
        SqlConnection connection = null;
        SqlDataReader reader = null;
        DataTable categories = new DataTable();

        try {
            connection = new SqlConnection();
            connection.ConnectionString = connectionString;
            connection.Open();

            SqlCommand cmd = new SqlCommand();
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = "GetCategories";
            reader = cmd.ExecuteReader();

            categories.Columns.Add("Id", typeof(int));
            categories.Columns.Add("CategoryName", typeof(int));

            while (reader.Read()) {
                int categoryId = (int)reader["Id"];
                string categoryName = (string)reader["CategoryName"];
                categories.Rows.Add(categoryId , categoryName);
            }

        }catch(Exception e){
            DataTable error = new DataTable();
            error.Columns.Add("Error");
            error.Rows.Add(e.Message);
            return error;
        }finally{
            connection.Close();
            reader.Close();
        }
        return categories;
    } 
```

这是我的 SQL 查询：

```
 CREATE PROCEDURE [dbo].[GetCategories]
    AS
        SELECT Id , CategoryName
        FROM Categories 
```

在我运行这个方法的地方，我回到 reader.Close() 一个异常，显示 NullRefferenceException。

我究竟做错了什么？

**编辑**

我刚刚注意到 reader = cmd.ExecuteReader(); 抛出 InvalidOperationException。这是因为查询吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T14:59:09.633

您编写代码的方式意味着，如果创建或连接到 时出错`SqlConnection`，您的 finally 块将尝试关闭`reader`尚未设置的 a 。

在 finally 块中检查空值或重新构建代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:03:00.597

您需要检查块`null`中的参考`finally`：

```
 finally{
        connection.Close();
        if (reader != null)
          reader.Close();
    } 
```

如果您在`SqlConnection`时抛出异常`connection.Open()`，则阅读器未初始化且其值为`null`，因此您需要在`finally`块中对其进行检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T15:03:17.233

`SqlCommand`需要访问`SqlConnection`对象。例如：

```
SqlCommand cmd = new SqlCommand("dbo.GetCategories", connection) 
```

此外，请查看[using 块](http://msdn.microsoft.com/en-gb/library/yh598w02.aspx)- 这是构建数据访问代码的更好方法。

# target - waf - 自定义命令工具提示

> ID：15069851
> 
> 赞同：1
> 
> 时间：2013-02-25T14:57:21.243
> 
> 标签：target, waf

我通过创建自定义命令

```
def spawn_pot(ctx):
    ctx.recurse ('po')

class spawnpot(BuildContext):
    cmd = 'spawnpot'
    fun = 'spawn_pot' 
```

我想设置一个工具提示，但我找不到如何做到这一点。目前`waf --help`看起来像这样（截断）：

```
Main commands (example: ./waf build -j4)
build    : executes the build
...
updatepo : 
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T00:01:48.873

只需用 "" 或 """ """ 来描述你的方法/类

```
def spawn_pot(ctx):
    """ Spawn Pot Target

        Multiline
    """
    ctx.recurse ('po')

class spawnpot(BuildContext):
    "SpawnPot Build Context Description"
    cmd = 'spawnpot'
    fun = 'spawn_pot' 
```

这应该给你这样的东西：

```
the_prompt> waf -h
...
spawn_pot:  Spawn Pot Target

            MultiLine

spawnpot :  SpawnPot Build Context Description
... 
```

# facebook - 通过 iOS Facebook 应用程序付款？

> ID：15069852
> 
> 赞同：2
> 
> 时间：2013-02-25T14:57:21.320
> 
> 标签：facebook, mobile-website, google-checkout

我知道关于 iOS，本机应用程序有 IAP，但这会影响网站（我会解释）吗？

我有一个电子商务商店（标准网站），我的客户希望在 Facebook 上与促销等一起销售。

在 developer.facebook.com 上的“Mobile Web”配置中，有这一行`If your app accepts payments through any non-iOS approved service it will be restricted on iOS. Learn more.`。

> 1.  这到底是什么意思？
> 2.  移动 Web 是否不适合配置 Web 应用程序，因此它们出现在 iOS Facebook 上。
> 3.  我在哪里可以找到批准的支付提供商列表？

还是我完全错过了重点？我正在使用 Google Checkout API 处理来自我的自定义购物车的付款。

任何人都可以对此有所了解，我们将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T08:55:47.720

我在猜测答案：
这是 Facebook 传递的 Apple 的法律要求。Apples 不允许任何应用程序不通过其支付机制进行支付。Facebook iOS 应用受同一许可约束。由于 Facebook 是运行其他 (facebook) 应用程序的 (iOS) 应用程序 - Facebook (iOS) 应用程序内的应用程序应遵守相同的许可证。

我同意这不方便，因为它让您处理不止一种支付服务，只是为了让您使用 iPhone。

——弗兰吉

# c++ - C++ 静态对象指针列表和内存泄漏

> ID：15069853
> 
> 赞同：2
> 
> 时间：2013-02-25T14:57:23.150
> 
> 标签：c++, list, pointers, memory-leaks

我正在尝试创建一个包含指向该类实例的静态指针列表的类，但我遇到了内存泄漏。我想知道是否有人可以指出以下代码有什么问题。我有一种感觉，要么与析构函数有关，要么与`void creature::kill()`函数有关。我注意到我正在使用 allegro 但没有包含一些没有做任何特别的功能。

首先是类头：

```
class creature{

    private:    
        //some data for other functions

    public:
        static std::list<creature*> mycreatures; 

        creature(); 
        ~creature();                    

        void kill();

}; 
```

类 .cpp 文件

```
#include "creature.h"

std::list<creature*>creature::mycreatures;

creature::creature(){
    mycreatures.push_back(this);

}

creature::~creature(){

    std::list<creature*>::iterator p =
        find(mycreatures.begin(),mycreatures.end(),this);
    if(p != mycreatures.end()){
        mycreatures.erase(p);
    }   
}
void creature::kill(){
    if(mycreatures.size()>0){
    std::list<creature*>::iterator it = --mycreatures.end ( );
    delete (*it);
    }
} 
```

和主要

```
#include "creature.h"

void main (void){  
     creature a;
     while(!key[KEY_ESC]){

        std::list<creature*>::iterator it;
        for(it=a.mycreatures.begin(); it!=a.mycreatures.end(); it++)
        {
         (*it)->//some other non included functions 
        }
        if(key[KEY_N]){
                    new creature();
    }
    if(key[KEY_K]){
        a.kill();
    }       
  }
  allegro_exit();
}
END_OF_MAIN(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:20:35.687

```
 creature a; 
```

确认！你有代码调用`delete`一个生物而不调用`new`那个生物。为此，您必须*始终*使用创建`creature`s`new`并且永远不要在堆栈上创建它们！如果这个生物在它还在范围内时被杀死会发生什么？繁荣。

# sql - 在 SQL Server 2012 中查找列的百分位数

> ID：15069854
> 
> 赞同：2
> 
> 时间：2013-02-25T14:57:33.153
> 
> 标签：sql, sql-server-2012

我正在尝试使用该`Percentile_DISC(0.8)`函数在 SQL Server Management Studio 中查找列的第 80 个百分位，但它希望我进行分区。有什么方法可以使用这个函数来查找整个列的百分位数而不是分区？我只想要一个值。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T15:05:27.073

是的 - 试试`Percentile_DISC(0.8) within group (order by ...) over ()`

# android - 如何将 android 应用程序与树莓派交互......？

> ID：15069857
> 
> 赞同：4
> 
> 时间：2013-02-25T14:57:41.417
> 
> 标签：android, raspberry-pi

我可以使用 Python 或 Wiring-PI C 库对我的 Raspberry PI 进行编程以控制其 GPIO。我可以使用 webiopi 或 web2py 等 Web 界面来控制它。

我打算做的是编写我自己的 android 应用程序（仅由我创建的布局）并希望此应用程序远程访问 PI 并运行为 GPIO 控件存储的代码。

我希望我的 Java 代码能够远程控制我的 C 代码或类似的东西。

我不知道我需要什么样的库来进行这种交互，我会很感激任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:19:27.340

由于您可以使用 webiopi 或 web2py 等 Web 界面控制 Raspberry Pi，为什么不使用 Android 应用程序中的 REST API。

[适用于 Android 的 REST API 客户端库](https://stackoverflow.com/questions/13444113/rest-api-client-library-for-android)

[RESTful API 服务](https://stackoverflow.com/questions/3197335/restful-api-service)

如果您正在寻找更多想法，您可以考虑带有 Android 客户端（在设备上）和 Java/Python 服务器（在 pi 上运行）的蓝牙客户端服务器应用程序

[在PC上初始化蓝牙连接android（客户端）到python（服务器）](https://stackoverflow.com/questions/10922319/initializing-bluetooth-connection-androidclient-to-pythonserver-on-pc)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T15:42:26.977

你需要在你的树莓派上设置一个服务器来接收 GET 或 POST 调用。

然后从您的 Android 应用程序中使用所有正常的标准 Java 调用此 Web 服务并获得合适的响应，例如 GPIO 状态。

例如 android App 使用 GET 请求到`http://192.168.0.10:8080/GPIO/Toggle/3`您的树莓派服务器，监听端口 8080，将切换 GPIO 3 并回复 Android 00001000（意味着 GPIO 3 已打开）。

但这只是一种可能的想法，您可以使用像[Kryonet](https://code.google.com/p/kryonet/)这样的库通过传统套接字进行通信。

# visual-studio - 创建 Visual Studio 插件运行错误

> ID：15069864
> 
> 赞同：1
> 
> 时间：2013-02-25T14:57:50.483
> 
> 标签：visual-studio, add-in

对于我制作的每个插件项目，这种情况一遍又一遍地发生在我身上。我从模板向导创建了 AddIn 项目并对其进行了工作，编码和调试了几个小时，然后突然间我得到了：

错误 1 ​​无法将文件“obj\Debug\Project1.dll”复制到“bin\Project1.dll”。该进程无法访问文件“bin\Project1.dll”，因为它正被另一个进程使用。

有谁知道这是怎么回事？发生在 VS2008 和 VS2010 中。

谢谢

*编辑：我找到了一种解决方法，方法是关闭所有 VS 实例，删除 Project1.dll 文件，当 VS 再次打开 VS 实例时询问我是否要删除对 AddIn 的引用时选择 NO。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:15:56.223

我今天实际上遇到了这个问题，我花了很长时间才弄清楚。对我来说，我正在创建一个在 Visual Studio 启动时自动加载的插件。我修复它的方法是：

工具 -> 插件管理器

然后**取消选中**插件附近的**第一个复选框。**保持选中“**启动**”复选框**以**继续调试您的插件。

希望这可以帮助。

# java - 访问其他片段数据

> ID：15069865
> 
> 赞同：0
> 
> 时间：2013-02-25T14:57:54.520
> 
> 标签：java, android, android-fragments

我遇到了一些麻烦，我已经对这个问题进行了研究，但这对我没有帮助。

我有一个 Main.java 类，它是模板制作的片段分页视图。

我没有以任何方式修改它，除了 getItem() 方法现在返回我自己的片段。

我的片段 A 正在收集加速度计数据，将最后 120 条记录保存在 ArrayList 中。它还有带有 Series 对象的图表，我想从片段 B 访问这些对象。

这就是我想要做的：

在片段 B 中，用户按下“记录数据”按钮

这导致片段 A 布尔字段“recordingOn”更改为 true

现在在 fragmentA 的 onSensorChange 方法中，在检查“recordingOn”之后，如果它是真的，它会将数据传递给一个 ArrayList，它是片段 B 中的一个字段

如何访问这些字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:37:41.300

Greensy 的答案是一个有效的选择（我支持他），但您也可以避免在片段之间进行太多的 DataPassing，让 Activity 成为所有这些的管理者。

为此，您可以在片段中创建公共方法和接口，并让/强制活动实现接口。

简单的例子：

```
public class Act extends Activity implements OnClickListener{
     @Override
     OnClick(View v){
        if(v.getId()==R.id.btn_recordData){
           fragA.startRecording();
        }
     }
} 
```

那么 FragA 你必须创建该方法：

```
 public class FragA extends Fragment{
    private boolean isRecording
    public void startRecording(){ isRecording = true; // also init the sensor stuff }
    public void stopRecording() { isRecording = false; // also stop the sensor stuff }
 } 
```

然后在 FragB 你可以：

```
 public class FragB extends Fragment{
      onCreateView(...){
          // initialise all the views and find the button, let's call it Button btn;
          btn.setOnClickListener((OnClickListener)getActivity());
      }
 } 
```

那有意义吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:05:39.867

从片段调用

Fragment frag = getActivity().getFragmentManager()..findFragmentByTag("片段找到标签");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:05:50.487

一种方法是使用您自己的[Application 类](http://developer.android.com/reference/android/app/Application.html)并将您的存储`ArrayList`在其中

然后，您可以在应用程序的任何位置访问它，如果您有`Context`：

```
ArrayList<AccelerometerData> myAccelerometerData = ((MyApplication) mContext.getApplicationContext()).getAccelerometerData(); 
```

请注意此解决方案，因为您`ArrayList`将在所有应用程序运行期间都还活着

# unix - 如何使用“，”作为分隔符将数据插入文件

> ID：15069868
> 
> 赞同：0
> 
> 时间：2013-02-25T14:58:03.917
> 
> 标签：unix, sed, awk

```
cat try_1.txt | grep 'aa|' | cut -d '|' -f 2 >> abc.txt 
```

使用上面我选择几个恶魔并将其放入 abc.txt

abc.txt 的数据是

```
aa
bb
ccc
dd 
```

我希望将数据插入到 abc.txt 中，例如：预期输出：

```
aa,bb,ccc,dd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:59:59.480

```
paste -s -d, - < try_1.txt 
```

完全按照您的意愿行事，但我完全不明白您为什么拥有`grep 'aa|'`，所以我可能不知道您想要什么。

啊，现在我想我明白你想要什么了：

```
awk '/aa\|/ {print $2}' FS=\| try_1.txt | paste -s -d, - >> abc.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:24:51.350

不需要多个工具和管道，只需使用 awk”：

```
$ cat try_1.txt
aa|aa
aa|bb
aa|ccc
aa|dd

$ awk -F'|' '/aa\|/{printf "%s%s",s,$2;s=","} END{print ""}' try_1.txt
aa,bb,ccc,dd 
```

# java - 等待 GWT 中 CellTable 的数据

> ID：15069873
> 
> 赞同：2
> 
> 时间：2013-02-25T14:58:15.737
> 
> 标签：java, gwt, celltable

我正在使用带有`RequestFactory`机制的 GWT 2.4。随着更大的部分`data`有一些额外的时间`(1-2 sec)`来`celltables`填充。在此期间`celltable`是空的，用户不知道其中是否会出现任何内容。有什么方法可以等待`indicator`它们`celltables`被填充的时间吗？

我已经为`RequestFactory`呼叫配置了等待指示器，所以我已经做好了准备`images`，但我不知道该怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:03:34.810

您可以使用 CellTable 的 setLoadingIndicator API -

```
cellTable.setLoadingIndicator( Your customised loading indicator widget ); 
```

小部件可以是一个包裹在面板中的图像，也可以只是一个图像。

如果您使用 ListDataProvider，您需要编写更多代码行。当您调用 addDataDisplay 方法时，它会在内部将行数更新为 0。使用此表的状态更改为已加载。所以我们没有得到加载图像。

解决方法是，仅在 dataProvider.setList 调用之前调用 addDataDisplay 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:53:17.313

在调用之前，`setLoadingIndicator`您必须调用以下方法

```
cellTable.setVisibleRangeAndClearData(cellTable.getVisibleRange(),
   true); 
```

# c# - 将值插入表格时显示加载栏

> ID：15069875
> 
> 赞同：0
> 
> 时间：2013-02-25T14:58:19.737
> 
> 标签：c#, asp.net-mvc-3, loops, asynchronous

我将此代码基于此示例[http://weblogs.asp.net/seanmcalinden/archive/2009/11/15/asynchronous-processing-in-asp-net-mvc-with-ajax-progress-bar.aspx](http://weblogs.asp.net/seanmcalinden/archive/2009/11/15/asynchronous-processing-in-asp-net-mvc-with-ajax-progress-bar.aspx) 使用MVC3、C#、jQuery、Ajax ++

我的html

```
<div>
   <a href="#" id="startProcess">Start Long Running Process</a>
</div>
<br />
<div id="statusBorder">
    <div id="statusFill">
    </div>
</div> 
```

html的javascript部分

```
 var uniqueId = '<%= Guid.NewGuid().ToString() %>';

    $(document).ready(function (event) {
        $('#startProcess').click(function () {
            $.post("SendToDB/StartLongRunningProcess", { id: uniqueId,
                                 //other parameters to be inserted like textbox

                                                             }, function () {
                $('#statusBorder').show();
                getStatus();
            });
            event.preventDefault;
        });
    });

    function getStatus() {
        var url = 'SendToDB/GetCurrentProgress/' + uniqueId;
        $.get(url, function (data) {
            if (data != "100") {
                $('#status').html(data);
                $('#statusFill').width(data);
                window.setTimeout("getStatus()", 100);
            }
            else {
                $('#status').html("Done");
                $('#statusBorder').hide();
                alert("The Long process has finished");
            };
        });
    } 
```

一个完整的班级来帮助

```
public class ProgressBarManager
{

    private static object syncRoot = new object();

    /// <summary>
    /// Gets or sets the process status.
    /// </summary>
    /// <value>The process status.</value>
    private static IDictionary<string, int> ProcessStatus { get; set; }

    /// <summary>
    /// Initializes a new instance of the <see cref="MyLongRunningClass"/> class.
    /// </summary>
    public ProgressBarManager()
    {
        if (ProcessStatus == null)
        {
            ProcessStatus = new Dictionary<string, int>();
        }
    }

    /// <summary>
    /// Processes the long running action.
    /// This is how it was in sample code. Not used anymore.
    /// </summary>
    /// <param name="id">The id.</param>
    //public string ProcessLongRunningAction(string id)
    //{
    //    for (int i = 1; i <= 100; i++)
    //    {
    //        Thread.Sleep(100);
    //        lock (syncRoot)
    //        {
    //            ProcessStatus[id] = i;
    //        }
    //    }
    //    return id;
    //}

    public void SetStatus(string id, int value)
    {
        lock (syncRoot)
        {
            ProcessStatus[id] = value;
        }
    }

    /// <summary>
    /// Adds the specified id.
    /// </summary>
    /// <param name="id">The id.</param>
    public void Add(string id)
    {
        lock (syncRoot)
        {
            ProcessStatus.Add(id, 0);
        }
    }

    /// <summary>
    /// Removes the specified id.
    /// </summary>
    /// <param name="id">The id.</param>
    public void Remove(string id)
    {
        lock (syncRoot)
        {
            ProcessStatus.Remove(id);
        }
    }

    /// <summary>
    /// Gets the status.
    /// </summary>
    /// <param name="id">The id.</param>
    public int GetStatus(string id)
    {
        lock (syncRoot)
        {
            if (ProcessStatus.Keys.Count(x => x == id) == 1)
            {
                return ProcessStatus[id];
            }
            else
            {
                return 100;
            }
        }
    }
} 
```

这是控制器，这就是我可能做错了什么的地方。

```
 delegate string ProcessTask(string id);
    ProgressBarManager longRunningClass = new ProgressBarManager();
    //Some global variables. I know it is not "good practice" but it works.
    private static int _GlobalSentProgress = 0;
    private static int _GlobalUsersSelected = 0;

    /// <summary>
    /// Starts the long running process.
    /// </summary>
    /// <param name="id">The id.</param>
    public void StartLongRunningProcess(string id,
                                        //other parameters
                                        )
    {
        longRunningClass.Add(id);

        int percentDone = 0;
        var batchId = Guid.NewGuid().ToString("N");
        var costd = cost.ToDecimal();
        int sent = 0;

        IEnumerable<BatchListModel> users;

        users = new UserService(_userRepository.Session).GetUsers(
                //several parameters)

        foreach (var c in users)
        {
            try
            {
                var usr = _userRepository.LoadByID(c.ID);

                var message = new DbLog
                {
                    //insert parameters
                };

                _DbLogRepository.Save(message);
                sent++;

                //MyLog.WriteLine("Sent = " + sent); This is  1 more each time it loops
                //MyLog.WriteLine("GlobalUsersSelected = " + _GlobalUsersSelected); This one is set in another function not shown.

                double _GlobalSentProgress = (double)sent / (double)_GlobalUsersSelected * 100;
                //MyLog.WriteLine("SentProgress = " + _GlobalSentProgress);

                if (percentDone < 100)
                {
                    //percentDone = doSomeWork();
                    percentDone = Convert.ToInt32(_GlobalSentProgress);
                    //MyLog.WriteLine("percentDone = " + percentDone); This one shows same as GlobalSentProgress except the decimals are removed
                    longRunningClass.SetStatus(id, percentDone);
                }

            }
            catch (Exception e)
            {
                MyLog.WriteLine("ERR:" + e);
            }
        }
        longRunningClass.Remove(id);

        //Under here is how it was done in the example tutorial. 
        //I think these should be implemented somehow.
        //This may be the root of my problem

        //ProcessTask processTask = new ProcessTask(longRunningClass.ProcessLongRunningAction);
        //processTask.BeginInvoke(id, new AsyncCallback(EndLongRunningProcess), processTask);

    }

    /// <summary>
    /// Ends the long running process.
    /// </summary>
    /// <param name="result">The result.</param>
    public void EndLongRunningProcess(IAsyncResult result)
    {
        ProcessTask processTask = (ProcessTask)result.AsyncState;
        string id = processTask.EndInvoke(result);
        longRunningClass.Remove(id);
    }

    /// <summary>
    /// Gets the current progress.
    /// </summary>
    /// <param name="id">The id.</param>
    public ContentResult GetCurrentProgress(string id)
    {
        this.ControllerContext.HttpContext.Response.AddHeader("cache-control", "no-cache");
        var currentProgress = longRunningClass.GetStatus(id).ToString();
        return Content(currentProgress);
    } 
```

有谁知道有什么问题？非常感谢任何帮助。我已经被困了好几天了。

在插入 100% 完成之前，不会输入一些应该更新“进度”的断点。现在，带有进度条的 div 永远不会出现。

编辑：在进行插入的循环中，我确实有这个计算：

```
double _GlobalSentProgress = (double)sent / (double)_GlobalUsersSelected * 100; 
```

然后我将 _GlobalSentProgress 转换为正常的 int

```
percentDone = Convert.ToInt32(_GlobalSentProgress); 
```

所以它不再有任何小数。

如果我能在每次循环时将这个“percentDone”变量（它完美地显示了我在插入中的百分比）异步发送到javascript中的“数据”变量中，它就会起作用。然后“数据”会一直执行“状态填充”并正确显示条形图。

```
 function getStatus() {
        var url = 'SendToDB/GetCurrentProgress/' + uniqueId;
        $.get(url, function (data) {
            if (data != "100") {
                $('#status').html(data);
                $('#statusFill').width(data);
                window.setTimeout("getStatus()", 100);
            }
            else {
                $('#status').html("Done");
                $('#statusBorder').hide();
                alert("The Long process has finished");
            };
        }); 
```

但老实说，这是我第一次处理异步变量，所以我对如何做这些事情非常迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:07:16.113

你想得到设计师的帮助来显示进度条，假设你有一些 CSS 的 div 元素

```
<div id="divProgressBar" >/div>
 $(document).ready(function (event) {
    $('#startProcess').click(function () {
        $('#divProgressBar').show();//My code here
   }
}

function getStatus() {
    var url = 'SendToDB/GetCurrentProgress/' + uniqueId;
    $.get(url, function (data) {
        if (data != "100") {
            $('#status').html(data);
            $('#statusFill').width(data);
            window.setTimeout("getStatus()", 100);
        }
        else {
            $('#status').html("Done");
            $('#statusBorder').hide();
            $('#divProgressBar').hide();//My code here
            alert("The Long process has finished");
        };
    });
} 
```

您还可以使用第三方 JS 来阻止 UI。

[http://www.malsup.com/jquery/block/](http://www.malsup.com/jquery/block/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:08:24.857

如果我遇到这样的问题，我要做的第一件事就是设置断点或调试器（在 js 中）并查看代码的哪些部分正在做某事。

您说您的状态栏永远不会显示，如果您查看它指出的[Jquery.post 文档](http://api.jquery.com/jQuery.post/)

> 请求成功时执行的回调函数。

那是因为您的查询没有成功，它永远不会显示。因此，首先要查看代码中的问题所在（C#）

# vb.net - 无法在第二列列表视图中选择值

> ID：15069876
> 
> 赞同：0
> 
> 时间：2013-02-25T14:58:20.133
> 
> 标签：vb.net, winforms, listview

我有一个列表视图，它以这种方式在两列之间动态填充值：

```
column 1 | column 2
value1 | value 2
value3 | value 4 
```

但是我无法在第 2 列中选择任何值 - 是否存在列表视图的属性阻止我执行此操作，或者是我填充这些列的方式？这是我填充列的代码：

```
For k = 0 To UBound(tempValues)  

    Dim itm As New ListViewItem(tempValues(k))   

    If k Mod 2 = 0 Then 

        listview1.AutoResizeColumns(ColumnHeaderAutoResizeStyle.HeaderSize)  

        itm.SubItems.Add(tempValues(k + 1)) 

        listview1.Items.Add(itm)  

    End If 

    listview1.AutoResizeColumns(ColumnHeaderAutoResizeStyle.HeaderSize)  
Next 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:07:27.640

我能看到的最接近的是设置`listView1.FullRowSelect = true`（我假设你有`listView1.View = View.Details`？）

然而，这只会给你全行选择——记住第二列代表列表视图项目的第一个子项目。

如果您想要多列数据，最好设置`listView1.View = View.Details = View.List`，这将导致它在垂直空间用完时将单个项目列表包装到多列中。

**编辑：**

如果您使用`listView1.View = View.List`，您的人口将需要更改为以下内容：

```
For k = 0 To UBound(tempValues)  
    listview1.Items.Add(new ListViewItem(tempValues(k))   
Next 

listview1.AutoResizeColumns(ColumnHeaderAutoResizeStyle.HeaderSize) 
```

但这意味着您最终会得到这样的列表：

```
Value 1
Value 2
Value 3
Value 4 
```

如果 ListView 太短而无法显示，所有这些，它会包装它们：

```
Value 1    Value 4
Value 2
Value 3 
```

# ruby-on-rails - 验证 rails 3.2 中至少存在一个关联对象

> ID：15069877
> 
> 赞同：1
> 
> 时间：2013-02-25T14:58:21.710
> 
> 标签：ruby-on-rails, validation, callback, ruby-on-rails-3.2

我有一个小问题，我无法解决。我想验证至少有一个关联模型。像下面这样

```
class User < ActiveRecord::Base
has_many :things
validates_presence_of :things
end

class Thing < ActiveRecord::Base
belongs_to :user
end 
```

当我通过 更新我的模型时，这工作正常`#update_attributes`，但是当我简单地设置时`@user.things = []`，我能够在数据库中获取无效数据。我解决这个问题的方法是覆盖 setter 方法

```
def things=(val)
  begin
    if val.blank?
      errors.add(:things, "not valid")
      raise SomeError
    end
    super
  rescue SomeError
    false
  end
end 
```

但不知何故，这感觉不对。有没有办法通过验证和/或回调来归档相同的结果，最好是`#things=`返回 false （而不是`val`），这样`@user.things`就不会改变（我的意思是缓存的`@user.things`，`@user.things(true)`无论如何都应该可以正常工作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:55:29.230

您可以创建一个自定义验证器来检查事物的存在。

代替

`validates_presence_of :things`

你可以做

`validate :user_has_things`

```
def user_has_things
 if self.things.size == 0
  errors.add("user has no thingies")
 end
end 
```

# java - Primefaces 选项列表标签在更新后为空

> ID：15069879
> 
> 赞同：0
> 
> 时间：2013-02-25T14:58:31.357
> 
> 标签：java, jsf, primefaces

带有选项列表的表格：

```
<p:inputText id="number" value="#{accountNumberBean.account.accountNumber}" required="true" label="#{msg['newAccountNumberForm.number']}">
    <f:validateLength maximum="50" for="name" />
</p:inputText>

<p:message for="number" display="text" />

<p:pickList id="integrations" value="#{accountNumberBean.integrations}" var="integration" itemLabel="#{integration.name} (#{integration.backend.name})" itemValue="#{integration}" converter="integrationConverter">
    <f:facet name="sourceCaption">#{msg['newAccountNumberForm.integrations.available']}/>
    <f:facet name="targetCaption">#{msg['newAccountNumberForm.integrations.used']}/>
</p:pickList>
<p:commandButton value="#{msg['button.createAndNext']}" action="#{accountNumberBean.addNewAndStay}" update="@form" /> 
```

当我不填写数字输入时，单击命令按钮 - 显示验证消息，但选项列表中的对象标签会更新，它们只是空括号。

```
itemLabel="#{integration.name} (#{integration.backend.name})" 
```

当我选择它们并填写名称时 - 一切正常（就像我首先填写名称一样），所以唯一的问题是标签。这是我的转换器：

```
@FacesConverter(forClass = Integration.class, value = "integrationConverter")
public class IntegrationConverter implements Converter {

    /**
     * {@inheritDoc} 
     */
    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        Integration integration = new Integration();
        integration.setId(Long.parseLong(value));
        return integration;
    }

    /**
     * {@inheritDoc} 
     */
    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        return ((Integration) value).getId().toString();
    }

} 
```

以及 bean 上获取集成的方法（bean 是视图范围的）：

```
public DualListModel<Integration> getIntegrations() {
        integrations.setSource(customerService.getIntegrations(customer));
        return integrations;
    } 
```

是什么导致标签为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:55:37.670

在你的转换器中，你只传递你的 pojo 的 id 值，所以当它被转换时，它基本上是一个带有设置 id 的空对象。

将转换器更改为以下很可能会使第一个标签正确显示：

```
 /**
 * {@inheritDoc} 
 */
@Override
public Object getAsObject(FacesContext context, UIComponent component, String value) {
    Integration integration = new Integration();
    String[] split = value.split("_");
    integration.setId(split[0]);
    integration.setName(split[1]);
    return integration;
}

/**
 * {@inheritDoc} 
 */
@Override
public String getAsString(FacesContext context, UIComponent component, Object value) {
    Integration i = (Integration) value;
    return i.getId() + "_" + i.getName();
} 
```

但是，如果您的类是一个持久实体，您可能希望从转换器的数据库中检索对象，请检查以下代码：

```
private SessionFactory sessionFactory;

@Override
public Object getAsObject(FacesContext context, UIComponent component, String value) {
    Object object = null;

    if (StringUtils.isNotBlank(value)) {
        try {
            int underscoreIndex = value.indexOf("_");
            String className = value.substring(0, underscoreIndex);
            String id = value.substring(underscoreIndex + 1, value.length());

            Class<?> clazz = Class.forName(className);
            object = getSessionFactory().getCurrentSession().get(clazz, Long.parseLong(id));
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }
    return object;
}

@Override
public String getAsString(FacesContext context, UIComponent component, Object value) {
    String result = null;

    if (value != null && !value.equals("")) {
            Integration obj = (Integration) value;
            result = Hibernate.getClass(obj).getName() + "_" + obj.getId();
        }
    return result;
}

private SessionFactory getSessionFactory() {
    if(sessionFactory == null) {
        sessionFactory = ((SessionFactory) FacesContextUtils                    .getWebApplicationContext(FacesContext.getCurrentInstance())
                .getBean("sessionFactory"));
    }

    return sessionFactory;
} 
```

我假设您使用的是 hibernate 和 spring，并且 sessionFactory bean 是在您的应用程序上下文中定义的。

# c# - 自动将实体传递给控制器 动作

> ID：15069881
> 
> 赞同：5
> 
> 时间：2013-02-25T14:58:42.350
> 
> 标签：c#, asp.net-mvc, entity-framework

为模型添加控制器时，生成的操作将如下所示

```
public ActionResult Edit(int id = 0)
{
    Entity entity = db.Entities.Find(id);
    if (entity == null)
    {
        return HttpNotFound();
    }
    return View(entity);
} 
```

现在，在我的例子中，我采用了一个**字符串 id，它可以通过多种方式映射到 DB ID**，生成几行代码来检索正确的实体。将该代码复制并粘贴到每个需要 id 来检索实体的操作中感觉非常不雅。

将检索代码放在控制器的私有函数中减少了重复代码的数量，但我仍然剩下这个：

```
var entity = GetEntityById(id);
if (entity == null)
    return HttpNotFound(); 
```

有没有办法在属性中执行查找并将实体传递给操作？来自 python，这可以通过装饰器轻松实现。我设法通过实现一个`IOperationBehavior`仍然感觉不那么直接的 WCF 服务来做类似的事情。由于通过 id 检索实体是您经常需要做的事情，我希望除了复制和粘贴代码之外还有其他方法。

理想情况下，它看起来像这样：

```
[EntityLookup(id => db.Entities.Find(id))]
public ActionResult Edit(Entity entity)
{
    return View(entity);
} 
```

where`EntityLookup`将任意函数映射`string id`到`Entity`并返回`HttpNotFound`或调用以检索到的实体作为参数的操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:49:50.400

您可以编写一个自定义 ActionFilter：

```
public class EntityLookupAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        // retrieve the id parameter from the RouteData
        var id = filterContext.HttpContext.Request.RequestContext.RouteData.Values["id"] as string;
        if (id == null)
        {
            // There was no id present in the request, no need to execute the action
            filterContext.Result = new HttpNotFoundResult();
        }

        // we've got an id, let's query the database:
        var entity = db.Entities.Find(id);
        if (entity == null)
        {
            // The entity with the specified id was not found in the database
            filterContext.Result = new HttpNotFoundResult();
        }

        // We found the entity => we could associate it to the action parameter

        // let's first get the name of the action parameter whose type matches
        // the entity type we've just found. There should be one and exactly
        // one action argument that matches this query, otherwise you have a 
        // problem with your action signature and we'd better fail quickly here
        string paramName = filterContext
            .ActionDescriptor
            .GetParameters()
            .Single(x => x.ParameterType == entity.GetType())
            .ParameterName;

        // and now let's set its value to the entity
        filterContext.ActionParameters[paramName] = entity;
    }
} 
```

接着：

```
[EntityLookup]
public ActionResult Edit(Entity entity)
{
    // if we got that far the entity was found
    return View(entity);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:58:47.047

如果您重复类似的代码，那么您可以使用扩展方法。

```
public static class ControllerExtensions
{
    public static ActionResult StandardEdit<TEntity>(
        this Controller controller, 
        DbContext db, 
        long id)
        where TEntity : class
    {
        TEntity entity = db.Set<TEntity>().Find(id);
        if (entity == null)
        {
            return controller.HttpNotFound();
        }
        return controller.View(entity);
    }
}

public ActionResult Edit(long id = 0)
{
    return this.StandardEdit<Client>(db, id);
} 
```

* * *

如果您确实多次重复**完全相同的代码，那么这应该通过继承来解决。**

创建一个继承自的通用控制器`Controller`

```
public class StandardController : Controller
{
    public ActionResult Edit<TEntity>(long id = 0)
        where TEntity : class
    {
        TEntity entity = db.Set<TEntity>().Find(id);
        if (entity == null)
        {
            return HttpNotFound();
        }
        return View(entity);
    }
} 
```

并将您的模型控制器更改为从这个新控制器继承：

```
public class ClientController : StandardController
{
    public ActionResult Edit(long id = 0)
    {
        return base.Edit<Client>(id);
    }
} 
```

# javascript - Permission.Request 响应总是假的

> ID：15069892
> 
> 赞同：1
> 
> 时间：2013-02-25T14:59:19.697
> 
> 标签：javascript, facebook

当用户执行操作时，我们在网站上有一些代码来请求额外的权限，特别是发布到时间线。直到最近，这一直运行良好，FB 的响应格式发生了变化。我在下面包含了示例代码：

```
 FB.ui({
                method: 'permissions.request',
                'perms': 'publish_actions',
                'display': 'popup'
            }, function (response) {
                var confirm = response != null && response.perms != null && response.perms != '' && response.perms.indexOf('publish_actions') !== -1;
                $('.close').click();
            }); 
```

以前，对此的响应可以解析为字符串，以确认用户是否接受了升级的权限。但是，无论用户接受还是拒绝，现在都只是返回“false”。

有谁知道我们是否做错了什么，FB 端是否发生了变化等等。真的很难知道问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:06:54.563

可能是 facebook api 的最新变化。
所以，查看一个新的[文档页面](http://developers.facebook.com/docs/reference/javascript/FB.login/)，我希望你能改变获取登录权限的过程：

```
FB.login(function(response) {
   // handle the response
 }, {scope: 'email,user_likes'}); 
```

[在这里](http://developers.facebook.com/docs/reference/login/extended-permissions/)，您可以找到权限列表并将所需的任何内容添加到范围，例如：

```
FB.login(function(response) {
       // handle the response
     }, {scope: 'email,publish_actions'}); 
```

这将允许您的应用向用户的信息流和用户朋友的信息流发布内容、评论和点赞。
我希望以某种方式有所帮助-让我知道。

# c# - 有没有办法让事件处理程序直接在 UI 线程上运行而无需中间线程池线程？

> ID：15069894
> 
> 赞同：1
> 
> 时间：2013-02-25T14:59:21.993
> 
> 标签：c#, wpf, multithreading, threadpool, dispatcher

我有一个通过 BeginInvoke 异步触发的事件 - 所以事件处理程序有自己的线程池线程。但是事件处理程序中的所有代码都希望被分派到 UI 线程 - 所以整个事件处理程序代码都在 Dispatcher.BeginInvoke 块中。这表示：

1.  使用 BeginInvoke 启动线程触发事件。
2.  为要在其上运行的事件处理程序代码创建了一个新的线程池线程。
3.  事件处理程序立即使用调度程序（Dispatcher.BeginInvoke（...所有处理程序代码...）将其代码异步发布到 UI 线程。
4.  临时线程池线程立即返回准 - 它创建只是为了做一个 UI 线程发布。

有什么方法可以重组它以避免创建这个非常短暂的中间线程池线程（即处理程序代码直接在 UI 线程上运行）？

我不希望事件同步触发（调用）——它在各种情况下使用——它不应该被阻塞。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:04:13.580

你可以`Dispatcher.BeginInvoke`直接调用而不是使用线程池线程吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T15:15:16.540

如果你不控制触发事件的代码，你就别无选择；在这么短的时间内没有办法使用线程池线程。

如果您确实控制了触发事件的代码，您可以选择确保事件处理程序都在 UI 线程中运行。虽然这当然是*可能的*，但您应该仔细考虑是否应该如此。对于某些事件处理程序来说，让它们在 UI 线程中运行才有意义（例如，大多数事件`Form`在 UI 线程中运行），而有些则不然。如果您的事件在 UI 控件上，那么它在 UI 线程中运行可能是有意义的。如果这是您目前恰好从 UI 线程使用的某个工作类的事件，那么在 UI 线程中触发该事件可能是个坏主意（因为您将来可能会使用该工作上下文在非 WPF 上下文中）。

如果您确实想在 UI 线程中触发事件，这很简单。如果您在打算触发事件时已经在 UI 线程中，只需同步调用它：

```
var eventCopy = MyEvent;
if(eventCopy != null) eventCopy(); 
```

如果您希望触发事件时不在 UI 线程中，则在调用上述代码之前编组到 UI 线程：

```
Dispatcher.BeginInvoke(()=>{ //Or just `Invoke`, if that's appropriate in context
    var eventCopy = MyEvent;
    if(eventCopy != null) eventCopy();
}); 
```

根据您的编辑，您似乎希望根据某些特定上下文有条件地在 UI 线程或线程池线程中触发事件，而不是始终在 UI 线程中触发。

虽然这是可能的，但您需要决定是否值得。

作为示例，您可以查看`System.Timers.Timer`哪个具有`SynchronizingObject`允许您确定事件如何引发的属性（`null`对于线程池，或者在特定 UI 模型的事件中能够编组到特定上下文的对象）。

您可以遵循该一般模式。

具体方法有很多。您可以在`SynchronizationContext.Current`首次创建工作线程时捕获该值，并使用它（如果您可能需要禁用它或强制启用它，可能使用布尔值来禁用捕获源同步上下文）。

另一种选择是只拥有一个接受 a 的属性`SynchronizationContext`，或者其他一些将代码编组到给定上下文的机制（您可以发明自己的，使用委托等）。

# winforms - 将 C# 窗口应用程序作为窗口服务

> ID：15069895
> 
> 赞同：4
> 
> 时间：2013-02-25T14:59:26.153
> 
> 标签：winforms, windows-services

我有一个 C# 桌面应用程序，我想把它变成一个窗口服务。是否可以将该应用程序作为 Windows 服务？基本上我想要一个在需要时显示 gui 的应用程序，并在最小化它后进入系统尝试，它也应该出现在服务中......数据库及其从数据库中及时显示状态，所以当我需要查看它时，我可以从系统尝试启动 GUI？

任何形式的帮助都会受到高度评价。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:10:15.140

您将需要分离您的应用程序。Windows 服务和桌面。您需要在 Windows 服务中构建 API 挂钩，以允许从桌面应用程序和服务进行通信。我会为此推荐 WCF。

简而言之，Windows 服务不应与桌面交互。它将在与您登录的会话不同的会话中运行，即使您以运行该服务的同一帐户登录也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:03:15.967

无法在 Windows 服务中显示 GUI。你可以做的是：

一个。将客户端逻辑与服务器逻辑分离，Windows 服务将执行服务器端操作，并向客户端公开一个 WCF API，该 API 将处理与 GUI 相关的问题。

湾。使用像 Service-O-Matic 这样的外部工具来控制您的 winforms 应用程序，就好像它是一个 Windows 服务一样。看：

[http://www.kwakkelflap.com/service.html](http://www.kwakkelflap.com/service.html)

# java - 如何以符合 Java EE 的方式连接到 FTP？

> ID：15069898
> 
> 赞同：1
> 
> 时间：2013-02-25T14:59:34.113
> 
> 标签：java, jakarta-ee, ftp

根据 Java EE (EJB) 规范，不允许“侦听套接字、接受套接字上的连接或使用套接字进行多播”。打开 FTP 连接的 Java EE 兼容方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:02:29.820

我想说一种与 Java EE 兼容的 FTP 连接方式是使用适当的 ftp 适配器通过**[Java EE 连接器体系结构 (JCA)](http://en.wikipedia.org/wiki/Java_EE_Connector_Architecture)**。

然而，对 JCA 的支持主要留给了应用服务器供应商，我不确定您的代码将具有的可移植性。

# javascript - 在 apply (Javascript) 的重新声明中调用 Function.prototype.apply

> ID：15069906
> 
> 赞同：0
> 
> 时间：2013-02-25T15:00:08.983
> 
> 标签：javascript, function-prototypes, native-methods

在学习 Javascript 时，我尝试重新声明一个函数的 apply 属性。到目前为止没有问题。

```
function foo() { return 1; }
alert(foo()); // 1
alert(foo.apply(null)); // 1
foo.apply = function () { return 2; }
alert(foo()); // 1
alert(foo.apply(null)); // 2 
```

* * *

现在，我试图让 apply 做更多的事情并调用“旧”应用（如日志记录）。

```
var old = foo.apply;
foo.apply = function() {
   alert("A");
   return old(null);
}
alert(foo.apply(null)); 
```

我明白了

> TypeError: Function.prototype.apply 在 [object Window] 上被调用，这是一个对象而不是函数

* * *

我试过

```
foo.apply = function() {
   alert("A");
   return arguments.callee[Function.prototype.apply](null);
}
alert(foo.apply(null)); 
```

我明白了

> TypeError: 对象函数 () { alert("A"); 的属性 'function apply() { [native code] }' 返回 arguments.calleeFunction.prototype.apply；} 不是函数

* * *

有什么真正的方法可以帮助我尝试什么？还是由于 Function.prototype.apply 是本机代码而受到一些限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:17:49.810

是的。`apply`期望在函数上应用（是的，完全是自身），而您使用它的方式（通过`old()`）使其[`this`值](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)成为全局对象（`window`）。所以你可以这样做：

```
var old = foo.apply; // === Function.prototype.apply
foo.apply = function() {
    // "this" is the function foo
    alert("A");
    return old.apply(this, arguments); // applying the (old) apply function on foo
    // or better without any arguments:
    return old.call(this); // like this(); which is foo()
}
alert(foo.apply(null));

// and the call solution with an argument:
foo.apply = function(context) {
    return old.call(this, context);
    // like this.call(context);
    // which is foo.call(context)
    // which is like context.foo()
} 
```

另请查看 the[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)和[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)"methods" 的文档（尽管我们`old`不是将其用作方法，而是用作纯函数）。

# mvvm - Kendo DataSource：如何为从远程 odata 源读取的数据定义“计算”属性

> ID：15069916
> 
> 赞同：2
> 
> 时间：2013-02-25T15:00:50.757
> 
> 标签：mvvm, kendo-ui, datasource, odata, computed-observable

情况：

*   剑道数据源

    ```
    var ordersDataSource = new kendo.data.DataSource({
        type: "odata",
        transport: {
            read: {
                url: "http://localhost/odata.svc/Orders?$expand=OrderDetails"
            }
        },
        schema: {
            type: "json",
            data: function(response){
                return response.value;
            }
            total: function(response){
                return response['odata.count'];
            }
        },
        serverPaging: true,
        serverFiltering: true,
        serverSorting: true
    }) 
    ```

*   从 odata 源读取的 json 数据如下：

    ```
    {
        odata.metadata: "xxxx",
        odata.count: "5",
        value: [
            {
                OrderId: 1,
                OrderedDate: "2013-02-20",
                OrderInfoA: "Info A",
                OrderInfoB: "Info B"
                OrderDetails: [
                    {
                        OrderDetailId: 6,
                        OrderDetailInfoC: "Info C",
                        OrderDetailInfoD: "Info D"
                    },
                    {
                        //Another OrderDetail's data
                    }
                ]
            },
            {
                // Another Order's data
            }
        ]
    } 
    ```

**问题一**：

1.如果我想定义一个“计算”属性：**OrderedDateRelative**，它应该是今天（2013-02-25）和订单创建日（2013-02-20）之间的天数，例如：**“5天以前”**，我如何在客户端实现这一点？

问题1的答案：http: [//jsbin.com/ojomul/7/edit](http://jsbin.com/ojomul/7/edit)

**问题**2——*更新*——

2.每个订单都有其嵌套属性OrderDetails，那么可以为嵌套的OrderDetails属性定义一个计算字段吗？像：每个**OrderDetail**的 OrderDetailInfoCAndD，值应该类似于：**OrderDetailInfoC + OrderDetailInfoD**，即“Info C Info D”？

谢谢，

院长

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T15:20:00.693

您可以通过指定数据源的模型来创建计算字段：

```
 dataSource = new kendo.data.DataSource({
    data: [
      { first: "John", last: "Doe" }, 
      { first: "Jane", last: "Doe" }
    ],
    schema: {
      model: {
        // Calculated field
        fullName: function() {
          return this.get("first") + " " + this.get("last");
        }
      }
    }
  }); 
```

这是一个现场演示：http: [//jsbin.com/ojomul/1/edit](http://jsbin.com/ojomul/1/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-27T19:23:20.683

这是在 Kendo Grid 中使用计算字段的一种方法。

```
var crudServiceBaseUrl = "http://demos.telerik.com/kendo-ui/service",
dataSource = new kendo.data.DataSource({
    transport: {
        read: {
            url: crudServiceBaseUrl + "/Products",
            dataType: "jsonp"
        }
    },
    pageSize: 20,
    schema: {
        model: {
            total: function (item) {
                return this.UnitPrice * this.UnitsInStock;
            }
        }
    }
});

$("#grid").kendoGrid({
    dataSource: dataSource,
    pageable: true,
    height: 550,
    sortable: true,
    filterable: true,
    toolbar: ["create"],
    columns: [
        { field: "UnitPrice", title: "Unit Price"},
        { field: "UnitsInStock", title: "Units In Stock", width: "120px" },
        { field: "total()", title: "Total" }]
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-19T12:43:54.463

下面是一个在网格中使用它的示例。然后它还可以对列进行排序。

```
$("#grid").kendoGrid({ 
    dataSource: {
        data: [
            { first: "John", last: "Doe" }, 
            { first: "Jane", last: "Doe" }
        ],
        schema: {
          model: {
            // Calculated field
            fullName: function() {
              return this.first + " " + this.last;
            },
            fields: {
               first: { type: "string" },
               last: { type: "string" }
            }
          }
        }
    },
    columns: [
        {
            // Trigger function of the Calculated field
            field: "fullName()",
            title: "Fullname"
        },
        {
            field: "first",
            title: "firstname"
        }
    ]
}); 
```

# android - Android dalvik 垃圾回收可能会崩溃？

> ID：15069920
> 
> 赞同：6
> 
> 时间：2013-02-25T15:01:07.670
> 
> 标签：android, dalvik

我们正在为 Android jelly bean 开发一个项目。我们的平台是基于arm的，内核版本是3.1.10。在我们的开发过程中，我们发现dalvik发生应用崩溃的概率非常低。根据以下回溯日志，在垃圾收集功能期间出现了崩溃。使用addr2line分析pc地址后，发现问题发生时obj->clazz变成了违规地址。

**代码流程为：** (dvmHeapScanMarkedObjects -> processMarkStack-> scanObject->(IS_CLASS_FLAG_SET(obj->clazz,CLASS_ISARRAY)))

现在我们被困在这里，找不到解决方法。所以我们需要更多的建议和帮助。

有谁知道这个问题或如何继续检查它？

**回溯日志如下：**

```
F/libc    (  912): Fatal signal 11 (SIGSEGV) at 0x00000025 (code=1), thread 912 (zygote)
I/DEBUG   (  910): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***I/DEBUG   (  910): Revision: '32'
I/DEBUG   (  910): pid: 912, tid: 912, name: zygote  >>> zygote <<<
I/DEBUG   (  910): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000025
I/DEBUG   (  910):     r0 00000005  r1 41246df0  r2 44208890  r3 412471e8
I/DEBUG   (  910):     r4 40e3c1b8  r5 412569c0  r6 40e3c1b8  r7 41246df0
I/DEBUG   (  910):     r8 0000154c  r9 00000000  sl 000798e4  fp 7fffffff
I/DEBUG   (  910):     ip 51b2c044  sp bee580c0  lr 40dc5b88  pc 40dc598c  cpsr 80000010
I/DEBUG   (  910):     d0  6e69737275636567  d1  6f7268540000fa2e
I/DEBUG   (  910):     d2  573752085737512e  d3  573752785737522e
I/DEBUG   (  910):     d4  5737527857375240  d5  573841a0573752b0
I/DEBUG   (  910):     d6  00010000573841d8  d7  000000614ac3ff00
I/DEBUG   (  910):     d8  0000000000000000  d9  0000000000000000
I/DEBUG   (  910):     d10 0000000000000000  d11 0000000000000000
I/DEBUG   (  910):     d12 0000000000000000  d13 0000000000000000
I/DEBUG   (  910):     d14 0000000000000000  d15 0000000000000000
I/DEBUG   (  910):     d16 0000000000019a5c  d17 0000000000019a5c
I/DEBUG   (  910):     d18 0000000000000000  d19 3fe8000000000000
I/DEBUG   (  910):     d20 0000000000000000  d21 0000000000000000
I/DEBUG   (  910):     d22 0000000000000000  d23 0000000000000000
I/DEBUG   (  910):     d24 0000000000000000  d25 0000000000000000
I/DEBUG   (  910):     d26 0000000000000000  d27 0000000000000000
I/DEBUG   (  910):     d28 0000000000000000  d29 0000000000000000
I/DEBUG   (  910):     d30 0000000000000000  d31 0000000000000000
I/DEBUG   (  910):     scr 60000010
I/DEBUG   (  910):
I/DEBUG   (  910): backtrace:
I/DEBUG   (  910):     #00  pc 0003798c  /system/lib/libdvm.so
I/DEBUG   (  910):     #01  pc 00037b84  /system/lib/libdvm.so
I/DEBUG   (  910):     #02  pc 000298c0  /system/lib/libdvm.so (dvmCollectGarbageInternal(GcSpec const*)+196)
I/DEBUG   (  910):     #03  pc 0002a0bc  /system/lib/libdvm.so (dvmMalloc(unsigned int, int)+152)
I/DEBUG   (  910):     #04  pc 00054f57  /system/lib/libdvm.so (dvmAllocObject+6)
I/DEBUG   (  910):     #05  pc 0001ecb0  /system/lib/libdvm.so
I/DEBUG   (  910):     #06  pc 0002b754  /system/lib/libdvm.so (dvmInterpret(Thread*, Method const*, JValue*)+184)
I/DEBUG   (  910):     #07  pc 0005fe09  /system/lib/libdvm.so (dvmCallMethodV(Thread*, Method const*, Object*, bool, JValue*, std::__va_list)+272)
I/DEBUG   (  910):     #08  pc 0005fe33  /system/lib/libdvm.so (dvmCallMethod(Thread*, Method const*, Object*, JValue*, ...)+20)
I/DEBUG   (  910):     #09  pc 000539c9  /system/lib/libdvm.so (dvmPrepMainThread()+188)
I/DEBUG   (  910):     #10  pc 00047c65  /system/lib/libdvm.so (dvmStartup(int, char const* const*, bool, _JNIEnv*)+1108)
I/DEBUG   (  910):     #11  pc 0004dd8d  /system/lib/libdvm.so (JNI_CreateJavaVM+544)
I/DEBUG   (  910):     #12  pc 00047227  /system/lib/libandroid_runtime.so (android::AndroidRuntime::startVm(_JavaVM**, _JNIEnv**)+1626)
I/DEBUG   (  910):     #13  pc 000476bd  /system/lib/libandroid_runtime.so (android::AndroidRuntime::start(char const*, char const*)+176)
I/DEBUG   (  910):     #14  pc 00000db7  /system/bin/app_process
I/DEBUG   (  910):
I/DEBUG   (  910): stack:
I/DEBUG   (  910):          bee58080  00000000
I/DEBUG   (  910):          bee58084  40dc599c  /system/lib/libdvm.so
I/DEBUG   (  910):          bee58088  41247f38  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (  910):          bee5808c  000003f0
I/DEBUG   (  910):          bee58090  000000fd
I/DEBUG   (  910):          bee58094  00000000
I/DEBUG   (  910):          bee58098  41246ebc  [heap]
I/DEBUG   (  910):          bee5809c  40db7578  /system/lib/libdvm.so (dvmHeapBitmapScanWalk(HeapBitmap*, void (*)(Object*, void*, void*), void*)+128)
I/DEBUG   (  910):          bee580a0  40dc5b9c  /system/lib/libdvm.so
I/DEBUG   (  910):          bee580a4  41247f38  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (  910):          bee580a8  40e3c1b8  /system/lib/libdvm.so
I/DEBUG   (  910):          bee580ac  412569a0  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (  910):          bee580b0  40e3c1b8  /system/lib/libdvm.so
I/DEBUG   (  910):          bee580b4  41246df0  [heap]
I/DEBUG   (  910):          bee580b8  df0027ad
I/DEBUG   (  910):          bee580bc  00000000
I/DEBUG   (  910):     #00  bee580c0  51b2c048  /dev/ashmem/dalvik-mark-stack (deleted)
I/DEBUG   (  910):          bee580c4  41246df0  [heap]
I/DEBUG   (  910):          bee580c8  41246dd8  [heap]
I/DEBUG   (  910):          bee580cc  40e3c1b8  /system/lib/libdvm.so
I/DEBUG   (  910):          bee580d0  00000001
I/DEBUG   (  910):          bee580d4  40dc5b88  /system/lib/libdvm.so
I/DEBUG   (  910):     #01  bee580d8  40e34aa8  /system/lib/libdvm.so
I/DEBUG   (  910):          bee580dc  40db78c4  /system/lib/libdvm.so (dvmCollectGarbageInternal(GcSpec const*)+200)
I/DEBUG   (  910):     #02  bee580e0  bee58124  [stack]
I/DEBUG   (  910):          bee580e4  40df9095  /system/lib/libdvm.so
I/DEBUG   (  910):          bee580e8  5855879e  /data/dalvik-cache/system@framework@core.jar@classes.dex
I/DEBUG   (  910):          bee580ec  40087010
I/DEBUG   (  910):          bee580f0  5855879e  /data/dalvik-cache/system@framework@core.jar@classes.dex
I/DEBUG   (  910):          bee580f4  410be000  /dev/ashmem/dalvik-aux-structure (deleted)
I/DEBUG   (  910):          bee580f8  00000000
I/DEBUG   (  910):          bee580fc  00000000
I/DEBUG   (  910):          bee58100  000006db
I/DEBUG   (  910):          bee58104  410be000  /dev/ashmem/dalvik-aux-structure (deleted)
I/DEBUG   (  910):          bee58108  00000000
I/DEBUG   (  910):          bee5810c  410f55cc  /dev/ashmem/dalvik-aux-structure (deleted)
I/DEBUG   (  910):          bee58110  412569d8  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (  910):          bee58114  41248338  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (  910):          bee58118  41248338  /dev/ashmem/dalvik-heap (deleted)
I/DEBUG   (  910):          bee5811c  40e3c1b8  /system/lib/libdvm.so
I/DEBUG   (  910):          ........  ........ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:57:33.703

啊，我花了很长时间来为我分析类似问题的情况。希望我的分析对你有所帮助。

对于我的问题，问题是由于编译器对内存重新排序。在 dalvik 中，几个线程共享公共内存 ASHMEM 。此 ASHMEM 可能已损坏，因为编译器对内存重新排序以进行优化。为了避免在特定点进行内存重新排序，请执行内存屏障（AKA membar）。[检查此链接以执行 membar](https://stackoverflow.com/questions/8896092/is-there-a-compiler-memory-barrier-for-a-single-variable)

`ANDROID_MEMBAR_BARRIER()`只需在垃圾收集内存分配器（如 dalvik/vm/alloc/alloc.cpp）和 android 源代码的 dalvik 目录中的 class.cpp、array.cpp 和 proxy.cpp 中的对象分配和对象释放之前放置一个内存屏障。这应该可以解决问题。

有关内存屏障的更多信息，请查看以下链接

[记忆屏障](http://en.wikipedia.org/wiki/Memory_ordering)

[例子](http://preshing.com/20120625/memory-ordering-at-compile-time)

[内存屏障硬件视图](http://www.rdrop.com/users/paulmck/scalability/paper/whymb.2010.07.23a.pdf)白皮书

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:38:25.593

你的意思是把 ANDROID_MEMBAR_FULL() 放在所有 dvmMalloc 后面，就像下面的代码一样？垃圾收集流程中的内存释放功能在哪里？谢谢你

```
static bool createInitialClasses() {
    /*
     * Initialize the class Class. This has to be done specially, particularly
     * because it is an instance of itself.
     */
    ClassObject* clazz = (ClassObject*)
        dvmMalloc(classObjectSize(CLASS_SFIELD_SLOTS), ALLOC_NON_MOVING);
    ANDROID_MEMBAR_FULL(); 
```

# c# - 使用 XmlReader 处理 windows 换行符

> ID：15069921
> 
> 赞同：1
> 
> 时间：2013-02-25T15:01:12.330
> 
> 标签：c#, xml-serialization

最近，我用 XmlReader 替换了 XmlValidatingReader，并使用 XmlReaderSettings 用 xsd 验证 xml。

```
CustomData cd = null;
using (Stream xsdStream = new FileStream(m_DXsdFile, FileMode.Open, FileAccess.Read, FileShare.Read))
{
  XmlTextReader sr = new XmlTextReader(xsdStream);
  using (Stream xmlStream = new FileStream(m_DXmlFile, FileMode.Open, FileAccess.Read, FileShare.Read))
  {
    XmlReaderSettings settings = new XmlReaderSettings();
    settings.ValidationType = ValidationType.Schema;
    settings.Schemas.Add(null, sr);
    XmlReader reader = XmlReader.Create(xmlStream, settings);

    try
    {
      XmlSerializer xmlSerializer = CreateDefaultXmlSerializer(m_Type);
      cd = (CustomData)xmlSerializer.Deserialize(reader);
    }

  ...
}

XML:
<Column Name="Content">
  <Data xsi:type="xsd:string"> * info info info
info info info
 info info info</Data>
  <Data xsi:type="xsd:string">/* This is a test */</Data>
</Column>
<Column Name="ErrorNr">
  <Data xsi:type="xsd:int">2</Data>
  <Data xsi:type="xsd:int">2</Data>
  <Data xsi:type="xsd:int">2</Data>
</Column> 
```

*CreateDefaultXmlSerializer() 按照此处的建议实现：[https ://stackoverflow.com/a/9416860/2107510](https://stackoverflow.com/a/9416860/2107510)*

但是，XmlReader 规范化所有换行符并将 \r\n 转换为 \n。现在显示一行而不是多行的多行文本框不理解这一点。

我尝试使用 XmlWriterSettings.NewLineHandling.Entitize 并解决了我的问题，但这使得 XML 文档在例如写字板或任何其他文本编辑器中不再可读。（[http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.newlinehandling.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.newlinehandling.aspx)）

**如何保留多行字符串而不会由于标准化而丢失它们？**（并且没有其他讨厌的副作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:42:12.343

从[创建 Xml 阅读器](http://msdn.microsoft.com/en-us/library/9khb6435.aspx)（强调我的）：

> 如果您必须根据请求展开实体（由 Create 方法创建的阅读器展开所有实体），或者如果您**不希望您的文本内容标准化**，请使用`XmlTextReader`该类。

# rdf - 带有片段的 Jena RDF 资源 URI

> ID：15069922
> 
> 赞同：2
> 
> 时间：2013-02-25T15:01:17.473
> 
> 标签：rdf, jena

将 RDF-XML 读入 Jena 模型时遇到问题。我用

```
FileManager fileManager = FileManager.get();
Model model = fileManager.loadModel(url); 
```

资源 URI，例如

**[http://kulturarvsdata.se/resurser/aukt/geo/county#01](http://kulturarvsdata.se/resurser/aukt/geo/county#01)**

结果像

**[http://kulturarvsdata.se/resurser/aukt/geo/01](http://kulturarvsdata.se/resurser/aukt/geo/01)**

在 Jena 模型的资源中，即 URI 片段部分被剥离。

我试图向 Jena 提供基本 URI：

```
Model model = fileManager.loadModel(url, "http://kulturarvsdata.se/resurser/aukt/geo/county#", "RDF/XML"); 
```

但这没有什么区别。

我是否误解了某些东西，或者有没有办法说服 Jena 保留 URI 片段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:15:22.773

我认为您的问题是基本 URI 不像海龟和 SPARQL 中的前缀那样工作。

[http://kulturarvsdata.se/resurser/aukt/geo/county](http://kulturarvsdata.se/resurser/aukt/geo/county)开始：

```
<rdf:RDF xml:base="http://kulturarvsdata.se/resurser/aukt/geo/county#">
    ... 
```

然后你有一个资源：

```
 <County rdf:about="01">... 
```

该`rdf:about`URI 是相对于提供的 base 解析的`http://kulturarvsdata.se/resurser/aukt/geo/county#`。请注意，我说的是“已解决”而不是“连接”，这是前缀的作用。`01`相对于碱基解析给出`http://kulturarvsdata.se/resurser/aukt/geo/01`.

base 末尾的片段 ( `#`) 在实践中没有任何作用。您需要做的是将您的 abouts 替换为：

```
<County rdf:about="#01">... 
```

（本质上你不能使用文档库来使所有链接都成为内部链接。内部链接必须使用片段）

# command-line-interface - 在 accurev 仓库中搜索未使用的工作区

> ID：15069924
> 
> 赞同：0
> 
> 时间：2013-02-25T15:01:22.247
> 
> 标签：command-line-interface, accurev

无论如何使用 accurev CLI 可以搜索旧的未使用工作区？例如，我可以通过某种方式获取在 x 天内未访问的工作区列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:20:26.287

您能做的最好的事情就是创建一个脚本。

逻辑将是运行命令“accurev show -fx wspaces”。

从此输出中，您将看到一个“Trans”值。下面的示例输出。

反式="196431"

此值是基于上次成功更新工作区的工作区事务级别。

您可以运行命令“accurev hist -fx -p depotname -t TransNumber”

从输出中，您将看到一个“时间”值。下面的示例输出。

时间="1361564066"

这是每个工作区事务级别的时间值。

您将使用以下命令将其转换为可读格式：

perl -e“打印标量本地时间（1361564066）；”

示例输出。2013 年 2 月 22 日星期五 15:14:26

话虽如此，您可以将此时间与当前时间进行比较，以确定任何未使用的旧工作区。

# jquery - 设置所选元素样式的最简单方法

> ID：15069926
> 
> 赞同：0
> 
> 时间：2013-02-25T15:01:24.067
> 
> 标签：jquery, css

再会

我想知道是否可以像将鼠标悬停在**选定**的* *li * 元素上一样设置它的样式？*或者您是否必须使用 Javascript 为所选项目分配一个“活动”类并设置它的样式？

HTML

```
<div id="areas" class="span2">
    <ul>
        <li><a href="#pretoriaDetail">Pretoria</a>
        </li>
        <li><a href="#potchDetail">Potch</a>
        </li>
        <li><a href="#jhbDetail">JHB</a>
        </li>
    </ul>
</div>
<div class="span12">
    <div class="hidden" id="pretoriaDetail">Pretoria Content</div>
    <div class="hidden" id="potchDetail">Potch Content</div>
    <div class="hidden" id="jhbDetail">JHB Content</div>
</div> 
```

CSS：

```
#areas {
    margin: 0 auto;
    text-align: center;
    width: 100px;

}
#areas ul {
    list-style: none;
}
#areas ul li {
    width: 100%;
    height: 100%;
    background: #073640;
    border: 1px solid #aaa;
    margin: 10px 0px;
    padding: 20% 10%;
    /*to vertically center text inside the ul*/
    text-align: center;
}
#areas ul li:hover {
    background: #610052;
}
#areas ul li a {
    font-family:'Open Sans', 'Century Gothic', sans-serif;
    font-size: 28px;
    color: #fff;
    line-height: 100%;
    width: 100%;
    height: 100%;
}
#areasMap {
}
.hidden {
    display: none;
} 
```

看我的[小提琴](http://jsfiddle.net/6f4a8/5/)

如果您看一下我的小提琴，悬停类可以正常工作，但是我想在您实际选择它时保持元素为紫色-我可以使用纯 CSS 还是必须使用 JS？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:29:21.800

在 .css 中设置焦点锚的最简单方法？

```
a:focus {your styling} 
```

像[jsFiddle](http://jsfiddle.net/6f4a8/9/)：

```
#areas ul li a:focus {
    color: red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:08:48.400

是的，当您单击它时，您需要添加一个类（例如 .active）。它将在所有浏览器中被识别

[这是一个更新的小提琴](http://jsfiddle.net/6f4a8/8/)

JS

```
 $(function () {
     $("#areas ul a").click(function (event) {
         event.preventDefault();
         $("#areas ul li").removeClass('active'); //clears the active class for elements
         $(this).parent().addClass('active'); //adds the class to clicked li
         $(".hidden").hide(500);
         $($(this).attr("href")).show(500)
     });

 }); 
```

CSS

```
#areas ul li:hover,
#areas ul li.active {
    background: #610052;
} 
```

# macos - 查找具有特定名称的所有子文件夹，以便超级文件夹具有特定模式

> ID：15069927
> 
> 赞同：0
> 
> 时间：2013-02-25T15:01:28.963
> 
> 标签：macos, search, terminal

大家好，我有一个文件夹，其中包含许多不同名称的文件夹。但是我想找到所有`RUN`以`complete`. 我怎么能在终端做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:13:15.180

由于 Mac OS X 是基于 UNIX 的，您也可以使用 Linux 等上的许多终端程序。因此这个问题不一定与 OS X 相关。

使用`find`您可以获得包含`RUN`文件夹的所有文件`complete`夹：

```
find path_to_your_folder/Run*/complete -maxdepth 0 
```

这会给你一个类似的列表

```
path_to_your_folder/Run3221/complete
path_to_your_folder/Run3289/complete 
```

使用“sed”，您可以从中提取单个文件夹名称：

```
find test/Run*/complete -maxdepth 0 | sed 's/.*\(Run[0-9]*\).*/\1/' 
```

它为您提供了您正在寻找的列表：

```
Run3221
Run3289 
```

# django - Django：与 m2m 表的 m2o 关系

> ID：15069931
> 
> 赞同：-1
> 
> 时间：2013-02-25T15:01:42.387
> 
> 标签：django, django-models, many-to-many, many-to-one

我在 Stage 和 Pipeline 之间有默认的 m2m 关系（没有通过模型）。我有另一个模型（StageHistory），它需要与 m2m 关系阶段管道创建的表上保存的数据建立 m2o 关系。

那么我应该在“pipeline_stage”字段上写什么？

```
class Stage(models.Model):
    #other fields

class Pipeline(models.Model):
    stages = models.ManyToManyField('Stage')
    #other fields

class StageHistory(models.Model):
    pipeline_stage = models.ForeignKey(HERE) 
```

我应该创建一个“通过”模型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:18:36.123

您应该可以`Pipeline.stages.through`用来引用直通表。

如果没有，您可以使用[显式直通表](https://docs.djangoproject.com/en/1.4/ref/models/fields/#django.db.models.ManyToManyField.through)并将其用作 FK 目标。

# nsis - nsis 卸载程序不会删除链接

> ID：15069932
> 
> 赞同：9
> 
> 时间：2013-02-25T15:01:44.173
> 
> 标签：nsis, shortcut, uninstallation

我有这个问题：在安装程序部分我有这个；

```
Section "Start Menu Shortcuts"
    SetShellVarContext current
    CreateDirectory "$SMPROGRAMS\myProgram"
    CreateShortCut "$SMPROGRAMS\myProgram\myProgram.lnk" "$INSTDIR\myProgram.exe" 
    CreateShortCut "$SMPROGRAMS\myProgram\Uninstall myProgram.lnk" "$INSTDIR\myProgram-Uninstall.exe"
SectionEnd

Section "Desktop Shortcut"
    SetShellVarContext current
    CreateShortCut "$DESKTOP\myProgram.lnk" "$INSTDIR\myProgram.exe"
SectionEnd 
```

它工作正常，我有桌面上的图标和图标加上开始\程序...树上的卸载图标

卸载程序部分是这样的：

```
SetShellVarContext current
Delete "$DESKTOP\myProgram.lnk"
Delete "$SMPROGRAMS\myProgram\myProgram.lnk"
Delete "$SMPROGRAMS\myProgram\Uninstall myProgram.lnk"
RMDir "$SMPROGRAMS\myProgram" 
```

并且桌面链接被删除，但没有链接的其他文件夹..有什么想法吗？

存储的文件夹是这个*（我在win 7 64位）*：

```
C:\Users\Administrator\AppData\Roaming\Microsoft\Windows\Start Menu\Programs 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T15:23:12.420

你的脚本中有[RequestExecutionLevel吗？](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#requestexecutionlevel)如果没有它，Windows 可能会对您的快捷方式进行一些[兼容性修改。](http://nsis.sourceforge.net/Shortcuts_removal_fails_on_Windows_Vista)

如果这没有帮助，请尝试[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)，它可能能够阐明这个问题......

# python - sqlite 是否缓存查询结果以进行优化？

> ID：15069937
> 
> 赞同：1
> 
> 时间：2013-02-25T15:02:05.123
> 
> 标签：python, sqlite, ironpython

我在 sqlite 中注意到了这种行为。当我重新使用游标对象时，任务管理器中的工作集内存不断增加，直到我的程序抛出内存不足异常。

我重构了代码，这样每次查询时，我都会打开与 sqlite 文件的连接，查询我想要的内容，然后关闭连接。

后者不知何故似乎并不那么需要内存。它不会增加超过某个点。

我对我的 sqlite 数据库所做的只是针对一个表进行简单的选择（其中包含两个聚合）。

这是我们可以以某种方式控制的行为吗？我想重用我的游标对象，但不希望内存被吃掉......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:11:51.787

请参阅[SQLite：PRAGMA cache_size](http://www.sqlite.org/pragma.html#pragma_cache_size)

默认情况下，缓存大小相当大（~2MB），即每个连接。您可以使用 SQL 语句将其设置得更小：

```
PRAGMA cache_size=-KB 
```

使用负的 '-' KB 值将其设置为以千字节为单位的大小，否则设置要使用的页数。

此外，如果使用多个连接，您可能希望使用共享缓存来节省内存： [SQLITE: Shared Cache](http://www.sqlite.org/sharedcache.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-31T13:58:32.283

是的，Python 的 sqlite3 模块使用语句缓存。

[您可以在此处](https://docs.python.org/2/library/sqlite3.html#sqlite3.connect)阅读有关`cached_statements`参数的信息。

[有关此问题](https://github.com/ghaering/pysqlite/issues/126)的更多信息。

# python - 类初始化

> ID：15069942
> 
> 赞同：1
> 
> 时间：2013-02-25T15:02:20.313
> 
> 标签：python, pyqt

我只有一个关于初始化的小问题。在Python中，当我们进行Multiply继承时，调用子类的超级函数和分别调用它们有什么区别？

```
classA(B,C)

super(A,self).__init__()

#---and---#

B.__init__(self)
C.__init__(self) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:06:10.683

主要区别在于，如果类 B 和 C 有一个共同的祖先，那么通过`super()`调用，该祖先`__init__()`只会被调用一次。通过在您的示例中显式调用父母的`__init__()`方法，共同祖先的`__init__()`最终将被调用两次。

[您可以从Guido 的解释](http://python-history.blogspot.com/2010/06/method-resolution-order.html)中了解如何`super()`做到这一点。

下面是对父母的显式调用`__init__()`以及它如何两次调用共同祖先的演示：

```
>>> class A(object):
...   def __init__(self):
...     print "A"
... 
>>> class B(A):
...   def __init__(self):
...     A.__init__(self)
...     print "B"
... 
>>> class C(A):
...   def __init__(self):
...     A.__init__(self)
...     print "C"
... 
>>> class D(B,C):
...   def __init__(self):
...     B.__init__(self)
...     C.__init__(self)
...     print "D"
... 
>>> D()
A
B
A
C
D
<__main__.D object at 0x106de1d10>
>>> 
```

这就是发生的事情`super()`

```
>>> class A(object):
...   def __init__(self):
...     print "A"
... 
>>> class B(A):
...   def __init__(self):
...     super(B,self).__init__()
...     print "B"
... 
>>> class C(A):
...   def __init__(self):
...     super(C,self).__init__()
...     print "C"
... 
>>> class D(B,C):
...   def __init__(self):
...     super(D,self).__init__()
...     print "D"
... 
>>> D()
A
C
B
D
<__main__.D object at 0x10d34ec90>
>>> 
```

# search - 从 DataTables 搜索功能中排除数据库 ID

> ID：15069943
> 
> 赞同：0
> 
> 时间：2013-02-25T15:02:24.437
> 
> 标签：search, datatables

在[DataTables](http://www.datatables.net/)表中，一列包含具有以下格式内容的单元格：

```
<a href="/Controller/Edit/26">Searchable and visible name</a> 
```

只有标签之间的文本对用户可见，我希望只有这些文本才能暴露给 DataTables 的搜索功能。现在一切都是可搜索的，包括“href”、“a”、“<”、“26”等。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:12:37.380

这似乎是 DataTables 1.9.4 中的一个错误

[http://www.datatables.net/forums/discussion/14530/search-filtering-on-content#Item_2](http://www.datatables.net/forums/discussion/14530/search-filtering-on-content#Item_2)

# javascript - FadeToogle Jquery 不使用下一个选择器

> ID：15069945
> 
> 赞同：0
> 
> 时间：2013-02-25T15:02:25.463
> 
> 标签：javascript, jquery, ruby-on-rails, next

好吧，我在我的内容中隐藏了一个 div 并制作了一个按钮来显示它，但问题是我有很多元素都带有这个名称，所以我使用这个函数来解决：

```
$("a.all_com").click(function(){
    $(this).nextAll("div:first").slideToggle();
}); 
```

此功能不起作用，我尝试使用满足此功能：

```
$("a.all_com").click(function(){
    $(this).next("div").slideToggle();
}); 
```

和

```
$("a.all_com").click(function(){
    $(this).nextAll("div").slideToggle();
}); 
```

没有人对我工作请某人解决，这实际上是在元素中应用一些。

我要显示/隐藏的代码是这样的：

```
<div id="task_footer">
    <a href="#" id="comment_buttom" class="new_com">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Comentar</a>
    <a href="#" id="comment_buttom" class="all_com">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Comentários</a>
</div>

<div id="comment_list" style="display:none;" >
    <% tasks.comments.each do |c| %>
        <% if c.user %>
            <p class="one_comment">
            <strong><%= c.user.email %></strong>
            <%= c.comment %>
            </p>
        <% end %>
    <% end %>
</div> 
```

# .net - Cassandra - CLI 和 CQL 之间的区别

> ID：15069947
> 
> 赞同：4
> 
> 时间：2013-02-25T15:02:33.347
> 
> 标签：.net, nosql, cassandra, bigdata

我是 Cassandra 的新手，正在学习这些东西。我已经看到有几个 Cassandra 客户端 API，例如`Cassandra CLI`等。我需要知道和`CQL`之间到底有什么区别？哪个更好用？此外，有哪些客户端 API 可用于使用 .NET 查询 Cassandra？`CLI``CQL`

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:31:41.550

[CQL](http://www.datastax.com/docs/1.1/references/cql/index) - 一种类似 SQL（结构化查询语言）的语言，用于查询 Cassandra。使用 cql 的简单方法是试用`cqlsh`Cassandra 附带的工具。 [CLI](http://wiki.apache.org/cassandra/CassandraCli) - 可用于查询 Cassandra 的命令行应用程序。

有许多流行的高级 C# Cassandra 客户端 API，其中大多数都支持 CQL。

*   [Aquiles](http://aquiles.codeplex.com/) - 包括示例，但需要一些配置（在他们的[wiki](http://aquiles.codeplex.com/wikipage?title=Aquiles.Configuration&referringTitle=Home)中解释）
*   [Hector Sharp](https://github.com/mattvv/hectorsharp) - 缺乏文档，但感谢他们的测试，您可以弄清楚该怎么做，我发现[这个博客](http://www.sinbadsoft.com/blog/cassandra-meets-hectorsharp/)有一些有用的信息。
*   [Fluent Cassandra - 需要一些配置，但在](https://github.com/managedfusion/fluentcassandra)[他们的博客](http://coderjournal.com/2010/06/your-first-fluent-cassandra-application/)中对入门进行了很好的解释。

**注意**您可以始终使用 Thrift API，但我建议不要使用它，因为它是一种低级实现，并且需要大量代码才能完成任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:49:50.233

.NET 的另一个可能的高级客户端是 cassandra-sharp：[https ://github.com/pchalamet/cassandra-sharp](https://github.com/pchalamet/cassandra-sharp)

我实际上并没有使用过 cassandra-sharp。不过，我可以毫不费力地在 Fluent Cassandra 中闲逛（尽管有一些预先存在的 Cassandra 知识）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-30T06:00:24.733

在 .NET 中有一个用于访问 Cassandra 的新库：[https](https://github.com/reuzel/CqlSharp) ://github.com/reuzel/CqlSharp CqlSharp（如 CassandraSharp）实现了新的 Cassandra 二进制协议。CqlSharp API 非常类似于 ADO，并且从头开始实现异步。wiki 有关于如何使用它的示例。

# real-time - 如何在禁用导航器的情况下更新 highstock？

> ID：15069953
> 
> 赞同：2
> 
> 时间：2013-02-25T15:03:05.663
> 
> 标签：real-time, highstock

我对 highstock 有疑问：我用实时数据更新了我的图表。启用导航器时它可以完美运行。

=>[官方例子](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/dynamic-update/)

但是当我禁用导航器时，更新确实是错误的：

```
...
navigator: {
    enabled: false
},
... 
```

=>[错误示例](http://jsfiddle.net/a7AjD/)

有人知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:18:51.863

好的，我找到了解决方案：

```
// Add a point
self.graph.series[index].addPoint([time, parseFloat(values.last)], true, true);

// Update viewport min and max to follow updates
if ( ! self.get('showNavigator') ) {
    var extremes = self.graph.xAxis[0]; 
    self.graph.xAxis[0].setExtremes(extremes.dataMax-(extremes.oldMax-extremes.oldMin), extremes.dataMax) ; 
} 
```

# jquery - jQuery，仅当页面加载时间超过 2 秒时才显示加载页面 div

> ID：15069955
> 
> 赞同：5
> 
> 时间：2013-02-25T15:03:09.707
> 
> 标签：jquery, wait, loader

这是我的第一个问题，所以希望我能提供足够的细节。我在网站的 4 页中有以下代码：

```
$(document).ready(function() {
  $('#page_loading').slideDown(500);
});

jQuery(window).load(function () {
  setTimeout(function() {$('#page_loading').slideUp(500);}, 1500);
}); 
```

我想要实现的目标：在浏览完 4 个页面时，只有在页面加载时间超过 2 秒时才让#page_loading div 向下滑动。如果页面加载时间少于 2 秒（之前访问过并且大部分图像都被缓存），那么加载 div 将不会显示。

在这一点上，即使页面加载不到一秒钟，加载的 div 仍然会出现和消失，这很烦人。

谢谢你，克里斯蒂安。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:55:07.233

这会奏效吗？

```
var showTimeout = setTimeout(function() {
    $('#page_loading').slideDown(500);
}, 2000);

jQuery(window).load(function () {
    clearTimeout(showTimeout);
    $('#page_loading').slideUp(500);
}); 
```

# javascript - d3.js 散点图 - 缩放/拖动边界、缩放按钮、重置缩放、计算中位数

> ID：15069959
> 
> 赞同：7
> 
> 时间：2013-02-25T15:03:22.943
> 
> 标签：javascript, d3.js, zooming, drag, scatter-plot

我已经构建了一个具有缩放/平移功能的 d3.js 散点图。您可以在此处查看完整内容（单击“在新窗口中打开”查看完整内容）： [http ://bl.ocks.org/129f64bfa2b0d48d27c9](http://bl.ocks.org/129f64bfa2b0d48d27c9)

有几个我一直无法弄清楚的功能，如果有人能指出我正确的方向，我会很乐意帮助它：

1.  我想对该区域应用 X/Y 缩放/平移边界，这样您就不能将其拖到某个点以下（例如零）。
2.  我还尝试创建 Google Maps 风格的 +/- 缩放按钮，但没有任何成功。有任何想法吗？

更不重要的是，还有几个方面我已经找到了解决方案，但它非常粗糙，所以如果你有更好的解决方案，请告诉我：

1.  我添加了一个“重置缩放”按钮，但它只是删除图形并在其位置生成一个新图形，而不是实际缩放对象。理想情况下，它实际上应该重置缩放。
2.  我编写了自己的函数来计算 X 和 Y 数据的中位数。但是我确信必须有更好的方法来使用 d3.median 来做到这一点，但我不知道如何让它工作。

    ```
    var xMed = median(_.map(data,function(d){ return d.TotalEmployed2011;}));
    var yMed = median(_.map(data,function(d){ return d.MedianSalary2011;}));

    function median(values) {
        values.sort( function(a,b) {return a - b;} );
        var half = Math.floor(values.length/2);

        if(values.length % 2)
            return values[half];
        else
            return (parseFloat(values[half-1]) + parseFloat(values[half])) / 2.0;
    }; 
    ```

下面是一个非常简化（即旧）的 JS 版本。[您可以在https://gist.github.com/richardwestenra/129f64bfa2b0d48d27c9#file-main-js](https://gist.github.com/richardwestenra/129f64bfa2b0d48d27c9#file-main-js)找到完整的脚本

```
d3.csv("js/AllOccupations.csv", function(data) {

    var margin = {top: 30, right: 10, bottom: 50, left: 60},
        width = 960 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

    var xMax = d3.max(data, function(d) { return +d.TotalEmployed2011; }),
        xMin = 0,
        yMax = d3.max(data, function(d) { return +d.MedianSalary2011; }),
        yMin = 0;

    //Define scales
    var x = d3.scale.linear()
        .domain([xMin, xMax])
        .range([0, width]);

    var y = d3.scale.linear()
        .domain([yMin, yMax])
        .range([height, 0]);

    var colourScale = function(val){
        var colours = ['#9d3d38','#c5653a','#f9b743','#9bd6d7'];
        if (val > 30) {
            return colours[0];
        } else if (val > 10) {
            return colours[1];
        } else if (val > 0) {
            return colours[2];
        } else {
            return colours[3];
        }
    };

    //Define X axis
    var xAxis = d3.svg.axis()
        .scale(x)
        .orient("bottom")
        .tickSize(-height)
        .tickFormat(d3.format("s"));

    //Define Y axis
    var yAxis = d3.svg.axis()
        .scale(y)
        .orient("left")
        .ticks(5)
        .tickSize(-width)
        .tickFormat(d3.format("s"));

    var svg = d3.select("#chart").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
        .call(d3.behavior.zoom().x(x).y(y).scaleExtent([1, 8]).on("zoom", zoom));

    svg.append("rect")
        .attr("width", width)
        .attr("height", height);

    svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);

    svg.append("g")
        .attr("class", "y axis")
        .call(yAxis);

    // Create points
    svg.selectAll("polygon")
        .data(data)
        .enter()
        .append("polygon")
        .attr("transform", function(d, i) {
            return "translate("+x(d.TotalEmployed2011)+","+y(d.MedianSalary2011)+")";
        })
        .attr('points','4.569,2.637 0,5.276 -4.569,2.637 -4.569,-2.637 0,-5.276 4.569,-2.637')
        .attr("opacity","0.8")
        .attr("fill",function(d) {
            return colourScale(d.ProjectedGrowth2020);
        });

    // Create X Axis label
    svg.append("text")
        .attr("class", "x label")
        .attr("text-anchor", "end")
        .attr("x", width)
        .attr("y", height + margin.bottom - 10)
        .text("Total Employment in 2011");

    // Create Y Axis label
    svg.append("text")
        .attr("class", "y label")
        .attr("text-anchor", "end")
        .attr("y", -margin.left)
        .attr("x", 0)
        .attr("dy", ".75em")
        .attr("transform", "rotate(-90)")
        .text("Median Annual Salary in 2011 ($)");

    function zoom() {
      svg.select(".x.axis").call(xAxis);
      svg.select(".y.axis").call(yAxis);
      svg.selectAll("polygon")
            .attr("transform", function(d) {
                return "translate("+x(d.TotalEmployed2011)+","+y(d.MedianSalary2011)+")";
            });
    };
    }
}); 
```

任何帮助将不胜感激。谢谢！

编辑：这是我使用的修复的摘要，基于 Superboggly 的以下建议：

```
 // Zoom in/out buttons:
    d3.select('#zoomIn').on('click',function(){
        d3.event.preventDefault();
        if (zm.scale()< maxScale) {
            zm.translate([trans(0,-10),trans(1,-350)]);
            zm.scale(zm.scale()*2);
            zoom();
        }
    });
    d3.select('#zoomOut').on('click',function(){
        d3.event.preventDefault();
        if (zm.scale()> minScale) {
            zm.scale(zm.scale()*0.5);
            zm.translate([trans(0,10),trans(1,350)]);
            zoom();
        }
    });
    // Reset zoom button:
    d3.select('#zoomReset').on('click',function(){
        d3.event.preventDefault();
        zm.scale(1);
        zm.translate([0,0]);
        zoom();
    });

    function zoom() {

        // To restrict translation to 0 value
        if(y.domain()[0] < 0 && x.domain()[0] < 0) {
            zm.translate([0, height * (1 - zm.scale())]);
        } else if(y.domain()[0] < 0) {
            zm.translate([d3.event.translate[0], height * (1 - zm.scale())]);
        } else if(x.domain()[0] < 0) {
            zm.translate([0, d3.event.translate[1]]);
        }
        ...
    }; 
```

我使用的缩放平移是非常特殊的，基本上使用任意常数来或多或少地保持定位在正确的位置。这并不理想，我愿意接受有关更普遍合理的技术的建议。但是，在这种情况下它工作得很好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T20:24:13.393

从中值函数开始，只需要一个数组和一个可选的访问器。所以你可以像使用 max 一样使用它：

```
var med = d3.median(data, function(d) { return +d.TotalEmployed2011; }); 
```

至于其他人，如果您退出缩放行为，您可以更好地控制它。所以例如而不是

```
var svg = d3.select()...call(d3.behavior.zoom()...) 
```

尝试：

```
var zm = d3.behavior.zoom().x(x).y(y).scaleExtent([1, 8]).on("zoom", zoom);
var svg = d3.select()...call(zm); 
```

然后可以直接设置缩放级别和平移：

```
function zoomIn() {
   zm.scale(zm.scale()*2);
   // probably need to compute a new translation also
}

function reset() {
   zm.scale(1);
   zm.translate([0,0]);
} 
```

限制平移范围有点棘手。当您在缩放功能中不喜欢平移或缩放时，您可以简单地不更新（或将缩放的“平移”设置为您需要的）。类似的东西（我认为在你的情况下）：

```
function zoom() {
    if(y.domain()[0] < 0) {
        // To restrict translation to 0 value
        zm.translate([d3.event.translate[0], height * (1 - zm.scale())]);
    }
    ....
} 
```

请记住，如果您想放大以允许轴上出现负数，但不平移到您会发现您会遇到一些棘手的情况。

这可能过时了，但请查看[在 D3.js 中缩放或平移时限制域](https://stackoverflow.com/questions/10422738/limiting-domain-when-zooming-or-panning-in-d3-js)

另请注意，缩放行为确实具有在[某一点](https://github.com/mbostock/d3/pull/345)上限制平移和缩放的功能。但是代码在以后的[更新](https://github.com/mbostock/d3/commit/61d3d897cbfd0d7afa0490f432cfa68be37d3e33)中被删除了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-17T09:07:46.297

我不喜欢重新发明轮子。我正在寻找允许缩放的散点图。Highcharts 就是其中之一，但有 plotly，它基于 D3，不仅允许缩放，而且您还可以在散点图上使用线数据集，这是我希望在我的一些数据集上使用的数据集，而其他数据集很难找到绘图库。我会试一试：

[https://plot.ly/javascript/line-and-scatter/](https://plot.ly/javascript/line-and-scatter/)

[https://github.com/plotly/plotly.js](https://github.com/plotly/plotly.js)

使用这样好的库可以为您节省大量时间和痛苦。

# python - python中的导入语句列表

> ID：15069961
> 
> 赞同：1
> 
> 时间：2013-02-25T15:03:24.600
> 
> 标签：python, switch-statement, python-import

我想根据 python 中变量的值调用不同的导入。

通常我可以用 switch 语句来做到这一点，但可惜 python 没有......

我在考虑有一个函数列表，每个函数都包含不同的导入，但有更好的方法吗？是否可以以与方法类似的方式列出导入？或者将模块名称作为字符串存储在列表中，然后将它们转换为可用于导入它们的形式？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T15:05:33.833

如果你想以编程方式导入模块，你可以这样做

```
module = __import__('module_name') 
```

不过，发现自己似乎是一种奇怪的情况……检查你的设计并小心行事。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T15:09:33.587

通常，在 Python 中，您可以用`switch`字典替换结构。要使用存储在字符串中的名称导入模块，您可以使用`importlib.import_module()`. 这是一个例子：

```
from importlib import import_module

modlist = {'case 1': ('package1', 'module1'), 'case 2': ('package2', 'module2')}

myvar = 'case 2'

mypackage, mymodule = modlist[myvar]
import_module(mymodule, mypackage) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T15:07:01.660

你为什么不使用`if`？

```
if a is "import_module1":
    import module1
elif a is "import_module2":
    import module2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T15:21:27.767

我自己的代码示例[http://felicitous-desktop.googlecode.com/files/felicitous.py](http://felicitous-desktop.googlecode.com/files/felicitous.py)

该脚本设置桌面背景。根据桌面是 Windows 还是 Gnome，它会导入不同的库：

```
if ( platform.system() == "Windows" ):
    set_windows_background(dest)
else:
    set_gnome_background(dest) 
```

在哪里

```
def set_gnome_background(x):
    import gconf
    client = gconf.client_get_default()
    client.set_string ("/desktop/gnome/background/picture_filename",x)              

def set_windows_background(x):
  import ctypes
  SPI_SETDESKWALLPAPER = 20 # According to http://support.microsoft.com/default.aspx?scid=97142
  import tempfile
  from PIL import Image
  image = Image.open(x)

  bmppath= os.path.normpath(os.path.expanduser("~/epic.bmp"))
  image.save (bmppath, "BMP")
  print bmppath
  ctypes.windll.user32.SystemParametersInfoA(SPI_SETDESKWALLPAPER, 0, bmppath , 0) 
```

# php - php PDO使用占位符插入批处理多行

> ID：15069962
> 
> 赞同：23
> 
> 时间：2013-02-25T15:03:25.967
> 
> 标签：php, insert, pdo, bulkinsert

我希望使用 PHP PDO 进行多次插入。

我找到的最接近的答案是这个

**[如何将数组插入单个 mysql 准备语句](https://stackoverflow.com/questions/4629022/how-to-insert-an-array-into-a-single-mysql-prepared-statement-w-php-and-pdo)**

但是给出的示例使用？而不是真正的占位符。

我查看了 PHP 文档站点上的示例以获取占位符

**[php.net pdo.prepared-statements](http://php.net/manual/en/pdo.prepared-statements.php)**

```
$stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (:name, :value)");
$stmt->bindParam(':name', $name);
$stmt->bindParam(':value', $value); 
```

现在假设我想实现上述目标，但使用数组

```
$valuesToInsert = array(
  0 => array('name' => 'Robert', 'value' => 'some value'),
  1 => array('name' -> 'Louise', 'value' => 'another value')
); 
```

**我将如何处理 PDO 和每个事务的多个插入？**

我想它会从一个循环开始？

```
$stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (:name, :value)");

foreach($valuesToInsert as $insertRow){

    // now loop through each inner array to match binded values
    foreach($insertRow as $column => value){
        $stmt->bindParam(":{$column}", value);
    }
}
$stmt->execute(); 
```

然而，上述方法不起作用，但希望能证明我试图实现的目标

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-25T15:17:28.360

首先，`?`符号*是*真正的占位符（大多数驱动程序允许同时使用语法、位置和命名占位符）。其次，预准备语句只不过是一种将原始输入注入 SQL 语句的工具——SQL 语句本身的语法不受影响。您已经拥有所需的所有元素：

*   如何使用单个查询插入多行
*   如何动态生成 SQL
*   如何使用带有命名占位符的准备好的语句。

将它们全部结合起来相当简单：

```
$sql = 'INSERT INTO table (memberID, programID) VALUES ';
$insertQuery = [];
$insertData = [];
$n = 0;
foreach ($data as $row) {
    $insertQuery[] = '(:memberID' . $n . ', :programID' . $n . ')';
    $insertData['memberID' . $n] = $memberid;
    $insertData['programID' . $n] = $row;
    $n++;
}

if (!empty($insertQuery)) {
    $sql .= implode(', ', $insertQuery);
    $stmt = $db->prepare($sql);
    $stmt->execute($insertData);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-25T15:26:52.827

我假设您使用的是 InnoDB，因此此答案仅对该引擎有效（或任何其他支持事务的引擎，这意味着不包括 MyISAM）。

默认情况下 InnoDB 在自动提交模式下运行。这意味着每个查询都被视为自己包含的事务。

要将其翻译成我们凡人可以理解的东西，这意味着您发出的每个 INSERT 查询都会通过确认它写下查询信息来强制硬盘提交它。考虑到机械硬盘的速度非常慢，因为它们每秒的输入输出操作很低（如果我没记错的话，平均为 300 次 IO），这意味着您的 50 000 个查询将非常慢。

所以你会怎么做？您在单个事务中提交所有 50k 查询。它可能不是用于各种目的的最佳解决方案，但它会很快。

你这样做：

```
$dbh->beginTransaction();

$stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (:name, :value)");

foreach($valuesToInsert as $insertRow)
{    
    // now loop through each inner array to match bound values
    foreach($insertRow as $column => value)
    {
        $stmt->bindParam(":$column", value);
        $stmt->execute();
    }
}

$dbh->commit(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-01T15:44:00.620

NB
$stmt->execute() 提供的解决方案中的一些修改应该在内部循环之外，因为您可能有一个或多个列需要在调用 $stmt->execute() 之前绑定，否则您将得到异常“无效参数号：绑定变量的数量与令牌的数量不匹配”。
第二个“价值”变量缺少美元符号。

```
function batchinsert($sql,$params){
    try { 
                db->beginTransaction(); 

                $stmt = db->prepare($sql);

                foreach($params as $row)
                {    
                    // now loop through each inner array to match bound values
                    foreach($row as $column => $value)
                    {                           
                        $stmt->bindParam(":$column", $value);                           
                    }
                    $stmt->execute();
                }                                       
                db->commit();                   

        } catch(PDOExecption $e) {
            $db->rollback();                
        }
} 
```

测试：

```
$sql = "INSERT INTO `test`(`name`, `value`) VALUES (:name, :value)" ;

$data = array();    

array_push($data, array('name'=>'Name1','value'=>'Value1')); 

array_push($data, array('name'=>'Name2','value'=>'Value2')); 

array_push($data, array('name'=>'Name3','value'=>'Value3')); 

array_push($data, array('name'=>'Name4','value'=>'Value4')); 

array_push($data, array('name'=>'Name5','value'=>'Value5')); 

batchinsert($sql,$data); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-03-24T13:36:08.793

您的代码实际上没问题，但`$stmt->bindParam(":$column", value);`它应该是有问题的，`$stmt->bindValue(":{$column}", $value);`它会完美运行。这将在未来帮助其他人。

完整代码：

```
foreach($params as $row)
{ 
    // now loop through each inner array to match bound values
    foreach($row as $column => $value)
    { 
        $stmt->bindValue(":{$column}", $value); //EDIT
    }
    // Execute statement to add to transaction
    $stmt->execute();
} 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-02-25T15:17:23.337

将执行移动到循环内部。

```
$stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (:name, :value)");
foreach($valuesToInsert as $insertRow)
{
    $stmt->execute($insertRow);    
} 
```

**如果您在使用这种推荐的方式时遇到任何问题，您必须提出一个问题，描述这些特定问题。**

# r - 使用 ggmap 和 ggplot2 获取带有点的地图

> ID：15069963
> 
> 赞同：19
> 
> 时间：2013-02-25T15:03:29.747
> 
> 标签：r, ggplot2, ggmap

我想要一张带有点（和其他 geom_* 图层）的地图。我得到了地图，但我得到的不是点，而是一个警告：

```
Message d'avis :
Removed 3 rows containing missing values (geom_point). 
```

这是一个可重现的示例：

```
library(ggmap)
library(ggplot2)

d <- data.frame(lat=c(50.659631, 50.607213, 50.608129),
                lon=c(3.09319, 3.011473, 3.031529))

Lille <- get_map("Lille,France", zoom=12)

p <- ggmap(Lille)
p <- p + geom_point(data=d, aes(lat, lon))
p 
```

查看的输出

```
ggplot_build(p) 
```

我看到 x 和 y 的 NA 层，但我不明白为什么不考虑来自 d 的数据。

当使用 ggplot() 而不是 ggmap() 时，我确实得到了分数。但我也需要地图:)

那么，我怎样才能得到一张上面**有点的****地图**呢？

 **谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-25T15:07:47.767

看来您只是颠倒了经度和纬度：

```
p <- ggmap(Lille)
p + geom_point(data=d, aes(x=lon, y=lat), color="red", size=30, alpha=0.5) 
```

![在此处输入图像描述](../Images/574f0ceacdfa4b580e723637623551e1.png)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-25T15:07:28.010

您的经度和纬度值的`geom_point()`顺序错误。`lon`应该作为价值观`x`和价值观。`lat``y`

```
 p + geom_point(data=d, aes(x=lon, y=lat),size=5) 
```**

# android - 适用于 Android 的 Facebook LoginButton 不采用从 XML 传递的 login_text 和 logout_text 值

> ID：15069969
> 
> 赞同：13
> 
> 时间：2013-02-25T15:03:53.707
> 
> 标签：android, android-layout, facebook-android-sdk

适用于 Android 的 Facebook Sdk 不采用从 XML 传递的 login_text 和 logout_text 值。它只是忽略它。地球上没有使用此按钮自定义的文档/示例。

```
<com.facebook.widget.LoginButton
    xmlns:fb="http://schemas.android.com/apk/res-auto"
    android:id="@+id/connectWithFbButton"
    style="@style/com_facebook_loginview_default_style"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:layout_gravity="center_horizontal"
    android:text="@string/connect_with_facebook"
    fb:login_text="@string/connect_with_facebook"
    fb:logout_text="Connecting with facebook" /> 
```

它总是说登录或注销。我怎样才能使用这个属性？我尝试通过 LoginButton 代码进行调试，但徒劳无功。它从不通过 LoginButton() 的任何构造函数，因此无法解析我的自定义参数。

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-03-04T07:51:32.223

解决了！！

将名称为“com_facebook_loginview_log_in_button”的字符串添加到位于 res>values>strings.xml 中的 strings.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string name="com_facebook_loginview_log_in_button">Connect</string>
<string name="com_facebook_loginview_log_out_button">Your Logout</string>
</resources> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T19:03:50.623

您的第一个解决方案是正确的。它没有用，因为您已经定义了样式属性：

```
style="@style/com_facebook_loginview_default_style" 
```

从 LoginButton 源代码：

```
public LoginButton(Context context, AttributeSet attrs) {
    super(context, attrs);

    if (attrs.getStyleAttribute() == 0) {
        do stuff ...
    }
} 
```

因此，如果您未定义“style”属性，它只会查看已定义的属性“login_text”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-24T09:44:59.590

加布里埃尔在现场。要解决此问题，请转到 Facebook SDK 中的 LoginButton.java 并移动 parseAttributes 调用

```
parseAttributes(attrs) 
```

到底部，以便它始终运行。

整个方法将如下所示：

```
public LoginButton(Context context, AttributeSet attrs) {
    super(context, attrs);

    if (attrs.getStyleAttribute() == 0) {
            // apparently there's no method of setting a default style in xml,
            // so in case the users do not explicitly specify a style, we need
            // to use sensible defaults.
            this.setTextColor(getResources().getColor(R.color.com_facebook_loginview_text_color));
            this.setTextSize(TypedValue.COMPLEX_UNIT_PX,
                    getResources().getDimension(R.dimen.com_facebook_loginview_text_size));
            this.setPadding(getResources().getDimensionPixelSize(R.dimen.com_facebook_loginview_padding_left),
                    getResources().getDimensionPixelSize(R.dimen.com_facebook_loginview_padding_top),
                    getResources().getDimensionPixelSize(R.dimen.com_facebook_loginview_padding_right),
                    getResources().getDimensionPixelSize(R.dimen.com_facebook_loginview_padding_bottom));
            this.setWidth(getResources().getDimensionPixelSize(R.dimen.com_facebook_loginview_width));
            this.setHeight(getResources().getDimensionPixelSize(R.dimen.com_facebook_loginview_height));
            this.setGravity(Gravity.CENTER);

        if(isInEditMode()) {
            // cannot use a drawable in edit mode, so setting the background color instead
            // of a background resource.
            this.setBackgroundColor(getResources().getColor(R.color.com_facebook_blue));
            // hardcoding in edit mode as getResources().getString() doesn't seem to work in IntelliJ
            loginText = "Log in";
        } else {
            this.setBackgroundResource(R.drawable.com_facebook_loginbutton_blue);
            initializeActiveSessionWithCachedToken(context);
        }
    } 
    parseAttributes(attrs);
} 
```

style 和 login_text 现在都在考虑之中。对我来说很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T21:46:32.727

我最终只需要更改 FacebookSDK 源代码中的文本。

登录字符串`com_facebook_loginview_log_in_button`位于`FacebookSDK/res/values/strings.xml`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-03T17:28:39.223

作为快捷方式，您可以直接在 FB SDK 4.0 中的 com.facebook.login.widget.LoginButton class->setButtonText() 方法中更改登录按钮文本

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-03T11:58:33.720

我尝试了许多这些解决方案，但没有任何效果，最后我以：

```
Locale loc = Locale.FRENCH;
loginButton = (LoginButton)findViewById(R.id.fb_login_button);
loginButton.setTextLocale(loc); 
```

这会将文本更改为您设置的语言环境以及确认对话框，至少是我需要的。

希望这可以帮助。

# php - 从行创建多维数组

> ID：15069971
> 
> 赞同：0
> 
> 时间：2013-02-25T15:04:01.300
> 
> 标签：php, arrays

我的数据库中的查询结果返回如下内容（每行的记录）：

```
1.
1.1.
1.1.01.
1.1.01.001
1.2.
1.2.01.
1.2.02. 
```

我正在尝试创建以树格式返回多维数组的东西，如下所示：

```
array(
    '1.' => array(
        '1.1' => array(
            '1.1.01.' => array(
                (int) 0 => '1.1.01.001'
            )
        ),
        '1.2' => array(
            (int) 0 => '1.2.01.',
            (int) 1 => '1.2.02.'
        )
    )
) 
```

我能想到的就是使用`explode()`.

我很感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:04:32.633

您的格式非常棘手，因为：

```
1.2.
1.2.01\.     |
1.2.02\.     V  Making this array instead of value 
```

你可以试试

```
$string = "1.
1.1.
1.1.01.
1.1.01.001
1.2.
1.2.01.
1.2.02.";

$array = explode("\n", $string);
$data = array();
$temp = &$data;

$it = new CachingIterator(new ArrayIterator($array), CachingIterator::FULL_CACHE);
$continue = false;
foreach ( $it as $v ) {
    $v = trim($v);
    if ($it->hasNext()) {
        $next = trim($it->getInnerIterator()->current());
        if (stripos($next, $v) === 0) {
            $temp = &$temp[$v];
        } else {
            $temp[] = $v;
            if (strlen($next) != strlen($v)) {
                $temp = &$data;
            }
        }
    } else {
        $temp[] = $v;
    }
}
print_r($data); 
```

输出

```
Array
(
    [1.] => Array
        (
            [1.1.] => Array
                (
                    [1.1.01.] => Array
                        (
                            [0] => 1.1.01.001
                        )

                )

        )

    [1.2.] => Array
        (
            [0] => 1.2.01.
            [1] => 1.2.02.
        )

) 
```

[这是一个移动 COMPLEX 演示](http://eval.in/11165)

# jquery - 通过jquery从外部文件调用json不起作用

> ID：15069973
> 
> 赞同：0
> 
> 时间：2013-02-25T15:04:04.223
> 
> 标签：jquery, json, callback, cross-browser, jsonp

我在一个名为 kw.json 的外部文件中有这个 json 数据：

```
{
"categories" : [{
"producer" : "Apple",
        "items" : [
        {"name": "iPhone 4G"},
        {"name": "iPhone 4GS"},
        {"name": "iPhone 5"}
    ]
},{
"producer" : "Samsung",
        "items" : [
        {"name": "Galaxy S3"},
        {"name": "Galaxy S2"}
    ]
 },{
"producer" : "Nokia",
    "items" : [
        {"name": "Lumia"},
        {"name": "3210"},
        {"name": "3310"}
    ]
}] 
```

}

我让这个脚本加载文件并处理数据：

```
 var menulist;
 $.getJSON(rootDomain + "kunden/*kwmobile*/js/kw.json", function(json) {
menulist = json;

var i,c = '<div class="fn_menu_title pointer"><span>bitte Hersteller auswählen</span></div><ul class="fn_menu">', opt = $('<li/>');

var menu = menulist.categories;

for (i=0; i < menu.length; i++){
    c += '<li><span class="noar" id="'+[i]+'">' + menu[i].producer + '</span></li>';
}

$('#cat').html(c+'</ul>');
$(".noar").live('click',function(){
    var indx = $(this).attr("id");
    if (indx < 0) {
        $('#items').css('display','none');
        return;
    }
    var item = '<div class="fn_menu_title pointer"><span>bitte Modell auswählen</span></div><ul class="fn_menu">';
    for (i=0; i < menu[indx].items.length; i++){
        item += '<li><span class="pointer search_link" searchkey="'+ menu[indx].producer +' '+ menu[indx].items[i].name +'">' + menu[indx].items[i].name + '</span></li>';
    }

    $('#items').html(item+'</ul>').fadeIn();
    $("#items").menuFlip();
});
 }); 
```

问题是，控制台显示是跨浏览器错误，但我无法在同一来源上传 .json。

我知道 jsonp 可以解决这个问题，但我从未使用过，所以我希望你能帮助我。

（对不起bda英语，我来自德国）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:52:50.590

由于您也可以访问远程服务器，因此您可以按照您的指示进行 JSONP 调用。`kw.json`您可以使用函数调用包装数据，而不是将原始数据存储在 中：

```
jsonpCallback({ "categories": ... }); 
```

这样，当资源被加载时——</p>

```
<script type="text/javascript" src="remote-location/kw.json"></script> 
```

– 它将调用`jsonpCallback`您网站上命名的函数，传递数据。因此，您所要做的就是创建一个函数来处理数据并加载资源。为了加载资源，[`$.ajax`](http://api.jquery.com/jQuery.ajax/)（因此`getJSON`）内置了 JSONP 支持。

严格来说，您的文件是构造 javascript 对象并将其传递给函数的脚本，而不再是纯 JSON 数据文件，因此如果可以选择调用它可能会更整洁`kw.js`。当然，文件名可以是任意的，mime 类型才是最重要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:52:11.280

我是这样做的。

封装在函数中的 json 文件：

```
jsonp123({
"categories" : [{
"producer" : "Apple",
        "items" : [
        {"name": "iPhone 4G"},
        {"name": "iPhone 4GS"},
        {"name": "iPhone 5"}
    ]
},{
"producer" : "Samsung",
        "items" : [
        {"name": "Galaxy S3"},
        {"name": "Galaxy S2"}
    ]
 },{
"producer" : "Nokia",
    "items" : [
        {"name": "Lumia"},
        {"name": "3210"},
        {"name": "3310"}
    ]
}]
}); 
```

在我的 js 文件中，我调用 jsonp123 来获取里面的所有内容：

```
$.ajax({
url: rootDomain + "kunden/*kwmobile*/js/kw.json?callback=json123",
dataType: 'jsonp',
jsonpCallback: "jsonp123",
error: function(xhr, status, error) {
    alert(error);
},
success: function(categories) { 
    jsonp123(categories);
}
});

function jsonp123(response){

var i,c = '<div class="fn_menu_title pointer"><span>bitte Hersteller auswählen</span></div><ul class="fn_menu">', opt = $('<li/>');

var menu = response.categories;

for (i=0; i < menu.length; i++){
    c += '<li><span class="noar" id="'+[i]+'">' + menu[i].producer + '</span></li>';
}

$('#cat').html(c+'</ul>');
$(".noar").live('click',function(){
    var indx = $(this).attr("id");
    if (indx < 0) {
        $('#items').css('display','none');
        return;
    }
    var item = '<div class="fn_menu_title pointer"><span>bitte Modell auswählen</span></div><ul class="fn_menu">';
    for (i=0; i < menu[indx].items.length; i++){
        item += '<li><span class="pointer search_link" searchkey="'+ menu[indx].items[i].name +'">' + menu[indx].items[i].name + '</span></li>';
    }

    $('#items').html(item+'</ul>').fadeIn();
    $("#items").menuFlip();
});
} 
```

这工作得很好，没有错误。

谢谢你的提示！

# html - 无论浏览器或设备如何，如何在屏幕底部修复页脚？

> ID：15069983
> 
> 赞同：7
> 
> 时间：2013-02-25T15:04:30.760
> 
> 标签：html, css

我知道粘性页脚。但我的情况是我正在开发一个将在 PC 和移动设备上使用的网站。因此，显示的页脚会根据屏幕宽度进行调整。

并且页脚的高度在每个分辨率上都会发生变化。

谁能知道我如何在页面底部（不是屏幕）显示页脚。某些页面的高度很小，页脚显示在页面之间。

我有以下结构：

```
<body style="height:100%;">
 <div style="height:100%;">
  <div id="wrapper" style="height:100%; max-width:800px;">
   <div id="header">
    some content
   </div>
   <div id="content">
    some content
   </div>
   <div id="footer" style="position:relative; width:100%;">
    some content
   </div>
  </div>
 </div>
</body> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-25T15:08:07.140

这可能会澄清一些事情：

[http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)

```
html,
body {
   margin:0;
   padding:0;
   height:100%;
}
#container {
   min-height:100%;
   position:relative;
}
#header {
   background:#ff0;
   padding:10px;
}
#body {
   padding:10px;
   padding-bottom:60px;   /* Height of the footer */
}
#footer {
   position:absolute;
   bottom:0;
   width:100%;
   height:60px;   /* Height of the footer */
   background:#6cf;
}
```

```
<div id="container">
   <div id="header"></div>
   <div id="body"></div>
   <div id="footer"></div>
</div>
```

# r - 根据R中的其他数据框替换数据框中的值

> ID：15069984
> 
> 赞同：16
> 
> 时间：2013-02-25T15:04:35.497
> 
> 标签：r, dataframe

在下面的示例中，`userids`是我的参考数据框，并且`userdata`是应该进行替换的数据框。

```
> userids <- data.frame(USER=c('Ann','Jim','Lee','Bob'),ID=c(1,2,3,4))
> userids
  USER ID
1  Ann  1
2  Jim  2
3  Lee  3
4  Bob  4

> userdata <- data.frame(INFO=c('foo','bar','foo','bar'), ID=c('Bob','Jim','Ann','Lee'),AGE=c('43','33','53','26'), FRIENDID=c('Ann',NA,'Lee','Jim'))
> userdata
  INFO  ID AGE FRIENDID
1  foo Bob  43      Ann
2  bar Jim  33       NA
3  foo Ann  53      Lee
4  bar Lee  26      Jim 
```

如何将 ID 和 FRIENDID 替换`userdata`为 USER in 对应的 ID `userids`？

所需的输出：

```
 INFO  ID AGE FRIENDID
1  foo   4  43        1
2  bar   2  33       NA
3  foo   1  53        3
4  bar   3  26        2 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-25T15:08:46.260

使用`match`：

```
userdata$ID <- userids$ID[match(userdata$ID, userids$USER)]
userdata$FRIENDID <- userids$ID[match(userdata$FRIENDID, userids$USER)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T07:41:06.060

这是一种可能：

```
library(qdap)
userdata$FRIENDID <- lookup(userdata$FRIENDID, userids)
userdata$ID <- lookup(userdata$ID, userids) 
```

或赢得单线奖：

```
userdata[, c(2, 4)] <- lapply(userdata[, c(2, 4)], lookup, key.match=userids) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:45:37.833

这里尝试使用`sqldf`将结果作为不同列上的多重连接来获取。

```
 library(sqldf)
  sqldf('SELECT d.INFO,d.AGE,i1.ID ,i2.ID FRIENDID
       FROM 
       userdata d
       INNER JOIN 
       userids i1 ON (i1.USER=d.FRIENDID)
       INNER JOIN
        userids i2 ON (i2.USER=d.ID)')

 INFO AGE ID FRIENDID
1  foo  43  1        4
2  foo  53  3        1
3  bar  26  2        3 
```

但这删除了 ​​NA 行！也许有人可以建议我如何处理 NA！

**编辑**

感谢 G. Grothendieck 的评论，用 LEFT 替换了 INNER，我们得到了结果。

```
 sqldf('SELECT d.INFO,d.AGE,i1.ID ,i2.ID FRIENDID
        FROM 
        userdata d
        LEFT JOIN 
        userids i1 ON (i1.USER=d.FRIENDID)
        LEFT JOIN
         userids i2 ON (i2.USER=d.ID)')
INFO AGE ID FRIENDID
1  foo  43  1        4
2  bar  33 NA        2
3  foo  53  3        1
4  bar  26  2        3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-17T18:02:40.330

这是一个可能的解决方案，它也适用于每个 ID 的多个记录的数据集，尽管我们需要先强制 ID 和 FRIENDID 变量为字符：

```
> userdata$ID <- sapply(userdata$ID, function(x){gsub(x, userids[userids$USER==x, 2], x)})
> userdata$FRIENDID <- sapply(userdata$FRIENDID, function(x){gsub(x, userids[userids$USER==x, 2], x)}) 
```

# asp.net-mvc - MVC 和实体框架键

> ID：15069988
> 
> 赞同：3
> 
> 时间：2013-02-25T15:04:46.433
> 
> 标签：asp.net-mvc, linq, entity-framework

我是 MVC 和 EF 的新手，并且有一段时间让 EF 查询工作，特别是使用 EF key=""。添加一些测试代码后，这里返回的错误是 'The name idAddress does not exist in the current context'。Address 表上有一个名为 idAddress - identty int 的主键

我已经阅读了该网站上的许多建议，但无法超越这一点。

```
 private motion_care_360Entities db = new motion_care_360Entities();
    public ActionResult GetItems(GridParams g)
    {
        var list = db.Addresses.Include("AddressCountry").Include("AddressState").Include("AddressType").AsQueryable();
        var list1 = list.OrderBy(o => idAddress).ToList();
        var l1 = list1[0].AddressState.State;

        return Json(new GridModelBuilder<Address>(list, g)
            {
                Key = "idAddress", // needed when using Entity Framework, usually it's Id
                                   // If you're using EF, it's needed so that the data will be ordered by it before paging it
                Map = o => new
                {
                    AddressTypeType = o.AddressType.Type,
                    AddressStateState = o.AddressState.State,
                    AddressCountryCountry = o.AddressCountry.Country,
                    o.City,
                }
            }.Build());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T03:34:14.777

你实际上对很多事情感到困惑。首先，您声称的问题与 MVC 或 EF 无关。它与 GridModelBuilder 是什么有关，并且由于它不是 MVC 的一部分，因此您必须为此使用一些第三方控件。

其次，我猜测（因为我不知道您正在使用什么第三方控件）在使用 GroupBy 时使用 Key，而不是在使用 OrderBy 时。OrderBy 没有密钥，但 GroupBy 有。但很难知道，因为您似乎认为第三方工具是框架的一部分。

第三，您的 OrderBy 被分配给您从不使用的 list1。您使用列表，它是无序的。

第四，您不需要 AsQueryable，因为它已经是 Queryable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:11:44.730

那将需要是`list.OrderBy(o => o.idAddress).ToList();`

`o`您需要通过对象（即来自您的 lambda 表达式）本身的 idAddress 来指定它。

# performance - 过滤列表并使用 linq 获得相反的列表

> ID：15069990
> 
> 赞同：0
> 
> 时间：2013-02-25T15:04:48.923
> 
> 标签：performance, linq, list

我有一个关于 LINQ 列表的简单问题。我搜索了它，但没有找到类似的东西。我不知道其中哪一个更好（例如在性能方面）。

```
list1 = list.Where(x => x.property).ToList(); 
```

现在我想要相反的清单

```
list2 = list.Where(x=> !x.property).ToList(); 
```

我用过这个，但我不确定。

```
list2 = list.Except(list1).ToList(); 
```

我还考虑过建立一个小组并同时获得两个列表。这是一个包含两个列表的列表。迭代第一个列表很重。

你怎么看待这件事？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:13:05.243

老实说，我会选择：

```
var listEqual = new List<YourType>();
var listNotEqual = new List<YourType>();

foreach(YourType item in list)
    if (item.Property)
        listEqual.Add(item)
    else
        listNotEqual.Add(item); 
```

你*可以*使用

```
var lookup = list.ToLookup(x => x.Property);
var list1 = lookup[true].ToList();
var list2 = lookup[false].ToList(); 
```

（甚至删除`ToList`如果您不严格需要列表） - 这只会迭代您的序列一次，尽管您需要更多代码来处理输入中的所有内容都是`true`or的情况`false`。

# oop - 在 OOP 中从文本文件读取应该是一个独立的类方法？

> ID：15069993
> 
> 赞同：0
> 
> 时间：2013-02-25T15:04:59.917
> 
> 标签：oop, design-patterns

我有一个只有 main 的类，它读取一些 txt 并执行算法。

我的课看起来像：

```
class doThejob{
     public static void main(String args[]){
            //*****start part A******
           //do the reading from text file, and tokenize it
           // process into the form I need,
           //about 10-30 lines of codes
           //******End of part A*****

           //then run the algorithms
           algorithm alg=new aglorithm();
           Object output = alg.x(input);

           //****Part B**** output to txt, about 10~40 lines

     }
}

class algorithm{
      private void  a(Object x){
             //do something
           return (Object)result;
      }

} 
```

谁能告诉我是否应该将这些 A 部分和 B 部分提取到一个新类中，然后将它们设置为公共方法。如下所示

```
class Io{
    public Object readFromTxt(String path){
    }
    public void outputToTxt(String path){
    }

} 
```

如果我设置它们，然后像​​下面这样使用它，那是不是更多的 OOP？

```
class doThejob{
     public static void main(String args[]){
           Io dataProcess= new Io();

           Object input = dataProcess.readFromTxt(args[0]);
           algorithm alg=new aglorithm();
           Object output =alg.x(input);

           dataProcess.readFromTxt(args[1],output);

     }
}

class algorithm{
      private Object  a(Object x){
             //do something
      }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:28:21.707

按照您填写的方式进行操作更具可读性。

根据单一职责原则将其分离到另一个类中。这将有助于使代码更具可读性并且以后易于更改。

如果您想对此进行更多扩展，您可以为输入和输出创建一个接口（例如：IIO）。这样就可以在IO类中实现这个接口，重命名为FileIO。任何时候你想创建另一种形式的 IO，比如数据库访问，你只需要创建一个实现这个接口的 DatabaseIO 类，并在这个新类型的 main 方法中更改实例：

```
public interface IIO
{
    string Read();
    void Write(string text);
}

public class FileIO : IIO
{
     string path;

     public FileIO(string filePath)
     {
         path = filePath;
     }

     public string Read()
     {
         // read from file and return contents
     }

     public void Write(string text)
     {
         // write to file
     }
}

public class SqlServerIO : IIO
{
    SqlConnection conn;

    public SqlServerIO(string connectionStringName)
    {
        // create the connection
    }

    public string Read()
    {
        // read from database
    }

    public void Write(string text)
    {
        // write to database
    }
} 
```

提取接口使代码更易于维护，因为它允许随时切换实现而不会弄乱工作代码。它还有助于单元测试。

# java - 有没有可能从 java API 启动我的 hbase？

> ID：15069994
> 
> 赞同：0
> 
> 时间：2013-02-25T15:05:00.630
> 
> 标签：java, hadoop, hbase

有什么方法可以从 java 中获取主连接。我找到了一个名为 getMaster() 的函数。已弃用。

有没有其他方法可以使它成为可能？？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:55:02.083

在 HBase 中没有特定的方法可以做到这一点。但是您可以使用`ProcessBuilder`来实现它。`ProcessBuilder`可用于调用任何 shell 命令，您可以查看[JavaDoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)了解详细信息。特别是，要启动 HBase，您将命令传递`<path_to_hbase_directory>/bin/start-hbase.sh`给`ProcessBuilder`.

# javascript - 具有两个固定导航的锚链接 - 复杂

> ID：15069995
> 
> 赞同：1
> 
> 时间：2013-02-25T15:05:01.360
> 
> 标签：javascript, jquery, css, position, anchor

基本上我有一个固定的标题，里面有一个导航，它总是附加到窗口的顶部。然后我有另一个固定元素，它是一个分页，但它只在滚动到窗口时将其自身附加到窗口的顶部！

此分页具有链接到页面上不同部分的锚链接！但是，当您单击链接时，它会覆盖两个固定浮动元素的内容。

这是示例： http: [//www.chudz.co.uk/test/](http://www.chudz.co.uk/test/)

如果向下滚动，您将看到分页附加到标题导航！然后，如果您单击分页中的“A”，您将看到会发生什么！内容被覆盖！（抱歉，A 是唯一有效的链接）。

有人知道我可以使用的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:43:09.383

您的固定分页不占用 dom 中的任何空间。

您应该使用“id”而不是“name”，然后将一个类添加到锚点，将其绝对定位并以负边距向上移动（与分页的高度相同）。这将确保锚点从分页下方开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:01:56.620

这是针对此问题的 JavaScript 解决方法。首先，像这样在头链接中将 name 属性更改为 id 属性。

```
<h2><a id="a">Authors - A</a></h2> 
```

然后将此脚本添加到您的底部脚本中。

```
$(document).ready(function(){
    $("#pagination a").click(function(event){ 
        event.preventDefault();
        var o =  $( $(this).attr("href") ).offset();   
        var sT = o.top - 151; // 151 is the header height + navigation height 
        window.scrollTo(0,sT);
    });
}); 
```

# bash - 使用带有期望语句的 sftp UNIX bash 脚本发送不完整的文件

> ID：15069996
> 
> 赞同：0
> 
> 时间：2013-02-25T15:05:02.783
> 
> 标签：bash, unix, copy, solaris, sftp

这是一个需要在 Solaris 上运行的 bash 脚本，它从 dirlocal 获取文件，复制到 backupdir 并通过 SFTP 发送它们。问题是它只发送 4-5MB 的数据，然后它挂起（我认为在 mput 的某个地方），而手动一切正常。真的不知道该怎么办...

```
#!/bin/bash
export LD_LIBRARY_PATH=".:../tool/bin:$LD_LIBRARY_PATH"
dirlocal=</export/home/somedir>
dirlocal_backup=</export/home/somebackupdir>
filename=*
if [ ! -e ${dirlocal}/${filename} ]; then
exit
fi
hostname=<some_ip_address>
username=ftp
password=FTP
remotedir=<somedir>
cd ${dirlocal}
cp * ${dirlocal_backup}
../tool/bin/expect -f - <<EOFEXPECT1 

set timeout 10
spawn -nottycopy -nottyinit sftp ${username}@${hostname}
expect {
     (yes/no) {send yes\r ; exp_continue }
     "*assword" {send ${password}\r ; exp_continue }
    }

expect -timeout 10 sftp { }
send "cd ${remotedir}\r";
expect -timeout 10 sftp { }
send "mput ${filename}\r";
expect -timeout -1 sftp {send "bye\r" }

#send "exit\r"
expect eof
EOFEXPECT1
if [ $? -eq 0 ]
then
rm ${filename} > /dev/null 2>&1
else
echo "something"
fi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T08:42:35.167

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

终于成功了。编辑的期望语句是线索。感谢帮助！来自俄罗斯的问候！– 用户2107698

# nonlinear-optimization - 粒子群优化惯性因子

> ID：15069998
> 
> 赞同：0
> 
> 时间：2013-02-25T15:05:11.643
> 
> 标签：nonlinear-optimization, particle-swarm

我正在阅读软计算算法，目前在“粒子群优化”中，我大致了解该技术，但是，我停在数学或物理部分，我无法想象或理解它是如何工作的或它如何影响飞行，那部分是方程中更新速度的第一部分，称为“惯性因子” ![公式](../Images/7ba12b08a9aabeb0a8a02b8f9920e6aa.png) ，完整的更新速度方程是： ![公式](../Images/29d93c7d3056ffc241eaf6a6cac9771b.png) 我在第 2.3 节“惯性因子”的一篇文章中读到：

“算法的这种变体旨在平衡两种可能的 PSO 趋势（取决于参数化），即利用已知解决方案周围的区域或探索搜索空间的新区域。为此，这种变体侧重于粒子的动量分量”速度方程 2\. 注意，如果你去掉这个分量，粒子的运动就不会记住之前的运动方向，它总是会接近找到的解。另一方面，如果使用速度分量，或者甚至乘以 aw（惯性权重，平衡动量分量的重要性）因子，粒子将倾向于探索搜索空间的新区域，因为它不能轻易地将其速度改变为最佳解决方案。它必须首先“抵消”先前的动量获得，在这样做的过程中，它能够探索新的区域，时间“花费抵消”先前的动量。这种变化是通过将先前的速度分量乘以权重值 w 来实现的。

完整的 pdf 位于：[https ://www.google.com.eg/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http%3A%2F%2Fweb.ist.utl.pt %2F~gdgp%2FVA%2Fdata%2Fpso.pdf&ei=0HwrUaHBOYrItQbwwIDoDw&usg=AFQjCNH8vChXHXWz_ydHxJKAY0cUa94n-g](https://www.google.com.eg/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http%3A%2F%2Fweb.ist.utl.pt%2F~gdgp%2FVA%2Fdata%2Fpso.pdf&ei=0HwrUaHBOYrItQbwwIDoDw&usg=AFQjCNH8vChXHXWz_ydHxJKAY0cUa94n-g)

但我也无法想象这是如何在物理上或数值上发生的，以及这个因素如何影响从探索级别到开发级别，所以需要一个数值示例来了解它是如何工作的并想象它是如何工作的。

此外，在遗传算法中有一个模式定理，它证明了 GA 成功找到了最优解，PSO 是否有这样的定理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T01:44:28.420

使用数学来解释 PSO 并不容易（例如，参见 Wikipedia 文章）。但你可以这样想：方程有 3 个部分：

```
particle speed = inertia + local memory + global memory 
```

因此，您可以通过改变每个部分的系数来控制这些组件的“重要性”。没有分析方法可以看到这一点，除非您使随机部分保持不变并忽略诸如粒子-粒子相互作用之类的东西。

**Exploit**：利用最知名的解决方案（本地和全球）。
**探索**：寻找新的方向，但不要忽略最了解的解决方案。

简而言之，您可以控制对粒子当前速度（惯性）、最佳已知解的粒子记忆和群体最佳已知解的粒子记忆的重视程度。

我希望它可以帮助你！兄弟

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-26T21:04:52.307

Inertia 并不是 Kennedy 和 Eberhart 于 1995 年引入的原始 PSO 算法的一部分。直到 Shi 和 Eberhart 发布此扩展并（在某种程度上）证明它工作得更好已经过去了三年。

可以将该值设置为一个常数（假设 [0.8 到 1.2] 是最好的）。然而，参数的重点是平衡对空间的利用和探索，作者在使用线性函数定义参数时获得了最佳结果，该函数随着时间的推移从 [1.4 到 0] 减小。他们的理由是，第一个应该利用解决方案找到一个好的种子，然后利用种子周围的区域。

我的感觉是，越接近 0，粒子的转动就越混乱。

有关详细答案，请参阅 Shi, Eberhart 1998 - “A modified Particle Swarm Optimizer”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-24T11:05:43.583

惯性控制先前速度的影响。

当高时，认知和社会成分的相关性较低。（粒子继续前进，探索空间的新部分）

低时，粒子会更好地探索已找到迄今为止最佳最优值的空间

惯性会随着时间而改变：开始时高，后来降低