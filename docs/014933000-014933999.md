# StackOverflow 问答 14933000-14933999

# smarty - 警告：Smarty 错误：无法读取资源：

> ID：14933007
> 
> 赞同：1
> 
> 时间：2013-02-18T09:26:28.480
> 
> 标签：smarty, sugarcrm

我安装了新版本的sugarCRM，并且在某些页面中显示下一个警告“

**警告：Smarty 错误：无法读取资源：....**

我花了很多时间在网上寻找解决方案，但没有成功，我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-22T14:58:26.387

我无法找到触发此错误的原因。我寻找任何奇怪的 register_resource 调用，但没有找到。我最终压制了警告。这是给 Smarty 2 的

```
@@ -1411,7 +1411,7 @@
 {

     $_params = array('resource_name' => $resource_name);
-        if (! $this->_fetch_resource_info($_params)) {
+        if (! @$this->_fetch_resource_info($_params)) {
         return false;
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-19T15:05:20.147

当我使用 smarty 2 作为模板引擎时，我遇到了同样的问题。我使用 xampp 作为本地主机。因为我使用的是 Windows，所以我没有遇到模板目录和目录拼写问题的权限问题。但我也检查了文件夹的权限，它是 777，以及[https://www.smarty.net/docsv2/en/troubleshooting](https://www.smarty.net/docsv2/en/troubleshooting)中提供的其他解决方案。

最后更新 Smarty 库解决了我的问题。下载最新的 Smarty 文件并将其替换为您当前的库。

[https://github.com/smarty-php/smarty/releases/tag/v2.6.31](https://github.com/smarty-php/smarty/releases/tag/v2.6.31) unzip ->\smarty-2.6.31\libs 从 \libs 文件夹复制文件并将其粘贴到您的 smarty 库 -> \library\聪明的。

希望能帮助到你。

# jquery - JQueryUI 选项卡 - 通过 AJAX 滚动的内容

> ID：14933012
> 
> 赞同：1
> 
> 时间：2013-02-18T09:26:57.810
> 
> 标签：jquery, jquery-ui

我正在使用 JQueryUI ：通过 AJAX 的内容并链接到冗长的页面，#tabs 的 div 高度设置为 800px。然而页面溢出了，所以我把 overflow-y 设置为 auto。

现在，标签随着内容滚动，我希望它们具有粘性，以便只有内容滚动并且用户在向下滚动时可以看到它们。我试过了，但在从远程页面拉取数据后，无法找到如何在某些 div 中显示数据。请指导。

在创建这个问题之前，我检查了这个（[jQueryUI Tabs - Scroll content only](https://stackoverflow.com/questions/4427965/jqueryui-tabs-scroll-content-only)）和这个（ jqueryui [tabs : is it possible to keep the navigation tabs visible when content is垂直滚动？](https://stackoverflow.com/questions/3123990/jqueryui-tabs-is-it-possible-to-keep-the-navigation-tabs-visible-when-content)）在创建这个问题之前，不要发现它们与我的查询相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:24:03.133

使用 CSS，您可以将其设置`tabs`为固定。然后将 设置`content`为具有`margin-top`.

[这是关于 jsFiddle 的示例](http://jsfiddle.net/ayhP6/1/)

# sql - sql根据条件删除查询

> ID：14933014
> 
> 赞同：0
> 
> 时间：2013-02-18T09:27:04.850
> 
> 标签：sql, sql-delete

假设我有两张桌子。一个是 Car_Window，另一个是 Product。现在我想写一个删除语句，应该从 Product 中删除所有数据

> Car_Window.Id = Product.Makeid 和 Car_Window.Year = Product.Year 和 Car_Window.Model != product.Model

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:30:13.663

```
DELETE  a
FROM    product a
        INNER JOIN car_window b
            ON a.makeID = b.ID AND
                a.Year = b.year
WHERE   b.Model != a.Model 
```

# java - Scribe API 可以在运行时进行配置吗？

> ID：14933015
> 
> 赞同：0
> 
> 时间：2013-02-18T09:27:05.437
> 
> 标签：java, oauth, scribe

**总结**
我正在编写一个使用 Scribe 连接到 OAuth 服务器的应用程序。我需要能够在运行时更改端点（无需重新编译）。这可能吗？

**更多细节**
Java 服务器应用程序正在使用 scribe 连接到 OAuth 服务器。OAuth 服务器是内部开发的，因此我正在扩展`DefaultApi10a`以定义端点。

OAuth 服务器有多个实例，我需要能够配置我的服务器应用程序（在运行时）要连接到哪一个。但似乎端点打算在我的子类中硬编码`DefaultApi10a`。有没有解决这个问题的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:44:23.920

可能有多种方式，但我知道这两种方式。

1.  在运行时从数据库中获取 URL 并根据它进行命中
2.  将 URL 放入配置文件并在您的 java 程序中添加属性文件更改侦听器。

# javac - Javac 不工作

> ID：14933019
> 
> 赞同：0
> 
> 时间：2013-02-18T09:27:34.803
> 
> 标签：javac

我是 Java Packaging 的新手，我正在尝试编译 Java 代码并想要以下两件事

*   java编译代码并将.java文件放在src文件夹中
*   java编译代码并将.class文件放在.com文件夹中

所以我尝试了下面的命令

```
javac -s .\src -d .\com Planet.java 
```

命令运行成功，没有任何错误；类文件放在 com 文件夹中，但源文件仍未移动到 src 文件夹中。我在当前文件夹中手动创建了文件夹 com 和 src。Planet.java 也在当前文件夹中。

```
├───com  
│   └───test  
└───src 
```

我在这里错过任何技巧吗？请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T15:23:33.603

In order to use [`javac`](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html) in `cmd`, JDK (Java Development Kit) must be installed on your system.

`javac.exe` is inside JDK's `bin` folder (e.g.: `C:\Program Files\Java\jdk1.7.0_45\bin`), and **NOT** in JRE's bin folder (`C:\Program Files\Java\jre7\bin`), because JRE is just a runtime environment (but you need the development kit to be able to compile source code).

You should append JDK's bin directory (`C:\Program Files\Java\jdk1.7.0_45\bin`) to the PATH system environment variable.

If you don't have JDK, please download it from the following link:
[http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)

Reference thread for JDK vs. JRE:
[What is the difference between JDK and JRE?](https://stackoverflow.com/questions/1906445/what-is-the-difference-between-jdk-and-jre)

**Procedure:**

1.  Install JDK
2.  open command prompt
3.  type **"`cd C:\Program Files\Java\jdk1.7.0_45\bin`"**, press Enter (path may change based on JDK version and 32-bit/64-bit OS version)
4.  type **"`javac`"**, press Enter

Done.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:31:35.453

javac 命令实际上不会移动您的源文件。javac 中的`-s`选项是告诉 javac 将生成的源文件放在哪里，而不是移动你的。

请参阅：[http ://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html)

# sql - 没有周末的日期 datediff 它如何在 2 个不同的年份工作

> ID：14933028
> 
> 赞同：0
> 
> 时间：2013-02-18T09:28:07.667
> 
> 标签：sql, datediff

如果您可以帮助我，我也有`datediff`没有周末的问题：我尝试查找两个日期之间的天数，并且当日期在同一年时它会给出正确的结果，但是当日期更改年份时它会出错：我的代码是：

```
convert (float,datediff(dd,departureDate, min(arrivalDate)) - 
    (isnull((datepart(wk, min(arrivalDate)) - 
    datepart(week,Event2024_actual))*2,0))) as arrivalhome 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:35:49.717

你有没有尝试过：

```
DATEDIFF(day, date_start, date_end) - ((DATEDIFF(day, date_start, date_end) / 7) * 2) 
```

# android - 列表视图不显示

> ID：14933036
> 
> 赞同：0
> 
> 时间：2013-02-18T09:28:36.593
> 
> 标签：android, mysql, listview, android-listview

嗨，我创建了一个 android 应用程序，它以列表的形式显示来自 mysql db 的数据。

这是代码。

```
public class MainActivity extends Activity {

    ListView mListView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);    

        // URL to the JSON data         
        String strUrl = "http://192.168.2.3/Flutura/PHP/Core/Data/android.data.php";

        // Creating a new non-ui thread task to download json data 
        DownloadTask downloadTask = new DownloadTask();

        // Starting the download process
        downloadTask.execute(strUrl);

        // Getting a reference to ListView of activity_main
        mListView = (ListView) findViewById(R.id.lv_countries);

    }

    /** A method to download json data from url */
    private String downloadUrl(String strUrl) throws IOException{
        String data = "";
        InputStream iStream = null;
        try{
                URL url = new URL(strUrl);

                // Creating an http connection to communicate with url 
                HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

                // Connecting to url 
                urlConnection.connect();

                // Reading data from url 
                iStream = urlConnection.getInputStream();

                BufferedReader br = new BufferedReader(new InputStreamReader(iStream));

                StringBuffer sb  = new StringBuffer();

                String line = "";
                while( ( line = br.readLine())  != null){
                    sb.append(line);
                }

                data = sb.toString();

                br.close();

        }catch(Exception e){
                Log.d("Exception while downloading url", e.toString());
        }finally{
                iStream.close();
        }

        return data;
    }

    /** AsyncTask to download json data */
    private class DownloadTask extends AsyncTask<String, Integer, String>{
        String data = null;
                @Override
                protected String doInBackground(String... url) {
                        try{
                            data = downloadUrl(url[0]);

                        }catch(Exception e){
                            Log.d("Background Task",e.toString());
                        }
                        return data;
                }

                @Override
                protected void onPostExecute(String result) {

                        // The parsing of the xml data is done in a non-ui thread 
                        ListViewLoaderTask listViewLoaderTask = new ListViewLoaderTask();

                        // Start parsing xml data
                        listViewLoaderTask.execute(result);                        

                }
    }

    /** AsyncTask to parse json data and load ListView */
    private class ListViewLoaderTask extends AsyncTask<String, Void, SimpleAdapter>{

        JSONObject jObject;
        // Doing the parsing of xml data in a non-ui thread 
        @Override
        protected SimpleAdapter doInBackground(String... strJson) {
            try{
                jObject = new JSONObject(strJson[0]);
                CountryJSONParser countryJsonParser = new CountryJSONParser();
                countryJsonParser.parse(jObject);
            }catch(Exception e){
                Log.d("JSON Exception1",e.toString());
            }

            // Instantiating json parser class
            CountryJSONParser countryJsonParser = new CountryJSONParser();

            // A list object to store the parsed countries list
            List<HashMap<String, Object>> countries = null;

            try{
                // Getting the parsed data as a List construct
                countries = countryJsonParser.parse(jObject);
            }catch(Exception e){
                Log.d("Exception",e.toString());
            }          

            // Keys used in Hashmap 
            String[] from = { "outlet_id","outlet_name","lat","lng","outlet_location"};

            // Ids of views in listview_layout
            int[] to = { R.id.tv_country,R.id.iv_flag,R.id.tv_country_details};

            // Instantiating an adapter to store each items
            // R.layout.listview_layout defines the layout of each item         
            SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), countries, R.layout.lv_layout, from, to);  

            return adapter;
        }

       /* /** Invoked by the Android on "doInBackground" is executed 
        @Override
        protected void onPostExecute(SimpleAdapter adapter) {

            // Setting adapter for the listview
            mListView.setAdapter(adapter);

          /*  for(int i=0;i<adapter.getCount();i++){
                HashMap<String, Object> hm = (HashMap<String, Object>) adapter.getItem(i);
                String imgUrl = (String) hm.get("flag_path");
                //ImageLoaderTask imageLoaderTask = new ImageLoaderTask();

                HashMap<String, Object> hmDownload = new HashMap<String, Object>();
                hm.put("flag_path",imgUrl);
                hm.put("position", i);

                // Starting ImageLoaderTask to download and populate image in the listview 
                //imageLoaderTask.execute(hm);
            }   
        }       
    }*/
  /*  
    /** AsyncTask to download and load an image in ListView 
    private class ImageLoaderTask extends AsyncTask<HashMap<String, Object>, Void, HashMap<String, Object>>{

        @Override
        protected HashMap<String, Object> doInBackground(HashMap<String, Object>... hm) {

            InputStream iStream=null;
            String imgUrl = (String) hm[0].get("flag_path");
            int position = (Integer) hm[0].get("position");

            URL url;
            try {
                url = new URL(imgUrl);

                // Creating an http connection to communicate with url
                HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

                // Connecting to url                
                urlConnection.connect();

                // Reading data from url 
                iStream = urlConnection.getInputStream();

                // Getting Caching directory 
                File cacheDirectory = getBaseContext().getCacheDir();

                // Temporary file to store the downloaded image 
                File tmpFile = new File(cacheDirectory.getPath() + "/wpta_"+position+".png");               

                // The FileOutputStream to the temporary file
                FileOutputStream fOutStream = new FileOutputStream(tmpFile);

                // Creating a bitmap from the downloaded inputstream
                Bitmap b = BitmapFactory.decodeStream(iStream);             

                // Writing the bitmap to the temporary file as png file
                b.compress(Bitmap.CompressFormat.PNG,100, fOutStream);              

                // Flush the FileOutputStream
                fOutStream.flush();

                //Close the FileOutputStream
                fOutStream.close();             

                // Create a hashmap object to store image path and its position in the listview
                HashMap<String, Object> hmBitmap = new HashMap<String, Object>();

                // Storing the path to the temporary image file
                hmBitmap.put("flag",tmpFile.getPath());

                // Storing the position of the image in the listview
                hmBitmap.put("position",position);              

                // Returning the HashMap object containing the image path and position
                return hmBitmap;                

            }catch (Exception e) {              
                e.printStackTrace();
            }
            return null;
        }
*/      
        protected void onPostExecute(HashMap<String, Object> result) {
            // Getting the path to the downloaded image
            //String path = (String) result.get("flag");            

            // Getting the position of the downloaded image
            //int position = (Integer) result.get("position");

            // Getting adapter of the listview
            SimpleAdapter adapter = (SimpleAdapter ) mListView.getAdapter();

            // Getting the hashmap object at the specified position of the listview
            //HashMap<String, Object> hm = (HashMap<String, Object>) adapter.getItem(position); 

            // Overwriting the existing path in the adapter 
            //hm.put("flag",path);

            // Noticing listview about the dataset changes
            adapter.notifyDataSetChanged(); 
        }

    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
}
} 
```

这是我使用 JSONParser 解析数据的类。

```
/** A class to parse json data */
public class CountryJSONParser {

    // Receives a JSONObject and returns a list
    public List<HashMap<String,Object>> parse(JSONObject jObject){      

        JSONArray jCountries = null;
        try {       
            // Retrieves all the elements in the 'countries' array 
            jCountries = jObject.getJSONArray("countries");
        } catch (JSONException e) {
            e.printStackTrace();
        }

         // Invoking getCountries with the array of json object
         // where each json object represent a country
        return getCountries(jCountries);
    }

    private List<HashMap<String, Object>> getCountries(JSONArray jCountries){
        int countryCount = jCountries.length();
        List<HashMap<String, Object>> countryList = new ArrayList<HashMap<String,Object>>();
        HashMap<String, Object> country = null; 

        // Taking each country, parses and adds to list object 
        for(int i=0; i<countryCount;i++){
            try {
                // Call getCountry with country JSON object to parse the country 
                country = getCountry((JSONObject)jCountries.get(i));
                countryList.add(country);

            } catch (JSONException e) {
                e.printStackTrace();
            }
        }

        return countryList;
    }

    // Parsing the Country JSON object 
    private HashMap<String, Object> getCountry(JSONObject jCountry){

        HashMap<String, Object> country = new HashMap<String, Object>();
        String countryName = "";
        String flag="";
        String language = "";
        String capital = "";
        String location = "";
        //String currencyCode = "";
        //String currencyName = "";     

        try {
            countryName = jCountry.getString("outlet_id");
            flag = jCountry.getString("outlet_name");
            language = jCountry.getString("lat");
            capital = jCountry.getString("lng");
            location = jCountry.getString("outlet_location");
            //currencyCode = jCountry.getJSONObject("outlet_image").getString("outlet_image");
            //currencyName = jCountry.getJSONObject("outlet_location").getString("outlet_location");

            String details =        "Language : " + language + "\n" +
                    "Capital : " + capital + "\n" ;
                   // "Currency : " + currencyName + "(" + currencyCode + ")";

            country.put("country", countryName);
            //country.put("flag", R.drawable.blank);
            country.put("flag_path", flag);
            country.put("details", details);

        } catch (JSONException e) {         
            e.printStackTrace();
        }       
        return country;
    }
} 
```

我的问题是列表视图没有显示。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:32:49.150

所以这里有很多乱七八糟的代码，最重要的是你永远不会调用`setAdapter`你的`ListView`. 这样做，它应该工作。

另外我的建议是您首先创建和初始化`ListView`实例，并设置`Adapter`为`ListView`空`List`。创建子类`BaseAdapter`以获得更多控制权`Adapter`并`List`通过构造函数传递：

```
public MyAdapter extends BaseAdapter {

   public MyAdapter(Context c, int layout, List<HashMap<String, Object>> countries) {

   }

   // implement methods as getItem, getItemId, ...

   public View getView(int position, View convertView, ViewGroup parent) {
      if (convertView == null) {
          // inflate row, use RowHolder design pattern to hold data of each row in
          // wrapping object like RowHolder and set it as tag to convertView
      }
      else {
        //get existing tag from convertView
      }
      if (!countries.isEmpty()) {
        // set data to elements in row

      }
   }
} 
```

当您`AsyncWorker`从服务器下载某些项目时，将其添加到`List`您`yourAdapter.notifyDataSetChanged()`的`Adapter`.

这里是例子：[**`Android ListView`**](http://www.javasrilankansupport.com/2012/05/android-listview-example-with-image-and.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:38:21.977

在添加`OnPostExecute`_`ListViewLoaderTask``mListView.setAdapter(adapter);`

另一方面，你没有对结果做任何事情。你只要打电话

```
SimpleAdapter adapter = mListView.getAdapter(); 
```

然后将其设置回列表视图。这基本上什么都不做。您必须使用检索到的数据填充适配器。

# matlab - Matlab imagesc 绘制 nan 值

> ID：14933039
> 
> 赞同：3
> 
> 时间：2013-02-18T09:28:57.410
> 
> 标签：matlab, plot

当使用 imagesc 可视化包含 NaN 值的数据时，Matlab 将它们视为最小值（在灰色中，它将它们涂成黑色、深蓝色等）。喷射颜色图既不包含黑色也不包含白色。是否可以将 nan 值显示为黑色/白色？例如：

```
data = [0 0 0 ; .5 .5 .5 ;1 1 1;nan nan nan]; 
```

应该产生蓝绿红黑条。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T11:59:20.987

我编写了一个自定义函数来将`NaN`值显示为透明，即 alpha 值为 0。

```
function h = imagesc2 ( img_data )
% a wrapper for imagesc, with some formatting going on for nans

% plotting data. Removing and scaling axes (this is for image plotting)
h = imagesc(img_data);
axis image off

% setting alpha values
if ndims( img_data ) == 2
  set(h, 'AlphaData', ~isnan(img_data))
elseif ndims( img_data ) == 3
  set(h, 'AlphaData', ~isnan(img_data(:, :, 1)))
end

if nargout < 1
  clear h
end 
```

因此，`NaN`s 将显示与图形背景颜色相同的颜色。如果删除 line `axis image off`，则`NaN`s 将显示与轴背景颜色相同的颜色。该函数假定输入图像的大小为`n x m`（单通道）或`n x m x 3`（三通道），因此可能需要根据您的使用进行一些修改。

使用您的数据：

```
data = [0 0 0 ; .5 .5 .5 ;1 1 1;nan nan nan];
imagesc2(data);
axis on
set(gca, 'Color', [0, 0, 0]) 
```

![在此处输入图像描述](../Images/ec68a10d35caa2171a25d9bb882a3bc4.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-26T02:34:18.730

```
function imagescnan(IM)
% function imagescnan(IM)
% -- to display NaNs in imagesc as white/black

% white
nanjet = [ 1,1,1; jet  ];
nanjetLen = length(nanjet); 
pctDataSlotStart = 2/nanjetLen;
pctDataSlotEnd   = 1;
pctCmRange = pctDataSlotEnd - pctDataSlotStart;

dmin = nanmin(IM(:));
dmax = nanmax(IM(:));
dRange = dmax - dmin;   % data range, excluding NaN

cLimRange = dRange / pctCmRange;
cmin = dmin - (pctDataSlotStart * cLimRange);
cmax = dmax;
imagesc(IM);
set(gcf,'colormap',nanjet);
caxis([cmin cmax]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:44:24.560

我可以看到实现这一目标的两种可能方法：

a) 修改 jet 颜色图，使其最小值为黑色或白色，例如：

```
cmap = jet;
cmap = [ 0 0 0 ; cmap ];  % Add black as the first color 
```

缺点是如果您使用此颜色图显示没有`nan`值的数据，最小值也会以黑/白显示。

b) 使用File Exchange 中的[sc](http://www.mathworks.co.uk/matlabcentral/fileexchange/16233)`imagesc` ，它将绘图渲染为 RGB 图像。这更加灵活，因为一旦您拥有 RGB 图像，您就可以随心所欲地对其进行操作，包括更改所有`nan`值。例如：

```
im = sc(myData);
im(repmat(isnan(myData), [ 1 1 3 ]) ) = 0;  % Set all the nan values in all three 
                                            % color channels to zero (i.e. black) 
```

# python - 堆栈跟踪 Python

> ID：14933044
> 
> 赞同：-2
> 
> 时间：2013-02-18T09:29:05.877
> 
> 标签：python, django

有一个用 Python Django 和 Python 构建的应用程序。主要是用 Django 构建的，一些部分是用 Python 构建的。两者都位于同一台服务器上，但位于不同的位置。

但是当我运行应用程序时，我无法从 Python 脚本中获得任何堆栈跟踪，我只得到了 500。

我可以为 Django 脚本创建本地服务器并获取堆栈跟踪，并且我尝试重定向 Django 应用程序以从我的 C\: 驱动器而不是服务器加载 Python 脚本，但无法使其正常工作。也不知道有没有可能。

但是我需要为 Python 脚本创建一个本地服务器/环境。

有什么好主意吗？

//

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:51:53.060

找到一个不是最好的解决方案，但它会有所帮助。在 Python 文件中，我记录了堆栈跟踪。例如：

```
try:
    some code
exception Exception, ex:
    logging.basicConfig(filename='logFile.log', level = logging.debug) 
    logging.exception(ex); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:44:46.410

在您的开发服务器上，您需要将[`DEBUG`](https://docs.djangoproject.com/en/1.4/ref/settings/#debug)标志设置为`True`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:48:18.050

也许您可以使用[try/except](http://docs.python.org/2/tutorial/errors.html)块。

来自 Django：

```
# importing some external python script
import some_python_script

# Also needed
import traceback

# calling a function in the script and getting a stack trace when it goes wrong:
try:
    some_python_script.function_to_call()
except:
    traceback.print_exc() 
```

# css - Firefox 100% 高度，不间断

> ID：14933045
> 
> 赞同：0
> 
> 时间：2013-02-18T09:29:13.873
> 
> 标签：css, templates, firefox, height, line-breaks

我想构建一个包含两列高度为 100% 的模板。它们应该像一列一样粘在一起，大约 960 像素。

不知何故，Firefox 做了自己的事情，我只是无法 100% 获得这两列。

[http://jsfiddle.net/BbC4N/5/](http://jsfiddle.net/BbC4N/5/)

```
<div id="head">Menu</div>
<div class="wrapper">
    <div class="wrapper2">
        <div id="left" class="inner">LEFT</div>
        <div id="right" class="inner">RIGHT</div>
    </div> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:42:00.317

你可以尝试使用jquery：

```
var leftHeight = $('#left').height();
var rightHeight = $('#right').height();
if (leftHeight >= rightHeight) {
   $('#right').css({'height':leftHeight});
} else {
   $('#left').css({'height':rightHeight});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:18:28.110

在这种情况下，我建议使用`CSS`表格：

这是一个非常简化的演示：http: [//jsfiddle.net/BbC4N/9/](http://jsfiddle.net/BbC4N/9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T10:21:34.820

改变：

```
.wrapper {
   display: table;
} 
```

到：

```
.wrapper {
   display: block;
} 
```

我添加了 to`.wrapper { margin-top: 48px; }`以使`left`和`right`div 可见，并且在 Firefox 中似乎一切都对我有用。

**[小提琴](http://jsfiddle.net/BbC4N/8/)**

# windows-8 - COM 对象不在我的 Metro 应用程序中 CoCreateInstanceFromApp 错误的允许列表中

> ID：14933046
> 
> 赞同：2
> 
> 时间：2013-02-18T09:29:15.067
> 
> 标签：windows-8

我正在尝试通过我的 Windows 8 Metro App 将图像设置为墙纸。尝试执行此操作时出现此错误“由于以下错误，使用 CoCreateInstanceFromApp 创建具有 CLSID {75048700-EF1F-11D0-9888-006097DEACF9} 的 COM 组件实例失败：80040154 未注册类（来自 HRESULT 的异常： 0x80040154 (REGDB_E_CLASSNOTREG))。请确保您的 COM 对象在 CoCreateInstanceFromApp 的允许列表中。” 我如何注册我的课程并让它发挥作用？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T15:10:41.017

Windows 商店应用程序可以访问的 COM 对象集非常有限。查看 MSDN 文档，似乎 CLSID_ActiveDesktop 不是商店应用程序允许访问的类之一。

正如 Hans 在他的评论中提到的那样，商店应用程序不允许干扰每个用户的状态 - 诸如更改桌面壁纸之类的操作被视为更改用户状态。

# youtube-api - 使用 YouTube 数据 API 时排除受限视频

> ID：14933052
> 
> 赞同：2
> 
> 时间：2013-02-18T09:29:27.840
> 
> 标签：youtube-api

我正在使用 YouTube API 2.0 版来检索视频。

我想在嵌入视频时排除显示“限制在某些网站上播放...在 Youtube 上观看”消息的视频。

我使用了参数 format=5，但这无助于过滤掉这些视频。此外，我收到了以下权限，使用这些权限我无法决定视频是否仍会在嵌入时显示上述消息

yt:accessControl action='comment' 权限='allowed'/

yt:accessControl action='commentVote' 权限='allowed'/

yt:accessControl action='videoRespond' 权限='moderated'/

yt:accessControl action='rate' 权限='allowed'/

yt:accessControl action='embed' 权限='allowed'/

yt:accessControl action='list' 权限='allowed'/

yt:accessControl action='autoPlay' 权限='allowed'/

yt:accessControl action='syndicate' 权限='allowed'/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:29:27.113

无法过滤掉只能在某些域上播放（或在某些域上被阻止）的视频。这可能令人沮丧；我知道。

这篇博文详细介绍了您可以采取哪些步骤来过滤因其他原因无法播放的视频：http: [//apiblog.youtube.com/2011/12/understanding-playback-restrictions.html](http://apiblog.youtube.com/2011/12/understanding-playback-restrictions.html)

# javascript - 比 switch 语句更好的解决方案

> ID：14933055
> 
> 赞同：1
> 
> 时间：2013-02-18T09:29:46.500
> 
> 标签：javascript, loops, refactoring, switch-statement

下面是一个从循环中的数组中提取月份的函数。当找到一个月时，该月在对象 CRIMES_PER_MONTH 中迭代 1。

这可行，但它是一个非常丑陋的解决方案，并且 switch 语句变得很长。那么，我可以使用什么来代替 switch 语句呢？

```
var crimes_per_month = {
          january: 0,
          february: 0,
          mars: 0,
          april: 0,
          may: 0,
          june: 0,
          july: 0,
          august: 0,
          september: 0,
          oktober: 0,
          november: 0,
          december: 0
};

function AddToMonths(month) {

    switch(month) {

        case 1:
            jan += 1;
        break;

        case 2:
            feb += 1;
        break;

        case 3:
            mar += 1;
        break;

        case 4:
            apr += 1;
        break;

        ... and so on...

    }
}

for(var i = 0; i < incidents.length; i++) {
    month = incidents[i].substring(5, 7);
    AddToMonths(parseInt(month));
} 
```

我想最好的办法是直接在循环中访问对象：

```
for(var i = 0; i < incidents.length; i++) {
    month = incidents[i].substring(5, 7);
    crimes_per_month[month] += 1;
} 
```

...但这仅适用于数组，我真的想将其保留为对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T09:34:08.200

最简单的方法是创建`crimes_per_month`一个数组，以便可以使用`addToMonths`给定的键直接处理其属性：

```
crimes_per_month = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
function addToMonths(month) {
    crimes_per_month[month-1] += 1;
} 
```

如果您不希望这样，则需要进行索引到月份名称的转换功能。

```
var crimes_per_month = {
    january: 0,
    february: 0,
    mars: 0,
    april: 0,
    may: 0,
    june: 0,
    july: 0,
    august: 0,
    september: 0,
    oktober: 0,
    november: 0,
    december: 0
};

function addToMonths(month) {
    var names = ["january", "february", "mars", "april", "may", "june", "july", "august", "september", "oktober", "november", "december"];
    var name = names[month-1];
    crimes_per_month[name] += 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:32:47.787

您可以简单地使用数组。

```
var crime_per_month = new Array(13);
for(var i = 1; i <= 12; i++) crime_per_month[i] = 0;
function AddToMonths(month) {
    crime_per_month[month]++;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T09:39:34.180

如果您想保持当前`CRIMES_PER_MONTH`结构，可以使用带键的数组将月份编号转换为键名：

```
var addToMonths = (function () {
    var names = ["january", "february", "mars", "april", "may", "june", "july", "august", "september", "oktober", "november", "december"];
    return function (month) {
        CRIMES_PER_MONTH[names[month - 1]]++;
    };
}()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T09:46:14.997

只需有一组月份名称，您可以查找它们。

```
var months = ["january", "february", ...],
    month = incidents[i].substring(...),

    incident_month = months[month-1]; // case 1: === "january"

 crimes_per_month[incident_month] += 1; // case 1: === crimes_per_month.january += 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T10:00:04.010

我在这里明显错过了什么吗？

它是 JavaScript，所以（几乎）一切都是允许的；）

为什么不直接访问对象成员？您将需要相同的成员名称，`crimes_per_month`并且`incidents_month`应该能够执行以下操作：

```
var crimes_per_month = {january: 0,...};
var incidents_month = {january: 14,....};

function addToMonth(/* string */ monthName) {
  crimes_per_month[monthName] = crimes_per_month[monthName] + 1;
} 
```

# c# - 按索引获取列表值

> ID：14933059
> 
> 赞同：0
> 
> 时间：2013-02-18T09:29:57.837
> 
> 标签：c#, linq, list

我有一个列表，里面有我的数据库中的表格，我给每个表格一个数字，现在我想打开表格并根据用户选择的数字显示它的所有值。

**代码**：

```
 List<System.Data.Linq.Mapping.MetaTable> tables = db.Mapping.GetTables().ToList();

            for (int i = 0; i < tables.Count(); i++)
            {
                var s = tables[i].TableName;
                Console.WriteLine(i+". "+s);
            }
            Console.WriteLine("Choose value to open");
            string str = Console.ReadLine();
            int number = Convert.ToInt32(str);

            List<System.Data.Linq.Mapping.MetaTable> query =
            from t in tables[number].TableName
            select t; <--- stuck here :*(
        } } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:38:04.927

如果您希望每个值都在新行上，假设您的数据的 ToString 输出是可以接受的

```
Console.Write(tables[number].Aggregate(string.Empty, (a, b) => a + Environment.NewLine + b)) 
```

# public-key-encryption - 如何向非程序员解释公钥加密？

> ID：14933060
> 
> 赞同：0
> 
> 时间：2013-02-18T09:30:04.427
> 
> 标签：public-key-encryption

道歉，因为这有点边界（离题），但我认为解决方案只会来自深入了解公钥加密原理而不仅仅是理论的人。

我的一些同事不得不向那些对它的工作原理并不真正感兴趣的学生（技术人员、Web 开发人员等）解释公钥加密。他们只需要知道何时以及如何使用它。不幸的是，要通过课程，学生至少必须掌握基础知识。他们这样做，但它永远不会令人愉快。

我们试图想出一种方法来实际表示公钥加密。我们最大的努力是一个带有两把钥匙/组合的可上锁的盒子/柜子，一个学生可以把东西放进去，一个学生可以把它拿走，但我们无法做到这一点。

我个人希望有一种方法来实际和手动编码某些东西，这种方式暗示了公钥加密及其工作方式，但我还远远没有能力考虑清楚。对于非程序员来说，动手操作的机械设备显然是最容易理解的。我们是开放的。

有人有解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:35:15.277

您可以将公钥视为挂锁，而将私钥视为打开它的真正钥匙：Alice 从 Bob 那里得到一把挂锁，用它来锁定一个带有给 Bob 消息的盒子；当鲍勃收到盒子时，他可以用自己的钥匙打开它。

# sql - SQL Recursive CTE：通过多个递归引用防止递归循环

> ID：14933073
> 
> 赞同：5
> 
> 时间：2013-02-18T09:30:50.543
> 
> 标签：sql, common-table-expression, recursive-query

## 问题

我有一个递归 CTE 查询，但是在创建循环时它失败了。我已经修复了简单的循环（例如 1 -> 2 -> 1），但无法修复更复杂的循环（例如 1 -> 2 -> 3 -> 2）。

## 查询详情

测试表有两列：Base 和 Parent。我想要一个包含所有祖先的列表。

如果您从 test2 开始，我的查询适用于下面的示例数据，但不是从 test1 开始。

**样本数据**

```
Base    Parent
----    ------
test1   test2
test2   test3
test3   test2 
```

**SQL 查询（我尝试的修复在注释中标记）**

```
;with sample_data (Base, Parent) as (
    select 'test1', 'test2'
    union select 'test2', 'test3'
    union select 'test3', 'test2'
),
nt_list (Base, Ancestor, [level]) as (
        select  Base,
                Parent Ancestor,
                1 [level]
        from    sample_data
        where   Base = 'test1' -- START HERE
        union all
        select  ntl.Base,
                nt.Parent,
                ntl.[level] + 1 [level]
        from    nt_list ntl
        join    sample_data nt on ntl.Ancestor = nt.Base
        where   nt.Parent <> ntl.Base -- fix recursive bug (e.g. 1 -> 2 -> 1)
        -- WHAT I TRIED TO ADD BUT CANNOT: (e.g. 1 -> 2 -> 3 -> 2)
        and     nt.Parent in (select Ancestor from nt_list)
)
select  distinct
        ntl.Base,
        ntl.Ancestor
from    nt_list ntl
order by Ancestor 
```

**SQL 错误：公用表表达式“nt_list”的递归成员具有多个递归引用。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T07:40:05.537

最终版本。假设`'/'`永远不会是基本名称或父名称的一部分。

```
;with sample_data (Base, Parent) as (
    -- TEST 1
    --        select 'test1', 'test2'
    --union   select 'test2', 'test3'
    --union   select 'test3', 'test2'
    -- TEST 2
            select 'test1', 'test2'
    union   select 'test2', 'test3'
    union   select 'test3', 'test4'
    union   select 'test3', 'test9'
    union   select 'test4', 'test5'
    union   select 'test5', 'test3'
    union   select 'test9', 'test8'
    -- TEST 3
    --        select 'test1', 'test2'
    --union   select 'test2', 'test3'
    --union   select 'test3', 'test1'
    -- TEST 4
    --        select  'test1', 'test1'
    --union   select  'test1', 'test2'
),
nt_list (Base, Ancestor, [level], [path]) as (
        select  Base,
                Parent Ancestor,
                1 [level],
                '/' + convert(varchar(max), rtrim(Base)) + '/' [path]
        from    sample_data
        where   Base = 'test1' -- START HERE
        union all
        select  ntl.Base,
                nt.Parent,
                ntl.[level] + 1 [level],
                ntl.[path] + rtrim(nt.Base) + '/'
        from    nt_list ntl
        join    sample_data nt on ntl.Ancestor = nt.Base
        where   ntl.path not like '%/' + rtrim(nt.Parent) + '/%'
)
select  distinct
        ntl.Base,
        ntl.Ancestor
from    nt_list ntl
order by Ancestor 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:44:14.123

您可以使用

```
;WITH nt_list (Base, Ancestor, [level], cycle, path)
     AS (SELECT Base,
                Parent                                                            Ancestor,
                1                                                                 [level],
                0                                                                 AS cycle,
                CAST('.' AS VARCHAR(max)) + ISNULL(Parent, '') + '.' + Base + '.' AS [path]
         FROM   NoteTest
         WHERE  Base = 'test1'
         UNION ALL
         SELECT ntl.Base,
                nt.Parent,
                ntl.[level] + 1                   [level],
                CASE
                  WHEN ntl.[path] LIKE '%.' + LTRIM(nt.Base) + '.%' THEN 1
                  ELSE 0
                END                               AS cycle,
                ntl.[path] + LTRIM(nt.Base) + '.' AS [path]
         FROM   nt_list ntl
                JOIN NoteTest nt
                  ON ntl.Ancestor = nt.Base
                     AND ntl.cycle = 0)
SELECT ntl.Base,
       ntl.Ancestor
FROM   nt_list ntl
ORDER  BY Ancestor 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:30:50.543

我目前的解决方法是添加一个级别限制（添加`and ntl.[level] <= 100`到查询中）并让`select distinct`删除重复的条目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T00:52:47.720

这个案例是完美的，但就像你想要的更多项目一样：

```
 select 'test1', 'test2'
         union select 'test2', 'test3'
         union select 'test3', 'test4'
         union select 'test4', 'test5'
         union select 'test10', 'test11'
         union select 'test11', 'test30'
         ... 
```

结果应该是：

```
 test1   test1 <- adding this
    test1   test2
    test1   test3
    test1   test4
    test1   test5
    test10  test10 <- adding this to multiple bases
    test10  test11
    test10  test30 
```

# c# - 无法将“System.__ComObject”类型的 COM 对象转换为接口类型“Microsoft.Office.Interop.PowerPoint.Presentation”

> ID：14933075
> 
> 赞同：3
> 
> 时间：2013-02-18T09:30:53.170
> 
> 标签：c#, vb.net, c#-4.0

我正在使用 MSWord 2003 current 并创建一个 Powerpoint 对象，然后应用模板。在这些方面，我发现了一个例外。

> “无法将类型为“System.__ComObject”的 COM 对象转换为接口类型“Microsoft.Office.Interop.PowerPoint.Presentation”。此操作失败，因为对具有 IID 的接口的 COM 组件调用 QueryInterface '{9149349D-5A91- 11CF-8700-00AA0060263B}' 由于以下错误而失败：不支持此类接口（HRESULT 异常：0x80004002 (E_NOINTERFACE)）。”

```
 ((Microsoft.Office.Interop.PowerPoint.Presentation)objPresentation).Tags.Add("Carma DocSys~XML", m_Model.Document.get_Data.OuterXml);
    objMaster = ((Microsoft.Office.Interop.PowerPoint.Presentation)objPresentation).TitleMaster; 
```

代码是

```
 object objApplication; //As Object ' PowerPoint.Application
        object objPresentation = new object();  // As Object ' PowerPoint.Presentation
        string strTemplate;//     As String

        objApplication = new Microsoft.Office.Interop.PowerPoint.Application();
       strTemplate = Convert.ToString(ndModel.GetAttribute("template"));
       objPresentation ((Microsoft.Office.Interop.PowerPoint.Application)objApplication).Presentations.Add();
      ((Microsoft.Office.Interop.PowerPoint.Presentation)objPresentation).ApplyTemplate(strTemplate);

      ((Microsoft.Office.Interop.PowerPoint.Presentation)objPresentation).Tags.Add("Carma DocSys~XML", m_Model.Document.get_Data.OuterXml);

   objMaster = ((Microsoft.Office.Interop.PowerPoint.Presentation)objPresentation).TitleMaster; 
```

# iphone - iOS 5 和 iOS 6 - UIWebView 的行为差异

> ID：14933077
> 
> 赞同：7
> 
> 时间：2013-02-18T09:31:05.990
> 
> 标签：iphone, ios, uiwebview

我正在测试一些 HTML 代码`UIWebView`。我也希望同时支持 iOS 5.x 和 iOS 6.x。但似乎只有与 iOS 6.x 相关的字体大小存在问题。

也就是说，在旋转的情况下，iOS 5.x 在从横向模式更改为纵向时会使字体稍微变小（这是可取的，因为纵向的宽度更短）。然而，`UIWebView`在 iOS 6.x 中会做相反的事情。

在 iOS Safari（5.x 和 6.x）中呈现相同的 HTML 代码时不会出现此问题，因为字体大小在旋转期间始终按预期缩放。

这可能是我错过的东西`UIWebView`，希望有知识的人可以帮助解释这一点。

此外，上述问题出现在我的 iPhone 5 iOS 6.1 测试设备上。如果您发现或没有发现任何类似问题，请发表评论。希望知道它是否仅与此特定手机（或其设置）相关联。

**最近更新 ：**

上述问题应该与项目（早在 iOS 6 可用之前就开始了）的布局方式有关。正如在一些不同的基本设置中设置了一个带有 a`UIWebView`和 a的新测试项目`UIView`一样，旋转期间的文本自动调整大小在 ios 5 和 6 中似乎都可以。上述问题可能是由于使用了自定义布局调整代码，这很好仅在 iOS 5 中。真希望 2 个 ios 版本之间有更多的兼容性。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T12:04:23.523

请使用视点设置查看ios 5和ios 6的区别

# android - 操作栏子菜单不适用于 actionLayout

> ID：14933088
> 
> 赞同：6
> 
> 时间：2013-02-18T09:31:38.870
> 
> 标签：android, drop-down-menu, menu, android-actionbar, submenu

您好我正在开发一个安卓应用程序。在我的应用程序中，我使用的是 ActionBarSherlock。我在操作栏中定义了几个菜单项，方式如下：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:id="@+id/card_menu"
     android:title="cards" 
     android:showAsAction="always"
     android:actionLayout="@layout/action_button"
  >
         <menu>
             <item android:id="@+id/C1"
              android:title="C1" />
             <item android:id="@+id/C2"
              android:title="c2" />
             <item android:id="@+id/C3"
               android:title="C3" />
         </menu>
 </item>
<item android:id="@+id/notification"
      android:title="Notifications"
      android:showAsAction="always"
      android:actionLayout="@layout/notification_icon"
      android:icon="@drawable/notification"
 />

<item android:id="@+id/filter"
      android:icon="@drawable/filter"
      android:title="Filter" 
      android:showAsAction="always"
 /> 
```

现在，一切都显示得很好，但我的问题是，当我单击一个 card_menu 项目时，我定义了子菜单并定义了一个动作布局；它没有显示那些子菜单。
我的其他菜单项工作正常。只有当我为包含子菜单的项目定义操作布局时，我才能显示子菜单。
如果我删除动作布局，那么它工作正常......

我知道如果我们为一个项目定义一个动作布局，那么我们必须手动处理点击监听器。我是通过以下方式做到的：

```
final MenuItem item = menu.findItem(R.id.card_menu);
        item.getActionView().setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            onOptionsItemSelected(item);
            Toast.makeText(getActivity(), "click on menu", Toast.LENGTH_SHORT).show();
        }
        }); 
```

我能够处理该项目的点击事件，但无法显示下拉子菜单项..

如何解决这个问题呢？如何打开我的子菜单？

需要帮助....谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-23T11:11:53.933

我遇到了类似的问题，并通过在操作栏中使用 Spinner 的技巧解决了它。所以我在 res/menu 中的操作栏布局是（action_share 很重要）：

```
<item android:id="@+id/action_share"
    android:showAsAction="always"
    android:actionLayout="@layout/actionbar_spinner_export" /> 
```

在我的 res/layout 文件夹中，我放入了 actionbar_spinner_export：

```
<Spinner xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/sp_export"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@drawable/actionbar_item_selector" /> 
```

然后在 onCreateOptionsMenu 中，我得到了这个微调器并向其中添加了一个自定义 ArrayAdapter。我只能在 c# 中发布代码，因为我正在使用 Xamarin.Android 跨平台开发。但对于 Java 来说几乎是一样的：

```
IMenuItem spinnerExport = menu.FindItem(Resource.Id.action_share);
        _sp_export = spinnerExport.ActionView.FindViewById<Spinner>(Resource.Id.sp_export);
        _sp_export.Adapter = new ExportAdapter(_parent, Resource.Layout.actionbar_export_row, new List<String>{"Drucken", "Als PDF", "Als Text", "Als Tabelle"}); 
```

然后在我的自定义 ExportAdapter 中，我输入了我想要显示的 getView 图像（在本例中为共享图标）。在 getDropDownView 中，我放置了所有物品。这是代码：

```
class ExportAdapter : ArrayAdapter
{
    private List<String> _objects = null;
    private Context _context = null;

    public ExportAdapter(Context context, int resourceId, List<String> objects) : base(context, resourceId)
    {
        _context = context;
        _objects = objects;
    }

    public override View GetView (int position, View convertView, ViewGroup parent)
    {
        convertView = ((Activity) _context).LayoutInflater.Inflate(Resource.Layout.actionbar_export_row, parent, false);

        TextView tv_text = convertView.FindViewById<TextView>(Resource.Id.tv_text);
        ImageView iv_image = convertView.FindViewById<ImageView>(Resource.Id.iv_image);

        RelativeLayout.LayoutParams lp_iv = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WrapContent, RelativeLayout.LayoutParams.WrapContent);
        lp_iv.AddRule(LayoutRules.CenterInParent);
        iv_image.LayoutParameters = lp_iv;
        iv_image.SetPadding(5,5,5,5);

        tv_text.Visibility = ViewStates.Gone;
        iv_image.SetImageResource(Resource.Drawable.ic_action_share);

        return convertView;
    }

    public override View GetDropDownView (int position, View convertView, ViewGroup parent)
    {
        convertView = ((Activity) _context).LayoutInflater.Inflate(Resource.Layout.actionbar_export_row, parent, false);

        TextView tv_text= convertView.FindViewById<TextView>(Resource.Id.tv_text);
        tv_text.Text = _objects.ElementAt(position);

        return convertView;
    }

    public override int Count {
        get {
            return _objects.Count();
        }
    }

    public String getItemAtIndex(int position)
    {
        return _objects.ElementAt(position);
    }
} 
```

这样，我就有了一个动作栏图标，它看起来像一个真正的动作栏项目。当我点击它时，我的微调器中的项目就会出现。

# c# - 日期时间选择器自定义格式

> ID：14933090
> 
> 赞同：6
> 
> 时间：2013-02-18T09:31:47.430
> 
> 标签：c#

这是我的代码：

```
dateTimePicker1.ShowUpDown = true;

dateTimePicker1.CustomFormat = "HH:MM";

dateTimePicker1.Format = System.Windows.Forms.DateTimePickerFormat.Custom; 
```

嗨，我使用自定义格式， `dateTimePicker`直到不显示第二个，但它的格式在 dateTimePicker 中隐藏 AM/PM 如何以这种格式显示 AM/PM

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T09:33:21.363

只需添加`tt`.`AM/PM`

```
dateTimePicker1.CustomFormat = "HH:mm tt" 
```

它应该是`mm`几分钟。

*   [自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# javascript - javascript clonenode() 方法不适用于 safari

> ID：14933092
> 
> 赞同：0
> 
> 时间：2013-02-18T09:31:52.267
> 
> 标签：javascript

我的代码与 IE 完美配合，但它不适用于 safari.Clonenode() 方法在 safari 中不起作用。我有这样的代码

```
function ApplyNowWizard_addVehicleTypeList(vehicleDOM) 
{
        oParent = $(this.data).get(0);
        oParent.documentElement.appendChild(vehicleDOM.cloneNode(true).documentElement);
 } 
```

在 safari vehicleDOM.cloneNode(true).documentElement 中给出 null。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:42:33.467

作为`documentElement`一个`Document`字段，我认为`vehicleDOM`必须是一个`Document`. 请注意关于 DOM 规范的注释[`cloneNode`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-3A0ED0A4)：

> 而且，克隆`Document`、`DocumentType`、`Entity`和`Notation`节点是依赖于实现的。

*由于无论如何*您真正想要的是文档元素的克隆，因此听起来您最好克隆它而不是`Document`：

```
oParent.documentElement.appendChild(vehicleDOM.documentElement.cloneNode(true)); 
```

# javascript - mozIStorageConnection 和异步 lastInsertRowID

> ID：14933093
> 
> 赞同：1
> 
> 时间：2013-02-18T09:31:54.533
> 
> 标签：javascript, sqlite, firefox-addon, xpcom

文档中[指出](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/mozIStorageConnection#Attributes)，在异步模式下工作时我们不能依赖 lastInsertRowID 属性。实际上，在向数据库中插入 1K 条记录时，“handleCompletion”函数中的 lastInsertRowID 属性始终等于 1K。有什么方法可以异步获取最后插入的 id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:56:57.307

我认为不可能[获得有意义的 rowid](http://www.sqlite.org/c3ref/last_insert_rowid.html)

# jquery - jQuery Mobile 滑动不起作用

> ID：14933095
> 
> 赞同：8
> 
> 时间：2013-02-18T09:31:56.907
> 
> 标签：jquery, jquery-mobile

我正在为一个项目创建自己的图片库。为此，我需要滑动事件。所以在 jsfiddle 上找到了下面的代码。插入所有必要的文件。它显示了列表和所有..但是滑动仍然不起作用.? 我在正确的地方编写 jquery 代码吗？还是有什么不对？这是我的代码：

```
 <html>
        <head>
        <meta charset="utf-8" />
        <title>Home</title>
        <!-- Meta viewport tag is to adjust to all Mobile screen Resolutions-->
        <meta name="viewport"
            content="width=device-width, initial-scale=1, maximum-scale=1" />

        <link rel="stylesheet" type="text/css" href="Css/style.css" />
        <link rel="stylesheet" type="text/css" href="Css/Jstyle.css" />
        <link rel="stylesheet" type="text/css" href="Css/jquery.mobile.theme-1.2.0.css" />
        <link rel="stylesheet" type="text/css" href="http://code.jquery.com/mobile/1.0b2/jquery.mobile-1.0b2.min.css" />

        <script type="text/javascript" src="Javascript/jquery1.js"></script>
        <script type="text/javascript" src="Javascript/jquery2.js"></script>
        <script type="text/javascript" src="css/jq1.6.2.js"></script>

        <script type="text/javascript">
        $("#listitem").swiperight(function() {
            $.mobile.changePage("#page1");
        });
        </script>  

        </head>
        <body>

            <div data-role="page" id="home"> 
            <div data-role="content">

                    <ul data-role="listview" data-inset="true">
                        <li id="listitem"> Swipe Right to view Page 1</a></li>
                    </ul>

            </div>
        </div>

        <div data-role="page" id="page1"> 
            <div data-role="content">

                <ul data-role="listview" data-inset="true" data-theme="c">
                    <li id="listitem">Navigation</li> 

                </ul>

                <p>
                     Page 1
                </p>
            </div>
        </div>

        </body> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T09:39:30.327

尝试使用`pageinit`jQuery mobile 的处理程序：

```
$(document).on('pageinit', function(event){
   $("#listitem").swiperight(function() {
        $.mobile.changePage("#page1");
    });
}); 
```

[**pageinit**](http://jquerymobile.com/demos/1.2.0/docs/api/events.html) @ jquery mobile 的文档。

从文档：

[**看看配置默认值**](http://jquerymobile.com/demos/1.2.0/docs/api/globalconfig.html)

> 因为 jquery-mobile 事件会立即触发，所以您需要在加载 jQuery Mobile 之前绑定您的事件处理程序。按以下顺序链接到您的 JavaScript 文件：
> 
> ```
> <script src="jquery.js"></script>  
> <script src="custom-scripting.js"></script>
> <script src="jquery-mobile.js"></script> 
> ```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-06-17T02:58:14.213

这也让我发疯了。我不必像上一篇文章中建议的那样使用 .on('pageinit') 。原来我的语法在我的 JQuery 中是正确的，但 CASE SENSITIVTY 是我的问题。'swiperight' 不起作用，但 'swipeRight' 起作用了！下面的代码对我有用，还解决了在移动浏览器中滑动阻止文档向上和向下滚动的问题。确保单独指定 swipeRight 和 swipeLeft 方法，而不是一个通用的“swipe”类，你就可以开始了！* 注意底部的 Exclude Elements 行，注意我从列表中删除了“span”，以允许在常用的 span 元素上滑动。

```
$(function() {  

      $('.yourclassname').swipe( 
      {
        swipeLeft:function(event, direction, distance, duration, fingerCount) 
        {
            // do your swipe left actions in here, animations, fading, etc..
            alert(direction);
        },
        swipeRight:function(event, direction, distance, duration, fingerCount) 
        {
            // do your swipe right actions in here, animations, fading, etc..
            alert(direction);
        },
        threshold:4,
        // set your swipe threshold above

        excludedElements:"button, input, select, textarea"
        // notice span isn't in the above list
      });
}); 
```

# iphone - 使用 iOS 5 应用程序从 .Net Web 服务消费和解析 JSON 数据

> ID：14933097
> 
> 赞同：1
> 
> 时间：2013-02-18T09:32:05.167
> 
> 标签：iphone, ios, objective-c, json, web-services

我的 .Net 网络服务网址是：http: [//xx.xx.xx.xxx/iOSCalender/service1.asmx](http://xx.xx.xx.xxx/iOSCalender/service1.asmx)，它有一个名为：“getDataFromMaster”的方法名称，它返回 JSON 数据如下（我不知道为什么不同的浏览器显示不同的输出）：

从 safari 运行时：

```
[
{
    "Training_Code": "1234 ",
    "Training_Duration": "2hrs ",
    "Training_Startdate": "14/02/2013 15:00:00",
    "Training_Enddate": "14/02/2013 17:00:00",
    "Trainer_ID": 1,
    "Training_Location": "B-Wing Training room-4",
    "Comments": "C# training",
    "Keyword": "C#1234",
    "NumberofDays": 1
},
{
    "Training_Code": "4321 ",
    "Training_Duration": "16 ",
    "Training_Startdate": "17/02/2013 10:30:00",
    "Training_Enddate": "17/02/2013 17:30:00",
    "Trainer_ID": 2,
    "Training_Location": "A-Wing Training Room-6",
    "Comments": "Objective-C",
    "Keyword": "Obj-C4321",
    "NumberofDays": 2
}
] 
```

从 IE 运行时：

```
<?xmlversion="1.0"encoding="UTF-8"?><stringxmls="http://tempuri.org/">
[
{
    "Training_Code": "1234 ",
    "Training_Duration": "2hrs ",
    "Training_Startdate": "14/02/2013 15:00:00",
    "Training_Enddate": "14/02/2013 17:00:00",
    "Trainer_ID": 1,
    "Training_Location": "B-Wing Training room-4",
    "Comments": "C# training",
    "Keyword": "C#1234",
    "NumberofDays": 1
},
{
    "Training_Code": "4321 ",
    "Training_Duration": "16 ",
    "Training_Startdate": "17/02/2013 10:30:00",
    "Training_Enddate": "17/02/2013 17:30:00",
    "Trainer_ID": 2,
    "Training_Location": "A-Wing Training Room-6",
    "Comments": "Objective-C",
    "Keyword": "Obj-C4321",
    "NumberofDays": 2
}
]</string> 
```

我正在尝试从我的 iOS 应用程序中解析 JSON，如下所示：

```
-(void)loadCalendarView
{
    if(x==0)
    {
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Failed" message:@"Authentication failed" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    }
else if(x==1)
{
   [self ParseJSONdataFromMasterTraining];

        [self.navigationController pushViewController:self.viewController animated:YES];

}
}

-(void)ParseJSONdataFromMasterTraining
{

dispatch_sync(kBgQueue, ^{NSData *data = [NSData dataWithContentsOfURL:URLMasterTraining];
     [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
});
}

-(void)fetchedData:(NSData*)responseData
{
NSError *err;
NSDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&err];
NSLog(@"jsonDict = %@",json);
NSArray *trainingDetails = [json objectForKey:@"iOSCalender"];
NSLog(@"getDataFromTrainingMaster = %@",trainingDetails);

} 
```

我无法获取数据，我的“trainingDetails”显示为空。

注意：我为此尝试了“dispatch_sync”和“dispatch_async”方法，但仍然遇到同样的问题。

任何人都可以指导我，我要去哪里以及如何纠正这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:46:56.427

好的，您的示例 JSON 是一个字典数组。您获取 iOSCalendar 的代码将不起作用并且应该引发错误，因为数组没有 objectForKey: 那就是如果您在 JSON 对象中获取某些内容。

您是否查看了错误变量。如果你得到一个空值，你应该看看。

您可以将 NSData 输出为字符串。

```
NSString *s = [NSString alloc] initWithData: responseData encoding: NSUTF8String]; 
```

打印出来看看你得到了什么。只需查看您的数据输出，您就会得到一些以

```
<html 
```

那不是 JSON

# configuration - phpunit 默认测试目录（用于 travis 集成）

> ID：14933100
> 
> 赞同：3
> 
> 时间：2013-02-18T09:32:22.847
> 
> 标签：configuration, phpunit, travis-ci

我有一个想要与 travis 集成的[github 项目。](https://github.com/tkoomzaaskz/SymfonyWorld)目前我执行我的测试：

```
phpunit tests 
```

命令。我想让测试执行：

```
phpunit 
```

因为特拉维斯需要它。我想这是一个`phpunit.xml.dist`文件问题，但我不知道如何设置它。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T09:39:52.247

这应该告诉你答案：[https ://github.com/travis-ci/travis-ci-php-example/blob/master/.travis.yml](https://github.com/travis-ci/travis-ci-php-example/blob/master/.travis.yml)

如果该链接不再存在，请在您的 .travis.yml 中包含以下行：

```
# omitting "script:" will default to phpunit
# use the $DB env variable to determine the phpunit.xml to use
script: phpunit --configuration phpunit_$DB.xml --coverage-text 
```

# javascript - VS2012 javascript intellisense 仅适用于显式调用

> ID：14933109
> 
> 赞同：3
> 
> 时间：2013-02-18T09:32:48.843
> 
> 标签：javascript, visual-studio-2012, resharper, intellisense

我正在尝试使新的 vs2012 javascript 智能感知工作。

起初我注意到它不起作用，因为启用了 resharper 智能感知。我试图完全暂停 resharper，我得到了更好的情况，但仍然有问题。

我添加了带有几个引用（jquery 和 angularjs）的 _references.js 文件。我在选项中切换到隐式（网络）设置，以便它读取 _references.js 文件。

我添加了一个空的 js 文件。Intellisense 仅在我 CTRL+SPACE（用于方法和类型列表）或 CTRL+SHIFT+SPACE（用于方法参数列表）时出现，但在我开始键入时不会出现，也不会在我键入点或打开圆括号时出现。

我真的不知道有什么问题。Resharper 不碍事，所以一切都应该正常工作。

版本是 Vs2012 premium 11.0.50727.1 RTMREL。

安装的其他扩展：

*   Web 开发人员工具（我还在另一台计算机上获得了 Web 开发人员速成版，并且在该安装中智能感知工作正常）
*   Web Essentials 2012（已禁用）
*   适用于 Javascript 的 Windows 库的 Visual Studio 扩展（我无法禁用或卸载）
*   Git 源代码控制提供程序（我几乎不认为可能相关）
*   xUnit.net runner for visual studio 2012（同样，几乎不相关）

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T17:20:56.280

ReSharper intellisense 和 Visual Studio intellisense 是两个完全不同的野兽。

如果您在使用 ReSharper intellisense 时遇到问题，请描述您遇到的问题类型。它可以与 Ctrl-Space 一起使用吗？如果它有效，但它没有被自动调用，那么请检查`ReSharper | Options -> Environment | Intellisense | Autopopup`.

如果您更喜欢 Visual Studio intellisense，请在此处`ReSharper | Options -> Environment | Intellisense | General`选择`Limited ReSharper intellisense`并关闭 JavaScript。然后确保`Tools | Options -> Text Editor | JavaScript | General -> Auto list members`已打开。

# c# - 指定的强制转换无效。（数据表中的整数值）

> ID：14933125
> 
> 赞同：2
> 
> 时间：2013-02-18T09:33:50.487
> 
> 标签：c#, asp.net, casting, datatable, null

我想针对 null 检查数据表中的以下字段：

```
r.Field<int>("prod_type")

if (r.Field<int>("prod_type") != null && 
    !string.IsNullOrEmpty(r.Field<int>("prod_type").ToString())) 
```

但我得到以下异常：

> 指定的演员表无效。

如何检查数据表中的整数值是否为空或空？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T09:37:18.750

[`Field`](http://msdn.microsoft.com/en-us/library/bb360891.aspx)扩展方法支持可为空的类型。用于[`HasValue`](http://msdn.microsoft.com/en-us/library/sksw8094.aspx)检查可空对象是否不为空：

```
if (r.Field<int?>("prod_type").HasValue) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:35:39.270

您收到的错误表明数据表中的字段**不是 type`int`**。如果它是类型`int`，它不能保存 null 值，你可以试试`int?`哪个是[Nullable](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)。

```
r.Field<int?>("prod_type") != null 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T09:37:20.753

如果`prod_type`确实是`int`数据库中的一个字段，请尝试这样做：

```
if (r.Field<int?>("prod_type") != null) 
```

# c# - 在不同的机器上使用 Web 服务（如何移植服务和客户端）

> ID：14933126
> 
> 赞同：0
> 
> 时间：2013-02-18T09:33:59.463
> 
> 标签：c#, .net, web-services, visual-studio

我已经使用 .net (c#) 创建了一个 Web 服务。我有一个服务器程序和一个客户端程序。这在我的本地系统中运行良好。（即使我运行客户端 exe）

但是，当我将客户端 exe 提供给其他系统（通过 LAN 与我的系统连接）时，该服务没有得到处理。我的网络服务在我的机器上持续运行（服务器）。

我按照[http://sarangasl.blogspot.in/2010/09/create-simple-web-service-in-visual.html](http://sarangasl.blogspot.in/2010/09/create-simple-web-service-in-visual.html)链接创建服务器和客户端（Web 服务）。

所以现在的问题是我如何移植我的客户端或其他人如何使用我的网络服务器？

如何修复此错误我尝试使用添加引用选项，但我不知道在哪里、添加什么以及如何添加...该程序集在哪里？

或者我还能尝试什么？

# ios - 在某些单元格上禁用 UITableView 滚动

> ID：14933129
> 
> 赞同：5
> 
> 时间：2013-02-18T09:34:05.243
> 
> 标签：ios, uitableview, scroll, touch

在 iOS 6 中，我有一个 UITableView，启用了拉动刷新。在顶部单元格中，我有几个自定义控件，用户可以通过拖动圆形滑块进行交互（请参阅此[示例](http://www.thinkandbuild.it/how-to-build-a-custom-control-in-ios/)）。看截图...

![在此处输入图像描述](../Images/3c236e530b298584a282e62a89997289.png)

控件需要一个标签，并且需要拖动滑块指示器，但它们可能很难抓住，因为点击似乎经常出现在单元格背景上，导致表格拖动开始。

如果点击事件发生在这些控件的任何位置，我想禁用表格的默认滚动。我能想到的两个选择：

1.  为该顶部单元格中的任何事件禁用表格拖动
2.  确保控件处理更大区域的事件，特别是在它们具有透明背景的部分

关于如何实现其中任何一个的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-27T09:48:54.600

我曾经继承`UIControl`并覆盖这些函数：

```
override func continueTracking(_ touch: UITouch, with event: UIEvent?) -> Bool { }

override func endTracking(_ touch: UITouch?, with event: UIEvent?) {}

override func beginTracking(_ touch: UITouch, with event: UIEvent?) -> Bool {} 
```

这种圆形滑块样式对我来说效果很好。

如果仍然不起作用，您可以尝试在上述方法中打开/关闭可滚动的 tableView。

```
tableView.isScrollEnabled = false / true 
```

# ios - ios6 mapview在airPlane模式下无法显示UserLocation

> ID：14933130
> 
> 赞同：1
> 
> 时间：2013-02-18T09:34:05.513
> 
> 标签：ios, mkmapview

在ios6中，我选择飞行模式并打开wifi，我在mapview中看不到蓝点，但在ios5中，它很好。我应该怎么办？请帮忙，谢谢！

```
map = [[MKMapView alloc] initWithFrame:self.view.frame];
map.userTrackingMode = MKUserTrackingModeFollow;
map.showsUserLocation = YES;
[self.view addSubview:map]; 
```

PS：iphone应该喜欢iTouch的，我的app在iTouch5上可以正常运行，在iphone5上运行不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:34:03.890

飞行模式会关闭蜂窝芯片，该芯片与 GPS 芯片位于同一电路上，因此您直接失去了精确的定位服务。它也会关闭wifi，但您可以进入wifi设置并手动将其重新打开。根据您连接到 iOS 的 wifi 热点，可能能够确定您所在的位置，因为 Apple 与 SkyHook 有一些连接，其中包含 wifi 路由器 ID 及其位置列表。由于 wifi 是短距离的，如果他们的列表中有它，他们可以将您定位在距离发射器 50 英尺左右的范围内。

如果您不在 wifi 发射器附近，或者您无法加入网络，则您的设备无法回叫 Apple 以询问该 wifi 发射器的坐标。因此它不知道你在哪里。

# java - 如何查找列表中使用的类的名称

> ID：14933136
> 
> 赞同：1
> 
> 时间：2013-02-18T09:34:27.040
> 
> 标签：java, generic-list

我有一个 Struts2 Action 类

有getter/setter`java.util.List list;`

但我不知道它的泛型`List<?> list;`

我这里有代码：

```
 public class Test
 {
    private List list;

    public List getList() {
        return list;
    }

    public void setList(List list) {
        this.list = list;
    }

    public String execute()throws Exception
    {
       for(int i=0;i<list.size();i++)
       {
           //how can print here list
           // in this situation i have List<Detail> list
           // filed is id ,username,password
           // but i want to print dynamically get class name and then filed name and then print list
       }
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:41:03.647

首先，您应该使该方法成为泛型方法，而不仅仅是使用 List。大致如下

```
public void parseList(List<T> list) {
    for (T list_entry : list) {
        System.out.println("File name: "+list_entry.getClass());
        System.out.println("List entry: " + list_entry);
    }
} 
```

我意识到这对实际打印文件名没有多大帮助，但它确实可以帮助您从列表中获取对象的运行时类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:19:55.447

是`List`一个通用类。但是你应该知道你在这个泛型类中使用了什么类型。如果你`List`在循环中使用（你的情况），`for`那么你应该写

```
for(Object o: list){
  if (o instanceof Detail){ //you can omit it if you 100% sure it is the Detail
   Detail d = (Detail)o; //explicitly typecast 
   //print it here 
  }
} 
```

但最好将`list`属性专门化以 100% 确定它是`Detail`s 列表

```
private List<Detail> list;

public List<Detail> getList() {
    return list;
}

public void setList(List<Detail> list) {
    this.list = list;
} 
```

那么你可以使用

```
for(Detail d: list){
   //print it here 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:39:04.253

作为之前发布的答案，您可以使用“for each”循环：

```
for(Object element : list) {
 System.out.println("Class of the element: " + element.getClass());
 // If you want to do some validation, you can use the instanceof modifier
 if(element instanceof EmployeeBean) {
  System.out.println("This is a employee");
  // Then I cast the element and proceed with operations
  Employee e = (Employee) element;
  double totalSalary = e.getSalary() + e.getBonification();
 }
} 
```

如果你想用“for while”循环来做：

```
for(int i = 0; i < list.size(); i++) {
 System.out.println("Element class: " + list.get(i).getClass());
 if (list.get(i) instanceof EmployeeBean) {
  EmployeeBean e = (EmployeeBean) list.get(i);
  // keep with operations
 }
} 
```

# google-apps-script - 如何拆分表单条目并替换单元格中的文本

> ID：14933138
> 
> 赞同：0
> 
> 时间：2013-02-18T09:34:38.680
> 
> 标签：google-apps-script, google-sheets

我有一个表格，可以作为我的 NGO 接收志愿者团队的申请表。我想做的是创建一个脚本，在有人填写表格后向注册商发送电子邮件。这是我知道怎么做的简单部分。

我想在“电子邮件通知”中包含一些问题的关键答案，供注册商查看。这我也知道如何完成。

这是我当前有效的代码：

```
function Team_ApplicationMailer(e) {
   var recipient = "myemail@gmail.com";
   var timestamp = e.values[0];
   var name = e.values[3];
   var country = e.values[1]
   var subject = e.values[1]+' wants to Volunteer!' ;
   var startdate = e.values[12];
   var enddate = e.values[13]
   var hyperlink = "mylink.com"
   htmlBody = '<u><strong>'+name+'</u></strong> from: <u><strong>'+country+'</strong></u>just completed the Teams Application Form for these dates: <u><strong>'+startdate+' to '+enddate+'</u></strong><br><br>Form completed on: <u><strong>'+timestamp+'</u></strong><br><br>View the Form: <a href="'+hyperlink+'">Click Here</a>';
MailApp.sendEmail(recipient, subject, htmlBody, {htmlBody:htmlBody});
} 
```

这是我想添加的棘手部分：我还想添加在 e.values[19] 和 e.values[20] 中找到的数据，但这些值来自多项选择 (e.values[19]) 或复选框(e.values[20]) 并且我需要简化的值——即删除一些文本——并且可能在通过电子邮件发送时拆分。

这两个问题基本相同。e.values[19] 是“你想做什么：第一优先级”，带有一些多项选择。并且 e.values[20] 是带有一些复选框选项的“您还想做什么”。两个问题都有相同的 7 个选项，每个选项都有很长的描述（因此需要缩短）

基本上我想要 e.values[19] 的值如下所示：

optionX：（详细说明）

在电子邮件中看起来像这样：

你想做什么：optionX。

我不希望包含“（）”中选项的长描述。

对于 e.values[20] 我希望这些值在电子邮件中看起来像这样：

你还想做什么：选项A，选项B，选项C

取而代之的是：

选项A：（详细说明），选项B：（详细说明），选项C：（详细说明）

我研究了 .replace 和 .split 函数，但不知道如何使它们一起工作，尤其是对于复选框选项。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:29:16.190

我为此写了一个函数。它只是删除括号内的任何内容`()`。这似乎是您正在寻找的。

```
var s = e.values[19];
s = s.replace(/\([^)]*\)/g,""); 
```

如果括号内有括号，请告诉我，我将不得不进行快速编辑。

那么这里发生了什么。

1.  它正在寻找一个`(`.
2.  它在最后匹配 a 的同时寻找尽可能多的字符`)`。这是没有`)`内部的。
    *   如果你允许一个`)`inside，它会匹配`optionA:`**`(...), optionB: (...), optionC: (...)`**。我们想避免这种情况，所以我们不允许`)`进入。就是这个`[^)]`意思。
3.  该`g`标志意味着匹配“全局”或字符串中的任何地方。

# sql - 根据另一个表中的值对表进行排序

> ID：14933141
> 
> 赞同：0
> 
> 时间：2013-02-18T09:34:40.473
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个表名“产品”

```
ProductID   ProductName
1           A
2           B
3           C
4           D 
```

另一个名为“ViewedProduct”的表

```
ProductID    Views    UserID
2            2        55
2            1        40
1            10       40
1            50       127.0.1
3            51       127.0.1 
```

对于 UserID 55，预期结果应该是

```
ProductID    ProductName
2            B
1            A
3            C
4            D 
```

UserID 55 视图应位于顶部，所有其他 viewdproduct 应按其视图总和排序。产品 id 1 由两个不同的 UserID 查看，他们的总查看次数是 60，这就是为什么它应该排在第二位的原因。并且产品 id 3 有 51 次浏览，它应该排在第三位。

> **第二个例子：**

```
 ProductID    Views    UserID
    2            2        55
    3            3        55
    2            1        40
    1            10       40
    1            50       127.0.1
    3            51       127.0.1
    4            50       127.0.1 
```

现在对于 UserID 55 ，它应该首先根据 UserID 55 对结果进行排序。然后是其余的结果。现在我需要的预期结果应该是

```
ProductID    ProductName
3            C
2            B
1            A
4            D 
```

产品 ID 3 和 2 不在首位，因为 UserId 55 分别查看了 3 次和 2 次，productid 1 排在第三位 UserID 55 没有查看此产品。但他们从查看表中获得的总浏览量为 60。而 productID 4 排在最后，因为用户 ID 55 尚未查看此产品，但从查看表中获得的总浏览量为 50。依此类推。

-- 如果您需要进一步解释，请发表评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:57:35.447

目前尚不清楚您在这里要问什么，但如果您想从其中一个表返回结果并按另一个表中的列对其进行排序，只需在主表和包含您要排序的列的表之间创建一个连接。这将允许您对连接表中的列进行排序。

```
SELECT Product.ProductID, Product.ProductName
FROM Product
LEFT JOIN ViewedProduct ON Product.ProductID = ViewedProduct.ProductID
ORDER BY ViewedProduct.UserID 
```

但是，这不会返回您期望的结果，因为 UserID 55 没有查看 ProductID 1 或 3，并且排序只会按升序或降序排序。

如果您希望通过 UserID 55 查看产品，则需要一个 where 子句：

```
SELECT Product.ProductID, Product.ProductName
FROM Product
LEFT JOIN ViewedProduct ON Product.ProductID = ViewedProduct.ProductID
WHERE ViewedProduct.UserID = 55 
```

这只会返回一行，除非数据多于样本中的数据。

如果您想按观看次数排序，请尝试以下操作：

```
SELECT Product.ProductID, Product.ProductName
FROM Product
LEFT JOIN ViewedProduct ON Product.ProductID = ViewedProduct.ProductID
WHERE ViewedProduct.UserID = 55
ORDER BY ViewedProduct.Views 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:00:19.250

我已经编辑了查询以在 join 子句中包含用户 ID，因为我认为这是必要的。在这里看小提琴：[http ://www.sqlfiddle.com/#!3/0ef18/1](http://www.sqlfiddle.com/#!3/0ef18/1)

```
SELECT
    Product.ProductID,
    Product.ProductName
FROM
    Product
    LEFT JOIN ViewedProduct ON Product.ProductID = ViewedProduct.ProductID AND ViewedProduct.UserID = @userID
WHERE
    ViewedProduct.UserID IS NULL
OR  ViewedProduct.UserID = @userID
ORDER BY
    CASE WHEN ViewedProduct.Views IS NULL THEN 0 ELSE ViewedProduct.Views END DESC,
    Product.ProductID 
```

按以下顺序订购：UserViews、AllViews、ProductID

使用以下内容：

```
SELECT
        Product.ProductID,
        Product.ProductName
    FROM
        Product
        LEFT JOIN ViewedProduct ON Product.ProductID = ViewedProduct.ProductID AND ViewedProduct.UserID = @userID
        LEFT JOIN 
        (SELECT
           ProductID,
           SUM(Views) AllViews
         FROM
           ViewedProduct
         GROUP BY
           ProductID) TotalViewedProduct ON Product.ProductID = TotalViewedProduct.ProductID
    ORDER BY
        CASE WHEN ViewedProduct.Views IS NULL THEN 0 ELSE ViewedProduct.Views END DESC,
        TotalViewedProduct.AllViews DESC,
        Product.ProductID 
```

# macos - 如何将 CSV 转换为多个列表（applescript）？

> ID：14933145
> 
> 赞同：2
> 
> 时间：2013-02-18T09:34:51.983
> 
> 标签：macos, list, csv, applescript

我已经为此研究了一段时间，但找不到解决方案。我有一个 CSV，例如以下数据：

1,2,3,a,b,c,4,5,6,d,e,f,7,8,9,0
0,9,8,g,h,i,7,6,4,k ,l,m,5,4,3,2
等...

除了某些为真或假的字段外，每一行都包含大部分不同的数据。

我需要的是把每一行作为一个列表，然后能够解析数据。

我希望能够从所有列表中删除例如项目编号 3，然后保存要在电子表格中使用的数据。

请记住，我对 AppleScript 还比较陌生，所以还在努力尝试，已经购买了一本似乎在许多网站上都强烈推荐但尚未交付的书！:-)

此外，如果您知道另一种/更好的方法，那么我很乐意尝试。

目前我有以下内容：

> Blockquote -- 设置变量
> 将 LF 设置为 ASCII 字符 10
> -- 选择您的文件
> 将提示 1 设置为“请找到您的设备 CSV 文件...”
> 将 csvDevices 设置为“testfile.csv” -- 将 csvDevices 设置
> 为（选择带有提示提示的文件）
> -- 将文件读取到内存
> 设置 csvLines 以读取 csvDevices
> 将 AppleScript 的文本项分隔符设置为 {LF}
> 将 csvEntries 设置为 csvLines 的段落
> 将 AppleScript 的文本项分隔符设置为 {","}
> -- 过滤垃圾
> 将 csvNoTitle 设置为 csvEntries 的其余部分 -- 删除Title Line
> 设置 lineCount 计数 csvNoTitle

之后我可以打印出内容，但它会给我

{"1,2,3,a,b,c,4,5,6,d,e,f,7,8,9,0","0,9,8,g,h,i,7, 6,4,k,l,m,5,4,3,2","等..."}

而不是我想要的

{"1","2","3","a","b","c","4","5","6","d","e","f"," 7","8","9","0"}
{"0","9","8","g","h","i","7","6","4 ","k","l","m","5","4","3","2"}
{"etc..."}

顺便说一句，我删除了脚本中的第一行，因为它是一个没有实际有用数据的描述行，或者无论如何对我来说都不是。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T15:16:24.470

您应该将文本 CSV 文件分成记录（单行），然后将每条记录分成值（用逗号分隔）。您可以从将 CSV 文本文件转换为字符串 (csvLines) 的那一点开始。

```
-- getting records (you don't need to set applescript's text item delimiters here)
set recs to paragraphs of csvLines

-- getting values for each record
set vals to {}
set applescript's text item delimiters to ","
repeat with i from 1 to length of recs
    set end of vals to text items of (item i of recs)
end repeat

-- this is true
(item 1 of vals) = {"1","2","3","a","b","c","4","5","6","d","e","f","7","8","9","0"} 
```

这将解析整个文件而不进行过滤。但这只是为了给出正确 CSV 解析的想法。您已经知道如何过滤数据。

# c - 在多线程服务器中使用 epoll 和 EPOLLONESHOT 时的程序性能

> ID：14933148
> 
> 赞同：1
> 
> 时间：2013-02-18T09:35:12.483
> 
> 标签：c, multithreading, epoll

代码非常简单，因为我使用 EPOLLONESHOT 创建了一个领导者-从者多线程服务器程序。

我对其进行了测试，服务器直接回显。当qps达到150000时，12个工作线程进入D状态，但是服务器没有内存分配，磁盘根本不忙。

如果我继续为其添加更多测试客户端，服务器的 qps 将不会提高，它只会保持在 150000 qps。

这就是我的服务器所做的一切，测试客户端和服务器在同一台机器上通过 lo（不是物理网卡）交谈，每个 cpu 的 cpu 空闲为 60，但性能不再增加，瓶颈是什么这里 ？

```
epoll_wait(4, {{EPOLLIN, {u32=28, u64=28}}}, 1, 1000) = 1 <0.000051>
read(28, "hello world\n", 4096)         = 12 <0.000005>
write(28, "hello world\n", 12)          = 12 <0.000015>
epoll_ctl(4, EPOLL_CTL_MOD, 28, {EPOLLIN|EPOLLONESHOT, {u32=28, u64=4656724694760685596}}) = 0 <0.000033>
epoll_wait(4, {{EPOLLIN, {u32=14, u64=14}}}, 1, 1000) = 1 <0.000038>
read(14, "hello world\n", 4096)         = 12 <0.000005>
write(14, "hello world\n", 12)          = 12 <0.000013>
epoll_ctl(4, EPOLL_CTL_MOD, 14, {EPOLLIN|EPOLLONESHOT, {u32=14, u64=4656724694760685582}}) = 0 <0.000040>
epoll_wait(4, {{EPOLLIN, {u32=15, u64=15}}}, 1, 1000) = 1 <0.000056>
read(15, "hello world\n", 4096)         = 12 <0.000005>
write(15, "hello world\n", 12)          = 12 <0.000008>
epoll_ctl(4, EPOLL_CTL_MOD, 15, {EPOLLIN|EPOLLONESHOT, {u32=15, u64=4656724694760685583}}) = 0 <0.000047>
epoll_wait(4, {{EPOLLIN, {u32=33, u64=33}}}, 1, 1000) = 1 <0.000039>
read(33, "hello world\n", 4096)         = 12 <0.000004>
write(33, "hello world\n", 12)          = 12 <0.000019>
epoll_ctl(4, EPOLL_CTL_MOD, 33, {EPOLLIN|EPOLLONESHOT, {u32=33, u64=4656724694760685601}}) = 0 <0.000039>
epoll_wait(4, {{EPOLLIN, {u32=35, u64=35}}}, 1, 1000) = 1 <0.000042>
read(35, "hello world\n", 4096)         = 12 <0.000005>
write(35, "hello world\n", 12)          = 12 <0.000010>
epoll_ctl(4, EPOLL_CTL_MOD, 35, {EPOLLIN|EPOLLONESHOT, {u32=35, u64=4656724694760685603}}) = 0 <0.000042>
epoll_wait(4, {{EPOLLIN, {u32=8, u64=8}}}, 1, 1000) = 1 <0.000039>
read(8, "hello world\n", 4096)          = 12 <0.000006>
write(8, "hello world\n", 12)           = 12 <0.000007>
epoll_ctl(4, EPOLL_CTL_MOD, 8, {EPOLLIN|EPOLLONESHOT, {u32=8, u64=4656724694760685576}}) = 0 <0.000054>
epoll_wait(4, {{EPOLLIN, {u32=21, u64=21}}}, 1, 1000) = 1 <0.000034>

13283 work      15   0  636m 256m  308 R   19  0.4   4:33.09 server                                                                   
13288 work      15   0  636m 256m  308 D   19  0.4   4:33.27 server                                                                   
13286 work      15   0  636m 256m  308 D   17  0.4   4:32.60 server                                                                   
13287 work      15   0  636m 256m  308 D   17  0.4   4:34.72 server                                                                   
13280 work      15   0  636m 256m  308 D   15  0.4   4:33.20 server                                                                   
13281 work      15   0  636m 256m  308 D   15  0.4   7:50.35 server                                                                   
13282 work      15   0  636m 256m  308 R   15  0.4   4:33.14 server                                                                   
13290 work      15   0  636m 256m  308 R   15  0.4   4:31.80 server                                                                   
13279 work      15   0  636m 256m  308 D   13  0.4   4:24.11 server                                                                   
13285 work      15   0  636m 256m  308 D   13  0.4   4:32.91 server                                                                   
13289 work      15   0  636m 256m  308 D   13  0.4   4:32.34 server                                                                   
13284 work      15   0  636m 256m  308 D   12  0.4   4:31.70 server                                                                   
14042 work      16   0  2380  344  280 S   10  0.0   1:46.98 test_long_conn                                                           
 6403 work      16   0  3692  580  416 S   10  0.0   0:00.12 grep                                                                     
13915 work      16   0  2380  344  280 S    8  0.0   1:47.42 test_long_conn                                                           
13930 work      16   0  2380  344  280 R    8  0.0   1:49.59 test_long_conn                                                           
13945 work      16   0  2380  344  280 S    8  0.0   1:48.38 test_long_conn                                                           
13841 work      16   0  2380  344  280 S    6  0.0   1:36.61 test_long_conn                                                           
13847 work      16   0  2380  344  280 S    6  0.0   1:49.55 test_long_conn                                                           
13848 work      16   0  2380  344  280 S    6  0.0   1:48.75 test_long_conn                                                           
13849 work      16   0  2380  344  280 S    6  0.0   1:48.45 test_long_conn                                                           
13850 work      16   0  2380  344  280 S    6  0.0   1:48.74 test_long_conn                                                           
13913 work      16   0  2380  344  280 R    6  0.0   1:47.50 test_long_conn 
```

# java - 不同JVM版本的java序列化

> ID：14933149
> 
> 赞同：1
> 
> 时间：2013-02-18T09:35:12.473
> 
> 标签：java, object, serialization

我正在使用名为 easyChart 的 objectPlanet 的第 3 方工具来生成图形图表。他们提供了一个名为 Chart.jar 和 ChartServer.jar 的 jar 库

我在服务器端写了一个easyChart对象：

```
Chart chart = new BarChart();
... <create chart data here> ...
ByteArrayOutputStream bStream = new ByteArrayOutputStream();
ObjectOutputStream oStream = new ObjectOutputStream( bStream );
oStream.writeObject (chart);
byte[] byteVal = bStream.toByteArray();
String chartInString = Base64.encode(byteVal); 
```

并在客户端读回：

```
byte[] readByte = Base64.decode(chartInString);
ObjectInputStream ois = new ObjectInputStream(new ByteArrayInputStream(readByte));
Chart chart = (Chart) ois.readObject(); 
```

当服务器和客户端具有相同的 JVM 版本时，它可以正常工作。我意识到 GenericChart 实现了序列化（这个类在提供的 jar 中）。

既然我无法修改他们提供的 jar 类，我该如何克服这个问题？

非常感谢任何答复。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:32:34.207

存在的每个 Swing 类的 Javadoc 类中都有一个警告，即序列化版本将与其他 JDK 版本不兼容。所以，不要序列化它们。序列化模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:45:01.413

> 我无法读取 Chart 对象，它抛出了这个异常： java.io.InvalidClassException: javax.swing.JComponent; 本地类不兼容：流 classdesc serialVersionUID = -1030230214076481435，本地类 serialVersionUID = 5670834184508236790

实际上，这与 JVM 版本无关，而与运行时库有关。该类`javax.swing.JComponent`的更改方式使串行表示不兼容。

恐怕除了使用相同的版本之外，您无能为力。

# php - PHP：文本文件迭代器

> ID：14933152
> 
> 赞同：0
> 
> 时间：2013-02-18T09:35:21.440
> 
> 标签：php, parsing, text, stream

我想问你一些已知的 PHP 库，它们可以帮助我解析`*.txt`文件中的句子。我必须解析太大的文本文件，所以我决定做一个流解析器（逐句）。

我认为按句子迭代文件会很漂亮，例如：

```
foreach (new SentenceIterator("./data/huge.txt") as $sentence)
{
    // do something...
} 
```

主要思想是文件应该完全加载到内存中。

我试过的：

```
$f = fopen("./data/huge.txt", "r");
$dataBytes = 64;
$buffer = '';

while (!feof($f))
{
    $data = fread($f, $dataBytes);
    $dotPosition = strpos($data, '.');

    if (false !== $dotPosition)
    {
        $sentence = $buffer . substr($data, 0, $dotPosition);
        // correct cursor position
        fseek($f, -1 * $dotPosition, SEEK_CUR);
        // clear buffer
        $buffer = '';
        continue;
    }

    $buffer .= $data;
} 
```

但在这种情况下，我得到了损坏（中断）的句子。

有人可以建议我一些现有的库或者如何修复我的代码吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:48:12.387

对造成的不便表示歉意，

经过一番挖掘，我找到了解决方案，即... Spl lib ..

迭代器调用which `SplFileObject`implements`Iterator`和。它允许逐行读取文件。`RecursiveIterator``SeekableIterator`

更新和工作代码是：

```
$file = new SplFileObject('./data/test.txt');
$file->setFlags(SplFileObject::DROP_NEW_LINE | SplFileObject::SKIP_EMPTY);
$buffer = '';

foreach ($file as $lineNumber => $line)
{
    $dotPos = strpos($line, '.');
    if (false !== $dotPos)
    {
        $sentence = $buffer . substr($line, 0, $dotPos);
        echo $sentence . "\n";
        $buffer = substr($line, $dotPos);
        continue;
    }
    $buffer .= $line;
} 
```

# php - 将复选框值添加到 salesforce

> ID：14933154
> 
> 赞同：0
> 
> 时间：2013-02-18T09:35:30.660
> 
> 标签：php

我是销售人员集成的新手。

我有一个联系表格，其中有一个名为 Optin/Optout 的字段，它是复选框。如果用户勾选该复选框值应该在salesforce中被捕获。但我做不到。谁能帮助我。

这是我到目前为止所做的代码。

索引.php

```
<form action="salesforce.php">

<input type="checkbox" name="news" value="1" checked="checked"/>

</form> 
```

销售队伍.php

```
<?php
$newsletter = $_POST['news'];

if($newsletter == "1"){
$news_result = $newsletter;
}else{
$news_result = "0";
}

$req .= "&HasOptedOutOfEmail=" . urlencode($news_result);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:27:01.323

```
<input type="checkbox" name="emailOptOut" id="emailOptOut" value="1" /> 
```

这解决了我的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:40:51.750

你错过了表单中的方法，如果没有定义方法，它将是一个 get 方法，你使用 post 获取值

如果你这样做，它将起作用：

`<form action="salesforce.php" method="post">`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-09T18:33:24.953

尝试使用它对我有用：

```
apex:inputCheckbox value="{!news.isSelected}"
     selected="{!news.isSelected}" immediate="true" 
```

# matlab - matlab：重叠圆圈下的区域

> ID：14933155
> 
> 赞同：3
> 
> 时间：2013-02-18T09:35:31.490
> 
> 标签：matlab, geometry, coordinates, area

我有一个问题要问你...

想象一个大小为 A x A 的正方形。现在让我们模拟直径为 d 的圆，随机分布在这个正方形内，如下图所示（在这种情况下，d 是相同的，但不是规则，它们也可能是随机分布的在某个范围内，例如 d1 到 d2）。

![模拟示例](../Images/0eaf05a497e0688650c349d7c1d4a213.png)

假设圆圈在矩阵中描述为：

```
circles(1, :) = [x, y, d]; 
circles(2, :) = [x, y, d]; 
...and so on 
```

其中`x`，`y`是坐标，`d`是直径。现在的问题是，如何模拟这个圆圈，直到`c`达到给定的拥挤参数？`c`被简单地定义为：`c = yellow area / square area (in this case A^2)`。

第二件事-假设一切都是模拟的，我想检查某个坐标（x，y）是否在黄色区域之内或之外……怎么做？我是通过检查我的 (x,y) 是否在每个圆的区域内来做到这一点的（但是当我使用圆形而不是圆形时，它变得更加困难，即圆形矩形），但必须有一些更好的方法它。感谢帮助 ： ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:54:33.380

这是一种可以解决问题的方法：

1.  从一个大的空矩阵开始（大到足以保证生成的每个形状都完全在矩阵内）。假设我们这样做`color = zeros(100)`
2.  虽然我们还没有达到 coding ratio：一个圆的中点和直径，但我想你可以做到这一点
3.  更改圆圈中所有点的颜色，例如将其设置为 1。
4.  计算拥挤率（类似于`c = mean(mean(color))`

请注意，如果您只想使用矩阵的一部分（使形状部分掉出图片），例如可以通过`mean(mean(color(11:end-11))`在步骤 4 中使用来实现，忽略边缘附近的 10 个像素。

现在，如果您想知道点 (x,y) 是否为黄色，只需检查 的值`color(x,y)`。或者如果你想忽略边缘检查`color(x+10,y+10)`

# java - 实体管理器为连接列返回 null

> ID：14933158
> 
> 赞同：0
> 
> 时间：2013-02-18T09:35:34.957
> 
> 标签：java, jpa, entitymanager

我有三个表，一个主表 MAIN_TB 具有表 TCHARS 和 TSTATUSES 的外键，当我坚持 MAIN_TB 时，重新查询并显示保存的记录，连接的列（来自 TCHARS 的 tchars 和来自 TSTATUSES 的 t_status）为空，但数据已保存. 我能错过什么？

表 MAIN_TB

```
@JoinColumn(name = "T_STATUS", referencedColumnName = "T_STATUS")
@ManyToOne
private Tstatuses tStatus;

@JoinColumn(name = "T_CHAR", referencedColumnName = "T_CHAR")
@ManyToOne
private Tchars tChar; 
```

表 TCHARS

```
@OneToMany(mappedBy = "tChar")
private Collection<MainTb> mainTbCollection; 
```

表 TSTATUSES

```
@OneToMany(mappedBy = "tStatus")
private Collection<MainTb> mainTbCollection; 
```

代码

```
 public void saveMainTb(){
     MainTb mainTb = new MainTb();
     Tchars tchars = new Tchars();
     Tstatuses tstatuses = new Tstatuses();

     tchars.setTChar(new Short("1"));
     mainTb.setTChar(tchars);

     tstatuses.setTStatus(new Short("1"));
     mainTb.setTStatus(tstatuses);

     mainTb.setTName("test");
     em.persist(mainTb);

 } 
```

结果

```
 ![Result][1] 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:46:23.193

您可以将以下代码添加到您的**tStatus**和**tChar**中。

```
fetch=FetchType.EAGER 
```

如果您不需要获取上述 2 个对象，这将影响性能。

相反，您可以`fetch`在查询中添加该子句，以获取两个子对象（**tStatus**和**tChar**）以及您的`mainTb`对象。这将为您省去麻烦并获取您在`fetch`子句中指定的所有子对象。性能优化器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:41:36.693

因为在拥有方或反向方都没有指定级联。我认为您可以尝试以下代码来手动保存所有实体实例：

```
em.persist(tchars);
em.persist(tstatuses);
mainTb.setTChar(tchars);
mainTb.setTStatus(tstatuses);
em.persist(mainTb); 
```

# c# - 在 .NET 4 中异步执行工作

> ID：14933159
> 
> 赞同：0
> 
> 时间：2013-02-18T09:35:36.337
> 
> 标签：c#, multithreading, asynchronous

我有遗留代码在 UI 线程上执行一些非常长的操作。我想要做的是显示一个带有消息的进度条并在另一个线程上运行工作。不幸的是，现在我无法访问 VS2012，所以我不能使用**async**关键字。我编写了一些代码，可以很好地处理 0-1 参数的操作，并且使用**Action**没有返回值。但是当我尝试调整它以支持 Func 时，我在调用任务和返回 TResult 时遇到了一些问题。附件是我的原始代码，不胜感激。谢谢， 奥马尔

```
 public partial class FreeProgressBarFrm : System.Windows.Forms.Form
    {

        #region Members

        /// <summary>
        /// timer for the progress bar.
        /// </summary>
        private Timer m_Timer = new Timer();

        /// <summary>
        /// Delegate for the background operation to perform.
        /// </summary>
        private Action m_backgroundOperation;

        /// <summary>
        /// Standard operation to show the user while the operation is in progress.
        /// </summary>
        private static readonly string m_performingUpdatesMessage = IO_Global.GetResourceString("Performing updates, please wait", "Performing updates, please wait", null);

        #endregion

        #region Constructor

        /// <summary>
        /// Constructor
        /// </summary>
        /// <param name="backgroundDelegate"> Delegate for the background operation to perform</param>
        /// <param name="operationName">meessage to show the user while the operation is in progress.</param>
        public FreeProgressBarFrm(Action backgroundDelegate, string operationName)
        {
            InitializeComponent();
            m_backgroundOperation = backgroundDelegate;
            this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;
            this.lblOperation.Text = operationName;
            m_Timer.Interval = 1000;
            m_Timer.Tick += new EventHandler(m_Timer_Tick);

        }

        /// <summary>
        /// Constructor , for progressbar with defalt user message (performing updates, please wait).
        /// </summary>
        /// <param name="backgroundDelegate"> Delegate for the background operation to perform</param>
        /// <param name="operationName">operation display name</param>
        public FreeProgressBarFrm(Action backgroundDelegate): this(backgroundDelegate, m_performingUpdatesMessage)
        {
        }

        #endregion

        #region Methods

        /// <summary>
        /// Call this method to begin backgorund operation while
        /// showing the progress bar to the client.
        /// </summary>
        public void Wait()
        {
            ShowDialog(ControlsHelper.MainFrm);
        }

        /// <summary>
        /// Advance the progress bar
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void m_Timer_Tick(object sender, EventArgs e)
        {
            PerformStep();
        }

        /// <summary>
        /// Advance the progress bar
        /// </summary>
        private void PerformStep()
        {
            this.progressBar1.PerformStep();
            this.lblOperation.Refresh();

            if (this.progressBar1.Value == this.progressBar1.Maximum)
            {
                this.progressBar1.Value = this.progressBar1.Minimum;
            }
        }        

        /// <summary>
        /// Load the form , start the progress bar and backroud task.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void ProgressBarFrm_Load(object sender, EventArgs e)
        {
            m_Timer.Start();
            this.lblOperation.Refresh();

            Task task = new Task(m_backgroundOperation);
            Task UITask = task.ContinueWith(delegate { OnWorkCompleted(); },
            TaskScheduler.FromCurrentSynchronizationContext());
            try
            {
                task.Start();
            }
            catch (Exception)
            {
                Close();
                throw;
            }
        }

        /// <summary>
        /// Called when the work has been completed.
        /// </summary>
        private void OnWorkCompleted()
        {
            Close();
        }

        /// <summary>
        /// Close the timer.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void ProgressBarFrm_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (m_Timer != null)
            {
                m_Timer.Dispose();
                m_Timer = null;
            }
        }

        #endregion
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:46:22.337

这是我执行一些异步工作的方式，

```
public static class TaskExecuter
{
    private static readonly ThreadLocal<List<BackgroundTask>> TasksToExecute =
        new ThreadLocal<List<BackgroundTask>>(() => new List<BackgroundTask>());

    public static Action<Exception> ExceptionHandler { get; set; }

    public static void ExecuteLater(BackgroundTask task)
    {
        TasksToExecute.Value.Add(task);
    }

    public static void Discard()
    {
        TasksToExecute.Value.Clear();
    }

    public static void StartExecuting()
    {
        var value = TasksToExecute.Value;
        var copy = value.ToArray();
        value.Clear();

        if (copy.Length > 0)
        {
            Task.Factory.StartNew(() =>
            {
                foreach (var backgroundTask in copy)
                    ExecuteTask(backgroundTask);

            }, TaskCreationOptions.LongRunning)
            .ContinueWith(task =>
            {
                if (ExceptionHandler != null)
                    ExceptionHandler(task.Exception);

            }, TaskContinuationOptions.OnlyOnFaulted);
        }
    }

    public static void ExecuteTask(BackgroundTask task)
    {
        task.Run();
    }
} 
```

这是基类

```
 public abstract class BackgroundTask
{
    protected readonly Logger Logger = LogManager.GetCurrentClassLogger();

    protected virtual void Initialize()
    {

    }

    protected virtual void OnError(Exception e)
    {
       //do some work
    }

    public bool? Run()
    {
        Logger.Info("Started task: {0}", GetType().Name);
        Initialize();
        try
        {
            Execute();
            TaskExecuter.StartExecuting();
            return true;
        }
        catch (Exception e)
        {
            Logger.ErrorException("Could not execute task " + GetType().Name, e);
            OnError(e);
            return false;
        }
        finally
        {
            TaskExecuter.Discard();
            Logger.Info("Finished task: {0}", GetType().Name);
        }
    }
    public abstract void Execute();
} 
```

这是使用示例

```
public class SendEmailTask : BackgroundTask
{
    private const string MailServerIp = "yourip";

    public string[] To { get; set; }
    public string From { get; set; }
    public string Template { get; set; }
    public object ViewContext { get; set; }
    public string[] Attachments { get; set; }
    public string Subject { get; set; }

    public override void Execute()
    {
        MailMessage message = new MailMessage();
        try
        {
            MailAddress mailAddress = new MailAddress(From);
            message.From = mailAddress;

            foreach (string to in To) message.To.Add(to);
            message.Subject = Subject;
            if (Attachments.ReturnSuccess())
            {
                foreach (string attachment in Attachments)
                    message.Attachments.Add(new Attachment(attachment));
            }
            message.Priority = MailPriority.High;
            message.Body = Template;
            message.AlternateViews
                   .Add(AlternateView
                   .CreateAlternateViewFromString(ViewContext.ToString(), new ContentType("text/html")));
            message.IsBodyHtml = true;
            new SmtpClient(MailServerIp)
            {
                Port = 25,
                UseDefaultCredentials = true
            }.Send(message);
        }
        catch (Exception e)
        {
            Logger.FatalException("Error sending email:", e);
        }
        finally
        {
            message.Dispose();
        }
    }

    public override string ToString()
    {
        return string.Format("To: {0}, From: {1}, Template: {2}, ViewContext: {3}, Attachments: {4}, Subject: {5}", To, From, Template, ViewContext, Attachments, Subject);
    }
} 
```

在这里，我根据您的需要添加了一个更改版本

```
public static class AsyncExecuter
{
    private static readonly ThreadLocal<List<Action>> TasksToExecute =
        new ThreadLocal<List<Action>>(() => new List<BackgroundTask>());

    public static Action<Exception> ExceptionHandler { get; set; }

    public static void ExecuteLater(BackgroundTask task)
    {
        TasksToExecute.Value.Add(task);
    }

    public static void Discard()
    {
        TasksToExecute.Value.Clear();
    }

    public static void StartExecuting()
    {
        var value = TasksToExecute.Value;
        var copy = value.ToArray();
        value.Clear();

        if (copy.Length > 0)
        {
            Task.Factory.StartNew(() =>
            {
                foreach (var backgroundTask in copy)
                    ExecuteTask(backgroundTask);

            }, TaskCreationOptions.LongRunning)
            .ContinueWith(task =>
            {
                if (ExceptionHandler != null)
                    ExceptionHandler(task.Exception);

            }, TaskContinuationOptions.OnlyOnFaulted);
        }
    }

    public static void ExecuteTask(Action task)
    {
        task.Invoke();
    }
} 
```

# twitter - 服务提供商响应错误：301（永久移动）- Twitter API 1.1

> ID：14933160
> 
> 赞同：11
> 
> 时间：2013-02-18T09:35:38.247
> 
> 标签：twitter, twitter4j

尝试连接到 Twitter 时出现此错误？为什么？

```
02-18 16:40:33.270: W/System.err(7167): oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: Service provider responded in error: 301 (Moved Permanently)
02-18 16:40:33.270: W/System.err(7167):     at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:218)
02-18 16:40:33.270: W/System.err(7167):     at oauth.signpost.AbstractOAuthProvider.retrieveRequestToken(AbstractOAuthProvider.java:74)
02-18 16:40:33.270: W/System.err(7167):     at app.jp.cropnet.twitter.TwitterApp$2.run(TwitterApp.java:255)
02-18 16:40:33.270: W/System.err(7167): Caused by: oauth.signpost.exception.OAuthCommunicationException: Service provider responded in error: 301 (Moved Permanently)
02-18 16:40:33.270: W/System.err(7167):     at oauth.signpost.AbstractOAuthProvider.handleUnexpectedResponse(AbstractOAuthProvider.java:245)
02-18 16:40:33.270: W/System.err(7167):     at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:193)
02-18 16:40:33.270: W/System.err(7167):     ... 2 more 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-20T09:05:13.317

最近注意到同样的问题。必须像这样将 twitter oauth 路径从 http 更新为 https

```
new DefaultOAuthProvider(
                        "https://api.twitter.com/oauth/request_token",
                        "https://api.twitter.com/oauth/access_token",
                        "https://api.twitter.com/oauth/authorize"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:45:27.453

你也可能像我一样遇到这个问题。如果你在 dev.twitter.com 上创建应用程序时没有在应用程序的**设置选项卡中添加****回调 URL：**到**应用程序类型。**

 **这个修复对我有用。希望为他人工作的人遇到同样的问题。**

# sitecore - 网站核心：编辑框

> ID：14933167
> 
> 赞同：2
> 
> 时间：2013-02-18T09:36:00.260
> 
> 标签：sitecore, sitecore6, page-editor

我需要使用editframe让前台用户修改一些复选框字段

1.  我创建了一个新的编辑框按钮并仅设置我希望前台用户编辑的那些字段。例如：Core DB -> /sitecore/content/Applications/WebEdit/Edit Frame Buttons/（编辑按钮文件夹）/（字段编辑器按钮）。在前台用户要编辑的字段中，我已将其设置为标题。

2.  在我的子布局中，我有这个代码

    ```
    <sc:EditFrame ID="EditField" runat="server" Buttons="/sitecore/content/Applications/WebEdit/Edit Frame Buttons/EditFields">
    <div id="whatyoumissed">
        <asp:ListView ID="ListView1" runat="server">
            <LayoutTemplate>
                <ul style="list-style-type: none;" >
                    <asp:PlaceHolder runat="server" ID="itemplaceholder"></asp:PlaceHolder>
                </ul>
            </LayoutTemplate>

            <ItemTemplate>
                <li style="float: left;margin-left:20px;">
                    <sc:FieldRenderer ID="FieldRenderer2" runat="server" FieldName="Headline" 
                    Item="<%# Container.DataItem as Sitecore.Data.Items.Item %>" /> <br />
                    <sc:FieldRenderer ID="FR3" runat="server" FieldName="cb" Item="<%# Container.DataItem as Sitecore.Data.Items.Item %>" />
                </li>
            </ItemTemplate>
        </asp:ListView>

    </div>
    </sc:EditFrame> 
    ```

3.  背后的代码

    ```
     string queryPath = "/bla/bla/bla/bla/bla/bla/bla/bla/bla";
        var item = sc.Context.Database.GetItem(queryPath);
        var children = item.Children;
        ListView1.DataSource = children;
        ListView1.DataBind(); 
    ```

当我在页面编辑器中单击编辑框时，提示框没有字段（标题）供我修改。有什么建议吗？

答：我有 google abit of sitecore edit frame datasource 并最终得到这个链接 [http://blog.jan.hebnes.dk/2011/12/using-sitecore-editframe-with.html](http://blog.jan.hebnes.dk/2011/12/using-sitecore-editframe-with.html)

我没有使用 Martijn Bos 所示的代码，而是将我的代码从 prev 修改为以下代码。

```
<asp:ListView ID="ListView1" runat="server">
            <LayoutTemplate>
                <ul style="list-style-type: none;" >
                    <asp:PlaceHolder runat="server" ID="itemplaceholder"></asp:PlaceHolder>
                </ul>
            </LayoutTemplate>

            <ItemTemplate>
                <sc:EditFrame ID="EditField" runat="server" Buttons="/sitecore/content/Applications/WebEdit/Edit Frame Buttons/EditFields"
                DataSource="<%# ((Sitecore.Data.Items.Item)Container.DataItem).Paths.FullPath %>" >
                    <li style="float: left;margin-left:20px;">
                        <sc:FieldRenderer ID="FieldRenderer2" runat="server" FieldName="Headline" 
                        Item="<%# Container.DataItem as Sitecore.Data.Items.Item %>" /> <br />
                        <sc:FieldRenderer ID="FR3" runat="server" FieldName="cb" Item="<%# Container.DataItem as Sitecore.Data.Items.Item %>" />
                    </li>
                </sc:EditFrame>
            </ItemTemplate>
        </asp:ListView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:43:24.867

您是否尝试过设置 Editframe 的 DatasSource？

例如`EditField.DataSource = item.Paths.FullPath;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T06:11:59.473

你快到了。不应使用“FullPath”。试试这个

```
 DataSource="<%# ((Sitecore.Data.Items.Item)Container.DataItem).Paths.FullPath %>" 
```

# mahout - 如何使用 Mahout 找到地址之间的相似性？

> ID：14933170
> 
> 赞同：0
> 
> 时间：2013-02-18T09:36:03.950
> 
> 标签：mahout

需要帮助和建议。已经设置了一个带有 mahout 集群的 5 hadoop

我有两组数据：

*   表1：id1，地址1

*   表2：id2，地址2

*   如何使用 mahout 查找相似性评分，以便比较两个文件中的地址，以便我得到以下结果？

结果：地址1，地址2，分数

完成了：

1.  将文件合并到一个 csv

2.  转换为序列文件：seqdirectory，

3.  矢量化：seq2sparse（-wt tfidf）

不完全确定在此之后去哪里。推荐或聚类。如何使用jaccard索引等需要指针和例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:09:42.163

虽然您可以将通用文本相似性算法应用于地址，但我很确定它会产生糟糕的结果，因为任何通用算法都不会考虑拼写错误。“Main St”将与“Main Dr”相似，就像“Main Street”一样。“Apt 203”和“#203”不相关。

那就是——我不认为向量化表示是一个好的模糊匹配算法的基础。因此 Mahout 不会直接有用，但可能会提供一些基础设施来构建您自己的非矢量数据集群。

在选择工具之前，我会备份并定义您的算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T08:09:22.910

使用 Mahout 进行地址相似性可能太多了。您是否考虑过使用像 SimHash 这样更简单的算法？以下是关于它的精彩教程。用于 SimHash 和查找带状疱疹等的 Java 库可在 Google 代码中找到。

[http://matpalm.com/resemblance/simhash/](http://matpalm.com/resemblance/simhash/)

你会在这里找到 lib

[http://code.google.com/p/simhash/](http://code.google.com/p/simhash/)

# cmake - 如何添加所需的最低编译器版本？

> ID：14933172
> 
> 赞同：33
> 
> 时间：2013-02-18T09:36:16.570
> 
> 标签：cmake

我想在 C++11 中创建一个项目，并使用 CMake 作为我的构建系统。

如何在 CMake 配置文件中添加所需的最低编译器版本？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-18T10:51:03.987

AFAIK，没有内置支持这样的东西，但你当然可以自己写：

```
if(CMAKE_CXX_COMPILER_ID STREQUAL "GNU")
  if(CMAKE_CXX_COMPILER_VERSION VERSION_LESS "your.required.gcc.version")
    message(FATAL_ERROR "Insufficient gcc version")
  endif()
elseif(CMAKE_CXX_COMPILER_ID STREQUAL "MSVC")
  if(CMAKE_CXX_COMPILER_VERSION VERSION_LESS "your.required.msvc.version")
    message(FATAL_ERROR "Insufficient msvc version")
  endif()
elseif(...)
# etc.
endif() 
```

但是，我建议您实际上考虑使用特征检测方法。也就是说，用于`try_compile()`验证编译器是否支持您需要的功能，`FATAL_ERROR`如果不支持。它在 CMake 中更加惯用，并且具有额外的好处，您不必为所有编译器找到合适的最小版本。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-08-22T00:29:18.037

从 CMake 2.8.10 开始，用户可以访问 CMAKE_<LANG>_COMPILER_VERSION 变量以获取编译器版本。在以前的版本中，这些仅保留用于内部目的，不应由用户代码读取。也不保证为所有语言设置它们，但 C 和 CXX 绝对应该可用。

CMake 还包含用于版本比较的运算符（VERSION_LESS、VERSION_EQUAL、VERSION_GREATER），您可以使用它们来编写版本验证代码。

请记住，您需要先找出您拥有的编译器，然后检查正确的版本。

这是我的一个项目中的一个简短示例：

```
if("${CMAKE_CXX_COMPILER_ID}" STREQUAL "GNU")
    # require at least gcc 4.8
    if (CMAKE_CXX_COMPILER_VERSION VERSION_LESS 4.8)
        message(FATAL_ERROR "GCC version must be at least 4.8!")
    endif()
elseif ("${CMAKE_CXX_COMPILER_ID}" STREQUAL "Clang")
    # require at least clang 3.2
    if (CMAKE_CXX_COMPILER_VERSION VERSION_LESS 3.2)
        message(FATAL_ERROR "Clang version must be at least 3.2!")
    endif()
else()
    message(WARNING "You are using an unsupported compiler! Compilation has only been tested with Clang and GCC.")
endif() 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-08-23T21:29:56.743

可以查看具体的gcc版本如下：

```
if (CMAKE_COMPILER_IS_GNUCC AND CMAKE_CXX_COMPILER_VERSION VERSION_LESS 5.1)
    message(FATAL_ERROR "Require at least gcc-5.1")
endif() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-14T15:36:56.577

现在有内置的支持。从[文档](https://cmake.org/cmake/help/latest/manual/cmake-compile-features.7.html#requiring-language-standards)：

`target_compile_features(mylib PUBLIC cxx_std_11)`

“在此示例中，CMake 将确保以至少 C++ 11（或 C++ 14、C++ 17...）的模式调用编译器，并`-std=gnu++11`在必要时添加标志。这适用于其中的源`mylib`以及任何依赖项（可能包括来自 的标题`mylib`）。”

# java - 如何在android中解析单个对象中的嵌套json数组

> ID：14933173
> 
> 赞同：4
> 
> 时间：2013-02-18T09:36:16.663
> 
> 标签：java, android, json

我有一个包含许多嵌套 JSONARRAY 的 json。这是片段。

```
{
    "location": [ 
        { 
            "name": "Perth", 
            "conferencelocation": [
                {
                    "locationname":"Stage 1" ,
                    "guests": [
                        {
                            "guestid":"4074513426041094",
                            "guestname":"Keegan Connor Tracy",
                            "time":"9am",
                            "largeimg":"http://ozcomiccon.com/images/banner/Keegan.jpg",
                            "smallimg":"http://ozcomiccon.com/images/banner/Keeganresized.jpg",
                            "biotext": "Born in Windsor, Ontario, Canada, Tracy attended Wilfrid Laurier University in Waterloo, Ontario, Canada, where she orginally studied business. She later switched to psychology. She spent a year in Europe working in Dublin, Paris and Nice, where she was supposed to be completing her 4th year of study. She later returned to WLU to finish her degree. She moved to Vancouver, B.C. where she has had all of her acting jobs.",
                            "autographs":"$30 each (an 8x10 photograph will be included with each signature, or you may choose to have an appropriate personal item signed).",
                            "photographs":"Photo with Keegan $40.",
                            "genre":"acting",
                            "links": [
                                {"linkname":"Twitter", "url":"https://twitter.com/keegolicious" },
                                {"linkname":"IMDB", "url":"http://www.imdb.com/name/nm0870535/" }
                            ]
                        },
                        {
                            "guestid":"1054713366041913",
                            "guestname":"Matthew Clark",
                            "time":"10am",
                            "largeimg":"http://ozcomiccon.com/images/banner/matthewclark.jpg",
                            "smallimg":"http://ozcomiccon.com/images/banner/matthewclarkresized.jpg",
                            "biotext": "Matthew Clark is a comic book artist living and working in Portland, Oregon. Having worked on art of some of the most well-known DC characters in comic book history, he  recently did pencils for DCâ€™s latest version of the Doom Patrol. Matthew is currently working on Ghost Rider for Marvel Comics, with whom he has signed an exclusive two-year deal.<br /><br />Matthew has lived in Portland for the past 13 years, just above an art gallery in the heart of downtown. He loves to walk around this fair city (mainly because he sold his car and needed to force himself to exercise). Heâ€™s a native Oregonian and thatâ€™s saying something.  For the past 11 years heâ€™s met Greg Rucka for coffee every Wednesday pretty much without fail at the same place (we pretty much carved our names in the table). Matthew was also one of the original founders of Mercury Studio (now Periscope Studio); he got his start at Studiosaurus.<br /><br />He still reads comics, loves what he does, and works very hard. Loves to meet new people, but is really quiet (and has great hair).",
                            "autographs":"Complimentary at guest's discretion.(Twitter)",
                            "photographs":"",
                            "genre":"comic",
                            "links": [
                                {"linkname":"Website", "url":"http://www.matthewclarkartist.com/" },
                                {"linkname":"Twitter", "url":"https://twitter.com/emceeartist" }
                            ]
                        }
                    ]
                },
                {
                    "locationname":"Stage 2" ,
                    "guests": [
                        {
                            "guestid":"106146633306036834",
                            "guestname":"Sean Williams",
                            "time":"8am",
                            "largeimg":"http://ozcomiccon.com/images/banner/seanwilliams.jpg",
                            "smallimg":"http://ozcomiccon.com/images/banner/seanwilliamsresized.jpg",
                            "biotext": "Sean Williams was born in the dry, flat lands of South Australia, where he still lives with his wife and family. He has been called many things in his time, including â€œthe premier Australian speculative fiction writer of the ageâ€ (Aurealis), the â€œEmperor of Sci-Fiâ€ (Adelaide Advertiser), and the â€œKing of Chameleonsâ€ (Australian Book Review) for the diversity of his output.  That award-winning output includes thirty-five novels for readers all ages, seventy-five short stories across numerous genres, the odd published poem, and even a sci-fi musical.<br /><br />He is a multiple recipient of the Aurealis and Ditmar Awards in multiple categories and has been nominated for the Philip K. Dick Award, the Seiun Award, and the William Atheling Jr. Award for criticism. He received the â€œSA Greatâ€ Literature Award in 2000 and the Peter McNamara Award for contributions to Australian speculative fiction in 2008.<br /><br />On the sci-fi front, he is best-known internationally for his original award-winning space opera series as well as several novels set in the Star Wars universe, many co-written with fellow-Adelaidean Shane Dix.  These include the Astropolis, Evergence, Orphans and Geodesica series, and the computer game tie-in The Force Unleashedâ€“the first such adaptation ever to debut at #1 on the New York Times bestseller list.  A series for young readers, The Fixers, pitted an increasingly lost protagonist against zombies, cyborgs, and vampires across numerous universes. His most recent releases in the Star Wars universe are The Old Republic: Fatal Alliance and The Force Unleashed II.",
                            "autographs":"Complimentary at guest's discretion.",
                            "photographs":"",
                            "genre":"comic",
                            "links": [
                                {"linkname":"website", "url":"http://www.seanwilliams.com" }
                            ]
                        },
                        {
                            "guestid":"17148603639603876",
                            "guestname":"Richard Dean Anderson",
                            "time":"10am",
                            "largeimg":"http://ozcomiccon.com/images/banner/richarddeananderson.jpg",
                            "smallimg":"http://ozcomiccon.com/images/banner/richarddeanandersonresized.jpg",
                            "biotext": "Richard Dean Anderson is probably best known as MacGyver, the clever and inventive nonviolent hero who solved problems in his own unique way for seven successful seasons on ABC. In his roles before and since, this gifted actor has continued to demonstrate his remarkable talent and versatility.<br /><br />Richard was born on January 23, 1950 in Minneapolis, Minnesota. His father, Stuart Anderson, taught English, drama, and humanities at a local high school, and is an accomplished jazz bassist. His mother, Jocelyn, is an artist, talented in both painting and sculpture. Richard is the eldest of four sons. He and his brothers, Jeffrey Scott, Thomas John, and James Stuart, grew up in the Minneapolis suburb of Roseville, where Richard developed early interests in sports, the arts, music, and acting.<br /><br />Like many boys growing up in Minnesota, Richard dreamed of becoming a professional hockey player. However, at the age of 16, he broke both arms, in separate accidents three weeks apart, while playing in high school hockey games. He put aside his dreams of playing professionally, though he still harbors a deep love for the sport. Richard talks of his restlessness growing up, his early desire to explore, and his adventures hitchhiking and hopping freight trains. At the age of 17, he took a 5641 mile bicycle trip from his home in Minnesota through Canada and Alaska, an experience which was sparked by his sense of adventure and discovery, but which also gave him a more centered sense of direction.",
                            "autographs":"Autograph from Richard $50.",
                            "photographs":"Photograph with Richard $80\. SG1 double shot with Richard and Teryl Rothery $150\. SG1 triple shot with Richard, Teryl Rothery and Corin Nemec $200.",
                            "genre":"acting",
                            "links": [
                                {"linkname":"Website", "url":"http://www.rdanderson.com/" },
                                {"linkname":"Twitter", "url":"https://twitter.com/andersonrdean" }
                            ]
                        }
                    ]
                }
            ]
        }
    ] 
```

我有名为 Name 的对象类，我想将 name(perth) jsonobject 的所有数据作为 Name 类的单个对象。但它没有在数组列表中正确添加数据，更清楚的是，`guestid, guestname`etc 标记值正在被保存，但会覆盖前一个。这是我的解析代码：

```
public ArrayList<Guest> parseInitiator() throws ClientProtocolException,
            IOException, JSONException {

        InputStream is = new FileInputStream(new File(Url));
        int size = is.available();
        byte[] buffer = new byte[size];
        is.read(buffer);
        is.close();
        String mResponse = new String(buffer);

        JSONObject first = new JSONObject(mResponse);

        JSONArray firstarray = first.getJSONArray("location");

        ArrayList<Guest> parsedData = new ArrayList<Guest>();
        for (int i = 0; i < firstarray.length(); i++) {

            JSONObject jonj = firstarray.getJSONObject(i);

             name = jonj.getString("name");

            JSONArray confarray = jonj.getJSONArray("conferencelocation");
            locationname  = new String[confarray.length()];
            for (int j = 0; j < confarray.length(); j++) {
                JSONObject conobbj = confarray.getJSONObject(j);

                 locationname[j] = conobbj.getString("locationname");

                JSONArray guestarray = conobbj.getJSONArray("guests");
                guestid= new String[guestarray.length()];
                guestname= new String[guestarray.length()];
                time= new String[guestarray.length()];
                largeimg= new String[guestarray.length()];
                smallimg= new String[guestarray.length()];
                biotext= new String[guestarray.length()];
                autographs= new String[guestarray.length()];
                photographs= new String[guestarray.length()];
                genre= new String[guestarray.length()];

                for (int k = 0; k < guestarray.length(); k++) {
                    JSONObject guestobbj = guestarray.getJSONObject(k);

                     guestid[k] = guestobbj.getString("guestid");
                     guestname[k] = guestobbj.getString("guestname");
                     time[k] = guestobbj.getString("time");
                     largeimg[k] = guestobbj.getString("largeimg");
                     smallimg[k] = guestobbj.getString("smallimg");
                     biotext[k] = guestobbj.getString("biotext");
                     autographs[k] = guestobbj.getString("autographs");
                     photographs[k] = guestobbj.getString("photographs");
                     genre[k] = guestobbj.getString("genre");

                    JSONArray linkar = guestobbj.getJSONArray("links");
                    arlink= new String[linkar.length()];
                    arurl= new String[linkar.length()];
                    for (int l = 0; l < linkar.length(); l++) {
                        JSONObject linkobj = linkar.getJSONObject(l);

                        arlink[l] = linkobj.getString("linkname");
                        arurl[l] = linkobj.getString("url");

                    }

                }

            }

            parsedData.add(new Guest(name,locationname, guestid, guestname, time, largeimg, smallimg, biotext,
                    autographs, photographs, genre,arlink, arurl));

        }

        return parsedData;

    } 
```

谁能让我清楚我所犯的错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T10:09:05.670

所以这是我的解决方案：

```
JSONObject first = new JSONObject(mResponse);

JSONArray locArr = first.getJSONArray("location"); // contains one object
JSONObject locArrObj = locArr.getJSONObject(0); // cotains one "out" array

JSONArray conferenceLocArr = locArrObj.getJSONArray("conferencelocation");
// this array has two objects and each object has array
JSONObject o = null;
JSONArray arr = null;

for (int i = 0; i < conferenceLocArr.length(); i++) {
   o = conferenceLocArr.getJSONObject(i); // it has one array
   arr = o.getJSONArray("guests");
   //  do your work with Stage 1 and guests
   // and for second object for Stage 2 and guests.
} 
```

# scala - 是否有任何方法与 map() 执行相同的操作但生成不同类型的容器？

> ID：14933182
> 
> 赞同：3
> 
> 时间：2013-02-18T09:36:35.273
> 
> 标签：scala, scala-collections

有时我需要通过映射另一个具有不同类型的集合来创建一个集合。例如，某些函数需要`List[_]`作为其参数类型，但我需要通过映射 a 来生成它`IndexedSeq[_]`：

```
val r = (1 to n).map { ... }
someFunction(r.toList) 
```

虽然我可以通过先调用`IndexedSeq[_]`'`map`方法然后再调用 来实现`toList`这一点，但这会产生一个冗余的中间集合。有什么办法可以在保持代码简洁的同时避免这个多余的步骤？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T10:09:46.807

查看完整签名`map`：

```
def map[B, That](f: (A) ⇒ B)(implicit bf: CanBuildFrom[List[A], B, That]): That 
```

关键是隐含的`CanBuildFrom`，它控制如何从输入集合生成结果集合。`CanBuildFrom`我们可以用允许我们构建不同结果集合的显式替换隐式。

更好的是，我们甚至不必编写这个显式方法！它已经存在，以`scala.collection.breakOut`. 来自 ScalaDoc：

> 提供构建特定目标集合 (To') 的 CanBuildFrom 实例，而与原始集合 (From') 无关。

因此，如果我们传入`collection.breakOut`，我们可以准确地指定我们想要的`map`方法：

```
val x = IndexedSeq(1,2,3,4,5)
x.map[Int, List[Int]](_ * 2)(collection.breakOut)
> res6: List[Int] = List(2, 4, 6, 8, 10) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T10:02:47.547

`collection.breakOut`正如 om-nom-nom 在他的评论中所说，您的问题的答案是。

`breakOut`是赋予该`map`方法的附加参数，并且 - 为简单起见 - 它允许从以下位置返回不同类型的集合`map`：

```
def directMapExample(seq: Seq[Int]): Set[Int] = seq.map(_ * 2)(collection.breakOut) 
```

请注意，以下内容在编译时失败：

```
def directMapExample2(seq: Seq[Int]): Set[Int] = seq.map(_ * 2) 
```

有关详细信息，请参阅[https://stackoverflow.com/a/1716558/298389](https://stackoverflow.com/a/1716558/298389)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:48:54.147

使用视图可能会有所帮助？

```
val r = (1 to n).view.map { … }
someFunction(r.toList) 
```

该`map`函数是一个严格的变压器`Range`。然而，如果你先把它变成一个视图，那么它`Range`（这是一个非严格的集合）将被包装在一个`map`以非严格方式实现的对象中。只有在调用时才会产生完整的值范围`toList`。

# angularjs - AngularJS 小部件方法在最新的 AngularJS 上不可用

> ID：14933188
> 
> 赞同：0
> 
> 时间：2013-02-18T09:37:25.790
> 
> 标签：angularjs

我正在尝试在最新的角度上运行这张幻灯片，但角度对象上的小部件方法已被弃用 [https://github.com/IgorMinar/ng-slides/blob/master/slide.js](https://github.com/IgorMinar/ng-slides/blob/master/slide.js)

是否有使用最新版本的此幻灯片的更新版本？

我应该修改什么以使 angular.widget 在最新的 AngularJS 上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:35:55.020

`widget`被替换为[`directive`](http://docs.angularjs.org/guide/directive)。我不知道它们有多相似，但从名称更改开始。

# javascript - 在设计视图中加载 javascript

> ID：14933194
> 
> 赞同：0
> 
> 时间：2013-02-18T09:37:47.593
> 
> 标签：javascript, ruby-on-rails-3, devise

我想在文件中加载一些 JavaScript`devise/registrations/edit.html.erb`文件。我尝试使用

```
<% content_for(:head) do%>
   <%=javascript_include_tag js_files%>
<%end%> 
```

但文件未加载到应用程序中。我使用此代码在应用程序的其他视图中加载更多文件，它们运行良好。这是因为我试图在设计视图中加载 js 文件吗？如果是这样，有解决方案吗？

**编辑**：生成的 HTML

```
<!DOCTYPE html>
 <html>
  <head>
    <title>MyWeb</title>
    <link href="/stylesheets/application.css?1360746034" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/jquery-ui.css?1353919889" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/jquery.tagsinput.css?1360746034" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/scaffold.css?1353919889" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/token-input.css?1353919964" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/token-input-facebook.css?1353919964" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/token-input-mac.css?1353919964" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/application.css?1360746034" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/token-input-facebook.css?1353919964" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/application.js?1360921167" type="text/javascript"></script>
<script src="/javascripts/jquery.observe_field.js?1360746034" type="text/javascript"></script>
<script src="/javascripts/jquery.jscrollpane.min.js?1360746034" type="text/javascript"></script>
    <script src="/javascripts/jquery.mousewheel.js?1360746034" type="text/javascript"></script>
    <script src="/javascripts/jquery.tokeninput.js?1360746034" type="text/javascript"></script>

    <meta name="csrf-param" content="authenticity_token"/>
    <meta name="csrf-token" content="RebGwNJKiIOwloQ0Y4VA4eSc92rIczA4zuV1kx07mho="/> 
   </head>
  <body>

    <div id="user_content">
    <h2>Edit User</h2>

    <form accept-charset="UTF-8" action="/users" class="user_edit" id="user_edit" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="put" /><input name="authenticity_token" type="hidden" value="RebGwNJKiIOwloQ0Y4VA4eSc92rIczA4zuV1kx07mho=" /></div>

    <p><label for="user_email">Email</label><br />
    <input id="user_email" name="user[email]" size="30" type="text" value="prueba@prueba.com" /></p>

    <p><label for="user_password">Password</label> <i>(leave blank if you don't want to change it)</i><br />
    <input id="user_password" name="user[password]" size="30" type="password" /></p>

    <p><label for="user_password_confirmation">Password confirmation</label><br />

   <input id="user_password_confirmation" name="user[password_confirmation]" size="30" type="password" /></p>

    <p><label for="user_current_password">Current password</label> <i>(we need your current password to confirm your changes)</i><br />
    <input id="user_current_password" name="user[current_password]" size="30" type="password" /></p>
    <p><input id="user_submit" name="commit" type="submit" value="Update" /></p>
    </form>
    <h3>Cancel my account</h3>

    <p>Unhappy? <a href="/users" data-confirm="Are you sure?" data-method="delete" rel="nofollow">Cancel my account</a>.</p>

    <a href="http://localhost:3000/users/all_events">Back</a>

    </div>
    <div id="notice">       
    </div>

   </body>
 </html> 
```

# php - 如何解析这个 XML 字符串？

> ID：14933198
> 
> 赞同：0
> 
> 时间：2013-02-18T09:37:50.827
> 
> 标签：php, xml

即使浏览了太多帖子，我也找不到在 PHP 中解析这个 XML 的方法：

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <soap:Body>
      <SingleResponse xmlns="http://content.host.com">
         <ContentCafe DateTime="2013-02-18T04:31:16.1619171-05:00">
            <RequestItems UserID="abcdefg" Password="hijklmnop">
               <RequestItem>
                  <Key Type="ISBN" Original="9780002571838">9780002571838</Key>
                  <Content>ProductDetail</Content>
                  <ProductItems>
                     <ProductItem ID="8714731">
                        <ISBN>9780002571838</ISBN>
                        <Title>Memoirs</Title>
                        <Author>Rees-Mogg, William</Author>
                        <Source Code="BTB">B&amp;T Books</Source>
                        <Product Code="BOOK">Book</Product>
                        <Supplier Code="HARPE">HarperCollins</Supplier>
                     </ProductItem>
                  </ProductItems>
               </RequestItem>
            </RequestItems>
         </ContentCafe>
      </SingleResponse>
   </soap:Body>
</soap:Envelope> 
```

我来了，直到这一点：

```
$xml = new SimpleXMLElement($xml); 
```

但不知道如何继续阅读`Title`和`Author`其他信息。非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:00:11.233

对于您的特定情况，您可以使用 **[SOAP 客户端`getTypes ()`](http://www.php.net/manual/en/soapclient.gettypes.php)**来获取结构，然后设计代码来处理从 `doRequest()`方法返回的字符串。

我想，您不应该根据序列化的 XML 数据来处理来自 Web 服务的响应。相反，使用标准 API 对其进行包装，并将其视为调用 API 功能调用。并处理返回数据而不是处理整个 HTTP 数据包数据。

这些资源可能会有所帮助。请参阅此[IBM 教程](http://www.ibm.com/developerworks/opensource/tutorials/os-php-webservice/)以及[PHP Soap 客户端手册](http://www.php.net/manual/en/class.soapclient.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:05:07.007

可以这样做：

[演示](http://codepad.org/8l6RBqfx)

```
$obj = new SimpleXMLElement($xml);

$item = $obj->children('http://schemas.xmlsoap.org/soap/envelope/')->children()->SingleResponse->ContentCafe->RequestItems->RequestItem->ProductItems->ProductItem;

echo $item->Title . "\n";
echo $item->Author . "\n";
echo $item->attributes()->ID; 
```

输出

> 回忆录
> 里斯-莫格，威廉
> 8714731

如果你有多个`<ProductItem>`，你将不得不循环它们而不是像我一样直接访问它们。

# sql - 如何在 SQL SERVER 2008 R2 中逐行显示单个列中的多个值？

> ID：14933208
> 
> 赞同：2
> 
> 时间：2013-02-18T09:38:13.397
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2

我正在使用 SQL SERVER 2008 R2。我想获取多个值并同时逐行显示在单列中，如果存在值，否则它会显示一些值，并且可能在单列上显示“12 个值”。

![示例截图 2](../Images/b7132ab2408c26f3da330ca37687e07e.png)

例如，下面的屏幕截图，它显示了相同数据的记录，但**评论除外。**我想显示为***单个记录，***但**注释**应显示**ASN Timeliness、ASN Accuracy、问题报告**这两个值。这三个值使用同一**船厂“0096a”逐行显示。**

![示例截图 1](../Images/680f689da24e67e59ef35f12a1c9dff3.png)

我的示例查询，

```
SELECT 
    D30.SPGD30_SHIP_SITE_C AS SHIPSITE,  
    D30.SPGD30_RATING_MONTH_Y AS RATINGMONTH,  
    D30.SPGD30_PRIOR_SCORE_R AS PRIOR, 
    D30.SPGD30_REVISED_SCORE_R AS REVISED,  
    CASE WHEN (CHARINDEX('-',D30.SPGD30_TRACKED_ADJUSTMENT_X) > 0 ) THEN CONVERT( VARCHAR(8), CAST(D30.SPGD30_TRACKED_ADJUSTMENT_X AS DATETIME) , 1) ELSE D30.SPGD30_TRACKED_ADJUSTMENT_X END ADJUSTMENTS,  
    J02.SPGJ02_MSG_CODE_X AS COMMENTS,  
    D30.SPGD30_LAST_TOUCH_Y AS LASTUPDATED,  
    D30.SPGD30_LAST_TOUCH_C AS LASTUPDATEDCDSID   
FROM  
    CSPGD30_TRACKING D30, 
    CSPGD31_TRACKING_RATING_ELEMNT D31,  
    CSPGA04_RATING_ELEMENT_MSTR A04 , 
    CSPGJ02_MSG_OBJ J02  
WHERE  
    D30.SPGA02_BUSINESS_TYPE_C = D31.SPGA02_BUSINESS_TYPE_C  
AND 
    D30.SPGA03_REGION_C = D31.SPGA03_REGION_C  
AND 
    D30.SPGD30_SHIP_SITE_C = D31.SPGD30_SHIP_SITE_C  
AND 
    D30.SPGD30_RATING_MONTH_Y = D31.SPGD30_RATING_MONTH_Y  
AND 
    D30.SPGD30_TRACKED_ADJUSTMENT_X = D31.SPGD30_TRACKED_ADJUSTMENT_X  
AND 
    D30.SPGD30_LAST_TOUCH_Y = D31.SPGD30_LAST_TOUCH_Y  
AND 
    D31.SPGA04_RATING_ELEMENT_D = A04.SPGA04_RATING_ELEMENT_D  
AND 
    A04.SPGJ02_MSG_K = J02.SPGJ02_MSG_K  
AND 
    D30.SPGA02_BUSINESS_TYPE_C = 'serv'  
AND 
    D30.SPGA03_REGION_C = 'ap'  
AND 
    D30.SPGD30_SHIP_SITE_C = '0134a'  
ORDER BY   
    D30.SPGD30_SHIP_SITE_C ASC  ,
    D30.SPGD30_RATING_MONTH_Y DESC  ,
    D30.SPGD30_LAST_TOUCH_Y DESC 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T14:56:32.487

我看到两种方法可以做到这一点。

首先，您可以在相关子查询中使用`FOR XML PATH`和。`STUFF`这会将 中的值连接`CSPGJ02_MSG_OBJ`成一个字符串：

```
SELECT D30.SPGD30_SHIP_SITE_C AS SHIPSITE,  
    D30.SPGD30_RATING_MONTH_Y AS RATINGMONTH,  
    D30.SPGD30_PRIOR_SCORE_R AS PRIOR, 
    D30.SPGD30_REVISED_SCORE_R AS REVISED,  
    CASE WHEN (CHARINDEX('-',D30.SPGD30_TRACKED_ADJUSTMENT_X) > 0 ) THEN CONVERT( VARCHAR(8), CAST(D30.SPGD30_TRACKED_ADJUSTMENT_X AS DATETIME) , 1) ELSE D30.SPGD30_TRACKED_ADJUSTMENT_X END ADJUSTMENTS,  
     STUFF((SELECT distinct '+ ' + J02.SPGJ02_MSG_CODE_X
            from CSPGJ02_MSG_OBJ J02
            where A04.SPGJ02_MSG_K = J02.SPGJ02_MSG_K 
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,2,'') COMMENTS,
    D30.SPGD30_LAST_TOUCH_Y AS LASTUPDATED,  
    D30.SPGD30_LAST_TOUCH_C AS LASTUPDATEDCDSID   
FROM CSPGD30_TRACKING D30
INNER JOIN CSPGD31_TRACKING_RATING_ELEMNT D31
    ON D30.SPGA02_BUSINESS_TYPE_C = D31.SPGA02_BUSINESS_TYPE_C  
    AND D30.SPGA03_REGION_C = D31.SPGA03_REGION_C  
    AND D30.SPGD30_SHIP_SITE_C = D31.SPGD30_SHIP_SITE_C  
    AND D30.SPGD30_RATING_MONTH_Y = D31.SPGD30_RATING_MONTH_Y  
    AND D30.SPGD30_TRACKED_ADJUSTMENT_X = D31.SPGD30_TRACKED_ADJUSTMENT_X  
    AND D30.SPGD30_LAST_TOUCH_Y = D31.SPGD30_LAST_TOUCH_Y  
INNER JOIN CSPGA04_RATING_ELEMENT_MSTR A04
    ON D31.SPGA04_RATING_ELEMENT_D = A04.SPGA04_RATING_ELEMENT_D  
WHERE D30.SPGA02_BUSINESS_TYPE_C = 'serv'  
    AND D30.SPGA03_REGION_C = 'ap'  
    AND D30.SPGD30_SHIP_SITE_C = '0134a'  
ORDER BY D30.SPGD30_SHIP_SITE_C ASC, D30.SPGD30_RATING_MONTH_Y DESC, D30.SPGD30_LAST_TOUCH_Y DESC; 
```

第二种方法是使用`CROSS APPLY`with `FOR XML PATH`：

```
SELECT D30.SPGD30_SHIP_SITE_C AS SHIPSITE,  
    D30.SPGD30_RATING_MONTH_Y AS RATINGMONTH,  
    D30.SPGD30_PRIOR_SCORE_R AS PRIOR, 
    D30.SPGD30_REVISED_SCORE_R AS REVISED,  
    CASE WHEN (CHARINDEX('-',D30.SPGD30_TRACKED_ADJUSTMENT_X) > 0 ) THEN CONVERT( VARCHAR(8), CAST(D30.SPGD30_TRACKED_ADJUSTMENT_X AS DATETIME) , 1) ELSE D30.SPGD30_TRACKED_ADJUSTMENT_X END ADJUSTMENTS,  
    left(J02.comments, LEN(J02.comments)-1) AS COMMENTS,
    D30.SPGD30_LAST_TOUCH_Y AS LASTUPDATED,  
    D30.SPGD30_LAST_TOUCH_C AS LASTUPDATEDCDSID   
FROM CSPGD30_TRACKING D30
INNER JOIN CSPGD31_TRACKING_RATING_ELEMNT D31
    ON D30.SPGA02_BUSINESS_TYPE_C = D31.SPGA02_BUSINESS_TYPE_C  
    AND D30.SPGA03_REGION_C = D31.SPGA03_REGION_C  
    AND D30.SPGD30_SHIP_SITE_C = D31.SPGD30_SHIP_SITE_C  
    AND D30.SPGD30_RATING_MONTH_Y = D31.SPGD30_RATING_MONTH_Y  
    AND D30.SPGD30_TRACKED_ADJUSTMENT_X = D31.SPGD30_TRACKED_ADJUSTMENT_X  
    AND D30.SPGD30_LAST_TOUCH_Y = D31.SPGD30_LAST_TOUCH_Y  
INNER JOIN CSPGA04_RATING_ELEMENT_MSTR A04
    ON D31.SPGA04_RATING_ELEMENT_D = A04.SPGA04_RATING_ELEMENT_D  
CROSS APPLY
(
    select J02.SPGJ02_MSG_CODE_X  + ', '
    from CSPGJ02_MSG_OBJ J02
    where A04.SPGJ02_MSG_K = J02.SPGJ02_MSG_K  
    FOR XML PATH('')
) J02 (comments)
WHERE D30.SPGA02_BUSINESS_TYPE_C = 'serv'  
    AND D30.SPGA03_REGION_C = 'ap'  
    AND D30.SPGD30_SHIP_SITE_C = '0134a'  
ORDER BY D30.SPGD30_SHIP_SITE_C ASC, D30.SPGD30_RATING_MONTH_Y DESC, D30.SPGD30_LAST_TOUCH_Y DESC; 
```

注意：您会注意到我将您的查询更改为使用`JOIN`语法而不是逗号分隔的表和`WHERE`子句中的连接。这是标准的 ANSI 语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:55:51.853

如果要在一列中显示多列，可以这样写：

```
SELECT CAST([MyIntegerId] AS varchar(10)) + ' - ' + [Column1]+ ' - ' +CAST([MyDateTimeColumn] AS varchar(10)) + ' - ' + [Column2] AS 'My Merged Column'
FROM Mytable 
```

如果您想将多列分组为单个列作为字符串 - 这篇[文章](http://blog.sqlauthority.com/2012/09/14/sql-server-grouping-by-multiple-columns-to-single-column-as-a-string/)应该可以帮助您：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:33:14.710

使用 XML PATH('')

```
SELECT 
    D30.SPGD30_SHIP_SITE_C AS SHIPSITE,  
    D30.SPGD30_RATING_MONTH_Y AS RATINGMONTH,  
    D30.SPGD30_PRIOR_SCORE_R AS PRIOR, 
    D30.SPGD30_REVISED_SCORE_R AS REVISED,  
    CASE WHEN (CHARINDEX('-',D30.SPGD30_TRACKED_ADJUSTMENT_X) > 0 ) THEN CONVERT( VARCHAR(8), CAST(D30.SPGD30_TRACKED_ADJUSTMENT_X AS DATETIME) , 1) ELSE D30.SPGD30_TRACKED_ADJUSTMENT_X END ADJUSTMENTS,  
    STUFF(JO2.COMMENTS, 1, 1, '') AS COMMENTS,  
    D30.SPGD30_LAST_TOUCH_Y AS LASTUPDATED,  
    D30.SPGD30_LAST_TOUCH_C AS LASTUPDATEDCDSID   
FROM  
    CSPGD30_TRACKING D30 
CROSS JOIN CSPGD31_TRACKING_RATING_ELEMNT D31
CROSS JOIN CSPGA04_RATING_ELEMENT_MSTR A04
CROSS APPLY (
    SELECT
        ',' + ISNULL(JO2.SPGJ02_MSG_CODE_X, '')
    FROM CSPGJ02_MSG_OBJ JO2  
    WHERE A04.SPGJ02_MSG_K = JO2.SPGJ02_MSG_K  
    FOR XML PATH('')
) AS JO2 (COMMENTS)
WHERE  
    D30.SPGA02_BUSINESS_TYPE_C = D31.SPGA02_BUSINESS_TYPE_C  
AND 
    D30.SPGA03_REGION_C = D31.SPGA03_REGION_C  
AND 
    D30.SPGD30_SHIP_SITE_C = D31.SPGD30_SHIP_SITE_C  
AND 
    D30.SPGD30_RATING_MONTH_Y = D31.SPGD30_RATING_MONTH_Y  
AND 
    D30.SPGD30_TRACKED_ADJUSTMENT_X = D31.SPGD30_TRACKED_ADJUSTMENT_X  
AND 
    D30.SPGD30_LAST_TOUCH_Y = D31.SPGD30_LAST_TOUCH_Y  
AND 
    D31.SPGA04_RATING_ELEMENT_D = A04.SPGA04_RATING_ELEMENT_D  
AND 
    D30.SPGA02_BUSINESS_TYPE_C = 'serv'  
AND 
    D30.SPGA03_REGION_C = 'ap'  
AND 
    D30.SPGD30_SHIP_SITE_C = '0134a'  
ORDER BY   
    D30.SPGD30_SHIP_SITE_C ASC  ,
    D30.SPGD30_RATING_MONTH_Y DESC  ,
    D30.SPGD30_LAST_TOUCH_Y DESC 
```

这将制作一个逗号分隔的评论列表。

# android - 在设置中存储新数据

> ID：14933209
> 
> 赞同：0
> 
> 时间：2013-02-18T09:38:14.990
> 
> 标签：android, settings, store, android-preferences

在我的应用程序中，用户可以保存程序将连接到的服务器配置文件。由于我不知道用户将添加的连接配置文件的数量，我不能简单地将其放入`SettingsActivity`.

由于我不想再打扰 XML 文件，我想我可以像这样保存 SharedPreferences：

```
server1hostname
server1username
server1password
server2hostname
server2username
server2password
server3hostname
server3username
server3password 
```

第一个问题：如果我想将所有内容保存在标准首选项文件中（与在某处创建自己的文件相反），是否有更好的方法？

第二个问题：我已经或多或少地实现了这一点。奇怪的是：它适用于现有设置（最初是通过 a 创建的`SettingsActivity`），但不适用于新条目。

这是源代码（`Powerline`是服务器配置文件的类名）：

```
@Override
public void onBackPressed() {
    super.onBackPressed();

    // Save powerline item
    Powerline newPowerline = new Powerline();
    newPowerline.setAddress(etAddress.getText().toString());
    newPowerline.setSendPort(Integer.parseInt(etSendPort.getText().toString()));

    newPowerline.setReceivePort(Integer.parseInt(etReceivePort.getText().toString()));
    newPowerline.setUsername(etUsername.getText().toString());
    newPowerline.setPassword(etPassword.getText().toString());

    int powerlinePositionInSettings = getIntent().getIntExtra("powerlinePositionInSettings", -1);

    if (option.equals("create"))    {
        if (newPowerline.create(this, powerlinePositionInSettings))
            finish();
    } else {
        if (powerlinePositionInSettings >= 0)
            if (newPowerline.change(this, powerlinePositionInSettings))
                finish();
    }
} 
```

这是`Powerline`该类的创建函数：

```
public boolean create(Context context, int powerlinePositionInSettings) {
    String positionString = String.valueOf(powerlinePositionInSettings);        
    Log.i("Powerline", "Saving new powerline to settings to position " + positionString + ".");

    try {
        SharedPreferences.Editor prefsEditor = PreferenceManager.getDefaultSharedPreferences(context).edit();
        prefsEditor.putString("powerline" + positionString + "Address", this.getAddress());
        prefsEditor.putString("powerline" + positionString + "SendPort", String.valueOf(this.getSendPort()));
        prefsEditor.putString("powerline" + positionString + "ReceivePort", String.valueOf(this.getReceivePort()));
        prefsEditor.putString("powerline" + positionString + "Username", this.getUsername());
        prefsEditor.putString("powerline" + positionString + "Password", getPassword());

        Log.i("Prefs", "Saving \"" + "powerline" + positionString + "Address" + "\" to be \"" + this.getAddress() + "\"");

        return prefsEditor.commit();
    } catch(Exception e) {
        e.printStackTrace();
        return false;
    }
} 
```

这是`Powerline`该类的更改功能：

```
public boolean change(Context context, int powerlinePositionInSettings) {
    String positionString = String.valueOf(powerlinePositionInSettings);
    Log.i("Powerline", "Saving powerline to settings to position " + positionString + ".");

    try {
        SharedPreferences.Editor prefsEditor = PreferenceManager.getDefaultSharedPreferences(context).edit();
        prefsEditor.putString("powerline" + positionString + "Address", this.getAddress());
        prefsEditor.putString("powerline" + positionString + "SendPort", String.valueOf(this.getSendPort()));
        prefsEditor.putString("powerline" + positionString + "ReceivePort", String.valueOf(this.getReceivePort()));
        prefsEditor.putString("powerline" + positionString + "Username", this.getUsername());
        prefsEditor.putString("powerline" + positionString + "Password", getPassword());

        Log.i("Prefs", "Saving \"" + "powerline" + positionString + "Address" + "\" to be \"" + this.getAddress() + "\"");

        return prefsEditor.commit();
    } catch(Exception e) {
        e.printStackTrace();
        return false;
    }
} 
```

更改功能存储的值确实被保存了。create 函数保存的新值不是。

有人有想法吗？我没有看到这两个功能有任何显着差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:49:56.180

第一：不要创建文件来存储用户数据。而不是这个，创建一个数据库。因此，您可以读取、写入或更改数据。对此有一些 tuts： [http](http://thenewboston.org/list.php?cat=6) ://thenewboston.org/list.php?cat=6在此页面中，您可以观看从 #111 到 #124 的 tuts。他们会教你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:30:51.800

我将使用这种方法。

用法：

// 创建电力线

`new Powerline("hostname", "username", "password", 8080, 9090).create(this);`

//更新所有电力线

```
List<Powerline> powerlines = Powerline.getAll(this);
    for (Powerline p : powerlines) {
        p.hostname = p.hostname + " updated";
        p.update(this);
    } 
```

PS：经过测试的代码，根据您的要求进行修改：

```
import java.util.ArrayList;
import java.util.List;
import java.util.Map;

import android.content.Context;
import android.content.SharedPreferences;
import android.preference.PreferenceManager;

public class Powerline {
private int _id;
public String hostname;
public String username;
public String password;
public int inPort;
public int outPort;

public Powerline(String hostname, String username, String password,
        int inPort, int outPort) {
    super();
    this.hostname = hostname;
    this.username = username;
    this.password = password;
    this.inPort = inPort;
    this.outPort = outPort;
}

public Powerline(String powerlineString) {
    String[] vars = powerlineString.split(":");
    _id = Integer.parseInt(vars[0]);
    hostname = vars[1];
    inPort = Integer.parseInt(vars[2]);
    outPort = Integer.parseInt(vars[3]);
    password = vars[4];
    username = vars[5];
}

public void create(Context context) {
    save(context, increamentKey(context));
}

public void update(Context context) {
    save(context, _id);
}

private void save(Context context, int id) {
    SharedPreferences.Editor ed = PreferenceManager
            .getDefaultSharedPreferences(context).edit();
    ed.putString("powerline:" + id, toString());
    ed.commit();
}

@Override
public String toString() {
    return _id + ":" + hostname + ":" + inPort + ":" + outPort + ":"
            + password + ":" + username;
}

public static List<Powerline> getAll(Context context) {
    SharedPreferences p = PreferenceManager
            .getDefaultSharedPreferences(context);
    List<Powerline> powerlines = new ArrayList<Powerline>();
    Map<String, ?> all = p.getAll();
    for (String key : all.keySet()) {
        if (key.startsWith("powerline:")) {
            powerlines.add(new Powerline(p.getString(key, null)));
        }
    }
    return powerlines;
}

private int increamentKey(Context context) {
    int key = PreferenceManager.getDefaultSharedPreferences(context)
            .getInt("_id", -1);
    PreferenceManager.getDefaultSharedPreferences(context).edit()
            .putInt("_id", ++key).commit();
    // also assign it to current object
    _id = key;
    return key;
}
} 
```

# vb.net - 禁用，而不是隐藏标签

> ID：14933212
> 
> 赞同：-2
> 
> 时间：2013-02-18T09:38:23.590
> 
> 标签：vb.net, label, disabled-control

我想在单击标签后立即禁用它，但是代码隐藏了标签。

我想要的是禁用它（使深灰色和不可点击），而不是让它消失。

```
 Label3.Enabled = False 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:46:11.803

添加您的 onclick 事件，如下所示：

```
AddHandler Label3.Click, AddressOf MyClickMethod 
```

跟踪您的点击状态并像这样实现您的方法：

```
Private _isActive As Boolean

Public Sub MyClickMethod(ByVal o As Object, ByVal e As EventArgs)
   If _isActive Then
       RemoveHandler Label3.Click, AddressOf MyClickMethod
       _isActive = False
   Else
       AddHandler Label3.Click, AddressOf MyClickMethod
       _isActive = True
   EndIf
End Sub 
```

可能是我错过了一些语法，在视觉工作室之外打字

# javascript - 打开 id 以特定单词开头的树节点

> ID：14933213
> 
> 赞同：1
> 
> 时间：2013-02-18T09:38:24.743
> 
> 标签：javascript, jquery, jquery-plugins, jquery-selectors, jstree

我正在使用 jsTree，到目前为止它看起来不错。

我有一个节点列表，其 id 会随着每个新节点（g1，g2，g3 ...和其他一些节点，如 k1，k2，k3）而递增

我可以通过使用在文档加载时打开特定节点

```
 "core": { 
                "animation": 0,
                "open_parents": true,
                "initially_open": ['g1']
                }, 
```

但是我想打开所有以 'g' 而不是 'k' 开头的节点，可以使用 $(id^=g) 之类的东西吗？

**更新：**

节点是通过 web 服务动态创建的，例如

```
 Dim oSB1 As StringBuilder = New StringBuilder
oSB1.Append(" <h5 >JSTree</h5> <div id='divtree' ><ul id='tree'> <li id='g1'><a       href='#' class='usr'>1st Node</a><ul> <li><a href='#'  rel='file'>1.1</a></li><li><a href='#'  class='usr'>1.2</a></li><li><a href='#'  class='file'>1.3</a></li></ul></li></ul><ul><li id='g2'><a href='#' class='usr'>2nd Node</a><ul> <li><a href='#'  rel='file'>2.1</a></li><li><a href='#' >2.2</a></li></ul></ul> <ul><li id='k2'><a href='#' class='usr'>3rd Node</a><ul> <li><a href='#'  rel='file'>3.1</a></li><li><a href='#' >3.2</a></li></ul></ul> <ul><li id='k2'><a href='#' class='usr'>4th Node</a><ul> <li><a href='#'  rel='file'>4.1</a></li><li><a href='#' >4.2</a></li></ul></ul></div>")
Return oSB1.ToString 
```

从 web 服务返回的数据分配给 jstree，因此我只需要打开 id 以“g”而不是“k”开头的节点，在上面的示例中只有 2 个节点，但想象一下是否有超过100个节点。

这棵树是这样称呼的

```
 $("#G2").html(data.d);
$("#divtree").jstree(
                  {
                     "state": "open",
                      "animated": "slow",
                      "plugins": ["themes", "html_data", "ui", "crrm", "contextmenu"],

                        //working
                      "core": {
                          "animation": 0,
                          "open_parents": true,
                          "initially_open": ['g1']
                      },

                      "contextmenu": {
                          "items": function ($node) {
                              return {
                                  "Create": {
                                      "label": "Create a new Node",
                                      "action": function (obj) {
                                          $("#divtree").jstree("create_node", function () { alert("are you sure?") }, true);
                                          this.create(obj);
                                      }
                                  },
                                  "Rename": {
                                      "label": "Rename Node",
                                      "action": function (obj) {
                                          $("#divtree").jstree("rename_node", function () { alert("you are trying to rename") }, true);
                                          this.rename(obj);

                                      }
                                  },
                                  "Delete": {
                                      "label": "Delete Node",
                                      "action": function (obj) {
                                          $("#divtree").jstree("delete_node", function () { alert("Really!!?") }, true);
                                          this.remove(obj);

                                      }
                                  }
                              };
                          }
                      }

                  }); 
```

她只有 id 为“g1”的节点打开，而我想打开所有以 id 为“g”开头的节点有没有办法让它运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:59:52.053

jsTree 非常非常好，但它的文档确实有一些不足之处。我也为此苦苦挣扎了一段时间，最后想出了这个 - [选择性地扩展/收缩 jsTree 节点](https://stackoverflow.com/questions/12095601/jstree-node-expand-collapse/12159305#12159305)

这可能不会直接回答您的具体问题，但我认为它可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T21:48:34.247

生成 json 时，您可以仅`"state" => "open"`将其用于要在加载时打开的节点。所以逻辑在生成 json 而不是 jsTree 本身的代码中。

阅读更多[关于 json_data 插件的文档](http://www.jstree.com/documentation/json_data)

以 JSON 格式提供数据时需要遵循的基本结构是：

```
{
    "data" : "node_title",  // omit `attr` if not needed; the `attr` object gets passed to the jQuery `attr` function
    "attr" : { "id" : "node_identificator", "some-other-attribute" : "attribute_value" }, // `state` and `children` are only used for NON-leaf nodes
    "state" : "closed", // or "open", defaults to "closed"
    "children" : [ /* an array of child nodes objects */ ]
} 
```

# php - 未定义的变量 + 函数不返回变量

> ID：14933214
> 
> 赞同：0
> 
> 时间：2013-02-18T09:38:34.240
> 
> 标签：php

好的，这是我的代码：

```
function payCalc($hours, $wage, $overtime, $paycheck) {
if ($hours <= 40) {
    $paycheck = $hours * $wage;
}
else {
    $paycheck = $hours * $overtime;
}
return $paycheck;

}

$name = $_POST['name'];
$dept = $_POST['dept'];
$hours = $_POST['hours'];
$wage = $_POST['wage'];

$paycheck = payCalc($hours, $wage, $overtime, $paycheck);

$overTime = $wage * 1.5;
print "Your paycheck for this period is:"; 
print $paycheck; 
print "."; 
```

问题是我在 $paycheck 上不断收到未定义的变量错误。据我所知，我已经正确设置了 if/else，但它没有返回`$paycheck`。这意味着在“ `print $paycheck;`”行上，它无法打印。我错过了什么？

编辑：还有更多内容，但这只是吐出`$name`and`$dept`变量的回声线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:42:19.840

你需要声明

```
$paycheck = payCalc(); 
```

这样您就可以从函数中获得结果。

还要考虑：

```
if ($hours <= 40) {
    $paycheck = $hours * $wage;
}
else {
    $paycheck = $hours * $overtime; 
```

也就是说，填充 $paycheck。

最后，考虑其他用户的建议：如果要使用外部变量，则需要将它们发送到函数：

```
function payCall($hours, $wage, $overtime) {
   ...
} 
```

然后在调用函数时使用它们：

```
$paycheck = payCalc($hours, $wage, $overtime); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:41:53.530

在函数中，您不能从外部调用变量。

你的函数不可能知道`$paycheck.`

像这样做：

```
function payCall($hours, $wage, $overtime, $paycheck) {
 //DO STUFF
return $paycheck;
} 
```

并这样称呼它：

```
echo payCall($hours, $wage, $overtime, $paycheck); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:43:47.560

试试这个：

```
 if( isset($_POST['name']) && isset($_POST['dept']) && isset($_POST['hours']) && isset($_POST['wage']){
    $paycheck = '';
    $name = $_POST['name'];
    $dept = $_POST['dept'];
    $hours = $_POST['hours'];
    $wage = $_POST['wage'];

    $overTime = $wage * 1.5;

    function payCalc() {
        if ($hours <= 40) {
        $paycheck =$hours * $wage;
    }
    else {
        $paycheck = $hours * $overtime;
    }
    return $paycheck;
}

print "Your paycheck for this period is:"; 
print payCalc(); 
print ".";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T09:46:41.090

好吧，您还没有真正在函数中设置变量“paycheck”。

在 $hours * $overtime 和 $hours * $wage 之前设置变量 $paycheck。

但是，在能够访问这些之前，您必须将它们设置为参数。

代码应该是这样的：

```
$name = $_POST['name'];
$dept = $_POST['dept'];
$hours = $_POST['hours'];
$wage = $_POST['wage'];

$overTime = $wage * 1.5;

function payCalc($hours, $wage, $overtime) {
    if ($hours <= 40) {
        $paycheck = $hours * $wage;
    }
    else {
        $paycheck = $hours * $overtime;
    }
    return $paycheck;
}

print "Your paycheck for this period is:"; 
print payCalc($hours, $wage, $overTime); 
print "."; 
```

该函数现在返回在 if 语句和 else 语句中设置的变量“paycheck”。

这对你有意义吗？

最好的，

尼古拉杰普森

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T09:49:22.107

```
/// COPY AND PASTE THE BELOW CODE

$paycheck = '';

$name = $_POST['name'];

$dept = $_POST['dept'];

$hours = $_POST['hours'];

$wage = $_POST['wage'];

$overTime = $wage * 1.5;

function payCalc($paycheck,$hours,$wage,$overTime) {

    if ($hours <= 40) {

       $paycheck = $hours * $wage;

    }

    else {

       $paycheck =  $hours * $overTime;

    }

    return $paycheck;

}

print "Your paycheck for this period is:"; 

print payCalc($paycheck,$hours,$wage,$overTime); 

print "."; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-18T09:42:56.090

尝试使用全局关键字。

```
$paycheck = '';
$name = $_POST['name'];
$dept = $_POST['dept'];
$hours = $_POST['hours'];
$wage = $_POST['wage'];

$overTime = $wage * 1.5;

function payCalc() {
    global $hours,$wage,$overtime,$paycheck;
    if ($hours <= 40) {
        $hours * $wage;
    }
    else {
        $hours * $overtime;
    }
    return $paycheck;
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-18T09:46:03.730

您需要使用**global**关键字来引用全局变量：

```
$paycheck = '';
$name = $_POST['name'];
$dept = $_POST['dept'];
$hours = $_POST['hours'];
$wage = $_POST['wage'];

$overTime = $wage * 1.5;

function payCalc() {
    global $hours, $wage, $overtime;
    $paycheck = 0;
    if ($hours <= 40) {
        $paycheck = $hours * $wage;
    }
    else {
        $paycheck = $hours * $overtime;
    }
    return $paycheck;
}

$paycheck = payCalc();
print "Your paycheck for this period is:"; 
print $paycheck; 
print "."; 
```

# android - Android Facebook 每次都要求登录？

> ID：14933215
> 
> 赞同：1
> 
> 时间：2013-02-18T09:38:37.790
> 
> 标签：android, facebook, facebook-graph-api

在我集成 facebook 登录的应用程序中，facebook 登录工作正常，但每次都要求登录。

我通过 facebook 登录工作正常，在我的应用程序中使用应用程序请求，而应用程序请求也要求 facebook 登录。

我想避免告诉我一些想法来做到这一点，

我的登录代码：

```
Session.openActiveSession(Notication_Webview.this, true, new Session.StatusCallback() {
@Override
public void call(final Session session, SessionState state, Exception exception) {
// TODO Auto-generated method stub
if(session.isOpened()){

Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {
@Override
public void onCompleted(GraphUser user, Response response) {
// TODO Auto-generated method stub
if(user!=null){

try{            
userName=user.getFirstName();//obj.getString("first_name");
facebookId=user.getId();//obj.getString("id");  
}catch (Exception e) {
Log.e(tag, "getUserIdMethod--->"+e);
}

}
}
});                 
}
}
}); 
```

在此应用程序请求代码中，

```
Session session = Session.getActiveSession();
Facebook mFb = new Facebook("app id");
Bundle params = new Bundle();
params.putString("to", userIDString);
params.putString("message", Message);
mFb.dialog(this.getParent(), "apprequests",
params, new DialogListener() {

public void onComplete(Bundle values) {
// TODO Auto-generated method stub
}

public void onFacebookError(FacebookError e) {
// TODO Auto-generated method stub
}

public void onError(DialogError e) {
// TODO Auto-generated method stub
}

public void onCancel() {
// TODO Auto-generated method stub
}
}); 
```

mFb.dialod 方法：

```
 @Deprecated
    public void dialog(Context context, String action, Bundle parameters, final DialogListener listener) {
        parameters.putString("display", "touch");
        parameters.putString("redirect_uri", REDIRECT_URI);

        if (action.equals(LOGIN)) {
            parameters.putString("type", "user_agent");
            parameters.putString("client_id", mAppId);
        } else {
            parameters.putString("app_id", mAppId);
            // We do not want to add an access token when displaying the auth dialog.
            if (isSessionValid()) {
                parameters.putString(TOKEN, getAccessToken());
            }
        }

        if (context.checkCallingOrSelfPermission(Manifest.permission.INTERNET) != PackageManager.PERMISSION_GRANTED) {
            Util.showAlert(context, "Error", "Application requires permission to access the Internet");
        } else {
            new FbDialog(context, action, parameters, listener).show();
        }
    } 
```

告诉我如何避免第二次登录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T10:28:31.757

用户登录后，获取**访问令牌并使用**[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)将它们保存在您的设备中。

下次用户打开您的应用程序时，打开您的 SharedPreference 文件并从中**检索**访问令牌的值。

从存储中检索值后，检查会话是否仍然有效或未使用**`isSessionValid()`**.

如果会话仍然有效，则直接登录用户（无需再次询问详细信息）并确保在他登录时**更新 SharedPreferences 中访问令牌的值**。这样访问令牌的到期时间将延长每次用户登录时。

**`clear()`**此外，当用户注销时，不要忘记SharedPreference 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:48:38.617

当您登录会话时，会打开一个静态标志并更新。检查标志后继续执行 isSession()。当您再次注销时重置静态标志。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-18T09:43:40.750

当用户登录时，将用户名和密码存储在某处。您可以为此使用 SQLite。如果硬件注销，则销毁它。当用户再次打开应用程序时，检查数据库中是否有数据。如果是，则直接将其传递给 facebook，否则要求用户再次登录。

# javascript - 我们如何只为第一组孩子添加相同的班级

> ID：14933218
> 
> 赞同：-1
> 
> 时间：2013-02-18T09:38:43.150
> 
> 标签：javascript, jquery, html, css

我只想为嵌套的 ul li 列表中的第一组列出的项目添加类。

```
<ul>
<li class="first-group">
    <ul>
        <li></li>
    </ul>
</li>
<li class="first-group"></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:50:40.730

jQuery

```
$('.list-class>li').addClass('your-class-name') 
```

CSS

```
.list-class>li {
    /* your style*/
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:57:48.990

[http://jsfiddle.net/ShibinRagh/z87he/](http://jsfiddle.net/ShibinRagh/z87he/)

设置类包装器 div

```
 $('.menu>ul>li').addClass('test'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:39:47.810

检查此[链接](https://developer.mozilla.org/en-US/docs/CSS/%3afirst-child)

```
.first-group:first-child{
you class details here
}

element:first-child { style properties } 
```

# maple - 如何强制 maple 进行链式微分？

> ID：14933220
> 
> 赞同：1
> 
> 时间：2013-02-18T09:38:49.467
> 
> 标签：maple, differentiation

在微分函数时，我通常不清楚，在哪些情况下 maple 执行链微分，何时不执行。

让我们看一个例子：

```
f := (x, y) -> r(x)*M(y);
g := (x, y) -> h(x, f(x,y));
A := D[2](g); 
```

然后`A(a,b)`给出只是

```
D[2](g)(a,b) 
```

**问题：**为什么 Maple 不通过应用链式规则的定义来执行微分？我怎样才能让枫树这样做？

更令人费解的是，在这个更简单的示例中，maple 的行为如我所愿：

```
f := 'f';
g := (x, y) -> h(x, f(x,y));
A := D[2](g); 
```

然后`A(a,b)`返回

```
D[2](h)(a, f(a, b))*D[2](f)(a, b) 
```

也许这有助于解决问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:48:36.830

这有用吗？

```
restart:

f := (x, y) -> r(x)*M(y):
g := (x, y) -> h(x, f(x,y)):

#diff(g(x,y),y);
#convert(diff(g(x,y),y),D);

unapply(convert(diff(g(x,y),y),D),[x,y]);

              (x, y) -> D[2](h)(x, r(x) M(y)) r(x) D(M)(y) 
```

# css - 将外部 css 文件复制到 grails 中的 web-app css 文件夹中

> ID：14933225
> 
> 赞同：0
> 
> 时间：2013-02-18T09:39:06.727
> 
> 标签：css, grails, environment-variables

我有一个需要在 gsp 页面上阅读的外部 css 文件。

我创建了一个环境变量作为“SAM_THEME”。

在我的 bootstrap.groovy 文件中，我已经阅读了外部 css 文件路径。

```
 def init = { servletContext ->
  String SAM_THEME=System.getenv("SAM_THEME");
print "VCAP_SERVICES"+SAM_THEME;
    servletContext["customcss"] =SAM_THEME;

 } 
```

当我尝试访问 gsp 页面中的 servlet 上下文时如何。我能够获取外部 css 文件路径，但 grails 应用程序没有读取它。

```
 <link rel="stylesheet"
href="${resource(dir: 'css', file: application.customcss)}"
type="text/css"> 
```

由于此方法不起作用，因此有任何其他方法可以在引导时将外部 css 文件直接复制到 web-app/css 文件夹中，以便我可以直接在我的 gsp 页面中访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:46:30.243

在您的 BootStrap 中，您可以获得 css 文件夹的路径：

```
class BootStrap {

  def init = { servletContext ->
    println new File(servletContext.getRealPath("/WEB-INF/css")).getAbsolutePath();
  }
} 
```

然后只需将您的文件复制到该位置即可。

# php - 如何在 symfony 中为枚举生成实体和模式

> ID：14933228
> 
> 赞同：19
> 
> 时间：2013-02-18T09:39:13.557
> 
> 标签：php, symfony, symfony-2.1

我正在尝试为我的联系信息生成实体。为此，我首先使用以下语法创建实体，其中我创建了一个枚举字段。

```
php app/console doctrine:generate:entity --entity="BannerTestBundle.contact" --fields="name:string(255) lastname:string(255) phone:integer(10) gender:enum("male","female") message:text". 
```

上面的命令生成实体类，但是当我试图从类生成“实体”时，它会显示命令错误。

```
 php app/console doctrine:generate:entities Banner/TestBundle/Entity/contact 
```

它将显示以下错误。

```
[Doctrine\Common\Annotations\AnnotationException]
[Semantical Error] Couldn't find constant male, property Banner\TestBundle\
Entity\contact::$gender.

doctrine:generate:entities [--path="..."] [--no-backup] name 
```

我想生成具有以下字段的数据库：

```
Contact.table
Name-string(255)
LastName-string(255)
Phone:integer(10)
gender:enum("male","female")
message:text 
```

请帮忙，因为我是 symfony 的新手

这是联系实体文件

```
 <?php

  namespace Banner\TestBundle\Entity;

   use Doctrine\ORM\Mapping as ORM;

  /**
 * contact
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Banner\TestBundle\Entity\contactRepository")
 */
 class contact
{
/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string
 *
 * @ORM\Column(name="name", type="string", length=255)
 */
private $name;

/**
 * @var string
 *
 * @ORM\Column(name="lastname", type="string", length=255)
 */
private $lastname;

/**
 * @var enum
 *
 * @ORM\Column(name="gender", type="enum", length=male,female)
 */
private $gender;

/**
 * @var integer
 *
 * @ORM\Column(name="phone", type="integer", length=12)
 */
private $phone;

/**
 * @var string
 *
 * @ORM\Column(name="message", type="text")
 */
private $message;

/**
 * Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set name
 *
 * @param string $name
 * @return contact
 */
public function setName($name)
{
    $this->name = $name;

    return $this;
}

/**
 * Get name
 *
 * @return string 
 */
public function getName()
{
    return $this->name;
}

/**
 * Set lastname
 *
 * @param string $lastname
 * @return contact
 */
public function setLastname($lastname)
{
    $this->lastname = $lastname;

    return $this;
}

/**
 * Get lastname
 *
 * @return string 
 */
public function getLastname()
{
    return $this->lastname;
}

/**
 * Set gender
 *
 * @param \enum $gender
 * @return contact
 */
public function setGender(\enum $gender)
{
    $this->gender = $gender;

    return $this;
}

/**
 * Get gender
 *
 * @return \enum 
 */
public function getGender()
{
    return $this->gender;
}

/**
 * Set phone
 *
 * @param integer $phone
 * @return contact
 */
public function setPhone($phone)
{
    $this->phone = $phone;

    return $this;
}

/**
 * Get phone
 *
 * @return integer 
 */
public function getPhone()
{
    return $this->phone;
}

/**
 * Set message
 *
 * @param string $message
 * @return contact
 */
public function setMessage($message)
{
    $this->message = $message;

    return $this;
}

/**
 * Get message
 *
 * @return string 
 */
public function getMessage()
{
    return $this->message;
}
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-18T11:06:48.273

您的注释格式不正确。尝试这个 ：

```
@ORM\Column(name="gender", type="string", columnDefinition="enum('male', 'femelle')") 
```

并且不要忘记添加

```
mapping_types:
    enum: string 
```

以下

```
doctrine:
     dbal:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   %database_name%
        user:     %database_user%
        password: %database_password%
        charset:  UTF8 
```

在`app/config/config.yml`文件中。

更多关于 enum 的信息在[这里](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/cookbook/mysql-enums.html)。

# node.js - 使用 nodejs 客户端访问 golang websocket 服务器

> ID：14933235
> 
> 赞同：6
> 
> 时间：2013-02-18T09:39:55.257
> 
> 标签：node.js, websocket, go

我是 NodeJS 的新手。假设我有一个使用 Golang 的 websocket 包实现的回显服务器：

```
包主

进口 （
    “code.google.com/p/go.net/websocket”
    “日志”
    “网络/http”
)

func EchoServer(ws *websocket.Conn) {
    var 消息字符串
    websocket.Message.Receive(ws, &msg)
    log.Printf("收到的消息：%s\n", msg)
    websocket.Message.Send(ws, msg)
}

功能主要（）{
    http.Handle("/echo", websocket.Handler(EchoServer))
    错误 := http.ListenAndServe(":8082", nil)
    如果错误！= nil {
        恐慌（错误。错误（））
    }
}

```

nodejs 客户端代码应该是什么样的？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-12-19T01:15:04.913

作为 WebSocket-Node 库的作者，我可以向您保证，您无需为了不使用子协议而修改 WebSocket-Node 库代码。

上面的示例代码错误地显示为 connect() 函数的 subprotocol 参数传递了一个空字符串。如果您选择不使用子协议，则应将 JavaScript 的 null 值作为第二个参数传递，或者传递一个空数组（该库能够按需求降序向远程服务器建议多个支持的子协议），但不能为空细绳。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-19T16:07:54.240

我想[这](https://github.com/pgriess/node-websocket-client)就是你要找的。使用您的服务器代码的快速示例：

```
var WebSocketClient = require('websocket').client;

var client = new WebSocketClient();

client.on('connectFailed', function(error) {
    console.log('Connect Error: ' + error.toString());
});

client.on('connect', function(connection) {
    console.log('WebSocket client connected');
    connection.on('error', function(error) {
        console.log("Connection Error: " + error.toString());
    });
    connection.on('close', function() {
        console.log('echo-protocol Connection Closed');
    });
    connection.on('message', function(message) {
        if (message.type === 'utf8') {
            console.log("Received: '" + message.utf8Data + "'");
        }
    });

    connection.sendUTF("Hello world");
});

client.connect('ws://127.0.0.1:8082/echo', "", "http://localhost:8082"); 
```

要使其正常工作，您需要修改`lib/WebSocketCLient.js`. 注释掉这些行（我机器上的第 299-300 行）：

```
 //this.failHandshake("Expected a Sec-WebSocket-Protocol header.");
        //return; 
```

由于某种原因，您提供的 websocket 库似乎没有发送“Sec-Websocket-Protocol”标头，或者至少客户端没有找到它。我没有做太多的测试，但可能应该在某个地方提交错误报告。

这是一个使用 Go 客户端的示例：

```
package main

import (
    "fmt"
    "code.google.com/p/go.net/websocket"
)

const message = "Hello world"

func main() {
    ws, err := websocket.Dial("ws://localhost:8082/echo", "", "http://localhost:8082")
    if err != nil {
        panic(err)
    }
    if _, err := ws.Write([]byte(message)); err != nil {
        panic(err)
    }
    var resp = make([]byte, 4096)
    n, err := ws.Read(resp)
    if err != nil {
        panic(err)
    }
    fmt.Println("Received:", string(resp[0:n]))
} 
```

# git - 将 git 提交与 Team Foundation 工作项相关联

> ID：14933236
> 
> 赞同：24
> 
> 时间：2013-02-18T09:39:58.550
> 
> 标签：git, tfs, interop, git-tfs, git-tf

**语境**

用于开发的 GitHub Enterprise 安装。每个开发者都有自己的公共仓库，组织也有权威的仓库。拉取请求用于代码审查，我们松散地遵循 nvie 的[git 流](http://nvie.com/posts/a-successful-git-branching-model/)分支模型。

用于问题跟踪和部署的 TFS 安装（发布分支）。我们将发布分支镜像到 TFS 存储库中。

**工作项目**

现在困难的部分是：我们如何将 git 提交（最初可能在开发人员的公共分支上完成）与 TF 工作项相关联？

**我做了什么**

我查看了以下项目以寻求帮助：

*   [Git-TFS](https://github.com/git-tfs/git-tfs)
*   [Git-TF (nodirt)](https://github.com/nodirt/git-tf)
*   [Git-TF（微软）](http://gittf.codeplex.com/)

我已经阅读了在两个 Git-TF 项目中将提交与工作项相关联的参考资料，但我不确定要使用什么工具，以及如何准确地使用它。

如果我必须在发布分支提交上运行脚本以从提交消息中提取工作项引用并将它们与发送到 TFS 的变更集相关联，我会很好。但是，允许在元数据中关联（而不是提交消息）的解决方案将是首选。

**将 TFS 中的工作项与 git 提交相关联的选项有哪些？**

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-02-21T22:01:59.853

如果您在 git commit 消息中使用 # ，如 git commit -m'fixes #123' TFS 将自动将提交添加为指定工作项中的链接项。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-18T14:01:31.707

With [git-tfs](https://github.com/git-tfs/git-tfs), you can associate workitems in a commit message using [metadatas](https://github.com/git-tfs/git-tfs/blob/master/doc/special-actions-in-commit-messages.md) (and even force commit policy!).

They are automaticaly associated when the commit are done in the TFS server ( if you use the [rcheckin command](https://github.com/git-tfs/git-tfs/blob/master/doc/commands/rcheckin.md) )

And there is even a git-note created on the git commit to have the title of the workitem and a link toward the workitem!

But to use rcheckin in a synchronisation process between git and TFS, you should before (abolutely) understand how it works!

When you rcheckin git commits in TFS, git-tfs, for each commit create the corresponding changeset in tfs and fetch the content of this changeset to recreate a git commit. So, even if it's (nearly) invisible for you in a normal worklow, you have the git commits after the rcheckin that are not the same than the original ones (there is a modification of the history!).

That could be a big problem if this git reporitory is supposted to be the central repository because every commiters will have to do a rebase. Otherwise, it shouldn't be a problem because it's completly transparent, except in special cases but easily solvable.

Not a perfect solution...

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-18T10:09:23.490

在没有关于这些 Git-TFS 工具的大量信息的情况下，请注意，您可以随时通过添加注释将元数据添加到提交（*无需*更改存储库的历史记录/SHA1）。

请参阅**[`git notes`](http://git-scm.com/2010/08/25/notes.html)**（或[本周 Git 提示：Git Notes](http://alblue.bandlem.com/2011/11/git-tip-of-week-git-notes.html)）。

通过在专用的“注释命名空间”中添加该信息，您可以从与 Git 提交关联的注释中快速存储/检索诸如工作项引用之类的信息。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-07T13:12:35.653

你应该可以在 ms git tf 中做到这一点：

`git tf checkin --associate=27631,27637`

帮助 说：

```
usage: git-tf checkin [--help] [--quiet|-q|--verbose] [--message|-m=<msg>] [--metadata|--no-metadata] [--renamemode=<all|justFiles|none>] [--deep|--shallow] [--squash=<commit id>|--autosquash]
[--resolve=<workitem id>] [--associate=<workitem id>] [--mentions] [--no-lock] [--preview|-p] [--bypass|--gated|-g=<definition>] [--keep-author|--ignore-author] [--user-map=[<file path>]]

Arguments:
    --help                Displays usage information
    --quiet, -q, --verbose
                          Determines the output detail level
    --message, -m=<msg>   Use the given <msg> as the changeset comment
    --metadata, --no-metadata
                          Determine whether to include git commit meta data in the changeset comment when checking in deep. If omitted, value provided during configure is used.
    --renamemode=<all|justFiles|none>
                          The rename mode to use when pending changes. Specify either "all", "justFiles" or "none" (default: justFiles)
    --deep, --shallow Creates a "deep" check-in, checking in a TFS changeset for each git commit since the latest TFS changeset(requires linear history or "--squash" or "--autosquash"), or
                          "shallow", checking in a single changeset for all commits.If omitted, the depth value provided during clone or configure is used.
    --squash=< commit id>, --autosquash
                          Specifies how check in should operate in the deep mode if one commit has more than one parent
    --resolve=< workitem id>
                          ID of the TFS work item to resolve during check-in
    --associate=< workitem id>
                          ID of the TFS work item to associate during check-in
    --mentions Add references in the commit comments for any work items linked to the corresponding changeset.
    --no-lock             Does not take a lock on the server path before committing (dangerous)
    --preview, -p Displays a preview of the commits that will be checked in TFS
    --bypass, --gated, -g=<definition>
                          Bypass gated check-in or specify a gated build<definition> to use
    --keep-author Use the commit author as the changeset owner when checking in deep.The commit author should be known to TFS either by his name or e-mail address.To use this option you should
                 be either a TFS project administrator or have the "Check in other users' changes" permission.
    --ignore-author Use the current authenticated user as the changeset owner.
    --user-map=[< file path >]
                          Specifies an absolute or relative path to a file providing mapping between Git repository commit authors and TFS user identities. (default: ./USERMAP) To generate a template
                          mapping file, run the checkin command in preview mode with the --keep-author and --deep options specified.

Creates a check-in of the changes in the current master branch head, provided it is parented off a commit converted from a TFS changeset. 
```

# matlab - 哪个版本的 Matlab 引入了 isrow 和 iscolumn 函数？

> ID：14933237
> 
> 赞同：0
> 
> 时间：2013-02-18T09:40:00.513
> 
> 标签：matlab

我有一个脚本，它在调用时使用 [isrow](http://www.mathworks.co.uk/help/matlab/ref/isrow.html)和[iscolumn](http://www.mathworks.co.uk/help/matlab/ref/iscolumn.html)函数，它会生成以下错误：

```
>> isrow( [1,2,3] )
??? Undefined function or method 'isrow' for input arguments of type 'double'. 
```

我可以使用内置这些功能的最低版本的 Matlab 是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:40:00.513

`isrow(V)`和`iscolumn(V)`函数可从**Matlab 2011a**获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-07T15:48:02.820

您可以使用以下代码`isrow()`

```
function Y = isrow(X)
%
% ISROW    True for row vectors.
%
%   Y = ISROW(X) returns logical 1 if X is a row vector, 0 otherwise.
%   ISROW returns 1 for scalars also.
%
%    See also: ISCOL.
%

if ndims(X)==2 & size(X,1)==1 & size(X,2)>=1
   Y = logical(1);
else
   Y = logical(0);
end 
```

[通过 MATLAB Central 获取源代码](http://www.mathworks.com/matlabcentral/fileexchange/1309-general-extra-toolbox/content/isrow.m)

# r - 如何使用 R-base 在堆积条形图中标记百分比值

> ID：14933242
> 
> 赞同：4
> 
> 时间：2013-02-18T07:08:21.480
> 
> 标签：r

我是 R 新手。我希望其他人向我解释如何使用基本的 R 绘图功能（R 基）以一致的方式在各个堆叠条内添加绝对值。我尝试使用 R 基础绘制堆积条形图，但这些值以不一致/不合逻辑的方式出现，以至于每个村庄的值都应该是 100%，但它们的总和不等于 100%。以下是正在处理的数据：

```
Village      100         200       300  400      500

Male    68.33333    53.33333        70   70 61.66667

Female  31.66667    46.66667        30   30 38.33333 
```

综上所述，共有 5 个村，数据显示了按性别访问的户主。

我使用以下命令绘制图形：

```
barplot(mydata,col=c("yellow","green")
x<-barplot(mydata,col=c("yellow","green")
text(x,mydata,labels=mydata,pos=3,offset=.5) 
```

请帮助在每个栏中分配正确的值谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-18T08:39:28.853

这始于评论，但不变成答案似乎是不公平的。要正确回答您的问题（即使在 Stack Overflow 上），我们需要知道“mydata”的结构。起初我假设它是一个有 5 行和 2 或 3 列的数据框，但在这种情况下，你的代码没有意义。但是，如果这*是*它的结构方式，那么这是一种方法来做我认为你想要的：

```
mydata <- data.frame(
    row.names =c(100, 200, 300, 400, 500),
    Male =c(68.33333, 53.33333, 70, 70, 61.66667),
    Female =c(31.66667, 46.66667, 30, 30, 38.33333))

x <- barplot(t(as.matrix(mydata)), col=c("yellow", "green"), 
    legend=TRUE, border=NA, xlim=c(0,8), args.legend=
        list(bty="n", border=NA), 
    ylab="Cumulative percentage", xlab="Village number")
text(x, mydata$Male-10, labels=round(mydata$Male), col="black")
text(x, mydata$Male+10, labels=100-round(mydata$Male)) 
```

产生以下内容：

![在此处输入图像描述](../Images/5c6e62f4bb39d2ce7cd6ee02e0c5d63e.png)

另一种方法是将所有男性文本标签的 y 值设置为 40，将所有女性文本标签设置为 80 - 这样的优点是标签的抖动更少，并且文本垂直位置不再是概念上的缺点附在数据上。

就个人而言，我一点也不喜欢这种条形图，尽管有许多针对数据可视化的罪行比简单的条形图要严重得多。图上的数字杂乱无章，影响了将数据实际映射到颜色、形状和大小的视觉效果。我宁愿一个简单的点图，如：

```
library(ggplot2)
ggplot(mydata, aes(x=row.names(mydata), y=Male)) +
  geom_point(size=4) +
  coord_flip() +
  labs(x="Village number\n", y="Percentage male") +
  ylim(0,100) +
  geom_hline(yintercept=50, linetype=2) 
```

这使

![在此处输入图像描述](../Images/6649430cbfab202510f1588579206bb8.png)

情节中的冗余混乱更少，数据与墨水的比例更高，等等。但是最后你需要制作对你的观众有意义的情节。

# c++ - 虚拟析构函数同时调用派生析构函数和基析构函数

> ID：14933244
> 
> 赞同：1
> 
> 时间：2013-02-18T09:40:32.013
> 
> 标签：c++, derived, virtual-destructor

我无法理解虚函数。当我重载一个虚函数时，是否只调用新的派生函数？还是派生函数和基函数？因为我注意到当调用虚拟析构函数时，会调用基类和派生类析构函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T09:48:25.147

在这方面，析构函数是特殊的成员函数。
如果您有一个虚拟基类析构函数，那么它将在多态删除期间正确调用 Base 以及派生类析构函数（*在基类指针指向派生类对象时调用 delete。*）。

但是，其他虚拟成员函数不具有与析构函数相同的特殊地位。只有为适当的对象类型定义的函数被调用。如果您需要调用任何其他函数，则需要明确地这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:53:52.907

派生类对象只不过是基类对象的一种包装。因此，在析构函数的情况下，应该调用两个析构函数，这是预期的行为。

在虚函数的情况下，您有机会替换基类中的函数。因此，使用基类指针保存派生类对象只会调用派生类中的虚函数。

# python - django 中的模型和数据库视图

> ID：14933246
> 
> 赞同：0
> 
> 时间：2013-02-18T09:40:33.170
> 
> 标签：python, database, django, view, model

我正在为数据库设置 django 模型，目前我的方法是将数据库表直接映射到模型。但是，在某些情况下，我实际上需要使用相对复杂的视图。一个特定情况是我有一个表（在报告中，而不是数据库中）需要显示来自相关数据库表的合并列表：

```
class Entity(Models):
    name = CharField()

class LargeEntity(Entity):
    size = FloatField()

class SmallEntity(Entity):
    type = ForeignKey(SmallEntityType) 
```

报告（和表格）需要显示：

```
Entity name - entity.name
Large/Small - 'Large' if entity is LargeEntity else 'Small'
size/type   - entity.size if entity is LargeEntity else 'type' 
```

这可以通过`CASE`SQL 中的语句来完成，但是由于这种情况在我的数据中经常发生，我宁愿找到一个更简洁的解决方案。

更改报告格式不是选项，但如果有更好的实现方式，可以更改数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:15:23.623

如果每个实体类型不包含很多属性，您可以创建一个模型，其中包含所有必填字段以及该模型中的一个或多个字段，以按类型或其他方式区分实体：

```
class Entity(Models):
    NORMAL, LARGE, SMALL = 0, 1, 2
    ETYPE = (
        (NORMAL, 'Normal'),
        (LARGE, 'Large'),
        (SMALL, 'Small'),
    )
    entity_type = IntegerField(choices=ETYPE,...)

    name = CharField()
    size = FloatField()
    smalltype = ForeignKey(SmallEntityType)
    ... 
```

# c - 当客户端和服务器要同时通话时，是否需要多线程？

> ID：14933247
> 
> 赞同：2
> 
> 时间：2013-02-18T09:40:35.647
> 
> 标签：c, multithreading, sockets, client-server, posix

我有两个关于使用套接字进行客户端服务器通信的问题。假设在这两种情况下只有 1 个客户。

1）我知道我们可以使用单个套接字在客户端和服务器之间发送和接收数据。但是在那种情况下，当服务器和客户端都试图同时发送数据时会发生什么？

2）以下哪个是最好的模型？i) 使用单线程，单套接字发送和接收 ii) 使用 2 个线程（一个发送，一个接收），单套接字 iii) 使用 2 个套接字和 2 个线程，一个发送，一个接收。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:48:01.620

连接是全双工的，这意味着发送和接收可以同时发生。因此，在回答问题一时，客户端和服务器都将能够同时从它们的套接字发送/读取数据。

至于哪种“模型”最好，这取决于您的应用程序以及您想要实现的目标。顺便说一句，您*不需要*多线程。你可以：

*   多进程（分叉）
*   使用非阻塞套接字（选择/轮询）
*   使用异步通知（信号）

所有这些都有优点和缺点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:48:24.273

对于第一个问题，不会发生什么特别的事情。TCP是全双工的，一个连接的两边可以同时发送。

由于同时发送/接收没有问题，第二个问题中的第一个选择将是最简单的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T09:49:44.113

在那种情况下，您不需要线程。套接字本身会缓冲传入的数据，直到您从文件描述符中读取它。更准确地说，从硬件开始有多个级别的缓冲区。您不会*错过*数据，因为您正在同时写入，它只是等待您，直到您下一次从套接字的文件描述符中读取。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T09:48:53.190

如果您想在多个套接字上轮询，则不需要多线程**。**您真正需要做的就是使用`select()`.

为了实现这一点，您定义了一个`FD_SET`（文件描述符集），向其中添加您想要轮询的所有套接字。你`set`交给`select()`它，它会返回所有带有待处理数据的文件描述符。

[select](http://linux.die.net/man/2/select)，[fd_set](http://linux.die.net/man/3/fd_set)和[select 教程](http://linux.die.net/man/2/select_tut)的手册页

# mapreduce - MapReduce：根据文件中的模式将一个txt文件拆分为多个文件

> ID：14933248
> 
> 赞同：2
> 
> 时间：2013-02-18T09:40:37.083
> 
> 标签：mapreduce

我有一个制表符分隔的 .txt 文件，如下所示：

> 05-12-2011 02:00:00 XYZZ
> 
> 05-12-2011 02:01:00
> 
> 05-12-2011 02:02:00
> 
> 05-12-2011 02:03:00
> 
> 05-12-2011 02:04:00 ABCD
> 
> 2011 年 5 月 12 日 02:05:00 ABCD
> 
> 2011 年 5 月 12 日 02:06:00 ABCD
> 
> 2011 年 5 月 12 日 02:07:00
> 
> 2011 年 5 月 12 日 02:08:00 ABCD

我想将数据写入不同的文件，例如将模式为“XYZZ”的文件写入一个文件，将带有“ABCD”的文件写入另一个文件。

file1.txt 将包含：

> 05-12-2011 02:01:00
> 
> 05-12-2011 02:02:00
> 
> 05-12-2011 02:03:00
> 
> 2011 年 5 月 12 日 02:07:00

file2.txt 将包含：

> 05-12-2011 02:04:00 ABCD
> 
> 2011 年 5 月 12 日 02:05:00 ABCD
> 
> 2011 年 5 月 12 日 02:06:00 ABCD

这是我想分享的代码。

```
public class WordCount2 {

  public static class TokenizerMapper2
       extends Mapper<Object, Text, Text, IntWritable>{

        private final static IntWritable one = new IntWritable(1);
        private Text word = new Text();

    public void map(Object key, Text value, Context context
                    ) throws IOException, InterruptedException {
      StringTokenizer itr = new StringTokenizer(value.toString());
      while (itr.hasMoreTokens()) {
        word.set(itr.nextToken());
        context.write(word, one);
      }
    }
  }

  public static class IntSumReducer2
       extends Reducer<Text,IntWritable,Text,IntWritable> {
    private IntWritable result = new IntWritable();

    public void reduce(Text key, Iterable<IntWritable> values, 
                       Context context
                       ) throws IOException, InterruptedException {
    /*  int sum = 0;
      for (IntWritable val : values) {
        sum += val.get();
      }
      result.set(sum);
      context.write(key, result);*/
    }
  }

  public static void main(String[] args) throws Exception {

    Configuration conf = new Configuration();
    String line; 
    String arguements[];
    String[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();

    // calculating the total number of attributes in the file
    FileReader infile = new FileReader(args[0]);
    BufferedReader bufread = new BufferedReader(infile);
    line = bufread.readLine();
    arguements = line.split(","); //for spliting fields separated by comma
    conf.setInt("argno", arguements.length); // saving that attribute value

    Job job = new Job(conf, "word count");
    job.setJarByClass(WordCount.class);
    job.setMapperClass(TokenizerMapper.class);
    job.setCombinerClass(IntSumReducer.class);
    job.setReducerClass(IntSumReducer.class);
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(IntWritable.class);
    FileInputFormat.addInputPath(job, new Path(otherArgs[0]));
    FileOutputFormat.setOutputPath(job, new Path(otherArgs[1]));
    System.exit(job.waitForCompletion(true) ? 0 : 1);
  }
} 
```

# functional-programming - 函数式编程和闭包术语的诞生

> ID：14933252
> 
> 赞同：1
> 
> 时间：2013-02-18T09:40:49.823
> 
> 标签：functional-programming, closures, lambda-calculus

我正在研究函数式编程和 lambda 演算，但我想知道 Church 的原始作品中是否也出现了闭包术语，或者它是一个与编程语言严格相关的更现代的术语。

我记得在教会的工作中有这样的术语：自由变量、封闭到……等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:45:07.307

这是一个更现代的术语，由于（正如现代 FP 中的许多东西一样），PJ Landin (1964)，[表达式的机械评估](http://www.cs.cmu.edu/~crary/819-f09/Landin64.pdf)

> 此外，我们通过一组称为“闭包”的信息来表示 λ 表达式的值，该信息包括 λ 表达式和评估它的相关环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:05:30.447

考虑 Scheme 中的以下函数定义：

```
(define (adder a)
  (lambda (x) (+ a x))) 
```

在纯 lambda 演算中不需要显式闭包的概念，因为变量替换会处理它。上面的代码片段可以翻译

```
λa λx . (a + x) 
```

当您将此应用于值`z`时，它变为

```
λx . (z + x) 
```

通过β-还原，这涉及替换。`a`如果你愿意，你可以调用这个闭包。

（该示例使用函数参数，但这适用于任何变量绑定，因为在纯 lambda 演算中，所有变量绑定都必须通过 λ 项发生。）

# ios - 具有最大十进制数的自定义 UITextField

> ID：14933256
> 
> 赞同：0
> 
> 时间：2013-02-18T09:41:08.080
> 
> 标签：ios, objective-c, uitextfield, custom-controls

我想创建一个自定义 UITextField ：

1) 只允许一位小数。2）用户可以输入的最大小数位数（将是一个属性），比如说 2。

我最好的办法是什么？

我创建了一个继承自 UITextField 的新类。

对于我在 stackoverflow 上找到的第 1 点，我应该依赖以下方法：

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string

Implementing it like this:

-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

  NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];

  NSArray *sep = [newString componentsSeparatedByString:@"."];
  if([sep count]>=2)
  {
    NSString *sepStr=[NSString stringWithFormat:@"%@",[sep objectAtIndex:1]];
    return !([sepStr length]>1);
  }
  return YES;
} 
```

第一个问题是这是 UITextField 委托的方法，不适用于我从 UITextField 继承的新对象。我希望我的自定义 UITextField 默认实现它，但没有这样的方法。

第二个问题是小数点分隔符可能是“。” 或者 ”，”。有没有办法找到填充的小数分隔符？

对于第 2 点，用户可以输入的最大小数位数，我想我会检查小数分隔符后是否已经有 2 位数字，如果是，我不会修改 UItextField.text。

谢谢

尼古拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:55:50.517

像往常一样在您的自定义中实施`UITextFieldDelegate`方法。`UITextField`

然后，您可以为委托创建一个代理，将外部调用者引用到 ViewController 设置的委托

覆盖`@property id<UITextfieldDelegate>`以返回 ViewController 设置的委托。

在您的`UITextField`子类中实现：

```
(id) init {
   self = [super init];
   if (self) {
      //register ourselves as the delegate with UITextField
      super.delegate = self;
      //custom initialization code
   }
   return self;
}

-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

  NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];

  NSArray *sep = [newString componentsSeparatedByString:@"."];
  if([sep count]>=2)
  {
    NSString *sepStr=[NSString stringWithFormat:@"%@",[sep objectAtIndex:1]];
    BOOL ret = !([sepStr length]>1);
    if(ret)
       return [_delegate textfield:textField shouldChangeCharactersInRange:range replacementString:string];
    return return NO;
  }
  return [_delegate textfield:textField shouldChangeCharactersInRange:range replacementString:string];
} 
```

基本上，确保将委托方法转发给`ViewController`他们是否应该有发言权。（因为`shouldChangeCharactersInRange:`，`ViewController`只有在可以更改文本的情况下，代表才有发言权）

protip：当您转发委托方法时，请确保它们通过检查来实现它们`respondsToSelector:`，并确保委托是非`nil`。

# nosql - 我应该什么时候使用 AQL？

> ID：14933258
> 
> 赞同：11
> 
> 时间：2013-02-18T09:41:24.277
> 
> 标签：nosql, arangodb, aql

在 ArangoDB 的上下文中，有不同的数据库 shell 来查询数据：

*   arangosh：基于 JavaScript 的控制台

*   AQL：Arangodb 查询语言，参见[http://www.arangodb.org/2012/06/20/querying-a-nosql-database-the-elegant-way](http://www.arangodb.org/2012/06/20/querying-a-nosql-database-the-elegant-way)

*   MRuby：嵌入式 Ruby

虽然我了解 JavaScript 和 MRuby 的使用，但我不确定我为什么要学习，以及我会在哪里使用 AQL。有这方面的信息吗？将 AQL 直接发布到数据库服务器的想法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T11:07:51.067

AQL 是 ArangoDB 的查询语言。它有很多方法可以查询、过滤、排序、限制和修改将返回的结果。需要注意的是，AQL 只读取数据。

***（更新：此答案针对的是 ArangoDB 的旧版本。自 2.2 版以来，功能已得到扩展，并且也可以使用 AQL 对数据库进行数据修改。有关更多信息，请访问答案末尾的文档链接.)***

您不能使用 AQL 将数据存储到数据库中。

与 AQL 相比，Javascript 或 MRuby 可以读取数据并将数据存储到数据库中。然而，与使用 AQL 开辟的可能性相比，它们的查询功能非常基本且有限。

虽然可以从 javascript 发送 AQL 查询。在 arangosh Javascript shell 中，您将发出如下 AQL 查询：

```
 arangosh> db._query('FOR user IN example FILTER user.age > 30 RETURN user').toArray()
[
  { 
    _id : "4538791/6308263", 
    _rev : "6308263", 
    age : 31, 
    name : "Musterfrau"
   }
] 
```

您可以在此处找到有关 AQL 的更多信息： [http ://www.arangodb.org/manuals/current/Aql.html](http://www.arangodb.org/manuals/current/Aql.html)

# javascript - 儿童 vs 选择器 - jQuery

> ID：14933263
> 
> 赞同：1
> 
> 时间：2013-02-18T09:41:45.180
> 
> 标签：javascript, jquery, html

为简单起见，我将缩小问题范围，如下所示。我在 click js 函数中运行了一个大代码。为了表示所有我添加了一个`alert()`

**HTML**

```
<ul>
  <li>Test li 1</li>
  <li>Test li 2</li>
  <li>Test li 3</li>
  <li>Test li 4</li>
  <li>Test li 5</li>
</ul> 
```

**JS**

方法一

```
$('ul li').click(function(){alert('hi');}); 
```

方法二

```
$('ul').children().click(function(){alert('hi');}); 
```

方法 1 和方法 2 都可以正常工作。

哪一个更好 ？使用选择器还是使用子方法更好？当我们可以使用选择器时，使用子方法的目的是什么？

***[测试小提琴](http://jsfiddle.net/yFX39/)***

我只是在掌握基础知识，希望不知道某事不是犯罪。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:48:09.503

虽然这两段代码在示例 HTML 上都能正常工作，但它们并不相同。

`.children`返回所有子元素（无论它们是否为“li”）。

`"ul li"`作为选择器返回“ul”的所有“li”后代，无论它们是否是孩子。

这两个是等效的，并且只选择“ul”父级的“li”子级：

```
$('ul > li').click(function(){alert('hi');});
$('ul').children("li").click(function(){alert('hi');}); 
```

至于哪个更好（原始问题），我怀疑没有真正的答案，这将取决于您的实际需求和 html（当您询问哪个“更好”时，您的意思是什么？性能？可维护性？）。

通常前者将使用支持您正在使用的选择器的浏览器的 CSS 选择器引擎，而后者将始终使用 jquery 构建的代码（我认为），所以在大多数情况下我会选择前者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:52:15.150

至于

> 哪一个更好 ？..

**更新**

实际上，这取决于 HTML 结构...如果以防万一，您在（第一级）中有少量`<li>`'s`ul`与子选择器一起使用会更好

你可以在 js.perf 中检查这个...[链接在这里](http://jsperf.com/children-vs-selectors)

but if you have large number of `<li>` (in first level) the children selector gets slower ..

# c++ - 将 SpriteBatch 与 Direct3D 和 XAML 一起使用

> ID：14933266
> 
> 赞同：0
> 
> 时间：2013-02-18T09:42:02.447
> 
> 标签：c++, xaml, directx, spritebatch

我创建了一个在 Windows Phone 8 上运行的项目，该项目使用由 Windows Phone SDK 提供的模板 Direct3D With XAML。我还合并了 DirectXTK 并`std::unique_ptr<DirectX::SpriteBatch> m_SB;`在 CubeRenderer.h 中声明了

当我尝试在函数 CreateDeviceResources 中分配它时：

```
m_SB.reset(new SpriteBatch(m_d3dContext.Get())); 
```

它给出了错误：未知模块中发生了“System.AccessViolationException”类型的未处理异常。

我不知道这是为什么。如果我使用 Direct3D (Native) 模板创建项目，这将非常有效。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-08T23:28:18.710

您必须将代码放入`CreateWindowSizeDependentResources`函数中，然后它应该可以正常工作。

[资源](http://directxtk.codeplex.com/discussions/443692 "资源")

# javascript - Javascript 替代 document.write 不是 innerHTML

> ID：14933267
> 
> 赞同：3
> 
> 时间：2013-02-18T09:42:03.667
> 
> 标签：javascript

我修改了一个小 js 脚本，它将日期与今天进行比较并计算差异。（我是新手）但是，它使用 document.write，我被告知这是不好的。我不知道为什么不好，人们只是说不好，从不解释为什么。无论如何，我正在寻找替代方案。innerHTML 似乎不起作用，并且此站点上回答的其他问题只是指向 DOM 操作引用而没有真正回答问题。

这是我的脚本：

```
 //Set the two dates
    var iquit =new Date(2013, 1, 15);
    today=new Date();
    //Get 1 day in milliseconds
    var one_day=1000*60*60*24;
    var day_numeric=Math.ceil((today.getTime()-iquit.getTime())/(one_day));
    //Calculate difference btw the two dates, and convert to days
    document.write("<p>"+day_numeric+
            " days have gone by since you quit smoking!</p>"+
            "<p>You have saved "+ day_numeric*7+" pounds</p>"); 
```

如果有人能告诉我一个更好的方法来写这个，那就太棒了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:50:14.813

如果您使用的是纯 JavaScript，最好的方法之一可能是：

```
var paragraph1 = document.createElement("p");
paragraph1.appendChild(document.createTextNode(day_numeric+" days have gone by since you quit smoking!"));

var paragraph2 = document.createElement("p");
paragraph1.appendChild(document.createTextNode("You have saved "+ day_numeric*7+" pounds"));

document.body.appendChild(paragraph1);
document.body.appendChild(paragraph2); 
```

100% 标准 DOM。

### 关于document.write：善恶...

我猜有些人认为`document.write`这是一种不好的做法，因为它是将原始内容输出到 (X)HTML 文档的较低级别的方式。

由于 (X)HTML 基本上是 XML 的一种方言（或至少基于 XML 和 SGML），因此编写文档的*正确*和*预期*方式是创建节点并将它们附加到整个文档中。

`document.write`在最后一个写入元素之后写入内容，当您想要决定将新创建的元素放置在文档中的哪个位置时，您会失去很多控制权。

例如，您会从从`<head>`元素中加载的 JavaScript 函数输出一个段落吗？这会很困难，因为它不一定会在体内呈现。*那太糟糕了*。

最好创建 DOM 元素/节点并使用`appendChild(...)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:46:44.990

问题[`document.write()`](https://developer.mozilla.org/en-US/docs/DOM/document.write)是如果你在 DOM 准备好之后调用它，它会覆盖现有的 DOM。这个[SO 答案](https://stackoverflow.com/a/12376186/678801)`document.write()`对为什么很少是最佳选择有更广泛的解释。

使用`.innerHTML`应该可以正常工作，但是您需要选择要添加内容的元素。所以是这样的：

```
document.getElementById("idOfSomeElement").innerHTML = "your content"; 
```

[**活生生的例子**](http://jsfiddle.net/j5WUp/)

*使用什么方法来获取正确的元素取决于您必须选择的内容，但如果可能，最简单的方法可能是将 ID 附加到要添加内容的元素，然后使用上述方法。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:49:02.463

检查此链接以了解为什么它被认为是不好的做法：[为什么 document.write 被认为是“不好的做法”？](https://stackoverflow.com/questions/802854/why-is-document-write-considered-a-bad-practice)

你是如何使用innerHTML的？

你有没有尝试过类似的东西

```
<script>
...
document.getElementById('container-id').innerHTML = "<p>"+day_numeric+" days have gone by since you quit smoking!</p>"+"<p>You have saved "+ day_numeric*7+" pounds</p>";
</script> 
```

这需要页面中某处具有 container-id id 的元素，例如：

```
<div id='container-id'></div> 
```

# r - 从R中的固定宽度文件读取矩阵

> ID：14933269
> 
> 赞同：2
> 
> 时间：2013-02-18T09:42:12.360
> 
> 标签：r, file, matrix

我是 R 世界的新手，我有一个包含这样的行系列的文件：

```
"0000010000010000000101000001000000011000000001
 0000000000000000000000010001000001001000110001
 0000100000000000000000010000000000000000010100
 0100000001100000000001001001100000010000000001
 0001000000000100010000010000000000010000000000" 
```

我想从这个字符串开始构建一个矩阵。从现在开始我写了这段代码：

```
for(line in readLines(ff)){
     line <- as.numeric(substring(line, seq(1,nchar(line),1), seq(1,nchar(line),1)))
} 
```

但它只从文件中提取行，我如何使用`line`向量来构建矩阵？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T09:58:07.227

您还可以使用：

```
t <- readLines(textConnection("0000010000010000000101000001000000011000000001
0000000000000000000000010001000001001000110001
0000100000000000000000010000000000000000010100
0100000001100000000001001001100000010000000001
0001000000000100010000010000000000010000000000"))

do.call("rbind", lapply(strsplit(t, ""), as.numeric))

     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]
[1,]    0    0    0    0    0    1    0    0    0     0     0     1     0     0
[2,]    0    0    0    0    0    0    0    0    0     0     0     0     0     0
[3,]    0    0    0    0    1    0    0    0    0     0     0     0     0     0
[4,]    0    1    0    0    0    0    0    0    0     1     1     0     0     0
[5,]    0    0    0    1    0    0    0    0    0     0     0     0     0     1
     [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26]
[1,]     0     0     0     0     0     1     0     1     0     0     0     0
[2,]     0     0     0     0     0     0     0     0     0     1     0     0
[3,]     0     0     0     0     0     0     0     0     0     1     0     0
[4,]     0     0     0     0     0     0     0     1     0     0     1     0
[5,]     0     0     0     1     0     0     0     0     0     1     0     0
     [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] [,38]
[1,]     0     1     0     0     0     0     0     0     0     1     1     0
[2,]     0     1     0     0     0     0     0     1     0     0     1     0
[3,]     0     0     0     0     0     0     0     0     0     0     0     0
[4,]     0     1     1     0     0     0     0     0     0     1     0     0
[5,]     0     0     0     0     0     0     0     0     0     1     0     0
     [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46]
[1,]     0     0     0     0     0     0     0     1
[2,]     0     0     1     1     0     0     0     1
[3,]     0     0     0     1     0     1     0     0
[4,]     0     0     0     0     0     0     0     1
[5,]     0     0     0     0     0     0     0     0 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T09:45:43.770

**编辑：**感谢 Ananda Matho 和 agstudy 的建议，这是自动处理宽度参数的更好方法。如果您的数据位于名为 的文件中`test.txt`，您可以执行以下操作：

```
width <- nchar(readLines("test.txt", n=1))
m <- as.matrix(read.fwf("test.txt", widths=rep(1,width))) 
```

* * *

我假设每个 0/1 都是一个不同的值。在这种情况下，您可以使用`read.fwf`，它允许通过指定每个字段的宽度来读取数据：

```
text <- "0000010000010000000101000001000000011000000001
0000000000000000000000010001000001001000110001
0000100000000000000000010000000000000000010100
0100000001100000000001001001100000010000000001
0001000000000100010000010000000000010000000000"

m <- as.matrix(read.fwf(textConnection(text), widths=rep(1,46))) 
```

这使 ：

```
R> m
     V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18 V19
[1,]  0  0  0  0  0  1  0  0  0   0   0   1   0   0   0   0   0   0   0
[2,]  0  0  0  0  0  0  0  0  0   0   0   0   0   0   0   0   0   0   0
[3,]  0  0  0  0  1  0  0  0  0   0   0   0   0   0   0   0   0   0   0
[4,]  0  1  0  0  0  0  0  0  0   1   1   0   0   0   0   0   0   0   0
[5,]  0  0  0  1  0  0  0  0  0   0   0   0   0   1   0   0   0   1   0
     V20 V21 V22 V23 V24 V25 V26 V27 V28 V29 V30 V31 V32 V33 V34 V35 V36
[1,]   1   0   1   0   0   0   0   0   1   0   0   0   0   0   0   0   1
[2,]   0   0   0   0   1   0   0   0   1   0   0   0   0   0   1   0   0
[3,]   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0
[4,]   0   0   1   0   0   1   0   0   1   1   0   0   0   0   0   0   1
[5,]   0   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   1
     V37 V38 V39 V40 V41 V42 V43 V44 V45 V46
[1,]   1   0   0   0   0   0   0   0   0   1
[2,]   1   0   0   0   1   1   0   0   0   1
[3,]   0   0   0   0   0   1   0   1   0   0
[4,]   0   0   0   0   0   0   0   0   0   1
[5,]   0   0   0   0   0   0   0   0   0   0 
```

在您的情况下，您将替换`textConnection(text))`为您的文件名，并将值 46 in 修改为`rep(1,46)`矩阵每行中的值的数量。

# shell - 正则表达式匹配和提取字符串

> ID：14933274
> 
> 赞同：0
> 
> 时间：2013-02-18T09:42:25.963
> 
> 标签：shell, scripting, sed, awk

我有一个包含诸如“ `Profile - -Server-FAILUre-tESt Exception Type - timeOverThreshold Description - High CPU eHealth Alarm ID - 1000001`”之类的内容的字符串

我需要在单词描述之后和警报 ID 之前提取字符串。我在下面的写作中确实得到了一些帮助，但似乎没有用。有人可以看看这个并帮助我。ALARM_TITLE 的结果是空白的，我没有看到任何问题，但我肯定在正则表达式中遗漏了一些东西。

```
ALARM_TITLE=$(echo "$EVENTMSG" | sed "s/.*Description - \(.*\) Alarm ID.*/\1/") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:43:01.413

尝试这个：

```
echo $STRING | grep -oP '(?<=Description - ).*(?=Alarm ID)' 
```

这使用了lookahead 和lookbehind 断言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:57:50.187

```
sed 's/.*Description\(.*\)Alarm.*$/\1/g' 
```

测试：

```
> echo "Profile - -Server-FAILUre-tESt Exception Type - timeOverThreshold Description - High CPU eHealth Alarm ID - 1000001" | sed 's/.*Description\(.*\)Alarm.*$/\1/g'
 - High CPU eHealth 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:34:01.547

尝试：

```
ALARM_TITLE=${EVENTMSG% Alarm ID*}
ALARM_TITLE=${ALARM_TITLE#*Description - } 
```

- 编辑以回应评论：然后尝试

```
ALARM_TITLE=${EVENTMSG% eHealth Alarm ID*} 
```

# c# - 将 WCF 肥皂服务公开为异步任务 来自客户？

> ID：14933275
> 
> 赞同：1
> 
> 时间：2013-02-18T09:42:27.690
> 
> 标签：c#, windows-phone-7, soap, async-await

我正在从 Windows Phone 7.1 连接到 SOAP 服务。服务代理具有`Get____Async`方法和`Get_____Completed`事件。我正在我的客户端中构建一个服务类，用于包装对 SOAP 服务的调用。

我可以以某种方式包装它，使其界面变为：

```
public NNNNService
{
    public async Task<List<NNNNNN>> GetNNNNN(A a, B b, C c)
    {
        // ?
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:18:23.767

您可以使用以下模式将 EAP 包装到 TAP 中：

```
public static class NNNNServiceExtensions
{
    public static Task<ReturnType> MethodNameTaskAsync(this NNNNService service, A a)
    {
        if (service == null)
            throw new NullReferenceException();

        var tcs = new TaskCompletionSource<ReturnType>();

        EventHandlerType handler = null;
        handler = (s, o) =>
        {
            service.MethodNameCompleted -= handler;
            tcs.TrySetCompleted(o.Result);
        };

        service.MethodNameCompleted += handler;
        try
        {
            service.MethodNameAsync();
        }
        catch
        {
            service.MethodNameCompleted -= handler;
            throw;
        }

        return tcs.Task;
    }
} 
```

可选支持取消、进度报告等。有时很难指定返回类型。如果您的 Completed 事件使用 EventArgs，您可以通过以下方式调整代码：

```
public static Task MethodNameTaskAsync(this NNNNService service, A a)
{
    var tcs = new TaskCompletionSource<bool>();
} 
```

# java - 使用 GSON 将 JSON 解析为 POJO

> ID：14933281
> 
> 赞同：2
> 
> 时间：2013-02-18T09:42:45.113
> 
> 标签：java, json, parsing, gson, pojo

我的`JSON`样子如下：

```
"message_defaults": {
      "LabResultsRequestDefaultMessage": {
        "MsgTypeId": 8,
        "StaffId": 122,
        "StaffName": "Willis,Sam",
        "FirstName": "Sam",
        "MI": "D",
        "LastName": "Willis",
        "DefaultMessage": "Lab Department"
      },
      "ReferralRequestDefaultMessage": {
        "MsgTypeId": 6,
        "StaffId": 122,
        "StaffName": "Willis,Sam",
        "FirstName": "Sam",
        "MI": "D",
        "LastName": "Willis",
        "DefaultMessage": "Physican"
      },
      "MessageComposeDefaultMessage": {
        "MsgTypeId": 1,
        "StaffId": 122,
        "StaffName": "Willis,Sam",
        "FirstName": "Sam",
        "MI": "D",
        "LastName": "Willis",
        "DefaultMessage": "Office Manager/Willis Sam"
      }
} 
```

现在每个元素`message_defaluts`都具有相同的结构（比如说一个名为 MessageDefault.java 的 POJO）。那么我怎样才能得到所有`message defaults`作为一个`List<MessageDefault>`？

我正在使用 gson 进行解析。我也无法更改 JSON 响应。

编辑 ：：

MessageDefault.java

```
public class MessageDefault{
    private String defaultMessage;
    private String firstName;
    private String lastName;
    private String mI;
    private int msgTypeId;
    private int staffId;
    private String staffName;

    public String getDefaultMessage(){
        return this.defaultMessage;
    }
    public void setDefaultMessage(String defaultMessage){
        this.defaultMessage = defaultMessage;
    }
    public String getFirstName(){
        return this.firstName;
    }
    public void setFirstName(String firstName){
        this.firstName = firstName;
    }
    public String getLastName(){
        return this.lastName;
    }
    public void setLastName(String lastName){
        this.lastName = lastName;
    }
    public String getMI(){
        return this.mI;
    }
    public void setMI(String mI){
        this.mI = mI;
    }
    public int getMsgTypeId(){
        return this.msgTypeId;
    }
    public void setMsgTypeId(int msgTypeId){
        this.msgTypeId = msgTypeId;
    }
    public int getStaffId(){
        return this.staffId;
    }
    public void setStaffId(int staffId){
        this.staffId = staffId;
    }
    public String getStaffName(){
        return this.staffName;
    }
    public void setStaffName(String staffName){
        this.staffName = staffName;
    }
} 
```

它只是所有的结构`message_defualts`。但是在 JSON 中，每个子节点`message_defualts`都有不同的名称，就像`LabResultsRequestDefaultMessage, ReferralRequestDefaultMessage etc`POJO MessageDefault.java 中所反映的一样。但是从 JSON 我想要它们的列表。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:31:26.463

如果您想首先从 json 获取 List，则必须更正您的 json。列表必须在“[]”中。

```
"message_defaults": [{
      "LabResultsRequestDefaultMessage": {
        "MsgTypeId": 8,
        "StaffId": 122,
        "StaffName": "Willis,Sam",
        "FirstName": "Sam",
        "MI": "D",
        "LastName": "Willis",
        "DefaultMessage": "Lab Department"
      },
      "ReferralRequestDefaultMessage": {
        "MsgTypeId": 6,
        "StaffId": 122,
        "StaffName": "Willis,Sam",
        "FirstName": "Sam",
        "MI": "D",
        "LastName": "Willis",
        "DefaultMessage": "Physican"
      },
      "MessageComposeDefaultMessage": {
        "MsgTypeId": 1,
        "StaffId": 122,
        "StaffName": "Willis,Sam",
        "FirstName": "Sam",
        "MI": "D",
        "LastName": "Willis",
        "DefaultMessage": "Office Manager/Willis Sam"
      }
}] 
```

编辑：试试这个转换为列表

```
Type collectionType = new TypeToken<Collection<Integer>>(){}.getType();
Collection<Integer> ints2 = gson.fromJson(json, collectionType); 
```

[按照这个链接](https://sites.google.com/site/gson/gson-user-guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:10:57.930

您可以在不更改 json 结构的情况下执行以下操作。

```
Type mapType = new TypeToken<Map<String, MessageDefault>>() {}.getType();
Map<String, MessageDefault> messagesMap = gson.fromJson(json, mapType);
List<MessageDefault> messages = new ArrayList<MessageDefault>(messagesMap.values()); 
```

# tomcat - 在 tomcat 中使用 Moxy 和 Metro

> ID：14933284
> 
> 赞同：3
> 
> 时间：2013-02-18T09:42:53.220
> 
> 标签：tomcat, moxy, java-metro-framework

由于公司要求，我们不能使用 Glassfish 作为应用服务器。尽管如此，我还是想使用 Moxy。所以我试图让新的 Metro 版本 ( [https://blogs.oracle.com/mgrebac/entry/metro_2_2_jaxb_2](https://blogs.oracle.com/mgrebac/entry/metro_2_2_jaxb_2) ) 与 tomcat 7 一起使用。我管理它使用 Spring 引导 Moxy，就像 Metro 文档中描述的那样( [http://metro.java.net/guide/user-guide.html#springa](http://metro.java.net/guide/user-guide.html#springa) ) 但我没有设法让它与 Moxy 一起工作。

我已经尝试过 Metro 文档中提到的解决方案（[http://metro.java.net/2.2/guide/ch17.html](http://metro.java.net/2.2/guide/ch17.html)）和这里提到的解决方案（[使用 Moxy 作为默认的 JAXB 实现](https://stackoverflow.com/questions/13253874/use-moxy-as-default-jaxb-implementation)）。

但我能从中得到的最多的是以下例外：

```
com.sun.xml.ws.spi.db.DatabindingException: Unknown JAXBContext implementation: class org.eclipse.persistence.jaxb.JAXBContext
    at com.sun.xml.ws.spi.db.BindingContextFactory.getJAXBFactory(BindingContextFactory.java:207)
    at com.sun.xml.ws.spi.db.BindingContextFactory.create(BindingContextFactory.java:149)
    at com.sun.xml.ws.message.jaxb.JAXBMessage.create(JAXBMessage.java:160)
    at com.sun.xml.ws.fault.SOAPFaultBuilder.createSOAP11Fault(SOAPFaultBuilder.java:423)
    at com.sun.xml.ws.fault.SOAPFaultBuilder.createSOAPFaultMessage(SOAPFaultBuilder.java:200)
    at com.sun.xml.ws.fault.SOAPFaultBuilder.createSOAPFaultMessage(SOAPFaultBuilder.java:188)
    at com.sun.xml.ws.server.WSEndpointImpl$2.process(WSEndpointImpl.java:391)
    at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:640)
    at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:263)
    at com.sun.xml.ws.transport.http.servlet.ServletAdapter.invokeAsync(ServletAdapter.java:218)
    at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doGet(WSServletDelegate.java:159)
    at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doPost(WSServletDelegate.java:194)
    at com.sun.xml.ws.transport.http.servlet.WSSpringServlet.doPost(WSSpringServlet.java:52)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我的测试网络服务是：

```
@WebService
public class TestService {
    public String sayHello() throws JAXBException {
        System.out.println(org.eclipse.persistence.Version.getVersion());
        JAXBContext c = JAXBContext.newInstance(TestPojo.class);
        return "Hello";
    }
} 
```

是的，moxy jars (org.eclipse.persistence.moxy-2.4.0.jar, org.eclipse.persistence.core-2.4.0.jar, org.eclipse.persistence.asm-3.3.1.v201206041142.jar ) 在类路径上。

谢谢帮助

杰比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:15:54.900

您始终可以使用 JAX-WS`Provider`机制来利用[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)：

**示例 Web 服务**

```
import javax.xml.bind.*;
import javax.xml.bind.util.JAXBSource;
import javax.xml.transform.Source;
import javax.xml.ws.*;

@ServiceMode(Service.Mode.PAYLOAD)
@WebServiceProvider(
    portName = "FindCustomerPort",
    serviceName = "FindCustomerService",
    targetNamespace = "http://service.jaxws.blog/",
    wsdlLocation = "WEB-INF/wsdl/FindCustomerService.wsdl")
public class FindCustomerService implements Provider<Source> {

    private JAXBContext jaxbContext;

    public FindCustomerService() {
        try {
            jaxbContext = JAXBContext.newInstance(FindCustomerResponse.class,
                    FindCustomerRequest.class);
        } catch (JAXBException e) {
            throw new WebServiceException(e);
        }
    }

    @Override
    public Source invoke(Source request) throws WebServiceException {
        try {
            Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();
            FindCustomerRequest fcRequest = (FindCustomerRequest) unmarshaller
                    .unmarshal(request);

            Customer customer = new Customer();
            customer.setId(fcRequest.getArg0());
            customer.setFirstName("Jane");
            customer.setLastName("Doe");

            FindCustomerResponse response = new FindCustomerResponse();
            response.setValue(customer);

            return new JAXBSource(jaxbContext, response);
        } catch (JAXBException e) {
            throw new WebServiceException(e);
        }
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2013/02/leveraging-moxy-in-your-web-service-via.html](http://blog.bdoughan.com/2013/02/leveraging-moxy-in-your-web-service-via.html)

# java - Java - 将多行字符串写入文件

> ID：14933289
> 
> 赞同：0
> 
> 时间：2013-02-18T09:43:17.953
> 
> 标签：java, string, multiline, filewriter, stringreader

我有一个带有多行的字符串，如下所示

```
<?xml version="1.0" encoding="UTF-8"?>
<books>

    <book publishyear="1990">
        <name>Harry Potter</name>
    </book> 
</books> 
```

如何将其写入文件？我尝试过使用缓冲写入器，但是它不会在多行中使用字符串。

```
 try{
           FileWriter fstream = new FileWriter("D:/temp.txt");
           BufferedWriter out = new BufferedWriter(fstream);
           out.write(" <?xml version="1.0" encoding="UTF-8"?>
<books>

    <book publishyear="1990">
        <name>Harry Potter</name>
    </book> 
</books>");

           out.close();
  }catch (Exception e){//Catch exception if any
        System.err.println("Error: " + e.getMessage());
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T09:45:55.333

永远不要手动编写 XML 文档。您将在文件编码中失败，您将在语法错误中失败。始终使用类似的 DOM 矿石。您的演示代码已经包含错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T09:48:16.927

这与写入字符串或 BufferedWriter 无关。

Java 没有多行字符串，因此如果您希望它们在源代码中的多行上，则必须连接字符串。您还需要用转义的 \n 字符替换实际的换行符，并用 \" 转义 "

也就是说，你这样做：

```
String foo = "<?xml version="1.0" encoding=\"UTF-8\"?>\n"+
"<books>\n"+
"   <book publishyear=\"1990\">\n"+
"        <name>Harry Potter</name>\n"+
"    </book>\n"+
"</books>";

out.write(foo); 
```

如果您愿意，您也可以在源代码的一行中编写所有这些内容：

```
out.write("<?xml version="1.0" encoding=\"UTF-8\"?>\n<books>\n ... etc.etc.")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:51:26.123

您应该转义引号并使用提供 println 方法的 PrintWriter。

PrintWriter out = new PrintWriter(new BufferedWriter(fstream));

```
out.println("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
out.println("<books>)"; 
```

或者，您可以将行终止符附加到您的字符串：

```
 out.write("<books>\r\n"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T10:49:41.873

您绝对可以使用`BufferedWriter`
See below code 作为示例，结合您自己的逻辑（给出在文件写入中写入新行的示例）

```
BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(System.out));
writer.write("I am the first Line");
writer.newLine();
writer.write("I am in the second Line");

writer.close(); 
```

您需要使用希望这有帮助的`newLine()`方法，`BufferedWriter`
并且您不必将代码更改为新的输出流:)

# javascript - 一个函数是否只在内存中存储一 次？

> ID：14933290
> 
> 赞同：1
> 
> 时间：2013-02-18T09:43:20.287
> 
> 标签：javascript, function

当我们在对象或全局中定义一个函数时，javascript函数是否存储在内存中。

```
function (){
alert("some value");
}

obj = {
 m: function(){
   alert('some value');
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T10:05:29.337

如果您定义一次函数，并将该函数的引用传递给不同的变量/属性，那么是的，它被存储一次。

```
var one_func = function () { console.log("I'm just one function."); };
var reused = one_func;
var reuser = { func : reused }; 
```

它们都有指向同一个函数的指针。

但如果你有这样的事情：

```
var Circle = function (r) {
    var circle = {
        radius : r,
        calculate_area : function () { return 2 * Math.PI * r; }
    };
    return circle;
};

var circle_1 = Circle(2),
    circle_2 = Circle(4); 
```

这两个对象不共享`calculate_area`。
您已经创建了该函数的两个不同版本。

由于功能范围和闭包，它们必须保持不同。
看，每个副本都知道自己的圈子`r`。

如果你注意到了，我不是在看 circle.radius，而是在看`r`传入`Circle`函数的。

因此，***在 内部***定义的任何函数`Circle`每次都必须是新的，因为这些函数通过*闭包*保存对构造函数内部任何变量​​的引用。

拥有多个副本的内存打击，与拥有完全私有属性的好处相比，这是非常值得的，直到你达到成千上万个副本（除非我们谈论的是巨大的对象或可怕的旧浏览器，或者在 LED 上运行 JavaScript烤面包机上的屏幕）。

更高级的引擎可能会在这里优化内存占用，但考虑到每个功能占用的内存很少，以及智能手机有多少 RAM（更不用说定制的游戏 PC），浪费 CPU 很少值得。

* * *

***为了迂腐而***编辑**** 

 ***```
var Wallet = function (opening_balance) {
    var balance   = opening_balance,
        overdraft = 50,

        is_sufficient_funds = function (amount) {
            return balance + overdraft >= amount;
        },

        deposit = function (funds) {
            if (amount <= 0) { return; }
            balance += funds;
        },

        withdraw = function (amount) {
            if (amount <= 0) { return; }
            if (is_sufficient_funds(amount)) {
                balance -= amount;
                return amount;
            }
        },

        public_interface = {
            deposit : deposit,
            withdraw : withdraw
        };

    return public_interface;
}; 
```

现在，我们不希望`balance`或`overdraft`在任何`Wallet`.

即使是这个行人版的钱包也相当安全。

当然，它现在没有做任何授权，所以你可以扣除一切，或者增加一百万美元......

...但是您可以将透支设置为 300 美元吗？

您可以手动复制 的值`balance`吗？

即使您创建`var wallet = Wallet(35);`然后尝试重写该`deposit`方法，您对它的重写也将绝对无法访问 private `balance`。

现在，这种内存开销与闭包相关的好处应该很明显了。

If you'd prefer, you could consider the rate of fire of a gun in a multiplayer game.
Or a character's movement.
Or their health.
Or high-scores.

By keeping all of these things encapsulated in closures, they're untweakable.
That doesn't mean that the server is unhackable.
But it does mean that there's one less spot for people to get in, without rewriting your engine from the ground up.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:44:56.180

很难说出你在问什么，但我看到两个可能的问题，因此有两个答案：

1.  每次执行您定义它的执行上下文时，都会创建一次 JavaScript 函数。因此，如果该上下文是全局的（在任何函数之外），是的，每个声明或表达式将只创建一个函数。如果该上下文在函数内，则每次调用函数时都会定义它们。

    例如，如果这是一个全局范围：

    ```
    function foo() { } 
    ```

    ...只会创建*其中一个*。相比之下，像这样：

    ```
    function bar() {
        return {
            foo: function() { }
        };
    } 
    ```

    ...创建一个新函数并将其分配给*每次*调用`foo`返回对象的属性。（这并不意味着智能 JavaScript 引擎不能为他们共享底层代码——有人告诉我，他们声称知道 V8（Chrome 和其他地方的引擎）确实重用了代码——但他们将是单独的函数*对象*。） *`bar`*

***   每个函数声明或表达式都创建自己的函数；如果你有两个等价的声明或表达式，它们会创建*两个*函数，即使它们是等价的。这并不意味着智能 JavaScript 引擎不能共享底层代码，但您仍然会有两个独立的函数对象。

    例如：

    ```
    var a = function() { };
    var b = function() { };
    console.log(a === b); // "false"
    // Adding a property to `a`, since functions are objects, demonstrates
    // further that they are not the same function object
    a.foo = "bar";
    console.log(a.foo);   // "bar"
    console.log(b.foo);   // "undefined" 
    ```** 

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:48:52.493

不，匿名函数

```
function(){
    alert("some value");
} 
```

与对象字面量**中**`obj`的匿名函数不同。

为确保您“回收”存储的对象或函数，请执行以下操作：

```
var f = function(){ alert('test') };

obj = {
    m: f
} 
```*****

# c# - 如何使用通用列表（类型列表）将数据从文本框显示到 Gridview？

> ID：14933299
> 
> 赞同：1
> 
> 时间：2013-02-18T09:43:49.460
> 
> 标签：c#, asp.net, list, generic-list

我在 Visual Studio 2010 上使用 C# 创建了两个文本框，用于在基于 Web 的 ASP.NET 应用程序中输入员工的名字和姓氏。有一个按钮。当我单击它时，我在 TextBoxes 中输入的值应该显示在 Gridview 中，而这些值不会存储在数据库中。我已经使用 ArrayList 实现了它，如下所示。但现在我想使用**Generic List (Typed List)**来实现它。我怎样才能做到这一点？您能否提供一个示例代码来执行上述功能？

**如何调整下面给出的代码，以使用通用列表（类型列表）实现功能？**

**

```
 protected void btnTextDisplay_Click(object sender, EventArgs e)
    {
        ArrayList arr;

        if (Session["array"] == null)
        {
            arr = new ArrayList();
        }
        else
        {
            arr = (ArrayList)Session["array"];
        }

        arr.Add(txtName.Text + "," + txtCity.Text); //store textbox values in the array list
        Session["array"] = arr;

        DataTable dt = new DataTable();
        dt.Columns.Add("Name");
        dt.Columns.Add("City");

        for (int i = 0; i < arr.Count; i++)
        {
            string[] arrVal;
            arrVal = arr[i].ToString().Split(',');
            dt.Rows.Add(arrVal[0], arrVal[1]);
        }

        gvDisplay.DataSource = dt;
        gvDisplay.DataBind();
    } 
```

**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:49:17.297

您可以使用`List<string>`而不是`ArrayList`

```
protected void btnTextDisplay_Click(object sender, EventArgs e)
    {
       List<string> list;

        if (Session["list"] == null)
        {
            list = new List<string>();
        }
        else
        {
            list = (List<string>)Session["list"];
        }

        list.Add(txtName.Text + "," + txtCity.Text); //store textbox values in the array list
        Session["list"] = list;

        DataTable dt = new DataTable();
        dt.Columns.Add("Name");
        dt.Columns.Add("City");

        for (int i = 0; i < list.Count; i++)
        {
            string[] arrVal;
            arrVal = list[i].ToString().Split(',');
            dt.Rows.Add(arrVal[0], arrVal[1]);
        }

        gvDisplay.DataSource = dt;
        gvDisplay.DataBind();
    } 
```

**更好的方法可能是：**

如果您将一个类定义为：

```
class Employee
{
    public string FirstName { get; set; }
    public string City { get; set; }
} 
```

进而：

```
 protected void btnTextDisplay_Click(object sender, EventArgs e)
    {
        List<Employee> list;
        if (Session["list"] == null)
        {
            list = new List<Employee>();
        }
        else
        {
            list = (List<Employee>)Session["list"];
        }
        list.Add(new Employee() { FirstName = txtName.Text, City = txtCity.Text }); //store textbox values in the array list
        Session["list"] = list;
        gvDisplay.DataSource = list; //directly bind the list to the grid
        gvDisplay.DataBind();
    } 
```

# events - 如何在 Yii 的模块中注册事件？

> ID：14933304
> 
> 赞同：0
> 
> 时间：2013-02-18T09:44:03.040
> 
> 标签：events, yii, module

我正在尝试从 Yii 的子模块中注册事件。

它似乎不起作用。

该`init`方法肯定被调用。

```
class TestModule extends CWebModule
{
    public function init()
    {
        $this->setImport(array(
            'test.models.*',
            'test.components.*',
        ));
        Yii::app()->onBeginRequest = array($this, 'onBeginRequest');
    }

    public function onBeginRequest($event) {
        die('Request!');
    }

    public function beforeControllerAction($controller, $action)
    {
        if (parent::beforeControllerAction($controller, $action))
        {
            return true;
        }
        else
            return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:22:51.593

要注册活动，您可以：

```
$this->getEventHandlers($eventName)->add($eventHandler); 
```

`$eventHandler`您要为事件定义的回调名称在哪里`$eventName`。

您也可以通过以下方式进行操作：

```
$this->attachEventHandler($eventName, $eventHandler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:36:58.300

我自己解决了这个问题。

问题是，我实际上为 onBeginRequest 太晚了（请求已处理）。

所以我所做的是为 onBeginRequest 和 onEndRequest 编写一个带有事件处理程序的组件，在 config/main.php 中注册事件处理程序并从该组件调用我的模块。

我基本上不得不代理所有这些事件。

# html - HTML/CSS - 没有空格的句子退出 div

> ID：14933307
> 
> 赞同：-1
> 
> 时间：2013-02-18T09:44:09.580
> 
> 标签：html, css, space

**HTML：**

```
<div> aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
</div> 
```

**CSS：**

```
div {
    width: 150px;
    border: 1px solid red
} 
```

**演示：http:** [//jsfiddle.net/B93XB/](http://jsfiddle.net/B93XB/)

**问题：**对此有什么解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T09:45:51.323

添加`word-break:break-all`

还添加`display:inline-block`

```
div {
    width: 150px;
    border: 1px solid red;
    background:red;
    word-break:break-all;
    display:inline-block
} 
```

**[演示](http://jsfiddle.net/B93XB/5/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:46:14.633

你可以使用CSS3吗？如果是这样，试试这个：

```
word-wrap: break-word; 
```

如此处所示：http: [//jsfiddle.net/B93XB/2/](http://jsfiddle.net/B93XB/2/)

# c - 如何通过 C 向串口发送 AT 命令 - Linux

> ID：14933311
> 
> 赞同：0
> 
> 时间：2013-02-18T09:44:19.597
> 
> 标签：c, linux, serial-port, at-command

当然有`termios.h`，但这里我说的是`AT`命令。我希望他们被*处决*。

`C`如何通过Linux向串口发送 AT 命令*以便执行*？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:57:13.603

看看这个简短的例子（它有效）：

```
struct termios options;
int fd;

fd = open("/dev/ttyS0", O_RDWR | O_NOCTTY | O_NDELAY);

if (fd < 0)
{
    printf("Error opening serial port\n");
    exit(1);
}

bzero(&options, sizeof(options));
options.c_cflag = B9600 | CS8 | CLOCAL | CREAD | IGNPAR;
tcflush(fd, TCIFLUSH);
tcsetattr(fd, TCSANOW, &options);

if (write(fd, "ATZ\r", 4) < 4)
{
    printf("Write error - %s \n", strerror(errno));
    exit (1);
}

// read back for OK or KO then do your stuff... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:57:15.730

偶然发现这一点，可能会有所帮助：

[http://en.wikibooks.org/wiki/Serial_Programming/Serial_Linux](http://en.wikibooks.org/wiki/Serial_Programming/Serial_Linux)

也是 C 语言高级 Linux 编程的权威指南 [http://www.advancedlinuxprogramming.com/alp-folder/](http://www.advancedlinuxprogramming.com/alp-folder/)

# iphone - IOS和XML解析器（读取文件）

> ID：14933314
> 
> 赞同：-1
> 
> 时间：2013-02-18T09:44:27.707
> 
> 标签：iphone, ios, xml

我是IOS的新手。我一直在寻找如何从资源中的本地 xml 文件中读取的教程或小示例，但我一无所获……在我真正需要您的帮助之前，任何有良好教程或使用过 xml 的人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:50:20.963

[在这里](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html)，您有`NSXMLParserDelegate`带有示例的文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:51:18.247

您可以使用以下代码来读取 xml 文件：

```
 NSString *filePath = [[NSBundle mainBundle] pathForResource:@"myLocalXML" ofType:@"xml"];  
    if (filePath)
    {  
        NSString *myText = [NSString stringWithContentsOfFile:filePath];  
        if (myText)
       {  
            NSLog(@"XML : %@",myText);
            NSData *xmlData = [myText dataUsingEncoding:NSUTF8StringEncoding];
            NSXMLParser *parser = [[NSXMLParser alloc] initWithData:xmlData];
            parser.delegate = self;
            [parser parse];
        }  
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:51:39.710

以下链接将帮助您添加苹果提供的解析器

[http://www.edumobile.org/iphone/iphone-programming-tutorials/parsing-an-xml-file/](http://www.edumobile.org/iphone/iphone-programming-tutorials/parsing-an-xml-file/)

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Name of your xml here...." ofType:@"xml"]; 
```

使用上面的代码从你的项目中访问文件并将其提供给上面的解析器进行解析

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T10:00:54.187

[**TBXML**](http://www.tbxml.co.uk/TBXML/TBXML_Free.html)是我的最爱。[**您可以从git hub**](https://github.com/71squared/TBXML)下载项目。
为什么这是我最喜欢的，因为它很容易理解，而且它的性能很高。阅读此博客了解更多信息
[**如何为您的 iPhone 项目选择最佳 XML 解析器**](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)

# c - a[10] 和 10[a] 的区别

> ID：14933319
> 
> 赞同：4
> 
> 时间：2013-02-18T09:44:51.097
> 
> 标签：c, arrays

以下代码

`a[10] == 10[a]`

结果似乎`true`是 C 语言

C编译器如何将它们视为相同的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T09:46:33.400

编译器看到如下：

```
a[10] == *(a + 10) == *(10 + a) == 10[a] 
```

检查[这个](https://stackoverflow.com/questions/381542/in-c-arrays-why-is-this-true-a5-5a)以获得更好的解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:50:34.583

a[10] 表示：“从内存地址 10 开始，添加 a 并引用结果位置” 10[a] 表示：“从内存地址 a 开始，添加 10 并引用结果位置”

由于 a + 10 与 10 + a 相同，因此两个表达式将引用相同的内存位置。

# jquery - 从 Json 返回对象中提取数据

> ID：14933324
> 
> 赞同：0
> 
> 时间：2013-02-18T09:45:00.527
> 
> 标签：jquery, asp.net-mvc-4

在我的控制器中，我正在调用网络服务

```
Metadata.Client.Service.Client returnClient = new Metadata.Client.Service.Client();

returnClient = client.UpdateClient(updateClient);

return Json(new { returnClient }, JsonRequestBehavior.AllowGet); 
```

在我的 .cshtml Ajax 调用中，如下所示

```
 $.ajax(
 {
     type: "GET",
     contentType: "application/json; charset=utf-8",
     url: '@Url.Action("UpdateRecord", "Client")',
     data: { "id": id, "name": clientName, "code": clientCode, "typeId": clientTypeId, "clientStatusCode": clientStatusCode },
     dataType: "json",
     beforeSend: function () {//alert(id);
     },
     error: function (request) {
     alert('error');    
     alert(request.responseText);
     },
     success: function (data) {
     alert('success');
     console.log(data);

     //var parsed = JSON.parse(data);
     //alert(parsed);
     //var k = JSON.stringify(data);
     //alert(parsed);

  } 
```

我尝试了几种方法来提取数据。在`console.log`它显示如下

```
[09:27:07.989] ({returnClient:{ExtensionData:{}, ClientCode:"C09091", ClientId:39, ClientName:"Test1", ClientStatus:[{ExtensionData:{}, StatusCode:{ExtensionData:{}, Name:"Active", StatusCodeId:5}, StatusType:{ExtensionData:{}, Name:"OE", StatusTypeId:1}}], ClientType:{ExtensionData:{}, ClientTypeId:7, ClientTypeName:"FDFD"}}}) 
```

请任何人都可以帮助提取这些数据

IE，`ClientName, ClientCode, ClientId, ClientStatus.StatusCode, ClientStatus.Name, ClientStatus.StatusCodeId, StatusType.Name`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:51:33.377

```
success: function (data) {
    var ccode = data.returnClient.ClientCode;
    var cid = data.returnClient.ClientId;
    var cname = data.returnClient.ClientName;
    var ctypeid = data.returnClient.ClientType.ClientTypeId;
    var ctypename = data.returnClient.ClientType.ClientTypeName;

    for (var i = 0; i < data.returnClient.ClientStatus.length; i++) {
      var codeName = data.returnClient.ClientStatus[i].StatusCode.Name;
      var codeId = data.returnClient.ClientStatus[i].StatusCode.StatusCodeId;
      var typeName = data.returnClient.ClientStatus[i].StatusType.Name;
      var typeId = data.returnClient.ClientStatus[i].StatusType.StatusTypeId;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:54:14.547

您可以尝试以下操作：

```
var jsonData = eval("(" + data + ")"); 
```

这将返回 JSON 对象。然后您可以使用点 (.) 运算符或使用 [ ] 从此 JSON 对象中检索数据

# asp.net-mvc - 使用 SimpleMembership 的 IsUserInRole 错误

> ID：14933327
> 
> 赞同：2
> 
> 时间：2013-02-18T09:45:08.207
> 
> 标签：asp.net-mvc, asp.net-mvc-4, roleprovider, simplemembership

我在我的 ASP.NET MVC 4 Internet 应用程序上使用此代码进行角色授权。

```
@if (Roles.IsUserInRole("RolunAdi"))

{
    <a href="#">Test</a>
} 
```

它工作正常，但有时我有一个错误..它在这张图片上..

[http://forum.yazgelistir.com/JS/HTMLEditor/Image.aspx?id=593&siteid=0](http://forum.yazgelistir.com/JS/HTMLEditor/Image.aspx?id=593&siteid=0)

我有两件事在我的脑海里..第一;

我在 web.config 中有两个连接字符串。第一个用于实体框架数据模型，第二个用于 SimpleMembership ..（顺便说一句，我只能使用一个连接字符串怎么办？？）

[http://forum.yazgelistir.com/JS/HTMLEditor/Image.aspx?id=594&siteid=0](http://forum.yazgelistir.com/JS/HTMLEditor/Image.aspx?id=594&siteid=0)

第二;

我创建了 ASP.NET MVC 4 Internet 应用程序。在我必须为使用 ASP.NET SimpleMembership 角色设置一些东西之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:45:36.980

你有没有在 web.config 中的 system.web 部分......

```
<roleManager enabled="true" defaultProvider="SimpleRoleProvider">
  <providers>
    <clear/>
    <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData"/>
  </providers>
</roleManager>
<membership defaultProvider="SimpleMembershipProvider">
  <providers>
    <clear/>
    <add name="SimpleMembershipProvider" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" />
  </providers>
</membership> 
```

注意：我的角色看 DefaultConnection

```
<connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=MyDB;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\MyDB.mdf" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

此处似乎也提到了[Role based authentication in the new MVC 4 Internet template using simplemembership](https://stackoverflow.com/questions/12257232/role-based-authentication-in-the-new-mvc-4-internet-template-using-simplemembers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:58:59.473

我的问题是关于 InitializeSimpleMembership，因为我的所有页面都需要登录。

通常 AccountController 类有它；

```
[Authorize]
[InitializeSimpleMembership]
public class AccountController : Controller
{
    .... 
```

我们需要 InitializeSimpleMembership 我们所有的项目。所以我们在 App_Start 文件夹中创建静态类： Exp;

InitializeSimpleMembershipProviderConfig.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using WebMatrix.WebData;

namespace OsosPlus2.UI
{
    public class InitializeSimpleMembershipProviderConfig
    {
        public static void InitializeSimpleMembershipDbConnection()
        {
            if (!WebSecurity.Initialized)
            {
                WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);
            }
        }
    }
} 
```

创建类后，我们将这些代码写入 Global.asax；

```
InitializeSimpleMembershipProviderConfig.InitializeSimpleMembershipDbConnection(); 
```

我们必须删除过滤器文件夹下的这一行

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

这个答案翻译自[**yazgelistir.com 的 AliRıza Adıyahşi**](https://stackoverflow.com/users/1324756/aliriza-adiyahsi)[的](http://forum.yazgelistir.com/topic.aspx?topicid=25923&siteid=0&forumid=2#postContent89744)答案

*感谢他的帮助* [**AliRıza Adıyahşi**](https://stackoverflow.com/users/1324756/aliriza-adiyahsi)

# mysql - 为什么只有唯一/主键必须具有分区表的分区表达式中使用的所有列

> ID：14933328
> 
> 赞同：1
> 
> 时间：2013-02-18T09:45:11.077
> 
> 标签：mysql

根据 mysql 解释“分区表的分区表达式中使用的所有列必须是表可能具有的每个唯一键的一部分”。为什么只有唯一/主键，为什么没有其他键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T16:25:13.630

I assume by a non-unique key you mean an index.

Imagine you have a key as a balanced-tree, here a B-tree, and you partition it by a certain criteria, to have a desired number of partitions, or a desired number of members in each partition. If you do so, because the tree is a tree of a unique-key, you are dividing your actual data into partitions of almost balanced size.

Now imagine you have a B-tree of values for an index (for example a [secondary index in InnoDB](http://dev.mysql.com/doc/innodb/1.1/en/innodb-create-index-implementation.html)), and each key of the tree points to several data members of the table. In this case, partitioning according to the B-tree, does not imply partitioning of the data into balanced chunks, so there is no point in considering it.

On the other hand, in practice, at least according to my own experience, primary and unique keys are a design question to which you usually have to answer when you design the table, in contrast to indices that sometimes you add to the table to improve the performance of your queries which happen to be executed very often. If you add the constraint of having partition fields in all keys and indices, they for each index that does not have a field in the partitioning fields, you will have to remove that field from partitioning or add all the fields of your partitioning fields as a default to all you indices. Hence it doesn't to be a good practice.

# android - Datepicker：单击edittext时如何弹出日期选择器

> ID：14933330
> 
> 赞同：334
> 
> 时间：2013-02-18T09:45:21.713
> 
> 标签：android, android-datepicker

我想显示日期选择器弹出窗口。我找到了一些例子，但我没有正确理解。我有一个edittext，我希望当我单击edittext 时会弹出日期选择器对话框，并且在设置日期后，日期应该以dd/mm/yyyy 格式显示在edittext 中。请提供示例代码或良好的链接。

* * *

## 回答 #1

> 赞同：797
> 
> 时间：2013-02-18T09:54:33.873

在 XML 文件中试试这个：

```
<EditText
    android:id="@+id/Birthday"
    custom:font="@string/font_avenir_book"
    android:clickable="false" 
    android:cursorVisible="false" 
    android:focusable="false" 
    android:focusableInTouchMode="false"
    android:hint="@string/birthday"/> 
```

这在Java文件中：

```
public class MainActivity extends AppCompatActivity {
    final Calendar myCalendar= Calendar.getInstance();
    EditText editText;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        editText=(EditText) findViewById(R.id.BirthDate);
        DatePickerDialog.OnDateSetListener date =new DatePickerDialog.OnDateSetListener() {
            @Override
            public void onDateSet(DatePicker view, int year, int month, int day) {
                myCalendar.set(Calendar.YEAR, year);
                myCalendar.set(Calendar.MONTH,month);
                myCalendar.set(Calendar.DAY_OF_MONTH,day);
                updateLabel();
            }
        };
        editText.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                new DatePickerDialog(MainActivity.this,date,myCalendar.get(Calendar.YEAR),myCalendar.get(Calendar.MONTH),myCalendar.get(Calendar.DAY_OF_MONTH)).show();
            }
        });
    }

    private void updateLabel(){
        String myFormat="MM/dd/yy";
        SimpleDateFormat dateFormat=new SimpleDateFormat(myFormat, Locale.US);
        editText.setText(dateFormat.format(myCalendar.getTime()));
    }
} 
```

`android:focusable="false"`在 xml 文件中添加`EditText`以允许单次触摸。

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2013-11-11T02:35:50.090

无法让这些工作中的任何一个工作，所以会添加我的一个，以防万一它有帮助。

```
public class MyEditTextDatePicker  implements OnClickListener, OnDateSetListener {   
EditText _editText;
private int _day;
private int _month;
private int _birthYear;
private Context _context;

public MyEditTextDatePicker(Context context, int editTextViewID)
{       
    Activity act = (Activity)context;
    this._editText = (EditText)act.findViewById(editTextViewID);
    this._editText.setOnClickListener(this);
    this._context = context;
}

@Override
public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
    _birthYear = year;
    _month = monthOfYear;
    _day = dayOfMonth;
    updateDisplay();
}
@Override
public void onClick(View v) {
    Calendar calendar = Calendar.getInstance(TimeZone.getDefault());

    DatePickerDialog dialog = new DatePickerDialog(_context, this,
            calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH),
            calendar.get(Calendar.DAY_OF_MONTH));
    dialog.show();

}

// updates the date in the birth date EditText
private void updateDisplay() {

    _editText.setText(new StringBuilder()
    // Month is 0 based so add 1
    .append(_day).append("/").append(_month + 1).append("/").append(_birthYear).append(" "));
}
} 
```

还有其他没有提到的东西。确保将以下内容放在 EditText xml 上。

```
android:focusable="false" 
```

否则就像我的情况一样，键盘会不断弹出。希望这可以帮助某人

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-02-18T09:53:42.487

```
class MyClass implements OnClickListener, OnDateSetListener {   
   EditText editText;
   this.editText = (EditText) findViewById(R.id.editText);
   this.editText.setOnClickListener(this);
   @Override
   public void onClick(View v) {

       DatePickerDialog dialog = new DatePickerDialog(this, this, 2013, 2, 18);
       dialog.show();
   }
   @Override
   public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
       // this.editText.setText();
   }
} 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2020-06-09T07:15:51.700

这是一个 Kotlin 扩展函数：

```
fun EditText.transformIntoDatePicker(context: Context, format: String, maxDate: Date? = null) {
    isFocusableInTouchMode = false
    isClickable = true
    isFocusable = false

    val myCalendar = Calendar.getInstance()
    val datePickerOnDataSetListener =
        DatePickerDialog.OnDateSetListener { _, year, monthOfYear, dayOfMonth ->
            myCalendar.set(Calendar.YEAR, year)
            myCalendar.set(Calendar.MONTH, monthOfYear)
            myCalendar.set(Calendar.DAY_OF_MONTH, dayOfMonth)
            val sdf = SimpleDateFormat(format, Locale.UK)
            setText(sdf.format(myCalendar.time))
        }

    setOnClickListener {
        DatePickerDialog(
            context, datePickerOnDataSetListener, myCalendar
                .get(Calendar.YEAR), myCalendar.get(Calendar.MONTH),
            myCalendar.get(Calendar.DAY_OF_MONTH)
        ).run {
            maxDate?.time?.also { datePicker.maxDate = it }
            show()
        }
    }
} 
```

用法：

在活动中：

```
editText.transformIntoDatePicker(this, "MM/dd/yyyy")
editText.transformIntoDatePicker(this, "MM/dd/yyyy", Date()) 
```

在片段中：

```
editText.transformIntoDatePicker(requireContext(), "MM/dd/yyyy")
editText.transformIntoDatePicker(requireContext(), "MM/dd/yyyy", Date()) 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-12-25T12:37:50.693

还有另一种更好的可重用方式：

创建一个类：

```
class setDate implements OnFocusChangeListener, OnDateSetListener {   

       private EditText editText;
       private Calendar myCalendar;

       public setDate(EditText editText, Context ctx){
           this.editText = editText;
           this.editText.setOnFocusChangeListener(this);
           myCalendar = Calendar.getInstance();
       }

       @Override
       public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth)     {
           // this.editText.setText();

            String myFormat = "MMM dd, yyyy"; //In which you need put here
            SimpleDateFormat sdformat = new SimpleDateFormat(myFormat, Locale.US);
            myCalendar.set(Calendar.YEAR, year);
            myCalendar.set(Calendar.MONTH, monthOfYear);
            myCalendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);

            editText.setText(sdformat.format(myCalendar.getTime()));

       }

        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            // TODO Auto-generated method stub
            if(hasFocus){
             new DatePickerDialog(ctx, this, myCalendar
                       .get(Calendar.YEAR), myCalendar.get(Calendar.MONTH),
                       myCalendar.get(Calendar.DAY_OF_MONTH)).show();
            }
        }

    } 
```

然后在 onCreate 函数下调用这个类：

```
 EditText editTextFromDate = (EditText) findViewById(R.id.editTextFromDate);
    setDate fromDate = new setDate(editTextFromDate, this); 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2018-01-27T20:00:27.183

```
<EditText
    android:id="@+id/date"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ems="10"
    android:hint="DD/MM/YYYY"
    android:inputType="date"
    android:focusable="false"/>

<EditText
    android:id="@+id/time"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:hint="00:00"
    android:inputType="time"
    android:focusable="false"/> 
```

**JAVA文件**

```
import android.app.DatePickerDialog;
import android.app.TimePickerDialog;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.TimePicker;

import java.util.Calendar;

public class MainActivity extends AppCompatActivity implements View.OnClickListener {

    EditText selectDate,selectTime;
    private int mYear, mMonth, mDay, mHour, mMinute;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        selectDate=(EditText)findViewById(R.id.date);
        selectTime=(EditText)findViewById(R.id.time);

        selectDate.setOnClickListener(this);
        selectTime.setOnClickListener(this);

    }

    @Override
    public void onClick(View view) {

        if (view == selectDate) {
            final Calendar c = Calendar.getInstance();
            mYear = c.get(Calendar.YEAR);
            mMonth = c.get(Calendar.MONTH);
            mDay = c.get(Calendar.DAY_OF_MONTH);

            DatePickerDialog datePickerDialog = new DatePickerDialog(this,
                    new DatePickerDialog.OnDateSetListener() {

                        @Override
                        public void onDateSet(DatePicker view, int year,
                                              int monthOfYear, int dayOfMonth) {

                            selectDate.setText(dayOfMonth + "-" + (monthOfYear + 1) + "-" + year);

                        }
                    }, mYear, mMonth, mDay);
            datePickerDialog.show();
        }
        if (view == selectTime) {

            // Get Current Time
            final Calendar c = Calendar.getInstance();
            mHour = c.get(Calendar.HOUR_OF_DAY);
            mMinute = c.get(Calendar.MINUTE);

            // Launch Time Picker Dialog
            TimePickerDialog timePickerDialog = new TimePickerDialog(this,
                    new TimePickerDialog.OnTimeSetListener() {

                        @Override
                        public void onTimeSet(TimePicker view, int hourOfDay,
                                              int minute) {

                            selectTime.setText(hourOfDay + ":" + minute);
                        }
                    }, mHour, mMinute, false);
            timePickerDialog.show();
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-10-06T21:41:11.223

我就是这样做的：类似于选择的答案，但使用静态对话框类，因此它更可重用，并且还使用 onFocusChange 而不是 onClick。

```
editText.setOnFocusChangeListener(new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (hasFocus) {
                DialogFragment datePickerFragment = new DatePickerFragment() {
                    @Override
                    public void onDateSet(DatePicker view, int year, int month, int day) {
                        Log.d(TAG, "onDateSet");
                        Calendar c = Calendar.getInstance();
                        c.set(year, month, day);
                        editText.setText(df.format(c.getTime()));
                        nextField.requestFocus(); //moves the focus to something else after dialog is closed
                    }
                };
                datePickerFragment.show(getActivity().getSupportFragmentManager(), "datePicker");
            }
        }
    }); 
```

和日期选择器对话框。

```
public static class DatePickerFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener{

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current date as the default date in the picker
        final Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        // Create a new instance of DatePickerDialog and return it
        return new DatePickerDialog(getActivity(), this, year, month, day);
    }

    @Override
    public void onDateSet(DatePicker view, int year, int month, int day) {
        //blah
    }
} 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2015-04-15T20:22:26.767

选择的答案对我来说不太有效，因为我必须点击一次 EditText 框，然后在 OnClickListener 触发之前再次点击它。我可以通过用 OnTouchListener 替换 OnClickListener 来解决这个问题，以防万一有人遇到类似的问题，我的代码如下所示：

```
Calendar myCalendar = Calendar.getInstance();

DatePickerDialog.OnDateSetListener date = new 
DatePickerDialog.OnDateSetListener() {

    @Override
    public void onDateSet(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {
        // TODO Auto-generated method stub
        myCalendar.set(Calendar.YEAR, year);
        myCalendar.set(Calendar.MONTH, monthOfYear);
        myCalendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);
        updateLabel();
    }

};
edittext.setOnTouchListener(new View.OnTouchListener() {

    @Override
    public void onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_DOWN) {
            new DatePickerDialog(classname.this, date, myCalendar
                    .get(Calendar.YEAR), myCalendar.get(Calendar.MONTH),
                    myCalendar.get(Calendar.DAY_OF_MONTH)).show();
        }
    }
});

private void updateLabel() {

    String myFormat = "MM/dd/yy"; //In which you need put here
    SimpleDateFormat sdf = new SimpleDateFormat(myFormat, Locale.US);

    edittext.setText(sdf.format(myCalendar.getTime()));
} 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-01-29T12:56:38.187

**#1。我想显示一个带有当前日期的日期选择器**（我使用黄油刀进行注射）

```
 @OnClick(R.id.your_view) public void onClickYourView() {

    final Calendar myCalendar = Calendar.getInstance();
    DatePickerDialog.OnDateSetListener date = new DatePickerDialog.OnDateSetListener() {
      @Override
      public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
        // TODO Auto-generated method stub
        myCalendar.set(Calendar.YEAR, year);
        myCalendar.set(Calendar.MONTH, monthOfYear);
        myCalendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);
        String myFormat = "dd MMMM yyyy"; // your format
        SimpleDateFormat sdf = new SimpleDateFormat(myFormat, Locale.getDefault());

        your_view.setText(sdf.format(myCalendar.getTime()));
      }

    };
    new DatePickerDialog(mContext, date, myCalendar.get(Calendar.YEAR), myCalendar.get(Calendar.MONTH), myCalendar.get(Calendar.DAY_OF_MONTH)).show();

  } 
```

# 2.如果要预选日期，请将最后一部分替换为

```
new DatePickerDialog(mContext, date, 1990, 0, 1).show(); 
```

然后您可以使用 myCalendar 变量或直接在视图中获取它。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-04-05T08:20:52.107

```
 selectDate.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

                DatePickerDialog  mdiDialog =new DatePickerDialog(mContext,new DatePickerDialog.OnDateSetListener() {
                    @Override
                    public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
                        Toast.makeText(getApplicationContext(),year+ " "+monthOfYear+" "+dayOfMonth,Toast.LENGTH_LONG).show();

                    }
                }, year, month, date);
                mdiDialog.show();

            }

        }); 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-12-31T08:16:06.930

```
import android.app.DatePickerDialog;
import android.content.Context;
import android.view.View;
import android.widget.DatePicker;
import android.widget.TextView;

import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Locale;

public class DatePickerHelper {

private final Calendar calendar = Calendar.getInstance();
private final String dateFormat = "MM/dd/yy";
private TextView textView = null;

public DatePickerHelper(final Context context, TextView textView) {
    this.textView = textView;

    // Setup on click listener if the TextView is not null
    if (textView != null) {
        textView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                getDatePickerDialog(context).show();
            }
        });
    }
}

/**
 * Return a new date picker listener tied to the specified TextView field
 * @return
 */
private DatePickerDialog.OnDateSetListener getOnDateSetListener() {
    return new DatePickerDialog.OnDateSetListener() {
        @Override
        public void onDateSet(DatePicker view, int year, int monthOfYear,
                              int dayOfMonth) {
            calendar.set(Calendar.YEAR, year);
            calendar.set(Calendar.MONTH, monthOfYear);
            calendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);

            SimpleDateFormat sdf = new SimpleDateFormat(dateFormat, Locale.US);
            textView.setText(sdf.format(calendar.getTime()));
        }
    };
}

/**
 * Return new DatePickerDialog for field
 * @param context
 * @return
 */
private DatePickerDialog getDatePickerDialog(Context context) {
    return new DatePickerDialog(context, getOnDateSetListener(), calendar
            .get(Calendar.YEAR), calendar.get(Calendar.MONTH),
            calendar.get(Calendar.DAY_OF_MONTH));
}

} 
```

用法：

```
 DatePickerHelper assessmentDueDateHelper = new DatePickerHelper(AssessmentsDetailActivity.this,
            (TextView) findViewById(R.id.assessmentDueDateEditText)); 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2019-05-03T07:25:32.357

**使用这个简单的技术来做到这一点：**

*第 1 步：创建片段对话框*

```
public class DatePickerFragmentDialog  extends DialogFragment {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        return new DatePickerDialog(getActivity(), (DatePickerDialog.OnDateSetListener) getActivity(), year, month, day);
    }

} 
```

*第 2 步：在所需的活动中遵循此*

1.  活动必须实现：**DatePickerDialog.OnDateSetListener**

2.  在按钮上设置 onClickListener：

    ```
    DialogFragment datePicker = new DatePickerFragmentDialog();
    datePicker.show(getSupportFragmentManager(), "Custom Date Picker"); 
    ```

*第 3 步：覆盖 OnDateSetListener*

```
public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {
        Calendar calendar = Calendar.getInstance();
        calendar.set(Calendar.YEAR, year);
        calendar.set(Calendar.MONTH, month);
        calendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);

        @SuppressLint("SimpleDateFormat") DateFormat dateFormat = new 
        SimpleDateFormat("MM/dd/yyyy");
        String currentDateString = dateFormat.format(calendar.getTime());

        tvPaymentDate.setText(currentDateString);
    } 
```

因此我们可以对日期使用任何格式:)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2014-04-24T18:53:14.437

使用片段、MvvmCross 和 Xamarin.Android 的解决方案

```
public class EnterTimeView : MvxFragment, DatePickerDialog.IOnDateSetListener
    {            
        private EditText datePickerText;
        public EnterTimeView()
        {
            this.RetainInstance = true;
        }

        public override Android.Views.View OnCreateView(Android.Views.LayoutInflater inflater, Android.Views.ViewGroup container, Android.OS.Bundle savedInstanceState)
        {
            this.HasOptionsMenu = true;

            var ignored = base.OnCreateView(inflater, container, savedInstanceState);
            var view = inflater.Inflate(Resource.Layout.EnterTimeView, container, false);

            datePickerText = view.FindViewById<EditText>(Resource.Id.DatePickerEditText);
            datePickerText.Focusable = false;
            datePickerText.Click += delegate
            {
                var dialog = new DatePickerDialogFragment(Activity, Convert.ToDateTime(datePickerText.Text), this);
                dialog.Show(FragmentManager, "date");
            };

            var set = this.CreateBindingSet<EnterTimeView, EnterTimeViewModel>();    
            set.Bind(datePickerText).To(vm => vm.Date);
            set.Apply();

            return view;
        }   

        public void OnDateSet(Android.Widget.DatePicker view, int year, int monthOfYear, int dayOfMonth)
        {
            datePickerText.Text = new DateTime(year, monthOfYear + 1, dayOfMonth).ToString();
        }

        private class DatePickerDialogFragment : Android.Support.V4.App.DialogFragment 
        {
            private readonly Context _context;
            private DateTime _date;
            private readonly DatePickerDialog.IOnDateSetListener _listener;

            public DatePickerDialogFragment(Context context, DateTime date, DatePickerDialog.IOnDateSetListener listener)
            {
                _context = context;
                _date = date;
                _listener = listener;
            }

            public override Dialog OnCreateDialog(Bundle savedState)
            {
                var dialog = new DatePickerDialog(_context, _listener, _date.Year, _date.Month - 1, _date.Day);
                return dialog;
            }
        } 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2016-11-11T19:17:33.347

使用**数据绑定：**

```
<EditText
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:focusable="false"
  android:onClick="@{() -> viewModel.onDateEditTextClicked()}"
  android:hint="@string/hint_date"
  android:imeOptions="actionDone"
  android:inputType="none"
  android:maxLines="1"
  android:text="@={viewModel.filterDate}" /> 
```

（见`focusable`和）`inputType``onClick`

内部**视图模型：**

```
public void onDateEditTextClicked() {
    // do something
} 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2017-08-24T04:29:53.950

我的表演课`DatePicker`。我可以使用for`EditText`或`TextView``Button`

```
import android.app.DatePickerDialog;
import android.content.Context;
import android.view.View;
import android.widget.DatePicker;
import android.widget.TextView;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.TimeZone;

public class TextViewDatePicker
        implements View.OnClickListener, DatePickerDialog.OnDateSetListener {
    public static final String DATE_SERVER_PATTERN = "yyyy-MM-dd";
    private DatePickerDialog mDatePickerDialog;
    private TextView mView;
    private Context mContext;
    private long mMinDate;
    private long mMaxDate;

    public TextViewDatePicker(Context context, TextView view) {
        this(context, view, 0, 0);
    }

    public TextViewDatePicker(Context context, TextView view, long minDate, long maxDate) {
        mView = view;
        mView.setOnClickListener(this);
        mView.setFocusable(false);

        mContext = context;
        mMinDate = minDate;
        mMaxDate = maxDate;
    }

    @Override
    public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
        Calendar calendar = Calendar.getInstance();
        calendar.set(Calendar.YEAR, year);
        calendar.set(Calendar.MONTH, monthOfYear);
        calendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);
        Date date = calendar.getTime();

        SimpleDateFormat formatter = new SimpleDateFormat(DATE_SERVER_PATTERN);
        mView.setText(formatter.format(date));
    }

    @Override
    public void onClick(View v) {
        Calendar calendar = Calendar.getInstance(TimeZone.getDefault());
        mDatePickerDialog = new DatePickerDialog(mContext, this, calendar.get(Calendar.YEAR),
                calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH));
        if (mMinDate != 0) {
            mDatePickerDialog.getDatePicker().setMinDate(mMinDate);
        }
        if (mMaxDate != 0) {
            mDatePickerDialog.getDatePicker().setMaxDate(mMaxDate);
        }
        mDatePickerDialog.show();
    }

    public DatePickerDialog getDatePickerDialog() {
        return mDatePickerDialog;
    }

    public void setMinDate(long minDate) {
        mMinDate = minDate;
    }

    public void setMaxDate(long maxDate) {
        mMaxDate = maxDate;
    }
} 
```

使用

```
EditText myEditText = findViewById(R.id.myEditText);
TextViewDatePicker editTextDatePicker = new TextViewDatePicker(context, myEditText, minDate, maxDate);
//TextViewDatePicker editTextDatePicker = new TextViewDatePicker(context, myEditText); //without min date, max date 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2017-12-17T13:59:39.063

Kotlin 移植，调用 setDatePicker 函数

```
private fun setDatePicker(dateEditText: EditText) {

    val myCalendar = Calendar.getInstance()

    val datePickerOnDataSetListener = DatePickerDialog.OnDateSetListener { _, year, monthOfYear, dayOfMonth ->
        myCalendar.set(Calendar.YEAR, year)
        myCalendar.set(Calendar.MONTH, monthOfYear)
        myCalendar.set(Calendar.DAY_OF_MONTH, dayOfMonth)
        updateLabel(myCalendar, dateEditText)
    }

    dateEditText.setOnClickListener {
        DatePickerDialog(this@YourActivityName, datePickerOnDataSetListener, myCalendar
                .get(Calendar.YEAR), myCalendar.get(Calendar.MONTH),
                myCalendar.get(Calendar.DAY_OF_MONTH)).show()
    }
}

private fun updateLabel(myCalendar: Calendar, dateEditText: EditText) {
    val myFormat: String = "dd-MMM-yyyy"
    val sdf = SimpleDateFormat(myFormat, Locale.UK)
    dateEditText.setText(sdf.format(myCalendar.time))
} 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2018-11-26T08:57:01.953

日期选择器对话框

```
 Calendar c=Calendar.getInstance();
                Integer month=c.get(Calendar.MONTH);
                Integer day=c.get(Calendar.DAY_OF_MONTH);
                Integer year=c.get(Calendar.YEAR);

                DatePickerDialog datePickerDialog =new DatePickerDialog(Expenture_Activity.this, new DatePickerDialog.OnDateSetListener() {
                    @Override
                    public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {
                        et_from.setText(dayOfMonth+"/"+month+"/"+year);
                    }
                },year,month,day);
                datePickerDialog.show(); 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2014-09-22T21:39:52.330

我已经尝试了所有建议的方法，但它们都有自己的问题。

我认为最好的解决方案是使用如下框架布局：

```
<FrameLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <EditText
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                .... />

            <View
                android:id="@+id/invisible_click_watcher"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:clickable="true" />

</FrameLayout> 
```

然后添加在@Android的答案中精美编写的*DatePickerDialog代码。*

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2017-11-06T14:55:38.140

我认为最好覆盖 EditText 类...

```
public class EditTextDP extends android.support.v7.widget.AppCompatEditText implements View.OnClickListener, DatePickerDialog.OnDateSetListener {
    public EditTextDP(Context context) {
        super(context);
        setOnClickListener(this);
        setFocusable(false);
    }

    public EditTextDP(Context context, AttributeSet attrs) {
        super(context, attrs);
        setOnClickListener(this);
        setFocusable(false);
    }

    public EditTextDP(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        setOnClickListener(this);
        setFocusable(false);
    }

    @Override
    public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
        setText(new StringBuilder().append(dayOfMonth).append("/").append(monthOfYear + 1).append("/").append(year));
    }

    @Override
    public void onClick(View v) {
        Calendar calendar = Calendar.getInstance(TimeZone.getDefault());
        DatePickerDialog dialog = new DatePickerDialog(getContext(), this, calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH));
        dialog.show();
    }
} 
```

并在 XML 中使用它...

```
 <*.*.*.EditTextDP
                android:id="@+id/c1_dob_hm"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/round_edittext_white"
                android:ems="10"
                android:padding="8dp">

            </*.*.*.EditTextDP> 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2017-11-16T14:34:11.570

**用这个**

```
your_edittext.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View arg0) {

                    final Calendar calendar = Calendar.getInstance();
                    int yy = calendar.get(Calendar.YEAR);
                    int mm = calendar.get(Calendar.MONTH);
                    int dd = calendar.get(Calendar.DAY_OF_MONTH);
                    DatePickerDialog datePicker = new DatePickerDialog(getActivity(), new DatePickerDialog.OnDateSetListener() {
                        @Override
                        public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
                            String date = String.valueOf(dayOfMonth) + "/" + String.valueOf(monthOfYear+1)
                                    + "/" + String.valueOf(year);
                            your_edittext.setText(date);
                        }
                    }, yy, mm, dd);
                    datePicker.show();
                }
            }); 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2017-12-22T12:09:07.327

```
editText1.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            DatePickerDialog.OnDateSetListener dpd = new DatePickerDialog.OnDateSetListener() {
                @Override
                public void onDateSet(DatePicker view, int year, int monthOfYear,
                                      int dayOfMonth) {

                    int s = monthOfYear + 1;
                    String a = dayOfMonth + "/" + s + "/" + year;
                    editText1.setText(a);
                }
            };

            Time date = new Time();
            DatePickerDialog d = new DatePickerDialog(UpdateStore.this, dpd, date.year, date.month, date.monthDay);
            d.show();

        }
    }); 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2020-11-10T15:28:56.083

使用 @DrunkenDaddy 扩展功能，至少在我的情况下（以编程方式创建 EditText），它在第一次单击时显示键盘，然后在第二次单击时显示日期选择器。

显然，将 isFocusable 和 isFocusableInTouchMode 设置为 false 是无关紧要的，因为第一次单击总是被 EditText 解释为焦点更改。因此，当 EditText 获得焦点时，我不得不触发一次点击。现在它按预期工作：第一次单击时，它直接打开日期选择器，而不是键盘（感谢将 showSoftInputOnFocus 设置为 false）：

```
fun EditText.transformIntoDatePicker(context: Context, format: String = "dd/MM/yyyy", maxDate: Date? = null) {
    isClickable = true
    showSoftInputOnFocus = false
    isCursorVisible = false

    setOnFocusChangeListener { _, hasFocus ->  if (hasFocus) callOnClick()}

    val myCalendar = Calendar.getInstance()
    val datePickerOnDataSetListener =
        DatePickerDialog.OnDateSetListener { _, year, monthOfYear, dayOfMonth ->
            myCalendar.set(Calendar.YEAR, year)
            myCalendar.set(Calendar.MONTH, monthOfYear)
            myCalendar.set(Calendar.DAY_OF_MONTH, dayOfMonth)
            val sdf = SimpleDateFormat(format, Locale.getDefault())
            setText(sdf.format(myCalendar.time))
    }

    setOnClickListener {
        DatePickerDialog(
             context, datePickerOnDataSetListener, 
             myCalendar.get(Calendar.YEAR), myCalendar.get(Calendar.MONTH),
             myCalendar.get(Calendar.DAY_OF_MONTH)
        ).run {
            maxDate?.time?.also { datePicker.maxDate = it }
            show()
    }
} 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2021-10-19T05:57:32.023

如果您需要所有活动的单个函数，调用该函数时将打开日期选择器，然后返回我选择的日期，然后为所有活动创建一个界面

```
public interface OnDatePickerLitionarCallBack {

    void DatePicker(String selectedDate);
} 
```

然后在活动中调用接口

```
 public class MapsActivity extends FragmentActivity implements OnDatePickerLitionarCallBack {
     @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_maps);

        findViewById(R.id.date_pick).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                date_Picker(MapsActivity.this,MapsActivity.this);
            }
        });
    }
     @Override
        public void DatePicker(String selectedDate) {

        }
    } 
```

在实现接口之后创建一个公共公共类来访问任何活动或片段

```
public class Commons{

    public static void date_Picker(Context context, OnDatePickerLitionarCallBack onDatePickerLitionarCallBack) {
        final java.util.Calendar myCalendar = java.util.Calendar.getInstance();

        DatePickerDialog.OnDateSetListener date = new DatePickerDialog.OnDateSetListener() {

            @Override
            public void onDateSet(DatePicker view, int year, int monthOfYear,
                                  int dayOfMonth) {
                // TODO Auto-generated method stub
                myCalendar.set(java.util.Calendar.YEAR, year);
                myCalendar.set(java.util.Calendar.MONTH, monthOfYear);
                myCalendar.set(java.util.Calendar.DAY_OF_MONTH, dayOfMonth);
                String myFormat = "dd,MMM yyyy"; //In which you need put here
                java.text.SimpleDateFormat sdf = new java.text.SimpleDateFormat(myFormat, Locale.US);

                onDatePickerLitionarCallBack.DatePicker(sdf.format(myCalendar.getTime()));

            }
        };
        DatePickerDialog datePickerDialog = new DatePickerDialog(context, date, myCalendar
                .get(java.util.Calendar.YEAR), myCalendar.get(java.util.Calendar.MONTH),
                myCalendar.get(java.util.Calendar.DAY_OF_MONTH));

        datePickerDialog.show();

    }
} 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2016-09-24T15:35:58.603

```
public class DatePickerActivity extends AppCompatActivity {
    Button button;
    static TextView textView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        button= (Button) findViewById(R.id.btn_click);
        textView= (TextView) findViewById(R.id.txt_date);

        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                DialogFragment newFragment=new DatePickerFragment();
                newFragment.show(getFragmentManager(), "datepicker");
            }
        });

    }

    public class DatePickerFragment extends DialogFragment implements    DatePickerDialog.OnDateSetListener{
        @Override
        public void onDateSet(DatePicker view, int year, int monthOfYear, int  day) {
            String years=""+year;
            String months=""+(monthOfYear+1);
            String days=""+day;
            if(monthOfYear>=0 && monthOfYear<9){
                months="0"+(monthOfYear+1);
            }
            if(day>0 && day<10){
                days="0"+day;

            }
            textView.setText(days+"/"+months+"/"+years);

        }

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            //use the current date as the default date in the picker
            final Calendar c=Calendar.getInstance();
            int year=c.get(Calendar.YEAR);
            int month=c.get(Calendar.MONTH);
            int day=c.get(Calendar.DAY_OF_MONTH);
            DatePickerDialog datePickerDialog=null;
            datePickerDialog=new DatePickerDialog(getActivity(), this, year,  month, day);

            return datePickerDialog;
        }

    }

} 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2017-12-19T16:32:07.597

**试试这个**

```
btn=(Button)findViewById(R.id.chs);
    final Dialog dialog = new Dialog(MainActivity.this);
    dialog.setCanceledOnTouchOutside(true);
    btn.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            dialog.setContentView(R.layout.datepickerdialog);
            dp=(DatePicker) dialog.findViewById(R.id.btp);
            dialog.show();
            ok=(Button)dialog.findViewById(R.id.btn1);
            ok.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    dialog.dismiss();
                }
            });
        }

    }); 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2018-09-25T16:44:55.077

editText.setOnClickListener(new View.OnClickListener() {

```
 @Override
    public void onClick(final View v) {
        final Calendar c = Calendar.getInstance();
        mYear = c.get(Calendar.YEAR);
        mMonth = c.get(Calendar.MONTH);
        mDay = c.get(Calendar.DAY_OF_MONTH);

        final DatePickerDialog datePickerDialog = new DatePickerDialog(getContext(),
                new DatePickerDialog.OnDateSetListener() {
                    String fmonth, fDate;
                    int month;

                    @Override
                    public void onDateSet(DatePicker view, int year,
                                          int monthOfYear, int dayOfMonth) {

                        try {
                            if (monthOfYear < 10 && dayOfMonth < 10) {

                                fmonth = "0" + monthOfYear;
                                month = Integer.parseInt(fmonth) + 1;
                                fDate = "0" + dayOfMonth;
                                String paddedMonth = String.format("%02d", month);
                                editText.setText(fDate + "/" + paddedMonth + "/" + year);

                            } else {

                                fmonth = "0" + monthOfYear;
                                month = Integer.parseInt(fmonth) + 1;
                                String paddedMonth = String.format("%02d", month);
                                editText.setText(dayOfMonth + "/" + paddedMonth + "/" + year);
                            }

                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                    }

                }, mYear, mMonth, mDay);
        datePickerDialog.getDatePicker().setMaxDate(System.currentTimeMillis());
        datePickerDialog.show();

    }

}); 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2016-12-07T09:48:55.527

试试这个：

```
public class DatePickerFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {

DataPickerListener listener;

public DatePickerFragment(DataPickerListener l) {
    listener = l;
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Use the current date as the default date in the date picker
    final Calendar c = Calendar.getInstance();
    int year = c.get(Calendar.YEAR);
    int month = c.get(Calendar.MONTH);
    int day = c.get(Calendar.DAY_OF_MONTH);

    return new DatePickerDialog(getActivity(),
            AlertDialog.THEME_HOLO_LIGHT, this, year, month, day);
}

public void onDateSet(DatePicker view, int year, int month, int day) {

    month = month + 1;
    String stringOfDate = day + "-" + month + "-" + year;
    listener.setDate(stringOfDate);
    Util.Log(stringOfDate);
}

@Override
public void onCancel(DialogInterface dialog) {
    // TODO Auto-generated method stub
    super.onCancel(dialog);
    listener.cancel();
}

public static interface DataPickerListener {
    void setDate(String date);

    void cancel();
}
}
// use this function to open datePicker popup

DialogFragment newFragment;

public void pickDate() {
    if (newFragment == null)
        newFragment = new DatePickerFragment(new PickDateListener());
    newFragment.show(getFragmentManager(), "Date Picker");
}

class PickDateListener implements DataPickerListener {

    @Override
    public void setDate(String date) {
        createSpiner(date);
        onetouch = false;
    }

    @Override
    public void cancel() {
        onetouch = false;
    }

} 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2017-02-11T10:54:40.410

```
 EditText text = (EditText) findViewById(R.id.editText);

    text.setOnClickListener(new OnClickListener(){
       @RequiresApi(api = Build.VERSION_CODES.N)
       @Override
       public void onClick(View view) {

             DatePickerDialog datePickerDialog = new DatePickerDialog(this, new DatePickerDialog.OnDateSetListener() {
               @Override
               public void onDateSet(DatePicker datePicker, int i, int i1, int i2) {
                   String date = i2 + "/" + (++i1) + "/" + i;
                   text.setText(date);
                }
        },year,month,date);
       }
    });  

    datePickerDialog.show(); 
```

您还可以通过这些语句设置最小日期和最大日期。

```
 datepickerDialoge.getDatepicker().setMinDate(long Date);

   datepickerDialoge.getDatepicker().setMaxDate(long Date); 
```

注意：在 datepickerDialog.show() 之前添加这些行；声明你会得到这样的日期=12/2/2017。

我希望我的回答会有所帮助。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2020-01-12T01:58:44.230

这在 2020 年 1 月对我有用

XML 部分：

```
 <EditText
            android:id="@+id/etDOB"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:clickable="true"
            android:editable="false"
            android:ems="10"
            android:hint="Enter Your Date of Birth" /> 
```

Java部分：

```
 final Calendar myCalendar = Calendar.getInstance();

         userDOBView  = (EditText)findViewById(R.id.etDOB);

    final DatePickerDialog.OnDateSetListener date = new DatePickerDialog.OnDateSetListener(){
      @Override
      public void onDateSet(DatePicker view, int year, int monthOfYear, int  dayOfMonth) {
             myCalendar.set(Calendar.YEAR, year);
             myCalendar.set(Calendar.MONTH, monthOfYear);
             myCalendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);
             updateLabel();
      }
    };

    userDOBView.setOnTouchListener(new View.OnTouchListener(){
      @Override
      public boolean onTouch(View v, MotionEvent event){
       if(event.getAction() == MotionEvent.ACTION_DOWN){
         new DatePickerDialog("YourClassName".this, date, 
             myCalendar.get(Calendar.YEAR), 
             myCalendar.get(Calendar.MONTH),         
             myCalendar.get(Calendar.DAY_OF_MONTH)).show();
          }
          return true;
       }
    });
private void updateLabel() {
  String myFormat = "MM/dd/yyyy"; //In which you need put here
  SimpleDateFormat sdf = new SimpleDateFormat(myFormat, Locale.US);

  // edittext.setText(sdf.format(myCalendar.getTime()));
  userDOBView.setText(sdf.format(myCalendar.getTime()));
} 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-09-22T09:54:45.847

将这 4 行放在（EditText、AppCompatEditText）上。它不会显示键盘。然后在 clicklistener 上，您可以显示 datePicker

```
android:clickable="false" 
   android:cursorVisible="false" 
   android:focusable="false" 
   android:focusableInTouchMode="false" 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-11-19T06:54:28.377

这是 Material Date Picker 的 Kotlin 扩展函数：

```
fun TextInputEditText.datePicker(fm:FragmentManager, tag: String) {

isFocusableInTouchMode = false
isClickable = true
isFocusable = false

val datePicker =
    MaterialDatePicker.Builder.datePicker()
        .setTitleText("Select Date")
        .build()

setOnClickListener {

    datePicker.show(fm,"tag")
}

datePicker.addOnPositiveButtonClickListener {
   setText(datePicker.headerText)
    Log.d("TAG", "datePicker: \n $it")
}} 
```

用法：

在活动中：

```
yourTextInputEditText.datePicker(supportFragmentManager,"tag") 
```

在片段中：

```
yourTextInputEditText.datePicker(requireActivity().supportFragmentManager,"tag") 
```

* * *

## 回答 #32

> 赞同：-1
> 
> 时间：2019-02-22T15:51:14.263

我基于 Linh 的 MvvmCross 的 Xamarin.Android 解决方案：

```
public class DatePickerEditText : EditText, DatePickerDialog.IOnDateSetListener
{
    IDisposable _clickSubscription;

    public override bool Clickable => true;

    protected DatePickerEditText(IntPtr javaReference, JniHandleOwnership transfer)
        : base(javaReference, transfer)
        => Init();

    public DatePickerEditText(Context context) : base(context)
        => Init();

    public DatePickerEditText(Context context, IAttributeSet attrs) 
        : base(context, attrs)
        => Init();

    public DatePickerEditText(Context context, IAttributeSet attrs, int defStyleAttr) 
        : base(context, attrs, defStyleAttr)
        => Init();

    public DatePickerEditText(Context context, IAttributeSet attrs, int defStyleAttr, int defStyleRes) 
        : base(context, attrs, defStyleAttr, defStyleRes)
        => Init();

    protected override void Dispose(bool disposing)
    {
        if (disposing)
        {
            _clickSubscription?.Dispose();
            _clickSubscription = null;
        }

        base.Dispose(disposing);
    }

    public void OnDateSet(DatePicker view, int year, int month, int dayOfMonth)
        => Text = view.DateTime.ToString("d", CultureInfo.CurrentUICulture);

    void Init()
    {
        SetFocusable(ViewFocusability.NotFocusable);
        _clickSubscription = this.WeakSubscribe(nameof(Click), OnClick);
    }

    void OnClick(object sender, EventArgs e)
    {
        var date = DateTime.Today;
        try
        {
            date = DateTime.Parse(Text, CultureInfo.CurrentUICulture);
        }
        catch (Exception ex)
        {
            System.Diagnostics.Debug.WriteLine(ex);
        }

        var dialog = new DatePickerDialog(Context,
                                          this,
                                          date.Year,
                                          date.Month,
                                          date.Day);
        dialog.Show();
    }
} 
```

对于普通 Xamarin.Android 版本，只需将 WeakSubscribe 替换为对 EditText 的 Click 事件的常规订阅，不要忘记在 Dispose 方法覆盖中取消订阅。

# javascript - 是否可以有一个继承自 Boolean.prototype 的自定义布尔对象？

> ID：14933336
> 
> 赞同：2
> 
> 时间：2013-02-18T09:45:47.953
> 
> 标签：javascript

类似的东西：

```
 var MyCustomBoolean = function(b){
    if (b === 'FALSE'){
      this.b = false;
    }else if(b === 'TRUE'){
      this.b = true;
    }

    this.valueOf = function(){
      return this.b;
    }
  } 
```

这样下面的内容就会产生一个带有“in your face”文本的警报

```
if (new MyCustomBoolean('TRUE')){
  alert("In your face!");
}

if (new MyCustomBoolean('FALSE')){
  alert("not so much.");
} 
```

现在我可以通过显式调用 valueOf 函数来解决这个问题。通过“myBObj == true”检查等价性。

那么是否有可能拥有一个继承自 Boolean.prototype 的自定义布尔对象，这样我就可以编写上述 if 块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:03:20.190

不，不可能有任何评估为 的对象`false`。继承自 `Boolean.prototype`不会改变[`ToBoolean`行为](http://es5.github.com/#x9.2)。相反，让你的所有词法分析器对象实现一种“评估”方法，以便以下工作：

```
var bool = new LexerBoolean("FALSE")
if (bool.getSemanticValue()) {…} 
```

# android - Android dom解析器 - 非法字符异常

> ID：14933338
> 
> 赞同：0
> 
> 时间：2013-02-18T09:45:54.163
> 
> 标签：android, utf-8, domparser

我需要在我的 Android 应用程序中解析一个 xml 文档，并且我正在使用 Dom 解析器。我的 xml 文件中的编码设置为 UTF-8。我用于解析的代码如下：

```
 DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();
    InputStream inStream = getAssets().open("words.xml");
    InputSource inSource = new InputSource(inStream);
    inSource.setEncoding("UTF-8");
    Document doc = db.parse(inSource); 
```

但问题是我得到了一个非法字符异常。有问题的节点具有以下结构：

```
 <obriši>
        <item>obriši</item>
        <item>ukloni</item>
    </obriši> 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:03:15.367

尝试

```
inSource.setEncoding("windows-1251"); 
```

# mysql - PHPMyAdmin 不导入 unicode

> ID：14933340
> 
> 赞同：0
> 
> 时间：2013-02-18T09:45:56.430
> 
> 标签：mysql, unicode, utf-8, phpmyadmin

当我使用 PHPMyAdmin 的导入功能时，它不会导入非 ASCII 字符，例如 ä、ö、ü、õ 以及字符后的其余单词。

当我用记事本打开 CSV 文件时，它通常会显示非 ASCII 字符，但是当我尝试导入它时 - 它不起作用。

手动输入那些丢失的字符是可行的，MySQL 会按原样保存它们。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:47:22.420

mySQL 在遇到当前字符集下无效的字符时会这样做。

你没有提到你使用什么工具来导入数据，但你应该能够在导入时指定一个字符集。如果该字符集与数据库匹配，那么一切都会好起来的。此外，请确保文件实际上是用该字符集编码的。

如果您的导入工具不提供选择字符集的选项，您可以尝试使用[phpMyAdmin](http://www.phpmyadmin.net/home_page/index.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:52:19.290

确保您知道 CSV 文件的编码是什么 - 它应该是 UTF-8。然后在导入之前，输入“use utf8”，它应该可以正常工作。

# jquery - 使用 window.location.replace 渲染页面而不调用 .ready 函数 windows phone 7 phonegap 项目

> ID：14933344
> 
> 赞同：0
> 
> 时间：2013-02-18T09:46:07.687
> 
> 标签：jquery, windows-phone-7, cordova

使用 Cordova 2.4.0 - Windows Phone 7

我厌倦了从 index.html 导航到另一个 html 页面，html 页面成功呈现，控制台说

> GapBrowser_Navigated :: /app/www/ViewMokhalfaDetails.html

这样 ViewMokhalfaDetails.html 是目标页面但是没有执行脚本，尽管我已经在 ViewMokhalfaDetails.html 的标题中包含了 js 文件

```
<script type="text/javascript" charset="utf-8" src="cordova-2.4.0.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script src="Scripts/ViewMokhalfaDetails.js" type="text/javascript"></script> 
```

在 ViewMokhalfaDetails.js 文件中我写了这个

```
 $(document).ready(function () {console.log("Hello from .ready function")} ); 
```

我不知道为什么 .ready 中的代码没有成功执行。

**更新 1** 我添加了一个按钮并将 onclick 事件绑定到位于 js 文件中的函数，它与 .ready 函数具有相同的功能，因此问题出在 .ready() 函数中

**更新 2** 使用 window.location.replace 后，localStorage["Key 从第一页输入"] 在目标页面中被清除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:16:22.090

这是因为您转换到其他 html 页面的方式。如果单击按钮，请尝试将以下内容添加到按钮标签或锚标签：

```
rel="external" 
```

如果您要以编程方式访问其他页面，请尝试在关闭 body 标记后将脚本放在页面末尾，如下所示：

```
</body>

<script type="text/javascript">

$(document).ready(function () {console.log("Hello from .ready function")} );
</script>

</html> 
```

# nlp - NLP 的停用词列表

> ID：14933345
> 
> 赞同：3
> 
> 时间：2013-02-18T09:46:11.013
> 
> 标签：nlp, information-retrieval, lda, topic-modeling, wsd

`he, she, it`在执行 NLP 或 IR/IE 相关任务时，是否有人们通常用来删除标点符号和关闭类词（例如）的停用词列表？

我一直在尝试使用 gibbs 抽样来进行词义消歧的主题建模，并且它不断给标点符号和近类词提供高概率，只是因为它们经常出现在语料库中。[https://github.com/christianscheible/BNB/blob/master/nb_gibbs.py](https://github.com/christianscheible/BNB/blob/master/nb_gibbs.py)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T11:28:58.037

你试过谷歌搜索吗？我得到的热门文章要么包含停用词列表，要么是链接到所述列表的堆栈溢出帖子：

*   [这里](https://stackoverflow.com/questions/1218335/stop-words-list-for-english)
*   [和这里](http://www.ranks.nl/resources/stopwords.html)
*   [和这里](http://dev.mysql.com/doc/refman/5.1/en/fulltext-stopwords.html)

# python - 使用 opencv 和 pyaudio 从网络摄像头录制视频和音频

> ID：14933356
> 
> 赞同：1
> 
> 时间：2013-02-18T09:46:23.293
> 
> 标签：python, audio, video, opencv, recording

我是 Python 的初学者，想制作一个像电影“阿凡达”一样的视频日记。我想使用 OpenCV。录制我的网络摄像头的视频流已经可以了，但是如何同时保存我的网络摄像头的视频和音频？顺便说一句：我正在使用 Linux 和 python 2.7

我当前的视频录制代码：

```
 #!/usr/bin/python
 time = localtime()
 s = "%02i:%02i:%02i_%02i-%02i-%02i" % (time[3],time[4],time[5],time[2],time[1],time[0])
 global fn
 fn = "%02i_%02i_%02i__%02i_%02i_%02i" % (time[3],time[4],time[5],time[2],time[1],time[0])
 recordingtime=str(s)

 videodir="./Videos/"
 # Set video settings
 capture = cv.CaptureFromCAM(0)
 fourcc = cv.CV_FOURCC('M','J','P','G')
 fps = 25
 w, h = 720, 540
 stream = cv.CreateVideoWriter(video.avi", fourcc, fps, (w, h))

 # recording time
 recordingtime = 20
 recstart = int(time())

 while True:
     now = int(time())
     recdiff = now - recstart
     counter = recdiff - recordingtime
     if counter <= 0 :
         # start timer
         rectime = recordingtime
    frame = cv.QueryFrame(capture)

         # write stream
    # Display text
    ## color settings for text
    r=255 
    g=255 
    b=255 
         ## Text position
    tx = 450 
    ty = 330
    font = cv.InitFont(cv.CV_FONT_HERSHEY_COMPLEX, .7, .7, 0, 1, 20)
    cv.PutText(frame, recordingtime, (ty,tx),font, (b,g,r))
    cv.WriteFrame(stream, frame)

         ## Farbdefinition des eingeblendeten Textes
    r=255 
    g=0 
    b=0 

         ## Textposition
    tx = 450 
    ty = 50 
    font = cv.InitFont(cv.CV_FONT_HERSHEY_COMPLEX, 2, 2, 0, 4, 20)
    cv.PutText(frame, str(counter)[1:], (ty,tx),font, (b,g,r))

    # show window
    cv.ShowImage("capture", frame)
         # move window
    cv.MoveWindow ("capture", 550,400)
    key = cv.WaitKey(10)
    if key & 255 == 27:
        sys.exit()

     else :
    break 
```

在此先感谢您的帮助。

干杯M。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:38:53.853

不幸的是，opencv 中不支持音频流

# ruby-on-rails - ActiveAdmin 中的默认设计用户集成

> ID：14933362
> 
> 赞同：1
> 
> 时间：2013-02-18T09:46:34.337
> 
> 标签：ruby-on-rails, devise, activeadmin

我想在我的应用程序 AdminUsers 和普通用户中。最好的方法是什么？

我尝试的是这个。我从一个全新的 Rails 应用开始

```
rails new testadmin 
```

将 ActiveAdmin 添加到 Gemfile

```
gem 'activeadmin'
gem 'sass-rails'
gem "meta_search",    '>= 1.1.0.pre' 
```

并生成管理界面

```
rails generate active_admin:install 
```

然后按照外壳提供的说明进行操作。

我现在在 ActiveAdmin 中有 AdminUsers。然后我为设计生成了一个用户模型：

```
rails generate devise User
rake db:migrate 
```

并将其添加到管理界面

```
rails generate active_admin:resource User 
```

这似乎可行，因为我现在有一个带有过滤器的精美用户页面，并且能够添加新用户，但是每当我尝试添加它（设置电子邮件和密码）时，我都会收到以下异常：

```
ActiveModel::MassAssignmentSecurity::Error in Admin::UsersController#create

Can't mass-assign protected attributes: encrypted_password, reset_password_token, reset_password_sent_at(1i), reset_password_sent_at(2i), reset_password_sent_at(3i), reset_password_sent_at(4i), reset_password_sent_at(5i), remember_created_at(1i), remember_created_at(2i), remember_created_at(3i), remember_created_at(4i), remember_created_at(5i), current_sign_in_at(1i), current_sign_in_at(2i), current_sign_in_at(3i), current_sign_in_at(4i), current_sign_in_at(5i), last_sign_in_at(1i), last_sign_in_at(2i), last_sign_in_at(3i), last_sign_in_at(4i), last_sign_in_at(5i), current_sign_in_ip, last_sign_in_ip 
```

如何得到我所追求的？谢谢

PS：我真的希望他们将 ActiveAdmin 和 Devise 添加为标准，像 Django 这样的 Rails 开箱即用组件有它的管理界面和用户模型：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:21:53.690

您需要`attr-accessible`从`User`模型中输入。输入这个`app/admin/user.rb`

```
form do |f|
  f.inputs do
    f.input :email
    f.input :password
    f.input :password_confirmation
  end
  f.buttons
end 
```

希望这可以帮助

# web-services - Axis2 webservice 和 CXF web service 的区别

> ID：14933374
> 
> 赞同：37
> 
> 时间：2013-02-18T09:47:11.153
> 
> 标签：web-services, cxf, axis2, axis

如果有人帮助我了解axis2 Web服务和CXF Web服务之间的区别，我将不胜感激。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-18T09:57:18.097

axis2 web service和CXF web service的主要区别如下：

1.  CXF 支持 WS-Addressing、WS-Policy、WS-RM、WS-Security 和 WS-I BasicProfile。Axis2 支持除 WS-Policy 之外的每一个，后者将在即将发布的版本中得到支持。

2.  CXF 是在考虑 Spring 的情况下编写的；Axis2 不是。

3.  Axis2 支持更广泛的数据绑定，包括 XMLBeans、JiBX、JaxMe 和 JaxBRI 以及它自己的本机数据绑定 ADB。请注意，对 JaxME 和 JaxBRI 的支持在 Axis2 1.2 中仍被认为是实验性的。CXF 目前只支持 JAXB 和 Aegis；对 XMLBeans、JiBX 和 Castor 的支持将出现在 CXF 2.1 中。

4.  Axis2 支持多种语言——除了 Java 版本之外，还有一个可用的 C/C++ 版本。

但是，在比较这些框架时，查看它们开发 Web 服务的方法与比较特性同样重要。从开发人员的角度来看，这两个框架的行为方式彼此非常不同。Axis2 采用了一种方法，使其在许多方面类似于微型应用服务器。Axis2 附带一个 WAR，该 WAR 可以部署在 Tomcat 等 servlet 容器上，该容器旨在使 Web 服务更易于管理和动态部署。Axis2 Web 管理模块允许在应用程序运行时动态配置 Axis2——可以上传、激活或停用新服务，并且可以更改它们的参数。管理 UI 还允许在一个或多个正在运行的服务上启用模块。

Axis2 适合于独立于其他应用程序的独立 Web 服务，并提供多种功能，以及随着时间的推移通过其模块化架构添加更多功能的良好模型。一些开发人员可能会发现这对于他们的需求来说有点过于繁琐或繁重。这些开发人员可能更喜欢看 Apache CXF。

CXF 专注于开发人员的人体工程学和可嵌入性。大多数配置是通过 API 完成的，而不是繁琐的 XML 文件，非常强调 Spring 集成，包括对 Spring 2.0 的支持，并且 CXF 的 API 和 Spring 配置彼此非常接近。CXF 强调代码优先设计，使用简单的 API 使现有应用程序的服务开发更容易（它的可嵌入性也有帮助）。

无论您选择哪种框架，您都将受益于活跃且稳定的开源社区。这些框架中的每一个都有企业支持：Axis2 由 WSO2 支持，CXF 由 Iona 支持。两者都有活跃的开发者社区。Axis2 的存在时间较长，但 CXF 正在迅速追赶。我的建议是：如果多语言支持很重要，Axis2 是明智的选择。如果您关心一个专注于 Java 并紧密集成到 Spring 等项目中的实现，那么 CXF 是一个更好的选择，特别是对于将 Web 服务嵌入到其他程序中时。如果这些项目中的新特性并不重要，并且您对 Axis1 比较满意，那么您应该考虑继续使用它并跟上最新的维护版本，直到您有迁移的商业理由。

# ant - Jenkins JUnit 测试结果报告插件指出找不到 JUnit xml 文件？

> ID：14933375
> 
> 赞同：20
> 
> 时间：2013-02-18T09:47:12.667
> 
> 标签：ant, junit, jenkins, jenkins-plugins

从詹金斯收到的确切消息是：

```
No test report files were found. Configuration error?
Build step 'Publish JUnit test result report' changed build result to FAILURE 
```

配置 JUnit 测试结果报告插件时，在输入“测试报告 XMLs”路径为“/reports/TEST-*.xml”时，路径下方显示以下错误：

```
'/reports/TEST-*.xml' doesn't match anything: '' exists but not '/reports/TEST-*.xml' 
```

我也尝试过使用完整路径，但这会产生相同的结果。在这两种情况下，路径都应该选择 /reports 目录中存在的“TESTS-TestSuites.xml”文件。

我不确定这是否是插件或正在生成的 XML 文件的问题。我也知道这可能是我为运行 JUnit 测试并生成 XML 结果文件而编写的 ant 构建脚本的问题，因此我在下面包含了此内容，以防需要更改：

```
<?xml version="1.0" encoding="utf-8"?>
<project name="jenkins-tests" basedir="." default="linux">

<property name="junit.output.dir" value="output"/>
<property name="src.dir" value="src"/>
<property name="lib.dir" value="libs" />
<property name="bin.dir" value="bin" />
<property name="full-compile" value="true" />

<path id="classpath.base"/>

<path id="classpath.test">
    <pathelement location="${bin.dir}" />
    <pathelement location="${src.dir}" />
    <pathelement location="${lib.dir}" />
    <pathelement location="${lib.dir}/junit.jar" />
    <path refid="classpath.base" />
</path>

<target name="clean" description="Clean up build artefacts">
    <delete dir="${basedir}/${junit.output.dir}" />
</target>

<target name="prepare" depends="clean" description="Prepare for build">
    <mkdir dir="${basedir}/${junit.output.dir}" />
    <mkdir dir="${junit.output.dir}/reports"/> 
</target>

<target name="compile" depends="prepare">
    <javac srcdir="${src.dir}" destdir="${bin.dir}" verbose="${full-compile}" includeAntRuntime="false" >
        <classpath refid="classpath.test"/>
    </javac>
</target>

<target name="test" depends="compile">
    <junit printsummary="true" haltonfailure="false">
        <formatter type="xml" usefile="true"/>
        <classpath refid="classpath.test" />
        <batchtest fork="yes" todir="${junit.output.dir}">
            <fileset dir="${src.dir}">
                <include name="*.java"/>
            </fileset>
        </batchtest>
    </junit>
</target>

<target name="test-reports" depends="test">
    <junitreport tofile="TESTS-TestSuites.xml" todir="${junit.output.dir}/reports">
        <fileset dir="${junit.output.dir}">
            <include name="TEST-*.xml" />
        </fileset>
        <report format="frames" todir="${junit.output.dir}/reports" />
    </junitreport>
</target>
</project> 
```

我一直在研究这个问题一段时间，但没有找到任何解决方案，所以我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-18T10:56:47.103

Jenkins 从工作空间根目录查找路径。确保给定路径正确或使用通配符查看多个位置。尝试使用`**/reports/TEST-*.xml` 您确定报告文件夹就在工作区下方吗？手动验证测试结果文件是否确实存在于路径中给定的位置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-05-09T16:56:44.547

对于具有多种 Gradle 产品风格的**Android**`Test report XMLs`项目，我使用了以下路径：

```
**/build/test-results/**/TEST-*.xml 
```

[![JUnit 插件](../Images/d204c5feb02f4f25603541c1d62c5637.png)](https://i.stack.imgur.com/jb4ge.png)

# c# - C# - 将 SomeClass 传递给函数而不是 typeof(SomeClass)

> ID：14933381
> 
> 赞同：3
> 
> 时间：2013-02-18T09:47:40.467
> 
> 标签：c#, constructor, typeof

我已经实现了`ActionFilterAttribute`映射`SomeClass`到`SomeOtherClass`. 这是构造函数：

```
public class MapToAttribute : ActionFilterAttribute
{
    private Type _typeFrom;
    private Type _typeTo;
    public int Position { get; set; }

    public MapToAttribute(Type typeFrom, Type typeTo, int Position = 0)
    {
        this.Position = Position;
        this._typeFrom = typeFrom;
        this._typeTo = typeTo;
    }

    ...
} 
```

目前调用它的方法是：

```
MapTo(typeof(List<Customer>), typeof(List<CustomerMapper>), 999) 
```

出于美学原因，我宁愿能够做到

```
MapTo(List<Customer>, List<CustomerMapper>, 999) 
```

我试过做

```
 public MapToAttribute(object typeFrom, object typeTo, int Position = 0)
    {
        this.Position = Position;
        this._typeFrom = typeof(typeFrom);
        this._typeTo = typeof(typeTo);
    } 
```

但无济于事，因为 Visual Studio 会假装`typeFrom`并且`typeTo`未定义。

* * *

编辑： s 不支持泛型的使用（否则显然是正确的，如下所述）`Attribute`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:49:57.750

您不能将类型用作变量。通常，您可以使用泛型来摆脱`typeof`：

```
public class MapToAttribute<TFrom, TTo> : ActionFilterAttribute
{
    private Type _typeFrom;
    private Type _typeTo;
    public int Position { get; set; }

    public MapToAttribute(int Position = 0)
    {
        this.Position = Position;
        this._typeFrom = typeof(TFrom);
        this._typeTo = typeof(TTo);
    }

    ...
} 
```

用法：

```
new MapToAttribute<List<Customer>, List<CustomerMapper>>(999); 
```

**问题：**
C# 不允许泛型属性，所以你被困在`typeof`.
没有其他办法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T09:55:31.330

你不能这样做。除非使用泛型或 typeof，否则类型不能作为参数传递。Daniel Hilgarth 的解决方案很棒，但如果您的类打算用作属性，则不会起作用，因为 c# 不允许通用属性。

# iphone - 使用解析的聊天应用程序

> ID：14933383
> 
> 赞同：1
> 
> 时间：2013-02-18T09:47:49.140
> 
> 标签：iphone, ios6, chat

在使用聊天应用程序时，我发现教程[Chat using parse](http://attila.tumblr.com/post/21180235691/ios-tutorial-creating-a-chat-room-using-parse-com)，使用相同的 ApplicationID 和 Client Key 我无法与两个设备聊天，我应该为两者使用单独的 id 吗？任何人都可以帮助我提供一些参考资料或任何聊天应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T07:23:56.353

在我看来，您应该为两者使用单独的 ID 进行尝试。顺便说一句，我正在开发一个应用程序，它将是一个 VoIP 应用程序（根据你可以在谷歌上找到的示例：voip-sip-sdk/p_457）。如果您有兴趣，请查看。

# visual-studio-2010 - 使用 openCV 在 Visual Studios 2010 中构建项目时未解析的外部符号

> ID：14933385
> 
> 赞同：0
> 
> 时间：2013-02-18T09:47:51.200
> 
> 标签：visual-studio-2010, object, opencv, dll, linker

我正在尝试使用 openCV 构建一个项目，但出现以下错误：

```
1>------ Build started: Project: ZERO_CHECK, Configuration: Debug Win32 ------
1>  Checking Build System
1>  CMake does not need to re-run because C:/Users/Kevin/ROBOSLAM/build/CMakeFiles/generate.stamp is up-to-date.
1>  CMake does not need to re-run because C:/Users/Kevin/ROBOSLAM/build/examples/CMakeFiles/generate.stamp is up-to-date.
1>  CMake does not need to re-run because C:/Users/Kevin/ROBOSLAM/build/examples/opencv/CMakeFiles/generate.stamp is up-to-date.
2>------ Build started: Project: ratslam, Configuration: Debug Win32 ------
3>------ Build started: Project: ratslam_graphics, Configuration: Debug Win32 ------
3>  Building Custom Rule C:/Users/Kevin/ROBOSLAM/CMakeLists.txt
3>  CMake does not need to re-run because C:\Users\Kevin\ROBOSLAM\build\CMakeFiles\generate.stamp is up-to-date.
3>  RatslamGraphics.cpp
2>  Building Custom Rule C:/Users/Kevin/ROBOSLAM/CMakeLists.txt
2>  CMake does not need to re-run because C:\Users\Kevin\ROBOSLAM\build\CMakeFiles\generate.stamp is up-to-date.
2>  Experience_Map.cpp
2>  Pose_Cell_Network.cpp
3>     Creating library C:/Users/Kevin/ROBOSLAM/build/Debug/ratslam_graphics.lib and object C:/Users/Kevin/ROBOSLAM/build/Debug/ratslam_graphics.exp
3>RatslamGraphics.obj : error LNK2019: unresolved external symbol "public: __thiscall cv::Exception::Exception(int,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int)" (??0Exception@cv@@QAE@HABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@00H@Z) referenced in function "public: __thiscall cv::Mat::Mat(int,int,int,void *,unsigned int)" (??0Mat@cv@@QAE@HHHPAXI@Z)
3>RatslamGraphics.obj : error LNK2019: unresolved external symbol "public: virtual __thiscall cv::Exception::~Exception(void)" (??1Exception@cv@@UAE@XZ) referenced in function "public: __thiscall cv::Mat::Mat(int,int,int,void *,unsigned int)" (??0Mat@cv@@QAE@HHHPAXI@Z)
3>RatslamGraphics.obj : error LNK2019: unresolved external symbol "void __cdecl cv::error(class cv::Exception const &)" (?error@cv@@YAXABVException@1@@Z) referenced in function "public: __thiscall cv::Mat::Mat(int,int,int,void *,unsigned int)" (??0Mat@cv@@QAE@HHHPAXI@Z)
3>RatslamGraphics.obj : error LNK2019: unresolved external symbol "void __cdecl cv::fastFree(void *)" (?fastFree@cv@@YAXPAX@Z) referenced in function "public: __thiscall cv::Mat::~Mat(void)" (??1Mat@cv@@QAE@XZ)
3>RatslamGraphics.obj : error LNK2019: unresolved external symbol "public: void __thiscall cv::Mat::deallocate(void)" (?deallocate@Mat@cv@@QAEXXZ) referenced in function "public: void __thiscall cv::Mat::release(void)" (?release@Mat@cv@@QAEXXZ)
3>RatslamGraphics.obj : error LNK2019: unresolved external symbol "public: __thiscall cv::VideoWriter::VideoWriter(void)" (??0VideoWriter@cv@@QAE@XZ) referenced in function "public: __thiscall ratslam::RatslamGraphics::RatslamGraphics(class boost::property_tree::basic_ptree<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,struct std::less<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > > > &,class irr::IEventReceiver *,class ratslam::Ratslam *)" (??0RatslamGraphics@ratslam@@QAE@AAV?$basic_ptree@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V12@U?$less@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@@property_tree@boost@@PAVIEventReceiver@irr@@PAVRatslam@1@@Z)
3>C:\Users\Kevin\ROBOSLAM\build\Debug\ratslam_graphics.dll : fatal error LNK1120: 6 unresolved externals
2>..\src\ratslam\Pose_Cell_Network.cpp(716): warning C4996: 'fopen': This function or variable may be unsafe. Consider using fopen_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.
2>          C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\stdio.h(218) : see declaration of 'fopen'
2>  Visual_Template_Match.cpp
2>..\src\ratslam\Visual_Template_Match.cpp(127): warning C4018: '<' : signed/unsigned mismatch
2>  Ratslam.cpp
2>  Generating Code...
2>c:\users\kevin\roboslam\src\ratslam\experience_map.cpp(277): warning C4715: 'ratslam::Experience_Map::dijkstra_distance_between_experiences' : not all control paths return a value
2>     Creating library C:/Users/Kevin/ROBOSLAM/build/Debug/ratslam.lib and object C:/Users/Kevin/ROBOSLAM/build/Debug/ratslam.exp
2>  ratslam.vcxproj -> C:\Users\Kevin\ROBOSLAM\build\Debug\ratslam.dll
4>------ Build started: Project: ratslam_opencv_example, Configuration: Debug Win32 ------
4>  Building Custom Rule C:/Users/Kevin/ROBOSLAM/examples/opencv/CMakeLists.txt
4>  CMake does not need to re-run because C:\Users\Kevin\ROBOSLAM\build\examples\opencv\CMakeFiles\generate.stamp is up-to-date.
4>  main.cpp
4>C:\Users\Kevin\ROBOSLAM\libraries\OpenCV2.3\build\include\opencv2/flann/logger.h(70): warning C4996: 'fopen': This function or variable may be unsafe. Consider using fopen_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.
4>          C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\stdio.h(218) : see declaration of 'fopen'
4>..\..\..\examples\opencv\main.cpp(97): warning C4101: 'time_s' : unreferenced local variable
4>..\..\..\examples\opencv\main.cpp(97): warning C4101: 'last_time_s' : unreferenced local variable
4>     Creating library C:/Users/Kevin/ROBOSLAM/build/examples/opencv/Debug/ratslam_opencv_example.lib and object C:/Users/Kevin/ROBOSLAM/build/examples/opencv/Debug/ratslam_opencv_example.exp
4>main.obj : error LNK2019: unresolved external symbol "void __cdecl cv::fastFree(void *)" (?fastFree@cv@@YAXPAX@Z) referenced in function "public: __thiscall cv::Mat::~Mat(void)" (??1Mat@cv@@QAE@XZ)
4>main.obj : error LNK2019: unresolved external symbol "public: void __thiscall cv::Mat::deallocate(void)" (?deallocate@Mat@cv@@QAEXXZ) referenced in function "public: void __thiscall cv::Mat::release(void)" (?release@Mat@cv@@QAEXXZ)
4>main.obj : error LNK2019: unresolved external symbol "public: __thiscall cv::VideoCapture::VideoCapture(void)" (??0VideoCapture@cv@@QAE@XZ) referenced in function _main
4>main.obj : error LNK2019: unresolved external symbol "public: virtual __thiscall cv::VideoCapture::~VideoCapture(void)" (??1VideoCapture@cv@@UAE@XZ) referenced in function _main
4>main.obj : error LNK2019: unresolved external symbol "public: virtual bool __thiscall cv::VideoCapture::open(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (?open@VideoCapture@cv@@UAE_NABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function _main
4>main.obj : error LNK2019: unresolved external symbol "public: virtual bool __thiscall cv::VideoCapture::isOpened(void)const " (?isOpened@VideoCapture@cv@@UBE_NXZ) referenced in function _main
4>main.obj : error LNK2019: unresolved external symbol "public: virtual bool __thiscall cv::VideoCapture::grab(void)" (?grab@VideoCapture@cv@@UAE_NXZ) referenced in function _main
4>main.obj : error LNK2019: unresolved external symbol "public: virtual bool __thiscall cv::VideoCapture::retrieve(class cv::Mat &,int)" (?retrieve@VideoCapture@cv@@UAE_NAAVMat@2@H@Z) referenced in function _main
4>C:\Users\Kevin\ROBOSLAM\build\examples\opencv\Debug\ratslam_opencv_example.exe : fatal error LNK1120: 8 unresolved externals
5>------ Skipped Build: Project: ALL_BUILD, Configuration: Debug Win32 ------
5>Project not selected to build for this solution configuration 
========== Build: 2 succeeded, 2 failed, 0 up-to-date, 1 skipped ========== 
```

我正在使用 cMake 文件来创建项目，它的内容如下：

```
cmake_minimum_required(VERSION 2.8)

project(ratslam)
set(CMAKE_MODULE_PATH ${CMAKE_SOURCE_DIR}/cmake)

file(GLOB RATSLAM_INCLUDES src/ratslam/*.h src/ratslam/*.hpp)
file(GLOB RATSLAM_GRAPHICS_INCLUDES src/graphics/*.h src/graphics/*.hpp)
file(GLOB GRI_INCLUDES src/gri/*.h src/gri/*.hpp)
file(COPY ${RATSLAM_INCLUDES};${RATSLAM_GRAPHICS_INCLUDES};${GRI_INCLUDES} DESTINATION include)

include_directories("/libraries/OpenCV2.3/build")

include_directories("C:/Users/Kevin/ROBOSLAM/irrlicht-1.8/include")
link_directories("C:/Users/Kevin/ROBOSLAM/irrlicht-1.8/include")

include_directories("/libraries/boost_1_53_0")
include_directories("C:/Users/Kevin/ROBOSLAM/libraries/OpenCV2.3/build/include")
link_directories("/libraries/boost_1_53_0")

include_directories("C:/Users/Kevin/ROBOSLAM/libraries/boost_1_53_0")
link_directories("C:/Users/Kevin/ROBOSLAM/libraries/boost_1_53_0/")

link_directories("C:/Users/Kevin/ROBOSLAM/libraries/boost_1_53_0/stage/lib")

include_directories("${CMAKE_BINARY_DIR}/include")
add_definitions(-DRATSLAM_EXPORTS -DRATSLAM_GRAPHICS_EXPORTS)
add_library(ratslam SHARED src/ratslam/Experience_Map.cpp src/ratslam/Pose_Cell_Network.cpp src/ratslam/Visual_Template_Match.cpp src/ratslam/Ratslam.cpp)
target_link_libraries(ratslam ${Boost_DATE_TIME_LIBRARY})
add_library(ratslam_graphics SHARED src/graphics/RatslamGraphics.cpp)
target_link_libraries(ratslam_graphics Irrlicht ${OpenCV_LIBS})
file(MAKE_DIRECTORY ${CMAKE_BINARY_DIR}/bin)
file(MAKE_DIRECTORY ${CMAKE_BINARY_DIR}/include)
file(MAKE_DIRECTORY ${CMAKE_BINARY_DIR}/lib)

message(STATUS "headers include ${RATSLAM_INCLUDES};${RATSLAM_GRAPHICS_INCLUDES}")
set(RATSLAM_LIBS ratslam ratslam_graphics)
add_subdirectory(examples) 
```

似乎所有 openCV 方法都导致了错误。知道为什么吗？我相信我将所有库/头文件正确导入到项目中，但我仍然遇到这些问题。任何帮助/指出我正确的方向都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T18:29:28.583

从上面显示的错误中，我假设您使用的是 RatSLAM C++ 库，并且在 VS 2010 中编译期间我也遇到了相同的错误。我能够在以下链接的帮助下解决它：

[基于 Visual Studio LINK 错误的 OpenCV 构建](https://stackoverflow.com/questions/9867514/opencv-build-on-visual-studio-link-error)

上面的链接说应该配置某些 lib 文件，例如 OpenCV 库文件夹中的 opencv_core246.lib 和 opencv_highgui246.lib。该链接还引导您进入解释如何配置它们的教程：

[为 Visual Studio 2010 设置 OpenCV-2.3](https://stackoverflow.com/questions/7011238/opencv-2-3-c-visual-studio-2010/7014918#7014918)

我希望这有帮助。

# jquery - 如果选择了所有选择框，则 jquery 显示按钮

> ID：14933386
> 
> 赞同：0
> 
> 时间：2013-02-18T09:47:52.070
> 
> 标签：jquery, select, hide, show

```
$("select").bind("change", function(event) {
    if ("" != $("option:selected", this).val() && "" != $("option:selected", $("select")).val()) {
        $("#submit").fadeIn();
    } else {
        $("#submit").hide();          
    }
}); 
```

我有七个选择框和一个表单中的提交按钮。我想仅显示所有选择框的提交按钮（其中一些具有没有值的默认选项，仅当所选选项包含值时按钮才应处于活动状态）。正在使用此代码，但在我开始使用 ajax 从另一个 php 文件中获取四个选择框后它没有工作。

我该如何修改此代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:49:36.673

您可以将长度属性与选择器返回`selected`选择值*不*等于`empty`字符串的选择一起使用。

```
$("select").bind("change", function(event) {
    if($("select:selected[value!='']").length == $("select").length)
         $("#submit").fadeIn();
    else 
         $("#submit").hide(); 
}); 
```

我建议您使用一些`class`与 select 来具体说明。

```
$(".select-class").bind("change", function(event) {
    if($(".select:selected[value!='']").length == $(".select").length)
         $("#submit").fadeIn();
    else 
         $("#submit").hide(); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:54:46.997

尝试这个：

```
$("select").bind("change", function(event) {
    if($("select:selected[value!='']").length == $("select").length)
         $("#submit").fadeIn();
    else 
         $("#submit").hide(); 
}); 
```

# doctrine-orm - 如何测试连接在 Doctrine 2 中是否有效？

> ID：14933388
> 
> 赞同：9
> 
> 时间：2013-02-18T09:47:55.450
> 
> 标签：doctrine-orm, zend-framework2

我正在寻找一种方法来测试连接是否与 Doctrine 2 一起工作。

由于在我的应用程序中用户可以自己更改信息连接，我想检查用户是否输入了正确的登录名和密码。

我怎样才能做到这一点？

我试图将此代码放入 try/catch 块中：

```
try{
    $entityManager = $this->getEntityManager() ;
    $repository = $entityManager->getRepository('Authentification\Entity\User');
    $userToIdentify = $repository->findOneBy(array('login' => $this->_username, 'password' => $this->_password));
}catch(Exception $e){
    $code = Result::FAILURE ;
    $identity = "unknow" ;
    $messages = array(
       "message" => "Wrong login/password combination",
    ) ;
} 
```

问题是即使信息连接正确，我也无法捕捉到异常。

否则我会收到以下错误：

```
<b>Fatal error</b>:  Uncaught exception 'Zend\View\Exception\RuntimeException'
  with message 'Zend\View\Renderer\PhpRenderer::render: Unable to render template 
  &quot;layout/layout&quot;; resolver could not resolve to a file' in C:\xampp\htdocs\poemsV3\vendor\zendframework\zendframework\library\Zend\View\Renderer\PhpRenderer.php:451 Stack trace: #0 C:\xampp\htdocs\poemsV3\vendor\zendframework\zendframework\library\Zend\View\View.php(203): Zend\View\Renderer\PhpRenderer-&gt;render(Object(Zend\View\Model\ViewModel)) #1 C:\xampp\htdocs\poemsV3\vendor\zendframework\zendframework\library\Zend\Mvc\View\Http\DefaultRenderingStrategy.php(128): Zend\View\View-&gt;render(Object(Zend\View\Model\ViewModel)) #2 [internal function]: Zend\Mvc\View\Http\DefaultRenderingStrategy-&gt;render(Object(Zend\Mvc\MvcEvent))#3 C:\xampp\htdocs\poemsV3\vendor\zendframework\zendframework\library\Zend\EventManager\EventManager.php(469): call_user_func(Array, Object(Zend\Mvc\MvcEvent))#4 C:\xampp\htdocs\poemsV3\vendor\zendframework\zendframework\library\Zend\EventManager\EventMa in <b>C:\xampp\htdocs\poemsV3\vendor\zendframework\zendframework\library\Zend\View\Renderer\PhpRenderer.php</b> on line <b>451</b><br /> 
```

您对我如何测试连接是否有效有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-18T10:06:00.330

不要`EntityManager`直接使用。您可以改为使用以下方法检查连接参数：

```
try {
    $entityManager->getConnection()->connect();
} catch (\Exception $e) {
    // failed to connect
} 
```

遗憾的是，这是检查是否出现问题的唯一真正方法，因为异常类型会根据您使用的驱动程序而变化。

对于另一个例外（与视图相关的），您只需调整视图脚本路径。我建议您启用[骨架应用程序模块](https://github.com/zendframework/ZendSkeletonApplication/tree/zf/release-2.1.0/module/Application)，以便始终存在默认布局：您可以随时[覆盖它](http://framework.zend.com/manual/2.1/en/modules/zend.view.quick-start.html#configuration)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-30T09:29:03.737

您可以使用。

```
$cnx = $this->getDoctrine()->getConnection();

$cnx->isConnected() ? 
  'Connected' : 
  'not connected'; 
```

# ios - 是否可以使 NSObject 符合协议？如果是，如何？- 认真的

> ID：14933394
> 
> 赞同：1
> 
> 时间：2013-02-18T09:48:12.167
> 
> 标签：ios, objective-c, macos, protocols, nsobject

我的问题可能看起来很奇怪，但是我想了解 Stackers 的想法，在我的工作中，我只是注意到每个协议始终都符合一个类，我想知道是否有可能使一个简单的对象也符合协议，如果不是（而且几乎不是），为什么不呢？

感谢您的关心

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:57:26.850

协议一致性有两个部分：

*   对象必须响应协议定义中的所需消息
*   `YES`当被问及是否符合协议时，该对象必须返回

那么，我们可以安排一个`NSObject`满足这两个条件的实例吗？是的。事实上，至少有两种方法可以做到这一点。首先，让我们让*所有*的实例都`NSObject`符合协议。我们所做的是在一个类别中定义协议方法`NSObject`，这解决了第一部分。然后我们“swizzle”（这意味着使用[`class_replaceMethod()`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)运行时函数）`-[NSObject conformsToProtocol:]`，返回`YES`我们感兴趣的协议。

现在让我们假设您要使*特定*的实例`NSObject`符合协议。这稍微容易一些。首先，创建一个`NSObject`符合协议并实现所需方法的子类；无需重写`-conformsToProtocol:`，因为运行时库可以看到此类符合。现在，在运行时，获取您的`NSObject`实例并调用[`object_setClass()`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)以将其类切换到符合您要求的子类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:57:32.350

您可以使用 runtime 函数在运行时向类添加协议`class_addProtocol()`。但是，当类没有实现协议的所有方法时这样做可能会导致不好的结果。

# memory - 在黑莓上保存文件时内存不足警告

> ID：14933397
> 
> 赞同：0
> 
> 时间：2013-02-18T09:48:16.380
> 
> 标签：memory, blackberry, java-me

我想在**Sdcard**上保存许多文件。当我将这些文件保存在文件夹中时，我收到内存不足的警告

> 设备内存太低 - 请关闭以下项目

并且应用程序崩溃了。我可以手动放置文件夹并且我没有遇到内存问题但在应用程序中它显示它即使SD卡上有可用空间的问题。这是我用来保存文件的方法。

```
public static void saveWebContentCache(String save_name, String url) {

    FileConnection fconn = null;
    OutputStream outputStream = null;
    try {
        fconn = (FileConnection) Connector.open(
                NetWorkConfig.webfolder + save_name,
                Connector.READ_WRITE);
        if (!fconn.exists()) {
            fconn.create();
            outputStream = fconn.openOutputStream();

            outputStream.write(getByte(url));

        }
    } catch (IOException e) {
        Status.show("ko !");
    } finally {// Close the connections
        try {
            if (outputStream != null) {
                outputStream.close();
                outputStream = null;
            }

        } catch (Exception e) {
        }
        try {
            if (fconn != null) {
                fconn.close();
                fconn = null;
            }

        } catch (Exception e) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T15:36:01.227

至于我，这条线看起来很可疑：

```
outputStream.write(getByte(url)); 
```

这是因为这样的实现意味着您必须在 RAM 中创建/保存整个字节数组，然后再将其写入文件的`OutputStream`.

相反，您可以结合从 http 连接的小块读取`InputSteam`并将块写入文件的`OutputStream`. 像这样的东西：

```
void copyData(InputStream source, OutputStream destination) throws IOException {
    byte[] buf = new byte[1024];
    int len;
    while ((len = source.read(buf)) > 0) {
        destination.write(buf, 0, len);
    }
    destination.flush();
} 
```

# backbone.js - Backbone.js：获取回调中发生的事件的集合

> ID：14933400
> 
> 赞同：0
> 
> 时间：2013-02-18T09:48:18.077
> 
> 标签：backbone.js, backbone-events

我有多个集合绑定到同一个回调。我需要一种方法来识别实际发生事件的集合。但是，我无法将参数传递给backbone.js 中的回调。有出路吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:35:03.613

在 Backbone 集合中，事件处理程序`this`始终设置为触发事件的集合：

```
function eventHandler(){
    console.log(this); // this refers to either collection1 or collection2, depending on where the event was triggered
};
collection1.on("sth", eventHandler);
collection2.on("sth", eventHandler); 
```

# checkbox - 禁用和启用复选框 Javascript

> ID：14933404
> 
> 赞同：1
> 
> 时间：2013-02-18T09:48:28.173
> 
> 标签：checkbox, javascript

我有一系列复选框：

```
<tr id="tr5" onmouseover="changeBackgroundColor(this.id)" onmouseout="changeBackgroundColor2(this.id)">
<td class="td5"><input  name="benefit" value="Bonuses" id="benefit5" type="checkbox" onchange='addition();'</td>
<td class="td5"><label for="benefit5"> <b>Bonuses</b></label></td>

<tr id="tr6" onmouseover="changeBackgroundColor(this.id)" onmouseout="changeBackgroundColor2(this.id)">
<td class="td6"><input  name="benefit" value="Final salary pension" id="benefit6" type="checkbox" onchange='addition();'</td>
<td class="td6"><label for="benefit6"> <b>Final salary pension</b></label></td> 
```

一旦用户选择了 3 个复选框，是否可以一次禁用其余复选框（有 30 个复选框 - 我可以单独完成，但这似乎很痛苦）？是这样，一个人会怎么做呢？此外，如果用户随后取消选中其中一个复选框，是否可以再次启用它们？

编辑：如果可能的话 - 有人能指出我正确的方向吗，代码明智吗？

提前致谢，

H。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:06:22.917

[演示](http://jsfiddle.net/mplungjan/Wsjsy/)

```
var chk=0;
function checkCheckboxes() {
  var checkboxes = document.getElementsByName("benefit");
  for (var i=0;i<checkboxes.length;i++) {
    chk += checkboxes[i].checked?1:0; // count in case we reload
    checkboxes[i].onclick=function() { // set up event handler for each
      chk+=this.checked?1:-1; // add or subtract one
      if (chk > 3) {
        console.log(chk,"too many") 
        this.checked=false;
        chk--; // we counted too many
      }
    }
  }
}

function changeBackgroundColor(row,on) {
  var id = row.id; // if you need that
  row.style.backgroundColor=(on)?"red":"white";
}
window.onload=function() {
    var trs = document.getElementById("table1").rows;
    for (var i=0;i<trs.length;i++) {
      trs[i].onmouseover=function() {
        changeBackgroundColor(this,1);
      }
      trs[i].onmouseout=function() {
        changeBackgroundColor(this,0);
      }
    }
    checkCheckboxes();
} 
```

使用

```
<table id="table1">
<tr id="tr1">
<td class="td1"><input  name="benefit" value="Bonuses" id="benefit1" type="checkbox"</td>
<td class="td1"><label for="benefit1"> <b>Bonuses</b></label></td>
</tr>
    <tr id="tr2">
<td class="td2"><input  name="benefit" value="Bonuses" id="benefit2" type="checkbox"</td>
<td class="td2"><label for="benefit2"> <b>Bonuses</b></label></td>
</tr>
    <tr id="tr3">
<td class="td3"><input  name="benefit" value="Bonuses" id="benefit3" type="checkbox"</td>
<td class="td3"><label for="benefit3"> <b>Bonuses</b></label></td>
</tr>
    <tr id="tr4">
<td class="td4"><input  name="benefit" value="Bonuses" id="benefit4" type="checkbox"</td>
<td class="td4"><label for="benefit4"> <b>Bonuses</b></label></td>
</tr>
        </table> 
```

# c# - 如何将泛型列表中同一接口的各种派生类作为参数传递给函数？

> ID：14933405
> 
> 赞同：3
> 
> 时间：2013-02-18T09:48:28.237
> 
> 标签：c#, list, generics, interface, derived-class

如何将具有不同继承类的List传递给带有父接口List的函数？编译器生成错误。

```
 public interface ControlPoint
    {
    }

    public class Knot:  ControlPoint
    {
    }

    public class Node:  ControlPoint
    {
    }

    class Spline
    {
         List<Knot> knots=new List<Knot>();
         List<Node> nodes=new List<Node>();

         void Calculate(List<ControlPoint> points) {} //<------- Compiler Error

        void Test()
        {
           Calculate(knots);
           Calculate(nodes);
        }

    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T09:50:59.183

两种选择：

1) 如果您使用 C# 4 和 .NET 4+，并且只需要遍历 中的点`Calculate`，只需将签名更改为：

```
 void Calculate(IEnumerable<ControlPoint> points) 
```

这将使用通用协方差。

2）您可以使该方法通用：

```
 void Calculate<T>(List<T> points) where T : ControlPoint 
```

一般来说，我更喜欢第一个 - 即使你*没有*使用 .NET 4 / C# 4，如果你可以更改`Calculate`为 use`IEnumerable<T>`而不是`List<T>`，那会更干净 - 所以你可以将两者混合并使用通用方法`IEnumerable<T>`。

# php - php数组键/编辑数据库

> ID：14933407
> 
> 赞同：1
> 
> 时间：2013-02-18T09:48:34.137
> 
> 标签：php, arrays

我有一页有多个名为 - name='phonenumber[] 的输入。我正在将表单发送到另一个页面，并且我希望能够使用新的帖子信息编辑数据库。我应该如何编写代码，例如，我填写第三个输入并在发送表单后，只编辑表中的第三行。我试过这样但它不起作用：

```
if ($_POST['phonenumber'] || $_POST['phonetype'])
{ 
    foreach($_POST['phonenumber'] as $k => $phonenumber) { 
    $phonetype = $_POST['phonetype'][$k];
    $n = $k+1;
mysql_query("UPDATE phone SET phone_number='$phonenumber', phone_type='$phonetype' WHERE id_user='$id' LIMIT $n");
    }
} 
```

这样，所有电话号码都可以使用第三个输入 POST 发送的信息进行编辑。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:51:10.083

这是因为您的电话号码无法单独识别（我的猜测）；在每个循环中，您都使用下一个值更新 N 行，最后所有条目都将具有最后一个值。

相反，删除所有电话号码并重新插入通常更容易。

```
DELETE FROM phone WHERE id_user=?

// for loop
INSERT INTO phone (phone_number, phone_type) VALUES (?, ?) WHERE id_user=? 
```

或者，如果您的电话号码有自己的 id，请在执行;`WHERE`时将其包含在语句中。`UPDATE`你绝对应该删除`LIMIT`.

最后，查看准备好的语句（使用 pdo 或 mysqli）；您当前的代码容易受到 sql 注入攻击！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:55:53.143

看起来像您的问题后，可以完成两个解决方案

1.  如果电话号码可以通过 phone_id 列单独识别，则通过此发送该 POST DATA 和更新。

    `mysql_query("UPDATE phone SET phone_number='$phonenumber', phone_type='$phonetype' WHERE id_user='$id' AND phone_id = '$phone_id' ");`

2.  如果没有，则删除 id_user 存在的所有电话号码，然后通过 POST Data 重新插入。

# java - Selenium IDE - Javascript Alert，按 Enter，使用哪个目标？

> ID：14933408
> 
> 赞同：1
> 
> 时间：2013-02-18T09:48:37.187
> 
> 标签：java, javascript, html, selenium, selenium-ide

我正在尝试使用 Selenium IDE 创建一些简单的测试用例。

我在记录包含 Javascript 警报的测试用例时遇到问题，因为 Selenium 不支持这些弹出窗口。因此，当我知道弹出窗口可见时，我尝试通过单击 Enter 按钮来使用解决方法。

假设当用户访问我的一个 html 页面时，总是会出现警报。用户必须单击确定才能继续浏览。

我尝试使用命令“keyPress”创建一个测试用例。但我完全不知道要使用哪个目标，因为在这种情况下我没有使用任何元素，我只想按 Enter。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:06:19.383

selenium 无法捕获 java script 警报，所以我们可以做的是在警报出现的地方放置 store alert 命令，这个命令会自动点击警报的 ok 按钮

命令：存储警报

目标：文本

text 是存储警报消息的变量。

谢谢你。

# jsf - 使用 A4J.AJAX.onExpired 后 jsf 系统一直显示过期消息

> ID：14933419
> 
> 赞同：1
> 
> 时间：2013-02-18T09:49:05.740
> 
> 标签：jsf, richfaces, session-timeout

我使用下面的代码来处理我系统中的会话过期，但是有一个错误，有时即使用户在一秒钟内登录，消息也会不断出现。

```
<ui:define name="script">
    <script language="javascript">        
        A4J.AJAX.onExpired = function(loc, expiredMsg) {
            alert( '#{m.message_a4j_session_expired}' );
        }        
    </script>   
</ui:define> 
```

框架为JSF1.1 + Richfaces3.3

我的问题是如何分析这个错误并找到解决方案，或者是否有其他解决方案可以替换来处理会话到期？

# iphone - 是否可以将数据从我自己的应用程序发送到 iOS MapsApp？

> ID：14933434
> 
> 赞同：0
> 
> 时间：2013-02-18T09:50:01.187
> 
> 标签：iphone, ios, map, pins

在我使用纬度和经度值的应用程序中删除了引脚。所以，我需要在 iOSMaps App 中获取这 2 个引脚之间的方向。是否可以在 iOS MapsApp 中显示 2 个引脚之间的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:27:15.647

是的，你可以这样做。请看一看

[http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)

您可以通过 URL Scheme 将两个位置传递给苹果地图应用程序。

尝试

```
- (IBAction)getTest:(id)sender {
   [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://maps.apple.com/?daddr=San+Francisco,+CA&saddr=cupertino"]];
} 
```

它应该打开地图应用程序并显示旧金山和库比蒂诺之间的路径。

它也应该适用于坐标，但你必须自己找出答案；）

希望能帮助到你。

# windows - 如何获得面向未来的用户友好操作系统版本？

> ID：14933435
> 
> 赞同：8
> 
> 时间：2013-02-18T09:50:02.887
> 
> 标签：windows, vb6

这个问题，[我如何从 VB 6 应用程序中确定 Windows 版本，](https://stackoverflow.com/questions/4839210/how-can-i-determine-the-windows-version-from-a-vb-6-app) Cody Gray 提供了一个非常有用的答案，它利用 GetVersionEx 和 Select Case 语句将 Windows 版本作为用户友好的字符串返回。

然而，给出的代码是有限的，因为所有的返回值都是硬编码的，这意味着它不是未来的证明，每次新版本的 Windows 出现时都需要重写，例如 Windows 8。

除了使用 GetVersionEx 和 Select Case 语句之外，是否还有其他选择来检索用户友好的操作系统名称，这也将是相对未来的证明？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T10:46:26.507

[WMI 类](http://msdn.microsoft.com/library/aa394239.aspx)可用于提取所需数据，如下所示：

```
Public Function GetFriendlyOSVersion() As String
    Dim query As String
    query = "SELECT Caption FROM Win32_OperatingSystem"
    Dim results As Object
    Set results = GetObject("Winmgmts:").ExecQuery(query)
    Dim info As Object
    For Each info In results
        GetFriendlyOSVersion = info.Caption
    Next info
End Function 
```

# android - 通过应用程序类本地化？

> ID：14933436
> 
> 赞同：0
> 
> 时间：2013-02-18T09:50:02.740
> 
> 标签：android

我正在通过一个应用程序实现本地化示例。我使用应用程序类将所选语言更新为整个应用程序。问题是当我第一次更改语言时，它会更改为整个应用程序。同样，当我尝试更改语言时，它会给出强制关闭错误。错误出现在这一行 editor.putString("Language", getString(identifier)); 下面是我的代码和 logcat 错误。我不明白如何解决这个问题。

```
 @Override
    public void onListItemClick(ListView l, View v, int position, long id) {

        super.onListItemClick(l, v, position, id);

        TextView mTextView = (TextView) v.findViewById(android.R.id.text1);

        Toast.makeText(getActivity(), mTextView.getText().toString(), Toast.LENGTH_SHORT).show();

        int identifier = getResources().getIdentifier(
                mTextView.getText().toString(), "string",
                getActivity().getPackageName());

        String language = getString(identifier);
        Toast.makeText(getActivity().getApplicationContext(), language, Toast.LENGTH_SHORT).show();

            editor.clear();
            editor.putString("Language", getString(identifier));
            editor.commit();
            changeLanguage(getString(identifier));

    }   /**
     * Method to change the language
     * 
     * @param localString
     */
    public void changeLanguage(String localString) 
    {
        AllUpdateApplication.updateLanguage(getActivity().getApplicationContext());

    }

public class AllUpdateApplication extends Application{

    /**
     * Application wide language change
     * @param mContext
     */
    public static void updateLanguage( Context mContext){

        SharedPreferences mUWBTPRefs = mContext.getSharedPreferences("language", 0);
        String mLanguage = mUWBTPRefs.getString("Language", "en");
        //Toast.makeText(mContext,mLanguage, Toast.LENGTH_SHORT).show();
        Configuration mConfiguration = new Configuration();
        mConfiguration.locale = new Locale(mLanguage);
        mContext.getResources().updateConfiguration(mConfiguration, null);

    }
}

02-18 15:30:28.660: E/AndroidRuntime(6819): FATAL EXCEPTION: main
02-18 15:30:28.660: E/AndroidRuntime(6819): android.content.res.Resources$NotFoundException: String resource ID #0x0
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.content.res.Resources.getText(Resources.java:247)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.content.res.Resources.getString(Resources.java:331)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.support.v4.app.Fragment.getString(Fragment.java:593)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at com.uwbt.fragments.LanguagesFragment.onListItemClick(LanguagesFragment.java:89)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.support.v4.app.ListFragment$2.onItemClick(ListFragment.java:58)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.widget.AdapterView.performItemClick(AdapterView.java:292)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.widget.AbsListView.onTouchEvent(AbsListView.java:3180)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.View.dispatchTouchEvent(View.java:5545)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1951)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1712)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1912)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1371)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.app.Activity.dispatchTouchEvent(Activity.java:2391)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1860)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.View.dispatchPointerEvent(View.java:5725)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2928)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2492)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:870)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2501)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.os.Looper.loop(Looper.java:137)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at android.app.ActivityThread.main(ActivityThread.java:4424)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at java.lang.reflect.Method.invokeNative(Native Method)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at java.lang.reflect.Method.invoke(Method.java:511)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-18 15:30:28.660: E/AndroidRuntime(6819):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:05:40.793

我认为定义语言特定的值文件夹。

# php - mysql查询以在重复列中显示结果

> ID：14933438
> 
> 赞同：0
> 
> 时间：2013-02-18T09:50:12.110
> 
> 标签：php, mysql

我正在尝试使用 mysql 查询和 php 构建一个比较表。

我希望结果显示在列中，如下所示：

```
<table border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td width="151" scope="col">product</td>
    <td width="89" scope="col">product1</td>
    <td width="78" scope="col">product2</td>
    <td width="77" scope="col">product3</td>
  </tr>
  <tr>
    <td>type</td>
    <td>type2</td>
    <td>type3</td>
    <td>type5</td>
  </tr>
  <tr>
    <td>size</td>
    <td>size2</td>
    <td>size1</td>
    <td>size4</td>
  </tr>
  <tr>
    <td>price</td>
    <td>4.99</td>
    <td>3.99</td>
    <td>3.59</td>
  </tr>
</table> 
```

但我只能让表格显示结果 - 而不是行标题（即我希望第一列显示“产品”、“类型”、“尺寸”、“价格”。

我到目前为止的代码是

```
 <?php
// query the database
$result = mysql_query($query_getproducts);

// cols we are interested in (from the SQL query)
$cols = array(
        'product',
    'type',
    'size',
    'price',
  );

// initialize rotated result using cols
$rotated = array();
foreach($cols as $col) {
  $rotated[$col] = array();
}

// fill rotated array
while(($row = mysql_fetch_assoc($result)) !== false) {
  foreach($cols as $col) {
    $rotated[$col][] = $row[$col];

  }
}

// echo html
echo "<table border=1 width=473>";
echo "<tr>";

echo "</tr>";
foreach($rotated as $col => $values) {
  echo "<tr>";

  foreach($values as $value) {
    echo "<td> " . htmlentities($value) . "</td>";
  }
  echo "</tr>";
}
echo "</table>";
?> 
```

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:10:30.297

首先，不推荐使用 mysql_* 函数。您应该使用 PDO 或 Mysqli。

如果您希望表头静态，即您想将表头显示为“产品、类型、尺寸、价格”然后使用

```
<tr>
<th>Product</th>
<th>Type</th>
<th>Size</th>
<th>Price</th>
</tr> 
```

然后，如果您应该使用 mysql_fetch_assoc 返回关联数组，其中列名作为键。您可以使用该数组并使用循环打印结果。例如：

```
<?php
$rs=mysql_query($query);
while($row=mysql_fetch_assoc($rs) ){
?>
<tr>
<td><?php echo $row['keyname']?></td>
.....
.....
</tr>
<?php
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:04:14.543

试试这样

```
echo "<table border=1 width=473>";
echo "      <tr>
    <th>Product Name</th>
    <th>Description</th>
    <th>Product Size</th>
    <th>Price</th>
    </tr>";
foreach($rotated as $col => $values) {
 echo "<tr>";

 foreach($values as $value) {
    echo "<td> " . htmlentities($value) . "</td>";
  }
  echo "</tr>";
}
echo "</table>"; 
```

# java - Junit：测试文件是否被正确读取

> ID：14933442
> 
> 赞同：0
> 
> 时间：2013-02-18T09:50:20.987
> 
> 标签：java, junit, junit4

在投票否决我之前，请对我有一点耐心；）。这是我第一次使用 JUnit，这是一个简单的问题，知道：

只想测试以下文件是否已按预期读取：

```
first
second 
```

但是为什么我的测试失败了：

```
@Test
public void testReadFileTwoRows() {
    File f = new File(FILE_WITH_TWO_ROWS);
    String fileCont = "";       
    String expCont  = "first\nsecond";

    try {           
        fileCont = ImportUtil.readFile(f);
    } catch (IOException e) {           
        fail("File couldn't be read");
    }
    assertEquals("File was not properly read", fileCont, expCont);      
} 
```

我认为它与“\n”有关，但我看不到另一种写该支票的方法。

非常感谢

# java - 如何在android中扫描无线网络并以编程方式连接？

> ID：14933444
> 
> 赞同：1
> 
> 时间：2013-02-18T09:50:26.697
> 
> 标签：java, android, android-wifi, wifimanager, android-wireless

我正在尝试构建这个扫描并连接到无线网络的应用程序。我使用了以下链接中的示例代码

[http://www.androidsnippets.com/scan-for-wireless-networks](http://www.androidsnippets.com/scan-for-wireless-networks)

但它返回的列表似乎包含重复项。也有人可以给我一个关于如何以编程方式连接到特定网络的例子吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:55:33.060

您已经有了列表，我猜您遇到的唯一问题是它有重复，可以轻松删除。现在连接到一个特定的网络[参考这个](https://stackoverflow.com/questions/8818290/how-to-connect-to-a-specific-wifi-network-in-android-programmatically)

希望这可以帮助 ！！

# php - PHP file_get_contents 在一台服务器上工作，但在

> ID：14933446
> 
> 赞同：2
> 
> 时间：2013-02-18T09:50:34.830
> 
> 标签：php, http, authentication

我有一个脚本，它使用以下代码从另一个页面加载信息：

```
 $creds = 'user:password';
$base64 = base64_encode($creds);

$base_url = 'http://example.com/page.html';
$data = file_get_contents($base_url.$path, false, $auth); 
```

这在一台服务器（我的本地服务器，使用 Ubuntu）上运行良好，但在从外部服务器运行时会给我以下标头：

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>401 Authorization Required</title>
</head><body>
<h1>Authorization Required</h1>
<p>This server could not verify that you
are authorized to access the document
requested.  Either you supplied the wrong
credentials (e.g., bad password), or your
browser doesn't understand how to supply
the credentials required.</p>
<hr>
<address>Apache/2.2.14 (Unix) mod_ssl/2.2.14 OpenSSL/0.9.7a DAV/2 SVN/1.6.6 PHP/5.3.14   JRun/4.0 Server at ww2.rch.org.au Port 80</address>
</body></html> 
```

我应该在这里寻找什么特别的东西吗？如果有帮助，我已经将两台服务器上的 allow_url_fopen 设置为 true。

*编辑：*对不起，那里还有一些其他代码需要删除。$auth 如下：

```
$auth = stream_context_create(array(
  'http'    => array(
  'header'  => 'Authorization: Basic '.$base64
  )
)); 
```

$auth 是一个流上下文，包含授权标头。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:16:02.777

根据[该函数的文档，](http://www.php.net/manual/en/function.file-get-contents.php)没有“auth”参数。

HTTP 凭据通常以这种格式添加：

```
http://username:password@example.com/page.html 
```

# ruby-on-rails - 轨道形式的动态变化（简单形式）

> ID：14933447
> 
> 赞同：0
> 
> 时间：2013-02-18T09:50:35.437
> 
> 标签：ruby-on-rails, forms, dynamic, simple-form

我正在尝试用这种一般结构制作一个简单的表格：

```
o accept  o decline
[submit] 
```

检查单选按钮接受并提交按下时，我希望它更改我的模型状态（此处称为要约）。但是，当检查按钮下降时，表格需要更改为这样的事情：

```
o accept  x decline
Please enter reason here: [text box]
[submit] 
```

输入了拒绝的（强制）原因并按下提交，也会改变模型 Offer 的状态，但有所不同。

我目前无法让表单以我想要的方式显示。我正在使用 SimpleForm 并尝试过这样的事情：

```
<%= simple_form_for @offer do |f| %>
  <%= f.input accepts, as: :radio_buttons %>
  <%= f.input :r_comment, as: :text, :label => 'Please enter reason here:' , :input_html => { :rows => 2, } %>
  <%= f.button :submit %>
<% end %> 
```

这当然行不通，因为没有为优惠定义“接受”方法或变量（而且不应该！）。至于动态显示输入文本框，我什至没有丝毫线索。

我很乐意为您提供任何帮助，

贵族般的

更新：simple_form 生成的 HTML

```
<div class="control-group radio_buttons optional">
  <label class="radio_buttons optional control-label">Accept?</label>
  <div class="controls">
    <label class="radio">
      <input class="radio_buttons optional" id="offer_accepts_decline" name="offer[accepts]" type="radio" value="Decline" />
      Decline
    </label>
    <label class="radio">
      <input class="radio_buttons optional" id="offer_accepts_accept" name="offer[accepts]" type="radio" value="Accept" />
      Accept
    </label>
  </div> 
```

更新：为评论框生成 HTML

```
<div class="control-group text optional">
    <label class="text optional control-label" for="offer_r_comment">Reason for rejection:</label>
    <div class="controls">
        <textarea class="text optional" cols="40" id="offer_r_comment" name="offer[r_comment]" rows="2">
        </textarea>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:08:46.110

我不是 formtastic 或 simple_form 的粉丝，但查看文档，您应该能够执行以下操作

```
# offer.rb
attr_accessor :accepts

# view
<%= f.input :accepts, as: :radio_buttons, collection: ['Decline', 'Accept'] %>

# js which can be placed inline or in the assets. let's use coffee
# you should also limit the selector below to include the class or the id of the
# radio buttons.  I'm also not familiar with the html generated by simple form so
# the selectors to show and hide should also be changed.
$ ->
  $(':radio').change ->
    if $(this).prop('checked')
      if $(this).val() == 'Accept'
        $('#offer_r_comment').show()
      else
        $('#offer_r_comment').hide() 
```

更新：非咖啡版。您可以将其放在脚本标签中，然后将其放入视图中。

```
$(document).ready(function() {
  $(':radio').change(function() {
    if ($(this).prop('checked'))
      if ($(this).val() == 'Accept')
        $('#offer_r_comment').show();
      else
        $('#offer_r_comment').hide();
  });
}); 
```

# sql - SQL 连接查询 - 从两个表中选择

> ID：14933448
> 
> 赞同：0
> 
> 时间：2013-02-18T09:50:35.877
> 
> 标签：sql, oracle, join, nested

我有一个查询，它检查一个表的多个字段。我感兴趣的两个表是：PERSON & PERSON_ALTERNATE_ID。

我想修改我的查询以返回存储在 person_alternate_id 中的值（如果特定的人确实有一个）

```
select distinct person.person_id, person_name, person_address
from person join person_alternate_id
on
person.person_id=person_alternate_id.person_id
where person.person_id
in (10001,10002,10003); 
```

谁能建议我怎么做？我正在查看嵌套选择示例，但我无法对我的查询进行合适的更改以达到我的要求。目前，该查询仅返回 PERSON 表中我需要的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:56:21.020

因为此人可能有也可能没有备用 ID，所以您应该使用左连接：

```
select person.person_id, person_name, person_address, person_alternate_id.*
from person 
left join person_alternate_id
on person.person_id=person_alternate_id.person_id
where person.person_id
in (10001,10002,10003); 
```

# asp.net-mvc-3 - 使用 Autofac 将属性注入自定义 WebViewPage

> ID：14933450
> 
> 赞同：2
> 
> 时间：2013-02-18T09:50:40.057
> 
> 标签：asp.net-mvc-3, autofac

我正在创建一个内部应用程序框架，我们组织中的其他开发团队将使用它来构建 MVC 应用程序。作为其中的一部分，我正在为所有视图创建菜单结构，该结构从配置中读取并根据当前用户的权限进行修改。为了将菜单创建为框架的一部分，我创建了一个`WebViewPage`带有自定义 HTML Helper 类的自定义实现，该类需要依赖 an`ApplicationDataReader`来构建菜单。

我已经阅读了各种解释 MVC 需要`WebViewPage`有一个无参数构造函数的帖子，所以我需要使用属性注入。我已经配置[了 Autofac MVC3 Integration](http://code.google.com/p/autofac/wiki/MvcIntegration3)，包括注册一个`ViewRegistrationSource`. 麻烦的是，当依赖属性被访问时，它总是空的。

这是我正在尝试拨打的电话的自定义视图页面和助手：

```
public abstract class OuBaseViewPage<TModel> : WebViewPage<TModel> where TModel : class
{
    public OuHelper<TModel> Ou { get; set; }

    public override void InitHelpers()
    {
        base.InitHelpers();
        Ou = new OuHelper<TModel>(ViewContext, this);
    }
}

public class OuHelper<TModel> where TModel : class
{
    public OuHelper(ViewContext viewContext, IViewDataContainer viewDataContainer)
        : this(viewContext, viewDataContainer, RouteTable.Routes)
    {
    }

    public OuHelper(ViewContext viewContext, IViewDataContainer viewDataContainer, RouteCollection routeCollection)
    {
        ViewContext = viewContext;
        ViewData = new ViewDataDictionary<TModel>(viewDataContainer.ViewData);
    }

    public ViewDataDictionary<TModel> ViewData { get; private set; }

    public ViewContext ViewContext { get; private set; }

    public IList<BusinessFocusArea> ReadFocusAreas()
    {
        // this is null - yes, service location, but an isolated instance of...
        return DependencyResolver.Current.GetService<IDataReader>().Read();
    }
} 
```

问题源于在调用之前`InitHelpers`（通过`Layout.Execute()`）被调用的事实`Application_Start`，因此没有任何依赖项被注册。我知道将逻辑注入视图不是一个好习惯，视图应该只是愚蠢的，但这是一个应用程序框架，它需要执行某些使用框架的开发人员不能看到的设置步骤。

**我可以遵循更好的方法吗？**

这里有一个类似的问题：[Autofac 可以将依赖项注入到布局视图文件中吗？](https://stackoverflow.com/questions/11593580/can-autofac-inject-dependencies-into-layout-view-files)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T11:15:56.257

> 问题源于在调用 Application_Start 之前（通过 Layout.Execute()）调用 InitHelpers 的事实

我认为之前没有调用过某些东西`Application_Start`。我无法重现您的问题。

以下是我所做的步骤，并且效果很好：

1.  使用 Internet 模板创建一个新的 ASP.NET MVC 3 应用程序
2.  安装`Autofac.Mvc3`NuGet
3.  定义一个虚拟接口：

    ```
    public interface IDataReader
    {

    } 
    ```

4.  还有一个虚拟实现：

    ```
    public class DataReader : IDataReader
    {

    } 
    ```

5.  定义一个自定义助手：

    ```
    public class OuHelper<TModel> where TModel : class
    {
        private readonly IDataReader dataReader;
        public OuHelper(ViewContext viewContext, IViewDataContainer viewDataContainer, IDataReader dataReader)
            : this(viewContext, viewDataContainer, RouteTable.Routes, dataReader)
        {
        }

        public OuHelper(ViewContext viewContext, IViewDataContainer viewDataContainer, RouteCollection routeCollection, IDataReader dataReader)
        {
            ViewContext = viewContext;
            ViewData = new ViewDataDictionary<TModel>(viewDataContainer.ViewData);
            this.dataReader = dataReader;
        }

        public ViewDataDictionary<TModel> ViewData { get; private set; }

        public ViewContext ViewContext { get; private set; }

        public IDataReader DataReader
        {
            get { return this.dataReader; }
        }

    } 
    ```

6.  使用此帮助器定义自定义 WebViewPage：

    ```
    public abstract class OuBaseViewPage<TModel> : WebViewPage<TModel> where TModel : class
    {
        public OuHelper<TModel> Ou { get; set; }

        public override void InitHelpers()
        {
            base.InitHelpers();
            var dataReader = DependencyResolver.Current.GetService<IDataReader>();
            Ou = new OuHelper<TModel>(ViewContext, this, dataReader);
        }
    } 
    ```

7.  将默认视图页面替换为自定义视图页面`~/Views/web.config`：

    ```
    <pages pageBaseType="MvcApplication1.OuBaseViewPage"> 
    ```

8.  在以下位置配置您的容器`Application_Start`：

    ```
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();
        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

        var builder = new ContainerBuilder();
        builder.RegisterControllers(typeof(MvcApplication).Assembly);
        builder.RegisterType<DataReader>().As<IDataReader>();
        var container = builder.Build();
        DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
    } 
    ```

9.  现在您可以愉快地在包括 _Layout 在内的所有视图中使用自定义助手，而不会出现任何问题：

    ```
    @Ou.DataReader.GetType() 
    ```

当然，在这个例子中，我只是将`IDataReader`依赖项作为公共属性公开，以说明它总是被注入并且永远不会为空。在您的特定代码中，您当然可以仅使用助手内的私有只读字段来完成您的任务。

# ruby-on-rails-3 - 捆绑安装命令两次命中 ruby gem 源

> ID：14933452
> 
> 赞同：2
> 
> 时间：2013-02-18T09:50:41.787
> 
> 标签：ruby-on-rails-3, rubygems

自从过去几个月以来，我看到为 Rails 应用程序执行“**捆绑安装**”命令，gemfile 中提到的源被请求两次，而它应该只请求 gemfile 中提到的每个源一次。

谁能告诉我为什么会这样并建议解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:26:56.797

事实上，bundler 不会两次命中 ruby​​gems，或者至少不是出于相同的原因。

```
Fetching gem metadata from https://rubygems.org/........
Fetching gem metadata from https://rubygems.org/.. 
```

如果您查看“捆绑更新”期间执行的查询，您会得到以下结果：

```
https://rubygems.org:443
http://bundler.rubygems.org/api/v1/dependencies?gems=airbrake,aws-sdk
http://bundler.rubygems.org/api/v1/dependencies?gems=json,activesupport,builder
http://bundler.rubygems.org/api/v1/dependencies?gems=climate_control,rubinius-actor
http://bundler.rubygems.org/api/v1/dependencies?gems=term-ansicolor,gherkin
http://bundler.rubygems.org/api/v1/dependencies?gems=little-plugger,loquacious
http://bundler.rubygems.org/api/v1/dependencies?gems=bones-rcov,bones-rubyforge
http://bundler.rubygems.org/api/v1/dependencies?gems=systemu
http://bundler.rubygems.org/api/v1/dependencies?gems=restclient,spicycode-rcov 
```

*为了便于阅读，我故意缩短了 URL*

如果您在浏览器中输入此 URL

```
http://bundler.rubygems.org/api/v1/dependencies.json?gems=airbrake 
```

*您可能已经注意到，我添加了 .json 扩展名来获得 json 输出，因为默认格式是二进制*

你会看到这样的东西

```
[
    {
        "name":"airbrake",
        "number":"3.1.8",
        "platform":"ruby",
        "dependencies":[
            ["json",">= 0"],
            ["activesupport",">= 0"],
            ["builder",">= 0"]
        ]
    },
    ... (content removed)
] 
```

这个响应告诉我们 airbrake gem 依赖于 json、activesupport 和 builder。因此，bundler 需要向 ruby​​gems 询问有关这 3 个 gem 的更多信息。如果您查看上面的第二个查询，这正是它的作用。

```
http://bundler.rubygems.org/api/v1/dependencies?gems=json,activesupport,builder 
```

此过程将一直进行，直到解决所有依赖项。这就是为什么点的数量可能会根据解决所有依赖关系的“迭代”次数而改变。

但是，我必须承认，消息显示两次的原因仍不清楚。此外，点数（10）与查询数（9）并不完全对应……我需要对此进行更多调查。

# perl - 如何在不使用内置函数的情况下在 perl 中反转哈希？

> ID：14933453
> 
> 赞同：-6
> 
> 时间：2013-02-18T09:50:42.663
> 
> 标签：perl

```
1) %hash = (
    1 => 'a',
    4 => 'g',
    7 => 'h' 
```

);

WAP 在不使用反向功能的情况下反转给定的哈希？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:02:42.873

你真的应该学习 Perl - 当你自己学习它时真的很有趣。

真的就这么简单：

```
my %rev;
foreach my $key (keys %hash) {
    $rev{$hash{$key}} = $key;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:57:00.623

蒂姆托迪：

```
my %a = ( foo => 1, bar => 2 );    # original hash
my @a = %a;                        # copy to array
my @rev;                           # reversed list container
push @rev, pop @a while @a;        # fill @rev from the back forward
my %rev = @rev;                    # assign reversed list to hash 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:48:54.400

```
my %by_letter;
@by_letter{ values(%by_num) } = keys(%by_num); 
```

或者

```
my %by_letter = map { $by_num{$_} => $_ } keys(%by_num); 
```

# telerik - Radbutton Onclick Mozilla 错误

> ID：14933459
> 
> 赞同：0
> 
> 时间：2013-02-18T09:51:09.460
> 
> 标签：telerik, mozilla

当我单击 radbutton 然后回发将页面 url 更改为 /blabla.aspx？**btnMsg_ClientState=&btnCarDetails=Sorgula&btnCarDetails_ClientState=&btnPrice_ClientState=&btnReject_ClientState=#** ..

首先弹出工作，然后中断。

有 5 个额外的按钮，似乎都在页面 url 中。这些查询字符串从哪里来？

即开发工具 说：

ScriptResource.axd...

我找不到解决方案，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:40:01.323

您页面上的表单似乎配置为在提交时使用**GET**请求。

`<form id="form1" runat="server" method="get">`

在这种情况下，页面上的所有参数都指定为 URL 的一部分，其中包括用于呈现按钮的输入元素，以及页面上的其他输入元素。

**您可以通过将表单的方法**属性设置为**post**来更改此行为，以便使用**POST**请求来提交表单。

`<form id="form1" runat="server" method="post">`

在这种情况下，参数将在 HTTP 请求的消息正文中传递。

# magento - magento 收取运费占小计的百分比

> ID：14933462
> 
> 赞同：1
> 
> 时间：2013-02-18T09:51:15.343
> 
> 标签：magento, shipping

想根据百分比计算运费，这也可以从管理员那里管理。
例如：-**运费 [ADMIN]**：10
如果小计 = 100。
那么运费 = 10。
提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T10:11:55.650

唉，得到了答案。
文件从**app/code/core/Mage/Shipping/Model/Carrier/Flatrate.php 复制**到 --> **local/Mage/Shipping/Model/Carrier/Flatrate.php**
关于第 96 行相应编辑：

```
if ($request->getFreeShipping() === true || $request->getPackageQty() == $this->getFreeBoxes()) {
                $shippingPrice = '0.00';
            }
                    //code starts here
            if ($this->getConfigData('shipper_type') == 'P')
            {
            $session        = Mage::getSingleton('checkout/session');
            $quote_id       = $session->getQuoteId();

            $item_quote     = Mage::getModel('sales/quote')->load($quote_id);

            $shippingPrice  = $item_quote->getSubtotal()*($this->getConfigData('price')/100);
            //code ends here
            }

            $method->setPrice($shippingPrice);
            $method->setCost($shippingPrice); 
```

在**app/code/core/Mage/Shipping/etc/system.xml 中。**[关于线路：181]

```
 <shipper_type translate="label">
                        <label>Calculate Shipping Fee</label>
                        <frontend_type>select</frontend_type>
                        <source_model>shipping/source_shipperType</source_model>
                        <sort_order>4</sort_order>
                        <show_in_default>1</show_in_default>
                        <show_in_website>1</show_in_website>
                        <show_in_store>0</show_in_store>
                </shipper_type> 
```

**在 app/code/core/mage/Shipping/Model/Source/ShipperType.php 中**创建

 **```
class Mage_Shipping_Model_Source_ShipperType
{
    public function toOptionArray()
    {
        return array(
            array('value' => Mage_Shipping_Model_Carrier_Abstract::HANDLING_TYPE_FIXED, 'label' => Mage::helper('shipping')->__('Fixed')),
            array('value' => Mage_Shipping_Model_Carrier_Abstract::HANDLING_TYPE_PERCENT, 'label' => Mage::helper('shipping')->__('Percent')),
        );
    }
} 
```

我希望这可以帮助别人。**

# c# - IEnumerator 给出空异常，但不为空

> ID：14933465
> 
> 赞同：1
> 
> 时间：2013-02-18T09:51:19.863
> 
> 标签：c#, asp.net, .net

我对 .NET 很陌生，所以请多多包涵。

`IEnumerable`我对in **LinqToTwitter**有一个奇怪的问题。
该查询返回一个`IEnumerable`，并且 a`Console.WriteLine`表明它拥有两个帖子。
但是，当我尝试调用`MoveNext()`枚举器时，我得到一个空指针异常。

* * *

## 代码

```
TwitterContext ctx = this.twitterContext;

IEnumerable<Status> statuses =
    from tweet in ctx.Status
        .AsEnumerable()
    select tweet;

IEnumerator<Status> eStat = statuses.GetEnumerator();

// The output is:
// System.Linq.Enumerable+WhereSelectEnumerableIterator`2[LinqToTwitter.Status,LinqToTwitter.Status]
// So this shows that the IEnumerable holds 2 status values
Console.WriteLine(eStat);

// This line gives the exception
// "Value cannot be null."
Boolean hasNext = eStat.MoveNext(); 
```

* * *

谢谢您的帮助

* * *

## 堆栈跟踪

```
 at System.Reflection.RuntimeMethodInfo.MakeGenericMethod(Type[] methodInstantiation)
   at LinqToTwitter.TwitterQueryProvider.Execute[TResult](Expression expression)
   at LinqToTwitter.TwitterQueryable`1.GetEnumerator()
   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
   at Broadcast.TwitterFeed.Program.Main(String[] args) in C:\Daten\TFS-Workspace\GD-TOP\Broadcast\Broadcast.TwitterFeed.Service\Broadcast.TwitterFeed\Program.cs:line 20
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T10:02:53.970

您的`Console.WriteLine`输出表明`Enumerator`是 [Status,Status] 类型的泛型，而不是它包含两个元素。您收到的异常是执行初始查询的结果，而不是您可能认为的遍历枚举器的结果。如果您要将您的状态分配更改为：

```
IEnumerable<Status> statuses =
(from tweet in ctx.Status
select tweet).ToList(); 
```

您将看到异常现在发生在分配行上，而不是`MoveNext()`行上。

我很感激这并没有告诉您为什么会遇到异常，这可能是由于您的 ctx 实例的 Status 集合的映射或填充失败造成的，但希望它可以帮助您进行调试。

干杯

# ruby-on-rails-3 - rake assets 预编译在 rails 3.2.11 中中止

> ID：14933468
> 
> 赞同：1
> 
> 时间：2013-02-18T09:51:39.183
> 
> 标签：ruby-on-rails-3, rake, asset-pipeline, rails-3-upgrade

在部署到 rackspace 服务器之前，我必须运行 rake assets:precompile 命令，由于安全补丁和升级的 JSON GEM，最近将 rails 版本从 3.2.9 升级到了 3.2.11。

我收到以下错误并 rake abort。

```
 $> rake assets:precompile --trace
 ** Invoke assets:precompile:all (first_time)
 ** Execute assets:precompile:all
 ** Invoke assets:precompile:primary (first_time)
 ** Invoke assets:environment (first_time)
 ** Execute assets:environment
 ** Invoke environment (first_time)
 ** Execute environment
 ** Invoke tmp:cache:clear (first_time)
 ** Execute tmp:cache:clear
 ** Execute assets:precompile:primary

 rake aborted!
 Command failed with status (): [/usr/local/rvm/rubies/ruby-1.9.3-p385/bin/...]
 /usr/local/rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake   /file_utils.rb:53:in `block in create_shell_runner'
 /usr/local/rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/file_utils.rb:45:in `call'
 /usr/local/rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/file_utils.rb:45:in `sh'
 /usr/local/rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.11/lib/sprockets/assets.rake:12:in `ruby_rake_task'
 /usr/local/rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.11/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
 /usr/local/rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.11/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
 /usr/local/rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:160:in  `standard_exception_handling'
 /usr/local/rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
 /usr/local/rvm/gems/ruby-1.9.3-p385@global/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p385@global/bin/rake:19:in `load'
/usr/local/rvm/gems/ruby-1.9.3-p385@global/bin/rake:19:in `<main>'
/usr/local/rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `eval'
/usr/local/rvm/gems/ruby-1.9.3-p385/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => assets:precompile 
```

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:44:26.343

可能是内存问题？尝试在 VPS 中升级 RAM

# django - Django formset 验证所有表单

> ID：14933475
> 
> 赞同：1
> 
> 时间：2013-02-18T09:52:10.177
> 
> 标签：django, validation, django-forms, formset

我做了一个这样的表单集。

```
class MixedObsCollsForm(forms.Form):

    def __init__(self, *args, **kwargs):
        project_id = kwargs.pop('project_id')
        super(MixedObsCollsForm, self).__init__(*args, **kwargs)
        project = get_object_or_404(Project, pk=project_id)
        self.fields['photos_upload'] = forms.ImageField(label="Photos", required=False)

    taxon = forms.CharField(max_length=80, required=False)
    growth_form = forms.ChoiceField(choices = growthFormChoice, required=False)
    height = forms.DecimalField(max_value=99, min_value=0, decimal_places=2, required=True)
    density = forms.IntegerField(max_value=100, min_value=1, required=False) 
```

而且我有一种奇怪的方式来使用一个类在视图中显示它来处理所有处理。但它是这样的...

```
class ObservationFormView(object):    

    def __init__(self, request=None, project_id=None, observation_id=None):

        self.request = request
        self.ObservationFormSet = formset_factory(form=MixedObsCollsForm, extra=5)
        self.ObservationFormSet.form = staticmethod(curry(MixedObsCollsForm, project_id=project_id)) 
        self.project = get_object_or_404(Project, pk=project_id)

        self.user = request.user

        self.use_type = 'create'
        self.formset = self.ObservationFormSet(self.request.POST or None)

    def isValid(self):
        return self.formset.is_valid() & self.locationForm.is_valid()

    def render(self):
        return render(self.request, 'observation_form.html', {'use_type': self.use_type, 'formset': self.formset, 'locationForm':self.locationForm, 'project_photos': self.project.photos.all(),})

    def processForm(self):     

        for form in self.formset:
            if form.is_valid() == True:
                if form.cleaned_data['is_collection'] == True:
                    collection = self.getOrMakeCollection(form.cleaned_data, self.locationForm.cleaned_data['location'], False)
                if form.cleaned_data['is_collection'] == False:
                    collection = self.getOrMakeCollection(form.cleaned_data, self.locationForm.cleaned_data['location'], True)

                observation = self.saveObservation(form.cleaned_data, self.locationForm.cleaned_data['location'], collection)

        return observation 
```

问题是当我在视图中呈现此表单时，即使表单集中为空的表单也无法验证。报告“此字段为必填项”。在所有高度字段旁边。即使是空的。

我的理解是空表单应该总是通过验证。我查看了管理表单数据，一切看起来都很好。

如果我将 required 更改为 False，这意味着当我尝试将表单集保存到数据库时，我最终会遇到 IntegrityErrors。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:16:58.723

我终于弄清楚了它是什么，所以对于其他有这个问题的人来说，它很容易被忽视。

它甚至没有包含在问题的代码中，因此任何人都无法提供太多帮助。

这一行：

```
growth_form = forms.ChoiceField(choices = growthFormChoice, required=False) 
```

使用了`growthFormChoice`像这样的选择元组的变量。

```
growthFormChoice = (('0', 'Select one'),
                    ('T', 'tree'),  
                    ('S', 'shrub')) 
```

因此，默认值`('0':'Select One')` 导致将 a 传递`0`给每个没有（故意）更改的表单并触发其余字段的验证。只需将其更改为`('':'Select One')`即可。

# asp.net - 通过 asp.net 中的 X509 证书进行客户端身份验证

> ID：14933477
> 
> 赞同：27
> 
> 时间：2013-02-18T09:52:16.447
> 
> 标签：asp.net, authentication, digital-certificate

我有一个 asp.net 应用程序，我需要使用 X509 证书对用户进行身份验证。也就是说，用户必须安装我颁发的证书，这样他才能浏览我的网站，我可以通过这个证书识别出哪个用户。

我已经在 IIS 上配置了 SSL，但这不是我现在要寻找的，而且我不知道从哪里开始。

如何在 asp.net c# 中实现这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-05T17:58:37.677

要创建安全的身份验证机制，您将同时使用客户端证书和用户名/密码。原因是证书是可以被盗（复制）的东西，而密码是只有个人知道的东西。另一种方法是智能卡上的证书，受 PIN 保护。

要在 ASP.NET 应用程序中使用客户端证书，您需要执行以下操作：

**第 1 步：**在 IIS 管理器中，打开您的应用程序或网站，选择 SSL 设置，然后选择需要 SSL 和需要客户端证书。

现在，当用户打开您的网站时，浏览器将提示他选择将在通信中使用的客户端证书。

**重要**此时您必须确保证书是由您信任的人颁发的（因为任何人都可以创建自己的自签名证书）。

**第 2 步：**添加配置项（web.config、数据库等）。在此列表中，您将为您的客户端证书添加整个 CA（证书颁发机构）链的指纹。

```
<add key="ClientCertificateIssuerThumbprints" value="4901f5b87d736cd88792bd5ef7caee91bf7d1a2b,0113e31aa85d7fb02740a1257f8bfa534fb8549e,c9321de6b5a82666cf6971a18a56f2d3a8675602"/> 
```

**第三步：**创建经典的用户名/密码登录页面。验证用户名/密码。

**第 4 步：**将以下代码添加到您的登录页面：

```
var x509 = new X509Certificate2(this.Request.ClientCertificate.Certificate);
var chain = new X509Chain(true);
chain.ChainPolicy.RevocationMode = X509RevocationMode.Offline;
chain.Build(x509);

var validThumbprints = new HashSet<string>(
    System.Configuration.ConfigurationManager.AppSettings["ClientCertificateIssuerThumbprints"]
        .Replace(" ", "").Split(',', ';'),
    StringComparer.OrdinalIgnoreCase);

// if the certificate is self-signed, verify itself.
for (int i = chain.ChainElements.Count > 1 ? 1 : 0; i < chain.ChainElements.Count; i++)
{
    if (!validThumbprints.Contains(chain.ChainElements[i].Certificate.Thumbprint))
        throw new UnauthorizedAccessException("The client certificate selected is not authorized for this system. Please restart the browser and pick the certificate issued by XXXXX");
}

// certificate Subject would contain some identifier of the user (an ID number, SIN number or anything else unique). here it is assumed that it contains the login name and nothing else
if (!string.Equals("CN=" + login, x509.Subject, StringComparison.OrdinalIgnoreCase))
    throw new UnauthorizedAccessException("The client certificate selected is authorized for another user. Please restart the browser and pick another certificate."); 
```

只有当密码和证书都被检查时，用户才应该被允许进入系统。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-11T11:00:52.777

假设您有 IIS 7.0 或更高版本，您可以配置客户端证书映射身份验证

[使用 Active Directory](http://www.iis.net/configreference/system.webserver/security/authentication/clientcertificatemappingauthentication)（非常简单，将映射工作留给 AD 服务器）

```
<location path="Default Web Site">
   <system.webServer>
      <security>
         <access sslFlags="Ssl, SslNegotiateCert" />
          <authentication>
            <windowsAuthentication enabled="false" />
            <anonymousAuthentication enabled="false" />
            <digestAuthentication enabled="false" />
            <basicAuthentication enabled="false" />
            <clientCertificateMappingAuthentication enabled="true" />
         </authentication>
     </security>
   </system.webServer>
</location> 
```

或[使用 IIS](http://www.iis.net/configreference/system.webserver/security/authentication/iisclientcertificatemappingauthentication)（IIS 中需要更多配置，需要访问客户端证书，但独立工作，无需往返 AD）。在这种情况下，您指定（一个或多个）用户凭据和

*   将每个用户映射到证书的公钥到您指定其凭据的用户，或者
*   根据证书字段中的值将多个证书映射到用户

配置（多对一）：

```
<location path="Default Web Site">
   <system.webServer>
      <security>
         <authentication>
            <windowsAuthentication enabled="false" />
            <anonymousAuthentication enabled="false" />
            <digestAuthentication enabled="false" />
            <basicAuthentication enabled="false" />
            <iisClientCertificateMappingAuthentication enabled="true"
                  manyToOneCertificateMappingsEnabled="true">
               <manyToOneMappings>
                  <add name="Contoso Employees"
                        enabled="true"
                        permissionMode="Allow"
                        userName="Username"
                        password="[enc:AesProvider:57686f6120447564652c2049495320526f636b73:enc]">
                     <rules>
                        <add certificateField="Subject"
                           certificateSubField="O"
                           matchCriteria="Contoso"
                           compareCaseSensitive="true" />
                     </rules>
                  </add>
               </manyToOneMappings>
            </iisClientCertificateMappingAuthentication>
         </authentication>
         <access sslFlags="Ssl, SslNegotiateCert" />
      </security>
   </system.webServer>
</location> 
```

（示例配置相当厚颜无耻地从 iis.net 文档页面上的示例中复制，这些示例非常详尽。）

或者，您可以将应用程序配置为[使用基于声明的身份验证](http://msdn.microsoft.com/en-us/library/hh545401.aspx)和基于客户端证书对客户端进行身份验证的安全令牌服务 (STS)。ADFS 2.0 可以完成这个角色，或者如果它不可用，您可以查看[Thinktecture Identity Server](http://thinktecture.github.com/Thinktecture.IdentityServer.v2/)。

# php - 使用嵌套格式分组 Mysql 查询

> ID：14933485
> 
> 赞同：3
> 
> 时间：2013-02-18T09:52:50.163
> 
> 标签：php, mysql, html-table, cross-reference

我搜索了旧线程，但还没有找到以下问题的解决方案：是否可以在不诉诸嵌套查询的情况下对 mysql 结果进行分组和排列？

请参阅下面的示例。

我有：

```
Month Jan, Location USA, Program DDD
Month Jan, Location UK, Program EEE
Month Jan, Location USA, Program LLL
Month FEB, Location UAE, Program EEE
Month FEB, Location USA, Program DDD
Month FEB, Location UK, Program MMM
Month MAR, Location USA, Program FFF
Month MAR, Location UAE, Program FFF
Month MAR, Location UK, Program FFF 
```

我希望它们像这样显示：

```
 +---------++---------++---------+
                |Month Jan||Month Feb||Month Mar|
+---------------+---------++---------++---------+
|Location USA   |         ||         ||         |
+---------------+---------++---------++---------+
|               |DDD      ||DDD      ||FFF      |
+---------------+---------++---------++---------+
|               |EEE      ||         ||         |
+---------------+---------++---------++---------+
|               |LLL      ||         ||         |
+---------------+---------++---------++---------+
|Location UK    |         ||         ||         |
+---------------+---------++---------++---------+
|               |EEE      ||MMM      ||FFF      |
+---------------+---------++---------++---------+
|Location UAE   |         ||         ||         |
+---------------+---------++---------++---------+
|               |         ||EEE      ||FFF      |
+---------------+---------++---------++---------+ 
```

我已尝试对查询进行分组，但无法将其呈现到 HTML 表中。

```
SELECT 
    event.`event_id`,
    event.`event_program_id`,
    event.`event_month`, 
    event.`event_location_id`,
    location.`location_name`,
    program.`program_name`,
    program.`program_shortname`
FROM 
    `event`
LEFT JOIN
    `location`
ON
    event.`event_location_id` = location.`location_id`
LEFT JOIN
    `program`
ON
    event.`event_program_id` = program.`program_id`; 
```

现在它的清单是这样的：

```
 column1 column2 column3
line1   34              
line2   34              
line3           34  
line5       34 
```

我想要这样的地方：

```
 column1 column2 column3 
line1   34      34
                34      34
                34        

line2   34
        34      34      34              
line3           34      
line5       34 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:59:36.020

如果您在预期结果中有预定义的列数，例如一年中的几个月，您可以为每一列执行一些内部查询来实现这一点。

我有一些基于 SQL 的报告的经验，这些报告使用了这样的子查询，在一天结束时，这个解决方案变得难以管理:) 今天我只是读取数据，存储在内存中的矩阵中，最后根据矩阵生成结果，将来更容易更改。

干杯！

这是 PHP 中的一个示例

```
<pre>
<?php
$columns = array();
$data = array();

// add the data from the database
$data["line1"]["column1"] += 34;
$data["line2"]["column1"] += 34;
$data["line3"]["column4"] += 34;
$data["line5"]["column2"] += 34;

$data["line1"]["column1"] += 34;
$data["line3"]["column4"] += 34;

// find the columns
foreach ($data as $line => $column) {
    foreach ($column as $cname => $value) {
        if( ! in_array($cname, $columns) ){
            $columns[] = $cname;
        }
    }
}

sort($columns);

// display column names
echo " \t";
foreach ($columns as $index => $cname) {
    echo $cname . "\t";
}
echo "\n";

// display the data
foreach ($data as $line => $column) {
    echo $line . "\t";
    foreach ($columns as $index => $cname) {
        echo $column[$cname] . "\t";
    }
    echo "\n";
}
?>
</pre> 
```

这是解决问题的另一种方法

```
<pre>
<?php
$columns = array();
$data = array();

// add the data from the database
// sort the data in the SQL
$data[] = array("l" => "line1", "c"=> "column1", "v" => "AAA");
$data[] = array("l" => "line1", "c"=> "column1", "v" => "BBB");
$data[] = array("l" => "line1", "c"=> "column3", "v" => "CCC");
$data[] = array("l" => "line2", "c"=> "column2", "v" => "AAA");
$data[] = array("l" => "line3", "c"=> "column2", "v" => "AAA");

// find the columns
foreach ($data as $line => $column) {
    if( ! in_array($column["c"], $columns) ){
        $columns[] = $column["c"];
    }
}

sort($columns);

// display column names
echo " \t";
foreach ($columns as $index => $cname) {
    echo $cname . "\t";
}
echo "\n";

$name = '';
$count = 0;
// display the data
foreach ($data as $line => $column) {
    if( $column['l'] == $name ){
        $count ++;
    } else {
        $name = $column['l'];
        $count = 0;
    }

    if( $count == 0 ){
        echo $name . "\t";
    } else {
        echo " \t";
    }   

    foreach ($columns as $index => $cname) {
        if( $column['c'] == $cname ){
            echo $column['v'] . "\t";       
        } else {
            echo " \t";
        }
    }
    echo "\n";
}
?>
</pre> 
```

使用 html 作为输出的其他参考

```
<table border="1">
<?php
$columns = array();
$data = array();

// add the data from the database
// sort the data in the SQL
$data[] = array("l" => "line1", "c"=> "column1", "v" => "AAA");
$data[] = array("l" => "line1", "c"=> "column1", "v" => "BBB");
$data[] = array("l" => "line1", "c"=> "column3", "v" => "CCC");
$data[] = array("l" => "line2", "c"=> "column2", "v" => "AAA");
$data[] = array("l" => "line3", "c"=> "column2", "v" => "AAA");

// find the columns
foreach ($data as $line => $column) {
    if( ! in_array($column["c"], $columns) ){
        $columns[] = $column["c"];
    }
}

sort($columns);

// display column names
echo "<tr>";
echo "<td>&nbsp;</td>";
foreach ($columns as $index => $cname) {
    echo "<td>".$cname."</td>";
}
echo "</tr>";

$name = '';
$count = 0;
// display the data
foreach ($data as $line => $column) {
    echo "<tr>";

    if( $column['l'] == $name ){
        $count ++;
    } else {
        $name = $column['l'];
        $count = 0;
    }

    if( $count == 0 ){
        echo "<td>".$name."</td>";
    } else {
        echo "<td>&nbsp;</td>";
    }   

    foreach ($columns as $index => $cname) {
        if( $column['c'] == $cname ){
            echo "<td>".$column['v']."</td>";
        } else {
            echo "<td>&nbsp;</td>";
        }
    }
    echo "</tr>";
}
?>
</table> 
```

# javascript - swarminject 是做什么用的？

> ID：14933489
> 
> 赞同：2
> 
> 时间：2013-02-18T09:53:05.047
> 
> 标签：javascript, jquery, jquery-ui

我可以看到在 Jquery UI 组件的所有测试中都包含 swarminject.js 文件：

```
<script src="../swarminject.js"></script> 
```

它到底在做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:50:21.677

> TestSwarm 为 JavaScript 提供分布式持续集成测试。它最初由 John Resig 创建，作为支持 jQuery JavaScript 库的单元测试的基本工具。后来它被转移成为官方的 Mozilla 实验室，并再次成为一个 jQuery 项目。TestSwarm 的主要目标是采用在多个浏览器中运行 JavaScript 测试套件的复杂且耗时的过程，并大大简化它。它通过提供为您的 JavaScript 项目创建持续集成工作流所需的所有工具来实现这一目标。

来源：[https ://github.com/jquery/testswarm/wiki](https://github.com/jquery/testswarm/wiki)

# spring - 使用 STS 的 Spring Data JPA 配置

> ID：14933490
> 
> 赞同：0
> 
> 时间：2013-02-18T09:53:07.043
> 
> 标签：spring, sts-springsourcetoolsuite, spring-data-jpa

在 STS 中配置 Spring Data JPA 时出现以下问题

```
Referenced file contains errors (jar:file:/.../war/WEB-INF/lib/spring-
 context-3.0.RELEASE.jar!/org/springframework/context/config/spring-context-3.0.xsd). 
- Referenced file contains errors (jar:file:/.../war/WEB-INF/lib/spring-
 beans-3.0.RELEASE.jar!/org/springframework/beans/factory/xml/spring-beans-3.0.xsd). 
- Referenced file contains errors (jar:file:/.../war/WEB-INF/lib/spring-
 beans-3.0.RELEASE.jar!/org/springframework/beans/factory/xml/spring-tool-3.0.xsd) 
```

我在 applicationContext.xml 文件的这个位置收到此错误。

```
 <?xml version="1.0" encoding="UTF-8"?> 
```

删除时错误消失

```
http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.0.xsd 
```

从

```
<beans ...> 
```

和

```
<jpa:repositories ... /> 
```

来自 XML 的标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T03:49:09.980

看看对话框

```
Window > Preferences > XML > XML CataLog 
```

1.单击窗口 > 首选项并选择 XML > XML 目录。

2.单击添加以创建新目录条目。

```
Details:
Location:   D:\...\spring-framework-3.0.5.RELEASE\projects\org.springframework.beans\src\main\resources\org\springframework\beans\factory\xml\spring-beans-3.0.xsd
Key type:   Schema location
Key:        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
```

必须配置在 xml 文件的第一行中有错误的其他 .xsd 文件。

3.XML配置如下：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    ...
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    ...
    ..."
> 
```

4.编辑`<bean: ...>`和其他带有自动建议的元素。

# spring - mappingResources 找不到映射文件

> ID：14933492
> 
> 赞同：0
> 
> 时间：2013-02-18T09:53:12.473
> 
> 标签：spring, hibernate

我的休眠配置文件位于资源/休眠目录文件夹下。`resources`目录文件夹是源文件夹。当我`mappingResources`像这样在 Spring 配置中声明时：

```
<property name="mappingResources">
   <list>
      <value>classpath:hibernate/PojoA.hbm.xml</value>
   </list>
</property> 
```

我收到错误提示 PojoA.hbm.xml 不存在。我可以知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:01:44.420

试试这个

```
<property name="mappingResources">
   <list>
      <value>hibernate/PojoA.hbm.xml</value>
   </list>
</property> 
```

# python - python中的父__unicode__

> ID：14933493
> 
> 赞同：1
> 
> 时间：2013-02-18T09:53:16.630
> 
> 标签：python, inheritance

假设我有一个名为 Animal 的类和一个名为 Dog 的子类。如何从 Dog 类访问 Animal 的**unicode定义？**

```
 class Animal:
      def __unicode__(self):
           return 'animal'

 class Dog(Animal):
      def __unicode__(self):
           return 'this %s is a dog' % (I want to get the Animal's __unicode__ here) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T10:02:13.173

由于您在 Python 2 中实现旧式类，因此您只能通过其限定名称访问基类的方法：

```
class Animal:
    def __unicode__(self):
        return 'animal'

class Dog(Animal):
    def __unicode__(self):
        return 'this %s is a dog' % Animal.__unicode__(self) 
```

但是，如果你修改你的基类，使它成为一个[新式类](http://docs.python.org/2/glossary.html#term-new-style-class)，那么你可以使用[super()](http://docs.python.org/2/library/functions.html#super)：

```
class Animal(object):
    def __unicode__(self):
        return 'animal'

class Dog(Animal):
    def __unicode__(self):
        return 'this %s is a dog' % super(Dog, self).__unicode__() 
```

请注意，所有类都是 Python 3 中的新型类，因此`super()`在运行该版本时始终可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T09:56:27.083

您可以通过以下几种方式引用父方法：

```
class Dog(Animal):
      def __unicode__(self):
           return 'this %s is a dog' % Animal.__unicode__(self)

class Dog(Animal):
     def __unicode__(self):
           return 'this %s is a dog' % super(Dog, self).__unicode__() 
```

注意：为了使用 super 父类必须是一个新的样式类。如果与问题中定义的旧样式类一起使用，第二种方法将失败。

# javascript - 如何将 ejs 模板与下划线结合使用？

> ID：14933495
> 
> 赞同：1
> 
> 时间：2013-02-18T09:53:24.033
> 
> 标签：javascript, node.js, templates, underscore.js, ejs

在下划线中，<%- stuff %> 转义 HTML。

但是，在 EJS 中，<%= stuff %> 会转义 HTML。

如果有办法让这种情况保持一致，生活会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:53:19.827

我不认为你可以在这里让 EJS 像 Underscore 一样工作，但你可以反过来 - 请参阅[带有 Underscore.js 模板的 Rails 以](https://stackoverflow.com/questions/7514922/rails-with-underscore-js-templates)获得灵感。

# spring - 如何在jsp中设计垂直标签视图并在控制器中处理

> ID：14933497
> 
> 赞同：0
> 
> 时间：2013-02-18T09:53:25.390
> 
> 标签：spring, jsp, spring-mvc, jsp-tags

我有如下要求。

在页面的左侧有一些链接，当有人单击左侧的链接时，右侧有一个正确的视图。如何在 Spring MVC 中有效地做到这一点。

例如我们可以看到 FACEBOOK 设置。 [https://www.facebook.com/settings](https://www.facebook.com/settings) 但比点击一般 [https://www.facebook.com/settings?tab=account](https://www.facebook.com/settings?tab=account) 或侧面的安全链接 [https://www.facebook.com/settings ?tab=安全](https://www.facebook.com/settings?tab=security)

等等。如何处理？控制器中的选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:54:02.433

使用瓷砖[这](http://viralpatel.net/blogs/spring-3-mvc-tiles-plugin-tutorial-example-eclipse/)是一个很好的例子。

# excel - VBA：显示错误的日期格式

> ID：14933500
> 
> 赞同：1
> 
> 时间：2013-02-18T09:53:36.407
> 
> 标签：excel, vba

我有 vba 代码以特定格式显示日期，如下所示

```
If Not IsNull(Data.getAttribute("recorded"))) Then
    Range("BG3") = Format((Data.getAttribute("recorded")), "dd / mmm / yyyy")
End If 
```

这段代码实际上在我的本地工作。但在服务器中，它显示格式为“02.14.2013”​​。

由于日期格式错误，我遇到了一些问题。

这可能是什么原因？有人请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:14:04.593

我的建议是尝试：

```
If Not IsNull(Data.getAttribute("recorded"))) Then
    Range("BG3").Value2 = Format((Data.getAttribute("recorded")), "dd / mmm / yyyy")
End If 
```

如果这仍然是一个问题

```
If Not IsNull(Data.getAttribute("recorded"))) Then
    Range("BG3").Value = Data.getAttribute("recorded")
    Range("BG3").NumberFormat = "dd / mmm / yyyy"
End If 
```

但是我仍然坚持在某个战略性的地方设置一个断点并逐步执行代码以确保数字以不正确的格式出现在单元格中，而不是稍后被重置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:13:39.727

`Range`尝试在语句之前添加以下内容：

```
Range("BG3").NumberFormat = "@" 'set to display as text 
```

# xml - 无法理解特定的 XSD 验证结果 (Xceres)

> ID：14933501
> 
> 赞同：1
> 
> 时间：2013-02-18T09:53:37.433
> 
> 标签：xml, validation, xsd, xml-namespaces

我正在实现一个符合两个外部提供的 XSD 的 XML 解决方案。首先，我们有 ns1.xsd：

```
<schema xmlns:ns1="http://www.test.com/ns1" 
        xmlns:ns2="http://www.test.com/ns2" 
        xmlns:xsd="http://www.w3.org/2001/XMLSchema.xsd" 
        xmlns="http://www.w3.org/2001/XMLSchema" 
        targetNamespace="http://www.test.com/ns1" 
        elementFormDefault="qualified">
    <import namespace="http://www.test.com/ns2" 
        schemaLocation="http://www.test.com/ns2.xsd"/>
    <element name="Root">
        <complexType>
            <sequence>
                <element name="Child" type="ns2:ChildType" 
                         minOccurs="0"/>
            </sequence>
        </complexType>
        <attribute ref="ns2:field3" use="optional"/>
    </element>
</schema> 
```

和 ns2.xsd：

```
<schema xmlns:ns2="http://www.test.com/ns2" xmlns:xsd="http://www.w3.org/2001/XMLSchema.xsd" xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.test.com/ns2" elementFormDefault="qualified" attributeFormDefault="qualified">
    <complexType name="ChildType">
        <attribute name="field1" type="string" use="optional"/>
        <attribute name="field2" type="string" use="optional"/>
    </complexType>
    <attribute name="field3" type="string"/>
</schema> 
```

在[liquid-technologies.com](http://www.liquid-technologies.com)上有一个[教程展示了如何](http://www.liquid-technologies.com/Tutorials/XmlSchemas/XsdTutorial_04.aspx)实现使用引用类型的XSD。按照这个逻辑，我得到：

```
<?xml version="1.0" encoding="UTF-8"?>
<Root xmlns="http://www.test.com/ns1" 
      xmlns:ns2="http://www.test.com/ns2" 
      ns2:field3="test">
    <Child ns2:field1="test" ns2:field2="test"/>
</Root> 
```

使用 Xerces 2.11.0 进行验证。如果我`attributeFormDefault="unqualified"`在 ns2.xsd 中进行更改，我必须在实现中删除命名空间前缀以使其验证：

```
<?xml version="1.0" encoding="UTF-8"?>
<Root xmlns="http://www.test.com/ns1" 
      xmlns:ns2="http://www.test.com/ns2" 
      ns2:field3="test">
    <Child field1="test" field2="test"/>
</Root> 
```

正如我刚才[问的](https://stackoverflow.com/questions/13250819/why-do-i-have-to-prefix-attributes-from-imported-xsd)那样，`field3`（正确地）仍然是前缀。现在我想知道：

1.  `field1`和`field2`对比的真正区别是什么`field3`？为什么 Xceres 强迫我省略`field1`and的前缀`field2`？是因为`field1`并且`field2`确实是类型的一部分，`field3`而是对属性的引用？
2.  在第二种情况下，接收者如何知道命名空间属性`field1`和`field2`所属？

（如果有人知道描述这些规则的 W3C 建议的哪一部分，我也会非常感激。）

**附加信息**

我很想指出这个例子的后果。在案例 1中`field1`，以 which`field2`为前缀`ns2`清楚地将它们确定为`ns2`-namespace 中的属性名称。`ns1`在情况 2 中，上述两个属性名称都没有前缀，除了这些属性属于默认 ( ) 命名空间之外，很难得出任何其他结论。

为什么这很重要？好吧，这很重要，因为它已经有效地变成`attributeFormDefault`了命名空间限定符。我很难理解这是 W3C 委员会的意图，因此我认为这是一个错误。如果有人能启发我，我会很激动！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:45:59.697

没有前缀的属性通常被视为不在命名空间中。它们不在默认命名空间中。（我说一般，因为有些人喜欢不同的解释，比如他们在一个未指定的命名空间中，但这种区别对我来说太微妙了。）

当您说 attributeFormDefault="unqualified" 时，ns2 架构文档中本地声明的属性将不在命名空间中，这意味着它们必须出现在没有前缀的实例中。

至于 ns2:field3，这有点奇怪，因为似乎没有该属性的声明。但是如果有的话，它必须是一个全局属性声明，并且全局属性总是在包含模式文档的目标命名空间中。

# ruby - Mongoid - 为至少一个文档设置一个字段为真

> ID：14933505
> 
> 赞同：1
> 
> 时间：2013-02-18T09:53:47.073
> 
> 标签：ruby, sinatra, mongoid

我希望数据库中**始终****至少有一个**文档，其标题为“ `selected`”的字段设置为 true。我怎么做？很可能我必须使用回调，但是哪一个：`before (or after) _create, _upsert, _update`？

以及如何确保无论执行什么操作都会将其设置为 true：创建、更新、更新插入……？我想为他们每个人创建一个回调是不正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:43:45.830

[after_save 总是](http://guides.rubyonrails.org/v3.2.9/active_record_validations_callbacks.html#available-callbacks)在创建和更新之后运行

所以你可以这样做：

```
after_save do |your_class|
  your_class.update_column(:selected, true) unless YourClass.where(selected: true).exists?
end 
```

注意。/ [update_column 不应再次触发 after_save](https://stackoverflow.com/a/7386222/26679)！

# delphi - Delphi 中的库项目是否有条件定义？

> ID：14933507
> 
> 赞同：2
> 
> 时间：2013-02-18T09:53:49.817
> 
> 标签：delphi, delphi-xe2

我有一个实用程序单元，其代码在几个应用程序和 DLL 之间共享。我想根据当前项目类型有选择地编译本单元的某些部分：应用程序、包或库。我在单元中找不到库或包的任何条件定义`System`，谷歌也没有找到任何相关的东西。那么，是否有任何条件定义，例如编译器`IsLibrary`或`IsPackage`由编译器设置？顺便说一句，我知道这个`IsLibrary`变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T09:58:47.910

没有这样的预定义条件，也不可能有这样的条件。这是因为在编译时不可能知道该单元最终是否会链接到可执行文件、库或包中。

事实上，同一个编译单元可以链接到任何或所有上述项目类型。事实上，当您将 RTL 链接到您的项目时，您自己也可以看到这一点。`System`无论项目类型如何，您都将相同的单元、相同的编译 .dcu 文件链接到所有项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:30:17.957

恕我直言，由于现有的约定，绝对不需要这样的条件。

编译应用程序或库（在**此**编译方面相同）或包不同，如下所示：

*   应用程序/库将仅编译单元中使用的部分
*   包将从单元的接口部分引用的单元中编译所有部分

示例单元

```
unit foo;

interface

procedure foo1;
procedure foo2;

implementation

procedure foo3; 
begin
  // used by foo2, compile depends on foo2 compilation
end;

procedure foo4;
begin
  // will never be compiled, because is never used
end;

procedure foo1;
begin
  // Package: will always be compiled
  // Application/Library: will be compiled if used 
end;

procedure foo2;
begin
  // Package: will always be compiled
  // Application/Library: will be compiled if used 

  foo3;

end;

end. 
```

这也是为什么使用包可能会导致`exe`文件更大的原因，因为它可以包含预编译`dcu`文件中未使用的代码部分。

# xcode - 卸载 XCode 会中断 MacPorts？

> ID：14933509
> 
> 赞同：1
> 
> 时间：2013-02-18T09:53:54.533
> 
> 标签：xcode, macports

我有 Xcode 4.5 Developer Preview 1，现在我想下载 Xcode 4.6。在下载最新的 Xcode 之前，我想彻底卸载旧的。还不知道该怎么做。但我担心它会中断[MacPorts](http://macports.org/)功能。[MacPorts](http://macports.org/)需要 Xcode 命令行工具。那么是否可以先完全卸载旧版本，然后再下载最新版本？如果可能的话，我还想将 Xcode 4.5 DP1 升级到 Xcode 4.6。我从 DMG 文件安装了 Xcode 4.5 DP1。我将从 App Store 安装 Xcode 4.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-09T04:22:53.753

您应该通过 App Store 升级 XCode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:21:37.380

您应该能够毫无问题地升级 Xcode 和命令行工具。当您没有安装 Xcode 版本（和命令行工具）时，MacPorts 可能无法工作，但在更新后会再次开始工作。

# google-app-engine - 传出带宽是总响应的 2 倍

> ID：14933517
> 
> 赞同：4
> 
> 时间：2013-02-18T09:54:40.197
> 
> 标签：google-app-engine, gae-quotas

我有一个非常简单的应用程序引擎应用程序，提供存储在 blobstore 中的 1.8Kb - 3.6Kb gzipped 文件。从数字文件 ID 到 blobkey 的映射存储在数据存储中并缓存在 memcache 中。servlet 实现很简单：在请求中接收到一个数字文件 ID；从 memcache/datastore 中检索 blobkey，并`BlobstoreService.serve(blobKey, resp)`调用标准来提供响应。正如预期的那样，应用日志显示响应大小始终与提供的 blobstore 文件大小相匹配。

我一直在进行一些重点容量测试，这表明传出带宽配额利用率一直报告为大约是我预期收到的请求的 2 倍。我一直在一次运行 100k 请求，将客户端收到的字节相加，将其与应用程序日志进行比较，除传出带宽配额利用率外，所有内容均保持平衡。

对于我上面描述的简单应用程序如何确定传出带宽配额利用率有什么帮助吗？我错过了什么或没有考虑什么？为什么它与应用日志中显示的响应大小总数不相符？

[2013.03.04 更新：我放弃了使用 blobstore 并恢复为将 blob 直接存储在数据存储中。传出带宽利用率现在完全符合预期。似乎 2x 乘数在某种程度上与 blobstore 的使用有关（但仍然无法解释）。我在使用 blobstore 服务时遇到了其他几个问题；最成问题的是额外的数据存储读取和写入（这与数据存储中管理的 blobinfo 和 blobindex 元数据有关 - 这是我最初试图通过将数据迁移到 blobstore 来减少的）。对我来说一个特别严重的问题是：[https ://code.google.com/p/googleappengine/issues/detail?id=6849](https://code.google.com/p/googleappengine/issues/detail?id=6849). 我认为这是 blobstore 服务内存泄漏；创建 Blob 后，您将永远无法删除数据存储中的 Blob 元数据。我将永远为此付出代价，因为我愚蠢地进行了 24 小时的容量和性能测试，现在无法释放测试期间使用的存储空间。看来，blobstore 目前只适用于非常特定的场景（即永久静态数据）。具有大量流失或频繁刷新或更改的数据的对象不应存储在 blobstore 中。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-25T12:48:59.013

可以删除 blobstore 数据（**我不建议这样做，因为它会导致意外行为**），但前提是您知道它保存在的表`__BlobInfo__`和`__BlobFileIndex__`. 这样就完成了，所以你上传的文件没有相同的名字，并且不小心替换了一个旧文件。

对于存储在数据存储中的表的完整列表，您可以运行`SELECT * FROM __kind__`.

我不确定为什么您的应用引擎应用会消耗 2 倍的传出带宽，但我会自己进行测试。

另一种方法是使用谷歌云存储。如果您[为应用引擎应用使用默认存储桶，您将获得 5GB 的免费存储空间](https://cloud.google.com/appengine/docs/java/googlecloudstorageclient/activate)

> 具有大量流失或频繁刷新或更改的数据的对象不应存储在 blobstore 中。

没错，您可以使用云存储或数据存储（云存储是一种不可变的对象存储服务）。Blobstore 更适合通过`<input type='file' />`表单上传文件。（从最近开始，从应用程序内部写入文件已被弃用，取而代之的是云存储）

# android - 印地语字符将无法正确显示在 Web 视图中

> ID：14933519
> 
> 赞同：11
> 
> 时间：2013-02-18T09:54:43.217
> 
> 标签：android, android-layout

我有数据库，其中数据以印地语存储，`\u092e\u0948\u0902 \u0924\`并使用下面的方法将该内容设置为 webview。

```
 webview1.loadData(hindi_content, "text/html", "UTF-8"); 
```

但它会显示为

![印地语内容显示为](../Images/8d7c92a4c9248e802257084cccc7108f.png)

我不知道为什么会这样。请任何人建议。如何解决这个问题！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T09:15:52.063

`loadData`发生这种情况是因为大多数 Android 版本中的 encoding 参数存在错误。由于某种原因，此参数被忽略，因此不会呈现基于 UTF-8 的印地语字符。要解决此问题，您可以使用以下替代方法之一。

```
webview1.loadData(hindi_content, "text/html; charset=UTF-8", null);

webview1.loadDataWithBaseURL(null, hindi_content, "text/html", "utf-8", null); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T09:33:37.310

这是[此答案](https://stackoverflow.com/questions/4933069/android-webview-with-garbled-utf-8-characters/10831462#10831462)的副本：

您还需要对这些序列进行转义，并参考[How to Unescape Unicode in Java](https://stackoverflow.com/questions/9672363/what-is-that-encoding-u041e-u0434-u0440-and-how-to-i-get-it-back-to-normal/9672395#9672395)

使用 loadData 在 WebView 中渲染 UTF-8 已经以某种形式或方式永远被破坏了。 [第 1733 期](http://code.google.com/p/android/issues/detail?id=1733#c23)

使用 loadDataWithBaseURL 而不是 loadData。

```
// Pretend this is an html document with those three characters
String scandinavianCharacters = "øæå";

// Won't render correctly
webView.loadData(scandinavianCharacters, "text/html", "UTF-8");

// Will render correctly
webView.loadDataWithBaseURL(null, scandinavianCharacters, "text/html", "UTF-8", null); 
```

现在真正令人讨厌的部分是，在三星 Galaxy S II (4.0.3) 上 loadData() 工作得很好，但在 Galaxy Nexus (4.0.2) 上测试多字节字符会出现乱码，除非你使用 loadDataWithBaseURL( ）。[Web 视图文档](http://developer.android.com/reference/android/webkit/WebView.html#loadData%28java.lang.String,%20java.lang.String,%20java.lang.String%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T07:34:28.093

您将需要使用字体来支持印地语（android 尚未完全支持印地语）创建**Typeface**的 Singleton 实例并调用 createFromAsset(); 并像这样将其添加到 WebSettings

```
WebSettings webSettings = webView.getSettings();
webSettings.setFixedFontFamily(InstaceOFTypeFace); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-30T04:29:59.393

最后我想出了将印地语内容加载到 webview 的解决方案。

我只是更改了加载字符串，不幸的是它会起作用。

```
webview.loadData(Hindi_css, "text/html; charset=UTF-8", null); 
```

谢谢大家的努力。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-08T11:38:31.907

你也可以使用这个。

```
String uri= Uri.encode(html file/url);
  webView.loadUrl(uri); 
```

可能这会对你有所帮助。

# sql - 无法将字符串添加到字符串的末尾

> ID：14933523
> 
> 赞同：0
> 
> 时间：2013-02-18T09:55:02.483
> 
> 标签：sql, oracle

我有这个查询：

```
SELECT distinct
  substr(p1.name,-1) as index_
  p2.value as value        
FROM pks p  
  LEFT JOIN Parameter p1 on p1.ID=p.id AND p1.NAME like '%TFrom%'
  LEFT JOIN Parameter p2 on p2.ID=p.id AND p2.NAME like '%TFrom%' + substr(p1.name,-1)

WHERE p.type='singer' 
```

我想要做的是将`index_`值添加到`p2.NAME`字符串的末尾。有时`index_`is `(null)`，但我不相信这是一个问题，因为当它是一个空字符串时，它应该通过而不在`p2_NAME`字符串中添加一些东西

在 SQL Server 中，可以通过在 Join 之后添加以下内容来完成：

```
+(SUBSTRING(p1.NAME,[length], len(p1.PA_NAME)) ) 
```

但在 Oracle 中，它不会将字符串添加到字符串中。我确定我错过了一些非常小的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:57:46.030

Oracle 中的连接通过以下方式完成`||`：

```
p2.NAME like '%TFrom%' || substr(p1.name,-1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T09:58:15.603

`||`您可以使用或连接字符串`concat`：

```
select last_name || '''s job category is ' || job_id
FROM employees 
WHERE employee_id = 152; 
```

或者

```
SELECT CONCAT(CONCAT(last_name, '''s job category is '), job_id) "Job" 
FROM employees 
WHERE employee_id = 152; 
```

# php - 如何配置 Phabricator 加密外发电子邮件？

> ID：14933526
> 
> 赞同：2
> 
> 时间：2013-02-18T09:55:11.687
> 
> 标签：php, email, public-key-encryption, phabricator

有人制作[phabricator](http://www.phabricator.com/docs/phabricator/article/Configuring_Outbound_Email.html)来加密和解密传出和传入的电子邮件吗？我需要编写自定义代码/插件吗？

正如我可以为 jenkins 做的那样：[如何配置 Jenkins 以使用 gpg 发送加密电子邮件？](https://stackoverflow.com/questions/12154558/how-to-configure-jenkins-to-send-encrypted-emails-with-gpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:47:36.940

这对我来说看起来非常容易。对于出站电子邮件，只需创建：

**您编写的一些自定义类：使用您编写的自定义适配器，请参阅“适配器：自定义”。** 正如文件所述。为了更容易，只需复制一些现有的适配器并对其进行修改以允许对消息进行加密。

然后对于传入的邮件，考虑到您使用的是 sendmail，只需遵循以下步骤：**MTA：配置 Sendmail**并创建自定义电子邮件解析逻辑以及 php 文件中的解密，该文件将用于解析文档中定义的传入邮件。

# c++ - 我怎样才能“取消使用”一个类？

> ID：14933527
> 
> 赞同：2
> 
> 时间：2013-02-18T09:55:15.090
> 
> 标签：c++

在我们庞大的代码库中，在其中一个包含文件中，我们有以下语句

```
using std::some_function 
```

但是，我想“取消使用”`some_function`并使用另一个`some_function`. 我无法修改此标头，因为大部分代码库都依赖于它。

有没有可能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:56:41.000

我不认为有。您应该将您的函数放在命名空间中并限定其使用：

```
namespace MyNamespace
{
   void some_function();
}

//...
MyNamespace::some_function(); 
```

当然，您能做的最好的事情就是删除`using`指令并修复代码 - 但我（遗憾地）确实理解为什么这并不总是一种选择。

编辑：**也许**，由于懒惰，该`using`指令不存在，但实际上有人希望您在实施自己的`some_function`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:35:32.977

取决于您希望“未使用”的范围是什么。

如果它的范围是（到您自己的命名空间，甚至更好地到一个函数），那么您可以放入`using MyNamespace::some_function;`您的范围。

如果它是全局范围，那么原始标头的作者已经否决了您 - 实际上他们`::some_function`首先获得了名称，并且他们阻止您将它用于其他任何事情。他们不应该将`std`函数拉入全局命名空间，但您只需要忍受他们的错误。

假设您不想犯他们所犯的相同错误，您只希望“未使用”应用于一个源文件，而不是您自己将其置于标头中的全局范围内。在这种情况下你*可以* `#define some_function MyNamespace::some_function`，但我不推荐它，因为代码的读者/维护者不会期望必须意识到小写名称实际上是一个宏。

If`some_function`是一个函数（不是标题中的类），并且您只处理一个重载（例如`void some_function()`，那么还有另一个丑陋的解决方法。添加另一个参数：

```
static void some_function(int) { MyNamespace::some_function(); } 
```

然后你可以调用它`some_function(0)`并获取`MyNamespace`版本。但是，如果您要输入额外的文本（在这种情况下`0`），我认为您最好按照预期的方式进行操作：将额外的文本设为`MyNamespace::`，或者只是使用不同的名称。

# jquery - jQuery - 如何将函数应用于每个表？

> ID：14933534
> 
> 赞同：0
> 
> 时间：2013-02-18T09:55:38.980
> 
> 标签：jquery, html, html-table, each

我制作了一个创建分页系统的 jQuery 函数。

我的问题是，当我在具有多个表的页面中加载函数时，分页系统会应用于这两个表。我的意思是页数是 2 个表上的页数，而不是每个表的页数（对于每个`div`表，都有一个由 PHP 完成的表）

我试图修改我的代码以将函数应用于 div 中的每个表，但它不起作用！这是我的 HTML 代码：

```
<div id="panneau">
  <h3>Gestion des comptes</h3>                                  
   <table id ="tabUsers">
     <thead>
      <tr>
       <th>ID</th>
       <th>Pseudo</th>
       <th>An. naissance</th>
       <th>Région</th>
       <th>Email</th>
       <th>Téléphone</th>
       <th>Numéro masqué</th>
       <th>Date inscription</th>
       <th>Compte actif</th>
       <th>Actions</th>                         
      </tr>
     </thead>
     <tbody id = "corpsTab">
       <?php include_once 'includes/inc_consulterLesComptes.php'; ?>
     </tbody>                       
  </table>
</div>

<div id="panneauValidAnnonce">
  <h3>Gestion des annonces</h3>                                  
   <table id ="tabAnnonces">
     <thead>
      <tr>
       <th>ID</th>
       <th>Titre</th>
       <th>Description</th>
       <th>Date création</th>
       <th>Taille</th>
       <th>Couleur</th>
       <th>Marque</th>
       <th>Prix</th>
       <th>Annonceur</th>
       <th>Valide</th>                          
      </tr>
     </thead>
     <tbody id = "corpsTabAnnonces">
       <?php include_once 'includes/inc_ConsulterLesAnnonces.php'; ?>
     </tbody>                       
  </table>
</div> 
```

有超过 2 个表，但它们都有相同的格式。

这是我的 jQuery 函数：

```
$(document).ready(function() {
  //i've tried to add $.each('table').each(function()) but that doesnt work
  var rows=$('table').find('tbody tr').length;   
  var annonceParPage=3;             
  var nbrePage= Math.ceil(rows/annonceParPage);       
  var paginationId = $('table').attr('id');
  var $pagenumbers=$('<div id="'+paginationId+'Pages"></div>');

  for(i=0 ; i<nbrePage ; i++)   {
    $('<span class="page">'+(i+1)+'</span>').appendTo($pagenumbers);
  }

  $pagenumbers.insertAfter('table');

  $('.page').hover(function(){
    $(this).addClass('hover');
  }                                         
  function(){
    $(this).removeClass('hover');
  }
  );

  $('table').find('tbody tr').hide();               
  var tr=$('table tbody tr');
  for(var i=0;i<=annonceParPage-1;i++){
    $(tr[i]).show();
  }

  $('span').click(function(event){
    $('table').find('tbody tr').hide();
    for(i=($(this).text()-1)*annonceParPage ; i<=$(this).text()*annonceParPage-1 ; i++){
      $(tr[i]).show();
    }                                                                                   
  });        
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:08:47.307

像这样的东西可能会起作用，我还做了一些优化：

```
$(document).ready(function() {
    $('table').each(function () {
      var thisTable = $(this);
      var rows=thisTable.find('tbody tr').length;   
      var annonceParPage=3;             
      var nbrePage= Math.ceil(rows/annonceParPage);       
      var paginationId = thisTable.attr('id');
      var $pagenumbers=$('<div id="'+paginationId+'Pages"></div>');

      for(i=0 ; i<nbrePage ; i++)   {
        $('<span class="page">'+(i+1)+'</span>').appendTo($pagenumbers);
      }

      $pagenumbers.insertAfter(thisTable);

      var tr=thisTable.find('tbody tr');
      tr.hide(); // optimised this selector

      for(var i=0;i<=annonceParPage-1;i++){
        $(tr[i]).show();
      }

      thisTable.find('span').click(function(event){
        thisTable.find('tbody tr').hide();
        for(i=($(this).text()-1)*annonceParPage ; i<=$(this).text()*annonceParPage-1 ; i++){
          $(tr[i]).show();
        }                                                                                   
      });        
    });
    $('.page').hover(function(){
        $(this).addClass('hover');
      },                                         
      function(){
        $(this).removeClass('hover');
    });
}); 
```

# flash - Azure 媒体服务和 Flash 视频播放器

> ID：14933538
> 
> 赞同：1
> 
> 时间：2013-02-18T09:55:50.770
> 
> 标签：flash, azure, media

在哪里可以看到通过 Flash 播放器上传到 Windows Azure 的播放视频示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-12T22:59:12.497

我们最近发布了 Azure 媒体播放器 ( [http://azure.microsoft.com/blog/2015/04/15/announcing-azure-media-player/](http://azure.microsoft.com/blog/2015/04/15/announcing-azure-media-player/) )。

演示站点位于[http://aka.ms/azuremediaplayer](http://aka.ms/azuremediaplayer)。

播放器会自动从 Azure 媒体服务中选择正确的技术（flash、silverlight 或 html5）和最佳格式。如果您想专门尝试 Flash，您可以进入演示中的高级选项并选择它。这也可以通过 docs - [http://aka.ms/ampdocs](http://aka.ms/ampdocs)来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-07T10:29:18.923

采样器播放器在[这里](http://amsplayer.azurewebsites.net/)

要在您的应用程序中实现它，

选项 1）您自己的播放器：
为此，您可以使用[此处](https://stackoverflow.com/questions/29135231/azure-media-services-player)或[此处](https://stackoverflow.com/questions/26981284/streaming-with-azure-media-services/27448363#27448363)提到的平台特定 URL+播放器。

选项 2) 使用[JWPlayer](http://www.jwplayer.com/partners/azure/)

Option3) AMS 正在推出[新的播放器](https://msdn.microsoft.com/en-us/library/azure/dn223283.aspx)- 让我们拭目以待。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:35:35.690

在 Azure 门户中：

1.  从右侧菜单打开媒体服务（首先创建新服务）
2.  点击上方菜单中的内容
3.  从本地上传视频（单击页脚菜单中的上传）
4.  从列表中选择上传的视频，然后单击编码
5.  从下拉列表中选择“在 PC/Mac 上播放（通过 Flash/Silverlight）”
6.  编码完成后，选择编码文件并点击播放

编辑：

1.  在第 5 步中选择“通过 HTML5（IE/Chrome/Safari）播放”
2.  编码完成后选择资产并单击发布（页脚菜单）
3.  复制/粘贴 Publish Url 属性列值到 src=""

    ```
    <video width="500" height="300" controls autoplay="false">
         <source src="">
    </video> 
    ```

# c# - 从代码隐藏访问 datalist headertemplate 中的控件

> ID：14933540
> 
> 赞同：0
> 
> 时间：2013-02-18T09:55:55.537
> 
> 标签：c#, asp.net

我的应用程序中有一个数据列表，其 headertemplate 有一个标签。现在我需要从代码隐藏访问标签。我该怎么做..

**代码**：

```
 <asp:DataList ID="Dlitems" runat="server" RepeatDirection="Horizontal" RepeatColumns="4"
                        CellPadding="0" CellSpacing="15" OnItemCommand="Dlitems_ItemCommand">
                        <HeaderTemplate>
                              <asp:Label ID="lblcat" runat="server" Text="" />
                        </HeaderTemplate> 
```

**注意**：我需要`lblcat`从 headertemplate 访问标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:00:36.140

`OnItemDataBound`像这样使用您的数据列表附加事件

```
<asp:DataList ID="Dlitems" runat="server" RepeatDirection="Horizontal" RepeatColumns="4"
CellPadding="0" CellSpacing="15" OnItemCommand="Dlitems_ItemCommand" 
OnItemDataBound="Dlitems_ItemDataBound">
... 
```

并像这样定义它

```
protected void Dlitems_ItemDataBound(Object sender, DataListItemEventArgs e)
{
   if (e.Item.ItemType == ListItemType.Header)
   {
       Label lblCat = (Label)e.Item.FindControl("lblcat");
       lblCat.Text = "Changed!";

    }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-25T17:23:36.063

上面的代码是正确的，但是您需要将帖子添加回代码并正确定义它，因为用户没有点击任何按钮或链接，所以我们不想显示已更改，除非用户点击链接或按钮。如下所示：

```
protected void dlData_ItemDataBound(object sender, DataListItemEventArgs e)
{
    try
    {
        if (Page.IsPostBack)
        {
            if (e.Item.ItemType == ListItemType.Header)
            {
                Label lblCat = (Label)e.Item.FindControl("lblcat");
                lblCat.Text = "Changed!";
            }
        }
    }
    catch (Exception ex)
    {
        throw;
    }
   } 
```

快乐编程

# android - 在android中动态添加标签

> ID：14933542
> 
> 赞同：3
> 
> 时间：2013-02-18T09:55:59.680
> 
> 标签：android, android-layout, tabs, android-tabhost

在我的应用程序中，我想通过单击按钮动态添加选项卡。我该如何添加？其余的 gui 应该和它一样。应该只添加标签。这是xml文件-

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@color/Beige"
android:focusable="true"
android:orientation="vertical" >
    <LinearLayout
    android:id="@+id/linearLayout3"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:layout_alignLeft="@+id/linearLayout2"
    android:layout_below="@+id/linearLayout2" >
    <TabHost
        android:id="@+id/th"
        android:layout_width="match_parent"
        android:layout_height="50dp" >
        <TabWidget
            android:id="@+id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

         <FrameLayout android:id="@+id/tabcontent"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
            android:paddingTop="62px">
       <Button android:id="@+id/buttontab"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
         android:text="A semi-random button"
        />
       </FrameLayout>        
    </TabHost>
</LinearLayout>
<LinearLayout
    android:id="@+id/linearLayout4"
    android:layout_width="match_parent"
    android:layout_height="380dp"
    android:layout_alignLeft="@+id/linearLayout3"
    android:layout_below="@+id/linearLayout3"
    android:orientation="vertical" >
    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
        <HorizontalScrollView
            android:id="@+id/hv"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
            <ImageView
                android:id="@+id/imv"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </HorizontalScrollView>
    </ScrollView>
</LinearLayout>
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="60dp"
    android:layout_alignLeft="@+id/linearLayout4"
    android:layout_below="@+id/linearLayout4" >
    <Button
        android:id="@+id/addtab"
        android:layout_width="80dp"
        android:layout_height="50dp"
        android:onClick="addtab"
        android:text="@string/addtab"
        android:textColor="@color/Black" />
  </LinearLayout>
  </RelativeLayout> 
```

其余的滚动视图，每个选项卡的水平滚动视图应该相同。

点击按钮-

```
 public void addtab(View v){

    TabHost tabHost = new TabHost(this);
    tabHost=(TabHost) findViewById(R.id.th);

    TabWidget tabWidget = new TabWidget(this);
    tabWidget=(TabWidget) findViewById(R.id.tabs); 
    tabHost.addView(tabWidget);
    FrameLayout tabContent = new FrameLayout(this);
    tabContent=(FrameLayout) findViewById(R.id.tabcontent);
    tabContent.setPadding(0, 65, 0, 0);
    tabHost.addView(tabContent);
    TextView content = new TextView(this);
    content.setText("This is the Frame Content");
    content.setId(100);
    tabHost.setup();
    TabSpec tspec1 = tabHost.newTabSpec("Tab1");
    tspec1.setIndicator("Button");
    tspec1.setContent(new PreExistingViewFactory(content));
    tabHost.addTab(tspec1);     

    }

class PreExistingViewFactory implements TabContentFactory{
    private final View preExisting;
    protected PreExistingViewFactory(View view){
    preExisting = view;
    }
    public View createTabContent(String tag) {
    return preExisting;
    }
    } 
```

如何添加标签？请帮我

例外——

```
02-18 16:02:14.375: E/AndroidRuntime(737): java.lang.IllegalStateException: Could not execute method of the activity
02-18 16:02:14.375: E/AndroidRuntime(737):  at android.view.View$1.onClick(View.java:2072)
02-18 16:02:14.375: E/AndroidRuntime(737):  at android.view.View.performClick(View.java:2408)
02-18 16:02:14.375: E/AndroidRuntime(737):  at android.view.View$PerformClick.run(View.java:8816)
02-18 16:02:14.375: E/AndroidRuntime(737):  at android.os.Handler.handleCallback(Handler.java:587)
02-18 16:02:14.375: E/AndroidRuntime(737):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-18 16:02:14.375: E/AndroidRuntime(737):  at android.os.Looper.loop(Looper.java:123)
02-18 16:02:14.375: E/AndroidRuntime(737):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-18 16:02:14.375: E/AndroidRuntime(737):  at java.lang.reflect.Method.invokeNative(Native Method)
02-18 16:02:14.375: E/AndroidRuntime(737):  at java.lang.reflect.Method.invoke(Method.java:521)
02-18 16:02:14.375: E/AndroidRuntime(737):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 02-18 16:02:14.375: E/AndroidRuntime(737):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-18 16:02:14.375: E/AndroidRuntime(737):  at dalvik.system.NativeStart.main(Native Method)
02-18 16:02:14.375: E/AndroidRuntime(737): Caused by: java.lang.reflect.InvocationTargetException
02-18 16:02:14.375: E/AndroidRuntime(737):  at com.my.zproject.Work.addtab(Work.java:169)
02-18 16:02:14.375: E/AndroidRuntime(737):  at java.lang.reflect.Method.invokeNative(Native Method)
02-18 16:02:14.375: E/AndroidRuntime(737):  at java.lang.reflect.Method.invoke(Method.java:521)
02-18 16:02:14.375: E/AndroidRuntime(737):  at android.view.View$1.onClick(View.java:2067)
02-18 16:02:14.375: E/AndroidRuntime(737):  ... 11 more
02-18 16:02:14.375: E/AndroidRuntime(737): Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
02-18 16:02:14.375: E/AndroidRuntime(737):  at android.view.ViewGroup.addViewInner(ViewGroup.java:1970) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-06T07:12:07.090

将 FragmentPagerAdapter 中的 getPagetitle 方法覆盖为，

```
 @Override
public CharSequence getPageTitle(int position) {
    return myFragmentTitleList.get(position);
} 
```

其中 myFragmentTitleList 是您的标题数组列表。

# javascript - 在切换 div 中单击控件时隐藏切换 div

> ID：14933543
> 
> 赞同：0
> 
> 时间：2013-02-18T09:56:05.343
> 
> 标签：javascript, asp.net

我在页面中使用切换 div。我有一个文本框和一个下拉列表。

```
 <div class="Search" style="display: none" >
  <table width="100%" style="border: 1px solid #fff; border-radius:5px;padding:15px">
   <tr>
    <td width="60px">دسته بندی</td>
    <td>
     <asp:DropDownList ID="CategoryDropDownList" runat="server" />
    </td>
   </tr>
   <tr>
    <td>کلمه کلیدی</td>
    <td>
     <asp:TextBox ID="SearchTextBox" runat="server" Width="95%" />
    </td>
    <td><asp:ImageButton runat="server" ID="SerachButton"  ImageUrl="~/images/btnSearchIcon.png" OnClick="SerachButton_Click"  ValidationGroup="Search" /></td>
    </tr>
  </table>
 </div> 
```

单击页面上的任何位置时，我将其隐藏。

```
<script type="text/javascript">
     $(document).ready(function () {
         $('#showSreachDiv').click(function (evt) {
             $(".Search").toggle("slow");
             evt.stopPropagation();
         });

         $(document).click(function () {
             var $el = $(".Search");

             // toggle div
             if ($el.is(":visible")) {
                 // fade out
                 $(".Search").toggle("slow");
             }
         });
     });

</script> 
```

但是当我在切换 div 中单击控件时，将其隐藏。

我想在文本框中插入文本，但不这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:11:44.187

试试这个例子：

```
<script type="text/javascript" language="javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function () {
    $('#showSreachDiv').toggle(function (evt) {
         $(".Search").toggle("slow");
     }, function(evt){
         $(".Search").toggle("slow");
     }
    );
});
</script>
<a href="#" id="showSreachDiv">Toggle</a>
<div class="search" style="border:solid 2px #CCC;display:none;">
<h1>//Your Work Here...</h1>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:33:11.673

您可以检查`document.click`单击的元素是否是搜索的子元素`DIV`，在这种情况下，取消单击处理程序：

```
$(document).click(function (evt) {
    if ($(evt.target).parents('.Search').length > 0) return;
    // put original code here ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:00:40.607

尝试这个：

```
$(document).ready(function () {
    $('#showSreachDiv').toggle(function (evt) {
         $(".Search").fadeout("slow");
     }, function(evt){
         $(".Search").fadein("slow");
     }
    );
} 
```

# ios - 如何在 iOS 上使用 facebook sdk 3.1 在 facebook 上上传视频

> ID：14933550
> 
> 赞同：0
> 
> 时间：2013-02-18T09:56:30.253
> 
> 标签：ios, objective-c, xcode, facebook

我已成功登录，但当我使用 Facebook SDK 3.1 在 Facebook 上上传视频时无法上传，请告诉我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:04:15.350

我能够通过 Facebook graph API 将视频上传到 Facebook，请检查：

[http://developers.facebook.com/blog/post/2011/08/04/how-to--use-the-graph-api-to-upload-a-video--ios/](http://developers.facebook.com/blog/post/2011/08/04/how-to--use-the-graph-api-to-upload-a-video--ios/)

# jquery - 如何在jplayer中添加播放列表

> ID：14933554
> 
> 赞同：3
> 
> 时间：2013-02-18T09:56:49.283
> 
> 标签：jquery, jquery-ui, jquery-plugins, jplayer

下面是播放 mp3 音频文件的代码。我只能播放一个文件，但我需要播放多个文件，我的意思是像一个播放列表。所以，请帮帮我。它是一个 jplayer。

谢谢你

```
$(document).ready(function(){

$("#jquery_jplayer_1").jPlayer({
    ready: function () {
        $(this).jPlayer("setMedia", {
            mp3: "media/test.mp3",

        }).jPlayer("play"); // auto play
    },
    ended: function (event) {
        $(this).jPlayer("play");
    },
    swfPath: "swf",
    supplied: "mp3"
})
.bind($.jPlayer.event.play, function() { // pause other instances of player when current one play
        $(this).jPlayer("pauseOthers");
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-03-15T15:17:25.180

请查看[jPlayer Jukebox 插件](https://www.gyrocode.com/projects/jplayer-jukebox/)。它基于[jPlayer 播放列表插件，](http://www.jplayer.org/latest/demo-02-jPlayerPlaylist/)但添加了额外的功能，例如扫描页面以查找媒体链接并使它们可播放的能力。

![jPlayer Jukebox 插件](../Images/12a6833da85efec048422d8936596bb8.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T09:22:42.227

嘿，您可以执行以下操作。

我在页面加载时实例化播放器：

```
jQuery("#jquery_jplayer_1").jPlayer({
  swfPath: "http://www.jplayer.org/latest/js/Jplayer.swf",
  supplied: "mp3",
  wmode: "window",
  preload:"auto",
  autoPlay: true,
  errorAlerts:false,
  warningAlerts:false
}); 
```

然后在每个项目都是唯一的侦听器中，您需要： A) 获取轨道名称/URL，我想您应该能够弄清楚这一点。

B) 将轨道传递给 setMedia

```
jQuery("#jquery_jplayer_1").jPlayer("setMedia", {
  mp3: "http:xxxx.rackcdn.com/"+track+".MP3"
}); 
```

C) 播放曲目

```
jQuery("#jquery_jplayer_1").jPlayer("play"); 
```

要获取曲目 ID，您需要在可播放项目上安装侦听器（可能是可播放类？）并从该项目中获取曲目。

# java - Java继承覆盖实例变量

> ID：14933555
> 
> 赞同：11
> 
> 时间：2013-02-18T09:56:55.420
> 
> 标签：java, oop

我正在学习java。我对继承有疑问。当子类扩展父类并且父类具有引用父类中声明的实例变量的方法时。但是子类 dint 覆盖了这个方法，并声明了与父类同名的实例变量。在这种情况下，将引用来自子级的实例变量或将引用父级。下面是代码片段

```
class Parent {
    int a;
    Parent() {
        System.out.println("in Parent");
        a = 10;
    }
    void method() {
        System.out.println(a);
    }
}
class Child extends Parent {
    int a;
    Child() {
        System.out.println("in Child");
        a = 11;
    }
}

public class Test {
    public static void main(String args[]) throws IOException {
        Parent p1 = new Child();
        p1.method();
    }
} 
```

我得到的输出是

10
岁的父母

有人可以让我理解为什么它引用父类的实例变量`a`而不是子类的`a`.

另一个疑问是，我理解隐藏方法，当父类和子类中有静态方法时也声明了具有相同签名的静态方法。这里隐藏意味着什么？什么方法被隐藏了？如果它是父方法，你能解释一下吗？
提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-18T10:05:29.353

1.  Java 实例变量不能在子类中被覆盖。Java 继承不是那样工作的。

2.  在您的示例中，没有方法隐藏（或覆盖或重载）正在进行。

3.  虽然隐藏了实例变量。在类`child`中， 的声明`a`隐藏了`a`in的声明`parent`，并且类中所有的引用都指向`a`了not 。`child``child.a``parent.a`

为了更清楚地说明这一点，请尝试运行：

```
public static void main(String args[]) throws IOException {
    child c1 = new child();
    parent p1 = c1;

    System.out.println("p1.a is " + p1.a);
    System.out.println("c1.a is " + c1.a);
    System.out.println("p1 == c1 is " + (p1 == c1));
} 
```

它应该输出：

```
 p1.a is 10
    c1.a is 11
    p1 == c1 is true 
```

这表明有一个对象具有两个名为`a`... 的不同字段，如果访问权限允许，您可以获取它们的两个值。

* * *

最后，您应该学会遵循标准的 Java 标识符约定。类名应始终以大写字母开头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T10:04:52.117

`Instance variables are not overriden in sub-class`. 如果你在你的类中定义了一个与你的超类同名**的变量，它被称为变量的阴影** `inheritance and polymorphism`不适用于实例变量。如果您在父类中定义 method() 并在子类中覆盖它。由于运行时多态性打印**11 ，下面将调用 Child 的方法（）**

```
 parent p1 = new child(); 
```

1.  调用子构造函数
2.  使用 super() 调用调用父级的构造函数
3.  打印“在父级中”并将父级的 a 初始化为 10
4.  print's in child 并将 Childs a 初始化为 11

    ```
     p1.method();// this invokes Child's method() during run-time 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T10:11:17.310

当你这样做时

父 P1=new Child();

JVM 所做的是

```
 first  Initialize Parent()

                         ||

               second Initialize Child() 
```

因此，首先调用 Parent 构造函数，然后调用 child's ，但输出值将是 11 ，因为 p1 指的是 child 的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T10:16:38.397

由于您没有在子类中覆盖 method() ，因此当声明时，

```
parent p1 = new child(); 
```

执行时，method() 的父版本将被执行，并且父类唯一知道的值是它自己的 a。因此它将打印 a=10 （因为它当时在堆栈上）。

最后，您只是将变量 a 从父类隐藏到子类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T10:05:54.380

问题是您创建了一个子实例并将其存储在父实例的引用中。因此，当您访问对象的属性时，JVM 会引用父级的变量值。

如果它是子类的引用变量，您将收到子类的变量值。

以上是Java的一个特性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T10:08:01.600

在创建父实例时。所以在运行时编译器调用父对象，试试下面的代码。

```
public static void main(String args[]) throws IOException {
    child c1 = new child();
    c1.method();
} 
```

# javascript - javascript：删除对运行代码的引用

> ID：14933556
> 
> 赞同：2
> 
> 时间：2013-02-18T09:57:06.193
> 
> 标签：javascript, reference

我只是想知道当你执行这样的代码时是否有任何风险：

```
window.doSomething = function() {
   window.doSomething = null;

   // do some stuff here
} 
```

这会一直运行良好，还是可能存在垃圾收集器在它仍在运行时清理它的情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T09:58:22.683

```
window.doSomething = null ; 
```

这只会删除之前引用您的函数的`doSomething`属性`window`。

您当前所在的函数将运行到最后，因为进入该函数会增加引用计数，从而防止它被过早销毁。

该功能完成后，将被安排进行垃圾回收。

# javascript - 用于货币的 Javascript 正则表达式

> ID：14933561
> 
> 赞同：1
> 
> 时间：2013-02-18T09:57:17.960
> 
> 标签：javascript, regex

我只想传递适当的货币金额，例如 22.22、465.56、1424242.88

我一直在使用这个正则表达式：

```
[0-9]+\.[0-9][0-9](?:[^0-9a-zA-Z\s\S\D]|$) 
```

但它允许使用诸如 £25.55 之类的符号。如何仅强制使用正确货币格式的数字？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:02:01.460

听起来您只是没有在正则表达式上提供锚点，而且您还没有逃脱`.`. 例如它应该是：

```
var currencyNumbersOnly = /^\d+\.\d{2}$/; 
```

分解：

*   `^`字符串的开始。

*   `\d`一个数字 (0-9)。

*   `+`一个或多个先前的实体（因此`\d+`意味着“一个或多个数字”）。

*   `\.`字面小数点。请注意，某些文化使用`,`而不是`.`！

*   `\d{2}`正好两位数。

*   `$`字符串结束。

这不是非常严格。例如，它允许`0000000.00`. 它也不允许`2`（`2.00`改为要求）。另请注意，即使在谈论货币数字时，我们也不总是只下降到数百个。例如，银行汇率可能会持续到小数点右边的几个位。（例如，xe.com 现在说 1 美元 = 0.646065 英镑）。

正如杰克在对该问题的评论中指出的那样，您可能希望允许负数，因此在后面加上一个`-?`（0 或 1 个`-`字符）`^`可能是合适的：

```
var currencyNumbersOnly = /^-?\d+\.\d{2}$/; 
```

* * *

**更新**：现在我可以看到您的完整正则表达式，您可能想要：

```
var currencyNumbersOnly = /^\d+\.\d{2}(?:[^0-9a-zA-Z\s\S\D]|$)/; 
```

I'm not sure what you're doing with that bit at the end, especially as it *seems* to say (amongst other things) that you allow a single character as long as it isn't `0-9` **and** as long as it isn't `\D`. As `\D` means "not `0-9`", it's hard to see how something could match that. (And similarly the `\s` and `\S` in there.)

# html - HTML 表格上的 Tab 键行为

> ID：14933568
> 
> 赞同：1
> 
> 时间：2013-02-18T09:57:45.967
> 
> 标签：html, browser, html-table, focus

我有一个 5 行 5 列的 HTML 表。现在，当用户开始填写数据并希望从一个单元格导航到另一个单元格时，他们单击选项卡并且光标水平移动。

我想垂直移动而不是水平移动。如下图所示。这非常棘手，因为我们要覆盖基本操作系统？浏览器功能。

![在此处输入图像描述](../Images/9530b2156eeee33577b59ba5cebe08b7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:25:02.407

全局属性[`tabindex`](http://www.w3.org/TR/html5/editing.html#attr-tabindex)：

> content 属性允许作者`tabindex`控制一个元素是否应该是可聚焦的，它是否应该可以使用顺序焦点导航来访问，以及**为了顺序焦点导航的目的，元素的相对顺序是什么**。

该值必须是整数（您需要大于 0 的值；有关详细信息，请参阅链接的规范）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:12:45.897

一种方法是使用 javascript onkeypress 事件，然后将下一个单元格向下聚焦。`onkeypress="if(event.keycode == 8) {document.getElementById('NEXT CELL DOWN').focus()"}`在此示例中，8 是选项卡键码。NEXT CELL DOWN 可以为每个单元进行硬编码，或者您可以使用基于当前单元 ID 的算法将其移动到下一个单元 ID。例如，如果在单元格 1 上按下选项卡，则下一个单元格可能是 cell1++。那有意义吗？

# python - Lorentzian scipy.optimize.leastsq 适合数据失败

> ID：14933569
> 
> 赞同：8
> 
> 时间：2013-02-18T09:57:45.997
> 
> 标签：python, numpy, scipy, least-squares, data-fitting

自从我上过关于 Python 的讲座以来，我想用它来拟合我的数据。尽管我已经尝试了一段时间，但我仍然不知道为什么这不起作用。

## 我想做什么

从子文件夹（此处称为“测试”）中获取一个接一个的数据文件，稍微转换数据并使其与洛伦兹函数相匹配。

## 问题描述

当我运行下面发布的代码时，它不适合任何东西，只是在 4 次函数调用后返回我的初始参数。我尝试缩放数据，`ftol`反复`maxfev`检查 python 文档，但没有任何改进。我还尝试将列表更改为`numpy.arrays`明确，以及为问题[scipy.optimize.leastsq 返回最佳猜测参数而不是新的最佳拟合](https://stackoverflow.com/q/12473406/2062965)给出的解决方案`x = x.astype(np.float64)`。没提升。奇怪的是，对于少数选定的数据文件，相同的代码在某些时候可以工作，但对于大多数人来说，它从来没有。它绝对可以拟合，因为 Levenberg-Marquard 拟合程序在 Origin 中给出了相当好的结果。

有人可以告诉我出了什么问题或指出替代方案...？

```
import numpy,math,scipy,pylab
from scipy.optimize import leastsq
import glob,os
for files in glob.glob("*.txt"):
    x=[]
    y=[]
    z=[]
    f = open(files, 'r')
    raw=f.readlines()
    f.close()
    del raw[0:8]       #delete Header
    for columns in ( raw2.strip().split() for raw2 in raw ):  #data columns
        x.append(float(columns[0]))
        y.append(float(columns[1]))
        z.append(10**(float(columns[1])*0.1)) #transform data for the fit
    def lorentz(p,x):
        return (1/(1+(x/p[0] - 1)**4*p[1]**2))*p[2]
    def errorfunc(p,x,z):
        return lorentz(p,x)-z

    p0=[3.,10000.,0.001]

    Params,cov_x,infodict,mesg,ier = leastsq(errorfunc,p0,args=(x,z),full_output=True)
    print Params
    print ier 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-28T18:25:58.200

如果不查看您的数据，就很难判断出了什么问题。我产生了一些随机噪音，并使用您的代码对其进行了拟合。一切正常。该算法不允许参数边界，因此如果您`p0`接近于零，您可能会遇到问题。我做了以下事情：

```
import numpy as np
from scipy.optimize import leastsq
import matplotlib.pyplot as plt

def lorentz(p,x):
    return p[2] / (1.0 + (x / p[0] - 1.0)**4 * p[1]**2)

def errorfunc(p,x,z):
        return lorentz(p,x)-z

p = np.array([0.5, 0.25, 1.0], dtype=np.double)
x = np.linspace(-1.5, 2.5, num=30, endpoint=True)
noise = np.random.randn(30) * 0.05
z = lorentz(p,x)
noisyz = z + noise

p0 = np.array([-2.0, -4.0, 6.8], dtype=np.double) #Initial guess
solp, ier = leastsq(errorfunc, 
                    p0, 
                    args=(x,noisyz),
                    Dfun=None,
                    full_output=False,
                    ftol=1e-9,
                    xtol=1e-9,
                    maxfev=100000,
                    epsfcn=1e-10,
                    factor=0.1)

plt.plot(x, z, 'k-', linewidth=1.5, alpha=0.6, label='Theoretical')
plt.scatter(x, noisyz, c='r', marker='+', color='r', label='Measured Data')
plt.plot(x, lorentz(solp,x), 'g--', linewidth=2, label='leastsq fit')
plt.xlim((-1.5, 2.5))
plt.ylim((0.0, 1.2))
plt.grid(which='major')
plt.legend(loc=8)
plt.show() 
```

这产生了一个解决方案：
`solp = array([ 0.51779002, 0.26727697, 1.02946179])`
接近理论值：
`np.array([0.5, 0.25, 1.0])` ![在此处输入图像描述](../Images/ea66733fbd69310d48d1030dd2f71c74.png)

# python - 交换 Numpy 数组的切片

> ID：14933577
> 
> 赞同：36
> 
> 时间：2013-02-18T09:58:13.293
> 
> 标签：python, multidimensional-array, numpy, swap

我喜欢 python 处理变量交换的方式： `a, b, = b, a`

我也想使用这个功能在数组之间交换值，不仅是一次一个，而且是多个（不使用临时变量）。这不是我所期望的（我希望沿第三维的两个条目都可以交换）：

```
import numpy as np
a = np.random.randint(0, 10, (2, 3,3))
b = np.random.randint(0, 10, (2, 5,5))
# display before
a[:,0, 0]
b[:,0,0]
a[:,0,0], b[:, 0, 0] = b[:, 0, 0], a[:,0,0] #swap
# display after
a[:,0, 0]
b[:,0,0] 
```

有人有想法吗？当然，我总是可以引入一个额外的变量，但我想知道是否有更优雅的方法来做到这一点。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-18T10:18:31.150

Python 正确地解释了代码，就好像你使用了额外的变量一样，所以交换代码相当于：

```
t1 = b[:,0,0]
t2 = a[:,0,0]
a[:,0,0] = t1
b[:,0,0] = t2 
```

但是，即使*此*代码也不能正确交换值！这是因为 Numpy[切片](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#basic-slicing)不会急切地复制数据，它们会在现有数据中创建视图。仅在分配切片时执行复制，但在交换时，没有中间缓冲区的复制会破坏您的数据。这就是为什么您不仅需要一个额外的变量，还需要一个额外的 numpy 缓冲区，这是一般 Python 语法一无所知的原因。例如，这按预期工作：

```
t = np.copy(a[:,0,0])
a[:,0,0] = b[:,0,0]
b[:,0,0] = t 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-10-27T07:23:01.193

我觉得这是最简单的：

```
a[:,0,0], b[:, 0, 0] = b[:, 0, 0], a[:, 0, 0].copy() #swap 
```

时间比较：

```
%timeit a[:,0,0], b[:, 0, 0] = b[:, 0, 0], a[:, 0, 0].copy() #swap
The slowest run took 10.79 times longer than the fastest. This could mean that an intermediate result is being cached 
1000000 loops, best of 3: 1.75 µs per loop

%timeit t = np.copy(a[:,0,0]); a[:,0,0] = b[:,0,0]; b[:,0,0] = t
The slowest run took 10.88 times longer than the fastest. This could mean that an intermediate result is being cached 
100000 loops, best of 3: 2.68 µs per loop 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-11T13:43:52.577

[user4815162342 的答案](https://stackoverflow.com/a/14933939/2858145)确实是“正确”的答案。但如果你真的追求单线，那么考虑一下：

```
a[arange(2),0,0], b[arange(2), 0, 0] = b[arange(2), 0, 0], a[arange(2),0,0] #swap 
```

然而，这明显降低了效率：

```
In [12]: %timeit a[arange(2),0,0], b[arange(2), 0, 0] = b[arange(2), 0, 0], a[arange(2),0,0]
10000 loops, best of 3: 32.2 µs per loop

In [13]: %timeit t = np.copy(a[:,0,0]); a[:,0,0] = b[:,0,0]; b[:,0,0] = t
The slowest run took 4.14 times longer than the fastest. This could mean that an intermediate result is being cached 
100000 loops, best of 3: 13.3 µs per loop 
```

（但请注意关于“最慢运行”的注释...如果您尝试使用“-n 1 -r 1”调用 %timeit，您将看到更多可比较的结果 - 尽管我的解决方案仍然慢了约 50% - 演示是的，缓存正在影响时间）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-07-02T07:40:01.623

这将起作用。

```
a[:,0,0], b[:, 0, 0] = b[:, 0, 0].copy(), a[:, 0, 0].copy() 
```

# mysql - 存储过程需要很长时间才能执行？

> ID：14933581
> 
> 赞同：0
> 
> 时间：2013-02-18T09:58:25.930
> 
> 标签：mysql, stored-procedures, query-optimization

```
DELIMITER $$

CREATE PROCEDURE Load_Fact_List()

BEGIN

  DECLARE Project_Number_Temp INT;
  DECLARE Panel_Id_Temp INT;
  DECLARE Employee_Id_Temp INT;
  DECLARE Zip_Temp VARCHAR(255);
  DECLARE Created_Date_Temp DATE;
  DECLARE Country_Temp VARCHAR(255);

  DECLARE no_more_rows BOOLEAN;
  DECLARE loop_cntr INT DEFAULT 0;
  DECLARE num_rows INT DEFAULT 0;

  DECLARE   load_cur    CURSOR FOR
SELECT  Project_Id, Panel_Id, Employee_Id, Zip, Created_Date
    FROM  Fact_List;

  DECLARE CONTINUE HANDLER FOR NOT FOUND
    SET no_more_rows = TRUE;

  OPEN load_cur;
  select FOUND_ROWS() into num_rows;

  the_loop: LOOP

    FETCH  load_cur
    INTO   Project_Number_Temp, Panel_Id_Temp, Employee_Id_Temp, Zip_Temp, Created_Date_Temp;

    IF no_more_rows THEN
        CLOSE load_cur;
        LEAVE the_loop;
    END IF;

SET Country_Temp= (select Country from Zip where Zip= Zip_Temp);

INSERT INTO Test_Fact
(   
        Project_Key, 
        Campaign_Key, 
        Respondents_Key, 
        Event_Key, 
        Employee_Key, 
        Geography_Key, 
        Date_Key    
)

SELECT (SELECT Project_Key from Project_Dim where Project_Id= Project_Number_Temp AND Quota_Country= Country_Temp),0,(SELECT MAX(Respondents_Key) from Respondents_Dim WHERE Panel_Id= Panel_Id_Temp),1,(select MAX(Employee_Key) from Employee_Dim WHERE Employee_Id= Employee_Id_Temp),(Select Geography_Key from Geography_Dim where Zip= Zip_Temp), (Select Date_Key from Date_Dim where Full_Date= Created_Date_Temp);

    SET loop_cntr = loop_cntr + 1;
  END LOOP the_loop;

  select num_rows, loop_cntr;

END $$ 
```

上面的代码可以正常工作，但是速度很慢。每 1 小时加载 1000 条记录。我缺少要加载到事实表中的记录。任何人都可以建议我进行任何优化吗？

要求是通过循环其他表并从维度表中收集所需的键值来加载事实表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:04:25.290

通常的程序实际上是这样的。

您已经构建了维度，并且您刚刚收集了要插入到临时表中的事实表中的数据。然后将此数据插入另一个临时表中，如下所示：

```
INSERT INTO tmp_fact_table
(
fact_key,
dim1_key,
dim2_key,
...
fact1,
fact2
...
)
SELECT 
ISNULL (f.fact_key, 0),
ISNULL (d1.sid, 0) as whatever,
ISNULL (d2.sid, 0) as whatever2,
...
ISNULL (tt.fact1, 0),
ISNULL (tt.fact2, 0)
FROM
yourTempTable tt 
LEFT JOIN Dim1 d1 ON tt.identifying_column = d1.identifying_column
...
LEFT JOIN fact_table f ON 
f.dim1_key = d1.sid
AND f.dim2_key = d2.sid 
```

在哪里

*   fact_key 是事实表中的标识列
*   dim1_key 是事实表中维度的外键
*   fact1 等是你想要的事实表中的事实，明确
*   当没有找到条目时，ISNULL() 函数返回 0。0 是未知数据的每个维度中虚拟行的 id

然后，您将有一个表，其中您的维度 ID 链接到要导入事实表的数据，当事实表中的条目尚不存在时，以 0 作为事实键和事实表条目的 ID否则。

然后更新 tmp_fact_table.fact_key != 0 的事实表

然后插入到 tmp_fact_table.fact_key = 0 的事实表中

而已。

我正在使用数百万行执行此操作，大约需要半个小时。300,000 行是花生。

# google-app-engine - 如何在 Google App Engine 上实现定时器回调

> ID：14933582
> 
> 赞同：1
> 
> 时间：2013-02-18T09:58:29.757
> 
> 标签：google-app-engine

考虑在 Google App Engine 上实现扑克。假设玩家只有 10 秒时间过牌/弃牌/加注。

也就是说，如果 10 秒过去了，玩家没有响应，则应该触发一些计时器，该计时器执行写入 DataStore 的代码，声明玩家弃牌。在 Google App Engine 上实现此功能的惯用方式是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:37:30.777

GAE 有一个称为“任务”的功能。可悲的是，他们没有保证的解决方案，因此计划为 now+10 秒的任务可以在 10 秒或更*晚*的时间执行。

解决方案：将当前时间戳连同有关当前玩家的信息一起写入数据库。如果任何玩家请求有关当前游戏的更新信息，您可以检查此时间戳，将其与当前时间戳进行比较，从而确定这 10 秒是否已过并相应地更新数据库。

您可以将此解决方案与任务相结合，以确保即使没有人“观看”该游戏，它仍会在某个时候更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:20:27.250

这需要在后端完成，因为这是唯一可以在请求处理程序之外保留的代码。

*   玩家被处理。计时器在后端启动。定时器到期。玩家状态更新。

> 后端是特殊的 App Engine 实例，它们没有请求期限、更高的内存和 CPU 限制以及跨请求的持久状态。它们由 App Engine 自动启动，可以长时间连续运行。每个后端实例都有一个用于请求的唯一 URL，您可以跨多个实例对请求进行负载平衡。

[https://developers.google.com/appengine/docs/python/backends/](https://developers.google.com/appengine/docs/python/backends/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T11:09:15.387

无需同步操作 - 即在用户最后一次操作后 10 秒执行某些操作。

只需记录用户最后一次操作的时间，并在下次用户操作发生时采取相应措施：如果 <10s 让用户进行下一步操作，如果 >10s 通知用户他弃牌。

为了让事情更具响应性，例如向用户显示他在折叠前有多少时间，您还应该在客户端上跟踪这一点。

# python - 如何将 xlib 和 OpenGL 模块与 python 一起使用？

> ID：14933584
> 
> 赞同：9
> 
> 时间：2013-02-18T09:58:40.843
> 
> 标签：python, opengl, x11, xlib

我知道可以将 Xlib 和 OpenGL 与 GLX 一起使用（我自己用 C 语言完成了）。

问题是，我如何在 python 中做到这一点？该`OpenGL`模块具有 GLX 功能 [[文档](http://pyopengl.sourceforge.net/documentation/manual-3.0/index.xhtml#GLX)]，但它似乎使用 C 类型，我不知道（也不知道其他人似乎也不知道）如何将[xlib 类型](http://python-xlib.sourceforge.net/doc/html/python-xlib_15.html#SEC14)与 PyOpenGL 一起使用。

我也尝试`ctypes`直接使用和加载库，但在尝试使用 Xlib 头文件中定义的 C 宏时遇到了（明显的）问题，例如`DefaultRootWindow`.

我是否遗漏了一些明显的东西，比如 PyOpenGL 有自己的`xlib`实现，或者如果没有一些（编译的）模块编写，这是不可能的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T18:10:24.700

您不能直接将 python-xlib 类型与 python-opengl 一起使用。但是您可以使用窗口 XID 只是一个数字这一事实来在同一窗口上使用 python-opengl。

```
from Xlib import X, display
from OpenGL import GL, GLX
from OpenGL.raw._GLX import struct__XDisplay
from ctypes import *

# some python-xlib code...
pd = display.Display()
pw = pd.screen().root.create_window(50, 50, 200, 200, 0,
                                    pd.screen().root_depth,
                                    X.InputOutput, X.CopyFromParent)
pw.map()

# ensure that the XID is valid on the server
pd.sync()

# get the window XID
xid = pw.__resource__()

# a separate ctypes Display object for OpenGL.GLX
xlib = cdll.LoadLibrary('libX11.so')
xlib.XOpenDisplay.argtypes = [c_char_p]
xlib.XOpenDisplay.restype = POINTER(struct__XDisplay)
d = xlib.XOpenDisplay("")

# use GLX to create an OpenGL context on the same window XID
elements = c_int()
configs = GLX.glXChooseFBConfig(d, 0, None, byref(elements))
w = GLX.glXCreateWindow(d, configs[0], c_ulong(xid), None)
context = GLX.glXCreateNewContext(d, configs[0], GLX.GLX_RGBA_TYPE, None, True)
GLX.glXMakeContextCurrent(d, w, w, context)

# some python-opengl code....
GL.glShadeModel(GL.GL_FLAT)
GL.glClearColor(0.5, 0.5, 0.5, 1.0)

GL.glViewport(0, 0, 200, 200)
GL.glMatrixMode(GL.GL_PROJECTION)
GL.glLoadIdentity()
GL.glOrtho(-1.0, 1.0, -1.0, 1.0, -1.0, 1.0)

GL.glClear(GL.GL_COLOR_BUFFER_BIT)
GL.glColor3f(1.0, 1.0, 0.0)
GL.glRectf(-0.8, -0.8, 0.8, 0.8)

# assume we got a double buffered fbConfig and show what we drew
GLX.glXSwapBuffers(d, w)

# a terrible end to a terrible piece of code...
raw_input() 
```

不过这真的很可怕。（为清楚起见，省略了错误检查和选择合理的 fbConfig）

不过，确实应该可以使用 ctypes 进行所有必要的 xlib 调用。例如，Pyglet 以某种方式进行管理，但我不确定您遇到了什么具体问题。

# java - 用于日期扫描的 Java 库（如数字扫描仪）？

> ID：14933589
> 
> 赞同：0
> 
> 时间：2013-02-18T09:58:49.173
> 
> 标签：java, regex

*Scanner.class*提供了许多有用的工具来分析数字，例如可以触发特定特征的*.hasNext* _() 和*.next _() 方法。*

是这样的，对于 Date ：第一次是检测*字符串*中的日期，并适应格式的响应（*mm/dd/yy|dd/mm/yy|yyyymmdd*，里面是秒，是字母里面，是四位数年份，是负数...）。

*编辑回复*

*   扫描仪提供的超出了`SimpleDateFormat`它所能返回的范围`MatchResult`，并且一切都已经完成（并经过测试），这样的工作是否已经完成，或者我要开发它（重新发明轮子？）
*   JC 期间之前的负日期
*   mm/dd/yy 来自英语，dd/mm/yy 来自其他欧洲，yyyymmdd 来自操作系统，因此找到这些差异会给出不同的应用响应。

*编辑2*

日历是一个漂亮的工具，只要知道是否有人已经添加了上面的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:28:22.750

看看[Natty](http://natty.joestelmach.com/)图书馆。它太酷了。它可以解析不同类型的日期，包括“今天”“明天”“下周五”。缺点是您无法真正自定义它。它具有用于解析日期的预定义规则，如果您想添加/修改它们，您必须获取源代码，然后编译您自己的 natty 版本。

# function - 带有引用游标的postgresql中的函数

> ID：14933591
> 
> 赞同：0
> 
> 时间：2013-02-18T09:58:56.380
> 
> 标签：function, postgresql

我试图将 oracle 过程迁移到 postgresql 函数。这是 postgres 中的函数：

```
CREATE OR REPLACE FUNCTION tibrptsassure.call_reasons(i_start_date date, i_end_date date, i_intnbr character varying, i_intmodnbr character varying, oc_ref_cursor refcursor)
  RETURNS refcursor AS
$BODY$
BEGIN
      OPEN oc_ref_cursor FOR 
      SELECT COUNT(1),INTERACTION_NBR,INTERACTION_ID,INTERACTION_MODULE_NBR,CREATED_BY
      FROM tibrptsassure.d_tcare_interaction , tibrptsassure.d_calendar d
      WHERE INTERACTION_ID = i_intnbr
      AND INTERACTION_MODULE_NBR = i_intmodnbr AND INTERACTION_DATE BETWEEN i_start_date AND i_end_date
      AND INTERACTION_DATE BETWEEN d.week_start_date AND d.week_end_date
      GROUP BY INTERACTION_NBR;
return oc_ref_cursor;  
END;
$BODY$
LANGUAGE plpgsql VOLATILE 
```

但是，在执行这个函数时，我没有得到任何输出。收到一条消息：丢弃 1 行的查询结果。

```
begin;
select tibrptsassure.sampleproc_call('10-Feb-2010','31-Dec-2013','30681','Bypass_IDV','funccursor');
FETCH ALL IN "funccursor" ;
COMMIT; 
```

查询有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T04:29:29.257

这是 pgAdmin 和多语句事务的问题。请改用 psql。

基本上 pgAdmin 不知道此时该做什么，因此它会丢弃该行，并且您不能在这样的环境之外使用游标。

# ios - AVPlayer 状态始终 AVPlayerStatusReadyToPlay

> ID：14933592
> 
> 赞同：14
> 
> 时间：2013-02-18T09:58:57.133
> 
> 标签：ios, objective-c, xcode, avplayer

我正在使用 AVPlayer 从 URL 播放音频

在 ViewDidLoad 中：

```
self.playerItem = [AVPlayerItem playerItemWithURL:[NSURL URLWithString:imageText]];

self.player = [AVPlayer playerWithPlayerItem:playerItem];

[player addObserver:self forKeyPath:@"status" options:0 context:nil];

[player play]; 
```

**观察者**

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object
                        change:(NSDictionary *)change context:(void *)context {
    if (object == player && [keyPath isEqualToString:@"status"]) {
        if (player.status == AVPlayerStatusReadyToPlay) {
            //[playingLbl setText:@"Playing Audio"];
            NSLog(@"fineee");
            [playBtn setEnabled:YES];
        } else if (player.status == AVPlayerStatusFailed) {
            // something went wrong. player.error should contain some information
            NSLog(@"not fineee");
            NSLog(@"%@",player.error);

        }
        else if (player.status == AVPlayerItemStatusUnknown) {
            NSLog(@"AVPlayer Unknown");

        }
    }
} 
```

但是播放器有时会卡住并且不播放音频，但状态也是 AVPlayerStatusReadyToPlay。它永远不会进入 AVPlayerStatusFailed 或 AVPlayerItemStatusUnknown 内部。因为我想处理 AVPlayer 的错误，它也必须进入这些内部。请帮忙！！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-26T10:19:40.510

您应该观察 CurrentItem 的状态。AVPlayer 因 AVPlayerItem 失败而失败，如果出现任何问题，则从 AVPlayerItem 开始，然后是 AVPlayer。

尝试：

```
[item addObserver:self forKeyPath:@"status" options:NSKeyValueObservingOptionNew context:nil]; 
```

在你的 observeValueForKeyPath 中：

```
if (object == audioPlayer.currentItem && [keyPath isEqualToString:@"status"]) {
    if (audioPlayer.currentItem.status == AVPlayerItemStatusFailed) {
        NSLog(@"------player item failed:%@",audioPlayer.currentItem.error);
    }
} 
```

你可以看看 AVPlayer 的处理方式，或者直接从我的开源项目[HysteriaPlayer中使用它。](https://github.com/StreetVoice/HysteriaPlayer)

# ios - 无法在我的 UITableview 中加载 2 个 NSMutable 数组

> ID：14933598
> 
> 赞同：0
> 
> 时间：2013-02-18T09:59:50.280
> 
> 标签：ios, uitableview, uiscrollview, nsmutablearray, subview

我的应用程序添加了一个滚动视图和一个表视图作为子视图。在滚动视图上我有两个按钮。我想在按下这些按钮时在我的表格视图中加载两个单独的数组。但由于某种原因，它不会发生。谁能帮助我我做错了什么？

```
- (void)viewDidLoad
{
    [super viewDidLoad];
worldArray=[[NSMutableArray alloc]initWithObjects:@"1",@"2",@"3",nil];
IndiaArray=[[NSMutableArray alloc]initWithObjects:@"abc",@"pqr",@"xyz", nil];
 [self PutButtoninScrollView:2];
}

-(void)PutButtoninScrollView:(int)numberOfbuttons
{
    myButton1=[[UIButton alloc]init];
    myButton1= [UIButton buttonWithType:UIButtonTypeCustom];
    myButton1.frame=CGRectMake(5, 5, 70, 30);
    [myButton1 setTitle:@"World" forState:UIControlStateNormal];
    [myButton1 setTag:1];
    myButton1.backgroundColor=[UIColor blackColor];
    [myButton1 addTarget:self action:@selector(ListViewAction:) forControlEvents:UIControlEventTouchUpInside];
    [self.myScrollView addSubview:myButton1];

    myButton2=[[UIButton alloc]init];
    myButton2= [UIButton buttonWithType:UIButtonTypeRoundedRect];
    myButton2.frame=CGRectMake(80, 5, 70, 30);
    [myButton2 setTitle:@"India" forState:UIControlStateNormal];
    [myButton2 addTarget:self action:@selector(ListViewAction:) forControlEvents:UIControlEventTouchUpInside];
    [self.myScrollView addSubview:myButton2];

 [self.myScrollView setContentSize:CGSizeMake(160, 35)];
    _myScrollView.backgroundColor=[UIColor redColor];
    [self.view addSubview:self.myScrollView];
}

-(void)ListViewAction:(id)sender
{

    if ([[sender currentTitle] isEqualToString:@"World"])
    {
        NSLog(@"successful ");            
        [tempArray addObject: worldArray];
    }
    else if ([[sender currentTitle] isEqualToString:@"India"])
    {
         NSLog(@"successful again");
        [tempArray addObject: IndiaArray];
    }
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [tempArray count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier=@"cell";
    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if(cell==nil)
    {
        cell=[[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier]autorelease];
        cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;
    }

    cell.textLabel.text=[tempArray objectAtIndex:indexPath.row];

    return cell;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    DetailViewController *detailViewCont=[[DetailViewController alloc]initWithNibName:@"DetailViewController" bundle:nil];
    [self presentViewController:detailViewCont animated:YES completion:nil];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:09:27.327

尝试使用下面的代码

在.h

```
NSMutableArray *tempArray;
NSMutableArray *worldArray;
NSMutableArray *IndiaArray; 
```

米

```
 - (void)viewDidLoad
 {
   [super viewDidLoad];

   tempArray = [NSMutableArray alloc]init];
   worldArray=[[NSMutableArray alloc]initWithObjects:@"1",@"2",@"3",nil];
   IndiaArray=[[NSMutableArray alloc]initWithObjects:@"abc",@"pqr",@"xyz", nil];
   [self PutButtoninScrollView:2];
  }

-(void)ListViewAction:(id)sender
 {

     if ([[sender currentTitle] isEqualToString:@"World"])
      {
        [tempArray removeAllObjects];
        [tempArray addObjectsFromArray:worldArray];

      }
    else if ([[sender currentTitle] isEqualToString:@"India"])
     {
        [tempArray removeAllObjects];
        [tempArray addObjectsFromArray: IndiaArray];
     }

  [yourTableView reloadData];
} 
```

# php - 在一个事务中执行 ActiveRecords 的两种不同方法

> ID：14933600
> 
> 赞同：0
> 
> 时间：2013-02-18T09:59:52.200
> 
> 标签：php, activerecord, yii, transactionscope

有没有办法为活动记录方法定义事务？我有两个名为 Answer 和 QuizMark 的 activeRecords，它们有两个方法。我想说服务器将它们作为 trasaction 执行。这是我的代码：

```
public function actionChangeAnswersStatus($formId, $userId) {
        if (isset($formId) && isset($userId)) {
            Answer::changeIgnoreStatus($formId, $userId);
            QuizMark::changeIgnoreStatus($formId, $userId);
            echo 'quizes';
        }
    } 
```

有没有可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:58:58.417

尝试：

```
$connection = $this->connectDb();
$transaction = $connection->beginTransaction();

// You commands

$transaction->commit();

// Note: if an error occurs, call rollBack...

$transaction->rollBack(); 
```

# javascript - 一对一

> ID：14933607
> 
> 赞同：0
> 
> 时间：2013-02-18T10:00:01.470
> 
> 标签：javascript, jquery, html

我有这样的代码：

```
$(this).each(function() {
    parse('button', $(this));
}); 
```

是否可以最小`each()`化为一行？

此代码不起作用：

```
$(this).each(parse('button', $(this))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:05:24.227

只是这个：

```
parse('button', $(this));
//----------------^^^^----your selector group either with classname or tagName 
```

## 更新：

看看你有没有这个html：

```
<a href='#'>test link</a><br/>
<a href='#'>test link</a><br/>
<a href='#'>test link</a><br/>
<a href='#'>test link</a><br/> 
```

这是jQuery：

```
function parseIt(b, a){
  return $(a).text(b);
}

$(function(){
   parseIt('New Text for Buttons', $('a'));
}); 
```

结果将是：http: [//jsfiddle.net/svwF9/](http://jsfiddle.net/svwF9/)

```
<a href='#'>New Text for Buttons</a><br/>
<a href='#'>New Text for Buttons</a><br/>
<a href='#'>New Text for Buttons</a><br/>
<a href='#'>New Text for Buttons</a><br/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:01:56.837

Javascript 不是基于行的，因此您可以在一行中有多个语句。你不能用函数调用替换函数引用，你仍然需要那部分代码：

```
$(this).each(function() { parse('button', $(this)); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:09:12.023

如果这是一个很大的问题，为什么不改变`parse`以适应`.each()`回调中的参数呢？像这样的东西。

```
$(this).each(parse);

function parse(index, element) {
    var e = $(element);
    var type = e.prop('tagName').toLower();

    if(type == 'button') { 
        // parse button
    }
} 
```

# wpf - 来自一个 ListView 的 WPF SelectedItem 并在另一个 LsitView 中显示关系数据

> ID：14933612
> 
> 赞同：2
> 
> 时间：2013-02-18T10:00:11.737
> 
> 标签：wpf, entity-framework, listview, data-binding, mvvm

我正在创建一个 WPF 应用程序，允许用户使用`CRUD`操作使用`Entity Framework`（也使用存储库模式）输入详细信息。

到目前为止，我已经创建了一个允许用户进入*Prospect*客户端的应用程序。我可以编辑这个*Prospect*，添加一个新的并且能够轻松删除。

这个*Prospect*虽然`Foreign Key`在另一个名为*ProspectMeeting*的表中有一个关系，`ProspectID`从*Prospect*表中获取。

当我从中获取`Select`Prospect*时*`ListView`，它不会显示所选*Prospect*的数据。

下图是应用程序当前状态的图像 - 所以希望能更好地理解我想要实现的目标。

![在此处输入图像描述](../Images/d3848e763f564c8cd6cf2be663c3a336.png)

在我的存储库中，我使用它来`List`使用ProspectID 获取*ProspectMeetings*；

```
 public List<ProspectMeeting> GetMeetingByProspect(int _ProspectID)
    {
        using (var context = new DBEntities())
        {
            return context.Prospects.First(i => i.ProspectID == _ProspectID).ProspectMeetings.ToList();
        }
    } 
```

在我的*ProspectViewModel*中，我使用它`Observable Collection`从*ProspectMeetingViewModel*获取数据；

```
 private ObservableCollection<ProspectMeetingViewModel> prospectMeetings = null;
    public ObservableCollection<ProspectMeetingViewModel> ProspectMeetings
    {
        get { return GetProspectMeetings(); }
        set
        {
            prospectMeetings = value;
            OnPropertyChanged("ProspectMeetings");
        }
    }

    internal ObservableCollection<ProspectMeetingViewModel> GetProspectMeetings()
    {
        ProspectMeetingRepository c = new ProspectMeetingRepository();
        prospectMeetings = new ObservableCollection<ProspectMeetingViewModel>();
        prospectMeetings.Clear();

        foreach (DataObjects.ProspectMeeting i in c.GetMeetingByProspect(this.ProspectID))
        {
            ProspectMeetingViewModel prospectMeeting = new ProspectMeetingViewModel(i);
            prospectMeeting.Prospect = this;
            prospectMeetings.Add(prospectMeeting);
        }
        return prospectMeetings;
    } 
```

在我的*ProspectListViewModel*中；

```
 private ProspectListViewModel() : base("")
    {
        this.ProspectList = GetProspects();
    }

    private ProspectViewModel selectedProspect = null;
    public ProspectViewModel SelectedProspect
    {
        get
        {
            return selectedProspect;
        }
        set
        {
            selectedProspect = value;
            OnPropertyChanged("SelectedProspect");
        }
    }

    private ObservableCollection<ProspectViewModel> prospectList = null;
    public ObservableCollection<ProspectViewModel> ProspectList
    {
        get
        {
            return GetProspects();
        }
        set
        {
            prospectList = value;
            OnPropertyChanged("ProspectList");
        }
    }

    internal ObservableCollection<ProspectViewModel> GetProspects()
    {
        if (prospectList == null)
            prospectList = new ObservableCollection<ProspectViewModel>();
        prospectList.Clear();

        foreach (DataObjects.Prospect i in new ProspectRepository().GetAll())
        {
            ProspectViewModel c = new ProspectViewModel(i);
            prospectList.Add(c);
        }
        return prospectList;
    } 
```

我一直在关注这个[链接](http://www.codeproject.com/Articles/332615/WPF-Master-Details-MVVM-Application)来帮助我，但我已经陷入困境。就个人而言，当我查看我的代码时，我认为这与存储库没有获取数据有关。但我不太确定。

我希望有人可以建议或帮助我解决这个问题。首先，对不起，如果这是一个很长的问题，其次如果需要添加更多代码，请告诉我，我只添加了我认为合适的数据。

提前致谢 ：）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:32:03.083

最终的问题是一个有约束力的问题。在我的*MainWindow.xaml*中，我没有将*ProspectMeetingListView*分配给`SelectedProspect`，就像这样；

```
<Page.Resources>
    <DataTemplate x:Key="ProspectMeetingListTemplate" >
        <v:ProspectMeetingListView/>
    </DataTemplate>
</Page.Resources>

<ContentControl Grid.Column="1" Grid.Row="1" HorizontalAlignment="Center"
            Content="{Binding SelectedProspect}" ContentTemplate="{StaticResource ProspectMeetingListTemplate}" /> 
```

代表我的愚蠢错误。

# c# - 选择 top(n) 2 相关表实体框架

> ID：14933615
> 
> 赞同：-2
> 
> 时间：2013-02-18T10:00:19.897
> 
> 标签：c#, asp.net, entity-framework

这是我的实体数据源

```
<asp:EntityDataSource ID="EntityDataSourceCLient" runat="server"
        ConnectionString="name=MBSDbEntities" DefaultContainerName="MBSDbEntities"
        EnableFlattening="False" EntitySetName="ReservationLists" Include="UserProfile" OrderBy="it.Date" Where="">
    </asp:EntityDataSource> 
```

这是我的网格视图

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        BackColor="White" BorderColor="#CCCCCC" BorderStyle="None" BorderWidth="1px" 
        CellPadding="3" DataKeyNames="ID" DataSourceID="EntityDataSourceCLient">
        <Columns>
            <asp:TemplateField HeaderText="UserID" SortExpression="UserProfile.FirstMidname">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("UserProfile.FirstMidname") %>'></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("UserProfile.FirstMidname") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="TransactionType" HeaderText="TransactionType" 
                SortExpression="TransactionType" />
            <asp:BoundField DataField="Date" HeaderText="Date" SortExpression="Date" />
            <asp:BoundField DataField="Status" HeaderText="Status" 
                SortExpression="Status" />
        </Columns>
        <FooterStyle BackColor="White" ForeColor="#000066" />
        <HeaderStyle BackColor="#006699" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="White" ForeColor="#000066" HorizontalAlign="Left" />
        <RowStyle ForeColor="#000066" />
        <SelectedRowStyle BackColor="#669999" Font-Bold="True" ForeColor="White" />
        <SortedAscendingCellStyle BackColor="#F1F1F1" />
        <SortedAscendingHeaderStyle BackColor="#007DBB" />
        <SortedDescendingCellStyle BackColor="#CAC9C9" />
        <SortedDescendingHeaderStyle BackColor="#00547E" />
    </asp:GridView> 
```

我可以显示 2 个相关表格，但无法显示特定数量的表格。你们能帮帮我吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:05:12.500

您需要加入表格，然后按您的字段*（可能是 TestDate）*对它们进行排序，然后使用[Enumerable.Take()](http://msdn.microsoft.com/en-us/library/bb503062.aspx)获取最高`5`记录。就像是

```
var query = (from q in table1 
            join r  in table2 on q.UserID equals r.UserID)
            .OrderBy(s=> s.TestDate)
            .Take(5); 
```

# mysql - 从多个字段 MySql 的合并中选择所有不同的值

> ID：14933618
> 
> 赞同：0
> 
> 时间：2013-02-18T10:00:27.100
> 
> 标签：mysql, select, merge, distinct

假设我有一张这样的桌子：

```
A     B        C
10    aname    avalue
11    aname    bvalue
11    aname    bvalue
10    bname    avalue
11    cname    bvalue 
```

在这组中，我想选择我拥有的所有组合，例如：

```
10 aname avalue
11 aname bvalue
10 bname avalue
11 cname bvalue 
```

所以基本上`SELECT DISTINCT of ( A & B & C )`. 这是可能的，还是更好地制作一个php脚本来获取值并按照我的喜好排列/分组它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:01:34.563

```
select a, b, c from t group by a, b, c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:11:00.553

或更多镜头但相同（显然两者都会产生相同的计划）。

```
SELECT DISTINCT a, b, c FROM tbl 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!2/86765/1)**

# android - 在android中将.mid文件转换为.wav或.mp3文件的任何音频格式？

> ID：14933620
> 
> 赞同：6
> 
> 时间：2013-02-18T10:00:30.827
> 
> 标签：android, converter, midi, audio

谁能帮助我如何以编程方式将`.mid`文件转换为任何音频格式`.wav`或`.mp3`格式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T22:38:59.500

我认为可以使用 AudioRecorder 直接从 MediaPlayer 录制，将 Mediaplayer 设置为录音机的音频源，但似乎[没有办法](https://stackoverflow.com/questions/5849834/record-audio-on-android-with-mediaplayer-as-source)做到这一点。所以，我想了两种非常不干净的方法：

1- 大多数设备都有一个 3.5 毫米插孔，3 个通道，2 个用于立体声输出，1 个用于麦克风输入。您需要的是一根将三个信号分开的电缆，这样您就可以将立体声输出连接到输入，以某种短路的形式，并从麦克风输入录制 midi。我用它来将音频流源传递给手机，对其进行详细说明，然后将其发送到第三个设备。我所说的线与带有立体声音频+视频的 RCA 连接器非常相似，我知道这听起来很疯狂，但这取决于你在做什么。

2-假设您在实际播放时不需要录制midi，您可以读取midi文件然后自己合成声音。这真的很难，特别是当必须处理不同乐器（弦乐、鼓等）的声音时，使用样本可能会减少工作量。

我知道这不是预期的答案，但总比没有好，如果您如此渴望尝试其中一种方法，我可以提供一些示例代码和链接。

编辑：

好吧，那是疯了。我找到了另一种方法，使用[Visualizer](http://developer.android.com/reference/android/media/audiofx/Visualizer.html)类。可视化器的目的不是让[PCM](http://en.wikipedia.org/wiki/Pulse-code_modulation)记录它，而是（令人惊讶地）可视化声波，因此可能存在一些质量问题。但是，您可以将 PCM 保存为波形格式，为此，您必须在原始 PCM 数组中添加一个标头。对于波形文件格式，请查看[此处](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)。这是一个示例，它仅显示了从 TextView 中的 MediaPlayer 获取的字节数组，但它似乎可以工作......！

```
android.permission.RECORD_AUDIO
android.permission.MODIFY_AUDIO_SETTINGS 
```

activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <Button
        android:id="@+id/btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Play" />

    <Button
        android:id="@+id/btn2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Pause" />

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TextView
            android:id="@+id/textview"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
    </ScrollView> 
```

MainActivity.java

```
package com.example.midify;

import java.util.Arrays;

import android.media.MediaPlayer;
import android.media.audiofx.Visualizer;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.app.Activity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
    MediaPlayer mp;
    TextView tv;
    Visualizer mVisualizer;

    Handler handler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            tv.setText((String) msg.obj);
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mp = MediaPlayer.create(this, R.raw.midi);

        Button btn = (Button) findViewById(R.id.btn);
        Button btn2 = (Button) findViewById(R.id.btn2);
        tv = (TextView) findViewById(R.id.textview);

        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                if (!mp.isPlaying()) {
                    mp.start();
                    init_visualizer();
                }
            }
        });

        btn2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                if (mp.isPlaying()) {
                    mp.pause();
                    mVisualizer.release();
                }
            }
        });
    }

    @Override
    public void finish() {
        mp.release();
        mVisualizer.release();

        super.finish();
    }

    private void PassData(byte[] data) {
        String txt = Arrays.toString(data);
        Message msg = handler.obtainMessage();
        msg.obj = txt;
        handler.sendMessage(msg);
    }

    public void init_visualizer() {
        mVisualizer = new Visualizer(mp.getAudioSessionId());
        mVisualizer.setCaptureSize(Visualizer.getCaptureSizeRange()[1]);

        Visualizer.OnDataCaptureListener captureListener = new Visualizer.OnDataCaptureListener() {
            @Override
            public void onWaveFormDataCapture(Visualizer visualizer,
                    byte[] bytes, int samplingRate) {
                PassData(bytes);
            }

            @Override
            public void onFftDataCapture(Visualizer visualizer, byte[] bytes,
                    int samplingRate) {

            }
        };

        mVisualizer.setDataCaptureListener(captureListener,
                Visualizer.getMaxCaptureRate(), true, false);

        mVisualizer.setEnabled(true);
        mp.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
            @Override
            public void onCompletion(MediaPlayer mediaPlayer) {
                mVisualizer.setEnabled(false);
            }
        });
    }
} 
```

# c - STDOUT 缓冲区在哪里？

> ID：14933629
> 
> 赞同：6
> 
> 时间：2013-02-18T10:00:59.333
> 
> 标签：c, linux

众所周知，STDOUT 在 Linux 中是缓冲的。我的问题是：1）它是所有进程共享的全局缓冲区吗？还是每个进程一个缓冲区？2）缓冲区在哪里？在堆栈、堆或静态区域？3) 谁创造了它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:05:42.467

`stdout`是标准库创建的 C`FILE`指针，因此相关代码作为 C 库的一部分加载。在 Linux 上，它将根据 Posix 文件描述符来实现。

您的 C 库和内核都可能使用缓冲；您必须检查各个文件。我建议先看C库源代码的相关部分（即实现的部分`<stdio.h>`），应该很有教育意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T10:20:33.313

详细了解 C 标准库的最佳资源是 PJ Plauger 的[*标准 C 库*](https://rads.stackoverflow.com/amzn/click/com/0131315099)。他描述了他自己实现库时出现的所有问题（在 MSWord 中！在 win3.1 笔记本电脑上！在度假！）。

他还提供了有关如何使用（和测试）每个功能的详细信息。

对于 Unix (Linux) 端，您应该开始阅读“inode”，这是用于存储内存中缓存文件的经典数据结构。这方面的经典著作是Maurice J. Bach[*的 The Design of the UNIX Operating System*](https://rads.stackoverflow.com/amzn/click/com/0132017997)。

* * *

好吧，既然您因为没有阅读所有旧书和每个相关的 wiki 页面而受到适当的责骂。

*这是来自The Standard C Library*的相关引述，p。256.

> 原则上，您可以对 I/O 功能如何为流缓冲数据进行一定程度的控制。但是，您必须意识到，缓冲是基于关于 I/O 模式的各种猜想的优化。这些猜想通常是正确的，许多实现都遵循您的建议。但他们不必这样做。实现可以自由地忽略大多数缓冲请求。
> 
> 不过，如果您认为较大的缓冲区会提高性能或较小的缓冲区会节省空间，您可以提供自己的候选缓冲区。在打开文件之后调用该函数`setvbuf`，在对流执行任何其他操作之前。（避免使用不太灵活的旧函数`setbuf`。）您可以指定 I/O 是否应完全缓冲、按文本行缓冲或不缓冲。它可能会对您的程序的执行情况产生影响。
> 
> ...
> 
> `setbuf`--`setvbuf`代替这个函数来获得更多的控制权。
> 
> `setvbuf`-- 通常，最好让标准 C 库决定如何为您缓冲输入/输出。如果您确定不需要缓冲或一次缓冲，请使用此函数正确初始化流。打开流后`setvbuf` *立即*调用。几乎任何对流的操作都会抢占您选择缓冲策略的权利。如果您使用此调用指定自己的缓冲区，请不要假设流将实际使用它。并且*永远不要*在流打开时更改缓冲区的内容。**模式**（第三个）参数必须具有上述值、`_IOFBF`或`_IOLBF`之一`_IONBF`。另请参阅 [其他地方] 描述的宏`BUFSIZ`。
> 
> ...

```
/* setbuf function */
#include "xstdio.h"

int (setbuf)(FILE *str, char *buf)
    {        /* set up buffer for a stream */
    setvbuf(str, buf, buf ? _IOFBF : _IONBF, BUFSIZ);
    }

/* setvbuf function */
#include <limits.h>
#include <stdlib.h>
#include "xstdio.h"

int (setvbuf)(FILE *str, char *abuf, int smode, size_t size)
    {         /* set up buffer for a stream */
    int mode;
    unsigned char *buf = (unsigned char *)abuf;

    if (str->_Mode & (_MREAD|_MWRITE))
        return (-1);
    mode = smode == _IOFBF ? 0
        : smode == _IOLBF ? _MLBF
        : smode == _IONBF ? _MNBF : -1;
    if (mode == -1)
        return (-1);
    if (size == 0)
        buf = &str->_Cbuf, size = 1;
    else if (INT_MAX < size)
        size = INT_MAX;
    if (buf)
        ;
    else if ((buf = malloc(size)) == NULL)
        return (-1);
    else
        mode |= _MALBUF;
    if (str->_Mode & _MALBUF)
        free(str->_Buf), str->_Mode &= ~_MALBUF;
    str->_Mode |= mode;
    str->_Buf = buf;
    str->_Bend = buf + size;
    str->_Next = buf;
    str->_Rend = buf;
    str->_Wend = buf;
    return (0);
    } 
```

因此，至少在这个实现中，默认缓冲区可能存在于 FILE 结构中并在堆上分配。我们可以在这里看到它的兄弟，一个字符缓冲区 ( `str->_CBuf`)，用于“无缓冲”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:23:40.867

这取决于您如何写入标准输出。如果使用`stdio`，如果输出到 tty，它将被行缓冲。否则它将被完全缓冲。

另请参阅[`man stdio`](http://www.kernel.org/doc/man-pages/online/pages/man3/stdio.3.html)以获取更多详细信息。

如果您使用像 之类的低级例程[`write`](http://www.kernel.org/doc/man-pages/online/pages/man2/write.2.html)，则只写入给定的字节。根据目标，内核中会有缓冲。如果目标是 tty，它可能会直接写入终端。

# javascript - 在函数上强制参数而不声明它们

> ID：14933630
> 
> 赞同：0
> 
> 时间：2013-02-18T10:01:16.780
> 
> 标签：javascript, closures, ecmascript-5

我对此进行了一些研究，但我并不希望这是可能的，但也许你们中间有一个 JS 向导对如何解决这个问题有一个想法。

我有一个这样的 JS 函数：

```
{
    loadConfiguration: function(){
      theConfig.oneConfigOption = true;
      theConfig.anotherConfigOption = false;
    }
} 
```

这是旧软件部分中的一种界面。截至目前，`theConfig`一直是一个全局变量。因为我不喜欢全局变量，所以我想`theConfig`从函数外部定义对象。

问题是，出于向后兼容的原因，函数的签名必须始终保持不变`function()`，并且必须始终命名需要设置对象的引用，`theConfig`以便上述代码仍然是有效的配置加载器。**实际上，我无法更改此代码块所在的文件中的任何内容。**

我唯一可以更改的地方是调用函数的位置（因为它是在另一个文件中调用的，可以从一个版本更新到另一个版本：

```
loadConfiguration(); 
```

我可以在这里做任何事情.. 包装函数、闭包或类似的东西。所以我的问题是，你能想出一种方法来强制对`theConfig`of的引用`loadConfiguration`指向我在调用函数时定义的对象**而不**更改其签名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:15:49.387

我真的不确定你的目标是什么，但如果你被允许摆脱`theConfig`（使用它的版本不是`window.theConfig`）等等，那么你可以使用 IIFE。

```
var funcs = {
    loadConfiguration : (function () {
        var theConfig = {};

        //or, if you prefer...
        theConfig = some.object.somewhere.else.config;
        return function () {
        // this now resolves to the `theConfig` which is in the closure
        // created by the IIFE
            theConfig.one = true;
        };
    }());
}; 
```

您甚至可以使用该 IIFE 传递`theConfig`. 这里要注意的重要一点是，`theConfig` ***在这些 IIFE 运行之前必须存在***

```
loadConfiguration : (function (theConfig) {
    return function () { theConfig.x = 3; };
}(newConfigObject)) 
```

如果这些都不是您想要的，那么请更具体地说明您想从中获得什么。

## **编辑**

根据你的更新，我有一个可怕的想法，理论上可行。
它很丑，很像忍者，而且我不一定会在我的最终产品中加入它。
也就是说，它应该是可以预测的，***只要您要替换的功能不需要访问闭包*** -`this`可以使用 call 或 apply 来破解，但如果该功能试图访问其他东西是一个全局的（或者更糟的是，在闭包中定义，虽然它看起来不像），那么 THOSE 也需要被导入。

看看： // 你的“loadConfig”当前所在的地方 var codeblock = { // 我们想要交换 target_func 值的函数： function () { theVar.prop = 1; theVar.attr = 2; } }; // 我们要使用的新配置对象 var alternate = { config : {} };

```
// this whole thing would get injected somewhere into the page
// put it where you're about to fire your stuff
(function () {
    // the name of the variable doesn't actually matter right here
    // but I'm doing it for consistency
    var theVar = alternate.config,
        // grabbing the function as a string
        string = codeblock.target_func.toString(),
        // using regex to remove the `"function anonymous() {" + "}"` wrapper
        bare_func = string.replace(/^function[^{]+{/, "")
                          .replace(/}$/,""),

        // using the new Function constructor to pass in "theVar" (where the name matters)
        // the constructor doesn't accept closures, but any function that is created inside of the constructor does
        // so we return a new function (with the exact contents of the original function
        // but now, `theVar` is a parameter we're passing in 
        new_func = new Function ("theVar", "return function () {" + bare_func + "};"),
        // this is the new function returned from the constructor, and we're passing in "theVar"
        // again, name on the outside doesn't matter -- name in the `new Function` constructor DOES
        enclosed = new_func(theVar);

    // putting the function back where we stole it from
    codeblock.target_func = enclosed;
}()); 
```

如果我们`codeblock.target_func();`之前跑过，它会设置

```
window.theVar.prop = 1;
window.theVar.attr = 2; 
```

...但是如果我们现在调用该函数...

```
codeblock.target_func();

alternate.config.prop;  // 1
alternate.config.attr;  // 2 
```

# twitter-bootstrap - 无法为 Twitter BootStrap Carousel 中的特定幻灯片提供不同的时间间隔

> ID：14933631
> 
> 赞同：1
> 
> 时间：2013-02-18T10:01:21.163
> 
> 标签：twitter-bootstrap, carousel

我有麻烦了，我想给**

-

> 特定幻灯片的不同时间间隔

**. 这样做的原因是我**在幻灯片中添加了一个 **.swf 文件，我想让它播放。在所有站点进行大量搜索后，我无法找到任何方法。因为只有两个事件有滑动和滑动。使用它们我无法做到这一点。请帮帮我。如果还有其他方法可以做到这一点，请告诉我。

提前致谢

# c# - ruby WIN32OLE c# dll 自定义事件监听

> ID：14933638
> 
> 赞同：0
> 
> 时间：2013-02-18T10:01:47.357
> 
> 标签：c#, ruby, events, win32ole

我发现了这个关于从 Ruby 连接到 ac# dll 的好教程： [Can Ruby import a .NET dll?](https://stackoverflow.com/questions/265879/can-ruby-import-a-net-dll) 这适用于 Ruby=>C#，但不适用于 c#=>Ruby。现在我正在考虑使用一些 Ruby 可以连接的自定义事件。我遵循此页面中的示例 A：http: [//msdn.microsoft.com/en-us/library/aa645739](http://msdn.microsoft.com/en-us/library/aa645739(v=vs.71).aspx) (v=vs.71).aspx创建自定义事件。

现在的问题是，我如何从 ruby​​ 链接到这个事件？在excel中我会这样做：

```
xl_workbook_events = WIN32OLE_EVENT.new(xl_book, 'WorkbookEvents')
xl_workbook_events.on_event('SheetSelectionChange') do
    # do something when the selection has changed.
end#do 
```

但是，对于自定义 c# 事件，我不知道.. 问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T16:17:05.083

好的，所以，要在 C# 中制作一个 com 可访问的 DLL：http: [//www.codeproject.com/Articles/23355/Callback-Functions-and-NET-C-COM-Components](http://www.codeproject.com/Articles/23355/Callback-Functions-and-NET-C-COM-Components)

绑定到来自 ruby​​ 的事件：

```
require 'win32ole’
ole_connection = WIN32OLE.new(“YourNameSpace.YourClassName”)
event = WIN32OLE_EVENT.new(ole_connection)
event.on_event(‘NameOfYourEvent’) do |args| # NameOfYourEvent should be specified in 'CallBackEventInterface' from the example, like: 'TheEvent'. when using that event, arg should containt 'string msg'
    # do some work
    puts args.to_s
end#do 
```

# c# - LongListSelector SelectionChanged 不会被调用

> ID：14933639
> 
> 赞同：0
> 
> 时间：2013-02-18T10:01:50.933
> 
> 标签：c#, wpf, silverlight, windows-phone-7

我有这个模板`LongListSelector`：

```
<local:SearchTemplateSelector.LoadMoreTemplate>
                            <DataTemplate>
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <TextBlock Text="Load more..." FontSize="30" Foreground="White" TextWrapping="Wrap" Grid.Row="0" 
                                               HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,35"/>
                                    <Rectangle Height="1" HorizontalAlignment="Stretch" VerticalAlignment="Top" Fill="White" Grid.Row="1" Opacity="0.3"/>
                                </Grid>
                            </DataTemplate>
                        </local:SearchTemplateSelector.LoadMoreTemplate> 
```

这是`LongListSelector`：

```
 <Controls:LongListSelector x:Name="searchList" Margin="0,0,0,0"  Background="Black" SelectionChanged="DidPressSelectSearchList" 
                               HorizontalContentAlignment="Stretch" KeyDown="UserPressEnterKeyBoard" Grid.Row="1">
        <Controls:LongListSelector.ItemTemplate>
            <DataTemplate>
                <local:SearchTemplateSelector Content="{Binding}" HorizontalContentAlignment="Stretch"> 
```

我有一个问题，当我按下列表中的这一行时，`DidPressSelectSearchList`只有当我按下时才会被调用，`TextBlock`如果我按下行上的另一个位置则不会触发。

知道如何解决吗？

编辑我试试这个：

```
<local:SearchTemplateSelector Content="{Binding}" HorizontalContentAlignment="Stretch" Background="Transparent"> 
```

它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T15:35:30.890

我遇到了像你这样的问题（[*LongListSelector*错误](https://dl.dropboxusercontent.com/u/52656761/LongListSelector%20error/LongListSelector%20error.png)）。

> 我试图弄清楚如何解决它，但我没有找到解决方案。我添加了图片以更清楚地描述问题。蓝色框（在图片上）是点击事件引发的区域，红色框是没有发生任何事情的区域，当你点击那里时。当我使用列表框而不是使用 LongListSelector 时，一切都按预期正常工作。

但是我尝试了**Silver Solver**的建议，它确实对我有用。我想，你简单地犯了一个错误。

注意这个属性*Background="Transparent"*内部`<Grid>`元素，它放置在内部`<DataTemplate>`并且`<toolkit:LongListMultiSelector.ItemTemplate>`一致（代码放在下面）。

我认为您遇到了问题，因为您应该为元素设置`<Grid>`元素，`<Controls:LongListSelector.ItemTemplate>`然后将*Background="Transparent"*设置为`<Grid>`元素。然后你可以在里面放`<Grid>`任何你喜欢的元素。您还可以为元素添加事件`Tap="Grid_Tap"`，`<Grid>`因此只要您在`<Grid>`元素区域内点击，它就会触发。

这是我的代码示例，请尝试：

```
<toolkit:LongListMultiSelector                    
                x:Name="LongListMultiSelector" 
                Margin="0,0,0,0"  
                ItemsSource="{Binding}"                     
                SelectionChanged="SelectionChanged"
                IsSelectionEnabledChanged="IsSelectionEnabledChanged"                              
                EnforceIsSelectionEnabled="False" 
                >
                <toolkit:LongListMultiSelector.ItemTemplate>
                    <DataTemplate>                            
                        <Grid Margin="0,0,0,17" 
                              Tap="Grid_Tap"                                       
                              HorizontalAlignment="Stretch" 
                              VerticalAlignment="Stretch"  
                              Background="Transparent">                                     
                            <TextBlock  Text="{Binding Text}"
                                        TextWrapping="NoWrap"
                                        Style="{StaticResource PhoneTextLargeStyle}"                                            
                                        HorizontalAlignment="Left"                                          
                                        />                                        
                        </Grid>                            
                    </DataTemplate> 
                </toolkit:LongListMultiSelector.ItemTemplate> 
```

PS **Silver Solver**非常感谢您，对不起，由于声誉小，我无法提高您的声誉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:39:10.320

确保 ItemTemplate 中的根元素具有背景设置，否则它不会注册点击。

```
<DataTemplate>
            <local:SearchTemplateSelector Background="Transparent"... 
```

如果您的 Selector 没有 Background 属性，只需将其包装在 Grid 中。

# regex - 需要正则表达式示例

> ID：14933640
> 
> 赞同：-4
> 
> 时间：2013-02-18T10:01:54.050
> 
> 标签：regex

我是正则表达式的新手。

任何人都可以给我一个例子：^[DR]\d{4}$

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:05:08.630

`^[DR]\d{4}$`方法：

> ^ - 正文的开头
> 
> [DR] - 字母“D”或“R”
> 
> \d - 数字
> 
> {4} - 最后一个模式重复 4 次
> 
> $ - 文本的结尾

示例：[R1234](http://regexr.com?33qcm)

# javascript - 使用 facebook 批量请求 javascript api

> ID：14933641
> 
> 赞同：7
> 
> 时间：2013-02-18T10:01:56.430
> 
> 标签：javascript, facebook, api, batch-file, request

我试图将批处理请求发送到图形 api，并在第二个请求的响应中出现错误：

```
"{
   "error": {
      "message": "(#100) Missing message or attachment",
      "type": "OAuthException",
      "code": 100
     }
}" 
```

谁能告诉我我做错了什么？

这是我使用的代码：

```
var opts = {
               message : 'Some message',
               name : 'Post Name',
               link : 'url',
               description : 'The post Description',
               picture : 'url to image'
           };

FB.api('/', 'POST', {
         batch: [
              { method: 'GET', relative_url: 'me/friends'},
              { method: "POST",relative_url: "me/feed", body : opts }
         ]
       }, function (response) {
                console.log(response);
       }); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-14T16:24:43.987

就像 Sharon 所说，您需要将 body 字段以 url 编码的方式放置。

你可以用jquery简单地做到这一点，比如：

```
var opts = {
               message : 'Some message',
               name : 'Post Name',
               link : 'url',
               description : 'The post Description',
               picture : 'url to image'
           };

FB.api('/', 'POST', {
         batch: [
              { method: 'GET', relative_url: 'me/friends'},
              { method: "POST",relative_url: "me/feed", body : $.param(opts) }
         ]
       }, function (response) {
                console.log(response);
       }); 
```

效果很好。

# c++ - 传入函数的 char* 缩短为四个字符

> ID：14933647
> 
> 赞同：-2
> 
> 时间：2013-02-18T10:02:06.700
> 
> 标签：c++, arrays, parameter-passing, sizeof

```
void myfunc(char* passedArray)
{
    cout << sizeof(passedArray) << endl; // prints 4
}

int main(void)
{
    char charArray[] = "abcdefghiklmop";

    cout << sizeof(charArray) << endl; // prints 15
    myfunc(charArray);
    cout << sizeof(charArray) << endl; // prints 15
} 
```

我相信它仍然应该在该函数中打印 15 ......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T10:04:00.277

这是指针和数组的经典问题。如您所见，问题在于数组衰减为指针。指针类型*不*包含关于它指向的数据的元数据，除了指向类型的大小。所有其他元数据（例如数组长度）都会丢失。

因此，问题是您使用指向数组`myfunc`的*指针进行了调用；*然后，有关数组的所有元数据对`myfunc`函数都是不可见的。然后这会触发`sizeof`运算符的细微差别，即当它应用于指针时，它给出的是指针类型的大小，而不是数组的长度。但是，当应用于数组时，它会给出数组的长度，如您在`main`函数中所见。

短修复，`strlen`改用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T10:07:11.033

尽管您将数组定义为`char charArray[]`，但当您将其传递给采用 的函数时， 将`char*`被`charArray`转换为指向第一个元素的指针，因此当您`sizeof`在函数体中调用时，它会打印指针的大小（即32 位机器上的 4 个字节）如预期的那样。

[即使您的函数`char passedArray[]`作为参数](http://ideone.com/4icIFA)，原始`charArray`值也会衰减为指向第一个元素的指针，并且通过调用检索此数组大小的能力`sizeof`将丢失。（请参阅[什么是数组衰减？](https://stackoverflow.com/questions/1461432/what-is-array-decaying)）。

因此，您可以调用[`strlen()`](http://www.cplusplus.com/reference/cstring/strlen/)以检索此 C 样式字符串的大小，但由于您正在编写 C++ 代码，因此最合理的解决方案是使用[`std::string`](http://www.cplusplus.com/reference/string/string/)而不是 C 样式字符串。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-18T10:12:42.017

首先，你期待什么？您已定义`passedArray`为指针，因此`sizeof(passedArray)`将返回您机器上指针的大小。它还能做什么？如果您的功能是，我可以理解一些混乱：

```
void myFunc( char passedArray[15] ) 
```

在这种情况下，一个合理的人可能会期望`sizeof(passedArray)`为 15 （但他会错，因为当用作参数时，数组会被编译器转换为指针，并且此定义与您的定义完全相同）。

所有这一切的答案是使用`std::string`：

```
void
myFunc( std::string const& passedValue )
{
    std::cout << passedValue.size() << std::endl;
} 
```

与 不同`char[]`，`std::string`实际上有效。C 风格的数组，无论是否用作字符串，都已损坏，只能在非常有限的情况下使用，主要与具有静态生命周期和初始化顺序问题的对象有关。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T10:03:11.417

使用`strlen()`, not`sizeof()`来获取字符串的长度。

在 C 中，字符串只是一个以零结尾的字符数组。C中没有特殊`String`类型。`strlen()`它是一个计算字符数直到终止零字节的函数。

`sizeof()`是一个运算符，可用于确定变量或数据类型的大小。在您的情况下，`sizeof()`返回`char*`指针的大小（在您的平台上似乎是 4 个字节）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T10:03:45.200

在函数内部，这个

```
cout << sizeof(passedArray) << endl; 
```

正在打印 a 的大小`passedArray`，即 a `char*`。在您的平台上，指针大小为 4。如果您将指针传递给函数，则该函数无法知道它指向的是固定大小数组的第一个元素。如果你想要一个固定数组的大小，那么传递一个数组，而不是一个指针：

```
template< class T, size_t N >
void myfunc( const T (&passedArray)[N] )
{
  std::cout << N << "\n";
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-18T10:03:57.527

`sizeof(char*)`给出指针的大小，而不是指向字符串的大小。

你真正想要的是`strlen`。

它给出字符串大小的原因`main()`是因为它被定义为 a `char[]`（一个在编译时已知大小的数组）而不是 a `char*`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-18T10:04:13.810

`sizeof(passedArray)``passedArray`返回类型为 的指针的大小，`char *`在您的系统中，显然是 4 个字节。

改为使用`strlen`，或者更确切地说，使用`std::string`

# java - 遍历地图入口集

> ID：14933648
> 
> 赞同：19
> 
> 时间：2013-02-18T10:02:09.167
> 
> 标签：java, loops, generics, map, entryset

我需要遍历我不知道其参数化类型的映射的条目集。

当迭代这样的条目集时，为什么这不能编译？

```
public void myMethod(Map anyMap) {
    for(Entry entry : anyMap.entrySet()) {
        ...
    }
} 
```

但是这个编译：

```
public void myMethod(Map anyMap) {
    Set<Entry> entries = anyMap.entrySet();
    for(Entry entry : entries) {
        ...
    }
} 
```

这也可以编译（我不能使用这个，因为我不知道地图的类型）：

```
public void myMethod(Map<String, String> stringMap) {
    for(Entry<String,String> entry : stringMap.entrySet()) {
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-18T10:19:29.157

您在第一个错误中遇到的错误是：

```
Type mismatch: cannot convert from element type Object to Map.Entry 
```

这是因为编译器会转换您的 FOR-IN 循环：

```
for (Entry entry : anyMap.entrySet()) {
} 
```

到：

```
for (Iterator i = anyMap.entrySet().iterator(); i.hasNext();) {
    Entry e = i.next(); // not allowed
} 
```

您的第二个示例有效，**但只能通过作弊！** 您正在执行未经检查的演员表以`Set` *重新*进入`Set<Entry>`.

```
Set<Entry> entries = anyMap.entrySet(); // you get a compiler warning here
for (Entry entry : entries) {
} 
```

变成：

```
Set<Entry> entries = anyMap.entrySet();
for (Iterator<Entry> i = entries.iterator(); i.hasNext(); ) {
    Entry e = (Entry) i.next(); // allowed
} 
```

* * *

**更新**

如评论中所述，两个示例中的类型信息都丢失了：因为编译器的原始类型擦除规则。

为了提供向后兼容性，**所有**原始类型实例的方法都被它们的*擦除*对应物替换。所以，因为你`Map`是一个原始类型，所以它都被删除了。包括它的`Set<Map.Entry<K, V>> entrySet();`方法：你的原始类型实例将被强制使用擦除的版本：`Set entrySet()`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-18T10:40:49.430

这是因为您使用原始类型 Map，因此 map.entrySet() 为您提供了一个非参数化的 Set，它在迭代时生成 Object，而不是 Entry。

一个简单但优雅的解决方案是使用 Map<?,?>，它仍然允许您传递 ANY Map，但另一方面强制 map.entrySet() 具有 Set<Entry> 的返回值：

```
public void test(Map<?,?> map) {        
    for(Entry e : map.entrySet()){
        Object key = e.getKey();
        Object value = e.getValue();
    }       
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T10:20:05.097

在第一个示例中，map.entrySet() 返回 Set，当您在循环中迭代时使用 Iterator。没有关于设置内容类型的信息，因此 Java 使用 Object 作为 Object 是基本类型，编译器告诉您它不能将 Object 转换为 Entry。

```
Set<Map.Entry<K, V>> entrySet(); 
```

当您使用原始地图类型时，entrySet 只返回 Set，没有类型信息。

在第二个示例中，您手动将 Set 转换为 Set<Entry> （带有警告）。现在 Java 知道里面有什么了。所以你可以迭代。

在上一个示例中，您知道映射类型，因此 entrySet 返回正确的类型化 Set 并且您可以在没有任何类型约定的情况下进行迭代。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T10:06:16.967

第一个代码片段不会编译，因为该变量`map`不存在。您调用了该参数`anyMap`，但尝试将其访问`map`为

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-04T09:21:39.483

我遇到了同样的问题。看来选角是个问题。我尝试了下面的代码并且它有效。

```
 for(Object entry : hashMap.entrySet())
    {
        System.out.println(((Entry<Object, Object>) entry).getKey() + " = " + ((Entry<Object, Object>) entry).getValue());

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-10T06:58:57.083

您收到编译时错误，因为您没有指定类型`HashMap`

像

```
HashMap <(Integer,String> hm=new HashMap<(Integer,String>(); 
```

如果将类型指定为 Integer 和 String，则不会出现编译时错误。

如果您不知道要在 HashMap 中添加哪个值，那么您使用

```
HashMap<(Object,Object> hm=new HashMap(); 
```

# c# - 更新 UI 中的 2 个元素

> ID：14933649
> 
> 赞同：1
> 
> 时间：2013-02-18T10:02:09.873
> 
> 标签：c#, wpf, .net-4.0

我有一个 WPF 应用程序。我正在使用自动隐藏窗格来托管一个非常复杂的用户控件。当用户单击窗格时，大约需要 10 秒。要加载控件，我正在尝试创建一个“正在加载...”窗口来通知用户应用程序正在运行。在这个等待窗口中，我有一个动画来旋转图像。我的问题是 2 天后我仍然无法让轮子旋转，因为我使用与加载用户控件相同的线程。如果我在没有窗格更新的情况下运行它，我的“加载”窗口工作得很好。我尝试了几件事——BackgroundWorker、Dispatcher.Invoke。我在网上找到的所有示例都是关于在保持 UI 处于活动状态的同时执行后台任务。

有铅吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:57:10.533

虽然我没有清楚地得到这个问题，但我试图尽可能地给出这个答案。:-)

在我的场景中，我创建了一个主窗口，它在单击按钮时加载耗时的控件。在加载耗时的控件时，我保持了 10 秒的睡眠。

主窗口代码：

Xaml -

```
<Window x:Class="Wpf.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Wpf"
    Title="MainWindow" Height="350" Width="525"
    x:Name="root">
<Window.Resources>
    <DataTemplate x:Key="loadingTemplate" DataType="ContentControl">
        <StackPanel>
            <TextBlock Text="Loading..." Margin="5"/>
        </StackPanel>
    </DataTemplate>

</Window.Resources>

<StackPanel x:Name="stpRootLayout">
    <Button Content="Click to load pane" Click="Button_Click"/>
    <Border BorderThickness="5" BorderBrush="Black"  Height="100">
    <ContentControl x:Name="cctPlaceHolder">

    </ContentControl>
    </Border>
</StackPanel> 
```

Xaml.cs -

```
public delegate void LoadTimeConsumingControlDelegate();

public void LoadTimeConsumingControl()
    {
        //set our progress dialog text and value
        cctPlaceHolder.Content = new TimeConsumingControl();
    }

private void Button_Click(object sender, RoutedEventArgs e)
    {
        BackgroundWorker worker = new BackgroundWorker();
        cctPlaceHolder.ContentTemplate = this.TryFindResource("loadingTemplate") as DataTemplate;
        System.Windows.Threading.Dispatcher cctDispatcher = cctPlaceHolder.Dispatcher;
        worker.DoWork += delegate(object s, DoWorkEventArgs args)
        {
            LoadTimeConsumingControlDelegate update = new LoadTimeConsumingControlDelegate(LoadTimeConsumingControl);
            cctDispatcher.BeginInvoke(update);
        };

        worker.RunWorkerCompleted += delegate(object s, RunWorkerCompletedEventArgs args)
        {
            cctPlaceHolder.ContentTemplate = null;
        };

        worker.RunWorkerAsync();
    } 
```

耗时控制：

Xaml -

```
<UserControl x:Class="Wpf.TimeConsumingControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<Grid>
    <TextBlock Text="some text..................................................................................................."/>
</Grid> 
```

Xaml.cs

```
public TimeConsumingControl()
    {
        InitializeComponent();
        Thread.Sleep(10000);
    } 
```

将数据模板替换为您的加载主题。

希望这是您正在寻找的东西。如果没有，你可以回复我。

# vba - VBA 获取属性

> ID：14933654
> 
> 赞同：1
> 
> 时间：2013-02-18T10:02:20.603
> 
> 标签：vba

我有一个类模块 MyVBAclass，它有一个自定义 COM 类的成员

```
Private mMyCOMclass As MyCOMclass
Public Property Get InnerClass() As MyCOMclass
    Set InnerClass = mMyCOMclass
End Property
Public Property Let InnerClass(value As MyCOMclass)
    Set mMyCOMclass = value
End Property
Private Sub Class_Initialize()
    Set mMyCOMclass = New MyCOMclass
End Sub 
```

MyCOMclass 实现了 Clone() 和 CopyTo() 方法，Clone 返回 MyCOMclass 的新实例，CopyTo 只是将属性复制到已经初始化的对象。这是我遇到的问题，如果有人能解释如何避免它，那就太好了。

```
Dim MyVBAinstance As MyVBAclass
Set MyVBAinstance = New MyVBAclass

Dim COMinstance As MyCOMclass, copyOfCOM As MyCOMclass
Set COMinstance = New MyCOMclass
Set copyOfCOM = New MyCOMclass

' Do some stuff with COMinstance

Call COMinstance.CopyTo(copyOfCOM) ' Works fine
MyVBAinstance.InnerClass = COMinstance.Clone() ' Works fine even without Set

Call COMinstance.CopyTo(MyVBAinstance.InnerClass) ' DOESN'T WORK 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:07:05.380

面向对象的思想是对象将其成员隐藏在外部世界之外。和`GET`属性`SET`充当“网关”。这样，没有例程可以简单地覆盖更改下面的对象`MyVBAinstance.InnerClass`。你需要做的是：

```
Dim objTemp as As MyCOMclass
Set objTemp = New MyCOMclass 'this will reserve the memory and store the pointer in objTemp
Call COMinstance.CopyTo(objTemp) 'this will fill the allocated memory
Set MyVBAinstance.InnerClass = objTemp 'this will copy the pointer from objTemp to MyVBAinstance.InnerClass 
```

~~如果你想公开你的类的一些私有成员，你需要像你一样提供`PROPERTY GET`and `PROPERTY SET`/方法。每次访问属性时都会调用 -当您将对象/值分配给属性时会调用 / 。`PROPERTY LET``GET``PROPERTY SET``PROPERTY LET`~~

如果属性是对象，则需要使用`PROPERTY SET`- 如果它是本机类型（整数、字符串等），则必须使用`PROPERTY LET`.

以同样的方式，您需要使用`SET`（例如`Set MyVBAInstance.InnerClass = anotherObject`）将对象分配给属性，但不使用本机类型`SET`（例如' MyVBAInstance.Name = "Test"`）

因此，在您的代码中替换`LET`为`SET`：

```
Public Property Set InnerClass(value As MyCOMclass)
    Set mMyCOMclass = value
End Property 
```

然后还在`SET`代码中使用关键字：

```
Set MyVBAinstance.InnerClass = COMinstance.Clone() 
```

# android - Anymote 协议服务器实现

> ID：14933655
> 
> 赞同：0
> 
> 时间：2013-02-18T10:02:22.060
> 
> 标签：android, google-tv, anymote

我正在尝试为任何协议实现服务器端。我想以一种可以直接使用市场上现有应用程序（谷歌电视遥控器）的方式设计它。有没有相同的参考代码？

[此外， https://developers.google.com/tv/remote/docs/anymote](https://developers.google.com/tv/remote/docs/anymote)上的文档 似乎不足以满足开始开发的要求。是否有任何其他特定要求的文档可用于设计此服务器。

任何线索或起点都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:38:36.490

您需要在服务器上实现 3 个部分：

1.  将在本地网络上广播设备信息的发现服务。查看客户端逻辑以了解如何执行此操作：[https ://code.google.com/p/google-tv-remote/source/browse/src/com/google/android/apps/tvremote/BroadcastDiscoveryClient .java](https://code.google.com/p/google-tv-remote/source/browse/src/com/google/android/apps/tvremote/BroadcastDiscoveryClient.java)

2.  您还需要在服务器上实现配对协议，以允许远程设备与服务器设备配对（通常使用 PIN）：[https ://developers.google.com/tv/remote/docs/pairing](https://developers.google.com/tv/remote/docs/pairing)

3.  您需要在服务器上实现 Anymote 协议。anymote 服务需要作为系统服务运行，因为它需要将按键和触摸事件注入 Android 系统。

对于配对和 Anymote 协议，都有可用的客户端代码可以修改以实现服务器。发现部分可能只是一个简单的 Android 服务，它在线程中广播正确的设备信息。

# php - 另一种类型的继承类

> ID：14933656
> 
> 赞同：0
> 
> 时间：2013-02-18T10:02:26.807
> 
> 标签：php

对于我的项目，我编写了一个基本的控制器类：

```
<?php
   abstract class Controller
   {
      static $__instance = null;

      protected function __construct()
      {
      }

      final private function __clone()
      {
      }

      public static function getInstance()
      {
         $class = get_called_class();

         return self::$__instance ? self::$__instance : (self::$__instance = new $class());
      }
   }
?> 
```

现在每个控制器都从这个控制器继承。

像这样：

```
<?php

   include_once 'model/page.php';
   include_once 'view/page.php';

   class PageController extends Controller
   {
      private $m_model = null;

      private $m_view = null;

      private $m_id;

      protected function __construct()
      {
         parent::__construct();

         $this->m_id = uniqid();

         $this->m_model = new PageModel();
         $this->m_view = new PageView();
      }

      public function preparePage()
      {
         echo 'Hello';
      }
   }
?> 
```

在我的 index.php 中，我得到了这个： $user = UserController::getInstance(); $page = PageController::getInstance(); var_dump($page);

问题是`var_dump($page)`显示变量 $page 是 UserController 的类型，但为什么呢？它应该是 PageController 类型。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:07:00.473

因为只有一个`self::$__instance`在所有继承自`Controller`. 您可以使用数组来跟踪多个实例：

```
return self::$__instance[$class] ? self::$__instance[$class] : (self::$__instance[$class] = new $class()); 
```

但实际上，单例模式是不受欢迎的。您应该在定义的位置实例化`new PageController`一次并将其注入需要的位置。那么就不需要这个静态单例构造函数了。

# colors - webkit-keyframes 脉冲背景颜色变化

> ID：14933658
> 
> 赞同：2
> 
> 时间：2013-02-18T10:02:31.683
> 
> 标签：colors, background, webkit, css-animations

我正在使用这个很棒的 CSS 代码通过循环 4 种颜色的过渡来缓慢地自动更改背景颜色。

我想将此应用于几个单独的 Div，并让它们都以不同的颜色开始。效果就像一个表格，每个单元格都在改变颜色，无需用户交互。我可以将此效果应用于页面中的任何单个元素，但我想多次使用它并使用不同的起始颜色。

我尝试只更改 Div 的起始颜色，但这似乎不起作用。有谁知道解决方案？

```
@-webkit-keyframes pulse 
{
  0% {background-color: #45CEEF;}
 25% {background-color: #FFF5A5;}
 50% {background-color: #FFD4DA;}
 75% {background-color: #99D2E4;}
 100% {background-color: #D8CAB4;}
}
#div 
{
 background-color: #45CEEF;    
 -webkit-animation: pulse 40s infinite alternate;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T10:52:53.583

现在应该可以了。在第一个之后创建的每个 div 中使用负时间偏移。改变每个的时间以保持它们不同的颜色。

```
 <html>
<head>

<style> 

 @-webkit-keyframes pulse  
{
0% {background-color: #45CEEF;} 
25% {background-color: #FFF5A5;}
 50% {background-color: #FFD4DA;}
 75% {background-color: #99D2E4;}
100% {background-color: #D8CAB4;}
}

#cell1
{
width:100px;
height:100px;

-webkit-animation: pulse 35s infinite;

 }

   #cell2
   {
  width:100px;
 height:100px;

-webkit-animation: pulse 35s ease -3s infinite;

 }

#cell3
{
width:100px;
height:100px;

-webkit-animation: pulse 35s ease -5s infinite;

 }

</style>
 </head>
<body>

 <div id="cell1"></div>
 <br/>

 <div id="cell2"></div>
 <br/>

<div id="cell3"></div>

</body> 
```

# xcode - 在 iPhone 4 屏幕的 Xcode 4.6 大小中制作默认 XIB 文件

> ID：14933665
> 
> 赞同：1
> 
> 时间：2013-02-18T10:02:54.627
> 
> 标签：xcode, interface-builder, xib

每当我在 Xcode 4.6 中创建一个新类时，我都会得到为 iPhone 5 设计的高 XIB。我不是为 iPhone 5 构建应用程序，而是想使用 Interface Builder 为较小的屏幕布局。如何更改默认值，以便在创建新类时获得较小的 XIB。另外，如何将现有的 iPhone 5 XIB 更改为 iPhone 4 XIB？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:07:56.013

在您的 XIB 的属性检查器中有一个名为“模拟指标”的下拉菜单。将大小更改为“Retina 3.5 全屏”。通过这样做，您可以将现有的 iPhone 5 大小的 XIB 更改为 iPhone 4 大小的 XIB

# iphone - 表格视图中的滑块问题

> ID：14933667
> 
> 赞同：0
> 
> 时间：2013-02-18T10:03:03.700
> 
> 标签：iphone, ios, objective-c, xcode, uitableview

在我的应用程序中，我在表格视图中添加了一个滑块，即每一行都包含一个滑块，它也可以正常工作。

但是当我滚动表格视图时，滑块会重新加载，即每个都显示我的起始位置而不是滑块值。

```
//My code is as follow for slider in table cell:

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

     NSString *CellIdentifier=[NSString stringWithFormat:@"CellIdentifier%d",indexPath.row];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    if (cell == nil) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];

        return cell;
    }

    UISlider*  theSlider =  [[[UISlider alloc] initWithFrame:CGRectMake(174,12,120,23)] autorelease];
        theSlider.maximumValue=99;
        theSlider.minimumValue=0;
        [cell addSubview:theSlider];

return cell;
} 
```

**我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:05:02.387

您必须将滑块值存储在数组等中，并根据数组值设置滑块值`cellforrowatindexpath`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:16:16.740

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

     NSString *CellIdentifier=[NSString stringWithFormat:@"CellIdentifier%d",indexPath.row];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
UISlider*  theSlider = nil;
    if (cell == nil) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];

theSlider     =  [[[UISlider alloc] initWithFrame:CGRectMake(174,12,120,23)] autorelease];
        theSlider.maximumValue=99;
       theSlider.tag =2;
        theSlider.minimumValue=0;
        [[cell contentView] addSubview:theSlider];
    }

return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:18:55.613

我需要更多代码才能获得更好的答案。如果这对您没有帮助，请发布您的全部内容

```
-tableView: cellForRowAtIndexPath: 
```

方法。

我现在的猜测是，每次使用

```
-tableView:dequeueReusableCellWithIdentifier: 
```

这（自然）每次都会在起始位置产生一个新的 Slider。

您将不得不使用可以分配给正在重用的单元格的字典或滑块数组。

例如，如果你的 TavbleView 应该有 20 行，每行包含一个滑块，你将需要一个包含 20 个滑块的数组并执行类似的操作

cell.slider = [mySliderArray objectAtIndex: indexPath.row]

这样，滑块将保留该值。

编辑：试试这个：（我稍微修改了上面发布的代码）

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

     NSString *CellIdentifier=[NSString stringWithFormat:@"CellIdentifier%d",indexPath.row];

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

if (cell == nil) {

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];

    return cell;
}

//This is where you went wrong
//UISlider*  theSlider =  [[[UISlider alloc] initWithFrame:CGRectMake(174,12,120,23)] autorelease];
    //theSlider.maximumValue=99;
    //theSlider.minimumValue=0;
    //[cell addSubview:theSlider];

//this is what you need to do:
[cell addSubview: [mySlidersArray objectAtIndex:indexPath.row]];

return cell;
} 
```

显然，您需要在 viewDidload 或其他任何地方设置一个名为“mySlidersArray”的滑块数组。

下一个编辑：这是我创建滑块数组的方法：

```
NSMutableArray *arrayOfSliders = [NSMutableArray arrayWithCapacity: 20];
for (int i =0; i<20; i++){
    UISlider *slider = [[UISlider alloc] init];
    //set the slider-properties here, like you already did in your code
    [arrayOfSliders addObject: slider];
} 
```

现在可以像上面的代码一样访问这些滑块。

另一种方法是为滑块保留一组值，并在实例化它们后将滑块设置为这些值。但这会导致性能非常差，因为会为屏幕上出现的每个单元格创建一个新滑块。

如果您需要更多帮助并玩得开心，请告诉我

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T10:08:01.070

你可以这样做，

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSString *CellIdentifier =[NSString stringWithFormat:@"Cell%d",indexPath.row];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier] autorelease];

        UISlider*  theSlider =  [[[UISlider alloc] initWithFrame:CGRectMake(174,12,120,23)] autorelease];
        theSlider.maximumValue=99;
        theSlider.minimumValue=0;
        [cell addSubview:theSlider];
    }
    return cell;

} 
```

# java - 通过 Method.invoke() 调用静态方法给了我 NPE

> ID：14933671
> 
> 赞同：5
> 
> 时间：2013-02-18T10:03:10.777
> 
> 标签：java, reflection, protocol-buffers

我正在处理 Google Protobuf 消息。

由于我需要设置对象的实例字段（其中一些是 Protobuff 消息），因此我编写了一个函数，该函数通过反射检索构建器并通过[protobuf-java-format](http://code.google.com/p/protobuf-java-format/)重新创建消息。

这是代码

```
for (String aFieldName : objectContentMap.keySet()) {
 Object aFieldNameValue = objectContentMap.get(aFieldName);
 if (aFieldNameValue != null) {
  Field theClassField = this.instance.getField(aFieldName);
  ReflectionUtils.makeAccessible(theClassField);
  Class<?> classType = theClassField.getType();
  if (!classType.isPrimitive() && 
   GeneratedMessage.class.isAssignableFrom(classType.getSuperclass())) {
   Method method = classType.getMethod("newBuilder");
   // Since the method is static, the instance object that undergoes the call is not important, but with "null" I have a NPE...
   Object builder = method.invoke(new Object()); 
   if (builder instanceof Builder) {
    Builder newBuilder = (Builder)builder;
    InputStream asd = new ByteArrayInputStream(((String)aFieldNameValue).getBytes());
    protoMapper.merge(asd, newBuilder);
    aFieldNameValue = newBuilder.build();
   }
  }
  theClassField.set(recreatedObject, aFieldNameValue);
 }
} 
```

此代码段按预期工作，但我的疑问在于，`Object builder = method.invoke(new Object());`当我调用静态方法时，我总是将`null`其作为实际参数。

在这种情况下，我有一个 NullPointerException。

有人知道为什么在 invoke() 实际参数中需要一个实例吗？

谢谢达里奥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:34:05.057

Method的javadoc说Method.invoke方法签名是：
“invoke（Object obj，Object ... args）”
它还说：
“如果底层方法是静态的，那么指定的obj参数将被忽略。它可能是null 。”

这意味着您的基础方法不是静态的。但是，您正在检查它是否是静态的，这是不正确的。

# box2d - box2d、setTransform 和碰撞

> ID：14933675
> 
> 赞同：2
> 
> 时间：2013-02-18T10:03:38.337
> 
> 标签：box2d, transform, libgdx, collision

我正在使用 body.setTransform 来移动我的一些对象。我知道这很糟糕，但这正是我的情况所需要的方式——身体遵循某些路径。当这样的物体被子弹击中时，它会停止在路径上移动（不再调用 body.setTransform()）并让物理行为。

问题是有时身体会发疯——似乎接触力等被应用于不同的身体值（坐标等）。结果，它开始旋转，苍蝇抛出其他物体。

这显然是 body.setTransform() 的问题，因为当我在路径上移动时，所有物理都很好。我的谷歌发现也证实了 body.setTransform() 可能会搞砸物理学。

我试图在接触后将所有速度设置为 0。这消除了接触冲击，身体不会移动。但是它的“物理数据”似乎仍然被破坏了——当它之后被什么东西击中时，它就不能正常工作了。

有什么方法可以“重置”使用 body.setTransform() 调和的主体，使其再次正常运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:26:41.133

用于`b2MouseJoint`沿路径移动身体并保持正确的身体行为。

# c - 内存管理 c

> ID：14933676
> 
> 赞同：-1
> 
> 时间：2013-02-18T10:03:38.670
> 
> 标签：c, free

所以我知道 mallocs 适用于堆而不是堆栈。

我有几个问题：

是否有任何代码被分配或释放？

我没有看到任何空闲语句，所以我假设没有任何内容被释放，所以内存泄漏是否正确？

只是出于好奇，如果我尝试释放 ptr，它会崩溃。如果我尝试释放手柄，它可以正常工作。

```
 int num;
        int *ptr;
        int **handle;

        num = 14;
        ptr = (int *)malloc(2 * sizeof(int));
        handle = &ptr;
        *ptr = num;
        ptr = &num;
        handle = (int **)malloc(1 * sizeof(int **)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T10:08:48.167

是的，此代码使用`malloc`调用分配内存。当您尝试`ptr`在最后释放时，您会看到崩溃，因为它被重新分配给`&num`，它是在堆栈上分配的并且不能被释放。取消分配堆栈变量不仅没有意义（因为无论如何它都会在函数退出时被丢弃），而且这样做也是不合法的，因为它没有被显式分配。您仍然可以释放`handle`，因为它仍然指向它分配的堆本地存储。

要回答您的另一个问题，是的，存在内存泄漏。此外，由于`ptr`已设置为指向其他位置，因此现在无法释放它指向的原始内存，因为您不再知道原始地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:11:09.747

是的，它使用未释放的内存分配内存`malloc`，因此存在泄漏。您已经用地址覆盖了分配内存`ptr`的地址，`num`因此您无法释放它。初始分配内存的地址丢失了，所以这是一个泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T10:11:20.600

如果没有释放，则存在内存泄漏。（检查它`valgrind`）

您无法释放`ptr`，因为它指向无法释放的堆栈变量内存区域（查看指令`ptr = &num;`）。

# javascript - sinatra javascript调用

> ID：14933685
> 
> 赞同：1
> 
> 时间：2013-02-18T10:03:53.827
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, sinatra

在 Rails 中，可以设置`:remote => true`为对 Web 应用程序进行远程调用。然后可以用 a`.js.erb`来响应更改元素。我将如何在 Sinatra 中创建它？我想对资源进行远程删除，如果成功，更新 Dom，否则抛出错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T13:38:52.527

在 Rails 中，`:remote => true`使用`link_to`helper 进行设置会产生以下输出：

```
<a href="#yoururl" data-remote="true">Linktext</a> 
```

通过以下方式观察到此链接`rails.js`：

```
$(document).on('click.remote', '[data-remote]', function() {
  $.ajax({
    url: $(this).attr('href'),
    type: $(this).data('method') || 'GET',
    // and so on...
  });
}); 
```

因此它实际上做的是`HTML`用属性标记你的链接`data-remote="true"`，然后通过`js`. 然后，`js.erb`您可以使用的模板通过`DOM`. （我个人认为这是一个坏主意）。

在 Sinatra 中，您可以执行几乎相同的操作：例如，使用一个`remote`类标记您的链接（它提供了比 rails 使用的更快的 js 查找 via `[data-remote]`：

```
<a href="#yoururl" class="remote">Your Link Text</a> 
```

然后通过 jQuery 绑定具有远程类的链接： 观察整个文档以查看源自具有远程类的元素的点击事件，就像 rails 那样：

```
$(document).on('click.remote', '.remote', function() {
  // a similar ajax call to the one rails uses
}); 
```

`JSON`然后，用in`sinatra`和回复[`Sinatra::JSON`](http://www.sinatrarb.com/contrib/json.html)：

```
get '/yoururl' do
  json :foo => 'bar'
end 
```

并对 ajax 调用的成功处理程序中的数据做你喜欢的事情。或者，您也可以使用用 erb 编写的脚本来响应（rails 就是这样做的`.js.erb`）：

```
get '/yoururl' do
  erb :"answer.js"
end 
```

# iphone - 在后台扫描外围设备

> ID：14933688
> 
> 赞同：1
> 
> 时间：2013-02-18T10:04:03.490
> 
> 标签：iphone, background

我的 BLE 应用程序在后台运行并扫描外围设备，但委托方法`centralManager:didDiscoverPeripheral:advertisementData:RSSI:`没有回调。我已经在 Info.plist 中为`UIBackgroundModes`. 为什么？如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T11:23:05.120

您无法在后台模式下扫描外围设备，只需打开与外围设备的连接并保留对该外围设备的引用。

之后你可以打电话

```
[peripheral1 readRSSI]; 
```

并等待 CBPeripheralDelegate 回调

```
peripheralDidUpdateRSSI: 
```

# python - 仅从 CSV 导入两列

> ID：14933691
> 
> 赞同：2
> 
> 时间：2013-02-18T10:04:13.077
> 
> 标签：python, sqlite

我有一个包含 20 列和 100 行的 CSV 文件。我想只使用其中的两列来创建一个 SQLite 数据库——第 1 列中的日期和第 10 列中的温度。我已经修改了我找到的一些示例代码，但不知道如何让它只使用这两列。

```
import csv, sqlite3
import sys

filename = sys.argv[-1]

con = sqlite3.connect("my.db")
con.execute("create table stats(date, temperature)")                               
cur = con.cursor()

stats = csv.reader(open(filename))

con.executemany("insert into stats(date, temperature) values (?, ?)", stats)

con.commit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:26:04.940

您可以使用[pandas](http://pandas.pydata.org/)仅*读取指定的列*并将它们写入`DB`

```
import sqlite3
from pandas.io import sql
import pandas as pd
from StringIO import StringIO

s = """Year,Make,Model
1997,Ford,E350
2000,Mercury,Cougar"""

f = StringIO(s)
df = pd.read_csv(f, usecols = ['Year','Model']) # reads specified cols
                                                # to a DataFrame

con = sqlite3.connect(':memory:')
sql.write_frame(df, name='test', con=con)

print sql.read_frame('select * from test', con) # reads data back 
                                                # to DataFrame 
```

出去：

```
 Year   Model
0  1997    E350
1  2000  Cougar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:05:15.723

```
con.executemany("insert into stats(date, temperature) values (?, ?)",
                ((rec[0], rec[9]) for rec in stats)) 
```

# c# - 如何使用 HTTPS 访问 WCF WebServiceHost 端点？

> ID：14933696
> 
> 赞同：2
> 
> 时间：2013-02-18T10:04:16.120
> 
> 标签：c#, visual-studio-2010, wcf, visual-studio, wcf-binding

我已成功创建`WCF self-hosted HTTP`Web 服务。我`webserviceHost`用来创建这个服务。我没有对`web.config`文件进行任何更改。这是我的代码：

实例.cs：

```
 [OperationContract, WebInvoke(Method = "GET", UriTemplate = "/getstatus/", ResponseFormat = WebMessageFormat.Json)]
    bool getstatus(); 
```

服务.cs：

```
 public bool getstatus()
    {
        return true;
    } 
```

绑定WS.cs

```
 void bindservice()
    {
        try
        {
            m_running = true;
            // Start the host
            m_serviceHost = new WebServiceHost(typeof(Swiper.cs), new Uri(http://localhost:8083"));
            ServiceEndpoint ep = m_serviceHost.AddServiceEndpoint(typeof(Instace.cs), new WebHttpBinding(), "");
            m_serviceHost.Open();
            while (m_running)
            {
                // Wait until thread is stopped
                Thread.Sleep(SleepTime);
            }

            // Stop the host
            m_serviceHost.Close();
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
            if (m_serviceHost != null)
            {
                m_serviceHost.Close();
            }
        }
    } 
```

上面的代码可以正常运行`WCF`。`Htpp`但我如何将其转换为`HTTPS`. 我关注了很多博客，但没有得到任何东西。有可能做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:11:01.943

基本上，您需要针对您在主机中使用的端口号手动注册证书。以下是有关如何完成此操作的一些详细信息

[http://msdn.microsoft.com/en-us/library/ms733791.aspx](http://msdn.microsoft.com/en-us/library/ms733791.aspx)

**21/2/13 更新：**

如果您已按上述方式为域注册了证书，您应该能够通过对上面的代码进行一些调整来使其正常工作。下面是一些使用控制台应用程序作为主机的示例代码。HTH。

```
 using (var serviceHost = new WebServiceHost(typeof(Swiper), new Uri("https://localhost:8083")))
        {
            var secureWebHttpBinding = new WebHttpBinding(WebHttpSecurityMode.Transport) { Name = "secureHttpWeb" };
            serviceHost.AddServiceEndpoint(typeof(ISwiper), secureWebHttpBinding, "");
            serviceHost.Open();
            Console.WriteLine("Service running...");
            Console.WriteLine("Press any key to stop service.");
            Console.ReadLine();

            // Stop the host
            serviceHost.Close();
        } 
```

# php - 支持所有邮件服务的 HTML 电子邮件生成

> ID：14933698
> 
> 赞同：-1
> 
> 时间：2013-02-18T10:04:21.930
> 
> 标签：php, html-email

是否有任何 PHP 脚本可以生成支持所有电子邮件客户端（如 Yahoo、Gmail、Outlook、Hotmail 等）的电子邮件模板？例如，似乎所有邮件服务都接受内联样式。那么有没有办法为`<style>...</style>`标签内提供的所有元素或类似的东西生成内联样式？我不能使用任何在线服务，因为我有 1000 个电子邮件模板，而且每天都在增加。因此，对此的任何建议或想法将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:18:55.843

Pommo 非常适合您想要的东西！

主要项目： http: [//pommo.org/Main_Page](http://pommo.org/Main_Page)
屏幕：[http](http://www.flickr.com/photos/26392873@N00/sets/72157594430337337/show/)
://www.flickr.com/photos/26392873@N00/sets/72157594430337337/show/ 下载：[https ://sourceforge.net/projects/pommo/文件/](https://sourceforge.net/projects/pommo/files/)

我用了几年，效果很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:35:20.303

我在网上找到了一些很棒的脚本。但是所有人都遇到了很多问题。以下库几乎可以满足我的需求，只是它不支持伪选择器。所以我决定暂时在我的电子邮件模板的 CSS 中避免使用它们。

就是这样，

[https://github.com/tijsverkoyen/CssToInlineStyles](https://github.com/tijsverkoyen/CssToInlineStyles)

它只是将所有样式转换为几乎所有电子邮件客户端都可以使用的内联 CSS。

# regex - 使用 sed 脚本忽略注释 (#)，但保持行不变

> ID：14933699
> 
> 赞同：1
> 
> 时间：2013-02-18T10:04:23.257
> 
> 标签：regex, shell, sed

这类似于以下问题：

[使用 sed 忽略注释 (#)，但保持行不变](https://stackoverflow.com/questions/4798149/ignore-comments-using-sed-but-keep-the-lines-untouched)

但是，不同之处在于，我没有进行一次替换，而是使用 sed 脚本文件进行了几次替换。

我想我可以将脚本的每一行都编辑为以下形式：

```
/^#/!s/orig/replace/g 
```

但是，对我来说，这似乎有点过多的复制和粘贴。

有没有更优雅的方式？

我正在使用的脚本是：

[http://www.cis.upenn.edu/~treebank/tokenizer.sed](http://www.cis.upenn.edu/~treebank/tokenizer.sed)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T10:07:08.233

您可以使用块：

```
/^#/!{s/a/b/;s/c/d/} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:16:23.277

您可以在脚本中使用 awk 而不是 sed 吗？一个 sed 脚本：

```
s/orig/replace/g
s/\(foo\)bar/\1dog/ 
```

可以逐行转换为 GNU awk 脚本：

```
{
   $0=gensub(/orig/,"replace","g")
   $0=gensub(/(foo)bar/,"\\1dog","")
}
{ print } 
```

然后，如果您不想处理以 # 开头的行，那么在进入操作块之前对 awk 脚本进行微不足道的调整以测试该条件：

```
!/^#/ {
   $0=gensub(/orig/,"replace","g")
   $0=gensub(/(foo)bar/,"\\1dog","")
}
{ print } 
```

如果您想这样做，这是您的 sed 脚本的前几次转换，可以帮助您继续：

```
# s=^"=`` =g
$0 = gensub(/^"/,"``","g")

# s=\([ ([{<]\)"=\1 `` =g
$0 = gensub(/([ ([{<])"/"\\1 ``","g")

# s=\.\.\.= ... =g
$0 = gensub(/\.\.\./," ... ","g")

# s=[,;:@#$%&]= & =g
$0 = gensub(/[,;:@#$%&]/," & ","g")

# s=\([^.]\)\([.]\)\([])}>"']*\)[       ]*$=\1 \2\3 =g
$0 = gensub(/([^.])([.])([])}>"']*)[    ]*$/,"\\1 \\2\\3","g") 
```

主要是您只需将`\(`sed更改为`(`awk，并将`\1`sed 更改`\\1`为 awk。

# python - 将字节数组保存到磁盘以减少内存消耗并提高速度？

> ID：14933700
> 
> 赞同：0
> 
> 时间：2013-02-18T10:04:31.097
> 
> 标签：python, arrays, file, file-io, multidimensional-array

我在数据库中有几千个相同区域的非常大的无线电遥测阵列字段。像素的地理参考对于所有阵列字段都是相同的。可以以全有或全无的方法将数组加载到内存中。

我想从所有数组字段中提取特定地理坐标的像素。目前，我查询特定地理坐标的特定像素的索引，然后将数据库中的所有数组字段加载到内存中。然而，这是非常 IO 密集型的，并且会使我们的系统过载。

我会想象以下内容：我将数组保存到磁盘，然后依次打开它们并寻找与像素对应的字节位置。我想这比将它们全部加载到内存要少得多，而且要快得多。

寻求一个职位被认为是一种快速的操作还是不会做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:59:42.370

查找操作所需的时间将以低毫秒为单位进行测量，在大多数情况下可能少于 10 毫秒。所以这不会是瓶颈。

但是，如果您必须以任何一种方式从数据库中检索和保存所有记录，您最终可能会得到大致相同的 IO 负载，甚至可能更大。写入文件的 IO 时间肯定大于读入内存的时间。

是时候做一个小实验了：) 用几个数组尝试它并计算性能，然后你可以做数学来看看它是如何扩展的。

# postgresql - 将子查询结果列合并为单个列，然后在 ORDER BY 中使用

> ID：14933713
> 
> 赞同：9
> 
> 时间：2013-02-18T10:05:22.507
> 
> 标签：postgresql, ruby-on-rails-3.2

我想执行一些这样的查询：

```
SELECT 
    folders.*, 
    (SELECT 
        files.filename 
     FROM 
        files 
     WHERE 
        files.folder_id = folders.id 
    ) 
    as files 
FROM 
        folders 
ORDER BY 
    files[column name of filename] 
```

子查询可能会给出超过 1 个结果，所以我想将结果加入到单个列文件名中。

我正在使用 Postgres。我将 Rails 添加为标签，因为您可能会建议一些可以处理此问题的 Rails 魔术。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-18T10:32:15.847

这将创建文件夹中所有文件的逗号分隔列表：

```
select folders.*,
       (SELECT string_agg(files.filename, ',')
        FROM files 
        WHERE files.folder_id = folders.id) as files
from folders 
```

如果您需要在逗号分隔列表中对文件名进行排序，您可以在较新的 Postgres 版本中使用 order by：

```
select folders.*,
       (SELECT string_agg(files.filename, ',' order by files.filename)
        FROM files 
        WHERE files.folder_id = folders.id) as files
from folders 
```

我不确定我是否理解“并在 ORDER BY 中使用它”的要求。如果该列包含多个文件，您如何期望总结果的正确顺序？您将需要向我们展示一些示例输出（基于一些示例数据）。

# c# - 在垂直菜单栏中向右显示子菜单

> ID：14933714
> 
> 赞同：0
> 
> 时间：2013-02-18T10:05:24.773
> 
> 标签：c#, wpf, menu

我有以下代码，它显示垂直菜单。

如何将要填充的子菜单放在右侧？

```
<Menu Background="Transparent" Foreground="Honeydew">
    <Menu.ItemsPanel>
        <ItemsPanelTemplate>
            <VirtualizingStackPanel Orientation="Vertical"/>
        </ItemsPanelTemplate>
    </Menu.ItemsPanel>
    <MenuItem Header="File">
        <MenuItem Header="File1"></MenuItem>
        <MenuItem Header="File1"></MenuItem>
        <MenuItem Header="File1"></MenuItem>
        <MenuItem Header="File1"></MenuItem>
    </MenuItem>
    <MenuItem Header="Edit">
        <MenuItem Header="File1"></MenuItem>
        <MenuItem Header="File1"></MenuItem>
        <MenuItem Header="File1"></MenuItem>
        <MenuItem Header="File1"></MenuItem>
    </MenuItem>
</Menu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:12:15.200

尝试这个。

```
<MenuItem Header="File">
    <MenuItem Header="File1">
        <MenuItem Header="SubMenu1">
            <MenuItem Header="SubSubMenu1" />
            <MenuItem Header="SubSubMenu1" />
        <MenuItem Header="SubMenu2"/>
    </MenuItem>
    <MenuItem Header="File1"></MenuItem>
</MenuItem> 
```

# node.js - 检测数据库何时启动

> ID：14933719
> 
> 赞同：0
> 
> 时间：2013-02-18T10:05:37.420
> 
> 标签：node.js, mongodb

我有一个带有 MongoDB 数据库的 Node.JS 服务器。我在 Node.JS 中启动数据库，如下所示：

```
(function startDatabase() {
    exec('killall -15 mongod; mongod --dbpath ./db', function (err, stdout, stderr) {
        if(err) {
            console.error('Database error! Aborting.');
            process.exit(1);
        }
    });
}()); 
```

这种方法的问题是我无法知道数据库是否已成功启动，因为`mongod`永远不会返回（除非出现错误），所以我永远无法看到`stdout`.

如何在 Node.JS 中启动 MongoDB 数据库并检测它何时启动？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-18T11:26:57.863

你可以做 ：

```
service mongod status    //check status
service mongod start     //start
service mongod stop      //stop
service mongod restart   //restart 
```

或代替`service mongod` `/etc/init.d/mongod`

startDatabase 应该使用`service mongod start`不杀死服务然后启动。它不是优雅的关闭，您可能会丢失数据/损坏的文件。如果要重新启动它，请使用`service mongod restart`. 但检查状态以停止或重新启动。

# android - 子菜单项的android图标不出现

> ID：14933724
> 
> 赞同：1
> 
> 时间：2013-02-18T10:05:50.727
> 
> 标签：android, android-menu

我有这个菜单

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/sortFoods"
        android:icon="@drawable/sort_neutral"
        android:title="Sort">
        <menu>
            <item
                android:id="@+id/sortAlphabaticallyAsc"
                android:icon="@drawable/sort_up"
                android:title="Sort Alphabatically ASC"/>
            <item
                android:id="@+id/sortAlphabaticallyDes"
                android:icon="@drawable/sort_down"
                android:title="Sort Alphabatically DES"/>
            <item
                android:id="@+id/sortPriceAsc"
                android:title="Sort By Price ASC"/>
            <item
                android:id="@+id/sortPriceDes"
                android:title="Sort By Price DES"/>
        </menu>
    </item>
</menu> 
```

项目的图标`sortFoods`出现了，但是它旁边的项目的图标没有出现，请问为什么？解决办法是什么 ？感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:33:06.853

检查[菜单](http://developer.android.com/guide/topics/ui/menus.html)

`Icon Menu` 这是按下 MENU 键时最初在屏幕底部可见的项目集合。它最多支持六个菜单项。这些是唯一支持图标的菜单项和唯一不支持复选框或单选按钮的菜单项。

# javascript - 在 jquery-ui 中更改活动手风琴和父选项卡的 css

> ID：14933727
> 
> 赞同：0
> 
> 时间：2013-02-18T10:06:00.463
> 
> 标签：javascript, jquery, jquery-ui

我对 jquery 有点陌生，所以对如何选择父选项卡或只是在当前手风琴上添加效果感到困惑。我在 php 条件下的脚本中编写的任何代码都不会对 .ui-widget-header 的 css 进行任何可见的更改，这很可能是因为我没有选择父元素本身。

让我给出我的代码的必要片段

```
<div id="tabs">
<ul>
    <li><a href="#tabs-1">Tab 1</a></li>
    <li><a href="#tabs-2">Tab 2</a></li>
    <li><a href="#tabs-3">Tab 3</a></li>
</ul>
<div id="tabs-1">
    <div id="accordion">

       <div> Some content </div>
       <div> 
           <?php  
           //Perform some query
           if (mysqli_num_rows($query)==0)
           //Make background of current accordion, and parent tab red. Add jquery script here
           echo "<script type='text/javascript'> </script>";//No clue what should be within this script, hence blank...
//Probably something like  $("accordion").parent("#tabs").css( background-color: red;background-image: none;)
//OR $(this).parents('div#tabs').css( background-color: red;background-image: none;)
           ?> 
       </div>
       <div>
          2nd accordion. There should be no effect here. 
       </div>
   </div>
   ..... 
```

jsfiddle.net/buKLE/8 上提供了一个经过修改的剪辑...目前只有标签和手风琴。如果可能，尝试只更改 tab1 的 css，假设手风琴第 2 节有错误。是否有可能仅更改该手风琴的颜色，因为所有手风琴都绑定在一起...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:22:55.147

您非常接近，您的代码中有两个小错误。

您错过了井号，并采用了错误的遍历方法：

```
 ↓ only traverses one level up
$("accordion").parent("#tabs") 
```

应该：

```
 ↓ hash       ↓ traverses upwards, until the selector matches or top is reached
$("#accordion").parents("#tabs") 
```

# netbeans - 在Netbeans中关闭查找功能（ctrl + f）的快捷键？

> ID：14933732
> 
> 赞同：1
> 
> 时间：2013-02-18T10:06:21.147
> 
> 标签：netbeans, keyboard-shortcuts, netbeans-7

Netbeans中是否有关闭或重置查找功能（ctrl + f）的快捷键？

PS。ESCAPE 确实有效，但即使我的光标在搜索字段中未激活，我也希望能够关闭它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:09:01.237

只需按 Escape 即可关闭查找窗口。

# silverlight - Silverlight MVVM 与非 MVVM

> ID：14933734
> 
> 赞同：1
> 
> 时间：2013-02-18T10:06:23.430
> 
> 标签：silverlight, mvvm, visual-studio-2012

我即将优化一个银灯应用程序，它是由一些 MVVM 和一些常规代码（后面的代码）组成的，所以我的问题是，我应该继续 MVVM 模式，还是应该全力以赴地编写代码背后的逻辑类等等？

该应用程序仅用于显示统计信息，因此它从 SQL DB 接收一些数据，然后将它们显示在一些图表中等等.. 就是这样..

您认为 MVVM 或没有 MVVM 是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:10:59.550

对于这个应用程序，我认为 MVVM 是一种矫枉过正，我已经彻底使用过 MVVM，我可以告诉你，当你有那些典型的 CRUD 场景时很棒，但是对于这样的应用程序，我会选择 Non-MVVM

# linux - 单声道 - 找不到命令

> ID：14933739
> 
> 赞同：0
> 
> 时间：2013-02-18T10:06:47.217
> 
> 标签：linux, mono, centos

我正在`mono 2.10`继续`CentOS 5.5`。`Apache 2`我已经安装了它，`WCF service`目前正在运行它。

但我不能做`mono -V`or `mono program.exe`，这让我觉得我安装不正确。单声道二进制文件在我的`/opt/mono/bin/`文件夹中。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:39:09.930

尝试`/opt/mono/bin/mono --version`

# ios - 检查 App 是否在 App Store 中评分

> ID：14933740
> 
> 赞同：2
> 
> 时间：2013-02-18T10:06:51.010
> 
> 标签：ios, xcode4.5, appirater

当我要发布这个问题时，我已经浏览了所有提示的链接。还有这个，[有没有办法检查用户是否在应用商店对你的应用进行了评分？](https://stackoverflow.com/questions/5318666/is-there-a-way-to-check-if-a-user-has-rated-your-app-on-the-app-store)

我想知道是否有任何方法可以知道我的应用程序是否已被用户评分。PS：我已经使用 appirater 来实现对所需事件的提示......它工作正常。提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:13:52.667

您可以查看[AppReviews](https://github.com/gambcl/AppReviews)，它查询应用商店的评论。但是请注意，Apple 将这些视为私有 API，因此它们可能不允许您在应用程序中查询它们。

# javascript - FabricJS绘图图像消失

> ID：14933747
> 
> 赞同：0
> 
> 时间：2013-02-18T10:07:09.930
> 
> 标签：javascript, function, drawing, fabricjs

我是 FabricJS 库的新手，我将它用于以下用途，我的屏幕左侧有一个可拖动对象，它只能在 y 方向上拖动。一个函数读出这个对象的 y 位置，然后它取决于需要绘制的三角形的高度。

但是在绘制三角形 2-3 秒后消失并且不再显示......

这是我的代码。

```
function drawObject() {
    if (being_dragged == true && y <= 440) {
        document.getElementById(element).style.top = y + 'px';
        y_height_1 = y;
        if (y_height_1 > y_height_2) {
            y_final--;
            y_height_2 = y_height_1;
        } else {
            y_final++;
        }

        drawRoof();
    }
}

function drawRoof() {
    var canvas = new fabric.Canvas('canvas');

    var roof = new fabric.Triangle({
        width: 200,
        height: y_final / 2,
        fill: 'blue',
        left: 150,
        top: 200
    });

    canvas.add(roof);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:52:20.507

拖动时是否在制作新对象？我看不到它是代码的一部分。

你的意思是这样的吗？？>>[小提琴](http://jsfiddle.net/gyBMn/)

```
var canvas = new fabric.Canvas('canvas');
var roof = new fabric.Triangle({ width: 200,  height: 200, fill: 'blue', left: 250,  top: 200    });
var handler = new fabric.Circle({ radius: 15, fill: '#ccc', top: 300, left: 40 }); 
handler.hasControls = handler.hasBorders = false;

handler.lockMovementX = true;
canvas.add(roof, handler);

canvas.on({'object:moving' : resizeTriangle});

function resizeTriangle(e) {
    roof.height = e.target.getTop();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T10:29:10.163

请看一下这个工作小提琴。

[http://jsfiddle.net/Ahammadalipk/w8kkc/185/](http://jsfiddle.net/Ahammadalipk/w8kkc/185/)

```
window.onload = function () {

        var canvas = new fabric.Canvas('canvas');

        /* 
        NOTE: the start and end handlers are events for the <img> elements; the rest are bound to 
        the canvas container.
        */

        function handleDragStart(e) {
            [].forEach.call(images, function (img) {
                img.classList.remove('img_dragging');
            });
            this.classList.add('img_dragging');
        }

        function handleDragOver(e) {
            if (e.preventDefault) {
                e.preventDefault(); 
            }

            e.dataTransfer.dropEffect = 'copy';
            return false;
        }

        function handleDragEnter(e) {                
            this.classList.add('over');
        }

        function handleDragLeave(e) {
            this.classList.remove('over'); 
        }

        function handleDrop(e) {               
            if (e.stopPropagation) {
                e.stopPropagation(); // stops the browser from redirecting.
            }

            var img = document.querySelector('#images img.img_dragging');

            var newImage = new fabric.Image(img, {
                width: img.width,
                height: img.height,
                // Set the center of the new object based on the event coordinates relative
                // to the canvas container.
                left: e.layerX,
                top: e.layerY
            });
            newImage.hasControls = newImage.hasBorders = false;
            canvas.add(newImage);

            return false;
        }

        function handleDragEnd(e) {
            // this/e.target is the source node.
            [].forEach.call(images, function (img) {
                img.classList.remove('img_dragging');
            });
        }

        if (Modernizr.draganddrop) {

            var images = document.querySelectorAll('#images img');
            [].forEach.call(images, function (img) {
                img.addEventListener('dragstart', handleDragStart, false);
                img.addEventListener('dragend', handleDragEnd, false);
            });

            var canvasContainer = document.getElementById("canvas-container");
            canvasContainer.addEventListener('dragenter', handleDragEnter, false);
            canvasContainer.addEventListener('dragover', handleDragOver, false);
            canvasContainer.addEventListener('dragleave', handleDragLeave, false);
            canvasContainer.addEventListener('drop', handleDrop, false);
        } else {

            alert("This browser doesn't support the HTML5 Drag and Drop API.");
        }
    } 
```

# servlets - 如何读取 HttpServletRequest 的主体，其中请求标头内容类型为 java 中的 application/x-www-form-urlencoded

> ID：14933749
> 
> 赞同：1
> 
> 时间：2013-02-18T10:07:10.993
> 
> 标签：servlets

我的`HTTPServletRequest`包含以下信息..

```
headers: 
  Accept-Encoding: gzip, deflate
  X-Chargify-Webhook-Signature: b048ad28f573829f52f05208aa522a6f
  X-Chargify-Webhook-Id: "8233897"
  Content-Type: application/x-www-form-urlencoded
  Accept: "*/*; q=0.5, application/xml"
  Content-Length: "47"
body: payload[chargify]=testing&id=8233897&event=test 
```

现在，如何从请求中读取正文并将正文分成键/值对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:19:47.267

在`Servlet service()`方法中有`HttPServlerRequest`对象。

通过使用此 Request 对象调用`request.getParameter(paramName)`，您可以从请求对象中获取值

[参考](http://www.kodejava.org/examples/127.html)

# google-chrome - 还记得我的浏览器选项吗？

> ID：14933755
> 
> 赞同：4
> 
> 时间：2013-02-18T10:07:40.507
> 
> 标签：google-chrome, gwt, browser

我想使用 gwt(google web toolkit) 在我的网站中使用记住我的选项。我希望当用户填写 ID 和密码并单击登录时，浏览器选项（弹出窗口）像现在记住密码一样打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:46:33.460

将属性添加`AutoComplete`到您的输入字段

```
usernamebox.getElement().setAttribute("autocomplete", "on");

passwordbox.getElement().setAttribute("autocomplete", "on"); 
```

# android - 当有超过 1 个手指触摸地图时，phonegap 中的地图框出现错误

> ID：14933756
> 
> 赞同：0
> 
> 时间：2013-02-18T10:07:48.620
> 
> 标签：android, cordova, mapbox

我有一个地图框，它正在工作，但在地图上进行多点触控时出现错误

```
Uncaught TypeError: Cannot read property 'y' of undefined at 
http://api.tiles.mapbox.com/mapbox.js/v0.6.7/mapbox.js:3 
```

我相信这是基于帖子[https://github.com/mapbox/mapbox.js/issues/122的 mapbox 的错误](https://github.com/mapbox/mapbox.js/issues/122)

但还没有看到解决方案。有没有办法在phonegap android中禁用多点触控作为解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T19:52:59.237

这已在最新版本的 mapbox - 1.0.2 中得到修复。

MapBox 1.0+ 是一个重大更新。我的意思是可能必须重写旧代码。

# sql - 使用 FOR XML PATH 优化查询以显示来自另一个表的逗号分隔值

> ID：14933759
> 
> 赞同：0
> 
> 时间：2013-02-18T10:07:57.913
> 
> 标签：sql, sql-server-2008, query-performance

我有以下查询，8179 条记录大约需要 39 秒。

```
SELECT PT.P_Name as Prisoner_Type,       PE.PID_No,PE.Jail_Code,PE.Entry_Year,Convert(varchar(10),PE.Admission_Date,103) Admission_Date,
            PE.JID_No,Convert(varchar(10),PE.Release_Date,103) Release_Date
            ,   PM.Prisoner_Name, SUBSTRING(PM.Father_Name, 0, 17)as Father_Name, PM.Mother_Name,PM.Spouse_Name,PM.Caste_Code, PM.Religion_Code
            ,PM.Occupation_Code,PM.Qualification,PM.Tendency_Type,PM.Risk_Type,PM.Annual_Income_Code,PM.Marital_Status_Code,PM.Id_Mark
            , PM.Sex_Code,PM.Nationality_Code,PM.Off_Code,PM.Present_Add, Age as age ,PM.Permt_Add
            , LS.Location  AS Location
            ,NT.Nation_Name 
            , JT.Jail_Address
            ,OT.Offence_Name
            ,QT.Qualification as quali
            ,IT.Annual_Income_Range
            ,CT.Caste_Name 
            ,RT.Religion_Name
            ,MT.Marital_Status_Name
            ,OFT.Occ_Name AS Occupation
                 , STUFF((    SELECT ', ' + cc.Act_Sec AS [text()]  FROM CourtCases cc WHERE cc.PID_NO = PE.PID_NO and  cc.Case_No in (SELECT value from fnNTextToIntTable(pe.Case_No)) group by cc.Act_Sec FOR XML PATH('')     ),1, 1, '' )  AS [Act_Sec] 
                 , STUFF((    SELECT ', ' + Convert(varchar(10),CC.Fir_Date,103) AS [text()] FROM CourtCases cc WHERE cc.PID_NO = PE.PID_NO and  cc.Case_No in (SELECT value from fnNTextToIntTable(pe.Case_No)) group by  Convert(varchar(10),CC.Fir_Date,103)  FOR XML PATH('')     ),1, 1, '' )  AS [Fir_Date] 
                 ,STUFF((    SELECT ', ' + FIR_No AS [text()] FROM CourtCases cc WHERE cc.PID_NO = PE.PID_NO and  cc.Case_No in (SELECT value from fnNTextToIntTable(pe.Case_No)) group by FIR_No FOR XML PATH('')     ),1, 1, '' )  AS [FIR_No]  
                 ,  STUFF((    SELECT ', ' + ct.Court_Name AS [text()]  FROM CourtCases cc inner join Court_Tab as ct  ON cc.Court_Code=convert(nvarchar(50),ct.Court_Code) WHERE cc.PID_NO = PE.PID_NO and  cc.Case_No in (SELECT value from fnNTextToIntTable(pe.Case_No)) group by  ct.Court_Name FOR XML PATH('')     ),1, 1, '' ) AS [Court_Name]  
                 , STUFF((    SELECT ', ' + pt.PS_Name AS [text()]   FROM CourtCases cc inner join PS_Tab as pt  ON convert(nvarchar(50),cc.PS_Code)=convert(nvarchar(50),pt.PS_Code) WHERE cc.PID_NO = PE.PID_NO and  cc.Case_No in (SELECT value from fnNTextToIntTable(pe.Case_No)) group by pt.PS_Name FOR XML PATH('')     ),1, 1, '' )  AS [PS_Name]  
                            FROM PrisonMaster AS PM  INNER  JOIN   PrisonerEntry    AS PE        ON PE.PID_No = PM.PID_No  AND   PE.Jail_Code=141INNER   JOIN  Nation_Tab       AS NT        ON PM.Nationality_Code = NT.Nation_Code
                              INNER JOIN  Sex_Tab           AS S         ON PM.Sex_Code = S.Sex_Code 
                               INNER  JOIN  Jail_Tab        AS JT        ON PE.Jail_Code = JT.Jail_Code 
                               INNER   JOIN  Prisoner_Tab   AS PT        ON PE.Prisoner_Type=PT.P_Type 
                               INNER  JOIN  Loc_Status     AS LS        ON PE.Location=LS.Loc_Status 
                               left JOIN   Offence_Tab AS    OT        ON OT.Offence_Code=PM.Occupation_Code 
                               left JOIN Qualification_Tab AS QT       ON QT.Q_Code=PM.Qualification 
                               left JOIN Income_Tab AS IT                ON IT.Annual_Income_Code=PM.Annual_Income_Code 
                               left JOIN Caste_Tab AS CT                 ON CT.Caste_Code=PM.Caste_Code 
                               LEFT JOIN Religion_Tab AS RT          ON RT.Religion_Code=PM.Religion_Code 
                               LEFT JOIN Marital_Tab AS MT               ON MT.Marital_Status_Code=PM.Marital_Status_Code
                                LEFT JOIN Occupation_Tab AS OFT          ON     OFT.Occ_Code=PM.Occupation_Code 
                                WHERE     PE.Admission_Date BETWEEN convert(datetime,'Jan  1 2009 12:00AM',103) and  convert(datetime,'Dec 31 2009 12:00AM',103)order by  PE.PID_No 
```

如果我 commnet 出`for xml path` 5 列，它会在 1 秒内运行。

```
, STUFF((    SELECT ', ' + cc.Act_Sec AS [text()]  FROM CourtCases cc WHERE cc.PID_NO = PE.PID_NO and  cc.Case_No in (SELECT value from fnNTextToIntTable(pe.Case_No)) group by cc.Act_Sec FOR XML PATH('')     ),1, 1, '' )  AS [Act_Sec] 
                 , STUFF((    SELECT ', ' + Convert(varchar(10),CC.Fir_Date,103) AS [text()] FROM CourtCases cc WHERE cc.PID_NO = PE.PID_NO and  cc.Case_No in (SELECT value from fnNTextToIntTable(pe.Case_No)) group by  Convert(varchar(10),CC.Fir_Date,103)  FOR XML PATH('')     ),1, 1, '' )  AS [Fir_Date] 
                 ,STUFF((    SELECT ', ' + FIR_No AS [text()] FROM CourtCases cc WHERE cc.PID_NO = PE.PID_NO and  cc.Case_No in (SELECT value from fnNTextToIntTable(pe.Case_No)) group by FIR_No FOR XML PATH('')     ),1, 1, '' )  AS [FIR_No]  
                 ,  STUFF((    SELECT ', ' + ct.Court_Name AS [text()]  FROM CourtCases cc inner join Court_Tab as ct  ON cc.Court_Code=convert(nvarchar(50),ct.Court_Code) WHERE cc.PID_NO = PE.PID_NO and  cc.Case_No in (SELECT value from fnNTextToIntTable(pe.Case_No)) group by  ct.Court_Name FOR XML PATH('')     ),1, 1, '' ) AS [Court_Name]  
                 , STUFF((    SELECT ', ' + pt.PS_Name AS [text()]   FROM CourtCases cc inner join PS_Tab as pt  ON convert(nvarchar(50),cc.PS_Code)=convert(nvarchar(50),pt.PS_Code) WHERE cc.PID_NO = PE.PID_NO and  cc.Case_No in (SELECT value from fnNTextToIntTable(pe.Case_No)) group by pt.PS_Name FOR XML PATH('')     ),1, 1, '' )  AS [PS_Name] 
```

我如何组合这五列以便优化查询。我已经在所有表`PID_No`上创建了索引。`Case_No`

和查询中的这一部分

```
and  cc.Case_No in (SELECT value from fnNTextToIntTable(pe.Case_No)) 
```

因为监狱表有逗号分隔 Case_No

# tdd - c# TDD 第一次在ServiceBase中

> ID：14933764
> 
> 赞同：3
> 
> 时间：2013-02-18T10:08:05.980
> 
> 标签：tdd, nunit, ninject, moq, ninject-2

我第一次尝试实现测试驱动的开发。我的项目是 dotnet 3.5 中的 ac#。我已经阅读了 C# 中的专业测试驱动开发一书，现在我想测试包含 Windows 服务的项目。我读过最佳实践是所有代码都必须经过测试。以下是我的 Windows 服务实现方法 onStart 和 onStop

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Diagnostics;
using System.ServiceProcess;
using System.Text;
using System.Threading;
using log4net;

namespace MyUcmaService
{
 public partial class MyUcmaService : ServiceBase
 {
    private Worker _workerObject;
    private static MyUcmaService aMyUcmaService;
    private Thread _workerThread;
    private static ILog _log = LogManager.GetLogger(typeof(MyUcmaService));

    public MyUcmaService()
    {
        InitializeComponent();
        aMyUcmaService = this;
    }

    protected override void OnStart(string[] args)
    {
        // TODO: inserire qui il codice necessario per avviare il servizio.
        //Debugger.Launch();
        AppDomain.CurrentDomain.UnhandledException += AppDomainUnhandledException;
        try
        {
            _workerObject = new Worker();
            _workerThread = new Thread(_workerObject.DoWork);

            // Start the worker thread.
            _workerThread.Start();

        }
        catch (Exception ex)
        {
            HandleException(ex);
        }
    }

    protected override void OnStop()
    {
        // TODO: inserire qui il codice delle procedure di chiusura necessarie per arrestare il servizio.
        try
        {
            _workerObject.RequestStop();
            _workerThread.Join();
        }
        catch (Exception ex)
        {
            HandleException(ex);
        }
    }

    private static void AppDomainUnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        HandleException(e.ExceptionObject as Exception);
    }

    private static void HandleException(Exception ex)
    {
        if (ex == null)
            return;
        _log.Error(ex);

        if (aMyUcmaService != null)
        {
            aMyUcmaService.OnStop();
        }

      }
    }
   } 
```

你能告诉我如何在这里实现 tdd 吗？感谢您的回复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T10:13:39.943

**您不会对服务进行 TDD，**而是对服务将用于完成其工作的对象进行 TDD。

这有几个优点

*   您的对象从一开始就与服务、GUI 或其他对象使用无关。
*   在任何单元测试框架中创建、测试和销毁普通对象比启动、测试和停止服务要容易和快速得多。

底线

*   **TDD 你自己的代码**，并把尽可能多的第三方设置排除在外*（TDD'ing 其他人的代码首先是矛盾的:)）*
*   让服务使用您的对象。
*   自动化您的测试用例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T18:16:00.293

因为我**刚刚**在工作中重构了 4 个现有的 Windows 服务，所以我忍不住要提供一个额外的答案！

我所做的是完全剥离 Windows 服务类，并`ServiceBase`为 4 种不同的实现创建我自己的 4 派生类。最根本的原因是，由于其不方便的测试周期，*测试您的 windows 服务真的很痛苦：*

应用更改、构建、卸载 windows 服务、安装更新的 windows 服务、测试、调试和重复...

对我来说，对 Windows 服务进行 TDD 的主要目的是：

*   解决所有死锁问题。
*   验证是否调用了对其他对象的委托调用。
*   **大幅缩短开发-测试周期以加快开发速度！**

我从您的代码示例中认识到同样的需求。请允许我展示我自己的简化代码来描绘您可以做些什么来成功 TDD 您的 Windows 服务。

我将首先展示测试，因为这是有趣的部分。我将在测试下方添加一些已实现类的片段作为参考。

## 我的 [SetUp] 和单元测试

在真正的东西开始之前的一些设置东西......

```
 private MockRepository _mocks;
    private IAdminLayer _adminLayer;
    private IAlertSchedule _alertingServices;
    private IAlertManager _alertingManager;
    private AutoResetEvent _isExecutedSuccesful;
    private AdministratorAlertingService _alertingService;

    [SetUp]
    public void Setup()
    {
        _isExecutedSuccesful = new AutoResetEvent(false);

        _mocks = new MockRepository();
        _adminLayer = _mocks.DynamicMock<IAdminLayer>();
        _alertingServices = _mocks.DynamicMock<IAlertSchedule>();
        _alertingManager = _mocks.DynamicMock<IAlertManager>();
        var settings = _mocks.DynamicMock<ISettingsService>();

        using (_mocks.Record())
        {
            Expect.Call(_adminLayer.LogSource).Return("myLogSource").Repeat.Any();
            Expect.Call(_adminLayer.Settings).Return(settings);
            Expect.Call(settings.IsInitialised()).Return(true);
            Expect.Call(settings.GetAlertSchedule()).Return(_alertingServices);
        }
        _alertingService = new AdministratorAlertingService(_adminLayer, null);
    } 
```

测试`OnStart`行为：

```
 [Test]
    public void AlertingServiceTestOnStart()
    {
        new Thread(ExecuteOnStart).Start();
        Assert.IsTrue(_isExecutedSuccesful.WaitOne());
        Assert.IsTrue(_alertingService.ServiceTimer.Enabled);
    }

    private void ExecuteOnStart()
    {
        _alertingService.OnStart();
        _isExecutedSuccesful.Set();
    } 
```

测试`OnPause`行为：

```
 [Test]
    public void AlertingServiceTestOnPause()
    {
        new Thread(ExecuteOnPause).Start();
        Assert.IsTrue(_isExecutedSuccesful.WaitOne());
        Assert.IsFalse(_alertingService.ServiceTimer.Enabled);
    }

    private void ExecuteOnPause()
    {
        _alertingService.OnPause();
        _isExecutedSuccesful.Set();
    } 
```

## 我对服务功能的实现

一段有趣且最有意义的部分：

```
public abstract class AdministratorServiceBase
{
    protected readonly IAdminLayer AdminLayer;
    protected readonly ServiceBase Service;
    public Timer ServiceTimer = new Timer();      
    protected AutoResetEvent ResetEvent = new AutoResetEvent(true);

    protected AdministratorServiceBase(IAdminLayer adminLayer, ServiceBase service, string name, string logname, string logsource, string version)
    {
        // Removed irrelevant implementation
        ServiceTimer.Elapsed += ServiceTimerElapsed;
    }

    public virtual void OnStart()
    {
        try { // Removed irrelevant implementation }
        catch (Exception ex)
        {
            HandleException(" detected a failure (trying to start).", ex, true, true);
        }            
    }

    // Same story for the other service methods...
    public virtual void OnPause() {}
    public virtual void OnContinue() {}
    // ..
    // ..
} 
```

你如何在真正的 WindowsService 类中使用*你的*服务类

（这是视觉基础，但这不会有太大的不同）

```
Public Class Service1

    Private ReadOnly _alertingService As AdministratorAlertingService = New AdministratorAlertingService(AdminLayer.GetSingleInstance(), Me)

    Protected Overrides Sub OnStart(ByVal args() As String)
        _alertingService.OnStart()
    End Sub

    Protected Overrides Sub OnPause()
        _alertingService.OnPause()
    End Sub

    // etc etc 

End Class 
```

* * *

两天重构了4个windows服务，收益不可估量！TDD 确实帮助我提供了质量。

* * *

## 回复您的评论

我的 Windows 服务类是`Service1`视觉基础类。它创建一个 `AdministratorAlertingService`.

```
Private ReadOnly _alertingService As AdministratorAlertingService = 
    New AdministratorAlertingService(/* parameters /*) 
```

`AdministratorAlertingService`扩展了`AdministratorServiceBaseClass`包含我的其他 Windows 服务也具有的共享行为（计时器、启动、暂停、停止）。

如果您只有一个 Windows 服务，那么您当然不需要基类。

在我的单元测试中，我创建了一个新的 SuT（被测对象），在这种情况下它是一个新的`AdministratorAlertingService`，我使用`AutoResetEvent`. Windows 服务完成的“实际工作”在专门针对这些类的单元测试中进行了模拟和测试。

这样您就可以（并且应该）对 Windows 服务进行 TDD。它将大大减少您的 Windows 服务的开发测试周期。

您可以选择将集成测试添加到您的测试套件以测试完整的功能：您委托的手写启动、暂停、停止行为，您不模拟执行实际工作的类的功能。我在我的 AdministratorServices 中获得了最多的 TDD。

* * *

我希望它有帮助！享受您的 TDD 冒险。

# php - 将数据从mysql db提取到另一个

> ID：14933765
> 
> 赞同：1
> 
> 时间：2013-02-18T10:08:08.963
> 
> 标签：php, mysql

我有两个结构相同的mysql数据库。

我想将选定的数据从一个数据库转移到另一个数据库。

其中一个表包含多行数据，我正在查看循环遍历行并插入到第二个数据库表中，但意识到一旦我连接到第二个数据库，我将失去与第一个数据库的连接，并且循环将失败。

是一种健壮且“正确”的做法，而不是创建一个数组，然后在数组的第二个数据库中运行插入循环？

目前我正在使用两个不同的凭证来访问每个数据库。

我使用的 API 函数是 mysql_query 和 mysql_insert。

我需要这样做的原因是我有一个后端系统，允许我将模板上传到服务器，有些是实时的，有些不是。

第二个数据库保存用户详细信息和他们选择的任何模板的详细信息。

顺便说一句，我正在使用 php。

非常感谢，我希望我不是要你用勺子喂我

干杯巴里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:07:28.150

您可以通过在 mysql_* 函数中使用 $link_identifier 参数同时使用 2 个连接：

```
$connection1 = mysql_connect('host1', 'user1', 'password1');
$connection2 = mysql_connect('host2', 'user2', 'password2');

... 

$resource = mysql_query('SELECT .....', $connection1);

...

mysql_query('INSERT .....', $connection2);

...

mysql_close($connection1);
mysql_close($connection2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:38:07.727

1.  mysql_connect 有一个额外的参数`new_link`。
2.  mysql_connect 返回一个连接资源。
3.  mysql_* 函数可以使用该资源变量在特定连接上进行调用。

因此，只需创建 2 个返回其资源的连接，然后使用这些资源变量告诉 mysql_query() 使用哪个数据库

# javascript - 如何通过javascript点击html链接访问SDcard ..？

> ID：14933766
> 
> 赞同：3
> 
> 时间：2013-02-18T10:08:11.853
> 
> 标签：javascript, android, jquery, html, browser

**编辑：**

基本上我想要一个嵌入了 javascript 或 Jquery 的 Html 文件，它可以直接访问 SDCARD 内容，同时在浏览器中打开它（因为它是一个 html 文件）。因为它可以通过一个活动访问，我已经发布了它的代码，但我想要直接点击 SDCARD 文档，而不是从 android 应用程序。

**发表：**

我有一个存储在 Sdcard 中的 HTML 文件，其中包含用于访问 SD 卡内容的 javascript 代码。

我已经从 Activity 和 webView 测试了相同的代码，它工作正常，但我想要的是，`content to be displayed on directly clicking on HTML Link`而不是通过 Activity。

有什么方法可以编写`Android permissions in HTML CODE`。或者我如何使用 HTML、JavaSCRIPT 或 JQUERY 等直接访问它。

代码如下：

```
<!DOCTYPE HTML>
<html>
<head>
<title>Cordova</title>
<script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>

<script type="text/javascript" charset="utf-8">

     var edt=document.getElementById("")

    function getFileSystem() {
        window.LocalFileSystem = window.requestFileSystem
                || window.webkitRequestFileSystem;

        alert("====== hey its me===");

        window.requestFileSystem(1, 0, onFileSystemSuccessUpload, fail);    
       }

    function fail() {
        console.log("Error getting system");
    }

    function onFileSystemSuccessUpload(fileSystem) {
        // get directory entry through root and access all the folders
        var directoryReader = fileSystem.root.createReader();

        // Get a list of all the entries in the directory
        directoryReader.readEntries(successReader, fail);

    }

    function successReader(entries) {
        var i;
        for (i = 0; i < entries.length; i++) {
            //alert(entries[i].name);
            document.write("<p>" + entries[i].name+"</p>");
            //document.getElementById("text1").innerHTML = "" + entries[i].name;
            if (entries[i].isDirectory == true) {
                var directoryReaderIn = entries[i].createReader();
                directoryReaderIn.readEntries(successReader, fail);

            }

        }
    }
</script>
</head>
<body>
        <a onclick="getFileSystem()" href="javascript:void(0);">Click here to View File System</a>

</body>
</html> 
```

与 html 文件一样，cordova.js 保存在并行目录中../

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:38:22.457

据我所知，由于安全问题，浏览器不会让你这样做（直接访问本地驱动器）

# java - PDF 文件未使用类加载器打开

> ID：14933768
> 
> 赞同：1
> 
> 时间：2013-02-18T10:08:35.183
> 
> 标签：java, android, pdf

我正在使用下面的代码将文件链接到资源文件夹并读取文件并写入，然后我通过 3rd 方应用程序打开 pdf 文件。

这是我的代码；

```
public void readFile(){
        InputStream fileInputStream= null;
        String filePath = "PDF/" + name + ".pdf";
        ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
        try {
             fileInputStream = classLoader.getResourceAsStream(filePath);
             int size = fileInputStream.available();
             byte[] buffer = new byte[size];
             fileInputStream.read(buffer);
             fileInputStream.close();

             writeFile(buffer, name);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public void writeFile( byte[] buffer, String fileName){
        try {
            File root = Environment.getExternalStorageDirectory();
            FileOutputStream fileOutputStream = null;

            if (root.canWrite()){
                File pdffile = new File("/sdcard/aaa/bbb");
                pdffile.mkdirs();
                System.out.println(" pdf path "+pdffile.toString());
                File outputFile = new File(pdffile.toString());
                fileOutputStream = new FileOutputStream(
                        outputFile+"/" + fileName + ".pdf");
                BufferedOutputStream bos = new BufferedOutputStream(
                        fileOutputStream);
                bos.write(buffer);
                bos.flush();
                bos.close();

                }
            } catch (IOException e) {
            Log.e("Rrror", "Could not write file " + e.getMessage());
        }

    }

File f = new File("/sdcard/aaa/bbb/"+name+".pdf");
Uri path = Uri.fromFile(f);
Intent intent = new Intent(Intent.ACTION_VIEW); 
intent.setDataAndType(path, "application/pdf"); 
```

现在有些文件可以正确读取和打开，但很少有文件没有打开它说 K

`"This Document cannot be opened".`

但是，如果我使用资产管理器打开文件，它工作得很好。

这里有什么问题，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:31:24.597

“/sdcard/aaa/bbb”中资源和提取副本的大小不同。`InputStream.available()`这是由于返回正确大小的基础资源的错误假设：它仅包含*可以从此输入流中读取（或跳过）的字节数的估计值，而不会被下一次调用此方法的方法阻塞输入流*（根据 JDK JavaDocs）。

因此，您必须更改将输入流复制到字节数组的代码。这个主题之前已经在 StackOverflow 上讨论过，例如 cf。[将 InputStream 转换为 Java 中的 byte[]](https://stackoverflow.com/questions/1264709/convert-inputstream-to-byte-in-java)（仅考虑忽略该问题是指图像文件这一事实的答案，例如 @RichSeller 使用 Apache commons-io 的答案，或者在不引入新依赖项的情况下，@Adamski 使用的答案a `ByteArrayOutputStream`，`byte[]`缓冲区和不在文件末尾（`is.read(...) != -1`）的循环复制。可能还有更好的`nio`解决方案，但到底是什么......;）

# mysql - mysql触发查询执行未结束

> ID：14933769
> 
> 赞同：0
> 
> 时间：2013-02-18T10:08:36.433
> 
> 标签：mysql, triggers

当“tbl_purchase_log”表中有插入或更新时，我想将值添加到表中。所以我创建了一个触发器

```
DELIMITER $$
CREATE
TRIGGER `purchase_log_trigger` AFTER INSERT, UPDATE
ON `tbl_purchase_log`
FOR EACH ROW BEGIN

    INSERT INTO tbl_purchase_log_status (tbl_purchase_log_id, status, created_date) VALUES (NEW.id, NEW.status, now());
END$$
DELIMITER ; 
```

我的问题是这个查询执行没有结束。这个查询有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:21:17.687

似乎您不能在单个触发器中有多个事件，您必须为不同的事件设置单独的触发器。在您的情况下，插入和更新..检查此链接

[Mysql触发器插入和删除合二为一？](https://stackoverflow.com/questions/4827563/mysql-triggers-insert-and-delete-in-one)

[http://dev.mysql.com/doc/refman/5.1/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.1/en/create-trigger.html)

# python - Python 正则表达式 re.match，为什么这段代码不起作用？

> ID：14933771
> 
> 赞同：15
> 
> 时间：2013-02-18T10:08:44.527
> 
> 标签：python, regex

这是用 Python 编写的，

```
import re
s='1 89059809102/30589533 IronMan 30 Santa Ana Massage table / IronMan 30 Santa Ana Massage table'
pattern='\s(\d{11})/(\d{8})'
re.match(pattern,s) 
```

它不返回任何内容。

我试着把括号去掉，

```
pattern='\s\d{11}/\d{8}' 
```

它仍然返回`none`。

我的问题是：

1.  为什么 re.match 没有找到任何东西？
2.  模式中带或不带括号有什么区别？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-18T10:10:38.777

`re.match`从字符串的开头“匹配”，但有一个额外的`1`.

改为使用`re.search`，它将“搜索”字符串中的任何位置。而且，就您而言，还可以找到一些东西：

```
>>> re.search(pattern,s).groups()
('89059809102', '30589533') 
```

如果您删除模式中的括号，它仍将返回一个有效的`_sre.SRE_Match`, 对象，但为空`groups`：

```
>>> re.search('\s\d{11}/\d{8}',s).groups()
() 
```

# agility.js - agilityjs 视图不显示模型值 0

> ID：14933780
> 
> 赞同：1
> 
> 时间：2013-02-18T10:09:02.343
> 
> 标签：agility.js

我在我的项目中使用了 AgilityJS，我有以下场景：

```
var obj = $$({some_model_prop: val_from_server},'<div></div>'});
body.append(obj); 
```

这里的 body 是另一个敏捷对象，包含主页的 body 视图。

问题是如果 val_from server 的值恰好为 0（零数字），尽管 div 被渲染，但它不会显示在 div 内。

如果我通过将引号（“”）附加到它来将 val_from_server 转换为字符串，它会显示出来，但是我必须在稍后从模型中获取它时将字符串转换为数字。

有什么我做错了..还是敏捷本身的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T21:52:19.967

这是敏捷本身的一个错误。好像[是前几天才修好的](https://github.com/arturadib/agility/issues/105)。不知道更改传播到链接的官方缩小版本需要多长时间`http://agilityjs.com/docs/agility.min.js`，但您可以直接从 GitHub 中提取工作版本`https://github.com/arturadib/agility/blob/master/agility.js`。

# cuda - 库稀疏库

> ID：14933781
> 
> 赞同：0
> 
> 时间：2013-02-18T10:09:05.043
> 
> 标签：cuda, sparse-matrix

我正在尝试让我的 cuSparse 库正常工作。在 nVidia QuickStartGuide 之后，我下载了库，将内容提取到 /usr/local/cuda/include/ 并编译了一个测试程序 whick 给了我：

```
The following libraries were found:
CUDA   v5.0
Thrust v1.5.3
Cusp   v0.3.0 
```

现在我正在做矩阵向量乘法：

```
...
#include <cuda_runtime.h>
#include <cusparse_v2.h>
...
status = cusparseCreate(&handle); 
```

nvcc 编译器不同意最后一个字符串：

```
/tmp/tmpxft_00000d0b_00000000-14_nVidiaSample.o: In function `main':
tmpxft_00000d0b_00000000-3_nVidiaSample.cudafe1.cpp:(.text+0x9fe): undefined
reference  to `cusparseCreate' 
```

这里有什么问题？顺便说一句，我在 Ubuntu 上工作，CUDA 计算能力 1.2。

谢谢！

# java - Eclipse DDMS 中的线程状态为“监视器”

> ID：14933790
> 
> 赞同：2
> 
> 时间：2013-02-18T10:09:29.770
> 
> 标签：java, eclipse, multithreading

是什么`thread monitor`意思？我首先想到的是`thread`在声明中做某事`synchronized`。我对吗？

![在此处输入图像描述](../Images/d7b837c914332f09b0a5cdbe22b4579a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:22:46.893

在并发编程中，

> 监视器是旨在由多个线程 [源安全使用的对象或模块](http://en.wikipedia.org/wiki/Monitor_%28synchronization%29)

这些是`thread` `synchronization` **相互排斥**与**合作**

**互斥**，在 JVM 中通过对象锁支持，它使多个线程能够独立地处理共享数据，而不会相互干扰。

**JVM 通过 class 的`wait`和`notify`方法支持**协作**`Object`，使线程能够朝着共同的目标一起工作。**

# sql - Oracle Apex 智能选择列表

> ID：14933791
> 
> 赞同：1
> 
> 时间：2013-02-18T10:09:30.477
> 
> 标签：sql, oracle, oracle-apex

我正在构建一个需要创建下拉选择列表的系统。但是，我想为最终用户添加更多信息。所以如果我有：

```
Select client_name d, client r from clients_db 
```

我想构建这样的东西，即 client_status = 'vip' 然后下拉列表中这个元素的背景是红色的。我知道我可以使用 concat 并添加文本值，但这不是系统需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:46:35.500

您可以对它的任务使用“动态操作”。请参阅[http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/apex/r41/dynactions/dynactions.htm](http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/apex/r41/dynactions/dynactions.htm)

# xslt - XSLT - 更新标题

> ID：14933792
> 
> 赞同：0
> 
> 时间：2013-02-18T10:09:38.027
> 
> 标签：xslt, xslt-1.0, xslt-2.0

下面给出了我的请求 XML，并且还给出了我正在使用的 XSLT 转换。不幸的是，ordertotal xml 标记在转换后重复了两次。如何更新现有标签而不是插入双标签

请求 XML 是

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:fetchOrderListResponse xmlns:ns2="http://impl.lob.wipro.com/">
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderDetails>
               <itemPrice>50.0</itemPrice>
               <itemQty>2</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>37516016-D71B-4790-951F-55D00B0CC159</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>39.0</itemPrice>
               <itemQty>3</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>6095ABC7-0D0D-4B2E-92E5-80F24E9092B8</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>84EC371D-40CA-455E-A0FA-7EA733E9BFD3</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderId>54712493-2172-4ADB-814B-BC7AA0BB72C3</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <deliverydate>2013-02-06T00:00:00+05:30</deliverydate>
            <orderDetails>
               <itemPrice>565.0</itemPrice>
               <itemQty>1</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>9A5030BE-F95F-4C62-B5A2-41FF85423218</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>4.0</itemPrice>
               <itemQty>90</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>65A8B3BE-D407-43D8-8754-EA1E26AA56E4</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>0BDCB222-0117-47A9-8813-DF03A1D19E5E</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderId>8E4220DC-884B-47BC-A565-E26B80BA5249</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <deliverydate>2013-02-06T00:00:00+05:30</deliverydate>
            <orderDetails>
               <itemPrice>10.0</itemPrice>
               <itemQty>4</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>5A2DF895-BB0F-4039-80DB-F44CED31697B</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>20.0</itemPrice>
               <itemQty>3</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>8034FBF4-B573-4B19-BDF5-FAF6C4247A55</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>60161E3E-3C4A-4CE6-AAC3-E4D2BC240046</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
      </ns2:fetchOrderListResponse>
   </soap:Body>
</soap:Envelope> 
```

XSLT 是

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
 <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

 <xsl:template match="return">
        <xsl:copy>
            <xsl:copy-of select="@*|*" />
<ordertotal>
                <xsl:value-of select="sum(orderDetails/(itemPrice*itemQty))" />
            </ordertotal>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

响应 XML 显示重复标记是

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:fetchOrderListResponse xmlns:ns2="http://impl.lob.wipro.com/">

         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderDetails>
               <itemPrice>50.0</itemPrice>
               <itemQty>2</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>37516016-D71B-4790-951F-55D00B0CC159</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>39.0</itemPrice>
               <itemQty>3</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>6095ABC7-0D0D-4B2E-92E5-80F24E9092B8</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>84EC371D-40CA-455E-A0FA-7EA733E9BFD3</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
            <ordertotal>217</ordertotal>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderId>54712493-2172-4ADB-814B-BC7AA0BB72C3</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
            <ordertotal>0</ordertotal>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <deliverydate>2013-02-06T00:00:00+05:30</deliverydate>
            <orderDetails>
               <itemPrice>565.0</itemPrice>
               <itemQty>1</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>9A5030BE-F95F-4C62-B5A2-41FF85423218</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>4.0</itemPrice>
               <itemQty>90</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>65A8B3BE-D407-43D8-8754-EA1E26AA56E4</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>0BDCB222-0117-47A9-8813-DF03A1D19E5E</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
            <ordertotal>925</ordertotal>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderId>8E4220DC-884B-47BC-A565-E26B80BA5249</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
            <ordertotal>0</ordertotal>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <deliverydate>2013-02-06T00:00:00+05:30</deliverydate>
            <orderDetails>
               <itemPrice>10.0</itemPrice>
               <itemQty>4</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>5A2DF895-BB0F-4039-80DB-F44CED31697B</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>20.0</itemPrice>
               <itemQty>3</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>8034FBF4-B573-4B19-BDF5-FAF6C4247A55</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>60161E3E-3C4A-4CE6-AAC3-E4D2BC240046</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
            <ordertotal>100</ordertotal>
         </return>
      </ns2:fetchOrderListResponse>
   </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:57:21.560

因为您已经在源 XML 中显示了 ordertotal 元素，所以无需匹配结果并创建新的 ordertotal 元素，只需使用以下模板匹配 ordertotal 元素。

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
     </xsl:template>

     <xsl:template match="ordertotal">
         <xsl:copy>
            <xsl:value-of select="sum(../orderDetails/(itemPrice*itemQty))" />
         </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

# webforms - ASP.NET Web Forms(4.5)强类型模型绑定——ListView的InsertItemTemplate中的DropDownList

> ID：14933797
> 
> 赞同：8
> 
> 时间：2013-02-18T10:09:49.120
> 
> 标签：webforms, model-binding, strong-typing, asp.net-4.5

**注意：这是 .NET 4.5 中的 ASP.NET Web 窗体模型绑定，而不是 MVC。**

我正在使用 ASP.NET Web 窗体 (4.5) 的新强类型模型绑定功能来生成可编辑的项目列表。这适用于查看初始列表、编辑项目和删除项目。但是，我在插入新项目时遇到问题。

具体来说，在我的 EditItemTemplate 和 InsertItemTemplate 中，我有一个 DropDownList（嗯，实际上它是一个从 DropDownList 派生的自定义控件，但就这个问题而言，它是一个 DropDownList）。该控件在标记中定义如下...

```
<agp:ClientStatusDropDownList ID="ClientStatusID" runat="server"
SelectedValue="<%#: BindItem.ClientStatusID %>" /> 
```

在 EditItemTemplate 中，这很好，但在 InsertItemTemplate 中，这会在运行页面时产生错误：*Eval()、XPath() 和 Bind() 等数据绑定方法只能在数据绑定控件的上下文中使用。*

因此，我`SelectedValue="<%#: BindItem.ClientStatusID %>"`从 InsertItemTemplate 中删除了该部分并再次尝试。这次没有错误消息，但是在`ListView.InsertMethod`调用时，模型上的 ClientStatusID 属性未设置为 DropDownList 的值（而其余属性设置正确）。

ListView.InsertMethod：

```
public void ListView_InsertMethod(int ID) {

  Model model = this.DbContext.Models.Create();
  if (this.TryUpdateModel(model)) {
    this.DbContext.SaveChanges();
    this.ListView.DataBind();
  }

} 
```

模型类：

```
public class Model{

  public Int32 ID { get; set; }
  public String Description { get; set; }
  public Boolean IsScheduleFollowUp { get; set; }
  public Nullable<Int32> ClientStatusID { get; set; }

} 
```

编辑项目模板：

```
<EditItemTemplate>
  <tr>
    <td>
      <asp:TextBox ID="Description" runat="server" Text="<%#: BindItem.Description %>" />
    </td>
    <td>
      <asp:CheckBox ID="IsScheduleFollowUp" runat="server" Checked="<%# BindItem.IsScheduleFollowUp %>" />
    </td>
    <td>
      <agp:ClientStatusDropDownList ID="ClientStatusID" runat="server" SelectedValue="<%#: BindItem.ClientStatusID %>" />
    </td>
    <td>
      <asp:Button ID="Update" runat="server" ClientIDMode="Static" CommandName="Update" Text="Update" />
      <asp:Button ID="Cancel" runat="server" ClientIDMode="Static" CommandName="Cancel" Text="Cancel" />
    </td>
  </tr>
</EditItemTemplate> 
```

插入项模板：

```
<InsertItemTemplate>
  <tr>
    <td>
      <asp:TextBox ID="Description" runat="server" Text="<%#: BindItem.Description %>" />
    </td>
    <td>
      <asp:CheckBox ID="IsScheduleFollowUp" runat="server" Checked="<%# BindItem.IsScheduleFollowUp %>" />
    </td>
    <td>
      <agp:ClientStatusDropDownList ID="ClientStatusID" runat="server" />
    </td>
    <td>
      <asp:Button ID="Insert" runat="server" ClientIDMode="Static" CommandName="Insert" Text="Add" />
    </td>
  </tr>
</InsertItemTemplate> 
```

我原本以为是控件的 ID 用于确定模型上的属性值将被传递给（即 TextBox 被称为“描述”的地方，值将被传递给“描述”模型的属性）。显然情况并非如此，而是由“<%# BindItem.Description %>”控制，但是从这个问题的其余部分可以看出，我无法在“InsertItemTemplate”中使用这种语法。我不敢相信在这种情况下不支持 DropDownList，但我找不到任何使用 Google 或 Bing 与 4.5 模型绑定一起使用 DropDownList 的示例（事实上，在 ASP 中新模型绑定的示例非常少。 NET 4.5 使用除了几个 TextBox 控件之外的任何东西）。

谁能进一步阐明这个问题（最好告诉我需要做什么）？

我看过的关于 SO 的其他问题......

*   [在 ListView InsertItemTemplate 中绑定 DropDownList 会引发错误](https://stackoverflow.com/questions/470315/binding-a-dropdownlist-in-listview-insertitemtemplate-throwing-an-error)
*   [在 EditItemTemplate 和 InsertItemTemplate 中具有相同标记的 ASP.NET ListView](https://stackoverflow.com/questions/2184757/asp-net-listview-with-identical-markup-in-edititemtemplate-and-insertitemtemplat)
*   [将 ASP.net DropDownList 的 SelectedValue 绑定到自定义对象](https://stackoverflow.com/questions/2265852/bind-selectedvalue-of-asp-net-dropdownlist-to-custom-object)
*   [数据绑定到 ListView 中的 ASP.NET DropDownList 列表](https://stackoverflow.com/questions/3785021/databinding-to-asp-net-dropdownlist-list-in-listview)

所有这些都使用旧式绑定方法，而不是 4.5 中的新方法

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T18:24:15.867

我一直在做类似的事情，并且能够得到一个样本来工作，所以我想我会发布我所拥有的，看看这是否对你有帮助。

这是我的页面代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="listview-databind.aspx.cs"
    Inherits="test_listview_databind" Debug="true" %>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:ListView ID="lv" runat="server" ItemType="DataModel" DataKeyNames="Id" SelectMethod="lv_GetData"
            InsertItemPosition="FirstItem" InsertMethod="lv_InsertItem" UpdateMethod="lv_UpdateItem">
            <LayoutTemplate>
                <table>
                    <tr id="itemPlaceholder" runat="server"></tr>
                </table>
            </LayoutTemplate>
            <ItemTemplate>
                <tr>
                    <td>
                        <asp:Literal ID="Description" runat="server" Text="<%# Item.Description %>" />
                    </td>
                    <td>
                        <asp:CheckBox ID="IsScheduleFollowUp" runat="server" Checked="<%# Item.IsScheduleFollowUp %>" />
                    </td>
                    <td>
                        <asp:Literal ID="ClientStatusId" runat="server" />
                    </td>
                    <td>
                        <asp:Button ID="Edit" runat="server" ClientIDMode="Static" CommandName="Edit"
                            Text="Edit" />
                    </td>
                </tr>
            </ItemTemplate>
            <InsertItemTemplate>
                <tr>
                    <td>
                        <asp:TextBox ID="Description" runat="server" Text="<%# BindItem.Description %>" />
                    </td>
                    <td>
                        <asp:CheckBox ID="IsScheduleFollowUp" runat="server" Checked="<%# BindItem.IsScheduleFollowUp %>" />
                    </td>
                    <td>
                        <asp:DropDownList ID="ClientStatusId" runat="server" SelectedValue="<%# BindItem.ClientStatusId %>">
                            <asp:ListItem>1</asp:ListItem>
                            <asp:ListItem>2</asp:ListItem>
                        </asp:DropDownList>
                    </td>
                    <td>
                        <asp:Button ID="Insert" runat="server" ClientIDMode="Static" CommandName="Insert"
                            Text="Add" />
                        <asp:Button ID="Cancel" runat="server" ClientIDMode="Static" CommandName="Cancel"
                            Text="Cancel" />
                    </td>
                </tr>
            </InsertItemTemplate>
            <EditItemTemplate>
                <tr>
                    <td>
                        <asp:TextBox ID="Description" runat="server" Text="<%# BindItem.Description %>" />
                    </td>
                    <td>
                        <asp:CheckBox ID="IsScheduleFollowUp" runat="server" Checked="<%# BindItem.IsScheduleFollowUp %>" />
                    </td>
                    <td>
                        <asp:DropDownList ID="ClientStatusId" runat="server" SelectedValue="<%# BindItem.ClientStatusId %>">
                            <asp:ListItem>1</asp:ListItem>
                            <asp:ListItem>2</asp:ListItem>
                        </asp:DropDownList>
                    </td>
                    <td>
                        <asp:Button ID="Update" runat="server" ClientIDMode="Static" CommandName="Update"
                            Text="Update" />
                        <asp:Button ID="Cancel" runat="server" ClientIDMode="Static" CommandName="Cancel"
                            Text="Cancel" />
                    </td>
                </tr>
            </EditItemTemplate>
        </asp:ListView>
    </form>
</body>
</html> 
```

而我背后的代码：

```
using System.Collections.Generic;
using System.Linq;

public partial class test_listview_databind : System.Web.UI.Page
{
    public IQueryable<DataModel> lv_GetData()
    {
        var l = new List<DataModel>();
        l.Add(new DataModel() { Id = 1, Description = "Test 1", IsScheduleFollowUp = true, ClientStatusId = 1 });
        l.Add(new DataModel() { Id = 2, Description = "Test 2", IsScheduleFollowUp = false, ClientStatusId = 2 });
        return l.AsQueryable();
    }

    public void lv_InsertItem()
    {
        var item = new DataModel();
        TryUpdateModel(item);
        if (ModelState.IsValid)
        {
            Response.Write(item.ClientStatusId);
        }
    }
} 
```

您没有发布整个 ListView 示例，所以我猜测您可能如何设置它。请让我知道这是否有帮助以及这是否/如何对您有用，因为您的代码看起来可行，我很好奇是什么导致了您的问题。

# wpf - 在 WPF 中的 MVVM 中的 Viewmodel 之间传递值

> ID：14933800
> 
> 赞同：6
> 
> 时间：2013-02-18T10:10:11.600
> 
> 标签：wpf, silverlight, mvvm, mvvm-light

我正在使用 MVVM 轻型工具包开发 WPF 应用程序。我的主窗口中有一个数据网格。我创建了另一个名为“openfile”的窗口，它们的视图模型。主窗口视图模型类包含绑定到数据网格的 ObservableCollection MyList 类型的公共属性。我可以从 openfile Viewmodel 填充这个属性并自动绑定到 Datagrid 吗？或者我可以将变量传递给 MainViewmodel 并从 OpenfileViewmodel 调用 MainViewmodel 中的公共函数吗？

这就是我从菜单栏调用 MyPage 的方式。

```
 private void NotificationMessageReceived(NotificationMessage msg)
        {
            switch (msg.Notification)
            {
                case Messages.MainVM_Notofication_ShowNewbWindow:
                    new NewView().ShowDialog();
                    break;
                case Messages.MainVM_Notofication_ShowExistingWindow:
                    new OpenExisitingView().ShowDialog();
                    break;

                case Messages.MainVM_Notofication_ShowotherWindow:
                    newView().ShowDialog();
                    break;
            }
        } 
```

提前致谢。罗希尔 K

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T11:36:59.653

经过一番研究，我通过以下代码获得了我的 Mainviewmodel 的当前实例。

```
MainViewModel mainViewModelInstaince = ServiceLocator.Current.GetInstance<MainViewModel>(); 
```

然后我得到了所有的方法和属性......并从另一个视图模型绑定了数据。

谢谢大家..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T18:06:42.930

您可以创建一个可以作为“中介服务”的类，它将位于您的 ViewModel 之间。您可以注册中介服务并添加可以从一个 VM 引发并在另一个 VM 中处理的事件。它可以像：

```
public class MediatorService: IMediatorService 
{
  public dynamic Data { get; set;}
  public event EventHandler<YourCustomEventArgs> Callback = delegate { }
}

public class XYZVM(IMediatorService mediatorService)
{
// set your Data here and handle Callback event here and refresh your grid.
// you can get anything from your "YourCustomEventArgs" which you will set from ABCVM
}

public class ABCVM(IMediatorService mediatorService)
{
// get your data here and raise callback here and handle that in XYZVM
} 
```

希望这对你有帮助..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T10:27:48.510

最简单的方法是将`MainWindowViewModel`'s 实例传递给`OpenFileViewModel`：

```
public class OpenFileViewModel
{
    private MainWindowViewModel _parent;

    public OpenFileViewModel(MainWindowViewModel parent)
    {
          _parent = parent;
    }
} 
```

之后，您可以调用/访问任何公共方法/属性`MainWindowViewModel`：

```
foreach (var item in _parent.myList)
{
    ...
} 
```

# doctrine-orm - 使用 CreateQuery 将 sql 查询转换为 Doctrine2 查询

> ID：14933802
> 
> 赞同：0
> 
> 时间：2013-02-18T10:10:27.687
> 
> 标签：doctrine-orm, symfony-2.1

我有以下mysql查询

```
SELECT
    *
FROM
(
    SELECT
        CASE WHEN t2.user1=1 THEN t2.user2 ELSE t2.user1 END AS userId
    FROM
        t AS t2
    WHERE 1 IN (t2.user1,t2.user2)
    AND t2.[status]=1
) as tbl
WHERE EXISTS 
(
    SELECT
        NULL
    FROM
        t
    WHERE 2 IN (t.user1,t.user2)
    AND tbl.userId=(CASE WHEN t.user1=2 THEN t.user2 ELSE t.user1 END)
    AND t.[status]=1
) 
```

它工作正常，但我无法将其转换为 Doctrine2 查询。

知道怎么做吗？

[http://sqlfiddle.com/#!2/4c792/11](http://sqlfiddle.com/#!2/4c792/11)

[编辑] 我使用 Native SQL 来执行查询。

```
$rsm = new ResultSetMapping();
$rsm->addEntityResult('myProject\DataBundle\Entity\Friend', 'f');

    $sql= '
    SELECT
             *
        FROM (
            SELECT 
                CASE WHEN t2.user1=2 THEN t2.user2 ELSE t2.user1 END AS userId
            FROM friends AS t2 
            WHERE 2 IN (t2.user1,t2.user2) 
            AND t2.status=1 
        ) as tbl 
        WHERE EXISTS (
        SELECT 
            NULL 
        FROM 
            friends as t
        WHERE 3 IN (t.user1,t.user2) 
        AND tbl.userId=(CASE WHEN t.user1=3 THEN t.user2 ELSE t.user1_id END) 
        AND t.isFriendOrFollower=1 )';

    $query = $this->getEntityManager()
        ->createNativeQuery($sql,$rsm); 
```

但是没有显示结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:26:50.220

我找到了一种使用 dbal 更简单的方法。

1：你必须得到连接

```
$conn=$this->container->get('database_connection'); 
```

2：编写查询

```
$sql= '
    SELECT
             *
        FROM (
            SELECT 
                CASE WHEN t2.user1=2 THEN t2.user2 ELSE t2.user1 END AS userId
            FROM friends AS t2 
            WHERE 2 IN (t2.user1,t2.user2) 
            AND t2.status=1 
        ) as tbl 
        WHERE EXISTS (
        SELECT 
            NULL 
        FROM 
            friends as t
        WHERE 3 IN (t.user1,t.user2) 
        AND tbl.userId=(CASE WHEN t.user1=3 THEN t.user2 ELSE t.user1_id END) 
        AND t.isFriendOrFollower=1 )'; 
```

3：执行查询。

```
$rows = $conn->fetchAll($sql); 
```

完成，问题解决。

# r - 在自己的函数中将参数传递给函数时遇到问题

> ID：14933804
> 
> 赞同：3
> 
> 时间：2013-02-18T10:10:29.880
> 
> 标签：r, function, environment, argument-passing

我正在编写一个函数，我想在其中将一些参数传递给 crrstep 函数（'crrstep' 包），但我遇到了一个问题：当我在 crrstep 中输入函数中的参数 'event' 时，不知何故无法识别它。我猜 crrstep 看起来与我希望它看起来的环境不同，但即使在网上搜索了几个小时的解决方案后，我似乎也无法弄清楚如何解决这个问题（我在编程方面非常缺乏经验..） . 任何帮助将不胜感激！

这是一些模拟数据（来自 crrstep-documentation 的调整示例）和我的代码示例：

```
n <- 500
ftime <- rexp(n)
fstatus <- sample(0:2,n,replace=TRUE)
testdata <- matrix(runif(8*n),nrow=n)
testdata <- cbind(ftime,fstatus,testdata)
dimnames(testdata)[[2]] <- c('ftime','fstatus','x1','x2','x3','x4','x5','x6','x7','x8')
testdata <- as.data.frame(testdata)
formula1 <- ftime ~ 1 + x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8
rm(fstatus,ftime,n)

test.fun <- function(x,data,event){
require(crrstep)
select.mod<- crrstep(formula=x,,etype=event, failcode=1, cencode=0,data=data, 
                   direction = "backward", criterion = "AIC", crr.object = TRUE, 
                   trace = FALSE)
#Rest of function omitted for now
print(select.mod)
}

#Test
test.fun(x=formula1,data=testdata,event=fstatus) 
#I get: Error in eval(expr, envir, enclos) : object 'event' not found" 
```

非常感谢！抢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T15:49:23.163

在依赖于评估数据框中的名称的函数中调用函数时，我使用`do.call`，它在传递给函数之前评估其参数，因此使调试和编写代码更简单，我觉得我可以更确定它是什么正在做。（对于调试，只需使用`call`而不是`do.call`，它将显示函数将尝试运行的内容；语法也略有不同，因此在执行此操作时也要删除调用中的列表结构。）

（感谢 Josh O'Brien 对这个想法的回答：[https](https://stackoverflow.com/a/7668846/210673) ://stackoverflow.com/a/7668846/210673 ）

在这种情况下，它看起来像这样：

```
test.fun <- function(x, data, event){
  require(crrstep)
  select.mod <- do.call("crrstep", 
         list(formula=x, etype=substitute(event), failcode=1, cencode=0,
              data=as.name("data"), direction = "backward", criterion = "AIC", 
              crr.object = TRUE, trace = FALSE))
  print(select.mod)
}

test.fun(x=formula1, data=testdata, event=fstatus) 
```

`substitute(event)`告诉它使用赋予函数的名称，而不是名称`event`。`as.name("data")`告诉它在函数中查找而`data`不是传递实际的数据帧。另一种选择是`substitute(data)`查找您拥有的实际数据框。

## 使用示例`lm`

这是一个使用`lm`和`weights`参数的非常相似的行为示例：

这是一个示例数据集和对 的调用`lm`，而不是在另一个函数中。我打印`call`响应的元素以查看它实际上做了什么。

```
> set.seed(5)
> dd <- data.frame(x=1:10,y=round(rnorm(10,mean=10),1), z=round(runif(10,1,4),1))
> lm(y~x, weights=z, data=dd)$call
lm(formula = y ~ x, data = dd, weights = z) 
```

自然的方式，它不起作用，因为它`w`在数据框中寻找：

```
> f1 <- function(f,w,d){
+   lm(formula=f,weights=w, data=d)
+ }
> f1(y~x, z, dd)
Error in eval(expr, envir, enclos) : object 'w' not found 
```

可以使用字符串构建调用；这更简单一点：

```
> f2 <- function(f,w,d){
+   do.call("lm", list(formula=as.formula(f), weights=as.name(w), data=as.name(d)))
+ }
> f2("y~x", "z", "dd")$call
lm(formula = y ~ x, data = dd, weights = z) 
```

或者一个可以使用`substitute`；在这里，我在我的实际数据集上调用该函数`dd`，而不是`d`在函数内。如果我想使用`update`.

```
> f3 <- function(f,w,d){
+   do.call("lm", list(formula=f, weights=substitute(w), data=substitute(d)))
+ }
> f3(y~x, z, dd)$call
lm(formula = y ~ x, data = dd, weights = z) 
```

但我也可以`d`在函数内使用；这次请注意，`data = d`在调用中而不是`data = dd`.

```
> f4 <- function(f,w,d){
+   do.call("lm", list(formula=f, weights=substitute(w), data=as.name("d")))
+ }
> f4(y~x, z, dd)$call
lm(formula = y ~ x, data = d, weights = z) 
```

它也可以放入实际的数据框，但调用时间更长。但是，如果您在每次调用之前以编程方式更改数据框并希望记录该数据框是什么，则可能需要这样做。（不过，如果您以后确实需要，我的偏好是以更明确的方式保存该数据框。）

```
> f5 <- function(f,w,d){
+   do.call("lm", list(formula=f, weights=substitute(w), data=d))
+ }
> f5(y~x, z, dd)$call
lm(formula = y ~ x, data = list(x = 1:10, y = c(9.2, 11.4, 8.7, 
10.1, 11.7, 9.4, 9.5, 9.4, 9.7, 10.1), z = c(3.7, 3.2, 1.6, 1.7, 
1.4, 2.4, 2.3, 3.9, 1.4, 3.9)), weights = z) 
```

还有一个表明您不能只使用`substitute`without `do.call`，因为`substitute`在调用`lm`.

```
> f6 <- function(f,w,d){
+   lm(formula=f,weights=substitute(w), data=d)
+ }
> f6(y~x, z, dd)
Error in model.frame.default(formula = f, data = d, weights = substitute(w),  : 
  invalid type (symbol) for variable '(weights)' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:58:02.670

我不清楚为什么，但是如果您将`etype`参数作为索引数据框传递，它似乎会失败。但是，如果您事先创建向量，它似乎可以工作：

```
test.fun <- function(x,data,event){
  require(crrstep)
  etype <- data[,event]
  select.mod<- crrstep(formula=x,data=data,etype=etype, failcode=1, cencode=0, 
                   direction = "backward", criterion = "AIC", crr.object = TRUE, 
                   trace = FALSE)
#Rest of function omitted for now
print(select.mod)
} 
```

# ruby - 需要单个模块文件来命名多个文件中的多个类

> ID：14933813
> 
> 赞同：1
> 
> 时间：2013-02-18T10:11:02.907
> 
> 标签：ruby, class, module

我有兴趣在属于同一模块的多个文件中定义多个类。模块 CktCheck 应该包含 Sdevv 类。这是代码：

```
module CktCheck
  require 'Sdevv.rb'
end 
```

在 Sdevv.rb 文件中，我有：

```
class Sdevv
...
...
end 
```

我想通过使用这些行来实例化类 Sdevv 的实例

```
require("CktCheck.rb")
cktcheck_file = CktCheck::Sdevv.new("CktCheck.sdevv") 
```

但是，会引发以下异常：

```
./isBeginDevLine.rb:6:in `<main>': uninitialized constant CktCheck::Sdevv (NameError)` 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:17:28.693

你试过`include`代替`require`吗？

此外，您可以在另一个文件中打开模块以添加类：

```
# In Sdevv.rb:

module CktCheck
  class Sdevv
  ...
  ...
  end
end

# Then, when you need it:
require("CktCheck")
require("Sdevv") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:10:57.213

在里面`Sdevv.rb`，你忘了`Sdevv`在`CktCheck`模块内定义类。因此，它是在顶层定义的。

您需要从顶层简单地引用它`Sdevv`而不是，`CktCheck::Sdevv`或者，如果您希望它在`CktCheck`模块内定义，那么您必须在`CktCheck`模块内定义它：

```
module CktCheck
  class Sdevv
    # …
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:32:23.037

我不认为拥有一个单独的模块文件是个好主意。“模块”背后的想法是

1.  通过将它们保持在相同的“命名空间”（即模块名称）中来对相同类型的相似事物进行分组
2.  当您使用的“名称”碰巧在其他命名空间（*其他模块*）中使用时，避免名称冲突。

每个类有 1 个文件并通过重新打开该模块在同一模块中定义所有新类是很好的。

```
#In first_thing.rb
module SameThings
  class FirstThing
  ....
  end
end

#In second_thing.rb
module SameThings
  class SecondThing
  .....
  end
end

now where ever you need to use FirstThing or SecondThing  
require 'first_thing'   or 
require 'second_thing' 
```

# ios - 将带有 NSDictionaries 的 NSArray 整理成 2 个 NSArray

> ID：14933814
> 
> 赞同：0
> 
> 时间：2013-02-18T10:11:03.630
> 
> 标签：ios, objective-c, nsarray, nsdictionary

我有一个`NSArray`with `NSDictionaries`。每个字典都有一个 BOOL 值的键。

我需要对该数组进行排序，结果应该是 2 `NSArrays`：一个带有 0 值的字典，另一个带有 1 值的字典。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:16:34.233

不确定这是否是您的意思，但是：

```
NSMutableArray *yesDicts = [NSMutableArray array];
NSMutableArray *noDicts = [NSMutableArray array];

for (NSDictionary *dict in array) {
    NSNumber *yesorno = dict[@"key"];
    if ([yesorno boolValue] == YES) {
        [yesDicts addObject:dict];
    } else {
        [noDicts addObject:dict];
    }
} 
```

其中`array`是初始数组，每个 dict 中的 BOOL 值存储在`@"key"`. 它还使用新的字典访问语法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:23:02.177

我认为“最好”的方式是使用`NSPredicates`，例如：

```
NSPredicate *yesPredicate = [NSPredicate predicateWithFormat:@"%K == %@", @"key", [NSNumber numberWithBool:YES]];
NSArray *filteredYESResults = [allResultsArray filteredArrayUsingPredicate:yesPredicate];

NSPredicate *noPredicate = [NSPredicate predicateWithFormat:@"%K == %@", @"key", [NSNumber numberWithBool:NO]];
NSArray *filteredNOResults = [allResultsArray filteredArrayUsingPredicate:noPredicate]; 
```

# php - 如果它是假的，如何打破后缀php过滤器

> ID：14933816
> 
> 赞同：1
> 
> 时间：2013-02-18T10:11:05.960
> 
> 标签：php, filter, postfix-mta

我正在使用 postfix 接收电子邮件并通过 php 文件发送它们以进行过滤。

在 de postfix master.cf 我使用：

```
`smtp inet n - - - - smtpd -o content_filter=PHPFilter:dummy` 
```

或者

```
`pickup fifo n - - 60 1 pickup -o content_filter=PHPFilter:dummy` 
```

但问题是：如果电子邮件通过 php 文件传递​​而没有满足条件怎么办？有没有办法 让后缀恢复`break`？ `exit`

例如地址：`info@domain.net`是一个别名后缀应该处理它。
但任何数字电子邮件`12345@domain.net`都应该由 php 过滤器处理。
但是如果有人通过电子邮件发送到不存在的电子邮件，例如`spam@domain.net`

原样：当使用 smtp 时（在排队之前）执行 php 过滤器，但当它不是数字后缀时，不执行或至少不与别名 db 比较。
在发送数字电子邮件时，使用取件（排队后）后缀会引发 550 错误（收件人地址被拒绝：虚拟邮箱表中的用户未知），因为它在别名 db 中不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:06:39.327

好吧想通了。这是像我这样无法弄清楚的其他人的描述。它仍然不漂亮（没有原始数据，而是将新邮件插入到后缀中。）首先如上面在 master.cf （后缀）放置/替换中提到的：

`smtp inet n - - - - smtpd -o content_filter=PHPFilter:dummy`

和

```
PHPFilter unix  -   n   n   -   10  pipe
  flags=F user=www-data null_sender=
  argv=/var/secure/postfix.php -f ${sender} -- ${recipient} 
```

接受数字电子邮件地址，我创建了一个 virtual_mailbox_maps 来检查数据库是否该数字有效/存在。

到目前为止的后缀。现在是 postfix.php 过滤器文件。首先阅读收到的电子邮件：

```
 if($fd = @fopen("php://stdin", "r")) {
        while (!feof($fd)) {
            $this->email .= fread($fd, 1024);
        }
        fclose($fd);
        return true;
    } 
```

这可以使用 PEAR::Mail_mimedecode 进行解码，以获得所有需要的变量，这些变量可以根据需要进行处理（过滤）和操作。如果 postfix.php 过滤器满足过滤器所需的参数，它应该返回 exit(0) 以让 postfix 知道所有内容都已处理，无需进一步操作。

如果电子邮件不符合要求，或者它是本地邮箱，则应使用本地端口将电子邮件重新插入后缀（因此不要使用 PEAR::mail->send('smtp')），而应使用 PEAR： :Mail->send('sendmail') 将其插入后缀。这需要您从头开始构建新的电子邮件。使用 PEAR::Mail_mimedecode 提供的变量。

```
$headers = array(
    'From' => $this->headers['from'],
    'To' => $this->headers['to'],
    'Subject' => $this->headers['subject'],
    'Date' => $this->headers['date']
    ); 
```

希望这对任何人都有帮助。我在这里提供过程。当然，为了安全起见，它需要根据您的喜好进行改进。
如果有人对此过程有任何意见，请提供。我很想听听是否有任何安全问题或更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T12:29:39.937

除了 PHP 脚本本身之外，您已经成功地完成了所有工作。这是我的做法：

```
#!/usr/bin/php
<?php

$content = stream_get_contents(STDIN);

//Here you decide if you want to let the email pass through or not
$pass_through = true;
$sendmail_return_value = 69;

if ($pass_through) {
    unset($argv[0]);
    $sendmail = '/usr/sbin/sendmail -G -i ' . implode(' ', $argv);
    $handle = popen($sendmail, 'w');
    fwrite($handle, $content);
    $sendmail_return_value = pclose($handle);
}

exit($sendmail_return_value); 
```

# java - 如何从javascript将我的表单数据发送到java

> ID：14933818
> 
> 赞同：-3
> 
> 时间：2013-02-18T10:11:07.933
> 
> 标签：java, javascript

在我的应用程序中，我有一个注册表单。我在将数据保存在后端时遇到了问题。不熟悉后端部分。我使用 Netbeans7.0 作为我的 IDE 和 MySql 5.6 来保存我的数据。我不知道如何将我的数据传递给我的 JAVA 数据库。请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:17:33.217

由于您已标记 javascript，我想您正在使用 javascript 验证表单数据。有了这个假设；我认为，您将有一个提交按钮来发布数据。

现在检查 XSL/HTML/JSP 中的以下行：

```
action="{put your servlet's mapping address here}" 
```

您可以使用以下方式在 javascript 中提交表单：

```
document.getElementById("frm1").submit(); 
```

这是一个[例子](http://www.w3schools.com/jsref/met_form_submit.asp)

# asp.net - 如何在 GridView 中显示集合？

> ID：14933820
> 
> 赞同：0
> 
> 时间：2013-02-18T10:11:11.287
> 
> 标签：asp.net, asp.net-membership, membership-provider

我的 asp.net 应用程序中有多个会员提供商。我可以使用代码访问会员提供商：-

```
MembershipProvider mbr;
mbr = Membership.Providers["CustomMembershipProvider"]; 
```

我想获取所有用户并在网格视图中显示。我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:15:40.287

您可以使用[MembershipProvider.GetAllUsers 方法](http://msdn.microsoft.com/library/system.web.security.membershipprovider.getallusers.aspx)：

```
int total;
var users = mbr.GetAllUsers(0, int.MaxValue, out total); 
```

或者如果您有分页网格，则传递索引和页面大小。

这里有一个定义 gridview 的 ASPX 片段：

```
<asp:GridView runat="server" ID="GV"></asp:GridView> 
```

以及相应的代码隐藏 C# 类：

```
public partial class MyPage : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        // create membership instance...
        int total;
        GV.DataSource = mbr.GetAllUsers(0, int.MaxValue, out total);
        GV.DataBind();
    }
} 
```

# oracle - 删除超过 2 个月的分区

> ID：14933828
> 
> 赞同：6
> 
> 时间：2013-02-18T10:11:40.880
> 
> 标签：oracle, oracle11g, database-partitioning

我有一个基于日期字段的分区表。现在，我必须编写一个程序来删除所有超过 2 个月的分区，即 test_date 超过 2 个月。我该怎么做？

```
create table test_table
(
test_id number,
test_date date,
constraint pk_test primary key (test_id)
)
partition by range (test_date)
(
PARTITION pt01122012 VALUES LESS THAN (TO_DATE('01-DEC-
2012', 'DD-MON-YYYY')),
PARTITION pt01022013 VALUES LESS THAN (TO_DATE('01-FEB-
2013', 'DD-MON-YYYY')),
PARTITION pt01042013 VALUES LESS THAN (TO_DATE('01-APR-
2013', 'DD-MON-YYYY')),
PARTITION pt01062013 VALUES LESS THAN (TO_DATE('01-JUN-
2013', 'DD-MON-YYYY')),
PARTITION pt01082013 VALUES LESS THAN (TO_DATE('01-AUG-
2013', 'DD-MON-YYYY'))
); 
```

提前致谢...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-18T11:18:22.927

首先，我想指出，分区是 Oracle 中的高级主题，因此您可能希望在开始时手动运行所有 DDL，直到您对运行 DDL 脚本有足够的信心。我还建议您在没有完全**理解**和彻底**测试**的情况下，永远不要运行在 Internet 上找到的脚本，尤其是 DDL 脚本。

现在对于手头的事情，您可以查询[`*_TAB_PARTITIONS`](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_2108.htm#i1591118)字典视图以检索分区边界：

```
SQL> SELECT partition_name, high_value
  2    FROM user_tab_partitions
  3   WHERE table_name = 'TEST_TABLE';

PARTITION_NAME  HIGH_VALUE
--------------- --------------------------------------------------------
PT01122012      TO_DATE(' 2012-12-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS'
PT01022013      TO_DATE(' 2013-02-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS'
PT01042013      TO_DATE(' 2013-04-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS'
PT01062013      TO_DATE(' 2013-06-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS'
PT01082013      TO_DATE(' 2013-08-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS' 
```

该列属于`LONG`（=deprecated LOB）类型，因此我们几乎没有使用 SQL 过滤的工具，我们将不得不使用 PL/SQL。

```
SQL> BEGIN
  2     FOR cc IN (SELECT partition_name, high_value --
  3                  FROM user_tab_partitions
  4                 WHERE table_name = 'TEST_TABLE') LOOP
  5        EXECUTE IMMEDIATE
  6           'BEGIN
  7               IF sysdate >= ADD_MONTHS(' || cc.high_value || ', 2) THEN
  8                  EXECUTE IMMEDIATE
  9                     ''ALTER TABLE TEST_TABLE DROP PARTITION '
 10                     || cc.partition_name || '
 11                     '';
 12               END IF;
 13            END;';
 14     END LOOP;
 15  END;
 16  /

PL/SQL procedure successfully completed

SQL> SELECT partition_name, high_value
  2    FROM user_tab_partitions
  3   WHERE table_name = 'TEST_TABLE';

PARTITION_NAME  HIGH_VALUE
--------------- -----------------------------------------------------------
PT01022013      TO_DATE(' 2013-02-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 
PT01042013      TO_DATE(' 2013-04-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 
PT01062013      TO_DATE(' 2013-06-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 
PT01082013      TO_DATE(' 2013-08-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 
```

# php - 如何将 stdClass 对象的标识符作为字符串获取？

> ID：14933829
> 
> 赞同：1
> 
> 时间：2013-02-18T10:11:44.440
> 
> 标签：php, object, web

我想知道如何获取“标识符”或 php 对象的 ID。这是`print_r`对象的。

```
Array ( [Qv4MO] => 
    stdClass Object ( 
        [ip] => 115.242.7.91 
        [campaign] => VQBU 
        [created_on] => 2013-02-17 01:50:51 
        ) 
    ) 
```

我想要“Qv4MO”作为字符串！

请帮帮我……！

我可以得到其余的变量，`Object->ip or Object->campaign` 但我如何得到对象名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T10:14:49.563

使用功能`key`

例如`echo key($array)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:20:20.840

如果 $array 包含上述数组，则使用`$array["Qv4MO"]->ip , $array["Qv4MO"]->campaign , $array["Qv4MO"]->created_on`and 作为对象名称使用`key($array)`

# php - 在标头重定向之前未设置多维 $_SESSION 变量

> ID：14933835
> 
> 赞同：0
> 
> 时间：2013-02-18T10:11:48.033
> 
> 标签：php, session, multidimensional-array, session-variables, output-buffering

我有一个基本的表单提交脚本，它从循环中设置多维 $_SESSION 变量（2 个级别） - 然后使用标题位置进行重定向。

我在我的本地机器（运行 PHP 5.3.8 的 xampp/windows 服务器）上开发了这个没有问题，但我在运行 PHP 5.3.3 的 web linux 服务器上遇到了问题，甚至升级到 5.3.21 也有同样的问题。

这是我的脚本：

```
if($_POST['submitted']){

    $_SESSION['c'] = array();
    $_SESSION["RETURNING_DISCOUNT"] = array();
    $seq = 1;

    for($d=1; $d<=10; $d++){

        if($_POST["COMPANY_$d"] && $_POST["PHONE_$d"]){

            $_SESSION['c'][$seq] = array();

            $_SESSION['c'][$seq]["COMPANY"] = str_replace("\'", "", str_replace('\"', '', $_POST["COMPANY_$d"]));
            $_SESSION['c'][$seq]["PHONE"] = str_replace("\'", "", str_replace('\"', '', $_POST["PHONE_$d"]));

            if($_POST["COUNTRY_$d"] == 'Canada'){
                $_SESSION['c'][$seq]["STATE"] = str_replace("\'", "", str_replace('\"', '', $_POST["STATE_$d"]));
            }else{
                $_SESSION['c'][$seq]["STATE"] = str_replace("\'", "", str_replace('\"', '', $_POST["STATE_2_$d"]));
            }
            $_SESSION['c'][$seq]["COUNTRY"] = $_POST["COUNTRY_$d"];
            $_SESSION['c'][$seq]["ADDY1"] = str_replace("\'", "", str_replace('\"', '', $_POST["ADDY1_$d"]));
            $_SESSION['c'][$seq]["ADDY2"] = str_replace("\'", "", str_replace('\"', '', $_POST["ADDY2_$d"]));
            $_SESSION['c'][$seq]["CITY"] = str_replace("\'", "", str_replace('\"', '', $_POST["CITY_$d"]));
            $_SESSION['c'][$seq]["ZIP"] = str_replace("\'", "", str_replace('\"', '', $_POST["ZIP_$d"]));
            $_SESSION["RETURNING_DISCOUNT"][$_SESSION['c'][$seq]["COMPANY"]] = $_POST["RETURNING_COMPANY_$d"];

            $seq++;

        }//end declare var in $_SESSION

    }//end for

                header("location: register3.php");

}//end usersubmit 
```

它设置的内容如下：

```
[RETURNING_DISCOUNT] => Array
    (
        [working] => 1
    )

[c] => 11 
```

它应该设置的内容（如果我禁用标题位置则确实设置）是：

```
[RETURNING_DISCOUNT] => Array
        (
            [working] => 1
        )

    [c] => Array
        (
            [1] => Array
                (
                    [COMPANY] => jk
                    [PHONE] => jhgk
                    [STATE] => 
                    [COUNTRY] => 
                    [ADDY1] => 
                    [ADDY2] => 
                    [CITY] => 
                    [ZIP] => 
                )

        ) 
```

如您所见，问题出在 $_SESSION['c'] 数组上。就像我说的那样，当你禁用 header("location: register3.php"); 时它会起作用。几乎就像在正确设置多维数组值之前页面重定向一样。

这可能是 output_buffering 问题吗？我的 php.ini 文件中有 output_buffering = off 。我也打开它，看看它是否会有所作为，但没有运气。

对此的任何见解将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:40:34.043

请尝试在标头重定向之前打印会话内容，并检查此页面的格式是否正确。

```
print_r($_SESSION);
exit; 
```

并注释页面上的标头重定向行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:26:23.070

路人让我走上正确的道路。register3.php 是罪魁祸首。我仍然不明白相同的代码在两台服务器上的呈现方式有何不同。

这是我所拥有的：

```
for($c=0; $c<=10; $c++){
    if($_SESSION['c'][$c]){
        $all_co[] = "taco";
    }//end if something is found in array
}//end for 
```

当我将 var $c 更改为 $x 时，一切正常。我很高兴我终于解决了这个问题，但仍然对为什么会发生这种情况感到不安。

# css - FontFace 中字体的不同版本

> ID：14933837
> 
> 赞同：0
> 
> 时间：2013-02-18T10:11:54.813
> 
> 标签：css, font-face

我使用[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)来生成 GillSans 字体的各种版本（.svn、.eot...）。

我现在可以像这样使用它：

```
@font-face {
  font-family: 'GillSansFF';
  src: url('fonts/GillSans.eot');
  src: local('☺'), url('fonts/GillSans.woff') format('woff'), url('fonts/GillSans.ttf') format('truetype'), url('fonts/GillSans.svg') format('svg');
  font-weight: normal;
  font-style: normal;
}

h1 {
    font-family: "GillSansFF", Calibri, sans-serif;
} 
```

由于 GillSans 还包括“Gill Sans Light”（粗体、斜体等），我如何指定“Light”版本？谢谢

*编辑*正如所指出的，解决方案是使用不同的字体。要从单个 ttc 中提取 ttf，我发现了这个工作 Python 脚本： http: [//pastebin.com/QXcAtP24](http://pastebin.com/QXcAtP24)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:25:39.277

只需为您的浅色字体添加一个额外的 @font-face 声明：

```
@font-face {
  font-family: 'GillSansFF';
  src: url('fonts/GillSans.eot');
  src: local('☺'), url('fonts/GillSans.woff') format('woff'), url('fonts/GillSans.ttf') format('truetype'), url('fonts/GillSans.svg') format('svg');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'GillSansFF';
  src: url('fonts/GillSans-light.eot');
  src: local('☺'), url('fonts/GillSans-light.woff') format('woff'), url('fonts/GillSans.ttf') format('truetype'), url('fonts/GillSans-light.svg') format('svg');
  font-weight: lighter;
  font-style: normal;
} 
```

# php - 我应该如何使用 PHP 读取自闭合 XML 标签？

> ID：14933839
> 
> 赞同：0
> 
> 时间：2013-02-18T10:12:07.433
> 
> 标签：php, xml, domdocument

我正在使用 PHP 阅读一些 XML，但我不知道如何阅读自闭合标签。我的`<No_of_Rooms/>`标签有时会显示为`<No_of_Rooms>3</No_of_Rooms>`，有时显示为`<No_of_Rooms/>`。
阅读这些的正确方法是什么？

这是我目前正在使用的代码。

```
$rooms_tag = $property->getElementsByTagName("No_of_Rooms");
$exists = $rooms_tag->length > 0;
if (!$exists ) 
    $rooms=0;
else    
    $rooms = $rooms_tag->item(0)->nodeValue;
echo "Number of rooms   : " . $rooms . "<br>"; 
```

以下是 XML 环境的示例：

```
<property>
  <Unit_Reference_No>EL-S-1028</Unit_Reference_No>
  <No_of_Rooms/>
  <Latitude>25.198519</Latitude>
  <Longitude>55.275478</Longitude>
  <unit_measure>Sq.Ft.</unit_measure>
</property> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:07:39.420

检查元素的 nodeValue 是否不是空字符串。DOMNode 的 nodeValue 是一个字符串，如果没有设置值，当您查看任何 DOMNode->nodeValue 属性时，您将得到一个空字符串。

通过将第 2 行的检查更改为，我能够使您的 XML + 代码正常工作`$exists = $rooms_tag->item(0)->nodeValue != '';`

我认为您可能也对命名变量的方式感到困惑。 `getElementsByTagName()`返回一个`NodeList`对象，该对象（可能）包含多个`DOMNode`对象。`NodeList`如果您的 XML 中有一个 No_of_Rooms 元素，则 $rooms_tag 的长度将始终 > 0。如果我要重写所有这些，它看起来像这样：

```
$rooms_list = $property->getElementsByTagName("No_of_Rooms");
$rooms_tag = $rooms_list->item(0); //or loop through the list if you expect multiple items.

//if nodeValue has a value, set $num_rooms to that value, else set it to 0.
$num_rooms = ($rooms_tag->nodeValue != '' ? $rooms_tag->nodeValue : 0);
echo "Number of rooms   : " . $num_rooms . "<br>";} 
```

这（无论如何对我来说）要清楚得多。

# c# - 此字符串的正则表达式模式

> ID：14933841
> 
> 赞同：0
> 
> 时间：2013-02-18T10:12:10.547
> 
> 标签：c#, regex

我有一个问题来匹配闲散行中的一些字符串：

```
02-16 12:23:24.046  3068  3068 E AndroidRuntime:    at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:153) 
02-16 12:23:24.046  3068  3068 E AndroidRuntime:    at android.view.Window$LocalWindowManager.addView(Window.java:559)
02-16 12:23:24.046  3068  3068 E AndroidRuntime:    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2716)
02-16 12:23:24.046  3068  3068 E AndroidRuntime:    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2151)
02-16 12:23:24.046  3068  3068 E AndroidRuntime:    at android.app.ActivityThread.access$700(ActivityThread.java:140)
02-16 12:23:24.046  3068  3068 E AndroidRuntime:    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1238)
02-16 12:23:24.046  3068  3068 E AndroidRuntime:    at android.os.Handler.dispatchMessage(Handler.java:99) 
```

我想在最后两个 '(' ')' 字符之间匹配字符串。我知道有很多正则表达式教程，但我还不能得到它。我需要对此进行更多研究

所以成功的结果应该是：

```
WindowManagerImpl.java:153
Window.java:559
ActivityThread.java:2716
ActivityThread.java:2151
and so on 
```

我所知道的是并不总是有“java”这个词，所以我想在最后一个“（”“）”之间取值

谢谢大家的任何线索

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:16:07.407

假设该行中没有其他括号，那么这样的事情会起作用：

```
\([^)]+\) 
```

然后，您可以从匹配的末端修剪 ( 和 )。

或在内部文本中分组：

```
\(([^)]+)\) 
```

然后使用 match.Groups[1].Value 获取内部组的值。

更新：@cabecao 提醒我，如果文本总是出现在末尾，并且可能还有其他括号，那么在末尾添加一个“$”以匹配行尾。

```
\([^)]+\)$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T10:17:12.723

您可以使用：

```
var matches = Regex.Matches(input, @"(?<=\().*(?=\))");
foreach (Match item in matches)
{
    Console.WriteLine(item.Value);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T10:18:43.753

这应该这样做：

```
(?<=\()[^)]+(?=\)$) 
```

使用[环视](http://www.regular-expressions.info/lookaround.html)而不是[捕获组](http://www.regular-expressions.info/brackets.html)可以更轻松地提取结果。它将匹配[字符串末尾的](http://www.regular-expressions.info/anchors.html)一组非括号字符，前面有一个，后面有一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T10:16:14.820

我现在能想到的最简单的：

```
.*\((.*)\)$ 
```

# android - Android Facebook SDK 3.0：获取用户令牌的简单方法（无需会话）

> ID：14933844
> 
> 赞同：1
> 
> 时间：2013-02-18T10:12:14.683
> 
> 标签：android, facebook

我只需要获取具有一定权限的用户的 FB 令牌。然后我会将它发送到我的服务器。其他一切都是从那里完成的。我不需要缓存的令牌或任何东西。SDK 可以对每次尝试进行全面检查，它还应该确保用户没有撤​​销对我的应用程序的访问权限，尽管令牌可能尚未过期。

最简单的方法是什么？

# java - 在 Java 中解析字符串以用特定数据替换标记

> ID：14933846
> 
> 赞同：1
> 
> 时间：2013-02-18T10:12:22.330
> 
> 标签：java, string-parsing

我有一堆字符串，其中包含一些应该用图像替换的特定标记。所以起初我用标记和图像创建了哈希图：

```
Map<String, String> images = new HashMap<String, String>();
images.put(":img:howdy:", "path/images/hello.png");
images.put(":img:code:", "path/images/code.png");
images.put(":img:smile:", "path/images/sm.png");
//...and 70 more records 
```

字符串看起来像：

> 这是一个字符串 :img:howdy:，你知道的 :img:smile:
> 
> 甚至更多：img：smile：
> 
> 这是一个带有图像的字符串：img:code::img:smile：

解析后，所有标记都计划用图像替换。

我坚持以下几点：

```
Map<String, String> images = new HashMap<String, String>();
images.put(":img:howdy:", "path/images/hello.png");
images.put(":img:code:", "path/images/code.png");
images.put(":img:smile:", "path/images/sm.png");

String[] strings = {"This is a string :img:howdy:, you know it :img:smile:",
                 "And even more:img:smile:",
                 "This is a string with images:img:code::img:smile:"};

for (String text : images.keySet()) {
    for (String string : strings) {
        if(string.contains(text)) {
            string.replace(text, images.get(text));
        }
    }
} 
```

首先，标记被替换，但有很多迭代。其次，如果我使用，例如，StringBuilder，我有很多重复，一些标记被替换，一些没有。

我不擅长字符串解析和相应的算法（目前），所以在查看我选择的方法后不要向我扔石头。

**按照 Dariusz Waver 的建议，添加** 了一些 Reworked，这就是我所拥有的：

```
private final String IMAGE_PATTERN = ":s:\\w+:";

//.......

Pattern p = Pattern.compile(IMAGE_PATTERN);
Matcher m = p.matcher(message);
while(m.find())
{
    String imgPattern = message.substring(m.start(), m.end());
    String imgPath = ImgPaths.images.get(imgPattern);

    //If there's no such image in Images Map
    if(imgPattern != null) {
        message = message.replace(imgPattern, imgPath);
        m.reset(message);
    }
}

StringBuilder result = new StringBuilder();
result.append(timestamp).append(" - ").append(sender)
        .append(": ").append(message); 
```

考虑到文本量非常大，有什么方法可以使其更加优化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:15:27.047

`string`是内部 for 循环的局部变量。`string.replace()`创建一个新字符串，并且不更改当前字符串。但即使`string = string.replace(...)`在这里也无济于事，因为重新分配它不会改变数组的内容。

您必须将**内部**for 循环替换为：

```
for (int i = 0; i < strings.length; i++) {
    if(strings[i].contains(text)) { // this check is not really necessary
        strings[i] = strings[i].replace(text, images.get(text));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:16:02.983

我建议反过来做：首先找到所有出现的 regex `:\w+:\w+`，然后在地图中搜索它的值，然后，如果找到，替换字符串。

对于大量的图像和大量的文本，这将是更好的方法。

但是，您的代码非常干净，如果您没有任何性能问题，您可以保持原样 - 前提是您确实完成了 jlordo 发布的修复：

```
for (int i = 0; i < strings.length; i++) {
    if(strings[i].contains(text)) {
        strings[i] = strings[i].replace(text, images.get(text));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T10:44:32.423

你为什么不试试像这样的模板库：[StringTemplate](http://www.stringtemplate.org/)？

示例代码：

```
String[] strings = {"This is a string <howdy>, you know it <smile>",
                     "And even more <smile>",
                     "This is a string with images <code><smile>"};

for (String string : strings) {
    ST hello = new ST(string);

    hello.add("howdy", "path/images/hello.png");
    hello.add("code", "path/images/code.png");
    hello.add("smile", "path/images/sm.png");

    System.out.println(hello.render());
} 
```

为什么要重新发明轮子？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T10:17:23.477

1-`.contains`似乎没有必要

2-字符串是不可变的，你必须做`String string = string.replaceAll(...)`

# c# - How to get file name from a specified folder?

> ID：14933858
> 
> 赞同：-1
> 
> 时间：2013-02-18T10:13:40.743
> 
> 标签：c#, asp.net

I want to get the file name resides under a specified folder.

i.e. there is a file stored under two folders `First\Second\test.txt` I want have the path of the parent directory of file that is `First\Second\` in my program. Now I want to get the file name residing under the directory "Second" using code.

Please help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:15:51.183

You can use [Directory.GetFiles](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx) method to get the files in directory with complete path and later use these files path to extract files names.

```
string [] fileEntries = Directory.GetFiles(targetDirectory); 
```

To get the files names without path you can use linq

```
var fileNames System.IO.Directory.GetFiles(targetDirectory).Select(c => Path.GetFileName(c)).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:15:59.153

The following will do the trick if you want one file.

```
using System.IO; 
using System.Linq

var file = Directory.GetFiles("C:\\First\\Second\\").FirstOrDefault();

if (file != null)
{
    var fileName = Path.GetFileName(file);
} 
```

The following will get you all the file names:

```
using System.IO; 
using System.Linq

var files = Directory.GetFiles("C:\\First\\Second\\");
var fileNames = files.Select(f => Path.GetFileName(f)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:16:38.733

Here you go:

1)

```
string sourceDir = @"C:\First\Second\";
string[] fileEntries = Directory.GetFiles(sourceDir);

foreach(string fileName in fileEntries)
{
   // do something with fileName
   Console.WriteLine(fileName);
} 
```

2)

```
System.IO.DirectoryInfo dir = new System.IO.DirectoryInfo(Location);
foreach (System.IO.FileInfo f in dir.GetFiles("*.*"))
{ 
    Console.WriteLine(f.Name); 
} 
```

# c++ - 为 C++ 添加一些 python 风格

> ID：14933865
> 
> 赞同：-6
> 
> 时间：2013-02-18T10:14:25.087
> 
> 标签：c++, python

# 大括号

```
for(int i=0; i<10; i++)
{
    line one
    line two
}
if (something)
{
    line three
    line four
}
else if(something)
{
    line five
    line six
    line seven
}
else
{
    line eight
    line nine
    line ten
} 
```

我是一个懒惰的打字员，近年来我对 C++ 中的花括号产生了厌恶。并不是说我认为它们是不必要的；实际上，我不能在长长的代码中没有它们。但是当一个代码分支只包含 3 到 5 行时，仅增加缩进似乎就足以使上下文清晰，而花括号似乎除了占用我宝贵的屏幕空间之外没有太多作用（尤其是当我使用垂直分割）并且需要我按更多的键，由于它们在我的键盘上的位置不太方便，这也给我的手指增加了更多的压力。

所以，我正在考虑做一个预处理器来允许我使用一些 python 风格的 c++，像这样：

```
for(int i=0; i<10; i++)
    line one
    line two

if (something)
    line three
    line four
else if(something)
    line five
    line six
    line seven
else
    line eight
    line nine
    line ten 
```

所以我们在代码的短分支中使花括号成为可选的，这样代码就变得更简洁了。如果我有很多不超过 8 行的函数，那么去掉花括号对我来说真的有很大的不同。东西看起来更紧凑、更干净；并且能够以某种方式在一个屏幕上看到更多有用的代码只会让我感觉更好。做以下这种事情的人可能也会心存感激：

```
void blahbalh(){
    code...
} 
```

显然，人们在几十年前就开始这样做是为了屏幕空间。现在，如果花括号变成可选的不是更好吗？也就是说，我们仅在包含的代码变得相对较长时才使用它们。

# 一般符号

为 C++ 添加更多的 Python 风格。我实际上认为围绕条件的大括号也可以取消。它看起来和 C++*真的很不*一样，但是在我习惯了 python 之后，我发现它真的很优雅：

```
if something:
    line three
    line four
elif something:
    line five
    line six
    line seven
else:
    line eight
    line nine
    line ten 
```

一般来说，我发现 python 倾向于使用更少的符号，这是一件好事：

*   符号比纯文本会导致更多的手指拉伤，因为它们在我们的键盘上的位置相对不方便，并且需要按 SHIFT（这里的 qwerty 和 Dvorak 相同）
*   由于字母数字键更容易按下，如果我们避免使用符号，我们可以更快地键入。而我的经验是，当我不必频繁按下 shift 键时*，*我会感觉更自然。

所以我们可以有更多的纯文本操作符，比如使用`and`in place of`&&`和`or`in place of`||`等。我们可以有 python 风格的 for 循环，这真的更容易输入

你们觉得这个 python 风格的 c++ 怎么样？有什么建议么？

我正在考虑将这一切作为一个预处理器来完成，它基本上会进行一些简单的源到源转换。这看起来是无需定义新语言的最简单方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T10:18:07.597

> 我是一个懒惰的打字员，近年来我对 C++ 中的花括号产生了反感……而花括号似乎并没有比占用我宝贵的屏幕空间更多

像这样编写代码，然后切换到为您键入大括号的 IDE。你可以继续编写我们其他人都能理解的代码。

```
for (int i=0; i < 10; i++) {
    line one
    line two
}

if (something) {
    line three
    line four
} else if (something) {
    line five
    line six
    line seven
} else {
    line eight
    line nine
    line ten
} 
```

# matlab - 为 DE 系统实施 Runge-Kutta

> ID：14933867
> 
> 赞同：2
> 
> 时间：2013-02-18T10:14:33.667
> 
> 标签：matlab, differential-equations, numerical-analysis

我正在尝试在 MATLAB中实现[用于 DE 系统的 Runge-Kutta 方法。](http://imageshack.us/photo/my-images/189/rkforde.png/)我没有得到[正确的答案](http://imageshack.us/photo/my-images/802/591hw.png/)，我不确定代码或我用来运行它的命令是否有问题。

这是我的代码：

```
function RKSystems(a, b, m, N, alpha, f)
    h = (b - a)/N;
    t = a;
    w = zeros(1, m);

    for j = 1:m
        w(j) = alpha(j);
    end

    fprintf('t = %.2f;', t);
    for i = 1:m
        fprintf(' w(%d) = %.10f;', i, w(i));
    end
    fprintf('\n');

    k = zeros(4, m);
    for i = 1:N
        for j = 1:m
           k(1, j) = h*f{j}(t, w);
        end

        for j = 1:m
            k(2, j) = h*f{j}(t + h/2, w + (1/2)*k(1));
        end

        for j = 1:m
            k(3, j) = h*f{j}(t + h/2, w + (1/2)*k(2));
        end

        for j = 1:m
            k(4, j) = h*f{j}(t + h, w + k(3));
        end

        for j = 1:m
            w(j) = w(j) + (k(1, j) + 2*k(2, j) + 2*k(3, j) + k(4, j))/6;
        end

        t = a + i*h;

        fprintf('t = %.2f;', t);
        for k = 1:m
            fprintf(' w(%d) = %.10f;', k, w(k));
        end
        fprintf('\n');

    end 
end 
```

我正在尝试在[这个问题](http://imageshack.us/photo/my-images/534/591hwprob.png/)上进行测试。这是我的命令和输出：

> >> U1 = @(t, u) 3*u(1) + 2*u(2) - (2*t^2 + 1)*exp(2*t);
> 
> >> U2 = @(t, u) 4*u(1) + u(2) + (t^2 + 2*t - 4)*exp(2*t);
> 
> >> a = 0; b = 1; 阿尔法 = [1 1]; 米 = 2; h = 0.2; N = (b - a)/h；
> 
> >> RKSystems(a, b, m, N, alpha, {U1 U2});
> 
> t = 0.00；w(1) = 1.0000000000; w(2) = 1.0000000000；
> 
> t = 0.20；w(1) = 2.2930309680；w(2) = 1.6186020410；
> 
> t = 0.40；w(1) = 5.0379629523；w(2) = 3.7300162165；
> 
> t = 0.60；w(1) = 11.4076339762；w(2) = 9.7009491301；
> 
> t = 0.80；w(1) = 27.0898576892；w(2) = 25.6603894354；
> 
> t = 1.00；w(1) = 67.1832886708；w(2) = 67.6103125539；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:18:39.353

所以......这就是我的做法，我很难阅读你的代码片段中发生的事情，但我希望这对你有所帮助。此外，matlab 内置了 rk 求解器，我建议您熟悉这些求解器。

```
%rk4 solver
dt = .2;
t = 0:dt:1;
u = zeros(2,numel(t));
u(:,1) = 1;

for jj = 2:numel(t)
    u_ = u(:,jj-1);
    t_ = t(jj-1);
    fa = rhs(u_,t_);
    fb = rhs(u_+dt/2.*fa,t_+dt/2);
    fc = rhs(u_+dt/2.*fb,t_+dt/2);
    fd = rhs(u_+dt.*fc,t_+dt);
    u(:,jj) = u(:,jj-1) + dt/6*(fa+2*fb+2*fc+fd);
end
disp([t;u]') 
```

和 rhs.m 如下：

```
function dudt = rhs(u,t)
dudt = [(3*u(1) + 2*u(2) - (2*t^2 + 1)*exp(2*t));
        (4*u(1) + u(2) + (t^2 + 2*t - 4)*exp(2*t))]; 
```

这将返回以下内容：

```
>> rkorder4
     0    1.0000    1.0000
0.2000    2.1204    1.5070
0.4000    4.4412    3.2422
0.6000    9.7391    8.1634
0.8000   22.6766   21.3435
1.0000   55.6612   56.0305 
```

或者，您可以使用以下内容调用 ode45：

```
dt = .2;
t = 0:dt:1;
rhs=@(t,u)[(3*u(1) + 2*u(2) - (2*t^2 + 1)*exp(2*t));
        (4*u(1) + u(2) + (t^2 + 2*t - 4)*exp(2*t))];

[ts,us]=ode45(@(t,u) rhs(t,u),t,[1 1],[]);
disp([ts us]); 
```

这给了你：

```
 0   1.000000000000000   1.000000000000000
   0.200000000000000   2.125018862140859   1.511597928697035
   0.400000000000000   4.465156492097592   3.266022178547346
   0.600000000000000   9.832481410895053   8.256418221678395
   0.800000000000000  23.003033457636558  21.669270713784108
   1.000000000000000  56.738351357036301  57.106230777717208 
```

这与您从我的代码中得到的非常接近。可以通过减小时间步长来增加两者之间的一致性`dt`。它们总是在 t 的低值处最一致，两者之间的差异随着 t 的增加而增加。两种实现也与分析解决方案非常接近。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T04:07:36.920

我的问题在于以下代码行：

`k(2, j) = h*f{j}(t + h/2, w + (1/2)*k(1));`

`k(3, j) = h*f{j}(t + h/2, w + (1/2)*k(2));`

`k(4, j) = h*f{j}(t + h, w + k(3));`

我期望将（4 x m 矩阵）`k(1)`的整个第一行添加到矩阵（1 x m 矩阵）中，但它只是添加了第一行的第一个元素。为了解决这个问题，我修改了如下几行：`k``w`

`k(2, j) = h*f{j}(t + h/2, w + (1/2)*k(1, :));`

`k(3, j) = h*f{j}(t + h/2, w + (1/2)*k(2, :));`

`k(4, j) = h*f{j}(t + h, w + k(3, :));`

# socket.io - socket.io 中的消息排序

> ID：14933868
> 
> 赞同：6
> 
> 时间：2013-02-18T10:14:41.993
> 
> 标签：socket.io, message

socket.io 是否保证 on() 回调将以与发出消息的顺序相同的顺序被调用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T10:26:47.310

Node.js 是一个单一的事件循环，所以是的。

但是你还有另一个问题，想想你和你的客户之间的延迟，如果两个客户发送他们的消息，到达服务器的第一条消息将首先被处理，所以如果第一个客户发出他的消息但他有更高的延迟从第二个客户端（在第一个客户端之后发送他的消息）到服务器，那么它可能是第二个客户端消息，将首先处理

# java - 使用杰克逊序列化 TreeModel

> ID：14933871
> 
> 赞同：2
> 
> 时间：2013-02-18T10:14:55.503
> 
> 标签：java, json, spring-mvc, jackson

我有以下模型：

```
public class CategoryModel {

    public String id;
    public String name;
    public String imageUrl;
    public CategoryModel parent;
    public List<CategoryModel> childrens = new ArrayList<CategoryModel>();
} 
```

我正在使用 Spring MVc + jackson 来返回 Json。

我的操作构建了以下模型，执行后，我得到了 stackoverflow 异常。

```
List<CategoryModel> allCategories = new ArrayList<CategoryModel>(); 

CategoryModel model = new CategoryModel();
model.id = "1";
model.name = "category 1";

CategoryModel model1 = new CategoryModel();
model.id = "2";
model.name = "category 1.1";

model.childrens.add(model1);
model1.parent = model;

allCategories.add(model); 
```

知道我有什么问题吗？

这是日志文件（它的一部分）：

> 在 org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:446) 在 org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150) 在 org.codehaus.jackson .map.ser.BeanSerializer.serialize(BeanSerializer.java:112) 在 org.codehaus.jackson.map.ser.std.StdContainerSerializers$IndexedListSerializer.serializeContents(StdContainerSerializers.java:122) 在 org.codehaus.jackson.map.ser .std.StdContainerSerializers$IndexedListSerializer.serializeContents(StdContainerSerializers.java:71) 在 org.codehaus.jackson.map.ser.std.AsArraySerializerBase.serialize(AsArraySerializerBase.java:86) 在 org.codehaus.jackson.map.ser.BeanPropertyWriter org.codehaus.jackson.map.ser.std.BeanSerializerBase 中的 .serializeAsField(BeanPropertyWriter.java:446)。在 org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:446) 的 org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112) 的序列化字段（BeanSerializerBase.java:150）在 org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150) 在 org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112) 在 org.codehaus.jackson .map.ser.std.StdContainerSerializers$IndexedListSerializer.serializeContents(StdContainerSerializers.java:122) at org.codehaus.jackson.map.ser.std.StdContainerSerializers$IndexedListSerializer.serializeContents(StdContainerSerializers.java:71) at org.codehaus.jackson .map.ser.std.AsArraySerializerBase.serialize(AsArraySerializerBase.java:86) 在 org.codehaus.jackson.map.ser。BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:446) 在 org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150) 在 org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer. java:112) 在 org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:446) 在 org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150) 在 org .codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112) 在 org.codehaus.jackson.map.ser.std.StdContainerSerializers$IndexedListSerializer.serializeContents(StdContainerSerializers.java:122) 在 org.codehaus.jackson .map.ser.std.StdContainerSerializers$IndexedListSerializer.serializeContents(StdContainerSerializers.java:71) 在 org.codehaus。jackson.map.ser.std.AsArraySerializerBase.serialize(AsArraySerializerBase.java:86) 在 org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:446) 在 org.codehaus.jackson.map.ser。 std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150) 在 org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112) 在 org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter. java:446) 在 org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150) 在 org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112) 在 org .codehaus.jackson.map.ser.std.StdContainerSerializers$IndexedListSerializer.serializeContents(StdContainerSerializers.java:122) 在 org.codehaus.jackson.map.ser.std。StdContainerSerializers$IndexedListSerializer.serializeContents(StdContainerSerializers.java:71) 引起：java.lang.StackOverflowError

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T11:05:55.720

正如*drorb*提到的那样，循环引用是问题所在。[但是，您应该使用@JsonBackReference](http://fasterxml.github.com/jackson-annotations/javadoc/2.1.0/)来指示循环引用，而不是使用 @JsonIgnore 注释。有了这个注解，Jackson 能够在反序列化时映射到正确的父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:55:47.607

您的模型中有一个模型和模型1（父/子）之间的循环引用，杰克逊不会自动处理。[您可以通过使用@JsonIgnore](http://jackson.codehaus.org/1.0.0/javadoc/org/codehaus/jackson/annotate/JsonIgnore.html)注释标记要忽略的引用之一来解决此问题。[您可以在本文](http://www.cowtowncoder.com/blog/archives/2011/02/entry_443.html)中找到更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-28T23:11:42.330

长话短说，我已经使用了以下建议

```
Summary.java
@OneToMany(cascade=CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "summary")
@JsonManagedReference
private List<Section> issueSections;

Section.java
@ManyToOne(fetch = FetchType.LAZY)
@JsonBackReference
@JoinColumn(name = "SUMMARY_ID", updatable = false)
private Summary summary; 
```

这解决了我的问题。

# ms-access - 使用 SQL 代码删除重复记录，搜索 3 列，但显示所有列

> ID：14933872
> 
> 赞同：1
> 
> 时间：2013-02-18T10:14:57.687
> 
> 标签：ms-access, ms-access-2010

我有一个数据库，我正在尝试删除重复记录（无法阻止这些重复记录，因为它来自具有超过 70,000 条记录的 excel 电子表格）

我已经使用 SQL 创建了几个查询，以使总数达到大约 1400 条记录，但是仍然存在重复的地方，例如客户输入邮政编码，然后再次输入，中间没有空格。

我希望的是做一个 SQL 查询来删除搜索名字、姓氏和邮政编码的所有重复记录，但是我需要它来显示所有列的结果（标题、名字、姓氏、地址、地址 2、镇/市，县，邮政编码）

我希望这对某人有意义，因为我一直在到处寻找答案，但没有什么真正有意义，因为这是我第一次开始使用 SQL 编码，所以在这方面我是一个完全的新手。

我目前正在使用 Microsoft Access 2010

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:22:31.223

在 MS Access 中，有一些向导，例如查找重复项向导。

以下步骤中的 SQL 是：

```
SELECT Table1.[AText], Table1.[ADate], Table1.[ANumber]
FROM Table1
WHERE (((Table1.[AText]) In (SELECT [AText] 
   FROM [Table1] As Tmp GROUP BY [AText] HAVING Count(*)>1 )))
ORDER BY Table1.[AText]; 
```

如果您遇到困难，查询向导非常有帮助。

**选择查询类型**

![选择查询类型](../Images/1e80dec8dd60b01fa213f9be3f2a1cdd.png)

**选择表**

![选择表](../Images/3823e56b4f50c08e9db9cbf81076c814.png)

**选择要查找重复项的字段**

![选择要查找重复项的字段](../Images/2679d539b204cea8245f48f51054ed3b.png)

**选择任何其他字段**

![**选择任何其他字段**](../Images/17e12c00968771ff88bd6e7c91ea0f55.png)

**设计视图中的查询**

![设计视图中的查询](../Images/56d9c029fef6dc8ac7f475cc46472ab9.png)

# oracle - 可以将提交应用于脚本中的每个 INSERT INTO 吗？

> ID：14933874
> 
> 赞同：1
> 
> 时间：2013-02-18T10:15:16.183
> 
> 标签：oracle, commit, transaction-isolation

我刚刚从 SQL Server 迁移到 ORACLE，并且正在编写一个脚本（SQL Server 风格）。在 SQL Server 中，我们在脚本中应用一些逻辑后使用 BEING TRAN - END TRAN。这可以在 BEGIN-END 块内完成。在 Oracle 中，我发现这有点困难。在这个网站上进行了大量的谷歌搜索和搜索后，我仍然不清楚如何满足这个要求。

当我运行脚本（粘贴在下面）时，它作为一个事务运行。并且 DBMS_OUTPUT.Put_line 也会在整个脚本执行后显示。有没有办法在每次提交后打印 DBMS_OUTPUT.Put_line ？

另外，我愿意接受想法，如果有任何其他方法可以处理这个脚本，以便在脚本移动到下一个子查询之前提交每个子查询......请让我知道。

这是我的脚本：

```
SET SERVEROUTPUT ON;
--spool Consolidated.log;
WHENEVER SQLERROR EXIT SQL.SQLCODE;
SET DEFINE OFF;

ALTER SESSION SET GLOBAL_NAMES=FALSE;

DECLARE
ExtractType         NUMBER(9);
RecordsExtracted    NUMBER(9);
CurStatus           NUMBER(9);
StartDate           date;
ErrorMessage        NVARCHAR2(1000);
LastExtrctTimestamp DATE;

BEGIN    
    -- AgreementTradeTypes
    StartDate := sysdate;
    ExtractType := 44;

    DELETE FROM AgreementTradeTypes;

    INSERT INTO AgreementTradeTypes (AgreementId,AgreementName,PrincipalId,Principal,CounterpartyId,Counterparty, TradeTypeId,TradeTypeName,BusinessLine,AdditionalCriteria)
    -- From CORE DB 
    SELECT  
            IATT.AgreementId, AG.AgreementName, IATT.PRINCIPALID, Principal.ENTITYNAME Principal, 
            IATT.COUNTERPARTYID, Cpty.ENTITYNAME Counterparty, 
            IATT.TradeTypeID, TT.TradeTypeName, BusLine.ENUMTEXT BusinessLine, IATT.ADDITIONALCRITERIA
    FROM    IncludedAgreementTradeTypes@RPTCORE IATT 
            INNER JOIN Entities@RPTCORE Principal ON IATT.PRINCIPALID = Principal.ENTITYID
            INNER JOIN Entities@RPTCORE Cpty ON IATT.CounterpartyId = Cpty.ENTITYID
            INNER JOIN EnumValues@RPTCORE BusLine ON IATT.BusinessLine = BusLine.ENUMVALUE AND BusLine.ENUMTYPE = 'BusinessLine'
            INNER JOIN Agreements@RPTCORE AG ON IATT.AGREEMENTID = AG.AgreementID
            INNER JOIN TradeTypes@RPTCORE TT ON IATT.TRADETYPEID = TT.TradeTypeID
    ORDER BY IATT.AgreementId;
    RecordsExtracted := SQL%RowCount;

    DBMS_OUTPUT.put_line('AgreementTradeTypes Records Extracted:' || RecordsExtracted);       

    -- On Success
    CurStatus := 2;
    ErrorMessage := 'AgreementTradeTypes Complete';

    INSERT INTO ExtractRecords(ExtractType, RecordsExtracted, Status, ExtractTimestamp, StartDate, EndDate, ErrorMessage)
    VALUES (ExtractType, RecordsExtracted, CurStatus, SysDate, StartDate, SysDate, ErrorMessage);

    INSERT INTO LoadRecords (LoadType,Status,LoadTimestamp,StartDate,EndDate) 
    VALUES (ExtractType, CurStatus, SysDate, StartDate, SysDate);

    COMMIT; /* Committing first Block */

    -- INTEREST PAYMENT PERIODS 
    StartDate := sysdate;
    ExtractType := 57;

    DELETE FROM InterestPaymentPeriods;

    INSERT INTO InterestPaymentPeriods (InterestPaymentPeriodId,AgreementId,AgreementName,CurrencyId,CurrencyName,InstrumentId,InstrumentName,PositionType,CollateralMarginType,PeriodStart,PeriodEnd,NextPeriodEnd,AccruedInterest,OpeningBalance,EndingBalance,MarketIndexId,MarketIndexName,Spread,DayCountConvention,CalculationType,ManagingLocation,BusinessLine)
    -- From CORE DB 
    SELECT
            IPP.INTERESTPAYMENTPERIODID, IPP.AGREEMENTID, AG.AGREEMENTNAME, IPP.CURRENCYID, CUR.CODE CurrencyName, IPP.INSTRUMENTID,
            Instruments.DESCRIPTION InstrumentName, PosType.ENUMTEXT PositionType, CollMargType.ENUMTEXT CollateralMarginType,
            IPP.PERIODSTART, IPP.PERIODEND, IPP.NEXTPERIODEND, IPP.ACCRUEDINTEREST, IPP.OPENINGBALANCE, IPP.ENDINGBALANCE,
            IPP.MARKETINDEXID, MI.MARKETINDEXNAME, IPP.SPREAD, DCC.ENUMTEXT DayCountConvention, CalcType.ENUMTEXT CalculationType,
            Cty.CITYNAME ManagingLocation, BusLine.ENUMTEXT BusinessLine
    FROM
            INTERESTPAYMENTPERIODS@RPTCORE IPP
            INNER JOIN Agreements@RPTCORE AG ON IPP.AGREEMENTID = AG.AGREEMENTID
            LEFT OUTER JOIN Currencies@RPTCORE CUR ON IPP.CURRENCYID = CUR.CURRENCYID
            LEFT OUTER JOIN Cities@RPTCORE Cty ON IPP.MANAGINGLOCATIONID = Cty.CITYID
            LEFT OUTER JOIN MarketIndexes@RPTCORE MI ON IPP.MARKETINDEXID = MI.MARKETINDEXID
            LEFT OUTER JOIN Instruments@RPTCORE ON IPP.INSTRUMENTID = Instruments.INSTRUMENTID
            LEFT OUTER JOIN EnumValues@RPTCORE PosType ON IPP.POSITIONTYPE = PosType.ENUMVALUE AND PosType.ENUMTYPE = 'PositionType'
            LEFT OUTER JOIN EnumValues@RPTCORE CollMargType ON IPP.COLLATERALMARGINTYPE = CollMargType.ENUMVALUE AND CollMargType.ENUMTYPE = 'CollateralMarginType'
            LEFT OUTER JOIN EnumValues@RPTCORE DCC ON MI.DAYCOUNTCONVENTION = DCC.ENUMVALUE AND DCC.ENUMTYPE = 'DayCountConvention'
            LEFT OUTER JOIN EnumValues@RPTCORE CalcType ON IPP.CALCULATIONTYPE = CalcType.ENUMVALUE AND CalcType.ENUMTYPE = 'CalculationType'
            LEFT OUTER JOIN EnumValues@RPTCORE BusLine ON IPP.BUSINESSLINE = BusLine.ENUMVALUE AND BusLine.ENUMTYPE = 'BusinessLine';
    RecordsExtracted := SQL%RowCount;       

    DBMS_OUTPUT.put_line('InterestPaymentPeriods Records Extracted:' || RecordsExtracted);

    -- On Success
    CurStatus := 2;
    ErrorMessage := 'Interest_Payment_Periods Complete';

    INSERT INTO ExtractRecords(ExtractType, RecordsExtracted, Status, ExtractTimestamp, StartDate, EndDate, ErrorMessage)
    VALUES (ExtractType, RecordsExtracted, CurStatus, SysDate, StartDate, SysDate, ErrorMessage);

    INSERT INTO LoadRecords (LoadType,Status,LoadTimestamp,StartDate,EndDate) 
    VALUES (ExtractType, CurStatus, SysDate, StartDate, SysDate);

    COMMIT; /* Committing Second Block */
END;

--spool off;
/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T10:50:35.540

Oracle 中通常的做法是仅在业务事务完成时才提交，这样事务就不会被部分处理。这与其他一些系统不同，因为 Oracle 的多版本和锁定系统确保写入者不会阻塞读取器，而读取器不会阻塞写入器。

对于 DBMS_Output 问题，不，您无法在块执行的中途通过 DBMS_Output 从服务器获得响应。您可能希望查看使用 Utl_File 将数据写入服务器端文件。

其他想法：

*   Consider using TRUNCATE instead of DELETE if you're deleting every row AND you do not need to use foreign keys against that table. TRUNCATE has an implicit commit associated with it, so apply all your truncates at the beginning of the procedure.

*   Consider using the APPEND hint on the inserts to invoke direct path insert if you are loading bulk data, have indexes to maintain, and do not need to allow multiple simultaneous inserts into the table.

*   I'm guessing that the ORDER BY on the inserts is there for a reason -- usually in Oracle it would be to ensure that data rows are physically clustered on the order-by column(s), which leads to greater efficiency on index-based access via those columns. Using a direct path insert would help guarantee physical row ordering, but if you don't need that clustering then remove the ORDER BY

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:52:20.403

The data will be committed in two stages. The `DECLARE`/`BEGIN`/`END` denote the start and end of an anonymous [PL/SQL block](http://docs.oracle.com/cd/E11882_01/appdev.112/e10472/overview.htm#i8859), not a transaction. If you didn't have a commit inside the block (which would be more normal; it's somewhat unusual to have transaction control inside a block) at all, then after the block completes none of your changes would have been committed - you could still roll back if you wanted to.

Your [DBMS_OUTPUT](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_output.htm) calls put messages into a buffer, which the client (e.g SQL*Plus) retrieves and displays after the block completes. There is no way around that - you can't get 'live' updates using that mechanism. There are alternatives, such as using `UTL_FILE` or [setting module information](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_appinf.htm#i996826) for the session that can be viewed from another session, but that's probably overkill for what you seem to be doing.

If you just want to see the message after each section you can split it into two anonymous blocks. The downside of that is perhaps having to declare variables twice, and that they will go out of scope between the blocks - so something you set in the first block won't be visible in the second. You could perhaps work around that using bind variables, via the SQL*Plus `variable` command.

You don't really seem to need to do this in PL/SQL at all, at least in this example, though you said you would be applying some logic in the script at well. If that's not really the case then you could use simple SQL statements, substitution variables and prompt to achieve this, without using PL/SQL at all. Apart from the row counts, which are a little tricky unless you're happy just with the normal `set feedback on` display, like '3 rows inserted'.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:53:07.473

The results of DBMS_OUTPUT will only be displayed after completion of the PL/SQL block. DBMS_OUTPUT and COMMIT are not related to one another. If you can split your script into multiple blocks you can get the results of each block committed and printed before the next block starts.

```
begin
   -- step 1
   insert 
   commit ...
   dbms_output ...
end;
/

begin
   -- step 2
   insert...
   commit ...
   dbms_output ...
end;
/ 
```

# sql - Oracle10g-替换多个回车

> ID：14933875
> 
> 赞同：-1
> 
> 时间：2013-02-18T10:15:17.357
> 
> 标签：sql, oracle, carriage-return

查询返回字符串，如`AAA[][]AAA[][][][]BBB[][]BBB`. 我需要用分号替换四个连续的回车，而不是连续的两个回车。我试过了

```
replace(STRING,chr(13)||chr(13)||chr(13)||chr(13),';') 
```

但它没有效果。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:06:11.960

`CHR(10)`在 linux/unix 系统上使用。在 Windows 上，回车由两个字符组成`CHR(10)||chr(13)`。在 Linux 上：

```
SQL> WITH DATA AS (
  2     SELECT 'AAA
  3  
  4  AAA
  5  
  6  
  7  
  8  BBB
  9  
 10  BBB' txt FROM dual
 11  ) SELECT replace(txt, chr(10)||chr(10)||chr(10)||chr(10), ';') rep
 12      FROM DATA;

REP
------------------------------
AAA

AAA;BBB

BBB 
```

由于您可以直接在表达式中使用换行符，因此您可以使其在所有带有换行符的平台/字符集上工作（我推荐这个解决方案，因为它是可移植的）：

```
SQL> WITH DATA AS (
  2     SELECT 'AAA
  3  
  4  AAA
  5  
  6  
  7  
  8  BBB
  9  
 10  BBB' txt FROM dual
 11  ) SELECT replace(txt, '
 12  
 13  
 14  
 15  ', ';') rep FROM DATA;

REP
--------------------------
AAA

AAA;BBB

BBB 
```

# ios - UISlider 中的 ThumbImage 不正确

> ID：14933879
> 
> 赞同：1
> 
> 时间：2013-02-18T10:15:32.703
> 
> 标签：ios, ipad, uiview, uiimage, uislider

我在我的应用程序中使用 UISlider 来显示下载进度。我遇到了一个奇怪的问题，并且只在横向模式下发生。

概率：

![在此处输入图像描述](../Images/4f06c85af37f5af95af3d8c60f3c0788.png)

我可以在 UISlider 的拇指图像后面看到一条线，这是一个透明的发光图像。

以下是图片：

![最小图像](../Images/e1baeea0ea125eac4024c82cd0f4746e.png)最小图像

![最大图像](../Images/15f0abf34d73f9b5da434da5898199e0.png) 最大图像

![在此处输入图像描述](../Images/cf74d6652a30b6bf8fac3fe5fa650d95.png)

下面是代码：

```
 [downloadProgress setMinimumTrackImage:[[UIImage imageNamed:@"progess_bar_black_left.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 20, 0, 0)] forState:UIControlStateNormal];

            [downloadProgress setMaximumTrackImage:[[UIImage imageNamed:@"progess_bar_black_right.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 20)] forState:UIControlStateNormal];
    [downloadProgress setThumbImage:[UIImage imageNamed:@"glow.png"] 
forState:UIControlStateNormal]; 
```

我检查了 UISlider 的框架，它在两个方向上都是相同的。令人惊讶的是，该问题仅在横向模式下发生。

有没有人遇到过类似的问题。如果是这样，我请帮我解决这个问题。

提前Tnx。

# r - 统计：R中的二项式分布和简单图

> ID：14933884
> 
> 赞同：2
> 
> 时间：2013-02-18T10:15:43.993
> 
> 标签：r

我正在尝试为 R 中的二项式分布制作一个简单的图表。

所以问题是“有 20 名患者，成功对 4 名患者进行手术的概率是多少，（假设概率 = 0.8）。”

我所做的是

```
x <- rbinom(4, size= 20, prob = 0.8)
y <- pbinom(x, size = 20, prob = 0.8)
plot(y, type="l") 
```

但我不确定这是否是绘制它的正确方法..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T10:45:30.797

一般来说，当您的问题类似于以下内容时，您的可视化问题就会出现：

> 假设成功的概率为 0.8，那么在 20 次操作中“至少”有 16 次成功的概率是多少？

这可以通过使用二项式公式来完成，即：

```
p(x=k) = choose(n, k) * .8^k * .2^(n-k) # equivalent to dbinom(k, n, prob=0.8) 
```

我们需要相同的`k = 16..20`值并将所有这些值相加，以得到 20 次中至少 16 次成功的概率。这是使用`dbinom`as 完成的：

```
sum(dbinom(16:20, 20, prob=0.8)) # 0.6296483 
```

请注意，在此成功率（0.8）下至少 4 次成功的概率仅为 1。也就是说，我们肯定会至少有 4 次成功。这就是为什么我选择了相对较高的成功率。

要绘制此图（使用`ggplot2`）：

```
df <- data.frame(x=1:20, prob=dbinom(1:20, 20, prob=0.8))
require(ggplot2)
ggplot(data=dd, aes(x=x,y=prob)) + geom_line() +
      geom_ribbon(data=subset(dd,x>=16 & x<=20),aes(ymax=prob),ymin=0,
                  fill="red", colour = NA, alpha = 0.5) 
```

这给了你类似的东西：

![ggplot2_binomial](../Images/90b9e2dc54f10f5daed14b84f20973a2.png)

希望这可以帮助。

# mysql - 慢mysql子查询

> ID：14933889
> 
> 赞同：2
> 
> 时间：2013-02-18T10:15:51.597
> 
> 标签：mysql, sql

我正在尝试优化慢查询，在我的计算机上运行大约需要 5 分钟，在我的服务器上运行大约需要相同的时间（有 8gb 的内存）

```
SELECT
    buyer_id as bid,
    date_sold as dsold,
    (
        SELECT seller_id
        FROM sale
        WHERE buyer_id = bid
        ORDER BY date_acquired
        LIMIT 1
     ) as sid
from sale
WHERE seller_id = 3585328; 
```

我为此查询创建了一个测试索引。

```
| sale  |          1 | test                |            1 | buyer_id         | A         |     4900222 |     NULL | NULL   |      | BTREE      |         |
| sale  |          1 | test                |            2 | date_acquired    | A         |    14700667 |     NULL | NULL   |      | BTREE      |         | 
```

当我进行解释时，我得到

```
mysql> EXPLAIN SELECT buyer_id as bid,date_sold as dsold, (SELECT seller_id FROM sale WHERE buyer_id = bid ORDER BY date_acquired LIMIT 1) as sid from sale WHERE seller_id = 3585328;
+----+--------------------+-------+------+---------------+------+---------+-------+-------+------------------------------------------+
| id | select_type        | table | type | possible_keys | key  | key_len | ref   | rows  | Extra                                    |
+----+--------------------+-------+------+---------------+------+---------+-------+-------+------------------------------------------+
|  1 | PRIMARY            | sale  | ref  | test          | test | 8       | const | 12466 | Using index                              |
|  2 | DEPENDENT SUBQUERY | sale  | ref  | test          | test | 8       | func  |     3 | Using where; Using index; Using filesort | 
```

我知道子查询可能会很慢，但是我对如何优化没有任何想法。我不确定它是否重要，但如果我按buyer_id 分组，查询运行速度明显更快。用连接替换感觉很棘手，因为我在子查询中依赖“限制 1”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:25:32.700

首先，您的查询对我来说似乎很奇怪。除非我没有得到您想要做的事情，否则我不明白您为什么要执行此子查询，因为您想获得“buyer_id”但其中的buyer_id = 3585328;

其次，如果这是一个错字，并且您想做其他事情，如果您按 date_acquired 排序，则应该在 date_acquired 上有一个索引；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:31:16.160

如果您在这里的目的是仅获取最新信息`sid`；尝试类似：

```
SELECT
    t1.buyer_id AS bid,
    t1.date_sold AS dsold,
    t1.id AS sid
FROM
    sale AS t1
LEFT OUTER JOIN
    sale AS t2
    ON (t1.buyer_id = t2.buyer_id AND t1.date_acquired < t2.date_acquired)
WHERE t2.date_acquired IS NULL; 
```

# c - C 程序中的 Seg Fault 错误

> ID：14933904
> 
> 赞同：1
> 
> 时间：2013-02-18T10:16:25.113
> 
> 标签：c, debugging, gdb

我有一个超过 300 行的程序，除了导致 seg 错误的 fclose 之外，它 100% 工作......现在，我什至无法让我的程序运行。gdb 给了我这个错误，老实说我不知道​​如何解释

```
 ____strtol_l_internal (nptr=0x0, endptr=0x0, base=10,
       group=<value optimized out>, loc=0x349c78d580) at ../stdlib/strtol_l.c:298
       298       while (ISSPACE (*s)) 
```

谁能告诉我这是什么意思？

```
 readLinesFromFile(FILE* fPtr, int* num1, int* num2, char** strs, int lines)
 {
  int i;

  char data[50];

for (i = 0; i < lines; i++){
    fgets(data, 50, fPtr);
    strcpy (*(strs + i), strtok(data, " "));
    *(num1 + i) = atoi(strtok(NULL, " "));
    *(num2 + i) = atoi(strtok(NULL, " "));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:18:33.117

您确定`SIGSEGV`调用时会触发`fclose`吗？

看起来您很简单地将`NULL`指针作为`strtol`函数的第一个参数传递（在代码的其他部分中）

另一种选择可能是堆栈完全搞砸了。

尝试运行它，`gdb`当它崩溃时使用命令`where`查看堆栈

# e-commerce - sitecore 电子商务购物车 onchange 事件

> ID：14933905
> 
> 赞同：0
> 
> 时间：2013-02-18T10:16:26.130
> 
> 标签：e-commerce, sitecore

我对 sitecore 电子商务有疑问，因为我对它很陌生。将新产品添加到购物车时是否有可能执行某些操作。换句话说，是否有可能知道购物车中的产品列表何时更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:58:39.750

这不是 Sitecore 电子商务购物车中内置的事件系统。但是，Active Commerce 模块中有一个可用的购物车事件 API，它扩展了 Sitecore 电子商务。

[http://www.activecommerce.com/](http://www.activecommerce.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:48:34.977

就在这里。因为您使用的是 Sitecore ;)，所以很容易创建自己的 ShoppingCart 类，该类继承自 Sitecore ShoppingCart 类。在您的自定义 ShoppingCart 中，您可以创建所需的任何功能。您还可以使用自己的自定义代码创建自定义事件或覆盖 Sitecore 事件。

不幸的是，我目前手头没有电子商务项目，但我最近从事一个电子商务项目，我经常使用 Reflector 查看 Sitecore ECommerce .dll 的内部，以了解他们如何处理某些操作并使用该信息来创建自定义动作/事件等

# python - 执行脚本后使用 Tkinter 在远程 Linux 服务器上进行尾日志转储

> ID：14933907
> 
> 赞同：0
> 
> 时间：2013-02-18T10:16:30.777
> 
> 标签：python, shell, tkinter, remote-server

我写了一些 Tkinter Python 代码来跟踪日志转储。但我想在远程服务器中跟踪日志文件，我有权登录。

```
import sys,os
import time
from Tkinter import *
from ScrolledText import ScrolledText

class LogViewer(Frame):
    def __init__(self, parent, filename):
        Frame.__init__(self,parent)
        self.filename = filename
        self.file = open(filename, 'r')
        self.text = ScrolledText(parent)
        self.text.pack(fill=BOTH)
        data = self.file.read()
        self.size = len(data)
        self.text.insert(END, data)
        self.after(100, self.poll)

def poll(self):
    if os.path.getsize(self.filename) > self.size:
        data = self.file.read()
        self.size = self.size + len(data)
        self.text.insert(END, data)
        self.after(100,self.poll)

if __name__ == "__main__":
    root = Tk()
viewer = LogViewer(root, sys.argv[1])
viewer.mainloop() 
```

有人可以给我一些关于如何将其集成到远程主机上的尾日志文件的指示。冲动是在远程服务器上执行脚本并通过跟踪日志文件来跟踪进度。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:50:08.050

您的本地计算机是否也在运行 Linux？如果是这样，我认为最简单的方法是使用 sshfs 或 ftpfs 将远程计算机安装为网络文件系统。然后，您无需更改 Python 脚本中的任何内容，只需为其提供安装路径即可。

# iphone - 如何在 ios 的 UIWebView 中闪烁文本？

> ID：14933916
> 
> 赞同：2
> 
> 时间：2013-02-18T10:17:03.390
> 
> 标签：iphone, ios, objective-c, uiwebview, cocos2d-iphone

我正在研究 UIWebView。但是闪烁标签在 webview 中不起作用。如何在 UIWebView 中闪烁文本

```
 NSString *htmlText= @"<blink><br>My Text</blink>";

[webView loadHTMLString:htmlText baseURL:nil]; 
```

回复 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:38:21.467

该`<blink>`标记已弃用，不应在现代 HTML 中使用。`UIWebView`您可以通过 a将支持的 JavaScript 或纯 CSS 实现相同的效果。这个问题 - [Blinking text cross browser](https://stackoverflow.com/questions/4894488/blinking-text-cross-browser) - 将帮助您实现这两种方法。

# mysql - 将 MySql 从 5.1 升级到 5.6.10 并还原转储文件后出现错误

> ID：14933920
> 
> 赞同：1
> 
> 时间：2013-02-18T10:17:14.927
> 
> 标签：mysql

**第 3 行的错误 1728：无法从 mysql.proc 加载表已损坏**

升级 MySql 版本后出现该错误。我正在从 5.1 升级到 5.6.10。当我尝试恢复转储文件时出现错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T10:36:19.733

运行[`mysql_upgrade`](http://dev.mysql.com/doc/refman/5.6/en/mysql-upgrade.html)。AFAIK，这是一个标准的 MySQL 升级步骤。

从 MySQL 5.6[升级说明](http://dev.mysql.com/doc/refman/5.6/en/upgrading.html)：

> 升级到新版本的 MySQL 后，运行 mysql_upgrade（请参阅第 4.4.7 节，“mysql_upgrade - 检查和升级 MySQL 表”）。该程序会检查您的表，并在必要时尝试修复它们。它还会更新您的授权表以确保它们具有当前结构，以便您可以利用任何新功能。（某些版本的 MySQL 引入了对授权表结构的更改，以添加新的权限或特性。）

# ios - 如何计算真实世界的对象大小？

> ID：14933927
> 
> 赞同：2
> 
> 时间：2013-02-18T10:17:47.263
> 
> 标签：ios, objective-c, cocos2d-iphone, uiimageview, core-graphics

我正在从相机拍摄图像。所以我想获得对象的原始宽度和高度。为此，我正在使用 UIImagePickerController。

例如，如果 15 英寸显示器放在桌子上。所以当我从相机拍摄图像时，我
想要原始尺寸，即 15 英寸。有人知道吗？我怎样才能做到这一点？

**编辑** 我不想要图像大小。我想要实际的对象大小....

**编辑 2** 我想要这种类型的应用程序：- [https://itunes.apple.com/us/app/easymeasure-measure-your-camera!/id349530105?mt=8](https://itunes.apple.com/us/app/easymeasure-measure-your-camera!/id349530105?mt=8)

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:23:37.733

您所要求的无法仅通过相机的图片来确定，如果没有其他信息告诉您物体有多远（相机无法告诉您），则无法通过图片获取物体的实际大小）。

编辑：实际上并非不可能确定，单词选择不当......只是非常困难。（例如，vuforia 增强现实可以确定物体与相机的距离，但物体识别是作为预处理完成的，而不仅仅是任何旧物体）

* * *

## 回答 #2

> 赞同：-8
> 
> 时间：2013-02-18T11:17:48.127

在`ImagePickerController`委托方法中选择原始图像

```
UIImage *image = [info valueForKey:UIImagePickerControllerOriginalImage]; 
```

代表`info`在哪里`dictionary`。`ImagePickerController`

```
 NSLog(@"ImageSize = %@", image.size); 
```

它将提供原始图像大小。

# php - PHP：将 UTF-8 字符串转换为 Ansi？

> ID：14933929
> 
> 赞同：8
> 
> 时间：2013-02-18T10:17:51.017
> 
> 标签：php, ansi

我从数据库中的值构建一个 csv 字符串。最后的字符串存储在我的 $csv 变量中。

现在我提供这个字符串供下载，如下所示：

```
header("Content-type: text/csv");
header("Content-Disposition: attachment; filename=whatever.csv");
header("Pragma: no-cache");
header("Expires: 0");

echo $csv; 
```

例如，当我在 Notepad++ 中打开它时，它显示*Ansi as UTF-8*。我怎样才能将其仅更改为 Ansi？

我试过：

```
$csv = iconv("ISO-8859-1", "WINDOWS-1252", $csv); 
```

这并没有改变什么。

谢谢！

**解决方案：** $csv = iconv("UTF-8", "WINDOWS-1252", $csv);

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-18T10:29:02.877

尝试：

```
$csv = iconv("UTF-8", "Windows-1252", $csv); 
```

但是您最终会丢失数据，因为 ANSI 只能编码 UTF-8 的一小部分。如果您没有非常强烈的反对理由，请提供 UTF-8 编码的文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-23T10:06:17.967

由于您的问题对 ISO-8859-1、Windows-1252 和 ANSI 存在误解，因此需要注意的重要一点是：

> 所谓的 Windows 字符集（准确地说是 WinLatin1，或 Windows 代码页 1252）使用其中一些位置来存储可打印字符。因此，Windows 字符集与 ISO 8859-1 不同。Windows 字符集通常称为“ANSI 字符集”，但这是严重误导。它尚未获得 ANSI 的批准。
> 
> 历史背景：微软基于 ANSI 标准的草案设计了该系列。Microsoft的[词汇表明确承认了这一点](http://msdn.microsoft.com/en-us/goglobal/bb964658.aspx)。

更多资源：[这里](http://www.cs.tut.fi/%7Ejkorpela/chars.html#win)和[这里](http://www.cs.tut.fi/%7Ejkorpela/www/windows-chars.html)。

因此，对于最终遇到这个问题的其他人，仅供参考。

这是MS对此的确切解释：

> 用于表示 Windows 代码页的术语“ANSI”是一个历史参考，但现在是一个误称，继续存在于 Windows 社区中。其根源在于 Windows 代码页 1252 最初基于 ANSI 草案（后来成为国际标准化组织 (ISO) 标准 8859-1）。“ANSI 应用程序”通常是对非 Unicode 或基于代码页的应用程序的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-16T19:25:17.993

为避免在转换特殊字符时丢失数据：

```
setlocale(LC_CTYPE, "fr_FR.UTF-8"); //set your own locale
$csv = iconv("UTF-8", "WINDOWS-1252//TRANSLIT//IGNORE", $csv); 
```

# c# - 检查 SerialPort.BytesToRead 与在读取循环中使用 TimeoutException？

> ID：14933942
> 
> 赞同：0
> 
> 时间：2013-02-18T10:18:39.400
> 
> 标签：c#, .net, serial-port, timeoutexception

我有一个`System.IO.Ports.SerialPort`用于串行端口通信的 .NET C# 类。它包括一个在循环中连续读取串行端口的线程。

我一直认为在正常程序流程中使用异常是不好的，但是在网上搜索我看到很多使用阻塞读取和`TimeoutException`等待传入数据的示例，如下所示：

```
while (true)
{
    try
    {
        serialPort.Read(buffer, offset, count);
        /* Processing code here */
    }
    catch (TimeoutException)
    { }
} 
```

`SerialPort.BytesToRead()`在发出 之前检查不是更好吗`Read`，就像在这个例子中一样：

```
while (true)
{
    if (serialPort.BytesToRead() <= 0)
    {
        /* Wait for event signal or similar. */
    }

    serialPort.Read(buffer, offset, count);
    ProcessData();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:23:13.137

第二种方法肯定更好。不应使用*异常来控制**正常*的程序流程。

此外，第一种方法确实会扰乱您的调试体验，特别是如果您将 IDE 设置为在每次抛出异常时中断。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-18T13:54:53.930

不要读取端口，你有一个特殊的功能：

```
private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
{
     int n = serialPort1.BytesToRead;
     ...
} 
```

# php - Extbase：隐藏新记录

> ID：14933943
> 
> 赞同：0
> 
> 时间：2013-02-18T10:18:40.633
> 
> 标签：php, typo3, extbase

createAction：是否可以将新创建​​的记录（前端）默认设置为“隐藏”？

我希望后端管理员先检查它们，然后再将它们公开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-03T15:47:52.813

在您的模型类中添加带有 getter 和 setter 的“隐藏”属性，如下所示：

```
/**
 * hidden
 *
 * @var \integer
 */
protected $hidden;

/**
 * Returns the hidden
 *
 * @return \integer $hidden
 */
public function getHidden() {
    return $this->hidden;
}

/**
 * Sets the hidden
 *
 * @param \integer $hidden
 * @return void
 */
public function setHidden($hidden) {
    $this->hidden = $hidden;
} 
```

然后您可以在控制器的 createAction 方法中调用它：

```
$model->setHidden(TRUE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:12:34.883

添加以下 TSConfig 代码：

```
TCAdefaults {
   tt_content.hidden = 1
} 
```

# facebook - 在 Facebook Graph API 中过滤语言或国家/地区？

> ID：14933952
> 
> 赞同：6
> 
> 时间：2013-02-18T10:18:57.217
> 
> 标签：facebook, facebook-graph-api

如何进行 Facebook Graph API 调用，以便结果仅包含来自特定国家或语言的帖子？

# activemq - 为什么暂停队列不是代理功能？

> ID：14933959
> 
> 赞同：1
> 
> 时间：2013-02-18T10:19:38.437
> 
> 标签：activemq

我正在寻找一个 ActiveMQ 代理管理命令，告诉它暂停一个队列——即：

*   继续接受来自生产客户的消息
*   停止交付给消费客户端，允许队列积压增长，直到队列恢复，然后将积压发送给客户端。

我找不到这样的命令。最常见的答案是它应该在客户端进行管理——也就是说，找到每个消费者并停止它。其他答案是变通方法，例如操纵网络路由或防火墙，使客户端和代理无法再通信。

对其他消息队列的粗略调查表明 ActiveMQ 在这方面并不罕见。

在我看来，这个功能可能无法实现有两个原因：

*   这很难实施——但我想不出任何原因。
*   与消息队列的设计理念背道而驰

它是哪一个，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-08-23T09:30:14.747

新发布的 ActiveMQ 5.12.0 支持暂停队列：

> 当队列“暂停”时：
> 
> *   没有消息发送给关联消费者
>     
>     
> *   消息仍在队列中排队
>     
>     
> *   能够浏览队列
>     
>     
> *   队列的所有 JMX 计数器可用且正确。
>     
>     
> 
> ...
> 
> 实现了 pause/resume/isPaused 队列视图 mbean ops 和属性
> 
> 暂停时，不会向常规队列消费者分派，发送和浏览工作正常。任何飞行消息都将继续飞行，直到正常确认。

请参阅[https://issues.apache.org/jira/browse/AMQ-5229](https://issues.apache.org/jira/browse/AMQ-5229)

如果您启用了 Jolokia（我认为现在默认启用），您可以使用类似以下 curl 请求的内容来暂停队列：

```
curl --user admin:admin http://127.0.0.1:8161/api/jolokia/exec/org.apache.activemq:brokerName=localhost,destinationName=myQueue,destinationType=Queue,type=Broker/pause 
```

（使用默认用户名、密码和代理名称以及名为 myQueue 的队列）

将“暂停”替换为“恢复”以恢复队列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T20:37:27.980

正如您所说，实施起来可能不太复杂。我不知道如果没有需求，这是否是一个积极的设计决策。其他类似的产品，例如 IBM WebSphere MQ，在队列上实现了“禁止获取/放置”，因此它显然并不完全违反消息传递的理念——而是一种操作和解决实时系统故障的工具。

我有点偏见，但我实际上喜欢将发送方与接收方分离（如果是两个不同的系统，最终可能会被切换/升级/更改..）。

一种解耦系统并能够做你想做的事情的简单方法是让发送者发送到一个队列“DATA.OUT”，接收者监听另一个“DATA.IN”。然后您可以使用 Apache Camel（通常与 ActiveMQ 捆绑以实现企业集成模式）从 DATA.OUT 路由到 DATA.IN。

骆驼路线可以通过 JMX 启动/停止，这将实现类似于您描述的内容。

我猜 ActiveMQ 设计在这件事上宁愿让你在中间件层中做这些事情，比如 Apache Camel，而不是直接在队列上。

# javascript - 除某些类外，在正文上执行 oncopy

> ID：14933964
> 
> 赞同：-2
> 
> 时间：2013-02-18T10:19:58.093
> 
> 标签：javascript

我想在 document.body.oncopy 上执行一个函数，但是有一个特定的类（定义为 div 元素），我不想在其上调用这个函数。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:43:03.877

正如我在评论中所说，您可以执行以下操作：

```
document.body.addEventListener('copy', function (e) {
    if (e.target.className === 'specific') {
        return;
    }
    // Continue with all permitted elements
} 
```

# rake - 每当 gem in rails error :'to_specs': Could not find bundler (>= 0) between

> ID：14933968
> 
> 赞同：0
> 
> 时间：2013-02-18T10:20:13.627
> 
> 标签：rake, task, scheduling, whenever

我在我的应用程序中使用 gem。我每 5 分钟安排一次 rake 任务。但是该 rake 任务并不是每 5 分钟运行一次。当我看到日志时，它给了我类似的错误

> `to_specs'：在 [bigdecimal-1.1.0、io-console-0.3、json-1.5.4、minitest-2.5.1、rake-0.9.2.2、rdoc-3.9.4 中找不到捆绑程序（> = 0） ] (Gem::LoadError)

这是 schedule.rb 中的内容

```
every 3.minutes do
    rake "mytask name"
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T11:53:28.990

我通过放置解决了同样的问题

```
env :PATH, '/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin' 
```

代替

```
env :PATH, ENV['PATH'] 
```

在 config/schedule.rb 的顶部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-15T11:09:59.547

每当我们更改您的 gem 文件，特别是**rails / ruby**​​ 版本时，就会出现此问题。我遇到了同样的问题，这就是我为摆脱它所做的 -

```
 1\. $ gem install bundle
 2\. $ bundle install 
```

现在一切正常。

> 如果您遇到与以下相同的问题-

```
`to_specs': Could not find 'railties' (>= 0) among 23 total gem(s) (Gem::LoadError) 
```

[那么这里是步骤 -](https://stackoverflow.com/questions/9212116/rails-could-not-find-railties)
请参阅链接 -
[Rails：找不到railties](https://stackoverflow.com/questions/9212116/rails-could-not-find-railties)

```
 1\. $ gem list
 2\. $ gem install rails 
```

它只会下载所有缺少的依赖项，包括 railties。

希望这对你也有用！！！

# macos - 频繁重新加载 NSOutlineView 会导致崩溃

> ID：14933970
> 
> 赞同：0
> 
> 时间：2013-02-18T10:20:16.113
> 
> 标签：macos, cocoa, nsoutlineview

在我的应用程序中，我想搜索 mac 中的文件，如果我得到文件，我需要重新加载该`NSOutlineView`文件。如果我`NSOutlineView`经常重新加载项目，则会导致崩溃。

// 像这样我正在调用搜索文件的方法。

```
[self performSelectorInBackground:@selector(searchFiles) withObject:self]; 
```

// 重新加载大纲视图

```
 - (void)searchFiles {
    -------------------------
    -------------------------
    NSMutableDictionary *dictionary = [NSMutableDictionary dictionaryWithObject:filelistArray forKey:@"children"];
   [dictionary setObject:[NSString stringWithFormat:@"%ld",[filelist count]] forKey:@"parent"];
    [listArray addObject:dictionary];
    [outLineView reloadData];
} 
```

// OutlineView 的委托

```
- (BOOL)outlineView:(NSOutlineView *)outlineView isItemExpandable:(id)item {

    if ([item isKindOfClass:[NSDictionary class]])
        return YES;
    else
        return NO;
}

- (NSInteger)outlineView:(NSOutlineView *)outlineView numberOfChildrenOfItem:(id)item {

    if (item == nil)
        return [listArray count];

    if ([item isKindOfClass:[NSDictionary class]])
        return [[item objectForKey:@"children"] count];

    return 0;
}

- (id)outlineView:(NSOutlineView *)outlineView child:(NSInteger)index ofItem:(id)item {

    if (item == nil)
        return [listArray objectAtIndex:index];

    return [[item objectForKey:@"children"] objectAtIndex:index];

    return nil;
}

- (id)outlineView:(NSOutlineView *)outlineView objectValueForTableColumn:(NSTableColumn *)theColumn byItem:(id)item {

    if ([item isKindOfClass:[NSDictionary class]])
        return [item objectForKey:@"parent"];
    else
        return item;
    return nil;
} 
```

// 崩溃日志

```
2013-02-18 15:44:13.800 OutLineViewReloadDemo[3054:303] *** Assertion failure in -[NSOutlineView _expandItemEntry:expandChildren:startLevel:], /SourceCache/AppKit/AppKit-1187.34/TableView.subproj/NSOutlineView.m:1309
2013-02-18 15:44:13.802 OutLineViewReloadDemo[3054:303] (null) should not be expanded already!
2013-02-18 15:44:13.806 OutLineViewReloadDemo[3054:303] (
    0   CoreFoundation                      0x00007fff81eef0a6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff878a53f0 objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff81eeeee8 +[NSException raise:format:arguments:] + 104
    3   Foundation                          0x00007fff8d4876a2 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 189
    4   AppKit                              0x00007fff83fcb9b0 -[NSOutlineView _expandItemEntry:expandChildren:startLevel:] + 1153
    5   AppKit                              0x00007fff83fb1c42 -[NSOutlineView _uncachedNumberOfRows] + 379
    6   AppKit                              0x00007fff83feb938 -[NSOutlineView frameOfCellAtColumn:row:] + 66
    7   AppKit                              0x00007fff83feb44f -[NSTableView drawRow:clipRect:] + 1636
    8   AppKit                              0x00007fff83fdb4c3 -[NSTableView drawRowIndexes:clipRect:] + 397
    9   AppKit                              0x00007fff83fdb321 -[NSOutlineView drawRowIndexes:clipRect:] + 113
    10  AppKit                              0x00007fff83fd9ea6 -[NSTableView drawRect:] + 1269
    11  AppKit                              0x00007fff83ebe144 -[NSView _drawRect:clip:] + 4217
    12  AppKit                              0x00007fff83ebc7a1 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 1656
    13  AppKit                              0x00007fff83ebcbb9 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 2704
    14  AppKit                              0x00007fff83ebcbb9 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 2704
    15  AppKit                              0x00007fff83eba7d2 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 817
    16  AppKit                              0x00007fff83ebbb24 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 5763
    17  AppKit                              0x00007fff83ebbb24 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 5763
    18  AppKit                              0x00007fff83eba223 -[NSThemeFrame _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 314
    19  AppKit                              0x00007fff83eb5e4d -[NSView _displayRectIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:] + 4675
    20  AppKit                              0x00007fff83e7fd73 -[NSView displayIfNeeded] + 1830
    21  AppKit                              0x00007fff83e7f2ac _handleWindowNeedsDisplayOrLayoutOrUpdateConstraints + 738
    22  Foundation                          0x00007fff8d4ee513 __NSFireTimer + 96
    23  CoreFoundation                      0x00007fff81eabda4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 20
    24  CoreFoundation                      0x00007fff81eab8bd __CFRunLoopDoTimer + 557
    25  CoreFoundation                      0x00007fff81e91099 __CFRunLoopRun + 1513
    26  CoreFoundation                      0x00007fff81e906b2 CFRunLoopRunSpecific + 290
    27  HIToolbox                           0x00007fff8b28b0a4 RunCurrentEventLoopInMode + 209
    28  HIToolbox                           0x00007fff8b28ae42 ReceiveNextEventCommon + 356
    29  HIToolbox                           0x00007fff8b28acd3 BlockUntilNextEventMatchingListInMode + 62
    30  AppKit                              0x00007fff83e7c613 _DPSNextEvent + 685
    31  AppKit                              0x00007fff83e7bed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
    32  AppKit                              0x00007fff83e73283 -[NSApplication run] + 517
    33  AppKit                              0x00007fff83e17cb6 NSApplicationMain + 869
    34  OutLineViewReloadDemo               0x0000000100001772 main + 34
    35  libdyld.dylib                       0x00007fff8206a7e1 start + 0
    36  ???                                 0x0000000000000003 0x0 + 3
) 
```

我的问题是如何避免这种崩溃？

**编辑1：**

添加后`[outline reloadData];` `in dispatch_async(dispatch_get_main_queue(),`它的工作完美无任何崩溃。但是如果我扩展一些项目会导致崩溃。我无法弄清楚问题所在。这是我的崩溃日志。

```
*** Collection <__NSArrayM: 0x106536f70> was mutated while being enumerated.
0   CoreFoundation                      0x00007fff81eef0a6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff878a53f0 objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff81f82f98 __NSFastEnumerationMutationHandler + 232
    3   CoreFoundation                      0x00007fff81ec7281 -[NSArray containsObject:] + 177
    4   OutlineViewDemo                     0x000000010005ad60 -[MC_DuplicateFinderViewController outlineView:willDisplayCell:forTableColumn:item:] + 800
    5   AppKit                              0x00007fff83fed519 -[NSTableView preparedCellAtColumn:row:] + 1573
    6   AppKit                              0x00007fff83feccfc -[NSOutlineView preparedCellAtColumn:row:] + 56
    7   AppKit                              0x00007fff83fecc07 -[NSTableView _drawContentsAtRow:column:withCellFrame:] + 47
    8   AppKit                              0x00007fff83fecb7b -[NSOutlineView _drawContentsAtRow:column:withCellFrame:] + 94
    9   AppKit                              0x00007fff83feb63e -[NSTableView drawRow:clipRect:] + 2131
    10  AppKit                              0x00007fff83fdb4c3 -[NSTableView drawRowIndexes:clipRect:] + 397
    11  AppKit                              0x00007fff83fdb321 -[NSOutlineView drawRowIndexes:clipRect:] + 113
    12  AppKit                              0x00007fff83fd9ea6 -[NSTableView drawRect:] + 1269
    13  AppKit                              0x00007fff83ebe144 -[NSView _drawRect:clip:] + 4217
    14  AppKit                              0x00007fff83ebc7a1 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 1656
    15  AppKit                              0x00007fff83ebcbb9 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] + 2704
    16  AppKit                              0x00007fff83eba7d2 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 817
    17  AppKit                              0x00007fff83ebbb24 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 5763
    18  AppKit                              0x00007fff83ebbb24 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 5763
    19  AppKit                              0x00007fff83ebbb24 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 5763
    20  AppKit                              0x00007fff83ebbb24 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 5763
    21  AppKit                              0x00007fff83ebbb24 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 5763
    22  AppKit                              0x00007fff83ebbb24 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 5763
    23  AppKit                              0x00007fff83ebbb24 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 5763
    24  AppKit                              0x00007fff83ebbb24 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 5763
    25  AppKit                              0x00007fff83ebbb24 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 5763
    26  AppKit                              0x00007fff83ebbb24 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 5763
    27  AppKit                              0x00007fff83eba223 -[NSThemeFrame _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] + 314
    28  AppKit                              0x00007fff83eb5e4d -[NSView _displayRectIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:] + 4675
    29  AppKit                              0x00007fff83e7fd73 -[NSView displayIfNeeded] + 1830
    30  AppKit                              0x00007fff83e7f2ac _handleWindowNeedsDisplayOrLayoutOrUpdateConstraints + 738
    31  AppKit                              0x00007fff8444a971 __83-[NSWindow _postWindowNeedsDisplayOrLayoutOrUpdateConstraintsUnlessPostingDisabled]_block_invoke_01208 + 46
    32  CoreFoundation                      0x00007fff81eb59b7 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 23
    33  CoreFoundation                      0x00007fff81eb5921 __CFRunLoopDoObservers + 369
    34  CoreFoundation                      0x00007fff81e90d88 __CFRunLoopRun + 728
    35  CoreFoundation                      0x00007fff81e906b2 CFRunLoopRunSpecific + 290
    36  HIToolbox                           0x00007fff8b28b0a4 RunCurrentEventLoopInMode + 209
    37  HIToolbox                           0x00007fff8b28ae42 ReceiveNextEventCommon + 356
    38  HIToolbox                           0x00007fff8b28acd3 BlockUntilNextEventMatchingListInMode + 62
    39  AppKit                              0x00007fff83e7c613 _DPSNextEvent + 685
    40  AppKit                              0x00007fff83e7bed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
    41  AppKit                              0x00007fff83e73283 -[NSApplication run] + 517
    42  AppKit                              0x00007fff83e17cb6 NSApplicationMain + 869
    43  OutlineViewDemo                     0x0000000100001462 main + 34
    44  libdyld.dylib                       0x00007fff8206a7e1 start + 0
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:32:10.710

`performSelectorInBackground:withObject:`在新的后台线程上运行选择器，而 UI 上的更新（和大多数其他操作）必须在主线程上执行。因此，崩溃，将是我的猜测。

从主线程获取控制更新的一种简单方法是使用 Grand Central Dispatch (GCD)，如下所示：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [outLineView reloadData];
}); 
```

# php - cakephp中如何通过外键查找数据？

> ID：14933974
> 
> 赞同：6
> 
> 时间：2013-02-18T10:20:28.750
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-2.0, cakephp-2.1

```
 Product        Plan            ProductPlan
 id |name       id |name        id  | product_id | plan_id     
 1    aplha      1   a          1        1          2             
 2    bravo      2   b
 3    charlie 
```

我想根据 ProductPlan 查找产品名称和计划名称，如果 ProductPlan 中存在产品的产品 ID 和计划 ID，那么将显示计划和产品的名称，我尝试了很多，关系 b/w 表是正确的，但我没有t得到确切的数据，我使用的查询是

```
 $p_plan = $this->ProductPlan->find('all',array(
                                    'conditions'=>array(
                                                'ProductPlan.product_id'=>'Product.product_id'
                                                )                       
                                        )
                                    );  
    $this->set('p_plan', $p_plan); 
```

如果有人帮助我，我会非常感谢他。提前致谢。

计划关系

```
class Plan extends AppModel{ 

public $primaryKey='plan_id';

public $hasMany = array(
    'ProductPlan'=>array(
        'className'    => 'ProductPlan',
        'foreignKey'   => 'plan_id' 
    )
); 
```

产品

```
class Product extends AppModel{ 

public $primaryKey='product_id';

public $hasMany = array(
    'ProductsUser'=>array(
        'className'    => 'ProductsUser',
        'foreignKey'   => 'product_id'  
    ),
    'ProductsUserNode'=>array(
        'className'    => 'ProductsUserNode',
        'foreignKey'   => 'product_id'  
    ),
    'ProductPlan'=>array(
        'className'    => 'ProductPlan',
        'foreignKey'   => 'product_id'  
    )
); 
```

产品计划

```
class ProductPlan extends AppModel{
var $primaryKey='product_plan_id';
 public $belongsTo = array(
    'Product' => array(
        'className'    => 'Product',
        'foreignKey'   => 'product_id'
    ),
    'Plan' => array(
        'className'    => 'Plan',
        'foreignKey'   => 'plan_id'
    )       

     );
public $hasMany = array(
    'ProductPlansUserNode'=>array(
        'className'    => 'ProductPlansUserNode',
        'foreignKey'   => 'product_plan_id' 
    ),
); 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T11:09:06.463

您应该能够简单地使用“包含”：-

```
$p_plan = $this->Product->find('all', array(
    'contain' => array('Plan')
)); 
```

这将返回您的所有产品及其相关计划。您的 Product 和 Plan 模型需要 hasAndBelongToMany 关系。无需为您的连接表定义模型。

```
class Product AppModel {
    ...
    public $hasAndBelongsToMany = array('Plan');
    ...
}

class Plan AppModel {
    ...
    public $hasAndBelongsToMany = array('Product');
    ...
} 
```

作为旁注，我个人会避免覆盖 CakePHP 处理主键的默认方式。最好坚持约定和使用`id`。

# c# - 如何捕获 Web 浏览器控件中任何按钮的点击事件？

> ID：14933979
> 
> 赞同：5
> 
> 时间：2013-02-18T10:20:51.010
> 
> 标签：c#, webbrowser-control

假设我的网络浏览器正在显示一个 html 页面，其中有许多按钮。我只是想知道如何从我的 c# win 应用程序中捕获对 Web 浏览器控件内的任何按钮的点击。

如果可能的话，我想从那个事件中捕获按钮名称、高度和宽度以及任何自定义属性。等请指导我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T10:44:50.103

如果您只想捕获鼠标点击，这将很有帮助：

```
WebBrowser _browser;
this._browser.DocumentCompleted+=new WebBrowserDocumentCompletedEventHandler(browser_DocumentCompleted);
...
private void browser_DocumentCompleted(Object sender, WebBrowserDocumentCompletedEventArgs e)
{
    this._browser.Document.Body.MouseDown += new HtmlElementEventHandler(Body_MouseDown);
}
...
void Body_MouseDown(Object sender, HtmlElementEventArgs e)
{
    switch(e.MouseButtonsPressed)
    {
    case MouseButtons.Left:
        HtmlElement element = this._browser.Document.GetElementFromPoint(e.ClientMousePosition);
        if(element != null && "submit".Equals(element.GetAttribute("type"),StringComparison.OrdinalIgnoreCase)
        {
        }
    break;
    }
} 
```

> 你能告诉我如何读取 Web 浏览器控件中加载的任何 html 元素的自定义属性。谢谢

如果您不想链接到“Microsoft.mshtml”，您可以尝试使用此示例方法。但是您不能通过反射阅读所有成员：

```
public static String GetElementPropertyValue(HtmlElement element, String property)
{
    if(element == null)
        throw new ArgumentNullException("element");
    if(String.IsNullOrEmpty(property))
        throw new ArgumentNullException("property");

    String result = element.GetAttribute(property);
    if(String.IsNullOrEmpty(result))
    {//В MSIE 9 получить свойство через DomElement не получается. Т.к. там он ComObject.
        var objProperty = element.DomElement.GetType().GetProperty(property);
        if(objProperty != null)
        {
            Object value = objProperty.GetValue(element.DomElement, null);
            result = value == null ? String.Empty : value.ToString();
        }
    }
    return result;
} 
```

# sandbox - 游戏中心沙盒

> ID：14933980
> 
> 赞同：0
> 
> 时间：2013-02-18T10:20:54.287
> 
> 标签：sandbox, game-center, achievements, leaderboard

好的，所以我在应用商店中有一个可用的应用，对于它的下一次更新，我想添加 Game Center 功能，我已经完成了所有的编码并且一切都按我的预期工作（使用 NSLog 来确保正确的编码是调用）但是，当我打开游戏中心时，有一个成就，但没有我获得的第二个成就，几个小时前一个排行榜显示了分数，现在它没有了，另一个排行榜上显示了分数作为一个旧分数。游戏中心沙盒模式真的这么糟糕吗，因为我已经在我的代码中搜索了几个小时的错误，我发誓，没有任何错误。任何人都可以帮助我吗？注意 - 我在这里看到有人建议使用 2 个游戏中心帐户使用游戏，我已经这样做了，而在第二个帐户上根本没有显示任何高分或成就。

谢谢格雷厄姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:16:24.103

根据我的经验，两个帐户似乎确实是必要的，您必须等待一段时间（有时是几个小时或一夜）才能看到结果。其他时候它们出现得更快。我实际上用 3 个帐户进行了测试，但我怀疑第三个帐户有什么不同。

并仔细检查 iTunes Connect 中的排行榜 ID 是否与代码中的 ID 完全匹配。

# windows-8 - STATUS_ACCESS_DENIED 与 CallNtPowerInformation()

> ID：14933983
> 
> 赞同：0
> 
> 时间：2013-02-18T10:21:00.920
> 
> 标签：windows-8

我正在尝试通过输入获得当前的处理器速度/`CallNtPowerInformation()`节流`ProcessorInformation`：

```
SYSTEM_INFO systemInfo;
GetSystemInfo( &systemInfo );

numProcessors = (unsigned char)systemInfo.dwNumberOfProcessors;
powerInformations = new PROCESSOR_POWER_INFORMATION[numProcessors];
long status = CallNtPowerInformation( ProcessorInformation, NULL, 0, powerInformations, numProcessors*sizeof(PROCESSOR_POWER_INFORMATION) ); 
```

不幸的是，`status`总是等于`STATUS_ACCESS_DENIED`。我找不到任何关于为什么会这样的文档，谁能指出我无法获得当前处理器信息的一些原因？

这是在 Windows 8、Surface Pro（使用桌面 API）上运行的，我尝试使用提升的权限启动 VS2012 无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:20:13.917

事实证明，如果我在控制台应用程序中运行此代码，它可以工作，但如果我在 Metro 应用程序中运行它，它会失败。我将提出一个关于如何在 Windows 商店应用程序中执行这样的代码的新问题。

# sql-server - SQL CLR C# UDF - 将国家代码附加到邮政编码

> ID：14933984
> 
> 赞同：1
> 
> 时间：2013-02-18T10:21:10.027
> 
> 标签：sql-server, user-defined-functions, sqlclr

我有以下 SQL CLR C# UDF：

这基本上接受两个参数，一个国家名称和一个邮政编码，然后返回以国家代码为前缀的邮政编码。非常基本的东西，但我对它的性能不满意。

我听说将这个国家和代码列表添加为资源然后填充列表可能会有所帮助，但我不知道该怎么做？

有任何想法吗？

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.Data.SqlTypes;
using Microsoft.SqlServer.Server;

public partial class UserDefinedFunctions
{
    [Microsoft.SqlServer.Server.SqlFunction]
    public static SqlString clrFn_AddCountryCode(string theCountry, string thePostcode)
    {

        if (thePostcode.Length == 0 || String.IsNullOrEmpty(thePostcode)) { return (SqlString)(""); }

        else if (theCountry == "FRENCH POLYNESIA") { return new SqlString("183" + thePostcode); }
        else if (theCountry == "GUADELOUPE") { return new SqlString("181" + thePostcode); }
        else if (theCountry == "ALAND") { return new SqlString("360" + thePostcode); }
        else if (theCountry == "AFGHANISTAN") { return new SqlString("100" + thePostcode); }
        else if (theCountry == "ALBANIA") { return new SqlString("101" + thePostcode); }
        else if (theCountry == "ALGERIA") { return new SqlString("102" + thePostcode); }
        else if (theCountry == "AMERICAN SAMOA") { return new SqlString("103" + thePostcode); }
        else if (theCountry == "ANDORRA") { return new SqlString("104" + thePostcode); }
        else if (theCountry == "ANGOLA") { return new SqlString("105" + thePostcode); }
        else if (theCountry == "ANGUILLA") { return new SqlString("106" + thePostcode); }
        else if (theCountry == "ANTIGUA & BARBUDA") { return new SqlString("107" + thePostcode); }
        else if (theCountry == "ARGENTINA") { return new SqlString("108" + thePostcode); }
        else if (theCountry == "ARMENIA") { return new SqlString("109" + thePostcode); }
        else if (theCountry == "ARUBA") { return new SqlString("110" + thePostcode); }
        else if (theCountry == "ASCENSION ISLAND") { return new SqlString("111" + thePostcode); }
        else if (theCountry == "AUSTRALIA") { return new SqlString("112" + thePostcode); }
        else if (theCountry == "AUSTRIA") { return new SqlString("113" + thePostcode); }
        else if (theCountry == "AZERBAIJAN") { return new SqlString("114" + thePostcode); }
        else if (theCountry == "BAHAMAS") { return new SqlString("115" + thePostcode); }
        else if (theCountry == "BAHRAIN") { return new SqlString("116" + thePostcode); }
        else if (theCountry == "BANGLADESH") { return new SqlString("117" + thePostcode); }
        else if (theCountry == "BARBADOS") { return new SqlString("118" + thePostcode); }
        else if (theCountry == "BELARUS") { return new SqlString("119" + thePostcode); }
        else if (theCountry == "BELGIUM") { return new SqlString("120" + thePostcode); }
        else if (theCountry == "BELIZE") { return new SqlString("121" + thePostcode); }
        else if (theCountry == "BENIN") { return new SqlString("122" + thePostcode); }
        else if (theCountry == "BERMUDA") { return new SqlString("123" + thePostcode); }
        else if (theCountry == "BHUTAN") { return new SqlString("124" + thePostcode); }
        else if (theCountry == "BOLIVIA") { return new SqlString("125" + thePostcode); }
        else if (theCountry == "BOSNIA & HERZEGOVINA") { return new SqlString("128" + thePostcode); }
        else if (theCountry == "BOTSWANA") { return new SqlString("129" + thePostcode); }
        else if (theCountry == "BRAZIL") { return new SqlString("130" + thePostcode); }
        else if (theCountry == "BRITISH INDIAN OCEAN TERRITORY") { return new SqlString("131" + thePostcode); }
        else if (theCountry == "BRITISH VIRGIN ISLANDS") { return new SqlString("132" + thePostcode); }
        else if (theCountry == "BRUNEI DARUSSALAM") { return new SqlString("134" + thePostcode); }
        else if (theCountry == "BULGARIA") { return new SqlString("135" + thePostcode); }
        else if (theCountry == "BURKINA FASO") { return new SqlString("136" + thePostcode); }
        else if (theCountry == "BURUNDI") { return new SqlString("138" + thePostcode); }
        else if (theCountry == "CAMBODIA") { return new SqlString("139" + thePostcode); }
        else if (theCountry == "CAMEROON") { return new SqlString("140" + thePostcode); }
        else if (theCountry == "CANADA") { return new SqlString("141" + thePostcode); }
        else if (theCountry == "CAPE VERDE") { return new SqlString("142" + thePostcode); }
        else if (theCountry == "CAYMAN ISLANDS") { return new SqlString("144" + thePostcode); }
        else if (theCountry == "CENTRAL AFRICAN REPUBLIC") { return new SqlString("145" + thePostcode); }
        else if (theCountry == "CHAD") { return new SqlString("146" + thePostcode); }
        else if (theCountry == "CHILE") { return new SqlString("147" + thePostcode); }
        else if (theCountry == "CHINA") { return new SqlString("148" + thePostcode); }
        else if (theCountry == "COLOMBIA") { return new SqlString("151" + thePostcode); }
        else if (theCountry == "COMOROS") { return new SqlString("152" + thePostcode); }
        else if (theCountry == "COOK ISLANDS") { return new SqlString("154" + thePostcode); }
        else if (theCountry == "COSTA RICA") { return new SqlString("155" + thePostcode); }
        else if (theCountry == "CÔTE D'IVOIRE") { return new SqlString("213" + thePostcode); }
        else if (theCountry == "CROATIA") { return new SqlString("157" + thePostcode); }
        else if (theCountry == "CUBA") { return new SqlString("158" + thePostcode); }
        else if (theCountry == "CYPRUS") { return new SqlString("160" + thePostcode); }
        else if (theCountry == "CZECH REPUBLIC") { return new SqlString("161" + thePostcode); }
        else if (theCountry == "DEMOCRATIC REPUBLIC OF CONGO") { return new SqlString("351" + thePostcode); }
        else if (theCountry == "DENMARK") { return new SqlString("162" + thePostcode); }
        else if (theCountry == "DJIBOUTI") { return new SqlString("163" + thePostcode); }
        else if (theCountry == "DOMINICA") { return new SqlString("164" + thePostcode); }
        else if (theCountry == "DOMINICAN REPUBLIC") { return new SqlString("165" + thePostcode); }
        else if (theCountry == "ECUADOR") { return new SqlString("168" + thePostcode); }
        else if (theCountry == "EGYPT") { return new SqlString("169" + thePostcode); }
        else if (theCountry == "EL SALVADOR") { return new SqlString("171" + thePostcode); }
        else if (theCountry == "EQUATORIAL GUINEA") { return new SqlString("172" + thePostcode); }
        else if (theCountry == "ERITREA") { return new SqlString("173" + thePostcode); }
        else if (theCountry == "ESTONIA") { return new SqlString("174" + thePostcode); }
        else if (theCountry == "ETHIOPIA") { return new SqlString("175" + thePostcode); }
        else if (theCountry == "FALKLAND ISLANDS") { return new SqlString("177" + thePostcode); }
        else if (theCountry == "FAROE ISLANDS") { return new SqlString("176" + thePostcode); }
        else if (theCountry == "FIJI") { return new SqlString("178" + thePostcode); }
        else if (theCountry == "FINLAND") { return new SqlString("179" + thePostcode); }
        else if (theCountry == "FRANCE") { return new SqlString("180" + thePostcode); }
        else if (theCountry == "FRENCH GUIANA") { return new SqlString("182" + thePostcode); }
        else if (theCountry == "GABON") { return new SqlString("186" + thePostcode); }
        else if (theCountry == "GAMBIA") { return new SqlString("187" + thePostcode); }
        else if (theCountry == "GEORGIA") { return new SqlString("283" + thePostcode); }
        else if (theCountry == "GERMANY") { return new SqlString("189" + thePostcode); }
        else if (theCountry == "GHANA") { return new SqlString("190" + thePostcode); }
        else if (theCountry == "GIBRALTAR") { return new SqlString("191" + thePostcode); }
        else if (theCountry == "GREECE") { return new SqlString("192" + thePostcode); }
        else if (theCountry == "GREENLAND") { return new SqlString("193" + thePostcode); }
        else if (theCountry == "GRENADA") { return new SqlString("194" + thePostcode); }
        else if (theCountry == "GUADELOUPE") { return new SqlString("195" + thePostcode); }
        else if (theCountry == "GUAM") { return new SqlString("196" + thePostcode); }
        else if (theCountry == "GUATEMALA") { return new SqlString("197" + thePostcode); }
        else if (theCountry == "GUINEA") { return new SqlString("198" + thePostcode); }
        else if (theCountry == "GUINEA BISSAU") { return new SqlString("199" + thePostcode); }
        else if (theCountry == "GUYANA") { return new SqlString("200" + thePostcode); }
        else if (theCountry == "HAITI") { return new SqlString("201" + thePostcode); }
        else if (theCountry == "HONDURAS") { return new SqlString("203" + thePostcode); }
        else if (theCountry == "HONG KONG") { return new SqlString("204" + thePostcode); }
        else if (theCountry == "HUNGARY") { return new SqlString("205" + thePostcode); }
        else if (theCountry == "ICELAND") { return new SqlString("206" + thePostcode); }
        else if (theCountry == "INDIA") { return new SqlString("207" + thePostcode); }
        else if (theCountry == "INDONESIA") { return new SqlString("208" + thePostcode); }
        else if (theCountry == "IRAN") { return new SqlString("209" + thePostcode); }
        else if (theCountry == "IRAQ") { return new SqlString("210" + thePostcode); }
        else if (theCountry == "IRELAND") { return new SqlString("170" + thePostcode); }
        else if (theCountry == "ISRAEL") { return new SqlString("211" + thePostcode); }
        else if (theCountry == "ITALY") { return new SqlString("212" + thePostcode); }
        else if (theCountry == "JAMAICA") { return new SqlString("214" + thePostcode); }
        else if (theCountry == "JAPAN") { return new SqlString("215" + thePostcode); }
        else if (theCountry == "JORDAN") { return new SqlString("216" + thePostcode); }
        else if (theCountry == "KAZAKHSTAN") { return new SqlString("217" + thePostcode); }
        else if (theCountry == "KENYA") { return new SqlString("218" + thePostcode); }
        else if (theCountry == "KIRIBATI") { return new SqlString("219" + thePostcode); }
        else if (theCountry == "KOSOVO (UNMIK)") { return new SqlString("358" + thePostcode); }
        else if (theCountry == "KUWAIT") { return new SqlString("220" + thePostcode); }
        else if (theCountry == "KYRGYZSTAN") { return new SqlString("221" + thePostcode); }
        else if (theCountry == "LAOS") { return new SqlString("222" + thePostcode); }
        else if (theCountry == "LATVIA") { return new SqlString("223" + thePostcode); }
        else if (theCountry == "LEBANON") { return new SqlString("224" + thePostcode); }
        else if (theCountry == "LESOTHO") { return new SqlString("225" + thePostcode); }
        else if (theCountry == "LIBERIA") { return new SqlString("226" + thePostcode); }
        else if (theCountry == "LIBYA") { return new SqlString("227" + thePostcode); }
        else if (theCountry == "LIECHTENSTEIN") { return new SqlString("228" + thePostcode); }
        else if (theCountry == "LITHUANIA") { return new SqlString("229" + thePostcode); }
        else if (theCountry == "LUXEMBOURG") { return new SqlString("230" + thePostcode); }
        else if (theCountry == "MACAU") { return new SqlString("231" + thePostcode); }
        else if (theCountry == "MACEDONIA") { return new SqlString("232" + thePostcode); }
        else if (theCountry == "MADAGASCAR") { return new SqlString("233" + thePostcode); }
        else if (theCountry == "MALAWI") { return new SqlString("234" + thePostcode); }
        else if (theCountry == "MALAYSIA") { return new SqlString("235" + thePostcode); }
        else if (theCountry == "MALDIVES") { return new SqlString("236" + thePostcode); }
        else if (theCountry == "MALI") { return new SqlString("237" + thePostcode); }
        else if (theCountry == "MALTA") { return new SqlString("238" + thePostcode); }
        else if (theCountry == "MARSHALL ISLANDS") { return new SqlString("240" + thePostcode); }
        else if (theCountry == "MARTINIQUE") { return new SqlString("241" + thePostcode); }
        else if (theCountry == "MAURITANIA") { return new SqlString("242" + thePostcode); }
        else if (theCountry == "MAURITIUS") { return new SqlString("243" + thePostcode); }
        else if (theCountry == "MAYOTTE") { return new SqlString("244" + thePostcode); }
        else if (theCountry == "MEXICO") { return new SqlString("245" + thePostcode); }
        else if (theCountry == "MICRONESIA") { return new SqlString("246" + thePostcode); }
        else if (theCountry == "MOLDOVA") { return new SqlString("247" + thePostcode); }
        else if (theCountry == "MONACO") { return new SqlString("248" + thePostcode); }
        else if (theCountry == "MONGOLIA") { return new SqlString("249" + thePostcode); }
        else if (theCountry == "MONTENEGRO") { return new SqlString("357" + thePostcode); }
        else if (theCountry == "MONTSERRAT") { return new SqlString("251" + thePostcode); }
        else if (theCountry == "MOROCCO") { return new SqlString("252" + thePostcode); }
        else if (theCountry == "MOZAMBIQUE") { return new SqlString("253" + thePostcode); }
        else if (theCountry == "MYANMAR") { return new SqlString("254" + thePostcode); }
        else if (theCountry == "NAMIBIA") { return new SqlString("255" + thePostcode); }
        else if (theCountry == "NAURU") { return new SqlString("256" + thePostcode); }
        else if (theCountry == "NEPAL") { return new SqlString("257" + thePostcode); }
        else if (theCountry == "NETHERLANDS") { return new SqlString("259" + thePostcode); }
        else if (theCountry == "NETHERLANDS ANTILLES") { return new SqlString("258" + thePostcode); }
        else if (theCountry == "NEW CALEDONIA") { return new SqlString("260" + thePostcode); }
        else if (theCountry == "NEW ZEALAND") { return new SqlString("261" + thePostcode); }
        else if (theCountry == "NICARAGUA") { return new SqlString("262" + thePostcode); }
        else if (theCountry == "NIGER") { return new SqlString("263" + thePostcode); }
        else if (theCountry == "NIGERIA") { return new SqlString("264" + thePostcode); }
        else if (theCountry == "NIUE") { return new SqlString("265" + thePostcode); }
        else if (theCountry == "NORFOLK ISLAND") { return new SqlString("356" + thePostcode); }
        else if (theCountry == "NORTH KOREA") { return new SqlString("266" + thePostcode); }
        else if (theCountry == "NORTHERN MARIANA ISLANDS") { return new SqlString("267" + thePostcode); }
        else if (theCountry == "NORWAY") { return new SqlString("268" + thePostcode); }
        else if (theCountry == "OMAN") { return new SqlString("269" + thePostcode); }
        else if (theCountry == "PAKISTAN") { return new SqlString("270" + thePostcode); }
        else if (theCountry == "PALAU") { return new SqlString("271" + thePostcode); }
        else if (theCountry == "PALESTINE") { return new SqlString("272" + thePostcode); }
        else if (theCountry == "PANAMA") { return new SqlString("273" + thePostcode); }
        else if (theCountry == "PAPUA NEW GUINEA") { return new SqlString("274" + thePostcode); }
        else if (theCountry == "PARAGUAY") { return new SqlString("275" + thePostcode); }
        else if (theCountry == "PERU") { return new SqlString("276" + thePostcode); }
        else if (theCountry == "PHILIPPINES") { return new SqlString("277" + thePostcode); }
        else if (theCountry == "PITCAIRN ISLAND") { return new SqlString("278" + thePostcode); }
        else if (theCountry == "POLAND") { return new SqlString("279" + thePostcode); }
        else if (theCountry == "PORTUGAL") { return new SqlString("280" + thePostcode); }
        else if (theCountry == "PUERTO RICO") { return new SqlString("281" + thePostcode); }
        else if (theCountry == "QATAR") { return new SqlString("282" + thePostcode); }
        else if (theCountry == "REPUBLIC OF CONGO") { return new SqlString("361" + thePostcode); }
        else if (theCountry == "REPUBLIC OF GEORGIA") { return new SqlString("188" + thePostcode); }
        else if (theCountry == "REUNION") { return new SqlString("286" + thePostcode); }
        else if (theCountry == "ROMANIA") { return new SqlString("287" + thePostcode); }
        else if (theCountry == "RUSSIA") { return new SqlString("288" + thePostcode); }
        else if (theCountry == "RWANDA") { return new SqlString("289" + thePostcode); }
        else if (theCountry == "SAMOA") { return new SqlString("290" + thePostcode); }
        else if (theCountry == "SAN MARINO") { return new SqlString("291" + thePostcode); }
        else if (theCountry == "SANDWICH ISLANDS") { return new SqlString("362" + thePostcode); }
        else if (theCountry == "SAO TOME & PRINCIPE") { return new SqlString("292" + thePostcode); }
        else if (theCountry == "SAUDI ARABIA") { return new SqlString("293" + thePostcode); }
        else if (theCountry == "SENEGAL") { return new SqlString("294" + thePostcode); }
        else if (theCountry == "SERBIA") { return new SqlString("295" + thePostcode); }
        else if (theCountry == "SEYCHELLES") { return new SqlString("296" + thePostcode); }
        else if (theCountry == "SIERRA LEONE") { return new SqlString("298" + thePostcode); }
        else if (theCountry == "SINGAPORE") { return new SqlString("284" + thePostcode); }
        else if (theCountry == "SLOVAKIA") { return new SqlString("299" + thePostcode); }
        else if (theCountry == "SLOVENIA") { return new SqlString("300" + thePostcode); }
        else if (theCountry == "SOLOMON ISLANDS") { return new SqlString("302" + thePostcode); }
        else if (theCountry == "SOMALIA") { return new SqlString("303" + thePostcode); }
        else if (theCountry == "SOUTH AFRICA") { return new SqlString("304" + thePostcode); }
        else if (theCountry == "SOUTH KOREA") { return new SqlString("359" + thePostcode); }
        else if (theCountry == "SPAIN") { return new SqlString("305" + thePostcode); }
        else if (theCountry == "SRI LANKA") { return new SqlString("306" + thePostcode); }
        else if (theCountry == "ST HELENA") { return new SqlString("307" + thePostcode); }
        else if (theCountry == "ST KITTS & NEVIS") { return new SqlString("308" + thePostcode); }
        else if (theCountry == "ST LUCIA") { return new SqlString("309" + thePostcode); }
        else if (theCountry == "ST PIERRE & MIQUELON") { return new SqlString("311" + thePostcode); }
        else if (theCountry == "ST VINCENT & THE GRENADINES") { return new SqlString("312" + thePostcode); }
        else if (theCountry == "SUDAN") { return new SqlString("313" + thePostcode); }
        else if (theCountry == "SURINAME") { return new SqlString("314" + thePostcode); }
        else if (theCountry == "SWAZILAND") { return new SqlString("315" + thePostcode); }
        else if (theCountry == "SWEDEN") { return new SqlString("316" + thePostcode); }
        else if (theCountry == "SWITZERLAND") { return new SqlString("317" + thePostcode); }
        else if (theCountry == "SYRIA") { return new SqlString("318" + thePostcode); }
        else if (theCountry == "TAIWAN") { return new SqlString("320" + thePostcode); }
        else if (theCountry == "TAJIKISTAN") { return new SqlString("321" + thePostcode); }
        else if (theCountry == "TANZANIA") { return new SqlString("322" + thePostcode); }
        else if (theCountry == "THAILAND") { return new SqlString("324" + thePostcode); }
        else if (theCountry == "TIMOR-LESTE") { return new SqlString("167" + thePostcode); }
        else if (theCountry == "TOGO") { return new SqlString("325" + thePostcode); }
        else if (theCountry == "TOKELAU") { return new SqlString("326" + thePostcode); }
        else if (theCountry == "TONGA") { return new SqlString("327" + thePostcode); }
        else if (theCountry == "TRINIDAD & TOBAGO") { return new SqlString("328" + thePostcode); }
        else if (theCountry == "TRISTAN DA CUNHA") { return new SqlString("355" + thePostcode); }
        else if (theCountry == "TUNISIA") { return new SqlString("330" + thePostcode); }
        else if (theCountry == "TURKEY") { return new SqlString("331" + thePostcode); }
        else if (theCountry == "TURKMENISTAN") { return new SqlString("332" + thePostcode); }
        else if (theCountry == "TURKS AND CAICOS") { return new SqlString("333" + thePostcode); }
        else if (theCountry == "TUVALU") { return new SqlString("334" + thePostcode); }
        else if (theCountry == "UGANDA") { return new SqlString("335" + thePostcode); }
        else if (theCountry == "UKRAINE") { return new SqlString("336" + thePostcode); }
        else if (theCountry == "UNITED ARAB EMIRATES") { return new SqlString("337" + thePostcode); }
        else if (theCountry == "UNITED KINGDOM") { return new SqlString("338" + thePostcode); }
        else if (theCountry == "URUGUAY") { return new SqlString("340" + thePostcode); }
        else if (theCountry == "UZBEKISTAN") { return new SqlString("342" + thePostcode); }
        else if (theCountry == "VANUATU") { return new SqlString("343" + thePostcode); }
        else if (theCountry == "VATICAN CITY") { return new SqlString("344" + thePostcode); }
        else if (theCountry == "VENEZUELA") { return new SqlString("345" + thePostcode); }
        else if (theCountry == "VIETNAM") { return new SqlString("346" + thePostcode); }
        else if (theCountry == "UNITED STATES") { return new SqlString("339" + thePostcode); }
        else if (theCountry == "US VIRGIN ISLANDS") { return new SqlString("341" + thePostcode); }
        else if (theCountry == "WALLIS & FUTUNA") { return new SqlString("347" + thePostcode); }
        else if (theCountry == "YEMEN") { return new SqlString("349" + thePostcode); }
        else if (theCountry == "ZAMBIA") { return new SqlString("352" + thePostcode); }
        else if (theCountry == "ZIMBABWE") { return new SqlString("353" + thePostcode); }

        else return new SqlString ("");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:24:59.820

理想情况下，您会将这些数据保存在单独的表中并加入其中，但如果您想按照现在的方式进行操作，那么使用静态只读`Dictionary<string,SqlString>`将大大提高您的响应时间。

# wpf - 如何将多个元素属性绑定到 wpf 中的一个元素？

> ID：14933989
> 
> 赞同：0
> 
> 时间：2013-02-18T10:21:25.230
> 
> 标签：wpf, element-binding

```
<Grid x:Name="LayoutRoot">
    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
        <Button Content="Button" Width="112" Height="50" Visibility="{Binding IsFocused, ElementName=textBox1,Converter={StaticResource MyConverter1}}"/>           
    </StackPanel>
    <TextBox Height="57" HorizontalAlignment="Left" Margin="144,103,0,0" Name="textBox1" VerticalAlignment="Top" Width="98" />
    <TextBox Height="57" HorizontalAlignment="Left" Margin="277,103,0,0" x:Name="textBox2" VerticalAlignment="Top" Width="88" />
    <TextBox Height="57" HorizontalAlignment="Left" Margin="390,103,0,0" x:Name="textBox3" VerticalAlignment="Top" Width="87" />        
</Grid> 
```

使用上面的代码，我可以得到以下结果。

![在此处输入图像描述](../Images/5eaebe5149bb6a86704eb23f9f9bcd7f.png)

如果单击**textBox1**按钮将同时隐藏，我单击**textBox2**和**textBox3**按钮将隐藏。

我需要的是，每当我点击**textBox1**和**texBox3**时，按钮应该是隐藏的。我的意思是上面的线，

```
<Button Content="Button" Width="112" Height="50" Visibility="{Binding IsFocused, ElementName=textBox1 or textBox3,Converter={StaticResource MyConverter1}}"/> 
```

这可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:40:41.313

一种方法是`MultiBinding`与实现一起使用`IMultiValueConverter`。

转换器的重要部分如下所示：

```
public class MultiConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter,
                          CultureInfo culture)
    {
        return values.Cast<bool>().Any(x => x) ?
               Visibility.Collapsed : Visibility.Visible;
    }

    public object[] ConvertBack(object value, Type[] targetTypes,
                                object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

用法是这样的：

```
<Button Content="Button" Width="112" Height="50"
        Margin="196,186,195,75">
  <Button.Visibility>
    <MultiBinding Converter="{StaticResource MultiConverter}">
      <Binding ElementName="textBox1" Path="IsFocused" />
      <Binding ElementName="textBox3" Path="IsFocused" />
    </MultiBinding>
  </Button.Visibility>
</Button> 
```

# c++ - c++运算符重载，调用析构函数

> ID：14933993
> 
> 赞同：1
> 
> 时间：2013-02-18T10:21:44.877
> 
> 标签：c++, parameters, operator-overloading, destructor

我正在尝试跟踪给定类创建了多少对象。如果我在类中重载运算符 ++ ，则会调用析构函数，但我不知道为什么。更具体：

```
class num{
public:
    virtual void setValue(int)=0;
    static int db;
    num(){}
    ~num(){}
};

int num::db = 0;

class int32: public num{
public:
    // GET
    int getValue();

    // SET
    void setValue(int f);

    // constructor
    int32()
    {
        cout << "Construction..."<<endl;
        this->value = 0;num::db++;
    }

    // destructor
    ~int32()
    {
        cout << "destruction..."<<endl;
        num::db--;
    }

    // operators
    int32 operator++(int);
    int32 operator++(void);

protected:
    int value;
};

int32 int32::operator ++()
{
    this->value++;
    return *this;
}

int32 int32::operator ++(int)
{
    this->value++;
    return *this;
}

int main()
{
    int32 i;
    i.setValue(20);

    cout << (i++).getValue()<<endl;
    cout << (++i).getValue()<<endl;

    cout << num::db;

    cout << endl << "End of execution.";
    return 1;
} 
```

结果是：构造... 21 破坏... 22 破坏... -1 End of execution.destruction...

所以在 ++i 和 i++ 之后调用了一个析构函数，但是为什么呢？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:24:33.147

这是因为您返回*了一个副本*。您会想要创建一个*复制构造函数*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:24:48.623

您正在 ++ 运算符中返回对象的副本。

每次调用时，`return *this`您实际上都会创建一个传递给调用代码的对象的副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:25:22.357

这是因为您的“operator++()”方法都返回“int32”的副本。因此，每次调用都会创建并返回一个新实例。

# sql - 简单的多列where子句查询

> ID：14933995
> 
> 赞同：0
> 
> 时间：2013-02-18T10:21:46.313
> 
> 标签：sql, sql-server

如果可能的话，我想问一下这个查询。

我有一个表，其中包含如下所示的列：

```
class_01|class_02|class_03|class_04|class_05|class_06|class_07|class_08|class_09|
Sonto   | Botak  | Semut  | Setting|'<none>'|'<none>'|'<none>'|'<none>'|'<none>'| 
```

然后我写一个这样的where子句：

```
SELECT bedrnr 
FROM   bedryf 
WHERE  class_01 IN ('Sonto', 'Botak',  'Semut', 'Setting') 
    OR class_02 IN ('Sonto', 'Botak',  'Semut', 'Setting') 
    OR class_03 IN ('Sonto', 'Botak',  'Semut', 'Setting') 
    OR class_04 IN ('Sonto', 'Botak',  'Semut', 'Setting') 
    OR class_05 IN ('Sonto', 'Botak',  'Semut', 'Setting') 
    OR class_06 IN ('Sonto', 'Botak',  'Semut', 'Setting') 
    OR class_07 IN ('Sonto', 'Botak',  'Semut', 'Setting') 
    OR class_08 IN ('Sonto', 'Botak',  'Semut', 'Setting') 
    OR class_09 IN ('Sonto', 'Botak',  'Semut', 'Setting') 
```

这是一个 where 子句，其中 IN 的值在那里相同，但它只想在 9 个不同的列中找到。有什么办法可以让查询更短吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:06:11.823

您应该以另一种方式修复您的架构（2008+ 语法）

```
SELECT bedrnr 
FROM   bedryf
WHERE  EXISTS (SELECT class
               FROM   (VALUES(class_01),
                             (class_02),
                             (class_03),
                             (class_04),
                             (class_05),
                             (class_06),
                             (class_07),
                             (class_08),
                             (class_09)) V(class)
               WHERE  class IN ( 'Sonto', 'Botak', 'Semut', 'Setting' )) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:02:01.627

```
select distinct bedrnr
FROM   bedryf unpivot (value for class in (class_01, class_02, class_03, class_04, class_05, class_06, class_07, class_08, class_09)) b
inner join (
    values ('Sonto'), ('Botak'), ('Semut'), ('Setting') 
) t(thing) on b.value = t.thing 
```

SQL Server 2005：

```
select distinct bedrnr
FROM   bedryf unpivot (value for class in (class_01, class_02, class_03, class_04, class_05, class_06, class_07, class_08, class_09)) b
inner join (
    select 'Sonto' as thing
    union all 
    select 'Botak' as thing
    union all
    select 'Semut' as thing
    union all
    select 'Setting' as thing
) t(thing) on b.value = t.thing 
```

# php - 设置当前页面链接位置？

> ID：14933996
> 
> 赞同：-1
> 
> 时间：2013-02-18T10:21:48.543
> 
> 标签：php, html

我想这已经被问过很多次了，但我真的不确定我应该寻找什么。

基本上，我正在托管一个在 PHP 上运行的网站。
如果在该站点上我添加了一个页面，假设该页面是`http://example.com/directory/page.php`，
那么我将一个锚点添加到该页面，链接默认为`http://example.com/#anchor`.

例如

```
<!-- http://example.com/directory/page.php -->
<a href="#anchor">Anchor</a> 
```

而不是然后链接到：
`http://example.com/directory/page.php#anchor`，

它链接到
`http://example.com#anchor`.

我不是特别希望*每次*添加非外部链接时都必须回显当前页面URL，那么我需要添加什么来在PHP中设置当前页面以防止这种情况发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T10:26:12.193

> 那么我需要添加什么来在 PHP 中设置当前页面以防止这种情况发生

没有。您需要（几乎可以肯定）删除**标签**`<base>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:28:31.473

尝试使用`<a href="<?php echo $_SERVER['PHP_SELF'];?>#anchor">Anchor</a>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T10:29:18.920

您可以尝试使用该`base`标签，看看是否能解决您的问题。

[http://www.w3schools.com/tags/tag_base.asp](http://www.w3schools.com/tags/tag_base.asp)

# android - 捕获应用程序用户的手机号码

> ID：14933999
> 
> 赞同：0
> 
> 时间：2013-02-18T10:21:59.200
> 
> 标签：android, iphone, mobile

有没有办法让智能手机应用程序能够获取当前处于活动状态的手机号码。这是可行的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:23:13.253

您可以使用[来`TelephonyManager`](http://developer.android.com/intl/fr/reference/android/telephony/TelephonyManager.html)执行此操作：

```
TelephonyManager tm = (TelephonyManager)getSystemService(TELEPHONY_SERVICE); 
String number = tm.getLine1Number(); 
```

您需要通过将以下内容添加到您的清单中来授予您的应用程序[进行此查询的权限：](http://developer.android.com/intl/fr/reference/android/Manifest.permission.html#READ_PHONE_STATE)

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

（您不应该使用它`TelephonyManager.getDefault()`来获取它，`TelephonyManager`因为[它是一个未记录的私有 API 调用，并且将来可能会更改](http://groups.google.com/group/android-developers/browse_thread/thread/c2a231ec44a9451c)。）