# StackOverflow 问答 13290000-13290999

# iphone - iPhone在设备和模拟器之间处理图像的差异

> ID：13290002
> 
> 赞同：1
> 
> 时间：2012-11-08T13:37:02.207
> 
> 标签：iphone, ios, uiimage, ios-simulator, cgcontext

我有一个带有透明边框的图像，我正在尝试按照[此处](http://developer.apple.com/library/mac/#qa/qa1509/_index.html)找到的 Apple 指南直接操作图像像素。在设备上运行时一切正常。但是，当我在模拟器上运行我的代码时，我发现每次调用此函数时，图像的透明边框都会慢慢变黑。奇怪的是，即使我不修改图像数据，每次调用这个函数时，透明边框仍然开始变黑。例如，即使我的图像处理代码调用`CGBitmapContextGetData`但不使用返回的数据指针，我也会看到同样的问题。为了使模拟器上的问题消失，我必须注释掉调用`CGBitmapContextGetData`（当然还有数据指针的释放）。仍然在模拟器上修改图像的示例代码：

```
+ (UIImage *) updateImage:(UIImage *)inputImage
{
    UIImage *updatedImage;

    /* Update colors in image appropriately */
    CGImageRef image = [inputImage CGImage];

    CGContextRef cgctx = [ColorHandler CreateARGBBitmapContext:image];
    if (cgctx == NULL)
    {
        // error creating context
        NSLog(@"Error creating context.\n");
        return nil;
    }

    size_t w = CGImageGetWidth(image);
    size_t h = CGImageGetHeight(image);
    CGRect rect = {{0,0},{w,h}};

    // Draw the image to the bitmap context. Once we draw, the memory
    // allocated for the context for rendering will then contain the
    // raw image data in the specified color space.
    CGContextDrawImage(cgctx, rect, image);

    // Now we can get a pointer to the image data associated with the bitmap
    // context.
    void *data = CGBitmapContextGetData(cgctx);

    CGImageRef ref = CGBitmapContextCreateImage(cgctx);
    updatedImage = [UIImage imageWithCGImage:ref];
    // When finished, release the context
    CGContextRelease(cgctx);
    CGImageRelease(ref);

    // Free image data memory for the context
    if (data)
    {
        free(data);
    }

    return updatedImage;    
} 
```

我[在这里阅读了有关如何在设备和模拟器之间以不同方式管理图像的评论和答案](https://stackoverflow.com/questions/2469659/iphone-images-on-the-simulator-and-the-actual-device-different-bitsperpixel-va)，但它并没有帮助我找出我的问题。

我和示例之间的唯一区别`CreateARGBBitmapContext`是我打电话`CGColorSpaceCreateDeviceRGB`而不是`CGColorSpaceCreateWithName`因为我的目标是 iOS。图像在 iOS 设备上运行时完全按照设计进行编辑。

我目前正在主线程中进行所有图像操作以调试此问题。

规格：Mountain Lion，XCode 4.5.2，iOS 6 设备，iOS 6 模拟器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:11:07.540

[我能够通过允许 Quartz 分配和管理位图(Apple doc)](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGBitmapContext/Reference/reference.html#//apple_ref/c/func/CGBitmapContextCreate)的内存来解决这个问题。为此，我更新了对 in 的调用以`CGBitmapContextCreate`传递`CreateARGBBitmapContext`NULL，并删除了对`bitmapData`.

```
// Create the bitmap context. We want pre-multiplied ARGB, 8-bits 
// per component. Regardless of what the source image format is 
// (CMYK, Grayscale, and so on) it will be converted over to the format
// specified here by CGBitmapContextCreate.
context = CGBitmapContextCreate (NULL,
                                pixelsWide,
                                pixelsHigh,
                                8,      // bits per component
                                bitmapBytesPerRow,
                                colorSpace,
                                kCGImageAlphaPremultipliedFirst); 
```

然后，在`updateImage`方法中，我删除了`data`. 现在它似乎在设备和模拟器上都可以正常工作，没有任何问题。

# machine-learning - 猫中的任意数据集检测谷歌的深度学习工作？

> ID：13290009
> 
> 赞同：4
> 
> 时间：2012-11-08T13:37:26.237
> 
> 标签：machine-learning, neural-network, deep-learning

我正在决定是否要学习深度学习。你能帮忙回答一个愚蠢的问题吗？在谷歌的工作中，我收集到他们的人工神经网络在无监督的情况下学习了一个“猫脸特征”，在给定猫脸 stumulus 的情况下最好激活。训练集是绝对随机的 youtube 帧，还是它们都是 youtube 帧，里面可能都是猫？这很有趣。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:42:58.017

是的，训练集是来自 youtube 的随机帧，每个视频一个，不受任何特定搜索的影响。样本是随机的，碰巧如果你想很好地编码 youtube 帧，你需要一个人脸检测器/编码器和一个猫脸编码器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T17:35:06.737

他们的 ANN 是一个分类器，可以回答“这个框架是否包含猫脸？”这个问题。与任何其他分类器一样，它需要一个平衡的无监督学习训练数据集。但是，采用随机的 Youtube 帧可能会给你一个非常倾斜的数据集（太多的负样本）。为了获得更平衡的训练集，他们可能会在视频标题中使用关键字或手动选择视频来获得更多的正面样本和更少的负面样本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-04T00:20:19.620

据我了解，深度梦境网络训练的猫图片比其他任何东西都多。猫脸的结果偏差源于“过度拟合”，这是神经网络的常见问题。当网络的权重变得过度修改和具体时，就会发生过度拟合。从某种意义上说，网络太擅长对训练数据进行分类，因此难以泛化到新的输入。

# pdf - 使用 PowerShell 脚本访问 Word“另存为”对话框

> ID：13290012
> 
> 赞同：2
> 
> 时间：2012-11-08T13:37:38.330
> 
> 标签：pdf, powershell, ms-word, ms-office, windows-server-2008-r2

我有一个 PowerShell 脚本（在 Windows Server 2008 R2 Enterprise 上运行），它在 Word 2010 中打开一个 Word 文档，执行另存为，并将文档另存为 PDF。简而言之，我的代码类似于以下内容：

```
$word = new-object -ComObject "word.application"
$word.Visible = $true
$doc = $word.documents.open("path\file.doc")
$doc.SaveAs("path\file.pdf", [ref] 17)
$doc.Close()
ps winword | kill 
```

以上工作正常，完全没有问题，并且正在按预期转换文档。

我的问题是：

如果我亲自打开 Word 并导航到“文件 > 另存为”，则在另存为 PDF 时会在对话框中看到各种选项（例如页面范围、优化等）

在执行相同操作时，我如何才能从 PowerShell 脚本中访问这些选项？

任何意见，将不胜感激。也许这是不可能的。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:44:16.243

经过大量调查，我发现我需要的选项是 ExportAsFixedFormat()。

文档可以在这里找到：

[http://msdn.microsoft.com/en-us/library/bb256835%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/bb256835%28v=office.12%29.aspx)

您可以在此处的 PowerShell 脚本中看到它的运行情况：

[http://blog.coolorange.com/2012/04/20/export-word-to-pdf-using-powershell/](http://blog.coolorange.com/2012/04/20/export-word-to-pdf-using-powershell/)

# mysql - 举例说明：行与字段？

> ID：13290014
> 
> 赞同：2
> 
> 时间：2012-11-08T13:37:44.390
> 
> 标签：mysql, sql, sqlite

各种文档将行定义为记录的同义词。不幸的是，记录可以是列表或单个项目。同样，一行通常包含多个项目，但有时称为“单个条目”。

一个字段可以是一个容器（例如，在 html 中），它可以被认为是输入一个项目的地方，或者它可以被认为是一个输入许多项目的地方（尽管有时在不同的场合）。

如果有人可以简单地说，那肯定会很好。例如，一行是通过插入语句的单项、单字段条目的结果。一个字段代表所有行并与一列相交。

任何人都可以提供一个明确的答案，因为谷歌只是没有削减它。谢谢你。

编辑：

在 excel 中，它肯定是一刀切的。柱子都是水平的。行都是垂直的。单元格是一个行列对；一个条目。尽管关系数据库语言就像处理多个电子表格（表格），但列、行、单元格的方法似乎最有意义。

我正在查看各种不同的解释，这些解释似乎在答案中彼此不一致。我们能否在操作上定义我目前正在编写的教程的术语，但不清楚？链接：http: [//zetcode.com/databases/sqlitetutorial/introduction/#about](http://zetcode.com/databases/sqlitetutorial/introduction/#about)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T13:40:20.797

如果这是一张桌子...

```
O--O-------------O-------------O
|ID|   my_col_1  |   my_col_2  |
O--O-------------O-------------O
|0 | fskdjfh     | jfkhgdkfj   |
|1 | NULL        | hfkjsdh     |
|2 | jfkdhsdkjh  | NULL        |
|3 | fdfhkjh     | NULL        |
|4 | NULL        | NULL        |
O--O-------------O-------------O 
```

这是一排...

```
|0 | fskdjfh     | jfkhgdkfj   | 
```

这是一个领域...

```
| jfkhgdkfj   | 
```

怎么样？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T16:08:43.540

Imagine you have to describe many aspect of the same thing. You have to choose which aspects you want to take care of: these are the columns of your table. For each of the column you can choose the data type to represent (numeric, String, ...). The column could be also a composite data type (ex: date) or a reference to another object.

The description of an object consists in all the values contained in the columns relative to that object: this is the row/record (the two terms have the same meaning in ER databases).

The field is the value assumed by a column--let's say that it is a cell in a table. It is part of the row, but it may have no sense outside the context provided by the row and the columns.

Maybe the confusion is due to the fact that to simplify the notation, the term field is used as the term column. When you see a query like "select * from foo where somefield=something" it means that you select the rows in which the field relative to the column "somefield", assumes the value "something".

This definition is ok also with HTML fields. A field of a form is the place where you enter the value the column will have in your case, that means, in the row that represents you.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T13:40:48.340

一行/记录，一列/字段：

```
+---+
| x |
+---+ 
```

一行/记录，三列/字段：

```
+---+---+---+
| x | y | z |
+---+---+---+ 
```

三行/记录，一列/字段：

```
+----+
| x1 |
+----+
| x2 |
+----+
| x3 |
+----+ 
```

三行/记录，三列/字段：

```
+----+----+----+
| x1 | y1 | z1 |
+----+----+----+
| x2 | y2 | z2 |
+----+----+----+
| x3 | y3 | z3 |
+----+----+----+ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T14:02:32.690

fields or columns are defined with the table, and are the part of table structure, they hold information vertically. they describe the records or rows in the table.

Example: name, age, salary etc.

Rows or records are the real data that is stored in the table, these records are the actual information. one horizontal row represent one record.

Example: 'John', 23, 23000.00

# xsd.exe - 多个 xsd 文件的 xsd.exe 类生成器问题

> ID：13290018
> 
> 赞同：3
> 
> 时间：2012-11-08T13:38:04.780
> 
> 标签：xsd.exe

我有多个描述对象的 XSD 文件。我想从这些对象生成类，以便我可以解析 XML 并创建该对象。我使用`xsd.exe`Visual Studio 提供的如下：

> xsd /c efreight-CommonReportingSchema-1.0.xsd ../common/efreight-CommonReportingSchemaExtensions-1.0.xsd ../common/UBL-CommonAggregateComponents-2.1.xsd ../common/UBL-CommonBasicComponents-2.1.xsd ../common /UBL-UnqualifiedDataTypes-2.1.xsd

`efreight-CommonReportingSchema-1.0.xsd`文件：

```
<!-- ===== Imports ===== -->
<xsd:import namespace="urn:eu:specification:efreight:schema:xsd:CommonReportingSchemaExtensions-1.0" schemaLocation="../common/efreight-CommonReportingSchemaExtensions-1.0.xsd"/>
<xsd:import namespace="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2" schemaLocation="../common/UBL-CommonAggregateComponents-2.1.xsd"/>
<xsd:import namespace="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2" schemaLocation="../common/UBL-CommonBasicComponents-2.1.xsd"/>
<xsd:import namespace="urn:oasis:names:specification:ubl:schema:xsd:UnqualifiedDataTypes-2" schemaLocation="../common/UBL-UnqualifiedDataTypes-2.1.xsd"/>

<!-- ===== Common Reporting Schema Definition ===== -->
<xsd:element name="CommonReportingSchema" type="CommonReportingSchemaType">
</xsd:element>

<xsd:complexType name="CommonReportingSchemaType">
    <xsd:sequence>          
        <xsd:element ref="cbc:UBLVersionID" minOccurs="0" maxOccurs="1"/>
        <xsd:element ref="cbc:CustomizationID" minOccurs="1" maxOccurs="1"/>
        <xsd:element ref="cbc:ProfileID" minOccurs="0" maxOccurs="1"/>
        <xsd:element ref="cbc:ID" minOccurs="1" maxOccurs="1"/>
        <xsd:element ref="cbc:VersionID" minOccurs="0" maxOccurs="1"/>
        <xsd:element ref="cbc:TransportExecutionPlanReferenceID" minOccurs="0" maxOccurs="1"/>
        <xsd:element ref="crs:SubmissionDate" minOccurs="0" maxOccurs="1"/>
        <xsd:element ref="crs:SubmissionTime" minOccurs="0" maxOccurs="1"/>
        <xsd:element ref="crs:ReportingParty" minOccurs="1" maxOccurs="1"/>
        <xsd:element ref="crs:Consignment" minOccurs="0" maxOccurs="unbounded"/>
        <xsd:element ref="crs:TransportMeans" minOccurs="0" maxOccurs="1"/>         
        <xsd:element ref="cac:DocumentReference" minOccurs="0" maxOccurs="unbounded"/>
    </xsd:sequence>
</xsd:complexType> 
```

cs 文件生成成功，但是当我尝试解析对象时，出现如下几个错误：

> 错误 CS0266：无法将类型“ShipmentStageType[]”隐式转换为“ShipmentStageType1[]”。存在显式转换（您是否缺少演员表？）
> 
> 错误 CS0266：无法将类型“TransportHandlingUnitType[]”隐式转换为“TransportHandlingUnitType1[]”。存在显式转换（您是否缺少演员表？）
> 
> 错误 CS0266：无法将类型“ConsignmentType[]”隐式转换为“ConsignmentType1[]”。存在显式转换（您是否缺少演员表？）

我从错误中看到的是类的生成出现了问题。我认为几个类被声明了两次，这就是为什么将“1”放在名称的末尾。

我可以使用某种配置更改`xsd.exe`吗？还是其他地方引起的错误？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-28T15:25:18.220

我写了一个小脚本来循环文件并打印它们的文件名，所以我可以使用：

xsd.exe /c 文件1.xsd 文件2.xsd 文件3.xsd

那应该工作:)

PS。我知道我迟到了 ;)

# c# - 如何通过 LINQ 获取唯一记录

> ID：13290021
> 
> 赞同：1
> 
> 时间：2012-11-08T13:38:10.803
> 
> 标签：c#, sql, linq, linq-to-sql

```
var EmpRecList = (from ur in db.Users
  join ug in db.UserGroups on ur.UserGroupID equals ug.UserGroupID
  select new
  {
      lastName = ur.LastName, 
      userID = ur.UserID,
      firstName = ur.FirstName,
      userGroupName = ug.UserGroupNameLang1
  }).Where(oh => oh.userGroupName.StartsWith(userCur.UserGroupName))
                                  .OrderBy(x => x.lastName); 
```

我有这个代码片段。这里的问题是，我得到了 2 条具有相同用户 ID 的记录。我想有一个基于用户 ID 的不同记录。谢谢。尝试使用不同的方法，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:45:13.980

您可以使用[GroupBy](http://msdn.microsoft.com/en-us/library/bb534501.aspx)并获得第一条记录。排序后会根据 userid 获取 EmpRecList 中的第一条记录，但不能保证得到你想要的结果。

试试这个

```
var EmpRecList = (from ur in db.Users
                  join ug in db.UserGroups on ur.UserGroupID equals ug.UserGroupID
                  select new
                  {
                      lastName = ur.LastName, 
                      userID = ur.UserID,
                      firstName = ur.FirstName,
                      userGroupName = ug.UserGroupNameLang1
                   })
                  .Where(oh => oh.userGroupName.StartsWith(userCur.UserGroupName))
                  .GroupBy(g => g.userID).Select(s => s.First()).ToList().OrderBy(x => x.lastName) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:49:33.243

这里的问题是你不想一个不同的列表，`Users`但你的 LINQ 查询将一些`Users`与多个`UserGroups`. 对此执行 distinct 不会因为不同而给您一个唯一的列表`UserGroups`。

您需要在 where 子句中解决这个问题。它需要更具体。与其使用谓词`StartsWith`，不如使用`Equals`.

```
var EmpRecList = (from ur in db.Users
  join ug in db.UserGroups on ur.UserGroupID equals ug.UserGroupID
  select new
  {
      lastName = ur.LastName, 
      userID = ur.UserID,
      firstName = ur.FirstName,
      userGroupName = ug.UserGroupNameLang1
  }).Where(oh => oh.userGroupName.Equals(userCur.UserGroupName))
    .OrderBy(x => x.lastName); 
```

`UserGroups`实际上，通过 ID 而不是名称来比较更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:50:35.210

您可以跳过加入，因此拥有多个组的用户不会出现两次。我假设组没有导航属性，但如果有，您可以使用 ur.UserGroups 并且不需要`let`定义。

```
var EmpRecList = (from ur in db.Users
  let groups = db.UserGroups.Where(ug => ur.UserGroupID == ug.UserGroupID)
  select new
  {
      lastName = ur.LastName, 
      userID = ur.UserID,
      firstName = ur.FirstName,
      userGroupNames = groups.Select(g => g.UserGroupNameLang1)
  }).Where(oh => oh.userGroupNames.Any(n => n.StartsWith(userCur.UserGroupName)))
                                  .OrderBy(x => x.lastName); 
```

# ruby - Ruby 1.9 中的线程阻塞主线程

> ID：13290029
> 
> 赞同：2
> 
> 时间：2012-11-08T13:38:33.263
> 
> 标签：ruby

我有这个代码：

…………

```
 ping_thread = Thread.new {
        loop do
            sleep 2
            ping
        end
    }
    ping_thread.join

    puts "TEST" 
```

…………

它执行 ping 功能，但不会继续打印“TEST”语句。ping 函数里面有一个简单的“puts "PING"”语句。我希望 ping_thread 作为后台线程运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T14:05:56.997

`Thread.new`将自动启动您的线程在后台运行，`Thread#join`并将阻塞直到该线程完成其工作。所以通常，当主执行线程完成工作时，加入线程是你做的*最后一件事。*

尝试以下代码，看看它是否符合您的要求：

```
ping_thread = Thread.new {
    loop do
        sleep 2
        puts "ping"
    end
}

puts "TEST"

ping_thread.join 
```

注意，如果最后*没有*jointhead，它会在主执行线程完成工作时死掉，所以join是必须的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:54:04.507

`.join`方法*`just wait here until thread is dead`*

# wix - 需要相当于 WIX 安装程序的 Linux

> ID：13290035
> 
> 赞同：4
> 
> 时间：2012-11-08T13:38:52.890
> 
> 标签：wix

我一直在 ant 脚本中使用 Windows Installer XMl V3 来开发安装程序（exe 或 msi）。截至目前，我们的构建服务器是 Windows Server 2008，我们正在将构建服务器迁移到 RHELv6.3。

这就是问题出现的地方：-它们是否等同于 Linux 中的 WIX 安装程序，我可以从中制作 Windows 安装程序。

我需要使用 Linux 平台来制作 Windows Installer。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:13:06.107

# asp.net-mvc - 为什么 ASP.NET MVC 中需要异步控制器？

> ID：13290042
> 
> 赞同：0
> 
> 时间：2012-11-08T13:39:17.943
> 
> 标签：asp.net-mvc

我对 ASP.NET MVC 有点陌生，搜索后我还有一件事不明白。为什么需要异步控制器？由于每个 HTTP 请求都会导致服务器创建一个新的控制器实例，所以服务器不会阻塞任何请求，那么为什么需要异步控制器呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:07:55.430

异步控制器的全部意义在于在执行长操作时释放 IIS 线程。IIS 线程是从 .NET 线程池中提取的。线程池线程的最大数量将根据您的系统配置而有所不同（在我的 core-2-quad 上是 1023）。这意味着长操作将消耗这些线程之一。当达到最大数量时，其他请求可能必须等到释放一个。说的很清楚：如果你有 1023 个动作执行长轮询请求，你的网站将停止响应额外的请求。

当您使用异步控制器时，您可以在线程池之外创建线程，从而绕过这个最大线程限制。

# php - sql查询喜欢一些文本

> ID：13290043
> 
> 赞同：1
> 
> 时间：2012-11-08T13:39:20.753
> 
> 标签：php, mysql

我的网站就像 imdb.com - 它存储电影详细信息和演员姓名。在我的演员字段中，我正在存储演员姓名，例如“name1,name2,name3,name4”。

我的网站可以选择按演员姓名搜索电影。我的代码如下：

```
SELECT * FROM imdb WHERE actors LIKE '%%actorname%%' 
```

问题是，如果访问者搜索“Lal”，那么演员名称为“Mohanlal”和“Lal”的电影都会出现。我只想列出“Lal”电影。我该如何编写查询来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:17:33.867

尝试以下查询：

```
SELECT * FROM `imdb` WHERE `actors` RLIKE '[[:<:]]Lal[[:>:]]' 
```

更好，更容易：

```
SELECT * FROM `imdb` WHERE find_in_set('Lal',actors) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:51:36.097

```
SELECT * FROM imdb WHERE actor LIKE '%,lal' or actor LIKE 'lal' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:44:43.600

像这样进行查询：

```
SELECT * FROM imdb WHERE actor LIKE 'actorname' 
```

并在您的输入字段旁边放置一个文本，让他们使用通配符进行搜索。然后，如果他们想搜索“Lal”，则只会找到“Lal”，如果他们想搜索以“lal”（%lal）结尾的所有内容，他们将找到 Mohanlal 和 Lal。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T13:48:28.260

您应该为演员创建单独的表格，无论如何我们将尝试找到解决方案。

```
 SELECT * FROM imdb WHERE actors LIKE 'Lal,%' OR actors LIKE '%,Lal%' OR actors = 'Lal' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-14T07:40:50.153

我认为这是你需要的：

```
SELECT whatever
FROM whereever AS t
WHERE t.actors = SOUNDEX('test') 
```

# php - 我需要使用 PHP 将我的 Access 表输出到网站

> ID：13290044
> 
> 赞同：0
> 
> 时间：2012-11-08T13:39:21.750
> 
> 标签：php, sql, ms-access, html-table, odbc

好吧，我从数据库中输出多行数据没有问题，我只是不知道如何以我想要的格式输出。

这是我的基本问题。

```
<tr>
    <?php               
    //make connection to database, bail if no connection
    $connection = odbc_pconnect('sitedata','','');
    if (!$connection) { exit("Connection Failed: " . $connection); }

    //retrieve relevant data
    $Date = "SELECT EntryDate AS DT FROM TimeSheet WHERE EmployeeID = 'AA01'";

    $rs = odbc_exec($connection, $Date);

    //output data
    while(odbc_fetch_row($rs)) {
        $Line1 = odbc_result($rs, 'DT');
        printf("<td><center>%s</center></td>", $Line1);                 
    }
    ?>
</tr> 
```

这将输出一个单行表，每个新日期创建一个新列。

现在，这对我来说有点用处，因为这些需要输出到单个列中，其中每个新数据值都是行的开头。在此之后，我需要扩展表格宽度，添加新的数据值，例如：

```
$Time = "SELECT TotalTime as EN FROM TimeSheet WHERE EmployeeID = 'AA01'";
$JobName = "SELECT JobName as JN FROM TimeSheet WHERE EmployeeID = 'AA01'"; 
```

Time 是它自己的列，JobName 是它自己的列，等等。

我该怎么做？显然必须有一种方法，我只是这方面的新手。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:59:03.810

您需要在一个 SQL 语句中获取字段...

```
SELECT EntryDate AS DT, TotalTime as EN, JobName as JN 
    FROM TimeSheet WHERE EmployeeID = 'AA01'; 
```

有了它，您可以完全按照您现在正在做的事情做，除了构建一整行而不是列。

```
<?php               
    //make connection to database, bail if no connection
    $connection = odbc_pconnect('sitedata','','');
    if (!$connection) { exit("Connection Failed: " . $connection); }

    //retrieve relevant data
    $Date = "SELECT EntryDate AS DT, TotalTime as EN, JobName as JN FROM TimeSheet WHERE EmployeeID = 'AA01';";

    $rs = odbc_exec($connection, $Date);

    //output data
    while(odbc_fetch_row($rs)) {
        $DT = odbc_result($rs, 'DT');
        $EN = odbc_result($rs, 'EN');
        $JN = odbc_result($rs, 'JN');

        printf("<tr><td>%s</td><td>%s</td><td>%s</td></tr>", $DT, $EN, $JN);                 
    }
?> 
```

# objective-c - 如何释放实例变量？

> ID：13290045
> 
> 赞同：0
> 
> 时间：2012-11-08T13:39:26.133
> 
> 标签：objective-c, ios, cocoa-touch

我怀疑我们将如何正确释放实例变量。我知道我们可以在 dealloc 方法中进行释放。如果我们`self.instancevariouble=nil`在viewdidunload中给出的同样会释放该对象。我的问题是，如果我们在 unload 方法中将对象设为 nil，然后在 dealloc 方法中释放它，是否有任何问题。另外，我如何需要发布在 xib 中添加为 IBoutlet 的 tableview。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:44:53.527

调用一个 nil 对象没有问题，`release`但作为一个更好的策略，转移到 ARC 并且大多数这些问题都会消失。（另请注意，iOS 6 不会卸载视图。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:44:38.183

如果您尝试释放一个 nil 对象，它将“工作”。您可以在没有应用程序崩溃的情况下向 nil 对象发送消息；）因此您可以这样做：

```
UILabel *lbl = nil;
[lbl release]; 
```

它不会做任何事情。

关于“我如何需要发布一个在xib中添加为IBoutlet的tableview。有人能指出我正确的方向吗？” 您必须将 xib 文件中的 UITableView 与您的代码“连接”并执行以下操作：

```
[myTableView release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:45:20.293

如果您`self.instanceVariable = nil`在该`viewDidUnload`方法中使用（顺便说一句，iOS 6 中不再调用该方法）该值当然是`nil`. `dealloc`因此，如果您随后在您基本上调用的方法中释放它，`[nil release];`那么它什么也不做。

# playframework-2.0 - Play 2.0 未更新

> ID：13290046
> 
> 赞同：0
> 
> 时间：2012-11-08T13:39:28.067
> 
> 标签：playframework-2.0, anorm

我在使用 Play 2.0 版本时遇到问题。我需要使用 anorm 的新 getAliased 方法，但找不到：

> > value getAliased 不是 anorm.MetaData 的成员

同时，它被添加到这个提交中：[https ://github.com/playframework/Play20/pull/370](https://github.com/playframework/Play20/pull/370)

我的 plugins.sbt 说：

> > addSbtPlugin("play" % "sbt-plugin" % "2.0.4")

4个月前将对应的库代码推送到master Play 2.0，为什么我的代码没有编译？

我的代码，仅供参考：

> > 元数据(null).getAliased("")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:49:28.260

我认为您犯了一个错误：您提到的拉取请求已被推送到`master`分支，但不在`2.0.x`分支中。

您可以在 2.0.4 版本的`SqlParser.scala`文件中看到该`getAliased()`方法不存在：[https ://github.com/playframework/Play20/blob/2.0.4/framework/src/anorm/src/main/scala/SqlParser .scala](https://github.com/playframework/Play20/blob/2.0.4/framework/src/anorm/src/main/scala/SqlParser.scala)

# android - 使用 sdk 3.0 在 facebook 墙上发帖

> ID：13290047
> 
> 赞同：3
> 
> 时间：2012-11-08T13:39:31.197
> 
> 标签：android, facebook, facebook-wall

我试图在用户的墙上发布一条由其 ID 定义的消息，但作为响应，我收到一个错误“未知方法”。

我的代码是：

```
final Bundle params = new Bundle();

params.putByteArray("message", "Test".getBytes());
params.putByteArray("name", "American Virgin".getBytes());
params.putByteArray("link", "http://bit.ly/12345".getBytes());
params.putByteArray("description", "A Freshman College Girl on a scholarship from an ...".getBytes());
params.putByteArray("picture", "http://xxx/MOV1026.jpg".getBytes());

final Request postToWall = Request.newRestRequest(Session.getActiveSession(), 
                                                    "/" + pickedUsersId.get(0) + "/feed", params, HttpMethod.POST);
postToWall.setCallback( new Request.Callback() 
{

    @Override
    public void onCompleted(Response response) 
    {
        Log.i(Utils.LOG, response.toString());

    }
});
Request.executeBatchAsync(postToWall); 
```

在 LogCat 我有：

```
11-08 17:34:29.136: I/LOG(21699): {Response:  responseCode: 200, graphObject: null, error: {FacebookServiceErrorException: httpResponseCode: 200, facebookErrorCode: 3, facebookErrorType: null, message: Unknown method}, isFromCache:false} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T21:20:48.803

`graphPath`除了方法中的参数外，一切看起来都正确`Request`。代替：

`"/" + pickedUsersId.get(0) + "/feed"`

做：

`pickedUsersId.get(0) + "/feed"`

图形路径前不应有前导斜杠“/”。您可以随时参考我们的文档，了解如何准确发布到 Feed。 [https://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/)

# database-design - 超类型/子类型：数据建模

> ID：13290048
> 
> 赞同：2
> 
> 时间：2012-11-08T13:39:35.790
> 
> 标签：database-design, entity-relationship, data-modeling, subtype, supertype

我有一个超类型/子类型关系，其中一个子类型没有任何属性，所以我不确定如何建模。我有一个名为 Tracks 的超类型，其中轨道可以是 3 种子类型之一，音频、视频、文本。音频和视频子类型都具有特定的属性，因此将它们放在单独的表中是有意义的。Text 子类型没有额外的元数据，所以我应该在单独的表中捕获它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:41:07.850

如果您的超类型表中有**类型鉴别器**¹，那么您根本不需要子类型表 - 子类型将由类型鉴别器标识，并且其所有字段都已在基表中。

否则，子类型表只会复制超级表的 PK（并且没有其他字段）。

或者，您可以考虑[“同一张表中的所有类型”](https://stackoverflow.com/a/12037398/533120)策略来实现继承。

* * *

*¹只是一个标识其行类型的字段 - 通常是一个整数（或枚举，如果 DBMS 支持它），它从“众所周知的”和记录的集合中获取其值。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T09:48:58.647

只需在轨道表中添加一个名为 tracktype 的单独列。在此列中存储轨道的类型，无论它是音频..文本。轨道表应该包含所有类型的轨道信息，这些信息具有所有类型共有的属性，现在对于每种类型，您都需要单独的表。它们都有自己的标识符和其他属性，标识符应该是轨道表中的主键和外键。您可以避免创建文本表，因为它没有任何属性。但是，如果任何其他表特别依赖于文本表，那么您可以为文本创建一个单独的表，并在该表中只放置一个属性，即文本实体的标识符。

# asp.net-mvc - Breezejs WebAPI OData 与 Microsoft ASP.NET Web API OData

> ID：13290053
> 
> 赞同：1
> 
> 时间：2012-11-08T13:39:46.787
> 
> 标签：asp.net-mvc, asp.net-web-api, odata, breeze

我开始评估 BreezeJS 以将其与 ASP.NET WebAPI 项目一起使用。首先，我很高兴找到一个项目，该项目将以可查询的方式向 OData 和 AJAX 客户端公开我的 MVC 数据，但随后我遇到了许多烦人的事情，我不知道该放在哪里，就 BreezeJS 库架构而言 - 战略性决定

*   BreezeJS 不提供服务文档（带有顶级集合）
*   它也不提供基于标准的 $metadata url
*   它有一个类似 OData 的元数据服务，它只与 BreezeJS 客户端兼容（好点它的 JSON 格式）
*   请求/响应 JSON 有效负载根本不符合 OData

所以总而言之，我可以用来消费我的 MVC 项目的唯一客户端是 BreezeJS.js 甚至不是 datajs.js，其方式类似于 OData 但不是 OData（符合标准的客户端将无法识别它 - 恕我直言为什么这样做类似于标准但不符合标准的东西）。

现在有一个 Microsoft 支持的项目，称为 Microsoft [ASP.NET Web API OData](http://www.nuget.org/packages/Microsoft.AspNet.WebApi.OData/0.1.0-alpha-120815)包，它确实支持上述所有场景，但这仍处于 alpha 阶段，尽管围绕它的社区讨论的规模很有希望。我已经广泛尝试过，尽管处于早期阶段，但它的作用就像魅力一样。

所以问题很明显：我应该决定支持 BreezeJS（他们声称在 rc 中）并失去标准合规性，还是在早期阶段承担 Microsoft 项目的风险并与 OData 保持一致？

我的目标是通过 AJAX 将我的 MVC API 发布到网站和移动设备。

更新：我发现 MS 最近更新了它的[WebAPI OData 项目](http://www.nuget.org/packages/microsoft.aspnet.webapi.odata)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:51:37.910

是的，我们也有类似的经历，我们想从 Excel 和 IOS 访问我们的数据，但是使用 Breezejs 无法正常工作，因此我们更改为 Microsoft 软件包，它工作得很好。

# asp.net - 如何将用户名和密码更改为代理

> ID：13290054
> 
> 赞同：0
> 
> 时间：2012-11-08T13:39:48.580
> 
> 标签：asp.net

我有登录网站的用户名和密码，但我需要使用代理登录如何更改用户名并传递给代理我可以使用此 URL www.mydomain.com?user=1&pass=2 登录到网站或插入用户并传递给登录页面我如何在asp.net C#中使用HttpWebRequest登录网站？

```
<code>
Encoding encode = System.Text.Encoding.GetEncoding("utf-8");
HttpWebRequest Request = (HttpWebRequest)HttpWebRequest.Create(Url);
HttpWebResponse Response = (HttpWebResponse)Request.GetResponse();

</code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:14:52.787

它在 MSDN 上有很好的记录，请参阅[HttpWebRequest.Proxy Property](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.proxy.aspx)。

> 本地计算机或应用程序配置文件可以指定使用默认代理。如果指定了 Proxy 属性，则 Proxy 属性中的代理设置会覆盖本地计算机或应用程序配置文件，并且 HttpWebRequest 实例将使用指定的代理设置。如果在配置文件中未指定代理并且未指定 Proxy 属性，则 HttpWebRequest 类使用从本地计算机上的 Internet Explorer 继承的代理设置。如果 Internet Explorer 中没有代理设置，则请求将直接发送到服务器。

还有更长的示例代码，最重要的部分是：

```
WebProxy myProxy = new WebProxy();
myProxy.Address = "your proxy url";
myProxy.Credentials = new NetworkCredential("login", "password");
Request.Proxy = myProxy; 
```

# c# - c#比较两个文本文件并生成一个有差异的新文件

> ID：13290059
> 
> 赞同：4
> 
> 时间：2012-11-08T13:40:01.437
> 
> 标签：c#, file, text, compare

我正在寻找快速比较 2 个文本文件（+-15000 行）并获取两个文件中不同的输出字符串的最佳方法。第一个是旧库存，新库存是当前库存，我想生成第三个包含 file2 和 file1 之间不同的字符串。（这 2 个文件中有 95% 是相似的）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T13:45:25.047

非常简单的方法，假设*相似*意味着*相等*：

```
var file1Lines = File.ReadLines(file1Path);
var file2Lines = File.ReadLines(file2Path);
IEnumerable<String> inFirstNotInSecond = file1Lines.Except(file2Lines);
IEnumerable<String> inSecondNotInFirst = file2Lines.Except(file1Lines); 
```

您可以使用`foreach`来枚举行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-16T15:30:12.900

你可以使用谷歌的[这个](https://code.google.com/p/google-diff-match-patch/)差异库。查看采用 2 个字符串并返回差异列表的 diff_main 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T13:43:04.723

如果输出顺序相同，直接比较行。当其他文件中缺少该值时，您可能需要跳过行。

但是，如果输出不同，那么您可能需要将文件加载到内存中，并从一个文件到另一个文件中查找相关的库存项目。然后在未找到或不同时做任何你需要的事情。

# c# - 在 ASP.NET 中读取 TinyMCE 编辑器内容

> ID：13290063
> 
> 赞同：0
> 
> 时间：2012-11-08T13:40:13.023
> 
> 标签：c#, asp.net, tinymce

不确定我是否在这里遗漏了一些明显的东西，但是在回发后您如何阅读编辑器内容？我能找到的唯一方法是使用 javascript 读取值，然后执行 AJAX 回调，但我不想这样做。

这是我渲染 TinyMCE 的方式：

```
<script type="text/javascript" src='path'></script>
<script type="text/javascript">
//My settings
</script>
<textarea id="txtTinyMce" runat="server">
</textarea> 
```

然后，如果我尝试从`txtTinyMce`回发中读取它是空的。

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:59:11.717

事实证明，我正在覆盖页面加载事件的实际值。以上是读取值的正确方法。

# php - Yii 公共 $loginRequiredAjaxResponse 示例

> ID：13290066
> 
> 赞同：0
> 
> 时间：2012-11-08T13:40:18.063
> 
> 标签：php, yii

问题 1）当我通过 ajax 请求页面时，我得到登录页面作为响应，原因是会话已过期。我可以通过轮询来解决这个问题，但是最近我知道 yii 提供了解决方案，比如设置 $loginRequiredAjaxResponse 变量，我正在努力但我无法解决这个问题，谁能给我一个实际使用的例子. 我正在从我的上传页面调用 ajax 请求。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:13:27.300

`components`在配置文件的部分中使用它：

```
'user'=>array(
    'class'=>'WebUser',
    'loginRequiredAjaxResponse'=>'logged-out',
), 
```

这会通过 AJAX 在任何 403 上获得输出，而不是重定向到登录页面。

# php - 如何使用 php 检查请求日期？

> ID：13290072
> 
> 赞同：0
> 
> 时间：2012-11-08T13:40:21.453
> 
> 标签：php, time, timer

例如：x 用户在星期一预订机票，并且机票状态更改为预订。三天后，门票状态将自动更改为免费（空）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:43:20.850

尝试这样的事情（使用[strtotime](http://php.net/manual/en/function.strtotime.php)）：

```
if ($ticket_timestamp < strtotime("-3 days")) {
  // ticket is expired
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:44:16.573

您通常需要按日期检查。如果您不关心实际日期而只需要比较，则可以使用 time() 函数。这一天是 time()/60/60/24 。

您可以将订单的时间戳存储在数据库中，然后将其与当前时间进行比较。

# javascript - Chrome 网络检查器：CPU 分析器

> ID：13290075
> 
> 赞同：1
> 
> 时间：2012-11-08T13:40:28.560
> 
> 标签：javascript, google-chrome, web-inspector

![在此处输入图像描述](../Images/0553bfdc29f79f1e4948c2fffa1f83b4.png)

我的程序大约需要 20 秒才能加载（很多 svg 对象）。我正在尝试使用 chrome web 检查器进行分析。它显示总共 19.16 秒，但故障并没有完全加起来。我尝试了自下而上，自上而下并以不同的组合排序。仍然无法识别瓶颈。我可以在几毫秒内看到从服务器接收到的数据，但渲染它需要很长时间。

同样在 %ge 视图中，总数为 98%，但其余的单独小于 0.05%，似乎不正确。

在我之前的[qn](https://stackoverflow.com/questions/13289582/chrome-cpu-profiler-average-and-number-of-calls)中，我询问了如何显示 #calls 和平均值。我怀疑递归调用可能会导致这种情况，但同时总时间应该反映这一点。

![在此处输入图像描述](../Images/18cfaffbeafc08a6812d3def56c18154.png) 如何识别导致此延迟的功能。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:01:34.777

您可以使用此函数记录呼叫之间的时间差异：

```
var timeVal = new Date().getTime();
var log = function(name){
    var str = new Date().toLocaleTimeString();
    var newTime = new Date().getTime();
    str += " (" + (newTime - timeVal) + "ms)";
    timeVal = newTime;
    console.log(str, name)
} 
```

像这样使用它：

```
log("prepare for something")
// do something
log("something happened"); 
```

输出：

```
16:57:46 (2496ms) prepare for something
16:57:46 (130ms) something happened 
```

# c# - 如何询问运行时编译的目标是哪个 .NET Framework？

> ID：13290080
> 
> 赞同：1
> 
> 时间：2012-11-08T13:40:44.940
> 
> 标签：c#, .net

在运行时是否可以发现我自己的编译所针对的 .NET Framework 版本？我正在编写的环境允许我编写在另一台机器上编译的 C#，但我不知道可用的语言版本是 2.0 CLR。我想编写一个输出到指示目标框架的日志文件的测试。

为此，我猜编译的程序集必须携带该信息。

这个问题不是如何列出运行时机器上的所有框架，因为所有版本都已安装。这不是那个问题的重复。这也不是如何使用 System.Environment.Version 确定 CLR 的重复。我也没有尝试在编译时检测目标 .NET 运行时。这需要是运行时检测，以便我可以将其发送到日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:15:03.820

反编译器有时会告诉你。例如，Telerik 的免费 justdecompile 显示了这一点，但并非适用于所有程序集

![目标框架图片](../Images/7a09406ae87f0267c52c87a438b58426.png)

在这里放大一点

![在此处输入图像描述](../Images/632d69e69854fc4ed68a9d144552b72a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-16T06:53:06.433

此信息存储在程序集中，因为它是运行 EXE 文件所必需的。我用这个函数阅读了目标框架：

```
 public string GetTargetFramework()
    {
        System.Reflection.Assembly assembly;
        Attribute[] attributes;
        System.Runtime.Versioning.TargetFrameworkAttribute targetFrameworkAttribute;

        assembly = Assembly.GetEntryAssembly();
        attributes = AssemblyDescriptionAttribute.GetCustomAttributes(assembly);
        foreach(Attribute item in attributes)
        {
            targetFrameworkAttribute = item as System.Runtime.Versioning.TargetFrameworkAttribute;
            if(targetFrameworkAttribute != null)
                return targetFrameworkAttribute.FrameworkDisplayName;
        }
        return null; // "TargetFrameworkAttribute not found"
    } 
```

我特意明确了命名空间。

# c++ - C ++中的斐波那契算法 - 递归

> ID：13290081
> 
> 赞同：-2
> 
> 时间：2012-11-08T13:40:46.833
> 
> 标签：c++, algorithm, fibonacci

我的代码有问题。有一个斐波那契函数，我希望你知道它是做什么的。还有两个文件：In0201.txt 和 Out0201.txt。同样，程序应该从文件“In0201.txt”中获取值并将结果写入 Out0201.txt。

正在写入一些值，而不是写入数字序列（到文件），它写入一个值，就像它是序列中所有这些数字的总和。有人知道为什么会这样吗？

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

//Fibonacci
long double fib(int n) {
    if(n == 0)
    {
        return 0;
    }

    if(n == 1)
    {
        return 1;
    }

    return fib(n-1) + fib(n-2);
}

int main()
{
    int a;
    int tmp;

    ifstream inputFile("In0201.txt");
    if (inputFile.is_open()) {
        inputFile >> a;
        cout << "Loaded the value 'n' from file: " << endl;
        cout << a << " " << endl;
        inputFile.close();
    }

    ofstream outputFile("Out0201.txt");
    if (outputFile.is_open()) {
        tmp = fib(a);
        cout << "Fibonacci's sequence number: " << tmp << endl;
        outputFile << tmp << ", ";
        outputFile.close();
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:49:52.233

```
if (outputFile.is_open()) {
    tmp = fib(a);
    cout << "Fibonacci's sequence number: " << tmp << endl;
    outputFile << tmp << ", ";
    outputFile.close();
} 
```

此代码将向文件输出一个整数，后跟一个逗号。如果要从中输出每个返回值，`fib(int n)`则需要重构代码，以便将要写入文件的字符串附加到递归循环中。

**解决方案**

```
 long double fib(int n, ofstream &openFile) {
     if(n == 0)
     {
         return 0;
     }

     if(n == 1)
     {
         openFile<<1<<", ";
         return 1;
     }
     ofstream dummyStream;
     long double nextFib = fib(n-1, openFile) + fib(n-2, dummyStream);
     openFile<< nextFib <<", ";
     return nextFib;
 }

int main()
{
    int a;

    ifstream inputFile("In0201.txt");
    if (inputFile.is_open()) {
        inputFile >> a;
        cout << "Loaded the value 'n' from file: " << endl;
        cout << a << " " << endl;
        inputFile.close();
    }

    ofstream outputFile("Out0201.txt");
    if (outputFile.is_open()) {
        outputFile << 0 << ", ";
        fib(a, outputFile);
        outputFile.close();
    }
    return 0;
} 
```

的目的`dummyString`是忽略一半的结果，因为它们是通过调用 fib 两次来复制的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:52:26.160

因为您使用的是递归函数。它计算斐波那契的总和，直到你从 in0201.txt

您应该像这样更改函数：

```
long double fib(int n, ofstream openFile) {

 if(n == 0)
 {
     openFile<<0<<", ";
     return 0;
 }

 if(n == 1)
 {
     openFile<<1<<", ";
     return 1;
 }
 openFile<< fib(n-1) + fib(n-2)<<", ";
 return fib(n-1) + fib(n-2);
} 
```

没尝过，但就是这个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:53:34.147

考虑将行更改`outputFile << tmp << ", ";`为

```
for(int i = 0; i < a; i++)
    outputFile << fib(i) << ", ";
outputFile << fib(a) << endl; 
```

如果您想列出序列（正如您的问题和代码所暗示的那样）。

# css - 基本 HTML：将图像放在一行中，彼此之间的距离相同

> ID：13290085
> 
> 赞同：1
> 
> 时间：2012-11-08T13:41:00.323
> 
> 标签：css, html, positioning

我的目标是将 3 张图像以相同的距离放置在一行中，如下图所示（假设 2 个箭头的长度相同）。

![正如它应该看起来的那样。](../Images/a7492614497a5307fc5bc4108da885cc.png)

到目前为止，我的解决方案是一个非常丑陋的解决方案，如果窗口尺寸太小，它会中断：

```
<h1>
    <div style="width:105px; height:30px; float:left; margin-top:25px;">
        <img src="image1.png"/>
    </div>
    <div style="width:190px; height:30px; float:left; margin-top:25px; margin-left:30%; margin-right:30%;">
        <img src="image2.png"/>
    </div>
    <div style="width:102px; height:30px; float:right; margin-top:25px;">
        <img src="image3.png"/>
    </div>
    <div style="clear: both;">
    </div>
</h1> 
```

我真的更喜欢“干净”的解决方案，但到目前为止我关于定位的 HTML 知识太有限了。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:47:46.140

[使用`text-align: justify`](http://codepen.io/anon/pen/BaGzL)：

```
<div class="outer">
  <img src="http://placehold.it/50x100" />
  <img src="http://placehold.it/150x100" />
  <img src="http://placehold.it/50x100" />
  <span class="fix"></span>
</div> 
```

```
.outer {
    text-align: justify;
}
.outer img {
    display: inline-block;
    vertical-align: center;
}
.outer .fix {
    width: 100%;
    height: 0;
    display: inline-block;
} 
```

* * *

在大多数浏览器中，[您可以删除该`.fix`跨度，并添加](http://codepen.io/eric-wieser/pen/BAnIh)：

```
.outer::after {
    width: 100%;
    height: 0;
    display: inline-block;
    content: "";
} 
```

# jquery - jquery 爆炸效果不适用于百分比宽度/高度

> ID：13290086
> 
> 赞同：1
> 
> 时间：2012-11-08T13:41:06.097
> 
> 标签：jquery, jquery-ui, jquery-effects

当使用它的元素具有由百分比定​​义的宽度/高度时，我似乎无法让 jQuery 爆炸效果起作用。它没有分解成碎片，而是从屏幕左侧进/出。

例子：

```
 <html>
    <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.3/jquery-ui.js" type="text/javascript"></script>
<style type="text/css">
#mydiv
{
  background-color: aqua;
  width: 50%;
  height: 50%;
  display: block;
  z-index: 100;
}

#mydiv2
{
  background-color: red;
  width: 500px;
  height: 500px;
  display: block;
z-index: 100;
}
</style>
    </head>
    <body>
        <a href="#" onclick="$('#mydiv').toggle('explode', {}, 1000);">click %</a> <a href="#" onclick="$('#mydiv2').toggle('explode', {}, 1000);">click px</a>
        <div id="mydiv">% width</div>
<br>
<div id="mydiv2">px width</div>
    </body>
</html> 
```

应该是这样吗？有什么解决办法吗？到目前为止，我在谷歌搜索时找不到任何相关内容。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:05:39.290

您可以通过了解窗口的宽度和高度来动态设置宽度和高度（以像素为单位）

以下答案将对您有所帮助： [jQuery：如何动态检测窗口宽度？](https://stackoverflow.com/questions/9720294/jquery-how-to-detect-window-width-on-the-fly)

# android - 从android中的webservice获取数据时屏幕变黑

> ID：13290090
> 
> 赞同：0
> 
> 时间：2012-11-08T13:41:16.803
> 
> 标签：android, json, web-services

我打开了显示来自 Web 服务的数据的新窗口。每当我单击按钮跳到下一个窗口时，它都会变黑。给我一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:16:41.090

代码示例会有所帮助。

您很可能正在主线程（UI 线程）上进行网络操作。这是一个不好的做法。尽管这是最简单的方法，但它会降低应用程序的响应性，如果网络连接不佳，应用程序可能无法在合理的时间内响应。查看 android 文档以获取[可选解决方案](http://developer.android.com/training/basics/network-ops/connecting.html#AsyncTask)

# c# - 网格开始在相机旋转/移动时跳跃

> ID：13290098
> 
> 赞同：3
> 
> 时间：2012-11-08T13:41:45.877
> 
> 标签：c#, directx, direct3d, mesh, slimdx

一起嗨

第一次在这里发帖，因为我被卡住了...

网格离原点 (0, 0, 0) 越远，它在旋转或移动相机时“跳跃”/“闪烁”的次数就越多。有点难以描述这种效果：就像网格有点抖动/颤抖/颤抖，随着您与原点的距离越来越远，这种颤抖变得越来越大。
对我来说，它开始在距原点约 100000 单位距离处可观察到，例如在 (0, 0, 100000) 处。平移轴和网格类型（从 Mesh.Create... 创建的默认网格或使用 assimp.NET 导入的 3ds 网格）都不会影响此效果。发生这种效果时，网格位置的值不会改变，通过记录位置来检查这一点。

如果我没有遗漏什么，这会将其缩小为两种可能性：

1.  我的相机代码
2.  DirectX 设备

至于 DirectX-Device，这是我的设备初始化代码：

```
 private void InitializeDevice()
    {
        //Initialize D3D
        _d3dObj = new D3D9.Direct3D();

        //Set presentation parameters
        _presParams = new D3D9.PresentParameters();
        _presParams.Windowed = true;
        _presParams.SwapEffect = D3D9.SwapEffect.Discard;
        _presParams.AutoDepthStencilFormat = D3D9.Format.D16;
        _presParams.EnableAutoDepthStencil = true;
        _presParams.PresentationInterval = D3D9.PresentInterval.One;
        _presParams.BackBufferFormat = _d3dObj.Adapters.DefaultAdapter.CurrentDisplayMode.Format;
        _presParams.BackBufferHeight = _d3dObj.Adapters.DefaultAdapter.CurrentDisplayMode.Height;
        _presParams.BackBufferWidth = _d3dObj.Adapters.DefaultAdapter.CurrentDisplayMode.Width;

        //Set form width and height to current backbuffer width und height
        this.Width = _presParams.BackBufferWidth;
        this.Height = _presParams.BackBufferHeight;

        //Checking device capabilities
        D3D9.Capabilities caps = _d3dObj.GetDeviceCaps(0, D3D9.DeviceType.Hardware);
        D3D9.CreateFlags devFlags = D3D9.CreateFlags.SoftwareVertexProcessing;
        D3D9.DeviceType devType = D3D9.DeviceType.Reference;

        //setting device flags according to device capabilities
        if ((caps.VertexShaderVersion >= new Version(2, 0)) && (caps.PixelShaderVersion >= new Version(2, 0)))
        {
            //if device supports vertexshader and pixelshader >= 2.0
            //then use the hardware device
            devType = D3D9.DeviceType.Hardware;

            if (caps.DeviceCaps.HasFlag(D3D9.DeviceCaps.HWTransformAndLight))
            {
                devFlags = D3D9.CreateFlags.HardwareVertexProcessing;
            }
            if (caps.DeviceCaps.HasFlag(D3D9.DeviceCaps.PureDevice))
            {
                devFlags |= D3D9.CreateFlags.PureDevice;
            }
        }

        //initialize the device
        _device = new D3D9.Device(_d3dObj, 0, devType, this.Handle, devFlags, _presParams);
        //set culling
        _device.SetRenderState(D3D9.RenderState.CullMode, D3D9.Cull.Counterclockwise);
        //set texturewrapping (needed for seamless spheremapping)
        _device.SetRenderState(D3D9.RenderState.Wrap0, D3D9.TextureWrapping.All);
        //set lighting
        _device.SetRenderState(D3D9.RenderState.Lighting, false);
        //enabling the z-buffer
        _device.SetRenderState(D3D9.RenderState.ZEnable, D3D9.ZBufferType.UseZBuffer);
        //and setting write-access exlicitly to true...
        //i'm a little paranoid about this since i had to struggle for a few days with weirdly overlapping meshes
        _device.SetRenderState(D3D9.RenderState.ZWriteEnable, true);
    } 
```

我是否缺少标志或渲染状态？有什么东西会导致这种奇怪/扭曲的行为吗？

我的相机类基于[Michael Silvermans C++ Quaternion Camera](http://silverwaregames.com/Camera.cpp)：

```
//every variable prefixed with an underscore is 
//a private static variable initialized beforehand
public static class Camera
{
    //gets called every frame
    public static void Update()
    {
        if (_filter)
        {
            _filteredPos = Vector3.Lerp(_filteredPos, _pos, _filterAlpha);
            _filteredRot = Quaternion.Slerp(_filteredRot, _rot, _filterAlpha);
        }

        _device.SetTransform(D3D9.TransformState.Projection, Matrix.PerspectiveFovLH(_fov, _screenAspect, _nearClippingPlane, _farClippingPlane));
        _device.SetTransform(D3D9.TransformState.View, GetViewMatrix());
    }

    public static void Move(Vector3 delta)
    {
        _pos += delta;
    }

    public static void RotationYaw(float theta)
    {
        _rot = Quaternion.Multiply(Quaternion.RotationAxis(_up, -theta), _rot);
    }

    public static void RotationPitch(float theta)
    {
        _rot = Quaternion.Multiply(_rot, Quaternion.RotationAxis(_right, theta));
    }

    public static void SetTarget(Vector3 target, Vector3 up)
    {
        SetPositionAndTarget(_pos, target, up);
    }

    public static void SetPositionAndTarget(Vector3 position, Vector3 target, Vector3 upVec)
    {
        _pos = position;

        Vector3 up, right, lookAt = target - _pos;

        lookAt = Vector3.Normalize(lookAt);
        right = Vector3.Cross(upVec, lookAt);
        right = Vector3.Normalize(right);
        up = Vector3.Cross(lookAt, right);
        up = Vector3.Normalize(up);

        SetAxis(lookAt, up, right);
    }

    public static void SetAxis(Vector3 lookAt, Vector3 up, Vector3 right)
    {
        Matrix rot = Matrix.Identity;

        rot.M11 = right.X;
        rot.M12 = up.X;
        rot.M13 = lookAt.X;

        rot.M21 = right.Y;
        rot.M22 = up.Y;
        rot.M23 = lookAt.Y;

        rot.M31 = right.Z;
        rot.M32 = up.Z;
        rot.M33 = lookAt.Z;

        _rot = Quaternion.RotationMatrix(rot);
    }

    public static void ViewScene(BoundingSphere sphere)
    {
        SetPositionAndTarget(sphere.Center - new Vector3((sphere.Radius + 150) / (float)Math.Sin(_fov / 2), 0, 0), sphere.Center, new Vector3(0, 1, 0));
    }

    public static Vector3 GetLookAt()
    {
        Matrix rot = Matrix.RotationQuaternion(_rot);
        return new Vector3(rot.M13, rot.M23, rot.M33);
    }

    public static Vector3 GetRight()
    {
        Matrix rot = Matrix.RotationQuaternion(_rot);
        return new Vector3(rot.M11, rot.M21, rot.M31);
    }

    public static Vector3 GetUp()
    {
        Matrix rot = Matrix.RotationQuaternion(_rot);
        return new Vector3(rot.M12, rot.M22, rot.M32);
    }

    public static Matrix GetViewMatrix()
    {
        Matrix viewMatrix, translation = Matrix.Identity;
        Vector3 position;
        Quaternion rotation;

        if (_filter)
        {
            position = _filteredPos;
            rotation = _filteredRot;
        }
        else
        {
            position = _pos;
            rotation = _rot;
        }

        translation = Matrix.Translation(-position.X, -position.Y, -position.Z);
        viewMatrix = Matrix.Multiply(translation, Matrix.RotationQuaternion(rotation));

        return viewMatrix;
    }
} 
```

您是否在相机代码中发现任何可能导致此行为的内容？

我只是无法想象 DirectX 不能处理大于 100k 的距离。我应该渲染太阳系，我使用 1 个单位 = 1 公里。因此，地球将在 (0, 0, 152100000) 处与太阳的最大距离处渲染（仅作为示例）。如果这些“跳跃”不断发生，这将变得不可能。最后，我考虑缩小所有内容，以使系统与原点的距离永远不会超过 100k/-100k，但我认为这行不通，因为“抖动”会随着与原点的距离变大而变大。缩小所有内容 - 我认为 - 也会缩小跳跃行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:25:46.020

只是为了不让这个问题悬而未决（[感谢@jcoder](https://stackoverflow.com/users/417292/jcoder)，请参阅问题评论）：

网格的奇怪行为来自 DX 的浮点精度。你的世界越大，准确计算位置的精度就越低。

解决这个问题有两种可能：

1.  缩小整个世界
    ，这在“银河系”世界中可能会出现问题，在这种世界中，您的位置偏移量非常大，也非常小（即行星到太阳的距离非常大，但宇宙飞船的距离在行星的轨道上可能真的很小）
2.  以这种方式将世界划分为更小的块
    ，您要么表达相对于其他事物的所有位置（参见[stackoverflow.com/questions/1930421](https://stackoverflow.com/questions/1930421)），要么创建多个世界并以某种方式在它们之间移动

# database - 循环访问数据库中的文本框

> ID：13290099
> 
> 赞同：1
> 
> 时间：2012-11-08T13:41:45.613
> 
> 标签：database, vba, ms-access, loops, textbox

我有一个 Access 数据库，我想遍历某些文本框以进行计算并在单独的文本框中显示答案。当我尝试循环时，它会遍历表单上的每个控件（使用 Form.Controls）方法。当我的按钮被点击时，我只想循环浏览 4 个特定的文本框（txtbx1、txtbx2、txtbx3、txtbx4）。

说明... TextBox_A 包含一个数字 单击按钮后，从 TextBox_A 中获取数字，乘以 2800，然后除以 12 在 txtbx1 中显示计算的答案。

我会为上面提到的 4 个文本框中的每一个执行此操作。然后有一个“总计”文本框，将每个文本框（txtbx1、txtbx2、txtbx3、txtbx4）的总数相加。请帮助，这是新手，完全不知所措。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T15:06:52.927

每个控件都有一个 Tag 属性。为要包含在算法中的值的文本框设置 Tag 属性（比如“INClUDE”）。它是自由格式的文本，所以你可以放你喜欢的。

然后编写附加到某些表单事件的代码，类似于：

```
 Dim c As Control
Dim txt As TextBox

For Each c In Me.Controls

    'check it's a text box ...
    If TypeOf c Is TextBox Then

        'see if including ...
        Set txt = c
        If Len(txt.Tag) > 0 Then

            'do something here (I've coloured, to show works)
            txt.BackColor = 10

        End If

    End If

Next c 
```

我设置了一个额外的变量 txt 来引用有问题的文本框，这样我就可以使用自动完成获得 TAG 属性（我相信这被称为缩小转换！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:51:04.667

如果将 TextBox_A（_B / _C 等）重命名为 TextBox_1 / _2 / _3 等会更容易。然后试试这个：

```
Dim i As Integer
For i = 1 To 4
    Controls("txtbx" & i) = Val(Controls("TextBox_" & i)) * 2800 / 12
Next 
```

否则，这也可以，但是可读性不好：

```
= Val(Controls("TextBox_" & Chr(Asc("A") + i - 1))) * 2800 / 12 
```

# javascript - 邀请朋友引导他们进入空白页面

> ID：13290100
> 
> 赞同：2
> 
> 时间：2012-11-08T13:41:47.037
> 
> 标签：javascript, facebook, sdk, invite

我在我的一个 Facebook 应用程序上实现了一个 FB 邀请你的朋友按钮。- 邀请效果很好 - 受邀用户收到了正确的消息，但是当他点击它时 - 它只会导致无处可去（空白页面）。

我怎样才能指导这个邀请应该指向哪里？

这是我的邀请码：

```
function invitefriends() {
    FB.ui({method: 'apprequests',message: 'Einladen',data: '128', title: 'Lade Deine Freunde ein'}, requestCallback);
}
function requestCallback(response) {
//
} 
```

抱歉 - 我已经通过谷歌等搜索了很长时间，但没有解决我的问题:(

* * *

编辑
我发现了问题-但现在又出现了另一个问题。问题是我的 CANVAS URL 上的 index.php 是空白的，只有我的 tab.php（PAGE TAB URL）是内容。但由于我使用的是 LIKE Gate（人们必须先点赞我的页面才能使用该应用程序） - 邀请总是指向 PLEASE LIKE 网站：/

我还有机会选择邀请的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:14:13.963

不可以。您不能更改邀请发送给用户的位置。但是，您可以在画布页面上进行简单的重定向 -

```
<script type="text/javascript">
  top.location.href = "YOUR_TAB_PAGE_URL";
</script> 
```

# java - Java 可以启动 Windows UAC 吗？

> ID：13290101
> 
> 赞同：5
> 
> 时间：2012-11-08T13:41:47.973
> 
> 标签：java, uac, access-control

正如标题所说，我想知道用 Java （**并且只有 java**）编写的程序是否有可能以管理员权限重新启动自己（最好是 .jar），以本机 Windows UAC 的方式显示（为了使它对用户来说更值得信赖），我做了功课，发现可以使用 c++ 和 java 之间的桥梁来实现这一点，但我真的很想把它作为一个纯 java 项目来做。

PS：在这个结果不可能的远程情况下，有人可以告诉我使用另一种语言的“简单”方法（我的意思是，我找到了教程，但它们对于我认为不应该的东西来说太复杂了这么复杂）。

P.S2：如果可以做到这一点，它是否可以在其他平台（OS X，Linux）上工作

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T13:47:54.337

它不能在纯java中完成。

最好的办法是将其写入文件：

```
@echo Set objShell = CreateObject("Shell.Application") > %temp%\sudo.tmp.vbs
@echo args = Right("%*", (Len("%*") - Len("%1"))) >> %temp%\sudo.tmp.vbs
@echo objShell.ShellExecute "%1", args, "", "runas" >> %temp%\sudo.tmp.vbs
@cscript %temp%\sudo.tmp.vbs 
```

并将其保存`something.bat`在 Windows*临时*目录中（因为我们可以访问它）。

`Runtime`然后，您将使用or从您的应用程序中执行此操作，`ProcessBuilder`然后退出您的应用程序 ( `System.exit(0);`)。

您应该向您的应用程序添加一个立即启动检查，检查程序是否有提升，如果没有重新运行批处理并退出，它是否已继续。

这是我做的一个例子（这必须在编译为 Jar 时运行，否则它将不起作用）：

```
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import javax.swing.JOptionPane;

/**
 *
 * @author David
 */
public class UacTest {

    public static String jarName = "UacTest.jar", batName = "elevate.bat";

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        if (checkForUac()) {//uac is on
            JOptionPane.showMessageDialog(null, "I am not elevated");
            //attempt elevation
            new UacTest().elevate();
            System.exit(0);
        } else {//uac is not on
            //if we get here we are elevated
            JOptionPane.showMessageDialog(null, "I am elevated");
        }

    }

    private static boolean checkForUac() {
        File dummyFile = new File("c:/aaa.txt");
        dummyFile.deleteOnExit();

        try {
            //attempt to craete file in c:/
            try (FileWriter fw = new FileWriter(dummyFile, true)) {
            }
        } catch (IOException ex) {//we cannot UAC muts be on
            //ex.printStackTrace();
            return true;
        }
        return false;
    }

    private void elevate() {
        //create batch file in temporary directory as we have access to it regardless of UAC on or off
        File file = new File(System.getProperty("java.io.tmpdir") + "/" + batName);
        file.deleteOnExit();

        createBatchFile(file);

        runBatchFile();

    }

    private String getJarLocation() {
        return getClass().getProtectionDomain().getCodeSource().getLocation().getPath().substring(1);
    }

    private void runBatchFile() {
        //JOptionPane.showMessageDialog(null, getJarLocation());

        Runtime runtime = Runtime.getRuntime();
        String[] cmd = new String[]{"cmd.exe", "/C",
            System.getProperty("java.io.tmpdir") + "/" + batName + " java -jar " + getJarLocation()};
        try {
            Process proc = runtime.exec(cmd);
            //proc.waitFor();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    private void createBatchFile(File file) {
        try {
            try (FileWriter fw = new FileWriter(file, true)) {
                fw.write(
                        "@echo Set objShell = CreateObject(\"Shell.Application\") > %temp%\\sudo.tmp.vbs\r\n"
                        + "@echo args = Right(\"%*\", (Len(\"%*\") - Len(\"%1\"))) >> %temp%\\sudo.tmp.vbs\r\n"
                        + "@echo objShell.ShellExecute \"%1\", args, \"\", \"runas\" >> %temp%\\sudo.tmp.vbs\r\n"
                        + "@cscript %temp%\\sudo.tmp.vbs\r\n"
                        + "del /f %temp%\\sudo.tmp.vbs\r\n");
            }
        } catch (IOException ex) {
            //ex.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:45:06.633

使用批处理文件和[`runas`](http://msdn.microsoft.com/en-us/library/cc772672.aspx)命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:48:03.590

我怀疑“只有Java”。充其量你必须有一个围绕 MSFT 模块的 JNI 包装器。除非仅使用“仅 Java”来调用 exe，否则`ProcessBuilder`您启动用户控制台的代码将只是 Java，而不是它调用的代码。IOW，Win 不附带 Java API

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T10:05:57.637

要重新启动提升的应用程序，您必须从 Windows API调用[`ShellExecute`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)或运行并使用动词。[`ShellExecuteEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762154%28v=vs.85%29.aspx)`runas`

[您可以通过JNA 库](https://github.com/twall/jna#readme "Java 本机访问 (JNA) 库")在纯 Java 中使用这些 API 。

要重新启动自己，您必须知道`java.exe`or的完整路径`javaw.exe`、命令行参数（类路径，如果有的话，以及 jar 的路径）。显然，您可以使用 Windows API 获取此信息。

* * *

远程案例是什么意思？
您不能以这种方式启动远程提升进程。

您可以重新启动从网络共享提升的应用程序。但它不适用于映射驱动器：提升后无法访问用户的映射驱动器。

* * *

不，这不能在其他平台上运行。UAC 是 Windows 功能。它在某些方面类似于`sudo`Linux，因此对于 Linux，您可以使用`sudo $pathtojava/java.exe <yourparameters>`. 但是，如果您的应用程序不是从控制台启动的，这将无法正常工作。窗口管理器通常具有在 GUI 对话框中提示输入密码的包装器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-01T19:44:48.773

只需使用 Hackaprofaw (v29) 即可。它也于 2002 年发布，并于 1997 年开始开发。在 2021 年，它的版本为 29.10.7，但是-

```
if raw ram = 0
 disable "featureII" program = "JAVA(math = any)"
run on "Hackaprofaw (math = v29(x))
when "featureII" disabled
 end 
```

# jquery - 使用 jquery 隐藏和显示带有选项值的表

> ID：13290104
> 
> 赞同：0
> 
> 时间：2012-11-08T13:42:10.303
> 
> 标签：jquery

我一直在我的网站上使用这段 jquery 代码：

```
jQuery(document).ready(function() {
   $('#tablets').change(function() {
    $('#LeapPad 2 Explorer,#VTech InnoTab 2').hide();
    $('#' + $(this).val()).show();
});

}); 
```

但它似乎不起作用？

我的网站链接是： http: [//mykidstablet.co.uk](http://mykidstablet.co.uk)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:49:31.113

您正在以“无冲突”样式处理 jQuery，因此您的 '$' 未在其中定义，请将您的函数更改为：

```
jQuery(document).ready(function($) {
   $('#tablets').change(function() {
       $('#LeapPad 2 Explorer,#VTech InnoTab 2').hide();
       $('#' + $(this).val()).show();
  })
}); 
```

ready 函数将传递正在使用的 jQuery 实例。

**注意**删除了之前添加的关于 ID 的注释。有关详细信息，请参阅其他答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:53:39.047

不要使用空格，原因很简单，空格字符对于 ID 属性无效。

```
ID tokens must begin with a letter ([A-Za-z]) and may be followed by any number of   letters, digits ([0-9]), hyphens ("-"), underscores ("_"), colons (":"), and periods ("."). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T13:48:59.000

似乎 this.$ 在您的网站上以未定义的形式返回。我不知道为什么，试着用 jQuery 替换 $ 就像你在顶部做的那样......

```
jQuery(document).ready(function() {
jQuery('#tablets').change(function() {
jQuery('#LeapPad 2 Explorer,#VTech InnoTab 2').hide();
jQuery('#' + jQuery(this).val()).show();
});

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T13:58:07.650

**Eliminate the spaces in the Select "Value" and the Table Id's , Also, Instead of hiding by ID, hide the class attached to the item tables**

**JQuery**

```
jQuery(document).ready(function() {
    $('#tablets').change(function() {
        $('.stock-list').hide(); // Hide all Item Tables
        $('#' + $(this).val()).show();
    });
}); 
```

**Select Html**

```
<select id="tablets">
<option value="LeapPad2Explorer">LeapPad 2 Explorer</option>
<option value="LeapPadExplorer">LeapPad Explorer</option>
<option value="VTechInnoTab2">VTech InnoTab 2</option>
<option value="HelloKitty7inchTablet">Hello Kitty 7 inch Tablet</option>
<option value="KurioKidsTabletwithAndroid4.0">Kurio Kids Tablet with Android 4.0</option>
<option value="Tabeo7inchKidsTablet">Tabeo 7 inch Kids Tablet</option>
</select> 
```

**Table Html**

```
<table class="stock-list tablesorter" id="LeapPad2Explorer" border="0" cellpadding="0" cellspacing="0" width="100%">
///Table Content
</table>

<table class="stock-list tablesorter" id="VTechInnoTab2" border="0" cellpadding="0" cellspacing="0" width="100%">
///Table Content
</table> 
```

# sql - 从 SQL Count 查询中选择最佳结果，包括表连接 - Oracle

> ID：13290105
> 
> 赞同：2
> 
> 时间：2012-11-08T13:42:15.393
> 
> 标签：sql, oracle, join, filter, count

我目前有这个查询，它按降序选择最高的“拾取数量”。我只需要过滤前 10 行/最高的数字。我怎样才能做到这一点？

我尝试在底部添加“WHERE ROWNUM <= 10”，但无济于事。

```
SELECT customer.company_name, COUNT (item.pickup_reference) as "Number of Pickups" 
FROM customer
JOIN item ON (customer.reference_no=item.pickup_reference) 
GROUP BY customer.company_name, item.pickup_reference
ORDER BY COUNT (customer.company_name) DESC; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:45:35.280

您需要对其进行子查询才能使 rownum 起作用。

```
SELECT *
FROM
(
SELECT customer.company_name, COUNT (item.pickup_reference) as "Number of Pickups" 
FROM customer
JOIN item ON (customer.reference_no=item.pickup_reference) 
GROUP BY customer.company_name, item.pickup_reference
ORDER BY COUNT (customer.company_name) DESC
) 
WHERE rownum <= 10 
```

您也可以使用排名函数，但考虑到这一点相对简单，我不确定我是否会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T14:03:32.560

使用排名的解决方案是这样的：

```
select customer.company_name, COUNT (item.pickup_reference) from (
    select distinct customer.company_name, COUNT (item.pickup_reference) ,
    rank() over ( order by count(item.pickup_reference) desc) rnk 
    from customer
    JOIN item ON (customer.reference_no=item.pickup_reference) 
    group by customer.company_name, item.pickup_reference
    order by COUNT (customer.company_name) )
where rnk < 10 
```

使用 'rownum' 来获得最高结果并没有给出预期的结果，因为它获得了前 10 行没有排序的行，然后对它们进行排序（请在评论 Andrew 的回复时通知这一点，我没有添加评论的权利）。

# c# - XElement 迭代并将其添加到父级

> ID：13290108
> 
> 赞同：4
> 
> 时间：2012-11-08T13:42:24.927
> 
> 标签：c#, .net, xml, xml-parsing

嗨，我有以下问题...请帮忙，因为我对 C# 编程非常陌生，以前没有编程经验...

在我的代码中，我想遍历 Xml 文件中的 XElement 将该 Xelement 添加到称为 Capability 的父级......这是我的代码......

```
if (xElem.HasElements)
        {

            foreach (XElement xChild in xElem.Element("Elements"))
            {
                Capability capChild = Parse(xChild);
                capParent.Children.Add(capChild);
            }
        } 
```

这里 foreach 循环给出了一个错误

> 错误 32 foreach 语句无法对“System.Xml.Linq.XElement”类型的变量进行操作，因为“System.Xml.Linq.XElement”不包含“GetEnumerator”的公共定义......

如何执行查找 XElement 是否有任何子元素并将其添加到父 Capability 的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T13:44:19.163

首先修复，添加一个 's' ：

```
//foreach (XElement xChild in xElem.Element("Elements"))
  foreach (XElement xChild in xElem.Elements("Elements")) 
```

这假定`<Elements>`xElem 下的 XML 中有 1 个或多个标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T13:52:38.267

亨克的回答应该有效，但我个人会使用

```
 foreach (XElement xChild in xElem.Descendants()) 
```

其中 xElem 将等于您想要所有子元素的父元素。或者您也可以使用 LINQ 查询来完成相同的任务

```
 var children =
       from xChild in xElem.Descendants()
       select Parse(xChild) 
```

它应该返回一个 IEnumerable ，您可以循环并以这种方式添加。

编辑：

我也刚刚明白，您说您是 C# 新手，之前没有任何编程经验。我认为了解为什么会引发此错误也很重要。在 C# 中，为了使用 foreach 循环，集合必须实现 IEnumerable。这样集合类型就可以定义数据的枚举方式。XElement 不可枚举，因为它旨在表示单个元素，而不是元素的集合。因此，使用 xElem.Element("ElementName") 意味着返回单个结果，而不是数组或集合。使用 xElem.Elements("ElementName") 将返回与 XName 匹配的所有 XElement 的集合。但是，如果您想要单个元素的所有子元素而不管名称如何，这就是 xElem.Descendants() 发挥作用的地方。

# iphone - iOS中不同tableViews中单元格的高度

> ID：13290114
> 
> 赞同：0
> 
> 时间：2012-11-08T13:42:38.213
> 
> 标签：iphone, ios, uitableview, row-height

在我看来，我有三个不同的表。对于前两个表格，我为每个单元格设置了一个固定高度（例如，第一个表格的每个单元格为 30.0f，第二个表格的每个单元格为 45.0f），我已根据每个表格中的数据在情节提要中进行了调整。对于第三张表，我希望每个单元格有不同的高度。我试过方法

**(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath**

但是这种技术的问题是每个表都调用了这个方法。至于前两张表，我已经调整了情节提要中的高度，我不知道如何处理它们。如果我这样做：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
if(tableView == myTable) {
    return 150.0;
}
} 
```

由于其他情况我没有任何回报，所以整个事情都失败了。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T01:17:46.117

您需要返回其他表格的高度。

如果您在情节提要中设置了高度，则可以像这样访问该高度：

```
-(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (tableView == myTable)
        return 150.0;

    return tableView.rowHeight;
} 
```

tableView.rowHeight 将是您在情节提要中设置的高度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:52:06.130

您应该让您的视图控制器委托所有 3 个表视图，并在 heightForRowAtIndexPath 检查哪个表调用了该方法：

所以在 viewDidLoad 添加：

```
myTable1.delegate = self;
myTable2.delegate = self;
myTable3.delegate = self; 
```

进而：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath     *)indexPath {
if(tableView == myTable1) {
return 150.0;
}
else if(tableView == myTable2) {
return 75.0;
}
else if(tableView == myTable3) {
return 75.0;
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T04:12:38.577

如何使用标签属性？将每个表的标签设置为唯一的数字，然后返回高度，如下所示：

```
- (CGFloat) tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    if (tableView.tag == 1)
    {
        return 150;
    }
    return 250;
} 
```

# model-view-controller - Web开发中MVC和View First方法的区别

> ID：13290118
> 
> 赞同：8
> 
> 时间：2012-11-08T13:42:44.283
> 
> 标签：model-view-controller, web, lift

今天上网一搜，看到了Lift框架web开发中的View first方法。有人可以告诉我视图优先和 MVC 方法之间的区别吗？非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T15:04:36.397

View first 不是基于模型和控制器，而是主要对视图感兴趣。许多问题域并没有整齐地组合在控制器和模型中。考虑一个电子商务网站，购物车存在于所有页面上，但每个控制器都应该控制它吗？就我个人而言，在 MVC 中，我有太多时间花在思考如何在逻辑上使问题适合 MVC，而不仅仅是编码。View 首先拿走这个控制器/视图/模型，取而代之的是一个在 Lift 中可以称为“片段”的视图。它几乎是 MVC 的一个超集，因为如果你想要每页只能有一个片段，但 Lift 允许你做更多的事情。片段可以是横切关注点或非常特定于页面的逻辑。

从电梯网站..

Lift 与 [与 MVC] 不同。对于 HTML 请求，Lift 首先加载视图并从视图构建您的页面。Lift 还支持对非 HTML 数据的 REST 样式请求。（参见第 1 页的 11↑）“为什么？” 因为复杂的 HTML 页面很少包含占主导地位的逻辑片段……单个控制器……但包含许多不同的组件。其中一些组件交互，而另一些则不交互。在 Lift 中，您定义要在视图中生成的 HTML 页面中呈现的组件集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:17:41.613

当您使用升降机时，您基本上有一个视图（页面），并且您可以从中合并您拥有的任何片段（应用程序），而无需在 MVC 框架/环境中通常必须做的很多滑稽动作。

基本上，您不必选择页面上最重要的内容就是您要添加到页面的内容，然后添加它。

# eclipse - 有没有办法在 Struts 1.x 中使用乳胶代码生成 pdf？

> ID：13290120
> 
> 赞同：1
> 
> 时间：2012-11-08T13:42:47.903
> 
> 标签：eclipse, pdf, latex, struts, birt

我一直在寻找一种在 Struts 1.x 中生成 pdf 的方法，我突然想到使用乳胶代码在 pdf 中包含样式会很棒。这可能吗？我想到了[birt](http://www.eclipse.org/birt/phoenix/)和 eclipse，但我找不到任何允许这样做的库。

# ruby-on-rails - 如何将特定于根的资源声明从 Rails 2 转换为 Rails 3？

> ID：13290121
> 
> 赞同：2
> 
> 时间：2012-11-08T13:42:57.143
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, custom-routes

我正在将应用程序从 Rails 2.3.5 迁移到 Rails 3.2.8。我有来自 Rails 2 应用程序的这条路线，这让我很头疼：

```
 map.resources :soumission_vt,
                :path_prefix => "/soumission/VT/:page_id", :as => 'police/:action/:id',
                :requirements => {:page_id => /\S+/} 
```

至极生成以下内容：

```
soumission_vt_index GET    /soumission/VT/:page_id/police/:action/:id(.:format)               {:controller=>"soumission_vt"}
                    POST   /soumission/VT/:page_id/police/:action/:id(.:format)               {:controller=>"soumission_vt"}
new_soumission_vt   GET    /soumission/VT/:page_id/police/:action/:id/new(.:format)           {:controller=>"soumission_vt"}
edit_soumission_vt  GET    /soumission/VT/:page_id/police/:action/:id/:id/edit(.:format)      {:controller=>"soumission_vt"}
soumission_vt       GET    /soumission/VT/:page_id/police/:action/:id/:id(.:format)           {:controller=>"soumission_vt"}
                                    PUT    /soumission/VT/:page_id/police/:action/:id/:id(.:format)           {:controller=>"soumission_vt"}
                    DELETE /soumission/VT/:page_id/police/:action/:id/:id(.:format)           {:controller=>"soumission_vt"} 
```

我在 Rails 3 中这样翻译它：

```
 scope '/soumission/VT/:page_id', :constraints => {:page_id => /\S+/} do
    resources :soumission_vt, :as => 'police/:action/:id'
  end 
```

但我得到一个无效的路由名称：'police/:action/:id_index'...

那么有没有办法在 Rails 3 中重现这些路线？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-31T19:33:10.590

经过一次尝试，我成功地使它与以下代码行一起工作：

```
scope '/soumission/VT/:page_id' do
    get 'police/new', controller: :soumission_vt, action: :new, as: :new_soumission_vt
end 
```

希望这能帮助您及时完成迁移！

;)

# twitter-bootstrap - 如何正确覆盖 box-shadow bootstrap mixin？

> ID：13290135
> 
> 赞同：5
> 
> 时间：2012-11-08T13:43:27.623
> 
> 标签：twitter-bootstrap, less, mixins

这是代码：

```
<ul>
    <li></li>
    <li></li>
    <ul>
        <li></li>
        <li></li>
    </ul>
</ul> 
```

这是 LESS 风格：

```
ul li { .box-shadow(0 1px 3px rgba(0,0,0,.25)); } 
```

我想覆盖/取消子列表上的 mixin，所以我尝试了这个：

```
ul ul li { .box-shadow(none); } 
```

......但它没有工作。我让它工作的唯一方法是明确覆盖mixin上的每一行：

```
ul ul li { 
          -webkit-box-shadow: none;
             -moz-box-shadow: none;
                  box-shadow: none;
         } 
```

**那么有什么问题** `ul ul li { .box-shadow(none); }`呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T14:03:54.553

太糟糕了，当它破坏整个编译时，我没有检查错误的输出，但是

`ul ul li { .box-shadow(none); }`

**...工作得很好**。:P

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-03T15:04:21.590

如果你使用带有 SCSS/SASS 的 twitter bootstrap，我会使用内置的 mixins，它处理浏览器特定的标志：

```
ul ul li { @include box-shadow(none); } 
```

# java - 在树视图中实现 Java hashmap

> ID：13290136
> 
> 赞同：1
> 
> 时间：2012-11-08T13:43:43.803
> 
> 标签：java, jsf, primefaces

我是 JSF 编程的新手。我想从 Primefaces 网站实现树视图[示例。](http://www.primefaces.org/showcase-labs/ui/treeAnimate.jsf)

***JSF 页面***

```
<h:form id="form">  

    <p:tree value="#{TreeViewController.root}" var="node" dynamic="true" cache="true" id="tree" animate="true">  
        <p:treeNode>  
            <h:outputText value="Node"/>  
        </p:treeNode>  
    </p:tree>  

</h:form> 
```

***托管豆***

```
private TreeNode root;  

    public TreeView() {  
        root = new DefaultTreeNode("Root", null);  
        TreeNode node0 = new DefaultTreeNode("Node 0", root);  
        TreeNode node1 = new DefaultTreeNode("Node 1", root);  
        TreeNode node2 = new DefaultTreeNode("Node 2", root);  

        TreeNode node00 = new DefaultTreeNode("Node 0.0", node0);  
        TreeNode node01 = new DefaultTreeNode("Node 0.1", node0);  

        TreeNode node10 = new DefaultTreeNode("Node 1.0", node1);  
        TreeNode node11 = new DefaultTreeNode("Node 1.1", node1);  

        TreeNode node000 = new DefaultTreeNode("Node 0.0.0", node00);  
        TreeNode node001 = new DefaultTreeNode("Node 0.0.1", node00);  
        TreeNode node010 = new DefaultTreeNode("Node 0.1.0", node01);  

        TreeNode node100 = new DefaultTreeNode("Node 1.0.0", node10);  
    }  

    public TreeNode getRoot() {  
        return root;  
    } 
```

我想问你这两个问题：当我点击一个节点时如何打开一个新页面？如何将 Java 哈希图作为节点的子节点显示到树中？例如，我想用 Java hashmap 或 Java map 填充树视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:15:25.460

> 单击节点时如何打开新页面？

在您链接到的示例中，为每个树节点创建了一个输出文本，您是否尝试将其中一个按钮元素放在那里？也许[命令链接](http://www.primefaces.org/showcase-labs/ui/commandLink.jsf)？然后将其配置为[在新窗口中打开](https://stackoverflow.com/questions/11963654/jsf-hbutton-or-primefaces-pbutton-target-blank)

> 如何将 Java 哈希图作为节点的子节点显示到树中？例如，我想用 Java hashmap 或 Java map 填充树视图。

如果我理解正确，您想使用 HashMap 中的值加载节点。这意味着使用迭代器并为托管 bean 中的每次迭代创建一个节点。加上你的逻辑来制作树结构和链接。

哦，感谢您向我介绍 Primefaces。:-)

# javascript - jQuery DateTime Picker 的多个实例

> ID：13290139
> 
> 赞同：3
> 
> 时间：2012-11-08T13:43:52.707
> 
> 标签：javascript, jquery, jquery-ui

这就是我定义日期时间选择器的方式

```
$('.datetimepicker').datetimepicker({
    dateFormat: 'y-m-d',
    timeFormat: 'h:m:s'
}); 
```

HTML：

```
<div class="branch">
    <h2>Branch 1</h2>
    <input id="from" class="datetimepicker" type="text" name="from"/>
    <input id="to" class="datetimepicker" type="text" name="to"/>
   </div>
   <div class="branch">
    <h2>Branch 2</h2>
    <input id="from" class="datetimepicker" type="text" name="from"/>
    <input id="to" class="datetimepicker" type="text" name="to"/>
   </div> 
```

这适用于分支 1 中的字段。请看下图：

![在此处输入图像描述](../Images/6abf63276ff648bc589e2cb3c62d108b.png)

前两个字段的日期正确。但是当我关注底部输入字段并设置日期时，设置的不是底部字段而是顶部字段。这是错误的，底部字段应该获取日期。

我无法通过 id 访问每个输入字段，因为输入字段是动态创建的并且其中有很多。任何想法这里有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T13:52:39.290

您不应在同一页面上多次在 html 元素上使用相同的 id。看看你的`<input id="from" ...`和`<input id="to" ...`

```
<div class="branch">
    <h2>Branch 1</h2>
    <input id="from_1" class="datetimepicker" type="text" name="from"/>
    <input id="to_1" class="datetimepicker" type="text" name="to"/>
   </div>
   <div class="branch">
    <h2>Branch 2</h2>
    <input id="from_2" class="datetimepicker" type="text" name="from"/>
    <input id="to_2" class="datetimepicker" type="text" name="to"/>
   </div> 
```

这应该可以解决您的日期选择器问题。

# javascript - Authorize.Net CIM，在托管弹出表单中保存详细信息后，需要调用我的自定义 JavaScript 函数

> ID：13290142
> 
> 赞同：0
> 
> 时间：2012-11-08T13:44:01.863
> 
> 标签：javascript, authorize.net, authorize.net-cim

当我在保存数据消息显示（如 *“您的信息已保存”* ）后在 CIM 托管弹出表单中保存付款详细信息时，我需要调用我的 java-script 函数，可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:21:37.040

这个 JavaScript 应该可以解决问题：

```
AuthorizeNetPopup.options.onPopupClosed = function() {
    // your JavaScript code here
}; 
```

# c# - 等待后异步 WCF 方法 WebOperationContext 为空

> ID：13290146
> 
> 赞同：5
> 
> 时间：2012-11-08T13:44:15.723
> 
> 标签：c#, wcf, async-await

在以下示例中，该方法公开为 WCF 服务操作，并且该服务托管在 IIS 中。在进入函数时，WebOperationContext.Current 按预期设置。然而，在等待完成等待后，WebOperationContext.Current 被设置为空。

```
 public async Task TestAsync()
    {
        //WebOperationContext.Current is set

        Task t = new Task(()=>Thread.Sleep(10000));

        t.Start();

        await t;

        //WebOperationContext.Current is null
    } 
```

这似乎是一个缺点，所以我想知道是否有人意识到这一点，以及是否有任何好的方法来解决它。我意识到我可以在局部变量中缓存对 conext 的引用，但这似乎不太好。

更新

一种有效的方法是

```
 public async Task TestAsync()
    {
        WebOperationContext ctx = WebOperationContext.Current;

        Task t = new Task(()=>Thread.Sleep(10000));

        t.Start();

        await t;

        //ctx is set        
    } 
```

而且，正如其他人暗示的那样，我可以这样做

```
 public async Task TestAsync()
    {
        CallContext.LogicalSetData("WebOperationContext.Current", WebOperationContext.Current);

        Task t = new Task(()=>Thread.Sleep(10000));

        t.Start();

        await t;

        WebOperationContext ctx = (WebOperationContext)CallContext.LogicalGetData("WebOperationContext.Current");
    } 
```

在每个的性能和线程安全方面会有什么影响？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T14:42:47.143

我听说 WCF 团队正在考虑解决方案`OperationContext.Current`，我希望他们也会解决`WebOperationContext.Current`。请参阅[此 SO 帖子](https://stackoverflow.com/questions/12797091/operationcontext-current-is-null-after-first-await-when-using-async-await-in-wcf)（请注意 Jon Cole 在 MS WCF 团队中）。

同时，您可以捕获变量中的值（这提高了可测试性，这是我推荐的），将其添加到`LogicalCallContext`，或安装您自己的`SynchronizationContext`（这会很棘手，因为您托管在使用它自己的 IIS 中`SynchronizationContext`）。

# design-patterns - 设计模式常见条件检查

> ID：13290154
> 
> 赞同：1
> 
> 时间：2012-11-08T13:44:28.933
> 
> 标签：design-patterns, conditional-statements

我试图弄清楚是否有用于检查常见条件的设计模式。

所以我想设计一个用户可以建立自己的条件的配置。更好理解的例子：

对象字段名条件值

客户金额 > 2000 或客户合同包含人寿保险

是否有任何模式可以描述这样的系统和/或有助于共同检查这种情况？

提前致谢。马修

PS：如果我的问题有任何误解，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:05:23.317

就 GoF 书籍而言，最接近的是[Interpreter](http://en.wikipedia.org/wiki/Interpreter_pattern)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:31:37.990

[复合规范](http://en.wikipedia.org/wiki/Specification_pattern)可以完成这项工作。

但是，具体的规范实现特定于一种对象类型，因此您可以为要检查的对象声明具有相关字段的基本类型，或者使用反射调整模式以实现真正的动态检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T23:29:12.980

我认为标准模式是您正在寻找的模式。

# javascript - 如何在公式语言中获取注释文本字段的值？

> ID：13290155
> 
> 赞同：0
> 
> 时间：2012-11-08T13:44:28.353
> 
> 标签：javascript, lotus-notes, lotus-domino, lotusscript, lotus-formula

我有一个表单，上面有一个名为“角色”的文本字段。此表单的加载我正在使用 javascript 为该字段分配一个值：

```
document.forms(0).Role.value=top.parent.document.all.strRole.value; 
```

当表单打开时，所需的值将显示在字段角色中，但是当我尝试在同一表单上的另一个字段中以公式语言分配此字段的值时，它给了我空白值：

```
test := @GetField("Role"); 
```

test 的值为空白。谁能告诉我为什么会这样？我必须在访问值之前保存表单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:20:28.310

根据您添加的评论，我相信您正在尝试做一些不可能的事情。

在将页面数据发送到浏览器之前，在服务器上计算计算显示字段。

在页面数据被完全发送和加载后，onload 事件脚本在浏览器中执行。

由于您的公式 `test := @GetField("Role"); 在计算显示字段中执行，很明显设置角色字段值的 onload 脚本尚未执行，因此它正确返回空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:36:45.743

尝试：

```
test := @GetField("Role"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T16:23:31.697

首先，当您谈论“角色”时，您指的是 ACL 中定义的 Notes 用户角色吗？其次，这是 Notes 客户端应用程序还是 Web（浏览器）应用程序？

如果是 Web 应用程序，将首先计算计算字段，然后在页面加载完成后填充角色字段。为什么要混合使用公式和 Javascript？JS代码也可以在公式中完成，那么我相信它会起作用。

您能否更详细地描述您正在尝试做的事情？角色从哪里来？

# reporting-services - 在 SSRS 中格式化文本

> ID：13290159
> 
> 赞同：1
> 
> 时间：2012-11-08T13:44:34.387
> 
> 标签：reporting-services, formatting, ssrs-2008, ssrs-expression

我有一个表格文本

```
1;#aa2;#dde4;#sdfsa6;#hjjs 
```

我想从上面的字符串中删除`digit`and`;#`并将字符串保留为

```
aa
dde
sdfsa
hjjs 
```

有没有像我们在 C# 中那样检查字符串是否包含`<digit>;#`并将其替换
为空格或空格的方法。

我试图分裂`;#`为

```
=(Split(Fields!ows_Room.Value,";#")).GetValue(1) 
```

但比输出只有`aa2`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:52:35.280

您得到 aa2 只是因为 GetValue(1) 重新运行第一个索引数组值。改变你的表达方式

```
 = Join(Split(Fields!ows_Room.Value,";#"),” “) 
```

如果你想要像这样的输出

```
aa2
dde4
sdfsa6
hjjs 
```

使用这个表达式

```
 = Join(Split(Fields!ows_Room.Value,";#"),VBCRLF) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:22:19.173

试试下面的表达式。

```
 =Join(Split((System.Text.RegularExpressions.Regex.Replace(Fields!ows_Room.Value, "[0-9]", "").Trim(";").Trim("#")),";#"),” “) 
```

# ruby-on-rails - 路线规范似乎与生成的方法不匹配

> ID：13290173
> 
> 赞同：0
> 
> 时间：2012-11-08T13:45:15.747
> 
> 标签：ruby-on-rails, routes, views

当我刷新页面时，我收到此错误消息：

```
ActionController::RoutingError (No route matches {:action=>"value", :controller=>"round"}):
  app/views/surveys/survey.html.erb:28:in `block in _app_views_surveys_survey_html_erb___3955880096442191391_70175035205180'
  app/views/surveys/survey.html.erb:22:in `_app_views_surveys_survey_html_erb___3955880096442191391_70175035205180'
  app/controllers/surveys_controller.rb:16:in `block (2 levels) in survey'
  app/controllers/surveys_controller.rb:14:in `survey'    
  Rendered /Users/pitosalas/.rvm/gems/ruby-1.9.3-p194@repeatsurvey/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms) 
```

我对此感到非常困惑。为什么对 program_participant_round_value_path 的引用导致该路由丢失？

这是我的路线文件：

```
root to: 'programs#index'
  resources :programs do
    resources :participants do
      get 'survey' => 'surveys#survey'
    end
    resources :questions
    resources :rounds
    member do
      get 'report' => 'reports#report'
    end
  end
  resources :program do
    resources :participant do
      resources :round do
        put :value
      end
    end
  end 
```

这是相关的 rake routes 行：

```
program_participant_round_value PUT    /program/:program_id/participant/:participant_id/round/:round_id/value(.:format) round#value 
```

我有一个控制器动作 round#value。

这是视图的相关部分：

```
<%= content_tag :table do %>
  <%= content_tag :thead do %>
    <% 5.times do |q| %>
      <%= content_tag :th, "1" %>
    <% end %>
  <% end %>
  <% form_tag program_participant_round_value_path do %>
    <%= content_tag :tbody do %>
      <%= render partial: 'surveys/value', collection: @values  %>
    <% end %>
    <%= submit_tag "Save" %>
  <% end %>
<% end %> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:50:28.000

您的`program_participant_round_value`路线需要几个参数：

*   `:program_id`
*   `:participant_id`
*   `:round_id`

当您调用帮助程序时，您需要为这些参数提供值`program_participant_round_value_path`：

```
program_participant_round_value_path(program_id: @program, participant_id: @participant, round_id: @round) 
```

当然，变量名称等可能会略有不同，具体取决于您在控制器中定义它们的方式。

# asp.net - VS2012/IIS7建站引起冲突

> ID：13290174
> 
> 赞同：2
> 
> 时间：2012-11-08T13:45:16.220
> 
> 标签：asp.net, visual-studio-2012

我有一个旧网站（asp.net 2.0），它愉快地在服务器上的 IIS7 上运行。

我想对代码进行更改，因此我已将所有源代码和适当的二进制文件复制到我的桌面（运行 VS 2012）。

但是，无论我使用的是 IIS 还是内置的网络服务器，我都会收到以下错误；

```
The type 'foo' in 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\livesite\169c38ce\cc32b84b\App_Web_qbel5zk4.28.cs' conflicts with the imported type 'foo' in 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\livesite\169c38ce\cc32b84b\App_Web_m030ztdd.dll'. Using the one in 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\livesite\169c38ce\cc32b84b\App_Web_qbel5zk4.28.cs'. 
```

相同的代码在运行 VS 2005 的旧 XP PC 上运行良好。我假设这取决于 .net 框架，iis 中的应用程序池设置为作为 asp.net 2 经典运行，但程序集是在下生成的v4 框架。

我尝试删除临时 asp.net 文件，但仍然遇到同样的问题。

它在项目中反对的每个类只有一个实例。那么如何修复它以使其在 VS 2012 中有效，但仍使用 .net 2.0 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:50:25.517

也许这是一个动态编译的问题。默认情况下，web.config 中“编译”元素的“批处理”属性为 true。像这样的东西：

```
<compilation defaultLanguage="c#" debug="false" batch="true" targetFramework="4.0" /> 
```

使用 batch="true"，每当必须在目录中编译控件时，服务器都会编译其目录中的所有控件（一切？）。

这可能会导致从您网站的不同位置引用的元素发生冲突。

您应该尝试设置 batch="false" 并删除您的临时文件。如果您仍然遇到问题，请尝试对相应的 ascx/cs 文件进行虚拟编辑和保存。

希望这会有所帮助

# bash - 命令替换中的 bash 变量替换

> ID：13290186
> 
> 赞同：7
> 
> 时间：2012-11-08T13:45:56.463
> 
> 标签：bash, shell

我想做如下的事情：

```
#!/bin/bash

cmd="find . -name '*.sh'"
echo $($cmd) 
```

我期望的是它会显示当前目录中的所有 shell 脚本文件，但什么也没发生。

我知道我可以根据这篇[文章用 eval 解决问题](https://stackoverflow.com/questions/12718538/bash-command-substitution-with-variables)

```
#!/bin/bash

cmd="find . -name '*.sh'"
eval $cmd 
```

所以我的问题是为什么命令替换在这里不起作用，就问题而言，$(...) 和 eval 有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:59:40.383

由于您已经将模式包含`*.sh`在双引号中，因此不需要单引号来保护模式，因此单引号是模式的*一部分*。

您可以尝试使用数组来保持`*.sh`引用，直到它被传递给命令替换：

```
cmd=(find . -name '*.sh')
echo $("${cmd[@]}") 
```

我不知道是否有一种简单的方法可以在不扩展模式的情况下将原始字符串转换为数组。

更新：这还*不错*，但如果可以的话，直接创建数组可能会更好。

```
cmd="find . -name *.sh"
set -f
cmd=($cmd)
set +f
echo $("${cmd[@]}") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:04:21.903

命令替换在这里有效。只是你引用错误。您的脚本只找到一个文件名！这个带有单引号和星号的：

```
'*.sh' 
```

您可以通过此命令创建此类不常见的文件并对其进行测试：

```
touch "'*.sh'" 
```

bash 中的引用不同于其他编程语言。查看本文中的详细信息： [白壳](http://www.cofoh.com/white-shell)

你需要的是这个引用：

```
cmd="find . -name *.sh"
echo $($cmd) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:06:36.780

当你使用`echo $($cmd)`语法时，它基本上相当于只是放在`$cmd`它自己的行上。问题是 bash 希望在命令运行之前插入通配符的方式。防止这种情况发生的方法是，`*`当您在脚本中取消引用它们时，将包含 char 的变量再次放在引号中。

但是如果你把整个命令`find . -name "*.sh"`放在一个变量中，然后用 `echo $("$cmd") 引用它，shell 会解释这意味着整行是一个要执行的文件，你会得到一个 file not found 错误.

因此，这实际上取决于您在变量中真正需要什么以及可以从中提取什么。如果您需要变量中的程序，这将起作用：

```
#!/bin/bash

cmd='/usr/bin/find'
$cmd . -name "*.sh" -maxdepth 1 
```

这将在当前工作目录中找到所有以`.sh`没有 shell 插入通配符结尾的文件。

如果您需要将模式放在变量中，您可以使用：

```
#!/bin/bash

pattern="*.sh"
/usr/bin/find . -name "$pattern" -maxdepth 1 
```

但是如果你把整个事情放在一个变量中，你就不会得到你所期望的。希望这可以帮助。如果 bash 大师知道我想念的东西，我很想听听。

# ios - 在不同的viewController之间传递数据后无法在DetailViewController中设置标签的文本

> ID：13290188
> 
> 赞同：0
> 
> 时间：2012-11-08T13:46:00.060
> 
> 标签：ios, uitableview, uiviewcontroller, uilabel

将数据从 FirstViewController 传递到 DetailViewController。我无法在 DetailViewController 中设置标签文本；FirstViewController 是一个表格视图，它很好。

我使用方法 updateRowNumber 来设置 rowNumber 。在 DetailViewController 中，我可以使用调试器查看 rowNumber 是否正确。但标签的文本未显示在视图上。

任何人都可以帮助我吗？

在我的 FirstViewController

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

if (dvController == nil)
{
    DetailViewController *aController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];

    self.dvController = aController;

    [aController release];
}   

[[self navigationController] pushViewController:dvController animated:YES];
[dvController updateRowNumber:indexPath.row];

} 
```

在我的 DetailViewController.h

```
#import <UIKit/UIKit.h>

@interface DetailViewController : UIViewController
{
    int rowNumber;
    IBOutlet UILabel *message;
}

@property(readwrite) int rowNumber;
@property(nonatomic, retain) IBOutlet UILabel *message;
- (void) updateRowNumber:(int) theindex;

@end 
```

在我的 DetailViewController.m

```
#import "DetailViewController.h"

@interface DetailViewController ()

@end

@implementation DetailViewController

@synthesize message, rowNumber;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void) updateRowNumber: (int) theindex
{
    rowNumber = theindex + 1;
    message.text = [NSString stringWithFormat:@"row %i was clicked", rowNumber];
}

- (void)dealloc
{
    [message release];
    [super dealloc];
}

- (void)viewDidLoad
{
    message.text = [NSString stringWithFormat:@"row %i was clicked ", rowNumber];
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewWillAppear:(BOOL)animated
{
    //message.text = [NSString stringWithFormat:@"row %i was clicked ", rowNumber];

    [super viewWillAppear: animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear: animated];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:01:15.197

您需要了解如何加载视图，该过程在[文档中有很好的描述](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html)

发生的情况是`view`所有出口都`nil`在加载之前，您可以在配置出口之前`view`通过调用确保它已加载`self.view;``updateRowNumber:`

* * *

另请注意，您最好`[super viewDidLoad]`在覆盖的开头 调用`viewDidLoad`，这是有道理的，因为您需要 `UIViewContorller`在执行一些自定义逻辑之前让其工作人员完成，这是不同的，因为您需要在标准触发`dealloc`之前执行您的逻辑。`NSObject -dealloc`希望可以理解。

# json - JSON 响应处理 iOS 6

> ID：13290190
> 
> 赞同：2
> 
> 时间：2012-11-08T13:46:16.313
> 
> 标签：json, ios6, nsdictionary

我有一个 REST 服务，它产生的 JSON 结果已通过几种不同的验证工具等进行了验证。我对 iOS 开发相当陌生，但一般来说不是开发。我在从服务响应中提取对象/响应/任何内容时遇到了一些问题。尽管我尽了最大的努力，但我的尝试并没有成功。

服务的典型响应：

```
[
    {
        "prcID": 547,
        "prcName": "walls",
        "prcDescription": "hi-lo",
        "1prc": 270,
        "2prc": 282,
        "3prc": 312,
        "4prc": 348,
        "5prc": 354,
        "6prc": 360,
        "7prc": 366,
        "8prc": 372,
        "9prc": 384,
        "10prc": 432
    },
    {
        "prcID": 548,
        "prcName": "doors",
        "prcDescription": "hi-lo",
        "1prc": 270,
        "2prc": 282,
        "3prc": 312,
        "4prc": 348,
        "5prc": 354,
        "6prc": 360,
        "7prc": 366,
        "8prc": 372,
        "9prc": 384,
        "10prc": 432
    }
] 
```

该代码是示例代码的混合，并且我自己尝试使事情起作用：

```
- (void)fetchedData:(NSData *)responseData {
    //parse out the json data
    NSError* error;
    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData //1
                                                         options:kNilOptions
                                                           error:&error];

    NSMutableArray *myarray = [json.description mutableCopy];
    outPutText.text = [myarray mutableCopy];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData* data = [NSData dataWithContentsOfURL:
        [NSURL    URLWithString:@"someserviceurl"]];
        [self performSelectorOnMainThread:@selector(fetchedData:)
                               withObject:data waitUntilDone:YES];
    });
} 
```

这段代码至少让我可以在 TextView 中看到来自服务的响应，但是每次我尝试使用 ObjectAtIndex 或使用 AllKeys 进行迭代来钻取“json”NSDictionary 时，我都会遇到与尝试下面的代码时类似的错误：

```
NSArray* somearray = [json objectForKey:@"prcName"];
NSLog(@"PriceName: %@", somearray); 
```

错误是：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFArray objectForKey:]: unrecognized selector sent to instance 0x71944b0' 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:23:19.063

这个怎么样？

```
NSString *firstName = [NSString stringWithFormat:
                       @"%@",
                       json[0][@"prcName"], nil];
NSLog(@"%@", firstname); 
```

iOS6 将响应转换为一个数组，我曾经`[0]`选择响应 JSON 的第一个“块”。

# regex - 捕获分隔符之间的字符串

> ID：13290191
> 
> 赞同：1
> 
> 时间：2012-11-08T13:46:19.553
> 
> 标签：regex, groovy

在两个标记之间捕获字符串的最短解决方案是什么？

例如，假设我有

> blahblahblah --- foobar-- blahblahblah

我想捕捉“foobar”。

我可以使用正则表达式轻松捕获字符串“---foobar--”。

但是由于我不想要前缀“---”和后缀“--”，我需要很多步骤来清理结果：

1.  获取前缀“---”的位置（因为我们已经捕获了这个块，所以我们知道位置是 0）
2.  获取“---”的长度（为了示例，假设我们不知道限制器的大小，它可以是“---”或“--”或“-”）
3.  获取后缀“--”的位置，从位置 position_prefix+prefix_length 开始
4.  position_prefix+prefix_length 和 position_suffix 之间的子字符串

当然，如果我需要的话，我可以自己构建一个这样的功能来做到这一点，但是是否已经有内置的解决方案呢？

类似 captureWithoutDelimiters(group_regex, prefix_regex, suffix_regex) 的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:50:09.397

怎么样：

```
[\w\s]+-+(\w+)-+[\w\s]+ 
```

然后您可以打印出第一个捕获组捕获的内容。

解释：

```
[\w\s]+     // Match at lest 1 letter or white space character
-+          // Followed by at least 1 marker character
(\w+)       // Capture the word inside the markers
-+          // Followed by more marker characters
[\w\s]+     // Followed by at lest 1 letter/white space character 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:26:17.287

**最短**的解决方案可能是

```
.split("-+")[1] 
```

如果您需要`---`作为前缀和`--`后缀，并且您允许`-`文本中的任何位置，那么拆分解决方案是

```
.split("---")[1].split("--")[0] 
```

请参阅[此演示](http://ideone.com/Pq07l7)。

# algorithm - 欧拉计划 #388

> ID：13290193
> 
> 赞同：1
> 
> 时间：2012-11-08T13:46:20.450
> 
> 标签：algorithm, visual-studio-2010

我需要一些帮助来微调我的[Project Euler 问题 388](http://projecteuler.net/problem=388)的算法。我得出的结论是，您必须`gcd`在坐标中获得 3 个数字中的 ，如果`gcd`是 1，那么该点会给您一条与原点不同的线。这可以正常工作大约 10^5，然后它会减慢很多。这里有人可以帮我看看如何减少时间吗？也许通过消除一大块坐标或其他东西？我在 VS2010 中使用 Visual Basic。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T23:31:53.853

问题是“给定 D(1 000 000) = 831909254469114121”。这可能是搜索递归关系的提示。

# database - 将 Cakephp 与 Informix 数据库集成

> ID：13290194
> 
> 赞同：1
> 
> 时间：2012-11-08T13:46:23.543
> 
> 标签：database, cakephp, informix

我有一个应用程序，我想在我的 cakephp 应用程序中使用 Informix 表。可能吗？

我只想要informix的用户表，其他表我将使用mysql。可能吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:03:03.613

它可以完成，但它需要有关如何访问数据的信息。它是标准化的，如 REST/SOAP 之类的吗？还是您需要硬数据库访问？

一般来说，在 CakePHP 中，您为它构建一个自定义数据源：http: [//book.cakephp.org/2.0/en/models/datasources.html](http://book.cakephp.org/2.0/en/models/datasources.html)或者您可以使用附加到模型的行为。

对于 REST，有一些类似这种方法的示例：http: [//www.neilcrookes.com/2010/06/01/rest-datasource-plugin-for-cakephp/](http://www.neilcrookes.com/2010/06/01/rest-datasource-plugin-for-cakephp/)

# jquery - jquery在图像上加载属性

> ID：13290196
> 
> 赞同：0
> 
> 时间：2012-11-08T13:46:34.073
> 
> 标签：jquery, image, image-size

为什么这不起作用？

```
<script>    
$('#draggable3').load(function() {
 alert($("#draggable3").width());
 $("#containment-wrapper").width() = $("#draggable3").width() * 1.3;
 $("#containment-wrapper").height() = $("#draggable3").height() * 1.3;

});
</script>
<body>
<div id="containment-wrapper">
<div id="border-ornament"> 

<img id="draggable3" class="draggable ui-widget-content" src="img.jpg">

</div>
</div>
</body> 
```

为什么加载图像后事件 .load 不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:49:24.307

将宽度和高度写为 -

```
$("#containment-wrapper").width($("#draggable3").width() * 1.3);
$("#containment-wrapper").height($("#draggable3").height() * 1.3); 
```

并且您需要在 document.ready 中编写 jquery -

```
<script> 
$(document).ready(function(){
  $('#draggable3').load(function() {
     alert($("#draggable3").width());
     $("#containment-wrapper").width($("#draggable3").width() * 1.3);
     $("#containment-wrapper").height($("#draggable3").height() * 1.3);
  });
});   
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T13:52:22.510

在脚本工作时，标签#draggable3 尚不存在。尝试在这样的 document.ready 函数中执行此操作

```
$(function () {
    $('#draggable3').load(function() {
     alert($("#draggable3").width());
     $("#containment-wrapper").width() = $("#draggable3").width() * 1.3;
     $("#containment-wrapper").height() = $("#draggable3").height() * 1.3;

    });
}); 
```

或者你可以把你的脚本放在你的 img 标签之后。

# mailchimp - 如何通过 mailchimp API 存储生日？

> ID：13290198
> 
> 赞同：4
> 
> 时间：2012-11-08T13:46:56.460
> 
> 标签：mailchimp

我通过[这个库](https://github.com/waynhall/CodeIgniter-Library-for-MailChimp-API-v1.3)在 Codeigniter 应用程序中使用 mailchimp 1.3 。

我有这段代码：

```
$birthday = date('m/d', strtotime('1984-04-29');
echo $birthday;
$merge_vars = array(
'FNAME'=> $profile_info['name'], 
'LNAME'=> $profile_info['lastname'], 
'birthday' => $birthday,
'GROUPINGS' => array(array('name' => $this->group_name, 'groups' => $this->group1))
);

$this->mail_chimp->listSubscribe($this->list_id, $email, $merge_vars); 
```

订阅有效，在 mailchimp 的管理面板中我可以看到用户名和姓氏，但没有生日。

在 api 文档中它说它应该被格式化为 MM/DD 并呼应生日我验证它是正确的。有什么建议么？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-11-08T15:40:13.230

好的，我解决了。我必须在列表设置中为生日添加一个字段，如下所述：

[http://kb.mailchimp.com/article/how-do-i-create-and-send-automatic-birthday-campaigns](http://kb.mailchimp.com/article/how-do-i-create-and-send-automatic-birthday-campaigns)

# java - 使用 Android 日历获取当前时间

> ID：13290200
> 
> 赞同：8
> 
> 时间：2012-11-08T13:46:58.810
> 
> 标签：java, android, date, time, android-calendar

我正在尝试在 android 应用程序中获取当前时间 (HH:MM:SEC:MILLISEC)。我正在使用这段代码：

```
Calendar c = Calendar.getInstance(); 
int time_start = c.get(Calendar.MILLISECOND); 
```

“用于获取和设置的字段编号，指示一小时内的分钟。例如，在晚上 10:04:15.250，MILLI 为 250。”

我查看了其他方法，但找不到任何指定它会输出所有内容的内容。无论如何我可以获得H：M：Sec：MilliSec吗？还是我只需要做类似的事情

```
c.get(Calendar.HOUR).get(Calendar.MINUTE).get(Calendar.SECOND).get(Calendar.MILLISECOND). 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-08T13:52:19.923

你可以试试`SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss.SSS");`

或许像这样：

```
Calendar cal = Calendar.getInstance();
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss.SSS");
String test = sdf.format(cal.getTime());
Log.e("TEST", test); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-08T13:59:05.467

那这个呢？

```
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss:S");
String result = sdf.format(Calendar.getInstance().getTime());
System.out.println(result); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T13:50:50.893

我会走这`System.currentTimeMillis()`条路`new Date()`，把它们放在[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)中，以获得你喜欢的输出

# android - 如何在android中以编程方式增加应用程序的堆大小

> ID：13290202
> 
> 赞同：0
> 
> 时间：2012-11-08T13:47:00.183
> 
> 标签：android, android-emulator

嗨，我正在使用显示指标为所有设备开发一个应用程序。在 2.2 版本中，我在这里使用自定义视图来绘制功能。有时它工作得很好。我知道很多次我内存不足异常。在模拟器中我增加了那时的堆大小一切正常。如何在旧版本中增加堆大小，以及我在我的代码中做错了什么，我不明白你有没有人能建议我.....

公共类 A 扩展 Activity {

```
BitmapDrawable   sounddrawable,erasedrawable,backdrwable,fwddrwable,captiondrwable,strtdrwable,stpdrwable;
Bitmap  soundbitmap,eraseBitmap,backbitmap,fwdbitmap,captionbitmap,strtbitmap,stpbitmap;
  MyView myview;
  GlobalClass global;
  RelativeLayout.LayoutParams lp6;
  SampleView sampleview;
ImageView img;
MediaPlayer nextsound;
 boolean count=true;
   MediaPlayer mediay2;
  ImageView horn;
  String  user;
  int username;
 Bundle b;
RelativeLayout relativeLayout,relativeLayout1;
ImageView strtbtn,stpbtn,erase;
 float screenHeight,screenWidth,screendensity;

  public  boolean action=false;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
           requestWindowFeature(Window.FEATURE_NO_TITLE);

        DisplayMetrics displaymetrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
         screenHeight = displaymetrics.heightPixels;
         screenWidth = displaymetrics.widthPixels;
         screendensity = displaymetrics.densityDpi;
        Log.i("screenHeight",""+screenHeight);
        Log.i("screenWidth",""+screenWidth);
        Log.i("screendensity",""+screendensity);

     setContentView(R.layout.alh);
    int topsampl=(int)(80*(screenHeight/600));
    global=(GlobalClass)this.getApplication();
    if(sampleview==null)
    {
         sampleview=new SampleView(this);
    }
         lp6 = new RelativeLayout.LayoutParams(
                 android.view.ViewGroup.LayoutParams.WRAP_CONTENT, android.view.ViewGroup.LayoutParams.WRAP_CONTENT);
             sampleview.setLayoutParams(lp6);
            lp6.setMargins(0,topsampl , 0, 0);

       relativeLayout=(RelativeLayout)findViewById(R.id.relative);

       RelativeLayout.LayoutParams layoutrel= (RelativeLayout.LayoutParams) relativeLayout.getLayoutParams();      
       layoutrel.height=(int)(600*(screenHeight/600));  

       ActivityManager am = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
       int memoryClass = am.getMemoryClass();
       Log.v("onCreateAAAAAAAAAA", "memoryClass:" + Integer.toString(memoryClass));

        relativeLayout1=(RelativeLayout)findViewById(R.id.relative2);

       RelativeLayout.LayoutParams layoutre2= (RelativeLayout.LayoutParams)           relativeLayout1.getLayoutParams();       
       layoutre2.height=(int)(35*(screenHeight/600));  

       int left=(int)(15*(screenWidth/1024));
       int top=(int)(50*(screenHeight/600));

       int widthhh=(int)(80*(screenWidth/1024));
       int hifhtttt=(int)(50*(screenHeight/600));

       ImageView I2=new ImageView(this);

       if(captiondrwable!= null) {
            captionbitmap.recycle();
               captiondrwable= null;
                  }

       if(captiondrwable== null) {
          captionbitmap=BitmapFactory.decodeStream(getResources().openRawResource(R.drawable.practise));
       }
          captiondrwable = new BitmapDrawable(captionbitmap); 
             I2.setBackgroundDrawable(captiondrwable);
       RelativeLayout.LayoutParams rlp=new RelativeLayout.LayoutParams(widthhh,hifhtttt);
       rlp.setMargins(left, top, 0, 0);
       relativeLayout.addView(I2,rlp);

       b =getIntent().getExtras();
           user=b.getString("k1");
          username=Integer.parseInt(user);

        Log.i("username..........",""+username);
        Log.i("user..........",""+user);

       ImageView next=(ImageView)findViewById(R.id.imv1a);
       if(fwddrwable!= null) {
           fwdbitmap.recycle();
               fwddrwable= null;
                    }

       if(fwddrwable== null) {
          fwdbitmap=BitmapFactory.decodeStream(getResources().openRawResource(R.drawable.next_5011));
       }    
          fwddrwable = new BitmapDrawable(fwdbitmap); 
              next.setBackgroundDrawable(fwddrwable);
       RelativeLayout.LayoutParams layoutnext= (RelativeLayout.LayoutParams) next.getLayoutParams();       
       layoutnext.height=(int)(35*(screenHeight/600));  
       layoutnext.width=(int)(50*(screenWidth/1024));

       next.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Log.i("next","..........");
            Intent i =new Intent(A.this,Smallletera.class);
            i.putExtra("k1", user);
            startActivity(i);

            if(nextsound==null)
            {
                nextsound =          MediaPlayer.create(getApplicationContext(),R.raw.chime_up);
            }
            nextsound.start();

         if(nextsound!=null)
            {
            }
        }
    });

       ImageView back=(ImageView)findViewById(R.id.back);
       if(backdrwable!= null) {
           backbitmap.recycle();
           backdrwable= null;
               }
       if(backdrwable== null) {
           backbitmap=BitmapFactory.decodeStream(getResources().openRawResource(R.drawable.back1_50));
       }
        backdrwable = new BitmapDrawable(backbitmap); 
          back.setBackgroundDrawable(backdrwable);
       RelativeLayout.LayoutParams layoutback= (RelativeLayout.LayoutParams) back.getLayoutParams();       
       layoutback.height=(int)(35*(screenHeight/600));  
       layoutback.width=(int)(50*(screenWidth/1024));
     back.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Log.i("next","..........");

            Intent i =new Intent(A.this,HWindex.class);
            startActivity(i);
        }
    });

     if(myview==null)
     {

       myview = new MyView(this);
     }
       myview.setBackgroundColor(Color.WHITE);

    myview.setId(004);
    lp6 = new RelativeLayout.LayoutParams(
         android.view.ViewGroup.LayoutParams.WRAP_CONTENT,   android.view.ViewGroup.LayoutParams.WRAP_CONTENT);
myview.setLayoutParams(lp6);
lp6.setMargins(0,top , 0, 0);
relativeLayout.addView(myview,lp6);

 horn=new ImageView(this);
     if(sounddrawable!= null) {
      soundbitmap.recycle();
         sounddrawable= null;
     }
       if(sounddrawable== null) {
           soundbitmap=BitmapFactory.decodeStream(getResources().openRawResource(   R.drawable.horn));
       }
         sounddrawable = new BitmapDrawable(soundbitmap); 
         horn.setBackgroundDrawable(sounddrawable);

      int left1=(int)(830*(screenWidth/1024));
               int top1=(int)(50*(screenHeight/600));

          int widthhh1=(int)(60*(screenWidth/1024));
           int hifhtttt1=(int)(60*(screenHeight/600));
              RelativeLayout.LayoutParams hn=new RelativeLayout.LayoutParams(widthhh1,hifhtttt1);
    hn.setMargins(left1,top1,0,0);
     relativeLayout.addView(horn,hn);

  horn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(mediay2==null)
            {
             mediay2 = MediaPlayer.create(A.this, R.raw.uppercaseinstructions);
            }

               mediay2.start();
               if(mediay2!=null)
               {

               }
        }
    });

       strtbtn = new  ImageView(this);

      if(strtdrwable!= null) {
         strtbitmap.recycle();
          strtdrwable= null;
     }
     if(strtdrwable== null) {
                strtbitmap=BitmapFactory.decodeStream(getResources().openRawResource(R.drawable.play_50));
  }
  strtdrwable = new BitmapDrawable(strtbitmap); 
   strtbtn.setBackgroundDrawable(strtdrwable);
         int left2=(int)(520*(screenWidth/1024));
    int top2=(int)(60*(screenHeight/600));

 int widthhh2=(int)(40*(screenWidth/1024));
    int hifhtttt2=(int)(40*(screenHeight/600));
   strtbtn.setId(1);
    RelativeLayout.LayoutParams rlp1=new        RelativeLayout.LayoutParams(widthhh2,hifhtttt2);
      rlp1.setMargins(left2, top2, 0, 0);

   relativeLayout.addView(strtbtn,rlp1);

   strtbtn.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub

        if(count==true)
        {
         Log.i("---------dfgdf-----","--------");
      relativeLayout.addView(sampleview,lp6);
          count=false;
        }

    }
});

  stpbtn=new ImageView(this);

  if(stpdrwable!= null) {
     stpbitmap.recycle();
    stpdrwable= null;
       }
  if(stpdrwable== null) {
         stpbitmap=BitmapFactory.decodeStream(getResources().openRawResource(R.drawable.stop_50));
   }
 stpdrwable = new BitmapDrawable(stpbitmap); 
  stpbtn.setBackgroundDrawable(stpdrwable);
        int left3=(int)(570*(screenWidth/1024));
        int top3=(int)(60*(screenHeight/600));

        stpbtn.setId(2);
        RelativeLayout.LayoutParams rlp2=new RelativeLayout.LayoutParams(widthhh2,hifhtttt2);
      rlp2.setMargins(left3, top3,0,0);
      relativeLayout.addView(stpbtn,rlp2);

      stpbtn.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub

        if(count==false)
        {
         Log.i("------stop--------","--");
      relativeLayout.removeView(sampleview);
         count=true;
        }

    }
});

     erase=new ImageView(this);

     if(erasedrawable!= null) {
         eraseBitmap.recycle();
        erasedrawable= null;
          }
     if(erasedrawable== null) {
     eraseBitmap=BitmapFactory.decodeStream(getResources().openRawResource(R.drawable.eraser_50));
     }
     erasedrawable = new BitmapDrawable(eraseBitmap); 
    erase.setBackgroundDrawable(erasedrawable);
     int left4=(int)(620*(screenWidth/1024));
     int top4=(int)(50*(screenHeight/600));

     int widthhh4=(int)(60*(screenWidth/1024));
     int hifhtttt4=(int)(60*(screenHeight/600));
     RelativeLayout.LayoutParams rlp4=new RelativeLayout.LayoutParams(widthhh4,hifhtttt4);
     rlp4.setMargins(left4, top4, 0, 0);
     relativeLayout.addView(erase,rlp4);

     erase.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
         try{

                mBitmap.eraseColor(android.graphics.Color.TRANSPARENT);
                Canvas Canvas=new Canvas(mBitmap);

                action=true;
            myview.onDraw(Canvas);

                }catch(IllegalStateException ie){
                    ie.printStackTrace();
                }
    }
}) ;

   mPaint = new Paint();
   mPaint.setAntiAlias(true);
   mPaint.setDither(true);
   mPaint.setColor(Color.BLACK);
   mPaint.setStyle(Paint.Style.STROKE);
   mPaint.setStrokeJoin(Paint.Join.ROUND);
   mPaint.setStrokeCap(Paint.Cap.ROUND);
   mPaint.setStrokeWidth(6);

      }

 private Paint       mPaint;

    public void colorChanged(int color) {
        mPaint.setColor(color);
    }
    private Bitmap  mBitmap;
    public class MyView extends View
    {

            private Canvas  mCanvas;
            private Path    mPath;
            private Paint   mBitmapPaint;

        public MyView(Context context) {
            super(context);
            // TODO Auto-generated constructor stub
             mPath = new Path();

                mBitmapPaint = new Paint(Paint.DITHER_FLAG);

        }
         @Override
            protected void onSizeChanged(int w, int h, int oldw, int oldh)             {
                super.onSizeChanged(w, h, oldw, oldh);

                if (mBitmap != null) {
                    mBitmap.recycle();
                    mBitmap=null;
                 }

              if(mBitmap==null)
              {
                mBitmap= Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
              }

                mCanvas = new Canvas(mBitmap);

         }

          @Override
            protected void onDraw(Canvas canvas) {

              Paint painto = new Paint();
               painto.setAntiAlias(true);
              painto.setColor(getResources().getColor(R.color.magnata));

               painto.setStrokeWidth(3);

               painto.setStyle(Paint.Style.FILL);

              int leftx1=(int)(15*(screenWidth/1024));
             int leftx2=(int)(1010*(screenWidth/1024));
                int topy1=(int)(60*(screenHeight/600));
                int topy2=(int)(530*(screenHeight/600));

                   canvas.drawLine(leftx1, topy1, leftx2, topy1, painto);   
                   canvas.drawLine(leftx1, topy1, leftx1, topy2, painto);
                   canvas.drawLine(15, topy2, leftx2, topy2, painto);
                   canvas.drawLine(leftx2, topy1, leftx2, topy2, painto);

               Paint paint1 = new Paint();
                paint1.setAntiAlias(true);
                paint1.setColor(Color.BLACK);
                paint1.setStrokeWidth(3);
                paint1.setStyle(Paint.Style.FILL);
                paint1.setTextSize(15);
                canvas.drawText("Practice writing the letter by tracing it over and over again . ", 110, 40, paint1);

                 Paint p1=new Paint();
                    p1.setColor(getResources().getColor(R.color.bcolor));

                    if(screendensity==160)
                    {
                        p1.setTextSize(630);
                    }
                    if(screendensity==240)
                    {
                        p1.setTextSize(650);
                    }
                    p1.setAntiAlias(true);
                    Typeface font = Typeface.createFromAsset(getAssets(), "font/KINDTRG.TTF");             
                    p1.setTypeface(font);            

                    float lefta=(int)(270*(screenWidth/1024));
                     float lefta1=(int)(290*(screenWidth/1024));
                    float lefta2=(int)(320*(screenWidth/1024));
                    float lefta3=(int)(340*(screenWidth/1024));
                    float lefta4=(int)(350*(screenWidth/1024));
                    float lefta5=(int)(370*(screenWidth/1024));
                    float lefta6=(int)(335*(screenWidth/1024));
                    float lefta7=(int)(300*(screenWidth/1024));
                    float lefta8=(int)(265*(screenWidth/1024));

                    float topa=(int)(505*(screenHeight/600));
                    float topa1=(int)(520*(screenHeight/600));
                    float topa2=(int)(510*(screenHeight/600));
                    float topa3=(int)(500*(screenHeight/600));
                    float topa4=(int)(495*(screenHeight/600));
                    float topa5=(int)(490*(screenHeight/600));

                    if(username==1)
                      {
                         canvas.drawText("A", lefta, topa, p1);
                      }
                        if(username==2)
                          {
                             canvas.drawText("B", lefta, topa, p1);

                          }
                        if(username==3)
                        {
                            canvas.drawText("C", lefta, topa, p1);
                        }
                        if(username==4)
                        {
                            canvas.drawText("D", lefta, topa1, p1);
                        }
                        if(username==5)
                        {
                            canvas.drawText("E", lefta3, topa1, p1);
                        }

               canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

                canvas.drawPath(mPath, mPaint); 

    if(action)
     {
 invalidate();
     }

     }  private float mX, mY;
     private   float TOUCH_TOLERANCE = 2;

    private void touch_start(float x, float y) {
        mPath.reset();
    mPath.moveTo(x, y);
    mX = x;
     mY = y;
    }
          private void touch_move(float x, float y) {
             float dx = Math.abs(x - mX);
           float dy = Math.abs(y - mY);
            if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
          mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
          mX = x;
             mY = y;
               }
          }
      private void touch_up() {
            mPath.lineTo(mX, mY);

        mCanvas.drawPath(mPath, mPaint);

             mPath.reset();
          }

        @Override
         public boolean onTouchEvent(MotionEvent event) {
       float x = event.getX();
         float y = event.getY();

 switch (event.getAction()) {
  case MotionEvent.ACTION_DOWN:
      touch_start(x, y);
      invalidate();
      break;
  case MotionEvent.ACTION_MOVE:
      touch_move(x, y);
      invalidate();
      break;
  case MotionEvent.ACTION_UP:
      touch_up();
      invalidate();

      break;
 }
return true;
}
    }
    public void clearAllResources() {

        // Set related variables null

        System.gc();
        Runtime.getRuntime().gc();
       }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

    }

    protected void onDestroy() {
        super.onDestroy();

        unbindDrawables(findViewById(R.id.relative));
        System.gc();
    }

    private void unbindDrawables(View view) {
        if (view.getBackground() != null) {
            view.getBackground().setCallback(null);
        }
        if (view instanceof ViewGroup) {
            for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
                unbindDrawables(((ViewGroup) view).getChildAt(i));
            }
            ((ViewGroup) view).removeAllViews();
        }
    }

    protected void onstop() {
          clearAllResources();

          super.onStop();
      }

       class SampleView extends View {
           java.io.InputStream is;

            private Movie mMovie;
            private long mMovieStart;

            private  byte[] streamToBytes(InputStream is) {
                ByteArrayOutputStream os = new ByteArrayOutputStream(1024);
                byte[] buffer = new byte[1024];
                int len;
                try {
                    while ((len = is.read(buffer)) >= 0) {
                        os.write(buffer, 0, len);
                    }
                } catch (java.io.IOException e) {
                }
                return os.toByteArray();
            }

            public SampleView(Context context) {
                super(context);
                setFocusable(true);

                if(global.bugcount==1)
                {

                is = context.getResources().openRawResource(R.drawable.a);
                }

                if(global.bugcount==2)
                    {

                          is = context.getResources().openRawResource(R.drawable.b);

                    }
                    if(global.bugcount==3)
                    {

                          is = context.getResources().openRawResource(R.drawable.c);

                    }
                    if(global.bugcount==4)
                    {

                          is =  context.getResources().openRawResource(R.drawable.d);

                    }
                    if(global.bugcount==5)
                    {

                          is =   context.getResources().openRawResource(R.drawable.e);

                    }

                if (true) {
                    mMovie = Movie.decodeStream(is);
                } else {
                    byte[] array = streamToBytes(is);
                    mMovie = Movie.decodeByteArray(array, 0, array.length);
                }
            }

            @Override protected void onDraw(Canvas canvas) {

                Paint p = new Paint();
                p.setAntiAlias(true);

                long now = android.os.SystemClock.uptimeMillis();
                if (mMovieStart == 0) {   // first time
                    mMovieStart = now;
                }
                if (mMovie != null) {
                    int dur = mMovie.duration();
                    if (dur == 0) {
                        dur = 1000;
                    }
                    int relTime = (int)((now - mMovieStart) % dur);
                    mMovie.setTime(relTime);
                    mMovie.draw(canvas, getWidth() - mMovie.width(),
                                getHeight() - mMovie.height());
                    invalidate();
                }
            }
        }

      @Override
        protected void onPause() {

            if (mediay2 != null){
                mediay2.stop();
                mediay2.release();
                mediay2=null;
          }

            if(nextsound != null) {
                 if (nextsound.isPlaying()) {

                     nextsound.stop();

                 }
                 nextsound.release();
                 nextsound = null;

            }

            clearAllResources();

            super.onPause();

        }

      }

    i am getting exception in inside myview on sizechnage().... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:50:20.953

尝试加载您的图像配置和使用 BitmapsOptions [http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

# javascript - 如何在 Phonegap 的 div 容器内显示 PDF？

> ID：13290203
> 
> 赞同：5
> 
> 时间：2012-11-08T13:47:01.500
> 
> 标签：javascript, ios, pdf, cordova

我目前正在开发之前由另一位程序员开发的 Phonegap 应用程序。现在他正在使用 ChildBrowser 插件来显示 pdf 文档。

现在我们想要/确实在另一个侧边栏旁边显示 pdf 文件，这就是为什么我需要在另一个 div 中而不是 ChildBrowser 的新窗口中的 pdf。

我尝试使用 pdf.js，pdfobject.js 女巫没有成功。将 PDF 嵌入到 html 对象标签中是可行的，但我无法滚动它。有没有我可能错过的提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-15T09:03:59.093

考虑使用 pds.js 在 HTML5 中呈现 PDF：[https](https://github.com/mozilla/pdf.js) ://github.com/mozilla/pdf.js 或者，将 pdf 作为 iframe 或对象嵌入：[PhoneGap Inline PDF](https://stackoverflow.com/questions/19687089/phonegap-inline-pdf/25844297#25844297)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:42:27.553

我想这篇文章会解决你的问题。

[使用电话间隙打开 pdf](https://stackoverflow.com/a/10481904/1853864)

它解释了如何使用子浏览器插件来查看 pdf 文件，但您需要使用子浏览器到[Android](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)和其他到[iOS](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ChildBrowser)。

# java - 在 windows 任务管理器中更改 java 进程描述

> ID：13290204
> 
> 赞同：6
> 
> 时间：2012-11-08T13:47:10.170
> 
> 标签：java, windows, taskmanager

是否有命令行参数来设置 JVM 报告给 Windows 任务管理器的标题？我所有的 java 进程只显示为 'javaw.exe'，描述为'Java(TM) Platform SE binary'。如果我可以设置一些 -param="This is eclipse" 这样我就可以轻松地将它们区分开来，那就太好了。它会阻止我经常杀死我的 IDE 而不是，例如，tomcat。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T14:06:01.117

您可以破解 JVM 二进制文件，或者您可以实现一个小型二进制应用程序来调用 JVM 而不是批处理文件；除此之外，没有真正的纯Java方式来做到这一点！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:04:30.977

Windows 任务管理器描述栏中的进程取自静态编译成可执行文件的**版本资源中的产品名称。**可执行文件无法将此描述设置为运行时。

您唯一的选择是创建一个本机包装可执行文件，该可执行文件创建具有可配置名称的版本资源。

[例如， exe4j](http://www.ej-technologies.com/products/exe4j/overview.html)就是这样做的。免责声明：我公司开发exe4j。

# c++ - 创建邻接列表时出现分段错误

> ID：13290206
> 
> 赞同：0
> 
> 时间：2012-11-08T13:47:17.107
> 
> 标签：c++, pointers, struct

我正在为图形结构创建一个邻接列表。下面是我的代码片段，当我在 gdb 中运行时，它给出“程序收到信号 SIGSEGV，分段错误。std::_List_node_base::hook () 中的 0x0040340f”错误。有人可以指出代码中的错误。

```
struct graph{
    list<int> vertex;
}*v;

list<int>::iterator it;
cin>>num_vertices;

v = new  graph[num_vertices];

if (v == 0)
    cout << "Error: memory could not be allocated";

for(i=1;i<=num_vertices;i++)
{
    cin>>num_connected;
    for(j=1;j<=num_connected;j++)
    {
        cin>>m;
        (v+i)->vertex.push_back(m);
    }
}
for(i=1;i<=num_vertices;i++)
    for(it= (v+i)->vertex.begin();it!= (v+i)->vertex.end();it++)
        cout<<*it<<"->"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:20:24.397

C++ 数组是从零开始的，所以应该使用`[0]`to来索引`[num_vertices-1]`。如果您将循环更改为从 0 变为 num_vertices-1

```
for(i=0;i<num_vertices;i++) 
```

您的代码应该可以工作。

当前的故障可能是由循环取消引用的最后一次迭代引起的，`(v+num_vertices)`这是数组之外的内存。写入尚未分配的内存会产生未定义的行为，因此段错误不会令人惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:06:22.367

我在这里没有看到任何问题，我编译了你的程序（只是声明了你正在使用的变量）并且它工作正常

```
#include <iostream>
#include <list>

using namespace std;

struct graph{
        list<int> vertex;
}*v;

int main ()
{
    int num_vertices = 0;
    int num_connected = 0;

    list<int>::iterator it;
    cin>>num_vertices;

    v = new  graph[num_vertices];

    if (v == 0)
        cout << "Error: memory could not be allocated";

    for(int i=0;i<num_vertices;i++)
    {
        cin>>num_connected;
        for(int j=1;j<=num_connected;j++)
        {
            int m;

            cin>>m;
            (v+i)->vertex.push_back(m);
        }
    }
    for(int i=0;i<num_vertices;i++)
        for(it= (v+i)->vertex.begin();it!= (v+i)->vertex.end();it++)
            cout<<*it<<"->";

} 
```

# java - 确定包含来自 Sun 错误数据库的修复的 JRE 版本

> ID：13290209
> 
> 赞同：0
> 
> 时间：2012-11-08T13:47:18.547
> 
> 标签：java, sun

**更新**

以[http://bugs.sun.com/view_bug.do?bug_id=6857057](http://bugs.sun.com/view_bug.do?bug_id=6857057)为例。我们在 JRE 6u17 中见证了这一点。我如何知道哪个版本的 JRE 包含修复？互联网上的普遍共识似乎是 6u18 - 但是我如何从 bug 数据库中得知这一点？它说在 6u16-rev 中已修复，但我不知道“-rev”是什么意思。它还说它仍然影响版本 6u18 - 那么是否有一些时间膨胀？

**笔记**

最初我假设我需要针对更新版本的 JDK 进行构建，所以问我如何知道哪个版本的 JDK 包含修复程序。我已经根据 mindas 更新了这个问题，解释它实际上是包含修复的 JRE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:42:31.043

您需要了解**静态**链接和**动态**链接之间的区别。在 Java 世界中，所有 JVM 都必须在引用类时加载它们。换句话说，针对旧 JDK 版本编译的代码没有关于旧 JDK 如何实现特定方法的信息。

除非方法签名已更改（从您的 bugs.sun.com 链接我假设它没有），否则您不需要重建您的类。即使有，您也会收到不同的错误（类似于`NoSuchMethodException`）。

# html - 使用 Selenium WebDriver (Java) 翻阅笔记本 (HTML5) 上的页面

> ID：13290211
> 
> 赞同：2
> 
> 时间：2012-11-08T13:47:21.633
> 
> 标签：html, animation, selenium, drag-and-drop, webdriver

我想翻阅笔记本，**不使用任何按钮**或类似的东西，而是实际单击页面的活动元素或拖动页面以进入下一个。[笔记本和这个](http://www.20thingsilearned.com/en-US/foreword/3)类似。我尝试了许多不同的方法，但都失败了。

我试图开始工作的代码是：

```
 WebElement page= driver.findElement(By.xpath("//*[@id='pages']/section[4]/div"));
    Actions kkk = new Actions(driver);
    Actions flip= kkk.moveToElement(page, 780, 200);
    flip.click().build().perform(); 
```

我还尝试了下一种方法：

```
flip.perform();
Thread.sleep(200); //to allow the mouse to hover and activate the page
flip.click().perform(); 
```

没有任何效果，鼠标悬停在必要的地方，如果我尝试在同一个地方单击，它只会重置并且页面会平滚。

另外，有没有办法在不使用偏移（坐标）的情况下找到必要的位置（元素的活动点），我想不出任何其他方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:06:58.897

这似乎更符合`drag and drop`.

尝试做这样的事情

```
WebElement draggable = browser.findElement(By.xpath("//*[@id='pages']/section[4]/div")); 
new Actions(browser).dragAndDropBy(draggable, 200, 10).build().perform(); 
```

基于

`org.openqa.selenium.interactions.Actions.dragAndDropBy(WebElement source, int xOffset, int yOffset)`

**更新**

* * *

或者这样

```
WebElement element = driver.findElement(By.name("source"));
WebElement target = driver.findElement(By.name("target"));

(new Actions(driver)).dragAndDrop(element, target).perform(); 
```

**更新 2**

* * *

或者这样

```
Actions builder = new Actions(driver);

   Action dragAndDrop = builder.clickAndHold(someElement)
       .moveToElement(otherElement)
       .release(otherElement)
       .build();

   dragAndDrop.perform(); 
```

# php - 如何使用array_filter过滤掉偶数索引值？

> ID：13290217
> 
> 赞同：0
> 
> 时间：2012-11-08T13:47:39.160
> 
> 标签：php, arrays, array-filter

我试图通过偶数索引号过滤掉值，但进展不顺利。$date 作为完整数组返回，但缺少最后一个索引。这是因为我使用了explode()吗？

这是我的代码；

```
$route = "Dest A:0900:Dest B:0930:Dest C:1000";

$route_array = explode(":", $route);

foreach($route_array as $key){
    if(!($key & 1)){
        $date[] .= $key;
    }
}
return $date; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:54:03.410

你的循环应该是这样的

```
foreach($route_array as $k=>$key){
    if(($k+1)%2 == 0){
        $date[] = $key;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:55:52.847

我相信这是问题所在：

```
foreach($route_array as $key) 
```

您调用 variable `$key`，但它实际上将包含该数组元素的值。

相反，您应该执行以下操作：

```
foreach($route_array as $key => $value) 
```

然后检查 $key 是奇数还是偶数。现在 $value 将包含目的地或时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:00:29.237

谢谢各位的回答...

好的，五分钟后，我有一个灯泡时刻，想出了一个解决方案；

```
$route = "Dest A:0900:Dest B:0930:Dest C:1000";
$route_array = explode(":", $route);

foreach($route_array as $key => $value){
    if(!($key & 1)){
        $date[] .= $route_array[$key];
    }
}
return $date; 
```

# android - Android软键盘隐藏分割栏

> ID：13290228
> 
> 赞同：2
> 
> 时间：2012-11-08T13:48:09.470
> 
> 标签：android, android-layout

我有一个在运行时加载片段的活动。当我启动应用程序时，活动会加载一个带有 EditText 的片段。我将 ActionBarSherlock 与 splitActionBarWhenNarrow 一起使用，所以我有一个拆分栏（屏幕底部的操作栏）。当 EditText 获得焦点并加载软键盘时，它会位于拆分栏的顶部，将其隐藏。在操作栏上，我还使用 NAVIGATION_MODE_LIST 并使用下拉菜单加载另一个片段。当我加载另一个片段时，下部操作栏正确显示在软键盘顶部，即使我转到另一个片段，它仍然可以正常工作。我将添加一些屏幕截图以清除它：

第一个片段加载器，使用软键盘看不到拆分栏

![在此处输入图像描述](../Images/4a527bdb92a0355090fd899399d5d1e7.png)

使用操作栏导航加载第二个片段后

![在此处输入图像描述](../Images/f698f5dbf09fbd144eef5c5e4d8a1e74.png)

重新加载另一个片段，动作栏仍然可见

![在此处输入图像描述](../Images/2e12a0877e3289c6181c64f82a0c3ab7.png)

我尝试使用最少代码的测试项目来加载片段，并且行为是相同的，分割栏被软键盘隐藏。我怎样才能让它从一开始就显示拆分栏？

编辑： android:windowSoftInputMode="adjustResize" 不会改变这种行为

活动布局：

```
<it.bem.remailr.MyFrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/fragment_container"
android:orientation="horizontal"
android:background="@drawable/bg_no_repeat"
android:layout_width="fill_parent"
android:layout_height="fill_parent" /> 
```

片段布局：

```
<it.bem.remailr.MyRelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<EditText
    android:id="@+id/editText1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="top|left"
    android:inputType="textMultiLine|textNoSuggestions"
    android:windowSoftInputMode="adjustPan"
    android:background="#00000000"
    android:hint="@string/text_hint"
    android:scrollHorizontally="false" >
</EditText>

<ProgressBar
    android:id="@+id/progressBar1"
    style="?android:attr/progressBarStyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:13:49.533

您是否尝试在显示输入法之后立即向主线程发布布局请求？`onSizeChanged()`您可以通过覆盖root 中的回调来确定是否显示/隐藏输入法`View`。作为一个肮脏的概念证明，您可以在给定的持续时间后发布该布局请求（确保您事先显示输入法）。

您还可以使用[ViewServer](https://github.com/romainguy/ViewServer)在您的设备上运行`hierarchyviewer` **，而不是在模拟器上**运行以确定`View`存在的 s（即，如果候选人覆盖了拆分的操作栏）。据我记得，候选视图被添加到`Dialog`包含`KeyboardView`无论如何的根，因此拆分操作栏很可能就在空格键下方，而不是在候选视图下方。

为了实现`onSizeChanged()`，您必须扩展位于`ViewGroup`层次结构根部的类`View`。例如，您可能有 a`LinearLayout`作为您的根`ViewGroup`，而您的所有`View`s 都是 this 的子级。然后你要做的是创建一个名为`MyLinearLayout`extends的新类`LinearLayout`，`MyLinearLayout`作为你的根`View`放在 xml 文件中，然后实现`onSizeChanged()`回调。然后在显示输入法时由系统调用。

# openmp - 使用 OpenMP 进行缩减

> ID：13290245
> 
> 赞同：20
> 
> 时间：2012-11-08T13:48:53.097
> 
> 标签：openmp

我正在尝试使用 openmp 计算二维矩阵的平均值。这个二维矩阵实际上是一个图像。

我正在对数据进行线程分割。例如，如果我有`N`线程而不是处理行数/`N`行数`thread0`，等等。

我的问题是：我可以将 openmp 缩减子句与“ `#pragma omp parallel`”一起使用吗？

```
#pragma omp parallel reduction( + : sum )
{
    if( thread == 0 )
       bla bla code 
       sum = sum + val;

    else if( thread == 1 )
       bla bla code
       sum = sum + val;
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-08T14:13:03.730

是的，您可以 - 缩减条款适用于整个并行区域以及单个`for`工作共享结构。这允许例如减少在不同并行部分中完成的计算（重组代码的首选方式）：

```
#pragma omp parallel sections private(val) reduction(+:sum)
{
   #pragma omp section
   {
      bla bla code
      sum += val;
   }
   #pragma omp section
   {
      bla bla code
      sum += val;
   }
} 
```

您还可以使用 OpenMP`for`工作共享构造在团队中的线程之间自动分配循环迭代，而不是使用部分重新实现它：

```
#pragma omp parallel for private(val) reduction(+:sum)
for (row = 0; row < Rows; row++)
{
   bla bla code
   sum += val;
} 
```

请注意，归约变量是私有的，它们的中间值（即它们在`parallel`区域末端归约之前所持有的值）只是部分的，不是很有用。例如，下面的串行循环不能（很容易？）通过归约操作转换为并行循环：

```
for (row = 0; row < Rows; row++)
{
   bla bla code
   sum += val;
   if (sum > threshold)
      yada yada code
} 
```

一旦 的累加值超过 的值，`yada yada code`应该在每次迭代中执行。当循环并行运行时， 的私有值可能永远不会达到，即使它们的总和达到了。`sum``threshold``sum``threshold`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T20:14:53.237

在您的情况下，`sum = sum + val`可以解释为`val[i] = val[i-1] + val[i]`一维数组（或`val[rows][cols] = val[rows][cols-1] + val[rows][cols]`二维数组），这是一个[前缀和](http://en.wikipedia.org/wiki/Prefix_sum)计算。

归约是前缀和的一种解决方案，您可以对任何交换关联运算符使用归约，例如“+”、“-”、“*”、“/”。

# jquery - jQuery 功能改进

> ID：13290246
> 
> 赞同：0
> 
> 时间：2012-11-08T13:48:57.387
> 
> 标签：jquery, function, jquery-validate

我该如何改进下一个功能？

```
function treatFormLinks () {
    if (!$('#One input').valid() ) {
        $('#LinkOne').addClass('hasErrors');    
    }
    if (!$('#Two input').valid() ) {
        $('#LinkTwo').addClass('hasErrors');    
    }
    if (!$('#Three input').valid() ) {
        $('#LinkThree').addClass('hasErrors');  
    }
};

$("#Submit").click(function () {
    treatFormLinks();
}); 
```

例如，如果我有一百个 ( `#One`, `#Two`.etc) 容器，那么为每个案例创建条件将是愚蠢的。那么我怎样才能使它不那么“依赖于 id 选择器”。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:58:02.963

您可以尝试使用`each`和`toggleClass`方法。

```
function treatFormLinks () {
   $('#One, #Two, #Three').each(function(){
      $('#Link'+this.id).toggleClass('hasErrors', !$('input', this).valid())
   })
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:05:28.433

将输入和链接放在 jQuery 对象中，以便相关元素具有相同的索引。然后：

```
$inputs.each(function ( i ) {
    $links.eq( i ).toggleClass( 'hasErrors', $( this ).valid() );
}); 
```

# java - 谷歌图表 API 文档？

> ID：13290250
> 
> 赞同：0
> 
> 时间：2012-11-08T13:49:00.660
> 
> 标签：java, android, charts

我正在尝试使用 Google Chart API。我只是想建立一个字符串链接以加载到 webview 中。我在哪里可以获得关于哪些标签可用的文档？

```
cht= Type,
chs=  Size 
```

ETC...

某处是否有完整的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:53:26.807

我相信它现在在可视化 API 下。

这是你正在寻找的任何机会吗？

[https://developers.google.com/chart/interactive/docs/reference](https://developers.google.com/chart/interactive/docs/reference)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:07:37.413

这就是您要查找的内容：[https ://developers.google.com/chart/image/docs/making_charts](https://developers.google.com/chart/image/docs/making_charts)

请记住，**它现在已弃用**。

# android - 我可以使用一种布局和 2 个活动吗？

> ID：13290255
> 
> 赞同：2
> 
> 时间：2012-11-08T13:49:10.407
> 
> 标签：android, listview, layout, android-activity

我可以使用一种布局和 2 个活动吗？我有一个名为“download.java”的活动，一个名为“upload.java”的活动和一个名为“main_site.xml”的布局。

“download.java”是 MainActivity 它显示了 2 个按钮和一个空的列表视图——>“下载”、“上传”、“lv”

当我单击上传时，第二个活动“上传”将启动，第二次启动“main_site.xml”，列表视图将充满数据。

现在我有 2 次“main_site.xml”一个在另一个上面......我怎样才能填充 listiview 而不是打开一个“新”布局？

**下载.java 中的 OnCreate**

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main_site);

    if (android.os.Build.VERSION.SDK_INT > 9) {
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
      }

    Button download = (Button)findViewById(R.id.cmd_download);
    download.setOnClickListener(new View.OnClickListener(){

        public void onClick(View v){

            connectFTP("176.28.25.46");
            listItems(); 

            } 
    });

    Button upload = (Button)findViewById(R.id.cmd_upload);
    upload.setOnClickListener(new View.OnClickListener(){

        public void onClick(View v){            
            Intent myIntent = new Intent(MainSite.this, upload.class);
            MainSite.this.startActivity(myIntent);
            } 
    });
} 
```

**upload.java 中的 OnCreate**

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_site);
    myPath = (TextView)findViewById(R.id.path);

    root = Environment.getExternalStorageDirectory().getPath();

    getDir(root);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:26:37.890

您应该只使用同一活动中的代码更新 ListView 的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:58:39.527

**是**的，你可以做到。你没有理由不能这样做。如果您的活动设计布局在这两个活动中相同（或与您在应用程序中的数量一样多），您可以在不同的活动中使用相同的 layout.xml 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-07T06:32:28.147

使用静态数组列表将数据从上传传递到下载活动并完成上传活动并根据条件使用下载活动的 onResume() 中的静态数组列表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T13:50:53.460

是的，你可以，你只需要使用`<include>`你的标签，并再次给出一个`@+id/YOUR_NAME`重复使用相同的布局。

# facebook - Facebook App Store 是否支持 iOS 5 应用程序？

> ID：13290261
> 
> 赞同：0
> 
> 时间：2012-11-08T13:49:32.433
> 
> 标签：facebook, ios5, submission

请问谁能帮我看看 Facebook App Store 是否支持 iOS 5 应用程序？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:59:29.817

对于符合 Facebook 应用中心资格的应用程序，它必须是（[来源](https://developers.facebook.com/docs/appcenter/guidelines/)）：

*   Facebook.com 上画布页面中的应用
*   为 iOS 或 Android 构建的移动应用程序，使用 iOS 单点登录或 Android 单点登录
*   使用 Facebook 登录并具有立即登录的个性化体验的移动网络应用程序
*   使用 Facebook 登录并具有立即登录的个性化体验的网站

在这种情况下，Facebook Single Sign On 并不意味着 iOS 6 中的 Facebook 集成（[源代码](https://developers.facebook.com/blog/post/640/)、[教程](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)），因此，如果 iOS 5 应用程序**使用 Single Sign On**则符合条件。

# mysql - MySQL中是否有保护字段免受更改的方法？

> ID：13290268
> 
> 赞同：3
> 
> 时间：2012-11-08T13:49:56.347
> 
> 标签：mysql

我们得到这个每日数据馈送。（我们无法控制原始数据，因此不能要求他们更正数据库。）

客户记录包含美国的地址。街道地址、城市、州和邮政编码。

最后，我们将数据库中的数据用于营销部门。他们有时会发现地址不正确或不完整，并希望对其进行更改。但是，当然，下一个数据馈送会进来并消除他们的更正。

MySQL 中是否有一种方法可以保护某些字段不被更改，有点像电子表格中的受保护单元格。这是 MySQL 记录布局的一些字段名称：

> 地址1 地址2地址3城市州
> 邮政编码

如果我在此旁边创建了标记为“Y”或“N”作为受保护字段的附加字段怎么办：

> address1
> address1_flag
> address2
> address2_flag
> address3
> address3_flag
> city
> city_flag
> state
> state_flag
> zipcode
> zipcode_flag

因此，当营销部门更正例如邮政编码时，它会将 zipcode_flag 设置为“Y”，意思是，是的，保护字段邮政编码不被进一步更改。如果原始数据馈送稍后确实得到更正，那么如果营销部门数据库中的邮政编码与原始字段匹配，则 zipcode_flag 保护将更改为“N”。

这听起来像是从日常供稿中管理营销部门数据库的正确方法吗？或者 MySQL 中是否有另一种方法或功能可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:54:03.047

您可以在列级别管理权限：http: [//dev.mysql.com/doc/refman/5.1/en/grant.html](http://dev.mysql.com/doc/refman/5.1/en/grant.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T13:54:40.860

我认为没有“受保护”标志或功能，但您可以采取一些途径来实现您的目标。

第一个也是最具体的将是在 MySQL 中创建一个“受限用户”。要限制用户，您可以/将只授予`SELECT`您不想修改的列的权限。为此，您将使用：

```
GRANT SELECT(zipcode) ON addresses TO restrictedUser; 
```

[您可以在此处](https://stackoverflow.com/questions/4531320/mysql-how-to-apply-grants-to-column)查看一个很好的示例，或在[手册](http://dev.mysql.com/doc/refman/5.0/en/grant.html)中获取详细信息。

第二种方法是创建一个选择/插入/更新的过程。这可能有点矫枉过正，但可以根据您的需要完成，并且不需要修改用户权限。

选择和更新过程的一个简单示例是（未测试）：

```
CREATE PROCEDURE select_addresses ()
BEGIN 
   SELECT address1, zipcode FROM addresses;
END 

CREATE PROCEDURE update_addresses ( IN recordID INT(11), IN newAddress1 VARCHAR(255) )
BEGIN
    SET @query := CONCAT("UPDATE addresses SET address1 = '", newAddress1, "' WHERE id = ", recordId);
    PREPARE stmt FROM @query;
    EXECUTE stmt;
END 
```

这将允许用户通过调用选择您指定允许他们读取的任何列`select_addresses()`，然后通过`update_addresses()`. 您必须添加几层逻辑才能仅更新已设置的变量等 - 因此使用过程实际上可能是矫枉过正 =P

# microsoft-sync-framework - 同步框架 2.1 同一张表上的多个过滤范围

> ID：13290272
> 
> 赞同：1
> 
> 时间：2012-11-08T13:50:10.317
> 
> 标签：microsoft-sync-framework

我正在同步数据库。有一个主数据库和其他客户端数据库。

我从模板创建了一个过滤范围。设置说 UserID = 1 然后在服务器和客户端数据库 1 上创建此范围

再次

我创建了一个与模板名称不同的新过滤范围。设置说 UserID = 2 然后在服务器和客户端数据库 2 上创建此范围

但是当我运行同步时，它正在与数据库客户端 DB 1 和客户端 DB 2 同步 UserID =1

这是我的代码：

```
 private static void CreateTemplateScope(SqlConnection serverConn, string Template, string ScopeName, string TableName, string Condition, string ColumnName, string Operator, string FilterValue)
    {

        DbSyncScopeDescription scopeDesc = new DbSyncScopeDescription(Template);

        scopeDesc.UserComment = "N/A";

        DbSyncTableDescription customerDescription =
            SqlSyncDescriptionBuilder.GetDescriptionForTable(TableName, serverConn);
        scopeDesc.Tables.Add(customerDescription);

        SqlSyncScopeProvisioning serverTemplate = new SqlSyncScopeProvisioning(serverConn, scopeDesc, SqlSyncScopeProvisioningType.Template);

        serverTemplate.Tables[TableName].AddFilterColumn(ColumnName);

        serverTemplate.Tables[TableName].FilterClause = "[side].[" + ColumnName + "] " + Operator + " " + FilterValue;

        serverTemplate.SetCreateProceduresForAdditionalScopeDefault(DbSyncCreationOption.CreateOrUseExisting);

        serverTemplate.Apply();

        SqlSyncScopeProvisioning serverProvRetail = new SqlSyncScopeProvisioning(serverConn);
        serverProvRetail.PopulateFromTemplate(ScopeName, Template);
        serverProvRetail.Apply();

    } 
```

任何帮助表示赞赏。

如果您想了解更多详情，请告诉我

# javascript - 将对象设置为 cookie

> ID：13290275
> 
> 赞同：4
> 
> 时间：2012-11-08T13:50:17.663
> 
> 标签：javascript, html, cookies, web

我正在使用 jquery 开发客户端 Web 应用程序

我想存储所有访问过的页面，我使用 cookie

所以，我有两个元素要存储：

*   页面网址
*   页面标题

我开始在 cookie 中创建数据：

**索引.html：**

```
if(!$.cookie("history")){
        var url_history = document.location;
        var title_history = $("html title").text();
        $.cookie("historyURL", url_history);
        $.cookie("historyTITLE", title_history);
    } 
```

**另一个页面.html：**

```
var url_history = document.location;
var title_history = $("html title").text();
$.cookie("historyURL", url_history);
$.cookie("historyTITLE", title_history); 
```

问题是 cookie 的新值会覆盖旧值。

我想我应该设置一个对象，而不是字符串，例如：

```
var objHistory = [];
objHistory.push({url:document.location, title: $("html title").text()})
$.cookie("history", objHistory); 
```

现在我有另一个问题：

我无法从 cookie 中检索我的对象

当我试图从 cookie 中获取我的对象时，它显示一个字符串“对象”而不是对象

是否可以在 cookie 中设置对象？

感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T13:53:28.420

您始终可以将对象字符串化为 JSON：

```
var jsonHistory = JSON.stringify(objHistory);
$.cookie("history", jsonHistory); 
```

**编辑**

简单演示（在 Chrome 和 Firefox 中测试）：

```
 (function(){
            var o = JSON.parse('{"id":1,"value":"code.google.com"}');
            var e = 'Thu Nov 10 2012 15:44:38';
            document.cookie = 'myObj='+ JSON.stringify(o) +';expires=' + e;
        })() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T14:02:01.850

cookie（具有有限的 4K 大小）是我尝试存储访问过的页面数组的最后一个位置。由于其局限性，cookie 将是我尝试使用的最后一种存储方法。如果您在 HTML5 中，为什么不为此目的使用 localStorage？

教程：[http ://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)

localStorage 仅处理 STRING 键/值对。一种解决方法是在存储对象之前对其进行字符串化，然后在检索时对其进行解析：

```
var testObject = { 'URL': 1, 'TITLE': 2 };
localStorage.setItem('testObject', JSON.stringify(testObject));
var retrievedObject = localStorage.getItem('testObject');
console.log('retrievedObject: ', JSON.parse(retrievedObject)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-14T09:47:18.120

我建议不要使用 cookie 来存储您正在使用的数据类型，因为 cookie 基本上是为了存储非常少量的数据，例如一些密钥、id ...

您可以改用本地存储，因为本地存储限制为 5 MB，这也是可扩展的。此外，本地存储比 cookie 更安全，因为数据不会发送到服务器。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-08T14:06:13.350

您只能存储字符串。一种非常有限的字符串类型。您需要使用一些分隔符来存储这些值。查看[cookie 中允许使用的字符，](https://stackoverflow.com/questions/1969232/allowed-characters-in-cookies)您可以使用哪些字符。

# python - 为函数指定 matplotlib 图形和轴的惯用方法是什么？

> ID：13290277
> 
> 赞同：1
> 
> 时间：2012-11-08T13:50:22.017
> 
> 标签：python, matplotlib

我正在尝试做的事情可以这样写：

```
import pylab
class GetsDrawn(object):
    def __init__(self):
        self.x=some_function_that_returns_an_array()
        self.y=some_other_function_that_returns_an_array()

    # verison 1: pass in figure/subplot arguments
    def draw(self, fig_num, subplot_args ):
        pylab.figure(fig_num)
        pylab.subplot( *subplot_args )
        pylab.scatter( self.x, self.y) 
```

即我可以通过图形编号和子图配置告诉对象“在哪里”绘制自己。

我怀疑从长远来看，传递 pylab 对象的版本会更加灵活，但不知道要为函数提供什么类型的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:07:45.837

我会初始化`__init__`. 将它们保存在列表中，例如`self.ax`. 然后在该`draw`方法中，您可以将绘图命令直接发送到所需的轴对象：

```
import matplotlib.pyplot as plt

class GetsDrawn(object):
    def __init__(self):
        self.x=some_function_that_returns_an_array()
        self.y=some_other_function_that_returns_an_array()
        self.ax = []
        for i in range(num_figures):
            fig = plt.figure(i)
            self.ax.append(plt.subplot(1, 1, 1))

    # verison 1: pass in figure/subplot arguments
    def draw(self, fig_num, subplot_args ):
        ax = self.ax[fig_num]
        ax.subplot( *subplot_args )
        ax.scatter( self.x, self.y) 
```

顺便说一句，`pylab`对于交互式会话来说是可以的，但`pyplot`推荐[用于脚本](http://matplotlib.org/faq/usage_faq.html#matplotlib-pylab-and-pyplot-how-are-they-related)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:23:09.927

对于脚本，通常首选使用面向对象的 api。

例如，您可以让您的函数接收一个数字：

```
def draw(fig, sub_plot_args,x,y):
    ax = fig.subplot(*sub_plot_args)
    ax.scatter(x,y) 
```

如果您的函数实际上只在一个轴上绘制，您甚至可以将其作为对象传递：

```
def draw(ax,x,y):

    ax.scatter(x,y) 
```

要创建图形，请使用：

```
import matplotlib.pyplot as plt
fig = plt.figure() 
```

例如，要创建一个带有一个子图的图形，请使用：

```
fig, ax = plt.subplots() 
```

如果我没记错的话，最后一个命令仅存在于最新版本中。

# node.js - 使用 tagoup 时撇号出错

> ID：13290280
> 
> 赞同：0
> 
> 时间：2012-11-08T13:50:30.217
> 
> 标签：node.js, coffeescript, html-parsing, tag-soup

我正在尝试在 node.js Web 应用程序中获取网站的描述。它似乎运行良好，但是 node.js 似乎在 NCR 字符方面存在问题（http://en.wikipedia.org/wiki/Numeric_character_reference）。我为链接抓取器提供的代码如下所示

```
getInfo:(url) ->
  errorMessage = 'Invalid Link'

  request(url, (error, response, body)->
    if (!error && response.statusCode == 200)
      handler = new htmlparser.DefaultHandler((err, dom) ->
        if (err)
          res(error: errorMessage)
        else
          imgs = select(dom, 'img')
          titletags = select(dom,'title')
          descripTags = select(dom,'meta')
          filteredTags = _.filter(descripTags,(tag) -> tag.attribs.name? && tag.attribs.name == 'description')

          uri = response.request.uri.href

          mapFunc =(imgSrc) ->
            pattern = /^((http|https|ftp):\/\/)/
            img = imgSrc.attribs.src
            if (!pattern.test(img)) then uri.substring(0,uri.length-1) + img else img

          res(
            images: _.filter(_.map(imgs,mapFunc),(img)-> (img != '')) || []
            title: titletags[0].children[0].raw || ''
            description: if filteredTags.length != 0 then filteredTags[0].attribs.content || '' else ''
          )
      )
      parser = new htmlparser.Parser(handler)
      parser.parseComplete(body)
    else
      res(error: errorMessage)
  ) 
```

例如，如果我输入以下 URL 以获取信息表单 (http://www.zdnet.com)，则描述将为`ZDNet&#039;s breaking news, analysis, and research keeps business technology professionals in touch with the latest IT trends, issues and events.`. 撇号是问题（表示为`&#039;`）

我的问题是，为什么没有任何库正确解析有效的 HTML NCR 并将它们转换为等效的字符串，如果没有办法解决这个问题，使用一些替换所有出现的 NCR 是否安全？其他图书馆？

我正在使用的库如下所述

```
request = require 'request'
htmlparser = require 'htmlparser'
select = require('soupselect').select
_ = require 'underscore' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:36:44.460

最终使用[https://github.com/minchenkov/node-html-encoder](https://github.com/minchenkov/node-html-encoder)库来解码字符串，工作正常（不知道为什么 node.js 标准库默认不 html 解码字符串）

# database - 这违反了 3NF 吗？

> ID：13290281
> 
> 赞同：0
> 
> 时间：2012-11-08T13:50:33.997
> 
> 标签：database, normalization

我需要将`Shipping address`,`Shipping postcode`和放入一张表中`Billing Address`。`Billing Postcode``Customer`

这违反了 3NF 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:02:49.170

> 这违反了 3NF 吗？

*非常*严格地说：是的。

实际上：没有。

如果您**不**计划：

*   在您的数据库中拥有专用的“地址”实体（即：当地址只不过是附加到客户记录的自由文本时）
*   每个客户拥有可变数量的地址（但只有两个）
*   必须为您要选择的每个地址写一个 LEFT JOIN...

...然后坚持你的设计。

将地址规范化到单独的表中与将名字和姓氏规范化到单独的表中一样明智，因为它们往往会重复。不要这样做。

* * *

考虑“实用”

```
SELECT
  CustomerId
  CustomerName,
  COALESCE(BillingAddress, ShippingAddress) AS BillingAddress,
  COALESCE(BillingPostcode, ShippingPostcode) AS BillingPostcode
FROM
  Customer 
```

与“完全标准化”

```
SELECT
  c.CustomerId
  c.CustomerName,
  COALESCE(bill.Address, ship.Address) AS BillingAddress,
  COALESCE(bill.Postcode, ship.Postcode) AS BillingPostcode
FROM
  Customer AS c
  -- join customer-to-address-resolution for billing
  LEFT JOIN CustomerAddress AS custAddrB ON custAddrB.CustomerId = c.CustomerId
                                            AND custAddrB.AddressType = "Billing"
  LEFT JOIN Address         AS      bill ON bill.AddressId = custAddrB.AddressId
  -- join customer-to-address-resolution for shipping
  LEFT JOIN CustomerAddress AS custAddrS ON custAddrS.CustomerId = c.CustomerId
                                            AND custAddrS.AddressType = "Shipping"
  LEFT JOIN Address         AS      ship ON ship.AddressId = custAddrS.AddressId 
```

此外，后一种系统让您在~~理论上~~能够为每个客户拥有多个送货地址。

后一种系统的最大好处是：如果他们改变了街道的名称，您需要做的就是更新一条记录。换句话说：没有任何好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:04:19.527

是的，因为您将使用这些地址创建冗余，或者您需要在数据库中有 NULL 值（例如，当运输和帐单地址相同时），这是 3NF 禁止的。更好地使用这样的东西：

```
table customer
... | ... | shipping_address_id | billing_address_id |
----+-----+---------------------+--------------------+
 x  |  y  | 23                  | 24                 |
 x  |  y  | 25                  | 25                 |
...

table address
id | address | postcode | city | country |
---+---------+----------+------+---------+
23 | aaaa    | 1234     | foo  | bar     |
24 | sdfsd   | 2345     | sdf  | sdf     |
.... 
```

现在您可以通过 join 获取地址

# c++ - 如何在 CMake 中以可移植方式获取 libstdcxx 隐式链接目录

> ID：13290282
> 
> 赞同：1
> 
> 时间：2012-11-08T13:50:32.907
> 
> 标签：c++, gcc, hyperlink, cmake, libstdc++

背景是我们的项目必须使用不同的 GCC 版本（**ABI 可能不兼容**），并且我们的构建服务器中安装了多个版本的 GCC。我们使用包装器项目来设置`LD_LIBRARY_PATH`、准备环境`export LD_LIBRARY_PATH=/path/to/gcclib/`并在包装器脚本中启动我们的应用程序。

由于使用了不同风格的 gcc/g++，我们想知道是否有一种简单的方法来获取**libstdc++.so**链接的隐式库路径。例如，其中一个 GCC 工具安装在*/opt/gcc4/gcc4.7/bin/g++*中，而 libstdc++.so 可以在*/opt/gcc4/gcc4.7/lib/*中找到，而另一个 GCC 变体可能位于在*/usr/local/bin/g++*和*/usr/lib/libstdc++.so*中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:31:14.370

我想您在设置`CMAKE_{C,CXX}_COMPILER`vars 时指定了绝对路径。在这种情况下，您可以使用它来获取库目录：

```
get_filename_component(GCC_PATH ${CMAKE_C_COMPILER} PATH)
#now ${GCC_PATH} contains "/opt/gcc4/gcc4.7/bin", for example
set(LIBSTD_PATH "${GCC_PATH}/../lib") 
```

对于系统编译器，您可以使用以下`if`语句：

```
if(GCC_PATH STREQUAL /usr/local/bin)
set(LIBSTD_PATH "/usr/lib")
endif() 
```

# ssis - SSIS DataFlowTask 使用记录集而不是记录

> ID：13290285
> 
> 赞同：1
> 
> 时间：2012-11-08T13:50:50.347
> 
> 标签：ssis, dataflowtask

我将 SSIS 2012 与具有数据源和 Ole DB Sql 任务的数据流任务一起使用。数据源正在创建一组 Id { 1,2,3, etc }，其中 Ole DB Sql 任务删除另一个数据库表中的记录。我在 Sql Profiler 中看到的是每个 Id 的删除命令，这是预期的，因为它正在逐条记录地工作。我最多可以获得 10,000 条记录。

有什么方法可以将数据源的输出作为一个集合使用并说：

```
delete from Table1 where Id in { set of Id's } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:05:14.257

你不能在 SSIS 中这样做。

事实上，您可以构建一个表达式并在 SSIS 中执行该表达式，但您不想这样做。表达式的字符数是有限的，而且在维护时它们是一团糟。

有些事情最好直接在存储过程中完成，而另一些事情在 SSIS 中更好。SSIS 的艺术是知道何时在 SSIS 或程序中执行此操作。

祝你好运！

# html - 在这两个列 CSS 布局中，每个 DIV 不能是 50% 吗？

> ID：13290287
> 
> 赞同：0
> 
> 时间：2012-11-08T13:50:59.513
> 
> 标签：html, css

## 问题

`DIV`如果两个宽度都是，则第二个是换行`50%`，但是如果我将*其中一个*宽度设为，`DIVs` `49%`它将布局为两列。这是预期的行为还是我做错了什么？

## CSS

```
.box
{
    display: block;
    width: 100%;
    padding: 0;
}

.box.twocolumn .column1
{
    display: inline;
    float: left;
    width: 50%;
    padding: 0;
    margin: 0;
}

.box.twocolumn .column2
{
    display: inline;
    float: left;
    width: 50%;
    padding: 0;
    margin: 0;
} 
```

## HTML

```
<div class="box">
    <div class="box twocolumn">
        <div class="column1">
            <label>
                Start Date:</label>
            <asp:TextBox ID="StartDate" CssClass="datepicker" runat="server"></asp:TextBox>
        </div>
        <div class="column2">
            <label>
                End Date:</label>
            <asp:TextBox ID="EndDate" CssClass="datepicker" runat="server"></asp:TextBox>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:50:23.653

你的问题很模糊，但我试着给出一个可能解决你问题的答案：

首先，您应该始终包含正确的文档类型，以使所有浏览器的行为方式相同。推荐的一个是`<!DOCTYPE html>`。它适用于所有浏览器，甚至 IE6。

您还必须注意可能的[box-models](http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug)。

Now you can try out to set the `box-sizing` property on your divs like [in this example](http://jsfiddle.net/yuypE/). Also, set the display-type to `display:inline-block`, because `width` is not recognized on inline elements!

The first two divs fit on one line, because the have the `box-sizing:border-box` declaration - both the border and the padding are included into the `50%` width.

The second two divs break because they have standard w3c-box modell. The `50%` width only account for the content, padding and border are added to the width, thus exceeding `100%` total width.

I'm pretty sure this could fix your problem. If this is the case you have some css elsewhere in your code, which modifies your divs (adding border/padding) to make them wrap.

# wpf - 发生服务接收超时后重新连接 WCF 客户端

> ID：13290290
> 
> 赞同：1
> 
> 时间：2012-11-08T13:51:05.167
> 
> 标签：wpf, wcf, communication

我有一个 WCF 服务，它托管在 WFP 应用程序中，它也充当服务的客户端之一。还有一个 WPF 应用程序充当另一个服务客户端。发生超时并且客户端断开连接后，清理资源并再次连接客户端的正确方法是什么。我正在尝试创建新的代理，但我无法使用它们进行通信。我知道我可以增加服务的接收超时，但我需要我的客户能够始终进行沟通，而不仅仅是足够长的时间。我也尝试过不断地向服务人员发送消息，但这是我不想去做的事情。哪种方法最适合客户和服务之间的持续通信？我的服务可能需要与客户连接数月或数年。

任何帮助都将非常有价值。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:15:00.650

您可以捕获 CommunicationException 或类似的东西，然后恢复通道。

# python - QPushButton 图标没有出现

> ID：13290291
> 
> 赞同：0
> 
> 时间：2012-11-08T13:51:06.800
> 
> 标签：python, pyqt

我创建了一个这样的按钮：

```
icontest = QtGui.QIcon('test.gif');
self.TestButton = QtGui.QPushButton("Test")
self.TestButton.setEnabled(False)
self.TestButton.setIcon(icontest)
self.TestButton.setIconSize(QtCore.QSize(25, 25))
self.TestButton.clicked.connect(goToTestHandler)
self.layout.addWidget(self.TestButton, 0, 1)
... some loading ...
self.TestButton.setEnabled(True) 
```

按钮出现，但没有图标 - 没有抛出异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T05:14:09.760

我在表格单元格中创建了一个带有图像的按钮，并且图像正在出现并且正在工作。这是代码。

```
 newitem = QPushButton(self)
    newitem.setFlat(True)
    newitem.setAutoFillBackground(True)

    palette = newitem.palette();
    palette.setColor(QPalette.Button,QColor(255,255,255));
    newitem.setPalette(palette);
    newitem.setIcon(QIcon("__32__Setting-icon.png"));
    newitem.setIconSize(QSize(22,22));
    self.job_table.setCellWidget(self.table_job_rowCount,6,newitem ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T16:06:35.280

只有当传递给`QIcon`构造函数的路径错误时，我才能重现该行为。否则显示图标。

# php - wordpress中的循环问题

> ID：13290293
> 
> 赞同：0
> 
> 时间：2012-11-08T13:51:21.977
> 
> 标签：php, wordpress

我有一个从早上开始就无法解决的问题。

```
<?php 
if (have_posts()) :
 while (have_posts()) : the_post(); ?> 
```

这是 index.php 中的 wordpress `the loop`。当我添加`the_post`页面中的最后一个帖子时，它会消失，当我删除它时，所有帖子都会混淆。

你能给我一个解决方案吗？

这是完整的 index.php

```
<?php get_header(); ?>
<div id="body">
    <div class="content-container">
        <?php 
        if (have_posts()) :
        while (have_posts()) : the_post(); ?>
    <div class="content-whole">
        <div class="thumbnail">
        <?php 
        // check if the post has a Post Thumbnail assigned to it.
            if ( has_post_thumbnail() ) {
            the_post_thumbnail();
            } 
        ?>
        </div>
        <div class="content">
        <div class="post-title">
        <p class="postmetadata">
            Posted<?php echo human_time_diff( get_the_time('U'), current_time('timestamp') ) . ' ago';?>
             with  <a href="#disqus_thread"><?php the_post(); comments_number(); ?></a>
             <?php } ?>
        </p>
        <h2 id="post-title">
        <a href="<?php the_permalink() ?>" rel="bookmark">
        <?php
            $cats=get_the_category();
            echo $cats[0]->cat_name;
            ?> : <?php the_title(); ?></a></h2>
        </div>
    <?php the_content('Read More &raquo;'); ?>
    </div><!--end content-->
    </div><!--end content whole-->
        <?php endwhile; ?>
        <div class="pagenavi">
        <?php
        global $wp_query;
        $big = 999999999; // need an unlikely integer
        echo paginate_links( array(
        'base' => str_replace( $big, '%#%', esc_url( get_pagenum_link( $big ) ) ),
        'format' => '?paged=%#%',
        'current' => max( 1, get_query_var('paged') ),
        'total' => $wp_query->max_num_pages
        ) );
        ?>
        </div>
        <?php endif; ?> 
    </div>
    <?php get_sidebar(); ?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:45:56.893

我通过删除 the_post() 解决了它；从

```
<a href="#disqus_thread"><?php the_post(); comments_number(); ?></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:31:20.023

你展示的不是一个完整的循环；你错过了其余的逻辑，即`endwhile`和`endif`陈述。

这是最基本的 Wordpress 循环，来自[http://codex.wordpress.org/The_Loop_in_Action](http://codex.wordpress.org/The_Loop_in_Action)

```
<?php
get_header();
if (have_posts()) :
   while (have_posts()) :
      the_post();
      the_content();
   endwhile;
endif;
get_sidebar();
get_footer(); 
?> 
```

阅读该链接上的文档，了解如何修复循环并构建不同的 Wordpress 循环。

# asp.net-mvc-3 - MVC 3/ASPNET Auth - 几乎随机重定向到帐户/注销

> ID：13290294
> 
> 赞同：1
> 
> 时间：2012-11-08T13:51:25.063
> 
> 标签：asp.net-mvc-3, logoff, redirect

这对我来说是一个非常奇怪的问题，我已经与它斗争了一段时间。我真的希望有人能提供帮助。

我有一个相当典型的 MVC 3 网站，我似乎只在 IE 和 Firefox 中遇到这个问题。Chrome 配合得很好。幸运的是，目前我们公司的大多数客户都使用 Chrome。

问题是在一个看似随机的时间点，当我点击一个链接时，浏览器会自动将我重定向到 Account/LogOff 操作，然后它显然会从那里返回到登录页面。然后，此链接将以相同的行为继续。

我说“看似随机”是因为今天该链接将起作用，明天它将不起作用，并且所有其他（或大多数 - 我从来没有超过一次给出这个问题的问题链接）链接会很好。有时重新启动服务器/开发环境会解决问题，有时则不会。浏览器将继续重定向到 LogOff。

我曾尝试查看引荐来源网址，但将永远无法访问所引用的控制器/操作。（如果我在动作中放置一个断点，它将被错过，下一个到达点将是 LogOff 动作）

如果我在注销操作中查看堆栈跟踪，我看不到应用程序来自何处的任何信息。我还尝试了此页面中的建议：[在 ASP.NET MVC 上发布堆栈跟踪](https://stackoverflow.com/questions/5008313/posting-the-stack-trace-on-asp-net-mvc)，但我不明白为什么我被重定向到 LogOff 操作。

我似乎能够在点击 LogOff 之前遇到断点的唯一地方是 Global.asax 中的 Application_BeginRequest，但从那里看不到它的去向。

我的猜测是，在某个地方，ASPNET Auth 决定不再对用户进行身份验证并重定向到 LogOff 操作。问题是与 ASPNET Auth 关联的 cookie 仍然存在，其中有数据并且它们还没有过期。

无论如何，我希望我已经就这个问题提供了足够的信息。

提前致谢。

[编辑]

好的，所以我可能更接近了一步。我遇到了[这个链接](https://stackoverflow.com/questions/2224562/asp-net-formsauthentication-redirect-loses-the-cookie-between-redirect-and-appli)，并查看了 global.asax 中的 Application_AuthenticateRequest 中发生了什么。

我不太清楚为什么，当我点击一个链接时，Application_AuthenticateRequest 会被访问 3 次。当链接有效时（因为我可以关注它并且它不会让我退出），.ASPAUTH cookie 的值保持不变。我通过添加断点和监视来检查这一点

`HttpContext.Current.Request.Cookies[".ASPXAUTH"].Value`

当链接不起作用时，cookie第一次有值，然后其他两次为null。因此，由于 ASPXAUTH cookie 为空，系统会自动重定向到 LogOut 操作。

如果我考虑他们在链接中发布的解决方案，我不确定这是否适用于我。据我所知，加密的 cookie 仍然很小（如几百个字符长）并且不接近 4096 字节。此外，在我测试断开的链接时，我只有 3 个 cookie，并且在任何给定时间我最多有 5 个 cookie。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:07:59.517

好的，所以我有一种关于 cookie 过期的预感。因此，我查看了是否有办法让（强制）表单身份验证中的 cookie 保持活动状态，这导致我访问[http://www.codeproject.com/Articles/221889/How-to-Generate-Machine-Key-in- IIS7](http://www.codeproject.com/Articles/221889/How-to-Generate-Machine-Key-in-IIS7)

我可以测试这个理论的唯一方法是继续正常工作和调试站点。（这就是为什么我花了这么长时间才发布这个答案的原因。）自从我介绍了这个解决方案以来，问题似乎已经解决了。

有趣的是，前几天我和一位拥有 20 年开发经验的架构师谈论了我的问题。他查看了我的代码，确信这是表单身份验证代码中的一个错误。

我希望这可以帮助一些遇到我遇到同样问题的人。

# c# - CreateProcessAsUser - 错误 5

> ID：13290296
> 
> 赞同：0
> 
> 时间：2012-11-08T13:51:33.043
> 
> 标签：c#, powershell

我正在尝试使用 CreateProcessAsUser 方法。但我收到错误代码 - 5

这就是我所做的。

1.  加载用户配置文件
2.  重复令牌
3.  模拟用户
4.  CreateProcessAsUser - 带有 duplicateToken

有人可以帮我吗

问候

代码

```
# Start-of C# section
$createPocess = @'
using System;
using System.Collections.Generic;
using System.Text;
using System.Runtime.InteropServices;
using Microsoft.Win32;
using System.IO;
using System.Security.Principal;

namespace CreateProcessUtility
{
    class Win32
    {
    #region "CONTS"
    const UInt32 INFINITE = 0xFFFFFFFF;
    const UInt32 WAIT_FAILED = 0xFFFFFFFF;

    #endregion

    #region "ENUMS"

    [Flags]
    public enum LogonType
    {
        LOGON32_LOGON_INTERACTIVE = 2,
        LOGON32_LOGON_NETWORK = 3,
        LOGON32_LOGON_BATCH = 4,
        LOGON32_LOGON_SERVICE = 5,
        LOGON32_LOGON_UNLOCK = 7,
        LOGON32_LOGON_NETWORK_CLEARTEXT = 8,
        LOGON32_LOGON_NEW_CREDENTIALS = 9
    }

    [Flags]
    public enum LogonProvider
    {
        LOGON32_PROVIDER_DEFAULT = 0,
        LOGON32_PROVIDER_WINNT35,
        LOGON32_PROVIDER_WINNT40,
        LOGON32_PROVIDER_WINNT50
    }

    #endregion

    #region "STRUCTS"

    [StructLayout(LayoutKind.Sequential)]
    public struct STARTUPINFO
    {
        public Int32 cb;
        public String lpReserved;
        public String lpDesktop;
        public String lpTitle;
        public Int32 dwX;
        public Int32 dwY;
        public Int32 dwXSize;
        public Int32 dwYSize;
        public Int32 dwXCountChars;
        public Int32 dwYCountChars;
        public Int32 dwFillAttribute;
        public Int32 dwFlags;
        public Int16 wShowWindow;
        public Int16 cbReserved2;
        public IntPtr lpReserved2;
        public IntPtr hStdInput;
        public IntPtr hStdOutput;
        public IntPtr hStdError;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct PROCESS_INFORMATION
    {
        public IntPtr hProcess;
        public IntPtr hThread;
        public Int32 dwProcessId;
        public Int32 dwThreadId;
    }

    #endregion

    #region "FUNCTIONS (P/INVOKE)"

    [StructLayout(LayoutKind.Sequential)]
    public struct ProfileInfo {
        public int dwSize; 
        public int dwFlags;
        public String lpUserName; 
        public String lpProfilePath; 
        public String lpDefaultPath; 
        public String lpServerName; 
        public String lpPolicyPath; 
        public IntPtr hProfile; 
    }

    [DllImport("advapi32.dll", CharSet = CharSet.Unicode, SetLastError = true)]
    public static extern Boolean LogonUser 
    (
        String lpszUserName,
        String lpszDomain,
        String lpszPassword,
        LogonType dwLogonType,
        LogonProvider dwLogonProvider,
        out IntPtr phToken
    );

    [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern Boolean CreateProcessAsUser 
    (
        IntPtr hToken,
        String lpApplicationName,
        String lpCommandLine,
        IntPtr lpProcessAttributes,
        IntPtr lpThreadAttributes,
        Boolean bInheritHandles,
        Int32 dwCreationFlags,
        IntPtr lpEnvironment,
        String lpCurrentDirectory,
        ref STARTUPINFO lpStartupInfo,
        out PROCESS_INFORMATION lpProcessInformation
    );

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern UInt32 WaitForSingleObject 
    (
        IntPtr hHandle,
        UInt32 dwMilliseconds
    );

    [DllImport("kernel32", SetLastError=true)]
    public static extern Boolean CloseHandle (IntPtr handle);

    [DllImport("userenv.dll", SetLastError = true, CharSet = CharSet.Auto)]
    public static extern bool LoadUserProfile(IntPtr hToken, ref ProfileInfo lpProfileInfo);

    [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern int DuplicateToken(IntPtr hToken, int impersonationLevel, ref IntPtr hNewToken);

    #endregion

    #region "FUNCTIONS"

    public static void LaunchCommand2(string strCommand, string strDomain, string strName, string strPassword)
    {
        // Variables
        WindowsIdentity m_ImpersonatedUser;
        IntPtr tokenDuplicate = IntPtr.Zero;
        PROCESS_INFORMATION processInfo = new PROCESS_INFORMATION();
        STARTUPINFO startInfo = new STARTUPINFO();
        Boolean bResult = false;
        IntPtr hToken = IntPtr.Zero;
        UInt32 uiResultWait = WAIT_FAILED;
        string executableFile = "C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe";
        const int SecurityImpersonation = 2;

        try 
        {
            // Logon user
            bResult = Win32.LogonUser(
                strName,
                strDomain,
                strPassword,
                Win32.LogonType.LOGON32_LOGON_INTERACTIVE,
                Win32.LogonProvider.LOGON32_PROVIDER_DEFAULT,
                out hToken
            );
            if (!bResult) { throw new Exception("Logon error #" + Marshal.GetLastWin32Error()); }

             #region LoadUserProfile
                    ProfileInfo currentProfile = new ProfileInfo();
                    currentProfile.dwSize = Marshal.SizeOf(currentProfile);
                    currentProfile.lpUserName = strName;
                    currentProfile.dwFlags = 1;                        
                    Boolean bResult2 = LoadUserProfile(hToken, ref currentProfile);
                    Console.WriteLine(bResult2);

                    if (!bResult2) { throw new Exception("LoadUserProfile error #" + Marshal.GetLastWin32Error()); }
                   Console.WriteLine(currentProfile.hProfile + "----"+IntPtr.Zero);

                   if (currentProfile.hProfile == IntPtr.Zero){
                        Console.WriteLine("LoadUserProfile() failed - HKCU handle was not loaded. Error code: " +
                            Marshal.GetLastWin32Error());
                        throw new Exception("LoadUserProfile error #" + Marshal.GetLastWin32Error());
                    }
             #endregion

            // Create process
            startInfo.cb = Marshal.SizeOf(startInfo);
            startInfo.lpDesktop = "winsta0\\default";

            Console.WriteLine("Before impersonation: " + WindowsIdentity.GetCurrent().Name);

            if (DuplicateToken(hToken, SecurityImpersonation, ref tokenDuplicate) != 0){
             m_ImpersonatedUser = new WindowsIdentity(tokenDuplicate);

                if(m_ImpersonatedUser.Impersonate() != null){
                    Console.WriteLine("After Impersonation succeeded: " + Environment.NewLine +
                                                  "User Name: " +
                                                  WindowsIdentity.GetCurrent(TokenAccessLevels.MaximumAllowed).Name +
                                                  Environment.NewLine +
                                                  "SID: " +
                                                  WindowsIdentity.GetCurrent(TokenAccessLevels.MaximumAllowed).User.
                                                      Value);
                    Console.WriteLine(m_ImpersonatedUser);
                }

                bResult = Win32.CreateProcessAsUser(
                tokenDuplicate, 
                executableFile, 
                strCommand, 
                IntPtr.Zero,
                IntPtr.Zero,
                false,
                0,
                IntPtr.Zero,
                null,
                ref startInfo,
                out processInfo
            );
            if (!bResult) { throw new Exception("CreateProcessAsUser error #" + Marshal.GetLastWin32Error()); }

        }

            // Wait for process to end
            uiResultWait = WaitForSingleObject(processInfo.hProcess, INFINITE);
            if (uiResultWait == WAIT_FAILED) { throw new Exception("WaitForSingleObject error #" + Marshal.GetLastWin32Error()); }
        }
        finally 
        {
            // Close all handles
            CloseHandle(hToken);
            CloseHandle(processInfo.hProcess);
            CloseHandle(processInfo.hThread);
        }
    }

    #endregion
}
// Interface between powershell and C#    
public class CreateProcessCaller
{
    public static void modifyEnvParamWrapper2(string strCommand, string strDomain, string strName, string strPassword)
    {
        Win32.LaunchCommand2(strCommand, strDomain, strName, strPassword);
    }
}
} 

'@
# End-of C# section

Add-Type -TypeDefinition $createPocess -Language CSharp -IgnoreWarnings

Function modifyEnvParamWOWindow([String]$command, [String]$strDomain, [String]$strName, [String]$strPassword) {

try {
    [CreateProcessUtility.CreateProcessCaller]::modifyEnvParamWrapper2($command, $strDomain, $strName, $strPassword)
    return $True
} catch {
    write-host "Unable to modify regestry entry: " $_
    return $False
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:28:04.193

由于您还在`lpDesktop`StartupInfo 中指定参数，因此根据以下文档[`CreateProcessAsUser`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429%28v=vs.85%29.aspx)：

> ...您必须更改默认交互式窗口站和默认桌面的任意访问控制列表 (DACL)。窗口站和桌面的 DACL 必须授予用户访问权限或由 hToken 参数表示的登录会话。

我的猜测是，这是 Access Denied 错误的原因。

但是，同样根据 的文档[`CreateProcessAsUser`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429%28v=vs.85%29.aspx)，传递的令牌必须是主令牌。但是，您正在创建`DuplicateToken`仅使用创建模拟令牌的令牌。

因此，您将需要使用创建一个主令牌[`DuplicateTokenEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446617%28v=vs.85%29.aspx)，将`TokenPrimary`(= 1) 作为第 5 个参数传递，`CreateProcessAsUser`如果即使在桌面和 WindowStation 上设置权限后仍能正常工作，请在调用中使用此令牌。

# android - 注册到应用程序android时如何向用户发送确认电子邮件

> ID：13290300
> 
> 赞同：1
> 
> 时间：2012-11-08T13:51:39.410
> 
> 标签：android, email, registration, verification, forgot-password

我正在尝试在用户注册时在我的 android 应用程序中添加此功能 我会通过单击用户确认注册的链接向他们的收件箱发送电子邮件只使用 SQLite？或者我需要一些 mySQL 和 php？你能指导我完成做这件事所需的步骤吗？

# c - How to kill all subprocess created with pthread_create after cancelling a thread?

> ID：13290306
> 
> 赞同：0
> 
> 时间：2012-11-08T13:51:51.090
> 
> 标签：c, linux, pthreads

I have the following code and I make `ps aux | grep myprogram` in each step of the main() code of **myprogram** (name of the application I build).

At the beggining of the execution of **myprogram**, the `ps aux | grep myprogram` show only 1 time the **myprogram** in the list

after cancelling a thread that I created in the begging of the `main()`, the `ps aux | grep myprogram` show the **myprogram** twice and I expected to get only 1.

Could some one explain this behaviour? and how to return to the initial situation (only 1 myprogram)

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

pthread_t test_thread;

void *thread_test_run (void *v)
{
    int i=1;
    while(1)
    {
       printf("into thread %d\r\n",i);
       i++; 
       sleep(1);
    }
    return NULL
}

int main()
{
    // ps aux | grep myprogram  ---> show only 1 myprogram

    pthread_create(&test_thread, NULL, &thread_test_run, NULL);

    // ps aux | grep myprogram  ---> show  3 myprogram

    sleep (20);  

    pthread_cancel(test_thread);

    // ps aux | grep myprogram  ---> show 2 myprogram and I expected only 1 !!??

   // other function are called here...

    return 0;
} 
```

**EDIT**

the libc used by the linux is `libc-0.9.30.1.so`

```
# ls -l /lib/| grep libc
-rwxr-xr-x    1 root     root        16390 Jul 11 14:04 ld-uClibc-0.9.30.1.so
lrwxrwxrwx    1 root     root           21 Jul 30 10:16 ld-uClibc.so.0 -> ld-uClibc-0.9.30.1.so
lrwxrwxrwx    1 root     root           21 Jul 30 10:16 libc.so.0 -> libuClibc-0.9.30.1.so
-rw-r--r--    1 root     root         8218 Jul 11 14:04 libcrypt-0.9.30.1.so
lrwxrwxrwx    1 root     root           20 Jul 30 10:16 libcrypt.so.0 -> libcrypt-0.9.30.1.so
-rw-r--r--    1 root     root       291983 Jul 11 14:04 libuClibc-0.9.30.1.so 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:02:38.783

I'll assume you have some outdated glibc (version 2.2 or 2.3), which used the "linuxthreads" implementation of pthread.

In this older library one additional thread is created by the library for thread management; it can be created after first call to pthread_create; but it will sleep most time.

In newer linuxes there is glibc with NPTL ("Native posix thread library") implementation. When it is used, you will not see threads in `ps axu`; use `ps axum` (with `m`) to see native threads. And NPTL not uses a management thread.

PS Check [http://pauillac.inria.fr/~xleroy/linuxthreads/faq.html](http://pauillac.inria.fr/~xleroy/linuxthreads/faq.html) D.5 answer:

> D.5: When I'm running a program that creates N threads, top or ps display N+2 processes that are running my program. What do all these processes correspond to?
> 
> Due to the general "one process per thread" model, there's one process for the initial thread and N processes for the threads it created using pthread_create. That leaves one process unaccounted for. That extra process corresponds to the "thread manager" thread, a thread created internally by LinuxThreads to handle thread creation and thread termination. This extra thread is asleep most of the time.

PPS: Thanks, Mohamed KALLEL; thanks, mux: libc-0.9.30.1 is uClibc and seems that it uses same outdated linuxthreads implementation (which is known to be not fully posix-compatible). Here is changelog: [http://web.archive.org/web/20070609171609/http://www.uclibc.org/downloads/Changelog](http://web.archive.org/web/20070609171609/http://www.uclibc.org/downloads/Changelog)

> 0.9.10 21 March 2002
> 
> Major new features: o pthreads support (derived from glibc 2.1.3's linuxthreads library) by Stefan Soucek and Erik Andersen

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:01:42.637

Could be an *older* pthreads implementation as suggested by the other answers, however, if you are using a glibc `2.4` or higher which uses **NPTL**, then note that the ps command you used won't even show threads, instead use:

```
ps -AL 
```

The output before and after `pthread_cancel()` is:

```
$ ps -AL | grep tst
  983   983 pts/2    00:00:00 tst
  983   984 pts/2    00:00:00 tst
$ ps -AL | grep tst
  983   983 pts/2    00:00:00 tst 
```

There's more information about it [here](http://www.embedded-linux.co.uk/tutorial/list_threads) specifically about `uclibc` since it doesn't have NPTL, then `ps aux` should show all the threads.

> Since the introduction of the **Native POSIX Threads Library (NPTL)** threads have become rather elusive. **They don't show up in the default process listing using the ps command** if you do have the luxury of the full ps command (from the procps package) on your target system then all you need to do is add the “-L” option.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:10:19.943

You have an (very) old linux system, where your threads are shown as processes by tools such as `ps`, which will not happen on newer linux systems

However, a thread is normally not entierly disposed of when it returns or you kill/cancel it.

For that to happen you have to call `pthread_detach(pthread_self())` in your thread or create the thread in detached state: A detached thread will dispose it's thread resources when that thread ends, and a detached thread cannot be joined by pthread_join() later.

```
pthread_attr_t attr;
pthread_attr_init(&attr);
pthread_attr_setdetachstate(&attr, 1);
pthread_create(&test_thread, &attr, &thread_test_run, NULL); 
```

Or you have to call pthread_join() on it, e.g.

```
pthread_create(&test_thread, NULL, &thread_test_run, NULL);

sleep (20);  
pthread_cancel(test_thread);
pthread_join(test_thread); 
```

pthread_join() will ensure the thread resources are released.

The concept is roughly analogous to zombie processes, where a process is not entierly disposed of until a parent calls wait() or similar on that process.

# d3.js - 使用 d3 着色多边形

> ID：13290307
> 
> 赞同：1
> 
> 时间：2012-11-08T13:51:53.353
> 
> 标签：d3.js

在走错路之前，任何人都可以解释这是否完全可能：

我有以下代码：

```
var path = d3.geo.path();
var svg = d3.select("#d3Map").append("svg");
var countries = svg.append("g").attr("id", "countries");
d3.json("scripts/plugins/d3-master/examples/data/world-countries.json", function (json) {
  d3.select("svg")
    .selectAll("path")
    .data(json.features)
    .enter()
    .append("path")
    .attr("d",d3.geo.path().projection(d3.geo.equirectangular().scale(1500)));
}); 
```

确实可以加载并显示世界各国。完美运行。

然而，我想做的是改变少数几个国家的颜色。

查看生成的 SVG 后，似乎没有该国家/地区的 ID（即使 JSON 文件确实具有“名称”属性）。

有没有可能做类似的事情：

突出显示（国家名称，RGB）

还是我在这里使用了错误的工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:29:54.237

为什么不

```
d3.select("svg")
  .selectAll("path")
  .data(json.features)
.enter()
  .append("path")
  .attr("d",d3.geo.path().projection(d3.geo.equirectangular().scale(1500)))
  .attr("fill", "#c00")// <- Set color like this, or pass a function
// Or
  .attr("id", function(feature) {
    /* something like: return feature.properties.id; */
  })
// Or
  .attr("class", function(feature) {
    return feature.population > 1e6 ? 'populous' : 'rural';
  }); 
```

# vb.net - 字节数组到图像

> ID：13290312
> 
> 赞同：-1
> 
> 时间：2012-11-08T13:52:12.883
> 
> 标签：vb.net, silverlight, windows-phone-7

我正在尝试将字节数组转换为图像这是我的代码：

```
Public img As BitmapImage
Public bytes As Byte()
Sub convert()
    Using ms As New MemoryStream(bytes, 0, bytes.Length)
        ms.Write(bytes, 0, bytes.Length)
        'Dim bitmg As New BitmapImage
        'bitmg.SetSource(ms)
        img.SetSource(ms)
    End Using
End Sub 
```

但是当我运行应用程序时出现此错误：最后一行未处理空引用

```
img.SetSource(ms) 
```

有任何想法吗 ？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:59:01.893

您没有显示任何实际给出`img`值的代码。你有

```
img = New BitmapImage 
```

任何地方？

# iphone - CoreData 通过属性和关系比较两个 NSManagedObjects

> ID：13290317
> 
> 赞同：3
> 
> 时间：2012-11-08T13:52:28.203
> 
> 标签：iphone, core-data

我有过滤器对象。它有几个属性和关系。如果没有人具有相同的属性和关系，我想创建新的过滤器对象。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:55:03.973

我会选择一种更通用的方法。我会采用对象的 NSEntityDescriptions 并构建一个包含该描述中所有属性的谓词。

太喜欢了。。

```
- (void)insertIfUnique:(NSManagedObject*)obj inContext:(NSManagedObjectContext*)ctx {

NSMutableString *format = [NSMutableString string];

NSEntityDescription *desc = obj.entity;
NSArray *attrs = desc.attributeKeys;

for(NSString *attr in attrs) {
    if(format.length)
        [format appendString:@" AND "];
    [format appendFormat:@"%@==%@", attr, [obj valueForKey:attr]];
}

NSPredicate *p = [NSPredicate predicateWithFormat:format];
NSFetchRequest *f = [[NSFetchRequest alloc] initWithEntityName:desc.name];
f.predicate = p;
if([ctx countForFetchRequest:f error:nil]==0)
    [ctx insertObject:obj];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:07:13.680

您必须手动搜索 CoreData 以查找任何现有的过滤器对象。如果没有找到，您可以处理创建一个新的过滤器：

这是一个辅助函数

```
+(id)uniqueEntityfForName:(NSString *)name 
                withValue:(id)value 
                   forKey:(NSString *)key
   inManagedObjectContext:(NSManagedObjectContext *)context {

    NSFetchRequest *request = [[[NSFetchRequest alloc] init] autorelease];    
    request.entity = [NSEntityDescription entityForName:name inManagedObjectContext:context];
    request.predicate = [NSPredicate predicateWithFormat:[key stringByAppendingString:@" == %@"], value];
    NSArray *result = [context executeFetchRequest:request error:nil];

    id entity = [result lastObject];
    if (entity == nil) {
        entity = [NSEntityDescription insertNewObjectForEntityForName:name inManagedObjectContext:context];
        [entity setValue:value forKey:key];
    } else {
        entity = [result lastObject];
    }

    return entity;
} 
```

我使用这种方法是这样的：

```
SomeEntity *entity = [CDUtils uniqueEntityfForName:@"SomeEntity" withValue:@"foo" forKey:@"bar" inManagedObjectContext:context]; 
```

您可能必须定义自己的谓词。

# sql - 存储过程中的输出参数为空

> ID：13290325
> 
> 赞同：0
> 
> 时间：2012-11-08T13:52:54.297
> 
> 标签：sql, sql-server, sql-server-2008

我似乎无法正确获取输出参数，我期望“TEMPTABLE”的地方是空的？

```
create table TEMPTABLE
(
  Id int identity primary key,
  Name nvarchar(50) not null,
);
GO

insert into TEMPTABLE(Name) values('Name 1');
GO

DECLARE @PARMOUTP nvarchar(50)
DECLARE @ParameterDefinition AS NVARCHAR(2000)
DECLARE @DestTable VARCHAR(50)
declare @sql nvarchar(max)

    set @sql = 'SELECT   OBJECT_NAME(OBJECT_ID) AS TABLENAME 
                FROM     SYS.IDENTITY_COLUMNS  
                WHERE OBJECT_NAME(OBJECT_ID) = @DestTable'

set @DestTable = 'TEMPTABLE'

set @ParameterDefinition = '@DestTable VARCHAR(50), @PARMOUTP VARCHAR(50) OUTPUT'

EXECUTE sp_executesql @sql,
                  @ParameterDefinition,
                  @DestTable,
                  @PARMOUTP OUTPUT

print @PARMOUTP;
print isnull(@PARMOUTP, 'PARMOUTP is null!'); 
```

我在这里做错了什么？

问候，

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:24:58.567

您的查询不适合带有一个参数的 sp_executesql。在查询中，您应该为该参数赋值并执行它。像这样的东西：

```
create table TEMPTABLE
(
  Id int identity primary key,
  Name nvarchar(50) not null,
);
GO

insert into TEMPTABLE(Name) values('Name 1');
GO

DECLARE @PARMOUTP nvarchar(50)
DECLARE @ParameterDefinition AS NVARCHAR(2000)
DECLARE @DestTable VARCHAR(50)
declare @sql nvarchar(max)

    set @sql = 'SELECT   @PARMOUTP = OBJECT_NAME(OBJECT_ID) AS TABLENAME 
                FROM     SYS.IDENTITY_COLUMNS  
                WHERE OBJECT_NAME(OBJECT_ID) = @DestTable'

set @DestTable = 'TEMPTABLE'

set @ParameterDefinition = '@DestTable VARCHAR(50), @PARMOUTP VARCHAR(50) OUTPUT'

EXECUTE sp_executesql @sql,
                  @ParameterDefinition,
                  @DestTable,
                  @PARMOUTP OUTPUT

print @PARMOUTP;
print isnull(@PARMOUTP, 'PARMOUTP is null!'); 
```

请记住，您正在从动态查询中返回标量值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:24:00.907

在您的动态 SQL 语句中，您永远不会**分配**任何值！

您选择表名作为结果集 - 但它永远不会存储到输出变量中。

尝试这个：

```
set @sql = 'SELECT @PARMOUTP = OBJECT_NAME(OBJECT_ID)
            FROM SYS.IDENTITY_COLUMNS  
            WHERE OBJECT_NAME(OBJECT_ID) = @DestTable' 
```

# java - 在 Spring Data 上选择字段

> ID：13290333
> 
> 赞同：6
> 
> 时间：2012-11-08T13:53:24.660
> 
> 标签：java, spring, select, jpa, spring-data-jpa

我正在尝试查找有关如何使用 Spring Data 仅选择实体的某些字段的信息（我正在使用 JPA）。我只想选择实体的特定信息，存储库接口为您提供了返回整个实体信息的方法！。有时我只需要一个实体的 2 或 3 个字段并返回 20,30，...100.. 字段可能有点矫枉过正。

我会使用 Hibernate Criteria Projections 甚至 JPA“SELECT NEW ....”查询来实现这种功能。不知道 Spring Data 是否可行。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T03:05:29.077

您可以做的是`List<Object[]>`从存储库返回一个。然后在您的服务类中迭代此列表并手动创建您需要的对象。示例存储库方法

```
@Query("select el.moduleId, el.threadId from ExceptionLog el")
public List<Object[]> tempQuery(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-08T07:01:30.907

我想你也可以这样做

```
SomeDataPOJO{
    required col1
    required col2
} 
```

然后像这样写查询

```
@Query("select new SomeDataPOJO from requiredTable where xyz="abc")
public List<SomeDataPoJO> tempQuery() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-11T12:57:09.893

它不是普通的 Spring Data，但你考虑过使用 Springs`JdbcTemplate`吗？如果您使用 Spring Boots Autoconfiguration 并且有几个用于转换查询结果的处理程序，它也在上下文中。

例如`SELECT a, b FROM EMPLOYEE WHERE ID = ?`您可以使用的查询

```
String query = "SELECT a, b FROM EMPLOYEE WHERE ID = ?";
List<Pair<String,Integer>> employees = jdbcTemplate.queryForObject(
query, new Object[] { id }, new ExampleRowMapper()); 
```

将结果中的`ExampleRowMapper`每一行转换为给定的返回类型（`Pair<String, Integer>`在这种情况下），可能看起来像

```
public class ExampleRowMapper implements RowMapper<Pair<String, Integer>> {
    @Override
    public Pair<String, Integer> mapRow(ResultSet rs, int rowNum) throws SQLException {
        return Pair.of(rs.getString(1), rs.getString(2));
    }
} 
```

示例改编自[https://www.baeldung.com/spring-jdbc-jdbctemplate](https://www.baeldung.com/spring-jdbc-jdbctemplate)，您可以在其中找到更多信息。

当然，它不像 JPQL 那样类型安全，因为查询是“原始”或“本机”SQL，但至少响应再次是类型安全的，我更喜欢它而不是返回`Object[]`或其他东西。

# android - 在gridview中连续添加许多图片

> ID：13290345
> 
> 赞同：0
> 
> 时间：2012-11-08T13:53:55.400
> 
> 标签：android, gridview

我想在这个网格视图中连续添加 9 张图片。我应该如何处理我已经阅读了这篇文章[http://developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html) 。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:06:09.787

在的地方`android:numColumns="auto_fit"`

你用

```
 android:numColumns="9" 
```

# foreach - Smarty 嵌套 for-each 和数组

> ID：13290352
> 
> 赞同：4
> 
> 时间：2012-11-08T13:54:03.630
> 
> 标签：foreach, smarty

我在使用 Smart for-each 循环时遇到了一点问题 - 这是我的代码：

```
{* this example will print out all the values of the $custid array *}
{foreach from=$order_info item=amount}
amount: {$amount}<br>
{/foreach} 
```

所以基本上我只是试图循环并打印 $order_info 中的“金额” - 问题是，它只打印整个数组而不仅仅是“金额”。

这是我从调试控制台获得的数组中减少的项目数量：

```
{$order_info}   Array (86)
order_id => "13"
is_parent_order => "N"
parent_order_id => "0"
company_id => "0"
user_id => "1"
total => "1077.87"
subtotal => "1049.87"
discount => "0.00"
subtotal_discount => "0.00"
payment_surcharge => "0.00"
shipping_ids => "1"
shipping_cost => "28.00"
timestamp => "1352380055"
status => "O"
notes => ""
details => ""
promotions => Array (0)
promotion_ids => ""
title => ""
firstname => "John"
lastname => "Doe"
company => ""
b_title => ""
b_firstname => "John"
b_lastname => "Doe"
b_address => "44 Main street"
b_address_2 => "test"
b_city => "Boston"
b_county => ""
b_state => "MA"
b_country => "US"
b_zipcode => "02134"
b_phone => ""
s_title => ""
s_firstname => "John"
s_lastname => "Doe"
s_address => "44 Main street"
s_address_2 => "test"
s_city => "Boston"
s_county => ""
s_state => "MA"
s_country => "US"
s_zipcode => "02134"
s_phone => ""
phone => ""
fax => ""
url => ""
email => "joe@burford.co.uk"
payment_id => "3"
tax_exempt => "N"
lang_code => "EN"
ip_address => "62.49.144.33"
repaid => "0"
validation_code => ""
localization_id => "0"
payment_method => Array (15)
  payment_id => "3"
  usergroup_ids => "0"
  position => "30"
  status => "A"
  template => "check.tpl"
  processor_id => "0"
  params => ""
  a_surcharge => "0.000"
  p_surcharge => "0.000"
  localization => ""
  payment => "Check"
  description => "Check payment"
  instructions => "Type instructions to pay by visiting ..."
  lang_code => "EN"
  processor => ""
fields => Array (0)
items => Array (2)
  2902390881 => Array (19)
    item_id => "2902390881"
    order_id => "13"
    product_id => "1110"
    product_code => "B0002I9OJS"
    price => "549.99"
    amount => "1"
    extra => Array (9)
      step => "1"
      product_options => Array (0)
      unlimited_download => "N"
      product => "eMachines T2958 Desktop PC (2.66 GHz ..."
      company_id => "0"
      is_edp => "N"
      edp_shipping => "N"
      base_price => "549.99"
      stored_price => "N"
    product => "eMachines T2958 Desktop PC (2.66 GHz ..."
    deleted_product => ""
    discount => "0"
    company_id => "0"
    base_price => "549.99"
    original_price => "549.99"
    cart_id => "2902390881"
    tax_value => "0"
    subtotal => "549.99"
    display_subtotal => "549.99"
    shipped_amount => "0"
    shipment_amount => "1"
  2278796194 => Array (19)
    item_id => "2278796194"
    order_id => "13"
    product_id => "1120"
    product_code => "B00086HZJA"
    price => "499.88"
    amount => "1"
    extra => Array (9)
      step => "1"
      product_options => Array (0)
      unlimited_download => "N"
      product => "HP Pavilion a1000n Desktop PC (Intel ..."
      company_id => "0"
      is_edp => "N"
      edp_shipping => "N"
      base_price => "499.88"
      stored_price => "N"
    product => "HP Pavilion a1000n Desktop PC (Intel ..."
    deleted_product => ""
    discount => "0"
    company_id => "0"
    base_price => "499.88"
    original_price => "499.88"
    cart_id => "2278796194"
    tax_value => "0"
    subtotal => "499.88"
    display_subtotal => "499.88"
    shipped_amount => "0"
    shipment_amount => "1" 
```

所以我真正想做的是`amount`从`items`内部获取`$order_info`- 我尝试了 $order_info.items 但这导致网站崩溃。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T13:28:56.010

这解决了它：

```
{foreach from=$order_info.items item=foo} 
     {$foo.product_id} 
{/foreach} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:03:08.380

会不会是这样的

```
{foreach from=$order_info.items item=items}
    {foreach from=$items item=item}
        amount: {$item.amount}<br>
    {/foreach}
{/foreach} 
```

假设我将您的结构理解为 $order_info -> items array -> (item item item item)，并且每个项目都有一个 .amount 属性。

# jquery - 新的 Rails 3.2.8 应用程序未加载 jQuery

> ID：13290353
> 
> 赞同：0
> 
> 时间：2012-11-08T13:54:08.293
> 
> 标签：jquery, ruby-on-rails, asset-pipeline

我`rails new`今天做了一个，然后创建了一个简单的搜索栏：

```
<form>
  <input id='search-bar' type='search' name='search'></input>
</form>
<a id='search-btn' href="#">searching!</a> 
```

好吧，一些点击处理程序怎么样！所以资产/javascripts/searches.js.coffee：

```
$('#search-btn').click ->
  alert 'BOOM'
  query = $('#search-bar').html
  console.log query 
```

没事了。所以我去 Chrome 控制台：

```
>$('a')
null
>$('body')
null
>$
function () { [native code] } 
```

一个没有选择器的 jQuery，不太有用。这里发生了什么？如果我添加`<script type="text/javascript" src='http://code.jquery.com/jquery-1.8.2.js'></script>`到页面或我的 layout.html.erb，我们都很好。

尽管在 assets/javascripts 中，但下划线-min.js（注意它不是 .min.js）没有加载，我遇到了同样的问题。给定我的（未修改的）application.js，它应该加载当前文件夹：

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

更新

如果我转到 Chrome 检查器的资源选项卡并检查 application.js，我会看到：

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require_tree .
; 
```

看起来它没有正确地将 js 文件包含在其目录中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T13:30:41.453

由于某种原因，链轮无法工作。检查您是否正确包含所有与资产相关的 gem，并且您没有更改 config/environments/development.rb。显然要确保 public/javascripts/ 中没有 application.js，它应该在 app/assets/javascripts 中。

# sql - SQL Azure 数据同步服务和架构更新（Visual Studio 架构比较）

> ID：13290355
> 
> 赞同：0
> 
> 时间：2012-11-08T13:54:11.380
> 
> 标签：sql, azure, sync, schema-compare, azure-data-sync

我有一个本地 SQL 数据库（数据库优先 EF 应用程序）和一个 Azure 数据库，它们由 azure 数据同步服务同步。

现在，当我更新表的本地模式时，我需要做什么？当然，我必须更新同步服务中的架构，但这还不够。azure 数据库的架构不会由同步服务本身更新。

在我使用 azure 数据同步之前，我可以简单地从 Visual Studio 调用 sql 架构比较，但现在有很多新表，我不知道要更新什么，不知道什么。

当我使用管理门户手动更新天蓝色数据库时，同步确实有效。但这不是也可以通过 Visual Studio 模式比较（或 SQL SMMS）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:14:49.230

我想你已经回答了你自己的问题，你说你可以通过 VS 来做，除了有太多的新表。

只需跳过任何具有 DSS 前缀的对象，这些对象由 SQL Azure 数据同步服务使用。

但正如您已经提到的，您仍然需要在数据同步服务同步组中编辑数据集定义。

# java - Java Swing 消息序列图

> ID：13290357
> 
> 赞同：3
> 
> 时间：2012-11-08T13:54:23.380
> 
> 标签：java, swing

到目前为止，我一直在寻找可以在 Java/Swing 中可视化消息序列的东西，例如可以可视化的东西，但无济于事

![在此处输入图像描述](../Images/4a9cd8bfa2255f73f9325571eff26ad4.png)

是否有任何摆动组件可以做到这一点？

（有一些工具可以通过运行外部命令来做到这一点，因为这些工具的结果是图像文件，它们不适合即时更新，这将是我的用例）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:46:06.027

我的回答只是一个临时建议。有一个相当不错的工具叫做[Quick Sequence Diagram Editor](http://sdedit.sourceforge.net/example/index.html)。开箱即用，它将为您提供所需的 Swing 组件和相当不错的 DSL。

![在此处输入图像描述](../Images/5329d061d2005b208bd4b3a30895bb75.png)

也许您只生成一个文本图表表单并让图表编辑器背后的逻辑来完成其余的工作可能会更容易（我认为一些模板引擎可能会进一步简化任务）。

DSL 示例：

```
bfs:BFS[a]
/queue:FIFO
someNode:Node
node:Node
adjList:List
adj:Node
bfs:queue.new
bfs:someNode.setLevel(0)
bfs:queue.insert(someNode)
[c:loop while queue != ()]
  bfs:node=queue.remove()
  bfs:level=node.getLevel()
  bfs:adjList=node.getAdjacentNodes()
  [c:loop 0 <= i < #adjList]
    bfs:adj=adjList.get(i)
    bfs:nodeLevel=adj.getLevel()
    [c:alt nodeLevel IS NOT defined]
      bfs:adj.setLevel(level+1)
      bfs:queue.insert(adj)
      --[else]
      bfs:nothing to do
    [/c]
  [/c]
[/c]
bfs:queue.destroy() 
```

请注意，我实际上建议将 sdedit 组件嵌入到您的应用程序中，但不要将其用作外部工具。顺便说一句，许可证是相当宽松的。

# php - 使用 PHP 配置 SOAP

> ID：13290362
> 
> 赞同：0
> 
> 时间：2012-11-08T13:54:32.270
> 
> 标签：php, soap

我需要在我的服务器上安装 SOAP for PHP。查看PHP手册上的文档，只有这个指令

```
To enable SOAP support, configure PHP with --enable-soap 
```

谁能告诉我我是怎么做到的？我假设我需要以某种方式在命令行上执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:00:20.217

这意味着重新编译它并将 --enable-soap 开关传递给您的 ./configure 脚本。

但是您应该首先从命令行（或 phpinfo(); ）运行 php -m 以确保它尚未安装。这是一个流行的扩展，大多数主机默认启用它。

如果需要编译 PHP，可以在[php.net](http://www.php.net/manual/en/install.unix.php)上找到适用于 windows 和 linux 平台的说明。

# android - 如何获取所有单列值然后将其传递给 String[]？

> ID：13290363
> 
> 赞同：1
> 
> 时间：2012-11-08T13:54:35.563
> 
> 标签：android, database, arrays, string, sqlite

我在这里遇到了一个大问题。我创建了 databasehelper 类来处理我的所有查询功能。现在我尝试创建一个函数，该函数将从我的数据库中加载列的所有值，但我不知道该怎么做。仅供参考，我的数据库表中有 3 列。到目前为止，这是我的代码：

（更新，它现在可以工作并给我价值）

```
public List<Content> getSearchKeys() {
    List<Content> contentList = new ArrayList<Content>();
    // The query
    String selectQuery = "SELECT  * FROM " + TABLE_SEARCH;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // I use do.. while here and it works now, should I better use for loop?
    if (cursor.moveToFirst()) {
        do {
            Content content = new Content();
            content.setID(Integer.parseInt(cursor.getString(0)));
            content.setsKeys(cursor.getString(1));
            content.setAct(cursor.getString(2));
            // Adding content to list
            contentList.add(content);
        } while (cursor.moveToNext());
    }
    // return content list
    return contentList;
} 
```

现在的问题是如何将上述函数的结果传递给 String[] ？在我的活动中，我尝试像这样使用它，但它不起作用：

（更新）

```
...
setContentView(R.layout.page_search);

    DatabaseHandler db = new DatabaseHandler(this);
    List<Content> contents = db.getAllContacts(); 
    final String[] searchQ = new String[contents.size()];
    int i =0;

      for (Content cn : contents) {
            searchQ[i] = cn.getsKeys().toString(); 
      }

      final String[] SearchQueries = searchQ; 
```

如果我评论上面的代码并将其更改为这样的字符串数组，那么它可以工作：

```
static final String[] SearchQueries = new String[] { "iPhone", "Mac", "Apple",}; 
```

我的目标是将上面的数组替换为我从数据库中检索到的数组。那么有什么问题，处理这个问题的正确方法是什么？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:10:43.570

问题 1：如果 cursor 为空但不为 null，则 do while 循环失败（将其更改为 while 循环）

问题 2：要转换为字符串，你需要在你的类中有一个`toString`方法。`Content`然后你会写一个循环：

```
String[] queryAsStrings = new String[query.size()];
int i = 0;
for (Content c : query) {
  queryAsStrings[i] = c.toString();
} 
```

# cakephp - 在 cakephp 中选择列表关联

> ID：13290365
> 
> 赞同：1
> 
> 时间：2012-11-08T13:54:38.777
> 
> 标签：cakephp, associations, selectlist

我是蛋糕新手，使用的是第 2 版。

我有模型

```
hgcylinder.php

class HgCylinder extends AppModel  {
    //put your code here
    var $name= "HgCylinder";

    var $belongsTo = array('HgKeyGase');
}

hgkeygase.php
class HgKeyGase extends AppModel  {
    //put your code here
    var $name= "HgKeyGase";

    public $belongsTo = array(
        'HgKeyColor' => array(
            'className' => 'HgKeyColor',
            'foreignKey' => 'hg_key_color_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        )
        );

}

Controller HgCylindersController.php

<?php

class HgCylindersController extends AppController
{
    var $name = "HgCylinders";
    // var $scaffold;
    function index()
    {
        $this->set('hey',$this->HgCylinder->find('all'));
    }

    public function edit($id = null) {
        $this->HgCylinder->id = $id;
        if ($this->request->is('post')) {
        var_dump($this->request->data);
        exit;
            if ($this->HgCylinder->save($this->request->data)) {
                $this->Session->setFlash(__('Cylinder has been updated successfull'));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The cylinder could not be saved. Please, try again.'));
            }
        } else {
            $this->request->data = $this->HgCylinder->read(null, $id);
        }
        $hg_key_gase_id = $this->HgCylinder->HgKeyGase->find('list');

        $this->set(compact('hg_key_gase_id'));
    }

} 

?>

View : edit.ctp
<?php 

echo $this->form->create('HgCylinder',array('action'=>'edit'));
echo $this->form->input('hg_key_gase_id',);
echo $this->form->input("capacityM3");
echo $this->form->input("weightEmpty");
echo $this->form->input("weightFilled");
echo $this->form->input("isFilled");
echo $this->form->end('Add');
?> 
```

我的问题是 hg_key_gase_id 成为没有选项的选择列表。如果我在视图和控制器中将名称更改为“hgKeyGas”，它会显示 hg_key_gases 表中的选项。但是在保存时不会将 hg_key_gase_id 字段的值保存在 hg_cylinders 表中，而是在该字段中存储 null。

其次，我想知道有必要将变量名称从控制器传递给视图，与表中的字段完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:01:33.217

尽量遵守约定。

所以是

```
$hgKeyGases = $this->HgCylinder->HgKeyGase->find('list');

$this->set(compact('hgKeyGases')); 
```

复数形式将能够填充您的选择框（如食谱中所述）

也使用 $this->Form->input() （注意大写 F）。$name 不是必需的。不要使用 read()，而是使用 find(first)。不要设置操作（默认情况下表单将发布到自身）。

最重要的是。始终尊重文件系统中文件的大小写。特别是如果您计划在 NIX 系统（区分大小写）上进行部署。所以它将 HgCylinder.php 和 HgKeyGase.php 作为模型类文件。

最后提示：使用烘焙（通过 shell 控制台烘焙蛋糕）来烘焙你的 crud 文件。通过这种方式，您可以了解它是如何以正确的方式完成的。顺便说一句，它本身也会回答你的问题。

可以在此处找到文档：http: [//book.cakephp.org/2.0/en/index.html](http://book.cakephp.org/2.0/en/index.html) 也许您发现了一个过时的旧版本，2.x 版本是您应该使用的版本。

# c++ - Intel 风格内联汇编和 AT&T 风格、C++ 中的变量引用

> ID：13290367
> 
> 赞同：2
> 
> 时间：2012-11-08T13:54:40.600
> 
> 标签：c++, gcc, assembly, intel, inline-assembly

我需要在 Visual Studio 和使用 G++ 4.6.1 的 IDE 中编译一些汇编代码。只要我不引用和解决任何变量，-masm=intel 标志就可以工作，但是我需要这样做。

我考虑过使用内在函数，但编译后的程序集根本不是最优的（例如，我无法定义要使用的 sse 寄存器，因此无法进行管道优化）。

考虑这些代码部分（inte 样式程序集）：

```
mov       ecx, dword ptr [p_pXcoords]
mov       edx, dword ptr [p_pYcoords]
movhpd    xmm6, qword ptr [oAvgX]
movhpd    xmm7, qword ptr [oAvgY]
movlpd    xmm6, qword ptr [oAvgX]
movlpd    xmm7, qword ptr [oAvgY] 
```

其中 p_pXcoords 和 p_pYcoords 是双精度数组和函数参数，oAvgX 和 oAvgY 是简单的双精度值。

另一行代码是这样的，它位于汇编块的中间：

```
movhpd    xmm6, qword ptr [oAvgY] 
```

换句话说，我需要访问变量并在代码中间的特定 sse 寄存器中使用它们。我怎样才能用 AT & T 语法做到这一点，最好：我可以用 g++ 编译器使用 -masm 标志做到这一点吗？

有什么办法可以同时为 VS 和基于 g++ 4.6.1 的编译器使用一个汇编代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:13:08.193

您当然可以告诉 GCC 为每个变量使用哪个 SSE 寄存器：

```
register __m128i x asm("xmm6"); 
```

但我猜VS不支持。（我也有点惊讶你需要它来获得良好的性能。寄存器分配和指令调度是优化编译器知道的两个最基本的东西。你确定你启用了优化:-)？）

我可能只写两个函数，一个使用内在函数，一个使用 asm 用于不知道如何正确调度指令的编译器。

# c# - 使用反射访问基类和子类中的私有字段

> ID：13290369
> 
> 赞同：1
> 
> 时间：2012-11-08T13:54:43.970
> 
> 标签：c#, reflection

我有一个简单的程序：

```
using System;
using System.Reflection;

namespace PlayWithReflection
{
class MyDisposable:IDisposable
{
    private  string _name;

    public MyDisposable(string name)
    {
        this._name = name;
    }

    public string Name
    {
        get { return _name; }
    }

    public void Dispose()
    {
        Console.WriteLine(_name + " is disposed");
    }
}

class MyBaseClass : IDisposable
{
    protected MyDisposable _baseProtectedDisposableA = new MyDisposable("_baseProtectedDisposableA");
    private MyDisposable _baseDisposableB = new MyDisposable("_baseDisposableB");

    public MyDisposable BaseProtectedDisposableA
    {
        get { return _baseProtectedDisposableA; }
    }

    public MyDisposable BaseDisposableB
    {
        get { return _baseDisposableB; }
    }

    public void Dispose()
    {
        var fieldInfos = this.GetType().GetFields(BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.FlattenHierarchy);

        foreach (var fieldInfo in fieldInfos)
        {
            var value = fieldInfo.GetValue(this);
            if (value is IDisposable)
            {
                ((IDisposable)value).Dispose();
                fieldInfo.SetValue(this, null);
            }
        }
    }
}

class MyClass : MyBaseClass
{
    private MyDisposable _disposableC = new MyDisposable("_disposableC");
    private MyDisposable _disposableD = new MyDisposable("_disposableD");

    public MyDisposable DisposableC
    {
        get { return _disposableC; }
    }

    public MyDisposable DisposableD
    {
        get { return _disposableD; }
    }
}

class Program
{
    static void Main(string[] args)
    {
        using(MyBaseClass instance = new MyClass())
        {
           Console.WriteLine(instance.BaseProtectedDisposableA.Name + " is telling his name...");
           Console.WriteLine("--------------------------------------------------------");
        }

        Console.ReadKey();
    }
}
} 
```

它打印出这样的东西：

```
_baseProtectedDisposableA is telling his name...
-------------------------------------------------------
_disposableC is disposed
_disposableD is disposed
_baseProtectedDisposableA is disposed 
```

问题是如何让它打印这个：

```
_baseProtectedDisposableA is telling his name...
-------------------------------------------------------
_disposableC is disposed
_disposableD is disposed
_baseProtectedDisposableA is disposed
_baseDisposableB is disposed 
```

或者，换句话说，我的私有字段 _baseDisposableB 在哪里，以及如何处理它？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:16:12.223

> 我的私人领域 _baseDisposableB 在哪里

阅读有关[BindingFlags](http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags.aspx)枚举的文档：

> **FlattenHierarchy** 指定应返回层次结构上的公共和受保护静态成员。不返回继承类中的私有静态成员。静态成员包括字段、方法、事件和属性。不返回嵌套类型。

所以基类的私有成员不会被返回。这是有道理的，因为不*应该*从派生类访问私有成员。

> 如何使其被处置？

由于无论如何访问私有成员都是一种技巧，我不会尝试从派生类中处理它。我会`Dispose`直接在基类中明确显示它：

```
public void Dispose()
{
    var fieldInfos = this.GetType().GetFields(BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.FlattenHierarchy);

    foreach (var fieldInfo in fieldInfos)
    {
        var value = fieldInfo.GetValue(this);
        if (value is IDisposable)
        {
            ((IDisposable)value).Dispose();
            fieldInfo.SetValue(this, null);
        }
    }
    _baseDisposableB.Dispose();
} 
```

虽然我认为你有一些理由想要使用反射而不是明确地处置成员......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:19:01.903

使用 . 获取基本类型的私有字段是不可能的`GetType().GetFields(...)`。您必须从基本类型本身获取字段。

**示例**：用以下两种方法替换您的`Dispose`方法：

```
public void Dispose()
{
    var type = GetType();
    while (type != null)
    {
        DisposeFields(type);
        type = type.BaseType;
    }
}

private void DisposeFields(Type type)
{
    var fieldInfos = type.GetFields(BindingFlags.Instance | BindingFlags.NonPublic);

    foreach (var fieldInfo in fieldInfos)
    {
        var value = fieldInfo.GetValue(this) as IDisposable;
        if (value == null) continue;

        value.Dispose();
        fieldInfo.SetValue(this, null);
    }
} 
```

这将通过继承层次结构和`Dispose`基本类型的字段（如果它们是一次性的）。

结果：

```
_baseProtectedDisposableA is telling his name...
--------------------------------------------------------
_disposableC is disposed
_disposableD is disposed
_baseProtectedDisposableA is disposed
_baseDisposableB is disposed 
```

# ruby - 不确定如何编写某个 mongodb 查询

> ID：13290373
> 
> 赞同：0
> 
> 时间：2012-11-08T13:54:49.683
> 
> 标签：ruby, mongodb

我正在开发一个 ruby​​ 项目并使用 mongodb。我在数据库中保存节目的开始和结束时间。我正在尝试获得当前节目的结果（根据现在的时间）以及随后的节目。这是我的代码：

```
def get_current_and_next_schedule(channel, time = Time.now)
  end_of_day = _get_end_of_day(time)
  Schedule.all(
    :start_time => { '$gte' => time.utc },
    :end_time   => { '$lte' => end_of_day.utc },
    :show_id    => { '$in' => Show.all(:channel_id => channel.id).collect { |s| s.id } },
    :order      => :start_time,
    :limit      => 2
  )
end 
```

如果我有两个时间为 3:00-4:00 和 4:00-5:00 的节目，如果我在 3:30 查询数据库，它们应该在返回的结果中。但是使用上面的代码，结果中只有 4:00-5:00 的节目。我知道这是因为我检查了 '$gte' => time.utc 如何修复此查询，以便在开始时间已过但节目尚未结束时包含当前节目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:37:12.697

其中`end_time`大于当前时间且小于**或****等于**。可能是这样`end_time` **`end_of_day`**

 **```
:end_time   => { '$gt' => time.utc },
:end_time   => { '$lte' => end_of_day.utc } 
```**

# c# - 字符串部分比较

> ID：13290374
> 
> 赞同：10
> 
> 时间：2012-11-08T13:54:51.350
> 
> 标签：c#, .net, string, comparison

> **可能重复：**
> [为什么 string.Compare 似乎不一致地处理重音字符？](https://stackoverflow.com/questions/1371813/why-does-string-compare-seem-to-handle-accented-characters-inconsistently)

我有以下代码

```
var s1 = "ABzzzzz2";
var s2 = "äbzzzzz1";

var cmp = StringComparison.InvariantCultureIgnoreCase;

Console.WriteLine(string.Compare(s1, 0, s2, 0, 7, cmp)); //prints -1
Console.WriteLine(string.Compare(s1, 0, s2, 0, 8, cmp)); //prints 1 
```

怎么可能第一个字符串的一部分小于第二个字符串的一部分，而整个第一个字符串大于整个第二个字符串？
我已经在 x64、.net 2.0、3.5、4.0 上对其进行了测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:34:57.607

我的理论是该算法首先对字符串进行规范化，然后进行比较。根据这个“äbzzzzz1”归一化为“abzzzzz1”。标准化形式的第一次比较结果相等，但返回 0 将是不正确的，因为实际字符串不相等。所以它恢复为序数比较和结果-1。

第二种情况，归一化后，很明显“abzzzzz2”大于“abzzzzz1”，所以结果为1。

此方法还解释了[此问题](https://stackoverflow.com/q/1371813/284240)中提到的案例 有关规范化详细信息，请查看[MSDN 页面](http://msdn.microsoft.com/en-us/library/system.text.normalizationform.aspx)

# jsf - JSF 2 + Spring Security 3.1.x @Secured AccessDeniedException 处理

> ID：13290375
> 
> 赞同：2
> 
> 时间：2012-11-08T13:54:53.177
> 
> 标签：jsf, spring-security

我想问一下如何处理（例如捕获、记录和重定向流）来自“安全注释”（@PreAuthorize、@Secured 等）的 AccessDeniedException？

我尝试设置自己的 AccessDeniedHandler：

```
<http auto-config="true" use-expressions="true">
    ...
    <access-denied-handler ref="myAccessDeniedHandler" />
</http> 
```

但它似乎只拦截我尝试访问未经授权的资源时引发的异常。

但是来自的异常

```
@PreAuthorize("hasRole('ROLE_ADMIN')")
public void myMethod(){
    System.out.println("Secret Method");
} 
```

不是这样处理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T08:33:34.397

这篇文章有点老了，所以我想你不再需要答案了。仍然为其他人回答这个问题：

首先：你是对的：`<access-denied-handler ref="myAccessDeniedHandler" />`只处理对资源的请求，所以你需要一些不同的东西来处理你自己的代码或 Spring-Security 抛出的 AccessDeniedExceptions，因为`@PreAuthorize`.

您可以做的是使用 Spring-AOP/AspectJ 编写一个带有切入点的环绕方面，该切入点引用所有使用特定注释注释的方法（在您的情况下为 @PreAuthorize）

有关处理-annotations的示例，请参见[JSF2 with SpringSecurity: handle AccessDeniedException of @Secured-Annotation](https://stackoverflow.com/questions/19536188/jsf2-with-springsecurity-handle-accessdeniedexception-of-secured-annotation)`@Secured`

# ios - 标签栏和视图大小 xcode

> ID：13290379
> 
> 赞同：1
> 
> 时间：2012-11-08T13:55:58.620
> 
> 标签：ios, xcode, screenshot, tabbar

我有一个带有标签栏的简单应用程序。视图大小为 480 x 320。标签栏为 49 x 320。但是，当我尝试使用 UIgraphicsbeginimagecontext(self.view.frame.size) 截屏时，我得到的图像为 411 x 320.. 我的背景图像是 480 x 320 并在 ios 模拟器中正确显示。但是，当屏幕被捕获时，背景图像会被 69 个高度像素切割。任何人都知道：1）我得到 411 时 20 个丢失像素的去向（480-49）= 431 2）为什么我的背景图像在模拟器中正确显示但在截屏时被裁剪.. 非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:04:10.200

尝试使用`self.view.bounds`上下文大小。

另外，您是否在正确初始化视图之前截取屏幕截图？如果是，这可能会导致尺寸不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T04:44:48.810

缺少的 20 个像素是顶部状态栏的大小。如果您在顶部显示状态栏，实际上您的视图大小高度为 460 像素。当您使用 UIgraphicsbeginimagecontext(self.view.frame.size) 截屏时，您的尺寸参数是 320x460，而不是您预期的 320x480，从而导致“裁剪”图像。（对不起我的英语......）

# ajax - 在ajax中回显文件内容

> ID：13290381
> 
> 赞同：-1
> 
> 时间：2012-11-08T13:58:00.200
> 
> 标签：ajax, echo, alert

您好，我使用过这样的代码，如何回显“load.php”内容警报？

"alert(\'提交：加载文件的ech结果\');"

```
$.ajax({
                url : \'load.php\',
                data: \'inputField\',
                data: \'\',
                type: \'GET\',
                cache: \'false\',
                beforeSend: function () {
                    link.addClass(\'loading\');                 
                },
                success: function () {
                    link.removeClass(\'loading\');      
                    alert(\'Submitted\');
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:00:48.447

你的`success()`函数应该有一个`data`参数，即。`success: function(data)`...然后您可以提醒数据：

```
success: function (data) {
    link.removeClass(\'loading\');      
    alert(data);
} 
```

# iphone - IOS6 上不显示 h.264 流

> ID：13290382
> 
> 赞同：0
> 
> 时间：2012-11-08T13:58:01.993
> 
> 标签：iphone, ios, streaming, h.264

我有一个应用程序，用于显示视频流和应用程序播放器。在 IOS 5 之前，一切都像魅力一样工作。

随着 IOS 6 的新更新，当视频流格式为 h.264 时，播放器无法播放视频。在其他格式的视频中，仍然有效。

任何想法，

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:23:57.860

您需要解释您如何尝试进行视频流、实时流 (HLS)、rtsp 或其他。

直播在 ios 6 下不应该有任何问题，据我所知，我知道非第 3 方 rtsp 库与 ios 6 有任何问题。当然，非流媒体 h264（渐进式下载）的工作原理和以往一样好做过

# mysql - MySQL：排序顺序“显示表”

> ID：13290384
> 
> 赞同：6
> 
> 时间：2012-11-08T13:58:04.203
> 
> 标签：mysql, sql

“SHOW TABLES”返回的表格是如何排序的？

例如，`information_schema`数据库的输出如下所示：

```
CHARACTER_SETS
COLLATIONS
COLLATION_CHARACTER_SET_APPLICABILITY
COLUMNS
COLUMN_PRIVILEGES
ENGINES
EVENTS
FILES
GLOBAL_STATUS
GLOBAL_VARIABLES
KEY_COLUMN_USAGE
PARAMETERS
PARTITIONS
PLUGINS
PROCESSLIST
PROFILING
REFERENTIAL_CONSTRAINTS
ROUTINES
SCHEMATA
SCHEMA_PRIVILEGES
SESSION_STATUS
SESSION_VARIABLES
STATISTICS
TABLES
TABLESPACES
TABLE_CONSTRAINTS
TABLE_PRIVILEGES
TRIGGERS
USER_PRIVILEGES
VIEWS
INNODB_CMP_RESET
INNODB_TRX
INNODB_CMPMEM_RESET
INNODB_LOCK_WAITS
INNODB_CMPMEM
INNODB_CMP
INNODB_LOCKS 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T14:09:52.680

[请参阅SHOW DATABASES 中](http://bugs.mysql.com/bug.php?id=14473)的 Sergei Golubchik 的回答没有正确排序 infomation_schema ：“没有 SHOW 命令对结果进行排序”。

如果您需要对表名进行排序，您可以查询`information_schema.tables`，例如：

```
select table_name from information_schema.tables 
 where table_schema = 'your_db_name' order by table_name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:07:38.917

试试这个：

```
SELECT * FROM information_schema.TABLES WHERE TABLE_SCHEMA = 'information_schema' ORDER BY TABLE_NAME 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-25T12:10:12.310

下面的代码非常适合我列出我的任何数据库中的特定表，并按要求按名称对它们进行排序。

```
SELECT TABLE_NAME FROM information_schema.TABLES WHERE TABLE_SCHEMA = 'your_database_here' AND TABLE_NAME LIKE '%letters_from_your_table_here%' ORDER BY TABLE_NAME DESC 
```

# asp.net - 在 Web 项目之外使用 HTTPContext 的任何问题

> ID：13290385
> 
> 赞同：3
> 
> 时间：2012-11-08T13:58:05.207
> 
> 标签：asp.net, vb.net

我们有一个 Web 应用程序，可以访问不同项目中的业务逻辑和数据访问。

按照它的设计方式，键值永远不会传递给数据访问层或业务逻辑。相反，业务层有一个包含公共只读属性的类，DAL 层通过该属性访问值。

业务逻辑层位于不同的项目中。Web 项目获取参考。业务逻辑层有这个类：`Public NotInheritable Class clsUserProfile` 它有这个属性：

```
Public ReadOnly Property AgencyCode() As Integer

    Get
        If clsAppInfo.IsWebApplication Then
            If (HttpContext.Current.Session(_AgencyCodeKey) Is Nothing) Then
                Return 0
            Else
                Return HttpContext.Current.Session(_AgencyCodeKey)
            End If
        Else
            Return AgencyCodeWIN
        End If
    End Get

End Property 
```

/ ******对于 windows 代理代码被声明为共享

```
 Public Shared Property AgencyCodeWIN() As Integer
        Get
            Return _AgencyCodeWIN
        End Get
        Set(ByVal value As Integer)
            _AgencyCodeWIN = value
        End Set

    End Property 
```

/ ***** ** ***** 判断是否为网页应用.......

```
Public Shared ReadOnly Property IsWebApplication() As Boolean
    Get
        If AppCodeWIN IsNot String.Empty Then      
                 'Desk top App is required to pass AppInfo
            Return False
        Else                                                  
                 'Web App is default
            Return True
        End If
    End Get
End Property 
```

当多个用户登录时，数据是否会被覆盖。很多人说不推荐，但找不到任何可证明的理由不推荐？

如果有人能给出明确的理由，那就太好了。

谢谢，桑迪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:43:48.987

> 多用户登录时数据是否会被覆盖

不

> 很多人说不推荐，但找不到任何可证明的理由不推荐？

在这种情况下，添加第三种运行模式会很痛苦。

实际上，您的类 clsUserProfile 不应该知道您的应用程序运行模式（webapp 或桌面）。它甚至不应该知道 HttpContext 和 Session 或者在两种运行模式之间进行选择，只是为了得到一个 AgencyCode。

clsUserProfile 应该是一个普通的 C# 对象。运行模式应在您的应用程序中的更高级别处理。

# objective-c - JSON 发布数据 iOS5

> ID：13290388
> 
> 赞同：-2
> 
> 时间：2012-11-08T13:58:07.097
> 
> 标签：objective-c, ios, cocoa-touch

如何在 iOS 5 中执行 JSON 发布方法，我已经使用 NSJSONSerialization 获取数据，但我不知道如何将数据发布到服务器。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:01:17.910

检查 AFNetworking 库[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_afnetworking/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_afnetworking/)，可在此处获取[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)，使发布和接收 JSON 数据变得轻而易举。

# c++ - 如何在使用 Eigen Library c++ 时删除特定的行或列

> ID：13290395
> 
> 赞同：14
> 
> 时间：2012-11-08T13:58:25.310
> 
> 标签：c++, eigen

我正在为我的项目使用 Eigen 库。我正在搜索如何从 Eigen 中的给定矩阵中删除特定的行或列。我不成功。

```
MatrixXd A = X1 X2 X3 X4
             Y1 Y2 Y3 Y4
             Z1 Z2 Z3 Z4
             A1 A2 A3 A4
MatrixXd Atransform = X1 X2 X4
                      Y1 Y2 Y4
                      Z1 Z2 Z4
                      A1 A2 A4
enter code here 
```

除了遍历整个矩阵或对矩阵 A 使用块操作。有没有简单的方法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-01-11T21:19:08.713

使用块函数更简洁：

```
void removeRow(Eigen::MatrixXd& matrix, unsigned int rowToRemove)
{
    unsigned int numRows = matrix.rows()-1;
    unsigned int numCols = matrix.cols();

    if( rowToRemove < numRows )
        matrix.block(rowToRemove,0,numRows-rowToRemove,numCols) = matrix.block(rowToRemove+1,0,numRows-rowToRemove,numCols);

    matrix.conservativeResize(numRows,numCols);
}

void removeColumn(Eigen::MatrixXd& matrix, unsigned int colToRemove)
{
    unsigned int numRows = matrix.rows();
    unsigned int numCols = matrix.cols()-1;

    if( colToRemove < numCols )
        matrix.block(0,colToRemove,numRows,numCols-colToRemove) = matrix.block(0,colToRemove+1,numRows,numCols-colToRemove);

    matrix.conservativeResize(numRows,numCols);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-01-17T10:21:45.593

您可以使用 Eigen 3.3.0+（2016.08 发布）更轻松、更短地完成此操作：

```
vector<int> indicesToKeep = vector<int>{ 1, 2, 3 };
VectorXi indicesToKeepVector = VectorXi(indicesToKeep.data(), indicesToKeep.size());
MatrixXf matrix = MatrixXf(); // your data should be here!
matrix = matrix(Eigen::placeholders::all, indicesToKeepVector); // select columns you want to keep(indicesToKeep), discard others
matrix = matrix(indicesToKeepVector, Eigen::placeholders::all); // select rows you want to keep(indicesToKeep), discard others
matrix = matrix(Eigen::seq(5, 10), Eigen::placeholders::all); // keep rows from 5 to 10
matrix = matrix(Eigen::placeholders::all, Eigen::seq(5, 10)); // keep columns from 5 to 10
matrix = matrix(Eigen::seqN(5, 5), Eigen::placeholders::all); // keep rows from 5 to 10
matrix = matrix(Eigen::placeholders::all, Eigen::seqN(5, 5)); // keep columns from 5 to 10 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-19T14:39:22.440

要改进 Andrew 的答案，请使用 bottomRows/rightCols。

```
void removeRow(Eigen::MatrixXd& matrix, unsigned int rowToRemove)
{
    unsigned int numRows = matrix.rows()-1;
    unsigned int numCols = matrix.cols();

    if( rowToRemove < numRows )
        matrix.block(rowToRemove,0,numRows-rowToRemove,numCols) = matrix.bottomRows(numRows-rowToRemove);

    matrix.conservativeResize(numRows,numCols);
}

void removeColumn(Eigen::MatrixXd& matrix, unsigned int colToRemove)
{
    unsigned int numRows = matrix.rows();
    unsigned int numCols = matrix.cols()-1;

    if( colToRemove < numCols )
        matrix.block(0,colToRemove,numRows,numCols-colToRemove) = matrix.rightCols(numCols-colToRemove);

    matrix.conservativeResize(numRows,numCols);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-23T16:05:03.473

您可能会发现以下静态版本更适合某些用途（并且更符合 Eigen 编译时效率的精神）。在这种情况下，您将创建一个没有行的新矩阵。可以为列构造一个类似的函数`.leftCols() .rightCols()`

```
template<typename T>
inline constexpr auto removeRow(const Eigen::Matrix<T, Eigen::Dynamic, Eigen::Dynamic>& matrix, const int& rowNum)
{
    return (Eigen::Matrix<T, Eigen::Dynamic, Eigen::Dynamic>(matrix.rows() - 1, matrix.cols())
        << static_cast<Eigen::Matrix<T, Eigen::Dynamic, Eigen::Dynamic>>(matrix.topRows(rowNum - 1)),
        static_cast<Eigen::Matrix<T, Eigen::Dynamic, Eigen::Dynamic>>(matrix.bottomRows(matrix.rows() - rowNum))).finished();
} 
```

享受！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-05T15:46:19.963

我知道这是一个老问题，但似乎 Eigen 现在支持创建由索引的行和列定义的子矩阵： [http](http://eigen.tuxfamily.org/bz/show_bug.cgi?id=329) [://eigen.tuxfamily.org/bz/show_bug.cgi?id=329 http://eigen。 tuxfamily.org/dox-devel/classEigen_1_1DenseBase.html#a0b44220621cd59a75cd0f48cc499518f](http://eigen.tuxfamily.org/dox-devel/classEigen_1_1DenseBase.html#a0b44220621cd59a75cd0f48cc499518f)

它似乎不在文档中......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-22T17:01:28.437

```
 inline Eigen::MatrixXd removeMatrixRow(const Eigen::MatrixXd original_matrix, const int row_to_remove)
  {
    // New matrix has one fewer rows
    Eigen::MatrixXd new_matrix(original_matrix.rows()-1, original_matrix.cols());
    // Track rows in new matrix. Skip one at row_to_remove.
    int row_to_fill = 0;
    for (int orig_matrix_row = 0; orig_matrix_row < original_matrix.rows(); ++orig_matrix_row)
    {
      if (orig_matrix_row != row_to_remove)
      {
        new_matrix.row(row_to_fill) = original_matrix.row(orig_matrix_row);
        ++row_to_fill;
      }
    }
    return new_matrix;
  } 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-01-11T06:25:45.847

我是 C++ 的新手，但此代码适用于可能的应用程序。

它仅适用于全动态矩阵，但可以对其进行调整。

如果有人有更好的方法，请告诉我我真的很想学习。

```
template<typename ScalarType>
void MatrixXdRemoveCol(Eigen::Matrix<ScalarType,-1,-1,0,-1,-1> *mat, int colindex)
{
    Eigen::Matrix<ScalarType,-1,-1,0,-1,-1> *auxmat = new Eigen::Matrix<ScalarType,-1,-1,0,-1,-1>;

    *auxmat = *mat;

    mat->resize(mat->rows(),mat->cols()-1);

    int rightColsSize = auxmat->cols()-colindex-1;

    mat->leftCols(colindex) = auxmat->leftCols(colindex);
    mat->rightCols(rightColsSize) = auxmat->rightCols(rightColsSize);
}

template<typename ScalarType>
void MatrixXdRemoveCols(Eigen::Matrix<ScalarType,-1,-1,0,-1,-1> *mat, std::vector<int>* cols)
{
    for(auto iter = cols->rbegin();iter != cols->rend();iter++)
        MatrixXdRemoveCol<ScalarType>(mat,*iter);
}

template<typename ScalarType>
void MatrixXdRemoveRow(Eigen::Matrix<ScalarType,-1,-1,0,-1,-1> *mat, int rowindex)
{
    Eigen::Matrix<ScalarType,-1,-1,0,-1,-1> *auxmat = new Eigen::Matrix<ScalarType,-1,-1,0,-1,-1>;

    *auxmat = *mat;

    mat->resize(mat->rows()-1,mat->cols());

    int BottomRowsSize = auxmat->rows()-rowindex-1;

    mat->topRows(rowindex) = auxmat->topRows(rowindex);
    mat->bottomRows(BottomRowsSize) = auxmat->bottomRows(BottomRowsSize);
} 
```

# android - 保存活动

> ID：13290403
> 
> 赞同：1
> 
> 时间：2012-11-08T13:58:47.363
> 
> 标签：android, android-activity

我有一个按钮点击我创建了一个活动

```
public void onClick(View v) {
            startActivity(new Intent(getApplicationContext(),
                    ContactsActivity.class));
        } 
```

结果可用内存减少

我想保存活动，当单击按钮开始我的活动（已存储）时，

这应该有助于减少内存泄漏

我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:08:51.443

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)。[http://developer.android.com/training/basics/activity-lifecycle/index.html](http://developer.android.com/training/basics/activity-lifecycle/index.html)。查看活动生命周期。还要通过活动堆栈。[http://developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)。[http://developer.android.com/guide/practices/ui_guidelines/activity_task_design.html](http://developer.android.com/guide/practices/ui_guidelines/activity_task_design.html)。您需要浏览这些链接，您可能会自己找到解决方案。

# java - 访问 Runnable 中的集合时出现 LazyInitializationException

> ID：13290404
> 
> 赞同：0
> 
> 时间：2012-11-08T13:58:53.933
> 
> 标签：java, multithreading, spring, hibernate, spring-transactions

我正在使用[Hibernate](http://www.hibernate.org/)阅读一些实体：

```
Criteria criteria = session.createCriteria(…);
List<Entity> list = (List<Entity>) criteria.list(); 
```

现在我正在遍历这个列表，并希望将 a 中的每个对象发送`Runnable`到`Executor`. 因此，我使用`RunnableBean`.

```
for (Entity entity : list) {
    IRunnableBean runnableBean = (IRunnableBean) 
        applicationContext.getBean("myRunnableBean", IRunnableBean.class);
    runnableBean.setEntity(entity);
    executor.execute(runnableBean);
} 
```

`RunnableBean`看起来像这样：

```
RunnableBean implements IRunnableBean {

    // Setter

    @Transactional
    void run() {
        entity.getMyCollection();
    }
} 
```

当我访问该集合时，我得到一个`org.hibernate.LazyInitializationException`( `no session or session was closed`)。

在 Spring 的日志中，我看到`run()`正确添加了事务方法。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:22:31.850

我猜你正在使用[Spring 的 OpenSessionInViewFilter](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/orm/hibernate3/support/OpenSessionInViewFilter.html)。如果是这样，这种行为是预期的。过滤器将数据库连接放在线程本地上下文中，这在您的`RunnableBean`.

由于`myCollection`没有预先加载，Spring 无法访问内部的数据库连接`RunnableBean`，也无法加载它。你需要：

*   `RunnableBean`在您的;创建一个封闭的会话包装器
*   将您的集合的 id 传递给`RunnableBean`而不是传递对象并将集合加载到里面`RunnableBean`

或者，您可以使您的实体快速加载`myCollection`，但这会使整个加载过程变慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:40:00.970

`for`只需在您已经编写的循环中添加以下行：

```
Hibernate.initialize(entity.getMyCollection()); 
```

这是急切地而不是懒惰地加载集合：`LazyInitializationException`不再。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:00:20.023

我还猜测（如@mindas）事务在您的 bean 中不可用，因为它在与保存事务的线程不同的线程中运行。就我的经验而言，spring 还使用线程局部变量来解析作用域代理，因此这些在异步运行的 bean 中也不起作用。

基本上我会尽量避免以异步方式运行需要事务的逻辑，因为异步调用运行时间更长（否则，为什么要使用异步调用？），这将阻塞事务和/或导致超时。

jpa 的标准 api 提供了仅针对特定查询急切获取关系的方法。也许这可能是一个选择？否则访问集合的 size() 方法将初始化它。

# mdx - MDX 一步一步的书

> ID：13290412
> 
> 赞同：1
> 
> 时间：2012-11-08T13:59:05.723
> 
> 标签：mdx

我正在尝试使用名为“Microsoft SQL Server 2008 MDX Step by step”的书来学习 MDX，我下载了这本书的示例数据库，但是在尝试附加数据库时它给了我一个错误“访问被拒绝”，我正在尝试要将数据库附加到 SQL Server 2008 R2，将其附加到 R2 是否会有所不同，因为本书教程和示例仅适用于 2008 年？？请注意，我搜索了错误，它说我还必须删除与示例数据库一起下载的日志文件，我也这样做了，但没有任何效果

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T20:19:25.577

我有几次同样的错误。它与您的版本无关，我在 SQL Server 2008 和 SQL Server 2012 上都这样做过。这是因为某些拒绝访问您下载和安装 MDX-stuff 的文件夹。解决它的一种方法是将“MdxStepByStep.mdf”和“MdxStepBySteplog”文件复制到其他数据库所在的数据文件夹中。我的路径是例如：

```
"C:\Program Files\Microsoft SQL Server\MSSQL11\MSSQL\DATA". 
```

然后，您只需将脚本的路径更改为：

```
exec master..sp_attach_db
'MdxStepByStep',
'C:\Program Files\Microsoft SQL Server\MSSQL11\MSSQL\DATA\MdxStepByStep.mdf' 
```

不要复制“MdxStepByStep_log”，因为这样你会得到一个文件已经存在的错误。它应该可以工作，如果我没记错的话，分析立方体也不应该有任何问题，告诉我是否有，我会调查它。

# video - 为什么从 avi 容器解码帧并将它们编码为 h264/mp 4 不起作用？

> ID：13290413
> 
> 赞同：5
> 
> 时间：2012-11-08T13:59:06.020
> 
> 标签：video, ffmpeg, h.264, video-encoding, libavcodec

我开始使用 ffmpeg，我想将 avi 文件转换为 mp4/h264 文件。我读过很多帖子，包括[这个](https://stackoverflow.com/questions/5964142/raw-h264-frames-in-mpegts-container-using-libavcodec)，但我找不到任何好的例子如何将帧保存到 mp4 文件。下面的代码是从 avi 文件解码帧并将其编码为 H264/mp​​4 文件的简化代码，但是当我保存帧时，无法播放 mp4 文件。我想我在编码方面做错了

如果您能告诉我出了什么问题以及如何解决，我将不胜感激。

```
const char* aviFileName = "aviFrom.avi";
const char* mp4FileName = "mp4To.mp4";

// Filling pFormatCtx by open video file and Retrieve stream information
// ...
// Retrieving codecCtxDecode and opening codecDecode 
//...

// Get encoder
codecCtxEncode = avcodec_alloc_context();   
codecCtxEncode->qmax = 69; 
codecCtxEncode->max_qdiff = 4;
codecCtxEncode->bit_rate = 400000;
codecCtxEncode->width = codecCtxDecode->width;
codecCtxEncode->height = codecCtxDecode->height;
codecCtxEncode->pix_fmt = AV_PIX_FMT_YUV420P;   
codecEncode = avcodec_find_encoder(CODEC_ID_H264);
if(codecEncode == NULL)
    return -1;  
if(avcodec_open2(codecCtxEncode, codecEncode, NULL))
    return -1;

SwsContext *sws_ctx = sws_getContext(codecCtxDecode->width, codecCtxDecode->height, codecCtxDecode->pix_fmt,
                            codecCtxDecode->width, codecCtxDecode->height, AV_PIX_FMT_YUV420P,
                            SWS_BILINEAR, NULL, NULL, NULL);

// Allocate an AVFrame structure    
frameDecoded = avcodec_alloc_frame();
frameEncoded = avcodec_alloc_frame();    

avpicture_alloc((AVPicture *)frameEncoded, AV_PIX_FMT_YUV420P, codecCtxDecode->width, codecCtxDecode->height);

while(av_read_frame(pFormatCtx, &packet)>=0)
{       
    // Is this a packet from the video stream?
    if(packet.stream_index==videoStreamIndex) {
        avcodec_decode_video2(codecCtxDecode, frameDecoded, &frameFinished, &packet);
        // Did we get a video frame?
        if(frameFinished)
        {           
            fwrite(packet.data, packet.size,
            sws_scale(sws_ctx, frameDecoded->data, frameDecoded->linesize, 0, codecCtxDecode->height, 
                        frameEncoded->data, frameEncoded->linesize);

            int64_t pts = packet.pts;
            av_free_packet(&packet);
            av_init_packet(&packet);
            packet.data = NULL;
            packet.size = 0;    
            frameEncoded->pts = pts;                

            int failed = avcodec_encode_video2(codecCtxEncode, &packet, frameEncoded, &got_output);
            if(failed)
            {
                exit(1);
            }
            fwrite(packet.data,1,packet.size, mp4File);
        }
    }

    av_free_packet(&packet);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T15:05:31.823

您必须使用 ffmpeg 输出上下文，而不是直接编写原始数据包。

您需要执行的基本步骤：

```
// find output format
AVOutputFormat * outputFormat = av_guess_format("mp4", NULL, NULL);
AVFormatContext *outFmtCtx = NULL;

// create output cotext
avformat_alloc_output_context2(&outFmtCtx, outputFormat, NULL, NULL);

// create new stream
AVStream * outStrm = avformat_new_stream(outFmtCtx, codecEncode);
avcodec_get_context_defaults3(outStrm->codec, *codec);

outStrm->codec->codec_id = codec_id;
outStrm->codec->coder_type = AVMEDIA_TYPE_VIDEO;
/// outStrm->codec-> ... 
/// set all fields marked as "MUST be set by user" in avcodec.h
/// ....

// create file
avio_open2(&outFmtCtx->pb, file_name, AVIO_FLAG_WRITE, NULL, NULL);
avformat_write_header(outFmtCtx, NULL);

/// write packets
/// for ( )
av_interleaved_write_frame(outFmtCtx, packet);

/// finish
av_write_trailer(outFmtCtx);
avio_close(outFmtCtx->pb);
avformat_free_context(outFmtCtx); 
```

**UPD：** 复制视频而不重新编码的完整代码：

```
extern "C" {
#include <libavformat/avformat.h>
#include <libavcodec/avcodec.h>
#include <libavutil/avutil.h>
}

int main(int argc, char* argv[])
{
    const char * kInputFileName = "f:/Projects/Temp/testFFMPEG2/test/test_in.avi";
    const char * kOutputFileName = "f:/Projects/Temp/testFFMPEG2/test/text_out.avi";
    const char * kOutputFileType = "avi";

    av_register_all();

    AVFormatContext * inCtx = NULL;
    int err = avformat_open_input(&inCtx, kInputFileName, NULL, NULL);
    if (err < 0)
        exit(1);

    err = av_find_stream_info(inCtx);
    if (err < 0)
        exit(1);

    int vs = -1;
    for (unsigned int s = 0; s < inCtx->nb_streams; ++s)
    {
        if (inCtx->streams[s] &&
            inCtx->streams[s]->codec &&
            inCtx->streams[s]->codec->codec_type == AVMEDIA_TYPE_VIDEO)
        {
            vs = s;
            break;
        }        
    }

    if (vs == -1)
        exit(1);

    AVOutputFormat * outFmt = av_guess_format(kOutputFileType, NULL, NULL);
    if (!outFmt)
        exit(1);

    AVFormatContext *outCtx = NULL;
    err = avformat_alloc_output_context2(&outCtx, outFmt, NULL, NULL);

    if (err < 0 || !outCtx)
        exit(1);

    AVStream * outStrm = av_new_stream(outCtx, 0);
    AVStream const * const inStrm = inCtx->streams[vs];
    AVCodec * codec = NULL;
    avcodec_get_context_defaults3(outStrm->codec, codec);
    outStrm->codec->thread_count = 1;

#if (LIBAVFORMAT_VERSION_MAJOR == 53)
    outStrm->stream_copy = 1;
#endif

    outStrm->codec->coder_type = AVMEDIA_TYPE_VIDEO;
    if(outCtx->oformat->flags & AVFMT_GLOBALHEADER) 
        outStrm->codec->flags |= CODEC_FLAG_GLOBAL_HEADER;

    outStrm->codec->sample_aspect_ratio = outStrm->sample_aspect_ratio = inStrm->sample_aspect_ratio; 

#if (LIBAVFORMAT_VERSION_MAJOR == 53)
    outCtx->timestamp = 0;
#endif

    err = avio_open(&outCtx->pb, kOutputFileName, AVIO_FLAG_WRITE);
    if (err < 0)
        exit(1);

#if (LIBAVFORMAT_VERSION_MAJOR == 53)
    AVFormatParameters params = {0};
    err = av_set_parameters(outCtx, &params);
    if (err < 0)
        exit(1);
#endif

    outStrm->disposition = inStrm->disposition;
    outStrm->codec->bits_per_raw_sample = inStrm->codec->bits_per_raw_sample;
    outStrm->codec->chroma_sample_location = inStrm->codec->chroma_sample_location;
    outStrm->codec->codec_id = inStrm->codec->codec_id;
    outStrm->codec->codec_type = inStrm->codec->codec_type;

    if (!outStrm->codec->codec_tag)
    {
        if (! outCtx->oformat->codec_tag
            || av_codec_get_id (outCtx->oformat->codec_tag, inStrm->codec->codec_tag) == outStrm->codec->codec_id
            || av_codec_get_tag(outCtx->oformat->codec_tag, inStrm->codec->codec_id) <= 0)
                    outStrm->codec->codec_tag = inStrm->codec->codec_tag;
    }

    outStrm->codec->bit_rate = inStrm->codec->bit_rate;
    outStrm->codec->rc_max_rate = inStrm->codec->rc_max_rate;
    outStrm->codec->rc_buffer_size = inStrm->codec->rc_buffer_size;

    const size_t extra_size_alloc = (inStrm->codec->extradata_size > 0) ?
                                    (inStrm->codec->extradata_size + FF_INPUT_BUFFER_PADDING_SIZE) :
                                     0;

    if (extra_size_alloc)
    {
        outStrm->codec->extradata = (uint8_t*)av_mallocz(extra_size_alloc);    
        memcpy( outStrm->codec->extradata, inStrm->codec->extradata, inStrm->codec->extradata_size);
    }
    outStrm->codec->extradata_size = inStrm->codec->extradata_size;

    AVRational input_time_base = inStrm->time_base;
    AVRational frameRate = {25, 1};
    if (inStrm->r_frame_rate.num && inStrm->r_frame_rate.den 
        && (1.0 * inStrm->r_frame_rate.num / inStrm->r_frame_rate.den < 1000.0))
    {
        frameRate.num = inStrm->r_frame_rate.num;
        frameRate.den = inStrm->r_frame_rate.den;
    }

    outStrm->r_frame_rate = frameRate;
    outStrm->codec->time_base = inStrm->codec->time_base;

    outStrm->codec->pix_fmt = inStrm->codec->pix_fmt;
    outStrm->codec->width =  inStrm->codec->width;
    outStrm->codec->height =  inStrm->codec->height;
    outStrm->codec->has_b_frames =  inStrm->codec->has_b_frames;
    if (! outStrm->codec->sample_aspect_ratio.num) {
        AVRational r0 = {0, 1};
        outStrm->codec->sample_aspect_ratio =
            outStrm->sample_aspect_ratio =
            inStrm->sample_aspect_ratio.num ? inStrm->sample_aspect_ratio :
            inStrm->codec->sample_aspect_ratio.num ?
            inStrm->codec->sample_aspect_ratio : r0;
    }
#if LIBAVFORMAT_VERSION_MAJOR == 53
    av_write_header(outFmtCtx);
#else
    avformat_write_header(outCtx, NULL);
#endif

    for (;;)
    {
        AVPacket packet = {0};
        av_init_packet(&packet);

        err = AVERROR(EAGAIN);
        while (AVERROR(EAGAIN) == err) 
            err = av_read_frame(inCtx, &packet);

        if (err < 0)
        {
            if (AVERROR_EOF != err && AVERROR(EIO) != err)
            {
                // error
                exit(1);            
            }
            else
            {
                // end of file
                break;
            }            
        }

        if (packet.stream_index == vs)
        {

            err = av_interleaved_write_frame(outCtx, &packet);
            if (err < 0)
                exit(1);
        }            

        av_free_packet(&packet);        

    }

    av_write_trailer(outCtx);
    if (!(outCtx->oformat->flags & AVFMT_NOFILE) && outCtx->pb)
        avio_close(outCtx->pb);

    avformat_free_context(outCtx);
    av_close_input_file(inCtx);
    return 0;
} 
```

# ruby-on-rails - 打开并执行保存在应用程序中的批处理文件

> ID：13290414
> 
> 赞同：0
> 
> 时间：2012-11-08T13:59:07.223
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我写了一个批处理文件，它存储在我的控制器中，它应该写入公共文件夹中的 .bat 文件。

代码是：

```
def checkin
    file_path = "#{Rails.root}/public/batfiles/#{Time.now.hour}_#{Time.now.min}_#   {Time.now.sec}.bat"
    file = File.new(file_path, 'w')
    svn_path = params[:svn_path]
    content = ''
    content += "@echo off\n"
    content += "echo.\n"
    content += "echo. [ SVN Updater ]\n"
    content += "set SVNURL=#{svn_path}\n"
    content += "set SOURCE=C:\\Users\\"
    content += "set SVN=C:\\Program Files\\TortoiseSVN\\bin\n"
    content += "echo.\n"
    content += '"%SVN%\TortoiseProc.exe" /command:checkout /path:"%SOURCE%" /url:%SVNURL% /closeonend:2'
    content += "echo. done.\n"
    content += "echo.\n"
    content += "echo. Operation complete.\n"
    file.write content
    file.close
    send_file(file.path)
  end 
```

当我将文件保存在 public/batfiles/.bat 中时，我想不在服务器上而是在用户系统上运行该文件。

现在用户下载 .bat 文件并从浏览器运行它。相反，我希望用户什么都不做，只是让应用程序打开他的 .bat 文件并在他的本地机器上运行它。

# java - 使用 @ExceptionHandler 基于 @RequestMapping 提供 JSON 或 HTML 响应

> ID：13290417
> 
> 赞同：5
> 
> 时间：2012-11-08T13:59:10.427
> 
> 标签：java, spring-mvc

我的控制器具有根据 @RequestMapping(produces="", consumes="") 注释生成 JSON 或 HTML 的方法。但是，在以通用方式处理异常时，我遇到了问题。

```
@RequestMapping(method = POST)
public String add(@Valid MyForm form, BindingResult result, Model model) {
    if (result.hasErrors()) {
        return "edit";
    }

    throw new RuntimeException("Error adding");

    return "edit";
}

@RequestMapping(method = POST, produces = "application/json", consumes = "application/json")
@ResponseBody
public Map<String, Object> addJSON(@RequestBody @Valid MyForm form, Model model) {
    throw new RuntimeException("Error adding");
} 
```

上述两种方法如何写@ExceptionHandler？非 JSON 的那个应该添加一个属性到`Model`.

```
model.addAttribute("error", exception.getMessage()); 
```

具有 JSON 响应类型的应该将错误返回为`Map`，以便稍后序列化为 JSON。

我尝试了以下方法，但 spring 不喜欢使用相同异常类型声明的两个不同的 @ExceptionHandler 注释方法。

```
@ExceptionHandler(RuntimeException.class)
@ResponseStatus(value = HttpStatus.BAD_REQUEST)
@RequestMapping(produces = "application/json")
@ResponseBody
public Map<String, Object> handleExceptionAsJSON(RuntimeException exception) {
    Map<String, Object> map = new HashMap<>();
    map.put("error", exception.getMessage());

    return map;
}

@ExceptionHandler(RuntimeException.class)
public Map<String, Object> handleException(RuntimeException exception) {
    Map<String, Object> map = new HashMap<>();
    map.put("error", exception.getMessage());

    return map;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:19:40.657

你们俩`ExceptionHandler`都有`RuntimeException`争论。因此，在您的情况下，只有 1`exceptionhandler`受到尊重。

我不确定你在做什么。但我想写你自己的`exceptionresolver`会解决你的问题。我已经这样做了。我创建了自己的`exceptionresolver`，仅用于 Ajax 请求，然后将其与现有的`ExceptionHandlerExceptionResolver`.

# jquery - jQuery Mobile - 嵌套列表视图显示问题

> ID：13290418
> 
> 赞同：1
> 
> 时间：2012-11-08T13:59:14.980
> 
> 标签：jquery, html, jquery-mobile

我正在为搜索引擎构建移动界面。主 CGI 脚本以`<ul>`. 然后我有一个 JQM 脚本，它遍历每个列表项并向另一个 CGI 脚本发出 Ajax 请求，以收集更多信息并将其作为嵌套的`<ul>`. 机械工作正常，我只是遇到了显示器的问题，看起来不像我预期的那样。

首先，我将向您展示我的代码，然后是我希望看到的，最后是我实际看到的。

这是主要 CGI 脚本生成的 HTML 的截断版本（来自 Firebug，所以在 jQuery 使用它之后它是邪恶的），实际上有许多列表元素，但我只是展示一个作为插图：

```
<ul id="searchresults" data-role="listview" class="ui-listview">
    <li id="64076268" class="result_item ui-li ui-li-static ui-btn-up-b ui-li-has-count">
        <a href="#indexPage&amp;ui-page=searchresults-0">
            <h1 class="ui-li-heading">Programming Perl / Tom Christiansen, Brian D. Foy &amp; Larry Wall.</h1>
            <p class="creator ui-li-desc">Tom Christiansen brian d foy; Larry Wall; Larry Wall</p>
            <p class="ui-li-desc">c2012</p>
            <span class="ui-li-count ui-btn-up-c ui-btn-corner-all">2 versions</span>
        </a>
    </li>
</ul> 
```

该`<a>`元素是由 jQuery 生成的，我不明白为什么。我期待的是这样的：

```
<ul id="searchresults" data-role="listview" class="ui-listview">
    <li id="64076268" class="result_item ui-li ui-li-static ui-btn-up-b ui-li-has-count">
        <h1 class="ui-li-heading">Programming Perl / Tom Christiansen, Brian D. Foy &amp; Larry Wall.</h1>
        <p class="creator ui-li-desc">Tom Christiansen brian d foy; Larry Wall; Larry Wall</p>
        <p class="ui-li-desc">c2012</p>
        <span class="ui-li-count ui-btn-up-c ui-btn-corner-all">2 versions</span>
        <ul class="frbr">
            <li>
                <h1>Programming Perl</h1>
            </li>
            <li>
                <h1>Programming Perl / Tom Christiansen, Brian D. Foy &amp; Larry Wall.</h1>
            </li>
        </ul>
    </li>
</ul> 
```

据我了解，这应该导致嵌套`<ul>`的页面呈现为一个单独的页面，当用户单击父级时将显示该页面`<li>`。这当然是listviews 上的jQuery 文档描述它的方式。

这是抓取嵌套列表并将其附加到父级的 jQuery `<li>`：

```
$(document).ready(function(){

    $(".result_item").each(function() {

        var me = $(this);

        $.ajax({
            type: "GET",
            url: "/m/ajax/get_frbrgroup_details.cgi",
            data: { frbrgroup: me.attr("id") },
            datatype: "text",
            cache: false,
            success: function(reply) {
                me.append(reply);
            },
            complete: function() {
                $("#searchresults").listview("refresh");
            }

        })
    });
}); 
```

最后是我期望看到的和我实际看到的截图：

[预期的](http://users.aber.ac.uk/aai/screenshot-2.png)

[我实际看到的](http://users.aber.ac.uk/aai/screenshot-1.png)

有没有人能够对此有所了解，因为根据我所做的所有研究，我认为我做的一切都是正确的！谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:43:22.677

终于想通了这个。我错过了这样一个事实，即当 JQM 在最初呈现页面时处理页面时，它将嵌套`<ul>`移出其 parent `<li>`，因此我尝试将其定位到 append 的尝试失败了，就像我的 listview("refresh") 在父级上一样`<ul>`. 所以我现在给嵌套`<ul>`一个唯一的 id，所以一旦 JQM 将它移出父级，`<li>`我仍然可以使用追加和刷新来定位它。似乎工作！:)

# c# - 从 onchange 触发 .click() 时 IE9 上出现“SCRIPT5 访问被拒绝”错误

> ID：13290421
> 
> 赞同：10
> 
> 时间：2012-11-08T13:59:25.247
> 
> 标签：c#, javascript, jquery, asp.net, internet-explorer

我们希望减少用户在我们的网站上上传文件所需的步骤；所以我们使用 jQuery 使用以下标记（简化）打开和回发文件：

```
<a onclick="$('#uplRegistrationImage').click();">
    Change profile picture
</a>

<!-- Hidden to keep the UI clean -->
<asp:FileUpload ID="uplRegistrationImage" 
                runat="server" 
                ClientIDMode="static"
                Style="display:none"
                onchange="$('#btnSubmitImage').click();"    />

<asp:Button runat="server" 
            ID="btnSubmitImage" 
            ClientIDMode="static" 
            Style="display:none" 
            OnClick="btnSubmitImage_OnClick" 
            UseSubmitBehavior="False" /> 
```

这在 Firefox 和 Chrome 中运行良好；单击链接时打开文件对话框，并在选择文件时触发回发。

但是在 IE9 中，文件上传已加载且用户选择了文件后；代替 OnChange 工作，我收到“SCRIPT5 访问被拒绝”错误。我尝试设置任意超时，设置间隔以检查文件是否无济于事。

还有许多与此相关的其他问题；但是似乎没有一个像样的答案（有人说将文件对话框设置为透明并悬停在按钮后面！）

有没有其他人解决了这个问题？还是绝对有必要为 IE 用户提供一个按钮？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T05:47:51.360

出于安全原因，您尝试执行的操作是不可能的。似乎 IE9 不允许您以这种方式提交表单，除非它是在触发它的 File Upload 控件上的实际鼠标单击。

为了争论，我能够使用您的代码在`change`处理程序中进行提交，但它**仅**在我自己单击`Browse`按钮时才起作用。我什至在`$(document).ready`方法中为`change`处理程序设置的变量设置了轮询，指示应该触发提交 - 这也不起作用。

这个问题的解决方案似乎是：

1.  设置控件样式，使其位于按钮后面。您在问题中提到了这一点，但是 Romas 在此处提供的答案[在 JavaScript 中，我可以以编程方式为文件输入元素触发“点击”事件吗？](https://stackoverflow.com/questions/210643/in-javascript-can-i-make-a-click-event-fire-programmatically-for-a-file-input)确实有效（我在 IE9、Chrome v23 和 FF v15 中尝试过）。
2.  使用基于 Flash 的方法（GMail 就是这样做的）。我试用了[Uploadify](http://www.uploadify.com/demos/)演示，它似乎工作得很好。

样式化文件上传：

[http://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

[http://www.shauninman.com/archive/2007/09/10/styling_file_inputs_with_css_and_the_dom](http://www.shauninman.com/archive/2007/09/10/styling_file_inputs_with_css_and_the_dom)

参考：

[jQuery：模拟点击 <input type="file" /> 在 Firefox 中不起作用？](https://stackoverflow.com/questions/1829774/jquery-simulating-a-click-on-a-input-type-file-doesnt-work-in-firefox?lq=1)

[使用 Javascript 触发 IE9 文件输入](https://stackoverflow.com/questions/8838485/ie9-file-input-triggering-using-javascript)

[在 IE8 上获取访问被拒绝错误](https://stackoverflow.com/questions/3935001/getting-access-is-denied-error-on-ie8/6376654)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-01T07:04:53.323

嘿，这个解决方案有效。下载我们应该使用 MSBLOB

```
$scope.getSingleInvoicePDF = function(invoiceNumberEntity) {
   var fileName = invoiceNumberEntity + ".pdf";
   var pdfDownload = document.createElement("a");
   document.body.appendChild(pdfDownload);

   AngularWebService.getFileWithSuffix("ezbillpdfget",invoiceNumberEntity,"pdf" ).then(function(returnedJSON) {
       var fileBlob = new Blob([returnedJSON.data], {type: 'application/pdf'});
       if (navigator.appVersion.toString().indexOf('.NET') > 0) { // for IE browser
           window.navigator.msSaveBlob(fileBlob, fileName);
       } else { // for other browsers
           var fileURL = window.URL.createObjectURL(fileBlob);
           pdfDownload.href = fileURL;
           pdfDownload.download = fileName;
           pdfDownload.click();      
       }
   });
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T17:48:35.847

这个解决方案看起来可能会奏效。您必须将其包装在 a 中`<form>`并将其发布到 jquery 更改处理程序中，并可能使用 __eventtarget 或 iframe 或 Web 表单使用的任何内容在 form_load 中处理它，但它允许您选择一个文件，并通过提交表单，它应该发送它。但是，我无法对其进行测试，因为我在家中没有设置环境。

[http://jsfiddle.net/axpLc/1/](http://jsfiddle.net/axpLc/1/)

```
<a onclick="$('#inputFile').click();">
    Change profile picture
</a>
<div id='divHide'>

    <input id='inputFile' type='file' />

</div>

$('#inputFile').change(function() { alert('ran'); });

#divHide { display:none; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T21:31:12.650

好吧，就像 SLC 所说的那样，您应该使用该`<Form>`标签。

首先你应该指出文件的数量；这应该由您的输入字段确定。第二步是将它们堆叠成一个数组。

```
<input type="file" class="upload" name="fileX[]"/> 
```

然后创建一个循环；通过循环，它将根据当前所在的输入字段自动确定。

```
 $("input[@type=file]:nth(" + n +")") 
```

然后你会注意到选择的每个文件；将输入名称替换为文件名。这应该是通过 jQuery 提交多个文件的非常非常基本的方式。

如果您想要一个项目：

```
$("input[@type=file]").change(function(){
   doIt(this, fileMax);
 }); 
```

那应该在找到最大文件的地方创建一个 Div；并附加到`onEvent`. 上面的相关代码也需要这些：

```
 var fileMax = 3;
 <input type="file" class="upload" name="fileX[]" /> 
```

这应该导航 DOM 父树；然后分别创建字段。这是一种方式；另一种方式是您在上面看到的 SLC 方式。有很多方法可以做到这一点；这只是你想要操纵它多少 jQuery？

希望这会有所帮助；对不起，如果我误解了你的问题。

# c++ - WaitNamedPipe 不等待

> ID：13290424
> 
> 赞同：0
> 
> 时间：2012-11-08T13:59:41.183
> 
> 标签：c++, windows, named-pipes

我在一个等待客户端的进程上有一个管道（服务器）`ConnectNamedPipe`。
在客户端进程中，我正在等待服务器开始监听`WaitNamedPipe`，我给它设置了 5000 毫秒的超时时间。
我尝试测试客户端，即使服务器没有运行，`WaitNamedPipe`也没有等待。

我不知道这里是否有任何代码有用，因为我只是尝试使用这些方法。但如果你想看什么，就告诉我什么是相关的。:)

哦，奇怪的是它给了我错误代码2：“找不到文件”。
它不应该等到管道打开（管道是“文件”，不是吗？）

什么会导致`WaitNamedPipe`不等待？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:06:36.157

它不等待管道出现，它等待现有管道变得可用（即未完成的`ConnectNamedPipe`）：

> 如果不存在指定命名管道的实例，则 WaitNamedPipe 函数会立即返回，而不管超时值如何。

# eclipse - 透视名称更改未出现

> ID：13290425
> 
> 赞同：1
> 
> 时间：2012-11-08T13:59:41.533
> 
> 标签：eclipse, eclipse-plugin, eclipse-juno

我有一个插件，我在其中创建了一个透视图。现在我在plugin.xml 中更改了透视的名称。如果我从源头运行，它工作正常。当我导出插件时，透视的名称仍然是旧的。我正在使用 Eclipse Juno 4.2

我完全失去了任何线索。我检查了导出插件中的 plugin.xml 文件，它具有新名称。我犯了什么错误？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T11:41:31.423

我的问题是使用 plugin.XML 添加透视图和视图，更改没有生效，因为在开发环境中运行插件项目时，eclipse 在工作区目录的父级中创建了一个**“runtime-(pluginProjectName).application** ”文件夹。

如果您删除此文件夹，则 eclipse 应该使用对 Views 和 Perspectives 结构所做的新更改运行。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:38:19.417

[http://www.eclipsezone.com/eclipse/forums/t61566.html](http://www.eclipsezone.com/eclipse/forums/t61566.html)这个链接帮助我解决了这个问题。我应该早先在这一行中搜索。我希望这对其他人有帮助。如果出现此类问题，请清理您的日食

# android - Android 应用程序自动启动

> ID：13290426
> 
> 赞同：0
> 
> 时间：2012-11-08T13:59:41.470
> 
> 标签：android, broadcastreceiver, autostart

我正在开发一个 Android 应用程序，我希望它在手机启动后立即启动。我使用了广播接收器，意图过滤器启动完成，并且权限，我认为它正在工作；我打开手机，它启动，然后显示主菜单，大约 30 秒后，我的应用程序启动。这是它的正常行为吗？我希望它立即启动，甚至不先显示主菜单。那可能吗？还是这是我能得到的最好的？我在谷歌没有找到任何关于这个问题的信息，而且我对 Android 比较陌生，所以我不确定这是否是正常行为。希望你能帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:11:38.290

听起来您正在寻找的是一项服务。它将在后台运行，并且可以设置为自动启动。我不确定它是否一定会比您的活动更快，但我认为它会。检查这些文件：http: [//developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

# tsql - SQL Server Management Studio 事务和变量

> ID：13290428
> 
> 赞同：0
> 
> 时间：2012-11-08T13:59:52.930
> 
> 标签：tsql, ssms

在 SSMS 2012 中，设置后`Options > Query Execution > ANSI > SET IMPLICIT_TRANSACTIONS`，请参阅[此 SO 帖子](https://stackoverflow.com/questions/3047676/how-to-enable-automatic-transaction-scoping-on-sql-server-management-studio)

我在查询窗口中有以下代码：

```
begin transaction 
    select @@TRANCOUNT
    begin
    declare @someNumber int; set @someNumber = 1; 
    print @someNumber;
    end
rollback 
```

当我选择整个块并按`Execute`时，我看到了预期的结果，即 1。

但是，当我选择前 4 行并执行时，然后选择第 5 行，即`print @someNumber;`，我收到以下消息：

> *Msg 137, Level 15, State 2, Line 1*
> *必须声明标量变量“@someNumber”。*

变量的范围究竟是什么？

我很困惑。有人可以阐明或指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:01:47.390

该[变量的范围是*每批*。](http://msdn.microsoft.com/en-us/library/ms188927%28SQL.105%29.aspx)

> 局部变量的范围是声明它的批次。

“执行”的每一次按下都是一个批次。所以，对于第二次运行，它没有被声明

2次运行在做什么是这样的

```
--start of batch 1
    begin transaction 
        select @@TRANCOUNT
        begin
        declare @someNumber int; set @someNumber = 1; 
--end of batch 1
        GO --separate batch after this
--start of batch 2
        print @someNumber;
        end
    rollback
--end of batch 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:03:07.970

在 SSMS 中，变量在执行期间存在。

如果你只执行声明，它会在执行结束时死掉。

如果您随后执行变量的 print 语句，则它没有在此执行中声明，因此它不存在。

# python - 使用 threading.Lock 作为上下文管理器

> ID：13290429
> 
> 赞同：18
> 
> 时间：2012-11-08T13:59:55.873
> 
> 标签：python, multithreading, contextmanager

在[线程](https://docs.python.org/library/threading.html#using-locks-conditions-and-semaphores-in-the-with-statement)模块的文档中它说：

> 该模块提供的所有具有`acquire()`和`release()`方法的对象都可以用作[`with`](https://docs.python.org/reference/compound_stmts.html#with)语句的上下文管理器。该`acquire()`方法将在进入块时`release()`调用，并在退出块时调用。

我想知道它是在阻塞模式还是非阻塞模式下调用的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-08T14:06:18.263

通过查看[CPython 源代码](https://github.com/python/cpython/blob/d8ca2354ed30c12b9ce37c4535222b700a727b32/Lib/threading.py#L95)，它似乎是使用默认参数调用的，这意味着处于阻塞模式。

您要特别查看的方法是在块[`__enter__()`](https://github.com/python/cpython/blob/d8ca2354ed30c12b9ce37c4535222b700a727b32/Lib/threading.py#L161)的开头调用的方法和在末尾调用的方法。`with`[`__exit__()`](https://github.com/python/cpython/blob/d8ca2354ed30c12b9ce37c4535222b700a727b32/Lib/threading.py#L186-L187)

# php - 从 SimpleXMLElement 到 SimpleXMLIterator

> ID：13290430
> 
> 赞同：4
> 
> 时间：2012-11-08T13:59:56.633
> 
> 标签：php, xml, simplexml

我有一个很好的函数，可以将（简单的，duh）xml 转换为数组，为此它使用了`SimpleXmlIterator`类。

它工作得很好，但我想让它不仅接受 xml 源字符串或`SimpleXmlIterator`对象，而且`SimpleXmlElement`因为我更频繁地使用它们而不是迭代器（实际上我只是在那个函数中使用）。

到目前为止我所做的是

```
$iter = new SimpleXmlIterator($xml->asXML()); 
```

但对我来说，这就像从东京经过东京从巴黎到伦敦一样。毕竟，`SimpleXmlIterator`extends `SimpleXmlElement`，那么有没有更好的方法将`SimpleXmlElement`对象转换为 a `SimpleXmlIterator`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-27T07:37:28.197

[您可以通过在http://php.net/manual/de/function.simplexml-load-file.php](http://php.net/manual/de/function.simplexml-load-file.php)中设置第二个参数来在开头使用 SimpleXMLIterator

```
$yourSimpleXMLIteratorObject = simplexml_load_file("your_file.xml","SimpleXMLIterator"); 
```

所有产生的对象，现在都是 SimpleXMLIterator-Objects

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T18:42:35.660

`SimpleXMLIterator`如果您打算这样使用它们，为什么不首先将所有 XML 解析为对象呢？

据我所知，没有一种简单的方法可以`SimpleXMLElement`将`SimpleXMLIterator`. 这些类只是简单地包装了一个 libxml 资源，因此您*会*认为有一种方法可以获取资源句柄并将其传递给`SimpleXML*`构造函数，但如果有的话对我来说是新闻。

# c++ - 如何使 C++ 类能够“返回”？（或用户定义类型的返回动态）

> ID：13290431
> 
> 赞同：2
> 
> 时间：2012-11-08T13:59:59.880
> 
> 标签：c++, class, coding-style

当我们在函数中使用 return 语句返回用户定义的类型（特别是类）时会发生什么。假设我们有一个名为“DMatrix”的 c++ 类

```
DMatrix someFunc()
{  
  DMatrix mymat;
  /* Some operations on this matrix */  
  return mymat;  
}; 
```

在 main() 的某个地方，我想做：

```
DMatrix d;
d = someFunc(); 
```

在堆栈操作方面究竟调用了什么？
我想为了类 DMatrix 是可返回的，有一个复制构造函数（这样这个类的实例可以通过引用传递）和定义的 = 运算符就足够了。我对吗？

背后的动机：这个问题背后的动机是双重的。1）我使用一个定义了矩阵类型的库，比如说 DMatrix。我可以编写返回 DMatrix 类型的函数吗？
2）第二个原因当然是要更深入地了解返回自定义数据类型和返回 int 或 double 等基本数据类型在堆栈级别的区别。因此，在 C++ 中编写更好的类。也许这必须成为一个单独的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:04:58.490

您应该实现一个复制构造函数，但请注意，这实际上是那些有趣的场景之一，您可能会看到二进制的“调试”版本和“发布”版本之间的语义差异。大多数编译器将优化对复制构造函数的调用并在此实例中执行[返回值优化。](http://en.wikipedia.org/wiki/Return_value_optimization)在这种情况下，规范特别允许编译器使用复制构造函数来执行此操作。

尝试在复制构造函数中打印某些内容，您会发现在运行发布版本时不会打印，但在调试版本中会打印。

此外，如果您使用的是 C++11，则在您返回 mymat 时，mymat 将是所谓的右值（临时对象）。在 C++11 中可以声明一个[移动构造函数](http://msdn.microsoft.com/en-us/library/dd293665.aspx)以及一个复制构造函数，它将显式地将您的对象移动到外部范围而不执行任何复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:16:16.460

我将假设`DMatrix`需要超过 8 个字节 ( `sizeof(DMatrix) > 8`)，因为编译器可能会使用不同的技术来返回小类。

用代码

```
int main() {
    //...
    DMatrix d;
    d = someFunc();
    //...
} 
```

大多数编译器会将该代码“重写”为类似于

```
DMatrix d;
DMatrix __retval;
someFunc(__retval);
d = __retval; 
```

同时，`someFunc`被“重写”为类似的东西

```
void someFunc(DMatrix& __retval) {
    DMatrix mymat;
    /* Some operations on this matrix */
    // move/copy mymat into __retval
} 
```

因此，对于大型类，大多数编译器将该类型的返回值转换为函数的参数，并为调用函数中的返回值分配存储空间。

在上面的解释中，我没有利用任何存在的优化可能性，所以它说明了“最坏情况”的行为。

* * *

为了能够从函数返回类型，该类型至少需要有一个移动构造函数（仅限 C++11）或复制构造函数。除非您的类型显式管理某些资源（例如，带有 new/delete 的内存），否则通常不需要自己编写这些资源，因为编译器会为您生成合适的资源。

# php - 带/不带括号的 AND 运算符行为

> ID：13290436
> 
> 赞同：1
> 
> 时间：2012-11-08T14:00:23.357
> 
> 标签：php

```
$a = true and false; //true
$b = true && false; //false
$c = (true and false); //false
$d = (true && false); //false 
```

为什么给出案例'a'为真？

我认为 and 和 && 具有相同的优先级，但[他们没有](http://www.php.net/manual/en/language.operators.precedence.php)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:03:35.957

如文档中所述，这是预期的

```
// The constant true is assigned to $h and then false is ignored
// Acts like: (($h = true) and false)
$h = true and false; 
```

[http://php.net/manual/en/language.operators.logical.php](http://php.net/manual/en/language.operators.logical.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:04:56.423

将常量 true 分配给 $a，然后忽略 false。这都是关于运算符优先级的

# javascript - 使用 javascript 的窗口/选项卡的唯一 ID

> ID：13290441
> 
> 赞同：-1
> 
> 时间：2012-11-08T14:00:44.903
> 
> 标签：javascript, html, web-applications, browser

例如，考虑以下情况，浏览器首先使用单个选项卡打开，然后应该为打开的选项卡分配唯一的 id，tabId 应该在选项卡上发生的任意数量的页面重定向中保持不变（ tabId 应该在那里直到选项卡关闭)，就像任何新标签打开一样，它也应该以相同的方式具有唯一的 ID。

注意： 1\. 没有扩展 2\. 不使用 window.name 属性 3\. 可以使用 html5 功能，如 localStorage，sessionStorage 等...

我需要将 tabIds 与打开的选项卡相关联，如果在特定选项卡下发生任何页面操作或导航（重定向），那么我需要获取选项卡的 tabId 警报。

我在非常关键的时间段需要这个，请问有人对此有任何逻辑或想法吗？我想提前感谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:02:36.093

您可以使用此函数始终获取不同的 id（跨给定域）：

```
function getNewId() {
   var lastId = localStorage['lastId'] || '0';
   var newId = parseInt(lastId, 10) + 1;
   localStorage['lastId'] = newId;
   return newId;
} 
```

# android - XMPP IQ 结果解析问题

> ID：13290445
> 
> 赞同：2
> 
> 时间：2012-11-08T14:00:56.760
> 
> 标签：android, eclipse, parsing, xmpp, chat

我正在用 eclipse、java 和 asmack 构建一个 XMPP 聊天客户端应用程序。使用教程和许多谷歌搜索，我设法让好友列表正常工作，实际聊天也很好。我的问题是寻找更多好友以添加到我的联系人列表中。要发送的 XML 示例如下：http: [//xmpp.org/extensions/xep-0055.html](http://xmpp.org/extensions/xep-0055.html) 我的要求是：

```
<iq
id="search123"
from="name3@webserv.xxx.com/name3"
to="search.xxx.zzz.com"
type="set" >
<query xmlns="jabber:iq:search" >
    <nick>
android
    </nick>
</query>
</iq> 
```

我以为我得到的回应是/是这样的：

```
<iq
id="search123"
from="search.xxx.zzz.com"
to="name3@webserv.telebroad.com/Smack"
type="result" >
</iq> 
```

但是使用 connConfig.setDebuggerEnabled(true); （和一个在线 Telnet 客户端）我设法发现服务器实际上工作正常并且它正在发送请求的结果，但我只是得到你在上面看到的内容。我已经在这工作了 4 天，我的自尊心很低：P 这是我关于 IQ 请求和响应的代码：

```
Packet asdf = new Packet() {
                    @Override
                    public String toXML() {
                        return    "<iq type='set'"+
                                " from='name3@webserv.xxx.com/name3'"+
                                " to='search.xxx.zzz.com'"+
                                " id='search2'"+
                                " xml:lang='en'>"+
                              " <query xmlns='jabber:iq:search'>"+
                                " <nick>Android</nick>"+
                              " </query>"+
                            " </iq>";
                    }
                };

ChatList.connection.sendPacket(asdf);
                Log.e("packet", "request = "+ asdf.toXML());
                PacketFilter filter = new IQTypeFilter(IQ.Type.RESULT);
                ChatList.connection.addPacketListener(new PacketListener() {
                    public void processPacket(Packet packet) {
                        IQ iq = (IQ)packet;

                        Log.e("response","incoming packet : "+ packet.toXML());
                        Log.e("response","incoming packet2 : "+ packet.toString());

                    }
                }, filter); 
```

我尝试了很多 TypeFilters 无济于事。我难住了！！

底线：

1.请求被服务器正确接受；

2.服务器响应正确（调试器这么说）；

3.any response.toString 或 toXML 从上面打印出类型结果 XML（没有 type='result'> 之后的实际项目。

4.我的这个应用程序的最终版本大约逾期一周...帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:07:23.493

尝试添加

```
ProviderManager pm = ProviderManager.getInstance(); 
pm.addIQProvider( "query","jabber:iq:search",new UserSearch.Provider());
pm.addExtensionProvider("x","jabber:x:data", new DataFormProvider()); 
```

在建立连接之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:06:51.293

该规范已经通过[UserSearchManager](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smackx/search/UserSearchManager.html)实现。尝试使用它。

至于你自己的情况，我猜你还没有为这个特定的元素和命名空间注册一个合适的[提供者](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/providers.html)（比如 org.jivesoftware.smackx.search.UserSearch$Provider）。在普通的 Java 环境中，这已经被注册了，但您必须在 Android 中自己编写代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:49:01.707

[https://stackoverflow.com/a/14214622/1688731](https://stackoverflow.com/a/14214622/1688731) 这......只是工作！！！！我不知道为什么。也许可以`Iterator iterator = row.getValues("jid");`解决问题。但其他一切，我已经尝试了很多次！

# razor - Razor 文件中的代码

> ID：13290447
> 
> 赞同：0
> 
> 时间：2012-11-08T14:01:01.470
> 
> 标签：razor

我想问一个简单的问题（因为我最近的难题没有得到任何答案:-)）。当我们像这样在 Razor 文件中编写代码时

```
@{
 // code
} 
```

这段代码是否在服务器上执行，因为我无法想象它会在客户端执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:03:37.660

没错，位于带有@ 标记的代码块在服务器上执行。

查看 Razor 的入门指南：

[http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx)

# php - PHP 和 CSS 引号问题

> ID：13290452
> 
> 赞同：3
> 
> 时间：2012-11-08T14:01:21.243
> 
> 标签：php, html, css

嗨，

我在引用时遇到问题。我正在编写一份 html 邮件时事通讯，这是一场噩梦。我已经阅读了很多有关如何解决此问题的信息，但没有任何方法行不通。我试过不带引号，用 \ ...没有什么是行不通的（也许我做错了什么）。

所以，假设这是代码：

```
echo '<td style="
    background-image:url(?http://x/y/image.png?);
                "
      </td>'; 
```

? - 使用什么引号

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:05:07.047

如果你想要引号它应该是这样的，但在这种情况下你并不需要它们。如果您使用单引号打开，那么您必须转义字符串中的所有单引号。

```
echo '<td style="
    background-image:url(\'http://x/y/image.png\');
                "
      </td>'; 
```

据我所知，html邮件中的css非常有限，尤其是定位。但我可能是错的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:03:55.840

背景 url 的 CSS 中的引号是可选的 - 所以只需省略它们。

这是一个类似的问题，其中包含更多信息： [引用 url() 的值真的有必要吗？](https://stackoverflow.com/questions/2168855/css-url-are-quotes-needed)

`\`此外，您可以通过在它们前面放一个来逃避您的报价，例如`url(\'http://www.domain.com\')`

至于 HTML 邮件问题。最好的标准是坚持使用表格和内联样式 CSS。我会避免任何类型的相对/绝对定位。即使某些电子邮件客户端可能会正确显示它，但并非所有客户端都能正确显示。所以最好尽可能保持一致并避免某些标记。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T14:05:13.007

转义示例代码中的单引号，如下所示：

```
echo '<td style="
    background-image:url(\'http://x/y/image.png\');
                "
      </td>'; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T14:05:16.080

在引号之前使用`\`以转义字符串的结尾：

```
echo '<td style="
    background-image:url(\'http://x/y/image.png\');
                "
      </td>'; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-08T14:05:32.817

引号是可选的：[引用 url() 的值真的有必要吗？](https://stackoverflow.com/questions/2168855/css-url-are-quotes-needed)

但是，您可以逃避它们：

```
echo "<td style=\"url('example.com')\""; 
```

或者

```
echo '<td style="url(\'example.com\')"; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-08T14:21:17.710

我认为选择正确的引号不是问题。正如许多其他人已经指出的那样，引号是可选的，或者，您可以简单地转义引号，它仍然有效。

我认为问题在于并非所有邮件客户端都支持`background-image`，尤其是 Microsoft Outlook 2007+ 甚至 Outlook.com*都不*支持。

我建议参考以下资源，了解电子邮件客户端的 CSS 支持级别。

*   [http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)
*   [http://www.email-standards.org/](http://www.email-standards.org/)

您可能想尝试的一种解决方法是使用`background`而不是`background-image`.

此外，如果您在构建 HTML 电子邮件时遇到问题，您可能想尝试[https://www.mailrox.com/ 。](https://www.mailrox.com/)我自己没有尝试过，所以无法评论产品的好坏。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-08T14:04:15.987

您不需要在 css 中使用引号`url()`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-08T14:17:16.910

您可以尝试使用以下方法：

```
echo <<<HTML
     <td style="background-image:url('image/url/here.jpg');">Table Data</td>
HTML; 
```

如果您的笔记确定如何使用它，请查看 PHP EOD：[PHP.net Strings](http://php.net/manual/en/language.types.string.php)

还要确保您在电子邮件标题（例如`$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";`）以及 PHP 中设置了正确的内容类型和字符集，具体取决于您使用时事通讯模板的方式。

在创建电子邮件时，CSS 可能会受到限制，因为邮件客户端的变化比浏览器要大得多，而且有些支持比其他的要多。试一试，一定要检查多个浏览器和电子邮件客户端。

希望这可以帮助。

莱昂。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-27T18:21:31.117

您应该使用 heredoc 语法。

```
echo<<<EOT
    <td style="background-image:url(?http://x/y/image.png?);"
      </td>
EOT; 
```

当您需要使用变量以及需要打印引号时，这非常有用。

确保没有其他内容与 EOT 相关，否则这将不起作用。

# google-chrome-extension - 如何在 Chrome 扩展程序中调用原始页面（选项卡）中的函数

> ID：13290456
> 
> 赞同：30
> 
> 时间：2012-11-08T14:01:45.730
> 
> 标签：google-chrome-extension

我现在正在制作 Chrome 扩展程序。我想从 Chrome 扩展中调用在原始页面（选项卡）中定义的 JS 函数。是否`background.html`或`Content_Script`打电话给他们都没关系。

例如：

原始页面（选项卡）

```
<html>
<head>
<title>Original Page</title>
<script>
function greeting(){
    alert("Ohayou!");
    // some other codes here
}
</script>
</head>
<body></body>
</html> 
```

然后我想从谷歌扩展中调用原始页面中的“问候”功能。我该怎么做以上？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-11T18:16:50.033

您也可以简单地在内容脚本中编写：

```
location.href="javascript:greeting(); void 0"; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-08T16:14:33.047

对于第一部分，您可以使用这个不错的答案：[使用内容脚本将代码插入页面上下文](https://stackoverflow.com/questions/9515704/building-a-chrome-extension-inject-code-in-a-page-using-a-content-script/9517879#9517879)。

在内容脚本中调用函数很容易。您可以[创建自己的事件](https://developer.mozilla.org/en-US/docs/DOM/document.createEvent)，然后可以在内容脚本中收听。这将像这样工作：

**注入代码**：

```
var evt = document.createEvent('Event');
evt.initEvent('myCustomEvent', true, false);

// fire the event
document.dispatchEvent(evt); 
```

**内容脚本**：

```
document.addEventListener('myCustomEvent', function() {
  // do whatever is necessary
}); 
```

# facebook - Facebook 以外的 Facebook 粉丝检测

> ID：13290458
> 
> 赞同：-1
> 
> 时间：2012-11-08T14:01:48.317
> 
> 标签：facebook, api, facebook-page

在过去的几个小时里，我一直在为我们的女主人开发一个“网络应用程序”。它的目的是登录一个 facebook 用户并将他发送到下一页，就像带有退出按钮的框一样。这部分已经完成，但是我想通过插入一个类似劫持脚本来加快这个过程，这样用户就不需要做任何事情，只需登录和注销。

但是我有一个问题 - 如何检查用户是否是粉丝（因为如果他已经喜欢该页面，他会不喜欢它）？我已经尝试了一个解决方案，我在我的 FB 页面上使用它来扇门，但它在 facebook 之外不起作用。

这是我试图使用的代码：

```
<?php
require 'facebook.php';
$facebook = new Facebook(array(
    'appId' => '0000000',
    'secret' => '1654adadadada',
    'cookie' => true
));

?>
<div id="fb-root"></div>
<?php
    $signed_request = $facebook->getSignedRequest();

    if ($signed_request['page']['liked']) 
    {
        echo header('Location: liked.html');
    }
    else
    {
        echo header('Location: notliked.html');
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:11:26.757

您可以从 FB 图表中获取数据。

```
https://graph.facebook.com/me/likes/PAGE_ID_TO_CHECK?access_token=XYZ 
```

没有令牌，您将无法获取此数据。

# django - 从 Admin Tabular Inline 访问外键字段

> ID：13290460
> 
> 赞同：5
> 
> 时间：2012-11-08T14:01:55.087
> 
> 标签：django, django-models, django-admin

我正在尝试访问 Django Admin 中的表格内联中的外键字段。

尽管我尽了最大的努力，但我似乎无法让它发挥作用。我目前的代码是：

```
class RankingInline(admin.TabularInline):
    model = BestBuy.products.through
    fields = ('product', 'account_type', 'rank')
    readonly_fields = ('product', 'rank')
    ordering = ('rank',)
    extra = 0

    def account_type(self, obj):
        return obj.products.account_type 
```

结果是：

```
'RankingInline.fields' refers to field 'account_type' that is missing from the form. 
```

我也尝试过使用 model__field 方法，我将其用作：

```
fields = ('product', 'product__account_type', 'rank') 
```

结果是：

```
'RankingInline.fields' refers to field 'product__account_type' that is missing from the form. 
```

模型定义如下：

```
class Product(BaseModel):  
    account_type = models.CharField(choices=ACCOUNT_TYPE_OPTIONS, verbose_name='Account Type', max_length=1, default='P')

class Ranking(models.Model):
    product = models.ForeignKey(Product)
    bestbuy = models.ForeignKey(BestBuy)
    rank = models.IntegerField(null=True, blank = True)

class BestBuy(BaseModel):
    products = models.ManyToManyField(Product, through='Ranking')

class BaseModel(models.Model):
    title = models.CharField(max_length = TODO_LENGTH)
    slug = models.CharField(max_length = TODO_LENGTH, help_text = """The slug is a url encoded version of your title and is used to create the web address""")

    created_date = models.DateTimeField(auto_now_add = True)
    last_updated = models.DateTimeField(auto_now = True) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T22:51:26.463

我认为您正在寻找的是嵌套内联，因为您想在 RankingInline 中将“产品”扩展为内联。目前Django没有内置这样的功能。这个问题是相关的：[Nested inlines in the Django admin？](https://stackoverflow.com/questions/3681258/nested-inlines-in-the-django-admin)

[您还可以查看Django DOC](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.TabularInline)中的“使用多对多中间模型”部分。那可能有用。

实际上 Django 会显示一个小的绿色“+”按钮，除了内联产品字段条目之外，您可以使用它来创建新产品以分配给 BestBuy 的当前条目。这可能是您使用的替代方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T18:38:48.213

您只需将方法字段添加到 readonly_fields：

```
readonly_fields = ('product', 'rank', 'account_type') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T08:15:48.557

您的新字段`account_type`应在（即RankingAdmin）中定义，`ModelAdmin`而不是在`TabularInline`（即RankingInline）中。只能从 TabularInline 访问它。

# python - Google App Engine：在 html 模板中包含图像 blob

> ID：13290463
> 
> 赞同：0
> 
> 时间：2012-11-08T14:01:58.387
> 
> 标签：python, google-app-engine

我在获取 html 模板中显示的图像时遇到问题。我设法将图像存储到数据存储中。但是，我不知道如何将其发送到 html 文件（或使用 URL 来显示图像？）。请帮助，非常感谢。以下是我的代码：

## 主文件

```
 # -*- coding: utf-8 -*-
    #!/usr/bin/env python2.7

    import webapp2
    import common
    from google.appengine.ext import db

    class Image(db.Model):
        filename = db.StringProperty(required=True)
        data = db.BlobProperty(required=True)
        mimetype = db.StringProperty(required=True)

    class Test(webapp2.RequestHandler):
        def get(self):
            common.render(self, 'test.html', {})

        def post(self):
            imgfile = self.request.POST['image']
            img = Image(filename=imgfile.filename, data=imgfile.value, mimetype=imgfile.type)
            img.put()
            common.render(self, 'test.html', {'imgkey': img.key().id()})

    app = webapp2.WSGIApplication([
        ("/.*", Test)],
        debug=True) 
```

* * *

## 测试.html：

```
 <htm>
    <head>
    <title>Test</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    </head>
    <body>
    <p></p>Upload image: </p>
    <form method="post" action="/test" enctype="multipart/form-data">
    <input type="file" name="image" /><br />
    <input type="submit" name="確定" />
    </form>
    {% if imgkey %}
      Display:<br />
      <img src="http://.../disp?key={{imgkey}}" /><br />
    {% endif %}
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:58:57.230

尝试这样的事情：

```
class ImageHandler(webapp2.RequestHandler):
    def get(self, image_id):
        image = Image.get(image_id)
        self.response.headers['Content-Type'] = 'image/jpeg'
        self.response.out.write(image.data) 
```

然后在您的映射中，您应该为图像处理创建一个 url，例如：

```
(r'/images/(.*)', ImageHandler) 
```

在您的 HTML 代码中，您需要按如下方式创建图像标签：

```
<img src="/images/{{img1.key}}" /><br />
<img src="/images/{{img2.key}}" /><br /> 
```

# c++ - 对齐这些结构是否符合 C++ 标准

> ID：13290465
> 
> 赞同：7
> 
> 时间：2012-11-08T14:02:04.260
> 
> 标签：c++, x86

举这个例子

```
class A
{
public:
  int a; 
  char b;
  int c;
}; 
```

我看到的每个编译器（对于 x86、32 或 64 位）都为 class 分配 12 个字节`A`，而不是 9 个。因此它们`b`与整数边界或您可以说的总线边界对齐。我的问题是这是否符合 C++ 标准，以及是否有任何编译器不这样做。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-08T14:07:55.437

C++ 标准规定：

*   对象有一个对齐要求，其大小是倍数（所以如果`int`是 4 个字节宽，那么它需要 1、2 或 4 个字节的对齐，具体取决于实现）。
*   成员对象（如果它们没有被诸如 之类的访问说明符分隔`public`）全部按照它们被声明的顺序分配
*   并且根据其对齐要求分配它们。

所以不，标准并没有明确说明该类的大小应为 12 个字节。

但是它*确实*说`b`应该在之后分配`a`，并且`c`应该在之后分配`b`。

在`int`4 字节宽且需要 4 字节对齐的平台上，这会留下 12 字节作为最小有效大小：

*   `a`占用前 4 个字节
*   `b`占用一个字节
*   `c`需要 4 个字节，*但*必须在 4 个字节的边界上分配。`b`在这样的边界之后结束一个字节，因此*通过*`c`插入 3 个字节的填充来找到下一个要放置的有效位置。

所以类的总大小最终是成员的大小 (4 + 1 + 4 = 9) 加上三个字节的填充，总共 12。

还有另一条规则在这里无效，但是如果您已经按顺序定义了成员，这将很重要`a, c, b`。

包含类 ( `A`) 从最严格对齐的成员对象继承对齐要求。也就是说，因为它包含 a `int`，所以它具有与 a 相同的对齐要求`int`。而且因为对象的总大小必须是其对齐要求的倍数，包含按顺序排列的成员的类*仍然*`a, b, c`需要12 个字节的存储空间。它只是将 3 个字节的填充移到类的末尾，而不是 between and 。*`b``c`*

 *但是，在其他一些情况下，按大小降序对成员重新排序*有时会*减小类的大小。

假设我们有一个这样的类：

```
class B {
  char a;
  double b;
  int c;
}; 
```

这将需要 24 字节的存储空间（1 字节用于`a`，8 字节用于`b`，4 字节用于`c`，但是为了确保`b`最终在 8 字节边界上，我们需要在和之间填充*7*字节，并确保整个类最终的大小是 8 的倍数，我们需要另外 4 个字节。`a``b``c`

但是根据大小重新排序成员，如下所示：

```
class B {
  double b;
  int c;
  char a;
}; 
```

生成一个只需要 16 个字节的类：

成员对象本身相同的 1 + 4 + 8 字节，但现在`c`已经在 4 字节边界上对齐（因为它之后`b`以 8 字节边界结束），并且`a`不需要任何对齐，所以唯一的对齐我们需要的是确保它`B`的大小是 8 的倍数。成员占用 13 个字节，因此我们可以添加 3 个字节的填充，并且类最终为 16 个字节，比第一个版本小 33%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:05:18.020

可以在编译时使用 pragma 指令控制结构打包。 **[请参阅#Pragma 包](http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.80%29.aspx)**

例如，以下不会对齐成员，而是将它们彼此相邻放置。

```
#pragma pack(push, 1)
struct A4
{
  char a;
  double b;
  char c;
};
#pragma pack(pop) 
```

示例来自**[这里](http://vcfaq.mvps.org/lang/11.htm)**。

**[GCC](http://gcc.gnu.org/onlinedocs/gcc/Structure_002dPacking-Pragmas.html)**还支持编译指示包。该指令不是某些标准的一部分，但许多编译器确实支持它。

* * *

但是，不应该有这样做的理由。编译器将它们对齐以加快对成员的访问，并且应该**没有理由更改它**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:08:14.423

是的，标准中到处都提到了对齐，主要是第 3.11 节（*对齐*）。它依赖于平台，因此任何依赖于对象实际大小的程序本质上都是不可移植的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T14:05:11.087

标准允许编译器在必要时填充更多字节。它基本上取决于主机的体系结构而不是编译器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T14:10:59.863

在您的情况下，“b”始终正确对齐。它被*填充*以在 32 位边界中对齐*c 。*尽管有一些特定实现的空间，但大多数编译器都遵循将 2 和 4 字节变量与 2 和 4 字节边界对齐的规则。

在 32 位系统中，double 和 long int（8 字节）与 4 字节边界对齐，但在 64 位系统中与 8 字节对齐。*

# javascript - 如何在 AngularJS 中跨范围修改对象？

> ID：13290466
> 
> 赞同：0
> 
> 时间：2012-11-08T14:02:10.827
> 
> 标签：javascript, angularjs

我是 AngularJS 的新手，范围的概念真的让我感到困惑。我有一种情况，我想从不同的范围修改对象或变量。原因如下：在我的应用程序中，我想集中用户通知控制器和通知视图。在页面的中间顶部。我将我的代码分开如下：每个视图都有它的控制器，我认为它是合理的。我想注入一个服务或一些公共对象，当在一个公共地方使用一些字符串参数调用它的函数时，我发现我不能注入 $scope 服务。那么，当

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:55:32.683

您想要的是在控制器之间进行通信。使用可以在控制器之间广播消息（或对象）的服务来实现这一点相当容易。

关于这个有一个不错的 youtube：

[http://www.youtube.com/watch?v=1OALSkJGsRw](http://www.youtube.com/watch?v=1OALSkJGsRw)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T15:40:04.363

好的，我在我的应用程序中做了什么。我是一名 java 程序员，我曾经使用[GWT](https://developers.google.com/web-toolkit/)

在 GWT 中有一个非常好的设计模式，用于通知整个应用程序中的小部件，称为 EventBus。在角度我试图做类似的事情。这是[gist中的代码链接](https://gist.github.com/4046379)

# java - 在 Java 中生成随机数并对其进行排序

> ID：13290468
> 
> 赞同：4
> 
> 时间：2012-11-08T14:02:14.870
> 
> 标签：java, sorting, random, linked-list

我的目标是生成从 0 到 100 的随机数并将它们添加到链表对象中，然后对元素进行排序。

到目前为止，这是我的代码。当我想显示已排序的元素时遇到了问题。

我得到的错误：线程“main”中的异常 java.util.IllegalFormatConversionException: d != java.util.Arrays$ArrayList

有人可以解决这个问题吗？谢谢你

```
package com.LinkedLists;

import java.util.Arrays;
import java.util.Collection;
import java.util.HashSet;
import java.util.List;
import java.util.LinkedList;
import java.util.Random;
import java.util.Set;

public class InsertRandomElements {

    public static void main(String[] args) {

        // Create a random number object from 0 to 100.
        // Create an array object.
        Random r = new Random();
        int[] random = new int[100];

        // Insert random numbers into the array
        for (int i = 0; i < random.length; i++) {
            random[i] = r.nextInt(100) + 1;
        }

        // Printing out the unsorted array
        for (int i = 0; i < random.length; i++) {
            System.out.println(random[i]);
        }

        List<int[]> randomList = Arrays.asList(random);

        // Call the method in here.
        sortElements(randomList);

    }

    // Sort the elements
    private static void sortElements(Collection<int[]> values) {

        Set<int[]> set = new HashSet<int[]>(values);

        for (int[] is : set) {
            System.out.printf("Sorted Elements: %d ", values);
        }

        System.out.println();
    }

    // Calculate Sum of the elements

    // Calculate floating point average of the elements.

} 
```

![](../Images/591048025a21c95ac161f113c734440b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:23:35.357

它变得很困惑，因为 **`int[]`是一个对象，但`int`它不是一个对象，因此它假定`int[]`为 的一个元素`List`，因此返回`List<int[]>`not `List<Integer>`or `List<int>(this is not possible and is causing the issue)`。

请将您的随机更改`Integer[]`如下，它应该可以正常工作。

```
 Integer [] random = new Integer[100];
    List<Integer> randomList = Arrays.asList(random); 
```

要对列表进行排序：使用`Collections#sort`

```
 Collections.sort(randomList); 
```

**请记住**，方法签名是：`public static <T> List<T> asList(T... a)`它根据传递的参数类型确定要返回的 List 的类型。

**请注意：** 即使您定义`random`为`new Integer[100];`，您仍然可以将此类语句保持原样：`random[i] = r.nextInt(100) + 1;`。在这些情况下，`int`这可以正常工作。`Integer`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:04:23.817

您需要 a`List<Integer>`而不是`List<int[]>`. 从原始数组转换为整数列表不是一次性操作，您实际上必须遍历原始数组并逐个添加到列表中。我不推荐这样做，尤其是因为一开始就没有理由使用数组。作为参考，你需要这个：

```
final List<Integer> randomList = new LinkedList<>();
for (int i : random) randomList.add(i); 
```

当你改变它时，这将起作用：

```
System.out.printf("Sorted Elements: %s ", values); 
```

`Arrays.sort(myArray)`但是，使用对数组本身进行排序然后使用打印会简单得多

```
System.out.println(Arrays.toString(myArray)); 
```

另一方面，如果您`List<Integer>`从一开始就使用权利，它看起来像这样：

```
final Random rnd = new Random();
final List<Integer> values = new ArrayList<>();
for (int i = 0; i < 100; i++) values.add(rnd.nextInt());
Collections.sort(values);
System.out.println("Sorted Elements: " + values); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:10:37.543

在这种情况下，我认为将`random`数组直接传递给`sortElements(int[] values)`方法*然后*将数组转换为列表会更容易。

换句话说，你会调用`sortElements(random);`然后`List<Integer> randomList = new LinkedList(Arrays.asList(random));`得到一个链表。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-08T14:19:35.383

使用您的代码尝试：

```
for (int[] is : set) {
   System.out.printf("Sorted Elements: %d ", is[0]);
} 
```

但是您仍然需要对其进行排序，如上一篇文章所述

# ruby-on-rails - 我怎样才能让用户可以定义自己的动态表单以在 Rails 应用程序中使用？

> ID：13290470
> 
> 赞同：0
> 
> 时间：2012-11-08T14:02:16.320
> 
> 标签：ruby-on-rails, forms

用户需要能够添加数据，但也需要定义其结构。我需要一个 gem（理想情况下），它允许以某种方式在 DB 中建立表单定义，然后显示为 HTML 表单，然后收集和存储表单条目。有这样的事情吗，还是我需要自己动手？

# ajax - 如何在微调器运行的情况下在后台使用 ajax 和 jquery 发送数据之前运行消耗进程？

> ID：13290478
> 
> 赞同：0
> 
> 时间：2012-11-08T14:02:43.097
> 
> 标签：ajax, jquery, jquery-mobile

我正在尝试使用 ajax 将数据发送到服务器，但问题是在发送数据之前我有一个消耗过程。

该过程大约需要 5 秒，并且微调器必须在此过程中运行。

所以在我的代码中，微调器直到 ajax 调用开始才显示（可能是因为进程阻塞了一切）

如果我将调用“消费过程”移动到“发送前”，那么它不起作用，我不知道为什么。

所以问题是如何显示微调器，同时调用所有内容（消费过程和 ajax 调用）

谢谢

这是我的代码：

```
$("#btnAccept").bind("click", function(event, ui) {
          //start spinner, works fine but only shows after consumingprocess has finished
          $.mobile.loading( 'show' );

             console.log("btnAccept");

     var data =  consmuingprocess();
       console.log(data);
     // data is fine

                                 $.ajax({
                                           type : "POST",
                                           url : url,
                                           dataType : "xml",
                                           contentType : "text/xml;charset=UTF-8",
                                           data : data,
                                           requestHeaders : {
                                            Origin : '*'
                                            },
                                           crossDomain : true,
                                           beforeSend : function(xhr) {
                                            xhr.setRequestHeader("Authorization", "Basic xxxxxxxxxxxxxxx");
                                           console.log("beforeSend");
                                           },
                                           error : errorAJAX,
                                           success : parseXml
                                           });

            });

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:18:51.580

你能做的是

*   调用你的加载窗口
*   延迟，因此加载窗口有机会显示
*   运行其余的代码。

您可以使用间隔来执行此操作：

```
$("#btnAccept").bind("click", function(event, ui) {
    var intervalId;

    function delayedStuff = function() {

        // make sure we only run this once
        window.clearInterval(intervalId);

        var data =  consmuingprocess();

        $.ajax({
            // set up your ajax request and handlers
        });
    };        

    $.mobile.loading( 'show' );
    // wait 1/2 second, then run delayedStuff
    intervalId = window.setInterval(delayedStuff, 500);
}); 
```

但是这种技术有一个重要的警告：当你`consumingProcess`运行非常昂贵的函数时，所有的动画和 javascript 仍然会停止。在 Chrome 上，即使是动画 gif 也停止运行。我们在这里所做的只是让您的页面更改有机会显示。

有几种可能的解决方案：

*   仔细看看你的`consumingprocess()`函数，看看它是否可以优化。可能有一种更快的方法来做你正在做的任何事情，这需要很长时间。
*   使用[WebWorkers](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)。缺点是兼容性：IE 和大多数旧浏览器不支持它。我根本没有用 JavaScript 做过多线程编程，所以我不知道这有多有效。

# deployment - Glassfish：处理 EjbDescriptor java.lang.NullPointerException 时出错

> ID：13290480
> 
> 赞同：0
> 
> 时间：2012-11-08T14:02:58.267
> 
> 标签：deployment, jar, ejb, glassfish-3

我有一个 JEE6 应用程序，其中有几个 ejb，每个都引用客户端 jar。对于其中的大多数，我将它们部署到我的 Glassfish 3.1.2 实例上没有任何问题。然而，我有一个，它工作正常，直到我从我的业务层应用程序中引用它。在那里，我从客户端实例化一个对象，就像我在其他完美运行的地方一样。只有当我在应用程序中引用这个特定的客户端 jar 然后尝试部署时，我才能从 Glassfish 中获得以下信息：

```
[#|2012-11-08T08:38:22.773-0500|SEVERE|glassfish3.1.2|javax.enterprise.system.core.com.sun.enterprise.v3.server|_ThreadID=46;_ThreadName=Thread-2;|Exception while deploying the app [rpavis-app-im-1.0-SNAPSHOT]|#]

[#|2012-11-08T08:38:22.773-0500|SEVERE|glassfish3.1.2|javax.enterprise.system.core.com.sun.enterprise.v3.server|_ThreadID=46;_ThreadName=Thread-2;|Error processing EjbDescriptor
java.lang.RuntimeException: Error processing EjbDescriptor
    at com.sun.enterprise.deployment.util.EjbBundleValidator.accept(EjbBundleValidator.java:294)
    at com.sun.enterprise.deployment.EjbDescriptor.visit(EjbDescriptor.java:2578)
    at com.sun.enterprise.deployment.EjbBundleDescriptor.visit(EjbBundleDescriptor.java:734)
    at com.sun.enterprise.deployment.Application.visit(Application.java:1765)
    at com.sun.enterprise.deployment.archivist.ApplicationArchivist.validate(ApplicationArchivist.java:830)
    at com.sun.enterprise.deployment.archivist.ApplicationArchivist.openWith(ApplicationArchivist.java:277)
    at com.sun.enterprise.deployment.archivist.ApplicationFactory.openWith(ApplicationFactory.java:240)
    at org.glassfish.javaee.core.deployment.DolProvider.load(DolProvider.java:175)
    at org.glassfish.javaee.core.deployment.DolProvider.load(DolProvider.java:94)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.loadDeployer(ApplicationLifecycle.java:827)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.setupContainerInfos(ApplicationLifecycle.java:769)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:368)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
    at java.util.concurrent.ConcurrentHashMap.putIfAbsent(ConcurrentHashMap.java:1079)
    at java.lang.ClassLoader.getClassLoadingLock(ClassLoader.java:462)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:403)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:410)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:410)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:410)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:410)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at com.sun.enterprise.deployment.util.EjbBundleValidator.accept(EjbBundleValidator.java:235)
... 39 more
|#]

[#|2012-11-08T08:38:22.782-0500|SEVERE|glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=46;_ThreadName=Thread-2;|Exception while deploying the app [rpavis-app-im-1.0-SNAPSHOT] : Error processing EjbDescriptor
java.lang.NullPointerException
    at java.util.concurrent.ConcurrentHashMap.putIfAbsent(ConcurrentHashMap.java:1079)
    at java.lang.ClassLoader.getClassLoadingLock(ClassLoader.java:462)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:403)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:410)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:410)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:410)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:410)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at com.sun.enterprise.deployment.util.EjbBundleValidator.accept(EjbBundleValidator.java:235)
    at com.sun.enterprise.deployment.EjbDescriptor.visit(EjbDescriptor.java:2578)
    at com.sun.enterprise.deployment.EjbBundleDescriptor.visit(EjbBundleDescriptor.java:734)
    at com.sun.enterprise.deployment.Application.visit(Application.java:1765)
    at com.sun.enterprise.deployment.archivist.ApplicationArchivist.validate(ApplicationArchivist.java:830)
    at com.sun.enterprise.deployment.archivist.ApplicationArchivist.openWith(ApplicationArchivist.java:277)
    at com.sun.enterprise.deployment.archivist.ApplicationFactory.openWith(ApplicationFactory.java:240)
    at org.glassfish.javaee.core.deployment.DolProvider.load(DolProvider.java:175)
    at org.glassfish.javaee.core.deployment.DolProvider.load(DolProvider.java:94)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.loadDeployer(ApplicationLifecycle.java:827)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.setupContainerInfos(ApplicationLifecycle.java:769)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:368)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
|#] 
```

我已经检查了所有我知道要检查的地方，我完全失去了。我觉得我在某处缺少配置，但 2 天后我就是不知道在哪里。任何人都可以在这个错误中看到任何可以帮助我确定在哪里看的东西吗？

谢谢！！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T14:41:31.187

我找到了答案。事实证明，我引用了我在 EJB 的 ejb-jar.xml 中删除的一段。特定引用仅由业务层应用程序使用，因此在我进行更改之前未处理。最重要的是，如果您有部署错误，请查看问题根目录的 ejb-jar.xml 配置文件，您可能会在那里找到答案。

# android - 如何在 i/o 操作后删除系统内部缓冲区的缓存？

> ID：13290483
> 
> 赞同：0
> 
> 时间：2012-11-08T14:03:18.157
> 
> 标签：android, android-ndk, sd-card

我正在 android 设备和 sd 卡之间建立一个基准项目，以跟踪不同类型的 sd 卡之间的性能变化。

在我的基准测试中，我使用了许多 io 方法，以及对 sd 卡的逻辑和物理访问。有时我控制内部缓冲区的大小（使用`setnvbuf()`）

在每个文件读/写之间，我想清除系统的缓存或内部缓冲区。管理此问题的最佳方法是什么？

我的项目是部分原生的，使用 ndk，所以如果需要我可以使用 ac/cpp 方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:50:14.423

基准标记文件系统很难。有各种级别的缓存。当您进行 i/o 操作时，Linux（内核）将缓存您的数据，并且很难管理该缓存，例如，请参阅这个[cyanogenmod wiki 页面](http://wiki.cyanogenmod.org/wiki/SDCardSpeedTests)。事实上，你永远不应该依赖这种机制，而是使用运行时间更长的测试来查看 sdcard 的性能——这通常会使它们变砖（我是认真的）。

检查执行文件系统基准测试的长期项目也是一个非常好的主意，例如[iozone](http://www.iozone.org/)。

# android - Android：下载完成后如何恢复主线程

> ID：13290485
> 
> 赞同：0
> 
> 时间：2012-11-08T14:03:12.210
> 
> 标签：android, multithreading, android-activity, resume

如果我在任何活动中并且我想下载一个文件（使用线程）并且同时我希望主线程等待下载完成，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:08:30.810

从活动中使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) ..

```
new DownloadTask(this).execute(); 
```

以任务为例：

```
public class DownloadTask extends AsyncTask<Void, Void, String>  {

private ProgressDialog progressDialog;  
private Context context;

/**
 * 
 * @param context
 * @param pdfDoc the document of the PDF
 */
public DownloadTask(Context context) {
    this.context = context;

    progressDialog = new ProgressDialog(context);
}

@Override
protected void onPreExecute() {  
        progressDialog.setMessage("Downloading...");
        progressDialog.setIndeterminate(true);
        progressDialog.show();
}

@Override
protected String doInBackground(Void... arg0) {
    //download here
}

@Override
protected void onPostExecute(final String result) {
        progressDialog.dismiss();

}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:19:56.047

使用 AsyncTask 和回调。

```
public interface DownloadCallback<T>{
    public void onFinishDownload(T downloadedResult);
}

public static void downloadString(String url, DownloadCallback<String> callback){
    new AsyncTask<Void,Void,Void>(){

        String result;            

        @Override
        protected void onPreExecute() {  
            // Do things before downloading on UI Thread
        }

        @Override
        protected String doInBackground(Void... arg0) {

             //download here
             result = download(url);

        }

        @Override
        protected void onPostExecute(final Void result) {
            // Do things on UI thread after downloading, then execute your callback
            if (callback != null) callback.onFinishDownloading(result);
        }

    }.execute();
} 
```

要使用它，您只需执行以下操作：

```
downloadString("http://www.route.to.your.string.com", new DownloadCallback<String>(){
    public void onFinishDownloading(String downloadedResult){
         Toast.makeText(YourActivityName.this, downloadedResult, Toast.LENGTH_SHORT).show();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:31:40.467

如果您希望线程与主线程通信，告诉下载完成，请使用[处理程序](http://developer.android.com/reference/android/os/Handler.html) 此代码将帮助您理解它

```
MyHnadler handler;
onCreate(Bundle savedInstance)
{
 setContent..
...
 handler=new MyHandler();
 new MyThread().start();
}
public class MyHandler extends Handler
{
  @Override
  public void handleMessage(Message message) {
            switch (message.what) {
            case 1:   //....threading over
                         //write your code here
                   break;
            case2 : //if you want to be notiifed of something else
                   ..
 }

public class MyThread extends Thread
{
 @Override
 public void run()
 {
   //run the threa
   //and when over
   Message msg=handler.getMessage();
   msg.what=1;
   handler.sendMessage(msg);   //send the message to handler
 }
}
} 
```

如您所见，线程通过**Handler**与 UI 线程**通信**。在上面的示例中，我只将线程中的任何对象发送到 UI 线程。要做到这一点，只需在线程中执行。它可以是任何对象。希望这对你有帮助:)**`msg.obj=your_obj`**

# c# - Registry.GetValue() 和 Registry.User.GetValue() 的结果不同

> ID：13290498
> 
> 赞同：3
> 
> 时间：2012-11-08T14:03:57.353
> 
> 标签：c#, registry

我在`output1`和中得到不同的结果`output2`。虽然第一个给了我在注册表中实际看到的值，但后者只给了我默认值。我想念什么？

```
String output1 = Registry.GetValue(
  @"HKEY_USERS\blobb", "beep", "nope!") as String;

String output2 = Registry.Users.GetValue(
  @"blobb\beep", "nope!") as String; 
```

我已经尝试了很多不同的输入字符串变体，但没有一个给我正确的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:09:11.143

`Registry.Users.GetValue`正在根 USERS 键中查找名为 'blobb\beep' 的值

要获得与第一个示例相同的结果，您需要类似

```
using (var blobb = Registry.Users.OpenSubKey("blobb"))
{
    String output2 = blobb.GetValue("beep", "nope!") as String
} 
```

# java - 无法通过 smack 连接到 XMPP 服务器：服务器没有响应

> ID：13290499
> 
> 赞同：5
> 
> 时间：2012-11-08T14:03:58.857
> 
> 标签：java, xmpp, smack

我被这个问题困住了，我无法解决它。

# 代码：

```
 ConnectionConfiguration config = new ConnectionConfiguration(host, port);
        config.setDebuggerEnabled(true);
        config.setSASLAuthenticationEnabled(true);
        config.setSecurityMode(ConnectionConfiguration.SecurityMode.enabled);

        XMPPConnection connection = new XMPPConnection(config);
try{
            connection.connect();
            connection.login(login, password);
            //auth.authenticate(login, password, host);
        }
        catch (XMPPException exc){
            exc.printStackTrace();
        } 
```

完整的堆栈跟踪：

```
/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Home/bin/java -Didea.launcher.port=7544 "-Didea.launcher.bin.path=/Applications/IntelliJ IDEA 11 CE.app/bin" -Dfile.encoding=UTF-8 -classpath "/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Home/lib/deploy.jar:/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Home/lib/dt.jar:/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Home/lib/javaws.jar:/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Home/lib/jce.jar:/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Home/lib/jconsole.jar:/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Home/lib/management-agent.jar:/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Home/lib/plugin.jar:/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Home/lib/sa-jdi.jar:/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Classes/charsets.jar:/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Classes/classes.jar:/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Classes/jsse.jar:/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Classes/ui.jar:/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Home/lib/ext/apple_provider.jar:/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Home/lib/ext/dnsns.jar:/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Home/lib/ext/localedata.jar:/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Home/lib/ext/sunjce_provider.jar:/Library/Java/JavaVirtualMachines/1.6.0_35-b10-428.jdk/Contents/Home/lib/ext/sunpkcs11.jar:/Users/dmitry/IdeaProjects/smacker/target/classes:/Users/dmitry/IdeaProjects/smacker/lib/smack-3.2.1.jar:/Users/dmitry/IdeaProjects/smacker/lib/smackx-3.2.1.jar:/Applications/IntelliJ IDEA 11 CE.app/lib/idea_rt.jar" com.intellij.rt.execution.application.AppMain Main
Connection failed. No response from server.: 
    at org.jivesoftware.smack.PacketReader.startup(PacketReader.java:119)
    at org.jivesoftware.smack.XMPPConnection.initConnection(XMPPConnection.java:568)
    at org.jivesoftware.smack.XMPPConnection.connectUsingConfiguration(XMPPConnection.java:527)
    at org.jivesoftware.smack.XMPPConnection.connect(XMPPConnection.java:953)
    at SessionsHandler.openSession(SessionsHandler.java:62)
    at Main.main(Main.java:16)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

# Smack 调试输出：

## 在：

```
<stream:stream to="xmpp.odnoklassniki.ru" xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" version="1.0">
<starttls xmlns="urn:ietf:params:xml:ns:xmpp-tls"/>
<stream:stream to="odnoklassniki.ru" xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" version="1.0">
</stream:stream> 
```

## 出去：

```
<?xml version="1.0"?><stream:stream xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" from="odnoklassniki.ru" version="1.0" xml:lang="en">
<stream:features><starttls xmlns='urn:ietf:params:xml:ns:xmpp-tls'/><mechanisms xmlns='urn:ietf:params:xml:ns:xmpp-sasl'><mechanism>X-ODKL-API</mechanism><mechanism>X-ODKL-BLOWFISH</mechanism><mechanism>PLAIN</mechanism></mechanisms><auth xmlns='http://jabber.org/features/iq-auth'/></stream:features>
<proceed xmlns='urn:ietf:params:xml:ns:xmpp-tls'/>
<?xml version="1.0"?><stream:stream xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" from="odnoklassniki.ru" version="1.0" xml:lang="en">
<stream:features><mechanisms xmlns='urn:ietf:params:xml:ns:xmpp-sasl'><mechanism>X-ODKL-API</mechanism><mechanism>X-ODKL-BLOWFISH</mechanism><mechanism>PLAIN</mechanism></mechanisms><auth xmlns='http://jabber.org/features/iq-auth'/></stream:features> 
```

# 远程登录：

```
dmitry@pro:~$ telnet xmpp.odnoklassniki.ru 5222
Trying 217.20.145.69...
Connected to xmpp.odnoklassniki.ru.
Escape character is '^]'. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T14:37:47.663

Smack 库 (3.2.2) 在第二个（在 starttls 之后）“stream:stream”数据包中需要 @id 属性。

此属性是可选的，并且 xmpp.odnoklassnki.ru 不发送它：

```
<stream:stream to="odnoklassniki.ru" xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" version="1.0"> 
```

有两种选择可以解决这个问题：

*   修补 PacketReader 以将某种“假”ID 分配给流中没有 @id 属性的连接：流数据包
*   或要求 xmpp.odnoklassniki.ru 的管理员/开发人员将（假的或真实的）ID 属性添加到 stream:stream 数据包

这是 PacketReader:parsePackets() 方法的“修补”部分。请注意新的 connectionIdReceived 变量和对应的“if”条件：

```
// We found an opening stream. Record information about it, then notify
// the connectionID lock so that the packet reader startup can finish.
else if (parser.getName().equals("stream")) {
    // Ensure the correct jabber:client namespace is being used.
    if ("jabber:client".equals(parser.getNamespace(null))) {
        // Get the connection id.
        boolean connectionIdReceived = false;
        for (int i=0; i<parser.getAttributeCount(); i++) {
            if (parser.getAttributeName(i).equals("id")) {
                // Save the connectionID
                connectionID = parser.getAttributeValue(i);
                if (!"1.0".equals(parser.getAttributeValue("", "version"))) {
                    // Notify that a stream has been opened if the
                    // server is not XMPP 1.0 compliant otherwise make the
                    // notification after TLS has been negotiated or if TLS
                    // is not supported
                    releaseConnectionIDLock();
                }
                connectionIdReceived = true;
            }
            else if (parser.getAttributeName(i).equals("from")) {
                // Use the server name that the server says that it is.
                connection.config.setServiceName(parser.getAttributeValue(i));
            }
        }
        if (!connectionIdReceived) {
            connectionID = "<unspecified>";
            if (!"1.0".equals(parser.getAttributeValue("", "version"))) {
                // Notify that a stream has been opened if the
                // server is not XMPP 1.0 compliant otherwise make the
                // notification after TLS has been negotiated or if TLS
                // is not supported
                releaseConnectionIDLock();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T04:07:35.997

我看到了几种可能性：

*   由于信任链或服务器提供的 *-name，您的库不接受您从服务器获取的证书：

> 主题：C=RU，L=莫斯科，O=Odnoklassniki Ltd，CN=*.odnoklassniki.ru

*   在“安全”模式下，您的库不喜欢该服务器提供的任何身份验证机制，因为只有两个非标准机制（X-ODKL-API、X-ODKL-BLOWFISH）和两个更少-安全机制（PLAIN，[http://jabber.org/features/iq-auth](http://jabber.org/features/iq-auth)）。

如果我不得不猜测它会是第二个。这不是大多数客户端库作者不太可能遇到的错误情况。关闭安全模式，然后重试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T20:29:19.160

您的 XMPP 域似乎是错误的，这也可能是问题所在。您还将两个流标头发送到不同的域：

标题 1 到**xmpp.odnoklassniki.ru**：

```
<stream:stream to="xmpp.odnoklassniki.ru" xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" version="1.0"> 
```

**odnoklassniki.ru**的标题 2 ：

```
<stream:stream to="odnoklassniki.ru" xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" version="1.0"> 
```

服务器总是回复 .... from="odnoklassniki.ru" .... 所以**odnoklassniki.ru**应该是您正确的 XMPP 域。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T10:07:02.777

尝试这个...

它对我有用...尝试也给资源名称...我面临同样的问题 gioving 资源名称解决了它

```
 ConnectionConfiguration config;
config = new ConnectionConfiguration(ip, port, "Smack");
config.setSASLAuthenticationEnabled(false);
config.setReconnectionAllowed(true);
config.setCompressionEnabled(false);
config.setDebuggerEnabled(true);
connection = new XMPPConnection(config);
connection.connect();
if (connection.isConnected()) {
    connection.login(loginName, password);
} 
```

# css - 单页 wordpress 模板。如何在css中创建新部分

> ID：13290500
> 
> 赞同：1
> 
> 时间：2012-11-08T14:03:56.937
> 
> 标签：css, wordpress, themes, singlepage

我只是好奇这是如何完成的，因为最终我想开发自己的单页 wordpress 主题。

我已经看到所有主题都在一个页面上，但只是向下滚动，当您添加一个新的菜单项（或页面）时，它会在页面中添加一个新的 css 部分。在此模板演示中可以看到一个示例：[Wordpress In-Motion 主题](http://trendis.si/wp-themes/responsive/)如您所见，单击菜单链接，它会将您带到该部分。在 css 中添加 #news 或 #about-us

有人可以向我解释在设计 wordpress 主题时这是如何将其创建为功能的吗？山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T11:55:15.680

得到了这个问题的答案。将此添加到我的 index.php 页面（稍作修改）。对于我添加的每个页面，都会添加一个新页面，然后我可以使用 jquery 进行锚定，显然您可以添加 n 个您自己的类和 ID 来控制 div 的外观。

```
<?php
$pages = get_pages( array ( 'sort_order' => 'asc', 'sort_column' => 'menu_order', 'depth' => 1));

        foreach ( $pages as $page ) {  
            $page_section = str_replace( " ", "", strtolower( $page->post_name ) );
            echo '<div id="' . $page_section . '" ></div>';
        }
?> 
```

希望这对某人有帮助，山姆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:10:09.387

这是通过 JavaScript 完成的。据我所知，他们使用了一个名为[onePageNav](https://github.com/davist11/jQuery-One-Page-Nav)的 jQuery 插件，该插件处理向下滚动到选定的菜单部分，并`current`在向下滚动时向正确的菜单项添加一个类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T14:13:14.587

这与 Wordpess 无关。它只是使用锚点将您带到页面下方或上方。

如果页面上的元素具有唯一的 id，您可以创建一个锚标记来链接到该 id（它会将您带到页面上）

例如

```
<div id="anchor">...</div>
<div id="something-else>...</div>

<a href="#anchor">Click here to go to id=anchor div</a>
<a href="#something-else">Clicker to go to something-else id div</a> 
```

您给出的示例的 Wordpress 主题也具有 Javascript 或 jQuery 平滑功能 - 因此它可以很好地滚动到锚点，而不是像纯 HTML 那样立即将您带到那里。

# javascript - Google API v3 的 Javascript：无法通过点击框来打开/关闭 Fusion Layers

> ID：13290503
> 
> 赞同：2
> 
> 时间：2012-11-08T14:04:16.720
> 
> 标签：javascript, google-maps-api-3, google-fusion-tables

我试图自己解决这个问题，包括查看[此处的层上的质量保证][1]，但我不明白为什么我的脚本不起作用。

我有 2 个显示为图层的 Fusion 表。我希望两个点击框在选中时打开/关闭图层。

请有人可以查看我的代码，看看他们是否能发现问题所在？我将不胜感激！:)

谢谢。

```
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="UTF-8">
    <h3>new vs old layers</h3>
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.google.com/maps/api/js?key=AIzaSyDjB2uAt9B6cFcUiJAgANg63qNQtiF6v24&sensor=false"></script>
    <script type="text/javascript">
    function toggleLayer(this_layer){
      if(this_layer.getMap()) {
        this_layer.setMap(null)
      } else {
        this_layer.setMap(map);
      }
    }
    function initialize() {
      var map = new google.maps.Map(document.getElementById("map_canvas"), {
        center: new google.maps.LatLng(51.765, -1.384),
        zoom: 9,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      });
      var layer1 = new google.maps.FusionTablesLayer({
        query: {
          select: 'col2',
          from:'1NxFkNmdXHOvvWNnaWscabdxUDQqDul1BpiINtHI'
        },
        map: map
      });
      var layer2 = new google.maps.FusionTablesLayer({
        query: {
          select: 'col2',
          from:'1aM37b7PzUg3nqF14L4GzDbSrUGAfWOuIGcbkV2c'
        },
        map: map
      });
    }
  </script></head>
  <body onload="initialize();">
    <div>
      <input type="checkbox" id="show_hide_layer1" checked onchange="toggleLayer(layer1)"/>
      <label> old boundaries </label>
      <input type="checkbox" id="show_hide_layer2" checked onchange="toggleLayer(layer2)"/>
      <label> new boundaries </label>
    </div>
    <div id="map_canvas" style="width:80%; height:80%"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:27:17.327

我收到一个 JavaScript 错误：

```
layer1 is undefined. 
```

第一个问题是这些变量必须是全局变量才能在 HTML 事件处理程序中使用。

与您的地图变量相同。

[工作示例](http://www.geocodezip.com/v3_SO_FusionTables_toggle.html)

# matlab - 如何将高斯拟合到 matlab/octave 中的数据？

> ID：13290508
> 
> 赞同：10
> 
> 时间：2012-11-08T14:04:25.143
> 
> 标签：matlab, octave, curve-fitting, gaussian

我有一组带有峰值的频率数据，我需要将其拟合成高斯曲线，然后从中获得半峰全宽。我可以做的 FWHM 部分，我已经有一个代码，但是我在编写代码以适应高斯时遇到了麻烦。

有谁知道任何可以为我做这件事或能够为我指明正确方向的功能？（我可以做最小二乘拟合线和多项式，但我不能让它为高斯工作）

如果它与 Octave 和 Matlab 兼容也会很有帮助，因为我现在有 Octave，但要到下周才能访问 Matlab。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-08T14:23:28.820

直接拟合单个一维高斯是一个非线性拟合问题。你会在这里找到现成的实现，或者[这里](http://www.mathworks.nl/matlabcentral/fileexchange/35122-gaussian-fit)，或者[这里](http://www.mathworks.nl/matlabcentral/fileexchange/11733-gaussian-curve-fit)[2D](http://www.mathworks.com/matlabcentral/fileexchange/37087)，或者[这里](https://stackoverflow.com/questions/10504539/fitting-a-distribution-to-data-matlab)（如果你有统计工具箱）（你听说过谷歌吗？:)

无论如何，可能有一个更简单的解决方案。如果您确定您的数据`y`将被高斯很好地描述，并且在您的整个范围内合理分布`x`，您可以线性化问题（这些是方程式，而不是陈述）：

```
 y = 1/(σ·√(2π)) · exp( -½ ( (x-μ)/σ )² )
ln y = ln( 1/(σ·√(2π)) ) - ½ ( (x-μ)/σ )²
     = Px² + Qx + R 
```

换人的地方

```
P = -1/(2σ²)
Q = +2μ/(2σ²)    
R = ln( 1/(σ·√(2π)) ) - ½(μ/σ)² 
```

已经做出来了。现在，求解线性系统`Ax=b`（这些是 Matlab 语句）：

```
% design matrix for least squares fit
xdata = xdata(:);
A = [xdata.^2,  xdata,  ones(size(xdata))]; 

% log of your data 
b = log(y(:));                  

% least-squares solution for x
x = A\b; 
```

`x`您以这种方式找到的向量将等于

```
x == [P Q R] 
```

然后您必须对其进行逆向工程以找到均值 μ 和标准差 σ：

```
mu    = -x(2)/x(1)/2;
sigma = sqrt( -1/2/x(1) ); 
```

您可以与之交叉检查`x(3) == R`（应该只有**很小**的差异）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:22:37.060

也许这有你正在寻找的东西？不确定兼容性： http: [//www.mathworks.com/matlabcentral/fileexchange/11733-gaussian-curve-fit](http://www.mathworks.com/matlabcentral/fileexchange/11733-gaussian-curve-fit)

从其文档中：

```
[sigma,mu,A]=mygaussfit(x,y) 
[sigma,mu,A]=mygaussfit(x,y,h)

this function is doing fit to the function 
y=A * exp( -(x-mu)^2 / (2*sigma^2) )

the fitting is been done by a polyfit 
the lan of the data.

h is the threshold which is the fraction 
from the maximum y height that the data 
is been taken from. 
h should be a number between 0-1\. 
if h have not been taken it is set to be 0.2 
as default. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-05T20:57:21.890

我有类似的问题。这是谷歌上的第一个结果，这里链接的一些脚本让我的 matlab 崩溃了。

最后我在[这里](http://www.mathworks.com/help/curvefit/gaussian.html)发现matlab内置了拟合函数，也可以拟合高斯。

它看起来像这样：

```
>> v=-30:30;
>> fit(v', exp(-v.^2)', 'gauss1')

ans = 

   General model Gauss1:
   ans(x) =  a1*exp(-((x-b1)/c1)^2)
   Coefficients (with 95% confidence bounds):
      a1 =           1  (1, 1)
      b1 =  -8.489e-17  (-3.638e-12, 3.638e-12)
      c1 =           1  (1, 1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-07T21:03:17.673

我发现 MATLAB 的“fit”函数很慢，并且使用了带有内联高斯函数的“lsqcurvefit”。这是为了拟合高斯函数，如果您只想将数据拟合到正态分布，请使用“normfit”。

核实

```
% % Generate synthetic data (for example) % % %

    nPoints = 200;  binSize = 1/nPoints ; 
    fauxMean = 47 ;fauxStd = 8;
    faux = fauxStd.*randn(1,nPoints) + fauxMean; % REPLACE WITH YOUR ACTUAL DATA
    xaxis = 1:length(faux) ;fauxData = histc(faux,xaxis);

    yourData = fauxData; % replace with your actual distribution
    xAxis = 1:length(yourData) ; 

    gausFun = @(hms,x) hms(1) .* exp (-(x-hms(2)).^2 ./ (2*hms(3)^2)) ; % Gaussian FUNCTION

% % Provide estimates for initial conditions (for lsqcurvefit) % % 

    height_est = max(fauxData)*rand ; mean_est = fauxMean*rand; std_est=fauxStd*rand;
    x0 = [height_est;mean_est; std_est]; % parameters need to be in a single variable

    options=optimset('Display','off'); % avoid pesky messages from lsqcurvefit (optional)
    [params]=lsqcurvefit(gausFun,x0,xAxis,yourData,[],[],options); % meat and potatoes

    lsq_mean = params(2); lsq_std = params(3) ; % what you want

% % % Plot data with fit % % % 
    myFit = gausFun(params,xAxis);
    figure;hold on;plot(xAxis,yourData./sum(yourData),'k');
    plot(xAxis,myFit./sum(myFit),'r','linewidth',3) % normalization optional
    xlabel('Value');ylabel('Probability');legend('Data','Fit') 
```

# vba - 跨多个 Office 应用程序重用 VB(A) 代码

> ID：13290512
> 
> 赞同：1
> 
> 时间：2012-11-08T14:04:39.083
> 
> 标签：vba

我们在 2003 和 2010 之间的版本中使用不同的 Office 应用程序（Excel、Word、Powerpoint、Access、Visio）。我有一个简单的任务，在每个应用程序中都是相同的，即根据几个参数创建一个文件名从对话框中选择。

到目前为止，我已经`Function getStructuredFilename() as String`为每个单独的 Office 应用程序在其自己的 VBA 环境中创建了一个显示（模式）表单，其中包含一些按钮和文本框，返回一个字符串，并将它们存储在与每个应用程序一起使用的模板文件中 - 这意味着我必须维护每个 Office 应用程序分别使用相同的代码。

这带来了（例如 Excel）基于该模板创建的所有文件都“包含宏”，这让我的一些用户感到不安。

我想知道是否有一种方法可以定义一次对话框表单并从每个办公应用程序中调用它——比如“外部引用”、ActiveX 等等......

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:40:59.843

从 VBA 编辑器中，您可以将模块导出为 .bas 文件，这将允许您导入已完成的代码，而无需每次都重做。

或者，您是否考虑过为办公室创建插件？这些可能对你有用。 [http://msdn.microsoft.com/en-us/library/office/aa166223%28v=office.10%29.aspx](http://msdn.microsoft.com/en-us/library/office/aa166223%28v=office.10%29.aspx) [http://msdn.microsoft.com/en-us/magazine/cc507643.aspx](http://msdn.microsoft.com/en-us/magazine/cc507643.aspx)

# python - 无法运行 django 自定义命令

> ID：13290514
> 
> 赞同：2
> 
> 时间：2012-11-08T14:04:52.373
> 
> 标签：python, django

我在 app/management/commands 中创建了一个命令，这个命令运行良好。我现在无法运行此命令。我收到以下错误：

未知命令：'my_custom_command_name'

我正在使用虚拟环境。当我键入时，我没有在命令列表中看到这个`pythong manage.py`。我在我的设置中安装了这个应用程序，它以前可以工作

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T15:59:37.020

充分条件：

**1)**管理命令**可以通过以下方式导入**：

```
$ python manage.py shell
>>> from yourapp.management.commands import yourcommand 
```

（如果无法导入，那么您可能很容易获得有关特定导入问题的更多详细信息。最终可以更轻松地搜索答案，或者通常非常简单。）

**2)**为 Django 实现管理命令的应用程序应**安装为**包含单个文件的目录，**而不是压缩**为 egg 文件。您可以使用关键字参数`zip_safe=False`in`setup.py`来防止压缩安装。`False`（如果值被自动检测正确识别，这个参数通常是不必要的。所以在其他情况下更令人惊讶。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:43:06.097

这真的很奇怪。当我尝试运行时：

```
$ python manage.py shell 
```

我收到以下错误：

```
Error: cannot import name urandom 
```

我搜索了错误，发现我需要重新创建我的虚拟环境，所以我使用了以下命令：

```
virtualenv /path/to/my/virtualenv 
```

然后我能够以通常的方式使用 django 命令或我的自定义命令：s

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-03T07:03:12.730

有时，如果您尚未将应用添加到

`INSTALLED_APPS = [ 'app', ]`

在`settings.py`

# axapta - 销售发票报告错误：参数缺失值

> ID：13290528
> 
> 赞同：2
> 
> 时间：2012-11-08T14:05:18.317
> 
> 标签：axapta, dynamics-ax-2012, ssrs-2008-r2

我安装了 AX 2012 CU3，并尝试使用 Visual Studio 2010 修改 SalesInvoice 报告（数据和设计）。

它读取添加到 SalesInvoiceTmp 表中的新字段，我可以将它们放到设计中，

我什至可以成功构建和部署。但是：当我运行 SalesInvoice 报告时，它会提示错误：

> “参数 AgentAddress_TH”缺少值。

在调查了这个问题后，我意识到 CU3 增加了一些`SalesInvoice`关于 TAX 和 Thai 的自定义，并且这个特定的参数用于报告设计中的一个部分。

我试图让它为空，允许空白，隐藏......但没有运气。

我没有删除或隐藏任何部分或任何文本框。

我可以在其他 RTM AX 上编辑相同的报告而没有任何问题。

是需要修补程序的 CU3 中的错误还是我在某处犯了错误？

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:50:23.533

我们遇到了类似的事情。CU3 附带了新的报告。其中一些更改包括添加新参数。这解释了如何部署这些新报告：[http](http://technet.microsoft.com/en-us/library/dd309703.aspx) ://technet.microsoft.com/en-us/library/dd309703.aspx 。

您可能遇到的问题是，这显然会用默认值覆盖现有报告。如果您对 AX 报告进行了自定义，我会确保您备份这些。由于我对一些 AX 报表进行了调整，所以我采取的流程如下：

1.  确保我的所有报告都已备份
2.  将所有报告部署到 TEST/DEV 环境
3.  对于我们在 PROD 中遇到问题的那些报告，请从 TEST/DEV 报告服务器下载该报告
4.  如果适用，对报告进行任何格式更改
5.  将报表上传到 PROD 报表服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:40:15.353

你好。我有同样的问题。

我试图将此参数的名称更改为 fx。AgentAddress_THBackup，然后保存，将其添加到 AOT，部署，然后将名称更改回 AgentAddress_TH，保存，添加到 AOT 部署它，它适用于我。

顺便说一句，我有不止一个参数给我带来问题，我试图一次改变它们，它没有用，所以我一个一个地做了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T15:34:53.670

我又一次在这个问题上苦苦挣扎。我不记得上次我是如何解决它的，所以我搜索了很多，我根本不喜欢所有提供的解决方法——其中一些在时间和精力上都是巨大的！

所以我尝试了一些解决方法，它对我有用：1\. 使用基于 Web 的报告管理器删除 ssrs 服务器上的现有报告 2\. 重新部署它 3\. 运行报告

因为这行得通，我认为重新部署现有报告不能覆盖或修改某些属性或其他东西，这是导致这种行为的原因。

希望这可以帮助某人

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-03T14:31:27.887

1) 删除使用数据 2) 打开开发工作区 (Ctrl+D) 并清除缓存

# android-button - 方形按钮 Android

> ID：13290529
> 
> 赞同：1
> 
> 时间：2012-11-08T14:05:27.560
> 
> 标签：android-button

我想要一个只有 2 列的方形按钮布局，很像 Windows Phone 7 的开始屏幕。

但是，我不想制作自己的自定义按钮、使用库或使用固定值（因为这最终会导致密度不一致）。我只想使用样式和 XML 来实现这一点，并且我希望解决方案与密度无关。

我见过一个应用程序（Apollo）实现了这一点，但我不知道如何。

有什么办法可以做到这一点，还是我被迫覆盖 onMeasure？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:38:34.397

如果您想根据屏幕大小更改按钮的高度和宽度，您可以在活动中执行此操作。

```
 WindowManager w = getWindowManager(); 
 Display d = w.getDefaultDisplay(); 
        int sw = d.getWidth(); //Gives the screen width and height
        int sh = d.getHeight(); 
```

使用它来设置按钮的高度和宽度。使用包含按钮的布局。这里我以线性布局为例。

```
LinearLayout.LayoutParams params = button.getLayoutParams();
params.width = sw-padding;
params.heigth=sh;
button.setLayoutParams(params); 
```

# c# - 值类型的对象也是可为空的值类型吗？

> ID：13290531
> 
> 赞同：1
> 
> 时间：2012-11-08T14:05:19.743
> 
> 标签：c#, ivalueconverter

我看到了一些这样的代码

```
if(value == null || !(value is double || value is double?))
{
    return value;
} 
```

如果 value is double 是 true， value 是 double 吗？也应该是真的，因此我可以将代码更改为

```
if(value == null || !(value is double?))
{
    return value;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:08:51.257

假设`value`是`object`，您可以将代码更改为：

```
if (value == null || !(value is double))
{
   return value;
} 
```

如果`value`是盒装的`double?`，它总是要么是盒装的，要么是`null`盒装的`double`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:24:19.800

请记住，您`double?`可以使用在*可*空数据类型上查看原始值类型。因此，请记住相同的测试：`Nullable<double>`*`GetType`*

 *```
if (value == null || value.GetType() != typeof(double))
{
    return value;
} 
```

自从：

```
double           A = 1;  // A.GetType() = System.Double
double?          B = 1;  // B.GetType() = System.Double
Nullable<double> C = 1;  // C.GetType() = System.Double 
```

*所有假设第一个条件 ( `value == null`) 都会使测试短路，这具有相同的结果。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:11:50.020

`Nullable<double>`与 的类型不同`double`，但它的 nullDouble.Value 属性是双精度的。您包含的代码似乎表明它可以处理或*

# list - 使用 VBA 对 Excel 列表进行排序不起作用

> ID：13290533
> 
> 赞同：2
> 
> 时间：2012-11-08T14:05:32.303
> 
> 标签：list, sorting, excel, excel-2007, vba

我试图通过名为“名称”的列按字母顺序对一系列列表进行排序。下面的代码编译没有错误，运行没有错误，但它没有对列表进行排序。

任何人都可以提供帮助吗？

```
'**
 ' Sorts the defined list using the definded parameters
 ''
Function sort_list(list_name As String, column_name As String, Optional sort_order As String = xlAscending)

Dim list As ListObject          ' The list that is to be sorted
Dim sort_column As Range        ' The column in the list that is to be used as the sort key

    ' Set the list and the sort column
    Set list = WS_ext.ListObjects(list_name)
    Set sort_column = list.ListColumns(column_name).Range

    ' Sort the list
    With list.Sort
        .SortFields.Clear
        .SortFields.Add sort_column, sort_order
        .Header = xlYes
        .MatchCase = False
        .Apply
    End With

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:57:00.040

问题是我没有指定函数的哪些参数`SortFields`。将该行更改为以下内容解决了我的问题。

```
.SortFields.Add Key:=sort_column, order:=Sort_order 
```

# regex - sed中的邮政编码过滤器

> ID：13290551
> 
> 赞同：1
> 
> 时间：2012-11-08T14:06:26.037
> 
> 标签：regex, linux, unix, sed, postal-code

假设邮政编码采用 A0A 0AA 或 A0 0AA 的形式，其中 A 是任何字母，0 是任何数字，我编写了以下 sed 脚本来搜索网页以查找邮政编码。

```
s/\(([[:alnum:]]\{2,4\})\) \(([[:alnum:]]\{3\})\)/\1 \2/p 
```

将第一部分 (A0A) 存储在第一区域，将第二部分 (0AA) 存储在第二区域。然后打印出找到的内容。但是，运行此当前未找到任何邮政编码。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:14:48.723

我意识到您在询问有效邮政编码的子集，但我希望这个英国邮政编码的解决方案会有所帮助。我会这样处理问题：

查看[post-codes](http://en.wikipedia.org/wiki/Postcodes_in_the_United_Kingdom#Operation_and_application)的格式，格式是

*   A9 9AA
*   A99 9AA
*   AA9 9AA
*   AA99 9AA
*   A9A 9AA
*   AA9A 9AA

最后一部分的正则表达式很简单：`[0-9][A-Z]{2}`

第一部分是骗人的。我将问题一分为二：

*   上面的前四种模式可以使用 来匹配`[A-Z]{1,2}[0-9]{1,2}`，即一个或两个字母后跟一个或两个数字；
*   最后两个模式可以使用 匹配`[A-Z]{1,2}[0-9][A-Z]`，即一个或两个字母，然后是一个数字和一个字母。

把它们放在一起：

```
sed -rn 's/.*(([A-Z]{1,2}[0-9]{1,2}|[A-Z]{1,2}[0-9][A-Z]) [0-9][A-Z]{2}).*/\1/p' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:26:30.593

用你的正则表达式很难找到*正确*的东西。

1.  那里的内部未转义括号有什么用？因为它们是未转义的，所以它们实际上是匹配的。无论如何，它们毫无用处。
2.  当您的实际模式在某些地方需要**[:alpha:]**而在其他地方需要 [: **digit** :] 时，为什么要尝试匹配两个**[:alnum:]**块？
*****   为什么是**{2,4}**？你想要两个或三个，而不是两个、三个或四个。你*真正*想要的是字母数字字母或字母数字。*   因为您没有指定单词边界，所以即使您修复了正则表达式，第一个模式将匹配单词末尾的**A0** ，而第二个模式将匹配单词开头的**0AA 。******

 ****你至少需要

1.  去掉内括号
2.  **将{2,4}**更改为**{2,3}**
3.  在正则表达式的开头和结尾添加单词边界匹配

但是，这仍然不能正确满足您的要求。它将匹配无效模式。你真正需要做的是

1.  去掉内括号
2.  更改第一个模式以匹配**[:alpha:][:digit:]**或**[:alpha:][:digit:][:alpha:]**（有两种方法可以做到这一点）。
3.  更改第二个模式以匹配**[:digit:][:alpha:][:alpha:]**
4.  在正则表达式的开头和结尾添加单词边界匹配。

我没有给出如何做到这一点的具体例子，因为你要求“任何想法”。我假设你想尝试自己解决这个问题，给出正确的指示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:41:37.190

看起来你的括号有问题。以下对我有用：

```
$ sed -n 's/.*\b\([[:alnum:]]\{2,3\}\) \([[:alnum:]]\{3\}\)\b.*/\1 \2/p' <<< "here is a postcode: A0A 0AA. some more text"
A0A 0AA 
```****

# c - 从数组中获取最大排序子数组的算法

> ID：13290552
> 
> 赞同：0
> 
> 时间：2012-11-08T14:06:30.883
> 
> 标签：c, arrays, algorithm, sorted

我正在尝试在 C 中做某事，我需要一个算法来返回另一个数组中包含的最大维度排序数组。因此，例如，如果我有以下数组：

```
A[5] = {5, 2, 3, 1, 4} 
```

它应该返回：

```
2, 3, 4 
```

而且我想不出任何有效的实施方式。有什么想法吗？谢谢你。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T14:08:58.367

您的问题被称为“[最长增加子序列](http://en.wikipedia.org/wiki/Longest_increasing_subsequence)”。

可以在此处找到利用[动态规划的算法](http://en.wikipedia.org/wiki/Dynamic_programming)[，并提供了很好的解释](https://stackoverflow.com/questions/4938833/find-longest-increasing-sequence)。它的最优渐近复杂度为`O(nlogn)`。

基本思想是，您跟踪具有长度的子序列的最佳可能最后一个元素（或者更确切地说是其索引）`i`。当您处理下一个元素时，您检查数组`m`以查看是否有

*   找到一个更好（即更小）可能的最后一个元素一定长度`i`
*   否则，您会发现比目前更长的序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:09:53.953

从最长增加子序列的维基百科页面：

```
 L = 0
 for i = 1, 2, ... n:
    binary search for the largest positive j ≤ L
      such that X[M[j]] < X[i] (or set j = 0 if no such value exists)
    P[i] = M[j]
    if j == L or X[i] < X[M[j+1]]:
       M[j+1] = i
       L = max(L, j+1) 
```

这不是 C，但应该很容易用 C 编写代码。

# c# - 比较两个巨大的 CSV 文件以进行更改的最快方法是什么？

> ID：13290553
> 
> 赞同：4
> 
> 时间：2012-11-08T14:06:31.553
> 
> 标签：c#, .net, powershell, architecture

我认为这是一个架构和/或设计相关的问题：

**我的场景是**：

"

*   我将大量数据从 Db 导出到 CSV。
*   我经常这样做。
*   我想检查最后导出的 CSV 数据是否与之前导出的数据的内容不同”

我怎样才能做到这一点（无需逐行循环和比较）？

**备注**：

*   我的导出器是一个 .Net 控制台应用程序。

*   我的数据库是 MS-SQL（如果你需要知道的话）

*   我的导出器在 PowerShell 脚本中作为计划任务定期运行

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T14:09:46.750

听起来您只想生成每个 CSV 文件的校验和以进行比较。
[计算文件的 MD5 校验和](https://stackoverflow.com/questions/10520048/calculate-md5-checksum-for-a-file)

```
using (var md5 = MD5.Create())
{
    using (var stream = File.OpenRead(filename))
    {
        return md5.ComputeHash(stream);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:38:35.567

您可以让数据库跟踪上次修改的时间。只需向该表添加一个触发器，每当添加/删除/更新任何项目时，您都可以将特定值设置为当前时间。然后，您首先不需要比较大文件；您的导出作业可以简单地查询上次修改时间，将其与文件系统上文件的上次修改时间进行比较，并确定是否需要更新它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T00:53:56.360

*（这假设您在 Powershell 中执行此操作，但这些技术适用于任何语言。）*

**我建议先检查文件大小。**

先做这个，很快！

```
if ((gci $file1).Length -ne (gci $file2).Length)
{
    Write-Host "Files are different!"
}
else
{
    # Same size, so compare contents...
} 
```

最后，您可以进行全面比较。如果您使用的是 PowerShell，请查看`Compare-Object`(alias `diff`)。例如，

```
if (diff (gc $file1) (gc $file2))
{
    Write-Host "Files are different!"
} 
```

进行缓冲的逐字节比较可能会更快，如下所示：http: [//keestalkstech.blogspot.com/2010/11/comparing-two-files-in-powershell.html](http://keestalkstech.blogspot.com/2010/11/comparing-two-files-in-powershell.html)

**备择方案：**

MD5 比较实际上可能比逐字节比较慢。您不仅需要读入文件，而且还必须执行计算以获取哈希。您至少可以通过缓存旧文件的哈希进行优化——节省一半的 I/O。

因为您要导出数据库表，所以大多数数据库都会在末尾添加行。您必须确保这是您的情况，并且您只是添加而不是更新。如果是这样，您可以只比较文件中的最后一行；例如最后一个 4K 或者你的行大小有多大。

# ant - 如何删除其他目录中不存在的文件？

> ID：13290555
> 
> 赞同：2
> 
> 时间：2012-11-08T14:06:34.240
> 
> 标签：ant, delete-file, fileset

我有两个目录，我们称它们`src`为`build`. 我的构建系统可以工作，因此对于所有 mtime`src`比其中更新的文件，`build`它会将文件从复制到复制`src`并进行`buid`一些转换（缩小、版本控制等）。否则跳过，因为文件被认为是最新的。

然而，当源文件被删除时，这会带来一个问题，因为它的构建版本仍然存在`build`并进入之后生成的地图文件。

```
$ ls src
example1.js
example2.js

$ ant do-the-stuff
...

$ ls build
example1.js
example1-12345.min.js
example2.js
example2-23456.min.js
.map

$ cat .map
example1.js=example1-12345.min.js
example2.js=example2-23456.min.js

$ rm src/example2.js
$ ant do-the-stuff
...

$ cat .map
example1.js=example1-12345.min.js
example2.js=example2-23456.min.js 
```

有没有办法用 Ant 删除另一个目录中不存在的文件？从集合论的角度来看，这是一个简单的 A\B 操作。

这是我已经尝试过但没有奏效的方法：

```
<delete dir="build">
    <exclude name="src/*" />
</delete>

<delete dir="build">
    <exclude>
        <fileset name="src" />
    </exclude>
</delete>

<delete dir="build">
    <fileset dir="build/*">
        <not>
            <present targetdir="src" />
        </not>
    </fileset>
</delete> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T21:25:53.220

“有没有办法用 Ant 删除另一个目录中不存在的文件”
是的，使用[删除任务](http://ant.apache.org/manual/Tasks/delete.html) 和使用[presentselector的](http://ant.apache.org/manual/Types/selectors.html#presentselect)[文件集](http://ant.apache.org/manual/Types/fileset.html)，fe

```
<fileset dir="/home/rosebud/temp/dir1" includes="*.jar" id="srcfileset">
 <present present="srconly" targetdir="/home/rosebud/temp/dir2"/>
</fileset>
<echo>Files only in /home/rosebud/temp/dir1 => ${toString:srcfileset}</echo>
<delete>
 <fileset refid="srcfileset"/>
</delete> 
```

将删除仅存在于 /home/rosebud/temp/dir1
中的所有文件，以另一种方式使用：

```
...
 <not>
  <present present="srconly" targetdir="/home/rosebud/temp/dir2"/>
 </not>
... 
```

另请参阅[https://stackoverflow.com/a/12847012/130683](https://stackoverflow.com/a/12847012/130683)以获取使用当前选择器的另一个示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:43:13.697

在 Ant 中有任务[`depend`](http://ant.apache.org/manual/Tasks/depend.html)和[`dependset`](http://ant.apache.org/manual/Tasks/dependset.html)为此。

这些删除目标的来源较新，但我想这对您来说可能没问题。

在这个非常具体的情况下，`depend`似乎是正确的。

例子：

```
<depend srcdir="src" destdir="build"/> 
```

# python - 使用数组的python中的元素if elif函数

> ID：13290557
> 
> 赞同：14
> 
> 时间：2012-11-08T14:06:41.903
> 
> 标签：python, arrays, if-statement, numpy, definition

我有一个定义

```
def myfunc(a, b):
    if a < (b*10):
        result = a*2
    else:
        result = a*(-1)
    return result 
```

现在，当我使用 for 循环一个一个地输入我的`a`和`b`值时，这显然可以完美地工作，但是它需要很长时间（我已经稍微简化了定义）并且我从经验中知道将值作为数组传递会加速它向上。

那么如何修改此代码以接受数组。我使用了`any()`and`all()`命令，但我必须错误地使用它们，因为我的函数只吐出一个值而不是一组值。

我想要的输出的一个例子是：

```
>>>a = np.array([1,5,50,500])
>>>b = 1
>>>print myfunc(a, b)
array([-1, -5, 100, 1000]) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-08T14:14:12.200

你可以使用[np.where](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)：

```
def myfunc(a, b):
    return np.where(a < b*10, a*2, -a) 
```

例如，

```
In [48]: a = np.array([1, 5, 50, 500])

In [49]: b = 1

In [50]: myfunc(a, b)
Out[50]: array([   2,   10,  -50, -500]) 
```

请注意，输出与您想要的输出不同，但与您发布的代码一致。您当然可以通过反转不等式来获得所需的输出：

```
def myfunc(a, b):
    return np.where(a > b*10, a*2, -a) 
```

然后

```
In [52]: myfunc(a, b)
Out[52]: array([  -1,   -5,  100, 1000]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:11:29.943

您的函数很简单，可以完全删除它：

```
arr = [1, 5, 50, 500]
arr = [a * 2 if a < b * 10 else -a for a in arr] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:09:00.287

使用列表推导：

```
myarray = [1, 5, 50, 500]
b = 1
[myfunc(a, b) for a in myarray] 
```

# php - 我一定是误解了 PHP 的“use”关键字

> ID：13290558
> 
> 赞同：4
> 
> 时间：2012-11-08T14:06:45.333
> 
> 标签：php, namespaces

我正在使用带有 PHP 命名空间的应用程序，我认为这不是我做的......

```
\MyNamespace\ClassName::MyFunction(); 
```

我可以

```
use MyNamespace;
ClassName::MyFunction(); 
```

如果我在页面中多次使用该对象。这对我不起作用。我一直不得不使用第一种方法。

我对`use`关键字缺少什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T14:11:01.690

`use`将基本上使用姓氏创建指向其参数的链接（除非另有说明）。要使用`ClassName`而不必一直指定其命名空间，您必须导入以下内容：

```
use \MyNamespace\ClassName; 
```

因此，`ClassName`设置为对位于 的类型的引用`\MyNamespace\ClassName`。

它类似于 Java 的`import`工作方式，而不像 C# 那样`using`导入整个命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:11:23.507

您应该尝试：

```
use \MyNamespace\ClassName as MyClassName;

MyClassName::MyFunction(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:11:10.763

您需要导入/使用确切的类名：

```
use MyNamespace\ClassName;

ClassName::myFunction(); 
```

您还可以使用以下语法：

```
use MyNamespace\MySubnamespace;

MySubnamespace\MyClassname::doSth();
MySubnamespace\AnotherClassname::doSthElse(); 
```

它允许您使用一个命名空间中的多个类，而无需导入其中的每一个。

# javascript - 带有post方法的html表单间接指向验证码

> ID：13290563
> 
> 赞同：1
> 
> 时间：2012-11-08T14:06:57.627
> 
> 标签：javascript, html, forms, post, submit

我正计划创建一个新网页，并选择了一个感兴趣的页面作为模板。我已经下载了所有可能的页面源，以便在开始我自己的项目之前彻底分析页面的结构和功能。但是，经过几个小时的反复检查和重新检查，我真的无法弄清楚目标页面的登录功能：

去除 html 格式后，登录表单如下所示：

```
<form id=frmLogin method=post name=frmLogin action=/login/>
    <input id=strID tabIndex=1 type=text name=strID>
    <input id=strPW tabIndex=2 type=password name=strPW>
    <div class="cpBtn panel" onclick="return fnChkFrmLg();"><p>LOG IN</p></div>
</form> 
```

如您所见，它包含一个非常直接的形式。输入用户名和密码后，点击“登录”按钮，一个简短的基于 JS 的函数“fnChkFrmLg();” 被触发。上述 JS 的相应代码片段如下所示：

```
function fnChkFrmLg() {
if (document.frmLogin.strID.value.length == 0 || document.frmLogin.strID.value == "Username") {
    alert ('Please enter a valid username.');
    frmLogin.strID.value = "";
    frmLogin.strID.focus();
    return false;
}
if (document.frmLogin.strPW.value.length == 0 || document.frmLogin.strPW.value == "Password") {
    alert ('Please enter a valid password.');
    frmLogin.strPW.value = "";
    frmLogin.strPW.focus();
    return false;
}
document.frmLogin.submit();
return true; 
```

}

上述函数只检查用户是否确实输入了有效的用户名和密码，提交上述表单'frmLogin'，并返回true。

网页正在使用的登录表单几乎是一种处理身份验证协议第一位的“按部就班”的方式。提交表单后，它会被定向到 /login/，其中应包含联系数据库所需的所有代码，检查提交的用户名和密码是否存在/正确，然后拒绝连接或加载帐户页面所有必要的数据。然而，令我难以置信的是 /login/ 源代码几乎找不到。话虽如此，任何人都可以解释发生了什么，和/或如何为身份验证协议检索丢失的代码位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:15:17.120

表单中的 action 属性设置为错误的路径。我认为它会 login/index.php （当然如果你使用 php）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:51:28.737

经过更深入的研究后，我发现上述网页正在通过 .htaccess 文件中的“重定向”命令使用目录重定向。因此，整个身份验证过程在内部处理，在用户的“眼睛”后面，并作为 /account/ 目录（用户的个人资料页面）返回。

# geometry - 如何有效地向 z 轴堆叠 2d 动态对象

> ID：13290566
> 
> 赞同：1
> 
> 时间：2012-11-08T14:06:48.647
> 
> 标签：geometry, 2d, coordinates

假设我有两个 10 米半径的圆圈，我想在每个更大的圆圈上放 5 个 1 米半径的圆圈，朝向 z 轴。我希望大圆圈和小圆圈任意移动。大圆圈应该能够碰撞，小圆圈应该能够碰撞。

实现这一目标的最佳方法是什么？我碰巧使用Java，但是算法/伪代码就可以了。

进一步来说; 如何有效地将较大圆圈的加速度和旋转运动传递给较小的圆圈，同时让它们都动态移动。我看到的解决方案往往在大量使用时变得笨拙，尤其是当我开始考虑比大圆圈更复杂的对象时，但事实可能就是这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:46:46.883

听起来你只需要做一些数学。

假设我们有一条以 x1、y1 为中心、半径为 r1 的“船”（如您所说）。“水手”在 x2, y2 处，半径为 r2，因此 x2 y2 在船的边界内。如果船旋转了某个角度 A，而水手只是与这个旋转框架共同移动，那么水手的新中心位置将旋转相同的角度。

```
a1 = x2 - x1; //difference between centers, x direction
b1 = y2 - y1; //in y direction
a2 = a1*cos(A) + b1*sin(A); //new difference in x direction
b2 = b1*cos(A) - a1*sin(A); //new difference in y direction

x3 = x1 + a2;  //new center position of sailor, x direction
y3 = y1 + b2;  //                               y direction 
```

如果那个圆形（水手）有一些方向，那么它也必须旋转 A - 想想水手的方向与船的径向矢量对齐。在新位置，船旋转了某个角度 A 后，这个方向也旋转了 A，所以我们也应该将该旋转应用于水手。如果水手只是一个没有特征的圆圈，那么所有方向都是相同的，我们可以跳过它。

# mysql - phpmyadmin 存储过程错误

> ID：13290569
> 
> 赞同：1
> 
> 时间：2012-11-08T14:07:11.790
> 
> 标签：mysql

我正在尝试在 phpmyadmin 网络托管服务器中运行 SP，但总是出现以下错误

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的 '' 附近使用正确的语法

**我试图运行的 SP 是：**

```
CREATE PROCEDURE Authenticate_UserByEmailID(strUsername VARCHAR(45), strPassword VARCHAR(45))
BEGIN
    SELECT * FROM users 
    WHERE users.Username = strUsername AND users.Password = strPassword;
END $$ 
```

我尝试在 SP 名称、表名列名和其他不同的引号组合中加上单引号但没有结果，然后我遇到了[**这个链接**](http://blog.nth-design.com/2009/02/25/creating-sp-in-phpmyadmin/)并尝试更改分隔符但没有结果。你能帮忙吗？

# **解决方案：**

对不起伙计们我的坏。我添加了分隔符，为我解决了这个问题。

```
DELIMITER ;;

CREATE PROCEDURE `Authenticate_UserByEmailID`(strUsername VARCHAR(45), strPassword VARCHAR(45))
BEGIN
    SELECT * FROM DBCompany_samsonusac517644.users 
    WHERE Username = strUsername AND Password = strPassword;
END ;; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T14:17:34.407

你想念`DELIMITER`

```
mysql> delimiter $$
mysql> CREATE PROCEDURE Authenticate_UserByEmailID(strUsername VARCHAR(45), strPassword VARCHAR(45))
    -> BEGIN
    ->     SELECT * FROM users 
    ->     WHERE users.Username = strUsername AND users.Password = strPassword;
    -> END $$
Query OK, 0 rows affected (0.01 sec) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T16:37:24.897

以上所有答案都是做出某些假设。1and1 存在基本问题，某些其他托管服务提供商正在使用非常旧的 phpMyAdmin 版本，并且存在定义分隔符的问题；并且无法从 phpMyAdmin 更改它。一些供应商已经继续前进，因此他们不会面临这个问题。但如果你这样做，那么以下是方法 -

1.  在托管服务提供商上创建一个新的 PHPMyAdmin。附加链接让您了解[http://internetbandaid.com/2009/04/05/install-phpmyadmin-on-1and1/](http://internetbandaid.com/2009/04/05/install-phpmyadmin-on-1and1/)
2.  通过能够从您的桌面访问您的托管服务提供商 mySQL 的复杂途径。这很复杂，但如果您是认真的开发人员，那是最好的。这是一个链接[http://franklinstrube.com/blog/remote-mysql-administration-for-1and1/](http://franklinstrube.com/blog/remote-mysql-administration-for-1and1/)

希望这可以帮助

# java - EC2 JGroups 发现

> ID：13290570
> 
> 赞同：9
> 
> 时间：2012-11-08T14:07:17.820
> 
> 标签：java, amazon-ec2, discovery, jgroups

对于我当前的项目，我们决定将我们的应用程序部署到一些 Linux 机器上的亚马逊弹性计算云。我们使用 JGroups 进行组通信，并且需要一种可靠的发现机制，该机制不需要使用其他集群成员的地址预先配置每个应用程序（这对于 TCPPING 是必需的，而对于 TCPGOSSIP 则“排序”是必需的）。由于我们不能使用 UDP 多播，因此我们的选项中排除了多播发现。

我们研究过使用 S3 Ping 协议，但在得知它存在一些可靠性问题后，我们决定推出自己的协议来完成这一发现。

我很想得到一些关于我们编写的简单协议的反馈，以及它与 S3 Ping 的比较。它目前的一个限制是它依赖于适用于 Java 的 AWS 开发工具包。

```
public class EC2Ping extends Discovery {

    private static final Logger log = LoggerFactory.getLogger(EC2Ping.class);

    public static final short EC2_PING_PROTOCOL_ID = 1001;
    private static final int DEFAULT_JGROUPS_PORT = 7800;

    static {
        ClassConfigurator.addProtocol(EC2_PING_PROTOCOL_ID, EC2Ping.class);
    }

    /** The JGroups port number */
    private int port = DEFAULT_JGROUPS_PORT;

    /** The EC2 client */
    private AmazonEC2Client client;

    /** The EC2 instance filters */
    private List<Filter> filters;

    public EC2Ping(EC2Ping src) {
        this.client = src.client;
        this.port = src.port;
    }

    public EC2Ping() {
        // Default constructor
    }

    @Required
    public void setClient(AmazonEC2Client client) {
        this.client = client;
    }

    public void setFilters(List<Filter> filters) {
        this.filters = filters;
    }

    public void setPort(int port) {
        this.port = port;
    }

    public int getPort() {
        return port;
    }

    @Override
    public Collection<PhysicalAddress> fetchClusterMembers(String cluster_name) {
        List<PhysicalAddress> addresses = new ArrayList<PhysicalAddress>();
        DescribeInstancesRequest request = new DescribeInstancesRequest();
        if (filters != null) {
            request.setFilters(filters);
        }
        DescribeInstancesResult result = client.describeInstances(request);
        for (Reservation res : result.getReservations()) {
            for (Instance instance : res.getInstances()) {
                String ipAddr = instance.getPrivateIpAddress();
                IpAddress addr;
                try {
                    addr = new IpAddress(ipAddr, port);
                    addresses.add(addr);
                } catch (UnknownHostException uhe) {
                    log.error("Unable to resolve cluster member address [" + ipAddr + "]");
                }
            }
        }
        return addresses;
    }

    @Override
    public boolean isDynamic() {
        return true;
    }

    @Override
    public boolean sendDiscoveryRequestsInParallel() {
        return true;
    }
} 
```

如有必要，我可以包含我的协议栈配置，但它与 UDP 非常相似，只是它使用我们的 EC2Ping 协议而不是多播发现。

我的主要问题如下：

1.  这是否提供了比 S3 Ping 更可靠的解决方案？
2.  对 AWS Java 开发工具包的依赖是否否定了该解决方案的实用性？（在回馈 JGroups 方面）

任何意见将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T16:35:29.907

您可能想查看GitHub 上的[JGroups AWS 项目。](https://github.com/meltmedia/jgroups-aws)它使用 AWS API 使用 EC2 标签构建集群。它还支持实例配置文件，因此您可以从配置文件中获取访问密钥和密钥。

# objective-c - shouldAutorotate 返回 true 但不旋转

> ID：13290572
> 
> 赞同：0
> 
> 时间：2012-11-08T14:07:08.023
> 
> 标签：objective-c, ios, xcode, ipad, ios6

我的第一个视图控制器是 LoginViewController。我正在尝试在 iOS 6 上支持自动旋转管理。

我已经实现了 shouldAutorotate 而不是 shouldAutorotateToInterfaceOrientation，如下所示：

```
-(BOOL)shouldAutorotate {
   UIInterfaceOrientation toInterfaceOrientation = [[UIDevice currentDevice] orientation];

   return [DeviceSupport isOrientationSupported:toInterfaceOrientation];
} 
```

`shouldAutorotate`在应用程序启动时被调用五次。toInterfaceOrientation 值按顺序排列且不改变 ipad 方向：0、0、0、4 和 4。首先，为什么应用程序需要这么长时间才能在 currentDevice 中放置正确的方向？为什么应该调用Autorotate 五次？

当方向为 4 时，`[DeviceSupport isOrientationSupported:toInterfaceOrientation]`返回 true。但我的应用程序不旋转。

在我的 info.plist 中：

```
Supported interface orientations
=> Item 0: Portrait (bottom home button)
=> Item 1: Portrait (top home button)

Supported interface orientations (iPad)
=> Item 0: Landscape (left home button)
=> Item 1: Landscape (right home button) 
```

任何的想法？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:16:32.167

更改您的代码：

```
[self.window addSubview:aController.view]; 
```

到这段代码：

```
self.window.rootViewController = aController; 
```

还为方向支持添加以下方法

shouldAutorotate -return 是

supportedInterfaceOrientations- 返回 UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:31:32.230

您能否再次检查您是否也实现了supportedInterfaceOrientations？

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
} 
```

# ios - 在 iphone 中挂钩 C/C++ 函数的简单方法？

> ID：13290573
> 
> 赞同：0
> 
> 时间：2012-11-08T14:07:22.817
> 
> 标签：ios, hook, jailbreak, cydia

是否有一个简单的挂钩函数可以帮助我在 dylib 中挂钩 C/C++ 函数？

我知道如何使用 MSHookMes​​sage 函数，但我没有 MSHookFunction 的简单来源。

我曾尝试研究 saurik 的源代码 - 但尝试编译它是地狱......

有什么好的例子吗？（不是使用示例，实现示例）。

编辑：我试图阅读关于 THEOS - 但也不明白如何挂钩 C 函数......它在这里说 teh 指令仅适用于类：

%hook 类名

是否有可能以这种方式挂钩功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:10:04.757

您可以使用[CFBundleGetFunctionPointerForName](https://developer.apple.com/library/mac/documentation/CoreFOundation/Reference/CFBundleRef/Reference/reference.html#//apple_ref/c/func/CFBundleGetFunctionPointerForName)来完成。

请参阅[Loading Non-Cocoa Bundles](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingCode/Tasks/LoadingBundles.html)，清单 2 和 3。甚至适用于私有框架。你只需要知道框架在磁盘上的位置。

# jsch - 如何处理expectj中的密码提示

> ID：13290575
> 
> 赞同：0
> 
> 时间：2012-11-08T14:07:35.690
> 
> 标签：jsch, expectj

我想通过expectj（实际上是jsch）发送“su root”命令。它要求密码。有没有办法在 expectj 中处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:33:23.963

```
 ExpectJ ex = new ExpectJ(30);
    Spawn spawn = ex.spawn(new SshSpawn("192.168.56.101", 22, "alice", "alicepassword"));
    spawn.send("su root\n");
    spawn.expect("assword");
    spawn.send("yourpassword\n");
    try{
        spawn.interact();   
    }catch(NullPointerException npe){   
        //ignore, seems like some strange expectj bug
    } 
```

# mysql - 带有动态表名的 SELECT 查询和子选择查询

> ID：13290576
> 
> 赞同：0
> 
> 时间：2012-11-08T14:07:36.360
> 
> 标签：mysql, sql

我的 MySQL 数据库结构有一个有趣的情况。

假设我有三个数据库表：table_Main、table_sub_A、table_sub_B

“table_Main”字段：

*   行号
*   代码（该字段用于查找“table_sub_”表
*   姓名

示例“table_Main”行：

```
1,A,Test A
2,B,Test B 
```

现在，我想构建一个 SQL 查询，该查询将从 table_Main 检索所有行，但也会从每个 table_Main 行的相应表中获取 count(*)。

```
SELECT *, (SELECT COUNT(*) FROM table_sub_XXXX) AS TotalRecords  FROM table_Main 
```

问题从这里开始。XXXX 应该是每个对应 table_Main 行的“代码”列值。如何在子选择查询中生成动态表名？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:11:52.657

你不能

```
SELECT
   *,
   (SELECT COUNT(*) FROM table_sub_A) AS TotalRecordsA, 
   (SELECT COUNT(*) FROM table_sub_B) AS TotalRecordsB
FROM
   table_Main 
```

但是，MySQL 可能会评估*每*行`table_Main`

所以我会这样做来帮助查询优化器

```
SELECT
   *, TotalRecordsA, TotalRecordsB 
FROM
   table_Main
   CROSS JOIN
   (SELECT COUNT(*) AS TotalRecordsA FROM table_sub_A) A
   CROSS JOIN
   (SELECT COUNT(*) AS TotalRecordsB FROM table_sub_B) B 
```

# c++ - C++ 错误 LNK2001：未解析的外部符号函数 _main

> ID：13290584
> 
> 赞同：7
> 
> 时间：2012-11-08T14:07:48.677
> 
> 标签：c++, main

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

我正在学习 C++，我的项目中有一个编译问题。我已经阅读了大量标题上有此错误的帖子，但我找不到问题出在哪里。

我的 Main 函数中有一个导致错误的方法调用。每当我评论该项目编译完美的行。

代码如下：

**主文件**

```
#pragma once 
#include "stdafx.h"
#include <iostream>
#include <sstream>
#include <WinSock.h>
#include <Windows.h>
#include <string.h>
#include "NetUtils.h"
#include "Utils.h"
#include "FileUtils.h"
#include "SendMail.h"
using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{   

    SendMail *mail = new SendMail("somemail@mail.com","Envio de C++","Cuerpo del mail");    
    char* msg="";   
    mail->SendNow();
    ... 
```

这个方法 mail->SendNow 是我评论解决问题的方法，所以我想我在 SendMail.cpp 或 SendMail.h 内部有某种标题声明问题

现在剩下的类和标题：

**发送邮件.h**

```
#pragma once
#ifndef SENDMAIL_H
#define SENDMAIL_H

class SendMail

{
public:
    SendMail(char* c_to, char* c_subject, char* c_body);
    void Check(int iStatus, char *szFunction);
    void SendNow();
    char * to;
    char * subject;
    char * body;    
};

#endif 
```

**发送邮件.cpp**

```
#define WIN32_LEAN_AND_MEAN

#pragma once
#include "SendMail.h"
#include <stdio.h>
#include <stdlib.h>
#include <fstream>
#include <iostream>
#include <windows.h>
#include <winsock2.h>

#pragma comment(lib, "ws2_32.lib")
using namespace std;

// Insist on at least Winsock v1.1
const int VERSION_MAJOR = 1;
const int VERSION_MINOR = 1;

#define CRLF "\r\n"                 // carriage-return/line feed pair

SendMail::SendMail(char* c_to, char* c_subject, char* c_body)
{
    to = c_to;
    subject= c_subject;
    body = c_body;

}

// Basic error checking for send() and recv() functions
void Check(int iStatus, char *szFunction)
{
  if((iStatus != SOCKET_ERROR) && (iStatus))
    return;

  cerr << "Error during call to " << szFunction << ": " << iStatus << " - " << GetLastError() << endl;
}

void SendNow()
{
    // WSADATA     WSData;  

    ///* Attempt to intialize WinSock (1.1 or later)*/
    //  if(WSAStartup(MAKEWORD(VERSION_MAJOR, VERSION_MINOR), &WSData))
    //  {
    //  cout << "Cannot find Winsock v" << VERSION_MAJOR << "." << VERSION_MINOR << " or later!" << endl;
    //  ErrMsg="Cannot find Winsock v";
    //  return;     
    //  }
} 
```

如您所见，方法 Send 已被注释掉，因此我无法弄清楚问题所在。

编译器输出为：

```
Error   6   error LNK1120: 1 unresolved externals   C:\Users\clanderasm\Documents\Visual Studio 2010\Projects\LandeTestConsole\Debug\LandeCplusConsole.exe  LandeCplusConsole
Error   5   error LNK2019: unresolved external symbol "public: void __thiscall SendMail::SendNow(void)" (?SendNow@SendMail@@QAEXXZ) referenced in function _main    C:\Users\clanderasm\Documents\Visual Studio 2010\Projects\LandeTestConsole\LandeCplusConsole\LandeCplusConsole.obj  LandeCplusConsole 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T14:15:45.787

基本上，这个错误意味着你有一个你承诺在你的头文件中实现的函数，但是当它到达它实际需要该函数的部分时，它没有找到它。

如果您注释掉函数调用，您将实现该函数的承诺仍然存在。然而，实际上没有人使用这个功能，所以你没有兑现你的承诺并不重要。

一旦你知道这意味着什么，就很容易找到问题所在：

您将函数定义为：

```
void SendNow() 
```

这是一个全局函数而不是类函数，因此您还没有实现您承诺实现的类函数。

您可以通过将其转换为来解决此问题：

```
void SendMail::SendNow() 
```

请注意，`Check()`即使这还没有导致错误，您也有同样的问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-08T14:11:59.617

你的意思是

```
void SendMail::Check(int iStatus, char *szFunction)
void SendMail::SendNow() 
```

代替

```
void Check(int iStatus, char *szFunction)
void SendNow() 
```

# c# - 从 RS232(com) 接收数据

> ID：13290587
> 
> 赞同：1
> 
> 时间：2012-11-08T14:08:12.467
> 
> 标签：c#, c++, c, com, serial-port

我想编写一个使用 C/C# 从 RS232（有时使用 USB 连接器）端口接收数据的应用程序。

我在网上搜索过，但一无所获。你有什么有趣的事吗？文章，教程，技巧，代码片段，一切都非常感谢。

我有传输协议，但不知道如何从 rs232 读取数据。我可以异步读/写数据吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T14:22:10.587

看看这个非常棒的教程： http: [//www.codeproject.com/Articles/8605/Serial-Communication-using-C-and-Whidbey](http://www.codeproject.com/Articles/8605/Serial-Communication-using-C-and-Whidbey)。它不仅提供了一个完整的小项目，而且还解释了串行通信的基础知识。

至于 USB 转串行连接器或真正的 RS232 - 这并不重要，因为 Windows 将两者都识别为 COM 端口。如果您打开设备管理器，在**端口（COM 和 LPT）**部分，您将能够看到两者。

# c - fork() kill() 和 execv()

> ID：13290594
> 
> 赞同：1
> 
> 时间：2012-11-08T14:08:18.660
> 
> 标签：c, fork, execv

我在这里尝试进行小型单元测试。但是程序并没有像我预期的那样工作。

```
 char *args[2];
    args[0] = (char*)"/usr/bin/firefox";
    args[1] = NULL;
    pid = fork();
    printf("forked and my pid is %d\n",pid);
    //check for errors
    if (pid<0){         
        printf("Error: invoking fork to start ss has failed, Exiting\n ");
        exit(1);
    }
    //the child process runs firefox
    if (pid==0){        
        if (execv(args[0],args)<0){
            perror("Error: running s with execvp has failed, Exiting\n");
        }
        printf("IVE BEEN KILLED\n");            
    }
    //dad is here
    printf("DAD IS GOING TO KILL U\n");
    if (pid>0){
        sleep(3);
        kill(get_pidof(string("firefox")),SIGUSR1);
    } 
```

现在，我希望程序运行如下： 1.孩子运行 firefox（它确实如此） 2.爸爸打印 DAD IS GOING TO KILL U（到目前为止一切顺利） 3.firefox 将打开 3 秒，然后然后关闭（也这样做） 4.子进程将完成运行 execv 并打印“IVE BEEN KILLED”。这不会发生。

我的目标是知道 execv 运行的程序在 execv 继续运行（我被杀死 printf 所在的位置）之后立即通过提高几个标志来完成。我有几千行的代码，除非必要，否则不想使用其他方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:14:11.447

`execv()`用新进程替换当前进程。当通过*Firefox*启动时，进程`execv()`中`printf("IVE BEEN KILLED\n")`基本上不再存在并且永远不会被执行（参见[man execv](http://linux.die.net/man/3/execv)）。父进程可以使用[wait() 等待子进程](http://linux.die.net/man/2/wait)*firefox*退出，或者通过信号（例如）警告子进程的死亡。`signal(SIGCHLD, child_exit_handler)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:15:12.850

你杀了孩子，它没有捕捉到信号，所以它就死了。至少如果 exec 返回它会，但它不会。因此，如果执行失败，您只会执行打印。

如果您想知道您的孩子是否已经完成，`wait`请拨打电话。

另请注意，当您的孩子没有退出时，它将执行父 pid 的代码，这可能很有趣。

# objective-c - 使用 NSMetadataQuery 或 MDQuery 设置批处理参数

> ID：13290595
> 
> 赞同：3
> 
> 时间：2012-11-08T14:08:35.897
> 
> 标签：objective-c, xcode, macos, spotlight, nsmetadataquery

如果有人分享如何使用以下方式完成查询批处理，那将很有帮助 -

```
- (void)setNotificationBatchingInterval:(NSTimeInterval)timeInterval 
```

与 NSMetadataQuery 一起使用或使用

```
void MDQuerySetBatchingParameters (
    MDQueryRef query,  
    MDQueryBatchingParams params
); 
```

与 MDQuery 类一起使用时的结构。

我对批处理的理解是 - NSMetadataQueryGatheringProgressNotification/kMDQueryProgressNotification 观察者根据 timeInterval/MDQueryBatchingParams 中给出的值得到通知。

当我将 0.001f 传递给 timeInterval 的值时，我希望它每 1 毫秒通知一次方法，但事实并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:52:59.230

我发现，当将这些值赋予 MDQueryBatchingParams 结构时，它们的工作方式与我想要的方式相同，只是 max_num 值没有用。每毫秒都有通知，以便我可以控制结果。

```
MDQueryBatchingParams params;
params.first_max_num = 100;
params.first_max_ms = 1;
params.progress_max_num = 1;
params.progress_max_ms = 100;
params.update_max_num = 100;
params.update_max_ms = 100; 
```

# svn - 更改 SVN 作者/用户名 | ubuntu

> ID：13290597
> 
> 赞同：0
> 
> 时间：2012-11-08T14:08:38.347
> 
> 标签：svn, ubuntu

每当我在 SVN 存储库中提交代码时，它显示代码是由用户“SVN”而不是我自己的用户名“some_name”提交的。

看来我需要更改或更新我的机器（客户端）上的用户名/作者。谁能告诉我如何改变这个？

这是SVN INFO的详细信息

```
 svn info
Path: .
URL: svn+ssh://**************
Repository Root: svn+ssh:*******************
Repository UUID: ******************
Revision: 123456
Node Kind: directory
Schedule: normal
Last Changed Author: svn
Last Changed Rev: 121345
Last Changed Date: 2012-11-08 07:08:37 +0500 (Thu, 08 Nov 2012) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:49:33.653

[使用 SSH 保护 Svnserve](http://tortoisesvn.net/ssh_howto.html)，“使用 TortoiseSVN 测试 SSH”一章（即使您不使用 TSVN）包含所有答案

* * *

其他方法：

*   [使用 SSH (svn+ssh) 设置 Subversion (SVN)](http://www.startupcto.com/server-tech/subversion/setting-up-svn)
*   [svn+ssh 设置小教程](http://svn.haxx.se/dev/archive-2004-03/0253.shtml)

# html - CSS删除href来自父图像的间隙处的链接

> ID：13290598
> 
> 赞同：2
> 
> 时间：2012-11-08T14:08:21.997
> 
> 标签：html, css, html-lists

我有一张有链接的图片。然后我有一个内联对齐的圆形子弹图像，它们放置在带有链接的父图像上。当用户尝试点击子弹时，有时他们可能会错过一小段距离并意外点击图片链接（不是子弹）。所以我希望项目符号之间的那些空白根本没有链接，但它们仍然有来自背景的链接。

代码是基本的，像这样：

```
<ul class="bullets2" style="position:relative;bottom:25px;left:50px">
    <li><a href="javascript:alert('CLICK BULLET')"></a></li>
    <li><a href="javascript:alert('CLICK BULLET')"></a></li>
    ...
</ul> 
```

还有 CSS 样式，您可以查看代码示例。

下面的图片展示了我想要实现的目标。 ![在此处输入图像描述](../Images/9bbbc92d2f9173261a249f82b0dc3d77.png)

**这里是 jsFiddle：http:** [//jsfiddle.net/RCkFL/](http://jsfiddle.net/RCkFL/)

* * *

***更新***

没有一个解决方案有效，所以我`<map>`结合使用`<area>`创建多边形热点解决了我的问题。无论如何，感谢所有答案，我希望有人仍然会为我的原始问题提出解决方案，因为 CSS 方法要好得多。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:46:23.100

我会在图像上放置带有项目符号的 a 并给该 div 一个填充（以获得更多“非href”空间。

没试过，但应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:58:26.603

```
ul.bullets2 {

    width: 400px;
    padding: 0px;
    margin: 0;
    display: inline;

}

ul.bullets2 li a {

    background: url('http://s16.postimage.org/46ceaxz2p/bullet.png') no-repeat;
    padding: 0px 8px;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:51:08.033

类似于 3dgoo 的帖子，但略有不同；）

为图像添加填充，将它们设置为块，并将 'li' 设置为 inline-block - 在不触发图像点击的项目之间将有 1 个字符的空间。

```
ul.bullets2
{
    width:400px;
    padding: 0px;
    margin: 0;
}

ul.bullets2 li{
    display:inline-block;
}

ul.bullets2 li a {
    display:block;            
    background: url(http://s16.postimage.org/46ceaxz2p/bullet.png) no-repeat top center;
    padding:3px;
    width:16px;
    height:16px;
}

ul.bullets2 li a:hover, ul.bullets2 li a.selected
{
    background: url(http://s16.postimage.org/46ceaxz2p/bullet.png) no-repeat center middle;
    width:16px;
    height:16px;
}​ 
```

jsfiddle：http: [//jsfiddle.net/ev5q8/](http://jsfiddle.net/ev5q8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T14:48:04.873

如果您在环绕项目符号的 li 标签中添加一些填充，这应该会阻止下面的图像链接。

CSS

```
ul.bullets2
{
    width:400px;
    padding: 0px;
    margin: 0;
    position: relative;
    bottom:40px;
    left:50px
}

ul.bullets2 li {
    float: left;
    padding: 10px;
}

ul.bullets2 li a {
    background: url(http://s16.postimage.org/46ceaxz2p/bullet.png) no-repeat;
    display: block;
    width:16px;
    height:16px;
}

ul.bullets2 li a:hover, ul.bullets2 li a.selected
{
    background: url(http://s16.postimage.org/46ceaxz2p/bullet.png) no-repeat;
    width:16px;
    height:16px;
} 
```

[演示](http://jsfiddle.net/RCkFL/21/)

# jquery - 如果多次打开同一个选项卡，Firefox 会失去焦点

> ID：13290599
> 
> 赞同：1
> 
> 时间：2012-11-08T14:08:41.617
> 
> 标签：jquery, firefox, jquery-events, window.open

我在 Firefox 和 IE 中遇到的行为与在 Google Chrome 中不同。我有事件按钮`onClick`。

此事件触发`window.open("url", "name")`在浏览器中打开一个新选项卡并将焦点放在它上面。这正是我想要的。

但是，如果我返回第一个选项卡并再次单击该按钮，则会刷新第二个窗口，但焦点仍停留在第一个窗口上。

如果我在 Google Chrome 中做同样的事情，焦点就会一直转到新窗口。

有关示例，请参见下面的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World</title>
  </head>
  <body>
  <div id="mydiv" style="width:100px; height:200px;"></div>
    <script src="jquery.js"></script>
    <script>
      $(function() {
          $('#mydiv').css('background-color', 'red');
          $('#mydiv').click(function() {
             window.open('http://google.fr', 'mywindowname')
          });
      });
    </script>    
  </body>
</html> 
```

我能做些什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:14:25.260

您无法使用代码解决此问题。浏览器如何处理新窗口是浏览器的特性，而不是通过`javascript`. 每个客户的设置可能不同，可能不支持您的意图。

另请参阅此相关文章：[每次设置弹出窗口的焦点](https://stackoverflow.com/questions/2965754/set-the-focus-of-a-popup-window-everytime)

一些答案继续说它没有得到很好的支持，原因与我上面解释的相同。

# c# - 如何将int转换为uint

> ID：13290603
> 
> 赞同：35
> 
> 时间：2012-11-08T14:08:48.197
> 
> 标签：c#

当我尝试像这样转换它时，我有`int`变量值：`820924`

`(uint)data[structure["MICROSECONDS"].Index]`

它不起作用。

这也不起作用

`unchecked((uint)data[structure["MICROSECONDS"].Index])`

我收到`Specified cast is not valid.`异常。

数据存储`object`，但在运行时我应该尝试转换为`int`. 我几乎可以肯定。我已经打印了对象值`820924`，但是我不知道如何打印对象类型，但它必须是 int。

代码：

```
object value = data[structure["MICROSECONDS"].Index];
Console.WriteLine("xx MICROSECONDS type " + value.GetType());
Console.WriteLine("xx casting " + value);
Console.WriteLine("xx cast ok" + (uint)value); 
```

结果：

```
xx MICROSECONDS type System.Int32
xx casting 820924 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-08T14:19:14.727

首先，您应该检查值的类型。您可以通过调用`obj.GetType()`方法（直接在代码中或在即时窗口中）来完成。

如果是，`int`那么你可以这样做：

```
uint u = (uint) (int) obj; 
```

请注意，它与您的演员表不同，因为它**在**您尝试**转换**为时转换为`int`然后**转换**为. 不能被施放，这就是为什么你得到. 只能**转换**为. **转换**和**强制转换**运算符在代码中看起来相同令人困惑： .`uint`**`uint``int``uint``InvalidCastException``int`**`uint`****`u = (uint) x`********

 ******`Convert`您可以做的更简单的事情是从类中调用特定方法：

```
uint u = Convert.ToUInt32(x); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-08T14:20:59.743

问题是`int`存储为`object`. `Int`派生自对象但`uint`不派生自，`int`因此您不能将`int`存储`object`转换为`uint`. 首先，您必须将其转换为`int`然后再转换为，`uint`因为该转换是有效的。自己试试：

```
object o = 5;//this is constant that represents int, constant for uint would be 5u
uint i = (uint)o;//throws exception 
```

但这有效：

```
object o = 5;
int i = (int)o;
uint j = (uint)i; 
```

或者

```
object o = 5;
uint i = (uint)(int)o; //No matter how this looks awkward 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T14:14:35.977

该`Index`属性可能正在返回一个字符串或其他东西。您可以执行以下操作：

```
var num = Convert.ToUInt32(data[structure["MICROSECONDS"].Index]); 
```

`Convert.ToUInt32`重载了所有`uint`可以转换 a 的相关类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T14:19:00.063

如果 Index 是一个字符串，或者在转换为字符串时具有类似数字的表示，您可以尝试：

```
UInt32 microSecondsIndex;
if(Uint32.TryParse(data[structure["MICROSECONDS"].Index.ToString()],out microSecondsIndex))
{
   //Do Stuff
}
else
{
    //Do error handling
} 
```******

# c++ - MPI_ERR_TRUNCATE：广播

> ID：13290608
> 
> 赞同：5
> 
> 时间：2012-11-08T14:08:56.113
> 
> 标签：c++, mpi, broadcast, openmpi

我有一个`int`我打算从根 ( `rank==(FIELD=0)`) 广播。

```
int winner

if (rank == FIELD) {
    winner = something;
}

MPI_Barrier(MPI_COMM_WORLD);
MPI_Bcast(&winner, 1, MPI_INT, FIELD, MPI_COMM_WORLD);
MPI_Barrier(MPI_COMM_WORLD);
if (rank != FIELD) {
    cout << rank << " informed that winner is " << winner << endl;
} 
```

但看来我明白了

```
[JM:6892] *** An error occurred in MPI_Bcast
[JM:6892] *** on communicator MPI_COMM_WORLD
[JM:6892] *** MPI_ERR_TRUNCATE: message truncated
[JM:6892] *** MPI_ERRORS_ARE_FATAL: your MPI job will now abort 
```

发现我可以增加缓冲区大小`Bcast`

```
MPI_Bcast(&winner, NUMPROCS, MPI_INT, FIELD, MPI_COMM_WORLD); 
```

`NUMPROCS`正在运行的进程数在哪里。（实际上似乎我只需要它是2）。然后它运行，但给出了意外的输出......

```
1 informed that winner is 103
2 informed that winner is 103
3 informed that winner is 103
5 informed that winner is 103
4 informed that winner is 103 
```

当我`cout`，`winner`它应该是`-1`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T16:02:04.810

您的代码早期存在错误：

```
if (rank == FIELD) {
   // randomly place ball, then broadcast to players
   ballPos[0] = rand() % 128;
   ballPos[1] = rand() % 64;
   MPI_Bcast(ballPos, 2, MPI_INT, FIELD, MPI_COMM_WORLD);
} 
```

这是一个非常常见的错误。`MPI_Bcast`是一个集体操作，它必须被所有进程调用才能完成。在您的情况下发生的情况是，该广播不会被所有进程`MPI_COMM_WORLD`（但仅由根）调用，因此会干扰下一个广播操作，即循环内的广播操作。第二个广播操作实际上将第一个（两个`int`元素）发送的消息接收到一个缓冲区中`int`因此截断错误消息。在 Open MPI 中，每个广播在内部使用相同的消息标记值，因此不同的广播可能会相互干扰，而不是按顺序发布。这符合（旧）MPI 标准 - 在 MPI-2.2 中，一个人不能拥有多个未完成的集体操作（在 MPI-3.0 中，一个人可以拥有多个未完成*的非阻塞*集体操作）。您应该将代码重写为：

```
if (rank == FIELD) {
   // randomly place ball, then broadcast to players
   ballPos[0] = rand() % 128;
   ballPos[1] = rand() % 64;
}
MPI_Bcast(ballPos, 2, MPI_INT, FIELD, MPI_COMM_WORLD); 
```

# wordpress - 如何使 flexcroll 与 wordpress 帖子缩略图一起使用？

> ID：13290610
> 
> 赞同：0
> 
> 时间：2012-11-08T14:08:57.840
> 
> 标签：wordpress, scroll, thumbnails

我正在尝试制作一个 div 来调用帖子缩略图，以识别 flexcroll，但它不起作用。它适用于文本，但不是这样：

```
<div class="post">
<?php query_posts( 'p=77' );
while (have_posts()) : the_post();?>
<div id="contcell" class="flexcroll">
<div id="thumb" ><?php echo get_the_post_thumbnail($post->ID, 'full'); ?></div></div>
<?php endwhile; ?>
<?php wp_reset_query(); ?>
</div> 
```

这些是相关的CSS：

```
#contcell {width:1116px; height:300px; overflow:auto;}
.thumb {width:1116px; height:768px;} 
```

如果我禁用 flexcroll 类，浏览器默认滚动条将起作用。有任何想法吗？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:41:34.590

解决了。这不是在 flexcroll div 中加载什么内容的问题，而是清除其内容的浮动内容。在 flexcroll 用户指南示例中找到它：

```
<div id='mycustomscroll' class='flexcroll'>

<img src="mypicture.jpg" width="100" height="100" class="floated" />

<img src="mypicture.jpg" width="100" height="100" class="floated" />

<img src="mypicture.jpg" width="100" height="100" class="floated" />

<img src="mypicture.jpg" width="100" height="100" class="floated" />

<!-- we clear our floats using the following div, check out the CSS for it-->

<div class="clearfloat"></div>

</div> 
```

和CSS：

```
.clearfloat {
clear:both; height:0px;
line-height:0px; visibility: hidden;
} 
```

它都在代码下载文件夹中。不确定我是否可以将直接链接放在这里，但很容易找到它。希望它可以帮助某人。

# python - 我在 python /twisted 中收到“nonetype”不可迭代错误

> ID：13290616
> 
> 赞同：3
> 
> 时间：2012-11-08T14:08:59.097
> 
> 标签：python, twisted, twisted.web, twisted.application

我试图理解为什么当我尝试评估单元格的内容时会出现以下错误，某些函数要么没有返回，要么我不明白这些东西是如何工作的。

```
 2012-11-08 04:30:45-0800 [HTTPPageGetter,client] handling data: None
 2012-11-08 04:30:45-0800 [HTTPPageGetter,client] Unhandled Error
 Traceback (most recent call last):
 File "path/to/python/lib/python2.7/site-packages/twisted/internet/defer.py", line 1101, in gotResult
 _inlineCallbacks(r, g, deferred)
 File "path/to/python/lib/python2.7/site-packages/twisted/internet/defer.py", line 1048, in _inlineCallbacks
 deferred.callback(None)
 File "path/ib/python2.7/site-packages/twisted/internet/defer.py", line 368, in callback
 self._startRunCallbacks(result)
 File "path/lib/python2.7/site-packages/twisted/internet/defer.py", line 464, in _startRunCallbacks
 self._runCallbacks()
 --- <exception caught here> ---
 File "path/lib/python2.7/site-packages/twisted/internet/defer.py", line 551, in _runCallbacks
 current.result = callback(current.result, *args, **kw)
 File "/path/to/lib/python2.7/site-packages/codenode/frontend/async/backend.py", line 223, in _success
 if 'cellstyle' in data and data['cellstyle'] == 'outputimage':
 exceptions.TypeError: argument of type 'NoneType' is not iterable

 2012-11-08 04:30:45-0800 [HTTPPageGetter,client] Stopping factory 
```

这是代码的相关部分（我认为）： addcallback 中有一个可疑部分（三个参数都不是数据）但在 _success 中（三个除了 self 一个是数据），如果这是问题何时我传递数据？

```
def render(self, request):
    """
    This is where we un-serialize the content sent between the frontend
    and backend engine bus.
    """
    content = request.content.read()
    if content:
        msg = json.loads(content)
        log.msg('Engine message deserialized %s' % str(msg))
    else:
        return
    cellid = msg.get('cellid', '')
    d = self.engine_bus.handleRequest(self.notebook_id, msg)
    d.addCallback(self._success, request, cellid)
    d.addErrback(self._fail, request)
    return server.NOT_DONE_YET

def _success(self, data, request, cellid):
    """
    horrible. not always eval...
    """
    log.msg('handling data: %s' % str(data))
    if 'cellstyle' in data and data['cellstyle'] == 'outputimage':
        image_data = pickle.loads(data['out']).getvalue()
        image_file_name = write_image(image_data)
        data['out'] = image_file_name

    data['cellid'] = cellid
    jsobj = json.dumps(data)
    request.write(jsobj)
    request.finish() 
```

诚然，这不是自己的作品，我对它知之甚少，而且它已经过时了。这是更多代码： [github python文件](https://github.com/codenode/codenode/blob/master/codenode/frontend/async/backend.py)

[编辑] 这里还有一点：初始化：

```
class EngineSessionAdapter(resource.Resource):
    """
    There should be a better way to do this, have to figure that out.
    """

    isLeaf = True

    def __init__(self, engine_bus, notebook_id):
        resource.Resource.__init__(self)
        self.engine_bus = engine_bus
        self.notebook_id = notebook_id
        self.putChild("", self) 
```

这是引擎对象：

```
class EngineBusAdapter(resource.Resource):

    def __init__(self, engine_bus):
        resource.Resource.__init__(self)
        self.engine_bus = engine_bus
        self.putChild("", self)

    def getChild(self, path, request):
        """XXX Can this refer back to itself?
        """
        return EngineSessionAdapter(self.engine_bus, path) 
```

* * *

[第 2 次编辑] 这是 Enginebus 定义：

```
class EngineBus(object):
"""
Common entry point for all engine requests. 
Look up engine client by access_id.

This is responsible for routing the engine message
from the browser/frontend to the engine by access_id.
This does not need to process the message (un-serialize, inspect, 
or otherwise).
"""

def __init__(self, backend):
    self.backend = backend

@defer.inlineCallbacks
def handleRequest(self, access_id, msg):
    """
    msg comes in as dictionary
    """
    log.msg('handling engine request for %s' % access_id)
    try:
        engine_client = yield self.backend.getEngine(access_id)
        log.msg('got engine Client %s' % str(engine_client))
    except InvalidAccessId:
        err = {'status':'ERR', 'response':'InvalidAccessId'}
        log.err('InvalidAccessId %s' % access_id)
        defer.returnValue(err)

    result = yield engine_client.send(msg)
    sucs = {'status':'OK', 'response':result}
    defer.returnValue(sucs) 
```

编辑：终于解决了：这里是差异：

```
-        result = yield meth(engine_arg, cellid)
+        result = yield defer.maybeDeferred(meth,engine_arg, cellid)
         defer.returnValue(result)

-    @defer.inlineCallbacks
     def engine_start(self, args, arg):
         """dummy
         """
-        defer.returnValue({'result':'started'})
+        return {'result':'started'} 
```

这里是上下文：[github上后端/engine.py的提交差异](https://github.com/thebookworm101/codenode/commit/56f095dbcb6bc93e848c124c3099ca006f2f7f3a)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T14:19:46.233

鉴于此源代码行：

```
if 'cellstyle' in data and data['cellstyle'] == 'outputimage': 
```

你得到的例外：

```
exceptions.TypeError: argument of type 'NoneType' is not iterable 
```

几乎可以肯定的意思`data`是`None`。由于`data`是你附加到 a 的回调的结果参数（即第一个参数）`Deferred`，这意味着`Deferred`它`None`的结果是 。

由于`Deferred`这个回调附加到是这样创建的：

```
d = self.engine_bus.handleRequest(self.notebook_id, msg) 
```

似乎这`engine_bus.handleRequest`给了你一个`Deferred`与`None`. 也许这是`engine_bus`对象中的一个错误，或者您滥用了该 API？我不确定是什么`engine_bus`，所以我无法进一步挖掘。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T14:18:03.123

> ```
> if 'cellstyle' in data and data['cellstyle'] == 'outputimage':
> exceptions.TypeError: argument of type 'NoneType' is not iterable 
> ```

`'cellstyle' in data`需要`data`是可迭代的 - 它不是可迭代的，但是`None`

# datatable - DataTable：隐藏 Show Entries 下拉列表，但保留 Search 框

> ID：13290626
> 
> 赞同：154
> 
> 时间：2012-11-08T14:10:08.857
> 
> 标签：datatable, dt

是否可以隐藏“显示条目”下拉列表但将“搜索”框保留在 DataTable 中？我希望始终在底部显示 10 行分页以及搜索框，但不想显示显示条目下拉列表。

* * *

## 回答 #1

> 赞同：330
> 
> 时间：2013-03-08T02:06:54.877

您可以直接在此链接上找到更多信息：http: [//datatables.net/examples/basic_init/filter_only.html](http://datatables.net/examples/basic_init/filter_only.html)

```
$(document).ready(function() {
$('#example').dataTable({
    "bPaginate": false,
    "bLengthChange": false,
    "bFilter": true,
    "bInfo": false,
    "bAutoWidth": false });
}); 
```

希望有帮助！

编辑：如果你是懒惰的，“bLengthChange”：假，是你需要改变的：）

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2016-10-28T18:40:02.077

如果使用 Datatable > 1.1.0，那么`lengthChange`您需要的选项如下：

```
$('#example').dataTable( {
  "lengthChange": false
}); 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2017-06-27T11:06:28.653

```
"searching": false,   // Search Box will Be Disabled

"ordering": false,    // Ordering (Sorting on Each Column)will Be Disabled

"info": true,         // Will show "1 to n of n entries" Text at bottom

"lengthChange": false // Will Disabled Record number per page 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2015-02-10T14:48:37.780

这是这篇文章的**关键**答案`"bLengthChange": false,`将隐藏条目下拉菜单

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-10-04T16:54:40.060

我就是这样解决的。使用引导程序 4

```
 $(document).ready(function () {
        $('#table').DataTable({
            "searching": false,
            "paging": false,
            "info": false
        });
    }); 
```

cdn js：

*   [https://code.jquery.com/jquery-3.3.1.min.js](https://code.jquery.com/jquery-3.3.1.min.js)
*   [https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js](https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js)
*   [https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js](https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js)
*   [https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js](https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js)

cdn css：

*   [https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css](https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css)
*   [https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css](https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css)

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-05-19T00:43:29.367

对于 DataTables <=1.9，[@perpo](https://stackoverflow.com/a/15285488/1771644)的回答

```
$('#example').dataTable({
    "bLengthChange": false
}); 
```

工作正常，但对于 1.10+ 试试这个：

```
$('#example').dataTable({
    "dom": 'ftipr'
}); 
```

我们省略了`l`“长度更改输入控件”

[1.9 文档](http://legacy.datatables.net/usage/features)

[1.10 文档](https://datatables.net/reference/option/dom)

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2019-04-22T07:08:57.463

写吧 ：

```
 $(document).ready( function () {
        $('#example').dataTable( {
          "lengthChange": false
        } );
    } ); 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2013-01-09T16:53:18.517

sDom：“Tfrtip”或通过回调：

```
"fnHeaderCallback": function(){
    $('#YOURTABLENAME-table_length').hide();
} 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-07-07T10:39:31.460

要禁用“显示条目”标签，请添加代码 dom: 'Bfrtip' 或者您可以添加 "bInfo": false

```
$('#example').DataTable({
    dom: 'Bfrtip'
}) 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-02-09T08:59:12.160

你也可以试试这个。

只需通过使用将其从 CSS 中隐藏，

```
 .dataTables_length {
        display: none;
    } 
```

两者都会起作用。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-02-03T23:19:48.590

添加此选项：

```
"bInfo": false 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-03-03T16:15:44.063

隐藏“显示条目”但仍有分页。我使用了下面的代码并且它有效。

```
"bPaginate": true,
"bLengthChange": false,
"bFilter": true,
"bInfo": false,
"bAutoWidth": false 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-11-25T15:24:35.093

要禁用“显示条目”标签，请使用“bInfo”，例如：“bFilter”是搜索组件，但默认情况下处于活动状态。

```
$(document).ready( function () {
  $('#example').dataTable( {
    "bInfo": false
  } );
} ); 
```

启用或禁用表格信息显示。这会显示有关页面上当前可见数据的信息，包括有关过滤数据的信息（如果正在执行该操作）。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-02-25T12:01:01.560

如果你使用 Angular，你可以使用下面的代码来做同样的事情。

在 component.html 中

```
<table id="" datatable [dtOptions]="dtOptions" class="table dataTable"> 
```

并在您的 component.ts

```
 dtOptions: any = {}

 this.dtOptions = {
  searching: true,    //enables the search bar
  info: false        //disables the entry information
} 
```

有更多可用的数据表选项，请访问[此处](https://datatables.net/reference/option/)了解更多信息

# php - 从 .net Web 服务返回的字节数组创建 pdf 文件

> ID：13290631
> 
> 赞同：0
> 
> 时间：2012-11-08T14:10:26.843
> 
> 标签：php, .net, web-services, pdf

嗨，我是具有 php 基本知识的 ac# 程序员。目前正在处理需要下载 pdf 的 php 任务。我尝试通过网络服务下载，但它不起作用。能够获得相关 PDF 的字节数组。是否可以将其转换为PDF文件。请帮忙谢谢。

我的PHP代码：

```
 <?php
    require_once("nuSOAP/lib/nusoap.php");
    $client = new nusoap_client('http://localhost/WS-PDF/Fill_Pdf.asmx?wsdl',true);
    $soapaction = "http://tempuri.org/GetPdf";
    $namespace= "http://tempuri.org/";
    $client->soap_defencoding = 'UTF-8';
    $params = array('test' => "PDF");
    $result = $client->call('GetPdf',$params,$namespace,$soapaction);
    print_r(array_values($result));
    $err = $client->getError();
    if ($err) {
        exit();
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:04:09.727

如果您将字节分配给变量，然后告诉浏览器输出 pdf，您应该将 pdf 取回。在下面的示例中，我使用变量 $pdf。

```
header("Content-type: application/pdf");
header("Content-Length: $length");
header("Content-Disposition: inline; filename='$filename'");
echo $pdf; 
```

# objective-c - NSInternalInconsistencyException

> ID：13290632
> 
> 赞同：2
> 
> 时间：2012-11-08T14:10:29.087
> 
> 标签：objective-c, ios5

我正在尝试从数组中删除最后两个值。所以，我曾经做下面的代码 -

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{

    NSString *resMsg = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
    NSData *responseData = [resMsg dataUsingEncoding:NSUTF8StringEncoding];

    NSError *error = nil;

    if (responseData != nil) 
    {

        array = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&error];

        if([array count] == 2) {

        }else
        {
             int k = [self.array count] -2 ;
             int l = [self.array count] -1 ;

             [self.array removeObjectAtIndex:l];
             [self.array removeObjectAtIndex:k];

             [gridTable reloadData];
             [tblProducts reloadData];
         }

    }

} 
```

但是，它给出了以下例外 -

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[__NSCFArray removeObjectAtIndex:]: mutating method sent to immutable object”

我不知道为什么会这样？我也已经在另一个 viewController 类中使用过这个方法。它在那里工作得很好。但是，这里是例外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:14:14.273

从返回的对象`[NSJSONSerialization JSONObjectWithData:responseData options:0 error:&error];`将返回一个 autoreleased `NSArray`。如果你想让它可变，你必须打电话`NSMutableArray *mutableArray = [array mutableCopy];`

您在这里的另一个选择是代替为您的`options:`参数输入 0 ， put `NSJSONReadingMutableContainers`。这将在不创建额外对象的情况下解决您的问题。

**编辑**

为了解决您的新问题：

```
NSMutableArray *newData = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&error];
//Here, modify the new array.  Remove your last two items. Then..
[newData addObjectsFromArray:array];
array = newData; 
```

附带说明一下，这可能会导致您的数组对象的顺序与您预期的不同。你可以选择称它为...

```
NSSortDescriptor *sort = [NSSortDescriptor sortDescriptorWithKey:@"key" ascending:YES];
array = [newData sortedArrayUsingDescriptors:[NSArray arrayWithObject:sort]]; 
```

# c++ - 比较代码算法/片段的最正确（最佳）方法是什么？

> ID：13290638
> 
> 赞同：2
> 
> 时间：2012-11-08T14:10:48.833
> 
> 标签：c++, algorithm, time

我编写了一个 C++ 代码来计算太阳辐射的反射（基于光线追踪原理）。我已经包含了一些加速技术。在我的文章中，我必须证明这些算法的合理性。我打算纯粹从时间基础上做，但@weberc2 [HERE](https://stackoverflow.com/questions/1861294/how-to-calculate-execution-time-of-a-code-snippet-in-c)的评论让人相信这不是最好的解决方案。

我看过代码分析软件，比如 [非常困](http://www.codersnotes.com/sleepy/)和[AMD 代码分析师](http://developer.amd.com/tools/heterogeneous-computing/amd-codeanalyst-performance-analyzer/)，它有助于识别瓶颈等。

由于主管的编程知识可能很差，因此基于*时间*的分析似乎是最合乎逻辑的......

例如“运行相同的场景，`Grid`主动提高了 20% 的计算精度，而时间只有 2 秒的惩罚......”

它是一个单线程程序。使用时间真的有那么危险吗？有什么建议么。谢谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:21:23.693

我不同意。比较时间非常好 - 但有一个限制。

单次运行说明不了什么。这就是为什么我们有**[统计工具](http://en.wikipedia.org/wiki/Statistical_hypothesis_testing)**和测试来展示`A is distinct then B`。

在几个测试用例和各种条件下运行一系列测试。将数据（运行时间）存储在两个不同的列表中，然后**运行统计测试以显示一个优于另一个**。

统计检验的“答案”是[P-Value](http://en.wikipedia.org/wiki/P-value)。P值表示“你错的概率是多少”。例如，如果您有一组测试，并且您运行统计测试并找到`P_Value = 0.01`. 这意味着有 99% 的概率 - 这两个样本是不同的，您可以得出结论，平均值较低的样本更好。

统计测试的事实标准（至少在我的领域）是**[Wilcoxon Paired Signed Test](http://en.wikipedia.org/wiki/Wilcoxon_signed-rank_test)**。

* * *

PS 统计测试将“证明”其测试条件的假设，例如 - 如果您在 AMD CPU 上运行它，它不会说明 Intel CPU 上会发生什么（也许指令集会使“更糟”显着更好）。

但是，请注意，尽管如此，它在人工智能和信息检索等领域的文章中是非常可接受和广泛使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:37:20.097

“新版本的运行时间是旧版本的 50%，p=0.99”对主管来说是否意味着什么，取决于主管对算法对业务的重要性的了解。在许多情况下，对一个函数的测量进行统计分析对于致力于改进它的程序员来说是一个非常有用的工具，但对管理却毫无意义。

据推测，这段代码正在被优化，因为对业务很重要的东西将通过使其更快得到改进。通常，这就是在向主管报告结果时应该讨论的内容：“由于这种变化，事务 X 的典型案例将在平均 6 秒而不是 10 秒内完成”，“使用这个版本，我们可以运行两次我们的在一个工作日内完成工程模拟，而不是一个工作日”。

如果您考虑主管关心的业务目标，那么在优化期间要完成的特定类型的时间测量（挂钟或总 CPU 或用户 CPU 或内存占用）通常是显而易见的。

# css - 使子 div 用设置宽度的兄弟填充剩余空间

> ID：13290642
> 
> 赞同：0
> 
> 时间：2012-11-08T14:11:11.163
> 
> 标签：css, html, css-float, position

这是代码。

```
<div style="overflow:hidden; width:800px;">
  <div style="float:left; width:500px;">
    first text
  </div>
  <div style="float:left; width:300px;">
    second text
  </div>
</div> 
```

如您所见，我使用`width:300px;`第二个 div 占据了剩余的正确空间。让它占据整个正确空间的另一种选择是什么？设置`width:100%;`没有帮助，因为它跳下。我问的原因是每次我都要数 800-500=300 (px)。一旦 500px 更改为 550px，我必须更改`300px`为`250px`. 我相信有更好的方法来设置宽度。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:23:11.167

我想这个标记会更好[http://jsbin.com/apubay/1/edit](http://jsbin.com/apubay/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:05:32.363

这个问题的一般解决方案是

1.  浮动第一个元素并给它一个固定的宽度。
2.  将第二个元素显示为一个块，并给它一个左边距等于第一个元素的宽度。

这是您的代码，经过修改以包含此模式：

```
<div style="overflow: hidden;">
  <div style="float: left; width: 500px;">
    first text
  </div>
  <div style="display: block; margin-left: 500px;">
    second text
  </div>
</div> 
```

我从容器中删除了 800px 宽度。您可以将其添加回来，但这违背了此解决方案的目的。如果您要设置 800 像素的固定宽度，那么右侧的内容将始终为 300 像素。这里它在 JS Bin 上运行：

[JS Bin 例子](http://jsbin.com/atakuz/1/edit)

虽然这确实实现了使正确的元素占用剩余空间的效果（您会注意到它通过调整浏览器宽度来工作），但您仍然需要在两个位置更改宽度以使它们保持同步：（1）浮动的宽度，以及 (2) 块的左边距。但是，这比您的解决方案要容易一些，因为不涉及减法；您在两个地方使用相同的值。（这也意味着它适用于任何单位：`em`、、、`px`。`%`）

附带说明一下，我始终建议不要使用`overflow: hidden`for 包含浮点数，因为几个月后您可能会得到剪辑效果并且不记得这是因为您`overflow: hidden`在这里使用过。请参阅[哪种“clearfix”方法最好？](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best/9932508#9932508)

# android - 如何处理 keydown 事件？

> ID：13290643
> 
> 赞同：0
> 
> 时间：2012-11-08T14:11:18.510
> 
> 标签：android, sencha-touch-2, keydown

我正在 Android 设备上开发 Sencha Touch 2 应用程序。我的安卓设备不是普通的手机，所以它也有硬件键。我可以对 sencha touch 中的 keydown、keyup 或 keypress 事件做出反应吗？如何？其中一个就足够了。

如果有帮助：在普通 JavaScript 中，键可以由 onkeydown 监听器处理，并且 keyCode 为 0。

[更新] 我[为 sencha touch 编写本教程](http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-1/)。我已经完成了所有步骤，并且效果很好。现在我想抓住硬件钥匙，我上面描述的。[我在Handle Android Hardware...](http://thanksmister.com/2012/07/06/handle-android-hardware-back-button-using-phonegap-and-sencha-touch-2/)中放置了一个 addEventListener 。

所以我的代码看起来像：

```
Ext.application({
    name: "NotesApp",
    models: ["Note"],
    stores: ["Notes"],
    controllers: ["Notes"],
    views: ["NotesList", "NotesListContainer", "NoteEditor"],
    launch: function () {           
        var notesListContainer = {
                xtype: "noteslistcontainer"
        };
        var noteEditor = {
                xtype: "noteeditor"
            };
        Ext.Viewport.add(notesListContainer, noteEditor);

        document.addEventListener("keydown", Ext.bind(onKeyDown, this), false); 

        function onKeyDown(e) {     
           // you are at the home screen
           if (Ext.Viewport.getActiveItem().xtype == notesListContainer.xtype ) {
              alert('aha'); // give out 'aha'
                  //  LABEL1

           } else {}

        }
    }

}); 
```

如何调用位置 LABEL1 上的函数。我要调用的函数在类 controllers.Notes 中，它的名称是 onNewScanCommand：

```
Ext.define("NotesApp.controller.Notes", {

extend: "Ext.app.Controller",
config: {
    refs: {
        // We're going to lookup our views by xtype.
        notesListContainer: "noteslistcontainer",
        noteEditor: {
            selector: 'noteeditor',
            xtype: 'noteeditor',
            autoCreate: true 
       }
    },
    control: {
        notesListContainer: {
            // The commands fired by the notes list container.
            newNoteCommand: "onNewNoteCommand",
            editNoteCommand: "onEditNoteCommand",
            newScanCommand: "onNewScanCommand"
        }
    }
},
onNewScanCommand: function () {
    console.log("onNewScanCommand");

    var now = new Date();
    var noteId = (now.getTime()).toString() + (this.getRandomInt(0, 100)).toString();

    var newNote = Ext.create("NotesApp.model.Note", {
        id: noteId,
        dateCreated: now,
        title: "",
        narrative: ""
    });

    // here I call a function in PhnoeGap, then this call a nativ function
    scan("echome", function(echoValue) {
        newNote.set("title", echoValue.scanNummer);
        newNote.set("narrative", echoValue.scanType);
    });

    var notesStore = Ext.getStore("Notes");
    /*
    if (null == notesStore.findRecord('id', newNote.data.id)) {
        notesStore.add(newNote);
    }*/
    notesStore.add(newNote);

    notesStore.sync();

    notesStore.sort([{ property: 'dateCreated', direction: 'DESC'}]);

    //this.activateNotesList();
},
// Base Class functions.
launch: function () {
    this.callParent(arguments);
    Ext.getStore("Notes").load();
    console.log("launch");
},
init: function () {
    this.callParent(arguments);
    console.log("init");
} 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:57:05.357

在活动上试试这个

// 按下键

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
// TODO Auto-generated method stub
     if (i == KeyEvent.KEYCODE_BACK) {
          //back button key down
     }
return super.onKeyDown(keyCode, event);
} 
```

// 向上键

```
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
// TODO Auto-generated method stub
      if (i == KeyEvent.KEYCODE_BACK) {
          //back button key up
      }
return super.onKeyUp(keyCode, event);
} 
```

你可以看到所有关键事件 -> [这里](http://developer.android.com/reference/android/view/KeyEvent.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:44:34.727

我有解决办法！我的控制器正在监视事件。事件在视图*NotesListContainer*中触发。

我向我的变量 notesListContainer 添加了一个 id，因此我可以获得 NotesListContainer 的对象*并*触发 myevent *newScanCommand*

```
Ext.application({
        name: "NotesApp",
        models: ["Note"],
        stores: ["Notes"],
        controllers: ["Notes"],
        views: ["NotesList", "NotesListContainer", "NoteEditor"],
        launch: function () {

            var notesListContainer = {
                id: 'nlistcontainer',
                xtype: "noteslistcontainer"
            };
             var noteEditor = {
                xtype: "noteeditor"
            };
            Ext.Viewport.add(notesListContainer, noteEditor);

            document.addEventListener("keydown", Ext.bind(onBackKeyDown, this ), false); 

            function onBackKeyDown(e) {

                // you are at the home screen
                if (Ext.Viewport.getActiveItem().xtype == notesListContainer.xtype ) {

                    //the solution
                    Ext.getCmp('nlistcontainer').fireEvent("newScanCommand", this);

                } else {
                    this.getApplication().getHistory().add(Ext.create('Ext.app.Action', {
                        url: 'noteslistcontainer'
                    }));
                }

            }
        }

    }); 
```

所以，这是我的救援：`Ext.getCmp('nlistcontainer')` ;-) 也许，它提供了一个更好的解决方案。

# php - 如何使用php删除重复的字母

> ID：13290649
> 
> 赞同：1
> 
> 时间：2012-11-08T14:11:31.503
> 
> 标签：php

我想删除重复的字母（“tteeeessst stttringgg”=>“测试字符串”）。
php可以做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T14:14:29.033

尝试

```
$str = 'tteeeessst stttringgg';
echo preg_replace('{(.)\1+}','$1',$str); 
```

[演示](http://codepad.org/x0A7uBWM)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:14:21.030

我假设你想删除重复的字母......这将删除像“字母”这样的单词，所以要小心......

```
$str = 'aabbccaaaaaddee';
echo preg_replace('{(.)\1+}','$1',$str);
//abcade 
```

来自[http://randomdrake.com/2008/04/10/php-and-regex-replacing-repeating-characters-with-single-characters-in-a-string/](http://randomdrake.com/2008/04/10/php-and-regex-replacing-repeating-characters-with-single-characters-in-a-string/)

# android - Androids sdk 软键盘精度

> ID：13290654
> 
> 赞同：3
> 
> 时间：2012-11-08T14:11:52.717
> 
> 标签：android, android-softkeyboard

我刚刚在 Eclipse 中导入了 sdk 软键盘（来自 API 版本 16 的示例代码，但也尝试了早期版本）并将其安装在我的设备上（Galaxy Note 10.1、Galaxy S2 和 Galaxy Nexus）。经过一些测试，我注意到一个奇怪的行为：当我按下最顶部的一个键时，键盘会向我显示我真正按下的字母上方的字母的建议。对于我目前的研究，我需要实现一个软键盘并添加一些功能。但是对于这些功能，我需要一个准确的键盘。

您能否确认该行为并给我任何解决方法的建议？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T08:43:18.087

经过数小时的搜索，我终于找到了解决问题的方法。

android 示例键盘使用`KeyboardViewStyle`继承自`KeyboardView` 在 android 源中我找到了定义`Widget.KeyboardView`

```
<style name="Widget.KeyboardView" parent="android:Widget">
    <item name="android:background">@android:drawable/keyboard_background</item>
    <item name="android:keyBackground">@android:drawable/btn_keyboard_key</item>
    <item name="android:keyTextSize">22sp</item>
    <item name="android:keyTextColor">#FFFFFFFF</item>
    <item name="android:keyPreviewLayout">@android:layout/keyboard_key_preview</item>
    <item name="android:keyPreviewOffset">-12dip</item>
    <item name="android:keyPreviewHeight">80dip</item>
    <item name="android:labelTextSize">14sp</item>
    <item name="android:popupLayout">@android:layout/keyboard_popup_keyboard</item>
    <item name="android:verticalCorrection">-10dip</item>
    <item name="android:shadowColor">#BB000000</item>
    <item name="android:shadowRadius">2.75</item>
</style> 
```

在那里我注意到以下行：

```
<item name="android:verticalCorrection">-10dip</item> 
```

为了解决我的问题，我定义了自己的风格，它继承`Widget.KeyboardView`并覆盖`android:verticalCorrection`了以下方式：

```
<style name="Widget.MyKeyboardView" parent="android:Widget.KeyboardView">
    <item name="android:verticalCorrection">0dip</item>
</style> 
```

最后，我将样式应用于我的键盘。

**等等瞧 :)**

# asp.net-mvc - 在剃刀中解析不同的 IEnumerable 有什么区别吗？

> ID：13290656
> 
> 赞同：1
> 
> 时间：2012-11-08T14:12:06.650
> 
> 标签：asp.net-mvc, razor

当我将（仅用于显示值）传递给视图包时，数组或列表。

使用剃刀引擎浏览 foreach 中的元素时，它是否会改变某些东西（速度或内存）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:06:26.023

在大多数情况下，选择 array[] 而不是 List 对性能的影响可以忽略不计。

当然，array[] 不那么抽象，并且在 CLR 中“按原样”使用，但是失去 List 对象的所有功能的麻烦通常不值得最小的性能提升。

你可以在这里阅读更多：[https ://stackoverflow.com/a/5777746/971693](https://stackoverflow.com/a/5777746/971693)

# .net - .NET 如何为 app.config 生成架构？

> ID：13290657
> 
> 赞同：2
> 
> 时间：2012-11-08T14:12:13.483
> 
> 标签：.net, configuration, app-config, configurationmanager

使用[代码/注释](http://www.codeproject.com/Articles/16466/Unraveling-the-Mysteries-of-NET-2-0-Configuration)配置，我可以为我的 app.config 结构定义一个丰富的类型化模型。有没有办法（或工具或特殊咒语）从这个基于代码的模型生成相应的 XSD？[`ConfigurationManager`](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx)

拥有 XSD 架构让编辑配置文件变得*非常棒！*（从没想过我会这么说:)

![在此处输入图像描述](../Images/029e29fe52bed3cd733e337e7b339434.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:31:42.343

到目前为止，我发现了漂亮的[Configuration Section Designer](http://csd.codeplex.com/) VS 插件，它除了代码之外还生成 XSD！
但这是一个仅限设计师的解决方案，缺乏一点灵活性（另外，恐怕基于设计师的解决方案更难扩展）。

## 稍后编辑

我最终给了[配置部分设计师](http://csd.codeplex.com/)一个更重要的机会，我很喜欢它！事实证明，它对我的​​目的非常灵活。这是我的配置定义的一部分：

![在此处输入图像描述](../Images/8603db92b9b1dedb14fcaf5d7ad5c9e3.png)

优点：

*   便于使用
*   为配置文件生成 XSD
*   生成一个（基本的）app.config 文件
*   灵活，支持许多由 ConfigurationManager 公开的自定义。以下是我使用的一些：
    *   枚举支持（一直滴到生成的 XSD，因此在填写属性值时可以获得 IntelliSense
    *   部分的“默认集合”，因此您可以支持`<section><item/><item/><section>`而不是`<section><items><item/><item/></items><section>`
    *   开箱即用的“System.Type”类型支持属性（和相关的转换器）
    *   生成强类型元素集合的选项（实现 ICollection）
    *   输入验证器，包括自定义（roll-your-own）
    *   用于加载/存储具有任何类型属性的元素的类型转换器，包括 Roll-your-own
    *   配置元素继承

我敢肯定还有其他事情我忘记了。

一些缺点：

*   文档并不详尽（尽管它确实向您发送了正确的方向）
*   有时出现的错误不是很明显（类似于“CodeDom 中的某些东西'splat'”），但到目前为止，它一直是我的模型中的一个问题（例如，我忘记分配属性）。

但这些都是小麻烦。

总的来说，我快速轻松地完成了工作。竖起大拇指！

# android - android上的flash视频流

> ID：13290659
> 
> 赞同：0
> 
> 时间：2012-11-08T14:12:20.283
> 
> 标签：android, flash

我想在 Android 上播放 Flash 视频流。有没有办法实现这一点，因为从版本 4 开始，Android 不再支持 Flash。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T08:33:18.627

尝试[vGet](https://play.google.com/store/apps/details?id=mb.videoget&hl=en)。它允许在许多网站上播放 Flash 视频。

# objective-c - 缩放图像小于 UIImageView

> ID：13290660
> 
> 赞同：0
> 
> 时间：2012-11-08T14:12:25.447
> 
> 标签：objective-c, ios, uiscrollview, uiimageview, uiscrollviewdelegate

我想要一个比图像更大的框架，所以我做了这样的事情： ![在此处输入图像描述](../Images/1aa25da9af1a403abf56e4b1188ce459.png)

当然，我有`UIScrollViewDelegate`并且我处理缩放。但是有一个问题。当我缩放图片时，我可以在缩放模式下滚动到这个“蓝色”空白区域。

缩放后，当我的缩放图片宽度大于滚动视图宽度时，我希望用户不能滚动到这个空白空间。我怎样才能做到这一点？

(1) 缩放比例 1.0：

![在此处输入图像描述](../Images/6fc0ca3f0ef223502d32d26156146bd1.png)

(2) 缩放后移到边缘：

![在此处输入图像描述](../Images/fd97123384a4bb3279fcce164e012db0.png)

(3) 我希望它是什么：

![在此处输入图像描述](../Images/5f29d5b7d64da2142944bef6cdb50877.png)

**编辑：** 设置 contentInset 后：

```
[self.scView setContentInset:UIEdgeInsetsMake(0, -30, 0, -(self.frame.size.width-csc.width/2))]; 
```

为什么它向左移动？

![在此处输入图像描述](../Images/ed822d30ae45715dbdeb516903c3be97.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:25:54.803

可能有一种更简单的方法，但一种可行的方法是对滚动视图使用负 contentInset (UIEdgeInsets)。

# javascript - 选择一个选项将强制选择另一个选项

> ID：13290662
> 
> 赞同：0
> 
> 时间：2012-11-08T14:12:41.143
> 
> 标签：javascript, selection, option

例如，如果您选择带有`id="chocolate-yes"`或`id="vanilla-yes"`的选项，带有 的选项`id="icecreamcone-yes"`也将被选中。

如下图所示，当您选择带有 的选项时`id="chocolate-yes"`，`<select id="icecreamcone">`将被禁用。

当两者`id="chocolate-yes"`都`id="vanilla-yes"`没有被选中时，选项 with`id="icecreamcone-no"`将不会被禁用。

> 用更简单的话来说：如果你想添加香草或巧克力冰淇淋，你总是需要一个冰淇淋蛋筒，除了洒水:)

任何人都知道可以做到这一点的Javascript？

***注1：带有的选项`id="sprinkles-yes"`不生效`id="icecreamcone-yes"`。
注 2：在选择或`id="icecreamcone-yes"`之前仍然需要选择。 注意 3：id 名称不能更改，也不能为元素添加更多属性。 注意 4：不能使用 jQuery。`id="vanilla-yes"``id="chocolate-yes"`*** 

```
<ul id="icecream" style="list-style:none;line-height:30px;">
  <li>
    <select id="icecreamcone">
      <option value="addicecreamcone">Would you like an ice cream cone?</option>
      <option id="icecreamcone-yes" value="yes">Yes</option>
      <option id="icecreamcone-no" value="no">No thanks</option>
    </select>
  </li>
  <li>
    <select id="vanilla">
      <option value="addvanilla">Would you like to add vanilla ice cream?</option>
      <option id="vanilla-yes" value="yes">Yes</option>
      <option id="vanilla-no" value="no">No thanks</option>
    </select>
  </li>
  <li>
    <select id="chocolate">
      <option value="addchocolate">Would you like to add chocolate ice cream?</option>
      <option id="chocolate-yes" value="yes">Yes</option>
      <option id="chocolate-no" value="no">No thanks</option>
    </select>
  </li>
  <li>
    <select id="sprinkles">
      <option value="addsprinkles">Would you like to add sprinkles on top?</option>
      <option id="sprinkles-yes" value="yes">Yes</option>
      <option id="sprinkles-no" value="no">No thanks</option>
    </select>
  </li>
</ul> 
```

![](../Images/9109ef602f961b68e5fa9c31eaeca0f8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:20:59.540

*使用 jQuery*

```
$('#icecreamcone').change(function() {
alert("There has been a change");
//Use Javascript to disable.
}); 
```

将 #icecreamcone 替换为您要监视其更改事件的元素的选择 ID。

唯一需要注意的是禁用的表单元素不会提交，因此将值存储在隐藏的输入标签中以提交它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:45:34.837

好的，这样的事情可能会帮助你：

```
​$( "select" )​.change(function() {
    if ( $( "#vanilla" ).val() == "yes" || $( "#chocolate" ).val() == "yes" )
        $( "#icecreamcone" ).val( "yes" );
    else
        $( "#icecreamcone" ).val( "addicecreamcone" );
});​ 
```

[你可以在这里](http://jsfiddle.net/zWRUA/)试试

# redis - redis中的有序集：分数平局时的随机输出

> ID：13290665
> 
> 赞同：1
> 
> 时间：2012-11-08T14:12:48.597
> 
> 标签：redis, sortedset

我在 Redis 中有一个有序集（我实际上使用的是 python 客户端[https://github.com/andymccurdy/redis-py](https://github.com/andymccurdy/redis-py)），例如：

```
zadd myset 1 key1
zadd myset 1 key2
zadd myset 1 key3
zadd myset 0 key4 
```

请注意，3 个键具有相同的分数。

使用 ZRANGE，我想获得前 2 个条目（即最低分数）。“key4”将始终是第一个结果，因为它具有较低的值，但我希望在关系之间随机选择第二个返回值：key1、key2、key3。ZRANGE 实际上按照它们被索引的顺序返回键：“keys1”总是我的第二个结果：

```
zrange myset 0 -1 WITHSCORES
1) "key4"
2) "0"
3) "key1"
4) "1"
5) "key2"
6) "1"
7) "key3"
8) "1" 
```

任何想法？谢谢，J。

[应 Linus G Thiel](https://stackoverflow.com/users/295262/linus-g-thiel)的请求，以下是有关我的用例的更多详细信息：

我想使用 zsets 来执行一个简单的排名系统。我有一个项目列表，每个项目都有一个代表项目相关性的分数。对于我的系统的冷启动，大多数分数都是相同的（即0），我想在分数相同的项目中随机选择。否则，我将始终返回完全相同的字典顺序，这将在系统中引入偏差。

您提出的解决方案，为每个重复的分值使用一个特定的集合将起作用。我会试一试。

谢谢，

# java - Android - 检测流结束而不是 MediaPlayer 中的连接错误

> ID：13290669
> 
> 赞同：2
> 
> 时间：2012-11-08T14:12:56.290
> 
> 标签：java, android, android-mediaplayer

在收听 1 小时的 mp3 流时，如果用户失去连接（或从 WIFI 切换到 3G 并且连接“掉线”一秒钟），我们注意到 MediaPlayer 会继续播放它缓冲的内容。一旦它用完缓冲的内容，如果它没有完成到文件的末尾，我会假设它会触发一个错误事件，但它会将状态更改为 PLAYBACK_COMPLETE。我们如何确定播放结束是由于连接错误（连接丢失）还是实际播放完成？我唯一能想到的就是在 MediaPlayer 将状态更改为 PLAYBACK_COMPLETE 时检查 currentPostion 与 totalDuration。有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:27:12.627

如果它没有触发[`onError()`](http://developer.android.com/reference/android/media/MediaPlayer.OnErrorListener.html)事件，您可以尝试注册一个[`OnBufferingUpdateListener`](http://developer.android.com/reference/android/media/MediaPlayer.OnBufferingUpdateListener.html)并检查缓冲百分比是否达到 100%。如果连接丢失，播放完成时百分比将小于 100%。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T07:56:34.100

真的很难知道这一点。我认为您的 currentPosition 和 totalDuration 方法很棒，但我建议您也听听设备的网络状态。如果客户端导致与服务器的连接断开，您可以通过这种方式知道。[这](https://stackoverflow.com/questions/4086159/checking-internet-connection-on-android)可能会有所帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T22:30:52.050

你必须确保你有一个[`OnErrorListener`](http://developer.android.com/reference/android/media/MediaPlayer.OnErrorListener.html)实现，并且在这个 onError 方法中你必须返回真值。如果您从此方法返回 false 值，但在这种情况下出现错误，媒体播放器会触发[`OnCompletionListener`](http://developer.android.com/reference/android/media/MediaPlayer.OnCompletionListener.html)onCompletion 方法。

# php - 在超链接中使用 onClick 调用 javascript 函数

> ID：13290672
> 
> 赞同：1
> 
> 时间：2012-11-08T14:12:42.337
> 
> 标签：php, javascript, html

我一直在网上寻找，但我没有找到我的问题的直接答案：

**您可以使用 onClick 作为标签吗？**

换句话说，你能做到这一点（注意通过 php 回显）？

```
echo "<a href=\"#\" id =\"loginbutton\" onClick=\"counter()\"></a>\n"; 
```

我试图运行它，但是当我点击链接时，我的计数器函数没有被调用。

我的其余代码片段：

```
echo "<script type=\"text/javascript\" src=\"src\jquery\jquery.js\">\n";
echo "function counter(){\n";
echo "alert(\"HELLO WORLD!\");\n";
echo "}\n";
echo "</script>\n";

echo "<a href=\"#\" id =\"loginbutton\" onClick=\"counter()\"></a>\n"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:24:38.863

虽然这*应该*可行，但最好不要内联绑定事件。我建议研究[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)和寻找旧版本的 IE [`attachEvent`](http://msdn.microsoft.com/en-us/library/ie/ms536343%28v=vs.85%29.aspx)，. 可以在此处的主题中找到有关这些的更多信息：[addEventListener() / attachEvent() 的正确用法？](https://stackoverflow.com/questions/2657182/correct-usage-of-addeventlistener-attachevent)

如果您等待窗口准备就绪，则确保该元素位于页面上并为您定义以供您访问它。

```
window.onload = function(){
   //add any event listeners using the above methods in here
} 
```

**[示例](http://jsfiddle.net/ChaseWest/eEAy4/)**：

```
<script>
    window.onload = function(){
      var t = document.getElementById("test");
      t.addEventListener("click", sayHi, false);

      function sayHi(){
       alert("Hi");
      }    
    }

</script>    

<div id="test">test</div>​ 
```

根据您上面的回声陈述，如果您决心让它以这种方式工作，那么您可以试试这个：

```
echo "<script type='text/javascript' src='src/jquery/jquery.js'></script>\n";
echo "<script>\n"
echo "function counter(){\n";
echo "alert('HELLO WORLD!');\n";
echo "}\n";
echo "</script>\n";
echo "<a href='#' id ='loginbutton' onClick='counter()'></a>\n"; 
```

请注意，我关闭了包含 jQuery 的脚本标记，并在其下方添加了一个新的开始标记。

**编辑**：

> 引用外部资源（通过 src 属性）的脚本标签不再能够执行嵌入在标签本身中的脚本。

[在这里](http://ejohn.org/blog/degrading-script-tags/)阅读更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:20:23.057

做了一点 Demo 代码，注意函数触发，然后是 href。您可以通过返回 false 使用 JS 将其关闭。

```
<script type="text/javascript">
    function counter() {
        alert("do something here")

        var FollowHref_Or_Not = false;
        // true would simply follow the href after the function is activated
        return FollowHref_Or_Not;
    }
</script>
<a href="/" onclick="return counter()">Test Link</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:22:57.137

要为上面的评论添加更多上下文，这里有一个工作示例。在我放置关于模拟回声的 HTML 注释的地方，只需放置您的 PHP 回声行。另请注意，我添加了 return false；这可以防止执行默认的链接点击行为。由于您的 href 是“#”，它会修改您的 URL 以将“#”放在 URL 中，因此如果您使用浏览器的后退按钮，您仍然会“卡在”同一页面上。

[http://jsfiddle.net/6pEbJ/](http://jsfiddle.net/6pEbJ/)

```
<html>
    <head>
        <script type="text/javascript">
            function connect()
            {
            alert('connected!');
            }
        </script>
    </head>
    <body>
        <!-- simulated echo result here -->
        <a href="#" onclick="connect(); return false;">Testing</a>
    </body>
</html> 
```

# ios - 为什么我无法从数组中获取手势状态

> ID：13290679
> 
> 赞同：0
> 
> 时间：2012-11-08T14:14:03.867
> 
> 标签：ios, nsarray, uigesturerecognizer

在我的代码中，我将手势添加到数组中。那就是我提到的：

```
- (void)handlePanGesture:(UIPanGestureRecognizer *)panGestureRecognizer{
     [arrayLineGestures addObject:panGestureRecognizer];
     [arrayAllGestures addObject:[arrayLineGestures copy]];

   } 
```

所以一段时间后我想再次使用它们并使用以下代码：

```
for (int i=0; i<[arrayAllGestures count]; i++) {
    for (int k=0;k<[[arrayAllGestures objectAtIndex:i]count]; k++) {
        UIPanGestureRecognizer *panGestureRecognizer=(UIPanGestureRecognizer *)[[arrayAllGestures objectAtIndex:i]objectAtIndex:k];           
        const CGPoint point = [[CCDirector sharedDirector] convertToGL:[panGestureRecognizer locationInView:panGestureRecognizer.view]];
        if (panGestureRecognizer.state == UIGestureRecognizerStateBegan) {Nslog(@"began")} 
```

但是这段代码不起作用。它将 pangesture 状态显示为 UIGestureRecognizerStatePossible。但在我将它们添加到数组之前，我检查了没有人是 UIGestureRecognizerStatePossible 的状态。我看不到错误。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:56:47.523

`state`any 的仅`UIGestureRecognizer`在您在处理程序中时有效。您传入的`panGestureRecognizer`不是状态快照，而是对识别器的对象引用。当您将它存储在一个数组中并稍后尝试引用它时，它`state`是无效的，因为识别器的生命周期可能已经过期。

如果你遍历你的数组，你可能会发现所有的识别器都是同一个对象。我不知道这是否得到保证，所以不要依赖它。

# php - 将变量分配给 MySQL 迭代结果集

> ID：13290680
> 
> 赞同：0
> 
> 时间：2012-11-08T14:14:04.447
> 
> 标签：php, mysql, forms, loops

堆栈溢出，

```
$resultpaid = $mysqli->query($paidquery);
while ($row=$resultpaid->fetch_array()) 
{
  print $row['paid'] .'<br />';
} 
```

我意识到这应该很简单，不幸的是，我并不精通 PHP。我试图从这个while循环中获取结果集并将它们分配给变量。基本上现在它找到两行，都是整数值。因此，当它迭代时，它会打印出 250 和 260。我试图弄清楚是否有办法为每一行分配一个变量，以便将整数相加，或者在某个点单独引用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:17:47.227

您可能想用数据构建一个数组。

```
$myArray = array();
$resultpaid = $mysqli->query($paidquery);
while ($row=$resultpaid->fetch_array()) 
{
    $myArray[$row['id']] = $row['paid'];
    print $row['paid'] .'<br />';
}
// $myArray here is filled up with your data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:21:13.800

当然，试试这个，

```
 $total = 0;
 $resultpaid = $mysqli->query($paidquery);
 while ($row=$resultpaid->fetch_array()) 
 {
  $arr[] = $row['paid']; //gets individual values in an array
  $total += $row['paid']; //adds them up
  print $row['paid'] .'<br />';
 } 
```

# vb.net - VB.NET 将文件从资源复制到硬盘

> ID：13290681
> 
> 赞同：1
> 
> 时间：2012-11-08T14:14:04.757
> 
> 标签：vb.net, copy-paste

我想将一个文件从我的项目程序资源复制到硬盘。
我使用此代码，但它显示“拒绝访问路径 'D:\New Folder'。”
`IO.File.WriteAllText(MyPath, My.Resources.MyFile)`
但我有管理员权限。是否有任何其他代码可以从资源中复制文件？
我的操作系统是 Win XP Service Pack 3
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:44:43.823

我找到了解决方案
我的路径是：
D:\New Folder
但是当我将它更改为
D:\New Folder\MyFileName.ExtensionName
问题解决了

# lucene - Orchard CMS 搜索索引模块没有索引我的所有文档

> ID：13290682
> 
> 赞同：1
> 
> 时间：2012-11-08T14:14:06.070
> 
> 标签：lucene, orchardcms

在我从仪表板对某些文档进行了一些更改后，它们没有显示为我的后端搜索的结果，我更新了“搜索索引”和相同的结果，所以我“重建了搜索索引”。几分钟后，搜索索引几乎包含了我的所有文档（不是全部），因此搜索与某些内容不匹配。有人知道为什么吗？请帮助和感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:39:19.123

转到内容类型编辑器并确保您已将类型配置为要编入索引。里面是一个复选框。

# css - 网格 CSS，固定大小 div 内的图像，仅使用 css 保持纵横比

> ID：13290688
> 
> 赞同：2
> 
> 时间：2012-11-08T14:14:19.127
> 
> 标签：css, image, grid

我有一个固定大小的 div 网格，这必须保持 CSS-only。在每个 div 里面，我有一个随机大小的图像。

我需要图像在保持纵横比的同时缩放到 div 大小，并且还需要在 div 内水平和垂直居中。

```
 #holder {
    width: 800px;
    margin: 0 auto;
  }
  .tile {
    display: inline-block;
    padding: 10px 15px;
    border: 1px solid black;
    text-align: center;
    /*vertical-align: middle;*/
    width: 300px;
    height: 300px;
  }
  .tile img {
    /*vertical-align: middle;*/
    outline: 1px dashed red;
    max-height:100%;
    max-width:100%;
  } 
```

不能垂直居中。其他一切似乎都很好。

更新：当 img 小于 div 时，这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:18:00.567

```
#holder {

    display:table;
    width: 800px;
    margin: 0 auto;
    height:100%;
    possition:relative;

}

.tile {

    display: table-cell;
    border: 1px solid black;
    text-align: center;
    vertical-align: middle;

}

.tileInner{

    display:block;
    width: 300px;
    height: 300px;
    padding: 10px 15px;

}

.tile img {
    display:table-cell;
    vertical-align: middle;
    outline: 1px dashed red;
    max-height:100%;
    max-width:100%;

} 
```

html

```
<div id="holder">

    <div class="tile">

        <div class="tileInner">

                <img src="imageUrl"/>

        </div>

    </div>

</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:31:17.523

`width: 100%;`和`height: auto;`（或者`height: auto !important;`如果 img 元素上有一个 height 属性）通常可以解决问题。

抱歉误读了这个问题，这修复了纵横比而不是居中。[这个步骤](https://stackoverflow.com/questions/10515252/vertical-and-horizontal-align-of-image)可能会提供一些有价值的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:26:58.270

这里的问题是块高度是未知的。

这是适用于 firefox/chrome 的解决方案：

```
#holder {
    width: 800px;
    margin: 0 auto;
}
.tile {
    padding: 10px 15px;
    border: 1px solid black;
    width: 300px;
    height: 300px;
    display: table;
}
.tile-layout {
    width: 100%;
    height: 100%;
    display: table-cell;
    vertical-align: middle;
}
.tile img {
    outline: 1px dashed red;
    width:100%;
} 
```

使用这个 html 模板：

```
 <div id="holder">
      <div class="tile">
           <div class="tile-layout">
                <img src="{{ img }}"/>
           </div>
      </div>
 </div> 
```

# php - 使用 CodeIgniter 模型作为对象管理器/工厂

> ID：13290689
> 
> 赞同：2
> 
> 时间：2012-11-08T14:14:22.400
> 
> 标签：php, model-view-controller, codeigniter

我目前正在设计一个使用 CodeIgniter 的游戏，但我不认为模型的单例方法是我想要处理数据库中与游戏相关的对象的方式。

我想使用 CodeIgniter 模型类来处理对象的基本 CRUD 操作，但将对象作为 PHP 类。

例子：

```
 $this->load->model('playermodel');
 $player = $this->playermodel->get($player_id); // Returns a Player object

 // Call modifying operations on the player (equip item, take damage etc.)

 $this->playermodel->save($player); // Commits updated Player back to DB

 $player2 = $this->playermodel->create(); // Basically calls new Player() 
```

我对 CodeIgniter 相当陌生，这样的事情会违反任何类型的 CodeIgniter 或 MVC 设计规则吗？如果是这样，任何人都可以向我推荐另一种解决问题的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T17:15:36.390

如果您想构建正确的 MVC，最好的方法是让您尽可能地从 Codeigniter 获得。Codeigniter 是为 PHP4 编写的框架，它已经有一段时间没有得到任何更新，我说的是框架设计，而不是一些库更新。

如果您查看 Codeigniter 源代码并查看基本模型的功能，它只是从模型中获取请求并使用魔术 _set 和 _get 方法将其传递回控制器。所以 Codeigniter 并不真正了解您的模型或控制器之间的区别。以及你如何写这个，一切都在一些超级超级超全局对象中处理。

从外部看，您可能看起来正在使用 MVC，但实际上并非如此。看看 Zend2、Symfony2 ......在那里你可以真正构建你的模型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T16:22:24.980

您目前拥有的是对[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)模式的奇怪解释（不要与 CI 的同名 ORM 混淆，它实现了[活动记录](http://martinfowler.com/eaaCatalog/activeRecord.html)模式）。

这个想法是将域逻辑与存储抽象的交互分开。对于简化的代码示例，您可以阅读[这篇文章](https://stackoverflow.com/a/11943107/727208)。

唯一的主要问题是，我与您的实现有关的是，您的映射器还包含用于创建实例的逻辑。因此，它还获得了工厂的特征（或者，[建造者](http://en.wikipedia.org/wiki/Builder_pattern).. 取决于您的特定用例）。这将违反[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

但这并不违反 CI 的设计规则。因为它没有。

# java - 我如何找出我的源代码中有哪些测试用例，我可以对它们进行分类吗？

> ID：13290697
> 
> 赞同：1
> 
> 时间：2012-11-08T14:14:29.283
> 
> 标签：java, junit

我正在处理一个包含 50,000 个源文件的大型项目，其中大约 5000 个测试分布在 2000 个类中。这些主要是 JUnit 3 和少量的 JUnit 4。这些测试从批处理文件中频繁（每天或每周）运行，以确保产品正常工作并且不会出现回归或其他问题。

我想枚举源文件或类文件，并生成代表项目中测试用例的类和方法列表。我可以比较这个列表来确定批处理文件没有运行哪些测试。

是否有任何简单的方法可以做到这一点，例如 JUnit 中的功能？或者 JUnit 中是否有我可以通过编程驱动来获取它的功能，例如扫描一个充满类文件的目录并找出哪些是测试。我意识到我可以编写代码来单独加载每个类并开始检查它的某些特征，但如果存在某些东西，我希望能够使用它。

问题的第二部分，有没有常用的方法来注释测试？如果我可以注释测试，我可能会过滤它们并动态生成根据过滤条件运行它们的批处理文件。例如，运行所有需要网络连接的测试，运行所有使用子系统 A 的测试等等。

有什么可以帮助我做到这一点吗？我意识到我可以使用逗号分隔的值列表或其他东西来滚动我自己的注释，但也许这种东西已经正式化并且有工具可以使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:26:17.630

测试是扩展的类`TestCase`（在 JUnit 3 的情况下）或注释为`@Test`（在 JUnit 4 的情况下）。因此，使用 IDE 或以编程方式进行操作都不是问题：编写程序以`*class`递归方式将所有文件查找到您的类文件夹中并测试类是否扩展`TestCase`或使用`@Test`.

# c# - 通过 .NET 4.0 中的服务引用使用 WCF 服务

> ID：13290704
> 
> 赞同：3
> 
> 时间：2012-11-08T14:15:10.827
> 
> 标签：c#, wcf

我已经阅读了一些关于 WCF 的内容，并且网络上的普遍共识是，通过 Visual Studio 的添加服务引用使用 WCF 服务并不是首选/正确的方式，因为它添加了很多过时的软件代码。

但是，这些帖子中的大多数来自 2009 年的 .NET 3.5。

我想知道 .NET 4.0 或 .NET 4.5 是否改善了这种情况，是否仍然建议通过 VS 方式手动使用服务？

手动和服务参考方式的性能差异是不是很明显？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:27:40.997

我不认为手动和服务引用的代理类之间存在性能差异。它会生成未使用的代码，是的。但如果你愿意，你可以手动清理它。

手写代理将在编译期间为您节省几毫秒。但是您将花费更多时间手动编写代理类并对其进行测试。

# xquery - Marklogic 搜索分数可以控制多严？

> ID：13290707
> 
> 赞同：0
> 
> 时间：2012-11-08T14:15:19.183
> 
> 标签：xquery, marklogic

我们的数据库包含具有大量元数据的文档，包括这些文档之间的关系。虚构示例：

```
<document>
  <metadata>
    <document-number>ID 12345 : 2012</document-number>
    <publication-year>2012</publication-year>
    <cross-reference>ID 67890 : 1995</cross-reference>
    <cross-reference>ID 67890 : 1998</cross-reference>
    <cross-reference>ID 67891 : 2000</cross-reference>
    <cross-reference>ID 12345 : 2004</cross-reference>
    <supersedes>ID 12345 : 2004</supersedes>
    ...
  </metadata>
</document>
<document>
  <metadata>
    <document-number>ID 12345 : 2004</document-number>
    <publication-year>2004</publication-year>
    <cross-reference>ID 67890 : 1995</cross-reference>
    <cross-reference>ID 67890 : 1998</cross-reference>
    <cross-reference>ID 67891 : 2000</cross-reference>
    <cross-reference>ID 12345 : 2012</cross-reference>
    <cross-reference>ID 12345 : 2001</cross-reference>
    <superseded-by>ID 12345 : 2012</superseded-by>
    <supersedes>ID 12345 : 2001</supersedes>
    ...
  </metadata>
</document> 
```

我们正在使用基于 Marklogic 搜索 API 的 1 框搜索来允许用户搜索这些文档。搜索语法描述了各种约束和搜索选项，但大多数情况下（默认情况下）它们通过定义为包含大多数元数据元素的字段进行搜索，并（在某种程度上）仔细选择权重（这里真正重要的是`document-number`具有最高重量。）

问题是业务需要非常具体的结果排序，我想不出使用搜索 api 实现它的方法。

引起麻烦的要求是，如果用户搜索匹配文档编号（例如他们搜索“12345”），则具有该文档编号的所有文档都应位于结果集的顶部，按日期降序排列。将它们放在结果集的顶部很容易；`document-number`权重最高，因此按分数排序可以正常工作。问题是按日期进行二次排序不起作用，因为即使所有`document-number`匹配项的分数都高于其他文档，但它们的*分数不同*，因此它们最终按搜索词在其余文档中出现的频率排序元数据；这根本没有意义。

我认为我们真正需要的是一种仅通过与搜索词匹配的权重最高的元素来获得搜索 api 分数结果的方法，而无需参考文档中的任何其他匹配项。我已经查看了评分算法，但看不到这样做的算法；我错过了什么或者这不可能吗？显然，它不一定是`score`我们订购的；如果有其他方法可以获取文档中单个最佳匹配的分数并将其用于排序，那很好。

还有其他我什至没有想到的解决方案吗？

我想过进行两次搜索（一次在 上`document-number`，一次在整个元数据树上），然后合并结果，但这似乎会给分页和性能带来很多麻烦。哪种方式首先违背了使用搜索 api 的目的。

我应该补充一点，在结果集中包含其他匹配项是正确的，所以我们不能只搜索`document-number`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T16:46:30.853

我认为您已经达到了高级搜索 API 可以为您做的事情的极限。不过，我有一些技巧要建议。这些不会是 100% 健壮的，但它们可能对业务来说已经足够好了。然后你就可以继续申请了。对不起，如果我听起来愤世嫉俗或不屑一顾，但我不相信微观管理搜索结果。

最简单的可能：重新排序内存中的第一页。第一页可能比您向用户显示的页面大一点。因为它的大小仍然有限，所以您可以为这个相当复杂的规则制定规则而不会受到太大影响。这将解决您的“递减日期”问题。第 1 页的结果与第 2 页的结果不太匹配，但这可能已经足够了。

采取复杂性的下一步，考虑使用文档质量来处理递减日期问题。这种方法被[http://markmail.org](http://markmail.org)等使用。在插入或更新每个文档时，使用从日期派生的数字设置文档质量。这可能是自 1970 年以来的几天、几周或几个月，或者使用其他一些固定日期。较新的结果往往会浮到顶部。如果任何其他提升往往会淹没基于日期的提升，那么您可能会接近您想要的。

在分析查询以提取潜在的提升术语时也可能有一些用处。如有必要，您可以开始`xdmp:exists(cts:search(doc(), $query))`对每个提升术语进行递归运行，就好像它是一个独立的查询一样。找到`true()`结果后立即退出：这意味着您将使用高得离谱的权重来提升该查询词，使其浮动到顶部。

一旦你知道什么是提升词，重写整个查询以将所有其他词的权重设置为低得多的值，甚至可能为 0。权重越低，那些非提升词对基于日期的质量和增加体重。如果没有提升项，您可能需要进行其他调整。顺便说一句，所有这些都比听起来便宜。除了`xdmp:exists`调用之外，它只是内存中的表达式评估。

不过，再一次，这些都只是轻推分数的技巧。他们不会让您绝对控制您正在寻找的排名。以我的经验，对分数进行微观管理的尝试注定要失败。我敢打赌，无论您的业务经理说什么，您的用户都会对原始 TF/IDF 更满意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T17:40:57.090

另一种方法是按照您的建议使用两次搜索。在文档编号（理想情况下是文档日期）上放置一个范围索引，从查询中提取任何潜在的文档编号值（`search:parse`提取，然后`search:resolve`是一个很好的策略），然后执行 cts:element-range-query 以进行文档匹配那些日期递减的文档编号值。如果没有足够的结果来填满您的 N 个结果页面，则从搜索 api 获取下一个 Nx 结果。您可以跟踪在第一个结果集中返回的文档，并从第二个结果集中排除这些 URI。跟踪分页不会太糟糕。

这可能不如第一个解决方案执行得好，但是对于大多数人来说，附加范围索引查询与更短的搜索 api 查询相结合的时间差异应该可以忽略不计。

# javascript - 为什么这不起作用？

> ID：13290708
> 
> 赞同：1
> 
> 时间：2012-11-08T14:15:24.440
> 
> 标签：javascript, html, wrapper

```
var str="Hello World!"; 
var patt=/\x57/g;
var matched = str.match(patt);
document.write(matched.strike()); 
```

看来问题是`matched.strike()`。`matched`只有它有效。所以为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:19:11.960

该`.strike()`方法对字符串进行操作，并且`matched`是一个数组。您必须取消引用第一个匹配项才能看到正确的输出。

```
var str="Hello World!"; 
var patt=/\x57/g;
var matched = str.match(patt);
// Access first element of the matched array
document.write(matched[0].strike());

// Or via .pop() or .shift()
document.write(matched.pop().strike());
// or
document.write(matched.shift().strike());
// either returns "<strike>W</strike>" 
```

该[`String.strike()`方法是非标准](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/strike)的，不应依赖于完整的浏览器支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:34:13.150

（非常古老的）`strike`方法是一种`String`方法。`RegExp.match`返回一个`Array`不知道`strike`方法的。

您的代码可以重写为：

```
var str = 'Hello World'.replace(/\x57/g,function(s){return s.strike();});
//=> Hello <strike>W</strike>orld 
```

# asp.net - mvc 4 子目录中的 web.config

> ID：13290710
> 
> 赞同：4
> 
> 时间：2012-11-08T14:15:25.440
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-4, web-config

这个问题似乎已经被问了很多，但没有一个真正为我解决问题。我有一个带有区域的 ASP.NET MVC4 应用程序。在这个区域内，我有一个 web.config 覆盖了 appsettings。尝试在该区域内的控制器中读取这些设置时，似乎没有选择这些设置。

```
-MyApp
    -Areas
        -MyArea
            -Controllers
                -MyController
            -Web.config
    -Web.config 
```

在`MyApp\Web.config`我有：

```
<appSettings>
    <add key="DefaultDisplayMode" value="Configuration" />
</appSettings> 
```

在`MyApp\Areas\MyArea\Web.config`我有：

```
<appSettings>
    <add key="DefaultDisplayMode" value="Review" />
    <add key="SubSetting" value="Testing" />
</appSettings> 
```

如果`MyController`我查询应用程序设置，我会看到：

```
DefaultDisplayMode: Configuration 
```

我希望看到：

```
DefaultDisplayMode: Review
SubSetting: Testing 
```

我都试过了：

```
System.Configuration.ConfigurationManager.AppSettings["..."]
System.Web.Configuration.WebConfigurationManager.AppSettings["..."] 
```

我什至尝试了以下（顶部）结构，但没有成功：

```
-MyApp
    -Areas
        -MyArea
            -Controllers
                -MyController
                -Web.config
            -Web.config
    -Web.config 
```

有人知道为什么我的子目录 appSettings 不起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:02:37.697

IIS 将基于 URL 加载 web.config，而不是基于您的路由请求执行的代码。

您可以创建一个模拟所需路由的空文件夹结构并在其中添加配置文件。如果这不起作用，您可以`<location>`在主配置文件中使用标记 - 但位置标记中的路径也必须匹配 URL 而不是代码。

# c - 在solaris和linux下结构不同的fread

> ID：13290712
> 
> 赞同：1
> 
> 时间：2012-11-08T14:15:06.140
> 
> 标签：c, linux, solaris, fread

我正在阅读带有 fread 的文件的第一个字节：

```
fread(&example_struct, sizeof(example_struct), 1, fp_input); 
```

在 linux 和 solaris 下哪个结果不同？其中 example_struct (Elf32_Ehdr) 是 elf.h 中定义的标准 GNU C 库的一部分？我很高兴知道为什么会这样？

一般结构如下所示：

```
typedef struct
{
  unsigned char e_ident[LENGTH];    
  TYPE_Half e_type;         
} example_struct; 
```

调试代码：

```
for(i=0;paul<sizeof(example_struct);i++){
    printf("example_struct->e_ident[%i]:(%x) \n",i,example_struct.e_ident[i]);
}
printf("example_struct->e_type: (%x) \n",example_struct.e_type);
printf("example_struct->e_machine: (%x) \n",example_struct.e_machine); 
```

Solaris 输出：

```
Elf32_Ehead->e_ident[0]: (7f) 
Elf32_Ehead->e_ident[1]: (45) 
...
Elf32_Ehead->e_ident[16]: (2) 
Elf32_Ehead->e_ident[17]: (0)
...
Elf32_Ehead->e_type: (200) 
Elf32_Ehead->e_machine: (6900) 
```

Linux 输出：

```
Elf32_Ehead->e_ident[0]: (7f) 
Elf32_Ehead->e_ident[1]: (45) 
...
Elf32_Ehead->e_ident[16]: (2) 
Elf32_Ehead->e_ident[17]: (0)
...
Elf32_Ehead->e_type: (2) 
Elf32_Ehead->e_machine: (69) 
```

可能类似于：[http ://forums.devarticles.com/cc-help-52/file-io-linux-and-solaris-108308.html](http://forums.devarticles.com/c-c-help-52/file-io-linux-and-solaris-108308.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T14:25:35.710

您没有提及机器中的 CPU，可能是 Solaris 机器中的 Sparc64 和 Linux 机器中的 x86_64，但我猜您遇到了字节顺序问题。Intel、ARM 和当今大多数其他常见架构是所谓的*little-endian*，Sparc 架构是*big-endian*。

假设我们有`0x1234`一个 CPU 寄存器中的值，我们想将它存储在内存中（或者在硬盘驱动器上，在哪里都没有关系）。让`N`我们要写入的内存地址。我们需要将这个 16 位整数作为两个字节存储在内存中，这是令人困惑的部分：

使用大端机器将存储`0x12`在 address`N`和`0x34`at address `N+1`。小端机器将存储`0x34`在 address`N`和`0x12`at address `N+1`。如果我们使用小端机器存储一个值并使用大端机器将其读回，我们将交换两个字节，您将得到您所看到的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:23:11.037

可能是因为两个平台之间的结构包装不同。从外部媒体直接读取结构（作为单元）是一个坏主意，因为这样的问题往往会弹出。

# java - 如何为 JDialog 设置 GIF 背景？

> ID：13290713
> 
> 赞同：1
> 
> 时间：2012-11-08T14:15:30.290
> 
> 标签：java, swing, jdialog, animated-gif

以下代码用于制作*JDialog*：

```
private class InfiniteDialog extends JDialog {

    @Override
    public void paintComponents(Graphics g)
    {
        super.paintComponents(g);
        g.drawImage(Toolkit.getDefaultToolkit().getImage(getClass().getResource("/images/menu_icons/loading.gif")), 0, 0, null);
    }   
} 
```

这是一些执行代码：

```
 JDialog dialog=new InfiniteDialog();
    dialog.setSize(300, 300);
    dialog.setVisible(true); 
```

但我可以看到没有背景的对话框。请告诉我，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:52:31.667

首先尝试在 IDE 中清理 + 刷新您的项目。然后尝试删除路径开头的“/”。

# c# - 将 C# 应用程序置于程序集版本下并使用它来创建补丁并管理它们

> ID：13290716
> 
> 赞同：1
> 
> 时间：2012-11-08T14:15:37.810
> 
> 标签：c#, continuous-integration, patch, .net-assembly, continuous-deployment

我们有一个 C# 桌面应用程序，我们在软件即服务模型上为各种服务器上的客户端运行。我们仍在使用 dot net framework 2。该软件具有一个架构，其中我们有一个独立的应用程序来捕获某些服务器抛出的外部数据。然后是基于它进行计算的应用程序。还有一个客户端可以看到输出的应用程序。3 个应用程序之间的链接是另一个与数据库通信的应用程序。

这 4 个解决方案位于源代码控制的 SVN 上。但是发布管理仍然是手动的，补丁是通过检查日志手动制作的，包括dll、pdb、xml。等代码已更改的项目。

没有实施程序集版本控制，补丁或发布管理只是在黑暗中完成。

我想知道从代码生成自动补丁的行业惯例是什么。我还想要 SVN 中的每个版本的补丁。汇编版本控制对此也有帮助吗？

我读过很多关于持续集成的文章，但它失败了，因为我们没有单元测试和其他花哨的代码来监控代码的正确性。目前我唯一感兴趣的是实现一种制作可以轻松应用和删除的补丁的方法。另外我想知道一种方法来确定我们可以通过某种自动化方式而不是手动维护日志来监控哪个版本处于哪个级别（或应用了哪些补丁）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:23:55.417

我们使用一个构建脚本来创建一个`SvnVersion.cs`包含最后提交的修订的文件。此文件放在解决方案的根目录下，然后添加到解决方案中的所有项目中（但添加为**链接**，而不是复制）。

文件 ( `SvnVersion.Template.cs`) 的模板如下所示：

```
using System.Reflection;
[assembly: AssemblyVersion("1.0.0.$WCREV$")]
[assembly: AssemblyFileVersion("1.0.0.$WCREV$")] 
```

我们只需使用 TortoiseSVN 在批处理脚本中填充这些占位符：

```
type "%TRUNKPATH%SvnVersion.Template.cs" > "%TRUNKPATH%\SvnVersion.tmp"
SubWcRev "%TRUNKPATH%\" "%TRUNKPATH%SvnVersion.tmp" "%TRUNKPATH%SvnVersion.cs" -f
IF ERRORLEVEL 1 GOTO ERROR
DEL "%TRUNKPATH%SvnVersion.tmp" 
```

如果您不使用 TortoiseSVN，还有其他方法可以在文件中获取此信息。

您还需要从`AssemblyInfo.cs`文件中删除相同的信息，否则会出现编译错误。此外，为了加速 Debug 构建，这仅在 Release 构建中执行（并且仅在文件最初不存在时才在 Debug 构建中执行，例如在新签出之后）。

# gnome - 在 Gnome 中向窗口添加最小化和最大化按钮

> ID：13290723
> 
> 赞同：0
> 
> 时间：2012-11-08T14:15:57.937
> 
> 标签：gnome, gnome-3, gnome-shell

我已经按照[这里](http://geekum.wordpress.com/2011/05/25/how-to-move-close-button-in-debian-gnome-shell-to-left-like-ubuntu/)的描述添加了`minimize`和按钮。 我尝试了命令行和 GUI 选项。`maximize`

他们没有添加......
当在 GUI 中我看到一个红色标记，说明“密钥没有架构”

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-08T23:37:58.133

好的，

```
gsettings set  org.gnome.shell.overrides button-layout ':minimize,maximize,close' 
```

行得通。

# pagedown - 在 pagedown 上隐藏按钮

> ID：13290729
> 
> 赞同：3
> 
> 时间：2012-11-08T14:16:26.857
> 
> 标签：pagedown

我现在在我的网站上使用[pagedown](http://code.google.com/p/pagedown/wiki/PageDown)，到目前为止它很棒，唯一的细节是它不是一个面向编程的网站，所以我想删除“代码”按钮。

有什么办法可以做到吗？我尝试使用 CSS 隐藏按钮，但 html 具有内联样式“left：xxx”，我无法使用 CSS 更改。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T18:38:42.430

如果您打开 Markdown.Editor.js，并滚动到大约第 1360 行（取决于您使用的版本），您将看到一个区域：

```
group1 = makeGroup(1);
buttons.bold = makeButton("wmd-bold-button", "Bold - Ctrl+B", "icon-bold", bindCommand("doBold"), group1);
buttons.italic = makeButton("wmd-italic-button", "Italic - Ctrl+I", "icon-italic", bindCommand("doItalic"), group1);

group2 = makeGroup(2);
buttons.link = makeButton("wmd-link-button", "Link - Ctrl+L", "icon-link", bindCommand(function (chunk, postProcessing) {
  return this.doLinkOrImage(chunk, postProcessing, false);
}), group2);
buttons.quote = makeButton("wmd-quote-button", "Blockquote - Ctrl+Q", "icon-blockquote", bindCommand("doBlockquote"), group2);
buttons.code = makeButton("wmd-code-button", "Code Sample - Ctrl+K", "icon-code", bindCommand("doCode"), group2);
buttons.image = makeButton("wmd-image-button", "Image - Ctrl+G", "icon-picture", bindCommand(function (chunk, postProcessing) {
  return this.doLinkOrImage(chunk, postProcessing, true);
}), group2); 
```

等等等等。只需引用您不想要的按钮即可。

或者，您可以简单地省略整个 wmd-buttons div，只使用编辑器和预览组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:53:04.717

*   在代码中搜索`doClick(buttons.code)`并注释掉

*   如果你看一下 makeButton 函数：

    ```
    var makeButton = function (id, title, XShift, textOp) {
    var button = document.createElement("li");
    button.className = "wmd-button";
    button.style.left = xPosition + "px";
    xPosition += 25;
    var buttonImage = document.createElement("span");
    button.id = id + postfix;
    button.appendChild(buttonImage);
    button.title = title;
    button.XShift = XShift;
    if (textOp)
        button.textOp = textOp;
    setupButton(button, true); // <--- LOOK HERE
    buttonRow.appendChild(button);
    return button; 
    ```

    };

在函数`true`调用中传递的是标志。我所做的只是创建了另一个函数并将其放在第一个函数的正下方。我唯一改变的是那个标志。然后我改为.`setupButton``isEnabled``makeButton``isEnabled``false``button.code = makeButton(...)``button.code = makeButton2(...)`

```
buttons.code = makeButton2("wmd-code-button", getString("code"), "-80px", bindCommand("doCode")); 
```

# facebook - 经过身份验证的应用程序上的签名请求中没有用户 ID

> ID：13290730
> 
> 赞同：1
> 
> 时间：2012-11-08T14:16:25.707
> 
> 标签：facebook, authentication

我正在创建一个 Facebook 应用程序，它也是一个 PageTab，对于某些用户，在他们对应用程序进行身份验证后，签名请求中没有 user_id，但仅适用于某些用户。

由于我在没有 user_id 时重定向到身份验证对话框，因此这些用户存在无限重定向循环。

用户对应用进行身份验证后，user_id 怎么可能为空？所有用户都是测试人员。但对一些人来说，它有效，对一些人来说，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:09:01.380

因为测试人员没有接受他们的测试人员邀请，所以没有 user_id。

# javascript - 使用 Jquery 获取请求获取整个 div。姜戈

> ID：13290734
> 
> 赞同：0
> 
> 时间：2012-11-08T14:16:43.627
> 
> 标签：javascript, jquery, ajax, django

在我的 django 应用程序上，我使用 django-facebook 显示用户的 facebook 好友列表。朋友根据那里的“活动”（如果他们是活动的或不活动的）进行排序。

我想在我的页面上刷新这个列表而不刷新整个页面。

这是我的看法：

```
class fb_friend(request)
    if request.user.userprofile.facebook_id:
        # Get Friends 

        profile = request.user.get_profile()
        idle_friends = profile.get_idle_facebook_friends()
        active_friends = profile.get_active_facebook_friends()
        offline_friends = profile.get_inactive_facebook_friends()
        friend_groups = (active_friends, idle_friends,  offline_friends) 
```

在我的模板中：

```
 <div>
    {% for group in friend_groups %}
     {% for friend in group %}
    <p>{{ friend.name }} ({{ friend.online_presence }})</p>
     {% endfor %}
    {% endfor %}
     </div> 
```

我的想法是将我的视图的内容放在另一个视图中，然后使用带有 setInterval 的 JQuery 请求。但问题是我只知道如何通过 JQuery 请求获取页面的一个元素。

所以我的问题是如何使用 JQuery 获取请求获取整个 div 并将其显示在我的模板中？

谢谢您的帮助！

# java - 将地址字符串转换为 GeoPt 值

> ID：13290735
> 
> 赞同：0
> 
> 时间：2012-11-08T14:16:44.280
> 
> 标签：java, google-app-engine, gwt

我正在使用 GAE/J 1.7 GWT 2.4 JPA 请求工厂

我想创建一个字段，用户可以在其中提交地址并将此值保存为数据存储中的 GeoPt。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:51:44.730

您可以获取用户指定的地址，使用[Google Geocoding API](https://developers.google.com/maps/documentation/geocoding/)发出地理编码请求，处理结果并将其保存`GeoPt`在您的数据存储中。

# sql-server - 从字符串值构建 GUID，然后（反构建）它们？

> ID：13290737
> 
> 赞同：1
> 
> 时间：2012-11-08T14:17:01.697
> 
> 标签：sql-server, vb.net, guid, uniqueidentifier

我有一个程序，用户输入密码以登录。密码然后保存在名为 users 的 SQL 2000 数据库表中。

问题是任何拥有 SQL 查询分析器或企业管理器的人都可以很容易地读取这些密码。

我希望程序从每个用户的密码构造一个 GUID 并将该 GUID 存储在 SQL 表中，然后当它验证用户密码输入时，它会解构相关的 GUID 并获取原始字符串值以将其与用户输入匹配。

现在我不确定这是否可能，但我听到一些 IT 专家谈论这个主题，他们不是那种你会寻求帮助的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:33:44.157

您可能正在尝试在这里重新发明轮子。有很多标准的[**密码散列**](https://www.google.com/search?q=vb.net%20password%20hashing)解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:24:17.650

我认为您应该在存储在数据库中时使用**加密您的密码，然后****解密**加密的密码以进行验证。

此外，您可以使用**Hashing**。检查这个：**[加盐密码散列 - 做对了](http://crackstation.net/hashing-security.htm)**

**顺便提一句：**

**哈希**是单向函数。 **您不能从散列派生原始数据**。

在**加密**的情况下，**原始数据可以从加密数据中恢复**。

参考：

**[.NET 中使用 TripleDESCryptoServiceProvider 类的加密/解密函数](http://www.codeproject.com/Tips/306620/Encryption-Decryption-Function-in-Net-using-MD5Cry)**

**[如何使用带有 c# 的 Asp.Net 加密或解密密码](http://www.c-sharpcorner.com/Blogs/9384/how-to-encrypt-or-decrypt-password-using-Asp-Net-with-C-Sharp.aspx)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:45:12.763

我相信我会使用 Hash() 方法，我从通过链接 U 提供的 [http://crackstation.net/hashing-security.htm](http://crackstation.net/hashing-security.htm)中学到了很多 谢谢。

# sql - 如何连接两个 SQL 查询？

> ID：13290738
> 
> 赞同：-1
> 
> 时间：2012-11-08T14:16:55.240
> 
> 标签：sql, tsql, sql-server-2012

对同一个表进行两个 SQL 查询

```
SELECT FirstName,
       LastName,
       LEFT(FirstName, 1) + '.' + LEFT(LastName, 1) AS Initial
FROM   ContactUpdates 
```

这输出：

```
FirstName    LastName    Initial 
```

我希望这个在 Initial 结束的右侧加入另一个

```
SELECT LOWER(LEFT(FirstName, 1) + REPLACE(LastName,'''','' ) )
         + '@email.com' AS Email
FROM   ContactUpdates 
```

最后我希望它成为

```
 FirstName    LastName    Initial    Email 
```

但我不知道如何让他们加入任何帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:18:41.570

```
SELECT FirstName, 
    LastName, 
    LEFT(FirstName,1) + '.' + LEFT(LastName,1) AS Initial, 
    LOWER(LEFT(FirstName, 1) + REPLACE(LastName, '''', '')) + '@email.com' AS Email
FROM ContactUpdates 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:19:59.997

然后只需将该列附加到查询中：

```
SELECT FirstName
     , LastName
     , LEFT(FirstName,1) + '.' + LEFT(LastName,1) AS Initial 
     , LOWER(LEFT(FirstName,1) + REPLACE(LastName,'''','' ) ) + '@email.com' AS Email
FROM ContactUpdates 
```

# ruby-on-rails - Ruby on Rails 中的密码恢复

> ID：13290743
> 
> 赞同：1
> 
> 时间：2012-11-08T14:17:25.720
> 
> 标签：ruby-on-rails, password-recovery

嗨，当我尝试重置密码时，我收到此错误：

> PasswordResetsController#create 中的参数错误
> 
> 参数数量错误（1 代表 0）
> 
> app/models/user.rb:48:in `create_remember_token app/models/user.rb:40:in`send_password_reset app/controllers/password_resets_controller.rb:7:in `create'

```
class PasswordResetsController < ApplicationController
  def new
  end

  def create
    user = User.find_by_email(params[:email])
    user.send_password_reset if user
    redirect_to root_url
  end

  def edit
    @user = User.find_by_password_reset_token!(params[:id])
  end

  def update
    @user = User.find_by_password_reset_token!(params[:id])
    if @user.password_reset_sent_at < 2.hours.ago
      redirect_to new_password_reset_path, :alert => "Password &crarr; 
        reset has expired."
    elsif @user.update_attributes(params[:user])
      redirect_to root_url, :notice => "Password has been reset."
    else
      render :edit
    end
end
end

class User < ActiveRecord::Base
  attr_accessible :email, :lname, :name, :password, :password_confirmation
  has_secure_password
  before_save { |user| user.email = email.downcase }
  before_save :create_remember_token

  validates :name, presence: true, length: { maximum: 50 }
  validates :lname, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
  validates :password, presence: true, :on => :create
  validates :password, length: { minimum: 6 }, :allow_blank => true
  validates :password_confirmation, presence: true, :on => :create

  def send_password_reset
    create_remember_token(:password_reset_token)
    self.password_reset_sent_at = Time.zone.now
    save!
    UserMailer.password_reset(self).deliver
  end

  private

    def create_remember_token
      self.remember_token = SecureRandom.urlsafe_base64
    end
end 
```

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:33:43.673

当 create_remember_token 的方法定义不接受任何参数时，您正在调用 create_remember_token(:password_reset_token)。

换句话说，改变

```
create_remember_token(:password_reset_token) 
```

到

```
create_remember_token 
```

在您的 send_password_reset 方法中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:40:42.380

[在railscasts](http://railscasts.com/episodes/274-remember-me-reset-password)中找到了解决方案

添加到 before_save remember_token 并更改 create_remember_token

不知道对不对？但它有效

```
 class User < ActiveRecord::Base
  attr_accessible :email, :lname, :name, :password, :password_confirmation
  has_secure_password

  before_save { |user| user.email = email.downcase }
  before_save { create_remember_token(:remember_token) }

  validates :name, presence: true, length: { maximum: 50 }
  validates :lname, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
  validates :password, presence: true, :on => :create
  validates :password, length: { minimum: 6 }, :allow_blank => true
  validates :password_confirmation, presence: true, :on => :create

  def send_password_reset
    create_remember_token(:password_reset_token)
    self.password_reset_sent_at = Time.zone.now
    save!
    UserMailer.password_reset(self).deliver
  end

    def create_remember_token(column)
     begin
      self[column] = SecureRandom.urlsafe_base64
     end while User.exists?(column => self[column])
    end
end 
```

# heroku - 如何修改 Heroku 中已安装包的来源？

> ID：13290745
> 
> 赞同：2
> 
> 时间：2012-11-08T14:17:30.600
> 
> 标签：heroku

如何修改 Heroku 中已安装包的源？这是一个 django 应用程序，但我想它应该不会有太大的不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:26:57.373

Heroku 使用 Git 来管理你的源代码。请参阅[https://devcenter.heroku.com/articles/quickstart](https://devcenter.heroku.com/articles/quickstart)上的快速入门指南。

您必须安装 Heroku Toolbelt，这是一个命令行工具。使用该应用程序，您将能够管理和部署您的 heroku 应用程序。

如果您使用 3rd-party 插件，我认为这些是子模块，因此您可能无法修改它们。

# c# - 图像未逐像素显示

> ID：13290748
> 
> 赞同：1
> 
> 时间：2012-11-08T14:17:38.117
> 
> 标签：c#, wpf, image, xaml

我很困惑。

我创建了一个 PNG 图像，作为我的应用程序显示中的分隔符，图像高 3 像素，如下所示：

![在此处输入图像描述](../Images/506675ad892fc8662d9235b1b490eef8.png)

但是，当我在 C# WPF 窗口上显示并运行它时，分隔线显示为大约 4 像素，颜色关闭。

## 代码：

```
<StackPanel Height="3">
    <StackPanel.Background>
        <ImageBrush ImageSource="Assets/divider.png" Stretch="None"
            AlignmentX="Left" AlignmentY="Top" Viewport="0,0,20,3" 
            ViewportUnits="Absolute" TileMode="FlipX" />
    </StackPanel.Background>
</StackPanel> 
```

## 输出和缩放：

![在此处输入图像描述](../Images/8553e1d349ebe3237d2f8209b4b49b8f.png)

我认为图像被“拉伸”（尽管如此`Stretch="None"`）或者有一些优化图像的机制，所以我取消了图像并用 3 个具有相同颜色和 1 个像素高度的矩形来编写它这个：

```
<StackPanel Height="3" Orientation="Vertical">
    <Rectangle Fill="#484848" Height="1" />
    <Rectangle Fill="#222" Height="1" />
    <Rectangle Fill="#484848" Height="1" />
</StackPanel> 
```

然而结果是相似的：4个像素和颜色跑掉（不是指定的确切颜色）：

![在此处输入图像描述](../Images/eb01e5dcbb15a1813244bb37c2c219dc.png)

除了像素关闭之外，颜色也关闭了。我的颜色应该是`#484848`, `#222222`, `#484848`. 当显示在 WPF 窗口上时，阴影会稍微变暗（灰色阴影太多！）

随着窗口大小的调整，我也需要分隔符来填充窗口。我是一个完美主义者，我希望 3 像素高度分隔符是像素完美的。有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:33:57.417

感谢@Brian 和@Sisyphe，我能够正确显示这些线条。然而，这仍然是通过`Rectangle`显示器完成的解决方案，我认为有更好的解决方案。

这是我目前的解决方案：

```
<StackPanel HorizontalAlignment="Stretch" Height="3">
    <Rectangle Fill="#484848" Height="1" RenderOptions.EdgeMode="Aliased" />
    <Rectangle Fill="#222222" Height="1" RenderOptions.EdgeMode="Aliased" />
    <Rectangle Fill="#484848" Height="1" RenderOptions.EdgeMode="Aliased" />
</StackPanel> 
```

# c++ - MPI_Isend MPI_recv 丢失数据

> ID：13290751
> 
> 赞同：0
> 
> 时间：2012-11-08T14:17:47.420
> 
> 标签：c++, mpi

MPI_Recv 是否有可能收到标签不匹配的消息？

我的逻辑：MPI_Isend / MPI_Recv 通信。

节点 1 发送一条标记为 0 的消息，然后发送另一条标记为 1 的消息。因为节点 1 中有两个线程，所以发送动作可能同时发生。
节点 2 将探测是否有来自节点 1 的消息，如果有，则接收该消息。

在我的设计中，我希望节点 2 接收带有标签 0 的消息，然后是标签 1。但是当节点 2 探测消息来自节点 1 的信号时，它收到一条长度与标签 1 消息相同的消息. 然后没有来自节点 1 的消息。标签 0 消息似乎丢失了。

我很困惑，期待一些答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:40:37.570

MPI 不能丢失消息，除非它们是在“准备好的”模式下发送的，即使用`MPI_Rsend`or `MPI_Irsend`，而接收者还没有准备好，这显然不是你的情况。`MPI_Isend`启动发送操作，但不能保证完成，除非它进行到完成。许多 MPI 调用会导致进行非阻塞操作，但最显式的调用是`MPI_Wait`及其变体。还有一些 MPI 实现具有在后台进行非阻塞操作的特殊进程线程（例如，可以通过这种方式编译 Open MPI）。

如果第二个消息非常小并且正在使用不同的发送模式（例如，一些急切的发送协议），则第二个消息可能在第一个消息之前到达。MPI 仅保证具有相同信封的消息保持有序。消息信封是元组（发送者、接收者、标签、通信者）。

您还谈到从不同线程发送消息。您确定您的 MPI 库是线程安全的，并且您是否使用`MPI_THREAD_MULTIPLE`线程支持级别对其进行了初始化，例如：

```
int provided;

MPI_Init_thread(&argc, &argv, MPI_THREAD_MULTIPLE, &provided);
if (provided != MPI_THREAD_MULTIPLE)
{
   printf("Sorry, your MPI library does not provide MPI_THREAD_MULTIPLE\n");
   MPI_Abort(MPI_COMM_WORLD, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:23:26.353

您最好的选择是让接收者发布一个`MPI_IRecv`for 标签 0，然后发布一个`MPI_IRecv`for 标签 1。然后它等到消息进来，使用`MPI_Wait*`哪个可以是`MPI_WaitAll`,`MPI_WaitAny`或`MPI_Wait`取决于接下来需要发生的事情。

这样，您就有两个正在等待消息的接听电话，并且标记的消息会到达它们应该去的地方。

# javascript - 在 Webdriver 中检查 Firefox 缓存中的文件

> ID：13290756
> 
> 赞同：0
> 
> 时间：2012-11-08T14:17:54.880
> 
> 标签：javascript, firefox, caching, webdriver

我需要编写一个测试代码，检查浏览器是否正确缓存了某些数据（只需检查是否为某些文件创建了缓存）。有没有办法在 WebDriver 或 JavaScript 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:32:45.750

Firefox 的缓存目录`Cache`位于用户的 firefox 配置文件夹中的文件夹下。这可以使用您的语言（即C#）中的普通`IO`类来查询`System.IO`

但是，这里的文件没有扩展名或命名约定，但我相信它们是文件的直接副本。（例如，它们是 Javascript 文件的完整副本）

您可能必须比较所有文件并使用哈希比较来检查是否存在某些内容。

# c# - 表达式和分配对象之间的浮点不一致

> ID：13290758
> 
> 赞同：7
> 
> 时间：2012-11-08T14:18:24.013
> 
> 标签：c#, .net, floating-point

这让我感到惊讶 - 相同的算法会根据其执行方式给出不同的结果：

```
> 0.1f+0.2f==0.3f
False

> var z = 0.3f;
> 0.1f+0.2f==z
True

> 0.1f+0.2f==(dynamic)0.3f
True 
```

（在 Linqpad 中测试）

这是怎么回事？

* * *

**编辑**：我明白为什么浮点运算不精确，但不明白为什么会*不一致*。

古老的 C 可靠地确认*0.1 + 0.2 == 0.3*适用于单精度浮点数，但不适用于双精度浮点数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T14:40:51.517

我强烈怀疑您可能会发现在使用和不使用调试器以及在发布配置与调试配置中运行此代码时会得到不同的结果。

在第一个版本中，您正在比较两个表达式。C# 语言允许以比源类型更高精度的算术计算这些表达式。

在第二个版本中，您将加法结果分配给局部变量。*在某些情况下*，这将强制将结果截断为 32 位 - 导致不同的结果。在其他情况下，CLR 或 C# 编译器将意识到它可以优化掉局部变量。

从 C# 4 规范的第 4.1.6 节：

> 浮点运算可以以比运算结果类型更高的精度执行。例如，某些硬件体系结构支持比该类型具有更大范围和精度的“扩展”或“长双精度”浮点`double`类型，并隐式执行具有更高精度类型的所有浮点运算。*只有以过高的性能成本为代价，才能使这种硬件架构以较低的*精度执行浮点运算。C# 不需要一个实现来牺牲性能和精度，而是允许将更高精度的类型用于所有浮点运算。除了提供更精确的结果之外，这很少有任何可衡量的影响。

编辑：我没有尝试编译这个，但在评论中，克里斯说第一个表单根本没有在执行时被评估。以上*仍然*适用（我稍微调整了我的措辞） - 它只是将常量的评估时间从执行时间转移到编译时间。只要它的行为方式与*有效*评估相同，这对我来说似乎没问题 - 所以编译器自己的常量表达式评估也可以使用更高精度的算术。

# ruby - Ubuntu 12.04.1 / Ruby 1.9.3p0 上的 Ruby OpenSSL::SSL::SSLError

> ID：13290759
> 
> 赞同：2
> 
> 时间：2012-11-08T14:18:11.790
> 
> 标签：ruby, ubuntu, openssl, sinatra, ubuntu-12.04

这是一个相当长的故事......但它基本上归结为其他人似乎都遇到过的相同问题，除了我似乎无法解决它。

我正在使用 EC2 ami-3d4ff254，它是 Ubuntu 12.04.1 LTS x64。我正在部署需要 Ruby 1.93 并且是 Sinatra 应用程序的[Githubs Janky 应用程序。](https://github.com/github/janky)

我在 Ubuntu 中依赖项的基本安装过程是

```
sudo apt-get -y update
sudo apt-get -y install curl ssh git-core git build-essential zlib1g zlib1g-dev libyaml-dev libxml2-dev libc6-dev autoconf automake libtool make postgresql postgresql-client postgresql-contrib libpq-dev ruby1.9.3 ruby1.9.1-dev rubygems1.9.1 ruby-bundler openssl 
```

我还按照[此处](http://lenni.info/blog/2012/05/installing-ruby-1-9-3-on-ubuntu-12-04-precise-pengolin/)的说明来确保 1.9.3 是默认设置。

```
sudo update-alternatives --install /usr/bin/ruby ruby /usr/bin/ruby1.9.3 400 \
--slave   /usr/share/man/man1/ruby.1.gz ruby.1.gz \
                /usr/share/man/man1/ruby1.9.3.1.gz \
--slave   /usr/bin/ri ri /usr/bin/ri1.9.3 \
--slave   /usr/bin/irb irb /usr/bin/irb1.9.3 \
--slave   /usr/bin/rdoc rdoc /usr/bin/rdoc1.9.3 \

sudo update-alternatives --install /usr/bin/gem gem /usr/bin/gem1.9.3 400

sudo gem install rubygems-update 
```

这就是我的环境的基本设置。

工具版本的命令行验证

```
ruby -v
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux]

gem -v
1.8.11

openssl version
OpenSSL 1.0.1 14 Mar 2012 
```

这是 Gemfile.lock 的内容

```
GEM
  remote: http://rubygems.org/
  specs:
    activemodel (3.2.8)
      activesupport (= 3.2.8)
      builder (~> 3.0.0)
    activerecord (3.2.8)
      activemodel (= 3.2.8)
      activesupport (= 3.2.8)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activesupport (3.2.8)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    addressable (2.3.2)
    arel (3.0.2)
    broach (0.2.1)
      json (~> 1.4)
      nap (~> 0.3)
    builder (3.0.4)
    daemons (1.1.9)
    eventmachine (1.0.0)
    faraday (0.8.4)
      multipart-post (~> 1.1)
    faraday_middleware (0.9.0)
      faraday (>= 0.7.4, < 0.9)
    hashie (1.2.0)
    hipchat (0.6.1)
      httparty
      httparty
    httparty (0.9.0)
      multi_json (~> 1.0)
      multi_xml
    i18n (0.6.1)
    janky (0.9.13)
      activerecord (~> 3.2.0)
      broach (~> 0.2)
      mustache (~> 0.11)
      rake (~> 0.9.2)
      replicate (~> 1.4)
      sinatra (~> 1.3)
      sinatra_auth_github (~> 0.7.0)
      yajl-ruby (~> 1.1.0)
    json (1.7.5)
    mime-types (1.19)
    multi_json (1.3.7)
    multi_xml (0.5.1)
    multipart-post (1.1.5)
    mustache (0.99.4)
    nap (0.5.1)
    oauth2 (0.5.2)
      faraday (~> 0.7)
      multi_json (~> 1.0)
    octokit (1.4.0)
      addressable (~> 2.2)
      faraday (~> 0.8)
      faraday_middleware (~> 0.8)
      hashie (~> 1.2)
      multi_json (~> 1.3)
    pg (0.14.1)
    rack (1.4.1)
    rack-protection (1.2.0)
      rack
    rake (0.9.2.2)
    replicate (1.5)
    rest-client (1.6.7)
      mime-types (>= 1.16)
    sinatra (1.3.3)
      rack (~> 1.3, >= 1.3.6)
      rack-protection (~> 1.2)
      tilt (~> 1.3, >= 1.3.3)
    sinatra_auth_github (0.7.0)
      rest-client (~> 1.6.1)
      sinatra (~> 1.0)
      warden-github (~> 0.7.0)
      yajl-ruby (~> 1.1)
    thin (1.5.0)
      daemons (>= 1.0.9)
      eventmachine (>= 0.12.6)
      rack (>= 1.0.0)
    tilt (1.3.3)
    tzinfo (0.3.35)
    warden (1.2.1)
      rack (>= 1.0)
    warden-github (0.7.0)
      json (~> 1.5)
      oauth2 (~> 0.5.2)
      octokit (~> 1.4.0)
      rest-client (~> 1.6.1)
      warden (~> 1.0)
      yajl-ruby (~> 1.1)
    yajl-ruby (1.1.0)

PLATFORMS
  ruby

DEPENDENCIES
  hipchat (~> 0.4)
  janky (~> 0.9)
  pg
  thin 
```

该应用程序正在 Upstart 下运行（由 Foreman 配置）

除了必须与 https 站点建立外部连接之外，该应用程序似乎一切正常。它与可怕的东西一起死去`OpenSSL::SSL::SSLError - SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed:`

我尝试将变量导出到证书文件

```
export SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt 
```

我尝试了一些猴子补丁建议。

我也可以使用 openssl 在 cmd 行连接到站点，所以这似乎不是系统问题，只是 Ruby 问题（据我所知）

```
openssl s_client -connect my.jenkins.site:443 
```

这有点交叉，但在[Janky 问题跟踪器](https://github.com/github/janky/issues/111)上有更多关于这个传奇的细节，包括 Ruby 爆炸的调用堆栈等。

如果有人有任何好主意，我会很难过！（我想下一个选择是尝试使用 RVM，我对此一无所知）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:40:20.237

我认为这归结为 1.9.3p0。

一旦我使用 RVM 安装 Ruby，并使用更高版本，我的问题就消失了。

所以这里的故事的寓意是，不要使用 Ubunutu 附带的 Ruby。

FWIW - 如果我不得不重新做一遍，我会使用 rbenv 代替。这要简单得多。RVM 有点难以使用（尤其是通过 Capistrano 部署，其中部署用户与运行应用程序的用户不同等）

# php - 在命名空间环境中快捷方式 PHP 的类

> ID：13290762
> 
> 赞同：1
> 
> 时间：2012-11-08T14:18:39.457
> 
> 标签：php, namespaces

这是我挑剔的......但目前我必须`\`在我所有的班级面前使用......

```
 //credit card expiration years and months
    $expirationYears = array();
    $expirationMonths = array();
    $datePeriod = new \DatePeriod(new \DateTime(), new \DateInterval("P1Y"), 5);
    foreach ($datePeriod as $year) {
        $expirationYears[] = $year->format('Y');
    }
    $datePeriod = new \DatePeriod(new \DateTime('January 1st'), new \DateInterval("P1M"), 11);
    foreach ($datePeriod as $month) {
        $class = new \stdClass();
        $class->value = $month->format('m');
        $class->label = $month->format('M');
        $expirationMonths[] = $class;
    } 
```

有没有办法解决这个问题，或者这只是命名空间环境中需要的东西？

我认为`use`为每个班级指定一个是不合理的......这太乏味而无法维护

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:39:28.030

`use`关键字是正确的方法。这不是太多的开销。

我们在项目中大量使用它，这没什么大不了的。现在一直使用反斜杠*很*乏味。

此外，跟踪您在某些可能长达数千行的文件中使用的所有类也很棒。因此，您可以到顶部查看正在使用的类（不使用文本搜索）。

# php - Symfony 2 从一个捆绑包到另一个捆绑包的用户安全性

> ID：13290770
> 
> 赞同：3
> 
> 时间：2012-11-08T14:18:48.920
> 
> 标签：php, symfony

我是 Symfony 2 的新手，以前从未使用过任何框架。

我创建了 2 个捆绑包，一个用于核心站点，其 url 为 root `/`，`DefaultBundle`然后我创建了一个新包`UserBundle`并将所有路由设置`/user/`为登录页面`/user/login`，它工作正常。

到目前为止，我能够登录用户并且一切似乎都正常。

真正的问题是，我如何检查`DefaultBundle`用户是否已登录，所以我在前端网站的右上角显示它们`Welcome User`而不是链接。`login/register`

ps 我不需要 FOSuserBundle 作为答案，

以下来自我的 security.yml 文件

```
jms_security_extra:
    secure_all_services: false
    expressions: true

security:
    encoders:
       Aala\Vital\UserBundle\Entity\User: 
          algorithm: plaintext
#              encode_as_base64: false
#              iterations: 1

role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_MOD:       ROLE_USER
    ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_MOD, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

providers:
    user_area:
      entity: {class: AalaVitalUserBundle:User, property: email}

firewalls:

    login:
        pattern:  ^/user/login$
        security: false
        anonymous: true

    user_area:
        pattern:    ^/user
        form_login:
            login_path: /user/login
            check_path: /user/login_check
            post_only: true
            default_target_path: /user/
        logout:
            path:   /user/logout
            target: /user/

    main:
        pattern: ^/
        security: true
        anonymous: ~

access_control:
    - { path: /.*, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/user, roles: ROLE_USER } 
```

我的文件夹结构如下

```
-src
    -Aala
        -Vital
            -FronendBundle
            -UserBundle 
```

# 编辑：

这可以通过依赖注入来完成吗？如果是的话怎么做...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T06:20:47.340

# 解决了

要在两个防火墙之间共享身份验证，请使用`context`. 以下是我的 security.yml 文件中更新的防火墙部分

```
firewalls:

    login:
        pattern:  ^/user/login$
        security: false
        anonymous: true

    user_area:
        pattern:    ^/user
        context: primary_auth
        form_login:
            login_path: /user/login
            check_path: /user/login_check
            post_only: true
            default_target_path: /user/
        logout:
            path:   /user/logout
            target: /user/

    main:
        pattern: ^/
        context: primary_auth
        security: true
        anonymous: ~ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:24:37.367

根据控制器中的文档：

[http://symfony.com/doc/current/book/security.html#retrieving-the-user-object](http://symfony.com/doc/current/book/security.html#retrieving-the-user-object)

```
public function indexAction()
{
    $user = $this->getUser();

    if($user->isAuthenticated()) {
        // Stuff
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:29:16.977

您将需要两个捆绑包的路由位于同一防火墙之后`$user = $this->getUser();`才能工作。然后，如果您希望站点的某个部分未经身份验证，则可以使用 ACL 允许匿名访问。

```
firewalls:
    site:
        pattern:    ^/
        anonymous: ~
        form_login:
            login_path: /user/login
            check_path: /user/login_check
            post_only: true
            default_target_path: /
        logout:
            path:   /user/logout
            target: /user/

access_control:
    - { path: ^/user/, roles: ROLE_USER} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T14:31:34.777

[您可以在此处](http://symfony.com/doc/current/book/security.html#access-control-in-templates)的 dosc 中找到它。

```
{% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
    {{ 'Welcome ' ~ app.user.username }}
    <a href="{{ path('logout_route') }}">Logout</a>
{% else %}
    <a href="{{ path('login_route') }}">Login</a>
{% endif %} 
```

更改`login_route`并`logout_route`满足您的应用程序的路线。

为什么不想使用 FOSUserBundle？这是一个非常好的捆绑包，由核心成员编写，例如，您可以[在此处](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/views/layout.html.twig)找到此代码。

# javascript - 接下来 3 从这里

> ID：13290771
> 
> 赞同：5
> 
> 时间：2012-11-08T14:18:49.713
> 
> 标签：javascript, jquery, html, css

```
 <tr>
   <td><div class="click">a</div></td>
 </tr>
  <tr>
   <td><div class="click">b</div></td>
 </tr>
  <tr>
   <td><div class="click">c</div></td>
 </tr>
  <tr>
   <td><div class="click">d</div></td>
 </tr>
  <tr>
   <td><div class="click">e</div></td>
 </tr>
  <tr>
   <td><div class="click">f</div></td>
 </tr>
  <tr>
   <td><div class="click">g</div></td>
 </tr>
<tr>
   <td><div class="click">h</div></td>
 </tr>
<tr>
   <td><div class="click">i</div></td>
 </tr>
<tr>
   <td><div class="click">j</div></td>
 </tr>
<tr>
   <td><div class="click">k</div></td>
 </tr>
<tr>
   <td><div class="click">l</div></td>
 </tr><tr>
   <td><div class="click">m</div></td>
 </tr>
<tr>
   <td><div class="click">n</div></td>
 </tr>
<tr>
   <td><div class="click">o</div></td>
 </tr>  
</table> 

$('.click').click(function(){
    $(this).addClass('red');
}) 
```

直播：http : [//jsbin.com/ibofis/1/edit](http://jsbin.com/ibofis/1/edit)

这工作正常，但我想为这个 addClass 添加 3 个下一个元素。

例如，如果我点击**c**那么 class .red 应该添加：**c**，**d**，**e**和**f**。

我怎样才能做到？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T14:28:13.503

试试这个：

```
$('.click').click(function(){
   var $this = $(this).closest('tr');
   $this.nextUntil().filter(':lt(3)').add($this).find('div').addClass('red');
}); 
```

[http://jsbin.com/ibofis/2/edit](http://jsbin.com/ibofis/2/edit)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T14:27:36.717

将此添加到底部，在该`$(this).addClass('red');`行之后：

```
$(this).closest('tr').nextAll(':lt(3)').find('div').addClass('red'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T14:35:18.960

```
$('.click').click(function(){
    $(this).addClass('red');
  var counter = 0, clickedEl = this;
  $('.click').each(function(ind, el){
    if(counter-- > 0){
      $(el).addClass('red');
    }
    if(el == clickedEl){
      counter = 3;
    }
  });
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T14:35:40.473

您可以使用So 使用`.nextAll()`和过滤对象`.slice()` 来切换当前和下 3 个项目的 .red 类：

**这会将 .red 类添加到`TR`.**

```
$(this).closest("tr").toggleClass('red').nextAll().slice(0,3).toggleClass('red'); 
```

[jsBIN](http://jsbin.com/ibofis/26/edit)

**这会将 .red 类添加到`DIV`**

```
$(this).toggleClass('red').closest("tr").nextAll().slice(0,3).each(function() {
    $(this).find(".click").toggleClass("red");
  });
}); 
```

[jsBIN](http://jsbin.com/ibofis/41/edit)

其中`slice(0 = index, 3 = length)`，IE 从第一个对象开始，限制为 3 个对象。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-08T14:36:16.603

这应该可以解决问题：

```
$('.click').click(function(){

var thisIndex = $(this).closest("tr")[0].rowIndex;
  for(i=1; i<4; i++){
$("table").find('tr:eq('+(thisIndex+i)+')').addClass('red');
  $(this).addClass('red');
  }
}); 
```

原谅格式！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-08T14:44:36.123

```
$e =  $('.click');

$e.click(function(){
   $i = $e.index($(this));
   $e.slice($i,$i+4).toggleClass('red');
}); 
```

获取单击元素的**索引**并使用**.slice**获取正确的子集。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-08T14:58:26.180

在 div 示例中添加 id：a div 的 id 为 1，B div 的 id 为 2，依此类推

然后你可以更新你的js如下

```
$('.click').click(function(){
    $(this).addClass('red');
  var id = $(this).attr('id');
  for(i=0;i<4;i++)
  {
     var ids = '#' + id;  
   $(ids).addClass('red');
    id++;
     }
}); 
```

希望它有所帮助

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-08T14:30:59.677

试试这个。如果您想将更改切换`addClass`为`toggleClass`

```
$('.click').click(function(e){
  var clicks=$('.click');
  for(var i=0;i<clicks.length;i++)
      {
        if ($(this).text()==$(clicks[i]).text())
          {
             for(j=i;j<i+4;j++)
             {
               if ($(clicks[j])!=undefined) {
               $(clicks[j]).addClass("red");}
             }
          }
      }

}); 
```

# php - 将 CSS/JS 文件从链接加载到文本框

> ID：13290772
> 
> 赞同：1
> 
> 时间：2012-11-08T14:19:11.000
> 
> 标签：php, input, anchor, textinput

我正在寻找建议和代码示例以获取文件并将其加载到文本区域中。让我提供更多细节。

我的代码搜索一个文件，并且在该文件中有一个用于附加 CSS 文件的数组。我正在寻找一种在单击按钮后将 CSS 文件加载到文本区域的方法。

**每个文件都包含以下内容：**

```
$CSS = array(file.css); 
```

**现在，我怎样才能得到：**

```
<a href="file.css">CSS</a> 
```

**或者**

```
<button onclick="myFunction()">CSS</button> 
```

**在这里加载：**

```
<textarea id="filecontent" name="filecontent" cols="80" rows="10">".$filecontent."</textarea> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:24:37.727

如果它在同一个域上，你可以使用 jQuery

```
function myFunction(){
    $.ajax({ 
         url: 'css-url', 
         dataType: 'html', 
         cache: false, 
         success(d){ 
            $('#filecontent').val(d);
         });
} 
```

就这么简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:23:40.100

您可以通过以下方式获取文件的内容：`file_get_contents($filename);`

```
<textarea id="filecontent" name="filecontent" cols="80" rows="10">".file_get_contents($filename)."</textarea> 
```

但是您应该检查，没有人可以从您的文件系统中打开文件（密码文件）。

# sql-server - T-SQL 跨行除值

> ID：13290775
> 
> 赞同：0
> 
> 时间：2012-11-08T14:19:12.747
> 
> 标签：sql-server, tsql, default-value, between, divide

我在表中有以下列和数据：

```
PeriodID Days
1        NULL
2        NULL
3        NULL
4        NULL
5        NULL 
```

然后我有几天应该跨行划分如下：

1.  如果天数 < 5（例如 2），我将拥有：

    ```
    PeriodID Days
    1        NULL
    2        NULL
    3        NULL
    4        1
    5        1 
    ```

2.  如果 days >= 5 并且 days%5=0（例如 5），我将拥有：

    ```
    PeriodID Days
    1        1    
    2        1    
    3        1    
    4        1    
    5        1 
    ```

3.  如果 days > 5 并且 days%5!=0（例如 12）我将拥有：

    ```
    PeriodID Days
    1        3    
    2        3    
    3        2    
    4        2    
    5        2 
    ```

我可以通过循环来做到这一点，我希望使用一些智能技术或 T-SQL 函数来获得更好的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:34:13.603

这应该为你做：

```
DECLARE @numDays int
SET @numDays = 12

UPDATE someTable
SET Days = CASE WHEN @numDays < 5 
                  THEN CASE WHEN @numDays >= 6 - PeriodId THEN 1 ELSE NULL END
                ELSE FLOOR((@numDays + 5 - PeriodId) / 5)
           END 
```

# coldfusion - 如何将此 URL 重写为重定向页面？

> ID：13290778
> 
> 赞同：0
> 
> 时间：2012-11-08T14:19:15.587
> 
> 标签：coldfusion, url-rewriting

我在托管服务器 (Hostek.com) 上使用 Microsoft-IIS/7.5

我有一个现有的网站，在 Google 中有 2,820 个索引链接。您可以通过以下方式在 Google 上搜索查看结果：site:flyingpiston.com 大多数页面都使用 section、makerid 或 bikeid 来获取正确的信息。大多数链接如下所示：

```
flyingpiston.com/?BikeID=1068
flyingpiston.com/?MakerID=1441
flyingpiston.com/?Section=Maker&MakerID=1441
flyingpiston.com/?Section=Bike&BikeID=1234 
```

在新站点上，我正在使用 .htaccess 进行 URL 重写。新的 URL 将如下所示：

```
flyingpiston.com/bike/1068/
flyingpiston.com/maker/1123/ 
```

基本上，我只想使用我的 htaccess 文件来引导任何带有“？”的请求。问号直接在它的coldfusion页面中调用redirect.cfm。在此页面上，我将使用 ColdFusion 编写自定义 301 重定向。ColdFusion 的重定向如下所示：

```
<cfheader statuscode="301" statustext="Moved Permanently">
<cfheader name="Location" value="http://www.newurl/bike/1233/">
<cfabort> 
```

那么，如果我想将带有问号的所有内容推送到特定页面，我的 htaccess 文件需要看起来像什么？这是我尝试过的，但它不起作用。

```
RewriteEngine on
RewriteRule ^? /redirect.cfm [NS,L] 
```

更新。使用下面的建议，我正在使用这个规则：

```
RewriteRule \? /redirect/redirect.cfm [NS,L] 
```

尝试推送此请求

```
http://flyingpiston2012-com.securec37.ezhostingserver.com/?bikeid=1235 
```

到这个页面：

```
http://flyingpiston2012-com.securec37.ezhostingserver.com/redirect/redirect.cfm 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:12:17.950

您尝试的方法不起作用有几个原因。

第一个是 RewriteRule 使用正则表达式，并且`?`是正则表达式元字符，因此需要使用反斜杠 ( `\?`) 对其进行转义以告诉它匹配文字问号字符。

但是，问题的第二部分是[**RewriteRule**](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)的正则表达式仅针对 URL 的文件名部分进行测试 - 它**专门排除了查询字符串**。

为了匹配查询字符串，您需要使用[**RewriteCond**](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)指令，放置在规则之前的行（但应用*在*RewriteRule 匹配和替换之间），充当附加过滤器。有用的一点是您可以指定要匹配的 URL 的哪一部分（以及使用非正则表达式测试的选项）。

考虑到这一切，使用查询字符串匹配/重写请求**的最简单方法**是：

```
RewriteCond %{QUERY_STRING} .
RewriteRule .* /redirect/redirect.cfm 
```

这`%{QUERY_STRING}`是正则表达式的测试对象（CF 的 CGI 范围内的所有内容都可以在这里使用，也可以使用其他一些东西 - 请参阅文档[中的服务器变量框](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)）。

单曲`.`只是说“确保匹配的项目有任何单个字符”

目前，此规则将保留现有的查询字符串 - 如果您想丢弃它，您可以将 a`?`放在替换 URL 的末尾。（如果您需要在 URL 上使用查询字符串*而不*丢弃旧版本，请使用该`[QSA]`标志。）

在相反的方向，您将丢失 URL 的文件名部分 - 为了保留它，您可能希望使用自动整体匹配捕获将其作为 PATH_INFO 附加到替换部分`$0`。

这两件事一起提供：

```
RewriteCond %{QUERY_STRING} .
RewriteRule .* /redirect/redirect.cfm/$0? 
```

最后一件事是你要防止无限循环——上面的规则去掉了查询字符串，所以它总是会失败 RewriteCond，但最好是安全的（特别是如果你可能需要添加一个查询字符串），你可以使用额外的 RewriteCond：

```
RewriteCond %{QUERY_STRING} .
RewriteCond %{REQUEST_URI} !/redirect/redirect\.cfm
RewriteRule .* /redirect/redirect.cfm/$0? 
```

多个 RewriteCond 组合为 AND，并且`!`否定匹配。

您当然可以将所需的任何标志添加到 RewriteRule 以使其按需要运行。

# codeigniter - 使用带有 codeigniter 的 mpdf 生成空白输出

> ID：13290779
> 
> 赞同：0
> 
> 时间：2012-11-08T14:19:24.650
> 
> 标签：codeigniter, pdf-generation, mpdf

我一直在流动这篇[文章](http://www.badcaffeine.com/index.php/blog/comments/Using-mpdf-with-codeigniter-to-generate-pdfs-from-html-and-css/)以生成 pdf，但输出为空白并且没有显示错误，我放了：

```
public function generate_pdf()
{
    $this->load->library('mpdf');
    $mpdf=new mPDF('utf-8','A4');
    $mpdf->WriteHTML('<p>HTML content goes here...</p>');
    $mpdf->Output();
} 
```

当我输入：

```
public function generate_pdf()
{
    $this->load->library('mpdf');
    $mpdf=new mPDF('utf-8','A4');
    $mpdf->debug = true;
    $mpdf->WriteHTML('<p>HTML content goes here...</p>');
    $mpdf->Output();
} 
```

提到这个[答案](https://stackoverflow.com/a/8123433/874800)，我得到这个错误：

```
Output has already been sent from the script - PDF file generation aborted. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T14:56:22.720

它正在使用 **ob_end_clean()**擦除输出缓冲区并关闭输出缓冲

```
public function generate_pdf()
{
   ob_end_clean();
   $this->load->library('mpdf');
   $mpdf=new mPDF('utf-8','A4');
   $mpdf->debug = true;
   $mpdf->WriteHTML('<p>HTML content goes here...</p>');
   $mpdf->Output();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:22:37.450

一些输出已经从您的脚本发送到浏览器。请检查您的源代码。您可能还想使用[输出缓冲](http://php.net/manual/en/book.outcontrol.php)。

# c# - 铸造 LinkBut ton Telerik

> ID：13290781
> 
> 赞同：0
> 
> 时间：2012-11-08T14:19:12.630
> 
> 标签：c#, asp.net, telerik

当单击它时，我在 Telerik 网格中有一个 LinkBut​​ton，它会更新数据库。问题出现在第一行，我收到一个错误，我无法将 radgrid 转换为 linkBut​​ton。有人可以阐明一点。这是错误消息。

> Telerik.Web.UI.RadGrid' 输入'System.Web.UI.WebControls.LinkBut​​ton

这是我的方法：

```
protected void rad_grdCompleteRequest(object sender, EventArgs e)
{
    LinkButton btnCompleteRequest = (LinkButton)sender;
    int requestID = Convert.ToInt32(btnCompleteRequest.Attributes["RequestID"]);
    SqlManager.UpdateRequest(requestID, 3);
    Response.Redirect(Request.RawUrl);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:44:06.800

请尝试使用以下代码片段。

**.aspx**

// 正常模式

```
<telerik:GridTemplateColumn>
                    <ItemTemplate>
                        <asp:LinkButton ID="LinkButton1" runat="server" OnClick="LinkButton1_Click">LinkButton</asp:LinkButton>
                    </ItemTemplate>
</telerik:GridTemplateColumn> 
```

// 编辑模式

```
<telerik:GridTemplateColumn>
                    <EditItemTemplate>
                        <asp:LinkButton ID="LinkButton1" runat="server" OnClick="LinkButton1_Click">LinkButton</asp:LinkButton>
                    </EditItemTemplate>
</telerik:GridTemplateColumn> 
```

**.aspx.cs**

```
protected void LinkButton1_Click(object sender, EventArgs e)
{
    LinkButton LinkButton1 = sender as LinkButton;
    // Do your logic here
} 
```

如果您有任何疑虑，请告诉我。

# facebook - 什么是正确的方法，FB Apps“权限请求”页面

> ID：13290783
> 
> 赞同：-1
> 
> 时间：2012-11-08T14:19:34.830
> 
> 标签：facebook, permissions

我在“权限请求”页面中测试了我们的 Facebook 应用程序。

根据本网站的描述， [http://developers.facebook.com/docs/howtos/login/server-side-login/#step5](http://developers.facebook.com/docs/howtos/login/server-side-login/#step5)

(A) 正确如果用户决定在登录对话框中拒绝授权您的应用程序，他们将被重定向到：

* * *

```
YOUR_REDIRECT_URI?
 &error_reason=user_denied
 &error=access_denied
 &error_description=The+user+denied+your+request.
 &state=YOUR_STATE_VALUE
 ~~~~~~ 
```

* * *

(B) 然而，我们的测试结果(17/Oct/2012)

* * *

```
 &error_reason=user_denied
 &error=access_denied
 &error_description=The+user+denied+your+request.
 &0=13504605426376027014824690496996#_=_
 ~~ 
```

* * *

(A) 和 (B) 之间存在差异。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:27:32.943

尝试这个

```
if($user) {

    $me = $fb->api('/me'); 
    } else {
$url =   "https://graph.facebook.com/oauth/authorize?"
                ."client_id=app_idxxxxxxxxx&"
                ."redirect_uri=http://apps.facebook.com/app_idxxxxxxxxx/&"
                ."scope=user_photos,publish_stream";
    echo "<script language=javascript>window.open('$url', '_parent', '')</script>";

        exit();
} 
```

# android - 如何在 Android 中存储密钥？

> ID：13290787
> 
> 赞同：2
> 
> 时间：2012-11-08T14:19:41.153
> 
> 标签：android, account, encryption, secret-key

在我的应用程序中，我正在根据设备 ID + 随机乱码生成密钥。如果用户将数据从一台设备传输到另一台设备，那么以一种可以轻松检索的方式存储这些密钥的最安全方法是什么？

我正在谈论将密钥存储在一些外部存储中，例如：gmail 或其他类似服务器的环境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T23:16:57.583

“易于转移的密钥”是一个矛盾的说法，因为密钥的主要目的是，嗯，不可能被猜测或复制。这就是为什么我建议在每个用户设备上生成唯一的密钥并使用它们对存储在该特定设备上的数据进行编码（而不是其他任何地方）。

当您传输数据时，您可能会要求用户创建密码，并使用该密码加密传输的数据。并要求用户在接收设备上输入相同的密码，以便解密传输并再次加密，但使用唯一的设备密钥。

# c - 如何允许以任何顺序获取非选项参数？

> ID：13290788
> 
> 赞同：4
> 
> 时间：2012-11-08T14:19:13.807
> 
> 标签：c, getopt

我有一个 C 程序，它期望使用多个选项和 1 个非选项参数（即没有关联的选项字母）调用，并使用 getopt 解析这些选项。例如，它可以被调用：

示例 1： `myProgram -a "aParam" -b "bParam" "xParam"`

我一直在使用 SLES10，并且这些选项按任何顺序工作。例如，非选项参数“xParam”可以先出现：

示例 2： `myProgram "xParam" -a "aParam" -b "bParam"`

但是，在 SLES11 中进行测试时，似乎 getopt 一到达非选项参数就停止处理，因此上面的示例 2 不起作用。

我已经阅读了 getopt 手册页，发现这可能是相关的：

> 如果 optstring 的第一个字符是 '+' 或设置了环境变量 POSIXLY_CORRECT，则一旦遇到非选项参数，选项处理就会停止。

我不确定 SLES11 是否默认设置 POSIXLY_CORRECT。在 SLES11 中获得旧的 SLES10 getopt 行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:46:12.470

事实证明，默认情况下它重定向到 _posix_getopt()，这导致了我上面描述的行为。

我最终找到的可能解决方案：

1.  请改用 getopt_long()。这似乎没有 posix 等价物。
2.  定义 _GNU_SOURCE，它会停止重定向。
3.  手动重新排序参数，可能使用包装器 shell 脚本。

# sql - 删除此 ISNULL 语句是否有任何潜在问题？

> ID：13290797
> 
> 赞同：0
> 
> 时间：2012-11-08T14:19:50.417
> 
> 标签：sql, sql-server, sql-server-2008, tsql, query-optimization

最近我们发现了一个长时间运行的过程，我的一位同事指出，由于这篇文章中指出的原因，在 where 子句中删除 ISNULL 会加快速度。[在 SQL Server 中使用 ISNULL() 时是否存在任何性能问题？](https://stackoverflow.com/questions/8924913/is-there-is-any-performance-issue-while-using-isnull-in-sql-server). 我做了一些谷歌搜索，但无法确定丢失数据是否有任何危险。我知道如果你说这样的话

```
WHERE ID NOT IN (SELECT MemberID FROM Person WHERE MemberId IS NOT Null) 
```

并且 MemberId 是可空的，如果您不包含“IS NOT NULL”，您将不会得到任何匹配，但我认为这是一个不同的问题？也许不吧？

这是我的同事提议的改变。

```
where ISNULL(ct.DisabilityBenefitsConnectAuthorized,0) = 1 
```

会成为

```
where ct.DisabilityBenefitsConnectAuthorized = 1 
```

它似乎没有影响结果，但我不能 100% 确定它不会，我们只是不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:37:32.387

**为什么不通过一个简化的示例自己尝试一下**，例如：

```
declare @x bit

--@x is currently null
if isnull(@x,0)=1 begin print 'is one!' end else begin print 'not one!' end
if @x=1 begin print 'is one!' end else begin print 'not one!' end

set @x=0
if isnull(@x,0)=1 begin print 'is one!' end else begin print 'not one!' end
if @x=1 begin print 'is one!' end else begin print 'not one!' end

set @x=1
if isnull(@x,0)=1 begin print 'is one!' end else begin print 'not one!' end
if @x=1 begin print 'is one!' end else begin print 'not one!' end 
```

输出：

```
not one!
not one!
not one!
not one!
is one!
is one! 
```

基于以上，看起来你可以删除 ISNULL()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:22:21.940

这种改变会很好。

既不也不`NULL`等于`0`，`1`因此结果将是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:22:35.623

> MemberId 是可空的，如果您不包含“IS NOT NULL”，您将不会得到任何匹配，但我认为这是一个不同的问题？也许不吧？

不它不是。您必须在内部查询的子句中测试可空`MemberID`值。`WHERE`如果表中有任何`NULL`值`MemberID`，您将不会获得任何值`Person`。`LEFT JOIN`如果您使用with`WHERE leftids IS NULL`而不是谓词可能会更好`IN`，它更安全。

# javascript - IE中动态生成onclick触发错误事件

> ID：13290799
> 
> 赞同：1
> 
> 时间：2012-11-08T14:19:53.443
> 
> 标签：javascript, internet-explorer

因此，我设置了一个 4 窗口框架集，以便在加载主内容页面时，它会更改左侧框架菜单上的菜单选项。在 FF 和 Chrome 中一切正常，但 IE 给我带来了问题。我认为问题在于javascript。

在 IE 中，菜单项可以正确更改文本，但单击时似乎触发了错误的链接。[我在这里](http://www.olivestreet.com/test/home.htm)有一个示例设置。

单击左侧的客户登录，然后在主要内容区域中注册。从这里，如果您点击新订单/浏览，您将在使用 FF 或 Chrome 时到达创建订单屏幕。在 IE 中，您会发现自己回到了登录屏幕。

我需要帮助以使左侧的菜单链接在 IE7 中正常工作。

# c# - 如何在 Visual C# 中将数据源更改为 Microsoft SQL Server？

> ID：13290804
> 
> 赞同：1
> 
> 时间：2012-11-08T14:20:22.603
> 
> 标签：c#, sql, sql-server

我正在使用本[教程](http://razibdeb.wordpress.com/2011/01/23/sql-server-2008-basics-connection-with-vs2010/)，但我被困在这[部分](http://razibdeb.files.wordpress.com/2011/01/ms-sql.png)。该指南告诉我选择“Microsoft SQL Server”，但是这不包含在我的计算机选项中。我只有“Microsoft Database File”、“Microsoft Server Compact”和“Microsoft Database Server File”。

如何添加“Microsoft SQL Server”选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:47:05.933

如果您的应用程序是 Web 应用程序，那么您可以按照教程中显示的方式进行操作，

但是如果你是 WPF 应用程序的 Winforms，你不能用 Visual Studio Express 来做。

还有其他方法可以使用 SqlConnection、SqlCommand 对象等进行连接，它们不是设计时的……但是你可以使用它们……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:52:31.333

我不认为 express 版本可以本地连接到 SQL server。我似乎找不到任何关于此的文档，但如果我没记错的话，这是我们回到专业的原因之一。无论如何，也许这篇文章会有所帮助：[如何将 Visual Studio 2010 Express C# 连接到 SQL Server Express](https://stackoverflow.com/questions/9847688/how-to-connect-visual-studio-2010-express-c-sharp-to-sql-server-express)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:36:07.863

请从该[部分](http://razibdeb.files.wordpress.com/2011/01/ms-sql.png)中选择**其他**选项 ，然后从该列表中选择“.NET Framework Data Provider for SQL Server”。请尝试让我知道

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T18:28:11.027

也许您缺少某些组件尝试下载[http://www.microsoft.com/web/downloads/platform.aspx](http://www.microsoft.com/web/downloads/platform.aspx)

# c# - 遍历文件结构

> ID：13290812
> 
> 赞同：-1
> 
> 时间：2012-11-08T14:20:59.117
> 
> 标签：c#, .net, loops

如果我在 Web 服务上有一个类似的目录结构，它会向我发送我请求的目录中的文件和文件夹列表。您将如何遍历整个结构。没有递归搜索，因此必须一次拉出每个目录。我可以获得我请求的目录内容，但它没有列出任何子目录信息。我试图想办法用 for 循环或 for each 循环来做到这一点，但我无法想出任何办法。我没有编写 Web 服务，所以我不能在其中包含递归目录搜索。

```
Pictures
    photo1.png
    photo2.png
    TestFolder1
        April.png
        MyPictures
             ProfilePic.png
    TestFolder2
        2012
            August
                Photos
                    photo3.png
                    photo4.png 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:24:19.923

您可能正在寻找*树遍历算法*：

*   [在c#中遍历对象树](https://stackoverflow.com/questions/443695/traversing-a-tree-of-objects-in-c-sharp)
*   [具有大量文件的目录结构的树遍历算法](https://stackoverflow.com/questions/1921302/tree-traversal-algorithm-for-directory-structures-with-a-lot-of-files)
*   [如何：遍历目录树](http://msdn.microsoft.com/en-us/library/bb513869.aspx)

# javascript - 在javascript中对两个值求和

> ID：13290822
> 
> 赞同：3
> 
> 时间：2012-11-08T14:21:26.253
> 
> 标签：javascript, jquery, onclick, sum

我认为这将是一个愚蠢的问题，但它就在这里。

我需要动态添加一个 div 并根据上次添加的 div 的先前添加元素的 ID 给它 ID + 1。

div是

```
<div id="file-uploader-0" class="file-uploader"></div> 
```

所以我粗略地得出了那个代码：

```
$('#addOneMoreFileOrGroup').on('click', function(){

    var latestFileUploaderId = $('.well-large .file-uploader').last().attr('id').split('-')[2] + 1;

    $('.well-large .control-group:last').after('<div class="control-group deal-type-online">  \
            <label class="control-label">File / File Group Title:</label> \
            <div class="controls"> \
                <input class="span4 file-title" type="text"> \
                <span class="question label label-warning" data-title="File / Group Name:" data-content="Name for your file or group of related files (for example your brand logotype in different file formats)." data-original-title="">?</span> \
                <div id="file-uploader-' + latestFileUploaderId + '" class="file-uploader"></div> \
            </div> \
        </div>');

    }); 
```

但问题是，最后我收到“file-uploader-01”、“file-uploader-011”、“file-uploader-0111”。

我尝试使用“latestFileUploaderId++”，它给我正确的结果一次为“1”，然后为“11”、“111”、“1111”。

感谢您的提示和帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:26:00.267

改变这个：

```
var latestFileUploaderId = $('.well-large .file-uploader').last().attr('id').split('-')[2] + 1; 
```

对此：

```
var latestFileUploaderId = parseInt($('.well-large .file-uploader').last().attr('id').split('-')[2],10) + 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:23:33.060

您正在将字符串添加到数字中，这会导致`+`运算符进行字符串连接。

首先将字符串转换为数字。

```
var latestFileUploaderId = parseFloat($('.well-large .file-uploader').last().attr('id').split('-')[2]) + 1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T14:24:16.803

将字符串从 id 转换为整数以正确递增：

```
var lastID = parseInt($('.well-large .file-uploader').last().attr('id').split('-')[2]);
var latestFileUploaderId = lastID + 1; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T14:24:31.253

```
var latestFileUploaderId = parseInt($('.well-large .file-uploader').last().attr('id').split('-')[2],10) + 1; 
```

您正在连接一个字符串和一个数字...... parseInt 会将字符串转换为其数值，然后添加将起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T14:24:38.523

你应该使用`parseInt`：

```
var latestFileUploaderId = parseInt($('.well-large .file-uploader').last().attr('id').split('-')[2]) + 1; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-08T14:24:48.240

您可以使用`parseInt()`将 id 转换为数字。

```
var latestFileUploaderId = parseInt($('.well-large .file-uploader').last().attr('id').split('-')[2]) + 1; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-08T14:25:07.740

```
$('.well-large .file-uploader').last().attr('id').split('-')[2] 
```

是一个字符串。您需要将其解析为 int(float)。尝试使用 parseInt、parseFloat

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-08T14:26:50.063

您需要将值转换为数字。像这样：

```
var latestFileUploaderId = Number($('.well-large .file-uploader').last().attr('id').split('-')[2]) + 1; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-11-08T14:28:47.237

正如其他人所说，您需要先将变量更改为数字，但我不会使用 parseInt() 或类似的。相反，乘以 1 的速度要快得多，所以我建议这样做：

```
var last = $('.well-large .file-uploader').last().attr('id').split('-')[2];
var latestFileUploaderId = (last * 1) + 1; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-11-08T14:32:53.590

JavaScript 使用 + 运算符连接在您​​的情况下发生的字符串。只有数字类型是算术总结的。为了增加 ID，您必须先将其转换为整数。

```
console.log ('1' + 1 ); 
String '11'

console.log( parseInt('1') + 1 )
Int 2 
```

# php - 字符集不起作用 - 西班牙语字符

> ID：13290824
> 
> 赞同：1
> 
> 时间：2012-11-08T14:21:36.720
> 
> 标签：php, zend-framework, character-encoding

这真的让我发疯。我正在建立一个西班牙语网站（意味着很多拉丁字符）并且我正在使用 Zend 框架。

当我保存它时`á`，它显示为`&Atilde;&iexcl;`. 我知道是字符集编码，但我不明白为什么。

我的头字符集是`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />` 我的数据库是`utf8_general_ci`. 我已经将字符集更改为其他字符集，并且总是出现同样的问题。

当我查看我的数据库时，保存的是一个`á`

知道为什么会这样吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:44:05.080

这是摆脱编码头痛的秘诀：

1.  您的数据库、表和字段必须使用 collat​​ion `utf8_unicode_ci`。
2.  确保您的代码（HTML、PHP... *all*）是 UTF-8 编码的。
3.  始终使用此`meta`标签：`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">`
4.  这很长：

如果您有权访问 MySQL 文件配置`my.cnf`，只需添加以下行：

```
init-connect='SET NAMES utf8' 
```

这告诉 MySQL 以 UTF-8 为每个连接返回结果。

如果您无法编辑`my.cnf`但正在使用 PDO，请以这种方式打开连接：

```
$pdo = new PDO($dsn, $usr, $pwd, array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8')); 
```

如果您不使用 PDO...*开始*使用它，您还在等什么？同时，如果您使用 ext/MySQLi，您可以在每次连接后执行此操作：

```
$mysql->set_charset('utf8'); 
```

或者，如果您使用普通的旧 ext/MySQL：

```
mysql_set_charset('utf8', $connection); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:31:26.640

`á`ASCII 映射之外的字符和其他字符可以用`unicode`.

当您使用`UTF-8`字符集和字符正确存储表中的数据时。

我建议你

*   存储数据之前
*   在您获取数据之前

运行查询`SET NAMES UTF-8`。这将`UTF-8`通过处理 ASCII 映射之外的字符来获取您的数据。

在输出数据时，请确保您正在强制/指导浏览器使用`UTF-8`字符集来打印数据。

# java - 控制ExecutorService每秒最多执行N个任务

> ID：13290825
> 
> 赞同：8
> 
> 时间：2012-11-08T14:21:40.383
> 
> 标签：java, multithreading, concurrency, executorservice

如何控制/限制提交给 a 的任务[`ExecutorService`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)？我有`SMSTask`它发送 SMS 消息，我需要控制执行程序，以便它只能以每秒最多 N 条消息发送。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-08T14:27:10.297

假设您为每个任务创建一条 SMS 消息，您可以使用 ScheduleExecutorService。

```
final Queue<Task> tasks = new ConcurrentLinkedQueue<Task>();
int ratePerSecond = 10;
final ExecutorService es = Executors.newCachedThreadPool();
ScheduledExecutorService ses = Executors.newSingleThreadScheduledExecutor();
ses.scheduleAtFixedRate(new Runnable() {
    @Override
    public void run() {
        final Task task = tasks.poll();
        if (task == null) return;
        es.submit(new Runnable() {
            @Override
            public void run() {
                process(task);
            }
        });
    }
}, 0, 1000/ratePerSecond, TimeUnit.MILLISECONDS); 
```

将任务添加到队列中，它们将以每秒 10 个的速率处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T14:26:46.600

试试[`RateLimiter`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/RateLimiter.html)番石榴。您必须在池中运行的所有任务之间共享一个实例：

```
final RateLimiter rateLimiter = RateLimiter.create(N)

//and in your task:

rateLimiter.tryAcquire();
sendSms(); 
```

`tryAcquire();`将精确地阻塞一段时间以保持`N`频率。

### 也可以看看：

*   [*RateLimiter - 发现 Google Guava*](http://nurkiewicz.blogspot.no/2012/09/ratelimiter-discovering-google-guava.html)

# c# - 无法在 C# 控制台应用程序中打印土耳其语特定字符

> ID：13290828
> 
> 赞同：1
> 
> 时间：2012-11-08T14:21:29.380
> 
> 标签：c#, windows, localization

以下源代码：

```
Console.WriteLine("01- ııı");
Console.WriteLine("02- İİİ");
Console.WriteLine("03- ööö");
Console.WriteLine("04- ÖÖÖ");
Console.WriteLine("05- üüü");
Console.WriteLine("06- ÜÜÜ");
Console.WriteLine("07- şşş");
Console.WriteLine("08- ŞŞŞ");
Console.WriteLine("09- ğğğ");
Console.WriteLine("10- ĞĞĞ"); 
```

给我这个输出：

```
01- iii
02- III
03- ööö
04- ÖÖÖ
05- üüü
06- ÜÜÜ
07- sss
08- SSS
09- ggg
10- GGG 
```

01,02,07,08,09,10 行错误。

我知道所有这些字母都是 UNICODE 字母。它们应该正确显示。

```
OS: Windows 7 Enterprise 64-bit.
Current System Locale: English (United States)
Current Location: Turkey
Cuurent Language for non-unicode programs:English (United States) 
```

任何解决方案或建议将不胜感激。

# java - 获取没有字符串键的 Json 值 - Java JSONObject

> ID：13290833
> 
> 赞同：1
> 
> 时间：2012-11-08T14:21:57.650
> 
> 标签：java, android, json

当你有字符串键时，很容易从 JSON 中获取一个值，但是如果你有这样的情况怎么办：

```
{
  "images":["URL1"]
} 
```

而且数组里面没有钥匙？我使用这段代码：

```
JSONArray imagesArr = propertiesjsonObject.getJSONArray("images");
for (int y=0; i<imagesArr.length(); y++)
{
  JSONObject imagesJsonObject = imagesArr.getJSONObject(y);
  String str_image_url = imagesJsonObject.get("HOW TO GET THE VALUES HERE?");
} 
```

可能是超级简单的。很抱歉问，但我找不到合适的例子。PS。我使用：导入 org.json.JSONArray；导入 org.json.JSONObject；

PS2：目前数组中只有一个元素，但将来我想可能会有更多。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T14:31:15.283

试试这个：

```
ArrayList<String> urls = new ArrayList<String>();
JSONArray imagesArr = propertiesjsonObject.getJSONArray("images");
for (int i = 0; i < imagesArr.length(); i++) {
    String str_image_url = imagesArr.getString(i);
    urls.add(str_image_url);
} 
```

urls 是一个包含所有 url 的数组

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:27:55.873

```
String str_image_url = imagesArr.getString(0);//you specify position in array here 
```

# ios - NSOperationQueue 和后台支持

> ID：13290841
> 
> 赞同：4
> 
> 时间：2012-11-08T14:22:27.077
> 
> 标签：ios, background, nsoperation, nsoperationqueue

我在制定一个有用的策略来支持`NSOperationQueue`课堂背景时遇到了一些问题。特别是，我有一堆`NSOperation`s 执行以下操作：

*   从网络下载文件
*   解析文件
*   在 Core Data 中导入数据文件

这些操作被插入到串行队列中。一旦一个操作完成，下一个就可以开始了。

当应用程序进入后台时，我需要停止（或继续）操作。从这些讨论（[AFNetworking 有后台支持吗？](https://stackoverflow.com/questions/7800614/does-afnetworking-have-backgrounding-support)和[NSOperations 队列和处理应用程序退出](https://stackoverflow.com/questions/1566230/queue-of-nsoperations-and-handling-application-exit)）我看到最好的方法是取消操作并`isCancelled`在每个操作中使用属性。然后，根据该属性检查操作的关键点，它允许在应用程序进入后台时回滚（正在运行的操作的）执行状态。

基于突出背景支持的 Apple 模板，我该如何管理类似情况？我可以简单地取消操作或等待当前操作完成吗？详情见评论。

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    bgTask = [application beginBackgroundTaskWithExpirationHandler:^{

        // Do I have to call -cancelAllOperations or
        // -waitUntilAllOperationsAreFinished or both?

        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];

    // Start the long-running task and return immediately.
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // What about here?

        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    });
} 
```

先感谢您。

**编辑**

如果`NSOperation` `main`方法执行下面的代码，如何遵循*响应取消事件*模式？

```
- (void)main
{
    // 1- download

    // 2- parse
    // 2.1 read file location
    // 2.2 load into memory

    // 3- import
    // 3.1 fetch core data request
    // 3.2 if data is not present, insert it (or update)
    // 3.3 save data into persistent store coordinator
} 
```

我描述的每种方法都包含各种步骤（非原子操作，下载操作除外）。因此，在每个步骤中都可能发生取消（以未预定义的方式）。我可以`isCancelled`在每一步之前检查财产吗？这行得通吗？

**编辑 2 基于 Tammo Freese 的编辑**

我明白你的编辑代码是什么意思。但我担心的是以下几点。取消请求（用户可以按下主页按钮）可以在`main`执行过程中的任何时候发生，因此，如果我只是返回，操作的状态将被破坏。我需要在返回之前清理它的状态吗？你怎么看？

当我使用同步操作（在它们运行的​​同一线程中以同步方式执行的操作）时，我描述的问题可能会发生。例如，如果`main`正在下载文件（通过 执行下载`+sendSynchronousRequest:returningResponse:error`）并且应用程序处于后台，会发生什么情况？如何处理这样的情况？

```
// download
if ([self isCancelled])
    return;

// downloading here <-- here the app is put in background 
```

显然，我认为当应用程序被置于前台时，该操作会再次运行，因为它已被取消。换句话说，它被迫不保持其状态。我错了吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T15:21:48.087

如果我理解正确，你有一个`NSOperationQueue`，如果你的应用程序进入后台，你想

1.  取消所有操作并
2.  等到取消处理完毕。

通常这不应该花费太多时间，所以这样做就足够了：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    [_queue cancelAllOperations];
    [_queue waitUntilAllOperationsAreFinished];
} 
```

此处“过多时间”的定义约为 5 秒：如果您阻塞`-applicationDidEnterBackground:`的时间超过此时间，您的应用程序将被终止并从内存中清除。

假设完成取消的操作需要超过 5 秒。然后你必须在后台等待（解释见评论）：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
        // If this block is called, our background time of normally 10 minutes
        // is almost exceeded. That would mean one of the cancelled operations
        // is not finished even 10 minutes after cancellation (!).
        // This should not happen.
        // What we do anyway is tell iOS that our background task has ended,
        // as otherwise our app will be killed instead of suspended.
        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];

    // Normally this one is fast, so we do it outside the asynchronous block.
    [_queue cancelAllOperations];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        // Wait until all the cancelled operations are finished.
        [_queue waitUntilAllOperationsAreFinished];

        // Dispatch to the main queue if bgTask is not atomic
        dispatch_async(dispatch_get_main_queue(), ^{
            [application endBackgroundTask:bgTask];
            bgTask = UIBackgroundTaskInvalid;
        });
    });
} 
```

所以基本上我们告诉iOS我们需要一些时间来执行一个任务，当任务完成的时间用完时，我们告诉iOS我们的任务已经结束。

**编辑**

要回答您编辑中的问题：要响应取消，只需尽可能检查取消，然后从该`-main`方法返回。取消的操作不会立即完成，而是在`-main`返回时完成。

```
- (void)main
{
    // 1- download
    if ([self isCancelled]) return;

    // 2- parse
    // 2.1 read file location

    // 2.2 load into memory
    while (![self isCancelled] && [self hasNextLineToParse]) {
        // ...
    }

    // 3- import

    // 3.1 fetch core data request
    if ([self isCancelled]) return;

    // 3.2 if data is not present, insert it (or update)
    // 3.3 save data into persistent store coordinator
} 
```

如果在 中根本不检查取消标志`-main`，则操作不会对取消做出反应，而是一直运行直到完成。

**编辑 2**

如果一个操作被取消，除了 isCancelled 标志设置为 true 之外什么都不会发生。我原始答案中的上述代码在后台等待，直到操作完成（对取消做出反应或只是完成，假设取消它不需要 10 分钟）。

当然，在对`isCancelled`我们的操作做出反应时，您必须确保将操作保持在未损坏的状态，例如，直接在下载后（忽略数据），或在写入所有数据后。

你是对的，如果一个操作被取消但当你切换回前台时仍在运行，该操作将完成下载，然后（如果你这样编程）做出反应取消并基本上丢弃下载的数据。

您可以做的是不取消操作，而是等待它们完成（假设它们需要不到 10 分钟）。为此，只需删除该行`[_queue cancelAllOperations];`。

# sql - SQL Server 中的等效收益返回

> ID：13290847
> 
> 赞同：2
> 
> 时间：2012-11-08T14:22:29.207
> 
> 标签：sql, sql-server, view, yield

我在 SQL Server (DWH) 中写下一个视图，用例伪代码是：

```
-- Do some calculation and generate #Temp1
-- ... contains other selects

-- Select statement 1
SELECT * FROM Foo
JOIN #Temp1 tmp on tmp.ID = Foo.ID
WHERE Foo.Deleted = 1

-- Do some calculation and generate #Temp2
-- ... contains other selects

-- Select statement 2
SELECT * FROM Foo
JOIN #Temp2 tmp on tmp.ID = Foo.ID
WHERE Foo.Deleted = 1 
```

视图的结果应该是：

```
Select Statement 1
UNION
Select Statement 2 
```

预期的行为与 C# 中的相同`yield return`。有没有办法告诉视图哪些`SELECT`语句实际上是结果的一部分，哪些不是？因为在我需要之前的小计算也包含选择。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:25:26.117

我找到了更好的解决方法。它可能对其他人有帮助。它实际上是将所有计算都包含在`WITH`语句中，而不是在视图核心中进行：

```
WITH Temp1 (ID)
AS
(
    -- Do some calculation and generate #Temp1
    -- ... contains other selects
)

, Temp2 (ID)
AS
(
    -- Do some calculation and generate #Temp2
    -- ... contains other selects
)

-- Select statement 1
SELECT * FROM Foo
JOIN Temp1 tmp on tmp.ID = Foo.ID
WHERE Foo.Deleted = 1

UNION

-- Select statement 2
SELECT * FROM Foo
JOIN Temp2 tmp on tmp.ID = Foo.ID
WHERE Foo.Deleted = 1 
```

结果当然`UNION`是所有外部`SELECT`陈述的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:30:11.057

C# 中的 yield return 一次返回一行，因为它们出现在一些底层函数中。SQL 语句中不存在这个概念。SQl 是基于集合的，在概念上作为一个单元返回整个结果集。（也就是说，有时查询运行缓慢，您会看到缓慢或成批返回的行。）

`TOP`您可以使用（在 SQL Server 中）控制返回的行数。`WHERE`您可以使用语句选择要返回的特定行。但是，您不能指定`UNION`有条件地从某些组件而不是其他组件返回行的语句。

您最接近的可能是：

```
if UseTable1Only = 'Y'
    select *
    from Table1
else if UseTable2Only = 'Y'
    select *
    from Table2
else
    select *
    from table1
    union
    select *
    from table2 
```

您可以使用动态 SQL 执行类似的操作，方法是将语句构造为字符串然后执行它。

# ios - UITableViewCell 中的 UIImageView 重复

> ID：13290850
> 
> 赞同：0
> 
> 时间：2012-11-08T14:22:52.500
> 
> 标签：ios, uitableview, plist, repeat

我有一个错误。我想`UIImageView`在 special 的单元格上显示一个`indexPath.row`，但是当我滚动时这些`UIImageView`重复。示例：我`UIImageView`在单元格`indexPath.row`== 0 上显示我，如果我向下滚动，我`UIImageView`会在`indexPath.row`== 8 的单元格上看到我的。

这是我的代码：

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if(cell == nil) {
            cell = [self getCellContentView:CellIdentifier];

        }

        UILabel *lblTemp1 = (UILabel *)[cell viewWithTag:1];
        UIImageView *imgRead = (UIImageView *)[cell viewWithTag:6];

        [cell.contentView insertSubview:imgRead aboveSubview:lblTemp1];

        contentDictio = [dict objectAtIndex:indexPath.row];

        lblTemp1.text = [contentDictio objectForKey:@"title"];

        NSArray *paths_id = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *basePath_id = ([paths_id count] > 0) ? [paths_id objectAtIndex:0] : nil;
        NSString *path_id = [basePath_id stringByAppendingPathComponent:@"id.plist"];

        NSMutableArray *mut_array_id = [[NSArray arrayWithContentsOfFile:path_id] mutableCopy];

        NSMutableDictionary *c0 = [[NSMutableDictionary alloc] init];

        NSString *idPlistData = [contentDictio objectForKey:@"id"];

        for(c0 in mut_array_id) {
            if([[c0 objectForKey:@"id"] isEqualToString:idPlistData]) {
                [imgRead setImage:[UIImage imageNamed:@"read"]];
            }
            else {
            }
        }
    }

    return cell;
}

- (UITableViewCell *) getCellContentView:(NSString *)cellIdentifier {

    CGRect Label1Frame = CGRectMake(kTableCellSmallMargin*2 + 60, kTableCellSmallMargin, 240, 25);

    UILabel *lblTemp;

    UITableViewCell *cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                                    reuseIdentifier:cellIdentifier] autorelease];

    //Initialize Label with tag 1.
    lblTemp = [[UILabel alloc] initWithFrame:Label1Frame];
    lblTemp.tag = 1;
    lblTemp.backgroundColor = [UIColor clearColor];
    [lblTemp setFont: [UIFont fontWithName:@"HelveticaNeue-CondensedBold" size:15.0]];
    [cell.contentView addSubview:lblTemp];
    [lblTemp release];

    UIImageView *read=[[UIImageView alloc] initWithFrame:CGRectMake(kTableCellSmallMargin, kTableCellSmallMargin, 60, 60)];
    read.backgroundColor=[UIColor clearColor];
    read.tag = 6;
    [cell.contentView addSubview:read];
    [read release];

    return cell;
} 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:32:47.777

该单元格已缓存，因此当您不需要图像时必须将其清除，如下所示：

```
 BOOL found = NO;
    for(c0 in mut_array_id) {
        if([[c0 objectForKey:@"id"] isEqualToString:idPlistData]) {
            [imgRead setImage:[UIImage imageNamed:@"read"]];
            found = YES;
        }
        else {

        }
    }

    if (!found)
    {
        [imgRead setImage:nil];
    } 
```

# jquery - 使用 jquery 在新的浏览器窗口中打开视图

> ID：13290855
> 
> 赞同：0
> 
> 时间：2012-11-08T14:23:00.457
> 
> 标签：jquery, asp.net-mvc

```
 $(".reportCategoryClass").click(function (i) {
                   var reportUrl;
                   reportUrl = "http://bi.mylcchonda.com/UMAP_BI_REPORTS_PROD";
                    window.open("/LLCReportRoute/LLCReportsPopUp?url=" + reportUrl);
                    // window.open("/ControllerName/ActionName?url=" + reportUrl);
                }
}); 
```

window.open 函数打开窗口但在该页面中找不到错误即将到来

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:25:35.603

LLCReportRoute 在站点的根目录中吗？当您在那里使用绝对参考时，这可能是您的问题。要使其相对，请删除开头的“/”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:27:43.397

这是因为 reportUrl。您需要对其进行编码。尝试这个：

```
$(document).ready(function() {
    $(".reportCategoryClass").click(function () {
                       var reportUrl;
                       reportUrl = encodeURIComponent("http://bi.mylcchonda.com/UMAP_BI_REPORTS_PROD");
                        window.open("/LLCReportRoute/LLCReportsPopUp?url=" + reportUrl);

    });
}); 
```

# objective-c - “无法识别的选择器发送到实例”异常错误

> ID：13290859
> 
> 赞同：1
> 
> 时间：2012-11-08T14:23:35.247
> 
> 标签：objective-c, ios

我已经阅读了所有“发送到实例的无法识别的选择器”的答案，但它们似乎不适用于我的情况。

我已经设置了一个像这样的 NSMutableDictionary ......

```
 NSMutableDictionary *ObjectDynamic = [NSDictionary dictionaryWithObjectsAndKeys:pObject, @"pFObject",tObject, @"tFObject",nil]; 
```

然后在稍后的代码中，我试图添加另一个对象/键，用这个......

```
[ObjectDynamic setObject:mySprite forKey:@"pSObject"]; 
```

但是我在那条线上遇到了一个例外，...

> -[__NSDictionaryI setObject:forKey:]: 无法识别的选择器发送到实例

不能像这样添加另一个键/值对吗？

**编辑**

一个简单的错误，我只是想制作一个 NSDictionary 而不是 NSMutableDictionary！无论如何，感谢您的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T14:25:54.430

那是因为您初始化了一个没有`setObject:forKey:`方法的不可变 NSDictionary。改为初始化一个可变的：

```
NSMutableDictionary *ObjectDynamic = [NSMutableDictionary 
    dictionaryWithObjectsAndKeys:pObject, @"pFObject",tObject, @"tFObject",nil]; 
```

从 Xcode 4.4 开始，您还可以使用新的字典文字来非常轻松地初始化不可变字典，然后使用`mutableCopy`.

```
NSMutableDictionary *objectDynamic = [@{@"pFObject" : pObject, 
                                        @"tFObject" : tObject} mutableCopy]; 
```

请注意，在 Objective-C 中，您应该以小写字母开头的变量名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:25:46.257

为了能够更改字典的内容，您需要 make `NSMutableDictionary`，而不是 immutable `NSDictionary`：

```
NSMutableDictionary *ObjectDynamic = [NSMutableDictionary // <<== Here
    dictionaryWithObjectsAndKeys:pObject, @"pFObject",tObject, @"tFObject",nil
]; 
```

# nuget-package - 配置 NuGet 包以在安装时添加生成事件

> ID：13290860
> 
> 赞同：17
> 
> 时间：2012-11-08T14:23:15.857
> 
> 标签：nuget-package, build-events

有谁知道是否可以在 nuspec 文件中添加一些内容，以便在通过 NuGet 安装包时将构建事件前或构建后事件添加到项目中？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-08-26T20:11:30.753

我认为编辑用户的 PostBuildEvent 属性是向项目添加构建后操作的错误方法。我相信推荐的方法是将您的自定义操作放入导入项目文件的 MSBuild 目标中。从[NuGet 2.5](http://docs.nuget.org/docs/release-notes/nuget-2.5)开始，如果您在包中包含一个“构建”文件夹（与内容和工具处于同一级别）并且它包含一个 {packageid}.targets 文件或 {packageid}.props 文件，NuGet 将自动添加一个 Import安装包时添加到项目文件中。

例如，您有一个名为 MyNuGet 的包。您创建一个文件 build\MyNuGet.targets 包含：

```
<?xml version="1.0" encoding="utf-8" ?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <Target Name="MyNuGetCustomTarget" AfterTargets="Build">
        <Message Importance="high" Text="Message from MyNuGetCustomTarget. Configuration: $(Configuration)" />
    </Target>
</Project> 
```

这将创建一个配置为在标准构建目标之后运行的自定义目标。NuGet 将处理在安装时插入 Import 并在卸载时将其删除。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-02T11:01:23.137

这是从 NuGet 包中的 install.ps1 powershell 脚本设置构建事件的更简洁的方法：

```
$project.Properties.Item("PostBuildEvent").Value = "your build event here" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-08T19:18:29.933

不是 .nuspec 文件本身，但您可以`install.ps1`使用 nuspec 将其添加到您的包中。这是我正在做的事情（我不知道这是否是最好的方法，但它确实有效）：

```
param($installPath, $toolsPath, $package, $project)

$project.Properties | where { $_.Name -eq "PreBuildEvent" } | foreach { $_.Value = "copy `"`n`$(ProjectDir)Web.`$(ConfigurationName).config`" `"`$(ProjectDir)Web.config`"" } 
```

# php - 非常简单的 RewriteRule 不起作用

> ID：13290864
> 
> 赞同：3
> 
> 时间：2012-11-08T14:23:43.857
> 
> 标签：php, .htaccess, get

我有 index.php，里面只有一行

```
<?php echo $_GET['a']; ?> 
```

而且我还有一个.htaccess，里面只有两行

```
RewriteEngine on
RewriteRule ^([a-z]+)$ ?a=$1 
```

为什么当我输入时`/ab.cd`出现 404 错误，但如果我输入`/abcd.`它并没有给我一个 404 错误和 PHP 回`abcd`显（没有 url 末尾的点）。

谁能告诉我为什么我的重写规则允许`abcd.`通过而不是给我一个 404 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:27:14.647

**编辑：**

我刚刚在我的开发环境中测试了您的 Rewriterule（独立）并且它有效。它不允许`/abcd.`通过我的 - 它给了我一个 404 错误，所以你的环境中一定有什么东西影响了你的规则。

**-初始后-**

看起来您的句点（。）`/ab.cd`没有在 Rewriterule 中定义 - 只是小写的 az 字符。

利用：

```
RewriteEngine on
RewriteRule ^([a-z.]+)$ ?a=$1
                  ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:27:15.023

您使用的正则表达式`([a-z]+)`仅匹配小写字母“a”到“z”。它永远不会匹配一系列字母后跟一个句点，然后是一系列字母，就像您尝试使用`ab.cd`.

如果您还想匹配句点，则需要`([a-z.]+)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:41:19.990

我刚刚在我的服务器上重建了情况，我得到了所需的 404 错误。我只将`[L]`标志添加到 RewriteRule。

.htaccess

```
RewriteEngine on
RewriteRule ^([a-z]+)$ test.php?a=$1 [L] 
```

测试.php

```
<?php echo $_GET['a']; ?> 
```

是否有任何其他重写规则可能会干扰您的请求？即使在其他包含的文件中？在这种情况下，L 标志可能会对您有所帮助。

# ios - 带有标签栏的应用程序中的屏幕截图大小问题

> ID：13290865
> 
> 赞同：0
> 
> 时间：2012-11-08T14:23:45.557
> 
> 标签：ios, xcode, screenshot, tabbar

我有一个带有标签栏的简单应用程序。视图大小为 480 x 320。标签栏为 49 x 320。但是，当我尝试使用 UIgraphicsbeginimagecontext(self.view.frame.size) 截屏时，我得到的图像为 411 x 320.. 我的背景图像是 480 x 320 并在 ios 模拟器中正确显示。

当我使用 UIgraphicsbeginimagecontext(480x320) 时，屏幕截图底部出现空白区域。

但是，当屏幕被捕获时，背景图像会被 69 个高度像素切割。任何人都知道为什么我的背景图像在模拟器中正确显示但在截屏时被裁剪。或者如果我增加 imagecontext 大小如何捕获所有截屏？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:53:07.253

状态栏是否显示？听起来状态栏（20px）和`UITabBar`（49px）是裁剪额外空间的地方。我想这`self.view`会返回一个`UIViewController`小于您想要的镜头的视图。

如果您只想要背景图像，请尝试减小屏幕截图的大小，或者如果您想要整个屏幕，请尝试定位应用程序主窗口，类似这样

```
UIGraphicsBeginImageContext(self.window.bounds.size);
[self.window.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# javascript - 设置 hasOne 关系 GeddyJS

> ID：13290866
> 
> 赞同：0
> 
> 时间：2012-11-08T14:23:47.633
> 
> 标签：javascript, node.js, geddy

我正在尝试从他们的网站扩展 GeddyJS Todo 教程。我在 Todo 项目中添加了另一个模型 Project，并希望以 Todo-hasOne-Project 的方式在 Todo 和 Project 之间建立关系。

这是我的创建控制器方法中的代码，我在保存 Todo 项后尝试设置关系：

```
todo.save(function(err, data) {
        if(err) {
            params.errors = err;
            self.transfer('add');
        } else {
            geddy.model.Project.getProjectById(todo.parent, function(err, project) {
                if(err) {
                    params.errors = err;
                    self.transfer('add');
                }
                else {
                    todo.setProject(project);
                    self.redirect({ controller: self.name });
                }
            });

        }
    }); 
```

我正在使用一个类方法（getProjectById），它采用 todo 的父属性（项目的 id）从数据库中获取项目。

在我的 Todo 类文件中，我的 hasOne 关系定义如下：

```
this.hasOne('Project'); 
```

我不断收到以下编译器错误：

```
c:\Program Files (x86)\nodejs\node_modules\geddy\node_modules\model\lib\index.js:254
            throw new Error('Item cannot have a hasOne/hasMany association ' +
                  ^
Error: Item cannot have a hasOne/hasMany association if it is not yet saved.. 
```

事实证明，查找示例文档很困难，所以我想我会问网络上最强大的社区。

有人知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:37:05.777

你还在遇到这个问题吗？如果是这样，您可以尝试运行

`$ npm update -g geddy`

这很可能会解决您的问题。

# r - 如何使用文件中的信息来计算其他几个文件的空间平均值？

> ID：13290869
> 
> 赞同：0
> 
> 时间：2012-11-08T14:23:29.537
> 
> 标签：r, binary

假设我有一个名为river 的文件，并且该文件中有一个感兴趣区域的值=1。
我想要作为掩码的文件可以读取为：

```
sd <- file("C:\\lai_28_06.bin", "rb")
river<- readBin(sd, integer(), size=2,  n=360*720, signed=T) 
```

下面给出的代码将从几个二进制文件（366）中提取一个区域，然后计算平均值。如您所见，我使用 (X<-c(450:455) ; Y<-c(140:145) ) 选择了该区域。现在我想做同样的事情，但使用文件“river”中的信息。例如，当“river”=1 时，将相应的值（来自 a 下列出的文件）考虑在内，然后将这些值的总和除以值的数量（只是平均值）。

```
a<-list.files("C:\\New folder (13)", "*.bin", full.names = TRUE)
X<-c(450:455) ; Y<-c(140:145) 
extract<-vector()
# construct a vector of file names and loop through
for (i in 1:366) {
    conne <- file(k[i], "rb")
    file<- readBin(conne, integer(), size=2,  n=360*720, signed=T)
    file2<-t(t(matrix(data=file,ncol=360,nrow=720)))
    extract[i]<-mean(file2[X,Y])
    close(conne)
    }
write.table(extract,"C:\\yeinteg.txt") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:11:26.560

我认为这是您想要的核心（草率但有效）：

```
rivermask<-matrix(NA,nc=360,nr=720)
rivermask[river==1]<-1
mean(file2*rivermask,na.rm=TRUE) 
```

# ios - 在 facebook ios 上分享视频链接

> ID：13290877
> 
> 赞同：0
> 
> 时间：2012-11-08T14:24:20.113
> 
> 标签：ios, facebook, facebook-graph-api

我正在尝试分享我在网站主机中上传的视频链接。但是帖子没有显示我的视频和缩略图。我希望我的帖子如下图所示：

[http://i.stack.imgur.com/UcbTG.png](http://i.stack.imgur.com/UcbTG.png)

反正有没有像这样发布我的视频？

我正在使用 facebook SDK 3.1.1、ARC、Cocos2d 2.0、IOS 5.1；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:55:22.653

是的，如果您按照[https://developers.facebook.com/docs/opengraphprotocol/#audiovideo](https://developers.facebook.com/docs/opengraphprotocol/#audiovideo)提供正确的 Open Graph 标签，您的视频可以嵌入到 News Feed 帖子中。

要完成实际的共享，您应该使用可自定义的[Feed Dialog](https://developers.facebook.com/docs/reference/dialogs/feed/)，它可以在桌面和移动设备上运行。

# php - 正则表达式如何检测不在字符串中的字符

> ID：13290879
> 
> 赞同：0
> 
> 时间：2012-11-08T14:24:29.800
> 
> 标签：php, regex, preg-match

我有一些看起来像这样的主题：

`hu` `ha` `ho` `hi`

我的模式看起来像这样`#^(h.+)$#`

这将我所有的字符串都返回为`true`. 这是意料之中的。现在我只想选择不包含`o`.

**如何向我的正则表达式添加否定条件？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:26:03.043

替换`.`为`[^o]`，它匹配除 之外的所有字符`o`。

```
#^(h[^o]+)$# 
```

表示一个字符类，`[]`前导`^`反转它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:27:13.707

您可以使用否定字符类添加否定条件

所以`[^abcd]`会匹配除`a`, `b`, `c`,之外的任何字符`d`

在您的情况下，它应该是`[^o]`..这将匹配任何字符，除了`o`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T14:42:01.170

为确保字符串不包含`o`字符，请使用负前瞻

```
^(?!.*o) 
```

因此，如果您想检查字符串是否以开头`h`并且没有`o`字符，请使用

```
^(?!.*o)h 
```

其他选项是

```
^h[^o]+$ 
```

您必须使用行尾`$`来确保 h 之后的所有字符都不是`o`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T14:41:51.447

有什么理由需要正则表达式来进行简单的字符检测？

```
if (stripos($your_string, 'h') !== false) {
   ... there's an H in the string ...
} 
```

会更有效率。

# azure - 如何在不使用 azure 诊断的情况下获取角色的 CPU 百分比使用率？

> ID：13290885
> 
> 赞同：2
> 
> 时间：2012-11-08T14:24:37.057
> 
> 标签：azure, azure-diagnostics

在新的 Windows Azure 管理门户中，可以读取有关角色 CPU 使用率的信息。是否可以在角色实例（例如工作角色）中使用门户用于监控的相同 API？我知道 azure diagnostics 可以为我监控这些值，但门户网站设法以某种方式提取这些信息，而无需初始化和启动诊断监视器（不提供诊断连接字符串）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:28:58.760

是的，该视频解释了如何执行此操作（大约 3 分钟开始）： [http ://channel9.msdn.com/Events/Build/2012/3-025](http://channel9.msdn.com/Events/Build/2012/3-025)

# sql-server - SQL Server -- 高效字符串包含超大表

> ID：13290889
> 
> 赞同：1
> 
> 时间：2012-11-08T14:24:50.520
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个当前包含 1000 万条记录的表。

其中一列是`SourceText`类型`nvarchar(4000)`。

我需要一种*非常*有效的方法来搜索 SourceText 以查看它是否包含另一个字符串。

我对表结构具有极大的灵活性——我可以修改插入过程并使用其他更好的索引表来跟踪事物。一种想法是按单词对 SourceText 进行标记并将单词存储在索引表中，然后使用映射表映射到主表。问题是该`SourceText`列可以是任何语言，并且总是有规则 re:parantheses 等。例如，在英语中，如果我使用 ' ' 作为分隔符进行标记，我仍然会得到类似`(Where`而不是 的东西`Where`，这是有问题的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T20:41:26.770

*在没有*SQL Server可选且非常强大的[全文搜索组件的](http://technet.microsoft.com/en-us/library/ms142571%28v=sql.105%29.aspx)情况下实现快速全文搜索将是一个非常有趣和具有挑战性的项目（我认为这是可能的）;-)

# symfony - Symfony2 翻译

> ID：13290903
> 
> 赞同：0
> 
> 时间：2012-11-08T14:25:49.577
> 
> 标签：symfony, translation

根据当前的[翻译文档](http://symfony.com/doc/current/book/translation.html)，Symfony2 在以下位置查找消息文件（即翻译）：

```
the <kernel root directory>/Resources/translations directory;
the <kernel root directory>/Resources/<bundle name>/translations directory;
the Resources/translations/ directory of the bundle. 
```

有什么办法可以强制 Symfony2 调查

```
the <kernel root directory>/Resources/translations/mydirectory directory; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T11:07:50.903

您必须编写自己的翻译加载器`Symfony\Component\Translation\Loader\LoaderInterface`并用`translation.loader`.

你的翻译必须实现`loadMessages($directory, MessageCatalogue $catalogue)`方法。

您可以将其实现为 `$this->symfonyLoader->loadMessages($directory."/subdir", $catalogue);`

`$this->symfonyLoader`您可以使用 DI 容器传递

# java - 将 LinkedHasHSet 的内容输出到 JTable

> ID：13290910
> 
> 赞同：0
> 
> 时间：2012-11-08T14:26:04.417
> 
> 标签：java, swing, jtable

我有一个`LinkedHashSet`对象`Book`。对象具有以下`Book`字段：

```
private int id;
private String author = "";
private String title = "";
private boolean isRead;
private String dateStamp = "";
private static int counter = 0; 
```

我希望他们进入我的`JTable`其中包含以下列：

```
String [] columnNames = {"ID","Title", "Author", "Status", "Date Read"}; 
```

我怎样才能做到这一点？是否可以`isRead`通过表格中的复选框来编辑该字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:03:56.877

这是我为表创建的示例模型。

```
public class CustomModel extends AbstractTableModel {

private Object[] colNames ={"ID","Title", "Author", "Status", "Date Read"};
private LinkedHashSet<CustomClass> data; 

public TableModelTop() {
    this.data = getDataForDropList();
}

public int getRowCount() {
    return data.size();
}

public int getColumnCount() {
    return colNames.length;
}

@Override
public String getColumnName(int columnIndex) {
    return (String) colNames[columnIndex];
}

@Override
public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
    // Set Values here;
}

public Object getValueAt(int rowIndex, int columnIndex) {
    // Get row Values here;
}

@Override
public boolean isCellEditable(int rowIndex, int columnIndex) {
    return true;
}

@Override
public Class<?> getColumnClass(int columnIndex) {
    // Depending on the type of the column. Return data type;
}

/**
 * Populate the data from here.
 * @return LinkedHashSet<CustomClass>
 */
private LinkedHashSet<CustomClass> getDataForDropList() {
    LinkedHashSet<CustomClass> modelList = new  LinkedHashSet<CustomClass>();
    for(int i = 0; i< 5; i++) {

    // Create custom Object and add them to the LinkedHashSet.
            // Create a CustomClass object and add it to the LinkedHashSet
             modelList.add(customClassObject);
    }
           // Finally return the llinkedhashset
    return modelList;
}
} 
```

在此之后只需调用表模型并将其分配给 JTable。

```
JTable table = new JTable(new CustomModel()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:47:15.840

你需要有一个扩展的类`AbstractTableModel`。这个类应该使用你的`LinkedHashSet`作为你的表的数据源。提供的基本实现`AbstractTableModel`应该可以满足您的大部分需求。如果没有，那么您可以覆盖您需要自定义的方法。

本[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)应该可以帮助您了解`JTable`对象是如何工作的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T02:47:57.083

作为一个具体的使用例子`AbstractTableModel`，你可以利用`toArray()`继承的方法`LinkedHashSet`来简化实现`getValueAt()`，如this相关所示[`EnvTableTest`](https://stackoverflow.com/a/9134371/230513)。默认`JTable` [渲染器和编辑器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)用于`JCheckBox`类型`TableModel`元素`Boolean.class`，如本[例](https://stackoverflow.com/a/4528604/230513)所示。

# shell - 我的脚本如何调用 SSH 并避免“输入密钥密码”消息？

> ID：13290912
> 
> 赞同：3
> 
> 时间：2012-11-08T14:26:13.590
> 
> 标签：shell, ssh

我有一个包含以下命令的 shell 脚本：

```
/usr/local/bin/ssh -q -i /.ssh/id_rsa -l oracle \
    -o UserKnownHostsFile=/dev/null \
    -o StrictHostKeyChecking=no \
    -o PasswordAuthentication=no \
    ${REMOTE_HOST} ${REMOTE_CMD} 
```

StrictHostKeyChecking=no 避免在无法识别远程主机时提示，而 PasswordAuthentication=no 避免在私钥未知时提示输入密码。但是，如果有人不小心为私钥设置了密码，我仍然会收到“输入密钥密码”的提示。这可能会导致脚本在等待响应时挂起，这是一件坏事。有没有办法避免提示并立即退出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T14:35:52.153

`ssh -o BatchMode=yes ...`将禁用密码/密码查询。

# c++ - 调用了错误版本的 vcbuild.exe

> ID：13290921
> 
> 赞同：1
> 
> 时间：2012-11-08T14:26:46.490
> 
> 标签：c++, visual-studio, msbuild, vcbuild

我的系统上安装了多个版本的 Visual Studio（2005、2008 和 2010）。我还有一个与之相关的 Visual Studio 2005 (8.0) C++ 项目 (vcproj) 和解决方案 (sln)。当我运行以下命令时

```
msbuild helloworld.sln 
```

调用 4.0 版的 msbuild，然后从 Visual Studio **9.0**目录调用 vcbuild.exe。这会导致错误

```
vcbuild.exe : error VCBLD0010: Project 'XYZ' requires upgrade. Use'vcbuild /upgrade' or 'devenv /upgrade' to upgrade the project. 
```

在其他系统上，MSBuild 4.0 从 Visual Studio **8**目录调用 vcbuild.exe，项目成功编译。我无法弄清楚为什么在我的系统上调用的是 vcbuild 9.0 而不是 8.0。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:24:06.543

从命令行运行 Visual Studio 构建时，您应该始终在您首先从正确版本的 VS 运行 vcvarsall.bat 的命令行中执行此操作。Visual Studio 安装将此类命令行的快捷方式放入“开始”菜单。

# jquery - Jquery 性能：在大多数浏览器中，js 和 css 文件的加载和缓存哪个更好？

> ID：13290934
> 
> 赞同：0
> 
> 时间：2012-11-08T14:27:21.950
> 
> 标签：jquery, performance, dynamic-loading

自从我从原型交换到 jquery 后，我遇到了很多我以前从未知道存在的性能问题。

但这不是问题。问题是关于我正在使用的这个功能：（注意我们有一个巨大的网络应用程序）我正在使用这个功能：

```
<!DOCTYPE html>
<html>
<head>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>

<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div title="jquery ui exists" style="width: 500px; height: 500px; background-color: lightblue"  >hover me</div>
  <script>
  var MyApp ={
        loadJsNow: function(libFilename){
                //the synchronous call ensures the library is in fact loaded before this
          //(which does not work for crossdomain requests, just for docu)
                //function returns:     

                $.ajax({
                        url: libFilename,
                        dataType: "script",                     
                        type: "GET",
                        async: false,
                        cache: true,
                        complete: function(data){
                           $("div").tooltip();
                        }

                });

            }
    }

       MyApp.loadJsNow("http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js");

  </script>

</body>
</html> 
```

因此，如果网页的某个元素需要这些文件，则使用此函数加载 js 文件。由于我们有很多页面，有时很少，有时会加载，这种方法似乎很有意义。但是：由于这个函数是按需加载的，而不是像标题中的标准那样，我不确定这是否会造成性能问题。在 FF 10 中，我得到 200-600 毫秒 [，请参见此处](http://jsbin.com/oxekod/2/edit)

看看这里在标题中使用硬编码值的不同方法：

[硬编码的头部 js 链接](http://jsbin.com/oxekod/3/edit) 我得到 ~100-300 毫秒

放弃对按需加载的所有支持？你得到类似的结果吗？

***编辑***我想[交叉引用这个问题](https://stackoverflow.com/a/13293251/533426)，因为它似乎相关，因为 jquery/firefox 似乎没有正确处理按需 javascript 加载的缓存。有时它有效，然后在同一页面上它不再有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:55:50.367

您是否考虑过使用 requirejs 代替？我不是回答问题并给出与问题不直接相关的答案的人，但在这种情况下，它可能真的对你有帮助。

我修改了您的脚本以使用 requirejs 并仍然使用异步并在完成后触发事件。这将允许对多个脚本进行多个异步请求，但仍仅在所有脚本准备好时才执行。

[http://requirejs.org/docs/api.html](http://requirejs.org/docs/api.html)

[http://jsbin.com/oxekod/9/edit](http://jsbin.com/oxekod/9/edit)

```
<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript">var startDate = new Date();</script>

<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <script src="http://requirejs.org/docs/release/2.1.1/comments/require.js"></script>
<!--
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
-->

<meta charset=utf-8 />
<title>JS Bin</title>

    <!-- make sure this is declared in head -->
    <script>
  var MyApp ={
     queue: []
     , loadJsNow: function(strScript)
    { // add to the queue, but don't start loading just yet...
                MyApp.queue.push(strScript);
    }
  };
  </script>
</head>
<body>
  <div title="jquery ui exists" style="width: 500px; height: 500px; background-color: lightblue"  >hover me</div>

  <!-- throughout your app, add scripts as needed -->
  <script>
    MyApp.loadJsNow("http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js");
  </script>

  <script>
    $(function()
      {
        // when everything's ready, run your scripts through require.
        // after require loads ALL scripts, let jquery trigger a custom event called, say, 'scriptsloaded'
        require(MyApp.queue, function() { $(document).trigger('scriptsloaded'); });
      });
  </script>

  <script>
    $(document).on('scriptsloaded', function()
      {
        // anything that needs to wait for dynamic scripts should wait for the custom event to fire on document
        // once fired, all scripts are loaded, and do what you want.
        $('div').tooltip();

        var endDate = new Date();
        alert('diff: ' + (endDate.getTime() - startDate.getTime()));
      });
  </script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:51:31.550

正如 Eli Gassert 建议的那样，您可以使用第三方依赖加载器来自己完成，将您的功能更改为此

```
 loadJsNow: function(libFilename){

      var fileref=document.createElement('script');
      fileref.setAttribute("type","text/javascript");
      fileref.setAttribute("src", libFilename);
     } 
```

这将加载文件，但不会在 DOM 中。如果您愿意，可以将它们添加到标题中，将其添加到 MyApp 中：

```
headElementRef: document.getElementsByTagName("head")[0], 
```

这进入方法：

```
 this.headElementRef.appendChild(fileref); 
```

# asp.net-mvc - .Net MVC Web 部署

> ID：13290936
> 
> 赞同：0
> 
> 时间：2012-11-08T14:27:29.360
> 
> 标签：asp.net-mvc, web, web-deployment

我有 Visutal Studio 2012、MVC 4 和 Razor。我无法使用这项技术启动和运行网站。

Web 服务器是 Windows Server 2008 服务器。我尝试使用 Web Deploy 方法进行部署，但一直收到类似“设置 ACL”的错误。

我尝试使用文件系统进行部署。所有文件都已部署，但是当我尝试运行该网站时，由于缺少 ASP.NET MVC 基础设施文件而失败。

两件事： •如果我使用Web-Deploy，我该如何解决ACL错误，因为我假设使用这种方法，所有需要的东西都会被部署。

请注意，Web Deploy 3.0 服务位于服务器上并已启动。•如果我使用文件系统，我在哪里可以找到部署在 MVC 将工作的服务器上所需的下载。◦请注意，我下载了 4.5 框架并成功安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:40:21.623

您需要更准确地了解您需要帮助的内容。

1.  确切的错误是什么。
2.  通常，您需要授予 IIS 用户组访问权限，以至少从您部署的目录中读取。你已经这样做了吗？
3.  您是否在服务器上安装了 .NET 4.5 和 MVC4？如果没有，您是否希望这些 DLL 与您的部署一起“打包”？它们通常不是，因为它们是“标准”组件。但是，如果您希望它们包含在您的部署中，您可以通过在 VS 中选择引用并说“复制”来实现。 **不建议这样做，**因为当您在服务器上安装 .NET 和 MVC 补丁时，这些更新不会传递到您的应用程序，因为它将使用程序集的本地（旧）副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:13:17.443

这可能更像是一个 IIS 问题，但根据您问题中的详细信息不确定。检查运行站点的应用程序池是否使用 .net 4.0。只是一个想法，我会检查。

# templates - 无法访问@OneToOne 映射实体

> ID：13290945
> 
> 赞同：0
> 
> 时间：2012-11-08T14:27:44.630
> 
> 标签：templates, scala, playframework-2.0, ebean

我的数据模型：

```
public class Tour extends Model {    
    @Id
    public Integer id;

    @ManyToOne
    public Sport sport;

    @OneToOne(mappedBy="genericTour")
    FootballTour footballTour;

    @OneToOne(mappedBy="genericTour")
    TennisTour tennisTour;

    public static Finder<Integer, Tour> find(){
        return new Finder<Integer,Tour>(Integer.class,Tour.class);
    }
}

public class FootballTour extends Model {

    @Id
    public Integer id;

    @OneToOne
    Tour genericTour;

    public static Finder<Integer, FootballTour> find(){
        return new Finder<Integer,FootballTour>(Integer.class,FootballTour.class);
    }

} 
```

我的行为（只是为了表明我正在获取“footballTour”）：

```
 public static Result getToursBySportTag(String sportTag){

      Query query = Tour.find().fetch("sport").fetch("footballTour");
      List<Tour> finedTours =  query.where().eq("tag", sportTag).findList();

      return ok(tours.render(finedTours));

  } 
```

在 scala 模板中，我想访问巡回赛的 footballTour 领域：

```
@(tours: List[Tour])
@main("Football tours") {
<h1>Football tours List</h1>
<dl>
@for(tour <- tours) {
<dt>
<a href="@routes.Application.tour(tour.id)">
@tour.footballTour.id
</a>
</dt>
}
</dl>
} 
```

并在编译时出错：

> [错误] 发现一个错误 [错误] {file:/C:/Users/pc/prog/}prog/compile:compile: C 编译失败 [信息] 将 1 个 Scala 源编译到 C:\Users\pc\prog\target \scala-2。9.1\classes... [错误] C:\Users\pc\prog\target\scala-2.9.1\src_managed\main\views\ html\tours.template.scala:37:**类 Tour 中的变量 footballTour 不能访问ssed in models.Tour** [error] """), *display* (Seq [Any](/%2a8.2%2a/tour/%2a8.6%2a/.name) ),format.raw/ *8.11* /(""" - """), *display* (Seq [Any](/%2a8.15%2a/tour/%2a8.19%2a/.footballTour.id) ),format.raw/ *8\. 35* /( “““ [错误]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:31:17.913

`genericTour`类的字段`FootballTour`应该是公共的：

```
public class FootballTour extends Model {

    @Id
    public Integer id;

    @OneToOne
    public Tour genericTour;  // <<<<< Here !!

    public static Finder<Integer, FootballTour> find(){
        return new Finder<Integer,FootballTour>(Integer.class,FootballTour.class);
    }

} 
```

在java中，默认情况下，在未指定的情况下，字段是私有的。

# php - 当数组中没有这样的索引时，为什么这会返回一个字符串值？

> ID：13290956
> 
> 赞同：2
> 
> 时间：2012-11-08T14:28:37.853
> 
> 标签：php, string

> **可能重复：**
> [isset() 对不存在的数组键返回 true 的奇怪行为](https://stackoverflow.com/questions/9132715/strange-behavior-with-isset-returning-true-for-an-array-key-that-does-not-exis)

```
$arr = array(
         'application' => array (
            'environment' => 'development',
            'mode_debug' => 1,
            'key' => '123456abcdefg',
            'debug_soft' =>
            'firephp',
            'aaa' => array (
                'bbb' => '111',
                'ccc' => '222',
                'ddd' => array (
                    'eee' => '12345',
                ),
            ),
        ),
        'database' => array (
            'host' => 'localhost',
            'database' => '',
            'username' => '',
            'password' => '',
            'charset' => 'utf8',
            'prefix' => '',
        ),
    );

if(isset($arr["application"]["aaa"]["ddd"]["eee"]['out']) && !empty($arr["application"]["aaa"]["ddd"]["eee"]['out'])){
    echo "a";
    echo '<br />';
    var_dump($arr["application"]["aaa"]["ddd"]["eee"]['out']);
}else{
    echo "b";
} 
```

返回：

```
a
string(1) "1" 
```

但是'$arr'数组中没有'out'索引，那么为什么它返回'string（1）“1”'？

该手册没有帮助，因为它只对一维数组进行采样：

```
$a = array ('test' => 1, 'hello' => NULL);

var_dump( isset ($a['test']) );            // TRUE
var_dump( isset ($a['foo']) );             // FALSE
var_dump( isset ($a['hello']) );           // FALSE 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T14:33:00.350

考虑一下：

```
$str = 'test';
var_dump(isset($str['xxx'])); // true 
```

它返回 true，因为：

*   PHP 支持`$str[$n]`语法（用于处理字符串的单个字符）

*   计算索引时，它被转换为整数类型

*   当转换为整数时，`"xxx"`是`0`；您正在访问`$str[0]`- 该`$str`字符串的第一个字符，它 ( `t`) 是一个真实值。

请注意，[**isset**](http://php.net/manual/en/function.isset.php)的这种（非常奇怪的）行为在 PHP 5.4 中已修复：

> **5.4.0**：检查字符串的非数字偏移量现在返回 FALSE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:33:29.220

这样做是因为您的`eee`索引包含一个值的字符串 - 并且字符串可以作为数组访问。当您`out`在字符串中使用索引时，它会转换`out`为 的整数值`0`，给您`$arr["application"]["aaa"]["ddd"]["eee"][0]`，等于`1`。

您可以使用以下方法防止这种情况`is_array()`：

```
if (is_array($arr["application"]["aaa"]["ddd"]["eee"]) && isset($arr["application"]["aaa"]["ddd"]["eee"]['out'])) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T14:35:43.913

似乎返回 $arr["application"]["aaa"]["ddd"]["eee"] 值 "12345" 的第一个字符 '1'，即使键 'out' 不存在。

# python - Tkinter 网格中的滚动条

> ID：13290958
> 
> 赞同：3
> 
> 时间：2012-11-08T14:28:40.420
> 
> 标签：python, grid, tkinter, scrollbar

> **可能重复：**
> [将滚动条添加到 Tkinter 中的小部件网格](https://stackoverflow.com/questions/3085696/adding-a-scrollbar-to-a-grid-of-widgets-in-tkinter)

在我的项目中，我想在一个窗口中显示我的结果，使用 Tkinter 作为 GUI。我使用网格小部件将它们放在一种表格中，并且窗口被分成两个不同的部分（用于不同的结果）。但经过较长时间的运行，显示的结果数量超过了我的屏幕高度，所以我想在我的程序中添加一个滚动条。我已经在stackoverflow上查看了几个问题，最接近的答案是：

[在 Tkinter 中为一组小部件添加滚动条](https://stackoverflow.com/questions/3085696/adding-a-scrollbar-to-a-grid-of-widgets-in-tkinter) （只是为了让您知道我在寻找什么！）

不过，我无法将其应用到我的程序中，可能是因为我对 Python 比较陌生，有时认为我是一个有教程示例的弗兰肯斯坦博士。

我现在尝试了很多，但我无法让表格显示在画布中，可能只是我缺少一些小东西。

我创建了我的程序的一个抽象示例（没有滚动条），所以您知道我在使用什么，也许您的某个人可以帮助我将滚动条放在它所属的位置！

非常感谢！

示例代码：（运行）

```
import Tkinter as tk
toprow=1
botrow=1
class ProgramWindow(tk.Frame): 

    def __init__(self,name): 
        self.name = name
        tk.Frame.__init__(self,root)
        self.pack()

        if name=="BotWin":
            tk.Label(self,text="FirstColBot",width=30).grid(row=0,column=0)            
            tk.Label(self,text="SecndColBot",width=20).grid(row=0,column=1)

        elif name=="TopWin":
            tk.Label(self,text="FirstColTop",width=30).grid(row=0,column=0)         
            tk.Label(self,text="SecndColTop",width=20).grid(row=0,column=1)

    def addrowTop(self,stuff,otherstuff):
        global toprow

        textfield = tk.Text(self,width=30,height=1)
        textfield.grid(row=toprow,column=0)
        textfield.insert('0.0',stuff)

        textfield = tk.Text(self,width=20,height=1)
        textfield.grid(row=toprow,column=1)
        textfield.insert('0.0',otherstuff)

        toprow+=1

    def addrowBot(self,stuff,otherstuff):
        global botrow

        textfield = tk.Text(self,width=30,height=1)
        textfield.grid(row=botrow,column=0)
        textfield.insert('0.0',stuff)

        textfield = tk.Text(self,width=20,height=1)
        textfield.grid(row=botrow,column=1)
        textfield.insert('0.0',otherstuff)

        botrow+=1

def SomeProg():
    for i in range(20):
        if i%2==0:
            stuff = "Stuff is "+str(i)
            otherstuff=i*3
            Wins[0].addrowTop(stuff,otherstuff)
        elif i%2==1:
            stuff = "Stuff is "+str(i)
            otherstuff=i*4
            Wins[1].addrowBot(stuff,otherstuff)

root = tk.Tk()
root.title("Stuff")

Wins = [ ProgramWindow("TopWin"),ProgramWindow("BotWin")]
SomeProg()

root.mainloop() 
```

我尝试添加滚动条的附加代码（基于上面链接中显示的示例）。如果滚动条只显示在下部，那没关系，因为那是有很多结果的部分。）

```
import Tkinter as tk
toprow=1
botrow=1
class ProgramWindow(tk.Frame): 

    def __init__(self,name): 
        self.name = name
        self.frame=tk.Frame.__init__(self,root)

        if name=="BotWin":
            tk.Label(self,text="FirstColBot",width=30).grid(row=0,column=0)            
            tk.Label(self,text="SecndColBot",width=20).grid(row=0,column=1)

            self.canvas = tk.Canvas(root, borderwidth=0, background="#ffffff")
            self.vsb = tk.Scrollbar(root, orient="vertical", command=self.canvas.yview)
            self.canvas.configure(yscrollcommand=self.vsb.set)

            self.vsb.pack(side="right", fill="y")
            self.canvas.pack(side="left", fill="both", expand=True)
            self.canvas.create_window((4,4), window=self.frame)

            self.bind("<Configure>", self.OnFrameConfigure)

        elif name=="TopWin":
            self.pack()
            tk.Label(self,text="FirstColTop",width=30).grid(row=0,column=0)         
            tk.Label(self,text="SecndColTop",width=20).grid(row=0,column=1)

    def addrowTop(self,stuff,otherstuff):
        global toprow

        textfield = tk.Text(self,width=30,height=1)
        textfield.grid(row=toprow,column=0)
        textfield.insert('0.0',stuff)

        textfield = tk.Text(self,width=20,height=1)
        textfield.grid(row=toprow,column=1)
        textfield.insert('0.0',otherstuff)

        toprow+=1

    def OnFrameConfigure(self, event):
        self.canvas.configure(scrollregion=self.frame.bbox("all"))

    def addrowBot(self,stuff,otherstuff):
        global botrow

        textfield = tk.Text(self,width=30,height=1)
        textfield.grid(row=botrow,column=0)
        textfield.insert('0.0',stuff)

        textfield = tk.Text(self,width=20,height=1)
        textfield.grid(row=botrow,column=1)
        textfield.insert('0.0',otherstuff)

        botrow+=1

def SomeProg():
    for i in range(20):
        if i%2==0:
            stuff = "Stuff is "+str(i)
            otherstuff=i*3
            Wins[0].addrowTop(stuff,otherstuff)
        elif i%2==1:
            stuff = "Stuff is "+str(i)
            otherstuff=i*4
            Wins[1].addrowBot(stuff,otherstuff)

root = tk.Tk()
root.title("Stuff")

Wins = [ ProgramWindow("TopWin"),ProgramWindow("BotWin")]
SomeProg()

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T16:46:08.563

要使[Bryan Oakley 的回答](https://stackoverflow.com/a/3092341/428236)适应您的具体问题：

*   以画布为父创建框架
*   使用画布作为参数`scrollregion`

注意：在python中进行子类化时，不需要存储parent的结果，`__init__`因为它对self进行了操作。

这是补丁：

```
 def __init__(self,name): 
         self.name = name
-        self.frame=tk.Frame.__init__(self,root)

         if name=="BotWin":
+            self.canvas = tk.Canvas(root, borderwidth=0, background="#ffffff")
+            tk.Frame.__init__(self,self.canvas)
             tk.Label(self,text="FirstColBot",width=30).grid(row=0,column=0)            
             tk.Label(self,text="SecndColBot",width=20).grid(row=0,column=1)
-            self.canvas = tk.Canvas(root, borderwidth=0, background="#ffffff")
             self.vsb = tk.Scrollbar(root, orient="vertical", command=self.canvas.yview)
             self.canvas.configure(yscrollcommand=self.vsb.set)

             self.vsb.pack(side="right", fill="y")
             self.canvas.pack(side="left", fill="both", expand=True)
-            self.canvas.create_window((4,4), window=self.frame)
+            self.canvas.create_window((4,4), window=self)
             self.bind("<Configure>", self.OnFrameConfigure)

         elif name=="TopWin":
+            self.frame=tk.Frame.__init__(self,root)
             self.pack()
             tk.Label(self,text="FirstColTop",width=30).grid(row=0,column=0)         
             tk.Label(self,text="SecndColTop",width=20).grid(row=0,column=1)
@@ -41,7 +40,7 @@
         toprow+=1

     def OnFrameConfigure(self, event):
-        self.canvas.configure(scrollregion=self.frame.bbox("all"))
+        self.canvas.configure(scrollregion=self.canvas.bbox("all"))

     def addrowBot(self,stuff,otherstuff):
         global botrow 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T15:34:07.200

从你的问题我很确定我可以帮助你，几个月前我遇到了类似的问题，我尝试了很多不同的解决方案，最后我发现了来自 ttk 模块的 ttk 树视图小部件，它来自python 2.7的标准

这是一个小例子，可以帮助您了解我的意思

```
from Tkinter import *
import ttk
root = Tk()
treedata = [('column 1', 'column 2'), ('column 1', 'column 2')]
column_names = ("heading1", "heading2")
tree = ttk.Treeview(root, columns = column_names, yscrollcommand = scrollbar.set)
scrollbar = ttk.Scrollbar(root)
scrollbar.pack(side = 'right', fill= Y)
for x in treedata:
    tree.insert('', 'end', values =x)
for col in column_names: 
    tree.heading(col, text = col.Title())
scrollbar.config(command=tree.yview)
tree.pack() 
```

希望这会有所帮助，这方面的文档不多，但谷歌会提供帮助，一个非常有用的链接：[http ://www.tkdocs.com/tutorial/tree.html](http://www.tkdocs.com/tutorial/tree.html)

祝你好运 ：）

# c# - 如何将 c++ 结构从 dll 传输到 c# 程序？

> ID：13290961
> 
> 赞同：0
> 
> 时间：2012-11-08T14:28:48.610
> 
> 标签：c#, c++, dll, marshalling

我有 DLL，用 C++ 编写。这个DLL中有结构。

```
typedef struct TransmitData
{
wchar_t    szPath[MAX_PATH];
DWORD      dwResult;
} *lpTransmitData; 
```

我有一个函数来填充这个结构

```
extern "C" __declspec(dllexport) int GetData(struct TransmitData &data)
{
//I HAVE ONE THE SAME STRUCT IN THIS DLL
memcpy(&data, &transmitData, sizeof(struct TransmitData));
return ret_value;
} 
```

在 C# 程序中，我很好地使用具有简单数据类型的函数，但对于结构它不起作用。C#上有代码：

```
public struct TransmitData
{
[MarshalAs(UnmanagedType.LPWStr, SizeConst = 260)] //260 = MAX_PATH
public string szPath;
public uint dwResult;
}
//...
[DllImport("MyDLL")]
public static extern int GetData(ref TransmitData data); 
```

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:31:00.900

建议你换

```
[DllImport("MyDLL")] 
```

和

```
[DllImport("MyDLL", CallingConvention = CallingConvention.Cdecl)] 
```

和

```
extert "C" 
```

和

```
extern "C" 
```

此外，正如乔建议的那样，添加

```
[StructLayout(LayoutKind.Sequential)] 
```

在 C# 代码中声明结构之前

# python - 将电子邮件发送到我的 python/flask 应用程序代码的第一步是什么？

> ID：13290962
> 
> 赞同：4
> 
> 时间：2012-11-08T14:28:27.177
> 
> 标签：python, flask, email

我正在研究如何制作一个可以直接与电子邮件交互的网络应用程序。就像您发送到 something@myapp.com 一样，该应用程序会将其拆开并确定它来自谁、它们是否在数据库中、主题行是什么等。

我正在使用/最熟悉 python 和烧瓶。

谁能让我朝着正确的方向开始如何让电子邮件与我的烧瓶应用程序代码交互？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:39:18.967

您可以采取几种方法：

*   编写一些使用 IMAP 或 POP 检索电子邮件并处理它们的代码。要么从 crontab（或类似的东西）运行它，要么将它添加到你的烧瓶应用程序并在那里触发它，要么通过请求魔法 URL 的 crontab 或设置自定义计时器线程。
*   将您的 MTA 配置为通过将其提供给您编写的程序（例如在 Exim 中您可以使用[管道传输](http://www.exim.org/exim-html-3.20/doc/html/spec_18.html)）来为 something@myapp.com 发送电子邮件。在该程序中，您可以直接处理它，也可以将其发布到您的烧瓶应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:16:34.580

我最近做了一些类似的事情，一个简单的书签网络应用程序。我有通常的书签方式为它添加书签，但我也希望能够从我的 iPhone 上的 Reeder 等应用程序通过电子邮件发送指向它的链接。你可以在 GitHub 上看到我最终得到的结果：[subMarks](https://github.com/MalphasWats/subMarks)。

我将 Google Apps for your Domain 用于我的电子邮件，因此我创建了一个特殊地址供我的应用查看 - 我*真的*不想尝试构建/配置我自己的电子邮件服务器。

上面的`mail_daemon.py`文件作为 cron 作业每 5 分钟运行一次。它使用 Python 包连接到电子邮件服务器`poplib`，处理那里的电子邮件，然后断开连接（我不得不指出的一部分是，我在处理电子邮件之前检查电子邮件是否来自我 :)）

然后，我的 Flask 应用程序为书签提供前端，从数据库中显示它们。

我决定不将电子邮件处理代码放入实际的烧瓶应用程序中，因为它可能相当慢并且只会在访问页面时运行，但如果你愿意，你可以这样做。

这是一些让事情顺利进行的准系统代码：

```
import poplib
from email import parser
from email.header import decode_header

import os
import sys

pop_conn = poplib.POP3_SSL('pop.example.com')
pop_conn.user('my-app@example.com')
pop_conn.pass_('password')

#Get messages from server:
messages = [pop_conn.retr(i) for i in range(1, len(pop_conn.list()[1]) + 1)]

# Concat message pieces:
messages = ["\n".join(mssg[1]) for mssg in messages]

#Parse message into an email object:
messages = [parser.Parser().parsestr(mssg) for mssg in messages]

for message in messages:
    # check message is from a safe recipient
    if 'me@example.com' in message['from']:

        # Get the message body text
        if message['Content-Type'][:4] == 'text':
            text = message.get_payload() #plain text messages only have one payload
        else:
            text = message.get_payload()[0].get_payload() #HTML messages have more payloads

        # decode the subject (odd symbols cause it to be encoded sometimes)
        subject = decode_header(message['subject'])[0]
        if subject[1]:
            bookmark_title = subject[0].decode(subject[1]).encode('ascii', 'ignore') # icky
        else:
            bookmark_title = subject[0]

        # in my system, you can use google's address+tag@gmail.com feature to specifiy
        # where something goes, a useful feature.
        project = message['to'].split('@')[0].split('+')

        ### Do something here with the message ###

pop_conn.quit() 
```

# javascript - 使用 Ext.grid.plugin.CellEditing 编辑后远程保存 onblur

> ID：13290963
> 
> 赞同：0
> 
> 时间：2012-11-08T14:29:02.767
> 
> 标签：javascript, extjs, cell, gridpanel

我需要将请求（商店正在使用**restproxy**）发送到我的服务器**onblur**。我已经有了从按钮调用它的保存方法。

这是我的**细胞编辑**

```
var cellEditing = Ext.create('Ext.grid.plugin.CellEditing', {
        clicksToEdit: 1,
    });

    grid.plugins = [cellEditing];
    grid.on('edit', function(editor, e) {
        // commit the changes right after editing finished
        e.record.commit();
        e.grid.store.save();

    }); 
```

我在官方文档中读到这是需要的事件，但是在我看来它在编辑之前就被触发了。

## 简而言之

1.  编辑单元格后我必须绑定的事件是什么？
2.  使用`e.grid.store.save()`发送请求可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:38:48.657

问题是同时调用方法`commit`和`save`.

record.commit 正在清理`dirty`标志，因此 store.save 找不到任何`sync`.

工作样本：

```
var cellEditing = Ext.create('Ext.grid.plugin.CellEditing', {
        clicksToEdit: 1,
    });

    grid.plugins = [cellEditing];
    grid.on('edit', function(editor, e) {
        // commit the changes right after editing finished
        e.grid.store.save();

    }); 
```

# javascript - 当 ajaxEnabled 设置为 true 时，回发禁用 javascript

> ID：13290964
> 
> 赞同：1
> 
> 时间：2012-11-08T14:29:05.580
> 
> 标签：javascript, asp.net, jquery-mobile, postback

我有一个简单的表单，我正在尝试提交，当我这样做时，我在页面上的所有 javascript 都没有工作（甚至没有警报）。

我发现如果我将 jQuery 的移动 ajaxEnabled 设置为 false，一切正常，但我怎样才能在不禁用它的情况下让它工作呢？

现在我尝试将 javascript 移动到正文的末尾，但这并没有帮助。所以我做了一个疯狂的猜测，并认为这可能与我将我的代码绑定到`pageinit`事件有关。

但是，即使在该包装之外的警报也不起作用。我正在使用 jQuery mobile，所以这可能是相关的，或者我的页面作为`EnableEventValidation="False"`

这是更多代码的小提琴：http: [//jsfiddle.net/DUbXV/](http://jsfiddle.net/DUbXV/)

这是我的 javascript 函数声明（长代码）：

```
<script type="text/javascript">
    alert();
    $(document).bind('pageinit', function () {
        //using cookie plugin
        $('#user_id').val($.cookie('SimMobileUsername'));

        $('#form1').on("submit", function () {
         //some code
        });
        $("#phone_number").bind("blur", function (event, ui) {
        //some code
        });
    });
</script> 
```

这是回发代码，如果有帮助的话：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
        SubmitForm();
} 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:35:32.000

当甚至警报都不起作用时，您很有可能在某处遇到 JS 语法错误。你有没有打开你的 JS 或开发者控制台（大多数浏览器中的 F12）？你看到任何 JS 错误吗？

如果这不能解决，您可以在此处或在 jsfiddle 上发布更完整的示例吗？

# asp.net-mvc - 将解决方案拆分为多个项目

> ID：13290973
> 
> 赞同：0
> 
> 时间：2012-11-08T14:30:05.180
> 
> 标签：asp.net-mvc, visual-studio, entity-framework, projects-and-solutions

我使用 ASP.NET MVC 4 Internet 项目 (Arhi.Core) 和用于存储我的 EDMX 模型的数据类库项目 (Arhi.Data) 创建了一个黑色解决方案 (Arhi)。

我在 Arhi.Core 中添加了 Arhi.Data 的引用，并尝试从 Arhi.Data（人物实体）添加带有 Model 类的控制器，但出现此错误。

> '无法检索 'Arhi.Core.People' 的元数据。指定的命名连接要么在配置中找不到，要么不打算与 EntityClient 提供程序一起使用，要么无效。

**问**：为什么我会收到这个错误？我的方法是错误的/有什么建议吗？Q2：如果我想将 RDLC 报告添加到我的解决方案中，我还应该使用类库项目吗？

来自 Arhi.Core 的连接字符串

```
<add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=aspnet-SalvamontMVC-20121108140556;Integrated Security=SSPI" /> 
```

和 Arhi.Data

```
<add name="SalvamontEntities" connectionString="metadata=res://*/ModelSalva.csdl|res://*/ModelSalva.ssdl|res://*/ModelSalva.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=www.arhimedes.ro,1433;initial catalog=Salvamont;persist security info=True;user id=sa;password=********;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-08T05:57:53.443

在你的第一个连接字符串中没有用户名和密码如果两个数据库尊重然后在第一个连接字符串中给出用户名和密码

# haskell - Aeson derivedJSON 结合管道 sinkParser

> ID：13290975
> 
> 赞同：4
> 
> 时间：2012-11-08T14:29:38.927
> 
> 标签：haskell, conduit, aeson

继续我对管道和 aeson 的探索，我将如何使用我自己的数据类型，而不是使用[Yesod book](http://www.yesodweb.com/book/json-web-service)`Value`中的这个（稍微修改过的）代码片段。

```
{-# LANGUAGE OverloadedStrings, TemplateHaskell #-}
import Network.Wai (Response, responseLBS, Application, requestBody)
import Network.HTTP.Types (status200, status400)
import Network.Wai.Handler.Warp (run)
import Data.Aeson.Parser (json)
import Data.Conduit.Attoparsec (sinkParser)
import Control.Monad.IO.Class (liftIO)
import Data.Aeson (Value(..), encode, object, (.=))
import Control.Exception (SomeException)
import Data.ByteString (ByteString)
import Data.Conduit (ResourceT, ($$))
import Control.Exception.Lifted (handle)

import qualified Data.HashMap.Strict as M
import Data.Aeson.TH (deriveJSON)

-- I ADDED THIS

data JSONRequest = JSONRequest {
    command :: ByteString,
    params :: M.HashMap ByteString ByteString
}

deriveJSON id ''JSONRequest

-- END OF WHAT I ADDED

main :: IO ()
main = run 3000 app

app :: Application
app req = handle invalidJson $ do
    value <- requestBody req $$ sinkParser json
    newValue <- liftIO $ dispatch value
    return $ responseLBS
        status200
        [("Content-Type", "application/json")]
        $ encode newValue

invalidJson :: SomeException -> ResourceT IO Response
invalidJson ex = return $ responseLBS
    status400
    [("Content-Type", "application/json")]
    $ encode $ object
        [ ("message" .= show ex)
        ]

-- Application-specific logic would go here.
dispatch :: Value -> IO Value
dispatch = return 
```

基本上，我想将类型更改`dispatch`为 JSONRequest -> IO JSONRequest。如何告诉解析器使用我自己的 fromJSON 派生实例？

我尝试只添加一个类型声明，为 json 上的多态返回类型祈祷，但我意识到它严格用于 Value。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T16:01:24.890

只看类型，你不只需要`fmap` *你* `fromJSON`的结果来自`json`吗？有了合适的签名，`dispatch`我们只需要：

```
-- import Data.Aeson
app :: Application
app req = handle invalidJson $ do
      result <- requestBody req $$ sinkParser (fmap fromJSON json)
      next_result <- liftIO $ dispatch result
      return $ responseLBS status200 [("Content-Type", "application/json")] 
             $ encode next_result   

dispatch :: Result JSONRequest -> IO JSONRequest
dispatch (Error str) = undefined
dispatch (Success jsonreq) = return jsonreq 
```

但也许这样写得更清楚一点：

```
-- import Data.Aeson
-- import qualified Data.Attoparsec as Atto
toRequest ::    Value -> Result JSONRequest
toRequest = fromJSON   -- specialized now to your fromJSON

jsonRequestParser :: Atto.Parser (Result JSONRequest)
jsonRequestParser = fmap toRequest json 

app :: Application
app req = handle invalidJson $ do
      result <- requestBody req $$ sinkParser jsonRequestParser
      next_result <- liftIO $ dispatch result
      return $ responseLBS status200 [("Content-Type", "application/json")]
             $ encode next_result   

dispatch :: Result JSONRequest -> IO JSONRequest
dispatch (Error str) = undefined
dispatch (Success jsonreq) = return jsonreq 
```

我让解析器返回一个`Result JSONRequest`所以`dispatch`也在处理错误案例，这可能意味着您需要以某种方式处理异常？

# c# - MVC 捆绑 - 包含单个捆绑的 .min 文件

> ID：13290977
> 
> 赞同：3
> 
> 时间：2012-11-08T14:29:41.603
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, web-optimization

我的应用程序中有一个文件，我只有一个缩小版本，我想为它创建一个包：

```
bundles.Add(new ScriptBundle("~/bundles/maskedinput").Include(
    "~/Scripts/jquery.maskedinput-1.3.min.js")); 
```

问题是默认情况下在调试模式下，捆绑机制会忽略 .min 文件。我不想为所有捆绑包关闭此规则，但我想为这个单个捆绑包禁用它。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T16:53:34.000

一个快速的解决方法是将 js 文件重命名为 .min。或者根据此链接中的解决方案，您可以创建自己的忽略模式。

[https://stackoverflow.com/a/12005272/1593273](https://stackoverflow.com/a/12005272/1593273)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T21:44:07.337

这也在 1.1-alpha1 版本中得到修复，因此如果您更新到该版本，则在显式包含文件时应该不会再看到此行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T22:01:20.417

您可以重命名不带 .min 的文件，也可以复制文件以同时拥有 .min 和不带 .min。只是他们现在都一样了。

# ruby-on-rails - 安装 rails-backbone，缺少资产？

> ID：13290979
> 
> 赞同：0
> 
> 时间：2012-11-08T14:30:14.963
> 
> 标签：ruby-on-rails, backbone.js

我刚刚安装了`rails-backbone`gem，然后`rails g backbone:install`.

我看到了一个对主干的 javascript 引用列表，`application.js`但它没有将它们复制到项目中，我不确定这是否正常。

```
//= require backbone
//= require backbone_rails_sync
//= require backbone_datalink
//= require backbone/myapp 
```

如果这是正常的，在哪里可以找到`backbone_rails_sync`和`backbone_datalink`。恐怕通过简单的搜索可能找不到针对此 gem 测试的相同版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:35:46.850

这些文件位于 gem 中，并通过 Rails Asset Pipeline 提供。

[你可以在gem souce](https://github.com/codebrew/backbone-rails/tree/master/vendor/assets/javascripts)中找到它们。

# nhibernate - Session.Get 和 Session.Load 命令忽略过滤器

> ID：13290980
> 
> 赞同：0
> 
> 时间：2012-11-08T14:30:16.273
> 
> 标签：nhibernate, nhibernate-mapping

我正在使用带有过滤器的映射。

但是当我尝试持久化我的对象时，它首先想要获取快照（因为我的 Id 是一个字符串）。

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="DomainLayer.General" assembly="DomainLayer">
  <class name="Fund" table="OPENA_BriefW" lazy="false">
    <id name="Id" column="`BRWNUMMER`" type="string" >
    </id>

    <property name="Name" column="`BRWNAAM`" type="string"  />
    <property name="Contact" column="`BRWNAAM2`" type="string"  />
    <property name="Address" column="`BRWADRES`" type="string"  />
    <property name="City" column="`BRWSTAD`" type="string"  />
    <property name="Zip" column="`BRWPOST`" type="string" />
    <property name="Phone" column="`BRWTELEFOON`" type="string" />
    <property name="Fax" column="`BRWTELEFAX`" type="string" />
    <property name="Iban" column="`brw_iban`" type="string" />
    <property name="BankAccount" column="`BRWBANKNU`" type="string" />
    <property name="Swift" column="`brw_swift`" type="string" />
    <property name="ReceiveOffice" column="`BRWONTVKANT`" type="int" />
    <property name="RegionDirection" column="`BRWGEWESTDIR`" type="int" />

    <many-to-one name="Country" class="DomainLayer.General.CodeDescription" fetch="join" not-found="ignore">
      <formula>'ALG'</formula>
      <formula>'0'</formula>
      <formula>'WG030'</formula>
      <column name="`BRWLAND`" />
      <formula>:LanguageFilter.Id</formula>
    </many-to-one>

  </class>
</hibernate-mapping> 
```

如您所见，过滤器 :LanguageFilter.Id 是导致问题的原因。当我做一个正常的 .List() 它不会引起问题。

但是当我坚持的时候，它首先要检查基金是否已经存在是/否。通过执行 .Get（使用 ID）。

然后我得到错误无法检索快照，因为在我的查询中他没有用我在会话中设置的有效值替换 :LangaugeFilter.Id。

我在我的会话中启用过滤器，如下所示：

```
session.EnableFilter("LanguageFilter").SetParameter("Id", 1); 
```

这是过滤器定义映射：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <filter-def name='LanguageFilter' >
    <filter-param name='Id' type='System.Int32' />
  </filter-def>
</hibernate-mapping> 
```

这篇文章（评论 4）[http://ayende.com/blog/3993/nhibernate-filters](http://ayende.com/blog/3993/nhibernate-filters)说 session.Get 和 Load 忽略过滤器。

有没有其他选择，因为我需要那种语言是可变的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:04:31.560

好的，我所做的如下：我没有使用 SaveOrPersist，而是在新的时候保存，在我有旧的时候使用 Persist。这没有执行额外的获取。

# sitecore - 如何在 XPath 构建器中搜索特定文件大小的 Sitecore 媒体项目

> ID：13290989
> 
> 赞同：1
> 
> 时间：2012-11-08T14:31:13.007
> 
> 标签：sitecore, sitecore6

XPath 构建器可从 Sitecore 的“开发者中心”获得。开始 > 开发人员中心 > 工具 > XPath Builder。我正在使用 sitecore 查询符号。

我想搜索特定文件大小的媒体项目 -

```
/sitecore/media library//*[@size > 99999] 
```

这会对大小进行字符串比较，因此“大于”不能按预期工作。

```
/sitecore/media library//*[Number(@size) > 99999] 
```

这可以按预期工作，但在遇到没有文件大小的项目时会出错 - 例如文件夹。我尝试了一些排列来过滤掉这些项目，但没有成功。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:18:19.120

可能有一些更清洁的东西，但这有效：

```
/sitecore/media library//*[@size!='']/.[Number(@size) > 99999] 
```

请注意，下面的行不起作用，因为**and in XPATH 不具有****&&**在 C# 中具有的“短路”功能。

```
/sitecore/media library//*[@size!='' and Number(@size) > 99999] 
```

# oauth-2.0 - 应如何从 OAuth2.0 返回已批准的范围

> ID：13290994
> 
> 赞同：4
> 
> 时间：2012-11-08T14:31:00.223
> 
> 标签：oauth-2.0

[为图书馆顾客](http://gbv.github.com/paia/)指定一个与 OAuth2.0 兼容的 API，我偶然发现了**[OAuth 范围](https://www.rfc-editor.org/rfc/rfc6749#section-3.3)**。OAuth2.0 规范在某些方面似乎有不同的解释，例如[GitHub 使用逗号](http://developer.github.com/v3/oauth/#scopes)来分隔范围，而 Google 使用空格，如 RFC 6749 中所定义。RFC 告诉：

> 如果颁发的访问令牌范围与客户端请求的范围不同，授权服务器必须包含“范围”响应参数以通知客户端授予的实际范围

但是后面的规范中没有提到范围响应参数。特别是我想实现[资源所有者密码凭证授予](https://www.rfc-editor.org/rfc/rfc6749#section-4.3)（第 4.3 节）。OAuth2.0 规范中给出了这个响应示例：

```
 HTTP/1.1 200 OK
 Content-Type: application/json;charset=UTF-8
 Cache-Control: no-store
 Pragma: no-cache

 {
   "access_token":"2YotnFZFEjr1zCsicMWpAA",
   "token_type":"example",
   "expires_in":3600,
   "refresh_token":"tGzv3JOkF0XG5Qx2TlKWIA",
   "example_parameter":"example_value"
 } 
```

我应该将范围包含为空格分隔列表、逗号分隔列表还是 JSON 数组？

```
 {
   "scope": [ "read", "write", "foobar" ],
   "access_token":"2YotnFZFEjr1zCsicMWpAA",
   "token_type":"example",
   "expires_in":3600,
   "refresh_token":"tGzv3JOkF0XG5Qx2TlKWIA",
   "example_parameter":"example_value"
 } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T15:50:57.590

我对 RFC 6749 的解释是，范围应指定为包含空格分隔列表的字符串。由于缺乏示例，该标准在某种程度上可以解释。

```
"scope": "read write foobar" 
```

RFC 6749 第 4.3.3 节访问令牌响应说：

> 如果访问令牌请求有效且被授权，授权服务器会发出访问令牌和可选的刷新令牌，如第 5.1 节所述。

RFC 6749 第 5.1 节说：

> 范围可选，如果与客户要求的范围相同；否则，需要。访问令牌的范围如第 3.3 节所述。

RFC 6749 第 3.3 节说：

> 范围 = 范围令牌 *( SP 范围令牌 )

# perl - 使用 Mojo::DOM 解析

> ID：13290996
> 
> 赞同：1
> 
> 时间：2012-11-08T14:31:28.090
> 
> 标签：perl, mojolicious, mojo

我`Mojo::UserAgent->new`用来获取一些具有以下格式的 XML：

```
<row>
<td> content1 </td>
<td> content2 </td>
<td> content3 </td>
</row>
<row>
<td> content4 </td>
<td> content5 </td>
<td> content6 </td>
</row> 
```

是否可以像这样查看结果：

```
content1,content2,content3
content4,content5,content6 
```

下面是我正在使用的查询，它得到不同的结果

```
 $ua->get($url)->res->dom->at->(row)->children->each(sub {print "$_\t"}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T16:38:22.457

[当然，使用Mojo::Collection](http://mojolicio.us/perldoc/Mojo/Collection)在幕后工作，这绝对是可能的，而且并不难。

**代码**

```
# replace this line by your existing $ua->get($url)->res->dom code
my $dom = Mojo::DOM->new(do { local $/ = undef; <DATA> });

# pretty-print rows
$dom->find('row')->each(sub {
    my $row = shift;
    say $row->children->pluck('text')->join(', ');
}); 
```

**数据**

```
__DATA__
<row>
<td> content1 </td>
<td> content2 </td>
<td> content3 </td>
</row>
<row>
<td> content4 </td>
<td> content5 </td>
<td> content6 </td>
</row> 
```

**输出**

```
content1, content2, content3
content4, content5, content6 
```

**一些评论**

*   **[each](http://mojolicio.us/perldoc/Mojo/Collection#each)**为集合的每个元素评估一个代码引用（这是**[find](http://mojolicio.us/perldoc/Mojo/DOM#find)**返回的）。
*   **[pluck](http://mojolicio.us/perldoc/Mojo/Collection#pluck)**返回一个 Mojo::Collection 对象，该对象具有给定方法名称的返回值（[在本例中为text](http://mojolicio.us/perldoc/Mojo/DOM#text)）。这只是**[映射](http://mojolicio.us/perldoc/Mojo/Collection#map)**简单事物的一种奇特方式。
*   **[text](http://mojolicio.us/perldoc/Mojo/DOM#text)**自动修剪元素内容。
*   **[join](http://mojolicio.us/perldoc/Mojo/Collection#join)**将 Mojo::Collection 对象的所有元素连接在一起，在这种情况下`td`是 a`row`
*   您的代码甚至无法编译，但使用**[at](http://mojolicio.us/perldoc/Mojo/DOM#at)**无论如何都不起作用，因为它只返回第一个匹配的 DOM 元素，而不是全部。您想迭代*所有*行。

！

# tsql - 分别在父/子存储过程中打开/关闭 XACT_ABORT 有什么影响？

> ID：13290997
> 
> 赞同：6
> 
> 时间：2012-11-08T14:31:28.170
> 
> 标签：tsql, error-handling, xact-abort

我正在尝试改进当前系统的错误处理以产生更有意义的错误消息。我有一个“根”存储过程，可以多次调用其他嵌套存储过程。

在根 sp 中，`XACT_ABORT`设置为 ，`ON`但在嵌套过程中，`XACT_ABORT`设置为`OFF`。我想从较低级别的程序中捕获特定错误，而不是获取根程序的错误。

我经常看到错误，`uncommittable transaction is detected at the end of the batch, the transaction is being rolled back.`

将这些“混合”环境与`XACT_ABORTs`?

此外，如果您对高级错误处理有任何建议，我们将不胜感激。我想我想使用`sp_executesql`这样我就可以传递参数来获取错误输出，而无需修改所有存储过程并使用它`RAISERROR`来调用父过程的`CATCH`块。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T11:05:29.673

根据[Andomar 在此处](https://stackoverflow.com/questions/8023183/how-to-set-set-xact-abort-on-in-a-sql-server-transaction#8023369)和[MSDN 的回答：](http://technet.microsoft.com/en-us/library/ms188792(v=sql.100).aspx)

> SET XACT_ABORT 的设置是在执行或运行时设置的，而不是在解析时设置的

即 `XACT_ABORT`不会从创建会话“复制”到每个过程，因此任何未在内部显式设置此选项的 PROC 将在运行时从环境会话继承设置，这可能是灾难性的。

FWIW，作为一般规则，我们始终确保`XACT_ABORT`全局开启并进行 lint 检查以确保我们的任何 PROC 都没有覆盖此设置。

但是请注意，这`XACT_ABORT`不是灵丹妙药 - 例如，[您的 PROC 使用 RAISERROR 引发的](http://www.sommarskog.se/error-handling-I.html#XACT_ABORT)错误不会终止批处理。但是，这似乎通过[SQL 2012 中的 THROW 关键字得到了改进](http://technet.microsoft.com/en-us/library/ms188792.aspx)

正如您所建议的那样，并且根据[Remus Rusanu 的观察](https://stackoverflow.com/questions/1150032/what-is-the-benefit-of-using-set-xact-abort-on-in-a-stored-procedure#1150350)，结构化异常处理 (TRY / CATCH) 是一种更加干净和健壮的异常处理机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-04T12:43:26.637

一种在调用可能调用其他 SP 的 SP 时保持 XACT_ABORT 开启并获取错误（如果有）或提交（如果一切正常）的方法：例如两个 sp 和三个测试

```
 create PROCEDURE [dbo].[myTestProcCalled]
    (
        @testin int=0
    )
    as
    begin

        declare @InnerTrans int 
        set XACT_ABORT on;

        set @InnerTrans = @@trancount;

        PRINT '02_01_Trancount='+cast (@InnerTrans as varchar(2));

        begin try
           if (@InnerTrans = 0)
           begin
                PRINT '02_02_beginning trans';
                begin transaction
           end 

           declare @t2 int
           set @t2=0
           PRINT '02_03_doing division'
           set @t2=10/@testin 

           PRINT '02_04_doing AfterStuff'
           if (@InnerTrans = 0 and XACT_STATE()=1)
             begin
                 PRINT '02_05_Committing'

                commit transaction
              end
              PRINT '02_05B_selecting calledValue=' +cast(@t2 as varchar(20))
              select  @t2 as insidevalue

        end try

        begin catch
         PRINT '02_06_Catching Errors from called'
              declare @ErrorMessage nvarchar(4000);
            declare @ErrorNumber int;
            declare @ErrorSeverity int;
            declare @ErrorState int;

            select @ErrorMessage = error_message(), @ErrorNumber = error_number(), @ErrorSeverity = error_severity(), @ErrorState = error_state();

            if (@InnerTrans = 0 and XACT_STATE()=-1)
            begin
              PRINT '02_07_Rolbacking'
              rollback transaction
            end
           PRINT '02_08_Rising Error'
            raiserror(@ErrorMessage, @ErrorSeverity, @ErrorState); 
            --use throw if in 2012 or above 
            -- else might add a "return" statement
        end catch

    end
    go

    create PROCEDURE [dbo].[myTestPCalling]
    (
        @test int=0
        ,@testinside int=0
    )
    as
    begin

        declare @InnerTrans int 
        set XACT_ABORT on;

        set @InnerTrans = @@trancount;

        PRINT '01_01_Trancount='+cast (@InnerTrans as varchar(2));

        begin try
           if (@InnerTrans = 0)
           begin
                PRINT '01_02_beginning trans';
                begin transaction
           end 

           declare @t2 int
           set @t2=0
           PRINT '01_03_doing division'
           set @t2=10/@test 
           PRINT '01_04_calling inside sp'
           execute [dbo].[myTestProcCalled]
                  @testin  = @testinside
           --
           PRINT '01_05_doing AfterStuff'
           if (@InnerTrans = 0 and XACT_STATE()=1)
             begin
                 PRINT '01_06_Committing'
                 commit transaction
                 PRINT '01_06B_selecting callerValue=' +cast(@t2 as varchar(20))
              select  @t2 as outsidevalue

              end
        end try

        begin catch
         PRINT '01_07_Catching Errors from Caller'
            declare @ErrorMessage nvarchar(4000);
            declare @ErrorNumber int;
            declare @ErrorSeverity int;
            declare @ErrorState int;

            select @ErrorMessage = error_message(), @ErrorNumber = error_number(), @ErrorSeverity = error_severity(), @ErrorState = error_state();
            if (@InnerTrans = 0 and XACT_STATE()=-1)
            begin
              PRINT '01_08_Rolbacking'
              rollback transaction
            end
            PRINT '01_09_Rising Error'
            raiserror(@ErrorMessage, @ErrorSeverity, @ErrorState); 
            --use throw if in 2012 or above 
            -- else might add a "return" statement
        end catch

    end

----test 1 :result OK----
USE [PRO-CGWEB]
GO

DECLARE @return_value int

EXEC    @return_value = [dbo].[myTestPCalling]
        @test =2
        ,@testinside = 2

SELECT  'Return Value' = @return_value

GO

----test2 :error in caller ----
USE [PRO-CGWEB]
GO

DECLARE @return_value int

EXEC    @return_value = [dbo].[myTestPCalling]
        @test =0
        ,@testinside = 2

SELECT  'Return Value' = @return_value

GO

----test3 :error in calling ----
USE [PRO-CGWEB]
GO

DECLARE @return_value int

EXEC    @return_value = [dbo].[myTestPCalling]
        @test =2
        ,@testinside = 0

SELECT  'Return Value' = @return_value

GO 
```